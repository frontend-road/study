{"id":455912,"title":"20ï½œæ§åˆ¶ç»“æ„ï¼šGoä¸­çš„switchè¯­å¥æœ‰å“ªäº›å˜åŒ–ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Tony Baiã€‚</p><p>ç»è¿‡å‰ä¸¤èŠ‚è¯¾çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†æ§åˆ¶ç»“æ„ä¸­çš„åˆ†æ”¯ç»“æ„ä»¥åŠå¾ªç¯ç»“æ„ã€‚å‰é¢æˆ‘ä»¬ä¹Ÿæåˆ°è¿‡ï¼Œåœ¨è®¡ç®—æœºä¸–ç•Œä¸­ï¼Œå†å¤æ‚çš„ç®—æ³•éƒ½å¯ä»¥é€šè¿‡é¡ºåºã€åˆ†æ”¯å’Œå¾ªç¯è¿™ä¸‰ç§åŸºæœ¬çš„æ§åˆ¶ç»“æ„æ„é€ å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œç†è®ºä¸Šè®²ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å…·å¤‡äº†å®ç°ä»»ä½•ç®—æ³•çš„èƒ½åŠ›äº†ã€‚</p><p>ä¸è¿‡ç†è®ºå½’ç†è®ºï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å›åˆ°ç°å®ä¸­æ¥ï¼Œç»§ç»­å­¦ä¹ Goè¯­è¨€ä¸­çš„æ§åˆ¶ç»“æ„ï¼Œç°åœ¨æˆ‘ä»¬è¿˜å·®ä¸€ç§åˆ†æ”¯æ§åˆ¶ç»“æ„æ²¡è®²ã€‚é™¤äº†ifè¯­å¥ä¹‹å¤–ï¼ŒGoè¯­è¨€è¿˜æä¾›äº†ä¸€ç§æ›´é€‚åˆå¤šè·¯åˆ†æ”¯æ‰§è¡Œçš„åˆ†æ”¯æ§åˆ¶ç»“æ„ï¼Œä¹Ÿå°±æ˜¯<strong>switchè¯­å¥</strong>ã€‚</p><p>ä»Šå¤©è¿™ä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±æ¥ç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹switchè¯­å¥ã€‚Goè¯­è¨€ä¸­çš„switchè¯­å¥ç»§æ‰¿è‡ªå®ƒçš„å…ˆç¥–Cè¯­è¨€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ä¸€è®²çš„é‡ç‚¹æ˜¯Go switchè¯­å¥ç›¸è¾ƒäºCè¯­è¨€çš„switchï¼Œæœ‰å“ªäº›é‡è¦çš„æ”¹è¿›ä¸åˆ›æ–°ã€‚</p><p>åœ¨è®²è§£æ”¹è¿›ä¸åˆ›æ–°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸€ä¸‹switchè¯­å¥ã€‚</p><h2>è®¤è¯†switchè¯­å¥</h2><p>æˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç›´è§‚åœ°æ„Ÿå—ä¸€ä¸‹switchè¯­å¥çš„ä¼˜ç‚¹ã€‚åœ¨ä¸€äº›æ‰§è¡Œåˆ†æ”¯è¾ƒå¤šçš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨switchåˆ†æ”¯æ§åˆ¶è¯­å¥å¯ä»¥è®©ä»£ç æ›´ç®€æ´ï¼Œå¯è¯»æ€§æ›´å¥½ã€‚</p><p>æ¯”å¦‚ä¸‹é¢ä¾‹å­ä¸­çš„readByExtå‡½æ•°ä¼šæ ¹æ®ä¼ å…¥çš„æ–‡ä»¶æ‰©å±•åè¾“å‡ºä¸åŒçš„æ—¥å¿—ï¼Œå®ƒä½¿ç”¨äº†ifè¯­å¥è¿›è¡Œåˆ†æ”¯æ§åˆ¶ï¼š</p><pre><code class=\"language-plain\">func readByExt(ext string) {\n    if ext == \"json\" {\n        println(\"read json file\")\n    } else if ext == \"jpg\" || ext == \"jpeg\" || ext == \"png\" || ext == \"gif\" {\n        println(\"read image file\")\n    } else if ext == \"txt\" || ext == \"md\" {\n        println(\"read text file\")\n    } else if ext == \"yml\" || ext == \"yaml\" {\n        println(\"read yaml file\")\n    } else if ext == \"ini\" {\n        println(\"read ini file\")\n    } else {\n        println(\"unsupported file extension:\", ext)\n    }\n}\n</code></pre><!-- [[[read_end]]] --><p>å¦‚æœç”¨switchæ”¹å†™ä¸Šè¿°ä¾‹å­ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å†™ï¼š</p><pre><code class=\"language-plain\">func readByExtBySwitch(ext string) {\n    switch ext {\n    case \"json\":\n        println(\"read json file\")\n    case \"jpg\", \"jpeg\", \"png\", \"gif\":\n        println(\"read image file\")\n    case \"txt\", \"md\":\n        println(\"read text file\")\n    case \"yml\", \"yaml\":\n        println(\"read yaml file\")\n    case \"ini\":\n        println(\"read ini file\")\n    default:\n        println(\"unsupported file extension:\", ext)\n    }\n}\n</code></pre><p>ä»ä»£ç å‘ˆç°çš„è§’åº¦æ¥çœ‹ï¼Œé’ˆå¯¹è¿™ä¸ªä¾‹å­ï¼Œä½¿ç”¨switchè¯­å¥çš„å®ç°è¦æ¯”ifè¯­å¥çš„å®ç°æ›´åŠ ç®€æ´ç´§å‡‘ã€‚å¹¶ä¸”ï¼Œå³ä¾¿ä½ è¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰ç³»ç»Ÿå­¦è¿‡switchè¯­å¥ï¼Œç›¸ä¿¡ä½ ä¹Ÿèƒ½å¤§è‡´è¯»æ‡‚ä¸Šé¢readByExtBySwitchçš„æ‰§è¡Œé€»è¾‘ã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒreadByExtBySwitchå‡½æ•°å°±æ˜¯å°†è¾“å…¥å‚æ•°extä¸æ¯ä¸ªcaseè¯­å¥åé¢çš„è¡¨è¾¾å¼åšæ¯”è¾ƒï¼Œå¦‚æœç›¸ç­‰ï¼Œå°±æ‰§è¡Œè¿™ä¸ªcaseè¯­å¥åé¢çš„åˆ†æ”¯ï¼Œç„¶åå‡½æ•°è¿”å›ã€‚è¿™é‡Œå…·ä½“çš„æ‰§è¡Œé€»è¾‘ï¼Œæˆ‘ä»¬åœ¨åé¢å†åˆ†æï¼Œç°åœ¨ä½ æœ‰ä¸ªå¤§æ¦‚è®¤è¯†å°±å¥½äº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥è¿›å…¥æ­£é¢˜ï¼Œæ¥çœ‹çœ‹Goè¯­è¨€ä¸­switchè¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š</p><pre><code class=\"language-plain\">switch initStmt; expr {\n    case expr1:\n        // æ‰§è¡Œåˆ†æ”¯1\n    case expr2:\n        // æ‰§è¡Œåˆ†æ”¯2\n    case expr3_1, expr3_2, expr3_3:\n        // æ‰§è¡Œåˆ†æ”¯3\n    case expr4:\n        // æ‰§è¡Œåˆ†æ”¯4\n    ... ...\n    case exprN:\n        // æ‰§è¡Œåˆ†æ”¯N\n    default: \n        // æ‰§è¡Œé»˜è®¤åˆ†æ”¯\n}\n</code></pre><p>æˆ‘ä»¬æŒ‰è¯­å¥é¡ºåºæ¥åˆ†æä¸€ä¸‹ã€‚é¦–å…ˆçœ‹è¿™ä¸ªswitchè¯­å¥ä¸€èˆ¬å½¢å¼ä¸­çš„ç¬¬ä¸€è¡Œï¼Œè¿™ä¸€è¡Œç”±switchå…³é”®å­—å¼€å§‹ï¼Œå®ƒçš„åé¢é€šå¸¸æ¥ç€ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆexprï¼‰ï¼Œè¿™å¥ä¸­çš„initStmtæ˜¯ä¸€ä¸ªå¯é€‰çš„ç»„æˆéƒ¨åˆ†ã€‚å’Œifã€forè¯­å¥ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨initStmtä¸­é€šè¿‡çŸ­å˜é‡å£°æ˜å®šä¹‰ä¸€äº›åœ¨switchè¯­å¥ä¸­ä½¿ç”¨çš„ä¸´æ—¶å˜é‡ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œswitchåé¢çš„å¤§æ‹¬å·å†…æ˜¯ä¸€ä¸ªä¸ªä»£ç æ‰§è¡Œåˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯ä»¥caseå…³é”®å­—å¼€å§‹ï¼Œæ¯ä¸ªcaseåé¢æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼æˆ–æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„è¡¨è¾¾å¼åˆ—è¡¨ã€‚è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªä»¥defaultå…³é”®å­—å¼€å§‹çš„ç‰¹æ®Šåˆ†æ”¯ï¼Œè¢«ç§°ä¸º<strong>é»˜è®¤åˆ†æ”¯</strong>ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å†æ¥çœ‹switchè¯­å¥çš„æ‰§è¡Œæµç¨‹ã€‚å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œswitchè¯­å¥ä¼šç”¨exprçš„æ±‚å€¼ç»“æœä¸å„ä¸ªcaseä¸­çš„è¡¨è¾¾å¼ç»“æœè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå‘ç°åŒ¹é…çš„caseï¼Œä¹Ÿå°±æ˜¯caseåé¢çš„è¡¨è¾¾å¼ï¼Œæˆ–è€…è¡¨è¾¾å¼åˆ—è¡¨ä¸­ä»»æ„ä¸€ä¸ªè¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœä¸exprçš„æ±‚å€¼ç»“æœç›¸åŒï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œè¯¥caseå¯¹åº”çš„ä»£ç åˆ†æ”¯ï¼Œåˆ†æ”¯æ‰§è¡Œåï¼Œswitchè¯­å¥ä¹Ÿå°±ç»“æŸäº†ã€‚å¦‚æœæ‰€æœ‰caseè¡¨è¾¾å¼éƒ½æ— æ³•ä¸expråŒ¹é…ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šæ‰§è¡Œdefaulté»˜è®¤åˆ†æ”¯ï¼Œå¹¶ä¸”ç»“æŸswitchè¯­å¥ã€‚</p><p>é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼åœ¨æœ‰å¤šä¸ªcaseæ‰§è¡Œåˆ†æ”¯çš„switchè¯­å¥ä¸­ï¼Œ<strong>Goæ˜¯æŒ‰ä»€ä¹ˆæ¬¡åºå¯¹å„ä¸ªcaseè¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œå¹¶ä¸”ä¸switchè¡¨è¾¾å¼ï¼ˆexprï¼‰è¿›è¡Œæ¯”è¾ƒçš„</strong>ï¼Ÿ</p><p>æˆ‘ä»¬é€šè¿‡ä¸€æ®µç¤ºä¾‹ä»£ç æ¥å›ç­”è¿™ä¸ªé—®é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ªä¸€èˆ¬å½¢å¼çš„switchè¯­å¥ï¼Œä¸ºäº†èƒ½å‘ˆç°switchè¯­å¥çš„æ‰§è¡Œæ¬¡åºï¼Œæˆ‘ä»¥å¤šä¸ªè¾“å‡ºç‰¹å®šæ—¥å¿—çš„å‡½æ•°ä½œä¸ºswitchè¡¨è¾¾å¼ä»¥åŠå„ä¸ªcaseè¡¨è¾¾å¼ï¼š</p><pre><code class=\"language-plain\">func case1() int {\n    println(\"eval case1 expr\")\n    return 1\n}\n\nfunc case2_1() int {\n    println(\"eval case2_1 expr\")\n    return 0 \n}\nfunc case2_2() int {\n    println(\"eval case2_2 expr\")\n    return 2 \n}\n\nfunc case3() int {\n    println(\"eval case3 expr\")\n    return 3\n}\n\nfunc switchexpr() int {\n    println(\"eval switch expr\")\n    return 2\n}\n\nfunc main() {\n    switch switchexpr() {\n    case case1():\n        println(\"exec case1\")\n    case case2_1(), case2_2():\n        println(\"exec case2\")\n    case case3():\n        println(\"exec case3\")\n    default:\n        println(\"exec default\")\n    }\n}\n</code></pre><p>æ‰§è¡Œä¸€ä¸‹è¿™ä¸ªç¤ºä¾‹ç¨‹åºï¼Œæˆ‘ä»¬å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><pre><code class=\"language-plain\">eval switch expr\neval case1 expr\neval case2_1 expr\neval case2_2 expr\nexec case2\n</code></pre><p>ä»è¾“å‡ºç»“æœä¸­æˆ‘ä»¬çœ‹åˆ°ï¼ŒGoå…ˆå¯¹switch exprè¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œç„¶åå†æŒ‰caseè¯­å¥çš„å‡ºç°é¡ºåºï¼Œä»ä¸Šåˆ°ä¸‹è¿›è¡Œé€ä¸€æ±‚å€¼ã€‚åœ¨å¸¦æœ‰è¡¨è¾¾å¼åˆ—è¡¨çš„caseè¯­å¥ä¸­ï¼ŒGoä¼šä»å·¦åˆ°å³ï¼Œå¯¹åˆ—è¡¨ä¸­çš„è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œæ¯”å¦‚ç¤ºä¾‹ä¸­çš„case2_1å‡½æ•°å°±æ‰§è¡Œäºcase2_2å‡½æ•°ä¹‹å‰ã€‚</p><p>å¦‚æœswitchè¡¨è¾¾å¼åŒ¹é…åˆ°äº†æŸä¸ªcaseè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šæ‰§è¡Œè¿™ä¸ªcaseå¯¹åº”çš„ä»£ç åˆ†æ”¯ï¼Œæ¯”å¦‚ç¤ºä¾‹ä¸­çš„â€œexec case2â€ã€‚è¿™ä¸ªåˆ†æ”¯åé¢çš„caseè¡¨è¾¾å¼å°†ä¸ä¼šå†å¾—åˆ°æ±‚å€¼æœºä¼šï¼Œæ¯”å¦‚ç¤ºä¾‹ä¸ä¼šæ‰§è¡Œcase3å‡½æ•°ã€‚è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼Œå³ä¾¿åé¢çš„caseè¡¨è¾¾å¼æ±‚å€¼åä¹Ÿèƒ½ä¸switchè¡¨è¾¾å¼åŒ¹é…ä¸Šï¼ŒGoä¹Ÿä¸ä¼šç»§ç»­å»å¯¹è¿™äº›è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼äº†ã€‚</p><p>é™¤äº†è¿™ä¸€ç‚¹å¤–ï¼Œä½ è¿˜è¦æ³¨æ„defaultåˆ†æ”¯ã€‚<strong>æ— è®ºdefaultåˆ†æ”¯å‡ºç°åœ¨ä»€ä¹ˆä½ç½®ï¼Œå®ƒéƒ½åªä¼šåœ¨æ‰€æœ‰caseéƒ½æ²¡æœ‰åŒ¹é…ä¸Šçš„æƒ…å†µä¸‹æ‰ä¼šè¢«æ‰§è¡Œçš„ã€‚</strong></p><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œè¿™é‡Œå…¶å®æœ‰ä¸€ä¸ªä¼˜åŒ–å°æŠ€å·§ï¼Œè€ƒè™‘åˆ°switchè¯­å¥æ˜¯æŒ‰ç…§caseå‡ºç°çš„å…ˆåé¡ºåºå¯¹caseè¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼çš„ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬å°†åŒ¹é…æˆåŠŸæ¦‚ç‡é«˜çš„caseè¡¨è¾¾å¼æ’åœ¨å‰é¢ï¼Œå°±ä¼šæœ‰åŠ©äºæå‡switchè¯­å¥æ‰§è¡Œæ•ˆç‡ã€‚è¿™ç‚¹å¯¹äºcaseåé¢æ˜¯è¡¨è¾¾å¼åˆ—è¡¨çš„è¯­å¥åŒæ ·æœ‰æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥å°†åŒ¹é…æ¦‚ç‡æœ€é«˜çš„è¡¨è¾¾å¼æ”¾åœ¨è¡¨è¾¾å¼åˆ—è¡¨çš„æœ€å·¦ä¾§ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†switchè¯­å¥çš„ä¸€èˆ¬å½¢å¼ä»¥åŠæ‰§è¡Œæ¬¡åºã€‚æœ‰äº†è¿™ä¸ªåŸºç¡€åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™èŠ‚è¯¾é‡ç‚¹ï¼šGoè¯­è¨€çš„switchè¯­å¥å’Œå®ƒçš„â€œå…ˆç¥–â€Cè¯­è¨€ä¸­çš„Switchè¯­å¥ç›¸æ¯”ï¼Œéƒ½æœ‰å“ªäº›ä¼˜åŒ–ä¸åˆ›æ–°ï¼Ÿ</p><h2>switchè¯­å¥çš„çµæ´»æ€§</h2><p>ä¸ºæ–¹ä¾¿å¯¹æ¯”ï¼Œæˆ‘ä»¬å…ˆæ¥ç®€å•äº†è§£ä¸€ä¸‹Cè¯­è¨€ä¸­çš„switchè¯­å¥ã€‚Cè¯­è¨€ä¸­çš„switchè¯­å¥å¯¹è¡¨è¾¾å¼ç±»å‹æœ‰é™åˆ¶ï¼Œæ¯ä¸ªcaseè¯­å¥åªå¯ä»¥æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ã€‚è€Œä¸”ï¼Œé™¤éä½ æ˜¾å¼ä½¿ç”¨breakè·³å‡ºï¼Œç¨‹åºé»˜è®¤æ€»æ˜¯æ‰§è¡Œä¸‹ä¸€ä¸ªcaseè¯­å¥ã€‚è¿™äº›ç‰¹æ€§å¼€å‘äººå‘˜å¸¦æ¥äº†ä½¿ç”¨ä¸Šçš„å¿ƒæ™ºè´Ÿæ‹…ã€‚</p><p>ç›¸è¾ƒäºCè¯­è¨€ä¸­switchè¯­å¥çš„â€œæ­»æ¿â€ï¼ŒGoçš„switchè¯­å¥è¡¨ç°å‡ºæå¤§çš„çµæ´»æ€§ï¼Œä¸»è¦è¡¨ç°åœ¨å¦‚ä¸‹å‡ æ–¹é¢ï¼š</p><p><strong>é¦–å…ˆï¼Œswitchè¯­å¥å„è¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœå¯ä»¥ä¸ºå„ç§ç±»å‹å€¼ï¼Œåªè¦å®ƒçš„ç±»å‹æ”¯æŒæ¯”è¾ƒæ“ä½œå°±å¯ä»¥äº†ã€‚</strong></p><p>Cè¯­è¨€ä¸­ï¼Œswitchè¯­å¥ä¸­ä½¿ç”¨çš„æ‰€æœ‰è¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœåªèƒ½æ˜¯intæˆ–æšä¸¾ç±»å‹ï¼Œå…¶ä»–ç±»å‹éƒ½ä¼šè¢«Cç¼–è¯‘å™¨æ‹’ç»ã€‚</p><p>Goè¯­è¨€å°±å®½å®¹å¾—å¤šäº†ï¼Œåªè¦ç±»å‹æ”¯æŒæ¯”è¾ƒæ“ä½œï¼Œéƒ½å¯ä»¥ä½œä¸ºswitchè¯­å¥ä¸­çš„è¡¨è¾¾å¼ç±»å‹ã€‚æ¯”å¦‚æ•´å‹ã€å¸ƒå°”ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€å¤æ•°ç±»å‹ã€å…ƒç´ ç±»å‹éƒ½æ˜¯å¯æ¯”è¾ƒç±»å‹çš„æ•°ç»„ç±»å‹ï¼Œç”šè‡³å­—æ®µç±»å‹éƒ½æ˜¯å¯æ¯”è¾ƒç±»å‹çš„ç»“æ„ä½“ç±»å‹ï¼Œä¹Ÿå¯ä»¥ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªä½¿ç”¨è‡ªå®šä¹‰ç»“æ„ä½“ç±»å‹ä½œä¸ºswitchè¡¨è¾¾å¼ç±»å‹çš„ä¾‹å­ï¼š</p><pre><code class=\"language-plain\">type person struct {\n    name string\n    age  int\n}\n\nfunc main() {\n    p := person{\"tom\", 13}\n    switch p {\n    case person{\"tony\", 33}:\n        println(\"match tony\")\n    case person{\"tom\", 13}:\n        println(\"match tom\")\n    case person{\"lucy\", 23}:\n        println(\"match lucy\")\n    default:\n        println(\"no match\")\n    }\n}\n</code></pre><p>ä¸è¿‡ï¼Œå®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä»¥ç»“æ„ä½“ç±»å‹ä¸ºswitchè¡¨è¾¾å¼ç±»å‹çš„æƒ…å†µå¹¶ä¸å¸¸è§ï¼Œè¿™é‡Œä¸¾è¿™ä¸ªä¾‹å­ä»…æ˜¯ä¸ºäº†è¯´æ˜Go switchè¯­å¥å¯¹å„ç§ç±»å‹æ”¯æŒçš„å¹¿æ³›æ€§ã€‚</p><p>è€Œä¸”ï¼Œå½“switchè¡¨è¾¾å¼çš„ç±»å‹ä¸ºå¸ƒå°”ç±»å‹æ—¶ï¼Œå¦‚æœæ±‚å€¼ç»“æœå§‹ç»ˆä¸ºtrueï¼Œé‚£ä¹ˆæˆ‘ä»¬ç”šè‡³å¯ä»¥çœç•¥switchåé¢çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ä¸‹é¢ä¾‹å­ï¼š</p><pre><code class=\"language-plain\">// å¸¦æœ‰initStmtè¯­å¥çš„switchè¯­å¥\nswitch initStmt; {\n    case bool_expr1:\n    case bool_expr2:\n    ... ...\n}\n\n// æ²¡æœ‰initStmtè¯­å¥çš„switchè¯­å¥\nswitch {\n    case bool_expr1:\n    case bool_expr2:\n    ... ...\n}\n</code></pre><p>ä¸è¿‡ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œåœ¨å¸¦æœ‰initStmtçš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬çœç•¥switchè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆinitStmtåé¢çš„åˆ†å·ä¸èƒ½çœç•¥ï¼Œå› ä¸ºinitStmtæ˜¯ä¸€ä¸ªè¯­å¥ã€‚</p><p><strong>ç¬¬äºŒç‚¹ï¼šswitchè¯­å¥æ”¯æŒå£°æ˜ä¸´æ—¶å˜é‡ã€‚</strong></p><p>åœ¨å‰é¢ä»‹ç»switchè¯­å¥çš„ä¸€èˆ¬å½¢å¼ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œå’Œifã€forç­‰æ§åˆ¶ç»“æ„è¯­å¥ä¸€æ ·ï¼Œswitchè¯­å¥çš„initStmtå¯ç”¨æ¥å£°æ˜åªåœ¨è¿™ä¸ªswitchéšå¼ä»£ç å—ä¸­ä½¿ç”¨çš„å˜é‡ï¼Œè¿™ç§å°±è¿‘å£°æ˜çš„å˜é‡æœ€å¤§ç¨‹åº¦åœ°ç¼©å°äº†å˜é‡çš„ä½œç”¨åŸŸã€‚</p><p><strong>ç¬¬ä¸‰ç‚¹ï¼šcaseè¯­å¥æ”¯æŒè¡¨è¾¾å¼åˆ—è¡¨ã€‚</strong></p><p>åœ¨Cè¯­è¨€ä¸­ï¼Œå¦‚æœè¦è®©å¤šä¸ªcaseåˆ†æ”¯çš„æ‰§è¡Œç›¸åŒçš„ä»£ç é€»è¾‘ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡ä¸‹é¢çš„æ–¹å¼å®ç°ï¼š</p><pre><code class=\"language-plain\">void check_work_day(int a) {\n    switch(a) {\n        case 1:\n        case 2:\n        case 3:\n        case 4:\n        case 5:\n            printf(\"it is a work day\\n\");\n            break;\n        case 6:\n        case 7:\n            printf(\"it is a weekend day\\n\");\n            break;\n        default:\n            printf(\"do you live on earth?\\n\");\n    }\n}\n</code></pre><p>åœ¨ä¸Šé¢è¿™æ®µCä»£ç ä¸­ï¼Œcase 1~case 5åŒ¹é…æˆåŠŸåï¼Œæ‰§è¡Œçš„éƒ½æ˜¯case 5ä¸­çš„ä»£ç é€»è¾‘ï¼Œcase 6~case 7åŒ¹é…æˆåŠŸåï¼Œæ‰§è¡Œçš„éƒ½æ˜¯case 7ä¸­çš„ä»£ç é€»è¾‘ã€‚</p><p>ä¹‹æ‰€ä»¥å¯ä»¥å®ç°è¿™æ ·çš„é€»è¾‘ï¼Œæ˜¯å› ä¸ºå½“Cè¯­è¨€ä¸­çš„switchè¯­å¥åŒ¹é…åˆ°æŸä¸ªcaseåï¼Œå¦‚æœè¿™ä¸ªcaseå¯¹åº”çš„ä»£ç é€»è¾‘ä¸­æ²¡æœ‰breakè¯­å¥ï¼Œé‚£ä¹ˆä»£ç å°†ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcaseã€‚æ¯”å¦‚å½“a = 3æ—¶ï¼Œcase 3åé¢çš„ä»£ç ä¸ºç©ºé€»è¾‘ï¼Œå¹¶ä¸”æ²¡æœ‰breakè¯­å¥ï¼Œé‚£ä¹ˆCä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œcase4ã€case5ï¼Œç›´åˆ°åœ¨case 5ä¸­è°ƒç”¨äº†breakï¼Œä»£ç æ‰§è¡Œæµæ‰ç¦»å¼€switchè¯­å¥ã€‚</p><p>è¿™æ ·çœ‹ï¼Œè™½ç„¶Cä¹Ÿèƒ½å®ç°å¤šcaseè¯­å¥æ‰§è¡ŒåŒä¸€é€»è¾‘çš„åŠŸèƒ½ï¼Œä½†åœ¨caseåˆ†æ”¯è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œä»£ç ä¼šæ˜¾å¾—ååˆ†å†—é•¿ã€‚</p><p>Goè¯­è¨€ä¸­çš„å¤„ç†è¦å¥½å¾—å¤šã€‚Goè¯­è¨€ä¸­ï¼Œswitchè¯­å¥åœ¨caseä¸­æ”¯æŒè¡¨è¾¾å¼åˆ—è¡¨ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è¡¨è¾¾å¼åˆ—è¡¨å®ç°ä¸ä¸Šé¢çš„ç¤ºä¾‹ç›¸åŒçš„å¤„ç†é€»è¾‘ï¼š</p><pre><code class=\"language-plain\">func checkWorkday(a int) {\n    switch a {\n    case 1, 2, 3, 4, 5:\n        println(\"it is a work day\")\n    case 6, 7:\n        println(\"it is a weekend day\")\n    default:\n        println(\"are you live on earth\")\n    }\n}\n</code></pre><p>æ ¹æ®å‰é¢æˆ‘ä»¬è®²è¿‡çš„switchè¯­å¥çš„æ‰§è¡Œæ¬¡åºï¼Œç†è§£ä¸Šé¢è¿™ä¸ªä¾‹å­åº”è¯¥ä¸éš¾ã€‚å’ŒCè¯­è¨€å®ç°ç›¸æ¯”ï¼Œä½¿ç”¨caseè¡¨è¾¾å¼åˆ—è¡¨çš„Goå®ç°ç®€å•ã€æ¸…æ™°ã€æ˜“æ‡‚ã€‚</p><p><strong>ç¬¬å››ç‚¹ï¼šå–æ¶ˆäº†é»˜è®¤æ‰§è¡Œä¸‹ä¸€ä¸ªcaseä»£ç é€»è¾‘çš„è¯­ä¹‰ã€‚</strong></p><p>åœ¨å‰é¢çš„æè¿°å’Œcheck_work_dayè¿™ä¸ªCä»£ç ç¤ºä¾‹ä¸­ï¼Œä½ éƒ½èƒ½æ„Ÿå—åˆ°ï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œå¦‚æœåŒ¹é…åˆ°çš„caseå¯¹åº”çš„ä»£ç åˆ†æ”¯ä¸­æ²¡æœ‰æ˜¾å¼è°ƒç”¨breakè¯­å¥ï¼Œé‚£ä¹ˆä»£ç å°†ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcaseçš„ä»£ç åˆ†æ”¯ï¼Œè¿™ç§â€œéšå¼è¯­ä¹‰â€å¹¶ä¸ç¬¦åˆæ—¥å¸¸ç®—æ³•çš„å¸¸è§„é€»è¾‘ï¼Œè¿™ä¹Ÿç»å¸¸è¢«è¯Ÿç—…ä¸ºCè¯­è¨€çš„ä¸€ä¸ªç¼ºé™·ã€‚è¦ä¿®å¤è¿™ä¸ªç¼ºé™·ï¼Œæˆ‘ä»¬åªèƒ½åœ¨æ¯ä¸ªcaseæ‰§è¡Œè¯­å¥ä¸­éƒ½æ˜¾å¼è°ƒç”¨breakã€‚</p><p>Goè¯­è¨€ä¸­çš„Swithè¯­å¥å°±ä¿®å¤äº†Cè¯­è¨€çš„è¿™ä¸ªç¼ºé™·ï¼Œå–æ¶ˆäº†é»˜è®¤æ‰§è¡Œä¸‹ä¸€ä¸ªcaseä»£ç é€»è¾‘çš„â€œéå¸¸è§„â€è¯­ä¹‰ï¼Œæ¯ä¸ªcaseå¯¹åº”çš„åˆ†æ”¯ä»£ç æ‰§è¡Œå®Œåå°±ç»“æŸswitchè¯­å¥ã€‚</p><p>å¦‚æœåœ¨å°‘æ•°åœºæ™¯ä¸‹ï¼Œä½ éœ€è¦æ‰§è¡Œä¸‹ä¸€ä¸ªcaseçš„ä»£ç é€»è¾‘ï¼Œä½ å¯ä»¥æ˜¾å¼ä½¿ç”¨Goæä¾›çš„å…³é”®å­—fallthroughæ¥å®ç°ï¼Œè¿™ä¹Ÿæ˜¯Goâ€œæ˜¾å¼â€è®¾è®¡å“²å­¦çš„ä¸€ä¸ªä½“ç°ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªä½¿ç”¨fallthroughçš„switchè¯­å¥çš„ä¾‹å­ï¼Œæˆ‘ä»¬ç®€å•æ¥çœ‹ä¸€ä¸‹ï¼š</p><pre><code class=\"language-plain\">func case1() int {\n    println(\"eval case1 expr\")\n    return 1\n}\n\nfunc case2() int {\n    println(\"eval case2 expr\")\n    return 2\n}\n\nfunc switchexpr() int {\n    println(\"eval switch expr\")\n    return 1\n}\n\nfunc main() {\n    switch switchexpr() {\n    case case1():\n        println(\"exec case1\")\n        fallthrough\n    case case2():\n        println(\"exec case2\")\n        fallthrough\n    default:\n        println(\"exec default\")\n    }\n}\n</code></pre><p>æ‰§è¡Œä¸€ä¸‹è¿™ä¸ªç¤ºä¾‹ç¨‹åºï¼Œæˆ‘ä»¬å¾—åˆ°è¿™æ ·çš„ç»“æœï¼š</p><pre><code class=\"language-plain\">eval switch expr\neval case1 expr\nexec case1\nexec case2\nexec default\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œswitch exprçš„æ±‚å€¼ç»“æœä¸case1åŒ¹é…æˆåŠŸï¼ŒGoæ‰§è¡Œäº†case1å¯¹åº”çš„ä»£ç åˆ†æ”¯ã€‚è€Œä¸”ï¼Œç”±äºcase1ä»£ç åˆ†æ”¯ä¸­æ˜¾å¼ä½¿ç”¨äº†fallthroughï¼Œæ‰§è¡Œå®Œcase1åï¼Œä»£ç æ‰§è¡Œæµå¹¶æ²¡æœ‰ç¦»å¼€switchè¯­å¥ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcaseï¼Œä¹Ÿå°±æ˜¯case2çš„ä»£ç åˆ†æ”¯ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªæ³¨æ„ç‚¹ï¼Œç”±äºfallthroughçš„å­˜åœ¨ï¼ŒGoä¸ä¼šå¯¹case2çš„è¡¨è¾¾å¼åšæ±‚å€¼æ“ä½œï¼Œè€Œä¼šç›´æ¥æ‰§è¡Œcase2å¯¹åº”çš„ä»£ç åˆ†æ”¯ã€‚è€Œä¸”ï¼Œåœ¨è¿™é‡Œcase2ä¸­çš„ä»£ç åˆ†æ”¯ä¹Ÿæ˜¾å¼ä½¿ç”¨äº†fallthroughï¼Œäºæ˜¯æœ€åä¸€ä¸ªä»£ç åˆ†æ”¯ï¼Œä¹Ÿå°±æ˜¯defaultåˆ†æ”¯å¯¹åº”çš„ä»£ç ä¹Ÿè¢«æ‰§è¡Œäº†ã€‚</p><p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæŸä¸ªcaseè¯­å¥å·²ç»æ˜¯switchè¯­å¥ä¸­çš„æœ€åä¸€ä¸ªcaseäº†ï¼Œå¹¶ä¸”å®ƒçš„åé¢ä¹Ÿæ²¡æœ‰defaultåˆ†æ”¯äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªcaseä¸­å°±ä¸èƒ½å†ä½¿ç”¨fallthroughï¼Œå¦åˆ™ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°Goçš„switchè¯­å¥ä¸ä»…ä¿®å¤äº†Cè¯­è¨€switchçš„ç¼ºé™·ï¼Œè¿˜ä¸ºGoå¼€å‘äººå‘˜æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´å¤šç±»å‹è¡¨è¾¾å¼ä½œä¸ºswitchè¡¨è¾¾å¼ç±»å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨caseè¡¨è¾¾å¼åˆ—è¡¨ç®€åŒ–å®ç°é€»è¾‘ï¼Œè¿˜å¯ä»¥è‡ªè¡Œæ ¹æ®éœ€è¦ï¼Œç¡®å®šæ˜¯å¦ä½¿ç”¨fallthroughå…³é”®å­—ç»§ç»­å‘ä¸‹æ‰§è¡Œä¸‹ä¸€ä¸ªcaseçš„ä»£ç åˆ†æ”¯ã€‚</p><p>é™¤äº†è¿™äº›ä¹‹å¤–ï¼ŒGoè¯­è¨€çš„switchè¯­å¥è¿˜æ”¯æŒæ±‚å€¼ç»“æœä¸ºç±»å‹ä¿¡æ¯çš„è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯type switchè¯­å¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¯¦ç»†åˆ†æä¸€ä¸‹ã€‚</p><h2>type switch</h2><p>â€œtype switchâ€è¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„switchè¯­å¥ç”¨æ³•ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹ä¸€ä¸‹å®ƒå…·ä½“çš„ä½¿ç”¨å½¢å¼ï¼š</p><pre><code class=\"language-plain\">func main() {\n    var x interface{} = 13\n    switch x.(type) {\n    case nil:\n        println(\"x is nil\")\n    case int:\n        println(\"the type of x is int\")\n    case string:\n        println(\"the type of x is string\")\n    case bool:\n        println(\"the type of x is string\")\n    default:\n        println(\"don't support the type\")\n    }\n}\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸ªä¾‹å­ä¸­switchè¯­å¥çš„å½¢å¼ä¸å‰é¢æ˜¯ä¸€è‡´çš„ï¼Œä¸åŒçš„æ˜¯switchä¸caseä¸¤ä¸ªå…³é”®å­—åé¢è·Ÿç€çš„è¡¨è¾¾å¼ã€‚</p><p>switchå…³é”®å­—åé¢è·Ÿç€çš„è¡¨è¾¾å¼ä¸º <code>x.(type)</code> ï¼Œè¿™ç§è¡¨è¾¾å¼å½¢å¼æ˜¯switchè¯­å¥ä¸“æœ‰çš„ï¼Œè€Œä¸”ä¹Ÿåªèƒ½åœ¨switchè¯­å¥ä¸­ä½¿ç”¨ã€‚è¿™ä¸ªè¡¨è¾¾å¼ä¸­çš„<strong>xå¿…é¡»æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹å˜é‡</strong>ï¼Œè¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœæ˜¯è¿™ä¸ªæ¥å£ç±»å‹å˜é‡å¯¹åº”çš„åŠ¨æ€ç±»å‹ã€‚</p><p>ä»€ä¹ˆæ˜¯ä¸€ä¸ªæ¥å£ç±»å‹çš„åŠ¨æ€ç±»å‹å‘¢ï¼Ÿæˆ‘ä»¬ç®€å•è§£é‡Šä¸€ä¸‹ã€‚ä»¥ä¸Šé¢çš„ä»£ç  <code>var x interface{} = 13</code> ä¸ºä¾‹ï¼Œxæ˜¯ä¸€ä¸ªæ¥å£ç±»å‹å˜é‡ï¼Œå®ƒçš„é™æ€ç±»å‹ä¸º <code>interface{}</code> ï¼Œå¦‚æœæˆ‘ä»¬å°†æ•´å‹å€¼13èµ‹å€¼ç»™xï¼Œxè¿™ä¸ªæ¥å£å˜é‡çš„åŠ¨æ€ç±»å‹å°±ä¸ºintã€‚å…³äºæ¥å£ç±»å‹å˜é‡çš„åŠ¨æ€ç±»å‹ï¼Œæˆ‘ä»¬åé¢è¿˜ä¼šè¯¦ç»†è®²ï¼Œè¿™é‡Œå…ˆç®€å•äº†è§£ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p><p>æ¥ç€ï¼Œcaseå…³é”®å­—åé¢æ¥çš„å°±ä¸æ˜¯æ™®é€šæ„ä¹‰ä¸Šçš„è¡¨è¾¾å¼äº†ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸ªå…·ä½“çš„ç±»å‹ã€‚è¿™æ ·ï¼ŒGoå°±èƒ½ä½¿ç”¨å˜é‡xçš„åŠ¨æ€ç±»å‹ä¸å„ä¸ªcaseä¸­çš„ç±»å‹è¿›è¡ŒåŒ¹é…ï¼Œä¹‹åçš„é€»è¾‘å°±éƒ½æ˜¯ä¸€æ ·çš„äº†ã€‚</p><p>ç°åœ¨æˆ‘ä»¬è¿è¡Œä¸Šé¢ç¤ºä¾‹ç¨‹åºï¼Œè¾“å‡ºäº†xçš„åŠ¨æ€å˜é‡ç±»å‹ï¼š</p><pre><code class=\"language-plain\">the type of x is int\n</code></pre><p>ä¸è¿‡ï¼Œé€šè¿‡ <code>x.(type)</code> ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥è·å¾—å˜é‡xçš„åŠ¨æ€ç±»å‹ä¿¡æ¯ä¹‹å¤–ï¼Œä¹Ÿèƒ½è·å¾—å…¶åŠ¨æ€ç±»å‹å¯¹åº”çš„å€¼ä¿¡æ¯ï¼Œç°åœ¨æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¾‹å­æ”¹é€ ä¸€ä¸‹ï¼š</p><pre><code class=\"language-plain\">func main() {\n    var x interface{} = 13\n    switch v := x.(type) {\n    case nil:\n        println(\"v is nil\")\n    case int:\n        println(\"the type of v is int, v =\", v)\n    case string:\n        println(\"the type of v is string, v =\", v)\n    case bool:\n        println(\"the type of v is bool, v =\", v)\n    default:\n        println(\"don't support the type\")\n    }\n}\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬å°†switchåé¢çš„è¡¨è¾¾å¼ç”± <code>x.(type)</code> æ¢æˆäº† <code>v := x.(type)</code> ã€‚å¯¹äºåè€…ï¼Œä½ åƒä¸‡ä¸è¦è®¤ä¸ºå˜é‡vå­˜å‚¨çš„æ˜¯ç±»å‹ä¿¡æ¯ï¼Œå…¶å®<strong>vå­˜å‚¨çš„æ˜¯å˜é‡xçš„åŠ¨æ€ç±»å‹å¯¹åº”çš„å€¼ä¿¡æ¯</strong>ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨æ¥ä¸‹æ¥çš„caseæ‰§è¡Œè·¯å¾„ä¸­å°±å¯ä»¥ä½¿ç”¨å˜é‡vä¸­çš„å€¼ä¿¡æ¯äº†ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬è¿è¡Œä¸Šé¢ç¤ºä¾‹ï¼Œå¯ä»¥å¾—åˆ°vçš„åŠ¨æ€ç±»å‹å’Œå€¼ï¼š</p><pre><code class=\"language-plain\">the type of v is int, v = 13\n</code></pre><p>å¦å¤–ï¼Œä½ å¯ä»¥å‘ç°ï¼Œåœ¨å‰é¢çš„type switchæ¼”ç¤ºç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨interface{}è¿™ç§æ¥å£ç±»å‹çš„å˜é‡ï¼ŒGoä¸­æ‰€æœ‰ç±»å‹éƒ½å®ç°äº†interface{}ç±»å‹ï¼Œæ‰€ä»¥caseåé¢å¯ä»¥æ˜¯ä»»æ„ç±»å‹ä¿¡æ¯ã€‚</p><p>ä½†å¦‚æœåœ¨switchåé¢ä½¿ç”¨äº†æŸä¸ªç‰¹å®šçš„æ¥å£ç±»å‹Iï¼Œé‚£ä¹ˆcaseåé¢å°±åªèƒ½ä½¿ç”¨å®ç°äº†æ¥å£ç±»å‹Içš„ç±»å‹äº†ï¼Œå¦åˆ™Goç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼š</p><pre><code class=\"language-plain\">  type I interface {\n      M()\n  }\n  \n  type T struct {\n  }\n  \n func (T) M() {\n }\n \n func main() {\n     var t T\n     var i I = t\n     switch i.(type) {\n     case T:\n         println(\"it is type T\")\n     case int:\n         println(\"it is type int\")\n     case string:\n         println(\"it is type string\")\n     }\n }\n</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨type switchä¸­ä½¿ç”¨äº†è‡ªå®šä¹‰çš„æ¥å£ç±»å‹Iã€‚é‚£ä¹ˆï¼Œç†è®ºä¸Šæ‰€æœ‰caseåé¢çš„ç±»å‹éƒ½åªèƒ½æ˜¯å®ç°äº†æ¥å£Içš„ç±»å‹ã€‚ä½†åœ¨è¿™æ®µä»£ç ä¸­ï¼Œåªæœ‰ç±»å‹Tå®ç°äº†æ¥å£ç±»å‹Iï¼ŒGoåŸç”Ÿç±»å‹intä¸stringéƒ½æ²¡æœ‰å®ç°æ¥å£Iï¼Œäºæ˜¯åœ¨ç¼–è¯‘ä¸Šè¿°ä»£ç æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥å‡ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><pre><code class=\"language-plain\">19:2: impossible type switch case: i (type I) cannot have dynamic type int (missing M method)\n21:2: impossible type switch case: i (type I) cannot have dynamic type string (missing M method)\n</code></pre><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œå…³äºswitchè¯­å¥è¯­æ³•å±‚é¢çš„çŸ¥è¯†å°±éƒ½å­¦ä¹ å®Œäº†ã€‚Goå¯¹switchè¯­å¥çš„ä¼˜åŒ–ä¸å¢å¼ºä½¿å¾—æˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨switchæ—¶å¾ˆå°‘é‡åˆ°å‘ï¼Œä½†è¿™ä¹Ÿå¹¶ä¸æ„å‘³ç€æ²¡æœ‰ï¼Œæœ€åæˆ‘ä»¬å°±æ¥çœ‹åœ¨Goç¼–ç è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½é‡åˆ°çš„ä¸€ä¸ªä¸switchä½¿ç”¨æœ‰å…³çš„é—®é¢˜ï¼Œè·³ä¸å‡ºå¾ªç¯çš„breakã€‚</p><h2>è·³ä¸å‡ºå¾ªç¯çš„break</h2><p>åœ¨ä¸Šä¸€èŠ‚è¯¾è®²è§£breakè¯­å¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ›¾ä¸¾äº†ä¸€ä¸ªæ‰¾å‡ºæ•´å‹åˆ‡ç‰‡ä¸­ç¬¬ä¸€ä¸ªå¶æ•°çš„ä¾‹å­ï¼Œå½“æ—¶æˆ‘ä»¬æ˜¯æŠŠforä¸ifè¯­å¥ç»“åˆèµ·æ¥å®ç°çš„ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠé‚£ä¸ªä¾‹å­ä¸­ifåˆ†æ”¯ç»“æ„æ¢æˆè¿™èŠ‚è¯¾å­¦ä¹ çš„switchåˆ†æ”¯ç»“æ„è¯•è¯•çœ‹ã€‚æˆ‘ä»¬è¿™é‡Œç›´æ¥çœ‹æ”¹é€ åçš„ä»£ç ï¼š</p><pre><code class=\"language-plain\">func main() {\n    var sl = []int{5, 19, 6, 3, 8, 12}\n    var firstEven int = -1\n\n    // find first even number of the interger slice\n    for i := 0; i &lt; len(sl); i++ {\n        switch sl[i] % 2 {\n        case 0:\n            firstEven = sl[i]\n            break\n        case 1:\n            // do nothing\n        }        \n    }         \n    println(firstEven) \n}\n</code></pre><p>æˆ‘ä»¬è¿è¡Œä¸€ä¸‹è¿™ä¸ªä¿®æ”¹åçš„ç¨‹åºï¼Œå¾—åˆ°ç»“æœä¸º12ã€‚</p><p>å¥‡æ€ªï¼Œè¿™ä¸ªè¾“å‡ºçš„å€¼ä¸æˆ‘ä»¬çš„é¢„æœŸçš„å¥½åƒä¸å¤ªä¸€æ ·ã€‚è¿™æ®µä»£ç ä¸­ï¼Œåˆ‡ç‰‡ä¸­çš„ç¬¬ä¸€ä¸ªå¶æ•°æ˜¯6ï¼Œè€Œè¾“å‡ºçš„ç»“æœå´æˆäº†åˆ‡ç‰‡çš„æœ€åä¸€ä¸ªå¶æ•°12ã€‚ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§ç»“æœå‘¢ï¼Ÿ</p><p>è¿™å°±æ˜¯Goä¸­ breakè¯­å¥ä¸switchåˆ†æ”¯ç»“åˆä½¿ç”¨ä¼šå‡ºç°ä¸€ä¸ªâ€œå°å‘â€ã€‚å’Œæˆ‘ä»¬ä¹ æƒ¯çš„Cå®¶æ—è¯­è¨€ä¸­çš„breakä¸åŒï¼ŒGoè¯­è¨€è§„èŒƒä¸­æ˜ç¡®è§„å®šï¼Œ<strong>ä¸å¸¦labelçš„breakè¯­å¥ä¸­æ–­æ‰§è¡Œå¹¶è·³å‡ºçš„ï¼Œæ˜¯åŒä¸€å‡½æ•°å†…breakè¯­å¥æ‰€åœ¨çš„æœ€å†…å±‚çš„forã€switchæˆ–select</strong>ã€‚æ‰€ä»¥ï¼Œä¸Šé¢è¿™ä¸ªä¾‹å­çš„breakè¯­å¥å®é™…ä¸Šåªè·³å‡ºäº†switchè¯­å¥ï¼Œå¹¶æ²¡æœ‰è·³å‡ºå¤–å±‚çš„forå¾ªç¯ï¼Œè¿™ä¹Ÿå°±æ˜¯ç¨‹åºæœªæŒ‰æˆ‘ä»¬é¢„æœŸæ‰§è¡Œçš„åŸå› ã€‚</p><p>è¦ä¿®æ­£è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸ŠèŠ‚è¯¾å­¦åˆ°çš„å¸¦labelçš„breakè¯­å¥è¯•è¯•ã€‚è¿™é‡Œæˆ‘ä»¬ä¹Ÿç›´æ¥çœ‹çœ‹æ”¹è¿›åçš„ä»£ç :</p><pre><code class=\"language-plain\">func main() {\n    var sl = []int{5, 19, 6, 3, 8, 12}\n    var firstEven int = -1\n\n    // find first even number of the interger slice\nloop:\n    for i := 0; i &lt; len(sl); i++ {\n        switch sl[i] % 2 {\n        case 0:\n            firstEven = sl[i]\n            break loop\n        case 1:\n            // do nothing\n        }\n    }\n    println(firstEven) // 6\n}\n</code></pre><p>åœ¨æ”¹è¿›åçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªlabelï¼šloopï¼Œè¿™ä¸ªlabelé™„åœ¨forå¾ªç¯çš„å¤–é¢ï¼ŒæŒ‡ä»£forå¾ªç¯çš„æ‰§è¡Œã€‚å½“ä»£ç æ‰§è¡Œåˆ°â€œbreak loopâ€æ—¶ï¼Œç¨‹åºå°†åœæ­¢label loopæ‰€æŒ‡ä»£çš„forå¾ªç¯çš„æ‰§è¡Œã€‚å…³äºå¸¦æœ‰labelçš„breakè¯­å¥ï¼Œä½ å¯ä»¥å†å›é¡¾ä¸€ä¸‹ç¬¬19è®²ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚</p><p>å’Œswitchè¯­å¥ä¸€æ ·èƒ½é˜»æ‹¦breakè·³å‡ºçš„è¿˜æœ‰ä¸€ä¸ªè¯­å¥ï¼Œé‚£å°±æ˜¯selectï¼Œæˆ‘ä»¬åé¢è®²è§£å¹¶å‘ç¨‹åºè®¾è®¡çš„æ—¶å€™å†æ¥è¯¦ç»†åˆ†æã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„è¯¾è®²åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œç°åœ¨æˆ‘ä»¬ä¸€èµ·æ¥å›é¡¾ä¸€ä¸‹å§ã€‚</p><p>åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº†Goè¯­è¨€æä¾›çš„å¦ä¸€ç§åˆ†æ”¯æ§åˆ¶ç»“æ„ï¼šswitchè¯­å¥ã€‚å’Œifåˆ†æ”¯è¯­å¥ç›¸æ¯”ï¼Œåœ¨ä¸€äº›æ‰§è¡Œåˆ†æ”¯è¾ƒå¤šçš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨switchåˆ†æ”¯æ§åˆ¶è¯­å¥å¯ä»¥è®©ä»£ç æ›´ç®€æ´ã€å¯è¯»æ€§æ›´å¥½ã€‚</p><p>Goè¯­è¨€çš„switchè¯­å¥ç»§æ‰¿è‡ªCè¯­è¨€ï¼Œä½†â€œé’å‡ºäºè“è€Œèƒœäºè“â€ï¼ŒGoä¸ä½†ä¿®æ­£äº†Cè¯­è¨€ä¸­switchè¯­å¥é»˜è®¤æ‰§è¡Œä¸‹ä¸€ä¸ªcaseçš„â€œå‘â€ï¼Œè¿˜å¯¹switchè¯­å¥è¿›è¡Œäº†æ”¹è¿›ä¸åˆ›æ–°ï¼ŒåŒ…æ‹¬æ”¯æŒæ›´å¤šç±»å‹ã€æ”¯æŒè¡¨è¾¾å¼åˆ—è¡¨ç­‰ï¼Œè®©switchçš„è¡¨è¾¾åŠ›å¾—åˆ°è¿›ä¸€æ­¥æå‡ã€‚</p><p>é™¤äº†ä½¿ç”¨å¸¸è§„è¡¨è¾¾å¼ä½œä¸ºswitchè¡¨è¾¾å¼å’Œcaseè¡¨è¾¾å¼ä¹‹å¤–ï¼ŒGo switchè¯­å¥åˆåˆ›æ–°æ€§åœ°æ”¯æŒtype switchï¼Œä¹Ÿå°±æ˜¯ç”¨ç±»å‹ä¿¡æ¯ä½œä¸ºåˆ†æ”¯æ¡ä»¶åˆ¤æ–­çš„æ“ä½œæ•°ã€‚åœ¨Goä¸­ï¼Œè¿™ç§ä½¿ç”¨æ–¹å¼ä¹Ÿæ˜¯switchæ‰€ç‹¬æœ‰çš„ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯åªæœ‰æ¥å£ç±»å‹å˜é‡æ‰èƒ½ä½¿ç”¨type switchï¼Œå¹¶ä¸”æ‰€æœ‰caseè¯­å¥ä¸­çš„ç±»å‹å¿…é¡»å®ç°switchå…³é”®å­—åé¢å˜é‡çš„æ¥å£ç±»å‹ã€‚</p><p>æœ€åè¿˜éœ€è¦ä½ è®°ä½çš„æ˜¯switchä¼šé˜»æ‹¦breakè¯­å¥è·³å‡ºforå¾ªç¯ï¼Œå°±åƒæˆ‘ä»¬è¿™èŠ‚è¯¾æœ€åé‚£ä¸ªä¾‹å­ä¸­é‚£æ ·ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“æ‰ä¸‹å»çš„å‘ï¼Œä½ ä¸€å®šä¸è¦èµ°å¼¯è·¯ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä¸ºäº†éªŒè¯åœ¨å¤šåˆ†æ”¯ä¸‹åŸºäºswitchè¯­å¥å®ç°çš„åˆ†æ”¯æ§åˆ¶æ›´ä¸ºç®€æ´ï¼Œä½ å¯ä»¥å°è¯•å°†è¿™èŠ‚è¯¾ä¸­çš„é‚£äº›ç¨å¤æ‚ä¸€ç‚¹çš„ä¾‹å­ï¼Œæ”¹å†™ä¸ºåŸºäºifæ¡ä»¶åˆ†æ”¯çš„å®ç°ï¼Œç„¶åå†å¯¹æ¯”ä¸€ä¸‹ä¸¤ç§å®ç°çš„å¤æ‚æ€§ï¼Œç›´è§‚ä½“ä¼šä¸€ä¸‹switchè¯­å¥çš„ä¼˜ç‚¹ã€‚</p><p>æ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šå¯¹Goè¯­è¨€ä¸­çš„switchè¯­å¥æ„Ÿå…´è¶£çš„æœ‹å‹ã€‚æˆ‘æ˜¯Tony Baiï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":324694,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1638547784,"is_pvip":true,"replies":[{"id":117959,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638827726,"ip_address":"","comment_id":324694,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"type switché‡Œçš„\n\nswitch v := x.(type) {\n\nçœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªåˆå§‹åŒ–è¯­å¥ï¼Œä½†å…¶å®æ˜¯ä¸€ä¸ªtype guardï¼Œæ‰€ä»¥åé¢æ²¡æœ‰åˆ†å·ã€‚å¦‚æœæœ‰åˆå§‹åŒ–è¯­å¥çš„è¯å°±æ˜¯è¿™æ ·çš„ï¼š\n\nswitch a:= f(); v := x.(type) {\n\nå¦å¤–type switché‡Œæ˜¯ä¸èƒ½fallthroughçš„","like_count":40},{"had_liked":false,"id":333970,"user_name":"ä¸€æ‰“ä¸ƒ","can_delete":false,"product_type":"c1","uid":1241197,"ip_address":"","ucode":"D242C5EF70C176","user_header":"https://static001.geekbang.org/account/avatar/00/12/f0/6d/3e570bb8.jpg","comment_is_top":false,"comment_ctime":1644645065,"is_pvip":false,"replies":[{"id":122060,"content":"åªæœ‰switchè¡¨è¾¾å¼å¯ä»¥ç”¨x.(type)ï¼Œç±»å‹æ–­è¨€çš„æ ¼å¼æ˜¯ç±»ä¼¼åƒx.(*int)çš„å½¢å¼ï¼Œç±»å‹æ–­è¨€åé¢æ‹¬å·é‡Œå¿…é¡»æ˜¯æŸä¸ªå…·ä½“çš„ç±»å‹ã€‚è€Œswitchè¡¨è¾¾å¼çš„x.(type)å°±æ˜¯x.(type)ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644761754,"ip_address":"","comment_id":333970,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æ–‡ä¸­è¯´x.(type)è¿™ç§è¡¨è¾¾å¼å½¢å¼æ˜¯ switch è¯­å¥ä¸“æœ‰çš„ï¼Œä½†æ˜¯ç±»å‹æ–­è¨€ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼Œæ‰€ä»¥ä¸åº”è¯¥æ˜¯ä¸“æœ‰çš„å§ï¼Ÿ","like_count":17,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550859,"discussion_content":"åªæœ‰switchè¡¨è¾¾å¼å¯ä»¥ç”¨x.(type)ï¼Œç±»å‹æ–­è¨€çš„æ ¼å¼æ˜¯ç±»ä¼¼åƒx.(*int)çš„å½¢å¼ï¼Œç±»å‹æ–­è¨€åé¢æ‹¬å·é‡Œå¿…é¡»æ˜¯æŸä¸ªå…·ä½“çš„ç±»å‹ã€‚è€Œswitchè¡¨è¾¾å¼çš„x.(type)å°±æ˜¯x.(type)ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1644761754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585190,"discussion_content":"è¿™ä¸ªè§£é‡Šçš„å¤ªæ¸…æ¥šäº†ï¼Œ ä¹‹å‰å¯¹è¿™å—ä¹Ÿæœ‰ä¸€äº›è¿·ç³Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661392317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333120,"user_name":"lyy","can_delete":false,"product_type":"c1","uid":2381893,"ip_address":"","ucode":"064F31D18E4875","user_header":"https://static001.geekbang.org/account/avatar/00/24/58/45/9ba77dc3.jpg","comment_is_top":false,"comment_ctime":1644110322,"is_pvip":false,"replies":[{"id":121805,"content":"ä½†æ˜¯å¦‚æœæŒ‰ä½ çš„è®¾è®¡ï¼Œfallthroughåï¼Œå…ˆè¦åˆ¤æ–­ä¸‹ä¸€ä¸ªcaseçš„æ¡ä»¶ï¼Œé‚£ä¹ˆfallthroughçš„æ„ä¹‰å°±ä¸å­˜åœ¨äº†ï¼Œå› ä¸ºä¸‹ä¸€ä¸ªcaseçš„æ¡ä»¶æ±‚å€¼ååŸºæœ¬ä¸ä¼šæ˜¯trueã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644291180,"ip_address":"","comment_id":333120,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ä¸ªäººæ„Ÿè§‰fallthroughï¼Œæ‰§è¡Œå®Œ case1 åï¼Œç»§ç»­case2é‡Œé¢çš„ä»£ç ï¼Œè€Œä¸ç”¨åˆ¤æ–­case2çš„æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œè¿™ä¸€ç‚¹è®¾è®¡çš„å¹¶ä¸å¥½ï¼Œä¼°è®¡å¾ˆå¤šäººä¼šç†è§£ä¸ºç»§ç»­åˆ¤æ–­case2æ¡ä»¶","like_count":9,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549908,"discussion_content":"ä½†æ˜¯å¦‚æœæŒ‰ä½ çš„è®¾è®¡ï¼Œfallthroughåï¼Œå…ˆè¦åˆ¤æ–­ä¸‹ä¸€ä¸ªcaseçš„æ¡ä»¶ï¼Œé‚£ä¹ˆfallthroughçš„æ„ä¹‰å°±ä¸å­˜åœ¨äº†ï¼Œå› ä¸ºä¸‹ä¸€ä¸ªcaseçš„æ¡ä»¶æ±‚å€¼ååŸºæœ¬ä¸ä¼šæ˜¯trueã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1644291180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2804244,"avatar":"","nickname":"éƒ­é›…æ–‡","note":"","ucode":"28C2F6407559AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584481,"discussion_content":"fallthroughç°å®ä¸­çš„ä½¿ç”¨åœºæ™¯ä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1660872216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1915533,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3a/8d/f5e7a20d.jpg","nickname":"ä½•ä»¥è§£å¿§","note":"","ucode":"4DFE2BDBAF4919","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2804244,"avatar":"","nickname":"éƒ­é›…æ–‡","note":"","ucode":"28C2F6407559AB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636014,"discussion_content":"åœºæ™¯æ²¡æƒ³å‡ºæ¥ï¼Œä¼¼ä¹å­˜åœ¨è¿™ä¹ˆä¸€ç§é€»è¾‘ï¼š case1 ç¬¦åˆçš„æ—¶å€™æ‰§è¡Œ case1 å’Œcase 2çš„é€»è¾‘ä½†æ˜¯åªæ»¡è¶³case2 çš„æƒ…å†µå°±åªæ‰§è¡Œcase2 ï¼›ä¼¼ä¹æ˜¯å„ä¸ªæ¡ä»¶æ˜¯æ­£äº¤çš„ï¼Œä½†æ˜¯æ‰§è¡Œé€»è¾‘ä¸æ­£äº¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705470160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":584481,"ip_address":"å¹¿ä¸œ","group_id":0},"score":636014,"extra":""}]},{"author":{"id":1175507,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ef/d3/241d0b84.jpg","nickname":"upup","note":"","ucode":"25DB114677EF58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574544,"discussion_content":"åŒæ„è€å¸ˆçš„è§‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰fallthroughï¼Œå„ä¸ªcaseè¡¨è¾¾å¼â€œåº”è¯¥æ˜¯â€æ­£äº¤çš„ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654138275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556752,"discussion_content":"å­˜åœ¨ä¸€ç§å¯èƒ½ï¼Œç¨‹åºæƒ³è®©ç»§ç»­æ‰§è¡Œcase2çš„é€»è¾‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647500374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327867,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1640333942,"is_pvip":true,"replies":[{"id":120350,"content":"å·®ä¸å¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641893295,"ip_address":"","comment_id":327867,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ç™½è€å¸ˆï¼Œæˆ‘è¿™æ ·ç†è§£å¯¹ä¸å¯¹ï¼š\nx.(type) å¦‚æœæ²¡æœ‰ := ç¬¦å·çš„è¯ï¼Œè¿™ä¸ªè¡¨è¾¾å¼æ˜¯è·å–xçš„å…·ä½“ç±»å‹\nv := x.(type), è¿™ä¸ªåˆ™æ˜¯æŠŠxä»å…·ä½“çš„æ¥å£ç±»å‹ä¸­è·å–å®ƒå®é™…ç±»å‹çš„å€¼ã€‚\nx.(SomeType)ï¼Œ åˆ™æ˜¯åˆ¤æ®µxæ˜¯å¦éµå®ˆSomeTypeæ¥å£ï¼Œå¹¶è½¬åŒ–ä¸ºå…·ä½“ç±»å‹çš„å€¼ã€‚\næ‰€æœ‰çš„è¿™äº›è¡Œä¸ºéƒ½æ˜¯ç¼–è¯‘å™¨æŠŠå®ƒè½¬åŒ–ä¸ºç›¸åº”çš„ä»£ç ã€‚","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549908,"discussion_content":"ä½†æ˜¯å¦‚æœæŒ‰ä½ çš„è®¾è®¡ï¼Œfallthroughåï¼Œå…ˆè¦åˆ¤æ–­ä¸‹ä¸€ä¸ªcaseçš„æ¡ä»¶ï¼Œé‚£ä¹ˆfallthroughçš„æ„ä¹‰å°±ä¸å­˜åœ¨äº†ï¼Œå› ä¸ºä¸‹ä¸€ä¸ªcaseçš„æ¡ä»¶æ±‚å€¼ååŸºæœ¬ä¸ä¼šæ˜¯trueã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1644291180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2804244,"avatar":"","nickname":"éƒ­é›…æ–‡","note":"","ucode":"28C2F6407559AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584481,"discussion_content":"fallthroughç°å®ä¸­çš„ä½¿ç”¨åœºæ™¯ä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1660872216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1915533,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3a/8d/f5e7a20d.jpg","nickname":"ä½•ä»¥è§£å¿§","note":"","ucode":"4DFE2BDBAF4919","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2804244,"avatar":"","nickname":"éƒ­é›…æ–‡","note":"","ucode":"28C2F6407559AB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636014,"discussion_content":"åœºæ™¯æ²¡æƒ³å‡ºæ¥ï¼Œä¼¼ä¹å­˜åœ¨è¿™ä¹ˆä¸€ç§é€»è¾‘ï¼š case1 ç¬¦åˆçš„æ—¶å€™æ‰§è¡Œ case1 å’Œcase 2çš„é€»è¾‘ä½†æ˜¯åªæ»¡è¶³case2 çš„æƒ…å†µå°±åªæ‰§è¡Œcase2 ï¼›ä¼¼ä¹æ˜¯å„ä¸ªæ¡ä»¶æ˜¯æ­£äº¤çš„ï¼Œä½†æ˜¯æ‰§è¡Œé€»è¾‘ä¸æ­£äº¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705470160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":584481,"ip_address":"å¹¿ä¸œ","group_id":0},"score":636014,"extra":""}]},{"author":{"id":1175507,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ef/d3/241d0b84.jpg","nickname":"upup","note":"","ucode":"25DB114677EF58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574544,"discussion_content":"åŒæ„è€å¸ˆçš„è§‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰fallthroughï¼Œå„ä¸ªcaseè¡¨è¾¾å¼â€œåº”è¯¥æ˜¯â€æ­£äº¤çš„ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654138275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556752,"discussion_content":"å­˜åœ¨ä¸€ç§å¯èƒ½ï¼Œç¨‹åºæƒ³è®©ç»§ç»­æ‰§è¡Œcase2çš„é€»è¾‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647500374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323501,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1637936379,"is_pvip":false,"replies":[{"id":117579,"content":"åç»­ä¼šæœ‰å®æˆ˜é¡¹ç›®ï¼Œå°½é‡ä¸²è”å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638260774,"ip_address":"","comment_id":323501,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"Tony Bai è€å¸ˆçš„æ–‡ç« è®²è§£çš„éå¸¸ç»†è‡´ï¼Œé¼“æŒã€‚\n\næƒ³é—®ä¸€ä¸‹è€å¸ˆï¼Œæ–‡ä¸­çš„å†…å®¹åŸºæœ¬éƒ½èƒ½ç†è§£ï¼Œä½†æ˜¯è¿‡ä¸€æ®µæ—¶é—´å°±é—å¿˜æ¯”è¾ƒå¤šäº†ï¼Œå°¤å…¶æ˜¯åé¢çš„å†…å®¹æ¶‰åŠåˆ°å‰é¢çš„çŸ¥è¯†æ—¶ã€‚å¸Œæœ›è€å¸ˆåœ¨è¿™é—¨è¯¾ä¸­æä¸ªå°å‹çš„å®æˆ˜é¡¹ç›®ï¼Œèƒ½æŠŠå‰é¢çš„çŸ¥è¯†ä¸²åœ¨ä¸€èµ·å°±å¥½äº†ã€‚\n\nè¿™æ ·ï¼Œä¸ä¼šè§‰å¾—çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…......","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545279,"discussion_content":"å·®ä¸å¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641893295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384644,"user_name":"åå¹´ä¸€åŠ«","can_delete":false,"product_type":"c1","uid":1942428,"ip_address":"æµ™æ±Ÿ","ucode":"B9B67CD09DD2A3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIV9NK3Mx29N2t9upmnZHN63hOgE6GV6LvaEDD2tkCASSKSVHictXZOucrpZJ0vPll4pF2XNVCKw1Q/132","comment_is_top":false,"comment_ctime":1701269259,"is_pvip":false,"replies":[{"id":140335,"content":"æ˜¯è¿™æ ·çš„ä¹ˆï¼Ÿ\n\npackage main\n\nimport &quot;fmt&quot;\n\nfunc switchOnType[T any](i interface{}) T {\n\tswitch v := i.(type) {\n\tcase T:\n\t\treturn v\n\n\tdefault:\n\t\tpanic(&quot;unsupported type&quot;)\n\t}\n}\n\nfunc main() {\n\tvar i interface{} = true\n\n\tb := switchOnType[bool](i)\n\n\tfmt.Printf(&quot;b type: %T value:%v\\n&quot;, b, b)\n}\næˆ‘è¯•äº†ä¸€ä¸‹, go 1.21æ˜¯æ”¯æŒçš„ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1701821720,"ip_address":"ç¾å›½","comment_id":384644,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œç°åœ¨goæ”¯æŒæ³›å‹äº†ï¼Œtype switchè¯­å¥ä¸­ä¼ å…¥çš„ç±»å‹å¯ä»¥ç”¨æ³›å‹ä¹ˆ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633087,"discussion_content":"æ˜¯è¿™æ ·çš„ä¹ˆï¼Ÿ\n\npackage main\n\nimport &#34;fmt&#34;\n\nfunc switchOnType[T any](i interface{}) T {\n\tswitch v := i.(type) {\n\tcase T:\n\t\treturn v\n\n\tdefault:\n\t\tpanic(&#34;unsupported type&#34;)\n\t}\n}\n\nfunc main() {\n\tvar i interface{} = true\n\n\tb := switchOnType[bool](i)\n\n\tfmt.Printf(&#34;b type: %T value:%v\\n&#34;, b, b)\n}\næˆ‘è¯•äº†ä¸€ä¸‹, go 1.21æ˜¯æ”¯æŒçš„ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1701821720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":375297,"user_name":"plh","can_delete":false,"product_type":"c1","uid":1031828,"ip_address":"å››å·","ucode":"D79F2B87AC3AD2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erEHTaQDkWqEYib9iabib8rACYpSFBHTPFmgicUKaib79MB6VIxNwiajHUS8kYFEKCGOjpibf0dibhIjqhfzg/132","comment_is_top":false,"comment_ctime":1685263154,"is_pvip":false,"replies":[{"id":136964,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1685326055,"ip_address":"åŒ—äº¬","comment_id":375297,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":" switch å¤ªçµæ´»,å³ä½¿æœ‰ç»éªŒçš„goå¼€å‘è€…ä¹Ÿå®¹æ˜“çŠ¯é”™. çœ‹è¿‡å¥½å‡ ç¯‡æ–‡ç« ,è¿™ä¸ªåœ°æ–¹æ˜¯è®²çš„æœ€å…¨é¢,æœ€æ¸…æ™°çš„. ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633087,"discussion_content":"æ˜¯è¿™æ ·çš„ä¹ˆï¼Ÿ\n\npackage main\n\nimport &#34;fmt&#34;\n\nfunc switchOnType[T any](i interface{}) T {\n\tswitch v := i.(type) {\n\tcase T:\n\t\treturn v\n\n\tdefault:\n\t\tpanic(&#34;unsupported type&#34;)\n\t}\n}\n\nfunc main() {\n\tvar i interface{} = true\n\n\tb := switchOnType[bool](i)\n\n\tfmt.Printf(&#34;b type: %T value:%v\\n&#34;, b, b)\n}\næˆ‘è¯•äº†ä¸€ä¸‹, go 1.21æ˜¯æ”¯æŒçš„ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1701821720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347510,"user_name":"qiutian","can_delete":false,"product_type":"c1","uid":1313498,"ip_address":"","ucode":"99658A8E342498","user_header":"https://static001.geekbang.org/account/avatar/00/14/0a/da/dcf8f2b1.jpg","comment_is_top":false,"comment_ctime":1654093200,"is_pvip":false,"replies":[{"id":126698,"content":"åœ¨è¿™ä¸ªcaseä¸­ï¼š\ncase case2_1(), case2_2():        \n      println(&quot;exec case2&quot;)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1654119081,"ip_address":"","comment_id":347510,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å“ªæ¥çš„case2å‘¢","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574525,"discussion_content":"åœ¨è¿™ä¸ªcaseä¸­ï¼š\ncase case2_1(), case2_2():        \n      println(&#34;exec case2&#34;)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654119081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1313498,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/da/dcf8f2b1.jpg","nickname":"qiutian","note":"","ucode":"99658A8E342498","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":574762,"discussion_content":"æ©ï¼Œçœ‹åˆ°äº†ï¼Œè°¢è°¢å¤§ä½¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654322989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":574525,"ip_address":"","group_id":0},"score":574762,"extra":""}]}]},{"had_liked":false,"id":341246,"user_name":"peison","can_delete":false,"product_type":"c1","uid":1142893,"ip_address":"","ucode":"C467A3E0133EA2","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/6d/11ea66f0.jpg","comment_is_top":false,"comment_ctime":1649473158,"is_pvip":false,"replies":[{"id":124883,"content":"type switchæ˜¯goçš„ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„è¯­æ³•ã€‚èƒ½è¿ç”¨è¯¥è¯­æ³•çš„x.(type)ä¸­çš„xå¿…é¡»æ˜¯interfaceç±»å‹ã€‚\n\ncaseåˆ†æ”¯æ˜¯ç”¨æŸç±»å‹ä¸xçš„åŠ¨æ€ç±»å‹ä½œæ¯”è¾ƒã€‚è€Œv := x.(type)ä¸­çš„vå­˜å‚¨çš„æ˜¯è½¬æ¢åå¯¹åº”çš„åŠ¨æ€ç±»å‹çš„å€¼ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1649903405,"ip_address":"","comment_id":341246,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæ–‡ä¸­type switchä¸­çš„  v:=x.(type)åé¢ï¼Œä¸ºä»€ä¹ˆswitchä¸­çš„caseåˆ†æ”¯ï¼Œä¸æ˜¯å’Œx.(type)çš„è¿”å›å€¼våšæ¯”è¾ƒï¼Ÿé‚£å®é™…ä¸Šcaseåˆ†æ”¯æ˜¯å’Œä»€ä¹ˆå€¼åšæ¯”è¾ƒ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562882,"discussion_content":"type switchæ˜¯goçš„ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„è¯­æ³•ã€‚èƒ½è¿ç”¨è¯¥è¯­æ³•çš„x.(type)ä¸­çš„xå¿…é¡»æ˜¯interfaceç±»å‹ã€‚\n\ncaseåˆ†æ”¯æ˜¯ç”¨æŸç±»å‹ä¸xçš„åŠ¨æ€ç±»å‹ä½œæ¯”è¾ƒã€‚è€Œv := x.(type)ä¸­çš„vå­˜å‚¨çš„æ˜¯è½¬æ¢åå¯¹åº”çš„åŠ¨æ€ç±»å‹çš„å€¼ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649903405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390583,"user_name":"äººè¨€æœ‰åŠ›","can_delete":false,"product_type":"c1","uid":1690736,"ip_address":"æµ™æ±Ÿ","ucode":"3708FBBFB641FE","user_header":"https://static001.geekbang.org/account/avatar/00/19/cc/70/64045bc0.jpg","comment_is_top":false,"comment_ctime":1715695693,"is_pvip":false,"replies":[{"id":142092,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1715870149,"ip_address":"è¾½å®","comment_id":390583,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æœ¬èŠ‚è®²è¿°äº†switchè¯­å¥çš„ä½¿ç”¨\n1. switchæ˜¯ä¸€ä¸ªé€‰æ‹©è¯­å¥ï¼Œå¯¹äºå¤šåˆ†æ”¯åœºæ™¯æ¯”ifæ›´åŠ ç›´è§‚\n2.goçš„switchç›¸æ¯”cè¯­è¨€ï¼Œæ”¹è¿›äº†breakæœºåˆ¶ï¼Œé»˜è®¤breakï¼Œé™¤éfallthrough\n3.åˆ›æ–°äº†ä¸€ä¸ªtype switchï¼Œå¯ä»¥ç”¨switch x.(type) çš„æ–¹å¼ï¼Œé™å®šxéœ€è¦æ˜¯æ¥å£ç±»å‹ï¼›å¹¶ä¸”å¦‚æœxæŒ‡å®šäº†ç±»å‹ï¼Œé‚£ä¹ˆcaseè¯­å¥éœ€è¦æ˜¯è¯¥æ¥å£ç±»å‹çš„å®ç°ã€‚\n4. æ€è€ƒé¢˜ï¼šifå’Œswitchå…¶å®ifè¿˜æ˜¯æ›´å¸¸ç”¨ï¼Œcaseç”¨åœ¨åˆ†æ”¯ç‰¹åˆ«å¤šçš„åœºæ™¯å¤šä¸€äº›","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562882,"discussion_content":"type switchæ˜¯goçš„ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„è¯­æ³•ã€‚èƒ½è¿ç”¨è¯¥è¯­æ³•çš„x.(type)ä¸­çš„xå¿…é¡»æ˜¯interfaceç±»å‹ã€‚\n\ncaseåˆ†æ”¯æ˜¯ç”¨æŸç±»å‹ä¸xçš„åŠ¨æ€ç±»å‹ä½œæ¯”è¾ƒã€‚è€Œv := x.(type)ä¸­çš„vå­˜å‚¨çš„æ˜¯è½¬æ¢åå¯¹åº”çš„åŠ¨æ€ç±»å‹çš„å€¼ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649903405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324694,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1638547784,"is_pvip":true,"replies":[{"id":117959,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638827726,"ip_address":"","comment_id":324694,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"type switché‡Œçš„\n\nswitch v := x.(type) {\n\nçœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªåˆå§‹åŒ–è¯­å¥ï¼Œä½†å…¶å®æ˜¯ä¸€ä¸ªtype guardï¼Œæ‰€ä»¥åé¢æ²¡æœ‰åˆ†å·ã€‚å¦‚æœæœ‰åˆå§‹åŒ–è¯­å¥çš„è¯å°±æ˜¯è¿™æ ·çš„ï¼š\n\nswitch a:= f(); v := x.(type) {\n\nå¦å¤–type switché‡Œæ˜¯ä¸èƒ½fallthroughçš„","like_count":40,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536585,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638827726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333970,"user_name":"ä¸€æ‰“ä¸ƒ","can_delete":false,"product_type":"c1","uid":1241197,"ip_address":"","ucode":"D242C5EF70C176","user_header":"https://static001.geekbang.org/account/avatar/00/12/f0/6d/3e570bb8.jpg","comment_is_top":false,"comment_ctime":1644645065,"is_pvip":false,"replies":[{"id":122060,"content":"åªæœ‰switchè¡¨è¾¾å¼å¯ä»¥ç”¨x.(type)ï¼Œç±»å‹æ–­è¨€çš„æ ¼å¼æ˜¯ç±»ä¼¼åƒx.(*int)çš„å½¢å¼ï¼Œç±»å‹æ–­è¨€åé¢æ‹¬å·é‡Œå¿…é¡»æ˜¯æŸä¸ªå…·ä½“çš„ç±»å‹ã€‚è€Œswitchè¡¨è¾¾å¼çš„x.(type)å°±æ˜¯x.(type)ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644761754,"ip_address":"","comment_id":333970,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æ–‡ä¸­è¯´x.(type)è¿™ç§è¡¨è¾¾å¼å½¢å¼æ˜¯ switch è¯­å¥ä¸“æœ‰çš„ï¼Œä½†æ˜¯ç±»å‹æ–­è¨€ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼Œæ‰€ä»¥ä¸åº”è¯¥æ˜¯ä¸“æœ‰çš„å§ï¼Ÿ","like_count":17,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536585,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638827726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333120,"user_name":"lyy","can_delete":false,"product_type":"c1","uid":2381893,"ip_address":"","ucode":"064F31D18E4875","user_header":"https://static001.geekbang.org/account/avatar/00/24/58/45/9ba77dc3.jpg","comment_is_top":false,"comment_ctime":1644110322,"is_pvip":false,"replies":[{"id":121805,"content":"ä½†æ˜¯å¦‚æœæŒ‰ä½ çš„è®¾è®¡ï¼Œfallthroughåï¼Œå…ˆè¦åˆ¤æ–­ä¸‹ä¸€ä¸ªcaseçš„æ¡ä»¶ï¼Œé‚£ä¹ˆfallthroughçš„æ„ä¹‰å°±ä¸å­˜åœ¨äº†ï¼Œå› ä¸ºä¸‹ä¸€ä¸ªcaseçš„æ¡ä»¶æ±‚å€¼ååŸºæœ¬ä¸ä¼šæ˜¯trueã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644291180,"ip_address":"","comment_id":333120,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ä¸ªäººæ„Ÿè§‰fallthroughï¼Œæ‰§è¡Œå®Œ case1 åï¼Œç»§ç»­case2é‡Œé¢çš„ä»£ç ï¼Œè€Œä¸ç”¨åˆ¤æ–­case2çš„æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œè¿™ä¸€ç‚¹è®¾è®¡çš„å¹¶ä¸å¥½ï¼Œä¼°è®¡å¾ˆå¤šäººä¼šç†è§£ä¸ºç»§ç»­åˆ¤æ–­case2æ¡ä»¶","like_count":9,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550859,"discussion_content":"åªæœ‰switchè¡¨è¾¾å¼å¯ä»¥ç”¨x.(type)ï¼Œç±»å‹æ–­è¨€çš„æ ¼å¼æ˜¯ç±»ä¼¼åƒx.(*int)çš„å½¢å¼ï¼Œç±»å‹æ–­è¨€åé¢æ‹¬å·é‡Œå¿…é¡»æ˜¯æŸä¸ªå…·ä½“çš„ç±»å‹ã€‚è€Œswitchè¡¨è¾¾å¼çš„x.(type)å°±æ˜¯x.(type)ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1644761754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585190,"discussion_content":"è¿™ä¸ªè§£é‡Šçš„å¤ªæ¸…æ¥šäº†ï¼Œ ä¹‹å‰å¯¹è¿™å—ä¹Ÿæœ‰ä¸€äº›è¿·ç³Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661392317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327867,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1640333942,"is_pvip":true,"replies":[{"id":120350,"content":"å·®ä¸å¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641893295,"ip_address":"","comment_id":327867,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ç™½è€å¸ˆï¼Œæˆ‘è¿™æ ·ç†è§£å¯¹ä¸å¯¹ï¼š\nx.(type) å¦‚æœæ²¡æœ‰ := ç¬¦å·çš„è¯ï¼Œè¿™ä¸ªè¡¨è¾¾å¼æ˜¯è·å–xçš„å…·ä½“ç±»å‹\nv := x.(type), è¿™ä¸ªåˆ™æ˜¯æŠŠxä»å…·ä½“çš„æ¥å£ç±»å‹ä¸­è·å–å®ƒå®é™…ç±»å‹çš„å€¼ã€‚\nx.(SomeType)ï¼Œ åˆ™æ˜¯åˆ¤æ®µxæ˜¯å¦éµå®ˆSomeTypeæ¥å£ï¼Œå¹¶è½¬åŒ–ä¸ºå…·ä½“ç±»å‹çš„å€¼ã€‚\næ‰€æœ‰çš„è¿™äº›è¡Œä¸ºéƒ½æ˜¯ç¼–è¯‘å™¨æŠŠå®ƒè½¬åŒ–ä¸ºç›¸åº”çš„ä»£ç ã€‚","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545279,"discussion_content":"å·®ä¸å¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641893295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323501,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1637936379,"is_pvip":false,"replies":[{"id":117579,"content":"åç»­ä¼šæœ‰å®æˆ˜é¡¹ç›®ï¼Œå°½é‡ä¸²è”å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638260774,"ip_address":"","comment_id":323501,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"Tony Bai è€å¸ˆçš„æ–‡ç« è®²è§£çš„éå¸¸ç»†è‡´ï¼Œé¼“æŒã€‚\n\næƒ³é—®ä¸€ä¸‹è€å¸ˆï¼Œæ–‡ä¸­çš„å†…å®¹åŸºæœ¬éƒ½èƒ½ç†è§£ï¼Œä½†æ˜¯è¿‡ä¸€æ®µæ—¶é—´å°±é—å¿˜æ¯”è¾ƒå¤šäº†ï¼Œå°¤å…¶æ˜¯åé¢çš„å†…å®¹æ¶‰åŠåˆ°å‰é¢çš„çŸ¥è¯†æ—¶ã€‚å¸Œæœ›è€å¸ˆåœ¨è¿™é—¨è¯¾ä¸­æä¸ªå°å‹çš„å®æˆ˜é¡¹ç›®ï¼Œèƒ½æŠŠå‰é¢çš„çŸ¥è¯†ä¸²åœ¨ä¸€èµ·å°±å¥½äº†ã€‚\n\nè¿™æ ·ï¼Œä¸ä¼šè§‰å¾—çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…......","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534717,"discussion_content":"åç»­ä¼šæœ‰å®æˆ˜é¡¹ç›®ï¼Œå°½é‡ä¸²è”å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638260774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":535044,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638340706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":534717,"ip_address":"","group_id":0},"score":535044,"extra":""}]},{"author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"è°¢å°è·¯","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":623947,"discussion_content":"çœŸçš„ï¼Œæˆ‘æ¯éš”ä¸€æ®µæ—¶é—´è¦å¤ä¹ çŸ¥è¯†ã€‚å¤ªéš¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690043696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384644,"user_name":"åå¹´ä¸€åŠ«","can_delete":false,"product_type":"c1","uid":1942428,"ip_address":"æµ™æ±Ÿ","ucode":"B9B67CD09DD2A3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIV9NK3Mx29N2t9upmnZHN63hOgE6GV6LvaEDD2tkCASSKSVHictXZOucrpZJ0vPll4pF2XNVCKw1Q/132","comment_is_top":false,"comment_ctime":1701269259,"is_pvip":false,"replies":[{"id":140335,"content":"æ˜¯è¿™æ ·çš„ä¹ˆï¼Ÿ\n\npackage main\n\nimport &quot;fmt&quot;\n\nfunc switchOnType[T any](i interface{}) T {\n\tswitch v := i.(type) {\n\tcase T:\n\t\treturn v\n\n\tdefault:\n\t\tpanic(&quot;unsupported type&quot;)\n\t}\n}\n\nfunc main() {\n\tvar i interface{} = true\n\n\tb := switchOnType[bool](i)\n\n\tfmt.Printf(&quot;b type: %T value:%v\\n&quot;, b, b)\n}\næˆ‘è¯•äº†ä¸€ä¸‹, go 1.21æ˜¯æ”¯æŒçš„ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1701821720,"ip_address":"ç¾å›½","comment_id":384644,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œç°åœ¨goæ”¯æŒæ³›å‹äº†ï¼Œtype switchè¯­å¥ä¸­ä¼ å…¥çš„ç±»å‹å¯ä»¥ç”¨æ³›å‹ä¹ˆ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534717,"discussion_content":"åç»­ä¼šæœ‰å®æˆ˜é¡¹ç›®ï¼Œå°½é‡ä¸²è”å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638260774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":535044,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638340706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":534717,"ip_address":"","group_id":0},"score":535044,"extra":""}]},{"author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"è°¢å°è·¯","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":623947,"discussion_content":"çœŸçš„ï¼Œæˆ‘æ¯éš”ä¸€æ®µæ—¶é—´è¦å¤ä¹ çŸ¥è¯†ã€‚å¤ªéš¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690043696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":375297,"user_name":"plh","can_delete":false,"product_type":"c1","uid":1031828,"ip_address":"å››å·","ucode":"D79F2B87AC3AD2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erEHTaQDkWqEYib9iabib8rACYpSFBHTPFmgicUKaib79MB6VIxNwiajHUS8kYFEKCGOjpibf0dibhIjqhfzg/132","comment_is_top":false,"comment_ctime":1685263154,"is_pvip":false,"replies":[{"id":136964,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1685326055,"ip_address":"åŒ—äº¬","comment_id":375297,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":" switch å¤ªçµæ´»,å³ä½¿æœ‰ç»éªŒçš„goå¼€å‘è€…ä¹Ÿå®¹æ˜“çŠ¯é”™. çœ‹è¿‡å¥½å‡ ç¯‡æ–‡ç« ,è¿™ä¸ªåœ°æ–¹æ˜¯è®²çš„æœ€å…¨é¢,æœ€æ¸…æ™°çš„. ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619589,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1685326055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347510,"user_name":"qiutian","can_delete":false,"product_type":"c1","uid":1313498,"ip_address":"","ucode":"99658A8E342498","user_header":"https://static001.geekbang.org/account/avatar/00/14/0a/da/dcf8f2b1.jpg","comment_is_top":false,"comment_ctime":1654093200,"is_pvip":false,"replies":[{"id":126698,"content":"åœ¨è¿™ä¸ªcaseä¸­ï¼š\ncase case2_1(), case2_2():        \n      println(&quot;exec case2&quot;)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1654119081,"ip_address":"","comment_id":347510,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å“ªæ¥çš„case2å‘¢","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619589,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1685326055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341246,"user_name":"peison","can_delete":false,"product_type":"c1","uid":1142893,"ip_address":"","ucode":"C467A3E0133EA2","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/6d/11ea66f0.jpg","comment_is_top":false,"comment_ctime":1649473158,"is_pvip":false,"replies":[{"id":124883,"content":"type switchæ˜¯goçš„ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„è¯­æ³•ã€‚èƒ½è¿ç”¨è¯¥è¯­æ³•çš„x.(type)ä¸­çš„xå¿…é¡»æ˜¯interfaceç±»å‹ã€‚\n\ncaseåˆ†æ”¯æ˜¯ç”¨æŸç±»å‹ä¸xçš„åŠ¨æ€ç±»å‹ä½œæ¯”è¾ƒã€‚è€Œv := x.(type)ä¸­çš„vå­˜å‚¨çš„æ˜¯è½¬æ¢åå¯¹åº”çš„åŠ¨æ€ç±»å‹çš„å€¼ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1649903405,"ip_address":"","comment_id":341246,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæ–‡ä¸­type switchä¸­çš„  v:=x.(type)åé¢ï¼Œä¸ºä»€ä¹ˆswitchä¸­çš„caseåˆ†æ”¯ï¼Œä¸æ˜¯å’Œx.(type)çš„è¿”å›å€¼våšæ¯”è¾ƒï¼Ÿé‚£å®é™…ä¸Šcaseåˆ†æ”¯æ˜¯å’Œä»€ä¹ˆå€¼åšæ¯”è¾ƒ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574525,"discussion_content":"åœ¨è¿™ä¸ªcaseä¸­ï¼š\ncase case2_1(), case2_2():        \n      println(&#34;exec case2&#34;)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654119081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1313498,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/da/dcf8f2b1.jpg","nickname":"qiutian","note":"","ucode":"99658A8E342498","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":574762,"discussion_content":"æ©ï¼Œçœ‹åˆ°äº†ï¼Œè°¢è°¢å¤§ä½¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654322989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":574525,"ip_address":"","group_id":0},"score":574762,"extra":""}]}]},{"had_liked":false,"id":390583,"user_name":"äººè¨€æœ‰åŠ›","can_delete":false,"product_type":"c1","uid":1690736,"ip_address":"æµ™æ±Ÿ","ucode":"3708FBBFB641FE","user_header":"https://static001.geekbang.org/account/avatar/00/19/cc/70/64045bc0.jpg","comment_is_top":false,"comment_ctime":1715695693,"is_pvip":false,"replies":[{"id":142092,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1715870149,"ip_address":"è¾½å®","comment_id":390583,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æœ¬èŠ‚è®²è¿°äº†switchè¯­å¥çš„ä½¿ç”¨\n1. switchæ˜¯ä¸€ä¸ªé€‰æ‹©è¯­å¥ï¼Œå¯¹äºå¤šåˆ†æ”¯åœºæ™¯æ¯”ifæ›´åŠ ç›´è§‚\n2.goçš„switchç›¸æ¯”cè¯­è¨€ï¼Œæ”¹è¿›äº†breakæœºåˆ¶ï¼Œé»˜è®¤breakï¼Œé™¤éfallthrough\n3.åˆ›æ–°äº†ä¸€ä¸ªtype switchï¼Œå¯ä»¥ç”¨switch x.(type) çš„æ–¹å¼ï¼Œé™å®šxéœ€è¦æ˜¯æ¥å£ç±»å‹ï¼›å¹¶ä¸”å¦‚æœxæŒ‡å®šäº†ç±»å‹ï¼Œé‚£ä¹ˆcaseè¯­å¥éœ€è¦æ˜¯è¯¥æ¥å£ç±»å‹çš„å®ç°ã€‚\n4. æ€è€ƒé¢˜ï¼šifå’Œswitchå…¶å®ifè¿˜æ˜¯æ›´å¸¸ç”¨ï¼Œcaseç”¨åœ¨åˆ†æ”¯ç‰¹åˆ«å¤šçš„åœºæ™¯å¤šä¸€äº›","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645213,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715870149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331826,"user_name":"ps Sensking","can_delete":false,"product_type":"c1","uid":1377764,"ip_address":"","ucode":"8B3BC6E89B6EF9","user_header":"https://static001.geekbang.org/account/avatar/00/15/05/e4/3e676c4d.jpg","comment_is_top":false,"comment_ctime":1642796185,"is_pvip":false,"replies":[{"id":121610,"content":"é—®é¢˜æ²¡å¤ªçœ‹æ‡‚ã€‚æ–‡ä¸­ä¾‹å­switch x.(type) ä¸­çš„xæ˜¯ä¸€ä¸ªinterface{}ç±»å‹æ¥å£ï¼ŒGoæ‰€æœ‰ç±»å‹éƒ½å®ç°äº†è¯¥æ¥å£ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ç±»å‹Tã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643540720,"ip_address":"","comment_id":331826,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯åªæœ‰æ¥å£ç±»å‹å˜é‡æ‰èƒ½ä½¿ç”¨ type switchï¼Œå¹¶ä¸”æ‰€æœ‰ case è¯­å¥ä¸­çš„ç±»å‹å¿…é¡»å®ç° switch å…³é”®å­—åé¢å˜é‡çš„æ¥å£ç±»å‹ã€‚ \næ‚¨å¥½è¿™ä¸ªä¾‹å­ç”¨interface é‡Œé¢åªè¦å®ç°ä¸€ä¸ª int  æˆ–è€… string å°±å¯ä»¥æ­£å¸¸å¯åŠ¨å—ï¼Ÿ å¦‚æœæ˜¯type è‡ªå®šä¹‰çš„ç±»å‹ T å°±éœ€è¦åˆ¶å®šä¸€ä¸ªint æˆ–è€… stringå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":327861,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1640333056,"is_pvip":true,"replies":[{"id":120349,"content":"switchçš„ä¸æ˜¯vã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641893086,"ip_address":"","comment_id":327861,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"ç™½è€å¸ˆï¼Œswitch v := x.(type)ï¼Œæœ‰ç‚¹ä¸å¤ªå¥½ç†è§£ã€‚\nè¿™ä¸ªè¯­å¥ç¼–è¯‘å™¨æ˜¯ä¸æ˜¯è½¬åŒ–ä¸ºç±»å‹è¿™æ ·çš„ä»£ç ï¼š\nv := x.(type)\nswitch x.(type)\n\næˆ‘ç›´è§‚ä¸Šä¼šç†è§£æˆï¼š\nv := x.(type)\nswitch v\n\nè¿™ç®—ä¸ç®—ç¼–è¯‘å™¨æä¾›çš„ä¸€ç§è¯­æ³•ç³–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549070,"discussion_content":"é—®é¢˜æ²¡å¤ªçœ‹æ‡‚ã€‚æ–‡ä¸­ä¾‹å­switch x.(type) ä¸­çš„xæ˜¯ä¸€ä¸ªinterface{}ç±»å‹æ¥å£ï¼ŒGoæ‰€æœ‰ç±»å‹éƒ½å®ç°äº†è¯¥æ¥å£ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ç±»å‹Tã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643540720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323494,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1637932657,"is_pvip":false,"replies":null,"discussion_count":6,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"ä»Šå¤©ã€Šæå®¢æ—¶é—´ã€‹ä¸¤ä¸ªä¸“æ åŒæ—¶æ›´æ–°ï¼Œä¸»é¢˜éƒ½æ˜¯ switch\n\n- ã€Šæ·±å…¥å‰–æ Java æ–°ç‰¹æ€§ã€‹06 | Switchè¡¨è¾¾å¼ï¼šæ€ä¹ˆç®€åŒ–å¤šæƒ…æ™¯æ“ä½œï¼Ÿ\n- ã€ŠTony Bai Â· Go è¯­è¨€ç¬¬ä¸€è¯¾ã€‹20ï½œæ§åˆ¶ç»“æ„ï¼šGoä¸­çš„switchè¯­å¥æœ‰å“ªäº›å˜åŒ–ï¼Ÿ\n\nå¯¹æ¯”ç»“æœ\n\n- Java17 å±…ç„¶å¯ä»¥æ¯” Go ç®€æ´ï¼\n- ä½†ç„¶ç»¼åˆèƒ½åŠ› Go çš„æ›´çµæ´»\n\n\nJava17 switch\n\n```java\nString checkWorkday(int day) {\n\treturn switch (day) {\n\t\tcase 1, 2, 3, 4, 5 -&gt; &quot;it is a work day&quot;;\n\t\tcase 6, 7 -&gt; &quot;it is a weekend day&quot;;\n\t\tdefault -&gt; &quot;are you live on earth&quot;;\n\t};\n}\n```\n\nGo switch\n\n```go\nfunc checkWorkday(day int) string {\n\tswitch day {\n\tcase 1, 2, 3, 4, 5:\n\t\treturn &quot;it is a work day&quot;\n\tcase 6, 7:\n\t\treturn &quot;it is a weekend day&quot;\n\tdefault:\n\t\treturn &quot;are you live on earth&quot;\n\t}\n}\n```","like_count":15,"discussions":[{"author":{"id":1156148,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a4/34/0ab08db6.jpg","nickname":"swift","note":"","ucode":"B243DCD10B04F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579733,"discussion_content":"JAVAå¦‚æœè¦å‡ºæ¥æ¯”è¯­æ³•ï¼Œé‚£ä¹ˆC#çš„switchæ›´æ˜¯éšå¿ƒæ‰€æ¬²äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1657638039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3008370,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/e7/72/4cec29a8.jpg","nickname":"æš´èºçš„èœ—ç‰›","note":"","ucode":"9B159C820C5524","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1156148,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a4/34/0ab08db6.jpg","nickname":"swift","note":"","ucode":"B243DCD10B04F0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586643,"discussion_content":"è®ºè¯­æ³•ç³–çš„è¯ C# æ— å‡ºå…¶å³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662393418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":579733,"ip_address":"å¹¿ä¸œ","group_id":0},"score":586643,"extra":""}]},{"author":{"id":1015986,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/b2/2e9f442d.jpg","nickname":"æ–‡æ­¦æœ¨å­","note":"","ucode":"348752BDECD65F","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568435,"discussion_content":"Javaè¿™ä¸ªcaseçš„ç®­å¤´â†’æƒŠå‘†äº†æˆ‘ğŸ¤£","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651135389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006789,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","nickname":"æ¢ä¸­å","note":"","ucode":"52FE40242CBAD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560455,"discussion_content":"è¿™ä¸ªjava 17çš„å†™æ³•æœ‰ç‚¹åƒkotlinï¼Œswitchå±…ç„¶ä¹Ÿæ”¯æŒè¡¨è¾¾å¼äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649335669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556751,"discussion_content":"å€’æ˜¯è®¤ä¸ºä¸€æ ·ç®€æ´ï½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647500228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556865,"discussion_content":"éƒ½å¾ˆä¼˜ç§€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647561311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":556751,"ip_address":"","group_id":0},"score":556865,"extra":""}]}]},{"had_liked":false,"id":323496,"user_name":"è¿›åŒ–èŒ","can_delete":false,"product_type":"c1","uid":1276861,"ip_address":"","ucode":"B30A5F78BB4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg","comment_is_top":false,"comment_ctime":1637932745,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":4,"score":3,"product_id":100093501,"comment_content":"æ‰€ä»¥ï¼Œswitch ä¸éœ€è¦ break æ˜¯å‡ºäºå¤§å¤šæ•°æƒ…å†µ switch åªéœ€è¦èµ°ä¸€æ¡åˆ†æ”¯çš„ç¼˜æ•…å—ï¼Ÿ","like_count":5},{"had_liked":false,"id":326372,"user_name":"æœ¨æœ¨","can_delete":false,"product_type":"c1","uid":2704565,"ip_address":"","ucode":"86820F26A27308","user_header":"https://static001.geekbang.org/account/avatar/00/29/44/b5/7eba5a0e.jpg","comment_is_top":false,"comment_ctime":1639487312,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"Cè¯­è¨€çš„switchæ˜¯ä¸ºäº†æ¨¡æ‹Ÿè·³è½¬è¡¨ï¼Œæ‰€ä»¥å¦‚æœç›®çš„æ˜¯æ ¹æ®å€¼æ‰§è¡Œä¸€å°æ®µçš„è¯ï¼Œéœ€è¦æ¯ä¸ªæ¡ä»¶çš„æ‰§è¡Œè¯­å¥æœ€åéƒ½åŠ breakï¼Œgoçš„switchå·²ç»ä¸å†æ˜¯ä¸ºäº†æ¨¡æ‹Ÿè·³è½¬è¡¨äº†ï¼Œå°±æ˜¯æŒ‰ç€äººä»¬å¸¸ç”¨çš„æ–¹æ³•è®¾è®¡çš„ï¼Œæ‰€ä»¥ä¸ç”¨åŠ breakï¼Œä½†æ˜¯breakçš„ä½œç”¨ä¾æ—§ç•™ç€","like_count":1,"discussions":[{"author":{"id":1156148,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a4/34/0ab08db6.jpg","nickname":"swift","note":"","ucode":"B243DCD10B04F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579733,"discussion_content":"JAVAå¦‚æœè¦å‡ºæ¥æ¯”è¯­æ³•ï¼Œé‚£ä¹ˆC#çš„switchæ›´æ˜¯éšå¿ƒæ‰€æ¬²äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1657638039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3008370,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/e7/72/4cec29a8.jpg","nickname":"æš´èºçš„èœ—ç‰›","note":"","ucode":"9B159C820C5524","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1156148,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a4/34/0ab08db6.jpg","nickname":"swift","note":"","ucode":"B243DCD10B04F0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586643,"discussion_content":"è®ºè¯­æ³•ç³–çš„è¯ C# æ— å‡ºå…¶å³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662393418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":579733,"ip_address":"å¹¿ä¸œ","group_id":0},"score":586643,"extra":""}]},{"author":{"id":1015986,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/b2/2e9f442d.jpg","nickname":"æ–‡æ­¦æœ¨å­","note":"","ucode":"348752BDECD65F","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568435,"discussion_content":"Javaè¿™ä¸ªcaseçš„ç®­å¤´â†’æƒŠå‘†äº†æˆ‘ğŸ¤£","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651135389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006789,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","nickname":"æ¢ä¸­å","note":"","ucode":"52FE40242CBAD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560455,"discussion_content":"è¿™ä¸ªjava 17çš„å†™æ³•æœ‰ç‚¹åƒkotlinï¼Œswitchå±…ç„¶ä¹Ÿæ”¯æŒè¡¨è¾¾å¼äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649335669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556751,"discussion_content":"å€’æ˜¯è®¤ä¸ºä¸€æ ·ç®€æ´ï½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647500228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556865,"discussion_content":"éƒ½å¾ˆä¼˜ç§€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647561311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":556751,"ip_address":"","group_id":0},"score":556865,"extra":""}]}]},{"had_liked":false,"id":323429,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1637898870,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"è®²çš„éå¸¸è¯¦ç»†ï¼Œå€¼å¾—å¥½å¥½å­¦ä¹ ","like_count":1,"discussions":[{"author":{"id":1479120,"avatar":"https://static001.geekbang.org/account/avatar/00/16/91/d0/35bc62b1.jpg","nickname":"æ— å’","note":"","ucode":"B9759B5646F3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":602671,"discussion_content":"Goçš„switchæ›´ç¬¦åˆè¯­ä¹‰ç›´è§‰ï¼ŒåŸºæœ¬ä¸Šå¸¸ç”¨çš„æŸ¥è¡¨ã€åˆ†æ®µå‡½æ•°ã€å¤æ‚æ˜ å°„å…³ç³»ç­‰éƒ½èƒ½ç®€å•è¡¨è¾¾ã€‚Cè¯­è¨€çš„fallthroughï¼Œæ˜¯æ•ˆç‡çš„è€ƒè™‘ï¼Œå…¶å®åœ¨Goä¸­è¢«case expr1, expr2:{}ç­‰ä»·è¡¨è¾¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675838774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331826,"user_name":"ps Sensking","can_delete":false,"product_type":"c1","uid":1377764,"ip_address":"","ucode":"8B3BC6E89B6EF9","user_header":"https://static001.geekbang.org/account/avatar/00/15/05/e4/3e676c4d.jpg","comment_is_top":false,"comment_ctime":1642796185,"is_pvip":false,"replies":[{"id":121610,"content":"é—®é¢˜æ²¡å¤ªçœ‹æ‡‚ã€‚æ–‡ä¸­ä¾‹å­switch x.(type) ä¸­çš„xæ˜¯ä¸€ä¸ªinterface{}ç±»å‹æ¥å£ï¼ŒGoæ‰€æœ‰ç±»å‹éƒ½å®ç°äº†è¯¥æ¥å£ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ç±»å‹Tã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643540720,"ip_address":"","comment_id":331826,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯åªæœ‰æ¥å£ç±»å‹å˜é‡æ‰èƒ½ä½¿ç”¨ type switchï¼Œå¹¶ä¸”æ‰€æœ‰ case è¯­å¥ä¸­çš„ç±»å‹å¿…é¡»å®ç° switch å…³é”®å­—åé¢å˜é‡çš„æ¥å£ç±»å‹ã€‚ \næ‚¨å¥½è¿™ä¸ªä¾‹å­ç”¨interface é‡Œé¢åªè¦å®ç°ä¸€ä¸ª int  æˆ–è€… string å°±å¯ä»¥æ­£å¸¸å¯åŠ¨å—ï¼Ÿ å¦‚æœæ˜¯type è‡ªå®šä¹‰çš„ç±»å‹ T å°±éœ€è¦åˆ¶å®šä¸€ä¸ªint æˆ–è€… stringå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549070,"discussion_content":"é—®é¢˜æ²¡å¤ªçœ‹æ‡‚ã€‚æ–‡ä¸­ä¾‹å­switch x.(type) ä¸­çš„xæ˜¯ä¸€ä¸ªinterface{}ç±»å‹æ¥å£ï¼ŒGoæ‰€æœ‰ç±»å‹éƒ½å®ç°äº†è¯¥æ¥å£ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ç±»å‹Tã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643540720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327861,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1640333056,"is_pvip":true,"replies":[{"id":120349,"content":"switchçš„ä¸æ˜¯vã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641893086,"ip_address":"","comment_id":327861,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"ç™½è€å¸ˆï¼Œswitch v := x.(type)ï¼Œæœ‰ç‚¹ä¸å¤ªå¥½ç†è§£ã€‚\nè¿™ä¸ªè¯­å¥ç¼–è¯‘å™¨æ˜¯ä¸æ˜¯è½¬åŒ–ä¸ºç±»å‹è¿™æ ·çš„ä»£ç ï¼š\nv := x.(type)\nswitch x.(type)\n\næˆ‘ç›´è§‚ä¸Šä¼šç†è§£æˆï¼š\nv := x.(type)\nswitch v\n\nè¿™ç®—ä¸ç®—ç¼–è¯‘å™¨æä¾›çš„ä¸€ç§è¯­æ³•ç³–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545278,"discussion_content":"switchçš„ä¸æ˜¯vã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1641893086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323494,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1637932657,"is_pvip":false,"replies":null,"discussion_count":6,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"ä»Šå¤©ã€Šæå®¢æ—¶é—´ã€‹ä¸¤ä¸ªä¸“æ åŒæ—¶æ›´æ–°ï¼Œä¸»é¢˜éƒ½æ˜¯ switch\n\n- ã€Šæ·±å…¥å‰–æ Java æ–°ç‰¹æ€§ã€‹06 | Switchè¡¨è¾¾å¼ï¼šæ€ä¹ˆç®€åŒ–å¤šæƒ…æ™¯æ“ä½œï¼Ÿ\n- ã€ŠTony Bai Â· Go è¯­è¨€ç¬¬ä¸€è¯¾ã€‹20ï½œæ§åˆ¶ç»“æ„ï¼šGoä¸­çš„switchè¯­å¥æœ‰å“ªäº›å˜åŒ–ï¼Ÿ\n\nå¯¹æ¯”ç»“æœ\n\n- Java17 å±…ç„¶å¯ä»¥æ¯” Go ç®€æ´ï¼\n- ä½†ç„¶ç»¼åˆèƒ½åŠ› Go çš„æ›´çµæ´»\n\n\nJava17 switch\n\n```java\nString checkWorkday(int day) {\n\treturn switch (day) {\n\t\tcase 1, 2, 3, 4, 5 -&gt; &quot;it is a work day&quot;;\n\t\tcase 6, 7 -&gt; &quot;it is a weekend day&quot;;\n\t\tdefault -&gt; &quot;are you live on earth&quot;;\n\t};\n}\n```\n\nGo switch\n\n```go\nfunc checkWorkday(day int) string {\n\tswitch day {\n\tcase 1, 2, 3, 4, 5:\n\t\treturn &quot;it is a work day&quot;\n\tcase 6, 7:\n\t\treturn &quot;it is a weekend day&quot;\n\tdefault:\n\t\treturn &quot;are you live on earth&quot;\n\t}\n}\n```","like_count":15,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545278,"discussion_content":"switchçš„ä¸æ˜¯vã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1641893086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323496,"user_name":"è¿›åŒ–èŒ","can_delete":false,"product_type":"c1","uid":1276861,"ip_address":"","ucode":"B30A5F78BB4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg","comment_is_top":false,"comment_ctime":1637932745,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":4,"score":3,"product_id":100093501,"comment_content":"æ‰€ä»¥ï¼Œswitch ä¸éœ€è¦ break æ˜¯å‡ºäºå¤§å¤šæ•°æƒ…å†µ switch åªéœ€è¦èµ°ä¸€æ¡åˆ†æ”¯çš„ç¼˜æ•…å—ï¼Ÿ","like_count":5},{"had_liked":false,"id":326372,"user_name":"æœ¨æœ¨","can_delete":false,"product_type":"c1","uid":2704565,"ip_address":"","ucode":"86820F26A27308","user_header":"https://static001.geekbang.org/account/avatar/00/29/44/b5/7eba5a0e.jpg","comment_is_top":false,"comment_ctime":1639487312,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"Cè¯­è¨€çš„switchæ˜¯ä¸ºäº†æ¨¡æ‹Ÿè·³è½¬è¡¨ï¼Œæ‰€ä»¥å¦‚æœç›®çš„æ˜¯æ ¹æ®å€¼æ‰§è¡Œä¸€å°æ®µçš„è¯ï¼Œéœ€è¦æ¯ä¸ªæ¡ä»¶çš„æ‰§è¡Œè¯­å¥æœ€åéƒ½åŠ breakï¼Œgoçš„switchå·²ç»ä¸å†æ˜¯ä¸ºäº†æ¨¡æ‹Ÿè·³è½¬è¡¨äº†ï¼Œå°±æ˜¯æŒ‰ç€äººä»¬å¸¸ç”¨çš„æ–¹æ³•è®¾è®¡çš„ï¼Œæ‰€ä»¥ä¸ç”¨åŠ breakï¼Œä½†æ˜¯breakçš„ä½œç”¨ä¾æ—§ç•™ç€","like_count":1,"discussions":[{"author":{"id":1479120,"avatar":"https://static001.geekbang.org/account/avatar/00/16/91/d0/35bc62b1.jpg","nickname":"æ— å’","note":"","ucode":"B9759B5646F3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":602671,"discussion_content":"Goçš„switchæ›´ç¬¦åˆè¯­ä¹‰ç›´è§‰ï¼ŒåŸºæœ¬ä¸Šå¸¸ç”¨çš„æŸ¥è¡¨ã€åˆ†æ®µå‡½æ•°ã€å¤æ‚æ˜ å°„å…³ç³»ç­‰éƒ½èƒ½ç®€å•è¡¨è¾¾ã€‚Cè¯­è¨€çš„fallthroughï¼Œæ˜¯æ•ˆç‡çš„è€ƒè™‘ï¼Œå…¶å®åœ¨Goä¸­è¢«case expr1, expr2:{}ç­‰ä»·è¡¨è¾¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675838774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323429,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1637898870,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"è®²çš„éå¸¸è¯¦ç»†ï¼Œå€¼å¾—å¥½å¥½å­¦ä¹ ","like_count":1}]}