{"id":147896,"title":"11 | 源码剖析：Netty对Reactor的支持","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":139929,"user_name":"ELLIOT","can_delete":false,"product_type":"c3","uid":1151709,"ip_address":"","ucode":"CBFAAD6CB9BCF9","user_header":"https://static001.geekbang.org/account/avatar/00/11/92/dd/39bddbce.jpg","comment_is_top":false,"comment_ctime":1570769417,"is_pvip":false,"replies":[{"id":54101,"content":"一般常用场景都可以这么认为，所以有的开源组件直接上来就把它显示指定成1个线程。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1570786892,"ip_address":"","comment_id":139929,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师，既然mainReactor只会绑定一次，那是否bossGroup无论设置多少个线程其实只会有一个在工作？","like_count":10,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470178,"discussion_content":"一般常用场景都可以这么认为，所以有的开源组件直接上来就把它显示指定成1个线程。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570786892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142547,"user_name":"pjmike","can_delete":false,"product_type":"c3","uid":1053062,"ip_address":"","ucode":"C02B02268302F6","user_header":"https://static001.geekbang.org/account/avatar/00/10/11/86/c51eea36.jpg","comment_is_top":false,"comment_ctime":1571391436,"is_pvip":false,"replies":[{"id":55046,"content":"主从按selector是否分开来区分(而不是用是否共用一个线程来划分)比较容易理解点:主，接受连接，从，处理连接上的事，主一般现在只绑定一个端口所以是单线程，但是从是多线程，所以还是叫主从多线程对不对？你仔细看你提出的划分，第二种和第三种除了线程数不同外，并没有体现主从思想对不对？网上也有像你这么划分的，但是我觉得不太合适，你最好参考ppt上的图区去理解，那个是经典划分，然后具体实现上，netty有一点细小差别，但是大体一样。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571413297,"ip_address":"","comment_id":142547,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师您好，我想请教一个问题，我之前学过一点Reactor模式，而且网上很多写Reactor模式的文章都表达类似的思想，Reactor分为三种模式：\n- 单线程模式：一个NIO线程处理连接和读写操作\n- 多线程模式：一个NIO线程专门处理连接，一个NIO线程池用于处理IO读写操作\n- 主从多线程模式：一个NIO线程池用于处理连接，一个NIO线程池用于IO读写操作\n\n我其实是想问，为什么Netty会支持主从多线程模式呢，我们一般定义bossGroup和workGroup，但是Netty只会从bossGroup线程池中选取一个NioEventLoop与Channel进行绑定，也就是说随机分配一个线程用于处理客户端连接，实际上并没有用到线程池，这样说来，Netty应该没有对应的Reactor主从多线程模式的实现，只有多线程模式和单线程模式对应的实现。\n\n所以有点疑惑，不知道是不是我对Reactor模式的理解错了？希望老师能够解答一下","like_count":7,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471171,"discussion_content":"主从按selector是否分开来区分(而不是用是否共用一个线程来划分)比较容易理解点:主，接受连接，从，处理连接上的事，主一般现在只绑定一个端口所以是单线程，但是从是多线程，所以还是叫主从多线程对不对？你仔细看你提出的划分，第二种和第三种除了线程数不同外，并没有体现主从思想对不对？网上也有像你这么划分的，但是我觉得不太合适，你最好参考ppt上的图区去理解，那个是经典划分，然后具体实现上，netty有一点细小差别，但是大体一样。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571413297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264707,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4c/43/150c70c2.jpg","nickname":"陈松Plus","note":"","ucode":"0074BDECFA3D1D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543046,"discussion_content":"老师这解答牛皮了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640938756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136188,"avatar":"https://static001.geekbang.org/account/avatar/00/11/56/3c/e345522b.jpg","nickname":"xxwy","note":"","ucode":"BA2476EAF31F0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219116,"discussion_content":"多线程模型：其实处理连接请求和读写请求是一个线程，只不过是处理读写请求的业务逻辑部分在其他线程中执行了而已。我这个信息是从尚硅谷Netty视频中有一节看到的，在B站https://www.bilibili.com/video/BV1DJ411m7NR?p=40 具体看开篇的图线程的框框。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585736442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1203576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5d/78/f011d586.jpg","nickname":"遇见阳光","note":"","ucode":"378E5D37B3CD0E","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56795,"discussion_content":"老师,您好.主从按selector是否分开来区分 这句话该怎么理解 ?? 一直转不过弯来,我看这段代码\n   public ServerBootstrap group(EventLoopGroup group) {\n        return group(group, group);\n    }\n也是觉得 一个NIO线程专门处理连接，一个NIO线程池用于处理IO读写操作 ,而主从多线程模型使用的是两个不同的线程组,感觉没有体现主从模式啊??","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574516520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140408,"user_name":"每天晒白牙","can_delete":false,"product_type":"c3","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1570933330,"is_pvip":false,"replies":[{"id":54422,"content":"谢谢肯定，一起学习","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571055610,"ip_address":"","comment_id":140408,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师的讲课风格是我喜欢的，自己之前也一直想研究netty源码，但是一直找不到好方法，也就没干下去，正好跟着老师一起学，期待后续课程的更新","like_count":7,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470378,"discussion_content":"谢谢肯定，一起学习","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571055610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140300,"user_name":"李博","can_delete":false,"product_type":"c3","uid":1119919,"ip_address":"","ucode":"04C2DE916B84AB","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/af/bada0f59.jpg","comment_is_top":false,"comment_ctime":1570873372,"is_pvip":false,"replies":[{"id":54424,"content":"谢谢肯定，当时设计怎么讲的时候想过照本宣科，显得严谨，但是后来想下，大家能有兴趣么？能记得住么？所以是个挑战，所以决定:算了，多做类比，就算不严谨，至少容易理解点","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571055774,"ip_address":"","comment_id":140300,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师这个课程，通俗易懂，优秀！","like_count":7,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470336,"discussion_content":"谢谢肯定，当时设计怎么讲的时候想过照本宣科，显得严谨，但是后来想下，大家能有兴趣么？能记得住么？所以是个挑战，所以决定:算了，多做类比，就算不严谨，至少容易理解点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571055774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165734,"user_name":"夏目","can_delete":false,"product_type":"c3","uid":1212750,"ip_address":"","ucode":"67C075A01CF4D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/4e/d71092f4.jpg","comment_is_top":false,"comment_ctime":1577291544,"is_pvip":false,"replies":[{"id":63194,"content":"bind几个端口启动，就用到几个，所以一般确实只能用到1个。主从reactor, 也是reactor，也是多线程(因为worker线程肯定有，所以至少2个)，但是区别在于，主从reactor是有分工的多线程，非主从的，线程没有角色分工，都是所有的事情都做。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1577322374,"ip_address":"","comment_id":165734,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师，我有个疑问。main reactor只能用到一个线程的话是不是代表bossGroup只有一个在工作，那么这样和多线程reactor不就一样了吗？","like_count":6,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479272,"discussion_content":"bind几个端口启动，就用到几个，所以一般确实只能用到1个。主从reactor, 也是reactor，也是多线程(因为worker线程肯定有，所以至少2个)，但是区别在于，主从reactor是有分工的多线程，非主从的，线程没有角色分工，都是所有的事情都做。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577322374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146336,"user_name":"jzdayz","can_delete":false,"product_type":"c3","uid":1259280,"ip_address":"","ucode":"E84C0DFC53BE8A","user_header":"https://static001.geekbang.org/account/avatar/00/13/37/10/a8aa9acb.jpg","comment_is_top":false,"comment_ctime":1572502541,"is_pvip":false,"replies":[{"id":61932,"content":"正解！","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1576651080,"ip_address":"","comment_id":146336,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"&amp;2的幂次方，主要是为了公平性与性能，性能就是直接操作位，公平如下：\n假设线程池大小是7\n那么第一次调用：  0 &amp; (7-1)   \n                          0000 0000\n                          0000 0110\n返回 executor[0]\n\n第二次调用： 1 &amp; (7-1)\n                   0000 0001\n                   0000 0110\n返回 executor[0]\n\n第三次：  executor[2]\n第四次：  executor[2]\n第五次:    executor[4]\n第六次:    executor[4]\n.........\n\n很明显有问题，只有在&amp;上二进制表示都为1的情况下，也就是2的幂次方-1，才会公平，但是为什么不直接&amp; length，假设length为2的幂次方-1，因为下标越界了额😄，比如长度为7，第8次调用，那就是\n0000 0111\n0000 0111\n结果就是7，但是线程池总数为7 ，executor[7]就会越界","like_count":4,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472808,"discussion_content":"正解！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576651080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1127109,"avatar":"https://static001.geekbang.org/account/avatar/00/11/32/c5/38a59795.jpg","nickname":"逍遥子","note":"","ucode":"777CF0635970E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392696,"discussion_content":"优秀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631096242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256750,"avatar":"","nickname":"杨翔","note":"","ucode":"2741DAFB7D9E76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288574,"discussion_content":"hashmap中有类似的实现","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593791743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1556708,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic4yAqsGtEYBSRR7gDjyg9yiaJicNhMwiaNw4rMKQ5DHTfp7gmic0gpqEwCZaou8G6CdHKCg/132","nickname":"ant","note":"","ucode":"A39A03AF257471","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288256,"discussion_content":"这位大哥解释的非常好，但是有一点点小瑕疵当然也可以忽略不过在最后举证说明不能&amp;length的地方，还是建议以长度为2的幂次方的数举例比较好，毕竟其他数并不会走这个选择逻辑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593695427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142153,"user_name":"td901105","can_delete":false,"product_type":"c3","uid":1348830,"ip_address":"","ucode":"32D42A4F36FA02","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/SM4fwn9uFicXU8cQ1rNF2LQdKNbZI1FX1jmdwaE2MTrBawbugj4TQKjMKWG0sGbmqQickyARXZFS8NZtobvoWTHA/132","comment_is_top":false,"comment_ctime":1571301017,"is_pvip":false,"replies":[{"id":54975,"content":"你发过来看，就懂了，loop nio event，它的功能是轮训事件的，然后处理事件.别人也注册事件，而核心是因为它有一个selector","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571388155,"ip_address":"","comment_id":142153,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师您好，能解释一下NioEventLoop的含义吗？不是很明白，是不是发生的事件？","like_count":3,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471008,"discussion_content":"你发过来看，就懂了，loop nio event，它的功能是轮训事件的，然后处理事件.别人也注册事件，而核心是因为它有一个selector","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571388155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053921,"avatar":"https://static001.geekbang.org/account/avatar/00/10/14/e1/ee5705a2.jpg","nickname":"Zend","note":"","ucode":"80EBB0B6772E27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336586,"discussion_content":"老师 什么是selector？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608629404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141522,"user_name":"xiaorui","can_delete":false,"product_type":"c3","uid":1184639,"ip_address":"","ucode":"7778BF491278A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/13/7f/9cb6561a.jpg","comment_is_top":false,"comment_ctime":1571187526,"is_pvip":false,"replies":[{"id":55051,"content":"肯定差，明明已经握手，交谈，现在变成，交谈一次握次手，所以很累很心烦，但是实践上，一般有时候为了各种情况应对，会搞成一定时间的长连接，总之，一般都不用纯短连接了。boss线程挂了就玩完了，所以肯定不会让它挂的，挂了肯定连接连不上","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571414107,"ip_address":"","comment_id":141522,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"那短链接是不是性能会差？因为bossg group只有一个线程，或者这个线程挂了链接处理会短暂有问题","like_count":3,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470784,"discussion_content":"肯定差，明明已经握手，交谈，现在变成，交谈一次握次手，所以很累很心烦，但是实践上，一般有时候为了各种情况应对，会搞成一定时间的长连接，总之，一般都不用纯短连接了。boss线程挂了就玩完了，所以肯定不会让它挂的，挂了肯定连接连不上","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571414107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1107484,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","nickname":"程序员俊达","note":"","ucode":"2573037D7C82C8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":546192,"discussion_content":"所以boss线程的健壮性也是需要考虑的一点了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642218115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":470784,"ip_address":"","group_id":0},"score":546192,"extra":""}]},{"author":{"id":2175243,"avatar":"https://static001.geekbang.org/account/avatar/00/21/31/0b/91f317a0.jpg","nickname":"Belizer","note":"","ucode":"17DA133DC0BDDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603355,"discussion_content":"这个应该还好吧，这个线程只用来接受请求，会很容易挂掉？实在要考虑的话，这个线程也是线程池中的一个线程吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676125768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140534,"user_name":"HaydnSyx","can_delete":false,"product_type":"c3","uid":1185263,"ip_address":"","ucode":"2B4241CD385875","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/ef/84ed23fb.jpg","comment_is_top":false,"comment_ctime":1570977600,"is_pvip":false,"replies":[{"id":54457,"content":"嗯，可能原因在于第一，本来就有点复杂，第二，讲的时候不是按照一个请求处理那种顺序，所以第三章我换了一个方式，可以到时候把那个先看了，再回头看这个也可以，我当时考虑的是，如果学源码，应该先有领域知识，所以放前面了，单纯从源码学习，请求处理的话先学或许对不一样学习习惯的人容易理解点","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571057420,"ip_address":"","comment_id":140534,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"感觉这种阅读源码方式好难串起来，好难理解","like_count":3,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470431,"discussion_content":"嗯，可能原因在于第一，本来就有点复杂，第二，讲的时候不是按照一个请求处理那种顺序，所以第三章我换了一个方式，可以到时候把那个先看了，再回头看这个也可以，我当时考虑的是，如果学源码，应该先有领域知识，所以放前面了，单纯从源码学习，请求处理的话先学或许对不一样学习习惯的人容易理解点","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571057420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141016,"user_name":"拒绝","can_delete":false,"product_type":"c3","uid":1335155,"ip_address":"","ucode":"CB0264C4D3FE17","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg","comment_is_top":false,"comment_ctime":1571102851,"is_pvip":false,"replies":[{"id":54591,"content":"没关系，nio event loop里面就一个线程在用，可以理解就是单线程的，本来设计就是一个event loop 给多个channel用，否则一个人一个，那最终不就爆炸了么，和传统的那个一个连接一个线程就一样了，那个loop单词很形象，单线程，死循环。处理绑定上它上面的多个channel的事件","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571131334,"ip_address":"","comment_id":141016,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"给Channel 分配NIOEventLoop，有其它Channel在使用，会出现什么情况?","like_count":2,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470652,"discussion_content":"没关系，nio event loop里面就一个线程在用，可以理解就是单线程的，本来设计就是一个event loop 给多个channel用，否则一个人一个，那最终不就爆炸了么，和传统的那个一个连接一个线程就一样了，那个loop单词很形象，单线程，死循环。处理绑定上它上面的多个channel的事件","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571131334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140065,"user_name":"Geek_382a64","can_delete":false,"product_type":"c3","uid":1694786,"ip_address":"","ucode":"84580ACA3AB5B2","user_header":"https://static001.geekbang.org/account/avatar/00/19/dc/42/3c2bafe2.jpg","comment_is_top":false,"comment_ctime":1570800633,"is_pvip":false,"replies":[{"id":54430,"content":"你可以换个更文雅点的赞，哈","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571056044,"ip_address":"","comment_id":140065,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"吊炸天啊！","like_count":2,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470227,"discussion_content":"你可以换个更文雅点的赞，哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1694786,"avatar":"https://static001.geekbang.org/account/avatar/00/19/dc/42/3c2bafe2.jpg","nickname":"Geek_382a64","note":"","ucode":"84580ACA3AB5B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32662,"discussion_content":"我被老师临幸了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1694786,"avatar":"https://static001.geekbang.org/account/avatar/00/19/dc/42/3c2bafe2.jpg","nickname":"Geek_382a64","note":"","ucode":"84580ACA3AB5B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32661,"discussion_content":"只有这样才能凸显出老师的牛x之处","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184012,"user_name":"百世經綸燕归人","can_delete":false,"product_type":"c3","uid":1282072,"ip_address":"","ucode":"CF48273C8CE0D5","user_header":"https://static001.geekbang.org/account/avatar/00/13/90/18/84a90b9a.jpg","comment_is_top":false,"comment_ctime":1583204856,"is_pvip":false,"replies":[{"id":78839,"content":"搜下相关的资料可能好理解点，因为对一些基础知识的介绍一笔带过了。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1588057203,"ip_address":"","comment_id":184012,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"老师的课程对于有基楚了解过相关知识的人来说听起来就毫不费力，但对于新手来讲，就是一脸懵逼了","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485852,"discussion_content":"搜下相关的资料可能好理解点，因为对一些基础知识的介绍一笔带过了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588057203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1607211,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eryrl3AKW7JyvEQx2My2icQibkMRyrw6fxxibGUqNdHn10g26ibhmnnn2fDEYTQRRGRU7Fk3Lib1ib2vmSg/132","nickname":"Geek_a2ad26","note":"","ucode":"C74193BB7F5474","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230732,"discussion_content":"我也是","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586767513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149617,"user_name":"梁永桐","can_delete":false,"product_type":"c3","uid":1104931,"ip_address":"","ucode":"0228FAD39E20B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/dc/23/bed3361a.jpg","comment_is_top":false,"comment_ctime":1573290826,"is_pvip":false,"replies":[{"id":57861,"content":"因为课程没有结束，想着还添加更多的中文注释，过几天就放上去，稍等下，谢谢！\n\n更新：已经放了。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573548707,"ip_address":"","comment_id":149617,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"nettysource源码怎么没放课件呢","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473914,"discussion_content":"因为课程没有结束，想着还添加更多的中文注释，过几天就放上去，稍等下，谢谢！\n\n更新：已经放了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573548707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141852,"user_name":"whosyourdaddy","can_delete":false,"product_type":"c3","uid":1700984,"ip_address":"","ucode":"94A5C71339566F","user_header":"https://static001.geekbang.org/account/avatar/00/19/f4/78/764eae38.jpg","comment_is_top":false,"comment_ctime":1571237215,"is_pvip":false,"replies":[{"id":55056,"content":"今天剪切了一个20分钟的视频，好担心你后面那节会困😂","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571414825,"ip_address":"","comment_id":141852,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"讲的真的很通俗易懂，不过我这瞌睡不自觉就来了。","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470913,"discussion_content":"今天剪切了一个20分钟的视频，好担心你后面那节会困😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571414825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141343,"user_name":"吴某人","can_delete":false,"product_type":"c3","uid":1695145,"ip_address":"","ucode":"BA87C542ADB692","user_header":"https://static001.geekbang.org/account/avatar/00/19/dd/a9/87004fc8.jpg","comment_is_top":false,"comment_ctime":1571142489,"is_pvip":false,"replies":[{"id":55053,"content":"好像每周三更新5集","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571414306,"ip_address":"","comment_id":141343,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"后续课程什么时候更新呢？","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470724,"discussion_content":"好像每周三更新5集","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571414306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141318,"user_name":"小小征","can_delete":false,"product_type":"c3","uid":1358930,"ip_address":"","ucode":"335380EFE0FC61","user_header":"https://static001.geekbang.org/account/avatar/00/14/bc/52/52745d32.jpg","comment_is_top":false,"comment_ctime":1571139080,"is_pvip":false,"replies":[{"id":55058,"content":"参考下下周更新，上面会有，有一个完整的主线，简单说就是读取数据之后的fire channel read触发过来的，你可以从nio event loop里面对读事件的处理跟踪起","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571415022,"ip_address":"","comment_id":141318,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"老师请教个问题，channelRead() 这个函数的调用链没有找到，这个是在哪里调用的？","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470717,"discussion_content":"参考下下周更新，上面会有，有一个完整的主线，简单说就是读取数据之后的fire channel read触发过来的，你可以从nio event loop里面对读事件的处理跟踪起","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571415022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141266,"user_name":"于潇","can_delete":false,"product_type":"c3","uid":1234807,"ip_address":"","ucode":"641F96F80AE2D3","user_header":"https://static001.geekbang.org/account/avatar/00/12/d7/77/06ee5903.jpg","comment_is_top":false,"comment_ctime":1571133266,"is_pvip":false,"replies":[{"id":57938,"content":"每周三才更新。11月底12月初就更新完毕了。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573571077,"ip_address":"","comment_id":141266,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"老师，求更新呀","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470706,"discussion_content":"每周三才更新。11月底12月初就更新完毕了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573571077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140827,"user_name":"加载中……","can_delete":false,"product_type":"c3","uid":1366948,"ip_address":"","ucode":"3E59A0A0784D0A","user_header":"https://static001.geekbang.org/account/avatar/00/14/db/a4/191be6ad.jpg","comment_is_top":false,"comment_ctime":1571054891,"is_pvip":false,"replies":[{"id":54451,"content":"这个问题我最近也在反思，就是我讲的有得时候不知道大家都是什么基础，有的时候觉得很多知识都会，所以一笔带过，但是如果不带过，本来就学过的人又觉得我在浪费时间说那些基础的东西，所以有点难做，如果有哪里不明白，可以留言，到时候一起研究下，谢谢","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571056963,"ip_address":"","comment_id":140827,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"老师，如果能由浅入深的讲一下就更好了，对于之前没接触过的初学者，netty里面好多概念还不知道是干啥的。就像学英语单词都没学过，就开始学时态。有点联系不起来。","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470579,"discussion_content":"这个问题我最近也在反思，就是我讲的有得时候不知道大家都是什么基础，有的时候觉得很多知识都会，所以一笔带过，但是如果不带过，本来就学过的人又觉得我在浪费时间说那些基础的东西，所以有点难做，如果有哪里不明白，可以留言，到时候一起研究下，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212292,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eomyRD87iaxYMrAmdibricKVa8HAHGbkdATmJTIg0oTuGCQyvibibVuWFprUZRWdADQTwI1DRWVj6ZLJOA/132","nickname":"mank","note":"","ucode":"E104080D54874B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37172,"discussion_content":"我理解学过的也不一定都知道，概念提一下学过的会回想起来，我觉得","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571537713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1353908,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a8/b4/25a15298.jpg","nickname":"王海东","note":"","ucode":"68E5D17036C46A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36877,"discussion_content":"和这位同学感觉很像，没太听懂。自己公司的项目里用了netty,就想学一下，然后买了本netty的书，但是看起来很费劲，然后就买了老师的课以为会更基础一些，但是看了发现和书上讲的深度差不多，都需要有很好的基础才可以懂，所以有点失望。感觉这样讲还不如自己看看书，慢慢摸索。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571455325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140789,"user_name":"135","can_delete":false,"product_type":"c3","uid":1634369,"ip_address":"","ucode":"82A00DD1F195B9","user_header":"https://static001.geekbang.org/account/avatar/00/18/f0/41/b12a5b0d.jpg","comment_is_top":false,"comment_ctime":1571049683,"is_pvip":false,"replies":[{"id":54446,"content":"可以实现，但是意义不是很大，因为同一个jvm你搞二个，所有的gc什么的都共享一套，那你不如同一个应用绑定不同端口启动二个实例，但是这样的话，那还不如搞多个机器，管理起来也方便点，不管怎么说，前面都要搞个负载均衡。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571056757,"ip_address":"","comment_id":140789,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"想问下netty在创建SocketIOServer时，能不能配置多个ip和端口，用于负载均衡。","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470558,"discussion_content":"可以实现，但是意义不是很大，因为同一个jvm你搞二个，所有的gc什么的都共享一套，那你不如同一个应用绑定不同端口启动二个实例，但是这样的话，那还不如搞多个机器，管理起来也方便点，不管怎么说，前面都要搞个负载均衡。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203122,"user_name":"晓晨同学","can_delete":false,"product_type":"c3","uid":1413041,"ip_address":"","ucode":"236AEEB786E2CE","user_header":"https://static001.geekbang.org/account/avatar/00/15/8f/b1/7b697ed4.jpg","comment_is_top":false,"comment_ctime":1586142151,"is_pvip":false,"replies":[{"id":79260,"content":"关于多线程reactor的理解，区别主从最大的区别是，接受连接的处理是不是独立线程处理的，还是和其他事件混合的。你后面的理解都是对的，很准确，同时你会发现有三套线程了。一套是接受连接的.一套是收发数据的，一套是具体业务处理了。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1588633470,"ip_address":"","comment_id":203122,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"老师，多线程reactor模式我理解是一个select接受连接，有读写事件产生时就放入多线程执行，主从reactor多线程模式我理解是一个bossreactor线程接受连接，accept连接之后交给多个workerreactor线程进行感兴趣的读写事件的处理，而因为读写处理可能会有业务阻塞，所以每个workerreactor会将具体的业务处理放入另外一个线程池中进行处理，不知道这样的理解对吗","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490773,"discussion_content":"关于多线程reactor的理解，区别主从最大的区别是，接受连接的处理是不是独立线程处理的，还是和其他事件混合的。你后面的理解都是对的，很准确，同时你会发现有三套线程了。一套是接受连接的.一套是收发数据的，一套是具体业务处理了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588633470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":198356,"user_name":"小陈","can_delete":false,"product_type":"c3","uid":1009385,"ip_address":"","ucode":"A03A299310AD18","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/e9/814d057a.jpg","comment_is_top":false,"comment_ctime":1585447022,"is_pvip":false,"replies":[{"id":78806,"content":"可以换个思路理解，main group相当于迎宾，一个门就需要一个迎宾站岗就行了。这里的门就是服务器监听的端口。大多服务器不都是只监听一个端口么？所以只有一个门，只有一个迎宾（线程）服务就行了。而worker group才是干活的人，要多线程。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1588054352,"ip_address":"","comment_id":198356,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"老师maingroup为什么一个线程解释有点模糊呐","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489688,"discussion_content":"可以换个思路理解，main group相当于迎宾，一个门就需要一个迎宾站岗就行了。这里的门就是服务器监听的端口。大多服务器不都是只监听一个端口么？所以只有一个门，只有一个迎宾（线程）服务就行了。而worker group才是干活的人，要多线程。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588054352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182961,"user_name":"星期八","can_delete":false,"product_type":"c3","uid":1185504,"ip_address":"","ucode":"34A37F73A48E7F","user_header":"https://static001.geekbang.org/account/avatar/00/12/16/e0/7abad3cc.jpg","comment_is_top":false,"comment_ctime":1582898601,"is_pvip":false,"replies":[{"id":78838,"content":"是的，nio就是reactor， aip是proactor.","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1588057141,"ip_address":"","comment_id":182961,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"三中reactor 都应该是nio的吧","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485514,"discussion_content":"是的，nio就是reactor， aip是proactor.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588057141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2175243,"avatar":"https://static001.geekbang.org/account/avatar/00/21/31/0b/91f317a0.jpg","nickname":"Belizer","note":"","ucode":"17DA133DC0BDDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603351,"discussion_content":"打错字了，aio是proactor","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676124346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164591,"user_name":"orchardddd","can_delete":false,"product_type":"c3","uid":1631400,"ip_address":"","ucode":"F03E0585E60763","user_header":"https://static001.geekbang.org/account/avatar/00/18/e4/a8/0d8a9cd9.jpg","comment_is_top":false,"comment_ctime":1577038119,"is_pvip":false,"replies":[{"id":62558,"content":"谢谢肯定，反正多少有点收获就好。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1577066149,"ip_address":"","comment_id":164591,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"真心好！","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478830,"discussion_content":"谢谢肯定，反正多少有点收获就好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577066149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159994,"user_name":"再续啸傲","can_delete":false,"product_type":"c3","uid":1360184,"ip_address":"","ucode":"912987A17DCA92","user_header":"https://static001.geekbang.org/account/avatar/00/14/c1/38/e45bbb6b.jpg","comment_is_top":false,"comment_ctime":1575855380,"is_pvip":false,"replies":[{"id":61717,"content":"感觉这个说法有点较真，如果非说是对的，只能这么理解，比如NIO当中select本身就是阻塞的；再比如关闭socket，如果so_linger开启时，也可能会阻塞会等等。\n多路复用从特征上看：多个channel能复用一个线程来处理，区别于多路不复用：多个channel，每个channel,一个线程来处理。从本质上看，就是NIO的事件注册，扫描，处理的一套机制了。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1576476061,"ip_address":"","comment_id":159994,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"老师，有些问题想请教一下：netty实现的Nio并非是完全非阻塞的io模型。\n请问这句话怎么理解呢？\n如果这句话说的对，那阻塞发生在哪呢？\n经常听到select多路复用，请问这又如何理解呢？","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477227,"discussion_content":"感觉这个说法有点较真，如果非说是对的，只能这么理解，比如NIO当中select本身就是阻塞的；再比如关闭socket，如果so_linger开启时，也可能会阻塞会等等。\n多路复用从特征上看：多个channel能复用一个线程来处理，区别于多路不复用：多个channel，每个channel,一个线程来处理。从本质上看，就是NIO的事件注册，扫描，处理的一套机制了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576476061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158216,"user_name":"polk","can_delete":false,"product_type":"c3","uid":1165455,"ip_address":"","ucode":"1B6E948BA4DFAF","user_header":"https://static001.geekbang.org/account/avatar/00/11/c8/8f/e13a6552.jpg","comment_is_top":false,"comment_ctime":1575351313,"is_pvip":false,"replies":[{"id":61370,"content":"或许第四遍就可以了，加油\nboss迎宾或者老板，worker服务员或者员工，前者相当于给后者接活，对于到netty里面就是:boss处理连接，连接好了后，让worker服务于这个连接，这个连接本身就是socket.相当于客人","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1576090885,"ip_address":"","comment_id":158216,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"看了两遍，对socketchannle, bossgroup, workergroup 和 迎宾的例子没办法完全匹配起来。现在看第三遍。。。","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476677,"discussion_content":"或许第四遍就可以了，加油\nboss迎宾或者老板，worker服务员或者员工，前者相当于给后者接活，对于到netty里面就是:boss处理连接，连接好了后，让worker服务于这个连接，这个连接本身就是socket.相当于客人","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576090885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155877,"user_name":"江湖夜雨","can_delete":false,"product_type":"c3","uid":1204399,"ip_address":"","ucode":"CC05C505FE1072","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLG44I6sZyAQWjJEibZhJ94Kdel6ljHialNWtk7p71mLUdNiaTnYCcg3lKy8mIyibALRtf75DgjMf2yQw/132","comment_is_top":false,"comment_ctime":1574771550,"is_pvip":false,"replies":[{"id":61531,"content":"没有限制，这个event loop的没消费的任务的最大数倒是可以通过参数控制，本身它没限制绑定多少channel.","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1576210735,"ip_address":"","comment_id":155877,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"老师，一个reactor线程能同时最多管理多少个socket或channel ,  即一个eventloop绑定的channel有没有上限","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475906,"discussion_content":"没有限制，这个event loop的没消费的任务的最大数倒是可以通过参数控制，本身它没限制绑定多少channel.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576210735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154779,"user_name":"Dovelol","can_delete":false,"product_type":"c3","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1574561993,"is_pvip":false,"replies":[{"id":61943,"content":"是的，可以这么理解，但是也补充一点，可能视频课里面没有说，就是可以用&amp;运算的时候用&amp;，其实也是为了一点公平性的考虑，如果用%那种，累加到最大值后，会出现短暂的不公平现象，例如在idx变成了最大值时，数组的索引结果是：5,6,7,0,7,6....","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1576657370,"ip_address":"","comment_id":154779,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"老师好，想请教下，关于channel选择注册到哪个线程上，netty有两种策略，我的疑问是，这个地方选择是在调用bind方法后，一般也都是程序的启动过程，其实还并没有对外服务，所以优化这一点性能也就是节省的启动程序时的时间，这样理解对么？当然也可能会有程序运行时，另外调用bind方法建立新的监听，但其实都还没有实际连接或者工作对吧。","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475576,"discussion_content":"是的，可以这么理解，但是也补充一点，可能视频课里面没有说，就是可以用&amp;amp;运算的时候用&amp;amp;，其实也是为了一点公平性的考虑，如果用%那种，累加到最大值后，会出现短暂的不公平现象，例如在idx变成了最大值时，数组的索引结果是：5,6,7,0,7,6....","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576657370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154727,"user_name":"pchou","can_delete":false,"product_type":"c3","uid":1151889,"ip_address":"","ucode":"9C39C9D88C131C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKT7Exm9wh9whibxzpBuF7micnyCeYfPUHQWNNwM1uNuAquahOBbY5MpBY9QrDmT2qgSAsuOKFnjISA/132","comment_is_top":false,"comment_ctime":1574522577,"is_pvip":false,"replies":[{"id":59587,"content":"Hotspot和Eclipse J9, Jrockit只是JVM不同,JDK开发API还是一样的，就算是未来假设JDK都不一样了，还可以通过-D参数以及ServiceLoader设置进去的，所以这点不用担心，也不需要选择多个版本的。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574674362,"ip_address":"","comment_id":154727,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"有个疑问哈。看到SelectorProvider是用了sun的包，是不是意味着在非Hotspot的JVM下，netty无法支持，或者非hotspot下需要用用不同版本的netty？","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475563,"discussion_content":"Hotspot和Eclipse J9, Jrockit只是JVM不同,JDK开发API还是一样的，就算是未来假设JDK都不一样了，还可以通过-D参数以及ServiceLoader设置进去的，所以这点不用担心，也不需要选择多个版本的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574674362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147697,"user_name":"Standly","can_delete":false,"product_type":"c3","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1572879718,"is_pvip":false,"replies":[{"id":57930,"content":"为什么我没有听说过？愿闻其详，因为，对于tcp而言，同一个ip根本绑定不了同一个端口来启动。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573569794,"ip_address":"","comment_id":147697,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"我记得有一种模式是多个线程监听同一个端口？","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473287,"discussion_content":"为什么我没有听说过？愿闻其详，因为，对于tcp而言，同一个ip根本绑定不了同一个端口来启动。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573569794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144504,"user_name":"新一天","can_delete":false,"product_type":"c3","uid":1206286,"ip_address":"","ucode":"6D69AB90460EA1","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/0e/30b97251.jpg","comment_is_top":false,"comment_ctime":1571961341,"is_pvip":false,"replies":[{"id":55840,"content":"处理方式统一，还有一些项目它就要一个服务绑定多个端口就能用到了。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1572060987,"ip_address":"","comment_id":144504,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"主实际用到一个线程处理接收请求，为啥还这样设计，为以后扩展","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471976,"discussion_content":"处理方式统一，还有一些项目它就要一个服务绑定多个端口就能用到了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572060987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142077,"user_name":"高源","can_delete":false,"product_type":"c3","uid":1048887,"ip_address":"","ucode":"751B41FD38EF7D","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/37/12e4c9c9.jpg","comment_is_top":false,"comment_ctime":1571291121,"is_pvip":false,"replies":[{"id":54977,"content":"您可以分三块看看，然后再来看一遍，他这个例子其实和业务关系不大，算好懂的，而且写的很简洁","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571388364,"ip_address":"","comment_id":142077,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"老师看到你剖析源码，我觉得反射，泛型，设计模式，想问问老师哪有针对这些把这些溶合在一起的简单入门例子，这样参考学习对于自己设计一个比较好框架有很大帮助的，光看netty源码肯定理解上由于有一定复杂性，所以理解上还是困难些的","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470977,"discussion_content":"您可以分三块看看，然后再来看一遍，他这个例子其实和业务关系不大，算好懂的，而且写的很简洁","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571388364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142029,"user_name":"英耀","can_delete":false,"product_type":"c3","uid":1113425,"ip_address":"","ucode":"5E886F004BF6C2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/51/7f75a232.jpg","comment_is_top":false,"comment_ctime":1571280990,"is_pvip":false,"replies":[{"id":61944,"content":"这个优化有2个目标：\n1 效率一般而言 &amp;&gt;%, 你的测试不见得很准确，比如是否同时运行比较，选择的比较数是多少，测试了多少次、测试程序预热，内部实时优化等等因素都会导致结果不一致。\n2 还有一个原因是用%的方式，课程中可能忘记提了，当idx变成最大值后，会出现短暂的不公平（以8个nio event loop为例）：5,6,7,0,7,6，当然这个短暂的不公平真的是很短暂......\n","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1576657670,"ip_address":"","comment_id":142029,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"老师您好，对于您说的 PowerOfTwoEventExecutorChooser 通过与操作来获取比 GenericEventExecutorChooser 更高的性能这一点，我认为还不算太透彻，还是有点含糊。我做了几个测试用例，发现 与操作 跟 取模操作 的性能其实没有本质差别，因此真正有性能上的差别应该是 GenericEventExecutorChooser 需要进行 Math.abs，而 PowerOfTwoEventExecutorChooser 则不需要。原因当然就是 GenericEventExecutorChooser 通过 idx.getAndIncrement() % executors.length 得出的值有可能是负数，而 GenericEventExecutorChooser 的 idx.getAndIncrement() &amp; executors.length - 1 并不会得出负数，而这个原因就是这种优化的初衷。不知道我理解是否正确，请老师指教~","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470959,"discussion_content":"这个优化有2个目标：\n1 效率一般而言 &amp;amp;&amp;gt;%, 你的测试不见得很准确，比如是否同时运行比较，选择的比较数是多少，测试了多少次、测试程序预热，内部实时优化等等因素都会导致结果不一致。\n2 还有一个原因是用%的方式，课程中可能忘记提了，当idx变成最大值后，会出现短暂的不公平（以8个nio event loop为例）：5,6,7,0,7,6，当然这个短暂的不公平真的是很短暂......\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576657670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141631,"user_name":"pan","can_delete":false,"product_type":"c3","uid":1439228,"ip_address":"","ucode":"7C95D66C95E1BA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1iaykDMsDvUbd13DxewFGibSExGyNyzmHK8cciam9EH9RRWbhfSgMDPIbGP5hfe9hX0uTEkybhmic3fdpYVHXmRpJg/132","comment_is_top":false,"comment_ctime":1571203695,"is_pvip":false,"replies":[{"id":55050,"content":"这是演示方便，我提前加好了的，也就几行，视频上都有，最后课程结束，我都发出来，因为我加了很多中文注释，现在还在加，早发出来以后还要改，所以打算结束时候发，目前不影响学习，因为都很少自己加的，视频上也有。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571413921,"ip_address":"","comment_id":141631,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"其实想问下源码在哪下载.我在留下的github上没有看到echoserver有那么多行...","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470825,"discussion_content":"这是演示方便，我提前加好了的，也就几行，视频上都有，最后课程结束，我都发出来，因为我加了很多中文注释，现在还在加，早发出来以后还要改，所以打算结束时候发，目前不影响学习，因为都很少自己加的，视频上也有。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571413921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141213,"user_name":"小不点","can_delete":false,"product_type":"c3","uid":1351860,"ip_address":"","ucode":"C307D44A185C34","user_header":"https://static001.geekbang.org/account/avatar/00/14/a0/b4/5173f1af.jpg","comment_is_top":false,"comment_ctime":1571129585,"is_pvip":false,"replies":[{"id":55059,"content":"你下次哪里不明白，你提问，回头我整理出来所有的问题，包括你的问题，一起课程结束发出来，因为有的时候。我不知道大家都已经知道什么，所以不好控制这点。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571415132,"ip_address":"","comment_id":141213,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"前辈讲的很好，源码讲的我也能看懂。不过有的地方听不懂，可能是小白的原因，希望前辈能多注意很多名词小白没听过这个问题，好比之前讲过的同步和异步，阻塞和非阻塞那样，虽然很简单，但是随口提一句对我这样的小白来说可能会剩很多事。","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470697,"discussion_content":"你下次哪里不明白，你提问，回头我整理出来所有的问题，包括你的问题，一起课程结束发出来，因为有的时候。我不知道大家都已经知道什么，所以不好控制这点。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571415132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140322,"user_name":"鱼向北游","can_delete":false,"product_type":"c3","uid":1439908,"ip_address":"","ucode":"580EC7DCE57E9A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IPdZZXuHVMibwfZWmm7NiawzeEFGsaRoWjhuN99iaoj5amcRkiaOePo6rH1KJ3jictmNlic4OibkF4I20vOGfwDqcBxfA/132","comment_is_top":false,"comment_ctime":1570877163,"is_pvip":false,"replies":[{"id":54423,"content":"是的，还有很多其他极致的地方，到最后一章到时候我们一起看看","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571055667,"ip_address":"","comment_id":140322,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"2的幂次这个真的是个好梗，jdk的hashmap redis的哈希表，取数组下标都是类似的方法","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470346,"discussion_content":"是的，还有很多其他极致的地方，到最后一章到时候我们一起看看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571055667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140160,"user_name":"铿然","can_delete":false,"product_type":"c3","uid":1162461,"ip_address":"","ucode":"D529242EC2E2EA","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/dd/c9413f59.jpg","comment_is_top":false,"comment_ctime":1570842607,"is_pvip":false,"replies":[{"id":54427,"content":"这个我开始也想画画，后来我觉得一方面效果不定好，第二也是重点原因，讲了估计一般也记不住，毕竟类名都是枯燥的，所以放弃了，而且网上很多类图也都有，不过适当辅助的话可能效果会好点，以后会考虑下您的建议。谢谢","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571055944,"ip_address":"","comment_id":140160,"utype":1}],"discussion_count":3,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"通俗易懂，在我买的32门课中综合排名top3。讲源码时有的可以画个类结构图，说明关系，效果更好。","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470277,"discussion_content":"这个我开始也想画画，后来我觉得一方面效果不定好，第二也是重点原因，讲了估计一般也记不住，毕竟类名都是枯燥的，所以放弃了，而且网上很多类图也都有，不过适当辅助的话可能效果会好点，以后会考虑下您的建议。谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571055944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1504651,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKNDKOCoZvCqoYVM1t97Q77QPLmRBGvOLYzFsh8073RicycoIuwGrIsCXpAFEyVBOxcyE3Ih1mr6Vw/132","nickname":"Geek_bbbda3","note":"","ucode":"737394CE472C21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30935,"discussion_content":"前两个较好的是什么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570871075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1162461,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bc/dd/c9413f59.jpg","nickname":"铿然","note":"","ucode":"D529242EC2E2EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1504651,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKNDKOCoZvCqoYVM1t97Q77QPLmRBGvOLYzFsh8073RicycoIuwGrIsCXpAFEyVBOxcyE3Ih1mr6Vw/132","nickname":"Geek_bbbda3","note":"","ucode":"737394CE472C21","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32119,"discussion_content":"判断好不好的依据是：\n1.当前是否适合自己。 （当前最想学，最关注，且是自己所缺失的）\n2.讲师的风格\n3.讲解的内容\n4.网上没有类似的系统的学习资料  （有的课程大部分内容网络上也能找到，比较基础，所以也谈不上是好课程）\n\n因此，top3中我个人觉得还有  王争  的  数据结构与算法之美，另外一个可能不适合大多人，就是左耳听风专栏，这个专栏的知识点太多，就像一个地图，每个内容不是很细，只能当作一个索引，然后需要自己再去看关联资料，举得它好，是因为知识点比较全面，但是一般人学不过来（包括我自己），所以可能会觉得百分之七、八十内容暂时用不上。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570989134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":30935,"ip_address":"","group_id":0},"score":32119,"extra":""}]}]},{"had_liked":false,"id":139796,"user_name":"逍遥子","can_delete":false,"product_type":"c3","uid":1127109,"ip_address":"","ucode":"777CF0635970E1","user_header":"https://static001.geekbang.org/account/avatar/00/11/32/c5/38a59795.jpg","comment_is_top":false,"comment_ctime":1570730894,"is_pvip":false,"replies":[{"id":54111,"content":"谢谢肯定，听到你这样的话，干劲更大了，只能说一起学习，因为水太深，一个人是上不了岸的","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1570788263,"ip_address":"","comment_id":139796,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"老师讲解风格 是我最喜欢的一个 没有之一 ","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470119,"discussion_content":"谢谢肯定，听到你这样的话，干劲更大了，只能说一起学习，因为水太深，一个人是上不了岸的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570788263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139764,"user_name":"别来无恙","can_delete":false,"product_type":"c3","uid":1695241,"ip_address":"","ucode":"0F16C7961FF427","user_header":"https://static001.geekbang.org/account/avatar/00/19/de/09/2edd4a2b.jpg","comment_is_top":false,"comment_ctime":1570719707,"is_pvip":false,"replies":[{"id":54135,"content":"谢谢支持，希望不辜负期待，有所收获","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1570793144,"ip_address":"","comment_id":139764,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"期待后续视频，和实战讲解","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470102,"discussion_content":"谢谢支持，希望不辜负期待，有所收获","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570793144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139757,"user_name":"Geek_fy5mx7","can_delete":false,"product_type":"c3","uid":1080112,"ip_address":"","ucode":"F911CC975F4218","user_header":"https://static001.geekbang.org/account/avatar/00/10/7b/30/1c39a82b.jpg","comment_is_top":false,"comment_ctime":1570718693,"is_pvip":false,"replies":[{"id":54106,"content":"有点浪费，但是boss也是用nio event loop，而这个也是给worker用的，所以它的构造器不好设计，而且虽然多个只用到一个，但是启动的时候多余的那些线程并不启动，所以占用资源很少。有些开源组件上来就设置成1了，不能说这是最佳实践，但是说明写代码的人看过源码的。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1570787695,"ip_address":"","comment_id":139757,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"为什么好多服务端代码绑定一个端口却把boss线程数设置为多个或者默认（默认也是多个），如果只用到一个线程的话那不就是浪费了吗？","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470095,"discussion_content":"有点浪费，但是boss也是用nio event loop，而这个也是给worker用的，所以它的构造器不好设计，而且虽然多个只用到一个，但是启动的时候多余的那些线程并不启动，所以占用资源很少。有些开源组件上来就设置成1了，不能说这是最佳实践，但是说明写代码的人看过源码的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570787695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139734,"user_name":"henry","can_delete":false,"product_type":"c3","uid":1075941,"ip_address":"","ucode":"0ACD12F363F8DE","user_header":"http://thirdqq.qlogo.cn/qqapp/101418266/D6DD8CB1004D442B48914656340277F3/100","comment_is_top":false,"comment_ctime":1570712724,"is_pvip":false,"replies":[{"id":54113,"content":"俗称pbl，基于问题式学习……","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1570788754,"ip_address":"","comment_id":139734,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100036701,"comment_content":"带着问题再去看看源码，这种方式挺好，期待老师后续的视频","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470082,"discussion_content":"俗称pbl，基于问题式学习……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570788754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157768,"user_name":"再续啸傲","can_delete":false,"product_type":"c3","uid":1360184,"ip_address":"","ucode":"912987A17DCA92","user_header":"https://static001.geekbang.org/account/avatar/00/14/c1/38/e45bbb6b.jpg","comment_is_top":false,"comment_ctime":1575256871,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100036701,"comment_content":"看到这个&amp;运算，就立马想到了HashMap的hash算法。。。","like_count":3},{"had_liked":false,"id":268473,"user_name":"且浪","can_delete":false,"product_type":"c3","uid":1790647,"ip_address":"","ucode":"8AB0B2C3C232F6","user_header":"","comment_is_top":false,"comment_ctime":1608210153,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100036701,"comment_content":"0基础来看完蛋。\n作为第一章讲完了Netty外观，第二张应该是基本概念的内容吧。不懂Channel是什么，不懂addListener()要干什么事，何来PowerOfTwoxxx亦或Generticxxx,,,","like_count":1},{"had_liked":false,"id":395274,"user_name":"Allan","can_delete":false,"product_type":"c3","uid":1310388,"ip_address":"河北","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1730040582,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100036701,"comment_content":"第三点说的稀里糊涂的，next是选择器两种策略。策略中executors是个数组通过不同的方式 取了一个值？取到值的意义是什么，怎么解释？为啥通过这种方式取得索引就是对的？都没有说明白。","like_count":0},{"had_liked":false,"id":245796,"user_name":"Geek_07ead6","can_delete":false,"product_type":"c3","uid":1714992,"ip_address":"","ucode":"424137ADA9AA23","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoREZlw6JWh1OXYvcKhOToBPCSqVr33Vhc0gmW9jNT3JHtW7NtaiaiaNJicjjxyVia7Oec3Qq1bzLGreQ/132","comment_is_top":false,"comment_ctime":1599055767,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100036701,"comment_content":"老师，多路复用为什么不着重的讲一下呢？不应该也是netty中挺重要的一个概念吗","like_count":0},{"had_liked":false,"id":231511,"user_name":"ant","can_delete":false,"product_type":"c3","uid":1556708,"ip_address":"","ucode":"A39A03AF257471","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic4yAqsGtEYBSRR7gDjyg9yiaJicNhMwiaNw4rMKQ5DHTfp7gmic0gpqEwCZaou8G6CdHKCg/132","comment_is_top":false,"comment_ctime":1593694526,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100036701,"comment_content":"老师您好，在讲到选择器的两种选择方法时，实际上我感到了点困惑，％在java中的含义不是求余数，我查了下资料只有在python中％才是取模的含义，既然是取余，那么除数是正，结果就是正，除数是负，余数就是负，显示数组长度不应该是负数，如果是取模那么结果与被除数一致，那么作者的意思就是自增数有可能从负数开始么？","like_count":0},{"had_liked":false,"id":225442,"user_name":"刘岚乔月","can_delete":false,"product_type":"c3","uid":1095289,"ip_address":"","ucode":"99A9AB4E4E1111","user_header":"https://static001.geekbang.org/account/avatar/00/10/b6/79/22e582a5.jpg","comment_is_top":false,"comment_ctime":1591757256,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100036701,"comment_content":"请问老师，Netty给channel分配NioEventLoop是不是可以理解为，当有一个请求&#47;业务&#47;相应处理时，从当先线程池中（NioEventLoopGroup）挑选一个线程分配个这channel进行对应的处理。可以这么理解吗？","like_count":0},{"had_liked":false,"id":141837,"user_name":"java0-杨文杰","can_delete":false,"product_type":"c3","uid":1238982,"ip_address":"","ucode":"F863B23D896182","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/c6/c7ea204d.jpg","comment_is_top":false,"comment_ctime":1571234491,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100036701,"comment_content":"powerOfTow 的取值方式 和 HashMap 的取 indx 的方式一样 \nif ((p = tab[i = (n - 1) &amp; hash]) == null)\n            tab[i] = newNode(hash, key, value, null);\n运算效率高","like_count":0},{"had_liked":false,"id":141759,"user_name":"袋鼠先生","can_delete":false,"product_type":"c3","uid":1130237,"ip_address":"","ucode":"1FA605AAAC9BE0","user_header":"https://static001.geekbang.org/account/avatar/00/11/3e/fd/61479d60.jpg","comment_is_top":false,"comment_ctime":1571219226,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100036701,"comment_content":"(val &amp; -val) == val;\nexecutors[idx.getAndIncrement() &amp; executors.length - 1];\n体现了大师的技术基本功底深厚；\n感觉自己好low；这个流程我自己跟了几遍，还是感觉有些懵，无法深入理解。","like_count":0},{"had_liked":false,"id":140427,"user_name":"每天晒白牙","can_delete":false,"product_type":"c3","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1570937610,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100036701,"comment_content":"非常好，喜欢","like_count":0}]}