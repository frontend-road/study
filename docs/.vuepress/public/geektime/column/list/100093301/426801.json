{"id":426801,"title":"03 | NumPy（下）：深度学习中的常用操作","content":"<p>你好，我是方远。</p><p>通过上节课的学习，我们已经对NumPy数组有了一定的了解，正所谓实践出真知，今天我们就以一个图像分类的项目为例，看看NumPy的在实际项目中都有哪些重要功能。</p><p>我们先从一个常见的工作场景出发，互联网教育推荐平台，每天都有千万量级的文字与图片的广告信息流入。为了给用户提供更加精准的推荐，你的老板交代你设计一个模型，让你把包含各个平台Logo（比如包含极客时间Logo）的图片自动找出来。</p><p><img src=\"https://static001.geekbang.org/resource/image/1e/5d/1ecb3ccdd0b408b0350e255f7e0c875d.png?wh=318x116\" alt=\"图片\"></p><p>想要解决这个图片分类问题，我们可以分解成数据加载、训练与模型评估三部分（其实基本所有深度学习的项目都可以这样划分）。其中数据加载跟模型评估中，就经常会用到NumPy数组的相关操作。</p><p>那么我们先来看看数据的加载。</p><h2>数据加载阶段</h2><p>这个阶段我们要做的就是把训练数据读进来，然后给模型训练使用。训练数据不外乎这三种：图片、文本以及类似二维表那样的结构化数据。</p><p>不管使用PyTorch还是TensorFlow，或者是传统机器学习的scikit-learn，我们在读入数据这一块，都会先把数据转换成NumPy的数组，然后再进行后续的一系列操作。</p><p>对应到我们这个项目中，需要做的就是把训练集中的图片读入进来。对于图片的处理，我们一般会使用Pillow与OpenCV这两个模块。</p><!-- [[[read_end]]] --><p>虽然Pillow和OpenCV功能看上去都差不多，但还是有区别的。在PyTorch中，很多图片的操作都是基于Pillow的，所以当使用PyTorch编程出现问题，或者要思考、解决一些图片相关问题时，要从Pillow的角度出发。</p><p>下面我们先以单张图片为例，将极客时间的那张Logo图片分别用Pillow与OpenCV读入，然后转换为NumPy的数组。</p><h3>Pillow方式</h3><p>首先，我们需要使用Pillow中的下述代码读入上面的图片。</p><pre><code class=\"language-plain\">from PIL import Image\nim = Image.open('jk.jpg')\nim.size\n输出: 318, 116\n</code></pre><p>Pillow是以二进制形式读入保存的，那怎么转为NumPy格式呢？这个并不难，我们只需要利用NumPy的asarray方法，就可以将Pillow的数据转换为NumPy的数组格式。</p><pre><code class=\"language-plain\">import numpy as np\n\nim_pillow = np.asarray(im)\n\nim_pillow.shape\n输出：(116, 318, 3)\n</code></pre><h3>OpenCV方式：</h3><p>OpenCV的话，不再需要我们手动转格式，它直接读入图片后，就是以NumPy数组的形式来保存数据的，如下面的代码所示。</p><pre><code class=\"language-plain\">import cv2\nim_cv2 = cv2.imread('jk.jpg')\ntype(im_cv2)\n输出：numpy.ndarray\n\nim_cv2.shape\n输出：(116, 318, 3)\n</code></pre><p>结合代码输出可以发现，我们读入后的数组的最后一个维度是3，这是因为图片的格式是RGB格式，表示有R、G、B三个通道。对于计算视觉任务来说，绝大多数处理的图片都是RGB格式，如果不是RGB格式的话，要记得事先转换成RGB格式。<br>\n这里有个地方需要你关注，Pillow读入后通道的顺序就是R、G、B，而OpenCV读入后顺序是<strong>B、G、R</strong>。</p><p>模型训练时的通道顺序需与预测的通道顺序要保持一致。也就是说使用Pillow训练，使用OpenCV读入图片直接进行预测的话，不会报错，但结果会不正确，所以大家一定要注意。</p><p>接下来，我们就验证一下Pillow与OpenCV读入数据通道的顺序是否如此，借此引出有关Numpy数组索引与切片、合并等常见问题。</p><p>怎么验证这条结论呢？只需要将R、G、B三个通道的数据单独提取出来，然后令另外两个通道的数据全为0即可。</p><p>这里我给你说说为什么这样做。RGB色彩模式是工业界的一种颜色标准，RGB分别代表红、绿、蓝三个通道的颜色，将这三种颜色混合在一起，就形成了我们眼睛所能看到的所有颜色。</p><p>RGB三个通道各有256个亮度，分别用数字0到255表示，数字越高代表亮度越强，数字0则是代表最弱的亮度。在我们的例子中，如果一个通道的数据再加另外两个全0的通道（相当于关闭另外两个通道），最终图像以红色格调（可以先看一下后文中的最终输出结果）呈现出来的话，我们就可以认为该通道的数据是来源于R通道，G与B通道的证明同样可以如此。</p><p>好，首先我们提取出RGB三个通道的数据，这可以从数组的索引与切片说起。</p><h3>索引与切片</h3><p>如果你了解Python，那么索引和切片的概念你应该不陌生。</p><p>就像图书目录里的索引，我们可以根据索引标注的页码快速找到需要的内容，而Python</p><p>里的索引也是同样的功能，它用来定位数组中的某一个值。而切片意思就相当于提取图书中从某一页到某一页的内容。</p><p>NumPy数组的索引方式与Python的列表的索引方式相同，也同样支持切片索引。</p><p>这里需要你注意的是在NumPy数组中经常会出现用冒号来检索数据的形式，如下所示：</p><pre><code class=\"language-plain\">im_pillow[:, :, 0]\n</code></pre><p>这是什么意思呢？我们一起来看看。“：”代表全部选中的意思。我们的图片读入后，会以下图的状态保存在数组中。</p><p><img src=\"https://static001.geekbang.org/resource/image/20/01/20ayy454079771245f44f983b2130e01.jpg?wh=1920x1391\" alt=\"\"></p><p>上述代码的含义就是取第三个维度索引为0的全部数据，换句话说就是，取图片第0个通道的所有数据。</p><p>这样的话，通过下面的代码，我们就可以获得每个通道的数据了。</p><pre><code class=\"language-plain\">im_pillow_c1 = im_pillow[:, :, 0]\nim_pillow_c2 = im_pillow[:, :, 1]\nim_pillow_c3 = im_pillow[:, :, 2]\n</code></pre><p>获得了每个通道的数据，接下来就需要生成一个全0数组，该数组要与im_pillow具有相同的宽高。</p><p>全0数组你还记得怎么生成吗？可以自己先思考一下，生成的代码如下所示。</p><pre><code class=\"language-plain\">zeros = np.zeros((im_pillow.shape[0], im_pillow.shape[1], 1))\nzeros.shape\n输出：(116, 318, 1)\n</code></pre><p>然后，我们只需要将全0的数组与im_pillow_c1、im_pillow_c2、im_pillow_c3进行拼接，就可以获得对应通道的图像数据了。</p><h3>数组的拼接</h3><p>刚才我们拿到了单独通道的数据，接下来就需要把一个分离出来的数据跟一个全0数组拼接起来。如下图所示，红色的可以看作单通道数据，白色的为全0数据。</p><p><img src=\"https://static001.geekbang.org/resource/image/ee/c1/eedf20bf55a6c0521309d7c102719bc1.jpg?wh=1920x899\" alt=\"图片\"></p><p>NumPy数组为我们提供了np.concatenate((a1, a2, …), axis=0)方法进行数组拼接。其中，a1，a2, …就是我们要合并的数组；axis是我们要沿着哪一个维度进行合并，默认是沿着0轴方向。</p><p>对于我们的问题，是要沿着2轴的方向进行合并，也是我们最终的目标是要获得下面的三幅图像。<br>\n<img src=\"https://static001.geekbang.org/resource/image/68/7e/68bcd8107bf71ef876a339350a10c77e.jpg?wh=1603x653\" alt=\"\"></p><p>那么，我们先将im_pillow_c1与全0数组进行合并，生成上图中最左侧的数组，有了图像的数组才能获得最终图像。合并的代码跟输出结果如下：</p><pre><code class=\"language-plain\">im_pillow_c1_3ch = np.concatenate((im_pillow_c1, zeros, zeros),axis=2)\n---------------------------------------------------------------------------\nAxisError                                 Traceback (most recent call last)\n&lt;ipython-input-21-e3d53c33c94d&gt; in &lt;module&gt;\n----&gt; 1 im_pillow_c1_3ch = np.concatenate((im_pillow_c1, zeros, zeros),axis=2)\n&lt;__array_function__ internals&gt; in concatenate(*args, **kwargs)\nAxisError: axis 2 is out of bounds for array of dimension 2\n</code></pre><p>看到这里你可能很惊讶，竟然报错了？错误的原因是在2维数组中，axis如果等于2的话会越界。</p><p>我们看看im_pillow_c1与zeros的形状。</p><pre><code class=\"language-plain\">im_pillow_c1.shape\n输出：(116, 318)\nzeros.shape\n输出：(116, 318, 1)\n</code></pre><p>原来是我们要合并的两个数组维度不一样啊。那么如何统一维度呢？将im_pillow_c1变成(116, 318, 1)即可。</p><h4>方法一：使用np.newaxis</h4><p>我们可以使用np.newaxis让数组增加一个维度，使用方式如下。</p><pre><code class=\"language-plain\">im_pillow_c1 = im_pillow_c1[:, :, np.newaxis]\nim_pillow_c1.shape\n输出：(116, 318, 1)\n</code></pre><p>运行上面的代码，就可以将2个维度的数组转换为3个维度的数组了。<br>\n这个操作在你看深度学习相关代码的时候经常会看到，只不过PyTorch中的函数名unsqueeze(), TensorFlow的话是与NumPy有相同的名字，直接使用tf.newaxis就可以了。</p><p>然后我们再次将im_pillow_c1与zeros进行合并，这时就不会报错了，代码如下所示：</p><pre><code class=\"language-plain\">im_pillow_c1_3ch = np.concatenate((im_pillow_c1, zeros, zeros),axis=2)\nim_pillow_c1_3ch.shape\n输出：(116, 318, 3)\n</code></pre><h4>方法二：直接赋值</h4><p>增加维度的第二个方法就是直接赋值，其实我们完全可以生成一个与im_pillow形状完全一样的全0数组，然后将每个通道的数值赋值为im_pillow_c1、im_pillow_c2与im_pillow_c3就可以了。我们用这种方式生成上图中的中间与右边图像的数组。</p><pre><code class=\"language-plain\">im_pillow_c2_3ch = np.zeros(im_pillow.shape)\nim_pillow_c2_3ch[:,:,1] = im_pillow_c2\n\nim_pillow_c3_3ch = np.zeros(im_pillow.shape)\nim_pillow_c3_3ch[:,:,2] = im_pillow_c3\n</code></pre><p>这样的话，我们就可以将三个通道的RGB图片打印出来了。<br>\n关于绘图，你可以使用matplotlib进行绘图，它是NumPy的绘图库。如果你需要绘图，可以在<a href=\"https://matplotlib.org/stable/gallery/index.html\">这个网站</a>上找到各种各样的例子，然后根据它提供的代码进行修改，具体如何绘图我就不展开了。</p><p>说回我们的通道顺序验证问题，完成前面的操作后，你可以用下面的代码将原图、R通道、G通道与B通道的4幅图打印出来，你看是不是RGB顺序的呢？</p><pre><code class=\"language-plain\">from matplotlib import pyplot as plt\nplt.subplot(2, 2, 1)\nplt.title('Origin Image')\nplt.imshow(im_pillow)\nplt.axis('off')\nplt.subplot(2, 2, 2)\nplt.title('Red Channel')\nplt.imshow(im_pillow_c1_3ch.astype(np.uint8))\nplt.axis('off')\nplt.subplot(2, 2, 3)\nplt.title('Green Channel')\nplt.imshow(im_pillow_c2_3ch.astype(np.uint8))\nplt.axis('off')\nplt.subplot(2, 2, 4)\nplt.title('Blue Channel')\nplt.imshow(im_pillow_c3_3ch.astype(np.uint8))\nplt.axis('off')\nplt.savefig('./rgb_pillow.png', dpi=150)\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/12/10/1264b5c889bfyy5e0d00668cfa205110.png?wh=900x600\" alt=\"图片\"></p><h3>深拷贝（副本）与浅拷贝（视图）</h3><p>刚才我们通过获取图片通道数据的练习，不过操作确实比较繁琐，介绍这些方法也主要是为了让你掌握切片索引和数组拼接的知识点。</p><p>其实我们还有一种更加简单的方式获得三个通道的BGR数据，只需要将图片读入后，直接将其中的两个通道赋值为0即可。代码如下所示：</p><pre><code class=\"language-plain\">from PIL import Image\nimport numpy as np\n\nim = Image.open('jk.jpg')\nim_pillow = np.asarray(im)\nim_pillow[:,:,1:]=0\n输出：\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-146-789bda58f667&gt; in &lt;module&gt;\n      4 im = Image.open('jk.jpg')\n      5 im_pillow = np.asarray(im)\n----&gt; 6 im_pillow[:,:,1:-1]=0\nValueError: assignment destination is read-only\n</code></pre><p>运行刚才的代码，报错提示说数组是只读数组，没办法进行修改。那怎么办呢？我们可以使用copy来复制一个数组。<br>\n说到copy()的话，就要说到浅拷贝与深拷贝的概念，<a href=\"https://time.geekbang.org/column/article/426126\">上节课</a>我们说到创建数组时就提过，np.array()属于深拷贝，np.asarray()则是浅拷贝。</p><p>简单来说，浅拷贝或称视图，指的是与原数组共享<strong>数据</strong>的数组，请注意，只是数据，没有说共享形状。视图我们通常使用view()来创建。常见的切片操作也会返回对原数组的浅拷贝。</p><p>请看下面的代码，数组a与b的数据是相同的，形状确实不同，但是修改b中的数据后，a的数据同样会发生变化。</p><pre><code class=\"language-plain\">a = np.arange(6)\nprint(a.shape)\n输出：(6,)\nprint(a)\n输出：[0 1 2 3 4 5]\n\nb = a.view()\nprint(b.shape)\n输出：(6,)\nb.shape = 2, 3\nprint(b)\n输出：[[0 1 2]\n [3 4 5]]\nb[0,0] = 111\nprint(a)\n输出：[111   1   2   3   4   5]\nprint(b)\n输出：[[111   1   2]\n [  3   4   5]]\n</code></pre><p>而深拷贝又称副本，也就是完全复制原有数组，创建一个新的数组，修改新的数组不会影响原数组。深拷贝使用copy()方法。</p><p>所以，我们将刚才报错的程序修改成下面的形式就可以了。</p><pre><code class=\"language-plain\">im_pillow = np.array(im)\nim_pillow[:,:,1:]=0\n</code></pre><p>可别小看深拷贝和浅拷贝的区别。这里讲一个我以前遇到的坑吧，我曾经要开发一个部署在手机端的人像分割模型。</p><p>为了提高模型的分割效果，我考虑了新的实验方法——将前一帧的数据也作为当前帧的输入进行考虑，训练阶段没有发生问题，但是在调试阶段发现模型的效果非常差。</p><p>后来经过研究，我才发现了问题的原因。原因是我为了可视化分割效果，我将前一帧的数据进行变换打印出来。同时，我错误的采用了浅拷贝的方式，将前一帧的数据传入当前帧，所以说传入到当前帧的数据是经过变化的，而不是原始的输出。</p><p>这时再传入当前帧，自然无法得到正确结果。当时因为这个坑，差点产生要放弃这个实验的想法，后面改成深拷贝才解决了问题。</p><p>好了，讲到这里，你是否可以用上述的方法对OpenCV读取图片读入通道顺序进行一下验证呢？</p><h2>模型评估</h2><p>在模型评估时，我们一般会将模型的输出转换为对应的标签。</p><p>假设现在我们的问题是将图片分为2个类别，包含极客时间的图片与不包含的图片。模型会输出形状为(2, )的数组，我们把它叫做probs，它存储了两个概率，我们假设索引为0的概率是包含极客时间图片的概率，另一个是其它图片的概率，它们两个概率的和为1。如果极客时间对应的概率大，则可以推断该图片为包含极客时间的图片，否则为其他图片。</p><p>简单的做法就是判断probs[0]是否大于0.5，如果大于0.5，则可以认为图片是我们要寻找的。</p><p>这种方法固然可以，但是如果我们需要判断图片的类别有很多很多种呢？</p><p>例如，有1000个类别的ImageNet。也许你会想到遍历这个数组，求出最大值对应的索引。</p><p>那如果老板让你找出概率最大的前5个类别呢？有没有更简单点的方法？我们继续往下看。</p><h3>Argmax Vs Argmin：求最大/最小值对应的索引</h3><p>NumPy的argmax(a, axis=None)方法可以为我们解决求最大值索引的问题。如果不指定axis，则将数组默认为1维。</p><p>对于我们的问题，使用下述代码即可获得拥有最大概率值的图片。</p><pre><code class=\"language-plain\">np.argmax(probs)\n</code></pre><p>Argmin的用法跟Argmax差不多，不过它的作用是获得具有最小值的索引。</p><h3>Argsort：数组排序后返回原数组的索引</h3><p>那现在我们再把问题升级一下，比如需要你将图片分成10个类别，要找到具有最大概率的前三个类别。</p><p>模型输出的概率如下：</p><pre><code class=\"language-plain\">probs = np.array([0.075, 0.15, 0.075, 0.15, 0.0, 0.05, 0.05, 0.2, 0.25])\n</code></pre><p>这时，我们就可以借助argsort(a, axis=-1, kind=None)函数来解决该问题。np.argsort的作用是对原数组进行从小到大的排序，返回的是对应元素在原数组中的索引。<br>\nnp.argsort包括后面这几个关键参数：</p><ul>\n<li>a是要进行排序的原数组；</li>\n<li>axis是要沿着哪一个轴进行排序，默认是-1，也就是最后一个轴；</li>\n<li>kind是采用什么算法进行排序，默认是快速排序，还有其他排序算法，具体你可以看看数据结构的排序算法。</li>\n</ul><p>我们还是结合例子来理解，你可以看看下面的代码，它描述了我们使用argsort对probs进行排序，然后返回对应坐标的全过程。</p><pre><code class=\"language-plain\">probs_idx_sort = np.argsort(-probs)  #注意，加了负号，是按降序排序\nprobs_idx_sort\n输出：array([8, 7, 1, 3, 0, 2, 5, 6, 4])\n#概率最大的前三个值的坐标\nprobs_idx_sort[:3]\n输出：array([8, 7, 1])\n</code></pre><h2>小结</h2><p>恭喜你，完成了这一节课的学习。这一节介绍了一些常用且重要的功能。几乎在所有深度学习相关的项目中，你都会常常用到这些函数，当你阅读别人的代码的时候也会经常看到。</p><p>让我们一起来复习一下今天学到的这些函数，我画了一张表格，给你总结了它们各自的关键功能和使用要点。</p><p><img src=\"https://static001.geekbang.org/resource/image/29/yd/296b503a7c2fb89987695035c0184yyd.jpg?wh=1709x798\" alt=\"\"></p><p>我觉得NumPy最难懂的还是上节课的轴，如果你把轴的概念理解清楚之后，理解今天的内容会更加轻松。理解了原理之后，关键还是动手练习。</p><h2>每课一练</h2><p>给定数组scores，形状为（256，256，2），scores[: , :, 0] 与scores[:, :, 1]对应位置元素的和为1，现在我们要根据scores生产数组mask，要求scores通道0的值如果大于通道1的值，则mask对应的位置为0，否则为1。</p><p>scores如下，你可以试试用代码实现：</p><pre><code class=\"language-plain\">scores = np.random.rand(256, 256, 2)\nscores[:,:,1] = 1 - scores[:,:,0]\n</code></pre><p>欢迎你在留言区记录你的疑问或者收获，也推荐你把这节课分享给你的朋友。</p>","comments":[{"had_liked":false,"id":316448,"user_name":"IUniverse","can_delete":false,"product_type":"c1","uid":2620618,"ip_address":"","ucode":"077BB2291E25FA","user_header":"https://static001.geekbang.org/account/avatar/00/27/fc/ca/c1b8d9ca.jpg","comment_is_top":false,"comment_ctime":1634306203,"is_pvip":false,"replies":[{"id":"114603","content":"你好，IUniverse。感谢你的留言。你的回答是正确的👍🏻。^^","user_name":"作者回复","comment_id":316448,"uid":"2802608","ip_address":"","utype":1,"ctime":1634350233,"user_name_real":"方远"}],"discussion_count":1,"race_medal":0,"score":"70353782939","product_id":100093301,"comment_content":"import numpy as np <br><br>scores=np.random.rand(256,256,2)<br>scores[:,:,0]=1-scores[:,:,1]<br>mask=np.argmax(scores,axis=2)<br>print(mask)","like_count":16,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528385,"discussion_content":"你好，IUniverse。感谢你的留言。你的回答是正确的👍🏻。^^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634350233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316386,"user_name":"Yuhan","can_delete":false,"product_type":"c1","uid":2767570,"ip_address":"","ucode":"38CC135D8BBF67","user_header":"https://static001.geekbang.org/account/avatar/00/2a/3a/d2/cbd2c882.jpg","comment_is_top":false,"comment_ctime":1634293805,"is_pvip":false,"replies":[{"id":"114585","content":"你好，Yuhan。感谢你的留言。👍🏻，你的答案是正确的。^^","user_name":"作者回复","comment_id":316386,"uid":"2802608","ip_address":"","utype":1,"ctime":1634301994,"user_name_real":"方远"}],"discussion_count":2,"race_medal":0,"score":"35994032173","product_id":100093301,"comment_content":"方法一：<br>result = np.argmax(scores, axis=2)<br>方法二：<br>result = (scores[:, :, 0] &lt; scores[:, :, 1]).astype(&#39;int&#39;)","like_count":9,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528375,"discussion_content":"你好，Yuhan。感谢你的留言。👍🏻，你的答案是正确的。^^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634301994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2822701,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/12/2d/aba06a9a.jpg","nickname":"李泽","note":"","ucode":"136225FC58F164","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580613,"discussion_content":"第一种秒啊，但是我觉得第二种可读性更高","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658291822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317926,"user_name":"王骥","can_delete":false,"product_type":"c1","uid":1049879,"ip_address":"","ucode":"CE53ADEA51235A","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/17/63887353.jpg","comment_is_top":false,"comment_ctime":1635061128,"is_pvip":false,"replies":[{"id":"115200","content":"你好，王骥，感谢你的留言。<br>问题出现在最后的那个冒号上^^。<br>先看只留 r 通道的代码。<br>im_pillow_c1_3ch[:, :, 1:] = 0 这一行中的&quot;1:&quot;是指将从第一个通道到最后通道的所有数据赋值为0。<br>im_pillow_c1_3ch[:, :, 2:] = 0这一行中的&quot;2:&quot;是指将从第二个通道到最后通道的所有数据赋值为0。<br>其实，在第一行中已经把第二行的数据都赋值为0了。<br>又因为显示R通道的数据是将第1和第2个通道的数据都赋值为0，所以只有R的通道是正常显示出来。<br>在“只保留g通道”的代码中，&quot;0:&quot;是指从第0个通道开始到最后一个通道的所有数据都赋值为0，所以显示为黑色了。<br>“# 只留 b 通道”的代码同理。<br><br>可以这样修改代码：<br># 只留 r 通道<br>im_pillow_c1_3ch[:, :, 1:] = 0<br># 只留 g 通道 <br>im_pillow_c2_3ch[:, :, 0] = 0<br>im_pillow_c2_3ch[:, :, 2] = 0<br># 只留 b 通道 <br>im_pillow_c3_3ch[:, :, 0:1] = 0","user_name":"作者回复","comment_id":317926,"uid":"2802608","ip_address":"","utype":1,"ctime":1635078908,"user_name_real":"方远"}],"discussion_count":5,"race_medal":0,"score":"10224995720","product_id":100093301,"comment_content":"    im_pillow_c1_3ch = im_pillow.copy()<br>    im_pillow_c2_3ch = im_pillow.copy()<br>    im_pillow_c3_3ch = im_pillow.copy()<br>    # 只留 r 通道<br>    im_pillow_c1_3ch[:, :, 1:] = 0<br>    im_pillow_c1_3ch[:, :, 2:] = 0<br>    # 只留 g 通道 <br>    im_pillow_c2_3ch[:, :, 0:] = 0<br>    im_pillow_c2_3ch[:, :, 2:] = 0<br>    # 只留 b 通道 <br>    im_pillow_c3_3ch[:, :, 0:] = 0<br>    im_pillow_c3_3ch[:, :, 1:] = 0<br><br>老师，尝试用深拷贝来实现RGB通道过滤。R 显示没有问题，不过在显示 GB 通道的时候，获得的图片背景是黑色的。是我哪里理解出了问题吗？还是代码有问题？","like_count":2,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529033,"discussion_content":"你好，王骥，感谢你的留言。\n问题出现在最后的那个冒号上^^。\n先看只留 r 通道的代码。\nim_pillow_c1_3ch[:, :, 1:] = 0 这一行中的&amp;quot;1:&amp;quot;是指将从第一个通道到最后通道的所有数据赋值为0。\nim_pillow_c1_3ch[:, :, 2:] = 0这一行中的&amp;quot;2:&amp;quot;是指将从第二个通道到最后通道的所有数据赋值为0。\n其实，在第一行中已经把第二行的数据都赋值为0了。\n又因为显示R通道的数据是将第1和第2个通道的数据都赋值为0，所以只有R的通道是正常显示出来。\n在“只保留g通道”的代码中，&amp;quot;0:&amp;quot;是指从第0个通道开始到最后一个通道的所有数据都赋值为0，所以显示为黑色了。\n“# 只留 b 通道”的代码同理。\n\n可以这样修改代码：\n# 只留 r 通道\nim_pillow_c1_3ch[:, :, 1:] = 0\n# 只留 g 通道 \nim_pillow_c2_3ch[:, :, 0] = 0\nim_pillow_c2_3ch[:, :, 2] = 0\n# 只留 b 通道 \nim_pillow_c3_3ch[:, :, 0:1] = 0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635078908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2876058,"avatar":"","nickname":"Geek_159427","note":"","ucode":"FB7E15A091844E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":553238,"discussion_content":"# 只留 b 通道\nim_pillow_c3_3ch[:, :, 0:1] = 0 这个第三维不应该是 0:2 而非 0:1 吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645779687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":529033,"ip_address":""},"score":553238,"extra":""}]},{"author":{"id":2823462,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/15/26/f973aa31.jpg","nickname":"平常心","note":"","ucode":"53CC9FBB44A483","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407877,"discussion_content":"遇到了同样的问题，解决了。讲的很清楚\n# 只留 b 通道\nim_pillow_c3_3ch[:, :, :2] = 0\n这样是不是也可以","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1635142654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255866,"avatar":"https://static001.geekbang.org/account/avatar/00/13/29/ba/3e11e36f.jpg","nickname":"明天出发","note":"","ucode":"56DB1CD88BF1A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570326,"discussion_content":"# 只留 green 通道 \nim_pillow_c2_3ch[:, :, ::2] = 0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651732764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/05/17/63887353.jpg","nickname":"王骥","note":"","ucode":"CE53ADEA51235A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408274,"discussion_content":"原来是这样，是我理解错了。前两个冒号代表1维2维所有通道，所以第三个冒号就代表第3维所有。1:也就代表第3维第一个通道到最后一个通道。早该想到的，脑子没转过弯。😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635214902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349775,"user_name":"nico","can_delete":false,"product_type":"c1","uid":3038188,"ip_address":"","ucode":"31A951B7ED3AE2","user_header":"https://static001.geekbang.org/account/avatar/00/2e/5b/ec/c667c792.jpg","comment_is_top":false,"comment_ctime":1656320972,"is_pvip":true,"replies":[{"id":"127364","content":"hi，你好，非常感谢你的留言。<br>为了引出np.newaxis和concatenate可能稍微有点绕了，concatenate讲的也有点不是很清楚，我稍后更新一下。<br><br>np.concatenate中第一个参数是要合并的数组，np.concatenate((im_pillow_c1, zeros), axis=2) 这么写就是要将im_pillow_c1与zeros沿着axis=2进行合并。合并后的数组的shape是(im_pillow_c1.shape[0], im_pillow_c1.shape[1], 3)。<br>从第三个维度上来看有三个值，第一个是im_pillow_c1，第二个是0，第三个也是0。<br>所以这么写下来im_pillow_c1_3ch， im_pillow_c2_3ch， im_pillow_c3_3ch都是一样的结果。<br><br>可以这么修改<br>zeros = np.zeros((im_pillow.shape[0], im_pillow.shape[1], 1))<br>im_pillow_c1 = im_pillow_c1[:,:,np.newaxis]<br>im_pillow_c2 = im_pillow_c2[:,:,np.newaxis]<br>im_pillow_c3 = im_pillow_c3[:,:,np.newaxis]<br>im_pillow_c1_3ch = np.concatenate((im_pillow_c1, zeros, zeros),axis=2)<br>im_pillow_c2_3ch = np.concatenate((zeros, im_pillow_c1, zeros),axis=2)<br>im_pillow_c3_3ch = np.concatenate((zeros, zeros,im_pillow_c1),axis=2)","user_name":"作者回复","comment_id":349775,"uid":"2802608","ip_address":"","utype":1,"ctime":1656490315,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"5951288268","product_id":100093301,"comment_content":"请问下为什么这样合并下来都是红色底图的，第二种方式是可以的<br>im_pillow_c1_3ch = np.concatenate((im_pillow_c1, zeros), axis=2)<br>im_pillow_c2_3ch = np.concatenate((im_pillow_c2, zeros), axis=2)<br>im_pillow_c3_3ch = np.concatenate((im_pillow_c3, zeros), axis=2)","like_count":1,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578057,"discussion_content":"hi，你好，非常感谢你的留言。\n为了引出np.newaxis和concatenate可能稍微有点绕了，concatenate讲的也有点不是很清楚，我稍后更新一下。\n\nnp.concatenate中第一个参数是要合并的数组，np.concatenate((im_pillow_c1, zeros), axis=2) 这么写就是要将im_pillow_c1与zeros沿着axis=2进行合并。合并后的数组的shape是(im_pillow_c1.shape[0], im_pillow_c1.shape[1], 3)。\n从第三个维度上来看有三个值，第一个是im_pillow_c1，第二个是0，第三个也是0。\n所以这么写下来im_pillow_c1_3ch， im_pillow_c2_3ch， im_pillow_c3_3ch都是一样的结果。\n\n可以这么修改\nzeros = np.zeros((im_pillow.shape[0], im_pillow.shape[1], 1))\nim_pillow_c1 = im_pillow_c1[:,:,np.newaxis]\nim_pillow_c2 = im_pillow_c2[:,:,np.newaxis]\nim_pillow_c3 = im_pillow_c3[:,:,np.newaxis]\nim_pillow_c1_3ch = np.concatenate((im_pillow_c1, zeros, zeros),axis=2)\nim_pillow_c2_3ch = np.concatenate((zeros, im_pillow_c1, zeros),axis=2)\nim_pillow_c3_3ch = np.concatenate((zeros, zeros,im_pillow_c1),axis=2)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656490315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318169,"user_name":"clee","can_delete":false,"product_type":"c1","uid":1467446,"ip_address":"","ucode":"122875102B23A8","user_header":"","comment_is_top":false,"comment_ctime":1635169461,"is_pvip":false,"replies":[{"id":"115351","content":"你好，clee，感谢你的留言。如果是用Jupyter的话，可以检查检查一个单元格是否被执行多次了。<br>比如“im_pillow_c1 = im_pillow_c1[:, :, np.newaxis] ”它所在的单元格。第一次被执行im_pillow_c1变为(116, 318, 1）。<br>不小心再次执行的话，不会报错，im_pillow_c1就变为(116, 318, 1,1）了。<br>如果还是不行的话，你可以把你的代码发给我看看。","user_name":"作者回复","comment_id":318169,"uid":"2802608","ip_address":"","utype":1,"ctime":1635209830,"user_name_real":"方远"}],"discussion_count":2,"race_medal":0,"score":"5930136757","product_id":100093301,"comment_content":"你好，为什么我执行 im_pillow_c1 = im_pillow_c1[:, :, np.newaxis] 后打印im_pillow_c1的shape变量，输出是  (116, 318, 1, 1, 1)， 而不是 (116, 318, 1,) 呢<br><br>","like_count":1,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529125,"discussion_content":"你好，clee，感谢你的留言。如果是用Jupyter的话，可以检查检查一个单元格是否被执行多次了。\n比如“im_pillow_c1 = im_pillow_c1[:, :, np.newaxis] ”它所在的单元格。第一次被执行im_pillow_c1变为(116, 318, 1）。\n不小心再次执行的话，不会报错，im_pillow_c1就变为(116, 318, 1,1）了。\n如果还是不行的话，你可以把你的代码发给我看看。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635209830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1467446,"avatar":"","nickname":"clee","note":"","ucode":"122875102B23A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410409,"discussion_content":"谢谢，就是这个原因导致的，另外我用同样的方法一尝试了im_pillow_c2和im_pillow_c3，为什么也会得到红色的背景","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635689150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317905,"user_name":"平常心","can_delete":false,"product_type":"c1","uid":2823462,"ip_address":"","ucode":"53CC9FBB44A483","user_header":"https://static001.geekbang.org/account/avatar/00/2b/15/26/f973aa31.jpg","comment_is_top":false,"comment_ctime":1635044921,"is_pvip":false,"replies":[{"id":"115203","content":"你好，平常心，感谢你的留言。关于G与B通道的代码可以这样写。 ^^<br><br># g 通道 <br>im_pillow_c2_3ch = im_pillow.copy()<br>im_pillow_c2_3ch[:, :, 0] = 0<br>im_pillow_c2_3ch[:, :, 2] = 0<br># b 通道 <br>im_pillow_c3_3ch = im_pillow.copy()<br>im_pillow_c3_3ch[:, :, 0:1] = 0","user_name":"作者回复","comment_id":317905,"uid":"2802608","ip_address":"","utype":1,"ctime":1635079976,"user_name_real":"方远"}],"discussion_count":2,"race_medal":0,"score":"5930012217","product_id":100093301,"comment_content":"老师，您好！想请教一下，下边这个问题：<br><br>课程中，您提到：“其实我们还有一种更加简单的方式获得三个通道的 BGR 数据，只需要将图片读入后，直接将其中的两个通道赋值为 0 即可。”<br><br>im_pillow = np.array(im)<br>im_pillow[:,:,1:]=0<br><br>这个出来的结果是：R通道的图像，想请教一下，G、B通道的图像，用同样的办法实现，代码im_pillow[:,:,:]=0应该是什么？谢谢<br>","like_count":1,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529023,"discussion_content":"你好，平常心，感谢你的留言。关于G与B通道的代码可以这样写。 ^^\n\n# g 通道 \nim_pillow_c2_3ch = im_pillow.copy()\nim_pillow_c2_3ch[:, :, 0] = 0\nim_pillow_c2_3ch[:, :, 2] = 0\n# b 通道 \nim_pillow_c3_3ch = im_pillow.copy()\nim_pillow_c3_3ch[:, :, 0:1] = 0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635079976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2823462,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/15/26/f973aa31.jpg","nickname":"平常心","note":"","ucode":"53CC9FBB44A483","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407879,"discussion_content":"谢谢老师，学到了，受益匪浅，感谢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635142961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316653,"user_name":"cab","can_delete":false,"product_type":"c1","uid":1983360,"ip_address":"","ucode":"E096A122C35ADE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ0F94uoYZQicSOIfEfSr9gH7CTKibNBsS6d9PRDd8cy7bdTCF9jibXYtf0esGqsQAItHnElejIFovxg/132","comment_is_top":false,"comment_ctime":1634476571,"is_pvip":false,"replies":[{"id":"114645","content":"你好，cab，感谢你的留言。是的，你说的没错👍🏻。OpenCV可以这么提取通道数据。<br>文中只是通过确定通道顺序这个小例子，引出Numpy数组的一些操作。","user_name":"作者回复","comment_id":316653,"uid":"2802608","ip_address":"","utype":1,"ctime":1634483432,"user_name_real":"方远"}],"discussion_count":1,"race_medal":0,"score":"5929443867","product_id":100093301,"comment_content":"OpenCV提取RGB通道很方便:<br>b, g, r = cv2.split(image)","like_count":1,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528447,"discussion_content":"你好，cab，感谢你的留言。是的，你说的没错👍🏻。OpenCV可以这么提取通道数据。\n文中只是通过确定通道顺序这个小例子，引出Numpy数组的一些操作。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634483432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316282,"user_name":"文森特没有眼泪","can_delete":false,"product_type":"c1","uid":1584477,"ip_address":"","ucode":"736BBE54D37AA5","user_header":"https://static001.geekbang.org/account/avatar/00/18/2d/5d/49f92fac.jpg","comment_is_top":false,"comment_ctime":1634258952,"is_pvip":false,"replies":[{"id":"114576","content":"你好，文森特没有眼泪。首先，谢谢你的留言，然后为你的思路点赞👍🏻。<br>不过稍微有点小瑕疵，题目要求的是，如果通道0的值大于通道1的值，那么mask对应位置的数值就为0，否则为1。<br>你这样做的结果正好是相反了。<br>另外，你可以考虑考虑如何使用聚合函数np.argmax来求解，思考一下它的axis应该等于几，才能获得正确的答案。^^","user_name":"作者回复","comment_id":316282,"uid":"2802608","ip_address":"","utype":1,"ctime":1634280342,"user_name_real":"方远"}],"discussion_count":1,"race_medal":0,"score":"5929226248","product_id":100093301,"comment_content":"mask = (s[:,:,0] &gt; s[:,:,1])<br>mask = mask.astype(&#39;int&#39;)","like_count":1,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528339,"discussion_content":"你好，文森特没有眼泪。首先，谢谢你的留言，然后为你的思路点赞👍🏻。\n不过稍微有点小瑕疵，题目要求的是，如果通道0的值大于通道1的值，那么mask对应位置的数值就为0，否则为1。\n你这样做的结果正好是相反了。\n另外，你可以考虑考虑如何使用聚合函数np.argmax来求解，思考一下它的axis应该等于几，才能获得正确的答案。^^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634280342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357628,"user_name":"张跃雨","can_delete":false,"product_type":"c1","uid":1001447,"ip_address":"内蒙古","ucode":"95EE564C058806","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/e7/c15e9fa5.jpg","comment_is_top":false,"comment_ctime":1663500593,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663500593","product_id":100093301,"comment_content":"mask = np.array(scores)<br>mask [mask &gt;0.5] = 1<br>mask [mask &lt;=0.5] = 0","like_count":0},{"had_liked":false,"id":356130,"user_name":"孙新","can_delete":false,"product_type":"c1","uid":2875594,"ip_address":"辽宁","ucode":"A80038A479B943","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e0/ca/adfaa551.jpg","comment_is_top":false,"comment_ctime":1662001498,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662001498","product_id":100093301,"comment_content":"<br>a = np.arange(6)<br>print(a.shape)<br>输出：(6,)<br>print(a)<br>输出：[0 1 2 3 4 5]<br><br>b = a.view()<br>print(b.shape)<br>输出：(6,)<br>b.shape = 2, 3<br>print(b)<br>输出：[[0 1 2]<br> [3 4 5]]<br>b[0,0] = 111<br>print(a)<br>输出：[111   1   2   3   4   5]<br>print(b)<br>输出：[[111   1   2]<br> [  3   4   5]]<br><br>其中<br>b.shape  = 2,3 少了括号，报错了","like_count":0},{"had_liked":false,"id":355482,"user_name":"峰老板牛逼","can_delete":false,"product_type":"c1","uid":2771960,"ip_address":"北京","ucode":"5D4EB2F72A86A3","user_header":"https://static001.geekbang.org/account/avatar/00/2a/4b/f8/918870c5.jpg","comment_is_top":false,"comment_ctime":1661417711,"is_pvip":false,"replies":[{"id":"129382","content":"是没看懂Mask吗？如果是的话mask在后面的分割中会有介绍。","user_name":"作者回复","comment_id":355482,"uid":"2802608","ip_address":"北京","utype":1,"ctime":1661493048,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1661417711","product_id":100093301,"comment_content":"课后习题没看懂","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585341,"discussion_content":"是没看懂Mask吗？如果是的话mask在后面的分割中会有介绍。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661493048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353437,"user_name":"醒狮","can_delete":false,"product_type":"c1","uid":3072964,"ip_address":"北京","ucode":"563751137E89E9","user_header":"https://static001.geekbang.org/account/avatar/00/2e/e3/c4/68bf7e23.jpg","comment_is_top":false,"comment_ctime":1659438487,"is_pvip":false,"replies":[{"id":"128540","content":"好的，没问题，有机会一起合作^^","user_name":"作者回复","comment_id":353437,"uid":"2802608","ip_address":"北京","utype":1,"ctime":1659508666,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1659438487","product_id":100093301,"comment_content":"另有一点想向您说：<br>我是一名大二的学生，虽然和向您一样的业界佼佼者比不了，但是我把您的课程从头到尾学了一遍，每一个代码我都自己复现了一次，如果您有后面想继续出课的打算，我可以无偿帮您做一些力所能及的事情（比如一些基础部分的理解，和一些代码的操作，运行，翻译等工作），希望您做出的这么好的课程可以被更多人看见！","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582557,"discussion_content":"好的，没问题，有机会一起合作^^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659508666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353396,"user_name":"醒狮","can_delete":false,"product_type":"c1","uid":3072964,"ip_address":"北京","ucode":"563751137E89E9","user_header":"https://static001.geekbang.org/account/avatar/00/2e/e3/c4/68bf7e23.jpg","comment_is_top":false,"comment_ctime":1659423319,"is_pvip":false,"replies":[{"id":"128539","content":"感谢你的认可^^ 加油","user_name":"作者回复","comment_id":353396,"uid":"2802608","ip_address":"北京","utype":1,"ctime":1659508650,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1659423319","product_id":100093301,"comment_content":"谢谢老师一直以来的回复，您之前说有没有就是进阶课程的建议。<br>我是这样理解的：<br>就比如您在18|图像分类（下）中提到的<br><br>“我先给你解读一下EfficientNet的这篇论文，这里我着重分享论文的核心思路还有我的理解，学有余力的同学可以在课后自行阅读原文。”<br><br>整篇文章通过您的解读看下来之后就发现很流畅，整体的思路很明晰，读了一遍都觉得读不够那种，虽然现在也在学习论文的撰写和理解，可是有很多时候还是找不到核心或者说读完一篇文章下来磕磕绊绊的，但是就是您这么加入自己的理解让后抽提论文的核心要素之后就觉得整篇文章很好理解了。就是怎么讲.......在我看来，我觉得如果日后您能出一个论文导读，或者说是不同模型的演练，我觉得效果可能会很好。不过无论如何，这套课程中真的很感谢您能分享这么多知识，从您的文字当中可以看出您是一个博学且友善的人！","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582556,"discussion_content":"感谢你的认可^^ 加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659508651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353293,"user_name":"醒狮","can_delete":false,"product_type":"c1","uid":3072964,"ip_address":"北京","ucode":"563751137E89E9","user_header":"https://static001.geekbang.org/account/avatar/00/2e/e3/c4/68bf7e23.jpg","comment_is_top":false,"comment_ctime":1659334880,"is_pvip":false,"replies":[{"id":"128440","content":"很感谢你的认可哈。从1到无穷这个话题可能有点大了，很容易挂一漏万。因为往下学就不光是基础概念理解，而是怎么用它实现更复杂的AI项目了。所以就拿我自己来说吧，PyTorch进阶可以看看最近质量比较高的论文的实现有没有用Pytorch。<br><br>其实我也和你一样，仍然在学习探索中。你愿意的话可以说说你心目中更进阶的课程是怎样的，可能暂时没什么时间来给大家出新课，但如果呼声比较高我会考虑的。","user_name":"作者回复","comment_id":353293,"uid":"2802608","ip_address":"北京","utype":1,"ctime":1659340632,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1659334880","product_id":100093301,"comment_content":"老师，很感谢您的文档，请问日后会更新进阶版的课程以供参考学习吗，因为感觉咱们这个课程是入门，您讲得很好，希望可以能再讲一讲如何从1到无穷，谢谢老师！","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582262,"discussion_content":"很感谢你的认可哈。从1到无穷这个话题可能有点大了，很容易挂一漏万。因为往下学就不光是基础概念理解，而是怎么用它实现更复杂的AI项目了。所以就拿我自己来说吧，PyTorch进阶可以看看最近质量比较高的论文的实现有没有用Pytorch。\n\n其实我也和你一样，仍然在学习探索中。你愿意的话可以说说你心目中更进阶的课程是怎样的，可能暂时没什么时间来给大家出新课，但如果呼声比较高我会考虑的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659340632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352859,"user_name":"醒狮","can_delete":false,"product_type":"c1","uid":3072964,"ip_address":"陕西","ucode":"563751137E89E9","user_header":"https://static001.geekbang.org/account/avatar/00/2e/e3/c4/68bf7e23.jpg","comment_is_top":false,"comment_ctime":1658985199,"is_pvip":false,"replies":[{"id":"128354","content":"你好，醒狮, 感谢你的留言。<br>你可能是把通道的顺序搞错了。这样写就OK啦。<br>im_pillow_R_p = np.concatenate((im_pillow_R,zeros,zeros),axis=2)<br>im_pillow_G_p = np.concatenate((zeros,im_pillow_G,zeros),axis=2)<br>im_pillow_B_p = np.concatenate((zeros,zeros,im_pillow_B),axis=2)","user_name":"作者回复","comment_id":352859,"uid":"2802608","ip_address":"陕西","utype":1,"ctime":1659078647,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1658985199","product_id":100093301,"comment_content":"from PIL import Image<br>im = Image.open(&#39;C:\\\\Users\\\\Pride\\\\Desktop\\\\uio.jfif&#39;)<br><br><br>import numpy as np<br>im_pillow = np.array(im)<br><br>im_pillow_R = im_pillow[:,:,0]<br>im_pillow_G = im_pillow[:,:,1]<br>im_pillow_B = im_pillow[:,:,2]<br><br>zeros = np.zeros(shape=(im_pillow.shape[0],im_pillow.shape[1],1))<br><br>im_pillow_R = im_pillow_R[:,:,np.newaxis]<br>im_pillow_G = im_pillow_G[:,:,np.newaxis]<br>im_pillow_B = im_pillow_B[:,:,np.newaxis]<br><br>im_pillow_R_p = np.concatenate((im_pillow_R,zeros,zeros),axis=2)<br><br>from matplotlib import pyplot as plt<br>plt.imshow(im_pillow_R_p.astype(np.uint8))<br>plt.savefig(&#39;.&#47;rgb_pillow.png&#39;, dpi=150)<br>plt.show()<br><br>老师好，想请教您一下，为什么这么打印我无论换上述提到的RBG哪种都会是红色的底，只是中间图像的颜色会改变，谢谢您","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581937,"discussion_content":"你好，醒狮, 感谢你的留言。\n你可能是把通道的顺序搞错了。这样写就OK啦。\nim_pillow_R_p = np.concatenate((im_pillow_R,zeros,zeros),axis=2)\nim_pillow_G_p = np.concatenate((zeros,im_pillow_G,zeros),axis=2)\nim_pillow_B_p = np.concatenate((zeros,zeros,im_pillow_B),axis=2)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659078647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"陕西"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350546,"user_name":"清风明月","can_delete":false,"product_type":"c1","uid":1086309,"ip_address":"","ucode":"37E01E81F9A353","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/65/6016b046.jpg","comment_is_top":false,"comment_ctime":1656997001,"is_pvip":true,"replies":[{"id":"127526","content":"hi，你好，感谢你的留言。<br>方便把你的代码发给我看看嘛？<br><br>或者看看这个回答能不能解决你的问题。<br>为了引出np.newaxis和concatenate的讲解，可能稍微有点绕了，concatenate讲的也有点不是很清楚，我稍后更新一下。<br><br>np.concatenate中第一个参数是要合并的数组，np.concatenate((im_pillow_c1, zeros), axis=2) 这么写就是要将im_pillow_c1与zeros沿着axis=2进行合并。合并后的数组的shape是(im_pillow_c1.shape[0], im_pillow_c1.shape[1], 3)。<br>从第三个维度上来看有三个值，第一个是im_pillow_c1，第二个是0，第三个也是0。<br>所以这么写下来im_pillow_c1_3ch， im_pillow_c2_3ch， im_pillow_c3_3ch都是一样的结果。<br><br>可以这么修改<br>zeros = np.zeros((im_pillow.shape[0], im_pillow.shape[1], 1))<br>im_pillow_c1 = im_pillow_c1[:,:,np.newaxis]<br>im_pillow_c2 = im_pillow_c2[:,:,np.newaxis]<br>im_pillow_c3 = im_pillow_c3[:,:,np.newaxis]<br>im_pillow_c1_3ch = np.concatenate((im_pillow_c1, zeros, zeros),axis=2)<br>im_pillow_c2_3ch = np.concatenate((zeros, im_pillow_c1, zeros),axis=2)<br>im_pillow_c3_3ch = np.concatenate((zeros, zeros,im_pillow_c1),axis=2)","user_name":"作者回复","comment_id":350546,"uid":"2802608","ip_address":"","utype":1,"ctime":1657070217,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1656997001","product_id":100093301,"comment_content":"老师，我对c3也采用拼接数组方式一，生成一个3ch的对象，但是打印出来不是蓝色的，是红色通道，但是又不完全一样（那个橘色的Logo，红色通道是浅白，这个是黑色），是为什么？<br>im_pillow_c3= im_pillow_c3[:,:,np.newaxis]<br>im_pillow_c3_3ch = np.concatenate((im_pillow_c3,zeros),axis=2)","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578857,"discussion_content":"hi，你好，感谢你的留言。\n方便把你的代码发给我看看嘛？\n\n或者看看这个回答能不能解决你的问题。\n为了引出np.newaxis和concatenate的讲解，可能稍微有点绕了，concatenate讲的也有点不是很清楚，我稍后更新一下。\n\nnp.concatenate中第一个参数是要合并的数组，np.concatenate((im_pillow_c1, zeros), axis=2) 这么写就是要将im_pillow_c1与zeros沿着axis=2进行合并。合并后的数组的shape是(im_pillow_c1.shape[0], im_pillow_c1.shape[1], 3)。\n从第三个维度上来看有三个值，第一个是im_pillow_c1，第二个是0，第三个也是0。\n所以这么写下来im_pillow_c1_3ch， im_pillow_c2_3ch， im_pillow_c3_3ch都是一样的结果。\n\n可以这么修改\nzeros = np.zeros((im_pillow.shape[0], im_pillow.shape[1], 1))\nim_pillow_c1 = im_pillow_c1[:,:,np.newaxis]\nim_pillow_c2 = im_pillow_c2[:,:,np.newaxis]\nim_pillow_c3 = im_pillow_c3[:,:,np.newaxis]\nim_pillow_c1_3ch = np.concatenate((im_pillow_c1, zeros, zeros),axis=2)\nim_pillow_c2_3ch = np.concatenate((zeros, im_pillow_c1, zeros),axis=2)\nim_pillow_c3_3ch = np.concatenate((zeros, zeros,im_pillow_c1),axis=2)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657070217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349776,"user_name":"nico","can_delete":false,"product_type":"c1","uid":3038188,"ip_address":"","ucode":"31A951B7ED3AE2","user_header":"https://static001.geekbang.org/account/avatar/00/2e/5b/ec/c667c792.jpg","comment_is_top":false,"comment_ctime":1656321103,"is_pvip":true,"replies":[{"id":"127365","content":"👍🏻👍🏻👍🏻👍🏻","user_name":"作者回复","comment_id":349776,"uid":"2802608","ip_address":"","utype":1,"ctime":1656490326,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1656321103","product_id":100093301,"comment_content":"完整的代码：<br>im = Image.open(&#39;src&#47;jk.jpg&#39;)<br>print(im.size)<br><br>im_pillow = np.asarray(im)<br>print(im_pillow.shape)<br><br>im_pillow_c1 = im_pillow[:, :, 0]<br>im_pillow_c2 = im_pillow[:, :, 1]<br>im_pillow_c3 = im_pillow[:, :, 2]<br><br>zeros = np.zeros((im_pillow.shape[0], im_pillow.shape[1], 2))<br><br># im_pillow_c1 = im_pillow_c1[:,:,np.newaxis]<br># im_pillow_c2 = im_pillow_c2[:,:,np.newaxis]<br># im_pillow_c3 = im_pillow_c3[:,:,np.newaxis]<br><br># im_pillow_c1_3ch = np.concatenate((im_pillow_c1, zeros), axis=2)<br># im_pillow_c2_3ch = np.concatenate((im_pillow_c2, zeros), axis=2)<br># im_pillow_c3_3ch = np.concatenate((im_pillow_c3, zeros), axis=2)<br><br>im_pillow_c1_3ch = np.zeros(im_pillow.shape)<br>im_pillow_c1_3ch[:,:,0] = im_pillow_c1<br><br>im_pillow_c2_3ch = np.zeros(im_pillow.shape)<br>im_pillow_c2_3ch[:,:,1] = im_pillow_c2<br><br>im_pillow_c3_3ch = np.zeros(im_pillow.shape)<br>im_pillow_c3_3ch[:,:,2] = im_pillow_c3","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578058,"discussion_content":"👍🏻👍🏻👍🏻👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656490326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344711,"user_name":"明天出发","can_delete":false,"product_type":"c1","uid":1255866,"ip_address":"","ucode":"56DB1CD88BF1A7","user_header":"https://static001.geekbang.org/account/avatar/00/13/29/ba/3e11e36f.jpg","comment_is_top":false,"comment_ctime":1651733977,"is_pvip":false,"replies":[{"id":"126121","content":"你好，明天出发，感谢你的留言。<br>抱歉回复迟了。<br>plt.show的默认顺序是RGB的。cv2.imshow()的顺序是BGR，打印Opencv的结果用cv2.imshow验证比较好。","user_name":"作者回复","comment_id":344711,"uid":"2802608","ip_address":"","utype":1,"ctime":1652410887,"user_name_real":"编辑"}],"discussion_count":2,"race_medal":0,"score":"1651733977","product_id":100093301,"comment_content":"这里我使用OpenCV抽取了Ｂ、Ｇ、Ｒ通道，使用matploylib显示原图是按ＢＧＲ显示的，对每个通道显示时，反而显示出了Ｒ、Ｇ、Ｂ，是不是matploylib会自动检测识别？<br><br>import cv2<br>import numpy as np<br>from matplotlib import pyplot as plt<br><br>im = cv2.imread(&#39;images&#47;IMG_9324.PNG&#39;)<br>im_cv_c1 = np.array(im)<br>im_cv_c1[:, :, 1:] = 0<br>im_cv_c2 = np.array(im)<br>im_cv_c2[:, :, ::2] =0 #保留Green通道<br>im_cv_c3 = np.array(im)<br>im_cv_c3[:, :, :2] = 0<br><br>plt.subplot(2, 2, 1)<br>plt.title(&#39;Origin Image&#39;)<br>plt.imshow(im)<br>plt.axis(&#39;off&#39;)<br>plt.subplot(2, 2, 2)<br>plt.title(&#39;Blue Channel&#39;)<br>plt.imshow(im_cv_c1)<br>plt.axis(&#39;off&#39;)<br>plt.subplot(2, 2, 3)<br>plt.title(&#39;Green Channel&#39;)<br>plt.imshow(im_cv_c2)<br>plt.axis(&#39;off&#39;)<br>plt.subplot(2, 2, 4)<br>plt.title(&#39;Red Channel&#39;)<br>plt.imshow(im_cv_c3)<br>plt.axis(&#39;off&#39;)<br>plt.show()","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571797,"discussion_content":"你好，明天出发，感谢你的留言。\n抱歉回复迟了。\nplt.show的默认顺序是RGB的。cv2.imshow()的顺序是BGR，打印Opencv的结果用cv2.imshow验证比较好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652410888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1045809,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f5/31/bbb513ba.jpg","nickname":"mtfelix","note":"","ucode":"8C838BC0FC1F58","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584980,"discussion_content":"远程调试的话可能cv2.imshow()无法正常执行。可以用cv2.imwrite()保存后打开再看。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661255632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325418,"user_name":"徐洲更","can_delete":false,"product_type":"c1","uid":1314643,"ip_address":"","ucode":"F8A323CB732D05","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/53/92a50f01.jpg","comment_is_top":false,"comment_ctime":1638952766,"is_pvip":true,"replies":[{"id":"118097","content":"^^ 👍🏻👍🏻👍🏻","user_name":"作者回复","comment_id":325418,"uid":"2802608","ip_address":"","utype":1,"ctime":1639015438,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1638952766","product_id":100093301,"comment_content":"之前用plt.show展示OpenCV读取进来的图，发现颜色和原图不对，还以为是matplotlib的特性，经过老师提醒才意识到，原来是读取模式为BGR导致的。","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537258,"discussion_content":"^^ 👍🏻👍🏻👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639015438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324423,"user_name":"zoob","can_delete":false,"product_type":"c1","uid":1253923,"ip_address":"","ucode":"C4FE6AC20403B9","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/23/16c3ea01.jpg","comment_is_top":false,"comment_ctime":1638428170,"is_pvip":false,"replies":[{"id":"117734","content":"你好，看起来没有问题啊。<br>图片的路径写对了吗？","user_name":"作者回复","comment_id":324423,"uid":"2802608","ip_address":"","utype":1,"ctime":1638437188,"user_name_real":"编辑"}],"discussion_count":2,"race_medal":0,"score":"1638428170","product_id":100093301,"comment_content":"老师，为什么我用opencv读取的jpg图片时，im_cv2 = cv2.imread(&quot;JPG1.jpg&quot;),type(im_cv2)显示的是NoneType","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535421,"discussion_content":"你好，看起来没有问题啊。\n图片的路径写对了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638437188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142325,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6e/35/11008e02.jpg","nickname":"forever","note":"","ucode":"AAA930B496D5A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543367,"discussion_content":"我也出现这个问题了，是因为路径或者图片名中有中文。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1641107721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321147,"user_name":"小伟","can_delete":false,"product_type":"c1","uid":1237846,"ip_address":"","ucode":"43235F32B7F9D8","user_header":"https://static001.geekbang.org/account/avatar/00/12/e3/56/5fc6c92c.jpg","comment_is_top":false,"comment_ctime":1636688402,"is_pvip":false,"replies":[{"id":"116688","content":"你好，小伟。这个似乎与numpy版本有关。我的是1.20.1。<br>你可以打印img_arr.flags看看。我打印出来的WRITEABLE 是False。","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1636808438,"ip_address":"","comment_id":321147,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1636688402","product_id":100093301,"comment_content":"img = Image.open(&quot;jike.jpg&quot;)<br>img_arr = np.asarray(img)<br>img_arr[:, :, 1:] = 0<br>print(img_arr)<br><br>老师 我在pycharm里面执行上面的代码可以正常的修改数组并打印，并没有报错，numpy的版本是1.21.4","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530232,"discussion_content":"你好，小伟。这个似乎与numpy版本有关。我的是1.20.1。\n你可以打印img_arr.flags看看。我打印出来的WRITEABLE 是False。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636808438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1237846,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e3/56/5fc6c92c.jpg","nickname":"小伟","note":"","ucode":"43235F32B7F9D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414993,"discussion_content":"老师，我把numpy版本修改成1.20.1然后打印WRITEABLE，发现还是True，然后怀疑是Pillow版本的原因，把Pillow版本降低到8.20.0后WRITEABL变成了False，也就是Pillow版本从8.30.0以后numpy按照asarray读取图片将是可修改的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636957292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1237846,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e3/56/5fc6c92c.jpg","nickname":"小伟","note":"","ucode":"43235F32B7F9D8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530598,"discussion_content":"👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637111237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":414993,"ip_address":""},"score":530598,"extra":"{\"user_type\":2}"}]}]},{"had_liked":false,"id":319721,"user_name":"王珎","can_delete":false,"product_type":"c1","uid":2822974,"ip_address":"","ucode":"5074BA9DD3DE88","user_header":"https://static001.geekbang.org/account/avatar/00/2b/13/3e/d028cddd.jpg","comment_is_top":false,"comment_ctime":1635922489,"is_pvip":false,"replies":[{"id":"116069","content":"你好，王珎，谢谢你的留言。<br>是的，两者都可以。<br>但使用np.argmax()比较好。如果题目中不是2个通道，二是100个通道的话，该怎么办呢？<br>另外使用np.argmax()需要注意轴的方向。<br>在这节的题目中，axis应该为1.","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1636116936,"ip_address":"","comment_id":319721,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635922489","product_id":100093301,"comment_content":"mask可以用argmax求，也可以直接用布尔运算<br>mask = np.argmax(scores)<br>mask = (scores[:,:,0] &lt; scores[:,:,1]).astype(int)","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529738,"discussion_content":"你好，王珎，谢谢你的留言。\n是的，两者都可以。\n但使用np.argmax()比较好。如果题目中不是2个通道，二是100个通道的话，该怎么办呢？\n另外使用np.argmax()需要注意轴的方向。\n在这节的题目中，axis应该为1.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636116936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319719,"user_name":"王珎","can_delete":false,"product_type":"c1","uid":2822974,"ip_address":"","ucode":"5074BA9DD3DE88","user_header":"https://static001.geekbang.org/account/avatar/00/2b/13/3e/d028cddd.jpg","comment_is_top":false,"comment_ctime":1635921941,"is_pvip":false,"replies":[{"id":"116068","content":"你好，王珎，感谢你的留言。很赞的问题👍🏻，plt.show的默认顺序是RGB的。cv2.imshow()的顺序是BGR，打印Opencv的结果用cv2.imshow验证比较好。代码如下：<br>import cv2<br><br>im = cv2.imread(&#39;jk.jpg&#39;)<br><br>b = im.copy()<br>b[:,:,1:] = 0<br><br>g = im.copy()<br>g[:,:,0] = 0<br>g[:,:,2] = 0<br><br>r = im.copy()<br>r[:,:,0:2] = 0<br><br>cv2.imshow(&#39;show&#39;, r)<br>cv2.waitKey(0)<br>cv2.destoryAllWindows()","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1636116563,"ip_address":"","comment_id":319719,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635921941","product_id":100093301,"comment_content":"用cv2读取图片后分3通道显示出来的图像与pillow读取的一致，通道顺序都是R、G、B，没有不一样哦<br><br>import cv2<br>im_cv2 = cv2.imread(&#39;jk.jpg’)<br># R通道<br>im_cv2_c1 = im_cv2.copy()<br>im_cv2_c1[:,:,1:]=0<br># G通道<br>im_cv2_c2 = im_cv2.copy()<br>im_cv2_c2[:,:,0]=0<br>im_cv2_c2[:,:,2]=0<br># B通道<br>im_cv2_c3 = im_cv2.copy()<br>im_cv2_c3[:,:,:1]=0<br>","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529736,"discussion_content":"你好，王珎，感谢你的留言。很赞的问题👍🏻，plt.show的默认顺序是RGB的。cv2.imshow()的顺序是BGR，打印Opencv的结果用cv2.imshow验证比较好。代码如下：\nimport cv2\n\nim = cv2.imread(&amp;#39;jk.jpg&amp;#39;)\n\nb = im.copy()\nb[:,:,1:] = 0\n\ng = im.copy()\ng[:,:,0] = 0\ng[:,:,2] = 0\n\nr = im.copy()\nr[:,:,0:2] = 0\n\ncv2.imshow(&amp;#39;show&amp;#39;, r)\ncv2.waitKey(0)\ncv2.destoryAllWindows()","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636116563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318972,"user_name":"魔流剑风之痕","can_delete":false,"product_type":"c1","uid":2829562,"ip_address":"","ucode":"5609F39CBCE10D","user_header":"","comment_is_top":false,"comment_ctime":1635494100,"is_pvip":false,"replies":[{"id":"115645","content":"你好，谢谢你的留言。因为plt.imshow的展示的图片参数需要是int。int32或者int64也行。","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1635585663,"ip_address":"","comment_id":318972,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635494100","product_id":100093301,"comment_content":"plt.subplot(2, 2, 2)<br>plt.title(&#39;Red Channel&#39;)<br>plt.imshow(im_pillow_c1_3ch.astype(np.uint8))<br>plt.axis(&#39;off&#39;)<br>这里为什么一定要指定类型为无符号8位整型，不指定就不能出图","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529447,"discussion_content":"你好，谢谢你的留言。因为plt.imshow的展示的图片参数需要是int。int32或者int64也行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635585663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318143,"user_name":"小强","can_delete":false,"product_type":"c1","uid":2034712,"ip_address":"","ucode":"D1B0DA58E4D969","user_header":"https://static001.geekbang.org/account/avatar/00/1f/0c/18/298a0eab.jpg","comment_is_top":false,"comment_ctime":1635162652,"is_pvip":false,"replies":[{"id":"115353","content":"你好，小强。感谢你的留言。这里一定是2，因为我们的目的是把RGB图像中的两个通道关闭（全部设置为0）。<br>我们首先获得了，R、G、B中的单通道数据，这个单通道的数据再与一个2通道的全零数据组合后，就变成三通道的数据。","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1635209965,"ip_address":"","comment_id":318143,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635162652","product_id":100093301,"comment_content":"&quot;获得了每个通道的数据，接下来就需要生成一个 3 维全 0 数组，全 0 数组的形状除了最后一维为 2&quot;<br><br>为什么这里是2？一定是2吗？","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529117,"discussion_content":"你好，小强。感谢你的留言。这里一定是2，因为我们的目的是把RGB图像中的两个通道关闭（全部设置为0）。\n我们首先获得了，R、G、B中的单通道数据，这个单通道的数据再与一个2通道的全零数据组合后，就变成三通道的数据。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635209965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317887,"user_name":"李柠檬🍋","can_delete":false,"product_type":"c1","uid":2618327,"ip_address":"","ucode":"F08D1B90A623A5","user_header":"https://static001.geekbang.org/account/avatar/00/27/f3/d7/ae84f9b8.jpg","comment_is_top":false,"comment_ctime":1635008785,"is_pvip":false,"replies":[{"id":"115198","content":"你好，李柠檬🍋。谢谢你的留言。<br>im_pillow.shape[0]代表的是原图 （极客时间Logo那张图）的高，而im_pillow.shape[1]代表的是原图的宽。","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1635078148,"ip_address":"","comment_id":317887,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635008785","product_id":100093301,"comment_content":"老师您好能麻烦您解释一下zeros = np.zeros((im_pillow.shape[0], im_pillow.shape[1], 2))中的shape[0]和shape[1]分别代表的是什么吗？","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529018,"discussion_content":"你好，李柠檬🍋。谢谢你的留言。\nim_pillow.shape[0]代表的是原图 （极客时间Logo那张图）的高，而im_pillow.shape[1]代表的是原图的宽。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635078148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317882,"user_name":"xw","can_delete":false,"product_type":"c1","uid":2822972,"ip_address":"","ucode":"C2BBE374EEA8DF","user_header":"https://static001.geekbang.org/account/avatar/00/2b/13/3c/564938a9.jpg","comment_is_top":false,"comment_ctime":1635003910,"is_pvip":false,"replies":[{"id":"115199","content":"你好，xw。感谢你的留言。👍🏻👍🏻👍🏻👍🏻👍🏻👍🏻👍🏻 完全正确^^，加油~","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1635078234,"ip_address":"","comment_id":317882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635003910","product_id":100093301,"comment_content":"mask=np.argmax(scores,axis=2)<br>老师，请问这样写对吗？","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529017,"discussion_content":"你好，xw。感谢你的留言。👍🏻👍🏻👍🏻👍🏻👍🏻👍🏻👍🏻 完全正确^^，加油~","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635078234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317075,"user_name":"和你一起搬砖的胡大爷","can_delete":false,"product_type":"c1","uid":1008587,"ip_address":"","ucode":"54607F4E17917A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/cb/7c004188.jpg","comment_is_top":false,"comment_ctime":1634658463,"is_pvip":false,"replies":[{"id":"114844","content":"你好，木有仓库存储课程代码。课程中给出的代码基本都是可运行的代码^^。","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1634696546,"ip_address":"","comment_id":317075,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634658463","product_id":100093301,"comment_content":"老师，哪个仓库可以找到课程用到的代码呢？","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528642,"discussion_content":"你好，木有仓库存储课程代码。课程中给出的代码基本都是可运行的代码^^。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634696546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317073,"user_name":"和你一起搬砖的胡大爷","can_delete":false,"product_type":"c1","uid":1008587,"ip_address":"","ucode":"54607F4E17917A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/cb/7c004188.jpg","comment_is_top":false,"comment_ctime":1634658221,"is_pvip":false,"replies":[{"id":"114819","content":"你好，你的回答是正确的👍。不过也可以考虑考虑使用聚合函数argmax来解决这个问题。^^<br>如果这道题目不是0和1两个通道，而是100个通道求最大值对应的通道index，应该怎么办呢？：）","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1634690626,"ip_address":"","comment_id":317073,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634658221","product_id":100093301,"comment_content":"老师我觉得这就是个broadcasting...<br>mask = (scores[:, :, 0] &lt;= scores[:, :, 1])*1","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528640,"discussion_content":"你好，你的回答是正确的👍。不过也可以考虑考虑使用聚合函数argmax来解决这个问题。^^\n如果这道题目不是0和1两个通道，而是100个通道求最大值对应的通道index，应该怎么办呢？：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634690626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316928,"user_name":"栗白","can_delete":false,"product_type":"c1","uid":2810401,"ip_address":"","ucode":"8B0FBE195DA8B8","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e2/21/3bb82a79.jpg","comment_is_top":false,"comment_ctime":1634615706,"is_pvip":false,"replies":[{"id":"114810","content":"你好，栗白。感谢你的留言。写出代码进行尝试已经非常了不起了👍。不过应该考虑一下效率问题，如果这道题目不是0和1两个通道，而是100个通道求最大值对应的通道，应该怎么办呢^^。你可以沿着课程最后聚合函数的思路考虑考虑，看看能不能使用argmax函数来求解。","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1634690295,"ip_address":"","comment_id":316928,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634615706","product_id":100093301,"comment_content":"泪流满面。。好像只有我的是最复杂的<br>scores=np.random.rand(256,256,2)<br>scores[:,:,1] = 1 - scores[:,:,0]<br>mask=np.ones((256,256))<br>scores_0=scores[:,:,0]<br>scores_1=scores[:,:,1]<br>for i in range(256):<br>    for j in range(256):<br>        if scores_0[i][j]&gt;=scores_1[i][j]:<br>            mask[i][j]=0<br>mask.shape<br>","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528573,"discussion_content":"你好，栗白。感谢你的留言。写出代码进行尝试已经非常了不起了👍。不过应该考虑一下效率问题，如果这道题目不是0和1两个通道，而是100个通道求最大值对应的通道，应该怎么办呢^^。你可以沿着课程最后聚合函数的思路考虑考虑，看看能不能使用argmax函数来求解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634690295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316729,"user_name":"vcjmhg","can_delete":false,"product_type":"c1","uid":1526461,"ip_address":"","ucode":"B508D1E9B3F974","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/j24oyxHcpB5AMR9pMO6fITqnOFVOncnk2T1vdu1rYLfq1cN6Sj7xVrBVbCvHXUad2MpfyBcE4neBguxmjIxyiaQ/132","comment_is_top":false,"comment_ctime":1634527631,"is_pvip":false,"replies":[{"id":"114693","content":"你好，vcjmhg。谢谢你的留言。你的答案是正确的👍。也可以考虑考虑使用聚合函数(argmax)。","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1634543771,"ip_address":"","comment_id":316729,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634527631","product_id":100093301,"comment_content":"思路：<br>分别获取通道0和通道1对应的2*2矩阵，然后进行比较，获取一个布尔类型构成的矩阵，然后将其值转成int类型，true就会变成1，false就会变成0，最终输出满足要求的矩阵结果<br>result = (scores[:, :, 0] &lt; scores[:, :, 1]).astype(&#39;int&#39;)<br>","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528478,"discussion_content":"你好，vcjmhg。谢谢你的留言。你的答案是正确的👍。也可以考虑考虑使用聚合函数(argmax)。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634543771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316312,"user_name":"莎莎","can_delete":false,"product_type":"c1","uid":2804554,"ip_address":"","ucode":"F255F4D46FC668","user_header":"https://static001.geekbang.org/account/avatar/00/2a/cb/4a/17bbccb5.jpg","comment_is_top":false,"comment_ctime":1634266424,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634266424","product_id":100093301,"comment_content":"https:&#47;&#47;matplotlib.org&#47;stable&#47;gallery&#47;index.html","like_count":0},{"had_liked":false,"id":316303,"user_name":"lwg0452","can_delete":false,"product_type":"c1","uid":1853479,"ip_address":"","ucode":"0B58A1C80F9074","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyEJx6dG2dMuMz6swdfjNuw3HMoEAbtxprfdBUAyRpLFayxmwEiaYLs224LuAdwWu55ENLgsI8U4w/132","comment_is_top":false,"comment_ctime":1634265996,"is_pvip":false,"replies":[{"id":"114575","content":"你好，lwg0452。感谢你的留言，首先为你的思路点赞👍🏻。<br>不过稍微有点小瑕疵，题目要求的是，如果通道0的值大于通道1的值，那么mask对应位置的值就是0，否则为1。<br>你这样做的结果正好是相反了。<br>另外，你可以考虑考虑如何使用聚合函数np.argmax来求解，思考一下它的axis应该等于几，才能获得正确的答案。：）","user_name":"作者回复","user_name_real":"方远","uid":"2802608","ctime":1634280118,"ip_address":"","comment_id":316303,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634265996","product_id":100093301,"comment_content":"import numpy as np<br><br>scores = np.random.rand(256, 256, 2)<br>scores[:, :, 1] = 1 - scores[:, :, 0]<br>print(scores)<br><br>mask = np.asarray(scores[:, :, 0] &gt; scores[:, :, 1])<br>print(mask)<br><br>mask = mask.astype(&#39;int&#39;)<br>print(mask)","like_count":0,"discussions":[{"author":{"id":2802608,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1ZkL9L7CEicI87xicpIhXAIhVdVWpJKBsD8Jpzg9iaAwFcDEhTvdRwuKItJS14mYznT2w2YQvn8QsQ/132","nickname":"方远","note":"","ucode":"248B1DE180EB4C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528347,"discussion_content":"你好，lwg0452。感谢你的留言，首先为你的思路点赞👍🏻。\n不过稍微有点小瑕疵，题目要求的是，如果通道0的值大于通道1的值，那么mask对应位置的值就是0，否则为1。\n你这样做的结果正好是相反了。\n另外，你可以考虑考虑如何使用聚合函数np.argmax来求解，思考一下它的axis应该等于几，才能获得正确的答案。：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634280118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}