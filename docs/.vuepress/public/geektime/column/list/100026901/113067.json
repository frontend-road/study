{"id":113067,"title":"38 | MySQLï¼šæ—¥å¿—å’Œæ•°æ®å­˜å‚¨ç³»ç»Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ™¯éœ„ã€‚ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬æ¥èŠèŠæ—¥å¿—å’Œå­˜å‚¨ç³»ç»Ÿã€‚</p><p>åœ¨äº’è”ç½‘å…¬å¸ä¸­ï¼Œæ—¥å¿—ç³»ç»Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æŠ€æœ¯åº•å±‚ã€‚åœ¨æ¯ä¸€æ¬¡é‡è¦çš„äº¤äº’è¡Œä¸ºä¸­ï¼Œå…³é”®ä¿¡æ¯éƒ½ä¼šè¢«è®°å½•ä¸‹æ¥å­˜æ¡£ï¼Œä»¥ä¾›æ—¥åçº¿ä¸‹åˆ†æï¼Œæˆ–è€…çº¿ä¸Šå®æ—¶åˆ†æã€‚è¿™äº›æ•°æ®ï¼Œç”šè‡³å¯ä»¥è¯´æ˜¯ç¡…è°·äº’è”ç½‘å¤§å…¬å¸çš„å‘½è„‰æ‰€åœ¨ã€‚</p><p>æœ‰äº†å®ƒä»¬ï¼Œä½ æ‰èƒ½å»ºç«‹æœºå™¨å­¦ä¹ æ¨¡å‹æ¥é¢„æµ‹ç”¨æˆ·çš„è¡Œä¸ºï¼Œä»è€Œå¯ä»¥ç²¾ç¡®æç»˜ç”¨æˆ·ç”»åƒï¼Œç„¶åé’ˆå¯¹æ€§åœ°ä½¿ç”¨æ¨èç³»ç»Ÿã€åˆ†ç±»å™¨ï¼Œå°†ç”¨æˆ·è¿›ä¸€æ­¥ç•™ä¸‹ï¼Œå¹¶ç²¾å‡†æ¨é€å¹¿å‘Šæ¥ç›ˆåˆ©ã€‚</p><p>åœ¨é‡åŒ–äº¤æ˜“ä¸­ï¼Œæ—¥å¿—åŒæ ·æœ‰ç€éå¸¸é‡è¦çš„ä½œç”¨ã€‚ä¸€å¦‚å‰é¢æ‰€è®²ï¼Œæˆ‘ä»¬é‡è¦çš„æ•°æ®æœ‰ï¼šè¡Œæƒ…æ•°æ®ã€ç­–ç•¥ä¿¡å·ã€æ‰§è¡Œæƒ…å†µã€ä»“ä½ä¿¡æ¯ç­‰ç­‰éå¸¸å¤šçš„ä¿¡æ¯ã€‚</p><p>å¯¹äºç®€å•çš„ã€å°è§„æ¨¡çš„æ•°æ®ï¼Œä¾‹å¦‚ orderbook ä¿¡æ¯ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠæ•°æ®å­˜åœ¨ txtã€csv æ–‡ä»¶ä¸­ï¼Œè¿™æ ·åšç®€å•é«˜æ•ˆã€‚ä¸è¿‡ï¼Œç¼ºç‚¹æ˜¯ï¼Œéšç€æ•°æ®é‡ä¸Šå‡ï¼Œä¸€ä¸ªæ–‡ä»¶å°†ä¼šå˜å¾—éå¸¸å¤§ï¼Œæ£€ç´¢èµ·æ¥ä¹Ÿä¸å®¹æ˜“ã€‚è¿™æ—¶ï¼Œä¸€ä¸ªå¾ˆç›´è§‚çš„æ–¹å¼å‡ºç°äº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯å¤©çš„æ•°æ®å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™æ ·å°±æš‚æ—¶ç¼“è§£äº†å°´å°¬ã€‚</p><p>ä½†æ˜¯ï¼Œéšç€æ•°æ®é‡çš„ä¸Šå‡ï¼Œæˆ–è€…æ˜¯ä½ çš„ç®—æ³•é€æ¸æ¥åˆ°é«˜é¢‘äº¤æ˜“é¢†åŸŸæ—¶ï¼Œç®€å•åœ°æŠŠæ•°æ®å­˜åœ¨æ–‡ä»¶ä¸Šï¼Œå·²ç»ä¸è¶³ä»¥æ»¡è¶³æ–°çš„éœ€æ±‚ï¼Œæ›´æ— æ³•åº”å¯¹åˆ†å¸ƒå¼é‡åŒ–äº¤æ˜“ç³»ç»Ÿçš„éœ€æ±‚ã€‚äºæ˜¯ï¼Œä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„æƒ³æ³•å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ—¥å¿—å­˜åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­ã€‚</p><!-- [[[read_end]]] --><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±ä»¥ MySQL è¿™ç§ä¼ ç»Ÿå‹å…³ç³»æ•°æ®åº“ä¸ºä¾‹ï¼Œè®²è§£ä¸€ä¸‹æ•°æ®åº“åœ¨æ—¥å¿—ä¸­çš„è¿ç”¨ã€‚</p><h2>å¿«é€Ÿç†è§£MySQL</h2><p>æ‹…å¿ƒä¸€äº›åŒå­¦æ²¡æœ‰æ•°æ®åº“çš„åŸºç¡€ï¼Œæˆ‘å…ˆæ¥ç®€å•ä»‹ç»ä¸€ä¸‹ MySQL æ•°æ®åº“ã€‚</p><p>MySQL å±äºå…¸å‹çš„å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰ï¼Œæ‰€è°“çš„å…³ç³»å‹æ•°æ®åº“ï¼Œå°±æ˜¯æŒ‡å»ºç«‹åœ¨å…³ç³»æ¨¡å‹åŸºç¡€ä¸Šçš„æ•°æ®åº“ï¼Œå€ŸåŠ©äºé›†åˆä»£æ•°ç­‰æ•°å­¦æ¦‚å¿µå’Œæ–¹æ³•ï¼Œæ¥å¤„ç†æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚åŸºæœ¬ä¸Šä»»ä½•å­¦ä¹ èµ„æ–™éƒ½ä¼šå‘Šè¯‰ä½ ï¼Œå®ƒæœ‰ç€ä¸‹é¢è¿™å‡ ä¸ªç‰¹å¾ï¼š</p><ol>\n<li>æ•°æ®æ˜¯ä»¥è¡¨æ ¼çš„å½¢å¼å‡ºç°çš„ï¼›</li>\n<li>æ¯ä¸€è¡Œæ˜¯å„ç§è®°å½•åç§°ï¼›</li>\n<li>æ¯ä¸€åˆ—æ˜¯è®°å½•åç§°æ‰€å¯¹åº”çš„æ•°æ®åŸŸï¼›</li>\n<li>è®¸å¤šçš„è¡Œå’Œåˆ—ï¼Œç»„æˆä¸€å¼ è¡¨å•ï¼›</li>\n<li>è‹¥å¹²çš„è¡¨å•ï¼Œç»„æˆæ•°æ®åº“ï¼ˆdatabaseï¼‰è¿™ä¸ªæ•´ä½“ã€‚</li>\n</ol><p>ä¸è¿‡ï¼ŒæŠ›å¼€è¿™äº›æŠ½è±¡çš„ç‰¹å¾ä¸è°ˆï¼Œä½ é¦–å…ˆéœ€è¦æŒæ¡çš„ï¼Œæ˜¯ä¸‹é¢è¿™äº›æœ¯è¯­çš„æ¦‚å¿µã€‚</p><ul>\n<li>æ•°æ®åº“ï¼Œæ˜¯ä¸€äº›å…³è”è¡¨çš„é›†åˆï¼›è€Œæ•°æ®è¡¨åˆ™æ˜¯æ•°æ®çš„çŸ©é˜µã€‚åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œæ•°æ®è¡¨çœ‹èµ·æ¥å°±åƒæ˜¯ä¸€ä¸ªç®€å•çš„ç”µå­è¡¨æ ¼ã€‚</li>\n<li>åœ¨æ•°æ®è¡¨ä¸­ï¼Œæ¯ä¸€åˆ—åŒ…å«çš„æ˜¯ç›¸åŒç±»å‹çš„æ•°æ®ï¼›æ¯ä¸€è¡Œåˆ™æ˜¯ä¸€ç»„ç›¸å…³çš„æ•°æ®ã€‚</li>\n<li>ä¸»é”®ä¹Ÿæ˜¯æ•°æ®è¡¨ä¸­çš„ä¸€ä¸ªåˆ—ï¼Œåªä¸è¿‡ï¼Œè¿™ä¸€åˆ—çš„æ¯è¡Œå…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸”ä¸€ä¸ªæ•°æ®è¡¨ä¸­åªèƒ½åŒ…å«ä¸€ä¸ªä¸»é”®ï¼›è€Œå¤–é”®åˆ™ç”¨äºå…³è”ä¸¤ä¸ªè¡¨ã€‚</li>\n</ul><p>é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜éœ€è¦äº†è§£ç´¢å¼•ã€‚ç´¢å¼•æ˜¯å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ä¸€ç§ç»“æ„ã€‚ä½¿ç”¨ç´¢å¼•ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿè®¿é—®æ•°æ®åº“è¡¨ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½ å¯ä»¥å¯¹å¾ˆå¤šåˆ—è®¾ç½®ç´¢å¼•ï¼Œè¿™æ ·åœ¨æ£€ç´¢æŒ‡å®šåˆ—çš„æ—¶å€™ï¼Œå°±å¤§å¤§åŠ å¿«äº†é€Ÿåº¦ï¼Œå½“ç„¶ï¼Œä»£ä»·æ˜¯æ’å…¥æ•°æ®ä¼šå˜å¾—æ›´æ…¢ã€‚</p><p>è‡³äºæ“ä½œ MySQLï¼Œä¸€èˆ¬ç”¨çš„æ˜¯ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€SQLã€‚SQLæ˜¯ä¸€ç§å…¸å‹çš„é¢†åŸŸä¸“ç”¨è¯­è¨€ï¼ˆdomain-specific languageï¼Œç®€ç§°DSLï¼‰ï¼Œè¿™é‡Œæˆ‘å°±ä¸åšè¿‡å¤šä»‹ç»äº†ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥å­¦ä¹ æå®¢æ—¶é—´å¹³å°ä¸Šçš„â€œ<a href=\"https://time.geekbang.org/column/intro/192\">SQLå¿…çŸ¥å¿…ä¼š</a>â€ä¸“æ ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥ç®€å•çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•ä½¿ç”¨ Python æ¥æ“ä½œ MySQL æ•°æ®åº“ã€‚</p><p>Python è¿æ¥æ•°æ®åº“çš„æ–¹å¼æœ‰å¥½å¤šç§ï¼Œè¿™é‡Œæˆ‘ç®€å•ä»‹ç»å…¶ä¸­ä¸¤ç§ã€‚æˆ‘ä»¬ä»¥ Ubuntu ä¸ºä¾‹ï¼Œå‡è®¾ä½ çš„ç³»ç»Ÿä¸­å·²ç»å®‰è£…è¿‡ MySQL Serverã€‚ï¼ˆå®‰è£… MySQLå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«   <a href=\"https://www.jianshu.com/p/3111290b87f4\">https://www.jianshu.com/p/3111290b87f4</a>ï¼Œæˆ–è€…ä½ å¯ä»¥è‡ªè¡Œæœç´¢è§£å†³ï¼‰</p><h3>mysqlclient</h3><p>äº‹å®ä¸Šï¼Œ Python è¿æ¥ MySQL æœ€æµè¡Œçš„ä¸€ä¸ªé©±åŠ¨æ˜¯ MySQL-pythonï¼Œåˆå« MySQLdbï¼Œå¾ˆå¤šæ¡†æ¶éƒ½ä¹Ÿæ˜¯åŸºäºæ­¤åº“è¿›è¡Œå¼€å‘ã€‚ä¸è¿‡ï¼Œé—æ†¾çš„æ˜¯ï¼Œå®ƒåªæ”¯æŒ Python2.xï¼Œè€Œä¸”å®‰è£…çš„æ—¶å€™æœ‰å¾ˆå¤šå‰ç½®æ¡ä»¶ã€‚å› ä¸ºå®ƒæ˜¯åŸºäºCå¼€å‘çš„åº“ï¼Œåœ¨ Windows å¹³å°å®‰è£…éå¸¸ä¸å‹å¥½ï¼Œç»å¸¸å‡ºç°å¤±è´¥çš„æƒ…å†µã€‚æ‰€ä»¥ï¼Œç°åœ¨æˆ‘ä»¬åŸºæœ¬ä¸å†æ¨èä½¿ç”¨ï¼Œå–ä»£è€…æ˜¯å®ƒçš„è¡ç”Ÿç‰ˆæœ¬â€”â€”mysqlclientã€‚</p><p>mysqlclient  å®Œå…¨å…¼å®¹ MySQLdbï¼ŒåŒæ—¶æ”¯æŒ Python3.xï¼Œæ˜¯ Django ORMçš„ä¾èµ–å·¥å…·ã€‚å¦‚æœä½ æƒ³ä½¿ç”¨åŸç”Ÿ SQL æ¥æ“ä½œæ•°æ®åº“ï¼Œé‚£ä¹ˆæˆ‘ä¼˜å…ˆæ¨èä½¿ç”¨è¿™ä¸ªæ¡†æ¶ã€‚</p><p>å®ƒçš„å®‰è£…æ–¹å¼å¾ˆç®€å•ï¼š</p><pre><code>sudo apt-get install python3-dev\npip install mysqlclient\n</code></pre><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ ·ä¾‹ä»£ç ï¼š</p><pre><code>import MySQLdb\n\n\ndef test_pymysql():\n    conn = MySQLdb.connect(\n        host='localhost',\n        port=3306,\n        user='your_username',\n        passwd=your_passwordâ€™,\n        db='mysql'\n    )\n\n    cur = conn.cursor()\n    cur.execute('''\n            CREATE TABLE price (\n                timestamp TIMESTAMP NOT NULL,\n                BTCUSD FLOAT(8,2),\n                PRIMARY KEY (timestamp)\n            );\n        ''')\n    cur.execute('''\n            INSERT INTO price VALUES(\n                &quot;2019-07-14 14:12:17&quot;,\n                11234.56\n            );\n        ''')\n\n    conn.commit()\n    conn.close()\n\n\ntest_pymy\n</code></pre><p>ä»£ç çš„æ€è·¯å¾ˆæ¸…æ™°æ˜äº†ï¼Œé¦–å…ˆæ˜¯é€šè¿‡ connect å‘½ä»¤è¿æ¥æ•°æ®åº“ï¼Œæ¥åˆ›å»ºä¸€ä¸ªè¿æ¥ï¼›ä¹‹åï¼Œé€šè¿‡ conn.cursor() å‡½æ•°åˆ›å»ºä¸€ä¸ªæ¸¸æ ‡ã€‚è¿™é‡Œä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¸¸æ ‡å‘¢ï¼Ÿ</p><p>ä¸€ä¸ªä¸»è¦çš„åŸå› å°±æ˜¯ï¼Œè¿™æ ·å¯ä»¥æŠŠé›†åˆæ“ä½œè½¬æ¢æˆå•ä¸ªè®°å½•å¤„ç†çš„æ–¹å¼ã€‚å¦‚æœç”¨ SQL è¯­è¨€ä»æ•°æ®åº“ä¸­æ£€ç´¢æ•°æ®ï¼Œç»“æœä¼šæ”¾åœ¨å†…å­˜çš„ä¸€å—åŒºåŸŸä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªç»“æœå¾€å¾€æ˜¯ä¸€ä¸ªå«æœ‰å¤šä¸ªè®°å½•çš„é›†åˆã€‚è€Œæ¸¸æ ‡æœºåˆ¶ï¼Œåˆ™å…è®¸ç”¨æˆ·åœ¨ MySQL å†…é€è¡Œåœ°è®¿é—®è¿™äº›è®°å½•ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ„æ„¿ï¼Œæ¥æ˜¾ç¤ºå’Œå¤„ç†è¿™äº›è®°å½•ã€‚</p><p>ç»§ç»­å›åˆ°ä»£ç ä¸­ï¼Œå†å¾€ä¸‹èµ°ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª price tableï¼ŒåŒæ—¶å‘é‡Œé¢æ’å…¥ä¸€æ¡ orderbook æ•°æ®ã€‚è¿™é‡Œä¸ºäº†ç®€åŒ–ä»£ç çªå‡ºé‡ç‚¹ï¼Œæˆ‘åªä¿ç•™äº† timestamp å’Œ priceã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ conn.commit() æ¥æäº¤æ›´æ”¹ï¼Œç„¶å close() æ‰è¿æ¥å°±å¯ä»¥äº†ã€‚</p><h3>peewee</h3><p>ä¸è¿‡ï¼Œå¤§å®¶é€æ¸å‘ç°ï¼Œå†™åŸç”Ÿçš„ SQL å‘½ä»¤å¾ˆéº»çƒ¦ã€‚å› ä¸ºä½ éœ€è¦æ ¹æ®ç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¥æ„é€ ç‰¹å®šçš„æ’å…¥å’ŒæŸ¥è¯¢è¯­å¥ï¼Œè¿™æ ·å¯ä»¥è¯´å°±å®Œå…¨æŠ›å¼ƒäº†é¢å‘å¯¹è±¡çš„æ€ç»´ã€‚å› æ­¤ï¼Œåˆè¯ç”Ÿäº†å¾ˆå¤šå°è£… wrapper åŒ…å’Œ ORM æ¡†æ¶ã€‚</p><p>è¿™é‡Œæ‰€è¯´çš„ORMï¼ˆObject Relational Mappingï¼Œç®€ç§°ORMï¼‰  ï¼Œæ˜¯ Python å¯¹è±¡ä¸æ•°æ®åº“å…³ç³»è¡¨çš„ä¸€ç§æ˜ å°„å…³ç³»ï¼Œæœ‰äº† ORM åï¼Œæˆ‘ä»¬å°±ä¸å†éœ€è¦å†™ SQL è¯­å¥ï¼Œè€Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Python çš„æ•°æ®ç»“æ„äº†ã€‚</p><p>ORM æ¡†æ¶çš„ä¼˜ç‚¹ï¼Œæ˜¯æé«˜äº†å†™ä»£ç çš„é€Ÿåº¦ï¼ŒåŒæ—¶å…¼å®¹å¤šç§æ•°æ®åº“ç³»ç»Ÿï¼Œå¦‚SQLiteã€MySQLã€PostgreSQLç­‰è¿™äº›æ•°æ®åº“ï¼›è€Œä»˜å‡ºçš„ä»£ä»·ï¼Œå¯èƒ½å°±æ˜¯æ€§èƒ½ä¸Šçš„ä¸€äº›æŸå¤±ã€‚</p><p>æ¥ä¸‹æ¥è¦è®²çš„peeweeï¼Œæ­£æ˜¯å…¶ä¸­ä¸€ç§åŸºäº Python çš„ ORM æ¡†æ¶ï¼Œå®ƒçš„å­¦ä¹ æˆæœ¬éå¸¸ä½ï¼Œå¯ä»¥è¯´æ˜¯ Python ä¸­æœ€æµè¡Œçš„ ORM æ¡†æ¶ã€‚</p><p>å®ƒçš„å®‰è£…æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼š</p><pre><code>pip install peewee\n</code></pre><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ ·ä¾‹ä»£ç ï¼š</p><pre><code>import peewee\nfrom peewee import *\n\ndb = MySQLDatabase('mysql', user='your_username', passwd=your_passwordâ€™)\n\n\nclass Price(peewee.Model):\n    timestamp = peewee.DateTimeField(primary_key=True)\n    BTCUSD = peewee.FloatField()\n\n    class Meta:\n        database = db\n\n\ndef test_peewee():\n    Price.create_table()\n    price = Price(timestamp='2019-06-07 13:17:18', BTCUSD='12345.67')\n    price.save()\n\n\ntest_p\n</code></pre><p>å¦‚æœä½ å†™è¿‡ Djangoï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªå†™æ³•å’Œ Django ç®€ç›´ä¸€æ¨¡ä¸€æ ·ã€‚æˆ‘ä»¬é€šè¿‡ä¸€ä¸ª Python class ï¼Œæ˜ å°„äº† MySQL ä¸­çš„ä¸€å¼ æ•°æ®è¡¨ï¼›åªè¦å¯¹å…¶ä¸­æ¯ä¸€åˆ—æ•°æ®æ ¼å¼è¿›è¡Œå®šä¹‰ï¼Œä¾¿å¯æŒ‰ç…§ Python çš„æ–¹å¼è¿›è¡Œæ“ä½œã€‚</p><p>æ˜¾è€Œæ˜“è§ï¼Œpeeweeçš„æœ€å¤§ä¼˜ç‚¹ï¼Œå°±æ˜¯è®© SQL è¯­è¨€ç¬é—´å˜æˆå¼ºç±»å‹è¯­è¨€ï¼Œè¿™æ ·ä¸ä»…æå¤§åœ°å¢å¼ºäº†å¯è¯»æ€§ï¼Œä¹Ÿèƒ½æœ‰æ•ˆå‡å°‘å‡º bug çš„æ¦‚ç‡ã€‚</p><p>ä¸è¿‡ï¼Œäº‹å®ä¸Šï¼Œä½œä¸ºä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œæˆ–è€…ä½œä¸ºä¸€åé‡åŒ–ä»ä¸šè€…ï¼ˆquant ï¼‰ï¼Œä½ è¦å¤„ç†çš„æ•°æ®è¿œæ¯”è¿™äº›å¤æ‚å¾ˆå¤šã€‚äº’è”ç½‘å·¥ä¸šç•Œæœ‰å¤§é‡çš„è„æ•°æ®ï¼Œé‡‘èè¡Œä¸šçš„ä¿¡å™ªæ¯”æ›´æ˜¯éå¸¸ä¹‹ä½ï¼Œæ•°æ®å¤„ç†åªèƒ½ç®—æ˜¯åŸºæœ¬åŠŸã€‚</p><p>å¦‚æœä½ å¯¹æ•°æ®åˆ†ææœ‰å…´è¶£å’Œå¿—å‘ï¼Œåœ¨å­¦ç”Ÿæ—¶æœŸå°±åº”è¯¥å…ˆæ‰“ç‰¢æ•°å­¦å’Œç»Ÿè®¡çš„åŸºç¡€ï¼Œä¹‹ååœ¨å®ä¹ å’Œå·¥ä½œä¸­å¿«é€ŸæŒæ¡æ•°æ®å¤„ç†çš„æ–¹æ³•ã€‚å½“ç„¶ï¼Œå¦‚æœä½ å·²ç»é”™è¿‡å­¦ç”Ÿæ—¶æœŸçš„è¯ï¼Œç°åœ¨å¼€å§‹ä¹Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæ¯•ç«Ÿï¼Œé€æ¸å½¢æˆè‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œæ‰æ˜¯æˆ‘ä»¬æ¯ä¸ªäººçš„æ­£é“ã€‚</p><h2>é‡åŒ–æ•°æ®åˆ†æç³»ç»Ÿ</h2><p>æ•°æ®åº“æœ‰äº†é‡åŒ–æ•°æ®å­˜å…¥åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥å¼€å§‹è¿›è¡Œä¸€äº›é‡åŒ–åˆ†æäº†ã€‚è¿™ä¸€å—å„¿ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å­¦æœ¯é¢†åŸŸï¼Œå«åšæ—¶é—´åºåˆ—åˆ†æï¼Œä¸è¿‡å°±ä»Šå¤©è¿™èŠ‚è¯¾çš„ä¸»é¢˜æ¥è¯´ï¼Œæˆ‘ä»¬ä»…åšæŠ›ç –å¼•ç‰ï¼Œåˆ—ä¸¾ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œå³æ±‚è¿‡å»ä¸€ä¸ªå°æ—¶ BTC/USD çš„æœ€é«˜ä»·å’Œæœ€ä½ä»·ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>import MySQLdb\nimport numpy as np\n\n\ndef test_pymysql():\n    conn = MySQLdb.connect(\n        host='localhost',\n        port=3306,\n        user='your_username',\n        passwd='your_password',\n        db='mysql'\n    )\n\n    cur = conn.cursor()\n    cur.execute('''\n            SELECT\n              BTCUSD\n            FROM\n              price\n            WHERE\n              timestamp &gt; now() - interval 60 minute\n    ''')\n\n    BTCUSD = np.array(cur.fetchall())\n    print(BTCUSD.max(), BTCUSD.min())\n\n    conn.close()\n\n\ntest_pym\n</code></pre><p>ä»£ç çœ‹èµ·æ¥å¾ˆç®€å•å§ï¼æ˜¾ç„¶ï¼Œé€šè¿‡ SQL è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠ“å–åˆ°è¿‡å»ä¸€å°æ—¶çš„æ—¶é—´åºåˆ—ç‰‡æ®µï¼Œæ‹¿åˆ°æˆ‘ä»¬æƒ³è¦çš„ BTC/USD ä»·æ ¼å‘é‡ï¼Œç„¶åé€šè¿‡ <code>numpy</code> å¤„ç†ä¸€ä¸‹å³å¯ã€‚ä¸è¿‡è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦è°ƒç”¨ conn.commit()ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ“ä½œæ˜¯åªè¯»çš„ï¼Œå¯¹æ•°æ®åº“æ²¡æœ‰ä»»ä½•å½±å“ã€‚</p><h2>åˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿ</h2><p>æ˜ç™½äº†ä¸Šé¢çš„å†…å®¹åï¼Œæˆ‘ä»¬ç°åœ¨æ¥çœ‹ä¸€ä¸‹åˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿã€‚</p><p>å¯¹é‡åŒ–äº¤æ˜“è€Œè¨€ï¼Œæˆ‘ä»¬éœ€è¦çš„æ¨¡å—ä¸»è¦æœ‰æ•°æ®ç³»ç»Ÿã€ç­–ç•¥ç³»ç»Ÿã€äº¤æ˜“æ‰§è¡Œç³»ç»Ÿã€çº¿ä¸‹æ¨¡å‹è®­ç»ƒã€çº¿ä¸Šé£æ§ç³»ç»Ÿä»¥åŠå®æ—¶ç›‘æ§ç³»ç»Ÿã€‚å®ƒä»¬ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œæˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œä½ å¯ä»¥å‚è€ƒæ¥ç†è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ca/17/ca5c501186fae46b50b9af9b88980617.png?wh=884*688\" alt=\"\"></p><p>è¿™é‡Œçš„æ¯ä¸ªå­ç³»ç»Ÿéƒ½æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œå¹¶ä¸”è¿˜æœ‰è®¸å¤šæ¨¡å—éœ€è¦è¿­ä»£æ›´æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬ç®€å•ä¿å­˜æœ¬åœ°æ—¥å¿—æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªæ˜æ™ºä¹‹ä¸¾ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸“é—¨å¼€ä¸€å°æœåŠ¡å™¨æ¥è¿è¡Œ MySQL serverï¼Œå¹¶ä¸”å¼€æ”¾æŒ‡å®šç«¯å£å’Œå…¶ä»–ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚</p><p>å¦å¤–ï¼Œå›¾ä¸­çš„æ”¶é›†ç³»ç»Ÿï¼Œå…¶å®ç±»ä¼¼äºä¸Šä¸€èŠ‚æˆ‘ä»¬æ‰€è®²çš„æ¶ˆæ¯é˜Ÿåˆ—ä½“ç³»ï¼Œåœ¨å„ä¸ªä¸Šæ¸¸ç³»ç»Ÿä¸­è¿è¡Œä»£ç†å·¥å…·ï¼Œè´Ÿè´£å°†å„ä¸ªæ¨¡å—çš„ log æ”¶é›†èµ·æ¥ï¼Œç„¶åå‘é€åˆ°æ”¶é›†ç³»ç»Ÿä¸­ã€‚æ”¶é›†ç³»ç»Ÿæ•´ç†è¿‡åï¼Œå†å°†ä¿¡æ¯å­˜åˆ°æ—¥å¿—ç³»ç»Ÿã€‚å½“ç„¶ï¼Œé™¤äº†ç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ‘ä»¬è¿˜èƒ½ç”¨å¾ˆå¤šå·¥å…·ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘çš„Logtailã€ Apache çš„ Flume Agentç­‰ç­‰ã€‚</p><p>è€Œåˆ°äº†åæœŸï¼Œå¯¹äºæ—¥å¿—ç³»ç»Ÿæ¥è¯´ï¼Œè¶Šæ¥è¶Šéœ€è¦æ³¨æ„çš„å°±æ˜¯å­˜å‚¨æ•ˆç‡å’Œåˆ†ææ•ˆç‡ã€‚éšç€ä½¿ç”¨çš„å¢åŠ ï¼Œæ•°æ®ä¼šè¶Šæ¥è¶Šå¤šï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘å¯¹ä¸€äº›æ•°æ®è¿›è¡Œå‹ç¼©å’Œä¿å­˜ã€‚è€Œè¶Šæ˜¯ä¹…è¿œçš„æ•°æ®ï¼Œè¶Šæ˜¯ç²—ç²’åº¦çš„æ•°æ®ï¼Œè¢«è°ƒç”¨çš„æ¦‚ç‡ä¹Ÿå°±è¶Šä½ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿå°±é¦–å½“å…¶å†²ï¼Œæˆäº†æˆ‘ä»¬å‹ç¼©ã€ä¿å­˜çš„ç›®æ ‡ã€‚</p><h2>æ—¥å¿—åˆ†æ</h2><p>æœ€åï¼Œæˆ‘å†æ¥è¡¥å……è®²ä¸€è®²æ—¥å¿—çš„åˆ†æã€‚å‰é¢æåˆ°è¿‡ï¼Œåˆ†æä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼Œç¦»çº¿åˆ†æå’Œåœ¨çº¿åˆ†æã€‚</p><p>åœ¨ç¦»çº¿åˆ†æä¸­ï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯ç”ŸæˆæŠ¥å‘Šã€‚</p><p>æ¯”å¦‚ï¼Œæ€»ç»“æŸå¤©æŸæœˆæˆ–æŸå­£åº¦å†…çš„ï¼Œæ”¶ç›ŠäºæŸæƒ…å†µï¼ˆPnLï¼‰ã€æœ€å¤§å›æ’¤ã€å¤æ™®æ¯”ç‡ç­‰æ•°æ®ã€‚è¿™ç§åŸºäºæ—¶é—´çª—å£çš„ç»Ÿè®¡ï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ä¹Ÿèƒ½å¾—åˆ°å¾ˆæ–¹ä¾¿çš„æ”¯æŒã€‚</p><p>è€Œå¦ä¸€ç±»å¸¸è§çš„ç¦»çº¿ä½¿ç”¨æ–¹å¼ï¼Œåˆ™æ˜¯å›æµ‹ç³»ç»Ÿã€‚åœ¨ä¸€ä¸ªæ–°ç­–ç•¥ç ”å‘çš„å‘¨æœŸä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å†å²æ•°æ®è¿›è¡Œå›æµ‹ï¼Œè¿™æ ·å°±å¯ä»¥å¾—åˆ°å†å²æ•°æ®ä¸­äº¤æ˜“çš„æ”¶ç›Šç‡ç­‰æ•°æ®ã€‚å›æµ‹ç³»ç»Ÿå¯¹äºè¯„ä¼°ä¸€ä¸ªæ–°çš„ç­–ç•¥éå¸¸é‡è¦ï¼Œç„¶è€Œï¼Œå›æµ‹å¾€å¾€éœ€è¦å¤§é‡çš„èµ„æºï¼Œæ‰€ä»¥é€‰å–å¥½æ•°æ®åº“ã€æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œä¼˜åŒ–æ•°æ®è¿æ¥å’Œè®¡ç®—ï¼Œå°±æ˜¾å¾—è‡³å…³é‡è¦ã€‚</p><p>åœ¨çº¿åˆ†æï¼Œåˆ™æ›´å¤šåº”ç”¨äºé£æ§å’Œè­¦æŠ¥ç³»ç»Ÿã€‚è¿™ç§æ–¹å¼ï¼Œå¯¹æ•°æ®çš„å®æ—¶æ€§è¦æ±‚æ›´é«˜ä¸€äº›ï¼Œäºæ˜¯ï¼Œä¸€ç§æ–¹æ³•å°±æ˜¯ï¼Œä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­ç›´æ¥æ‹¿æœ€å¿«çš„æ•°æ®è¿›è¡Œæ“ä½œã€‚å½“ç„¶ï¼Œè¿™ä¸ªå‰ææ˜¯æ—¶é—´çª—å£è¾ƒå°ï¼Œè¿™æ ·ä½ å°±ä¸éœ€è¦é£æ§ç³»ç»Ÿæ¥ç»´æŠ¤å¤§é‡çš„æœ¬åœ°æ•°æ®ã€‚</p><p>è‡³äºå®æ—¶è­¦æŠ¥ï¼Œæœ€å…³é”®çš„ä¾ç„¶æ˜¯æ•°æ®ã€‚</p><ul>\n<li>æ¯”å¦‚ï¼Œæ•°æ®ç³»ç»Ÿå¼‚å¸¸åœæ­¢ï¼Œè¢«ç›‘è§†çš„è¡¨æ²¡æœ‰æ›´æ–°ï¼›</li>\n<li>æˆ–è€…ï¼Œäº¤æ˜“ç³»ç»Ÿçš„è¿æ¥å‡ºäº†æ•…éšœï¼Œå§”æ‰˜è®¢å•çš„æŸäº›çŠ¶æ€è¶…è¿‡äº†ä¸€å®šçš„é˜ˆå€¼ï¼›</li>\n<li>å†æˆ–è€…ï¼Œä»“ä½ä¿¡æ¯å‡ºç°äº†è¾ƒå¤§çš„ã€é¢„è®¡ä¹‹å¤–çš„å˜åŠ¨ã€‚</li>\n</ul><p>è¿™äº›æƒ…å†µéƒ½éœ€è¦è¿›è¡ŒæŠ¥è­¦ï¼Œä¹Ÿå°±æ˜¯ç¡…è°·å¤§å…¬å¸æ‰€è¯´çš„â€œoncallâ€ã€‚ä¸€æ—¦å‘ç”Ÿæ„å¤–ï¼Œè´Ÿè´£äººä¼šè¿…é€Ÿæ”¶åˆ°ç”µè¯ã€çŸ­ä¿¡å’Œé‚®ä»¶ï¼Œç„¶åé€šè¿‡ç›‘æ§å¹³å°æ¥ç¡®è®¤ï¼Œæ˜¯çœŸçš„å‡ºäº†äº‹æ•…è¿˜æ˜¯ç›‘æ§è¯¯æŠ¥ã€‚</p><p>å½“ç„¶ï¼Œç°åœ¨å·²ç»æœ‰äº†ä¸å°‘å¼€æºçš„å·¥å…·å¯ä»¥åœ¨äº‘ç«¯ä½¿ç”¨ï¼Œå…¶ä¸­ AWS å±äºå…¨çƒé¢†å…ˆçš„äº‘è®¡ç®—å¹³å°ã€‚å¦‚æœä½ çš„æœåŠ¡å™¨æ¶è®¾åœ¨ç¾å›½ï¼Œé‚£å°±å¯ä»¥è€ƒè™‘é€‰æ‹©å®ƒå®¶çš„å„ç§å„æ ·çš„äº‘æœåŠ¡ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¯¹äºå°å‹é‡åŒ–äº¤æ˜“å›¢é˜Ÿè€Œè¨€ï¼Œé¿å…è‡ªå·±æ­å»ºå¤æ‚çš„æ—¥å¿—ç³»ç»Ÿï¼Œè€Œæ˜¯æŠŠä¸»è¦ç²¾åŠ›æ”¾åœ¨ç­–ç•¥çš„å¼€å‘è¿­ä»£ä¹‹ä¸Šï¼Œæé«˜äº†ä¸å°‘æ•ˆç‡ã€‚</p><h2>æ€»ç»“</h2><p>è¿™ä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»å·¥ç¨‹çš„è§’åº¦ï¼Œä¸ºä½ ä»‹ç»äº†é‡åŒ–ç³»ç»Ÿä¸­çš„å­˜å‚¨ç³»ç»Ÿã€‚æˆ‘ä»¬ä»åŸºç¡€çš„ MySQL çš„ä½¿ç”¨æ–¹æ³•è®²èµ·ï¼Œå†è®²åˆ°åé¢çš„é‡åŒ–ç³»ç»Ÿæ¡†æ¶ã€‚æ•°æ®åº“å’Œæ•°æ®åœ¨ç»å¤§éƒ¨åˆ†äº’è”ç½‘è¡Œä¸šéƒ½æ˜¯æ ¸å¿ƒï¼Œå¯¹é‡åŒ–ä»ä¸šè€…æ¥è¯´ä¹Ÿæ˜¯é‡è¦çš„ç”Ÿäº§èµ„æ–™ã€‚è€Œæ­å»ºä¸€å¥—è´Ÿè½½åˆç†ã€æ•°æ®å¯é çš„æ•°æ®ç³»ç»Ÿï¼Œä¹Ÿéœ€è¦ä¸€ä¸ªé‡åŒ–å›¢é˜Ÿé•¿æœŸæ‰“ç£¨ï¼Œå¹¶æ ¹æ®éœ€æ±‚è¿›è¡Œè¿­ä»£ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ã€‚é‡åŒ–äº¤æ˜“éœ€è¦çš„æ•°æ®é‡ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯æœ‰å¯èƒ½å‡ºç°è°ƒç”¨é¢‘ç‡æé«˜çš„æƒ…å†µï¼Œä¾‹å¦‚å›æµ‹ç³»ç»Ÿã€‚é‚£ä¹ˆï¼Œä½ èƒ½æƒ³åˆ°å“ªäº›ä¼˜åŒ–æ‰‹æ®µï¼Œæ¥é™ä½è°ƒç”¨ä»£ä»·å—ï¼Ÿæ¬¢è¿ç•™è¨€å’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«å‡ºå»ã€‚</p>","comments":[{"had_liked":false,"id":120774,"user_name":"SCAR","can_delete":false,"product_type":"c1","uid":1031209,"ip_address":"","ucode":"38C0927FA3C5FC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bc/29/022905e6.jpg","comment_is_top":false,"comment_ctime":1564993214,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"61694535358","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ï¼šæƒ³åˆ°2ç‚¹ï¼Œå…¶ä»–æƒ³ä¸åˆ°<br>1.ä»¥ç©ºé—´æ¢æ—¶é—´ï¼Œç¼“å­˜å¤§æ³•ã€‚<br>2.ä»¥æå‰é‡æ¢æ—¶é—´ï¼Œä¾‹å¦‚å›æµ‹ç³»ç»Ÿä¸­å¯¹ohlcvä¸­çš„è®¡ç®—å¯ä»¥æå‰åšå¥½ï¼Œæ”¾å…¥å†…å­˜ï¼Œè¿™éƒ¨åˆ†æ—¶é—´åœ¨é«˜é¢‘æ—¶å°±çœä¸‹æ¥äº†ã€‚","like_count":15},{"had_liked":false,"id":187722,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1584199216,"is_pvip":false,"replies":[{"id":"75939","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1586151439,"ip_address":"","comment_id":187722,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31648970288","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ï¼š<br>å¯¹äºé«˜é¢‘è°ƒç”¨æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶æŠŠæ•°æ®ä»æ•°æ®åº“ä¸­ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä»¥æŸç§æ•°æ®ç»“æ„å¦‚DataFrameä¹‹ç±»çš„å­˜è´®ç»“æ„åŒ–æ•°æ®ï¼Œæˆ–ä»¥é”®-å€¼å¯¹å½¢å¼å­˜è´®æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…æ¯æ¬¡è°ƒç”¨æ—¶éƒ½å»è®¿é—®æ•°æ®åº“ï¼Œå¯ä»¥æå¤§æé«˜è®¿é—®æ•ˆç‡ã€‚<br>å¦å¤–ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘æŠŠæ•°æ®æ”¾åˆ°å†…å­˜æ•°æ®åº“ä¸­ï¼Œå¦‚Redisä¸­ï¼Œä»¥é”®-å€¼å¯¹å½¢å¼å­˜è´®é«˜é¢‘æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥å¿«é€Ÿè®¿é—®é«˜é¢‘æ•°æ®ã€‚","like_count":8,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487210,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586151439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125462,"user_name":"Jingxiao","can_delete":false,"product_type":"c1","uid":1259521,"ip_address":"","ucode":"EB966BB87132F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","comment_is_top":false,"comment_ctime":1566187213,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27335990989","product_id":100026901,"comment_content":"è¯„è®ºè¯´çš„å¾ˆå¥½ï¼Œä¸€èˆ¬å…ˆç”¨ç´¢å¼•è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚æœæ€§èƒ½è¿˜æ˜¯ä¸å¤Ÿï¼Œéœ€è¦æè‡´çš„è¯»å–å»¶è¿Ÿï¼Œå¯ä»¥è€ƒè™‘å†…å­˜æ•°æ®åº“ï¼Œredis æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚","like_count":7},{"had_liked":false,"id":121221,"user_name":"catshitfive","can_delete":false,"product_type":"c1","uid":1542973,"ip_address":"","ucode":"E030B61F3D0811","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/3d/2a3b67f8.jpg","comment_is_top":false,"comment_ctime":1565080276,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23039916756","product_id":100026901,"comment_content":"è¿™ä¸ªPriceç±»çœ‹ä¸å¤ªæ˜ç™½ï¼Œè€å¸ˆèƒ½ç»†è®²ä¸‹å—(é‡Œé¢è¿˜åŒ…å«äº†ä¸€ä¸ªå†…éƒ¨ç±»Meta)","like_count":6,"discussions":[{"author":{"id":1117793,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","nickname":"dream","note":"","ucode":"65B33D32FA8BE9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277130,"discussion_content":"æˆ‘çœ‹åˆ°å®˜æ–¹æ–‡æ¡£é‡Œé¢æœ‰ä¸€è¡Œæ³¨é‡Š:\n# This model uses the &#34;people.db&#34; database.\nå°±æ˜¯è¡¨ç¤ºpyå¯¹è±¡æ“ä½œçš„æ•°æ®åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591004100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120917,"user_name":"magician","can_delete":false,"product_type":"c1","uid":1483968,"ip_address":"","ucode":"1BD1125C7C907A","user_header":"https://static001.geekbang.org/account/avatar/00/16/a4/c0/c6880c07.jpg","comment_is_top":false,"comment_ctime":1565013510,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14449915398","product_id":100026901,"comment_content":"é«˜é¢‘æŸ¥è¯¢æ•°æ®ä½¿ç”¨nosqlæ•°æ®åº“æ¯”å¦‚redisåšç¼“å­˜","like_count":3},{"had_liked":false,"id":120746,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1564988358,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10154922950","product_id":100026901,"comment_content":"è¿™ä¸€èŠ‚æ˜¯ç†è®ºï¼Œä¸‹ä¸€èŠ‚åº”è¯¥å°±æ˜¯å®æ“äº†ã€‚","like_count":2,"discussions":[{"author":{"id":1524904,"avatar":"https://static001.geekbang.org/account/avatar/00/17/44/a8/0ce75c8c.jpg","nickname":"Skrpy","note":"","ucode":"BB6CB4E9AA1712","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4261,"discussion_content":"ğŸ˜ä¸å¥½æ„ï¼Œä½ åº”è¯¥å¤±æœ›äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1565259019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231792,"user_name":"æ°é¥­å“’","can_delete":false,"product_type":"c1","uid":1014023,"ip_address":"","ucode":"0395069A050057","user_header":"https://static001.geekbang.org/account/avatar/00/0f/79/07/2f418316.jpg","comment_is_top":false,"comment_ctime":1593770283,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5888737579","product_id":100026901,"comment_content":"ELKåœ¨Pythonç”Ÿæ€ä¸­æ€ä¹ˆæ ·å•Š","like_count":1},{"had_liked":false,"id":147576,"user_name":"è‡ªç”±æ°‘","can_delete":false,"product_type":"c1","uid":1346236,"ip_address":"","ucode":"435C67531697F1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg","comment_is_top":false,"comment_ctime":1572870827,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5867838123","product_id":100026901,"comment_content":"å›æµ‹ä¸­é‡å¤è®¡ç®—çš„æ•°æ®å…ˆç¼“å­˜åˆ°æ•°æ®åº“é‡Œï¼Œé¿å…é‡å¤è®¡ç®—ã€‚","like_count":1},{"had_liked":false,"id":132367,"user_name":"å°ä¾ é¾™æ—‹é£","can_delete":false,"product_type":"c1","uid":1126441,"ip_address":"","ucode":"073F3924A99835","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","comment_is_top":false,"comment_ctime":1568100912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5863068208","product_id":100026901,"comment_content":"sqlè°ƒä¼˜ç›¸å…³å†…å®¹ï¼šç»å¸¸è¿›è¡Œæ£€ç´¢çš„å­—æ®µä¸Šåˆ›å»ºç´¢å¼•ï¼Œç´¢å¼•å¯æé«˜selectæ•ˆç‡ä½†åŒæ—¶ä¹Ÿé™ä½äº†insertå’Œupdateçš„æ•ˆç‡ï¼Œä¸€ä¸ªè¡¨æœ€å¤šå¯æœ‰6ä¸ªç´¢å¼•ï¼Œé¿å…åœ¨ç´¢å¼•åˆ—ä¸Šåšè®¡ç®—ï¼Œç”¨varcharå˜é•¿ä»£æ›¿charå®šé•¿ï¼Œä½¿ç”¨ä¸´æ—¶è¡¨æš‚å­˜ä¸­é—´ç»“æœç­‰ã€‚","like_count":1},{"had_liked":false,"id":302435,"user_name":"Geek_cf3aed","can_delete":false,"product_type":"c1","uid":2417045,"ip_address":"","ucode":"BE1AF6D6F14541","user_header":"","comment_is_top":false,"comment_ctime":1626224889,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1626224889","product_id":100026901,"comment_content":"æˆ‘ä½¿ç”¨çš„æ˜¯åä¸ºp40 æ— æ³•ä½¿ç”¨æ–‡æœ¬ä¸­æä¾›ä»£ç çš„    å¤åˆ¶  åŠŸèƒ½","like_count":0},{"had_liked":false,"id":123772,"user_name":"å›¾Â·ç¾å…‹å°”","can_delete":false,"product_type":"c1","uid":1076720,"ip_address":"","ucode":"021FB5AE110066","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eppQqDE6TNibvr3DNdxG323AruicIgWo5DpVr6U7yZVNkbF2rKluyDfhdpgAEcYEOZTAnbrMdTzFkUw/0","comment_is_top":false,"comment_ctime":1565754338,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1565754338","product_id":100026901,"comment_content":"1. ç´¢å¼•<br>2. æ¶ˆæ¯é˜Ÿåˆ—<br>3. redis","like_count":0},{"had_liked":false,"id":121018,"user_name":"å¼ é‘«","can_delete":false,"product_type":"c1","uid":1591415,"ip_address":"","ucode":"1F695362EB53DD","user_header":"https://static001.geekbang.org/account/avatar/00/18/48/77/f19fe773.jpg","comment_is_top":false,"comment_ctime":1565050820,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565050820","product_id":100026901,"comment_content":"é‡‡ç”¨è”åˆç´¢å¼•","like_count":0},{"had_liked":false,"id":120822,"user_name":"è’™å¼€å¼º","can_delete":false,"product_type":"c1","uid":1317706,"ip_address":"","ucode":"61B3183781B9F7","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/4a/f9df2d06.jpg","comment_is_top":false,"comment_ctime":1565001556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565001556","product_id":100026901,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œé‚£ç§å¾®æœåŠ¡çš„åˆ†å¸ƒå¼æ—¥å¿—æ€ä¹ˆæœé›†å‘¢","like_count":0},{"had_liked":false,"id":120802,"user_name":"Â©HJ","can_delete":false,"product_type":"c1","uid":1235078,"ip_address":"","ucode":"6331F3E77BCE89","user_header":"https://static001.geekbang.org/account/avatar/00/12/d8/86/bdf2ad51.jpg","comment_is_top":false,"comment_ctime":1564998048,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564998048","product_id":100026901,"comment_content":"è¯·é—®è€å¸ˆï¼Œé‡åŒ–æ•°æ®åº“ç”¨MySQLæ¯”è¾ƒå¥½ï¼Œè¿˜æ˜¯ç”¨MongoDBï¼Ÿè°¢è°¢<br>","like_count":0}]}