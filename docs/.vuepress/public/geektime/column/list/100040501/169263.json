{"id":169263,"title":"02 | è‡ªå·±åŠ¨æ‰‹ï¼Œå®ç°C++çš„æ™ºèƒ½æŒ‡é’ˆ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬æè¿°äº†ä¸€ä¸ªæŸç§ç¨‹åº¦ä¸Šå¯ä»¥å½“æˆæ™ºèƒ½æŒ‡é’ˆç”¨çš„ç±» <code>shape_wrapper</code>ã€‚ä½¿ç”¨é‚£ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œå¯ä»¥ç®€åŒ–èµ„æºçš„ç®¡ç†ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤èµ„æºï¼ˆåŒ…æ‹¬å†…å­˜ï¼‰æ³„æ¼çš„å¯èƒ½æ€§ã€‚è¿™ä¸€è®²æˆ‘ä»¬å°±æ¥è¿›ä¸€æ­¥è®²è§£ï¼Œå¦‚ä½•å°† <code>shape_wrapper</code> æ”¹é€ æˆä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½æŒ‡é’ˆã€‚ä½ ä¼šçœ‹åˆ°ï¼Œæ™ºèƒ½æŒ‡é’ˆæœ¬è´¨ä¸Šå¹¶ä¸ç¥ç§˜ï¼Œå…¶å®å°±æ˜¯ RAII èµ„æºç®¡ç†åŠŸèƒ½çš„è‡ªç„¶å±•ç°è€Œå·²ã€‚</p><p>åœ¨å­¦å®Œè¿™ä¸€è®²ä¹‹åï¼Œä½ åº”è¯¥ä¼šå¯¹ C++ çš„ <code>unique_ptr</code> å’Œ <code>shared_ptr</code> çš„åŠŸèƒ½éå¸¸ç†Ÿæ‚‰äº†ã€‚åŒæ—¶ï¼Œå¦‚æœä½ ä»Šåè¦åˆ›å»ºç±»ä¼¼çš„èµ„æºç®¡ç†ç±»ï¼Œä¹Ÿä¸ä¼šæ˜¯ä¸€ä»¶éš¾äº‹ã€‚</p><h2>å›é¡¾</h2><p>æˆ‘ä»¬ä¸Šä¸€è®²ç»™å‡ºäº†ä¸‹é¢è¿™ä¸ªç±»ï¼š</p><pre><code class=\"language-c++\">class shape_wrapper {\npublic:\n  explicit shape_wrapper(\n    shape* ptr = nullptr)\n    : ptr_(ptr) {}\n  ~shape_wrapper()\n  {\n    delete ptr_;\n  }\n  shape* get() const { return ptr_; }\n\nprivate:\n  shape* ptr_;\n};\n</code></pre><p>è¿™ä¸ªç±»å¯ä»¥å®Œæˆæ™ºèƒ½æŒ‡é’ˆçš„æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼šå¯¹è¶…å‡ºä½œç”¨åŸŸçš„å¯¹è±¡è¿›è¡Œé‡Šæ”¾ã€‚<strong>ä½†å®ƒç¼ºäº†ç‚¹ä¸œè¥¿ï¼š</strong></p><ol>\n<li>è¿™ä¸ªç±»åªé€‚ç”¨äº <code>shape</code> ç±»</li>\n<li>è¯¥ç±»å¯¹è±¡çš„è¡Œä¸ºä¸å¤ŸåƒæŒ‡é’ˆ</li>\n<li>æ‹·è´è¯¥ç±»å¯¹è±¡ä¼šå¼•å‘ç¨‹åºè¡Œä¸ºå¼‚å¸¸</li>\n</ol><!-- [[[read_end]]] --><p>ä¸‹é¢æˆ‘ä»¬æ¥é€ä¸€çœ‹ä¸€ä¸‹æ€ä¹ˆå¼¥è¡¥è¿™äº›é—®é¢˜ã€‚</p><h2>æ¨¡æ¿åŒ–å’Œæ˜“ç”¨æ€§</h2><p>è¦è®©è¿™ä¸ªç±»èƒ½å¤ŸåŒ…è£…ä»»æ„ç±»å‹çš„æŒ‡é’ˆï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒå˜æˆä¸€ä¸ªç±»æ¨¡æ¿ã€‚è¿™å®é™…ä¸Šç›¸å½“å®¹æ˜“ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nclass smart_ptr {\npublic:\n  explicit smart_ptr(T* ptr = nullptr)\n    : ptr_(ptr) {}\n  ~smart_ptr()\n  {\n    delete ptr_;\n  }\n  T* get() const { return ptr_; }\nprivate:\n  T* ptr_;\n};\n</code></pre><p>å’Œ <code>shape_wrapper</code> æ¯”è¾ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬å°±æ˜¯åœ¨å¼€å¤´å¢åŠ æ¨¡æ¿å£°æ˜ <code>template &lt;typename T&gt;</code>ï¼Œç„¶åæŠŠä»£ç ä¸­çš„ <code>shape</code> æ›¿æ¢æˆæ¨¡æ¿å‚æ•° <code>T</code> è€Œå·²ã€‚è¿™äº›ä¿®æ”¹éå¸¸ç®€å•è‡ªç„¶å§ï¼Ÿæ¨¡æ¿æœ¬è´¨ä¸Šå¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„æ¦‚å¿µã€‚è¿™ä¸ªæ¨¡æ¿ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠåŸæ¥çš„ <code>shape_wrapper</code> æ”¹æˆ <code>smart_ptr&lt;shape&gt;</code> å°±è¡Œã€‚</p><p>ç›®å‰è¿™ä¸ª <code>smart_ptr</code> çš„è¡Œä¸ºè¿˜æ˜¯å’ŒæŒ‡é’ˆæœ‰ç‚¹å·®å¼‚çš„ï¼š</p><ul>\n<li>å®ƒä¸èƒ½ç”¨ <code>*</code> è¿ç®—ç¬¦è§£å¼•ç”¨</li>\n<li>å®ƒä¸èƒ½ç”¨ <code>-&gt;</code> è¿ç®—ç¬¦æŒ‡å‘å¯¹è±¡æˆå‘˜</li>\n<li>å®ƒä¸èƒ½åƒæŒ‡é’ˆä¸€æ ·ç”¨åœ¨å¸ƒå°”è¡¨è¾¾å¼é‡Œ</li>\n</ul><p>ä¸è¿‡ï¼Œè¿™äº›é—®é¢˜ä¹Ÿç›¸å½“å®¹æ˜“è§£å†³ï¼ŒåŠ å‡ ä¸ªæˆå‘˜å‡½æ•°å°±å¯ä»¥ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nclass smart_ptr {\npublic:\n  â€¦\n  T&amp; operator*() const { return *ptr_; }\n  T* operator-&gt;() const { return ptr_; }\n  operator bool() const { return ptr_; }\n}\n</code></pre><h2>æ‹·è´æ„é€ å’Œèµ‹å€¼</h2><p>æ‹·è´æ„é€ å’Œèµ‹å€¼ï¼Œæˆ‘ä»¬æš‚ä¸”ç®€ç§°ä¸ºæ‹·è´ï¼Œè¿™æ˜¯ä¸ªæ¯”è¾ƒå¤æ‚çš„é—®é¢˜äº†ã€‚å…³é”®è¿˜ä¸æ˜¯å®ç°é—®é¢˜ï¼Œè€Œæ˜¯æˆ‘ä»¬è¯¥å¦‚ä½•å®šä¹‰å…¶è¡Œä¸ºã€‚å‡è®¾æœ‰ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code class=\"language-c++\">smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1};\n</code></pre><p>å¯¹äºç¬¬äºŒè¡Œï¼Œç©¶ç«Ÿåº”å½“è®©ç¼–è¯‘æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¿˜æ˜¯å¯ä»¥æœ‰ä¸€ä¸ªæ›´åˆç†çš„è¡Œä¸ºï¼Ÿæˆ‘ä»¬æ¥é€ä¸€æ£€æŸ¥ä¸€ä¸‹å„ç§å¯èƒ½æ€§ã€‚</p><p>æœ€ç®€å•çš„æƒ…å†µæ˜¾ç„¶æ˜¯ç¦æ­¢æ‹·è´ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nclass smart_ptr {\n  â€¦\n  smart_ptr(const smart_ptr&amp;)\n    = delete;\n  smart_ptr&amp; operator=(const smart_ptr&amp;)\n    = delete;\n  â€¦\n};\n</code></pre><p>ç¦ç”¨è¿™ä¸¤ä¸ªå‡½æ•°éå¸¸ç®€å•ï¼Œä½†å´è§£å†³äº†ä¸€ç§å¯èƒ½å‡ºé”™çš„æƒ…å†µã€‚å¦åˆ™ï¼Œ<code>smart_ptr&lt;shape&gt; ptr2{ptr1};</code> åœ¨ç¼–è¯‘æ—¶ä¸ä¼šå‡ºé”™ï¼Œä½†åœ¨è¿è¡Œæ—¶å´ä¼šæœ‰æœªå®šä¹‰è¡Œä¸ºâ€”â€”ç”±äºä¼šå¯¹åŒä¸€å†…å­˜é‡Šæ”¾ä¸¤æ¬¡ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p><p>æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è€ƒè™‘åœ¨æ‹·è´æ™ºèƒ½æŒ‡é’ˆæ—¶æŠŠå¯¹è±¡æ‹·è´ä¸€ä»½ï¼Ÿä¸è¡Œï¼Œé€šå¸¸äººä»¬ä¸ä¼šè¿™ä¹ˆç”¨ï¼Œå› ä¸ºä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆçš„ç›®çš„å°±æ˜¯è¦å‡å°‘å¯¹è±¡çš„æ‹·è´å•Šã€‚ä½•å†µï¼Œè™½ç„¶æˆ‘ä»¬çš„æŒ‡é’ˆç±»å‹æ˜¯ <code>shape</code>ï¼Œä½†å®é™…æŒ‡å‘çš„å´åº”è¯¥æ˜¯ <code>circle</code> æˆ– <code>triangle</code> ä¹‹ç±»çš„å¯¹è±¡ã€‚åœ¨ C++ é‡Œæ²¡æœ‰åƒ Java çš„ <code>clone</code> æ–¹æ³•è¿™æ ·çš„çº¦å®šï¼›ä¸€èˆ¬è€Œè¨€ï¼Œå¹¶æ²¡æœ‰é€šç”¨çš„æ–¹æ³•å¯ä»¥é€šè¿‡åŸºç±»çš„æŒ‡é’ˆæ¥æ„é€ å‡ºä¸€ä¸ªå­ç±»çš„å¯¹è±¡æ¥ã€‚</p><p>æˆ‘ä»¬è¦ä¹ˆè¯•è¯•åœ¨æ‹·è´æ—¶è½¬ç§»æŒ‡é’ˆçš„æ‰€æœ‰æƒï¼Ÿå¤§è‡´å®ç°å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nclass smart_ptr {\n  â€¦\n  smart_ptr(smart_ptr&amp; other)\n  {\n    ptr_ = other.release();\n  }\n  smart_ptr&amp; operator=(smart_ptr&amp; rhs)\n  {\n    smart_ptr(rhs).swap(*this);\n    return *this;\n  }\n  â€¦\n  T* release()\n  {\n    T* ptr = ptr_;\n    ptr_ = nullptr;\n    return ptr;\n  }\n  void swap(smart_ptr&amp; rhs)\n  {\n    using std::swap;\n    swap(ptr_, rhs.ptr_);\n  }\n  â€¦\n};\n</code></pre><p>åœ¨æ‹·è´æ„é€ å‡½æ•°ä¸­ï¼Œé€šè¿‡è°ƒç”¨ <code>other</code> çš„ <code>release</code> æ–¹æ³•æ¥é‡Šæ”¾å®ƒå¯¹æŒ‡é’ˆçš„æ‰€æœ‰æƒã€‚åœ¨èµ‹å€¼å‡½æ•°ä¸­ï¼Œåˆ™é€šè¿‡æ‹·è´æ„é€ äº§ç”Ÿä¸€ä¸ªä¸´æ—¶å¯¹è±¡å¹¶è°ƒç”¨ <code>swap</code> æ¥äº¤æ¢å¯¹æŒ‡é’ˆçš„æ‰€æœ‰æƒã€‚å®ç°ä¸Šæ˜¯ä¸å¤æ‚çš„ã€‚</p><p>å¦‚æœä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äº <code>if (this != &amp;rhs)</code> çš„åˆ¤æ–­çš„è¯ï¼Œé‚£ç§ç”¨æ³•æ›´å•°å—¦ï¼Œè€Œä¸”å¼‚å¸¸å®‰å…¨æ€§ä¸å¤Ÿå¥½â€”â€”å¦‚æœåœ¨èµ‹å€¼è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡çš„å†…å®¹å¯èƒ½å·²ç»è¢«éƒ¨åˆ†ç ´åäº†ï¼Œå¯¹è±¡ä¸å†å¤„äºä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€ã€‚</p><p><strong>ä¸Šé¢ä»£ç é‡Œçš„è¿™ç§æƒ¯ç”¨æ³•ï¼ˆè§å‚è€ƒèµ„æ–™ <span class=\"orange\">[1]</span>ï¼‰åˆ™ä¿è¯äº†å¼ºå¼‚å¸¸å®‰å…¨æ€§ï¼š</strong>èµ‹å€¼åˆ†ä¸ºæ‹·è´æ„é€ å’Œäº¤æ¢ä¸¤æ­¥ï¼Œå¼‚å¸¸åªå¯èƒ½åœ¨ç¬¬ä¸€æ­¥å‘ç”Ÿï¼›è€Œç¬¬ä¸€æ­¥å¦‚æœå‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡å®Œå…¨ä¸å—ä»»ä½•å½±å“ã€‚æ— è®ºæ‹·è´æ„é€ æˆåŠŸä¸å¦ï¼Œç»“æœåªæœ‰èµ‹å€¼æˆåŠŸå’Œèµ‹å€¼æ²¡æœ‰æ•ˆæœä¸¤ç§çŠ¶æ€ï¼Œè€Œä¸ä¼šå‘ç”Ÿå› ä¸ºèµ‹å€¼ç ´åäº†å½“å‰å¯¹è±¡è¿™ç§åœºæ™¯ã€‚</p><p>å¦‚æœä½ è§‰å¾—è¿™ä¸ªå®ç°è¿˜ä¸é”™çš„è¯ï¼Œé‚£æ­å–œä½ ï¼Œä½ è¾¾åˆ°äº† C++ å§”å‘˜ä¼šåœ¨ 1998 å¹´æ—¶çš„æ°´å¹³ï¼šä¸Šé¢ç»™å‡ºçš„è¯­ä¹‰æœ¬è´¨ä¸Šå°±æ˜¯ C++98 çš„ <code>auto_ptr</code> çš„å®šä¹‰ã€‚å¦‚æœä½ è§‰å¾—è¿™ä¸ªå®ç°å¾ˆåˆ«æ‰­çš„è¯ï¼Œä¹Ÿæ­å–œä½ ï¼Œå› ä¸º C++ å§”å‘˜ä¼šä¹Ÿæ˜¯è¿™ä¹ˆè§‰å¾—çš„ï¼š<code>auto_ptr</code> åœ¨ C++17 æ—¶å·²ç»è¢«æ­£å¼ä» C++ æ ‡å‡†é‡Œåˆ é™¤äº†ã€‚</p><p>ä¸Šé¢å®ç°çš„æœ€å¤§é—®é¢˜æ˜¯ï¼Œå®ƒçš„è¡Œä¸ºä¼šè®©ç¨‹åºå‘˜éå¸¸å®¹æ˜“çŠ¯é”™ã€‚ä¸€ä¸å°å¿ƒæŠŠå®ƒä¼ é€’ç»™å¦å¤–ä¸€ä¸ª <code>smart_ptr</code>ï¼Œä½ å°±ä¸å†æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡äº†â€¦â€¦</p><h2>â€œç§»åŠ¨â€æŒ‡é’ˆï¼Ÿ</h2><p>åœ¨ä¸‹ä¸€è®²æˆ‘ä»¬å°†å®Œæ•´ä»‹ç»ä¸€ä¸‹ç§»åŠ¨è¯­ä¹‰ã€‚è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å…ˆç®€å•çœ‹ä¸€ä¸‹ <code>smart_ptr</code> å¯ä»¥å¦‚ä½•ä½¿ç”¨â€œç§»åŠ¨â€æ¥æ”¹å–„å…¶è¡Œä¸ºã€‚</p><p>æˆ‘ä»¬éœ€è¦å¯¹ä»£ç åšä¸¤å¤„å°ä¿®æ”¹ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nclass smart_ptr {\n  â€¦\n  smart_ptr(smart_ptr&amp;&amp; other)\n  {\n    ptr_ = other.release();\n  }\n  smart_ptr&amp; operator=(smart_ptr rhs)\n  {\n    rhs.swap(*this);\n    return *this;\n  }\n  â€¦\n};\n</code></pre><p>çœ‹åˆ°ä¿®æ”¹çš„åœ°æ–¹äº†å—ï¼Ÿæˆ‘æ”¹äº†ä¸¤ä¸ªåœ°æ–¹ï¼š</p><ul>\n<li>æŠŠæ‹·è´æ„é€ å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ <code>smart_ptr&amp;</code> æ”¹æˆäº† <code>smart_ptr&amp;&amp;</code>ï¼›ç°åœ¨å®ƒæˆäº†ç§»åŠ¨æ„é€ å‡½æ•°ã€‚</li>\n<li>æŠŠèµ‹å€¼å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ <code>smart_ptr&amp;</code> æ”¹æˆäº† <code>smart_ptr</code>ï¼Œåœ¨æ„é€ å‚æ•°æ—¶ç›´æ¥ç”Ÿæˆæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œä¸å†éœ€è¦åœ¨å‡½æ•°ä½“ä¸­æ„é€ ä¸´æ—¶å¯¹è±¡ã€‚ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚</li>\n</ul><p>æ ¹æ® C++ çš„è§„åˆ™ï¼Œå¦‚æœæˆ‘æä¾›äº†ç§»åŠ¨æ„é€ å‡½æ•°è€Œæ²¡æœ‰æ‰‹åŠ¨æä¾›æ‹·è´æ„é€ å‡½æ•°ï¼Œé‚£åè€…è‡ªåŠ¨è¢«ç¦ç”¨ï¼ˆè®°ä½ï¼ŒC++ é‡Œé‚£äº›å¤æ‚çš„è§„åˆ™ä¹Ÿæ˜¯ä¸ºæ–¹ä¾¿ç¼–ç¨‹è€Œè®¾ç«‹çš„ï¼‰ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬è‡ªç„¶åœ°å¾—åˆ°äº†ä»¥ä¸‹ç»“æœï¼š</p><pre><code class=\"language-c++\">smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1};             // ç¼–è¯‘å‡ºé”™\nsmart_ptr&lt;shape&gt; ptr3;\nptr3 = ptr1;                             // ç¼–è¯‘å‡ºé”™\nptr3 = std::move(ptr1);                  // OKï¼Œå¯ä»¥\nsmart_ptr&lt;shape&gt; ptr4{std::move(ptr3)};  // OKï¼Œå¯ä»¥\n</code></pre><p>è¿™ä¸ªå°±è‡ªç„¶å¤šäº†ã€‚</p><p>è¿™ä¹Ÿæ˜¯ C++11 çš„ <code>unique_ptr</code> çš„åŸºæœ¬è¡Œä¸ºã€‚</p><h2>å­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢</h2><p>å“¦ï¼Œæˆ‘æ’’äº†ä¸€ä¸ªå°è°ã€‚ä¸çŸ¥é“ä½ æ³¨æ„åˆ°æ²¡æœ‰ï¼Œä¸€ä¸ª <code>circle*</code> æ˜¯å¯ä»¥éšå¼è½¬æ¢æˆ <code>shape*</code> çš„ï¼Œä½†ä¸Šé¢çš„ <code>smart_ptr&lt;circle&gt;</code> å´æ— æ³•è‡ªåŠ¨è½¬æ¢æˆ <code>smart_ptr&lt;shape&gt;</code>ã€‚è¿™ä¸ªè¡Œä¸ºæ˜¾ç„¶è¿˜æ˜¯ä¸å¤Ÿâ€œè‡ªç„¶â€ã€‚</p><p>ä¸è¿‡ï¼Œåªéœ€è¦é¢å¤–åŠ ä¸€ç‚¹æ¨¡æ¿ä»£ç ï¼Œå°±èƒ½å®ç°è¿™ä¸€è¡Œä¸ºã€‚åœ¨æˆ‘ä»¬ç›®å‰ç»™å‡ºçš„å®ç°é‡Œï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªæ„é€ å‡½æ•°å³å¯â€”â€”è¿™ä¹Ÿç®—æ˜¯æˆ‘ä»¬è®©èµ‹å€¼å‡½æ•°åˆ©ç”¨æ„é€ å‡½æ•°çš„å¥½å¤„äº†ã€‚</p><pre><code class=\"language-c++\">  template &lt;typename U&gt;\n  smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)\n  {\n    ptr_ = other.release();\n  }\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬è‡ªç„¶è€Œç„¶åˆ©ç”¨äº†æŒ‡é’ˆçš„è½¬æ¢ç‰¹æ€§ï¼šç°åœ¨ <code>smart_ptr&lt;circle&gt;</code> å¯ä»¥ç§»åŠ¨ç»™ <code>smart_ptr&lt;shape&gt;</code>ï¼Œä½†ä¸èƒ½ç§»åŠ¨ç»™ <code>smart_ptr&lt;triangle&gt;</code>ã€‚ä¸æ­£ç¡®çš„è½¬æ¢ä¼šåœ¨ä»£ç ç¼–è¯‘æ—¶ç›´æ¥æŠ¥é”™ã€‚</p><p>éœ€è¦æ³¨æ„ï¼Œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚å¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ <code>= delete</code> äº†ï¼ˆè§â€œæ‹·è´æ„é€ å’Œèµ‹å€¼â€ä¸€èŠ‚ï¼‰ã€‚ä¸è¿‡ï¼Œæ›´é€šç”¨çš„æ–¹å¼ä»ç„¶æ˜¯åŒæ—¶å®šä¹‰æ ‡å‡†çš„æ‹·è´/ç§»åŠ¨æ„é€ å‡½æ•°å’Œæ‰€éœ€çš„æ¨¡æ¿æ„é€ å‡½æ•°ã€‚ä¸‹é¢çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆé‡Œæˆ‘ä»¬å°±éœ€è¦è¿™ä¹ˆåšã€‚</p><p>è‡³äºééšå¼çš„è½¬æ¢ï¼Œå› ä¸ºæœ¬æ¥å°±æ˜¯è¦å†™ç‰¹æ®Šçš„è½¬æ¢å‡½æ•°çš„ï¼Œæˆ‘ä»¬ç•™åˆ°è¿™ä¸€è®²çš„æœ€åå†è®¨è®ºã€‚</p><h2>å¼•ç”¨è®¡æ•°</h2><p><code>unique_ptr</code> ç®—æ˜¯ä¸€ç§è¾ƒä¸ºå®‰å…¨çš„æ™ºèƒ½æŒ‡é’ˆäº†ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªå¯¹è±¡åªèƒ½è¢«å•ä¸ª <code>unique_ptr</code> æ‰€æ‹¥æœ‰ï¼Œè¿™æ˜¾ç„¶ä¸èƒ½æ»¡è¶³æ‰€æœ‰ä½¿ç”¨åœºåˆçš„éœ€æ±‚ã€‚ä¸€ç§å¸¸è§çš„æƒ…å†µæ˜¯ï¼Œå¤šä¸ªæ™ºèƒ½æŒ‡é’ˆåŒæ—¶æ‹¥æœ‰ä¸€ä¸ªå¯¹è±¡ï¼›å½“å®ƒä»¬å…¨éƒ¨éƒ½å¤±æ•ˆæ—¶ï¼Œè¿™ä¸ªå¯¹è±¡ä¹ŸåŒæ—¶ä¼šè¢«åˆ é™¤ã€‚è¿™ä¹Ÿå°±æ˜¯ <code>shared_ptr</code> äº†ã€‚</p><p><code>unique_ptr</code> å’Œ <code>shared_ptr</code> çš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/07/c8/072fc41e503d22c3ab2bf6a3801903c8.png?wh=1200*500\" alt=\"\"></p><p>å¤šä¸ªä¸åŒçš„ <code>shared_ptr</code> ä¸ä»…å¯ä»¥å…±äº«ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨å…±äº«åŒä¸€å¯¹è±¡æ—¶ä¹Ÿéœ€è¦åŒæ—¶å…±äº«åŒä¸€ä¸ªè®¡æ•°ã€‚å½“æœ€åä¸€ä¸ªæŒ‡å‘å¯¹è±¡ï¼ˆå’Œå…±äº«è®¡æ•°ï¼‰çš„ <code>shared_ptr</code> ææ„æ—¶ï¼Œå®ƒéœ€è¦åˆ é™¤å¯¹è±¡å’Œå…±äº«è®¡æ•°ã€‚æˆ‘ä»¬ä¸‹é¢å°±æ¥å®ç°ä¸€ä¸‹ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥å†™å‡ºå…±äº«è®¡æ•°çš„æ¥å£ï¼š</p><pre><code class=\"language-c++\">class shared_count {\npublic:\n  shared_count();\n  void add_count();\n  long reduce_count();\n  long get_count() const;\n};\n</code></pre><p>è¿™ä¸ª <code>shared_count</code> ç±»é™¤æ„é€ å‡½æ•°ä¹‹å¤–æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼šä¸€ä¸ªå¢åŠ è®¡æ•°ï¼Œä¸€ä¸ªå‡å°‘è®¡æ•°ï¼Œä¸€ä¸ªè·å–è®¡æ•°ã€‚æ³¨æ„ä¸Šé¢çš„æ¥å£å¢åŠ è®¡æ•°ä¸éœ€è¦è¿”å›è®¡æ•°å€¼ï¼›ä½†å‡å°‘è®¡æ•°æ—¶éœ€è¦è¿”å›è®¡æ•°å€¼ï¼Œä»¥ä¾›è°ƒç”¨è€…åˆ¤æ–­æ˜¯å¦å®ƒå·²ç»æ˜¯æœ€åä¸€ä¸ªæŒ‡å‘å…±äº«è®¡æ•°çš„ <code>shared_ptr</code> äº†ã€‚ç”±äºçœŸæ­£å¤šçº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ°æˆ‘ä»¬ç›®å‰è¿˜æ²¡å­¦åˆ°çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ç›®å‰å…ˆå®ç°ä¸€ä¸ªç®€å•åŒ–çš„ç‰ˆæœ¬ï¼š</p><pre><code class=\"language-c++\">class shared_count {\npublic:\n  shared_count() : count_(1) {}\n  void add_count()\n  {\n    ++count_;\n  }\n  long reduce_count()\n  {\n    return --count_;\n  }\n  long get_count() const\n  {\n    return count_;\n  }\n\nprivate:\n  long count_;\n};\n</code></pre><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å®ç°æˆ‘ä»¬çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆäº†ã€‚é¦–å…ˆæ˜¯æ„é€ å‡½æ•°ã€ææ„å‡½æ•°å’Œç§æœ‰æˆå‘˜å˜é‡ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nclass smart_ptr {\npublic:\n  explicit smart_ptr(T* ptr = nullptr)\n    : ptr_(ptr)\n  {\n    if (ptr) {\n      shared_count_ =\n        new shared_count();\n    }\n  }\n  ~smart_ptr()\n  {\n    if (ptr_ &amp;&amp;\n      !shared_count_\n         -&gt;reduce_count()) {\n      delete ptr_;\n      delete shared_count_;\n    }\n  }\n\nprivate:\n  T* ptr_;\n  shared_count* shared_count_;\n};\n</code></pre><p>æ„é€ å‡½æ•°è·Ÿä¹‹å‰çš„ä¸»è¦ä¸åŒç‚¹æ˜¯ä¼šæ„é€ ä¸€ä¸ª <code>shared_count</code> å‡ºæ¥ã€‚ææ„å‡½æ•°åœ¨çœ‹åˆ° <code>ptr_</code> éç©ºæ—¶ï¼ˆæ­¤æ—¶æ ¹æ®ä»£ç é€»è¾‘ï¼Œ<code>shared_count</code> ä¹Ÿå¿…ç„¶éç©ºï¼‰ï¼Œéœ€è¦å¯¹å¼•ç”¨æ•°å‡ä¸€ï¼Œå¹¶åœ¨å¼•ç”¨æ•°é™åˆ°é›¶æ—¶å½»åº•åˆ é™¤å¯¹è±¡å’Œå…±äº«è®¡æ•°ã€‚åŸç†å°±æ˜¯è¿™æ ·ï¼Œä¸å¤æ‚ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜æœ‰äº›ç»†èŠ‚è¦å¤„ç†ã€‚ä¸ºäº†æ–¹ä¾¿å®ç°èµ‹å€¼ï¼ˆåŠå…¶ä»–ä¸€äº›æƒ¯ç”¨æ³•ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„ <code>swap</code> æˆå‘˜å‡½æ•°ï¼š</p><pre><code class=\"language-c++\">  void swap(smart_ptr&amp; rhs)\n  {\n    using std::swap;\n    swap(ptr_, rhs.ptr_);\n    swap(shared_count_,\n         rhs.shared_count_);\n  }\n</code></pre><p>èµ‹å€¼å‡½æ•°å¯ä»¥è·Ÿå‰é¢ä¸€æ ·ï¼Œä¿æŒä¸å˜ï¼Œä½†æ‹·è´æ„é€ å’Œç§»åŠ¨æ„é€ å‡½æ•°æ˜¯éœ€è¦æ›´æ–°ä¸€ä¸‹çš„ï¼š</p><pre><code class=\"language-c++\">  smart_ptr(const smart_ptr&amp; other)\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      other.shared_count_\n        -&gt;add_count();\n      shared_count_ =\n        other.shared_count_;\n    }\n  }\n  template &lt;typename U&gt;\n  smart_ptr(const smart_ptr&lt;U&gt;&amp; other)\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      other.shared_count_\n        -&gt;add_count();\n      shared_count_ =\n        other.shared_count_;\n    }\n  }\n  template &lt;typename U&gt;\n  smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      shared_count_ =\n        other.shared_count_;\n      other.ptr_ = nullptr;\n    }\n  }\n</code></pre><p>é™¤å¤åˆ¶æŒ‡é’ˆä¹‹å¤–ï¼Œå¯¹äºæ‹·è´æ„é€ çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦åœ¨æŒ‡é’ˆéç©ºæ—¶æŠŠå¼•ç”¨æ•°åŠ ä¸€ï¼Œå¹¶å¤åˆ¶å…±äº«è®¡æ•°çš„æŒ‡é’ˆã€‚å¯¹äºç§»åŠ¨æ„é€ çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¸éœ€è¦è°ƒæ•´å¼•ç”¨æ•°ï¼Œç›´æ¥æŠŠ <code>other.ptr_</code> ç½®ä¸ºç©ºï¼Œè®¤ä¸º <code>other</code> ä¸å†æŒ‡å‘è¯¥å…±äº«å¯¹è±¡å³å¯ã€‚</p><p>ä¸è¿‡ï¼Œä¸Šé¢çš„ä»£ç æœ‰ä¸ªé—®é¢˜ï¼šå®ƒä¸èƒ½æ­£ç¡®ç¼–è¯‘ã€‚ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œåƒï¼š</p><blockquote>\n<p>fatal error: â€˜ptr_â€™ is a private member of â€˜smart_ptr&lt;circle&gt;â€™</p>\n</blockquote><p>é”™è¯¯åŸå› æ˜¯æ¨¡æ¿çš„å„ä¸ªå®ä¾‹é—´å¹¶ä¸å¤©ç„¶å°±æœ‰ friend å…³ç³»ï¼Œå› è€Œä¸èƒ½äº’è®¿ç§æœ‰æˆå‘˜ <code>ptr_</code> å’Œ <code>shared_count_</code>ã€‚æˆ‘ä»¬éœ€è¦åœ¨ <code>smart_ptr</code> çš„å®šä¹‰ä¸­æ˜¾å¼å£°æ˜ï¼š</p><pre><code class=\"language-c++\">  template &lt;typename U&gt;\n  friend class smart_ptr;\n</code></pre><p>æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹‹å‰çš„å®ç°ï¼ˆç±»ä¼¼äºå•ä¸€æ‰€æœ‰æƒçš„ <code>unique_ptr</code> ï¼‰ä¸­ç”¨ <code>release</code> æ¥æ‰‹å·¥é‡Šæ”¾æ‰€æœ‰æƒã€‚åœ¨ç›®å‰çš„å¼•ç”¨è®¡æ•°å®ç°ä¸­ï¼Œå®ƒå°±ä¸å¤ªåˆé€‚äº†ï¼Œåº”å½“åˆ é™¤ã€‚ä½†æˆ‘ä»¬è¦åŠ ä¸€ä¸ªå¯¹è°ƒè¯•éå¸¸æœ‰ç”¨çš„å‡½æ•°ï¼Œè¿”å›å¼•ç”¨è®¡æ•°å€¼ã€‚å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">  long use_count() const\n  {\n    if (ptr_) {\n      return shared_count_\n        -&gt;get_count();\n    } else {\n      return 0;\n    }\n  }\n</code></pre><p>è¿™å°±å·®ä¸å¤šæ˜¯ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆçš„å®ç°äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¥éªŒè¯ä¸€ä¸‹å®ƒçš„åŠŸèƒ½æ­£å¸¸ï¼š</p><pre><code class=\"language-c++\">class shape {\npublic:\n  virtual ~shape() {}\n};\n\nclass circle : public shape {\npublic:\n  ~circle() { puts(\"~circle()\"); }\n};\n\nint main()\n{\n  smart_ptr&lt;circle&gt; ptr1(new circle());\n  printf(\"use count of ptr1 is %ld\\n\",\n         ptr1.use_count());\n  smart_ptr&lt;shape&gt; ptr2;\n  printf(\"use count of ptr2 was %ld\\n\",\n         ptr2.use_count());\n  ptr2 = ptr1;\n  printf(\"use count of ptr2 is now %ld\\n\",\n         ptr2.use_count());\n  if (ptr1) {\n    puts(\"ptr1 is not empty\");\n  }\n}\n</code></pre><p>è¿™æ®µä»£ç çš„è¿è¡Œç»“æœæ˜¯ï¼š</p><blockquote>\n<p><code>use count of ptr1 is 1</code><br>\n<code>use count of ptr2 was 0</code><br>\n<code>use count of ptr2 is now 2</code><br>\n<code>ptr1 is not empty</code><br>\n<code>~circle()</code></p>\n</blockquote><p>ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¼•ç”¨è®¡æ•°çš„å˜åŒ–ï¼Œä»¥åŠæœ€åå¯¹è±¡è¢«æˆåŠŸåˆ é™¤ã€‚</p><h2>æŒ‡é’ˆç±»å‹è½¬æ¢</h2><p>å¯¹åº”äº C++ é‡Œçš„ä¸åŒçš„ç±»å‹å¼ºåˆ¶è½¬æ¢ï¼š</p><ul>\n<li>static_cast</li>\n<li>reinterpret_cast</li>\n<li>const_cast</li>\n<li>dynamic_cast</li>\n</ul><p>æ™ºèƒ½æŒ‡é’ˆéœ€è¦å®ç°ç±»ä¼¼çš„å‡½æ•°æ¨¡æ¿ã€‚å®ç°æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œä½†ä¸ºäº†å®ç°è¿™äº›è½¬æ¢ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æ„é€ å‡½æ•°ï¼Œå…è®¸åœ¨å¯¹æ™ºèƒ½æŒ‡é’ˆå†…éƒ¨çš„æŒ‡é’ˆå¯¹è±¡èµ‹å€¼æ—¶ï¼Œä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ™ºèƒ½æŒ‡é’ˆçš„å…±äº«è®¡æ•°ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class=\"language-c++\">  template &lt;typename U&gt;\n  smart_ptr(const smart_ptr&lt;U&gt;&amp; other,\n            T* ptr)\n  {\n    ptr_ = ptr;\n    if (ptr_) {\n      other.shared_count_\n        -&gt;add_count();\n      shared_count_ =\n        other.shared_count_;\n    }\n  }\n</code></pre><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®ç°è½¬æ¢æ‰€éœ€çš„å‡½æ•°æ¨¡æ¿äº†ã€‚ä¸‹é¢å®ç°ä¸€ä¸ª <code>dynamic_pointer_cast</code> æ¥ç¤ºä¾‹ä¸€ä¸‹ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T, typename U&gt;\nsmart_ptr&lt;T&gt; dynamic_pointer_cast(\n  const smart_ptr&lt;U&gt;&amp; other)\n{\n  T* ptr =\n    dynamic_cast&lt;T*&gt;(other.get());\n  return smart_ptr&lt;T&gt;(other, ptr);\n}\n</code></pre><p>åœ¨å‰é¢çš„éªŒè¯ä»£ç åé¢æˆ‘ä»¬å¯ä»¥åŠ ä¸Šï¼š</p><pre><code class=\"language-c++\">  smart_ptr&lt;circle&gt; ptr3 =\n    dynamic_pointer_cast&lt;circle&gt;(ptr2);\n  printf(\"use count of ptr3 is %ld\\n\",\n         ptr3.use_count());\n</code></pre><p>ç¼–è¯‘ä¼šæ­£å¸¸é€šè¿‡ï¼ŒåŒæ—¶èƒ½åœ¨è¾“å‡ºé‡Œçœ‹åˆ°ä¸‹é¢çš„ç»“æœï¼š</p><blockquote>\n<p>use count of ptr3 is 3</p>\n</blockquote><p>æœ€åï¼Œå¯¹è±¡ä»ç„¶èƒ½å¤Ÿè¢«æ­£ç¡®åˆ é™¤ã€‚è¿™è¯´æ˜æˆ‘ä»¬çš„å®ç°æ˜¯æ­£ç¡®çš„ã€‚</p><h2>ä»£ç åˆ—è¡¨</h2><p>ä¸ºäº†æ–¹ä¾¿ä½ å‚è€ƒï¼Œä¸‹é¢æˆ‘ç»™å‡ºäº†ä¸€ä¸ªå®Œæ•´çš„ <code>smart_ptr</code> ä»£ç åˆ—è¡¨ï¼š</p><pre><code class=\"language-c++\">#include &lt;utility&gt;  // std::swap\n\nclass shared_count {\npublic:\n  shared_count() noexcept\n    : count_(1) {}\n  void add_count() noexcept\n  {\n    ++count_;\n  }\n  long reduce_count() noexcept\n  {\n    return --count_;\n  }\n  long get_count() const noexcept\n  {\n    return count_;\n  }\n\nprivate:\n  long count_;\n};\n\ntemplate &lt;typename T&gt;\nclass smart_ptr {\npublic:\n  template &lt;typename U&gt;\n  friend class smart_ptr;\n\n  explicit smart_ptr(T* ptr = nullptr)\n    : ptr_(ptr)\n  {\n    if (ptr) {\n      shared_count_ =\n        new shared_count();\n    }\n  }\n  ~smart_ptr()\n  {\n    if (ptr_ &amp;&amp;\n      !shared_count_\n         -&gt;reduce_count()) {\n      delete ptr_;\n      delete shared_count_;\n    }\n  }\n\n  smart_ptr(const smart_ptr&amp; other)\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      other.shared_count_\n        -&gt;add_count();\n      shared_count_ =\n        other.shared_count_;\n    }\n  }\n  template &lt;typename U&gt;\n  smart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      other.shared_count_-&gt;add_count();\n      shared_count_ = other.shared_count_;\n    }\n  }\n  template &lt;typename U&gt;\n  smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      shared_count_ =\n        other.shared_count_;\n      other.ptr_ = nullptr;\n    }\n  }\n  template &lt;typename U&gt;\n  smart_ptr(const smart_ptr&lt;U&gt;&amp; other,\n            T* ptr) noexcept\n  {\n    ptr_ = ptr;\n    if (ptr_) {\n      other.shared_count_\n        -&gt;add_count();\n      shared_count_ =\n        other.shared_count_;\n    }\n  }\n  smart_ptr&amp;\n  operator=(smart_ptr rhs) noexcept\n  {\n    rhs.swap(*this);\n    return *this;\n  }\n\n  T* get() const noexcept\n  {\n    return ptr_;\n  }\n  long use_count() const noexcept\n  {\n    if (ptr_) {\n      return shared_count_\n        -&gt;get_count();\n    } else {\n      return 0;\n    }\n  }\n  void swap(smart_ptr&amp; rhs) noexcept\n  {\n    using std::swap;\n    swap(ptr_, rhs.ptr_);\n    swap(shared_count_,\n         rhs.shared_count_);\n  }\n\n  T&amp; operator*() const noexcept\n  {\n    return *ptr_;\n  }\n  T* operator-&gt;() const noexcept\n  {\n    return ptr_;\n  }\n  operator bool() const noexcept\n  {\n    return ptr_;\n  }\n\nprivate:\n  T* ptr_;\n  shared_count* shared_count_;\n};\n\ntemplate &lt;typename T&gt;\nvoid swap(smart_ptr&lt;T&gt;&amp; lhs,\n          smart_ptr&lt;T&gt;&amp; rhs) noexcept\n{\n  lhs.swap(rhs);\n}\n\ntemplate &lt;typename T, typename U&gt;\nsmart_ptr&lt;T&gt; static_pointer_cast(\n  const smart_ptr&lt;U&gt;&amp; other) noexcept\n{\n  T* ptr = static_cast&lt;T*&gt;(other.get());\n  return smart_ptr&lt;T&gt;(other, ptr);\n}\n\ntemplate &lt;typename T, typename U&gt;\nsmart_ptr&lt;T&gt; reinterpret_pointer_cast(\n  const smart_ptr&lt;U&gt;&amp; other) noexcept\n{\n  T* ptr = reinterpret_cast&lt;T*&gt;(other.get());\n  return smart_ptr&lt;T&gt;(other, ptr);\n}\n\ntemplate &lt;typename T, typename U&gt;\nsmart_ptr&lt;T&gt; const_pointer_cast(\n  const smart_ptr&lt;U&gt;&amp; other) noexcept\n{\n  T* ptr = const_cast&lt;T*&gt;(other.get());\n  return smart_ptr&lt;T&gt;(other, ptr);\n}\n\ntemplate &lt;typename T, typename U&gt;\nsmart_ptr&lt;T&gt; dynamic_pointer_cast(\n  const smart_ptr&lt;U&gt;&amp; other) noexcept\n{\n  T* ptr = dynamic_cast&lt;T*&gt;(other.get());\n  return smart_ptr&lt;T&gt;(other, ptr);\n}\n</code></pre><p>å¦‚æœä½ è¶³å¤Ÿç»†å¿ƒçš„è¯ï¼Œä½ ä¼šå‘ç°æˆ‘åœ¨ä»£ç é‡ŒåŠ äº†ä¸å°‘ <code>noexcept</code>ã€‚è¿™å¯¹è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆåœ¨å®ƒçš„ç›®æ ‡åœºæ™¯èƒ½æ­£ç¡®ä½¿ç”¨æ˜¯ååˆ†å¿…è¦çš„ã€‚æˆ‘ä»¬ä¼šåœ¨ä¸‹é¢çš„å‡ è®²é‡Œå›åˆ°è¿™ä¸ªè¯é¢˜ã€‚</p><h2>å†…å®¹å°ç»“</h2><p>è¿™ä¸€è®²æˆ‘ä»¬ä» <code>shape_wrapper</code> å‡ºå‘ï¼Œå®ç°äº†ä¸€ä¸ªåŸºæœ¬å®Œæ•´çš„å¸¦å¼•ç”¨è®¡æ•°çš„æ™ºèƒ½æŒ‡é’ˆã€‚è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆè·Ÿæ ‡å‡†çš„ <code>shared_ptr</code> æ¯”ï¼Œè¿˜ç¼ºäº†ä¸€äº›ä¸œè¥¿ï¼ˆè§å‚è€ƒèµ„æ–™ <span class=\"orange\">[2]</span>ï¼‰ï¼Œä½†æ—¥å¸¸ç”¨åˆ°çš„æ™ºèƒ½æŒ‡é’ˆåŠŸèƒ½å·²ç»åŒ…å«åœ¨å†…ã€‚ç°åœ¨ï¼Œä½ åº”å½“å·²ç»å¯¹æ™ºèƒ½æŒ‡é’ˆæœ‰ä¸€ä¸ªè¾ƒä¸ºæ·±å…¥çš„ç†è§£äº†ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>è¿™é‡Œç•™å‡ ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼š</p><ol>\n<li>ä¸æŸ¥é˜… <code>shared_ptr</code> çš„æ–‡æ¡£ï¼Œä½ è§‰å¾—ç›®å‰ <code>smart_ptr</code> åº”å½“æ·»åŠ ä»€ä¹ˆåŠŸèƒ½å—ï¼Ÿ</li>\n<li>ä½ æƒ³åˆ°çš„åŠŸèƒ½åœ¨æ ‡å‡†çš„ <code>shared_ptr</code> é‡Œå—ï¼Ÿ</li>\n<li>ä½ è§‰å¾—æ™ºèƒ½æŒ‡é’ˆåº”è¯¥æ»¡è¶³ä»€ä¹ˆæ ·çš„çº¿ç¨‹å®‰å…¨æ€§ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘äº¤æµä½ çš„çœ‹æ³•ã€‚</p><h2><span class=\"reference\">å‚è€ƒèµ„æ–™</span></h2><p><span class=\"reference\">[1] Stack Overflow, GManNickGâ€™s answer to â€œWhat is the copy-and-swap idiom?â€. <a href=\"https://stackoverflow.com/a/3279550/816999\">https://stackoverflow.com/a/3279550/816999</a> </span></p><p><span class=\"reference\">[2] cppreference.com, â€œstd::shared_ptrâ€. <a href=\"https://en.cppreference.com/w/cpp/memory/shared_ptr\">https://en.cppreference.com/w/cpp/memory/shared_ptr</a> </span></p>","comments":[{"had_liked":false,"id":155795,"user_name":"frazer","can_delete":false,"product_type":"c1","uid":1194427,"ip_address":"","ucode":"36869573D98495","user_header":"https://static001.geekbang.org/account/avatar/00/12/39/bb/3dd9ef18.jpg","comment_is_top":false,"comment_ctime":1574757933,"is_pvip":false,"replies":[{"id":59877,"content":"æ²¡å…³ç³»ã€‚æˆ‘æ‰“èµŒä½ çœ‹çš„æ—¶é—´è‚¯å®šæ²¡æˆ‘å†™ç¨¿çš„æ—¶é—´é•¿ã€‚ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574765427,"ip_address":"","comment_id":155795,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æœ‰ç‚¹åƒåŠ›äº†ï¼Œå¾—åå¤çœ‹å‡ é","like_count":115},{"had_liked":false,"id":155906,"user_name":"yuchen","can_delete":false,"product_type":"c1","uid":1605025,"ip_address":"","ucode":"D4B55B57D218CB","user_header":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","comment_is_top":false,"comment_ctime":1574777231,"is_pvip":false,"replies":[{"id":59924,"content":"è°¢è°¢ã€‚\n\nã€ŠProfessional C++ã€‹ä¹‹å‰æ²¡çœ‹è¿‡ï¼Œæ‰«äº†ä¸¤çœ¼ï¼Œè§‰å¾—å†…å®¹ä¸é”™ï¼Œæ¨èã€‚å†…å®¹è¿˜æŒºå¤šæŒºæ·±çš„ï¼Œé€‚åˆå†³å¿ƒåœ¨ C++ ä¸Šæ·±å…¥çš„åŒå­¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574813297,"ip_address":"","comment_id":155906,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æœ‰æ·±åº¦çš„ä¸“æ ï¼Œä¸é”™ã€‚å¸‚é¢ä¸Šè®²è§£C++çš„è¯¾ç¨‹ä¸€èˆ¬å¤ªåŸºç¡€äº†ã€‚è¿™ä¸€ç« æ¨èè¯»è€…å¯ä»¥çœ‹çœ‹ã€ŠProfessional Cï¼‹ï¼‹ 4th editionã€‹ç¬¬ä¹ç« ã€‚","like_count":37,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475875,"discussion_content":"æ²¡å…³ç³»ã€‚æˆ‘æ‰“èµŒä½ çœ‹çš„æ—¶é—´è‚¯å®šæ²¡æˆ‘å†™ç¨¿çš„æ—¶é—´é•¿ã€‚ğŸ˜","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1574765427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346028,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKSCRYv3q4f08a3JZjZd4Dpf2IL0g4mkQ9WtcAM3zcCZsA8r9GMpcUmsXGueVMibtJBxXDNGKx75rA/132","nickname":"dasheyuan","note":"","ucode":"AD61112AB070DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62481,"discussion_content":"å·²ç»ç¬¬3éäº†ã€‚å‚¬æ›´....","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574846673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132347,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/3b/15e4490f.jpg","nickname":"ç››è‰³æ˜","note":"","ucode":"E4C1C699572C44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68171,"discussion_content":"å†ä¸€ç‚¹ç‚¹çš„å•ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575205061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1151971,"avatar":"https://static001.geekbang.org/account/avatar/00/11/93/e3/da819340.jpg","nickname":"é©¬ä»”","note":"","ucode":"75760150602EA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1132347,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/3b/15e4490f.jpg","nickname":"ç››è‰³æ˜","note":"","ucode":"E4C1C699572C44","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100513,"discussion_content":"æ˜¯çš„å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577265883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":68171,"ip_address":"","group_id":0},"score":100513,"extra":""}]}]},{"had_liked":false,"id":157236,"user_name":"çš“é¦–ä¸å€¦","can_delete":false,"product_type":"c1","uid":1144626,"ip_address":"","ucode":"FA7D282DD40D83","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/32/02416d97.jpg","comment_is_top":false,"comment_ctime":1575094017,"is_pvip":false,"replies":[{"id":60316,"content":"è¿™æ˜¯ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„ã€ç”šè‡³æœ‰ç‚¹æ¼äººçš„æƒ…å†µã€‚å¦‚æœæ²¡æœ‰éæ³›å‹ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨çœ‹åˆ°æ²¡æœ‰æ‹·è´æ„é€ å‡½æ•°ï¼Œä¼šç”Ÿæˆä¸€ä¸ªç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ã€‚è¿™æ ·ï¼ŒåŒæ ·ç±»å‹çš„smart_ptrçš„æ‹·è´æ„é€ ä¼šæ˜¯é”™è¯¯çš„ã€‚â€œå­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢â€è¿™ä¸€èŠ‚é‡Œæˆ‘ä¹Ÿæåˆ°äº†è¿™ç‚¹ã€‚è¿™ä¸æ˜¯æˆ‘è®²æ™ºèƒ½æŒ‡é’ˆæƒ³è®²çš„å†…å®¹ï¼Œæ‰€ä»¥å°±æ·¡åŒ–äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575108945,"ip_address":"","comment_id":157236,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®ä¸‹è€å¸ˆsmart ptr çš„æ‹·è´æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆæœ‰ä¸€ä¸ªæ³›å‹ç‰ˆæœ¬ è¿˜æœ‰ä¸€ä¸ªéæ³›å‹ç‰ˆæœ¬ ä½†æ˜¯å‡½æ•°ä½“å†…å®¹åˆä¸€æ¨¡ä¸€æ · ä¸æ˜¯ä»£ç å†—ä½™çš„å— æ˜¯æœ‰ä»€ä¹ˆç‰¹æ®Šè®¾è®¡æ„å›¾å— è¯·è€å¸ˆæŒ‡æ•™ä¸‹","like_count":35,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475920,"discussion_content":"è°¢è°¢ã€‚\n\nã€ŠProfessional C++ã€‹ä¹‹å‰æ²¡çœ‹è¿‡ï¼Œæ‰«äº†ä¸¤çœ¼ï¼Œè§‰å¾—å†…å®¹ä¸é”™ï¼Œæ¨èã€‚å†…å®¹è¿˜æŒºå¤šæŒºæ·±çš„ï¼Œé€‚åˆå†³å¿ƒåœ¨ C++ ä¸Šæ·±å…¥çš„åŒå­¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574813297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1949454,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/bf/0e/0e6419a9.jpg","nickname":"è–›ç‘","note":"","ucode":"FE634CB0C1BAEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257474,"discussion_content":"è¿™æœ¬ä¹¦å¢™è£‚æ¨èå•Šï¼Œæœ‰ä¸­æ–‡ç‰ˆï¼ŒC++é«˜çº§ç¼–ç¨‹ï¼Œç›¸å½“ç»™åŠ›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588574962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2557701,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Wjsc175urqxxBcCsxSDG5iaWcEq4hIg4SCCVJCIC108Ul5l7US4iaE3iaaMWodSJeybGemicEnfetHFCj9P6QI17xw/132","nickname":"Geek_15f2c9","note":"","ucode":"3AA686B1D31AB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365823,"discussion_content":"æœ‰ç”µå­ç‰ˆå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617888262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1760853,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/de/55/d690fe48.jpg","nickname":"è¥¿åŸŸé»‘é¸¦","note":"","ucode":"D1B8BE1AF4699E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104406,"discussion_content":"å“ªé‡Œå¯ä»¥ä¹°åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577431633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1055296,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","nickname":"ä¸­å±±æµªå­","note":"","ucode":"25D0F8462473D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1760853,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/de/55/d690fe48.jpg","nickname":"è¥¿åŸŸé»‘é¸¦","note":"","ucode":"D1B8BE1AF4699E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606194,"discussion_content":"ç°åœ¨æœ‰ç¬¬äº”ç‰ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677027229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104406,"ip_address":"ä¸Šæµ·","group_id":0},"score":606194,"extra":""}]}]},{"had_liked":false,"id":155667,"user_name":"æµæµªåœ°çƒ","can_delete":false,"product_type":"c1","uid":1498137,"ip_address":"","ucode":"25210DCD353F97","user_header":"https://static001.geekbang.org/account/avatar/00/16/dc/19/c058bcbf.jpg","comment_is_top":false,"comment_ctime":1574734740,"is_pvip":false,"replies":[{"id":59858,"content":"å˜»å˜»ï¼Œæˆ‘åœ¨å·å·åœ°å¡è¿›C++11çš„è¯­æ³•ã€‚å¯¹è±¡åˆå§‹åŒ–å¯ä»¥ç»Ÿä¸€ç”¨å¤§æ‹¬å·ã€‚ï¼ˆå°æ‹¬å·è¿™å„¿ä¹Ÿè¡Œã€‚ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574762471,"ip_address":"","comment_id":155667,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œé—®ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€çš„é—®é¢˜ï¼Œæˆ‘ç†è§£è¿™ä¸ªè¯­å¥\nsmart_ptr&lt;shape&gt;  ptr1{create_shape(shape_type::circle)};  æ˜¯è°ƒç”¨ptr1çš„æ‹·è´æ„é€ å‡½æ•°ã€‚\nä¸ºä»€ä¹ˆ{create_shape(shape_type::circle)}æ˜¯ä½¿ç”¨å¤§æ‹¬å·ï¼Œä¸åº”è¯¥æ˜¯å°æ‹¬å·å—ï¼Ÿ\nè°¢è°¢\n","like_count":32,"discussions":[{"author":{"id":1422582,"avatar":"https://static001.geekbang.org/account/avatar/00/15/b4/f6/735673f7.jpg","nickname":"W.jyao","note":"","ucode":"C57B3A78B6A795","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60732,"discussion_content":"è°ƒç”¨æ„é€ å‡½æ•°ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1574749842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475823,"discussion_content":"å˜»å˜»ï¼Œæˆ‘åœ¨å·å·åœ°å¡è¿›C++11çš„è¯­æ³•ã€‚å¯¹è±¡åˆå§‹åŒ–å¯ä»¥ç»Ÿä¸€ç”¨å¤§æ‹¬å·ã€‚ï¼ˆå°æ‹¬å·è¿™å„¿ä¹Ÿè¡Œã€‚ï¼‰","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574762471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1911448,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCBR2aB7H8ic3FalKn9x1lXg83KmgYqTznCByz3nZjd9CXLTiaFo22piafibJd04p7jKiblyUic6Eo22esA/132","nickname":"è°Œé¹é£","note":"","ucode":"AC8D00E3E18D49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219630,"discussion_content":"è¿™ä¸ªä¹Ÿæ˜¯ååº”äº†ä¸€ä¼šå„¿æ‰çŸ¥é“æ˜¯c11çš„è¯­æ³•çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585790324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547048,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9b/28/9d89de4d.jpg","nickname":"æš’","note":"","ucode":"9C956F418C66BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85653,"discussion_content":"æ˜¯å‘€ï¼Œçœ‹äº†åŠå¤©æˆ‘æ‰æƒ³èµ·æ¥11 çš„ç”¨å¤§æ‹¬å·è¿›è¡Œå¯¹è±¡åˆå§‹åŒ–","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576563112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1609948,"avatar":"https://static001.geekbang.org/account/avatar/00/18/90/dc/44ce2f23.jpg","nickname":"æ°•æ°˜æ°š","note":"","ucode":"6B5477BF23AA4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577821,"discussion_content":"åˆå§‹åŒ–åˆ—è¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656372605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156428,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1574869941,"is_pvip":false,"replies":[{"id":60072,"content":"3. èµ‹å€¼éœ€è¦ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯å¼•ç”¨ï¼‰ï¼Œå› è€Œåœ¨è¿›å…¥æ‰§è¡Œå‰å°±è¦å¼•å‘ä¸€ä¸ªæ„é€ ã€‚æ²¡æœ‰åˆé€‚çš„æ„é€ å‡½æ•°å¯ç”¨ã€‚\n\n4. åŒæ ·ï¼Œè¦å…ˆæ„é€ ã€‚è¿™å›å¯ä»¥ç”¨å³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574899310,"ip_address":"","comment_id":156428,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆè¿™å—æ²¡æƒ³æ˜ç™½\n&#47;&#47; 1ã€è°ƒç”¨æ„é€ å‡½æ•°\nsmart_ptr ptr1{create_shape(shape_type::circle)};\n\n&#47;&#47; 2ã€å› ä¸ºæ‹·è´æ„é€ è¢«ç¦ç”¨ï¼Œéšæ„ç¼–è¯‘å‡ºé”™\nsmart_ptr ptr2{ptr1}; &#47;&#47; ç¼–è¯‘å‡ºé”™\n\nsmart_ptr ptr3;\n\n&#47;&#47; 3ã€æ²¡æ˜ç™½ä¸ºå•¥ä¼šå‡ºé”™\nptr3 = ptr1;        &#47;&#47; ç¼–è¯‘å‡ºé”™\n\n&#47;&#47; 4ã€æ²¡æ˜ç™½ä¸ºå•¥OKï¼Œ=é‡è½½å‡½æ•°çš„å‚æ•°ä¸æ˜¯å³å€¼å¼•ç”¨å‘€\nptr3 = std::move(ptr1); &#47;&#47; OKï¼Œ\n\nè¯·è€å¸ˆæŒ‡å®š 3 ä¸ 4","like_count":27,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476103,"discussion_content":"3. èµ‹å€¼éœ€è¦ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯å¼•ç”¨ï¼‰ï¼Œå› è€Œåœ¨è¿›å…¥æ‰§è¡Œå‰å°±è¦å¼•å‘ä¸€ä¸ªæ„é€ ã€‚æ²¡æœ‰åˆé€‚çš„æ„é€ å‡½æ•°å¯ç”¨ã€‚\n\n4. åŒæ ·ï¼Œè¦å…ˆæ„é€ ã€‚è¿™å›å¯ä»¥ç”¨å³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574899310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007115,"avatar":"","nickname":"Geek_xu324o","note":"","ucode":"F46A5582578A31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350752,"discussion_content":"è¿™é‡Œè™½ç„¶æ˜¯= operatorï¼Œå…¶å®è°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ å‡½æ•°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613998741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1331396,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/c4/71d9745f.jpg","nickname":"é£","note":"","ucode":"48701F74729E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78978,"discussion_content":"æˆ‘ä¹Ÿæœ‰ä¸€ä¸ªç›¸å…³çš„ç–‘é—®ï¼Œè¿™é‡Œçš„å¤åˆ¶æ“ä½œç¬¦å£°æ˜çš„å‚æ•°æ˜¯å€¼ç±»å‹ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚çœ‹äº†std::shared_ptrçš„å£°æ˜æ˜¯å€¼ç±»å‹ã€‚ä½†æ˜¯åœ¨å‡½æ•°å†…éƒ¨ç¡®å®åˆ›å»ºäº†ä¸´æ—¶å¯¹è±¡ç„¶åswapä¹‹ã€‚è¿™é‡Œé€šè¿‡swapå®ç°èµ‹å€¼å’Œmoveæ˜¯ä¸€ä¸ªç‰¹å®šçš„æŠ€å·§å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576041761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1055296,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","nickname":"ä¸­å±±æµªå­","note":"","ucode":"25D0F8462473D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1331396,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/c4/71d9745f.jpg","nickname":"é£","note":"","ucode":"48701F74729E5E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609790,"discussion_content":"é¿å…äº†ç½—å—¦çš„if (this != &amp;rhs) çš„åˆ¤æ–­ï¼Œswapé€šè¿‡ä¸´æ—¶å¯¹è±¡å’Œæˆå‘˜å†…å®¹çš„äº’æ¢ï¼Œè§£å†³äº†å¼‚å¸¸å®‰å…¨çš„æ½œåœ¨é—®é¢˜ã€‚move æ˜¯ä¸ºäº†è°ƒç”¨å³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1679215497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":78978,"ip_address":"ä¸Šæµ·","group_id":0},"score":609790,"extra":""}]}]},{"had_liked":false,"id":156435,"user_name":"yyfx","can_delete":false,"product_type":"c1","uid":1757872,"ip_address":"","ucode":"230A98762BD678","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/vJD2lw7TUwAl0myKy0PiahuEA75EzPER98wLDcxIvtQQaUiasCpIla7TN3dicMiaAkPxtOdsJh3MicpicD7hV1G5ico4A/132","comment_is_top":false,"comment_ctime":1574870963,"is_pvip":false,"replies":[{"id":60108,"content":"å¤šè°¢æŠ“è™«ã€‚æ­£æ–‡å·²æ›´æ–°ã€‚\n\nè¿™ä¹Ÿè¯æ˜äº†ï¼Œä¿®æ”¹ä»£ç ã€æ²¡æœ‰å®Œæ•´æµ‹è¯•ï¼Œæ˜¯ææ˜“æ‹›è™«çš„å•Šâ€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574913802,"ip_address":"","comment_id":156435,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"&quot;ç§»åŠ¨&quot;æŒ‡é’ˆéƒ¨åˆ†æœ‰ä¸ªé—®é¢˜ã€‚åœ¨ä½¿ç”¨æ¨¡æ¿æ³›åŒ–æ‹·è´æ„é€ æ—¶ï¼Œp2=p1ç¼–è¯‘é€šè¿‡ï¼Œç¨‹åºå¼‚å¸¸ã€‚æµ‹è¯•å‘ç°ï¼Œç”±äºæ‹·è´æ„é€ å¹¶æ²¡æœ‰è¢«è‡ªåŠ¨ç¦ç”¨å¯¼è‡´ã€‚æŸ¥äº†ä¸‹èµ„æ–™ï¼Œeffective45æ¡æåˆ°ï¼Œmember templatesä¸å½±å“è¯­è¨€è§„åˆ™ï¼Œå£°æ˜member templatesç”¨äºæ³›åŒ–copyæ„é€ æ—¶ï¼Œè¿˜éœ€è¦å£°æ˜æ­£å¸¸çš„copyæ„é€ ã€‚","like_count":24,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476107,"discussion_content":"å¤šè°¢æŠ“è™«ã€‚æ­£æ–‡å·²æ›´æ–°ã€‚\n\nè¿™ä¹Ÿè¯æ˜äº†ï¼Œä¿®æ”¹ä»£ç ã€æ²¡æœ‰å®Œæ•´æµ‹è¯•ï¼Œæ˜¯ææ˜“æ‹›è™«çš„å•Šâ€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574913802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161612,"user_name":"è´µå­","can_delete":false,"product_type":"c1","uid":1690431,"ip_address":"","ucode":"A94801C05CB07E","user_header":"https://static001.geekbang.org/account/avatar/00/19/cb/3f/3d044d18.jpg","comment_is_top":false,"comment_ctime":1576247919,"is_pvip":false,"replies":[{"id":61594,"content":"ç§»è¿›å»çš„è¯ï¼Œsmart_ptr&lt;circle&gt;::shared_count å’Œ smart_ptr&lt;shape&gt;::shared_count æˆäº†ä¸¤ä¸ªå®Œå…¨ä¸ç›¸å…³çš„ç±»å‹ï¼Œå®ƒä»¬çš„æŒ‡é’ˆï¼ˆåœ¨ä¸åšå¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶ï¼‰ä¹Ÿä¸èƒ½äº’ç›¸èµ‹å€¼ï¼Œä¸å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576313097,"ip_address":"","comment_id":161612,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"ä¸ºä»€ä¹ˆshared_countç±»ä½œä¸ºsmart_ptrçš„å†…éƒ¨ç±»ç¼–è¯‘ä¸è¿‡ï¼Œè€Œå¿…é¡»ä½œä¸ºå¤–éƒ¨ç±»å‘¢ï¼Ÿè€å¸ˆèƒ½è§£é‡Šä¸€ä¸‹å—ï¼Ÿè°¢è°¢ï¼","like_count":18,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476107,"discussion_content":"å¤šè°¢æŠ“è™«ã€‚æ­£æ–‡å·²æ›´æ–°ã€‚\n\nè¿™ä¹Ÿè¯æ˜äº†ï¼Œä¿®æ”¹ä»£ç ã€æ²¡æœ‰å®Œæ•´æµ‹è¯•ï¼Œæ˜¯ææ˜“æ‹›è™«çš„å•Šâ€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574913802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161149,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1576132943,"is_pvip":false,"replies":[{"id":61458,"content":"å¯¹ã€‚\n\nå¦å¤–é¢å¤–åŠ ä¸€ç‚¹ï¼Œè°ƒç”¨ç§»åŠ¨ä¸ä¸€å®šé  moveã€‚å¦‚æœå‡½æ•°è¿”å›ä¸€ä¸ª unique_ptr ä¸€æ ·æ˜¯è‡ªç„¶çš„ç§»åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576140982,"ip_address":"","comment_id":161149,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºå¦‚ä½•ä½¿ç”¨ç§»åŠ¨æ”¹å–„äº† auto_ptr çš„è¡Œä¸ºï¼Œå®ç°äº†ä¸ unique_ptr ç›¸è¿‘çš„è¯­ä¹‰ï¼Œè¿™é‡Œçš„â€œæ”¹å–„â€æ˜¯å¦åº”è¯¥è¿™æ ·ç†è§£ï¼š\n1ï¼Œ åœ¨æ²¡æœ‰å¼•å…¥å³å€¼å¼•ç”¨å’Œç§»åŠ¨æ„é€ çš„æƒ…å†µä¸‹ï¼Œæ„é€ çš„ auto_ptr ä¹Ÿèƒ½å·¥ä½œï¼Œä½†æ˜¯ä¼šä»¤ç”¨æˆ·å›°æƒ‘ï¼Œå½“ç”¨æˆ·æ‰§è¡Œäº†è¯­å¥ other_ptr = some_ptr åï¼Œsome_ptr å°±ä¸ºç©ºäº†\n2ï¼Œ å¼•å…¥å³å€¼å¼•ç”¨å’Œç§»åŠ¨æ„é€ åï¼Œç”¨æˆ·è¦æƒ³ç”¨é‡è½½çš„ operator=ï¼Œå¿…é¡»é‡‡ç”¨ other_ptr = std::move(some_ptr) çš„æ–¹å¼ï¼Œé€šè¿‡æ˜¾ç¤ºè°ƒç”¨ std::moveï¼Œè®©ç”¨æˆ·awareåˆ° some_ptr çš„å†…å®¹å·²ç»è¢«ç§»åŠ¨åˆ° other_ptr äº†ï¼Œå¹¶ä¸”åŒæ—¶é»˜è®¤ç¦ç”¨äº†å‚æ•°ä¸ºå·¦å€¼å¼•ç”¨çš„æ‹·è´æ„é€ ï¼Œå¯¼è‡´ other_ptr = some_ptr æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œå°±ä¸ä¼šåœ¨ä½¿ç”¨æ—¶äº§ç”Ÿæ­§ä¹‰äº†ï¼Œè¿™å°±æ˜¯ unique_ptr æœŸæœ›çš„è¯­ä¹‰","like_count":18,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477783,"discussion_content":"ç§»è¿›å»çš„è¯ï¼Œsmart_ptr&amp;lt;circle&amp;gt;::shared_count å’Œ smart_ptr&amp;lt;shape&amp;gt;::shared_count æˆäº†ä¸¤ä¸ªå®Œå…¨ä¸ç›¸å…³çš„ç±»å‹ï¼Œå®ƒä»¬çš„æŒ‡é’ˆï¼ˆåœ¨ä¸åšå¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶ï¼‰ä¹Ÿä¸èƒ½äº’ç›¸èµ‹å€¼ï¼Œä¸å¥½ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1576313097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1690431,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cb/3f/3d044d18.jpg","nickname":"è´µå­","note":"","ucode":"A94801C05CB07E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":82119,"discussion_content":"æˆ‘æ˜ç™½äº†ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576321872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155988,"user_name":"hdongdong123","can_delete":false,"product_type":"c1","uid":1724769,"ip_address":"","ucode":"D74589952987D9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLICDTy3Aglb3VvyYjSiaR0tkh6jjojiaa8qiccpRHjXGmnJD72iccU36ic29piaenZrREkR1GoPJK1zU9g/132","comment_is_top":false,"comment_ctime":1574790521,"is_pvip":false,"replies":[{"id":59934,"content":"ä¸€éçœ‹ä¸æ‡‚ï¼Œå°±å†çœ‹ä¸€éã€‚æ‰€æœ‰çš„ä»£ç è‡ªå·±è¯•éªŒä¸€ä¸‹ã€‚ğŸ˜€\n\nå­¦ä¹ æ— æ·å¾„ã€‚æŒæ¡ C++ ä¸æ˜¯ 30 ä¸ªè¯¾æ—¶èƒ½è§£å†³çš„äº‹æƒ…ã€‚ä¸€ä¸‡å°æ—¶ç†è®ºå¯¹äºä»»ä½•å¤æ‚é¢†åŸŸéƒ½æ˜¯åŸºæœ¬é€‚ç”¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574814374,"ip_address":"","comment_id":155988,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"çœŸçš„å¥½éš¾å•Šï¼Œå‘œå‘œå‘œ","like_count":17,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475947,"discussion_content":"ä¸€éçœ‹ä¸æ‡‚ï¼Œå°±å†çœ‹ä¸€éã€‚æ‰€æœ‰çš„ä»£ç è‡ªå·±è¯•éªŒä¸€ä¸‹ã€‚ğŸ˜€\n\nå­¦ä¹ æ— æ·å¾„ã€‚æŒæ¡ C++ ä¸æ˜¯ 30 ä¸ªè¯¾æ—¶èƒ½è§£å†³çš„äº‹æƒ…ã€‚ä¸€ä¸‡å°æ—¶ç†è®ºå¯¹äºä»»ä½•å¤æ‚é¢†åŸŸéƒ½æ˜¯åŸºæœ¬é€‚ç”¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574814374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159696,"user_name":"nullptr","can_delete":false,"product_type":"c1","uid":1759752,"ip_address":"","ucode":"1A26EA0D1A2C10","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqtvuo1wE3XU1mBmtIDfrAQZ2NofBQM5sZhBWicMXicdsrfJ6t87yrlXwqFj0PB6Kx8QU3AVCR4TIHw/132","comment_is_top":false,"comment_ctime":1575730223,"is_pvip":false,"replies":[{"id":61019,"content":"æ˜¯è¿™æ ·çš„ã€‚æ‰€ä»¥ç¬¬3è®²æˆ‘æŠŠè¿™ä¸ªå•ç‹¬ä½œä¸ºé—®é¢˜æå‡ºæ¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575778837,"ip_address":"","comment_id":159696,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘ä¸€ç›´åœ¨çº ç»“é‚£ä¸ªæ‹·è´èµ‹å€¼å‚æ•°ä¸æ˜¯å¼•ç”¨çš„é—®é¢˜ï¼Œä¸æ˜¯å¼•ç”¨çš„è¯ï¼Œä¼šäº§ç”Ÿä¸€æ¬¡æ‹·è´æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å·²ç»å¢åŠ äº†å¼•ç”¨è®¡æ•°ï¼Œæ¥ç€è¿›è¡Œç®€å•çš„swapæ“ä½œå°±okäº†ï¼Œè¯»è€…éœ€è¦æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œå¾ˆå¤šäººä¼šå¿½ç•¥","like_count":11,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475947,"discussion_content":"ä¸€éçœ‹ä¸æ‡‚ï¼Œå°±å†çœ‹ä¸€éã€‚æ‰€æœ‰çš„ä»£ç è‡ªå·±è¯•éªŒä¸€ä¸‹ã€‚ğŸ˜€\n\nå­¦ä¹ æ— æ·å¾„ã€‚æŒæ¡ C++ ä¸æ˜¯ 30 ä¸ªè¯¾æ—¶èƒ½è§£å†³çš„äº‹æƒ…ã€‚ä¸€ä¸‡å°æ—¶ç†è®ºå¯¹äºä»»ä½•å¤æ‚é¢†åŸŸéƒ½æ˜¯åŸºæœ¬é€‚ç”¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574814374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155795,"user_name":"frazer","can_delete":false,"product_type":"c1","uid":1194427,"ip_address":"","ucode":"36869573D98495","user_header":"https://static001.geekbang.org/account/avatar/00/12/39/bb/3dd9ef18.jpg","comment_is_top":false,"comment_ctime":1574757933,"is_pvip":false,"replies":[{"id":59877,"content":"æ²¡å…³ç³»ã€‚æˆ‘æ‰“èµŒä½ çœ‹çš„æ—¶é—´è‚¯å®šæ²¡æˆ‘å†™ç¨¿çš„æ—¶é—´é•¿ã€‚ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574765427,"ip_address":"","comment_id":155795,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æœ‰ç‚¹åƒåŠ›äº†ï¼Œå¾—åå¤çœ‹å‡ é","like_count":115,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475875,"discussion_content":"æ²¡å…³ç³»ã€‚æˆ‘æ‰“èµŒä½ çœ‹çš„æ—¶é—´è‚¯å®šæ²¡æˆ‘å†™ç¨¿çš„æ—¶é—´é•¿ã€‚ğŸ˜","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1574765427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346028,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKSCRYv3q4f08a3JZjZd4Dpf2IL0g4mkQ9WtcAM3zcCZsA8r9GMpcUmsXGueVMibtJBxXDNGKx75rA/132","nickname":"dasheyuan","note":"","ucode":"AD61112AB070DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62481,"discussion_content":"å·²ç»ç¬¬3éäº†ã€‚å‚¬æ›´....","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574846673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132347,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/3b/15e4490f.jpg","nickname":"ç››è‰³æ˜","note":"","ucode":"E4C1C699572C44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68171,"discussion_content":"å†ä¸€ç‚¹ç‚¹çš„å•ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575205061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1151971,"avatar":"https://static001.geekbang.org/account/avatar/00/11/93/e3/da819340.jpg","nickname":"é©¬ä»”","note":"","ucode":"75760150602EA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1132347,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/3b/15e4490f.jpg","nickname":"ç››è‰³æ˜","note":"","ucode":"E4C1C699572C44","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100513,"discussion_content":"æ˜¯çš„å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577265883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":68171,"ip_address":"","group_id":0},"score":100513,"extra":""}]}]},{"had_liked":false,"id":155906,"user_name":"yuchen","can_delete":false,"product_type":"c1","uid":1605025,"ip_address":"","ucode":"D4B55B57D218CB","user_header":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","comment_is_top":false,"comment_ctime":1574777231,"is_pvip":false,"replies":[{"id":59924,"content":"è°¢è°¢ã€‚\n\nã€ŠProfessional C++ã€‹ä¹‹å‰æ²¡çœ‹è¿‡ï¼Œæ‰«äº†ä¸¤çœ¼ï¼Œè§‰å¾—å†…å®¹ä¸é”™ï¼Œæ¨èã€‚å†…å®¹è¿˜æŒºå¤šæŒºæ·±çš„ï¼Œé€‚åˆå†³å¿ƒåœ¨ C++ ä¸Šæ·±å…¥çš„åŒå­¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574813297,"ip_address":"","comment_id":155906,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æœ‰æ·±åº¦çš„ä¸“æ ï¼Œä¸é”™ã€‚å¸‚é¢ä¸Šè®²è§£C++çš„è¯¾ç¨‹ä¸€èˆ¬å¤ªåŸºç¡€äº†ã€‚è¿™ä¸€ç« æ¨èè¯»è€…å¯ä»¥çœ‹çœ‹ã€ŠProfessional Cï¼‹ï¼‹ 4th editionã€‹ç¬¬ä¹ç« ã€‚","like_count":37,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475920,"discussion_content":"è°¢è°¢ã€‚\n\nã€ŠProfessional C++ã€‹ä¹‹å‰æ²¡çœ‹è¿‡ï¼Œæ‰«äº†ä¸¤çœ¼ï¼Œè§‰å¾—å†…å®¹ä¸é”™ï¼Œæ¨èã€‚å†…å®¹è¿˜æŒºå¤šæŒºæ·±çš„ï¼Œé€‚åˆå†³å¿ƒåœ¨ C++ ä¸Šæ·±å…¥çš„åŒå­¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574813297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1949454,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/bf/0e/0e6419a9.jpg","nickname":"è–›ç‘","note":"","ucode":"FE634CB0C1BAEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257474,"discussion_content":"è¿™æœ¬ä¹¦å¢™è£‚æ¨èå•Šï¼Œæœ‰ä¸­æ–‡ç‰ˆï¼ŒC++é«˜çº§ç¼–ç¨‹ï¼Œç›¸å½“ç»™åŠ›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588574962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2557701,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Wjsc175urqxxBcCsxSDG5iaWcEq4hIg4SCCVJCIC108Ul5l7US4iaE3iaaMWodSJeybGemicEnfetHFCj9P6QI17xw/132","nickname":"Geek_15f2c9","note":"","ucode":"3AA686B1D31AB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365823,"discussion_content":"æœ‰ç”µå­ç‰ˆå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617888262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1760853,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/de/55/d690fe48.jpg","nickname":"è¥¿åŸŸé»‘é¸¦","note":"","ucode":"D1B8BE1AF4699E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104406,"discussion_content":"å“ªé‡Œå¯ä»¥ä¹°åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577431633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1055296,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","nickname":"ä¸­å±±æµªå­","note":"","ucode":"25D0F8462473D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1760853,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/de/55/d690fe48.jpg","nickname":"è¥¿åŸŸé»‘é¸¦","note":"","ucode":"D1B8BE1AF4699E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606194,"discussion_content":"ç°åœ¨æœ‰ç¬¬äº”ç‰ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677027229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104406,"ip_address":"ä¸Šæµ·","group_id":0},"score":606194,"extra":""}]}]},{"had_liked":false,"id":157236,"user_name":"çš“é¦–ä¸å€¦","can_delete":false,"product_type":"c1","uid":1144626,"ip_address":"","ucode":"FA7D282DD40D83","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/32/02416d97.jpg","comment_is_top":false,"comment_ctime":1575094017,"is_pvip":false,"replies":[{"id":60316,"content":"è¿™æ˜¯ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„ã€ç”šè‡³æœ‰ç‚¹æ¼äººçš„æƒ…å†µã€‚å¦‚æœæ²¡æœ‰éæ³›å‹ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨çœ‹åˆ°æ²¡æœ‰æ‹·è´æ„é€ å‡½æ•°ï¼Œä¼šç”Ÿæˆä¸€ä¸ªç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ã€‚è¿™æ ·ï¼ŒåŒæ ·ç±»å‹çš„smart_ptrçš„æ‹·è´æ„é€ ä¼šæ˜¯é”™è¯¯çš„ã€‚â€œå­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢â€è¿™ä¸€èŠ‚é‡Œæˆ‘ä¹Ÿæåˆ°äº†è¿™ç‚¹ã€‚è¿™ä¸æ˜¯æˆ‘è®²æ™ºèƒ½æŒ‡é’ˆæƒ³è®²çš„å†…å®¹ï¼Œæ‰€ä»¥å°±æ·¡åŒ–äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575108945,"ip_address":"","comment_id":157236,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®ä¸‹è€å¸ˆsmart ptr çš„æ‹·è´æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆæœ‰ä¸€ä¸ªæ³›å‹ç‰ˆæœ¬ è¿˜æœ‰ä¸€ä¸ªéæ³›å‹ç‰ˆæœ¬ ä½†æ˜¯å‡½æ•°ä½“å†…å®¹åˆä¸€æ¨¡ä¸€æ · ä¸æ˜¯ä»£ç å†—ä½™çš„å— æ˜¯æœ‰ä»€ä¹ˆç‰¹æ®Šè®¾è®¡æ„å›¾å— è¯·è€å¸ˆæŒ‡æ•™ä¸‹","like_count":35,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476371,"discussion_content":"è¿™æ˜¯ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„ã€ç”šè‡³æœ‰ç‚¹æ¼äººçš„æƒ…å†µã€‚å¦‚æœæ²¡æœ‰éæ³›å‹ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨çœ‹åˆ°æ²¡æœ‰æ‹·è´æ„é€ å‡½æ•°ï¼Œä¼šç”Ÿæˆä¸€ä¸ªç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ã€‚è¿™æ ·ï¼ŒåŒæ ·ç±»å‹çš„smart_ptrçš„æ‹·è´æ„é€ ä¼šæ˜¯é”™è¯¯çš„ã€‚â€œå­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢â€è¿™ä¸€èŠ‚é‡Œæˆ‘ä¹Ÿæåˆ°äº†è¿™ç‚¹ã€‚è¿™ä¸æ˜¯æˆ‘è®²æ™ºèƒ½æŒ‡é’ˆæƒ³è®²çš„å†…å®¹ï¼Œæ‰€ä»¥å°±æ·¡åŒ–äº†ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1575108945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1743064,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/98/d8/db4cef94.jpg","nickname":"Alan","note":"","ucode":"C656A2B4FF8C50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646213,"discussion_content":"è¿™ç‚¹å¥½å‘å•Šï¼æ„Ÿè§‰æ–‡ä¸­å¯ä»¥æä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717575284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1799719,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/76/27/aa2743e7.jpg","nickname":"å°å—é£","note":"","ucode":"249B070497C815","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":625072,"discussion_content":"ä¸‹é¢æ˜¯chatgpt4.0çš„å›ç­”ï¼Œ è¯·é—®å®ƒçš„å›ç­”æ­£ç¡®å—ï¼Ÿ\n------------------------------------------------------------------------------------------------- \n\nå½“è®¾è®¡ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆç±»æ—¶ï¼Œä¸ºäº†æä¾›æ›´çµæ´»çš„æ‹·è´æ„é€ å‡½æ•°æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹ç‰ˆæœ¬å’Œéæ³›å‹ç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°ã€‚\n\né¦–å…ˆï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ³›å‹å’Œæ¨¡æ¿çš„æ¦‚å¿µã€‚æ³›å‹æ˜¯æŒ‡èƒ½å¤Ÿå¤„ç†å¤šç§ä¸åŒç±»å‹çš„ä»£ç æˆ–å‡½æ•°ã€‚æ¨¡æ¿æ˜¯ä¸€ç§åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆä»£ç çš„æœºåˆ¶ï¼Œå®ƒå¯ä»¥ç”¨äºåˆ›å»ºæ³›å‹ä»£ç ã€‚åœ¨C++ä¸­ï¼Œæ¨¡æ¿ä½¿ç”¨å…³é”®å­—templateæ¥å®šä¹‰ã€‚\n\nåœ¨smart_ptrç±»ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼šä¸€ä¸ªæ˜¯æ³›å‹ç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯éæ³›å‹ç‰ˆæœ¬ã€‚å®ƒä»¬çš„å‡½æ•°ä½“å†…å®¹ç›¸åŒï¼Œä½†å‚æ•°ç±»å‹ä¸åŒã€‚\n\næ³›å‹ç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°smart_ptr(const smart_ptr&amp; other) noexceptæ¥å—ä¸€ä¸ªsmart_ptrç±»å‹çš„å‚æ•°otherã€‚è¿™ä¸ªç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°å¯ä»¥ç”¨äºæ‹·è´ç›¸åŒç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªsmart_ptr&lt;int&gt;å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ‹·è´æ„é€ å‡½æ•°æ¥æ‹·è´å¦ä¸€ä¸ªsmart_ptr&lt;int&gt;å¯¹è±¡ã€‚\n\néæ³›å‹ç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°template &lt;typename U&gt; smart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexceptä½¿ç”¨æ¨¡æ¿å‚æ•°Uï¼Œå®ƒæ¥å—ä¸€ä¸ªä¸åŒç±»å‹çš„smart_ptrç±»å‹çš„å‚æ•°otherã€‚è¿™ä¸ªéæ³›å‹ç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°å¯ä»¥ç”¨äºè¿›è¡Œç±»å‹è½¬æ¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªsmart_ptr&lt;Base&gt;å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ‹·è´æ„é€ å‡½æ•°å°†å…¶æ‹·è´ä¸ºsmart_ptr&lt;Derived&gt;å¯¹è±¡ã€‚\n\nè™½ç„¶ä¸¤ä¸ªç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°çš„å‡½æ•°ä½“å†…å®¹ç›¸åŒï¼Œä½†æ˜¯é€šè¿‡æä¾›ä¸åŒçš„å‚æ•°ç±»å‹ï¼Œä½¿å¾—ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å‚æ•°ç±»å‹è¿›è¡Œå‡½æ•°åŒ¹é…ï¼Œä»è€Œé€‰æ‹©åˆé€‚çš„æ‹·è´æ„é€ å‡½æ•°ç‰ˆæœ¬ã€‚\n\nè¿™ç§è®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œå®ƒæä¾›äº†æ›´çµæ´»å’Œé€šç”¨çš„æ‹·è´æ„é€ å‡½æ•°æ”¯æŒï¼Œå¯ä»¥é€‚åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚é€šè¿‡ä½¿ç”¨æ³›å‹å’Œæ¨¡æ¿ï¼Œå¯ä»¥é¿å…æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæä¾›æ›´æ–¹ä¾¿çš„ä½¿ç”¨æ–¹å¼ã€‚è™½ç„¶åœ¨è¿™ä¸ªç‰¹å®šçš„ä»£ç ä¸­ï¼Œå‡½æ•°ä½“å†…å®¹ç›¸åŒå¯èƒ½çœ‹èµ·æ¥æœ‰äº›å†—ä½™ï¼Œä½†è¿™ç§è®¾è®¡å¯ä»¥æ”¯æŒæ›´å¤šçš„ç±»å‹è½¬æ¢éœ€æ±‚ï¼Œå¹¶æä¾›æ›´çµæ´»çš„æ¥å£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691285301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3044278,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/73/b6/73f85077.jpg","nickname":"DDRH","note":"","ucode":"047BF2A1D1A27A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590316,"discussion_content":"ä¸çœ‹è¿™æ¡çœŸçš„æ²¡æ³¨æ„ï½respect","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665651570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144626,"avatar":"https://static001.geekbang.org/account/avatar/00/11/77/32/02416d97.jpg","nickname":"çš“é¦–ä¸å€¦","note":"","ucode":"FA7D282DD40D83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66864,"discussion_content":"åˆšåˆšå®é™…å†™ä»£ç æµ‹è¯•äº†ä¸€ä¸‹ è¿˜çœŸçš„æ˜¯æ‚¨è§£é‡Šçš„è¿™æ · ä»¥å‰éƒ½æ²¡æ³¨æ„åˆ°è¿™ä¸ªç‚¹ è¿™ä¸ªç‚¹å·²åŠ å…¥ä¸ªäººç¼–ç è¸©å‘å¤‡å¿˜å½• ä¸‡å¹¸åœ¨å·¥ç¨‹å®é™…è¸©å‘å‰çœ‹åˆ°æ‚¨çš„ä¸“é¢˜ æ„Ÿè°¢æ‚¨çš„æŒ‡ç‚¹ è€å¸ˆçš„ä¸“é¢˜å†™å¾—å¾ˆæ£’ æœŸå¾…åé¢ä¸“é¢˜å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575112865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155667,"user_name":"æµæµªåœ°çƒ","can_delete":false,"product_type":"c1","uid":1498137,"ip_address":"","ucode":"25210DCD353F97","user_header":"https://static001.geekbang.org/account/avatar/00/16/dc/19/c058bcbf.jpg","comment_is_top":false,"comment_ctime":1574734740,"is_pvip":false,"replies":[{"id":59858,"content":"å˜»å˜»ï¼Œæˆ‘åœ¨å·å·åœ°å¡è¿›C++11çš„è¯­æ³•ã€‚å¯¹è±¡åˆå§‹åŒ–å¯ä»¥ç»Ÿä¸€ç”¨å¤§æ‹¬å·ã€‚ï¼ˆå°æ‹¬å·è¿™å„¿ä¹Ÿè¡Œã€‚ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574762471,"ip_address":"","comment_id":155667,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œé—®ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€çš„é—®é¢˜ï¼Œæˆ‘ç†è§£è¿™ä¸ªè¯­å¥\nsmart_ptr&lt;shape&gt;  ptr1{create_shape(shape_type::circle)};  æ˜¯è°ƒç”¨ptr1çš„æ‹·è´æ„é€ å‡½æ•°ã€‚\nä¸ºä»€ä¹ˆ{create_shape(shape_type::circle)}æ˜¯ä½¿ç”¨å¤§æ‹¬å·ï¼Œä¸åº”è¯¥æ˜¯å°æ‹¬å·å—ï¼Ÿ\nè°¢è°¢\n","like_count":32,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476371,"discussion_content":"è¿™æ˜¯ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„ã€ç”šè‡³æœ‰ç‚¹æ¼äººçš„æƒ…å†µã€‚å¦‚æœæ²¡æœ‰éæ³›å‹ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨çœ‹åˆ°æ²¡æœ‰æ‹·è´æ„é€ å‡½æ•°ï¼Œä¼šç”Ÿæˆä¸€ä¸ªç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ã€‚è¿™æ ·ï¼ŒåŒæ ·ç±»å‹çš„smart_ptrçš„æ‹·è´æ„é€ ä¼šæ˜¯é”™è¯¯çš„ã€‚â€œå­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢â€è¿™ä¸€èŠ‚é‡Œæˆ‘ä¹Ÿæåˆ°äº†è¿™ç‚¹ã€‚è¿™ä¸æ˜¯æˆ‘è®²æ™ºèƒ½æŒ‡é’ˆæƒ³è®²çš„å†…å®¹ï¼Œæ‰€ä»¥å°±æ·¡åŒ–äº†ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1575108945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1743064,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/98/d8/db4cef94.jpg","nickname":"Alan","note":"","ucode":"C656A2B4FF8C50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646213,"discussion_content":"è¿™ç‚¹å¥½å‘å•Šï¼æ„Ÿè§‰æ–‡ä¸­å¯ä»¥æä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717575284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1799719,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/76/27/aa2743e7.jpg","nickname":"å°å—é£","note":"","ucode":"249B070497C815","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":625072,"discussion_content":"ä¸‹é¢æ˜¯chatgpt4.0çš„å›ç­”ï¼Œ è¯·é—®å®ƒçš„å›ç­”æ­£ç¡®å—ï¼Ÿ\n------------------------------------------------------------------------------------------------- \n\nå½“è®¾è®¡ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆç±»æ—¶ï¼Œä¸ºäº†æä¾›æ›´çµæ´»çš„æ‹·è´æ„é€ å‡½æ•°æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹ç‰ˆæœ¬å’Œéæ³›å‹ç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°ã€‚\n\né¦–å…ˆï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ³›å‹å’Œæ¨¡æ¿çš„æ¦‚å¿µã€‚æ³›å‹æ˜¯æŒ‡èƒ½å¤Ÿå¤„ç†å¤šç§ä¸åŒç±»å‹çš„ä»£ç æˆ–å‡½æ•°ã€‚æ¨¡æ¿æ˜¯ä¸€ç§åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆä»£ç çš„æœºåˆ¶ï¼Œå®ƒå¯ä»¥ç”¨äºåˆ›å»ºæ³›å‹ä»£ç ã€‚åœ¨C++ä¸­ï¼Œæ¨¡æ¿ä½¿ç”¨å…³é”®å­—templateæ¥å®šä¹‰ã€‚\n\nåœ¨smart_ptrç±»ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼šä¸€ä¸ªæ˜¯æ³›å‹ç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯éæ³›å‹ç‰ˆæœ¬ã€‚å®ƒä»¬çš„å‡½æ•°ä½“å†…å®¹ç›¸åŒï¼Œä½†å‚æ•°ç±»å‹ä¸åŒã€‚\n\næ³›å‹ç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°smart_ptr(const smart_ptr&amp; other) noexceptæ¥å—ä¸€ä¸ªsmart_ptrç±»å‹çš„å‚æ•°otherã€‚è¿™ä¸ªç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°å¯ä»¥ç”¨äºæ‹·è´ç›¸åŒç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªsmart_ptr&lt;int&gt;å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ‹·è´æ„é€ å‡½æ•°æ¥æ‹·è´å¦ä¸€ä¸ªsmart_ptr&lt;int&gt;å¯¹è±¡ã€‚\n\néæ³›å‹ç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°template &lt;typename U&gt; smart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexceptä½¿ç”¨æ¨¡æ¿å‚æ•°Uï¼Œå®ƒæ¥å—ä¸€ä¸ªä¸åŒç±»å‹çš„smart_ptrç±»å‹çš„å‚æ•°otherã€‚è¿™ä¸ªéæ³›å‹ç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°å¯ä»¥ç”¨äºè¿›è¡Œç±»å‹è½¬æ¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªsmart_ptr&lt;Base&gt;å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ‹·è´æ„é€ å‡½æ•°å°†å…¶æ‹·è´ä¸ºsmart_ptr&lt;Derived&gt;å¯¹è±¡ã€‚\n\nè™½ç„¶ä¸¤ä¸ªç‰ˆæœ¬çš„æ‹·è´æ„é€ å‡½æ•°çš„å‡½æ•°ä½“å†…å®¹ç›¸åŒï¼Œä½†æ˜¯é€šè¿‡æä¾›ä¸åŒçš„å‚æ•°ç±»å‹ï¼Œä½¿å¾—ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å‚æ•°ç±»å‹è¿›è¡Œå‡½æ•°åŒ¹é…ï¼Œä»è€Œé€‰æ‹©åˆé€‚çš„æ‹·è´æ„é€ å‡½æ•°ç‰ˆæœ¬ã€‚\n\nè¿™ç§è®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œå®ƒæä¾›äº†æ›´çµæ´»å’Œé€šç”¨çš„æ‹·è´æ„é€ å‡½æ•°æ”¯æŒï¼Œå¯ä»¥é€‚åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚é€šè¿‡ä½¿ç”¨æ³›å‹å’Œæ¨¡æ¿ï¼Œå¯ä»¥é¿å…æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæä¾›æ›´æ–¹ä¾¿çš„ä½¿ç”¨æ–¹å¼ã€‚è™½ç„¶åœ¨è¿™ä¸ªç‰¹å®šçš„ä»£ç ä¸­ï¼Œå‡½æ•°ä½“å†…å®¹ç›¸åŒå¯èƒ½çœ‹èµ·æ¥æœ‰äº›å†—ä½™ï¼Œä½†è¿™ç§è®¾è®¡å¯ä»¥æ”¯æŒæ›´å¤šçš„ç±»å‹è½¬æ¢éœ€æ±‚ï¼Œå¹¶æä¾›æ›´çµæ´»çš„æ¥å£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691285301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3044278,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/73/b6/73f85077.jpg","nickname":"DDRH","note":"","ucode":"047BF2A1D1A27A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590316,"discussion_content":"ä¸çœ‹è¿™æ¡çœŸçš„æ²¡æ³¨æ„ï½respect","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665651570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144626,"avatar":"https://static001.geekbang.org/account/avatar/00/11/77/32/02416d97.jpg","nickname":"çš“é¦–ä¸å€¦","note":"","ucode":"FA7D282DD40D83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66864,"discussion_content":"åˆšåˆšå®é™…å†™ä»£ç æµ‹è¯•äº†ä¸€ä¸‹ è¿˜çœŸçš„æ˜¯æ‚¨è§£é‡Šçš„è¿™æ · ä»¥å‰éƒ½æ²¡æ³¨æ„åˆ°è¿™ä¸ªç‚¹ è¿™ä¸ªç‚¹å·²åŠ å…¥ä¸ªäººç¼–ç è¸©å‘å¤‡å¿˜å½• ä¸‡å¹¸åœ¨å·¥ç¨‹å®é™…è¸©å‘å‰çœ‹åˆ°æ‚¨çš„ä¸“é¢˜ æ„Ÿè°¢æ‚¨çš„æŒ‡ç‚¹ è€å¸ˆçš„ä¸“é¢˜å†™å¾—å¾ˆæ£’ æœŸå¾…åé¢ä¸“é¢˜å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575112865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156428,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1574869941,"is_pvip":false,"replies":[{"id":60072,"content":"3. èµ‹å€¼éœ€è¦ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯å¼•ç”¨ï¼‰ï¼Œå› è€Œåœ¨è¿›å…¥æ‰§è¡Œå‰å°±è¦å¼•å‘ä¸€ä¸ªæ„é€ ã€‚æ²¡æœ‰åˆé€‚çš„æ„é€ å‡½æ•°å¯ç”¨ã€‚\n\n4. åŒæ ·ï¼Œè¦å…ˆæ„é€ ã€‚è¿™å›å¯ä»¥ç”¨å³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574899310,"ip_address":"","comment_id":156428,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆè¿™å—æ²¡æƒ³æ˜ç™½\n&#47;&#47; 1ã€è°ƒç”¨æ„é€ å‡½æ•°\nsmart_ptr ptr1{create_shape(shape_type::circle)};\n\n&#47;&#47; 2ã€å› ä¸ºæ‹·è´æ„é€ è¢«ç¦ç”¨ï¼Œéšæ„ç¼–è¯‘å‡ºé”™\nsmart_ptr ptr2{ptr1}; &#47;&#47; ç¼–è¯‘å‡ºé”™\n\nsmart_ptr ptr3;\n\n&#47;&#47; 3ã€æ²¡æ˜ç™½ä¸ºå•¥ä¼šå‡ºé”™\nptr3 = ptr1;        &#47;&#47; ç¼–è¯‘å‡ºé”™\n\n&#47;&#47; 4ã€æ²¡æ˜ç™½ä¸ºå•¥OKï¼Œ=é‡è½½å‡½æ•°çš„å‚æ•°ä¸æ˜¯å³å€¼å¼•ç”¨å‘€\nptr3 = std::move(ptr1); &#47;&#47; OKï¼Œ\n\nè¯·è€å¸ˆæŒ‡å®š 3 ä¸ 4","like_count":27,"discussions":[{"author":{"id":1422582,"avatar":"https://static001.geekbang.org/account/avatar/00/15/b4/f6/735673f7.jpg","nickname":"W.jyao","note":"","ucode":"C57B3A78B6A795","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60732,"discussion_content":"è°ƒç”¨æ„é€ å‡½æ•°ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1574749842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475823,"discussion_content":"å˜»å˜»ï¼Œæˆ‘åœ¨å·å·åœ°å¡è¿›C++11çš„è¯­æ³•ã€‚å¯¹è±¡åˆå§‹åŒ–å¯ä»¥ç»Ÿä¸€ç”¨å¤§æ‹¬å·ã€‚ï¼ˆå°æ‹¬å·è¿™å„¿ä¹Ÿè¡Œã€‚ï¼‰","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574762471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1911448,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCBR2aB7H8ic3FalKn9x1lXg83KmgYqTznCByz3nZjd9CXLTiaFo22piafibJd04p7jKiblyUic6Eo22esA/132","nickname":"è°Œé¹é£","note":"","ucode":"AC8D00E3E18D49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219630,"discussion_content":"è¿™ä¸ªä¹Ÿæ˜¯ååº”äº†ä¸€ä¼šå„¿æ‰çŸ¥é“æ˜¯c11çš„è¯­æ³•çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585790324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547048,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9b/28/9d89de4d.jpg","nickname":"æš’","note":"","ucode":"9C956F418C66BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85653,"discussion_content":"æ˜¯å‘€ï¼Œçœ‹äº†åŠå¤©æˆ‘æ‰æƒ³èµ·æ¥11 çš„ç”¨å¤§æ‹¬å·è¿›è¡Œå¯¹è±¡åˆå§‹åŒ–","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576563112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1609948,"avatar":"https://static001.geekbang.org/account/avatar/00/18/90/dc/44ce2f23.jpg","nickname":"æ°•æ°˜æ°š","note":"","ucode":"6B5477BF23AA4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577821,"discussion_content":"åˆå§‹åŒ–åˆ—è¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656372605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156435,"user_name":"yyfx","can_delete":false,"product_type":"c1","uid":1757872,"ip_address":"","ucode":"230A98762BD678","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/vJD2lw7TUwAl0myKy0PiahuEA75EzPER98wLDcxIvtQQaUiasCpIla7TN3dicMiaAkPxtOdsJh3MicpicD7hV1G5ico4A/132","comment_is_top":false,"comment_ctime":1574870963,"is_pvip":false,"replies":[{"id":60108,"content":"å¤šè°¢æŠ“è™«ã€‚æ­£æ–‡å·²æ›´æ–°ã€‚\n\nè¿™ä¹Ÿè¯æ˜äº†ï¼Œä¿®æ”¹ä»£ç ã€æ²¡æœ‰å®Œæ•´æµ‹è¯•ï¼Œæ˜¯ææ˜“æ‹›è™«çš„å•Šâ€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574913802,"ip_address":"","comment_id":156435,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"&quot;ç§»åŠ¨&quot;æŒ‡é’ˆéƒ¨åˆ†æœ‰ä¸ªé—®é¢˜ã€‚åœ¨ä½¿ç”¨æ¨¡æ¿æ³›åŒ–æ‹·è´æ„é€ æ—¶ï¼Œp2=p1ç¼–è¯‘é€šè¿‡ï¼Œç¨‹åºå¼‚å¸¸ã€‚æµ‹è¯•å‘ç°ï¼Œç”±äºæ‹·è´æ„é€ å¹¶æ²¡æœ‰è¢«è‡ªåŠ¨ç¦ç”¨å¯¼è‡´ã€‚æŸ¥äº†ä¸‹èµ„æ–™ï¼Œeffective45æ¡æåˆ°ï¼Œmember templatesä¸å½±å“è¯­è¨€è§„åˆ™ï¼Œå£°æ˜member templatesç”¨äºæ³›åŒ–copyæ„é€ æ—¶ï¼Œè¿˜éœ€è¦å£°æ˜æ­£å¸¸çš„copyæ„é€ ã€‚","like_count":24,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476103,"discussion_content":"3. èµ‹å€¼éœ€è¦ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯å¼•ç”¨ï¼‰ï¼Œå› è€Œåœ¨è¿›å…¥æ‰§è¡Œå‰å°±è¦å¼•å‘ä¸€ä¸ªæ„é€ ã€‚æ²¡æœ‰åˆé€‚çš„æ„é€ å‡½æ•°å¯ç”¨ã€‚\n\n4. åŒæ ·ï¼Œè¦å…ˆæ„é€ ã€‚è¿™å›å¯ä»¥ç”¨å³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574899310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007115,"avatar":"","nickname":"Geek_xu324o","note":"","ucode":"F46A5582578A31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350752,"discussion_content":"è¿™é‡Œè™½ç„¶æ˜¯= operatorï¼Œå…¶å®è°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ å‡½æ•°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613998741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1331396,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/c4/71d9745f.jpg","nickname":"é£","note":"","ucode":"48701F74729E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78978,"discussion_content":"æˆ‘ä¹Ÿæœ‰ä¸€ä¸ªç›¸å…³çš„ç–‘é—®ï¼Œè¿™é‡Œçš„å¤åˆ¶æ“ä½œç¬¦å£°æ˜çš„å‚æ•°æ˜¯å€¼ç±»å‹ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚çœ‹äº†std::shared_ptrçš„å£°æ˜æ˜¯å€¼ç±»å‹ã€‚ä½†æ˜¯åœ¨å‡½æ•°å†…éƒ¨ç¡®å®åˆ›å»ºäº†ä¸´æ—¶å¯¹è±¡ç„¶åswapä¹‹ã€‚è¿™é‡Œé€šè¿‡swapå®ç°èµ‹å€¼å’Œmoveæ˜¯ä¸€ä¸ªç‰¹å®šçš„æŠ€å·§å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576041761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1055296,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","nickname":"ä¸­å±±æµªå­","note":"","ucode":"25D0F8462473D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1331396,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/c4/71d9745f.jpg","nickname":"é£","note":"","ucode":"48701F74729E5E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609790,"discussion_content":"é¿å…äº†ç½—å—¦çš„if (this != &amp;rhs) çš„åˆ¤æ–­ï¼Œswapé€šè¿‡ä¸´æ—¶å¯¹è±¡å’Œæˆå‘˜å†…å®¹çš„äº’æ¢ï¼Œè§£å†³äº†å¼‚å¸¸å®‰å…¨çš„æ½œåœ¨é—®é¢˜ã€‚move æ˜¯ä¸ºäº†è°ƒç”¨å³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1679215497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":78978,"ip_address":"ä¸Šæµ·","group_id":0},"score":609790,"extra":""}]}]},{"had_liked":false,"id":161612,"user_name":"è´µå­","can_delete":false,"product_type":"c1","uid":1690431,"ip_address":"","ucode":"A94801C05CB07E","user_header":"https://static001.geekbang.org/account/avatar/00/19/cb/3f/3d044d18.jpg","comment_is_top":false,"comment_ctime":1576247919,"is_pvip":false,"replies":[{"id":61594,"content":"ç§»è¿›å»çš„è¯ï¼Œsmart_ptr&lt;circle&gt;::shared_count å’Œ smart_ptr&lt;shape&gt;::shared_count æˆäº†ä¸¤ä¸ªå®Œå…¨ä¸ç›¸å…³çš„ç±»å‹ï¼Œå®ƒä»¬çš„æŒ‡é’ˆï¼ˆåœ¨ä¸åšå¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶ï¼‰ä¹Ÿä¸èƒ½äº’ç›¸èµ‹å€¼ï¼Œä¸å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576313097,"ip_address":"","comment_id":161612,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"ä¸ºä»€ä¹ˆshared_countç±»ä½œä¸ºsmart_ptrçš„å†…éƒ¨ç±»ç¼–è¯‘ä¸è¿‡ï¼Œè€Œå¿…é¡»ä½œä¸ºå¤–éƒ¨ç±»å‘¢ï¼Ÿè€å¸ˆèƒ½è§£é‡Šä¸€ä¸‹å—ï¼Ÿè°¢è°¢ï¼","like_count":18,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477783,"discussion_content":"ç§»è¿›å»çš„è¯ï¼Œsmart_ptr&amp;lt;circle&amp;gt;::shared_count å’Œ smart_ptr&amp;lt;shape&amp;gt;::shared_count æˆäº†ä¸¤ä¸ªå®Œå…¨ä¸ç›¸å…³çš„ç±»å‹ï¼Œå®ƒä»¬çš„æŒ‡é’ˆï¼ˆåœ¨ä¸åšå¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶ï¼‰ä¹Ÿä¸èƒ½äº’ç›¸èµ‹å€¼ï¼Œä¸å¥½ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1576313097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1690431,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cb/3f/3d044d18.jpg","nickname":"è´µå­","note":"","ucode":"A94801C05CB07E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":82119,"discussion_content":"æˆ‘æ˜ç™½äº†ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576321872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161149,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1576132943,"is_pvip":false,"replies":[{"id":61458,"content":"å¯¹ã€‚\n\nå¦å¤–é¢å¤–åŠ ä¸€ç‚¹ï¼Œè°ƒç”¨ç§»åŠ¨ä¸ä¸€å®šé  moveã€‚å¦‚æœå‡½æ•°è¿”å›ä¸€ä¸ª unique_ptr ä¸€æ ·æ˜¯è‡ªç„¶çš„ç§»åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576140982,"ip_address":"","comment_id":161149,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºå¦‚ä½•ä½¿ç”¨ç§»åŠ¨æ”¹å–„äº† auto_ptr çš„è¡Œä¸ºï¼Œå®ç°äº†ä¸ unique_ptr ç›¸è¿‘çš„è¯­ä¹‰ï¼Œè¿™é‡Œçš„â€œæ”¹å–„â€æ˜¯å¦åº”è¯¥è¿™æ ·ç†è§£ï¼š\n1ï¼Œ åœ¨æ²¡æœ‰å¼•å…¥å³å€¼å¼•ç”¨å’Œç§»åŠ¨æ„é€ çš„æƒ…å†µä¸‹ï¼Œæ„é€ çš„ auto_ptr ä¹Ÿèƒ½å·¥ä½œï¼Œä½†æ˜¯ä¼šä»¤ç”¨æˆ·å›°æƒ‘ï¼Œå½“ç”¨æˆ·æ‰§è¡Œäº†è¯­å¥ other_ptr = some_ptr åï¼Œsome_ptr å°±ä¸ºç©ºäº†\n2ï¼Œ å¼•å…¥å³å€¼å¼•ç”¨å’Œç§»åŠ¨æ„é€ åï¼Œç”¨æˆ·è¦æƒ³ç”¨é‡è½½çš„ operator=ï¼Œå¿…é¡»é‡‡ç”¨ other_ptr = std::move(some_ptr) çš„æ–¹å¼ï¼Œé€šè¿‡æ˜¾ç¤ºè°ƒç”¨ std::moveï¼Œè®©ç”¨æˆ·awareåˆ° some_ptr çš„å†…å®¹å·²ç»è¢«ç§»åŠ¨åˆ° other_ptr äº†ï¼Œå¹¶ä¸”åŒæ—¶é»˜è®¤ç¦ç”¨äº†å‚æ•°ä¸ºå·¦å€¼å¼•ç”¨çš„æ‹·è´æ„é€ ï¼Œå¯¼è‡´ other_ptr = some_ptr æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œå°±ä¸ä¼šåœ¨ä½¿ç”¨æ—¶äº§ç”Ÿæ­§ä¹‰äº†ï¼Œè¿™å°±æ˜¯ unique_ptr æœŸæœ›çš„è¯­ä¹‰","like_count":18,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477616,"discussion_content":"å¯¹ã€‚\n\nå¦å¤–é¢å¤–åŠ ä¸€ç‚¹ï¼Œè°ƒç”¨ç§»åŠ¨ä¸ä¸€å®šé  moveã€‚å¦‚æœå‡½æ•°è¿”å›ä¸€ä¸ª unique_ptr ä¸€æ ·æ˜¯è‡ªç„¶çš„ç§»åŠ¨ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1576140982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2662996,"avatar":"https://static001.geekbang.org/account/avatar/00/28/a2/54/49dfb810.jpg","nickname":"å®µç»ƒ2233","note":"","ucode":"3EBDF8195040DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380839,"discussion_content":"æ ¹æœ¬ä¸ç”¨ç®¡auto_ptrï¼Œè¿™ä¸€å¥ä¸æ¨èä½¿ç”¨äº†ï¼Œè¢«æ·˜æ±°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624720927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155988,"user_name":"hdongdong123","can_delete":false,"product_type":"c1","uid":1724769,"ip_address":"","ucode":"D74589952987D9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLICDTy3Aglb3VvyYjSiaR0tkh6jjojiaa8qiccpRHjXGmnJD72iccU36ic29piaenZrREkR1GoPJK1zU9g/132","comment_is_top":false,"comment_ctime":1574790521,"is_pvip":false,"replies":[{"id":59934,"content":"ä¸€éçœ‹ä¸æ‡‚ï¼Œå°±å†çœ‹ä¸€éã€‚æ‰€æœ‰çš„ä»£ç è‡ªå·±è¯•éªŒä¸€ä¸‹ã€‚ğŸ˜€\n\nå­¦ä¹ æ— æ·å¾„ã€‚æŒæ¡ C++ ä¸æ˜¯ 30 ä¸ªè¯¾æ—¶èƒ½è§£å†³çš„äº‹æƒ…ã€‚ä¸€ä¸‡å°æ—¶ç†è®ºå¯¹äºä»»ä½•å¤æ‚é¢†åŸŸéƒ½æ˜¯åŸºæœ¬é€‚ç”¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574814374,"ip_address":"","comment_id":155988,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"çœŸçš„å¥½éš¾å•Šï¼Œå‘œå‘œå‘œ","like_count":17,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477616,"discussion_content":"å¯¹ã€‚\n\nå¦å¤–é¢å¤–åŠ ä¸€ç‚¹ï¼Œè°ƒç”¨ç§»åŠ¨ä¸ä¸€å®šé  moveã€‚å¦‚æœå‡½æ•°è¿”å›ä¸€ä¸ª unique_ptr ä¸€æ ·æ˜¯è‡ªç„¶çš„ç§»åŠ¨ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1576140982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2662996,"avatar":"https://static001.geekbang.org/account/avatar/00/28/a2/54/49dfb810.jpg","nickname":"å®µç»ƒ2233","note":"","ucode":"3EBDF8195040DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380839,"discussion_content":"æ ¹æœ¬ä¸ç”¨ç®¡auto_ptrï¼Œè¿™ä¸€å¥ä¸æ¨èä½¿ç”¨äº†ï¼Œè¢«æ·˜æ±°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624720927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159696,"user_name":"nullptr","can_delete":false,"product_type":"c1","uid":1759752,"ip_address":"","ucode":"1A26EA0D1A2C10","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqtvuo1wE3XU1mBmtIDfrAQZ2NofBQM5sZhBWicMXicdsrfJ6t87yrlXwqFj0PB6Kx8QU3AVCR4TIHw/132","comment_is_top":false,"comment_ctime":1575730223,"is_pvip":false,"replies":[{"id":61019,"content":"æ˜¯è¿™æ ·çš„ã€‚æ‰€ä»¥ç¬¬3è®²æˆ‘æŠŠè¿™ä¸ªå•ç‹¬ä½œä¸ºé—®é¢˜æå‡ºæ¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575778837,"ip_address":"","comment_id":159696,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘ä¸€ç›´åœ¨çº ç»“é‚£ä¸ªæ‹·è´èµ‹å€¼å‚æ•°ä¸æ˜¯å¼•ç”¨çš„é—®é¢˜ï¼Œä¸æ˜¯å¼•ç”¨çš„è¯ï¼Œä¼šäº§ç”Ÿä¸€æ¬¡æ‹·è´æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å·²ç»å¢åŠ äº†å¼•ç”¨è®¡æ•°ï¼Œæ¥ç€è¿›è¡Œç®€å•çš„swapæ“ä½œå°±okäº†ï¼Œè¯»è€…éœ€è¦æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œå¾ˆå¤šäººä¼šå¿½ç•¥","like_count":11,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477145,"discussion_content":"æ˜¯è¿™æ ·çš„ã€‚æ‰€ä»¥ç¬¬3è®²æˆ‘æŠŠè¿™ä¸ªå•ç‹¬ä½œä¸ºé—®é¢˜æå‡ºæ¥äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575778837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155625,"user_name":"Lilin","can_delete":false,"product_type":"c1","uid":1246721,"ip_address":"","ucode":"3FF845710CF6ED","user_header":"https://static001.geekbang.org/account/avatar/00/13/06/01/64c4b809.jpg","comment_is_top":false,"comment_ctime":1574730192,"is_pvip":false,"replies":[{"id":59863,"content":"å¸Œæœ›æ˜¯éš¾ï¼Œä½†è¿˜èƒ½çœ‹å¾—ä¸‹å»ã€‚å“ˆå“ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574762970,"ip_address":"","comment_id":155625,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æ‰ç¬¬äºŒèŠ‚ï¼Œå°±æœ‰ç‚¹åƒåŠ›äº†ã€‚è¿™ç¯‡ä¸“æ çœŸæ˜¯æ»¡æ»¡çš„å¹²è´§","like_count":11,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475811,"discussion_content":"å¸Œæœ›æ˜¯éš¾ï¼Œä½†è¿˜èƒ½çœ‹å¾—ä¸‹å»ã€‚å“ˆå“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574762970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205640,"user_name":"è¥¿é’¾é’¾","can_delete":false,"product_type":"c1","uid":1097722,"ip_address":"","ucode":"0EE77083636ED9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJV27QOK57cdpdh3E4hbArCOlccdtjCyWooF9fhjeSKAMo9SN1v9RODkrZUZD4RejjbdsqU2FIeMA/132","comment_is_top":false,"comment_ctime":1586693674,"is_pvip":false,"replies":[{"id":76956,"content":"æ³¨æ„ä¸€ä¸‹æˆ‘å†™çš„æ˜¯ï¼š\n\noperator=(smart_ptr rhs)\n\nåœ¨è¿›å…¥å‡½æ•°ä½“æ—¶ï¼Œå·²ç»æ–°æ‹·è´æ„é€ äº†ä¸€ä¸ª smart_ptr å‡ºæ¥äº†ã€‚æ´»å…¨åœ¨æ‹·è´æ„é€ é‡Œå¹²äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1586782659,"ip_address":"","comment_id":205640,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"smart_ptr&amp;  operator=(smart_ptr rhs) noexcept  {    rhs.swap(*this);    return *this;  }\nè€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ç­‰å·è¿ç®—ç¬¦ï¼Œä¸ºä»€ä¹ˆä¸å¢åŠ å¼•ç”¨è®¡æ•°å‘¢ï¼Ÿ","like_count":9},{"had_liked":false,"id":162239,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1576484948,"is_pvip":false,"replies":[{"id":61751,"content":"æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ã€‚ä½†æ²¡äººé˜»æŒ¡ä½ å†™ new shared_ptrâ€¦ã€‚\n\nè¢«ç®¡ç†çš„å¯¹è±¡ä¸ä¼šåœ¨æ ˆä¸Šã€‚åªèƒ½æ˜¯å †æˆ–è€…ä½ çš„å†…å­˜ç®¡ç†å™¨ä½¿ç”¨çš„ç‰¹æ®ŠåŒºåŸŸã€‚\n\nç›®å‰çš„æ¨èæ˜¯ä¸è¦ä½¿ç”¨è£¸æŒ‡é’ˆã€‚ä½¿ç”¨å€¼ï¼Œæˆ–è€…æ™ºèƒ½æŒ‡é’ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576500578,"ip_address":"","comment_id":162239,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºä¸€ä¸ªå¯¹è±¡ä»¥åï¼Œ åŒ…æ‹¬è¿™ä¸ªç§æœ‰æˆå‘˜T* ptr_ä»¥åŠå…¶ä»–éƒ½æ˜¯æ”¾åœ¨æ ˆç©ºé—´ä¸Šçš„å§ï¼Ÿè¿™æ ·å°±å¯ä»¥å¯¹è±¡ä¸åœ¨ä½œç”¨åŸŸä»¥åï¼Œè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œç„¶ådeleteå¼€è¾Ÿçš„ç›¸å…³ç©ºé—´äº†å§ï¼Ÿ\næ™ºèƒ½æŒ‡é’ˆå®è´¨ä¸Šå°±æ˜¯ä½¿ç”¨ä¸€ä¸ª&quot;æ ˆ&quot;ä¸Šçš„å¯¹è±¡æ¥ç®¡ç†ä¸€å—å†…å­˜åœ°å€(å¯èƒ½æ˜¯å †å¯èƒ½æ˜¯æ ˆ)ï¼Œç”¨&quot;æ ˆ&quot;å°±å¯ä»¥ä¿è¯ææ„å‡½æ•°çš„è¿›è¡Œï¼Œä¹Ÿå°±ä¿è¯äº†deleteçš„è¿›è¡Œï¼Œä¹Ÿå°±é¿å…äº†å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚\næ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·ç†è§£?\né‚£æˆ‘ä»¬åº”è¯¥ä»€ä¹ˆæ—¶å€™ä½¿ç”¨new deleteæ¥ç®¡ç†å†…å­˜ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå‘¢ï¼Ÿ\nè¿™äº›æ–¹é¢æœ‰äº›ç–‘æƒ‘ï¼Œè°¢è°¢è€å¸ˆæ‚¨çš„è®²è§£ä¸å›å¤ã€‚","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475811,"discussion_content":"å¸Œæœ›æ˜¯éš¾ï¼Œä½†è¿˜èƒ½çœ‹å¾—ä¸‹å»ã€‚å“ˆå“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574762970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156842,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1574987772,"is_pvip":false,"replies":[{"id":60276,"content":"æ¯”å¦‚ï¼Œä½ çš„å¯¹è±¡æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œç®¡ç†ç€ä¸¤ä¸ªå¯¹è±¡ï¼Œå¦‚æœä½ åœ¨æ‹·è´èµ‹å€¼æ—¶é€ä¸ªåœ°å¤åˆ¶å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„ç›¸åº”çš„ä¸¤ä¸ªæˆå‘˜å¯¹è±¡ï¼Œåœ¨å¤åˆ¶ç¬¬äºŒä¸ªæ—¶å‘ç”Ÿäº†å¼‚å¸¸ï¼Œé‚£ this å¯¹è±¡å°±å¤„äºä¸€ä¸ªå¥‡æ€ªçš„çŠ¶æ€ï¼šæ—¢æ²¡æˆåŠŸå®Œæˆå¤åˆ¶ï¼Œä¹Ÿæ²¡æœ‰äº†åŸå…ˆçš„å¯¹è±¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575032182,"ip_address":"","comment_id":156842,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­æåˆ°çš„å‘ç”Ÿå¼‚å¸¸ï¼Œthiså¯¹è±¡è¢«ç ´åï¼Œå…·ä½“æ˜¯æŒ‡çš„å¯¹è±¡é‡Œçš„ä»€ä¹ˆæˆå‘˜è¢«ç ´åå‘¢ï¼Œè¿™ä¸ªæ²¡çœ‹çš„å¤ªæ˜ç™½ã€‚","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477986,"discussion_content":"æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ã€‚ä½†æ²¡äººé˜»æŒ¡ä½ å†™ new shared_ptrâ€¦ã€‚\n\nè¢«ç®¡ç†çš„å¯¹è±¡ä¸ä¼šåœ¨æ ˆä¸Šã€‚åªèƒ½æ˜¯å †æˆ–è€…ä½ çš„å†…å­˜ç®¡ç†å™¨ä½¿ç”¨çš„ç‰¹æ®ŠåŒºåŸŸã€‚\n\nç›®å‰çš„æ¨èæ˜¯ä¸è¦ä½¿ç”¨è£¸æŒ‡é’ˆã€‚ä½¿ç”¨å€¼ï¼Œæˆ–è€…æ™ºèƒ½æŒ‡é’ˆã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576500578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":84868,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆçš„æŒ‡ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576507599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156393,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1574866138,"is_pvip":false,"replies":[{"id":60068,"content":"å¦‚æœä½ æä¸æ¸…ï¼Œé‚£å¤šåŠå°±æ˜¯ä¸è¯¥è¿”å›å¼•ç”¨çš„æƒ…å†µã€‚ä¸‹é¢ä¼šè®²åˆ°è¿™ä¸ªè¯é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåº”è¯¥ç›´æ¥è¿”å›å¯¹è±¡å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574898970,"ip_address":"","comment_id":156393,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œé—®ä¸ªæ¯”è¾ƒåŸºç¡€çš„é—®é¢˜ï¼Œå°±æ˜¯è¿ç®—ç¬¦é‡è½½çš„æ—¶å€™ï¼Œæˆ‘è€å¸ˆæä¸æ¸… è¯¥è¿”å›å€¼ è¿˜æ˜¯ è¿”å›å¼•ç”¨ï¼Œè¿™å–å†³äºä»€ä¹ˆï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476251,"discussion_content":"æ¯”å¦‚ï¼Œä½ çš„å¯¹è±¡æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œç®¡ç†ç€ä¸¤ä¸ªå¯¹è±¡ï¼Œå¦‚æœä½ åœ¨æ‹·è´èµ‹å€¼æ—¶é€ä¸ªåœ°å¤åˆ¶å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„ç›¸åº”çš„ä¸¤ä¸ªæˆå‘˜å¯¹è±¡ï¼Œåœ¨å¤åˆ¶ç¬¬äºŒä¸ªæ—¶å‘ç”Ÿäº†å¼‚å¸¸ï¼Œé‚£ this å¯¹è±¡å°±å¤„äºä¸€ä¸ªå¥‡æ€ªçš„çŠ¶æ€ï¼šæ—¢æ²¡æˆåŠŸå®Œæˆå¤åˆ¶ï¼Œä¹Ÿæ²¡æœ‰äº†åŸå…ˆçš„å¯¹è±¡ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575032182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155755,"user_name":"W.jyao","can_delete":false,"product_type":"c1","uid":1422582,"ip_address":"","ucode":"C57B3A78B6A795","user_header":"https://static001.geekbang.org/account/avatar/00/15/b4/f6/735673f7.jpg","comment_is_top":false,"comment_ctime":1574749624,"is_pvip":false,"replies":[{"id":59873,"content":"ç‰¹åˆ«æœ‰å›°éš¾çš„ç‚¹å¯ä»¥æå‡ºã€‚å¤§éƒ¨åˆ†æ¦‚å¿µçš„å¼•å…¥æˆ‘åº”è¯¥éƒ½æ˜¯æœ‰è§£é‡Šçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574764356,"ip_address":"","comment_id":155755,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å¯¹ä¸ç†Ÿæ‚‰C++ 11çš„ç¨‹åºå‘˜æ¥çœ‹ï¼Œæœ‰çš„åœ°æ–¹ä¸æ˜¯å¾ˆæ‡‚","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475860,"discussion_content":"ç‰¹åˆ«æœ‰å›°éš¾çš„ç‚¹å¯ä»¥æå‡ºã€‚å¤§éƒ¨åˆ†æ¦‚å¿µçš„å¼•å…¥æˆ‘åº”è¯¥éƒ½æ˜¯æœ‰è§£é‡Šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574764356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157147,"user_name":"å‡€è²å¦–ç«","can_delete":false,"product_type":"c1","uid":1089372,"ip_address":"","ucode":"2AFE1021696E53","user_header":"https://static001.geekbang.org/account/avatar/00/10/9f/5c/372201cf.jpg","comment_is_top":false,"comment_ctime":1575042043,"is_pvip":false,"replies":[{"id":60294,"content":"å—¯ï¼Œæ˜¯çš„ã€‚ä½ æ˜¯æœ€æ—©æƒ³èµ·æŒ‡é’ˆè¿˜æœ‰è¿™äº›æ“ä½œçš„ã€‚ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575078360,"ip_address":"","comment_id":157147,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å®Œæ•´çš„è¿˜ç¼º++,- -,+=,-=,&lt;,&gt;ç­‰æ™®é€šæŒ‡é’ˆæ”¯æŒçš„æ“ä½œ","like_count":7,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475860,"discussion_content":"ç‰¹åˆ«æœ‰å›°éš¾çš„ç‚¹å¯ä»¥æå‡ºã€‚å¤§éƒ¨åˆ†æ¦‚å¿µçš„å¼•å…¥æˆ‘åº”è¯¥éƒ½æ˜¯æœ‰è§£é‡Šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574764356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174860,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1580440576,"is_pvip":false,"replies":[{"id":67968,"content":"æ˜¯ï¼Œè¿™éƒ¨ä»½çš„è§„åˆ™æœ‰ç‚¹æï¼Œæˆ‘åœ¨ç¬¬ 9 è®²æ‰è¿›è¡Œäº†éƒ¨åˆ†æè¿°ã€‚è·Ÿä½ è¯´çš„ç›¸å…³çš„æ˜¯è¿™ä¸¤æ¡ï¼š\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±æä¾›ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼ˆå¿…é¡»å½¢å¦‚ Obj(Obj&amp;) æˆ– Obj(const Obj&amp;)ï¼›ä¸æ˜¯æ¨¡æ¿ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªã€‚\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1580447575,"ip_address":"","comment_id":174860,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è¿™ä¸€èŠ‚ç¡®å®æ¯”è¾ƒéš¾ï¼Œæœ‰ä¸ªé—®é¢˜è¯·é—®ä¸‹è€å¸ˆï¼Œæœ€ç»ˆç‰ˆæœ¬çš„smart_pträ¸­ï¼Œæ‹·è´æ„é€ æœ‰ä¸¤ä¸ªå®ç°ï¼Œä¸€ä¸ªæ˜¯åŸºäºæ¨¡æ¿ç”¨äºç±»å‹è½¬åŒ–åœºæ™¯ä¸‹ä½¿ç”¨çš„Aï¼Œä¸€ä¸ªå°±æ˜¯æ™®é€šçš„æ‹·è´æ„é€ Bï¼›ä½†æ˜¯ç§»åŠ¨æ„é€ åªæœ‰ä¸€ä¸ªï¼ŒåŸºäºæ¨¡æ¿çš„Cã€‚è¿™ç§å·®å¼‚çš„åŸå› æ˜¯Aè¿™ç§æ‹·è´æ„é€ å†ç¼–è¯‘å™¨çœ‹æ¥å¹¶ä¸æ˜¯æ‹·è´æ„é€ ï¼Œå¦‚æœæˆ‘ä¸å†™Bè¿™ä¸ªæ„é€ ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ‹·è´æ„é€ å—ï¼Ÿ ä½†æ˜¯ç§»åŠ¨æ„é€ åˆä¸ä¼šæœ‰è¿™ç§è¡Œä¸ºå—ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482549,"discussion_content":"æ˜¯ï¼Œè¿™éƒ¨ä»½çš„è§„åˆ™æœ‰ç‚¹æï¼Œæˆ‘åœ¨ç¬¬ 9 è®²æ‰è¿›è¡Œäº†éƒ¨åˆ†æè¿°ã€‚è·Ÿä½ è¯´çš„ç›¸å…³çš„æ˜¯è¿™ä¸¤æ¡ï¼š\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±æä¾›ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼ˆå¿…é¡»å½¢å¦‚ Obj(Obj&amp;amp;) æˆ– Obj(const Obj&amp;amp;)ï¼›ä¸æ˜¯æ¨¡æ¿ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªã€‚\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580447575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182307,"user_name":"æ–‡è‹¥","can_delete":false,"product_type":"c1","uid":1017387,"ip_address":"","ucode":"3D3045975ED2DB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/86/2b/f82a7d5a.jpg","comment_is_top":false,"comment_ctime":1582766667,"is_pvip":false,"replies":[{"id":70608,"content":"23 åˆ° 27 è®²çš„å†…å®¹å¯ä»¥çœ‹ä¸€ä¸‹ã€‚\n\nä¸“æ³¨åç«¯å¼€å‘çš„ï¼Œå¯ä»¥çœ‹ Boost.Asioã€‚ä¸“æ è®¨è®ºäº† C++ REST SDKï¼ˆå…¶ä¸­ç”¨åˆ°äº† Boost.Asioï¼‰ã€‚\n\nå…¶ä»–å¯ä»¥è€ƒè™‘çš„ï¼ˆæ²¡æœ‰ç”¨è¿‡ï¼Œæ²¡æœ‰æ˜ç¡®æ¨èï¼‰ï¼š\n\nhttps:&#47;&#47;www.treefrogframework.org&#47;\nhttps:&#47;&#47;www.webtoolkit.eu&#47;wt\nhttp:&#47;&#47;pistache.io&#47;\nhttps:&#47;&#47;github.com&#47;ipkn&#47;crow\nhttps:&#47;&#47;github.com&#47;qicosmos&#47;cinatra","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1582778538,"ip_address":"","comment_id":182307,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œèƒ½å¦æ¨èä¸€äº›æ¯”è¾ƒç»å…¸çš„C++å¼€æºé¡¹ç›®ï¼Œç‰¹åˆ«æ˜¯å…³äºåç«¯å¼€å‘çš„ã€‚","like_count":5,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485298,"discussion_content":"23 åˆ° 27 è®²çš„å†…å®¹å¯ä»¥çœ‹ä¸€ä¸‹ã€‚\n\nä¸“æ³¨åç«¯å¼€å‘çš„ï¼Œå¯ä»¥çœ‹ Boost.Asioã€‚ä¸“æ è®¨è®ºäº† C++ REST SDKï¼ˆå…¶ä¸­ç”¨åˆ°äº† Boost.Asioï¼‰ã€‚\n\nå…¶ä»–å¯ä»¥è€ƒè™‘çš„ï¼ˆæ²¡æœ‰ç”¨è¿‡ï¼Œæ²¡æœ‰æ˜ç¡®æ¨èï¼‰ï¼š\n\nhttps://www.treefrogframework.org/\nhttps://www.webtoolkit.eu/wt\nhttp://pistache.io/\nhttps://github.com/ipkn/crow\nhttps://github.com/qicosmos/cinatra","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582778538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158685,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1575433650,"is_pvip":false,"replies":[{"id":60759,"content":"æ¯”å¦‚ï¼Œå¦‚æœä½ æŠŠè¿™ä¸ªæŒ‡é’ˆä¼ ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ç±»å‹æ˜¯smart_ptrï¼Œç­‰å‡½æ•°è¿”å›ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ¶ˆå¤±äº†â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575464338,"ip_address":"","comment_id":158685,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼š\nã€ä¸Šé¢å®ç°çš„æœ€å¤§é—®é¢˜æ˜¯ï¼Œå®ƒçš„è¡Œä¸ºä¼šè®©ç¨‹åºå‘˜éå¸¸å®¹æ˜“çŠ¯é”™ã€‚ä¸€ä¸å°å¿ƒæŠŠå®ƒä¼ é€’ç»™å¦å¤–ä¸€ä¸ª smart_ptrï¼Œä½ å°±ä¸å†æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡äº†â€¦â€¦ã€‘\nsmart_ptr&lt;int&gt; ptr2(ptr1)\nå°±æ˜¯è€å¸ˆè®²çš„è¿™å¥è¯ä¸­ï¼Œæ„æ€æ˜¯åœ¨ä½¿ç”¨æ‹·è´æ„é€ æˆ–è€…èµ‹å€¼è¿ç®—ç¬¦çš„æ—¶å€™ï¼Œç”±äºptr_ = nullptr;çš„å­˜åœ¨æ‰€ä»¥å¯¼è‡´å¯¹è±¡ptr1å¤±æ•ˆäº†ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485298,"discussion_content":"23 åˆ° 27 è®²çš„å†…å®¹å¯ä»¥çœ‹ä¸€ä¸‹ã€‚\n\nä¸“æ³¨åç«¯å¼€å‘çš„ï¼Œå¯ä»¥çœ‹ Boost.Asioã€‚ä¸“æ è®¨è®ºäº† C++ REST SDKï¼ˆå…¶ä¸­ç”¨åˆ°äº† Boost.Asioï¼‰ã€‚\n\nå…¶ä»–å¯ä»¥è€ƒè™‘çš„ï¼ˆæ²¡æœ‰ç”¨è¿‡ï¼Œæ²¡æœ‰æ˜ç¡®æ¨èï¼‰ï¼š\n\nhttps://www.treefrogframework.org/\nhttps://www.webtoolkit.eu/wt\nhttp://pistache.io/\nhttps://github.com/ipkn/crow\nhttps://github.com/qicosmos/cinatra","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582778538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155625,"user_name":"Lilin","can_delete":false,"product_type":"c1","uid":1246721,"ip_address":"","ucode":"3FF845710CF6ED","user_header":"https://static001.geekbang.org/account/avatar/00/13/06/01/64c4b809.jpg","comment_is_top":false,"comment_ctime":1574730192,"is_pvip":false,"replies":[{"id":59863,"content":"å¸Œæœ›æ˜¯éš¾ï¼Œä½†è¿˜èƒ½çœ‹å¾—ä¸‹å»ã€‚å“ˆå“ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574762970,"ip_address":"","comment_id":155625,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æ‰ç¬¬äºŒèŠ‚ï¼Œå°±æœ‰ç‚¹åƒåŠ›äº†ã€‚è¿™ç¯‡ä¸“æ çœŸæ˜¯æ»¡æ»¡çš„å¹²è´§","like_count":11,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491537,"discussion_content":"æ³¨æ„ä¸€ä¸‹æˆ‘å†™çš„æ˜¯ï¼š\n\noperator=(smart_ptr rhs)\n\nåœ¨è¿›å…¥å‡½æ•°ä½“æ—¶ï¼Œå·²ç»æ–°æ‹·è´æ„é€ äº†ä¸€ä¸ª smart_ptr å‡ºæ¥äº†ã€‚æ´»å…¨åœ¨æ‹·è´æ„é€ é‡Œå¹²äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586782659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205640,"user_name":"è¥¿é’¾é’¾","can_delete":false,"product_type":"c1","uid":1097722,"ip_address":"","ucode":"0EE77083636ED9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJV27QOK57cdpdh3E4hbArCOlccdtjCyWooF9fhjeSKAMo9SN1v9RODkrZUZD4RejjbdsqU2FIeMA/132","comment_is_top":false,"comment_ctime":1586693674,"is_pvip":false,"replies":[{"id":76956,"content":"æ³¨æ„ä¸€ä¸‹æˆ‘å†™çš„æ˜¯ï¼š\n\noperator=(smart_ptr rhs)\n\nåœ¨è¿›å…¥å‡½æ•°ä½“æ—¶ï¼Œå·²ç»æ–°æ‹·è´æ„é€ äº†ä¸€ä¸ª smart_ptr å‡ºæ¥äº†ã€‚æ´»å…¨åœ¨æ‹·è´æ„é€ é‡Œå¹²äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1586782659,"ip_address":"","comment_id":205640,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"smart_ptr&amp;  operator=(smart_ptr rhs) noexcept  {    rhs.swap(*this);    return *this;  }\nè€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ç­‰å·è¿ç®—ç¬¦ï¼Œä¸ºä»€ä¹ˆä¸å¢åŠ å¼•ç”¨è®¡æ•°å‘¢ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491537,"discussion_content":"æ³¨æ„ä¸€ä¸‹æˆ‘å†™çš„æ˜¯ï¼š\n\noperator=(smart_ptr rhs)\n\nåœ¨è¿›å…¥å‡½æ•°ä½“æ—¶ï¼Œå·²ç»æ–°æ‹·è´æ„é€ äº†ä¸€ä¸ª smart_ptr å‡ºæ¥äº†ã€‚æ´»å…¨åœ¨æ‹·è´æ„é€ é‡Œå¹²äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586782659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162239,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1576484948,"is_pvip":false,"replies":[{"id":61751,"content":"æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ã€‚ä½†æ²¡äººé˜»æŒ¡ä½ å†™ new shared_ptrâ€¦ã€‚\n\nè¢«ç®¡ç†çš„å¯¹è±¡ä¸ä¼šåœ¨æ ˆä¸Šã€‚åªèƒ½æ˜¯å †æˆ–è€…ä½ çš„å†…å­˜ç®¡ç†å™¨ä½¿ç”¨çš„ç‰¹æ®ŠåŒºåŸŸã€‚\n\nç›®å‰çš„æ¨èæ˜¯ä¸è¦ä½¿ç”¨è£¸æŒ‡é’ˆã€‚ä½¿ç”¨å€¼ï¼Œæˆ–è€…æ™ºèƒ½æŒ‡é’ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576500578,"ip_address":"","comment_id":162239,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºä¸€ä¸ªå¯¹è±¡ä»¥åï¼Œ åŒ…æ‹¬è¿™ä¸ªç§æœ‰æˆå‘˜T* ptr_ä»¥åŠå…¶ä»–éƒ½æ˜¯æ”¾åœ¨æ ˆç©ºé—´ä¸Šçš„å§ï¼Ÿè¿™æ ·å°±å¯ä»¥å¯¹è±¡ä¸åœ¨ä½œç”¨åŸŸä»¥åï¼Œè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œç„¶ådeleteå¼€è¾Ÿçš„ç›¸å…³ç©ºé—´äº†å§ï¼Ÿ\næ™ºèƒ½æŒ‡é’ˆå®è´¨ä¸Šå°±æ˜¯ä½¿ç”¨ä¸€ä¸ª&quot;æ ˆ&quot;ä¸Šçš„å¯¹è±¡æ¥ç®¡ç†ä¸€å—å†…å­˜åœ°å€(å¯èƒ½æ˜¯å †å¯èƒ½æ˜¯æ ˆ)ï¼Œç”¨&quot;æ ˆ&quot;å°±å¯ä»¥ä¿è¯ææ„å‡½æ•°çš„è¿›è¡Œï¼Œä¹Ÿå°±ä¿è¯äº†deleteçš„è¿›è¡Œï¼Œä¹Ÿå°±é¿å…äº†å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚\næ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·ç†è§£?\né‚£æˆ‘ä»¬åº”è¯¥ä»€ä¹ˆæ—¶å€™ä½¿ç”¨new deleteæ¥ç®¡ç†å†…å­˜ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå‘¢ï¼Ÿ\nè¿™äº›æ–¹é¢æœ‰äº›ç–‘æƒ‘ï¼Œè°¢è°¢è€å¸ˆæ‚¨çš„è®²è§£ä¸å›å¤ã€‚","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477986,"discussion_content":"æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ã€‚ä½†æ²¡äººé˜»æŒ¡ä½ å†™ new shared_ptrâ€¦ã€‚\n\nè¢«ç®¡ç†çš„å¯¹è±¡ä¸ä¼šåœ¨æ ˆä¸Šã€‚åªèƒ½æ˜¯å †æˆ–è€…ä½ çš„å†…å­˜ç®¡ç†å™¨ä½¿ç”¨çš„ç‰¹æ®ŠåŒºåŸŸã€‚\n\nç›®å‰çš„æ¨èæ˜¯ä¸è¦ä½¿ç”¨è£¸æŒ‡é’ˆã€‚ä½¿ç”¨å€¼ï¼Œæˆ–è€…æ™ºèƒ½æŒ‡é’ˆã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576500578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":84868,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆçš„æŒ‡ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576507599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156842,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1574987772,"is_pvip":false,"replies":[{"id":60276,"content":"æ¯”å¦‚ï¼Œä½ çš„å¯¹è±¡æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œç®¡ç†ç€ä¸¤ä¸ªå¯¹è±¡ï¼Œå¦‚æœä½ åœ¨æ‹·è´èµ‹å€¼æ—¶é€ä¸ªåœ°å¤åˆ¶å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„ç›¸åº”çš„ä¸¤ä¸ªæˆå‘˜å¯¹è±¡ï¼Œåœ¨å¤åˆ¶ç¬¬äºŒä¸ªæ—¶å‘ç”Ÿäº†å¼‚å¸¸ï¼Œé‚£ this å¯¹è±¡å°±å¤„äºä¸€ä¸ªå¥‡æ€ªçš„çŠ¶æ€ï¼šæ—¢æ²¡æˆåŠŸå®Œæˆå¤åˆ¶ï¼Œä¹Ÿæ²¡æœ‰äº†åŸå…ˆçš„å¯¹è±¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575032182,"ip_address":"","comment_id":156842,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­æåˆ°çš„å‘ç”Ÿå¼‚å¸¸ï¼Œthiså¯¹è±¡è¢«ç ´åï¼Œå…·ä½“æ˜¯æŒ‡çš„å¯¹è±¡é‡Œçš„ä»€ä¹ˆæˆå‘˜è¢«ç ´åå‘¢ï¼Œè¿™ä¸ªæ²¡çœ‹çš„å¤ªæ˜ç™½ã€‚","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476251,"discussion_content":"æ¯”å¦‚ï¼Œä½ çš„å¯¹è±¡æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œç®¡ç†ç€ä¸¤ä¸ªå¯¹è±¡ï¼Œå¦‚æœä½ åœ¨æ‹·è´èµ‹å€¼æ—¶é€ä¸ªåœ°å¤åˆ¶å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„ç›¸åº”çš„ä¸¤ä¸ªæˆå‘˜å¯¹è±¡ï¼Œåœ¨å¤åˆ¶ç¬¬äºŒä¸ªæ—¶å‘ç”Ÿäº†å¼‚å¸¸ï¼Œé‚£ this å¯¹è±¡å°±å¤„äºä¸€ä¸ªå¥‡æ€ªçš„çŠ¶æ€ï¼šæ—¢æ²¡æˆåŠŸå®Œæˆå¤åˆ¶ï¼Œä¹Ÿæ²¡æœ‰äº†åŸå…ˆçš„å¯¹è±¡ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575032182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156393,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1574866138,"is_pvip":false,"replies":[{"id":60068,"content":"å¦‚æœä½ æä¸æ¸…ï¼Œé‚£å¤šåŠå°±æ˜¯ä¸è¯¥è¿”å›å¼•ç”¨çš„æƒ…å†µã€‚ä¸‹é¢ä¼šè®²åˆ°è¿™ä¸ªè¯é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåº”è¯¥ç›´æ¥è¿”å›å¯¹è±¡å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574898970,"ip_address":"","comment_id":156393,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œé—®ä¸ªæ¯”è¾ƒåŸºç¡€çš„é—®é¢˜ï¼Œå°±æ˜¯è¿ç®—ç¬¦é‡è½½çš„æ—¶å€™ï¼Œæˆ‘è€å¸ˆæä¸æ¸… è¯¥è¿”å›å€¼ è¿˜æ˜¯ è¿”å›å¼•ç”¨ï¼Œè¿™å–å†³äºä»€ä¹ˆï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1141324,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/dDk3WicuUbhvcb4R8PD0YiaFteqQvC4UpXHw4chKLDKB0qaOGeCxBJ3nfiaNZAyVQmAgesyE2MvABydxg6gic29j5w/132","nickname":"äºŒæ ä¸€","note":"","ucode":"040C9A30E7ADF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":79030,"discussion_content":"èµ‹å€¼æ“ä½œç¬¦è¿”å›å¼•ç”¨æ˜¯ä¸ºäº†è¿ç»­èµ‹å€¼","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1576048214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476094,"discussion_content":"å¦‚æœä½ æä¸æ¸…ï¼Œé‚£å¤šåŠå°±æ˜¯ä¸è¯¥è¿”å›å¼•ç”¨çš„æƒ…å†µã€‚ä¸‹é¢ä¼šè®²åˆ°è¿™ä¸ªè¯é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåº”è¯¥ç›´æ¥è¿”å›å¯¹è±¡å€¼ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574898970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155755,"user_name":"W.jyao","can_delete":false,"product_type":"c1","uid":1422582,"ip_address":"","ucode":"C57B3A78B6A795","user_header":"https://static001.geekbang.org/account/avatar/00/15/b4/f6/735673f7.jpg","comment_is_top":false,"comment_ctime":1574749624,"is_pvip":false,"replies":[{"id":59873,"content":"ç‰¹åˆ«æœ‰å›°éš¾çš„ç‚¹å¯ä»¥æå‡ºã€‚å¤§éƒ¨åˆ†æ¦‚å¿µçš„å¼•å…¥æˆ‘åº”è¯¥éƒ½æ˜¯æœ‰è§£é‡Šçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574764356,"ip_address":"","comment_id":155755,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å¯¹ä¸ç†Ÿæ‚‰C++ 11çš„ç¨‹åºå‘˜æ¥çœ‹ï¼Œæœ‰çš„åœ°æ–¹ä¸æ˜¯å¾ˆæ‡‚","like_count":8,"discussions":[{"author":{"id":1141324,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/dDk3WicuUbhvcb4R8PD0YiaFteqQvC4UpXHw4chKLDKB0qaOGeCxBJ3nfiaNZAyVQmAgesyE2MvABydxg6gic29j5w/132","nickname":"äºŒæ ä¸€","note":"","ucode":"040C9A30E7ADF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":79030,"discussion_content":"èµ‹å€¼æ“ä½œç¬¦è¿”å›å¼•ç”¨æ˜¯ä¸ºäº†è¿ç»­èµ‹å€¼","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1576048214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476094,"discussion_content":"å¦‚æœä½ æä¸æ¸…ï¼Œé‚£å¤šåŠå°±æ˜¯ä¸è¯¥è¿”å›å¼•ç”¨çš„æƒ…å†µã€‚ä¸‹é¢ä¼šè®²åˆ°è¿™ä¸ªè¯é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåº”è¯¥ç›´æ¥è¿”å›å¯¹è±¡å€¼ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574898970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157147,"user_name":"å‡€è²å¦–ç«","can_delete":false,"product_type":"c1","uid":1089372,"ip_address":"","ucode":"2AFE1021696E53","user_header":"https://static001.geekbang.org/account/avatar/00/10/9f/5c/372201cf.jpg","comment_is_top":false,"comment_ctime":1575042043,"is_pvip":false,"replies":[{"id":60294,"content":"å—¯ï¼Œæ˜¯çš„ã€‚ä½ æ˜¯æœ€æ—©æƒ³èµ·æŒ‡é’ˆè¿˜æœ‰è¿™äº›æ“ä½œçš„ã€‚ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575078360,"ip_address":"","comment_id":157147,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å®Œæ•´çš„è¿˜ç¼º++,- -,+=,-=,&lt;,&gt;ç­‰æ™®é€šæŒ‡é’ˆæ”¯æŒçš„æ“ä½œ","like_count":7,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476340,"discussion_content":"å—¯ï¼Œæ˜¯çš„ã€‚ä½ æ˜¯æœ€æ—©æƒ³èµ·æŒ‡é’ˆè¿˜æœ‰è¿™äº›æ“ä½œçš„ã€‚ğŸ˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575078360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2557701,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Wjsc175urqxxBcCsxSDG5iaWcEq4hIg4SCCVJCIC108Ul5l7US4iaE3iaaMWodSJeybGemicEnfetHFCj9P6QI17xw/132","nickname":"Geek_15f2c9","note":"","ucode":"3AA686B1D31AB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366052,"discussion_content":"æ ‡å‡†åº“ä¸æ”¯æŒ++ï¼Œ--è¿™äº›æ“ä½œçš„ï¼ŒæŸäº›è¿­ä»£å™¨æ‰æ”¯æŒ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617949523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1784280,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/39/d8/b656bc67.jpg","nickname":"Utopian","note":"","ucode":"E203B7425D8382","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303466,"discussion_content":"-- ++ += -= æ˜¯ä¸æ”¯æŒçš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599275494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174860,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1580440576,"is_pvip":false,"replies":[{"id":67968,"content":"æ˜¯ï¼Œè¿™éƒ¨ä»½çš„è§„åˆ™æœ‰ç‚¹æï¼Œæˆ‘åœ¨ç¬¬ 9 è®²æ‰è¿›è¡Œäº†éƒ¨åˆ†æè¿°ã€‚è·Ÿä½ è¯´çš„ç›¸å…³çš„æ˜¯è¿™ä¸¤æ¡ï¼š\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±æä¾›ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼ˆå¿…é¡»å½¢å¦‚ Obj(Obj&amp;) æˆ– Obj(const Obj&amp;)ï¼›ä¸æ˜¯æ¨¡æ¿ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªã€‚\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1580447575,"ip_address":"","comment_id":174860,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è¿™ä¸€èŠ‚ç¡®å®æ¯”è¾ƒéš¾ï¼Œæœ‰ä¸ªé—®é¢˜è¯·é—®ä¸‹è€å¸ˆï¼Œæœ€ç»ˆç‰ˆæœ¬çš„smart_pträ¸­ï¼Œæ‹·è´æ„é€ æœ‰ä¸¤ä¸ªå®ç°ï¼Œä¸€ä¸ªæ˜¯åŸºäºæ¨¡æ¿ç”¨äºç±»å‹è½¬åŒ–åœºæ™¯ä¸‹ä½¿ç”¨çš„Aï¼Œä¸€ä¸ªå°±æ˜¯æ™®é€šçš„æ‹·è´æ„é€ Bï¼›ä½†æ˜¯ç§»åŠ¨æ„é€ åªæœ‰ä¸€ä¸ªï¼ŒåŸºäºæ¨¡æ¿çš„Cã€‚è¿™ç§å·®å¼‚çš„åŸå› æ˜¯Aè¿™ç§æ‹·è´æ„é€ å†ç¼–è¯‘å™¨çœ‹æ¥å¹¶ä¸æ˜¯æ‹·è´æ„é€ ï¼Œå¦‚æœæˆ‘ä¸å†™Bè¿™ä¸ªæ„é€ ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ‹·è´æ„é€ å—ï¼Ÿ ä½†æ˜¯ç§»åŠ¨æ„é€ åˆä¸ä¼šæœ‰è¿™ç§è¡Œä¸ºå—ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476340,"discussion_content":"å—¯ï¼Œæ˜¯çš„ã€‚ä½ æ˜¯æœ€æ—©æƒ³èµ·æŒ‡é’ˆè¿˜æœ‰è¿™äº›æ“ä½œçš„ã€‚ğŸ˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575078360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2557701,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Wjsc175urqxxBcCsxSDG5iaWcEq4hIg4SCCVJCIC108Ul5l7US4iaE3iaaMWodSJeybGemicEnfetHFCj9P6QI17xw/132","nickname":"Geek_15f2c9","note":"","ucode":"3AA686B1D31AB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366052,"discussion_content":"æ ‡å‡†åº“ä¸æ”¯æŒ++ï¼Œ--è¿™äº›æ“ä½œçš„ï¼ŒæŸäº›è¿­ä»£å™¨æ‰æ”¯æŒ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617949523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1784280,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/39/d8/b656bc67.jpg","nickname":"Utopian","note":"","ucode":"E203B7425D8382","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303466,"discussion_content":"-- ++ += -= æ˜¯ä¸æ”¯æŒçš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599275494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182307,"user_name":"æ–‡è‹¥","can_delete":false,"product_type":"c1","uid":1017387,"ip_address":"","ucode":"3D3045975ED2DB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/86/2b/f82a7d5a.jpg","comment_is_top":false,"comment_ctime":1582766667,"is_pvip":false,"replies":[{"id":70608,"content":"23 åˆ° 27 è®²çš„å†…å®¹å¯ä»¥çœ‹ä¸€ä¸‹ã€‚\n\nä¸“æ³¨åç«¯å¼€å‘çš„ï¼Œå¯ä»¥çœ‹ Boost.Asioã€‚ä¸“æ è®¨è®ºäº† C++ REST SDKï¼ˆå…¶ä¸­ç”¨åˆ°äº† Boost.Asioï¼‰ã€‚\n\nå…¶ä»–å¯ä»¥è€ƒè™‘çš„ï¼ˆæ²¡æœ‰ç”¨è¿‡ï¼Œæ²¡æœ‰æ˜ç¡®æ¨èï¼‰ï¼š\n\nhttps:&#47;&#47;www.treefrogframework.org&#47;\nhttps:&#47;&#47;www.webtoolkit.eu&#47;wt\nhttp:&#47;&#47;pistache.io&#47;\nhttps:&#47;&#47;github.com&#47;ipkn&#47;crow\nhttps:&#47;&#47;github.com&#47;qicosmos&#47;cinatra","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1582778538,"ip_address":"","comment_id":182307,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œèƒ½å¦æ¨èä¸€äº›æ¯”è¾ƒç»å…¸çš„C++å¼€æºé¡¹ç›®ï¼Œç‰¹åˆ«æ˜¯å…³äºåç«¯å¼€å‘çš„ã€‚","like_count":5,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482549,"discussion_content":"æ˜¯ï¼Œè¿™éƒ¨ä»½çš„è§„åˆ™æœ‰ç‚¹æï¼Œæˆ‘åœ¨ç¬¬ 9 è®²æ‰è¿›è¡Œäº†éƒ¨åˆ†æè¿°ã€‚è·Ÿä½ è¯´çš„ç›¸å…³çš„æ˜¯è¿™ä¸¤æ¡ï¼š\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±æä¾›ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼ˆå¿…é¡»å½¢å¦‚ Obj(Obj&amp;amp;) æˆ– Obj(const Obj&amp;amp;)ï¼›ä¸æ˜¯æ¨¡æ¿ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªã€‚\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580447575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158685,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1575433650,"is_pvip":false,"replies":[{"id":60759,"content":"æ¯”å¦‚ï¼Œå¦‚æœä½ æŠŠè¿™ä¸ªæŒ‡é’ˆä¼ ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ç±»å‹æ˜¯smart_ptrï¼Œç­‰å‡½æ•°è¿”å›ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ¶ˆå¤±äº†â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575464338,"ip_address":"","comment_id":158685,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼š\nã€ä¸Šé¢å®ç°çš„æœ€å¤§é—®é¢˜æ˜¯ï¼Œå®ƒçš„è¡Œä¸ºä¼šè®©ç¨‹åºå‘˜éå¸¸å®¹æ˜“çŠ¯é”™ã€‚ä¸€ä¸å°å¿ƒæŠŠå®ƒä¼ é€’ç»™å¦å¤–ä¸€ä¸ª smart_ptrï¼Œä½ å°±ä¸å†æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡äº†â€¦â€¦ã€‘\nsmart_ptr&lt;int&gt; ptr2(ptr1)\nå°±æ˜¯è€å¸ˆè®²çš„è¿™å¥è¯ä¸­ï¼Œæ„æ€æ˜¯åœ¨ä½¿ç”¨æ‹·è´æ„é€ æˆ–è€…èµ‹å€¼è¿ç®—ç¬¦çš„æ—¶å€™ï¼Œç”±äºptr_ = nullptr;çš„å­˜åœ¨æ‰€ä»¥å¯¼è‡´å¯¹è±¡ptr1å¤±æ•ˆäº†ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476808,"discussion_content":"æ¯”å¦‚ï¼Œå¦‚æœä½ æŠŠè¿™ä¸ªæŒ‡é’ˆä¼ ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ç±»å‹æ˜¯smart_ptrï¼Œç­‰å‡½æ•°è¿”å›ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ¶ˆå¤±äº†â€¦â€¦","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575464338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157471,"user_name":"metalmac.kyle","can_delete":false,"product_type":"c1","uid":1001832,"ip_address":"","ucode":"74795A8825FCAA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/68/bef5f7d3.jpg","comment_is_top":false,"comment_ctime":1575170740,"is_pvip":false,"replies":[{"id":60366,"content":"æ²¡é”™ï¼Œç›¸å…³çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼Œä¸€å®šè¦å¤šå®è·µæ‰è¡Œã€‚\n\nä¸è¿‡ï¼Œå›è¿‡å¤´æ¥çœ‹ï¼Œæˆ‘è§‰å¾—æˆ‘æ‹¿æ™ºèƒ½æŒ‡é’ˆå¼€å¤´ï¼Œéš¾åº¦å¯èƒ½æ˜¯æœ‰ç‚¹è®¾é«˜äº†ã€‚å“ˆå“ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575183383,"ip_address":"","comment_id":157471,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"é€šè¿‡è€å¸ˆçš„ä¾‹å­æ¥å­¦ä¹ æ·±å…¥å­¦ä¹ æ™ºèƒ½æŒ‡é’ˆï¼Œæ„Ÿè§‰è¿™ç§æ¡ˆä¾‹å¼éƒ½è°¢è°¢ä»£å…¥æ„Ÿå¾ˆå¼ºï¼Œå†éš¾çš„çŸ¥è¯†ç‚¹ä¹Ÿä¸æ¯ç‡¥è¿˜èƒ½ç›´æ¥å­¦ä»¥è‡´ç”¨ï¼Œé†é†çŒé¡¶ï¼Œæœ‰ç§é‡è¯»csappçš„æ„Ÿè§‰ï¼Cppä¸€å¤§ç‰¹æ€§å°±æ˜¯å„ç§å¤æ‚çš„è¯­æ³•ä»¥åŠç¬¦å·è®¾è®¡ï¼Œè¿™è®©å¥¹è¢«çˆ±çš„äººå¥‰ä¸Šç¥å›ï¼Œæ¨çš„äººä¹Ÿæ¨ä¹‹å…¥éª¨ï¼ŒæŒ‡é’ˆä½œä¸ºåŒåˆƒå‰‘å……æ»¡äº†æ¶é­”èˆ¬çš„é­”åŠ›ï¼Œè™½ç„¶ä¼šè®©äººæœ›è€Œå´æ­¥ä½†ä¹Ÿæ˜¯å¸å¼•æˆ‘ä¸€ç›´å­¦ä¹ cppçš„åŠ¨åŠ›æ‰€åœ¨ï¼Œå¯¹åº•å±‚çš„æ“ä½œå’Œç†è§£å®åœ¨è®©äººç€é­”å“ˆå“ˆã€‚\nè¨€å½’æ­£ä¼ ï¼Œå°å°çš„æ„é€ æ™ºèƒ½æŒ‡é’ˆè¯¾è•´å«äº†å¯¹Cppä¸€ç³»åˆ—çŸ¥è¯†çš„å¤ä¹ å·©å›ºï¼Œæ„é€ å‡½æ•°ï¼Œè¿ç®—ç¬¦é‡è½½ï¼ŒæŒ‡é’ˆå¼•ç”¨ç‰¹æ€§ï¼Œæ¨¡æ¿ç­‰å„ç±»çŸ¥è¯†ç‚¹çš„è®¾è®¡ä¸å®ç°ï¼Œæƒ³çœŸæ­£æŒæ¡è¿˜éœ€è¦åå¤ä¸Šæœºå®è·µå‘¢ï¼Œè¿˜æ˜¯åº”äº†å¤è¯ï¼Œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æ¬²çŸ¥æ­¤äº‹é¡»èº¬è¡Œæµ…ï¼ğŸ§","like_count":5},{"had_liked":false,"id":155888,"user_name":"å§œå§œ","can_delete":false,"product_type":"c1","uid":1120332,"ip_address":"","ucode":"1DAD620C8E9F31","user_header":"https://static001.geekbang.org/account/avatar/00/11/18/4c/e12f3b41.jpg","comment_is_top":false,"comment_ctime":1574774548,"is_pvip":false,"replies":[{"id":59914,"content":"å¾ˆå…¨ã€‚æœ‰å‡ ä¸ªå°é—®é¢˜å“ˆï¼ˆåƒresetæœ‰å‡ ä¸ªé‡è½½ä¸ç®—ğŸ˜„ï¼‰ï¼š\n\nè·å–åŸå§‹æŒ‡é’ˆçš„ get æ–¹æ³•æˆ‘æä¾›äº†ï¼›\n* å’Œ -&gt; ä»£ç é‡Œæ˜¯æä¾›çš„ï¼›\nå¼•ç”¨è®¡æ•°å™¨å€¼ä¹Ÿæ˜¯æœ‰çš„ã€‚\n\nå®è·µå±‚é¢ï¼Œæœ€å¤§çš„åŒºåˆ«ï¼Œé™¤äº†ä¸æ”¯æŒå¼±å¼•ç”¨å¤–ï¼Œå¯èƒ½æ˜¯ä¸æ”¯æŒè‡ªå®šä¹‰åˆ é™¤å™¨äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574812032,"ip_address":"","comment_id":155888,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è¿™ä¸ªsmart_ptrç›®å‰å·²ç»å®ç°äº†:è·å–æ‰€æœ‰æƒï¼Œå…±äº«æ‰€æœ‰æƒï¼Œæ‹·è´èµ‹å€¼è¯­æ„ï¼Œè®¡æ•°å™¨ï¼Œè‡ªåŠ¨å¢å‡ç­‰åŠŸèƒ½ã€‚\nè¿˜ç¼ºå°‘: è½¬ç§»æ‰€æœ‰æƒresetçš„æ“ä½œ(æˆ‘è®°å¾—resetæœ‰ä¸‰ç§é‡è½½æ–¹å¼);  è·å–åŸå§‹æŒ‡é’ˆæ–¹æ³•ï¼Œé‡å†™è§£å¼•ç”¨*ï¼Œé‡å†™æŒ‡å‘æ“ä½œç¬¦-&gt;ï¼Œé‡å†™æ¯”è¾ƒæ“ä½œç¬¦ï¼Œè·å–å¼•ç”¨è®¡æ•°å™¨å€¼çš„æ–¹æ³•ï¼Œåˆ¤æ–­å½“å‰å¼•ç”¨æ˜¯å¦ä¸º1çš„æ–¹æ³•ï¼Œä»¥åŠçº¿ç¨‹å®‰å…¨çš„è®¾è®¡ã€‚\næœ€åï¼Œshared_ptræœ¬èº«è¿˜éœ€è¦è§£å†³â€œå¾ªç¯å¼•ç”¨â€ï¼Œâ€œè‡ªå¼•ç”¨â€çš„é—®é¢˜ï¼Œä¸€èˆ¬éœ€è¦æ­é…å¼±æŒ‡é’ˆweak_pträ½¿ç”¨ã€‚\nè€å¸ˆï¼Œä¸çŸ¥æˆ‘å›ç­”çš„æ˜¯å¦å…¨é¢ï¼Œæœ‰æ— å·®é”™ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475912,"discussion_content":"å¾ˆå…¨ã€‚æœ‰å‡ ä¸ªå°é—®é¢˜å“ˆï¼ˆåƒresetæœ‰å‡ ä¸ªé‡è½½ä¸ç®—ğŸ˜„ï¼‰ï¼š\n\nè·å–åŸå§‹æŒ‡é’ˆçš„ get æ–¹æ³•æˆ‘æä¾›äº†ï¼›\n* å’Œ -&amp;gt; ä»£ç é‡Œæ˜¯æä¾›çš„ï¼›\nå¼•ç”¨è®¡æ•°å™¨å€¼ä¹Ÿæ˜¯æœ‰çš„ã€‚\n\nå®è·µå±‚é¢ï¼Œæœ€å¤§çš„åŒºåˆ«ï¼Œé™¤äº†ä¸æ”¯æŒå¼±å¼•ç”¨å¤–ï¼Œå¯èƒ½æ˜¯ä¸æ”¯æŒè‡ªå®šä¹‰åˆ é™¤å™¨äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574812032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120332,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/4c/e12f3b41.jpg","nickname":"å§œå§œ","note":"","ucode":"1DAD620C8E9F31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62055,"discussion_content":"ä¸å¥½æ„æ€å•Šï¼Œæ²¡çœ‹ä»”ç»†ï¼Œget()ï¼Œuse_count() ï¼Œ  operator*()ï¼Œ  operator->()ï¼Œ  operator bool() ï¼Œè¿™å‡ ä¸ªæ–¹æ³•è€å¸ˆéƒ½å·²ç»æä¾›äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574815415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158472,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1575379232,"is_pvip":false,"replies":[{"id":60660,"content":"è¿™ä¸ªå®ç°ä¸æ”¯æŒã€‚éœ€è¦å†™æ›´å¤šçš„ä»£ç ã€‚\n\nC++17 çš„ shared_ptr å¯ä»¥æ”¯æŒè¿™æ ·çš„å†™æ³•ï¼Œä½†ä¹Ÿå¾—æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨æ˜¯æ•°ç»„ï¼š\n\nstd::shared_ptr&lt;int[]&gt; ptr1{new int[5]};\nauto ptr2 = std::shared_ptr&lt;int[]&gt;{new int[5]};\n\nC++20 è¿›ä¸€æ­¥æ”¯æŒï¼š\n\nauto ptr3 = std::make_shared&lt;int[]&gt;(5);\n\nå¦å¤–ï¼Œnew int[5] ä¹‹åç”¨ delete æ˜¯ä¸å¯¹ï¼ˆå¥½ï¼‰çš„ã€‚è¿™å„¿ä¸€èˆ¬è¿˜ä¸ä¼šå‡ºé—®é¢˜ï¼Œå¦‚æœæ˜¯å¸¦ææ„çš„å¯¹è±¡å°±ä¸€å®šä¼šå‡ºé—®é¢˜çš„ã€‚new â€¦[] ä¹‹åä¸€å®šç”¨ delete[] â€¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575383517,"ip_address":"","comment_id":158472,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œé‚£æˆ‘å¦‚æœæƒ³å®ç°ç±»ä¼¼çš„:\nint* xxx = new int[5]; delete xxx;\nä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ€ä¹ˆåš?\nsmart_ptr&lt;int&gt; test_ptr(new int[5]);","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475912,"discussion_content":"å¾ˆå…¨ã€‚æœ‰å‡ ä¸ªå°é—®é¢˜å“ˆï¼ˆåƒresetæœ‰å‡ ä¸ªé‡è½½ä¸ç®—ğŸ˜„ï¼‰ï¼š\n\nè·å–åŸå§‹æŒ‡é’ˆçš„ get æ–¹æ³•æˆ‘æä¾›äº†ï¼›\n* å’Œ -&amp;gt; ä»£ç é‡Œæ˜¯æä¾›çš„ï¼›\nå¼•ç”¨è®¡æ•°å™¨å€¼ä¹Ÿæ˜¯æœ‰çš„ã€‚\n\nå®è·µå±‚é¢ï¼Œæœ€å¤§çš„åŒºåˆ«ï¼Œé™¤äº†ä¸æ”¯æŒå¼±å¼•ç”¨å¤–ï¼Œå¯èƒ½æ˜¯ä¸æ”¯æŒè‡ªå®šä¹‰åˆ é™¤å™¨äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574812032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120332,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/4c/e12f3b41.jpg","nickname":"å§œå§œ","note":"","ucode":"1DAD620C8E9F31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62055,"discussion_content":"ä¸å¥½æ„æ€å•Šï¼Œæ²¡çœ‹ä»”ç»†ï¼Œget()ï¼Œuse_count() ï¼Œ  operator*()ï¼Œ  operator->()ï¼Œ  operator bool() ï¼Œè¿™å‡ ä¸ªæ–¹æ³•è€å¸ˆéƒ½å·²ç»æä¾›äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574815415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157207,"user_name":"è´¾é™†å","can_delete":false,"product_type":"c1","uid":1321408,"ip_address":"","ucode":"2722C422077EE0","user_header":"https://static001.geekbang.org/account/avatar/00/14/29/c0/86fa3e92.jpg","comment_is_top":false,"comment_ctime":1575082599,"is_pvip":false,"replies":[{"id":60314,"content":"äº‹å®ä¸Šï¼Œå¤§éƒ¨åˆ†C++çš„æ ‡å‡†ç±»éƒ½æ˜¯è¿™ä¹ˆè®¾è®¡çš„ã€‚ä¸å¿…è¦çš„åŠ é”ï¼Œä¼šé™ä½æ€§èƒ½ã€‚å¦‚æœä½ éœ€è¦å¯¹shared_ptræˆ–vectoråŠ é”ï¼Œä½ å¯ä»¥åœ¨å¤–é¢åŠ ï¼Œæˆ–è€…è‡ªå·±å®ç°ä¸€ä¸ªè‡ªå·±éœ€è¦çš„çº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬ã€‚æœ‰äº›åœºæ™¯ä¸‹ï¼Œä¹Ÿèƒ½æ‰¾åˆ°ç¬¬ä¸‰æ–¹åº“è¿™ä¹ˆåšã€‚\n\nä»¥shared_pträ¸ºä¾‹ï¼Œæˆ‘ä¸ªäººçœŸè¿˜æ²¡è§‰å¾—æœ‰å¤šå°‘åœºæ™¯éœ€è¦å¹¶å‘è®¿é—®ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆã€‚ä½ æ›´å¯èƒ½åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹æ—¶ï¼Œç»™å®ƒæ‹·è´ä¸€ä¸ªæ–°çš„æ™ºèƒ½æŒ‡é’ˆã€‚è¿™æ ·ï¼Œå¤§å®¶åªéœ€è¦å¯¹è¢«è®¿é—®çš„å¯¹è±¡åŒæ­¥ï¼Œè€Œä¸æ˜¯å¯¹æ™ºèƒ½æŒ‡é’ˆåŒæ­¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575107995,"ip_address":"","comment_id":157207,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å¤šå¹´ä¸å­¦ä¹ C++æ–°çŸ¥è¯†ï¼Œå¯¹move ç§»åŠ¨æ„é€ å‡½æ•°  å®Œç¾è½¬å‘è¿™äº›ç†è§£ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œå¸Œæœ›çœ‹å®Œè¿™ä¸ªä¸“æ èƒ½ç†è§£æ›´æ·±å…¥ï¼Œå…¶ä»–çš„æ„Ÿè§‰è¿˜è¡Œï¼Œshared_pträ¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåªæ˜¯å…±äº«è®¡æ•°ä½¿ç”¨äº†åŸå­è®¡æ•°ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476740,"discussion_content":"è¿™ä¸ªå®ç°ä¸æ”¯æŒã€‚éœ€è¦å†™æ›´å¤šçš„ä»£ç ã€‚\n\nC++17 çš„ shared_ptr å¯ä»¥æ”¯æŒè¿™æ ·çš„å†™æ³•ï¼Œä½†ä¹Ÿå¾—æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨æ˜¯æ•°ç»„ï¼š\n\nstd::shared_ptr&amp;lt;int[]&amp;gt; ptr1{new int[5]};\nauto ptr2 = std::shared_ptr&amp;lt;int[]&amp;gt;{new int[5]};\n\nC++20 è¿›ä¸€æ­¥æ”¯æŒï¼š\n\nauto ptr3 = std::make_shared&amp;lt;int[]&amp;gt;(5);\n\nå¦å¤–ï¼Œnew int[5] ä¹‹åç”¨ delete æ˜¯ä¸å¯¹ï¼ˆå¥½ï¼‰çš„ã€‚è¿™å„¿ä¸€èˆ¬è¿˜ä¸ä¼šå‡ºé—®é¢˜ï¼Œå¦‚æœæ˜¯å¸¦ææ„çš„å¯¹è±¡å°±ä¸€å®šä¼šå‡ºé—®é¢˜çš„ã€‚new â€¦[] ä¹‹åä¸€å®šç”¨ delete[] â€¦ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575383517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71327,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆè€å¿ƒä¸”è¯¦ç»†çš„è§£ç­”ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šã€‚\nè°¢è°¢è€å¸ˆï¼Œæ˜ç™½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575392956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70849,"discussion_content":"ä¼ ç»Ÿçš„æ•°æ®ç±»å‹æ˜¯å¯ä»¥çš„ï¼Œè‡ªå®šä¹‰çš„å°±ä¸è¡Œäº†ã€‚\næ¯”å¦‚:\nsmart_ptr<circle> test_ptr(new circle[5]);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575382126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157128,"user_name":"Zephyr","can_delete":false,"product_type":"c1","uid":1635120,"ip_address":"","ucode":"1DF3525146BFE7","user_header":"https://static001.geekbang.org/account/avatar/00/18/f3/30/8a8b2155.jpg","comment_is_top":false,"comment_ctime":1575037774,"is_pvip":false,"replies":[{"id":60295,"content":"ç¬¬ä¸€å‘¨ä¸€æ¬¡æ€§æ”¾ä¸‰è®²ã€‚åé¢æ¯å‘¨æ›´æ–°ä¸‰æ¬¡ï¼Œä¸€æ¬¡ä¸€è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575078418,"ip_address":"","comment_id":157128,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ˜¯ä¸€ç›´æ²¡æœ‰æ›´æ–°å—ï¼Œè¿˜æ˜¯æˆ‘çœ‹ä¸åˆ°ï¼Œæˆ‘è®°å¾—æ˜¯ä¹°è¿‡è¿™ä¸ªè¯¾ç¨‹äº†","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476362,"discussion_content":"äº‹å®ä¸Šï¼Œå¤§éƒ¨åˆ†C++çš„æ ‡å‡†ç±»éƒ½æ˜¯è¿™ä¹ˆè®¾è®¡çš„ã€‚ä¸å¿…è¦çš„åŠ é”ï¼Œä¼šé™ä½æ€§èƒ½ã€‚å¦‚æœä½ éœ€è¦å¯¹shared_ptræˆ–vectoråŠ é”ï¼Œä½ å¯ä»¥åœ¨å¤–é¢åŠ ï¼Œæˆ–è€…è‡ªå·±å®ç°ä¸€ä¸ªè‡ªå·±éœ€è¦çš„çº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬ã€‚æœ‰äº›åœºæ™¯ä¸‹ï¼Œä¹Ÿèƒ½æ‰¾åˆ°ç¬¬ä¸‰æ–¹åº“è¿™ä¹ˆåšã€‚\n\nä»¥shared_pträ¸ºä¾‹ï¼Œæˆ‘ä¸ªäººçœŸè¿˜æ²¡è§‰å¾—æœ‰å¤šå°‘åœºæ™¯éœ€è¦å¹¶å‘è®¿é—®ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆã€‚ä½ æ›´å¯èƒ½åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹æ—¶ï¼Œç»™å®ƒæ‹·è´ä¸€ä¸ªæ–°çš„æ™ºèƒ½æŒ‡é’ˆã€‚è¿™æ ·ï¼Œå¤§å®¶åªéœ€è¦å¯¹è¢«è®¿é—®çš„å¯¹è±¡åŒæ­¥ï¼Œè€Œä¸æ˜¯å¯¹æ™ºèƒ½æŒ‡é’ˆåŒæ­¥ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575107995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1321408,"avatar":"https://static001.geekbang.org/account/avatar/00/14/29/c0/86fa3e92.jpg","nickname":"è´¾é™†å","note":"","ucode":"2722C422077EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70755,"discussion_content":"æ˜ç™½äº†ï¼Œå°±æ˜¯è¯´å¯¹è¢«è®¿é—®çš„å¯¹è±¡ï¼Œå¤–éƒ¨å†è¿›è¡ŒåŒæ­¥ï¼Œè°¢è°¢å´è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575379400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156849,"user_name":"ä¸­å±±æµªå­","can_delete":false,"product_type":"c1","uid":1055296,"ip_address":"","ucode":"25D0F8462473D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","comment_is_top":false,"comment_ctime":1574988250,"is_pvip":false,"replies":[{"id":60266,"content":"æˆ‘çŸ¥é“ã€èƒ½æƒ³å¾—èµ·çš„å‚è€ƒèµ„æ–™è‚¯å®šä¼šè´´å‡ºæ¥ã€‚æ¯•ç«Ÿï¼Œä¸‰åè®²çš„æ—¶é—´è‚¯å®šæ˜¯ä¸å¤Ÿçš„ã€‚å¤§å®¶ä¸€å®šè¦é˜…è¯»æ›´å¤šçš„èµ„æ–™æ‰è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575027201,"ip_address":"","comment_id":156849,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆè®²çš„è¿˜æ˜¯å¾ˆå¥½çš„ï¼Œå¬ç€éŸ³é¢‘çœ‹ä»£ç æ„Ÿè§‰è·Ÿä¸ä¸ŠèŠ‚å¥ï¼Œéœ€è¦å¤šçœ‹å‡ éæ‰è¡Œã€‚åŒæ—¶ï¼Œæ–‡æœ«æ”¾ä¸Šé“¾æ¥ä¹Ÿå¾ˆä¸é”™ã€‚å¸Œæœ›è€å¸ˆèƒ½å¤šæ”¾äº›ç›¸å…³çš„å­¦ä¹ æ¨èèµ„æºï¼Œæˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”ğŸ˜€","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476336,"discussion_content":"ç¬¬ä¸€å‘¨ä¸€æ¬¡æ€§æ”¾ä¸‰è®²ã€‚åé¢æ¯å‘¨æ›´æ–°ä¸‰æ¬¡ï¼Œä¸€æ¬¡ä¸€è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575078418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155662,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1574734127,"is_pvip":false,"replies":[{"id":59861,"content":"åº”è¯¥çš„ã€‚ä½†æˆ‘ä»¬è¿˜æ²¡å­¦åˆ°é€šç”¨çš„C++å¹¶å‘ç¼–ç¨‹å‘¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574762878,"ip_address":"","comment_id":155662,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è®¡æ•°å™¨çº¿ç¨‹å®‰å…¨æ˜¯ä¸æ˜¯æ›´å¥½ç‚¹","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476254,"discussion_content":"æˆ‘çŸ¥é“ã€èƒ½æƒ³å¾—èµ·çš„å‚è€ƒèµ„æ–™è‚¯å®šä¼šè´´å‡ºæ¥ã€‚æ¯•ç«Ÿï¼Œä¸‰åè®²çš„æ—¶é—´è‚¯å®šæ˜¯ä¸å¤Ÿçš„ã€‚å¤§å®¶ä¸€å®šè¦é˜…è¯»æ›´å¤šçš„èµ„æ–™æ‰è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575027201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275544,"user_name":"è“¦ç„¶å›é¦–","can_delete":false,"product_type":"c1","uid":1172090,"ip_address":"","ucode":"B17658DCFE6402","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","comment_is_top":false,"comment_ctime":1611579174,"is_pvip":true,"replies":[{"id":100031,"content":"swap çš„çº¦å®šæ˜¯ä¸å‘ç”Ÿå¼‚å¸¸ï¼Œå®ƒå½“ç„¶ä¸èƒ½ä¿è¯ä¸å‘ç”Ÿå¼‚å¸¸ã€‚ç”¨æˆ·éœ€è¦ä¿è¯ä¸è®© swap æŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ˜¯ç”¨æˆ·éœ€è¦åšåˆ°çš„ï¼Œå¦åˆ™ç¨‹åºåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ä¼šå´©æºƒã€‚\n\nå¯¹äºä½ çš„å…·ä½“ä¾‹å­ï¼Œå¯¹æŒ‡é’ˆçš„äº¤æ¢è‡ªç„¶ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œæ‰€ä»¥å¯¹ smart_ptr çš„ swap æ“ä½œä¸ä¼šæœ‰å¼‚å¸¸ã€‚è‡ªå¢å¯¹å†…ç½®ç±»å‹å’Œ atomic ç±»å‹ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚è€Œå¯¹äºä½ è‡ªå·±çš„å®šä¹‰çš„ç±»ï¼Œå°±çœ‹ä½ è‡ªå·±çš„ç±»çš„è¡Œä¸ºäº†ã€‚å¼‚å¸¸æ˜¯å¦ä¼šå‘ç”Ÿï¼Œæ˜¯ç¨‹åºå‘˜è‡ªå·±å®šä¹‰çš„ï¼Œæ‰€ä»¥ç¨‹åºå‘˜è¦è´Ÿè´£å¯¹ä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„å‡½æ•°æ‰‹å·¥æ ‡æ˜ noexceptã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1611638312,"ip_address":"","comment_id":275544,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆstd::swapæœ¬èº«ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œæˆ‘çœ‹STLæºç é‡Œé¢ï¼Œä¹Ÿåªæ˜¯åœ¨å‡½æ•°å¤´éƒ¨åé¢åŠ äº†ä¸ªnoexcept,è€Œè¿™ä¸ªåªæ˜¯ä¸ªä¸å¯é çš„ä¿è¯ï¼Œè¿™é‡Œæ›´ä¸€èˆ¬çš„é—®é¢˜æ˜¯ï¼Œåˆ°åº•ç¨‹åºä»£ç ä»€ä¹ˆæƒ…å†µä¸‹æ˜¯ä¸€å®šä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„ï¼Œè€Œä»€ä¹ˆæƒ…å†µä¸‹æ˜¯å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆè§„å¾‹ï¼Ÿæ¯”å¦‚ä¸Šé¢çš„ç®€å•çš„èµ‹å€¼ï¼Œä¸ºä»€ä¹ˆå°±ä¸€å®šä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œ\nusing std::swap;    swap(ptr_, rhs.ptr_);    swap(shared_count_,         rhs.shared_count_);\nå†ä¸€èˆ¬çš„æƒ…å†µï¼Œæ¯”å¦‚ void add_count() noexcept  {    ++count_;  }è¿™ç§å°±æ˜¯ä¸ªè‡ªå¢è¿ç®—ï¼Œé‚£æ˜¯ä¸æ˜¯è¿™ç§å°±ä¸€å®šä¸ä¼šå‘ç”Ÿå¼‚å¸¸å‘¢ï¼Ÿå¼‚å¸¸æ˜¯å¦å‘ç”Ÿï¼Œæ€ä¹ˆç•Œå®šï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475821,"discussion_content":"åº”è¯¥çš„ã€‚ä½†æˆ‘ä»¬è¿˜æ²¡å­¦åˆ°é€šç”¨çš„C++å¹¶å‘ç¼–ç¨‹å‘¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574762878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66709,"discussion_content":"è€å¸ˆï¼Œåœ¨å®æ—¶ç³»ç»Ÿä¸­æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨å‘¢ï¼Œå› ä¸ºå®æ—¶çº¿ç¨‹ä¸å¯ä»¥è¢«é˜»å¡å‘€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575100030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":99228,"discussion_content":"åŸå­æ“ä½œï¼Œç¬¬ 19 è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577197533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":66709,"ip_address":"","group_id":0},"score":99228,"extra":""}]}]},{"had_liked":false,"id":224253,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1591324586,"is_pvip":false,"replies":[{"id":82635,"content":"è¿™ä¸ªä»£ç ç”¨äº†æ¯”è¾ƒå®‰å…¨çš„æ‹·è´æ„é€ åŠ äº¤æ¢çš„èµ‹å€¼æ–¹å¼ã€‚æ³¨æ„ä½ çš„èµ‹å€¼å‡½æ•°åŸå‹æ˜¯ï¼š\n\nA &amp;operator=(A other);\n\nå‚æ•°æ˜¯å€¼è€Œä¸æ˜¯å¼•ç”¨ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨æ‰§è¡Œè¿›å…¥è¿™ä¸ªèµ‹å€¼å‡½æ•°ä½“ä¹‹å‰ï¼ŒA other å·²ç»å¯¼è‡´æ‹·è´æ„é€ è¢«æ‰§è¡Œäº†ä¸€æ¬¡ã€‚\n\nè¿™æ˜¯å¼‚å¸¸å®‰å…¨çš„æƒ¯ç”¨æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1591431825,"ip_address":"","comment_id":224253,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nclass A {\npublic:\n    int n;\n    std::string s1;\n    &#47;&#47;åœ¨åŠ äº†copy constructoræ—¶ï¼Œå¿…é¡»æ˜¾å¼åŠ å…¥constructor,ç¼–è¯‘å™¨ä¸ä¼šå†éšå¼æä¾›constructor\n    A(){}\n    &#47;&#47;copy constructor\n    A(const A&amp; a){\n        std::cout &lt;&lt; &quot;copy constructor of A\\n&quot;;\n    }\n\n    &#47;&#47; user-defined copy assignment, copy-and-swap form\n    A &amp;operator=(A other) {\n        std::cout &lt;&lt; &quot;copy assignment of A\\n&quot;;\n        std::swap(n, other.n);\n        std::swap(s1, other.s1);\n        return *this;\n    }\n};\n\n\nint main() {\n    A a1, a2;\n    std::cout &lt;&lt; &quot;a1 = a2 calls &quot;;\n    a1 = a2; \n\n\n}\nè€å¸ˆï¼Œä»¥ä¸Šä»£ç ä¸ºä»€ä¹ˆæœ€ç»ˆä¼šAçš„copy assignmentå’Œcopy constructoréƒ½ä¼šè¢«è°ƒç”¨ï¼Ÿæˆ‘è§‰å¾—æ‹·è´æ„é€ å’Œèµ‹å€¼åº”è¯¥æ˜¯é€‰å…¶ä¸­ä¸€ä¸ªæ‰å¯¹å•Šã€‚\ncppreferenceå¯¹copy assignmentçš„è°ƒç”¨æ—¶çš„æè¿°ï¼š\nThe copy assignment operator is called whenever selected by overload resolution, e.g. when an object appears on the left side of an assignment expressionã€‚\næˆ‘ç†è§£çš„æ˜¯copy assignmentåªä¼šåœ¨é‡è½½è§£ææ‰ä¼šå‘ç”Ÿï¼Œæ¯”å¦‚ä¸Šè¿°ä»£ç ï¼Œå¦‚æœè°ƒç”¨äº†copy assignment,é‚£ä¹ˆå¯ä»¥æ¨æ–­å‡ºå‘ç”Ÿäº†é‡è½½ï¼Œé‚£ä¹ˆcopy constructorå°±ä¸ä¼šè¢«è°ƒç”¨ã€‚ä¸ºä»€ä¹ˆäº‹å®ä¸æ˜¯è¿™æ ·çš„å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514390,"discussion_content":"swap çš„çº¦å®šæ˜¯ä¸å‘ç”Ÿå¼‚å¸¸ï¼Œå®ƒå½“ç„¶ä¸èƒ½ä¿è¯ä¸å‘ç”Ÿå¼‚å¸¸ã€‚ç”¨æˆ·éœ€è¦ä¿è¯ä¸è®© swap æŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ˜¯ç”¨æˆ·éœ€è¦åšåˆ°çš„ï¼Œå¦åˆ™ç¨‹åºåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ä¼šå´©æºƒã€‚\n\nå¯¹äºä½ çš„å…·ä½“ä¾‹å­ï¼Œå¯¹æŒ‡é’ˆçš„äº¤æ¢è‡ªç„¶ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œæ‰€ä»¥å¯¹ smart_ptr çš„ swap æ“ä½œä¸ä¼šæœ‰å¼‚å¸¸ã€‚è‡ªå¢å¯¹å†…ç½®ç±»å‹å’Œ atomic ç±»å‹ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚è€Œå¯¹äºä½ è‡ªå·±çš„å®šä¹‰çš„ç±»ï¼Œå°±çœ‹ä½ è‡ªå·±çš„ç±»çš„è¡Œä¸ºäº†ã€‚å¼‚å¸¸æ˜¯å¦ä¼šå‘ç”Ÿï¼Œæ˜¯ç¨‹åºå‘˜è‡ªå·±å®šä¹‰çš„ï¼Œæ‰€ä»¥ç¨‹åºå‘˜è¦è´Ÿè´£å¯¹ä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„å‡½æ•°æ‰‹å·¥æ ‡æ˜ noexceptã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1611638312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160366,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1575941527,"is_pvip":false,"replies":[{"id":61214,"content":"1. ä¸€èˆ¬è€Œè¨€ï¼Œæ‹·è´æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸ç®—æ­£å¸¸ï¼Œå®Œå…¨å¯ä»¥ç”¨æ™®é€šçš„å¼‚å¸¸å®‰å…¨çš„åšæ³•æ¥é¿å…å†…å­˜æ³„æ¼ã€‚åŸºæœ¬ç‚¹å°±æ˜¯ä¸è¦ä½¿ç”¨è£¸æŒ‡é’ˆã€‚ä¸€å®šè¦ç”¨ï¼Œå°±å¾—å°å¿ƒæ³¨æ„äº†ã€‚\n\n2. ç§»åŠ¨çš„æ‹·è´æ„é€ æ˜¯å¾ˆå±é™©çš„ï¼Œæ‰€ä»¥ç°åœ¨çš„æ™ºèƒ½æŒ‡é’ˆä¸ä¼šè¿™ä¹ˆå®ç°çš„ã€‚æ‹·è´æ˜¯æ‹·è´ï¼Œç§»åŠ¨æ˜¯ç§»åŠ¨ï¼Œæ‹·è´å°±ä¸è¦å½±å“å³è¾¹ã€‚åè¿‡æ¥è®²ï¼Œå¦‚æœçº¯ç²¹æ˜¯ç§»åŠ¨ï¼Œä¹Ÿä¸åº”è¯¥å‘ç”Ÿå¼‚å¸¸çš„ã€‚ä½†å¦‚æœä½ ç¡¬è¦æ··åˆç§»åŠ¨å’Œæ‹·è´ï¼Œé‚£å°±æ˜¯æ‰¾ç½ªå—äº†â€¦â€¦\n\n3. æˆ‘ä¸è®¤ä¸ºä¼šå‘ç”Ÿä½ è¯´çš„æƒ…å†µã€‚ç±»çš„å¤æ‚æ€§æ˜¯éœ€è¦äººåŠªåŠ›å»é™ä½çš„ï¼Œå…¶ä¸­å°±åŒ…æ‹¬éµå®ˆåŸºæœ¬çš„è§„èŒƒï¼ŒåŒ…æ‹¬swapä¸å…è®¸å‘ç”Ÿå¼‚å¸¸ã€‚\n\nåœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä½ å¼€è½¦å¯ä»¥å¼€åˆ°åœè½¦å¸¦ç”šè‡³é€†è¡Œã€‚ä½†è¿˜æ˜¯å¤šæƒ³æƒ³æ­£å¸¸çš„æƒ…å†µä¸ºå¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575951682,"ip_address":"","comment_id":160366,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºæ‹·è´æ„é€ å’Œèµ‹å€¼éƒ¨åˆ†çš„smart_ptrï¼Œè¿˜æœ‰å‡ ä¸ªç–‘é—®ï¼š\n1ï¼Œä¸€èˆ¬æ¥è®²ï¼Œè‹¥æ‹·è´æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œæ˜¯ä¸æ˜¯æœ‰å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œåº”è¯¥å¦‚ä½•é¿å…ï¼Ÿ\n2ï¼Œè¿™é‡Œçš„æ‹·è´æ„é€ ï¼Œä»è¯­ä¹‰ä¸Šæ¥è®²ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯å®ç°çš„ç§»åŠ¨çš„æ“ä½œï¼Œé‚£å¦‚æœæ‹·è´æ„é€ å¼‚å¸¸ï¼Œä½œä¸ºå…¥å‚çš„ otheræ˜¯å¦ä¹Ÿæœ‰å¯èƒ½å¤„äºéƒ¨åˆ†è¢«ç ´åçš„çŠ¶æ€ï¼Ÿ\n3ï¼Œå¦‚æœç±»ç»“æ„æ›´å¤æ‚ä¸€äº›ï¼Œå³ä½¿æˆåŠŸæ„é€ äº†ä¸´æ—¶å¯¹è±¡ï¼Œä»ç„¶æœ‰å…¶ä»–å¯èƒ½å¯¼è‡´å¼‚å¸¸çš„æ“ä½œï¼Œè€Œä¸ä»…ä»…åªæœ‰swapï¼Œé‚£ä½ åœ¨å›å¤å…¶ä»–åŒå­¦æ—¶æåˆ°çš„å‡†åˆ™ï¼Œâ€œä¸€å¾‹ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æ¥æ„é€ æ–°å¯¹è±¡ï¼Œç„¶åä½¿ç”¨æ— å¼‚å¸¸çš„ swap æ¥è·å¾—æ–°å¯¹è±¡â€ï¼Œæ˜¯å¦å°±ä¸é€‚ç”¨äº†ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497414,"discussion_content":"è¿™ä¸ªä»£ç ç”¨äº†æ¯”è¾ƒå®‰å…¨çš„æ‹·è´æ„é€ åŠ äº¤æ¢çš„èµ‹å€¼æ–¹å¼ã€‚æ³¨æ„ä½ çš„èµ‹å€¼å‡½æ•°åŸå‹æ˜¯ï¼š\n\nA &amp;amp;operator=(A other);\n\nå‚æ•°æ˜¯å€¼è€Œä¸æ˜¯å¼•ç”¨ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨æ‰§è¡Œè¿›å…¥è¿™ä¸ªèµ‹å€¼å‡½æ•°ä½“ä¹‹å‰ï¼ŒA other å·²ç»å¯¼è‡´æ‹·è´æ„é€ è¢«æ‰§è¡Œäº†ä¸€æ¬¡ã€‚\n\nè¿™æ˜¯å¼‚å¸¸å®‰å…¨çš„æƒ¯ç”¨æ³•ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591431825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157471,"user_name":"metalmac.kyle","can_delete":false,"product_type":"c1","uid":1001832,"ip_address":"","ucode":"74795A8825FCAA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/68/bef5f7d3.jpg","comment_is_top":false,"comment_ctime":1575170740,"is_pvip":false,"replies":[{"id":60366,"content":"æ²¡é”™ï¼Œç›¸å…³çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼Œä¸€å®šè¦å¤šå®è·µæ‰è¡Œã€‚\n\nä¸è¿‡ï¼Œå›è¿‡å¤´æ¥çœ‹ï¼Œæˆ‘è§‰å¾—æˆ‘æ‹¿æ™ºèƒ½æŒ‡é’ˆå¼€å¤´ï¼Œéš¾åº¦å¯èƒ½æ˜¯æœ‰ç‚¹è®¾é«˜äº†ã€‚å“ˆå“ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575183383,"ip_address":"","comment_id":157471,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"é€šè¿‡è€å¸ˆçš„ä¾‹å­æ¥å­¦ä¹ æ·±å…¥å­¦ä¹ æ™ºèƒ½æŒ‡é’ˆï¼Œæ„Ÿè§‰è¿™ç§æ¡ˆä¾‹å¼éƒ½è°¢è°¢ä»£å…¥æ„Ÿå¾ˆå¼ºï¼Œå†éš¾çš„çŸ¥è¯†ç‚¹ä¹Ÿä¸æ¯ç‡¥è¿˜èƒ½ç›´æ¥å­¦ä»¥è‡´ç”¨ï¼Œé†é†çŒé¡¶ï¼Œæœ‰ç§é‡è¯»csappçš„æ„Ÿè§‰ï¼Cppä¸€å¤§ç‰¹æ€§å°±æ˜¯å„ç§å¤æ‚çš„è¯­æ³•ä»¥åŠç¬¦å·è®¾è®¡ï¼Œè¿™è®©å¥¹è¢«çˆ±çš„äººå¥‰ä¸Šç¥å›ï¼Œæ¨çš„äººä¹Ÿæ¨ä¹‹å…¥éª¨ï¼ŒæŒ‡é’ˆä½œä¸ºåŒåˆƒå‰‘å……æ»¡äº†æ¶é­”èˆ¬çš„é­”åŠ›ï¼Œè™½ç„¶ä¼šè®©äººæœ›è€Œå´æ­¥ä½†ä¹Ÿæ˜¯å¸å¼•æˆ‘ä¸€ç›´å­¦ä¹ cppçš„åŠ¨åŠ›æ‰€åœ¨ï¼Œå¯¹åº•å±‚çš„æ“ä½œå’Œç†è§£å®åœ¨è®©äººç€é­”å“ˆå“ˆã€‚\nè¨€å½’æ­£ä¼ ï¼Œå°å°çš„æ„é€ æ™ºèƒ½æŒ‡é’ˆè¯¾è•´å«äº†å¯¹Cppä¸€ç³»åˆ—çŸ¥è¯†çš„å¤ä¹ å·©å›ºï¼Œæ„é€ å‡½æ•°ï¼Œè¿ç®—ç¬¦é‡è½½ï¼ŒæŒ‡é’ˆå¼•ç”¨ç‰¹æ€§ï¼Œæ¨¡æ¿ç­‰å„ç±»çŸ¥è¯†ç‚¹çš„è®¾è®¡ä¸å®ç°ï¼Œæƒ³çœŸæ­£æŒæ¡è¿˜éœ€è¦åå¤ä¸Šæœºå®è·µå‘¢ï¼Œè¿˜æ˜¯åº”äº†å¤è¯ï¼Œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æ¬²çŸ¥æ­¤äº‹é¡»èº¬è¡Œæµ…ï¼ğŸ§","like_count":5,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476436,"discussion_content":"æ²¡é”™ï¼Œç›¸å…³çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼Œä¸€å®šè¦å¤šå®è·µæ‰è¡Œã€‚\n\nä¸è¿‡ï¼Œå›è¿‡å¤´æ¥çœ‹ï¼Œæˆ‘è§‰å¾—æˆ‘æ‹¿æ™ºèƒ½æŒ‡é’ˆå¼€å¤´ï¼Œéš¾åº¦å¯èƒ½æ˜¯æœ‰ç‚¹è®¾é«˜äº†ã€‚å“ˆå“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575183383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155888,"user_name":"å§œå§œ","can_delete":false,"product_type":"c1","uid":1120332,"ip_address":"","ucode":"1DAD620C8E9F31","user_header":"https://static001.geekbang.org/account/avatar/00/11/18/4c/e12f3b41.jpg","comment_is_top":false,"comment_ctime":1574774548,"is_pvip":false,"replies":[{"id":59914,"content":"å¾ˆå…¨ã€‚æœ‰å‡ ä¸ªå°é—®é¢˜å“ˆï¼ˆåƒresetæœ‰å‡ ä¸ªé‡è½½ä¸ç®—ğŸ˜„ï¼‰ï¼š\n\nè·å–åŸå§‹æŒ‡é’ˆçš„ get æ–¹æ³•æˆ‘æä¾›äº†ï¼›\n* å’Œ -&gt; ä»£ç é‡Œæ˜¯æä¾›çš„ï¼›\nå¼•ç”¨è®¡æ•°å™¨å€¼ä¹Ÿæ˜¯æœ‰çš„ã€‚\n\nå®è·µå±‚é¢ï¼Œæœ€å¤§çš„åŒºåˆ«ï¼Œé™¤äº†ä¸æ”¯æŒå¼±å¼•ç”¨å¤–ï¼Œå¯èƒ½æ˜¯ä¸æ”¯æŒè‡ªå®šä¹‰åˆ é™¤å™¨äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574812032,"ip_address":"","comment_id":155888,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è¿™ä¸ªsmart_ptrç›®å‰å·²ç»å®ç°äº†:è·å–æ‰€æœ‰æƒï¼Œå…±äº«æ‰€æœ‰æƒï¼Œæ‹·è´èµ‹å€¼è¯­æ„ï¼Œè®¡æ•°å™¨ï¼Œè‡ªåŠ¨å¢å‡ç­‰åŠŸèƒ½ã€‚\nè¿˜ç¼ºå°‘: è½¬ç§»æ‰€æœ‰æƒresetçš„æ“ä½œ(æˆ‘è®°å¾—resetæœ‰ä¸‰ç§é‡è½½æ–¹å¼);  è·å–åŸå§‹æŒ‡é’ˆæ–¹æ³•ï¼Œé‡å†™è§£å¼•ç”¨*ï¼Œé‡å†™æŒ‡å‘æ“ä½œç¬¦-&gt;ï¼Œé‡å†™æ¯”è¾ƒæ“ä½œç¬¦ï¼Œè·å–å¼•ç”¨è®¡æ•°å™¨å€¼çš„æ–¹æ³•ï¼Œåˆ¤æ–­å½“å‰å¼•ç”¨æ˜¯å¦ä¸º1çš„æ–¹æ³•ï¼Œä»¥åŠçº¿ç¨‹å®‰å…¨çš„è®¾è®¡ã€‚\næœ€åï¼Œshared_ptræœ¬èº«è¿˜éœ€è¦è§£å†³â€œå¾ªç¯å¼•ç”¨â€ï¼Œâ€œè‡ªå¼•ç”¨â€çš„é—®é¢˜ï¼Œä¸€èˆ¬éœ€è¦æ­é…å¼±æŒ‡é’ˆweak_pträ½¿ç”¨ã€‚\nè€å¸ˆï¼Œä¸çŸ¥æˆ‘å›ç­”çš„æ˜¯å¦å…¨é¢ï¼Œæœ‰æ— å·®é”™ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476436,"discussion_content":"æ²¡é”™ï¼Œç›¸å…³çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼Œä¸€å®šè¦å¤šå®è·µæ‰è¡Œã€‚\n\nä¸è¿‡ï¼Œå›è¿‡å¤´æ¥çœ‹ï¼Œæˆ‘è§‰å¾—æˆ‘æ‹¿æ™ºèƒ½æŒ‡é’ˆå¼€å¤´ï¼Œéš¾åº¦å¯èƒ½æ˜¯æœ‰ç‚¹è®¾é«˜äº†ã€‚å“ˆå“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575183383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158472,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1575379232,"is_pvip":false,"replies":[{"id":60660,"content":"è¿™ä¸ªå®ç°ä¸æ”¯æŒã€‚éœ€è¦å†™æ›´å¤šçš„ä»£ç ã€‚\n\nC++17 çš„ shared_ptr å¯ä»¥æ”¯æŒè¿™æ ·çš„å†™æ³•ï¼Œä½†ä¹Ÿå¾—æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨æ˜¯æ•°ç»„ï¼š\n\nstd::shared_ptr&lt;int[]&gt; ptr1{new int[5]};\nauto ptr2 = std::shared_ptr&lt;int[]&gt;{new int[5]};\n\nC++20 è¿›ä¸€æ­¥æ”¯æŒï¼š\n\nauto ptr3 = std::make_shared&lt;int[]&gt;(5);\n\nå¦å¤–ï¼Œnew int[5] ä¹‹åç”¨ delete æ˜¯ä¸å¯¹ï¼ˆå¥½ï¼‰çš„ã€‚è¿™å„¿ä¸€èˆ¬è¿˜ä¸ä¼šå‡ºé—®é¢˜ï¼Œå¦‚æœæ˜¯å¸¦ææ„çš„å¯¹è±¡å°±ä¸€å®šä¼šå‡ºé—®é¢˜çš„ã€‚new â€¦[] ä¹‹åä¸€å®šç”¨ delete[] â€¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575383517,"ip_address":"","comment_id":158472,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œé‚£æˆ‘å¦‚æœæƒ³å®ç°ç±»ä¼¼çš„:\nint* xxx = new int[5]; delete xxx;\nä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ€ä¹ˆåš?\nsmart_ptr&lt;int&gt; test_ptr(new int[5]);","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476740,"discussion_content":"è¿™ä¸ªå®ç°ä¸æ”¯æŒã€‚éœ€è¦å†™æ›´å¤šçš„ä»£ç ã€‚\n\nC++17 çš„ shared_ptr å¯ä»¥æ”¯æŒè¿™æ ·çš„å†™æ³•ï¼Œä½†ä¹Ÿå¾—æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨æ˜¯æ•°ç»„ï¼š\n\nstd::shared_ptr&amp;lt;int[]&amp;gt; ptr1{new int[5]};\nauto ptr2 = std::shared_ptr&amp;lt;int[]&amp;gt;{new int[5]};\n\nC++20 è¿›ä¸€æ­¥æ”¯æŒï¼š\n\nauto ptr3 = std::make_shared&amp;lt;int[]&amp;gt;(5);\n\nå¦å¤–ï¼Œnew int[5] ä¹‹åç”¨ delete æ˜¯ä¸å¯¹ï¼ˆå¥½ï¼‰çš„ã€‚è¿™å„¿ä¸€èˆ¬è¿˜ä¸ä¼šå‡ºé—®é¢˜ï¼Œå¦‚æœæ˜¯å¸¦ææ„çš„å¯¹è±¡å°±ä¸€å®šä¼šå‡ºé—®é¢˜çš„ã€‚new â€¦[] ä¹‹åä¸€å®šç”¨ delete[] â€¦ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575383517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71327,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆè€å¿ƒä¸”è¯¦ç»†çš„è§£ç­”ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šã€‚\nè°¢è°¢è€å¸ˆï¼Œæ˜ç™½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575392956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70849,"discussion_content":"ä¼ ç»Ÿçš„æ•°æ®ç±»å‹æ˜¯å¯ä»¥çš„ï¼Œè‡ªå®šä¹‰çš„å°±ä¸è¡Œäº†ã€‚\næ¯”å¦‚:\nsmart_ptr<circle> test_ptr(new circle[5]);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575382126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157207,"user_name":"è´¾é™†å","can_delete":false,"product_type":"c1","uid":1321408,"ip_address":"","ucode":"2722C422077EE0","user_header":"https://static001.geekbang.org/account/avatar/00/14/29/c0/86fa3e92.jpg","comment_is_top":false,"comment_ctime":1575082599,"is_pvip":false,"replies":[{"id":60314,"content":"äº‹å®ä¸Šï¼Œå¤§éƒ¨åˆ†C++çš„æ ‡å‡†ç±»éƒ½æ˜¯è¿™ä¹ˆè®¾è®¡çš„ã€‚ä¸å¿…è¦çš„åŠ é”ï¼Œä¼šé™ä½æ€§èƒ½ã€‚å¦‚æœä½ éœ€è¦å¯¹shared_ptræˆ–vectoråŠ é”ï¼Œä½ å¯ä»¥åœ¨å¤–é¢åŠ ï¼Œæˆ–è€…è‡ªå·±å®ç°ä¸€ä¸ªè‡ªå·±éœ€è¦çš„çº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬ã€‚æœ‰äº›åœºæ™¯ä¸‹ï¼Œä¹Ÿèƒ½æ‰¾åˆ°ç¬¬ä¸‰æ–¹åº“è¿™ä¹ˆåšã€‚\n\nä»¥shared_pträ¸ºä¾‹ï¼Œæˆ‘ä¸ªäººçœŸè¿˜æ²¡è§‰å¾—æœ‰å¤šå°‘åœºæ™¯éœ€è¦å¹¶å‘è®¿é—®ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆã€‚ä½ æ›´å¯èƒ½åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹æ—¶ï¼Œç»™å®ƒæ‹·è´ä¸€ä¸ªæ–°çš„æ™ºèƒ½æŒ‡é’ˆã€‚è¿™æ ·ï¼Œå¤§å®¶åªéœ€è¦å¯¹è¢«è®¿é—®çš„å¯¹è±¡åŒæ­¥ï¼Œè€Œä¸æ˜¯å¯¹æ™ºèƒ½æŒ‡é’ˆåŒæ­¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575107995,"ip_address":"","comment_id":157207,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å¤šå¹´ä¸å­¦ä¹ C++æ–°çŸ¥è¯†ï¼Œå¯¹move ç§»åŠ¨æ„é€ å‡½æ•°  å®Œç¾è½¬å‘è¿™äº›ç†è§£ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œå¸Œæœ›çœ‹å®Œè¿™ä¸ªä¸“æ èƒ½ç†è§£æ›´æ·±å…¥ï¼Œå…¶ä»–çš„æ„Ÿè§‰è¿˜è¡Œï¼Œshared_pträ¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåªæ˜¯å…±äº«è®¡æ•°ä½¿ç”¨äº†åŸå­è®¡æ•°ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476362,"discussion_content":"äº‹å®ä¸Šï¼Œå¤§éƒ¨åˆ†C++çš„æ ‡å‡†ç±»éƒ½æ˜¯è¿™ä¹ˆè®¾è®¡çš„ã€‚ä¸å¿…è¦çš„åŠ é”ï¼Œä¼šé™ä½æ€§èƒ½ã€‚å¦‚æœä½ éœ€è¦å¯¹shared_ptræˆ–vectoråŠ é”ï¼Œä½ å¯ä»¥åœ¨å¤–é¢åŠ ï¼Œæˆ–è€…è‡ªå·±å®ç°ä¸€ä¸ªè‡ªå·±éœ€è¦çš„çº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬ã€‚æœ‰äº›åœºæ™¯ä¸‹ï¼Œä¹Ÿèƒ½æ‰¾åˆ°ç¬¬ä¸‰æ–¹åº“è¿™ä¹ˆåšã€‚\n\nä»¥shared_pträ¸ºä¾‹ï¼Œæˆ‘ä¸ªäººçœŸè¿˜æ²¡è§‰å¾—æœ‰å¤šå°‘åœºæ™¯éœ€è¦å¹¶å‘è®¿é—®ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆã€‚ä½ æ›´å¯èƒ½åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹æ—¶ï¼Œç»™å®ƒæ‹·è´ä¸€ä¸ªæ–°çš„æ™ºèƒ½æŒ‡é’ˆã€‚è¿™æ ·ï¼Œå¤§å®¶åªéœ€è¦å¯¹è¢«è®¿é—®çš„å¯¹è±¡åŒæ­¥ï¼Œè€Œä¸æ˜¯å¯¹æ™ºèƒ½æŒ‡é’ˆåŒæ­¥ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575107995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1321408,"avatar":"https://static001.geekbang.org/account/avatar/00/14/29/c0/86fa3e92.jpg","nickname":"è´¾é™†å","note":"","ucode":"2722C422077EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70755,"discussion_content":"æ˜ç™½äº†ï¼Œå°±æ˜¯è¯´å¯¹è¢«è®¿é—®çš„å¯¹è±¡ï¼Œå¤–éƒ¨å†è¿›è¡ŒåŒæ­¥ï¼Œè°¢è°¢å´è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575379400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157128,"user_name":"Zephyr","can_delete":false,"product_type":"c1","uid":1635120,"ip_address":"","ucode":"1DF3525146BFE7","user_header":"https://static001.geekbang.org/account/avatar/00/18/f3/30/8a8b2155.jpg","comment_is_top":false,"comment_ctime":1575037774,"is_pvip":false,"replies":[{"id":60295,"content":"ç¬¬ä¸€å‘¨ä¸€æ¬¡æ€§æ”¾ä¸‰è®²ã€‚åé¢æ¯å‘¨æ›´æ–°ä¸‰æ¬¡ï¼Œä¸€æ¬¡ä¸€è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575078418,"ip_address":"","comment_id":157128,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ˜¯ä¸€ç›´æ²¡æœ‰æ›´æ–°å—ï¼Œè¿˜æ˜¯æˆ‘çœ‹ä¸åˆ°ï¼Œæˆ‘è®°å¾—æ˜¯ä¹°è¿‡è¿™ä¸ªè¯¾ç¨‹äº†","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476336,"discussion_content":"ç¬¬ä¸€å‘¨ä¸€æ¬¡æ€§æ”¾ä¸‰è®²ã€‚åé¢æ¯å‘¨æ›´æ–°ä¸‰æ¬¡ï¼Œä¸€æ¬¡ä¸€è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575078418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156849,"user_name":"ä¸­å±±æµªå­","can_delete":false,"product_type":"c1","uid":1055296,"ip_address":"","ucode":"25D0F8462473D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","comment_is_top":false,"comment_ctime":1574988250,"is_pvip":false,"replies":[{"id":60266,"content":"æˆ‘çŸ¥é“ã€èƒ½æƒ³å¾—èµ·çš„å‚è€ƒèµ„æ–™è‚¯å®šä¼šè´´å‡ºæ¥ã€‚æ¯•ç«Ÿï¼Œä¸‰åè®²çš„æ—¶é—´è‚¯å®šæ˜¯ä¸å¤Ÿçš„ã€‚å¤§å®¶ä¸€å®šè¦é˜…è¯»æ›´å¤šçš„èµ„æ–™æ‰è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575027201,"ip_address":"","comment_id":156849,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆè®²çš„è¿˜æ˜¯å¾ˆå¥½çš„ï¼Œå¬ç€éŸ³é¢‘çœ‹ä»£ç æ„Ÿè§‰è·Ÿä¸ä¸ŠèŠ‚å¥ï¼Œéœ€è¦å¤šçœ‹å‡ éæ‰è¡Œã€‚åŒæ—¶ï¼Œæ–‡æœ«æ”¾ä¸Šé“¾æ¥ä¹Ÿå¾ˆä¸é”™ã€‚å¸Œæœ›è€å¸ˆèƒ½å¤šæ”¾äº›ç›¸å…³çš„å­¦ä¹ æ¨èèµ„æºï¼Œæˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”ğŸ˜€","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476254,"discussion_content":"æˆ‘çŸ¥é“ã€èƒ½æƒ³å¾—èµ·çš„å‚è€ƒèµ„æ–™è‚¯å®šä¼šè´´å‡ºæ¥ã€‚æ¯•ç«Ÿï¼Œä¸‰åè®²çš„æ—¶é—´è‚¯å®šæ˜¯ä¸å¤Ÿçš„ã€‚å¤§å®¶ä¸€å®šè¦é˜…è¯»æ›´å¤šçš„èµ„æ–™æ‰è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575027201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155662,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1574734127,"is_pvip":false,"replies":[{"id":59861,"content":"åº”è¯¥çš„ã€‚ä½†æˆ‘ä»¬è¿˜æ²¡å­¦åˆ°é€šç”¨çš„C++å¹¶å‘ç¼–ç¨‹å‘¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574762878,"ip_address":"","comment_id":155662,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è®¡æ•°å™¨çº¿ç¨‹å®‰å…¨æ˜¯ä¸æ˜¯æ›´å¥½ç‚¹","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475821,"discussion_content":"åº”è¯¥çš„ã€‚ä½†æˆ‘ä»¬è¿˜æ²¡å­¦åˆ°é€šç”¨çš„C++å¹¶å‘ç¼–ç¨‹å‘¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574762878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66709,"discussion_content":"è€å¸ˆï¼Œåœ¨å®æ—¶ç³»ç»Ÿä¸­æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨å‘¢ï¼Œå› ä¸ºå®æ—¶çº¿ç¨‹ä¸å¯ä»¥è¢«é˜»å¡å‘€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575100030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":99228,"discussion_content":"åŸå­æ“ä½œï¼Œç¬¬ 19 è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577197533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":66709,"ip_address":"","group_id":0},"score":99228,"extra":""}]}]},{"had_liked":false,"id":275544,"user_name":"è“¦ç„¶å›é¦–","can_delete":false,"product_type":"c1","uid":1172090,"ip_address":"","ucode":"B17658DCFE6402","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","comment_is_top":false,"comment_ctime":1611579174,"is_pvip":true,"replies":[{"id":100031,"content":"swap çš„çº¦å®šæ˜¯ä¸å‘ç”Ÿå¼‚å¸¸ï¼Œå®ƒå½“ç„¶ä¸èƒ½ä¿è¯ä¸å‘ç”Ÿå¼‚å¸¸ã€‚ç”¨æˆ·éœ€è¦ä¿è¯ä¸è®© swap æŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ˜¯ç”¨æˆ·éœ€è¦åšåˆ°çš„ï¼Œå¦åˆ™ç¨‹åºåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ä¼šå´©æºƒã€‚\n\nå¯¹äºä½ çš„å…·ä½“ä¾‹å­ï¼Œå¯¹æŒ‡é’ˆçš„äº¤æ¢è‡ªç„¶ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œæ‰€ä»¥å¯¹ smart_ptr çš„ swap æ“ä½œä¸ä¼šæœ‰å¼‚å¸¸ã€‚è‡ªå¢å¯¹å†…ç½®ç±»å‹å’Œ atomic ç±»å‹ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚è€Œå¯¹äºä½ è‡ªå·±çš„å®šä¹‰çš„ç±»ï¼Œå°±çœ‹ä½ è‡ªå·±çš„ç±»çš„è¡Œä¸ºäº†ã€‚å¼‚å¸¸æ˜¯å¦ä¼šå‘ç”Ÿï¼Œæ˜¯ç¨‹åºå‘˜è‡ªå·±å®šä¹‰çš„ï¼Œæ‰€ä»¥ç¨‹åºå‘˜è¦è´Ÿè´£å¯¹ä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„å‡½æ•°æ‰‹å·¥æ ‡æ˜ noexceptã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1611638312,"ip_address":"","comment_id":275544,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆstd::swapæœ¬èº«ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œæˆ‘çœ‹STLæºç é‡Œé¢ï¼Œä¹Ÿåªæ˜¯åœ¨å‡½æ•°å¤´éƒ¨åé¢åŠ äº†ä¸ªnoexcept,è€Œè¿™ä¸ªåªæ˜¯ä¸ªä¸å¯é çš„ä¿è¯ï¼Œè¿™é‡Œæ›´ä¸€èˆ¬çš„é—®é¢˜æ˜¯ï¼Œåˆ°åº•ç¨‹åºä»£ç ä»€ä¹ˆæƒ…å†µä¸‹æ˜¯ä¸€å®šä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„ï¼Œè€Œä»€ä¹ˆæƒ…å†µä¸‹æ˜¯å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆè§„å¾‹ï¼Ÿæ¯”å¦‚ä¸Šé¢çš„ç®€å•çš„èµ‹å€¼ï¼Œä¸ºä»€ä¹ˆå°±ä¸€å®šä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œ\nusing std::swap;    swap(ptr_, rhs.ptr_);    swap(shared_count_,         rhs.shared_count_);\nå†ä¸€èˆ¬çš„æƒ…å†µï¼Œæ¯”å¦‚ void add_count() noexcept  {    ++count_;  }è¿™ç§å°±æ˜¯ä¸ªè‡ªå¢è¿ç®—ï¼Œé‚£æ˜¯ä¸æ˜¯è¿™ç§å°±ä¸€å®šä¸ä¼šå‘ç”Ÿå¼‚å¸¸å‘¢ï¼Ÿå¼‚å¸¸æ˜¯å¦å‘ç”Ÿï¼Œæ€ä¹ˆç•Œå®šï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514390,"discussion_content":"swap çš„çº¦å®šæ˜¯ä¸å‘ç”Ÿå¼‚å¸¸ï¼Œå®ƒå½“ç„¶ä¸èƒ½ä¿è¯ä¸å‘ç”Ÿå¼‚å¸¸ã€‚ç”¨æˆ·éœ€è¦ä¿è¯ä¸è®© swap æŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ˜¯ç”¨æˆ·éœ€è¦åšåˆ°çš„ï¼Œå¦åˆ™ç¨‹åºåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ä¼šå´©æºƒã€‚\n\nå¯¹äºä½ çš„å…·ä½“ä¾‹å­ï¼Œå¯¹æŒ‡é’ˆçš„äº¤æ¢è‡ªç„¶ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œæ‰€ä»¥å¯¹ smart_ptr çš„ swap æ“ä½œä¸ä¼šæœ‰å¼‚å¸¸ã€‚è‡ªå¢å¯¹å†…ç½®ç±»å‹å’Œ atomic ç±»å‹ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚è€Œå¯¹äºä½ è‡ªå·±çš„å®šä¹‰çš„ç±»ï¼Œå°±çœ‹ä½ è‡ªå·±çš„ç±»çš„è¡Œä¸ºäº†ã€‚å¼‚å¸¸æ˜¯å¦ä¼šå‘ç”Ÿï¼Œæ˜¯ç¨‹åºå‘˜è‡ªå·±å®šä¹‰çš„ï¼Œæ‰€ä»¥ç¨‹åºå‘˜è¦è´Ÿè´£å¯¹ä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„å‡½æ•°æ‰‹å·¥æ ‡æ˜ noexceptã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1611638312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224253,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1591324586,"is_pvip":false,"replies":[{"id":82635,"content":"è¿™ä¸ªä»£ç ç”¨äº†æ¯”è¾ƒå®‰å…¨çš„æ‹·è´æ„é€ åŠ äº¤æ¢çš„èµ‹å€¼æ–¹å¼ã€‚æ³¨æ„ä½ çš„èµ‹å€¼å‡½æ•°åŸå‹æ˜¯ï¼š\n\nA &amp;operator=(A other);\n\nå‚æ•°æ˜¯å€¼è€Œä¸æ˜¯å¼•ç”¨ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨æ‰§è¡Œè¿›å…¥è¿™ä¸ªèµ‹å€¼å‡½æ•°ä½“ä¹‹å‰ï¼ŒA other å·²ç»å¯¼è‡´æ‹·è´æ„é€ è¢«æ‰§è¡Œäº†ä¸€æ¬¡ã€‚\n\nè¿™æ˜¯å¼‚å¸¸å®‰å…¨çš„æƒ¯ç”¨æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1591431825,"ip_address":"","comment_id":224253,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nclass A {\npublic:\n    int n;\n    std::string s1;\n    &#47;&#47;åœ¨åŠ äº†copy constructoræ—¶ï¼Œå¿…é¡»æ˜¾å¼åŠ å…¥constructor,ç¼–è¯‘å™¨ä¸ä¼šå†éšå¼æä¾›constructor\n    A(){}\n    &#47;&#47;copy constructor\n    A(const A&amp; a){\n        std::cout &lt;&lt; &quot;copy constructor of A\\n&quot;;\n    }\n\n    &#47;&#47; user-defined copy assignment, copy-and-swap form\n    A &amp;operator=(A other) {\n        std::cout &lt;&lt; &quot;copy assignment of A\\n&quot;;\n        std::swap(n, other.n);\n        std::swap(s1, other.s1);\n        return *this;\n    }\n};\n\n\nint main() {\n    A a1, a2;\n    std::cout &lt;&lt; &quot;a1 = a2 calls &quot;;\n    a1 = a2; \n\n\n}\nè€å¸ˆï¼Œä»¥ä¸Šä»£ç ä¸ºä»€ä¹ˆæœ€ç»ˆä¼šAçš„copy assignmentå’Œcopy constructoréƒ½ä¼šè¢«è°ƒç”¨ï¼Ÿæˆ‘è§‰å¾—æ‹·è´æ„é€ å’Œèµ‹å€¼åº”è¯¥æ˜¯é€‰å…¶ä¸­ä¸€ä¸ªæ‰å¯¹å•Šã€‚\ncppreferenceå¯¹copy assignmentçš„è°ƒç”¨æ—¶çš„æè¿°ï¼š\nThe copy assignment operator is called whenever selected by overload resolution, e.g. when an object appears on the left side of an assignment expressionã€‚\næˆ‘ç†è§£çš„æ˜¯copy assignmentåªä¼šåœ¨é‡è½½è§£ææ‰ä¼šå‘ç”Ÿï¼Œæ¯”å¦‚ä¸Šè¿°ä»£ç ï¼Œå¦‚æœè°ƒç”¨äº†copy assignment,é‚£ä¹ˆå¯ä»¥æ¨æ–­å‡ºå‘ç”Ÿäº†é‡è½½ï¼Œé‚£ä¹ˆcopy constructorå°±ä¸ä¼šè¢«è°ƒç”¨ã€‚ä¸ºä»€ä¹ˆäº‹å®ä¸æ˜¯è¿™æ ·çš„å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497414,"discussion_content":"è¿™ä¸ªä»£ç ç”¨äº†æ¯”è¾ƒå®‰å…¨çš„æ‹·è´æ„é€ åŠ äº¤æ¢çš„èµ‹å€¼æ–¹å¼ã€‚æ³¨æ„ä½ çš„èµ‹å€¼å‡½æ•°åŸå‹æ˜¯ï¼š\n\nA &amp;amp;operator=(A other);\n\nå‚æ•°æ˜¯å€¼è€Œä¸æ˜¯å¼•ç”¨ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨æ‰§è¡Œè¿›å…¥è¿™ä¸ªèµ‹å€¼å‡½æ•°ä½“ä¹‹å‰ï¼ŒA other å·²ç»å¯¼è‡´æ‹·è´æ„é€ è¢«æ‰§è¡Œäº†ä¸€æ¬¡ã€‚\n\nè¿™æ˜¯å¼‚å¸¸å®‰å…¨çš„æƒ¯ç”¨æ³•ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591431825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160366,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1575941527,"is_pvip":false,"replies":[{"id":61214,"content":"1. ä¸€èˆ¬è€Œè¨€ï¼Œæ‹·è´æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸ç®—æ­£å¸¸ï¼Œå®Œå…¨å¯ä»¥ç”¨æ™®é€šçš„å¼‚å¸¸å®‰å…¨çš„åšæ³•æ¥é¿å…å†…å­˜æ³„æ¼ã€‚åŸºæœ¬ç‚¹å°±æ˜¯ä¸è¦ä½¿ç”¨è£¸æŒ‡é’ˆã€‚ä¸€å®šè¦ç”¨ï¼Œå°±å¾—å°å¿ƒæ³¨æ„äº†ã€‚\n\n2. ç§»åŠ¨çš„æ‹·è´æ„é€ æ˜¯å¾ˆå±é™©çš„ï¼Œæ‰€ä»¥ç°åœ¨çš„æ™ºèƒ½æŒ‡é’ˆä¸ä¼šè¿™ä¹ˆå®ç°çš„ã€‚æ‹·è´æ˜¯æ‹·è´ï¼Œç§»åŠ¨æ˜¯ç§»åŠ¨ï¼Œæ‹·è´å°±ä¸è¦å½±å“å³è¾¹ã€‚åè¿‡æ¥è®²ï¼Œå¦‚æœçº¯ç²¹æ˜¯ç§»åŠ¨ï¼Œä¹Ÿä¸åº”è¯¥å‘ç”Ÿå¼‚å¸¸çš„ã€‚ä½†å¦‚æœä½ ç¡¬è¦æ··åˆç§»åŠ¨å’Œæ‹·è´ï¼Œé‚£å°±æ˜¯æ‰¾ç½ªå—äº†â€¦â€¦\n\n3. æˆ‘ä¸è®¤ä¸ºä¼šå‘ç”Ÿä½ è¯´çš„æƒ…å†µã€‚ç±»çš„å¤æ‚æ€§æ˜¯éœ€è¦äººåŠªåŠ›å»é™ä½çš„ï¼Œå…¶ä¸­å°±åŒ…æ‹¬éµå®ˆåŸºæœ¬çš„è§„èŒƒï¼ŒåŒ…æ‹¬swapä¸å…è®¸å‘ç”Ÿå¼‚å¸¸ã€‚\n\nåœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä½ å¼€è½¦å¯ä»¥å¼€åˆ°åœè½¦å¸¦ç”šè‡³é€†è¡Œã€‚ä½†è¿˜æ˜¯å¤šæƒ³æƒ³æ­£å¸¸çš„æƒ…å†µä¸ºå¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575951682,"ip_address":"","comment_id":160366,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºæ‹·è´æ„é€ å’Œèµ‹å€¼éƒ¨åˆ†çš„smart_ptrï¼Œè¿˜æœ‰å‡ ä¸ªç–‘é—®ï¼š\n1ï¼Œä¸€èˆ¬æ¥è®²ï¼Œè‹¥æ‹·è´æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œæ˜¯ä¸æ˜¯æœ‰å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œåº”è¯¥å¦‚ä½•é¿å…ï¼Ÿ\n2ï¼Œè¿™é‡Œçš„æ‹·è´æ„é€ ï¼Œä»è¯­ä¹‰ä¸Šæ¥è®²ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯å®ç°çš„ç§»åŠ¨çš„æ“ä½œï¼Œé‚£å¦‚æœæ‹·è´æ„é€ å¼‚å¸¸ï¼Œä½œä¸ºå…¥å‚çš„ otheræ˜¯å¦ä¹Ÿæœ‰å¯èƒ½å¤„äºéƒ¨åˆ†è¢«ç ´åçš„çŠ¶æ€ï¼Ÿ\n3ï¼Œå¦‚æœç±»ç»“æ„æ›´å¤æ‚ä¸€äº›ï¼Œå³ä½¿æˆåŠŸæ„é€ äº†ä¸´æ—¶å¯¹è±¡ï¼Œä»ç„¶æœ‰å…¶ä»–å¯èƒ½å¯¼è‡´å¼‚å¸¸çš„æ“ä½œï¼Œè€Œä¸ä»…ä»…åªæœ‰swapï¼Œé‚£ä½ åœ¨å›å¤å…¶ä»–åŒå­¦æ—¶æåˆ°çš„å‡†åˆ™ï¼Œâ€œä¸€å¾‹ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æ¥æ„é€ æ–°å¯¹è±¡ï¼Œç„¶åä½¿ç”¨æ— å¼‚å¸¸çš„ swap æ¥è·å¾—æ–°å¯¹è±¡â€ï¼Œæ˜¯å¦å°±ä¸é€‚ç”¨äº†ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477355,"discussion_content":"1. ä¸€èˆ¬è€Œè¨€ï¼Œæ‹·è´æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸ç®—æ­£å¸¸ï¼Œå®Œå…¨å¯ä»¥ç”¨æ™®é€šçš„å¼‚å¸¸å®‰å…¨çš„åšæ³•æ¥é¿å…å†…å­˜æ³„æ¼ã€‚åŸºæœ¬ç‚¹å°±æ˜¯ä¸è¦ä½¿ç”¨è£¸æŒ‡é’ˆã€‚ä¸€å®šè¦ç”¨ï¼Œå°±å¾—å°å¿ƒæ³¨æ„äº†ã€‚\n\n2. ç§»åŠ¨çš„æ‹·è´æ„é€ æ˜¯å¾ˆå±é™©çš„ï¼Œæ‰€ä»¥ç°åœ¨çš„æ™ºèƒ½æŒ‡é’ˆä¸ä¼šè¿™ä¹ˆå®ç°çš„ã€‚æ‹·è´æ˜¯æ‹·è´ï¼Œç§»åŠ¨æ˜¯ç§»åŠ¨ï¼Œæ‹·è´å°±ä¸è¦å½±å“å³è¾¹ã€‚åè¿‡æ¥è®²ï¼Œå¦‚æœçº¯ç²¹æ˜¯ç§»åŠ¨ï¼Œä¹Ÿä¸åº”è¯¥å‘ç”Ÿå¼‚å¸¸çš„ã€‚ä½†å¦‚æœä½ ç¡¬è¦æ··åˆç§»åŠ¨å’Œæ‹·è´ï¼Œé‚£å°±æ˜¯æ‰¾ç½ªå—äº†â€¦â€¦\n\n3. æˆ‘ä¸è®¤ä¸ºä¼šå‘ç”Ÿä½ è¯´çš„æƒ…å†µã€‚ç±»çš„å¤æ‚æ€§æ˜¯éœ€è¦äººåŠªåŠ›å»é™ä½çš„ï¼Œå…¶ä¸­å°±åŒ…æ‹¬éµå®ˆåŸºæœ¬çš„è§„èŒƒï¼ŒåŒ…æ‹¬swapä¸å…è®¸å‘ç”Ÿå¼‚å¸¸ã€‚\n\nåœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä½ å¼€è½¦å¯ä»¥å¼€åˆ°åœè½¦å¸¦ç”šè‡³é€†è¡Œã€‚ä½†è¿˜æ˜¯å¤šæƒ³æƒ³æ­£å¸¸çš„æƒ…å†µä¸ºå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575951682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156773,"user_name":"æµ‘æµ‘å™©å™©cium","can_delete":false,"product_type":"c1","uid":1617939,"ip_address":"","ucode":"358C0BCFF62B40","user_header":"https://static001.geekbang.org/account/avatar/00/18/b0/13/5cb3459c.jpg","comment_is_top":false,"comment_ctime":1574953072,"is_pvip":false,"replies":[{"id":60172,"content":"ç°åœ¨ä¸€èˆ¬è¯´æ‹·è´èµ‹å€¼å’Œç§»åŠ¨èµ‹å€¼äº†ã€‚è·Ÿæ„é€ çš„ä¸åŒæ–¹å¼å¯¹åº”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574983557,"ip_address":"","comment_id":156773,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"ç±»:\n4ç§æ„é€ å‡½æ•°:é»˜è®¤æ„é€ ï¼Œå¸¦å‚æ•°æ„é€ ï¼Œæ‹·è´æ„é€ ï¼Œç§»åŠ¨æ„é€ \n2ç§èµ‹å€¼å‡½æ•°:æ™®é€šèµ‹å€¼å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼å‡½æ•°","like_count":3},{"had_liked":false,"id":155873,"user_name":"å°æ—coding","can_delete":false,"product_type":"c1","uid":1303210,"ip_address":"","ucode":"D57D7DBF260216","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/aa/9ddc6469.jpg","comment_is_top":false,"comment_ctime":1574771057,"is_pvip":false,"replies":[{"id":59893,"content":"åé¢ä¼šè®²åˆ°ã€‚ç®€å•æ¥è¯´ï¼Œatomicå˜é‡çš„è¯»å–ã€å†™å…¥ã€å¢ã€å‡éƒ½ä¼šç¿»è¯‘æˆç›®æ ‡ç³»ç»Ÿä¸Šçš„åŸå­æ“ä½œæŒ‡ä»¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574773418,"ip_address":"","comment_id":155873,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è§ä¸€äº›å¤šçº¿ç¨‹ä½¿ç”¨è®¡æ•°å™¨çš„æ—¶å€™ï¼Œä¼šç”¨std::atomic&lt;int&gt;  numçš„æ–¹å¼æ¥å®šä¹‰è®¡æ•°å™¨ï¼Œä½†æ˜¯æ²¡æœ‰ç†è§£åˆ°ä¸ºå•¥std::atomicæ˜¯å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476228,"discussion_content":"ç°åœ¨ä¸€èˆ¬è¯´æ‹·è´èµ‹å€¼å’Œç§»åŠ¨èµ‹å€¼äº†ã€‚è·Ÿæ„é€ çš„ä¸åŒæ–¹å¼å¯¹åº”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574983557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349241,"user_name":"Roblaboy","can_delete":false,"product_type":"c1","uid":2979544,"ip_address":"","ucode":"801AB12DBE521B","user_header":"","comment_is_top":false,"comment_ctime":1655824184,"is_pvip":false,"replies":[{"id":127226,"content":"å®é™…å®ƒæ˜¯ï¼š\n\nptr2.operator=(smart_ptr(ptr1));\n\noperator= è¦æ±‚ä¸€ä¸ªå€¼è€Œéå¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šéšå¼äº§ç”Ÿ smart_ptr(ptr1) è¿™æ ·çš„æ„é€ ä»£ç ã€‚åœ¨æ„é€ è¿‡ç¨‹ä¸­ï¼Œç»™çš„å‚æ•°æ˜¯ä¸ªå·¦å€¼ï¼Œå°±ä¼šèµ°æ‹·è´æ„é€ ï¼Œå¼•ç”¨è®¡æ•°åŠ ä¸€ã€‚\n\næ³¨æ„æ–‡ä¸­è¿™æ®µè¯ï¼š\n\nâ€œæŠŠèµ‹å€¼å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ smart_ptr&amp; æ”¹æˆäº† smart_ptrï¼Œåœ¨æ„é€ å‚æ•°æ—¶ç›´æ¥ç”Ÿæˆæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œä¸å†éœ€è¦åœ¨å‡½æ•°ä½“ä¸­æ„é€ ä¸´æ—¶å¯¹è±¡ã€‚ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚â€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1656120293,"ip_address":"","comment_id":349241,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è¯·é—® ptr2 = ptr1; è¿™ä¸€å¥å“ªé‡Œè°ƒç”¨äº†add_count()?","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475905,"discussion_content":"åé¢ä¼šè®²åˆ°ã€‚ç®€å•æ¥è¯´ï¼Œatomicå˜é‡çš„è¯»å–ã€å†™å…¥ã€å¢ã€å‡éƒ½ä¼šç¿»è¯‘æˆç›®æ ‡ç³»ç»Ÿä¸Šçš„åŸå­æ“ä½œæŒ‡ä»¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574773418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341240,"user_name":"hunter7z","can_delete":false,"product_type":"c1","uid":1263960,"ip_address":"","ucode":"879F63FA4C22D6","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/58/ad35a72f.jpg","comment_is_top":false,"comment_ctime":1649468326,"is_pvip":false,"replies":[{"id":124819,"content":"å› ä¸º C++ çš„è§„åˆ™å°±æ˜¯è¿™æ ·ï¼Œè®©é‡è½½ -&gt; ä¹‹åçš„ç»“æœèƒ½å¤Ÿæ–¹ä¾¿ã€ç›´è§‚åœ°è¢«ä½¿ç”¨ã€‚\n\nçº¯æŠ€æœ¯çš„æè¿°å¯ä»¥å‚è€ƒ C++ æ ‡å‡†ã€‚åœ¨ C++20 é‡Œæ˜¯ Â§12.6.5 Class member accessï¼š\n\nFor an expression of the form\n\npostfix-expression -&gt; template_opt id-expression\n\nthe operator function is selected by overload resolution (12.4.1.2), and the expression is interpreted as\n\n( postfix-expression . operator -&gt; () ) -&gt; template_opt id-expression\n\næ¢å¥è¯è¯´ï¼Œåœ¨ obj é‡è½½äº† operator-&gt; æ—¶ï¼Œobj-&gt; ç¡®ç¡®å®å®ä¼šè¢«è§£é‡Šæˆï¼š\n\n(obj.operator-&gt;())-&gt;","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1649751085,"ip_address":"","comment_id":341240,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"æˆ‘æœ‰ä¸€ä¸ªå…³äºé‡è½½-&gt;è¿ç®—ç¬¦çš„é—®é¢˜ï¼Œæ‚¨åœ¨æ–‡ç« æ˜¯è¿™ä¹ˆå®ç°çš„ï¼š\nT* operator-&gt;() const { return ptr_; }\næˆ‘çœ‹STLé‡Œçš„unique_pträ¹Ÿæ˜¯ç±»ä¼¼çš„å®ç°æ–¹æ³•ã€‚ä½†æ˜¯æˆ‘ä¸ç†è§£çš„æ˜¯ï¼Œ-&gt;è¿”å›äº†ä¸€ä¸ªTç±»æŒ‡é’ˆï¼Œå¦‚æœæƒ³è¦è°ƒç”¨Tç±»æ–¹æ³•çš„è¯ï¼Œåº”è¯¥éœ€è¦å†ä½¿ç”¨-&gt;è°ƒç”¨æ–¹æ³•æ‰å¯¹å§ï¼Ÿç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š\n(smart_ptr-&gt;())-&gt;method()\nä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼šsmart_ptr-&gt;method()æ¥è°ƒç”¨å‘¢ï¼Ÿ\n","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561941,"discussion_content":"å› ä¸º C++ çš„è§„åˆ™å°±æ˜¯è¿™æ ·ï¼Œè®©é‡è½½ -&gt; ä¹‹åçš„ç»“æœèƒ½å¤Ÿæ–¹ä¾¿ã€ç›´è§‚åœ°è¢«ä½¿ç”¨ã€‚\n\nçº¯æŠ€æœ¯çš„æè¿°å¯ä»¥å‚è€ƒ C++ æ ‡å‡†ã€‚åœ¨ C++20 é‡Œæ˜¯ Â§12.6.5 Class member accessï¼š\n\nFor an expression of the form\n\npostfix-expression -&gt; template_opt id-expression\n\nthe operator function is selected by overload resolution (12.4.1.2), and the expression is interpreted as\n\n( postfix-expression . operator -&gt; () ) -&gt; template_opt id-expression\n\næ¢å¥è¯è¯´ï¼Œåœ¨ obj é‡è½½äº† operator-&gt; æ—¶ï¼Œobj-&gt; ç¡®ç¡®å®å®ä¼šè¢«è§£é‡Šæˆï¼š\n\n(obj.operator-&gt;())-&gt;","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649751085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308399,"user_name":"Mari","can_delete":false,"product_type":"c1","uid":2271867,"ip_address":"","ucode":"5260C80C8B6AD6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/E73UicmpgFiaZW4SOTGaxoIk9PWue54neNcfsicz7HOxJUucep4jSMyeMMruLNcIlxsE330qOFMacaEQ9Vz4zXJyg/132","comment_is_top":false,"comment_ctime":1629600164,"is_pvip":false,"replies":[{"id":111776,"content":"æ²¡æœ‰å®ç° operator=ï¼Œé‚£èµ‹å€¼å°±æ˜¯æŒ‰æˆå‘˜å¤åˆ¶ï¼ŒæŠŠä¸¤ä¸ªæŒ‡é’ˆå¤åˆ¶è¿‡å»ï¼Œå¼•ç”¨è®¡æ•°æ²¡æœ‰å¢åŠ â€¦â€¦å½“ç„¶æ˜¯é”™è¯¯çš„ç»“æœäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1629809793,"ip_address":"","comment_id":308399,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"å…³äºç¤ºä¾‹ä»£ç ã€‚æœ‰ä¸ªç–‘é—®é—®ä¸‹ï¼Œæœ›å¤§ä½¬èµæ•™ï¼š\nsmart_ptr æ²¡æœ‰å®ç° operator= æ—¶ï¼Œç»“æœåˆé—®é¢˜ï¼Œptr2çš„ use_count() è¿”å›1\n```\nuse count of ptr1 is 1\nuse count of ptr2 was 0\ncopy construct smart_ptr&lt;U&gt; &amp;other\nuse count of ptr2 is now 1\nptr1 is not empty\n~circle()\n```\n\noperator= ä»£ç ï¼š\n    smart_ptr &amp;operator=(smart_ptr rhs) {\n        puts(&quot;operator= is call.&quot;);\n        rhs.swap(*this);\n        return *this;\n    }\n\nåŠ ä¸Šè¿™ä¸ªå‡½æ•°ï¼Œptr2 use_count ç»“æœå°±æ­£å¸¸è¿”å›2äº†ï¼Œè¯·é—®æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ\n\nuse count of ptr1 is 1\nuse count of ptr2 was 0\ncopy construct smart_ptr&lt;U&gt; &amp;other\noperator= is call.\nuse count of ptr2 is now 2\nptr1 is not empty\n~circle()","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525480,"discussion_content":"æ²¡æœ‰å®ç° operator=ï¼Œé‚£èµ‹å€¼å°±æ˜¯æŒ‰æˆå‘˜å¤åˆ¶ï¼ŒæŠŠä¸¤ä¸ªæŒ‡é’ˆå¤åˆ¶è¿‡å»ï¼Œå¼•ç”¨è®¡æ•°æ²¡æœ‰å¢åŠ â€¦â€¦å½“ç„¶æ˜¯é”™è¯¯çš„ç»“æœäº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629809793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242281,"user_name":"ä¹”æ—­","can_delete":false,"product_type":"c1","uid":2116731,"ip_address":"","ucode":"D129F9E036833C","user_header":"https://static001.geekbang.org/account/avatar/00/20/4c/7b/648a5ca8.jpg","comment_is_top":false,"comment_ctime":1597657393,"is_pvip":false,"replies":[{"id":89429,"content":"å¼‚å¸¸å®‰å…¨æ€§ï¼Œè¿™å„¿æ˜¯æŒ‡å½“å¤åˆ¶æŸä¸ªå¯¹è±¡çš„æ•°æ®æˆå‘˜æ—¶ï¼Œå¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œèƒ½ä¸èƒ½ä¿è¯ this å¯¹è±¡çš„çŠ¶æ€ä¸å˜ã€‚ç½‘ä¸Šä½ åº”è¯¥å¾ˆå®¹æ˜“æœåˆ°å…³äºå¼‚å¸¸å®‰å…¨æ€§çš„èµ„æ–™ã€‚\n\nä½¿ç”¨ == è¿™ç§åˆ¤æ–­æ–¹æ³•çš„ä»£ç ï¼Œå¤§æ¦‚ç‡ä¼šï¼Œå¦‚æœå¤åˆ¶ä¸€åŠæ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œthis å¯¹è±¡å°†å¤„äºè‹è‡äººè¿™æ ·æ··åˆæ€ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œå¯¹è±¡èµ‹å€¼çš„ç»“æœè¦ä¹ˆå®Œå…¨æˆåŠŸï¼Œè¦ä¹ˆä¿æŒåŸæ ·ä¸å˜ï¼Œä¸åº”è¯¥å¤„äºä¸­é—´æ€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1597661522,"ip_address":"","comment_id":242281,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"â€œå¦‚æœä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äº if (this != &amp;rhs) çš„åˆ¤æ–­çš„è¯ï¼Œé‚£ç§ç”¨æ³•æ›´å•°å—¦ï¼Œè€Œä¸”å¼‚å¸¸å®‰å…¨æ€§ä¸å¤Ÿå¥½â€”â€”å¦‚æœåœ¨èµ‹å€¼è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡çš„å†…å®¹å¯èƒ½å·²ç»è¢«éƒ¨åˆ†ç ´åäº†ï¼Œå¯¹è±¡ä¸å†å¤„äºä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€ã€‚â€œâ€\n\nè¯·é—®ï¼Œè¿™ä¸ªåœ°æ–¹æ€ä¹ˆç†è§£å‘¢ï¼Ÿè¿™ä¸ªåªæ˜¯åšäº†åˆ¤æ–­ï¼Œå’Œèµ‹å€¼è¿‡ç¨‹æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿæ¯å¤©ç†è§£æ‚¨è¯´çš„å¼‚å¸¸å®‰å…¨æ€§æ˜¯æŒ‡çš„ä»€ä¹ˆã€‚è°¢è°¢ï¼","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503969,"discussion_content":"å¼‚å¸¸å®‰å…¨æ€§ï¼Œè¿™å„¿æ˜¯æŒ‡å½“å¤åˆ¶æŸä¸ªå¯¹è±¡çš„æ•°æ®æˆå‘˜æ—¶ï¼Œå¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œèƒ½ä¸èƒ½ä¿è¯ this å¯¹è±¡çš„çŠ¶æ€ä¸å˜ã€‚ç½‘ä¸Šä½ åº”è¯¥å¾ˆå®¹æ˜“æœåˆ°å…³äºå¼‚å¸¸å®‰å…¨æ€§çš„èµ„æ–™ã€‚\n\nä½¿ç”¨ == è¿™ç§åˆ¤æ–­æ–¹æ³•çš„ä»£ç ï¼Œå¤§æ¦‚ç‡ä¼šï¼Œå¦‚æœå¤åˆ¶ä¸€åŠæ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œthis å¯¹è±¡å°†å¤„äºè‹è‡äººè¿™æ ·æ··åˆæ€ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œå¯¹è±¡èµ‹å€¼çš„ç»“æœè¦ä¹ˆå®Œå…¨æˆåŠŸï¼Œè¦ä¹ˆä¿æŒåŸæ ·ä¸å˜ï¼Œä¸åº”è¯¥å¤„äºä¸­é—´æ€ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597661522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169214,"user_name":"Geek_9e42eb","can_delete":false,"product_type":"c1","uid":1593979,"ip_address":"","ucode":"289E65C28F6C2A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTItEbXDEnXQ7QjqQ8mfa67aylfHvT3FvUXaUPlZ9QjMar417oBU8GYPvibWDmxDnMsEqibtia7DHuFGw/132","comment_is_top":false,"comment_ctime":1578294360,"is_pvip":false,"replies":[{"id":65664,"content":"ä¼ ç»Ÿæ•™èµ‹å€¼çš„éƒ½ä¼šæœ‰è¿™ä¸ªæ¯”è¾ƒã€‚è¿™æ ·å†™ä¸€èˆ¬ä¸èƒ½ä¿è¯å¼‚å¸¸å®‰å…¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578308694,"ip_address":"","comment_id":169214,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è¿™æ®µè¯æœ‰ç‚¹æ²¡çœ‹æ‡‚ï¼š\nå¦‚æœä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äº if (this != &amp;rhs) çš„åˆ¤æ–­çš„è¯ï¼Œé‚£ç§ç”¨æ³•æ›´å•°å—¦ï¼Œè€Œä¸”å¼‚å¸¸å®‰å…¨æ€§ä¸å¤Ÿå¥½â€”â€”å¦‚æœåœ¨èµ‹å€¼è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡çš„å†…å®¹å¯èƒ½å·²ç»è¢«éƒ¨åˆ†ç ´åäº†ï¼Œå¯¹è±¡ä¸å†å¤„äºä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€ã€‚\n\nè¯·é—®è€å¸ˆï¼Œâ€œä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äº if (this != &amp;rhs) çš„åˆ¤æ–­çš„è¯â€è¿™ä¸ªè¡¨è¿°æ²¡æ€ä¹ˆçœ‹æ‡‚ï¼Œæ‚¨æ˜¯æŒ‡ä»€ä¹ˆåœ°æ–¹æœ‰è¿™ä¸ªåˆ¤æ–­ï¼Ÿä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªåˆ¤æ–­æ›´å•°å—¦ï¼Œå®‰å…¨æ€§ä¸å¥½ï¼Ÿ\n","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480459,"discussion_content":"ä¼ ç»Ÿæ•™èµ‹å€¼çš„éƒ½ä¼šæœ‰è¿™ä¸ªæ¯”è¾ƒã€‚è¿™æ ·å†™ä¸€èˆ¬ä¸èƒ½ä¿è¯å¼‚å¸¸å®‰å…¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578308694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3948439,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","nickname":"Mattrach","note":"","ucode":"D530826D02FA1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":649902,"discussion_content":"ä¹‹å‰çœ‹ä¾¯æ·çš„è¯¾ç¨‹ä¸­æ˜¯è¿™æ ·å†™çš„ï¼Œç¡®å®æ²¡æåˆ°å¼‚å¸¸å®‰å…¨çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724125404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":480459,"ip_address":"ç¦å»º","group_id":0},"score":649902,"extra":""}]}]},{"had_liked":false,"id":162050,"user_name":"è´µå­","can_delete":false,"product_type":"c1","uid":1690431,"ip_address":"","ucode":"A94801C05CB07E","user_header":"https://static001.geekbang.org/account/avatar/00/19/cb/3f/3d044d18.jpg","comment_is_top":false,"comment_ctime":1576456656,"is_pvip":false,"replies":[{"id":61672,"content":"æ¯ä¸ªå¯¹è±¡æœ‰ç‹¬ç«‹çš„è®¡æ•°ï¼Œä¸å¯èƒ½æ˜¯é™æ€æ•°æ®æˆå‘˜ã€‚ä¸åŒæŒ‡é’ˆå¯èƒ½å…±äº«å¼•ç”¨è®¡æ•°ï¼Œå› è€Œå¼•ç”¨è®¡æ•°ä¹Ÿå¿…é¡»ç‹¬ç«‹å­˜å‚¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576459197,"ip_address":"","comment_id":162050,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"å¦‚æœshared_countç±»ä½œä¸ºé™æ€æˆå‘˜å˜é‡ï¼Œæ²¡æœ‰äº†æŒ‡é’ˆçš„æ“ä½œï¼Œä»£ç ä¼šä¸ä¼šæ›´ç®€æ´äº›ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477945,"discussion_content":"æ¯ä¸ªå¯¹è±¡æœ‰ç‹¬ç«‹çš„è®¡æ•°ï¼Œä¸å¯èƒ½æ˜¯é™æ€æ•°æ®æˆå‘˜ã€‚ä¸åŒæŒ‡é’ˆå¯èƒ½å…±äº«å¼•ç”¨è®¡æ•°ï¼Œå› è€Œå¼•ç”¨è®¡æ•°ä¹Ÿå¿…é¡»ç‹¬ç«‹å­˜å‚¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576459197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1690431,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cb/3f/3d044d18.jpg","nickname":"è´µå­","note":"","ucode":"A94801C05CB07E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":84161,"discussion_content":"è°¢è°¢è€å¸ˆæŒ‡å¯¼ï¼Œæ˜¯æˆ‘è€ƒè™‘ä¸å‘¨ã€‚æ¯ä¸ªèµ„æºéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ç‹¬ç«‹è®¡æ•°å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576492607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157260,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1575099868,"is_pvip":false,"replies":[{"id":60329,"content":"å¯ä»¥ï¼Œæ­¤å¤„æ²¡åŒºåˆ«ã€‚æˆ‘æ˜¯ä» smart_ptr(rhs).swap(*this) æ”¹è¿‡æ¥çš„ï¼Œå½¢å¼å°±æ²¡æœ‰åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575120342,"ip_address":"","comment_id":157260,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œoperator=é‡è½½é‡Œé¢çš„rhs.swap(*this)å¯ä»¥ç›´æ¥å†™swap(rhs)å§","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476376,"discussion_content":"å¯ä»¥ï¼Œæ­¤å¤„æ²¡åŒºåˆ«ã€‚æˆ‘æ˜¯ä» smart_ptr(rhs).swap(*this) æ”¹è¿‡æ¥çš„ï¼Œå½¢å¼å°±æ²¡æœ‰åŠ¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575120342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156434,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1574870889,"is_pvip":false,"replies":[{"id":60073,"content":"å“ˆå“ˆï¼Œå¯¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574899352,"ip_address":"","comment_id":156434,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³æ˜ç™½äº†ï¼Œåˆšæ‰çŒ›ä¸€ä¸‹æ‡µäº†\n\nsmart_ptr ptr1{create_shape(shape_type::circle)};\nsmart_ptr ptr3;\n&#47;*\nsmart_ptr&amp; operator=(smart_ptr rhs) { \n    rhs.swap(*this); \n    return *this; \n}\n*&#47;\n&#47;&#47; smart_ptr rhs{ptr1} å‘ç”Ÿæ‹·è´æ„é€ ï¼Œæ‰€ä»¥ç¼–è¯‘å‡ºé”™\nptr3 = ptr1;   &#47;&#47; ç¼–è¯‘å‡ºé”™\n\n&#47;&#47; smart_ptr rhs{std::move(ptr1)} ç§»åŠ¨æ„é€ ï¼Œæ‰€ä»¥OK\nptr3 = std::move(ptr1); &#47;&#47; OKï¼Œå¯ä»¥","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476106,"discussion_content":"å“ˆå“ˆï¼Œå¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574899352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101894,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","nickname":"NEVER SETTLE","note":"","ucode":"9C86BDAFDBF768","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63616,"discussion_content":"C++çœŸæ˜¯åšå¤§ç²¾æ·±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574899855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156773,"user_name":"æµ‘æµ‘å™©å™©cium","can_delete":false,"product_type":"c1","uid":1617939,"ip_address":"","ucode":"358C0BCFF62B40","user_header":"https://static001.geekbang.org/account/avatar/00/18/b0/13/5cb3459c.jpg","comment_is_top":false,"comment_ctime":1574953072,"is_pvip":false,"replies":[{"id":60172,"content":"ç°åœ¨ä¸€èˆ¬è¯´æ‹·è´èµ‹å€¼å’Œç§»åŠ¨èµ‹å€¼äº†ã€‚è·Ÿæ„é€ çš„ä¸åŒæ–¹å¼å¯¹åº”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574983557,"ip_address":"","comment_id":156773,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"ç±»:\n4ç§æ„é€ å‡½æ•°:é»˜è®¤æ„é€ ï¼Œå¸¦å‚æ•°æ„é€ ï¼Œæ‹·è´æ„é€ ï¼Œç§»åŠ¨æ„é€ \n2ç§èµ‹å€¼å‡½æ•°:æ™®é€šèµ‹å€¼å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼å‡½æ•°","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476228,"discussion_content":"ç°åœ¨ä¸€èˆ¬è¯´æ‹·è´èµ‹å€¼å’Œç§»åŠ¨èµ‹å€¼äº†ã€‚è·Ÿæ„é€ çš„ä¸åŒæ–¹å¼å¯¹åº”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574983557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155873,"user_name":"å°æ—coding","can_delete":false,"product_type":"c1","uid":1303210,"ip_address":"","ucode":"D57D7DBF260216","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/aa/9ddc6469.jpg","comment_is_top":false,"comment_ctime":1574771057,"is_pvip":false,"replies":[{"id":59893,"content":"åé¢ä¼šè®²åˆ°ã€‚ç®€å•æ¥è¯´ï¼Œatomicå˜é‡çš„è¯»å–ã€å†™å…¥ã€å¢ã€å‡éƒ½ä¼šç¿»è¯‘æˆç›®æ ‡ç³»ç»Ÿä¸Šçš„åŸå­æ“ä½œæŒ‡ä»¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574773418,"ip_address":"","comment_id":155873,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è§ä¸€äº›å¤šçº¿ç¨‹ä½¿ç”¨è®¡æ•°å™¨çš„æ—¶å€™ï¼Œä¼šç”¨std::atomic&lt;int&gt;  numçš„æ–¹å¼æ¥å®šä¹‰è®¡æ•°å™¨ï¼Œä½†æ˜¯æ²¡æœ‰ç†è§£åˆ°ä¸ºå•¥std::atomicæ˜¯å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475905,"discussion_content":"åé¢ä¼šè®²åˆ°ã€‚ç®€å•æ¥è¯´ï¼Œatomicå˜é‡çš„è¯»å–ã€å†™å…¥ã€å¢ã€å‡éƒ½ä¼šç¿»è¯‘æˆç›®æ ‡ç³»ç»Ÿä¸Šçš„åŸå­æ“ä½œæŒ‡ä»¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574773418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349241,"user_name":"Roblaboy","can_delete":false,"product_type":"c1","uid":2979544,"ip_address":"","ucode":"801AB12DBE521B","user_header":"","comment_is_top":false,"comment_ctime":1655824184,"is_pvip":false,"replies":[{"id":127226,"content":"å®é™…å®ƒæ˜¯ï¼š\n\nptr2.operator=(smart_ptr(ptr1));\n\noperator= è¦æ±‚ä¸€ä¸ªå€¼è€Œéå¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šéšå¼äº§ç”Ÿ smart_ptr(ptr1) è¿™æ ·çš„æ„é€ ä»£ç ã€‚åœ¨æ„é€ è¿‡ç¨‹ä¸­ï¼Œç»™çš„å‚æ•°æ˜¯ä¸ªå·¦å€¼ï¼Œå°±ä¼šèµ°æ‹·è´æ„é€ ï¼Œå¼•ç”¨è®¡æ•°åŠ ä¸€ã€‚\n\næ³¨æ„æ–‡ä¸­è¿™æ®µè¯ï¼š\n\nâ€œæŠŠèµ‹å€¼å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ smart_ptr&amp; æ”¹æˆäº† smart_ptrï¼Œåœ¨æ„é€ å‚æ•°æ—¶ç›´æ¥ç”Ÿæˆæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œä¸å†éœ€è¦åœ¨å‡½æ•°ä½“ä¸­æ„é€ ä¸´æ—¶å¯¹è±¡ã€‚ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚â€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1656120293,"ip_address":"","comment_id":349241,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è¯·é—® ptr2 = ptr1; è¿™ä¸€å¥å“ªé‡Œè°ƒç”¨äº†add_count()?","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577441,"discussion_content":"å®é™…å®ƒæ˜¯ï¼š\n\nptr2.operator=(smart_ptr(ptr1));\n\noperator= è¦æ±‚ä¸€ä¸ªå€¼è€Œéå¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šéšå¼äº§ç”Ÿ smart_ptr(ptr1) è¿™æ ·çš„æ„é€ ä»£ç ã€‚åœ¨æ„é€ è¿‡ç¨‹ä¸­ï¼Œç»™çš„å‚æ•°æ˜¯ä¸ªå·¦å€¼ï¼Œå°±ä¼šèµ°æ‹·è´æ„é€ ï¼Œå¼•ç”¨è®¡æ•°åŠ ä¸€ã€‚\n\næ³¨æ„æ–‡ä¸­è¿™æ®µè¯ï¼š\n\nâ€œæŠŠèµ‹å€¼å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ smart_ptr&amp; æ”¹æˆäº† smart_ptrï¼Œåœ¨æ„é€ å‚æ•°æ—¶ç›´æ¥ç”Ÿæˆæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œä¸å†éœ€è¦åœ¨å‡½æ•°ä½“ä¸­æ„é€ ä¸´æ—¶å¯¹è±¡ã€‚ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚â€","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1656120293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341240,"user_name":"hunter7z","can_delete":false,"product_type":"c1","uid":1263960,"ip_address":"","ucode":"879F63FA4C22D6","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/58/ad35a72f.jpg","comment_is_top":false,"comment_ctime":1649468326,"is_pvip":false,"replies":[{"id":124819,"content":"å› ä¸º C++ çš„è§„åˆ™å°±æ˜¯è¿™æ ·ï¼Œè®©é‡è½½ -&gt; ä¹‹åçš„ç»“æœèƒ½å¤Ÿæ–¹ä¾¿ã€ç›´è§‚åœ°è¢«ä½¿ç”¨ã€‚\n\nçº¯æŠ€æœ¯çš„æè¿°å¯ä»¥å‚è€ƒ C++ æ ‡å‡†ã€‚åœ¨ C++20 é‡Œæ˜¯ Â§12.6.5 Class member accessï¼š\n\nFor an expression of the form\n\npostfix-expression -&gt; template_opt id-expression\n\nthe operator function is selected by overload resolution (12.4.1.2), and the expression is interpreted as\n\n( postfix-expression . operator -&gt; () ) -&gt; template_opt id-expression\n\næ¢å¥è¯è¯´ï¼Œåœ¨ obj é‡è½½äº† operator-&gt; æ—¶ï¼Œobj-&gt; ç¡®ç¡®å®å®ä¼šè¢«è§£é‡Šæˆï¼š\n\n(obj.operator-&gt;())-&gt;","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1649751085,"ip_address":"","comment_id":341240,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"æˆ‘æœ‰ä¸€ä¸ªå…³äºé‡è½½-&gt;è¿ç®—ç¬¦çš„é—®é¢˜ï¼Œæ‚¨åœ¨æ–‡ç« æ˜¯è¿™ä¹ˆå®ç°çš„ï¼š\nT* operator-&gt;() const { return ptr_; }\næˆ‘çœ‹STLé‡Œçš„unique_pträ¹Ÿæ˜¯ç±»ä¼¼çš„å®ç°æ–¹æ³•ã€‚ä½†æ˜¯æˆ‘ä¸ç†è§£çš„æ˜¯ï¼Œ-&gt;è¿”å›äº†ä¸€ä¸ªTç±»æŒ‡é’ˆï¼Œå¦‚æœæƒ³è¦è°ƒç”¨Tç±»æ–¹æ³•çš„è¯ï¼Œåº”è¯¥éœ€è¦å†ä½¿ç”¨-&gt;è°ƒç”¨æ–¹æ³•æ‰å¯¹å§ï¼Ÿç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š\n(smart_ptr-&gt;())-&gt;method()\nä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼šsmart_ptr-&gt;method()æ¥è°ƒç”¨å‘¢ï¼Ÿ\n","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577441,"discussion_content":"å®é™…å®ƒæ˜¯ï¼š\n\nptr2.operator=(smart_ptr(ptr1));\n\noperator= è¦æ±‚ä¸€ä¸ªå€¼è€Œéå¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šéšå¼äº§ç”Ÿ smart_ptr(ptr1) è¿™æ ·çš„æ„é€ ä»£ç ã€‚åœ¨æ„é€ è¿‡ç¨‹ä¸­ï¼Œç»™çš„å‚æ•°æ˜¯ä¸ªå·¦å€¼ï¼Œå°±ä¼šèµ°æ‹·è´æ„é€ ï¼Œå¼•ç”¨è®¡æ•°åŠ ä¸€ã€‚\n\næ³¨æ„æ–‡ä¸­è¿™æ®µè¯ï¼š\n\nâ€œæŠŠèµ‹å€¼å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ smart_ptr&amp; æ”¹æˆäº† smart_ptrï¼Œåœ¨æ„é€ å‚æ•°æ—¶ç›´æ¥ç”Ÿæˆæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œä¸å†éœ€è¦åœ¨å‡½æ•°ä½“ä¸­æ„é€ ä¸´æ—¶å¯¹è±¡ã€‚ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚â€","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1656120293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308399,"user_name":"Mari","can_delete":false,"product_type":"c1","uid":2271867,"ip_address":"","ucode":"5260C80C8B6AD6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/E73UicmpgFiaZW4SOTGaxoIk9PWue54neNcfsicz7HOxJUucep4jSMyeMMruLNcIlxsE330qOFMacaEQ9Vz4zXJyg/132","comment_is_top":false,"comment_ctime":1629600164,"is_pvip":false,"replies":[{"id":111776,"content":"æ²¡æœ‰å®ç° operator=ï¼Œé‚£èµ‹å€¼å°±æ˜¯æŒ‰æˆå‘˜å¤åˆ¶ï¼ŒæŠŠä¸¤ä¸ªæŒ‡é’ˆå¤åˆ¶è¿‡å»ï¼Œå¼•ç”¨è®¡æ•°æ²¡æœ‰å¢åŠ â€¦â€¦å½“ç„¶æ˜¯é”™è¯¯çš„ç»“æœäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1629809793,"ip_address":"","comment_id":308399,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"å…³äºç¤ºä¾‹ä»£ç ã€‚æœ‰ä¸ªç–‘é—®é—®ä¸‹ï¼Œæœ›å¤§ä½¬èµæ•™ï¼š\nsmart_ptr æ²¡æœ‰å®ç° operator= æ—¶ï¼Œç»“æœåˆé—®é¢˜ï¼Œptr2çš„ use_count() è¿”å›1\n```\nuse count of ptr1 is 1\nuse count of ptr2 was 0\ncopy construct smart_ptr&lt;U&gt; &amp;other\nuse count of ptr2 is now 1\nptr1 is not empty\n~circle()\n```\n\noperator= ä»£ç ï¼š\n    smart_ptr &amp;operator=(smart_ptr rhs) {\n        puts(&quot;operator= is call.&quot;);\n        rhs.swap(*this);\n        return *this;\n    }\n\nåŠ ä¸Šè¿™ä¸ªå‡½æ•°ï¼Œptr2 use_count ç»“æœå°±æ­£å¸¸è¿”å›2äº†ï¼Œè¯·é—®æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ\n\nuse count of ptr1 is 1\nuse count of ptr2 was 0\ncopy construct smart_ptr&lt;U&gt; &amp;other\noperator= is call.\nuse count of ptr2 is now 2\nptr1 is not empty\n~circle()","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561941,"discussion_content":"å› ä¸º C++ çš„è§„åˆ™å°±æ˜¯è¿™æ ·ï¼Œè®©é‡è½½ -&gt; ä¹‹åçš„ç»“æœèƒ½å¤Ÿæ–¹ä¾¿ã€ç›´è§‚åœ°è¢«ä½¿ç”¨ã€‚\n\nçº¯æŠ€æœ¯çš„æè¿°å¯ä»¥å‚è€ƒ C++ æ ‡å‡†ã€‚åœ¨ C++20 é‡Œæ˜¯ Â§12.6.5 Class member accessï¼š\n\nFor an expression of the form\n\npostfix-expression -&gt; template_opt id-expression\n\nthe operator function is selected by overload resolution (12.4.1.2), and the expression is interpreted as\n\n( postfix-expression . operator -&gt; () ) -&gt; template_opt id-expression\n\næ¢å¥è¯è¯´ï¼Œåœ¨ obj é‡è½½äº† operator-&gt; æ—¶ï¼Œobj-&gt; ç¡®ç¡®å®å®ä¼šè¢«è§£é‡Šæˆï¼š\n\n(obj.operator-&gt;())-&gt;","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649751085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242281,"user_name":"ä¹”æ—­","can_delete":false,"product_type":"c1","uid":2116731,"ip_address":"","ucode":"D129F9E036833C","user_header":"https://static001.geekbang.org/account/avatar/00/20/4c/7b/648a5ca8.jpg","comment_is_top":false,"comment_ctime":1597657393,"is_pvip":false,"replies":[{"id":89429,"content":"å¼‚å¸¸å®‰å…¨æ€§ï¼Œè¿™å„¿æ˜¯æŒ‡å½“å¤åˆ¶æŸä¸ªå¯¹è±¡çš„æ•°æ®æˆå‘˜æ—¶ï¼Œå¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œèƒ½ä¸èƒ½ä¿è¯ this å¯¹è±¡çš„çŠ¶æ€ä¸å˜ã€‚ç½‘ä¸Šä½ åº”è¯¥å¾ˆå®¹æ˜“æœåˆ°å…³äºå¼‚å¸¸å®‰å…¨æ€§çš„èµ„æ–™ã€‚\n\nä½¿ç”¨ == è¿™ç§åˆ¤æ–­æ–¹æ³•çš„ä»£ç ï¼Œå¤§æ¦‚ç‡ä¼šï¼Œå¦‚æœå¤åˆ¶ä¸€åŠæ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œthis å¯¹è±¡å°†å¤„äºè‹è‡äººè¿™æ ·æ··åˆæ€ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œå¯¹è±¡èµ‹å€¼çš„ç»“æœè¦ä¹ˆå®Œå…¨æˆåŠŸï¼Œè¦ä¹ˆä¿æŒåŸæ ·ä¸å˜ï¼Œä¸åº”è¯¥å¤„äºä¸­é—´æ€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1597661522,"ip_address":"","comment_id":242281,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"â€œå¦‚æœä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äº if (this != &amp;rhs) çš„åˆ¤æ–­çš„è¯ï¼Œé‚£ç§ç”¨æ³•æ›´å•°å—¦ï¼Œè€Œä¸”å¼‚å¸¸å®‰å…¨æ€§ä¸å¤Ÿå¥½â€”â€”å¦‚æœåœ¨èµ‹å€¼è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡çš„å†…å®¹å¯èƒ½å·²ç»è¢«éƒ¨åˆ†ç ´åäº†ï¼Œå¯¹è±¡ä¸å†å¤„äºä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€ã€‚â€œâ€\n\nè¯·é—®ï¼Œè¿™ä¸ªåœ°æ–¹æ€ä¹ˆç†è§£å‘¢ï¼Ÿè¿™ä¸ªåªæ˜¯åšäº†åˆ¤æ–­ï¼Œå’Œèµ‹å€¼è¿‡ç¨‹æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿæ¯å¤©ç†è§£æ‚¨è¯´çš„å¼‚å¸¸å®‰å…¨æ€§æ˜¯æŒ‡çš„ä»€ä¹ˆã€‚è°¢è°¢ï¼","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525480,"discussion_content":"æ²¡æœ‰å®ç° operator=ï¼Œé‚£èµ‹å€¼å°±æ˜¯æŒ‰æˆå‘˜å¤åˆ¶ï¼ŒæŠŠä¸¤ä¸ªæŒ‡é’ˆå¤åˆ¶è¿‡å»ï¼Œå¼•ç”¨è®¡æ•°æ²¡æœ‰å¢åŠ â€¦â€¦å½“ç„¶æ˜¯é”™è¯¯çš„ç»“æœäº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629809793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169214,"user_name":"Geek_9e42eb","can_delete":false,"product_type":"c1","uid":1593979,"ip_address":"","ucode":"289E65C28F6C2A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTItEbXDEnXQ7QjqQ8mfa67aylfHvT3FvUXaUPlZ9QjMar417oBU8GYPvibWDmxDnMsEqibtia7DHuFGw/132","comment_is_top":false,"comment_ctime":1578294360,"is_pvip":false,"replies":[{"id":65664,"content":"ä¼ ç»Ÿæ•™èµ‹å€¼çš„éƒ½ä¼šæœ‰è¿™ä¸ªæ¯”è¾ƒã€‚è¿™æ ·å†™ä¸€èˆ¬ä¸èƒ½ä¿è¯å¼‚å¸¸å®‰å…¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578308694,"ip_address":"","comment_id":169214,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è¿™æ®µè¯æœ‰ç‚¹æ²¡çœ‹æ‡‚ï¼š\nå¦‚æœä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äº if (this != &amp;rhs) çš„åˆ¤æ–­çš„è¯ï¼Œé‚£ç§ç”¨æ³•æ›´å•°å—¦ï¼Œè€Œä¸”å¼‚å¸¸å®‰å…¨æ€§ä¸å¤Ÿå¥½â€”â€”å¦‚æœåœ¨èµ‹å€¼è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡çš„å†…å®¹å¯èƒ½å·²ç»è¢«éƒ¨åˆ†ç ´åäº†ï¼Œå¯¹è±¡ä¸å†å¤„äºä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€ã€‚\n\nè¯·é—®è€å¸ˆï¼Œâ€œä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äº if (this != &amp;rhs) çš„åˆ¤æ–­çš„è¯â€è¿™ä¸ªè¡¨è¿°æ²¡æ€ä¹ˆçœ‹æ‡‚ï¼Œæ‚¨æ˜¯æŒ‡ä»€ä¹ˆåœ°æ–¹æœ‰è¿™ä¸ªåˆ¤æ–­ï¼Ÿä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªåˆ¤æ–­æ›´å•°å—¦ï¼Œå®‰å…¨æ€§ä¸å¥½ï¼Ÿ\n","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503969,"discussion_content":"å¼‚å¸¸å®‰å…¨æ€§ï¼Œè¿™å„¿æ˜¯æŒ‡å½“å¤åˆ¶æŸä¸ªå¯¹è±¡çš„æ•°æ®æˆå‘˜æ—¶ï¼Œå¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œèƒ½ä¸èƒ½ä¿è¯ this å¯¹è±¡çš„çŠ¶æ€ä¸å˜ã€‚ç½‘ä¸Šä½ åº”è¯¥å¾ˆå®¹æ˜“æœåˆ°å…³äºå¼‚å¸¸å®‰å…¨æ€§çš„èµ„æ–™ã€‚\n\nä½¿ç”¨ == è¿™ç§åˆ¤æ–­æ–¹æ³•çš„ä»£ç ï¼Œå¤§æ¦‚ç‡ä¼šï¼Œå¦‚æœå¤åˆ¶ä¸€åŠæ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œthis å¯¹è±¡å°†å¤„äºè‹è‡äººè¿™æ ·æ··åˆæ€ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œå¯¹è±¡èµ‹å€¼çš„ç»“æœè¦ä¹ˆå®Œå…¨æˆåŠŸï¼Œè¦ä¹ˆä¿æŒåŸæ ·ä¸å˜ï¼Œä¸åº”è¯¥å¤„äºä¸­é—´æ€ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597661522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162050,"user_name":"è´µå­","can_delete":false,"product_type":"c1","uid":1690431,"ip_address":"","ucode":"A94801C05CB07E","user_header":"https://static001.geekbang.org/account/avatar/00/19/cb/3f/3d044d18.jpg","comment_is_top":false,"comment_ctime":1576456656,"is_pvip":false,"replies":[{"id":61672,"content":"æ¯ä¸ªå¯¹è±¡æœ‰ç‹¬ç«‹çš„è®¡æ•°ï¼Œä¸å¯èƒ½æ˜¯é™æ€æ•°æ®æˆå‘˜ã€‚ä¸åŒæŒ‡é’ˆå¯èƒ½å…±äº«å¼•ç”¨è®¡æ•°ï¼Œå› è€Œå¼•ç”¨è®¡æ•°ä¹Ÿå¿…é¡»ç‹¬ç«‹å­˜å‚¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576459197,"ip_address":"","comment_id":162050,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"å¦‚æœshared_countç±»ä½œä¸ºé™æ€æˆå‘˜å˜é‡ï¼Œæ²¡æœ‰äº†æŒ‡é’ˆçš„æ“ä½œï¼Œä»£ç ä¼šä¸ä¼šæ›´ç®€æ´äº›ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480459,"discussion_content":"ä¼ ç»Ÿæ•™èµ‹å€¼çš„éƒ½ä¼šæœ‰è¿™ä¸ªæ¯”è¾ƒã€‚è¿™æ ·å†™ä¸€èˆ¬ä¸èƒ½ä¿è¯å¼‚å¸¸å®‰å…¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578308694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3948439,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","nickname":"Mattrach","note":"","ucode":"D530826D02FA1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":649902,"discussion_content":"ä¹‹å‰çœ‹ä¾¯æ·çš„è¯¾ç¨‹ä¸­æ˜¯è¿™æ ·å†™çš„ï¼Œç¡®å®æ²¡æåˆ°å¼‚å¸¸å®‰å…¨çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724125404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":480459,"ip_address":"ç¦å»º","group_id":0},"score":649902,"extra":""}]}]},{"had_liked":false,"id":157260,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1575099868,"is_pvip":false,"replies":[{"id":60329,"content":"å¯ä»¥ï¼Œæ­¤å¤„æ²¡åŒºåˆ«ã€‚æˆ‘æ˜¯ä» smart_ptr(rhs).swap(*this) æ”¹è¿‡æ¥çš„ï¼Œå½¢å¼å°±æ²¡æœ‰åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575120342,"ip_address":"","comment_id":157260,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œoperator=é‡è½½é‡Œé¢çš„rhs.swap(*this)å¯ä»¥ç›´æ¥å†™swap(rhs)å§","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477945,"discussion_content":"æ¯ä¸ªå¯¹è±¡æœ‰ç‹¬ç«‹çš„è®¡æ•°ï¼Œä¸å¯èƒ½æ˜¯é™æ€æ•°æ®æˆå‘˜ã€‚ä¸åŒæŒ‡é’ˆå¯èƒ½å…±äº«å¼•ç”¨è®¡æ•°ï¼Œå› è€Œå¼•ç”¨è®¡æ•°ä¹Ÿå¿…é¡»ç‹¬ç«‹å­˜å‚¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576459197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1690431,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cb/3f/3d044d18.jpg","nickname":"è´µå­","note":"","ucode":"A94801C05CB07E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":84161,"discussion_content":"è°¢è°¢è€å¸ˆæŒ‡å¯¼ï¼Œæ˜¯æˆ‘è€ƒè™‘ä¸å‘¨ã€‚æ¯ä¸ªèµ„æºéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ç‹¬ç«‹è®¡æ•°å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576492607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156434,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1574870889,"is_pvip":false,"replies":[{"id":60073,"content":"å“ˆå“ˆï¼Œå¯¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574899352,"ip_address":"","comment_id":156434,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³æ˜ç™½äº†ï¼Œåˆšæ‰çŒ›ä¸€ä¸‹æ‡µäº†\n\nsmart_ptr ptr1{create_shape(shape_type::circle)};\nsmart_ptr ptr3;\n&#47;*\nsmart_ptr&amp; operator=(smart_ptr rhs) { \n    rhs.swap(*this); \n    return *this; \n}\n*&#47;\n&#47;&#47; smart_ptr rhs{ptr1} å‘ç”Ÿæ‹·è´æ„é€ ï¼Œæ‰€ä»¥ç¼–è¯‘å‡ºé”™\nptr3 = ptr1;   &#47;&#47; ç¼–è¯‘å‡ºé”™\n\n&#47;&#47; smart_ptr rhs{std::move(ptr1)} ç§»åŠ¨æ„é€ ï¼Œæ‰€ä»¥OK\nptr3 = std::move(ptr1); &#47;&#47; OKï¼Œå¯ä»¥","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476376,"discussion_content":"å¯ä»¥ï¼Œæ­¤å¤„æ²¡åŒºåˆ«ã€‚æˆ‘æ˜¯ä» smart_ptr(rhs).swap(*this) æ”¹è¿‡æ¥çš„ï¼Œå½¢å¼å°±æ²¡æœ‰åŠ¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575120342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384146,"user_name":"Geek_a2e565","can_delete":false,"product_type":"c1","uid":3739479,"ip_address":"è¾½å®","ucode":"5211118EEE7039","user_header":"","comment_is_top":false,"comment_ctime":1700403794,"is_pvip":false,"replies":[{"id":140141,"content":"1. åœ¨ä¸€ä¸ªç±»æ¨¡æ¿çš„å®šä¹‰å†…éƒ¨ï¼Œä½¿ç”¨ç±»åç§°å°±æ˜¯ä»£è¡¨å½“å‰çš„è‡ªå·±ã€‚è¿™åœ¨è¯­æ³•ä¸Šæ›´åŠ ç®€æ´ã€‚\n\n2. å½“smart_ptr&lt;circle&gt; èµ‹å€¼ç»™smart_ptr&lt;shape&gt;çš„æ—¶å€™ï¼Œsmart_ptr&lt;shape&gt; çš„èµ‹å€¼è¿ç®—ç¬¦éœ€è¦ä¸€ä¸ª smart_ptr&lt;shape&gt;ï¼Œç¼–è¯‘å™¨ä¼šçœ‹åˆ°æœ‰ template &lt;typename U&gt; smart_ptr(const smart_ptr&lt;U&gt;&amp; other) å¯ä»¥ç”¨ï¼Œå› æ­¤å°±å¯ä»¥å…ˆæ„é€ å‡º smart_ptr&lt;shape&gt;ï¼Œç„¶åç”¨å®ƒå»è°ƒç”¨èµ‹å€¼è¿ç®—ç¬¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1700476477,"ip_address":"ä¸Šæµ·","comment_id":384146,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆ æ‚¨å¥½ï¼Œçœ‹å®Œæ‚¨çš„ä¸“æ æ”¶ç›ŠåŒªæµ…ï¼Œè¿™é‡Œæœ‰å‡ å¤„ç–‘é—®å¸Œæœ›è€å¸ˆèƒ½æŒ‡æ•™ä¸€ä¸‹ï¼š\n1ã€æ¨¡æ¿ç±»template&lt;typename T&gt; smart_pträ¸­çš„æ‹·è´æ„é€ ä»¥åŠèµ‹å€¼å‡½æ•°çš„å£°æ˜æ˜¯smart_ptr(const smart_ptr&amp; other) å’Œsmart_ptr&amp; operator=(smart_ptr rhs) noexcept, è¿™é‡Œå‚æ•°åˆ—è¡¨ä¸­çš„smart_ptræ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºå°±æ˜¯smart_ptr&lt;T&gt;ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œä¸ºä»€ä¹ˆä¸å†™æˆsmart_ptr&lt;T&gt;å‘¢ï¼Ÿ\n2ã€èµ‹å€¼å‡½æ•°smart_ptr&amp; operator=(smart_ptr rhs) noexcept,åœ¨æ„é€ å½¢å‚çš„æ—¶å€™ä¼šè°ƒç”¨æ‹·è´æ„é€ ï¼ˆä¸ç”¨std::moveï¼‰ï¼Œé‚£ä¹ˆå½“smart_ptr&lt;circle&gt; èµ‹å€¼ç»™smart_ptr&lt;shape&gt;çš„æ—¶å€™ï¼Œè°ƒç”¨çš„åº”è¯¥æ˜¯æ¨¡æ¿æ‹·è´æ„é€ ï¼Œæ„é€ å‡ºæ¥çš„ä¸´æ—¶å¯¹è±¡ä¹Ÿåº”è¯¥æ˜¯smart_ptr&lt;circle&gt; ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆèµ‹å€¼å‡½æ•°ä¸ç”¨å®šä¹‰æˆæ¨¡æ¿å‡½æ•°å‘¢ï¼Ÿ\n\nååˆ†æ„Ÿè°¢è€å¸ˆ","like_count":1},{"had_liked":false,"id":341416,"user_name":"ä½™æ·®","can_delete":false,"product_type":"c1","uid":2923989,"ip_address":"","ucode":"2B7DA1475DC0BF","user_header":"https://static001.geekbang.org/account/avatar/00/2c/9d/d5/4dcf8986.jpg","comment_is_top":false,"comment_ctime":1649591367,"is_pvip":false,"replies":[{"id":124820,"content":"ç®€å•ç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ªæ¥å—å³å€¼ï¼Œä¸€ä¸ªæ¥å—å·¦å€¼ã€‚ä¸‹ä¸€è®²å°±ä¼šå…·ä½“æè¿°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1649751504,"ip_address":"","comment_id":341416,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)è·Ÿsmart_ptr(smart_ptr&lt;U&gt;&amp; other)è¿™ä¸¤ä¸ªå¼•ç”¨ç¬¦å·ä¸åŒä¼ é€’å‚æ•°æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632107,"discussion_content":"1. åœ¨ä¸€ä¸ªç±»æ¨¡æ¿çš„å®šä¹‰å†…éƒ¨ï¼Œä½¿ç”¨ç±»åç§°å°±æ˜¯ä»£è¡¨å½“å‰çš„è‡ªå·±ã€‚è¿™åœ¨è¯­æ³•ä¸Šæ›´åŠ ç®€æ´ã€‚\n\n2. å½“smart_ptr&lt;circle&gt; èµ‹å€¼ç»™smart_ptr&lt;shape&gt;çš„æ—¶å€™ï¼Œsmart_ptr&lt;shape&gt; çš„èµ‹å€¼è¿ç®—ç¬¦éœ€è¦ä¸€ä¸ª smart_ptr&lt;shape&gt;ï¼Œç¼–è¯‘å™¨ä¼šçœ‹åˆ°æœ‰ template &lt;typename U&gt; smart_ptr(const smart_ptr&lt;U&gt;&amp; other) å¯ä»¥ç”¨ï¼Œå› æ­¤å°±å¯ä»¥å…ˆæ„é€ å‡º smart_ptr&lt;shape&gt;ï¼Œç„¶åç”¨å®ƒå»è°ƒç”¨èµ‹å€¼è¿ç®—ç¬¦ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1700476477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339670,"user_name":"zg","can_delete":false,"product_type":"c1","uid":1055025,"ip_address":"","ucode":"809277A5F204BD","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/31/b438b9cf.jpg","comment_is_top":false,"comment_ctime":1648285121,"is_pvip":false,"replies":[{"id":124388,"content":"æ™ºèƒ½æŒ‡é’ˆçš„æ ¼å¼ä¸å¯¹ï¼Œdel ä¹Ÿæ²¡æœ‰æ”¹ã€‚åº”è¯¥æ˜¯ï¼š\n\nvoid del(void (*)(int)) {}\nvoid fun(int x) {}\nint main()\n{\n    std::shared_ptr&lt;void(int)&gt; ee(fun, del);\n    (*ee)(42);\n}","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1648638780,"ip_address":"","comment_id":339670,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œhttps:&#47;&#47;en.cppreference.com&#47;w&#47;cpp&#47;memory&#47;shared_ptr ä¸­  shared_ptrçš„æ¨¡æ¿å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\n\nvoid del(void(*)()) {}\nvoid fun() {}\nint main(){\n  std::shared_ptr&lt;void()&gt; ee(fun, del);\n  (*ee)();\n}\n\nå¦‚æœæˆ‘è¦æŠŠæ— å‚å‡½æ•°funï¼ˆï¼‰ï¼Œæ”¹ä¸ºvoid funï¼ˆint xï¼‰ï¼Œä»£ç æ”¹ä¸ºï¼š\n  shared_ptr&lt;void()(int)&gt; ee(fun,del);\n(*ee)(5);\nç¼–è¯‘é€šä¸è¿‡ï¼ŒæŠ¥é”™ä¿¡æ¯çœ‹ä¸å¤ªæ˜ç™½ï¼Œéº»çƒ¦è®²ä¸€ä¸‹åº”è¯¥æ€ä¹ˆæ”¹ï¼Ÿ\n","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559179,"discussion_content":"æ™ºèƒ½æŒ‡é’ˆçš„æ ¼å¼ä¸å¯¹ï¼Œdel ä¹Ÿæ²¡æœ‰æ”¹ã€‚åº”è¯¥æ˜¯ï¼š\n\nvoid del(void (*)(int)) {}\nvoid fun(int x) {}\nint main()\n{\n    std::shared_ptr&lt;void(int)&gt; ee(fun, del);\n    (*ee)(42);\n}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1648638781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314855,"user_name":"wine99","can_delete":false,"product_type":"c1","uid":1682531,"ip_address":"","ucode":"F22F3E23E6F851","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/h6unp47tSLwwUZgnd3tuSSSEEOvXrC8aTI38ESYzsVZU8zZLMxvLDv8Zw2fmhr9M8CM46HCvQvicoutzwTjwNaA/132","comment_is_top":false,"comment_ctime":1633506520,"is_pvip":false,"replies":[{"id":114151,"content":"å—¯å—¯ï¼Œrhsä¸æ˜¯æˆ‘å‘æ˜çš„ï¼Œåº”è¯¥æ˜¯æƒ¯ç”¨å†™æ³•äº†å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1633787274,"ip_address":"","comment_id":314855,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"å¤ªå¦™äº†ï¼è€å¸ˆçš„æ–‡ç¨¿è®¾è®¡å¾—çœŸå¥½ï¼Œå¾ªåºæ¸è¿›ã€‚è¯·é—®è€å¸ˆä»£ç é‡Œå¸¸ç”¨çš„å‚æ•°århsï¼Œæ˜¯ä»€ä¹ˆç¼©å†™ï¼Ÿright hand sideï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527813,"discussion_content":"å—¯å—¯ï¼Œrhsä¸æ˜¯æˆ‘å‘æ˜çš„ï¼Œåº”è¯¥æ˜¯æƒ¯ç”¨å†™æ³•äº†å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633787274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313257,"user_name":"weing","can_delete":false,"product_type":"c1","uid":1984655,"ip_address":"","ucode":"95701BDA31F6F6","user_header":"","comment_is_top":false,"comment_ctime":1632355232,"is_pvip":false,"replies":[{"id":113757,"content":"å¯¹ã€‚è¿™æ˜¯ä¸€ç§æƒ¯ç”¨æ³•ï¼Œé€‚åˆå¤§éƒ¨åˆ†åœºæ™¯ã€‚\n\nå¯¹äºæ€§èƒ½æœ‰æè‡´è¿½æ±‚çš„ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘æ ¹æ®ä½¿ç”¨åœºæ™¯éœ€ä¸éœ€è¦æ›´å¿«çš„æ‰§è¡Œè·¯å¾„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1632810056,"ip_address":"","comment_id":313257,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527813,"discussion_content":"å—¯å—¯ï¼Œrhsä¸æ˜¯æˆ‘å‘æ˜çš„ï¼Œåº”è¯¥æ˜¯æƒ¯ç”¨å†™æ³•äº†å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633787274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296632,"user_name":"æ€ªå…½","can_delete":false,"product_type":"c1","uid":1324007,"ip_address":"","ucode":"3342C55CB83B08","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/e7/145be2f9.jpg","comment_is_top":false,"comment_ctime":1623074852,"is_pvip":false,"replies":[{"id":107758,"content":"å¦‚æœä½ å®šä¹‰äº†ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°ã€‚æˆ‘ä»¬æ­¤å¤„ç¡®å®ä¸å¸Œæœ›è‡ªåŠ¨çš„ï¼ˆé”™è¯¯ï¼‰æ‹·è´æ„é€ è¡Œä¸ºã€‚è§£å†³æ–¹æ³•æ˜¯è¦ä¹ˆå†™ä¸€ä¸ªè·Ÿæ¨¡æ¿å½¢å¼ä¸€æ ·çš„éæ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆä»£ç é‡å¤ï¼‰ï¼Œè¦ä¹ˆæ˜¾å¼æŠŠæ‹·è´æ„é€ å‡½æ•°deleteæ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1623115371,"ip_address":"","comment_id":296632,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®ä¸€ä¸‹åŸæ–‡ä¸­ï¼šâ€œå¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†â€ã€‚æˆ‘ç»“åˆä¸Šä¸‹æ–‡è¯­å¢ƒå§‹ç»ˆä¸æ˜ç™½ä»€ä¹ˆæ„æ€ï¼Œæ¶ˆé™¤ä»€ä¹ˆä»£ç é‡å¤?è¦åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = deleteï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527296,"discussion_content":"å¯¹ã€‚è¿™æ˜¯ä¸€ç§æƒ¯ç”¨æ³•ï¼Œé€‚åˆå¤§éƒ¨åˆ†åœºæ™¯ã€‚\n\nå¯¹äºæ€§èƒ½æœ‰æè‡´è¿½æ±‚çš„ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘æ ¹æ®ä½¿ç”¨åœºæ™¯éœ€ä¸éœ€è¦æ›´å¿«çš„æ‰§è¡Œè·¯å¾„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632810056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290694,"user_name":"Jm can","can_delete":false,"product_type":"c1","uid":2603149,"ip_address":"","ucode":"90BBF81BFCFDD1","user_header":"https://static001.geekbang.org/account/avatar/00/27/b8/8d/34140285.jpg","comment_is_top":false,"comment_ctime":1619689841,"is_pvip":false,"replies":[{"id":105389,"content":"æ³¨æ„åˆ°æˆ‘å·å·å¡è¿›çš„C++11è¯­æ³•äº†ï¼ŸğŸ¤“\n\nè¯¦è§ç¬¬8è®²ï¼Œé‡Œé¢æœ‰å…·ä½“è¯´æ˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1619792180,"ip_address":"","comment_id":290694,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆæƒ³é—®ä¸‹â€œæ‹·è´æ„é€ èµ‹å€¼â€æ ‡é¢˜ä¸‹ç¬¬ä¸€ä¸ªä»£ç å—é‡Œçš„ä¸¤è¡Œæ„é€ æ˜¯ä¸æ˜¯æœ‰typoï¼ŒæŠŠæ‹¬å·æ‰“æˆäº†èŠ±æ‹¬å·ã€‚ï¼ˆè¿˜æ˜¯è¯´æœ‰é»˜è®¤å¯¹äºinitializer_listçš„æ”¯æŒï¼Ÿï¼‰","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521530,"discussion_content":"å¦‚æœä½ å®šä¹‰äº†ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°ã€‚æˆ‘ä»¬æ­¤å¤„ç¡®å®ä¸å¸Œæœ›è‡ªåŠ¨çš„ï¼ˆé”™è¯¯ï¼‰æ‹·è´æ„é€ è¡Œä¸ºã€‚è§£å†³æ–¹æ³•æ˜¯è¦ä¹ˆå†™ä¸€ä¸ªè·Ÿæ¨¡æ¿å½¢å¼ä¸€æ ·çš„éæ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆä»£ç é‡å¤ï¼‰ï¼Œè¦ä¹ˆæ˜¾å¼æŠŠæ‹·è´æ„é€ å‡½æ•°deleteæ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623115371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278991,"user_name":"geek","can_delete":false,"product_type":"c1","uid":2401422,"ip_address":"","ucode":"FF0845140D72A9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","comment_is_top":false,"comment_ctime":1613528233,"is_pvip":false,"replies":[{"id":101424,"content":"è¿™ä¸ªå°±æ›´å¤æ‚äº†ã€‚è¿™ä¸ªä¸“æ æ¥æ²¡æœ‰è®²ã€‚ç›®å‰çš„çŸ¥è¯†æŒæ¡åï¼Œå¯ä»¥å»çœ‹ weak_ptr çš„å®ç°ã€‚ç›®å‰ç»™å‡ºçš„è¿™ä¸ªå®ç°ï¼ˆåŠæ ‡å‡†çš„ shared_ptrï¼‰éƒ½ä¸å¯ä»¥å½¢æˆç¯ï¼Œå¦åˆ™å°±é‡Šæ”¾ä¸äº†äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1613630063,"ip_address":"","comment_id":278991,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"åŸºäºç›®å‰ç»™å‡ºçš„shared_ptrçš„å®ç°ï¼Œèƒ½ä¸èƒ½å†è¯´è¯´å¦‚ä½•è§£å†³ å¤šä¸ªshared_ptrå½¢æˆç¯çš„æƒ…å†µå•Šï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515588,"discussion_content":"è¿™ä¸ªå°±æ›´å¤æ‚äº†ã€‚è¿™ä¸ªä¸“æ æ¥æ²¡æœ‰è®²ã€‚ç›®å‰çš„çŸ¥è¯†æŒæ¡åï¼Œå¯ä»¥å»çœ‹ weak_ptr çš„å®ç°ã€‚ç›®å‰ç»™å‡ºçš„è¿™ä¸ªå®ç°ï¼ˆåŠæ ‡å‡†çš„ shared_ptrï¼‰éƒ½ä¸å¯ä»¥å½¢æˆç¯ï¼Œå¦åˆ™å°±é‡Šæ”¾ä¸äº†äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613630063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2401422,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","nickname":"geek","note":"","ucode":"FF0845140D72A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349990,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613655051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253401,"user_name":"Lloyd Liu","can_delete":false,"product_type":"c1","uid":1619354,"ip_address":"","ucode":"82DF4CE95ECB74","user_header":"https://static001.geekbang.org/account/avatar/00/18/b5/9a/0161f563.jpg","comment_is_top":false,"comment_ctime":1602727140,"is_pvip":false,"replies":[{"id":92590,"content":"è¿™å¥è¯è¿˜ä¸å¤Ÿæ¸…æ¥šå—ï¼Ÿ\n\nâ€œç°åœ¨ smart_ptr&lt;circle&gt; å¯ä»¥ç§»åŠ¨ç»™ smart_ptr&lt;shape&gt;ï¼Œä½†ä¸èƒ½ç§»åŠ¨ç»™ smart_ptr&lt;triangle&gt;ã€‚â€\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1602779857,"ip_address":"","comment_id":253401,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"â€œå“¦ï¼Œæˆ‘æ’’äº†ä¸€ä¸ªå°è°ã€‚ä¸çŸ¥é“ä½ æ³¨æ„åˆ°æ²¡æœ‰ï¼Œä¸€ä¸ª circle* æ˜¯å¯ä»¥éšå¼è½¬æ¢æˆ shape* çš„ï¼Œä½†ä¸Šé¢çš„ smart_ptr&lt;circle&gt; å´æ— æ³•è‡ªåŠ¨è½¬æ¢æˆ smart_ptr&lt;shape&gt;ã€‚è¿™ä¸ªè¡Œä¸ºæ˜¾ç„¶è¿˜æ˜¯ä¸å¤Ÿâ€œè‡ªç„¶â€ã€‚\n\nä¸è¿‡ï¼Œåªéœ€è¦é¢å¤–åŠ ä¸€ç‚¹æ¨¡æ¿ä»£ç ï¼Œå°±èƒ½å®ç°è¿™ä¸€è¡Œä¸ºã€‚åœ¨æˆ‘ä»¬ç›®å‰ç»™å‡ºçš„å®ç°é‡Œï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªæ„é€ å‡½æ•°å³å¯â€”â€”è¿™ä¹Ÿç®—æ˜¯æˆ‘ä»¬è®©èµ‹å€¼å‡½æ•°åˆ©ç”¨æ„é€ å‡½æ•°çš„å¥½å¤„äº†ã€‚â€\n\nä¸‹é¢é™¤äº†ä»£ç ä¹‹å¤–ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªä½¿ç”¨çš„ä¾‹å­","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507064,"discussion_content":"è¿™å¥è¯è¿˜ä¸å¤Ÿæ¸…æ¥šå—ï¼Ÿ\n\nâ€œç°åœ¨ smart_ptr&amp;lt;circle&amp;gt; å¯ä»¥ç§»åŠ¨ç»™ smart_ptr&amp;lt;shape&amp;gt;ï¼Œä½†ä¸èƒ½ç§»åŠ¨ç»™ smart_ptr&amp;lt;triangle&amp;gt;ã€‚â€\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602779857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619354,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b5/9a/0161f563.jpg","nickname":"Lloyd Liu","note":"","ucode":"82DF4CE95ECB74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312772,"discussion_content":"åœ¨æ™ºèƒ½æŒ‡é’ˆä¸­çš„æ¨¡æ¿æ„é€ å‡½æ•°ï¼Œå¼€å§‹æœ‰ç‚¹æ²¡å¤ªæ‡‚æ€ä¹ˆä½¿ç”¨\nåæ¥æŸ¥äº†ä¸‹æ¨¡æ¿æ„é€ å‡½æ•°ï¼Œæ˜¯å¦‚ä¸‹çš„ä½¿ç”¨æ–¹æ³•å§\n\nsmart_ptr<circle> ptr1;\nsmart_ptr<shape> ptr2{std::move (ptr1)};","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602812610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1619354,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b5/9a/0161f563.jpg","nickname":"Lloyd Liu","note":"","ucode":"82DF4CE95ECB74","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312948,"discussion_content":"å—¯ï¼Œè¿™æ˜¯ä¸€ç§å…¸å‹ç”¨æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602865318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312772,"ip_address":"","group_id":0},"score":312948,"extra":""}]}]},{"had_liked":false,"id":246376,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1599301703,"is_pvip":false,"replies":[{"id":90689,"content":"æ™ºèƒ½æŒ‡é’ˆæœ‰åˆ° bool çš„è‡ªåŠ¨è½¬æ¢ï¼Œä½ çœ‹åˆ°çš„ 1 å°±æ˜¯ trueï¼Œä»£è¡¨æŒ‡é’ˆä¸ä¸ºç©ºã€‚\n\nstd::shared_ptr å¯ä»¥ç”¨ &lt;&lt; è¾“å‡ºçš„åŸå› æ˜¯æ ‡å‡†åº“æä¾›äº† operator&lt;&lt; çš„é‡è½½ï¼ˆæˆ‘æ²¡æœ‰ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1599487326,"ip_address":"","comment_id":246376,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"å´è€å¸ˆä½ å¥½ï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªcoutå‡ºæ¥çš„ç»“æœæ˜¯1å‘€ï¼Ÿä¸åº”è¯¥æ˜¯heapä¸Šçš„ä¸€ä¸ªåœ°å€å—ï¼š\n    smart_ptr&lt;int&gt; smt_tmp(new int);\n    std::cout &lt;&lt; &quot;smt_tmp is: &quot; &lt;&lt; smt_tmp &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;&amp;smt_tmp is: &quot; &lt;&lt; &amp;smt_tmp &lt;&lt; std::endl;\n\n    std::shared_ptr&lt;int&gt; sha_tmp(new int);\n    std::cout &lt;&lt; &quot;sha_tmp is: &quot; &lt;&lt; sha_tmp &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;&amp;sha_tmp is: &quot; &lt;&lt; &amp;sha_tmp &lt;&lt; std::endl;\nstdå†…éƒ¨çš„æ™ºèƒ½æŒ‡é’ˆè¾“å‡ºæ˜¯heapä¸Šçš„åœ°å€ã€‚","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507064,"discussion_content":"è¿™å¥è¯è¿˜ä¸å¤Ÿæ¸…æ¥šå—ï¼Ÿ\n\nâ€œç°åœ¨ smart_ptr&amp;lt;circle&amp;gt; å¯ä»¥ç§»åŠ¨ç»™ smart_ptr&amp;lt;shape&amp;gt;ï¼Œä½†ä¸èƒ½ç§»åŠ¨ç»™ smart_ptr&amp;lt;triangle&amp;gt;ã€‚â€\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602779857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619354,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b5/9a/0161f563.jpg","nickname":"Lloyd Liu","note":"","ucode":"82DF4CE95ECB74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312772,"discussion_content":"åœ¨æ™ºèƒ½æŒ‡é’ˆä¸­çš„æ¨¡æ¿æ„é€ å‡½æ•°ï¼Œå¼€å§‹æœ‰ç‚¹æ²¡å¤ªæ‡‚æ€ä¹ˆä½¿ç”¨\nåæ¥æŸ¥äº†ä¸‹æ¨¡æ¿æ„é€ å‡½æ•°ï¼Œæ˜¯å¦‚ä¸‹çš„ä½¿ç”¨æ–¹æ³•å§\n\nsmart_ptr<circle> ptr1;\nsmart_ptr<shape> ptr2{std::move (ptr1)};","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602812610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1619354,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b5/9a/0161f563.jpg","nickname":"Lloyd Liu","note":"","ucode":"82DF4CE95ECB74","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312948,"discussion_content":"å—¯ï¼Œè¿™æ˜¯ä¸€ç§å…¸å‹ç”¨æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602865318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312772,"ip_address":"","group_id":0},"score":312948,"extra":""}]}]},{"had_liked":false,"id":384146,"user_name":"Geek_a2e565","can_delete":false,"product_type":"c1","uid":3739479,"ip_address":"è¾½å®","ucode":"5211118EEE7039","user_header":"","comment_is_top":false,"comment_ctime":1700403794,"is_pvip":false,"replies":[{"id":140141,"content":"1. åœ¨ä¸€ä¸ªç±»æ¨¡æ¿çš„å®šä¹‰å†…éƒ¨ï¼Œä½¿ç”¨ç±»åç§°å°±æ˜¯ä»£è¡¨å½“å‰çš„è‡ªå·±ã€‚è¿™åœ¨è¯­æ³•ä¸Šæ›´åŠ ç®€æ´ã€‚\n\n2. å½“smart_ptr&lt;circle&gt; èµ‹å€¼ç»™smart_ptr&lt;shape&gt;çš„æ—¶å€™ï¼Œsmart_ptr&lt;shape&gt; çš„èµ‹å€¼è¿ç®—ç¬¦éœ€è¦ä¸€ä¸ª smart_ptr&lt;shape&gt;ï¼Œç¼–è¯‘å™¨ä¼šçœ‹åˆ°æœ‰ template &lt;typename U&gt; smart_ptr(const smart_ptr&lt;U&gt;&amp; other) å¯ä»¥ç”¨ï¼Œå› æ­¤å°±å¯ä»¥å…ˆæ„é€ å‡º smart_ptr&lt;shape&gt;ï¼Œç„¶åç”¨å®ƒå»è°ƒç”¨èµ‹å€¼è¿ç®—ç¬¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1700476477,"ip_address":"ä¸Šæµ·","comment_id":384146,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆ æ‚¨å¥½ï¼Œçœ‹å®Œæ‚¨çš„ä¸“æ æ”¶ç›ŠåŒªæµ…ï¼Œè¿™é‡Œæœ‰å‡ å¤„ç–‘é—®å¸Œæœ›è€å¸ˆèƒ½æŒ‡æ•™ä¸€ä¸‹ï¼š\n1ã€æ¨¡æ¿ç±»template&lt;typename T&gt; smart_pträ¸­çš„æ‹·è´æ„é€ ä»¥åŠèµ‹å€¼å‡½æ•°çš„å£°æ˜æ˜¯smart_ptr(const smart_ptr&amp; other) å’Œsmart_ptr&amp; operator=(smart_ptr rhs) noexcept, è¿™é‡Œå‚æ•°åˆ—è¡¨ä¸­çš„smart_ptræ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºå°±æ˜¯smart_ptr&lt;T&gt;ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œä¸ºä»€ä¹ˆä¸å†™æˆsmart_ptr&lt;T&gt;å‘¢ï¼Ÿ\n2ã€èµ‹å€¼å‡½æ•°smart_ptr&amp; operator=(smart_ptr rhs) noexcept,åœ¨æ„é€ å½¢å‚çš„æ—¶å€™ä¼šè°ƒç”¨æ‹·è´æ„é€ ï¼ˆä¸ç”¨std::moveï¼‰ï¼Œé‚£ä¹ˆå½“smart_ptr&lt;circle&gt; èµ‹å€¼ç»™smart_ptr&lt;shape&gt;çš„æ—¶å€™ï¼Œè°ƒç”¨çš„åº”è¯¥æ˜¯æ¨¡æ¿æ‹·è´æ„é€ ï¼Œæ„é€ å‡ºæ¥çš„ä¸´æ—¶å¯¹è±¡ä¹Ÿåº”è¯¥æ˜¯smart_ptr&lt;circle&gt; ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆèµ‹å€¼å‡½æ•°ä¸ç”¨å®šä¹‰æˆæ¨¡æ¿å‡½æ•°å‘¢ï¼Ÿ\n\nååˆ†æ„Ÿè°¢è€å¸ˆ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632107,"discussion_content":"1. åœ¨ä¸€ä¸ªç±»æ¨¡æ¿çš„å®šä¹‰å†…éƒ¨ï¼Œä½¿ç”¨ç±»åç§°å°±æ˜¯ä»£è¡¨å½“å‰çš„è‡ªå·±ã€‚è¿™åœ¨è¯­æ³•ä¸Šæ›´åŠ ç®€æ´ã€‚\n\n2. å½“smart_ptr&lt;circle&gt; èµ‹å€¼ç»™smart_ptr&lt;shape&gt;çš„æ—¶å€™ï¼Œsmart_ptr&lt;shape&gt; çš„èµ‹å€¼è¿ç®—ç¬¦éœ€è¦ä¸€ä¸ª smart_ptr&lt;shape&gt;ï¼Œç¼–è¯‘å™¨ä¼šçœ‹åˆ°æœ‰ template &lt;typename U&gt; smart_ptr(const smart_ptr&lt;U&gt;&amp; other) å¯ä»¥ç”¨ï¼Œå› æ­¤å°±å¯ä»¥å…ˆæ„é€ å‡º smart_ptr&lt;shape&gt;ï¼Œç„¶åç”¨å®ƒå»è°ƒç”¨èµ‹å€¼è¿ç®—ç¬¦ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1700476477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341416,"user_name":"ä½™æ·®","can_delete":false,"product_type":"c1","uid":2923989,"ip_address":"","ucode":"2B7DA1475DC0BF","user_header":"https://static001.geekbang.org/account/avatar/00/2c/9d/d5/4dcf8986.jpg","comment_is_top":false,"comment_ctime":1649591367,"is_pvip":false,"replies":[{"id":124820,"content":"ç®€å•ç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ªæ¥å—å³å€¼ï¼Œä¸€ä¸ªæ¥å—å·¦å€¼ã€‚ä¸‹ä¸€è®²å°±ä¼šå…·ä½“æè¿°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1649751504,"ip_address":"","comment_id":341416,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)è·Ÿsmart_ptr(smart_ptr&lt;U&gt;&amp; other)è¿™ä¸¤ä¸ªå¼•ç”¨ç¬¦å·ä¸åŒä¼ é€’å‚æ•°æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561944,"discussion_content":"ç®€å•ç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ªæ¥å—å³å€¼ï¼Œä¸€ä¸ªæ¥å—å·¦å€¼ã€‚ä¸‹ä¸€è®²å°±ä¼šå…·ä½“æè¿°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649751504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2923989,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/9d/d5/4dcf8986.jpg","nickname":"ä½™æ·®","note":"","ucode":"2B7DA1475DC0BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":561973,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649756243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":561944,"ip_address":"","group_id":0},"score":561973,"extra":""}]}]},{"had_liked":false,"id":339670,"user_name":"zg","can_delete":false,"product_type":"c1","uid":1055025,"ip_address":"","ucode":"809277A5F204BD","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/31/b438b9cf.jpg","comment_is_top":false,"comment_ctime":1648285121,"is_pvip":false,"replies":[{"id":124388,"content":"æ™ºèƒ½æŒ‡é’ˆçš„æ ¼å¼ä¸å¯¹ï¼Œdel ä¹Ÿæ²¡æœ‰æ”¹ã€‚åº”è¯¥æ˜¯ï¼š\n\nvoid del(void (*)(int)) {}\nvoid fun(int x) {}\nint main()\n{\n    std::shared_ptr&lt;void(int)&gt; ee(fun, del);\n    (*ee)(42);\n}","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1648638780,"ip_address":"","comment_id":339670,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œhttps:&#47;&#47;en.cppreference.com&#47;w&#47;cpp&#47;memory&#47;shared_ptr ä¸­  shared_ptrçš„æ¨¡æ¿å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\n\nvoid del(void(*)()) {}\nvoid fun() {}\nint main(){\n  std::shared_ptr&lt;void()&gt; ee(fun, del);\n  (*ee)();\n}\n\nå¦‚æœæˆ‘è¦æŠŠæ— å‚å‡½æ•°funï¼ˆï¼‰ï¼Œæ”¹ä¸ºvoid funï¼ˆint xï¼‰ï¼Œä»£ç æ”¹ä¸ºï¼š\n  shared_ptr&lt;void()(int)&gt; ee(fun,del);\n(*ee)(5);\nç¼–è¯‘é€šä¸è¿‡ï¼ŒæŠ¥é”™ä¿¡æ¯çœ‹ä¸å¤ªæ˜ç™½ï¼Œéº»çƒ¦è®²ä¸€ä¸‹åº”è¯¥æ€ä¹ˆæ”¹ï¼Ÿ\n","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561944,"discussion_content":"ç®€å•ç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ªæ¥å—å³å€¼ï¼Œä¸€ä¸ªæ¥å—å·¦å€¼ã€‚ä¸‹ä¸€è®²å°±ä¼šå…·ä½“æè¿°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649751504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2923989,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/9d/d5/4dcf8986.jpg","nickname":"ä½™æ·®","note":"","ucode":"2B7DA1475DC0BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":561973,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649756243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":561944,"ip_address":"","group_id":0},"score":561973,"extra":""}]}]},{"had_liked":false,"id":314855,"user_name":"wine99","can_delete":false,"product_type":"c1","uid":1682531,"ip_address":"","ucode":"F22F3E23E6F851","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/h6unp47tSLwwUZgnd3tuSSSEEOvXrC8aTI38ESYzsVZU8zZLMxvLDv8Zw2fmhr9M8CM46HCvQvicoutzwTjwNaA/132","comment_is_top":false,"comment_ctime":1633506520,"is_pvip":false,"replies":[{"id":114151,"content":"å—¯å—¯ï¼Œrhsä¸æ˜¯æˆ‘å‘æ˜çš„ï¼Œåº”è¯¥æ˜¯æƒ¯ç”¨å†™æ³•äº†å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1633787274,"ip_address":"","comment_id":314855,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"å¤ªå¦™äº†ï¼è€å¸ˆçš„æ–‡ç¨¿è®¾è®¡å¾—çœŸå¥½ï¼Œå¾ªåºæ¸è¿›ã€‚è¯·é—®è€å¸ˆä»£ç é‡Œå¸¸ç”¨çš„å‚æ•°århsï¼Œæ˜¯ä»€ä¹ˆç¼©å†™ï¼Ÿright hand sideï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559179,"discussion_content":"æ™ºèƒ½æŒ‡é’ˆçš„æ ¼å¼ä¸å¯¹ï¼Œdel ä¹Ÿæ²¡æœ‰æ”¹ã€‚åº”è¯¥æ˜¯ï¼š\n\nvoid del(void (*)(int)) {}\nvoid fun(int x) {}\nint main()\n{\n    std::shared_ptr&lt;void(int)&gt; ee(fun, del);\n    (*ee)(42);\n}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1648638781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313257,"user_name":"weing","can_delete":false,"product_type":"c1","uid":1984655,"ip_address":"","ucode":"95701BDA31F6F6","user_header":"","comment_is_top":false,"comment_ctime":1632355232,"is_pvip":false,"replies":[{"id":113757,"content":"å¯¹ã€‚è¿™æ˜¯ä¸€ç§æƒ¯ç”¨æ³•ï¼Œé€‚åˆå¤§éƒ¨åˆ†åœºæ™¯ã€‚\n\nå¯¹äºæ€§èƒ½æœ‰æè‡´è¿½æ±‚çš„ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘æ ¹æ®ä½¿ç”¨åœºæ™¯éœ€ä¸éœ€è¦æ›´å¿«çš„æ‰§è¡Œè·¯å¾„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1632810056,"ip_address":"","comment_id":313257,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527296,"discussion_content":"å¯¹ã€‚è¿™æ˜¯ä¸€ç§æƒ¯ç”¨æ³•ï¼Œé€‚åˆå¤§éƒ¨åˆ†åœºæ™¯ã€‚\n\nå¯¹äºæ€§èƒ½æœ‰æè‡´è¿½æ±‚çš„ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘æ ¹æ®ä½¿ç”¨åœºæ™¯éœ€ä¸éœ€è¦æ›´å¿«çš„æ‰§è¡Œè·¯å¾„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632810056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296632,"user_name":"æ€ªå…½","can_delete":false,"product_type":"c1","uid":1324007,"ip_address":"","ucode":"3342C55CB83B08","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/e7/145be2f9.jpg","comment_is_top":false,"comment_ctime":1623074852,"is_pvip":false,"replies":[{"id":107758,"content":"å¦‚æœä½ å®šä¹‰äº†ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°ã€‚æˆ‘ä»¬æ­¤å¤„ç¡®å®ä¸å¸Œæœ›è‡ªåŠ¨çš„ï¼ˆé”™è¯¯ï¼‰æ‹·è´æ„é€ è¡Œä¸ºã€‚è§£å†³æ–¹æ³•æ˜¯è¦ä¹ˆå†™ä¸€ä¸ªè·Ÿæ¨¡æ¿å½¢å¼ä¸€æ ·çš„éæ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆä»£ç é‡å¤ï¼‰ï¼Œè¦ä¹ˆæ˜¾å¼æŠŠæ‹·è´æ„é€ å‡½æ•°deleteæ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1623115371,"ip_address":"","comment_id":296632,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®ä¸€ä¸‹åŸæ–‡ä¸­ï¼šâ€œå¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†â€ã€‚æˆ‘ç»“åˆä¸Šä¸‹æ–‡è¯­å¢ƒå§‹ç»ˆä¸æ˜ç™½ä»€ä¹ˆæ„æ€ï¼Œæ¶ˆé™¤ä»€ä¹ˆä»£ç é‡å¤?è¦åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = deleteï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521530,"discussion_content":"å¦‚æœä½ å®šä¹‰äº†ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°ã€‚æˆ‘ä»¬æ­¤å¤„ç¡®å®ä¸å¸Œæœ›è‡ªåŠ¨çš„ï¼ˆé”™è¯¯ï¼‰æ‹·è´æ„é€ è¡Œä¸ºã€‚è§£å†³æ–¹æ³•æ˜¯è¦ä¹ˆå†™ä¸€ä¸ªè·Ÿæ¨¡æ¿å½¢å¼ä¸€æ ·çš„éæ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆä»£ç é‡å¤ï¼‰ï¼Œè¦ä¹ˆæ˜¾å¼æŠŠæ‹·è´æ„é€ å‡½æ•°deleteæ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623115371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290694,"user_name":"Jm can","can_delete":false,"product_type":"c1","uid":2603149,"ip_address":"","ucode":"90BBF81BFCFDD1","user_header":"https://static001.geekbang.org/account/avatar/00/27/b8/8d/34140285.jpg","comment_is_top":false,"comment_ctime":1619689841,"is_pvip":false,"replies":[{"id":105389,"content":"æ³¨æ„åˆ°æˆ‘å·å·å¡è¿›çš„C++11è¯­æ³•äº†ï¼ŸğŸ¤“\n\nè¯¦è§ç¬¬8è®²ï¼Œé‡Œé¢æœ‰å…·ä½“è¯´æ˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1619792180,"ip_address":"","comment_id":290694,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"è€å¸ˆæƒ³é—®ä¸‹â€œæ‹·è´æ„é€ èµ‹å€¼â€æ ‡é¢˜ä¸‹ç¬¬ä¸€ä¸ªä»£ç å—é‡Œçš„ä¸¤è¡Œæ„é€ æ˜¯ä¸æ˜¯æœ‰typoï¼ŒæŠŠæ‹¬å·æ‰“æˆäº†èŠ±æ‹¬å·ã€‚ï¼ˆè¿˜æ˜¯è¯´æœ‰é»˜è®¤å¯¹äºinitializer_listçš„æ”¯æŒï¼Ÿï¼‰","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519265,"discussion_content":"æ³¨æ„åˆ°æˆ‘å·å·å¡è¿›çš„C++11è¯­æ³•äº†ï¼ŸğŸ¤“\n\nè¯¦è§ç¬¬8è®²ï¼Œé‡Œé¢æœ‰å…·ä½“è¯´æ˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619792180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278991,"user_name":"geek","can_delete":false,"product_type":"c1","uid":2401422,"ip_address":"","ucode":"FF0845140D72A9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","comment_is_top":false,"comment_ctime":1613528233,"is_pvip":false,"replies":[{"id":101424,"content":"è¿™ä¸ªå°±æ›´å¤æ‚äº†ã€‚è¿™ä¸ªä¸“æ æ¥æ²¡æœ‰è®²ã€‚ç›®å‰çš„çŸ¥è¯†æŒæ¡åï¼Œå¯ä»¥å»çœ‹ weak_ptr çš„å®ç°ã€‚ç›®å‰ç»™å‡ºçš„è¿™ä¸ªå®ç°ï¼ˆåŠæ ‡å‡†çš„ shared_ptrï¼‰éƒ½ä¸å¯ä»¥å½¢æˆç¯ï¼Œå¦åˆ™å°±é‡Šæ”¾ä¸äº†äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1613630063,"ip_address":"","comment_id":278991,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"åŸºäºç›®å‰ç»™å‡ºçš„shared_ptrçš„å®ç°ï¼Œèƒ½ä¸èƒ½å†è¯´è¯´å¦‚ä½•è§£å†³ å¤šä¸ªshared_ptrå½¢æˆç¯çš„æƒ…å†µå•Šï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519265,"discussion_content":"æ³¨æ„åˆ°æˆ‘å·å·å¡è¿›çš„C++11è¯­æ³•äº†ï¼ŸğŸ¤“\n\nè¯¦è§ç¬¬8è®²ï¼Œé‡Œé¢æœ‰å…·ä½“è¯´æ˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619792180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253401,"user_name":"Lloyd Liu","can_delete":false,"product_type":"c1","uid":1619354,"ip_address":"","ucode":"82DF4CE95ECB74","user_header":"https://static001.geekbang.org/account/avatar/00/18/b5/9a/0161f563.jpg","comment_is_top":false,"comment_ctime":1602727140,"is_pvip":false,"replies":[{"id":92590,"content":"è¿™å¥è¯è¿˜ä¸å¤Ÿæ¸…æ¥šå—ï¼Ÿ\n\nâ€œç°åœ¨ smart_ptr&lt;circle&gt; å¯ä»¥ç§»åŠ¨ç»™ smart_ptr&lt;shape&gt;ï¼Œä½†ä¸èƒ½ç§»åŠ¨ç»™ smart_ptr&lt;triangle&gt;ã€‚â€\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1602779857,"ip_address":"","comment_id":253401,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"â€œå“¦ï¼Œæˆ‘æ’’äº†ä¸€ä¸ªå°è°ã€‚ä¸çŸ¥é“ä½ æ³¨æ„åˆ°æ²¡æœ‰ï¼Œä¸€ä¸ª circle* æ˜¯å¯ä»¥éšå¼è½¬æ¢æˆ shape* çš„ï¼Œä½†ä¸Šé¢çš„ smart_ptr&lt;circle&gt; å´æ— æ³•è‡ªåŠ¨è½¬æ¢æˆ smart_ptr&lt;shape&gt;ã€‚è¿™ä¸ªè¡Œä¸ºæ˜¾ç„¶è¿˜æ˜¯ä¸å¤Ÿâ€œè‡ªç„¶â€ã€‚\n\nä¸è¿‡ï¼Œåªéœ€è¦é¢å¤–åŠ ä¸€ç‚¹æ¨¡æ¿ä»£ç ï¼Œå°±èƒ½å®ç°è¿™ä¸€è¡Œä¸ºã€‚åœ¨æˆ‘ä»¬ç›®å‰ç»™å‡ºçš„å®ç°é‡Œï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªæ„é€ å‡½æ•°å³å¯â€”â€”è¿™ä¹Ÿç®—æ˜¯æˆ‘ä»¬è®©èµ‹å€¼å‡½æ•°åˆ©ç”¨æ„é€ å‡½æ•°çš„å¥½å¤„äº†ã€‚â€\n\nä¸‹é¢é™¤äº†ä»£ç ä¹‹å¤–ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªä½¿ç”¨çš„ä¾‹å­","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515588,"discussion_content":"è¿™ä¸ªå°±æ›´å¤æ‚äº†ã€‚è¿™ä¸ªä¸“æ æ¥æ²¡æœ‰è®²ã€‚ç›®å‰çš„çŸ¥è¯†æŒæ¡åï¼Œå¯ä»¥å»çœ‹ weak_ptr çš„å®ç°ã€‚ç›®å‰ç»™å‡ºçš„è¿™ä¸ªå®ç°ï¼ˆåŠæ ‡å‡†çš„ shared_ptrï¼‰éƒ½ä¸å¯ä»¥å½¢æˆç¯ï¼Œå¦åˆ™å°±é‡Šæ”¾ä¸äº†äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613630063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2401422,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","nickname":"geek","note":"","ucode":"FF0845140D72A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349990,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613655051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246376,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1599301703,"is_pvip":false,"replies":[{"id":90689,"content":"æ™ºèƒ½æŒ‡é’ˆæœ‰åˆ° bool çš„è‡ªåŠ¨è½¬æ¢ï¼Œä½ çœ‹åˆ°çš„ 1 å°±æ˜¯ trueï¼Œä»£è¡¨æŒ‡é’ˆä¸ä¸ºç©ºã€‚\n\nstd::shared_ptr å¯ä»¥ç”¨ &lt;&lt; è¾“å‡ºçš„åŸå› æ˜¯æ ‡å‡†åº“æä¾›äº† operator&lt;&lt; çš„é‡è½½ï¼ˆæˆ‘æ²¡æœ‰ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1599487326,"ip_address":"","comment_id":246376,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100040501,"comment_content":"å´è€å¸ˆä½ å¥½ï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªcoutå‡ºæ¥çš„ç»“æœæ˜¯1å‘€ï¼Ÿä¸åº”è¯¥æ˜¯heapä¸Šçš„ä¸€ä¸ªåœ°å€å—ï¼š\n    smart_ptr&lt;int&gt; smt_tmp(new int);\n    std::cout &lt;&lt; &quot;smt_tmp is: &quot; &lt;&lt; smt_tmp &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;&amp;smt_tmp is: &quot; &lt;&lt; &amp;smt_tmp &lt;&lt; std::endl;\n\n    std::shared_ptr&lt;int&gt; sha_tmp(new int);\n    std::cout &lt;&lt; &quot;sha_tmp is: &quot; &lt;&lt; sha_tmp &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;&amp;sha_tmp is: &quot; &lt;&lt; &amp;sha_tmp &lt;&lt; std::endl;\nstdå†…éƒ¨çš„æ™ºèƒ½æŒ‡é’ˆè¾“å‡ºæ˜¯heapä¸Šçš„åœ°å€ã€‚","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505125,"discussion_content":"æ™ºèƒ½æŒ‡é’ˆæœ‰åˆ° bool çš„è‡ªåŠ¨è½¬æ¢ï¼Œä½ çœ‹åˆ°çš„ 1 å°±æ˜¯ trueï¼Œä»£è¡¨æŒ‡é’ˆä¸ä¸ºç©ºã€‚\n\nstd::shared_ptr å¯ä»¥ç”¨ &amp;lt;&amp;lt; è¾“å‡ºçš„åŸå› æ˜¯æ ‡å‡†åº“æä¾›äº† operator&amp;lt;&amp;lt; çš„é‡è½½ï¼ˆæˆ‘æ²¡æœ‰ï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599487326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236097,"user_name":"ADCä¸èƒ½C","can_delete":false,"product_type":"c1","uid":1656719,"ip_address":"","ucode":"BD64C5DBC24AF6","user_header":"https://static001.geekbang.org/account/avatar/00/19/47/8f/85f73373.jpg","comment_is_top":false,"comment_ctime":1595315345,"is_pvip":false,"replies":[{"id":87222,"content":"è¿›ç¨‹å†…åº”è¯¥æ˜¯è¡Œä¸é€šçš„ã€‚æƒ³åŠæ³•èµ°RPCå§ã€‚COMçš„ä¸œè¥¿æˆ‘ä¹Ÿä¸ç†Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1595335857,"ip_address":"","comment_id":236097,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"è€å¸ˆé—®ä½ ä¸ªé—®é¢˜å°±æ˜¯64ä½ç¨‹åºå¦‚æœé€šè¿‡com.exeè°ƒç”¨com.dllæ¥ä½¿ç”¨32ä½ç”Ÿæˆçš„dllã€‚comå°±æ˜¯å¾®è½¯æä¾›çš„ä¸€ä¸ªç»„ä»¶","like_count":1},{"had_liked":false,"id":183336,"user_name":"tr","can_delete":false,"product_type":"c1","uid":1758903,"ip_address":"","ucode":"020AB6A704CD43","user_header":"","comment_is_top":false,"comment_ctime":1583006615,"is_pvip":false,"replies":[{"id":70956,"content":"ä½ ä¼¼ä¹æ²¡æœ‰ç”¨C++17çš„æ–°è¯­æ³•ã€‚ä¸‹é¢ï¼ˆå‰åŠéƒ¨åˆ†çš„ï¼‰ä»£ç åœ¨ C++17 é‡Œæ˜¯å¯ä»¥é€šè¿‡çš„ï¼š\n\n#include &lt;memory&gt;\n\nint main()\n{\n    auto p1 = std::shared_ptr&lt;char[]&gt;(new char[20]);\n    p1[0] = &#39;h&#39;;\n    p1[19] = &#39;\\0&#39;;\n\n    &#47;&#47; C++20\n    auto p2 = std::make_shared&lt;char[]&gt;(20);\n    p2[0] = &#39;h&#39;;\n    p2[19] = &#39;\\0&#39;;\n}\n\nC++20 éƒ¨åˆ†çš„ä»£ç ç›®å‰æµ‹ä¸‹æ¥åªæœ‰ GCC å·²ç»æ”¯æŒã€‚\n\næ³¨æ„ï¼Œoperator[] åªå¯¹æ•°ç»„ç±»å‹çš„ shared_ptr æœ‰æ•ˆï¼šåªèƒ½ç”¨äº shared_ptr&lt;char[]&gt;ï¼Œä¸èƒ½ç”¨äº shared_ptr&lt;char&gt;ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1583029587,"ip_address":"","comment_id":183336,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œshared_ptr sp(new int[10]ï¼Œdefault_delete&lt;int[]&gt;())æ—¶ï¼Œè®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ åªèƒ½å…ˆgetåˆ°è£¸æŒ‡é’ˆä¹‹åå†è®¿é—®ä¹ˆï¼Ÿèƒ½ä¸èƒ½ç±»ä¼¼äºsp[2]è¿™æ ·ç›´æ¥è®¿é—®å…ƒç´ ï¼ˆsp[2]è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œä¹Ÿæ²¡è¯•å‡ºæ¥å“ªç§å½¢å¼å¯è¡Œï¼‰","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501941,"discussion_content":"è¿›ç¨‹å†…åº”è¯¥æ˜¯è¡Œä¸é€šçš„ã€‚æƒ³åŠæ³•èµ°RPCå§ã€‚COMçš„ä¸œè¥¿æˆ‘ä¹Ÿä¸ç†Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595335857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168782,"user_name":"åˆ˜å¾·èª","can_delete":false,"product_type":"c1","uid":1316662,"ip_address":"","ucode":"2968605D077072","user_header":"https://static001.geekbang.org/account/avatar/00/14/17/36/3d8e86e6.jpg","comment_is_top":false,"comment_ctime":1578158165,"is_pvip":false,"replies":[{"id":65505,"content":"å°±é \n\nptr_ = other.ptr_;\n\nè¿™å¥ã€‚int* æ˜¯ä¸èƒ½ç›´æ¥èµ‹å€¼ç»™ä¸€ä¸ª double* çš„å˜é‡çš„ã€‚\n\nè¿™å„¿è‡ªåŠ¨è½¬æ¢æ­£å¥½å¸®å¿™ï¼Œå› ä¸º circle* æ˜¯å¯ä»¥èµ‹å€¼ç»™ shape* çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578225723,"ip_address":"","comment_id":168782,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼ŒåŸºäºä¸Šé¢ç»™å‡ºçš„æ¨¡æ¿ä¸­çš„æ„é€ å‡½æ•°å¦‚ä¸‹ï¼š\ntemplate &lt;typename U&gt;  smart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept  {    ptr_ = other.ptr_;    if (ptr_) {      other.shared_count_-&gt;add_count();      shared_count_ = other.shared_count_;    }  }\nå½“ç±»å‹Uå’Œæ¨¡æ¿ç±»å‹Tä¸ä¸€è‡´çš„æ—¶å€™ï¼Œ æ„é€ å‡½æ•°çš„å®ç°å¹¶æ²¡æœ‰æ£€æµ‹è¿™ä¸€ç‚¹ï¼Ÿ ç¨‹åºæ˜¯å¦‚ä½•ä¿è¯ç±»å‹Uå’ŒTä¸€è‡´å‘¢ï¼Ÿ\næ¯”å¦‚ä¸‹é¢ä»£ç ï¼Œç¨‹åºä¼šæŠ¥é”™ã€‚ä½†æ˜¯ä»smart_ptræ„é€ å‡½æ•°ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯å¦‚ä½•ä¿è¯äº†è¿™ç‚¹ï¼Ÿ\nstd::shared_ptr&lt;int&gt; pi(new int(10)); \nstd::shared_ptr&lt;double&gt; pd(pi);\n\nnote:  è¯„è®ºç²˜è´´ä»£ç æœ‰ç‚¹æ··ä¹±ï¼Œè¾›è‹¦äº†ã€‚\n","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480334,"discussion_content":"å°±é \n\nptr_ = other.ptr_;\n\nè¿™å¥ã€‚int* æ˜¯ä¸èƒ½ç›´æ¥èµ‹å€¼ç»™ä¸€ä¸ª double* çš„å˜é‡çš„ã€‚\n\nè¿™å„¿è‡ªåŠ¨è½¬æ¢æ­£å¥½å¸®å¿™ï¼Œå› ä¸º circle* æ˜¯å¯ä»¥èµ‹å€¼ç»™ shape* çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578225723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1316662,"avatar":"https://static001.geekbang.org/account/avatar/00/14/17/36/3d8e86e6.jpg","nickname":"åˆ˜å¾·èª","note":"","ucode":"2968605D077072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":119736,"discussion_content":"æ˜ç™½äº†ã€‚è°¢è°¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578236056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167289,"user_name":"talor","can_delete":false,"product_type":"c1","uid":1350638,"ip_address":"","ucode":"245EE908DA39EC","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/ee/211e86cd.jpg","comment_is_top":false,"comment_ctime":1577756901,"is_pvip":false,"replies":[{"id":64994,"content":"è¿™ä¸ªæ–¹æ³•æ­£å¸¸æ¥è¯´æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºæ‹·è´æ„é€ ä¸è¯¥ç¢° other çš„å†…å®¹çš„ã€‚ç¢°åˆ° auto_ptr è¿™æ ·çš„å¥‡æ€ªç±»å°±ä¸è¡Œäº†ã€‚è¿™ä¹Ÿæ˜¯ auto_ptr è¢«å¹²æ‰çš„åŸå› ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577801830,"ip_address":"","comment_id":167289,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œåœ¨ä¸Šé¢çš„å®ç°operator=æ—¶ä½¿ç”¨äº†æ‹·è´å’Œäº¤æ¢ï¼Œå½“æ‹·è´æ„é€ å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼Œthiså¯¹è±¡æ²¡æœ‰è¢«ç ´åï¼Œä½†æ˜¯otherå¯¹è±¡å¯èƒ½å·²ç»è¢«æ”¹å˜äº†ï¼Œè¿™æ ·æ˜¯å¦ä¹Ÿä¸æ˜¯å¼‚å¸¸å®‰å…¨çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479815,"discussion_content":"è¿™ä¸ªæ–¹æ³•æ­£å¸¸æ¥è¯´æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºæ‹·è´æ„é€ ä¸è¯¥ç¢° other çš„å†…å®¹çš„ã€‚ç¢°åˆ° auto_ptr è¿™æ ·çš„å¥‡æ€ªç±»å°±ä¸è¡Œäº†ã€‚è¿™ä¹Ÿæ˜¯ auto_ptr è¢«å¹²æ‰çš„åŸå› ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577801830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165230,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1577183929,"is_pvip":false,"replies":[{"id":62990,"content":"ä½ ä¸èƒ½æ‹¿ç€ goto çš„ç¼–ç¨‹æ€ç»´æ¥çœ‹å¾…ç»“æ„åŒ–ç¼–ç¨‹ã€‚è¦æ‰¾å‡ºæ›´é«˜å±‚çš„æŠ½è±¡ã€‚\n\nä½ çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘å®Œå…¨çœ‹ä¸å‡ºæŒ‡é’ˆå˜é‡çš„å¿…è¦æ€§ã€‚æˆ‘çœ‹åˆ°çš„æ˜¯ä¸¤ä¸ªæ½œåœ¨å‡½æ•°çš„å¯èƒ½æ€§ï¼šdo_work(int&amp;) å’Œ do_something_else(int&amp;)ã€‚\n\nä½ çš„ç¬¬äºŒä¸ªä¾‹å­æœ‰ç”Ÿå‘½æœŸç®¡ç†çš„æ··ä¹±ï¼šå¦‚æœä½ èµ‹ç»™shared_ptrï¼Œä½ æœ‰å…¶ä»–çš„ delete è¯­å¥å—ï¼Ÿä½ èƒ½æ‰‹å·¥è·Ÿè¸ªå¾—æ¸…æ¯ä¸ªå¯¹è±¡çš„ç”Ÿå‘½æœŸå—ï¼Ÿshared_ptr ä¸å…è®¸è¿™æ ·çš„èµ‹å€¼ï¼Œä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢æ„å¤–å¯¼è‡´çš„é”™è¯¯ã€‚\n\nè¦ç”¨å¥½æ™ºèƒ½æŒ‡é’ˆï¼Œæœ€åŸºæœ¬çš„ç”¨æ³•å°±æ˜¯ä»£ç é‡Œä¸è¦å‡ºç°è£¸æŒ‡é’ˆï¼Œä¹Ÿä¸è¦å‡ºç° new å’Œ deleteï¼Œé™¤éä½ å¯¹å®ƒä»¬çš„ç”¨æ³•å’Œå‰¯ä½œç”¨å®Œå…¨ç†Ÿç¨”äºå¿ƒã€‚æ‹¿ä½ çš„ä¾‹å­ï¼ˆè™½ç„¶æˆ‘ä¸ç¡®å®šä½ ä¸ºä»€ä¹ˆè¦åœ¨å †ä¸Šåˆ†é…å¯¹è±¡ï¼‰ï¼Œåº”è¯¥å†™æˆï¼š\n\nauto test_a = make_shared&lt;int&gt;();\n&#47;&#47; æˆ–ç³Ÿç‚¹çš„å†™æ³• auto test_a = shared_ptr&lt;int&gt;(new int);\nauto test_b = make_shared&lt;int&gt;();\nauto int_ptr = test_a;\nint_ptr = test_b;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577190472,"ip_address":"","comment_id":165230,"utype":1}],"discussion_count":6,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘è¿˜æ˜¯å¯¹æ™ºèƒ½æŒ‡é’ˆä¸€å¯¹å¤šçš„æƒ…å†µæœ‰äº›ç–‘æƒ‘ï¼š\n1. æ™®é€šæŒ‡é’ˆ\n    int a = 1, b = 1;\n    int *base;\n    base = &amp;a;\n    {\n&#47;&#47;        Do some work...\n    }\n    base = &amp;b;\n    {\n&#47;&#47;        Do some work...\n    }\n2. æ™ºèƒ½æŒ‡é’ˆ\n    int *test_a = new int;\n    int *test_b = new int;\n\n    shared_ptr&lt;int&gt; int_ptr(test_a);\n    int_ptr = test_b;\né—®é¢˜ï¼šç¬¬1ç§æƒ…å†µï¼Œä½¿ç”¨æ™®é€šæŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥è®©baseæŒ‡é’ˆæŒ‡å‘ä¸åŒçš„åœ°å€ï¼Œä½†æ˜¯æˆ‘åœ¨ç¬¬2ç§æƒ…å†µä¸­ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªåŠ¨æ€å†…å­˜çš„æ—¶å€™ï¼Œå´æŠ¥é”™ï¼šâ€œerror: no match for â€˜operator=â€™ (operand types are â€˜std::shared_ptr&lt;int&gt;â€™ and â€˜int*â€™)â€","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479815,"discussion_content":"è¿™ä¸ªæ–¹æ³•æ­£å¸¸æ¥è¯´æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºæ‹·è´æ„é€ ä¸è¯¥ç¢° other çš„å†…å®¹çš„ã€‚ç¢°åˆ° auto_ptr è¿™æ ·çš„å¥‡æ€ªç±»å°±ä¸è¡Œäº†ã€‚è¿™ä¹Ÿæ˜¯ auto_ptr è¢«å¹²æ‰çš„åŸå› ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577801830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162378,"user_name":"Geek_b68b74","can_delete":false,"product_type":"c1","uid":1780585,"ip_address":"","ucode":"7CB026A020D513","user_header":"","comment_is_top":false,"comment_ctime":1576506681,"is_pvip":false,"replies":[{"id":61794,"content":"å¦‚æœå­¦C++è¿˜ä¸å¾ˆä¹…ï¼Œå¯ä»¥å…ˆè¯»äº›å…¶ä»–ä¹¦æ¸©ä¹ åŸºç¡€çŸ¥è¯†ï¼ˆæ¯”å¦‚C++ä¹‹çˆ¶çš„ã€ŠC++è¯­è¨€å¯¼å­¦ã€‹ï¼‰ã€‚æˆ‘å¯¹ä½ äº†è§£ä»€ä¹ˆæœ‰ä¸€å®šé¢„è®¾çš„ï¼Œå¯èƒ½åˆ¤æ–­ä¸é‚£ä¹ˆå‡†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576544875,"ip_address":"","comment_id":162378,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"ç¬¬ä¸€è®²çœ‹äº†å‡ éæ‰æ˜ç™½ï¼Œç¬¬äºŒè®²ç›´æ¥æ‡µé€¼äº†ã€‚ã€‚ã€‚éå¸¸æœ‰æ·±åº¦çš„ä¸“æ ï¼Œæˆ‘å†å¤šçœ‹å‡ é","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479084,"discussion_content":"ä½ ä¸èƒ½æ‹¿ç€ goto çš„ç¼–ç¨‹æ€ç»´æ¥çœ‹å¾…ç»“æ„åŒ–ç¼–ç¨‹ã€‚è¦æ‰¾å‡ºæ›´é«˜å±‚çš„æŠ½è±¡ã€‚\n\nä½ çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘å®Œå…¨çœ‹ä¸å‡ºæŒ‡é’ˆå˜é‡çš„å¿…è¦æ€§ã€‚æˆ‘çœ‹åˆ°çš„æ˜¯ä¸¤ä¸ªæ½œåœ¨å‡½æ•°çš„å¯èƒ½æ€§ï¼šdo_work(int&amp;amp;) å’Œ do_something_else(int&amp;amp;)ã€‚\n\nä½ çš„ç¬¬äºŒä¸ªä¾‹å­æœ‰ç”Ÿå‘½æœŸç®¡ç†çš„æ··ä¹±ï¼šå¦‚æœä½ èµ‹ç»™shared_ptrï¼Œä½ æœ‰å…¶ä»–çš„ delete è¯­å¥å—ï¼Ÿä½ èƒ½æ‰‹å·¥è·Ÿè¸ªå¾—æ¸…æ¯ä¸ªå¯¹è±¡çš„ç”Ÿå‘½æœŸå—ï¼Ÿshared_ptr ä¸å…è®¸è¿™æ ·çš„èµ‹å€¼ï¼Œä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢æ„å¤–å¯¼è‡´çš„é”™è¯¯ã€‚\n\nè¦ç”¨å¥½æ™ºèƒ½æŒ‡é’ˆï¼Œæœ€åŸºæœ¬çš„ç”¨æ³•å°±æ˜¯ä»£ç é‡Œä¸è¦å‡ºç°è£¸æŒ‡é’ˆï¼Œä¹Ÿä¸è¦å‡ºç° new å’Œ deleteï¼Œé™¤éä½ å¯¹å®ƒä»¬çš„ç”¨æ³•å’Œå‰¯ä½œç”¨å®Œå…¨ç†Ÿç¨”äºå¿ƒã€‚æ‹¿ä½ çš„ä¾‹å­ï¼ˆè™½ç„¶æˆ‘ä¸ç¡®å®šä½ ä¸ºä»€ä¹ˆè¦åœ¨å †ä¸Šåˆ†é…å¯¹è±¡ï¼‰ï¼Œåº”è¯¥å†™æˆï¼š\n\nauto test_a = make_shared&amp;lt;int&amp;gt;();\n// æˆ–ç³Ÿç‚¹çš„å†™æ³• auto test_a = shared_ptr&amp;lt;int&amp;gt;(new int);\nauto test_b = make_shared&amp;lt;int&amp;gt;();\nauto int_ptr = test_a;\nint_ptr = test_b;","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577190472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98992,"discussion_content":"æœå˜ï¼Œæ˜ç™½äº†ã€‚\nè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577193246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98982,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆçš„å›å¤ï¼Œæˆ‘åªæ˜¯ä¸¾ä¸ªä¾‹å­ã€‚æ²¡æœ‰è€ƒè™‘å…¶ä»–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577193076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98743,"discussion_content":"æ™ºèƒ½æŒ‡é’ˆæ‹·è´æ„é€ å‡½æ•°æˆ–è€…èµ‹å€¼å‡½æ•°ä»¥åŠç§»åŠ¨è¯­ä¹‰ä¸­éƒ½ä»ç„¶éœ€è¦shared_ptrç±»çš„å¯¹è±¡ï¼Œæˆ‘è¿™é‡Œç›´æ¥æ˜¯åŠ¨æ€å†…å­˜åœ°å€ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ç¼–è¯‘å‡ºé”™ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘æƒ³å®ç°ç±»ä¼¼çš„æ„æ€æ€ä¹ˆåŠåˆ°å‘€ï¼Ÿ\nè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577184498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":99242,"discussion_content":"å·²ç»è¯´äº†ä¸è¦è£¸æŒ‡é’ˆäº†å‘€ã€‚è¦ä¹ˆä½¿ç”¨å¼•ç”¨ï¼Œè¡¨ç¤ºä¸å¤„ç†ç”Ÿå‘½å‘¨æœŸï¼Œè¦ä¹ˆä½¿ç”¨ unique_ptr æˆ– shared_ptrã€‚å°±æ˜¯è¦è¿«ä½¿ä½ æƒ³æ˜ç™½ç”Ÿå‘½å‘¨æœŸã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577197738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":98743,"ip_address":"","group_id":0},"score":99242,"extra":""},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":100261,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢å´è€å¸ˆè€å¿ƒè®²è§£ğŸ˜ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577245312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":99242,"ip_address":"","group_id":0},"score":100261,"extra":""}]}]},{"had_liked":false,"id":158446,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1575372233,"is_pvip":false,"replies":[{"id":60646,"content":"æ‹·è´æ„é€ æ—¶ï¼Œè€çš„å¯¹è±¡éƒ½è¿˜æ²¡ç”Ÿæˆå‘¢ï¼Œå“ªæœ‰æ–°è€çš„æ¯”è¾ƒï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575378293,"ip_address":"","comment_id":158446,"utype":1}],"discussion_count":3,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œæœ‰ä¸ªç–‘æƒ‘ï¼Œçœ‹ä¹Ÿæœ‰åŒå­¦é—®åˆ°è¿™é‡Œï¼Œè®²smart_ptrçš„æ—¶å€™ï¼Œæ„Ÿè§‰èµ‹å€¼æ“ä½œæœ‰ç‰¹åˆ«è€ƒè™‘this ï¼ï¼&amp;rhs çš„æƒ…å†µï¼Œä½†æ˜¯æ‹·è´æ„é€ å¥½åƒæ²¡æœ‰ç‰¹åˆ«è€ƒè™‘ï¼Œè¿™æ˜¯åŸºäºä»€ä¹ˆåŸå› ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478034,"discussion_content":"å¦‚æœå­¦C++è¿˜ä¸å¾ˆä¹…ï¼Œå¯ä»¥å…ˆè¯»äº›å…¶ä»–ä¹¦æ¸©ä¹ åŸºç¡€çŸ¥è¯†ï¼ˆæ¯”å¦‚C++ä¹‹çˆ¶çš„ã€ŠC++è¯­è¨€å¯¼å­¦ã€‹ï¼‰ã€‚æˆ‘å¯¹ä½ äº†è§£ä»€ä¹ˆæœ‰ä¸€å®šé¢„è®¾çš„ï¼Œå¯èƒ½åˆ¤æ–­ä¸é‚£ä¹ˆå‡†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576544875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157589,"user_name":"èŠ±æ™¨å°‘å¹´","can_delete":false,"product_type":"c1","uid":1098987,"ip_address":"","ucode":"6AA3537A6BA10E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","comment_is_top":false,"comment_ctime":1575205416,"is_pvip":false,"replies":[{"id":60430,"content":"swapä¸åˆ¤æ–­çš„ã€‚ç›®å‰çš„å†™æ³•ä¿è¯äº†this == &amp;rhsä¸ä¼šæœ‰é—®é¢˜ã€‚\n\nå½“ä½ çš„å¯¹è±¡æœ‰å¤šä¸ªæˆå‘˜ï¼Œèµ‹å€¼åˆ°ç¬¬äºŒä¸ªæˆå‘˜æ—¶å‘ç”Ÿäº†å¼‚å¸¸ã€‚æƒ³æƒ³è¿™ç§æƒ…å†µä¸‹çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575210518,"ip_address":"","comment_id":157589,"utype":1}],"discussion_count":6,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"å¦‚æœä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äº if (this != &amp;rhs) çš„åˆ¤æ–­çš„è¯ï¼Œé‚£ç§ç”¨æ³•æ›´å•°å—¦ï¼Œè€Œä¸”å¼‚å¸¸å®‰å…¨æ€§ä¸å¤Ÿå¥½â€”â€”å¦‚æœåœ¨èµ‹å€¼è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡çš„å†…å®¹å¯èƒ½å·²ç»è¢«éƒ¨åˆ†ç ´åäº†ï¼Œå¯¹è±¡ä¸å†å¤„äºä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€ã€‚\nâ€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”\næ–‡ä¸­è¿™å¥è¯ä¸å¤ªç†è§£ï¼Œå¦‚æœä¸åšè¿™ä¸ªåˆ¤æ–­ï¼Œswapå†…éƒ¨åº”è¯¥æœ‰åˆ¤æ–­ã€‚\nä½†æ˜¯å¹¶æ²¡æœ‰æƒ³æ˜ç™½å¼‚å¸¸å®‰å…¨æ€§æ€ä¹ˆä¸å¥½äº†ï¼Œæ„Ÿè§‰å’Œä¸åŠ è¿™ä¸ªåˆ¤æ–­æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œèµ‹å€¼è¿‡ç¨‹åº”è¯¥æ˜¯åœ¨è¿™å¥åˆ¤æ–­ä»£ç çš„ä¸‹æ–¹åšï¼Œæ‰€ä»¥è¿™å¥ä»£ç æ‰§è¡Œæ—¶ï¼Œå¯¹è±¡ä¹Ÿæ²¡æœ‰ä¸å®Œæ•´ã€‚","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476727,"discussion_content":"æ‹·è´æ„é€ æ—¶ï¼Œè€çš„å¯¹è±¡éƒ½è¿˜æ²¡ç”Ÿæˆå‘¢ï¼Œå“ªæœ‰æ–°è€çš„æ¯”è¾ƒï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575378293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":99469,"discussion_content":"æ²¡æ‰¾åˆ°é‚£ä¸ªé—®é¢˜å’Œç­”å¤ã€‚æ³›æ³›è€Œè¨€ï¼Œè‡ªæ£€æŸ¥æ˜¯æ€•èµ‹å€¼æ—¶è¦æŠŠåŸæœ‰çš„å†…å®¹æ¸…é™¤ï¼Œå†æŠŠæ–°çš„å†…å®¹æ”¾è¿›æ¥ï¼Œè¿™æ ·ä¸æ£€æŸ¥è‡ªèµ‹å€¼å°±ä¼šå‡ºé—®é¢˜ã€‚æˆ‘æ€»ä½“ä¸Šé‡‡ç”¨å¼‚å¸¸å®‰å…¨çš„åšæ³•ï¼Œæ€»æ˜¯å…ˆèµ‹å€¼ï¼ŒæˆåŠŸåå†é‡Šæ”¾éœ€è¦é‡Šæ”¾çš„èµ„æºï¼Œè¿™æ ·å°±ä¸éœ€è¦æ£€æŸ¥è‡ªèµ‹å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577200144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1490070,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","nickname":"æ€»ç»Ÿè€å”","note":"","ucode":"F2CC66E5BB4871","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71390,"discussion_content":"å—¯ï¼Œç¡®å®æ˜¯è¿™æ ·ã€‚ä¸è¿‡ï¼Œæœ‰åŒå­¦æŒ‡å‡ºï¼Œèµ‹å€¼æ“ä½œåº”è¯¥ä¹Ÿä¸ç”¨è€ƒè™‘ä¸¤è€…ç›¸ç­‰çš„æƒ…å†µï¼Œä½ çš„ç­”å¤æ˜¯â€œè‹¥åªè€ƒè™‘unique_ptrï¼Œç¡®å®æ˜¯æ²¡æœ‰é—®é¢˜çš„â€ï¼Œä½†æ˜¯ä½ é‡‡ç”¨çš„å…ˆæ„é€ ä¸€ä¸ªä¸´æ—¶å˜é‡çš„æ–¹å¼ï¼Œå®é™…ä¸Šå®ç°çš„ä¹Ÿæ˜¯unique_ptrçš„è¡Œä¸ºï¼Œå’Œé‡‡ç”¨releaseçš„æ–¹å¼å¥½åƒæ¯”å¹¶æ²¡æœ‰åŒºåˆ«ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦åœ¨è¿™é‡Œå¼•å…¥è¿™ç§æ–¹å¼ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575418688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157222,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1575087122,"is_pvip":false,"replies":[{"id":60315,"content":"ä¸æ˜¯ã€‚å†æƒ³æƒ³ã€‚æŒ‰ä½ çš„å†™æ³•ï¼ŒthisæŒ‡å‘çš„å¯¹è±¡å°±è¢«ä¼ åˆ°rhsæ¥æ‹¥æœ‰äº†ã€‚è¿™ä¸æ˜¯=å¸Œæœ›åšçš„äº‹æƒ…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575108262,"ip_address":"","comment_id":157222,"utype":1}],"discussion_count":4,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"smart_ptr&amp; operator=(smart_ptr&amp; rhs) \n {    smart_ptr(rhs).swap(*this);    return *this;  }\n\nrhs æœ¬èº«å°±æ˜¯smart_ptrçš„å·¦å€¼å¼•ç”¨äº†ï¼Œ\nåœ¨å‡½æ•°é¢˜é‡Œsmart_ptr(rhs), \nè²Œä¼¼åº”è¯¥æ˜¯rhs.swap(*thisï¼‰ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70821,"discussion_content":"ä¸æ˜¯è¯´è¿™ä¸ªä¾‹å­ä¼šå‡ºå…ˆé—®é¢˜ï¼Œè€Œæ˜¯é€šç”¨è€Œè¨€ï¼Œè¿™ç§æ–¹å¼å¯èƒ½å‡ºé—®é¢˜ã€‚\n\nå¦‚ï¼š\n\nclass A {\npublic:\n  A&amp; operator=(const A&amp;);\nprivate:\n  B b_;\n  C* c_;\n};\n\nA&amp; A::operator(const A&amp; rhs)\n{\n  if (this == &amp;rhs) {\n    return;\n  }\n  b_ = rhs.b_;\n  c_ = new C(*rhs.c_);\n}\n\nå¦‚æœåœ¨ä¸Šé¢æœ€åä¸€è¡Œæœ‰æ•ˆä»£ç å¤„å‡ºç°å¼‚å¸¸ï¼Œé‚£ this çš„çŠ¶æ€å°±å¾ˆå¥‡æ€ªï¼Œå¤´æ¢æˆäº†åˆ«äººï¼ˆrhsï¼‰çš„ï¼Œèº«ä½“è¿˜æ˜¯è‡ªå·±çš„ã€‚\n\næˆ‘è¯´çš„æ–¹æ³•å°±æ˜¯ä¸€å¾‹ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æ¥æ„é€ æ–°å¯¹è±¡ï¼Œç„¶åä½¿ç”¨æ— å¼‚å¸¸çš„ swap æ¥è·å¾—æ–°å¯¹è±¡ã€‚è¿™æ ·ï¼Œthis è¦ä¹ˆä¸å˜ï¼Œè¦ä¹ˆæˆä¸ºå…¨æ–°çš„ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1575381516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1098987,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","nickname":"èŠ±æ™¨å°‘å¹´","note":"","ucode":"6AA3537A6BA10E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":70914,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œäº†è§£äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575383154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70821,"ip_address":"","group_id":0},"score":70914,"extra":""},{"author":{"id":2181930,"avatar":"https://static001.geekbang.org/account/avatar/00/21/4b/2a/4602363c.jpg","nickname":"é«˜å°é«˜","note":"","ucode":"6F7D31403EE67A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":321479,"discussion_content":"è€å¸ˆï¼Œè¯·é—®swapæ˜¯æ€ä¹ˆä¿è¯æ— å¼‚å¸¸çš„å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604585523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70821,"ip_address":"","group_id":0},"score":321479,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2181930,"avatar":"https://static001.geekbang.org/account/avatar/00/21/4b/2a/4602363c.jpg","nickname":"é«˜å°é«˜","note":"","ucode":"6F7D31403EE67A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321855,"discussion_content":"å…ˆæ‹·è´æ„é€ ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¦‚æœå‡ºç°å¼‚å¸¸åˆ™å½“å‰å¯¹è±¡å®Œå…¨ä¸å˜ã€‚å¦‚æœæ²¡é—®é¢˜ï¼Œåˆ™è¿›è¡Œä¸€ä¸ªæ— å¼‚å¸¸çš„äº¤æ¢æ“ä½œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604640362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":321479,"ip_address":"","group_id":0},"score":321855,"extra":""}]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476476,"discussion_content":"swapä¸åˆ¤æ–­çš„ã€‚ç›®å‰çš„å†™æ³•ä¿è¯äº†this == &amp;amp;rhsä¸ä¼šæœ‰é—®é¢˜ã€‚\n\nå½“ä½ çš„å¯¹è±¡æœ‰å¤šä¸ªæˆå‘˜ï¼Œèµ‹å€¼åˆ°ç¬¬äºŒä¸ªæˆå‘˜æ—¶å‘ç”Ÿäº†å¼‚å¸¸ã€‚æƒ³æƒ³è¿™ç§æƒ…å†µä¸‹çš„ç»“æœã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575210518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1098987,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","nickname":"èŠ±æ™¨å°‘å¹´","note":"","ucode":"6AA3537A6BA10E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69252,"discussion_content":"å“ˆï¼Œè¿˜æ˜¯ä¸å¤ªæ‡‚ï¼Œè€å¸ˆè§è°….\nsmart_ptr&amp; operator=(smart_ptr rhs) noexcept {\nif (this != &amp;rhs) { //ååŠ ä¸Šçš„åˆ¤æ–­ //@1\n rhs.swap(*this); \n}\n return *this; \n}\n\nvoid swap(smart_ptr&amp; rhs) noexcept { \n\tusing std::swap;\n\tswap(ptr_, rhs.ptr_);\n\tswap(shared_count_, rhs.shared_count_);//@2\n }\n\n@1åŠ ä¸Šåˆ¤æ–­ä¹‹åï¼Œé™¤äº†ä»£ç ç¹çä¹‹å¤–ï¼Œä¸ºä»€ä¹ˆä¼šå½±å“å¼‚å¸¸çš„å®Œæ•´æ€§ã€‚\nå¦‚æœåœ¨@2å¤„å‡ºç°å¼‚å¸¸ï¼Œå¯¹è±¡ä¸ä¹Ÿæ˜¯ä¸å®Œæ•´çš„å—ï¼Œæ„Ÿè§‰åŠ ä¸åŠ åˆ¤æ–­ï¼Œå¹¶æ²¡æœ‰ä»»ä½•å½±å“ã€‚\nå¦å¤–å¦‚æœä¸åŠ åˆ¤æ–­ï¼Œæ˜¯æ€ä¹ˆç¡®ä¿&#34;this == &amp;rhs&#34;ä¸ä¼šæœ‰é—®é¢˜çš„å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575275885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156614,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574923611,"is_pvip":false,"replies":[{"id":60160,"content":"çœ‹æ¥æˆ‘çš„éš¾åº¦æŠŠæ§è¿˜ä¸å¤Ÿå¥½ã€‚å¯ä»¥æœ‰ç‚¹ä¸æ±‚ç”šè§£ã€‚å…ˆä½“ä¼šä¸€ä¸‹ã€‚ç­‰ä¸“æ ç»“æŸäº†ï¼Œå›è¿‡æ¥å†çœ‹ä¸€éï¼Œä¹Ÿè®¸å°±éå¸¸æ¸…æ¥šäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574949140,"ip_address":"","comment_id":156614,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"çœ‹åˆ°è¯„è®ºåœˆ å¥½å¤šäººéƒ½è¯´çœ‹ä¸æ‡‚  æˆ‘çš„å¿ƒè‚Œæ¢—å¡ç®—æ˜¯ç¼“è§£äº† æˆ‘ä¹Ÿå¥½åƒåŠ›å•Š ä¸è¿‡åœ¨è¿™ä¸€èŠ‚äº†æˆ‘å€’æ˜¯æƒ³åˆ°äº†å¦‚ä¸‹çŸ¥è¯†ç‚¹\n1. æ‹·è´æ„é€  èµ‹å€¼æ„é€  è¿˜æœ‰ä»æœªæ¥è§¦è¿‡çš„ç§»åŠ¨æ„é€ \n2. å„ç§ç±»å‹è½¬æ¢\n3. æ“ä½œç¬¦çš„é‡è½½","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476366,"discussion_content":"ä¸æ˜¯ã€‚å†æƒ³æƒ³ã€‚æŒ‰ä½ çš„å†™æ³•ï¼ŒthisæŒ‡å‘çš„å¯¹è±¡å°±è¢«ä¼ åˆ°rhsæ¥æ‹¥æœ‰äº†ã€‚è¿™ä¸æ˜¯=å¸Œæœ›åšçš„äº‹æƒ…ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575108262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67172,"discussion_content":"èµ‹å€¼æ“ä½œå¸Œæœ›åšçš„äº‹æƒ…ä¹‹ä¸€æ˜¯è¦å°†rhsæç©ºï¼Œå¯¹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575124312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67627,"discussion_content":"å¯¹ï¼Œæç©ºrhsã€‚thisåŸæœ¬æŒæœ‰çš„å†…å®¹ç«‹å³é‡Šæ”¾ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1575162449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":67172,"ip_address":"","group_id":0},"score":67627,"extra":""},{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":67642,"discussion_content":"éå¸¸æ„Ÿè°¢ï¼\n\nä¹‹å‰æ²¡æœ‰æ­£ç¡®çš„æ¶ˆåŒ–è¿™å¥è¯\nâ€œ åœ¨èµ‹å€¼å‡½æ•°ä¸­ï¼Œåˆ™é€šè¿‡æ‹·è´æ„é€ äº§ç”Ÿä¸€ä¸ªä¸´æ—¶å¯¹è±¡å¹¶è°ƒç”¨ swap æ¥äº¤æ¢å¯¹æŒ‡é’ˆçš„æ‰€æœ‰æƒã€‚â€\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575163389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":67627,"ip_address":"","group_id":0},"score":67642,"extra":""}]}]},{"had_liked":false,"id":236097,"user_name":"ADCä¸èƒ½C","can_delete":false,"product_type":"c1","uid":1656719,"ip_address":"","ucode":"BD64C5DBC24AF6","user_header":"https://static001.geekbang.org/account/avatar/00/19/47/8f/85f73373.jpg","comment_is_top":false,"comment_ctime":1595315345,"is_pvip":false,"replies":[{"id":87222,"content":"è¿›ç¨‹å†…åº”è¯¥æ˜¯è¡Œä¸é€šçš„ã€‚æƒ³åŠæ³•èµ°RPCå§ã€‚COMçš„ä¸œè¥¿æˆ‘ä¹Ÿä¸ç†Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1595335857,"ip_address":"","comment_id":236097,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"è€å¸ˆé—®ä½ ä¸ªé—®é¢˜å°±æ˜¯64ä½ç¨‹åºå¦‚æœé€šè¿‡com.exeè°ƒç”¨com.dllæ¥ä½¿ç”¨32ä½ç”Ÿæˆçš„dllã€‚comå°±æ˜¯å¾®è½¯æä¾›çš„ä¸€ä¸ªç»„ä»¶","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501941,"discussion_content":"è¿›ç¨‹å†…åº”è¯¥æ˜¯è¡Œä¸é€šçš„ã€‚æƒ³åŠæ³•èµ°RPCå§ã€‚COMçš„ä¸œè¥¿æˆ‘ä¹Ÿä¸ç†Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595335857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183336,"user_name":"tr","can_delete":false,"product_type":"c1","uid":1758903,"ip_address":"","ucode":"020AB6A704CD43","user_header":"","comment_is_top":false,"comment_ctime":1583006615,"is_pvip":false,"replies":[{"id":70956,"content":"ä½ ä¼¼ä¹æ²¡æœ‰ç”¨C++17çš„æ–°è¯­æ³•ã€‚ä¸‹é¢ï¼ˆå‰åŠéƒ¨åˆ†çš„ï¼‰ä»£ç åœ¨ C++17 é‡Œæ˜¯å¯ä»¥é€šè¿‡çš„ï¼š\n\n#include &lt;memory&gt;\n\nint main()\n{\n    auto p1 = std::shared_ptr&lt;char[]&gt;(new char[20]);\n    p1[0] = &#39;h&#39;;\n    p1[19] = &#39;\\0&#39;;\n\n    &#47;&#47; C++20\n    auto p2 = std::make_shared&lt;char[]&gt;(20);\n    p2[0] = &#39;h&#39;;\n    p2[19] = &#39;\\0&#39;;\n}\n\nC++20 éƒ¨åˆ†çš„ä»£ç ç›®å‰æµ‹ä¸‹æ¥åªæœ‰ GCC å·²ç»æ”¯æŒã€‚\n\næ³¨æ„ï¼Œoperator[] åªå¯¹æ•°ç»„ç±»å‹çš„ shared_ptr æœ‰æ•ˆï¼šåªèƒ½ç”¨äº shared_ptr&lt;char[]&gt;ï¼Œä¸èƒ½ç”¨äº shared_ptr&lt;char&gt;ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1583029587,"ip_address":"","comment_id":183336,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œshared_ptr sp(new int[10]ï¼Œdefault_delete&lt;int[]&gt;())æ—¶ï¼Œè®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ åªèƒ½å…ˆgetåˆ°è£¸æŒ‡é’ˆä¹‹åå†è®¿é—®ä¹ˆï¼Ÿèƒ½ä¸èƒ½ç±»ä¼¼äºsp[2]è¿™æ ·ç›´æ¥è®¿é—®å…ƒç´ ï¼ˆsp[2]è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œä¹Ÿæ²¡è¯•å‡ºæ¥å“ªç§å½¢å¼å¯è¡Œï¼‰","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485655,"discussion_content":"ä½ ä¼¼ä¹æ²¡æœ‰ç”¨C++17çš„æ–°è¯­æ³•ã€‚ä¸‹é¢ï¼ˆå‰åŠéƒ¨åˆ†çš„ï¼‰ä»£ç åœ¨ C++17 é‡Œæ˜¯å¯ä»¥é€šè¿‡çš„ï¼š\n\n#include &amp;lt;memory&amp;gt;\n\nint main()\n{\n    auto p1 = std::shared_ptr&amp;lt;char[]&amp;gt;(new char[20]);\n    p1[0] = &amp;#39;h&amp;#39;;\n    p1[19] = &amp;#39;\\0&amp;#39;;\n\n    // C++20\n    auto p2 = std::make_shared&amp;lt;char[]&amp;gt;(20);\n    p2[0] = &amp;#39;h&amp;#39;;\n    p2[19] = &amp;#39;\\0&amp;#39;;\n}\n\nC++20 éƒ¨åˆ†çš„ä»£ç ç›®å‰æµ‹ä¸‹æ¥åªæœ‰ GCC å·²ç»æ”¯æŒã€‚\n\næ³¨æ„ï¼Œoperator[] åªå¯¹æ•°ç»„ç±»å‹çš„ shared_ptr æœ‰æ•ˆï¼šåªèƒ½ç”¨äº shared_ptr&amp;lt;char[]&amp;gt;ï¼Œä¸èƒ½ç”¨äº shared_ptr&amp;lt;char&amp;gt;ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583029587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168782,"user_name":"åˆ˜å¾·èª","can_delete":false,"product_type":"c1","uid":1316662,"ip_address":"","ucode":"2968605D077072","user_header":"https://static001.geekbang.org/account/avatar/00/14/17/36/3d8e86e6.jpg","comment_is_top":false,"comment_ctime":1578158165,"is_pvip":false,"replies":[{"id":65505,"content":"å°±é \n\nptr_ = other.ptr_;\n\nè¿™å¥ã€‚int* æ˜¯ä¸èƒ½ç›´æ¥èµ‹å€¼ç»™ä¸€ä¸ª double* çš„å˜é‡çš„ã€‚\n\nè¿™å„¿è‡ªåŠ¨è½¬æ¢æ­£å¥½å¸®å¿™ï¼Œå› ä¸º circle* æ˜¯å¯ä»¥èµ‹å€¼ç»™ shape* çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578225723,"ip_address":"","comment_id":168782,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼ŒåŸºäºä¸Šé¢ç»™å‡ºçš„æ¨¡æ¿ä¸­çš„æ„é€ å‡½æ•°å¦‚ä¸‹ï¼š\ntemplate &lt;typename U&gt;  smart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept  {    ptr_ = other.ptr_;    if (ptr_) {      other.shared_count_-&gt;add_count();      shared_count_ = other.shared_count_;    }  }\nå½“ç±»å‹Uå’Œæ¨¡æ¿ç±»å‹Tä¸ä¸€è‡´çš„æ—¶å€™ï¼Œ æ„é€ å‡½æ•°çš„å®ç°å¹¶æ²¡æœ‰æ£€æµ‹è¿™ä¸€ç‚¹ï¼Ÿ ç¨‹åºæ˜¯å¦‚ä½•ä¿è¯ç±»å‹Uå’ŒTä¸€è‡´å‘¢ï¼Ÿ\næ¯”å¦‚ä¸‹é¢ä»£ç ï¼Œç¨‹åºä¼šæŠ¥é”™ã€‚ä½†æ˜¯ä»smart_ptræ„é€ å‡½æ•°ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯å¦‚ä½•ä¿è¯äº†è¿™ç‚¹ï¼Ÿ\nstd::shared_ptr&lt;int&gt; pi(new int(10)); \nstd::shared_ptr&lt;double&gt; pd(pi);\n\nnote:  è¯„è®ºç²˜è´´ä»£ç æœ‰ç‚¹æ··ä¹±ï¼Œè¾›è‹¦äº†ã€‚\n","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485655,"discussion_content":"ä½ ä¼¼ä¹æ²¡æœ‰ç”¨C++17çš„æ–°è¯­æ³•ã€‚ä¸‹é¢ï¼ˆå‰åŠéƒ¨åˆ†çš„ï¼‰ä»£ç åœ¨ C++17 é‡Œæ˜¯å¯ä»¥é€šè¿‡çš„ï¼š\n\n#include &amp;lt;memory&amp;gt;\n\nint main()\n{\n    auto p1 = std::shared_ptr&amp;lt;char[]&amp;gt;(new char[20]);\n    p1[0] = &amp;#39;h&amp;#39;;\n    p1[19] = &amp;#39;\\0&amp;#39;;\n\n    // C++20\n    auto p2 = std::make_shared&amp;lt;char[]&amp;gt;(20);\n    p2[0] = &amp;#39;h&amp;#39;;\n    p2[19] = &amp;#39;\\0&amp;#39;;\n}\n\nC++20 éƒ¨åˆ†çš„ä»£ç ç›®å‰æµ‹ä¸‹æ¥åªæœ‰ GCC å·²ç»æ”¯æŒã€‚\n\næ³¨æ„ï¼Œoperator[] åªå¯¹æ•°ç»„ç±»å‹çš„ shared_ptr æœ‰æ•ˆï¼šåªèƒ½ç”¨äº shared_ptr&amp;lt;char[]&amp;gt;ï¼Œä¸èƒ½ç”¨äº shared_ptr&amp;lt;char&amp;gt;ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583029587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167289,"user_name":"talor","can_delete":false,"product_type":"c1","uid":1350638,"ip_address":"","ucode":"245EE908DA39EC","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/ee/211e86cd.jpg","comment_is_top":false,"comment_ctime":1577756901,"is_pvip":false,"replies":[{"id":64994,"content":"è¿™ä¸ªæ–¹æ³•æ­£å¸¸æ¥è¯´æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºæ‹·è´æ„é€ ä¸è¯¥ç¢° other çš„å†…å®¹çš„ã€‚ç¢°åˆ° auto_ptr è¿™æ ·çš„å¥‡æ€ªç±»å°±ä¸è¡Œäº†ã€‚è¿™ä¹Ÿæ˜¯ auto_ptr è¢«å¹²æ‰çš„åŸå› ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577801830,"ip_address":"","comment_id":167289,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œåœ¨ä¸Šé¢çš„å®ç°operator=æ—¶ä½¿ç”¨äº†æ‹·è´å’Œäº¤æ¢ï¼Œå½“æ‹·è´æ„é€ å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼Œthiså¯¹è±¡æ²¡æœ‰è¢«ç ´åï¼Œä½†æ˜¯otherå¯¹è±¡å¯èƒ½å·²ç»è¢«æ”¹å˜äº†ï¼Œè¿™æ ·æ˜¯å¦ä¹Ÿä¸æ˜¯å¼‚å¸¸å®‰å…¨çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480334,"discussion_content":"å°±é \n\nptr_ = other.ptr_;\n\nè¿™å¥ã€‚int* æ˜¯ä¸èƒ½ç›´æ¥èµ‹å€¼ç»™ä¸€ä¸ª double* çš„å˜é‡çš„ã€‚\n\nè¿™å„¿è‡ªåŠ¨è½¬æ¢æ­£å¥½å¸®å¿™ï¼Œå› ä¸º circle* æ˜¯å¯ä»¥èµ‹å€¼ç»™ shape* çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578225723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1316662,"avatar":"https://static001.geekbang.org/account/avatar/00/14/17/36/3d8e86e6.jpg","nickname":"åˆ˜å¾·èª","note":"","ucode":"2968605D077072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":119736,"discussion_content":"æ˜ç™½äº†ã€‚è°¢è°¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578236056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165230,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1577183929,"is_pvip":false,"replies":[{"id":62990,"content":"ä½ ä¸èƒ½æ‹¿ç€ goto çš„ç¼–ç¨‹æ€ç»´æ¥çœ‹å¾…ç»“æ„åŒ–ç¼–ç¨‹ã€‚è¦æ‰¾å‡ºæ›´é«˜å±‚çš„æŠ½è±¡ã€‚\n\nä½ çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘å®Œå…¨çœ‹ä¸å‡ºæŒ‡é’ˆå˜é‡çš„å¿…è¦æ€§ã€‚æˆ‘çœ‹åˆ°çš„æ˜¯ä¸¤ä¸ªæ½œåœ¨å‡½æ•°çš„å¯èƒ½æ€§ï¼šdo_work(int&amp;) å’Œ do_something_else(int&amp;)ã€‚\n\nä½ çš„ç¬¬äºŒä¸ªä¾‹å­æœ‰ç”Ÿå‘½æœŸç®¡ç†çš„æ··ä¹±ï¼šå¦‚æœä½ èµ‹ç»™shared_ptrï¼Œä½ æœ‰å…¶ä»–çš„ delete è¯­å¥å—ï¼Ÿä½ èƒ½æ‰‹å·¥è·Ÿè¸ªå¾—æ¸…æ¯ä¸ªå¯¹è±¡çš„ç”Ÿå‘½æœŸå—ï¼Ÿshared_ptr ä¸å…è®¸è¿™æ ·çš„èµ‹å€¼ï¼Œä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢æ„å¤–å¯¼è‡´çš„é”™è¯¯ã€‚\n\nè¦ç”¨å¥½æ™ºèƒ½æŒ‡é’ˆï¼Œæœ€åŸºæœ¬çš„ç”¨æ³•å°±æ˜¯ä»£ç é‡Œä¸è¦å‡ºç°è£¸æŒ‡é’ˆï¼Œä¹Ÿä¸è¦å‡ºç° new å’Œ deleteï¼Œé™¤éä½ å¯¹å®ƒä»¬çš„ç”¨æ³•å’Œå‰¯ä½œç”¨å®Œå…¨ç†Ÿç¨”äºå¿ƒã€‚æ‹¿ä½ çš„ä¾‹å­ï¼ˆè™½ç„¶æˆ‘ä¸ç¡®å®šä½ ä¸ºä»€ä¹ˆè¦åœ¨å †ä¸Šåˆ†é…å¯¹è±¡ï¼‰ï¼Œåº”è¯¥å†™æˆï¼š\n\nauto test_a = make_shared&lt;int&gt;();\n&#47;&#47; æˆ–ç³Ÿç‚¹çš„å†™æ³• auto test_a = shared_ptr&lt;int&gt;(new int);\nauto test_b = make_shared&lt;int&gt;();\nauto int_ptr = test_a;\nint_ptr = test_b;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577190472,"ip_address":"","comment_id":165230,"utype":1}],"discussion_count":6,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘è¿˜æ˜¯å¯¹æ™ºèƒ½æŒ‡é’ˆä¸€å¯¹å¤šçš„æƒ…å†µæœ‰äº›ç–‘æƒ‘ï¼š\n1. æ™®é€šæŒ‡é’ˆ\n    int a = 1, b = 1;\n    int *base;\n    base = &amp;a;\n    {\n&#47;&#47;        Do some work...\n    }\n    base = &amp;b;\n    {\n&#47;&#47;        Do some work...\n    }\n2. æ™ºèƒ½æŒ‡é’ˆ\n    int *test_a = new int;\n    int *test_b = new int;\n\n    shared_ptr&lt;int&gt; int_ptr(test_a);\n    int_ptr = test_b;\né—®é¢˜ï¼šç¬¬1ç§æƒ…å†µï¼Œä½¿ç”¨æ™®é€šæŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥è®©baseæŒ‡é’ˆæŒ‡å‘ä¸åŒçš„åœ°å€ï¼Œä½†æ˜¯æˆ‘åœ¨ç¬¬2ç§æƒ…å†µä¸­ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªåŠ¨æ€å†…å­˜çš„æ—¶å€™ï¼Œå´æŠ¥é”™ï¼šâ€œerror: no match for â€˜operator=â€™ (operand types are â€˜std::shared_ptr&lt;int&gt;â€™ and â€˜int*â€™)â€","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479084,"discussion_content":"ä½ ä¸èƒ½æ‹¿ç€ goto çš„ç¼–ç¨‹æ€ç»´æ¥çœ‹å¾…ç»“æ„åŒ–ç¼–ç¨‹ã€‚è¦æ‰¾å‡ºæ›´é«˜å±‚çš„æŠ½è±¡ã€‚\n\nä½ çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘å®Œå…¨çœ‹ä¸å‡ºæŒ‡é’ˆå˜é‡çš„å¿…è¦æ€§ã€‚æˆ‘çœ‹åˆ°çš„æ˜¯ä¸¤ä¸ªæ½œåœ¨å‡½æ•°çš„å¯èƒ½æ€§ï¼šdo_work(int&amp;amp;) å’Œ do_something_else(int&amp;amp;)ã€‚\n\nä½ çš„ç¬¬äºŒä¸ªä¾‹å­æœ‰ç”Ÿå‘½æœŸç®¡ç†çš„æ··ä¹±ï¼šå¦‚æœä½ èµ‹ç»™shared_ptrï¼Œä½ æœ‰å…¶ä»–çš„ delete è¯­å¥å—ï¼Ÿä½ èƒ½æ‰‹å·¥è·Ÿè¸ªå¾—æ¸…æ¯ä¸ªå¯¹è±¡çš„ç”Ÿå‘½æœŸå—ï¼Ÿshared_ptr ä¸å…è®¸è¿™æ ·çš„èµ‹å€¼ï¼Œä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢æ„å¤–å¯¼è‡´çš„é”™è¯¯ã€‚\n\nè¦ç”¨å¥½æ™ºèƒ½æŒ‡é’ˆï¼Œæœ€åŸºæœ¬çš„ç”¨æ³•å°±æ˜¯ä»£ç é‡Œä¸è¦å‡ºç°è£¸æŒ‡é’ˆï¼Œä¹Ÿä¸è¦å‡ºç° new å’Œ deleteï¼Œé™¤éä½ å¯¹å®ƒä»¬çš„ç”¨æ³•å’Œå‰¯ä½œç”¨å®Œå…¨ç†Ÿç¨”äºå¿ƒã€‚æ‹¿ä½ çš„ä¾‹å­ï¼ˆè™½ç„¶æˆ‘ä¸ç¡®å®šä½ ä¸ºä»€ä¹ˆè¦åœ¨å †ä¸Šåˆ†é…å¯¹è±¡ï¼‰ï¼Œåº”è¯¥å†™æˆï¼š\n\nauto test_a = make_shared&amp;lt;int&amp;gt;();\n// æˆ–ç³Ÿç‚¹çš„å†™æ³• auto test_a = shared_ptr&amp;lt;int&amp;gt;(new int);\nauto test_b = make_shared&amp;lt;int&amp;gt;();\nauto int_ptr = test_a;\nint_ptr = test_b;","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577190472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98992,"discussion_content":"æœå˜ï¼Œæ˜ç™½äº†ã€‚\nè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577193246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98982,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆçš„å›å¤ï¼Œæˆ‘åªæ˜¯ä¸¾ä¸ªä¾‹å­ã€‚æ²¡æœ‰è€ƒè™‘å…¶ä»–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577193076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98743,"discussion_content":"æ™ºèƒ½æŒ‡é’ˆæ‹·è´æ„é€ å‡½æ•°æˆ–è€…èµ‹å€¼å‡½æ•°ä»¥åŠç§»åŠ¨è¯­ä¹‰ä¸­éƒ½ä»ç„¶éœ€è¦shared_ptrç±»çš„å¯¹è±¡ï¼Œæˆ‘è¿™é‡Œç›´æ¥æ˜¯åŠ¨æ€å†…å­˜åœ°å€ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ç¼–è¯‘å‡ºé”™ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘æƒ³å®ç°ç±»ä¼¼çš„æ„æ€æ€ä¹ˆåŠåˆ°å‘€ï¼Ÿ\nè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577184498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":99242,"discussion_content":"å·²ç»è¯´äº†ä¸è¦è£¸æŒ‡é’ˆäº†å‘€ã€‚è¦ä¹ˆä½¿ç”¨å¼•ç”¨ï¼Œè¡¨ç¤ºä¸å¤„ç†ç”Ÿå‘½å‘¨æœŸï¼Œè¦ä¹ˆä½¿ç”¨ unique_ptr æˆ– shared_ptrã€‚å°±æ˜¯è¦è¿«ä½¿ä½ æƒ³æ˜ç™½ç”Ÿå‘½å‘¨æœŸã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577197738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":98743,"ip_address":"","group_id":0},"score":99242,"extra":""},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":100261,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢å´è€å¸ˆè€å¿ƒè®²è§£ğŸ˜ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577245312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":99242,"ip_address":"","group_id":0},"score":100261,"extra":""}]}]},{"had_liked":false,"id":162378,"user_name":"Geek_b68b74","can_delete":false,"product_type":"c1","uid":1780585,"ip_address":"","ucode":"7CB026A020D513","user_header":"","comment_is_top":false,"comment_ctime":1576506681,"is_pvip":false,"replies":[{"id":61794,"content":"å¦‚æœå­¦C++è¿˜ä¸å¾ˆä¹…ï¼Œå¯ä»¥å…ˆè¯»äº›å…¶ä»–ä¹¦æ¸©ä¹ åŸºç¡€çŸ¥è¯†ï¼ˆæ¯”å¦‚C++ä¹‹çˆ¶çš„ã€ŠC++è¯­è¨€å¯¼å­¦ã€‹ï¼‰ã€‚æˆ‘å¯¹ä½ äº†è§£ä»€ä¹ˆæœ‰ä¸€å®šé¢„è®¾çš„ï¼Œå¯èƒ½åˆ¤æ–­ä¸é‚£ä¹ˆå‡†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576544875,"ip_address":"","comment_id":162378,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"ç¬¬ä¸€è®²çœ‹äº†å‡ éæ‰æ˜ç™½ï¼Œç¬¬äºŒè®²ç›´æ¥æ‡µé€¼äº†ã€‚ã€‚ã€‚éå¸¸æœ‰æ·±åº¦çš„ä¸“æ ï¼Œæˆ‘å†å¤šçœ‹å‡ é","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478034,"discussion_content":"å¦‚æœå­¦C++è¿˜ä¸å¾ˆä¹…ï¼Œå¯ä»¥å…ˆè¯»äº›å…¶ä»–ä¹¦æ¸©ä¹ åŸºç¡€çŸ¥è¯†ï¼ˆæ¯”å¦‚C++ä¹‹çˆ¶çš„ã€ŠC++è¯­è¨€å¯¼å­¦ã€‹ï¼‰ã€‚æˆ‘å¯¹ä½ äº†è§£ä»€ä¹ˆæœ‰ä¸€å®šé¢„è®¾çš„ï¼Œå¯èƒ½åˆ¤æ–­ä¸é‚£ä¹ˆå‡†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576544875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158446,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1575372233,"is_pvip":false,"replies":[{"id":60646,"content":"æ‹·è´æ„é€ æ—¶ï¼Œè€çš„å¯¹è±¡éƒ½è¿˜æ²¡ç”Ÿæˆå‘¢ï¼Œå“ªæœ‰æ–°è€çš„æ¯”è¾ƒï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575378293,"ip_address":"","comment_id":158446,"utype":1}],"discussion_count":3,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œæœ‰ä¸ªç–‘æƒ‘ï¼Œçœ‹ä¹Ÿæœ‰åŒå­¦é—®åˆ°è¿™é‡Œï¼Œè®²smart_ptrçš„æ—¶å€™ï¼Œæ„Ÿè§‰èµ‹å€¼æ“ä½œæœ‰ç‰¹åˆ«è€ƒè™‘this ï¼ï¼&amp;rhs çš„æƒ…å†µï¼Œä½†æ˜¯æ‹·è´æ„é€ å¥½åƒæ²¡æœ‰ç‰¹åˆ«è€ƒè™‘ï¼Œè¿™æ˜¯åŸºäºä»€ä¹ˆåŸå› ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476727,"discussion_content":"æ‹·è´æ„é€ æ—¶ï¼Œè€çš„å¯¹è±¡éƒ½è¿˜æ²¡ç”Ÿæˆå‘¢ï¼Œå“ªæœ‰æ–°è€çš„æ¯”è¾ƒï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575378293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":99469,"discussion_content":"æ²¡æ‰¾åˆ°é‚£ä¸ªé—®é¢˜å’Œç­”å¤ã€‚æ³›æ³›è€Œè¨€ï¼Œè‡ªæ£€æŸ¥æ˜¯æ€•èµ‹å€¼æ—¶è¦æŠŠåŸæœ‰çš„å†…å®¹æ¸…é™¤ï¼Œå†æŠŠæ–°çš„å†…å®¹æ”¾è¿›æ¥ï¼Œè¿™æ ·ä¸æ£€æŸ¥è‡ªèµ‹å€¼å°±ä¼šå‡ºé—®é¢˜ã€‚æˆ‘æ€»ä½“ä¸Šé‡‡ç”¨å¼‚å¸¸å®‰å…¨çš„åšæ³•ï¼Œæ€»æ˜¯å…ˆèµ‹å€¼ï¼ŒæˆåŠŸåå†é‡Šæ”¾éœ€è¦é‡Šæ”¾çš„èµ„æºï¼Œè¿™æ ·å°±ä¸éœ€è¦æ£€æŸ¥è‡ªèµ‹å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577200144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1490070,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","nickname":"æ€»ç»Ÿè€å”","note":"","ucode":"F2CC66E5BB4871","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71390,"discussion_content":"å—¯ï¼Œç¡®å®æ˜¯è¿™æ ·ã€‚ä¸è¿‡ï¼Œæœ‰åŒå­¦æŒ‡å‡ºï¼Œèµ‹å€¼æ“ä½œåº”è¯¥ä¹Ÿä¸ç”¨è€ƒè™‘ä¸¤è€…ç›¸ç­‰çš„æƒ…å†µï¼Œä½ çš„ç­”å¤æ˜¯â€œè‹¥åªè€ƒè™‘unique_ptrï¼Œç¡®å®æ˜¯æ²¡æœ‰é—®é¢˜çš„â€ï¼Œä½†æ˜¯ä½ é‡‡ç”¨çš„å…ˆæ„é€ ä¸€ä¸ªä¸´æ—¶å˜é‡çš„æ–¹å¼ï¼Œå®é™…ä¸Šå®ç°çš„ä¹Ÿæ˜¯unique_ptrçš„è¡Œä¸ºï¼Œå’Œé‡‡ç”¨releaseçš„æ–¹å¼å¥½åƒæ¯”å¹¶æ²¡æœ‰åŒºåˆ«ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦åœ¨è¿™é‡Œå¼•å…¥è¿™ç§æ–¹å¼ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575418688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157589,"user_name":"èŠ±æ™¨å°‘å¹´","can_delete":false,"product_type":"c1","uid":1098987,"ip_address":"","ucode":"6AA3537A6BA10E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","comment_is_top":false,"comment_ctime":1575205416,"is_pvip":false,"replies":[{"id":60430,"content":"swapä¸åˆ¤æ–­çš„ã€‚ç›®å‰çš„å†™æ³•ä¿è¯äº†this == &amp;rhsä¸ä¼šæœ‰é—®é¢˜ã€‚\n\nå½“ä½ çš„å¯¹è±¡æœ‰å¤šä¸ªæˆå‘˜ï¼Œèµ‹å€¼åˆ°ç¬¬äºŒä¸ªæˆå‘˜æ—¶å‘ç”Ÿäº†å¼‚å¸¸ã€‚æƒ³æƒ³è¿™ç§æƒ…å†µä¸‹çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575210518,"ip_address":"","comment_id":157589,"utype":1}],"discussion_count":6,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"å¦‚æœä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äº if (this != &amp;rhs) çš„åˆ¤æ–­çš„è¯ï¼Œé‚£ç§ç”¨æ³•æ›´å•°å—¦ï¼Œè€Œä¸”å¼‚å¸¸å®‰å…¨æ€§ä¸å¤Ÿå¥½â€”â€”å¦‚æœåœ¨èµ‹å€¼è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡çš„å†…å®¹å¯èƒ½å·²ç»è¢«éƒ¨åˆ†ç ´åäº†ï¼Œå¯¹è±¡ä¸å†å¤„äºä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€ã€‚\nâ€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”\næ–‡ä¸­è¿™å¥è¯ä¸å¤ªç†è§£ï¼Œå¦‚æœä¸åšè¿™ä¸ªåˆ¤æ–­ï¼Œswapå†…éƒ¨åº”è¯¥æœ‰åˆ¤æ–­ã€‚\nä½†æ˜¯å¹¶æ²¡æœ‰æƒ³æ˜ç™½å¼‚å¸¸å®‰å…¨æ€§æ€ä¹ˆä¸å¥½äº†ï¼Œæ„Ÿè§‰å’Œä¸åŠ è¿™ä¸ªåˆ¤æ–­æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œèµ‹å€¼è¿‡ç¨‹åº”è¯¥æ˜¯åœ¨è¿™å¥åˆ¤æ–­ä»£ç çš„ä¸‹æ–¹åšï¼Œæ‰€ä»¥è¿™å¥ä»£ç æ‰§è¡Œæ—¶ï¼Œå¯¹è±¡ä¹Ÿæ²¡æœ‰ä¸å®Œæ•´ã€‚","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70821,"discussion_content":"ä¸æ˜¯è¯´è¿™ä¸ªä¾‹å­ä¼šå‡ºå…ˆé—®é¢˜ï¼Œè€Œæ˜¯é€šç”¨è€Œè¨€ï¼Œè¿™ç§æ–¹å¼å¯èƒ½å‡ºé—®é¢˜ã€‚\n\nå¦‚ï¼š\n\nclass A {\npublic:\n  A&amp; operator=(const A&amp;);\nprivate:\n  B b_;\n  C* c_;\n};\n\nA&amp; A::operator(const A&amp; rhs)\n{\n  if (this == &amp;rhs) {\n    return;\n  }\n  b_ = rhs.b_;\n  c_ = new C(*rhs.c_);\n}\n\nå¦‚æœåœ¨ä¸Šé¢æœ€åä¸€è¡Œæœ‰æ•ˆä»£ç å¤„å‡ºç°å¼‚å¸¸ï¼Œé‚£ this çš„çŠ¶æ€å°±å¾ˆå¥‡æ€ªï¼Œå¤´æ¢æˆäº†åˆ«äººï¼ˆrhsï¼‰çš„ï¼Œèº«ä½“è¿˜æ˜¯è‡ªå·±çš„ã€‚\n\næˆ‘è¯´çš„æ–¹æ³•å°±æ˜¯ä¸€å¾‹ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æ¥æ„é€ æ–°å¯¹è±¡ï¼Œç„¶åä½¿ç”¨æ— å¼‚å¸¸çš„ swap æ¥è·å¾—æ–°å¯¹è±¡ã€‚è¿™æ ·ï¼Œthis è¦ä¹ˆä¸å˜ï¼Œè¦ä¹ˆæˆä¸ºå…¨æ–°çš„ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1575381516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1098987,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","nickname":"èŠ±æ™¨å°‘å¹´","note":"","ucode":"6AA3537A6BA10E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":70914,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œäº†è§£äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575383154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70821,"ip_address":"","group_id":0},"score":70914,"extra":""},{"author":{"id":2181930,"avatar":"https://static001.geekbang.org/account/avatar/00/21/4b/2a/4602363c.jpg","nickname":"é«˜å°é«˜","note":"","ucode":"6F7D31403EE67A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":321479,"discussion_content":"è€å¸ˆï¼Œè¯·é—®swapæ˜¯æ€ä¹ˆä¿è¯æ— å¼‚å¸¸çš„å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604585523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70821,"ip_address":"","group_id":0},"score":321479,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2181930,"avatar":"https://static001.geekbang.org/account/avatar/00/21/4b/2a/4602363c.jpg","nickname":"é«˜å°é«˜","note":"","ucode":"6F7D31403EE67A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321855,"discussion_content":"å…ˆæ‹·è´æ„é€ ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¦‚æœå‡ºç°å¼‚å¸¸åˆ™å½“å‰å¯¹è±¡å®Œå…¨ä¸å˜ã€‚å¦‚æœæ²¡é—®é¢˜ï¼Œåˆ™è¿›è¡Œä¸€ä¸ªæ— å¼‚å¸¸çš„äº¤æ¢æ“ä½œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604640362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":321479,"ip_address":"","group_id":0},"score":321855,"extra":""}]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476476,"discussion_content":"swapä¸åˆ¤æ–­çš„ã€‚ç›®å‰çš„å†™æ³•ä¿è¯äº†this == &amp;amp;rhsä¸ä¼šæœ‰é—®é¢˜ã€‚\n\nå½“ä½ çš„å¯¹è±¡æœ‰å¤šä¸ªæˆå‘˜ï¼Œèµ‹å€¼åˆ°ç¬¬äºŒä¸ªæˆå‘˜æ—¶å‘ç”Ÿäº†å¼‚å¸¸ã€‚æƒ³æƒ³è¿™ç§æƒ…å†µä¸‹çš„ç»“æœã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575210518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1098987,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","nickname":"èŠ±æ™¨å°‘å¹´","note":"","ucode":"6AA3537A6BA10E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69252,"discussion_content":"å“ˆï¼Œè¿˜æ˜¯ä¸å¤ªæ‡‚ï¼Œè€å¸ˆè§è°….\nsmart_ptr&amp; operator=(smart_ptr rhs) noexcept {\nif (this != &amp;rhs) { //ååŠ ä¸Šçš„åˆ¤æ–­ //@1\n rhs.swap(*this); \n}\n return *this; \n}\n\nvoid swap(smart_ptr&amp; rhs) noexcept { \n\tusing std::swap;\n\tswap(ptr_, rhs.ptr_);\n\tswap(shared_count_, rhs.shared_count_);//@2\n }\n\n@1åŠ ä¸Šåˆ¤æ–­ä¹‹åï¼Œé™¤äº†ä»£ç ç¹çä¹‹å¤–ï¼Œä¸ºä»€ä¹ˆä¼šå½±å“å¼‚å¸¸çš„å®Œæ•´æ€§ã€‚\nå¦‚æœåœ¨@2å¤„å‡ºç°å¼‚å¸¸ï¼Œå¯¹è±¡ä¸ä¹Ÿæ˜¯ä¸å®Œæ•´çš„å—ï¼Œæ„Ÿè§‰åŠ ä¸åŠ åˆ¤æ–­ï¼Œå¹¶æ²¡æœ‰ä»»ä½•å½±å“ã€‚\nå¦å¤–å¦‚æœä¸åŠ åˆ¤æ–­ï¼Œæ˜¯æ€ä¹ˆç¡®ä¿&#34;this == &amp;rhs&#34;ä¸ä¼šæœ‰é—®é¢˜çš„å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575275885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157222,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1575087122,"is_pvip":false,"replies":[{"id":60315,"content":"ä¸æ˜¯ã€‚å†æƒ³æƒ³ã€‚æŒ‰ä½ çš„å†™æ³•ï¼ŒthisæŒ‡å‘çš„å¯¹è±¡å°±è¢«ä¼ åˆ°rhsæ¥æ‹¥æœ‰äº†ã€‚è¿™ä¸æ˜¯=å¸Œæœ›åšçš„äº‹æƒ…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575108262,"ip_address":"","comment_id":157222,"utype":1}],"discussion_count":4,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"smart_ptr&amp; operator=(smart_ptr&amp; rhs) \n {    smart_ptr(rhs).swap(*this);    return *this;  }\n\nrhs æœ¬èº«å°±æ˜¯smart_ptrçš„å·¦å€¼å¼•ç”¨äº†ï¼Œ\nåœ¨å‡½æ•°é¢˜é‡Œsmart_ptr(rhs), \nè²Œä¼¼åº”è¯¥æ˜¯rhs.swap(*thisï¼‰ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476366,"discussion_content":"ä¸æ˜¯ã€‚å†æƒ³æƒ³ã€‚æŒ‰ä½ çš„å†™æ³•ï¼ŒthisæŒ‡å‘çš„å¯¹è±¡å°±è¢«ä¼ åˆ°rhsæ¥æ‹¥æœ‰äº†ã€‚è¿™ä¸æ˜¯=å¸Œæœ›åšçš„äº‹æƒ…ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575108262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67172,"discussion_content":"èµ‹å€¼æ“ä½œå¸Œæœ›åšçš„äº‹æƒ…ä¹‹ä¸€æ˜¯è¦å°†rhsæç©ºï¼Œå¯¹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575124312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67627,"discussion_content":"å¯¹ï¼Œæç©ºrhsã€‚thisåŸæœ¬æŒæœ‰çš„å†…å®¹ç«‹å³é‡Šæ”¾ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1575162449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":67172,"ip_address":"","group_id":0},"score":67627,"extra":""},{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":67642,"discussion_content":"éå¸¸æ„Ÿè°¢ï¼\n\nä¹‹å‰æ²¡æœ‰æ­£ç¡®çš„æ¶ˆåŒ–è¿™å¥è¯\nâ€œ åœ¨èµ‹å€¼å‡½æ•°ä¸­ï¼Œåˆ™é€šè¿‡æ‹·è´æ„é€ äº§ç”Ÿä¸€ä¸ªä¸´æ—¶å¯¹è±¡å¹¶è°ƒç”¨ swap æ¥äº¤æ¢å¯¹æŒ‡é’ˆçš„æ‰€æœ‰æƒã€‚â€\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575163389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":67627,"ip_address":"","group_id":0},"score":67642,"extra":""}]}]},{"had_liked":false,"id":156614,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574923611,"is_pvip":false,"replies":[{"id":60160,"content":"çœ‹æ¥æˆ‘çš„éš¾åº¦æŠŠæ§è¿˜ä¸å¤Ÿå¥½ã€‚å¯ä»¥æœ‰ç‚¹ä¸æ±‚ç”šè§£ã€‚å…ˆä½“ä¼šä¸€ä¸‹ã€‚ç­‰ä¸“æ ç»“æŸäº†ï¼Œå›è¿‡æ¥å†çœ‹ä¸€éï¼Œä¹Ÿè®¸å°±éå¸¸æ¸…æ¥šäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574949140,"ip_address":"","comment_id":156614,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100040501,"comment_content":"çœ‹åˆ°è¯„è®ºåœˆ å¥½å¤šäººéƒ½è¯´çœ‹ä¸æ‡‚  æˆ‘çš„å¿ƒè‚Œæ¢—å¡ç®—æ˜¯ç¼“è§£äº† æˆ‘ä¹Ÿå¥½åƒåŠ›å•Š ä¸è¿‡åœ¨è¿™ä¸€èŠ‚äº†æˆ‘å€’æ˜¯æƒ³åˆ°äº†å¦‚ä¸‹çŸ¥è¯†ç‚¹\n1. æ‹·è´æ„é€  èµ‹å€¼æ„é€  è¿˜æœ‰ä»æœªæ¥è§¦è¿‡çš„ç§»åŠ¨æ„é€ \n2. å„ç§ç±»å‹è½¬æ¢\n3. æ“ä½œç¬¦çš„é‡è½½","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476169,"discussion_content":"çœ‹æ¥æˆ‘çš„éš¾åº¦æŠŠæ§è¿˜ä¸å¤Ÿå¥½ã€‚å¯ä»¥æœ‰ç‚¹ä¸æ±‚ç”šè§£ã€‚å…ˆä½“ä¼šä¸€ä¸‹ã€‚ç­‰ä¸“æ ç»“æŸäº†ï¼Œå›è¿‡æ¥å†çœ‹ä¸€éï¼Œä¹Ÿè®¸å°±éå¸¸æ¸…æ¥šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574949140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1236766,"avatar":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","nickname":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","note":"","ucode":"103543D6E706BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64512,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆï¼Œè¿™ä¹Ÿæ˜¯è®©æˆ‘æŸ¥æ¼è¡¥ç¼ºçš„å¥½æœºä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574949867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393523,"user_name":"Mattrach","can_delete":false,"product_type":"c1","uid":3948439,"ip_address":"ç¦å»º","ucode":"D530826D02FA1E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","comment_is_top":false,"comment_ctime":1724123363,"is_pvip":false,"replies":[{"id":142931,"content":"1. ç¬¬ä¸€ç§å½¢å¼æ˜¯ä¸€èˆ¬è¯´çš„æ‹·è´æ„é€ å‡½æ•°ï¼›æ¨¡æ¿å½¢å¼çš„æ„é€ å‡½æ•°ä¸è¢«çœ‹ä½œæ‹·è´æ„é€ å‡½æ•°ï¼Œå› æ­¤ä¸èƒ½æ›¿ä»£æ‹·è´æ„é€ å‡½æ•°â€”â€”ä¸æä¾›çš„è¯ï¼Œç¼–è¯‘å™¨å°†ä¼šé»˜è®¤æä¾›ä¸€ä¸ªï¼ˆé”™è¯¯çš„ï¼‰ç‰ˆæœ¬ã€‚å…¶ä½™é—®é¢˜çš„å›ç­”éƒ½æ˜¯æ˜¯çš„ã€‚\n\n2. ç”¨äº† 14 æ ‡å‡†ï¼Ÿå¦‚æœç”¨ 17 æ ‡å‡†çš„è¯ï¼Œåº”è¯¥åªæœ‰æ‹·è´æ„é€ è€Œæ²¡æœ‰ç§»åŠ¨æ„é€ ã€‚C++17 æœ‰â€œæ‹·è´æ¶ˆé™¤â€ï¼Œå¯ä»¥ä¼˜åŒ–æ‰ä¸å¿…è¦çš„æ‹·è´æˆ–ç§»åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1724335731,"ip_address":"ä¸Šæµ·","comment_id":393523,"utype":1}],"discussion_count":4,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ‰å‡ ç‚¹ç–‘é—®æƒ³è¯·æ•™ä¸€ä¸‹ï¼š\n1ã€ä¸¤ç§æ‹·è´æ„é€ smart_ptr(const smart_ptr&amp; other)å’Œsmart_ptr(const smart_ptr&lt;U&gt;&amp; other)åªæ˜¯ä¸ºäº†è§£å†³ä¸åŒç±»å‹æ¨¡æ¿å‚æ•°ä¹‹é—´çš„è½¬åŒ–å—ï¼Ÿæ¯”å¦‚smart_ptr&lt;circle&gt;åˆ°smart_ptr&lt;shape&gt;ï¼Ÿè¿™ä¸ªç±»å‹è½¬æ¢çš„æˆåŠŸä¸å¦æ˜¯åœ¨äºåº•å±‚çš„æŒ‡é’ˆèƒ½å¤Ÿç›¸äº’è½¬æ¢å—ï¼Ÿæ¯”å¦‚smart_ptr&lt;circle&gt;å’Œsmart_ptr&lt;triangle&gt;ä¹‹é—´æ— æ³•ç›¸äº’è½¬æ¢æ˜¯å› ä¸ºcircleå’Œtriangleæœ¬èº«å°±æ— æ³•ç›¸äº’è½¬æ¢ï¼Ÿ\n2ã€æˆ‘åœ¨â€œå¼•ç”¨è®¡æ•°â€ä¸€èŠ‚æµ‹è¯•ä»£ç çš„æ„é€ å‡½æ•°ä¸­ï¼Œæ·»åŠ äº†æ‰“å°ï¼Œå½“æ‰§è¡Œåˆ°ptr2 = ptr1;è¯­å¥æ—¶ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n```\nuse cout of ptr2 was 0\næ¨¡æ¿æ‹·è´æ„é€ \næ¨¡æ¿ç§»åŠ¨æ„é€ \næ‹·è´èµ‹å€¼\nuse count of ptr2 is now 2\n```\nè¯·é—®è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸ºä»€ä¹ˆä¼šè°ƒç”¨æ¨¡æ¿ç§»åŠ¨æ„é€ ï¼Ÿ\næ„Ÿè°¢è€å¸ˆè§£ç­”ï¼","like_count":0},{"had_liked":false,"id":392845,"user_name":"Tiger","can_delete":false,"product_type":"c1","uid":1903781,"ip_address":"é‡åº†","ucode":"BFD74BFE539A8A","user_header":"https://static001.geekbang.org/account/avatar/00/1d/0c/a5/0bbfd5e7.jpg","comment_is_top":false,"comment_ctime":1721921713,"is_pvip":false,"replies":[{"id":142828,"content":"ä½ å†™é”™äº†å§â€¦â€¦æˆ‘åªæœ‰ smart_ptr(smart_ptr&lt;U&gt;&amp;&amp;) è¿™æ ·çš„å‡½æ•°ï¼Œå¯æ²¡æœ‰ smart_ptr(const smart_ptr&lt;U&gt;&amp;&amp;)ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1723345351,"ip_address":"ä¸Šæµ·","comment_id":392845,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"æˆ‘åœ¨æµ‹è¯•æ–‡ç« ä¸­ç»™å‡ºçš„ä»£ç æ—¶å‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼Œè¯·é—®è€å¸ˆæ˜¯æ€ä¹ˆå›äº‹\nn file included from 2.cpp:1:\n2.h: In instantiation of â€˜smart_ptr&lt;T&gt;::smart_ptr(const smart_ptr&lt;U&gt;&amp;&amp;) [with U = shape; T = shape]â€™:\n2.cpp:27:12:   required from here\n2.h:80:24: error: assignment of member â€˜smart_ptr&lt;shape&gt;::ptr_â€™ in read-only object\n   80 |             other.ptr_ = nullptr;\n      |             ~~~~~~~~~~~^~~~~~~~~\n2.h: In instantiation of â€˜smart_ptr&lt;T&gt;::smart_ptr(const smart_ptr&lt;U&gt;&amp;&amp;) [with U = circle; T = circle]â€™:\n2.cpp:35:63:   required from here\n2.h:80:24: error: assignment of member â€˜smart_ptr&lt;circle&gt;::ptr_â€™ in read-only object","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649416,"discussion_content":"ä½ å†™é”™äº†å§â€¦â€¦æˆ‘åªæœ‰ smart_ptr(smart_ptr&lt;U&gt;&amp;&amp;) è¿™æ ·çš„å‡½æ•°ï¼Œå¯æ²¡æœ‰ smart_ptr(const smart_ptr&lt;U&gt;&amp;&amp;)ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1723345352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391095,"user_name":"å¤æ•°","can_delete":false,"product_type":"c1","uid":1235194,"ip_address":"å±±è¥¿","ucode":"459FAA2E9D348F","user_header":"https://static001.geekbang.org/account/avatar/00/12/d8/fa/7e47dc06.jpg","comment_is_top":false,"comment_ctime":1717316509,"is_pvip":false,"replies":[{"id":142273,"content":"(1) ä¸€å®¶ä¹‹è¨€ã€‚swap æˆå‘˜å‡½æ•°è‡ªå·±è°ƒèµ·æ¥å¾ˆæ–¹ä¾¿ã€‚ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„ç¼ºç‚¹ã€‚\n\n(2) å¯¹äºé¢å‘å¯¹è±¡çš„ç»§æ‰¿æ ‘çš„éå¶å­ç»“ç‚¹ï¼Œé€šå¸¸æ‹·è´æ„é€ å‡½æ•°åº”è¯¥å£°æ˜ä¸º protectedï¼Œèµ‹å€¼å‡½æ•°ç”šè‡³å¯ä»¥ç›´æ¥åˆ é™¤ï¼Œé˜²æ­¢åˆ«äººç”¨åŸºç±»çš„å¼•ç”¨æ¥æ‰§è¡Œå¯èƒ½å‘ç”Ÿåˆ‡ç‰‡çš„åŠ¨ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1717648574,"ip_address":"ä¸Šæµ·","comment_id":391095,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ã€‚\næˆ‘æœ‰ä¸¤ä¸ªé—®é¢˜\nï¼ˆ1ï¼‰æˆ‘çœ‹æ‚¨çš„ä»£ç é‡Œç»™çš„swapå‡½æ•°æ˜¯smartptrçš„å•å‚æ•°çš„æˆå‘˜å‡½æ•°ã€‚ä½†æ˜¯æˆ‘çœ‹å‚è€ƒèµ„æ–™[1]é‡Œç»™çš„æ˜¯åŒå‚æ•°çš„friend void swap(dumb_array&amp; first, dumb_array&amp; second); è¿™é‡Œæœ‰ä»€ä¹ˆè®²ç©¶å—ï¼Ÿæˆ‘çœ‹è¿™ç¯‡å‚è€ƒèµ„æ–™é‡Œè¿˜æåˆ°å¦ä¸€ç¯‡å›ç­”https:&#47;&#47;stackoverflow.com&#47;questions&#47;5695548&#47;public-friend-swap-member-function \nè¿™ç¯‡å›ç­”é‡Œä¸å»ºè®®ä½¿ç”¨å•å‚æ•°çš„swapæˆå‘˜ã€‚\nï¼ˆ2ï¼‰æˆ‘çœ‹å‚è€ƒèµ„æ–™[1]é‡Œè¿˜æåˆ°äº†å¯ä»¥å¤ç”¨é»˜è®¤æ„é€ å‡½æ•°å†swapæ¥å®ç°ç§»åŠ¨æ„é€ å‡½æ•°ã€‚\n    &#47;&#47; move constructor\n    dumb_array(dumb_array&amp;&amp; other) noexcept â€ â€ \n        : dumb_array() &#47;&#47; initialize via default constructor, C++11 only\n    {\n        swap(*this, other);\n    }\nè¿™ç§æƒ…å†µå¥½åƒæ²¡æ³•å¾ˆå¥½çš„å…¼å®¹å­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢ï¼Œæœ‰ä»€ä¹ˆå¥½æ–¹æ³•å—ï¼Ÿæ¯•ç«Ÿè¿™ç§å¤ç”¨é»˜è®¤æ„é€ å†swapçš„æ–¹å¼æ„Ÿè§‰æŒºä¼˜é›…çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646260,"discussion_content":"(1) ä¸€å®¶ä¹‹è¨€ã€‚swap æˆå‘˜å‡½æ•°è‡ªå·±è°ƒèµ·æ¥å¾ˆæ–¹ä¾¿ã€‚ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„ç¼ºç‚¹ã€‚\n\n(2) å¯¹äºé¢å‘å¯¹è±¡çš„ç»§æ‰¿æ ‘çš„éå¶å­ç»“ç‚¹ï¼Œé€šå¸¸æ‹·è´æ„é€ å‡½æ•°åº”è¯¥å£°æ˜ä¸º protectedï¼Œèµ‹å€¼å‡½æ•°ç”šè‡³å¯ä»¥ç›´æ¥åˆ é™¤ï¼Œé˜²æ­¢åˆ«äººç”¨åŸºç±»çš„å¼•ç”¨æ¥æ‰§è¡Œå¯èƒ½å‘ç”Ÿåˆ‡ç‰‡çš„åŠ¨ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717648574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389948,"user_name":"ä¸€å¿µé€é¥ã€","can_delete":false,"product_type":"c1","uid":1136890,"ip_address":"å±±ä¸œ","ucode":"827A4447D70798","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/fa/6f221fbc.jpg","comment_is_top":false,"comment_ctime":1713953651,"is_pvip":false,"replies":[{"id":141912,"content":"ä¸ä¼šã€‚smart_ptr(rhs) ä¼šæ‹·è´æ„é€ å‡ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç„¶åæ‰æ‰§è¡Œäº¤æ¢ï¼Œä¸éœ€è¦è‡ªæ£€æŸ¥ã€‚ä¸´æ—¶å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œdelete çš„èµ„æºæ˜¯åŸå…ˆ this çš„ï¼Œè€Œ this å¾—åˆ°äº† rhs çš„ä¸€ä¸ªå¤æœ¬ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1714432548,"ip_address":"ä¸Šæµ·","comment_id":389948,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ã€‚\nsmart_ptr(rhs).swap(*this);è¿™å¥ä»£ç åœ¨this=&amp;rhsè¿™ç§æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°å†…å­˜æ³„éœ²é—®é¢˜å§ï¼Ÿå› ä¸ºä¸´æ—¶å¯¹è±¡åœ¨å‡½æ•°è°ƒç”¨ç»“æŸæ—¶ï¼ŒæŒ‡å‘çš„å†…å­˜åŒºåŸŸå°±è¢«é‡Šæ”¾äº†ï¼Œä½†åŒæ—¶è¯¥åŒºåŸŸçš„åœ°å€åˆèµ‹ç»™äº†å¦ä¸€ä¸ªå¯¹è±¡ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":643572,"discussion_content":"ä¸ä¼šã€‚smart_ptr(rhs) ä¼šæ‹·è´æ„é€ å‡ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç„¶åæ‰æ‰§è¡Œäº¤æ¢ï¼Œä¸éœ€è¦è‡ªæ£€æŸ¥ã€‚ä¸´æ—¶å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œdelete çš„èµ„æºæ˜¯åŸå…ˆ this çš„ï¼Œè€Œ this å¾—åˆ°äº† rhs çš„ä¸€ä¸ªå¤æœ¬ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1714432548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388843,"user_name":"Geek_7f372d","can_delete":false,"product_type":"c1","uid":3715138,"ip_address":"æ¹–å—","ucode":"57580354854328","user_header":"","comment_is_top":false,"comment_ctime":1711001982,"is_pvip":false,"replies":[{"id":141562,"content":"æ²¡æœ‰é—®é¢˜ã€‚rhs åœ¨ææ„æ—¶è‡ªåŠ¨é‡Šæ”¾äº†åŸå…ˆçš„å¼•ç”¨è®¡æ•°ï¼ˆå¦‚æœéç©ºçš„è¯ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1711419293,"ip_address":"ä¸Šæµ·","comment_id":388843,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"smart_ptr&amp; operator=(smart_ptr rhs) noexceptï¼Œè¿™ä¸ªèµ‹å€¼æ‹·è´è¿ç®—ç¬¦é‡è½½å‡½æ•°è™½ç„¶å‡½æ•°å‚æ•°è®¾ç½®ä¸ºå€¼ç±»å‹ï¼Œå½“å®å‚ä¸“ä¸ºå½¢å‚æ—¶å›æ‹·è´ä¸€æ¬¡rhså¢åŠ rhsçš„é¥®ç”¨è®¡æ•°ï¼Œä½†æ˜¯å‡½æ•°å®ç°é‡Œå¹¶æ²¡æœ‰å‡å°‘æ­¤æ—¶thisæŒ‡é’ˆæ‰€æŒ‡å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œåªæ˜¯åšäº†swapæ“ä½œã€‚è¿™æ˜¯å¦å­˜åœ¨é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":640332,"discussion_content":"æ²¡æœ‰é—®é¢˜ã€‚rhs åœ¨ææ„æ—¶è‡ªåŠ¨é‡Šæ”¾äº†åŸå…ˆçš„å¼•ç”¨è®¡æ•°ï¼ˆå¦‚æœéç©ºçš„è¯ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1711419293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364520,"user_name":"Cafba","can_delete":false,"product_type":"c1","uid":3018755,"ip_address":"ä¸Šæµ·","ucode":"29BD3BD7143D41","user_header":"","comment_is_top":false,"comment_ctime":1671074252,"is_pvip":false,"replies":[{"id":132535,"content":"ä½ è¯´çš„æ ¹æœ¬æ²¡æœ‰å‘ç”Ÿâ€¦â€¦æ€ä¹ˆå¯èƒ½åˆè°ƒç”¨ç§»åŠ¨æ„é€ åˆè°ƒç”¨æ‹·è´æ„é€ ï¼Ÿè¯·ä»”ç»†æè¿°ä½ è§‚å¯Ÿåˆ°çš„ç°è±¡å’ŒæœŸå¾…çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1671193158,"ip_address":"ä¸Šæµ·","comment_id":364520,"utype":1}],"discussion_count":7,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä¸ºä»€ä¹ˆp2=p1è°ƒç”¨äº†æ‹·è´æ„é€ åè¿˜ä¼šè°ƒç”¨ç§»åŠ¨æ„é€ ï¼Ÿæ˜¯å› ä¸ºp1å·¦å€¼è°ƒç”¨æ‹·è´æ„é€ ç”Ÿæˆä¸´æ—¶å˜é‡ï¼Œä¸´æ—¶å˜é‡å³å€¼è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œä¹‹åæ‰èµ‹å€¼å—ï¼Ÿè¿™æ ·ä¼šä¸ä¼šæ•ˆç‡ä½ï¼Œè°ƒç”¨äº†ä¸¤æ¬¡","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596694,"discussion_content":"ä½ è¯´çš„æ ¹æœ¬æ²¡æœ‰å‘ç”Ÿâ€¦â€¦æ€ä¹ˆå¯èƒ½åˆè°ƒç”¨ç§»åŠ¨æ„é€ åˆè°ƒç”¨æ‹·è´æ„é€ ï¼Ÿè¯·ä»”ç»†æè¿°ä½ è§‚å¯Ÿåˆ°çš„ç°è±¡å’ŒæœŸå¾…çš„ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671193158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":6,"child_discussions":[{"author":{"id":3018755,"avatar":"","nickname":"Cafba","note":"","ucode":"29BD3BD7143D41","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":596766,"discussion_content":"æˆ‘è‡ªå·±è¯•æ˜¯è¿™æ ·çš„\nåœ¨è¿™è®²çš„æµ‹è¯•ç”¨ä¾‹é‡Œåœ¨p2=p1å¤„æ‰“æ–­ç‚¹è°ƒè¯•ï¼Œå…ˆè°ƒç”¨æ³›å‹çš„æ‹·è´æ„é€ ä¹‹åè°ƒç”¨æ³›å‹çš„ç§»åŠ¨æ„é€ \nä½†å¦‚æœå†åŠ ä¸Šéæ³›å‹çš„ç§»åŠ¨æ„é€ ï¼Œå°±åªä¼šè°ƒç”¨æ³›å‹çš„æ‹·è´æ„é€ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671205961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":596694,"ip_address":"ç”˜è‚ƒ","group_id":0},"score":596766,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":3018755,"avatar":"","nickname":"Cafba","note":"","ucode":"29BD3BD7143D41","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597022,"discussion_content":"å“ˆï¼Œè¿™ä¸ªæ„æ€å•Šã€‚\n\nç¬¬ä¸€ä¸ªâ€œæ‹·è´æ„é€ â€ä¸æ˜¯çœŸæ­£çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œæœ€å¥½çœ‹æˆæ™®é€šçš„æ„é€ å‡½æ•°ï¼Œé€šè¿‡ circle æ™ºèƒ½æŒ‡é’ˆæ„é€ å‡º shape çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä¸¤è€…ç±»å‹ä¸åŒã€‚ç„¶åæ‹¿è¿™ä¸ªå³å€¼æ™ºèƒ½æŒ‡é’ˆå»è°ƒç”¨ smart_ptr::operator=(smart_ptr)ï¼Œè‡ªç„¶å°±å¯ä»¥è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°äº†ã€‚\n\nsmart_ptr&lt;shape&gt;::operator(smart_ptr) è¦æ±‚å‚æ•°æ˜¯ smart_ptr&lt;shape&gt;ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šå¯»æ‰¾ä¸€ä¸ªå¯è¡Œçš„è½¬æ¢ã€‚é‚£ä¸ªæ³›å‹çš„â€œæ‹·è´â€æ„é€ å‡½æ•°å®é™…æ˜¯ä¸€ä¸ªè½¬æ¢æ„é€ å‡½æ•°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1671364978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":596766,"ip_address":"ä¸Šæµ·","group_id":0},"score":597022,"extra":""},{"author":{"id":3018755,"avatar":"","nickname":"Cafba","note":"","ucode":"29BD3BD7143D41","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":597032,"discussion_content":"è°¢è°¢è€å¸ˆçš„è§£ç­”ï¼Œå°±æ˜¯ç±»å‹ä¸åŒä¹‹é—´è‚¯å®šä¼šè°ƒç”¨æ‹·è´æ„é€ å¹¶è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œé‚£æä¸æä¾›éæ³›å‹çš„ç§»åŠ¨æ„é€ æ˜¯ä¸æ˜¯æ²¡æœ‰å¥½åä¹‹åˆ†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671374823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":597022,"ip_address":"ç”˜è‚ƒ","group_id":0},"score":597032,"extra":""}]}]},{"had_liked":false,"id":360395,"user_name":"zero","can_delete":false,"product_type":"c1","uid":1619178,"ip_address":"ä¸Šæµ·","ucode":"ACF20F9BE5B69C","user_header":"https://static001.geekbang.org/account/avatar/00/18/b4/ea/98e4b16b.jpg","comment_is_top":false,"comment_ctime":1666536968,"is_pvip":false,"replies":[{"id":131316,"content":"ç¡®å®æ²¡æœ‰æä¾›ä¸¥æ ¼çš„ç‰¹æ®Šéé™æ€æˆå‘˜å‡½æ•°å½¢å¼çš„ç§»åŠ¨æ„é€ å‡½æ•°ã€‚æ¨¡æ¿å½¢å¼çš„ smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) å°±è¶³å¤Ÿäº†ã€‚è·Ÿæ‹·è´æ„é€ å‡½æ•°ä¸åŒï¼Œç§»åŠ¨æ„é€ å‡½æ•°ä¸ä¼šé»˜è®¤æä¾›ï¼Œå› æ­¤ç¼–è¯‘å™¨åœ¨æ²¡æœ‰æ‰¾åˆ°ç‰¹æ®Šå½¢å¼çš„ç§»åŠ¨æ„é€ å‡½æ•°æ—¶ï¼Œä¼šåœ¨éœ€è¦ç§»åŠ¨æ„é€ æ—¶ä½¿ç”¨ä¸Šé¢çš„è¿™ä¸ªå‡½æ•°æ¨¡æ¿ã€‚\n\nä½†è¦æ³¨æ„ä¸Šé¢è¿™ä¸ªä¸æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼ˆè½¬å‘å¼•ç”¨ï¼‰ï¼Œè€Œæ˜¯å³å€¼å¼•ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1667056483,"ip_address":"ä¸Šæµ·","comment_id":360395,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"æ€ä¹ˆshared_ptræ„Ÿè§‰æ²¡æœ‰æä¾›ç§»åŠ¨æ„é€ å‡½æ•°ï¼Ÿ å› ä¸ºâ€œæ¨¡æ¿å‚æ•°smart_ptr&lt;U&lt;&amp;&amp;æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼Œæ—¢å¯ä»¥å¼•ç”¨å·¦å€¼ï¼Œåˆå¯ä»¥å¼•ç”¨å³å€¼â€","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596694,"discussion_content":"ä½ è¯´çš„æ ¹æœ¬æ²¡æœ‰å‘ç”Ÿâ€¦â€¦æ€ä¹ˆå¯èƒ½åˆè°ƒç”¨ç§»åŠ¨æ„é€ åˆè°ƒç”¨æ‹·è´æ„é€ ï¼Ÿè¯·ä»”ç»†æè¿°ä½ è§‚å¯Ÿåˆ°çš„ç°è±¡å’ŒæœŸå¾…çš„ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671193158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":6,"child_discussions":[{"author":{"id":3018755,"avatar":"","nickname":"Cafba","note":"","ucode":"29BD3BD7143D41","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":596766,"discussion_content":"æˆ‘è‡ªå·±è¯•æ˜¯è¿™æ ·çš„\nåœ¨è¿™è®²çš„æµ‹è¯•ç”¨ä¾‹é‡Œåœ¨p2=p1å¤„æ‰“æ–­ç‚¹è°ƒè¯•ï¼Œå…ˆè°ƒç”¨æ³›å‹çš„æ‹·è´æ„é€ ä¹‹åè°ƒç”¨æ³›å‹çš„ç§»åŠ¨æ„é€ \nä½†å¦‚æœå†åŠ ä¸Šéæ³›å‹çš„ç§»åŠ¨æ„é€ ï¼Œå°±åªä¼šè°ƒç”¨æ³›å‹çš„æ‹·è´æ„é€ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671205961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":596694,"ip_address":"ç”˜è‚ƒ","group_id":0},"score":596766,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":3018755,"avatar":"","nickname":"Cafba","note":"","ucode":"29BD3BD7143D41","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597022,"discussion_content":"å“ˆï¼Œè¿™ä¸ªæ„æ€å•Šã€‚\n\nç¬¬ä¸€ä¸ªâ€œæ‹·è´æ„é€ â€ä¸æ˜¯çœŸæ­£çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œæœ€å¥½çœ‹æˆæ™®é€šçš„æ„é€ å‡½æ•°ï¼Œé€šè¿‡ circle æ™ºèƒ½æŒ‡é’ˆæ„é€ å‡º shape çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä¸¤è€…ç±»å‹ä¸åŒã€‚ç„¶åæ‹¿è¿™ä¸ªå³å€¼æ™ºèƒ½æŒ‡é’ˆå»è°ƒç”¨ smart_ptr::operator=(smart_ptr)ï¼Œè‡ªç„¶å°±å¯ä»¥è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°äº†ã€‚\n\nsmart_ptr&lt;shape&gt;::operator(smart_ptr) è¦æ±‚å‚æ•°æ˜¯ smart_ptr&lt;shape&gt;ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šå¯»æ‰¾ä¸€ä¸ªå¯è¡Œçš„è½¬æ¢ã€‚é‚£ä¸ªæ³›å‹çš„â€œæ‹·è´â€æ„é€ å‡½æ•°å®é™…æ˜¯ä¸€ä¸ªè½¬æ¢æ„é€ å‡½æ•°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1671364978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":596766,"ip_address":"ä¸Šæµ·","group_id":0},"score":597022,"extra":""},{"author":{"id":3018755,"avatar":"","nickname":"Cafba","note":"","ucode":"29BD3BD7143D41","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":597032,"discussion_content":"è°¢è°¢è€å¸ˆçš„è§£ç­”ï¼Œå°±æ˜¯ç±»å‹ä¸åŒä¹‹é—´è‚¯å®šä¼šè°ƒç”¨æ‹·è´æ„é€ å¹¶è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œé‚£æä¸æä¾›éæ³›å‹çš„ç§»åŠ¨æ„é€ æ˜¯ä¸æ˜¯æ²¡æœ‰å¥½åä¹‹åˆ†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671374823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":597022,"ip_address":"ç”˜è‚ƒ","group_id":0},"score":597032,"extra":""}]}]},{"had_liked":false,"id":357996,"user_name":"èµµä¸½å°äººå„¿","can_delete":false,"product_type":"c1","uid":1326753,"ip_address":"ä¸Šæµ·","ucode":"467C89A1181DF5","user_header":"https://static001.geekbang.org/account/avatar/00/14/3e/a1/b58baa6d.jpg","comment_is_top":false,"comment_ctime":1663823853,"is_pvip":false,"replies":[{"id":130354,"content":"æé€šäº†åé¢å°±è½»æ¾äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1664032159,"ip_address":"ä¸Šæµ·","comment_id":357996,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"çœ‹çš„æŒºåƒåŠ›çš„ï¼Œæ„Ÿè§‰è‡ªå·±ä¸ä¼šc++äº†","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592069,"discussion_content":"ç¡®å®æ²¡æœ‰æä¾›ä¸¥æ ¼çš„ç‰¹æ®Šéé™æ€æˆå‘˜å‡½æ•°å½¢å¼çš„ç§»åŠ¨æ„é€ å‡½æ•°ã€‚æ¨¡æ¿å½¢å¼çš„ smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) å°±è¶³å¤Ÿäº†ã€‚è·Ÿæ‹·è´æ„é€ å‡½æ•°ä¸åŒï¼Œç§»åŠ¨æ„é€ å‡½æ•°ä¸ä¼šé»˜è®¤æä¾›ï¼Œå› æ­¤ç¼–è¯‘å™¨åœ¨æ²¡æœ‰æ‰¾åˆ°ç‰¹æ®Šå½¢å¼çš„ç§»åŠ¨æ„é€ å‡½æ•°æ—¶ï¼Œä¼šåœ¨éœ€è¦ç§»åŠ¨æ„é€ æ—¶ä½¿ç”¨ä¸Šé¢çš„è¿™ä¸ªå‡½æ•°æ¨¡æ¿ã€‚\n\nä½†è¦æ³¨æ„ä¸Šé¢è¿™ä¸ªä¸æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼ˆè½¬å‘å¼•ç”¨ï¼‰ï¼Œè€Œæ˜¯å³å€¼å¼•ç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1667056483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357444,"user_name":"wd_8277","can_delete":false,"product_type":"c1","uid":2496848,"ip_address":"ä¸Šæµ·","ucode":"0824A12B5C8BCA","user_header":"","comment_is_top":false,"comment_ctime":1663256477,"is_pvip":false,"replies":[{"id":130161,"content":"ä¸æ˜¯ã€‚\n\næ‹¿ https:&#47;&#47;github.com&#47;adah1972&#47;geek_time_cpp&#47;tree&#47;master&#47;common ä¸‹çš„ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ï¼Œæˆ‘æ²¡å‘ç°æœ‰è¿™ä¸ªé—®é¢˜ã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n#include &lt;iostream&gt;\n#include &quot;shape.h&quot;\n#include &quot;smart_ptr.h&quot;\n\nint main()\n{\n    smart_ptr&lt;circle&gt; ptr1(new circle());\n    smart_ptr&lt;circle&gt; ptr2;\n    ptr2 = ptr1;\n    std::cout &lt;&lt; ptr2.use_count() &lt;&lt; std::endl;\n}\n\nå¦‚æœä»£ç æ˜¯ä½ æ‰‹æ•²çš„ï¼Œåƒæ˜¯æ¼äº†éæ¨¡æ¿å½¢å¼çš„æ‹·è´æ„é€ å‡½æ•°ã€‚å°‘äº†å°±ä¼šå‡ºç°ä½ æè¿°çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1663477850,"ip_address":"ä¸Šæµ·","comment_id":357444,"utype":1}],"discussion_count":2,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘å‘ç°å› ä¸º\tsmart_ptr&lt;circle&gt; ptr1(new circle());\n\tsmart_ptr&lt;circle&gt; ptr2;  \n\tptr2 = ptr1;  å’Œ smart_ptr&lt;circle&gt; ptr1(new circle());\n\tsmart_ptr&lt;shape&gt; ptr2;  \n\tptr2 = ptr1;ç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰è€…ä¼šè¿›å…¥æ‹·è´æ„é€ ï¼Œè®¡æ•°ä¸ä¼šåŠ 1ï¼Œåè€…ä¼šå¼ºè½¬ï¼Œè®¡æ•°åŠ 1ï¼ŒSTLçš„è¡Œä¸ºæ˜¯ä¸¤è€…éƒ½ä¼šåŠ 1ã€‚è¿™æ˜¯æœ‰æ„è€Œä¸ºä¹‹å—ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588735,"discussion_content":"æé€šäº†åé¢å°±è½»æ¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664032159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347686,"user_name":"Cafba","can_delete":false,"product_type":"c1","uid":3018755,"ip_address":"","ucode":"29BD3BD7143D41","user_header":"","comment_is_top":false,"comment_ctime":1654312690,"is_pvip":false,"replies":[{"id":126776,"content":"ä¼ ç»Ÿçš„åšæ³•æ˜¯æ‰‹å·¥æ£€æŸ¥ã€åˆ é™¤æ—§å¯¹è±¡å’Œç§»å…¥æ–°å†…å®¹ã€‚æˆ‘ç”¨çš„æ˜¯æ‹·è´åŠ äº¤æ¢çš„æƒ¯ç”¨æ³•ã€‚æ–‡ä¸­å·²ç»æ˜ç¡®å†™äº†ï¼š\n\nâ€œä¸Šé¢ä»£ç é‡Œçš„è¿™ç§æƒ¯ç”¨æ³•ï¼ˆè§å‚è€ƒèµ„æ–™ [1]ï¼‰åˆ™ä¿è¯äº†å¼ºå¼‚å¸¸å®‰å…¨æ€§ï¼šèµ‹å€¼åˆ†ä¸ºæ‹·è´æ„é€ å’Œäº¤æ¢ä¸¤æ­¥ï¼Œå¼‚å¸¸åªå¯èƒ½åœ¨ç¬¬ä¸€æ­¥å‘ç”Ÿï¼›è€Œç¬¬ä¸€æ­¥å¦‚æœå‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡å®Œå…¨ä¸å—ä»»ä½•å½±å“ã€‚æ— è®ºæ‹·è´æ„é€ æˆåŠŸä¸å¦ï¼Œç»“æœåªæœ‰èµ‹å€¼æˆåŠŸå’Œèµ‹å€¼æ²¡æœ‰æ•ˆæœä¸¤ç§çŠ¶æ€ï¼Œè€Œä¸ä¼šå‘ç”Ÿå› ä¸ºèµ‹å€¼ç ´åäº†å½“å‰å¯¹è±¡è¿™ç§åœºæ™¯ã€‚â€\n\nè¿™æ˜¯ä¸€ç§å®ç°èµ‹å€¼è¿ç®—ç¬¦çš„ç®€å•æ–¹æ³•ï¼Œç”¨ä¸€ä¸ªå‡½æ•°æ¥åŒæ—¶å®ç°æ‹·è´èµ‹å€¼å’Œç§»åŠ¨èµ‹å€¼ï¼Œè¿˜ä¸ç”¨è‡ªå·±å»å†™å…·ä½“çš„é€»è¾‘ã€‚å½“ç„¶ï¼Œä»æ€§èƒ½ä¸Šæ¥è®²ï¼Œå®ƒå¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„ã€‚å¦‚æœä½ éœ€è¦èµ‹å€¼çš„æ€§èƒ½å¾ˆé«˜ï¼Œå¯èƒ½è¦é¢å¤–è¿›è¡Œä¼˜åŒ–ã€‚ä½†è¿™ç§å†™æ³•è‡³å°‘æ˜¯ç§å¾ˆå¥½çš„é»˜è®¤åšæ³•ï¼šç®€å•ã€‚åº”è¯¥å¾ˆå°‘ç¨‹åºç“¶é¢ˆä¼šå‡ºç°åœ¨èµ‹å€¼æ“ä½œä¸Šã€‚\n\nå½“ç„¶ï¼Œå¯¹äºå®ç°åº•å±‚åŸºç¡€åº“çš„äººæ¥è¯´ï¼Œç»å¸¸è¿˜æ˜¯éœ€è¦æ–¤æ–¤è®¡è¾ƒçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1654425735,"ip_address":"","comment_id":347686,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œæˆ‘åœ¨More effectiveçœ‹åˆ°çš„å®ç°é‡Œæœ‰èµ‹å€¼å‰åˆ é™¤å½“å‰æŒ‡é’ˆçš„æ“ä½œï¼Œè€Œä½ å†™çš„çš„æ˜¯ä¸æ˜¯åªæ˜¯äº¤æ¢äº†å½“å‰æŒ‡é’ˆï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢\n\ntemplate&lt;class T&gt;&#47;&#47; assignment operator \nauto_ptr&lt;T&gt;&amp; auto_ptr&lt;T&gt;::operator=(auto_ptr&lt;T&gt;&amp; rhs) {\n\tif(this == &amp;rhs) return *this;&#47;&#47;å¦‚æœè‡ªå·±èµ‹å€¼ç»™è‡ªå·±ï¼Œä¸åšä»»ä½•äº‹æƒ…\n\tdelete pointee;&#47;&#47;åˆ é™¤ç›®å‰æ‹¥æœ‰ä¹‹ç‰©ã€‚ \n\tpointee = rhs.pointee;&#47;&#47;å°†ï¼Špointee çš„æ‹¥æœ‰æƒç§»è½¬ç»™ï¼Šthisã€‚ \n\trhs.pointee = 0;&#47;&#47;rhs ä¸å†æ‹¥æœ‰ä»»ä½•ä¸œè¥¿ã€‚ \n\treturn * this;\n}","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588031,"discussion_content":"ä¸æ˜¯ã€‚\n\næ‹¿ https://github.com/adah1972/geek_time_cpp/tree/master/common ä¸‹çš„ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ï¼Œæˆ‘æ²¡å‘ç°æœ‰è¿™ä¸ªé—®é¢˜ã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n#include &lt;iostream&gt;\n#include &#34;shape.h&#34;\n#include &#34;smart_ptr.h&#34;\n\nint main()\n{\n    smart_ptr&lt;circle&gt; ptr1(new circle());\n    smart_ptr&lt;circle&gt; ptr2;\n    ptr2 = ptr1;\n    std::cout &lt;&lt; ptr2.use_count() &lt;&lt; std::endl;\n}\n\nå¦‚æœä»£ç æ˜¯ä½ æ‰‹æ•²çš„ï¼Œåƒæ˜¯æ¼äº†éæ¨¡æ¿å½¢å¼çš„æ‹·è´æ„é€ å‡½æ•°ã€‚å°‘äº†å°±ä¼šå‡ºç°ä½ æè¿°çš„ç»“æœã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1663477850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2496848,"avatar":"","nickname":"wd_8277","note":"","ucode":"0824A12B5C8BCA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588035,"discussion_content":"ç¡®å®æ˜¯æ¼äº†éæ¨¡æ¿å½¢å¼çš„æ‹·è´æ„é€ ğŸ¤£è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663482211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393523,"user_name":"Mattrach","can_delete":false,"product_type":"c1","uid":3948439,"ip_address":"ç¦å»º","ucode":"D530826D02FA1E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","comment_is_top":false,"comment_ctime":1724123363,"is_pvip":false,"replies":[{"id":142931,"content":"1. ç¬¬ä¸€ç§å½¢å¼æ˜¯ä¸€èˆ¬è¯´çš„æ‹·è´æ„é€ å‡½æ•°ï¼›æ¨¡æ¿å½¢å¼çš„æ„é€ å‡½æ•°ä¸è¢«çœ‹ä½œæ‹·è´æ„é€ å‡½æ•°ï¼Œå› æ­¤ä¸èƒ½æ›¿ä»£æ‹·è´æ„é€ å‡½æ•°â€”â€”ä¸æä¾›çš„è¯ï¼Œç¼–è¯‘å™¨å°†ä¼šé»˜è®¤æä¾›ä¸€ä¸ªï¼ˆé”™è¯¯çš„ï¼‰ç‰ˆæœ¬ã€‚å…¶ä½™é—®é¢˜çš„å›ç­”éƒ½æ˜¯æ˜¯çš„ã€‚\n\n2. ç”¨äº† 14 æ ‡å‡†ï¼Ÿå¦‚æœç”¨ 17 æ ‡å‡†çš„è¯ï¼Œåº”è¯¥åªæœ‰æ‹·è´æ„é€ è€Œæ²¡æœ‰ç§»åŠ¨æ„é€ ã€‚C++17 æœ‰â€œæ‹·è´æ¶ˆé™¤â€ï¼Œå¯ä»¥ä¼˜åŒ–æ‰ä¸å¿…è¦çš„æ‹·è´æˆ–ç§»åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1724335731,"ip_address":"ä¸Šæµ·","comment_id":393523,"utype":1}],"discussion_count":4,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ‰å‡ ç‚¹ç–‘é—®æƒ³è¯·æ•™ä¸€ä¸‹ï¼š\n1ã€ä¸¤ç§æ‹·è´æ„é€ smart_ptr(const smart_ptr&amp; other)å’Œsmart_ptr(const smart_ptr&lt;U&gt;&amp; other)åªæ˜¯ä¸ºäº†è§£å†³ä¸åŒç±»å‹æ¨¡æ¿å‚æ•°ä¹‹é—´çš„è½¬åŒ–å—ï¼Ÿæ¯”å¦‚smart_ptr&lt;circle&gt;åˆ°smart_ptr&lt;shape&gt;ï¼Ÿè¿™ä¸ªç±»å‹è½¬æ¢çš„æˆåŠŸä¸å¦æ˜¯åœ¨äºåº•å±‚çš„æŒ‡é’ˆèƒ½å¤Ÿç›¸äº’è½¬æ¢å—ï¼Ÿæ¯”å¦‚smart_ptr&lt;circle&gt;å’Œsmart_ptr&lt;triangle&gt;ä¹‹é—´æ— æ³•ç›¸äº’è½¬æ¢æ˜¯å› ä¸ºcircleå’Œtriangleæœ¬èº«å°±æ— æ³•ç›¸äº’è½¬æ¢ï¼Ÿ\n2ã€æˆ‘åœ¨â€œå¼•ç”¨è®¡æ•°â€ä¸€èŠ‚æµ‹è¯•ä»£ç çš„æ„é€ å‡½æ•°ä¸­ï¼Œæ·»åŠ äº†æ‰“å°ï¼Œå½“æ‰§è¡Œåˆ°ptr2 = ptr1;è¯­å¥æ—¶ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n```\nuse cout of ptr2 was 0\næ¨¡æ¿æ‹·è´æ„é€ \næ¨¡æ¿ç§»åŠ¨æ„é€ \næ‹·è´èµ‹å€¼\nuse count of ptr2 is now 2\n```\nè¯·é—®è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸ºä»€ä¹ˆä¼šè°ƒç”¨æ¨¡æ¿ç§»åŠ¨æ„é€ ï¼Ÿ\næ„Ÿè°¢è€å¸ˆè§£ç­”ï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650080,"discussion_content":"1. ç¬¬ä¸€ç§å½¢å¼æ˜¯ä¸€èˆ¬è¯´çš„æ‹·è´æ„é€ å‡½æ•°ï¼›æ¨¡æ¿å½¢å¼çš„æ„é€ å‡½æ•°ä¸è¢«çœ‹ä½œæ‹·è´æ„é€ å‡½æ•°ï¼Œå› æ­¤ä¸èƒ½æ›¿ä»£æ‹·è´æ„é€ å‡½æ•°â€”â€”ä¸æä¾›çš„è¯ï¼Œç¼–è¯‘å™¨å°†ä¼šé»˜è®¤æä¾›ä¸€ä¸ªï¼ˆé”™è¯¯çš„ï¼‰ç‰ˆæœ¬ã€‚å…¶ä½™é—®é¢˜çš„å›ç­”éƒ½æ˜¯æ˜¯çš„ã€‚\n\n2. ç”¨äº† 14 æ ‡å‡†ï¼Ÿå¦‚æœç”¨ 17 æ ‡å‡†çš„è¯ï¼Œåº”è¯¥åªæœ‰æ‹·è´æ„é€ è€Œæ²¡æœ‰ç§»åŠ¨æ„é€ ã€‚C++17 æœ‰â€œæ‹·è´æ¶ˆé™¤â€ï¼Œå¯ä»¥ä¼˜åŒ–æ‰ä¸å¿…è¦çš„æ‹·è´æˆ–ç§»åŠ¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1724335732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":3948439,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","nickname":"Mattrach","note":"","ucode":"D530826D02FA1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":650174,"discussion_content":"æ˜ç™½äº†ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724501140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":650080,"ip_address":"ç¦å»º","group_id":0},"score":650174,"extra":""}]},{"author":{"id":3948439,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","nickname":"Mattrach","note":"","ucode":"D530826D02FA1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649916,"discussion_content":"ç¼–è¯‘å™¨ä½¿ç”¨g++ï¼ŒæŒ‡å®š--std=c++11æ—¶å‡ºç°â€œæ¨¡æ¿ç§»åŠ¨æ„é€ â€ï¼Œä½†æŒ‡å®š--std=c++17æ—¶ï¼Œä¸ä¼šå‡ºç°â€œæ¨¡æ¿ç§»åŠ¨æ„é€ â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724141574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":3948439,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","nickname":"Mattrach","note":"","ucode":"D530826D02FA1E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650114,"discussion_content":"å—¯ï¼Œç¬¦åˆé¢„æœŸã€‚æœç´¢â€œæ‹·è´æ¶ˆé™¤â€â€œcopy elisionâ€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1724381371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":649916,"ip_address":"ä¸Šæµ·","group_id":0},"score":650114,"extra":""}]}]},{"had_liked":false,"id":392845,"user_name":"Tiger","can_delete":false,"product_type":"c1","uid":1903781,"ip_address":"é‡åº†","ucode":"BFD74BFE539A8A","user_header":"https://static001.geekbang.org/account/avatar/00/1d/0c/a5/0bbfd5e7.jpg","comment_is_top":false,"comment_ctime":1721921713,"is_pvip":false,"replies":[{"id":142828,"content":"ä½ å†™é”™äº†å§â€¦â€¦æˆ‘åªæœ‰ smart_ptr(smart_ptr&lt;U&gt;&amp;&amp;) è¿™æ ·çš„å‡½æ•°ï¼Œå¯æ²¡æœ‰ smart_ptr(const smart_ptr&lt;U&gt;&amp;&amp;)ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1723345351,"ip_address":"ä¸Šæµ·","comment_id":392845,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"æˆ‘åœ¨æµ‹è¯•æ–‡ç« ä¸­ç»™å‡ºçš„ä»£ç æ—¶å‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼Œè¯·é—®è€å¸ˆæ˜¯æ€ä¹ˆå›äº‹\nn file included from 2.cpp:1:\n2.h: In instantiation of â€˜smart_ptr&lt;T&gt;::smart_ptr(const smart_ptr&lt;U&gt;&amp;&amp;) [with U = shape; T = shape]â€™:\n2.cpp:27:12:   required from here\n2.h:80:24: error: assignment of member â€˜smart_ptr&lt;shape&gt;::ptr_â€™ in read-only object\n   80 |             other.ptr_ = nullptr;\n      |             ~~~~~~~~~~~^~~~~~~~~\n2.h: In instantiation of â€˜smart_ptr&lt;T&gt;::smart_ptr(const smart_ptr&lt;U&gt;&amp;&amp;) [with U = circle; T = circle]â€™:\n2.cpp:35:63:   required from here\n2.h:80:24: error: assignment of member â€˜smart_ptr&lt;circle&gt;::ptr_â€™ in read-only object","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650080,"discussion_content":"1. ç¬¬ä¸€ç§å½¢å¼æ˜¯ä¸€èˆ¬è¯´çš„æ‹·è´æ„é€ å‡½æ•°ï¼›æ¨¡æ¿å½¢å¼çš„æ„é€ å‡½æ•°ä¸è¢«çœ‹ä½œæ‹·è´æ„é€ å‡½æ•°ï¼Œå› æ­¤ä¸èƒ½æ›¿ä»£æ‹·è´æ„é€ å‡½æ•°â€”â€”ä¸æä¾›çš„è¯ï¼Œç¼–è¯‘å™¨å°†ä¼šé»˜è®¤æä¾›ä¸€ä¸ªï¼ˆé”™è¯¯çš„ï¼‰ç‰ˆæœ¬ã€‚å…¶ä½™é—®é¢˜çš„å›ç­”éƒ½æ˜¯æ˜¯çš„ã€‚\n\n2. ç”¨äº† 14 æ ‡å‡†ï¼Ÿå¦‚æœç”¨ 17 æ ‡å‡†çš„è¯ï¼Œåº”è¯¥åªæœ‰æ‹·è´æ„é€ è€Œæ²¡æœ‰ç§»åŠ¨æ„é€ ã€‚C++17 æœ‰â€œæ‹·è´æ¶ˆé™¤â€ï¼Œå¯ä»¥ä¼˜åŒ–æ‰ä¸å¿…è¦çš„æ‹·è´æˆ–ç§»åŠ¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1724335732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":3948439,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","nickname":"Mattrach","note":"","ucode":"D530826D02FA1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":650174,"discussion_content":"æ˜ç™½äº†ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724501140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":650080,"ip_address":"ç¦å»º","group_id":0},"score":650174,"extra":""}]},{"author":{"id":3948439,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","nickname":"Mattrach","note":"","ucode":"D530826D02FA1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649916,"discussion_content":"ç¼–è¯‘å™¨ä½¿ç”¨g++ï¼ŒæŒ‡å®š--std=c++11æ—¶å‡ºç°â€œæ¨¡æ¿ç§»åŠ¨æ„é€ â€ï¼Œä½†æŒ‡å®š--std=c++17æ—¶ï¼Œä¸ä¼šå‡ºç°â€œæ¨¡æ¿ç§»åŠ¨æ„é€ â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724141574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":3948439,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0icYqvY68m60U2qJn7iabqSD4OUvYx2OeiaXA4IqhDia1VNMm3bTGCUaU5J3jbIU1clqCRiap1BubL7g/132","nickname":"Mattrach","note":"","ucode":"D530826D02FA1E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650114,"discussion_content":"å—¯ï¼Œç¬¦åˆé¢„æœŸã€‚æœç´¢â€œæ‹·è´æ¶ˆé™¤â€â€œcopy elisionâ€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1724381371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":649916,"ip_address":"ä¸Šæµ·","group_id":0},"score":650114,"extra":""}]}]},{"had_liked":false,"id":391095,"user_name":"å¤æ•°","can_delete":false,"product_type":"c1","uid":1235194,"ip_address":"å±±è¥¿","ucode":"459FAA2E9D348F","user_header":"https://static001.geekbang.org/account/avatar/00/12/d8/fa/7e47dc06.jpg","comment_is_top":false,"comment_ctime":1717316509,"is_pvip":false,"replies":[{"id":142273,"content":"(1) ä¸€å®¶ä¹‹è¨€ã€‚swap æˆå‘˜å‡½æ•°è‡ªå·±è°ƒèµ·æ¥å¾ˆæ–¹ä¾¿ã€‚ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„ç¼ºç‚¹ã€‚\n\n(2) å¯¹äºé¢å‘å¯¹è±¡çš„ç»§æ‰¿æ ‘çš„éå¶å­ç»“ç‚¹ï¼Œé€šå¸¸æ‹·è´æ„é€ å‡½æ•°åº”è¯¥å£°æ˜ä¸º protectedï¼Œèµ‹å€¼å‡½æ•°ç”šè‡³å¯ä»¥ç›´æ¥åˆ é™¤ï¼Œé˜²æ­¢åˆ«äººç”¨åŸºç±»çš„å¼•ç”¨æ¥æ‰§è¡Œå¯èƒ½å‘ç”Ÿåˆ‡ç‰‡çš„åŠ¨ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1717648574,"ip_address":"ä¸Šæµ·","comment_id":391095,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ã€‚\næˆ‘æœ‰ä¸¤ä¸ªé—®é¢˜\nï¼ˆ1ï¼‰æˆ‘çœ‹æ‚¨çš„ä»£ç é‡Œç»™çš„swapå‡½æ•°æ˜¯smartptrçš„å•å‚æ•°çš„æˆå‘˜å‡½æ•°ã€‚ä½†æ˜¯æˆ‘çœ‹å‚è€ƒèµ„æ–™[1]é‡Œç»™çš„æ˜¯åŒå‚æ•°çš„friend void swap(dumb_array&amp; first, dumb_array&amp; second); è¿™é‡Œæœ‰ä»€ä¹ˆè®²ç©¶å—ï¼Ÿæˆ‘çœ‹è¿™ç¯‡å‚è€ƒèµ„æ–™é‡Œè¿˜æåˆ°å¦ä¸€ç¯‡å›ç­”https:&#47;&#47;stackoverflow.com&#47;questions&#47;5695548&#47;public-friend-swap-member-function \nè¿™ç¯‡å›ç­”é‡Œä¸å»ºè®®ä½¿ç”¨å•å‚æ•°çš„swapæˆå‘˜ã€‚\nï¼ˆ2ï¼‰æˆ‘çœ‹å‚è€ƒèµ„æ–™[1]é‡Œè¿˜æåˆ°äº†å¯ä»¥å¤ç”¨é»˜è®¤æ„é€ å‡½æ•°å†swapæ¥å®ç°ç§»åŠ¨æ„é€ å‡½æ•°ã€‚\n    &#47;&#47; move constructor\n    dumb_array(dumb_array&amp;&amp; other) noexcept â€ â€ \n        : dumb_array() &#47;&#47; initialize via default constructor, C++11 only\n    {\n        swap(*this, other);\n    }\nè¿™ç§æƒ…å†µå¥½åƒæ²¡æ³•å¾ˆå¥½çš„å…¼å®¹å­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢ï¼Œæœ‰ä»€ä¹ˆå¥½æ–¹æ³•å—ï¼Ÿæ¯•ç«Ÿè¿™ç§å¤ç”¨é»˜è®¤æ„é€ å†swapçš„æ–¹å¼æ„Ÿè§‰æŒºä¼˜é›…çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649416,"discussion_content":"ä½ å†™é”™äº†å§â€¦â€¦æˆ‘åªæœ‰ smart_ptr(smart_ptr&lt;U&gt;&amp;&amp;) è¿™æ ·çš„å‡½æ•°ï¼Œå¯æ²¡æœ‰ smart_ptr(const smart_ptr&lt;U&gt;&amp;&amp;)ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1723345352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389948,"user_name":"ä¸€å¿µé€é¥ã€","can_delete":false,"product_type":"c1","uid":1136890,"ip_address":"å±±ä¸œ","ucode":"827A4447D70798","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/fa/6f221fbc.jpg","comment_is_top":false,"comment_ctime":1713953651,"is_pvip":false,"replies":[{"id":141912,"content":"ä¸ä¼šã€‚smart_ptr(rhs) ä¼šæ‹·è´æ„é€ å‡ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç„¶åæ‰æ‰§è¡Œäº¤æ¢ï¼Œä¸éœ€è¦è‡ªæ£€æŸ¥ã€‚ä¸´æ—¶å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œdelete çš„èµ„æºæ˜¯åŸå…ˆ this çš„ï¼Œè€Œ this å¾—åˆ°äº† rhs çš„ä¸€ä¸ªå¤æœ¬ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1714432548,"ip_address":"ä¸Šæµ·","comment_id":389948,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ã€‚\nsmart_ptr(rhs).swap(*this);è¿™å¥ä»£ç åœ¨this=&amp;rhsè¿™ç§æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°å†…å­˜æ³„éœ²é—®é¢˜å§ï¼Ÿå› ä¸ºä¸´æ—¶å¯¹è±¡åœ¨å‡½æ•°è°ƒç”¨ç»“æŸæ—¶ï¼ŒæŒ‡å‘çš„å†…å­˜åŒºåŸŸå°±è¢«é‡Šæ”¾äº†ï¼Œä½†åŒæ—¶è¯¥åŒºåŸŸçš„åœ°å€åˆèµ‹ç»™äº†å¦ä¸€ä¸ªå¯¹è±¡ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646260,"discussion_content":"(1) ä¸€å®¶ä¹‹è¨€ã€‚swap æˆå‘˜å‡½æ•°è‡ªå·±è°ƒèµ·æ¥å¾ˆæ–¹ä¾¿ã€‚ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„ç¼ºç‚¹ã€‚\n\n(2) å¯¹äºé¢å‘å¯¹è±¡çš„ç»§æ‰¿æ ‘çš„éå¶å­ç»“ç‚¹ï¼Œé€šå¸¸æ‹·è´æ„é€ å‡½æ•°åº”è¯¥å£°æ˜ä¸º protectedï¼Œèµ‹å€¼å‡½æ•°ç”šè‡³å¯ä»¥ç›´æ¥åˆ é™¤ï¼Œé˜²æ­¢åˆ«äººç”¨åŸºç±»çš„å¼•ç”¨æ¥æ‰§è¡Œå¯èƒ½å‘ç”Ÿåˆ‡ç‰‡çš„åŠ¨ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717648574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388843,"user_name":"Geek_7f372d","can_delete":false,"product_type":"c1","uid":3715138,"ip_address":"æ¹–å—","ucode":"57580354854328","user_header":"","comment_is_top":false,"comment_ctime":1711001982,"is_pvip":false,"replies":[{"id":141562,"content":"æ²¡æœ‰é—®é¢˜ã€‚rhs åœ¨ææ„æ—¶è‡ªåŠ¨é‡Šæ”¾äº†åŸå…ˆçš„å¼•ç”¨è®¡æ•°ï¼ˆå¦‚æœéç©ºçš„è¯ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1711419293,"ip_address":"ä¸Šæµ·","comment_id":388843,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"smart_ptr&amp; operator=(smart_ptr rhs) noexceptï¼Œè¿™ä¸ªèµ‹å€¼æ‹·è´è¿ç®—ç¬¦é‡è½½å‡½æ•°è™½ç„¶å‡½æ•°å‚æ•°è®¾ç½®ä¸ºå€¼ç±»å‹ï¼Œå½“å®å‚ä¸“ä¸ºå½¢å‚æ—¶å›æ‹·è´ä¸€æ¬¡rhså¢åŠ rhsçš„é¥®ç”¨è®¡æ•°ï¼Œä½†æ˜¯å‡½æ•°å®ç°é‡Œå¹¶æ²¡æœ‰å‡å°‘æ­¤æ—¶thisæŒ‡é’ˆæ‰€æŒ‡å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œåªæ˜¯åšäº†swapæ“ä½œã€‚è¿™æ˜¯å¦å­˜åœ¨é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":643572,"discussion_content":"ä¸ä¼šã€‚smart_ptr(rhs) ä¼šæ‹·è´æ„é€ å‡ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç„¶åæ‰æ‰§è¡Œäº¤æ¢ï¼Œä¸éœ€è¦è‡ªæ£€æŸ¥ã€‚ä¸´æ—¶å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œdelete çš„èµ„æºæ˜¯åŸå…ˆ this çš„ï¼Œè€Œ this å¾—åˆ°äº† rhs çš„ä¸€ä¸ªå¤æœ¬ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1714432548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364520,"user_name":"Cafba","can_delete":false,"product_type":"c1","uid":3018755,"ip_address":"ä¸Šæµ·","ucode":"29BD3BD7143D41","user_header":"","comment_is_top":false,"comment_ctime":1671074252,"is_pvip":false,"replies":[{"id":132535,"content":"ä½ è¯´çš„æ ¹æœ¬æ²¡æœ‰å‘ç”Ÿâ€¦â€¦æ€ä¹ˆå¯èƒ½åˆè°ƒç”¨ç§»åŠ¨æ„é€ åˆè°ƒç”¨æ‹·è´æ„é€ ï¼Ÿè¯·ä»”ç»†æè¿°ä½ è§‚å¯Ÿåˆ°çš„ç°è±¡å’ŒæœŸå¾…çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1671193158,"ip_address":"ä¸Šæµ·","comment_id":364520,"utype":1}],"discussion_count":7,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä¸ºä»€ä¹ˆp2=p1è°ƒç”¨äº†æ‹·è´æ„é€ åè¿˜ä¼šè°ƒç”¨ç§»åŠ¨æ„é€ ï¼Ÿæ˜¯å› ä¸ºp1å·¦å€¼è°ƒç”¨æ‹·è´æ„é€ ç”Ÿæˆä¸´æ—¶å˜é‡ï¼Œä¸´æ—¶å˜é‡å³å€¼è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œä¹‹åæ‰èµ‹å€¼å—ï¼Ÿè¿™æ ·ä¼šä¸ä¼šæ•ˆç‡ä½ï¼Œè°ƒç”¨äº†ä¸¤æ¬¡","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":640332,"discussion_content":"æ²¡æœ‰é—®é¢˜ã€‚rhs åœ¨ææ„æ—¶è‡ªåŠ¨é‡Šæ”¾äº†åŸå…ˆçš„å¼•ç”¨è®¡æ•°ï¼ˆå¦‚æœéç©ºçš„è¯ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1711419293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360395,"user_name":"zero","can_delete":false,"product_type":"c1","uid":1619178,"ip_address":"ä¸Šæµ·","ucode":"ACF20F9BE5B69C","user_header":"https://static001.geekbang.org/account/avatar/00/18/b4/ea/98e4b16b.jpg","comment_is_top":false,"comment_ctime":1666536968,"is_pvip":false,"replies":[{"id":131316,"content":"ç¡®å®æ²¡æœ‰æä¾›ä¸¥æ ¼çš„ç‰¹æ®Šéé™æ€æˆå‘˜å‡½æ•°å½¢å¼çš„ç§»åŠ¨æ„é€ å‡½æ•°ã€‚æ¨¡æ¿å½¢å¼çš„ smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) å°±è¶³å¤Ÿäº†ã€‚è·Ÿæ‹·è´æ„é€ å‡½æ•°ä¸åŒï¼Œç§»åŠ¨æ„é€ å‡½æ•°ä¸ä¼šé»˜è®¤æä¾›ï¼Œå› æ­¤ç¼–è¯‘å™¨åœ¨æ²¡æœ‰æ‰¾åˆ°ç‰¹æ®Šå½¢å¼çš„ç§»åŠ¨æ„é€ å‡½æ•°æ—¶ï¼Œä¼šåœ¨éœ€è¦ç§»åŠ¨æ„é€ æ—¶ä½¿ç”¨ä¸Šé¢çš„è¿™ä¸ªå‡½æ•°æ¨¡æ¿ã€‚\n\nä½†è¦æ³¨æ„ä¸Šé¢è¿™ä¸ªä¸æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼ˆè½¬å‘å¼•ç”¨ï¼‰ï¼Œè€Œæ˜¯å³å€¼å¼•ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1667056483,"ip_address":"ä¸Šæµ·","comment_id":360395,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"æ€ä¹ˆshared_ptræ„Ÿè§‰æ²¡æœ‰æä¾›ç§»åŠ¨æ„é€ å‡½æ•°ï¼Ÿ å› ä¸ºâ€œæ¨¡æ¿å‚æ•°smart_ptr&lt;U&lt;&amp;&amp;æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼Œæ—¢å¯ä»¥å¼•ç”¨å·¦å€¼ï¼Œåˆå¯ä»¥å¼•ç”¨å³å€¼â€","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592069,"discussion_content":"ç¡®å®æ²¡æœ‰æä¾›ä¸¥æ ¼çš„ç‰¹æ®Šéé™æ€æˆå‘˜å‡½æ•°å½¢å¼çš„ç§»åŠ¨æ„é€ å‡½æ•°ã€‚æ¨¡æ¿å½¢å¼çš„ smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) å°±è¶³å¤Ÿäº†ã€‚è·Ÿæ‹·è´æ„é€ å‡½æ•°ä¸åŒï¼Œç§»åŠ¨æ„é€ å‡½æ•°ä¸ä¼šé»˜è®¤æä¾›ï¼Œå› æ­¤ç¼–è¯‘å™¨åœ¨æ²¡æœ‰æ‰¾åˆ°ç‰¹æ®Šå½¢å¼çš„ç§»åŠ¨æ„é€ å‡½æ•°æ—¶ï¼Œä¼šåœ¨éœ€è¦ç§»åŠ¨æ„é€ æ—¶ä½¿ç”¨ä¸Šé¢çš„è¿™ä¸ªå‡½æ•°æ¨¡æ¿ã€‚\n\nä½†è¦æ³¨æ„ä¸Šé¢è¿™ä¸ªä¸æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼ˆè½¬å‘å¼•ç”¨ï¼‰ï¼Œè€Œæ˜¯å³å€¼å¼•ç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1667056483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357996,"user_name":"èµµä¸½å°äººå„¿","can_delete":false,"product_type":"c1","uid":1326753,"ip_address":"ä¸Šæµ·","ucode":"467C89A1181DF5","user_header":"https://static001.geekbang.org/account/avatar/00/14/3e/a1/b58baa6d.jpg","comment_is_top":false,"comment_ctime":1663823853,"is_pvip":false,"replies":[{"id":130354,"content":"æé€šäº†åé¢å°±è½»æ¾äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1664032159,"ip_address":"ä¸Šæµ·","comment_id":357996,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"çœ‹çš„æŒºåƒåŠ›çš„ï¼Œæ„Ÿè§‰è‡ªå·±ä¸ä¼šc++äº†","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588735,"discussion_content":"æé€šäº†åé¢å°±è½»æ¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664032159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357444,"user_name":"wd_8277","can_delete":false,"product_type":"c1","uid":2496848,"ip_address":"ä¸Šæµ·","ucode":"0824A12B5C8BCA","user_header":"","comment_is_top":false,"comment_ctime":1663256477,"is_pvip":false,"replies":[{"id":130161,"content":"ä¸æ˜¯ã€‚\n\næ‹¿ https:&#47;&#47;github.com&#47;adah1972&#47;geek_time_cpp&#47;tree&#47;master&#47;common ä¸‹çš„ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ï¼Œæˆ‘æ²¡å‘ç°æœ‰è¿™ä¸ªé—®é¢˜ã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n#include &lt;iostream&gt;\n#include &quot;shape.h&quot;\n#include &quot;smart_ptr.h&quot;\n\nint main()\n{\n    smart_ptr&lt;circle&gt; ptr1(new circle());\n    smart_ptr&lt;circle&gt; ptr2;\n    ptr2 = ptr1;\n    std::cout &lt;&lt; ptr2.use_count() &lt;&lt; std::endl;\n}\n\nå¦‚æœä»£ç æ˜¯ä½ æ‰‹æ•²çš„ï¼Œåƒæ˜¯æ¼äº†éæ¨¡æ¿å½¢å¼çš„æ‹·è´æ„é€ å‡½æ•°ã€‚å°‘äº†å°±ä¼šå‡ºç°ä½ æè¿°çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1663477850,"ip_address":"ä¸Šæµ·","comment_id":357444,"utype":1}],"discussion_count":2,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘å‘ç°å› ä¸º\tsmart_ptr&lt;circle&gt; ptr1(new circle());\n\tsmart_ptr&lt;circle&gt; ptr2;  \n\tptr2 = ptr1;  å’Œ smart_ptr&lt;circle&gt; ptr1(new circle());\n\tsmart_ptr&lt;shape&gt; ptr2;  \n\tptr2 = ptr1;ç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰è€…ä¼šè¿›å…¥æ‹·è´æ„é€ ï¼Œè®¡æ•°ä¸ä¼šåŠ 1ï¼Œåè€…ä¼šå¼ºè½¬ï¼Œè®¡æ•°åŠ 1ï¼ŒSTLçš„è¡Œä¸ºæ˜¯ä¸¤è€…éƒ½ä¼šåŠ 1ã€‚è¿™æ˜¯æœ‰æ„è€Œä¸ºä¹‹å—ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588031,"discussion_content":"ä¸æ˜¯ã€‚\n\næ‹¿ https://github.com/adah1972/geek_time_cpp/tree/master/common ä¸‹çš„ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ï¼Œæˆ‘æ²¡å‘ç°æœ‰è¿™ä¸ªé—®é¢˜ã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n#include &lt;iostream&gt;\n#include &#34;shape.h&#34;\n#include &#34;smart_ptr.h&#34;\n\nint main()\n{\n    smart_ptr&lt;circle&gt; ptr1(new circle());\n    smart_ptr&lt;circle&gt; ptr2;\n    ptr2 = ptr1;\n    std::cout &lt;&lt; ptr2.use_count() &lt;&lt; std::endl;\n}\n\nå¦‚æœä»£ç æ˜¯ä½ æ‰‹æ•²çš„ï¼Œåƒæ˜¯æ¼äº†éæ¨¡æ¿å½¢å¼çš„æ‹·è´æ„é€ å‡½æ•°ã€‚å°‘äº†å°±ä¼šå‡ºç°ä½ æè¿°çš„ç»“æœã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1663477850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2496848,"avatar":"","nickname":"wd_8277","note":"","ucode":"0824A12B5C8BCA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588035,"discussion_content":"ç¡®å®æ˜¯æ¼äº†éæ¨¡æ¿å½¢å¼çš„æ‹·è´æ„é€ ğŸ¤£è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663482211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347686,"user_name":"Cafba","can_delete":false,"product_type":"c1","uid":3018755,"ip_address":"","ucode":"29BD3BD7143D41","user_header":"","comment_is_top":false,"comment_ctime":1654312690,"is_pvip":false,"replies":[{"id":126776,"content":"ä¼ ç»Ÿçš„åšæ³•æ˜¯æ‰‹å·¥æ£€æŸ¥ã€åˆ é™¤æ—§å¯¹è±¡å’Œç§»å…¥æ–°å†…å®¹ã€‚æˆ‘ç”¨çš„æ˜¯æ‹·è´åŠ äº¤æ¢çš„æƒ¯ç”¨æ³•ã€‚æ–‡ä¸­å·²ç»æ˜ç¡®å†™äº†ï¼š\n\nâ€œä¸Šé¢ä»£ç é‡Œçš„è¿™ç§æƒ¯ç”¨æ³•ï¼ˆè§å‚è€ƒèµ„æ–™ [1]ï¼‰åˆ™ä¿è¯äº†å¼ºå¼‚å¸¸å®‰å…¨æ€§ï¼šèµ‹å€¼åˆ†ä¸ºæ‹·è´æ„é€ å’Œäº¤æ¢ä¸¤æ­¥ï¼Œå¼‚å¸¸åªå¯èƒ½åœ¨ç¬¬ä¸€æ­¥å‘ç”Ÿï¼›è€Œç¬¬ä¸€æ­¥å¦‚æœå‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡å®Œå…¨ä¸å—ä»»ä½•å½±å“ã€‚æ— è®ºæ‹·è´æ„é€ æˆåŠŸä¸å¦ï¼Œç»“æœåªæœ‰èµ‹å€¼æˆåŠŸå’Œèµ‹å€¼æ²¡æœ‰æ•ˆæœä¸¤ç§çŠ¶æ€ï¼Œè€Œä¸ä¼šå‘ç”Ÿå› ä¸ºèµ‹å€¼ç ´åäº†å½“å‰å¯¹è±¡è¿™ç§åœºæ™¯ã€‚â€\n\nè¿™æ˜¯ä¸€ç§å®ç°èµ‹å€¼è¿ç®—ç¬¦çš„ç®€å•æ–¹æ³•ï¼Œç”¨ä¸€ä¸ªå‡½æ•°æ¥åŒæ—¶å®ç°æ‹·è´èµ‹å€¼å’Œç§»åŠ¨èµ‹å€¼ï¼Œè¿˜ä¸ç”¨è‡ªå·±å»å†™å…·ä½“çš„é€»è¾‘ã€‚å½“ç„¶ï¼Œä»æ€§èƒ½ä¸Šæ¥è®²ï¼Œå®ƒå¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„ã€‚å¦‚æœä½ éœ€è¦èµ‹å€¼çš„æ€§èƒ½å¾ˆé«˜ï¼Œå¯èƒ½è¦é¢å¤–è¿›è¡Œä¼˜åŒ–ã€‚ä½†è¿™ç§å†™æ³•è‡³å°‘æ˜¯ç§å¾ˆå¥½çš„é»˜è®¤åšæ³•ï¼šç®€å•ã€‚åº”è¯¥å¾ˆå°‘ç¨‹åºç“¶é¢ˆä¼šå‡ºç°åœ¨èµ‹å€¼æ“ä½œä¸Šã€‚\n\nå½“ç„¶ï¼Œå¯¹äºå®ç°åº•å±‚åŸºç¡€åº“çš„äººæ¥è¯´ï¼Œç»å¸¸è¿˜æ˜¯éœ€è¦æ–¤æ–¤è®¡è¾ƒçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1654425735,"ip_address":"","comment_id":347686,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œæˆ‘åœ¨More effectiveçœ‹åˆ°çš„å®ç°é‡Œæœ‰èµ‹å€¼å‰åˆ é™¤å½“å‰æŒ‡é’ˆçš„æ“ä½œï¼Œè€Œä½ å†™çš„çš„æ˜¯ä¸æ˜¯åªæ˜¯äº¤æ¢äº†å½“å‰æŒ‡é’ˆï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢\n\ntemplate&lt;class T&gt;&#47;&#47; assignment operator \nauto_ptr&lt;T&gt;&amp; auto_ptr&lt;T&gt;::operator=(auto_ptr&lt;T&gt;&amp; rhs) {\n\tif(this == &amp;rhs) return *this;&#47;&#47;å¦‚æœè‡ªå·±èµ‹å€¼ç»™è‡ªå·±ï¼Œä¸åšä»»ä½•äº‹æƒ…\n\tdelete pointee;&#47;&#47;åˆ é™¤ç›®å‰æ‹¥æœ‰ä¹‹ç‰©ã€‚ \n\tpointee = rhs.pointee;&#47;&#47;å°†ï¼Špointee çš„æ‹¥æœ‰æƒç§»è½¬ç»™ï¼Šthisã€‚ \n\trhs.pointee = 0;&#47;&#47;rhs ä¸å†æ‹¥æœ‰ä»»ä½•ä¸œè¥¿ã€‚ \n\treturn * this;\n}","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574897,"discussion_content":"ä¼ ç»Ÿçš„åšæ³•æ˜¯æ‰‹å·¥æ£€æŸ¥ã€åˆ é™¤æ—§å¯¹è±¡å’Œç§»å…¥æ–°å†…å®¹ã€‚æˆ‘ç”¨çš„æ˜¯æ‹·è´åŠ äº¤æ¢çš„æƒ¯ç”¨æ³•ã€‚æ–‡ä¸­å·²ç»æ˜ç¡®å†™äº†ï¼š\n\nâ€œä¸Šé¢ä»£ç é‡Œçš„è¿™ç§æƒ¯ç”¨æ³•ï¼ˆè§å‚è€ƒèµ„æ–™ [1]ï¼‰åˆ™ä¿è¯äº†å¼ºå¼‚å¸¸å®‰å…¨æ€§ï¼šèµ‹å€¼åˆ†ä¸ºæ‹·è´æ„é€ å’Œäº¤æ¢ä¸¤æ­¥ï¼Œå¼‚å¸¸åªå¯èƒ½åœ¨ç¬¬ä¸€æ­¥å‘ç”Ÿï¼›è€Œç¬¬ä¸€æ­¥å¦‚æœå‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œthis å¯¹è±¡å®Œå…¨ä¸å—ä»»ä½•å½±å“ã€‚æ— è®ºæ‹·è´æ„é€ æˆåŠŸä¸å¦ï¼Œç»“æœåªæœ‰èµ‹å€¼æˆåŠŸå’Œèµ‹å€¼æ²¡æœ‰æ•ˆæœä¸¤ç§çŠ¶æ€ï¼Œè€Œä¸ä¼šå‘ç”Ÿå› ä¸ºèµ‹å€¼ç ´åäº†å½“å‰å¯¹è±¡è¿™ç§åœºæ™¯ã€‚â€\n\nè¿™æ˜¯ä¸€ç§å®ç°èµ‹å€¼è¿ç®—ç¬¦çš„ç®€å•æ–¹æ³•ï¼Œç”¨ä¸€ä¸ªå‡½æ•°æ¥åŒæ—¶å®ç°æ‹·è´èµ‹å€¼å’Œç§»åŠ¨èµ‹å€¼ï¼Œè¿˜ä¸ç”¨è‡ªå·±å»å†™å…·ä½“çš„é€»è¾‘ã€‚å½“ç„¶ï¼Œä»æ€§èƒ½ä¸Šæ¥è®²ï¼Œå®ƒå¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„ã€‚å¦‚æœä½ éœ€è¦èµ‹å€¼çš„æ€§èƒ½å¾ˆé«˜ï¼Œå¯èƒ½è¦é¢å¤–è¿›è¡Œä¼˜åŒ–ã€‚ä½†è¿™ç§å†™æ³•è‡³å°‘æ˜¯ç§å¾ˆå¥½çš„é»˜è®¤åšæ³•ï¼šç®€å•ã€‚åº”è¯¥å¾ˆå°‘ç¨‹åºç“¶é¢ˆä¼šå‡ºç°åœ¨èµ‹å€¼æ“ä½œä¸Šã€‚\n\nå½“ç„¶ï¼Œå¯¹äºå®ç°åº•å±‚åŸºç¡€åº“çš„äººæ¥è¯´ï¼Œç»å¸¸è¿˜æ˜¯éœ€è¦æ–¤æ–¤è®¡è¾ƒçš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654425735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345113,"user_name":"Max(Deguang)","can_delete":false,"product_type":"c1","uid":2348999,"ip_address":"","ucode":"17198F2824D2CB","user_header":"https://static001.geekbang.org/account/avatar/00/23/d7/c7/f3e783e8.jpg","comment_is_top":false,"comment_ctime":1652057529,"is_pvip":false,"replies":[{"id":126076,"content":"ä½ è¯´çš„è¯­å¥æˆ‘æ²¡çœ‹åˆ°èµ°ç§»åŠ¨æ„é€ å‡½æ•°ã€‚ä¸è¿‡ï¼Œå®ƒä¹Ÿç¡®å®ä¸è¯¥èµ°èµ‹å€¼è¿ç®—ç¬¦ã€‚ä½ éœ€è¦å»å¤ä¹ ä¸€ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚Obj obj = â€¦ æ˜¯ä¸€ä¸ªæ„é€ ï¼›obj = â€¦ æ‰æ˜¯èµ‹å€¼ã€‚\n\nç®€å•æ‰“å°å½“å‰å‡½æ•°çš„å±•å¼€å½¢å¼å¯ä»¥ç”¨ç¼–è¯‘å™¨çš„å®ï¼šGCC&#47;Clang ä¸‹ç”¨ __PRETTY_FUNCTION__ï¼ŒMSVC ä¸‹ç”¨ __FUNCSIG__ã€‚å°±æ˜¯æƒ³æ‰“å°æŸä¸ªç±»å‹çš„è¯ï¼Œå‚è€ƒç¬¬ 24 è®²çš„ Boost.TypeIndexã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1652246548,"ip_address":"","comment_id":345113,"utype":1}],"discussion_count":1,"race_medal":1,"score":9,"product_id":100040501,"comment_content":"æ„Ÿè§‰å¥½éš¾å‘€ï¼ŒèŠ±äº†ä¸‰å¤©æ—¶é—´ï¼Œè¿˜æœ‰éƒ¨åˆ†æ²¡æœ‰æ˜ç™½ã€‚è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹\næ‰§è¡Œä¸‹é¢çš„è¯­å¥çš„æ—¶å€™ï¼Œæˆ‘å‘ç° æ‰§è¡Œäº†ä¸¤æ¬¡move constructorã€‚è¿™ç‚¹ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œä¸åº”è¯¥æ‰§è¡Œoperator=ï¼ˆï¼‰å—ï¼Ÿ \nsmart_ptr&lt;circle&gt; ptr3 = dynamic_pointer_cast&lt;circle&gt;(ptr2);\n\nå¦å¤–ï¼Œæœ‰ä»€ä¹ˆå¥½çš„åŠæ³•æ‰“å°å‡ºæ‰§è¡Œæ—¶çš„template nameï¼ˆTï¼Uï¼‰å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":344370,"user_name":"Im me","can_delete":false,"product_type":"c1","uid":1792714,"ip_address":"","ucode":"FF7DEED4BB4C37","user_header":"https://static001.geekbang.org/account/avatar/00/1b/5a/ca/4d5d23d1.jpg","comment_is_top":false,"comment_ctime":1651494842,"is_pvip":false,"replies":[{"id":125849,"content":"l = r;\n\nå¦‚æœç›´æ¥äº¤æ¢ï¼Œr å°±å¾—åˆ° l ä¹‹å‰çš„å€¼äº†ã€‚è¿™å¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ l å¾—åˆ° r çš„å€¼ï¼Œä½† r ä¸åŠ¨ã€‚\n\nåœ¨èµ‹å€¼è¿ç®—ç¬¦é‡Œçš„ swap è¯­å¥æ‰§è¡Œç»“æŸåï¼Œè¿™ä¸ªä¸´æ—¶å¯¹è±¡å°†ä¼šè¢«ææ„ã€‚ç”±äºå®ƒå·²ç»è·Ÿ *this äº¤æ¢ï¼Œææ„çš„åªæ˜¯ *this çš„æ—§å€¼è€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1651812834,"ip_address":"","comment_id":344370,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"å“ªä½åŒå­¦èƒ½å¸®å¿™è§£é‡Šä¸‹æ–‡ä¸­ æ‹·è´è½¬ç§»æ‰€æœ‰æƒä»£ç \nsmart_ptr&amp; operator=(smart_ptr&amp; rhs) \n {    \n    smart_ptr(rhs).swap(*this); \n   return *this;\n  }\nåˆ°åº•ä¸ºä»€ä¹ˆéè¦ç”¨ä¸€ä¸ªä¸´æ—¶å¯¹è±¡å•Šï¼Œä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥rhs.swap(*this)ï¼›æˆ‘çœ‹å¤§å®¶éƒ½æ²¡æœ‰æåˆ°è¿™é‡Œï¼Œåº”è¯¥æ˜¯å°±æˆ‘è‡ªå·±çŠ¯è¿·ç³Šäº†ï¼Œæ±‚è§£ç­”","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571500,"discussion_content":"ä½ è¯´çš„è¯­å¥æˆ‘æ²¡çœ‹åˆ°èµ°ç§»åŠ¨æ„é€ å‡½æ•°ã€‚ä¸è¿‡ï¼Œå®ƒä¹Ÿç¡®å®ä¸è¯¥èµ°èµ‹å€¼è¿ç®—ç¬¦ã€‚ä½ éœ€è¦å»å¤ä¹ ä¸€ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚Obj obj = â€¦ æ˜¯ä¸€ä¸ªæ„é€ ï¼›obj = â€¦ æ‰æ˜¯èµ‹å€¼ã€‚\n\nç®€å•æ‰“å°å½“å‰å‡½æ•°çš„å±•å¼€å½¢å¼å¯ä»¥ç”¨ç¼–è¯‘å™¨çš„å®ï¼šGCC/Clang ä¸‹ç”¨ __PRETTY_FUNCTION__ï¼ŒMSVC ä¸‹ç”¨ __FUNCSIG__ã€‚å°±æ˜¯æƒ³æ‰“å°æŸä¸ªç±»å‹çš„è¯ï¼Œå‚è€ƒç¬¬ 24 è®²çš„ Boost.TypeIndexã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652246548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344369,"user_name":"Im me","can_delete":false,"product_type":"c1","uid":1792714,"ip_address":"","ucode":"FF7DEED4BB4C37","user_header":"https://static001.geekbang.org/account/avatar/00/1b/5a/ca/4d5d23d1.jpg","comment_is_top":false,"comment_ctime":1651494274,"is_pvip":false,"replies":[{"id":125848,"content":"å¯ä»¥å…ˆå¾€åçœ‹ã€‚çœ‹ä¸æ‡‚çš„å›è¿‡å¤´å†çœ‹ä¸€éã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1651812587,"ip_address":"","comment_id":344369,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"è¿™ä¸€èŠ‚çœ‹äº†3ä¸ªå°æ—¶è¿˜æ²¡çœ‹æ‡‚ï¼ŒåŸºç¡€æœ‰ç‚¹å·®","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570549,"discussion_content":"l = r;\n\nå¦‚æœç›´æ¥äº¤æ¢ï¼Œr å°±å¾—åˆ° l ä¹‹å‰çš„å€¼äº†ã€‚è¿™å¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ l å¾—åˆ° r çš„å€¼ï¼Œä½† r ä¸åŠ¨ã€‚\n\nåœ¨èµ‹å€¼è¿ç®—ç¬¦é‡Œçš„ swap è¯­å¥æ‰§è¡Œç»“æŸåï¼Œè¿™ä¸ªä¸´æ—¶å¯¹è±¡å°†ä¼šè¢«ææ„ã€‚ç”±äºå®ƒå·²ç»è·Ÿ *this äº¤æ¢ï¼Œææ„çš„åªæ˜¯ *this çš„æ—§å€¼è€Œå·²ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651812834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343763,"user_name":"Kiddy","can_delete":false,"product_type":"c1","uid":2055993,"ip_address":"","ucode":"D07AAEE69BE504","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","comment_is_top":false,"comment_ctime":1651043841,"is_pvip":false,"replies":[{"id":125592,"content":"æˆ‘ä»”ç»†æµ‹äº†ä¸€ä¸‹ï¼Œå®Œå…¨æ²¡æœ‰çœ‹åˆ°ç§»åŠ¨æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚\n\nä½ å¦‚æœç¡®å®šæœ‰çš„è¯ï¼ŒæŠŠå®Œæ•´çš„æµ‹è¯•ç¨‹åºè´´å‡ºæ¥çœ‹çœ‹ã€‚å¯ä»¥è´´åˆ° godbolt.org ä¸Šï¼Œç„¶åç”ŸæˆçŸ­é“¾æ¥å‘æˆ‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1651150257,"ip_address":"","comment_id":343763,"utype":1}],"discussion_count":8,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨gdbè·Ÿäº†ä¸‹ï¼Œå‘ç°æ‰§è¡Œptr1 = ptr2è¿™è¡Œä»£ç æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œæ‹·è´æ„é€ å‡½æ•°ï¼Œç„¶åæ‰§è¡Œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œæœ€åæ‰§è¡Œoperator=ã€‚  æˆ‘æœ‰ä¸ªç–‘é—®ï¼Œä¸ºå•¥ä¼šæ‰§è¡Œç§»åŠ¨æ„é€ å‡½æ•°å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570548,"discussion_content":"å¯ä»¥å…ˆå¾€åçœ‹ã€‚çœ‹ä¸æ‡‚çš„å›è¿‡å¤´å†çœ‹ä¸€éã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651812587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342758,"user_name":"å¼˜","can_delete":false,"product_type":"c1","uid":2754894,"ip_address":"","ucode":"6B91D47FDCCACA","user_header":"https://static001.geekbang.org/account/avatar/00/2a/09/4e/f5993c4e.jpg","comment_is_top":false,"comment_ctime":1650448334,"is_pvip":false,"replies":[{"id":125258,"content":"ä¸å¤ªæ˜ç™½ä½ çš„æ„æ€ï¼Œä¸è¿‡ï¼Œè¿™äº›ä»£ç éƒ½æ˜¯å¯è¿è¡Œçš„ï¼š\n\nhttps:&#47;&#47;github.com&#47;adah1972&#47;geek_time_cpp&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1650547504,"ip_address":"","comment_id":342758,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"move constructorçš„æ—¶å€™ï¼Œshared_count_=nullptr, è¿™ä¸ªææ„å‡½æ•°ä¼šå‘ç”Ÿå¼‚å¸¸æŠŠ\n\n\t","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565825,"discussion_content":"ä¸å¤ªæ˜ç™½ä½ çš„æ„æ€ï¼Œä¸è¿‡ï¼Œè¿™äº›ä»£ç éƒ½æ˜¯å¯è¿è¡Œçš„ï¼š\n\nhttps://github.com/adah1972/geek_time_cpp/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650547504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342125,"user_name":"ç¡•","can_delete":false,"product_type":"c1","uid":2540708,"ip_address":"","ucode":"1F68B408F4BBED","user_header":"https://static001.geekbang.org/account/avatar/00/26/c4/a4/20f44910.jpg","comment_is_top":false,"comment_ctime":1650022903,"is_pvip":false,"replies":[{"id":125053,"content":"ä¸éœ€è¦ã€‚ç»†èŠ‚åé¢ä¼šè®²ï¼ˆç¬¬9è®²ï¼‰ï¼š\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ã€‚\n\næˆ‘ä»¬å®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ„é€ å‡½æ•°äº†ã€‚éœ€è¦ç§»åŠ¨æ„é€ æ—¶ï¼Œæˆ‘ä»¬çš„æ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°å°±ä¼šè¢«ä½¿ç”¨äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1650173956,"ip_address":"","comment_id":342125,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"ä»£ç åˆ—è¡¨ä¸­ï¼Œæ˜¯ä¸æ˜¯å°‘äº†ä¸€ä¸ªæ™®é€šç‰ˆæœ¬çš„ç§»åŠ¨æ„é€ å‡½æ•°ï¼Ÿ\n\nsmart_ptr(smart_ptr &amp;&amp;other) noexcept\n{\n    ptr_ = other.ptr_;\n    if (ptr_) {\n        shared_count_ = other.shared_count_;\n        other.ptr_ = nullptr;\n    }\n}","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564164,"discussion_content":"ä¸éœ€è¦ã€‚ç»†èŠ‚åé¢ä¼šè®²ï¼ˆç¬¬9è®²ï¼‰ï¼š\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ã€‚\n\næˆ‘ä»¬å®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ„é€ å‡½æ•°äº†ã€‚éœ€è¦ç§»åŠ¨æ„é€ æ—¶ï¼Œæˆ‘ä»¬çš„æ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°å°±ä¼šè¢«ä½¿ç”¨äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650173956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339671,"user_name":"ç¡•","can_delete":false,"product_type":"c1","uid":2540708,"ip_address":"","ucode":"1F68B408F4BBED","user_header":"https://static001.geekbang.org/account/avatar/00/26/c4/a4/20f44910.jpg","comment_is_top":false,"comment_ctime":1648285162,"is_pvip":false,"replies":[{"id":124387,"content":"æ™®é€šçš„æŒ‡é’ˆæœ‰å››ç§å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œstatic_castã€reinterpret_cast ç­‰ï¼ˆä¸ç†Ÿæ‚‰çš„è¯ï¼Œè¯·è‡ªè¡Œæœç´¢ï¼‰ã€‚è¿™äº›æ“ä½œä¸èƒ½ç›´æ¥ä½œç”¨äºæ™ºèƒ½æŒ‡é’ˆä¸Šã€‚è¦è®©æ™ºèƒ½æŒ‡é’ˆä¹Ÿæ”¯æŒç±»ä¼¼çš„æ“ä½œï¼Œæˆ‘ä»¬å°±å¾—è‡ªå·±æ¥å®ç°ä¸€ä¸‹ï¼Œè¿™å››ä¸ªå‡½æ•°æ¨¡æ¿å°±æ˜¯åšè¿™ä¸ªç”¨é€”çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1648638513,"ip_address":"","comment_id":339671,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œ\nå¯¹äºæœ€åä¸€ä¸ªå°èŠ‚ â€œæŒ‡é’ˆç±»å‹è½¬æ¢â€ï¼Œæˆ‘æ²¡æ˜ç™½ï¼Œä¸ºä»€ä¹ˆå®ç°äº† 4 ä¸ªè½¬æ¢ï¼ˆåŒ…æ‹¬ static_pointer_cast, reinterpret_pointer_cast, const_pointer_cast, dynamic_pointer_castï¼‰ï¼Œè¿™å››ä¸ªå‡½æ•°æœ‰ä»€ä¹ˆç”¨é€”ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559178,"discussion_content":"æ™®é€šçš„æŒ‡é’ˆæœ‰å››ç§å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œstatic_castã€reinterpret_cast ç­‰ï¼ˆä¸ç†Ÿæ‚‰çš„è¯ï¼Œè¯·è‡ªè¡Œæœç´¢ï¼‰ã€‚è¿™äº›æ“ä½œä¸èƒ½ç›´æ¥ä½œç”¨äºæ™ºèƒ½æŒ‡é’ˆä¸Šã€‚è¦è®©æ™ºèƒ½æŒ‡é’ˆä¹Ÿæ”¯æŒç±»ä¼¼çš„æ“ä½œï¼Œæˆ‘ä»¬å°±å¾—è‡ªå·±æ¥å®ç°ä¸€ä¸‹ï¼Œè¿™å››ä¸ªå‡½æ•°æ¨¡æ¿å°±æ˜¯åšè¿™ä¸ªç”¨é€”çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1648638514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339028,"user_name":"Geek_0aec2d","can_delete":false,"product_type":"c1","uid":2948973,"ip_address":"","ucode":"5FBD0447A87211","user_header":"","comment_is_top":false,"comment_ctime":1647865189,"is_pvip":false,"replies":[{"id":124037,"content":"å¯ä»¥è¿™ä¹ˆè¯´ã€‚\n\nä½†ä¸€èˆ¬ä¸è¿™ä¹ˆè¯´ï¼Œè¿™å„¿åªæ˜¯æ‹·è´æŒ‡é’ˆè€Œå·²ã€‚æˆ‘ä»¬è¯´æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼Œåªåœ¨åŒ…å«å­å¯¹è±¡çš„å¤§å¯¹è±¡ä¸Šæ‰æœ‰æ„ä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1648040103,"ip_address":"","comment_id":339028,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"è€å¸ˆè¯·é—®ä¸€ä¸ªç®€å•çš„é—®é¢˜\nsmart_ptr(const smart_ptr&amp; other) {\n   ptr_ = other.ptr_; \n   if (ptr_) {\n       other.shared_count_ -&gt;add_count();\n       shared_count_ = other.shared_count_; \n   }\n}\nè¿™ä¸ªé‡Œé¢çš„éƒ½æ˜¯æµ…æ‹·è´å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559178,"discussion_content":"æ™®é€šçš„æŒ‡é’ˆæœ‰å››ç§å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œstatic_castã€reinterpret_cast ç­‰ï¼ˆä¸ç†Ÿæ‚‰çš„è¯ï¼Œè¯·è‡ªè¡Œæœç´¢ï¼‰ã€‚è¿™äº›æ“ä½œä¸èƒ½ç›´æ¥ä½œç”¨äºæ™ºèƒ½æŒ‡é’ˆä¸Šã€‚è¦è®©æ™ºèƒ½æŒ‡é’ˆä¹Ÿæ”¯æŒç±»ä¼¼çš„æ“ä½œï¼Œæˆ‘ä»¬å°±å¾—è‡ªå·±æ¥å®ç°ä¸€ä¸‹ï¼Œè¿™å››ä¸ªå‡½æ•°æ¨¡æ¿å°±æ˜¯åšè¿™ä¸ªç”¨é€”çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1648638514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333391,"user_name":"mzhua","can_delete":false,"product_type":"c1","uid":1023919,"ip_address":"","ucode":"F2CA0968A37051","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/af/d4cdfd68.jpg","comment_is_top":false,"comment_ctime":1644323006,"is_pvip":false,"replies":[{"id":121860,"content":"å¿…é¡»çš„ï¼Œå°±æ˜¯è¦åœ¨ç»ƒä¹ ä¸­å­¦ä¹ ã€æˆé•¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1644383196,"ip_address":"","comment_id":333391,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"ç¡®å®åªæ˜¯çœ‹æ˜¯çœ‹ä¸æ‡‚çš„äº†ï¼Œè¿˜æ˜¯è¦åŠ¨æ‰‹ğŸ˜„","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550093,"discussion_content":"å¿…é¡»çš„ï¼Œå°±æ˜¯è¦åœ¨ç»ƒä¹ ä¸­å­¦ä¹ ã€æˆé•¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644383196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332066,"user_name":"Marc Chan","can_delete":false,"product_type":"c1","uid":2353732,"ip_address":"","ucode":"D365D6793F304B","user_header":"https://static001.geekbang.org/account/avatar/00/23/ea/44/cf0b2541.jpg","comment_is_top":false,"comment_ctime":1643005299,"is_pvip":false,"replies":[{"id":121365,"content":"å­¦ä¹  + ç»ƒä¹  ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1643077737,"ip_address":"","comment_id":332066,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"çœ‹çš„ç¡®å®æœ‰ç‚¹åƒåŠ›ï¼Œè‡ªå·±åŠŸåŠ›è¿˜æ˜¯å·®å¾ˆå¤šï¼Œéœ€è¦ä¸æ–­å­¦ä¹ ä¸“æ +çœ‹ä¹¦è¡¥é½ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548199,"discussion_content":"å­¦ä¹  + ç»ƒä¹  ğŸ˜‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643077737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345113,"user_name":"Max(Deguang)","can_delete":false,"product_type":"c1","uid":2348999,"ip_address":"","ucode":"17198F2824D2CB","user_header":"https://static001.geekbang.org/account/avatar/00/23/d7/c7/f3e783e8.jpg","comment_is_top":false,"comment_ctime":1652057529,"is_pvip":false,"replies":[{"id":126076,"content":"ä½ è¯´çš„è¯­å¥æˆ‘æ²¡çœ‹åˆ°èµ°ç§»åŠ¨æ„é€ å‡½æ•°ã€‚ä¸è¿‡ï¼Œå®ƒä¹Ÿç¡®å®ä¸è¯¥èµ°èµ‹å€¼è¿ç®—ç¬¦ã€‚ä½ éœ€è¦å»å¤ä¹ ä¸€ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚Obj obj = â€¦ æ˜¯ä¸€ä¸ªæ„é€ ï¼›obj = â€¦ æ‰æ˜¯èµ‹å€¼ã€‚\n\nç®€å•æ‰“å°å½“å‰å‡½æ•°çš„å±•å¼€å½¢å¼å¯ä»¥ç”¨ç¼–è¯‘å™¨çš„å®ï¼šGCC&#47;Clang ä¸‹ç”¨ __PRETTY_FUNCTION__ï¼ŒMSVC ä¸‹ç”¨ __FUNCSIG__ã€‚å°±æ˜¯æƒ³æ‰“å°æŸä¸ªç±»å‹çš„è¯ï¼Œå‚è€ƒç¬¬ 24 è®²çš„ Boost.TypeIndexã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1652246548,"ip_address":"","comment_id":345113,"utype":1}],"discussion_count":1,"race_medal":1,"score":9,"product_id":100040501,"comment_content":"æ„Ÿè§‰å¥½éš¾å‘€ï¼ŒèŠ±äº†ä¸‰å¤©æ—¶é—´ï¼Œè¿˜æœ‰éƒ¨åˆ†æ²¡æœ‰æ˜ç™½ã€‚è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹\næ‰§è¡Œä¸‹é¢çš„è¯­å¥çš„æ—¶å€™ï¼Œæˆ‘å‘ç° æ‰§è¡Œäº†ä¸¤æ¬¡move constructorã€‚è¿™ç‚¹ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œä¸åº”è¯¥æ‰§è¡Œoperator=ï¼ˆï¼‰å—ï¼Ÿ \nsmart_ptr&lt;circle&gt; ptr3 = dynamic_pointer_cast&lt;circle&gt;(ptr2);\n\nå¦å¤–ï¼Œæœ‰ä»€ä¹ˆå¥½çš„åŠæ³•æ‰“å°å‡ºæ‰§è¡Œæ—¶çš„template nameï¼ˆTï¼Uï¼‰å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571500,"discussion_content":"ä½ è¯´çš„è¯­å¥æˆ‘æ²¡çœ‹åˆ°èµ°ç§»åŠ¨æ„é€ å‡½æ•°ã€‚ä¸è¿‡ï¼Œå®ƒä¹Ÿç¡®å®ä¸è¯¥èµ°èµ‹å€¼è¿ç®—ç¬¦ã€‚ä½ éœ€è¦å»å¤ä¹ ä¸€ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚Obj obj = â€¦ æ˜¯ä¸€ä¸ªæ„é€ ï¼›obj = â€¦ æ‰æ˜¯èµ‹å€¼ã€‚\n\nç®€å•æ‰“å°å½“å‰å‡½æ•°çš„å±•å¼€å½¢å¼å¯ä»¥ç”¨ç¼–è¯‘å™¨çš„å®ï¼šGCC/Clang ä¸‹ç”¨ __PRETTY_FUNCTION__ï¼ŒMSVC ä¸‹ç”¨ __FUNCSIG__ã€‚å°±æ˜¯æƒ³æ‰“å°æŸä¸ªç±»å‹çš„è¯ï¼Œå‚è€ƒç¬¬ 24 è®²çš„ Boost.TypeIndexã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652246548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344370,"user_name":"Im me","can_delete":false,"product_type":"c1","uid":1792714,"ip_address":"","ucode":"FF7DEED4BB4C37","user_header":"https://static001.geekbang.org/account/avatar/00/1b/5a/ca/4d5d23d1.jpg","comment_is_top":false,"comment_ctime":1651494842,"is_pvip":false,"replies":[{"id":125849,"content":"l = r;\n\nå¦‚æœç›´æ¥äº¤æ¢ï¼Œr å°±å¾—åˆ° l ä¹‹å‰çš„å€¼äº†ã€‚è¿™å¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ l å¾—åˆ° r çš„å€¼ï¼Œä½† r ä¸åŠ¨ã€‚\n\nåœ¨èµ‹å€¼è¿ç®—ç¬¦é‡Œçš„ swap è¯­å¥æ‰§è¡Œç»“æŸåï¼Œè¿™ä¸ªä¸´æ—¶å¯¹è±¡å°†ä¼šè¢«ææ„ã€‚ç”±äºå®ƒå·²ç»è·Ÿ *this äº¤æ¢ï¼Œææ„çš„åªæ˜¯ *this çš„æ—§å€¼è€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1651812834,"ip_address":"","comment_id":344370,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"å“ªä½åŒå­¦èƒ½å¸®å¿™è§£é‡Šä¸‹æ–‡ä¸­ æ‹·è´è½¬ç§»æ‰€æœ‰æƒä»£ç \nsmart_ptr&amp; operator=(smart_ptr&amp; rhs) \n {    \n    smart_ptr(rhs).swap(*this); \n   return *this;\n  }\nåˆ°åº•ä¸ºä»€ä¹ˆéè¦ç”¨ä¸€ä¸ªä¸´æ—¶å¯¹è±¡å•Šï¼Œä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥rhs.swap(*this)ï¼›æˆ‘çœ‹å¤§å®¶éƒ½æ²¡æœ‰æåˆ°è¿™é‡Œï¼Œåº”è¯¥æ˜¯å°±æˆ‘è‡ªå·±çŠ¯è¿·ç³Šäº†ï¼Œæ±‚è§£ç­”","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570549,"discussion_content":"l = r;\n\nå¦‚æœç›´æ¥äº¤æ¢ï¼Œr å°±å¾—åˆ° l ä¹‹å‰çš„å€¼äº†ã€‚è¿™å¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ l å¾—åˆ° r çš„å€¼ï¼Œä½† r ä¸åŠ¨ã€‚\n\nåœ¨èµ‹å€¼è¿ç®—ç¬¦é‡Œçš„ swap è¯­å¥æ‰§è¡Œç»“æŸåï¼Œè¿™ä¸ªä¸´æ—¶å¯¹è±¡å°†ä¼šè¢«ææ„ã€‚ç”±äºå®ƒå·²ç»è·Ÿ *this äº¤æ¢ï¼Œææ„çš„åªæ˜¯ *this çš„æ—§å€¼è€Œå·²ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651812834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344369,"user_name":"Im me","can_delete":false,"product_type":"c1","uid":1792714,"ip_address":"","ucode":"FF7DEED4BB4C37","user_header":"https://static001.geekbang.org/account/avatar/00/1b/5a/ca/4d5d23d1.jpg","comment_is_top":false,"comment_ctime":1651494274,"is_pvip":false,"replies":[{"id":125848,"content":"å¯ä»¥å…ˆå¾€åçœ‹ã€‚çœ‹ä¸æ‡‚çš„å›è¿‡å¤´å†çœ‹ä¸€éã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1651812587,"ip_address":"","comment_id":344369,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"è¿™ä¸€èŠ‚çœ‹äº†3ä¸ªå°æ—¶è¿˜æ²¡çœ‹æ‡‚ï¼ŒåŸºç¡€æœ‰ç‚¹å·®","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570548,"discussion_content":"å¯ä»¥å…ˆå¾€åçœ‹ã€‚çœ‹ä¸æ‡‚çš„å›è¿‡å¤´å†çœ‹ä¸€éã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651812587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343763,"user_name":"Kiddy","can_delete":false,"product_type":"c1","uid":2055993,"ip_address":"","ucode":"D07AAEE69BE504","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","comment_is_top":false,"comment_ctime":1651043841,"is_pvip":false,"replies":[{"id":125592,"content":"æˆ‘ä»”ç»†æµ‹äº†ä¸€ä¸‹ï¼Œå®Œå…¨æ²¡æœ‰çœ‹åˆ°ç§»åŠ¨æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚\n\nä½ å¦‚æœç¡®å®šæœ‰çš„è¯ï¼ŒæŠŠå®Œæ•´çš„æµ‹è¯•ç¨‹åºè´´å‡ºæ¥çœ‹çœ‹ã€‚å¯ä»¥è´´åˆ° godbolt.org ä¸Šï¼Œç„¶åç”ŸæˆçŸ­é“¾æ¥å‘æˆ‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1651150257,"ip_address":"","comment_id":343763,"utype":1}],"discussion_count":8,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨gdbè·Ÿäº†ä¸‹ï¼Œå‘ç°æ‰§è¡Œptr1 = ptr2è¿™è¡Œä»£ç æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œæ‹·è´æ„é€ å‡½æ•°ï¼Œç„¶åæ‰§è¡Œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œæœ€åæ‰§è¡Œoperator=ã€‚  æˆ‘æœ‰ä¸ªç–‘é—®ï¼Œä¸ºå•¥ä¼šæ‰§è¡Œç§»åŠ¨æ„é€ å‡½æ•°å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568487,"discussion_content":"æˆ‘ä»”ç»†æµ‹äº†ä¸€ä¸‹ï¼Œå®Œå…¨æ²¡æœ‰çœ‹åˆ°ç§»åŠ¨æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚\n\nä½ å¦‚æœç¡®å®šæœ‰çš„è¯ï¼ŒæŠŠå®Œæ•´çš„æµ‹è¯•ç¨‹åºè´´å‡ºæ¥çœ‹çœ‹ã€‚å¯ä»¥è´´åˆ° godbolt.org ä¸Šï¼Œç„¶åç”ŸæˆçŸ­é“¾æ¥å‘æˆ‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651150257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":7,"child_discussions":[{"author":{"id":2055993,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","nickname":"Kiddy","note":"","ucode":"D07AAEE69BE504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570239,"discussion_content":"\nclass shape {\npublic:\n  virtual ~shape() {}\n};\n\nclass circle : public shape {\npublic:\n  ~circle() { puts(&#34;~circle()&#34;); }\n};\n\nint main()\n{\n  smart_ptr&lt;circle&gt; ptr1(new circle());\n  printf(&#34;use count of ptr1 is %ld\\n&#34;,\n         ptr1.use_count());\n  smart_ptr&lt;shape&gt; ptr2;\n  printf(&#34;use count of ptr2 was %ld\\n&#34;,\n         ptr2.use_count());\n  ptr2 = ptr1;\n  printf(&#34;use count of ptr2 is now %ld\\n&#34;,\n         ptr2.use_count());\n  if (ptr1) {\n    puts(&#34;ptr1 is not empty&#34;);\n  }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651714550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":568487,"ip_address":"","group_id":0},"score":570239,"extra":""},{"author":{"id":2055993,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","nickname":"Kiddy","note":"","ucode":"D07AAEE69BE504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570241,"discussion_content":"åœ¨æ‰§è¡Œptr2=ptr1è¿™è¡Œä»£ç çš„æ—¶å€™ï¼Œæˆ‘å†æ¬¡è·Ÿäº†ä¸‹ï¼Œgdbçš„ç¡®å…ˆæ‰§è¡Œäº†æ‹·è´æ„é€ ï¼Œæ¥ç€æ‰§è¡Œç§»åŠ¨æ„é€ ï¼Œæœ€åæ‰§è¡Œèµ‹å€¼é‡è½½ï¼ˆä¸¤ä¸ªæ„é€ éƒ½æ˜¯æ¨¡æ¿çš„ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651714689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":568487,"ip_address":"","group_id":0},"score":570241,"extra":""},{"author":{"id":2055993,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","nickname":"Kiddy","note":"","ucode":"D07AAEE69BE504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570242,"discussion_content":"https://godbolt.org/z/fj5bKEMn7","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651714991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":568487,"ip_address":"","group_id":0},"score":570242,"extra":""}]}]},{"had_liked":false,"id":342758,"user_name":"å¼˜","can_delete":false,"product_type":"c1","uid":2754894,"ip_address":"","ucode":"6B91D47FDCCACA","user_header":"https://static001.geekbang.org/account/avatar/00/2a/09/4e/f5993c4e.jpg","comment_is_top":false,"comment_ctime":1650448334,"is_pvip":false,"replies":[{"id":125258,"content":"ä¸å¤ªæ˜ç™½ä½ çš„æ„æ€ï¼Œä¸è¿‡ï¼Œè¿™äº›ä»£ç éƒ½æ˜¯å¯è¿è¡Œçš„ï¼š\n\nhttps:&#47;&#47;github.com&#47;adah1972&#47;geek_time_cpp&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1650547504,"ip_address":"","comment_id":342758,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"move constructorçš„æ—¶å€™ï¼Œshared_count_=nullptr, è¿™ä¸ªææ„å‡½æ•°ä¼šå‘ç”Ÿå¼‚å¸¸æŠŠ\n\n\t","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568487,"discussion_content":"æˆ‘ä»”ç»†æµ‹äº†ä¸€ä¸‹ï¼Œå®Œå…¨æ²¡æœ‰çœ‹åˆ°ç§»åŠ¨æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚\n\nä½ å¦‚æœç¡®å®šæœ‰çš„è¯ï¼ŒæŠŠå®Œæ•´çš„æµ‹è¯•ç¨‹åºè´´å‡ºæ¥çœ‹çœ‹ã€‚å¯ä»¥è´´åˆ° godbolt.org ä¸Šï¼Œç„¶åç”ŸæˆçŸ­é“¾æ¥å‘æˆ‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651150257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":7,"child_discussions":[{"author":{"id":2055993,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","nickname":"Kiddy","note":"","ucode":"D07AAEE69BE504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570239,"discussion_content":"\nclass shape {\npublic:\n  virtual ~shape() {}\n};\n\nclass circle : public shape {\npublic:\n  ~circle() { puts(&#34;~circle()&#34;); }\n};\n\nint main()\n{\n  smart_ptr&lt;circle&gt; ptr1(new circle());\n  printf(&#34;use count of ptr1 is %ld\\n&#34;,\n         ptr1.use_count());\n  smart_ptr&lt;shape&gt; ptr2;\n  printf(&#34;use count of ptr2 was %ld\\n&#34;,\n         ptr2.use_count());\n  ptr2 = ptr1;\n  printf(&#34;use count of ptr2 is now %ld\\n&#34;,\n         ptr2.use_count());\n  if (ptr1) {\n    puts(&#34;ptr1 is not empty&#34;);\n  }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651714550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":568487,"ip_address":"","group_id":0},"score":570239,"extra":""},{"author":{"id":2055993,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","nickname":"Kiddy","note":"","ucode":"D07AAEE69BE504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570241,"discussion_content":"åœ¨æ‰§è¡Œptr2=ptr1è¿™è¡Œä»£ç çš„æ—¶å€™ï¼Œæˆ‘å†æ¬¡è·Ÿäº†ä¸‹ï¼Œgdbçš„ç¡®å…ˆæ‰§è¡Œäº†æ‹·è´æ„é€ ï¼Œæ¥ç€æ‰§è¡Œç§»åŠ¨æ„é€ ï¼Œæœ€åæ‰§è¡Œèµ‹å€¼é‡è½½ï¼ˆä¸¤ä¸ªæ„é€ éƒ½æ˜¯æ¨¡æ¿çš„ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651714689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":568487,"ip_address":"","group_id":0},"score":570241,"extra":""},{"author":{"id":2055993,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","nickname":"Kiddy","note":"","ucode":"D07AAEE69BE504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570242,"discussion_content":"https://godbolt.org/z/fj5bKEMn7","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651714991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":568487,"ip_address":"","group_id":0},"score":570242,"extra":""}]}]},{"had_liked":false,"id":342125,"user_name":"ç¡•","can_delete":false,"product_type":"c1","uid":2540708,"ip_address":"","ucode":"1F68B408F4BBED","user_header":"https://static001.geekbang.org/account/avatar/00/26/c4/a4/20f44910.jpg","comment_is_top":false,"comment_ctime":1650022903,"is_pvip":false,"replies":[{"id":125053,"content":"ä¸éœ€è¦ã€‚ç»†èŠ‚åé¢ä¼šè®²ï¼ˆç¬¬9è®²ï¼‰ï¼š\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ã€‚\n\næˆ‘ä»¬å®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ„é€ å‡½æ•°äº†ã€‚éœ€è¦ç§»åŠ¨æ„é€ æ—¶ï¼Œæˆ‘ä»¬çš„æ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°å°±ä¼šè¢«ä½¿ç”¨äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1650173956,"ip_address":"","comment_id":342125,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"ä»£ç åˆ—è¡¨ä¸­ï¼Œæ˜¯ä¸æ˜¯å°‘äº†ä¸€ä¸ªæ™®é€šç‰ˆæœ¬çš„ç§»åŠ¨æ„é€ å‡½æ•°ï¼Ÿ\n\nsmart_ptr(smart_ptr &amp;&amp;other) noexcept\n{\n    ptr_ = other.ptr_;\n    if (ptr_) {\n        shared_count_ = other.shared_count_;\n        other.ptr_ = nullptr;\n    }\n}","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565825,"discussion_content":"ä¸å¤ªæ˜ç™½ä½ çš„æ„æ€ï¼Œä¸è¿‡ï¼Œè¿™äº›ä»£ç éƒ½æ˜¯å¯è¿è¡Œçš„ï¼š\n\nhttps://github.com/adah1972/geek_time_cpp/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650547504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339671,"user_name":"ç¡•","can_delete":false,"product_type":"c1","uid":2540708,"ip_address":"","ucode":"1F68B408F4BBED","user_header":"https://static001.geekbang.org/account/avatar/00/26/c4/a4/20f44910.jpg","comment_is_top":false,"comment_ctime":1648285162,"is_pvip":false,"replies":[{"id":124387,"content":"æ™®é€šçš„æŒ‡é’ˆæœ‰å››ç§å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œstatic_castã€reinterpret_cast ç­‰ï¼ˆä¸ç†Ÿæ‚‰çš„è¯ï¼Œè¯·è‡ªè¡Œæœç´¢ï¼‰ã€‚è¿™äº›æ“ä½œä¸èƒ½ç›´æ¥ä½œç”¨äºæ™ºèƒ½æŒ‡é’ˆä¸Šã€‚è¦è®©æ™ºèƒ½æŒ‡é’ˆä¹Ÿæ”¯æŒç±»ä¼¼çš„æ“ä½œï¼Œæˆ‘ä»¬å°±å¾—è‡ªå·±æ¥å®ç°ä¸€ä¸‹ï¼Œè¿™å››ä¸ªå‡½æ•°æ¨¡æ¿å°±æ˜¯åšè¿™ä¸ªç”¨é€”çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1648638513,"ip_address":"","comment_id":339671,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œ\nå¯¹äºæœ€åä¸€ä¸ªå°èŠ‚ â€œæŒ‡é’ˆç±»å‹è½¬æ¢â€ï¼Œæˆ‘æ²¡æ˜ç™½ï¼Œä¸ºä»€ä¹ˆå®ç°äº† 4 ä¸ªè½¬æ¢ï¼ˆåŒ…æ‹¬ static_pointer_cast, reinterpret_pointer_cast, const_pointer_cast, dynamic_pointer_castï¼‰ï¼Œè¿™å››ä¸ªå‡½æ•°æœ‰ä»€ä¹ˆç”¨é€”ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564164,"discussion_content":"ä¸éœ€è¦ã€‚ç»†èŠ‚åé¢ä¼šè®²ï¼ˆç¬¬9è®²ï¼‰ï¼š\n\nç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ã€‚\n\næˆ‘ä»¬å®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ„é€ å‡½æ•°äº†ã€‚éœ€è¦ç§»åŠ¨æ„é€ æ—¶ï¼Œæˆ‘ä»¬çš„æ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°å°±ä¼šè¢«ä½¿ç”¨äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650173956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339028,"user_name":"Geek_0aec2d","can_delete":false,"product_type":"c1","uid":2948973,"ip_address":"","ucode":"5FBD0447A87211","user_header":"","comment_is_top":false,"comment_ctime":1647865189,"is_pvip":false,"replies":[{"id":124037,"content":"å¯ä»¥è¿™ä¹ˆè¯´ã€‚\n\nä½†ä¸€èˆ¬ä¸è¿™ä¹ˆè¯´ï¼Œè¿™å„¿åªæ˜¯æ‹·è´æŒ‡é’ˆè€Œå·²ã€‚æˆ‘ä»¬è¯´æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼Œåªåœ¨åŒ…å«å­å¯¹è±¡çš„å¤§å¯¹è±¡ä¸Šæ‰æœ‰æ„ä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1648040103,"ip_address":"","comment_id":339028,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"è€å¸ˆè¯·é—®ä¸€ä¸ªç®€å•çš„é—®é¢˜\nsmart_ptr(const smart_ptr&amp; other) {\n   ptr_ = other.ptr_; \n   if (ptr_) {\n       other.shared_count_ -&gt;add_count();\n       shared_count_ = other.shared_count_; \n   }\n}\nè¿™ä¸ªé‡Œé¢çš„éƒ½æ˜¯æµ…æ‹·è´å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557997,"discussion_content":"å¯ä»¥è¿™ä¹ˆè¯´ã€‚\n\nä½†ä¸€èˆ¬ä¸è¿™ä¹ˆè¯´ï¼Œè¿™å„¿åªæ˜¯æ‹·è´æŒ‡é’ˆè€Œå·²ã€‚æˆ‘ä»¬è¯´æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼Œåªåœ¨åŒ…å«å­å¯¹è±¡çš„å¤§å¯¹è±¡ä¸Šæ‰æœ‰æ„ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648040104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333391,"user_name":"mzhua","can_delete":false,"product_type":"c1","uid":1023919,"ip_address":"","ucode":"F2CA0968A37051","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/af/d4cdfd68.jpg","comment_is_top":false,"comment_ctime":1644323006,"is_pvip":false,"replies":[{"id":121860,"content":"å¿…é¡»çš„ï¼Œå°±æ˜¯è¦åœ¨ç»ƒä¹ ä¸­å­¦ä¹ ã€æˆé•¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1644383196,"ip_address":"","comment_id":333391,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"ç¡®å®åªæ˜¯çœ‹æ˜¯çœ‹ä¸æ‡‚çš„äº†ï¼Œè¿˜æ˜¯è¦åŠ¨æ‰‹ğŸ˜„","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557997,"discussion_content":"å¯ä»¥è¿™ä¹ˆè¯´ã€‚\n\nä½†ä¸€èˆ¬ä¸è¿™ä¹ˆè¯´ï¼Œè¿™å„¿åªæ˜¯æ‹·è´æŒ‡é’ˆè€Œå·²ã€‚æˆ‘ä»¬è¯´æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼Œåªåœ¨åŒ…å«å­å¯¹è±¡çš„å¤§å¯¹è±¡ä¸Šæ‰æœ‰æ„ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648040104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332066,"user_name":"Marc Chan","can_delete":false,"product_type":"c1","uid":2353732,"ip_address":"","ucode":"D365D6793F304B","user_header":"https://static001.geekbang.org/account/avatar/00/23/ea/44/cf0b2541.jpg","comment_is_top":false,"comment_ctime":1643005299,"is_pvip":false,"replies":[{"id":121365,"content":"å­¦ä¹  + ç»ƒä¹  ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1643077737,"ip_address":"","comment_id":332066,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100040501,"comment_content":"çœ‹çš„ç¡®å®æœ‰ç‚¹åƒåŠ›ï¼Œè‡ªå·±åŠŸåŠ›è¿˜æ˜¯å·®å¾ˆå¤šï¼Œéœ€è¦ä¸æ–­å­¦ä¹ ä¸“æ +çœ‹ä¹¦è¡¥é½ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550093,"discussion_content":"å¿…é¡»çš„ï¼Œå°±æ˜¯è¦åœ¨ç»ƒä¹ ä¸­å­¦ä¹ ã€æˆé•¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644383196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325910,"user_name":"ue5","can_delete":false,"product_type":"c1","uid":2754983,"ip_address":"","ucode":"6CA310ACE02ED4","user_header":"https://static001.geekbang.org/account/avatar/00/2a/09/a7/541e33bc.jpg","comment_is_top":false,"comment_ctime":1639227168,"is_pvip":false,"replies":[{"id":118287,"content":"æ²¡çœ‹æ‡‚ä½ çš„æ„æ€ã€‚æˆ‘ç°åœ¨ä¸å°±æ˜¯åœ¨èµ‹å€¼å‡½æ•°é‡Œè°ƒç”¨æ„é€ å‡½æ•°å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1639372000,"ip_address":"","comment_id":325910,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"operator =() è°ƒç”¨å¤åˆ¶æ„é€ å¥½åƒæ›´æ–¹ä¾¿\n","like_count":0},{"had_liked":false,"id":319634,"user_name":"ä¸¥æµ·æ³¢","can_delete":false,"product_type":"c1","uid":1264573,"ip_address":"","ucode":"8D4E230FD95383","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/bd/fe8c68b3.jpg","comment_is_top":false,"comment_ctime":1635897234,"is_pvip":false,"replies":[{"id":115903,"content":"èµ‹å€¼è¿ç®—ç¬¦ï¼Ÿæ–‡å†…å·²ç»å†™äº†ï¼š\n\nã€ŒæŠŠèµ‹å€¼å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ smart_ptr&amp; æ”¹æˆäº† smart_ptrï¼Œåœ¨æ„é€ å‚æ•°æ—¶ç›´æ¥ç”Ÿæˆæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œä¸å†éœ€è¦åœ¨å‡½æ•°ä½“ä¸­æ„é€ ä¸´æ—¶å¯¹è±¡ã€‚ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚ã€","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1635935807,"ip_address":"","comment_id":319634,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ä¸ºä»€ä¹ˆèµ‹å€¼æ„é€ å‡½æ•°ä¸ä½¿ç”¨å¼•ç”¨ï¼Œæœ‰ç‰¹åˆ«åŸå› ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538218,"discussion_content":"æ²¡çœ‹æ‡‚ä½ çš„æ„æ€ã€‚æˆ‘ç°åœ¨ä¸å°±æ˜¯åœ¨èµ‹å€¼å‡½æ•°é‡Œè°ƒç”¨æ„é€ å‡½æ•°å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639372001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319632,"user_name":"ä¸¥æµ·æ³¢","can_delete":false,"product_type":"c1","uid":1264573,"ip_address":"","ucode":"8D4E230FD95383","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/bd/fe8c68b3.jpg","comment_is_top":false,"comment_ctime":1635896698,"is_pvip":false,"replies":[{"id":115902,"content":"æ²¡æœ‰æˆæœ¬çš„ï¼Œç¼–è¯‘å™¨å¯ä»¥å®Œå…¨ä¼˜åŒ–æ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1635935648,"ip_address":"","comment_id":319632,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"å¯¹äºshared_ptr,æ˜¯ä¸æ˜¯ç›´æ¥ç”¨ä¸€ä¸ªunsigned intå°±å¥½äº†ï¼Œæˆ‘æ˜ç™½ä½ æƒ³æŠŠ++ï¼Œ--å½’ç±»åŒ–ï¼Œå¯æ˜¯å¦å¤–çš„ç±»æ˜¯æœ‰æˆæœ¬çš„ï¼Œé‰´äºC++çš„ç²¾ç¥æ˜¯æ€§èƒ½è‡³ä¸Šã€‚å¼•å…¥å¦å¤–çš„ç±»æœ‰ç‚¹å¾—ä¸å¿å¤±ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529698,"discussion_content":"èµ‹å€¼è¿ç®—ç¬¦ï¼Ÿæ–‡å†…å·²ç»å†™äº†ï¼š\n\nã€ŒæŠŠèµ‹å€¼å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ smart_ptr&amp;amp; æ”¹æˆäº† smart_ptrï¼Œåœ¨æ„é€ å‚æ•°æ—¶ç›´æ¥ç”Ÿæˆæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œä¸å†éœ€è¦åœ¨å‡½æ•°ä½“ä¸­æ„é€ ä¸´æ—¶å¯¹è±¡ã€‚ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚ã€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635935807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316583,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1634432380,"is_pvip":false,"replies":[{"id":114637,"content":"å¾ˆä»”ç»†çš„è§‚å¯Ÿã€‚ä¸è¿‡ï¼Œå®è·µä¸Šåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚\n\nå¦‚æœä½ å¯¹â€œotherâ€é‡æ–°èµ‹å€¼çš„è¯ï¼Œä¼šèµ°åˆ° operator=(smart_ptr rhs) é‡Œé¢å»ï¼Œå¯¹åŸå…ˆçš„è€å¯¹è±¡å°±æ˜¯ææ„æ‰äº†ï¼ˆswap åˆ° rhs é‡Œï¼Œåœ¨å‡½æ•°ç»“æŸæ—¶ææ„ï¼‰ã€‚ææ„æ—¶å…ˆçœ‹ ptr_ ä¸ä¸ºç©ºæ‰ä¼šå»å‡è®¡æ•°å€¼çš„ã€‚\n\nç¡®å®éœ€è¦æ¯”è¾ƒå°å¿ƒï¼Œè¿™é‡Œæ˜¯æ¯”è¾ƒè¿½æ±‚æ€§èƒ½çš„åšæ³•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ç¼–ç¨‹ï¼Œæ¸…é›¶ä¼šæ›´æ¸…æ™°äº›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634448807,"ip_address":"","comment_id":316583,"utype":1}],"discussion_count":3,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘è‡ªå·±åœ¨å®ç°çš„æ—¶å€™å‘ç°ä¸ªé—®é¢˜ï¼Œå‡ºç°äº†å¼•ç”¨è®¡æ•°ä¸å®é™…ä¸ä¸€æ ·çš„æƒ…å†µã€‚\nå…·ä½“åœºæ™¯æ˜¯ï¼š\nSharedPtr&lt;Base&gt; sp2 = std::move(sp1) &#47;&#47; è°ƒç”¨ç§»åŠ¨æ„é€ \nsp1 = sp3 &#47;&#47; è°ƒç”¨èµ‹å€¼æ‹·è´ï¼Œå¯¹sp1é‡æ–°èµ‹å€¼\n\næˆ‘è§‰å¾—ä¸‹é¢è¿™å—æ˜¯ä¸æ˜¯å¾—åŠ ä¸Š other.shared_count_ = nullptr;\n\ntemplate smart_ptr(smart_ptr&amp;&amp; other) noexcept {\n ptr_ = other.ptr_; \n if (ptr_) { \n   shared_count_ = other.shared_count_; \n   other.ptr_ = nullptr; \n   other.shared_count_ = nullptr; &#47;&#47; otherå¯¹åº”çš„å®å‚å¯¹åº”çš„å¼•ç”¨è®¡æ•°å™¨ç½®ä¸ºnullptrï¼Œä¸ç„¶å¾—è¯é‡æ–°èµ‹å€¼çš„ï¼Œè¿˜ä¼šå¯¹åŸæ¥çš„å¼•ç”¨è®¡æ•°å™¨å‡ä¸€ã€‚\n  } \n}\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529697,"discussion_content":"æ²¡æœ‰æˆæœ¬çš„ï¼Œç¼–è¯‘å™¨å¯ä»¥å®Œå…¨ä¼˜åŒ–æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635935648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309223,"user_name":"æå®¢","can_delete":false,"product_type":"c1","uid":2625292,"ip_address":"","ucode":"DFB3B48045EA56","user_header":"https://static001.geekbang.org/account/avatar/00/28/0f/0c/5583558f.jpg","comment_is_top":false,"comment_ctime":1629989369,"is_pvip":false,"replies":[{"id":112006,"content":"è¿™è·Ÿå¤šå°‘å¹´å…³ç³»ä¸ç®—å¤ªå¤§ã€‚å»ºè®®ä»å¤´å¼€å§‹è¯•è¯»ä¸€ä¸‹ï¼Œå¦‚æœå¤´å‡ è®²èƒ½ç†è§£ï¼Œåé¢é—®é¢˜ä¹Ÿä¸å¤§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1630109627,"ip_address":"","comment_id":309223,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"æˆ‘æƒ³è¯·é—®ä¸‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¤šå°‘å¹´ç»éªŒçš„c++å¯ä»¥æµç•…çš„çœ‹å®Œï¼Œæ²¡æœ‰å‹åŠ›ï¼Ÿæˆ‘æ¥çœ‹ä¸‹æˆ‘çš„å±‚æ¬¡â€¦â€¦","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525793,"discussion_content":"è¿™è·Ÿå¤šå°‘å¹´å…³ç³»ä¸ç®—å¤ªå¤§ã€‚å»ºè®®ä»å¤´å¼€å§‹è¯•è¯»ä¸€ä¸‹ï¼Œå¦‚æœå¤´å‡ è®²èƒ½ç†è§£ï¼Œåé¢é—®é¢˜ä¹Ÿä¸å¤§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630109627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306416,"user_name":"è·å…°å°çŒª8813","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/66bf4bc4.jpg","comment_is_top":false,"comment_ctime":1628555489,"is_pvip":false,"replies":[{"id":110946,"content":"äº¤æ¢åªæ˜¯å®ç°äº†å¼‚å¸¸å®‰å…¨çš„èµ‹å€¼è€Œå·²ã€‚å®é™…çš„é€»è¾‘ä»ç„¶ä¸»è¦åœ¨é‚£ä¸ªâ€œæ‹·è´â€æ„é€ é‡Œï¼Œä¼šæ¸…ç©ºé‚£ä¸ªè¢«â€œæ‹·è´â€çš„å¯¹è±¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1628565205,"ip_address":"","comment_id":306416,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"ä¸Šé¢å®ç°çš„æœ€å¤§é—®é¢˜æ˜¯ï¼Œå®ƒçš„è¡Œä¸ºä¼šè®©ç¨‹åºå‘˜éå¸¸å®¹æ˜“çŠ¯é”™ã€‚ä¸€ä¸å°å¿ƒæŠŠå®ƒä¼ é€’ç»™å¦å¤–ä¸€ä¸ª smart_ptrï¼Œä½ å°±ä¸å†æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡äº†â€¦â€¦\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿèµ‹å€¼ = ä¸æœ‰äº¤æ¢æŒ‡é’ˆä¹ˆï¼Œå¯¹è±¡ä¸ä¼šä¸¢å‘€ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525793,"discussion_content":"è¿™è·Ÿå¤šå°‘å¹´å…³ç³»ä¸ç®—å¤ªå¤§ã€‚å»ºè®®ä»å¤´å¼€å§‹è¯•è¯»ä¸€ä¸‹ï¼Œå¦‚æœå¤´å‡ è®²èƒ½ç†è§£ï¼Œåé¢é—®é¢˜ä¹Ÿä¸å¤§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630109627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304919,"user_name":"å°‘å¹´","can_delete":false,"product_type":"c1","uid":2714125,"ip_address":"","ucode":"0403897F55879C","user_header":"https://static001.geekbang.org/account/avatar/00/29/6a/0d/38607302.jpg","comment_is_top":false,"comment_ctime":1627701318,"is_pvip":false,"replies":[{"id":110322,"content":"ä½ åœ¨ A ç±»é‡Œå£°æ˜ friend class B;ï¼Œä½ è¯´è°æ˜¯è°çš„å‹å…ƒï¼Ÿâ˜ºï¸â€”â€”é“ç†æ˜¯ä¸€æ ·çš„ã€‚\n\nè¿™åªæœ‰ä¸€ä¸ªæ–¹å‘ï¼Œå› ä¸º A æ‰æœ‰èµ„æ ¼å®£å‘Šå®ƒå…è®¸è°è·‘åˆ°å®ƒå®¶é‡Œä¹±åŠ¨ã€‚æ˜¾ç„¶ï¼Œæ–¹å‘åæ‰çš„è¯ï¼Œå°±ä¹±å¥—äº†ï¼Œè®¿é—®æ§åˆ¶å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚\n\nå½“ç„¶ï¼Œå¯¹äº Tã€U çš„æˆ‘ä»¬çš„ä¾‹å­ï¼Œå®é™…ä¸Šæ˜¯å¯¹ç§°çš„ï¼Œä¸é‚£ä¹ˆé‡è¦ã€‚ä½†ç†è®ºä¸Šæ¥è®²ï¼Œæ¨ç†æ–¹å¼æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1627735187,"ip_address":"","comment_id":304919,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹\n  template &lt;typename U&gt;\n  friend class smart_ptr;\nè¿™å¥è¯æ˜¯smart_ptr&lt;U&gt;æ˜¯smart_ptr&lt;T&gt;çš„å‹å…ƒ\nè¿˜æ˜¯smart_ptr&lt;T&gt;æ˜¯smart_ptr&lt;U&gt;çš„å‹å…ƒï¼Ÿ\nè¯·é—®æ˜¯æ€ä¹ˆçœ‹çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524211,"discussion_content":"ä½ åœ¨ A ç±»é‡Œå£°æ˜ friend class B;ï¼Œä½ è¯´è°æ˜¯è°çš„å‹å…ƒï¼Ÿâ˜ºï¸â€”â€”é“ç†æ˜¯ä¸€æ ·çš„ã€‚\n\nè¿™åªæœ‰ä¸€ä¸ªæ–¹å‘ï¼Œå› ä¸º A æ‰æœ‰èµ„æ ¼å®£å‘Šå®ƒå…è®¸è°è·‘åˆ°å®ƒå®¶é‡Œä¹±åŠ¨ã€‚æ˜¾ç„¶ï¼Œæ–¹å‘åæ‰çš„è¯ï¼Œå°±ä¹±å¥—äº†ï¼Œè®¿é—®æ§åˆ¶å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚\n\nå½“ç„¶ï¼Œå¯¹äº Tã€U çš„æˆ‘ä»¬çš„ä¾‹å­ï¼Œå®é™…ä¸Šæ˜¯å¯¹ç§°çš„ï¼Œä¸é‚£ä¹ˆé‡è¦ã€‚ä½†ç†è®ºä¸Šæ¥è®²ï¼Œæ¨ç†æ–¹å¼æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627735187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303552,"user_name":"JC","can_delete":false,"product_type":"c1","uid":2466389,"ip_address":"","ucode":"0FB3C53427DF98","user_header":"https://static001.geekbang.org/account/avatar/00/25/a2/55/ec6b990a.jpg","comment_is_top":false,"comment_ctime":1626853114,"is_pvip":false,"replies":[{"id":109933,"content":"â€œå¦åˆ™ï¼Œsmart_ptr ptr2{ptr1}; åœ¨ç¼–è¯‘æ—¶ä¸ä¼šå‡ºé”™ï¼Œä½†åœ¨è¿è¡Œæ—¶å´ä¼šæœ‰æœªå®šä¹‰è¡Œä¸ºâ€â€”â€”æ˜¯æŒ‡è¿™å¥è¯å—ï¼Ÿ\n\nâ€œå¦åˆ™â€æŒ‡çš„æ˜¯ä¸ delete æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦çš„è¯â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1626961945,"ip_address":"","comment_id":303552,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"ç¯å¢ƒ + ç¼–è¯‘å™¨ç‰ˆæœ¬\nvscode + gcc version 9.3.0 (Ubuntu 9.3.0-17ubuntu1~20.04):\n\nå…¶ä¸­ä½ æåˆ° é€šè¿‡deleteæ¥åˆ é™¤ èµ‹å€¼ä¸æ‹·è´ä¸¤ä¸ªå‡½æ•°\n\nsmart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1}; &#47;&#47; 1\n\nå…ˆç„¶1 åœ¨ç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™ï¼Œåº”è¯¥ç¼–è¯‘å™¨æ‰¾ä¸åˆ°æ‹·è´æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ä½ è¯´ä¸ä¼šæŠ¥é”™å‘¢\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523734,"discussion_content":"â€œå¦åˆ™ï¼Œsmart_ptr ptr2{ptr1}; åœ¨ç¼–è¯‘æ—¶ä¸ä¼šå‡ºé”™ï¼Œä½†åœ¨è¿è¡Œæ—¶å´ä¼šæœ‰æœªå®šä¹‰è¡Œä¸ºâ€â€”â€”æ˜¯æŒ‡è¿™å¥è¯å—ï¼Ÿ\n\nâ€œå¦åˆ™â€æŒ‡çš„æ˜¯ä¸ delete æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦çš„è¯â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626961945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299850,"user_name":"Wei Zhou","can_delete":false,"product_type":"c1","uid":2670319,"ip_address":"","ucode":"91B72493A8765D","user_header":"https://static001.geekbang.org/account/avatar/00/28/be/ef/a1bb0528.jpg","comment_is_top":false,"comment_ctime":1624884030,"is_pvip":false,"replies":[{"id":108845,"content":"ä»£ç è¦è°ƒç”¨ operator=ï¼Œéœ€è¦æ„é€ ä¸€ä¸ª smart_ptrã€‚æˆ‘ä»¬åªæä¾›äº†å³å€¼çš„ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå·¦å€¼çš„æ‹·è´æ„é€ å‡½æ•°è¢«è‡ªåŠ¨ç¦ç”¨ã€‚ptr1 ä¸æ˜¯å³å€¼ï¼Œç¼–è¯‘å™¨æ‰¾ä¸åˆ°åˆé€‚çš„æ„é€ å‡½æ•°ï¼Œå¤±è´¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1625098497,"ip_address":"","comment_id":299850,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr3;\nptr3 = ptr1;                             &#47;&#47; ç¼–è¯‘å‡ºé”™\nå†è§£é‡Šä¸€ä¸‹è¿™ä¸€è¡Œä¸ºä»€ä¹ˆä¼šç¼–è¯‘å‡ºé”™å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523734,"discussion_content":"â€œå¦åˆ™ï¼Œsmart_ptr ptr2{ptr1}; åœ¨ç¼–è¯‘æ—¶ä¸ä¼šå‡ºé”™ï¼Œä½†åœ¨è¿è¡Œæ—¶å´ä¼šæœ‰æœªå®šä¹‰è¡Œä¸ºâ€â€”â€”æ˜¯æŒ‡è¿™å¥è¯å—ï¼Ÿ\n\nâ€œå¦åˆ™â€æŒ‡çš„æ˜¯ä¸ delete æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦çš„è¯â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626961945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299848,"user_name":"Wei Zhou","can_delete":false,"product_type":"c1","uid":2670319,"ip_address":"","ucode":"91B72493A8765D","user_header":"https://static001.geekbang.org/account/avatar/00/28/be/ef/a1bb0528.jpg","comment_is_top":false,"comment_ctime":1624883366,"is_pvip":false,"replies":[{"id":108843,"content":"ptr1ã€ptr2ã€ptr3 ä¸‰ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œå¼•ç”¨è®¡æ•°å°±æ˜¯ 3 äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1625098223,"ip_address":"","comment_id":299848,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"use count of ptr3 ä¸ºä»€ä¹ˆæ˜¯ 3? ä¸æ˜¯2å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522562,"discussion_content":"ptr1ã€ptr2ã€ptr3 ä¸‰ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œå¼•ç”¨è®¡æ•°å°±æ˜¯ 3 äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625098223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325910,"user_name":"ue5","can_delete":false,"product_type":"c1","uid":2754983,"ip_address":"","ucode":"6CA310ACE02ED4","user_header":"https://static001.geekbang.org/account/avatar/00/2a/09/a7/541e33bc.jpg","comment_is_top":false,"comment_ctime":1639227168,"is_pvip":false,"replies":[{"id":118287,"content":"æ²¡çœ‹æ‡‚ä½ çš„æ„æ€ã€‚æˆ‘ç°åœ¨ä¸å°±æ˜¯åœ¨èµ‹å€¼å‡½æ•°é‡Œè°ƒç”¨æ„é€ å‡½æ•°å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1639372000,"ip_address":"","comment_id":325910,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"operator =() è°ƒç”¨å¤åˆ¶æ„é€ å¥½åƒæ›´æ–¹ä¾¿\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538218,"discussion_content":"æ²¡çœ‹æ‡‚ä½ çš„æ„æ€ã€‚æˆ‘ç°åœ¨ä¸å°±æ˜¯åœ¨èµ‹å€¼å‡½æ•°é‡Œè°ƒç”¨æ„é€ å‡½æ•°å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639372001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319634,"user_name":"ä¸¥æµ·æ³¢","can_delete":false,"product_type":"c1","uid":1264573,"ip_address":"","ucode":"8D4E230FD95383","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/bd/fe8c68b3.jpg","comment_is_top":false,"comment_ctime":1635897234,"is_pvip":false,"replies":[{"id":115903,"content":"èµ‹å€¼è¿ç®—ç¬¦ï¼Ÿæ–‡å†…å·²ç»å†™äº†ï¼š\n\nã€ŒæŠŠèµ‹å€¼å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ smart_ptr&amp; æ”¹æˆäº† smart_ptrï¼Œåœ¨æ„é€ å‚æ•°æ—¶ç›´æ¥ç”Ÿæˆæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œä¸å†éœ€è¦åœ¨å‡½æ•°ä½“ä¸­æ„é€ ä¸´æ—¶å¯¹è±¡ã€‚ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚ã€","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1635935807,"ip_address":"","comment_id":319634,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ä¸ºä»€ä¹ˆèµ‹å€¼æ„é€ å‡½æ•°ä¸ä½¿ç”¨å¼•ç”¨ï¼Œæœ‰ç‰¹åˆ«åŸå› ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529698,"discussion_content":"èµ‹å€¼è¿ç®—ç¬¦ï¼Ÿæ–‡å†…å·²ç»å†™äº†ï¼š\n\nã€ŒæŠŠèµ‹å€¼å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ smart_ptr&amp;amp; æ”¹æˆäº† smart_ptrï¼Œåœ¨æ„é€ å‚æ•°æ—¶ç›´æ¥ç”Ÿæˆæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œä¸å†éœ€è¦åœ¨å‡½æ•°ä½“ä¸­æ„é€ ä¸´æ—¶å¯¹è±¡ã€‚ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚ã€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635935807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319632,"user_name":"ä¸¥æµ·æ³¢","can_delete":false,"product_type":"c1","uid":1264573,"ip_address":"","ucode":"8D4E230FD95383","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/bd/fe8c68b3.jpg","comment_is_top":false,"comment_ctime":1635896698,"is_pvip":false,"replies":[{"id":115902,"content":"æ²¡æœ‰æˆæœ¬çš„ï¼Œç¼–è¯‘å™¨å¯ä»¥å®Œå…¨ä¼˜åŒ–æ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1635935648,"ip_address":"","comment_id":319632,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"å¯¹äºshared_ptr,æ˜¯ä¸æ˜¯ç›´æ¥ç”¨ä¸€ä¸ªunsigned intå°±å¥½äº†ï¼Œæˆ‘æ˜ç™½ä½ æƒ³æŠŠ++ï¼Œ--å½’ç±»åŒ–ï¼Œå¯æ˜¯å¦å¤–çš„ç±»æ˜¯æœ‰æˆæœ¬çš„ï¼Œé‰´äºC++çš„ç²¾ç¥æ˜¯æ€§èƒ½è‡³ä¸Šã€‚å¼•å…¥å¦å¤–çš„ç±»æœ‰ç‚¹å¾—ä¸å¿å¤±ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529697,"discussion_content":"æ²¡æœ‰æˆæœ¬çš„ï¼Œç¼–è¯‘å™¨å¯ä»¥å®Œå…¨ä¼˜åŒ–æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635935648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316583,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1634432380,"is_pvip":false,"replies":[{"id":114637,"content":"å¾ˆä»”ç»†çš„è§‚å¯Ÿã€‚ä¸è¿‡ï¼Œå®è·µä¸Šåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚\n\nå¦‚æœä½ å¯¹â€œotherâ€é‡æ–°èµ‹å€¼çš„è¯ï¼Œä¼šèµ°åˆ° operator=(smart_ptr rhs) é‡Œé¢å»ï¼Œå¯¹åŸå…ˆçš„è€å¯¹è±¡å°±æ˜¯ææ„æ‰äº†ï¼ˆswap åˆ° rhs é‡Œï¼Œåœ¨å‡½æ•°ç»“æŸæ—¶ææ„ï¼‰ã€‚ææ„æ—¶å…ˆçœ‹ ptr_ ä¸ä¸ºç©ºæ‰ä¼šå»å‡è®¡æ•°å€¼çš„ã€‚\n\nç¡®å®éœ€è¦æ¯”è¾ƒå°å¿ƒï¼Œè¿™é‡Œæ˜¯æ¯”è¾ƒè¿½æ±‚æ€§èƒ½çš„åšæ³•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ç¼–ç¨‹ï¼Œæ¸…é›¶ä¼šæ›´æ¸…æ™°äº›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634448807,"ip_address":"","comment_id":316583,"utype":1}],"discussion_count":3,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘è‡ªå·±åœ¨å®ç°çš„æ—¶å€™å‘ç°ä¸ªé—®é¢˜ï¼Œå‡ºç°äº†å¼•ç”¨è®¡æ•°ä¸å®é™…ä¸ä¸€æ ·çš„æƒ…å†µã€‚\nå…·ä½“åœºæ™¯æ˜¯ï¼š\nSharedPtr&lt;Base&gt; sp2 = std::move(sp1) &#47;&#47; è°ƒç”¨ç§»åŠ¨æ„é€ \nsp1 = sp3 &#47;&#47; è°ƒç”¨èµ‹å€¼æ‹·è´ï¼Œå¯¹sp1é‡æ–°èµ‹å€¼\n\næˆ‘è§‰å¾—ä¸‹é¢è¿™å—æ˜¯ä¸æ˜¯å¾—åŠ ä¸Š other.shared_count_ = nullptr;\n\ntemplate smart_ptr(smart_ptr&amp;&amp; other) noexcept {\n ptr_ = other.ptr_; \n if (ptr_) { \n   shared_count_ = other.shared_count_; \n   other.ptr_ = nullptr; \n   other.shared_count_ = nullptr; &#47;&#47; otherå¯¹åº”çš„å®å‚å¯¹åº”çš„å¼•ç”¨è®¡æ•°å™¨ç½®ä¸ºnullptrï¼Œä¸ç„¶å¾—è¯é‡æ–°èµ‹å€¼çš„ï¼Œè¿˜ä¼šå¯¹åŸæ¥çš„å¼•ç”¨è®¡æ•°å™¨å‡ä¸€ã€‚\n  } \n}\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528420,"discussion_content":"å¾ˆä»”ç»†çš„è§‚å¯Ÿã€‚ä¸è¿‡ï¼Œå®è·µä¸Šåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚\n\nå¦‚æœä½ å¯¹â€œotherâ€é‡æ–°èµ‹å€¼çš„è¯ï¼Œä¼šèµ°åˆ° operator=(smart_ptr rhs) é‡Œé¢å»ï¼Œå¯¹åŸå…ˆçš„è€å¯¹è±¡å°±æ˜¯ææ„æ‰äº†ï¼ˆswap åˆ° rhs é‡Œï¼Œåœ¨å‡½æ•°ç»“æŸæ—¶ææ„ï¼‰ã€‚ææ„æ—¶å…ˆçœ‹ ptr_ ä¸ä¸ºç©ºæ‰ä¼šå»å‡è®¡æ•°å€¼çš„ã€‚\n\nç¡®å®éœ€è¦æ¯”è¾ƒå°å¿ƒï¼Œè¿™é‡Œæ˜¯æ¯”è¾ƒè¿½æ±‚æ€§èƒ½çš„åšæ³•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ç¼–ç¨‹ï¼Œæ¸…é›¶ä¼šæ›´æ¸…æ™°äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634448807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101894,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","nickname":"NEVER SETTLE","note":"","ucode":"9C86BDAFDBF768","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405255,"discussion_content":"å®ç°ææ„æ—¶å€™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634541710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101894,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","nickname":"NEVER SETTLE","note":"","ucode":"9C86BDAFDBF768","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405254,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘è‡ªå·±å®ç°æ—¶å€™ï¼Œå…ˆåˆ¤æ–­è®¡æ•°å™¨å‡1ï¼Œå†åˆ¤æ–­ptræ˜¯å¦ä¸ºç©ºï¼Œè¿™å—å†™çš„æœ‰é—®é¢˜ï¼Œè§¦å‘äº†ä¸Šé¢çš„caseã€‚æˆ‘çœ‹æ‚¨æ˜¯å¹¶åˆ—åˆ¤æ–­ï¼Œä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634541634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309223,"user_name":"æå®¢","can_delete":false,"product_type":"c1","uid":2625292,"ip_address":"","ucode":"DFB3B48045EA56","user_header":"https://static001.geekbang.org/account/avatar/00/28/0f/0c/5583558f.jpg","comment_is_top":false,"comment_ctime":1629989369,"is_pvip":false,"replies":[{"id":112006,"content":"è¿™è·Ÿå¤šå°‘å¹´å…³ç³»ä¸ç®—å¤ªå¤§ã€‚å»ºè®®ä»å¤´å¼€å§‹è¯•è¯»ä¸€ä¸‹ï¼Œå¦‚æœå¤´å‡ è®²èƒ½ç†è§£ï¼Œåé¢é—®é¢˜ä¹Ÿä¸å¤§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1630109627,"ip_address":"","comment_id":309223,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"æˆ‘æƒ³è¯·é—®ä¸‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¤šå°‘å¹´ç»éªŒçš„c++å¯ä»¥æµç•…çš„çœ‹å®Œï¼Œæ²¡æœ‰å‹åŠ›ï¼Ÿæˆ‘æ¥çœ‹ä¸‹æˆ‘çš„å±‚æ¬¡â€¦â€¦","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528420,"discussion_content":"å¾ˆä»”ç»†çš„è§‚å¯Ÿã€‚ä¸è¿‡ï¼Œå®è·µä¸Šåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚\n\nå¦‚æœä½ å¯¹â€œotherâ€é‡æ–°èµ‹å€¼çš„è¯ï¼Œä¼šèµ°åˆ° operator=(smart_ptr rhs) é‡Œé¢å»ï¼Œå¯¹åŸå…ˆçš„è€å¯¹è±¡å°±æ˜¯ææ„æ‰äº†ï¼ˆswap åˆ° rhs é‡Œï¼Œåœ¨å‡½æ•°ç»“æŸæ—¶ææ„ï¼‰ã€‚ææ„æ—¶å…ˆçœ‹ ptr_ ä¸ä¸ºç©ºæ‰ä¼šå»å‡è®¡æ•°å€¼çš„ã€‚\n\nç¡®å®éœ€è¦æ¯”è¾ƒå°å¿ƒï¼Œè¿™é‡Œæ˜¯æ¯”è¾ƒè¿½æ±‚æ€§èƒ½çš„åšæ³•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ç¼–ç¨‹ï¼Œæ¸…é›¶ä¼šæ›´æ¸…æ™°äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634448807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101894,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","nickname":"NEVER SETTLE","note":"","ucode":"9C86BDAFDBF768","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405255,"discussion_content":"å®ç°ææ„æ—¶å€™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634541710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101894,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","nickname":"NEVER SETTLE","note":"","ucode":"9C86BDAFDBF768","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405254,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘è‡ªå·±å®ç°æ—¶å€™ï¼Œå…ˆåˆ¤æ–­è®¡æ•°å™¨å‡1ï¼Œå†åˆ¤æ–­ptræ˜¯å¦ä¸ºç©ºï¼Œè¿™å—å†™çš„æœ‰é—®é¢˜ï¼Œè§¦å‘äº†ä¸Šé¢çš„caseã€‚æˆ‘çœ‹æ‚¨æ˜¯å¹¶åˆ—åˆ¤æ–­ï¼Œä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634541634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306416,"user_name":"è·å…°å°çŒª8813","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/66bf4bc4.jpg","comment_is_top":false,"comment_ctime":1628555489,"is_pvip":false,"replies":[{"id":110946,"content":"äº¤æ¢åªæ˜¯å®ç°äº†å¼‚å¸¸å®‰å…¨çš„èµ‹å€¼è€Œå·²ã€‚å®é™…çš„é€»è¾‘ä»ç„¶ä¸»è¦åœ¨é‚£ä¸ªâ€œæ‹·è´â€æ„é€ é‡Œï¼Œä¼šæ¸…ç©ºé‚£ä¸ªè¢«â€œæ‹·è´â€çš„å¯¹è±¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1628565205,"ip_address":"","comment_id":306416,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"ä¸Šé¢å®ç°çš„æœ€å¤§é—®é¢˜æ˜¯ï¼Œå®ƒçš„è¡Œä¸ºä¼šè®©ç¨‹åºå‘˜éå¸¸å®¹æ˜“çŠ¯é”™ã€‚ä¸€ä¸å°å¿ƒæŠŠå®ƒä¼ é€’ç»™å¦å¤–ä¸€ä¸ª smart_ptrï¼Œä½ å°±ä¸å†æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡äº†â€¦â€¦\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿèµ‹å€¼ = ä¸æœ‰äº¤æ¢æŒ‡é’ˆä¹ˆï¼Œå¯¹è±¡ä¸ä¼šä¸¢å‘€ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524755,"discussion_content":"äº¤æ¢åªæ˜¯å®ç°äº†å¼‚å¸¸å®‰å…¨çš„èµ‹å€¼è€Œå·²ã€‚å®é™…çš„é€»è¾‘ä»ç„¶ä¸»è¦åœ¨é‚£ä¸ªâ€œæ‹·è´â€æ„é€ é‡Œï¼Œä¼šæ¸…ç©ºé‚£ä¸ªè¢«â€œæ‹·è´â€çš„å¯¹è±¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628565205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304919,"user_name":"å°‘å¹´","can_delete":false,"product_type":"c1","uid":2714125,"ip_address":"","ucode":"0403897F55879C","user_header":"https://static001.geekbang.org/account/avatar/00/29/6a/0d/38607302.jpg","comment_is_top":false,"comment_ctime":1627701318,"is_pvip":false,"replies":[{"id":110322,"content":"ä½ åœ¨ A ç±»é‡Œå£°æ˜ friend class B;ï¼Œä½ è¯´è°æ˜¯è°çš„å‹å…ƒï¼Ÿâ˜ºï¸â€”â€”é“ç†æ˜¯ä¸€æ ·çš„ã€‚\n\nè¿™åªæœ‰ä¸€ä¸ªæ–¹å‘ï¼Œå› ä¸º A æ‰æœ‰èµ„æ ¼å®£å‘Šå®ƒå…è®¸è°è·‘åˆ°å®ƒå®¶é‡Œä¹±åŠ¨ã€‚æ˜¾ç„¶ï¼Œæ–¹å‘åæ‰çš„è¯ï¼Œå°±ä¹±å¥—äº†ï¼Œè®¿é—®æ§åˆ¶å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚\n\nå½“ç„¶ï¼Œå¯¹äº Tã€U çš„æˆ‘ä»¬çš„ä¾‹å­ï¼Œå®é™…ä¸Šæ˜¯å¯¹ç§°çš„ï¼Œä¸é‚£ä¹ˆé‡è¦ã€‚ä½†ç†è®ºä¸Šæ¥è®²ï¼Œæ¨ç†æ–¹å¼æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1627735187,"ip_address":"","comment_id":304919,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹\n  template &lt;typename U&gt;\n  friend class smart_ptr;\nè¿™å¥è¯æ˜¯smart_ptr&lt;U&gt;æ˜¯smart_ptr&lt;T&gt;çš„å‹å…ƒ\nè¿˜æ˜¯smart_ptr&lt;T&gt;æ˜¯smart_ptr&lt;U&gt;çš„å‹å…ƒï¼Ÿ\nè¯·é—®æ˜¯æ€ä¹ˆçœ‹çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524755,"discussion_content":"äº¤æ¢åªæ˜¯å®ç°äº†å¼‚å¸¸å®‰å…¨çš„èµ‹å€¼è€Œå·²ã€‚å®é™…çš„é€»è¾‘ä»ç„¶ä¸»è¦åœ¨é‚£ä¸ªâ€œæ‹·è´â€æ„é€ é‡Œï¼Œä¼šæ¸…ç©ºé‚£ä¸ªè¢«â€œæ‹·è´â€çš„å¯¹è±¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628565205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303552,"user_name":"JC","can_delete":false,"product_type":"c1","uid":2466389,"ip_address":"","ucode":"0FB3C53427DF98","user_header":"https://static001.geekbang.org/account/avatar/00/25/a2/55/ec6b990a.jpg","comment_is_top":false,"comment_ctime":1626853114,"is_pvip":false,"replies":[{"id":109933,"content":"â€œå¦åˆ™ï¼Œsmart_ptr ptr2{ptr1}; åœ¨ç¼–è¯‘æ—¶ä¸ä¼šå‡ºé”™ï¼Œä½†åœ¨è¿è¡Œæ—¶å´ä¼šæœ‰æœªå®šä¹‰è¡Œä¸ºâ€â€”â€”æ˜¯æŒ‡è¿™å¥è¯å—ï¼Ÿ\n\nâ€œå¦åˆ™â€æŒ‡çš„æ˜¯ä¸ delete æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦çš„è¯â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1626961945,"ip_address":"","comment_id":303552,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"ç¯å¢ƒ + ç¼–è¯‘å™¨ç‰ˆæœ¬\nvscode + gcc version 9.3.0 (Ubuntu 9.3.0-17ubuntu1~20.04):\n\nå…¶ä¸­ä½ æåˆ° é€šè¿‡deleteæ¥åˆ é™¤ èµ‹å€¼ä¸æ‹·è´ä¸¤ä¸ªå‡½æ•°\n\nsmart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1}; &#47;&#47; 1\n\nå…ˆç„¶1 åœ¨ç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™ï¼Œåº”è¯¥ç¼–è¯‘å™¨æ‰¾ä¸åˆ°æ‹·è´æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ä½ è¯´ä¸ä¼šæŠ¥é”™å‘¢\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524211,"discussion_content":"ä½ åœ¨ A ç±»é‡Œå£°æ˜ friend class B;ï¼Œä½ è¯´è°æ˜¯è°çš„å‹å…ƒï¼Ÿâ˜ºï¸â€”â€”é“ç†æ˜¯ä¸€æ ·çš„ã€‚\n\nè¿™åªæœ‰ä¸€ä¸ªæ–¹å‘ï¼Œå› ä¸º A æ‰æœ‰èµ„æ ¼å®£å‘Šå®ƒå…è®¸è°è·‘åˆ°å®ƒå®¶é‡Œä¹±åŠ¨ã€‚æ˜¾ç„¶ï¼Œæ–¹å‘åæ‰çš„è¯ï¼Œå°±ä¹±å¥—äº†ï¼Œè®¿é—®æ§åˆ¶å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚\n\nå½“ç„¶ï¼Œå¯¹äº Tã€U çš„æˆ‘ä»¬çš„ä¾‹å­ï¼Œå®é™…ä¸Šæ˜¯å¯¹ç§°çš„ï¼Œä¸é‚£ä¹ˆé‡è¦ã€‚ä½†ç†è®ºä¸Šæ¥è®²ï¼Œæ¨ç†æ–¹å¼æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627735187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299850,"user_name":"Wei Zhou","can_delete":false,"product_type":"c1","uid":2670319,"ip_address":"","ucode":"91B72493A8765D","user_header":"https://static001.geekbang.org/account/avatar/00/28/be/ef/a1bb0528.jpg","comment_is_top":false,"comment_ctime":1624884030,"is_pvip":false,"replies":[{"id":108845,"content":"ä»£ç è¦è°ƒç”¨ operator=ï¼Œéœ€è¦æ„é€ ä¸€ä¸ª smart_ptrã€‚æˆ‘ä»¬åªæä¾›äº†å³å€¼çš„ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå·¦å€¼çš„æ‹·è´æ„é€ å‡½æ•°è¢«è‡ªåŠ¨ç¦ç”¨ã€‚ptr1 ä¸æ˜¯å³å€¼ï¼Œç¼–è¯‘å™¨æ‰¾ä¸åˆ°åˆé€‚çš„æ„é€ å‡½æ•°ï¼Œå¤±è´¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1625098497,"ip_address":"","comment_id":299850,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr3;\nptr3 = ptr1;                             &#47;&#47; ç¼–è¯‘å‡ºé”™\nå†è§£é‡Šä¸€ä¸‹è¿™ä¸€è¡Œä¸ºä»€ä¹ˆä¼šç¼–è¯‘å‡ºé”™å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522563,"discussion_content":"ä»£ç è¦è°ƒç”¨ operator=ï¼Œéœ€è¦æ„é€ ä¸€ä¸ª smart_ptrã€‚æˆ‘ä»¬åªæä¾›äº†å³å€¼çš„ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå·¦å€¼çš„æ‹·è´æ„é€ å‡½æ•°è¢«è‡ªåŠ¨ç¦ç”¨ã€‚ptr1 ä¸æ˜¯å³å€¼ï¼Œç¼–è¯‘å™¨æ‰¾ä¸åˆ°åˆé€‚çš„æ„é€ å‡½æ•°ï¼Œå¤±è´¥ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625098497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299848,"user_name":"Wei Zhou","can_delete":false,"product_type":"c1","uid":2670319,"ip_address":"","ucode":"91B72493A8765D","user_header":"https://static001.geekbang.org/account/avatar/00/28/be/ef/a1bb0528.jpg","comment_is_top":false,"comment_ctime":1624883366,"is_pvip":false,"replies":[{"id":108843,"content":"ptr1ã€ptr2ã€ptr3 ä¸‰ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œå¼•ç”¨è®¡æ•°å°±æ˜¯ 3 äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1625098223,"ip_address":"","comment_id":299848,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100040501,"comment_content":"use count of ptr3 ä¸ºä»€ä¹ˆæ˜¯ 3? ä¸æ˜¯2å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522563,"discussion_content":"ä»£ç è¦è°ƒç”¨ operator=ï¼Œéœ€è¦æ„é€ ä¸€ä¸ª smart_ptrã€‚æˆ‘ä»¬åªæä¾›äº†å³å€¼çš„ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå·¦å€¼çš„æ‹·è´æ„é€ å‡½æ•°è¢«è‡ªåŠ¨ç¦ç”¨ã€‚ptr1 ä¸æ˜¯å³å€¼ï¼Œç¼–è¯‘å™¨æ‰¾ä¸åˆ°åˆé€‚çš„æ„é€ å‡½æ•°ï¼Œå¤±è´¥ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625098497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298087,"user_name":"Queenie","can_delete":false,"product_type":"c1","uid":2303115,"ip_address":"","ucode":"BC3F5615537FA0","user_header":"https://static001.geekbang.org/account/avatar/00/23/24/8b/10e78e95.jpg","comment_is_top":false,"comment_ctime":1623908642,"is_pvip":false,"replies":[{"id":108279,"content":"å¤´ä¸¤ä¸ªæ˜¯è¿ç®—ç¬¦é‡è½½ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ç±»çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦ã€‚è¿™äº›ä½ æœç´¢ä¸€ä¸‹å°±å¯ä»¥æ‰¾åˆ°å¤§é‡çš„èµ„æ–™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1624110524,"ip_address":"","comment_id":298087,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ï¼ŒC++åŸºç¡€è¾ƒå¼±ï¼Œå¬äº†å‡ éï¼Œæœ‰äº›åœ°æ–¹è¿˜æ˜¯æ²¡å¤ªæ˜ç™½ã€‚\nç›®å‰è¿™ä¸ª smart_ptr çš„è¡Œä¸ºè¿˜æ˜¯å’ŒæŒ‡é’ˆæœ‰ç‚¹å·®å¼‚çš„ï¼š\nå®ƒä¸èƒ½ç”¨ * è¿ç®—ç¬¦è§£å¼•ç”¨\nå®ƒä¸èƒ½ç”¨ -&gt; è¿ç®—ç¬¦æŒ‡å‘å¯¹è±¡æˆå‘˜\nå®ƒä¸èƒ½åƒæŒ‡é’ˆä¸€æ ·ç”¨åœ¨å¸ƒå°”è¡¨è¾¾å¼é‡Œï¼Œ\nè§£å†³è¿™å‡ ä¸ªé—®é¢˜ï¼Œå¢åŠ äº†å‡ ä¸ªæˆå‘˜å‡½æ•°ï¼Œè¿™ä¸ªè§£å†³å…·ä½“æ–¹æ³•æ˜¯è¿ç®—ç¬¦é‡è½½å—ï¼Ÿå¯ä»¥è¯¦ç»†è®²è§£ä¸‹å—\n","like_count":0},{"had_liked":false,"id":296373,"user_name":"æ— æ¶¯","can_delete":false,"product_type":"c1","uid":2206226,"ip_address":"","ucode":"9A3B2774BC6E5F","user_header":"https://static001.geekbang.org/account/avatar/00/21/aa/12/7ac87dd6.jpg","comment_is_top":false,"comment_ctime":1622944504,"is_pvip":false,"replies":[{"id":107754,"content":"é¦–å…ˆï¼Œåªæœ‰2è¿™ç§å½¢å¼å¯èƒ½è¿”å›å€¼ä¼˜åŒ–ã€‚1æ˜¯èµ‹å€¼ï¼Œä¸èƒ½ã€‚æˆ‘ä»¬ä»”ç»†çœ‹çœ‹1ã€‚\n\näº‹å®ä¸Šï¼Œç›®å‰çœ‹èµ·æ¥è¿™é‡Œé¢çš„å¤æ‚æ€§åº”è¯¥æ˜¯å› ä¸ºä½ çš„ ptr1 å’Œ ptr3 çš„ç±»å‹ä¸åŒï¼ˆè€Œæˆ‘ç½‘ä¸Šè´´çš„ä»£ç è¿™ä¸¤ä¸ªå˜é‡çš„ç±»å‹æ°å¥½ç›¸åŒï¼‰ã€‚æˆ‘ä»¬ä¸‹é¢åˆ†æä¸€ä¸‹ã€‚\n\nèµ‹å€¼è¿ç®—ç¬¦çš„å‚æ•°æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå®ƒéœ€è¦æ„é€ ä¸€ä¸ªè·Ÿå·¦ä¾§ä¸€æ ·ç±»å‹çš„å¯¹è±¡å‡ºæ¥ã€‚åœ¨ä½ æä¾›ä¸€ä¸ªå·¦å€¼çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†å¾—åˆ°å·¦è¾¹çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šæ‰¾åˆ°å¸¦æ¨¡æ¿çš„é‚£ä¸ªâ€œæ‹·è´â€æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºè·Ÿå·¦è¾¹ä¸€æ ·çš„ç±»å‹ã€‚\n\nå¯¹äºèµ‹å€¼è¿ç®—ç¬¦çš„å€¼å‚æ•°ï¼Œä½ ä¼ ä¸€ä¸ªå·¦å€¼å‚æ•°å°±ä¼šå‘ç”Ÿæ‹·è´æ„é€ ï¼Œä¼ ä¸€ä¸ªå³å€¼å‚æ•°ä¼šå‘ç”Ÿç§»åŠ¨æ„é€ ã€‚ç°åœ¨çš„å‚æ•°æ˜¯å‰é¢ä¸´æ—¶æ„é€ å‡ºæ¥çš„ï¼Œæ˜¯å³å€¼ï¼Œæ‰€ä»¥è¿›å…¥èµ‹å€¼è¿ç®—ç¬¦ä¹‹å‰å…ˆä¼šå‘ç”Ÿä¸€æ¬¡ç§»åŠ¨æ„é€ ã€‚\n\nè¿›å…¥èµ‹å€¼ä¹‹åï¼Œä¸‹é¢å°±æ˜¯äº¤æ¢åŠ¨ä½œï¼Œäº¤æ¢å®Œï¼Œå‚æ•°å¾—åˆ°äº† this å¯¹è±¡çš„æ—§å€¼ï¼Œéšå³è¢«ææ„ã€‚ä¹‹å‰æ‹·è´æ„é€ å‡ºæ¥çš„ä¸´æ—¶å¯¹è±¡ï¼Œä¹Ÿåœ¨å½“å‰è¯­å¥æ‰§è¡Œå®Œæ—¶è¢«ææ„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1623114378,"ip_address":"","comment_id":296373,"utype":1}],"discussion_count":2,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"å¤šè°¢è€å¸ˆè§£ç­”ï¼Œæˆ‘çœ‹äº†ç¬¬åèŠ‚ä¹Ÿè¿˜æ˜¯æœ‰ç‚¹ä¹±è¿™å—æ²¡æƒ³æ˜ç™½\n&#47;&#47; 1ã€è¿è¡Œ\nptr3 = ptr1;\nå…ˆè°ƒç”¨copyæ„é€ ï¼Œä¸ºå•¥è¿˜è¦å†è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Ÿ ä¹‹åææ„ï¼Œææ„\n&#47;&#47;2ã€è€Œè¿è¡Œ\nsmart_ptr&lt;circle&gt; ptr3 = dynamic_pointer_cast&lt;circle&gt;(ptr2);\nå…ˆè°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œææ„ï¼Œåˆè°ƒç”¨ä¸€æ¬¡ç§»åŠ¨æ„é€ ï¼Œææ„ï¼Ÿ\n\nå°±æ˜¯g++ -std=c++11  -W -Wall -Wfatal-errors smart_ptr.cppä¹‹åæ˜¯ï¼š\ncall explicit smart_ptr(T* ptr = nullptr)\nuse count of ptr1 is 1\ncall explicit smart_ptr(T* ptr = nullptr)\nuse count of ptr2 was 0\ncall smart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept\ncall smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\ncall smart_ptr&amp;  operator=(smart_ptr rhs) noexcept\ncall ~smart_ptr()\ncall ~smart_ptr()\nuse count of ptr2 is now 2\nptr1 is not empty\ncall smart_ptr&lt;T&gt; dynamic_pointer_cast(const smart_ptr&lt;U&gt;&amp; other) noexcept\ncall smart_ptr(const smart_ptr&lt;U&gt;&amp; other, T* ptr) noexcept\ncall smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\ncall ~smart_ptr()\ncall smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\ncall ~smart_ptr()\nuse count of ptr3 is 3\ncall ~smart_ptr()\ncall ~smart_ptr()\n~circle()\ncall ~smart_ptr()\nè€Œ g++ -std=c++17 -W -Wall -Wfatal-errors smart_ptr.cppä¹‹åæ˜¯\ncall explicit smart_ptr(T* ptr = nullptr)\nuse count of ptr1 is 1\ncall explicit smart_ptr(T* ptr = nullptr)\nuse count of ptr2 was 0\ncall smart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept\ncall smart_ptr&amp;  operator=(smart_ptr rhs) noexcept\ncall ~smart_ptr()\nuse count of ptr2 is now 2\nptr1 is not empty\ncall smart_ptr&lt;T&gt; dynamic_pointer_cast(const smart_ptr&lt;U&gt;&amp; other) noexcept\ncall smart_ptr(const smart_ptr&lt;U&gt;&amp; other, T* ptr) noexcept\nuse count of ptr3 is 3\ncall ~smart_ptr()\ncall ~smart_ptr()\n~circle()\ncall ~smart_ptr()\nä¸Šé¢é‚£ä¸ªæ˜æ˜¾å¤šäº†å¾ˆå¤šæ¬¡ç§»åŠ¨æ„é€ ï¼Œæˆ‘è¿˜æ˜¯ä¸æ˜¯å¾ˆæ‡‚ä»–ä»¬ä¹‹é—´RVOçš„åŒºåˆ«ï¼Œå¸Œæœ›è€å¸ˆæ˜¯èƒ½è§£ç­”ï¼Œå¤šè°¢è€å¸ˆäº†","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521417,"discussion_content":"é¦–å…ˆï¼Œåªæœ‰2è¿™ç§å½¢å¼å¯èƒ½è¿”å›å€¼ä¼˜åŒ–ã€‚1æ˜¯èµ‹å€¼ï¼Œä¸èƒ½ã€‚æˆ‘ä»¬ä»”ç»†çœ‹çœ‹1ã€‚\n\näº‹å®ä¸Šï¼Œç›®å‰çœ‹èµ·æ¥è¿™é‡Œé¢çš„å¤æ‚æ€§åº”è¯¥æ˜¯å› ä¸ºä½ çš„ ptr1 å’Œ ptr3 çš„ç±»å‹ä¸åŒï¼ˆè€Œæˆ‘ç½‘ä¸Šè´´çš„ä»£ç è¿™ä¸¤ä¸ªå˜é‡çš„ç±»å‹æ°å¥½ç›¸åŒï¼‰ã€‚æˆ‘ä»¬ä¸‹é¢åˆ†æä¸€ä¸‹ã€‚\n\nèµ‹å€¼è¿ç®—ç¬¦çš„å‚æ•°æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå®ƒéœ€è¦æ„é€ ä¸€ä¸ªè·Ÿå·¦ä¾§ä¸€æ ·ç±»å‹çš„å¯¹è±¡å‡ºæ¥ã€‚åœ¨ä½ æä¾›ä¸€ä¸ªå·¦å€¼çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†å¾—åˆ°å·¦è¾¹çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šæ‰¾åˆ°å¸¦æ¨¡æ¿çš„é‚£ä¸ªâ€œæ‹·è´â€æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºè·Ÿå·¦è¾¹ä¸€æ ·çš„ç±»å‹ã€‚\n\nå¯¹äºèµ‹å€¼è¿ç®—ç¬¦çš„å€¼å‚æ•°ï¼Œä½ ä¼ ä¸€ä¸ªå·¦å€¼å‚æ•°å°±ä¼šå‘ç”Ÿæ‹·è´æ„é€ ï¼Œä¼ ä¸€ä¸ªå³å€¼å‚æ•°ä¼šå‘ç”Ÿç§»åŠ¨æ„é€ ã€‚ç°åœ¨çš„å‚æ•°æ˜¯å‰é¢ä¸´æ—¶æ„é€ å‡ºæ¥çš„ï¼Œæ˜¯å³å€¼ï¼Œæ‰€ä»¥è¿›å…¥èµ‹å€¼è¿ç®—ç¬¦ä¹‹å‰å…ˆä¼šå‘ç”Ÿä¸€æ¬¡ç§»åŠ¨æ„é€ ã€‚\n\nè¿›å…¥èµ‹å€¼ä¹‹åï¼Œä¸‹é¢å°±æ˜¯äº¤æ¢åŠ¨ä½œï¼Œäº¤æ¢å®Œï¼Œå‚æ•°å¾—åˆ°äº† this å¯¹è±¡çš„æ—§å€¼ï¼Œéšå³è¢«ææ„ã€‚ä¹‹å‰æ‹·è´æ„é€ å‡ºæ¥çš„ä¸´æ—¶å¯¹è±¡ï¼Œä¹Ÿåœ¨å½“å‰è¯­å¥æ‰§è¡Œå®Œæ—¶è¢«ææ„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623114378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2055993,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","nickname":"Kiddy","note":"","ucode":"D07AAEE69BE504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":569141,"discussion_content":"è€å¸ˆï¼ŒæŒ‰ç…§ä½ è¿™æ ·çš„è¯´æ³•ï¼Œptr1è·Ÿptr3å“ªæ€•æ˜¯ç›¸åŒç±»å‹ï¼Œä¸éƒ½å¾—æ‰§è¡Œä¸€æ¬¡æ‹·è´æ„é€ è·Ÿç§»åŠ¨æ„é€ å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651331277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":521417,"ip_address":"","group_id":0},"score":569141,"extra":""}]}]},{"had_liked":false,"id":296097,"user_name":"æ— æ¶¯","can_delete":false,"product_type":"c1","uid":2206226,"ip_address":"","ucode":"9A3B2774BC6E5F","user_header":"https://static001.geekbang.org/account/avatar/00/21/aa/12/7ac87dd6.jpg","comment_is_top":false,"comment_ctime":1622760901,"is_pvip":false,"replies":[{"id":107534,"content":"ç»“åˆä½ çš„ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œåº”è¯¥æ˜¯è·Ÿè¿”å›å€¼ä¼˜åŒ–æœ‰å…³å§ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ç¬¬10è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1622942697,"ip_address":"","comment_id":296097,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œä¸ºä»€è«åœ¨c++ 11 çš„æ—¶å€™å›æ˜¯ptr2.operator=(smart_ptr&lt;shape&gt;(smart_ptr&lt;shape&gt;(ptr1)));å’Œ smart_ptr&lt;circle&gt; ptr3 = smart_ptr&lt;circle&gt;(dynamic_pointer_cast&lt;circle&gt;(ptr2));ä¸c++ 17çš„ smart_ptr&lt;circle&gt; ptr3 = dynamic_pointer_cast&lt;circle&gt;(ptr2);å’Œptr2.operator=(smart_ptr&lt;shape&gt;(ptr1));å¤šä¸€æ¬¡æ„é€ ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521325,"discussion_content":"ç»“åˆä½ çš„ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œåº”è¯¥æ˜¯è·Ÿè¿”å›å€¼ä¼˜åŒ–æœ‰å…³å§ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ç¬¬10è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622942697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296096,"user_name":"æ— æ¶¯","can_delete":false,"product_type":"c1","uid":2206226,"ip_address":"","ucode":"9A3B2774BC6E5F","user_header":"https://static001.geekbang.org/account/avatar/00/21/aa/12/7ac87dd6.jpg","comment_is_top":false,"comment_ctime":1622749984,"is_pvip":false,"replies":[{"id":107533,"content":"1. æ²¡æ€ä¹ˆæ˜ç™½ä½ çš„æ„æ€ã€‚å¯¹äºæœ€ç»ˆç‰ˆæœ¬ï¼Œåº”è¯¥æ˜¯ä¸€æ¬¡æ‹·è´æ„é€ ï¼ˆæ„é€ èµ‹å€¼é‡Œé¢çš„å€¼å‚æ•°ï¼‰ï¼Œç„¶åè¿›å…¥èµ‹å€¼è¿ç®—ç¬¦ï¼Œè¿›è¡Œä¸€æ¬¡äº¤æ¢ï¼Œå®Œæˆã€‚\n\n2. æˆ‘è¿™è¾¹æµ‹è¯•æ˜¯ä¼šè¿›åˆ° smart_ptr(const smart_ptr&lt;U&gt;&amp; other, T* ptr) è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œç„¶åå› ä¸ºè¿”å›å€¼ä¼˜åŒ–ï¼Œè¿ç§»åŠ¨éƒ½æ²¡æœ‰å‘ç”Ÿã€‚å¦‚æœæ²¡æœ‰è¿”å›å€¼ä¼˜åŒ–ï¼Œåˆ™ä¼šå‘ç”Ÿä¸€æ¬¡ç§»åŠ¨æ„é€ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1622942583,"ip_address":"","comment_id":296096,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è€å¸ˆè¿™å—æ²¡æƒ³æ˜ç™½\n\n&#47;&#47; 1ã€è¿è¡Œ\nptr3 = ptr1;\nå…ˆè°ƒç”¨copyæ„é€ ï¼Œä¸ºå•¥è¿˜è¦å†è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Ÿ ä¹‹åææ„ï¼Œææ„\n\n&#47;&#47;2ã€è€Œè¿è¡Œ\nsmart_ptr&lt;circle&gt; ptr3 =   dynamic_pointer_cast&lt;circle&gt;(ptr2);\nå…ˆè°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œææ„ï¼Œåˆè°ƒç”¨ä¸€æ¬¡ç§»åŠ¨æ„é€ ï¼Œææ„ï¼Ÿ\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521324,"discussion_content":"1. æ²¡æ€ä¹ˆæ˜ç™½ä½ çš„æ„æ€ã€‚å¯¹äºæœ€ç»ˆç‰ˆæœ¬ï¼Œåº”è¯¥æ˜¯ä¸€æ¬¡æ‹·è´æ„é€ ï¼ˆæ„é€ èµ‹å€¼é‡Œé¢çš„å€¼å‚æ•°ï¼‰ï¼Œç„¶åè¿›å…¥èµ‹å€¼è¿ç®—ç¬¦ï¼Œè¿›è¡Œä¸€æ¬¡äº¤æ¢ï¼Œå®Œæˆã€‚\n\n2. æˆ‘è¿™è¾¹æµ‹è¯•æ˜¯ä¼šè¿›åˆ° smart_ptr(const smart_ptr&amp;lt;U&amp;gt;&amp;amp; other, T* ptr) è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œç„¶åå› ä¸ºè¿”å›å€¼ä¼˜åŒ–ï¼Œè¿ç§»åŠ¨éƒ½æ²¡æœ‰å‘ç”Ÿã€‚å¦‚æœæ²¡æœ‰è¿”å›å€¼ä¼˜åŒ–ï¼Œåˆ™ä¼šå‘ç”Ÿä¸€æ¬¡ç§»åŠ¨æ„é€ ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622942583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286087,"user_name":"Geek_43a2d5","can_delete":false,"product_type":"c1","uid":2423526,"ip_address":"","ucode":"33C5B1DB0A5DC4","user_header":"","comment_is_top":false,"comment_ctime":1617154138,"is_pvip":false,"replies":[{"id":103891,"content":"å‡ä¸€å¼•ç”¨æ•°å°±ä¸å¯¹äº†ï¼Œå½“ç„¶ä¸èƒ½å‡ä¸€ã€‚ä¸¤ä¸ªæŒ‡é’ˆæ˜¯ä½¿ç”¨åŒä¸€ä¸ªå…±äº«è®¡æ•°çš„ã€‚\n\nä½ å†æƒ³æƒ³ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1617237750,"ip_address":"","comment_id":286087,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼Œå…±äº«æŒ‡é’ˆ p1 p2\np1 = p2 \nå³è¾¹æŒ‡é’ˆçš„å…±äº«è®¡æ•°åŠ ä¸€ å·¦è¾¹è®¡æ•°å‡ä¸€æ‰å¯¹å•Šï¼Œä»ä»£ç ä¸­æ²¡æ‰¾åˆ°è¿™ä¸ªå‡ä¸€çš„æ“ä½œ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521324,"discussion_content":"1. æ²¡æ€ä¹ˆæ˜ç™½ä½ çš„æ„æ€ã€‚å¯¹äºæœ€ç»ˆç‰ˆæœ¬ï¼Œåº”è¯¥æ˜¯ä¸€æ¬¡æ‹·è´æ„é€ ï¼ˆæ„é€ èµ‹å€¼é‡Œé¢çš„å€¼å‚æ•°ï¼‰ï¼Œç„¶åè¿›å…¥èµ‹å€¼è¿ç®—ç¬¦ï¼Œè¿›è¡Œä¸€æ¬¡äº¤æ¢ï¼Œå®Œæˆã€‚\n\n2. æˆ‘è¿™è¾¹æµ‹è¯•æ˜¯ä¼šè¿›åˆ° smart_ptr(const smart_ptr&amp;lt;U&amp;gt;&amp;amp; other, T* ptr) è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œç„¶åå› ä¸ºè¿”å›å€¼ä¼˜åŒ–ï¼Œè¿ç§»åŠ¨éƒ½æ²¡æœ‰å‘ç”Ÿã€‚å¦‚æœæ²¡æœ‰è¿”å›å€¼ä¼˜åŒ–ï¼Œåˆ™ä¼šå‘ç”Ÿä¸€æ¬¡ç§»åŠ¨æ„é€ ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622942583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284725,"user_name":"å¤§é£å°î‘‡","can_delete":false,"product_type":"c1","uid":1071070,"ip_address":"","ucode":"9F4A87C549B115","user_header":"https://static001.geekbang.org/account/avatar/00/10/57/de/4ea51085.jpg","comment_is_top":false,"comment_ctime":1616428842,"is_pvip":false,"replies":[{"id":103458,"content":"æŠ±æ­‰ï¼Œæ²¡æœ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1616657677,"ip_address":"","comment_id":284725,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è€å¸ˆæœ‰æ˜Ÿçƒä¹ˆ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517445,"discussion_content":"æŠ±æ­‰ï¼Œæ²¡æœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616657677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283303,"user_name":"ç åŒ è®¸å¸ˆå‚…","can_delete":false,"product_type":"c1","uid":1260213,"ip_address":"","ucode":"3A470CAC0ADAC4","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/b5/22d74b60.jpg","comment_is_top":false,"comment_ctime":1615698719,"is_pvip":false,"replies":[{"id":102794,"content":"æ¯”è¾ƒè¿ç®—ç¬¦æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†ä¸‹æ ‡åˆ™æ˜¯æœ‰é—®é¢˜çš„ã€‚ç›®å‰åªèƒ½æ”¾ä¸€ä¸ªå…ƒç´ ï¼Œè¦ä¸‹æ ‡å¹²å˜›ï¼Ÿ:-)","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1615735987,"ip_address":"","comment_id":283303,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è¿˜éœ€è¦æ·»åŠ æ¯”è¾ƒè¿ç®—ç¬¦é‡è½½å‡½æ•°ã€ä¸‹æ ‡è¿ç®—ç¬¦","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516985,"discussion_content":"æ¯”è¾ƒè¿ç®—ç¬¦æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†ä¸‹æ ‡åˆ™æ˜¯æœ‰é—®é¢˜çš„ã€‚ç›®å‰åªèƒ½æ”¾ä¸€ä¸ªå…ƒç´ ï¼Œè¦ä¸‹æ ‡å¹²å˜›ï¼Ÿ:-)","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615735987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279878,"user_name":"Geek_227a72","can_delete":false,"product_type":"c1","uid":2417911,"ip_address":"","ucode":"385B764D9AEAE8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKsI6VdljHFtMx4cgEPpqhXiaIYQicqGcal8sIoBYQZn7tYQyPLH1FuOVP8SaYPghPIsqSa1DWjRT2A/132","comment_is_top":false,"comment_ctime":1613989817,"is_pvip":false,"replies":[{"id":101696,"content":"è¿”å›çš„æ˜¯æ–°æ„é€ çš„ç±»å‹è½¬æ¢ä¹‹åçš„ smart_ptrã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1614039759,"ip_address":"","comment_id":279878,"utype":1}],"discussion_count":2,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"template &lt;typename T, typename U&gt;\nsmart_ptr&lt;T&gt; dynamic_pointer_cast(\n  const smart_ptr&lt;U&gt;&amp; other)\n{\n  T* ptr =\n    dynamic_cast&lt;T*&gt;(other.get());\n  return smart_ptr&lt;T&gt;(other, ptr);\n}\nè€å¸ˆèƒ½è§£é‡Šä¸€ä¸‹returnè¿”å›çš„æ˜¯ä»€ä¹ˆå—ï¼Œçœ‹ä¸æ‡‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515904,"discussion_content":"è¿”å›çš„æ˜¯æ–°æ„é€ çš„ç±»å‹è½¬æ¢ä¹‹åçš„ smart_ptrã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614039759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2417911,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKsI6VdljHFtMx4cgEPpqhXiaIYQicqGcal8sIoBYQZn7tYQyPLH1FuOVP8SaYPghPIsqSa1DWjRT2A/132","nickname":"Geek_227a72","note":"","ucode":"385B764D9AEAE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350726,"discussion_content":"çœ‹æ‡‚äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613991042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279691,"user_name":"Geek_227a72","can_delete":false,"product_type":"c1","uid":2417911,"ip_address":"","ucode":"385B764D9AEAE8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKsI6VdljHFtMx4cgEPpqhXiaIYQicqGcal8sIoBYQZn7tYQyPLH1FuOVP8SaYPghPIsqSa1DWjRT2A/132","comment_is_top":false,"comment_ctime":1613908195,"is_pvip":false,"replies":[{"id":101602,"content":"å¯¹ç…§ä¸€ä¸‹\n\nhttps:&#47;&#47;github.com&#47;adah1972&#47;geek_time_cpp&#47;blob&#47;master&#47;02&#47;test02_shared_ptr.cpp\nhttps:&#47;&#47;github.com&#47;adah1972&#47;geek_time_cpp&#47;tree&#47;master&#47;common\n\nåº”è¯¥å°±æ˜¯å“ªå„¿ä»£ç æœ‰ä¸ªå°é—®é¢˜å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1613957277,"ip_address":"","comment_id":279691,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"use count of ptr1 is 1\nuse count of ptr2 was 0\nuse count of ptr2 is now 2\nptr1 is not empty\n~circle()\n\n\nä¸ºå•¥æˆ‘çš„æ²¡è¾“å‡ºâ€œï½circleï¼ˆï¼‰â€å‘¢ï¼Ÿå‰é¢çš„è¾“å‡ºéƒ½å¯ä»¥","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515835,"discussion_content":"å¯¹ç…§ä¸€ä¸‹\n\nhttps://github.com/adah1972/geek_time_cpp/blob/master/02/test02_shared_ptr.cpp\nhttps://github.com/adah1972/geek_time_cpp/tree/master/common\n\nåº”è¯¥å°±æ˜¯å“ªå„¿ä»£ç æœ‰ä¸ªå°é—®é¢˜å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613957277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277279,"user_name":"é¸½è¶³è½»è½»","can_delete":false,"product_type":"c1","uid":1251879,"ip_address":"","ucode":"03C0D150D73273","user_header":"https://static001.geekbang.org/account/avatar/00/13/1a/27/373003d3.jpg","comment_is_top":false,"comment_ctime":1612342830,"is_pvip":false,"replies":[{"id":100646,"content":"ä½ å¯èƒ½éœ€è¦ç»™å‡ºæ˜ç¡®çš„ä¾‹å­æ‰è¡Œã€‚\n\næˆ‘è¿™å„¿ç»™ä¸€ä¸ªç¤ºèŒƒï¼š\n\nhttps:&#47;&#47;godbolt.org&#47;z&#47;h81b47\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ç¦ç”¨äº† circle å’Œ shape çš„æ‹·è´å’Œç§»åŠ¨æ“ä½œï¼Œåœ¨æ™ºèƒ½æŒ‡é’ˆçš„å®ç°ä¸­æ·»åŠ äº† Copy å’Œ Move çš„è¾“å‡ºå­—æ ·ã€‚åœ¨ ptr2 = ptr1; è¿™ä¸€æ“ä½œä¸­ï¼Œå‘ç”Ÿäº†ä¸€æ¬¡æ™ºèƒ½æŒ‡é’ˆçš„æ‹·è´æ„é€ ã€‚è¿™ä¸€æ‹·è´æ„é€ çš„åŸå› ï¼Œç‚¹å‡»â€œCppInsightsâ€æŒ‰é’®å¯ä»¥çœ‹å¾—å¾ˆæ¸…æ¥šï¼šç¼–è¯‘å™¨æ ¹æ®ç±»å‹è¦æ±‚ï¼Œæœ€åç”Ÿæˆçš„æ˜¯\n\nptr2.operator=(smart_ptr&lt;shape&gt;(ptr1));","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1612411777,"ip_address":"","comment_id":277279,"utype":1}],"discussion_count":2,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ ¹æ®æ‚¨çš„ä»£ç æˆ‘å†™äº†ä¸€ä¸ªæµ‹è¯•caseï¼Œå‘ç°å½“å­ç±»çš„æ™ºèƒ½æŒ‡é’ˆè½¬æ¢ä¸ºçˆ¶ç±»çš„æ™ºèƒ½æŒ‡é’ˆæ—¶ï¼Œè¿˜å‘ç”Ÿäº†ç§»åŠ¨æ„é€ å‡½æ•°çš„è°ƒç”¨ï¼Œç™¾æ€ä¸å¾—å…¶è§£ï¼Œè¯·è€å¸ˆè§£æƒ‘","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515835,"discussion_content":"å¯¹ç…§ä¸€ä¸‹\n\nhttps://github.com/adah1972/geek_time_cpp/blob/master/02/test02_shared_ptr.cpp\nhttps://github.com/adah1972/geek_time_cpp/tree/master/common\n\nåº”è¯¥å°±æ˜¯å“ªå„¿ä»£ç æœ‰ä¸ªå°é—®é¢˜å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613957277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298087,"user_name":"Queenie","can_delete":false,"product_type":"c1","uid":2303115,"ip_address":"","ucode":"BC3F5615537FA0","user_header":"https://static001.geekbang.org/account/avatar/00/23/24/8b/10e78e95.jpg","comment_is_top":false,"comment_ctime":1623908642,"is_pvip":false,"replies":[{"id":108279,"content":"å¤´ä¸¤ä¸ªæ˜¯è¿ç®—ç¬¦é‡è½½ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ç±»çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦ã€‚è¿™äº›ä½ æœç´¢ä¸€ä¸‹å°±å¯ä»¥æ‰¾åˆ°å¤§é‡çš„èµ„æ–™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1624110524,"ip_address":"","comment_id":298087,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ï¼ŒC++åŸºç¡€è¾ƒå¼±ï¼Œå¬äº†å‡ éï¼Œæœ‰äº›åœ°æ–¹è¿˜æ˜¯æ²¡å¤ªæ˜ç™½ã€‚\nç›®å‰è¿™ä¸ª smart_ptr çš„è¡Œä¸ºè¿˜æ˜¯å’ŒæŒ‡é’ˆæœ‰ç‚¹å·®å¼‚çš„ï¼š\nå®ƒä¸èƒ½ç”¨ * è¿ç®—ç¬¦è§£å¼•ç”¨\nå®ƒä¸èƒ½ç”¨ -&gt; è¿ç®—ç¬¦æŒ‡å‘å¯¹è±¡æˆå‘˜\nå®ƒä¸èƒ½åƒæŒ‡é’ˆä¸€æ ·ç”¨åœ¨å¸ƒå°”è¡¨è¾¾å¼é‡Œï¼Œ\nè§£å†³è¿™å‡ ä¸ªé—®é¢˜ï¼Œå¢åŠ äº†å‡ ä¸ªæˆå‘˜å‡½æ•°ï¼Œè¿™ä¸ªè§£å†³å…·ä½“æ–¹æ³•æ˜¯è¿ç®—ç¬¦é‡è½½å—ï¼Ÿå¯ä»¥è¯¦ç»†è®²è§£ä¸‹å—\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522009,"discussion_content":"å¤´ä¸¤ä¸ªæ˜¯è¿ç®—ç¬¦é‡è½½ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ç±»çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦ã€‚è¿™äº›ä½ æœç´¢ä¸€ä¸‹å°±å¯ä»¥æ‰¾åˆ°å¤§é‡çš„èµ„æ–™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624110524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296373,"user_name":"æ— æ¶¯","can_delete":false,"product_type":"c1","uid":2206226,"ip_address":"","ucode":"9A3B2774BC6E5F","user_header":"https://static001.geekbang.org/account/avatar/00/21/aa/12/7ac87dd6.jpg","comment_is_top":false,"comment_ctime":1622944504,"is_pvip":false,"replies":[{"id":107754,"content":"é¦–å…ˆï¼Œåªæœ‰2è¿™ç§å½¢å¼å¯èƒ½è¿”å›å€¼ä¼˜åŒ–ã€‚1æ˜¯èµ‹å€¼ï¼Œä¸èƒ½ã€‚æˆ‘ä»¬ä»”ç»†çœ‹çœ‹1ã€‚\n\näº‹å®ä¸Šï¼Œç›®å‰çœ‹èµ·æ¥è¿™é‡Œé¢çš„å¤æ‚æ€§åº”è¯¥æ˜¯å› ä¸ºä½ çš„ ptr1 å’Œ ptr3 çš„ç±»å‹ä¸åŒï¼ˆè€Œæˆ‘ç½‘ä¸Šè´´çš„ä»£ç è¿™ä¸¤ä¸ªå˜é‡çš„ç±»å‹æ°å¥½ç›¸åŒï¼‰ã€‚æˆ‘ä»¬ä¸‹é¢åˆ†æä¸€ä¸‹ã€‚\n\nèµ‹å€¼è¿ç®—ç¬¦çš„å‚æ•°æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå®ƒéœ€è¦æ„é€ ä¸€ä¸ªè·Ÿå·¦ä¾§ä¸€æ ·ç±»å‹çš„å¯¹è±¡å‡ºæ¥ã€‚åœ¨ä½ æä¾›ä¸€ä¸ªå·¦å€¼çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†å¾—åˆ°å·¦è¾¹çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šæ‰¾åˆ°å¸¦æ¨¡æ¿çš„é‚£ä¸ªâ€œæ‹·è´â€æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºè·Ÿå·¦è¾¹ä¸€æ ·çš„ç±»å‹ã€‚\n\nå¯¹äºèµ‹å€¼è¿ç®—ç¬¦çš„å€¼å‚æ•°ï¼Œä½ ä¼ ä¸€ä¸ªå·¦å€¼å‚æ•°å°±ä¼šå‘ç”Ÿæ‹·è´æ„é€ ï¼Œä¼ ä¸€ä¸ªå³å€¼å‚æ•°ä¼šå‘ç”Ÿç§»åŠ¨æ„é€ ã€‚ç°åœ¨çš„å‚æ•°æ˜¯å‰é¢ä¸´æ—¶æ„é€ å‡ºæ¥çš„ï¼Œæ˜¯å³å€¼ï¼Œæ‰€ä»¥è¿›å…¥èµ‹å€¼è¿ç®—ç¬¦ä¹‹å‰å…ˆä¼šå‘ç”Ÿä¸€æ¬¡ç§»åŠ¨æ„é€ ã€‚\n\nè¿›å…¥èµ‹å€¼ä¹‹åï¼Œä¸‹é¢å°±æ˜¯äº¤æ¢åŠ¨ä½œï¼Œäº¤æ¢å®Œï¼Œå‚æ•°å¾—åˆ°äº† this å¯¹è±¡çš„æ—§å€¼ï¼Œéšå³è¢«ææ„ã€‚ä¹‹å‰æ‹·è´æ„é€ å‡ºæ¥çš„ä¸´æ—¶å¯¹è±¡ï¼Œä¹Ÿåœ¨å½“å‰è¯­å¥æ‰§è¡Œå®Œæ—¶è¢«ææ„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1623114378,"ip_address":"","comment_id":296373,"utype":1}],"discussion_count":2,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"å¤šè°¢è€å¸ˆè§£ç­”ï¼Œæˆ‘çœ‹äº†ç¬¬åèŠ‚ä¹Ÿè¿˜æ˜¯æœ‰ç‚¹ä¹±è¿™å—æ²¡æƒ³æ˜ç™½\n&#47;&#47; 1ã€è¿è¡Œ\nptr3 = ptr1;\nå…ˆè°ƒç”¨copyæ„é€ ï¼Œä¸ºå•¥è¿˜è¦å†è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Ÿ ä¹‹åææ„ï¼Œææ„\n&#47;&#47;2ã€è€Œè¿è¡Œ\nsmart_ptr&lt;circle&gt; ptr3 = dynamic_pointer_cast&lt;circle&gt;(ptr2);\nå…ˆè°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œææ„ï¼Œåˆè°ƒç”¨ä¸€æ¬¡ç§»åŠ¨æ„é€ ï¼Œææ„ï¼Ÿ\n\nå°±æ˜¯g++ -std=c++11  -W -Wall -Wfatal-errors smart_ptr.cppä¹‹åæ˜¯ï¼š\ncall explicit smart_ptr(T* ptr = nullptr)\nuse count of ptr1 is 1\ncall explicit smart_ptr(T* ptr = nullptr)\nuse count of ptr2 was 0\ncall smart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept\ncall smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\ncall smart_ptr&amp;  operator=(smart_ptr rhs) noexcept\ncall ~smart_ptr()\ncall ~smart_ptr()\nuse count of ptr2 is now 2\nptr1 is not empty\ncall smart_ptr&lt;T&gt; dynamic_pointer_cast(const smart_ptr&lt;U&gt;&amp; other) noexcept\ncall smart_ptr(const smart_ptr&lt;U&gt;&amp; other, T* ptr) noexcept\ncall smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\ncall ~smart_ptr()\ncall smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\ncall ~smart_ptr()\nuse count of ptr3 is 3\ncall ~smart_ptr()\ncall ~smart_ptr()\n~circle()\ncall ~smart_ptr()\nè€Œ g++ -std=c++17 -W -Wall -Wfatal-errors smart_ptr.cppä¹‹åæ˜¯\ncall explicit smart_ptr(T* ptr = nullptr)\nuse count of ptr1 is 1\ncall explicit smart_ptr(T* ptr = nullptr)\nuse count of ptr2 was 0\ncall smart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept\ncall smart_ptr&amp;  operator=(smart_ptr rhs) noexcept\ncall ~smart_ptr()\nuse count of ptr2 is now 2\nptr1 is not empty\ncall smart_ptr&lt;T&gt; dynamic_pointer_cast(const smart_ptr&lt;U&gt;&amp; other) noexcept\ncall smart_ptr(const smart_ptr&lt;U&gt;&amp; other, T* ptr) noexcept\nuse count of ptr3 is 3\ncall ~smart_ptr()\ncall ~smart_ptr()\n~circle()\ncall ~smart_ptr()\nä¸Šé¢é‚£ä¸ªæ˜æ˜¾å¤šäº†å¾ˆå¤šæ¬¡ç§»åŠ¨æ„é€ ï¼Œæˆ‘è¿˜æ˜¯ä¸æ˜¯å¾ˆæ‡‚ä»–ä»¬ä¹‹é—´RVOçš„åŒºåˆ«ï¼Œå¸Œæœ›è€å¸ˆæ˜¯èƒ½è§£ç­”ï¼Œå¤šè°¢è€å¸ˆäº†","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522009,"discussion_content":"å¤´ä¸¤ä¸ªæ˜¯è¿ç®—ç¬¦é‡è½½ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ç±»çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦ã€‚è¿™äº›ä½ æœç´¢ä¸€ä¸‹å°±å¯ä»¥æ‰¾åˆ°å¤§é‡çš„èµ„æ–™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624110524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296097,"user_name":"æ— æ¶¯","can_delete":false,"product_type":"c1","uid":2206226,"ip_address":"","ucode":"9A3B2774BC6E5F","user_header":"https://static001.geekbang.org/account/avatar/00/21/aa/12/7ac87dd6.jpg","comment_is_top":false,"comment_ctime":1622760901,"is_pvip":false,"replies":[{"id":107534,"content":"ç»“åˆä½ çš„ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œåº”è¯¥æ˜¯è·Ÿè¿”å›å€¼ä¼˜åŒ–æœ‰å…³å§ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ç¬¬10è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1622942697,"ip_address":"","comment_id":296097,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œä¸ºä»€è«åœ¨c++ 11 çš„æ—¶å€™å›æ˜¯ptr2.operator=(smart_ptr&lt;shape&gt;(smart_ptr&lt;shape&gt;(ptr1)));å’Œ smart_ptr&lt;circle&gt; ptr3 = smart_ptr&lt;circle&gt;(dynamic_pointer_cast&lt;circle&gt;(ptr2));ä¸c++ 17çš„ smart_ptr&lt;circle&gt; ptr3 = dynamic_pointer_cast&lt;circle&gt;(ptr2);å’Œptr2.operator=(smart_ptr&lt;shape&gt;(ptr1));å¤šä¸€æ¬¡æ„é€ ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521417,"discussion_content":"é¦–å…ˆï¼Œåªæœ‰2è¿™ç§å½¢å¼å¯èƒ½è¿”å›å€¼ä¼˜åŒ–ã€‚1æ˜¯èµ‹å€¼ï¼Œä¸èƒ½ã€‚æˆ‘ä»¬ä»”ç»†çœ‹çœ‹1ã€‚\n\näº‹å®ä¸Šï¼Œç›®å‰çœ‹èµ·æ¥è¿™é‡Œé¢çš„å¤æ‚æ€§åº”è¯¥æ˜¯å› ä¸ºä½ çš„ ptr1 å’Œ ptr3 çš„ç±»å‹ä¸åŒï¼ˆè€Œæˆ‘ç½‘ä¸Šè´´çš„ä»£ç è¿™ä¸¤ä¸ªå˜é‡çš„ç±»å‹æ°å¥½ç›¸åŒï¼‰ã€‚æˆ‘ä»¬ä¸‹é¢åˆ†æä¸€ä¸‹ã€‚\n\nèµ‹å€¼è¿ç®—ç¬¦çš„å‚æ•°æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå®ƒéœ€è¦æ„é€ ä¸€ä¸ªè·Ÿå·¦ä¾§ä¸€æ ·ç±»å‹çš„å¯¹è±¡å‡ºæ¥ã€‚åœ¨ä½ æä¾›ä¸€ä¸ªå·¦å€¼çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†å¾—åˆ°å·¦è¾¹çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šæ‰¾åˆ°å¸¦æ¨¡æ¿çš„é‚£ä¸ªâ€œæ‹·è´â€æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºè·Ÿå·¦è¾¹ä¸€æ ·çš„ç±»å‹ã€‚\n\nå¯¹äºèµ‹å€¼è¿ç®—ç¬¦çš„å€¼å‚æ•°ï¼Œä½ ä¼ ä¸€ä¸ªå·¦å€¼å‚æ•°å°±ä¼šå‘ç”Ÿæ‹·è´æ„é€ ï¼Œä¼ ä¸€ä¸ªå³å€¼å‚æ•°ä¼šå‘ç”Ÿç§»åŠ¨æ„é€ ã€‚ç°åœ¨çš„å‚æ•°æ˜¯å‰é¢ä¸´æ—¶æ„é€ å‡ºæ¥çš„ï¼Œæ˜¯å³å€¼ï¼Œæ‰€ä»¥è¿›å…¥èµ‹å€¼è¿ç®—ç¬¦ä¹‹å‰å…ˆä¼šå‘ç”Ÿä¸€æ¬¡ç§»åŠ¨æ„é€ ã€‚\n\nè¿›å…¥èµ‹å€¼ä¹‹åï¼Œä¸‹é¢å°±æ˜¯äº¤æ¢åŠ¨ä½œï¼Œäº¤æ¢å®Œï¼Œå‚æ•°å¾—åˆ°äº† this å¯¹è±¡çš„æ—§å€¼ï¼Œéšå³è¢«ææ„ã€‚ä¹‹å‰æ‹·è´æ„é€ å‡ºæ¥çš„ä¸´æ—¶å¯¹è±¡ï¼Œä¹Ÿåœ¨å½“å‰è¯­å¥æ‰§è¡Œå®Œæ—¶è¢«ææ„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623114378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2055993,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5f/39/8d2c61d3.jpg","nickname":"Kiddy","note":"","ucode":"D07AAEE69BE504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":569141,"discussion_content":"è€å¸ˆï¼ŒæŒ‰ç…§ä½ è¿™æ ·çš„è¯´æ³•ï¼Œptr1è·Ÿptr3å“ªæ€•æ˜¯ç›¸åŒç±»å‹ï¼Œä¸éƒ½å¾—æ‰§è¡Œä¸€æ¬¡æ‹·è´æ„é€ è·Ÿç§»åŠ¨æ„é€ å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651331277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":521417,"ip_address":"","group_id":0},"score":569141,"extra":""}]}]},{"had_liked":false,"id":296096,"user_name":"æ— æ¶¯","can_delete":false,"product_type":"c1","uid":2206226,"ip_address":"","ucode":"9A3B2774BC6E5F","user_header":"https://static001.geekbang.org/account/avatar/00/21/aa/12/7ac87dd6.jpg","comment_is_top":false,"comment_ctime":1622749984,"is_pvip":false,"replies":[{"id":107533,"content":"1. æ²¡æ€ä¹ˆæ˜ç™½ä½ çš„æ„æ€ã€‚å¯¹äºæœ€ç»ˆç‰ˆæœ¬ï¼Œåº”è¯¥æ˜¯ä¸€æ¬¡æ‹·è´æ„é€ ï¼ˆæ„é€ èµ‹å€¼é‡Œé¢çš„å€¼å‚æ•°ï¼‰ï¼Œç„¶åè¿›å…¥èµ‹å€¼è¿ç®—ç¬¦ï¼Œè¿›è¡Œä¸€æ¬¡äº¤æ¢ï¼Œå®Œæˆã€‚\n\n2. æˆ‘è¿™è¾¹æµ‹è¯•æ˜¯ä¼šè¿›åˆ° smart_ptr(const smart_ptr&lt;U&gt;&amp; other, T* ptr) è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œç„¶åå› ä¸ºè¿”å›å€¼ä¼˜åŒ–ï¼Œè¿ç§»åŠ¨éƒ½æ²¡æœ‰å‘ç”Ÿã€‚å¦‚æœæ²¡æœ‰è¿”å›å€¼ä¼˜åŒ–ï¼Œåˆ™ä¼šå‘ç”Ÿä¸€æ¬¡ç§»åŠ¨æ„é€ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1622942583,"ip_address":"","comment_id":296096,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è€å¸ˆè¿™å—æ²¡æƒ³æ˜ç™½\n\n&#47;&#47; 1ã€è¿è¡Œ\nptr3 = ptr1;\nå…ˆè°ƒç”¨copyæ„é€ ï¼Œä¸ºå•¥è¿˜è¦å†è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Ÿ ä¹‹åææ„ï¼Œææ„\n\n&#47;&#47;2ã€è€Œè¿è¡Œ\nsmart_ptr&lt;circle&gt; ptr3 =   dynamic_pointer_cast&lt;circle&gt;(ptr2);\nå…ˆè°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œææ„ï¼Œåˆè°ƒç”¨ä¸€æ¬¡ç§»åŠ¨æ„é€ ï¼Œææ„ï¼Ÿ\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521325,"discussion_content":"ç»“åˆä½ çš„ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œåº”è¯¥æ˜¯è·Ÿè¿”å›å€¼ä¼˜åŒ–æœ‰å…³å§ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ç¬¬10è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622942697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286087,"user_name":"Geek_43a2d5","can_delete":false,"product_type":"c1","uid":2423526,"ip_address":"","ucode":"33C5B1DB0A5DC4","user_header":"","comment_is_top":false,"comment_ctime":1617154138,"is_pvip":false,"replies":[{"id":103891,"content":"å‡ä¸€å¼•ç”¨æ•°å°±ä¸å¯¹äº†ï¼Œå½“ç„¶ä¸èƒ½å‡ä¸€ã€‚ä¸¤ä¸ªæŒ‡é’ˆæ˜¯ä½¿ç”¨åŒä¸€ä¸ªå…±äº«è®¡æ•°çš„ã€‚\n\nä½ å†æƒ³æƒ³ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1617237750,"ip_address":"","comment_id":286087,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼Œå…±äº«æŒ‡é’ˆ p1 p2\np1 = p2 \nå³è¾¹æŒ‡é’ˆçš„å…±äº«è®¡æ•°åŠ ä¸€ å·¦è¾¹è®¡æ•°å‡ä¸€æ‰å¯¹å•Šï¼Œä»ä»£ç ä¸­æ²¡æ‰¾åˆ°è¿™ä¸ªå‡ä¸€çš„æ“ä½œ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517865,"discussion_content":"å‡ä¸€å¼•ç”¨æ•°å°±ä¸å¯¹äº†ï¼Œå½“ç„¶ä¸èƒ½å‡ä¸€ã€‚ä¸¤ä¸ªæŒ‡é’ˆæ˜¯ä½¿ç”¨åŒä¸€ä¸ªå…±äº«è®¡æ•°çš„ã€‚\n\nä½ å†æƒ³æƒ³ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617237750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284725,"user_name":"å¤§é£å°î‘‡","can_delete":false,"product_type":"c1","uid":1071070,"ip_address":"","ucode":"9F4A87C549B115","user_header":"https://static001.geekbang.org/account/avatar/00/10/57/de/4ea51085.jpg","comment_is_top":false,"comment_ctime":1616428842,"is_pvip":false,"replies":[{"id":103458,"content":"æŠ±æ­‰ï¼Œæ²¡æœ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1616657677,"ip_address":"","comment_id":284725,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è€å¸ˆæœ‰æ˜Ÿçƒä¹ˆ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517865,"discussion_content":"å‡ä¸€å¼•ç”¨æ•°å°±ä¸å¯¹äº†ï¼Œå½“ç„¶ä¸èƒ½å‡ä¸€ã€‚ä¸¤ä¸ªæŒ‡é’ˆæ˜¯ä½¿ç”¨åŒä¸€ä¸ªå…±äº«è®¡æ•°çš„ã€‚\n\nä½ å†æƒ³æƒ³ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617237750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283303,"user_name":"ç åŒ è®¸å¸ˆå‚…","can_delete":false,"product_type":"c1","uid":1260213,"ip_address":"","ucode":"3A470CAC0ADAC4","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/b5/22d74b60.jpg","comment_is_top":false,"comment_ctime":1615698719,"is_pvip":false,"replies":[{"id":102794,"content":"æ¯”è¾ƒè¿ç®—ç¬¦æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†ä¸‹æ ‡åˆ™æ˜¯æœ‰é—®é¢˜çš„ã€‚ç›®å‰åªèƒ½æ”¾ä¸€ä¸ªå…ƒç´ ï¼Œè¦ä¸‹æ ‡å¹²å˜›ï¼Ÿ:-)","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1615735987,"ip_address":"","comment_id":283303,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è¿˜éœ€è¦æ·»åŠ æ¯”è¾ƒè¿ç®—ç¬¦é‡è½½å‡½æ•°ã€ä¸‹æ ‡è¿ç®—ç¬¦","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517445,"discussion_content":"æŠ±æ­‰ï¼Œæ²¡æœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616657677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279878,"user_name":"Geek_227a72","can_delete":false,"product_type":"c1","uid":2417911,"ip_address":"","ucode":"385B764D9AEAE8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKsI6VdljHFtMx4cgEPpqhXiaIYQicqGcal8sIoBYQZn7tYQyPLH1FuOVP8SaYPghPIsqSa1DWjRT2A/132","comment_is_top":false,"comment_ctime":1613989817,"is_pvip":false,"replies":[{"id":101696,"content":"è¿”å›çš„æ˜¯æ–°æ„é€ çš„ç±»å‹è½¬æ¢ä¹‹åçš„ smart_ptrã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1614039759,"ip_address":"","comment_id":279878,"utype":1}],"discussion_count":2,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"template &lt;typename T, typename U&gt;\nsmart_ptr&lt;T&gt; dynamic_pointer_cast(\n  const smart_ptr&lt;U&gt;&amp; other)\n{\n  T* ptr =\n    dynamic_cast&lt;T*&gt;(other.get());\n  return smart_ptr&lt;T&gt;(other, ptr);\n}\nè€å¸ˆèƒ½è§£é‡Šä¸€ä¸‹returnè¿”å›çš„æ˜¯ä»€ä¹ˆå—ï¼Œçœ‹ä¸æ‡‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516985,"discussion_content":"æ¯”è¾ƒè¿ç®—ç¬¦æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†ä¸‹æ ‡åˆ™æ˜¯æœ‰é—®é¢˜çš„ã€‚ç›®å‰åªèƒ½æ”¾ä¸€ä¸ªå…ƒç´ ï¼Œè¦ä¸‹æ ‡å¹²å˜›ï¼Ÿ:-)","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615735987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279691,"user_name":"Geek_227a72","can_delete":false,"product_type":"c1","uid":2417911,"ip_address":"","ucode":"385B764D9AEAE8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKsI6VdljHFtMx4cgEPpqhXiaIYQicqGcal8sIoBYQZn7tYQyPLH1FuOVP8SaYPghPIsqSa1DWjRT2A/132","comment_is_top":false,"comment_ctime":1613908195,"is_pvip":false,"replies":[{"id":101602,"content":"å¯¹ç…§ä¸€ä¸‹\n\nhttps:&#47;&#47;github.com&#47;adah1972&#47;geek_time_cpp&#47;blob&#47;master&#47;02&#47;test02_shared_ptr.cpp\nhttps:&#47;&#47;github.com&#47;adah1972&#47;geek_time_cpp&#47;tree&#47;master&#47;common\n\nåº”è¯¥å°±æ˜¯å“ªå„¿ä»£ç æœ‰ä¸ªå°é—®é¢˜å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1613957277,"ip_address":"","comment_id":279691,"utype":1}],"discussion_count":1,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"use count of ptr1 is 1\nuse count of ptr2 was 0\nuse count of ptr2 is now 2\nptr1 is not empty\n~circle()\n\n\nä¸ºå•¥æˆ‘çš„æ²¡è¾“å‡ºâ€œï½circleï¼ˆï¼‰â€å‘¢ï¼Ÿå‰é¢çš„è¾“å‡ºéƒ½å¯ä»¥","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515904,"discussion_content":"è¿”å›çš„æ˜¯æ–°æ„é€ çš„ç±»å‹è½¬æ¢ä¹‹åçš„ smart_ptrã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614039759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2417911,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKsI6VdljHFtMx4cgEPpqhXiaIYQicqGcal8sIoBYQZn7tYQyPLH1FuOVP8SaYPghPIsqSa1DWjRT2A/132","nickname":"Geek_227a72","note":"","ucode":"385B764D9AEAE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350726,"discussion_content":"çœ‹æ‡‚äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613991042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277279,"user_name":"é¸½è¶³è½»è½»","can_delete":false,"product_type":"c1","uid":1251879,"ip_address":"","ucode":"03C0D150D73273","user_header":"https://static001.geekbang.org/account/avatar/00/13/1a/27/373003d3.jpg","comment_is_top":false,"comment_ctime":1612342830,"is_pvip":false,"replies":[{"id":100646,"content":"ä½ å¯èƒ½éœ€è¦ç»™å‡ºæ˜ç¡®çš„ä¾‹å­æ‰è¡Œã€‚\n\næˆ‘è¿™å„¿ç»™ä¸€ä¸ªç¤ºèŒƒï¼š\n\nhttps:&#47;&#47;godbolt.org&#47;z&#47;h81b47\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ç¦ç”¨äº† circle å’Œ shape çš„æ‹·è´å’Œç§»åŠ¨æ“ä½œï¼Œåœ¨æ™ºèƒ½æŒ‡é’ˆçš„å®ç°ä¸­æ·»åŠ äº† Copy å’Œ Move çš„è¾“å‡ºå­—æ ·ã€‚åœ¨ ptr2 = ptr1; è¿™ä¸€æ“ä½œä¸­ï¼Œå‘ç”Ÿäº†ä¸€æ¬¡æ™ºèƒ½æŒ‡é’ˆçš„æ‹·è´æ„é€ ã€‚è¿™ä¸€æ‹·è´æ„é€ çš„åŸå› ï¼Œç‚¹å‡»â€œCppInsightsâ€æŒ‰é’®å¯ä»¥çœ‹å¾—å¾ˆæ¸…æ¥šï¼šç¼–è¯‘å™¨æ ¹æ®ç±»å‹è¦æ±‚ï¼Œæœ€åç”Ÿæˆçš„æ˜¯\n\nptr2.operator=(smart_ptr&lt;shape&gt;(ptr1));","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1612411777,"ip_address":"","comment_id":277279,"utype":1}],"discussion_count":2,"race_medal":0,"score":11,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ ¹æ®æ‚¨çš„ä»£ç æˆ‘å†™äº†ä¸€ä¸ªæµ‹è¯•caseï¼Œå‘ç°å½“å­ç±»çš„æ™ºèƒ½æŒ‡é’ˆè½¬æ¢ä¸ºçˆ¶ç±»çš„æ™ºèƒ½æŒ‡é’ˆæ—¶ï¼Œè¿˜å‘ç”Ÿäº†ç§»åŠ¨æ„é€ å‡½æ•°çš„è°ƒç”¨ï¼Œç™¾æ€ä¸å¾—å…¶è§£ï¼Œè¯·è€å¸ˆè§£æƒ‘","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514982,"discussion_content":"ä½ å¯èƒ½éœ€è¦ç»™å‡ºæ˜ç¡®çš„ä¾‹å­æ‰è¡Œã€‚\n\næˆ‘è¿™å„¿ç»™ä¸€ä¸ªç¤ºèŒƒï¼š\n\nhttps://godbolt.org/z/h81b47\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ç¦ç”¨äº† circle å’Œ shape çš„æ‹·è´å’Œç§»åŠ¨æ“ä½œï¼Œåœ¨æ™ºèƒ½æŒ‡é’ˆçš„å®ç°ä¸­æ·»åŠ äº† Copy å’Œ Move çš„è¾“å‡ºå­—æ ·ã€‚åœ¨ ptr2 = ptr1; è¿™ä¸€æ“ä½œä¸­ï¼Œå‘ç”Ÿäº†ä¸€æ¬¡æ™ºèƒ½æŒ‡é’ˆçš„æ‹·è´æ„é€ ã€‚è¿™ä¸€æ‹·è´æ„é€ çš„åŸå› ï¼Œç‚¹å‡»â€œCppInsightsâ€æŒ‰é’®å¯ä»¥çœ‹å¾—å¾ˆæ¸…æ¥šï¼šç¼–è¯‘å™¨æ ¹æ®ç±»å‹è¦æ±‚ï¼Œæœ€åç”Ÿæˆçš„æ˜¯\n\nptr2.operator=(smart_ptr&amp;lt;shape&amp;gt;(ptr1));","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612411777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2206226,"avatar":"https://static001.geekbang.org/account/avatar/00/21/aa/12/7ac87dd6.jpg","nickname":"æ— æ¶¯","note":"","ucode":"9A3B2774BC6E5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377647,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘è¿è¡Œæ‚¨çš„è¿™æ®µä»£ç ä¹Ÿå‘ç”Ÿäº†Moveç§»åŠ¨æ„é€ ï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹åŸå› \ncircle()\nuse count of ptr1 is 1\nuse count of ptr2 was 0\nCopy\nMove\nuse count of ptr2 is now 2\n~circle()","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622752422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275545,"user_name":"è“¦ç„¶å›é¦–","can_delete":false,"product_type":"c1","uid":1172090,"ip_address":"","ucode":"B17658DCFE6402","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","comment_is_top":false,"comment_ctime":1611579290,"is_pvip":true,"replies":[{"id":100034,"content":"æ ‡å‡†C++é‡Œçš„ä¸œè¥¿ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šæŠ›å¼‚å¸¸ï¼Œæ˜¯æœ‰æ˜ç¡®è§„å®šçš„ã€‚æ¯”å¦‚ï¼Œå†…å­˜åˆ†é…æ˜¯å¯èƒ½æŠ› std::bad_alloc çš„ã€‚\n\nææ„å‡½æ•° C++ é‡Œçº¦å®šä¸åº”è¯¥æŠ›å¼‚å¸¸ï¼ˆä¼šæŠ›å¼‚å¸¸çš„ææ„å‡½æ•°éå¸¸ç‰¹åˆ«ï¼Œé€šå¸¸ä¸è¯¥å†™ï¼›æˆ‘ä¹Ÿä»æ¥æ²¡å†™è¿‡ï¼‰ã€‚æ•´æ•°çš„èµ‹å€¼å’ŒæŒ‡é’ˆçš„æ¯”è¾ƒï¼Œåˆ™æ˜¯ä»æ¥ä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„â€”â€”ä½ æŒ‡æœ›å®ƒä»¬å¯èƒ½å‘ç”Ÿä»€ä¹ˆæ ·çš„å¼‚å¸¸å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1611638509,"ip_address":"","comment_id":275545,"utype":1}],"discussion_count":2,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œçœ‹åˆ°ä¸Šé¢ç»™çš„stackoverflowçš„è¿™ä¸ªé“¾æ¥ï¼Œä¸Šé¢ä¹Ÿå‡ºç°ç±»ä¼¼çš„æƒ…å†µï¼š\ndumb_array&amp; operator=(const dumb_array&amp; other)\n{\n    if (this != &amp;other) &#47;&#47; (1)\n    {\n        &#47;&#47; get the new data ready before we replace the old\n        std::size_t newSize = other.mSize;\n        int* newArray = newSize ? new int[newSize]() : nullptr; &#47;&#47; (3)\n        std::copy(other.mArray, other.mArray + newSize, newArray); &#47;&#47; (3)\n\n        &#47;&#47; replace the old data (all are non-throwing)\n        delete [] mArray;\n        mSize = newSize;\n        mArray = newArray;\n    }\n\n    return *this;\n}\n\nä¸ºå•¥ä½œè€…è‚¯å®šä¸‹é¢è¿™å‡ å¥ä¸€å®šå°±ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Ÿ","like_count":0},{"had_liked":false,"id":270879,"user_name":"è–›çŠ‡","can_delete":false,"product_type":"c1","uid":2398251,"ip_address":"","ucode":"535E3A30592E05","user_header":"https://static001.geekbang.org/account/avatar/00/24/98/2b/eb097cda.jpg","comment_is_top":false,"comment_ctime":1609310786,"is_pvip":false,"replies":[{"id":98376,"content":"è¿™é‡Œé¢ä¼¼ä¹æœ‰ä¸ªé—®é¢˜ï¼šå½“ç¼–è¯‘å™¨è°ƒç”¨ä½ çš„operator newæ—¶ï¼Œå¯¹è±¡è¿˜æ²¡æœ‰è¿›è¡Œæ„é€ ï¼Œå› æ­¤æ‰€éœ€çš„é¢å¤–å†…å­˜å¤§å°ä¹Ÿè¿˜ä¸çŸ¥é“ã€‚ä½ æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Ÿ\n\næŒ‰æˆ‘çš„ç†è§£ï¼Œè¿™æ„å‘³ç€ä½ è‚¯å®šä¸èƒ½ä½¿ç”¨æ ‡å‡†çš„ make_shared äº†ï¼Œå› ä¸ºä½ éœ€è¦æ„é€ ä¹‹å‰è®¡ç®—å®é™…éœ€è¦åˆ†é…çš„å¤§å°ã€‚å› æ­¤ï¼Œä½ ä¸å¾—ä¸å†™ä¸ªç±»ä¼¼äº make_shared_A çš„ä¸œè¥¿ã€‚æ—¢ç„¶è¿™ä¹ˆå†™äº†ï¼Œé‚£ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒå£°æ˜æˆ friend äº†ã€‚å½“ç„¶ï¼Œä½ éœ€è¦è‡ªå·±éœ€è¦å»å®ç°ï¼Œå¯ä»¥è€ƒè™‘åœ¨æˆ‘çš„ smart_ptr åŸºç¡€ä¸ŠåŠ å…¥ç»Ÿä¸€åˆ†é…å†…å­˜çš„åŠŸèƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1609595916,"ip_address":"","comment_id":270879,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"æˆ‘æœ‰ä¸€ä¸ªç‰¹åˆ«çš„classAï¼ŒåŒ…å«ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ç‰‡ç¼–è¯‘æ—¶ä¸ç¡®å®š(ä½†æ„é€ æ—¶æ ¹æ®å‚æ•°çš„ä¸åŒå¯ä»¥ç¡®å®š)å¤§å°çš„å†…å­˜ï¼Œä¸ºäº†æé«˜æ•ˆç‡é‡è½½äº†newå°†classæœ¬èº«å†…å®¹å’ŒæŒ‡å‘çš„è¿™ç‰‡å†…å­˜ä¸€æ¬¡æ€§åˆ†é…(ä¹Ÿé‡è½½äº†å¯¹åº”çš„delete)ï¼Œç±»ä¼¼make_sharedç©æ³•ï¼›åŒæ—¶å°†æ„é€ å‡½æ•°è®¾ç½®ä¸ºprotectedä½¿å¾—ç”¨æˆ·ä¸èƒ½ç›´æ¥æ„é€ å®ƒã€‚ç”¨æˆ·ä»£ç éœ€è¦ä½¿ç”¨std::shared_ptr&lt;A&gt;ï¼Œä½†å› ä¸ºAä¸èƒ½ç›´æ¥æ„é€ å¯¼è‡´æ— æ³•ä½¿ç”¨make_shared&lt;A&gt;ï¼Œå¦‚æœä½¿ç”¨shared_ptr&lt;A&gt;(new A)çš„è¯è®¡æ•°ä¸å†…å®¹å—åˆåˆ†å¼€å˜æˆä¸¤æ¬¡åˆ†é…äº†ã€‚è¯·æ•™ä¸€ä¸‹è¿™ç§å¥‡è‘©çŠ¶å†µä¸‹æœ‰æ— å¯èƒ½é€šè¿‡å¤–éƒ¨åŒ…è£…(å’Œ&#47;æˆ– è¾ƒå°‘å†…éƒ¨æ”¹åŠ¨)ï¼Œä½¿å¾—make_shared&lt;A&gt;ä»…æœ‰ä¸€æ¬¡å†…å­˜åˆ†é…æé«˜æ•ˆç‡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512778,"discussion_content":"è¿™é‡Œé¢ä¼¼ä¹æœ‰ä¸ªé—®é¢˜ï¼šå½“ç¼–è¯‘å™¨è°ƒç”¨ä½ çš„operator newæ—¶ï¼Œå¯¹è±¡è¿˜æ²¡æœ‰è¿›è¡Œæ„é€ ï¼Œå› æ­¤æ‰€éœ€çš„é¢å¤–å†…å­˜å¤§å°ä¹Ÿè¿˜ä¸çŸ¥é“ã€‚ä½ æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Ÿ\n\næŒ‰æˆ‘çš„ç†è§£ï¼Œè¿™æ„å‘³ç€ä½ è‚¯å®šä¸èƒ½ä½¿ç”¨æ ‡å‡†çš„ make_shared äº†ï¼Œå› ä¸ºä½ éœ€è¦æ„é€ ä¹‹å‰è®¡ç®—å®é™…éœ€è¦åˆ†é…çš„å¤§å°ã€‚å› æ­¤ï¼Œä½ ä¸å¾—ä¸å†™ä¸ªç±»ä¼¼äº make_shared_A çš„ä¸œè¥¿ã€‚æ—¢ç„¶è¿™ä¹ˆå†™äº†ï¼Œé‚£ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒå£°æ˜æˆ friend äº†ã€‚å½“ç„¶ï¼Œä½ éœ€è¦è‡ªå·±éœ€è¦å»å®ç°ï¼Œå¯ä»¥è€ƒè™‘åœ¨æˆ‘çš„ smart_ptr åŸºç¡€ä¸ŠåŠ å…¥ç»Ÿä¸€åˆ†é…å†…å­˜çš„åŠŸèƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609595916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265734,"user_name":"ck","can_delete":false,"product_type":"c1","uid":1051146,"ip_address":"","ucode":"2873489EF6E661","user_header":"https://static001.geekbang.org/account/avatar/00/10/0a/0a/92a663ae.jpg","comment_is_top":false,"comment_ctime":1606996851,"is_pvip":false,"replies":[{"id":96758,"content":"æˆ‘æ”¾äº†æˆ‘çš„å¯å·¥ä½œä»£ç åˆ° Godbolt ä¸Šï¼Œä½ å¯ä»¥è·Ÿä½ çš„å¯¹ç…§çœ‹çœ‹ï¼š\n\nhttps:&#47;&#47;godbolt.org&#47;z&#47;oGofeh","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1607347302,"ip_address":"","comment_id":265734,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"æ„é€ å’Œèµ‹å€¼ä½¿ç”¨ä»¥ä¸‹åŸå‹ï¼š\nsmart_ptr(smart_ptr&amp;&amp; other)\nsmart_ptr&amp; operator=(smart_ptr rhs)\nå®é™…éªŒè¯å’Œä¸‹é¢çš„ç»“æœä¸ç¬¦ã€‚\nsmart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1};             &#47;&#47; ç¼–è¯‘å‡ºé”™ ï¼ˆæ‹·è´æ„é€ delete, éªŒè¯okï¼‰\nsmart_ptr&lt;shape&gt; ptr3;\nptr3 = ptr1;                             &#47;&#47; ç¼–è¯‘å‡ºé”™ ï¼ˆå…¥å‚åŒ¹é…ä¸ºå¼•ç”¨ï¼ŒéªŒè¯okï¼‰\nptr3 = std::move(ptr1);                  &#47;&#47; OKï¼Œå¯ä»¥ (å®é™…ç¼–è¯‘å‡ºé”™ï¼‰\n\nsmart_ptr&lt;shape&gt; ptr4{std::move(ptr3)};  &#47;&#47; OKï¼Œå¯ä»¥\n\ntest.cpp:68:26: error: ambiguous overload for â€˜operator=â€™ (operand types are â€˜smart_ptr&lt;shape&gt;â€™ and â€˜std::remove_reference&lt;smart_ptr&lt;shape&gt;&amp;&gt;::type {aka smart_ptr&lt;shape&gt;}â€™)\n     ptr3 = std::move(ptr1);                  &#47;&#47; OKï¼Œå¯ä»¥\n                          ^\ntest.cpp:10:16: note: candidate: smart_ptr&lt;T&gt;&amp; smart_ptr&lt;T&gt;::operator=(const smart_ptr&lt;T&gt;&amp;) [with T = shape] &lt;deleted&gt;\n     smart_ptr&amp; operator=(const smart_ptr&amp;) = delete;\n                ^~~~~~~~\ntest.cpp:35:16: note: candidate: smart_ptr&lt;T&gt;&amp; smart_ptr&lt;T&gt;::operator=(smart_ptr&lt;T&gt;) [with T = shape]\n     smart_ptr&amp; operator=(smart_ptr rhs)\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512778,"discussion_content":"è¿™é‡Œé¢ä¼¼ä¹æœ‰ä¸ªé—®é¢˜ï¼šå½“ç¼–è¯‘å™¨è°ƒç”¨ä½ çš„operator newæ—¶ï¼Œå¯¹è±¡è¿˜æ²¡æœ‰è¿›è¡Œæ„é€ ï¼Œå› æ­¤æ‰€éœ€çš„é¢å¤–å†…å­˜å¤§å°ä¹Ÿè¿˜ä¸çŸ¥é“ã€‚ä½ æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Ÿ\n\næŒ‰æˆ‘çš„ç†è§£ï¼Œè¿™æ„å‘³ç€ä½ è‚¯å®šä¸èƒ½ä½¿ç”¨æ ‡å‡†çš„ make_shared äº†ï¼Œå› ä¸ºä½ éœ€è¦æ„é€ ä¹‹å‰è®¡ç®—å®é™…éœ€è¦åˆ†é…çš„å¤§å°ã€‚å› æ­¤ï¼Œä½ ä¸å¾—ä¸å†™ä¸ªç±»ä¼¼äº make_shared_A çš„ä¸œè¥¿ã€‚æ—¢ç„¶è¿™ä¹ˆå†™äº†ï¼Œé‚£ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒå£°æ˜æˆ friend äº†ã€‚å½“ç„¶ï¼Œä½ éœ€è¦è‡ªå·±éœ€è¦å»å®ç°ï¼Œå¯ä»¥è€ƒè™‘åœ¨æˆ‘çš„ smart_ptr åŸºç¡€ä¸ŠåŠ å…¥ç»Ÿä¸€åˆ†é…å†…å­˜çš„åŠŸèƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609595916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264744,"user_name":"æµ©æµ©","can_delete":false,"product_type":"c1","uid":1580841,"ip_address":"","ucode":"47558B9C9B7368","user_header":"https://static001.geekbang.org/account/avatar/00/18/1f/29/c7a69190.jpg","comment_is_top":false,"comment_ctime":1606626006,"is_pvip":false,"replies":[{"id":96255,"content":"æ²¡æœ‰ã€‚å°±æ˜¯ä½ è¯´çš„2äº†ã€‚1æ˜¯ä¸€ç§é”™è¯¯ï¼Œä¸ç®—ä½œèµ„æºæ³„éœ²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1606788611,"ip_address":"","comment_id":264744,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ–‡ç« ç¬¬äºŒå¥ä»‹ç»â€˜æ™ºèƒ½æŒ‡é’ˆèƒ½ä»æ ¹æœ¬ä¸Šè§£å†³èµ„æºæ³„éœ²çš„å¯èƒ½æ€§â€™ã€‚\nä»ä¸Šä¸€ç¯‡æ–‡ç« å¾—çŸ¥è¿™äº›â€˜æ ¹æœ¬å¯èƒ½æ€§â€™æœ‰ä¸¤ä¸ªï¼š1. å¯¹è±¡åˆ‡ç‰‡ï¼›2.å¿˜è®°å†™é‡Šæ”¾deleteä»£ç ã€‚\nä¸çŸ¥é“æˆ‘çš„ç†è§£æ˜¯å¦é—æ¼äº†å…¶ä»–â€˜æ ¹æœ¬å¯èƒ½æ€§â€™ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510675,"discussion_content":"æ²¡æœ‰ã€‚å°±æ˜¯ä½ è¯´çš„2äº†ã€‚1æ˜¯ä¸€ç§é”™è¯¯ï¼Œä¸ç®—ä½œèµ„æºæ³„éœ²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606788611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246372,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1599300500,"is_pvip":false,"replies":[{"id":90611,"content":"æ™ºèƒ½æŒ‡é’ˆæœ¬èº«ä¸€èˆ¬ä¹Ÿæ˜¯å­˜å‚¨åœ¨æ ˆä¸Šçš„ã€‚è·Ÿä½ çš„ä¾‹å­ä¸€æ ·ï¼Œåªæœ‰å®ƒæŒ‡å‘çš„å¯¹è±¡åœ¨å †ä¸Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1599437737,"ip_address":"","comment_id":246372,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"å´è€å¸ˆä½ å¥½ï¼Œå°±æ˜¯æŒ‡é’ˆæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ªåœ°å€ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼šï¼Œè¯´æ˜d_tmpæŒ‡å‘çš„æ˜¯å †å†…å­˜ï¼Œå®ƒè‡ªèº«å­˜å‚¨çš„ä½ç½®æ˜¯æ ˆä¸Šã€‚\n    int *d_tmp = new int;\n    std::cout &lt;&lt;  d_tmp &lt;&lt; std::endl; &#47;&#47; è¾“å‡ºï¼š0x10c8050\n    std::cout &lt;&lt; &amp;d_tmp &lt;&lt; std::endl;&#47;&#47; è¾“å‡ºï¼š0x7ffcaac08f10\né—®é¢˜ï¼šé‚£ä¸ºä»€ä¹ˆè¿™ä¸€è®²ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºçš„æŒ‡é’ˆå¯¹è±¡ï¼Œå®ƒè‡ªèº«çš„å­˜å‚¨ä½ç½®å°±ä¸æ˜¯æ ˆä¸Šäº†å‘¢ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510675,"discussion_content":"æ²¡æœ‰ã€‚å°±æ˜¯ä½ è¯´çš„2äº†ã€‚1æ˜¯ä¸€ç§é”™è¯¯ï¼Œä¸ç®—ä½œèµ„æºæ³„éœ²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606788611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245876,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1599099823,"is_pvip":false,"replies":[{"id":90415,"content":"1. ä½ é‡ä¸Šäº†è¢«ç§°ä¸º the most vexing parse çš„é—®é¢˜ã€‚ç›´æ¥å‚çœ‹ç¬¬ 8 è®²ä¸‹çš„â€œç»Ÿä¸€åˆå§‹åŒ–â€ã€‚\n\n2. Shared( Shared&amp; s){} ä¹Ÿç®—æ‹·è´æ„é€ å‡½æ•°ã€‚æœ‰ä»€ä¹ˆç‰¹åˆ«é—®é¢˜ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1599112909,"ip_address":"","comment_id":245876,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"ä»£ç å¦‚ä¸‹ï¼ˆæœ‰ä¸¤ä¸ªç–‘æƒ‘ï¼‰ï¼š\t\t\nclass Shared{\npublic:\n    int a;\n    Shared(){\n        a = 0;\n        cout &lt;&lt; &quot;constructor is called&quot; &lt;&lt; endl;\n    }\n    Shared(const Shared&amp; s){\n        cout &lt;&lt; &quot;copy constructor is called&quot; &lt;&lt; endl;\n    }\n    Shared(Shared&amp; s){\n        cout &lt;&lt; &quot;copy constructorxx is called&quot; &lt;&lt; endl;\n    }\n\n    ~Shared(){\n        cout &lt;&lt; &quot;dtr is called&quot; &lt;&lt; endl;\n    }\n\n\n\n};\n\n&#47;&#47;test shared ptr\n\nint main(){\n       \n&#47;&#47;ç–‘æƒ‘1ï¼š\n        Shared s3(Shared());&#47;&#47;è€å¸ˆï¼Œè¿™ä¸ªä¸æ˜¯è°ƒç”¨copy constructorå˜›ï¼Œä¸ºä»€ä¹ˆè¢«g++è¯†åˆ«ä¸ºè¿™ç§å½¢å¼å³s3ä¸ºä¸€ä¸ªå‡½æ•°å®šä¹‰ï¼šShare s3(Sharedï¼ˆ*ï¼‰ï¼ˆSharedï¼‰) ?\n        int s5(int());&#47;&#47;è¿™ä¸ªæ˜¯ä»¿ç…§ä¸Šé¢è¿™ä¸ªå†™çš„ï¼Œç»“æœs5è¿˜æ˜¯è¢«è¯†åˆ«ä¸ºå‡½æ•°ã€‚\n\n\n\n    static semaphore sem;\n    signal(SIGINT, [](int) { sem.post(); });&#47;&#47; è®¾ç½®é€€å‡ºä¿¡å·\n    sem.wait();\n\n    return 0;\n\n}\n&#47;&#47;ç–‘æƒ‘2ï¼š\n&#47;&#47;å¦å¤–ï¼šcppreferenceä¸Šè¯´çš„copy constructorçš„å½¢å¼ä¸º\tShared(const Shared&amp; s){}ï¼Œé‚£Shared( Shared&amp; s){} ä¹Ÿç®—copy constructorå“¦ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505000,"discussion_content":"1. ä½ é‡ä¸Šäº†è¢«ç§°ä¸º the most vexing parse çš„é—®é¢˜ã€‚ç›´æ¥å‚çœ‹ç¬¬ 8 è®²ä¸‹çš„â€œç»Ÿä¸€åˆå§‹åŒ–â€ã€‚\n\n2. Shared( Shared&amp;amp; s){} ä¹Ÿç®—æ‹·è´æ„é€ å‡½æ•°ã€‚æœ‰ä»€ä¹ˆç‰¹åˆ«é—®é¢˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599112909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245287,"user_name":"wjh_all_in","can_delete":false,"product_type":"c1","uid":1501209,"ip_address":"","ucode":"0480A53AD46C97","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIC2Ww3swYiaMalnpA1f87xgzV8Hs1Y27M2CbNQqgR27Il72hibXn5FvhU7mbr3XKsxYDZdjY4GMDbg/132","comment_is_top":false,"comment_ctime":1598884511,"is_pvip":false,"replies":[{"id":90239,"content":"æ–‡ä¸­è¿™å¥è¯è¯•å›¾è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼š\n\nâ€œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ã€æ¨¡æ¿å½¢å¼ã€‘ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚å¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†ï¼ˆè§â€œæ‹·è´æ„é€ å’Œèµ‹å€¼â€ä¸€èŠ‚ï¼‰ã€‚ä¸è¿‡ï¼Œæ›´é€šç”¨çš„æ–¹å¼ä»ç„¶æ˜¯åŒæ—¶å®šä¹‰æ ‡å‡†çš„æ‹·è´ &#47; ç§»åŠ¨æ„é€ å‡½æ•°å’Œæ‰€éœ€çš„æ¨¡æ¿æ„é€ å‡½æ•°ã€‚ä¸‹é¢çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆé‡Œæˆ‘ä»¬å°±éœ€è¦è¿™ä¹ˆåšã€‚â€\n\nç¼–è¯‘å™¨è®¤ä¸ºå¤Ÿæ ¼ç§°å¾—ä¸Šæ‹·è´æ„é€ å‡½æ•°ã€ç§»åŠ¨æ„é€ å‡½æ•°çš„ï¼Œéƒ½æ˜¯éæ¨¡æ¿å½¢å¼ã€‚ç„¶ååˆæœ‰ä¸€äº›è§„åˆ™å†³å®šäº†æ˜¯å¦ç”Ÿæˆé»˜è®¤çš„æ‹·è´æ„é€ å’Œç§»åŠ¨æ„é€ å‡½æ•°ã€‚å¦‚æœä¸¤è€…éƒ½ä¸ç”Ÿæˆï¼Œé‚£æˆ‘æä¾›æ¨¡æ¿å°±å¤Ÿäº†ã€‚ä½† C++ çš„è§„åˆ™æ˜¯ï¼Œæ‹·è´æ„é€ ä¸€èˆ¬æ€»ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œé™¤éæœ‰ç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•°æˆ–è€…ç”Ÿæˆè‡ªåŠ¨çš„æ‹·è´æ„é€ å‡½æ•°å¤±è´¥ï¼›è€Œç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œä¼šè®©ç¼–è¯‘å™¨**ä¸ä¼š**è‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ„é€ å‡½æ•°â€¦â€¦\n\næ˜¯æœ‰ç‚¹ç»•ï¼Œæ‰€ä»¥è¿™ä¸€è®²æˆ‘æ²¡æœ‰ä»”ç»†è§£é‡Šã€‚ç¬¬ 9 è®²ä¼šç¨å¾®å±•å¼€ä¸€äº›ï¼Œä½†å®Œæ•´çš„è§„åˆ™è¿˜æ˜¯è¦åˆ° cppreference.com ä¸Šå»æŸ¥çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1598932365,"ip_address":"","comment_id":245287,"utype":1}],"discussion_count":3,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œsmart_ptr\nç§»åŠ¨æ‹·è´æ„é€ å‡½æ•°æ²¡æœ‰ç‰¹ä¾‹åŒ–å®šä¹‰ï¼š\ntemplate &lt;typename U&gt;  \nsmart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\nä½†æ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼Œéœ€è¦æ˜¾å¼çš„å®šä¹‰ï¼š\nsmart_ptr(const smart_ptr&amp; other)\ntemplate &lt;typename U&gt;  \nsmart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept\n\nä¸Šé¢è¿™ä¸ªåŒºåˆ«ï¼Œæ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504832,"discussion_content":"æ–‡ä¸­è¿™å¥è¯è¯•å›¾è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼š\n\nâ€œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ã€æ¨¡æ¿å½¢å¼ã€‘ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚å¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†ï¼ˆè§â€œæ‹·è´æ„é€ å’Œèµ‹å€¼â€ä¸€èŠ‚ï¼‰ã€‚ä¸è¿‡ï¼Œæ›´é€šç”¨çš„æ–¹å¼ä»ç„¶æ˜¯åŒæ—¶å®šä¹‰æ ‡å‡†çš„æ‹·è´ / ç§»åŠ¨æ„é€ å‡½æ•°å’Œæ‰€éœ€çš„æ¨¡æ¿æ„é€ å‡½æ•°ã€‚ä¸‹é¢çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆé‡Œæˆ‘ä»¬å°±éœ€è¦è¿™ä¹ˆåšã€‚â€\n\nç¼–è¯‘å™¨è®¤ä¸ºå¤Ÿæ ¼ç§°å¾—ä¸Šæ‹·è´æ„é€ å‡½æ•°ã€ç§»åŠ¨æ„é€ å‡½æ•°çš„ï¼Œéƒ½æ˜¯éæ¨¡æ¿å½¢å¼ã€‚ç„¶ååˆæœ‰ä¸€äº›è§„åˆ™å†³å®šäº†æ˜¯å¦ç”Ÿæˆé»˜è®¤çš„æ‹·è´æ„é€ å’Œç§»åŠ¨æ„é€ å‡½æ•°ã€‚å¦‚æœä¸¤è€…éƒ½ä¸ç”Ÿæˆï¼Œé‚£æˆ‘æä¾›æ¨¡æ¿å°±å¤Ÿäº†ã€‚ä½† C++ çš„è§„åˆ™æ˜¯ï¼Œæ‹·è´æ„é€ ä¸€èˆ¬æ€»ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œé™¤éæœ‰ç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•°æˆ–è€…ç”Ÿæˆè‡ªåŠ¨çš„æ‹·è´æ„é€ å‡½æ•°å¤±è´¥ï¼›è€Œç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œä¼šè®©ç¼–è¯‘å™¨**ä¸ä¼š**è‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ„é€ å‡½æ•°â€¦â€¦\n\næ˜¯æœ‰ç‚¹ç»•ï¼Œæ‰€ä»¥è¿™ä¸€è®²æˆ‘æ²¡æœ‰ä»”ç»†è§£é‡Šã€‚ç¬¬ 9 è®²ä¼šç¨å¾®å±•å¼€ä¸€äº›ï¼Œä½†å®Œæ•´çš„è§„åˆ™è¿˜æ˜¯è¦åˆ° cppreference.com ä¸Šå»æŸ¥çœ‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598932365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501209,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIC2Ww3swYiaMalnpA1f87xgzV8Hs1Y27M2CbNQqgR27Il72hibXn5FvhU7mbr3XKsxYDZdjY4GMDbg/132","nickname":"wjh_all_in","note":"","ucode":"0480A53AD46C97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302704,"discussion_content":"æ˜¯æœ‰ç‚¹ç»•ï¼Œæˆ‘è‡ªå·±ä¹Ÿä»£ç å®éªŒäº†ï¼Œç§»åŠ¨è¯­æ„çš„åœºæ™¯ï¼Œä¼šæŒ‰ç…§æ¨¡æ¿å®šä¹‰ç”Ÿæˆä»£ç \nä½†æ˜¯æ‹·è´æ„é€ åœºæ™¯ï¼Œä¸æ”¯æŒæŒ‰ç…§æ¨¡æ¿ç”Ÿæˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599012536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1501209,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIC2Ww3swYiaMalnpA1f87xgzV8Hs1Y27M2CbNQqgR27Il72hibXn5FvhU7mbr3XKsxYDZdjY4GMDbg/132","nickname":"wjh_all_in","note":"","ucode":"0480A53AD46C97","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303012,"discussion_content":"æ‹·è´æ„é€ åœºæ™¯ï¼Œç¼–è¯‘å™¨è®¤ä¸ºæ¨¡æ¿ä¸æ˜¯æ‹·è´æ„é€ å‡½æ•°ã€‚å¦‚æœæˆ‘ä¸æä¾›çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªï¼ˆé”™è¯¯çš„ï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599113499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302704,"ip_address":"","group_id":0},"score":303012,"extra":""}]}]},{"had_liked":false,"id":243207,"user_name":"ç¾¤","can_delete":false,"product_type":"c1","uid":1843313,"ip_address":"","ucode":"F8A363F19DAB9B","user_header":"https://static001.geekbang.org/account/avatar/00/1c/20/71/ad3465c0.jpg","comment_is_top":false,"comment_ctime":1597993325,"is_pvip":false,"replies":[{"id":89664,"content":"æ˜¯æœ€åæ”¾GitHubç‰ˆæœ¬çš„ä»£ç è¿˜æ˜¯ä»€ä¹ˆç‰ˆæœ¬çš„ï¼Ÿä»€ä¹ˆå¹³å°ä¸‹çš„ä»€ä¹ˆç¼–è¯‘å™¨ï¼Ÿæœ€ç»ˆç‰ˆéƒ½åº”è¯¥æ˜¯æ­£å¸¸è¿è¡Œä¸å‡ºé”™çš„ã€‚æˆ‘åœ¨ä¸‰ä¸ªå¹³å°çš„ä¸‰ç§ç¼–è¯‘å™¨ä¸Šæµ‹è¿‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1598007208,"ip_address":"","comment_id":243207,"utype":1}],"discussion_count":2,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"è€å¸ˆ,åœ¨æ™ºèƒ½æŒ‡é’ˆæµ‹è¯•ä»£ç æ—¶,å…¶ä¸­ç¬¬19è¡Œ, \nptr2 = ptr1; &#47;&#47; è¿™ä¸€å¥ ä¼šæŠ¥é”™ Segmentation fault,å…¶ä»–çš„æµ‹è¯•éƒ½å¯é€šè¿‡,å‡å¯ä»¥è¾“å‡ºå…¶ use_count()å€¼.\næä¸æ¸…ä»€ä¹ˆåŸå› ,ptr1æŒ‡å‘çš„æ˜¯smart_ptr&lt;circle&gt; , è€Œ ptr2æŒ‡å‘çš„æ˜¯smart_ptr&lt;shape&gt;,è¿™é‡Œ,ptr1å¯ä»¥ç›´æ¥èµ‹ç»™ptr2å—??","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504221,"discussion_content":"æ˜¯æœ€åæ”¾GitHubç‰ˆæœ¬çš„ä»£ç è¿˜æ˜¯ä»€ä¹ˆç‰ˆæœ¬çš„ï¼Ÿä»€ä¹ˆå¹³å°ä¸‹çš„ä»€ä¹ˆç¼–è¯‘å™¨ï¼Ÿæœ€ç»ˆç‰ˆéƒ½åº”è¯¥æ˜¯æ­£å¸¸è¿è¡Œä¸å‡ºé”™çš„ã€‚æˆ‘åœ¨ä¸‰ä¸ªå¹³å°çš„ä¸‰ç§ç¼–è¯‘å™¨ä¸Šæµ‹è¿‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598007208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1843313,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/20/71/ad3465c0.jpg","nickname":"ç¾¤","note":"","ucode":"F8A363F19DAB9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300281,"discussion_content":"å—¯å—¯ï¼Œæˆ‘æ‰¾åˆ°è€å¸ˆæ‚¨çš„ä»£ç çœ‹äº†ï¼Œæ˜¯æˆ‘è‡ªå·±å†™çš„é—®é¢˜ï¼Œè°¢è°¢è€å¸ˆåŠæ—¶è§£ç­”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598009876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225571,"user_name":"å½­è¶Š","can_delete":false,"product_type":"c1","uid":1052602,"ip_address":"","ucode":"38155338D292A5","user_header":"https://static001.geekbang.org/account/avatar/00/10/0f/ba/a2531cf0.jpg","comment_is_top":false,"comment_ctime":1591791624,"is_pvip":false,"replies":[{"id":83136,"content":"è·ŸC++98è¿™æ–¹é¢æ²¡åŒºåˆ«ï¼Œæˆ‘è¿™ä¸ªå®ç°é‡Œshared_count_ä¸€ç›´å¯èƒ½æœ‰é‡æŒ‡é’ˆçš„ï¼ˆä¸æ­¢è¿™ä¸€å¤„æœ‰è¿™ç§æƒ…å†µï¼‰ã€‚ä¸è¿‡ï¼Œæˆ‘ä»æ¥ä¸ç›´æ¥ç”¨shared_count_ï¼Œæ°¸è¿œæ˜¯å…ˆçœ‹ptr_çš„å€¼å†æ“ä½œï¼Œæ‰€ä»¥åº”è¯¥æ²¡æœ‰é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1591834887,"ip_address":"","comment_id":225571,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"template &lt;typename U&gt;\n smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept  {    \n     ptr_ = other.ptr_;   \n     if (ptr_) {\n           shared_count_ =        other.shared_count_;\n           other.ptr_ = nullptr;   \n      }  \n}\n\nè€å¸ˆæˆ‘å¯¹C++11ä»¥åçš„ç‰¹æ€§ä¸æ˜¯éå¸¸ç†Ÿæ‚‰ï¼Œè¿™ä¸ªç§»åŠ¨æ„é€ å‡½æ•°çš„other.shared_countä¸ç”¨ä¹Ÿè®¾ç½®ä¸ºnullptrå—ï¼Ÿä¼šä¸ä¼šæˆä¸ºé‡æŒ‡é’ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504221,"discussion_content":"æ˜¯æœ€åæ”¾GitHubç‰ˆæœ¬çš„ä»£ç è¿˜æ˜¯ä»€ä¹ˆç‰ˆæœ¬çš„ï¼Ÿä»€ä¹ˆå¹³å°ä¸‹çš„ä»€ä¹ˆç¼–è¯‘å™¨ï¼Ÿæœ€ç»ˆç‰ˆéƒ½åº”è¯¥æ˜¯æ­£å¸¸è¿è¡Œä¸å‡ºé”™çš„ã€‚æˆ‘åœ¨ä¸‰ä¸ªå¹³å°çš„ä¸‰ç§ç¼–è¯‘å™¨ä¸Šæµ‹è¿‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598007208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1843313,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/20/71/ad3465c0.jpg","nickname":"ç¾¤","note":"","ucode":"F8A363F19DAB9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300281,"discussion_content":"å—¯å—¯ï¼Œæˆ‘æ‰¾åˆ°è€å¸ˆæ‚¨çš„ä»£ç çœ‹äº†ï¼Œæ˜¯æˆ‘è‡ªå·±å†™çš„é—®é¢˜ï¼Œè°¢è°¢è€å¸ˆåŠæ—¶è§£ç­”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598009876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224594,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1591455106,"is_pvip":false,"replies":[{"id":82729,"content":"å¯¹æ²¡æœ‰è°ƒç”¨æ‹·è´æ„é€ å’Œæ‹·è´èµ‹å€¼çš„ç†è§£æ­£ç¡®ã€‚\n\nä½†æ˜¯ï¼Œç›®å‰çš„æ‹·è´èµ‹å€¼å®ç°æ˜¯ä¸å¯¹çš„ã€‚åŠ ä¸Šå¼•ç”¨ä¹‹åï¼Œç°åœ¨ä½ æ‰§è¡Œ a = b æ—¶ï¼Œå®é™…ä¸Šæ˜¯äº¤æ¢äº† a å’Œ b çš„å†…å®¹ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯ a = b è¯¥åšçš„äº‹æƒ…ã€‚åŸå…ˆçš„ä½¿ç”¨å€¼è€Œä¸æ˜¯å¼•ç”¨çš„å®ç°æ˜¯å¯¹çš„ã€‚å¦‚æœä½ æƒ³æ”¹ç”¨å¼•ç”¨ï¼Œå°±ä¸åº”è¯¥ç»§ç»­ä½¿ç”¨äº¤æ¢è¿™ç§æ–¹å¼äº†ï¼š\n\n    A&amp; operator=(const A&amp; other)\n    {\n        if (this != &amp;other) {\n            s1 = other.s1;\n            n = other.n;\n        }\n        return *this;\n    }\n\næ³¨æ„ä¸¤è¡Œçš„èµ‹å€¼é¡ºåºå¦‚æœäº¤æ¢ä¸€ä¸‹çš„è¯ï¼Œå¼‚å¸¸å®‰å…¨æ€§å°±ä¸èƒ½å¾—åˆ°ä¿è¯äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1591539148,"ip_address":"","comment_id":224594,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nclass A {\npublic:\n    int n;\n    std::string s1;\n\n    &#47;&#47;åœ¨åŠ äº†copy constructoræ—¶ï¼Œå¿…é¡»æ˜¾å¼åŠ å…¥constructor,ç¼–è¯‘å™¨ä¸ä¼šå†éšå¼æä¾›constructor\n    A() {}\n\n    &#47;&#47;copy constructor\n    A(const A &amp;a) {\n        std::cout &lt;&lt; &quot;copy constructor of A\\n&quot;;\n    }\n\n    &#47;&#47; user-defined copy assignment, copy-and-swap form\n    A &amp;operator=(A&amp; other) {\n        std::cout &lt;&lt; &quot;copy assignment of A\\n&quot;;\n        std::swap(n, other.n);\n        std::swap(s1, other.s1);\n        return *this;\n    }\n};\nint main() {\n\n    A  a2;\n\n    A &amp;a1 = a2;&#47;&#47;a1æ˜¯å¼•ç”¨ï¼Œa2æ˜¯å€¼ï¼Œæ‰€ä»¥ä¸ä¼šè°ƒç”¨copy assignmentï¼Œä¹Ÿä¸ä¼šè°ƒç”¨ copy constructor\n    A &amp;a3 = a1;&#47;&#47;a1åœ¨è¿™é‡Œä¸æ˜¯å¼•ç”¨ï¼Œè€Œa3æ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šè°ƒç”¨copy assignmentï¼Œä¹Ÿä¸ä¼šè°ƒç”¨ copy constructor\n}\nè€å¸ˆï¼Œè¿™æ ·ç†è§£ï¼ˆä»£ç åçš„å…³äºæ²¡æœ‰è°ƒç”¨copy assginment,copy constructorçš„ç†è§£ï¼‰å¯¹ä¸ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497901,"discussion_content":"è·ŸC++98è¿™æ–¹é¢æ²¡åŒºåˆ«ï¼Œæˆ‘è¿™ä¸ªå®ç°é‡Œshared_count_ä¸€ç›´å¯èƒ½æœ‰é‡æŒ‡é’ˆçš„ï¼ˆä¸æ­¢è¿™ä¸€å¤„æœ‰è¿™ç§æƒ…å†µï¼‰ã€‚ä¸è¿‡ï¼Œæˆ‘ä»æ¥ä¸ç›´æ¥ç”¨shared_count_ï¼Œæ°¸è¿œæ˜¯å…ˆçœ‹ptr_çš„å€¼å†æ“ä½œï¼Œæ‰€ä»¥åº”è¯¥æ²¡æœ‰é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591834887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275545,"user_name":"è“¦ç„¶å›é¦–","can_delete":false,"product_type":"c1","uid":1172090,"ip_address":"","ucode":"B17658DCFE6402","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","comment_is_top":false,"comment_ctime":1611579290,"is_pvip":true,"replies":[{"id":100034,"content":"æ ‡å‡†C++é‡Œçš„ä¸œè¥¿ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šæŠ›å¼‚å¸¸ï¼Œæ˜¯æœ‰æ˜ç¡®è§„å®šçš„ã€‚æ¯”å¦‚ï¼Œå†…å­˜åˆ†é…æ˜¯å¯èƒ½æŠ› std::bad_alloc çš„ã€‚\n\nææ„å‡½æ•° C++ é‡Œçº¦å®šä¸åº”è¯¥æŠ›å¼‚å¸¸ï¼ˆä¼šæŠ›å¼‚å¸¸çš„ææ„å‡½æ•°éå¸¸ç‰¹åˆ«ï¼Œé€šå¸¸ä¸è¯¥å†™ï¼›æˆ‘ä¹Ÿä»æ¥æ²¡å†™è¿‡ï¼‰ã€‚æ•´æ•°çš„èµ‹å€¼å’ŒæŒ‡é’ˆçš„æ¯”è¾ƒï¼Œåˆ™æ˜¯ä»æ¥ä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„â€”â€”ä½ æŒ‡æœ›å®ƒä»¬å¯èƒ½å‘ç”Ÿä»€ä¹ˆæ ·çš„å¼‚å¸¸å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1611638509,"ip_address":"","comment_id":275545,"utype":1}],"discussion_count":2,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œçœ‹åˆ°ä¸Šé¢ç»™çš„stackoverflowçš„è¿™ä¸ªé“¾æ¥ï¼Œä¸Šé¢ä¹Ÿå‡ºç°ç±»ä¼¼çš„æƒ…å†µï¼š\ndumb_array&amp; operator=(const dumb_array&amp; other)\n{\n    if (this != &amp;other) &#47;&#47; (1)\n    {\n        &#47;&#47; get the new data ready before we replace the old\n        std::size_t newSize = other.mSize;\n        int* newArray = newSize ? new int[newSize]() : nullptr; &#47;&#47; (3)\n        std::copy(other.mArray, other.mArray + newSize, newArray); &#47;&#47; (3)\n\n        &#47;&#47; replace the old data (all are non-throwing)\n        delete [] mArray;\n        mSize = newSize;\n        mArray = newArray;\n    }\n\n    return *this;\n}\n\nä¸ºå•¥ä½œè€…è‚¯å®šä¸‹é¢è¿™å‡ å¥ä¸€å®šå°±ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514391,"discussion_content":"æ ‡å‡†C++é‡Œçš„ä¸œè¥¿ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šæŠ›å¼‚å¸¸ï¼Œæ˜¯æœ‰æ˜ç¡®è§„å®šçš„ã€‚æ¯”å¦‚ï¼Œå†…å­˜åˆ†é…æ˜¯å¯èƒ½æŠ› std::bad_alloc çš„ã€‚\n\nææ„å‡½æ•° C++ é‡Œçº¦å®šä¸åº”è¯¥æŠ›å¼‚å¸¸ï¼ˆä¼šæŠ›å¼‚å¸¸çš„ææ„å‡½æ•°éå¸¸ç‰¹åˆ«ï¼Œé€šå¸¸ä¸è¯¥å†™ï¼›æˆ‘ä¹Ÿä»æ¥æ²¡å†™è¿‡ï¼‰ã€‚æ•´æ•°çš„èµ‹å€¼å’ŒæŒ‡é’ˆçš„æ¯”è¾ƒï¼Œåˆ™æ˜¯ä»æ¥ä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„â€”â€”ä½ æŒ‡æœ›å®ƒä»¬å¯èƒ½å‘ç”Ÿä»€ä¹ˆæ ·çš„å¼‚å¸¸å‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1611638509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"è“¦ç„¶å›é¦–","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345044,"discussion_content":"è¿™é‡Œï¼Œæˆ‘å¯èƒ½æŠŠå¼‚å¸¸å’Œä¸€åˆ‡çš†æœ‰å¯èƒ½å‘ç”Ÿæ··åœ¨ä¸€èµ·äº†ï¼ŒC++é‡Œé¢çš„å¼‚å¸¸åº”è¯¥æ˜¯åº”å¯¹ä¸æ­£å¸¸å¾·æƒ…å†µï¼Œè€Œé‚£äº›ä¸€å®šå¯èƒ½ä¼šå‡ºç°å¼‚äºæ­£å¸¸çš„æƒ…å†µå‘¢ï¼Œä¸€èˆ¬æ¥è®²ï¼Œå¯¹äºå†…ç½®ç±»å‹çš„åŸºæœ¬è¿ç®—ï¼Œç¼–è¯‘å™¨å’ŒCPUå·²ç»èƒ½å¤Ÿå¤„ç†çš„å¾ˆå¥½äº†ï¼Œå¯ä»¥è®¤ä¸ºç»å¤§å¤šæ•°æƒ…å†µéƒ½ä¸å¯èƒ½å‡ºé—®é¢˜ï¼ŒåŸºæœ¬å¯ä»¥è®¤ä¸ºä¸ä¼šå‡ºå¼‚å¸¸æƒ…å†µï¼Œæˆ‘ä»¬ç¨‹åºå‘˜éœ€è¦å…³æ³¨çš„æ˜¯ï¼Œé‚£äº›æœ‰å¯èƒ½å¼•å‘å¼‚å¸¸çš„æƒ…å†µï¼Œå°±æ˜¯æƒ…å†µä¸æ˜¯è¿™ä¹ˆç›´æ¥å’Œæ˜ç¡®çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611646224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":270879,"user_name":"è–›çŠ‡","can_delete":false,"product_type":"c1","uid":2398251,"ip_address":"","ucode":"535E3A30592E05","user_header":"https://static001.geekbang.org/account/avatar/00/24/98/2b/eb097cda.jpg","comment_is_top":false,"comment_ctime":1609310786,"is_pvip":false,"replies":[{"id":98376,"content":"è¿™é‡Œé¢ä¼¼ä¹æœ‰ä¸ªé—®é¢˜ï¼šå½“ç¼–è¯‘å™¨è°ƒç”¨ä½ çš„operator newæ—¶ï¼Œå¯¹è±¡è¿˜æ²¡æœ‰è¿›è¡Œæ„é€ ï¼Œå› æ­¤æ‰€éœ€çš„é¢å¤–å†…å­˜å¤§å°ä¹Ÿè¿˜ä¸çŸ¥é“ã€‚ä½ æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Ÿ\n\næŒ‰æˆ‘çš„ç†è§£ï¼Œè¿™æ„å‘³ç€ä½ è‚¯å®šä¸èƒ½ä½¿ç”¨æ ‡å‡†çš„ make_shared äº†ï¼Œå› ä¸ºä½ éœ€è¦æ„é€ ä¹‹å‰è®¡ç®—å®é™…éœ€è¦åˆ†é…çš„å¤§å°ã€‚å› æ­¤ï¼Œä½ ä¸å¾—ä¸å†™ä¸ªç±»ä¼¼äº make_shared_A çš„ä¸œè¥¿ã€‚æ—¢ç„¶è¿™ä¹ˆå†™äº†ï¼Œé‚£ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒå£°æ˜æˆ friend äº†ã€‚å½“ç„¶ï¼Œä½ éœ€è¦è‡ªå·±éœ€è¦å»å®ç°ï¼Œå¯ä»¥è€ƒè™‘åœ¨æˆ‘çš„ smart_ptr åŸºç¡€ä¸ŠåŠ å…¥ç»Ÿä¸€åˆ†é…å†…å­˜çš„åŠŸèƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1609595916,"ip_address":"","comment_id":270879,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"æˆ‘æœ‰ä¸€ä¸ªç‰¹åˆ«çš„classAï¼ŒåŒ…å«ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ç‰‡ç¼–è¯‘æ—¶ä¸ç¡®å®š(ä½†æ„é€ æ—¶æ ¹æ®å‚æ•°çš„ä¸åŒå¯ä»¥ç¡®å®š)å¤§å°çš„å†…å­˜ï¼Œä¸ºäº†æé«˜æ•ˆç‡é‡è½½äº†newå°†classæœ¬èº«å†…å®¹å’ŒæŒ‡å‘çš„è¿™ç‰‡å†…å­˜ä¸€æ¬¡æ€§åˆ†é…(ä¹Ÿé‡è½½äº†å¯¹åº”çš„delete)ï¼Œç±»ä¼¼make_sharedç©æ³•ï¼›åŒæ—¶å°†æ„é€ å‡½æ•°è®¾ç½®ä¸ºprotectedä½¿å¾—ç”¨æˆ·ä¸èƒ½ç›´æ¥æ„é€ å®ƒã€‚ç”¨æˆ·ä»£ç éœ€è¦ä½¿ç”¨std::shared_ptr&lt;A&gt;ï¼Œä½†å› ä¸ºAä¸èƒ½ç›´æ¥æ„é€ å¯¼è‡´æ— æ³•ä½¿ç”¨make_shared&lt;A&gt;ï¼Œå¦‚æœä½¿ç”¨shared_ptr&lt;A&gt;(new A)çš„è¯è®¡æ•°ä¸å†…å®¹å—åˆåˆ†å¼€å˜æˆä¸¤æ¬¡åˆ†é…äº†ã€‚è¯·æ•™ä¸€ä¸‹è¿™ç§å¥‡è‘©çŠ¶å†µä¸‹æœ‰æ— å¯èƒ½é€šè¿‡å¤–éƒ¨åŒ…è£…(å’Œ&#47;æˆ– è¾ƒå°‘å†…éƒ¨æ”¹åŠ¨)ï¼Œä½¿å¾—make_shared&lt;A&gt;ä»…æœ‰ä¸€æ¬¡å†…å­˜åˆ†é…æé«˜æ•ˆç‡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514391,"discussion_content":"æ ‡å‡†C++é‡Œçš„ä¸œè¥¿ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šæŠ›å¼‚å¸¸ï¼Œæ˜¯æœ‰æ˜ç¡®è§„å®šçš„ã€‚æ¯”å¦‚ï¼Œå†…å­˜åˆ†é…æ˜¯å¯èƒ½æŠ› std::bad_alloc çš„ã€‚\n\nææ„å‡½æ•° C++ é‡Œçº¦å®šä¸åº”è¯¥æŠ›å¼‚å¸¸ï¼ˆä¼šæŠ›å¼‚å¸¸çš„ææ„å‡½æ•°éå¸¸ç‰¹åˆ«ï¼Œé€šå¸¸ä¸è¯¥å†™ï¼›æˆ‘ä¹Ÿä»æ¥æ²¡å†™è¿‡ï¼‰ã€‚æ•´æ•°çš„èµ‹å€¼å’ŒæŒ‡é’ˆçš„æ¯”è¾ƒï¼Œåˆ™æ˜¯ä»æ¥ä¸ä¼šå‘ç”Ÿå¼‚å¸¸çš„â€”â€”ä½ æŒ‡æœ›å®ƒä»¬å¯èƒ½å‘ç”Ÿä»€ä¹ˆæ ·çš„å¼‚å¸¸å‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1611638509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"è“¦ç„¶å›é¦–","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345044,"discussion_content":"è¿™é‡Œï¼Œæˆ‘å¯èƒ½æŠŠå¼‚å¸¸å’Œä¸€åˆ‡çš†æœ‰å¯èƒ½å‘ç”Ÿæ··åœ¨ä¸€èµ·äº†ï¼ŒC++é‡Œé¢çš„å¼‚å¸¸åº”è¯¥æ˜¯åº”å¯¹ä¸æ­£å¸¸å¾·æƒ…å†µï¼Œè€Œé‚£äº›ä¸€å®šå¯èƒ½ä¼šå‡ºç°å¼‚äºæ­£å¸¸çš„æƒ…å†µå‘¢ï¼Œä¸€èˆ¬æ¥è®²ï¼Œå¯¹äºå†…ç½®ç±»å‹çš„åŸºæœ¬è¿ç®—ï¼Œç¼–è¯‘å™¨å’ŒCPUå·²ç»èƒ½å¤Ÿå¤„ç†çš„å¾ˆå¥½äº†ï¼Œå¯ä»¥è®¤ä¸ºç»å¤§å¤šæ•°æƒ…å†µéƒ½ä¸å¯èƒ½å‡ºé—®é¢˜ï¼ŒåŸºæœ¬å¯ä»¥è®¤ä¸ºä¸ä¼šå‡ºå¼‚å¸¸æƒ…å†µï¼Œæˆ‘ä»¬ç¨‹åºå‘˜éœ€è¦å…³æ³¨çš„æ˜¯ï¼Œé‚£äº›æœ‰å¯èƒ½å¼•å‘å¼‚å¸¸çš„æƒ…å†µï¼Œå°±æ˜¯æƒ…å†µä¸æ˜¯è¿™ä¹ˆç›´æ¥å’Œæ˜ç¡®çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611646224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265734,"user_name":"ck","can_delete":false,"product_type":"c1","uid":1051146,"ip_address":"","ucode":"2873489EF6E661","user_header":"https://static001.geekbang.org/account/avatar/00/10/0a/0a/92a663ae.jpg","comment_is_top":false,"comment_ctime":1606996851,"is_pvip":false,"replies":[{"id":96758,"content":"æˆ‘æ”¾äº†æˆ‘çš„å¯å·¥ä½œä»£ç åˆ° Godbolt ä¸Šï¼Œä½ å¯ä»¥è·Ÿä½ çš„å¯¹ç…§çœ‹çœ‹ï¼š\n\nhttps:&#47;&#47;godbolt.org&#47;z&#47;oGofeh","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1607347302,"ip_address":"","comment_id":265734,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"æ„é€ å’Œèµ‹å€¼ä½¿ç”¨ä»¥ä¸‹åŸå‹ï¼š\nsmart_ptr(smart_ptr&amp;&amp; other)\nsmart_ptr&amp; operator=(smart_ptr rhs)\nå®é™…éªŒè¯å’Œä¸‹é¢çš„ç»“æœä¸ç¬¦ã€‚\nsmart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1};             &#47;&#47; ç¼–è¯‘å‡ºé”™ ï¼ˆæ‹·è´æ„é€ delete, éªŒè¯okï¼‰\nsmart_ptr&lt;shape&gt; ptr3;\nptr3 = ptr1;                             &#47;&#47; ç¼–è¯‘å‡ºé”™ ï¼ˆå…¥å‚åŒ¹é…ä¸ºå¼•ç”¨ï¼ŒéªŒè¯okï¼‰\nptr3 = std::move(ptr1);                  &#47;&#47; OKï¼Œå¯ä»¥ (å®é™…ç¼–è¯‘å‡ºé”™ï¼‰\n\nsmart_ptr&lt;shape&gt; ptr4{std::move(ptr3)};  &#47;&#47; OKï¼Œå¯ä»¥\n\ntest.cpp:68:26: error: ambiguous overload for â€˜operator=â€™ (operand types are â€˜smart_ptr&lt;shape&gt;â€™ and â€˜std::remove_reference&lt;smart_ptr&lt;shape&gt;&amp;&gt;::type {aka smart_ptr&lt;shape&gt;}â€™)\n     ptr3 = std::move(ptr1);                  &#47;&#47; OKï¼Œå¯ä»¥\n                          ^\ntest.cpp:10:16: note: candidate: smart_ptr&lt;T&gt;&amp; smart_ptr&lt;T&gt;::operator=(const smart_ptr&lt;T&gt;&amp;) [with T = shape] &lt;deleted&gt;\n     smart_ptr&amp; operator=(const smart_ptr&amp;) = delete;\n                ^~~~~~~~\ntest.cpp:35:16: note: candidate: smart_ptr&lt;T&gt;&amp; smart_ptr&lt;T&gt;::operator=(smart_ptr&lt;T&gt;) [with T = shape]\n     smart_ptr&amp; operator=(smart_ptr rhs)\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511026,"discussion_content":"æˆ‘æ”¾äº†æˆ‘çš„å¯å·¥ä½œä»£ç åˆ° Godbolt ä¸Šï¼Œä½ å¯ä»¥è·Ÿä½ çš„å¯¹ç…§çœ‹çœ‹ï¼š\n\nhttps://godbolt.org/z/oGofeh","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607347302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264744,"user_name":"æµ©æµ©","can_delete":false,"product_type":"c1","uid":1580841,"ip_address":"","ucode":"47558B9C9B7368","user_header":"https://static001.geekbang.org/account/avatar/00/18/1f/29/c7a69190.jpg","comment_is_top":false,"comment_ctime":1606626006,"is_pvip":false,"replies":[{"id":96255,"content":"æ²¡æœ‰ã€‚å°±æ˜¯ä½ è¯´çš„2äº†ã€‚1æ˜¯ä¸€ç§é”™è¯¯ï¼Œä¸ç®—ä½œèµ„æºæ³„éœ²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1606788611,"ip_address":"","comment_id":264744,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ–‡ç« ç¬¬äºŒå¥ä»‹ç»â€˜æ™ºèƒ½æŒ‡é’ˆèƒ½ä»æ ¹æœ¬ä¸Šè§£å†³èµ„æºæ³„éœ²çš„å¯èƒ½æ€§â€™ã€‚\nä»ä¸Šä¸€ç¯‡æ–‡ç« å¾—çŸ¥è¿™äº›â€˜æ ¹æœ¬å¯èƒ½æ€§â€™æœ‰ä¸¤ä¸ªï¼š1. å¯¹è±¡åˆ‡ç‰‡ï¼›2.å¿˜è®°å†™é‡Šæ”¾deleteä»£ç ã€‚\nä¸çŸ¥é“æˆ‘çš„ç†è§£æ˜¯å¦é—æ¼äº†å…¶ä»–â€˜æ ¹æœ¬å¯èƒ½æ€§â€™ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511026,"discussion_content":"æˆ‘æ”¾äº†æˆ‘çš„å¯å·¥ä½œä»£ç åˆ° Godbolt ä¸Šï¼Œä½ å¯ä»¥è·Ÿä½ çš„å¯¹ç…§çœ‹çœ‹ï¼š\n\nhttps://godbolt.org/z/oGofeh","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607347302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246372,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1599300500,"is_pvip":false,"replies":[{"id":90611,"content":"æ™ºèƒ½æŒ‡é’ˆæœ¬èº«ä¸€èˆ¬ä¹Ÿæ˜¯å­˜å‚¨åœ¨æ ˆä¸Šçš„ã€‚è·Ÿä½ çš„ä¾‹å­ä¸€æ ·ï¼Œåªæœ‰å®ƒæŒ‡å‘çš„å¯¹è±¡åœ¨å †ä¸Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1599437737,"ip_address":"","comment_id":246372,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"å´è€å¸ˆä½ å¥½ï¼Œå°±æ˜¯æŒ‡é’ˆæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ªåœ°å€ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼šï¼Œè¯´æ˜d_tmpæŒ‡å‘çš„æ˜¯å †å†…å­˜ï¼Œå®ƒè‡ªèº«å­˜å‚¨çš„ä½ç½®æ˜¯æ ˆä¸Šã€‚\n    int *d_tmp = new int;\n    std::cout &lt;&lt;  d_tmp &lt;&lt; std::endl; &#47;&#47; è¾“å‡ºï¼š0x10c8050\n    std::cout &lt;&lt; &amp;d_tmp &lt;&lt; std::endl;&#47;&#47; è¾“å‡ºï¼š0x7ffcaac08f10\né—®é¢˜ï¼šé‚£ä¸ºä»€ä¹ˆè¿™ä¸€è®²ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºçš„æŒ‡é’ˆå¯¹è±¡ï¼Œå®ƒè‡ªèº«çš„å­˜å‚¨ä½ç½®å°±ä¸æ˜¯æ ˆä¸Šäº†å‘¢ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505123,"discussion_content":"æ™ºèƒ½æŒ‡é’ˆæœ¬èº«ä¸€èˆ¬ä¹Ÿæ˜¯å­˜å‚¨åœ¨æ ˆä¸Šçš„ã€‚è·Ÿä½ çš„ä¾‹å­ä¸€æ ·ï¼Œåªæœ‰å®ƒæŒ‡å‘çš„å¯¹è±¡åœ¨å †ä¸Šã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599437737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245876,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1599099823,"is_pvip":false,"replies":[{"id":90415,"content":"1. ä½ é‡ä¸Šäº†è¢«ç§°ä¸º the most vexing parse çš„é—®é¢˜ã€‚ç›´æ¥å‚çœ‹ç¬¬ 8 è®²ä¸‹çš„â€œç»Ÿä¸€åˆå§‹åŒ–â€ã€‚\n\n2. Shared( Shared&amp; s){} ä¹Ÿç®—æ‹·è´æ„é€ å‡½æ•°ã€‚æœ‰ä»€ä¹ˆç‰¹åˆ«é—®é¢˜ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1599112909,"ip_address":"","comment_id":245876,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"ä»£ç å¦‚ä¸‹ï¼ˆæœ‰ä¸¤ä¸ªç–‘æƒ‘ï¼‰ï¼š\t\t\nclass Shared{\npublic:\n    int a;\n    Shared(){\n        a = 0;\n        cout &lt;&lt; &quot;constructor is called&quot; &lt;&lt; endl;\n    }\n    Shared(const Shared&amp; s){\n        cout &lt;&lt; &quot;copy constructor is called&quot; &lt;&lt; endl;\n    }\n    Shared(Shared&amp; s){\n        cout &lt;&lt; &quot;copy constructorxx is called&quot; &lt;&lt; endl;\n    }\n\n    ~Shared(){\n        cout &lt;&lt; &quot;dtr is called&quot; &lt;&lt; endl;\n    }\n\n\n\n};\n\n&#47;&#47;test shared ptr\n\nint main(){\n       \n&#47;&#47;ç–‘æƒ‘1ï¼š\n        Shared s3(Shared());&#47;&#47;è€å¸ˆï¼Œè¿™ä¸ªä¸æ˜¯è°ƒç”¨copy constructorå˜›ï¼Œä¸ºä»€ä¹ˆè¢«g++è¯†åˆ«ä¸ºè¿™ç§å½¢å¼å³s3ä¸ºä¸€ä¸ªå‡½æ•°å®šä¹‰ï¼šShare s3(Sharedï¼ˆ*ï¼‰ï¼ˆSharedï¼‰) ?\n        int s5(int());&#47;&#47;è¿™ä¸ªæ˜¯ä»¿ç…§ä¸Šé¢è¿™ä¸ªå†™çš„ï¼Œç»“æœs5è¿˜æ˜¯è¢«è¯†åˆ«ä¸ºå‡½æ•°ã€‚\n\n\n\n    static semaphore sem;\n    signal(SIGINT, [](int) { sem.post(); });&#47;&#47; è®¾ç½®é€€å‡ºä¿¡å·\n    sem.wait();\n\n    return 0;\n\n}\n&#47;&#47;ç–‘æƒ‘2ï¼š\n&#47;&#47;å¦å¤–ï¼šcppreferenceä¸Šè¯´çš„copy constructorçš„å½¢å¼ä¸º\tShared(const Shared&amp; s){}ï¼Œé‚£Shared( Shared&amp; s){} ä¹Ÿç®—copy constructorå“¦ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505123,"discussion_content":"æ™ºèƒ½æŒ‡é’ˆæœ¬èº«ä¸€èˆ¬ä¹Ÿæ˜¯å­˜å‚¨åœ¨æ ˆä¸Šçš„ã€‚è·Ÿä½ çš„ä¾‹å­ä¸€æ ·ï¼Œåªæœ‰å®ƒæŒ‡å‘çš„å¯¹è±¡åœ¨å †ä¸Šã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599437737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245287,"user_name":"wjh_all_in","can_delete":false,"product_type":"c1","uid":1501209,"ip_address":"","ucode":"0480A53AD46C97","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIC2Ww3swYiaMalnpA1f87xgzV8Hs1Y27M2CbNQqgR27Il72hibXn5FvhU7mbr3XKsxYDZdjY4GMDbg/132","comment_is_top":false,"comment_ctime":1598884511,"is_pvip":false,"replies":[{"id":90239,"content":"æ–‡ä¸­è¿™å¥è¯è¯•å›¾è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼š\n\nâ€œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ã€æ¨¡æ¿å½¢å¼ã€‘ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚å¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†ï¼ˆè§â€œæ‹·è´æ„é€ å’Œèµ‹å€¼â€ä¸€èŠ‚ï¼‰ã€‚ä¸è¿‡ï¼Œæ›´é€šç”¨çš„æ–¹å¼ä»ç„¶æ˜¯åŒæ—¶å®šä¹‰æ ‡å‡†çš„æ‹·è´ &#47; ç§»åŠ¨æ„é€ å‡½æ•°å’Œæ‰€éœ€çš„æ¨¡æ¿æ„é€ å‡½æ•°ã€‚ä¸‹é¢çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆé‡Œæˆ‘ä»¬å°±éœ€è¦è¿™ä¹ˆåšã€‚â€\n\nç¼–è¯‘å™¨è®¤ä¸ºå¤Ÿæ ¼ç§°å¾—ä¸Šæ‹·è´æ„é€ å‡½æ•°ã€ç§»åŠ¨æ„é€ å‡½æ•°çš„ï¼Œéƒ½æ˜¯éæ¨¡æ¿å½¢å¼ã€‚ç„¶ååˆæœ‰ä¸€äº›è§„åˆ™å†³å®šäº†æ˜¯å¦ç”Ÿæˆé»˜è®¤çš„æ‹·è´æ„é€ å’Œç§»åŠ¨æ„é€ å‡½æ•°ã€‚å¦‚æœä¸¤è€…éƒ½ä¸ç”Ÿæˆï¼Œé‚£æˆ‘æä¾›æ¨¡æ¿å°±å¤Ÿäº†ã€‚ä½† C++ çš„è§„åˆ™æ˜¯ï¼Œæ‹·è´æ„é€ ä¸€èˆ¬æ€»ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œé™¤éæœ‰ç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•°æˆ–è€…ç”Ÿæˆè‡ªåŠ¨çš„æ‹·è´æ„é€ å‡½æ•°å¤±è´¥ï¼›è€Œç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œä¼šè®©ç¼–è¯‘å™¨**ä¸ä¼š**è‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ„é€ å‡½æ•°â€¦â€¦\n\næ˜¯æœ‰ç‚¹ç»•ï¼Œæ‰€ä»¥è¿™ä¸€è®²æˆ‘æ²¡æœ‰ä»”ç»†è§£é‡Šã€‚ç¬¬ 9 è®²ä¼šç¨å¾®å±•å¼€ä¸€äº›ï¼Œä½†å®Œæ•´çš„è§„åˆ™è¿˜æ˜¯è¦åˆ° cppreference.com ä¸Šå»æŸ¥çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1598932365,"ip_address":"","comment_id":245287,"utype":1}],"discussion_count":3,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œsmart_ptr\nç§»åŠ¨æ‹·è´æ„é€ å‡½æ•°æ²¡æœ‰ç‰¹ä¾‹åŒ–å®šä¹‰ï¼š\ntemplate &lt;typename U&gt;  \nsmart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\nä½†æ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼Œéœ€è¦æ˜¾å¼çš„å®šä¹‰ï¼š\nsmart_ptr(const smart_ptr&amp; other)\ntemplate &lt;typename U&gt;  \nsmart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept\n\nä¸Šé¢è¿™ä¸ªåŒºåˆ«ï¼Œæ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505000,"discussion_content":"1. ä½ é‡ä¸Šäº†è¢«ç§°ä¸º the most vexing parse çš„é—®é¢˜ã€‚ç›´æ¥å‚çœ‹ç¬¬ 8 è®²ä¸‹çš„â€œç»Ÿä¸€åˆå§‹åŒ–â€ã€‚\n\n2. Shared( Shared&amp;amp; s){} ä¹Ÿç®—æ‹·è´æ„é€ å‡½æ•°ã€‚æœ‰ä»€ä¹ˆç‰¹åˆ«é—®é¢˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599112909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243207,"user_name":"ç¾¤","can_delete":false,"product_type":"c1","uid":1843313,"ip_address":"","ucode":"F8A363F19DAB9B","user_header":"https://static001.geekbang.org/account/avatar/00/1c/20/71/ad3465c0.jpg","comment_is_top":false,"comment_ctime":1597993325,"is_pvip":false,"replies":[{"id":89664,"content":"æ˜¯æœ€åæ”¾GitHubç‰ˆæœ¬çš„ä»£ç è¿˜æ˜¯ä»€ä¹ˆç‰ˆæœ¬çš„ï¼Ÿä»€ä¹ˆå¹³å°ä¸‹çš„ä»€ä¹ˆç¼–è¯‘å™¨ï¼Ÿæœ€ç»ˆç‰ˆéƒ½åº”è¯¥æ˜¯æ­£å¸¸è¿è¡Œä¸å‡ºé”™çš„ã€‚æˆ‘åœ¨ä¸‰ä¸ªå¹³å°çš„ä¸‰ç§ç¼–è¯‘å™¨ä¸Šæµ‹è¿‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1598007208,"ip_address":"","comment_id":243207,"utype":1}],"discussion_count":2,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"è€å¸ˆ,åœ¨æ™ºèƒ½æŒ‡é’ˆæµ‹è¯•ä»£ç æ—¶,å…¶ä¸­ç¬¬19è¡Œ, \nptr2 = ptr1; &#47;&#47; è¿™ä¸€å¥ ä¼šæŠ¥é”™ Segmentation fault,å…¶ä»–çš„æµ‹è¯•éƒ½å¯é€šè¿‡,å‡å¯ä»¥è¾“å‡ºå…¶ use_count()å€¼.\næä¸æ¸…ä»€ä¹ˆåŸå› ,ptr1æŒ‡å‘çš„æ˜¯smart_ptr&lt;circle&gt; , è€Œ ptr2æŒ‡å‘çš„æ˜¯smart_ptr&lt;shape&gt;,è¿™é‡Œ,ptr1å¯ä»¥ç›´æ¥èµ‹ç»™ptr2å—??","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504832,"discussion_content":"æ–‡ä¸­è¿™å¥è¯è¯•å›¾è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼š\n\nâ€œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ã€æ¨¡æ¿å½¢å¼ã€‘ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚å¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†ï¼ˆè§â€œæ‹·è´æ„é€ å’Œèµ‹å€¼â€ä¸€èŠ‚ï¼‰ã€‚ä¸è¿‡ï¼Œæ›´é€šç”¨çš„æ–¹å¼ä»ç„¶æ˜¯åŒæ—¶å®šä¹‰æ ‡å‡†çš„æ‹·è´ / ç§»åŠ¨æ„é€ å‡½æ•°å’Œæ‰€éœ€çš„æ¨¡æ¿æ„é€ å‡½æ•°ã€‚ä¸‹é¢çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆé‡Œæˆ‘ä»¬å°±éœ€è¦è¿™ä¹ˆåšã€‚â€\n\nç¼–è¯‘å™¨è®¤ä¸ºå¤Ÿæ ¼ç§°å¾—ä¸Šæ‹·è´æ„é€ å‡½æ•°ã€ç§»åŠ¨æ„é€ å‡½æ•°çš„ï¼Œéƒ½æ˜¯éæ¨¡æ¿å½¢å¼ã€‚ç„¶ååˆæœ‰ä¸€äº›è§„åˆ™å†³å®šäº†æ˜¯å¦ç”Ÿæˆé»˜è®¤çš„æ‹·è´æ„é€ å’Œç§»åŠ¨æ„é€ å‡½æ•°ã€‚å¦‚æœä¸¤è€…éƒ½ä¸ç”Ÿæˆï¼Œé‚£æˆ‘æä¾›æ¨¡æ¿å°±å¤Ÿäº†ã€‚ä½† C++ çš„è§„åˆ™æ˜¯ï¼Œæ‹·è´æ„é€ ä¸€èˆ¬æ€»ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œé™¤éæœ‰ç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•°æˆ–è€…ç”Ÿæˆè‡ªåŠ¨çš„æ‹·è´æ„é€ å‡½æ•°å¤±è´¥ï¼›è€Œç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œä¼šè®©ç¼–è¯‘å™¨**ä¸ä¼š**è‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ„é€ å‡½æ•°â€¦â€¦\n\næ˜¯æœ‰ç‚¹ç»•ï¼Œæ‰€ä»¥è¿™ä¸€è®²æˆ‘æ²¡æœ‰ä»”ç»†è§£é‡Šã€‚ç¬¬ 9 è®²ä¼šç¨å¾®å±•å¼€ä¸€äº›ï¼Œä½†å®Œæ•´çš„è§„åˆ™è¿˜æ˜¯è¦åˆ° cppreference.com ä¸Šå»æŸ¥çœ‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598932365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501209,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIC2Ww3swYiaMalnpA1f87xgzV8Hs1Y27M2CbNQqgR27Il72hibXn5FvhU7mbr3XKsxYDZdjY4GMDbg/132","nickname":"wjh_all_in","note":"","ucode":"0480A53AD46C97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302704,"discussion_content":"æ˜¯æœ‰ç‚¹ç»•ï¼Œæˆ‘è‡ªå·±ä¹Ÿä»£ç å®éªŒäº†ï¼Œç§»åŠ¨è¯­æ„çš„åœºæ™¯ï¼Œä¼šæŒ‰ç…§æ¨¡æ¿å®šä¹‰ç”Ÿæˆä»£ç \nä½†æ˜¯æ‹·è´æ„é€ åœºæ™¯ï¼Œä¸æ”¯æŒæŒ‰ç…§æ¨¡æ¿ç”Ÿæˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599012536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1501209,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIC2Ww3swYiaMalnpA1f87xgzV8Hs1Y27M2CbNQqgR27Il72hibXn5FvhU7mbr3XKsxYDZdjY4GMDbg/132","nickname":"wjh_all_in","note":"","ucode":"0480A53AD46C97","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303012,"discussion_content":"æ‹·è´æ„é€ åœºæ™¯ï¼Œç¼–è¯‘å™¨è®¤ä¸ºæ¨¡æ¿ä¸æ˜¯æ‹·è´æ„é€ å‡½æ•°ã€‚å¦‚æœæˆ‘ä¸æä¾›çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªï¼ˆé”™è¯¯çš„ï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599113499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302704,"ip_address":"","group_id":0},"score":303012,"extra":""}]}]},{"had_liked":false,"id":225571,"user_name":"å½­è¶Š","can_delete":false,"product_type":"c1","uid":1052602,"ip_address":"","ucode":"38155338D292A5","user_header":"https://static001.geekbang.org/account/avatar/00/10/0f/ba/a2531cf0.jpg","comment_is_top":false,"comment_ctime":1591791624,"is_pvip":false,"replies":[{"id":83136,"content":"è·ŸC++98è¿™æ–¹é¢æ²¡åŒºåˆ«ï¼Œæˆ‘è¿™ä¸ªå®ç°é‡Œshared_count_ä¸€ç›´å¯èƒ½æœ‰é‡æŒ‡é’ˆçš„ï¼ˆä¸æ­¢è¿™ä¸€å¤„æœ‰è¿™ç§æƒ…å†µï¼‰ã€‚ä¸è¿‡ï¼Œæˆ‘ä»æ¥ä¸ç›´æ¥ç”¨shared_count_ï¼Œæ°¸è¿œæ˜¯å…ˆçœ‹ptr_çš„å€¼å†æ“ä½œï¼Œæ‰€ä»¥åº”è¯¥æ²¡æœ‰é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1591834887,"ip_address":"","comment_id":225571,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"template &lt;typename U&gt;\n smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept  {    \n     ptr_ = other.ptr_;   \n     if (ptr_) {\n           shared_count_ =        other.shared_count_;\n           other.ptr_ = nullptr;   \n      }  \n}\n\nè€å¸ˆæˆ‘å¯¹C++11ä»¥åçš„ç‰¹æ€§ä¸æ˜¯éå¸¸ç†Ÿæ‚‰ï¼Œè¿™ä¸ªç§»åŠ¨æ„é€ å‡½æ•°çš„other.shared_countä¸ç”¨ä¹Ÿè®¾ç½®ä¸ºnullptrå—ï¼Ÿä¼šä¸ä¼šæˆä¸ºé‡æŒ‡é’ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497901,"discussion_content":"è·ŸC++98è¿™æ–¹é¢æ²¡åŒºåˆ«ï¼Œæˆ‘è¿™ä¸ªå®ç°é‡Œshared_count_ä¸€ç›´å¯èƒ½æœ‰é‡æŒ‡é’ˆçš„ï¼ˆä¸æ­¢è¿™ä¸€å¤„æœ‰è¿™ç§æƒ…å†µï¼‰ã€‚ä¸è¿‡ï¼Œæˆ‘ä»æ¥ä¸ç›´æ¥ç”¨shared_count_ï¼Œæ°¸è¿œæ˜¯å…ˆçœ‹ptr_çš„å€¼å†æ“ä½œï¼Œæ‰€ä»¥åº”è¯¥æ²¡æœ‰é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591834887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224594,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1591455106,"is_pvip":false,"replies":[{"id":82729,"content":"å¯¹æ²¡æœ‰è°ƒç”¨æ‹·è´æ„é€ å’Œæ‹·è´èµ‹å€¼çš„ç†è§£æ­£ç¡®ã€‚\n\nä½†æ˜¯ï¼Œç›®å‰çš„æ‹·è´èµ‹å€¼å®ç°æ˜¯ä¸å¯¹çš„ã€‚åŠ ä¸Šå¼•ç”¨ä¹‹åï¼Œç°åœ¨ä½ æ‰§è¡Œ a = b æ—¶ï¼Œå®é™…ä¸Šæ˜¯äº¤æ¢äº† a å’Œ b çš„å†…å®¹ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯ a = b è¯¥åšçš„äº‹æƒ…ã€‚åŸå…ˆçš„ä½¿ç”¨å€¼è€Œä¸æ˜¯å¼•ç”¨çš„å®ç°æ˜¯å¯¹çš„ã€‚å¦‚æœä½ æƒ³æ”¹ç”¨å¼•ç”¨ï¼Œå°±ä¸åº”è¯¥ç»§ç»­ä½¿ç”¨äº¤æ¢è¿™ç§æ–¹å¼äº†ï¼š\n\n    A&amp; operator=(const A&amp; other)\n    {\n        if (this != &amp;other) {\n            s1 = other.s1;\n            n = other.n;\n        }\n        return *this;\n    }\n\næ³¨æ„ä¸¤è¡Œçš„èµ‹å€¼é¡ºåºå¦‚æœäº¤æ¢ä¸€ä¸‹çš„è¯ï¼Œå¼‚å¸¸å®‰å…¨æ€§å°±ä¸èƒ½å¾—åˆ°ä¿è¯äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1591539148,"ip_address":"","comment_id":224594,"utype":1}],"discussion_count":1,"race_medal":0,"score":12,"product_id":100040501,"comment_content":"#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nclass A {\npublic:\n    int n;\n    std::string s1;\n\n    &#47;&#47;åœ¨åŠ äº†copy constructoræ—¶ï¼Œå¿…é¡»æ˜¾å¼åŠ å…¥constructor,ç¼–è¯‘å™¨ä¸ä¼šå†éšå¼æä¾›constructor\n    A() {}\n\n    &#47;&#47;copy constructor\n    A(const A &amp;a) {\n        std::cout &lt;&lt; &quot;copy constructor of A\\n&quot;;\n    }\n\n    &#47;&#47; user-defined copy assignment, copy-and-swap form\n    A &amp;operator=(A&amp; other) {\n        std::cout &lt;&lt; &quot;copy assignment of A\\n&quot;;\n        std::swap(n, other.n);\n        std::swap(s1, other.s1);\n        return *this;\n    }\n};\nint main() {\n\n    A  a2;\n\n    A &amp;a1 = a2;&#47;&#47;a1æ˜¯å¼•ç”¨ï¼Œa2æ˜¯å€¼ï¼Œæ‰€ä»¥ä¸ä¼šè°ƒç”¨copy assignmentï¼Œä¹Ÿä¸ä¼šè°ƒç”¨ copy constructor\n    A &amp;a3 = a1;&#47;&#47;a1åœ¨è¿™é‡Œä¸æ˜¯å¼•ç”¨ï¼Œè€Œa3æ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šè°ƒç”¨copy assignmentï¼Œä¹Ÿä¸ä¼šè°ƒç”¨ copy constructor\n}\nè€å¸ˆï¼Œè¿™æ ·ç†è§£ï¼ˆä»£ç åçš„å…³äºæ²¡æœ‰è°ƒç”¨copy assginment,copy constructorçš„ç†è§£ï¼‰å¯¹ä¸ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497535,"discussion_content":"å¯¹æ²¡æœ‰è°ƒç”¨æ‹·è´æ„é€ å’Œæ‹·è´èµ‹å€¼çš„ç†è§£æ­£ç¡®ã€‚\n\nä½†æ˜¯ï¼Œç›®å‰çš„æ‹·è´èµ‹å€¼å®ç°æ˜¯ä¸å¯¹çš„ã€‚åŠ ä¸Šå¼•ç”¨ä¹‹åï¼Œç°åœ¨ä½ æ‰§è¡Œ a = b æ—¶ï¼Œå®é™…ä¸Šæ˜¯äº¤æ¢äº† a å’Œ b çš„å†…å®¹ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯ a = b è¯¥åšçš„äº‹æƒ…ã€‚åŸå…ˆçš„ä½¿ç”¨å€¼è€Œä¸æ˜¯å¼•ç”¨çš„å®ç°æ˜¯å¯¹çš„ã€‚å¦‚æœä½ æƒ³æ”¹ç”¨å¼•ç”¨ï¼Œå°±ä¸åº”è¯¥ç»§ç»­ä½¿ç”¨äº¤æ¢è¿™ç§æ–¹å¼äº†ï¼š\n\n    A&amp;amp; operator=(const A&amp;amp; other)\n    {\n        if (this != &amp;amp;other) {\n            s1 = other.s1;\n            n = other.n;\n        }\n        return *this;\n    }\n\næ³¨æ„ä¸¤è¡Œçš„èµ‹å€¼é¡ºåºå¦‚æœäº¤æ¢ä¸€ä¸‹çš„è¯ï¼Œå¼‚å¸¸å®‰å…¨æ€§å°±ä¸èƒ½å¾—åˆ°ä¿è¯äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591539148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223018,"user_name":"åƒé±¼","can_delete":false,"product_type":"c1","uid":2005742,"ip_address":"","ucode":"CB7AC741E0E4B7","user_header":"https://static001.geekbang.org/account/avatar/00/1e/9a/ee/f996f864.jpg","comment_is_top":false,"comment_ctime":1590982342,"is_pvip":false,"replies":[{"id":82205,"content":"åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„æ‰€æœ‰æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œè¿™ä¸ªè®¡æ•°ä¹Ÿæ˜¯å…±äº«çš„ã€‚æ‰€ä»¥ä¸ä¼šæœ‰é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1590990879,"ip_address":"","comment_id":223018,"utype":1}],"discussion_count":2,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"è·Ÿç€è€å¸ˆæ€è·¯èµ°æ„Ÿè§‰æ”¶è·å¾ˆå¤šï¼Œç‰¹åˆ«å­¦åˆ°äº†å¾ˆæ­£è§„çš„ç¼–ç æ–¹å¼ã€‚\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼Œæˆ‘ä»¬åœ¨å¢åŠ å¼•ç”¨è®¡æ•°æ—¶åªæ˜¯è·Ÿä½œä¸ºæ‹·è´æ„é€ å‡½æ•°å‚æ•°çš„æ™ºèƒ½æŒ‡é’ˆåŒæ—¶å¢åŠ ï¼Œå¦‚æœåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ„é€ ä¸€ä¸ªæºå¤´æ™ºèƒ½æŒ‡é’ˆï¼Œç„¶åé€šè¿‡è¿™ä¸ªæºå¤´æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºä¸€ä¸ªç¬¬äºŒä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œè¿™æ ·ä½¿ç”¨æ²¡æœ‰é—®é¢˜ï¼Œé‚£å¦‚æœå†é€šè¿‡æºå¤´æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºæ›´å¤šçš„æ™ºèƒ½æŒ‡é’ˆï¼Œæºå¤´æ™ºèƒ½æŒ‡é’ˆå’Œæœ€æ–°åˆ›å»ºçš„æ™ºèƒ½æŒ‡é’ˆå¼•ç”¨è®¡æ•°å›ºç„¶å¢åŠ ï¼Œå¯æ˜¯å·²åˆ›å»ºçš„æ™ºèƒ½æŒ‡é’ˆå¹¶æ²¡æœ‰å‚ä¸åˆ°ä¹‹åæ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»ºï¼Œé‚£ä¹ˆå…¶å¼•ç”¨è®¡æ•°å°±ä¸ä¼šå¢åŠ ï¼Ÿæˆ–è€…ä½¿ç”¨è€…ç›´æ¥ä¸ä½¿ç”¨æºå¤´æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºä¹‹åçš„æ™ºèƒ½æŒ‡é’ˆï¼Œé‚£ä¹ˆå¯¹åº”åŒä¸€å—å†…å­˜åŒºåŸŸçš„å„ä¸ªæ™ºèƒ½æŒ‡é’ˆçš„å¼•ç”¨è®¡æ•°å°±ä¸ç»Ÿä¸€ï¼Œè¿™æ ·çš„æƒ…å†µæ˜¯å¦ä¼šå‡ºé—®é¢˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":220195,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1590202251,"is_pvip":false,"replies":[{"id":81351,"content":"smart_ptr&lt;shape&gt; &amp;ptr2{ptr1};&#47;&#47;è¿™æ˜¯è°ƒç”¨äº†å·²è¢«åˆ é™¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼Ÿä¸ºå•¥èƒ½ç¼–è¯‘é€šè¿‡ï¼Ÿ\n\nä½ æ˜¯æŠŠ ptr1 çš„å¼•ç”¨èµ‹ç»™äº† ptr2ï¼ˆä¸æ˜¯å¯¹è±¡ï¼Œæ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼‰ã€‚æ²¡é—®é¢˜å•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1590247066,"ip_address":"","comment_id":220195,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å…ˆä¸Šä¸€æ®µä»£ç ï¼š\nint main(){\n smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\n    smart_ptr&lt;shape&gt; &amp;ptr2{ptr1};&#47;&#47;è¿™æ˜¯è°ƒç”¨äº†å·²è¢«åˆ é™¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼Ÿä¸ºå•¥èƒ½ç¼–è¯‘é€šè¿‡ï¼Ÿ\n\n    smart_ptr&lt;shape&gt; ptr3 = ptr1;&#47;&#47;è¿™ä¸ªæ˜¯å°è¯•è°ƒç”¨äº†å·²è¢«åˆ é™¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼ŒæŠ¥é”™ã€‚\n    ptr3 = smart_ptr&lt;shape&gt;(create_shape(shape_type::circle));\n    ptr3 = std::move(ptr1);                  &#47;&#47; OKï¼Œå¯ä»¥\n    smart_ptr&lt;shape&gt; ptr4{std::move(ptr3)};  &#47;&#47; OKï¼Œå¯ä»¥\n}\nè€å¸ˆï¼Œä¸ºå•¥  smart_ptr&lt;shape&gt; &amp;ptr2{ptr1} èƒ½ç¼–è¯‘é€šè¿‡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496079,"discussion_content":"smart_ptr&amp;lt;shape&amp;gt; &amp;amp;ptr2{ptr1};//è¿™æ˜¯è°ƒç”¨äº†å·²è¢«åˆ é™¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼Ÿä¸ºå•¥èƒ½ç¼–è¯‘é€šè¿‡ï¼Ÿ\n\nä½ æ˜¯æŠŠ ptr1 çš„å¼•ç”¨èµ‹ç»™äº† ptr2ï¼ˆä¸æ˜¯å¯¹è±¡ï¼Œæ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼‰ã€‚æ²¡é—®é¢˜å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590247066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219964,"user_name":"Geek_24c4df","can_delete":false,"product_type":"c1","uid":2010573,"ip_address":"","ucode":"BD66D0854804A7","user_header":"","comment_is_top":false,"comment_ctime":1590126832,"is_pvip":false,"replies":[{"id":81302,"content":"å†ä»”ç»†çœ‹çœ‹ã€‚ç°åœ¨æ˜¯ smart_ptr&lt;T&gt; è¦è®¿é—®å¦ä¸€ä¸ª smart_ptr&lt;U&gt; çš„æˆå‘˜ï¼Œè·Ÿ shared_count æœ‰å•¥å…³ç³»ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1590214708,"ip_address":"","comment_id":219964,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"template &lt;typename U&gt;  \nfriend class smart_ptr;\n\nä¸ºä»€ä¹ˆä¸æ˜¯åœ¨shared_countç±»ä¸­æŠŠ smart_ptrå®šä¹‰ä¸ºå‹å…ƒç±»å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496079,"discussion_content":"smart_ptr&amp;lt;shape&amp;gt; &amp;amp;ptr2{ptr1};//è¿™æ˜¯è°ƒç”¨äº†å·²è¢«åˆ é™¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼Ÿä¸ºå•¥èƒ½ç¼–è¯‘é€šè¿‡ï¼Ÿ\n\nä½ æ˜¯æŠŠ ptr1 çš„å¼•ç”¨èµ‹ç»™äº† ptr2ï¼ˆä¸æ˜¯å¯¹è±¡ï¼Œæ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼‰ã€‚æ²¡é—®é¢˜å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590247066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219221,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1589968489,"is_pvip":false,"replies":[{"id":81005,"content":"æ²¡çœ‹æ‡‚ä½ çš„æ„æ€ã€‚è¯·ç»™å‡ºæ›´æ˜ç¡®çš„ä»£ç ã€‚\n\næŒ‰ç…§ C++ æ ‡å‡†ï¼Œåªæœ‰ç¬¦åˆä¸‹é¢çš„æ¡ä»¶çš„æˆå‘˜å‡½æ•°æ‰è¢«è®¤ä¸ºæ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ï¼š\n\nç±» T çš„ç§»åŠ¨æ„é€ å‡½æ•°æ˜¯éæ¨¡æ¿æ„é€ å‡½æ•°ï¼Œå…¶é¦–ä¸ªå½¢å‚æ˜¯ T&amp;&amp;ã€const T&amp;&amp;ã€volatile T&amp;&amp; æˆ– const volatile T&amp;&amp;ï¼Œä¸”æ— å…¶ä»–å½¢å‚ï¼Œæˆ–å‰©ä½™å½¢å‚å‡æœ‰é»˜è®¤å€¼ã€‚\n\nè§ https:&#47;&#47;zh.cppreference.com&#47;w&#47;cpp&#47;language&#47;move_constructor\n\næˆ‘ç»™å‡ºçš„æ˜¯ä¸ªæ¨¡æ¿æ„é€ å‡½æ•° template &lt;typename U&gt; smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589989832,"ip_address":"","comment_id":219221,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"â€œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºâ€ï¼Œè¿™å¥è¯æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Ÿ\næˆ‘æµ‹è¯•äº†ä¸‹ï¼šåœ¨åŸæ¥çš„ç§»åŠ¨æ„é€ å‡½æ•°åŠ äº†&lt;T&gt;,å…¶ä»–ä»€ä¹ˆä¹Ÿæ²¡æ”¹ï¼Œsmart_ptr&lt;shape&gt; ptr2{ptr1}æŠ¥çš„é”™ä¸ºï¼šä¸èƒ½è°ƒç”¨å·²åˆ é™¤çš„æ‹·è´å‡½æ•°(call to impilicitly-deleted construtor of &quot;smart_ptr&lt;shape&gt;&quot;)ï¼Œæ˜¯ä¸æ˜¯è¯´æ˜è§¦å‘äº†åˆ é™¤æ‹·è´æ„é€ å‡½æ•°ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495724,"discussion_content":"æ²¡çœ‹æ‡‚ä½ çš„æ„æ€ã€‚è¯·ç»™å‡ºæ›´æ˜ç¡®çš„ä»£ç ã€‚\n\næŒ‰ç…§ C++ æ ‡å‡†ï¼Œåªæœ‰ç¬¦åˆä¸‹é¢çš„æ¡ä»¶çš„æˆå‘˜å‡½æ•°æ‰è¢«è®¤ä¸ºæ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ï¼š\n\nç±» T çš„ç§»åŠ¨æ„é€ å‡½æ•°æ˜¯éæ¨¡æ¿æ„é€ å‡½æ•°ï¼Œå…¶é¦–ä¸ªå½¢å‚æ˜¯ T&amp;amp;&amp;amp;ã€const T&amp;amp;&amp;amp;ã€volatile T&amp;amp;&amp;amp; æˆ– const volatile T&amp;amp;&amp;amp;ï¼Œä¸”æ— å…¶ä»–å½¢å‚ï¼Œæˆ–å‰©ä½™å½¢å‚å‡æœ‰é»˜è®¤å€¼ã€‚\n\nè§ https://zh.cppreference.com/w/cpp/language/move_constructor\n\næˆ‘ç»™å‡ºçš„æ˜¯ä¸ªæ¨¡æ¿æ„é€ å‡½æ•° template &amp;lt;typename U&amp;gt; smart_ptr(smart_ptr&amp;lt;U&amp;gt;&amp;amp;&amp;amp; other)ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589989832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218193,"user_name":"The Answer........","can_delete":false,"product_type":"c1","uid":2003313,"ip_address":"","ucode":"896638729520A6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/dQQR8nfd3k8zO9Z7TjOxSneFmiarGct9o6JORPrzMyyic8ZnPB97SuvYp544UKCQ24dj2LOvsbUQE3zb1uAGWG7Q/132","comment_is_top":false,"comment_ctime":1589734136,"is_pvip":false,"replies":[{"id":80757,"content":"æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„è¯ï¼Œç¼–è¯‘ç›´æ¥å°±åœ¨æŒ‡é’ˆèµ‹å€¼é‚£è¡Œä¸Šå¤±è´¥äº†ã€‚ç¼–è¯‘å™¨ä¼šå¸®ä½ æ£€æŸ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589802073,"ip_address":"","comment_id":218193,"utype":1}],"discussion_count":2,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å´è€å¸ˆ, å…³äºæ™ºèƒ½æŒ‡é’ˆè¿™é‡Œå®ç°çš„éšå¼è½¬æ¢æˆ‘æœ‰ä¸ªåœ°æ–¹ä¸è§£.\ntemplate &lt;typename U&gt;  \nsmart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept;\næˆ‘ä»¬ä¸éœ€è¦åˆ¤æ–­ä¸€ä¸‹smart_ptr&lt;U&gt;&amp;&amp; otherçš„ç±»å‹å—. æ™ºèƒ½æŒ‡é’ˆotheråº”è¯¥æ˜¯å¾—æ»¡è¶³å­ç±»å’ŒåŸºç±»çš„å…³ç³»æ‰èƒ½è½¬æ¢æˆåŠŸå§. ä¸¤ä¸ªå®Œå…¨æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„ç±»çš„æ™ºèƒ½æŒ‡é’ˆä¹Ÿå¯ä»¥è½¬æ¢å—","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495377,"discussion_content":"æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„è¯ï¼Œç¼–è¯‘ç›´æ¥å°±åœ¨æŒ‡é’ˆèµ‹å€¼é‚£è¡Œä¸Šå¤±è´¥äº†ã€‚ç¼–è¯‘å™¨ä¼šå¸®ä½ æ£€æŸ¥çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589802073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2003313,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/dQQR8nfd3k8zO9Z7TjOxSneFmiarGct9o6JORPrzMyyic8ZnPB97SuvYp544UKCQ24dj2LOvsbUQE3zb1uAGWG7Q/132","nickname":"The Answer........","note":"","ucode":"896638729520A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268420,"discussion_content":"è‡ªå·±åº”è¯¥æ‰¾åˆ°ç­”æ¡ˆäº†ï¼Œå‚æ•°ä¼ é€’è¿›æ¥ä¸ç”¨ç®¡ç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬æœ€ç»ˆè¿˜æ˜¯raw pointerçš„éšå¼è½¬æ¢çš„ï¼Œraw pointerçš„éšå¼è½¬æ¢ä¼šæœ‰ç¼–è¯‘å™¨è‡ªåŠ¨åˆ¤æ–­ï¼Œæ‰€ä»¥èƒ½è½¬æ¢ä¼šæˆåŠŸï¼Œä¸èƒ½å°±ä¼šæŠ¥é”™ï¼Œå¥½åƒæ˜¯è¿™æ ·.","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589772379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215816,"user_name":"ä¸åŠ¨å£°è‰²æ»¡å¿ƒæ¾æ¹ƒ","can_delete":false,"product_type":"c1","uid":1621658,"ip_address":"","ucode":"80D8F9E49AF7C2","user_header":"https://static001.geekbang.org/account/avatar/00/18/be/9a/b0b89be3.jpg","comment_is_top":false,"comment_ctime":1589109404,"is_pvip":false,"replies":[{"id":80079,"content":"è°¢è°¢ã€‚ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589257159,"ip_address":"","comment_id":215816,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å¾ˆèµ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494569,"discussion_content":"è°¢è°¢ã€‚ğŸ˜‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589257159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215261,"user_name":"æ²³å±±","can_delete":false,"product_type":"c1","uid":1128970,"ip_address":"","ucode":"244F0F35FF4112","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/0a/91f0d27a.jpg","comment_is_top":false,"comment_ctime":1588943159,"is_pvip":false,"replies":[{"id":79746,"content":"ã€Œç”±äºçœŸæ­£å¤šçº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ°æˆ‘ä»¬ç›®å‰è¿˜æ²¡å­¦åˆ°çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ç›®å‰å…ˆå®ç°ä¸€ä¸ªç®€å•åŒ–çš„ç‰ˆæœ¬ã€ï¼šåŸå­æ“ä½œçš„ç‰ˆæœ¬è§ç¬¬ 20 è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589003614,"ip_address":"","comment_id":215261,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å¥½åƒæ²¡åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Ÿè¦åŠ åŸå­æ“ä½œå§","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494375,"discussion_content":"ã€Œç”±äºçœŸæ­£å¤šçº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ°æˆ‘ä»¬ç›®å‰è¿˜æ²¡å­¦åˆ°çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ç›®å‰å…ˆå®ç°ä¸€ä¸ªç®€å•åŒ–çš„ç‰ˆæœ¬ã€ï¼šåŸå­æ“ä½œçš„ç‰ˆæœ¬è§ç¬¬ 20 è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589003614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207133,"user_name":"dietcoke","can_delete":false,"product_type":"c1","uid":1217826,"ip_address":"","ucode":"6522B3E23F59DD","user_header":"","comment_is_top":false,"comment_ctime":1587012404,"is_pvip":false,"replies":[{"id":77590,"content":"å®é™…ä¸Šä»å½¢å¼ä¸Šè®²ï¼Œ2ã€3 å°±å¤Ÿäº†ï¼Œä½†ç”±äº 2 ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œæ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ï¼Œé‚£å°±ä¼šå‡ºé—®é¢˜äº†ã€‚è€Œæœ‰äº† 1 ä¹‹åï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆç¼ºçœçš„ç§»åŠ¨æ„é€ å‡½æ•°äº†ï¼Œæ‰€ä»¥ä½ è¯´çš„å°±ä¸å¿…æä¾›äº†ï¼Œé‡è½½è§£æèƒ½ç”¨ 3 æ¥ä»£æ›¿ã€‚\n\nè¿›ä¸€æ­¥äº†è§£å¯ä»¥çœ‹ç¬¬ 9 è®²ï¼Œå’Œé‡Œé¢çš„å‚è€ƒèµ„æ–™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1587217828,"ip_address":"","comment_id":207133,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹æœ€ç»ˆç‰ˆæœ¬çš„ä»£ç æœ‰è¿™ä¸‰ä¸ªå‡½æ•°ï¼š\n1. smart_ptr(const smart_ptr&amp; other)\n2. template&lt;typename U&gt;\n    smart_ptr(const smart_ptr&lt;U&gt;&amp; other)\n3. template&lt;typename U&gt;\n    smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)\né‚£ä¹ˆä¸ºä»€ä¹ˆæ²¡æœ‰è¿™ä¸ªå‡½æ•°å‘¢ smart_ptr(smart_ptr&amp;&amp; other) ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492018,"discussion_content":"å®é™…ä¸Šä»å½¢å¼ä¸Šè®²ï¼Œ2ã€3 å°±å¤Ÿäº†ï¼Œä½†ç”±äº 2 ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œæ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ï¼Œé‚£å°±ä¼šå‡ºé—®é¢˜äº†ã€‚è€Œæœ‰äº† 1 ä¹‹åï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆç¼ºçœçš„ç§»åŠ¨æ„é€ å‡½æ•°äº†ï¼Œæ‰€ä»¥ä½ è¯´çš„å°±ä¸å¿…æä¾›äº†ï¼Œé‡è½½è§£æèƒ½ç”¨ 3 æ¥ä»£æ›¿ã€‚\n\nè¿›ä¸€æ­¥äº†è§£å¯ä»¥çœ‹ç¬¬ 9 è®²ï¼Œå’Œé‡Œé¢çš„å‚è€ƒèµ„æ–™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587217828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203658,"user_name":"zg","can_delete":false,"product_type":"c1","uid":1055025,"ip_address":"","ucode":"809277A5F204BD","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/31/b438b9cf.jpg","comment_is_top":false,"comment_ctime":1586248836,"is_pvip":false,"replies":[{"id":76293,"content":"2,3,4ï¼Ÿäº‹å®ä¸Šï¼Œæˆ‘è¯•äº† GCCã€Clang å’Œ MSVCï¼Œæ²¡æœ‰ä¸€ä¸ªç»“æœæ˜¯ 2,3,4 å‘¢ã€‚æˆ‘çœ‹åˆ°çš„è®¡æ•°æ›´å¤§ã€‚å…¶ä¸­æœ‰ä¸€ç§æƒ…å†µæ˜¯ 6,4,2ã€‚\n\n6,4,2 çš„æƒ…å†µè¿˜æ˜¯å¾ˆå®¹æ˜“è§£é‡Šçš„ã€‚æ¯ä¸ªçº¿ç¨‹å„æœ‰ä¸€ä¸ªå‚æ•° pï¼Œè¿™å°±æ˜¯ 3 äº†ã€‚æ¯ä¸ªçº¿ç¨‹è¿˜å„æœ‰ä¸ª lpï¼Œæ‰€ä»¥æœ€å¤šä¼šåˆ° 6ã€‚æ¯ä¸ªçº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œé‡Šæ”¾ä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œå¼•ç”¨è®¡æ•°å‡ 2ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1586345165,"ip_address":"","comment_id":203658,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼š\nè¿™ä¸€èŠ‚çš„å†…å®¹ä¸­çš„å‚è€ƒèµ„æ–™ã€2ã€‘ä¸­çš„ç¤ºä¾‹ä»£ç ï¼š\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;mutex&gt;\n \nstruct Base\n{\n    Base() { std::cout &lt;&lt; &quot;  Base::Base()\\n&quot;; }\n    &#47;&#47; Note: non-virtual destructor is OK here\n    ~Base() { std::cout &lt;&lt; &quot;  Base::~Base()\\n&quot;; }\n};\n \nstruct Derived: public Base\n{\n    Derived() { std::cout &lt;&lt; &quot;  Derived::Derived()\\n&quot;; }\n    ~Derived() { std::cout &lt;&lt; &quot;  Derived::~Derived()\\n&quot;; }\n};\n \nvoid thr(std::shared_ptr&lt;Base&gt; p)\n{\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    std::shared_ptr&lt;Base&gt; lp = p; &#47;&#47; thread-safe, even though the\n                                  &#47;&#47; shared use_count is incremented\n    {\n        static std::mutex io_mutex;\n        std::lock_guard&lt;std::mutex&gt; lk(io_mutex);\n        std::cout &lt;&lt; &quot;local pointer in a thread:\\n&quot;\n                  &lt;&lt; &quot;  lp.get() = &quot; &lt;&lt; lp.get()\n                  &lt;&lt; &quot;, lp.use_count() = &quot; &lt;&lt; lp.use_count() &lt;&lt; &#39;\\n&#39;;\n    }\n}\n \nint main()\n{\n    std::shared_ptr&lt;Base&gt; p = std::make_shared&lt;Derived&gt;();\n \n    std::cout &lt;&lt; &quot;Created a shared Derived (as a pointer to Base)\\n&quot;\n              &lt;&lt; &quot;  p.get() = &quot; &lt;&lt; p.get()\n              &lt;&lt; &quot;, p.use_count() = &quot; &lt;&lt; p.use_count() &lt;&lt; &#39;\\n&#39;;\n    std::thread t1(thr, p), t2(thr, p), t3(thr, p);\n    p.reset(); &#47;&#47; release ownership from main\n    std::cout &lt;&lt; &quot;Shared ownership between 3 threads and released\\n&quot;\n              &lt;&lt; &quot;ownership from main:\\n&quot;\n              &lt;&lt; &quot;  p.get() = &quot; &lt;&lt; p.get()\n              &lt;&lt; &quot;, p.use_count() = &quot; &lt;&lt; p.use_count() &lt;&lt; &#39;\\n&#39;;\n    t1.join(); t2.join(); t3.join();\n    std::cout &lt;&lt; &quot;All threads completed, the last one deleted Derived\\n&quot;;\n}\nåœ¨p.reset()å‡½æ•°åï¼Œè®¡æ•°ä¸ºé›¶äº†ï¼Œä¸ºä»€ä¹ˆä¸‰ä¸ªçº¿ç¨‹ä¸­çš„lp.use_count()çš„å€¼ä¸æ˜¯1,2å’Œ3ï¼Œè€Œæ˜¯2,3å’Œ4ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490923,"discussion_content":"2,3,4ï¼Ÿäº‹å®ä¸Šï¼Œæˆ‘è¯•äº† GCCã€Clang å’Œ MSVCï¼Œæ²¡æœ‰ä¸€ä¸ªç»“æœæ˜¯ 2,3,4 å‘¢ã€‚æˆ‘çœ‹åˆ°çš„è®¡æ•°æ›´å¤§ã€‚å…¶ä¸­æœ‰ä¸€ç§æƒ…å†µæ˜¯ 6,4,2ã€‚\n\n6,4,2 çš„æƒ…å†µè¿˜æ˜¯å¾ˆå®¹æ˜“è§£é‡Šçš„ã€‚æ¯ä¸ªçº¿ç¨‹å„æœ‰ä¸€ä¸ªå‚æ•° pï¼Œè¿™å°±æ˜¯ 3 äº†ã€‚æ¯ä¸ªçº¿ç¨‹è¿˜å„æœ‰ä¸ª lpï¼Œæ‰€ä»¥æœ€å¤šä¼šåˆ° 6ã€‚æ¯ä¸ªçº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œé‡Šæ”¾ä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œå¼•ç”¨è®¡æ•°å‡ 2ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586345165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195914,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1510495,"ip_address":"","ucode":"C6FC61A90F202B","user_header":"https://static001.geekbang.org/account/avatar/00/17/0c/5f/4cbcbfb9.jpg","comment_is_top":false,"comment_ctime":1585224155,"is_pvip":false,"replies":[{"id":74461,"content":"atomic è¦åˆ°ç¬¬ 20 è®²æ‰è®²å‘¢ã€‚æ€¥çš„è¯å°±å…ˆçœ‹ä¸€ä¸‹ç¬¬ 20 è®²å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1585315906,"ip_address":"","comment_id":195914,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å¼•ç”¨è®¡æ•°ä¸ºä»€ä¹ˆå¯ä»¥ä¸ä½¿ç”¨atomic&lt;long&gt;ï¼Œè€Œç”¨äº†longã€‚å¤šçº¿ç¨‹æ“ä½œä¸ä¼šå‡ºé—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489191,"discussion_content":"atomic è¦åˆ°ç¬¬ 20 è®²æ‰è®²å‘¢ã€‚æ€¥çš„è¯å°±å…ˆçœ‹ä¸€ä¸‹ç¬¬ 20 è®²å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585315906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223018,"user_name":"åƒé±¼","can_delete":false,"product_type":"c1","uid":2005742,"ip_address":"","ucode":"CB7AC741E0E4B7","user_header":"https://static001.geekbang.org/account/avatar/00/1e/9a/ee/f996f864.jpg","comment_is_top":false,"comment_ctime":1590982342,"is_pvip":false,"replies":[{"id":82205,"content":"åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„æ‰€æœ‰æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œè¿™ä¸ªè®¡æ•°ä¹Ÿæ˜¯å…±äº«çš„ã€‚æ‰€ä»¥ä¸ä¼šæœ‰é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1590990879,"ip_address":"","comment_id":223018,"utype":1}],"discussion_count":2,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"è·Ÿç€è€å¸ˆæ€è·¯èµ°æ„Ÿè§‰æ”¶è·å¾ˆå¤šï¼Œç‰¹åˆ«å­¦åˆ°äº†å¾ˆæ­£è§„çš„ç¼–ç æ–¹å¼ã€‚\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼Œæˆ‘ä»¬åœ¨å¢åŠ å¼•ç”¨è®¡æ•°æ—¶åªæ˜¯è·Ÿä½œä¸ºæ‹·è´æ„é€ å‡½æ•°å‚æ•°çš„æ™ºèƒ½æŒ‡é’ˆåŒæ—¶å¢åŠ ï¼Œå¦‚æœåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ„é€ ä¸€ä¸ªæºå¤´æ™ºèƒ½æŒ‡é’ˆï¼Œç„¶åé€šè¿‡è¿™ä¸ªæºå¤´æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºä¸€ä¸ªç¬¬äºŒä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œè¿™æ ·ä½¿ç”¨æ²¡æœ‰é—®é¢˜ï¼Œé‚£å¦‚æœå†é€šè¿‡æºå¤´æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºæ›´å¤šçš„æ™ºèƒ½æŒ‡é’ˆï¼Œæºå¤´æ™ºèƒ½æŒ‡é’ˆå’Œæœ€æ–°åˆ›å»ºçš„æ™ºèƒ½æŒ‡é’ˆå¼•ç”¨è®¡æ•°å›ºç„¶å¢åŠ ï¼Œå¯æ˜¯å·²åˆ›å»ºçš„æ™ºèƒ½æŒ‡é’ˆå¹¶æ²¡æœ‰å‚ä¸åˆ°ä¹‹åæ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»ºï¼Œé‚£ä¹ˆå…¶å¼•ç”¨è®¡æ•°å°±ä¸ä¼šå¢åŠ ï¼Ÿæˆ–è€…ä½¿ç”¨è€…ç›´æ¥ä¸ä½¿ç”¨æºå¤´æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºä¹‹åçš„æ™ºèƒ½æŒ‡é’ˆï¼Œé‚£ä¹ˆå¯¹åº”åŒä¸€å—å†…å­˜åŒºåŸŸçš„å„ä¸ªæ™ºèƒ½æŒ‡é’ˆçš„å¼•ç”¨è®¡æ•°å°±ä¸ç»Ÿä¸€ï¼Œè¿™æ ·çš„æƒ…å†µæ˜¯å¦ä¼šå‡ºé—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496989,"discussion_content":"åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„æ‰€æœ‰æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œè¿™ä¸ªè®¡æ•°ä¹Ÿæ˜¯å…±äº«çš„ã€‚æ‰€ä»¥ä¸ä¼šæœ‰é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590990879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2005742,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/9a/ee/f996f864.jpg","nickname":"åƒé±¼","note":"","ucode":"CB7AC741E0E4B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277020,"discussion_content":"è€å¸ˆæˆ‘æ˜ç™½äº†ï¼Œå…±äº«çš„ share_countæŒ‡é’ˆï¼Œæ‰€ä»¥æ²¡é—®é¢˜ï¼Œæ²¡è®¤çœŸçœ‹ä»£ç ï¼Œè§ç¬‘äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590983407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220195,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1590202251,"is_pvip":false,"replies":[{"id":81351,"content":"smart_ptr&lt;shape&gt; &amp;ptr2{ptr1};&#47;&#47;è¿™æ˜¯è°ƒç”¨äº†å·²è¢«åˆ é™¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼Ÿä¸ºå•¥èƒ½ç¼–è¯‘é€šè¿‡ï¼Ÿ\n\nä½ æ˜¯æŠŠ ptr1 çš„å¼•ç”¨èµ‹ç»™äº† ptr2ï¼ˆä¸æ˜¯å¯¹è±¡ï¼Œæ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼‰ã€‚æ²¡é—®é¢˜å•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1590247066,"ip_address":"","comment_id":220195,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å…ˆä¸Šä¸€æ®µä»£ç ï¼š\nint main(){\n smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\n    smart_ptr&lt;shape&gt; &amp;ptr2{ptr1};&#47;&#47;è¿™æ˜¯è°ƒç”¨äº†å·²è¢«åˆ é™¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼Ÿä¸ºå•¥èƒ½ç¼–è¯‘é€šè¿‡ï¼Ÿ\n\n    smart_ptr&lt;shape&gt; ptr3 = ptr1;&#47;&#47;è¿™ä¸ªæ˜¯å°è¯•è°ƒç”¨äº†å·²è¢«åˆ é™¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼ŒæŠ¥é”™ã€‚\n    ptr3 = smart_ptr&lt;shape&gt;(create_shape(shape_type::circle));\n    ptr3 = std::move(ptr1);                  &#47;&#47; OKï¼Œå¯ä»¥\n    smart_ptr&lt;shape&gt; ptr4{std::move(ptr3)};  &#47;&#47; OKï¼Œå¯ä»¥\n}\nè€å¸ˆï¼Œä¸ºå•¥  smart_ptr&lt;shape&gt; &amp;ptr2{ptr1} èƒ½ç¼–è¯‘é€šè¿‡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496989,"discussion_content":"åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„æ‰€æœ‰æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œè¿™ä¸ªè®¡æ•°ä¹Ÿæ˜¯å…±äº«çš„ã€‚æ‰€ä»¥ä¸ä¼šæœ‰é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590990879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2005742,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/9a/ee/f996f864.jpg","nickname":"åƒé±¼","note":"","ucode":"CB7AC741E0E4B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277020,"discussion_content":"è€å¸ˆæˆ‘æ˜ç™½äº†ï¼Œå…±äº«çš„ share_countæŒ‡é’ˆï¼Œæ‰€ä»¥æ²¡é—®é¢˜ï¼Œæ²¡è®¤çœŸçœ‹ä»£ç ï¼Œè§ç¬‘äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590983407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219964,"user_name":"Geek_24c4df","can_delete":false,"product_type":"c1","uid":2010573,"ip_address":"","ucode":"BD66D0854804A7","user_header":"","comment_is_top":false,"comment_ctime":1590126832,"is_pvip":false,"replies":[{"id":81302,"content":"å†ä»”ç»†çœ‹çœ‹ã€‚ç°åœ¨æ˜¯ smart_ptr&lt;T&gt; è¦è®¿é—®å¦ä¸€ä¸ª smart_ptr&lt;U&gt; çš„æˆå‘˜ï¼Œè·Ÿ shared_count æœ‰å•¥å…³ç³»ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1590214708,"ip_address":"","comment_id":219964,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"template &lt;typename U&gt;  \nfriend class smart_ptr;\n\nä¸ºä»€ä¹ˆä¸æ˜¯åœ¨shared_countç±»ä¸­æŠŠ smart_ptrå®šä¹‰ä¸ºå‹å…ƒç±»å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496008,"discussion_content":"å†ä»”ç»†çœ‹çœ‹ã€‚ç°åœ¨æ˜¯ smart_ptr&amp;lt;T&amp;gt; è¦è®¿é—®å¦ä¸€ä¸ª smart_ptr&amp;lt;U&amp;gt; çš„æˆå‘˜ï¼Œè·Ÿ shared_count æœ‰å•¥å…³ç³»ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590214708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219221,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c1","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1589968489,"is_pvip":false,"replies":[{"id":81005,"content":"æ²¡çœ‹æ‡‚ä½ çš„æ„æ€ã€‚è¯·ç»™å‡ºæ›´æ˜ç¡®çš„ä»£ç ã€‚\n\næŒ‰ç…§ C++ æ ‡å‡†ï¼Œåªæœ‰ç¬¦åˆä¸‹é¢çš„æ¡ä»¶çš„æˆå‘˜å‡½æ•°æ‰è¢«è®¤ä¸ºæ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ï¼š\n\nç±» T çš„ç§»åŠ¨æ„é€ å‡½æ•°æ˜¯éæ¨¡æ¿æ„é€ å‡½æ•°ï¼Œå…¶é¦–ä¸ªå½¢å‚æ˜¯ T&amp;&amp;ã€const T&amp;&amp;ã€volatile T&amp;&amp; æˆ– const volatile T&amp;&amp;ï¼Œä¸”æ— å…¶ä»–å½¢å‚ï¼Œæˆ–å‰©ä½™å½¢å‚å‡æœ‰é»˜è®¤å€¼ã€‚\n\nè§ https:&#47;&#47;zh.cppreference.com&#47;w&#47;cpp&#47;language&#47;move_constructor\n\næˆ‘ç»™å‡ºçš„æ˜¯ä¸ªæ¨¡æ¿æ„é€ å‡½æ•° template &lt;typename U&gt; smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589989832,"ip_address":"","comment_id":219221,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"â€œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºâ€ï¼Œè¿™å¥è¯æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Ÿ\næˆ‘æµ‹è¯•äº†ä¸‹ï¼šåœ¨åŸæ¥çš„ç§»åŠ¨æ„é€ å‡½æ•°åŠ äº†&lt;T&gt;,å…¶ä»–ä»€ä¹ˆä¹Ÿæ²¡æ”¹ï¼Œsmart_ptr&lt;shape&gt; ptr2{ptr1}æŠ¥çš„é”™ä¸ºï¼šä¸èƒ½è°ƒç”¨å·²åˆ é™¤çš„æ‹·è´å‡½æ•°(call to impilicitly-deleted construtor of &quot;smart_ptr&lt;shape&gt;&quot;)ï¼Œæ˜¯ä¸æ˜¯è¯´æ˜è§¦å‘äº†åˆ é™¤æ‹·è´æ„é€ å‡½æ•°ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496008,"discussion_content":"å†ä»”ç»†çœ‹çœ‹ã€‚ç°åœ¨æ˜¯ smart_ptr&amp;lt;T&amp;gt; è¦è®¿é—®å¦ä¸€ä¸ª smart_ptr&amp;lt;U&amp;gt; çš„æˆå‘˜ï¼Œè·Ÿ shared_count æœ‰å•¥å…³ç³»ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590214708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218193,"user_name":"The Answer........","can_delete":false,"product_type":"c1","uid":2003313,"ip_address":"","ucode":"896638729520A6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/dQQR8nfd3k8zO9Z7TjOxSneFmiarGct9o6JORPrzMyyic8ZnPB97SuvYp544UKCQ24dj2LOvsbUQE3zb1uAGWG7Q/132","comment_is_top":false,"comment_ctime":1589734136,"is_pvip":false,"replies":[{"id":80757,"content":"æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„è¯ï¼Œç¼–è¯‘ç›´æ¥å°±åœ¨æŒ‡é’ˆèµ‹å€¼é‚£è¡Œä¸Šå¤±è´¥äº†ã€‚ç¼–è¯‘å™¨ä¼šå¸®ä½ æ£€æŸ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589802073,"ip_address":"","comment_id":218193,"utype":1}],"discussion_count":2,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å´è€å¸ˆ, å…³äºæ™ºèƒ½æŒ‡é’ˆè¿™é‡Œå®ç°çš„éšå¼è½¬æ¢æˆ‘æœ‰ä¸ªåœ°æ–¹ä¸è§£.\ntemplate &lt;typename U&gt;  \nsmart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept;\næˆ‘ä»¬ä¸éœ€è¦åˆ¤æ–­ä¸€ä¸‹smart_ptr&lt;U&gt;&amp;&amp; otherçš„ç±»å‹å—. æ™ºèƒ½æŒ‡é’ˆotheråº”è¯¥æ˜¯å¾—æ»¡è¶³å­ç±»å’ŒåŸºç±»çš„å…³ç³»æ‰èƒ½è½¬æ¢æˆåŠŸå§. ä¸¤ä¸ªå®Œå…¨æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„ç±»çš„æ™ºèƒ½æŒ‡é’ˆä¹Ÿå¯ä»¥è½¬æ¢å—","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495724,"discussion_content":"æ²¡çœ‹æ‡‚ä½ çš„æ„æ€ã€‚è¯·ç»™å‡ºæ›´æ˜ç¡®çš„ä»£ç ã€‚\n\næŒ‰ç…§ C++ æ ‡å‡†ï¼Œåªæœ‰ç¬¦åˆä¸‹é¢çš„æ¡ä»¶çš„æˆå‘˜å‡½æ•°æ‰è¢«è®¤ä¸ºæ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ï¼š\n\nç±» T çš„ç§»åŠ¨æ„é€ å‡½æ•°æ˜¯éæ¨¡æ¿æ„é€ å‡½æ•°ï¼Œå…¶é¦–ä¸ªå½¢å‚æ˜¯ T&amp;amp;&amp;amp;ã€const T&amp;amp;&amp;amp;ã€volatile T&amp;amp;&amp;amp; æˆ– const volatile T&amp;amp;&amp;amp;ï¼Œä¸”æ— å…¶ä»–å½¢å‚ï¼Œæˆ–å‰©ä½™å½¢å‚å‡æœ‰é»˜è®¤å€¼ã€‚\n\nè§ https://zh.cppreference.com/w/cpp/language/move_constructor\n\næˆ‘ç»™å‡ºçš„æ˜¯ä¸ªæ¨¡æ¿æ„é€ å‡½æ•° template &amp;lt;typename U&amp;gt; smart_ptr(smart_ptr&amp;lt;U&amp;gt;&amp;amp;&amp;amp; other)ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589989832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215816,"user_name":"ä¸åŠ¨å£°è‰²æ»¡å¿ƒæ¾æ¹ƒ","can_delete":false,"product_type":"c1","uid":1621658,"ip_address":"","ucode":"80D8F9E49AF7C2","user_header":"https://static001.geekbang.org/account/avatar/00/18/be/9a/b0b89be3.jpg","comment_is_top":false,"comment_ctime":1589109404,"is_pvip":false,"replies":[{"id":80079,"content":"è°¢è°¢ã€‚ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589257159,"ip_address":"","comment_id":215816,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å¾ˆèµ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495377,"discussion_content":"æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„è¯ï¼Œç¼–è¯‘ç›´æ¥å°±åœ¨æŒ‡é’ˆèµ‹å€¼é‚£è¡Œä¸Šå¤±è´¥äº†ã€‚ç¼–è¯‘å™¨ä¼šå¸®ä½ æ£€æŸ¥çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589802073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2003313,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/dQQR8nfd3k8zO9Z7TjOxSneFmiarGct9o6JORPrzMyyic8ZnPB97SuvYp544UKCQ24dj2LOvsbUQE3zb1uAGWG7Q/132","nickname":"The Answer........","note":"","ucode":"896638729520A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268420,"discussion_content":"è‡ªå·±åº”è¯¥æ‰¾åˆ°ç­”æ¡ˆäº†ï¼Œå‚æ•°ä¼ é€’è¿›æ¥ä¸ç”¨ç®¡ç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬æœ€ç»ˆè¿˜æ˜¯raw pointerçš„éšå¼è½¬æ¢çš„ï¼Œraw pointerçš„éšå¼è½¬æ¢ä¼šæœ‰ç¼–è¯‘å™¨è‡ªåŠ¨åˆ¤æ–­ï¼Œæ‰€ä»¥èƒ½è½¬æ¢ä¼šæˆåŠŸï¼Œä¸èƒ½å°±ä¼šæŠ¥é”™ï¼Œå¥½åƒæ˜¯è¿™æ ·.","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589772379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215261,"user_name":"æ²³å±±","can_delete":false,"product_type":"c1","uid":1128970,"ip_address":"","ucode":"244F0F35FF4112","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/0a/91f0d27a.jpg","comment_is_top":false,"comment_ctime":1588943159,"is_pvip":false,"replies":[{"id":79746,"content":"ã€Œç”±äºçœŸæ­£å¤šçº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ°æˆ‘ä»¬ç›®å‰è¿˜æ²¡å­¦åˆ°çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ç›®å‰å…ˆå®ç°ä¸€ä¸ªç®€å•åŒ–çš„ç‰ˆæœ¬ã€ï¼šåŸå­æ“ä½œçš„ç‰ˆæœ¬è§ç¬¬ 20 è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589003614,"ip_address":"","comment_id":215261,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å¥½åƒæ²¡åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Ÿè¦åŠ åŸå­æ“ä½œå§","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494569,"discussion_content":"è°¢è°¢ã€‚ğŸ˜‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589257159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207133,"user_name":"dietcoke","can_delete":false,"product_type":"c1","uid":1217826,"ip_address":"","ucode":"6522B3E23F59DD","user_header":"","comment_is_top":false,"comment_ctime":1587012404,"is_pvip":false,"replies":[{"id":77590,"content":"å®é™…ä¸Šä»å½¢å¼ä¸Šè®²ï¼Œ2ã€3 å°±å¤Ÿäº†ï¼Œä½†ç”±äº 2 ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œæ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ï¼Œé‚£å°±ä¼šå‡ºé—®é¢˜äº†ã€‚è€Œæœ‰äº† 1 ä¹‹åï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆç¼ºçœçš„ç§»åŠ¨æ„é€ å‡½æ•°äº†ï¼Œæ‰€ä»¥ä½ è¯´çš„å°±ä¸å¿…æä¾›äº†ï¼Œé‡è½½è§£æèƒ½ç”¨ 3 æ¥ä»£æ›¿ã€‚\n\nè¿›ä¸€æ­¥äº†è§£å¯ä»¥çœ‹ç¬¬ 9 è®²ï¼Œå’Œé‡Œé¢çš„å‚è€ƒèµ„æ–™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1587217828,"ip_address":"","comment_id":207133,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹æœ€ç»ˆç‰ˆæœ¬çš„ä»£ç æœ‰è¿™ä¸‰ä¸ªå‡½æ•°ï¼š\n1. smart_ptr(const smart_ptr&amp; other)\n2. template&lt;typename U&gt;\n    smart_ptr(const smart_ptr&lt;U&gt;&amp; other)\n3. template&lt;typename U&gt;\n    smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)\né‚£ä¹ˆä¸ºä»€ä¹ˆæ²¡æœ‰è¿™ä¸ªå‡½æ•°å‘¢ smart_ptr(smart_ptr&amp;&amp; other) ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494375,"discussion_content":"ã€Œç”±äºçœŸæ­£å¤šçº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ°æˆ‘ä»¬ç›®å‰è¿˜æ²¡å­¦åˆ°çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ç›®å‰å…ˆå®ç°ä¸€ä¸ªç®€å•åŒ–çš„ç‰ˆæœ¬ã€ï¼šåŸå­æ“ä½œçš„ç‰ˆæœ¬è§ç¬¬ 20 è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589003614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203658,"user_name":"zg","can_delete":false,"product_type":"c1","uid":1055025,"ip_address":"","ucode":"809277A5F204BD","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/31/b438b9cf.jpg","comment_is_top":false,"comment_ctime":1586248836,"is_pvip":false,"replies":[{"id":76293,"content":"2,3,4ï¼Ÿäº‹å®ä¸Šï¼Œæˆ‘è¯•äº† GCCã€Clang å’Œ MSVCï¼Œæ²¡æœ‰ä¸€ä¸ªç»“æœæ˜¯ 2,3,4 å‘¢ã€‚æˆ‘çœ‹åˆ°çš„è®¡æ•°æ›´å¤§ã€‚å…¶ä¸­æœ‰ä¸€ç§æƒ…å†µæ˜¯ 6,4,2ã€‚\n\n6,4,2 çš„æƒ…å†µè¿˜æ˜¯å¾ˆå®¹æ˜“è§£é‡Šçš„ã€‚æ¯ä¸ªçº¿ç¨‹å„æœ‰ä¸€ä¸ªå‚æ•° pï¼Œè¿™å°±æ˜¯ 3 äº†ã€‚æ¯ä¸ªçº¿ç¨‹è¿˜å„æœ‰ä¸ª lpï¼Œæ‰€ä»¥æœ€å¤šä¼šåˆ° 6ã€‚æ¯ä¸ªçº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œé‡Šæ”¾ä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œå¼•ç”¨è®¡æ•°å‡ 2ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1586345165,"ip_address":"","comment_id":203658,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼š\nè¿™ä¸€èŠ‚çš„å†…å®¹ä¸­çš„å‚è€ƒèµ„æ–™ã€2ã€‘ä¸­çš„ç¤ºä¾‹ä»£ç ï¼š\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;mutex&gt;\n \nstruct Base\n{\n    Base() { std::cout &lt;&lt; &quot;  Base::Base()\\n&quot;; }\n    &#47;&#47; Note: non-virtual destructor is OK here\n    ~Base() { std::cout &lt;&lt; &quot;  Base::~Base()\\n&quot;; }\n};\n \nstruct Derived: public Base\n{\n    Derived() { std::cout &lt;&lt; &quot;  Derived::Derived()\\n&quot;; }\n    ~Derived() { std::cout &lt;&lt; &quot;  Derived::~Derived()\\n&quot;; }\n};\n \nvoid thr(std::shared_ptr&lt;Base&gt; p)\n{\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    std::shared_ptr&lt;Base&gt; lp = p; &#47;&#47; thread-safe, even though the\n                                  &#47;&#47; shared use_count is incremented\n    {\n        static std::mutex io_mutex;\n        std::lock_guard&lt;std::mutex&gt; lk(io_mutex);\n        std::cout &lt;&lt; &quot;local pointer in a thread:\\n&quot;\n                  &lt;&lt; &quot;  lp.get() = &quot; &lt;&lt; lp.get()\n                  &lt;&lt; &quot;, lp.use_count() = &quot; &lt;&lt; lp.use_count() &lt;&lt; &#39;\\n&#39;;\n    }\n}\n \nint main()\n{\n    std::shared_ptr&lt;Base&gt; p = std::make_shared&lt;Derived&gt;();\n \n    std::cout &lt;&lt; &quot;Created a shared Derived (as a pointer to Base)\\n&quot;\n              &lt;&lt; &quot;  p.get() = &quot; &lt;&lt; p.get()\n              &lt;&lt; &quot;, p.use_count() = &quot; &lt;&lt; p.use_count() &lt;&lt; &#39;\\n&#39;;\n    std::thread t1(thr, p), t2(thr, p), t3(thr, p);\n    p.reset(); &#47;&#47; release ownership from main\n    std::cout &lt;&lt; &quot;Shared ownership between 3 threads and released\\n&quot;\n              &lt;&lt; &quot;ownership from main:\\n&quot;\n              &lt;&lt; &quot;  p.get() = &quot; &lt;&lt; p.get()\n              &lt;&lt; &quot;, p.use_count() = &quot; &lt;&lt; p.use_count() &lt;&lt; &#39;\\n&#39;;\n    t1.join(); t2.join(); t3.join();\n    std::cout &lt;&lt; &quot;All threads completed, the last one deleted Derived\\n&quot;;\n}\nåœ¨p.reset()å‡½æ•°åï¼Œè®¡æ•°ä¸ºé›¶äº†ï¼Œä¸ºä»€ä¹ˆä¸‰ä¸ªçº¿ç¨‹ä¸­çš„lp.use_count()çš„å€¼ä¸æ˜¯1,2å’Œ3ï¼Œè€Œæ˜¯2,3å’Œ4ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492018,"discussion_content":"å®é™…ä¸Šä»å½¢å¼ä¸Šè®²ï¼Œ2ã€3 å°±å¤Ÿäº†ï¼Œä½†ç”±äº 2 ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œæ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ï¼Œé‚£å°±ä¼šå‡ºé—®é¢˜äº†ã€‚è€Œæœ‰äº† 1 ä¹‹åï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆç¼ºçœçš„ç§»åŠ¨æ„é€ å‡½æ•°äº†ï¼Œæ‰€ä»¥ä½ è¯´çš„å°±ä¸å¿…æä¾›äº†ï¼Œé‡è½½è§£æèƒ½ç”¨ 3 æ¥ä»£æ›¿ã€‚\n\nè¿›ä¸€æ­¥äº†è§£å¯ä»¥çœ‹ç¬¬ 9 è®²ï¼Œå’Œé‡Œé¢çš„å‚è€ƒèµ„æ–™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587217828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195914,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1510495,"ip_address":"","ucode":"C6FC61A90F202B","user_header":"https://static001.geekbang.org/account/avatar/00/17/0c/5f/4cbcbfb9.jpg","comment_is_top":false,"comment_ctime":1585224155,"is_pvip":false,"replies":[{"id":74461,"content":"atomic è¦åˆ°ç¬¬ 20 è®²æ‰è®²å‘¢ã€‚æ€¥çš„è¯å°±å…ˆçœ‹ä¸€ä¸‹ç¬¬ 20 è®²å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1585315906,"ip_address":"","comment_id":195914,"utype":1}],"discussion_count":1,"race_medal":0,"score":13,"product_id":100040501,"comment_content":"å¼•ç”¨è®¡æ•°ä¸ºä»€ä¹ˆå¯ä»¥ä¸ä½¿ç”¨atomic&lt;long&gt;ï¼Œè€Œç”¨äº†longã€‚å¤šçº¿ç¨‹æ“ä½œä¸ä¼šå‡ºé—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490923,"discussion_content":"2,3,4ï¼Ÿäº‹å®ä¸Šï¼Œæˆ‘è¯•äº† GCCã€Clang å’Œ MSVCï¼Œæ²¡æœ‰ä¸€ä¸ªç»“æœæ˜¯ 2,3,4 å‘¢ã€‚æˆ‘çœ‹åˆ°çš„è®¡æ•°æ›´å¤§ã€‚å…¶ä¸­æœ‰ä¸€ç§æƒ…å†µæ˜¯ 6,4,2ã€‚\n\n6,4,2 çš„æƒ…å†µè¿˜æ˜¯å¾ˆå®¹æ˜“è§£é‡Šçš„ã€‚æ¯ä¸ªçº¿ç¨‹å„æœ‰ä¸€ä¸ªå‚æ•° pï¼Œè¿™å°±æ˜¯ 3 äº†ã€‚æ¯ä¸ªçº¿ç¨‹è¿˜å„æœ‰ä¸ª lpï¼Œæ‰€ä»¥æœ€å¤šä¼šåˆ° 6ã€‚æ¯ä¸ªçº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œé‡Šæ”¾ä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œå¼•ç”¨è®¡æ•°å‡ 2ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586345165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187039,"user_name":"å®‹å¼º","can_delete":false,"product_type":"c1","uid":1564605,"ip_address":"","ucode":"119A0B00ABDA7B","user_header":"","comment_is_top":false,"comment_ctime":1583997621,"is_pvip":false,"replies":[{"id":72220,"content":"åˆ é™¤å‰é¢é‚£ä¸ªä¼šæ˜¯ä¸ªé”™è¯¯ï¼ˆæˆ‘ä¹ŸçŠ¯è¿‡ï¼‰ã€‚\n\nçœ‹æ–‡ä¸­è¿™æ®µï¼šã€Œéœ€è¦æ³¨æ„ï¼Œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚ã€è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤æä¾›ä¸€ä¸ªï¼ˆé”™è¯¯çš„ç‰ˆæœ¬ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1584021542,"ip_address":"","comment_id":187039,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"è¯·é—®è€å¸ˆï¼š\nsmart_ptr(const smart_ptr&amp; other) noexcept { ... } \nå’Œ\ntemplate &lt;typename U&gt;\nsmart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept { ... }\næ˜¯ä¸æ˜¯é‡å¤äº†ï¼Œä¿ç•™åé¢è¿™ç§æ³›å‹å°±ç›´æ¥å¯ä»¥äº†","like_count":0},{"had_liked":false,"id":184558,"user_name":"englefly","can_delete":false,"product_type":"c1","uid":1145907,"ip_address":"","ucode":"E3FCF19E618718","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep2gRIticwS6CiatsCiaU4QRjAODKibQevrhSciatrmd90lNIZFxywE9yyZgAxKTmWiaBSH4zZUcRIV46qQ/132","comment_is_top":false,"comment_ctime":1583337379,"is_pvip":false,"replies":[{"id":71419,"content":"æ²¡æœ‰æ”¹s2ã€‚æ”¹çš„æ˜¯s2çš„ä¸€ä¸ªæ‹·è´ã€‚è¿›å…¥å‡½æ•°ä½“æ—¶ï¼Œs2å·²ç»è¢«æ‹·è´æ„é€ äº†ï¼ˆsmart_ptr rhsï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1583387211,"ip_address":"","comment_id":184558,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œå…³äºèµ‹å€¼ =  çš„å®ç°æœ‰ä¸€ä¸ªç–‘é—®ï¼š\nsmart_ptr&amp; \noperator=(smart_ptr rhs) noexcept { \n        rhs.swap(*this); \n        return *this; \n}\n\nå…³äºè¿™ä¸€å¥ï¼šrhs.swap(*this); \nå¦‚æœæ‰§è¡Œ s1=s2ï¼Œ æˆ‘ç†è§£è¿™åº”è¯¥æ”¹å˜s1ï¼Œä½†ä¸ºä»€ä¹ˆè¦æŠŠs2 çš„å†…éƒ¨æŒ‡é’ˆæ›¿æ¢æˆåŸæ¥s1çš„å†…éƒ¨æŒ‡é’ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯è®©s1.ptr_ ä¸ºç©ºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486970,"discussion_content":"åˆ é™¤å‰é¢é‚£ä¸ªä¼šæ˜¯ä¸ªé”™è¯¯ï¼ˆæˆ‘ä¹ŸçŠ¯è¿‡ï¼‰ã€‚\n\nçœ‹æ–‡ä¸­è¿™æ®µï¼šã€Œéœ€è¦æ³¨æ„ï¼Œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚ã€è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤æä¾›ä¸€ä¸ªï¼ˆé”™è¯¯çš„ç‰ˆæœ¬ï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584021542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177180,"user_name":"å‡‰äººã€‚","can_delete":false,"product_type":"c1","uid":1659177,"ip_address":"","ucode":"4DB16004A62015","user_header":"https://static001.geekbang.org/account/avatar/00/19/51/29/24739c58.jpg","comment_is_top":false,"comment_ctime":1581315586,"is_pvip":false,"replies":[{"id":68817,"content":"ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581330689,"ip_address":"","comment_id":177180,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"å¾ˆå¥½ç†è§£ è°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486054,"discussion_content":"æ²¡æœ‰æ”¹s2ã€‚æ”¹çš„æ˜¯s2çš„ä¸€ä¸ªæ‹·è´ã€‚è¿›å…¥å‡½æ•°ä½“æ—¶ï¼Œs2å·²ç»è¢«æ‹·è´æ„é€ äº†ï¼ˆsmart_ptr rhsï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583387211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176235,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","comment_is_top":false,"comment_ctime":1580996822,"is_pvip":false,"replies":[{"id":68469,"content":"åˆ†è¡Œæ˜¯å› ä¸ºæ‰‹æœºå±å¹•çš„å®½åº¦é™åˆ¶ã€‚å…¶ä»–ä½ é—®çš„æ˜¯åŒä¸€ä»¶äº‹ï¼Œåœ¨å¦å¤–ä¸€ä¸ªè¯„è®ºä¸‹å›ç­”äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581033894,"ip_address":"","comment_id":176235,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":" æœ‰ç¼–è¯‘é”™è¯¯ï¼ŒåŠ äº†è¿™ä¸¤è¡Œï¼Œä½†æ˜¯æˆ‘å»æ‰ï¼Œç¼–è¯‘è¿è¡ŒåŒæ ·æ˜¯å¥½çš„ã€‚\n  template &lt;typename U&gt;\n  friend class smart_ptr;\n\n  å¦å¤–è¿˜æœ‰ä¸€ä¸ªä»£ç é£æ ¼çš„é—®é¢˜\n  ~smart_ptr()\n  {\n    if (ptr_ &amp;&amp;\n      !shared_count_\n         -&gt;reduce_count()) {\n      delete ptr_;\n      delete shared_count_;\n    }\n  }\n  \nåˆ¤æ–­reduce_count()çš„è¿”å›å€¼æ˜¯ä¸æ˜¯0ï¼ŒæŒ‡é’ˆå’Œå‡½æ•°è°ƒç”¨åˆ†å¼€äº†ä¸¤è¡Œï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹æ€ªæ€ªçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483332,"discussion_content":"ğŸ˜‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581330689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176228,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","comment_is_top":false,"comment_ctime":1580995714,"is_pvip":false,"replies":[{"id":68468,"content":"è§æ­£æ–‡ï¼š\n\né”™è¯¯åŸå› æ˜¯æ¨¡æ¿çš„å„ä¸ªå®ä¾‹é—´å¹¶ä¸å¤©ç„¶å°±æœ‰ friend å…³ç³»ï¼Œå› è€Œä¸èƒ½äº’è®¿ç§æœ‰æˆå‘˜ ptr_ å’Œ shared_count_ã€‚æˆ‘ä»¬éœ€è¦åœ¨ smart_ptr çš„å®šä¹‰ä¸­æ˜¾å¼å£°æ˜ï¼š\n  template &lt;typename U&gt;\n  friend class smart_ptr;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581033788,"ip_address":"","comment_id":176228,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"ä»£ç åˆ—è¡¨é‡Œ27è¡Œï¼Œè¿™é‡Œçš„  template &lt;typename U&gt;æ˜¯å¤šä½™çš„å§","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483058,"discussion_content":"åˆ†è¡Œæ˜¯å› ä¸ºæ‰‹æœºå±å¹•çš„å®½åº¦é™åˆ¶ã€‚å…¶ä»–ä½ é—®çš„æ˜¯åŒä¸€ä»¶äº‹ï¼Œåœ¨å¦å¤–ä¸€ä¸ªè¯„è®ºä¸‹å›ç­”äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581033894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174050,"user_name":"super-ck","can_delete":false,"product_type":"c1","uid":1307067,"ip_address":"","ucode":"02F036E53E1130","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ncicjtgbOgxk2V3VWYJQAia7oCycVFr5Zncudb5EYWhQsMte0asAauBDh6ELrJbTwrSnboBpESBibslrcNc5icrAkw/132","comment_is_top":false,"comment_ctime":1579928737,"is_pvip":false,"replies":[{"id":67681,"content":"æ¨¡æ¿çš„å®ä¾‹åŒ–ï¼ˆinstantiationï¼‰ç»“æœç›¸å½“äºç±»ã€‚ä¸åŒçš„å®ä¾‹è·Ÿä¸åŒçš„ç±»ä¸€æ ·ï¼Œä¸èƒ½äº’ç›¸è®¿é—®ç§æœ‰æˆå‘˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1579933727,"ip_address":"","comment_id":174050,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œåœ¨å®Œæ•´ä»£ç 27,28è¡Œï¼Œæœ‰ä¸€ç‚¹ä¸æ‡‚ï¼Œåœ¨ç±»smart_pträ¸­ç”¨çš„å‹å…ƒä¸ºä½•è¿˜æ˜¯smart_ptr","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482282,"discussion_content":"æ¨¡æ¿çš„å®ä¾‹åŒ–ï¼ˆinstantiationï¼‰ç»“æœç›¸å½“äºç±»ã€‚ä¸åŒçš„å®ä¾‹è·Ÿä¸åŒçš„ç±»ä¸€æ ·ï¼Œä¸èƒ½äº’ç›¸è®¿é—®ç§æœ‰æˆå‘˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579933727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171925,"user_name":"æ†çˆ±ä¸å…³å¿ƒ","can_delete":false,"product_type":"c1","uid":1133580,"ip_address":"","ucode":"A868ACB200C798","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/0c/ada45f25.jpg","comment_is_top":false,"comment_ctime":1579054271,"is_pvip":false,"replies":[{"id":66700,"content":"æˆ‘ä»¬çš„ swap æ˜¯æˆå‘˜å‡½æ•°å•Šï¼Œå½“ç„¶å¯ä»¥è®¿é—® private æ•°æ®æˆå‘˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1579081500,"ip_address":"","comment_id":171925,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œåœ¨ã€æ‹·è´æ„é€ å’Œèµ‹å€¼ã€‘è¿™ä¸€ç« èŠ‚ï¼Œç¬¬ä¸‰æ®µä»£ç é‡Œçš„ç¬¬23è¡Œï¼Œä¹Ÿå°±æ˜¯å…¨ç¯‡ç¬¬ä¸€æ¬¡å‡ºç°swapå‡½æ•°çš„åœ°æ–¹ï¼Œswap(ptr_, rhs.ptr_);è¿™ä¸ªæ˜¯ä¸æ˜¯è¦ç”¨ swap(ptr_, rhs.get()),ä¸çŸ¥é“æ˜¯ä¸æ˜¯å“ªé‡Œçš„è¯­æ³•æˆ‘ä¸æ¸…æ¥šï¼Œå› ä¸ºptr_æ˜¯privateï¼Œæ‰€ä»¥æœ‰æ­¤ç–‘é—®ï¼Œè°¢è°¢è§£ç­”ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481549,"discussion_content":"æˆ‘ä»¬çš„ swap æ˜¯æˆå‘˜å‡½æ•°å•Šï¼Œå½“ç„¶å¯ä»¥è®¿é—® private æ•°æ®æˆå‘˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579081500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168766,"user_name":"å¸ƒæ‹‰å§†","can_delete":false,"product_type":"c1","uid":1311125,"ip_address":"","ucode":"479FF27D73BCAD","user_header":"https://static001.geekbang.org/account/avatar/00/14/01/95/fd09e8a8.jpg","comment_is_top":false,"comment_ctime":1578152490,"is_pvip":false,"replies":[{"id":65502,"content":"è¿™ä¸ªä¸æ˜¯ä»€ä¹ˆç‰¹æ®Šè¯­æ³•ï¼Œå°±æŒ‰ä¸€èˆ¬çš„æ¨å¯¼è§„åˆ™äº†ã€‚å¦‚æœç­‰å·å³è¾¹ä¸æ˜¯ smart_ptrï¼Œåˆæœ‰ä¸€ä¸ªé€‚ç”¨çš„å•å‚æ•°éexplicitæ„é€ å‡½æ•°çš„è¯ï¼Œç¡®å®ä¼šå…ˆæ„é€ å†äº¤æ¢çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578223587,"ip_address":"","comment_id":168766,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"  smart_ptr&amp; operator=(smart_ptr rhs)  \n{   \n rhs.swap(*this);   \n return *this;  \n}\nptr3 = ptr1;\nè€å¸ˆï¼Œè¿™ä¸ªå‚æ•°æŒ‰å€¼ä¼ é€’ã€‚é—®é¢˜ï¼š\nå½“â€œæŒ‰å€¼ä¼ é€’â€çš„æ—¶å€™ï¼Œæ˜¯ä¸€å®šè°ƒç”¨smart_ptrçš„æ‹·è´æ„é€ å‡½æ•°å˜›ï¼Ÿæœ‰æ²¡æœ‰å¯èƒ½è°ƒsmart_ptrçš„æ„é€ å‡½æ•°ï¼ˆécopyéèµ‹å€¼ï¼‰ï¼Ÿå½“ç„¶æˆ‘äº†è§£ï¼Œsmart_ptrçš„æ„é€ å‡½æ•°æ˜¯explicitï¼Œåªèƒ½æ˜¾å¼ä¼ åŸå§‹æŒ‡é’ˆï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°æ„é€ å‡½æ•°ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480327,"discussion_content":"è¿™ä¸ªä¸æ˜¯ä»€ä¹ˆç‰¹æ®Šè¯­æ³•ï¼Œå°±æŒ‰ä¸€èˆ¬çš„æ¨å¯¼è§„åˆ™äº†ã€‚å¦‚æœç­‰å·å³è¾¹ä¸æ˜¯ smart_ptrï¼Œåˆæœ‰ä¸€ä¸ªé€‚ç”¨çš„å•å‚æ•°éexplicitæ„é€ å‡½æ•°çš„è¯ï¼Œç¡®å®ä¼šå…ˆæ„é€ å†äº¤æ¢çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578223587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166100,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1577403364,"is_pvip":false,"replies":[{"id":63320,"content":"å°±æ˜¯å­—é¢æ„æ€å•ŠğŸ˜…ã€‚è¦å¯¹ç€ä»£ç çœ‹ã€‚å¯¹äºå‚æ•°rhsï¼Œå¦‚æœä½ èµ‹å€¼æ—¶ä¼ é€’çš„æ˜¯å³å€¼å¼•ç”¨ï¼Œé‚£å°±å¼•å‘ç§»åŠ¨æ„é€ ï¼Œç»“æœå°±æ˜¯ç§»åŠ¨èµ‹å€¼ã€‚å¦åˆ™ï¼ˆä¼ é€’çš„ä¸æ˜¯å³å€¼ï¼Œä¸€èˆ¬æƒ…å†µå°±æ˜¯å·¦å€¼å¼•ç”¨äº†ï¼‰ï¼Œå°±ä¼šå¼•å‘æ‹·è´æ„é€ ï¼Œç»“æœå°±æ˜¯æ‹·è´èµ‹å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577407689,"ip_address":"","comment_id":166100,"utype":1}],"discussion_count":2,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"&quot;ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚&quot;è¿™å¥è¯æœ‰ç‚¹ç»•ï¼Œè€å¸ˆèƒ½å†è§£é‡Šä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479396,"discussion_content":"å°±æ˜¯å­—é¢æ„æ€å•ŠğŸ˜…ã€‚è¦å¯¹ç€ä»£ç çœ‹ã€‚å¯¹äºå‚æ•°rhsï¼Œå¦‚æœä½ èµ‹å€¼æ—¶ä¼ é€’çš„æ˜¯å³å€¼å¼•ç”¨ï¼Œé‚£å°±å¼•å‘ç§»åŠ¨æ„é€ ï¼Œç»“æœå°±æ˜¯ç§»åŠ¨èµ‹å€¼ã€‚å¦åˆ™ï¼ˆä¼ é€’çš„ä¸æ˜¯å³å€¼ï¼Œä¸€èˆ¬æƒ…å†µå°±æ˜¯å·¦å€¼å¼•ç”¨äº†ï¼‰ï¼Œå°±ä¼šå¼•å‘æ‹·è´æ„é€ ï¼Œç»“æœå°±æ˜¯æ‹·è´èµ‹å€¼ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577407689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013076,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","nickname":"ç‹æ—§ä¸š","note":"","ucode":"A8DEC38430D007","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":103861,"discussion_content":"æ˜¯ä¸æ˜¯è¯´å–å†³äºå‚æ•°ç±»å‹ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼Œèµ°ç§»åŠ¨æ„é€ ;å¦‚æœä¸æ˜¯ï¼Œèµ°æ‹·è´æ„é€ ã€‚å½“ç„¶ï¼Œå› ä¸ºæ²¡æœ‰æä¾›æ‹·è´æ„é€ ï¼Œæ‹·è´æ„é€ è¢«ç¦ç”¨ï¼Œç¼–è¯‘é˜¶æ®µä¹Ÿä¼šæŠ¥é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577403759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165880,"user_name":"å¼ ç‚","can_delete":false,"product_type":"c1","uid":1249512,"ip_address":"","ucode":"E0AFA940BEAC1C","user_header":"https://static001.geekbang.org/account/avatar/00/13/10/e8/172b5915.jpg","comment_is_top":false,"comment_ctime":1577338226,"is_pvip":false,"replies":[{"id":63270,"content":"é¦–å…ˆï¼Œæ„Ÿè°¢ä½ çš„å…³æ³¨å’Œå»ºè®®ã€‚å…·ä½“é—®é¢˜çš„å›ç­”å¦‚ä¸‹ã€‚\n\n1. è¿™æœ‰ç‚¹æ˜¯ä¸ªäººé£æ ¼äº†ã€‚æˆ‘å¹¶ä¸å–œæ¬¢åˆ—ä¸¾ä¸€äºŒä¸‰å››ã€‚å­¦ä¹ çš„å…³é”®ä¹Ÿæ˜¯è¦ç†è§£ï¼Œè€Œä¸æ˜¯æšä¸¾å„ç§å¯èƒ½æ€§ã€‚å°±è·Ÿå­¦å¤–è¯­ä¸åº”è¯¥å»èƒŒè¯­æ³•è§„åˆ™å·®ä¸å¤šæ˜¯ä¸€ä¸ªé“ç†ã€‚\n\n2. å¥½å»ºè®®ï¼Œç¡®å®æœ‰ç‚¹æ­§ä¹‰äº†ã€‚å›å¤´æˆ‘è·Ÿç¼–è¾‘è®¨è®ºä¸€ä¸‹æ€ä¹ˆæ”¹ã€‚\n\n3. è¡Œé•¿å¤ªçŸ­ï¼Œä»£ç ä¸­ä¸é€‚åˆæ”¾å¤§æ®µæ³¨é‡Šï¼Œå¦åˆ™çœ‹ä»£ç æœ¬èº«éœ€è¦ä¸Šä¸‹ç¿»åŠ¨äº†ã€‚å¦å¤–ï¼Œæˆ‘æœŸæœ›è¯»è€…å…ˆå»çœ‹ä¸€ä¸‹ä»£ç ï¼Œè¯•å›¾è‡ªå·±å»ç†è§£ä¸€ä¸‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸‹å­çœ‹åˆ°æˆ‘çš„è®²è§£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577356774,"ip_address":"","comment_id":165880,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"æƒ³ç»™è€å¸ˆæç‚¹å»ºè®®ï¼š\n1ï¼Œæ–‡ç« ä¸­å…³äºæ‹·è´å®ç°é‚£éƒ¨åˆ†æ ‡ä¹¦ï¼Œè€å¸ˆç»™å‡ºäº†å››ä¸ªå¤„ç†çš„å¯èƒ½æ€§ï¼Œæœ‰ç‚¹åƒswich-caseçš„ç»“æ„ï¼Œæ‰€ä»¥æˆ‘å»ºè®®çªå‡ºä¸€ä¸‹è¿™ä¸ªâ€œåˆ—ä¸¾â€ï¼Œæå‡æ–‡ç« é€»è¾‘å±‚æ¬¡ã€‚\næ¯”å¦‚åŠ ä¸Šè¯è¯­â€œç¬¬ä¸€ã€ç¬¬äºŒã€ç¬¬ä¸‰ã€ç¬¬å››â€ã€‚\nä¸¾ä¸ªä¾‹å­ï¼šâ€œç¬¬ä¸€ç§æ–¹æ³•ï¼šæ˜¾ç„¶æ˜¯ç¦æ­¢æ‹·è´â€ã€‚ã€‚ã€‚ã€‚\nâ€œç¬¬å››ç§æ–¹æ³•ï¼Œè¯•è¯•åœ¨æ‹·è´æ—¶è½¬ç§»æŒ‡é’ˆçš„æ‰€æœ‰æƒï¼Ÿâ€ã€‚ã€‚ã€‚ã€‚ã€‚\nè¿™æ ·åœ¨è¯»çš„æ—¶å€™ï¼Œè®©è¯»è€…èƒ½çŸ¥é“è‡ªå·±ä»ç„¶å¤„äºâ€œå¯èƒ½æ€§éå†ä¸­â€ã€‚\n\n2ï¼ŒåŠ é»‘åŠ ç²—çš„â€œç›®å‰è¿™ç§æƒ¯ç”¨æ³•åˆ™ä¿è¯äº†å¼ºå¼‚å¸¸å®‰å…¨æ€§â€é‡Œçš„â€œè¿™ç§â€å¾ˆå®¹æ˜“è¢«è¯»è€…è¯¯ä»¥ä¸ºæŒ‡çš„æ˜¯å‰ä¸€æ®µåŒ…å«if (this != &amp;rhs)åˆ¤æ–­çš„èµ‹å€¼å‡½æ•°ï¼Œè€Œè€å¸ˆæ˜¯æŒ‡çš„åº”è¯¥æ˜¯å‰å‰æ®µé‡Œçš„ä»£ç +å®ç°æè¿°ï¼ˆä¹Ÿå°±æ˜¯ç¬¬å››ç§æ‹·è´å®ç°ï¼‰ã€‚å»ºè®®æŠŠâ€œå¦‚æœä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äºã€‚ã€‚ã€‚â€è¿™ä¸€æ®µæ ‡æ³¨æˆæ³¨è§£æ®µè½ï¼Œæ”¹æˆå¦ä¸€ä¸ªå­—ä½“ï¼Œæµ…è‰²çš„ï¼Œå­—ä½“å°ä¸€å·ï¼›æˆ–è€…æ˜¯æŠŠâ€œç›®å‰è¿™ç§æƒ¯ç”¨æ³•â€æ”¹æˆâ€œè€Œä¸Šè¿°ä»£ç ä¸­çš„å®ç°â€ï¼ˆæˆ–è€…æŠŠä»£ç æ®µè½éƒ½åŠ ä¸ªåºå·æ¥å¼•ç”¨ï¼‰ã€‚\n\n3ï¼Œé’ˆå¯¹ä»£ç çš„è§£é‡Šï¼Œå°½é‡æ”¾åœ¨ä»£ç ä¸­æˆä¸ºæ³¨é‡Šï¼Œè¿™æ ·è¯»è€…å¯ä»¥ä¸€è¾¹çœ‹ä»£ç ä¸€è¾¹çœ‹è§£é‡Šï¼Œæ›´é‡è¦çš„æ˜¯ä¸ç”¨ä¸Šä¸‹æ¥å›ç¿»ç€çœ‹äº†ã€‚ï¼ˆä»£ç è¡Œæ•°å¼•ç”¨æ–¹å¼è¿˜æ˜¯çœ‹ç€ä¸çˆ½å¿«ï¼‰ã€‚å¦å¤–ä»£ç ä¸­å¦‚æœæœ‰è·Ÿæ—§ä»£ç çš„æ¯”è¾ƒï¼Œå°½é‡ä¹ŸæŠŠæ—§ä»£ç ä¹Ÿè´´å‡ºæ¥å¹¶æ³¨é‡Šæ‰ï¼Œè¿™æ ·åŒæ ·ä¹Ÿé¿å…æ¥å›ç¿»ç€çœ‹ã€‚\n\næˆ‘æ˜¯åˆšä¹°çš„è€å¸ˆçš„ä¸“æ ï¼Œçœ‹ç€æœ‰äº›é—®é¢˜å°±æäº†å‡ºæ¥ï¼Œæœ›è€å¸ˆè§è°…~","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479303,"discussion_content":"é¦–å…ˆï¼Œæ„Ÿè°¢ä½ çš„å…³æ³¨å’Œå»ºè®®ã€‚å…·ä½“é—®é¢˜çš„å›ç­”å¦‚ä¸‹ã€‚\n\n1. è¿™æœ‰ç‚¹æ˜¯ä¸ªäººé£æ ¼äº†ã€‚æˆ‘å¹¶ä¸å–œæ¬¢åˆ—ä¸¾ä¸€äºŒä¸‰å››ã€‚å­¦ä¹ çš„å…³é”®ä¹Ÿæ˜¯è¦ç†è§£ï¼Œè€Œä¸æ˜¯æšä¸¾å„ç§å¯èƒ½æ€§ã€‚å°±è·Ÿå­¦å¤–è¯­ä¸åº”è¯¥å»èƒŒè¯­æ³•è§„åˆ™å·®ä¸å¤šæ˜¯ä¸€ä¸ªé“ç†ã€‚\n\n2. å¥½å»ºè®®ï¼Œç¡®å®æœ‰ç‚¹æ­§ä¹‰äº†ã€‚å›å¤´æˆ‘è·Ÿç¼–è¾‘è®¨è®ºä¸€ä¸‹æ€ä¹ˆæ”¹ã€‚\n\n3. è¡Œé•¿å¤ªçŸ­ï¼Œä»£ç ä¸­ä¸é€‚åˆæ”¾å¤§æ®µæ³¨é‡Šï¼Œå¦åˆ™çœ‹ä»£ç æœ¬èº«éœ€è¦ä¸Šä¸‹ç¿»åŠ¨äº†ã€‚å¦å¤–ï¼Œæˆ‘æœŸæœ›è¯»è€…å…ˆå»çœ‹ä¸€ä¸‹ä»£ç ï¼Œè¯•å›¾è‡ªå·±å»ç†è§£ä¸€ä¸‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸‹å­çœ‹åˆ°æˆ‘çš„è®²è§£ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577356774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187039,"user_name":"å®‹å¼º","can_delete":false,"product_type":"c1","uid":1564605,"ip_address":"","ucode":"119A0B00ABDA7B","user_header":"","comment_is_top":false,"comment_ctime":1583997621,"is_pvip":false,"replies":[{"id":72220,"content":"åˆ é™¤å‰é¢é‚£ä¸ªä¼šæ˜¯ä¸ªé”™è¯¯ï¼ˆæˆ‘ä¹ŸçŠ¯è¿‡ï¼‰ã€‚\n\nçœ‹æ–‡ä¸­è¿™æ®µï¼šã€Œéœ€è¦æ³¨æ„ï¼Œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚ã€è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤æä¾›ä¸€ä¸ªï¼ˆé”™è¯¯çš„ç‰ˆæœ¬ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1584021542,"ip_address":"","comment_id":187039,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"è¯·é—®è€å¸ˆï¼š\nsmart_ptr(const smart_ptr&amp; other) noexcept { ... } \nå’Œ\ntemplate &lt;typename U&gt;\nsmart_ptr(const smart_ptr&lt;U&gt;&amp; other) noexcept { ... }\næ˜¯ä¸æ˜¯é‡å¤äº†ï¼Œä¿ç•™åé¢è¿™ç§æ³›å‹å°±ç›´æ¥å¯ä»¥äº†","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486970,"discussion_content":"åˆ é™¤å‰é¢é‚£ä¸ªä¼šæ˜¯ä¸ªé”™è¯¯ï¼ˆæˆ‘ä¹ŸçŠ¯è¿‡ï¼‰ã€‚\n\nçœ‹æ–‡ä¸­è¿™æ®µï¼šã€Œéœ€è¦æ³¨æ„ï¼Œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚ã€è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤æä¾›ä¸€ä¸ªï¼ˆé”™è¯¯çš„ç‰ˆæœ¬ï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584021542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184558,"user_name":"englefly","can_delete":false,"product_type":"c1","uid":1145907,"ip_address":"","ucode":"E3FCF19E618718","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep2gRIticwS6CiatsCiaU4QRjAODKibQevrhSciatrmd90lNIZFxywE9yyZgAxKTmWiaBSH4zZUcRIV46qQ/132","comment_is_top":false,"comment_ctime":1583337379,"is_pvip":false,"replies":[{"id":71419,"content":"æ²¡æœ‰æ”¹s2ã€‚æ”¹çš„æ˜¯s2çš„ä¸€ä¸ªæ‹·è´ã€‚è¿›å…¥å‡½æ•°ä½“æ—¶ï¼Œs2å·²ç»è¢«æ‹·è´æ„é€ äº†ï¼ˆsmart_ptr rhsï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1583387211,"ip_address":"","comment_id":184558,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œå…³äºèµ‹å€¼ =  çš„å®ç°æœ‰ä¸€ä¸ªç–‘é—®ï¼š\nsmart_ptr&amp; \noperator=(smart_ptr rhs) noexcept { \n        rhs.swap(*this); \n        return *this; \n}\n\nå…³äºè¿™ä¸€å¥ï¼šrhs.swap(*this); \nå¦‚æœæ‰§è¡Œ s1=s2ï¼Œ æˆ‘ç†è§£è¿™åº”è¯¥æ”¹å˜s1ï¼Œä½†ä¸ºä»€ä¹ˆè¦æŠŠs2 çš„å†…éƒ¨æŒ‡é’ˆæ›¿æ¢æˆåŸæ¥s1çš„å†…éƒ¨æŒ‡é’ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯è®©s1.ptr_ ä¸ºç©ºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486054,"discussion_content":"æ²¡æœ‰æ”¹s2ã€‚æ”¹çš„æ˜¯s2çš„ä¸€ä¸ªæ‹·è´ã€‚è¿›å…¥å‡½æ•°ä½“æ—¶ï¼Œs2å·²ç»è¢«æ‹·è´æ„é€ äº†ï¼ˆsmart_ptr rhsï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583387211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177180,"user_name":"å‡‰äººã€‚","can_delete":false,"product_type":"c1","uid":1659177,"ip_address":"","ucode":"4DB16004A62015","user_header":"https://static001.geekbang.org/account/avatar/00/19/51/29/24739c58.jpg","comment_is_top":false,"comment_ctime":1581315586,"is_pvip":false,"replies":[{"id":68817,"content":"ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581330689,"ip_address":"","comment_id":177180,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"å¾ˆå¥½ç†è§£ è°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483332,"discussion_content":"ğŸ˜‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581330689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176235,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","comment_is_top":false,"comment_ctime":1580996822,"is_pvip":false,"replies":[{"id":68469,"content":"åˆ†è¡Œæ˜¯å› ä¸ºæ‰‹æœºå±å¹•çš„å®½åº¦é™åˆ¶ã€‚å…¶ä»–ä½ é—®çš„æ˜¯åŒä¸€ä»¶äº‹ï¼Œåœ¨å¦å¤–ä¸€ä¸ªè¯„è®ºä¸‹å›ç­”äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581033894,"ip_address":"","comment_id":176235,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":" æœ‰ç¼–è¯‘é”™è¯¯ï¼ŒåŠ äº†è¿™ä¸¤è¡Œï¼Œä½†æ˜¯æˆ‘å»æ‰ï¼Œç¼–è¯‘è¿è¡ŒåŒæ ·æ˜¯å¥½çš„ã€‚\n  template &lt;typename U&gt;\n  friend class smart_ptr;\n\n  å¦å¤–è¿˜æœ‰ä¸€ä¸ªä»£ç é£æ ¼çš„é—®é¢˜\n  ~smart_ptr()\n  {\n    if (ptr_ &amp;&amp;\n      !shared_count_\n         -&gt;reduce_count()) {\n      delete ptr_;\n      delete shared_count_;\n    }\n  }\n  \nåˆ¤æ–­reduce_count()çš„è¿”å›å€¼æ˜¯ä¸æ˜¯0ï¼ŒæŒ‡é’ˆå’Œå‡½æ•°è°ƒç”¨åˆ†å¼€äº†ä¸¤è¡Œï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹æ€ªæ€ªçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483058,"discussion_content":"åˆ†è¡Œæ˜¯å› ä¸ºæ‰‹æœºå±å¹•çš„å®½åº¦é™åˆ¶ã€‚å…¶ä»–ä½ é—®çš„æ˜¯åŒä¸€ä»¶äº‹ï¼Œåœ¨å¦å¤–ä¸€ä¸ªè¯„è®ºä¸‹å›ç­”äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581033894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176228,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","comment_is_top":false,"comment_ctime":1580995714,"is_pvip":false,"replies":[{"id":68468,"content":"è§æ­£æ–‡ï¼š\n\né”™è¯¯åŸå› æ˜¯æ¨¡æ¿çš„å„ä¸ªå®ä¾‹é—´å¹¶ä¸å¤©ç„¶å°±æœ‰ friend å…³ç³»ï¼Œå› è€Œä¸èƒ½äº’è®¿ç§æœ‰æˆå‘˜ ptr_ å’Œ shared_count_ã€‚æˆ‘ä»¬éœ€è¦åœ¨ smart_ptr çš„å®šä¹‰ä¸­æ˜¾å¼å£°æ˜ï¼š\n  template &lt;typename U&gt;\n  friend class smart_ptr;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581033788,"ip_address":"","comment_id":176228,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"ä»£ç åˆ—è¡¨é‡Œ27è¡Œï¼Œè¿™é‡Œçš„  template &lt;typename U&gt;æ˜¯å¤šä½™çš„å§","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483056,"discussion_content":"è§æ­£æ–‡ï¼š\n\né”™è¯¯åŸå› æ˜¯æ¨¡æ¿çš„å„ä¸ªå®ä¾‹é—´å¹¶ä¸å¤©ç„¶å°±æœ‰ friend å…³ç³»ï¼Œå› è€Œä¸èƒ½äº’è®¿ç§æœ‰æˆå‘˜ ptr_ å’Œ shared_count_ã€‚æˆ‘ä»¬éœ€è¦åœ¨ smart_ptr çš„å®šä¹‰ä¸­æ˜¾å¼å£°æ˜ï¼š\n  template &amp;lt;typename U&amp;gt;\n  friend class smart_ptr;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581033788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174050,"user_name":"super-ck","can_delete":false,"product_type":"c1","uid":1307067,"ip_address":"","ucode":"02F036E53E1130","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ncicjtgbOgxk2V3VWYJQAia7oCycVFr5Zncudb5EYWhQsMte0asAauBDh6ELrJbTwrSnboBpESBibslrcNc5icrAkw/132","comment_is_top":false,"comment_ctime":1579928737,"is_pvip":false,"replies":[{"id":67681,"content":"æ¨¡æ¿çš„å®ä¾‹åŒ–ï¼ˆinstantiationï¼‰ç»“æœç›¸å½“äºç±»ã€‚ä¸åŒçš„å®ä¾‹è·Ÿä¸åŒçš„ç±»ä¸€æ ·ï¼Œä¸èƒ½äº’ç›¸è®¿é—®ç§æœ‰æˆå‘˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1579933727,"ip_address":"","comment_id":174050,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œåœ¨å®Œæ•´ä»£ç 27,28è¡Œï¼Œæœ‰ä¸€ç‚¹ä¸æ‡‚ï¼Œåœ¨ç±»smart_pträ¸­ç”¨çš„å‹å…ƒä¸ºä½•è¿˜æ˜¯smart_ptr","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483056,"discussion_content":"è§æ­£æ–‡ï¼š\n\né”™è¯¯åŸå› æ˜¯æ¨¡æ¿çš„å„ä¸ªå®ä¾‹é—´å¹¶ä¸å¤©ç„¶å°±æœ‰ friend å…³ç³»ï¼Œå› è€Œä¸èƒ½äº’è®¿ç§æœ‰æˆå‘˜ ptr_ å’Œ shared_count_ã€‚æˆ‘ä»¬éœ€è¦åœ¨ smart_ptr çš„å®šä¹‰ä¸­æ˜¾å¼å£°æ˜ï¼š\n  template &amp;lt;typename U&amp;gt;\n  friend class smart_ptr;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581033788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171925,"user_name":"æ†çˆ±ä¸å…³å¿ƒ","can_delete":false,"product_type":"c1","uid":1133580,"ip_address":"","ucode":"A868ACB200C798","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/0c/ada45f25.jpg","comment_is_top":false,"comment_ctime":1579054271,"is_pvip":false,"replies":[{"id":66700,"content":"æˆ‘ä»¬çš„ swap æ˜¯æˆå‘˜å‡½æ•°å•Šï¼Œå½“ç„¶å¯ä»¥è®¿é—® private æ•°æ®æˆå‘˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1579081500,"ip_address":"","comment_id":171925,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œåœ¨ã€æ‹·è´æ„é€ å’Œèµ‹å€¼ã€‘è¿™ä¸€ç« èŠ‚ï¼Œç¬¬ä¸‰æ®µä»£ç é‡Œçš„ç¬¬23è¡Œï¼Œä¹Ÿå°±æ˜¯å…¨ç¯‡ç¬¬ä¸€æ¬¡å‡ºç°swapå‡½æ•°çš„åœ°æ–¹ï¼Œswap(ptr_, rhs.ptr_);è¿™ä¸ªæ˜¯ä¸æ˜¯è¦ç”¨ swap(ptr_, rhs.get()),ä¸çŸ¥é“æ˜¯ä¸æ˜¯å“ªé‡Œçš„è¯­æ³•æˆ‘ä¸æ¸…æ¥šï¼Œå› ä¸ºptr_æ˜¯privateï¼Œæ‰€ä»¥æœ‰æ­¤ç–‘é—®ï¼Œè°¢è°¢è§£ç­”ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482282,"discussion_content":"æ¨¡æ¿çš„å®ä¾‹åŒ–ï¼ˆinstantiationï¼‰ç»“æœç›¸å½“äºç±»ã€‚ä¸åŒçš„å®ä¾‹è·Ÿä¸åŒçš„ç±»ä¸€æ ·ï¼Œä¸èƒ½äº’ç›¸è®¿é—®ç§æœ‰æˆå‘˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579933727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168766,"user_name":"å¸ƒæ‹‰å§†","can_delete":false,"product_type":"c1","uid":1311125,"ip_address":"","ucode":"479FF27D73BCAD","user_header":"https://static001.geekbang.org/account/avatar/00/14/01/95/fd09e8a8.jpg","comment_is_top":false,"comment_ctime":1578152490,"is_pvip":false,"replies":[{"id":65502,"content":"è¿™ä¸ªä¸æ˜¯ä»€ä¹ˆç‰¹æ®Šè¯­æ³•ï¼Œå°±æŒ‰ä¸€èˆ¬çš„æ¨å¯¼è§„åˆ™äº†ã€‚å¦‚æœç­‰å·å³è¾¹ä¸æ˜¯ smart_ptrï¼Œåˆæœ‰ä¸€ä¸ªé€‚ç”¨çš„å•å‚æ•°éexplicitæ„é€ å‡½æ•°çš„è¯ï¼Œç¡®å®ä¼šå…ˆæ„é€ å†äº¤æ¢çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578223587,"ip_address":"","comment_id":168766,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"  smart_ptr&amp; operator=(smart_ptr rhs)  \n{   \n rhs.swap(*this);   \n return *this;  \n}\nptr3 = ptr1;\nè€å¸ˆï¼Œè¿™ä¸ªå‚æ•°æŒ‰å€¼ä¼ é€’ã€‚é—®é¢˜ï¼š\nå½“â€œæŒ‰å€¼ä¼ é€’â€çš„æ—¶å€™ï¼Œæ˜¯ä¸€å®šè°ƒç”¨smart_ptrçš„æ‹·è´æ„é€ å‡½æ•°å˜›ï¼Ÿæœ‰æ²¡æœ‰å¯èƒ½è°ƒsmart_ptrçš„æ„é€ å‡½æ•°ï¼ˆécopyéèµ‹å€¼ï¼‰ï¼Ÿå½“ç„¶æˆ‘äº†è§£ï¼Œsmart_ptrçš„æ„é€ å‡½æ•°æ˜¯explicitï¼Œåªèƒ½æ˜¾å¼ä¼ åŸå§‹æŒ‡é’ˆï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°æ„é€ å‡½æ•°ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481549,"discussion_content":"æˆ‘ä»¬çš„ swap æ˜¯æˆå‘˜å‡½æ•°å•Šï¼Œå½“ç„¶å¯ä»¥è®¿é—® private æ•°æ®æˆå‘˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579081500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166100,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1577403364,"is_pvip":false,"replies":[{"id":63320,"content":"å°±æ˜¯å­—é¢æ„æ€å•ŠğŸ˜…ã€‚è¦å¯¹ç€ä»£ç çœ‹ã€‚å¯¹äºå‚æ•°rhsï¼Œå¦‚æœä½ èµ‹å€¼æ—¶ä¼ é€’çš„æ˜¯å³å€¼å¼•ç”¨ï¼Œé‚£å°±å¼•å‘ç§»åŠ¨æ„é€ ï¼Œç»“æœå°±æ˜¯ç§»åŠ¨èµ‹å€¼ã€‚å¦åˆ™ï¼ˆä¼ é€’çš„ä¸æ˜¯å³å€¼ï¼Œä¸€èˆ¬æƒ…å†µå°±æ˜¯å·¦å€¼å¼•ç”¨äº†ï¼‰ï¼Œå°±ä¼šå¼•å‘æ‹·è´æ„é€ ï¼Œç»“æœå°±æ˜¯æ‹·è´èµ‹å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577407689,"ip_address":"","comment_id":166100,"utype":1}],"discussion_count":2,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"&quot;ç°åœ¨èµ‹å€¼å‡½æ•°çš„è¡Œä¸ºæ˜¯ç§»åŠ¨è¿˜æ˜¯æ‹·è´ï¼Œå®Œå…¨ä¾èµ–äºæ„é€ å‚æ•°æ—¶èµ°çš„æ˜¯ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ã€‚&quot;è¿™å¥è¯æœ‰ç‚¹ç»•ï¼Œè€å¸ˆèƒ½å†è§£é‡Šä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480327,"discussion_content":"è¿™ä¸ªä¸æ˜¯ä»€ä¹ˆç‰¹æ®Šè¯­æ³•ï¼Œå°±æŒ‰ä¸€èˆ¬çš„æ¨å¯¼è§„åˆ™äº†ã€‚å¦‚æœç­‰å·å³è¾¹ä¸æ˜¯ smart_ptrï¼Œåˆæœ‰ä¸€ä¸ªé€‚ç”¨çš„å•å‚æ•°éexplicitæ„é€ å‡½æ•°çš„è¯ï¼Œç¡®å®ä¼šå…ˆæ„é€ å†äº¤æ¢çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578223587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165880,"user_name":"å¼ ç‚","can_delete":false,"product_type":"c1","uid":1249512,"ip_address":"","ucode":"E0AFA940BEAC1C","user_header":"https://static001.geekbang.org/account/avatar/00/13/10/e8/172b5915.jpg","comment_is_top":false,"comment_ctime":1577338226,"is_pvip":false,"replies":[{"id":63270,"content":"é¦–å…ˆï¼Œæ„Ÿè°¢ä½ çš„å…³æ³¨å’Œå»ºè®®ã€‚å…·ä½“é—®é¢˜çš„å›ç­”å¦‚ä¸‹ã€‚\n\n1. è¿™æœ‰ç‚¹æ˜¯ä¸ªäººé£æ ¼äº†ã€‚æˆ‘å¹¶ä¸å–œæ¬¢åˆ—ä¸¾ä¸€äºŒä¸‰å››ã€‚å­¦ä¹ çš„å…³é”®ä¹Ÿæ˜¯è¦ç†è§£ï¼Œè€Œä¸æ˜¯æšä¸¾å„ç§å¯èƒ½æ€§ã€‚å°±è·Ÿå­¦å¤–è¯­ä¸åº”è¯¥å»èƒŒè¯­æ³•è§„åˆ™å·®ä¸å¤šæ˜¯ä¸€ä¸ªé“ç†ã€‚\n\n2. å¥½å»ºè®®ï¼Œç¡®å®æœ‰ç‚¹æ­§ä¹‰äº†ã€‚å›å¤´æˆ‘è·Ÿç¼–è¾‘è®¨è®ºä¸€ä¸‹æ€ä¹ˆæ”¹ã€‚\n\n3. è¡Œé•¿å¤ªçŸ­ï¼Œä»£ç ä¸­ä¸é€‚åˆæ”¾å¤§æ®µæ³¨é‡Šï¼Œå¦åˆ™çœ‹ä»£ç æœ¬èº«éœ€è¦ä¸Šä¸‹ç¿»åŠ¨äº†ã€‚å¦å¤–ï¼Œæˆ‘æœŸæœ›è¯»è€…å…ˆå»çœ‹ä¸€ä¸‹ä»£ç ï¼Œè¯•å›¾è‡ªå·±å»ç†è§£ä¸€ä¸‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸‹å­çœ‹åˆ°æˆ‘çš„è®²è§£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577356774,"ip_address":"","comment_id":165880,"utype":1}],"discussion_count":1,"race_medal":0,"score":14,"product_id":100040501,"comment_content":"æƒ³ç»™è€å¸ˆæç‚¹å»ºè®®ï¼š\n1ï¼Œæ–‡ç« ä¸­å…³äºæ‹·è´å®ç°é‚£éƒ¨åˆ†æ ‡ä¹¦ï¼Œè€å¸ˆç»™å‡ºäº†å››ä¸ªå¤„ç†çš„å¯èƒ½æ€§ï¼Œæœ‰ç‚¹åƒswich-caseçš„ç»“æ„ï¼Œæ‰€ä»¥æˆ‘å»ºè®®çªå‡ºä¸€ä¸‹è¿™ä¸ªâ€œåˆ—ä¸¾â€ï¼Œæå‡æ–‡ç« é€»è¾‘å±‚æ¬¡ã€‚\næ¯”å¦‚åŠ ä¸Šè¯è¯­â€œç¬¬ä¸€ã€ç¬¬äºŒã€ç¬¬ä¸‰ã€ç¬¬å››â€ã€‚\nä¸¾ä¸ªä¾‹å­ï¼šâ€œç¬¬ä¸€ç§æ–¹æ³•ï¼šæ˜¾ç„¶æ˜¯ç¦æ­¢æ‹·è´â€ã€‚ã€‚ã€‚ã€‚\nâ€œç¬¬å››ç§æ–¹æ³•ï¼Œè¯•è¯•åœ¨æ‹·è´æ—¶è½¬ç§»æŒ‡é’ˆçš„æ‰€æœ‰æƒï¼Ÿâ€ã€‚ã€‚ã€‚ã€‚ã€‚\nè¿™æ ·åœ¨è¯»çš„æ—¶å€™ï¼Œè®©è¯»è€…èƒ½çŸ¥é“è‡ªå·±ä»ç„¶å¤„äºâ€œå¯èƒ½æ€§éå†ä¸­â€ã€‚\n\n2ï¼ŒåŠ é»‘åŠ ç²—çš„â€œç›®å‰è¿™ç§æƒ¯ç”¨æ³•åˆ™ä¿è¯äº†å¼ºå¼‚å¸¸å®‰å…¨æ€§â€é‡Œçš„â€œè¿™ç§â€å¾ˆå®¹æ˜“è¢«è¯»è€…è¯¯ä»¥ä¸ºæŒ‡çš„æ˜¯å‰ä¸€æ®µåŒ…å«if (this != &amp;rhs)åˆ¤æ–­çš„èµ‹å€¼å‡½æ•°ï¼Œè€Œè€å¸ˆæ˜¯æŒ‡çš„åº”è¯¥æ˜¯å‰å‰æ®µé‡Œçš„ä»£ç +å®ç°æè¿°ï¼ˆä¹Ÿå°±æ˜¯ç¬¬å››ç§æ‹·è´å®ç°ï¼‰ã€‚å»ºè®®æŠŠâ€œå¦‚æœä½ å­¦åˆ°çš„èµ‹å€¼å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼äºã€‚ã€‚ã€‚â€è¿™ä¸€æ®µæ ‡æ³¨æˆæ³¨è§£æ®µè½ï¼Œæ”¹æˆå¦ä¸€ä¸ªå­—ä½“ï¼Œæµ…è‰²çš„ï¼Œå­—ä½“å°ä¸€å·ï¼›æˆ–è€…æ˜¯æŠŠâ€œç›®å‰è¿™ç§æƒ¯ç”¨æ³•â€æ”¹æˆâ€œè€Œä¸Šè¿°ä»£ç ä¸­çš„å®ç°â€ï¼ˆæˆ–è€…æŠŠä»£ç æ®µè½éƒ½åŠ ä¸ªåºå·æ¥å¼•ç”¨ï¼‰ã€‚\n\n3ï¼Œé’ˆå¯¹ä»£ç çš„è§£é‡Šï¼Œå°½é‡æ”¾åœ¨ä»£ç ä¸­æˆä¸ºæ³¨é‡Šï¼Œè¿™æ ·è¯»è€…å¯ä»¥ä¸€è¾¹çœ‹ä»£ç ä¸€è¾¹çœ‹è§£é‡Šï¼Œæ›´é‡è¦çš„æ˜¯ä¸ç”¨ä¸Šä¸‹æ¥å›ç¿»ç€çœ‹äº†ã€‚ï¼ˆä»£ç è¡Œæ•°å¼•ç”¨æ–¹å¼è¿˜æ˜¯çœ‹ç€ä¸çˆ½å¿«ï¼‰ã€‚å¦å¤–ä»£ç ä¸­å¦‚æœæœ‰è·Ÿæ—§ä»£ç çš„æ¯”è¾ƒï¼Œå°½é‡ä¹ŸæŠŠæ—§ä»£ç ä¹Ÿè´´å‡ºæ¥å¹¶æ³¨é‡Šæ‰ï¼Œè¿™æ ·åŒæ ·ä¹Ÿé¿å…æ¥å›ç¿»ç€çœ‹ã€‚\n\næˆ‘æ˜¯åˆšä¹°çš„è€å¸ˆçš„ä¸“æ ï¼Œçœ‹ç€æœ‰äº›é—®é¢˜å°±æäº†å‡ºæ¥ï¼Œæœ›è€å¸ˆè§è°…~","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479396,"discussion_content":"å°±æ˜¯å­—é¢æ„æ€å•ŠğŸ˜…ã€‚è¦å¯¹ç€ä»£ç çœ‹ã€‚å¯¹äºå‚æ•°rhsï¼Œå¦‚æœä½ èµ‹å€¼æ—¶ä¼ é€’çš„æ˜¯å³å€¼å¼•ç”¨ï¼Œé‚£å°±å¼•å‘ç§»åŠ¨æ„é€ ï¼Œç»“æœå°±æ˜¯ç§»åŠ¨èµ‹å€¼ã€‚å¦åˆ™ï¼ˆä¼ é€’çš„ä¸æ˜¯å³å€¼ï¼Œä¸€èˆ¬æƒ…å†µå°±æ˜¯å·¦å€¼å¼•ç”¨äº†ï¼‰ï¼Œå°±ä¼šå¼•å‘æ‹·è´æ„é€ ï¼Œç»“æœå°±æ˜¯æ‹·è´èµ‹å€¼ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577407689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013076,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","nickname":"ç‹æ—§ä¸š","note":"","ucode":"A8DEC38430D007","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":103861,"discussion_content":"æ˜¯ä¸æ˜¯è¯´å–å†³äºå‚æ•°ç±»å‹ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼Œèµ°ç§»åŠ¨æ„é€ ;å¦‚æœä¸æ˜¯ï¼Œèµ°æ‹·è´æ„é€ ã€‚å½“ç„¶ï¼Œå› ä¸ºæ²¡æœ‰æä¾›æ‹·è´æ„é€ ï¼Œæ‹·è´æ„é€ è¢«ç¦ç”¨ï¼Œç¼–è¯‘é˜¶æ®µä¹Ÿä¼šæŠ¥é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577403759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164965,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1577117296,"is_pvip":false,"replies":[{"id":62941,"content":"èµ‹å€¼å°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä¹‹å‰çš„å¯¹è±¡å¼•ç”¨è®¡æ•°å˜é›¶çš„è¯ï¼Œå°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577181646,"ip_address":"","comment_id":164965,"utype":1}],"discussion_count":2,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬ç°åœ¨ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæŒ‡å‘äº†ä¸€å—åŠ¨æ€å†…å­˜ã€‚\næ¯”å¦‚:smart_ptr&lt;int&gt; test_ptr(new int);\né—®é¢˜:é‚£æˆ‘å¦‚ä½•å†æ¬¡è®©test_ptræŒ‡å‘å¦ä¸€å—intå‹åŠ¨æ€å†…å­˜å‘€ï¼Ÿ\nä¹Ÿå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä¸€å¯¹å¤š?(Aæ—¶åˆ»æŒ‡å‘ä¸€å—å†…å­˜ï¼ŒBæ—¶åˆ»æŒ‡å‘å¦ä¸€å—å†…å­˜)\nè°¢è°¢è€å¸ˆçš„è§£ç­”","like_count":0},{"had_liked":false,"id":164962,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1577116819,"is_pvip":false,"replies":[{"id":62940,"content":"å°±æ˜¯æ™®é€šæŒ‡é’ˆï¼Œç›¸å¯¹æ™ºèƒ½æŒ‡é’ˆè€Œè¨€ã€‚ä¸€èˆ¬çš„ä»£ç åº”å½“åªä½¿ç”¨ unique_ptrã€shared_ptr ä¹‹ç±»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577181561,"ip_address":"","comment_id":164962,"utype":1}],"discussion_count":2,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä»€ä¹ˆæ˜¯&quot;è£¸æŒ‡é’ˆ&quot;çš„å®šä¹‰å‘€ï¼Ÿ\næŸ¥äº†ä¸‹ç½‘ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°å¤ªæ˜ç¡®çš„å®šä¹‰ğŸ˜‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478971,"discussion_content":"å°±æ˜¯æ™®é€šæŒ‡é’ˆï¼Œç›¸å¯¹æ™ºèƒ½æŒ‡é’ˆè€Œè¨€ã€‚ä¸€èˆ¬çš„ä»£ç åº”å½“åªä½¿ç”¨ unique_ptrã€shared_ptr ä¹‹ç±»ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577181561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98682,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577181722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163827,"user_name":"æš’","can_delete":false,"product_type":"c1","uid":1547048,"ip_address":"","ucode":"9C956F418C66BB","user_header":"https://static001.geekbang.org/account/avatar/00/17/9b/28/9d89de4d.jpg","comment_is_top":false,"comment_ctime":1576808637,"is_pvip":false,"replies":[{"id":62311,"content":"ä½ è¯•éªŒä¸€ä¸‹å°±èƒ½çœ‹åˆ°çš„ã€‚\n\næœ¬è´¨ä¸Šï¼Œå¯¹ä¸€ä¸ªå†…å­˜åŒºåŸŸç”Ÿæˆä¸€ä¸ªæŒ‡é’ˆï¼Œç„¶åæŒ‡é’ˆè¢«å¤åˆ¶ï¼Œä¸¤ä¸ªå¯¹è±¡ææ„éƒ½å¯¹è¿™ä¸ªæŒ‡é’ˆæ‰§è¡Œ deleteï¼Œæ‰€ä»¥ delete äº†ä¸¤æ¬¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576819049,"ip_address":"","comment_id":163827,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"ä½œè€…å¤§å¤§ï¼Œsmart_ptr&lt;shape&gt; ptr2{ptr1}; åœ¨ç¼–è¯‘æ—¶ä¸ä¼šå‡ºé”™ï¼Œä½†åœ¨è¿è¡Œæ—¶å´ä¼šæœ‰æœªå®šä¹‰è¡Œä¸ºâ€”â€”ç”±äºä¼šå¯¹åŒä¸€å†…å­˜é‡Šæ”¾ä¸¤æ¬¡ã€‚è¿™å¥è¯æˆ‘çœ‹äº†å¥½å¤šééƒ½æ²¡æœ‰æ‡‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478971,"discussion_content":"å°±æ˜¯æ™®é€šæŒ‡é’ˆï¼Œç›¸å¯¹æ™ºèƒ½æŒ‡é’ˆè€Œè¨€ã€‚ä¸€èˆ¬çš„ä»£ç åº”å½“åªä½¿ç”¨ unique_ptrã€shared_ptr ä¹‹ç±»ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577181561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98682,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577181722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161771,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1576322256,"is_pvip":false,"replies":[{"id":61639,"content":"ä¸éœ€è¦ã€‚C++é‡Œé¢ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„é»˜è®¤æä¾›æœ‰äº›å¤æ‚çš„è§„åˆ™ï¼Œåœ¨ç¬¬ 9 è®²é‡Œæœ‰æåˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576389488,"ip_address":"","comment_id":161771,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Œçœ‹åˆ°æ‚¨å¤šæ·»åŠ ä¸€ä¸ªä¸å¸¦æ¨¡æ¿çš„æ‹·è´æ„é€ ï¼Œç›®çš„æ˜¯é˜²æ­¢ç¼–è¯‘å™¨é»˜è®¤ç»™çš„æ‹·è´æ„é€ ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç»™å®šä¸€ä¸ªä¸å¸¦å‚æ•°çš„ç§»åŠ¨æ„é€ ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥ç¦æ­¢ç¼–è¯‘å™¨çš„è¡Œä¸ºï¼Œä¸çŸ¥é“è¯´å¾—å¯¹ä¸ï¼Œæœ›è€å¸ˆæŒ‡ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477851,"discussion_content":"ä¸éœ€è¦ã€‚C++é‡Œé¢ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„é»˜è®¤æä¾›æœ‰äº›å¤æ‚çš„è§„åˆ™ï¼Œåœ¨ç¬¬ 9 è®²é‡Œæœ‰æåˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576389488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161619,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1576250610,"is_pvip":false,"replies":[{"id":61595,"content":"æˆ‘å½“ç„¶å°è¯•è¿‡ç¦ç”¨ç³»ç»Ÿçš„æ‹·è´æ„é€ å‡½æ•°çš„ï¼Œå‘ç°ä¸å¯è¡Œæ‰ç”¨ç°åœ¨çš„æ–¹æ³•çš„ã€‚\n\nå¯¹äºä½ çš„ 2 çš„æƒ…å†µï¼Œä¼šå‡ºç°å¦‚æœåªæœ‰å·¦å€¼å¼•ç”¨ï¼Œå°±æ²¡æ³•è¿›è¡Œæ‹·è´æ„é€ çš„æƒ…å†µã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä¸å†™ç”¨é const å·¦å€¼å¼•ç”¨çš„æ‹·è´æ„é€ å‡½æ•°â€”â€”é‚£æ„å‘³ç€å°±æ˜¯åƒ auto_ptr ä¸€æ ·çš„é‡è›®ï¼Œæˆ–è€… const ä¸æ­£ç¡®äº†â€¦â€¦\n\nçœŸå®çš„ä»£ç é‡Œï¼Œæˆ‘çš„æ‹·è´æ„é€ æ°¸è¿œæ˜¯ç”¨ const å·¦å€¼å¼•ç”¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576313889,"ip_address":"","comment_id":161619,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºä¸ºä»€ä¹ˆå®šä¹‰äº†æ³›å‹æ‹·è´æ„é€ å‡½æ•°ï¼Œè¿˜æœ‰å®šä¹‰éæ³›å‹æ„é€ å‡½æ•°çš„é—®é¢˜ï¼Œçœ‹åˆ°ä½ çš„å›ç­”å¾ˆæ”¶ç›Šã€‚å¦å¤–ï¼Œåˆæƒ³åˆ°ï¼Œå¦‚æœæ˜¯ä¸ºäº†é¿å…è°ƒç”¨ç¼–è¯‘å™¨ç”Ÿæˆçš„éæ³›å‹æ‹·è´æ„é€ å‡½æ•°ï¼Œé‚£å¯ä¸å¯ä»¥ç›´æ¥æ˜¾å¼åœ°æŠŠè¿™ä¸ªå‡½æ•° delete æ‰ï¼Œæ‰€ä»¥åšäº†å‡ ä¸ªè¯•éªŒï¼Œå¯¹ç»“æœæœ‰ç‚¹ç–‘æƒ‘ï¼š\næœ‰å¦‚ä¸‹ä¸¤è¡Œä»£ç \nsmart_ptr&lt;shape&gt; p1(new shape());\nsmart_ptr&lt;shape&gt; p2(p1);\n1ï¼Œç›´æ¥ smart_ptr(const smart_ptr&amp; other) = deleteï¼Œç¼–è¯‘æŠ¥é”™ï¼Œuse of deleted function\n2ï¼Œsmart_ptr(const smart_ptr&amp; other) = delete çš„åŒæ—¶ï¼Œå®šä¹‰ smart_ptr(smart_ptr&amp; other) ç¼–è¯‘é€šè¿‡ï¼Œç»“æœæ­£ç¡®\n3ï¼Œsmart_ptr(smart_ptr&amp; other) = delete çš„åŒæ—¶ï¼Œå®šä¹‰smart_ptr(const smart_ptr&amp; other)ï¼Œç¼–è¯‘æŠ¥é”™ï¼Œuse of deleted function\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477786,"discussion_content":"æˆ‘å½“ç„¶å°è¯•è¿‡ç¦ç”¨ç³»ç»Ÿçš„æ‹·è´æ„é€ å‡½æ•°çš„ï¼Œå‘ç°ä¸å¯è¡Œæ‰ç”¨ç°åœ¨çš„æ–¹æ³•çš„ã€‚\n\nå¯¹äºä½ çš„ 2 çš„æƒ…å†µï¼Œä¼šå‡ºç°å¦‚æœåªæœ‰å·¦å€¼å¼•ç”¨ï¼Œå°±æ²¡æ³•è¿›è¡Œæ‹·è´æ„é€ çš„æƒ…å†µã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä¸å†™ç”¨é const å·¦å€¼å¼•ç”¨çš„æ‹·è´æ„é€ å‡½æ•°â€”â€”é‚£æ„å‘³ç€å°±æ˜¯åƒ auto_ptr ä¸€æ ·çš„é‡è›®ï¼Œæˆ–è€… const ä¸æ­£ç¡®äº†â€¦â€¦\n\nçœŸå®çš„ä»£ç é‡Œï¼Œæˆ‘çš„æ‹·è´æ„é€ æ°¸è¿œæ˜¯ç”¨ const å·¦å€¼å¼•ç”¨çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576313889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161233,"user_name":"Alice","can_delete":false,"product_type":"c1","uid":1725046,"ip_address":"","ucode":"F0EDC16AC27088","user_header":"https://static001.geekbang.org/account/avatar/00/1a/52/76/7fb4a7a9.jpg","comment_is_top":false,"comment_ctime":1576152800,"is_pvip":false,"replies":[{"id":61480,"content":"è¿™äº›æ˜¯åŸºæœ¬æŠ€å·§ï¼Œå†™è‡ªå·±çš„ç±»çš„æ—¶å€™åŸºæœ¬ä¸Šéƒ½ç”¨å¾—åˆ°å§â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576168489,"ip_address":"","comment_id":161233,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ ï¼Œè¿™ä¸€èŠ‚å†…å®¹å†™çš„å¾ˆæœ‰æ„æ€å‘¢ï¼è®©äººå¿ä¸ä½ä¸€å£æ°”è¯»å®Œå“ˆå“ˆğŸ˜„ã€‚å¤§ä½“æ„æ€æ˜¯ç†è§£äº†ï¼Œä¸è¿‡ä¸€äº›ç»†èŠ‚è¿˜è¦åå¤å¤šä½“ä¼šç¢ç£¨ã€‚æƒ³é—®è€å¸ˆä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬è¿™èŠ‚è¯¾è®²çš„è¿™å‡ ä¸ªç‚¹çš„åº”ç”¨åœºæ™¯éƒ½æœ‰å“ªäº›å‘¢ï¼Ÿéº»çƒ¦è€å¸ˆä¸¾å‡ ä¸ªä¾‹å­å§ï¼Œæˆ‘è§‰å¾—æœ‰åœºæ™¯ä¾‹å­ç†è§£èµ·æ¥ä»£å…¥æ„Ÿä¼šå¼ºä¸€ç‚¹ï¼Œæˆ–è€…è¯´ä»¥åé‡åˆ°ç±»ä¼¼åœºæ™¯ä¼šæƒ³èµ·æ¥ç”¨è¿™äº›ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477650,"discussion_content":"è¿™äº›æ˜¯åŸºæœ¬æŠ€å·§ï¼Œå†™è‡ªå·±çš„ç±»çš„æ—¶å€™åŸºæœ¬ä¸Šéƒ½ç”¨å¾—åˆ°å§â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576168489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159895,"user_name":"å‡Œäº‘","can_delete":false,"product_type":"c1","uid":1326161,"ip_address":"","ucode":"C5D3665C4FED40","user_header":"https://static001.geekbang.org/account/avatar/00/14/3c/51/c324a7de.jpg","comment_is_top":false,"comment_ctime":1575819903,"is_pvip":false,"replies":[{"id":61064,"content":"å¼•ç”¨è®¡æ•°çš„æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥å•åˆ—ä¸€ä¸‹ã€‚å…¶ä»–çš„æŠŠå°‘æ•°å‡ æ®µä»£ç ä¸€æ‹¼å°±è¡Œå•¦ã€‚\n\nå¦å¤–ï¼Œä»å®ç”¨çš„è§’åº¦ï¼Œä¸è¦ç”¨æˆ‘çš„ä»£ç ã€‚è¿™æ˜¯ä¸ºè¯¾ç¨‹ç¼–å†™çš„ï¼Œæ²¡æœ‰ç»è¿‡é«˜å¼ºåº¦çš„æµ‹è¯•ã€‚ç”¨ä½ çš„ç¼–è¯‘å™¨è‡ªå¸¦çš„æ›´å¥å£®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575855341,"ip_address":"","comment_id":159895,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"å¾ˆå¥½,å»ºè®®auto_ptr, unique_ptrçš„å®ç°ä¹Ÿèƒ½åƒæœ€åçš„shared_ptré‚£æ ·æ•´ç†ä¸‹,è¿™æ ·å°±æ›´å®Œç¾äº†.","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477202,"discussion_content":"å¼•ç”¨è®¡æ•°çš„æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥å•åˆ—ä¸€ä¸‹ã€‚å…¶ä»–çš„æŠŠå°‘æ•°å‡ æ®µä»£ç ä¸€æ‹¼å°±è¡Œå•¦ã€‚\n\nå¦å¤–ï¼Œä»å®ç”¨çš„è§’åº¦ï¼Œä¸è¦ç”¨æˆ‘çš„ä»£ç ã€‚è¿™æ˜¯ä¸ºè¯¾ç¨‹ç¼–å†™çš„ï¼Œæ²¡æœ‰ç»è¿‡é«˜å¼ºåº¦çš„æµ‹è¯•ã€‚ç”¨ä½ çš„ç¼–è¯‘å™¨è‡ªå¸¦çš„æ›´å¥å£®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575855341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159430,"user_name":"èµ–è·‘è·‘","can_delete":false,"product_type":"c1","uid":1257805,"ip_address":"","ucode":"FF60F24C0ADD49","user_header":"https://static001.geekbang.org/account/avatar/00/13/31/4d/61a9792b.jpg","comment_is_top":false,"comment_ctime":1575621899,"is_pvip":false,"replies":[{"id":60949,"content":"ä¸€ä¸ªæ™®é€šæŒ‡é’ˆå¯æ²¡æœ‰å³å€¼å¼•ç”¨çš„é‡è½½å•Šã€‚å¿…é¡»æ˜¯å¯¹å¯¹è±¡ï¼ˆéPODï¼‰ã€æœ‰å³å€¼å¼•ç”¨çš„é‡è½½ï¼Œç§»åŠ¨æ‰æœ‰æ„ä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575632225,"ip_address":"","comment_id":159430,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"template &lt;typename U&gt;\nsmart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\n{\nptr_ = other.ptr_;   &#47;&#47;è¿™ä¸€è¡Œä¸ºä»€ä¹ˆä¸æ˜¯ ptr_ = std::move(other.ptr_);\n\n}","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477055,"discussion_content":"ä¸€ä¸ªæ™®é€šæŒ‡é’ˆå¯æ²¡æœ‰å³å€¼å¼•ç”¨çš„é‡è½½å•Šã€‚å¿…é¡»æ˜¯å¯¹å¯¹è±¡ï¼ˆéPODï¼‰ã€æœ‰å³å€¼å¼•ç”¨çš„é‡è½½ï¼Œç§»åŠ¨æ‰æœ‰æ„ä¹‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575632225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159107,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1575538846,"is_pvip":false,"replies":[{"id":60871,"content":"æ’é™¤ this ä¸èƒ½ä½œä¸ºå˜é‡åçš„é—®é¢˜ï¼Œä½ è¿™ä¹ˆå†™çš„è¯ï¼Œç¡®å®åªèƒ½å…ˆç”Ÿæˆä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼ˆä¸€èˆ¬ä¸è¯´ç”Ÿæˆå³å€¼ï¼‰ï¼Œç„¶åè°ƒç”¨èµ‹å€¼å‡½æ•°ã€‚ç”±äºæˆ‘ç›®å‰å®ç°çš„èµ‹å€¼å‡½æ•°å¹¶ä¸ä½¿ç”¨å³å€¼å¼•ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªå³å€¼ä¼šè¢«ç”¨æ¥è°ƒç”¨æ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç„¶åè¿›å…¥èµ‹å€¼å‡½æ•°ï¼Œä½¿ç”¨äº¤æ¢æ¥å¾—åˆ°ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575551579,"ip_address":"","comment_id":159107,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå†é—®ä¸€ä¸‹ï¼Œæœ€åè¿™4ä¸ªæŒ‡é’ˆç±»å‹è½¬æ¢å‡½æ•°**_pointer_cast, è¿”å›çš„éƒ½æ˜¯å€¼ï¼Œé‚£æ˜¯ä¸æ˜¯ä»£è¡¨å¦‚æœæŒ‰ç…§å¦‚ä¸‹æ–¹å¼è°ƒç”¨è¿™ä¸ªå‡½æ•°:\nsmart_ptr&lt;T&gt; this;\nsmart_ptr&lt;U&gt; other(ptr);\nthis = dynamic_pointer_cast&lt;T&gt;(other)\nå…ˆè¦ç”Ÿæˆä¸€ä¸ªå³å€¼ï¼Œå†è°ƒç”¨å‚æ•°ä¸ºå³å€¼å¼•ç”¨çš„èµ‹å€¼å‡½æ•°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476952,"discussion_content":"æ’é™¤ this ä¸èƒ½ä½œä¸ºå˜é‡åçš„é—®é¢˜ï¼Œä½ è¿™ä¹ˆå†™çš„è¯ï¼Œç¡®å®åªèƒ½å…ˆç”Ÿæˆä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼ˆä¸€èˆ¬ä¸è¯´ç”Ÿæˆå³å€¼ï¼‰ï¼Œç„¶åè°ƒç”¨èµ‹å€¼å‡½æ•°ã€‚ç”±äºæˆ‘ç›®å‰å®ç°çš„èµ‹å€¼å‡½æ•°å¹¶ä¸ä½¿ç”¨å³å€¼å¼•ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªå³å€¼ä¼šè¢«ç”¨æ¥è°ƒç”¨æ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç„¶åè¿›å…¥èµ‹å€¼å‡½æ•°ï¼Œä½¿ç”¨äº¤æ¢æ¥å¾—åˆ°ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575551579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158903,"user_name":"æˆ‘ä¸ç”Ÿäº§bugï¼Œæˆ‘åªæ˜¯bugçš„æ¬è¿å·¥","can_delete":false,"product_type":"c1","uid":1757474,"ip_address":"","ucode":"C70AEAF23665C8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKEyibia4u3kq3bia4ZiaARfvj7fRqyAN9DIqaQytdy5IsPsfpl9UCdgiaF88tTyia5w1dBynyzkatDt2A/132","comment_is_top":false,"comment_ctime":1575474922,"is_pvip":false,"replies":[{"id":60824,"content":"å¯ä»¥åŠ ã€‚ä¸åŠ æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚åˆ¤æ–­å…¨æ˜¯åŸºäº ptr_ çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575510316,"ip_address":"","comment_id":158903,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"smart_ptr çš„ç§»åŠ¨æ„é€ æ˜¯ä¸æ˜¯å°‘äº†other.shared_count = nullptr ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476888,"discussion_content":"å¯ä»¥åŠ ã€‚ä¸åŠ æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚åˆ¤æ–­å…¨æ˜¯åŸºäº ptr_ çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575510316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164965,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1577117296,"is_pvip":false,"replies":[{"id":62941,"content":"èµ‹å€¼å°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä¹‹å‰çš„å¯¹è±¡å¼•ç”¨è®¡æ•°å˜é›¶çš„è¯ï¼Œå°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577181646,"ip_address":"","comment_id":164965,"utype":1}],"discussion_count":2,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬ç°åœ¨ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæŒ‡å‘äº†ä¸€å—åŠ¨æ€å†…å­˜ã€‚\næ¯”å¦‚:smart_ptr&lt;int&gt; test_ptr(new int);\né—®é¢˜:é‚£æˆ‘å¦‚ä½•å†æ¬¡è®©test_ptræŒ‡å‘å¦ä¸€å—intå‹åŠ¨æ€å†…å­˜å‘€ï¼Ÿ\nä¹Ÿå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä¸€å¯¹å¤š?(Aæ—¶åˆ»æŒ‡å‘ä¸€å—å†…å­˜ï¼ŒBæ—¶åˆ»æŒ‡å‘å¦ä¸€å—å†…å­˜)\nè°¢è°¢è€å¸ˆçš„è§£ç­”","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478972,"discussion_content":"èµ‹å€¼å°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä¹‹å‰çš„å¯¹è±¡å¼•ç”¨è®¡æ•°å˜é›¶çš„è¯ï¼Œå°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577181646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98724,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆï¼Œæˆ‘å†æƒ³æƒ³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577183465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164962,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1577116819,"is_pvip":false,"replies":[{"id":62940,"content":"å°±æ˜¯æ™®é€šæŒ‡é’ˆï¼Œç›¸å¯¹æ™ºèƒ½æŒ‡é’ˆè€Œè¨€ã€‚ä¸€èˆ¬çš„ä»£ç åº”å½“åªä½¿ç”¨ unique_ptrã€shared_ptr ä¹‹ç±»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577181561,"ip_address":"","comment_id":164962,"utype":1}],"discussion_count":2,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä»€ä¹ˆæ˜¯&quot;è£¸æŒ‡é’ˆ&quot;çš„å®šä¹‰å‘€ï¼Ÿ\næŸ¥äº†ä¸‹ç½‘ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°å¤ªæ˜ç¡®çš„å®šä¹‰ğŸ˜‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478972,"discussion_content":"èµ‹å€¼å°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä¹‹å‰çš„å¯¹è±¡å¼•ç”¨è®¡æ•°å˜é›¶çš„è¯ï¼Œå°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577181646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98724,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆï¼Œæˆ‘å†æƒ³æƒ³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577183465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163827,"user_name":"æš’","can_delete":false,"product_type":"c1","uid":1547048,"ip_address":"","ucode":"9C956F418C66BB","user_header":"https://static001.geekbang.org/account/avatar/00/17/9b/28/9d89de4d.jpg","comment_is_top":false,"comment_ctime":1576808637,"is_pvip":false,"replies":[{"id":62311,"content":"ä½ è¯•éªŒä¸€ä¸‹å°±èƒ½çœ‹åˆ°çš„ã€‚\n\næœ¬è´¨ä¸Šï¼Œå¯¹ä¸€ä¸ªå†…å­˜åŒºåŸŸç”Ÿæˆä¸€ä¸ªæŒ‡é’ˆï¼Œç„¶åæŒ‡é’ˆè¢«å¤åˆ¶ï¼Œä¸¤ä¸ªå¯¹è±¡ææ„éƒ½å¯¹è¿™ä¸ªæŒ‡é’ˆæ‰§è¡Œ deleteï¼Œæ‰€ä»¥ delete äº†ä¸¤æ¬¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576819049,"ip_address":"","comment_id":163827,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"ä½œè€…å¤§å¤§ï¼Œsmart_ptr&lt;shape&gt; ptr2{ptr1}; åœ¨ç¼–è¯‘æ—¶ä¸ä¼šå‡ºé”™ï¼Œä½†åœ¨è¿è¡Œæ—¶å´ä¼šæœ‰æœªå®šä¹‰è¡Œä¸ºâ€”â€”ç”±äºä¼šå¯¹åŒä¸€å†…å­˜é‡Šæ”¾ä¸¤æ¬¡ã€‚è¿™å¥è¯æˆ‘çœ‹äº†å¥½å¤šééƒ½æ²¡æœ‰æ‡‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478545,"discussion_content":"ä½ è¯•éªŒä¸€ä¸‹å°±èƒ½çœ‹åˆ°çš„ã€‚\n\næœ¬è´¨ä¸Šï¼Œå¯¹ä¸€ä¸ªå†…å­˜åŒºåŸŸç”Ÿæˆä¸€ä¸ªæŒ‡é’ˆï¼Œç„¶åæŒ‡é’ˆè¢«å¤åˆ¶ï¼Œä¸¤ä¸ªå¯¹è±¡ææ„éƒ½å¯¹è¿™ä¸ªæŒ‡é’ˆæ‰§è¡Œ deleteï¼Œæ‰€ä»¥ delete äº†ä¸¤æ¬¡ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576819049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161771,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1576322256,"is_pvip":false,"replies":[{"id":61639,"content":"ä¸éœ€è¦ã€‚C++é‡Œé¢ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„é»˜è®¤æä¾›æœ‰äº›å¤æ‚çš„è§„åˆ™ï¼Œåœ¨ç¬¬ 9 è®²é‡Œæœ‰æåˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576389488,"ip_address":"","comment_id":161771,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Œçœ‹åˆ°æ‚¨å¤šæ·»åŠ ä¸€ä¸ªä¸å¸¦æ¨¡æ¿çš„æ‹·è´æ„é€ ï¼Œç›®çš„æ˜¯é˜²æ­¢ç¼–è¯‘å™¨é»˜è®¤ç»™çš„æ‹·è´æ„é€ ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç»™å®šä¸€ä¸ªä¸å¸¦å‚æ•°çš„ç§»åŠ¨æ„é€ ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥ç¦æ­¢ç¼–è¯‘å™¨çš„è¡Œä¸ºï¼Œä¸çŸ¥é“è¯´å¾—å¯¹ä¸ï¼Œæœ›è€å¸ˆæŒ‡ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478545,"discussion_content":"ä½ è¯•éªŒä¸€ä¸‹å°±èƒ½çœ‹åˆ°çš„ã€‚\n\næœ¬è´¨ä¸Šï¼Œå¯¹ä¸€ä¸ªå†…å­˜åŒºåŸŸç”Ÿæˆä¸€ä¸ªæŒ‡é’ˆï¼Œç„¶åæŒ‡é’ˆè¢«å¤åˆ¶ï¼Œä¸¤ä¸ªå¯¹è±¡ææ„éƒ½å¯¹è¿™ä¸ªæŒ‡é’ˆæ‰§è¡Œ deleteï¼Œæ‰€ä»¥ delete äº†ä¸¤æ¬¡ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576819049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161619,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1576250610,"is_pvip":false,"replies":[{"id":61595,"content":"æˆ‘å½“ç„¶å°è¯•è¿‡ç¦ç”¨ç³»ç»Ÿçš„æ‹·è´æ„é€ å‡½æ•°çš„ï¼Œå‘ç°ä¸å¯è¡Œæ‰ç”¨ç°åœ¨çš„æ–¹æ³•çš„ã€‚\n\nå¯¹äºä½ çš„ 2 çš„æƒ…å†µï¼Œä¼šå‡ºç°å¦‚æœåªæœ‰å·¦å€¼å¼•ç”¨ï¼Œå°±æ²¡æ³•è¿›è¡Œæ‹·è´æ„é€ çš„æƒ…å†µã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä¸å†™ç”¨é const å·¦å€¼å¼•ç”¨çš„æ‹·è´æ„é€ å‡½æ•°â€”â€”é‚£æ„å‘³ç€å°±æ˜¯åƒ auto_ptr ä¸€æ ·çš„é‡è›®ï¼Œæˆ–è€… const ä¸æ­£ç¡®äº†â€¦â€¦\n\nçœŸå®çš„ä»£ç é‡Œï¼Œæˆ‘çš„æ‹·è´æ„é€ æ°¸è¿œæ˜¯ç”¨ const å·¦å€¼å¼•ç”¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576313889,"ip_address":"","comment_id":161619,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºä¸ºä»€ä¹ˆå®šä¹‰äº†æ³›å‹æ‹·è´æ„é€ å‡½æ•°ï¼Œè¿˜æœ‰å®šä¹‰éæ³›å‹æ„é€ å‡½æ•°çš„é—®é¢˜ï¼Œçœ‹åˆ°ä½ çš„å›ç­”å¾ˆæ”¶ç›Šã€‚å¦å¤–ï¼Œåˆæƒ³åˆ°ï¼Œå¦‚æœæ˜¯ä¸ºäº†é¿å…è°ƒç”¨ç¼–è¯‘å™¨ç”Ÿæˆçš„éæ³›å‹æ‹·è´æ„é€ å‡½æ•°ï¼Œé‚£å¯ä¸å¯ä»¥ç›´æ¥æ˜¾å¼åœ°æŠŠè¿™ä¸ªå‡½æ•° delete æ‰ï¼Œæ‰€ä»¥åšäº†å‡ ä¸ªè¯•éªŒï¼Œå¯¹ç»“æœæœ‰ç‚¹ç–‘æƒ‘ï¼š\næœ‰å¦‚ä¸‹ä¸¤è¡Œä»£ç \nsmart_ptr&lt;shape&gt; p1(new shape());\nsmart_ptr&lt;shape&gt; p2(p1);\n1ï¼Œç›´æ¥ smart_ptr(const smart_ptr&amp; other) = deleteï¼Œç¼–è¯‘æŠ¥é”™ï¼Œuse of deleted function\n2ï¼Œsmart_ptr(const smart_ptr&amp; other) = delete çš„åŒæ—¶ï¼Œå®šä¹‰ smart_ptr(smart_ptr&amp; other) ç¼–è¯‘é€šè¿‡ï¼Œç»“æœæ­£ç¡®\n3ï¼Œsmart_ptr(smart_ptr&amp; other) = delete çš„åŒæ—¶ï¼Œå®šä¹‰smart_ptr(const smart_ptr&amp; other)ï¼Œç¼–è¯‘æŠ¥é”™ï¼Œuse of deleted function\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477851,"discussion_content":"ä¸éœ€è¦ã€‚C++é‡Œé¢ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„é»˜è®¤æä¾›æœ‰äº›å¤æ‚çš„è§„åˆ™ï¼Œåœ¨ç¬¬ 9 è®²é‡Œæœ‰æåˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576389488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161233,"user_name":"Alice","can_delete":false,"product_type":"c1","uid":1725046,"ip_address":"","ucode":"F0EDC16AC27088","user_header":"https://static001.geekbang.org/account/avatar/00/1a/52/76/7fb4a7a9.jpg","comment_is_top":false,"comment_ctime":1576152800,"is_pvip":false,"replies":[{"id":61480,"content":"è¿™äº›æ˜¯åŸºæœ¬æŠ€å·§ï¼Œå†™è‡ªå·±çš„ç±»çš„æ—¶å€™åŸºæœ¬ä¸Šéƒ½ç”¨å¾—åˆ°å§â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576168489,"ip_address":"","comment_id":161233,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ ï¼Œè¿™ä¸€èŠ‚å†…å®¹å†™çš„å¾ˆæœ‰æ„æ€å‘¢ï¼è®©äººå¿ä¸ä½ä¸€å£æ°”è¯»å®Œå“ˆå“ˆğŸ˜„ã€‚å¤§ä½“æ„æ€æ˜¯ç†è§£äº†ï¼Œä¸è¿‡ä¸€äº›ç»†èŠ‚è¿˜è¦åå¤å¤šä½“ä¼šç¢ç£¨ã€‚æƒ³é—®è€å¸ˆä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬è¿™èŠ‚è¯¾è®²çš„è¿™å‡ ä¸ªç‚¹çš„åº”ç”¨åœºæ™¯éƒ½æœ‰å“ªäº›å‘¢ï¼Ÿéº»çƒ¦è€å¸ˆä¸¾å‡ ä¸ªä¾‹å­å§ï¼Œæˆ‘è§‰å¾—æœ‰åœºæ™¯ä¾‹å­ç†è§£èµ·æ¥ä»£å…¥æ„Ÿä¼šå¼ºä¸€ç‚¹ï¼Œæˆ–è€…è¯´ä»¥åé‡åˆ°ç±»ä¼¼åœºæ™¯ä¼šæƒ³èµ·æ¥ç”¨è¿™äº›ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477786,"discussion_content":"æˆ‘å½“ç„¶å°è¯•è¿‡ç¦ç”¨ç³»ç»Ÿçš„æ‹·è´æ„é€ å‡½æ•°çš„ï¼Œå‘ç°ä¸å¯è¡Œæ‰ç”¨ç°åœ¨çš„æ–¹æ³•çš„ã€‚\n\nå¯¹äºä½ çš„ 2 çš„æƒ…å†µï¼Œä¼šå‡ºç°å¦‚æœåªæœ‰å·¦å€¼å¼•ç”¨ï¼Œå°±æ²¡æ³•è¿›è¡Œæ‹·è´æ„é€ çš„æƒ…å†µã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä¸å†™ç”¨é const å·¦å€¼å¼•ç”¨çš„æ‹·è´æ„é€ å‡½æ•°â€”â€”é‚£æ„å‘³ç€å°±æ˜¯åƒ auto_ptr ä¸€æ ·çš„é‡è›®ï¼Œæˆ–è€… const ä¸æ­£ç¡®äº†â€¦â€¦\n\nçœŸå®çš„ä»£ç é‡Œï¼Œæˆ‘çš„æ‹·è´æ„é€ æ°¸è¿œæ˜¯ç”¨ const å·¦å€¼å¼•ç”¨çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576313889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159895,"user_name":"å‡Œäº‘","can_delete":false,"product_type":"c1","uid":1326161,"ip_address":"","ucode":"C5D3665C4FED40","user_header":"https://static001.geekbang.org/account/avatar/00/14/3c/51/c324a7de.jpg","comment_is_top":false,"comment_ctime":1575819903,"is_pvip":false,"replies":[{"id":61064,"content":"å¼•ç”¨è®¡æ•°çš„æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥å•åˆ—ä¸€ä¸‹ã€‚å…¶ä»–çš„æŠŠå°‘æ•°å‡ æ®µä»£ç ä¸€æ‹¼å°±è¡Œå•¦ã€‚\n\nå¦å¤–ï¼Œä»å®ç”¨çš„è§’åº¦ï¼Œä¸è¦ç”¨æˆ‘çš„ä»£ç ã€‚è¿™æ˜¯ä¸ºè¯¾ç¨‹ç¼–å†™çš„ï¼Œæ²¡æœ‰ç»è¿‡é«˜å¼ºåº¦çš„æµ‹è¯•ã€‚ç”¨ä½ çš„ç¼–è¯‘å™¨è‡ªå¸¦çš„æ›´å¥å£®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575855341,"ip_address":"","comment_id":159895,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"å¾ˆå¥½,å»ºè®®auto_ptr, unique_ptrçš„å®ç°ä¹Ÿèƒ½åƒæœ€åçš„shared_ptré‚£æ ·æ•´ç†ä¸‹,è¿™æ ·å°±æ›´å®Œç¾äº†.","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477650,"discussion_content":"è¿™äº›æ˜¯åŸºæœ¬æŠ€å·§ï¼Œå†™è‡ªå·±çš„ç±»çš„æ—¶å€™åŸºæœ¬ä¸Šéƒ½ç”¨å¾—åˆ°å§â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576168489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159430,"user_name":"èµ–è·‘è·‘","can_delete":false,"product_type":"c1","uid":1257805,"ip_address":"","ucode":"FF60F24C0ADD49","user_header":"https://static001.geekbang.org/account/avatar/00/13/31/4d/61a9792b.jpg","comment_is_top":false,"comment_ctime":1575621899,"is_pvip":false,"replies":[{"id":60949,"content":"ä¸€ä¸ªæ™®é€šæŒ‡é’ˆå¯æ²¡æœ‰å³å€¼å¼•ç”¨çš„é‡è½½å•Šã€‚å¿…é¡»æ˜¯å¯¹å¯¹è±¡ï¼ˆéPODï¼‰ã€æœ‰å³å€¼å¼•ç”¨çš„é‡è½½ï¼Œç§»åŠ¨æ‰æœ‰æ„ä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575632225,"ip_address":"","comment_id":159430,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"template &lt;typename U&gt;\nsmart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) noexcept\n{\nptr_ = other.ptr_;   &#47;&#47;è¿™ä¸€è¡Œä¸ºä»€ä¹ˆä¸æ˜¯ ptr_ = std::move(other.ptr_);\n\n}","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477202,"discussion_content":"å¼•ç”¨è®¡æ•°çš„æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥å•åˆ—ä¸€ä¸‹ã€‚å…¶ä»–çš„æŠŠå°‘æ•°å‡ æ®µä»£ç ä¸€æ‹¼å°±è¡Œå•¦ã€‚\n\nå¦å¤–ï¼Œä»å®ç”¨çš„è§’åº¦ï¼Œä¸è¦ç”¨æˆ‘çš„ä»£ç ã€‚è¿™æ˜¯ä¸ºè¯¾ç¨‹ç¼–å†™çš„ï¼Œæ²¡æœ‰ç»è¿‡é«˜å¼ºåº¦çš„æµ‹è¯•ã€‚ç”¨ä½ çš„ç¼–è¯‘å™¨è‡ªå¸¦çš„æ›´å¥å£®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575855341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159107,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1575538846,"is_pvip":false,"replies":[{"id":60871,"content":"æ’é™¤ this ä¸èƒ½ä½œä¸ºå˜é‡åçš„é—®é¢˜ï¼Œä½ è¿™ä¹ˆå†™çš„è¯ï¼Œç¡®å®åªèƒ½å…ˆç”Ÿæˆä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼ˆä¸€èˆ¬ä¸è¯´ç”Ÿæˆå³å€¼ï¼‰ï¼Œç„¶åè°ƒç”¨èµ‹å€¼å‡½æ•°ã€‚ç”±äºæˆ‘ç›®å‰å®ç°çš„èµ‹å€¼å‡½æ•°å¹¶ä¸ä½¿ç”¨å³å€¼å¼•ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªå³å€¼ä¼šè¢«ç”¨æ¥è°ƒç”¨æ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç„¶åè¿›å…¥èµ‹å€¼å‡½æ•°ï¼Œä½¿ç”¨äº¤æ¢æ¥å¾—åˆ°ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575551579,"ip_address":"","comment_id":159107,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå†é—®ä¸€ä¸‹ï¼Œæœ€åè¿™4ä¸ªæŒ‡é’ˆç±»å‹è½¬æ¢å‡½æ•°**_pointer_cast, è¿”å›çš„éƒ½æ˜¯å€¼ï¼Œé‚£æ˜¯ä¸æ˜¯ä»£è¡¨å¦‚æœæŒ‰ç…§å¦‚ä¸‹æ–¹å¼è°ƒç”¨è¿™ä¸ªå‡½æ•°:\nsmart_ptr&lt;T&gt; this;\nsmart_ptr&lt;U&gt; other(ptr);\nthis = dynamic_pointer_cast&lt;T&gt;(other)\nå…ˆè¦ç”Ÿæˆä¸€ä¸ªå³å€¼ï¼Œå†è°ƒç”¨å‚æ•°ä¸ºå³å€¼å¼•ç”¨çš„èµ‹å€¼å‡½æ•°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477055,"discussion_content":"ä¸€ä¸ªæ™®é€šæŒ‡é’ˆå¯æ²¡æœ‰å³å€¼å¼•ç”¨çš„é‡è½½å•Šã€‚å¿…é¡»æ˜¯å¯¹å¯¹è±¡ï¼ˆéPODï¼‰ã€æœ‰å³å€¼å¼•ç”¨çš„é‡è½½ï¼Œç§»åŠ¨æ‰æœ‰æ„ä¹‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575632225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158903,"user_name":"æˆ‘ä¸ç”Ÿäº§bugï¼Œæˆ‘åªæ˜¯bugçš„æ¬è¿å·¥","can_delete":false,"product_type":"c1","uid":1757474,"ip_address":"","ucode":"C70AEAF23665C8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKEyibia4u3kq3bia4ZiaARfvj7fRqyAN9DIqaQytdy5IsPsfpl9UCdgiaF88tTyia5w1dBynyzkatDt2A/132","comment_is_top":false,"comment_ctime":1575474922,"is_pvip":false,"replies":[{"id":60824,"content":"å¯ä»¥åŠ ã€‚ä¸åŠ æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚åˆ¤æ–­å…¨æ˜¯åŸºäº ptr_ çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575510316,"ip_address":"","comment_id":158903,"utype":1}],"discussion_count":1,"race_medal":0,"score":15,"product_id":100040501,"comment_content":"smart_ptr çš„ç§»åŠ¨æ„é€ æ˜¯ä¸æ˜¯å°‘äº†other.shared_count = nullptr ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476952,"discussion_content":"æ’é™¤ this ä¸èƒ½ä½œä¸ºå˜é‡åçš„é—®é¢˜ï¼Œä½ è¿™ä¹ˆå†™çš„è¯ï¼Œç¡®å®åªèƒ½å…ˆç”Ÿæˆä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼ˆä¸€èˆ¬ä¸è¯´ç”Ÿæˆå³å€¼ï¼‰ï¼Œç„¶åè°ƒç”¨èµ‹å€¼å‡½æ•°ã€‚ç”±äºæˆ‘ç›®å‰å®ç°çš„èµ‹å€¼å‡½æ•°å¹¶ä¸ä½¿ç”¨å³å€¼å¼•ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªå³å€¼ä¼šè¢«ç”¨æ¥è°ƒç”¨æ¨¡æ¿ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç„¶åè¿›å…¥èµ‹å€¼å‡½æ•°ï¼Œä½¿ç”¨äº¤æ¢æ¥å¾—åˆ°ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575551579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158844,"user_name":"what are you up","can_delete":false,"product_type":"c1","uid":1196480,"ip_address":"","ucode":"AEEE63C5BB00C2","user_header":"https://static001.geekbang.org/account/avatar/00/12/41/c0/910c4834.jpg","comment_is_top":false,"comment_ctime":1575463711,"is_pvip":false,"replies":[{"id":60822,"content":"å®šä¹‰ä¸€ä¸‹ä½ çš„æ‹·è´å¤åˆ¶çš„å«ä¹‰ã€‚\n\nå¦‚æœåŒ…å« a = b çš„å½¢å¼çš„è¯ï¼Œç­”æ¡ˆä¸ºå¦ã€‚æ‹·è´èµ‹å€¼å‡½æ•°ä¸ä¸€å®šéœ€è¦è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°çš„ï¼Œè™½ç„¶æˆ‘ä¸€èˆ¬è¿™ä¹ˆåšã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575510145,"ip_address":"","comment_id":158844,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"æ˜¯ä¸æ˜¯æ‰€æœ‰çš„æ‹·è´å¤åˆ¶ éƒ½ä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Ÿ","like_count":0},{"had_liked":false,"id":158803,"user_name":"SMTCode","can_delete":false,"product_type":"c1","uid":1109038,"ip_address":"","ucode":"0D837A753E4FAB","user_header":"https://static001.geekbang.org/account/avatar/00/10/ec/2e/49d13bd2.jpg","comment_is_top":false,"comment_ctime":1575455084,"is_pvip":false,"replies":[{"id":60754,"content":"å—æ²¡äº‹ï¼Œä¸éš¾å°±è¡Œã€‚ğŸ¤£","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575464005,"ip_address":"","comment_id":158803,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"æˆ‘å¤ªå—äº†ï½","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476870,"discussion_content":"å®šä¹‰ä¸€ä¸‹ä½ çš„æ‹·è´å¤åˆ¶çš„å«ä¹‰ã€‚\n\nå¦‚æœåŒ…å« a = b çš„å½¢å¼çš„è¯ï¼Œç­”æ¡ˆä¸ºå¦ã€‚æ‹·è´èµ‹å€¼å‡½æ•°ä¸ä¸€å®šéœ€è¦è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°çš„ï¼Œè™½ç„¶æˆ‘ä¸€èˆ¬è¿™ä¹ˆåšã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575510145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158777,"user_name":"å¿†æ°‘","can_delete":false,"product_type":"c1","uid":1497815,"ip_address":"","ucode":"E66CEAD1E910C5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJBHLqk9ofIib9pgboMKZhVCia28M3FTf45C1bPrvH5ctCDhfAqS6ia13fQtBWGafADFIQsttJ7rgXwg/132","comment_is_top":false,"comment_ctime":1575449451,"is_pvip":false,"replies":[{"id":60756,"content":"å‚æ•°ç±»å‹æ˜¯æ²¡æœ‰å¼•ç”¨ç¬¦å·çš„å“¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575464094,"ip_address":"","comment_id":158777,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"è€å¸ˆè¿™ä¸ªä¸ç†è§£\nsmart_ptr&amp;  operator=(smart_ptr rhs) noexcept  {    rhs.swap(*this);    return *this;  }\nè¿™ä¸ªå®ç°ï¼Œå¥½åƒæ—¶rhså’Œthisäº¤æ¢ï¼Œå½¼æ­¤æŒ‡å‘å¯¹æ–¹æ‹¥æœ‰çš„å¯¹è±¡äº†ï¼Ÿæ˜¯ä¸æ˜¯åˆé—®é¢˜ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476842,"discussion_content":"å‚æ•°ç±»å‹æ˜¯æ²¡æœ‰å¼•ç”¨ç¬¦å·çš„å“¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575464094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158468,"user_name":"åœ¨æ°´ä¸€æ–¹","can_delete":false,"product_type":"c1","uid":1414215,"ip_address":"","ucode":"D8371EFEBED2C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiboeh23vhCNruZ7odUjROiac6N9fx0VWAE6zBNRxJIJFZspSUTQdgu9ajg4F0fAZgdk1vBsicnib3QQ/132","comment_is_top":false,"comment_ctime":1575378527,"is_pvip":false,"replies":[{"id":60649,"content":"ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575380730,"ip_address":"","comment_id":158468,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"è®²è§£çš„å¾ˆå¥½ï¼Œå¾ˆæ·±ï¼Œæœ¬æ¥è¿˜çŠ¹è±«ï¼Œçœ‹äº†è¿™ä¸€è¯¾ï¼Œæœæ–­å…¥æ‰‹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476739,"discussion_content":"ğŸ˜‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575380730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158346,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1575360498,"is_pvip":false,"replies":[{"id":60645,"content":"ä¸æ˜¯ã€‚æ™ºèƒ½æŒ‡é’ˆçš„æ„é€ å‡½æ•°åªèƒ½æ¥å— new å•ä¸ªå¯¹è±¡çš„ç»“æœæŒ‡é’ˆã€‚ä½ è¿™å„¿æ—¢ä¸æ˜¯ new çš„ï¼Œåˆæ˜¯æ•°ç»„ï¼ŒåŒé‡é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575378194,"ip_address":"","comment_id":158346,"utype":1}],"discussion_count":4,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘è¿›è¡Œä¸‹é¢èµ‹å€¼çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå‡ºç°äº†double freeçš„é—®é¢˜ï¼š\n    int test[10];\n    smart_ptr&lt;int&gt; test_ptr(test);\nè¿™ä¸ªæ˜¯æµ…æ‹·è´å‡ºç°çš„é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476691,"discussion_content":"ä¸æ˜¯ã€‚æ™ºèƒ½æŒ‡é’ˆçš„æ„é€ å‡½æ•°åªèƒ½æ¥å— new å•ä¸ªå¯¹è±¡çš„ç»“æœæŒ‡é’ˆã€‚ä½ è¿™å„¿æ—¢ä¸æ˜¯ new çš„ï¼Œåˆæ˜¯æ•°ç»„ï¼ŒåŒé‡é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575378194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70733,"discussion_content":"å—¯å—¯ï¼Œæ˜ç™½äº†ï¼Œè°¢è°¢è€å¸ˆçš„çƒ­æƒ…å›ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575378833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70678,"discussion_content":"ä½çº§é”™è¯¯ï¼Œä½çº§é”™è¯¯ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575375998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70675,"discussion_content":"å—¯å—¯ï¼Œæˆ‘æ˜ç™½äº†ã€‚\nteståœ¨æ ˆä¸­æ˜¯è‡ªåŠ¨ç®¡ç†çš„ï¼Œç³»ç»Ÿä¼šé‡Šæ”¾ä¸€æ¬¡ï¼Œè€Œsmart_ptrçš„æ—¶å€™åˆä¼šé‡Šæ”¾ä¸€æ¬¡ï¼Œæ‰€ä»¥å°±å‡ºç°äº†double freeçš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575375981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158217,"user_name":"Liang Xu","can_delete":false,"product_type":"c1","uid":1476654,"ip_address":"","ucode":"5EA7072BF69B1A","user_header":"https://static001.geekbang.org/account/avatar/00/16/88/2e/7efef4f0.jpg","comment_is_top":false,"comment_ctime":1575351360,"is_pvip":false,"replies":[{"id":60641,"content":"è¿™å°±åƒå†™ä¸€ä¸ªå£°æ˜ f(int n); ä¸€æ ·ï¼Œn æ˜¯ä¸ªå½¢å‚ï¼Œä¸å†™ä¹Ÿå¯ä»¥çš„ã€‚è¿™ä¸ª friend å£°æ˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªæ˜¯è¡¨æ˜è¿™ä¸ªå½¢å¼çš„æ¨¡æ¿éƒ½æ˜¯æœ‹å‹ï¼ŒU å¯ä»¥ä¸å†™ã€‚æˆ‘åªæ˜¯è·Ÿä¸‹é¢çš„å†™æ³•ä¿æŒä¸€è‡´è€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575377615,"ip_address":"","comment_id":158217,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"template &lt;typename T&gt;\nclass smart_ptr {\n       public: \n       template &lt;typename U&gt;\n       friend class smart_ptr;\nè€å¸ˆï¼Œåœ¨è¿™ä¸ªåœ°æ–¹ï¼Œ U æ˜¯æ€ä¹ˆè·å–çš„ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476678,"discussion_content":"è¿™å°±åƒå†™ä¸€ä¸ªå£°æ˜ f(int n); ä¸€æ ·ï¼Œn æ˜¯ä¸ªå½¢å‚ï¼Œä¸å†™ä¹Ÿå¯ä»¥çš„ã€‚è¿™ä¸ª friend å£°æ˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªæ˜¯è¡¨æ˜è¿™ä¸ªå½¢å¼çš„æ¨¡æ¿éƒ½æ˜¯æœ‹å‹ï¼ŒU å¯ä»¥ä¸å†™ã€‚æˆ‘åªæ˜¯è·Ÿä¸‹é¢çš„å†™æ³•ä¿æŒä¸€è‡´è€Œå·²ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575377615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158213,"user_name":"ä¸‰å‘³","can_delete":false,"product_type":"c1","uid":1362403,"ip_address":"","ucode":"A580F715D1CC96","user_header":"https://static001.geekbang.org/account/avatar/00/14/c9/e3/28c16afa.jpg","comment_is_top":false,"comment_ctime":1575350662,"is_pvip":false,"replies":[{"id":60626,"content":"è®²ä»£ç ç»„åˆï¼Œå°±æ˜¯è¦æ‹¿è¿‡æ¥å®Œå…¨ä¸æ”¹å°±å¯ä»¥ç”¨ã€‚è¿™ç‚¹C++å·²ç»ç®—æ˜¯ä¸å¼ºçš„äº†ã€‚ä½ å€’å¥½ï¼Œæ‹¿ä¸€ä¸ªåˆ«äººçš„ç±»è¿‡æ¥å°±è¦å¾€é‡Œå¡ä¸ªè®¡æ•°ï¼Ÿå¦‚æœæ²¡æœ‰æºç å‘¢ï¼ŸğŸ¤ª","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575368074,"ip_address":"","comment_id":158213,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"æ›´å–œæ¬¢ä¾µå…¥å¼çš„æ™ºèƒ½æŒ‡é’ˆ, å¼•ç”¨è®¡æ•°åŒ…å«åœ¨ç»§æ‰¿çš„åŸºç±»ä¸­. \næ„Ÿè§‰share_pträ¸­æ¯é’ˆå¯¹ä¸€ä¸ªæ–°çš„å¯¹è±¡éƒ½è¦newä¸€ä¸ªå¼•ç”¨è®¡æ•°, è¿™ç§æ–¹æ³•å¥½é‚ªé“...\nä¹Ÿå¯èƒ½æˆ‘ä¸€å¼€å§‹æ¥è§¦æ™ºèƒ½æŒ‡é’ˆ, å°±æ˜¯ä»ä¾µå…¥å¼çš„å¼€å§‹çš„ç¼˜æ•…å§...","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476675,"discussion_content":"è®²ä»£ç ç»„åˆï¼Œå°±æ˜¯è¦æ‹¿è¿‡æ¥å®Œå…¨ä¸æ”¹å°±å¯ä»¥ç”¨ã€‚è¿™ç‚¹C++å·²ç»ç®—æ˜¯ä¸å¼ºçš„äº†ã€‚ä½ å€’å¥½ï¼Œæ‹¿ä¸€ä¸ªåˆ«äººçš„ç±»è¿‡æ¥å°±è¦å¾€é‡Œå¡ä¸ªè®¡æ•°ï¼Ÿå¦‚æœæ²¡æœ‰æºç å‘¢ï¼ŸğŸ¤ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575368074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158044,"user_name":"ç†Šå‡ºæ²¡","can_delete":false,"product_type":"c1","uid":1145377,"ip_address":"","ucode":"6E39230CC87808","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/21/a33cc944.jpg","comment_is_top":false,"comment_ctime":1575302220,"is_pvip":false,"replies":[{"id":60582,"content":"æ²¡æœ‰æ‰‹è¯¯ï¼Œä»£ç éƒ½æµ‹è¯•è¿‡çš„ã€‚\n\næ˜¯å› ä¸ºæˆ‘å·å·å¡äº†ç‚¹ C++11çš„è¯­æ³•ï¼Ÿå…ˆç†Ÿæ‚‰èµ·æ¥ï¼Œåé¢è¿˜ä¼šè®²åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575337332,"ip_address":"","comment_id":158044,"utype":1}],"discussion_count":2,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1};\n\nè€å¸ˆ è¯¾é¢˜å¼€å§‹é‚£é‡Œè®²è§£æ‹·è´æ—¶ è¿™ä¸¤è¡Œä»£ç æ˜¯å¦æ‰‹è¯¯ æ‹¬å·å¥½åƒä¸å¯¹","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476612,"discussion_content":"æ²¡æœ‰æ‰‹è¯¯ï¼Œä»£ç éƒ½æµ‹è¯•è¿‡çš„ã€‚\n\næ˜¯å› ä¸ºæˆ‘å·å·å¡äº†ç‚¹ C++11çš„è¯­æ³•ï¼Ÿå…ˆç†Ÿæ‚‰èµ·æ¥ï¼Œåé¢è¿˜ä¼šè®²åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575337332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145377,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7a/21/a33cc944.jpg","nickname":"ç†Šå‡ºæ²¡","note":"","ucode":"6E39230CC87808","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70242,"discussion_content":"å¥½çš„ ç¡®å®è¿˜æ˜¯æœ‰éš¾åº¦ ä»¥åŠ æ–°çš„è¯­æ³•å’Œæ¦‚å¿µ ä»¥æ‰‹åŠ¨éªŒè¯ å¯¹è‡ªå·±è¦æ ¼å¼åŒ–äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575337964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157576,"user_name":"ä¸€å¤©åˆ°æ™šæ¸¸æ³³çš„é±¼","can_delete":false,"product_type":"c1","uid":1433982,"ip_address":"","ucode":"1F40AF478D85B9","user_header":"","comment_is_top":false,"comment_ctime":1575200232,"is_pvip":false,"replies":[{"id":60431,"content":"è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆç›®å‰ä¸æ”¯æŒæ•°ç»„ã€‚C++æ ‡å‡†é‡Œçš„æ™ºèƒ½æŒ‡é’ˆå¯¹æ•°ç»„çš„æ”¯æŒä¹Ÿæ˜¯åˆ°C++17æ‰æä¾›çš„ã€‚ä½œä¸ºç®€åŒ–ç‰ˆæœ¬ï¼Œç›®å‰ä¹Ÿä¸æ”¯æŒåˆ é™¤å™¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575210676,"ip_address":"","comment_id":157576,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"å¦‚æœä¼ å…¥çš„æ˜¯åŠ¨æ€æ•°ç»„çš„æŒ‡é’ˆ åˆ™ä¼šé€ æˆå†…å­˜æ³„æ¼ æ‰€ä»¥æˆ‘è§‰å¾—è¿˜åº”è¯¥å¢åŠ ä¸€ä¸ª å¯ä»¥ä¼ å…¥åˆ é™¤å™¨ä»¥åˆ é™¤åŠ¨æ€æ•°ç»„","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476471,"discussion_content":"è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆç›®å‰ä¸æ”¯æŒæ•°ç»„ã€‚C++æ ‡å‡†é‡Œçš„æ™ºèƒ½æŒ‡é’ˆå¯¹æ•°ç»„çš„æ”¯æŒä¹Ÿæ˜¯åˆ°C++17æ‰æä¾›çš„ã€‚ä½œä¸ºç®€åŒ–ç‰ˆæœ¬ï¼Œç›®å‰ä¹Ÿä¸æ”¯æŒåˆ é™¤å™¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575210676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157563,"user_name":"å¾å‡¯","can_delete":false,"product_type":"c1","uid":1244991,"ip_address":"","ucode":"12F82BA3649CD5","user_header":"https://static001.geekbang.org/account/avatar/00/12/ff/3f/bbb8a88c.jpg","comment_is_top":false,"comment_ctime":1575194618,"is_pvip":false,"replies":[{"id":60432,"content":"ä½ æµ‹è¯•äº†å—ï¼ŸğŸ§\n\næˆ‘è¯•äº†ä½ è¿™æ ·çš„ä»£ç æ˜¯å¯ä»¥å·¥ä½œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575210955,"ip_address":"","comment_id":157563,"utype":1}],"discussion_count":2,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"è€å¸ˆä½ çš„æ™ºèƒ½æŒ‡é’ˆä»£ç   åº”è¯¥è¿˜ç¼ºä¹äº†constç±»å‹çš„èµ‹å€¼\n     base* b=new base;\n     const CD* pConst=b;\nä¸Šè¿°èµ‹å€¼æ˜¯åˆæ³•çš„è€Œæ¥åˆ°æ™ºèƒ½æŒ‡é’ˆç”±äºSmartPtr&lt;base&gt;ã€ SmartPtr&lt;const base&gt; åœ¨ç¼–è¯‘å™¨çœ‹æ¥æ˜¯å®Œå…¨ä¸åŒçš„ç±»å‹ä¸‹é¢çš„æ“ä½œå°†ä¼šæ— æ³•ç¼–è¯‘\n     SmartPtr&lt;base&gt; p1(new base);\n     SmartPtr&lt;const base&gt; p2=p1;","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476471,"discussion_content":"è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆç›®å‰ä¸æ”¯æŒæ•°ç»„ã€‚C++æ ‡å‡†é‡Œçš„æ™ºèƒ½æŒ‡é’ˆå¯¹æ•°ç»„çš„æ”¯æŒä¹Ÿæ˜¯åˆ°C++17æ‰æä¾›çš„ã€‚ä½œä¸ºç®€åŒ–ç‰ˆæœ¬ï¼Œç›®å‰ä¹Ÿä¸æ”¯æŒåˆ é™¤å™¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575210676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158844,"user_name":"what are you up","can_delete":false,"product_type":"c1","uid":1196480,"ip_address":"","ucode":"AEEE63C5BB00C2","user_header":"https://static001.geekbang.org/account/avatar/00/12/41/c0/910c4834.jpg","comment_is_top":false,"comment_ctime":1575463711,"is_pvip":false,"replies":[{"id":60822,"content":"å®šä¹‰ä¸€ä¸‹ä½ çš„æ‹·è´å¤åˆ¶çš„å«ä¹‰ã€‚\n\nå¦‚æœåŒ…å« a = b çš„å½¢å¼çš„è¯ï¼Œç­”æ¡ˆä¸ºå¦ã€‚æ‹·è´èµ‹å€¼å‡½æ•°ä¸ä¸€å®šéœ€è¦è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°çš„ï¼Œè™½ç„¶æˆ‘ä¸€èˆ¬è¿™ä¹ˆåšã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575510145,"ip_address":"","comment_id":158844,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"æ˜¯ä¸æ˜¯æ‰€æœ‰çš„æ‹·è´å¤åˆ¶ éƒ½ä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476870,"discussion_content":"å®šä¹‰ä¸€ä¸‹ä½ çš„æ‹·è´å¤åˆ¶çš„å«ä¹‰ã€‚\n\nå¦‚æœåŒ…å« a = b çš„å½¢å¼çš„è¯ï¼Œç­”æ¡ˆä¸ºå¦ã€‚æ‹·è´èµ‹å€¼å‡½æ•°ä¸ä¸€å®šéœ€è¦è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°çš„ï¼Œè™½ç„¶æˆ‘ä¸€èˆ¬è¿™ä¹ˆåšã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575510145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158803,"user_name":"SMTCode","can_delete":false,"product_type":"c1","uid":1109038,"ip_address":"","ucode":"0D837A753E4FAB","user_header":"https://static001.geekbang.org/account/avatar/00/10/ec/2e/49d13bd2.jpg","comment_is_top":false,"comment_ctime":1575455084,"is_pvip":false,"replies":[{"id":60754,"content":"å—æ²¡äº‹ï¼Œä¸éš¾å°±è¡Œã€‚ğŸ¤£","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575464005,"ip_address":"","comment_id":158803,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"æˆ‘å¤ªå—äº†ï½","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476853,"discussion_content":"å—æ²¡äº‹ï¼Œä¸éš¾å°±è¡Œã€‚ğŸ¤£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575464005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158777,"user_name":"å¿†æ°‘","can_delete":false,"product_type":"c1","uid":1497815,"ip_address":"","ucode":"E66CEAD1E910C5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJBHLqk9ofIib9pgboMKZhVCia28M3FTf45C1bPrvH5ctCDhfAqS6ia13fQtBWGafADFIQsttJ7rgXwg/132","comment_is_top":false,"comment_ctime":1575449451,"is_pvip":false,"replies":[{"id":60756,"content":"å‚æ•°ç±»å‹æ˜¯æ²¡æœ‰å¼•ç”¨ç¬¦å·çš„å“¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575464094,"ip_address":"","comment_id":158777,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"è€å¸ˆè¿™ä¸ªä¸ç†è§£\nsmart_ptr&amp;  operator=(smart_ptr rhs) noexcept  {    rhs.swap(*this);    return *this;  }\nè¿™ä¸ªå®ç°ï¼Œå¥½åƒæ—¶rhså’Œthisäº¤æ¢ï¼Œå½¼æ­¤æŒ‡å‘å¯¹æ–¹æ‹¥æœ‰çš„å¯¹è±¡äº†ï¼Ÿæ˜¯ä¸æ˜¯åˆé—®é¢˜ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476853,"discussion_content":"å—æ²¡äº‹ï¼Œä¸éš¾å°±è¡Œã€‚ğŸ¤£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575464005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158468,"user_name":"åœ¨æ°´ä¸€æ–¹","can_delete":false,"product_type":"c1","uid":1414215,"ip_address":"","ucode":"D8371EFEBED2C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiboeh23vhCNruZ7odUjROiac6N9fx0VWAE6zBNRxJIJFZspSUTQdgu9ajg4F0fAZgdk1vBsicnib3QQ/132","comment_is_top":false,"comment_ctime":1575378527,"is_pvip":false,"replies":[{"id":60649,"content":"ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575380730,"ip_address":"","comment_id":158468,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"è®²è§£çš„å¾ˆå¥½ï¼Œå¾ˆæ·±ï¼Œæœ¬æ¥è¿˜çŠ¹è±«ï¼Œçœ‹äº†è¿™ä¸€è¯¾ï¼Œæœæ–­å…¥æ‰‹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476842,"discussion_content":"å‚æ•°ç±»å‹æ˜¯æ²¡æœ‰å¼•ç”¨ç¬¦å·çš„å“¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575464094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158346,"user_name":"lyfei","can_delete":false,"product_type":"c1","uid":1757471,"ip_address":"","ucode":"31ACC702BE6FEA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","comment_is_top":false,"comment_ctime":1575360498,"is_pvip":false,"replies":[{"id":60645,"content":"ä¸æ˜¯ã€‚æ™ºèƒ½æŒ‡é’ˆçš„æ„é€ å‡½æ•°åªèƒ½æ¥å— new å•ä¸ªå¯¹è±¡çš„ç»“æœæŒ‡é’ˆã€‚ä½ è¿™å„¿æ—¢ä¸æ˜¯ new çš„ï¼Œåˆæ˜¯æ•°ç»„ï¼ŒåŒé‡é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575378194,"ip_address":"","comment_id":158346,"utype":1}],"discussion_count":4,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘è¿›è¡Œä¸‹é¢èµ‹å€¼çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå‡ºç°äº†double freeçš„é—®é¢˜ï¼š\n    int test[10];\n    smart_ptr&lt;int&gt; test_ptr(test);\nè¿™ä¸ªæ˜¯æµ…æ‹·è´å‡ºç°çš„é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476739,"discussion_content":"ğŸ˜‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575380730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158217,"user_name":"Liang Xu","can_delete":false,"product_type":"c1","uid":1476654,"ip_address":"","ucode":"5EA7072BF69B1A","user_header":"https://static001.geekbang.org/account/avatar/00/16/88/2e/7efef4f0.jpg","comment_is_top":false,"comment_ctime":1575351360,"is_pvip":false,"replies":[{"id":60641,"content":"è¿™å°±åƒå†™ä¸€ä¸ªå£°æ˜ f(int n); ä¸€æ ·ï¼Œn æ˜¯ä¸ªå½¢å‚ï¼Œä¸å†™ä¹Ÿå¯ä»¥çš„ã€‚è¿™ä¸ª friend å£°æ˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªæ˜¯è¡¨æ˜è¿™ä¸ªå½¢å¼çš„æ¨¡æ¿éƒ½æ˜¯æœ‹å‹ï¼ŒU å¯ä»¥ä¸å†™ã€‚æˆ‘åªæ˜¯è·Ÿä¸‹é¢çš„å†™æ³•ä¿æŒä¸€è‡´è€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575377615,"ip_address":"","comment_id":158217,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"template &lt;typename T&gt;\nclass smart_ptr {\n       public: \n       template &lt;typename U&gt;\n       friend class smart_ptr;\nè€å¸ˆï¼Œåœ¨è¿™ä¸ªåœ°æ–¹ï¼Œ U æ˜¯æ€ä¹ˆè·å–çš„ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476691,"discussion_content":"ä¸æ˜¯ã€‚æ™ºèƒ½æŒ‡é’ˆçš„æ„é€ å‡½æ•°åªèƒ½æ¥å— new å•ä¸ªå¯¹è±¡çš„ç»“æœæŒ‡é’ˆã€‚ä½ è¿™å„¿æ—¢ä¸æ˜¯ new çš„ï¼Œåˆæ˜¯æ•°ç»„ï¼ŒåŒé‡é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575378194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70733,"discussion_content":"å—¯å—¯ï¼Œæ˜ç™½äº†ï¼Œè°¢è°¢è€å¸ˆçš„çƒ­æƒ…å›ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575378833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70678,"discussion_content":"ä½çº§é”™è¯¯ï¼Œä½çº§é”™è¯¯ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575375998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757471,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d1/1f/2cd395eb.jpg","nickname":"lyfei","note":"","ucode":"31ACC702BE6FEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70675,"discussion_content":"å—¯å—¯ï¼Œæˆ‘æ˜ç™½äº†ã€‚\nteståœ¨æ ˆä¸­æ˜¯è‡ªåŠ¨ç®¡ç†çš„ï¼Œç³»ç»Ÿä¼šé‡Šæ”¾ä¸€æ¬¡ï¼Œè€Œsmart_ptrçš„æ—¶å€™åˆä¼šé‡Šæ”¾ä¸€æ¬¡ï¼Œæ‰€ä»¥å°±å‡ºç°äº†double freeçš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575375981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158213,"user_name":"ä¸‰å‘³","can_delete":false,"product_type":"c1","uid":1362403,"ip_address":"","ucode":"A580F715D1CC96","user_header":"https://static001.geekbang.org/account/avatar/00/14/c9/e3/28c16afa.jpg","comment_is_top":false,"comment_ctime":1575350662,"is_pvip":false,"replies":[{"id":60626,"content":"è®²ä»£ç ç»„åˆï¼Œå°±æ˜¯è¦æ‹¿è¿‡æ¥å®Œå…¨ä¸æ”¹å°±å¯ä»¥ç”¨ã€‚è¿™ç‚¹C++å·²ç»ç®—æ˜¯ä¸å¼ºçš„äº†ã€‚ä½ å€’å¥½ï¼Œæ‹¿ä¸€ä¸ªåˆ«äººçš„ç±»è¿‡æ¥å°±è¦å¾€é‡Œå¡ä¸ªè®¡æ•°ï¼Ÿå¦‚æœæ²¡æœ‰æºç å‘¢ï¼ŸğŸ¤ª","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575368074,"ip_address":"","comment_id":158213,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"æ›´å–œæ¬¢ä¾µå…¥å¼çš„æ™ºèƒ½æŒ‡é’ˆ, å¼•ç”¨è®¡æ•°åŒ…å«åœ¨ç»§æ‰¿çš„åŸºç±»ä¸­. \næ„Ÿè§‰share_pträ¸­æ¯é’ˆå¯¹ä¸€ä¸ªæ–°çš„å¯¹è±¡éƒ½è¦newä¸€ä¸ªå¼•ç”¨è®¡æ•°, è¿™ç§æ–¹æ³•å¥½é‚ªé“...\nä¹Ÿå¯èƒ½æˆ‘ä¸€å¼€å§‹æ¥è§¦æ™ºèƒ½æŒ‡é’ˆ, å°±æ˜¯ä»ä¾µå…¥å¼çš„å¼€å§‹çš„ç¼˜æ•…å§...","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476678,"discussion_content":"è¿™å°±åƒå†™ä¸€ä¸ªå£°æ˜ f(int n); ä¸€æ ·ï¼Œn æ˜¯ä¸ªå½¢å‚ï¼Œä¸å†™ä¹Ÿå¯ä»¥çš„ã€‚è¿™ä¸ª friend å£°æ˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªæ˜¯è¡¨æ˜è¿™ä¸ªå½¢å¼çš„æ¨¡æ¿éƒ½æ˜¯æœ‹å‹ï¼ŒU å¯ä»¥ä¸å†™ã€‚æˆ‘åªæ˜¯è·Ÿä¸‹é¢çš„å†™æ³•ä¿æŒä¸€è‡´è€Œå·²ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575377615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158044,"user_name":"ç†Šå‡ºæ²¡","can_delete":false,"product_type":"c1","uid":1145377,"ip_address":"","ucode":"6E39230CC87808","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/21/a33cc944.jpg","comment_is_top":false,"comment_ctime":1575302220,"is_pvip":false,"replies":[{"id":60582,"content":"æ²¡æœ‰æ‰‹è¯¯ï¼Œä»£ç éƒ½æµ‹è¯•è¿‡çš„ã€‚\n\næ˜¯å› ä¸ºæˆ‘å·å·å¡äº†ç‚¹ C++11çš„è¯­æ³•ï¼Ÿå…ˆç†Ÿæ‚‰èµ·æ¥ï¼Œåé¢è¿˜ä¼šè®²åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575337332,"ip_address":"","comment_id":158044,"utype":1}],"discussion_count":2,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1};\n\nè€å¸ˆ è¯¾é¢˜å¼€å§‹é‚£é‡Œè®²è§£æ‹·è´æ—¶ è¿™ä¸¤è¡Œä»£ç æ˜¯å¦æ‰‹è¯¯ æ‹¬å·å¥½åƒä¸å¯¹","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476675,"discussion_content":"è®²ä»£ç ç»„åˆï¼Œå°±æ˜¯è¦æ‹¿è¿‡æ¥å®Œå…¨ä¸æ”¹å°±å¯ä»¥ç”¨ã€‚è¿™ç‚¹C++å·²ç»ç®—æ˜¯ä¸å¼ºçš„äº†ã€‚ä½ å€’å¥½ï¼Œæ‹¿ä¸€ä¸ªåˆ«äººçš„ç±»è¿‡æ¥å°±è¦å¾€é‡Œå¡ä¸ªè®¡æ•°ï¼Ÿå¦‚æœæ²¡æœ‰æºç å‘¢ï¼ŸğŸ¤ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575368074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157576,"user_name":"ä¸€å¤©åˆ°æ™šæ¸¸æ³³çš„é±¼","can_delete":false,"product_type":"c1","uid":1433982,"ip_address":"","ucode":"1F40AF478D85B9","user_header":"","comment_is_top":false,"comment_ctime":1575200232,"is_pvip":false,"replies":[{"id":60431,"content":"è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆç›®å‰ä¸æ”¯æŒæ•°ç»„ã€‚C++æ ‡å‡†é‡Œçš„æ™ºèƒ½æŒ‡é’ˆå¯¹æ•°ç»„çš„æ”¯æŒä¹Ÿæ˜¯åˆ°C++17æ‰æä¾›çš„ã€‚ä½œä¸ºç®€åŒ–ç‰ˆæœ¬ï¼Œç›®å‰ä¹Ÿä¸æ”¯æŒåˆ é™¤å™¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575210676,"ip_address":"","comment_id":157576,"utype":1}],"discussion_count":1,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"å¦‚æœä¼ å…¥çš„æ˜¯åŠ¨æ€æ•°ç»„çš„æŒ‡é’ˆ åˆ™ä¼šé€ æˆå†…å­˜æ³„æ¼ æ‰€ä»¥æˆ‘è§‰å¾—è¿˜åº”è¯¥å¢åŠ ä¸€ä¸ª å¯ä»¥ä¼ å…¥åˆ é™¤å™¨ä»¥åˆ é™¤åŠ¨æ€æ•°ç»„","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476612,"discussion_content":"æ²¡æœ‰æ‰‹è¯¯ï¼Œä»£ç éƒ½æµ‹è¯•è¿‡çš„ã€‚\n\næ˜¯å› ä¸ºæˆ‘å·å·å¡äº†ç‚¹ C++11çš„è¯­æ³•ï¼Ÿå…ˆç†Ÿæ‚‰èµ·æ¥ï¼Œåé¢è¿˜ä¼šè®²åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575337332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145377,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7a/21/a33cc944.jpg","nickname":"ç†Šå‡ºæ²¡","note":"","ucode":"6E39230CC87808","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70242,"discussion_content":"å¥½çš„ ç¡®å®è¿˜æ˜¯æœ‰éš¾åº¦ ä»¥åŠ æ–°çš„è¯­æ³•å’Œæ¦‚å¿µ ä»¥æ‰‹åŠ¨éªŒè¯ å¯¹è‡ªå·±è¦æ ¼å¼åŒ–äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575337964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157563,"user_name":"å¾å‡¯","can_delete":false,"product_type":"c1","uid":1244991,"ip_address":"","ucode":"12F82BA3649CD5","user_header":"https://static001.geekbang.org/account/avatar/00/12/ff/3f/bbb8a88c.jpg","comment_is_top":false,"comment_ctime":1575194618,"is_pvip":false,"replies":[{"id":60432,"content":"ä½ æµ‹è¯•äº†å—ï¼ŸğŸ§\n\næˆ‘è¯•äº†ä½ è¿™æ ·çš„ä»£ç æ˜¯å¯ä»¥å·¥ä½œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575210955,"ip_address":"","comment_id":157563,"utype":1}],"discussion_count":2,"race_medal":0,"score":16,"product_id":100040501,"comment_content":"è€å¸ˆä½ çš„æ™ºèƒ½æŒ‡é’ˆä»£ç   åº”è¯¥è¿˜ç¼ºä¹äº†constç±»å‹çš„èµ‹å€¼\n     base* b=new base;\n     const CD* pConst=b;\nä¸Šè¿°èµ‹å€¼æ˜¯åˆæ³•çš„è€Œæ¥åˆ°æ™ºèƒ½æŒ‡é’ˆç”±äºSmartPtr&lt;base&gt;ã€ SmartPtr&lt;const base&gt; åœ¨ç¼–è¯‘å™¨çœ‹æ¥æ˜¯å®Œå…¨ä¸åŒçš„ç±»å‹ä¸‹é¢çš„æ“ä½œå°†ä¼šæ— æ³•ç¼–è¯‘\n     SmartPtr&lt;base&gt; p1(new base);\n     SmartPtr&lt;const base&gt; p2=p1;","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476468,"discussion_content":"ä½ æµ‹è¯•äº†å—ï¼ŸğŸ§\n\næˆ‘è¯•äº†ä½ è¿™æ ·çš„ä»£ç æ˜¯å¯ä»¥å·¥ä½œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575210955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1244991,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ff/3f/bbb8a88c.jpg","nickname":"å¾å‡¯","note":"","ucode":"12F82BA3649CD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68269,"discussion_content":"æŠ±æ­‰ ä¸Šé¢æ‰“é”™äº† CDåº”è¯¥æ˜¯base","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575207643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157547,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1575191393,"is_pvip":false,"replies":[{"id":60427,"content":"æ‰€æœ‰ä»£ç å…¨éƒ½ç¼–è¯‘è¿‡çš„â€¦â€¦ä¸€ã€å‚ç…§ä»£ç åˆ—è¡¨ï¼Œç›´æ¥æ‹·è´ç²˜è´´ã€‚äºŒã€è¿˜æœ‰é—®é¢˜çš„è¯ï¼Œæ˜¯ä¸æ˜¯ä½ çš„ç¼–è¯‘å™¨å¤ªè€ï¼Ÿå‚ç…§ç¯å¢ƒè¯´æ˜é‚£ç¯‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575203571,"ip_address":"","comment_id":157547,"utype":1}],"discussion_count":2,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"è€å¸ˆçš„ä»£ç æœ‰ç¼–è¯‘è¿‡å˜›ï¼Œæˆ‘åœ¨æ‹·è´æ„é€ å‡½æ•°å®šä¹‰ä¸Šæ–¹æ·»åŠ \n  template &lt;typename U&gt;\n  friend class smart_ptr;\nç¼–è¯‘æ—¶æŠ¥é”™äº†ï¼Œæç¤ºundeclared identifier U, ä¸çŸ¥é“æ˜¯ä¸ºå•¥ï¼Ÿ","like_count":0},{"had_liked":false,"id":157490,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1575175489,"is_pvip":false,"replies":[{"id":60384,"content":"ä¸æ˜¯ã€‚ä½ å†™çš„é‚£ç§å½¢å¼ä¸åˆæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575189137,"ip_address":"","comment_id":157490,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"æœ‰ä¸ªå°ç–‘æƒ‘ï¼Œfriend class smart_ptr; æ˜¯ä¸æ˜¯friend class smart_ptr&lt;T&gt;; çš„ç®€å†™å‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476446,"discussion_content":"ä¸æ˜¯ã€‚ä½ å†™çš„é‚£ç§å½¢å¼ä¸åˆæ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575189137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157327,"user_name":"nelson","can_delete":false,"product_type":"c1","uid":1271183,"ip_address":"","ucode":"773BE75A23C1C9","user_header":"","comment_is_top":false,"comment_ctime":1575110202,"is_pvip":false,"replies":[{"id":60331,"content":"ä¸»è¦æ˜¯ä¹ æƒ¯é—®é¢˜å§ã€‚æˆ‘ä¸ªäººä¸å–œæ¬¢ç”¨ friendï¼Œèƒ½ä¸ç”¨å°±ä¸ç”¨ã€‚å¦å¤–ï¼Œä½œä¸ºæˆå‘˜å‡½æ•°ï¼Œç›´æ¥å†™ swap(rhs) ä¹Ÿæ›´å¿«æ·ã€‚ä½†ä¸ºäº†æ–¹ä¾¿åˆ«äººï¼Œåœ¨ç±»å¤–é¢å®šä¹‰ swap ä¹Ÿæ˜¯éœ€è¦çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575120569,"ip_address":"","comment_id":157327,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"ä»£ç å®ç°ä¸­ä½¿ç”¨äº†ä¸¤ä¸ªswapï¼Œä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œä¸€ä¸ªæ¨¡æ¿å‡½æ•°ã€‚è¿™ä¸ªæ–¹æ³•å’Œä½¿ç”¨ä¸€ä¸ªå‹å…ƒå‡½æ•°\nfriend void swap(smart_ptr &amp;lhs,\n                     smart_ptr &amp;rhs) noexcept\n{\n    using std::swap;\n    swap(lhs.ptr_, rhs.ptr_);\n    swap(lhs.shared_count_,  rhs.shared_count_);\n}\nè¿™ä¸¤ç§æ–¹æ³•å“ªä¸ªæ›´åˆé€‚ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476397,"discussion_content":"ä¸»è¦æ˜¯ä¹ æƒ¯é—®é¢˜å§ã€‚æˆ‘ä¸ªäººä¸å–œæ¬¢ç”¨ friendï¼Œèƒ½ä¸ç”¨å°±ä¸ç”¨ã€‚å¦å¤–ï¼Œä½œä¸ºæˆå‘˜å‡½æ•°ï¼Œç›´æ¥å†™ swap(rhs) ä¹Ÿæ›´å¿«æ·ã€‚ä½†ä¸ºäº†æ–¹ä¾¿åˆ«äººï¼Œåœ¨ç±»å¤–é¢å®šä¹‰ swap ä¹Ÿæ˜¯éœ€è¦çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575120569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156973,"user_name":"åƒé²¤æ¹–","can_delete":false,"product_type":"c1","uid":1076506,"ip_address":"","ucode":"C626F15967C219","user_header":"https://static001.geekbang.org/account/avatar/00/10/6d/1a/d1d44258.jpg","comment_is_top":false,"comment_ctime":1575006394,"is_pvip":false,"replies":[{"id":60268,"content":"æœ‰åŒºåˆ«çš„ï¼Œçœ‹åˆ°äº†å—ï¼ŸåŸå› åœ¨æ–‡ä¸­â€œå­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢â€é‚£èŠ‚è®²åˆ°è¿‡ã€‚ç°åœ¨ä¸ç†Ÿæ‚‰ä¹Ÿæ²¡å…³ç³»ã€‚è¿™äº›çç»†çš„è§„åˆ™ä¸éœ€è¦åœ¨ç°åœ¨æŒæ¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575027605,"ip_address":"","comment_id":156973,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"\næœ€åä»£ç é‡Œé¢çš„ L48 L59ï¼Œè¿™ä¸¤ä¸ªæ„é€ æ˜¯ä¸æ˜¯é‡å¤äº†å•Šï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476291,"discussion_content":"æœ‰åŒºåˆ«çš„ï¼Œçœ‹åˆ°äº†å—ï¼ŸåŸå› åœ¨æ–‡ä¸­â€œå­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢â€é‚£èŠ‚è®²åˆ°è¿‡ã€‚ç°åœ¨ä¸ç†Ÿæ‚‰ä¹Ÿæ²¡å…³ç³»ã€‚è¿™äº›çç»†çš„è§„åˆ™ä¸éœ€è¦åœ¨ç°åœ¨æŒæ¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575027605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156787,"user_name":"æå…¬å­èƒœæ²»","can_delete":false,"product_type":"c1","uid":1455420,"ip_address":"","ucode":"7D48D78D289935","user_header":"https://static001.geekbang.org/account/avatar/00/16/35/3c/9800b0ba.jpg","comment_is_top":false,"comment_ctime":1574955928,"is_pvip":false,"replies":[{"id":60173,"content":"æ¨¡æ¿æˆ‘è§‰å¾—åº”è¯¥å­¦ã€‚ä½†æ¨¡æ¿ä¸€èˆ¬ç”¨åœ¨é€šç”¨çš„åº“å‡½æ•°ä¸­ï¼Œä½ åº”è¯¥åœ¨ç»™ä½ ä»¬é¡¹ç›®å†™é€šç”¨ç±»åº“çš„æ—¶å€™å†™æ¨¡æ¿ï¼Œè€Œä¸€èˆ¬ä¸éœ€è¦åœ¨å†™åº”ç”¨æ—¶å†™æ¨¡æ¿ä»£ç ã€‚å†™åº”ç”¨æ—¶ä½¿ç”¨æ¨¡æ¿å°±å®Œå…¨æ­£å¸¸äº†ï¼Œå°±åƒä½¿ç”¨STLé‚£äº›ä¸€æ ·ã€‚\n\nè‡³äºACEï¼Œåªåœ¨å¾ˆä¹…ä»¥å‰çœ‹è¿‡ä¸€ç‚¹ï¼Œè§‰å¾—æ—§åŒ…è¢±å¤ªé‡ï¼Œè€Œä¸”ç›®å‰ä½¿ç”¨çœŸä¼¼ä¹ä¸æ€ä¹ˆå¬åˆ°äº†ã€‚å¦‚æœå·¥ä½œä¸­ä¸ç”¨ï¼Œæ‰¾ä¸€äº›æ›´æ–°çš„æ¡†æ¶ä¹Ÿè®¸æ›´å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574983865,"ip_address":"","comment_id":156787,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘æ˜¯ä¸€åC++ç¨‹åºå‘˜å’Œçˆ±å¥½è€…ï¼Œæˆ‘æœ‰ä¸‰å¹´C++ç¼–ç¨‹ç»éªŒï¼Œå¯¹äºC++å¾ˆå¤šçŸ¥è¯†ä¹Ÿæ˜¯å¾ˆæ¨¡ç³Šï¼Œæœ€è¿‘åœ¨å­¦ä¹ æ¨¡æ¿å’Œæ³›å‹æŠ€æœ¯ï¼Œå¯æ˜¯æˆ‘çš„é¡¹ç›®å‡ ä¹ä¸ç”¨æ¨¡æ¿ï¼Œæ‚¨è§‰å¾—æ™®é€šåº”ç”¨ç¨‹åºå‘˜æœ‰å¿…è¦æ·±å…¥å­¦ä¹ æ¨¡æ¿æŠ€æœ¯å—ï¼Ÿè¿™ä¸ªå¯èƒ½èŠ±å¾ˆé•¿çš„æ—¶é—´ï¼ˆè¿™ä¸ªæ—¶é—´å­¦ä¹ åˆ«çš„å¾ˆå®ç”¨çš„ä¸œè¥¿å¯ä»¥å­¦å¾ˆå¤šäº†ï¼‰ã€‚å¦å¤–ï¼Œæˆ‘å­¦ä¹ è®¾è®¡æ¨¡å¼ä¸»è¦æ˜¯å‰–æACEæºç ï¼Œè§‚æ‘©åˆ«äººçš„è®¾è®¡æ–¹æ³•ï¼Œå¯æ˜¯ACEå¤æ‚æ— æ¯”ï¼Œæ— ç–‘è¦èŠ±å¾ˆå¤šæ—¶é—´ã€‚å¦å¤–ACEå·²ç»ç”¨çš„å¾ˆå°‘äº†ï¼Œæ‚¨è§‰å¾—æœ‰å¿…è¦åšæŒä¸‹å»å­¦ä¹ è¿™äº›ä¸œè¥¿å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476229,"discussion_content":"ç¼–è¯‘å™¨åªæŠŠç‰¹å®šå½¢å¼çš„æ„é€ å‡½æ•°å½“ä½œæ‹·è´/ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå¹¶ä¾æ®æ­¤æ¥å†³å®šå¯ç”¨ã€ç¦ç”¨ä¸€äº›é»˜è®¤çš„è¡Œä¸ºã€‚è¿™äº›ç°åœ¨è¿˜ç”¨ä¸ç€è®°ã€‚ä»¥åæˆ‘ä»¬è¿˜ä¼šå›åˆ°è¿™ä¸ªè¯é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574983314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156775,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1574953305,"is_pvip":false,"replies":[{"id":60170,"content":"ç¼–è¯‘å™¨åªæŠŠç‰¹å®šå½¢å¼çš„æ„é€ å‡½æ•°å½“ä½œæ‹·è´&#47;ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå¹¶ä¾æ®æ­¤æ¥å†³å®šå¯ç”¨ã€ç¦ç”¨ä¸€äº›é»˜è®¤çš„è¡Œä¸ºã€‚è¿™äº›ç°åœ¨è¿˜ç”¨ä¸ç€è®°ã€‚ä»¥åæˆ‘ä»¬è¿˜ä¼šå›åˆ°è¿™ä¸ªè¯é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574983314,"ip_address":"","comment_id":156775,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"template &lt;typename U&gt;\nsmart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) { \n\tptr_ = other.release(); \n}\n\nè€å¸ˆï¼Œä¸å¤ªæ˜ç™½â€œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚â€","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476220,"discussion_content":"å¯åšå¯ä¸åšã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘å€¾å‘ä¸åšï¼Œä½†åšä¹Ÿæ²¡å•¥å¤§åŒºåˆ«ã€‚æˆ‘è¿™å„¿æ‰€æœ‰çš„åˆ¤æ–­éƒ½æ˜¯ ptr_ ä¸ºç©ºå°±ä¸çœ‹ shared_count_ çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574951840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485304,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/qrLibiczMaSJfmMuvA1ZqILyhNsuphAcQG8wX1iajTibXU26kmQoGejRGXh8RNK1q3zaaibcfpujrVIYkRlMy5XF6Vw/132","nickname":"æè”šéŸ¬","note":"","ucode":"B5367CD3569C34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64694,"discussion_content":"æ²¡äº‹äº†è€å¸ˆï¼Œæ˜¯æˆ‘è‡ªå·±ç†è§£ä¸åˆ°ä½ï¼Œä¸¤ä¸ªæŒ‡é’ˆçš„é‡Šæ”¾æ˜¯åœ¨æœ€åä¸€ä¸ªvariableå‡ºä½œç”¨åŸŸæ—¶destructorè§¦å‘çš„ï¼Œåœ¨è¿™ä¹‹å‰çš„å‡ºä½œç”¨åŸŸçš„variableå°±æ˜¯å¾ˆç®€å•çš„åˆ æ‰æŒ‡é’ˆè€Œå·²ï¼Œä¸ä¼šé‡Šæ”¾heapä¸Šçš„å†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574952736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485304,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/qrLibiczMaSJfmMuvA1ZqILyhNsuphAcQG8wX1iajTibXU26kmQoGejRGXh8RNK1q3zaaibcfpujrVIYkRlMy5XF6Vw/132","nickname":"æè”šéŸ¬","note":"","ucode":"B5367CD3569C34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64658,"discussion_content":"å—¯å—¯ï¼Œä½†æ˜¯otherçš„å†…å®¹å·²ç»moveç»™äº†å½“å‰smart_ptrï¼Œæˆ‘ä»¬è¦è´Ÿè´£æŠŠotheré‡Šæ”¾æ‰å§ï¼Œæˆ‘çœ‹smart_ptrçš„destructoré‡Œå¦‚æœpträ¸ºç©ºå°±ä¸ä¼šdelete è¿™ä¸ªreference countçš„æŒ‡é’ˆï¼Œæ­£å¥½å¯¹åº”è¿™é‡Œçš„æƒ…å†µã€‚è¿˜æ˜¯è¯´æˆ‘å¯¹äºshared ptrçš„movedè¯­ä¹‰ç†è§£æœ‰é—®é¢˜å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574952389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156744,"user_name":"æè”šéŸ¬","can_delete":false,"product_type":"c1","uid":1485304,"ip_address":"","ucode":"B5367CD3569C34","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/qrLibiczMaSJfmMuvA1ZqILyhNsuphAcQG8wX1iajTibXU26kmQoGejRGXh8RNK1q3zaaibcfpujrVIYkRlMy5XF6Vw/132","comment_is_top":false,"comment_ctime":1574946312,"is_pvip":false,"replies":[{"id":60163,"content":"å¯åšå¯ä¸åšã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘å€¾å‘ä¸åšï¼Œä½†åšä¹Ÿæ²¡å•¥å¤§åŒºåˆ«ã€‚æˆ‘è¿™å„¿æ‰€æœ‰çš„åˆ¤æ–­éƒ½æ˜¯ ptr_ ä¸ºç©ºå°±ä¸çœ‹ shared_count_ çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574951840,"ip_address":"","comment_id":156744,"utype":1}],"discussion_count":3,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"\n  template &lt;typename U&gt;\n  smart_ptr(const smart_ptr&lt;U&gt;&amp; other)\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      other.shared_count_\n        -&gt;add_count();\n      shared_count_ =\n        other.shared_count_;\n    }\n  }\n  template &lt;typename U&gt;\n  smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      shared_count_ =\n        other.shared_count_;\n      other.ptr_ = nullptr;\n    }\n  }\n\nè€å¸ˆä½ å¥½ï¼Œè¿™é‡Œmove constructorçš„æœ€åæ˜¯ä¸æ˜¯è¿˜è¦other.shared_count = nullpträ¸€ä¸‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476191,"discussion_content":"åœ¨â€œæŒ‡é’ˆç±»å‹è½¬æ¢â€ä¸€èŠ‚ä¸Šé¢ï¼Œæœ‰è¾ƒå®Œæ•´çš„æµ‹è¯•ä»£ç çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574947670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156667,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574933153,"is_pvip":false,"replies":[{"id":60158,"content":"åœ¨â€œæŒ‡é’ˆç±»å‹è½¬æ¢â€ä¸€èŠ‚ä¸Šé¢ï¼Œæœ‰è¾ƒå®Œæ•´çš„æµ‹è¯•ä»£ç çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574947670,"ip_address":"","comment_id":156667,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"è€å¸ˆæˆ‘æä¸ªå»ºè®®å•Š é’ˆå¯¹ä¸Šé¢çš„smart_ptrå®ä¾‹ä»£ç æœ€å¥½èƒ½å¤Ÿä¸ªæµ‹è¯•ä»£ç   æ¯”å¦‚å†™ä¸ªmainå‡½æ•°é‡Œé¢å®ä¾‹åŒ–å‡ ä¸ªæ™ºèƒ½æŒ‡é’ˆ ç„¶åè¿›è¡Œæµ‹è¯• æˆ‘è§‰å¾—è¿™æ ·å¯èƒ½æ›´å¥½ä¸€ç‚¹å„¿","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476188,"discussion_content":"è¿™ä¸ªåœ¨æ­£æ–‡é‡Œå†™äº†ã€‚æœâ€œfriendâ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574938077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156652,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574930718,"is_pvip":false,"replies":[{"id":60137,"content":"è¿™ä¸ªåœ¨æ­£æ–‡é‡Œå†™äº†ã€‚æœâ€œfriendâ€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574938077,"ip_address":"","comment_id":156652,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ ä¸ºä»€ä¹ˆè¦åœ¨smart_ptrç±»å½“ä¸­ è®¾ç½®smart_pträ¸ºå‹å…ƒä¸æ˜¯å¾ˆæ˜ç™½\ntemplate &lt;typename T&gt;\nclass smart_ptr {\n       public:  \n       template &lt;typename U&gt;\n       friend class smart_ptr; ä¸ºä»€ä¹ˆè¦è®¾ç½®è‡ªå·±ä¸ºå‹å…ƒå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476188,"discussion_content":"è¿™ä¸ªåœ¨æ­£æ–‡é‡Œå†™äº†ã€‚æœâ€œfriendâ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574938077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156642,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574929261,"is_pvip":false,"replies":[{"id":60133,"content":"åˆ†ä¸¤å±‚å¼€çœ‹ã€‚æ¨¡æ¿ä»£ç ç¡®å®å¾ˆéš¾å†™å¥½ï¼Œå®¹æ˜“å‡ºé”™ã€‚ä½†ä¸€æ—¦å†™å¥½ï¼Œè®©åˆ«äººåªæ˜¯è°ƒç”¨è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ä¸€èˆ¬åº”ç”¨é¡¹ç›®ä¸­ï¼Œåº”å½“å°½é‡åªä½¿ç”¨æ¨¡æ¿ï¼Œè€Œä¸æ˜¯å†™æ¨¡æ¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574935779,"ip_address":"","comment_id":156642,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"å¤ä¹ åˆ°æ„é€ å’ŒæŒ‡é’ˆçš„å¼•ç”¨ æ€»ç»“å¾—å‡ºè™½ç„¶cppæ€§èƒ½é«˜ ä½†æ˜¯ç”¨å¾—å¥½å°±æ˜¯ç‰›é€¼ ç”¨å¾—ä¸å¥½å°±æ˜¯ç¾éš¾!","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476184,"discussion_content":"åˆ†ä¸¤å±‚å¼€çœ‹ã€‚æ¨¡æ¿ä»£ç ç¡®å®å¾ˆéš¾å†™å¥½ï¼Œå®¹æ˜“å‡ºé”™ã€‚ä½†ä¸€æ—¦å†™å¥½ï¼Œè®©åˆ«äººåªæ˜¯è°ƒç”¨è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ä¸€èˆ¬åº”ç”¨é¡¹ç›®ä¸­ï¼Œåº”å½“å°½é‡åªä½¿ç”¨æ¨¡æ¿ï¼Œè€Œä¸æ˜¯å†™æ¨¡æ¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574935779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157547,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1575191393,"is_pvip":false,"replies":[{"id":60427,"content":"æ‰€æœ‰ä»£ç å…¨éƒ½ç¼–è¯‘è¿‡çš„â€¦â€¦ä¸€ã€å‚ç…§ä»£ç åˆ—è¡¨ï¼Œç›´æ¥æ‹·è´ç²˜è´´ã€‚äºŒã€è¿˜æœ‰é—®é¢˜çš„è¯ï¼Œæ˜¯ä¸æ˜¯ä½ çš„ç¼–è¯‘å™¨å¤ªè€ï¼Ÿå‚ç…§ç¯å¢ƒè¯´æ˜é‚£ç¯‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575203571,"ip_address":"","comment_id":157547,"utype":1}],"discussion_count":2,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"è€å¸ˆçš„ä»£ç æœ‰ç¼–è¯‘è¿‡å˜›ï¼Œæˆ‘åœ¨æ‹·è´æ„é€ å‡½æ•°å®šä¹‰ä¸Šæ–¹æ·»åŠ \n  template &lt;typename U&gt;\n  friend class smart_ptr;\nç¼–è¯‘æ—¶æŠ¥é”™äº†ï¼Œæç¤ºundeclared identifier U, ä¸çŸ¥é“æ˜¯ä¸ºå•¥ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476462,"discussion_content":"æ‰€æœ‰ä»£ç å…¨éƒ½ç¼–è¯‘è¿‡çš„â€¦â€¦ä¸€ã€å‚ç…§ä»£ç åˆ—è¡¨ï¼Œç›´æ¥æ‹·è´ç²˜è´´ã€‚äºŒã€è¿˜æœ‰é—®é¢˜çš„è¯ï¼Œæ˜¯ä¸æ˜¯ä½ çš„ç¼–è¯‘å™¨å¤ªè€ï¼Ÿå‚ç…§ç¯å¢ƒè¯´æ˜é‚£ç¯‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575203571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68003,"discussion_content":"sorry, çœ‹åˆ°åé¢å®Œæ•´ä»£ç äº†ï¼Œè¿™ä¸¤è¡Œåº”è¯¥ç´§è·Ÿåœ¨public åé¢ï¼Œæˆ‘åˆšå¼€å§‹å†™åˆ°å‡½æ•°å£°æ˜å®šä¹‰å¤„äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575194889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157490,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1575175489,"is_pvip":false,"replies":[{"id":60384,"content":"ä¸æ˜¯ã€‚ä½ å†™çš„é‚£ç§å½¢å¼ä¸åˆæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575189137,"ip_address":"","comment_id":157490,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"æœ‰ä¸ªå°ç–‘æƒ‘ï¼Œfriend class smart_ptr; æ˜¯ä¸æ˜¯friend class smart_ptr&lt;T&gt;; çš„ç®€å†™å‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476462,"discussion_content":"æ‰€æœ‰ä»£ç å…¨éƒ½ç¼–è¯‘è¿‡çš„â€¦â€¦ä¸€ã€å‚ç…§ä»£ç åˆ—è¡¨ï¼Œç›´æ¥æ‹·è´ç²˜è´´ã€‚äºŒã€è¿˜æœ‰é—®é¢˜çš„è¯ï¼Œæ˜¯ä¸æ˜¯ä½ çš„ç¼–è¯‘å™¨å¤ªè€ï¼Ÿå‚ç…§ç¯å¢ƒè¯´æ˜é‚£ç¯‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575203571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212323,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","nickname":"robonix","note":"","ucode":"866EC82EDA455B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68003,"discussion_content":"sorry, çœ‹åˆ°åé¢å®Œæ•´ä»£ç äº†ï¼Œè¿™ä¸¤è¡Œåº”è¯¥ç´§è·Ÿåœ¨public åé¢ï¼Œæˆ‘åˆšå¼€å§‹å†™åˆ°å‡½æ•°å£°æ˜å®šä¹‰å¤„äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575194889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157327,"user_name":"nelson","can_delete":false,"product_type":"c1","uid":1271183,"ip_address":"","ucode":"773BE75A23C1C9","user_header":"","comment_is_top":false,"comment_ctime":1575110202,"is_pvip":false,"replies":[{"id":60331,"content":"ä¸»è¦æ˜¯ä¹ æƒ¯é—®é¢˜å§ã€‚æˆ‘ä¸ªäººä¸å–œæ¬¢ç”¨ friendï¼Œèƒ½ä¸ç”¨å°±ä¸ç”¨ã€‚å¦å¤–ï¼Œä½œä¸ºæˆå‘˜å‡½æ•°ï¼Œç›´æ¥å†™ swap(rhs) ä¹Ÿæ›´å¿«æ·ã€‚ä½†ä¸ºäº†æ–¹ä¾¿åˆ«äººï¼Œåœ¨ç±»å¤–é¢å®šä¹‰ swap ä¹Ÿæ˜¯éœ€è¦çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575120569,"ip_address":"","comment_id":157327,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"ä»£ç å®ç°ä¸­ä½¿ç”¨äº†ä¸¤ä¸ªswapï¼Œä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œä¸€ä¸ªæ¨¡æ¿å‡½æ•°ã€‚è¿™ä¸ªæ–¹æ³•å’Œä½¿ç”¨ä¸€ä¸ªå‹å…ƒå‡½æ•°\nfriend void swap(smart_ptr &amp;lhs,\n                     smart_ptr &amp;rhs) noexcept\n{\n    using std::swap;\n    swap(lhs.ptr_, rhs.ptr_);\n    swap(lhs.shared_count_,  rhs.shared_count_);\n}\nè¿™ä¸¤ç§æ–¹æ³•å“ªä¸ªæ›´åˆé€‚ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476446,"discussion_content":"ä¸æ˜¯ã€‚ä½ å†™çš„é‚£ç§å½¢å¼ä¸åˆæ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575189137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156973,"user_name":"åƒé²¤æ¹–","can_delete":false,"product_type":"c1","uid":1076506,"ip_address":"","ucode":"C626F15967C219","user_header":"https://static001.geekbang.org/account/avatar/00/10/6d/1a/d1d44258.jpg","comment_is_top":false,"comment_ctime":1575006394,"is_pvip":false,"replies":[{"id":60268,"content":"æœ‰åŒºåˆ«çš„ï¼Œçœ‹åˆ°äº†å—ï¼ŸåŸå› åœ¨æ–‡ä¸­â€œå­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢â€é‚£èŠ‚è®²åˆ°è¿‡ã€‚ç°åœ¨ä¸ç†Ÿæ‚‰ä¹Ÿæ²¡å…³ç³»ã€‚è¿™äº›çç»†çš„è§„åˆ™ä¸éœ€è¦åœ¨ç°åœ¨æŒæ¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1575027605,"ip_address":"","comment_id":156973,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"\næœ€åä»£ç é‡Œé¢çš„ L48 L59ï¼Œè¿™ä¸¤ä¸ªæ„é€ æ˜¯ä¸æ˜¯é‡å¤äº†å•Šï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476397,"discussion_content":"ä¸»è¦æ˜¯ä¹ æƒ¯é—®é¢˜å§ã€‚æˆ‘ä¸ªäººä¸å–œæ¬¢ç”¨ friendï¼Œèƒ½ä¸ç”¨å°±ä¸ç”¨ã€‚å¦å¤–ï¼Œä½œä¸ºæˆå‘˜å‡½æ•°ï¼Œç›´æ¥å†™ swap(rhs) ä¹Ÿæ›´å¿«æ·ã€‚ä½†ä¸ºäº†æ–¹ä¾¿åˆ«äººï¼Œåœ¨ç±»å¤–é¢å®šä¹‰ swap ä¹Ÿæ˜¯éœ€è¦çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575120569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156787,"user_name":"æå…¬å­èƒœæ²»","can_delete":false,"product_type":"c1","uid":1455420,"ip_address":"","ucode":"7D48D78D289935","user_header":"https://static001.geekbang.org/account/avatar/00/16/35/3c/9800b0ba.jpg","comment_is_top":false,"comment_ctime":1574955928,"is_pvip":false,"replies":[{"id":60173,"content":"æ¨¡æ¿æˆ‘è§‰å¾—åº”è¯¥å­¦ã€‚ä½†æ¨¡æ¿ä¸€èˆ¬ç”¨åœ¨é€šç”¨çš„åº“å‡½æ•°ä¸­ï¼Œä½ åº”è¯¥åœ¨ç»™ä½ ä»¬é¡¹ç›®å†™é€šç”¨ç±»åº“çš„æ—¶å€™å†™æ¨¡æ¿ï¼Œè€Œä¸€èˆ¬ä¸éœ€è¦åœ¨å†™åº”ç”¨æ—¶å†™æ¨¡æ¿ä»£ç ã€‚å†™åº”ç”¨æ—¶ä½¿ç”¨æ¨¡æ¿å°±å®Œå…¨æ­£å¸¸äº†ï¼Œå°±åƒä½¿ç”¨STLé‚£äº›ä¸€æ ·ã€‚\n\nè‡³äºACEï¼Œåªåœ¨å¾ˆä¹…ä»¥å‰çœ‹è¿‡ä¸€ç‚¹ï¼Œè§‰å¾—æ—§åŒ…è¢±å¤ªé‡ï¼Œè€Œä¸”ç›®å‰ä½¿ç”¨çœŸä¼¼ä¹ä¸æ€ä¹ˆå¬åˆ°äº†ã€‚å¦‚æœå·¥ä½œä¸­ä¸ç”¨ï¼Œæ‰¾ä¸€äº›æ›´æ–°çš„æ¡†æ¶ä¹Ÿè®¸æ›´å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574983865,"ip_address":"","comment_id":156787,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘æ˜¯ä¸€åC++ç¨‹åºå‘˜å’Œçˆ±å¥½è€…ï¼Œæˆ‘æœ‰ä¸‰å¹´C++ç¼–ç¨‹ç»éªŒï¼Œå¯¹äºC++å¾ˆå¤šçŸ¥è¯†ä¹Ÿæ˜¯å¾ˆæ¨¡ç³Šï¼Œæœ€è¿‘åœ¨å­¦ä¹ æ¨¡æ¿å’Œæ³›å‹æŠ€æœ¯ï¼Œå¯æ˜¯æˆ‘çš„é¡¹ç›®å‡ ä¹ä¸ç”¨æ¨¡æ¿ï¼Œæ‚¨è§‰å¾—æ™®é€šåº”ç”¨ç¨‹åºå‘˜æœ‰å¿…è¦æ·±å…¥å­¦ä¹ æ¨¡æ¿æŠ€æœ¯å—ï¼Ÿè¿™ä¸ªå¯èƒ½èŠ±å¾ˆé•¿çš„æ—¶é—´ï¼ˆè¿™ä¸ªæ—¶é—´å­¦ä¹ åˆ«çš„å¾ˆå®ç”¨çš„ä¸œè¥¿å¯ä»¥å­¦å¾ˆå¤šäº†ï¼‰ã€‚å¦å¤–ï¼Œæˆ‘å­¦ä¹ è®¾è®¡æ¨¡å¼ä¸»è¦æ˜¯å‰–æACEæºç ï¼Œè§‚æ‘©åˆ«äººçš„è®¾è®¡æ–¹æ³•ï¼Œå¯æ˜¯ACEå¤æ‚æ— æ¯”ï¼Œæ— ç–‘è¦èŠ±å¾ˆå¤šæ—¶é—´ã€‚å¦å¤–ACEå·²ç»ç”¨çš„å¾ˆå°‘äº†ï¼Œæ‚¨è§‰å¾—æœ‰å¿…è¦åšæŒä¸‹å»å­¦ä¹ è¿™äº›ä¸œè¥¿å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476232,"discussion_content":"æ¨¡æ¿æˆ‘è§‰å¾—åº”è¯¥å­¦ã€‚ä½†æ¨¡æ¿ä¸€èˆ¬ç”¨åœ¨é€šç”¨çš„åº“å‡½æ•°ä¸­ï¼Œä½ åº”è¯¥åœ¨ç»™ä½ ä»¬é¡¹ç›®å†™é€šç”¨ç±»åº“çš„æ—¶å€™å†™æ¨¡æ¿ï¼Œè€Œä¸€èˆ¬ä¸éœ€è¦åœ¨å†™åº”ç”¨æ—¶å†™æ¨¡æ¿ä»£ç ã€‚å†™åº”ç”¨æ—¶ä½¿ç”¨æ¨¡æ¿å°±å®Œå…¨æ­£å¸¸äº†ï¼Œå°±åƒä½¿ç”¨STLé‚£äº›ä¸€æ ·ã€‚\n\nè‡³äºACEï¼Œåªåœ¨å¾ˆä¹…ä»¥å‰çœ‹è¿‡ä¸€ç‚¹ï¼Œè§‰å¾—æ—§åŒ…è¢±å¤ªé‡ï¼Œè€Œä¸”ç›®å‰ä½¿ç”¨çœŸä¼¼ä¹ä¸æ€ä¹ˆå¬åˆ°äº†ã€‚å¦‚æœå·¥ä½œä¸­ä¸ç”¨ï¼Œæ‰¾ä¸€äº›æ›´æ–°çš„æ¡†æ¶ä¹Ÿè®¸æ›´å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574983865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156775,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1574953305,"is_pvip":false,"replies":[{"id":60170,"content":"ç¼–è¯‘å™¨åªæŠŠç‰¹å®šå½¢å¼çš„æ„é€ å‡½æ•°å½“ä½œæ‹·è´&#47;ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå¹¶ä¾æ®æ­¤æ¥å†³å®šå¯ç”¨ã€ç¦ç”¨ä¸€äº›é»˜è®¤çš„è¡Œä¸ºã€‚è¿™äº›ç°åœ¨è¿˜ç”¨ä¸ç€è®°ã€‚ä»¥åæˆ‘ä»¬è¿˜ä¼šå›åˆ°è¿™ä¸ªè¯é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574983314,"ip_address":"","comment_id":156775,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"template &lt;typename U&gt;\nsmart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other) { \n\tptr_ = other.release(); \n}\n\nè€å¸ˆï¼Œä¸å¤ªæ˜ç™½â€œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚â€","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476291,"discussion_content":"æœ‰åŒºåˆ«çš„ï¼Œçœ‹åˆ°äº†å—ï¼ŸåŸå› åœ¨æ–‡ä¸­â€œå­ç±»æŒ‡é’ˆå‘åŸºç±»æŒ‡é’ˆçš„è½¬æ¢â€é‚£èŠ‚è®²åˆ°è¿‡ã€‚ç°åœ¨ä¸ç†Ÿæ‚‰ä¹Ÿæ²¡å…³ç³»ã€‚è¿™äº›çç»†çš„è§„åˆ™ä¸éœ€è¦åœ¨ç°åœ¨æŒæ¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575027605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156744,"user_name":"æè”šéŸ¬","can_delete":false,"product_type":"c1","uid":1485304,"ip_address":"","ucode":"B5367CD3569C34","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/qrLibiczMaSJfmMuvA1ZqILyhNsuphAcQG8wX1iajTibXU26kmQoGejRGXh8RNK1q3zaaibcfpujrVIYkRlMy5XF6Vw/132","comment_is_top":false,"comment_ctime":1574946312,"is_pvip":false,"replies":[{"id":60163,"content":"å¯åšå¯ä¸åšã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘å€¾å‘ä¸åšï¼Œä½†åšä¹Ÿæ²¡å•¥å¤§åŒºåˆ«ã€‚æˆ‘è¿™å„¿æ‰€æœ‰çš„åˆ¤æ–­éƒ½æ˜¯ ptr_ ä¸ºç©ºå°±ä¸çœ‹ shared_count_ çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574951840,"ip_address":"","comment_id":156744,"utype":1}],"discussion_count":3,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"\n  template &lt;typename U&gt;\n  smart_ptr(const smart_ptr&lt;U&gt;&amp; other)\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      other.shared_count_\n        -&gt;add_count();\n      shared_count_ =\n        other.shared_count_;\n    }\n  }\n  template &lt;typename U&gt;\n  smart_ptr(smart_ptr&lt;U&gt;&amp;&amp; other)\n  {\n    ptr_ = other.ptr_;\n    if (ptr_) {\n      shared_count_ =\n        other.shared_count_;\n      other.ptr_ = nullptr;\n    }\n  }\n\nè€å¸ˆä½ å¥½ï¼Œè¿™é‡Œmove constructorçš„æœ€åæ˜¯ä¸æ˜¯è¿˜è¦other.shared_count = nullpträ¸€ä¸‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476232,"discussion_content":"æ¨¡æ¿æˆ‘è§‰å¾—åº”è¯¥å­¦ã€‚ä½†æ¨¡æ¿ä¸€èˆ¬ç”¨åœ¨é€šç”¨çš„åº“å‡½æ•°ä¸­ï¼Œä½ åº”è¯¥åœ¨ç»™ä½ ä»¬é¡¹ç›®å†™é€šç”¨ç±»åº“çš„æ—¶å€™å†™æ¨¡æ¿ï¼Œè€Œä¸€èˆ¬ä¸éœ€è¦åœ¨å†™åº”ç”¨æ—¶å†™æ¨¡æ¿ä»£ç ã€‚å†™åº”ç”¨æ—¶ä½¿ç”¨æ¨¡æ¿å°±å®Œå…¨æ­£å¸¸äº†ï¼Œå°±åƒä½¿ç”¨STLé‚£äº›ä¸€æ ·ã€‚\n\nè‡³äºACEï¼Œåªåœ¨å¾ˆä¹…ä»¥å‰çœ‹è¿‡ä¸€ç‚¹ï¼Œè§‰å¾—æ—§åŒ…è¢±å¤ªé‡ï¼Œè€Œä¸”ç›®å‰ä½¿ç”¨çœŸä¼¼ä¹ä¸æ€ä¹ˆå¬åˆ°äº†ã€‚å¦‚æœå·¥ä½œä¸­ä¸ç”¨ï¼Œæ‰¾ä¸€äº›æ›´æ–°çš„æ¡†æ¶ä¹Ÿè®¸æ›´å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574983865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156667,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574933153,"is_pvip":false,"replies":[{"id":60158,"content":"åœ¨â€œæŒ‡é’ˆç±»å‹è½¬æ¢â€ä¸€èŠ‚ä¸Šé¢ï¼Œæœ‰è¾ƒå®Œæ•´çš„æµ‹è¯•ä»£ç çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574947670,"ip_address":"","comment_id":156667,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"è€å¸ˆæˆ‘æä¸ªå»ºè®®å•Š é’ˆå¯¹ä¸Šé¢çš„smart_ptrå®ä¾‹ä»£ç æœ€å¥½èƒ½å¤Ÿä¸ªæµ‹è¯•ä»£ç   æ¯”å¦‚å†™ä¸ªmainå‡½æ•°é‡Œé¢å®ä¾‹åŒ–å‡ ä¸ªæ™ºèƒ½æŒ‡é’ˆ ç„¶åè¿›è¡Œæµ‹è¯• æˆ‘è§‰å¾—è¿™æ ·å¯èƒ½æ›´å¥½ä¸€ç‚¹å„¿","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476229,"discussion_content":"ç¼–è¯‘å™¨åªæŠŠç‰¹å®šå½¢å¼çš„æ„é€ å‡½æ•°å½“ä½œæ‹·è´/ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå¹¶ä¾æ®æ­¤æ¥å†³å®šå¯ç”¨ã€ç¦ç”¨ä¸€äº›é»˜è®¤çš„è¡Œä¸ºã€‚è¿™äº›ç°åœ¨è¿˜ç”¨ä¸ç€è®°ã€‚ä»¥åæˆ‘ä»¬è¿˜ä¼šå›åˆ°è¿™ä¸ªè¯é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574983314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156652,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574930718,"is_pvip":false,"replies":[{"id":60137,"content":"è¿™ä¸ªåœ¨æ­£æ–‡é‡Œå†™äº†ã€‚æœâ€œfriendâ€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574938077,"ip_address":"","comment_id":156652,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"è€å¸ˆä½ å¥½ ä¸ºä»€ä¹ˆè¦åœ¨smart_ptrç±»å½“ä¸­ è®¾ç½®smart_pträ¸ºå‹å…ƒä¸æ˜¯å¾ˆæ˜ç™½\ntemplate &lt;typename T&gt;\nclass smart_ptr {\n       public:  \n       template &lt;typename U&gt;\n       friend class smart_ptr; ä¸ºä»€ä¹ˆè¦è®¾ç½®è‡ªå·±ä¸ºå‹å…ƒå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476220,"discussion_content":"å¯åšå¯ä¸åšã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘å€¾å‘ä¸åšï¼Œä½†åšä¹Ÿæ²¡å•¥å¤§åŒºåˆ«ã€‚æˆ‘è¿™å„¿æ‰€æœ‰çš„åˆ¤æ–­éƒ½æ˜¯ ptr_ ä¸ºç©ºå°±ä¸çœ‹ shared_count_ çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574951840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485304,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/qrLibiczMaSJfmMuvA1ZqILyhNsuphAcQG8wX1iajTibXU26kmQoGejRGXh8RNK1q3zaaibcfpujrVIYkRlMy5XF6Vw/132","nickname":"æè”šéŸ¬","note":"","ucode":"B5367CD3569C34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64694,"discussion_content":"æ²¡äº‹äº†è€å¸ˆï¼Œæ˜¯æˆ‘è‡ªå·±ç†è§£ä¸åˆ°ä½ï¼Œä¸¤ä¸ªæŒ‡é’ˆçš„é‡Šæ”¾æ˜¯åœ¨æœ€åä¸€ä¸ªvariableå‡ºä½œç”¨åŸŸæ—¶destructorè§¦å‘çš„ï¼Œåœ¨è¿™ä¹‹å‰çš„å‡ºä½œç”¨åŸŸçš„variableå°±æ˜¯å¾ˆç®€å•çš„åˆ æ‰æŒ‡é’ˆè€Œå·²ï¼Œä¸ä¼šé‡Šæ”¾heapä¸Šçš„å†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574952736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485304,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/qrLibiczMaSJfmMuvA1ZqILyhNsuphAcQG8wX1iajTibXU26kmQoGejRGXh8RNK1q3zaaibcfpujrVIYkRlMy5XF6Vw/132","nickname":"æè”šéŸ¬","note":"","ucode":"B5367CD3569C34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64658,"discussion_content":"å—¯å—¯ï¼Œä½†æ˜¯otherçš„å†…å®¹å·²ç»moveç»™äº†å½“å‰smart_ptrï¼Œæˆ‘ä»¬è¦è´Ÿè´£æŠŠotheré‡Šæ”¾æ‰å§ï¼Œæˆ‘çœ‹smart_ptrçš„destructoré‡Œå¦‚æœpträ¸ºç©ºå°±ä¸ä¼šdelete è¿™ä¸ªreference countçš„æŒ‡é’ˆï¼Œæ­£å¥½å¯¹åº”è¿™é‡Œçš„æƒ…å†µã€‚è¿˜æ˜¯è¯´æˆ‘å¯¹äºshared ptrçš„movedè¯­ä¹‰ç†è§£æœ‰é—®é¢˜å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574952389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156642,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574929261,"is_pvip":false,"replies":[{"id":60133,"content":"åˆ†ä¸¤å±‚å¼€çœ‹ã€‚æ¨¡æ¿ä»£ç ç¡®å®å¾ˆéš¾å†™å¥½ï¼Œå®¹æ˜“å‡ºé”™ã€‚ä½†ä¸€æ—¦å†™å¥½ï¼Œè®©åˆ«äººåªæ˜¯è°ƒç”¨è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ä¸€èˆ¬åº”ç”¨é¡¹ç›®ä¸­ï¼Œåº”å½“å°½é‡åªä½¿ç”¨æ¨¡æ¿ï¼Œè€Œä¸æ˜¯å†™æ¨¡æ¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574935779,"ip_address":"","comment_id":156642,"utype":1}],"discussion_count":1,"race_medal":0,"score":17,"product_id":100040501,"comment_content":"å¤ä¹ åˆ°æ„é€ å’ŒæŒ‡é’ˆçš„å¼•ç”¨ æ€»ç»“å¾—å‡ºè™½ç„¶cppæ€§èƒ½é«˜ ä½†æ˜¯ç”¨å¾—å¥½å°±æ˜¯ç‰›é€¼ ç”¨å¾—ä¸å¥½å°±æ˜¯ç¾éš¾!","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476191,"discussion_content":"åœ¨â€œæŒ‡é’ˆç±»å‹è½¬æ¢â€ä¸€èŠ‚ä¸Šé¢ï¼Œæœ‰è¾ƒå®Œæ•´çš„æµ‹è¯•ä»£ç çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574947670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156630,"user_name":"Geek_4uglyb","can_delete":false,"product_type":"c1","uid":1203822,"ip_address":"","ucode":"3D443DA7DBCC6C","user_header":"https://static001.geekbang.org/account/avatar/00/12/5e/6e/1a032e01.jpg","comment_is_top":false,"comment_ctime":1574926664,"is_pvip":false,"replies":[{"id":60162,"content":"æ²¡æœ‰ç¬”è¯¯ã€‚ä¸è¿‡ï¼Œæˆ‘ç°åœ¨åœ¨æ­£æ–‡ä¸­æ¢äº†ç§è¯´æ³•ï¼Œä¹Ÿè®¸å¯ä»¥å‡å°‘ç‚¹è¯¯è§£ï¼š\n\nâ€œå¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†â€","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574950836,"ip_address":"","comment_id":156630,"utype":1}],"discussion_count":2,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"â€œéœ€è¦æ³¨æ„ï¼Œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚å¦‚æœæˆ‘ä»¬æƒ³ä½¿ä»£ç æ›´ç®€æ´ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†ï¼ˆè§â€œæ‹·è´æ„é€ å’Œèµ‹å€¼â€ä¸€èŠ‚ï¼‰ã€‚  â€ã€‚  ç¬”è¯¯äº†å§ â€œå¦‚æœæˆ‘ä»¬æƒ³ä½¿ä»£ç æ›´ç®€æ´ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯â€ åº”è¯¥æ˜¯ åˆ é™¤æ‹·è´æ„é€ å‡½æ•° å§","like_count":0},{"had_liked":false,"id":156628,"user_name":"å­Ÿå®ªè½²","can_delete":false,"product_type":"c1","uid":1487040,"ip_address":"","ucode":"753879DAAEFB2B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZUA1byglmJVwPuT2BA8ic2iaNFfIfZJicenWiaxdz9nod0KIlxyNTra4qxO7jPDgC1FFCq5CJGgLX5g/132","comment_is_top":false,"comment_ctime":1574926532,"is_pvip":false,"replies":[{"id":60159,"content":"å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›å¯ä»¥ç”¨const smart_ptr&amp;æ¥æ„é€ å‡ºä¸€ä¸ªæ–°çš„smart_ptrã€‚è‡³äºæ–­ç‚¹é—®é¢˜ï¼Œé‚£å°±å¯èƒ½è·Ÿå…·ä½“çš„ç¼–è¯‘å™¨å’Œç¼–è¯‘é€‰é¡¹æœ‰å…³äº†ï¼Œæˆ‘è¿™è¾¹æ²¡å•¥å¥½çš„ç­”æ¡ˆã€‚ï¼ˆæˆ‘è®¾æ–­ç‚¹éƒ½æ²¡æœ‰é—®é¢˜çš„ã€‚ï¼‰\n\nconståªä¿è¯ä¸æ”¹otherçš„æˆå‘˜ï¼Œä¸ä¿è¯ä¸æ”¹æˆå‘˜æŒ‡å‘çš„å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574948165,"ip_address":"","comment_id":156628,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"å®Œæ•´smart_pträ»£ç åˆ—è¡¨ä¸­ï¼Œå½¢å‚otherè¦å¢åŠ å¼•ç”¨è®¡æ•°ï¼Œä¸ºä»€ä¹ˆå‰é¢åŠ constï¼Ÿæˆ‘è°ƒè¯•ä»£ç åŠ constçš„æ„é€ å‡½æ•°ä¸è¿›æ–­ç‚¹ï¼Œå»æ‰constèƒ½æ­£å¸¸è¿›å…¥æ–­ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476180,"discussion_content":"æ²¡æœ‰ç¬”è¯¯ã€‚ä¸è¿‡ï¼Œæˆ‘ç°åœ¨åœ¨æ­£æ–‡ä¸­æ¢äº†ç§è¯´æ³•ï¼Œä¹Ÿè®¸å¯ä»¥å‡å°‘ç‚¹è¯¯è§£ï¼š\n\nâ€œå¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574950836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1203822,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5e/6e/1a032e01.jpg","nickname":"Geek_4uglyb","note":"","ucode":"3D443DA7DBCC6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65356,"discussion_content":"çœ‹äº†ä¸‹effective modern c++çš„æ¡æ¬¾17ï¼Œå‘ç°ä¹‹å‰çš„å›å¤æ˜¯æˆ‘ç†è§£é”™äº†ã€‚ğŸ˜‚ ä¹Ÿå°±æ˜¯è¯´ 1ã€æˆå‘˜å‡½æ•°æ¨¡ç‰ˆä¸ä¼šé˜»æ­¢ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„ç”Ÿæˆï¼›2ã€ç§»åŠ¨æ“ä½œåªåœ¨æ²¡æœ‰æ˜¾ç¤ºå£°æ˜æ‹·è´/ææ„å‡½æ•°çš„ç±»ä¸­ç”Ÿæˆï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574997622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156540,"user_name":"æœ±ç†™","can_delete":false,"product_type":"c1","uid":1039029,"ip_address":"","ucode":"2B9E2B8645A844","user_header":"https://static001.geekbang.org/account/avatar/00/0f/da/b5/9d1f2f55.jpg","comment_is_top":false,"comment_ctime":1574907239,"is_pvip":false,"replies":[{"id":60110,"content":"å—¯ï¼ŒåŠ æ²¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574913886,"ip_address":"","comment_id":156540,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"çœ‹äº†ä¸å°‘è¯¾ç¨‹ï¼Œä½†æ˜¯ç”±äºæ¯è¯­æ˜¯c++ï¼Œå› æ­¤ä¸€ç›´ä¹Ÿæ²¡æœ‰ç•™è¨€ã€‚ç¬¬ä¸€æ¬¡ç•™è¨€ï¼Œè™½ç„¶çœ‹èµ·æ¥ç•¥å¾®åƒåŠ›ï¼Œä½†æ˜¯åŸºæœ¬è¿˜ç®—èƒ½çœ‹æ‡‚ï¼Œè€Œä¸”å¯¹äºä»¥å‰ä¸€äº›æ¨¡ç³Šçš„ä¸œè¥¿çš„ç¡®æœ‰äº†æ›´æ¸…æ™°çš„è®¤è¯†ï¼Œå¾ˆæœŸå¾…åé¢çš„è¯¾ç¨‹~","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476147,"discussion_content":"å—¯ï¼ŒåŠ æ²¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574913886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156291,"user_name":"nullptr","can_delete":false,"product_type":"c1","uid":1759752,"ip_address":"","ucode":"1A26EA0D1A2C10","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqtvuo1wE3XU1mBmtIDfrAQZ2NofBQM5sZhBWicMXicdsrfJ6t87yrlXwqFj0PB6Kx8QU3AVCR4TIHw/132","comment_is_top":false,"comment_ctime":1574851004,"is_pvip":false,"replies":[{"id":60052,"content":"ä¸å¤ªæ˜ç™½ä½ çš„è¯„è®ºã€‚ä¸è¿‡å‘¢ï¼Œå¦‚æœè°è¯»è¿‡Meyersçš„å››æœ¬Effectiveç³»åˆ—ï¼Œè¿™ä¸ªä¸“æ èƒ½è®©ä»–å­¦ä¹ çš„æ–°çŸ¥è¯†å¯èƒ½å°±ä¸å¤ªå¤šäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574858221,"ip_address":"","comment_id":156291,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"æˆ‘è§‰å¾—effective c++ä¹Ÿæœ‰ç›¸å…³è¯´æ˜","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476178,"discussion_content":"å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›å¯ä»¥ç”¨const smart_ptr&amp;amp;æ¥æ„é€ å‡ºä¸€ä¸ªæ–°çš„smart_ptrã€‚è‡³äºæ–­ç‚¹é—®é¢˜ï¼Œé‚£å°±å¯èƒ½è·Ÿå…·ä½“çš„ç¼–è¯‘å™¨å’Œç¼–è¯‘é€‰é¡¹æœ‰å…³äº†ï¼Œæˆ‘è¿™è¾¹æ²¡å•¥å¥½çš„ç­”æ¡ˆã€‚ï¼ˆæˆ‘è®¾æ–­ç‚¹éƒ½æ²¡æœ‰é—®é¢˜çš„ã€‚ï¼‰\n\nconståªä¿è¯ä¸æ”¹otherçš„æˆå‘˜ï¼Œä¸ä¿è¯ä¸æ”¹æˆå‘˜æŒ‡å‘çš„å†…å®¹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574948165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156248,"user_name":"è™« äºŒ","can_delete":false,"product_type":"c1","uid":1434808,"ip_address":"","ucode":"4416C9BFD62F8C","user_header":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","comment_is_top":false,"comment_ctime":1574842715,"is_pvip":false,"replies":[{"id":60049,"content":"ä¸‹æ ‡ï¼Ÿç°åœ¨åªç®¡ç†ä¸€ä¸ªå¯¹è±¡ï¼Œä¸‹æ ‡æœ‰ä»€ä¹ˆç”¨ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574857957,"ip_address":"","comment_id":156248,"utype":1}],"discussion_count":5,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"åº”è¯¥è¿˜è¦æ·»åŠ ä¸‹æ ‡è®¿é—®ï¼Œæ¯”è¾ƒçš„é‡è½½ï¼Œçœ‹å¾—æœ‰äº›åƒåŠ›ï¼Œè¿˜æ˜¯å¾—åšæŒä¸‹","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476147,"discussion_content":"å—¯ï¼ŒåŠ æ²¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574913886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156151,"user_name":"ç³–","can_delete":false,"product_type":"c1","uid":1542834,"ip_address":"","ucode":"784DDA19104392","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","comment_is_top":false,"comment_ctime":1574824999,"is_pvip":false,"replies":[{"id":60045,"content":"ä¸æ­£ç¡®ï¼Œthis == &amp;other æ—¶ä¼šè‡ªæˆ‘é”€æ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574857512,"ip_address":"","comment_id":156151,"utype":1}],"discussion_count":6,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"å´è€å¸ˆå¥½ï¼Œsmart_ptrçš„æ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦æ˜¯å¦å¯ä»¥åŒç§æ–¹æ³•è§£å†³ï¼Œæ¯”å¦‚ï¼Œä¸Šé¢èµ‹å€¼è¿ç®—ç¬¦ä¸­swapéƒ¨åˆ†çš„ä»£ç æ”¹æˆreleaseï¼š\n\tsmart_ptr&amp; operator=(smart_ptr&amp; other) {\n\t\tdata = other.release();\n\t\treturn *this;\n\t}\nè¿™æ®µä»£ç æ˜¯æ­£ç¡®çš„å—ï¼Ÿå¯¹äºå•çº¯å®ç°smart_ptræœ‰ç¼ºé™·çš„åœ°æ–¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476048,"discussion_content":"ä¸‹æ ‡ï¼Ÿç°åœ¨åªç®¡ç†ä¸€ä¸ªå¯¹è±¡ï¼Œä¸‹æ ‡æœ‰ä»€ä¹ˆç”¨ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574857957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1434808,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","nickname":"è™« äºŒ","note":"","ucode":"4416C9BFD62F8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62946,"discussion_content":"å¯¹å“¦ï¼Œè°¢è°¢è€å¸ˆï¼Œå¯æ˜¯æˆ‘ä¹‹å‰åœ¨cppreferencå‚è€ƒæ‰‹å†Œä¸­æœ‰çœ‹åˆ°shared_ptré‡è½½äº†ã€”ã€•C++17ç‰¹æ€§ï¼Œæœ‰ç‚¹ä¸å¤ªç†è§£äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574864521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1434808,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","nickname":"è™« äºŒ","note":"","ucode":"4416C9BFD62F8C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63532,"discussion_content":"C++17 å¯ä»¥ç”¨ shared_ptr æ¥ç®¡ç†æ•°ç»„çš„ã€‚æˆ‘è¿™ä¸ª smart_ptr ç›®å‰è¿˜æ²¡æœ‰ç®¡ç†æ•°ç»„çš„èƒ½åŠ›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574873898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":62946,"ip_address":"","group_id":0},"score":63532,"extra":""},{"author":{"id":1434808,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","nickname":"è™« äºŒ","note":"","ucode":"4416C9BFD62F8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":63625,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆï¼Œæ˜ç™½äº†ï¼Œå½“å‰ç‰ˆæœ¬çš„æ™ºèƒ½æŒ‡é’ˆåªé€‚ç”¨äºç®¡ç†ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœè¦åœ¨è¿™ä¸ªç‰ˆæœ¬çš„åŸºç¡€ä¹‹ä¸Šå®ç°ç®¡ç†åŠ¨æ€æ•°ç»„çš„æ™ºèƒ½æŒ‡é’ˆé‡è½½[]ä¹‹å¤–è¿˜éœ€è¦é‡è½½è¯¥ç±»å…¶å®ƒçš„æˆå‘˜å‡½æ•°å¯¹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574900210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":63532,"ip_address":"","group_id":0},"score":63625,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1434808,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","nickname":"è™« äºŒ","note":"","ucode":"4416C9BFD62F8C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63714,"discussion_content":"å½“ç„¶ï¼Œè¦æ”¹ä¸å°‘çš„ã€‚å¯ä»¥å»çœ‹çœ‹æ ‡å‡†å®ç°çš„æºä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574904530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":63625,"ip_address":"","group_id":0},"score":63714,"extra":""}]}]},{"had_liked":false,"id":155962,"user_name":"ä¸­å¹´ç”·å­","can_delete":false,"product_type":"c1","uid":1039204,"ip_address":"","ucode":"027C86B3370150","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/64/06d54a80.jpg","comment_is_top":false,"comment_ctime":1574783706,"is_pvip":false,"replies":[{"id":59932,"content":"ä¸€èˆ¬å®ç°ä¸­ï¼Œåªè€ƒè™‘å¯¹å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œï¼Œé‚£æ˜¯å¿…é¡»çš„ã€‚å¹¶å‘ä¿®æ”¹æ™ºèƒ½æŒ‡é’ˆä¸æ˜¯ä¸»æµç”¨æ³•ï¼Œéœ€è¦è‡ªè¡Œå®ç°æˆ–å¤–éƒ¨åŠ é”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574814070,"ip_address":"","comment_id":155962,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"æ™ºèƒ½æŒ‡é’ˆç›®å‰çœ‹æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œä¸€ä¸ªæ˜¯æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆï¼Œä¸€ä¸ªæ˜¯å¼•ç”¨è®¡æ•°ï¼Œå¤šçº¿ç¨‹è¯»çš„è¯åªéœ€è€ƒè™‘å¼•ç”¨è®¡æ•°çš„åŒæ­¥å³å¯ï¼Œå¯ä»¥åŠ é”æˆ–è€…atomicåŸå­æ“ä½œï¼Œæ¶‰åŠå†™è¯è¿˜è¦ç»™æŒ‡é’ˆåŠ é”","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476009,"discussion_content":"ä¸æ­£ç¡®ï¼Œthis == &amp;amp;other æ—¶ä¼šè‡ªæˆ‘é”€æ¯ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574857512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","nickname":"ç³–","note":"","ucode":"784DDA19104392","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62699,"discussion_content":"è€å¸ˆï¼Œæˆ‘è¯•éªŒäº†ä¸€ä¸‹ï¼Œæ˜¯å¯è¡Œçš„ï¼Œæˆ‘çš„releaseå‡½æ•°å®ç°æ–¹å¼æ˜¯ï¼š\nT* release() {\n\t\tT* res = data;\n\t\tdata = nullptr;\n\t\treturn res;\n\t}\nå¦‚æœthis==&amp;otherï¼Œé‚£ä¹ˆdataé¦–å…ˆèµ‹ä¸ºnullptrï¼Œåè¾¹data=other.release()åˆå°†åŸå…ˆçš„dataå€¼è¿”è¿˜ç»™dataï¼Œæ‰€ä»¥çœ‹èµ·æ¥ä¸ä¼šè¢«é”€æ¯ï¼Œæˆ‘è¿™ä¹ˆåˆ†ææœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574858682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1542834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","nickname":"ç³–","note":"","ucode":"784DDA19104392","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63534,"discussion_content":"å¦‚æœæ˜¯unique_ptræ–¹å¼çš„ï¼Œä½ è¿™æ ·å¯è¡Œã€‚å¦‚æœæ˜¯æˆ‘æœ€ç»ˆçš„shared_ptræ–¹å¼ï¼Œæ˜¯æ²¡æœ‰é‡Šæ”¾æ–¹å¼çš„ï¼Œå¼•ç”¨æ•°åˆ°é›¶å°±ä¼šå¯¼è‡´å¯¹è±¡è¢«ææ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574874123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":62699,"ip_address":"","group_id":0},"score":63534,"extra":""},{"author":{"id":1542834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","nickname":"ç³–","note":"","ucode":"784DDA19104392","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":64009,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆçš„å›å¤ï¼ç„¶åè¿˜å­˜åœ¨ä¸€ç‚¹ç‚¹ç–‘é—®ï¼Œåœ¨æœ€ç»ˆç‰ˆçš„shared_pträ¸­ç”±äºä¸ºäº†æ»¡è¶³éšå¼è½¬æ¢åªå®šä¹‰äº†æ¨¡æ¿æ‹·è´æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œæˆ‘åœ¨æµ‹è¯•æ—¶å‘ç°å¦‚æœåªå®šä¹‰æ¨¡æ¿æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆé»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œè¿™å°±å¯¼è‡´å½“æˆ‘ä»¬ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°çš„æ—¶å€™ä¼˜å…ˆè°ƒç”¨äº†é»˜è®¤è‡ªåŠ¨ç”Ÿæˆçš„æ‹·è´æ„é€ å‡½æ•°ã€‚è¦ä¸æƒ³åœ¨å®šä¹‰æ¨¡æ¿æ‹·è´æ„é€ å‡½æ•°çš„åŒæ—¶é‡æ–°å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œæ˜¯å¦å­˜åœ¨åˆç†çš„æ–¹å¼é¿å…å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574930305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":63534,"ip_address":"","group_id":0},"score":64009,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1542834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","nickname":"ç³–","note":"","ucode":"784DDA19104392","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65860,"discussion_content":"ä¼¼ä¹æ²¡æœ‰â€¦â€¦æˆ‘ä¹Ÿæ˜¯ä¸è¯¥æ¼çš„ï¼Œå·²ç»è¡¥ä¸Šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575032427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":64009,"ip_address":"","group_id":0},"score":65860,"extra":""}]}]},{"had_liked":false,"id":155911,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1574777699,"is_pvip":true,"replies":[{"id":59925,"content":"æŠ±æ­‰ï¼ŒRustä¸ç†Ÿâ€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574813327,"ip_address":"","comment_id":155911,"utype":1}],"discussion_count":2,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºRuståˆšå‡ºçš„æ—¶å€™C++11è¿˜æ²¡å‡ºï¼Œæ‰€ä»¥Rusté‡Œé»˜è®¤èµ‹ä¸ªå€¼å°±è¦move ownership","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475941,"discussion_content":"ä¸€èˆ¬å®ç°ä¸­ï¼Œåªè€ƒè™‘å¯¹å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œï¼Œé‚£æ˜¯å¿…é¡»çš„ã€‚å¹¶å‘ä¿®æ”¹æ™ºèƒ½æŒ‡é’ˆä¸æ˜¯ä¸»æµç”¨æ³•ï¼Œéœ€è¦è‡ªè¡Œå®ç°æˆ–å¤–éƒ¨åŠ é”ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574814070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155894,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1574775519,"is_pvip":false,"replies":[{"id":59915,"content":"å“ˆå“ˆï¼Œç…§éª—å˜›ã€‚è°¢è°¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574812072,"ip_address":"","comment_id":155894,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨çœŸæœ‰è¿‘30å¹´çš„ç¼–ç¨‹ç»éªŒå—ï¼Ÿæˆ‘å’‹çœ‹ä½ å°±äºŒåå‡ å²çš„æ ·å­å•Šï¼ŸğŸ˜„","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475923,"discussion_content":"æŠ±æ­‰ï¼ŒRustä¸ç†Ÿâ€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574813327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1321408,"avatar":"https://static001.geekbang.org/account/avatar/00/14/29/c0/86fa3e92.jpg","nickname":"è´¾é™†å","note":"","ucode":"2722C422077EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66545,"discussion_content":"Rustä¸­æ‰€æœ‰æƒè½¬ç§»çš„é‡è¦ç‰¹ç‚¹æ˜¯ï¼Œå®ƒæ˜¯æ‰€æœ‰ç±»å‹çš„é»˜è®¤è¯­ä¹‰ã€‚è¿™æ˜¯è®¸å¤šè¯»è€…ä¸€å¼€å§‹ä¸ä¹ æƒ¯çš„åœ°æ–¹ã€‚è¿™é‡Œå†é‡å¤ä¸€éï¼Œè¯·å¤§å®¶ç‰¢ç‰¢è®°ä½ï¼ŒRustä¸­çš„å˜é‡ç»‘å®šæ“ä½œï¼Œé»˜è®¤æ˜¯moveè¯­ä¹‰ï¼Œæ‰§è¡Œäº†æ–°çš„å˜é‡ç»‘å®šåï¼ŒåŸæ¥çš„å˜é‡å°±ä¸èƒ½å†è¢«ä½¿ç”¨ï¼ä¸€å®šè¦è®°ä½ï¼\nRustçš„è¿™ä¸€è§„å®šéå¸¸æœ‰åˆ©äºç¼–è¯‘å™¨é™æ€æ£€æŸ¥ã€‚  â€”â€”â€”å¼•ç”¨è‡ª  æ·±å…¥æµ…å‡ºRustï¼Œä¸¤ä¸ªè¯­è¨€è®¾è®¡ç›®æ ‡ä¸ä¸€æ ·ï¼ŒRustæ›´æ³¨é‡ç¼–è¯‘æ—¶å°±èƒ½æ¶ˆé™¤å¤§éƒ¨åˆ†çš„å†…å­˜å’Œå¹¶å‘å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥æœ‰äº›æ˜¯ä¸å¾—ä¸åšçš„è®¾è®¡ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575083622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155800,"user_name":"å¾®ç§’","can_delete":false,"product_type":"c1","uid":1249195,"ip_address":"","ucode":"65A2E8B565B191","user_header":"https://static001.geekbang.org/account/avatar/00/13/0f/ab/9748f40b.jpg","comment_is_top":false,"comment_ctime":1574758478,"is_pvip":false,"replies":[{"id":59876,"content":"ç¼ºçœå€¼è¯­ä¹‰å’Œåªæœ‰å¼•ç”¨è¯­ä¹‰ï¼ŒåŒºåˆ«ç¡®å®æ˜¯å¾ˆå¤§çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574764995,"ip_address":"","comment_id":155800,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"çœ‹äº†è¿™ä¸¤ç« ï¼Œå¯¹C++çš„æ™ºèƒ½æŒ‡é’ˆå’Œå†…å­˜ç®¡ç†æœ‰äº†è¾ƒæ¸…æ™°çš„è®¤è¯†äº†ï¼Œå®Œå…¨ä¸åŒäºjavaå’Œpythonå•Š","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475915,"discussion_content":"å“ˆå“ˆï¼Œç…§éª—å˜›ã€‚è°¢è°¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574812072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156630,"user_name":"Geek_4uglyb","can_delete":false,"product_type":"c1","uid":1203822,"ip_address":"","ucode":"3D443DA7DBCC6C","user_header":"https://static001.geekbang.org/account/avatar/00/12/5e/6e/1a032e01.jpg","comment_is_top":false,"comment_ctime":1574926664,"is_pvip":false,"replies":[{"id":60162,"content":"æ²¡æœ‰ç¬”è¯¯ã€‚ä¸è¿‡ï¼Œæˆ‘ç°åœ¨åœ¨æ­£æ–‡ä¸­æ¢äº†ç§è¯´æ³•ï¼Œä¹Ÿè®¸å¯ä»¥å‡å°‘ç‚¹è¯¯è§£ï¼š\n\nâ€œå¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†â€","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574950836,"ip_address":"","comment_id":156630,"utype":1}],"discussion_count":2,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"â€œéœ€è¦æ³¨æ„ï¼Œä¸Šé¢è¿™ä¸ªæ„é€ å‡½æ•°ä¸è¢«ç¼–è¯‘å™¨çœ‹ä½œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå› è€Œä¸èƒ½è‡ªåŠ¨è§¦å‘åˆ é™¤æ‹·è´æ„é€ å‡½æ•°çš„è¡Œä¸ºã€‚å¦‚æœæˆ‘ä»¬æƒ³ä½¿ä»£ç æ›´ç®€æ´ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†ï¼ˆè§â€œæ‹·è´æ„é€ å’Œèµ‹å€¼â€ä¸€èŠ‚ï¼‰ã€‚  â€ã€‚  ç¬”è¯¯äº†å§ â€œå¦‚æœæˆ‘ä»¬æƒ³ä½¿ä»£ç æ›´ç®€æ´ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯â€ åº”è¯¥æ˜¯ åˆ é™¤æ‹·è´æ„é€ å‡½æ•° å§","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476180,"discussion_content":"æ²¡æœ‰ç¬”è¯¯ã€‚ä¸è¿‡ï¼Œæˆ‘ç°åœ¨åœ¨æ­£æ–‡ä¸­æ¢äº†ç§è¯´æ³•ï¼Œä¹Ÿè®¸å¯ä»¥å‡å°‘ç‚¹è¯¯è§£ï¼š\n\nâ€œå¦‚æœæˆ‘ä»¬æƒ³æ¶ˆé™¤ä»£ç é‡å¤ã€åˆ é™¤ç§»åŠ¨æ„é€ å‡½æ•°çš„è¯ï¼Œå°±éœ€è¦æŠŠæ‹·è´æ„é€ å‡½æ•°æ ‡è®°æˆ = delete äº†â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574950836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1203822,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5e/6e/1a032e01.jpg","nickname":"Geek_4uglyb","note":"","ucode":"3D443DA7DBCC6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65356,"discussion_content":"çœ‹äº†ä¸‹effective modern c++çš„æ¡æ¬¾17ï¼Œå‘ç°ä¹‹å‰çš„å›å¤æ˜¯æˆ‘ç†è§£é”™äº†ã€‚ğŸ˜‚ ä¹Ÿå°±æ˜¯è¯´ 1ã€æˆå‘˜å‡½æ•°æ¨¡ç‰ˆä¸ä¼šé˜»æ­¢ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„ç”Ÿæˆï¼›2ã€ç§»åŠ¨æ“ä½œåªåœ¨æ²¡æœ‰æ˜¾ç¤ºå£°æ˜æ‹·è´/ææ„å‡½æ•°çš„ç±»ä¸­ç”Ÿæˆï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574997622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156628,"user_name":"å­Ÿå®ªè½²","can_delete":false,"product_type":"c1","uid":1487040,"ip_address":"","ucode":"753879DAAEFB2B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZUA1byglmJVwPuT2BA8ic2iaNFfIfZJicenWiaxdz9nod0KIlxyNTra4qxO7jPDgC1FFCq5CJGgLX5g/132","comment_is_top":false,"comment_ctime":1574926532,"is_pvip":false,"replies":[{"id":60159,"content":"å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›å¯ä»¥ç”¨const smart_ptr&amp;æ¥æ„é€ å‡ºä¸€ä¸ªæ–°çš„smart_ptrã€‚è‡³äºæ–­ç‚¹é—®é¢˜ï¼Œé‚£å°±å¯èƒ½è·Ÿå…·ä½“çš„ç¼–è¯‘å™¨å’Œç¼–è¯‘é€‰é¡¹æœ‰å…³äº†ï¼Œæˆ‘è¿™è¾¹æ²¡å•¥å¥½çš„ç­”æ¡ˆã€‚ï¼ˆæˆ‘è®¾æ–­ç‚¹éƒ½æ²¡æœ‰é—®é¢˜çš„ã€‚ï¼‰\n\nconståªä¿è¯ä¸æ”¹otherçš„æˆå‘˜ï¼Œä¸ä¿è¯ä¸æ”¹æˆå‘˜æŒ‡å‘çš„å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574948165,"ip_address":"","comment_id":156628,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"å®Œæ•´smart_pträ»£ç åˆ—è¡¨ä¸­ï¼Œå½¢å‚otherè¦å¢åŠ å¼•ç”¨è®¡æ•°ï¼Œä¸ºä»€ä¹ˆå‰é¢åŠ constï¼Ÿæˆ‘è°ƒè¯•ä»£ç åŠ constçš„æ„é€ å‡½æ•°ä¸è¿›æ–­ç‚¹ï¼Œå»æ‰constèƒ½æ­£å¸¸è¿›å…¥æ–­ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476178,"discussion_content":"å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›å¯ä»¥ç”¨const smart_ptr&amp;amp;æ¥æ„é€ å‡ºä¸€ä¸ªæ–°çš„smart_ptrã€‚è‡³äºæ–­ç‚¹é—®é¢˜ï¼Œé‚£å°±å¯èƒ½è·Ÿå…·ä½“çš„ç¼–è¯‘å™¨å’Œç¼–è¯‘é€‰é¡¹æœ‰å…³äº†ï¼Œæˆ‘è¿™è¾¹æ²¡å•¥å¥½çš„ç­”æ¡ˆã€‚ï¼ˆæˆ‘è®¾æ–­ç‚¹éƒ½æ²¡æœ‰é—®é¢˜çš„ã€‚ï¼‰\n\nconståªä¿è¯ä¸æ”¹otherçš„æˆå‘˜ï¼Œä¸ä¿è¯ä¸æ”¹æˆå‘˜æŒ‡å‘çš„å†…å®¹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574948165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156540,"user_name":"æœ±ç†™","can_delete":false,"product_type":"c1","uid":1039029,"ip_address":"","ucode":"2B9E2B8645A844","user_header":"https://static001.geekbang.org/account/avatar/00/0f/da/b5/9d1f2f55.jpg","comment_is_top":false,"comment_ctime":1574907239,"is_pvip":false,"replies":[{"id":60110,"content":"å—¯ï¼ŒåŠ æ²¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574913886,"ip_address":"","comment_id":156540,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"çœ‹äº†ä¸å°‘è¯¾ç¨‹ï¼Œä½†æ˜¯ç”±äºæ¯è¯­æ˜¯c++ï¼Œå› æ­¤ä¸€ç›´ä¹Ÿæ²¡æœ‰ç•™è¨€ã€‚ç¬¬ä¸€æ¬¡ç•™è¨€ï¼Œè™½ç„¶çœ‹èµ·æ¥ç•¥å¾®åƒåŠ›ï¼Œä½†æ˜¯åŸºæœ¬è¿˜ç®—èƒ½çœ‹æ‡‚ï¼Œè€Œä¸”å¯¹äºä»¥å‰ä¸€äº›æ¨¡ç³Šçš„ä¸œè¥¿çš„ç¡®æœ‰äº†æ›´æ¸…æ™°çš„è®¤è¯†ï¼Œå¾ˆæœŸå¾…åé¢çš„è¯¾ç¨‹~","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476058,"discussion_content":"ä¸å¤ªæ˜ç™½ä½ çš„è¯„è®ºã€‚ä¸è¿‡å‘¢ï¼Œå¦‚æœè°è¯»è¿‡Meyersçš„å››æœ¬Effectiveç³»åˆ—ï¼Œè¿™ä¸ªä¸“æ èƒ½è®©ä»–å­¦ä¹ çš„æ–°çŸ¥è¯†å¯èƒ½å°±ä¸å¤ªå¤šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574858221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156291,"user_name":"nullptr","can_delete":false,"product_type":"c1","uid":1759752,"ip_address":"","ucode":"1A26EA0D1A2C10","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqtvuo1wE3XU1mBmtIDfrAQZ2NofBQM5sZhBWicMXicdsrfJ6t87yrlXwqFj0PB6Kx8QU3AVCR4TIHw/132","comment_is_top":false,"comment_ctime":1574851004,"is_pvip":false,"replies":[{"id":60052,"content":"ä¸å¤ªæ˜ç™½ä½ çš„è¯„è®ºã€‚ä¸è¿‡å‘¢ï¼Œå¦‚æœè°è¯»è¿‡Meyersçš„å››æœ¬Effectiveç³»åˆ—ï¼Œè¿™ä¸ªä¸“æ èƒ½è®©ä»–å­¦ä¹ çš„æ–°çŸ¥è¯†å¯èƒ½å°±ä¸å¤ªå¤šäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574858221,"ip_address":"","comment_id":156291,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"æˆ‘è§‰å¾—effective c++ä¹Ÿæœ‰ç›¸å…³è¯´æ˜","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476058,"discussion_content":"ä¸å¤ªæ˜ç™½ä½ çš„è¯„è®ºã€‚ä¸è¿‡å‘¢ï¼Œå¦‚æœè°è¯»è¿‡Meyersçš„å››æœ¬Effectiveç³»åˆ—ï¼Œè¿™ä¸ªä¸“æ èƒ½è®©ä»–å­¦ä¹ çš„æ–°çŸ¥è¯†å¯èƒ½å°±ä¸å¤ªå¤šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574858221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156248,"user_name":"è™« äºŒ","can_delete":false,"product_type":"c1","uid":1434808,"ip_address":"","ucode":"4416C9BFD62F8C","user_header":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","comment_is_top":false,"comment_ctime":1574842715,"is_pvip":false,"replies":[{"id":60049,"content":"ä¸‹æ ‡ï¼Ÿç°åœ¨åªç®¡ç†ä¸€ä¸ªå¯¹è±¡ï¼Œä¸‹æ ‡æœ‰ä»€ä¹ˆç”¨ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574857957,"ip_address":"","comment_id":156248,"utype":1}],"discussion_count":5,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"åº”è¯¥è¿˜è¦æ·»åŠ ä¸‹æ ‡è®¿é—®ï¼Œæ¯”è¾ƒçš„é‡è½½ï¼Œçœ‹å¾—æœ‰äº›åƒåŠ›ï¼Œè¿˜æ˜¯å¾—åšæŒä¸‹","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476048,"discussion_content":"ä¸‹æ ‡ï¼Ÿç°åœ¨åªç®¡ç†ä¸€ä¸ªå¯¹è±¡ï¼Œä¸‹æ ‡æœ‰ä»€ä¹ˆç”¨ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574857957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1434808,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","nickname":"è™« äºŒ","note":"","ucode":"4416C9BFD62F8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62946,"discussion_content":"å¯¹å“¦ï¼Œè°¢è°¢è€å¸ˆï¼Œå¯æ˜¯æˆ‘ä¹‹å‰åœ¨cppreferencå‚è€ƒæ‰‹å†Œä¸­æœ‰çœ‹åˆ°shared_ptré‡è½½äº†ã€”ã€•C++17ç‰¹æ€§ï¼Œæœ‰ç‚¹ä¸å¤ªç†è§£äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574864521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1434808,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","nickname":"è™« äºŒ","note":"","ucode":"4416C9BFD62F8C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63532,"discussion_content":"C++17 å¯ä»¥ç”¨ shared_ptr æ¥ç®¡ç†æ•°ç»„çš„ã€‚æˆ‘è¿™ä¸ª smart_ptr ç›®å‰è¿˜æ²¡æœ‰ç®¡ç†æ•°ç»„çš„èƒ½åŠ›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574873898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":62946,"ip_address":"","group_id":0},"score":63532,"extra":""},{"author":{"id":1434808,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","nickname":"è™« äºŒ","note":"","ucode":"4416C9BFD62F8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":63625,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆï¼Œæ˜ç™½äº†ï¼Œå½“å‰ç‰ˆæœ¬çš„æ™ºèƒ½æŒ‡é’ˆåªé€‚ç”¨äºç®¡ç†ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœè¦åœ¨è¿™ä¸ªç‰ˆæœ¬çš„åŸºç¡€ä¹‹ä¸Šå®ç°ç®¡ç†åŠ¨æ€æ•°ç»„çš„æ™ºèƒ½æŒ‡é’ˆé‡è½½[]ä¹‹å¤–è¿˜éœ€è¦é‡è½½è¯¥ç±»å…¶å®ƒçš„æˆå‘˜å‡½æ•°å¯¹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574900210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":63532,"ip_address":"","group_id":0},"score":63625,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1434808,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/b8/e7fd5b9c.jpg","nickname":"è™« äºŒ","note":"","ucode":"4416C9BFD62F8C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63714,"discussion_content":"å½“ç„¶ï¼Œè¦æ”¹ä¸å°‘çš„ã€‚å¯ä»¥å»çœ‹çœ‹æ ‡å‡†å®ç°çš„æºä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574904530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":63625,"ip_address":"","group_id":0},"score":63714,"extra":""}]}]},{"had_liked":false,"id":156151,"user_name":"ç³–","can_delete":false,"product_type":"c1","uid":1542834,"ip_address":"","ucode":"784DDA19104392","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","comment_is_top":false,"comment_ctime":1574824999,"is_pvip":false,"replies":[{"id":60045,"content":"ä¸æ­£ç¡®ï¼Œthis == &amp;other æ—¶ä¼šè‡ªæˆ‘é”€æ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574857512,"ip_address":"","comment_id":156151,"utype":1}],"discussion_count":6,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"å´è€å¸ˆå¥½ï¼Œsmart_ptrçš„æ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦æ˜¯å¦å¯ä»¥åŒç§æ–¹æ³•è§£å†³ï¼Œæ¯”å¦‚ï¼Œä¸Šé¢èµ‹å€¼è¿ç®—ç¬¦ä¸­swapéƒ¨åˆ†çš„ä»£ç æ”¹æˆreleaseï¼š\n\tsmart_ptr&amp; operator=(smart_ptr&amp; other) {\n\t\tdata = other.release();\n\t\treturn *this;\n\t}\nè¿™æ®µä»£ç æ˜¯æ­£ç¡®çš„å—ï¼Ÿå¯¹äºå•çº¯å®ç°smart_ptræœ‰ç¼ºé™·çš„åœ°æ–¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476009,"discussion_content":"ä¸æ­£ç¡®ï¼Œthis == &amp;amp;other æ—¶ä¼šè‡ªæˆ‘é”€æ¯ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574857512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","nickname":"ç³–","note":"","ucode":"784DDA19104392","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62699,"discussion_content":"è€å¸ˆï¼Œæˆ‘è¯•éªŒäº†ä¸€ä¸‹ï¼Œæ˜¯å¯è¡Œçš„ï¼Œæˆ‘çš„releaseå‡½æ•°å®ç°æ–¹å¼æ˜¯ï¼š\nT* release() {\n\t\tT* res = data;\n\t\tdata = nullptr;\n\t\treturn res;\n\t}\nå¦‚æœthis==&amp;otherï¼Œé‚£ä¹ˆdataé¦–å…ˆèµ‹ä¸ºnullptrï¼Œåè¾¹data=other.release()åˆå°†åŸå…ˆçš„dataå€¼è¿”è¿˜ç»™dataï¼Œæ‰€ä»¥çœ‹èµ·æ¥ä¸ä¼šè¢«é”€æ¯ï¼Œæˆ‘è¿™ä¹ˆåˆ†ææœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574858682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1542834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","nickname":"ç³–","note":"","ucode":"784DDA19104392","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63534,"discussion_content":"å¦‚æœæ˜¯unique_ptræ–¹å¼çš„ï¼Œä½ è¿™æ ·å¯è¡Œã€‚å¦‚æœæ˜¯æˆ‘æœ€ç»ˆçš„shared_ptræ–¹å¼ï¼Œæ˜¯æ²¡æœ‰é‡Šæ”¾æ–¹å¼çš„ï¼Œå¼•ç”¨æ•°åˆ°é›¶å°±ä¼šå¯¼è‡´å¯¹è±¡è¢«ææ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574874123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":62699,"ip_address":"","group_id":0},"score":63534,"extra":""},{"author":{"id":1542834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","nickname":"ç³–","note":"","ucode":"784DDA19104392","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":64009,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆçš„å›å¤ï¼ç„¶åè¿˜å­˜åœ¨ä¸€ç‚¹ç‚¹ç–‘é—®ï¼Œåœ¨æœ€ç»ˆç‰ˆçš„shared_pträ¸­ç”±äºä¸ºäº†æ»¡è¶³éšå¼è½¬æ¢åªå®šä¹‰äº†æ¨¡æ¿æ‹·è´æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œæˆ‘åœ¨æµ‹è¯•æ—¶å‘ç°å¦‚æœåªå®šä¹‰æ¨¡æ¿æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆé»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œè¿™å°±å¯¼è‡´å½“æˆ‘ä»¬ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°çš„æ—¶å€™ä¼˜å…ˆè°ƒç”¨äº†é»˜è®¤è‡ªåŠ¨ç”Ÿæˆçš„æ‹·è´æ„é€ å‡½æ•°ã€‚è¦ä¸æƒ³åœ¨å®šä¹‰æ¨¡æ¿æ‹·è´æ„é€ å‡½æ•°çš„åŒæ—¶é‡æ–°å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œæ˜¯å¦å­˜åœ¨åˆç†çš„æ–¹å¼é¿å…å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574930305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":63534,"ip_address":"","group_id":0},"score":64009,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1542834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzP9yB6eIRRyVNe3iab0gXB6yOeaNRHGx6raTQz2grfE5N2LWl6uIj1mrSU7nxiaEzeSLp6xAkE3iaQ/132","nickname":"ç³–","note":"","ucode":"784DDA19104392","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65860,"discussion_content":"ä¼¼ä¹æ²¡æœ‰â€¦â€¦æˆ‘ä¹Ÿæ˜¯ä¸è¯¥æ¼çš„ï¼Œå·²ç»è¡¥ä¸Šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575032427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":64009,"ip_address":"","group_id":0},"score":65860,"extra":""}]}]},{"had_liked":false,"id":155962,"user_name":"ä¸­å¹´ç”·å­","can_delete":false,"product_type":"c1","uid":1039204,"ip_address":"","ucode":"027C86B3370150","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/64/06d54a80.jpg","comment_is_top":false,"comment_ctime":1574783706,"is_pvip":false,"replies":[{"id":59932,"content":"ä¸€èˆ¬å®ç°ä¸­ï¼Œåªè€ƒè™‘å¯¹å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œï¼Œé‚£æ˜¯å¿…é¡»çš„ã€‚å¹¶å‘ä¿®æ”¹æ™ºèƒ½æŒ‡é’ˆä¸æ˜¯ä¸»æµç”¨æ³•ï¼Œéœ€è¦è‡ªè¡Œå®ç°æˆ–å¤–éƒ¨åŠ é”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574814070,"ip_address":"","comment_id":155962,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"æ™ºèƒ½æŒ‡é’ˆç›®å‰çœ‹æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œä¸€ä¸ªæ˜¯æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆï¼Œä¸€ä¸ªæ˜¯å¼•ç”¨è®¡æ•°ï¼Œå¤šçº¿ç¨‹è¯»çš„è¯åªéœ€è€ƒè™‘å¼•ç”¨è®¡æ•°çš„åŒæ­¥å³å¯ï¼Œå¯ä»¥åŠ é”æˆ–è€…atomicåŸå­æ“ä½œï¼Œæ¶‰åŠå†™è¯è¿˜è¦ç»™æŒ‡é’ˆåŠ é”","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475941,"discussion_content":"ä¸€èˆ¬å®ç°ä¸­ï¼Œåªè€ƒè™‘å¯¹å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œï¼Œé‚£æ˜¯å¿…é¡»çš„ã€‚å¹¶å‘ä¿®æ”¹æ™ºèƒ½æŒ‡é’ˆä¸æ˜¯ä¸»æµç”¨æ³•ï¼Œéœ€è¦è‡ªè¡Œå®ç°æˆ–å¤–éƒ¨åŠ é”ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574814070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155911,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1574777699,"is_pvip":true,"replies":[{"id":59925,"content":"æŠ±æ­‰ï¼ŒRustä¸ç†Ÿâ€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574813327,"ip_address":"","comment_id":155911,"utype":1}],"discussion_count":2,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºRuståˆšå‡ºçš„æ—¶å€™C++11è¿˜æ²¡å‡ºï¼Œæ‰€ä»¥Rusté‡Œé»˜è®¤èµ‹ä¸ªå€¼å°±è¦move ownership","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475923,"discussion_content":"æŠ±æ­‰ï¼ŒRustä¸ç†Ÿâ€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574813327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1321408,"avatar":"https://static001.geekbang.org/account/avatar/00/14/29/c0/86fa3e92.jpg","nickname":"è´¾é™†å","note":"","ucode":"2722C422077EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66545,"discussion_content":"Rustä¸­æ‰€æœ‰æƒè½¬ç§»çš„é‡è¦ç‰¹ç‚¹æ˜¯ï¼Œå®ƒæ˜¯æ‰€æœ‰ç±»å‹çš„é»˜è®¤è¯­ä¹‰ã€‚è¿™æ˜¯è®¸å¤šè¯»è€…ä¸€å¼€å§‹ä¸ä¹ æƒ¯çš„åœ°æ–¹ã€‚è¿™é‡Œå†é‡å¤ä¸€éï¼Œè¯·å¤§å®¶ç‰¢ç‰¢è®°ä½ï¼ŒRustä¸­çš„å˜é‡ç»‘å®šæ“ä½œï¼Œé»˜è®¤æ˜¯moveè¯­ä¹‰ï¼Œæ‰§è¡Œäº†æ–°çš„å˜é‡ç»‘å®šåï¼ŒåŸæ¥çš„å˜é‡å°±ä¸èƒ½å†è¢«ä½¿ç”¨ï¼ä¸€å®šè¦è®°ä½ï¼\nRustçš„è¿™ä¸€è§„å®šéå¸¸æœ‰åˆ©äºç¼–è¯‘å™¨é™æ€æ£€æŸ¥ã€‚  â€”â€”â€”å¼•ç”¨è‡ª  æ·±å…¥æµ…å‡ºRustï¼Œä¸¤ä¸ªè¯­è¨€è®¾è®¡ç›®æ ‡ä¸ä¸€æ ·ï¼ŒRustæ›´æ³¨é‡ç¼–è¯‘æ—¶å°±èƒ½æ¶ˆé™¤å¤§éƒ¨åˆ†çš„å†…å­˜å’Œå¹¶å‘å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥æœ‰äº›æ˜¯ä¸å¾—ä¸åšçš„è®¾è®¡ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575083622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155894,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1574775519,"is_pvip":false,"replies":[{"id":59915,"content":"å“ˆå“ˆï¼Œç…§éª—å˜›ã€‚è°¢è°¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574812072,"ip_address":"","comment_id":155894,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨çœŸæœ‰è¿‘30å¹´çš„ç¼–ç¨‹ç»éªŒå—ï¼Ÿæˆ‘å’‹çœ‹ä½ å°±äºŒåå‡ å²çš„æ ·å­å•Šï¼ŸğŸ˜„","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475915,"discussion_content":"å“ˆå“ˆï¼Œç…§éª—å˜›ã€‚è°¢è°¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574812072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155800,"user_name":"å¾®ç§’","can_delete":false,"product_type":"c1","uid":1249195,"ip_address":"","ucode":"65A2E8B565B191","user_header":"https://static001.geekbang.org/account/avatar/00/13/0f/ab/9748f40b.jpg","comment_is_top":false,"comment_ctime":1574758478,"is_pvip":false,"replies":[{"id":59876,"content":"ç¼ºçœå€¼è¯­ä¹‰å’Œåªæœ‰å¼•ç”¨è¯­ä¹‰ï¼ŒåŒºåˆ«ç¡®å®æ˜¯å¾ˆå¤§çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574764995,"ip_address":"","comment_id":155800,"utype":1}],"discussion_count":1,"race_medal":0,"score":18,"product_id":100040501,"comment_content":"çœ‹äº†è¿™ä¸¤ç« ï¼Œå¯¹C++çš„æ™ºèƒ½æŒ‡é’ˆå’Œå†…å­˜ç®¡ç†æœ‰äº†è¾ƒæ¸…æ™°çš„è®¤è¯†äº†ï¼Œå®Œå…¨ä¸åŒäºjavaå’Œpythonå•Š","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475877,"discussion_content":"ç¼ºçœå€¼è¯­ä¹‰å’Œåªæœ‰å¼•ç”¨è¯­ä¹‰ï¼ŒåŒºåˆ«ç¡®å®æ˜¯å¾ˆå¤§çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574764995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155751,"user_name":"bearlu","can_delete":false,"product_type":"c1","uid":1030862,"ip_address":"","ucode":"14F260C8B24E27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","comment_is_top":false,"comment_ctime":1574748048,"is_pvip":true,"replies":[{"id":59872,"content":"å®Œæ•´ä»£ç åœ¨ç»“å°¾å¤„å•Šã€‚æ‹·è´ç²˜è´´å¤§æ³•å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574764299,"ip_address":"","comment_id":155751,"utype":1}],"discussion_count":1,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¿™è¾¹æœ‰æºç ï¼Ÿå¯ä»¥æ‹¿æ¥è°ƒè¯•ä¸€ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":155518,"user_name":"Txz","can_delete":false,"product_type":"c1","uid":1441211,"ip_address":"","ucode":"42841DC8522D42","user_header":"https://static001.geekbang.org/account/avatar/00/15/fd/bb/068a7228.jpg","comment_is_top":false,"comment_ctime":1574694862,"is_pvip":false,"replies":[{"id":59701,"content":"æ²¡å…³ç³»çš„ã€‚å­¦ä¹ å°±æ˜¯è¦å¤šè¯»å¤šå†™å¤šç»ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574732602,"ip_address":"","comment_id":155518,"utype":1}],"discussion_count":1,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"ä¸€éä¸‹æ¥ï¼Œè¿˜æ˜¯è§‰å¾—ç†è§£çš„ä¸å¤Ÿï¼Œåªèƒ½åå¤é˜…è¯»ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475857,"discussion_content":"å®Œæ•´ä»£ç åœ¨ç»“å°¾å¤„å•Šã€‚æ‹·è´ç²˜è´´å¤§æ³•å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574764299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155473,"user_name":"ç¯ç›–","can_delete":false,"product_type":"c1","uid":1482839,"ip_address":"","ucode":"0F8455A593D60C","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/57/3a729755.jpg","comment_is_top":false,"comment_ctime":1574691285,"is_pvip":false,"replies":[{"id":59666,"content":"ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574693341,"ip_address":"","comment_id":155473,"utype":1}],"discussion_count":1,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"é¢è¯•é«˜é¢‘é¢˜ç›®","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475782,"discussion_content":"æ²¡å…³ç³»çš„ã€‚å­¦ä¹ å°±æ˜¯è¦å¤šè¯»å¤šå†™å¤šç»ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574732602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174880,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1580445231,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"è¿™ç§ä¼˜è´¨æ–‡ç« ï¼Œå¯¹äºåƒæˆ‘ä¸€æ ·çš„åˆå­¦è€…ï¼Œè¿˜æ˜¯è¦æ¢æ°”è¯»ï¼Œè¦ä¸å®¹æ˜“å‘›æ°´ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆ","like_count":7},{"had_liked":false,"id":156641,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574929131,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"å½“æˆ‘è‰°éš¾çš„çœ‹å®Œç¬¬ä¸€éè¿‡åæˆ‘åˆå»å¤ä¹ äº†ä¸€ä¸‹æ‹·è´æ„é€ ,å¹¶ä¸”äº†è§£äº†ç§»åŠ¨æ„é€ ,åˆæœ‰æ–°çš„æ„Ÿæ‚Ÿå¦‚ä¸‹\n1. åœ¨ä¾‹å­ æ–¹æ¡ˆä¸€ å°è¯•åœ¨æ‹·è´æ„é€ è½¬ç§»æŒ‡é’ˆçš„æ‰€æœ‰æƒ é€šè¿‡æ‹·è´æ„é€  è·å¾—ä¸€ä¸ªä¸´æ—¶æŒ‡é’ˆè¯¥æŒ‡é’ˆç”¨æ¥æ¥æ›¿å°†äº¡å¯¹è±¡çš„æŒ‡é’ˆæ‰€æŒ‡çš„åœ°å€ ç„¶åå°†å°†äº¡å¯¹è±¡çš„æŒ‡é’ˆç½®ä¸ºç©º é‡Šæ”¾å°†äº¡å¯¹è±¡å¯¹ç›®æ ‡çš„æ§åˆ¶ åŒæ—¶å°†ä¸´æ—¶æŒ‡é’ˆè¿”å›ç„¶åæ‹·è´æ„é€ çš„å¯¹è±¡æ¥ç®¡ç›®æ ‡\n2. èµ‹å€¼å‡½æ•°ä¹Ÿæ˜¯åŒæ ·çš„æ“ä½œ  å°†ç›®æ ‡è½¬äº¤ç»™å¯¹è±¡ ç„¶åå°†äº¡å¯¹è±¡é‡Šæ”¾å¯¹ç›®æ ‡çš„æ§åˆ¶\nç§»åŠ¨æ„é€ çš„ç¼ºé™·ç¡®å®æ˜¯åœ¨äº¤å‡ºäº†æ§åˆ¶æƒåå°±ä¸å†æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡äº†\n3. smart_ptr&lt;circle&gt; è½¬æ¢æˆsmart_ptr&lt;shape&gt; å¢åŠ äº†ä¸€ä¸ªæ„é€ å‡½æ•° ä¸èƒ½å°†smart_ptr&lt;circle&gt;è½¬æ¢æˆsmart_ptr&lt;triangle&gt;çš„åŸå› å°±å› ä¸ºtriangleä¸æ˜¯circleç±»çš„çˆ¶ç±»å§ æ‰€ä»¥è½¬æ¢æ˜¯ä¸å®‰å…¨çš„,è€Œä¸”åº”è¯¥æ˜¯ä¸ä¼šæˆåŠŸçš„\n4. fatal error: â€˜ptr_â€™ is a private member of â€˜smart_ptr&lt;circle&gt;â€™é’ˆå¯¹è¿™ä¸ªé”™è¯¯å…¶å®è¿˜å¯ä»¥æä¾›ä¸€ä¸ªè®¾ç½®å’Œè·å–çš„æ¥å£ å¦‚æœç”¨å‹å…ƒç±»çš„è¯ è¿˜ä¼šç ´åä»£ç çš„å°è£…æ€§å“¦å˜¿å˜¿\nç¬¬äºŒéçœ‹çš„æ—¶å€™æ„Ÿè§‰è½»æ¾äº†å¾ˆå¤š åŸºæœ¬ä¸Šäº†è§£äº† unique_ptr å’Œshared_ptrçš„åŸç†  ä½†æ˜¯æ›´å¤šçš„ç¡®å®å¤ä¹ äº†ä¸€éå„ç§æ„é€ å‡½æ•°å’Œå­¦ä¹ äº† ç§»åŠ¨æ„é€ ....\nç›´æ¥å›ç­”ç¬¬3é—® \nä¸€å®šè¦é¿å… å¤šçº¿ç¨‹çš„å¼‚æ­¥æ“ä½œ æ¯”å¦‚shared_ptråœ¨å¼•ç”¨ä¸º1çš„æ—¶å€™ ä¸€ä¸ªçº¿ç¨‹åœ¨å¼•ç”¨ å¦‚æœä¸€ä¸ªçº¿ç¨‹åœ¨é‡Šæ”¾å°±ä¼šå‡ºå¤§é—®é¢˜å“’ æ‰€ä»¥åº”è¯¥ä¿è¯åŒæ­¥æ€§\n\n","like_count":3},{"had_liked":false,"id":363647,"user_name":"Geek_7c0961","can_delete":false,"product_type":"c1","uid":2277181,"ip_address":"ç¾å›½","ucode":"B1482E64FF9E4E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ8aLz0tWdsZuMiaNUAd0dicSD9M6A77seMGFdHgvsQwOzN8ztYPiaJSo53DcbjQWUQpw4pf4rI2f7vg/132","comment_is_top":false,"comment_ctime":1669914963,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"è®²å¾—çœŸå¥½,æœ‰æ·±åº¦.","like_count":1},{"had_liked":false,"id":299580,"user_name":"å®µç»ƒ2233","can_delete":false,"product_type":"c1","uid":2662996,"ip_address":"","ucode":"3EBDF8195040DA","user_header":"https://static001.geekbang.org/account/avatar/00/28/a2/54/49dfb810.jpg","comment_is_top":false,"comment_ctime":1624721441,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"åœ¨è°ƒç”¨smart_ptræ—¶ï¼Œéœ€è¦æ˜¾æ€§åœ°å…ˆå»è°ƒç”¨newç„¶åæ„é€ æ™ºèƒ½æŒ‡é’ˆï¼Œæ™ºèƒ½æŒ‡é’ˆçš„æ„é€ å‡½æ•°å†…éƒ¨åˆè°ƒç”¨äº†ä¸€ä¸ª\nnewå»æ„é€ countï¼Œä¸¤ä¸ªnewè¿™å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚shared_ptræœ‰ä¸€ä¸ªmake_sharedå‡½æ•°ç›´æ¥æ„é€ æ™ºèƒ½æŒ‡é’ˆå’Œå®ƒæŒ‡å‘çš„å¯¹è±¡ï¼Œåªè°ƒç”¨ä¸€æ¬¡newï¼Œä¸€æ¬¡å°†å¯¹è±¡å’Œcountçš„å†…å­˜åˆ†é…å‡ºæ¥ã€‚","like_count":1},{"had_liked":false,"id":279509,"user_name":"doge","can_delete":false,"product_type":"c1","uid":1593251,"ip_address":"","ucode":"9E2D4C8F9B4CBC","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/a3/0e56b4e5.jpg","comment_is_top":false,"comment_ctime":1613810036,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"æœ¬ç« çœ‹äº†1å¤©ï¼Œç…§ç€ç ä»£ç ç äº†ä¸€å¤©ï¼Œç»“åˆè€å¸ˆç»™çš„æ–‡ç« é“¾æ¥ï¼Œç»ˆäºæ˜ç™½äº†èµ‹å€¼è¿ç®—é‡Œçš„smart_ptr otherå€¼å®šä¹‰çš„å¦™å¤„ï¼Œå¤ç”¨äº† æ‹·è´&#47;ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œä¸”å°†å¼‚å¸¸çš„æ£€æŸ¥äº¤ç»™äº†ç¼–è¯‘å™¨ï¼ŒåŒäº‹è®©èµ‹å€¼çš„å‡½æ•°åŠå…¶ç®€å•ï¼ŒçœŸæ˜¯å¦™å•Šï¼Œå­¦åˆ°äº†ï¼","like_count":1},{"had_liked":false,"id":274802,"user_name":"Geek_f8fcc0","can_delete":false,"product_type":"c1","uid":2376292,"ip_address":"","ucode":"B87BCD9D63CB60","user_header":"","comment_is_top":false,"comment_ctime":1611162728,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"æˆ‘è§‰å¾—è€å¸ˆå¥½å¼ºï¼","like_count":1},{"had_liked":false,"id":157578,"user_name":"æ¥šå°å¥•","can_delete":false,"product_type":"c1","uid":1011022,"ip_address":"","ucode":"AB808A42C2535E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6d/4e/347c3e8f.jpg","comment_is_top":false,"comment_ctime":1575201229,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"å†™çš„å¾ˆå¥½ï½ï½ ç­‰æ›´æ–°","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475763,"discussion_content":"ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574693341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155751,"user_name":"bearlu","can_delete":false,"product_type":"c1","uid":1030862,"ip_address":"","ucode":"14F260C8B24E27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","comment_is_top":false,"comment_ctime":1574748048,"is_pvip":true,"replies":[{"id":59872,"content":"å®Œæ•´ä»£ç åœ¨ç»“å°¾å¤„å•Šã€‚æ‹·è´ç²˜è´´å¤§æ³•å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574764299,"ip_address":"","comment_id":155751,"utype":1}],"discussion_count":1,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¿™è¾¹æœ‰æºç ï¼Ÿå¯ä»¥æ‹¿æ¥è°ƒè¯•ä¸€ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475857,"discussion_content":"å®Œæ•´ä»£ç åœ¨ç»“å°¾å¤„å•Šã€‚æ‹·è´ç²˜è´´å¤§æ³•å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574764299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155518,"user_name":"Txz","can_delete":false,"product_type":"c1","uid":1441211,"ip_address":"","ucode":"42841DC8522D42","user_header":"https://static001.geekbang.org/account/avatar/00/15/fd/bb/068a7228.jpg","comment_is_top":false,"comment_ctime":1574694862,"is_pvip":false,"replies":[{"id":59701,"content":"æ²¡å…³ç³»çš„ã€‚å­¦ä¹ å°±æ˜¯è¦å¤šè¯»å¤šå†™å¤šç»ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574732602,"ip_address":"","comment_id":155518,"utype":1}],"discussion_count":1,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"ä¸€éä¸‹æ¥ï¼Œè¿˜æ˜¯è§‰å¾—ç†è§£çš„ä¸å¤Ÿï¼Œåªèƒ½åå¤é˜…è¯»ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475782,"discussion_content":"æ²¡å…³ç³»çš„ã€‚å­¦ä¹ å°±æ˜¯è¦å¤šè¯»å¤šå†™å¤šç»ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574732602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155473,"user_name":"ç¯ç›–","can_delete":false,"product_type":"c1","uid":1482839,"ip_address":"","ucode":"0F8455A593D60C","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/57/3a729755.jpg","comment_is_top":false,"comment_ctime":1574691285,"is_pvip":false,"replies":[{"id":59666,"content":"ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1574693341,"ip_address":"","comment_id":155473,"utype":1}],"discussion_count":1,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"é¢è¯•é«˜é¢‘é¢˜ç›®","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475763,"discussion_content":"ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574693341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174880,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1580445231,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"è¿™ç§ä¼˜è´¨æ–‡ç« ï¼Œå¯¹äºåƒæˆ‘ä¸€æ ·çš„åˆå­¦è€…ï¼Œè¿˜æ˜¯è¦æ¢æ°”è¯»ï¼Œè¦ä¸å®¹æ˜“å‘›æ°´ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆ","like_count":7},{"had_liked":false,"id":156641,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1574929131,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"å½“æˆ‘è‰°éš¾çš„çœ‹å®Œç¬¬ä¸€éè¿‡åæˆ‘åˆå»å¤ä¹ äº†ä¸€ä¸‹æ‹·è´æ„é€ ,å¹¶ä¸”äº†è§£äº†ç§»åŠ¨æ„é€ ,åˆæœ‰æ–°çš„æ„Ÿæ‚Ÿå¦‚ä¸‹\n1. åœ¨ä¾‹å­ æ–¹æ¡ˆä¸€ å°è¯•åœ¨æ‹·è´æ„é€ è½¬ç§»æŒ‡é’ˆçš„æ‰€æœ‰æƒ é€šè¿‡æ‹·è´æ„é€  è·å¾—ä¸€ä¸ªä¸´æ—¶æŒ‡é’ˆè¯¥æŒ‡é’ˆç”¨æ¥æ¥æ›¿å°†äº¡å¯¹è±¡çš„æŒ‡é’ˆæ‰€æŒ‡çš„åœ°å€ ç„¶åå°†å°†äº¡å¯¹è±¡çš„æŒ‡é’ˆç½®ä¸ºç©º é‡Šæ”¾å°†äº¡å¯¹è±¡å¯¹ç›®æ ‡çš„æ§åˆ¶ åŒæ—¶å°†ä¸´æ—¶æŒ‡é’ˆè¿”å›ç„¶åæ‹·è´æ„é€ çš„å¯¹è±¡æ¥ç®¡ç›®æ ‡\n2. èµ‹å€¼å‡½æ•°ä¹Ÿæ˜¯åŒæ ·çš„æ“ä½œ  å°†ç›®æ ‡è½¬äº¤ç»™å¯¹è±¡ ç„¶åå°†äº¡å¯¹è±¡é‡Šæ”¾å¯¹ç›®æ ‡çš„æ§åˆ¶\nç§»åŠ¨æ„é€ çš„ç¼ºé™·ç¡®å®æ˜¯åœ¨äº¤å‡ºäº†æ§åˆ¶æƒåå°±ä¸å†æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡äº†\n3. smart_ptr&lt;circle&gt; è½¬æ¢æˆsmart_ptr&lt;shape&gt; å¢åŠ äº†ä¸€ä¸ªæ„é€ å‡½æ•° ä¸èƒ½å°†smart_ptr&lt;circle&gt;è½¬æ¢æˆsmart_ptr&lt;triangle&gt;çš„åŸå› å°±å› ä¸ºtriangleä¸æ˜¯circleç±»çš„çˆ¶ç±»å§ æ‰€ä»¥è½¬æ¢æ˜¯ä¸å®‰å…¨çš„,è€Œä¸”åº”è¯¥æ˜¯ä¸ä¼šæˆåŠŸçš„\n4. fatal error: â€˜ptr_â€™ is a private member of â€˜smart_ptr&lt;circle&gt;â€™é’ˆå¯¹è¿™ä¸ªé”™è¯¯å…¶å®è¿˜å¯ä»¥æä¾›ä¸€ä¸ªè®¾ç½®å’Œè·å–çš„æ¥å£ å¦‚æœç”¨å‹å…ƒç±»çš„è¯ è¿˜ä¼šç ´åä»£ç çš„å°è£…æ€§å“¦å˜¿å˜¿\nç¬¬äºŒéçœ‹çš„æ—¶å€™æ„Ÿè§‰è½»æ¾äº†å¾ˆå¤š åŸºæœ¬ä¸Šäº†è§£äº† unique_ptr å’Œshared_ptrçš„åŸç†  ä½†æ˜¯æ›´å¤šçš„ç¡®å®å¤ä¹ äº†ä¸€éå„ç§æ„é€ å‡½æ•°å’Œå­¦ä¹ äº† ç§»åŠ¨æ„é€ ....\nç›´æ¥å›ç­”ç¬¬3é—® \nä¸€å®šè¦é¿å… å¤šçº¿ç¨‹çš„å¼‚æ­¥æ“ä½œ æ¯”å¦‚shared_ptråœ¨å¼•ç”¨ä¸º1çš„æ—¶å€™ ä¸€ä¸ªçº¿ç¨‹åœ¨å¼•ç”¨ å¦‚æœä¸€ä¸ªçº¿ç¨‹åœ¨é‡Šæ”¾å°±ä¼šå‡ºå¤§é—®é¢˜å“’ æ‰€ä»¥åº”è¯¥ä¿è¯åŒæ­¥æ€§\n\n","like_count":3},{"had_liked":false,"id":363647,"user_name":"Geek_7c0961","can_delete":false,"product_type":"c1","uid":2277181,"ip_address":"ç¾å›½","ucode":"B1482E64FF9E4E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ8aLz0tWdsZuMiaNUAd0dicSD9M6A77seMGFdHgvsQwOzN8ztYPiaJSo53DcbjQWUQpw4pf4rI2f7vg/132","comment_is_top":false,"comment_ctime":1669914963,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"è®²å¾—çœŸå¥½,æœ‰æ·±åº¦.","like_count":1},{"had_liked":false,"id":299580,"user_name":"å®µç»ƒ2233","can_delete":false,"product_type":"c1","uid":2662996,"ip_address":"","ucode":"3EBDF8195040DA","user_header":"https://static001.geekbang.org/account/avatar/00/28/a2/54/49dfb810.jpg","comment_is_top":false,"comment_ctime":1624721441,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"åœ¨è°ƒç”¨smart_ptræ—¶ï¼Œéœ€è¦æ˜¾æ€§åœ°å…ˆå»è°ƒç”¨newç„¶åæ„é€ æ™ºèƒ½æŒ‡é’ˆï¼Œæ™ºèƒ½æŒ‡é’ˆçš„æ„é€ å‡½æ•°å†…éƒ¨åˆè°ƒç”¨äº†ä¸€ä¸ª\nnewå»æ„é€ countï¼Œä¸¤ä¸ªnewè¿™å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚shared_ptræœ‰ä¸€ä¸ªmake_sharedå‡½æ•°ç›´æ¥æ„é€ æ™ºèƒ½æŒ‡é’ˆå’Œå®ƒæŒ‡å‘çš„å¯¹è±¡ï¼Œåªè°ƒç”¨ä¸€æ¬¡newï¼Œä¸€æ¬¡å°†å¯¹è±¡å’Œcountçš„å†…å­˜åˆ†é…å‡ºæ¥ã€‚","like_count":1},{"had_liked":false,"id":279509,"user_name":"doge","can_delete":false,"product_type":"c1","uid":1593251,"ip_address":"","ucode":"9E2D4C8F9B4CBC","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/a3/0e56b4e5.jpg","comment_is_top":false,"comment_ctime":1613810036,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"æœ¬ç« çœ‹äº†1å¤©ï¼Œç…§ç€ç ä»£ç ç äº†ä¸€å¤©ï¼Œç»“åˆè€å¸ˆç»™çš„æ–‡ç« é“¾æ¥ï¼Œç»ˆäºæ˜ç™½äº†èµ‹å€¼è¿ç®—é‡Œçš„smart_ptr otherå€¼å®šä¹‰çš„å¦™å¤„ï¼Œå¤ç”¨äº† æ‹·è´&#47;ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œä¸”å°†å¼‚å¸¸çš„æ£€æŸ¥äº¤ç»™äº†ç¼–è¯‘å™¨ï¼ŒåŒäº‹è®©èµ‹å€¼çš„å‡½æ•°åŠå…¶ç®€å•ï¼ŒçœŸæ˜¯å¦™å•Šï¼Œå­¦åˆ°äº†ï¼","like_count":1},{"had_liked":false,"id":274802,"user_name":"Geek_f8fcc0","can_delete":false,"product_type":"c1","uid":2376292,"ip_address":"","ucode":"B87BCD9D63CB60","user_header":"","comment_is_top":false,"comment_ctime":1611162728,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"æˆ‘è§‰å¾—è€å¸ˆå¥½å¼ºï¼","like_count":1},{"had_liked":false,"id":157578,"user_name":"æ¥šå°å¥•","can_delete":false,"product_type":"c1","uid":1011022,"ip_address":"","ucode":"AB808A42C2535E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6d/4e/347c3e8f.jpg","comment_is_top":false,"comment_ctime":1575201229,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":19,"product_id":100040501,"comment_content":"å†™çš„å¾ˆå¥½ï½ï½ ç­‰æ›´æ–°","like_count":1},{"had_liked":false,"id":347381,"user_name":"å¤§è±¡ä½©å¥‡","can_delete":false,"product_type":"c1","uid":1070165,"ip_address":"","ucode":"EAFB4FA3B9CFEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/55/f686c2ed.jpg","comment_is_top":false,"comment_ctime":1653981311,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"å¤§è„‘ç¼ºæ°§äº†...","like_count":0},{"had_liked":false,"id":325911,"user_name":"ue5","can_delete":false,"product_type":"c1","uid":2754983,"ip_address":"","ucode":"6CA310ACE02ED4","user_header":"https://static001.geekbang.org/account/avatar/00/2a/09/a7/541e33bc.jpg","comment_is_top":false,"comment_ctime":1639227261,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"åŸæ¥å¦‚æ­¤    å¤šä¸ªå…±äº«æŒ‡é’ˆå…±åŒç»´æŠ¤ä¸€ä¸ªCountå¯¹è±¡   ","like_count":0},{"had_liked":false,"id":279645,"user_name":"Geek_227a72","can_delete":false,"product_type":"c1","uid":2417911,"ip_address":"","ucode":"385B764D9AEAE8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKsI6VdljHFtMx4cgEPpqhXiaIYQicqGcal8sIoBYQZn7tYQyPLH1FuOVP8SaYPghPIsqSa1DWjRT2A/132","comment_is_top":false,"comment_ctime":1613888802,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1};             &#47;&#47; ç¼–è¯‘å‡ºé”™\nsmart_ptr&lt;shape&gt; ptr3;\nptr3 = ptr1;                             &#47;&#47; ç¼–è¯‘å‡ºé”™\nptr3 = std::move(ptr1);                  &#47;&#47; OKï¼Œå¯ä»¥\nsmart_ptr&lt;shape&gt; ptr4{std::move(ptr3)};  &#47;&#47; OKï¼Œ\n\nè¿™æ®µä»£ç åªèƒ½ç§»åŠ¨èµ‹å€¼ï¼Œè€Œä¸èƒ½æ‹·è´èµ‹å€¼ï¼Œæ‰€ä»¥ç¼–è¯‘å‡ºé”™","like_count":0},{"had_liked":false,"id":277316,"user_name":"èƒ¡æ¢¦é¾™","can_delete":false,"product_type":"c1","uid":2419779,"ip_address":"","ucode":"E8AE0B96043D5F","user_header":"https://static001.geekbang.org/account/avatar/00/24/ec/43/0d38ddb3.jpg","comment_is_top":false,"comment_ctime":1612355795,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œå››ä¸ªå°æ—¶æ‰è·Ÿç€æ•²äº†ä¸€éï¼Œè¿˜éœ€è¦å¤šç†è§£ç†è§£ï¼Œc++æœç„¶åšå¤§ç²¾æ·±å•Šã€‚è€å¸ˆè¶…æ£’ï¼","like_count":0},{"had_liked":false,"id":176230,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","comment_is_top":false,"comment_ctime":1580995925,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"28è¡Œçš„friend class smart_ptr;ï¼Œè¿™ä¸ªä½œç”¨æ˜¯å•¥ï¼Ÿè‡ªå·±æ˜¯è‡ªå·±çš„å‹å…ƒ?è¿™ä¸ªå»æ‰ä¹Ÿèƒ½æ­£ç¡®è¿è¡Œã€‚","like_count":0},{"had_liked":false,"id":174434,"user_name":"ä¸€åªå°èˆ¹","can_delete":false,"product_type":"c1","uid":1813421,"ip_address":"","ucode":"A8BDA47C77052E","user_header":"https://static001.geekbang.org/account/avatar/00/1b/ab/ad/244647e1.jpg","comment_is_top":false,"comment_ctime":1580207120,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"è®²çš„å¤ªå¥½äº†ï¼Œå¯¹äºæ™ºèƒ½æŒ‡é’ˆçš„å‰–æçœŸçš„å¤ªæ£’äº†ï¼Œå—ç›ŠåŒªæµ…ï¼Œè°¢è°¢è®²å¸ˆã€‚","like_count":0},{"had_liked":false,"id":168780,"user_name":"åˆ˜å¾·èª","can_delete":false,"product_type":"c1","uid":1316662,"ip_address":"","ucode":"2968605D077072","user_header":"https://static001.geekbang.org/account/avatar/00/14/17/36/3d8e86e6.jpg","comment_is_top":false,"comment_ctime":1578157322,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"è·Ÿç€è€å¸ˆæ€è·¯ï¼Œè®²çš„çœŸå¥½ã€‚","like_count":0},{"had_liked":false,"id":157234,"user_name":"çš“é¦–ä¸å€¦","can_delete":false,"product_type":"c1","uid":1144626,"ip_address":"","ucode":"FA7D282DD40D83","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/32/02416d97.jpg","comment_is_top":false,"comment_ctime":1575093502,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"è¯·é—®ä¸‹è€å¸ˆä¸ºä»€ä¹ˆ smart ptr çš„å·¦å€¼å¼•ç”¨ç‰ˆæœ¬æ„é€ å‡½æ•°æœ‰ä¸¤ä¸ªç‰ˆæœ¬ ä¸€ä¸ªæ³›å‹ç‰ˆæœ¬ ä¸€ä¸ªéæ³›å‹ç‰ˆæœ¬ ä½†æ˜¯å‡½æ•°ä½“å†…å®¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ è¿™æ ·è®¾è®¡çš„æ„å›¾æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":347381,"user_name":"å¤§è±¡ä½©å¥‡","can_delete":false,"product_type":"c1","uid":1070165,"ip_address":"","ucode":"EAFB4FA3B9CFEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/55/f686c2ed.jpg","comment_is_top":false,"comment_ctime":1653981311,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"å¤§è„‘ç¼ºæ°§äº†...","like_count":0},{"had_liked":false,"id":325911,"user_name":"ue5","can_delete":false,"product_type":"c1","uid":2754983,"ip_address":"","ucode":"6CA310ACE02ED4","user_header":"https://static001.geekbang.org/account/avatar/00/2a/09/a7/541e33bc.jpg","comment_is_top":false,"comment_ctime":1639227261,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"åŸæ¥å¦‚æ­¤    å¤šä¸ªå…±äº«æŒ‡é’ˆå…±åŒç»´æŠ¤ä¸€ä¸ªCountå¯¹è±¡   ","like_count":0},{"had_liked":false,"id":279645,"user_name":"Geek_227a72","can_delete":false,"product_type":"c1","uid":2417911,"ip_address":"","ucode":"385B764D9AEAE8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKsI6VdljHFtMx4cgEPpqhXiaIYQicqGcal8sIoBYQZn7tYQyPLH1FuOVP8SaYPghPIsqSa1DWjRT2A/132","comment_is_top":false,"comment_ctime":1613888802,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"smart_ptr&lt;shape&gt; ptr1{create_shape(shape_type::circle)};\nsmart_ptr&lt;shape&gt; ptr2{ptr1};             &#47;&#47; ç¼–è¯‘å‡ºé”™\nsmart_ptr&lt;shape&gt; ptr3;\nptr3 = ptr1;                             &#47;&#47; ç¼–è¯‘å‡ºé”™\nptr3 = std::move(ptr1);                  &#47;&#47; OKï¼Œå¯ä»¥\nsmart_ptr&lt;shape&gt; ptr4{std::move(ptr3)};  &#47;&#47; OKï¼Œ\n\nè¿™æ®µä»£ç åªèƒ½ç§»åŠ¨èµ‹å€¼ï¼Œè€Œä¸èƒ½æ‹·è´èµ‹å€¼ï¼Œæ‰€ä»¥ç¼–è¯‘å‡ºé”™","like_count":0},{"had_liked":false,"id":277316,"user_name":"èƒ¡æ¢¦é¾™","can_delete":false,"product_type":"c1","uid":2419779,"ip_address":"","ucode":"E8AE0B96043D5F","user_header":"https://static001.geekbang.org/account/avatar/00/24/ec/43/0d38ddb3.jpg","comment_is_top":false,"comment_ctime":1612355795,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œå››ä¸ªå°æ—¶æ‰è·Ÿç€æ•²äº†ä¸€éï¼Œè¿˜éœ€è¦å¤šç†è§£ç†è§£ï¼Œc++æœç„¶åšå¤§ç²¾æ·±å•Šã€‚è€å¸ˆè¶…æ£’ï¼","like_count":0},{"had_liked":false,"id":176230,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","comment_is_top":false,"comment_ctime":1580995925,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"28è¡Œçš„friend class smart_ptr;ï¼Œè¿™ä¸ªä½œç”¨æ˜¯å•¥ï¼Ÿè‡ªå·±æ˜¯è‡ªå·±çš„å‹å…ƒ?è¿™ä¸ªå»æ‰ä¹Ÿèƒ½æ­£ç¡®è¿è¡Œã€‚","like_count":0},{"had_liked":false,"id":174434,"user_name":"ä¸€åªå°èˆ¹","can_delete":false,"product_type":"c1","uid":1813421,"ip_address":"","ucode":"A8BDA47C77052E","user_header":"https://static001.geekbang.org/account/avatar/00/1b/ab/ad/244647e1.jpg","comment_is_top":false,"comment_ctime":1580207120,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"è®²çš„å¤ªå¥½äº†ï¼Œå¯¹äºæ™ºèƒ½æŒ‡é’ˆçš„å‰–æçœŸçš„å¤ªæ£’äº†ï¼Œå—ç›ŠåŒªæµ…ï¼Œè°¢è°¢è®²å¸ˆã€‚","like_count":0},{"had_liked":false,"id":168780,"user_name":"åˆ˜å¾·èª","can_delete":false,"product_type":"c1","uid":1316662,"ip_address":"","ucode":"2968605D077072","user_header":"https://static001.geekbang.org/account/avatar/00/14/17/36/3d8e86e6.jpg","comment_is_top":false,"comment_ctime":1578157322,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"è·Ÿç€è€å¸ˆæ€è·¯ï¼Œè®²çš„çœŸå¥½ã€‚","like_count":0},{"had_liked":false,"id":157234,"user_name":"çš“é¦–ä¸å€¦","can_delete":false,"product_type":"c1","uid":1144626,"ip_address":"","ucode":"FA7D282DD40D83","user_header":"https://static001.geekbang.org/account/avatar/00/11/77/32/02416d97.jpg","comment_is_top":false,"comment_ctime":1575093502,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":20,"product_id":100040501,"comment_content":"è¯·é—®ä¸‹è€å¸ˆä¸ºä»€ä¹ˆ smart ptr çš„å·¦å€¼å¼•ç”¨ç‰ˆæœ¬æ„é€ å‡½æ•°æœ‰ä¸¤ä¸ªç‰ˆæœ¬ ä¸€ä¸ªæ³›å‹ç‰ˆæœ¬ ä¸€ä¸ªéæ³›å‹ç‰ˆæœ¬ ä½†æ˜¯å‡½æ•°ä½“å†…å®¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ è¿™æ ·è®¾è®¡çš„æ„å›¾æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0}]}