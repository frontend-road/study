{"id":317071,"title":"12 | IoT Hubï¼šé¢å¯¹æµ·é‡è®¾å¤‡å¦‚ä½•æ‰“é€ é«˜æ€§èƒ½è®¾å¤‡æ¥å…¥å±‚ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ­æœæ–Œã€‚</p><p>å‰é¢ä¸¤è®²ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨è°ˆç‰©è”ç½‘äº‘å¹³å°é’ˆå¯¹æµ·é‡æ•°æ®çš„å¤„ç†å’Œå­˜å‚¨æŠ€æœ¯ã€‚é¡ºç€ç‰©è”ç½‘çš„æ•°æ®æŠ€æœ¯ä½“ç³»ç»§ç»­å¾€ä¸‹æ¢ç´¢ï¼Œæˆ‘ä»¬è‡ªç„¶å°±ä¼šé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼šç‰©è”ç½‘äº‘å¹³å°çš„æœåŠ¡å™¨éœ€è¦ç®¡ç†æµ·é‡è®¾å¤‡çš„æ¥å…¥ï¼Œå¹¶ä¸”æ¥æ”¶æ¥è‡ªè®¾å¤‡çš„æµ·é‡æ•°æ®çš„è¾“å…¥ï¼Œé‚£ä¹ˆæœåŠ¡å™¨è¦æ€ä¹ˆåº”å¯¹è¿™æ ·çš„æŒ‘æˆ˜å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚ç‰©è”ç½‘è®¾å¤‡æ˜¯é€šè¿‡æŸç§é€šä¿¡åè®®æ¥å…¥äº‘å¹³å°çš„ï¼Œæ¯”å¦‚å¸¸ç”¨çš„MQTTåè®®ï¼Œé‚£ä¹ˆè®¾å¤‡æ¥å…¥çš„æœåŠ¡å™¨å°±æ˜¯MQTT BrokeræœåŠ¡å™¨ã€‚</p><p>ä»æ¶æ„è®¾è®¡æ¥è¯´ï¼Œè´Ÿè´£è®¾å¤‡æ¥å…¥çš„è¿™ä¸€éƒ¨åˆ†ä¸€èˆ¬å«ä½œ<strong>è®¾å¤‡æ¥å…¥å±‚</strong>ï¼Œä¹Ÿè¢«ç§°ä¸º<strong>IoT Hub</strong>ã€‚è®¾å¤‡æ¥å…¥å±‚ä¹‹åï¼Œæ‰æ˜¯å’Œäº’è”ç½‘ç³»ç»Ÿç±»ä¼¼çš„<strong>ä¸šåŠ¡å±‚</strong>ã€‚å…·ä½“çš„ç³»ç»Ÿæ¶æ„å›¾å¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/fd/5b/fdb74fcd872c299459bbb2f28383325b.jpg?wh=2700*1886\" alt=\"\"></p><p>ä¸è¿‡ï¼Œä¼°è®¡ä½ ä¹Ÿå‘ç°é—®é¢˜äº†ï¼Œè¿™æ ·çš„æ¶æ„æ ¹æœ¬æ— æ³•æ”¯æ’‘ç‰©è”ç½‘åœºæ™¯ä¸­æµ·é‡è®¾å¤‡çš„æ¥å…¥å’Œæµ·é‡æ•°æ®çš„è¾“å…¥ã€‚å•å°MQTT BrokeræœåŠ¡å™¨å¾ˆå®¹æ˜“é¢ä¸´æ€§èƒ½ç“¶é¢ˆã€‚æ‰€ä»¥å‰é¢æåˆ°çš„â€œæœåŠ¡å™¨æ€ä¹ˆåº”å¯¹æŒ‘æˆ˜â€çš„é—®é¢˜å°±å˜æˆäº†ï¼šæ€ä¹ˆæ‰“é€ é«˜æ€§èƒ½çš„è®¾å¤‡æ¥å…¥å±‚ï¼Ÿ</p><p>æˆ‘ä»¬å†ç»§ç»­æ·±å…¥åˆ†æï¼ŒæŠŠå…³é”®ç‚¹å®šä½å¾—æ›´å…·ä½“ä¸€ç‚¹ã€‚æ‰“é€ <strong>é«˜æ€§èƒ½</strong>çš„è®¾å¤‡æ¥å…¥å±‚ï¼Œæœ€é‡è¦çš„æŠ€æœ¯éš¾ç‚¹æ˜¯ï¼Œå¦‚ä½•å®ç°æ¥å…¥å±‚çš„<strong>é«˜å¹¶å‘</strong>ã€‚å› ä¸ºåªæœ‰å…·å¤‡é«˜å¹¶å‘çš„èƒ½åŠ›ï¼Œæ‰èƒ½æœ‰æ•ˆåœ°ã€å¯é åœ°å®ç°æ•°æ®çš„ä¼ è¾“ã€‚</p><p>æ‰€ä»¥ï¼Œç°åœ¨é—®é¢˜åˆå˜æˆäº†ï¼šç‰©è”ç½‘äº‘å¹³å°ä¸­ï¼Œæ€ä¹ˆå®ç°é«˜å¹¶å‘çš„è®¾å¤‡æ¥å…¥å±‚ï¼Ÿ</p><!-- [[[read_end]]] --><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±å¸¦ä½ ä¸€æ­¥ä¸€æ­¥åœ°è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘çš„è®¾å¤‡æ¥å…¥å±‚ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¼šä¸ºä½ è¯¦ç»†åœ°è®²è§£æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„é‡è¦æŠ€æœ¯ï¼Œè®©ä½ ä¸ºç‰©è”ç½‘å¹³å°çš„æ­å»ºåšå¥½æŠ€æœ¯å‚¨å¤‡ã€‚</p><h2>è´Ÿè½½å‡è¡¡ï¼šè®©å¤šå°æœåŠ¡å™¨æ›´å¥½åœ°åä½œ</h2><p><a href=\"https://time.geekbang.org/column/article/316274\">ä¸Šä¸€è®²</a>æˆ‘æ›¾ç»æåˆ°ï¼Œä¸ºäº†è§£å†³ç­éœ¸è¿™ä¸ªéš¾é¢˜ï¼Œè¦è®©è¶…çº§è‹±é›„ä»¬ç»„æˆè”ç›Ÿã€‚åŒæ ·åœ°ï¼Œé¢å¯¹æ€§èƒ½ç“¶é¢ˆï¼Œæˆ‘ä»¬å¯ä»¥é›†åˆå¤šä¸ªæœåŠ¡å™¨çš„åŠ›é‡æ¥è§£å†³é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥é€šè¿‡å¢åŠ å¤šå°MQTT BrokeræœåŠ¡å™¨æ¥æ»¡è¶³æµ·é‡è®¾å¤‡çš„è¿æ¥è¯·æ±‚ã€‚</p><p>ä½†æ˜¯æœåŠ¡å™¨æ•°é‡å˜å¤šä¹‹åï¼Œå®ƒä»¬å…·ä½“è¦æ€ä¹ˆåä½œå‘¢ï¼Ÿæ¯”å¦‚ä¸€ä¸ªMQTTè¯·æ±‚è¿‡æ¥äº†ï¼Œå®ƒåº”è¯¥è¢«åˆ†é…ç»™å“ªå°æœåŠ¡å™¨å¤„ç†å‘¢ï¼Ÿæ›´è¿›ä¸€æ­¥åœ°è¯´ï¼Œæ€ä¹ˆä¿è¯æ¯å°æœåŠ¡å™¨çš„è´Ÿæ‹…å’Œå‹åŠ›éƒ½åŸºæœ¬å¹³è¡¡å‘¢ï¼Ÿ</p><p>è¿™å°±è¦ç”¨åˆ°è´Ÿè½½å‡è¡¡æŠ€æœ¯ã€‚<strong>è´Ÿè½½å‡è¡¡</strong>ï¼ˆLoad Balancerï¼‰è¿™ä¸ªåå­—éå¸¸å½¢è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æˆâ€œè´Ÿè½½â€å’Œâ€œå‡è¡¡â€ä¸¤ä¸ªè¯æ¥ç†è§£ã€‚</p><ul>\n<li><strong>è´Ÿè½½</strong>æ˜¯æŒ‡æœåŠ¡å™¨é¢å¯¹çš„ç½‘ç»œè¿æ¥å’ŒæœåŠ¡è¯·æ±‚çš„<strong>å‹åŠ›</strong>ï¼Œä¹Ÿå°±æ˜¯  â€œå›°éš¾â€ã€‚</li>\n<li><strong>å‡è¡¡</strong>æ˜¯é’ˆå¯¹æœåŠ¡å™¨å‹åŠ›çš„è§£å†³åŠæ³•ï¼Œå¤šä¸ªæœåŠ¡å™¨ä¸€èµ·æ¥å¤„ç†ä»»åŠ¡ï¼Œå¹¶ä¸”è¿™å‡ ä¸ªæœåŠ¡å™¨çš„å‹åŠ›è¦è¾¾åˆ°<strong>å¹³è¡¡</strong>çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯â€œåˆ†æ‹…â€ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/1e/32/1e6b6eeff26f3ed5c15debfc3df2fe32.jpg?wh=2700*1270\" alt=\"\"></p><p>è¿™ç§å¹³è¡¡çŠ¶æ€è¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ç§ä»»åŠ¡<strong>åˆ†é…ç­–ç•¥</strong>ã€‚</p><p>æœ€ç®€å•ã€ç›´æ¥çš„åŠæ³•å°±æ˜¯<strong>å¹³å‡åˆ†é…</strong>ã€‚</p><p>æ¯”å¦‚æœ‰3ä¸ªæœåŠ¡å™¨éƒ½åœ¨ç­‰å¾…åˆ†é…ã€‚å½“ä¸€ä¸ªæœåŠ¡è¯·æ±‚åˆ°æ¥æ—¶ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å…ˆå°†å®ƒç»™æœåŠ¡å™¨1å¤„ç†ï¼›æ¥ç€ç¬¬äºŒä¸ªè¯·æ±‚åˆ°æ¥æ—¶ï¼Œç»™æœåŠ¡å™¨2å¤„ç†ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>å½“ç¬¬å››ä¸ªæœåŠ¡è¯·æ±‚éœ€è¦å¤„ç†æ—¶ï¼Œè´Ÿè½½å‡è¡¡è½¬å›æ¥ï¼Œå†æ¬¡æŒ‡å®šç»™æœåŠ¡å™¨1ï¼Œå¾ªç¯è½®è½¬ã€‚æ‰€ä»¥è¿™ç§ç­–ç•¥ä¹Ÿå«<strong>è½®è¯¢ç­–ç•¥</strong>ï¼ˆRound Robin Schedulingï¼‰ã€‚</p><p>å¦‚æœç”¨å…¬å¼æ¥è¡¨è¾¾è¿™ä¸ªæœåŠ¡å™¨åºå·çš„è®¡ç®—æ–¹æ³•ï¼Œé‚£å°±æ˜¯ï¼š</p><p>$$i = (i+1)mod(n)$$</p><p>å…¶ä¸­ i æ˜¯æœåŠ¡å™¨çš„åºå·ï¼Œä»0å¼€å§‹è®¡æ•°ï¼›nè¡¨ç¤ºæœåŠ¡å™¨ä¸ªæ•°ï¼Œè¿™é‡Œnç­‰äº3ã€‚</p><p>å½“ç„¶ï¼Œåœ¨ç°å®ç¯å¢ƒä¸­ï¼Œå„ä¸ªæœåŠ¡å™¨çš„é…ç½®å¹¶ä¸æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œæœ‰çš„ä»»åŠ¡å¤„ç†èƒ½åŠ›å¼ºï¼Œæœ‰çš„èƒ½åŠ›å¼±äº›ã€‚è¿™å°±åƒåœ¨å¤ä»‡è€…è”ç›Ÿä¸­ï¼Œæ¯ä½è‹±é›„çš„å¼ºåº¦ä¹Ÿå„æœ‰ä¸åŒã€‚</p><p>æˆ‘ä»¬è‡ªç„¶å¸Œæœ›èƒ½åŠ›å¼ºçš„æœåŠ¡å™¨å¤šè´Ÿæ‹…ä¸€äº›ä»»åŠ¡ï¼Œæ‰€ä»¥å¯¹äºè½®è¯¢ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥<strong>æƒé‡ç³»æ•°</strong>ã€‚</p><p>æ¯”å¦‚æœåŠ¡å™¨1çš„æƒé‡æ˜¯2ï¼ŒæœåŠ¡å™¨2çš„æ˜¯4ï¼ŒæœåŠ¡å™¨3çš„æ˜¯1ï¼Œé‚£ä¹ˆè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å°±å¯ä»¥ç»™æœåŠ¡å™¨2å¤šåˆ†é…ä»»åŠ¡ï¼Œè€Œç»™æœåŠ¡å™¨3åˆ†é…æœ€å°‘çš„å·¥ä½œã€‚</p><p>è¿™ä¸ªæ”¹è‰¯ç‰ˆçš„ç­–ç•¥å°±æ˜¯<strong>åŠ æƒè½®è¯¢ç­–ç•¥</strong>ï¼ˆWeighted Round Robin Schedulingï¼‰ã€‚</p><p>ä¸ç®¡æ˜¯è½®è¯¢ç­–ç•¥ï¼Œè¿˜æ˜¯åŠ æƒè½®è¯¢ç­–ç•¥ï¼Œå®ƒä»¬å…·æœ‰ç®€å•å®ç”¨çš„ä¼˜ç‚¹ã€‚ä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¤„ç†æ¯ä¸ªä»»åŠ¡çš„æ—¶é—´æ˜¯ä¸åŒã€‚å°¤å…¶æ˜¯åœ¨ç‰©è”ç½‘åœºæ™¯ä¸­ï¼Œè®¾å¤‡å¯èƒ½ä¼šè·ŸæœåŠ¡å™¨ä¿æŒé•¿è¿æ¥ã€‚å¯èƒ½æœ‰çš„æœåŠ¡å™¨è¢«åˆ†é…çš„è®¾å¤‡æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯ä¿æŒè¿æ¥çš„è®¾å¤‡å´å¾ˆå¤šã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä»ç„¶ä½¿ç”¨è½®è¯¢ç­–ç•¥ï¼Œé‚£ä¹ˆå„æœåŠ¡å™¨çš„è´Ÿè½½å°±å¾ˆéš¾è¾¾åˆ°å¹³è¡¡çŠ¶æ€ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§<strong>åŠ¨æ€è°ƒåº¦</strong>çš„ç­–ç•¥ï¼Œèƒ½å¤ŸåŸºäºå„æœåŠ¡å™¨çš„ç½‘ç»œè¿æ¥æ•°æƒ…å†µï¼Œä¼˜å…ˆå°†æ–°çš„ä»»åŠ¡åˆ†é…ç»™ä¿æŒè¿æ¥çš„è®¾å¤‡æ•°æœ€å°‘çš„æœåŠ¡å™¨ã€‚è¿™ç§åŸºäºè¿æ¥æ•°çš„ç­–ç•¥å°±æ˜¯<strong>æœ€å°è¿æ¥æ•°ç­–ç•¥</strong>ï¼ˆLeast Connection Schedulingï¼‰ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºæœ€å°è¿æ¥æ•°ç­–ç•¥å¼•å…¥æƒé‡ç³»æ•°ï¼Œç»™ä¸åŒèƒ½åŠ›çš„æœåŠ¡å™¨åˆ†é…ä¸åŒçš„æƒé‡ï¼Œæ›´å¥½åœ°å¹³è¡¡æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œè¿™å°±æ˜¯<strong>åŠ æƒæœ€å°è¿æ¥æ•°ç­–ç•¥</strong>ï¼ˆWeighted Least Connection Schedulingï¼‰ã€‚</p><p>è¿™ä¸ªç­–ç•¥æ˜¯æ€ä¹ˆè®¡ç®—çš„å‘¢ï¼Ÿå‡è®¾æœåŠ¡å™¨çš„æƒé‡åˆ†åˆ«æ˜¯$W_1$ã€$W_2$å’Œ$W_3$ï¼ŒæœåŠ¡å™¨çš„è¿æ¥æ•°åˆ†åˆ«æ˜¯$C_1$ã€$C_2$å’Œ$C_3$ï¼Œé‚£ä¹ˆè®¡ç®—çš„è¡¨è¾¾å¼æ˜¯è¿™æ ·çš„ï¼š</p><p>$$Min(C_1/W_1, C_2/W_2, C_3/W_3)$$</p><p>è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¼šé€‰æ‹©è®¡ç®—ç»“æœæ˜¯æœ€å°çš„é‚£å°æœåŠ¡å™¨ã€‚</p><p>å¦‚æœæœ‰2å°æˆ–è€…3å°æœåŠ¡å™¨çš„è®¡ç®—ç»“æœåŒæ—¶æœ€å°å‘¢ï¼Ÿè¿™æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è¿™å‡ å°æœåŠ¡å™¨ä¸­é‡‡ç”¨è½®è¯¢ç­–ç•¥ã€‚æ‰€ä»¥è¯´ï¼Œåˆ†é…ç­–ç•¥ä¸æ˜¯ç›¸äº’æ’æ–¥çš„ï¼Œåœ¨å®è·µä¸­æˆ‘ä»¬éœ€è¦ç»¼åˆä½¿ç”¨ä¸åŒçš„ç­–ç•¥ã€‚</p><p>è€ƒè™‘åˆ°è¿™ä¸ªåŸå› ï¼Œæˆ‘éœ€è¦ç»™ä½ å†è®²ä¸€ç§å¸¸ç”¨çš„åˆ†é…ç­–ç•¥ï¼Œé‚£å°±æ˜¯<strong>æºåœ°å€å“ˆå¸Œå€¼ç­–ç•¥</strong>ï¼ˆSource Hashing Schedulingï¼‰ã€‚</p><p>æ‰€è°“æºåœ°å€ï¼Œä¸€èˆ¬å°±æ˜¯æŒ‡ç½‘ç»œè¿æ¥çš„<strong>æºIPåœ°å€</strong>ã€‚è´Ÿè½½å‡è¡¡æœåŠ¡å™¨é€šè¿‡è®¡ç®—æºIPåœ°å€çš„å“ˆå¸Œå€¼æ¥ç¡®å®šå¯¹åº”çš„æœåŠ¡å™¨ã€‚å› ä¸ºç›¸åŒIPåœ°å€çš„å“ˆå¸Œå€¼æ˜¯ä¸å˜çš„ï¼Œè¿™å°±ä¿è¯äº†ç›¸åŒçš„è®¾å¤‡å¯ä»¥è¿æ¥åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šã€‚</p><p>åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼€æºè½¯ä»¶æ¥æ­å»ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ã€‚æ¯”å¦‚ <strong>HAProxy è½¯ä»¶</strong>ï¼Œå®ƒæ”¯æŒ<a href=\"https://en.wikipedia.org/wiki/OSI_model\">OSIç½‘ç»œä¸ƒå±‚æ¨¡å‹</a>ä¸­ç¬¬4å±‚å’Œç¬¬7å±‚çš„è´Ÿè½½å‡è¡¡ï¼Œæ€§èƒ½å¯ä»¥è·Ÿå•†ç”¨è§£å†³æ–¹æ¡ˆåª²ç¾ã€‚åŒæ—¶ï¼Œæˆ‘å»ºè®®æ­é…<strong>Keepalived</strong>è½¯ä»¶ä½¿ç”¨ï¼Œå®ç°é«˜å¯ç”¨çš„çƒ­å¤‡æ–¹æ¡ˆï¼Œè¿™æ ·å°±å¯ä»¥é¿å…å•æœºæ•…éšœå¯¼è‡´ç³»ç»Ÿç˜«ç—ªäº†ã€‚</p><h2>æ¶ˆæ¯é˜Ÿåˆ—ï¼šé¿å…è€—æ—¶çš„ç­‰å¾…</h2><p>å½“è´Ÿè½½å‡è¡¡æœåŠ¡å™¨å°†ç‰©è”ç½‘è®¾å¤‡çš„ç½‘ç»œè¯·æ±‚åˆ†é…åˆ° MQTT Broker æœåŠ¡å™¨åï¼ŒMQTT BrokeræœåŠ¡å™¨å°±å¯ä»¥ä¸è®¾å¤‡å»ºç«‹è¿æ¥ï¼Œå¹¶ä¸”æ”¶åˆ°è®¾å¤‡ä¸Šä¼ çš„æ•°æ®äº†ã€‚ç„¶åï¼Œæ•°æ®å°±ä¼šä¼ è¾“ç»™æ•°æ®æµå¤„ç†æœåŠ¡å™¨æˆ–è€…å†™å…¥æ•°æ®åº“ä¸­ã€‚</p><p>ä½†æ˜¯ï¼Œæ•°æ®æµå¤„ç†å’ŒæŠŠæ•°æ®å†™å…¥æ•°æ®åº“éƒ½æ˜¯èŠ±æ—¶é—´çš„æ“ä½œï¼Œå®ƒä»¬å’Œæ•°æ®ä¼ å…¥çš„é€Ÿåº¦å¹¶ä¸ä¸€è‡´ã€‚ä¸ºäº†å¯ä»¥è®©MQTT BrokeræœåŠ¡å™¨é«˜æ•ˆåœ°å®Œæˆæ•°æ®çš„ä¼ è¾“ï¼ŒåŒæ—¶ä¿è¯æ•°æ®æµå¤„ç†å’Œå†™å…¥æ•°æ®åº“çš„æ“ä½œå¯é æ‰§è¡Œï¼Œæˆ‘ä»¬éœ€è¦åœ¨MQTT BrokeræœåŠ¡å™¨å’Œæ•°æ®æµå¤„ç†æœåŠ¡å™¨ä¹‹é—´åŠ å…¥<strong>å¼‚æ­¥å¤„ç†</strong>æœºåˆ¶ã€‚</p><p>é‚£ä¹ˆï¼Œå¼‚æ­¥å¤„ç†æœºåˆ¶è¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿè¡Œä¸šå†…ä¸€èˆ¬é€šè¿‡<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>æ¥å®ç°ã€‚ä½ å¯ä»¥æŠŠæ¶ˆæ¯é˜Ÿåˆ—æƒ³è±¡æˆåŒåä¸€è´­ç‰©èŠ‚åçš„å¿«é€’å…¬å¸ï¼Œå®ƒæ”¶åˆ°å•†å®¶å¤§é‡çš„è¿å•ï¼Œç„¶åå¿«é€’å…¬å¸æŒ‰ç…§ä¸€å®šçš„èŠ‚å¥å®Œæˆè¿™äº›è¿å•çš„é€’é€ä»»åŠ¡ã€‚</p><p>åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼ŒMQTT Broker æœåŠ¡å™¨å°†æ•°æ®ç»™åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°±å®Œæˆäº†æ•°æ®ä¼ è¾“çš„å·¥ä½œã€‚åœ¨è¿™ä¹‹åï¼Œæ•°æ®æµå¤„ç†å’Œå†™å…¥æ•°æ®åº“çš„æ“ä½œåªè¦æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥ï¼Œæ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—å†…çš„æ•°æ®å°±è¡Œäº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/86/b9/86cf475dda27dcc25758b976e4d935b9.jpg?wh=2700*2050\" alt=\"\"></p><p>å¦å¤–ï¼Œæ¶ˆæ¯é˜Ÿåˆ—è¿˜æä¾›äº†é¢å¤–çš„ä¸¤ä¸ªå¥½å¤„ï¼š</p><ol>\n<li>å®ç°äº† MQTT Broker æœåŠ¡å™¨å’Œæ•°æ®æµå¤„ç†æœåŠ¡å™¨ä¹‹é—´çš„è§£è€¦ï¼ŒåŒæ–¹æ²¡æœ‰ç›´æ¥çš„ä¾èµ–ï¼Œæ‰€ä»¥ç»´æŠ¤æ›´æ–°ä¼šæ›´åŠ æ–¹ä¾¿ã€‚</li>\n<li>å¯ä»¥å¹³è¡¡è¾“å…¥æ•°æ®é‡çš„å¤§å°å˜åŒ–ï¼Œæ‰€ä»¥æ•°æ®æµå¤„ç†æœåŠ¡å™¨ä¸ä¼šå› ä¸ºéª¤å¢çš„å‹åŠ›è€Œå´©æºƒã€‚</li>\n</ol><p>æ—¢ç„¶æ¶ˆæ¯é˜Ÿåˆ—è¿™ä¹ˆé‡è¦ï¼Œä½ è‚¯å®šä¹Ÿæƒ³çŸ¥é“ï¼Œåœ¨å®è·µä¸­æœ‰æ²¡æœ‰å¼€æºçš„è½¯ä»¶å¯ä»¥é€‰æ‹©å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ã€‚æœ€å¸¸è§çš„é€‰æ‹©æœ‰<strong>Kafka</strong>å’Œ<strong>RabbitMQ</strong>ç­‰ã€‚</p><p>KafkaçœŸæ˜¯ä¸€ä¸ªç¥å¥‡çš„è½¯ä»¶ï¼Œå‡­å€Ÿç€ä¼˜ç§€çš„è®¾è®¡æˆä¸ºæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿçš„ä¸»æµé€‰æ‹©ã€‚è€Œä¸”åœ¨è¿™ä¸ªæˆåŠŸçš„åŸºç¡€ä¸Šï¼Œå®ƒè¿˜åœ¨ä¸æ–­æ”¹è¿›ï¼Œæ–°å¢äº†åˆ†å¸ƒå¼æµå¤„ç†å’Œåˆ†å¸ƒå¼å­˜å‚¨ç­‰åŠŸèƒ½ã€‚è™½ç„¶è¿™äº›æ–°åŠŸèƒ½ä¸ä¸€å®šæ¯”ä¸“é—¨çš„æµå¤„ç†å’Œå­˜å‚¨è½¯ä»¶æ›´å¼ºå¤§ï¼Œä½†å¯¹äºä¸­å°å‹çš„ä¸šåŠ¡æ¥è¯´å®Œå…¨å¤Ÿç”¨äº†ï¼Œå…³é”®æ˜¯éå¸¸æ–¹ä¾¿ï¼Œéƒ¨ç½²ä¹Ÿç®€å•ã€‚</p><h2>ç¼“å­˜ç³»ç»Ÿï¼šè®©æ•°æ®è¯»å†™æ›´å¿«é€Ÿ</h2><p>ä»æ¶æ„å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ•°æ®æµå¤„ç†æœåŠ¡å™¨å¤„ç†å®Œæ•°æ®åï¼Œè¿™äº›æ•°æ®ä¼šå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œæä¾›ç»™æ‰¹å¤„ç†æˆ–è€…ä¸šåŠ¡æœåŠ¡å™¨ä½¿ç”¨ï¼›è€Œä¸”å®ƒåœ¨è¿›è¡Œæ•°æ®å¤„ç†æ—¶ï¼Œä¹Ÿéœ€è¦ä»æ•°æ®å­˜å‚¨ä¸­è·å–ä¸€äº›ä¿¡æ¯ã€‚</p><p>ä½†æ˜¯æ•°æ®åº“çš„è¯»å†™æ•°æ®æ˜¯ä¸€ä¸ªé€Ÿåº¦æ¯”è¾ƒæ…¢çš„æ“ä½œï¼Œå°¤å…¶æ˜¯åŸºäºç£ç›˜ä»‹è´¨å­˜å‚¨çš„æ•°æ®åº“ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œæˆ‘ä»¬éœ€è¦æ¯”æ•°æ®åº“ï¼Œç”šè‡³åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæ›´å¿«çš„æ•°æ®å­˜å–æ–¹å¼ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°<strong>ç¼“å­˜ç³»ç»Ÿ</strong>äº†ã€‚</p><p>ç¼“å­˜æ˜¯ä¸€ä¸ªå¸¸è§çš„æ¦‚å¿µã€‚æ¯”å¦‚æµè§ˆå™¨ä¼šä½¿ç”¨ç¼“å­˜æ¥é¿å…é‡å¤ä»ç½‘ç»œè·å–ç½‘é¡µæ•°æ®ï¼Œä»è€Œæ›´åŠ å¿«é€Ÿåœ°å“åº”ç”¨æˆ·çš„è¯·æ±‚ã€‚</p><p>åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œå¼•å…¥ç¼“å­˜ç³»ç»Ÿå½“ç„¶æ˜¯ä¸ºäº†é¿å…ç›´æ¥ä»ç£ç›˜ä¸­è¯»å–æ•°æ®ï¼Œæˆ–è€…ç›´æ¥å‘ç£ç›˜ä¸­å†™å…¥æ•°æ®ã€‚</p><p>ç¼“å­˜ç³»ç»Ÿä¸€èˆ¬ä¼šå°†æ•°æ®æš‚æ—¶å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè¿™æ ·æ•°æ®æµå¤„ç†åº”ç”¨å°±ä¸éœ€è¦ç›´æ¥ä¸ä½é€Ÿçš„ç£ç›˜æ‰“äº¤é“äº†ã€‚è€Œä¸”ï¼Œå¦‚æœæˆ‘ä»¬è¯»å–çš„æ˜¯ç»å¸¸ç”¨åˆ°çš„çƒ­ç‚¹æ•°æ®æ—¶ï¼Œè¿™äº›æ•°æ®å…¨éƒ½ä¸éœ€è¦é‡å¤ä»ç£ç›˜è¯»å–ã€‚è¿™æ ·æ—¢å‡è½»äº†æ•°æ®åº“çš„å‹åŠ›ï¼Œåˆæé«˜äº†æ•°æ®å¤„ç†é€Ÿåº¦ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚</p><p>ç¼“å­˜ç³»ç»Ÿçš„å¸¸ç”¨å¼€æºé€‰æ‹©æœ‰<strong>Redis</strong>å’Œ<strong>Memcached</strong>ç­‰ã€‚å…¶ä¸­Redisæ›´æ˜¯åœ¨æ•°æ®æŒä¹…æœºåˆ¶å’Œä¸»ä»èŠ‚ç‚¹å¤åˆ¶çš„é«˜å¯ç”¨ç‰¹æ€§ä¸Šåšäº†å¾ˆå¤šå·¥ä½œï¼Œä¸ä½†åŠŸèƒ½å¼ºå¤§ï¼Œè€Œä¸”æ•ˆç‡ä¹Ÿå¾ˆé«˜ã€‚</p><p>åŠ å…¥ç¼“å­˜ç³»ç»Ÿä¹‹åï¼Œè®¾å¤‡æ¥å…¥å±‚çš„æ•´ä½“ç³»ç»Ÿæ¶æ„å°±å®Œæˆäº†ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢è¿™å¼ å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/11/88/11ef8db8026f1d9578d9c974a3af8b88.jpg?wh=2700*2315\" alt=\"\"></p><h2>å°ç»“</h2><p>æ€»ç»“ä¸€ä¸‹ï¼Œç‰©è”ç½‘äº‘å¹³å°çš„æœåŠ¡å™¨ä¸ºäº†åº”å¯¹æµ·é‡è®¾å¤‡æ¥å…¥å’Œæµ·é‡æ•°æ®è¾“å…¥çš„æŒ‘æˆ˜ï¼Œéœ€è¦æ‰“é€ é«˜å¹¶å‘çš„è®¾å¤‡æ¥å…¥å±‚ã€‚æ‰€ä»¥åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘å¸¦ä½ è®¾è®¡å¹¶å®Œå–„äº†è®¾å¤‡æ¥å…¥å±‚çš„æ•´ä½“æ¶æ„ï¼Œå¹¶è®²è§£äº†éœ€è¦ç”¨åˆ°çš„<strong>è´Ÿè½½å‡è¡¡</strong>ã€<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>å’Œ<strong>ç¼“å­˜ç³»ç»Ÿ</strong>ç­‰æŠ€æœ¯ã€‚</p><ol>\n<li>è´Ÿè½½å‡è¡¡ç”¨æ¥åè°ƒå¤šå°æœåŠ¡å™¨æ¥å…±åŒåº”å¯¹ç½‘ç»œè¿æ¥å’Œè¯·æ±‚çš„å‹åŠ›ï¼ŒæœåŠ¡å™¨ä»»åŠ¡åˆ†é…ç­–ç•¥ä¸»è¦æœ‰ä¸‰å¤§ç±»ï¼Œåˆ†åˆ«æ˜¯å¹³ç­‰åˆ†é…çš„è½®è¯¢ç­–ç•¥ï¼Œè€ƒè™‘è¿æ¥è®¾å¤‡æ•°çš„æœ€å°è¿æ¥ç­–ç•¥ï¼Œä»¥åŠä¿è¯ç›¸åŒçš„æºåœ°å€è®¿é—®åŒä¸€å°æœåŠ¡å™¨çš„æºåœ°å€å“ˆå¸Œå€¼ç­–ç•¥ã€‚</li>\n<li>è¿™äº›ç­–ç•¥å¯ä»¥æ­é…ä½¿ç”¨ï¼Œè¿˜å¯ä»¥é€šè¿‡å¼•å…¥åŠ æƒç³»æ•°æ¥æ”¹è¿›ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®åœºæ™¯çµæ´»é€‰æ‹©ï¼Œå¸¸ç”¨çš„å¼€æºæ–¹æ¡ˆæœ‰HAProxy è½¯ä»¶å’Œ Nginxè½¯ä»¶ï¼Œéƒ¨ç½²æ—¶å¯ä»¥æ­é…Keepalivedæé«˜å¯ç”¨æ€§ã€‚</li>\n<li>æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥åœ¨ä¸åŒçš„ç³»ç»Ÿä¹‹é—´æ­å»ºæ¡¥æ¢ï¼Œä¿è¯æ•°æ®å’ŒæœåŠ¡è¯·æ±‚çš„é«˜æ•ˆå¯é å¤„ç†ã€‚å¸¸ç”¨çš„å¼€æºè½¯ä»¶æœ‰Kafkaå’ŒRabbitMQç­‰ã€‚</li>\n<li>ç¼“å­˜ç³»ç»Ÿå¯ä»¥å‡è½»æ•°æ®åº“çš„å‹åŠ›ï¼Œæé«˜ç³»ç»Ÿå“åº”é€Ÿåº¦ã€‚å¸¸ç”¨çš„å¼€æºè½¯ä»¶æœ‰Rediså’ŒMemcachedç­‰ã€‚</li>\n</ol><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘æƒ³è¯·ä½ æ€è€ƒä¸€ä¸ªé—®é¢˜ã€‚</p><p>åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è´Ÿè½½å‡è¡¡æ¥åˆ†æ‹…æœåŠ¡å™¨çš„å‹åŠ›ã€‚è¿™é‡Œè®¾å¤‡æ˜¯ä½¿ç”¨MQTTåè®®ä¸æ¥å…¥å±‚æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯MQTT BrokeræœåŠ¡å™¨é€šä¿¡çš„ï¼Œæ‰€ä»¥ä¸åŒçš„è®¾å¤‡å‘é€çš„ç›¸åŒ Topic çš„æ¶ˆæ¯å°±ä¼šå‘é€åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚</p><p>å¦‚æœæœ‰è®¢é˜…è€…è®¢é˜…è¿™ä¸ª Topic æ¶ˆæ¯ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆä¿è¯è®¢é˜…è€…å¯ä»¥æ¥æ”¶åˆ°æ‰€æœ‰çš„è®¾å¤‡å‘é€çš„æ­¤Topicçš„æ¶ˆæ¯å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå†™ä¸€ä¸‹è‡ªå·±çš„æ€è€ƒï¼ŒåŒæ—¶ä¹Ÿæ¬¢è¿ä½ å°†æœ¬è®²åˆ†äº«ç»™å¯¹é«˜å¹¶å‘æ„Ÿå…´è¶£çš„æœ‹å‹ä¸€èµ·è®¨è®ºå­¦ä¹ ã€‚</p>","neighbors":{"left":{"article_title":"11 | æ•°æ®å­˜å‚¨ï¼šç‰©è”ç½‘ä¸­çš„æ•°æ®åº“æœ‰å“ªäº›ï¼Ÿ","id":316274},"right":{"article_title":"13 | éšç§ï¼šåœ¨å®è·µä¸­å¦‚ä½•ä¿æŠ¤ç”¨æˆ·éšç§ï¼Ÿ","id":317861}},"comments":[{"had_liked":false,"id":265989,"user_name":"ilæli","can_delete":false,"product_type":"c1","uid":1338637,"ip_address":"","ucode":"2193A7E41DEC68","user_header":"https://static001.geekbang.org/account/avatar/00/14/6d/0d/71053329.jpg","comment_is_top":false,"comment_ctime":1607091904,"is_pvip":false,"replies":[{"id":"97117","content":"å¤§èµğŸ‘ï¼Œå®Œå…¨æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607763428,"ip_address":"","comment_id":265989,"utype":1}],"discussion_count":3,"race_medal":0,"score":"96096372416","product_id":100063601,"comment_content":"å¯¹äºæ¯ä¸ªè®¾å¤‡è´Ÿè½½å‡è¡¡åˆ†é…è¿æ¥åˆ°é‚£ä¸ªMQTT Brokerï¼Œæ”¶åˆ°è®¾å¤‡PUBæ¶ˆæ¯çš„Brokerè·¯ç”±è½¬å‘è¯¥æ¶ˆæ¯åˆ°é›†ç¾¤çš„å…¶ä»–Brokerï¼Œè¿™éœ€è¦é›†ç¾¤ä¸­ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„ä¸»é¢˜Topicä¸æ¶ˆæ¯è·¯ç”±è¡¨Route Tableçš„å¯¹åº”å…³ç³»ï¼Œèƒ½å¤Ÿå‡†ç¡®è½¬å‘åˆ°å…¶ä»–æœ‰è®¢é˜…è¯¥ä¸»é¢˜çš„BrokerèŠ‚ç‚¹ä¸Šã€‚è€Œå¯¹äºBrokeræ”¶åˆ°PUBæ¶ˆæ¯åï¼ŒæŸ¥åˆ°ç›¸åº”çš„Topicï¼Œå¹¶å°†æ¶ˆæ¯å‘é€ç»™è®¢é˜…æ­¤ Topic çš„ç»ˆç«¯è®¾å¤‡ã€‚è¿™ä¸ªå…¨å±€çš„Topicæ¶ˆæ¯è·¯ç”±è¡¨æ˜¯ä¸ªå…³é”®çš„è®¾è®¡","like_count":23,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511115,"discussion_content":"å¤§èµğŸ‘ï¼Œå®Œå…¨æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607763428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1595467,"avatar":"https://static001.geekbang.org/account/avatar/00/18/58/4b/8b044dd3.jpg","nickname":"å’Œå…‰åŒå°˜","note":"","ucode":"A3195757E45CD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355623,"discussion_content":"è¿™ä¸ªæ–¹æ¡ˆä¸€è¡Œä»£ç éƒ½ä¸è¦å†™å§ï¼Œè¿™ä¸ªå°±æ˜¯mqttçš„åŸç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615461782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1057843,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","nickname":"é˜¿ç”˜","note":"","ucode":"BC93175B70E05D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1595467,"avatar":"https://static001.geekbang.org/account/avatar/00/18/58/4b/8b044dd3.jpg","nickname":"å’Œå…‰åŒå°˜","note":"","ucode":"A3195757E45CD5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548017,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—ï¼ŒMQTTä¸å°±æ˜¯å¤©ç„¶æ”¯æŒpub-subå—ï¼Ÿéš¾é“åªæ˜¯å•brokeræ”¯æŒï¼Ÿé›†ç¾¤éœ€è¦è‡ªå·±åšè¿™ä¸ªå·¥ä½œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642994908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":355623,"ip_address":""},"score":548017,"extra":""}]}]},{"had_liked":false,"id":265865,"user_name":"Geek_9b7997","can_delete":false,"product_type":"c1","uid":2306745,"ip_address":"","ucode":"1880C5824D4191","user_header":"","comment_is_top":false,"comment_ctime":1607054762,"is_pvip":false,"replies":[{"id":"97120","content":"å—¯ï¼Œåå‡ ä¸‡ã€ç”šè‡³å‡ åä¸‡çš„é‡çº§éƒ½å¯ä»¥ä¸ç”¨é›†ç¾¤","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607763723,"ip_address":"","comment_id":265865,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18786923946","product_id":100063601,"comment_content":"ä¸€èˆ¬çš„ä¼ä¸šçº§å¹³å°æ¯•ç«Ÿä¸æ˜¯å¤§å‚å¹³å°ï¼Œå¦‚æœæœ‰äº†è¾¹ç¼˜ç½‘å…³åï¼Œå¹¶å‘é‡æ˜¯ä¸æ˜¯å°±æ²¡æœ‰é‚£ä¹ˆå¤šäº†ï¼Ÿå…¶å®ä¹Ÿæ— éœ€é›†ç¾¤äº†ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511075,"discussion_content":"å—¯ï¼Œåå‡ ä¸‡ã€ç”šè‡³å‡ åä¸‡çš„é‡çº§éƒ½å¯ä»¥ä¸ç”¨é›†ç¾¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607763723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266083,"user_name":"YueShi","can_delete":false,"product_type":"c1","uid":1625530,"ip_address":"","ucode":"8F7AFAE4641A7D","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","comment_is_top":false,"comment_ctime":1607161046,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"14492062934","product_id":100063601,"comment_content":"è¿™ä¸ªé—®é¢˜æ˜¯ æ€ä¹ˆä¿è¯æ¶ˆæ¯å‡†ç¡®åˆ°è¾¾æ¶ˆè´¹è€…(è®¢é˜…è€…), <br>å°±æ˜¯ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±,<br>è¿™ä¸ªçš„è§£å†³æ˜¯é mqå®ç°çš„, å¸¸è§çš„å°±æ˜¯ackæœºåˆ¶, <br>æ¶ˆæ¯ç¡®è®¤æœºåˆ¶: æ¶ˆæ¯åœ¨åˆ°è¾¾æ¶ˆè´¹è€…åå¹¶è¢«æˆåŠŸæ¶ˆè´¹ä¹‹åä¼šå‘brokerå‘é€ackç¡®è®¤æ¶ˆæ¯, brokeræ‰ä¼šè®¤ä¸ºè¿™æ¡æ¶ˆæ¯å·²ç»æ¶ˆè´¹å®Œæ¯•, å¹¶è¿›è¡Œä¸‹ä¸€æ¡æ¶ˆæ¯<br><br>ä¸€èˆ¬çš„ackçº§åˆ«åˆ†ä¸º no-ack, auto-ack, manual-ackç­‰<br><br>ä½†æ˜¯è¿‡äºä¸¥æ ¼çš„è¦æ±‚ä¼šå¯¼è‡´æ–°çš„é—®é¢˜äº§ç”Ÿ, å°±æ˜¯ä¸€æ¡æ¶ˆæ¯è¢«æ¶ˆè´¹å¤šæ¬¡, è¿™ä¸ªä¸€èˆ¬æ˜¯é€šè¿‡ä»£ç å»ä¿è¯å¹‚ç­‰æ€§","like_count":3,"discussions":[{"author":{"id":1625530,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","nickname":"YueShi","note":"","ucode":"8F7AFAE4641A7D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334819,"discussion_content":"å¥½åƒç†è§£é”™äº†ï¼Œçœ‹çœ‹å…¶ä»–åŒå­¦çš„å›ç­”ä¹Ÿæ˜¯å—ç›ŠåŒªæµ…ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607998399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267814,"user_name":"InfoQ_Albert","can_delete":false,"product_type":"c1","uid":1290413,"ip_address":"","ucode":"B4C16362EDC7A9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIVlib8n4JZhIomleMIyJTrbhn81kXG39DhJzrFMwmwxFsHCkicsC4CmY5Ft8icmzibWzmvibsDKDP3ORQ/132","comment_is_top":false,"comment_ctime":1607940044,"is_pvip":false,"replies":[{"id":"99488","content":"ä¸€äº›å¼€æºçš„è½¯ä»¶æ˜¯ä¸æ”¯æŒé›†ç¾¤çš„ï¼Œå¦‚æœå¿…è¦ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å»å¼€å‘è®©ä»–æ”¯æŒé›†ç¾¤","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1610865525,"ip_address":"","comment_id":267814,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5902907340","product_id":100063601,"comment_content":"ä¹‹å‰åšä¸ªä¸€é¡¹ç›®éœ€è¦å¯¹æ¥ç‰©è”ç½‘æ•°æ®ï¼Œéœ€è¦ç”¨åˆ°æ¶ˆæ¯é˜Ÿåˆ—æ¥é™ä½æ•°æ®åº“çš„å†™å…¥è¯·æ±‚ï¼Œå½“æ—¶å¯¹æ¯”äº†å‡ ä¸ªMQï¼›Kafkaé›†ç¾¤æ”¯æŒæ¯”è¾ƒå¥½ï¼Œä½†æ˜¯ä¸æ”¯æŒMQTTåè®®ï¼›RabbitMQæ”¯æŒMQTTåè®®ä½†æ˜¯ä½¿ç”¨çš„æ˜¯Erlangè¯­è¨€ç¼–å†™ï¼Œæ€•å‡ºé—®é¢˜äº†æä¸äº†ï¼›å½“æ—¶é¡¹ç›®çš„æ¥å…¥çš„ç‰©è”ç½‘è®¾å¤‡ä¸å¤šå°±30å°ï¼Œæœ€åä½¿ç”¨çš„æ˜¯ActiveMQçš„æ–°ä¸€ä»£å«Apolloï¼Œå®ƒå¯ä»¥æä¾›æ¶ˆæ¯é˜Ÿåˆ—å’ŒbrokeråŠŸèƒ½ï¼›ä½†æ˜¯ä¸çŸ¥å¦‚ä½•éƒ¨ç½²é›†ç¾¤ï¼Œæ‰€ä»¥æƒ³é—®é—®éƒ­è€å¸ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511755,"discussion_content":"ä¸€äº›å¼€æºçš„è½¯ä»¶æ˜¯ä¸æ”¯æŒé›†ç¾¤çš„ï¼Œå¦‚æœå¿…è¦ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å»å¼€å‘è®©ä»–æ”¯æŒé›†ç¾¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610865525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267238,"user_name":"Garwen","can_delete":false,"product_type":"c1","uid":1045062,"ip_address":"","ucode":"C76346E1734AB8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/46/09c457eb.jpg","comment_is_top":false,"comment_ctime":1607656828,"is_pvip":false,"replies":[{"id":"97090","content":"æ¶ˆæ¯é˜Ÿåˆ—æ€ä¹ˆçŸ¥é“è®¢é˜…è€…æ˜¯è°å‘¢ï¼Ÿå¦‚ä½•ç»™ä¸åŒçš„è®¢é˜…è€…å‘é€æ¶ˆæ¯å‘¢<br>å¯ä»¥ä»å¤šä¸ªbrokerå¦‚ä½•é…åˆè€ƒè™‘","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607756741,"ip_address":"","comment_id":267238,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5902624124","product_id":100063601,"comment_content":"ç›¸åŒä¸»é¢˜çš„æ•°æ®å‘é€åˆ°äº†ä¸åŒçš„è®¾å¤‡ä¸Šï¼Œä½†æ˜¯è¿™äº›MQTT Brokeré‡Œé¢çš„æ•°æ®éƒ½è¿›äº†æ¶ˆæ¯é˜Ÿåˆ—çš„åŒä¸€ä¸»é¢˜é‡Œé¢äº†å§ï¼Œæ‰€ä»¥è®¢é˜…æ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢çš„å¯¹åº”ä¸»é¢˜å°±èƒ½æ¥æ”¶åˆ°æ‰€æœ‰åŒä¸€Topicçš„æ•°æ®äº†ã€‚","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511557,"discussion_content":"æ¶ˆæ¯é˜Ÿåˆ—æ€ä¹ˆçŸ¥é“è®¢é˜…è€…æ˜¯è°å‘¢ï¼Ÿå¦‚ä½•ç»™ä¸åŒçš„è®¢é˜…è€…å‘é€æ¶ˆæ¯å‘¢\nå¯ä»¥ä»å¤šä¸ªbrokerå¦‚ä½•é…åˆè€ƒè™‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607756741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266566,"user_name":"Dan","can_delete":false,"product_type":"c1","uid":1583806,"ip_address":"","ucode":"1BECA80FA3E670","user_header":"https://static001.geekbang.org/account/avatar/00/18/2a/be/17c0f8ca.jpg","comment_is_top":false,"comment_ctime":1607395577,"is_pvip":false,"replies":[{"id":"97103","content":"ğŸ‘æ–¹æ³•äºŒåŸºæœ¬æ˜¯ä¸€èˆ¬çš„æ€è·¯äº†","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607758132,"ip_address":"","comment_id":266566,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5902362873","product_id":100063601,"comment_content":"æ–¹æ³•ä¸€åº”è¯¥æ˜¯ç›´æ¥ä»ç¼“å­˜é‚£ä¸€é›†æå–æ•°æ® ç„¶åå†é€šè¿‡MQTT brokenåˆ†å‘<br>æ–¹æ³•äºŒåº”è¯¥æ˜¯æ¯ä¸ªmqttéƒ½æœ‰æœ‰ä¸€åˆ†è®¢é˜…åå•ï¼Œç„¶åæ‰€æœ‰broker éƒ½å§ç›¸å…³ä¿¡æ¯å‘ç»™ä¸€ä¸ªæœåŠ¡å™¨ç»¼åˆå¤„ç†","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511315,"discussion_content":"ğŸ‘æ–¹æ³•äºŒåŸºæœ¬æ˜¯ä¸€èˆ¬çš„æ€è·¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607758132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265995,"user_name":"fwx","can_delete":false,"product_type":"c1","uid":1033851,"ip_address":"","ucode":"6D5095F9D90950","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c6/7b/38100bee.jpg","comment_is_top":false,"comment_ctime":1607094010,"is_pvip":true,"replies":[{"id":"97116","content":"å¯ä»¥ï¼Œä½†æ˜¯æ³¨æ„æµ‹è¯•ä½ ä½¿ç”¨çš„éƒ¨åˆ†å¯¹mqttåè®®çš„æ”¯æŒæ˜¯å¦OKï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ”¯æŒè¿˜å¯ä»¥ï¼Œæœ‰äº›æƒ…å†µå¯èƒ½æœ‰é—®é¢˜ï¼Œéœ€è¦ä½ å¾€è¿™æ–¹é¢ç•™æ„ä¸€ä¸‹ã€‚å› ä¸ºä¸æ˜¯ä¸»è¦åŠŸèƒ½ï¼Œmqttæ–¹é¢çš„é—®é¢˜è§£å†³èµ·æ¥å¯èƒ½ä¼˜å…ˆçº§ä¸é«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607763362,"ip_address":"","comment_id":265995,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5902061306","product_id":100063601,"comment_content":"å½“æ¥å…¥ IoT è®¾å¤‡æ•°é‡åœ¨åä¸‡ä»¥å†…æˆ–è€…ä¸‡çº§æ—¶ï¼Œèƒ½å¦ç›´æ¥é€‰æ‹©æ”¯æŒMQTTåè®®çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°†MQTT BrokeræœåŠ¡å™¨å’Œæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿè¿›è¡ŒåˆäºŒä¸ºä¸€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511117,"discussion_content":"å¯ä»¥ï¼Œä½†æ˜¯æ³¨æ„æµ‹è¯•ä½ ä½¿ç”¨çš„éƒ¨åˆ†å¯¹mqttåè®®çš„æ”¯æŒæ˜¯å¦OKï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ”¯æŒè¿˜å¯ä»¥ï¼Œæœ‰äº›æƒ…å†µå¯èƒ½æœ‰é—®é¢˜ï¼Œéœ€è¦ä½ å¾€è¿™æ–¹é¢ç•™æ„ä¸€ä¸‹ã€‚å› ä¸ºä¸æ˜¯ä¸»è¦åŠŸèƒ½ï¼Œmqttæ–¹é¢çš„é—®é¢˜è§£å†³èµ·æ¥å¯èƒ½ä¼˜å…ˆçº§ä¸é«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607763362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057843,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","nickname":"é˜¿ç”˜","note":"","ucode":"BC93175B70E05D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548018,"discussion_content":"æˆ‘ä¸€ç›´ä»¥ä¸ºMQTTå°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—å‘¢ï¼Ÿè¿™æ ·çœ‹èµ·æ¥ä¸æ˜¯ï¼Ÿå®ƒåªæ˜¯ä¸€ä¸ªæ¥å…¥å±‚ç½‘å…³ï¼Œä¸å…·å¤‡æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼“å†²åŠŸèƒ½ï¼Œéœ€è¦æ­é…kafkaä¹‹ç±»çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642995027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265841,"user_name":"è´¤ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1496738,"ip_address":"","ucode":"02E467263201DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/d6/a2/be61c162.jpg","comment_is_top":false,"comment_ctime":1607049327,"is_pvip":false,"replies":[{"id":"97121","content":"å—¯ï¼Œä½ æ˜¯ç»“åˆå…·ä½“çš„æŠ€æœ¯æ–¹æ¡ˆåšäº†è§£é‡Šã€‚è¿™ä¸ªæœºåˆ¶å·²ç»ä¿è¯äº†æ¶ˆæ¯çš„æ¶ˆè´¹ã€‚è¿™é‡Œçš„ç‰¹æ®Šç‚¹æ˜¯å¤šä¸ªæ¶ˆè´¹è€…ä¸€èµ·æ¥æ¶ˆè´¹brokersä¸Šçš„æ¶ˆæ¯ï¼Œè¿™ä¸ªç»„é‡Œçš„æ¶ˆè´¹è€…æ²¡æœ‰è‡ªå·±çš„ç‹¬ç«‹æ€§ã€‚å¦‚æœæ¶ˆè´¹æŸä¸ªtopicçš„æ¶ˆè´¹è€…åªæœ‰å®ƒä¸€ä¸ªï¼Œå®ƒåªè¿æ¥å…¶ä¸­ä¸€ä¸ªbrokerï¼Œå°±éœ€è¦è€ƒè™‘å…¶ä»–æœºåˆ¶äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607765029,"ip_address":"","comment_id":265841,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5902016623","product_id":100063601,"comment_content":"æˆ‘ä»¬æ˜¯ç”¨3 kafka brokersé›†ç¾¤åšæ¶ˆæ¯å¤„ç†çš„ï¼Œ æ¯ä¸ªtopicæœ‰å¤šä¸ªåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºæœ‰3ä¸ªå‰¯æœ¬ï¼Œåˆ†åœ¨3ä¸ªbrokerä¸Šã€‚åŒæ—¶æ¯ä¸ªtopicæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…groupï¼Œæ¯ä¸ªgroup æœ‰å¤šä¸ªæ¶ˆè´¹è€…ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…å»å¤„ç†1ä¸ªæˆ–å¤šä¸ªpartitionï¼ˆæ¶ˆè´¹è€…å°±æ˜¯æ•°æ®å¤„ç†å¾®æœåŠ¡ï¼Œå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œä¿è¯å¯åŠ¨æ—¶è®¢é˜…åŒä¸€ä¸ªtopicï¼Œå±äºåŒä¸€ä¸ªgroupï¼‰ã€‚<br>æˆ‘çš„ç†è§£å¯ä»¥æŠŠconsumer groupå½“åšä¸€ä¸ªè®¢é˜…è€…ï¼Œæ—¢èƒ½åˆ©ç”¨å¤šåˆ†åŒºå¹¶è¡Œæ¶ˆè´¹ï¼Œä¹Ÿå¯ä»¥ä¿è¯è¯¥groupå¯ä»¥æ”¶åˆ°topicçš„æ‰€æœ‰æ¶ˆæ¯ã€‚","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511067,"discussion_content":"å—¯ï¼Œä½ æ˜¯ç»“åˆå…·ä½“çš„æŠ€æœ¯æ–¹æ¡ˆåšäº†è§£é‡Šã€‚è¿™ä¸ªæœºåˆ¶å·²ç»ä¿è¯äº†æ¶ˆæ¯çš„æ¶ˆè´¹ã€‚è¿™é‡Œçš„ç‰¹æ®Šç‚¹æ˜¯å¤šä¸ªæ¶ˆè´¹è€…ä¸€èµ·æ¥æ¶ˆè´¹brokersä¸Šçš„æ¶ˆæ¯ï¼Œè¿™ä¸ªç»„é‡Œçš„æ¶ˆè´¹è€…æ²¡æœ‰è‡ªå·±çš„ç‹¬ç«‹æ€§ã€‚å¦‚æœæ¶ˆè´¹æŸä¸ªtopicçš„æ¶ˆè´¹è€…åªæœ‰å®ƒä¸€ä¸ªï¼Œå®ƒåªè¿æ¥å…¶ä¸­ä¸€ä¸ªbrokerï¼Œå°±éœ€è¦è€ƒè™‘å…¶ä»–æœºåˆ¶äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607765029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325533,"user_name":"å¥‡[çˆ±å¿ƒ]ä¸€","can_delete":false,"product_type":"c1","uid":2135940,"ip_address":"","ucode":"C0C91D9F4B4CEA","user_header":"https://static001.geekbang.org/account/avatar/00/20/97/84/7c1b9906.jpg","comment_is_top":false,"comment_ctime":1639017095,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639017095","product_id":100063601,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚æˆ‘æ˜¯ä¸€ä¸ªå°ç™½ï¼Œæ–‡ç« ä¸­çš„æ•°æ®åº“å¯ä»¥ç”¨ä»€ä¹ˆæ•°æ®åº“å‘¢ï¼Ÿè¿˜æœ‰æµå¤„ç†æœåŠ¡åº”è¯¥ç”¨ä»€ä¹ˆï¼Ÿå¯ä»¥ç›´æ¥å¾€æ•°æ®åº“é‡Œè¿™æ•°æ®å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":298053,"user_name":"æ’","can_delete":false,"product_type":"c1","uid":1004816,"ip_address":"","ucode":"0C9545E9620AE9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/10/33310cb9.jpg","comment_is_top":false,"comment_ctime":1623897440,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623897440","product_id":100063601,"comment_content":"å‰é¢è®²ç½‘å…³çš„æ—¶å€™ï¼ŒåŒ—å‘æ¥å£é‡Œé¢æ²¡æœ‰æåˆ°mqttåè®®æ”¯æŒã€‚é‚£ä¹ˆä»ç½‘å…³åˆ°hubä¸€èˆ¬æ˜¯æœ‰ä»€ä¹ˆåè®®å‘¢ï¼Ÿå¦‚æœè¿˜æ˜¯mqttï¼Œé‚£ç½‘å…³åœ¨ä¸­é—´å°±æ˜¯åªåšè½¬å‘ä¸åšç¿»è¯‘ï¼Ÿ","like_count":0},{"had_liked":false,"id":292818,"user_name":"å°å¤ªé˜³","can_delete":false,"product_type":"c1","uid":1566413,"ip_address":"","ucode":"80FD4A871ABFAD","user_header":"https://static001.geekbang.org/account/avatar/00/17/e6/cd/bf5e928c.jpg","comment_is_top":false,"comment_ctime":1620993562,"is_pvip":true,"replies":[{"id":"106625","content":"RabbitMQè¿™äº›é€šè¿‡æ’ä»¶çš„æ–¹å¼æ”¯æŒmqttï¼Œæ¯•ç«Ÿä¸æ˜¯ä¸“é—¨ä¸ºmqttçš„ï¼Œä¹‹å‰æœ‰çœ‹åˆ°æŸäº›åè®®å®ç°ä¸Šæœ‰å‘ï¼Œè¦ç•™æ„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1621692372,"ip_address":"","comment_id":292818,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1620993562","product_id":100063601,"comment_content":"rabbitmqçš„mqttæ’ä»¶ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æœ‰ä»€ä¹ˆé™åˆ¶ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519969,"discussion_content":"RabbitMQè¿™äº›é€šè¿‡æ’ä»¶çš„æ–¹å¼æ”¯æŒmqttï¼Œæ¯•ç«Ÿä¸æ˜¯ä¸“é—¨ä¸ºmqttçš„ï¼Œä¹‹å‰æœ‰çœ‹åˆ°æŸäº›åè®®å®ç°ä¸Šæœ‰å‘ï¼Œè¦ç•™æ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621692372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288161,"user_name":"æ¨ç£Š","can_delete":false,"product_type":"c1","uid":1796475,"ip_address":"","ucode":"20FBF43491D80D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/qZ3bvj9j1KibcY7zkv2XS0gDF9oUrkx7zjucHCnIwCnBM6KYUBQUjyXAO3wkNlPiawTNVicKKwNjFkQxv0feHJUdQ/132","comment_is_top":false,"comment_ctime":1618325481,"is_pvip":false,"replies":[{"id":"106693","content":"é‚£brokerä¸å°±æˆä¸ºç“¶é¢ˆäº†å—ï¼Ÿè€Œä¸”brokeréœ€è¦å¤„ç†å…·ä½“çš„åº”ç”¨åè®®ï¼Œå·¥ä½œä»»åŠ¡æ›´é‡ï¼Œæ›´å®¹æ˜“å‡ºç°æ€§èƒ½é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1621759535,"ip_address":"","comment_id":288161,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618325481","product_id":100063601,"comment_content":"HAProxyä¼šå˜æˆæ•´ä¸ªç³»ç»Ÿçš„ç½‘ç»œç“¶é¢ˆå§ï¼Ÿæ¯•ç«Ÿæ‰€æœ‰ç½‘ç»œè¯·æ±‚æµé‡éƒ½è¦æµç»è¿™é‡Œã€‚<br>ä¸ºä»€ä¹ˆä¸æŠŠç½‘å…³é…ç½®ä¸ºè¿æ¥æŸå›ºå®šMQTT Brokerå‘¢ï¼Œè¿™æ ·å°±ä¸å»é™¤äº†è¿™ä¸ªç½‘ç»œè´·æ¬¾ç“¶é¢ˆã€‚<br><br>è°¢è°¢","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518533,"discussion_content":"é‚£brokerä¸å°±æˆä¸ºç“¶é¢ˆäº†å—ï¼Ÿè€Œä¸”brokeréœ€è¦å¤„ç†å…·ä½“çš„åº”ç”¨åè®®ï¼Œå·¥ä½œä»»åŠ¡æ›´é‡ï¼Œæ›´å®¹æ˜“å‡ºç°æ€§èƒ½é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621759535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277796,"user_name":"å°å¯","can_delete":false,"product_type":"c1","uid":1006735,"ip_address":"","ucode":"8834AF621FA67D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/8f/551b5624.jpg","comment_is_top":false,"comment_ctime":1612593452,"is_pvip":false,"replies":[{"id":"102071","content":"çœ‹è®¾å¤‡ç«¯æ˜¯å¦å¯æ§ï¼Œå¦‚æœå¯ä»¥ï¼Œå¯¹è®¾å¤‡åˆ’åˆ†ï¼Œè®©è®¾å¤‡æ¥å…¥ä¸åŒçš„æœåŠ¡å™¨","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1614580807,"ip_address":"","comment_id":277796,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612593452","product_id":100063601,"comment_content":"è¿˜æœ‰ä¸€ç§åœºæ™¯æ˜¯è®¾å¤‡æ•°é‡å¤šï¼Œä¸”æ•°æ®æœ¬èº«æ¯”è¾ƒå¤§ï¼Œå•æ¡å‡ ç™¾KBï¼Œå¦‚æœæ•°æ®ä¸ŠæŠ¥èµ°è´Ÿè½½å‡è¡¡ï¼Œé‚£ä¹ˆè´Ÿè½½å‡è¡¡çš„ç½‘å¡å°±æˆäº†ç³»ç»Ÿç“¶é¢ˆï¼Œè¿™ç§åœºæ™¯é™¤äº†ç½‘å¡èåˆè¿˜æœ‰å…¶ä»–æ–¹æ¡ˆå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515172,"discussion_content":"çœ‹è®¾å¤‡ç«¯æ˜¯å¦å¯æ§ï¼Œå¦‚æœå¯ä»¥ï¼Œå¯¹è®¾å¤‡åˆ’åˆ†ï¼Œè®©è®¾å¤‡æ¥å…¥ä¸åŒçš„æœåŠ¡å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614580807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276057,"user_name":"Geek_73e181","can_delete":false,"product_type":"c1","uid":1623417,"ip_address":"","ucode":"27CBAF479370B7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/VKEoG4KibH1ajZ3PXI47dOE0SxEGQzaic7duJG38INguJpZUl8IIy7jgiavOH2fO8WEkISJZxldMPAOP6DDjR65mQ/132","comment_is_top":false,"comment_ctime":1611759426,"is_pvip":false,"replies":[{"id":"100773","content":"æˆ‘æƒ³ä½ æŒ‡çš„mqttæ˜¯æŸä¸ªå…·ä½“çš„å®ç°ï¼Œå› ä¸ºmqttæœ¬æ„æ˜¯ä¸€ç§åè®®ï¼Œå’ŒKafkaå®Œå…¨ä¸æ˜¯ä¸€ä¸ªç»´åº¦çš„ä¸œè¥¿ï¼Œæ— æ³•ç›´æ¥æ¯”è¾ƒã€‚è¿™è¦çœ‹ä½ çš„åº”ç”¨åœºæ™¯äº†ï¼Œmqtté’ˆå¯¹ç‰©è”ç½‘ï¼Œå®¢æˆ·ç«¯å¾ˆè½»å·§ï¼Œå¯ä»¥åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸Šè¿è¡Œã€‚Kafkaæä¾›çš„å·¥å…·ç”Ÿæ€åº”è¯¥æ˜¯æ²¡æœ‰è€ƒè™‘è¿™äº›çš„","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1612587458,"ip_address":"","comment_id":276057,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611759426","product_id":100063601,"comment_content":"èƒ½ç›´æ¥ç”¨å¡å¤«å¡ä»£æ›¿mqttå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514582,"discussion_content":"æˆ‘æƒ³ä½ æŒ‡çš„mqttæ˜¯æŸä¸ªå…·ä½“çš„å®ç°ï¼Œå› ä¸ºmqttæœ¬æ„æ˜¯ä¸€ç§åè®®ï¼Œå’ŒKafkaå®Œå…¨ä¸æ˜¯ä¸€ä¸ªç»´åº¦çš„ä¸œè¥¿ï¼Œæ— æ³•ç›´æ¥æ¯”è¾ƒã€‚è¿™è¦çœ‹ä½ çš„åº”ç”¨åœºæ™¯äº†ï¼Œmqtté’ˆå¯¹ç‰©è”ç½‘ï¼Œå®¢æˆ·ç«¯å¾ˆè½»å·§ï¼Œå¯ä»¥åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸Šè¿è¡Œã€‚Kafkaæä¾›çš„å·¥å…·ç”Ÿæ€åº”è¯¥æ˜¯æ²¡æœ‰è€ƒè™‘è¿™äº›çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612587458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273252,"user_name":"è¾¹é™…é©å‘½","can_delete":false,"product_type":"c1","uid":1124665,"ip_address":"","ucode":"EC15C0AE4D487A","user_header":"https://static001.geekbang.org/account/avatar/00/11/29/39/be9d2e88.jpg","comment_is_top":false,"comment_ctime":1610512589,"is_pvip":true,"replies":[{"id":"99214","content":"éœ€è¦è‡ªå·±æ¥ç»„åˆæ­å»º","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1610777221,"ip_address":"","comment_id":273252,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1610512589","product_id":100063601,"comment_content":"è€å¸ˆï¼Œ æ¥å…¥å±‚æœ‰ä»€ä¹ˆå¼€æºé¡¹ç›®å‚è€ƒä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513541,"discussion_content":"éœ€è¦è‡ªå·±æ¥ç»„åˆæ­å»º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610777221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268791,"user_name":"å­™è…¾è›Ÿ","can_delete":false,"product_type":"c1","uid":1567891,"ip_address":"","ucode":"2721492BB91B24","user_header":"https://static001.geekbang.org/account/avatar/00/17/ec/93/d77a303a.jpg","comment_is_top":false,"comment_ctime":1608350021,"is_pvip":false,"replies":[{"id":"99467","content":"æ¯ç§æ–¹æ¡ˆéƒ½æœ‰ç“¶é¢ˆçš„ï¼Œå¦‚æœç‰¹åˆ«å¤§å¯ä»¥è”ç³»äº‘æœåŠ¡å•†åšæ›´å¥½çš„è®¾è®¡ã€‚å¦‚æœè‡ªå·±æ­å»ºæœåŠ¡å™¨å®ç°ï¼Œæ¶‰åŠçš„é¢†åŸŸéå¸¸å¤šï¼Œä¹Ÿä¸æ˜¯ä¸€ç¯‡æ–‡ç« å¯ä»¥è§£å†³çš„","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1610863655,"ip_address":"","comment_id":268791,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1608350021","product_id":100063601,"comment_content":"HAProxyå’Œç½‘å¡è¿™éƒ¨åˆ†ä¼šä¸ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œå½“æœ‰ç™¾ä¸‡çº§åˆ«ä»¥ä¸Šçš„å¹¶å‘, ä½œè€…æœ‰ç›¸å…³çš„æ–‡ç« æˆ–ä¹¦æ¨èå—","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512040,"discussion_content":"æ¯ç§æ–¹æ¡ˆéƒ½æœ‰ç“¶é¢ˆçš„ï¼Œå¦‚æœç‰¹åˆ«å¤§å¯ä»¥è”ç³»äº‘æœåŠ¡å•†åšæ›´å¥½çš„è®¾è®¡ã€‚å¦‚æœè‡ªå·±æ­å»ºæœåŠ¡å™¨å®ç°ï¼Œæ¶‰åŠçš„é¢†åŸŸéå¸¸å¤šï¼Œä¹Ÿä¸æ˜¯ä¸€ç¯‡æ–‡ç« å¯ä»¥è§£å†³çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610863655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057843,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","nickname":"é˜¿ç”˜","note":"","ucode":"BC93175B70E05D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548020,"discussion_content":"åœ¨HAProxyä¹‹å‰ä¼šæœ‰LVSè´Ÿè½½å‡è¡¡ï¼ŒLVSä¹‹å‰ä¼šæœ‰DNSè´Ÿè½½å‡è¡¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642995151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266487,"user_name":"å…¢","can_delete":false,"product_type":"c1","uid":1070683,"ip_address":"","ucode":"878EAA03E02C1C","user_header":"","comment_is_top":false,"comment_ctime":1607352317,"is_pvip":false,"replies":[{"id":"97104","content":"è‡ªå·±æ ¹æ®éœ€æ±‚æ¥åš","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607758182,"ip_address":"","comment_id":266487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607352317","product_id":100063601,"comment_content":"è¯·æ•™è€å¸ˆä¸ªé—®é¢˜ï¼šåœ¨åŠ å…¥ç¼“å­˜åï¼Œå¥½åƒç¼ºå°‘ä¸€ä¸ªå°†ç¼“å­˜æ•°æ®è½åœ°çš„æœåŠ¡ï¼Œè¿™å—æœ‰ä»€ä¹ˆæˆç†Ÿè§£å†³æ–¹æ¡ˆå—ï¼Ÿè¿˜æ˜¯éœ€è¦è‡ªå·±å†™ä¸€ä¸ªæœåŠ¡å»è¯»ç¼“å­˜ç„¶åå†™å…¥æ•°æ®åº“ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511282,"discussion_content":"è‡ªå·±æ ¹æ®éœ€æ±‚æ¥åš","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607758182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266447,"user_name":"Sceneryback","can_delete":false,"product_type":"c1","uid":1200084,"ip_address":"","ucode":"619EA21D27CDC7","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/d4/cd7ed149.jpg","comment_is_top":false,"comment_ctime":1607342592,"is_pvip":false,"replies":[{"id":"97107","content":"ä¹Ÿæ˜¯ä¸€ä¸ªæ€è·¯ã€‚è¿™äº›brokersæœ€ç»ˆç»„æˆäº†ä¸€ä¸ªä»€ä¹ˆå‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607758488,"ip_address":"","comment_id":266447,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607342592","product_id":100063601,"comment_content":"ç³»ç»ŸæŠŠå¤„ç†åçš„æ•°æ®å‘åˆ°å¦ä¸€ä¸ª kafka topic, å‡ ä¸ª mqtt brokers ä½œä¸ºä¸€ä¸ª consumer group è®¢é˜…æ­¤ topic å…±åŒæ¶ˆè´¹","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511269,"discussion_content":"ä¹Ÿæ˜¯ä¸€ä¸ªæ€è·¯ã€‚è¿™äº›brokersæœ€ç»ˆç»„æˆäº†ä¸€ä¸ªä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607758488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266052,"user_name":"ç¨³","can_delete":false,"product_type":"c1","uid":1284626,"ip_address":"","ucode":"BF5723E63E4115","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/12/06863960.jpg","comment_is_top":false,"comment_ctime":1607148650,"is_pvip":false,"replies":[{"id":"97115","content":"mqttæ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œæœ¬èº«å¹¶ä¸æ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½å“ˆã€‚å®ƒçš„åå­—ä½¿äººæœ‰è¯¯è§£ã€‚å…¶å®æ˜¯éµå¾ªçš„IBMçš„ä¸€ä¸ªMQäº§å“ç³»åˆ—åã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607763045,"ip_address":"","comment_id":266052,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1607148650","product_id":100063601,"comment_content":"è¯·æ•™ä¸‹è€å¸ˆï¼Œmqttä¸ä¹Ÿå±äºæ¶ˆè´¹é˜Ÿåˆ—å—ï¼Ÿé‚£å¢åŠ çš„rabbitmqè¿™ä¸€å±‚çš„æ„ä¹‰å¤§å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511132,"discussion_content":"mqttæ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œæœ¬èº«å¹¶ä¸æ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½å“ˆã€‚å®ƒçš„åå­—ä½¿äººæœ‰è¯¯è§£ã€‚å…¶å®æ˜¯éµå¾ªçš„IBMçš„ä¸€ä¸ªMQäº§å“ç³»åˆ—åã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607763045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057843,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","nickname":"é˜¿ç”˜","note":"","ucode":"BC93175B70E05D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548021,"discussion_content":"é‚£è€å¸ˆä¼šæ¨èå“ªäº›MQTTå¼€æºäº§å“ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642995225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265803,"user_name":"å¾·æ…¢æ…¢","can_delete":false,"product_type":"c1","uid":2049906,"ip_address":"","ucode":"F79F4C1A2C9EFA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epa9fhIhtLUNkCqR9dxZTUolBLs40YiawZ4TUtvTG90HR0OyXzwU7icjyDiaF4FZOicyzRV1bGAylhs2A/132","comment_is_top":false,"comment_ctime":1607040324,"is_pvip":false,"replies":[{"id":"97122","content":"å¯å¦å…·ä½“è®²è®²è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607765092,"ip_address":"","comment_id":265803,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607040324","product_id":100063601,"comment_content":"å¯ä»¥åˆ©ç”¨tagå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511050,"discussion_content":"å¯å¦å…·ä½“è®²è®²è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607765092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265784,"user_name":"wuqilv","can_delete":false,"product_type":"c1","uid":1169314,"ip_address":"","ucode":"B9C4A2C2FF32AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/d7/a2/5f6b90a9.jpg","comment_is_top":false,"comment_ctime":1607013419,"is_pvip":false,"replies":[{"id":"97123","content":"å—¯ï¼Œä¸€äº›åœºæ™¯ä¸‹å¯ä»¥ã€‚<br>èƒ½å±•å¼€è®²è®²å…·ä½“è¿‡ç¨‹å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1607765184,"ip_address":"","comment_id":265784,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607013419","product_id":100063601,"comment_content":"åˆ©ç”¨kafka çš„groupå’Œtopicï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511042,"discussion_content":"å—¯ï¼Œä¸€äº›åœºæ™¯ä¸‹å¯ä»¥ã€‚\nèƒ½å±•å¼€è®²è®²å…·ä½“è¿‡ç¨‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607765184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}