{"id":12629,"title":"ç¬¬38è®² | å¯¹æ¯”Javaæ ‡å‡†NIOç±»åº“ï¼Œä½ çŸ¥é“Nettyæ˜¯å¦‚ä½•å®ç°æ›´é«˜æ€§èƒ½çš„å—ï¼Ÿ","content":"<p>ä»Šå¤©æˆ‘ä¼šå¯¹NIOè¿›è¡Œä¸€äº›è¡¥å……ï¼Œåœ¨<a href=\"http://time.geekbang.org/column/article/8369\">ä¸“æ ç¬¬11è®²</a>ä¸­ï¼Œæˆ‘ä»¬åˆæ­¥æ¥è§¦äº†Javaæä¾›çš„å‡ ç§IOæœºåˆ¶ï¼Œä½œä¸ºè¯­è¨€åŸºç¡€ç±»åº“ï¼ŒJavaè‡ªèº«çš„NIOè®¾è®¡æ›´ååº•å±‚ï¼Œè¿™æœ¬æ— å¯åšéï¼Œä½†æ˜¯å¯¹äºä¸€çº¿çš„åº”ç”¨å¼€å‘è€…ï¼Œå…¶å¤æ‚æ€§ã€æ‰©å±•æ€§ç­‰æ–¹é¢ï¼Œå°±å­˜åœ¨ä¸€å®šçš„å±€é™äº†ã€‚åœ¨åŸºç¡€NIOä¹‹ä¸Šï¼ŒNettyæ„å»ºäº†æ›´åŠ æ˜“ç”¨ã€é«˜æ€§èƒ½çš„ç½‘ç»œæ¡†æ¶ï¼Œå¹¿æ³›åº”ç”¨äºäº’è”ç½‘ã€æ¸¸æˆã€ç”µä¿¡ç­‰å„ç§é¢†åŸŸã€‚</p>\n<p>ä»Šå¤©æˆ‘è¦é—®ä½ çš„é—®é¢˜æ˜¯ï¼Œ<span class=\"orange\">å¯¹æ¯”Javaæ ‡å‡†NIOç±»åº“ï¼Œä½ çŸ¥é“Nettyæ˜¯å¦‚ä½•å®ç°æ›´é«˜æ€§èƒ½çš„å—ï¼Ÿ</span></p>\n<h2>å…¸å‹å›ç­”</h2>\n<p>å•ç‹¬ä»æ€§èƒ½è§’åº¦ï¼ŒNettyåœ¨åŸºç¡€çš„NIOç­‰ç±»åº“ä¹‹ä¸Šè¿›è¡Œäº†å¾ˆå¤šæ”¹è¿›ï¼Œä¾‹å¦‚ï¼š</p>\n<ul>\n<li>\n<p>æ›´åŠ ä¼˜é›…çš„Reactoræ¨¡å¼å®ç°ã€çµæ´»çš„çº¿ç¨‹æ¨¡å‹ã€åˆ©ç”¨EventLoopç­‰åˆ›æ–°æ€§çš„æœºåˆ¶ï¼Œå¯ä»¥éå¸¸é«˜æ•ˆåœ°ç®¡ç†æˆç™¾ä¸Šåƒçš„Channelã€‚</p>\n</li>\n<li>\n<p>å……åˆ†åˆ©ç”¨äº†Javaçš„Zero-Copyæœºåˆ¶ï¼Œå¹¶ä¸”ä»å¤šç§è§’åº¦ï¼Œâ€œæ–¤æ–¤è®¡è¾ƒâ€èˆ¬çš„é™ä½å†…å­˜åˆ†é…å’Œå›æ”¶çš„å¼€é”€ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨æ± åŒ–çš„Direct Bufferç­‰æŠ€æœ¯ï¼Œåœ¨æé«˜IOæ€§èƒ½çš„åŒæ—¶ï¼Œå‡å°‘äº†å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ï¼›åˆ©ç”¨åå°„ç­‰æŠ€æœ¯ç›´æ¥æ“çºµSelectionKeyï¼Œä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯Javaå®¹å™¨ç­‰ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨æ›´å¤šæœ¬åœ°ä»£ç ã€‚ä¾‹å¦‚ï¼Œç›´æ¥åˆ©ç”¨JNIè°ƒç”¨Open SSLç­‰æ–¹å¼ï¼Œè·å¾—æ¯”Javaå†…å»ºSSLå¼•æ“æ›´å¥½çš„æ€§èƒ½ã€‚</p>\n</li>\n<li>\n<p>åœ¨é€šä¿¡åè®®ã€åºåˆ—åŒ–ç­‰å…¶ä»–è§’åº¦çš„ä¼˜åŒ–ã€‚</p>\n</li>\n</ul><!-- [[[read_end]]] -->\n<p>æ€»çš„æ¥è¯´ï¼ŒNettyå¹¶æ²¡æœ‰Javaæ ¸å¿ƒç±»åº“é‚£äº›å¼ºçƒˆçš„é€šç”¨æ€§ã€è·¨å¹³å°ç­‰å„ç§è´Ÿæ‹…ï¼Œé’ˆå¯¹æ€§èƒ½ç­‰ç‰¹å®šç›®æ ‡ä»¥åŠLinuxç­‰ç‰¹å®šç¯å¢ƒï¼Œé‡‡å–äº†ä¸€äº›æè‡´çš„ä¼˜åŒ–æ‰‹æ®µã€‚</p>\n<h2>è€ƒç‚¹åˆ†æ</h2>\n<p>è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¼€æ”¾çš„é—®é¢˜ï¼Œæˆ‘ç»™å‡ºçš„å›ç­”æ˜¯ä¸ªæ¦‚è¦æ€§çš„ä¸¾ä¾‹è¯´æ˜ã€‚é¢è¯•å®˜å¾ˆå¯èƒ½åˆ©ç”¨è¿™ç§å¼€æ”¾é—®é¢˜ä½œä¸ºå¼•å­ï¼Œé’ˆå¯¹ä½ å›ç­”çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªç‚¹ï¼Œæ·±å…¥æ¢è®¨ä½ åœ¨ä¸åŒå±‚æ¬¡ä¸Šçš„ç†è§£ç¨‹åº¦ã€‚</p>\n<p>åœ¨é¢è¯•å‡†å¤‡ä¸­ï¼Œå…¼é¡¾æ•´ä½“æ€§çš„åŒæ—¶ï¼Œä¸è¦å¿˜è®°é€‰å®šä¸ªåˆ«é‡ç‚¹è¿›è¡Œæ·±å…¥ç†è§£æŒæ¡ï¼Œæœ€å¥½æ˜¯è¿›è¡Œæºç å±‚é¢çš„æ·±å…¥é˜…è¯»å’Œå®éªŒã€‚å¦‚æœä½ å¸Œæœ›äº†è§£æ›´å¤šä»æ€§èƒ½è§’åº¦Nettyåœ¨ç¼–ç å±‚é¢çš„æ‰‹æ®µï¼Œå¯ä»¥å‚è€ƒNormanåœ¨Devoxxä¸Šçš„<a href=\"https://speakerdeck.com/normanmaurer/writing-highly-performant-network-frameworks-on-the-jvm-a-love-hate-relationship\">åˆ†äº«</a>ï¼Œå…¶ä¸­çš„å¾ˆå¤šæŠ€å·§å¯¹äºå®ç°æè‡´æ€§èƒ½çš„APIæœ‰ä¸€å®šå€Ÿé‰´æ„ä¹‰ï¼Œä½†åœ¨ä¸€èˆ¬çš„ä¸šåŠ¡å¼€å‘ä¸­è¦è°¨æ…é‡‡ç”¨ã€‚</p>\n<p>è™½ç„¶æåˆ°Nettyï¼Œäººä»¬ä¼šè‡ªç„¶åœ°æƒ³åˆ°é«˜æ€§èƒ½ï¼Œä½†æ˜¯Nettyæœ¬èº«çš„ä¼˜åŠ¿ä¸ä»…ä»…åªæœ‰è¿™ä¸€ä¸ªæ–¹é¢ï¼Œ</p>\n<p>ä¸‹é¢æˆ‘ä¼šä¾§é‡ä¸¤ä¸ªæ–¹é¢ï¼š</p>\n<ul>\n<li>\n<p>å¯¹Nettyè¿›è¡Œæ•´ä½“ä»‹ç»ï¼Œå¸®ä½ äº†è§£å…¶åŸºæœ¬ç»„æˆã€‚</p>\n</li>\n<li>\n<p>ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œå¯¹æ¯”åœ¨<a href=\"http://time.geekbang.org/column/article/8369\">ç¬¬11è®²</a>ä¸­åŸºäºIOã€NIOç­‰æ ‡å‡†APIçš„å®ä¾‹ï¼Œåˆ†æå®ƒçš„æŠ€æœ¯è¦ç‚¹ï¼Œç»™ä½ æä¾›ä¸€ä¸ªè¿›ä¸€æ­¥æ·±å…¥å­¦ä¹ çš„æ€è·¯ã€‚</p>\n</li>\n</ul>\n<h2>çŸ¥è¯†æ‰©å±•</h2>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä»æ•´ä½“äº†è§£ä¸€ä¸‹Nettyã€‚æŒ‰ç…§å®˜æ–¹å®šä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ã€åŸºäºäº‹ä»¶Client/Serverçš„ç½‘ç»œæ¡†æ¶ï¼Œç›®æ ‡æ˜¯æä¾›ä¸€ç§ç®€å•ã€å¿«é€Ÿæ„å»ºç½‘ç»œåº”ç”¨çš„æ–¹å¼ï¼ŒåŒæ—¶ä¿è¯é«˜ååé‡ã€ä½å»¶æ—¶ã€é«˜å¯é æ€§ã€‚</p>\n<p>ä»è®¾è®¡æ€è·¯å’Œç›®çš„ä¸Šï¼ŒNettyä¸Javaè‡ªèº«çš„NIOæ¡†æ¶ç›¸æ¯”æœ‰å“ªäº›ä¸åŒå‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬çŸ¥é“Javaçš„æ ‡å‡†ç±»åº“ï¼Œç”±äºå…¶åŸºç¡€æ€§ã€é€šç”¨æ€§çš„å®šä½ï¼Œå¾€å¾€è¿‡äºå…³æ³¨æŠ€æœ¯æ¨¡å‹ä¸Šçš„æŠ½è±¡ï¼Œè€Œä¸æ˜¯ä»ä¸€çº¿åº”ç”¨å¼€å‘è€…çš„è§’åº¦å»æ€è€ƒã€‚æˆ‘æ›¾æåˆ°è¿‡ï¼Œå¼•å…¥å¹¶å‘åŒ…çš„ä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯ï¼Œåº”ç”¨å¼€å‘è€…ä½¿ç”¨Thread APIæ¯”è¾ƒç—›è‹¦ï¼Œéœ€è¦æ“å¿ƒçš„ä¸ä»…ä»…æ˜¯ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸”è¿˜è¦è‡ªå·±è´Ÿè´£å°†å…¶æ˜ å°„åˆ°Threadæ¨¡å‹ä¸Šã€‚Java NIOçš„è®¾è®¡ä¹Ÿæœ‰ç±»ä¼¼çš„ç‰¹ç‚¹ï¼Œå¼€å‘è€…éœ€è¦æ·±å…¥æŒæ¡çº¿ç¨‹ã€IOã€ç½‘ç»œç­‰ç›¸å…³æ¦‚å¿µï¼Œå­¦ä¹ è·¯å¾„å¾ˆé•¿ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´ä»£ç å¤æ‚ã€æ™¦æ¶©ï¼Œå³ä½¿æ˜¯æœ‰ç»éªŒçš„å·¥ç¨‹å¸ˆï¼Œä¹Ÿéš¾ä»¥å¿«é€Ÿåœ°å†™å‡ºé«˜å¯é æ€§çš„å®ç°ã€‚</p>\n<p>Nettyçš„è®¾è®¡å¼ºè°ƒäº† â€œ<strong>Separation Of Concerns</strong>â€ï¼Œé€šè¿‡ç²¾å·§è®¾è®¡çš„äº‹ä»¶æœºåˆ¶ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’Œæ— å…³æŠ€æœ¯é€»è¾‘è¿›è¡Œéš”ç¦»ï¼Œå¹¶é€šè¿‡å„ç§æ–¹ä¾¿çš„æŠ½è±¡ï¼Œä¸€å®šç¨‹åº¦ä¸Šå¡«è¡¥äº†äº†åŸºç¡€å¹³å°å’Œä¸šåŠ¡å¼€å‘ä¹‹é—´çš„é¸¿æ²Ÿï¼Œæ›´æœ‰åˆ©äºåœ¨åº”ç”¨å¼€å‘ä¸­æ™®åŠä¸šç•Œçš„æœ€ä½³å®è·µã€‚</p>\n<p>å¦å¤–ï¼Œ<strong>Netty &gt; java.nio + java. netï¼</strong></p>\n<p>ä»APIèƒ½åŠ›èŒƒå›´æ¥çœ‹ï¼ŒNettyå®Œå…¨æ˜¯Java NIOæ¡†æ¶çš„ä¸€ä¸ªå¤§å¤§çš„è¶…é›†ï¼Œä½ å¯ä»¥å‚è€ƒNettyå®˜æ–¹çš„æ¨¡å—åˆ’åˆ†ã€‚</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/f5/d8/f5de2483afd924b90ea09b656f4fced8.png?wh=572*329\" alt=\"\" /></p>\n<p>é™¤äº†æ ¸å¿ƒçš„äº‹ä»¶æœºåˆ¶ç­‰ï¼ŒNettyè¿˜é¢å¤–æä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š</p>\n<ul>\n<li>\n<p>ä»ç½‘ç»œåè®®çš„è§’åº¦ï¼ŒNettyé™¤äº†æ”¯æŒä¼ è¾“å±‚çš„UDPã€TCPã€<a href=\"https://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol\">SCTP</a>åè®®ï¼Œä¹Ÿæ”¯æŒHTTP(s)ã€WebSocketç­‰å¤šç§åº”ç”¨å±‚åè®®ï¼Œå®ƒå¹¶ä¸æ˜¯å•ä¸€åè®®çš„APIã€‚</p>\n</li>\n<li>\n<p>åœ¨åº”ç”¨ä¸­ï¼Œéœ€è¦å°†æ•°æ®ä»Javaå¯¹è±¡è½¬æ¢æˆä¸ºå„ç§åº”ç”¨åè®®çš„æ•°æ®æ ¼å¼ï¼Œæˆ–è€…è¿›è¡Œåå‘çš„è½¬æ¢ï¼ŒNettyä¸ºæ­¤æä¾›äº†ä¸€ç³»åˆ—æ‰©å±•çš„ç¼–è§£ç æ¡†æ¶ï¼Œä¸åº”ç”¨å¼€å‘åœºæ™¯æ— ç¼è¡”æ¥ï¼Œå¹¶ä¸”æ€§èƒ½è‰¯å¥½ã€‚</p>\n</li>\n<li>\n<p>å®ƒæ‰©å±•äº†Java NIO Bufferï¼Œæä¾›äº†è‡ªå·±çš„ByteBufå®ç°ï¼Œå¹¶ä¸”æ·±åº¦æ”¯æŒDirect Bufferç­‰æŠ€æœ¯ï¼Œç”šè‡³hackäº†Javaå†…éƒ¨å¯¹Direct Bufferçš„åˆ†é…å’Œé”€æ¯ç­‰ã€‚åŒæ—¶ï¼ŒNettyä¹Ÿæä¾›äº†æ›´åŠ å®Œå–„çš„Scatter/Gatheræœºåˆ¶å®ç°ã€‚</p>\n</li>\n</ul>\n<p>å¯ä»¥çœ‹åˆ°ï¼ŒNettyçš„èƒ½åŠ›èŒƒå›´å¤§å¤§è¶…è¿‡äº†Javaæ ¸å¿ƒç±»åº“ä¸­çš„NIOç­‰APIï¼Œå¯ä»¥è¯´å®ƒæ˜¯ä¸€ä¸ªä»åº”ç”¨è§†è§’å‡ºå‘çš„äº§ç‰©ã€‚</p>\n<p>å½“ç„¶ï¼Œå¯¹äºåŸºç¡€APIè®¾è®¡ï¼ŒNettyä¹Ÿæœ‰è‡ªå·±ç‹¬åˆ°çš„è§è§£ï¼Œæœªæ¥Java NIO APIä¹Ÿå¯èƒ½æ®æ­¤è¿›è¡Œä¸€å®šçš„æ”¹è¿›ï¼Œå¦‚æœä½ æœ‰å…´è¶£å¯ä»¥å‚è€ƒ<a href=\"https://bugs.openjdk.java.net/browse/JDK-8187540\">JDK-8187540</a>ã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸ªå…¥é—¨çš„ä»£ç å®ä¾‹ï¼Œçœ‹çœ‹Nettyåº”ç”¨åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p>\n<p>ä¸<a href=\"http://time.geekbang.org/column/article/8369\">ç¬¬11è®²</a>ç±»ä¼¼ï¼ŒåŒæ ·æ˜¯ä»¥ç®€åŒ–çš„Echo Serverä¸ºä¾‹ï¼Œä¸‹å›¾æ˜¯Nettyå®˜æ–¹æä¾›çš„Serveréƒ¨åˆ†ï¼Œå®Œæ•´ç”¨ä¾‹è¯·ç‚¹å‡»<a href=\"http://netty.io/4.1/xref/io/netty/example/echo/package-summary.html\">é“¾æ¥</a>ã€‚</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/97/42/97f1f65e7277681a9e6da818832c8342.png?wh=784*738\" alt=\"\" /></p>\n<p>ä¸Šé¢çš„ä¾‹å­ï¼Œè™½ç„¶ä»£ç å¾ˆçŸ­ï¼Œä½†å·²ç»è¶³å¤Ÿä½“ç°å‡ºNettyçš„å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œè¯·æ³¨æ„æˆ‘ç”¨çº¢æ¡†æ ‡è®°å‡ºçš„éƒ¨åˆ†ï¼š</p>\n<ul>\n<li>\n<p><a href=\"https://github.com/netty/netty/blob/2c13f71c733c5778cd359c9148f50e63d1878f7f/transport/src/main/java/io/netty/bootstrap/ServerBootstrap.java\">ServerBootstrap</a>ï¼ŒæœåŠ¡å™¨ç«¯ç¨‹åºçš„å…¥å£ï¼Œè¿™æ˜¯Nettyä¸ºç®€åŒ–ç½‘ç»œç¨‹åºé…ç½®å’Œå…³é—­ç­‰ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ‰€å¼•å…¥çš„Bootstrappingæœºåˆ¶ã€‚æˆ‘ä»¬é€šå¸¸è¦åšçš„åˆ›å»ºChannelã€ç»‘å®šç«¯å£ã€æ³¨å†ŒHandlerç­‰ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªç»Ÿä¸€çš„å…¥å£ï¼Œä»¥<strong>Fluent</strong> APIç­‰å½¢å¼å®Œæˆï¼Œç›¸å¯¹ç®€åŒ–äº†APIä½¿ç”¨ã€‚ä¸ä¹‹ç›¸å¯¹åº”ï¼Œ <a href=\"https://github.com/netty/netty/blob/2c13f71c733c5778cd359c9148f50e63d1878f7f/transport/src/main/java/io/netty/bootstrap/Bootstrap.java\">Bootstrap</a>åˆ™æ˜¯Clientç«¯çš„é€šå¸¸å…¥å£ã€‚</p>\n</li>\n<li>\n<p><a href=\"https://github.com/netty/netty/blob/2c13f71c733c5778cd359c9148f50e63d1878f7f/transport/src/main/java/io/netty/channel/Channel.java\">Channel</a>ï¼Œä½œä¸ºä¸€ä¸ªåŸºäºNIOçš„æ‰©å±•æ¡†æ¶ï¼ŒChannelå’ŒSelectorç­‰æ¦‚å¿µä»ç„¶æ˜¯Nettyçš„åŸºç¡€ç»„ä»¶ï¼Œä½†æ˜¯é’ˆå¯¹åº”ç”¨å¼€å‘å…·ä½“éœ€æ±‚ï¼Œæä¾›äº†ç›¸å¯¹æ˜“ç”¨çš„æŠ½è±¡ã€‚</p>\n</li>\n<li>\n<p><a href=\"https://github.com/netty/netty/blob/2c13f71c733c5778cd359c9148f50e63d1878f7f/transport/src/main/java/io/netty/channel/EventLoop.java\">EventLoop</a>ï¼Œè¿™æ˜¯Nettyå¤„ç†äº‹ä»¶çš„æ ¸å¿ƒæœºåˆ¶ã€‚ä¾‹å­ä¸­ä½¿ç”¨äº†EventLoopGroupã€‚æˆ‘ä»¬åœ¨NIOä¸­é€šå¸¸è¦åšçš„å‡ ä»¶äº‹æƒ…ï¼Œå¦‚æ³¨å†Œæ„Ÿå…´è¶£çš„äº‹ä»¶ã€è°ƒåº¦ç›¸åº”çš„Handlerç­‰ï¼Œéƒ½æ˜¯EventLoopè´Ÿè´£ã€‚</p>\n</li>\n<li>\n<p><a href=\"https://github.com/netty/netty/blob/2c13f71c733c5778cd359c9148f50e63d1878f7f/transport/src/main/java/io/netty/channel/ChannelFuture.java\">ChannelFuture</a>ï¼Œè¿™æ˜¯Nettyå®ç°å¼‚æ­¥IOçš„åŸºç¡€ä¹‹ä¸€ï¼Œä¿è¯äº†åŒä¸€ä¸ªChannelæ“ä½œçš„è°ƒç”¨é¡ºåºã€‚Nettyæ‰©å±•äº†Javaæ ‡å‡†çš„Futureï¼Œæä¾›äº†é’ˆå¯¹è‡ªå·±åœºæ™¯çš„ç‰¹æœ‰<a href=\"https://github.com/netty/netty/blob/eb7f751ba519cbcab47d640cd18757f09d077b55/common/src/main/java/io/netty/util/concurrent/Future.java\">Future</a>å®šä¹‰ã€‚</p>\n</li>\n<li>\n<p>ChannelHandlerï¼Œè¿™æ˜¯åº”ç”¨å¼€å‘è€…<strong>æ”¾ç½®ä¸šåŠ¡é€»è¾‘çš„ä¸»è¦åœ°æ–¹</strong>ï¼Œä¹Ÿæ˜¯æˆ‘ä¸Šé¢æåˆ°çš„â€œSeparation Of Concernsâ€åŸåˆ™çš„ä½“ç°ã€‚</p>\n</li>\n<li>\n<p><a href=\"https://github.com/netty/netty/blob/2c13f71c733c5778cd359c9148f50e63d1878f7f/transport/src/main/java/io/netty/channel/ChannelPipeline.java\">ChannelPipeline</a>ï¼Œå®ƒæ˜¯ChannelHandleré“¾æ¡çš„å®¹å™¨ï¼Œæ¯ä¸ªChannelåœ¨åˆ›å»ºåï¼Œè‡ªåŠ¨è¢«åˆ†é…ä¸€ä¸ªChannelPipelineã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ServerBootstrapæ³¨å†Œäº†ChannelInitializerï¼Œå¹¶ä¸”å®ç°äº†initChannelæ–¹æ³•ï¼Œè€Œåœ¨è¯¥æ–¹æ³•ä¸­åˆ™æ‰¿æ‹…äº†å‘ChannelPiplelineå®‰è£…å…¶ä»–Handlerçš„ä»»åŠ¡ã€‚</p>\n</li>\n</ul>\n<p>ä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ç®€åŒ–ç¤ºæ„å›¾ï¼Œå¿½ç•¥Inbound/OutBound Handlerçš„ç»†èŠ‚ï¼Œç†è§£è¿™å‡ ä¸ªåŸºæœ¬å•å…ƒä¹‹é—´çš„æ“ä½œæµç¨‹å’Œå¯¹åº”å…³ç³»ã€‚</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/77/fa/77452800d6567dbf202583a9308421fa.png?wh=568*533\" alt=\"\" /></p>\n<p>å¯¹æ¯”Javaæ ‡å‡†NIOçš„ä»£ç ï¼ŒNettyæä¾›çš„ç›¸å¯¹é«˜å±‚æ¬¡çš„å°è£…ï¼Œå‡å°‘äº†å¯¹Selectorç­‰ç»†èŠ‚çš„æ“çºµï¼Œè€ŒEventLoopã€Pipelineç­‰æœºåˆ¶åˆ™ç®€åŒ–äº†ç¼–ç¨‹æ¨¡å‹ï¼Œå¼€å‘è€…ä¸ç”¨æ‹…å¿ƒå¹¶å‘ç­‰é—®é¢˜ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šç®€åŒ–äº†åº”ç”¨ä»£ç çš„å¼€å‘ã€‚æœ€éš¾èƒ½å¯è´µçš„æ˜¯ï¼Œè¿™ä¸€åˆ‡å¹¶æ²¡æœ‰ä»¥å¯é æ€§ã€å¯æ‰©å±•æ€§ä¸ºä»£ä»·ï¼Œåè€Œå°†å…¶å¤§å¹…åº¦æé«˜ã€‚</p>\n<p>æˆ‘åœ¨<a href=\"http://time.geekbang.org/column/article/12188\">ä¸“æ å‘¨æœ«ç¦åˆ©</a>ä¸­å·²ç»æ¨èäº†Norman Maurerç­‰ç¼–å†™çš„ã€ŠNettyå®æˆ˜ã€‹ï¼ˆNetty In Actionï¼‰ï¼Œå¦‚æœä½ æƒ³ç³»ç»Ÿå­¦ä¹ Nettyï¼Œå®ƒä¼šæ˜¯ä¸ªå¾ˆå¥½çš„å…¥é—¨å‚è€ƒã€‚é’ˆå¯¹Nettyçš„ä¸€äº›å®ç°åŸç†ï¼Œå¾ˆå¯èƒ½æˆä¸ºé¢è¯•ä¸­çš„è€ƒç‚¹ï¼Œä¾‹å¦‚ï¼š</p>\n<ul>\n<li>\n<p>Reactoræ¨¡å¼å’ŒNettyçº¿ç¨‹æ¨¡å‹ã€‚</p>\n</li>\n<li>\n<p>Pipeliningã€EventLoopç­‰éƒ¨åˆ†çš„è®¾è®¡å®ç°ç»†èŠ‚ã€‚</p>\n</li>\n<li>\n<p>Nettyçš„å†…å­˜ç®¡ç†æœºåˆ¶ã€<a href=\"http://netty.io/wiki/reference-counted-objects.html\">å¼•ç”¨è®¡æ•°</a>ç­‰ç‰¹åˆ«æ‰‹æ®µã€‚</p>\n</li>\n<li>\n<p>æœ‰çš„æ—¶å€™é¢è¯•å®˜ä¹Ÿå–œæ¬¢å¯¹æ¯”Javaæ ‡å‡†NIO APIï¼Œä¾‹å¦‚ï¼Œä½ æ˜¯å¦çŸ¥é“Java NIOæ—©æœŸç‰ˆæœ¬ä¸­çš„Epoll<a href=\"http://www.10tiao.com/html/308/201602/401718035/1.html\">ç©ºè½¬é—®é¢˜</a>ï¼Œä»¥åŠNettyçš„è§£å†³æ–¹å¼ç­‰ã€‚</p>\n</li>\n</ul>\n<p>å¯¹äºè¿™äº›çŸ¥è¯†ç‚¹ï¼Œå…¬å¼€çš„æ·±å…¥è§£è¯»å·²ç»æœ‰å¾ˆå¤šäº†ï¼Œåœ¨å­¦ä¹ æ—¶å¸Œæœ›ä½ ä¸è¦ä¸€å¼€å§‹å°±è¢«å¤æ‚çš„ç»†èŠ‚å¼„æ™•ï¼Œå¯ä»¥ç»“åˆå®ä¾‹ï¼Œé€æ­¥ã€æœ‰é’ˆå¯¹æ€§çš„è¿›è¡Œå­¦ä¹ ã€‚æˆ‘çš„ä¸€ä¸ªå»ºè®®æ˜¯ï¼Œå¯ä»¥è¯•ç€ç”»å‡ºç›¸åº”çš„ç¤ºæ„å›¾ï¼Œéå¸¸æœ‰åŠ©äºç†è§£å¹¶èƒ½æ¸…æ™°é˜è¿°è‡ªå·±çš„çœ‹æ³•ã€‚</p>\n<p>ä»Šå¤©ï¼Œä»Nettyæ€§èƒ½çš„é—®é¢˜å¼€å§‹ï¼Œæˆ‘æ¦‚è¦åœ°ä»‹ç»äº†Nettyæ¡†æ¶ï¼Œå¹¶ä¸”ä»¥Echo Serverä¸ºä¾‹ï¼Œå¯¹æ¯”äº†Nettyå’ŒJava NIOåœ¨è®¾è®¡ä¸Šçš„ä¸åŒã€‚ä½†è¿™äº›éƒ½ä»…ä»…æ˜¯å†°å±±çš„ä¸€è§’ï¼Œå…¨é¢æŒæ¡è¿˜éœ€è¦ä¸‹éå¸¸å¤šçš„åŠŸå¤«ã€‚</p>\n<h2>ä¸€è¯¾ä¸€ç»ƒ</h2>\n<p>å…³äºä»Šå¤©æˆ‘ä»¬è®¨è®ºçš„é¢˜ç›®ä½ åšåˆ°å¿ƒä¸­æœ‰æ•°äº†å—ï¼Ÿä»Šå¤©çš„æ€è€ƒé¢˜æ˜¯ï¼ŒNettyçš„çº¿ç¨‹æ¨¡å‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</p>\n<p>è¯·ä½ åœ¨ç•™è¨€åŒºå†™å†™ä½ å¯¹è¿™ä¸ªé—®é¢˜çš„æ€è€ƒï¼Œæˆ‘ä¼šé€‰å‡ºç»è¿‡è®¤çœŸæ€è€ƒçš„ç•™è¨€ï¼Œé€ç»™ä½ ä¸€ä»½å­¦ä¹ å¥–åŠ±ç¤¼åˆ¸ï¼Œæ¬¢è¿ä½ ä¸æˆ‘ä¸€èµ·è®¨è®ºã€‚</p>\n<p>ä½ çš„æœ‹å‹æ˜¯ä¸æ˜¯ä¹Ÿåœ¨å‡†å¤‡é¢è¯•å‘¢ï¼Ÿä½ å¯ä»¥â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„é¢˜ç›®åˆ†äº«ç»™å¥½å‹ï¼Œæˆ–è®¸ä½ èƒ½å¸®åˆ°ä»–ã€‚</p>\n<p></p>\n","neighbors":{"left":{"article_title":"ç¬¬37è®² | è°ˆè°ˆSpring Beançš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸï¼Ÿ","id":12472},"right":{"article_title":"ç¬¬39è®² | è°ˆè°ˆå¸¸ç”¨çš„åˆ†å¸ƒå¼IDçš„è®¾è®¡æ–¹æ¡ˆï¼ŸSnowflakeæ˜¯å¦å—å†¬ä»¤æ—¶åˆ‡æ¢å½±å“ï¼Ÿ","id":12806}},"comments":[{"had_liked":false,"id":18654,"user_name":"å¿†æ°´å¯’","can_delete":false,"product_type":"c1","uid":1147453,"ip_address":"","ucode":"E3F86BD8AA8903","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","comment_is_top":false,"comment_ctime":1533529809,"is_pvip":false,"replies":[{"id":"6584","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","comment_id":18654,"uid":"1009360","ip_address":"","utype":1,"ctime":1533629533,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":2,"race_medal":0,"score":"246346665681","product_id":100006701,"comment_content":"Nettyé‡‡ç”¨Reactorçº¿ç¨‹æ¨¡å‹ã€‚è¿™é‡Œé¢ä¸»è¦æœ‰ä¸‰ç§Reactorçº¿ç¨‹æ¨¡å‹ã€‚åˆ†åˆ«æ˜¯å•çº¿ç¨‹æ¨¡å¼ã€ä¸»ä»Reactoræ¨¡å¼ã€å¤šReactorçº¿ç¨‹æ¨¡å¼ã€‚å…¶éƒ½å¯ä»¥é€šè¿‡åˆè¯•å’ŒEventLoopGroupè¿›è¡Œè®¾ç½®ã€‚å…¶ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå•Reactoræ¨¡å¼å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œæ—¢è¿›ç¨‹å¤„ç†è¿æ¥ï¼Œä¹Ÿå¤„ç†IOã€‚ç±»ä¼¼äºæˆ‘ä»¬ä¼ ç»Ÿçš„OIOç¼–ç¨‹ã€‚ä¸»ä»Reactoræ¨¡å¼ï¼Œå…¶å®å°±æ˜¯å°†ç›‘å¬è¿æ¥å’Œå¤„ç†IOçš„åˆ†å¼€åœ¨ä¸åŒçš„çº¿ç¨‹å®Œæˆã€‚æœ€åï¼Œä¸»ä»Reactorçº¿ç¨‹æ¨¡å‹ï¼Œä¸ºäº†è§£å†³å¤šReactoræ¨¡å‹ä¸‹å•ä¸€çº¿ç¨‹æ€§èƒ½ä¸è¶³çš„é—®é¢˜ã€‚æ”¹ä¸ºäº†ä¸€ç»„çº¿ç¨‹æ± è¿›è¡Œå¤„ç†ã€‚å®˜æ–¹é»˜è®¤çš„æ˜¯é‡‡ç”¨è¿™ç§ä¸»ä»Reactoræ¨¡å‹ã€‚å…¶çº¿ç¨‹æ•°é»˜è®¤ä¸ºCPUå†…æ ¸çš„2å€ã€‚æ¨è€å¸ˆï¼Œä¸çŸ¥é“æˆ‘è¯´çš„å¯¹ä¸å¯¹ï¼Ÿ","like_count":58,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421613,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533629533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144504,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","nickname":"KAGEMUSHA","note":"","ucode":"DFC05BE62A9C10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308782,"discussion_content":"æœ€ååº”è¯¥å« ä¸»ä»-å¤šReactorçº¿ç¨‹æ¨¡å‹å§ï¼Œè€Œä¸”ç‰¹ç‚¹å†™åäº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1601083183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69392,"user_name":"é’é¸Ÿé£é±¼","can_delete":false,"product_type":"c1","uid":1400453,"ip_address":"","ucode":"72B7C8D1EC9D06","user_header":"https://wx.qlogo.cn/mmopen/vi_32/cEXn4ZLiccC6jIePvS0RbKI8wUCSibUhh0WiaIq3ib9kRv5icnaopn7kgckIR317onpX3wdyubgAukemdJCakXDuChw/132","comment_is_top":false,"comment_ctime":1550733500,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"126104785084","product_id":100006701,"comment_content":"ä¸ªäººè§‰å¾—å…³äºNettyè¿™å—çŸ¥è¯†è®²çš„è¿˜æ˜¯å¤ªè¡¨é¢åŒ–äº†ï¼Œå¦‚æœèƒ½æ·±å…¥ç‚¹ï¼Œè‚¯å®šæ›´å¥½","like_count":30,"discussions":[{"author":{"id":1487584,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b2/e0/d856f5a4.jpg","nickname":"é±¼","note":"","ucode":"89EC9CE3AD0281","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294739,"discussion_content":"æ·±å…¥è®²è§£çš„è¯ä¸æ˜¯æä¾›äº†å‚è€ƒä¹¦ã€ŠNetty In Actionã€‹ï¼Œä¸ä¼šçœŸè®¤ä¸ºåªè¯»è¿™ä¸ªä¸“æ çš„å†…å®¹å°±å¯ä»¥å…¨é¢æŒæ¡é¡ºåˆ©é€šè¿‡é¢è¯•å§ï¼Œé‚£è¡Œä¸šé—¨æ§›ä¹Ÿå¤ªä½äº†ã€‚è¿™äº›çŸ¥è¯†çƒ­é—¨çš„è€ƒç‚¹è€Œå·²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595985795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212902,"avatar":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","nickname":"æ—…é€”","note":"","ucode":"5022477E8E9441","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294684,"discussion_content":"ä¸“æ åŸºæœ¬æ˜¯è®©ä½ äº†è§£ä¸ºä¸»ï¼Œæƒ³æ·±å…¥è¿˜å¾—è‡ªå·±å»çœ‹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595954445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18476,"user_name":"Levy","can_delete":false,"product_type":"c1","uid":1078941,"ip_address":"","ucode":"6AFCB0EA6CA183","user_header":"https://static001.geekbang.org/account/avatar/00/10/76/9d/6dab9e0e.jpg","comment_is_top":false,"comment_ctime":1533354211,"is_pvip":false,"replies":[{"id":"6461","content":"æ˜¯çš„ï¼Œä¸åŒç‰ˆæœ¬æ¨¡å‹æœ‰ç‚¹åŒºåˆ«ï¼Œä½†é€»è¾‘ä¸Šéƒ½è¿˜æ˜¯åŒºåˆ†","user_name":"ä½œè€…å›å¤","comment_id":18476,"uid":"1009360","ip_address":"","utype":1,"ctime":1533399825,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"53072961763","product_id":100006701,"comment_content":"nettyçº¿ç¨‹æ¨¡å‹ä¸€èˆ¬åˆ†ä¸ºç›‘å¬çº¿ç¨‹å’ŒI&#47;Oå¤„ç†çº¿ç¨‹ï¼Œä¹Ÿå³bossGroupå’ŒworkerGroupï¼Œå±äºå¤šReactoræ¨¡å‹","like_count":13,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421545,"discussion_content":"æ˜¯çš„ï¼Œä¸åŒç‰ˆæœ¬æ¨¡å‹æœ‰ç‚¹åŒºåˆ«ï¼Œä½†é€»è¾‘ä¸Šéƒ½è¿˜æ˜¯åŒºåˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533399825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18537,"user_name":"Allen","can_delete":false,"product_type":"c1","uid":1162307,"ip_address":"","ucode":"0E0D44ABB35DBB","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/43/11acdc02.jpg","comment_is_top":false,"comment_ctime":1533436507,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23008272987","product_id":100006701,"comment_content":"æœ‰ä¸‰ç§æ¨¡å‹ã€‚1-1ã€‚1-n  n-n. å¹¶ä¸”å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè‡ªåŠ¨è¿›è¡Œè°ƒæ•´ï¼Œå¯è°“æ˜¯çº¿ç¨‹æ¨¡å‹çš„ç»ˆæç‰ˆæœ¬ï¼Œç®€ç›´æ˜¯å¤ªé…·äº†","like_count":6},{"had_liked":false,"id":47028,"user_name":"å°æ©","can_delete":false,"product_type":"c1","uid":1285838,"ip_address":"","ucode":"8B7B593AA93A4B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/nUB9lOWn8HMSCoyywLbqicVVUkIBgcgnPZlHUU9psKBN36R6f4CP3dsia8FRZKb6FAZMiaAibC3q4eBFwSeeh63rMw/132","comment_is_top":false,"comment_ctime":1544021588,"is_pvip":false,"discussion_count":8,"race_medal":0,"score":"14428923476","product_id":100006701,"comment_content":"æ¨è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æœ‰5å¹´å·¦å³çš„Javaå¼€å‘ç»éªŒï¼Œä¹Ÿä¸æ–­çš„å°è¯•å­¦ä¹ nettyï¼Œä½†è¿˜æ˜¯æ‰¾ä¸åˆ°çœŸæ­£èƒ½å¤Ÿä½¿ç”¨åˆ°çš„åœ°æ–¹ï¼Œæœ€å¤šçœ‹ä¸€äº›æºç ï¼Œå­¦ä¹ ä¸€ä¸‹ç®€å•çš„çº¿ç¨‹æ¨¡å‹ï¼Œnettyç¦»æˆ‘æœ€è¿‘çš„åº”è¯¥æ˜¯spring boot 2.0é‡Œé¢çš„äº†ï¼Œæƒ³è¯·æ•™ä¸€ä¸‹åœ¨æˆ‘ä»¬å®é™…ä¸šåŠ¡å¼€å‘ä¸­ï¼Œä»€ä¹ˆæ ·çš„ä¸šåŠ¡åœºæ™¯ä¼šç”¨åˆ°nettyï¼Œè°¢è°¢ï¼","like_count":4,"discussions":[{"author":{"id":1175430,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ef/86/12f95d66.jpg","nickname":"FATMAN89","note":"","ucode":"48A67FB47B3C5D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334147,"discussion_content":"imé‡Œé¢ä¼šæ¶‰åŠåˆ°é•¿è¿æ¥ï¼Œå¾ˆå¤šç‰©è”ç½‘è¦ç›´æ¥è·Ÿè®¾å¤‡å»ºç«‹é•¿è¿æ¥çš„æƒ…å†µä¸‹ä¹Ÿä¼šç”¨nettyã€‚å¯ä»¥è¯•ç€å»ä¸€äº›ç‰©è”ç½‘å…¬å¸ï¼Œä»–ä»¬æœ‰å¤§é‡ç”¨åˆ°nettyçš„åœºæ™¯ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1607751112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1137353,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5a/c9/933ee0a8.jpg","nickname":"å†‰é‡","note":"","ucode":"2CAEA424996876","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4503,"discussion_content":"ä½ å¯ä»¥åœ¨æ¶ˆæ¯æ¨é€æˆ–è€…æœ€ç›´æ¥çš„ç”¨websoketå®ç°ä¸šåŠ¡","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1565499207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1257046,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2e/56/aa3690ef.jpg","nickname":"äº‘äº‘","note":"","ucode":"1A08803F6EBD33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":113318,"discussion_content":"ç”¨å®ƒæ¥å®ç°websocketå¾ˆå¥½ç”¨çš„ï¼Œè¿˜æœ‰ä¸è®¾å¤‡é€šä¿¡ä¹Ÿå¾ˆå¥½ç”¨ï¼Œdubboä¹‹é—´çš„é€šä¿¡å°±æ˜¯netty","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1577892696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1138147,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5d/e3/c2e9562e.jpg","nickname":"ç”³ä¸Šå","note":"","ucode":"3DDE45E72E2157","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":45885,"discussion_content":"é•¿è¿æ¥æ—¶å¯ä»¥ä½¿ç”¨nettyæ„å»ºæœåŠ¡ç«¯","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1573094242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2391701,"avatar":"","nickname":"Geek_a3890b","note":"","ucode":"BF67D080DAF96D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404724,"discussion_content":"æœåŠ¡å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634392286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1612933,"avatar":"","nickname":"Thomas Yang","note":"","ucode":"29249144F708D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351516,"discussion_content":"æ¸¸æˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614310222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274379,"discussion_content":"Imå¾ˆå¤šéƒ½ç”¨netty","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590577620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":174600,"discussion_content":"dubboä¸­ç”¨åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581929854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20470,"user_name":"ttxser","can_delete":false,"product_type":"c1","uid":1022694,"ip_address":"","ucode":"47C3FCB59F8027","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9a/e6/e8439f9a.jpg","comment_is_top":false,"comment_ctime":1534466734,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14419368622","product_id":100006701,"comment_content":"æœåŠ¡å™¨çš„å¤šreactorè²Œä¼¼ä¸æ”¯æŒå§ï¼Œbossè™½ç„¶èƒ½è®¾ç½®å¤šçº¿ç¨‹ï¼Œä½†æœ€ååªèƒ½ç»‘å®šä¸€ä¸ªçº¿ç¨‹åˆ°serversocketæ¥acceptï¼Ÿ","like_count":3},{"had_liked":false,"id":19090,"user_name":"WolvesLeader","can_delete":false,"product_type":"c1","uid":1103839,"ip_address":"","ucode":"33610E19CA2E96","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/df/fc0a6709.jpg","comment_is_top":false,"comment_ctime":1533667052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10123601644","product_id":100006701,"comment_content":"ä¸€ç›´ä¸æ˜ç™½ï¼Œn_nçš„ä½¿ç”¨åœºæ™¯","like_count":2},{"had_liked":false,"id":18586,"user_name":"å’–å•¡çŒ«å£é‡Œçš„å’–å•¡çŒ«ğŸ±","can_delete":false,"product_type":"c1","uid":1036565,"ip_address":"","ucode":"FE2441B3A40375","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d1/15/7d47de48.jpg","comment_is_top":false,"comment_ctime":1533468443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5828435739","product_id":100006701,"comment_content":"ä¸ºä»€ä¹ˆæˆ‘çœ‹ç€å¼€æºé¡¹ç›®æŠŠnettyåšç½‘ç»œå±‚ï¼Œæ¨¡å‹éƒ½æ˜¯1-N ,ä¸ºä»€ä¹ˆN-Nä¼šæµªè´¹èµ„æº","like_count":1},{"had_liked":false,"id":18538,"user_name":"Allen","can_delete":false,"product_type":"c1","uid":1162307,"ip_address":"","ucode":"0E0D44ABB35DBB","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/43/11acdc02.jpg","comment_is_top":false,"comment_ctime":1533436630,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5828403926","product_id":100006701,"comment_content":"è¯·é—®ä¸ºå•¥ä¸æ¨ènettyæƒå¨æŒ‡å—ï¼ŸğŸ˜‹","like_count":1,"discussions":[{"author":{"id":1324314,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/1a/9fa38dc9.jpg","nickname":"å­ç»","note":"","ucode":"5C26FF10934534","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352325,"discussion_content":"å¤§ä½¬çœ‹äº†nettyæƒå¨æŒ‡å—å—ï¼Ÿè§‰å¾—å¦‚ä½•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614684176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113249,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fc/a1/a47a8ebf.jpg","nickname":"æ–°äººæ³¨å†Œ","note":"","ucode":"2B1AD2ADF5D3AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340303,"discussion_content":"çœ‹ç€èˆ’æœå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609948254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329182,"user_name":"éŸ©å§å†°","can_delete":false,"product_type":"c1","uid":2352143,"ip_address":"","ucode":"0DEBD5927021D9","user_header":"https://static001.geekbang.org/account/avatar/00/23/e4/0f/221aac6a.jpg","comment_is_top":false,"comment_ctime":1641198665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641198665","product_id":100006701,"comment_content":"å‰å®³","like_count":0},{"had_liked":false,"id":158527,"user_name":"æ…ç‹¬","can_delete":false,"product_type":"c1","uid":1137160,"ip_address":"","ucode":"7EA6FB3C7CFE4C","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/08/2bef230f.jpg","comment_is_top":false,"comment_ctime":1575397582,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575397582","product_id":100006701,"comment_content":"Reactor æ¨¡å¼å’Œ Netty çº¿ç¨‹æ¨¡å‹è¿™å—ï¼Œè€å¸ˆèƒ½è¯¦ç»†è®²è§£ä¸‹å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":174602,"discussion_content":"ã€Šå“åº”å¼æ¶æ„  æ¶ˆæ¯æ¨¡å¼Actorå®ç°ä¸Scala.Akkaåº”ç”¨é›†æˆã€‹å¯ä»¥å¸®ä½ ç†è§£Reactor","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581930004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135010,"user_name":"éšå¿ƒè€Œè‡³","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1568975382,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568975382","product_id":100006701,"comment_content":"æƒ³æ·±å…¥è¿˜å¾—è‡ªå·±ç»“åˆå®ä¾‹ï¼Œé’ˆå¯¹æ€§åœ°è¯»è¯»æºç ï¼Œä¹‹å‰å›«å›µåæ£ä¼¼çš„è¯»å®Œäº†nettyå®æˆ˜ï¼Œå¹¶æ²¡æœ‰å¤ªç†è§£æœ¬è´¨ã€‚RTFSCï¼Œè¿½æ ¹æº¯æºï¼Œé€‚å¯è€Œæ­¢ï¼Œç¡®å®å¤ªéœ€è¦äº†","like_count":1},{"had_liked":false,"id":115996,"user_name":"shern","can_delete":false,"product_type":"c1","uid":1588321,"ip_address":"","ucode":"B7018DDF61B332","user_header":"https://static001.geekbang.org/account/avatar/00/18/3c/61/d4145bb6.jpg","comment_is_top":false,"comment_ctime":1563770646,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1563770646","product_id":100006701,"comment_content":"ä¸ºå•¥é»˜è®¤çš„çº¿ç¨‹æ•°æ˜¯cpuæ ¸æ•°çš„ä¸¤å€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1549032,"avatar":"","nickname":"Zzz","note":"","ucode":"9323254354868B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204893,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯å°½é‡å……åˆ†åˆ©ç”¨cpuæ ¸å¿ƒï¼Œå¦‚æœå¯ç”¨å¤ªå¤šçš„çº¿ç¨‹ï¼Œè‚¯å®šä¼šé€ æˆä¸å¿…è¦çš„ç«äº‰ï¼Œäº§ç”Ÿæ— è°“çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå½±å“æ€§èƒ½ï¼Œè®¾ç½®ä¸º2æ›´å¤šæ¥è‡ªäºç»éªŒå’Œå®è·µï¼Œsparké‡Œä¹Ÿæœ‰è¿™æ ·çš„çº¦å®šä¿—æˆçš„è®¾ç½®ï¼Œæ¯”å¦‚è®¾ç½®taskçš„æ•°é‡æ˜¯æ ¸å¿ƒæ•°çš„ä¸¤åˆ°ä¸‰å€ç­‰ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584236970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114772,"avatar":"https://static001.geekbang.org/account/avatar/00/11/02/94/2bf394f3.jpg","nickname":"Numbpad1","note":"","ucode":"2F075AC7E3847D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63742,"discussion_content":"Math.max(1, SystemPropertyUtil.getInt(\n                &#34;io.netty.eventLoopThreads&#34;, NettyRuntime.availableProcessors() * 2))","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574906809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18729,"user_name":"bills","can_delete":false,"product_type":"c1","uid":1000451,"ip_address":"","ucode":"F7E7BE64B99AE4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/03/460fda52.jpg","comment_is_top":false,"comment_ctime":1533558472,"is_pvip":false,"replies":[{"id":"6583","content":"minaæ²¡ä»”ç»†ç ”ç©¶è¿‡...","user_name":"ä½œè€…å›å¤","comment_id":18729,"uid":"1009360","ip_address":"","utype":1,"ctime":1533628479,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":3,"race_medal":0,"score":"1533558472","product_id":100006701,"comment_content":"è€å¸ˆï¼Œèƒ½ç»™è¯´ä¸‹minaå’Œnettyçš„ç›¸åŒå’Œä¸åŒå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421640,"discussion_content":"minaæ²¡ä»”ç»†ç ”ç©¶è¿‡...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533628479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008071,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/c7/b64ac05e.jpg","nickname":"sky","note":"","ucode":"9FE5F43055D3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257074,"discussion_content":"ä¸¤è€…éƒ½æ˜¯netty ä½œè€…å‚ä¸çš„, è€Œä¸”netty ä½œè€…è¯´äº†, è¦æ˜¯å‘ç°mina å“ªé‡Œå¥½çš„,netty è‚¯å®šèƒ½åšåˆ°æ›´å¥½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588520380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1612933,"avatar":"","nickname":"Thomas Yang","note":"","ucode":"29249144F708D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351517,"discussion_content":"minaåœ¨æ¸¸æˆè¡Œä¸šç”¨çš„æŒºå¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614310267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18563,"user_name":"L","can_delete":false,"product_type":"c1","uid":1123411,"ip_address":"","ucode":"A283D1FF7CE29D","user_header":"https://static001.geekbang.org/account/avatar/00/11/24/53/76dd2efc.jpg","comment_is_top":false,"comment_ctime":1533455222,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1533455222","product_id":100006701,"comment_content":"æ¨è€å¸ˆï¼Œå¯ä»¥çš„è¯éº»çƒ¦æ¨èå‡ ä¸ªèƒ½è·å–åˆ°æœ€æ–°Javaå¼€å‘èµ„æ–™ï¼Œæˆ–è€…ç¼–ç¨‹é¢†åŸŸç›¸å…³çš„å¤–æ–‡ç½‘ç«™ï¼Œåšå®¢ç­‰ï¼Œå°±æ˜¯æƒ³å…³æ³¨ä¸€äº›æœ€æ–°çš„æŠ€æœ¯ä¿¡æ¯","like_count":0,"discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":174605,"discussion_content":"acm.org","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1581930059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}