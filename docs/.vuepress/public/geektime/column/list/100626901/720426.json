{"id":720426,"title":"04ï½œå­—ç¬¦ä¸²ï¼šå¯¹å·å…¥åº§ï¼Œå­—ç¬¦ä¸²å…¶å®æ²¡é‚£ä¹ˆå¯æ€•ï¼","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Mikeï¼Œä»Šå¤©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹Rustä¸­å’Œæˆ‘ä»¬æ‰“äº¤é“æœ€é¢‘ç¹çš„æœ‹å‹â€”â€”å­—ç¬¦ä¸²ã€‚</p><p>è¿™èŠ‚è¯¾æˆ‘ä»¬æŠŠå­—ç¬¦ä¸²å•ç‹¬æ‹¿å‡ºæ¥è®²ï¼Œæ˜¯å› ä¸ºå­—ç¬¦ä¸²å¤ªå¸¸è§äº†ï¼Œç”šè‡³æœ‰äº›åº”ç”¨çš„ä¸»è¦å·¥ä½œå°±æ˜¯å¤„ç†å­—ç¬¦ä¸²ã€‚æ¯”å¦‚ Webå¼€å‘ã€è§£æå™¨ç­‰ã€‚è€ŒRusté‡Œçš„å­—ç¬¦ä¸²å†…å®¹ç›¸æ¯”äºå…¶ä»–è¯­è¨€æ¥è¯´è¿˜è¦å¤šä¸€äº›ã€‚æ˜¯å¦ç†Ÿç»ƒæŒæ¡Rustçš„å­—ç¬¦ä¸²çš„ä½¿ç”¨ï¼Œå¯¹Rustä»£ç å¼€å‘æ•ˆç‡æœ‰å¾ˆå¤§å½±å“ï¼Œæ‰€ä»¥è¿™èŠ‚è¯¾æˆ‘ä»¬å°±æ¥é‡ç‚¹æ”»å…‹å®ƒã€‚</p><h2>å¯æ€•çš„å­—ç¬¦ä¸²ï¼Ÿ</h2><p>æˆ‘ä»¬åœ¨Rusté‡Œå¸¸å¸¸ä¼šè§åˆ°ä¸€äº›å­—ç¬¦ä¸²ç›¸å…³çš„å†…å®¹ï¼Œæ¯”å¦‚ä¸‹é¢è¿™äº›ã€‚</p><pre><code class=\"language-plain\">String, &amp;String, \nstr, &amp;str, &amp;'static str\n[u8], &amp;[u8], &amp;[u8; N], Vec&lt;u8&gt;\nas_str(), as_bytes()\nOsStr, OsString\nPath, PathBuf\nCStr, CString\n</code></pre><p>æˆ‘ä»¬ç”¨ä¸€å¼ å›¾å½¢è±¡åœ°è¡¨è¾¾Rustè¯­è¨€é‡Œå­—ç¬¦ä¸²çš„å¤æ‚æ€§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/32/b0/3218b787e94ecac394ab6b8476f8cdb0.png?wh=2158x1444\" alt=\"\"></p><p>æœ‰æ²¡æœ‰è¢«å“åˆ°ï¼Ÿé¡¿æ—¶ä¸æƒ³å­¦äº†ï¼ŒRustä»å…¥é—¨åˆ°æ”¾å¼ƒï¼Œç¬¬ä¸€æ¬¡Rustæ—…ç¨‹åˆ°æ­¤ç»“æŸã€‚</p><p>ä¸”æ…¢ä¸”æ…¢ï¼Œå…ˆä¸è¦ç›–æ£ºå®šè®ºã€‚ä»”ç»†æƒ³ä¸€æƒ³Rustä¸­çš„å­—ç¬¦ä¸²çœŸçš„æœ‰è¿™ä¹ˆå¤æ‚å—ï¼Ÿè¿™äº›çœ¼èŠ±ç¼­ä¹±çš„ç¬¦å·åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘æ¥ç»™ä½ å¥½å¥½åˆ†æä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹Cè¯­è¨€é‡Œçš„å­—ç¬¦ä¸²ã€‚å›¾é‡Œæ˜¾ç¤ºï¼ŒCä¸­çš„å­—ç¬¦ä¸²ç»Ÿä¸€å«åš <code>char *</code>ï¼Œè¿™ç¡®å®å¾ˆç®€æ´ï¼Œç›¸å½“äºæ˜¯ç»Ÿä¸€çš„æŠ½è±¡ã€‚ä½†æ˜¯è¿™ä¸ªç»Ÿä¸€çš„æŠ½è±¡ä¹Ÿä»˜å‡ºäº†ä»£ä»·ï¼Œå°±æ˜¯<strong>ä¸¢å¤±äº†å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯</strong>ã€‚</p><!-- [[[read_end]]] --><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬ä»è®¡ç®—æœºç»“æ„è¯´èµ·ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè®¡ç®—æœºCPUæ‰§è¡Œçš„æŒ‡ä»¤éƒ½æ˜¯äºŒè¿›åˆ¶åºåˆ—ï¼Œæ‰€æœ‰è¯­è¨€å†™çš„ç¨‹åºæœ€åæ‰§è¡Œæ—¶éƒ½ä¼šå½’ç»“ä¸ºäºŒè¿›åˆ¶åºåˆ—æ¥æ‰§è¡Œã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆä¸ç›´æ¥å†™äºŒè¿›åˆ¶æ‰“å­”å¼€å‘ï¼Œè€Œæ˜¯å‡ºç°äº†å‡ ç™¾ä¸Šåƒç§è®¡ç®—æœºè¯­è¨€å‘¢ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯å› ä¸º<strong>æŠ½è±¡</strong>ã€‚</p><p>æŠ½è±¡æ˜¯ç”¨æ¥è§£å†³ç°å®é—®é¢˜å»ºæ¨¡çš„å·¥å…·ã€‚åœ¨Rusté‡Œä¹Ÿä¸€æ ·ï¼Œä¹‹æ‰€ä»¥Rustæœ‰é‚£ä¹ˆå¤šçœ‹ä¸Šå»éƒ½æ˜¯å­—ç¬¦ä¸²çš„ç±»å‹ï¼Œå°±æ˜¯å› ä¸º<strong>RustæŠŠå­—ç¬¦ä¸²åœ¨å„ç§åœºæ™¯ä¸‹çš„ä½¿ç”¨ç»™æ¨¡å‹åŒ–ã€æŠ½è±¡åŒ–äº†</strong>ã€‚ç›¸æ¯”Cè¯­è¨€çš„ <code>char *</code>ï¼Œå¤šäº†å»ºæ¨¡çš„è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªæ¨¡å‹é‡Œé¢å¤šäº†å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹å‰é¢æåˆ°çš„é‚£äº›å­—ç¬¦ä¸²ç±»å‹å„è‡ªæœ‰ä»€ä¹ˆå…·ä½“å«ä¹‰ã€‚</p><h2>ä¸åŒç±»å‹çš„å­—ç¬¦ä¸²</h2><p>ç¤ºä¾‹ï¼š</p><pre><code class=\"language-plain\">fn main() {\n  let s1: &amp;'static str = \"I am a superman.\"; \n  let s2: String = s1.to_string(); \n  let s3: &amp;String = &amp;s2;\n  let s4: &amp;str = &amp;s2[..];\n  let s5: &amp;str = &amp;s2[..6];\n}\n</code></pre><p>ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œs1ã€s2ã€s3ã€s4ã€s5 çœ‹èµ·æ¥å¥½åƒæ˜¯4ç§ä¸åŒç±»å‹çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ä¸ºäº†è®©ä½ æ›´å®¹æ˜“ç†è§£ï¼Œæˆ‘ç”»å‡ºå®ƒä»¬åœ¨å†…å­˜ä¸­çš„ç»“æ„å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1c/a1/1c3d990e99f5c5cfa47ee2b885a561a1.jpg?wh=1627x1209\" alt=\"\" title=\"Stringã€&amp;Stringã€strã€&amp;strã€&amp;'static str ä¹‹é—´çš„å…³ç³»å›¾\"></p><p>æˆ‘æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™å¼ å›¾ç‰‡çš„æ„æ€ã€‚</p><p><code>\"I am a superman.\"</code> è¿™ä¸ªç”¨åŒå¼•å·æ‹¬èµ·æ¥çš„éƒ¨åˆ†æ˜¯å­—ç¬¦ä¸²çš„å­—é¢é‡ï¼Œå­˜æ”¾åœ¨é™æ€æ•°æ®åŒºã€‚è€Œ s1 æ˜¯æŒ‡å‘é™æ€æ•°æ®åŒºä¸­çš„è¿™ä¸ªå­—ç¬¦ä¸²çš„åˆ‡ç‰‡å¼•ç”¨ï¼Œå½¢å¼æ˜¯ <code>&amp;'static str</code>ï¼Œè¿™æ˜¯é™æ€æ•°æ®åŒºä¸­çš„å­—ç¬¦ä¸²çš„è¡¨ç¤ºæ–¹æ³•ã€‚</p><p>é€šè¿‡æ‰§è¡Œ <code>s1.to_string()</code>ï¼ŒRustå°†é™æ€æ•°æ®åŒºä¸­çš„å­—ç¬¦ä¸²å­—é¢é‡æ‹·è´äº†ä¸€ä»½åˆ°å †å†…å­˜ä¸­ï¼Œé€šè¿‡s2æŒ‡å‘ï¼Œs2å…·æœ‰è¿™ä¸ªå †å†…å­˜å­—ç¬¦ä¸²çš„æ‰€æœ‰æƒï¼Œ<code>String</code> åœ¨Rustä¸­å°±ä»£è¡¨å…·æœ‰æ‰€æœ‰æƒçš„å­—ç¬¦ä¸²ã€‚</p><p>s3å°±æ˜¯å¯¹s2çš„ä¸å¯å˜å¼•ç”¨ï¼Œå› æ­¤ç±»å‹ä¸º <code>&amp;String</code>ã€‚</p><p>s4æ˜¯å¯¹s2çš„åˆ‡ç‰‡å¼•ç”¨ï¼Œç±»å‹æ˜¯ <code>&amp;str</code>ã€‚åˆ‡ç‰‡å°±æ˜¯ä¸€å—è¿ç»­å†…å­˜çš„æŸç§è§†å›¾ï¼Œå®ƒå¯ä»¥æå–ç›®æ ‡å¯¹è±¡çš„å…¨éƒ¨æˆ–ä¸€éƒ¨åˆ†ã€‚è¿™é‡Œs4å°±æ˜¯å–çš„ç›®æ ‡å¯¹è±¡å­—ç¬¦ä¸²çš„å…¨éƒ¨ã€‚</p><p>s5æ˜¯å¯¹s2çš„å¦ä¸€ä¸ªåˆ‡ç‰‡å¼•ç”¨ï¼Œç±»å‹ä¹Ÿæ˜¯ <code>&amp;str</code>ã€‚ä¸s4ä¸åŒçš„æ˜¯ï¼Œs5æ˜¯s2çš„éƒ¨åˆ†è§†å›¾ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ <code>\"I am a\"</code> è¿™ä¸€éƒ¨åˆ†ã€‚</p><p>ç›¸ä¿¡ä½ é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯¹è¿™å‡ ç§ä¸åŒç±»å‹çš„å­—ç¬¦ä¸²å·²ç»æœ‰äº†ä¸€ä¸ªç®€å•ç›´è§‚çš„è®¤è¯†äº†ï¼Œä¸‹é¢æˆ‘æ¥ç»™ä½ è¯¦ç»†è§£é‡Šä¸‹ã€‚</p><p><code>String</code> æ˜¯å­—ç¬¦ä¸²çš„æ‰€æœ‰æƒå½¢å¼ï¼Œå¸¸å¸¸åœ¨å †ä¸­åˆ†é…ã€‚<code>String</code> å­—ç¬¦ä¸²çš„å†…å®¹å¤§å°æ˜¯å¯ä»¥åŠ¨æ€å˜åŒ–çš„ã€‚è€Œ <code>str</code> æ˜¯å­—ç¬¦ä¸²çš„åˆ‡ç‰‡ç±»å‹ï¼Œé€šå¸¸ä»¥åˆ‡ç‰‡å¼•ç”¨ <code>&amp;str</code> å½¢å¼å‡ºç°ï¼Œæ˜¯å­—ç¬¦ä¸²çš„è§†å›¾çš„å€Ÿç”¨å½¢å¼ã€‚</p><p>å­—ç¬¦ä¸²å­—é¢é‡é»˜è®¤ä¼šå­˜æ”¾åœ¨é™æ€æ•°æ®åŒºé‡Œï¼Œè€Œé™æ€æ•°æ®åŒºä¸­çš„å­—ç¬¦ä¸²æ€»æ˜¯è´¯ç©¿ç¨‹åºè¿è¡Œçš„æ•´ä¸ªç”Ÿå‘½æœŸï¼Œç›´åˆ°ç¨‹åºç»“æŸçš„æ—¶å€™æ‰ä¼šè¢«é‡Šæ”¾ã€‚å› æ­¤ä¸éœ€è¦æŸä¸€ä¸ªå˜é‡å¯¹å…¶æ‹¥æœ‰æ‰€æœ‰æƒï¼Œä¹Ÿæ²¡æœ‰å“ªä¸ªå˜é‡èƒ½å¤Ÿæ‹¥æœ‰è¿™ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰æƒï¼ˆä¹Ÿå°±æ˜¯è¿™ä¸ªèµ„æºçš„åˆ†é…è´£ä»»ï¼‰ã€‚å› æ­¤å¯¹äºå­—ç¬¦ä¸²å­—é¢é‡è¿™ç§æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬åªèƒ½æ‹¿åˆ°å®ƒçš„å€Ÿç”¨å½¢å¼ <code>&amp;'static str</code>ã€‚è¿™é‡Œ <code>'static</code> è¡¨ç¤ºè¿™ä¸ªå¼•ç”¨å¯ä»¥è´¯ç©¿æ•´ä¸ªç¨‹åºçš„ç”Ÿå‘½æœŸï¼Œç›´åˆ°è¿™ä¸ªç¨‹åºè¿è¡Œç»“æŸã€‚</p><p><code>&amp;String</code> ä»…ä»…æ˜¯å¯¹ <code>String</code> ç±»å‹çš„å­—ç¬¦ä¸²çš„æ™®é€šå¼•ç”¨ã€‚</p><p>å¯¹ <code>String</code> åšå­—ç¬¦ä¸²åˆ‡ç‰‡æ“ä½œåï¼Œå¯ä»¥å¾—åˆ° <code>&amp;str</code>ã€‚è¿™é‡Œè¿™ä¸ª <code>&amp;str</code> å°±æ˜¯æŒ‡å‘ç”± <code>String</code> ç®¡ç†çš„å†…å­˜èµ„æºçš„åˆ‡ç‰‡å¼•ç”¨ï¼Œæ˜¯ç›®æ ‡å­—ç¬¦ä¸²èµ„æºçš„å€Ÿç”¨å½¢å¼ï¼Œä¸ä¼šå†æŠŠå­—ç¬¦ä¸²å†…å®¹å¤åˆ¶ä¸€ä»½ã€‚</p><p>ä»ä¸Šé¢çš„å›¾ç¤ºé‡Œå¯ä»¥çœ‹åˆ°ï¼Œ<code>&amp;str</code> æ—¢å¯ä»¥å¼•ç”¨å †ä¸­çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨é™æ€æ•°æ®åŒºä¸­çš„å­—ç¬¦ä¸²ï¼ˆ<code>&amp;'static str</code> æ˜¯ <code>&amp;str</code> çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼‰ã€‚å…¶å®å†…å­˜æœ¬æ¥å°±æ˜¯ä¸€ä¸ªçº¿æ€§ç©ºé—´ï¼Œä¸€ä¸ªæŒ‡é’ˆï¼ˆå¼•ç”¨æ˜¯æŒ‡é’ˆçš„ä¸€ç§ï¼‰ç†è®ºä¸Šæ¥è¯´å¯ä»¥æŒ‡å‘è¿™ä¸ªçº¿æ€§ç©ºé—´ä¸­çš„ä»»ä½•åœ°å€ã€‚</p><p><code>&amp;str</code> ä¹Ÿå¯è½¬æ¢ä¸º <code>String</code>ã€‚ä½ å¯ä»¥é€šè¿‡ç¤ºä¾‹ï¼Œçœ‹ä¸€ä¸‹å®ƒä»¬ä¹‹é—´æ˜¯å¦‚ä½•è½¬æ¢çš„ã€‚</p><pre><code class=\"language-plain\">let s: String = \"I am a superman.\".to_string(); \nlet a_slice: &amp;str = &amp;s[..];\nlet another_String: String = a_slice.to_string();\n</code></pre><h3>åˆ‡ç‰‡</h3><p>ä¸Šé¢æåˆ°äº†åˆ‡ç‰‡ï¼Œè¿™é‡Œæˆ‘å†è¡¥å……ä¸€ç‚¹å…³äºåˆ‡ç‰‡ï¼ˆsliceï¼‰çš„èƒŒæ™¯çŸ¥è¯†ã€‚åˆ‡ç‰‡æ˜¯ä¸€æ®µè¿ç»­å†…å­˜çš„ä¸€ä¸ªè§†å›¾ï¼ˆviewï¼‰ï¼Œåœ¨Rustä¸­ç”± <code>[T]</code> è¡¨ç¤ºï¼ŒTä¸ºå…ƒç´ ç±»å‹ã€‚è¿™ä¸ªè§†å›¾å¯ä»¥æ˜¯è¿™å—è¿ç»­å†…å­˜çš„å…¨éƒ¨æˆ–ä¸€éƒ¨åˆ†ã€‚åˆ‡ç‰‡ä¸€èˆ¬é€šè¿‡åˆ‡ç‰‡çš„å¼•ç”¨æ¥è®¿é—®ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ç»™å‡ºçš„è¿™ä¸ªå­—ç¬¦ä¸²ç¤ºä¾‹ã€‚</p><pre><code class=\"language-plain\">let s = String::from(\"abcdefg\");\nlet s1 = &amp;s[..];    // s1 å†…å®¹æ˜¯ \"abcdefg\"\nlet s2 = &amp;s[0..4];  // s2 å†…å®¹æ˜¯ \"abcd\"\nlet s3 = &amp;s[2..5];    // s3 å†…å®¹æ˜¯ \"cde\"\n</code></pre><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œsæ˜¯å †å†…å­˜ä¸­æ‰€æœ‰æƒå‹å­—ç¬¦ä¸²ç±»å‹ã€‚s1ä½œä¸ºsçš„ä¸€ä¸ªåˆ‡ç‰‡å¼•ç”¨ï¼Œå®ƒä¹ŸæŒ‡å‘å †å†…å­˜ä¸­é‚£ä¸ªå­—ç¬¦ä¸²çš„å¤´éƒ¨ï¼Œè¡¨ç¤ºsçš„å®Œæ•´å†…å®¹ã€‚s2ä¸s1æŒ‡å‘çš„å †å†…å­˜åœ°å€æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å†…å®¹ä¸åŒï¼Œs2æ˜¯ <code>\"abcd\"</code>ï¼Œè€Œs1æ˜¯ <code>\"abcdefg\"</code>ã€‚s3åˆ™æ˜¯sçš„ä¸­é—´ä½ç½®çš„ä¸€æ®µåˆ‡ç‰‡å¼•ç”¨ï¼Œå†…å®¹æ˜¯ <code>\"cde\"</code>ã€‚s3æŒ‡å‘çš„åœ°å€ä¸sã€s1ã€s2 ä¸åŒã€‚æˆ‘ç”»äº†ä¸€å¼ å›¾æ¥è¡¨ç¤ºå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0f/71/0f16a48dd7a9e54d75bc650300577d71.jpg?wh=3000x2249\" alt=\"\"></p><p>å¦‚æœä½ æ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡å¼•ç”¨ï¼Œé‚£ä¹ˆå¦‚ä½•è½¬æ¢æˆæ‰€æœ‰æƒå‹å­—ç¬¦ä¸²å‘¢ï¼Ÿæœ‰å‡ ç§æ–¹æ³•ã€‚</p><pre><code class=\"language-plain\">let s: &amp;str = \"I am a superman.\";\nlet s1: String = String::from(s);  // ä½¿ç”¨ String çš„fromæ„é€ å™¨\nlet s2: String = s.to_string();    // ä½¿ç”¨ to_string() æ–¹æ³•\nlet s3: String = s.to_owned();     // ä½¿ç”¨ to_owned() æ–¹æ³•\n</code></pre><h3><code>[u8]</code>ã€<code>&amp;[u8]</code>ã€<code>&amp;[u8; N]</code>ã€<code>Vec&lt;u8&gt;</code></h3><p>è¿™ä¸€å—å„¿å†…å®¹è™½ç„¶ä¸æ˜¯ç›´æ¥ä¸å­—ç¬¦ä¸²ç›¸å…³ï¼Œä½†å…·æœ‰ç±»æ¯”æ€§ã€‚æœ‰äº†å‰é¢çš„èƒŒæ™¯çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾è¾¨æè¿™å‡ ç§ç±»å‹ã€‚</p><ul>\n<li><code>[u8]</code> æ˜¯å­—èŠ‚ä¸²åˆ‡ç‰‡ï¼Œå¤§å°æ˜¯å¯ä»¥åŠ¨æ€å˜åŒ–çš„ã€‚</li>\n<li><code>&amp;[u8]</code> æ˜¯å¯¹å­—èŠ‚ä¸²åˆ‡ç‰‡çš„å¼•ç”¨ï¼Œå³åˆ‡ç‰‡å¼•ç”¨ï¼Œä¸ <code>&amp;str</code> æ˜¯ç±»ä¼¼çš„ã€‚</li>\n<li><code>&amp;[u8; N]</code> æ˜¯å¯¹u8æ•°ç»„ï¼ˆå…¶é•¿åº¦ä¸ºNï¼‰çš„å¼•ç”¨ã€‚</li>\n<li><code>Vec&lt;u8&gt;</code> æ˜¯u8ç±»å‹çš„åŠ¨æ€æ•°ç»„ã€‚ä¸ <code>String</code> ç±»ä¼¼ï¼Œè¿™æ˜¯ä¸€ç§å…·æœ‰æ‰€æœ‰æƒçš„ç±»å‹ã€‚</li>\n</ul><p><code>Vec&lt;u8&gt;</code> ä¸ <code>&amp;[u8]</code> çš„å…³ç³»å¦‚ä¸‹ï¼š</p><pre><code>let a_vec: Vec&lt;u8&gt; = vec![1,2,3,4,5,6,7,8];\n// a_slice æ˜¯ [1,2,3,4,5]\nlet a_slice: &amp;[u8] = &amp;a_vec[0..5];   \n// ç”¨ .to_vec() æ–¹æ³•å°†åˆ‡ç‰‡è½¬æ¢æˆVec\nlet another_vec = a_slice.to_vec();\n// æˆ–è€…ç”¨ .to_owned() æ–¹æ³•\nlet another_vec = a_slice.to_owned();\n</code></pre><p>æˆ‘ä»¬å¯ä»¥æ•´ç†å‡ºä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/32/eb/32b39e51f2d48787b97426cf1a1830eb.png?wh=2358x678\" alt=\"\"></p><h3><code>as_str()</code>ã€<code>as_bytes()</code>ã€<code>as_slice()</code></h3><p><code>String</code> ç±»å‹ä¸Šæœ‰ä¸ªæ–¹æ³•æ˜¯ <a href=\"https://doc.rust-lang.org/std/string/struct.String.html#method.as_str\">as_str()</a>ã€‚å®ƒè¿”å› <code>&str</code> ç±»å‹ã€‚è¿™ä¸ªæ–¹æ³•æ•ˆæœå…¶å®ç­‰ä»·äº <code>&a_string[..]</code>ï¼Œä¹Ÿå°±æ˜¯åŒ…å«å®Œæ•´çš„å­—ç¬¦ä¸²å†…å®¹çš„åˆ‡ç‰‡ã€‚</p><pre><code class=\"language-plain\">let s = String::from(\"foo\");\nassert_eq!(\"foo\", s.as_str());\n</code></pre><p><code>String</code> ç±»å‹ä¸Šè¿˜æœ‰ä¸ªæ–¹æ³•æ˜¯ <code>as_bytes()</code>ï¼Œå®ƒè¿”å› <code>&amp;[u8]</code> ç±»å‹ã€‚</p><pre><code class=\"language-plain\">let s = String::from(\"hello\");\nassert_eq!(&amp;[104, 101, 108, 108, 111], s.as_bytes());\n</code></pre><p>é€šè¿‡ä¸Šé¢ä¸¤ä¸ªç¤ºä¾‹å¯ä»¥å¯¹æ¯”è¿™ä¸¤ä¸ªæ–¹æ³•çš„ä¸åŒä¹‹å¤„ã€‚ å¯ä»¥çŒœæƒ³ <code>&amp;str</code> å…¶å®ä¹Ÿæ˜¯å¯ä»¥è½¬æˆ <code>&amp;[u8]</code> çš„ï¼Œæˆ‘ä»¬æŸ¥è¯¢<a href=\"https://doc.rust-lang.org/std/primitive.str.html#method.as_bytes\">æ ‡å‡†åº“æ–‡æ¡£</a>å‘ç°ï¼Œç”¨çš„æ­£æ˜¯åŒåæ–¹æ³•ã€‚</p><pre><code class=\"language-plain\">let bytes = \"bors\".as_bytes();\nassert_eq!(b\"bors\", bytes);\n</code></pre><p>Vecä¸Šæœ‰ä¸ª <code>as_slice()</code> å‡½æ•°ï¼Œä¸ <code>String</code> ä¸Šçš„ <code>as_str()</code> å¯¹åº”ï¼ŒæŠŠå®Œæ•´å†…å®¹è½¬æ¢æˆåˆ‡ç‰‡å¼•ç”¨ <code>&amp;[T]</code>ï¼Œç­‰ä»·äº <code>&amp;a_vec[..]</code>ã€‚</p><pre><code class=\"language-plain\">let a_vec = vec![1, 2, 3, 5, 8];\nassert_eq!(&amp;[1, 2, 3, 5, 8], a_vec.as_slice());\n</code></pre><h3>éšå¼å¼•ç”¨ç±»å‹è½¬æ¢</h3><p>å‰é¢æˆ‘ä»¬çœ‹åˆ°ï¼ŒRustä¸­ <code>&amp;String</code> ä¸ <code>&amp;str</code> å…¶å®æ˜¯ä¸åŒçš„ã€‚è¿™ç§ç»†èŠ‚çš„åŒºåˆ†ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¼šé€ æˆä¸€äº›ä¸æ–¹ä¾¿ï¼Œè€Œä¸”è¿™äº›æƒ…å†µè¿˜æ¯”è¾ƒå¸¸è§ã€‚æ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">fn foo(s: &amp;String) {  \n}\n\nfn main() {\n  let s = String::from(\"I am a superman.\");\n  foo(&amp;s);\n  let s1 = \"I am a superman.\";    \n  foo(s1);                        \n}\n</code></pre><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå‡½æ•°çš„å‚æ•°ç±»å‹æˆ‘ä»¬å®šä¹‰æˆ <code>&amp;String</code>ã€‚é‚£ä¹ˆåœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªå‡½æ•°åªæ¥å— <code>&amp;String</code> ç±»å‹çš„å‚æ•°ä¼ å…¥ã€‚å¦‚æœæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡å˜é‡ï¼Œæƒ³ä¼ è¿› <code>foo</code> å‡½æ•°ä¸­ï¼Œå°±å‘ç°ä¸è¡Œã€‚</p><pre><code class=\"language-plain\">error[E0308]: mismatched types\n --&gt; src/main.rs:8:7\n  |\n8 |   foo(s1);                        // error on this line\n  |   --- ^^ expected `&amp;String`, found `&amp;str`\n  |   |\n  |   arguments to this function are incorrect\n  |\n  = note: expected reference `&amp;String`\n             found reference `&amp;str`\n</code></pre><p>è¿™é‡Œä½“ç°äº†Rustä¸¥æ ¼çš„ä¸€é¢ã€‚</p><p>ä½†æ˜¯å¾ˆæ˜æ˜¾ï¼Œè¿™ç§ä¸¥æ ¼ä¹Ÿå¯¼è‡´äº†å¹³æ—¶ä½¿ç”¨ä¸æ–¹ä¾¿ï¼Œå®ƒå¼ºè¿«æˆ‘ä»¬å¿…é¡»æ³¨æ„å­—ç¬¦ä¸²å¤„ç†æ—¶çš„å„ç§ç»†èŠ‚é—®é¢˜ï¼Œæœ‰æ—¶æ˜¾å¾—è¿‡äºè¿‚è…äº†ã€‚ä½†æ˜¯Rustä¹Ÿå¹¶ä¸æ˜¯é‚£ä¹ˆæ­»æ¿ï¼Œå®ƒåœ¨ä¿æŒä¸¥æ ¼æ€§çš„åŒæ—¶ï¼Œé€šè¿‡ä¸€äº›ç²¾å¦™çš„æœºåˆ¶ï¼Œä¹Ÿå¯ä»¥å®ç°ä¸€å®šç¨‹åº¦ä¸Šçš„çµæ´»æ€§ã€‚æˆ‘ä»¬å¯ä»¥æ›´æ”¹ä¸Šè¿°ç¤ºä¾‹æ¥ä½“ä¼šä¸€ä¸‹ã€‚</p><pre><code class=\"language-plain\">fn foo(s: &amp;str) {      // åªéœ€è¦æŠŠè¿™é‡Œçš„å‚æ•°æ”¹ä¸º &amp;str ç±»å‹\n}\n\nfn main() {\n  let s = String::from(\"I am a superman.\");\n  foo(&amp;s);\n  let s1 = \"I am a superman.\";    \n  foo(s1);                        \n}\n</code></pre><p>æŠŠ <code>foo</code> å‚æ•°çš„ç±»å‹ç”± <code>&amp;String</code> æ”¹ä¸º <code>&amp;str</code>ï¼Œä¸Šè¿°ç¤ºä¾‹å°±ç¼–è¯‘é€šè¿‡äº†ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œåœ¨Rustä¸­å¯¹ <code>String</code> åšå¼•ç”¨æ“ä½œæ—¶ï¼Œå¯ä»¥å‘Šè¯‰Rustç¼–è¯‘å™¨ï¼Œæˆ‘æƒ³æŠŠ <code>&amp;String</code> ç›´æ¥è½¬æ¢åˆ° <code>&amp;str</code> ç±»å‹ã€‚åªéœ€è¦åœ¨ä»£ç ä¸­æ˜ç¡®æŒ‡å®šç›®æ ‡ç±»å‹å°±å¯ä»¥äº†ã€‚</p><pre><code class=\"language-plain\">let s = String::from(\"I am a superman.\");\nlet s1 = &amp;s;\nlet s2: &amp;str = &amp;s;\n</code></pre><p>ä¸Šè¿°ä»£ç ï¼Œs1ä¸æŒ‡å®šå…·ä½“ç±»å‹ï¼Œå¯¹æ‰€æœ‰æƒå­—ç¬¦ä¸²sçš„å¼•ç”¨æ“ä½œï¼Œåªè½¬æ¢æˆ <code>&amp;String</code> ç±»å‹ã€‚è€Œå¦‚æœæŒ‡å®šäº†ç›®æ ‡ç±»å‹ä¸º&amp;strï¼Œé‚£ä¹ˆå¯¹æ‰€æœ‰æƒå­—ç¬¦ä¸²sçš„å¼•ç”¨æ“ä½œï¼Œå°±è¿›ä¸€æ­¥è½¬æ¢æˆäº† <code>&amp;str</code> ç±»å‹ã€‚</p><p>äºæ˜¯åœ¨ä¸Šé¢çš„ <code>foo()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åªå®šä¹‰ä¸€ç§å‚æ•°ï¼Œå°±å¯ä»¥æ¥æ”¶ä¸¤ç§å…¥å‚ç±»å‹ï¼š<code>&amp;String</code> å’Œ <code>&amp;str</code>ã€‚è¿™è®©å‡½æ•°çš„è°ƒç”¨æ›´ç¬¦åˆç›´è§‰ï¼Œä½¿ç”¨æ›´æ–¹ä¾¿äº†ã€‚</p><p>å…·ä½“æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿéœ€è¦ç”¨åˆ°åé¢çš„çŸ¥è¯†ç‚¹ï¼šDerefã€‚ä½ å¯ä»¥æŸ¥é˜…<a href=\"https://doc.rust-lang.org/std/ops/trait.Deref.html\">é“¾æ¥</a>ï¼Œå­¦ä¹  Deref ç›¸å…³çŸ¥è¯†ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æš‚æ—¶å…ˆè·³è¿‡ï¼Œä¸åšè¿‡å¤šå±•å¼€ã€‚</p><p>åŒæ ·çš„åŸç†ï¼Œä¸ä»…å¯ä»¥ä½œç”¨åœ¨ <code>String</code> ä¸Šï¼Œä¹Ÿå¯ä»¥ä½œç”¨åœ¨ <code>Vec&lt;u8&gt;</code> ä¸Š ï¼Œæ›´è¿›ä¸€æ­¥çš„è¯ï¼Œè¿˜å¯ä»¥ä½œç”¨åœ¨ <code>Vec&lt;T&gt;</code> ä¸Šã€‚æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä¸€å¼ è¡¨æ ¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f9/35/f98b426412bf6b1aeea57e0f833edf35.png?wh=1704x516\" alt=\"\"></p><p>ä¸‹é¢çš„ç¤ºä¾‹è¡¨ç¤ºåŒä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥å— <code>&Vec&lt;u32&gt;</code> å’Œ <code>&[u32]</code> ä¸¤ç§ç±»å‹çš„ä¼ å…¥ã€‚</p><pre><code class=\"language-plain\">fn foo(s: &amp;[u32]) {\n}\n\nfn main() {\n  let v: Vec&lt;u32&gt; = vec![1,2,3,4,5];\n  foo(&amp;v);\n  let a_slice = v.as_slice();\n  foo(a_slice);\n}\n</code></pre><h3>å­—èŠ‚ä¸²è½¬æ¢æˆå­—ç¬¦ä¸²</h3><p>å‰é¢æˆ‘ä»¬çœ‹åˆ°å¯ä»¥é€šè¿‡ <code>as_bytes()</code> æ–¹æ³•å°†å­—ç¬¦ä¸²è½¬æ¢æˆ <code>&amp;[u8]</code>ã€‚ç›¸åçš„æ“ä½œä¹Ÿæ˜¯æœ‰çš„ï¼Œå°±æ˜¯æŠŠ <code>&amp;[u8]</code> è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚</p><p>å‰é¢æˆ‘ä»¬è®²è¿‡ï¼ŒRustä¸­çš„å­—ç¬¦ä¸²å®é™…æ˜¯ä¸€ä¸ªUTF-8åºåˆ—ï¼Œå› æ­¤è½¬æ¢çš„è¿‡ç¨‹ä¹Ÿæ˜¯ä¸UTF-8ç¼–ç ç›¸å…³çš„ã€‚å“ªäº›å‡½æ•°å¯ç”¨äºè½¬æ¢å‘¢ï¼Ÿ</p><ul>\n<li><a href=\"https://doc.rust-lang.org/std/string/struct.String.html#method.from_utf8\">String::from_utf8()</a> å¯ä»¥æŠŠ <code>Vec&lt;u8&gt;</code> è½¬æ¢æˆ <code>String</code>ï¼Œè½¬æ¢ä¸ä¸€å®šæˆåŠŸï¼Œå› ä¸ºä¸€ä¸ªå­—èŠ‚åºåˆ—ä¸ä¸€å®šæ˜¯æœ‰æ•ˆçš„UTF-8ç¼–ç åºåˆ—ã€‚å®ƒè¿”å›çš„æ˜¯Resultï¼ˆå…³äºResultï¼Œæˆ‘ä»¬åé¢ä¼šä¸“é¢˜è®²è§£ï¼Œè¿™é‡Œä»…åšäº†è§£ï¼‰ï¼Œéœ€è¦è‡ªè¡Œåšé”™è¯¯å¤„ç†ã€‚</li>\n<li>String::from_utf8_unchecked() å¯ä»¥æŠŠ <code>Vec&lt;u8&gt;</code> è½¬æ¢æˆ <code>String</code>ã€‚ä¸æ£€æŸ¥å­—èŠ‚åºåˆ—æ˜¯ä¸æ˜¯æ— æ•ˆçš„UTF-8ç¼–ç ï¼Œç›´æ¥è¿”å› <code>String</code> ç±»å‹ã€‚ä½†æ˜¯è¿™ä¸ªå‡½æ•°æ˜¯unsafeçš„ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨ã€‚</li>\n<li><a href=\"https://doc.rust-lang.org/std/str/fn.from_utf8.html\">str::from_utf8()</a> å¯ä»¥å°† <code>&amp;[u8]</code> è½¬æ¢æˆ <code>&amp;str</code>ã€‚å®ƒè¿”å›çš„æ˜¯Resultï¼Œéœ€è¦è‡ªè¡Œåšé”™è¯¯å¤„ç†ã€‚</li>\n<li>str::from_utf8_unchecked()å¯ä»¥æŠŠ <code>&amp;[u8]</code> è½¬æ¢æˆ <code>&amp;str</code>ã€‚å®ƒç›´æ¥è¿”å› <code>&amp;str</code> ç±»å‹ã€‚ä½†æ˜¯è¿™ä¸ªå‡½æ•°æ˜¯unsafeçš„ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨ã€‚</li>\n</ul><p>æ³¨æ„ <code>from_utf8</code> ç³»åˆ—å‡½æ•°ï¼Œè¿”å›çš„æ˜¯Resultã€‚æœ‰æ—¶å€™ä¼šè®©äººè§‰å¾—å¾ˆç¹çï¼Œä½†æ˜¯<strong>è¿™ç§ç¹çå®é™…æ˜¯å®¢è§‚å¤æ‚æ€§çš„ä½“ç°ï¼ŒRustçš„ä¸¥è°¨æ€§è¦æ±‚å¯¹è¿™ç§è½¬æ¢ä¸æˆåŠŸçš„æƒ…å†µåšä¸¥è‚ƒçš„è‡ªå®šä¹‰å¤„ç†ã€‚</strong>åè§‚å…¶ä»–è¯­è¨€ï¼Œå¯¹äºè¿™ç§è½¬æ¢ä¸æˆåŠŸçš„æƒ…å†µå¾€å¾€ç”¨ä¸€ç§å†…ç½®çš„ç­–ç•¥åšå¤„ç†ï¼Œè€Œæ— æ³•è‡ªå®šä¹‰ã€‚</p><h3>å­—ç¬¦ä¸²åˆ‡å‰²æˆå­—ç¬¦æ•°ç»„</h3><p><code>&amp;str</code> ç±»å‹æœ‰ä¸ª <code>chars()</code> å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿­ä»£å™¨æ˜¯ä¸€ç§é€šç”¨çš„æŠ½è±¡ï¼Œå°±æ˜¯ç”¨æ¥æŒ‰é¡ºåºå®‰å…¨è¿­ä»£çš„ï¼Œæˆ‘ä»¬åé¢ä¹Ÿä¼šè®²åˆ°è¿™ä¸ªæ¦‚å¿µã€‚é€šè¿‡è¿™ä¸ªè¿­ä»£å™¨ï¼Œå°±å¯ä»¥å–å‡º <code>char</code>ã€‚ä½ å¯ä»¥å…ˆäº†è§£å®ƒçš„ç”¨æ³•ã€‚</p><pre><code class=\"language-plain\">fn main() {\n&nbsp; &nbsp; let s = String::from(\"ä¸­å›½ä½ å¥½\");&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\n&nbsp; &nbsp; let char_vec: Vec&lt;char&gt; = s.chars().collect();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\n&nbsp; &nbsp; println!(\"{:?}\", char_vec);&nbsp;\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; for ch in s.chars() {\n&nbsp; &nbsp; &nbsp; &nbsp; println!(\"{:?}\", ch);&nbsp;\n&nbsp; &nbsp; }\n}\n</code></pre><p>è¾“å‡ºï¼š</p><pre><code class=\"language-plain\">['ä¸­', 'å›½', 'ä½ ', 'å¥½']\n'ä¸­'\n'å›½'\n'ä½ '\n'å¥½'\n</code></pre><h3>å…¶ä»–å­—ç¬¦ä¸²ç›¸å…³ç±»å‹</h3><p>æœ‰äº†å‰é¢çš„çŸ¥è¯†èƒŒæ™¯ã€‚æˆ‘ä»¬ç°åœ¨æ¥çœ‹è¿™äº›ä¸å­—ç¬¦ä¸²ç›¸å…³çš„ç±»å‹ï¼š<code>Path</code>ã€<code>PathBuf</code>ã€<code>OsStr</code>ã€<code>OsString</code>ã€<code>CStr</code>ã€<code>CString</code>ã€‚</p><p>å‰é¢æˆ‘ä»¬è®²è¿‡å…¶å®å®ƒä»¬åªæ˜¯å…·ä½“åœºæ™¯ä¸‹çš„å­—ç¬¦ä¸²è€Œå·²ã€‚ç›¸å¯¹äºæ™®é€šçš„ <code>String</code> æˆ– <code>&amp;str</code>ï¼Œå®ƒä»¬åªæ˜¯<strong>åŒ…å«äº†æ›´å¤šçš„ç‰¹å®šåœºæ™¯çš„ä¿¡æ¯</strong>ã€‚æ¯”å¦‚ <a href=\"https://doc.rust-lang.org/std/path/struct.Path.html\">Path</a> ç±»å‹ï¼Œå®ƒå°±è¦å¤„ç†è·¨å¹³å°çš„ç›®å½•åˆ†éš”ç¬¦ï¼ˆUnixä¸‹æ˜¯/ï¼ŒWindowsä¸‹æ˜¯\\ï¼‰ï¼Œä»¥åŠä¸€äº›å…¶ä»–ä¿¡æ¯ã€‚è€Œ <code>PathBuf</code> ä¸ <code>Path</code> çš„åŒºåˆ«å°±å¯¹åº”äº <code>String</code> ä¸ <code>str</code> çš„åŒºåˆ«ã€‚</p><p><code>OsStr</code> çš„å­˜åœ¨æ˜¯å› ä¸ºå„ä¸ªæ“ä½œç³»ç»Ÿå¹³å°ä¸Šçš„åŸç”Ÿå­—ç¬¦ä¸²å®šä¹‰å…¶å®æ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚Unixç³»ç»Ÿï¼ŒåŸç”Ÿå­—ç¬¦ä¸²æ˜¯ä»»æ„é0å­—èŠ‚åºåˆ—ï¼Œä¸è¿‡å¸¸å¸¸è§£é‡Šä¸ºUTF-8ç¼–ç ï¼›è€Œåœ¨Windowsä¸Šï¼ŒåŸç”Ÿå­—ç¬¦ä¸²å®šä¹‰ä¸ºä»»æ„é0å­—èŠ‚16ä½åºåˆ—ï¼Œæ­£å¸¸æƒ…å†µä¸‹è§£é‡Šä¸ºUTF-16ç¼–ç åºåˆ—ã€‚è€ŒRustè‡ªå¸¦çš„æ ‡å‡† <code>str</code> å®šä¹‰å’Œå®ƒä»¬éƒ½ä¸åŒï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥åŒ…å«0è¿™ä¸ªå­—èŠ‚çš„ä¸¥æ ¼UTF-8ç¼–ç åºåˆ—ã€‚åœ¨å¼€å‘å¹³å°ç›¸å…³çš„åº”ç”¨æ—¶ï¼Œå¾€å¾€éœ€è¦å¤„ç†è¿™ç§ç±»å‹è½¬æ¢çš„ç»†èŠ‚ï¼Œäºæ˜¯å°±æœ‰äº† <code>OsStr</code> ç±»å‹ã€‚è€Œ <code>OsString</code> ä¸ <code>OsStr</code> çš„å…³ç³»å¯¹åº”äº <code>String</code> ä¸ <code>str</code> çš„å…³ç³»ã€‚</p><p><code>CStr</code> æ˜¯Cè¯­è¨€é£æ ¼çš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä»¥0è¿™ä¸ªå­—èŠ‚ä½œç»“æŸç¬¦ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­ä¸èƒ½åŒ…å«0ã€‚å› ä¸ºRustè¦æ— ç¼é›†æˆCçš„èƒ½åŠ›ã€‚æ‰€ä»¥è¿™äº›ç±»å‹å‡ºç°åœ¨Rustä¸­å°±å¾ˆåˆç†äº†ã€‚è€Œ <code>CString</code> ä¸ <code>CStr</code> çš„å…³ç³»å°±å¯¹åº”äº <code>String</code> ä¸ <code>str</code> çš„å…³ç³»ã€‚</p><p>è¿™äº›å¹³å°ç»†èŠ‚çš„å¤„ç†ç›¸å½“ç¹çå’Œä¸“ä¸šï¼ŒRustæŠŠå·²å¤„ç†å¥½è¿™äº›ç»†èŠ‚çš„ç±»å‹æä¾›ç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å°±å¥½äº†ã€‚ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œä½ æ˜¯å¦è¿˜è§‰å¾—Cè¯­è¨€ä¸­å”¯ä¸€çš„ <code>char *</code> æ˜¯æ›´å¥½çš„è®¾è®¡å—ï¼Ÿ</p><p>è¿™äº›å­—ç¬¦ä¸²ç±»å‹ä½ ä¸ä¸€å®šè¦åœ¨ç°é˜¶æ®µå…¨éƒ¨æŒæ¡ï¼Œè¿™é‡Œä½ åªéœ€è¦ç†è§£Rustä¸­ä¸ºä»€ä¹ˆå­˜åœ¨è¿™äº›ç±»å‹ï¼Œè¿˜æœ‰è¿™äº›ç±»å‹ä¹‹é—´çš„å…³ç³»å°±å¯ä»¥äº†ã€‚åé¢æˆ‘ä»¬åœ¨ç”¨åˆ°å…·ä½“æŸä¸ªç±»å‹çš„æ—¶å€™å†æ·±å…¥ç ”ç©¶ï¼Œé‚£ä¸ªæ—¶å€™ç›¸ä¿¡ä½ ä¼šæŒæ¡å¾—æ›´å¿«ã€æ›´é€å½»ã€‚</p><h2>Parseæ–¹æ³•</h2><p><code>str</code> æœ‰ä¸€ä¸ª <a href=\"https://doc.rust-lang.org/std/primitive.str.html#method.parse\">parse() æ–¹æ³•</a>éå¸¸å¼ºå¤§ï¼Œå¯ä»¥ä»å­—ç¬¦ä¸²è½¬æ¢åˆ°ä»»æ„Rustç±»å‹ï¼Œåªè¦è¿™ä¸ªç±»å‹å®ç°äº† <code>FromStr</code> è¿™ä¸ªTraitï¼ˆTraitæ˜¯Rustä¸­ä¸€ä¸ªæå…¶é‡è¦çš„æ¦‚å¿µï¼Œåé¢æˆ‘ä»¬ä¼šè®²è¿°ï¼‰å³å¯ã€‚æŠŠå­—ç¬¦ä¸²è§£ææˆRustç±»å‹ï¼Œè‚¯å®šæœ‰ä¸æˆåŠŸçš„å¯èƒ½ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªResultï¼Œéœ€è¦è‡ªè¡Œå¤„ç†è§£æé”™è¯¯çš„æƒ…å†µã€‚ä¸‹é¢çš„ä»£ç ç¤ºä¾‹å±•ç¤ºäº†å­—ç¬¦ä¸²å¦‚ä½•è½¬æ¢åˆ°å„ç§ç±»å‹ï¼Œæˆ‘ä»¬å…ˆäº†è§£ï¼ŒçŸ¥é“å½¢å¼æ˜¯æ€æ ·çš„å°±å¯ä»¥äº†ã€‚</p><pre><code class=\"language-plain\">fn main() {\n&nbsp; &nbsp; let a = \"10\".parse::&lt;u32&gt;();\n    let aa: u32 = \"10\".parse().unwrap(); // è¿™ç§å†™æ³•ä¹Ÿå¾ˆå¸¸è§\n&nbsp; &nbsp; println!(\"{:?}\", a);\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; let a = \"10\".parse::&lt;f32&gt;();\n&nbsp; &nbsp; println!(\"{:?}\", a);\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; let a = \"4.2\".parse::&lt;f32&gt;();\n&nbsp; &nbsp; println!(\"{:?}\", a);\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; let a = \"true\".parse::&lt;bool&gt;();\n&nbsp; &nbsp; println!(\"{:?}\", a);\n\n&nbsp; &nbsp; let a = \"a\".parse::&lt;char&gt;();\n&nbsp; &nbsp; println!(\"{:?}\", a);\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; let a = \"192.168.1.100\".parse::&lt;std::net::IpAddr&gt;();\n&nbsp; &nbsp; println!(\"{:?}\", a);\n}\n</code></pre><p>ä½ å¯ä»¥çœ‹çœ‹å“ªäº›æ ‡å‡†åº“ç±»å‹å·²å®ç°äº† <a href=\"https://doc.rust-lang.org/std/str/trait.FromStr.html#implementors\">FromStr trait</a>ã€‚</p><p><code>parse()</code> å‡½æ•°å°±ç›¸å½“äºRustè¯­è¨€å†…ç½®çš„ç»Ÿä¸€çš„è§£æå™¨æ¥å£ï¼Œå¦‚æœä½ è‡ªå·±å®ç°çš„ç±»å‹éœ€è¦ä¸å­—ç¬¦ä¸²äº’ç›¸è½¬æ¢ï¼Œå°±å¯ä»¥è€ƒè™‘å®ç°è¿™ä¸ªæ¥å£ï¼Œè¿™æ ·çš„è¯å°±æ¯”è¾ƒèƒ½è¢«æ•´ä¸ªRustç¤¾åŒºæ¥å—ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„Ruståœ°é“é£æ ¼çš„ä½“ç°ã€‚</p><p>è€Œå¯¹äºæ›´å¤æ‚å’Œæ›´é€šç”¨çš„ä¸å­—ç¬¦ä¸²è½¬æ¢çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ›´å€¾å‘äºåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹æ¡ˆã€‚è¿™å—åœ¨Rustç”Ÿæ€ä¸­ä¹Ÿæœ‰æ ‡å‡†çš„æ–¹æ¡ˆâ€”â€”<a href=\"https://docs.rs/serde/1.0.174/serde/\">serde</a>ï¼Œå®ƒä½œä¸ºåºåˆ—åŒ–æ¡†æ¶ï¼Œå¯ä»¥æ”¯æŒå„ç§æ•°æ®æ ¼å¼åè®®ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ã€ç»Ÿä¸€ã€‚æˆ‘ä»¬ç›®å‰ä»…åšäº†è§£ã€‚</p><h2>å°ç»“</h2><p>å­¦ä¹ å®Œè¿™èŠ‚è¯¾çš„å†…å®¹ï¼Œä½ æœ‰æ²¡æœ‰è§‰å¾—Rustè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²å†…å®¹ç¡®å®å¾ˆä¸°å¯Œï¼Ÿç›¸æ¯”äºCè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²ï¼ŒRustæŠŠå­—ç¬¦ä¸²æŒ‰åœºæ™¯åˆ’åˆ†æˆäº†ä¸åŒçš„ç±»å‹ï¼Œæ¯ç§ç±»å‹éƒ½åŒ…å«æœ‰ä¸åŒçš„é¢å¤–ä¿¡æ¯ã€‚é€šè¿‡å°†ç ”ç©¶ç›®æ ‡ï¼ˆå­—ç¬¦ä¸²ï¼‰æŒ‰åœºæ™¯ç±»å‹åŒ–ï¼Œåœ¨ä»£ç ä¸­åŠ å…¥äº†æ›´å¤šçš„ä¿¡æ¯ï¼Œç»™Rustç¼–è¯‘å™¨è¿™ä¸ªAIåŠ©æ‰‹å–‚äº†æ›´å¤šçš„æ–™ï¼Œä»è€Œå¯ä»¥è®©ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬åšæ›´å¤šçš„æ ¡éªŒå’Œæ¨å¯¼çš„äº‹æƒ…ï¼Œæ¥ç¡®ä¿æˆ‘ä»¬ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œå¹¶å°½å¯èƒ½åšæ€§èƒ½ä¼˜åŒ–ã€‚</p><p>è¿™èŠ‚è¯¾æˆ‘ä»¬æåˆ°äº†ä¸€äº›æ–°çš„æ¦‚å¿µï¼Œæ¯”å¦‚è¿­ä»£å™¨ã€Traitç­‰ï¼Œä½ ä¸éœ€è¦ç°åœ¨å°±æŒæ¡ï¼Œå…ˆçŸ¥é“æœ‰è¿™ä¹ˆä¸ªä¸œè¥¿å°±å¯ä»¥äº†ï¼Œè¿™èŠ‚è¯¾ä½ çš„ä¸»è¦ä»»åŠ¡æœ‰ä¸‰ä¸ªã€‚</p><ol>\n<li>ç†Ÿæ‚‰Rustè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²çš„å„ç§ç±»å‹å½¢å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</li>\n<li>çŸ¥é“Rustè¯­è¨€ä¸­å­—ç¬¦ä¸²ç›¸å…³ç±»å‹çš„åŸºæœ¬è½¬æ¢æ–¹å¼æœ‰å“ªäº›ã€‚</li>\n<li>ä½“ä¼šåœ°é“çš„Rustä»£ç é£æ ¼ä»¥åŠå¯¹ç§°æ€§ã€‚</li>\n</ol><p>å­—ç¬¦ä¸²åœ¨Rustä»£ç ä¸­ä½¿ç”¨å¹¿æ³›ï¼Œå‡ ä¹ä¼šè´¯ç©¿æ•´ä¸ªè¯¾ç¨‹ã€‚è¯·ä½ ä¸€å®šå¤šåŠ ç»ƒä¹ ï¼Œç‰¢ç‰¢æŒæ¡å­—ç¬¦ä¸²ç›¸å…³ç±»å‹åœ¨ä¸åŒåœºæ™¯ä¸‹çš„è½¬æ¢ä»¥åŠä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/76/12/7638c19bc5c216c5yybd12bc49ac5912.jpg?wh=1890x1316\" alt=\"\"></p><h2>æ€è€ƒé¢˜</h2><p><code>chars</code> å‡½æ•°æ˜¯å®šä¹‰åœ¨ <code>str</code> ä¸Šçš„ï¼Œä¸ºä»€ä¹ˆ <code>String</code> ç±»å‹èƒ½ç›´æ¥è°ƒç”¨ <code>str</code> ä¸Šå®šä¹‰çš„æ–¹æ³•ï¼Ÿå®é™…ä¸Š <code>str</code> ä¸Šçš„æ‰€æœ‰æ–¹æ³•ï¼Œ<code>String</code> éƒ½èƒ½è°ƒç”¨ï¼Œè¯·é—®è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ æŠŠæ€è€ƒåçš„ç»“æœåˆ†äº«åˆ°è¯„è®ºåŒºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾çš„å†…å®¹åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","comments":[{"had_liked":false,"id":383098,"user_name":"ä¸€ä¸ªäººæ—…è¡Œ","can_delete":false,"product_type":"c1","uid":2555864,"ip_address":"åŒ—äº¬","ucode":"A708238B10B44B","user_header":"https://static001.geekbang.org/account/avatar/00/26/ff/d8/d48d6088.jpg","comment_is_top":false,"comment_ctime":1698403422,"is_pvip":false,"replies":[{"id":139546,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1698417903,"ip_address":"é‡åº†","comment_id":383098,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"1.Stringç±»å‹ä¸ºstructç±»å‹ï¼Œå®ç°äº†Derefç‰¹å¾ã€‚\n2.å½“Stringç±»å‹è°ƒç”¨charsæ–¹æ³•æ˜¯ï¼Œç¼–è¯‘å™¨ä¼šæ£€æŸ¥Stringç±»å‹æ˜¯å¦å®ç°äº†charsæ–¹æ³•ï¼Œæ£€æŸ¥é¡¹åŒ…æ‹¬selfï¼Œ&amp;selfï¼Œ&amp;mut self\n3.å¦‚æœéƒ½æ²¡æœ‰å®ç°charsæ–¹æ³•ï¼Œç¼–è¯‘å™¨åˆ™è°ƒç”¨derefæ–¹æ³•è§£å¼•ç”¨(æ™ºèƒ½æŒ‡é’ˆ)ï¼Œå¾—åˆ°strï¼Œæ­¤æ—¶ç¼–è¯‘å™¨æ‰ä¼šè°ƒç”¨charsæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è°ƒç”¨strå®ç°çš„æ‰€æœ‰æ–¹æ³•","like_count":37,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630437,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698417903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383227,"user_name":"eriklee","can_delete":false,"product_type":"c1","uid":2826132,"ip_address":"åŒ—äº¬","ucode":"6F755DB7C29DD6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIyhbzdkFM64Npva5ZKf4IPwhy6rDAX0L77QNESbalnXhnGKibcTbwtSaNC0hO6z0icO8DYI9Nf4xwg/132","comment_is_top":false,"comment_ctime":1698722665,"is_pvip":false,"replies":[{"id":139613,"content":"to_owned() æ˜¯æ›´é€šç”¨çš„ï¼Œç›®çš„å°±æ˜¯åœ¨åªèƒ½æ‹¿åˆ°å¼•ç”¨çš„æƒ…å†µä¸‹è·å¾—æ‰€æœ‰æƒï¼ˆé€šè¿‡å…‹éš†ä¸€ä»½èµ„æºï¼‰ã€‚to_string() å°±åªæ˜¯è½¬æˆå­—ç¬¦ä¸²è€Œå·²ï¼Œè¿™ä¸¤ä¸ªç”¨æ³•é‡å ï¼Œä½†æ˜¯ä¸å®Œå…¨ç›¸åŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1698806128,"ip_address":"é‡åº†","comment_id":383227,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"ä»€ä¹ˆæ—¶å€™ç”¨to_owned(),ä»€ä¹ˆæ—¶å€™ç”¨to_string()å‘¢ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630701,"discussion_content":"to_owned() æ˜¯æ›´é€šç”¨çš„ï¼Œç›®çš„å°±æ˜¯åœ¨åªèƒ½æ‹¿åˆ°å¼•ç”¨çš„æƒ…å†µä¸‹è·å¾—æ‰€æœ‰æƒï¼ˆé€šè¿‡å…‹éš†ä¸€ä»½èµ„æºï¼‰ã€‚to_string() å°±åªæ˜¯è½¬æˆå­—ç¬¦ä¸²è€Œå·²ï¼Œè¿™ä¸¤ä¸ªç”¨æ³•é‡å ï¼Œä½†æ˜¯ä¸å®Œå…¨ç›¸åŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698806129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1052528,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0f/70/cdef7a3d.jpg","nickname":"Joe Black","note":"","ucode":"21FE222A286445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":633395,"discussion_content":"to_owned()æ˜¯ä¸æ˜¯å„ç§æ•°æ®ç±»å‹éƒ½æœ‰ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702093452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":630701,"ip_address":"åŒ—äº¬","group_id":0},"score":633395,"extra":""}]}]},{"had_liked":false,"id":383286,"user_name":"plh","can_delete":false,"product_type":"c1","uid":1031828,"ip_address":"å››å·","ucode":"D79F2B87AC3AD2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erEHTaQDkWqEYib9iabib8rACYpSFBHTPFmgicUKaib79MB6VIxNwiajHUS8kYFEKCGOjpibf0dibhIjqhfzg/132","comment_is_top":false,"comment_ctime":1698815942,"is_pvip":false,"replies":[{"id":139634,"content":"å¾ˆæ£’çš„æ€è€ƒã€‚ç¬¬3ç‚¹ï¼Œä»åˆå­¦è€…ç†è§£çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸ªç±»å‹çš„è½¬æ¢ç¡®å®æ˜¯ â€œè‡ªåŠ¨â€ â€œéšå¼â€å®Œæˆçš„ï¼Œåªä¸è¿‡è¿™ä¸ªéšå¼ä¸æ˜¯è¯­è¨€å†…ç½®çš„ï¼Œè€Œæ˜¯åœ¨æ ‡å‡†åº“ä¸­é€šè¿‡Deref traitå®Œæˆçš„ã€‚è¿™æ ·å¤„ç†çš„åŸå› åœ¨äºï¼Œå¼•å…¥è‡ªåŠ¨å¼•ç”¨å’Œè§£å¼•ç”¨ï¼Œä¼šç»™åˆå­¦è€…å¸¦æ¥æ–°çš„ç†è§£è´Ÿæ‹…ã€‚å®˜æ–¹bookåœ¨è¿™ä¸ªé—®é¢˜ä¸Šå¤„ç†å¾—å¹¶ä¸å¥½ã€‚å¦å¤–ï¼Œrustä¸­å¹¶æ²¡æœ‰ç¦ç”¨ éšå¼ è¿™ä¸ªè¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1698846992,"ip_address":"é‡åº†","comment_id":383286,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"[æ€è€ƒé¢˜]: å®é™…ä¸Š str ä¸Šçš„æ‰€æœ‰æ–¹æ³•ï¼ŒString éƒ½èƒ½è°ƒç”¨.  è¿™ä¸ªåœ°æ–¹ å¯¹åˆå­¦è€…éœ€è¦ å¾ªåºæ¸è¿›åœ°ç†è§£:\n1. æœ€å¼€å§‹æ¥è§¦ å¼•ç”¨çš„æ¦‚å¿µæ˜¯ rust book ä¸­æ–‡ç‰ˆ ä¸­æœ‰å¥è¯, â€œè€Œæ›´æœ‰ç»éªŒçš„ Rustacean ä¼šç¼–å†™å‡ºç¤ºä¾‹ 4-9 ä¸­çš„ç­¾åâ€, ä½¿ç”¨çš„å‡½æ•° ç­¾å ä» &amp;String è½¬æ¢æˆ &amp;str, è§é“¾æ¥ https:&#47;&#47;kaisery.github.io&#47;trpl-zh-cn&#47;ch04-03-slices.html#%E5%AD%97%E7%AC%A6%E4%B8%B2-slice-%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0, å½“æ—¶è§‰å¾—å¾ˆç¥å¥‡, æ›´æœ‰ç»éªŒçš„ Rustacean, ä¸å°±æ˜¯ è‡ªå·±çš„å½“å‰ç›®æ ‡å—.\n2. éšç€ ç»§ç»­æ·±å…¥ä¸‹å», è‡ªç„¶æ¥è§¦åˆ°äº† Deref è¿ç®—ç¬¦, ä¹Ÿå°±æ˜¯è¿™ä¸ªåœ°æ–¹ è¿™ä¸ªåœ°æ–¹å®ç°ä¸Šä¼šè°ƒç”¨ s.defer() , è¿™ä¸ªåœ°æ–¹ å°±æ˜¯ä¸€ä¸ªæœ¬è´¨.\n3. Rust æ—¢ç„¶å¾ˆå—å¹¿å¤§ç¨‹åºå‘˜çš„æ¬¢è¿è¿˜æ˜¯æœ‰åŸå› çš„, æœ‰å¾ˆå¤šç¬¦åˆ &quot;äººä½“å·¥ç¨‹å­¦&quot;çš„ç‰¹æ€§, å…¶ä¸­å°±æœ‰ automatic referencing and dereferencing,  [è¿ç®—ç¬¦åˆ°å“ªå»äº†], è§é“¾æ¥ https:&#47;&#47;kaisery.github.io&#47;trpl-zh-cn&#47;ch05-03-method-syntax.html#--%E8%BF%90%E7%AE%97%E7%AC%A6%E5%88%B0%E5%93%AA%E5%8E%BB%E4%BA%86  \n4. æœ¬è¯¾çš„ [éšå¼å¼•ç”¨ç±»å‹è½¬æ¢], ä¸ªäººè§‰å¾— æœ‰ç‚¹ æ­§ä¹‰,å¯èƒ½ä¼šå¼•èµ·åç»­çš„éº»çƒ¦. é¦–å…ˆ Rust ä¸å…è®¸è‡ªåŠ¨ç±»å‹éšå¼è½¬æ¢,ä»è¿™ä¸ªè§’åº¦æ¥è¯´, Rust å°±å±äºå¼ºç±»å‹è¯­è¨€(ä»€ä¹ˆæ˜¯ å¼ºç±»å‹è¯­è¨€è¿™ä¸ªæ˜¯äº‰è®®çš„,å¯ä»¥æš‚æ—¶ä¸ç®¡).å…¶æ¬¡, å¦‚æœæ¢æˆ automatic referencing and dereferencing(è‡ªåŠ¨ å¼•ç”¨ å’Œè§£å¼•ç”¨) ,è¿™ä¸ªè¯´æ³• å°±æ›´ä¸¥è°¨ä¸€ç‚¹.\n\nä¸ªäººæ„šè§,æ¬¢è¿è€å¸ˆåŒå­¦æŒ‡æ­£.\n","like_count":4,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630756,"discussion_content":"å¾ˆæ£’çš„æ€è€ƒã€‚ç¬¬3ç‚¹ï¼Œä»åˆå­¦è€…ç†è§£çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸ªç±»å‹çš„è½¬æ¢ç¡®å®æ˜¯ â€œè‡ªåŠ¨â€ â€œéšå¼â€å®Œæˆçš„ï¼Œåªä¸è¿‡è¿™ä¸ªéšå¼ä¸æ˜¯è¯­è¨€å†…ç½®çš„ï¼Œè€Œæ˜¯åœ¨æ ‡å‡†åº“ä¸­é€šè¿‡Deref traitå®Œæˆçš„ã€‚è¿™æ ·å¤„ç†çš„åŸå› åœ¨äºï¼Œå¼•å…¥è‡ªåŠ¨å¼•ç”¨å’Œè§£å¼•ç”¨ï¼Œä¼šç»™åˆå­¦è€…å¸¦æ¥æ–°çš„ç†è§£è´Ÿæ‹…ã€‚å®˜æ–¹bookåœ¨è¿™ä¸ªé—®é¢˜ä¸Šå¤„ç†å¾—å¹¶ä¸å¥½ã€‚å¦å¤–ï¼Œrustä¸­å¹¶æ²¡æœ‰ç¦ç”¨ éšå¼ è¿™ä¸ªè¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698846992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383261,"user_name":"äºŒå¤•","can_delete":false,"product_type":"c1","uid":2907644,"ip_address":"æµ™æ±Ÿ","ucode":"2587A8DE51F629","user_header":"https://static001.geekbang.org/account/avatar/00/2c/5d/fc/2e5e2a90.jpg","comment_is_top":false,"comment_ctime":1698770200,"is_pvip":false,"replies":[{"id":139623,"content":"éå¸¸æ¸…æ™°ï¼ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1698806553,"ip_address":"é‡åº†","comment_id":383261,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"åœ¨ Rust ä¸­ï¼ŒString æ˜¯ä¸€ä¸ªå¯å˜çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œæ˜¯ç”¨ç»“æ„ä½“å®šä¹‰çš„ï¼Œè€Œä¸”å®ç°äº† Deref traitã€‚str æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å­—ç¬¦ä¸²åˆ‡ç‰‡ç±»å‹ã€‚å½“è°ƒç”¨ä¸€ä¸ª str ä¸Šçš„æ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡ Deref çš„è‡ªåŠ¨è½¬æ¢æœºåˆ¶ï¼ˆè§£å¼•ç”¨ï¼‰ï¼Œå°† String è½¬æ¢ä¸ºå¯¹åº”çš„ str åˆ‡ç‰‡ï¼Œä»è€Œå¯ä»¥è°ƒç”¨ str ä¸Šçš„æ–¹æ³•ã€‚","like_count":4,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630711,"discussion_content":"éå¸¸æ¸…æ™°ï¼ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698806553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385342,"user_name":"superggn","can_delete":false,"product_type":"c1","uid":3623568,"ip_address":"åŒ—äº¬","ucode":"831CCD98B393FE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7Q403U68Oy4lXG5sFBPVKLrfwaRzBqpBZibpEBXcPf9UOO3qrnh7RELoByTLzBZLkN9Nukfsj7DibynbZjKAKgag/132","comment_is_top":false,"comment_ctime":1702460179,"is_pvip":false,"replies":[{"id":140453,"content":"ğŸ‘çœŸæ£’","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1702609626,"ip_address":"é‡åº†","comment_id":385342,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"ç®€å•ç†è§£ï¼š æœ‰ä¸ªä¸œè¥¿å« deref coercion\nåœ¨ç±»å‹Aä¸Šè°ƒå‡½æ•°çš„æ—¶å€™å¦‚æœ typeA æœ‰å¯¹åº”æ–¹æ³•ï¼Œ ç›´æ¥è°ƒï¼›\nå¦‚æœæ²¡æœ‰å¯¹åº”æ–¹æ³•ï¼Œ å°±å¾€ä¸‹ç€ typeA æœ‰æ²¡æœ‰å®ç° deref\nå¦‚æœæ²¡å®ç°ï¼Œ GG\nå¦‚æœ typeA èƒ½ deref åˆ° typeRoot, é‚£ä¹ˆåœ¨ typeRoot é‡Œå¯»æ‰¾æœ‰æ²¡æœ‰å¯¹åº”æ–¹æ³•\nå¦‚æœ typeRoot é‡Œæ²¡æœ‰æ–¹æ³•ï¼Œ ç»§ç»­çœ‹ typeRoot é‡Œæœ‰æ²¡æœ‰å¯¹åº”æ–¹æ³•ï¼Œ é€’å½’å¾€ä¸‹èµ°","like_count":2,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633770,"discussion_content":"ğŸ‘çœŸæ£’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702609626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383973,"user_name":"Citroen","can_delete":false,"product_type":"c1","uid":2188563,"ip_address":"è¾½å®","ucode":"03017DB11EC537","user_header":"https://static001.geekbang.org/account/avatar/00/21/65/13/8654e7c9.jpg","comment_is_top":false,"comment_ctime":1700035596,"is_pvip":false,"replies":[{"id":140108,"content":"éå¸¸æ£’çš„æ€è€ƒï¼\n\n0. â€œRustä¸­charæ˜¯ç”¨äºå­˜æ”¾unicodeå•ä¸ªå­—ç¬¦çš„ç±»å‹ï¼ˆæœ€å¤šå››ä¸ªå­—èŠ‚ï¼‰ã€‚â€ã€‚Rustè¯­è¨€é‡Œé¢çš„charå°±æ˜¯å ç”¨4ä¸ªå­—èŠ‚ï¼Œå›ºå®šçš„ã€‚\n\n1. â€œç¨‹åºé‡Œçš„String[a..b],è¿™é‡Œçš„aå’Œbå·²ç»æ˜¯ç»è¿‡ç‰¹æ®Šå¤„ç†çš„ä¿è¯æˆªå–çš„æœ‰æ•ˆæ€§â€ã€‚å¯¹çš„ã€‚\nfn main() {\n    let s = &quot;abcdefghijk&quot;.to_string();\n    let a = &amp;s[..5];\n\n    let s = &quot;æˆ‘çˆ±ä¸­å›½&quot;.to_string();\n    let a = &amp;s[..5];\n}\n     Running `target&#47;debug&#47;playground`\nthread &#39;main&#39; panicked at src&#47;main.rs:7:15:\nbyte index 5 is not a char boundary; it is inside &#39;çˆ±&#39; (bytes 3..6) of `æˆ‘çˆ±ä¸­å›½`\n\n2. â€œæ‰€ä»¥strå’Œ&amp;stræ˜¯å®Œå…¨ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µâ€ã€‚å¯¹çš„ã€‚\n\n3. &quot;æ‰€ä»¥[u8; N]å¯ä»¥çœ‹åšæ˜¯ç¨‹åºçš„ä»»ä½•ç±»å‹æ•°æ®çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ã€‚&quot; ã€‚å¯¹çš„ã€‚\n\n4. â€œä¸ç®¡æ˜¯[T]ï¼Œ Vec&lt;T&gt;ï¼Œç”šè‡³Vec&lt;Vec&lt;Vec&lt;String&gt;&gt;&gt;åªè¦Vecå®ç°äº†Derefç‰¹æ€§éƒ½å¹¶ä¸”Vecä¸Šæ²¡æœ‰çš„ï¼Œéƒ½ä¼šå±‚å±‚è§£åˆ°æœ€åéœ€è¦çš„ç±»å‹çš„æ–¹æ³•ä¸Šã€‚â€ã€‚å¯¹çš„ï¼Œé€‚ç”¨äºä»»ä½•ç±»å‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1700192586,"ip_address":"é‡åº†","comment_id":383973,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"åŒè¿‡å­¦ä¹ æˆ‘ç†è§£çš„æ˜¯ä¸‹é¢è¿™æ ·ï¼Œæœ‰ä¸å¯¹è¯·è€å¸ˆæŒ‡æ­£ï¼Œè°¢è°¢ã€‚\nRustä¸­charæ˜¯ç”¨äºå­˜æ”¾unicodeå•ä¸ªå­—ç¬¦çš„ç±»å‹ï¼ˆæœ€å¤šå››ä¸ªå­—èŠ‚ï¼‰ã€‚\nStringç±»å‹åªèƒ½æ”¾åœ¨å †ä¸Šï¼Œé€šè¿‡å¼•ç”¨æ‰€æœ‰æƒçš„å½¢å¼å’Œå˜é‡ç»‘å®šï¼Œå®ƒçš„å­˜å‚¨æ–¹å¼ä¸æ˜¯ç®€å•çš„charæ•°ç»„ï¼Œè€Œæ˜¯utf8ç¼–ç çš„å­—èŠ‚åºåˆ—ï¼Œæ‰€ä»¥å•ç‹¬å–è¿™ä¸ªåºåˆ—çš„æŸä¸€æ®µåˆ‡ç‰‡ï¼Œä¸ä¸€å®šèƒ½è§£æå‡ºå…·ä½“çš„å­—ç¬¦ï¼ˆç¨‹åºé‡Œçš„String[a..b],è¿™é‡Œçš„aå’Œbå·²ç»æ˜¯ç»è¿‡ç‰¹æ®Šå¤„ç†çš„ä¿è¯æˆªå–çš„æœ‰æ•ˆæ€§ï¼‰ï¼Œå¦‚æœèƒ½å–å¾—æœ‰æ•ˆçš„åºåˆ—ç‰‡æ®µé‚£å°±æ˜¯strç±»å‹ï¼Œä½†æ˜¯ç¨‹åºé‡Œå‡¡æ˜¯ç”¨åˆ°ç»‘å®šstrç±»å‹å˜é‡çš„åœ°æ–¹ï¼Œåˆ™å¿…é¡»éƒ½æ˜¯å¼•ç”¨å½¢å¼å­˜åœ¨çš„ï¼ˆ&amp;strï¼‰ï¼Œå› ä¸ºstræ˜¯å¼•ç”¨çš„åŸå§‹ç‰‡æ®µçš„é‚£æ®µçœŸæ˜¯æ•°æ®ï¼Œè€Œ&amp;strç±»å‹æ˜¯ä¸€ä¸ªFatPointerï¼Œå®ƒåŒ…æ‹¬å¼•ç”¨ç›®æ ‡çš„èµ·å§‹åœ°å€å’Œé•¿åº¦ï¼Œæ‰€ä»¥strå’Œ&amp;stræ˜¯å®Œå…¨ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚\nu8å°±æ˜¯ä¸€ä¸ªå­˜å‚¨0åˆ°255å¤§å°çš„ç±»å‹ï¼Œå› ä¸ºä¸€ä¸ªå­—èŠ‚å°±æ˜¯8ä½ï¼Œæ‰€ä»¥[u8, N]å¯ä»¥çœ‹åšæ˜¯ç¨‹åºçš„ä»»ä½•ç±»å‹æ•°æ®çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ã€‚\nä¸ç®¡æ˜¯[T]ï¼Œ Vec&lt;T&gt;ï¼Œç”šè‡³Vec&lt;Vec&lt;Vec&lt;String&gt;&gt;&gt;åªè¦Vecå®ç°äº†Derefç‰¹æ€§éƒ½å¹¶ä¸”Vecä¸Šæ²¡æœ‰çš„ï¼Œéƒ½ä¼šå±‚å±‚è§£åˆ°æœ€åéœ€è¦çš„ç±»å‹çš„æ–¹æ³•ä¸Šã€‚","like_count":1,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631954,"discussion_content":"éå¸¸æ£’çš„æ€è€ƒï¼\n\n0. â€œRustä¸­charæ˜¯ç”¨äºå­˜æ”¾unicodeå•ä¸ªå­—ç¬¦çš„ç±»å‹ï¼ˆæœ€å¤šå››ä¸ªå­—èŠ‚ï¼‰ã€‚â€ã€‚Rustè¯­è¨€é‡Œé¢çš„charå°±æ˜¯å ç”¨4ä¸ªå­—èŠ‚ï¼Œå›ºå®šçš„ã€‚\n\n1. â€œç¨‹åºé‡Œçš„String[a..b],è¿™é‡Œçš„aå’Œbå·²ç»æ˜¯ç»è¿‡ç‰¹æ®Šå¤„ç†çš„ä¿è¯æˆªå–çš„æœ‰æ•ˆæ€§â€ã€‚å¯¹çš„ã€‚\nfn main() {\n    let s = &#34;abcdefghijk&#34;.to_string();\n    let a = &amp;s[..5];\n\n    let s = &#34;æˆ‘çˆ±ä¸­å›½&#34;.to_string();\n    let a = &amp;s[..5];\n}\n     Running `target/debug/playground`\nthread &#39;main&#39; panicked at src/main.rs:7:15:\nbyte index 5 is not a char boundary; it is inside &#39;çˆ±&#39; (bytes 3..6) of `æˆ‘çˆ±ä¸­å›½`\n\n2. â€œæ‰€ä»¥strå’Œ&amp;stræ˜¯å®Œå…¨ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µâ€ã€‚å¯¹çš„ã€‚\n\n3. &#34;æ‰€ä»¥[u8; N]å¯ä»¥çœ‹åšæ˜¯ç¨‹åºçš„ä»»ä½•ç±»å‹æ•°æ®çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ã€‚&#34; ã€‚å¯¹çš„ã€‚\n\n4. â€œä¸ç®¡æ˜¯[T]ï¼Œ Vec&lt;T&gt;ï¼Œç”šè‡³Vec&lt;Vec&lt;Vec&lt;String&gt;&gt;&gt;åªè¦Vecå®ç°äº†Derefç‰¹æ€§éƒ½å¹¶ä¸”Vecä¸Šæ²¡æœ‰çš„ï¼Œéƒ½ä¼šå±‚å±‚è§£åˆ°æœ€åéœ€è¦çš„ç±»å‹çš„æ–¹æ³•ä¸Šã€‚â€ã€‚å¯¹çš„ï¼Œé€‚ç”¨äºä»»ä½•ç±»å‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700192586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1560032,"avatar":"https://static001.geekbang.org/account/avatar/00/17/cd/e0/7ba3c15d.jpg","nickname":"Mango","note":"","ucode":"CCD3A91D69555D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633338,"discussion_content":"Deref å’Œ javaçš„ç»§æ‰¿ç±»ä¼¼ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702019939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383204,"user_name":"-HedonğŸ­","can_delete":false,"product_type":"c1","uid":3176234,"ip_address":"æ¹–åŒ—","ucode":"FAE541E7A2B88F","user_header":"https://static001.geekbang.org/account/avatar/00/30/77/2a/0cd4c373.jpg","comment_is_top":false,"comment_ctime":1698667826,"is_pvip":false,"replies":[{"id":139619,"content":"è¿™å¥è¯ä¸å¯¹ï¼šâ€œString ç±»å‹å®ç°äº† str ç±»å‹çš„ traitâ€ã€‚String é€šè¿‡å®ç°Deref traitï¼Œç›®æ ‡ä¸º strï¼Œå› æ­¤å¯ä»¥è°ƒç”¨ str ç±»å‹ä¸Šå®šä¹‰çš„æ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1698806483,"ip_address":"é‡åº†","comment_id":383204,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"æ€è€ƒé¢˜ï¼šåœ¨ Rust ä¸­ï¼Œtrait æ˜¯ä¸€ç§å®šä¹‰å…±äº«è¡Œä¸ºçš„æœºåˆ¶ã€‚å½“ä¸€ä¸ªç±»å‹å®ç°äº†æŸä¸ª traitï¼Œå®ƒå°±å¯ä»¥ä½¿ç”¨è¯¥ trait ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚String ç±»å‹å®ç°äº† str ç±»å‹çš„ traitï¼Œå› æ­¤å¯ä»¥è°ƒç”¨ str ç±»å‹ä¸Šå®šä¹‰çš„æ–¹æ³•ã€‚","like_count":1,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630707,"discussion_content":"è¿™å¥è¯ä¸å¯¹ï¼šâ€œString ç±»å‹å®ç°äº† str ç±»å‹çš„ traitâ€ã€‚String é€šè¿‡å®ç°Deref traitï¼Œç›®æ ‡ä¸º strï¼Œå› æ­¤å¯ä»¥è°ƒç”¨ str ç±»å‹ä¸Šå®šä¹‰çš„æ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698806483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383157,"user_name":"Lucas Lin","can_delete":false,"product_type":"c1","uid":1501889,"ip_address":"ä¸­å›½å°æ¹¾","ucode":"F8D9AFD70F9682","user_header":"https://static001.geekbang.org/account/avatar/00/16/ea/c1/d9cb2299.jpg","comment_is_top":false,"comment_ctime":1698579742,"is_pvip":false,"replies":[{"id":139585,"content":"è¿™ä¸ªå»ºè®®éå¸¸æ£’ï¼Œæˆ‘ç”»ä¸‹é¢éƒ¨åˆ†çš„æ—¶å€™ï¼Œæ²¡æœ‰æƒ³åˆ°è¿™ä¸€ç‚¹ã€‚è¿™æ ·æ›´ä¸¥è°¨ï¼Œæ„Ÿè°¢æŒ‡æ­£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1698676822,"ip_address":"é‡åº†","comment_id":383157,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"å¯¹ã€ŒStringã€&amp;Stringã€strã€&amp;strã€&amp;&#39;static str ä¹‹é—´çš„å…³ç³»å›¾ã€æœ‰ä¸ªç–‘é—®ã€‚&amp;&#39;static str å’Œ &amp;str éƒ½æ˜¯åˆ‡ç‰‡å¼•ç”¨ï¼Œé‚£ &amp;&#39;static str æ˜¯ä¸æ˜¯ä¹Ÿåº”è¯¥å’Œ &amp;str ä¸€æ ·æœ‰ä¸ªå¼•ç”¨èŒƒå›´çš„å›¾ç¤ºï¼ŸèŒƒå›´æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²(&quot;I am a superman.&quot;)ã€‚","like_count":1,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630580,"discussion_content":"è¿™ä¸ªå»ºè®®éå¸¸æ£’ï¼Œæˆ‘ç”»ä¸‹é¢éƒ¨åˆ†çš„æ—¶å€™ï¼Œæ²¡æœ‰æƒ³åˆ°è¿™ä¸€ç‚¹ã€‚è¿™æ ·æ›´ä¸¥è°¨ï¼Œæ„Ÿè°¢æŒ‡æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698676822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386765,"user_name":"èˆ’ç¿","can_delete":false,"product_type":"c1","uid":3813096,"ip_address":"å››å·","ucode":"98266B5188DD9E","user_header":"https://static001.geekbang.org/account/avatar/00/3a/2e/e8/9dc046af.jpg","comment_is_top":false,"comment_ctime":1705500291,"is_pvip":false,"replies":[{"id":141006,"content":"å“ªç‚¹è¦æ”¾å¼ƒï¼Ÿä½ å¦‚æœæ”¾å¼ƒäº†è¯´æ˜æˆ‘çš„è®²æ³•è¿˜éœ€è¦æ”¹è¿›ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1705546671,"ip_address":"é‡åº†","comment_id":386765,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"æ„Ÿè°¢è¯„è®ºåŒºå„ä½å¤§å“¥çš„å›å¤ï¼Œä¸ç„¶çœ‹äº†è¿™ç¯‡çœŸè¦ä»å…¥é—¨åˆ°æ”¾å¼ƒäº†","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636059,"discussion_content":"å“ªç‚¹è¦æ”¾å¼ƒï¼Ÿä½ å¦‚æœæ”¾å¼ƒäº†è¯´æ˜æˆ‘çš„è®²æ³•è¿˜éœ€è¦æ”¹è¿›ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705546671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":2,"child_discussions":[{"author":{"id":1390592,"avatar":"","nickname":"xiuuuuuu","note":"","ucode":"5F0787C682F9DE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":637628,"discussion_content":"è¿™éƒ¨åˆ†çŸ¥è¯†æœ¬æ¥å°±ç¹çï¼Œæ„Ÿè§‰å›¾å¯èƒ½ä¼šæ¯”æ–‡å­—å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708691038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":636059,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":637628,"extra":""},{"author":{"id":2337884,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ac/5c/bb67abe6.jpg","nickname":"æ—å­èŒ—","note":"","ucode":"59EDCECD54731F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":638564,"discussion_content":"ä¸»è¦æ˜¯æ€è€ƒé¢˜ä¸æ‡‚ï¼Œçœ‹äº†åˆ«äººçš„è¯„è®ºæ‰çŸ¥é“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709698122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":636059,"ip_address":"å¹¿ä¸œ","group_id":0},"score":638564,"extra":""}]}]},{"had_liked":false,"id":386725,"user_name":"é£äº†çš„é¸­å­è¢«ç…®äº†","can_delete":false,"product_type":"c1","uid":3813080,"ip_address":"ç¾å›½","ucode":"5781D69934D956","user_header":"https://static001.geekbang.org/account/avatar/00/3a/2e/d8/7beb49a4.jpg","comment_is_top":false,"comment_ctime":1705415850,"is_pvip":false,"replies":[{"id":141002,"content":"å®šä¹‰å˜é‡æ˜¯åœ¨æ ˆä¸Šçš„handleï¼Œå¿…é¡»æ˜¯å›ºå®šå°ºå¯¸çš„ï¼Œå› æ­¤è¦åŠ ä¸ª&amp;ç¬¦å·å–å¼•ç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1705478923,"ip_address":"é‡åº†","comment_id":386725,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"    let s = String::from(&quot;value&quot;);\n    let s2 = s[..];\nè¿™é‡Œå¦‚æœè¿™æ ·å£°æ˜ï¼Œä¼šæŠ¥é”™ï¼Œè¯´stræ²¡æœ‰å®ç°sizeï¼Œå¦‚æœåŠ äº†&amp;å°±æ²¡é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯è¯´æ˜ &amp; æŠŠ Stringçš„æ‰€æœ‰æƒå€Ÿç”¨è¿‡æ¥åï¼Œå¯¹äº str æ¥è¯´å°±èƒ½è·å–åˆ° sizeï¼Œä»è€Œä¸æŠ¥é”™äº†å‘¢","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636021,"discussion_content":"å®šä¹‰å˜é‡æ˜¯åœ¨æ ˆä¸Šçš„handleï¼Œå¿…é¡»æ˜¯å›ºå®šå°ºå¯¸çš„ï¼Œå› æ­¤è¦åŠ ä¸ª&amp;ç¬¦å·å–å¼•ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705478923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386686,"user_name":"é£äº†çš„é¸­å­è¢«ç…®äº†","can_delete":false,"product_type":"c1","uid":3813080,"ip_address":"ç¾å›½","ucode":"5781D69934D956","user_header":"https://static001.geekbang.org/account/avatar/00/3a/2e/d8/7beb49a4.jpg","comment_is_top":false,"comment_ctime":1705333079,"is_pvip":false,"replies":[{"id":140978,"content":"æœ‰é‚£ä¹ˆç‚¹æ„æ€åœ¨é‡Œé¢ã€‚ å¾€åç»§ç»­çœ‹çœ‹ï¼Œè°œåº•ä¼šæ­æ™“ã€‚ ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1705411034,"ip_address":"é‡åº†","comment_id":386686,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"ç›®å‰åªå­¦è¿‡jsï¼Œæ˜¯ä¸æ˜¯ç±»ä¼¼jsçš„åŸå‹é“¾ï¼Œæ€»ä¼šæ‰¾åˆ°ä¸€ä¸ªä¸ä¹‹å…³è”çš„å®ç°äº†çš„æ–¹æ³•å»æ‰§è¡Œ","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635969,"discussion_content":"æœ‰é‚£ä¹ˆç‚¹æ„æ€åœ¨é‡Œé¢ã€‚ å¾€åç»§ç»­çœ‹çœ‹ï¼Œè°œåº•ä¼šæ­æ™“ã€‚ ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705411034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384329,"user_name":"å°å¯çˆ±(`ã¸Â´*)ãƒ","can_delete":false,"product_type":"c1","uid":1016404,"ip_address":"å››å·","ucode":"E75189846F6616","user_header":"https://static001.geekbang.org/account/avatar/00/0f/82/54/b9cd3674.jpg","comment_is_top":false,"comment_ctime":1700703780,"is_pvip":false,"replies":[{"id":140233,"content":"ä¸æ˜¯ï¼Œç¬¬äºŒç§å†™æ³•å°±æ˜¯ç¬¬ä¸€ç§çš„ç®€å†™ã€‚å­—é¢é‡è¦to_string()ä¸€ä¸‹æ‰ä¼šåˆ†é…åˆ°å †ä¸Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1700708823,"ip_address":"é‡åº†","comment_id":384329,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"è¯·æ•™è€å¸ˆä¸‹ï¼Œlet a: &amp;â€™static str=â€œhelloâ€æ•°æ®æ˜¯åˆ†é…åœ¨é™æ€å†…å­˜åŒºåŸŸï¼Œlet b: &amp;str=â€œworldâ€æ˜¯åˆ†é…åœ¨å †ä¸Šï¼Œå¯ä»¥è¿™æ ·ç†è§£å—","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632363,"discussion_content":"ä¸æ˜¯ï¼Œç¬¬äºŒç§å†™æ³•å°±æ˜¯ç¬¬ä¸€ç§çš„ç®€å†™ã€‚å­—é¢é‡è¦to_string()ä¸€ä¸‹æ‰ä¼šåˆ†é…åˆ°å †ä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700708823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2176743,"avatar":"https://static001.geekbang.org/account/avatar/00/21/36/e7/87812eb1.jpg","nickname":"sun","note":"","ucode":"D9E38DCE79F791","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":653388,"discussion_content":"æ˜¯ç±»ä¼¼javaå­ç±»é‚£ç§åŒ…å«å…³ç³»å—ï¼Œè¡¨é¢çœ‹èµ·æ¥æ˜¯&amp;strï¼Œå®é™…è¿è¡Œæ—¶æ˜¯&amp;â€™staticï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1730802707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":632363,"ip_address":"å¹¿ä¸œ","group_id":0},"score":653388,"extra":""}]}]},{"had_liked":false,"id":383968,"user_name":"javpower","can_delete":false,"product_type":"c1","uid":1362777,"ip_address":"æ±Ÿè¥¿","ucode":"92867F35D11590","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ4reATXtqhQ26vWXhiaZUEF9W1E0ZEqibrxxzR7NrlGwjrCZeLvF2HnL8jFjGXaFtN1vBTSia6492g/132","comment_is_top":false,"comment_ctime":1700031753,"is_pvip":false,"replies":[{"id":140104,"content":"æ…¢æ…¢çœ‹ï¼Œä¸æ€¥ã€‚å¯ä»¥ç±»æ¯”ï¼Œä½†æ˜¯ä¸è¦è¿‡äºç±»æ¯”å“ˆï¼Œä¸ç„¶æœ‰å¯èƒ½ç»™è‡ªå·±ç”»åœ°ä¸ºç‰¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1700192045,"ip_address":"é‡åº†","comment_id":383968,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"æˆ‘è¿˜æ²¡çœ‹Traitéƒ¨åˆ†ï¼ŒæŒ‰ç…§ Java æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£æˆ\n\npublic class RustStr {\n    private  char[] value;\n\n    public RustStr(char[] value) {\n        this.value = value;\n    }\n    public int len() {\n        &#47;&#47; è¿”å›å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦\n        return value.length;\n    }\n    &#47;&#47;other......\n}\npublic  class RustString extends RustStr {\n    private  Vec&lt;u8&gt; value;\n\n    public RustString(){\n        &#47;&#47;todo: å¼ºåˆ¶å¤„ç†\n        char[] temp=convert(value);\n        super(temp);\n    }\n    &#47;&#47;otheræ–¹æ³•\n}\næ‰€ä»¥str ä¸Šçš„æ‰€æœ‰æ–¹æ³•ï¼ŒString éƒ½èƒ½è°ƒç”¨","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631950,"discussion_content":"æ…¢æ…¢çœ‹ï¼Œä¸æ€¥ã€‚å¯ä»¥ç±»æ¯”ï¼Œä½†æ˜¯ä¸è¦è¿‡äºç±»æ¯”å“ˆï¼Œä¸ç„¶æœ‰å¯èƒ½ç»™è‡ªå·±ç”»åœ°ä¸ºç‰¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700192045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383764,"user_name":"Ransang","can_delete":false,"product_type":"c1","uid":1133041,"ip_address":"ä¸Šæµ·","ucode":"DB67566A627DF2","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/f1/bd61dbb1.jpg","comment_is_top":false,"comment_ctime":1699588746,"is_pvip":false,"replies":[{"id":139959,"content":"å¥½é—®é¢˜ï¼Œ08ä¼šè®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699619584,"ip_address":"é‡åº†","comment_id":383764,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"è€å¸ˆ æ‚¨å¥½ï¼Œç¤ºä¾‹ä»£ç ä¸­parseæ–¹æ³•æ‰§è¡Œç»“æœæ˜¯Ok(10)ï¼ŒvsCodeæç¤ºçš„ç±»å‹æ˜¯Result&lt;u32, std::num::ParseIntError&gt;ï¼Œæ€ä¹ˆæŠŠè¿™ä¸ªu32çš„å€¼ç»™å–å‡ºæ¥å‘¢","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631500,"discussion_content":"å¥½é—®é¢˜ï¼Œ08ä¼šè®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699619584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383085,"user_name":"Geek_6fjt20","can_delete":false,"product_type":"c1","uid":1672482,"ip_address":"åŒ—äº¬","ucode":"B7EB9B061E2C06","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqrbHib1v0wPRVHxrFK2CPQQX8Wg3rRMPiaZ5teMKu5klT48yns6yo4krZsIqHskwdEsibVvQ3QB7CUQ/132","comment_is_top":false,"comment_ctime":1698396423,"is_pvip":false,"replies":[{"id":139548,"content":"String å®ç°äº†Derefï¼Œç›®æ ‡æ˜¯ str","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1698418202,"ip_address":"é‡åº†","comment_id":383085,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"Stringå’Œstråº”è¯¥ä¹Ÿå®ç°äº†åŒä¸€ä¸ªTraitäº†å§ï¼Œè°ƒç”¨æ–¹æ³•æ—¶å¯ä»¥ç›´æ¥è½¬æ¢","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630439,"discussion_content":"String å®ç°äº†Derefï¼Œç›®æ ‡æ˜¯ str","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698418203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383047,"user_name":"fu-stack","can_delete":false,"product_type":"c1","uid":1219080,"ip_address":"å¹¿ä¸œ","ucode":"0021374626241B","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/08/e0c9b414.jpg","comment_is_top":false,"comment_ctime":1698369307,"is_pvip":false,"replies":[{"id":139515,"content":"æ˜¯ä¸»æ’­ä»£å½•çš„éŸ³å“¦ï¼Œä¸»æ’­å‰æ®µæ—¶é—´æœ‰äº›æ„Ÿå†’ï¼Œåé¢ä¼šå¥½å¾ˆå¤šğŸ˜Š","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2843479,"ctime":1698372929,"ip_address":"åŒ—äº¬","comment_id":383047,"utype":2}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"è€å¸ˆæ„Ÿå†’äº†å—æˆ–è€…æœ‰é¼»ç‚ï¼Ÿæ„Ÿè§‰å¡ç€å—“å­è¯´è¯","like_count":0,"discussions":[{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630371,"discussion_content":"æ˜¯ä¸»æ’­ä»£å½•çš„éŸ³å“¦ï¼Œä¸»æ’­å‰æ®µæ—¶é—´æœ‰äº›æ„Ÿå†’ï¼Œåé¢ä¼šå¥½å¾ˆå¤šğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698372929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383046,"user_name":"c","can_delete":false,"product_type":"c1","uid":1199438,"ip_address":"åŒ—äº¬","ucode":"E1E383485EBF77","user_header":"https://static001.geekbang.org/account/avatar/00/12/4d/4e/5a20fe28.jpg","comment_is_top":false,"comment_ctime":1698368981,"is_pvip":false,"replies":[{"id":139513,"content":"åšæŒä½ï¼Œå“ªé‡Œæœ‰ç–‘é—®éšæ—¶æå“¦","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2843479,"ctime":1698372468,"ip_address":"åŒ—äº¬","comment_id":383046,"utype":2}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"æœç„¶ å·²ç»æ­¥å…¥æ”¾å¼ƒçš„é—¨æ§›äº†","like_count":0,"discussions":[{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630369,"discussion_content":"åšæŒä½ï¼Œå“ªé‡Œæœ‰ç–‘é—®éšæ—¶æå“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698372469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383044,"user_name":"å­¦æ°´","can_delete":false,"product_type":"c1","uid":2557688,"ip_address":"åŠ æ‹¿å¤§","ucode":"F8B27FD11187EC","user_header":"https://static001.geekbang.org/account/avatar/00/27/06/f8/09ad484b.jpg","comment_is_top":false,"comment_ctime":1698365089,"is_pvip":false,"replies":[{"id":139533,"content":"&amp;strä¸€èˆ¬éƒ½æ˜¯ä¸å¯å˜å¼•ç”¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1698388918,"ip_address":"é‡åº†","comment_id":383044,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"&amp;stræ˜¯Stringåˆ‡ç‰‡ç±»å‹å¼•ç”¨ï¼Œé‚£æœ¬èº«ä»–å’Œåˆ‡ç‰‡å¼•ç”¨ä¸€èˆ¬éƒ½åšä¸å¯å˜å¼•ç”¨å—","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630398,"discussion_content":"&amp;strä¸€èˆ¬éƒ½æ˜¯ä¸å¯å˜å¼•ç”¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698388918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383039,"user_name":"å•Šå•Šå•Šå•Š","can_delete":false,"product_type":"c1","uid":1786915,"ip_address":"åŒ—äº¬","ucode":"090E3983DD41A6","user_header":"https://static001.geekbang.org/account/avatar/00/1b/44/23/ebe7bd0f.jpg","comment_is_top":false,"comment_ctime":1698341101,"is_pvip":false,"replies":[{"id":139534,"content":"å¯¹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1698388929,"ip_address":"é‡åº†","comment_id":383039,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"åº”è¯¥æ˜¯å’Œ&amp;Stringèƒ½è¢«å½“åš&amp;strä½¿ç”¨çš„åŸå› ç±»ä¼¼ï¼Œç¼–è¯‘å™¨ä¼šæŒ‰ä¸€äº›è§„åˆ™å¯»æ‰¾Stringåˆ°&amp;strçš„è·¯å¾„ï¼Œè‡ªåŠ¨åŠ ä¸Šderefæ–¹æ³•è°ƒç”¨","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630399,"discussion_content":"å¯¹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698388929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2557688,"avatar":"https://static001.geekbang.org/account/avatar/00/27/06/f8/09ad484b.jpg","nickname":"å­¦æ°´","note":"","ucode":"F8B27FD11187EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630475,"discussion_content":"æ„Ÿè§‰æ˜¯ä¸æ˜¯å’Œjavaé‡Œé¢Integeråˆ°intè¿™ç§è‡ªåŠ¨æ‹†åŒ…æœ‰ç‚¹åƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698527687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŠ æ‹¿å¤§","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383446,"user_name":"Noya","can_delete":false,"product_type":"c1","uid":1519230,"ip_address":"æµ™æ±Ÿ","ucode":"52EEB72E80BAF8","user_header":"https://static001.geekbang.org/account/avatar/00/17/2e/7e/a15b477c.jpg","comment_is_top":false,"comment_ctime":1699055926,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"    &#47;&#47; æ€è€ƒé¢˜: chars å‡½æ•°æ˜¯å®šä¹‰åœ¨ str ä¸Šçš„ï¼Œä¸ºä»€ä¹ˆ String ç±»å‹èƒ½ç›´æ¥è°ƒç”¨ str ä¸Šå®šä¹‰çš„æ–¹æ³•ï¼Ÿ\n    &#47;&#47; å®é™…ä¸Š str ä¸Šçš„æ‰€æœ‰æ–¹æ³•ï¼ŒString éƒ½èƒ½è°ƒç”¨ï¼Œè¯·é—®è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n    println!(&quot;\\n***** æ€è€ƒé¢˜: chars å‡½æ•°æ˜¯å®šä¹‰åœ¨ str ä¸Šçš„ï¼Œä¸ºä»€ä¹ˆ String ç±»å‹èƒ½ç›´æ¥è°ƒç”¨ str ä¸Šå®šä¹‰çš„æ–¹æ³•ï¼Ÿ *****&quot;);\n    let s = String::from(&quot;ä½ å¥½Noah&quot;);\n    let _char_vec = s.chars().collect::&lt;Vec&lt;char&gt;&gt;();\n    &#47;&#47; s.chars() å¯ä»¥çœ‹æˆ (&amp;s).chars() -&gt; (&amp;String).chars()\n    &#47;&#47; å› ä¸º String å®ç°äº† Deref&lt;Target=str&gt; Trait, æ‰€ä»¥ String å¯ä»¥è°ƒç”¨ str ä¸Šçš„æ–¹æ³•\n    &#47;&#47; å…·ä½“æ“ä½œ: å¦‚æœStringè‡ªèº«æ²¡æœ‰æ–¹æ³•, rustä¼šé€šè¿‡Deref&lt;Target=str&gt; Trait, åœ¨strä¸ŠæŸ¥æ‰¾æ–¹æ³•\n    &#47;&#47; è‡ªå·±çš„ç†è§£: &amp;str åªæ˜¯å¯¹ String æ•°æ®çš„å¼•ç”¨, Stringæ˜¯ä¸€ä¸ªæ‰€æœ‰æƒå‹ç±»å‹, æ‰€ä»¥å¯ä»¥ç›´æ¥è°ƒç”¨ str ä¸Šçš„æ–¹æ³•","like_count":1},{"had_liked":false,"id":383445,"user_name":"Noya","can_delete":false,"product_type":"c1","uid":1519230,"ip_address":"æµ™æ±Ÿ","ucode":"52EEB72E80BAF8","user_header":"https://static001.geekbang.org/account/avatar/00/17/2e/7e/a15b477c.jpg","comment_is_top":false,"comment_ctime":1699054791,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"&#47;&#47; Note (by noah)\n&#47;&#47; str ä¸èƒ½ç›´æ¥ä½¿ç”¨,ä¸€èˆ¬æ˜¯é€šè¿‡ &amp;str æˆ–è€… String æ¥ä½¿ç”¨\n&#47;&#47; String &lt;-&gt; &amp;str || &amp;[u8]\n&#47;&#47;      String -&gt; &amp;str: &amp;s[..]\n&#47;&#47;      String -&gt; &amp;str: s.as_str()\n&#47;&#47;      String -&gt; &amp;[u8]: s.as_bytes()\n&#47;&#47;      &amp;str   -&gt; String: String::from(&amp;str)\n&#47;&#47;      &amp;str   -&gt; String: &amp;str.to_string()\n&#47;&#47;      &amp;str   -&gt; String: &amp;str.to_owned()\n&#47;&#47;      &amp;str   -&gt; &amp;[u8]: &amp;str.as_bytes()\n&#47;&#47;      &amp;[u8]  -&gt; String: String::from_utf8(&amp;[u8])\n&#47;&#47;      &amp;[u8]  -&gt; String: String::from_utf8_unchecked(&amp;[u8])\n&#47;&#47;      &amp;[u8]  -&gt; &amp;str: str::from_utf8(&amp;[u8])\n&#47;&#47;      &amp;[u8]  -&gt; &amp;str: str::from_utf8_unchecked(&amp;[u8])\n\n&#47;&#47; Vec&lt;T&gt; &lt;-&gt; &amp;[T]\n&#47;&#47;      Vec&lt;T&gt; -&gt; &amp;[T]: &amp;vec[..]\n&#47;&#47;      Vec&lt;T&gt; -&gt; &amp;[T]: vec.as_slice()\n&#47;&#47;      &amp;[T]   -&gt; Vec&lt;T&gt;: Vec::from(&amp;[T])\n&#47;&#47;      &amp;[T]   -&gt; Vec&lt;T&gt;: &amp;[T].to_vec()\n&#47;&#47;      &amp;[T]   -&gt; Vec&lt;T&gt;: &amp;[T].to_owned()\n\n&#47;&#47; Deref Trait (éšå¼å¼•ç”¨ç±»å‹è½¬æ¢)\n&#47;&#47;      &amp;String -&gt; &amp;str\n&#47;&#47;      &amp;Vec&lt;T&gt; -&gt; &amp;[T]\n\n&#47;&#47; å…¶ä»–å­—ç¬¦ä¸²ç±»å‹: Pathã€PathBufã€OsStrã€OsStringã€CStrã€CString\n\n&#47;&#47; Parse: str -&gt; T\n&#47;&#47; åªè¦Tå®ç°äº†FromStrè¿™ä¸ªTraitï¼Œå°±å¯ä»¥ä»å­—ç¬¦ä¸²è½¬æ¢åˆ°ä»»æ„Rustç±»å‹\n&#47;&#47;  let name = str.parse::&lt;T&gt;() -&gt; Result&lt;T, E&gt;\n&#47;&#47;  let name: Result&lt;T, E&gt; = str.parse()\n&#47;&#47; ä¸€èˆ¬ä½¿ç”¨unwarp()æ¥è·å–Tç±»å‹çš„å€¼\n\n&#47;&#47; åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹æ¡ˆ -&gt; serde","like_count":1},{"had_liked":false,"id":393093,"user_name":"Seven","can_delete":false,"product_type":"c1","uid":2403766,"ip_address":"å››å·","ucode":"37D99CF8535CDE","user_header":"https://static001.geekbang.org/account/avatar/00/24/ad/b6/a8caa2c7.jpg","comment_is_top":false,"comment_ctime":1722827260,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"chars å‡½æ•°æ˜¯å®šä¹‰åœ¨ str ä¸Šçš„ï¼Œä¸ºä»€ä¹ˆ String ç±»å‹èƒ½ç›´æ¥è°ƒç”¨ str ä¸Šå®šä¹‰çš„æ–¹æ³•ï¼Ÿå®é™…ä¸Š str ä¸Šçš„æ‰€æœ‰æ–¹æ³•ï¼ŒString éƒ½èƒ½è°ƒç”¨ï¼Œè¯·é—®è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\n1. String æ„Ÿè§‰æœ¬è´¨ä¸Šå’Œ str æ˜¯ä¸€ä¸ªèµ„æº\n2. ç»“åˆä¸Šä¸€èŠ‚è¯¾è¯´çš„ï¼Œ str æ˜¯ String çš„ä¸€ä¸ªå¼•ç”¨ï¼Œé‚£ä¹ˆ str å°±æ˜¯å€Ÿäº†è¿™ä¸ªèµ„æºçš„äººï¼Œä»–èƒ½å¯¹èµ„æºåšçš„äº‹ï¼Œèµ„æºæœ¬èº«çš„ä¸»äººå½“ç„¶èƒ½åšåŒæ ·çš„æ“ä½œ","like_count":0},{"had_liked":false,"id":392680,"user_name":"æˆ‘","can_delete":false,"product_type":"c1","uid":3541586,"ip_address":"å¹¿ä¸œ","ucode":"0893870E42AA8F","user_header":"https://static001.geekbang.org/account/avatar/00/36/0a/52/13b19797.jpg","comment_is_top":false,"comment_ctime":1721533960,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"â€œå­—ç¬¦ä¸²å­—é¢é‡é»˜è®¤ä¼šå­˜æ”¾åœ¨é™æ€æ•°æ®åŒºé‡Œï¼Œè€Œé™æ€æ•°æ®åŒºä¸­çš„å­—ç¬¦ä¸²æ€»æ˜¯è´¯ç©¿ç¨‹åºè¿è¡Œçš„æ•´ä¸ªç”Ÿå‘½æœŸï¼Œç›´åˆ°ç¨‹åºç»“æŸçš„æ—¶å€™æ‰ä¼šè¢«é‡Šæ”¾ã€‚å› æ­¤ä¸éœ€è¦æŸä¸€ä¸ªå˜é‡å¯¹å…¶æ‹¥æœ‰æ‰€æœ‰æƒï¼Œä¹Ÿæ²¡æœ‰å“ªä¸ªå˜é‡èƒ½å¤Ÿæ‹¥æœ‰è¿™ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰æƒï¼ˆä¹Ÿå°±æ˜¯è¿™ä¸ªèµ„æºçš„åˆ†é…è´£ä»»ï¼‰ã€‚å› æ­¤å¯¹äºå­—ç¬¦ä¸²å­—é¢é‡è¿™ç§æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬åªèƒ½æ‹¿åˆ°å®ƒçš„å€Ÿç”¨å½¢å¼ &amp;&#39;static strã€‚è¿™é‡Œ &#39;static è¡¨ç¤ºè¿™ä¸ªå¼•ç”¨å¯ä»¥è´¯ç©¿æ•´ä¸ªç¨‹åºçš„ç”Ÿå‘½æœŸï¼Œç›´åˆ°è¿™ä¸ªç¨‹åºè¿è¡Œç»“æŸã€‚â€----è¯·é—®è€å¸ˆï¼Œè¿™ä¸ªéœ€è¦è€ƒè™‘ä½œç”¨åŸŸå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":390146,"user_name":"Geek_db027f","can_delete":false,"product_type":"c1","uid":3875308,"ip_address":"åŒ—äº¬","ucode":"A5B267DE972735","user_header":"https://static001.geekbang.org/account/avatar/00/3b/21/ec/829edcfd.jpg","comment_is_top":false,"comment_ctime":1714466310,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"é—®é¢˜1ï¼š Stringé‡Œé¢å®ç°äº†æ–¹æ³•æ‰èƒ½ç”¨å§ã€‚è¦æ˜¯æ²¡å®ç°è‚¯å®šä¸èƒ½ç”¨ã€‚","like_count":0},{"had_liked":false,"id":383433,"user_name":"uyplayer","can_delete":false,"product_type":"c1","uid":2975298,"ip_address":"ä¸Šæµ·","ucode":"03ACCB446FBD3B","user_header":"https://static001.geekbang.org/account/avatar/00/2d/66/42/8a645285.jpg","comment_is_top":false,"comment_ctime":1699016105,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"fn main() {\n    let s: String = String::from(&quot;Hello, world! this is Rust&quot;);\n    let len = s.len(); \n    eprintln!(&quot;{len}&quot;);\n   \n    let s:&amp;str = &quot;Hello, world! this is Rust , call String method&quot;;\n    let len = s.len(); \n    eprintln!(&quot;{len}&quot;);    \n}\n\nç»“æœï¼š\n26\n47","like_count":0,"discussions":[{"author":{"id":1016404,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/82/54/b9cd3674.jpg","nickname":"å°å¯çˆ±(`ã¸Â´*)ãƒ","note":"","ucode":"E75189846F6616","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632339,"discussion_content":"è¯·æ•™è€å¸ˆä¸‹ï¼Œlet a: &amp;â€™static str=â€œhelloâ€æ•°æ®æ˜¯åˆ†é…åœ¨é™æ€å†…å­˜åŒºåŸŸï¼Œlet b: &amp;str=â€œworldâ€æ˜¯åˆ†é…åœ¨å †ä¸Šï¼Œå¯ä»¥è¿™æ ·ç†è§£å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700703749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}