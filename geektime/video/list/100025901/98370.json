{"id":98370,"title":"43 | iOS中的JSON解析","content":"<p><strong>PDF 课件和源代码下载地址：</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/geektime-ios-course\">https://gitee.com/geektime-geekbang/geektime-ios-course</a></p>","comments":[{"had_liked":false,"id":180380,"user_name":"zzzzzppppp","can_delete":false,"product_type":"c3","uid":1646974,"ip_address":"","ucode":"F729E7773AAD8E","user_header":"https://static001.geekbang.org/account/avatar/00/19/21/7e/3c305926.jpg","comment_is_top":false,"comment_ctime":1582271309,"is_pvip":false,"replies":[{"id":74574,"content":"对于xcode插件来说，应该有类似的比如ESJsonFormat-Xcode，https:&#47;&#47;github.com&#47;EnjoySR&#47;ESJsonFormat-Xcode 应该是你需要的插件。同时一般iOS中，常用第三方框架来进行model和json的互相转换，比如YYModel、JsonModel 、MJExtension、Mantle等等。","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1585374030,"ip_address":"","comment_id":180380,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"请问iOS开发中，有没有JSON转换的插件&#47;工具？像Android开发那样，可以根据json内容，直接生成  json.java  ，或者  json.kt \n 的文件。","like_count":2,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484637,"discussion_content":"对于xcode插件来说，应该有类似的比如ESJsonFormat-Xcode，https://github.com/EnjoySR/ESJsonFormat-Xcode 应该是你需要的插件。同时一般iOS中，常用第三方框架来进行model和json的互相转换，比如YYModel、JsonModel 、MJExtension、Mantle等等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585374030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1646974,"avatar":"https://static001.geekbang.org/account/avatar/00/19/21/7e/3c305926.jpg","nickname":"zzzzzppppp","note":"","ucode":"F729E7773AAD8E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220977,"discussion_content":"好的，非常感谢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585954593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186370,"user_name":"华哥506","can_delete":false,"product_type":"c3","uid":1876931,"ip_address":"","ucode":"5314BF42F25DA0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/txSaX2pa3CQ6m9cFRGda2JTlcMS53IbyQESz4EoIEAywHwBCH8WcZTymOSt4oSguSk5DQmISjR5KqZGBicfWw5g/132","comment_is_top":false,"comment_ctime":1583831269,"is_pvip":false,"replies":[{"id":74595,"content":"你的断点加到了id jsonObj = [NSJSONSerialization JSONObjectWithData:data options:0 error:&amp;jsonError];这一行，这个时候断点的话，这一行代码还没有执行，所以jsonObj这一个临时变量还没有被正确的赋值。如果你点击一下断点旁边的单步调试，让这行代码得到执行，就会看到jsonObj已经变成了Dictionary，或者你在这句代码下加一行代码，改下断点的位置即可。","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1585383112,"ip_address":"","comment_id":186370,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"id jsonObj = [NSJSONSerialization JSONObjectWithData:data options:0 error:&amp;jsonError];\n老师，我这里jsonObj的数据类型是NSMallocBlock，不是NSDictionary类型，请帮忙看下：\n&#47;&#47;1.创建Url,生成NSURL\n    NSString *urlString = @&quot;http:&#47;&#47;v.juhe.cn&#47;toutiao&#47;index?type=top&amp;key=97ad001bfcc2082e2eeaf798bad3d54e&quot;;\n    \n    NSURL *listUrl = [NSURL URLWithString:urlString];\n    \n    &#47;&#47;2.使用默认的session\n    NSURLSession *session = [NSURLSession sharedSession];\n    \n    &#47;&#47;在session中封装request到dataTask\n    &#47;&#47;3.创建dataTask并\n&#47;&#47;    NSURLSessionTask *dataTask = [session dataTaskWithRequest:listRequest];\n    NSURLSessionDataTask *dataTask = [session dataTaskWithURL:listUrl completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) {\n        NSError *jsonError;\n        id jsonObj = [NSJSONSerialization JSONObjectWithData:data options:0 error:&amp;jsonError];\n        \n    }];","like_count":1,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486731,"discussion_content":"你的断点加到了id jsonObj = [NSJSONSerialization JSONObjectWithData:data options:0 error:&amp;amp;jsonError];这一行，这个时候断点的话，这一行代码还没有执行，所以jsonObj这一个临时变量还没有被正确的赋值。如果你点击一下断点旁边的单步调试，让这行代码得到执行，就会看到jsonObj已经变成了Dictionary，或者你在这句代码下加一行代码，改下断点的位置即可。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585383112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184047,"user_name":"Geek_787812","can_delete":false,"product_type":"c3","uid":1813044,"ip_address":"","ucode":"2C9F7500388382","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6Ap0LbprYUBicsyFD0ZWEqQUSaCaksIZUgxGBUrmibpmMibkrqbk99S12LicWJiauYJkTjRnRYlem6GA/132","comment_is_top":false,"comment_ctime":1583211448,"is_pvip":false,"replies":[{"id":71756,"content":"这个不是个通用的问题，最好上传下代码或者列出下前后文哈，或者上传下代码之后发下链接，我这帮你看下","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1583671509,"ip_address":"","comment_id":184047,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"id jsonObj = [NSJSONSerialization JSONObjectWithData:data options:0 error:&amp;jsonError];\n老师，我这里jsonObj的数据类型是NSMallocBlock，不是NSDictionary类型，请问这是为什么呀","like_count":1,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485865,"discussion_content":"这个不是个通用的问题，最好上传下代码或者列出下前后文哈，或者上传下代码之后发下链接，我这帮你看下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583671509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263462,"user_name":"Sunny","can_delete":false,"product_type":"c3","uid":1097652,"ip_address":"","ucode":"3234A2143B14EE","user_header":"https://static001.geekbang.org/account/avatar/00/10/bf/b4/7e672b6d.jpg","comment_is_top":false,"comment_ctime":1606139384,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师，系统提供的方法处理不了包含特殊字符的json数据，有没有好的处理办法？\n后台返回的json数据的某些字段是加过密的，包好了一些特殊字符，用系统提供的方法解析不了。","like_count":0}]}