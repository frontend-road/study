{"id":89974,"title":"41 | 聊聊Flutter，面对层出不穷的新技术该如何跟进？","content":"<p>“天下苦秦久矣”，不管是H5、React Native，还是过去两年火热的小程序，这些跨平台方案在性能和稳定性上总让我们诟病不已。最明显的例子是React Native已经发布几年了，却一直还处在Beta阶段。</p><p>Flutter作为今年最火热的移动开发新技术，从我们首次看到Beta测试版，到2018年12月的1.0正式版，总共才经过了9个多月。Flutter在保持原生性能的前提下实现了跨平台开发，而且更是成为Google下一代操作系统Fuchsia的UI框架，为移动技术的未来发展提供了非常大的想象空间。</p><p>高性能、跨平台，而且更是作为Google下一个操作系统的重要部分，Flutter已经有这么多光环加身，那我们是否应该立刻投身这个浪潮之中呢？新的技术、新的框架每一年都在不断涌现，我们又应该如何跟进呢？</p><h2>Flutter的前世今生</h2><p>大部分所谓的“新技术”最终都会被遗忘在历史的长河中，面对新技术，我们首先需要持怀疑态度，在决定是否跟进之前，你需要了解它的方方面面。下面我们就一起来看看Flutter的前世今生。</p><p>Flutter的早期开发者Eric Seidel曾经参加过一个访谈<a href=\"https://www.youtube.com/watch?v=h7HOt3Jb1Ts\">What is Flutter</a>，在这个访谈中他谈到了当初为什么开发Flutter，以及Flutter的一些设计原则和方向。<br>\n﻿﻿<br>\n<img src=\"https://static001.geekbang.org/resource/image/ac/5c/aca58328ba1b4f1463d1b2b806c5ad5c.png?wh=1920*1061\" alt=\"\"></p><!-- [[[read_end]]] --><p>Eric Seidel和Flutter早期的几位开发人员都是来自Chrome团队，他们在排版和渲染方面具有非常丰富的经验。那为什么要去开发Flutter？一直以来他们都为浏览器的性能而感到沮丧，有一天他们决定跳出Web的范畴，在Chromium基础上通过删除大量的代码，抛弃Web的兼容性，竟然发现性能是之前的20倍。对此我也深有感触，最近半年也一直在做主App的Lite版本，安装包也从42MB降到8MB，通过删除大量的历史业务，性能比主包要好太多太多。</p><p>正如访谈中所说，Flutter是一个Google内部孵化多年的产品，从它开发之初到现在，一直秉承着两个最重要的设计原则：</p><ul>\n<li>\n<p><strong>性能至上</strong>。内置布局和渲染引擎，使用Skia通过GPU做光栅化。选择Dart语言作为开发语言，在发布正式版本时使用AOT编译，不再需要通过解析器解释执行或者JIT。并且支持Tree Shaking无用代码删除，减少发布包的体积。</p>\n</li>\n<li>\n<p><strong>效率至上</strong>。在开发阶段支持代码的<a href=\"https://juejin.im/post/5bc80ef7f265da0a857aa924\">Hot Reload</a>，实现秒级编译更新。重视开发工具链，从开发、调试、测试、性能分析都有完善的工具。内置Runtime实现真正的跨平台，一套代码可以同时生成Android/iOS应用，降低开发成本。</p>\n</li>\n</ul><p>那为什么要选择Dart语言？“Dart团队办公室离Flutter团队最近”肯定是其中的一个原因，但是Dart也为Flutter追求性能和效率的道路提供了大量的帮助，比如AOT编译、Tree Shaking、Hot Reload、多生代无锁垃圾回收等。正因为这些特性，Flutter在筛选了多种语言后，最终选择了Dart。这里也推荐你阅读<a href=\"https://hackernoon.com/why-flutter-uses-dart-dd635a054ebf\">Why Flutter Uses Dart</a>这篇文章。</p><p>总的来说，Flutter内置了布局和渲染引擎，使用Dart作为开发语言，采用React方式编写UI，支持一套代码在多端运行的框架。但是正如专栏前面所说的，大前端时代的核心诉求是跨平台和动态化，下面我们就一起来看看Flutter在这两方面的表现。</p><p><strong>1. Flutter的跨平台开发</strong></p><p>虽然React Native/Weex使用了系统原生UI组件，通过原生渲染的方式来提升渲染速度和UI流畅度，但是因为JS执行效率、JSBridge的通信代价等因素，性能依然存在瓶颈，而且我们也无法抹平不同系统的平台差异，因此这样的跨平台方案注定艰难。</p><p><img src=\"https://static001.geekbang.org/resource/image/64/09/64ee06b802ca55df19b8f1a30e422809.png?wh=1398*756\" alt=\"\"></p><p>正如Eric Seidel在访谈所说，Flutter是从浏览器引擎简化而来，无论是它的布局引擎（例如也是使用CSS Flexbox布局），还是渲染流水线的设计，都跟浏览器都有很多相似之处。但是它抛弃了浏览器沉重的历史包袱和Web的兼容性，实现了在保持性能的前提下的跨平台开发。</p><p>回想一下在专栏第37期<a href=\"https://time.geekbang.org/column/article/88442\">《工作三年半，移动开发转型手游开发》</a>中，我们还描述过另外一套内置Runtime的跨平台方案：<a href=\"https://github.com/cocos2d/cocos2d-x\">Cocos引擎</a>。</p><p><img src=\"https://static001.geekbang.org/resource/image/87/6f/87abff685ed21a61a5b1bf89da143f6f.png?wh=1920*953\" alt=\"\"></p><p>在我看来，Cocos和Unity这些游戏引擎才是最早并且成熟的跨平台框架，它们对性能的要求也更加苛刻。即使是“王者荣耀”和“吃鸡”这么复杂的游戏，我们也可以做得非常流畅。</p><p>Flutter和游戏引擎一样，也提供了一套自绘界面的UI Toolkit。游戏引擎虽然能实现跨平台开发，但它致力于服务更有“钱途”的游戏开发。游戏引擎对于App开发，特别是混合开发支持并不完善。</p><p>如下图所示，我们可以看到三种跨平台方案的对比，Flutter可以说是三者中最为轻量的。</p><p><img src=\"https://static001.geekbang.org/resource/image/a2/02/a297b66d9b4378679d384ef4fe378c02.jpg?wh=1206*616\" alt=\"\"></p><p><strong>2. Flutter的动态化实践</strong></p><p>在专栏第40期<a href=\"https://time.geekbang.org/column/article/89555\">《动态化实践，如何选择适合自己的方案》</a>中，我提到了一个观点：“相比跨平台能力，国内对大前端的动态化能力更加偏执”。</p><p>在性能、跨平台、动态性这个“铁三角”中，我们不能同时将三个都做到最优。如果Flutter在性能、跨平台和动态性都比浏览器更好，那就不会出现Flutter这个框架了，而是成为Chromium的一个跨时代版本。</p><p><img src=\"https://static001.geekbang.org/resource/image/b9/7b/b9288c3aedb11afe45957557b90f257b.png?wh=1488*782\" alt=\"\"></p><p>浏览器选择的是跨平台和动态性，而Flutter选择的就是性能和跨平台。Flutter正是牺牲了Web的动态性，使用Dart语言的AOT编译，使用只有5MB的轻量级引擎，才能实现浏览器做不到的高性能。Flutter的第一波受众是Android上使用Java、Kotlin，iOS上使用Objective-C、Swift的Native开发。未来Flutter是否能以此为突破口，进一步蚕食Web领域的份额，现在还不得而知。</p><p>那Flutter是否支持动态更新呢？由于编译成AOT代码，在iOS是绝对不可以动态更新的。对于Android，Flutter的动态更新能力其实Tinker就已经实现了。从官方的提供方案来看，其实也只是替换下面的变化文件，可以说是Tinker的简化版。</p><p><img src=\"https://static001.geekbang.org/resource/image/6a/9c/6a410383cadbaae7c8822dee6f455d9c.png?wh=816*606\" alt=\"\"></p><p>官方的动态修复方案可以说是非常鸡肋的，并且也是要求应用重启才能生效。如果同时修改了Native代码，这也是不支持的。</p><p>更进一步说，Flutter在Google Play上是否允许动态更新也是抱有疑问的。从Google Play上面的开发者政策中心<a href=\"https://play.google.com/intl/zh-CN_ALL/about/privacy-security-deception/malicious-behavior/\">规定</a>上看，在Google Play也是不允许动态更新可执行文件。</p><p><img src=\"https://static001.geekbang.org/resource/image/03/55/0369ac6b78069e2b5ea983bd1fa14d55.png?wh=1834*540\" alt=\"\"></p><p>从<a href=\"https://www.stephenw.cc/2018/07/30/flutter-compile-mode/\">《从Flutter的编译模式》</a>一文中，我们可以通过<code>flutter build apk --build-shared-library</code>将Dart代码编译成app.so。无论是libflutter.so，还是app.so（其实<code>vm_*</code>、<code>isolate_*</code>也是可执行文件）的动态更新，都违反了Google Play的政策。</p><p><img src=\"https://static001.geekbang.org/resource/image/85/99/8580a8da34098dc918e4cb7c7330c199.png?wh=734*622\" alt=\"\"></p><p>当然不排除Google为了推广Flutter，为它的动态更新开绿灯。最近我也在咨询Google Play的政策组，目前还没有收到答复，如果后续有进一步的结果，我也可以同步给各位同学。</p><p>总的来说，Flutter的动态化能力理论上只能通过JIT编译模式解决，但是这会带来性能和代码体积的巨大影响。当然，闲鱼也在探索一套Flutter的布局动态化方案，你可以参考文章<a href=\"https://mp.weixin.qq.com/s/N5ih-DY5TuKyn_a0P2mz0Q\">《Flutter动态化的方案对比及最佳实现》</a>。</p><h2>面对新技术，该如何选择</h2><p>通过上面的学习，我们总算对Flutter的方方面面都有所了解。可以说Flutter是一个性能和效率至上，但是动态化能力非常有限的框架。</p><p>目前<a href=\"https://www.yuque.com/xytech/flutter/tc8lha\">闲鱼App</a>、<a href=\"https://tech.meituan.com/2018/08/09/waimai-flutter-practice.html\">美团外卖</a>、<a href=\"https://mp.weixin.qq.com/s/-vyU1JQzdGLUmLGHRImIvg\">今日头条App</a>、<a href=\"https://mp.weixin.qq.com/s/7GSPvP_hOWCv64esLLc0iw\">爱奇艺开播助手</a>、<a href=\"http://mp.weixin.qq.com/s/a0in4DqB8Bay046knkRr1g\">网易新闻客户端</a>、京东<a href=\"https://mp.weixin.qq.com/s/UhfgfNEdogm7Busr0apAGQ\">JDFlutter</a>、<a href=\"https://mp.weixin.qq.com/s/WBnj_6sOonjR9XUnB-wZPA\">马蜂窝旅游App</a>，都分享过他们在使用Flutter的一些心得体会。如果有兴趣接入Flutter，非常推荐你认真看看前人的经验和教训。</p><p>无论是Flutter，还是其他新的技术，在抉择是否跟进的时候，我们需要考虑以下一些因素：</p><ul>\n<li>\n<p><strong>收益</strong>。接入新的技术或者框架，给我们带来什么收益，例如稳定性、性能、效率、安全性等方面的提升。</p>\n</li>\n<li>\n<p><strong>迁移成本</strong>。如果想得到新技术带来的收益，需要我们付出什么代价，例如新技术的学习成本、原来架构的改造成本等。</p>\n</li>\n<li>\n<p><strong>成熟度</strong>。简单来说，就是这个新技术是否靠谱。跟选择开源项目一样，团队规模、能力是否达标、对项目是否重视都是我们需要考虑的因素。</p>\n</li>\n<li>\n<p><strong>社区氛围</strong>。主要是看跟进这个技术的人够不够多、文档资料是否丰富、遇到问题能否得到帮助等。</p>\n</li>\n</ul><p><strong>1. 对于Flutter，我是怎么看的</strong></p><p>Flutter是一个非常有前景的技术，这一点是毋庸置疑的。我曾经专门做过一次全面的评估分析，但是得出的结论是暂时不会在我负责的应用中接入，主要原因如下。</p><p><img src=\"https://static001.geekbang.org/resource/image/23/ba/2316c956d3895fb2e4b2514a521e1bba.jpg?wh=1158*1160\" alt=\"\"></p><p>目前我还没有跟进Flutter的核心原因在于收益不够巨大，如果有足够大的收益，其他几个因素都不是问题。而我负责的应用目前使用H5、小程序作为跨平台和动态化方案，通过极致优化后性能基本可以符合要求。</p><p>从另外一方面来说，新技术的学习和引入，无论是对历史代码、架构，还是我们个人的知识体系，都是一次非常好的重构机会。我非常希望每过一段时间，可以引入一些新的东西，打破大家对现有架构的不满。</p><p>新的技术或多或少有很多不完善的地方，这是挑战，也是机会。通过克服一个又一个的困难和挑战，并且在过程中不断地总结和沉淀，我们最终可能还收获了团队成员技术和其他能力的成长。以闲鱼为例，他们在Flutter落地的同时，不仅将他们的经验总结成几十篇非常高质量的文章，而且也参加了QCon、GMTC等一些技术大会，同时开源了<a href=\"https://github.com/alibaba/fish-redux\">fish-redux</a>、<a href=\"https://github.com/alibaba/flutter_boost\">FlutterBoost</a>等几个开源库，Flutter也一下成为了闲鱼的技术品牌。</p><p>可以相信，在过去一年，闲鱼团队在共同攻坚Flutter一个又一个难题的过程中，无论是团队的士气还是团队技术和非技术上的能力，都会有非常大的进步。</p><p><strong>2. 对于Flutter，大家又是怎么看的</strong></p><p>由于我还并没有在实际项目中使用Flutter，所以在写今天的文章之前，我也请教了很多有实际应用经验的朋友，下面我们一起来看看他们对Flutter又是怎么看的。</p><p><img src=\"https://static001.geekbang.org/resource/image/49/14/49ca149bb073fcbd0dc3b06494ddad14.jpg?wh=750*4423\" alt=\"\"></p><h2>总结</h2><p>曾几何时，我们一直对Chromium庞大的代码无从入手。而Flutter是一个完整而且比WebKit简单很多的引擎，它内部涉及从CPU到GPU，从上层到硬件的一系列知识，源码中有非常多值得我们挖掘去学习和研究的地方。</p><p>未来Flutter应用在小程序中也是一个非常有趣的课题，我们可以直接使用或者参考Flutter实现一个小程序渲染引擎。这样还可以带来另外一个好处，一个功能（例如微信的“附近的餐厅”）在不成熟的时候可以先以小程序的方式尝试，等到这个功能稳定之后，我们又可以无成本地转化为应用内的代码。</p><p>Dart语言从2011年启动以来，一直想以高性能为卖点，试图取代JavaScript，但是长期以来在Google外部使用得并不多。那在Flutter这个契机下，它未来是否可以实现弯道超车呢？这件事给我最大的感触是，机会可能随时会出现，但是需要我们时刻准备好。</p><p>“打铁还需自身硬”，我们还是要坚持修炼内功。对于是否要学习Flutter，我的答案是“多说无益，实践至上”。</p><h2>课后作业</h2><p>对于Flutter，你有什么看法？你是否准备在你的应用中跟进？欢迎留言跟我和其他同学一起讨论。</p><p>Flutter作为今年最为火热的技术，里面有非常多的机遇，可以帮我们打造自己的技术品牌（例如撰写文章、参加技术会议、开源你的项目等）。对于Flutter的学习，你可以参考下面的一些资料。</p><ul>\n<li>\n<p>万物之中，<a href=\"https://github.com/flutter/flutter\">源码</a>最美</p>\n</li>\n<li>\n<p><a href=\"https://flutter.dev/docs\">Flutter官方文档</a></p>\n</li>\n<li>\n<p><a href=\"https://www.yuque.com/xytech/flutter\">闲鱼的Flutter相关文章</a></p>\n</li>\n<li>\n<p>各大应用的使用总结：<a href=\"https://www.yuque.com/xytech/flutter/tc8lha\">闲鱼App</a>、<a href=\"https://tech.meituan.com/2018/08/09/waimai-flutter-practice.html\">美团外卖</a>、<a href=\"https://mp.weixin.qq.com/s/-vyU1JQzdGLUmLGHRImIvg\">今日头条App</a>、<a href=\"https://mp.weixin.qq.com/s/7GSPvP_hOWCv64esLLc0iw\">爱奇艺开播助手</a>、<a href=\"http://mp.weixin.qq.com/s/a0in4DqB8Bay046knkRr1g\">网易新闻客户端</a>、京东<a href=\"https://mp.weixin.qq.com/s/UhfgfNEdogm7Busr0apAGQ\">JDFlutter</a>、<a href=\"https://mp.weixin.qq.com/s/WBnj_6sOonjR9XUnB-wZPA\">马蜂窝旅游App</a></p>\n</li>\n<li>\n<p>阿里Flutter开发者帮助App：<a href=\"https://github.com/alibaba/flutter-go\">flutter-go</a></p>\n</li>\n</ul><p>欢迎你点击“请朋友读”，把今天的内容分享给好友，邀请他一起学习。我也为认真思考、积极分享的同学准备了丰厚的“学习加油礼包”，期待与你一起切磋进步哦。</p><p></p>","neighbors":{"left":{"article_title":"40 | 动态化实践，如何选择适合自己的方案？","id":89555},"right":{"article_title":"42 | Android开发高手课学习心得","id":90167}},"comments":[{"had_liked":false,"id":85266,"user_name":"张绍文","can_delete":false,"product_type":"c1","uid":1009577,"ip_address":"","ucode":"94B49E5F80BFDE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","comment_is_top":true,"comment_ctime":1555029396,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"9.2233721286041006e+18","product_id":100021101,"comment_content":"字节跳动客户端基础技术负责人元硕招聘啦，有兴趣的高手们可以尝试一下，<br><br>字节跳动(今日头条)客户端，邮箱: zhuyuanshuo@bytedance.com","like_count":22},{"had_liked":false,"id":242006,"user_name":"飓风","can_delete":false,"product_type":"c1","uid":1006197,"ip_address":"","ucode":"18D4E8139CD7B7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5a/75/4e0d7419.jpg","comment_is_top":false,"comment_ctime":1597559998,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5892527294","product_id":100021101,"comment_content":"目前实现了三端Android，iOS，Flutter工程独立，开发Flutter的小伙伴切换为源码依赖，其他小伙伴切换为AAR，Framework依赖。打包脚本把iOS对Flutter的依赖产物放到CDN，脚本会自动扫描依赖的插件，打包业务Bundle到CDN，实现两端的自由开发。","like_count":2,"discussions":[{"author":{"id":1329765,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4a/65/f281f579.jpg","nickname":"大鹏鸟","note":"","ucode":"214EB13F730C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324096,"discussion_content":"问下你集成到native工程中，包体积大了多少啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605057148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163666,"user_name":"明妃","can_delete":false,"product_type":"c1","uid":1329283,"ip_address":"","ucode":"DC4672331FAA2C","user_header":"https://static001.geekbang.org/account/avatar/00/14/48/83/d19078dc.jpg","comment_is_top":false,"comment_ctime":1576763738,"is_pvip":false,"replies":[{"id":"66701","content":"客户端出身的话 flutter 在各大公司目前推广的还不错，可以先尝试一下","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1579083234,"ip_address":"","comment_id":163666,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5871731034","product_id":100021101,"comment_content":"张老师，从一年前购买您的专栏这么久了第一次评论，现在我有个很大的疑惑，我的目标始终是偏底层，可是现实中我却必须会一个跨平台开发的技术，帮助我更好的适应未来的潮流(因为我底层至今不知道如何入门)。最近我一直在纠结选择flutter还是rn，张老师能给点意见吗？谢谢您","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478496,"discussion_content":"客户端出身的话 flutter 在各大公司目前推广的还不错，可以先尝试一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579083234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84922,"user_name":"小小代码","can_delete":false,"product_type":"c1","uid":1290642,"ip_address":"","ucode":"F3D4E2C23FC9BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/b1/92/f3dabcb1.jpg","comment_is_top":false,"comment_ctime":1554945756,"is_pvip":false,"replies":[{"id":"30903","content":"Flutter的布局优势在于UI和数据的分离，不需要findView只需要更改数据即可更新界面，这块我觉得比较好，问题就是代码的可读性还是很差的，而且中途要做修改，需要变动的代码很多，而不是像Android那样只需要更改布局文件。","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1555301363,"ip_address":"","comment_id":84922,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5849913052","product_id":100021101,"comment_content":"最近也在学习Flutter，对没有像Android一样，将UI布局写成单独的XML文件，做到UI和逻辑的分离，用的很不爽","like_count":2,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446497,"discussion_content":"Flutter的布局优势在于UI和数据的分离，不需要findView只需要更改数据即可更新界面，这块我觉得比较好，问题就是代码的可读性还是很差的，而且中途要做修改，需要变动的代码很多，而不是像Android那样只需要更改布局文件。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555301363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1237782,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e3/16/550d2145.jpg","nickname":"咸平四年望帝遗心","note":"","ucode":"E8B0C145E9F40E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7980,"discussion_content":"习惯了就好,Flutter构建页面还是非常快的,数据和视图的分离感觉用起来也很清爽.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567746869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292230,"user_name":"文培定","can_delete":false,"product_type":"c1","uid":2382667,"ip_address":"","ucode":"A13E83C4FFDEBC","user_header":"","comment_is_top":false,"comment_ctime":1620729228,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620729228","product_id":100021101,"comment_content":"为啥我用Flutter开发的app，启动速度明显比原生的慢，白屏时间很明显。而且发现gongle在android中另外开发了一套compose UI，在内容上跟Flutter非常近似，感觉是Flutter要被抛弃了？","like_count":0},{"had_liked":false,"id":127358,"user_name":"秋水无痕","can_delete":false,"product_type":"c1","uid":1328707,"ip_address":"","ucode":"A3C3DF44426EBF","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/43/7545067a.jpg","comment_is_top":false,"comment_ctime":1566663895,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566663895","product_id":100021101,"comment_content":"没必要追新，那样很被动也很累感觉","like_count":0},{"had_liked":false,"id":118876,"user_name":"程序员小跃","can_delete":false,"product_type":"c1","uid":1015483,"ip_address":"","ucode":"25BB96E0791A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","comment_is_top":false,"comment_ctime":1564456389,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1564456389","product_id":100021101,"comment_content":"实践至上。项目组已经开始着手Flutter了，开干就完事","like_count":1},{"had_liked":false,"id":87313,"user_name":"CatTalk","can_delete":false,"product_type":"c1","uid":1057350,"ip_address":"","ucode":"353780AF4848D9","user_header":"https://static001.geekbang.org/account/avatar/00/10/22/46/df595e4a.jpg","comment_is_top":false,"comment_ctime":1555566179,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1555566179","product_id":100021101,"comment_content":"去年在团队引入，实现了结合当前插件加载框架，实现以插件的形式加载起来。实现了一个完整的Flutter业务插件。但苦于人力支持不足，灰度测试阶段，一直没上线...","like_count":0},{"had_liked":false,"id":85688,"user_name":"less","can_delete":false,"product_type":"c1","uid":1331439,"ip_address":"","ucode":"FCD47E9C93D598","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/ef/70bfc099.jpg","comment_is_top":false,"comment_ctime":1555194558,"is_pvip":false,"replies":[{"id":"31092","content":"加油","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555396407,"ip_address":"","comment_id":85688,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555194558","product_id":100021101,"comment_content":"多说无益.实践至上.跟邵文老师学习到现在.不仅获得了很多实实在在的干货.而且开了很多眼界.继续努力.向邵文老师学习.加油加油送给自己","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446766,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555396407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85139,"user_name":"HYM","can_delete":false,"product_type":"c1","uid":1054178,"ip_address":"","ucode":"4E82D9A285DAFF","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/e2/c21553c4.jpg","comment_is_top":false,"comment_ctime":1554987925,"is_pvip":false,"replies":[{"id":"31094","content":"是的，Flutter目前的确还没有非常完善，还需要官方和社区共同努力","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555396547,"ip_address":"","comment_id":85139,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554987925","product_id":100021101,"comment_content":"说说自己在实践中碰到的几个问题：<br>1、官方推出的混合开发方案侵入性较强，业内偏爱闲鱼的方案，但是要有hack精神、肯折腾。<br>2、对iOS的支持真心差，Flutter Engine的初始化和ViewController的创建有冲突，而且还有很多内存泄漏问题<br>3、图片加载问题比较多，除了文中提到的没有磁盘缓存外，还有就是内存缓存回收不及时导致内存占用很高，在iOS平台上问题尤为严重。<br>4、很多需要访问底层接口的功能仍然要借助插件来完成，这块会多很多工作量。<br><br>","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446571,"discussion_content":"是的，Flutter目前的确还没有非常完善，还需要官方和社区共同努力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555396547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84905,"user_name":"留白","can_delete":false,"product_type":"c1","uid":1328734,"ip_address":"","ucode":"5267C1F3889961","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/5e/c0ea1ffb.jpg","comment_is_top":false,"comment_ctime":1554944415,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554944415","product_id":100021101,"comment_content":"跟大佬们简单对比一下就深刻的认识到了自己的不足，接触flutter两个月时间，对其认知还是不够深入，得加把劲了","like_count":0},{"had_liked":false,"id":84866,"user_name":"seven","can_delete":false,"product_type":"c1","uid":1192785,"ip_address":"","ucode":"2E50D567420D65","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/51/9073faa5.jpg","comment_is_top":false,"comment_ctime":1554941687,"is_pvip":false,"replies":[{"id":"30798","content":"实践至上","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555169994,"ip_address":"","comment_id":84866,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554941687","product_id":100021101,"comment_content":"期待很久的文章！对于要不要学 flutter，多想无益，干就是了","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446475,"discussion_content":"实践至上","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555169994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}