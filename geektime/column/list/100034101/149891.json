{"id":149891,"title":"åŠ é¤ | æ±‡ç¼–ä»£ç ç¼–ç¨‹ä¸æ ˆå¸§ç®¡ç†","content":"<p>åœ¨<a href=\"https://time.geekbang.org/column/article/147854\">22è®²</a>ä¸­ï¼Œæˆ‘ä»¬ä¾§é‡è®²è§£äº†æ±‡ç¼–è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ„æˆå…ƒç´ ã€æ±‡ç¼–æŒ‡ä»¤å’Œæ±‡ç¼–è¯­è¨€ä¸­å¸¸ç”¨çš„å¯„å­˜å™¨ã€‚å­¦ä¹ å®ŒåŸºç¡€çŸ¥è¯†ä¹‹åï¼Œä½ è¦åšçš„å°±æ˜¯å¤šåŠ ç»ƒä¹ ï¼Œå’Œæ±‡ç¼–è¯­è¨€â€œæ··ç†Ÿâ€ã€‚å°çªé—¨æ˜¯æŸ¥çœ‹ç¼–è¯‘å™¨æ‰€ç”Ÿæˆçš„æ±‡ç¼–ä»£ç ï¼Œè·Ÿç€å­¦ä¹ ä½“ä¼šã€‚</p><p>ä¸è¿‡ï¼Œå¯èƒ½ä½ æ˜¯åˆæ¬¡ä½¿ç”¨æ±‡ç¼–è¯­è¨€ï¼Œå¯¹å¾ˆå¤šçŸ¥è¯†ç‚¹è¿˜ä¼šå­˜åœ¨ç–‘é—®ï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li>åœ¨æ±‡ç¼–è¯­è¨€é‡Œè°ƒç”¨å‡½æ•°ï¼ˆè¿‡ç¨‹ï¼‰æ—¶ï¼Œä¼ å‚å’Œè¿”å›å€¼æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</li>\n<li><a href=\"https://time.geekbang.org/column/article/146635\">21è®²</a>ä¸­è¿è¡ŒæœŸæœºåˆ¶æ‰€è®²çš„æ ˆå¸§ï¼Œå¦‚ä½•é€šè¿‡æ±‡ç¼–è¯­è¨€å®ç°ï¼Ÿ</li>\n<li>æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥å¦‚ä½•å®ç°ï¼Ÿ</li>\n<li>â€¦â€¦</li>\n</ul><p>ä¸ºæ­¤ï¼Œæˆ‘ç­–åˆ’äº†ä¸€æœŸåŠ é¤ï¼Œé’ˆå¯¹æ€§åœ°è®²è§£è¿™æ ·å‡ ä¸ªå®é™…åœºæ™¯ï¼Œå¸Œæœ›å¸®ä½ åŠ æ·±å¯¹æ±‡ç¼–è¯­è¨€çš„ç†è§£ã€‚</p><h2>ç¤ºä¾‹1ï¼šè¿‡ç¨‹è°ƒç”¨å’Œæ ˆå¸§</h2><p>è¿™ä¸ªä¾‹å­æ¶‰åŠäº†ä¸€ä¸ªè¿‡ç¨‹è°ƒç”¨ï¼ˆç›¸å½“äºCè¯­è¨€çš„å‡½æ•°è°ƒç”¨ï¼‰ã€‚è¿‡ç¨‹è°ƒç”¨æ˜¯æ±‡ç¼–ç¨‹åºä¸­çš„åŸºç¡€ç»“æ„ï¼Œå®ƒæ¶‰åŠåˆ°<strong>æ ˆå¸§çš„ç®¡ç†ã€å‚æ•°çš„ä¼ é€’</strong>è¿™ä¸¤ä¸ªå¾ˆé‡è¦çš„çŸ¥è¯†ç‚¹ã€‚</p><p>å‡è®¾æˆ‘ä»¬è¦å†™ä¸€ä¸ªæ±‡ç¼–ç¨‹åºï¼Œå®ç°ä¸‹é¢Cè¯­è¨€çš„åŠŸèƒ½ï¼š</p><pre><code>/*function-call1.c */\n#include &lt;stdio.h&gt;\nint fun1(int a, int b){\n    int c = 10;\n    return a+b+c;\n}\n\nint main(int argc, char *argv[]){\n    printf(&quot;fun1: %d\\n&quot;, fun1(1,2));\n    return 0;\n} \n</code></pre><p>fun1å‡½æ•°æ¥å—ä¸¤ä¸ªæ•´å‹çš„å‚æ•°ï¼šaå’Œbï¼Œæ¥çœ‹çœ‹è¿™ä¸¤ä¸ªå‚æ•°æ˜¯æ€æ ·è¢«ä¼ é€’è¿‡å»çš„ï¼Œæ‰‹å†™çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š</p><pre><code># function-call1-craft.s å‡½æ•°è°ƒç”¨å’Œå‚æ•°ä¼ é€’\n    # æ–‡æœ¬æ®µ,çº¯ä»£ç \n    .section    __TEXT,__text,regular,pure_instructions\n\n_fun1:\n    # å‡½æ•°è°ƒç”¨çš„åºæ›²,è®¾ç½®æ ˆæŒ‡é’ˆ\n    pushq   %rbp           # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§åº•éƒ¨åœ°å€ä¿å­˜èµ·æ¥   \n    movq    %rsp, %rbp     # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§é¡¶éƒ¨åœ°å€,è®¾ç½®ä¸ºæœ¬æ ˆå¸§çš„åº•éƒ¨\n\n    subq    $4, %rsp       # æ‰©å±•æ ˆ\n\n    movl    $10, -4(%rbp)  # å˜é‡cèµ‹å€¼ä¸º10ï¼Œä¹Ÿå¯ä»¥å†™æˆ movl $10, (%rsp)\n\n    # åšåŠ æ³•\n    movl    %edi, %eax     # ç¬¬ä¸€ä¸ªå‚æ•°æ”¾è¿›%eax\n    addl    %esi, %eax     # æŠŠç¬¬äºŒä¸ªå‚æ•°åŠ åˆ°%eax,%eaxåŒæ—¶ä¹Ÿæ˜¯å­˜æ”¾è¿”å›å€¼çš„å¯„å­˜å™¨\n    addl    -4(%rbp), %eax # åŠ ä¸Šcçš„å€¼\n\n    addq    $4, %rsp       # ç¼©å°æ ˆ\n\n    # å‡½æ•°è°ƒç”¨çš„å°¾å£°,æ¢å¤æ ˆæŒ‡é’ˆä¸ºåŸæ¥çš„å€¼\n    popq    %rbp           # æ¢å¤è°ƒç”¨è€…æ ˆå¸§çš„åº•éƒ¨æ•°å€¼\n    retq                   # è¿”å›\n\n    .globl  _main          # .globalä¼ªæŒ‡ä»¤è®©_mainå‡½æ•°å¤–éƒ¨å¯è§\n_main:                                  ## @main\n    \n    # å‡½æ•°è°ƒç”¨çš„åºæ›²,è®¾ç½®æ ˆæŒ‡é’ˆ\n    pushq   %rbp           # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§åº•éƒ¨åœ°å€ä¿å­˜èµ·æ¥  \n    movq    %rsp, %rbp     # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§é¡¶éƒ¨åœ°å€,è®¾ç½®ä¸ºæœ¬æ ˆå¸§çš„åº•éƒ¨\n    \n    # è®¾ç½®ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°,åˆ†åˆ«ä¸º1å’Œ2\n    movl    $1, %edi\n    movl    $2, %esi\n\n    callq   _fun1                # è°ƒç”¨å‡½æ•°\n\n    # ä¸ºpritfè®¾ç½®å‚æ•°\n    leaq    L_.str(%rip), %rdi   # ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²çš„åœ°å€\n    movl    %eax, %esi           # ç¬¬äºŒä¸ªå‚æ•°æ˜¯å‰ä¸€ä¸ªå‚æ•°çš„è¿”å›å€¼\n\n    callq   _printf              # è°ƒç”¨å‡½æ•°\n\n    # è®¾ç½®è¿”å›å€¼ã€‚è¿™å¥ä¹Ÿå¸¸ç”¨ xorl %esi, %esi è¿™æ ·çš„æŒ‡ä»¤,éƒ½æ˜¯ç½®ä¸ºé›¶\n    movl    $0, %eax\n    \n    # å‡½æ•°è°ƒç”¨çš„å°¾å£°,æ¢å¤æ ˆæŒ‡é’ˆä¸ºåŸæ¥çš„å€¼\n    popq    %rbp         # æ¢å¤è°ƒç”¨è€…æ ˆå¸§çš„åº•éƒ¨æ•°å€¼\n    retq                 # è¿”å›\n\n    # æ–‡æœ¬æ®µ,ä¿å­˜å­—ç¬¦ä¸²å­—é¢é‡                                  \n    .section    __TEXT,__cstring,cstring_literals\nL_.str:                                 ## @.str\n    .asciz  &quot;Hello World! :%d \\n&quot;\n</code></pre><p><strong>éœ€è¦æ³¨æ„ï¼Œ</strong>æ‰‹å†™çš„ä»£ç è·Ÿç¼–è¯‘å™¨ç”Ÿæˆçš„å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œä½†åŠŸèƒ½æ˜¯ç­‰ä»·çš„ï¼Œä»£ç é‡Œæœ‰è¯¦ç»†çš„æ³¨é‡Šï¼Œä½ è‚¯å®šèƒ½çœ‹æ˜ç™½ã€‚</p><p><strong>å€Ÿç”¨è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è®²ä¸€ä¸‹æ ˆçš„ç®¡ç†ã€‚</strong>åœ¨ç¤ºä¾‹ä»£ç çš„ä¸¤ä¸ªå‡½æ•°é‡Œï¼Œæœ‰è¿™æ ·çš„å›ºå®šç»“æ„ï¼š</p><!-- [[[read_end]]] --><pre><code> # å‡½æ•°è°ƒç”¨çš„åºæ›²,è®¾ç½®æ ˆæŒ‡é’ˆ\n    pushq\t%rbp\t     # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§åº•éƒ¨åœ°å€ä¿å­˜èµ·æ¥  \n    movq\t%rsp, %rbp   # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§é¡¶éƒ¨åœ°å€ï¼Œè®¾ç½®ä¸ºæœ¬æ ˆå¸§çš„åº•éƒ¨\n\n    ...\n\n    # å‡½æ•°è°ƒç”¨çš„å°¾å£°,æ¢å¤æ ˆæŒ‡é’ˆä¸ºåŸæ¥çš„å€¼\n    popq\t%rbp         # æ¢å¤è°ƒç”¨è€…æ ˆå¸§çš„åº•éƒ¨æ•°å€¼\n</code></pre><p>åœ¨Cè¯­è¨€ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œä¸€èˆ¬ç”¨%rbpå¯„å­˜å™¨æŒ‡å‘æ ˆå¸§çš„åº•éƒ¨ï¼Œè€Œ%rspåˆ™æŒ‡å‘æ ˆå¸§çš„é¡¶éƒ¨ã€‚<strong>æ ˆä¸»è¦æ˜¯é€šè¿‡pushå’Œpopè¿™å¯¹æŒ‡ä»¤æ¥ç®¡ç†çš„ï¼š</strong>pushæŠŠæ“ä½œæ•°å‹åˆ°æ ˆé‡Œï¼Œå¹¶è®©%rspæŒ‡å‘æ–°çš„æ ˆé¡¶ï¼ŒpopæŠŠæ ˆé¡¶æ•°æ®å–å‡ºæ¥ï¼ŒåŒæ—¶è°ƒæ•´%rspæŒ‡å‘æ–°çš„æ ˆé¡¶ã€‚</p><p>åœ¨è¿›å…¥å‡½æ•°çš„æ—¶å€™ï¼Œç”¨pushq %rbpæŒ‡ä»¤æŠŠè°ƒç”¨è€…çš„æ ˆå¸§åœ°å€å­˜èµ·æ¥ï¼ˆæ ¹æ®è°ƒç”¨çº¦å®šä¿æŠ¤èµ·æ¥ï¼‰ï¼Œè€ŒæŠŠè°ƒç”¨è€…çš„æ ˆé¡¶åœ°å€è®¾ç½®æˆè‡ªå·±çš„æ ˆåº•åœ°å€ï¼Œå®ƒç­‰ä»·äºä¸‹é¢ä¸¤æ¡æŒ‡ä»¤ï¼Œä½ å¯ä»¥ä¸ç”¨pushæŒ‡ä»¤ï¼Œè€Œæ˜¯è¿è¡Œä¸‹é¢ä¸¤æ¡æŒ‡ä»¤ï¼š</p><pre><code>subq $8, %rsp        #æŠŠ%rspçš„å€¼å‡8ï¼Œä¹Ÿå°±æ˜¯æ ˆå¢é•¿8ä¸ªå­—èŠ‚ï¼Œä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿\nmovq %rbp, (%rsp)    #æŠŠ%rbpçš„å€¼å†™åˆ°å½“å‰æ ˆé¡¶æŒ‡ç¤ºçš„å†…å­˜ä½ç½®\n</code></pre><p>è€Œåœ¨é€€å‡ºå‡½æ•°å‰ï¼Œè°ƒç”¨äº†popq %rbpæŒ‡ä»¤ã€‚å®ƒæ¢å¤äº†ä¹‹å‰ä¿å­˜çš„æ ˆæŒ‡é’ˆçš„åœ°å€ï¼Œç­‰ä»·äºä¸‹é¢ä¸¤æ¡æŒ‡ä»¤ï¼š</p><pre><code>movq (%rsp), %rbp    #æŠŠæ ˆé¡¶ä½ç½®çš„å€¼æ¢å¤å›%rbpï¼Œè¿™æ˜¯ä¹‹å‰ä¿å­˜åœ¨æ ˆé‡Œçš„å€¼ã€‚\naddq $8, %rsp        #æŠŠ%rspçš„å€¼åŠ 8ï¼Œä¹Ÿå°±æ˜¯æ ˆå‡å°‘8ä¸ªå­—èŠ‚\n</code></pre><p>ä¸Šè¿°è¿‡ç¨‹ç”»æˆä¸€å¼ ç›´è§‚çš„å›¾ï¼Œè¡¨ç¤ºå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/45/df/450388ce0b3189fbf263da402bc447df.jpg?wh=1142*562\" alt=\"\"></p><p>ä¸Šé¢æ¯å¥æŒ‡ä»¤æ‰§è¡Œä»¥åï¼Œæˆ‘ä»¬çœ‹çœ‹%rbpå’Œ%rspå€¼çš„å˜åŒ–ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/6a/1beeb1ded99922d15cc98e7cc3359a6a.jpg?wh=1142*576\" alt=\"\"></p><p>å†æ¥çœ‹çœ‹ä½¿ç”¨å±€éƒ¨å˜é‡çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p><pre><code>    subq    $4, %rsp       # æ‰©å±•æ ˆ\n\n    movl    $10, -4(%rbp)  # å˜é‡cèµ‹å€¼ä¸º10ï¼Œä¹Ÿå¯ä»¥å†™æˆ movl $10, (%rsp)\n\n    ...\n\n    addq    $4, %rsp       # ç¼©å°æ ˆ\n</code></pre><p>æˆ‘ä»¬é€šè¿‡å‡å°‘%rspçš„å€¼ï¼Œæ¥æ‰©å±•æ ˆï¼Œç„¶ååœ¨æ‰©å±•å‡ºæ¥çš„4ä¸ªå­—èŠ‚çš„ä½ç½®ä¸Šå†™å…¥æ•´æ•°ï¼Œè¿™å°±æ˜¯å˜é‡cçš„å€¼ã€‚åœ¨è¿”å›å‡½æ•°å‰ï¼Œæˆ‘ä»¬é€šè¿‡addq $4, %rspå†æŠŠæ ˆç¼©å°ã€‚è¿™ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/94/4a/94cf6dbfae7169f6ef01a09e804b7c4a.jpg?wh=1142*633\" alt=\"\"></p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç§»åŠ¨%rspæŒ‡é’ˆæ¥æ”¹å˜å¸§çš„å¤§å°ã€‚%rbpå’Œ%rspä¹‹é—´çš„ç©ºé—´å°±æ˜¯å½“å‰æ ˆå¸§ã€‚è€Œè¿‡ç¨‹è°ƒç”¨å’Œé€€å‡ºè¿‡ç¨‹ï¼Œåˆ†åˆ«ä½¿ç”¨callæŒ‡ä»¤å’ŒretæŒ‡ä»¤ã€‚â€œcallq  _fun1â€æ˜¯è°ƒç”¨_fun1è¿‡ç¨‹ï¼Œè¿™ä¸ªæŒ‡ä»¤ç›¸å½“äºä¸‹é¢ä¸¤å¥ä»£ç ï¼Œå®ƒç”¨åˆ°äº†æ ˆæ¥ä¿å­˜è¿”å›åœ°å€ï¼š</p><pre><code>pushq %rip  # ä¿å­˜ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œç”¨äºå‡½æ•°è¿”å›ç»§ç»­æ‰§è¡Œ\njmp _fun1   # è·³è½¬åˆ°å‡½æ•°_fun1\n</code></pre><p>_fun1å‡½æ•°ç”¨retæŒ‡ä»¤è¿”å›ï¼Œå®ƒç›¸å½“äºï¼š</p><pre><code>popq %rip   #æ¢å¤æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨\njmp %rip\n</code></pre><p>ä¸Šä¸€è®²ï¼Œæˆ‘æåˆ°ï¼Œåœ¨X86-64æ¶æ„ä¸‹ï¼Œæ–°çš„è§„èŒƒè®©ç¨‹åºå¯ä»¥è®¿é—®æ ˆé¡¶ä¹‹å¤–128å­—èŠ‚çš„å†…å­˜ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ç”šè‡³ä¸éœ€è¦é€šè¿‡æ”¹å˜%rspæ¥åˆ†é…æ ˆç©ºé—´ï¼Œè€Œæ˜¯ç›´æ¥ç”¨æ ˆé¡¶ä¹‹å¤–çš„ç©ºé—´ã€‚</p><p>ä¸Šé¢çš„ç¤ºä¾‹ç¨‹åºï¼Œä½ å¯ä»¥ç”¨aså‘½ä»¤ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºï¼Œè¿è¡Œä¸€ä¸‹çœ‹çœ‹ï¼Œç„¶åè¯•ç€åšä¸€ä¸‹ä¿®æ”¹ï¼Œé€æ­¥ç†Ÿæ‚‰æ±‡ç¼–ç¨‹åºçš„ç¼–å†™æ€è·¯ã€‚</p><h2>ç¤ºä¾‹2ï¼šåŒæ—¶ä½¿ç”¨å¯„å­˜å™¨å’Œæ ˆæ¥ä¼ å‚</h2><p>ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œå‡½æ•°ä¼ å‚åªä½¿ç”¨äº†ä¸¤ä¸ªå‚æ•°ï¼Œè¿™æ—¶æ˜¯é€šè¿‡ä¸¤ä¸ªå¯„å­˜å™¨ä¼ é€’å‚æ•°çš„ã€‚è¿™æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨8ä¸ªå‚æ•°ï¼Œæ¥çœ‹çœ‹é€šè¿‡å¯„å­˜å™¨å’Œæ ˆä¼ å‚è¿™ä¸¤ç§ä¸åŒçš„æœºåˆ¶ã€‚</p><p>åœ¨X86-64æ¶æ„ä¸‹ï¼Œæœ‰å¾ˆå¤šçš„å¯„å­˜å™¨ï¼Œæ‰€ä»¥ç¨‹åºè°ƒç”¨çº¦å®šä¸­è§„å®šå°½é‡é€šè¿‡å¯„å­˜å™¨æ¥ä¼ é€’å‚æ•°ï¼Œè€Œä¸”ï¼Œåªè¦å‚æ•°ä¸è¶…è¿‡6ä¸ªï¼Œéƒ½å¯ä»¥é€šè¿‡å¯„å­˜å™¨æ¥ä¼ å‚ï¼Œä½¿ç”¨çš„å¯„å­˜å™¨å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/4d/53/4d066afb9834f2a602bca2010e6edb53.jpg?wh=1142*509\" alt=\"\"></p><p>è¶…è¿‡6ä¸ªçš„å‚æ•°çš„è¯ï¼Œæˆ‘ä»¬è¦å†åŠ ä¸Šæ ˆæ¥ä¼ å‚ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/45/89/45587ab64c83ea52f9d1fd3fedc6b189.jpg?wh=1142*594\" alt=\"\"></p><p>æ ¹æ®ç¨‹åºè°ƒç”¨çº¦å®šçš„è§„å®šï¼Œå‚æ•°1ï½6æ˜¯æ”¾åœ¨å¯„å­˜å™¨é‡Œçš„ï¼Œå‚æ•°7å’Œ8æ˜¯æ”¾åˆ°æ ˆé‡Œçš„ï¼Œå…ˆæ”¾å‚æ•°8ï¼Œå†æ”¾å‚æ•°7ã€‚</p><p>åœ¨23è®²ï¼Œæˆ‘ä¼šå¸¦ä½ ä¸ºä¸‹é¢çš„ä¸€æ®µplayscriptç¨‹åºç”Ÿæˆæ±‡ç¼–ä»£ç ï¼š</p><pre><code>//asm.play\nint fun1(int x1, int x2, int x3, int x4, int x5, int x6, int x7, int x8){\n    int c = 10; \n    return x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + c;\n}\n\nprintln(&quot;fun1:&quot; + fun1(1,2,3,4,5,6,7,8));\n</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§è°ƒç”¨çº¦å®šï¼Œå…ˆæ‰‹å·¥ç¼–å†™ä¸€æ®µå®ç°ç›¸åŒåŠŸèƒ½çš„æ±‡ç¼–ä»£ç ï¼š</p><pre><code># function-call2-craft.s å‡½æ•°è°ƒç”¨å’Œå‚æ•°ä¼ é€’\n    # æ–‡æœ¬æ®µ,çº¯ä»£ç \n    .section    __TEXT,__text,regular,pure_instructions\n\n_fun1:\n    # å‡½æ•°è°ƒç”¨çš„åºæ›²,è®¾ç½®æ ˆæŒ‡é’ˆ\n    pushq   %rbp           # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§åº•éƒ¨åœ°å€ä¿å­˜èµ·æ¥   \n    movq    %rsp, %rbp     # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§é¡¶éƒ¨åœ°å€,è®¾ç½®ä¸ºæœ¬æ ˆå¸§çš„åº•éƒ¨\n\n    movl    $10, -4(%rbp)  # å˜é‡cèµ‹å€¼ä¸º10,ä¹Ÿå¯ä»¥å†™æˆ movl $10, (%rsp)\n\n    # åšåŠ æ³•\n    movl    %edi, %eax     # ç¬¬ä¸€ä¸ªå‚æ•°æ”¾è¿›%eax\n    addl    %esi, %eax     # åŠ å‚æ•°2\n    addl    %edx, %eax     # åŠ å‚æ•°3\n    addl    %ecx, %eax     # åŠ å‚æ•°4\n    addl    %r8d, %eax     # åŠ å‚æ•°5\n    addl    %r9d, %eax     # åŠ å‚æ•°6\n    addl    16(%rbp), %eax  # åŠ å‚æ•°7\n    addl    24(%rbp), %eax  # åŠ å‚æ•°8\n    \n    addl    -4(%rbp), %eax # åŠ ä¸Šcçš„å€¼\n\n    # å‡½æ•°è°ƒç”¨çš„å°¾å£°,æ¢å¤æ ˆæŒ‡é’ˆä¸ºåŸæ¥çš„å€¼\n    popq    %rbp           # æ¢å¤è°ƒç”¨è€…æ ˆå¸§çš„åº•éƒ¨æ•°å€¼\n    retq                   # è¿”å›\n\n    .globl  _main          # .globalä¼ªæŒ‡ä»¤è®©_mainå‡½æ•°å¤–éƒ¨å¯è§\n_main:                                  ## @main\n    \n    # å‡½æ•°è°ƒç”¨çš„åºæ›²,è®¾ç½®æ ˆæŒ‡é’ˆ\n    pushq   %rbp           # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§åº•éƒ¨åœ°å€ä¿å­˜èµ·æ¥  \n    movq    %rsp, %rbp     # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§é¡¶éƒ¨åœ°å€,è®¾ç½®ä¸ºæœ¬æ ˆå¸§çš„åº•éƒ¨\n    \n    subq    $16, %rsp      # è¿™é‡Œæ˜¯ä¸ºäº†è®©æ ˆå¸§16å­—èŠ‚å¯¹é½ï¼Œå®é™…ä½¿ç”¨å¯ä»¥æ›´å°‘\n\n    # è®¾ç½®å‚æ•°\n    movl    $1, %edi     # å‚æ•°1\n    movl    $2, %esi     # å‚æ•°2\n    movl    $3, %edx     # å‚æ•°3\n    movl    $4, %ecx     # å‚æ•°4\n    movl    $5, %r8d     # å‚æ•°5\n    movl    $6, %r9d     # å‚æ•°6\n    movl    $7, (%rsp)   # å‚æ•°7\n    movl    $8, 8(%rsp)  # å‚æ•°8\n\n    callq   _fun1                # è°ƒç”¨å‡½æ•°\n\n    # ä¸ºpritfè®¾ç½®å‚æ•°\n    leaq    L_.str(%rip), %rdi   # ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²çš„åœ°å€\n    movl    %eax, %esi           # ç¬¬äºŒä¸ªå‚æ•°æ˜¯å‰ä¸€ä¸ªå‚æ•°çš„è¿”å›å€¼\n\n    callq   _printf              # è°ƒç”¨å‡½æ•°\n\n    # è®¾ç½®è¿”å›å€¼ã€‚è¿™å¥ä¹Ÿå¸¸ç”¨ xorl %esi, %esi è¿™æ ·çš„æŒ‡ä»¤,éƒ½æ˜¯ç½®ä¸ºé›¶\n    movl    $0, %eax\n\n    addq    $16, %rsp    # ç¼©å°æ ˆ\n    \n    # å‡½æ•°è°ƒç”¨çš„å°¾å£°,æ¢å¤æ ˆæŒ‡é’ˆä¸ºåŸæ¥çš„å€¼\n    popq    %rbp         # æ¢å¤è°ƒç”¨è€…æ ˆå¸§çš„åº•éƒ¨æ•°å€¼\n    retq                 # è¿”å›\n\n    # æ–‡æœ¬æ®µ,ä¿å­˜å­—ç¬¦ä¸²å­—é¢é‡                                  \n    .section    __TEXT,__cstring,cstring_literals\nL_.str:                                 ## @.str\n    .asciz  &quot;fun1 :%d \\n&quot;\n</code></pre><p>ç”¨aså‘½ä»¤ï¼ŒæŠŠè¿™æ®µæ±‡ç¼–ä»£ç ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿è¡Œåä¼šè¾“å‡ºç»“æœï¼šâ€œfun1: 46â€ã€‚</p><pre><code>as functio-call2-craft.s -o function-call2\n./function-call2\n</code></pre><p>è¿™æ®µç¨‹åºè™½ç„¶æœ‰ç‚¹å„¿é•¿ï¼Œä½†æ€è·¯å¾ˆæ¸…æ™°ï¼Œæ¯”å¦‚ï¼Œæ¯ä¸ªå‡½æ•°ï¼ˆè¿‡ç¨‹ï¼‰éƒ½æœ‰å›ºå®šçš„ç»“æ„ã€‚7ï½10è¡Œï¼Œæˆ‘å«åšåºæ›²ï¼Œæ˜¯è®¾ç½®æ ˆå¸§çš„æŒ‡é’ˆï¼›25~26è¡Œï¼Œæˆ‘å«åšå°¾å£°ï¼Œæ˜¯æ¢å¤æ ˆåº•æŒ‡é’ˆå¹¶è¿”å›ï¼›13~22è¡Œæ˜¯åšä¸€äº›è®¡ç®—ï¼Œè¿˜è¦ä¸ºæœ¬åœ°å˜é‡åœ¨æ ˆé‡Œåˆ†é…ä¸€äº›ç©ºé—´ã€‚</p><p><strong>æˆ‘å»ºè®®ä½ è¯»ä»£ç çš„æ—¶å€™ï¼Œ</strong>å¯¹ç…§ç€æ¯è¡Œä»£ç çš„æ³¨é‡Šï¼Œå¼„æ¸…æ¥šè¿™æ¡ä»£ç æ‰€åšçš„æ“ä½œï¼Œä»¥åŠç›¸å…³çš„å¯„å­˜å™¨å’Œå†…å­˜ä¸­å€¼çš„å˜åŒ–ï¼Œè„‘æµ·é‡Œæœ‰æ ˆå¸§å’Œå¯„å­˜å™¨çš„ç›´è§‚çš„ç»“æ„ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£æ¸…æ¥šè¿™æ®µä»£ç äº†ã€‚</p><p>é™¤äº†å‡½æ•°è°ƒç”¨ä»¥å¤–ï¼Œæˆ‘ä»¬åœ¨ç¼–ç¨‹æ—¶ç»å¸¸ä½¿ç”¨å¾ªç¯è¯­å¥å’Œifè¯­å¥ï¼Œå®ƒä»¬è½¬æ¢æˆæ±‡ç¼–æ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹ï¼Œé¦–å…ˆçœ‹çœ‹whileå¾ªç¯è¯­å¥ã€‚</p><h2>ç¤ºä¾‹3ï¼šå¾ªç¯è¯­å¥çš„æ±‡ç¼–ç è§£æ</h2><p>çœ‹çœ‹ä¸‹é¢è¿™ä¸ªCè¯­è¨€çš„è¯­å¥ï¼š</p><pre><code>void fun1(int a){\n    while (a &lt; 10){\n        a++;\n    }\n}\n</code></pre><p>æˆ‘ä»¬è¦ä½¿ç”¨\"gcc -S ifstmt.c -o ifstmt.s\"å‘½ä»¤ï¼ŒæŠŠå®ƒè½¬æ¢æˆæ±‡ç¼–è¯­å¥ï¼ˆæ³¨æ„ä¸è¦å¸¦ä¼˜åŒ–å‚æ•°ï¼‰ï¼š</p><pre><code> .section    __TEXT,__text,regular,pure_instructions\n    .macosx_version_min 10, 15\n    .globl  _fun1                   ## -- Begin function fun1\n    .p2align    4, 0x90\n_fun1:                                  ## @fun1\n    .cfi_startproc\n## %bb.0:\n    pushq   %rbp\n    .cfi_def_cfa_offset 16\n    .cfi_offset %rbp, -16\n    movq    %rsp, %rbp\n    .cfi_def_cfa_register %rbp\n    movl    %edi, -4(%rbp)   #æŠŠå‚æ•°aæ”¾åˆ°æ ˆé‡Œ\nLBB0_1:                      ## =&gt;This Inner Loop Header: Depth=1\n    cmpl    $10, -4(%rbp)    #æ¯”è¾ƒå‚æ•°1å’Œç«‹å³æ•°10,è®¾ç½®eflagså¯„å­˜å™¨\n    jge LBB0_3               #å¦‚æœå¤§äºç­‰äºï¼Œåˆ™è·³è½¬åˆ°LBB0_3åŸºæœ¬å—\n## %bb.2:                    ##   in Loop: Header=BB0_1 Depth=1\n    movl    -4(%rbp), %eax   #è¿™2è¡Œï¼Œæ˜¯ç»™aåŠ 1\n    addl    $1, %eax\n    movl    %eax, -4(%rbp)\n    jmp LBB0_1\nLBB0_3:\n    popq    %rbp\n    retq\n    .cfi_endproc\n                                        ## -- End function\n\n.subsections_via_symbols\n</code></pre><p>è¿™æ®µä»£ç çš„15ã€16ã€21è¡Œæ˜¯å…³é”®ï¼Œæˆ‘è§£é‡Šä¸€ä¸‹ï¼š</p><ul>\n<li>ç¬¬15è¡Œï¼Œç”¨cmplæŒ‡ä»¤ï¼Œå°†%ediå¯„å­˜å™¨ä¸­çš„å‚æ•°1ï¼ˆå³Cä»£ç ä¸­çš„å‚æ•°aï¼‰å’Œç«‹å³æ•°10åšæ¯”è¾ƒï¼Œæ¯”è¾ƒçš„ç»“æœä¼šè®¾ç½®EFLAGSå¯„å­˜å™¨ä¸­çš„ç›¸å…³ä½ã€‚</li>\n</ul><p>EFLAGSä¸­æœ‰å¾ˆå¤šä½ï¼Œä¸‹å›¾æ˜¯<a href=\"https://software.intel.com/en-us/download/intel-64-and-ia-32-architectures-sdm-combined-volumes-1-2a-2b-2c-2d-3a-3b-3c-3d-and-4\">Intelå…¬å¸æ‰‹å†Œ</a>ä¸­å¯¹å„ä¸ªä½çš„è§£é‡Šï¼Œæœ‰çš„æŒ‡ä»¤ä¼šå½±å“è¿™äº›ä½çš„è®¾ç½®ï¼Œæ¯”å¦‚cmpæŒ‡ä»¤ï¼Œæœ‰çš„æŒ‡ä»¤ä¼šä»ä¸­è¯»å–ä¿¡æ¯ï¼Œæ¯”å¦‚16è¡Œçš„jgeæŒ‡ä»¤ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d7/46/d79cff3bef9e77f825ed9866c5dd1146.jpg?wh=1142*892\" alt=\"\"></p><ul>\n<li>\n<p>ç¬¬16è¡Œï¼ŒjgeæŒ‡ä»¤ã€‚jgeæ˜¯â€œjump if greater or equalâ€çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯å½“å¤§äºæˆ–ç­‰äºçš„æ—¶å€™å°±è·³è½¬ã€‚å¤§äºç­‰äºæ˜¯ä»å“ªçŸ¥é“çš„å‘¢ï¼Ÿå°±æ˜¯æ ¹æ®EFLAGSä¸­çš„æŸäº›ä½è®¡ç®—å‡ºæ¥çš„ã€‚</p>\n</li>\n<li>\n<p>ç¬¬21è¡Œï¼Œè·³è½¬åˆ°å¾ªç¯çš„å¼€å§‹ã€‚</p>\n</li>\n</ul><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†jmpï¼ˆæ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼‰å’Œjgeï¼ˆæ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼‰ä¸¤ä¸ªè·³è½¬æŒ‡ä»¤ã€‚æ¡ä»¶è·³è½¬æŒ‡ä»¤å¾ˆå¤šï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯åŸºäºEFLAGSçš„çŠ¶æ€ä½åšä¸åŒçš„è®¡ç®—ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³è·³è½¬æ¡ä»¶ï¼Œçœ‹çœ‹ä¸‹é¢è¿™å¼ è¡¨æ ¼ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ce/d5/ce52ac9632428550896ce20f958651d5.jpg?wh=1142*559\" alt=\"\"></p><p>è¡¨æ ¼ä¸­çš„è·³è½¬æŒ‡ä»¤ï¼Œæ˜¯åŸºäºæœ‰ç¬¦å·çš„æ•´æ•°è¿›è¡Œåˆ¤æ–­çš„ï¼Œå¯¹äºæ— ç¬¦å·æ•´æ•°ã€æµ®ç‚¹æ•°ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„è·³è½¬æŒ‡ä»¤ã€‚ç°åœ¨ä½ åº”è¯¥ä½“ä¼šåˆ°ï¼Œæ±‡ç¼–æŒ‡ä»¤ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šäº†ã€‚<strong>å¥½åœ¨å…¶åŠ©è®°ç¬¦éƒ½æ˜¯æœ‰è§„å¾‹çš„ï¼Œå¯ä»¥çœ‹åšè‹±æ–‡ç¼©å†™ï¼Œæ‰€ä»¥è¿˜æ¯”è¾ƒå®¹æ˜“ç†è§£å…¶å«ä¹‰ã€‚</strong></p><p><strong>å¦å¤–æˆ‘å†å¼ºè°ƒä¸€ä¸‹ï¼Œ</strong>åˆšåˆšæˆ‘è®©ä½ ç”Ÿæˆæ±‡ç¼–æ—¶ï¼Œä¸è¦å¸¦ä¼˜åŒ–å‚æ•°ï¼Œé‚£æ˜¯å› ä¸ºä¼˜åŒ–ç®—æ³•å¾ˆâ€œèªæ˜â€ï¼Œå®ƒçŸ¥é“è¿™ä¸ªå¾ªç¯è¯­å¥å¯¹å‡½æ•°æœ€ç»ˆçš„è®¡ç®—ç»“æœæ²¡ä»€ä¹ˆç”¨ï¼Œå°±ä¼˜åŒ–æ‰äº†ã€‚åé¢å­¦ä¼˜åŒ–ç®—æ³•æ—¶ï¼Œä½ ä¼šç†è§£è¿™ç§ä¼˜åŒ–æœºåˆ¶ã€‚</p><p>ä¸è¿‡è¿™æ ·åšï¼Œä¹Ÿä¼šæœ‰ä¸€ä¸ªä¸å¥½çš„å½±å“ï¼Œå°±æ˜¯ä»£ç ä¸å¤Ÿä¼˜åŒ–ã€‚æ¯”å¦‚è¿™æ®µä»£ç æŠŠå‚æ•°1æ‹·è´åˆ°äº†æ ˆé‡Œï¼Œåœ¨æ ˆé‡Œåšè¿ç®—ï¼Œè€Œä¸æ˜¯ç›´æ¥åŸºäºå¯„å­˜å™¨åšè¿ç®—ï¼Œè¿™æ ·æ€§èƒ½ä¼šä½å¾ˆå¤šï¼Œè¿™æ˜¯æ²¡æœ‰åšå¯„å­˜å™¨ä¼˜åŒ–çš„ç»“æœã€‚</p><h2>ç¤ºä¾‹4ï¼šifè¯­å¥çš„æ±‡ç¼–ç è§£æ</h2><p>å¾ªç¯è¯­å¥çœ‹è¿‡äº†ï¼Œifè¯­å¥å¦‚ä½•ç”¨æ±‡ç¼–ä»£ç å®ç°å‘¢ï¼Ÿ</p><p>çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>int fun1(int a){\n    if (a &gt; 10){\n        return 4;\n    }\n    else{\n        return 8;\n    }\n}\n</code></pre><p>æŠŠä¸Šé¢çš„Cè¯­è¨€ä»£ç è½¬æ¢æˆæ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>   .section    __TEXT,__text,regular,pure_instructions\n    .macosx_version_min 10, 15\n    .globl  _fun1                   ## -- Begin function fun1\n    .p2align    4, 0x90\n_fun1:                                  ## @fun1\n    .cfi_startproc\n## %bb.0:\n    pushq   %rbp\n    .cfi_def_cfa_offset 16\n    .cfi_offset %rbp, -16\n    movq    %rsp, %rbp\n    .cfi_def_cfa_register %rbp\n    movl    %edi, -8(%rbp)\n    cmpl    $10, -8(%rbp)  #å°†å‚æ•°aä¸10åšæ¯”è¾ƒ\n    jle LBB0_2             #å°äºç­‰äºçš„è¯å°±è°ƒè½¬åˆ°LBB0_2åŸºæœ¬å—\n## %bb.1:\n    movl    $4, -4(%rbp)   #å¦åˆ™å°±ç»™aèµ‹å€¼ä¸º4\n    jmp LBB0_3\nLBB0_2:\n    movl    $8, -4(%rbp)   #ç»™aèµ‹å€¼ä¸º8\nLBB0_3:\n    movl    -4(%rbp), %eax #è®¾ç½®è¿”å›å€¼\n    popq    %rbp\n    retq\n    .cfi_endproc\n                                        ## -- End function\n\n.subsections_via_symbols\n</code></pre><p>äº†è§£äº†æ¡ä»¶è·³è½¬æŒ‡ä»¤ä»¥åï¼Œå†ç†è§£ä¸Šé¢çš„ä»£ç å®¹æ˜“äº†å¾ˆå¤šã€‚è¿˜æ˜¯å…ˆåšæ¯”è¾ƒï¼Œè®¾ç½®EFLAGSä¸­çš„ä½ï¼Œç„¶ååšè·³è½¬ã€‚</p><h2>ç¤ºä¾‹5ï¼šæµ®ç‚¹æ•°çš„ä½¿ç”¨</h2><p>ä¹‹å‰æˆ‘ä»¬ç”¨çš„ä¾‹å­éƒ½æ˜¯é‡‡ç”¨æ•´æ•°ï¼Œç°åœ¨ä½¿ç”¨æµ®ç‚¹æ•°æ¥åšè¿ç®—ï¼Œçœ‹çœ‹ä¼šæœ‰ä»€ä¹ˆä¸åŒã€‚</p><p>çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>float fun1(float a, float b){\n    float c = 2.0;\n    return a + b + c;\n}\n</code></pre><p>ä½¿ç”¨-O2å‚æ•°ï¼ŒæŠŠCè¯­è¨€çš„ç¨‹åºç¼–è¯‘æˆæ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>  .section    __TEXT,__text,regular,pure_instructions\n    .macosx_version_min 10, 15\n    .section    __TEXT,__literal4,4byte_literals\n    .p2align    2               ## -- Begin function fun1\nLCPI0_0:\n    .long   1073741824              ## float 2 å¸¸é‡\n    .section    __TEXT,__text,regular,pure_instructions\n    .globl  _fun1\n    .p2align    4, 0x90\n_fun1:                                  ## @fun1\n    .cfi_startproc\n## %bb.0:\n    pushq   %rbp\n    .cfi_def_cfa_offset 16\n    .cfi_offset %rbp, -16\n    movq    %rsp, %rbp\n    .cfi_def_cfa_register %rbp\n    addss   %xmm1, %xmm0    #æµ®ç‚¹æ•°ä¼ å‚ç”¨XMMå¯„å­˜å™¨ï¼ŒåŠ æ³•ç”¨addssæŒ‡ä»¤\n    addss   LCPI0_0(%rip), %xmm0  #æŠŠå¸¸é‡2.0åŠ åˆ°xmm0ä¸Šï¼Œxmm0ä¿å­˜è¿”å›å€¼\n    popq    %rbp\n    retq\n    .cfi_endproc\n                                        ## -- End function\n\n.subsections_via_symbols\n</code></pre><p>è¿™ä¸ªä»£ç çš„ç»“æ„ä½ åº”è¯¥ç†Ÿæ‚‰äº†ï¼Œæ ˆå¸§çš„ç®¡ç†æ–¹å¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½è¦ç»´æŠ¤%rbpå’Œ%rspã€‚ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œæœ‰å‡ ä¸ªåœ°æ–¹ï¼š</p><ul>\n<li>\n<p>ä¼ å‚ã€‚ç»™å‡½æ•°ä¼ é€’æµ®ç‚¹å‹å‚æ•°ï¼Œæ˜¯è¦ä½¿ç”¨XMMå¯„å­˜å™¨ã€‚</p>\n</li>\n<li>\n<p>æŒ‡ä»¤ã€‚æµ®ç‚¹æ•°çš„åŠ æ³•è¿ç®—ï¼Œä½¿ç”¨çš„æ˜¯addssæŒ‡ä»¤ï¼Œå®ƒç”¨äºå¯¹å•ç²¾åº¦çš„æ ‡é‡æµ®ç‚¹æ•°åšåŠ æ³•è®¡ç®—ï¼Œè¿™æ˜¯ä¸€ä¸ªSSE1æŒ‡ä»¤ã€‚SSE1æ˜¯ä¸€ç»„æŒ‡ä»¤ï¼Œä¸»è¦æ˜¯å¯¹å•ç²¾åº¦æµ®ç‚¹æ•°(æ¯”å¦‚Cæˆ–Javaè¯­è¨€ä¸­çš„float)è¿›è¡Œè¿ç®—çš„ï¼Œè€ŒSSE2åˆ™åŒ…å«äº†ä¸€äº›åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆæ¯”å¦‚Cæˆ–Javaè¯­è¨€ä¸­çš„doubleï¼‰çš„è¿ç®—æŒ‡ä»¤ã€‚</p>\n</li>\n<li>\n<p>è¿”å›å€¼ã€‚æ•´å‹è¿”å›å€¼æ˜¯æ”¾åœ¨%eaxå¯„å­˜å™¨ä¸­ï¼Œè€Œæµ®ç‚¹æ•°è¿”å›å€¼æ˜¯æ”¾åœ¨xmm0å¯„å­˜å™¨ä¸­çš„ã€‚è°ƒç”¨è€…å¯ä»¥ä»è¿™é‡Œå–å‡ºæ¥ä½¿ç”¨ã€‚</p>\n</li>\n</ul><h2>è¯¾ç¨‹å°ç»“</h2><p>åˆ©ç”¨æœ¬èŠ‚è¯¾çš„åŠ é¤ï¼Œæˆ‘å¸¦ä½ æŠŠç¼–ç¨‹ä¸­å¸¸è§çš„ä¸€äº›åœºæ™¯ï¼Œæ‰€å¯¹åº”çš„æ±‡ç¼–ä»£ç åšäº†ä¸€äº›åˆ†æã€‚ä½ éœ€è¦è®°ä½çš„è¦ç‚¹å¦‚ä¸‹ï¼š</p><ul>\n<li>\n<p>å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šä½¿ç”¨å¯„å­˜å™¨ä¼ å‚ï¼Œè¶…è¿‡6ä¸ªå‚æ•°æ—¶ï¼Œè¿˜è¦å†åŠ ä¸Šæ ˆï¼Œè¿™éƒ½æ˜¯éµå®ˆäº†è°ƒç”¨çº¦å®šã€‚</p>\n</li>\n<li>\n<p>é€šè¿‡pushã€popæŒ‡ä»¤æ¥ä½¿ç”¨æ ˆï¼Œæ ˆä¸%rbpå’Œ%rspè¿™ä¸¤ä¸ªæŒ‡é’ˆæœ‰å…³ã€‚ä½ å¯ä»¥å›¾å½¢åŒ–åœ°è®°ä½æ ˆçš„å¢é•¿å’Œå›ç¼©çš„è¿‡ç¨‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ˜¯ä»é«˜åœ°å€å‘ä½åœ°å€èµ°ï¼Œæ‰€ä»¥è®¿é—®æ ˆé‡Œçš„å˜é‡ï¼Œéƒ½æ˜¯åŸºäº%rbpæ¥å‡æŸä¸ªå€¼ã€‚ä½¿ç”¨%rbpå‰ï¼Œè¦å…ˆä¿æŠ¤èµ·æ¥ï¼Œåˆ«ç ´åäº†è°ƒç”¨è€…æ”¾åœ¨é‡Œé¢çš„å€¼ã€‚</p>\n</li>\n<li>\n<p>å¾ªç¯è¯­å¥å’Œifè¯­å¥çš„ç§˜å¯†åœ¨äºæ¯”è¾ƒæŒ‡ä»¤å’Œæœ‰æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼Œå®ƒä»¬éƒ½ç”¨åˆ°äº†EFLAGSå¯„å­˜å™¨ã€‚</p>\n</li>\n<li>\n<p>æµ®ç‚¹æ•°çš„è®¡ç®—è¦ç”¨åˆ°MMXå¯„å­˜å™¨ï¼ŒæŒ‡ä»¤ä¹Ÿæœ‰æ‰€ä¸åŒã€‚</p>\n</li>\n</ul><p>é€šè¿‡è¿™æ¬¡åŠ é¤ï¼Œä½ ä¼šæ›´åŠ ç›´è§‚åœ°äº†è§£æ±‡ç¼–è¯­è¨€ï¼Œæ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä¼šå¸¦ä½ å°è¯•é€šè¿‡ç¿»è¯‘ASTè‡ªåŠ¨ç”Ÿæˆè¿™äº›æ±‡ç¼–ä»£ç ï¼Œè®©ä½ ç›´è§‚ç†è§£ç¼–è¯‘å™¨ç”Ÿæˆæ±‡ç¼–ç çš„è¿‡ç¨‹ã€‚</p><h2>ä¸€è¯¾ä¸€æ€</h2><p>ä½ äº†è§£åˆ°å“ªäº›åœ°æ–¹ä¼šä½¿ç”¨æ±‡ç¼–è¯­è¨€ç¼–ç¨‹ï¼Ÿæœ‰æ²¡æœ‰ä¸€äº›æ¯”è¾ƒæœ‰æ„æ€çš„åœºæ™¯ï¼Ÿæ˜¯å¦å®ç°äº†ä¸€äº›æ™®é€šé«˜çº§è¯­è¨€éš¾ä»¥å®ç°çš„ç»“æœï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„ç»éªŒã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ å°†å®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":180581,"user_name":"éª¨æ±¤é¸¡è›‹é¢","can_delete":false,"product_type":"c1","uid":1050002,"ip_address":"","ucode":"2AC141A523E710","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/92/b609f7e3.jpg","comment_is_top":false,"comment_ctime":1582341495,"is_pvip":true,"replies":[{"id":"74177","content":"ä½ æ€»ç»“å¾—å¾ˆç»†ï¼Œå¾ˆæ¸…æ™°ã€‚éƒ½å¯ä»¥ç”»å‡ºä¸€å¼ è„‘å›¾äº†ï¼<br>è¿™äº›æŠ€æœ¯ç»†èŠ‚ï¼Œå¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æŠ€æœ¯è§„æ ¼æ–‡æ¡£å»é˜…è¯»ï¼Œå¹¶è·å¾—æ›´å¤šä½ æ„Ÿå…´è¶£çš„å†…å®¹ã€‚è¯¾ç¨‹é‡Œè®²çš„ï¼Œä¸»è¦æ˜¯Unixå®¶æ—çš„ç³»ç»Ÿçº¦å®šã€‚Windowsç³»ç»Ÿå¯èƒ½ä¼šä¸åŒã€‚ä½†ä½ æ€»èƒ½æ‰¾åˆ°ç›¸åº”çš„æŠ€æœ¯æ–‡æ¡£æ¥æ‰¾åˆ°è¿™äº›çº¦å®šã€‚<br>è¿›ä¸€æ­¥ï¼Œä½ å¯ä»¥å†å¯»æ‰¾ä¸‹é¢å‡ ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼š<br>1.ä¸ºä»€ä¹ˆåªè¦ç§»åŠ¨æ ˆæŒ‡é’ˆå°±èƒ½åˆ†é…å†…å­˜ã€‚åº”ç”¨ç¨‹åºçš„å†…å­˜éƒ½æ˜¯æ“ä½œç³»ç»Ÿè™šæ‹Ÿå‡ºæ¥çš„ï¼Œæ“ä½œç³»ç»Ÿå¿…é¡»åœ¨ä½ ä½¿ç”¨å†…å­˜çš„æ—¶å€™ï¼Œç»™ä½ å‡†å¤‡å¥½çœŸå®çš„ç‰©ç†å†…å­˜ã€‚å¯¹è¿™ä¸ªé—®é¢˜çš„å›ç­”å°±æ¶‰åŠä¸€ç‚¹æ“ä½œç³»ç»Ÿçš„çŸ¥è¯†ï¼Œæˆ‘ç›¸ä¿¡ä½ èƒ½æŸ¥åˆ°ã€‚<br>2.åœ¨æ ˆé‡Œç”³è¯·å†…å­˜ï¼Œç›¸æ¯”åœ¨å †é‡Œç›¸æ¯”å†…å­˜ï¼Œå“ªä¸ªæ›´å¿«ï¼Ÿå“ªä¸ªå®¹æ˜“å¯¼è‡´å†…å­˜ç¢ç‰‡ï¼Ÿå“ªä¸ªæ›´æœ‰åˆ©äºå±€éƒ¨æ€§ï¼Ÿè¿™ä¸¤ç§å†…å­˜ç”³è¯·æ–¹å¼å„è‡ªçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼ŸåƒPythonè¿™æ ·çš„åŠ¨æ€è¯­è¨€æœ‰å¯èƒ½ä½¿ç”¨æ ˆå—ï¼ŸåƒJavaè¿™æ ·çš„è¯­è¨€ï¼Œåœ¨newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä½¿ç”¨æ ˆå—ï¼Ÿ<br>å¸Œæœ›ä½ èƒ½åœ¨å¯»æ‰¾è¿™äº›é—®é¢˜ç­”æ¡ˆçš„æ—¶å€™ï¼Œè·å¾—æ›´å¤šçš„æ”¶è·ã€‚<br><br>æˆ–è€…ï¼Œå¯èƒ½æˆ‘ä¼šåœ¨ç¬¬äºŒå­£å¤šå°‘æ¶‰åŠè¿™äº›å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1585138236,"ip_address":"","comment_id":180581,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27352145271","product_id":100034101,"comment_content":"è€å¸ˆï¼Œé€šè¿‡ä»Šå¤©å­¦ä¹ æœ‰ä»¥ä¸‹æ€»ç»“ï¼š<br>1. pushq å’Œ popq è™½ç„¶æ˜¯å•â€œå‚æ•°â€æŒ‡ä»¤ï¼Œä½†ä¸€ä¸ªéšè—çš„â€œå‚æ•°â€å°±æ˜¯ %rspã€‚<br>2. é€šè¿‡ç§»åŠ¨ %rsp æŒ‡é’ˆæ¥æ”¹å˜å¸§çš„å¤§å°ã€‚%rbp å’Œ %rsp ä¹‹é—´çš„ç©ºé—´å°±æ˜¯å½“å‰æ ˆå¸§ã€‚<br>3. æ ˆå¸§å…ˆè¿›åå‡º ï¼ˆä¸€ä¸ªå‡½æ•°çš„ç›¸å…³ ä¿¡æ¯å ç”¨ä¸€å¸§ï¼‰ã€‚æˆ–è€…æ ˆå¸§äºŒå­— é‡ç‚¹åœ¨å¸§ä¸Šã€‚%rbp åœ¨å‡½æ•°è°ƒç”¨æ—¶ä¸€æ¬¡ç§»åŠ¨ ä¸€ä¸ªæ ˆå¸§çš„å¤§å°ï¼Œ**%rbpåœ¨æ•´ä¸ªå‡½æ•°æ‰§è¡ŒæœŸé—´æ˜¯ä¸å˜çš„**ã€‚<br>4. å‡½æ•°å†…éƒ¨è®¿é—® æ ˆå¸§ å¯ä»¥ä½¿ç”¨ `-4(%rbp)`è¡¨ç¤ºåœ°å€ï¼Œè¡¨ç¤º%rbp å¯„å­˜å™¨å­˜å‚¨çš„åœ°å€å‡å»4çš„åœ°å€ã€‚è¯´ç™½äº†ï¼Œ**æ ˆå¸§å†…å¯ä»¥åŸºäº (%rbp) éšæœºè®¿é—®**ï¼Œ`+4(%rsp)`æ•ˆæœç±»ä¼¼ã€‚<br>5. **%rspå¹¶ä¸æ€»æ˜¯æŒ‡å‘çœŸå®çš„æ ˆé¡¶**ï¼šåœ¨ X86-64 æ¶æ„ä¸‹ï¼Œæ–°çš„è§„èŒƒè®©ç¨‹åºå¯ä»¥è®¿é—®æ ˆé¡¶ä¹‹å¤– 128 å­—èŠ‚çš„å†…å­˜ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ç”šè‡³ä¸éœ€è¦é€šè¿‡æ”¹å˜ %rsp æ¥åˆ†é…æ ˆç©ºé—´ï¼Œè€Œæ˜¯ç›´æ¥ç”¨æ ˆé¡¶ä¹‹å¤–çš„ç©ºé—´ã€‚æ¯”å¦‚æ ˆå¸§å¤§å°æ˜¯16ï¼Œå³Â·`(%rbp)-(%rsp) = 16`ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨ å†…å­˜åœ°å€`-32(%rbp)`ã€‚ä½†å¦‚æœå‡½æ•°å†… è¿˜ä¼šè°ƒç”¨ å…¶å®ƒå‡½æ•°ï¼Œä¸ºäº†pushq&#47;popq æŒ‡ä»¤çš„æ­£ç¡®æ€§ï¼Œç¼–è¯‘å™¨ä¼šä¸º%rsp è®¾ç½®æ­£ç¡®çš„å€¼ä½¿å…¶ æŒ‡å‘æ ˆé¡¶ã€‚<br>6. é™¤äº†callq&#47;pushq&#47;popq&#47;retq  æŒ‡ä»¤æ“ä½œ%rspå¤–ï¼Œå‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œå¯ä»¥mov (%rsp)ä½¿å…¶æŒ‡å‘æ ˆé¡¶ä¸€æ­¥åˆ°ä½ï¼Œ(%rsp)ä¹Ÿå¯ä»¥å’Œ(%rbp)æŒ¨ç€ä¸€æ­¥ä¸åŠ¨ï¼Œ\bä¹Ÿå¯ä»¥éšç€å˜é‡çš„åˆ†é…æ…¢æ…¢ç§»åŠ¨ã€‚","like_count":6,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484721,"discussion_content":"ä½ æ€»ç»“å¾—å¾ˆç»†ï¼Œå¾ˆæ¸…æ™°ã€‚éƒ½å¯ä»¥ç”»å‡ºä¸€å¼ è„‘å›¾äº†ï¼\nè¿™äº›æŠ€æœ¯ç»†èŠ‚ï¼Œå¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æŠ€æœ¯è§„æ ¼æ–‡æ¡£å»é˜…è¯»ï¼Œå¹¶è·å¾—æ›´å¤šä½ æ„Ÿå…´è¶£çš„å†…å®¹ã€‚è¯¾ç¨‹é‡Œè®²çš„ï¼Œä¸»è¦æ˜¯Unixå®¶æ—çš„ç³»ç»Ÿçº¦å®šã€‚Windowsç³»ç»Ÿå¯èƒ½ä¼šä¸åŒã€‚ä½†ä½ æ€»èƒ½æ‰¾åˆ°ç›¸åº”çš„æŠ€æœ¯æ–‡æ¡£æ¥æ‰¾åˆ°è¿™äº›çº¦å®šã€‚\nè¿›ä¸€æ­¥ï¼Œä½ å¯ä»¥å†å¯»æ‰¾ä¸‹é¢å‡ ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼š\n1.ä¸ºä»€ä¹ˆåªè¦ç§»åŠ¨æ ˆæŒ‡é’ˆå°±èƒ½åˆ†é…å†…å­˜ã€‚åº”ç”¨ç¨‹åºçš„å†…å­˜éƒ½æ˜¯æ“ä½œç³»ç»Ÿè™šæ‹Ÿå‡ºæ¥çš„ï¼Œæ“ä½œç³»ç»Ÿå¿…é¡»åœ¨ä½ ä½¿ç”¨å†…å­˜çš„æ—¶å€™ï¼Œç»™ä½ å‡†å¤‡å¥½çœŸå®çš„ç‰©ç†å†…å­˜ã€‚å¯¹è¿™ä¸ªé—®é¢˜çš„å›ç­”å°±æ¶‰åŠä¸€ç‚¹æ“ä½œç³»ç»Ÿçš„çŸ¥è¯†ï¼Œæˆ‘ç›¸ä¿¡ä½ èƒ½æŸ¥åˆ°ã€‚\n2.åœ¨æ ˆé‡Œç”³è¯·å†…å­˜ï¼Œç›¸æ¯”åœ¨å †é‡Œç›¸æ¯”å†…å­˜ï¼Œå“ªä¸ªæ›´å¿«ï¼Ÿå“ªä¸ªå®¹æ˜“å¯¼è‡´å†…å­˜ç¢ç‰‡ï¼Ÿå“ªä¸ªæ›´æœ‰åˆ©äºå±€éƒ¨æ€§ï¼Ÿè¿™ä¸¤ç§å†…å­˜ç”³è¯·æ–¹å¼å„è‡ªçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼ŸåƒPythonè¿™æ ·çš„åŠ¨æ€è¯­è¨€æœ‰å¯èƒ½ä½¿ç”¨æ ˆå—ï¼ŸåƒJavaè¿™æ ·çš„è¯­è¨€ï¼Œåœ¨newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä½¿ç”¨æ ˆå—ï¼Ÿ\nå¸Œæœ›ä½ èƒ½åœ¨å¯»æ‰¾è¿™äº›é—®é¢˜ç­”æ¡ˆçš„æ—¶å€™ï¼Œè·å¾—æ›´å¤šçš„æ”¶è·ã€‚\n\næˆ–è€…ï¼Œå¯èƒ½æˆ‘ä¼šåœ¨ç¬¬äºŒå­£å¤šå°‘æ¶‰åŠè¿™äº›å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585138236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2718510,"avatar":"","nickname":"jack123","note":"","ucode":"873D0046EF39D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400770,"discussion_content":"1.åœ¨ä½¿ç”¨æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠè™šæ‹Ÿåœ°å€ç¿»è¯‘æˆç‰©ç†åœ°å€ï¼Œä¸€èˆ¬æ˜¯ä½¿ç”¨MMUï¼Œå®ƒæ˜¯ä¸€ä¸ªç¡¬ä»¶ï¼Œç”¨äºè½¬æ¢åœ°å€çš„\n2.æ ˆæ¯”å †ç”³è¯·æ›´å¿«ï¼Œå› ä¸ºæ ˆåœ¨ç¼–è¯‘å™¨æœŸé—´å°±ç”³è¯·äº†ï¼Œè€Œå †æ˜¯è¿è¡Œæ—¶mallocå»åˆ†é…çš„ï¼Œè¿˜è¦ç®¡ç†åƒåœ¾å›æ”¶ã€‚æ ˆåˆ†é…çš„ç‰©ç†ç©ºé—´æ˜¯è¿ç»­çš„ï¼Œæ•°æ®ä¹‹é—´å­˜åœ¨å±€éƒ¨æ€§ï¼Œè€Œå †æœªå¿…ï¼ŒæŸ¥è¯¢å †çš„é“¾è¡¨å¯èƒ½èŠ±è´¹æ›´å¤šçš„æ—¶é—´ï¼Œä½†å› ä¸ºæ ˆç©ºé—´æ€»æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥ä¸å¯èƒ½æœ‰ä¸€ä¸ªå†…å­˜å—ä»æ ˆä¸­å¼¹å‡ºï¼Œè€Œé¢‘ç¹mallocï¼Œfreeä¸åŒçš„ç©ºé—´å¤§å°ï¼Œä¼šé€ æˆå†…å­˜ç©ºé—´çš„ä¸è¿ç»­ï¼Œäº§ç”Ÿå¤§é‡ç¢ç‰‡\n3.æ ˆä¸»è¦ç”¨äºå­˜å‚¨æ–¹æ³•å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œæ¯”å¦‚åŸºæœ¬çš„ç±»å‹çš„å˜é‡æ•°æ®å’Œå¯¹è±¡çš„å¼•ç”¨ï¼Œå †å­˜æ”¾newå‡ºæ¥çš„å¯¹è±¡å’Œå…¨å±€å˜é‡æ¯”å¦‚staticå˜é‡å’Œï¼Œå¸¸é‡æ± æ¯”å¦‚å­—ç¬¦ä¸²å¸¸é‡å’ŒconståŸºæœ¬ç±»å‹å¸¸é‡ç­‰\n4.Javaçš„å‡½æ•°åœ¨ä¼ é€’newå‡ºæ¥çš„å¼•ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ ˆï¼Œå› ä¸ºåªæ˜¯å­˜å‚¨ä¸€ä¸ªæŒ‡é’ˆçš„å€¼ï¼ŒPythonåŠ¨æ€è¯­è¨€çš„ç‰¹æ€§åªæ˜¯å¯¼è‡´éš¾ä»¥ä¼˜åŒ–ï¼Œä½†æ˜¯æ ˆç©ºé—´ä¾ç„¶æ˜¯å¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚Pythonæ¯åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œä¼šåˆ†é…ä¸€éƒ¨åˆ†æ ˆç©ºé—´ï¼Œç”¨äºä¿å­˜å±€éƒ¨å˜é‡å’Œè¿”å›å€¼ä»¥åŠä¸Šä¸‹æ–‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633419105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1167046,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ce/c6/958212b5.jpg","nickname":"sugar","note":"","ucode":"454538FF253B5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":256422,"discussion_content":"è¿™æ¡è¯„è®ºå’Œè€å¸ˆçš„å›å¤å¤ªæ£’äº†ï¼Œç®€ç›´ç›¸å½“äºåˆåŠ äº†ä¸€å°é¡¿é¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588479190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147239,"user_name":"zKerry","can_delete":false,"product_type":"c1","uid":1497740,"ip_address":"","ucode":"9FB006D1A38D3F","user_header":"","comment_is_top":false,"comment_ctime":1572851081,"is_pvip":false,"replies":[{"id":"57524","content":"å› ä¸ºæ ˆæ˜¯ä»é«˜åœ°å€å‘ä½åœ°å€å»¶ä¼¸çš„ã€‚æ‰€ä»¥åœ°å€å‡çš„è¯ï¼Œæ‰æ˜¯æ ˆçš„å¢é•¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1573301230,"ip_address":"","comment_id":147239,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23047687561","product_id":100034101,"comment_content":"æ ˆçš„æ‰©å¤§å’Œç¼©å°æœ‰ç‚¹åç›´è§‰å•Šï¼Œä¸ºå•¥æ‰©å¤§æ˜¯å‡ï¼Œç¼©å°æ˜¯åŠ ","like_count":6,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473215,"discussion_content":"å› ä¸ºæ ˆæ˜¯ä»é«˜åœ°å€å‘ä½åœ°å€å»¶ä¼¸çš„ã€‚æ‰€ä»¥åœ°å€å‡çš„è¯ï¼Œæ‰æ˜¯æ ˆçš„å¢é•¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573301230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142560,"user_name":"åˆå¿ƒä¸¶å¯æ›¾è¨˜","can_delete":false,"product_type":"c1","uid":1140481,"ip_address":"","ucode":"232DBFB8C3AC00","user_header":"https://static001.geekbang.org/account/avatar/00/11/67/01/a5bb9c92.jpg","comment_is_top":false,"comment_ctime":1571395810,"is_pvip":false,"replies":[{"id":"57601","content":"å›å¤´æˆ‘æ›´æ–°ä¸€ç‰ˆå›¾ï¼Œè®©å›¾ä¸­çš„ç®­å¤´æŒ‡å‘æ ¼å­è€Œä¸æ˜¯çº¿ï¼Œè¿™æ ·æ›´åŠ æ²¡æœ‰æ­§ä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1573378142,"ip_address":"","comment_id":142560,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18751264994","product_id":100034101,"comment_content":"å›¾ä¸­çš„%rbpåº”è¯¥æ˜¯æŒ‡å‘ã€ä¸Šä¸€å¸§çš„%rbpçš„å€¼ã€‘çš„ä¸‹æ–¹çº¢çº¿éƒ¨ä½ï¼Œä¸åº”è¯¥æ˜¯ã€è¿”å›åœ°å€ã€‘çš„ä¸‹æ–¹çº¢çº¿","like_count":5,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471176,"discussion_content":"å›å¤´æˆ‘æ›´æ–°ä¸€ç‰ˆå›¾ï¼Œè®©å›¾ä¸­çš„ç®­å¤´æŒ‡å‘æ ¼å­è€Œä¸æ˜¯çº¿ï¼Œè¿™æ ·æ›´åŠ æ²¡æœ‰æ­§ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573378142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812721,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZutpibYYahKIaIwuc84oBD30CZ7ZGLXHwZjm4zHG6ynaGxKqIzqrTGMQVr3CauAOcOic5MnzXnR0CYiaicP7bqkFicg/132","nickname":"thomas1994","note":"","ucode":"F94DBBFF6D785F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217263,"discussion_content":"%rbp å’Œ%rspä¸ç”¨æ”¹æŒ‡å‘åŒä¸€ä¸ªåœ°æ–¹å§ï¼Ÿ  å“ªä½èƒ½å¸®å¿™è¯´æ˜ä¸‹ï¼Œè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585534407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317325,"user_name":"if...else...","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1634741173,"is_pvip":false,"replies":[{"id":"115154","content":"æ˜µç§°å¾ˆèµï¼","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1634903031,"ip_address":"","comment_id":317325,"utype":1}],"discussion_count":2,"race_medal":4,"score":"5929708469","product_id":100034101,"comment_content":"ä¸é”™ï¼Œæœ‰æ”¶è·","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528765,"discussion_content":"æ˜µç§°å¾ˆèµï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634903031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2550743,"avatar":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","nickname":"if...else...","note":"","ucode":"D0565908C99695","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407064,"discussion_content":"ğŸ•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634903700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180202,"user_name":"éª¨æ±¤é¸¡è›‹é¢","can_delete":false,"product_type":"c1","uid":1050002,"ip_address":"","ucode":"2AC141A523E710","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/92/b609f7e3.jpg","comment_is_top":false,"comment_ctime":1582208684,"is_pvip":true,"replies":[{"id":"74207","content":"å¯¹çš„ã€‚æ ˆé¡¶æŒ‡é’ˆé‡æ–°èµ‹å€¼äº†ï¼Œæ ˆé¡¶å¤–çš„å†…å­˜å°±æŠ›å¼ƒäº†ã€‚è¿™å°±æ˜¯ä¸€ç§å¾ˆè‡ªåŠ¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œæ¯”åœ¨å †é‡Œç”³è¯·å’Œé‡Šæ”¾å†…å­˜è¦ç®€å•ã€‚<br>æ‰€ä»¥è¯´åœ¨æ ˆé‡Œå£°æ˜çš„æœ¬åœ°å˜é‡ï¼Œå®ƒçš„ç”Ÿå­˜æœŸè·Ÿä½œç”¨åŸŸæ˜¯ä¸€è‡´çš„ï¼ˆé—­åŒ…é™¤å¤–ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1585146531,"ip_address":"","comment_id":180202,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5877175980","product_id":100034101,"comment_content":"æœ‰ä¸ªç–‘æƒ‘ç‚¹ï¼šå‡½æ•°è°ƒç”¨è¿”å›æ—¶ï¼Œä¸€ä¸ªå‡½æ•°çš„æ ˆå¸§æ˜¯ä½œä¸ºä¸€æ•´ä¸ªå•ä½è¢«ä¸¢å¼ƒæ‰å˜›ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484562,"discussion_content":"å¯¹çš„ã€‚æ ˆé¡¶æŒ‡é’ˆé‡æ–°èµ‹å€¼äº†ï¼Œæ ˆé¡¶å¤–çš„å†…å­˜å°±æŠ›å¼ƒäº†ã€‚è¿™å°±æ˜¯ä¸€ç§å¾ˆè‡ªåŠ¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œæ¯”åœ¨å †é‡Œç”³è¯·å’Œé‡Šæ”¾å†…å­˜è¦ç®€å•ã€‚\næ‰€ä»¥è¯´åœ¨æ ˆé‡Œå£°æ˜çš„æœ¬åœ°å˜é‡ï¼Œå®ƒçš„ç”Ÿå­˜æœŸè·Ÿä½œç”¨åŸŸæ˜¯ä¸€è‡´çš„ï¼ˆé—­åŒ…é™¤å¤–ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585146531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147902,"user_name":"é£","can_delete":false,"product_type":"c1","uid":1444483,"ip_address":"","ucode":"E1CE0825AAF805","user_header":"https://static001.geekbang.org/account/avatar/00/16/0a/83/f916f903.jpg","comment_is_top":false,"comment_ctime":1572918163,"is_pvip":false,"replies":[{"id":"57521","content":"æ²¡é”™ã€‚ç”¨ä¸¤ä¸ªå¯„å­˜å™¨æ¥æ ‡è®°æ ˆæ¡¢ï¼Œç¡®å®æœ‰ç‚¹æµªè´¹ã€‚å®é™…ä¸Šæ˜¯å¯ä»¥ä¼˜åŒ–æ‰çš„ã€‚<br>å¦‚æœä½ ç”¨gccç¼–è¯‘çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨-fomit-frame-pointerå‚æ•°æ¥ç”Ÿæˆæ±‡ç¼–ï¼Œä¼šæŠŠä¸‹é¢ä¸‰è¡Œä»£ç éƒ½å»æ‰ã€‚<br>pushq %rbp<br>movq %rsp, %rbp<br>popq %rbp<br><br>æˆ‘åœ¨34è®²çš„ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæ‰‹å·¥å»æ‰äº†è¿™ä¸‰è¡Œä»£ç ï¼Œç”Ÿæˆçš„æœºå™¨ç å¯ä»¥å°‘5ä¸ªå­—èŠ‚ï¼Œè¿˜å°‘ä¸¤æ¬¡å†…å­˜è®¿é—®ï¼Œå…¶ä¸­æœ‰ä¸€æ¬¡æ˜¯å†™æ“ä½œï¼Œé«˜é€Ÿç¼“å­˜éƒ½å¸®ä¸ä¸Šå¿™ã€‚å¯¹äºè¿½æ±‚æè‡´æ€§èƒ½çš„ç¨‹åºæ¥è¯´ï¼Œè¿™ä¸ªä¼˜åŒ–æ˜¯å¿…è¦çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1573300181,"ip_address":"","comment_id":147902,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867885459","product_id":100034101,"comment_content":"å±€éƒ¨å˜é‡çš„è®¿é—®ï¼Œæ—¢å¯ä»¥ç”¨rbp-çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ç”¨rsp+çš„æ–¹å¼ï¼Œæ–‡ä¸­å®ä¾‹é‡Œï¼Œéƒ½æ˜¯rbp-çš„æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦ç®¡ç†å¥½rbpè¿™ä¸ªå¯„å­˜å™¨ã€‚<br>å¦‚æœé‡‡ç”¨rsp+çš„æ–¹å¼ï¼Œæ˜¯ä¸æ˜¯æ ¹æœ¬å°±ä¸éœ€è¦rbpè¿™ä¸ªå¯„å­˜å™¨äº†ï¼Œè¿™æ ·æ•ˆç‡ä¸å°±æ›´é«˜äº†ï¼Ÿ<br>æˆ‘çœ‹åˆ°çš„ä¸€äº›ARMæ ¸ï¼Œé‡Œé¢åªæœ‰rspå¯„å­˜å™¨ï¼Œæ²¡æœ‰rbpå¯„å­˜å™¨ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯æ›´å¥½å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473330,"discussion_content":"æ²¡é”™ã€‚ç”¨ä¸¤ä¸ªå¯„å­˜å™¨æ¥æ ‡è®°æ ˆæ¡¢ï¼Œç¡®å®æœ‰ç‚¹æµªè´¹ã€‚å®é™…ä¸Šæ˜¯å¯ä»¥ä¼˜åŒ–æ‰çš„ã€‚\nå¦‚æœä½ ç”¨gccç¼–è¯‘çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨-fomit-frame-pointerå‚æ•°æ¥ç”Ÿæˆæ±‡ç¼–ï¼Œä¼šæŠŠä¸‹é¢ä¸‰è¡Œä»£ç éƒ½å»æ‰ã€‚\npushq %rbp\nmovq %rsp, %rbp\npopq %rbp\n\næˆ‘åœ¨34è®²çš„ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæ‰‹å·¥å»æ‰äº†è¿™ä¸‰è¡Œä»£ç ï¼Œç”Ÿæˆçš„æœºå™¨ç å¯ä»¥å°‘5ä¸ªå­—èŠ‚ï¼Œè¿˜å°‘ä¸¤æ¬¡å†…å­˜è®¿é—®ï¼Œå…¶ä¸­æœ‰ä¸€æ¬¡æ˜¯å†™æ“ä½œï¼Œé«˜é€Ÿç¼“å­˜éƒ½å¸®ä¸ä¸Šå¿™ã€‚å¯¹äºè¿½æ±‚æè‡´æ€§èƒ½çš„ç¨‹åºæ¥è¯´ï¼Œè¿™ä¸ªä¼˜åŒ–æ˜¯å¿…è¦çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573300181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142437,"user_name":"é˜¿é¼","can_delete":false,"product_type":"c1","uid":1042634,"ip_address":"","ucode":"EE763513563F50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/ca/2a7cc193.jpg","comment_is_top":false,"comment_ctime":1571368612,"is_pvip":false,"replies":[{"id":"57697","content":"éioå½“ç„¶å¯ä»¥ç”¨åç¨‹ã€‚æ¯”å¦‚è¿­ä»£å™¨ã€çŠ¶æ€æœºç”¨åç¨‹æ¥å†™å°±å¾ˆä¼˜é›…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1573444495,"ip_address":"","comment_id":142437,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5866335908","product_id":100034101,"comment_content":"åç¨‹çš„åˆ‡æ¢ï¼Œç”¨æˆ·æ€ä»£ç è¦å¤åˆ¶å †æ ˆå¯„å­˜å™¨ä¿¡æ¯ã€‚ä¹Ÿæƒ³è¯·æ•™è€å¸ˆï¼Œåç¨‹è°ƒåº¦æ˜¯å¦åªèƒ½åœ¨ioçº¿ç¨‹å‘¢ï¼Ÿéioçº¿ç¨‹èƒ½å¦ç”¨åç¨‹å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471126,"discussion_content":"éioå½“ç„¶å¯ä»¥ç”¨åç¨‹ã€‚æ¯”å¦‚è¿­ä»£å™¨ã€çŠ¶æ€æœºç”¨åç¨‹æ¥å†™å°±å¾ˆä¼˜é›…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573444495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042634,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e8/ca/2a7cc193.jpg","nickname":"é˜¿é¼","note":"","ucode":"EE763513563F50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388335,"discussion_content":"å¯èƒ½æ˜¯æˆ‘è¡¨è¿°çš„é—®é¢˜ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œåç¨‹çš„å®ç°ï¼Œåç¨‹è°ƒåº¦çš„å®ç°ã€‚ioçº¿ç¨‹ä¸­å¯ä»¥ç”¨epollç­‰åˆ‡æ¢åç¨‹ï¼Œéioçº¿ç¨‹ä¸­åç¨‹ä½•æ—¶åˆ‡æ¢ï¼Œéš¾é“è¦æŠŠæ“ä½œç³»ç»Ÿçš„æœºåˆ¶å®ç°åœ¨ç”¨æˆ·æ€å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628699344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050269,"avatar":"","nickname":"minghu6","note":"","ucode":"F44058E21B14C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376693,"discussion_content":"ä½œè€…è¿™æ˜¯æŠŠåç¨‹å’Œç”Ÿæˆå™¨çš„æ¦‚å¿µæ··æ·†äº†å§, åç¨‹æœ¬è´¨ä¸Šåªæ˜¯ç¼–ç¨‹æœºåˆ¶ä¸Šæ”¯æŒçš„ä¸€ç§ç”¨æˆ·çº¿ç¨‹è½®å¯»çš„ç®€å•å†™æ³•, å®ƒåªæ˜¯ç”¨åˆ°äº†ç”Ÿæˆå™¨.  éIOé¢†åŸŸæ¯”å¦‚çŠ¶æ€æœºéœ€è¦IOå—, é‚£ä¹ˆç”¨æºç¨‹çš„æ„ä¹‰ä½•åœ¨? æ‹–ç´¯æ€§èƒ½?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622279563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140703,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1571034969,"is_pvip":false,"replies":[{"id":"54412","content":"é¼“åŠ±ä½ ç”¨cè¯­è¨€ï¼Œä½¿ç”¨mallocå’Œfreeæ¥ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ï¼Œçœ‹çœ‹ç”Ÿæˆçš„æ±‡ç¼–æ˜¯æ€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1571044398,"ip_address":"","comment_id":140703,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5866002265","product_id":100034101,"comment_content":"è€å¸ˆåœ¨è¯¾ä¸­è®²äº†ä¸å°‘â€œæ ˆâ€çš„æ“ä½œï¼Œé‚£ç¼–ç¨‹è¯­è¨€å¯¹äº&quot;å †&quot;åˆæ˜¯ç”¨ä»€ä¹ˆæŒ‡ä»¤æ“ä½œçš„å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470517,"discussion_content":"é¼“åŠ±ä½ ç”¨cè¯­è¨€ï¼Œä½¿ç”¨mallocå’Œfreeæ¥ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ï¼Œçœ‹çœ‹ç”Ÿæˆçš„æ±‡ç¼–æ˜¯æ€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571044398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1444483,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0a/83/f916f903.jpg","nickname":"é£","note":"","ucode":"E1CE0825AAF805","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43935,"discussion_content":"å †ä¸æ˜¯ç”¨æ±‡ç¼–æŒ‡ä»¤æ“ä½œçš„ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå†…å­˜ç®¡ç†çš„ç®—æ³•ï¼Œå¹¶å°†å…¶å°è£…æˆmallocå’Œfreeå‡½æ•°ï¼Œä¾›ç”¨æˆ·è°ƒç”¨ã€‚\nå †å®é™…ä¸Šå°±æ˜¯ä¸€ç‰‡é™æ€å†…å­˜ï¼Œä½†æ˜¯ç”¨æˆ·ä¸èƒ½é€šè¿‡åœ°å€ç›´æ¥è®¿é—®ï¼Œå¿…é¡»é€šè¿‡mallocå’Œfreeå‡½æ•°è®¿é—®ã€‚\nä½ å¯ä»¥éšä¾¿ç™¾åº¦ä¸€ä¸ªmallocå’Œfreeçš„Cå‡½æ•°æºç ï¼Œçœ‹æ‡‚å®ƒå°±è¡Œäº†ï¼Œä»£ç é‡å¾ˆå°‘çš„ã€‚\nå†…å­˜ç®¡ç†æœ‰å¾ˆå¤šç­–ç•¥ï¼Œè™½ç„¶ç”¨æˆ·çœ‹èµ·æ¥éƒ½æ˜¯mallocå’Œfreeå‡½æ•°ï¼Œä½†å†…éƒ¨å¯ä»¥ç”¨ä¸åŒçš„ç®—æ³•å®ç°ï¼Œé‡ç‚¹æ˜¯å¦‚ä½•é¿å…å†…å­˜ç¢ç‰‡çš„äº§ç”Ÿå’Œå›æ”¶å†…å­˜ç¢ç‰‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572917756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","nickname":"æ²‰æ·€çš„æ¢¦æƒ³","note":"","ucode":"BCB7C26F9D214B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":33409,"discussion_content":"å°±çœ‹åˆ°ç”Ÿæˆçš„æ±‡ç¼–ä»£ç é‡Œè°ƒç”¨äº†ä¸€ä¸‹mallocå’Œfree  ãƒ†_ãƒ‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571121421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140631,"user_name":"pebble","can_delete":false,"product_type":"c1","uid":1022021,"ip_address":"","ucode":"871930CB227C68","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/45/318ba48a.jpg","comment_is_top":false,"comment_ctime":1571018770,"is_pvip":false,"replies":[{"id":"54363","content":"ä¸æ˜¯ã€‚<br>rbpï¼ŒæŒ‡å‘æ ˆåº•ã€‚è¿™ä¸ªå€¼åœ¨æ•´åˆå‡½æ•°æ‰§è¡ŒæœŸé—´æ˜¯ä¸å˜çš„ã€‚<br>rspï¼ŒæŒ‡å‘æ ˆé¡¶ã€‚è¿™ä¸ªå€¼ä¼šåœ¨æŸäº›æƒ…å†µä¸‹æ”¹å˜ï¼š<br>(1)pushå’Œpopå‘½ä»¤å¯ä»¥æ”¹å˜rspã€‚<br>(2)callæŒ‡ä»¤ï¼Œå› ä¸ºè¦æŠŠè¿”å›åœ°å€å‹æ ˆï¼Œå®é™…ä¹Ÿæ”¹å˜äº†rspã€‚<br>(3)åœ¨ä½¿ç”¨æœ¬åœ°å˜é‡æ—¶ï¼Œæ‰‹å·¥æ”¹å˜rspçš„å€¼ã€‚<br>rspå¦‚æœæŒ‡å‘ä¸‹æ¬¡è¦ä¿å­˜æ•°æ®çš„ä½ç½®ï¼Œç›¸å½“äºæ ˆé‡Œæ€»æœ‰ä¸€ä¸ªç©ºå•å…ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1571023417,"ip_address":"","comment_id":140631,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5865986066","product_id":100034101,"comment_content":"ä¾‹ä¸€çš„ä¿©æ ˆå¸§å›¾é‡Œï¼Œrbpè·Ÿrspï¼Œæ˜¯å¦åº”è¯¥éƒ½æŒ‡å‘å†ä¸‹ä¸€ä¸ªä½ç½®å‘¢ï¼ŒrspæŒ‡å‘çš„ï¼Œåº”è¯¥æ˜¯ä¸‹æ¬¡è¦ä¿å­˜æ•°æ®çš„ä½ç½®å§","like_count":1,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470481,"discussion_content":"ä¸æ˜¯ã€‚\nrbpï¼ŒæŒ‡å‘æ ˆåº•ã€‚è¿™ä¸ªå€¼åœ¨æ•´åˆå‡½æ•°æ‰§è¡ŒæœŸé—´æ˜¯ä¸å˜çš„ã€‚\nrspï¼ŒæŒ‡å‘æ ˆé¡¶ã€‚è¿™ä¸ªå€¼ä¼šåœ¨æŸäº›æƒ…å†µä¸‹æ”¹å˜ï¼š\n(1)pushå’Œpopå‘½ä»¤å¯ä»¥æ”¹å˜rspã€‚\n(2)callæŒ‡ä»¤ï¼Œå› ä¸ºè¦æŠŠè¿”å›åœ°å€å‹æ ˆï¼Œå®é™…ä¹Ÿæ”¹å˜äº†rspã€‚\n(3)åœ¨ä½¿ç”¨æœ¬åœ°å˜é‡æ—¶ï¼Œæ‰‹å·¥æ”¹å˜rspçš„å€¼ã€‚\nrspå¦‚æœæŒ‡å‘ä¸‹æ¬¡è¦ä¿å­˜æ•°æ®çš„ä½ç½®ï¼Œç›¸å½“äºæ ˆé‡Œæ€»æœ‰ä¸€ä¸ªç©ºå•å…ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571023417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022021,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/98/45/318ba48a.jpg","nickname":"pebble","note":"","ucode":"871930CB227C68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32345,"discussion_content":"å¯¹rspç¡®å®ç†è§£é”™äº†ï¼Œå‡½æ•°è®¾ç½®å®Œæ ˆå¸§åï¼Œåº”è¯¥è·Ÿrspä¸€æ ·å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571026550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341139,"user_name":"ç¨‹åºå‘˜ç­å‰","can_delete":false,"product_type":"c1","uid":1478098,"ip_address":"","ucode":"BD48CF7649609A","user_header":"https://static001.geekbang.org/account/avatar/00/16/8d/d2/8a6be8d8.jpg","comment_is_top":false,"comment_ctime":1649386891,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649386891","product_id":100034101,"comment_content":"æ‰©å±•æ ˆå’Œç¼©å°æ ˆï¼Œä½¿ç”¨çš„æ˜¯ä¸€ä¸ªç«‹å³æ•°ï¼Œè¿™ä¸ªç«‹å³æ•°è¡¨ç¤ºçš„æ˜¯å°†åœ°å€å‘ä¸Šæˆ–è€…å‘ä¸‹ç§»åŠ¨å¤šå°‘å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":316494,"user_name":"Geek_656245","can_delete":false,"product_type":"c1","uid":2810125,"ip_address":"","ucode":"2B358A704E5891","user_header":"","comment_is_top":false,"comment_ctime":1634355440,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634355440","product_id":100034101,"comment_content":"è§†å±æµï¼ŒéŸ³é¢‘æµåœ¨æ±‡ç¼–å’Œæœºå™¨ç ä¸­åˆæ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":316493,"user_name":"Geek_656245","can_delete":false,"product_type":"c1","uid":2810125,"ip_address":"","ucode":"2B358A704E5891","user_header":"","comment_is_top":false,"comment_ctime":1634355394,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634355394","product_id":100034101,"comment_content":"æ±‡ç¼–è½¬åŒ–æˆæœºå™¨ç åˆæ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":295199,"user_name":"minghu6","can_delete":false,"product_type":"c1","uid":1050269,"ip_address":"","ucode":"F44058E21B14C9","user_header":"","comment_is_top":false,"comment_ctime":1622294699,"is_pvip":false,"replies":[{"id":"107369","content":"æ˜¯ï¼Œä¸æ±‡ç¼–æœ‰å…³çš„å·¥ä½œï¼Œå·¥ç¨‹æ€§æ›´å¼ºä¸€äº›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1622551262,"ip_address":"","comment_id":295199,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622294699","product_id":100034101,"comment_content":"çœ‹ä¸€äº›æ±‡ç¼–ä»£ç çš„ä¾‹å­æ€»æ˜¯è§‰å¾—è…°èƒŒé…¸ç—›,  åŸç†æ€§ä¸å¤š, å°±æ˜¯äº›å…·ä½“è§„å®šè€Œä¸”é«˜åº¦å¹³å°ç‰¹å®š,  çº¯æ¬ç –, ç»™å¹³å°æ‰“å·¥, çœ‹äº†çœŸä¸å¸¦åŠ²å„¿<br>","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520987,"discussion_content":"æ˜¯ï¼Œä¸æ±‡ç¼–æœ‰å…³çš„å·¥ä½œï¼Œå·¥ç¨‹æ€§æ›´å¼ºä¸€äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622551262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266733,"user_name":"favoorr","can_delete":false,"product_type":"c1","uid":1056192,"ip_address":"","ucode":"E83A360B332BCC","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/c0/ab9b24d8.jpg","comment_is_top":false,"comment_ctime":1607475791,"is_pvip":true,"replies":[{"id":"98488","content":"ä½ è®²çš„å¾ˆå¯¹ã€‚æœ€å¥½å–„ç”¨GDBã€LLDBè¿™äº›è°ƒè¯•å·¥å…·ï¼Œè¿™æ ·å¾ˆå¤šæŠ½è±¡çš„çŸ¥è¯†å°±å˜å¾—å¯è§†åŒ–äº†ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1609738588,"ip_address":"","comment_id":266733,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607475791","product_id":100034101,"comment_content":"è¿™ä¸ªç¬¬ä¸€æ¬¡å­¦çš„æ—¶å€™è¿˜çœŸå¾ˆéš¾ä¸€æ¬¡æ˜ç™½ï¼Œæœ€å¥½æ˜¯ç”¨ GDB  æ¥å•æ­¥ï¼Œè§‚å¯Ÿå¯„å­˜å™¨çš„å€¼ï¼Œä¸€è¾¹å•æ­¥ï¼Œä¸€è¾¹æ‹¿è‡ªå·±å°æœ¬æœ¬è®°ï¼Œæ¥åŠ æ·±ç†è§£","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511367,"discussion_content":"ä½ è®²çš„å¾ˆå¯¹ã€‚æœ€å¥½å–„ç”¨GDBã€LLDBè¿™äº›è°ƒè¯•å·¥å…·ï¼Œè¿™æ ·å¾ˆå¤šæŠ½è±¡çš„çŸ¥è¯†å°±å˜å¾—å¯è§†åŒ–äº†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609738588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":255507,"user_name":"__Unsafe","can_delete":false,"product_type":"c1","uid":1237779,"ip_address":"","ucode":"7D9975396A3194","user_header":"https://static001.geekbang.org/account/avatar/00/12/e3/13/feaf21e4.jpg","comment_is_top":false,"comment_ctime":1603360414,"is_pvip":false,"replies":[{"id":"94529","content":"åªè¦æ˜¯ç­‰ä»·çš„ï¼Œå°±å¯ä»¥ã€‚<br>åªä¸è¿‡ï¼Œè¿™ç§ä»£ç é€šå¸¸éƒ½æ˜¯ç”±ç¼–è¯‘å™¨æœºæ¢°çš„ç”Ÿæˆçš„ï¼Œå®ƒä¼šæŒ‰ç…§ä¸€ä¸ªå›ºå®šçš„å¥—è·¯æ¥ç”Ÿæˆä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1604999673,"ip_address":"","comment_id":255507,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603360414","product_id":100034101,"comment_content":"_fun1:    # å‡½æ•°è°ƒç”¨çš„åºæ›²,è®¾ç½®æ ˆæŒ‡é’ˆ    <br>pushq   %rbp           # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§åº•éƒ¨åœ°å€ä¿å­˜èµ·æ¥       <br>movq    %rsp, %rbp     # æŠŠè°ƒç”¨è€…çš„æ ˆå¸§é¡¶éƒ¨åœ°å€,è®¾ç½®ä¸ºæœ¬æ ˆå¸§çš„åº•éƒ¨    <br>movl    $10, -4(%rbp)  # å˜é‡cèµ‹å€¼ä¸º10,ä¹Ÿå¯ä»¥å†™æˆ movl $10, (%rsp)<br>è¿™é‡Œä¸èƒ½å†™æˆmovl $10, (%rsp)å§ï¼Œä¸Šä¸€æ­¥movq %rsp %rbpå·²ç»æŠŠ%rbpçš„å€¼è®¾ä¸º%rspä¸€æ ·äº†","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507737,"discussion_content":"åªè¦æ˜¯ç­‰ä»·çš„ï¼Œå°±å¯ä»¥ã€‚\nåªä¸è¿‡ï¼Œè¿™ç§ä»£ç é€šå¸¸éƒ½æ˜¯ç”±ç¼–è¯‘å™¨æœºæ¢°çš„ç”Ÿæˆçš„ï¼Œå®ƒä¼šæŒ‰ç…§ä¸€ä¸ªå›ºå®šçš„å¥—è·¯æ¥ç”Ÿæˆä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604999673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180573,"user_name":"éª¨æ±¤é¸¡è›‹é¢","can_delete":false,"product_type":"c1","uid":1050002,"ip_address":"","ucode":"2AC141A523E710","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/92/b609f7e3.jpg","comment_is_top":false,"comment_ctime":1582339910,"is_pvip":true,"replies":[{"id":"74198","content":"å¿…é¡»æ˜¯å¶å­å‡½æ•°æ‰å¯ä»¥ã€‚<br>ä¸‹é¢æ˜¯https:&#47;&#47;en.wikipedia.org&#47;wiki&#47;X86_calling_conventions<br>ä¸­æ‘˜çš„ä¸€æ®µï¼Œä»‹ç»System V AMD64 ABIçš„å†…å®¹ï¼Œä½ å¯ä»¥çœ‹çœ‹ï¼š<br>For leaf-node functions (functions which do not call any other function(s)), a 128-byte space is stored just beneath the stack pointer of the function. The space is called red-zone. This zone will not be clobbered by any signal or interrupt handlers. Compilers can thus utilize this zone to save local variables. Compilers may omit some instructions at the starting of the function (adjustment of RSP, RBP) by utilizing this zone. However, other functions may clobber this zone. Therefore, this zone should only be used for leaf-node functions. gcc and clang offer the -mno-red-zone flag to disable red-zone optimizations.","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1585140029,"ip_address":"","comment_id":180573,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582339910","product_id":100034101,"comment_content":"åœ¨â€œåŒæ—¶ä½¿ç”¨å¯„å­˜å™¨å’Œæ ˆæ¥ä¼ å‚â€é‚£ä¸€äº›å°èŠ‚ï¼Œä¸”%rsp å¹¶æœªæŒ‡å‘æ ˆçœŸå®çš„æœ€é¡¶éƒ¨ï¼Œé‚£ä¹ˆå½“åœ¨funé‡Œå†è°ƒç”¨å…¶å®ƒæ–¹æ³•æ—¶ï¼Œå…¶å®ƒæ–¹æ³• æ‰§è¡Œpushq %rbpï¼Œä¼šä¸ä¼šè¦†ç›–æ‰ -4(%rbp)çš„å€¼ï¼Œè¿›è€Œå‡ºé”™ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484719,"discussion_content":"å¿…é¡»æ˜¯å¶å­å‡½æ•°æ‰å¯ä»¥ã€‚\nä¸‹é¢æ˜¯https://en.wikipedia.org/wiki/X86_calling_conventions\nä¸­æ‘˜çš„ä¸€æ®µï¼Œä»‹ç»System V AMD64 ABIçš„å†…å®¹ï¼Œä½ å¯ä»¥çœ‹çœ‹ï¼š\nFor leaf-node functions (functions which do not call any other function(s)), a 128-byte space is stored just beneath the stack pointer of the function. The space is called red-zone. This zone will not be clobbered by any signal or interrupt handlers. Compilers can thus utilize this zone to save local variables. Compilers may omit some instructions at the starting of the function (adjustment of RSP, RBP) by utilizing this zone. However, other functions may clobber this zone. Therefore, this zone should only be used for leaf-node functions. gcc and clang offer the -mno-red-zone flag to disable red-zone optimizations.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585140029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140705,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1571035066,"is_pvip":false,"replies":[{"id":"54410","content":"macOSæ“ä½œç³»ç»Ÿï¼Œgnuæ±‡ç¼–å™¨ã€‚<br>Linuxä¸Šç”Ÿæˆçš„æ±‡ç¼–ç åº”è¯¥ä¹Ÿå·®ä¸å¤šï¼Œæœ‰äº›ç³»ç»Ÿè°ƒç”¨æ˜¯ä¸åŒçš„ã€‚<br>windowsä¸Šï¼Œä½ å°±è¦å®‰è£…ä¸€ä¸‹ç›¸å…³çš„ç¯å¢ƒäº†å’Œå·¥å…·äº†ï¼Œæ¯”å¦‚MinGWã€‚æˆ–è€…è£…ä¸€ä¸ªLinuxè™šæ‹Ÿæœºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å®«æ–‡å­¦Richard","uid":"1543380","ctime":1571044315,"ip_address":"","comment_id":140705,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1571035066","product_id":100034101,"comment_content":"è€å¸ˆçš„asç”¨çš„ä»€ä¹ˆç‰ˆæœ¬ï¼Œä¸ºä»€ä¹ˆæˆ‘ç”¨asæ±‡ç¼–æ–‡ç¨¿ä¸­çš„ä»£ç ä¼šå‡ºé”™ï¼ˆæ³¨é‡Šåˆ äº†ä¹Ÿä¸€æ ·ä¼šå‡ºé”™ï¼‰ï¼š<br><br>function-call2-craft.s: Assembler messages:<br>function-call2-craft.s:2: Error: no such instruction: `n-call2-craft.s å‡½æ•°è°ƒç”¨å’Œå‚æ•°ä¼ é€’&#39;<br>function-call2-craft.s:4: Error: character following name is not &#39;#&#39;<br>function-call2-craft.s:66: Error: character following name is not &#39;#&#39;<br>","like_count":0,"discussions":[{"author":{"id":1543380,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/d4/5972b7cc.jpg","nickname":"å®«æ–‡å­¦Richard","note":"","ucode":"09EADF0CB62C91","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470519,"discussion_content":"macOSæ“ä½œç³»ç»Ÿï¼Œgnuæ±‡ç¼–å™¨ã€‚\nLinuxä¸Šç”Ÿæˆçš„æ±‡ç¼–ç åº”è¯¥ä¹Ÿå·®ä¸å¤šï¼Œæœ‰äº›ç³»ç»Ÿè°ƒç”¨æ˜¯ä¸åŒçš„ã€‚\nwindowsä¸Šï¼Œä½ å°±è¦å®‰è£…ä¸€ä¸‹ç›¸å…³çš„ç¯å¢ƒäº†å’Œå·¥å…·äº†ï¼Œæ¯”å¦‚MinGWã€‚æˆ–è€…è£…ä¸€ä¸ªLinuxè™šæ‹Ÿæœºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571044315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1565396,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e2/d4/ef86ea64.jpg","nickname":"Front","note":"","ucode":"35593EA52F2EA6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341641,"discussion_content":"å„ä¸ªLinuxç‰ˆæœ¬ä¹‹é—´å¯èƒ½ä¼šæœ‰äº›å·®å¼‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610469078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1565396,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e2/d4/ef86ea64.jpg","nickname":"Front","note":"","ucode":"35593EA52F2EA6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341640,"discussion_content":"æˆ‘åœ¨Ubuntu18.04ä¸Šä¹Ÿç¢°åˆ°åŒæ ·çš„é—®é¢˜ã€‚è§£å†³çš„åŠæ³•æ˜¯å‚è€ƒç”±hello.cç”Ÿæˆçš„æ±‡ç¼–ä»£ç å¾®è°ƒï¼Œä¹Ÿåªæ”¹äº†sectionéƒ¨åˆ†é‚£ä¸ªprintfå‡½æ•°ï¼š\n        .file   &#34;function-call2-craft.c&#34;\n        .text\n        .global _fun1\n        .type _fun1, @function\n\n_fun1:\n\n    pushq   %rbp\n    movq    %rsp, %rbp\n\n    movl    $10, -4(%rbp)\n\n\n    movl    %edi, %eax\n    addl    %esi, %eax\n    addl    %edx, %eax\n    addl    %ecx, %eax\n    addl    %r8d, %eax\n    addl    %r9d, %eax\n    addl    16(%rbp), %eax\n    addl    24(%rbp), %eax\n\n    addl    -4(%rbp), %eax\n\n\n    popq    %rbp\n    retq\n\n    .globl  main\n    .type main, @function\nmain:\n\n\n    pushq   %rbp\n    movq    %rsp, %rbp\n\n    subq    $16, %rsp\n\n\n    movl    $1, %edi\n    movl    $2, %esi\n    movl    $3, %edx\n    movl    $4, %ecx\n    movl    $5, %r8d\n    movl    $6, %r9d\n    movl    $7, (%rsp)\n    movl    $8, 8(%rsp)\n\n    callq   _fun1\n\n\n    leaq    L_.str(%rip), %rdi\n    movl    %eax, %esi\n\n    callq   printf@PLT\n\n\n    movl    $0, %eax\n\n    addq    $16, %rsp\n\n\n    popq    %rbp\n    retq\n\n\nL_.str:\n    .asciz  &#34;fun1 :%d \\n&#34;\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610468958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}