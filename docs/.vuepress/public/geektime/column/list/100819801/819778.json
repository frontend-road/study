{"id":819778,"title":"阶段复习（三）｜一个企业私域AI搜索的问答产品，竟然涉及这么多知识点！","content":"<p>你好，我是晓蕾。这节课我们来复习怎么做一个企业私域AI搜索产品。</p><p>这部分对应的是8-10课的内容，我在做知识小卡片的时候发现：原来涉及的知识点有这么多！</p><p>为了让这节课的复习效果更好，我决定变化一下复习思路，先从产品视角重温一下“企业私域AI搜索”这个产品，这段话会包含很多知识点。</p><p>请看：</p><blockquote>\n<p>企业 AI 搜索产品，相当于一个善于倾听、表达、思维活跃的智者。<br>\n<strong>　</strong><br>\n他首先会倾听你的想法（意图识别），通过上下文将你的问题归类到他早已整理好的问题分类里。这些问题分类可能是基于内容分的，也可能是基于问题的解决方法（要通过访问数据库还是调用搜索引擎等）来分的。<br>\n<strong>　</strong><br>\n然后他转述成自己的语言（Query 重写），使用问题转述、拆解等方法尽可能地从自己的知识库中搜索到对应内容。<br>\n<strong>　</strong><br>\n最后，他拿到这些检索结果后，反复审视（ReAct），重新规划问题解决思路（Plan-and-Solve）；并且在生成回答后还会再核对一下答案（反思）。这个过程会灵活运用各种工具来完成。</p>\n</blockquote><p>上面这段话，很明显包含意图识别、Query重写、Query路由，Agent生成模式这些关键词，甚至在他们的背后，还有需要我们掌握的内容。接下来，我们就一起逐个击破这些知识点。</p><h2>问题一：什么是企业私域 AI 搜索？</h2><!-- [[[read_end]]] --><p>某些大型企业客户，也就是 KA（Key Account）客户，往往需要的是一整套解决方案，比如一个完整的企业级知识管理 AI 升级解决方案。听起来和RAG差不多，那为什么我们还要拎出来单独讲解呢？企业私域的AI搜索和RAG有什么区别呢？</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/53/2ebf23556be4eba9420f33bec435ef53.png?wh=3425x4506\" alt=\"\"></p><h2>问题二：如何完成意图识别？</h2><p>“意图识别”相当于首先让你的产品学会倾听、理解用户的真实意图。它也是各种“对话类”产品中的必做部分。</p><p><img src=\"https://static001.geekbang.org/resource/image/e0/a2/e0a3147bbd47125bb3d3498433c44ba2.png?wh=3600x4678\" alt=\"\"></p><h2>问题三：如何完成Query重写？</h2><p>看字面意思，Query 重写就是把用户的输入换一种说法来写。为什么要这么做呢？具体怎么完成呢？</p><p><img src=\"https://static001.geekbang.org/resource/image/e5/10/e53d73d8f1b98f6bb82a53c3f53a8510.png?wh=3449x4794\" alt=\"\"></p><h2>问题四：如何完成 Query 路由？</h2><p>Query 路由，简单来说就是为 Query 找到正确的数据源。</p><p><img src=\"https://static001.geekbang.org/resource/image/11/61/11bc20f325d537edbcc9879e37a25b61.png?wh=3422x5358\" alt=\"\"></p><h2>问题五：为什么会提到 Agent 设计模式？</h2><p>为什么我们不能直接把检索结果发给大模型，让它自己生成回答？这有什么难的呢？</p><p>可是，你有没有想过以下几种情况：生成回答前，发现检索结果中没有答案怎么办？生成回答的过程中，有些复杂问题会衍生出来新的问题怎么办？生成回答后，发现回答和检索结果内容不符怎么办？</p><p>这时候，我们就要用到 “Agent 设计模式”这个知识点了。</p><p><img src=\"https://static001.geekbang.org/resource/image/98/ae/985bf3f3bb29b333c0d031936921ffae.png?wh=4340x14508\" alt=\"\"></p><h2>问题六：如何生成企业私域AI搜索的回答？</h2><p>这一步需要我们对每一个场景都有深刻的理解。而且，初步确定这些设计模式后，还需要在初始提示词的基础上根据真实使用反复迭代。这个迭代的过程是非常漫长的，可能要经过几个月甚至 1-2 年的迭代。到最后，你可能会发现本质上所有的 Agent 设计模式都是将人类的思维、管理模式以结构化 prompt 的方式告诉大模型来进行规划，并调用工具执行，且不断迭代（反思）的过程。</p><p><img src=\"https://static001.geekbang.org/resource/image/36/6d/3682dc4707c927e3e40caeebf6a1876d.png?wh=3024x3196\" alt=\"\"></p><h2>在这个产品中，产品经理的主要任务是什么？</h2><p>最后，我们大致梳理一下产品经理在这个产品中的主要任务。不过注意，千万不要抱着“那我只做这些就好了”的想法。向前迈一步，往往会有更大的收获哦！</p><p><img src=\"https://static001.geekbang.org/resource/image/e3/3b/e3c7614d404d777feyye517d695c8e3b.png?wh=4103x1303\" alt=\"\"></p><p>最后，老规矩，提醒一下这几节课的课后作业，如果你还没有做，没关系，这三次作业关系非常密切，强烈推荐你一次完成，绝对酸爽。</p><ul>\n<li><strong>作业一</strong></li>\n</ul><p>将你熟悉的语料，比如你关注的微信公众号内容、知乎问答等按照领域分类，然后将你平时在学习、工作中遇到的问题积累起来，也按照这个领域进行分类；这样你就得到一系列的“问题 &lt;-&gt; 意图分类”数据对。</p><p>然后，选定一个大模型（比如智谱的 ChatGLM)，看看模型是否能对你的问题进行准确的意图识别，如果不能，考虑修改你的提示词，直到可以准确识别为止。</p><p>这样你就完成了打造个人私域 AI 搜索的第一步。</p><ul>\n<li><strong>作业二</strong></li>\n</ul><p>对自己的问题做好分类，确定每种类别做合适的 Query 重写方法。之后将自己的知识库按工作、生活、学习这几个种类（或者其他维度）分类，建好知识库（你可以使用 Coze、Dify），然后做一个简单的 Query 路由，试着将你的问题路由到不同知识库进行回答。</p><p>你可以观察：</p><ol>\n<li>\n<p>Query 重写对检索结果的准确率是否有所提升？</p>\n</li>\n<li>\n<p>你的 Query 是否可以正确地被路由到对应的知识库呢？</p>\n</li>\n</ol><ul>\n<li><strong>作业三</strong></li>\n</ul><p>前两次作业，我们完成了个人私域 AI 搜索的意图识别、query 重写、路由。</p><p>在 Coze、Dify 中的最后一步，大语言模型生成回答的时候，请你组合使用 ReAct 模式、Plan-and-Solve 模式、反思模式来回答问题。你也可以尝试一个问题用 “ReAct 模式 + 反思模式” 和 “Plan-and-Solve 模式 + 反思模式” 来分别回答。看看到底哪种模式回答得更准确？</p><p>好啦，欢迎你在留言区分享你的成果，交流遇到的问题。另外，关于专栏，如果你有什么建议或更好的想法，也欢迎你分享在留言区，我一定会关注。如果你觉得这门课有所帮助，欢迎把课程分享给同事或朋友，我们下节复习课见！</p>","neighbors":{"left":{"article_title":"阶段复习（二）｜找场景，做Demo，优化交互，一站式搞定！","id":819319},"right":{"article_title":"阶段复习（四）｜设计一个能做事Agent（内含技术小白也能读懂的LoRA微调过程）","id":820094}},"comments":[]}