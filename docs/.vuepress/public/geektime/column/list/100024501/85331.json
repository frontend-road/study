{"id":85331,"title":"02 | App 启动速度怎么做优化与监控？","content":"<p>你好，我是戴铭。</p><p>我已经在专栏的第一篇文章中，和你梳理了一份iOS开发的知识体系框架图。今天，我们就正式从基础出发，开始自己的iOS开发知识体系构建之路吧。接下来，我就先和你聊聊与App启动速度密切相关的那些事儿。希望你听我说完启动速度的事儿之后，在专栏里的学习状态也能够快速地启动起来。</p><p>在文章开始前，我们先设想这么一个场景：假设你在排队结账时，掏出手机打开App甲准备扫码支付，结果半天进不去，后面排队的人给你压力够大吧。然后，你又打开App乙，秒进，支付完成。试想一下，以后再支付时你会选择哪个App呢。</p><p>不难想象，在提供的功能和服务相似的情况下，一款App的启动速度，不单单是用户体验的事情，往往还决定了它能否获取更多的用户。这就好像陌生人第一次碰面，第一感觉往往决定了他们接下来是否会继续交往。</p><p>由此可见，启动速度的优化必然就是App开发过程中，不可或缺的一个环节。接下来，我就先和你一起分析下App在启动时都做了哪些事儿。</p><h2>App 启动时都干了些什么事儿？</h2><p>一般情况下，App的启动分为冷启动和热启动。</p><ul>\n<li>冷启动是指， App 点击启动前，它的进程不在系统里，需要系统新创建一个进程分配给它启动的情况。这是一次完整的启动过程。</li>\n<li>热启动是指 ，App 在冷启动后用户将 App 退后台，在 App 的进程还在系统里的情况下，用户重新启动进入 App 的过程，这个过程做的事情非常少。</li>\n</ul><!-- [[[read_end]]] --><p>所以，今天这篇文章，我们就只展开讲App冷启动的优化。</p><p>用户能感知到的启动慢，其实都发生在主线程上。而主线程慢的原因有很多，比如在主线程上执行了大文件读写操作、在渲染周期中执行了大量计算等。但是，有时你会发现即使你把首屏显示之前的这些主线程的耗时问题都解决了，还是比竞品启动得慢。</p><p>那么，<strong>究竟如何才能把启动时的所有耗时都找出来呢？解决这个问题，你首先需要弄清楚 App在启动时都干了哪些事儿。</strong></p><p>一般而言，App的启动时间，指的是从用户点击App开始，到用户看到第一个界面之间的时间。总结来说，App的启动主要包括三个阶段：</p><ol>\n<li>\n<p>main() 函数执行前；</p>\n</li>\n<li>\n<p>main() 函数执行后；</p>\n</li>\n<li>\n<p>首屏渲染完成后。</p>\n</li>\n</ol><p>整个启动过程的示意图，如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/8a/81/8af7e23cd98c8add88e2f8ed3405ed81.png?wh=2732*2048\" alt=\"\"></p><center><span class=\"reference\">图1 App的整个启动过程</span></center><h3>main() 函数执行前</h3><p>在 main() 函数执行前，系统主要会做下面几件事情：</p><ul>\n<li>加载可执行文件（App的.o文件的集合）；</li>\n<li>加载动态链接库，进行 rebase 指针调整和 bind 符号绑定；</li>\n<li>Objc 运行时的初始处理，包括 Objc 相关类的注册、category 注册、selector 唯一性检查等；</li>\n<li>初始化，包括了执行 +load() 方法、attribute((constructor)) 修饰的函数的调用、创建 C++ 静态全局变量。</li>\n</ul><p>相应地，这个阶段对于启动速度优化来说，可以做的事情包括：</p><ul>\n<li>减少动态库加载。每个库本身都有依赖关系，苹果公司建议使用更少的动态库，并且建议在使用动态库的数量较多时，尽量将多个动态库进行合并。数量上，苹果公司建议最多使用 6 个非系统动态库。</li>\n<li>减少加载启动后不会去使用的类或者方法。</li>\n<li>+load() 方法里的内容可以放到首屏渲染完成后再执行，或使用 +initialize() 方法替换掉。因为，在一个 +load() 方法里，进行运行时方法替换操作会带来 4 毫秒的消耗。不要小看这4毫秒，积少成多，执行+load() 方法对启动速度的影响会越来越大。</li>\n<li>控制C++ 全局变量的数量。</li>\n</ul><h3>main() 函数执行后</h3><p>main() 函数执行后的阶段，指的是从main()函数执行开始，到appDelegate 的 didFinishLaunchingWithOptions 方法里首屏渲染相关方法执行完成。</p><p>首页的业务代码都是要在这个阶段，也就是首屏渲染前执行的，主要包括了：</p><ul>\n<li>首屏初始化所需配置文件的读写操作；</li>\n<li>首屏列表大数据的读取；</li>\n<li>首屏渲染的大量计算等。</li>\n</ul><p>很多时候，开发者会把各种初始化工作都放到这个阶段执行，导致渲染完成滞后。<strong>更加优化的开发方式，应该是</strong>从功能上梳理出哪些是首屏渲染必要的初始化功能，哪些是 App 启动必要的初始化功能，而哪些是只需要在对应功能开始使用时才需要初始化的。梳理完之后，将这些初始化功能分别放到合适的阶段进行。</p><h3>首屏渲染完成后</h3><p>首屏渲染后的这个阶段，主要完成的是，非首屏其他业务服务模块的初始化、监听的注册、配置文件的读取等。从函数上来看，这个阶段指的就是截止到 didFinishLaunchingWithOptions 方法作用域内执行首屏渲染之后的所有方法执行完成。简单说的话，这个阶段就是从渲染完成时开始，到 didFinishLaunchingWithOptions 方法作用域结束时结束。</p><p>这个阶段用户已经能够看到 App 的首页信息了，所以优化的优先级排在最后。但是，那些会卡住主线程的方法还是需要最优先处理的，不然还是会影响到用户后面的交互操作。</p><p>明白了App启动阶段需要完成的工作后，我们就可以有的放矢地进行启动速度的优化了。这些优化，包括了功能级别和方法级别的启动优化。接下来，我们就从这两个角度展开看看。</p><h2>功能级别的启动优化</h2><p>我想，你所在的团队一定面临过启动阶段的代码功能堆积、无规范、难维护的问题吧。在 App 项目开发初期，开发人员不多、代码量也没那么大时，这种情况比较少见。但到了后期 ，App 业务规模扩大，团队人员水平参差不齐，各种代码问题就会爆发出来，终归需要来次全面治理。</p><p>而全面治理过程中的手段、方法和碰到的问题，对于后面的规范制定以及启动速度监控都有着重要的意义。那么，我们要怎样从功能级别来进行全面的启动优化治理呢？</p><p>功能级别的启动优化，就是要从main() 函数执行后这个阶段下手。</p><p>优化的思路是： main() 函数开始执行后到首屏渲染完成前只处理首屏相关的业务，其他非首屏业务的初始化、监听注册、配置文件读取等都放到首屏渲染完成后去做。如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/f3/19/f30f438d447e81132dd520e657427419.png?wh=2732*2048\" alt=\"\"></p><center><span class=\"reference\">图2 功能级别的启动优化示意图</span></center><h2>方法级别的启动优化</h2><p>经过功能级别的启动优化，也就是将非首屏业务所需的功能滞后以后，从用户点击 App 到看到首屏的时间将会有很大程度的缩短，也就达到了优化App启动速度的目的。</p><p>在这之后，我们需要进一步做的，是检查首屏渲染完成前主线程上有哪些耗时方法，将没必要的耗时方法滞后或者异步执行。通常情况下，耗时较长的方法主要发生在计算大量数据的情况下，具体的表现就是加载、编辑、存储图片和文件等资源。</p><p>那么，你觉得<strong>是不是只需要优化对资源的操作就可以了呢？</strong></p><p>当然不是。就像 +load() 方法，一个耗时4毫秒，100个就是400毫秒，这种耗时用户也是能明显感知到的。</p><p>比如，我以前使用的 ReactiveCocoa框架（这是一个 iOS 上的响应式编程框架），每创建一个信号都有6毫秒的耗时。这样，稍不注意各种信号的创建就都被放在了首屏渲染完成前，进而导致App的启动速度大幅变慢。</p><p>类似这样单个方法耗时不多，但是由于堆积导致App启动速度大幅变慢的方法数不胜数。所以，你需要一个能够对启动方法耗时进行全面、精确检查的手段。</p><p>那么问题来了，有哪些监控手段？这些监控手段各有什么优缺点？你又该如何选择呢？</p><p>目前来看，对App启动速度的监控，主要有两种手段。</p><p><strong>第一种方法是，定时抓取主线程上的方法调用堆栈，计算一段时间里各个方法的耗时</strong>。Xcode 工具套件里自带的 Time Profiler ，采用的就是这种方式。</p><p>这种方式的优点是，开发类似工具成本不高，能够快速开发后集成到你的 App 中，以便在真实环境中进行检查。</p><p>说到定时抓取，就会涉及到定时间隔的长短问题。</p><ul>\n<li>定时间隔设置得长了，会漏掉一些方法，从而导致检查出来的耗时不精确；</li>\n<li>而定时间隔设置得短了，抓取堆栈这个方法本身调用过多也会影响整体耗时，导致结果不准确。</li>\n</ul><p>这个定时间隔如果小于所有方法执行的时间（比如 0.002秒），那么基本就能监控到所有方法。但这样做的话，整体的耗时时间就不够准确。一般将这个定时间隔设置为0.01秒。这样设置，对整体耗时的影响小，不过很多方法耗时就不精确了。但因为整体耗时的数据更加重要些，单个方法耗时精度不高也是可以接受的，所以这个设置也是没问题的。</p><p>总结来说，定时抓取主线程调用栈的方式虽然精准度不够高，但也是够用的。</p><p><strong>第二种方法是，对 objc_msgSend 方法进行 hook 来掌握所有方法的执行耗时。</strong></p><p>hook 方法的意思是，在原方法开始执行时换成执行其他你指定的方法，或者在原有方法执行前后执行你指定的方法，来达到掌握和改变指定方法的目的。</p><p>hook objc_msgSend 这种方式的优点是非常精确，而缺点是只能针对 Objective-C 的方法。当然，对于 c 方法和 block 也不是没有办法，你可以使用 libffi 的 ffi_call 来达成 hook，但缺点就是编写维护相关工具门槛高。</p><p>关于，libffi 相关的内容，我会在后面的第35篇文章“libffi：动态调用和定义 C 函数”里和你详细说明。</p><p>综上，如果对于检查结果精准度要求高的话，我比较推荐你使用 hook objc_msgSend 方式来检查启动方法的执行耗时。</p><h2>如何做一个方法级别启动耗时检查工具来辅助分析和监控？</h2><p>使用 hook objc_msgSend 方式来检查启动方法的执行耗时时，我们需要实现一个称手的启动时间检查工具。那么，我们应该如何实现这个工具呢？</p><p>现在，我就一步一步地和你说说具体怎么做。</p><p>首先，你要了解<strong>为什么 hook 了 objc_msgSend 方法，就可以 hook 全部 Objective-C 的方法？</strong></p><p>Objective-C 里每个对象都会指向一个类，每个类都会有一个方法列表，方法列表里的每个方法都是由 selector、函数指针和 metadata 组成的。</p><p>objc_msgSend 方法干的活儿，就是在运行时根据对象和方法的selector 去找到对应的函数指针，然后执行。也就是说，objc_msgSend 是 Objective-C 里方法执行的必经之路，能够控制所有的 Objective-C 的方法。</p><p>objc_msgSend 本身是用汇编语言写的，这样做的原因主要有两个：</p><ul>\n<li>一个原因是，objc_msgSend 的调用频次最高，在它上面进行的性能优化能够提升整个 App 生命周期的性能。而汇编语言在性能优化上属于原子级优化，能够把优化做到极致。所以，这种投入产出比无疑是最大的。</li>\n<li>另一个原因是，其他语言难以实现未知参数跳转到任意函数指针的功能。</li>\n</ul><p>现在，苹果公司已经开源了Objective-C 的运行时代码。你可以在<a href=\"https://opensource.apple.com/source/objc4/objc4-723/runtime/Messengers.subproj/\">苹果公司的开源网站</a>，找到 objc_msgSend的源码。</p><p><img src=\"https://static001.geekbang.org/resource/image/70/b1/70b693ee775c26cb8b9dd3350fe1b3b1.png?wh=536*432\" alt=\"\"></p><center><span class=\"reference\">图3 objc_msgSend 全架构实现源代码文件列表</span></center><p>上图列出的是所有架构的实现，包括 x86_64 等。objc_msgSend 是 iOS 方式执行最核心的部分，编程领域的宝藏，值得你深入探究和细细品味。</p><p>objc_msgSend方法执行的逻辑是：先获取对象对应类的信息，再获取方法的缓存，根据方法的selector 查找函数指针，经过异常错误处理后，最后跳到对应函数的实现。</p><p>按照这个逻辑去看源码会更加清晰，更容易注意到实现细节。阅读 objc_msgSend 源码是编写方法级耗时工具的一个必要的环节，后面还需要编写一些对应的汇编代码。</p><p><strong>接下来，我们再看看怎么 hook objc_msgSend 方法？</strong></p><p>Facebook 开源了一个库，可以在iOS上运行的Mach-O二进制文件中动态地重新绑定符号，这个库叫 fishhook。你可以在GitHub 上，查看<a href=\"https://github.com/facebook/fishhook\">fishhook的代码</a>。</p><p>fishhook 实现的大致思路是，通过重新绑定符号，可以实现对 c 方法的 hook。dyld 是通过更新 Mach-O 二进制的 __DATA segment 特定的部分中的指针来绑定 lazy 和 non-lazy 符号，通过确认传递给 rebind_symbol 里每个符号名称更新的位置，就可以找出对应替换来重新绑定这些符号。</p><p>下面，我针对 fishhook 里的关键代码，和你具体说下 fishhook 的实现原理。</p><p><strong>首先</strong>，遍历 dyld 里的所有image，取出 image header 和 slide。代码如下：</p><pre><code>if (!_rebindings_head-&gt;next) {\n    _dyld_register_func_for_add_image(_rebind_symbols_for_image);\n} else {\n    uint32_t c = _dyld_image_count();\n    // 遍历所有 image\n    for (uint32_t i = 0; i &lt; c; i++) {\n        // 读取 image header 和 slider\n        _rebind_symbols_for_image(_dyld_get_image_header(i), _dyld_get_image_vmaddr_slide(i));\n    }\n}\n</code></pre><p><strong>接下来</strong>，找到符号表相关的 command，包括 linkedit segment command、symtab command 和 dysymtab command。代码如下：</p><pre><code>segment_command_t *cur_seg_cmd;\nsegment_command_t *linkedit_segment = NULL;\nstruct symtab_command* symtab_cmd = NULL;\nstruct dysymtab_command* dysymtab_cmd = NULL;\nuintptr_t cur = (uintptr_t)header + sizeof(mach_header_t);\nfor (uint i = 0; i &lt; header-&gt;ncmds; i++, cur += cur_seg_cmd-&gt;cmdsize) {\n    cur_seg_cmd = (segment_command_t *)cur;\n    if (cur_seg_cmd-&gt;cmd == LC_SEGMENT_ARCH_DEPENDENT) {\n        if (strcmp(cur_seg_cmd-&gt;segname, SEG_LINKEDIT) == 0) {\n            // linkedit segment command\n            linkedit_segment = cur_seg_cmd;\n        }\n    } else if (cur_seg_cmd-&gt;cmd == LC_SYMTAB) {\n        // symtab command\n        symtab_cmd = (struct symtab_command*)cur_seg_cmd;\n    } else if (cur_seg_cmd-&gt;cmd == LC_DYSYMTAB) {\n        // dysymtab command\n        dysymtab_cmd = (struct dysymtab_command*)cur_seg_cmd;\n    }\n}\n</code></pre><p><strong>然后，</strong>获得 base 和 indirect 符号表。实现代码如下：</p><pre><code>// 找到 base 符号表的地址\nuintptr_t linkedit_base = (uintptr_t)slide + linkedit_segment-&gt;vmaddr - linkedit_segment-&gt;fileoff;\nnlist_t *symtab = (nlist_t *)(linkedit_base + symtab_cmd-&gt;symoff);\nchar *strtab = (char *)(linkedit_base + symtab_cmd-&gt;stroff);\n// 找到 indirect 符号表\nuint32_t *indirect_symtab = (uint32_t *)(linkedit_base + dysymtab_cmd-&gt;indirectsymoff);\n</code></pre><p><strong>最后，</strong>有了符号表和传入的方法替换数组，就可以进行符号表访问指针地址的替换了，具体实现如下：</p><pre><code>uint32_t *indirect_symbol_indices = indirect_symtab + section-&gt;reserved1;\nvoid **indirect_symbol_bindings = (void **)((uintptr_t)slide + section-&gt;addr);\nfor (uint i = 0; i &lt; section-&gt;size / sizeof(void *); i++) {\n    uint32_t symtab_index = indirect_symbol_indices[i];\n    if (symtab_index == INDIRECT_SYMBOL_ABS || symtab_index == INDIRECT_SYMBOL_LOCAL ||\n        symtab_index == (INDIRECT_SYMBOL_LOCAL   | INDIRECT_SYMBOL_ABS)) {\n        continue;\n    }\n    uint32_t strtab_offset = symtab[symtab_index].n_un.n_strx;\n    char *symbol_name = strtab + strtab_offset;\n    if (strnlen(symbol_name, 2) &lt; 2) {\n        continue;\n    }\n    struct rebindings_entry *cur = rebindings;\n    while (cur) {\n        for (uint j = 0; j &lt; cur-&gt;rebindings_nel; j++) {\n            if (strcmp(&amp;symbol_name[1], cur-&gt;rebindings[j].name) == 0) {\n                if (cur-&gt;rebindings[j].replaced != NULL &amp;&amp;\n                    indirect_symbol_bindings[i] != cur-&gt;rebindings[j].replacement) {\n                    *(cur-&gt;rebindings[j].replaced) = indirect_symbol_bindings[i];\n                }\n                // 符号表访问指针地址的替换\n                indirect_symbol_bindings[i] = cur-&gt;rebindings[j].replacement;\n                goto symbol_loop;\n            }\n        }\n        cur = cur-&gt;next;\n    }\nsymbol_loop:;\n</code></pre><p>以上，就是 fishhook 的实现原理了。fishhook 是对底层的操作，其中查找符号表的过程和堆栈符号化实现原理基本类似，了解了其中原理对于理解可执行文件 Mach-O 内部结构会有很大的帮助。</p><p>接下来，我们再看一个问题：<strong>只靠 fishhook 就能够搞定 objc_msgSend 的 hook 了吗？</strong></p><p>当然还不够。我前面也说了，objc_msgSend 是用汇编语言实现的，所以我们还需要从汇编层面多加点料。</p><p>你需要先实现两个方法 pushCallRecord 和 popCallRecord，来分别记录 objc_msgSend 方法调用前后的时间，然后相减就能够得到方法的执行耗时。</p><p>下面我针对arm64架构，编写一个可保留未知参数并跳转到 c 中任意函数指针的汇编代码，实现对 objc_msgSend 的 Hook。</p><p>arm64 有31个64 bit 的整数型寄存器，分别用 x0 到 x30 表示。主要的实现思路是：</p><ol>\n<li>\n<p>入栈参数，参数寄存器是 x0~ x7。对于objc_msgSend方法来说，x0 第一个参数是传入对象，x1 第二个参数是选择器 _cmd。syscall 的 number 会放到 x8 里。</p>\n</li>\n<li>\n<p>交换寄存器中保存的参数，将用于返回的寄存器 lr 中的数据移到 x1 里。</p>\n</li>\n<li>\n<p>使用 bl label 语法调用 pushCallRecord 函数。</p>\n</li>\n<li>\n<p>执行原始的 objc_msgSend，保存返回值。</p>\n</li>\n<li>\n<p>使用 bl label 语法调用 popCallRecord 函数。</p>\n</li>\n</ol><p>具体的汇编代码，如下所示：</p><pre><code>static void replacementObjc_msgSend() {\n  __asm__ volatile (\n    // sp 是堆栈寄存器，存放栈的偏移地址，每次都指向栈顶。\n    // 保存 {q0-q7} 偏移地址到 sp 寄存器\n      &quot;stp q6, q7, [sp, #-32]!\\n&quot;\n      &quot;stp q4, q5, [sp, #-32]!\\n&quot;\n      &quot;stp q2, q3, [sp, #-32]!\\n&quot;\n      &quot;stp q0, q1, [sp, #-32]!\\n&quot;\n    // 保存 {x0-x8, lr}\n      &quot;stp x8, lr, [sp, #-16]!\\n&quot;\n      &quot;stp x6, x7, [sp, #-16]!\\n&quot;\n      &quot;stp x4, x5, [sp, #-16]!\\n&quot;\n      &quot;stp x2, x3, [sp, #-16]!\\n&quot;\n      &quot;stp x0, x1, [sp, #-16]!\\n&quot;\n    // 交换参数.\n      &quot;mov x2, x1\\n&quot;\n      &quot;mov x1, lr\\n&quot;\n      &quot;mov x3, sp\\n&quot;\n    // 调用 preObjc_msgSend，使用 bl label 语法。bl 执行一个分支链接操作，label 是无条件分支的，是和本指令的地址偏移，范围是 -128MB 到 +128MB\n      &quot;bl __Z15preObjc_msgSendP11objc_objectmP13objc_selectorP9RegState_\\n&quot;\n      &quot;mov x9, x0\\n&quot;\n      &quot;mov x10, x1\\n&quot;\n      &quot;tst x10, x10\\n&quot;\n    // 读取 {x0-x8, lr} 从保存到 sp 栈顶的偏移地址读起\n      &quot;ldp x0, x1, [sp], #16\\n&quot;\n      &quot;ldp x2, x3, [sp], #16\\n&quot;\n      &quot;ldp x4, x5, [sp], #16\\n&quot;\n      &quot;ldp x6, x7, [sp], #16\\n&quot;\n      &quot;ldp x8, lr, [sp], #16\\n&quot;\n    // 读取 {q0-q7}\n      &quot;ldp q0, q1, [sp], #32\\n&quot;\n      &quot;ldp q2, q3, [sp], #32\\n&quot;\n      &quot;ldp q4, q5, [sp], #32\\n&quot;\n      &quot;ldp q6, q7, [sp], #32\\n&quot;\n      &quot;b.eq Lpassthrough\\n&quot;\n    // 调用原始 objc_msgSend。使用 blr xn 语法。blr 除了从指定寄存器读取新的 PC 值外效果和 bl 一样。xn 是通用寄存器的64位名称分支地址，范围是0到31\n      &quot;blr x9\\n&quot;\n    // 保存 {x0-x9}\n      &quot;stp x0, x1, [sp, #-16]!\\n&quot;\n      &quot;stp x2, x3, [sp, #-16]!\\n&quot;\n      &quot;stp x4, x5, [sp, #-16]!\\n&quot;\n      &quot;stp x6, x7, [sp, #-16]!\\n&quot;\n      &quot;stp x8, x9, [sp, #-16]!\\n&quot;\n    // 保存 {q0-q7}\n      &quot;stp q0, q1, [sp, #-32]!\\n&quot;\n      &quot;stp q2, q3, [sp, #-32]!\\n&quot;\n      &quot;stp q4, q5, [sp, #-32]!\\n&quot;\n      &quot;stp q6, q7, [sp, #-32]!\\n&quot;\n    // 调用 postObjc_msgSend hook.\n      &quot;bl __Z16postObjc_msgSendv\\n&quot;\n      &quot;mov lr, x0\\n&quot;\n    // 读取 {q0-q7}\n      &quot;ldp q6, q7, [sp], #32\\n&quot;\n      &quot;ldp q4, q5, [sp], #32\\n&quot;\n      &quot;ldp q2, q3, [sp], #32\\n&quot;\n      &quot;ldp q0, q1, [sp], #32\\n&quot;\n    // 读取 {x0-x9}\n      &quot;ldp x8, x9, [sp], #16\\n&quot;\n      &quot;ldp x6, x7, [sp], #16\\n&quot;\n      &quot;ldp x4, x5, [sp], #16\\n&quot;\n      &quot;ldp x2, x3, [sp], #16\\n&quot;\n      &quot;ldp x0, x1, [sp], #16\\n&quot;\n      &quot;ret\\n&quot;\n      &quot;Lpassthrough:\\n&quot;\n    // br 无条件分支到寄存器中的地址\n      &quot;br x9&quot;\n    );\n}\n</code></pre><p>现在，你就可以得到每个 Objective-C 方法的耗时了。接下来，我们再看看<strong>怎样才能够做到像下图那样记录和展示方法调用的层级关系和顺序呢？</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/b0/62/b08872e98b3090147d22d359a2a29062.png?wh=2378*996\" alt=\"\"></p><center><span class=\"reference\">图4 方法调用层级和顺序</span></center><p>不要着急，我来一步一步地跟你说。</p><p><strong>第一步，</strong>设计两个结构体：CallRecord 记录调用方法详细信息，包括 obj 和 SEL 等；ThreadCallStack 里面，需要用 index 记录当前调用方法树的深度。</p><p>有了 SEL 再通过 NSStringFromSelector 就能够取得方法名，有了 obj 通过 object_getClass 能够得到 Class ，再用 NSStringFromClass 就能够获得类名。结构的完整代码如下：</p><pre><code>// Shared structures.\ntypedef struct CallRecord_ {\n  id obj;   //通过 object_getClass 能够得到 Class 再通过 NSStringFromClass 能够得到类名\n  SEL _cmd; //通过 NSStringFromSelector 方法能够得到方法名\n  uintptr_t lr;\n  int prevHitIndex;\n  char isWatchHit;\n} CallRecord;\ntypedef struct ThreadCallStack_ {\n  FILE *file;\n  char *spacesStr;\n  CallRecord *stack;\n  int allocatedLength;\n  int index; //index 记录当前调用方法树的深度\n  int numWatchHits;\n  int lastPrintedIndex;\n  int lastHitIndex;\n  char isLoggingEnabled;\n  char isCompleteLoggingEnabled;\n} ThreadCallStack;\n</code></pre><p><strong>第二步，</strong>pthread_setspecific() 可以将私有数据设置在指定线程上，pthread_getspecific() 用来读取这个私有数据。利用这个特性，我们就可以将 ThreadCallStack 的数据和该线程绑定在一起，随时进行数据存取。代码如下：</p><pre><code>static inline ThreadCallStack * getThreadCallStack() {\n  ThreadCallStack *cs = (ThreadCallStack *)pthread_getspecific(threadKey); //读取\n  if (cs == NULL) {\n    cs = (ThreadCallStack *)malloc(sizeof(ThreadCallStack));\n#ifdef MAIN_THREAD_ONLY\n    cs-&gt;file = (pthread_main_np()) ? newFileForThread() : NULL;\n#else\n    cs-&gt;file = newFileForThread();\n#endif\n    cs-&gt;isLoggingEnabled = (cs-&gt;file != NULL);\n    cs-&gt;isCompleteLoggingEnabled = 0;\n    cs-&gt;spacesStr = (char *)malloc(DEFAULT_CALLSTACK_DEPTH + 1);\n    memset(cs-&gt;spacesStr, ' ', DEFAULT_CALLSTACK_DEPTH);\n    cs-&gt;spacesStr[DEFAULT_CALLSTACK_DEPTH] = '\\0';\n    cs-&gt;stack = (CallRecord *)calloc(DEFAULT_CALLSTACK_DEPTH, sizeof(CallRecord)); //分配 CallRecord 默认空间\n    cs-&gt;allocatedLength = DEFAULT_CALLSTACK_DEPTH;\n    cs-&gt;index = cs-&gt;lastPrintedIndex = cs-&gt;lastHitIndex = -1;\n    cs-&gt;numWatchHits = 0;\n    pthread_setspecific(threadKey, cs); //保存数据\n  }\n  return cs;\n}\n</code></pre><p><strong>第三步，</strong>因为要记录深度，而一个方法的调用里会有更多的方法调用，所以我们可以在方法的调用里增加两个方法 pushCallRecord 和 popCallRecord，分别记录方法调用的开始时间和结束时间，这样才能够在开始时对深度加一、在结束时减一。</p><pre><code>//开始时\nstatic inline void pushCallRecord(id obj, uintptr_t lr, SEL _cmd, ThreadCallStack *cs) {\n  int nextIndex = (++cs-&gt;index); //增加深度\n  if (nextIndex &gt;= cs-&gt;allocatedLength) {\n    cs-&gt;allocatedLength += CALLSTACK_DEPTH_INCREMENT;\n    cs-&gt;stack = (CallRecord *)realloc(cs-&gt;stack, cs-&gt;allocatedLength * sizeof(CallRecord));\n    cs-&gt;spacesStr = (char *)realloc(cs-&gt;spacesStr, cs-&gt;allocatedLength + 1);\n    memset(cs-&gt;spacesStr, ' ', cs-&gt;allocatedLength);\n    cs-&gt;spacesStr[cs-&gt;allocatedLength] = '\\0';\n  }\n  CallRecord *newRecord = &amp;cs-&gt;stack[nextIndex];\n  newRecord-&gt;obj = obj;\n  newRecord-&gt;_cmd = _cmd;\n  newRecord-&gt;lr = lr;\n  newRecord-&gt;isWatchHit = 0;\n}\n//结束时\nstatic inline CallRecord * popCallRecord(ThreadCallStack *cs) {\n  return &amp;cs-&gt;stack[cs-&gt;index--]; //减少深度\n}\n</code></pre><p>耗时检查的完整代码，你可以在<a href=\"https://github.com/ming1016/GCDFetchFeed\">我的开源项目</a>里查看。在需要检测耗时时间的地方调用 [SMCallTrace start]，结束时调用 stop 和 save 就可以打印出方法的调用层级和耗时了。你还可以设置最大深度和最小耗时检测，来过滤不需要看到的信息。</p><p>有了这样一个检查方法耗时的工具，你就可以在每个版本开发结束后执行一次检查，统计总耗时以及启动阶段每个方法的耗时，有针对性地观察启动速度慢的问题。如果你在线上做个灰度开关，还可以监控线上启动慢的一些特殊情况。</p><h2>小结</h2><p>启动速度优化和监控的重要性不言而喻，加快 App 的启动速度对用户的体验提升是最大的。</p><p>启动速度的优化也有粗有细：粗上来讲，这需要对启动阶段功能进行分类整理，合理地将和首屏无关的功能滞后，放到首屏渲染完成之后，保证大头儿没有问题；细的来讲，这就需要些匠人精神，使用合适的工具，针对每个方法进行逐个分析、优化，每个阶段都做到极致。</p><h2>课后作业</h2><p>按照今天文中提到的 Time Profiler 工具检查方法耗时的原理，你来动手实现一个方法耗时检查工具吧。</p><p>感谢你的收听，欢迎你在评论区给我留言分享你的观点，也欢迎把它分享给更多的朋友一起阅读。</p><p><span class=\"reference\">最近，我收到一些同学的反馈，说这门课的一些内容比较深，一时难以琢磨透。如果你也有这样的感受，推荐你学习极客时间刚刚上新的另一门视频课程：由腾讯高级工程师朱德权，主讲的《从 0 开发一款 iOS App》。</span></p><p><span class=\"reference\">朱德权老师将会基于最新技术，从实践出发，手把手带你构建类今日头条的App。要知道，那些很牛的 iOS 开发者，往往都具备独立开发一款 App 的能力。</span></p><p><span class=\"reference\">这门课正在上新优惠，欢迎点击<a href=\"https://time.geekbang.org/course/intro/169?utm_term=zeusKHUZ0&amp;utm_source=app&amp;utm_medium=geektime&amp;utm_campaign=169-presell&amp;utm_content=daiming\">这里</a>试看。</span></p>","comments":[{"had_liked":false,"id":76009,"user_name":"好多余先生丶","can_delete":false,"product_type":"c1","uid":1453704,"ip_address":"","ucode":"1F2E9A20EF2C6E","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/88/0f0c19b2.jpg","comment_is_top":true,"comment_ctime":1552523683,"is_pvip":false,"replies":[{"id":"27759","content":"可以从作业入手，学习不能着急，需要慢慢来，多重复就会有更多体会","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552544496,"ip_address":"","comment_id":76009,"utype":1}],"discussion_count":3,"race_medal":0,"score":"9.2233725366234993e+18","product_id":100024501,"comment_content":"完了，上来就懵逼","like_count":117,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443131,"discussion_content":"可以从作业入手，学习不能着急，需要慢慢来，多重复就会有更多体会","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552544496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1460977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4a/f1/e3b02c6d.jpg","nickname":"莫言","note":"","ucode":"3B5782B58BFD18","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216113,"discussion_content":"往后看，后面有讲符号链接那部分的详细","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585406581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132304,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/10/2d673601.jpg","nickname":"好饿早知道送外卖了","note":"","ucode":"AED22DB5BF8FC7","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1702,"discussion_content":"真好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562829360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75951,"user_name":"Neo","can_delete":false,"product_type":"c1","uid":1114192,"ip_address":"","ucode":"E550EE23F74559","user_header":"https://static001.geekbang.org/account/avatar/00/11/00/50/a512d08d.jpg","comment_is_top":true,"comment_ctime":1552496719,"is_pvip":false,"replies":[{"id":"27747","content":"汇编语言入门可以看阮一峰老师的《汇编语言入门教程》啊。链接是 http:&#47;&#47;www.ruanyifeng.com&#47;blog&#47;2018&#47;01&#47;assembly-language-primer.html 。以后可以考虑写个 iOS 视角的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552540154,"ip_address":"","comment_id":75951,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233721500763996e+18","product_id":100024501,"comment_content":"不错  提纲挈领  希望汇编那块能稍微细讲一下  没有太多写汇编的经验","like_count":26,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443101,"discussion_content":"汇编语言入门可以看阮一峰老师的《汇编语言入门教程》啊。链接是 http://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html 。以后可以考虑写个 iOS 视角的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552540154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76602,"user_name":"Glenn•D","can_delete":false,"product_type":"c1","uid":1248058,"ip_address":"","ucode":"CAC204DAA83C22","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/3a/6b936a95.jpg","comment_is_top":true,"comment_ctime":1552640259,"is_pvip":true,"replies":[{"id":"27931","content":"需要真机，arm64芯片，模拟器是 x86","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552647139,"ip_address":"","comment_id":76602,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720512922993e+18","product_id":100024501,"comment_content":"模拟器上试了一下耗时检查没有效果","like_count":3,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443373,"discussion_content":"需要真机，arm64芯片，模拟器是 x86","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552647139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76076,"user_name":"冯选刚","can_delete":false,"product_type":"c1","uid":1018444,"ip_address":"","ucode":"A186F31A730F04","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/4c/d976b42c.jpg","comment_is_top":false,"comment_ctime":1552528319,"is_pvip":false,"discussion_count":19,"race_medal":0,"score":"753171805119","product_id":100024501,"comment_content":"学到了，启动时间搞的太短，领导说加个sleep，别人都看不到我们的欢迎页了","like_count":175,"discussions":[{"author":{"id":1458376,"avatar":"https://static001.geekbang.org/account/avatar/00/16/40/c8/c45bc517.jpg","nickname":"文若书生","note":"","ucode":"098F15A9E88E4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3731,"discussion_content":"看到此兄弟的评论,深有同感的笑了..","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1564736991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003992,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/51/d8/71ef5aa1.jpg","nickname":"ChenJz","note":"","ucode":"AF2F8D9015BE5D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4538,"discussion_content":"同理，测试给我提了个 bug","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1565528163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1949226,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eolXiaTCNicFWdLVFp5QDI0hQwz2BdhCCLnTRFwsa0mLT5Ve8LFRWgmDu5prZOaxuHvuVZwcqFYzVWg/132","nickname":"Geek_2a295e","note":"","ucode":"A7EBB06191D502","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223947,"discussion_content":"哈哈哈，我们领导也是这个要求","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1586263570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1260782,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3c/ee/18f48590.jpg","nickname":"Swift_yong","note":"","ucode":"19AE116EB7BCF0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286858,"discussion_content":"遇到一样逗比的需求","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593311921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1455122,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/dGGx1XP9f5NjJrw18VmQsWfMib8lIL228XtvbwseFzuAc0XNWhmfxyMZKJfhza7pegn0OZgvdBNCa3Q6dfLMsOg/132","nickname":"子钝","note":"","ucode":"3EE70675015E2E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":44970,"discussion_content":"无话可说","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572996709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1683490,"avatar":"https://static001.geekbang.org/account/avatar/00/19/b0/22/75941304.jpg","nickname":"wj_","note":"","ucode":"13B481288685A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560560,"discussion_content":"哈哈哈，原来大家的领导都一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649389451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2858088,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqLlZ7ibJqRocm0EM4YF8iaJJFeicGI9U0gh5ZLeWTjXeicOFlT4tjKtIz8SpGqBPXAspLMbWD5GnrdhQ/132","nickname":"痴人指路","note":"","ucode":"302C8ACA410F38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548385,"discussion_content":"让客户加钱优化哇","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643172669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2697896,"avatar":"","nickname":"刘木德","note":"","ucode":"852AD74D6FEF2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386816,"discussion_content":"领导说：这闪一下就进去了，啥都没看到，还搞得眼睛都花了，用户体验不好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627815563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2061978,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/76/9a/d26031bc.jpg","nickname":"MINT🍀","note":"","ucode":"ED50ED615749B7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363456,"discussion_content":"哈哈哈现在手机性能好了，启动屏真就一闪而过真就看不清。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617199152,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1472865,"avatar":"https://static001.geekbang.org/account/avatar/00/16/79/61/ea517716.jpg","nickname":"西门桃桃","note":"","ucode":"B1038AAA988F8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360931,"discussion_content":"笑死我了 我之前也是产品要求加个sleep 怕用户看不清logo","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616559222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208327,"avatar":"https://static001.geekbang.org/account/avatar/00/12/70/07/bb4e6568.jpg","nickname":"我是熊大","note":"","ucode":"4BCE42C2C64E55","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350931,"discussion_content":"产品傻逼，让延迟5秒，让用户看logo","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614076560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1458298,"avatar":"https://static001.geekbang.org/account/avatar/00/16/40/7a/864ba649.jpg","nickname":"小yan","note":"","ucode":"58A9393CAA013B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332765,"discussion_content":"类似的需求","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607334405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1457792,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/80/31782d05.jpg","nickname":"Crazy_cc","note":"","ucode":"1F826C25B75D88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311475,"discussion_content":"牛批兄弟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602347870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1936661,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8d/15/8aa25922.jpg","nickname":"蔸蔸","note":"","ucode":"8918E9D50F0F4E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301522,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598543692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2003990,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/94/16/decd1efb.jpg","nickname":"慢慢慢","note":"","ucode":"27C0BFF743F632","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268505,"discussion_content":"哈哈，太真实了这个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589792472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243460,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/44/1a5e5992.jpg","nickname":"Tracy.li","note":"","ucode":"0338DEC133CC9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198819,"discussion_content":"你这个领导怕是个销售出身的吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583514431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188627,"avatar":"https://static001.geekbang.org/account/avatar/00/12/23/13/6ba35b43.jpg","nickname":"leejunhui","note":"","ucode":"A957C0034B9F4D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65581,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575014031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188877,"avatar":"https://static001.geekbang.org/account/avatar/00/12/24/0d/f9e016f3.jpg","nickname":"arnoldxiao","note":"","ucode":"95C7E36489F98E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":50331,"discussion_content":"反其道而行之","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573707104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006312,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5a/e8/6a73208c.jpg","nickname":"老友@极客时间","note":"","ucode":"BA96C0D6200590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5356,"discussion_content":"你这也是个王炸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566201904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75956,"user_name":"彭序猿","can_delete":false,"product_type":"c1","uid":1002648,"ip_address":"","ucode":"EC59F7968147B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/98/9845e6b5.jpg","comment_is_top":false,"comment_ctime":1552497361,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"396689488593","product_id":100024501,"comment_content":"一来就王炸😳","like_count":93},{"had_liked":false,"id":76541,"user_name":"Master","can_delete":false,"product_type":"c1","uid":1454833,"ip_address":"","ucode":"642F865923C98A","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/f1/54575096.jpg","comment_is_top":false,"comment_ctime":1552630307,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"203416093219","product_id":100024501,"comment_content":"看完文章，再看作业，感觉就是老师告诉我们 1 + 1 = 2，然后让我们求太阳的质量。","like_count":48,"discussions":[{"author":{"id":2283752,"avatar":"https://static001.geekbang.org/account/avatar/00/22/d8/e8/985c4b3b.jpg","nickname":"一蓑烟雨任平生","note":"","ucode":"63ABEC0BC7F92E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326772,"discussion_content":"那你有点牛逼，我听的是1*2=3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605674570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76221,"user_name":"城北姜公","can_delete":false,"product_type":"c1","uid":1457240,"ip_address":"","ucode":"4616687E0C94FF","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/58/1e00b11a.jpg","comment_is_top":false,"comment_ctime":1552553013,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"190531114037","product_id":100024501,"comment_content":"我的手是咋回事，看到汇编就直接滑下来看评论了","like_count":45,"discussions":[{"author":{"id":1247929,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0a/b9/34948433.jpg","nickname":"Geek_ee24a9","note":"","ucode":"29DCAD39304FF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271444,"discussion_content":"哈哈哈 怎么我也是？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590139334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243460,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/44/1a5e5992.jpg","nickname":"Tracy.li","note":"","ucode":"0338DEC133CC9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198820,"discussion_content":"不要怂  汇编干就对了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583514452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1623250,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c4/d2/c2f943d7.jpg","nickname":"鲁小帅丶","note":"","ucode":"A0DB72FC07DA78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4037,"discussion_content":"哈哈，我也是","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565074736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76808,"user_name":"Calabash_Boy","can_delete":false,"product_type":"c1","uid":1453760,"ip_address":"","ucode":"19E4D819792983","user_header":"","comment_is_top":false,"comment_ctime":1552715958,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"143286636726","product_id":100024501,"comment_content":"才疏学浅,一上来就要重新再看Hook,dylb,寄存器与汇编的相关知识,戴铭老师的起点很高,有些跟不上,只能自己慢慢补了.<br>如果有的小伙伴跟我一样感觉有难度,可以先看这篇文章http:&#47;&#47;www.zoomfeng.com&#47;blog&#47;launch-time.html了解下基础概念.","like_count":33,"discussions":[{"author":{"id":1792733,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5a/dd/549f5402.jpg","nickname":"中回话","note":"","ucode":"F47B985C641F2F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537105,"discussion_content":"老哥，网址挂了啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638957169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1460977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4a/f1/e3b02c6d.jpg","nickname":"莫言","note":"","ucode":"3B5782B58BFD18","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216115,"discussion_content":"可以，讲的更详细一些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585406722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76215,"user_name":"西京富贵兔","can_delete":false,"product_type":"c1","uid":1455922,"ip_address":"","ucode":"4E185A019A072E","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/32/758ef1c7.jpg","comment_is_top":false,"comment_ctime":1552552249,"is_pvip":false,"replies":[{"id":"27811","content":"哈哈","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552569050,"ip_address":"","comment_id":76215,"utype":1}],"discussion_count":2,"race_medal":0,"score":"143286473017","product_id":100024501,"comment_content":"看完这篇我膨胀了，我都敢去点 objc_msgSend 源码文件了，嗯，不出意料，一句没看懂。。。","like_count":33,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443218,"discussion_content":"哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552569050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2264138,"avatar":"https://static001.geekbang.org/account/avatar/00/22/8c/4a/53b8582b.jpg","nickname":"朱凯奇²⁰²⁰","note":"","ucode":"2E0827C0ED8C84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341609,"discussion_content":"子hang同学","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610461335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76130,"user_name":"星空","can_delete":false,"product_type":"c1","uid":1456338,"ip_address":"","ucode":"F38AFCE9DECCA1","user_header":"https://static001.geekbang.org/account/avatar/00/16/38/d2/c6438ae9.jpg","comment_is_top":false,"comment_ctime":1552534084,"is_pvip":true,"replies":[{"id":"27801","content":"赞","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552567299,"ip_address":"","comment_id":76130,"utype":1}],"discussion_count":1,"race_medal":0,"score":"130401552964","product_id":100024501,"comment_content":"友情提示：想要尝试SMCallTrace的朋友，需要在SMCallTrace.m中打开第54行的注释。","like_count":30,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443191,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83001,"user_name":"冰风落叶","can_delete":false,"product_type":"c1","uid":1128059,"ip_address":"","ucode":"E4DE480B95A17D","user_header":"https://static001.geekbang.org/account/avatar/00/11/36/7b/3788ca13.jpg","comment_is_top":false,"comment_ctime":1554369685,"is_pvip":false,"replies":[{"id":"30026","content":"赞","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1554442225,"ip_address":"","comment_id":83001,"utype":1}],"discussion_count":3,"race_medal":0,"score":"83158748309","product_id":100024501,"comment_content":"大佬们 这是我的写的总结和课后作业 不知道写的对不对 恳请各位大佬指正<br>总结：https:&#47;&#47;www.jianshu.com&#47;p&#47;f26c4f16692a<br>课后作业：https:&#47;&#47;github.com&#47;308823810&#47;BSMonitorTimeTool","like_count":19,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445812,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554442225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2371756,"avatar":"","nickname":"Geek_42d413","note":"","ucode":"15BB5D74223093","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335186,"discussion_content":"厉害厉害","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608112511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1457909,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/f5/055362e6.jpg","nickname":"Yvan_Den","note":"","ucode":"2670121B3AECC9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305963,"discussion_content":"为啥作业里面的源码有2位作者？BSBacktraceLogger这个是你写的么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600138798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75978,"user_name":"哈","can_delete":false,"product_type":"c1","uid":1453904,"ip_address":"","ucode":"3F46ADFFBC94CE","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/50/b46a9b6a.jpg","comment_is_top":false,"comment_ctime":1552518935,"is_pvip":false,"replies":[{"id":"27756","content":"赞","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552541795,"ip_address":"","comment_id":75978,"utype":1}],"discussion_count":1,"race_medal":0,"score":"83156897559","product_id":100024501,"comment_content":"说swift没有main函数那位，其实swift是有main函数的，只不过苹果把它精简成了一个@NSApplicationMain了而已，不信去你的AppDelegate.swift最上面看！","like_count":19,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443116,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552541795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76074,"user_name":"嗨","can_delete":false,"product_type":"c1","uid":1248627,"ip_address":"","ucode":"5AC0E0BACF2889","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/73/68d063b3.jpg","comment_is_top":false,"comment_ctime":1552528283,"is_pvip":false,"replies":[{"id":"27788","content":"想要一个东西就去买，﻿喜欢一个人就去追，﻿哪怕最后那个东西没有用，﻿那个人没有跟你在一起，﻿都没有关系，﻿人生苦短，﻿要知道遗憾要比失败可怕的多。","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552566406,"ip_address":"","comment_id":76074,"utype":1}],"discussion_count":2,"race_medal":0,"score":"78861939611","product_id":100024501,"comment_content":"只有C和OC基础，学起来很吃力","like_count":19,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443167,"discussion_content":"想要一个东西就去买，﻿喜欢一个人就去追，﻿哪怕最后那个东西没有用，﻿那个人没有跟你在一起，﻿都没有关系，﻿人生苦短，﻿要知道遗憾要比失败可怕的多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552566406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006312,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5a/e8/6a73208c.jpg","nickname":"老友@极客时间","note":"","ucode":"BA96C0D6200590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5358,"discussion_content":"老师这个例子真不错","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566202308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76372,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1371687,"ip_address":"","ucode":"27C1E5FD797600","user_header":"https://static001.geekbang.org/account/avatar/00/14/ee/27/58171269.jpg","comment_is_top":false,"comment_ctime":1552579667,"is_pvip":false,"replies":[{"id":"27897","content":"https:&#47;&#47;blog.automatic.com&#47;how-we-cut-our-ios-apps-launch-time-in-half-with-this-one-cool-trick-7aca2011e2ea 了解下","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624388,"ip_address":"","comment_id":76372,"utype":1}],"discussion_count":4,"race_medal":0,"score":"70272056403","product_id":100024501,"comment_content":"戴老师：多个动态库进行合并，具体怎么合并了，没弄过动态库合并该功能","like_count":17,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443278,"discussion_content":"https://blog.automatic.com/how-we-cut-our-ios-apps-launch-time-in-half-with-this-one-cool-trick-7aca2011e2ea 了解下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1457671,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/07/69ab28a2.jpg","nickname":"ＯＵＴ   Ｍａｎ","note":"","ucode":"E39FF55DF8677F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":191974,"discussion_content":"这个链接打不开","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583051146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1012495,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/73/0f/abb7bfe3.jpg","nickname":"文盲","note":"","ucode":"C0CC0CAFADD41A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1457671,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/07/69ab28a2.jpg","nickname":"ＯＵＴ   Ｍａｎ","note":"","ucode":"E39FF55DF8677F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218734,"discussion_content":"要翻墙","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585673970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":191974,"ip_address":""},"score":218734,"extra":""},{"author":{"id":1529343,"avatar":"https://static001.geekbang.org/account/avatar/00/17/55/ff/1489d0fb.jpg","nickname":"肖","note":"","ucode":"763D0C2871B92F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1012495,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/73/0f/abb7bfe3.jpg","nickname":"文盲","note":"","ucode":"C0CC0CAFADD41A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574005,"discussion_content":"翻墙也打不开了，应该是服务器不行了吧，有其他链接吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653793690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":218734,"ip_address":""},"score":574005,"extra":""}]}]},{"had_liked":false,"id":75959,"user_name":"Kam","can_delete":false,"product_type":"c1","uid":1454076,"ip_address":"","ucode":"058142255AB3B0","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/fc/5e181fa8.jpg","comment_is_top":false,"comment_ctime":1552500772,"is_pvip":false,"replies":[{"id":"27750","content":"官方的解释很全面，情况都说清楚了","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552541026,"ip_address":"","comment_id":75959,"utype":1}],"discussion_count":2,"race_medal":0,"score":"61682042916","product_id":100024501,"comment_content":"这个方法耗时计算的工具很赞，白天要花点时间实践一下才行。<br><br>有个让我疑惑的地方是关于“热启动”的概念，我再去看了下 WWDC 上的说法，里面提到热启动应该也包括“启动后退出 App 再启动”这种情况，不知道我下面这段话的理解是否正确：<br><br>“And a warm launch is an app where the application is already in memory, either because it&#39;s been launched and quit previously, and it&#39;s still sitting in the discache in the kernel, or because you just copied it over.”<br>- https:&#47;&#47;developer.apple.com&#47;videos&#47;play&#47;wwdc2016-406&#47;?time=1484<br><br>","like_count":14,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443106,"discussion_content":"官方的解释很全面，情况都说清楚了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552541026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188627,"avatar":"https://static001.geekbang.org/account/avatar/00/12/23/13/6ba35b43.jpg","nickname":"leejunhui","note":"","ucode":"A957C0034B9F4D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65586,"discussion_content":"16年和17年有2个session都是相关的，分别是wwdc2016 session406,和wwdc2017 session413。这两天刚看完，还是有不少干货的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575014218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126649,"user_name":"lcp","can_delete":false,"product_type":"c1","uid":1147461,"ip_address":"","ucode":"3C9975BFF7654E","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/45/981ac8ab.jpg","comment_is_top":false,"comment_ctime":1566440991,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"53106048543","product_id":100024501,"comment_content":"hook objc_msgSend 的原版应该是参考 https:&#47;&#47;github.com&#47;DavidGoldman&#47;InspectiveC.git 这个开源库，汇编细节看不懂的也可以参考一下库作者的readme","like_count":12},{"had_liked":false,"id":92972,"user_name":"长方体混凝土移动工程师","can_delete":false,"product_type":"c1","uid":1262728,"ip_address":"","ucode":"00CB4C4AB4D119","user_header":"https://static001.geekbang.org/account/avatar/00/13/44/88/69580101.jpg","comment_is_top":false,"comment_ctime":1557370814,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"53096978366","product_id":100024501,"comment_content":"这是我学习专栏总结的资料,对objc_msgSend hook的学习过程有一个记录<br>提供了一个可运行调度的Demo,并有详细的注释<br>https:&#47;&#47;github.com&#47;czqasngit&#47;objc_msgSend_hook ","like_count":12,"discussions":[{"author":{"id":2681398,"avatar":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","nickname":"D","note":"","ucode":"4112DE94C80A5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382997,"discussion_content":"这个项目确实不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625818730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1665885,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq1doUzOEpeTfU4Fs3FB3a8vL6e8J4gZrHAWImVH96ypjHxJyJDpcicM6hSnc4Np5IZTjWCaOUAGNw/132","nickname":"codePro","note":"","ucode":"1C0823E0843EF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62411,"discussion_content":"注释赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574841043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76159,"user_name":"一代真龙","can_delete":false,"product_type":"c1","uid":1454738,"ip_address":"","ucode":"9B5900D62E0C64","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/92/78e66924.jpg","comment_is_top":false,"comment_ctime":1552539474,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"48797179730","product_id":100024501,"comment_content":"你在往上看几层，所有的oc方法都是通过msg_send作为统一入口，你所谓的函数指针在调用IMP在msg_send后面步骤。作为程序员没看懂内容就出来唧唧歪歪，这样路走不长。","like_count":11,"discussions":[{"author":{"id":1188877,"avatar":"https://static001.geekbang.org/account/avatar/00/12/24/0d/f9e016f3.jpg","nickname":"arnoldxiao","note":"","ucode":"95C7E36489F98E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":50332,"discussion_content":"+ load 就不是通过objc_msgSend调用的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573707200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76091,"user_name":"唯她命","can_delete":false,"product_type":"c1","uid":1240398,"ip_address":"","ucode":"8F687E8D306840","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/4e/ef406442.jpg","comment_is_top":false,"comment_ctime":1552530095,"is_pvip":false,"replies":[{"id":"27791","content":"函数指针调用可以用 ffi_call","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552566784,"ip_address":"","comment_id":76091,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44502203055","product_id":100024501,"comment_content":"hook 了 objc_msgSend 方法，就可以 hook  oc全部方法，这句话我不赞成，看objc源码，你会发现有的oc方法直接通过函数指针调用的,这时候hook 了 objc_msgSend 方法，是没有用的","like_count":10,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443174,"discussion_content":"函数指针调用可以用 ffi_call","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552566784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80590,"user_name":"登品","can_delete":false,"product_type":"c1","uid":1134511,"ip_address":"","ucode":"DA94DA7A7CFE3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/4f/af/50c3e8dd.jpg","comment_is_top":false,"comment_ctime":1553685875,"is_pvip":false,"replies":[{"id":"29538","content":"资料有，WWDC 有个专门讲启动前优化的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553943238,"ip_address":"","comment_id":80590,"utype":1}],"discussion_count":3,"race_medal":0,"score":"35913424243","product_id":100024501,"comment_content":"公司项目启动70+的pod库 ，光pre-main时间都要3.x s了<br>所以光优化下main后面的 没啥卵用。 大佬main前的优化 有什么资料嘛 谢谢","like_count":8,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444913,"discussion_content":"资料有，WWDC 有个专门讲启动前优化的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553943238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2681398,"avatar":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","nickname":"D","note":"","ucode":"4112DE94C80A5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387356,"discussion_content":"二进制重排","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628132481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241567,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f1/df/8ba04bec.jpg","nickname":"Joker","note":"","ucode":"C42E11098E1B38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25127,"discussion_content":"有链接吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570431050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76720,"user_name":"流逝……","can_delete":false,"product_type":"c1","uid":1458288,"ip_address":"","ucode":"F95F96E25D1FEB","user_header":"https://static001.geekbang.org/account/avatar/00/16/40/70/9de7e26e.jpg","comment_is_top":false,"comment_ctime":1552696333,"is_pvip":false,"replies":[{"id":"27984","content":"可以先看下文章里提到的 STMAssembleView（https:&#47;&#47;github.com&#47;ming1016&#47;STMAssembleView），仿照着做","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552704210,"ip_address":"","comment_id":76720,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31617467405","product_id":100024501,"comment_content":"有点懵……不知道从哪下手。这个得有啥技术储备才能看的明白点……","like_count":8,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443420,"discussion_content":"可以先看下文章里提到的 STMAssembleView（https://github.com/ming1016/STMAssembleView），仿照着做","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552704210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76182,"user_name":"Ke哀","can_delete":false,"product_type":"c1","uid":1386108,"ip_address":"","ucode":"E1AA3E387C18EB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLBb60HEtcav8eZb0LuMZiaVmuCBkpFGeP7XjHtgRxDMZeR7wnWNWy2jOUyA1oKWA5DuZ7UbMUqA67w/132","comment_is_top":false,"comment_ctime":1552545564,"is_pvip":false,"replies":[{"id":"27809","content":"汇编建议先看下 arm64 相关资料<br>https:&#47;&#47;blog.nelhage.com&#47;2010&#47;10&#47;amd64-and-va_arg&#47;<br>http:&#47;&#47;infocenter.arm.com&#47;help&#47;topic&#47;com.arm.doc.ihi0055b&#47;IHI0055B_aapcs64.pdf<br>https:&#47;&#47;developer.apple.com&#47;library&#47;ios&#47;documentation&#47;Xcode&#47;Conceptual&#47;iPhoneOSABIReference&#47;Articles&#47;ARM64FunctionCallingConventions.html<br><br>然后啃啃 objc_msgSend 源码","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552567741,"ip_address":"","comment_id":76182,"utype":1}],"discussion_count":3,"race_medal":0,"score":"31617316636","product_id":100024501,"comment_content":"今天看到大佬的课程，发现说的hook objc_msgSend的汇编部分，但是发现在教程中的部分和之前大神17年博客部分是一样的，都是InspectiveC&#47;InspectiveCarm64.mm的汇编代码。然后跑去大神的github找到开源项目已阅，拿出里边hook objc_msgSend的汇编实现，然后有些部分不太理解。希望大神可以解答一下（这些是已阅里边拿出来的汇编）<br>1.为什么这里要把lr移到x2，x4移到x3呢？<br>__asm volatile (&quot;mov x2, lr\\n&quot;);<br>__asm volatile (&quot;mov x3, x4\\n&quot;);<br>2.为什么要在调用before_objc_msgSend，orig_objc_msgSend，after_objc_msgSend方法前后把x8，x9的值存入栈中呢？<br>__asm volatile (&quot;stp x8, x9, [sp, #-16]!\\n&quot;);<br>__asm volatile (&quot;mov x12, %0\\n&quot; :: &quot;r&quot;(&amp;before_objc_msgSend));<br>__asm volatile (&quot;ldp x8, x9, [sp], #16\\n&quot;);<br>3.为什么在三个方法执行完之后呢，最后x0会存储最后的函数返回地址呢？我打断点看到每次都是这样的，不太理解，然后把x0，移到lr确实是为了执行之前objc_msgSend执行后下一条执行的代码段段地址。<br>__asm volatile (&quot;mov lr, x0\\n&quot;);","like_count":7,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443209,"discussion_content":"汇编建议先看下 arm64 相关资料\nhttps://blog.nelhage.com/2010/10/amd64-and-va_arg/\nhttp://infocenter.arm.com/help/topic/com.arm.doc.ihi0055b/IHI0055B_aapcs64.pdf\nhttps://developer.apple.com/library/ios/documentation/Xcode/Conceptual/iPhoneOSABIReference/Articles/ARM64FunctionCallingConventions.html\n\n然后啃啃 objc_msgSend 源码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1455110,"avatar":"https://static001.geekbang.org/account/avatar/00/16/34/06/d2d57aff.jpg","nickname":"hllovesgeekbang","note":"","ucode":"72A0FBF1A5D8A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":73989,"discussion_content":"现在也没个正式详细的答疑。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575620527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452948,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/94/b7f4076f.jpg","nickname":"陈华锋","note":"","ucode":"7214A908139813","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3275,"discussion_content":"stp x8, x9, [sp, #-16]!\n这一句我也不明白，希望老师能指点一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564370439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76147,"user_name":"Sean Ma","can_delete":false,"product_type":"c1","uid":1431314,"ip_address":"","ucode":"A467C04AF3CADE","user_header":"https://static001.geekbang.org/account/avatar/00/15/d7/12/416b60ba.jpg","comment_is_top":false,"comment_ctime":1552535788,"is_pvip":false,"replies":[{"id":"27807","content":"你说的和原文是一个意思","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552567495,"ip_address":"","comment_id":76147,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31617306860","product_id":100024501,"comment_content":"上来就汇编，营养跟不上。想问个问题，文中提到首屏渲染渲染后指的是“这个阶段就是从渲染完成时开始，到didFinishLaunchingWithOptions方法域结束而结束”，我自己跑demo的时候，看到首页viewcontroller完成加载渲染出来能看到都要等到didFinishLaunchingWithOptions return true，所以我这里对首屏渲染后的界定有疑惑","like_count":7,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443197,"discussion_content":"你说的和原文是一个意思","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75973,"user_name":"Geek_d744d2","can_delete":false,"product_type":"c1","uid":1456087,"ip_address":"","ucode":"1C4187A468B630","user_header":"","comment_is_top":false,"comment_ctime":1552518336,"is_pvip":false,"replies":[{"id":"27755","content":"Mach-O 相关知识可以多了解些","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552541772,"ip_address":"","comment_id":75973,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31617289408","product_id":100024501,"comment_content":"戴铭老师，fishhook部分代码我看不大懂，我是需要补哪方面的知识呢？","like_count":8,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443114,"discussion_content":"Mach-O 相关知识可以多了解些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552541772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176780,"user_name":"iHTC","can_delete":false,"product_type":"c1","uid":1048531,"ip_address":"","ucode":"22065449F54F40","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ff/d3/f249eefe.jpg","comment_is_top":false,"comment_ctime":1581165283,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27350969059","product_id":100024501,"comment_content":"从2019年开始与团队一起学习和分享戴老师的《iOS开发高手课》，因为我们团队每个人的知识和了解水平不同，所以每次分享，总有人对文章完全不懂，或者不知道学习应该从那里开始。后来我都尽可能的了解更多，让团队每个人都有找到自己的切入点，经过前期几篇文章的学习，我在分享与思考过程中，想到一个问题`如何写出一篇大家都能懂的技术文章？`，所以，我就打算把自己在学习《iOS开发高手课》查找的资料和学习思考的成果，总结成学习总结系列文章，希望入门的可以看得懂，深入的可以进一步深入。<br><br>所以，目前已经完成了几篇学习总结，大家如果看戴老师的文章不太理解的，可以先看看 [【学习总结】iOS开发高手课 -- (连载中) - 掘金](https:&#47;&#47;juejin.im&#47;post&#47;5e359865f265da3e0b434750)，然后回来看专栏，希望会有更多的收获~","like_count":7},{"had_liked":false,"id":76361,"user_name":"mαnajay","can_delete":false,"product_type":"c1","uid":1067450,"ip_address":"","ucode":"6DE9FBD1BEC8AD","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/ba/23c9246a.jpg","comment_is_top":false,"comment_ctime":1552578052,"is_pvip":false,"replies":[{"id":"27917","content":"对 main 之前做的事情有兴趣可以看看 WWDC 的这个 Session https:&#47;&#47;developer.apple.com&#47;videos&#47;play&#47;wwdc2016&#47;406&#47; ","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624908,"ip_address":"","comment_id":76361,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27322381828","product_id":100024501,"comment_content":"sunnyxx 中翻译的main 函数之前 系统执行顺序是<br>----<br>从 kernel 留下的原始调用栈引导和启动自己<br>将程序依赖的动态链接库递归加载进内存，当然这里有缓存机制<br>non-lazy 符号立即 link 到可执行文件，lazy 的存表里<br>Runs static initializers for the executable<br>找到可执行文件的 main 函数，准备参数并调用<br>程序执行中负责绑定 lazy 符号、提供 runtime dynamic loading services、提供调试器接口<br>程序main函数 return 后执行 static terminator<br>某些场景下 main 函数结束后调 libSystem 的 _exit 函数<br>---<br>多了不少东西","like_count":6,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443274,"discussion_content":"对 main 之前做的事情有兴趣可以看看 WWDC 的这个 Session https://developer.apple.com/videos/play/wwdc2016/406/ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76294,"user_name":"枫林","can_delete":false,"product_type":"c1","uid":1236190,"ip_address":"","ucode":"6BB5534162CBDB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/xVcA2wzqLYZaeTo7cSA2k3cJVylT3sibmcauzQRUVpJqfxkIJetkCUV7iaVWQuSuCSBICV2AfF2AS5xl1Fgo0pcw/132","comment_is_top":false,"comment_ctime":1552568450,"is_pvip":false,"replies":[{"id":"27895","content":"你可以看看这个文章介绍怎么通过合并动态提高一倍速度的《How we cut our iOS app’s launch time in half (with this one cool trick)》 https:&#47;&#47;blog.automatic.com&#47;how-we-cut-our-ios-apps-launch-time-in-half-with-this-one-cool-trick-7aca2011e2ea","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624335,"ip_address":"","comment_id":76294,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27322372226","product_id":100024501,"comment_content":"最多6 个非系统动态库合并为一个，目前项目中很很多模块，基本都是动态库，怎么合并成一个呢？","like_count":6,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443245,"discussion_content":"你可以看看这个文章介绍怎么通过合并动态提高一倍速度的《How we cut our iOS app’s launch time in half (with this one cool trick)》 https://blog.automatic.com/how-we-cut-our-ios-apps-launch-time-in-half-with-this-one-cool-trick-7aca2011e2ea","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76190,"user_name":"mαnajay","can_delete":false,"product_type":"c1","uid":1067450,"ip_address":"","ucode":"6DE9FBD1BEC8AD","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/ba/23c9246a.jpg","comment_is_top":false,"comment_ctime":1552547256,"is_pvip":false,"replies":[{"id":"27810","content":"合并代码或者二进制都可以","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552569040,"ip_address":"","comment_id":76190,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27322351032","product_id":100024501,"comment_content":"如何合并动态库，是将多个业务动态库代码全挪到一个动态库模块还是有其他方法？","like_count":6,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443211,"discussion_content":"合并代码或者二进制都可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552569040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76138,"user_name":"学无止境","can_delete":false,"product_type":"c1","uid":1350473,"ip_address":"","ucode":"FC13803A5A3E9E","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/49/33b2da58.jpg","comment_is_top":false,"comment_ctime":1552534737,"is_pvip":false,"replies":[{"id":"27806","content":"可以多看几遍，留言里也有相关资料哦","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552567443,"ip_address":"","comment_id":76138,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27322338513","product_id":100024501,"comment_content":"一上来就这么干，有点难吸收啊。<br>没个几年的iOS深入学习的话，这课还真的不好懂。<br>能在文章中多提供点资料么或者再讲的细点。<br>瞬间感觉自己是个渣渣","like_count":6,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443194,"discussion_content":"可以多看几遍，留言里也有相关资料哦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273208,"user_name":"大雄","can_delete":false,"product_type":"c1","uid":2263834,"ip_address":"","ucode":"B57309834DB0DC","user_header":"https://static001.geekbang.org/account/avatar/00/22/8b/1a/71a4cabc.jpg","comment_is_top":false,"comment_ctime":1610498200,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23085334680","product_id":100024501,"comment_content":"启动各部分的时间讲解，通篇文字，不如加个具体例子讲解，效果会更好","like_count":4},{"had_liked":false,"id":77174,"user_name":"lfsoul","can_delete":false,"product_type":"c1","uid":1243957,"ip_address":"","ucode":"8A9FB3135D591D","user_header":"https://static001.geekbang.org/account/avatar/00/12/fb/35/bfe3a609.jpg","comment_is_top":false,"comment_ctime":1552876010,"is_pvip":false,"replies":[{"id":"28372","content":"aop 的耗时","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552994447,"ip_address":"","comment_id":77174,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23027712490","product_id":100024501,"comment_content":"+load为啥会增加4毫米那，求详解一下","like_count":5,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443620,"discussion_content":"aop 的耗时","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552994447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2285624,"avatar":"","nickname":"Geek_86cd42","note":"","ucode":"41FB0C39389D01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323629,"discussion_content":"aop 的耗时是啥？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604977093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1227217,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b9/d1/9881a32d.jpg","nickname":"楠","note":"","ucode":"6B87C6375AB767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301560,"discussion_content":"作者说了是要做动态方法替换","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598575895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75996,"user_name":"大官人","can_delete":false,"product_type":"c1","uid":1459215,"ip_address":"","ucode":"ED9C341D51C03F","user_header":"","comment_is_top":false,"comment_ctime":1552522504,"is_pvip":false,"replies":[{"id":"27757","content":"太对了","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552541816,"ip_address":"","comment_id":75996,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23027358984","product_id":100024501,"comment_content":"最好的学习就是自己动手啊，课后作业的得做，不然感觉啥都没记住……","like_count":5,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443125,"discussion_content":"太对了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552541816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105433,"user_name":"凯凯","can_delete":false,"product_type":"c1","uid":1247201,"ip_address":"","ucode":"04A6ECD20B3F91","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/e1/005460c4.jpg","comment_is_top":false,"comment_ctime":1560999312,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18740868496","product_id":100024501,"comment_content":"我写了arm64和iOS ABI，对汇编不熟，可以看下https:&#47;&#47;wukaikai.tech&#47; 。看完就知道戴老师写的hook源码~ <br>=================楼下同学的疑问============================<br>今天看到大佬的课程，发现说的hook objc_msgSend的汇编部分，但是发现在教程中的部分和之前大神17年博客部分是一样的，都是InspectiveC&#47;InspectiveCarm64.mm的汇编代码。然后跑去大神的github找到开源项目已阅，拿出里边hook objc_msgSend的汇编实现，然后有些部分不太理解。希望大神可以解答一下（这些是已阅里边拿出来的汇编）<br>1.为什么这里要把lr移到x2，x4移到x3呢？<br>__asm volatile (&quot;mov x2, lr\\n&quot;);<br>__asm volatile (&quot;mov x3, x4\\n&quot;);<br>2.为什么要在调用before_objc_msgSend，orig_objc_msgSend，after_objc_msgSend方法前后把x8，x9的值存入栈中呢？<br>__asm volatile (&quot;stp x8, x9, [sp, #-16]!\\n&quot;);<br>__asm volatile (&quot;mov x12, %0\\n&quot; :: &quot;r&quot;(&amp;before_objc_msgSend));<br>__asm volatile (&quot;ldp x8, x9, [sp], #16\\n&quot;);<br>3.为什么在三个方法执行完之后呢，最后x0会存储最后的函数返回地址呢？我打断点看到每次都是这样的，不太理解，然后把x0，移到lr确实是为了执行之前objc_msgSend执行后下一条执行的代码段段地址。<br>__asm volatile (&quot;mov lr, x0\\n&quot;);<br>==================================<br>这些疑问，都是对arm64汇编不太熟悉。<br>","like_count":4,"discussions":[{"author":{"id":1147461,"avatar":"https://static001.geekbang.org/account/avatar/00/11/82/45/981ac8ab.jpg","nickname":"lcp","note":"","ucode":"3C9975BFF7654E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1773,"discussion_content":"2.为什么要在调用before_objc_msgSend，orig_objc_msgSend，after_objc_msgSend方法前后把x8，x9的值存入栈中呢？\n---\n这里是因为 __asm volatile (&#34;mov x12, %0\\n&#34; :: &#34;r&#34;(&amp;before_objc_msgSend)); 这样的内嵌汇编，可能并不是一条指令读取，而且 %0 可能会导致x8 x9的改变，所以在之前保存x8/x9，完了恢复。\n======\n3.为什么在三个方法执行完之后呢，最后x0会存储最后的函数返回地址呢？我打断点看到每次都是这样的，不太理解，然后把x0，移到lr确实是为了执行之前objc_msgSend执行后下一条执行的代码段段地址。\n__asm volatile (&#34;mov lr, x0\\n&#34;);\n---\n这个是因为after_objc_msgSend返回值(也就是x0寄存器)是hook_Objc_msgSend进入前lr的原始值，这么做是回复lr的数据\n\n\n至于第1点，确实没有搞懂为什么，请问其中作用是？","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1562902714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78802,"user_name":"🐂🐂🐂","can_delete":false,"product_type":"c1","uid":1468402,"ip_address":"","ucode":"21B99239215B8C","user_header":"https://static001.geekbang.org/account/avatar/00/16/67/f2/43297ab2.jpg","comment_is_top":false,"comment_ctime":1553242222,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18733111406","product_id":100024501,"comment_content":"非科班出身，基础差，只能让自己一遍又一遍的反复咀嚼，争取让自己每一遍都能得到进步。加油💪","like_count":4},{"had_liked":false,"id":76665,"user_name":"灬路上","can_delete":false,"product_type":"c1","uid":1335108,"ip_address":"","ucode":"98C603307CA374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iaYibsvL94uobwgXsHVUnFh0AzibQAmWQicibytkmIEvmFhAPBpj8lXnjmYcJySqgDPoIeLAAicQFrIJVS9uNZbD7gmw/132","comment_is_top":false,"comment_ctime":1552661174,"is_pvip":false,"replies":[{"id":"27959","content":"好赞","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552670072,"ip_address":"","comment_id":76665,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18732530358","product_id":100024501,"comment_content":"有毒！为了不漏学每个知识，我把每条评论都看了，并把有用的Mark下来，深耕！","like_count":4,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443395,"discussion_content":"好赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552670072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76609,"user_name":"李小草","can_delete":false,"product_type":"c1","uid":1240476,"ip_address":"","ucode":"83DAA0BFDC2068","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/9c/7afa883f.jpg","comment_is_top":false,"comment_ctime":1552642635,"is_pvip":false,"replies":[{"id":"27961","content":"连续相同的堆栈，将其时间相加就是那个堆栈方法的耗时。","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552670216,"ip_address":"","comment_id":76609,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18732511819","product_id":100024501,"comment_content":"我知道可以借助三方工具类BSBacktraceLogger获取主线程调用栈（[BSBacktraceLogger bs_backtraceOfMainThread];），然后定时0.01秒计算各方法的调用耗时。但是具体不知道该怎么计算啊，望老师指点！","like_count":4,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443376,"discussion_content":"连续相同的堆栈，将其时间相加就是那个堆栈方法的耗时。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552670216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76107,"user_name":"✨嘿o大远","can_delete":false,"product_type":"c1","uid":1008041,"ip_address":"","ucode":"ADC7CE0B8D0645","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/a9/122d6266.jpg","comment_is_top":false,"comment_ctime":1552532038,"is_pvip":false,"replies":[{"id":"27795","content":"加油，细水长流","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552566919,"ip_address":"","comment_id":76107,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18732401222","product_id":100024501,"comment_content":"听的比较费力,感觉要用很多时间来研究了,加油","like_count":4,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443181,"discussion_content":"加油，细水长流","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552566919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1460977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4a/f1/e3b02c6d.jpg","nickname":"莫言","note":"","ucode":"3B5782B58BFD18","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216122,"discussion_content":"读书百遍，其义自现","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585406852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76083,"user_name":"wchen","can_delete":false,"product_type":"c1","uid":1456327,"ip_address":"","ucode":"0D971931124660","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIhZpScfeGfqAlyrd2kRkSWhDJu39yWFCG17yKWFC26WwvJJfpUNLAd11yqEWrHmOxl6M1rzgFxTg/132","comment_is_top":false,"comment_ctime":1552529132,"is_pvip":false,"replies":[{"id":"27790","content":"所以说实践是最好的老师","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552566555,"ip_address":"","comment_id":76083,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18732398316","product_id":100024501,"comment_content":"看完感觉老师您讲的我好像能听懂，实际要上手又懵了。。。感觉自己好像没有抓住点实质性的东西","like_count":4,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443170,"discussion_content":"所以说实践是最好的老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552566555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75994,"user_name":"alloc","can_delete":false,"product_type":"c1","uid":1065379,"ip_address":"","ucode":"25E507195716C5","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/a3/be42037c.jpg","comment_is_top":false,"comment_ctime":1552522464,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18732391648","product_id":100024501,"comment_content":"之前我学习汇编的时候，同事带着不可思议和嘲笑的眼光看我，我很想推荐给他，看他怎么说","like_count":4},{"had_liked":false,"id":75964,"user_name":"李晓小拽","can_delete":false,"product_type":"c1","uid":1119471,"ip_address":"","ucode":"3244797518AC05","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/ef/42668604.jpg","comment_is_top":false,"comment_ctime":1552510935,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18732380119","product_id":100024501,"comment_content":"感冒了，下班回来躺床上睡着了，然后四点多自己醒来了，项目中有个问题在Demo中验证了一下，发现是项目的问题，然后来看看文章更新了没 😄","like_count":4},{"had_liked":false,"id":111656,"user_name":"PerTerbin","can_delete":false,"product_type":"c1","uid":1455274,"ip_address":"","ucode":"47168983A8AF7E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo6Pv01Of8dF6dGjmuyqnYXUhCdKTcaFDEr5B70EmN7HyrxjQ84iaQB8wuh5ePvelezzFB6A9qLZGQ/132","comment_is_top":false,"comment_ctime":1562578606,"is_pvip":false,"replies":[{"id":"42878","content":"可以参看 KSCrash","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1563987326,"ip_address":"","comment_id":111656,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14447480494","product_id":100024501,"comment_content":"获取主线程堆栈你是用什么方法，我这边使用BSBacktraceLogger提供的方法，但是在公司真实项目里跑获取主线程堆栈的方法耗时远超0.01s（真机大概在0.03s），这样统计出来的时间就没什么意义，有什么比较不耗时的的获取堆栈方法吗？","like_count":3,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457405,"discussion_content":"可以参看 KSCrash","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563987326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93862,"user_name":"弈林丶修特","can_delete":false,"product_type":"c1","uid":1454204,"ip_address":"","ucode":"AE6CE8A6DA36A7","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/7c/25782d96.jpg","comment_is_top":false,"comment_ctime":1557644056,"is_pvip":false,"replies":[{"id":"35020","content":"可以直接参看代码实现。https:&#47;&#47;github.com&#47;ming1016&#47;GCDFetchFeed","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1558851701,"ip_address":"","comment_id":93862,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14442545944","product_id":100024501,"comment_content":"这个我看完完全理解不了怎么去hook objc_msgSend啊   汇编部分调用说符号表确实pre 和post对应的  也没看到讲述中怎么实现这两个","like_count":3,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449800,"discussion_content":"可以直接参看代码实现。https://github.com/ming1016/GCDFetchFeed","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558851701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88240,"user_name":"Snow同學","can_delete":false,"product_type":"c1","uid":1390875,"ip_address":"","ucode":"231E98C721E4D2","user_header":"https://static001.geekbang.org/account/avatar/00/15/39/1b/bcabd223.jpg","comment_is_top":false,"comment_ctime":1555899507,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14440801395","product_id":100024501,"comment_content":"你好，戴铭大佬，GCDFetchFeed工程，用的真机iPhone 8 Plus<br>在SMCallTrace.m中打开第54行的注释<br>然后在SMRootViewController的viewDidLoad也调用 start ，viewDidDisappear里调用了 stop 和 save ，<br>并且在- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath<br>添加了一行[NSThread sleepForTimeInterval:1];<br>然后运行，看到首页列表信息后，点击一行跳转，触发viewDidDisappear方法调用。<br>为什么没有层级关系打印呢？？","like_count":3,"discussions":[{"author":{"id":1085533,"avatar":"https://static001.geekbang.org/account/avatar/00/10/90/5d/e58db789.jpg","nickname":"°Simple","note":"","ucode":"68AD51B8F3C3F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331647,"discussion_content":"我也是啊，用真机跑了程序，我是直接继承的项目里的UIViewController+clsCall.h的类别，也没有看到层级打印，都是空白","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606920887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759590,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d9/66/0c9a6cf0.jpg","nickname":"hwacdx","note":"","ucode":"F921C10D05F576","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":109217,"discussion_content":"谁能解答一下啊 ？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577674729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76256,"user_name":"Jersey、","can_delete":false,"product_type":"c1","uid":1358381,"ip_address":"","ucode":"53985C9B1CF73E","user_header":"https://static001.geekbang.org/account/avatar/00/14/ba/2d/e0339b0a.jpg","comment_is_top":false,"comment_ctime":1552559708,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14437461596","product_id":100024501,"comment_content":"戴老师真的很用心。<br>不过能在文章中添加关于 main 后 到 appdelega 渲染首页更多加速优化的方法就更好了。 比如 启动页加载 闪屏图 加载等。 ","like_count":3},{"had_liked":false,"id":76022,"user_name":"ccSunday","can_delete":false,"product_type":"c1","uid":1335058,"ip_address":"","ucode":"B479E883D0CC50","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Sf6h6udR58nPWbb8lY9oOLUzBJiaDo8js9PMzI0pOay63dD4rIjZMUZibYTianjiccU17dsjhyj5bJt1xkpKMIz2mA/132","comment_is_top":false,"comment_ctime":1552524685,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14437426573","product_id":100024501,"comment_content":"厉害厉害，学习了","like_count":3},{"had_liked":false,"id":144269,"user_name":"欢乐马","can_delete":false,"product_type":"c1","uid":1711961,"ip_address":"","ucode":"18970C8ADC41E8","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1f/59/cd59fca8.jpg","comment_is_top":false,"comment_ctime":1571884794,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10161819386","product_id":100024501,"comment_content":"replacementObjc_msgSend 是从InspectiveC来的吗？建议注明一下出处。 https:&#47;&#47;github.com&#47;DavidGoldman&#47;InspectiveC&#47;blob&#47;master&#47;InspectiveCarm64.mm","like_count":2},{"had_liked":false,"id":90255,"user_name":"lcp","can_delete":false,"product_type":"c1","uid":1147461,"ip_address":"","ucode":"3C9975BFF7654E","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/45/981ac8ab.jpg","comment_is_top":false,"comment_ctime":1556460773,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10146395365","product_id":100024501,"comment_content":"话了几个周末研究了一下，文中获取每个方法的耗时方案主要分为2个步骤：<br>1. hook objc_msgSend，这里利用fishhook在符号绑定阶段进行修改符号地址从而执行到自定义的hook_Objc_msgSend中；hook_Objc_msgSend主要是在原方法orig_objc_msgSend前后记录所需要的信息，实现关键是objc_msgSend是可变参数传参，收集信息时还不能破坏栈里的参数和部分寄存器，保存&#47;回复栈和寄存器状态可以说是整个项目中的关键。<br>2. 处理收集到的信息，比如调用层级关系和顺序，还要是通过pthread_setspecific等一些方法将手机信息和线程绑定到一起，方便对不通线程的函数调用详情进行观察。<br><br>------------------<br><br>研究了几天，还几个问题：<br>问题1.执行hook_Objc_msgSend过程中会执行一下2句代码，我理解是保存lr寄存器的数据，也就是下一条执行的代码段段地址，<br>这里目的是让hook_Objc_msgSend执行完之后跳转到orig_objc_msgSend原来执行完需要跳转的指令；<br>但是这里为什么要把x4保存到x3中？<br>__asm volatile (&quot;mov x2, lr\\n&quot;);<br>__asm volatile (&quot;mov x3, x4\\n&quot;);<br><br>问题2. call(b, value)  中为什么需要把x8,x9保存到栈中然后value对应的函数执行完之后出栈？这里是为了保护类似大结构体参数不被串改吗？x8可能会保存大结构体参数的地址，但是x9我理解应该是临时寄存器，不需要在执行过程中进行保存<br>__asm volatile (&quot;stp x8, x9, [sp, #-16]!\\n&quot;); \\     <br>__asm volatile (&quot;mov x12, %0\\n&quot; :: &quot;r&quot;(value)); \\     <br>__asm volatile (&quot;ldp x8, x9, [sp], #16\\n&quot;); \\    <br>__asm volatile (#b &quot; x12\\n&quot;);<br><br>问题3.另外下面有回复问道 __asm volatile (&quot;mov lr, x0\\n&quot;); 的作用，个人浅见是：<br>after_objc_msgSend 中执行最后的返回值就是orig_objc_msgSend原来执行完下一题指令的地址。x0寄存器保存了函数的返回值，所以这里把x0赋值给到lr就能回复lr原有的状态，不知道这样理解是否正确？<br><br>我看之前有几个同学已经提问过类似的问题，戴老师建议是先看汇编的相关资料，个人大概看了主要是讲arm64对不定参数的实现，但是没有还是没有了解上面2个问题如此实现的目的。希望戴老师能够更加详细地解答一下，十分感谢。","like_count":2},{"had_liked":false,"id":88317,"user_name":"一纸丶荒年","can_delete":false,"product_type":"c1","uid":1458078,"ip_address":"","ucode":"9A4C0364B97780","user_header":"https://static001.geekbang.org/account/avatar/00/16/3f/9e/7a6e6442.jpg","comment_is_top":false,"comment_ctime":1555904022,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10145838614","product_id":100024501,"comment_content":"您好 我想问一下 这个东西 适用swfit吗?","like_count":2,"discussions":[{"author":{"id":1670234,"avatar":"https://static001.geekbang.org/account/avatar/00/19/7c/5a/0739746f.jpg","nickname":"奋斗","note":"","ucode":"DCF6BC498E351A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":256508,"discussion_content":"不适用吧，swift不会调用msgsend","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588489140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006312,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5a/e8/6a73208c.jpg","nickname":"老友@极客时间","note":"","ucode":"BA96C0D6200590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5362,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566202812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85611,"user_name":"leon","can_delete":false,"product_type":"c1","uid":1320642,"ip_address":"","ucode":"325DDFE411626A","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/c2/88cfcdb3.jpg","comment_is_top":false,"comment_ctime":1555142192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10145076784","product_id":100024501,"comment_content":"老师，是否可以在swift实现类似的功能呢？","like_count":2},{"had_liked":false,"id":84184,"user_name":"Drunkard","can_delete":false,"product_type":"c1","uid":1457401,"ip_address":"","ucode":"1B3309C2520889","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/f9/3c2561db.jpg","comment_is_top":false,"comment_ctime":1554799547,"is_pvip":false,"replies":[{"id":"30731","content":"赞","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1555145200,"ip_address":"","comment_id":84184,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10144734139","product_id":100024501,"comment_content":"大佬 帮忙看看这个做法对不对？<br>https:&#47;&#47;github.com&#47;308823810&#47;BSMonitorTimeTool","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446272,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555145200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1360952,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c4/38/e0fefa2b.jpg","nickname":"魅影","note":"","ucode":"F26F7F1331A4DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360095,"discussion_content":"这个根本不准确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616370896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80783,"user_name":"小白我们走吧","can_delete":false,"product_type":"c1","uid":1454474,"ip_address":"","ucode":"F1F1B0EF015347","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/8a/3c880f87.jpg","comment_is_top":false,"comment_ctime":1553733948,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10143668540","product_id":100024501,"comment_content":"完了完了，我居然懵逼看完了。","like_count":2},{"had_liked":false,"id":79364,"user_name":"风一样的人","can_delete":false,"product_type":"c1","uid":1469597,"ip_address":"","ucode":"A5710E2006E06C","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/9d/1b6f2ae1.jpg","comment_is_top":false,"comment_ctime":1553447980,"is_pvip":false,"replies":[{"id":"28975","content":"1.通过定时器，定时执行获取函数堆栈。<br>2.连续函数堆栈相同，计算连续的时长就是函数调用时长","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553480325,"ip_address":"","comment_id":79364,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10143382572","product_id":100024501,"comment_content":"作业有点摸不着头脑，方便提供下思路不？<br>目前有两个问题：如何定时获取函数栈？<br>                        获取函数栈后如何计算函数调用时间？<br>","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444469,"discussion_content":"1.通过定时器，定时执行获取函数堆栈。\n2.连续函数堆栈相同，计算连续的时长就是函数调用时长","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553480325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77326,"user_name":"鹏飞","can_delete":false,"product_type":"c1","uid":1458818,"ip_address":"","ucode":"A31608EF850020","user_header":"https://static001.geekbang.org/account/avatar/00/16/42/82/53d05039.jpg","comment_is_top":false,"comment_ctime":1552906956,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10142841548","product_id":100024501,"comment_content":"然鹅并没有一步步学会制作一个","like_count":2,"discussions":[{"author":{"id":1006312,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5a/e8/6a73208c.jpg","nickname":"老友@极客时间","note":"","ucode":"BA96C0D6200590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5360,"discussion_content":"什么鹏飞，西安的吗 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566202572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77214,"user_name":"HamGeek","can_delete":false,"product_type":"c1","uid":1118711,"ip_address":"","ucode":"B1F80CE86984EB","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/f7/962b6eb6.jpg","comment_is_top":false,"comment_ctime":1552888671,"is_pvip":false,"replies":[{"id":"28363","content":"可以参看留言里提到的 WWDC Session","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552990916,"ip_address":"","comment_id":77214,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142823263","product_id":100024501,"comment_content":"有没有什么办法可以统计 main 函数之前的耗时呢？","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443639,"discussion_content":"可以参看留言里提到的 WWDC Session","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552990916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76594,"user_name":"uknow","can_delete":false,"product_type":"c1","uid":1234135,"ip_address":"","ucode":"0D170BDE2CBE14","user_header":"https://static001.geekbang.org/account/avatar/00/12/d4/d7/57be708a.jpg","comment_is_top":false,"comment_ctime":1552636826,"is_pvip":false,"replies":[{"id":"27960","content":"冷启","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552670161,"ip_address":"","comment_id":76594,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142571418","product_id":100024501,"comment_content":"请教一下，在“应用切换器(双击home)”状态下打开的app，如果有类似初始化的广告，比如微博，是冷启动还是热启动？","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443369,"discussion_content":"冷启","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552670161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76588,"user_name":"～科24～","can_delete":false,"product_type":"c1","uid":1265538,"ip_address":"","ucode":"34F2982BDF4CB4","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/82/d00e662d.jpg","comment_is_top":false,"comment_ctime":1552635790,"is_pvip":false,"replies":[{"id":"27948","content":"对","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552653010,"ip_address":"","comment_id":76588,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10142570382","product_id":100024501,"comment_content":"大佬，dlopen()这个方法运行时加载动态库是否是一种减少main函数之前启动时间的方法？","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443365,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552653010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1670234,"avatar":"https://static001.geekbang.org/account/avatar/00/19/7c/5a/0739746f.jpg","nickname":"奋斗","note":"","ucode":"DCF6BC498E351A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":256511,"discussion_content":"这个方法是不是不允许使用？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588489188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76441,"user_name":"叫啥子名字","can_delete":false,"product_type":"c1","uid":1426444,"ip_address":"","ucode":"A365617BD64B9A","user_header":"https://static001.geekbang.org/account/avatar/00/15/c4/0c/d07c4e06.jpg","comment_is_top":false,"comment_ctime":1552612602,"is_pvip":false,"replies":[{"id":"27905","content":"发现-解决-验证，首先解决发现问题。解决问题 case by case，很多情况都会耗时，只要是需要计算的，比如计算的算法不合理，是指数级的，这也是需要优化的。你可以具体说说你发现的耗时问题是什么，我看看有啥方法可以解吧","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624653,"ip_address":"","comment_id":76441,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142547194","product_id":100024501,"comment_content":"你好，正好目前在做启动优化这块，目前是在每个方法前加个时间戳，方法调用后加个时间戳，再根据耗时去具体注册文件中这样打点，统计时间，发现很多耗时东西，基本都是通过异步或者延时执行去做，以前app启动iphone7以上大概1500毫秒，现在大概七百左右，低版本的以前三千多现在一千左右。我想问问这种hook msg send方法是不是更好呢，然后想问问，如果发现耗时，还有什么方法解决吗？除了异步和延后调用","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443310,"discussion_content":"发现-解决-验证，首先解决发现问题。解决问题 case by case，很多情况都会耗时，只要是需要计算的，比如计算的算法不合理，是指数级的，这也是需要优化的。你可以具体说说你发现的耗时问题是什么，我看看有啥方法可以解吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76263,"user_name":"～科24～","can_delete":false,"product_type":"c1","uid":1265538,"ip_address":"","ucode":"34F2982BDF4CB4","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/82/d00e662d.jpg","comment_is_top":false,"comment_ctime":1552561530,"is_pvip":false,"replies":[{"id":"27820","content":"将多个动态库二进制合并成一个就行","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552572190,"ip_address":"","comment_id":76263,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10142496122","product_id":100024501,"comment_content":"可以说说main函数之前优化具体怎么做啊，什么合并动态库有点懵啊。","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443234,"discussion_content":"将多个动态库二进制合并成一个就行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552572190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1471806,"avatar":"https://static001.geekbang.org/account/avatar/00/16/75/3e/71b16443.jpg","nickname":"Struggle","note":"","ucode":"C769D8FFD9C1B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203798,"discussion_content":"动态库是不会打包在machO文件中的，所以在main之前需要将app中引用的动态库例如UIKit加载进内存,这一步是dyld在做的事，动态库合并就像是你要读取的多个动态库合并成一个,来减少耗时。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584083674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76220,"user_name":"Geek__d0d858f46e94","can_delete":false,"product_type":"c1","uid":1453841,"ip_address":"","ucode":"AD0780D2708612","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIcvNGcZMsFkqTC6gb3Q81icCD7qvLMEfE7sD483ib6rwX1huREGKgNu5IGZgaGdmftsPsjf1MVGy9A/132","comment_is_top":false,"comment_ctime":1552552858,"is_pvip":false,"replies":[{"id":"27815","content":"swift 和 c 编译方式类似。Swift 会先编成 SIL（ Swift Intermediate Language）然后再编成机器码","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552571782,"ip_address":"","comment_id":76220,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142487450","product_id":100024501,"comment_content":"oc的方法调用是消息转发，那swift也是消息转发吗？如果不是，swift的方法的本质是什么，或者说有什么方式可以监控她的性能呢？<br>oc的代码在编译时会转成c++，再转成c，那swift在编译时代码如何转换的呢","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443221,"discussion_content":"swift 和 c 编译方式类似。Swift 会先编成 SIL（ Swift Intermediate Language）然后再编成机器码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552571782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76097,"user_name":"Geek_2139c5","can_delete":false,"product_type":"c1","uid":1453888,"ip_address":"","ucode":"12E54007CE083D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqgy6JAwuWbsJOKY1sibdhIzZcAIb0hNd3oQ4dyUGVaoXonaH7WSwfWXH2kKQPnMugzmBPSGzjVjNg/132","comment_is_top":false,"comment_ctime":1552531239,"is_pvip":false,"replies":[{"id":"27793","content":"https:&#47;&#47;blog.nelhage.com&#47;2010&#47;10&#47;amd64-and-va_arg&#47;<br>http:&#47;&#47;infocenter.arm.com&#47;help&#47;topic&#47;com.arm.doc.ihi0055b&#47;IHI0055B_aapcs64.pdf<br>https:&#47;&#47;developer.apple.com&#47;library&#47;ios&#47;documentation&#47;Xcode&#47;Conceptual&#47;iPhoneOSABIReference&#47;Articles&#47;ARM64FunctionCallingConventions.html<br><br>值得一啃","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552566845,"ip_address":"","comment_id":76097,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10142465831","product_id":100024501,"comment_content":"汇编这块有好的书籍和文章推荐吗？戴铭老师","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443178,"discussion_content":"https://blog.nelhage.com/2010/10/amd64-and-va_arg/\nhttp://infocenter.arm.com/help/topic/com.arm.doc.ihi0055b/IHI0055B_aapcs64.pdf\nhttps://developer.apple.com/library/ios/documentation/Xcode/Conceptual/iPhoneOSABIReference/Articles/ARM64FunctionCallingConventions.html\n\n值得一啃","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552566845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241567,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f1/df/8ba04bec.jpg","nickname":"Joker","note":"","ucode":"C42E11098E1B38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25128,"discussion_content":"不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570431670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75962,"user_name":"Jinkey","can_delete":false,"product_type":"c1","uid":1453787,"ip_address":"","ucode":"F51352DBFEFF52","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/db/adcfd49e.jpg","comment_is_top":false,"comment_ctime":1552503716,"is_pvip":false,"replies":[{"id":"27754","content":"你可以看看 AppDelegate.swift 的最开始有个@UIApplicationMain 在那断点就可以看到 main 函数了。Swift 官方博客也有说明 <br><br>In Xcode, Mac templates default to including a “main.swift” file, but for iOS apps the default for new iOS project templates is to add @UIApplicationMain to a regular Swift file. This causes the compiler to synthesize a main entry point for your iOS app, and eliminates the need for a “main.swift” file.<br><br>这个博文地址：https:&#47;&#47;developer.apple.com&#47;swift&#47;blog&#47;?id=7","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552541457,"ip_address":"","comment_id":75962,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142438308","product_id":100024501,"comment_content":"Swift的应用没有main函数吖？对应什么？","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443109,"discussion_content":"你可以看看 AppDelegate.swift 的最开始有个@UIApplicationMain 在那断点就可以看到 main 函数了。Swift 官方博客也有说明 \n\nIn Xcode, Mac templates default to including a “main.swift” file, but for iOS apps the default for new iOS project templates is to add @UIApplicationMain to a regular Swift file. This causes the compiler to synthesize a main entry point for your iOS app, and eliminates the need for a “main.swift” file.\n\n这个博文地址：https://developer.apple.com/swift/blog/?id=7","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552541457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258355,"user_name":"Teresa","can_delete":false,"product_type":"c1","uid":1698219,"ip_address":"","ucode":"6106B84BDC30AF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKkDB6420zwODZTJL6icKKTpyFKuVF9GRjj1V5ziaibADbrpDMmicF8Ad5fmBjycibEg3yhpwlVOLzzxRQ/132","comment_is_top":false,"comment_ctime":1604395787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5899363083","product_id":100024501,"comment_content":"其实感觉这篇文章说的太跳了，一步到另一步都不知道怎么过去的。讲的不够细，感觉就是在罗列代码块。还是直接一点一点看项目里的代码吧。������","like_count":1},{"had_liked":false,"id":202067,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1521007,"ip_address":"","ucode":"488B2D214022EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/icmtficQ8GENVLgedLbUyQsBQaWvQNicEOysUic7TXia1gPrHU7BDZicYxoYmfaianwEEVwz9wajIzCiaDW2CpIVGzYB5g/132","comment_is_top":false,"comment_ctime":1585897907,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880865203","product_id":100024501,"comment_content":"我有个疑问，首屏渲染的方法具体是哪个，[self.window makeKeyAndVisible];?","like_count":1},{"had_liked":false,"id":196641,"user_name":"Geek_652261","can_delete":false,"product_type":"c1","uid":1936592,"ip_address":"","ucode":"9367534FCAD8D9","user_header":"","comment_is_top":false,"comment_ctime":1585299549,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880266845","product_id":100024501,"comment_content":"看完的体会和总结：<br>冷启动分为三个阶段：1. pre-main：动态库加载和类的初始化，可以通过 XCode 打印出来详细的耗时。2. main-首屏：三方SDK的初始化或者其他一些非首屏渲染的操作。3.首屏渲染：初始化 window、rootViewController并进行展示。<br>优化的思路：1 阶段：减少项目内无用的类和方法；多个动态库合并（如何合并？参考博主评论中给的链接和wwdc视频，自己google一下就有）2 阶段：根据具体功能和场景，进行必要的后台或者延迟初始化。3 阶段：视图方面的优化。其中，后两个阶段的优化可以建立在统计方法耗时的基础上，先发现并定位到问题再说解决。<br>进而引申到如何统计方法耗时：1. 精度低，工作量小：定时器定时捕获主线程堆栈信息，获取到后用字典存储方法名称和对应的耗时，如果字典中没有对应的方法，则新添加并将耗时设置为0，如果字典中有，则直接将耗时加上一个定时的间隔（博主推荐0.01s）。2. 精度高，需要懂一些汇编，工作量大：hook objc_msgSend()，可参考博主的 SMCallTrace（这个方法我还不懂，在啃）。","like_count":2},{"had_liked":false,"id":148961,"user_name":"Alex","can_delete":false,"product_type":"c1","uid":1454262,"ip_address":"","ucode":"E2B9DC52645593","user_header":"","comment_is_top":false,"comment_ctime":1573118723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5868086019","product_id":100024501,"comment_content":"xcode升级到最新版本后，戴老师工程里的SMCallTrace是不是报错了，不能用了，大家遇到这种情况了没？好像是汇编语言那出错了，怎么解决了？","like_count":1},{"had_liked":false,"id":137547,"user_name":"Sunny","can_delete":false,"product_type":"c1","uid":1305257,"ip_address":"","ucode":"BB7B274CE0672E","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/a9/0a917f2c.jpg","comment_is_top":false,"comment_ctime":1569772270,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"5864739566","product_id":100024501,"comment_content":"rebase指针调整是什么意思？ bind符号绑定又是什么意思？😂","like_count":1,"discussions":[{"author":{"id":1188627,"avatar":"https://static001.geekbang.org/account/avatar/00/12/23/13/6ba35b43.jpg","nickname":"leejunhui","note":"","ucode":"A957C0034B9F4D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65666,"discussion_content":"建议看下wwdc2016和2017相关的视频","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575019489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1305257,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ea/a9/0a917f2c.jpg","nickname":"Sunny","note":"","ucode":"BB7B274CE0672E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1188627,"avatar":"https://static001.geekbang.org/account/avatar/00/12/23/13/6ba35b43.jpg","nickname":"leejunhui","note":"","ucode":"A957C0034B9F4D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65691,"discussion_content":"感谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575022578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":65666,"ip_address":""},"score":65691,"extra":""}]},{"author":{"id":1459413,"avatar":"https://static001.geekbang.org/account/avatar/00/16/44/d5/ca522e83.jpg","nickname":"爱吃胡萝卜","note":"","ucode":"35FCF84D1E04C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25445,"discussion_content":"mach-o 文件了解一下https://juejin.im/post/5d5bbc426fb9a06ad3472cee","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570528745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1305257,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ea/a9/0a917f2c.jpg","nickname":"Sunny","note":"","ucode":"BB7B274CE0672E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1459413,"avatar":"https://static001.geekbang.org/account/avatar/00/16/44/d5/ca522e83.jpg","nickname":"爱吃胡萝卜","note":"","ucode":"35FCF84D1E04C5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65692,"discussion_content":"感谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575022588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":25445,"ip_address":""},"score":65692,"extra":""}]}]},{"had_liked":false,"id":137546,"user_name":"Sunny","can_delete":false,"product_type":"c1","uid":1305257,"ip_address":"","ucode":"BB7B274CE0672E","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/a9/0a917f2c.jpg","comment_is_top":false,"comment_ctime":1569772191,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5864739487","product_id":100024501,"comment_content":"为什么加载App的可执行文件，就是加载App的 .o文件的集合？App在手机中是以怎样的方式存储的？","like_count":1},{"had_liked":false,"id":126990,"user_name":"徐方豪","can_delete":false,"product_type":"c1","uid":1519371,"ip_address":"","ucode":"0B2065B9D42078","user_header":"https://static001.geekbang.org/account/avatar/00/17/2f/0b/53b25803.jpg","comment_is_top":false,"comment_ctime":1566531057,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5861498353","product_id":100024501,"comment_content":"老师，didFinishLaunchingWithOptions方法完成之前APP是不可能完成首屏渲染的。","like_count":1,"discussions":[{"author":{"id":2681398,"avatar":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","nickname":"D","note":"","ucode":"4112DE94C80A5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383572,"discussion_content":"经过实验，我认为第二个阶段应该是从main函数开始执行到根视图VC的viewDidAppear开始执行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626163255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1569407,"avatar":"https://static001.geekbang.org/account/avatar/00/17/f2/7f/ac597721.jpg","nickname":"Nicorobine","note":"","ucode":"734CEB08636BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323188,"discussion_content":"这里同样有疑问，目前的感觉是在didFinishLaunchingWithOptions方法初始化好初始界面后，然后开异步线程去加载其它资源，从而不影响这个方法正常的返回","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604894085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1528641,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epa5lcfaxArmZI1upDsVh9zmFdefuN79Lkox5fEVMhd5ANEfWtHStbONwvKKc1sL6tHX9iaFpNEyDQ/132","nickname":"Geek_54260c","note":"","ucode":"1F76CC242CD25A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290858,"discussion_content":"对啊，所以就很懵逼。这样分阶段进行优化，最后一个优化是否真的有效果？除非把首屏无关代码放到第一个VC的didAppear之后再执行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594626718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110238,"user_name":"Vincen","can_delete":false,"product_type":"c1","uid":1002373,"ip_address":"","ucode":"AC185B293D2F09","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/85/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1562212642,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857179938","product_id":100024501,"comment_content":"“数量上，苹果公司最多可以支持 6 个非系统动态库合并为一个” 您好，请问这个部分有详细资料吗，如果超过6个非系统动态库合并会造成什么后果呢？会上架失败吗？<br>","like_count":1},{"had_liked":false,"id":94155,"user_name":"Ben","can_delete":false,"product_type":"c1","uid":1523093,"ip_address":"","ucode":"7A3166ABD8F4F4","user_header":"https://static001.geekbang.org/account/avatar/00/17/3d/95/0d62ec09.jpg","comment_is_top":false,"comment_ctime":1557734267,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5852701563","product_id":100024501,"comment_content":"问下戴老师，main函数为什么还要加上@autoreleasepool？我的理解是主线程会自动创建autoreleasepool的，我测试过去掉它貌似对内存也没什么影响。","like_count":1},{"had_liked":false,"id":88031,"user_name":"开发小能手","can_delete":false,"product_type":"c1","uid":1107899,"ip_address":"","ucode":"3ED813CBE77009","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/bb/18eb89fd.jpg","comment_is_top":false,"comment_ctime":1555819543,"is_pvip":false,"replies":[{"id":"31678","content":"异步操作在外部，比如全部标记已读方法：<br>- (void)markAllAsRead {<br>    RACScheduler *scheduler = [RACScheduler schedulerWithPriority:RACSchedulerPriorityDefault];<br>    [[[[[SMDB shareInstance] markFeedAllItemsAsRead:self.feedModel.fid]<br>      subscribeOn:scheduler]<br>     deliverOn:[RACScheduler mainThreadScheduler]]<br>     subscribeNext:^(id x) {<br>        &#47;&#47;<br>    }];<br>    self.feedModel.unReadCount = 0;<br>    [self.navigationController popViewControllerAnimated:YES];<br>    <br>}<br><br>RACScheduler 是异步调用","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1555859093,"ip_address":"","comment_id":88031,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850786839","product_id":100024501,"comment_content":"老师、我刚刚在看您的《已阅》 项目的时候有一个疑问：您在使用 FMDB 做数据库操作的时候，并没有做异步处理。对I&#47;O的操作一般都是建议放到异步线程中的吧，您这里是因为数据量不大，所以直接在主线程中处理么？<br>在您的项目中使用的是 “FMDataBase”，一般我们在项目中都是使用“FM…Queue”，并所提供的都是同步方法，这些方法应该都必须放的异步中执行，对吧？<br>我检测了一下、不放在异步中执行，确实有卡顿。<br><br>所以使用 “FM…Queue” 的 inDatabase 与 inTransaction 方法必须放在异步线程中执行，这个结论是对的吧。<br><br>（看到老师没有放到异步线程、就开始怀疑我们放到异步线程中是不是弄错了）","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447690,"discussion_content":"异步操作在外部，比如全部标记已读方法：\n- (void)markAllAsRead {\n    RACScheduler *scheduler = [RACScheduler schedulerWithPriority:RACSchedulerPriorityDefault];\n    [[[[[SMDB shareInstance] markFeedAllItemsAsRead:self.feedModel.fid]\n      subscribeOn:scheduler]\n     deliverOn:[RACScheduler mainThreadScheduler]]\n     subscribeNext:^(id x) {\n        //\n    }];\n    self.feedModel.unReadCount = 0;\n    [self.navigationController popViewControllerAnimated:YES];\n    \n}\n\nRACScheduler 是异步调用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555859093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83830,"user_name":"风轻云淡","can_delete":false,"product_type":"c1","uid":1243765,"ip_address":"","ucode":"3C2A8791683830","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/75/dee78ab4.jpg","comment_is_top":false,"comment_ctime":1554721283,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5849688579","product_id":100024501,"comment_content":"SMCallTraceCore.c 文件中 <br>“void before_objc_msgSend(id self, SEL _cmd, uintptr_t lr)” 为什么会报<br>“Thread 4: EXC_BREAKPOINT (code=1, subcode=0x10658bbe8)”，这是出现僵尸指针了吗？","like_count":1,"discussions":[{"author":{"id":2602000,"avatar":"https://static001.geekbang.org/account/avatar/00/27/b4/10/01d0d210.jpg","nickname":"李帅","note":"","ucode":"D2042A6CF74CD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376980,"discussion_content":"解决了吗，哥们？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622449049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82388,"user_name":"Haskell邱","can_delete":false,"product_type":"c1","uid":1457988,"ip_address":"","ucode":"B44216CAEFF785","user_header":"","comment_is_top":false,"comment_ctime":1554199280,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5849166576","product_id":100024501,"comment_content":"汇编那块关于寄存器的问题，感觉大家都有疑问，比如x8,x9。还有调用before_objc记录时间之前，x3=x4的作用是啥？","like_count":1},{"had_liked":false,"id":81452,"user_name":"Geek_2760cb","can_delete":false,"product_type":"c1","uid":1389000,"ip_address":"","ucode":"0D1875354B0383","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Y2xJFav97cmRWegSvHwWgH7R2FINhZiay5JxyQGcRiaAIibMFtDUVdgibibWGCpjLMfshVfTYzojABVeH6fQcQqvtibQ/132","comment_is_top":false,"comment_ctime":1553916718,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5848884014","product_id":100024501,"comment_content":"看到想睡觉。。一脸懵逼😳","like_count":1},{"had_liked":false,"id":79679,"user_name":"小馬同學","can_delete":false,"product_type":"c1","uid":1457136,"ip_address":"","ucode":"9FEBBE025F6471","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/f0/1fbf621b.jpg","comment_is_top":false,"comment_ctime":1553520013,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5848487309","product_id":100024501,"comment_content":"所谓的放在首屏渲染之后的操作指的是在 self.window.rootViewController 这步操作之后的吗 ","like_count":1},{"had_liked":false,"id":79102,"user_name":"Aaron","can_delete":false,"product_type":"c1","uid":1444144,"ip_address":"","ucode":"8BCBA08EFC2894","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/liaib2emViaEjoEHDFdI0DibVxnVOjB61KcXmaIyLhQib2ZvPRZjGCW4K6jp1tLAJWaoN41Yxzby8lS7iaLl8v7eXpYg/132","comment_is_top":false,"comment_ctime":1553352199,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5848319495","product_id":100024501,"comment_content":"说汇编，你们懂吗？反正我是不懂，看到文中一些奇奇怪怪的代码我就头疼，还有那么多没接触过的知识，要看懂这篇文章，是不是还要把文章里每一个知识点学懂才行？一年时间够吗？😖","like_count":1},{"had_liked":false,"id":77780,"user_name":"dubhe","can_delete":false,"product_type":"c1","uid":1249746,"ip_address":"","ucode":"D08AC58A1F1B26","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/d2/c3b5f485.jpg","comment_is_top":false,"comment_ctime":1552997570,"is_pvip":false,"replies":[{"id":"28406","content":"不用，合并只是物理上的哦","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553001433,"ip_address":"","comment_id":77780,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847964866","product_id":100024501,"comment_content":"戴老师，这是我们项目的pre-main 的分析：请帮忙指点一下有什么问题，不胜感激<br>Total pre-main time: 1.5 seconds (100.0%)<br>         dylib loading time: 745.17 milliseconds (48.9%)<br>        rebase&#47;binding time: 163.02 milliseconds (10.7%)<br>            ObjC setup time: 123.26 milliseconds (8.1%)<br>           initializer time: 490.05 milliseconds (32.2%)<br>           slowest intializers :<br>             libSystem.B.dylib :  14.50 milliseconds (0.9%)<br>    libMainThreadChecker.dylib :  62.51 milliseconds (4.1%)<br>          libglInterpose.dylib : 129.17 milliseconds (8.4%)<br>         libMTLInterpose.dylib :  41.60 milliseconds (2.7%)<br>                     BaiduNavi :  92.58 milliseconds (6.0%)<br>                    xxxx :  61.65 milliseconds (4.0%)<br>                projectName : 138.27 milliseconds (9.0%)<br>在合并 framework 的是时候有个疑问，假如有 A.framework,B.framework,C.framework 合并成 D.framework，那么A,B,C三个framework的head怎么暴露出来？还是需要自己在D.framework里面在封装一层？","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443849,"discussion_content":"不用，合并只是物理上的哦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553001433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77488,"user_name":"Geek_08f0c9","can_delete":false,"product_type":"c1","uid":1379590,"ip_address":"","ucode":"CA4F517DD695B5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/fU4YNhGuWrh1G1F0Ebougv5Ugf6kZ6VLPf4jPrxGuldFnbXucGibXaN0rEHticIeyoeLiaEibZ2NVL5EOySscJiaeYg/132","comment_is_top":false,"comment_ctime":1552956063,"is_pvip":false,"replies":[{"id":"28357","content":"慢慢来吧","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552979562,"ip_address":"","comment_id":77488,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847923359","product_id":100024501,"comment_content":"满满的知识点，可惜消化不了，一步一步来","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443744,"discussion_content":"慢慢来吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552979562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77057,"user_name":"AmazingYu","can_delete":false,"product_type":"c1","uid":1005587,"ip_address":"","ucode":"7608037021CC1C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/13/2afd6bdb.jpg","comment_is_top":false,"comment_ctime":1552820898,"is_pvip":false,"replies":[{"id":"28379","content":"fishhook 主要是通过符号表来进行方法替换的，符号表是在 linkedit 段里","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552997100,"ip_address":"","comment_id":77057,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847788194","product_id":100024501,"comment_content":"想问一下， fishhook 中的 rebind_symbols_for_image 函数在寻找 base  address 的时候使用 linkedit 段而不使用别的段来定位 base address 呢？","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443565,"discussion_content":"fishhook 主要是通过符号表来进行方法替换的，符号表是在 linkedit 段里","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552997100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76984,"user_name":"有钱才可以为所欲为","can_delete":false,"product_type":"c1","uid":1248027,"ip_address":"","ucode":"1FD642D50E57FA","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/1b/d4fb3c6c.jpg","comment_is_top":false,"comment_ctime":1552793743,"is_pvip":false,"replies":[{"id":"28400","content":"是的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552998606,"ip_address":"","comment_id":76984,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5847761039","product_id":100024501,"comment_content":"戴老师，我们公司项目中，didFinishLaunchingWithOptions 方法作用域内，执行很多代码，比如第三方SDK初始化之类的。您说的首屏渲染完成，具体点，是否就是设置了rootViewContriller变量这行代码？","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443527,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552998606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2681398,"avatar":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","nickname":"D","note":"","ucode":"4112DE94C80A5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383573,"discussion_content":"应该在rootViewContriller对象的viewDidAppear开始执行之后算首屏渲染完成！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626163366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1528641,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epa5lcfaxArmZI1upDsVh9zmFdefuN79Lkox5fEVMhd5ANEfWtHStbONwvKKc1sL6tHX9iaFpNEyDQ/132","nickname":"Geek_54260c","note":"","ucode":"1F76CC242CD25A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290857,"discussion_content":"那如果是rootViewContriller这个作为首屏渲染完成的标志的话，后面的代码依然会影响首屏真正的展示时间啊，比如在didFinishLaunch最后写个while循环，那么首屏永远展示不出来啊。那这样来分阶段是不是不够严谨？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594626559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76773,"user_name":"暮雪","can_delete":false,"product_type":"c1","uid":1108146,"ip_address":"","ucode":"2A78499C7C0683","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/b2/89fc74e4.jpg","comment_is_top":false,"comment_ctime":1552705786,"is_pvip":false,"replies":[{"id":"28003","content":"可以了解下官方 WWDC 关于启动优化的那个 Session 里面会讲","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552710967,"ip_address":"","comment_id":76773,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847673082","product_id":100024501,"comment_content":"文中说到可以把非官方动态库合并，并且支持最多6个动态库合并，但是网上很多资料显示又不允许私建动态库","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443439,"discussion_content":"可以了解下官方 WWDC 关于启动优化的那个 Session 里面会讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552710967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76697,"user_name":"Kai","can_delete":false,"product_type":"c1","uid":1024088,"ip_address":"","ucode":"CD3FACF1803D8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/58/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1552677453,"is_pvip":false,"replies":[{"id":"27977","content":"能，写个 demo 验证下","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552697868,"ip_address":"","comment_id":76697,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847644749","product_id":100024501,"comment_content":"如果说有一个photo uploader的方法，是在backend thread上传photo，之后在main thread更新ui。那如果在上传的时候用户把app给放到后端了。然后上传完，main thread的更新会发生吗？<br>之后用户又把app放前端了。那用户在这个时候能看到ui更新吗？","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443411,"discussion_content":"能，写个 demo 验证下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552697868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76696,"user_name":"Kai","can_delete":false,"product_type":"c1","uid":1024088,"ip_address":"","ucode":"CD3FACF1803D8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/58/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1552677259,"is_pvip":false,"replies":[{"id":"27976","content":"使用第一种方法，或者通过 Clang 打桩","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552697775,"ip_address":"","comment_id":76696,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847644555","product_id":100024501,"comment_content":"objc的hook是用method swizzle来实现运行时替换吧。有没有对于swift的检测方法呢？","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443410,"discussion_content":"使用第一种方法，或者通过 Clang 打桩","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552697775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76663,"user_name":"Geek__d0d858f46e94","can_delete":false,"product_type":"c1","uid":1453841,"ip_address":"","ucode":"AD0780D2708612","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIcvNGcZMsFkqTC6gb3Q81icCD7qvLMEfE7sD483ib6rwX1huREGKgNu5IGZgaGdmftsPsjf1MVGy9A/132","comment_is_top":false,"comment_ctime":1552660522,"is_pvip":false,"replies":[{"id":"27958","content":"可以用第一种，还可以用 Clang 打桩来统计耗时","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552670045,"ip_address":"","comment_id":76663,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847627818","product_id":100024501,"comment_content":"现在问题是swift不调用send_message，那么有什么方法进行hock呢？","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443394,"discussion_content":"可以用第一种，还可以用 Clang 打桩来统计耗时","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552670045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76432,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1371687,"ip_address":"","ucode":"27C1E5FD797600","user_header":"https://static001.geekbang.org/account/avatar/00/14/ee/27/58171269.jpg","comment_is_top":false,"comment_ctime":1552611315,"is_pvip":false,"replies":[{"id":"27915","content":"不是，看我相关留言","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624780,"ip_address":"","comment_id":76432,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847578611","product_id":100024501,"comment_content":"是不是类似于合成真机和模拟器动态库一个道理，用终端命令lipo这种命令？","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443306,"discussion_content":"不是，看我相关留言","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76259,"user_name":"lyle","can_delete":false,"product_type":"c1","uid":1247482,"ip_address":"","ucode":"B1DEC7463E5013","user_header":"","comment_is_top":false,"comment_ctime":1552560239,"is_pvip":false,"replies":[{"id":"27818","content":"可行的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552572117,"ip_address":"","comment_id":76259,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847527535","product_id":100024501,"comment_content":"android在java字节码用插桩方法统计耗时，同理，如果iOS中用llvm的IR中插桩来统计函数耗时这个方法可行吗？","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443232,"discussion_content":"可行的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552572117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76166,"user_name":"夏了南城","can_delete":false,"product_type":"c1","uid":1223012,"ip_address":"","ucode":"7D9B272ECA3F63","user_header":"https://static001.geekbang.org/account/avatar/00/12/a9/64/52f87ad0.jpg","comment_is_top":false,"comment_ctime":1552541031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5847508327","product_id":100024501,"comment_content":"大佬呀，汇编那里看着好费劲哦<br>","like_count":1},{"had_liked":false,"id":76128,"user_name":"Flipped","can_delete":false,"product_type":"c1","uid":1445605,"ip_address":"","ucode":"911B13082F9B10","user_header":"https://static001.geekbang.org/account/avatar/00/16/0e/e5/bbedaab5.jpg","comment_is_top":false,"comment_ctime":1552533981,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5847501277","product_id":100024501,"comment_content":"一上来就干货满满, 很实用啊! 可以准确监听99%以上的方法了. 看到有评论说从源码看的确一些系统调用的方法不走 objc_msgSend, 比如+(void)load方法, 但是作者也单独说了+(void)load 尽量不要写, 用+(void)initialize代替. 我觉得文章说的还是很缜密的. 很赞. ","like_count":1,"discussions":[{"author":{"id":1188627,"avatar":"https://static001.geekbang.org/account/avatar/00/12/23/13/6ba35b43.jpg","nickname":"leejunhui","note":"","ucode":"A957C0034B9F4D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65600,"discussion_content":"是这样的，关于这里可以参考下这个链接 https://stackoverflow.com/questions/13326435/nsobject-load-and-initialize-what-do-they-do","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575015084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76095,"user_name":"麟の🏸","can_delete":false,"product_type":"c1","uid":1456942,"ip_address":"","ucode":"6EA2A9D777AF6B","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/2e/b961e496.jpg","comment_is_top":false,"comment_ctime":1552530713,"is_pvip":false,"replies":[{"id":"27792","content":"多谢啦","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552566802,"ip_address":"","comment_id":76095,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847498009","product_id":100024501,"comment_content":"戴老师注意身体，后面文章输出细水长流。💪 ","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443177,"discussion_content":"多谢啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552566802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76077,"user_name":"慧慧","can_delete":false,"product_type":"c1","uid":1375821,"ip_address":"","ucode":"C1CDB9BF4564C7","user_header":"https://static001.geekbang.org/account/avatar/00/14/fe/4d/e5c33794.jpg","comment_is_top":false,"comment_ctime":1552528391,"is_pvip":false,"replies":[{"id":"27789","content":"如果有兴趣，这里有三份相关资料建议可以深入学习下，也有苹果官方的<br>https:&#47;&#47;blog.nelhage.com&#47;2010&#47;10&#47;amd64-and-va_arg&#47;<br>http:&#47;&#47;infocenter.arm.com&#47;help&#47;topic&#47;com.arm.doc.ihi0055b&#47;IHI0055B_aapcs64.pdf<br>https:&#47;&#47;developer.apple.com&#47;library&#47;ios&#47;documentation&#47;Xcode&#47;Conceptual&#47;iPhoneOSABIReference&#47;Articles&#47;ARM64FunctionCallingConventions.html","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552566534,"ip_address":"","comment_id":76077,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5847495687","product_id":100024501,"comment_content":"汇编基础差，汇编部分希望讲的细一些","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443168,"discussion_content":"如果有兴趣，这里有三份相关资料建议可以深入学习下，也有苹果官方的\nhttps://blog.nelhage.com/2010/10/amd64-and-va_arg/\nhttp://infocenter.arm.com/help/topic/com.arm.doc.ihi0055b/IHI0055B_aapcs64.pdf\nhttps://developer.apple.com/library/ios/documentation/Xcode/Conceptual/iPhoneOSABIReference/Articles/ARM64FunctionCallingConventions.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552566534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241567,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f1/df/8ba04bec.jpg","nickname":"Joker","note":"","ucode":"C42E11098E1B38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25138,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570433175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76057,"user_name":"250ZH","can_delete":false,"product_type":"c1","uid":1457901,"ip_address":"","ucode":"F9B4FD1E4E7C5C","user_header":"https://static001.geekbang.org/account/avatar/00/16/3e/ed/e154de2e.jpg","comment_is_top":false,"comment_ctime":1552526751,"is_pvip":true,"replies":[{"id":"27787","content":"我的建议是需要用的是时候是需要仔细学习的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552566381,"ip_address":"","comment_id":76057,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847494047","product_id":100024501,"comment_content":"戴铭老师好，我是非计算机相关专业的，想要提高自己的编程水平（不仅仅是在iOS方面），是否需要仔细学习汇编语言相关知识？谢谢您","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443154,"discussion_content":"我的建议是需要用的是时候是需要仔细学习的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552566381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76033,"user_name":"猿程序","can_delete":false,"product_type":"c1","uid":1455356,"ip_address":"","ucode":"A476C4184B91D2","user_header":"","comment_is_top":false,"comment_ctime":1552525157,"is_pvip":false,"replies":[{"id":"27783","content":"冷启","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552565747,"ip_address":"","comment_id":76033,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847492453","product_id":100024501,"comment_content":"我发现有的APP在后台放久了再次启动时会重新初始化，是否是系统回收了？此时还是热启动吗？","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443143,"discussion_content":"冷启","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552565747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76004,"user_name":"your problem？","can_delete":false,"product_type":"c1","uid":1457464,"ip_address":"","ucode":"6E096E7958CFD7","user_header":"https://static001.geekbang.org/account/avatar/00/16/3d/38/6f02a4b9.jpg","comment_is_top":false,"comment_ctime":1552523350,"is_pvip":false,"replies":[{"id":"27758","content":"swift 里继承了 oc 的类的可以，苹果为了兼容 oc 会让这种类可以使用运行时。还有 dynamic 关键字","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552544397,"ip_address":"","comment_id":76004,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847490646","product_id":100024501,"comment_content":"由于工作原因，基本只用过oc，对swift除了点基础语法没啥了解，不知道这个方法swift可以用吗，swift支持运行时吗，希望老师能解答一下","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443128,"discussion_content":"swift 里继承了 oc 的类的可以，苹果为了兼容 oc 会让这种类可以使用运行时。还有 dynamic 关键字","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552544397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347176,"user_name":"肖","can_delete":false,"product_type":"c1","uid":1529343,"ip_address":"","ucode":"763D0C2871B92F","user_header":"https://static001.geekbang.org/account/avatar/00/17/55/ff/1489d0fb.jpg","comment_is_top":false,"comment_ctime":1653793628,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653793628","product_id":100024501,"comment_content":"多个库合并的链接打不开了，科学上网也不行了，能提供下方法吗？","like_count":0},{"had_liked":false,"id":345506,"user_name":"Joker","can_delete":false,"product_type":"c1","uid":1241567,"ip_address":"","ucode":"C42E11098E1B38","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/df/8ba04bec.jpg","comment_is_top":false,"comment_ctime":1652341319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652341319","product_id":100024501,"comment_content":"main函数之前的几个流程，通过这样hook也能获取到耗时吗？怎么样才能拿到main函数钱几个阶段的耗时呢？","like_count":0},{"had_liked":false,"id":337082,"user_name":"Geek_14b699","can_delete":false,"product_type":"c1","uid":1229594,"ip_address":"","ucode":"02AC3773765AB9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJuQocTOGrXzPb8fgDibrdH5jBAtrdWckiaKjvner6OT1DeKtRm43Wo2jFqTuiaqmsKNqvfbxj25H4bg/132","comment_is_top":false,"comment_ctime":1646614338,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646614338","product_id":100024501,"comment_content":"main函数之前的方法耗时能监控到么？","like_count":0},{"had_liked":false,"id":335495,"user_name":"lucas.liao","can_delete":false,"product_type":"c1","uid":2893420,"ip_address":"","ucode":"9C6F0DB859CE37","user_header":"","comment_is_top":false,"comment_ctime":1645540444,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645540444","product_id":100024501,"comment_content":"swift how to profile","like_count":0},{"had_liked":false,"id":321340,"user_name":"爱神","can_delete":false,"product_type":"c1","uid":1454913,"ip_address":"","ucode":"F0291DCAB8DCB1","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/41/73b15715.jpg","comment_is_top":false,"comment_ctime":1636800271,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636800271","product_id":100024501,"comment_content":"Time Profiler 抓取的一个时间点的方法，怎能知道方法何时开始、何时结束，怎么计算耗时呢？","like_count":0},{"had_liked":false,"id":305745,"user_name":"D","can_delete":false,"product_type":"c1","uid":2681398,"ip_address":"","ucode":"4112DE94C80A5B","user_header":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","comment_is_top":false,"comment_ctime":1628148550,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628148550","product_id":100024501,"comment_content":"【当然还不够。我前面也说了，objc_msgSend 是用汇编语言实现的，所以我们还需要从汇编层面多加点料】---读到这句的时候不禁想问为啥？<br>实际上 C语言生成的汇编会包含类似&quot;stp    x29, x30, [sp, #0x30]&quot;这样一句话，将lr指针入栈保护。其次，并且会将C语言参数也入栈保护，类似<br>&quot;stur   x0, [sp #-0x8]<br>stur   x1, [sp, #-0x10]<br>stur   x2, [sp, #-0x12]&quot;,<br>而汇编语言写的objc_msgSend参数将【入栈保护lr和函数参数】的操作省略了，<br>因此这里需要加点料来保护lr和函数参数","like_count":0},{"had_liked":false,"id":304329,"user_name":"D","can_delete":false,"product_type":"c1","uid":2681398,"ip_address":"","ucode":"4112DE94C80A5B","user_header":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","comment_is_top":false,"comment_ctime":1627355116,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627355116","product_id":100024501,"comment_content":"&quot;objc_msgSend 是用汇编语言实现的，所以我们还需要从汇编层面多加点料。&quot;为什么汇编写的就要从汇编反面加点料？像NSLOG这样的hook为什么不用加点汇编？一头雾水","like_count":0},{"had_liked":false,"id":302528,"user_name":"D","can_delete":false,"product_type":"c1","uid":2681398,"ip_address":"","ucode":"4112DE94C80A5B","user_header":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","comment_is_top":false,"comment_ctime":1626251640,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626251640","product_id":100024501,"comment_content":"关于fishhook 的实现细节，确实比较令人难以理解。我这里写了一个demo 和对应的分析。https:&#47;&#47;gitee.com&#47;GuitarTom&#47;fish-hook-demo","like_count":0},{"had_liked":false,"id":302309,"user_name":"D","can_delete":false,"product_type":"c1","uid":2681398,"ip_address":"","ucode":"4112DE94C80A5B","user_header":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","comment_is_top":false,"comment_ctime":1626162972,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626162972","product_id":100024501,"comment_content":"戴老师说的第二个阶段是从main函数执行到 didFinishLaunchingWithOptions作用域结束我有异议！<br>准确的说，应该是main函数执行到窗口根视图VC的viewDidAppear开始执行，因为didFinishLaunchingWithOptions 返回的时候屏幕还没有显示啊！从didFinishLaunchingWithOptions return YES 到根视图的viewDidAppear 是有一定的时间差的!","like_count":0},{"had_liked":false,"id":301706,"user_name":"D","can_delete":false,"product_type":"c1","uid":2681398,"ip_address":"","ucode":"4112DE94C80A5B","user_header":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","comment_is_top":false,"comment_ctime":1625818553,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625818553","product_id":100024501,"comment_content":"请问下这个 SMCallTrace 是如果发布到商店的话，没有符号表的情况下是不是得结合dysm文件来看log?","like_count":0},{"had_liked":false,"id":301705,"user_name":"D","can_delete":false,"product_type":"c1","uid":2681398,"ip_address":"","ucode":"4112DE94C80A5B","user_header":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","comment_is_top":false,"comment_ctime":1625818243,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625818243","product_id":100024501,"comment_content":"首屏渲染完成后应该是指首页的ViewDidAppear调用完成之后，经过我测试,<br>main 函数调用之后，会先didFinishLaunchingWithOptions函数返回之后，再一次执行首页的viewDidLoad,viewDIdAppler,故，第二个阶段应该指的是:<br>main函数开始-&gt;首页viewController的viewDidAppler函数开始","like_count":0},{"had_liked":false,"id":301701,"user_name":"D","can_delete":false,"product_type":"c1","uid":2681398,"ip_address":"","ucode":"4112DE94C80A5B","user_header":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","comment_is_top":false,"comment_ctime":1625817444,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625817444","product_id":100024501,"comment_content":"我觉得这个地方有必要提一下在xcode scheme里面加DYLD_PRINT_STATISTICS 这个字段，这样可以打印main函数前面那段的用时时间,例如<br>Total pre-main time: 193.47 milliseconds (100.0%)<br>         dylib loading time:  23.28 milliseconds (12.0%)<br>        rebase&#47;binding time:  19.61 milliseconds (10.1%)<br>            ObjC setup time:  26.16 milliseconds (13.5%)<br>           initializer time: 124.41 milliseconds (64.3%)<br>           slowest intializers :<br>             libSystem.B.dylib :  11.04 milliseconds (5.7%)<br>   libBacktraceRecording.dylib :   7.71 milliseconds (3.9%)<br>               libobjc.A.dylib :   8.77 milliseconds (4.5%)","like_count":0},{"had_liked":false,"id":289749,"user_name":"宋一听","can_delete":false,"product_type":"c1","uid":2283737,"ip_address":"","ucode":"2956976149BCA9","user_header":"https://static001.geekbang.org/account/avatar/00/22/d8/d9/99a3dd55.jpg","comment_is_top":false,"comment_ctime":1619163827,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619163827","product_id":100024501,"comment_content":"super调用不是会转换成obj_msgSendSuper吗？为什么只hook obj_msgSend就可以。求个懂的人帮忙解答","like_count":0},{"had_liked":false,"id":280982,"user_name":"Geek_321652","can_delete":false,"product_type":"c1","uid":2460200,"ip_address":"","ucode":"2F4DE1915919F0","user_header":"","comment_is_top":false,"comment_ctime":1614512230,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614512230","product_id":100024501,"comment_content":"您好，请教一个关于启动优化的问题：<br>如您所说，启动耗时main函数执行到didfinish执行完毕，拿我们项目来说，在这段时间内有多个第三方功能的初始化，如听云，网络监控组件，卡顿耗时组件，埋点统计组件等等业务组件初始化操作。对于能放入子线程执行的已处理，但是上述组件我层尝试过异步处理，但会造成业务组件统计不准确。如您所说，在优化时分类首屏业务和非首屏业务，但是项目中并非完全的是或者非，加之我们所使用多个组件如听云均为第三方，无法从其内部做些许修改来适配项目。对此，您有什么建议吗？","like_count":0},{"had_liked":false,"id":278919,"user_name":"sankun","can_delete":false,"product_type":"c1","uid":2443455,"ip_address":"","ucode":"BF00987DD91260","user_header":"https://static001.geekbang.org/account/avatar/00/25/48/bf/f404be57.jpg","comment_is_top":false,"comment_ctime":1613461750,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613461750","product_id":100024501,"comment_content":"启动优化，功能分类 function分类可以举个🌰嘛。","like_count":0},{"had_liked":false,"id":267157,"user_name":"新味道","can_delete":false,"product_type":"c1","uid":2227527,"ip_address":"","ucode":"979E3574082CE7","user_header":"https://static001.geekbang.org/account/avatar/00/21/fd/47/499339d1.jpg","comment_is_top":false,"comment_ctime":1607612616,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607612616","product_id":100024501,"comment_content":" 检查耗时的方法能用在Swift项目吗？","like_count":0},{"had_liked":false,"id":266847,"user_name":"°Simple","can_delete":false,"product_type":"c1","uid":1085533,"ip_address":"","ucode":"68AD51B8F3C3F7","user_header":"https://static001.geekbang.org/account/avatar/00/10/90/5d/e58db789.jpg","comment_is_top":false,"comment_ctime":1607504761,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607504761","product_id":100024501,"comment_content":"请问为什么UIViewController+clsCall.m里<br><br>- (void)clsCallHookViewWillAppear:(BOOL)animated {<br>    &#47;&#47;执行插入代码<br>    [self clsCallInsertToViewWillAppear];<br>    [self clsCallHookViewWillAppear:animated];<br>}<br><br>这个方法要循环调用自己呢？  然后程序也不会卡死","like_count":0},{"had_liked":false,"id":261798,"user_name":"Ero.北北","can_delete":false,"product_type":"c1","uid":1208414,"ip_address":"","ucode":"0BEE5C301EF93F","user_header":"https://static001.geekbang.org/account/avatar/00/12/70/5e/121e5a97.jpg","comment_is_top":false,"comment_ctime":1605527138,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605527138","product_id":100024501,"comment_content":"时隔一年重新整理学习了ARM汇编和Mach-O编译装载链接的知识，终于拨云见日出。最近还开始流行针对Page Fault的二进制重排优化【狗头】","like_count":0},{"had_liked":false,"id":248951,"user_name":"Eagle、","can_delete":false,"product_type":"c1","uid":2182897,"ip_address":"","ucode":"CBACE57DAC181D","user_header":"https://static001.geekbang.org/account/avatar/00/21/4e/f1/4c9d0e14.jpg","comment_is_top":false,"comment_ctime":1600391246,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600391246","product_id":100024501,"comment_content":"请问启动功能优化，把非首页显示相关的业务和初始化不要放到didFinishLaunchWithOption，请问一般这些非首页显示的业务代码和初始化是放到首页控制器来集中调用还是怎么样呢","like_count":0},{"had_liked":false,"id":242971,"user_name":"二十四点计算公式","can_delete":false,"product_type":"c1","uid":1823465,"ip_address":"","ucode":"DDA4AD5C833E17","user_header":"https://static001.geekbang.org/account/avatar/00/1b/d2/e9/3c0da66c.jpg","comment_is_top":false,"comment_ctime":1597908026,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597908026","product_id":100024501,"comment_content":"Environment Variables配置DYLD_PRINT_STATISTICS，这个可不可以表现实际启动速度。<br>","like_count":0},{"had_liked":false,"id":240667,"user_name":"杂草","can_delete":false,"product_type":"c1","uid":2111582,"ip_address":"","ucode":"604C7A12256A14","user_header":"https://static001.geekbang.org/account/avatar/00/20/38/5e/6b71b213.jpg","comment_is_top":false,"comment_ctime":1597030508,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597030508","product_id":100024501,"comment_content":"这里的描述是不是有问题？didFinishLaunchingWithOptions 这个地方的首屏渲染完成，指的什么首屏，是launchscreen，还是指的一般业务的首页，这里讲的不够清晰<br><br>首屏渲染后的这个阶段，主要完成的是，非首屏其他业务服务模块的初始化、监听的注册、配置文件的读取等。从函数上来看，这个阶段指的就是截止到 didFinishLaunchingWithOptions 方法作用域内执行首屏渲染之后的所有方法执行完成。简单说的话，这个阶段就是从渲染完成时开始，到 didFinishLaunchingWithOptions 方法作用域结束时结束。","like_count":0},{"had_liked":false,"id":239485,"user_name":"Donkeyman","can_delete":false,"product_type":"c1","uid":1932704,"ip_address":"","ucode":"A24ED814252FC5","user_header":"https://static001.geekbang.org/account/avatar/00/1d/7d/a0/323dea01.jpg","comment_is_top":false,"comment_ctime":1596545877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596545877","product_id":100024501,"comment_content":"iOS不是不支持动态链接库吗~~苹果提供的动态链接库不都是iOS自己的库么，为啥还说启动过程中动态链接库数量不超过6个？","like_count":0},{"had_liked":false,"id":238587,"user_name":"Teresa","can_delete":false,"product_type":"c1","uid":1698219,"ip_address":"","ucode":"6106B84BDC30AF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKkDB6420zwODZTJL6icKKTpyFKuVF9GRjj1V5ziaibADbrpDMmicF8Ad5fmBjycibEg3yhpwlVOLzzxRQ/132","comment_is_top":false,"comment_ctime":1596205820,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596205820","product_id":100024501,"comment_content":"哇，第一篇就这么有深度，汇编的东西，基本不懂。需要慢慢消化。","like_count":0},{"had_liked":false,"id":237695,"user_name":"Geek_596796","can_delete":false,"product_type":"c1","uid":1454685,"ip_address":"","ucode":"22F69AFECFFB2A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKfvL0gokHaGW2LiaDXoF28kEw37No2ERwJkRWvmMRwiaDJX9BxySUKMicTaMttcubtPo5Sb2CurWCxA/132","comment_is_top":false,"comment_ctime":1595928418,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595928418","product_id":100024501,"comment_content":"热启动时长怎么统计","like_count":0},{"had_liked":false,"id":234220,"user_name":"Geek_54260c","can_delete":false,"product_type":"c1","uid":1528641,"ip_address":"","ucode":"1F76CC242CD25A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epa5lcfaxArmZI1upDsVh9zmFdefuN79Lkox5fEVMhd5ANEfWtHStbONwvKKc1sL6tHX9iaFpNEyDQ/132","comment_is_top":false,"comment_ctime":1594622159,"is_pvip":false,"replies":[{"id":"86459","content":"这个就是图文和音频哈，咱们专栏都是这样的学习方式","user_name":"编辑回复","user_name_real":"郭蕾","uid":"1000473","ctime":1594634656,"ip_address":"","comment_id":234220,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1594622159","product_id":100024501,"comment_content":"首屏渲染方法指的是 makeKeyAndVisiable 之类的方法吗？<br>另外，这类方法执行完毕之后，如果后面还有代码，那么首屏也不会展现吧？<br>所以，戴老师，想问问这个首屏渲染完成到底是怎么界定的呢？是相关代码执行完毕，还是收到某个通知呢？","like_count":0,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501322,"discussion_content":"这个就是图文和音频哈，咱们专栏都是这样的学习方式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594634656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226527,"user_name":"Joiner","can_delete":false,"product_type":"c1","uid":1071941,"ip_address":"","ucode":"7F67D4C325E71F","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/45/5dc5437e.jpg","comment_is_top":false,"comment_ctime":1592128742,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592128742","product_id":100024501,"comment_content":"戴老师您好，我有个疑问：<br>对于首屏渲染后的这个阶段，文中说：简单说的话，这个阶段就是从渲染完成时开始，到 didFinishLaunchingWithOptions 方法作用域结束时结束。这个阶段用户已经能够看到 App 的首页信息了<br>但是我发现就算渲染完成了，如果后面还有占用主线程的代码(例如写一个循环)，首页的仍然没有展示出来。是我什么地方理解错误了吗？<br>好像得didFinishLaunchingWithOptions return以后才会展示","like_count":0},{"had_liked":false,"id":218344,"user_name":"z勇","can_delete":false,"product_type":"c1","uid":1463927,"ip_address":"","ucode":"F6564F205DB733","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/77/7a750f34.jpg","comment_is_top":false,"comment_ctime":1589784500,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589784500","product_id":100024501,"comment_content":"有个小疑问，+initialize()替代+load方法，个人感觉是会出问题的，因为+initialize()方法可能被调用多次，又可能压根没被调用,请大神解惑","like_count":0,"discussions":[{"author":{"id":1459863,"avatar":"https://static001.geekbang.org/account/avatar/00/16/46/97/ddd4b05f.jpg","nickname":"爱上我们的微笑","note":"","ucode":"40CDB7AB0991CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286966,"discussion_content":"建议学习下initialize和load的触发时机和加载顺序","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593335006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217371,"user_name":"Geek_a414f8","can_delete":false,"product_type":"c1","uid":1912035,"ip_address":"","ucode":"AB0FA394C09FA4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ccpIPibkaTQeOPClugKDicV10vrpcpGBUHtVSrFpZmd1jFicXFDoNC7BJibQicQr6PnNvL5iaoGOVict2cXdaUvnTCaFg/132","comment_is_top":false,"comment_ctime":1589471504,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589471504","product_id":100024501,"comment_content":"大神，load每个方法需要4毫秒，是苹果官方的说法吗，还是通过检测出来的","like_count":0},{"had_liked":false,"id":215030,"user_name":"小先生","can_delete":false,"product_type":"c1","uid":1055214,"ip_address":"","ucode":"E5F2052E0323C0","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/ee/e395a35e.jpg","comment_is_top":false,"comment_ctime":1588893123,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588893123","product_id":100024501,"comment_content":"这个定时间隔如果小于所有方法执行的时间（比如 0.002 秒），那么基本就能监控到所有方法。但这样做的话，整体的耗时时间就不够准确。请问整体耗时时间不准确这个结论是怎么得出的？","like_count":0},{"had_liked":false,"id":214831,"user_name":"人人有书读 人人有功练","can_delete":false,"product_type":"c1","uid":1339774,"ip_address":"","ucode":"41FA6F942445D3","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/7e/a2ca516a.jpg","comment_is_top":false,"comment_ctime":1588827212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588827212","product_id":100024501,"comment_content":"戴老师 还发现一个问题 文中给出的Demo，只要写一个UIView *myView = [UIView alloc] init]，然后[myView setFrame:CGRectMake(0, 0, 100, 100)];  也就是对view发送setFrame，App就会立刻崩溃。","like_count":0},{"had_liked":false,"id":214485,"user_name":"人人有书读 人人有功练","can_delete":false,"product_type":"c1","uid":1339774,"ip_address":"","ucode":"41FA6F942445D3","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/7e/a2ca516a.jpg","comment_is_top":false,"comment_ctime":1588756468,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588756468","product_id":100024501,"comment_content":"请问戴老师 为什么我将Demo中的push_call_record这个方法注释掉，程序会直接崩溃，提示error: memory read failed for 0x0?","like_count":0},{"had_liked":false,"id":208798,"user_name":"rjb","can_delete":false,"product_type":"c1","uid":1344353,"ip_address":"","ucode":"7D8ECE9044F5A0","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/61/b32787f6.jpg","comment_is_top":false,"comment_ctime":1587440229,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587440229","product_id":100024501,"comment_content":"time profile:For instance, if 100 samples are done at 1 millisecond intervals, and a particular method is found to be at the top of the stack in 10 samples, then you can deduce that approximately 10% of the total execution time — 10 milliseconds — was spent in that method. It’s a fairly crude approximation, but it works!","like_count":0},{"had_liked":false,"id":207679,"user_name":"gitkong","can_delete":false,"product_type":"c1","uid":1793769,"ip_address":"","ucode":"28E6745DF97912","user_header":"https://static001.geekbang.org/account/avatar/00/1b/5e/e9/bfcf146a.jpg","comment_is_top":false,"comment_ctime":1587135430,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587135430","product_id":100024501,"comment_content":"戴老师，请问一下，willFinishLaunchingWithOptions是在main函数执行后这个阶段吧？怎么定位到首屏渲染相关方法执行完成？","like_count":0},{"had_liked":false,"id":204872,"user_name":"半本日记","can_delete":false,"product_type":"c1","uid":1629749,"ip_address":"","ucode":"0C46927AC36FE5","user_header":"https://static001.geekbang.org/account/avatar/00/18/de/35/a0d64f37.jpg","comment_is_top":false,"comment_ctime":1586485130,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1586485130","product_id":100024501,"comment_content":"我知道didFinishLaunchWithOpitions-&gt;viewdidLoad-&gt;viewWillAppear, 这里面的首屏渲染完成是个什么时间节点? ","like_count":0,"discussions":[{"author":{"id":2681398,"avatar":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","nickname":"D","note":"","ucode":"4112DE94C80A5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383574,"discussion_content":"是viewdidLoad -> didFinishLaunchWithOpitions return YES->viewWillAppear","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626163507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202537,"user_name":"洪呵呵","can_delete":false,"product_type":"c1","uid":1591740,"ip_address":"","ucode":"ADE42EF4E385A3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJicG6p7h4W2ZIwic83S3Lep4ZyV8PzneUXknC7cOG0C0JW1zcc7HTKanLibqcLdoFMAm8eLWnvFQiatQ/132","comment_is_top":false,"comment_ctime":1586004142,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586004142","product_id":100024501,"comment_content":"很多app现在都是用Swift开发，不会走objc_msgSend，现在Swift的话是如何检测呢","like_count":0},{"had_liked":false,"id":193818,"user_name":"小灵仙","can_delete":false,"product_type":"c1","uid":1267560,"ip_address":"","ucode":"8757EC8F3537EC","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/68/7eaae4d1.jpg","comment_is_top":false,"comment_ctime":1584969947,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584969947","product_id":100024501,"comment_content":"我是一个前端开发者，工作快两年了，怎么感觉自己学这个课程很吃力，基本听不懂。","like_count":0},{"had_liked":false,"id":188988,"user_name":"Struggle","can_delete":false,"product_type":"c1","uid":1471806,"ip_address":"","ucode":"C769D8FFD9C1B6","user_header":"https://static001.geekbang.org/account/avatar/00/16/75/3e/71b16443.jpg","comment_is_top":false,"comment_ctime":1584442707,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584442707","product_id":100024501,"comment_content":"戴老师，我想问下，我在阅读GCDFetchFeed这个demo里面关于统计cpu占用率这一部分的代码的时候，通过这句话 (threadBaseInfo-&gt;flags &amp; TH_FLAGS_IDL) 我发现线程thread_basic_info这个结构体的flag这个值可以取三个值，分别为 TH_FLAGS_SWAPPED TH_FLAGS_IDLE TH_FLAGS_GLOBAL_FORCED_IDLE <br>问题1：请教下第一个和第三个值怎么理解，第一个swapped是一种什么情景下的状态。<br><br>integer_t cpuUsage = threadBaseInfo-&gt;cpu_usage &#47; 10;   &#47;&#47;TH_USAGE_SCALE  还有这个计算占用率的代码，我看到有些文章这个10的取值是TH_USAGE_SCALE这个 <br>问题2：这个10的取值是怎么来的呢，还有这个TH_USAGE_SCALE是什么意思","like_count":0},{"had_liked":false,"id":188258,"user_name":"Struggle","can_delete":false,"product_type":"c1","uid":1471806,"ip_address":"","ucode":"C769D8FFD9C1B6","user_header":"https://static001.geekbang.org/account/avatar/00/16/75/3e/71b16443.jpg","comment_is_top":false,"comment_ctime":1584332601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584332601","product_id":100024501,"comment_content":"SMCallTraceCore 记录调用方法的结构体thread_call_stack使用了自动扩容，默认开辟128，超过一般64就扩容","like_count":0},{"had_liked":false,"id":172692,"user_name":"q_s_J","can_delete":false,"product_type":"c1","uid":1803644,"ip_address":"","ucode":"CD187D6CA3D8D4","user_header":"","comment_is_top":false,"comment_ctime":1579252105,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579252105","product_id":100024501,"comment_content":"。。。这一个章节里面的东西 慢慢拆开来看了一个星期~ 有料","like_count":0},{"had_liked":false,"id":169316,"user_name":"Bill","can_delete":false,"product_type":"c1","uid":1273035,"ip_address":"","ucode":"DAF34E50CF3434","user_header":"https://static001.geekbang.org/account/avatar/00/13/6c/cb/8a41f8ce.jpg","comment_is_top":false,"comment_ctime":1578313790,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578313790","product_id":100024501,"comment_content":"Demo里 LagMonitor.m里关于timer 存在循环引用","like_count":0},{"had_liked":false,"id":168125,"user_name":"jeffery丶","can_delete":false,"product_type":"c1","uid":1797547,"ip_address":"","ucode":"52229283A69737","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6d/ab/8213e2d8.jpg","comment_is_top":false,"comment_ctime":1578016389,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578016389","product_id":100024501,"comment_content":"iphoneXR 13.1.3 运行直接挂了","like_count":0},{"had_liked":false,"id":167036,"user_name":"hwacdx","can_delete":false,"product_type":"c1","uid":1759590,"ip_address":"","ucode":"F921C10D05F576","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d9/66/0c9a6cf0.jpg","comment_is_top":false,"comment_ctime":1577676033,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577676033","product_id":100024501,"comment_content":"文章和评论我都看完了，真的是坑。。。<br><br><br>运行 demo 打印方法的调用层级和耗时的步骤如下：<br><br>1.先解开 SMCallTrace.m 第46行和54行的注释。<br>2.在 SMRootViewController.m 的 viewDidLoad 方法中调用 [SMCallTrace start]; 和 [SMCallTrace stop]; [SMCallTrace save];<br><br>然后在真机上运行 demo 即可。","like_count":0},{"had_liked":false,"id":166307,"user_name":"原点","can_delete":false,"product_type":"c1","uid":1204499,"ip_address":"","ucode":"E662FD2B62B8A9","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/13/dd987817.jpg","comment_is_top":false,"comment_ctime":1577436437,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1577436437","product_id":100024501,"comment_content":"最近按照专栏的思路优化了公司项目，虽然项目体量很小，不过效果很明显。很有成就感。<br>不过由于本人基础薄弱，在实现合并动态库的时候，卡住了，有那个朋友可以给发一些相关链接，或者指导一下的话，感激不尽","like_count":0},{"had_liked":false,"id":160839,"user_name":"Bill","can_delete":false,"product_type":"c1","uid":1273035,"ip_address":"","ucode":"DAF34E50CF3434","user_header":"https://static001.geekbang.org/account/avatar/00/13/6c/cb/8a41f8ce.jpg","comment_is_top":false,"comment_ctime":1576044425,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576044425","product_id":100024501,"comment_content":"老师你好 我想请教下对于pre-main time 目前除了官方的调试参数。还有啥其他方法能够有效计算出或者收集相关的log<br>","like_count":0},{"had_liked":false,"id":157113,"user_name":"647","can_delete":false,"product_type":"c1","uid":1453816,"ip_address":"","ucode":"152F44B060F39E","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/f8/a3a35cd3.jpg","comment_is_top":false,"comment_ctime":1575033559,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575033559","product_id":100024501,"comment_content":"戴铭老师好，我发现SMLagMonitor应用在Swift的项目中，依然可以监控方法耗时。<br>是因为Swift与OC混编造成的原因么？<br>和我设想的不太一样，我认为Swift的底层应该不会调用objc_msgSend方法。<br>还望老师指点一下","like_count":0},{"had_liked":false,"id":150388,"user_name":"Chouee","can_delete":false,"product_type":"c1","uid":1244701,"ip_address":"","ucode":"F74E58A430C470","user_header":"https://static001.geekbang.org/account/avatar/00/12/fe/1d/ed26272a.jpg","comment_is_top":false,"comment_ctime":1573525970,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573525970","product_id":100024501,"comment_content":"哈哈，感觉这篇文章我可以消化一个月。原来高手们连objc_msgSend的汇编都烂熟了，差距，差距👍","like_count":0},{"had_liked":false,"id":141790,"user_name":"Aa","can_delete":false,"product_type":"c1","uid":1202431,"ip_address":"","ucode":"C72E9C081F3BC9","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/ff/a722ba13.jpg","comment_is_top":false,"comment_ctime":1571225007,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571225007","product_id":100024501,"comment_content":"计算执行了多少汇编指令，来估算一个方法的耗时，是不是更好一些呢？","like_count":0},{"had_liked":false,"id":139346,"user_name":"爱吃胡萝卜","can_delete":false,"product_type":"c1","uid":1459413,"ip_address":"","ucode":"35FCF84D1E04C5","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/d5/ca522e83.jpg","comment_is_top":false,"comment_ctime":1570616561,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570616561","product_id":100024501,"comment_content":"我想问下如何在mac环境下实践arm64,按照我的理解可能需要搭建arm64虚拟机，有没有比较轻量级的方案，只需要简单验证下arm64指令和观察下寄存器状态就好了。","like_count":0},{"had_liked":false,"id":139007,"user_name":"爱吃胡萝卜","can_delete":false,"product_type":"c1","uid":1459413,"ip_address":"","ucode":"35FCF84D1E04C5","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/d5/ca522e83.jpg","comment_is_top":false,"comment_ctime":1570526034,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570526034","product_id":100024501,"comment_content":"我想问下 “attribute((constructor)) 修饰的函数”， 具体指的是哪些函数，这里不太理解","like_count":0},{"had_liked":false,"id":137962,"user_name":"Geek_ecea69","can_delete":false,"product_type":"c1","uid":1687339,"ip_address":"","ucode":"94C7B04EE9F50E","user_header":"","comment_is_top":false,"comment_ctime":1569939970,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569939970","product_id":100024501,"comment_content":".a是.o的集合，但是macho文件不是.o的集合。这里“加载可执行文件（App 的.o 文件的集合）”似乎不太对。","like_count":0},{"had_liked":false,"id":137548,"user_name":"Sunny","can_delete":false,"product_type":"c1","uid":1305257,"ip_address":"","ucode":"BB7B274CE0672E","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/a9/0a917f2c.jpg","comment_is_top":false,"comment_ctime":1569772411,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1569772411","product_id":100024501,"comment_content":"“Objc 相关类的注册、category 注册”说的太抽象了，能通俗地说一下具体是做啥么？😭","like_count":0,"discussions":[{"author":{"id":1459413,"avatar":"https://static001.geekbang.org/account/avatar/00/16/44/d5/ca522e83.jpg","nickname":"爱吃胡萝卜","note":"","ucode":"35FCF84D1E04C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25444,"discussion_content":"可以看看 OC  runtime相关的知识","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570528681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126715,"user_name":"徐方豪","can_delete":false,"product_type":"c1","uid":1519371,"ip_address":"","ucode":"0B2065B9D42078","user_header":"https://static001.geekbang.org/account/avatar/00/17/2f/0b/53b25803.jpg","comment_is_top":false,"comment_ctime":1566456936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566456936","product_id":100024501,"comment_content":"戴铭老师是怎么知道Time Profiler的实现原理的？","like_count":0},{"had_liked":false,"id":124234,"user_name":"Geek_582f32","can_delete":false,"product_type":"c1","uid":1631308,"ip_address":"","ucode":"F42148A4E0FA0D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/x44iabENBTt1icnJrpS3LfQfZzdicDXibc09vCckHatzicazF3BUibyfFTHV3qYGXTVUrcAIZLddFIealgHNXxz0tGXQ/132","comment_is_top":false,"comment_ctime":1565838799,"is_pvip":false,"replies":[{"id":"45991","content":"加油","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1566154629,"ip_address":"","comment_id":124234,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565838799","product_id":100024501,"comment_content":"额，看到完全一脸懵逼，不知道老师说的啥，感觉这几年ios开发白做了！😂😂，该怎么拯救","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463075,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566154629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123843,"user_name":"耐东东","can_delete":false,"product_type":"c1","uid":1612088,"ip_address":"","ucode":"5D2193694E8F34","user_header":"https://static001.geekbang.org/account/avatar/00/18/99/38/e0cee87b.jpg","comment_is_top":false,"comment_ctime":1565769806,"is_pvip":false,"replies":[{"id":"45995","content":"慢慢积累","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1566154858,"ip_address":"","comment_id":123843,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565769806","product_id":100024501,"comment_content":"看出睡意的我，要努力了，知识储备不够！！！！！！","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462839,"discussion_content":"慢慢积累","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566154858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122351,"user_name":"Sun0010","can_delete":false,"product_type":"c1","uid":1263832,"ip_address":"","ucode":"92B35625DCEB9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/48/d8/51ab657d.jpg","comment_is_top":false,"comment_ctime":1565344892,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565344892","product_id":100024501,"comment_content":"”加载动态链接库，进行 rebase 指针调整和 bind 符...“ ，应该是 在运行的时候 才进行指针调整吧，比如 NSLog， 开始的时候不会直接去找这个动态库的地址，而是要等到 真正运行NSLog的时候才会去找NSLog地址","like_count":0},{"had_liked":false,"id":118503,"user_name":"Sunny","can_delete":false,"product_type":"c1","uid":1305257,"ip_address":"","ucode":"BB7B274CE0672E","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/a9/0a917f2c.jpg","comment_is_top":false,"comment_ctime":1564376493,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564376493","product_id":100024501,"comment_content":"“未知参数跳转到任意函数指针”什么意思？","like_count":0},{"had_liked":false,"id":109891,"user_name":"Sunny","can_delete":false,"product_type":"c1","uid":1305257,"ip_address":"","ucode":"BB7B274CE0672E","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/a9/0a917f2c.jpg","comment_is_top":false,"comment_ctime":1562125947,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562125947","product_id":100024501,"comment_content":"想要看明白`objc-msg-arm64.s`, 这两天查了很多资料, 但是都不理想, 有推荐的书籍或者文章吗? ","like_count":0},{"had_liked":false,"id":108717,"user_name":"小米豆","can_delete":false,"product_type":"c1","uid":1580918,"ip_address":"","ucode":"6025A24D0DFC51","user_header":"","comment_is_top":false,"comment_ctime":1561863702,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561863702","product_id":100024501,"comment_content":"+load() 方法里的内容可以放到首屏渲染完成后再执行，是指放到key window setRootViewController 之后对吧，但是+load()多是执行方法交换的，请问具体怎么操作，多了几遍还没搞懂，麻烦回复下，谢谢<br><br>","like_count":0},{"had_liked":false,"id":105302,"user_name":"aoxiaojun","can_delete":false,"product_type":"c1","uid":1393481,"ip_address":"","ucode":"2526DD2FEC2CDE","user_header":"https://static001.geekbang.org/account/avatar/00/15/43/49/cfe534c2.jpg","comment_is_top":false,"comment_ctime":1560959096,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560959096","product_id":100024501,"comment_content":"完了  感觉自己几年的经验废了","like_count":0},{"had_liked":false,"id":102998,"user_name":"难得矜持","can_delete":false,"product_type":"c1","uid":1244198,"ip_address":"","ucode":"2EE187F59E67E0","user_header":"https://static001.geekbang.org/account/avatar/00/12/fc/26/ec438bf4.jpg","comment_is_top":false,"comment_ctime":1560346309,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560346309","product_id":100024501,"comment_content":"大神您好，想知道这些知识您是从哪儿获取的呢？比如关于启动的详细流程是在官方文档还是开源代码里面有的呢？","like_count":0},{"had_liked":false,"id":102880,"user_name":"Geek_07ac97","can_delete":false,"product_type":"c1","uid":1455327,"ip_address":"","ucode":"2027CEBD28F47C","user_header":"","comment_is_top":false,"comment_ctime":1560319284,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560319284","product_id":100024501,"comment_content":"我们不免需要在APPDelegate注册一些东西，但是一些内容也不是需要马上就会用到。但是不写在APPDelegate也好像没有更合适的地方写。不知道有什么方法可以延时加载不影响冷启动的。","like_count":0},{"had_liked":false,"id":98964,"user_name":"弈林丶修特","can_delete":false,"product_type":"c1","uid":1454204,"ip_address":"","ucode":"AE6CE8A6DA36A7","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/7c/25782d96.jpg","comment_is_top":false,"comment_ctime":1559120989,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559120989","product_id":100024501,"comment_content":"老师  我用了您的开源库去hook我们工程，但是在hook之后，在OC和C++混编的地方有一处会崩溃，然后查看了C++变量的一些值  发现是X0之类的这种，是不是汇编部分没有处理C++的东西，是在是解决不了了。。","like_count":0},{"had_liked":false,"id":98767,"user_name":"刘静杰","can_delete":false,"product_type":"c1","uid":1456174,"ip_address":"","ucode":"0040A5600C4D1A","user_header":"https://static001.geekbang.org/account/avatar/00/16/38/2e/e5ba31fa.jpg","comment_is_top":false,"comment_ctime":1559092334,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1559092334","product_id":100024501,"comment_content":"请问，怎么将动态库合并呢？","like_count":0,"discussions":[{"author":{"id":1999285,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/81/b5/68ecba5e.jpg","nickname":"fanwj","note":"","ucode":"B73C06A3034C85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263223,"discussion_content":"我也想知道","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589189929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96895,"user_name":"八点回电话","can_delete":false,"product_type":"c1","uid":1542048,"ip_address":"","ucode":"4A6DD7E0BA03F0","user_header":"https://static001.geekbang.org/account/avatar/00/17/87/a0/9ab69d26.jpg","comment_is_top":false,"comment_ctime":1558531450,"is_pvip":false,"replies":[{"id":"35006","content":"先学会游泳😄","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1558845426,"ip_address":"","comment_id":96895,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558531450","product_id":100024501,"comment_content":"由浅入深，到深处我就淹死了😭","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451051,"discussion_content":"先学会游泳😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558845426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96870,"user_name":"楼外楼","can_delete":false,"product_type":"c1","uid":1243180,"ip_address":"","ucode":"791F2CA15B8F1F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/sgEfkeMSIIibeH4l0HS8uwM6PGY3DSHoW5tV9l1hDQ06tr3OnI7F545Wdxsh59rqOKnzjLUpCcEqic3P9zZbKzPQ/132","comment_is_top":false,"comment_ctime":1558526251,"is_pvip":false,"replies":[{"id":"35007","content":"毫秒","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1558845479,"ip_address":"","comment_id":96870,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1558526251","product_id":100024501,"comment_content":" path[AppDelegate styleNavigationControllerWithRootController:]<br> 1|   5.12|  -[UINavigationController initWithRootViewController:]<br> path[AppDelegate styleNavigationControllerWithRootController:] - [UINavigationController initWithRootViewController:]<br> 2|   4.97|    -[UINavigationController fd_pushViewController:animated:]<br> path[AppDelegate styleNavigationControllerWithRootController:] - [UINavigationController initWithRootViewController:] - [UINavigationController fd_pushViewController:animated:]<br> 0|   3.07|-[UIWindow makeKeyAndVisible]<br> path[UIWindow makeKeyAndVisible]<br> 1|   5.12|  -[UINavigationController initWithRootViewController:]<br> path[UIWindow makeKeyAndVisible] - [UINavigationController initWithRootViewController:]<br> 2|   4.97|    -[UINavigationController fd_pushViewController:animated:]<br>这里面的耗时怎么这么大？使用SMCallTree 真机验证的，耗时统计的是秒？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451042,"discussion_content":"毫秒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558845479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759590,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d9/66/0c9a6cf0.jpg","nickname":"hwacdx","note":"","ucode":"F921C10D05F576","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":109224,"discussion_content":"请问下载 demo 之后怎样打印这种信息啊 ？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577675095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95256,"user_name":"西京富贵兔","can_delete":false,"product_type":"c1","uid":1455922,"ip_address":"","ucode":"4E185A019A072E","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/32/758ef1c7.jpg","comment_is_top":false,"comment_ctime":1557999003,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557999003","product_id":100024501,"comment_content":"戴老师，关于App启动,我有一个问题，我在做地理围栏时，App在未启动情况下，触发地理围栏，系统会静默的调用application:didFinishLaunchingWithOptions: 方法，这个过程中，系统也会把 正常启动App 过程中的初始化过程 全都做一遍吗？这种调用launch方法的流程是怎样的呢？","like_count":0},{"had_liked":false,"id":95177,"user_name":"弈林丶修特","can_delete":false,"product_type":"c1","uid":1454204,"ip_address":"","ucode":"AE6CE8A6DA36A7","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/7c/25782d96.jpg","comment_is_top":false,"comment_ctime":1557978898,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557978898","product_id":100024501,"comment_content":"老师，我在您的开源项目中可以正常使用 检测每个方法的调用和耗时，成功hook objc_msgSend方法，但是在我们的工程中，会有莫名其面的崩溃，看起来是C++代码  文件名是memory 看起来应该是系统的库。。。具体崩溃代码如下<br><br>template &lt;class _Tp&gt;<br>inline _LIBCPP_INLINE_VISIBILITY _Tp<br>__libcpp_atomic_refcount_increment(_Tp&amp; __t) _NOEXCEPT<br>{<br>#if defined(_LIBCPP_HAS_BUILTIN_ATOMIC_SUPPORT) &amp;&amp; !defined(_LIBCPP_HAS_NO_THREADS)<br>    return __atomic_add_fetch(&amp;__t, 1, __ATOMIC_RELAXED);<br>#else<br>    return __t += 1;<br>#endif<br>}<br><br><br>崩溃在return __atomic_add_fetch(&amp;__t, 1, __ATOMIC_RELAXED);这一行 老师看到能解答一下吗","like_count":0},{"had_liked":false,"id":91208,"user_name":"九三","can_delete":false,"product_type":"c1","uid":1454691,"ip_address":"","ucode":"7D093ED7273CBE","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/63/fa24f92e.jpg","comment_is_top":false,"comment_ctime":1556929441,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556929441","product_id":100024501,"comment_content":"首屏指的是欢迎页吗","like_count":0},{"had_liked":false,"id":91012,"user_name":"罗","can_delete":false,"product_type":"c1","uid":1370306,"ip_address":"","ucode":"EF9EDDD1E906D3","user_header":"https://static001.geekbang.org/account/avatar/00/14/e8/c2/0305e767.jpg","comment_is_top":false,"comment_ctime":1556787128,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1556787128","product_id":100024501,"comment_content":"有时出现点击APP图标,图标灰两三秒才启动怎么办,<br>可以不通过xcode收集到pre-main的日志吗,<br>怎么做可以令图标灰三秒才启动弹出launch页面.","like_count":0,"discussions":[{"author":{"id":1619777,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTIRDSfnKbXgpHKWtQsnfnSqETEt2HvejwBwFTloGajzDiaASHRFjrNb74Oc1oH8CiaquYMqf7uCYg/132","nickname":"cochn","note":"","ucode":"71290A6F7BAB05","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6243,"discussion_content":"我们也遇到这个问题了，这是处于pre-main阶段还是main阶段？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566808690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90685,"user_name":"冯俊希","can_delete":false,"product_type":"c1","uid":1456222,"ip_address":"","ucode":"C4F077008452D3","user_header":"https://static001.geekbang.org/account/avatar/00/16/38/5e/3402dba8.jpg","comment_is_top":false,"comment_ctime":1556609690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556609690","product_id":100024501,"comment_content":"别的问题没有，能不能打印速度快一点呢，为什么递归遍历那么久。SMCallTrace的-[appendRecord:to:]方法是递归的，SMCallTrace执行+[save]在这条线程得跑个五分钟才打印一次函数栈的耗时。。。","like_count":0},{"had_liked":false,"id":90671,"user_name":"Geek_a80be3","can_delete":false,"product_type":"c1","uid":1375048,"ip_address":"","ucode":"4B089354A9C13F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLzr4TLk6IWIo4AaslVbUS4l7ddoAjswxWDDABTKRlfjIk1XbGz9CcQkyxI9A2rP9s818y8IAq0DA/132","comment_is_top":false,"comment_ctime":1556607546,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556607546","product_id":100024501,"comment_content":"感觉Time Profiler 设置的时间不是0.01秒，记得当时通知的一个方法时1毫秒，所以时间间隔应该不大于1毫秒吧","like_count":0},{"had_liked":false,"id":90247,"user_name":"Geek_自来也大人","can_delete":false,"product_type":"c1","uid":1453215,"ip_address":"","ucode":"BA0E3BFCE5D167","user_header":"https://static001.geekbang.org/account/avatar/00/16/2c/9f/265106fb.jpg","comment_is_top":false,"comment_ctime":1556458745,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556458745","product_id":100024501,"comment_content":"大佬，学习了","like_count":0},{"had_liked":false,"id":90067,"user_name":"Geek_37676b","can_delete":false,"product_type":"c1","uid":1516244,"ip_address":"","ucode":"AD361368B8A596","user_header":"","comment_is_top":false,"comment_ctime":1556407070,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556407070","product_id":100024501,"comment_content":"干货慢慢，我之前也有优化，看着这个，感觉自己的就是挠痒痒捂脸🤦‍♂️。<br>老师你好，我有两个疑问:1.自动登录在哪里执行？首屏有核心功能需要根据token获取状态信息，优先级比较高。2.app启动的时候从服务器获取一些全局参数，在首屏也会用到这些参数，这个处理怎么办？<br>我现在的处理思路，app启动后，经过启动页，直接进首屏，我添加了一个页面，其实页面显示的图片就是启动图，在这个页面做这两个网络请求，拿到这两个回调后，再进入首屏。<br>请老师或者各位大神帮忙看一下，如何优化🙏","like_count":0},{"had_liked":false,"id":90023,"user_name":"Kim","can_delete":false,"product_type":"c1","uid":1459100,"ip_address":"","ucode":"E3C8D1C0E9C0A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJzrtHs9DeaIR6eSlo2DKm93q69AWaB9ibEmlO6PDbic9iajFSwZLhAGLtbDgrbUI7aadyEiaK6lL4FA/132","comment_is_top":false,"comment_ctime":1556369214,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556369214","product_id":100024501,"comment_content":"没有学过汇编语言，好多东西都看不太懂，不知道要从哪里开始，是不是要针对文中的每一个知识点一个个的去实践","like_count":0},{"had_liked":false,"id":89908,"user_name":"Geek_2844bd","can_delete":false,"product_type":"c1","uid":1462850,"ip_address":"","ucode":"EB1A34D5898FE1","user_header":"","comment_is_top":false,"comment_ctime":1556326857,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556326857","product_id":100024501,"comment_content":"能解释一下，减少动态库加载那里。怎么将多个pod库合并吗？","like_count":0},{"had_liked":false,"id":88724,"user_name":"麻烦你，鱼丸粗面","can_delete":false,"product_type":"c1","uid":1334956,"ip_address":"","ucode":"308C621990A3AE","user_header":"https://static001.geekbang.org/account/avatar/00/14/5e/ac/4e381b80.jpg","comment_is_top":false,"comment_ctime":1555986282,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555986282","product_id":100024501,"comment_content":"你在往上看几层，所有的oc方法都是通过msg_send作为统一入口，你所谓的函数指针在调用IMP在msg_send后面步骤。作为程序员没看懂内容就出来唧唧歪歪，这样路走不长。<br>------------<br>msg_send是经过一系列操作后最终调用函数指针，但不是每个方法都一定走msg_send，有些会跳过msg_send直接走函数指针，比如load方法，别人说的没错，反而是这兄弟自己没看懂就唧唧歪歪","like_count":0},{"had_liked":false,"id":85642,"user_name":"狸猫","can_delete":false,"product_type":"c1","uid":1453829,"ip_address":"","ucode":"4C699A8E6E442F","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/05/0b9afbfa.jpg","comment_is_top":false,"comment_ctime":1555154862,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555154862","product_id":100024501,"comment_content":"最开始说的三个阶段的优化能不能举些具体的有代码的例子呢？","like_count":0},{"had_liked":false,"id":85559,"user_name":"空也空","can_delete":false,"product_type":"c1","uid":1073533,"ip_address":"","ucode":"56976779192E02","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/7d/1bd071ba.jpg","comment_is_top":false,"comment_ctime":1555124397,"is_pvip":false,"replies":[{"id":"30744","content":"不是，是指首屏不会去使用的类和方法。","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1555146413,"ip_address":"","comment_id":85559,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555124397","product_id":100024501,"comment_content":"老师，有一点不明白的地方，减少加载启动后不会去使用的类或方法。是说检查那些没有用到的类和方法的声明，然后去掉是么？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446715,"discussion_content":"不是，是指首屏不会去使用的类和方法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555146413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84854,"user_name":"浅唱科比","can_delete":false,"product_type":"c1","uid":1210464,"ip_address":"","ucode":"6E2154FC7225F9","user_header":"https://static001.geekbang.org/account/avatar/00/12/78/60/9642b8e9.jpg","comment_is_top":false,"comment_ctime":1554938434,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554938434","product_id":100024501,"comment_content":"老师，如何让这个时间检测的代码在main之前执行呢？","like_count":0},{"had_liked":false,"id":84063,"user_name":"LeeWong","can_delete":false,"product_type":"c1","uid":1457272,"ip_address":"","ucode":"14A39710472221","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/78/9f052793.jpg","comment_is_top":false,"comment_ctime":1554776520,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554776520","product_id":100024501,"comment_content":"+load方法延后？+load方法不是编译时执行的吗？如果方法交换不放在这个方法中而是放到了initialized(改类第一次使用的时候被调用)方法中 会不会导致交换方法延后而导致方法交换不成功！","like_count":0},{"had_liked":false,"id":83401,"user_name":"鹏sir","can_delete":false,"product_type":"c1","uid":1487352,"ip_address":"","ucode":"6FC0A3DEBCA78B","user_header":"https://static001.geekbang.org/account/avatar/00/16/b1/f8/a270fc24.jpg","comment_is_top":false,"comment_ctime":1554560433,"is_pvip":false,"replies":[{"id":"30143","content":"用的真机么","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1554568619,"ip_address":"","comment_id":83401,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554560433","product_id":100024501,"comment_content":"老师，下载了你的项目，也打开了54行的代码，在SMRootViewController的viewDidLoad的开始添加了 [SMCallTrace start];代码，结束添加了 [SMCallTrace stop];<br>    [SMCallTrace save];代码，但是并没有看到打印出方法的调用层级和耗时","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446010,"discussion_content":"用的真机么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554568619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83112,"user_name":"几缕阳光","can_delete":false,"product_type":"c1","uid":1208725,"ip_address":"","ucode":"9B2D8137A12445","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/95/9df437ae.jpg","comment_is_top":false,"comment_ctime":1554428115,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554428115","product_id":100024501,"comment_content":"看评论才知道不止我一人看不懂汇编部分。。。😂 ","like_count":0},{"had_liked":false,"id":82972,"user_name":"Wechat Team","can_delete":false,"product_type":"c1","uid":1040836,"ip_address":"","ucode":"7283FEFF36E89E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e1/c4/15f70de2.jpg","comment_is_top":false,"comment_ctime":1554362295,"is_pvip":false,"replies":[{"id":"30027","content":"注释打开了么","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1554442250,"ip_address":"","comment_id":82972,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554362295","product_id":100024501,"comment_content":"在iPhone7真机上面跑了，GCDFetchFeed这个项目，发现还是没有耗时的记录输出的?<br>是我的操作有问题？断点start和save都进去了","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445798,"discussion_content":"注释打开了么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554442250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81705,"user_name":"SZ","can_delete":false,"product_type":"c1","uid":1108032,"ip_address":"","ucode":"AD20051B6109C2","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/40/a7fa1530.jpg","comment_is_top":false,"comment_ctime":1554014635,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554014635","product_id":100024501,"comment_content":"关于category加载的部分，不知道swift extension是不是也在类似的premain处理中加载的？如果是用样的机制，为啥Apple还要鼓励大家吧同一个swift class的不同的method以extension的形式分组？Apple是不是在设计Swift extension时吸取的category的教训，采用lazy loading的方式去加载swift extension？","like_count":0},{"had_liked":false,"id":81521,"user_name":"艾斯伊文คิดถึง","can_delete":false,"product_type":"c1","uid":1243733,"ip_address":"","ucode":"52F2B5942EB969","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/55/1bdfbc26.jpg","comment_is_top":false,"comment_ctime":1553933981,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553933981","product_id":100024501,"comment_content":"检查首屏渲染完成前主线程上有哪些耗时方法，将没必要的耗时方法滞后或者异步执行。这里的主线程的异步执行，应该还是在主线程么？是不是应该方法子线程去执行，或者是子线程异步。","like_count":0},{"had_liked":false,"id":81028,"user_name":"JimmyLTS","can_delete":false,"product_type":"c1","uid":1397041,"ip_address":"","ucode":"054FA23F25B2C1","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/31/92cebb35.jpg","comment_is_top":false,"comment_ctime":1553780218,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553780218","product_id":100024501,"comment_content":"感觉每篇专栏文章的阅读，自己都能了解一些自己之前所未掌握的点，赞👍","like_count":0},{"had_liked":false,"id":81027,"user_name":"TracyYih","can_delete":false,"product_type":"c1","uid":1025365,"ip_address":"","ucode":"E3C8216B0F86A3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a5/55/430e4c1e.jpg","comment_is_top":false,"comment_ctime":1553780188,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553780188","product_id":100024501,"comment_content":"&gt; 苹果公司最多可以支持 6 个非系统动态库合并为一个。<br><br>请问具体合并方式？","like_count":0},{"had_liked":false,"id":80946,"user_name":"李乾坤David","can_delete":false,"product_type":"c1","uid":1454334,"ip_address":"","ucode":"295D0234582979","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/fe/fc686f23.jpg","comment_is_top":false,"comment_ctime":1553761709,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553761709","product_id":100024501,"comment_content":"我非常想知道`将多个动态库二进制合并成一个就行`具体怎么实现？","like_count":0},{"had_liked":false,"id":80942,"user_name":"李乾坤David","can_delete":false,"product_type":"c1","uid":1454334,"ip_address":"","ucode":"295D0234582979","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/fe/fc686f23.jpg","comment_is_top":false,"comment_ctime":1553760282,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553760282","product_id":100024501,"comment_content":"认真读了第一遍感受如下<br>1） main() 函数执行前的优化，太过简略例如减少动态库加载具体应该怎么做呢？<br>2）汇编那段和后面的hook根本看不懂，这个应该不是作者的问题","like_count":0},{"had_liked":false,"id":80399,"user_name":"呆萌的中指","can_delete":false,"product_type":"c1","uid":1458528,"ip_address":"","ucode":"AEDCB37A1DF4C7","user_header":"https://static001.geekbang.org/account/avatar/00/16/41/60/853a05e2.jpg","comment_is_top":false,"comment_ctime":1553655634,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553655634","product_id":100024501,"comment_content":"上来就是干","like_count":0},{"had_liked":false,"id":80177,"user_name":"小玉龙","can_delete":false,"product_type":"c1","uid":1370713,"ip_address":"","ucode":"918A9B5A6373C1","user_header":"https://static001.geekbang.org/account/avatar/00/14/ea/59/9dc9bb06.jpg","comment_is_top":false,"comment_ctime":1553613927,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553613927","product_id":100024501,"comment_content":"看来C语言是重中之重了，加油了！","like_count":0},{"had_liked":false,"id":80030,"user_name":"init","can_delete":false,"product_type":"c1","uid":1460600,"ip_address":"","ucode":"8B47C652B2DDFF","user_header":"https://static001.geekbang.org/account/avatar/00/16/49/78/d71adf83.jpg","comment_is_top":false,"comment_ctime":1553596301,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553596301","product_id":100024501,"comment_content":"作业开头就遇到问题，希望帮忙解答，是使用 [NSThread callStackSymbols] 或者 backtrace 配合定时器间隔0.01秒获取一次堆栈吗？但是这样会重复拿到当前的调用栈，并不会像time pofiler 一样实时拿到所有的方法调用 ","like_count":0},{"had_liked":false,"id":79973,"user_name":"赌神-高进","can_delete":false,"product_type":"c1","uid":1473037,"ip_address":"","ucode":"A1C72EA6F7F8FF","user_header":"https://static001.geekbang.org/account/avatar/00/16/7a/0d/4b1aaa46.jpg","comment_is_top":false,"comment_ctime":1553585932,"is_pvip":false,"replies":[{"id":"29270","content":"用真机","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553657660,"ip_address":"","comment_id":79973,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1553585932","product_id":100024501,"comment_content":"想要尝试SMCallTrace的朋友，需要在SMCallTrace.m中打开第54行的注释<br>------------------------------------------------------<br>这个打开了，然后也调用 start  和  stop 和 save  ，为什么没有层级关系打印呢？？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444707,"discussion_content":"用真机","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553657660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759590,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d9/66/0c9a6cf0.jpg","nickname":"hwacdx","note":"","ucode":"F921C10D05F576","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":109230,"discussion_content":"用了真机也不行。。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577675434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79873,"user_name":"彪小A","can_delete":false,"product_type":"c1","uid":1453869,"ip_address":"","ucode":"B5CD7484EB247B","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/2d/5d60f257.jpg","comment_is_top":false,"comment_ctime":1553566639,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553566639","product_id":100024501,"comment_content":"怎么合并非系统的动态库","like_count":0},{"had_liked":false,"id":79330,"user_name":"钱洋彪","can_delete":false,"product_type":"c1","uid":1044793,"ip_address":"","ucode":"84FBB0E48FD885","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f1/39/768503ad.jpg","comment_is_top":false,"comment_ctime":1553436089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553436089","product_id":100024501,"comment_content":"“在一个 +load() 方法里，进行运行时方法替换操作会带来4ms的消耗”，我写了个demo测试了下并没有发现有这么高的耗时，测试设备是自己的6s手机，测试方式是打印时间戳。请问戴老师，这个4ms是怎么得出来的？","like_count":0},{"had_liked":false,"id":78881,"user_name":"考拉🐨","can_delete":false,"product_type":"c1","uid":1453467,"ip_address":"","ucode":"4F9A41ACB97E6D","user_header":"https://static001.geekbang.org/account/avatar/00/16/2d/9b/6a888de6.jpg","comment_is_top":false,"comment_ctime":1553267323,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553267323","product_id":100024501,"comment_content":"思路清晰。周末刚好可以写作业啦","like_count":0},{"had_liked":false,"id":78857,"user_name":"Damon","can_delete":false,"product_type":"c1","uid":1471922,"ip_address":"","ucode":"86FA98C1E081C4","user_header":"https://static001.geekbang.org/account/avatar/00/16/75/b2/f03c3964.jpg","comment_is_top":false,"comment_ctime":1553259250,"is_pvip":false,"replies":[{"id":"28733","content":"课后作业不是用 objc_msgSend 来做","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553314288,"ip_address":"","comment_id":78857,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553259250","product_id":100024501,"comment_content":"总是看到objc_msgSend这个玩意，真要从优化层级想起它，我真的想不出来～～课后作业估计要拖欠很久了","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444260,"discussion_content":"课后作业不是用 objc_msgSend 来做","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553314288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78791,"user_name":"Link","can_delete":false,"product_type":"c1","uid":1454525,"ip_address":"","ucode":"64849EF2B97975","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/bd/62c945b4.jpg","comment_is_top":false,"comment_ctime":1553240978,"is_pvip":false,"replies":[{"id":"28654","content":"可以 diff 比对前后 map","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553262369,"ip_address":"","comment_id":78791,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553240978","product_id":100024501,"comment_content":"hello 老师,关于作业是不是这个思路呢?<br>1.定时抓取堆栈信息<br>2.对每一条信息进行处理,像下面这个我们可以存个map,如果map中没有就给他开始计时,如果没有获取到信息,说明调用完毕,此时给他结束计时,大概类似这么个思想对吗<br>UIKitCore                           0x0000000113739776 -[UIResponder touchesBegan:withEvent:] + 49","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444230,"discussion_content":"可以 diff 比对前后 map","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553262369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78789,"user_name":"SunShine","can_delete":false,"product_type":"c1","uid":1471547,"ip_address":"","ucode":"FF551478604166","user_header":"https://static001.geekbang.org/account/avatar/00/16/74/3b/8487eb02.jpg","comment_is_top":false,"comment_ctime":1553240920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553240920","product_id":100024501,"comment_content":"这个作业能提供下思路吗，目前只知道获取当前堆栈的信息，不明白应该怎么去统计所有线程的堆栈信息，还有这个耗时计算应该怎么着手，有点尬，有大佬指导下的吗","like_count":0},{"had_liked":false,"id":78773,"user_name":"小袋子","can_delete":false,"product_type":"c1","uid":1403825,"ip_address":"","ucode":"2797320994938C","user_header":"https://static001.geekbang.org/account/avatar/00/15/6b/b1/32cb2393.jpg","comment_is_top":false,"comment_ctime":1553238811,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553238811","product_id":100024501,"comment_content":"个人理解动态库都是系统的，苹果不允许开发者创建动态库，因此开发者创建的都是静态库（不论 .a 或 framework），老师这边说的非系统动态库是指哪个呀 ","like_count":0},{"had_liked":false,"id":78723,"user_name":"Meta","can_delete":false,"product_type":"c1","uid":1070890,"ip_address":"","ucode":"12FF0ADC34F2A1","user_header":"https://static001.geekbang.org/account/avatar/00/10/57/2a/558a548d.jpg","comment_is_top":false,"comment_ctime":1553224254,"is_pvip":false,"replies":[{"id":"28665","content":"不会","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553264000,"ip_address":"","comment_id":78723,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553224254","product_id":100024501,"comment_content":"Swift 的加入对冷启动会有影响么？有的话可以怎么优化？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444209,"discussion_content":"不会","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553264000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78616,"user_name":"Eva","can_delete":false,"product_type":"c1","uid":1176635,"ip_address":"","ucode":"0947F06A71585D","user_header":"https://static001.geekbang.org/account/avatar/00/11/f4/3b/6a0432c9.jpg","comment_is_top":false,"comment_ctime":1553183746,"is_pvip":false,"replies":[{"id":"28763","content":"加油","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553318370,"ip_address":"","comment_id":78616,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553183746","product_id":100024501,"comment_content":"完了，我刚发了一个不知天高地厚的留言，还梦想快速自学，第一篇就反复看了好几遍...","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444167,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553318370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78469,"user_name":"吴小安","can_delete":false,"product_type":"c1","uid":1371398,"ip_address":"","ucode":"EDF8E04F867069","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqr5ibqxYwcSgqPA7s49MZb1vEKKXT4mPTojwiclXkJf3ug26NuzTa6A5gbicR2rAUHdEkUAn13Rr2KQ/132","comment_is_top":false,"comment_ctime":1553155000,"is_pvip":false,"replies":[{"id":"28791","content":"记录到日志中","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553333359,"ip_address":"","comment_id":78469,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553155000","product_id":100024501,"comment_content":"看了过去的文章，还有一个如何打印堆栈信息，保存现场的，例如发送请求的，请求失败了，这个时候去打印各个线程的堆栈，主线程的堆栈已经是请求回来的callback，根本不知道发送请求前的堆栈，不知是从哪个路径发送的请求，请问有什么方法能方便记录发送请求的堆栈吗","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444105,"discussion_content":"记录到日志中","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553333359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78387,"user_name":"沧海行舟","can_delete":false,"product_type":"c1","uid":1453759,"ip_address":"","ucode":"CB2C6986BC99F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/bf/26485326.jpg","comment_is_top":false,"comment_ctime":1553137854,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553137854","product_id":100024501,"comment_content":"戴老师，hook_Objc_msgSend里面为什么要保护x9寄存器的值？参数传入按文章所说就是x0--x8，再看objc_msgSend源码的时候，发现里面对x9寄存器也是赋值操作，没做其他运算，所以没弄明白这里存储是否有其他意思？","like_count":0},{"had_liked":false,"id":78192,"user_name":"CallMeHiro","can_delete":false,"product_type":"c1","uid":1143255,"ip_address":"","ucode":"B822BCD99369EA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIL4VUkibWhQjAFFkARqrYM9MyVGfTb5yPlZzQ5FlGcPcOKUbOZibqY0eiawiaOuI7GdbWcNica2ak9bZg/132","comment_is_top":false,"comment_ctime":1553090275,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553090275","product_id":100024501,"comment_content":"所以这个是以OC为底子吗","like_count":0},{"had_liked":false,"id":78098,"user_name":"孟冰川","can_delete":false,"product_type":"c1","uid":1168503,"ip_address":"","ucode":"82F45C0E88B1DA","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/77/ecf04388.jpg","comment_is_top":false,"comment_ctime":1553070558,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553070558","product_id":100024501,"comment_content":"想了解下汇编，用VSCode和nasm，但是不方便debug，有没有debug的工具推荐？或者想了解下戴老师都是用的什么工具来开发调试汇编代码的？","like_count":0},{"had_liked":false,"id":77962,"user_name":"我系哆啦","can_delete":false,"product_type":"c1","uid":1258151,"ip_address":"","ucode":"109A96943F1DDA","user_header":"https://static001.geekbang.org/account/avatar/00/13/32/a7/3f3e05fa.jpg","comment_is_top":false,"comment_ctime":1553046906,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553046906","product_id":100024501,"comment_content":"第一个作业就跪了","like_count":0},{"had_liked":false,"id":77959,"user_name":"King","can_delete":false,"product_type":"c1","uid":1459392,"ip_address":"","ucode":"48D813396FD310","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/c0/510e6a6e.jpg","comment_is_top":false,"comment_ctime":1553046548,"is_pvip":false,"replies":[{"id":"28476","content":"llvm 官网手册","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553070895,"ip_address":"","comment_id":77959,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553046548","product_id":100024501,"comment_content":"你好，请问哪里有clang命令合集吗？最近正好复习block原理，发现如果block中改变对象类型的自动变量，用clang -rewrite-objc xxx.m 无法转换成.cpp，求解原因","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443913,"discussion_content":"llvm 官网手册","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553070895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77595,"user_name":"🍡月光手札🍡","can_delete":false,"product_type":"c1","uid":1454713,"ip_address":"","ucode":"597004FCC710AD","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/79/55b6667f.jpg","comment_is_top":false,"comment_ctime":1552967169,"is_pvip":false,"replies":[{"id":"28344","content":"首屏渲染指的首页 UI 部分完成，都是主线程上的，首页还会有些是异步任务","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552975617,"ip_address":"","comment_id":77595,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552967169","product_id":100024501,"comment_content":"首屏渲染完成?具体是什么,是首页加载完成吗,好模糊的概念","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443792,"discussion_content":"首屏渲染指的首页 UI 部分完成，都是主线程上的，首页还会有些是异步任务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552975617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77571,"user_name":"沧海行舟","can_delete":false,"product_type":"c1","uid":1453759,"ip_address":"","ucode":"CB2C6986BC99F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/bf/26485326.jpg","comment_is_top":false,"comment_ctime":1552963602,"is_pvip":false,"replies":[{"id":"28350","content":"方法层级关系和调用顺序根据堆栈来，解析方法堆栈可以得到","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552978071,"ip_address":"","comment_id":77571,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552963602","product_id":100024501,"comment_content":"戴老师，已经写了Time Profile中检测方法耗时的代码了，如果要记录方法层级关系和调用顺序，有什么思路么","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443781,"discussion_content":"方法层级关系和调用顺序根据堆栈来，解析方法堆栈可以得到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552978071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77568,"user_name":"魏激动","can_delete":false,"product_type":"c1","uid":1457362,"ip_address":"","ucode":"9BFA36445B99CA","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/d2/3d9c9f56.jpg","comment_is_top":false,"comment_ctime":1552963370,"is_pvip":false,"replies":[{"id":"28351","content":"好的，我留言里有推荐一些，你也可以关注下","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552978102,"ip_address":"","comment_id":77568,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552963370","product_id":100024501,"comment_content":"老师好，我自己不是本科计算机出身，很多基础概念不是很理解，今后如果涉及到您认为iOS dev必须要懂的CS概念时可否捎带多讲两句或者给点相关链接或者书籍。谢谢","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443780,"discussion_content":"好的，我留言里有推荐一些，你也可以关注下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552978102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77380,"user_name":"刘益云","can_delete":false,"product_type":"c1","uid":1222629,"ip_address":"","ucode":"8A42E9D7DFC79D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a7/e5/a2a55e91.jpg","comment_is_top":false,"comment_ctime":1552915580,"is_pvip":false,"replies":[{"id":"28358","content":"继承了 NSObject 的可以","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552989486,"ip_address":"","comment_id":77380,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552915580","product_id":100024501,"comment_content":"swift项目也可以通过hook objc_send来检测吗","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443707,"discussion_content":"继承了 NSObject 的可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552989486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77327,"user_name":"鹏飞","can_delete":false,"product_type":"c1","uid":1458818,"ip_address":"","ucode":"A31608EF850020","user_header":"https://static001.geekbang.org/account/avatar/00/16/42/82/53d05039.jpg","comment_is_top":false,"comment_ctime":1552907266,"is_pvip":false,"replies":[{"id":"28359","content":"main 之前的不需要捕获，需要了解后，针对性的优化","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552989529,"ip_address":"","comment_id":77327,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552907266","product_id":100024501,"comment_content":"其实想知道的是，main函数执行前所列举的几件工作，是如何捕获到的，怎么获取这方面信息？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443686,"discussion_content":"main 之前的不需要捕获，需要了解后，针对性的优化","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552989529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77324,"user_name":"馍馍爱吃面","can_delete":false,"product_type":"c1","uid":1456632,"ip_address":"","ucode":"7CB845845AAED0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIKcZLwHrCyhYjVm8cm9iazRmL63y2ogpPheVlOpzicrzrQ1bWr2dYkicfchOfNicOm8tpLq7cRNt4c6w/132","comment_is_top":false,"comment_ctime":1552906472,"is_pvip":false,"replies":[{"id":"28360","content":"加油","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552990599,"ip_address":"","comment_id":77324,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552906472","product_id":100024501,"comment_content":"第一把就俩王四个二，直接炸的脑袋嗡嗡的！得好好学学了！","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443685,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552990599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77322,"user_name":"yohunl","can_delete":false,"product_type":"c1","uid":1454026,"ip_address":"","ucode":"32F92EBC87C517","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/ca/9a5b4113.jpg","comment_is_top":false,"comment_ctime":1552906424,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552906424","product_id":100024501,"comment_content":"上周刚研究完fishhook 的源码，写的太优秀了，内涵极其丰富！对了解动态库加载过程，macho 的细节都有非常大的帮助","like_count":0},{"had_liked":false,"id":77296,"user_name":"掌纹","can_delete":false,"product_type":"c1","uid":1455123,"ip_address":"","ucode":"CA5FCE5B8B4599","user_header":"https://static001.geekbang.org/account/avatar/00/16/34/13/42fce28a.jpg","comment_is_top":false,"comment_ctime":1552902889,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552902889","product_id":100024501,"comment_content":"源码中__asm volatile (&quot;mov x2, lr\\n&quot;);  是在为before_objc_msgSend的参数做准备，但是before_objc_msgSend只有3个参数对应x0, x1, x2那么__asm volatile (&quot;mov x3, x4\\n&quot;); 有什么用呢?","like_count":0},{"had_liked":false,"id":77289,"user_name":"掌纹","can_delete":false,"product_type":"c1","uid":1455123,"ip_address":"","ucode":"CA5FCE5B8B4599","user_header":"https://static001.geekbang.org/account/avatar/00/16/34/13/42fce28a.jpg","comment_is_top":false,"comment_ctime":1552902297,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552902297","product_id":100024501,"comment_content":"SMCallTraceCore.c 中的    __asm volatile (&quot;mov x2, lr\\n&quot;); &#47;&#47;line 381   __asm volatile (&quot;mov x3, x4\\n&quot;);&#47;&#47;382 感觉没有作用呀，还有宏call中对x8 x9的操作感觉多余的呢？源码和这篇文章讲的对不上所以不是很理解，文章中为什么会有q寄存器呢？","like_count":0},{"had_liked":false,"id":77185,"user_name":"manky","can_delete":false,"product_type":"c1","uid":1226745,"ip_address":"","ucode":"BDDBB16BADB5B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/b7/f9/75bae002.jpg","comment_is_top":false,"comment_ctime":1552878548,"is_pvip":false,"replies":[{"id":"28462","content":"文中指的是在启动阶段不需要用的。","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553053188,"ip_address":"","comment_id":77185,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552878548","product_id":100024501,"comment_content":"减少加载启动后不会去使用的类或者方法。 这句话要怎么理解。要是不使用的类和方法,难道打包编译的时候也会将其编译进二进制文件里吗?","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443625,"discussion_content":"文中指的是在启动阶段不需要用的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553053188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77051,"user_name":"Geek__d0d858f46e94","can_delete":false,"product_type":"c1","uid":1453841,"ip_address":"","ucode":"AD0780D2708612","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIcvNGcZMsFkqTC6gb3Q81icCD7qvLMEfE7sD483ib6rwX1huREGKgNu5IGZgaGdmftsPsjf1MVGy9A/132","comment_is_top":false,"comment_ctime":1552816568,"is_pvip":false,"replies":[{"id":"28380","content":"Clang 是用在类 C语言的，Swift 有自己的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552997150,"ip_address":"","comment_id":77051,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552816568","product_id":100024501,"comment_content":"戴老师，我现在想了解下swift被llvm编译时的中间码，请问用clang的什么命令行，网上都是oc的资料，都没找到swift的资料","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443562,"discussion_content":"Clang 是用在类 C语言的，Swift 有自己的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552997150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77043,"user_name":"Bo.zhang","can_delete":false,"product_type":"c1","uid":1455638,"ip_address":"","ucode":"B60C1A20DA04A3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eobLhuHjCEdTn8V2rCSBPGLc1PqnMpibPJIickEJ9MxaciczXtmdFxtqzb4FXoRdDBgjUjdT63Jsaibgw/132","comment_is_top":false,"comment_ctime":1552814426,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1552814426","product_id":100024501,"comment_content":"恐怕作业完不成了，我检查一下公司项目各个方法调用耗时呢","like_count":0,"discussions":[{"author":{"id":1227217,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b9/d1/9881a32d.jpg","nickname":"楠","note":"","ucode":"6B87C6375AB767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301562,"discussion_content":"也许可以定制一些功能，然后在你们公司推广推广= = ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598576126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77016,"user_name":"drunkenMouse","can_delete":false,"product_type":"c1","uid":1454037,"ip_address":"","ucode":"AA8CEA703ECBE8","user_header":"","comment_is_top":false,"comment_ctime":1552806034,"is_pvip":false,"replies":[{"id":"28819","content":"一些方法执行时长没设置时间长，这还会影响抓到方法的时长精度","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553344940,"ip_address":"","comment_id":77016,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552806034","product_id":100024501,"comment_content":"定时间隔设置得长了，会漏掉一些方法，从而导致检查出来的耗时不准确。为什么会漏掉？被抓取操作顶掉了？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443543,"discussion_content":"一些方法执行时长没设置时间长，这还会影响抓到方法的时长精度","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553344940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76989,"user_name":"drunkenMouse","can_delete":false,"product_type":"c1","uid":1454037,"ip_address":"","ucode":"AA8CEA703ECBE8","user_header":"","comment_is_top":false,"comment_ctime":1552795130,"is_pvip":false,"replies":[{"id":"28083","content":" 不是，不会多，就是4毫秒","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552805857,"ip_address":"","comment_id":76989,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552795130","product_id":100024501,"comment_content":"+load 方法进行运行时方法替换操作会带来 4 毫秒的消耗，是不是指，+load方法的执行，会比+initalize等方法，多带来4毫秒的消耗？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443530,"discussion_content":" 不是，不会多，就是4毫秒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552805857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76987,"user_name":"drunkenMouse","can_delete":false,"product_type":"c1","uid":1454037,"ip_address":"","ucode":"AA8CEA703ECBE8","user_header":"","comment_is_top":false,"comment_ctime":1552794489,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552794489","product_id":100024501,"comment_content":"进行 rebase 指针调整和 bind 符号绑定，这什么意思啊？","like_count":0},{"had_liked":false,"id":76970,"user_name":"GODV","can_delete":false,"product_type":"c1","uid":1454163,"ip_address":"","ucode":"DB311A5D9EE770","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/53/01a6c4da.jpg","comment_is_top":false,"comment_ctime":1552789568,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552789568","product_id":100024501,"comment_content":"汇编稍微有点基础，看了文章感觉需要这种底层的原理的实现过程的了解和源码学习。","like_count":0},{"had_liked":false,"id":76949,"user_name":"wxiao","can_delete":false,"product_type":"c1","uid":1235486,"ip_address":"","ucode":"38BDA4DEC519DC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEI10szvtNyic3Er2Or6oicoPwvkyBiawNd9o14xNBxwSkOUxR85icmjuQl7icbAN36wL5pDbYyGtuib9tUQ/132","comment_is_top":false,"comment_ctime":1552783000,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552783000","product_id":100024501,"comment_content":"先去补补汇编","like_count":0},{"had_liked":false,"id":76922,"user_name":"Zoe","can_delete":false,"product_type":"c1","uid":1158609,"ip_address":"","ucode":"4B309FAD20EEAC","user_header":"https://static001.geekbang.org/account/avatar/00/11/ad/d1/62376eff.jpg","comment_is_top":false,"comment_ctime":1552751439,"is_pvip":false,"replies":[{"id":"28398","content":"不能的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552998468,"ip_address":"","comment_id":76922,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552751439","product_id":100024501,"comment_content":"老师，如果不涉及汇编，单纯使用fishbook 这个库能不能做到大部分的oc方法监控工具","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443503,"discussion_content":"不能的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552998468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76914,"user_name":"jimmy","can_delete":false,"product_type":"c1","uid":1100293,"ip_address":"","ucode":"A7838754D1B427","user_header":"https://static001.geekbang.org/account/avatar/00/10/ca/05/19f2f8a3.jpg","comment_is_top":false,"comment_ctime":1552749828,"is_pvip":false,"replies":[{"id":"28369","content":"埋点章节会讲","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552991155,"ip_address":"","comment_id":76914,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552749828","product_id":100024501,"comment_content":"swift 项目，有什么好的无侵入埋点的方案吗","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443499,"discussion_content":"埋点章节会讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552991155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76903,"user_name":"小苏","can_delete":false,"product_type":"c1","uid":1171165,"ip_address":"","ucode":"FB36B69864F7C8","user_header":"https://static001.geekbang.org/account/avatar/00/11/de/dd/67d4e0d2.jpg","comment_is_top":false,"comment_ctime":1552745175,"is_pvip":false,"replies":[{"id":"28368","content":"后面章节会讲到","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552991120,"ip_address":"","comment_id":76903,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552745175","product_id":100024501,"comment_content":"戴老师，App切换到后台，过几分钟就被系统杀死了，这种情况需要怎么去找出被杀掉的原因呢。目前我就遇到了这种问题，又看不到具体的日志，不知道您有没有好的建议","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443494,"discussion_content":"后面章节会讲到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552991120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76865,"user_name":"谢文印","can_delete":false,"product_type":"c1","uid":1455908,"ip_address":"","ucode":"BBC2AE7F8C3F29","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/24/67d88573.jpg","comment_is_top":false,"comment_ctime":1552732274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552732274","product_id":100024501,"comment_content":"交换寄存器中保存的参数，将用于返回的寄存器 lr 中的数据移到 x1 里。这个不懂细节。","like_count":0},{"had_liked":false,"id":76860,"user_name":"TokapoNzld","can_delete":false,"product_type":"c1","uid":1457112,"ip_address":"","ucode":"E5752557CEF5C4","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/d8/7c5c7cca.jpg","comment_is_top":false,"comment_ctime":1552731469,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552731469","product_id":100024501,"comment_content":"实不相瞒，看到汇编，一脸懵逼，🤣🤣🤣🤣","like_count":0},{"had_liked":false,"id":76603,"user_name":"李小草","can_delete":false,"product_type":"c1","uid":1240476,"ip_address":"","ucode":"83DAA0BFDC2068","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/9c/7afa883f.jpg","comment_is_top":false,"comment_ctime":1552640729,"is_pvip":false,"replies":[{"id":"27930","content":"需要真机","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552647115,"ip_address":"","comment_id":76603,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552640729","product_id":100024501,"comment_content":"在你给的完整代码中的SMRootViewController的viewDidLoad方法中开头调用[SMCallTrace start];，结尾调用[SMCallTrace stop]; [SMCallTrace save];并没有在控制台看到打印的每个方法的执行时间和层级信息。（已经打开了SMCallTrace点m中的54行）","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443374,"discussion_content":"需要真机","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552647115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76584,"user_name":"燕儿","can_delete":false,"product_type":"c1","uid":1460499,"ip_address":"","ucode":"01E5DD0C59BB34","user_header":"https://static001.geekbang.org/account/avatar/00/16/49/13/9f720965.jpg","comment_is_top":false,"comment_ctime":1552635601,"is_pvip":false,"replies":[{"id":"27933","content":"什么资源？","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552648481,"ip_address":"","comment_id":76584,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552635601","product_id":100024501,"comment_content":"文章里提到的资源为什么点不开？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443362,"discussion_content":"什么资源？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552648481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76567,"user_name":"atom2ueki","can_delete":false,"product_type":"c1","uid":1456290,"ip_address":"","ucode":"67B8A1F8B4EC6B","user_header":"https://static001.geekbang.org/account/avatar/00/16/38/a2/da82eec7.jpg","comment_is_top":false,"comment_ctime":1552633754,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552633754","product_id":100024501,"comment_content":"果然看源码才是进阶的方向","like_count":0},{"had_liked":false,"id":76554,"user_name":"Geek_86f5d7","can_delete":false,"product_type":"c1","uid":1457198,"ip_address":"","ucode":"369E31D0A93511","user_header":"","comment_is_top":false,"comment_ctime":1552631893,"is_pvip":false,"replies":[{"id":"27932","content":"那些是包装层的，核心层是可以抽出来的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552647224,"ip_address":"","comment_id":76554,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552631893","product_id":100024501,"comment_content":"老师，SMCallTrace工具能不能从项目中抽离出来使用呀，现在它依赖于很多其他三方库，如fmdb，ReactiveCocoa，没法单独使用","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443352,"discussion_content":"那些是包装层的，核心层是可以抽出来的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552647224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76474,"user_name":"黑猫","can_delete":false,"product_type":"c1","uid":1153994,"ip_address":"","ucode":"3C6FC0EC31D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/ca/a1be3898.jpg","comment_is_top":false,"comment_ctime":1552616149,"is_pvip":false,"replies":[{"id":"27909","content":"已留言","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624708,"ip_address":"","comment_id":76474,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552616149","product_id":100024501,"comment_content":"戴老师，合并非系统动态库为一个动态库，这个不太清楚应该怎么做。","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443320,"discussion_content":"已留言","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76462,"user_name":"邓斌","can_delete":false,"product_type":"c1","uid":1453918,"ip_address":"","ucode":"A516165B893666","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/5e/e1306e14.jpg","comment_is_top":false,"comment_ctime":1552613899,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552613899","product_id":100024501,"comment_content":"最近正好在整理MachO相关的博客，戴大神今天从更高的角度和更实用的角度帮我梳理了一遍，谢谢啦，等会再重新整理整理🤓🤓🤓","like_count":0},{"had_liked":false,"id":76457,"user_name":"小千","can_delete":false,"product_type":"c1","uid":1286065,"ip_address":"","ucode":"8A1274AD7B87F0","user_header":"https://static001.geekbang.org/account/avatar/00/13/9f/b1/ae61b184.jpg","comment_is_top":false,"comment_ctime":1552613525,"is_pvip":false,"replies":[{"id":"27907","content":"加油，看完回头到这再看一遍","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624685,"ip_address":"","comment_id":76457,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552613525","product_id":100024501,"comment_content":"前面还跟得上，后面实现瞬间感觉要翻出C、汇编再看看了……","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443314,"discussion_content":"加油，看完回头到这再看一遍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76450,"user_name":"田明飞","can_delete":false,"product_type":"c1","uid":1454064,"ip_address":"","ucode":"2F26D3299FF96D","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/f0/bba32ef6.jpg","comment_is_top":false,"comment_ctime":1552613255,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552613255","product_id":100024501,"comment_content":"干货满满，希望老师后面能多多开设高阶课程。支持支持～","like_count":0},{"had_liked":false,"id":76424,"user_name":"习惯","can_delete":false,"product_type":"c1","uid":1454898,"ip_address":"","ucode":"4972829D99139E","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/32/967c56c8.jpg","comment_is_top":false,"comment_ctime":1552610466,"is_pvip":false,"replies":[{"id":"27911","content":"赞","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624731,"ip_address":"","comment_id":76424,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552610466","product_id":100024501,"comment_content":"老师讲的太好了，但是感觉有点懵逼，课后实践下应该会好很多。加油！","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443300,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76423,"user_name":"hb","can_delete":false,"product_type":"c1","uid":1139064,"ip_address":"","ucode":"788700127D3635","user_header":"https://static001.geekbang.org/account/avatar/00/11/61/78/84e3433a.jpg","comment_is_top":false,"comment_ctime":1552610283,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552610283","product_id":100024501,"comment_content":"王炸，要不起","like_count":0},{"had_liked":false,"id":76402,"user_name":"","can_delete":false,"product_type":"c1","uid":1435152,"ip_address":"","ucode":"399993037A91F9","user_header":"https://static001.geekbang.org/account/avatar/00/15/e6/10/cec87bde.jpg","comment_is_top":false,"comment_ctime":1552590329,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552590329","product_id":100024501,"comment_content":"疑问，我们用framework不是假动态库嘛","like_count":0},{"had_liked":false,"id":76401,"user_name":"zeroskylian","can_delete":false,"product_type":"c1","uid":1454413,"ip_address":"","ucode":"737C6DB3C3E0AF","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/4d/e4228ff8.jpg","comment_is_top":false,"comment_ctime":1552584519,"is_pvip":false,"replies":[{"id":"27898","content":"不会","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624411,"ip_address":"","comment_id":76401,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552584519","product_id":100024501,"comment_content":"静态库会不会影响启动时间呢","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443291,"discussion_content":"不会","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76329,"user_name":"～科24～","can_delete":false,"product_type":"c1","uid":1265538,"ip_address":"","ucode":"34F2982BDF4CB4","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/82/d00e662d.jpg","comment_is_top":false,"comment_ctime":1552573095,"is_pvip":false,"replies":[{"id":"27918","content":"会使用，除非是懒加载","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552624966,"ip_address":"","comment_id":76329,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552573095","product_id":100024501,"comment_content":"那减少动态库，我们怎么保证这个动态库没有被使用？运行尝试吗？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443257,"discussion_content":"会使用，除非是懒加载","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552624966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76324,"user_name":"火之舞","can_delete":false,"product_type":"c1","uid":1001178,"ip_address":"","ucode":"98838620CCCA71","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/da/ebb0e10a.jpg","comment_is_top":false,"comment_ctime":1552572608,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552572608","product_id":100024501,"comment_content":"oc和runtime的都还懂，符号表，链接那些就懵逼了，汇编更加不会了","like_count":0},{"had_liked":false,"id":76295,"user_name":"Michael King","can_delete":false,"product_type":"c1","uid":1074418,"ip_address":"","ucode":"807B9F857B0F2B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/SPs38cwRr8ctKQsicGQicASkK4ficv0O2UiauRDAz1q7AwO9l0PHGEnjpMXUcTbqMp6ZddPJVf5a9CWcic44ibs6iagdQ/132","comment_is_top":false,"comment_ctime":1552568496,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552568496","product_id":100024501,"comment_content":"音频文字类的学习资料确实不视频类的好","like_count":0},{"had_liked":false,"id":76269,"user_name":"Redhan","can_delete":false,"product_type":"c1","uid":1317133,"ip_address":"","ucode":"5AB18CDBF241AA","user_header":"https://static001.geekbang.org/account/avatar/00/14/19/0d/6d881bcc.jpg","comment_is_top":false,"comment_ctime":1552562570,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552562570","product_id":100024501,"comment_content":"太棒了","like_count":0},{"had_liked":false,"id":76261,"user_name":"金子菇凉的铁粉小逗","can_delete":false,"product_type":"c1","uid":1000602,"ip_address":"","ucode":"6A2C601F6EEBB5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/9a/c03bea17.jpg","comment_is_top":false,"comment_ctime":1552560379,"is_pvip":false,"replies":[{"id":"27819","content":"这个结论是怎么得到的？","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552572146,"ip_address":"","comment_id":76261,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552560379","product_id":100024501,"comment_content":"为啥微信的启动主线程永远杀不死，每次都是热启动？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443233,"discussion_content":"这个结论是怎么得到的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552572146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76247,"user_name":"SongKx","can_delete":false,"product_type":"c1","uid":1266177,"ip_address":"","ucode":"696E974BB47638","user_header":"https://static001.geekbang.org/account/avatar/00/13/52/01/233b14af.jpg","comment_is_top":false,"comment_ctime":1552556739,"is_pvip":false,"replies":[{"id":"27817","content":"后面会说","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552572062,"ip_address":"","comment_id":76247,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552556739","product_id":100024501,"comment_content":"能不能讲讲作业，内容分量太足了","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443228,"discussion_content":"后面会说","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552572062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76236,"user_name":"石头","can_delete":false,"product_type":"c1","uid":1081276,"ip_address":"","ucode":"2AFF352C837971","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKY0ibA4DWA9BXyw1xjNzbbwkGJ6doP2Ed6vYxu3MPn1BmuTnC11vQibJSy53uvCLwNibI3GvQIBShXA/132","comment_is_top":false,"comment_ctime":1552555281,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552555281","product_id":100024501,"comment_content":"@哈<br>还可以这样<br><br>_ = UIApplicationMain(<br>    CommandLine.argc,<br>    UnsafeMutableRawPointer(CommandLine.unsafeArgv)<br>        .bindMemory(<br>            to: UnsafeMutablePointer&lt;Int8&gt;.self,<br>            capacity: Int(CommandLine.argc)),<br>    NSStringFromClass(Application.self),<br>    NSStringFromClass(AppDelegate.self)<br>)","like_count":0},{"had_liked":false,"id":76230,"user_name":"Yang","can_delete":false,"product_type":"c1","uid":1457625,"ip_address":"","ucode":"D7C4C860967D10","user_header":"https://static001.geekbang.org/account/avatar/00/16/3d/d9/aed6515c.jpg","comment_is_top":false,"comment_ctime":1552554272,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552554272","product_id":100024501,"comment_content":"脑子有点嗡嗡的看完 哈哈","like_count":0},{"had_liked":false,"id":76226,"user_name":"CWH_iOS","can_delete":false,"product_type":"c1","uid":1453842,"ip_address":"","ucode":"45C815D44823D5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/JkMgML8gdYm52jxiaXcU5UegAQbTySoH1iayzUtXPtycy0Nn3FmG88FibJCHjUSTvHibb7jVsJJPdMicgvqViaFqqq1Q/132","comment_is_top":false,"comment_ctime":1552553674,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552553674","product_id":100024501,"comment_content":"赞，下班回去就写课后作业咯","like_count":0},{"had_liked":false,"id":76151,"user_name":"Hy","can_delete":false,"product_type":"c1","uid":1239531,"ip_address":"","ucode":"BF6AC9AA9B26A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/eb/2394e520.jpg","comment_is_top":false,"comment_ctime":1552537129,"is_pvip":false,"replies":[{"id":"27808","content":"接触接触，可以回过头来再听","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552567553,"ip_address":"","comment_id":76151,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552537129","product_id":100024501,"comment_content":"有些领域还没接触，所以听起来会有些费劲","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443198,"discussion_content":"接触接触，可以回过头来再听","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76136,"user_name":"@快捷键","can_delete":false,"product_type":"c1","uid":1459412,"ip_address":"","ucode":"BEDFFC9541035C","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/d4/1468475d.jpg","comment_is_top":false,"comment_ctime":1552534595,"is_pvip":false,"replies":[{"id":"27803","content":"会有答疑","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552567356,"ip_address":"","comment_id":76136,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552534595","product_id":100024501,"comment_content":"往后的课后作业有答案吗~~作为参考用","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443193,"discussion_content":"会有答疑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76135,"user_name":"🍃","can_delete":false,"product_type":"c1","uid":1171283,"ip_address":"","ucode":"390FCCC1F2CB87","user_header":"https://static001.geekbang.org/account/avatar/00/11/df/53/bda0e36c.jpg","comment_is_top":false,"comment_ctime":1552534559,"is_pvip":false,"replies":[{"id":"27802","content":"https:&#47;&#47;blog.nelhage.com&#47;2010&#47;10&#47;amd64-and-va_arg&#47;<br>http:&#47;&#47;infocenter.arm.com&#47;help&#47;topic&#47;com.arm.doc.ihi0055b&#47;IHI0055B_aapcs64.pdf<br>https:&#47;&#47;developer.apple.com&#47;library&#47;ios&#47;documentation&#47;Xcode&#47;Conceptual&#47;iPhoneOSABIReference&#47;Articles&#47;ARM64FunctionCallingConventions.html<br><br>了解下","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552567322,"ip_address":"","comment_id":76135,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1552534559","product_id":100024501,"comment_content":"看不懂汇编，有没有好的书籍或者文章可以学习，还请指点。","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443192,"discussion_content":"https://blog.nelhage.com/2010/10/amd64-and-va_arg/\nhttp://infocenter.arm.com/help/topic/com.arm.doc.ihi0055b/IHI0055B_aapcs64.pdf\nhttps://developer.apple.com/library/ios/documentation/Xcode/Conceptual/iPhoneOSABIReference/Articles/ARM64FunctionCallingConventions.html\n\n了解下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241567,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f1/df/8ba04bec.jpg","nickname":"Joker","note":"","ucode":"C42E11098E1B38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25141,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570433292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76121,"user_name":"刘军","can_delete":false,"product_type":"c1","uid":1373201,"ip_address":"","ucode":"B2223C3713739C","user_header":"https://static001.geekbang.org/account/avatar/00/14/f4/11/727ebf8d.jpg","comment_is_top":false,"comment_ctime":1552532900,"is_pvip":true,"replies":[{"id":"27800","content":"swift 没有这个","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552567250,"ip_address":"","comment_id":76121,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552532900","product_id":100024501,"comment_content":"+load() 方法，一个耗时 4 毫秒是所有机型平均4ms ，swift 怎么优化？谢谢<br>","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443187,"discussion_content":"swift 没有这个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76110,"user_name":"啊波次的额佛哥～","can_delete":false,"product_type":"c1","uid":1201998,"ip_address":"","ucode":"6F31255207CB17","user_header":"https://static001.geekbang.org/account/avatar/00/12/57/4e/302bfe22.jpg","comment_is_top":false,"comment_ctime":1552532238,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552532238","product_id":100024501,"comment_content":"一个被软件事业耽误的设计师~","like_count":0},{"had_liked":false,"id":76106,"user_name":"xilie","can_delete":false,"product_type":"c1","uid":1013805,"ip_address":"","ucode":"AFCC4E157F7830","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVegfjqa0gM4hcRrBhZkIf7Uc5oeTMYsg6o5pd76IQlUoIIh2ic6P22xVEFtRnAzjyLtiaPVstkKug/132","comment_is_top":false,"comment_ctime":1552531856,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552531856","product_id":100024501,"comment_content":"学到了，之前我会在启动时去将第三方库的配置初始化，后来慢慢改了，比如友盟分享的配置就放到了分享模块，即分享调用时再做。不过仍然有些得放启动里面，比如bugly、数据埋点等等。","like_count":0},{"had_liked":false,"id":76101,"user_name":"andyscheme","can_delete":false,"product_type":"c1","uid":1258737,"ip_address":"","ucode":"8C1918D4866612","user_header":"https://static001.geekbang.org/account/avatar/00/13/34/f1/622335ad.jpg","comment_is_top":false,"comment_ctime":1552531609,"is_pvip":false,"replies":[{"id":"27794","content":"Swift 用第一种","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552566877,"ip_address":"","comment_id":76101,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552531609","product_id":100024501,"comment_content":"如果要监听Swift的方法就只能使用第一种了,那要是两种都使用是不是可以","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443180,"discussion_content":"Swift 用第一种","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552566877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76098,"user_name":"赟Yue","can_delete":false,"product_type":"c1","uid":1377940,"ip_address":"","ucode":"EFA91A3944DB99","user_header":"https://static001.geekbang.org/account/avatar/00/15/06/94/a44f0679.jpg","comment_is_top":false,"comment_ctime":1552531254,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1552531254","product_id":100024501,"comment_content":"哈哈 当初做启动优化的时候，时间检测是用的别人的工具，这下可以自己实现一个了","like_count":0,"discussions":[{"author":{"id":1241567,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f1/df/8ba04bec.jpg","nickname":"Joker","note":"","ucode":"C42E11098E1B38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25139,"discussion_content":"用过什么工具？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570433248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76096,"user_name":"Geek_2139c5","can_delete":false,"product_type":"c1","uid":1453888,"ip_address":"","ucode":"12E54007CE083D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqgy6JAwuWbsJOKY1sibdhIzZcAIb0hNd3oQ4dyUGVaoXonaH7WSwfWXH2kKQPnMugzmBPSGzjVjNg/132","comment_is_top":false,"comment_ctime":1552531128,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552531128","product_id":100024501,"comment_content":"很不错，现在工作用到这个方法计时的监控","like_count":0},{"had_liked":false,"id":76092,"user_name":"张慧成","can_delete":false,"product_type":"c1","uid":1457253,"ip_address":"","ucode":"7DBD0264B52C3D","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/65/c53c1f73.jpg","comment_is_top":false,"comment_ctime":1552530253,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552530253","product_id":100024501,"comment_content":"厉害厉害，学习了。","like_count":0},{"had_liked":false,"id":76066,"user_name":"远恒之义","can_delete":false,"product_type":"c1","uid":1020989,"ip_address":"","ucode":"C0CB54C7AE9EB0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/94/3d/9ff6988e.jpg","comment_is_top":false,"comment_ctime":1552527481,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552527481","product_id":100024501,"comment_content":"不愧是高手课程，干货满满，课后作业实践起来💪","like_count":0},{"had_liked":false,"id":76054,"user_name":"长大了","can_delete":false,"product_type":"c1","uid":1453898,"ip_address":"","ucode":"066412BC980EED","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/4a/af54bde7.jpg","comment_is_top":false,"comment_ctime":1552526291,"is_pvip":false,"replies":[{"id":"27785","content":"加油","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552565813,"ip_address":"","comment_id":76054,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552526291","product_id":100024501,"comment_content":"哇 大招 大招 自己汇编语言方面底子差 读起来比较吃力 但会努力的。","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443152,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552565813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76045,"user_name":"糯糯","can_delete":false,"product_type":"c1","uid":1001931,"ip_address":"","ucode":"01490B80C5BC07","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/cb/83ebb731.jpg","comment_is_top":false,"comment_ctime":1552525979,"is_pvip":false,"replies":[{"id":"27784","content":"现在还是可以的，来吧","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552565802,"ip_address":"","comment_id":76045,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552525979","product_id":100024501,"comment_content":"当年戴老师开源项目寻找人的时候，应该去参加的，可叹自己没勇气，没实力，不好意思去啊","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443147,"discussion_content":"现在还是可以的，来吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552565802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76037,"user_name":"LeasonZ","can_delete":false,"product_type":"c1","uid":1453539,"ip_address":"","ucode":"508196C3B39103","user_header":"https://static001.geekbang.org/account/avatar/00/16/2d/e3/05f33251.jpg","comment_is_top":false,"comment_ctime":1552525491,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552525491","product_id":100024501,"comment_content":"值得多看几遍，感觉很多方法似曾相识但又云里雾里","like_count":0},{"had_liked":false,"id":76035,"user_name":"星空","can_delete":false,"product_type":"c1","uid":1456338,"ip_address":"","ucode":"F38AFCE9DECCA1","user_header":"https://static001.geekbang.org/account/avatar/00/16/38/d2/c6438ae9.jpg","comment_is_top":false,"comment_ctime":1552525413,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1552525413","product_id":100024501,"comment_content":"这个汇编太强力了。 有点吃力，需要补补。。","like_count":0},{"had_liked":false,"id":76030,"user_name":"像风儿一样","can_delete":false,"product_type":"c1","uid":1456747,"ip_address":"","ucode":"A941E59D42CFD3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxhvoiba1AsYclEBch8Xk5KJDtmsFIDVIhEaPB9HOBwM9n5VkblzEOYqibKg5DcBsKTOd4XsKoI0kQ/132","comment_is_top":false,"comment_ctime":1552524997,"is_pvip":false,"replies":[{"id":"27781","content":"要的就是这种效果","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552565722,"ip_address":"","comment_id":76030,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552524997","product_id":100024501,"comment_content":"一遍没看懂，再来一遍","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443141,"discussion_content":"要的就是这种效果","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552565722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76029,"user_name":"下一页","can_delete":false,"product_type":"c1","uid":1457124,"ip_address":"","ucode":"59F4DB13B77A18","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/e4/79150e17.jpg","comment_is_top":false,"comment_ctime":1552524888,"is_pvip":false,"replies":[{"id":"27780","content":"文中有说明自带的是第一种方法，是够用的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552565705,"ip_address":"","comment_id":76029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552524888","product_id":100024501,"comment_content":"Xcode 自带的检测耗时和这个相比哪个好用？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443140,"discussion_content":"文中有说明自带的是第一种方法，是够用的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552565705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76027,"user_name":"六号先生117","can_delete":false,"product_type":"c1","uid":1005232,"ip_address":"","ucode":"F5AA9A6CE32EBD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/b0/5f5ec445.jpg","comment_is_top":false,"comment_ctime":1552524852,"is_pvip":false,"replies":[{"id":"27761","content":"多多重复效果会好些","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552544543,"ip_address":"","comment_id":76027,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1552524852","product_id":100024501,"comment_content":"早上起来浏览了个大概，上班通读了一遍，细节得再翻看几遍。","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443139,"discussion_content":"多多重复效果会好些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552544543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76026,"user_name":"C","can_delete":false,"product_type":"c1","uid":1456295,"ip_address":"","ucode":"7F073776A41A73","user_header":"https://static001.geekbang.org/account/avatar/00/16/38/a7/198c0d2f.jpg","comment_is_top":false,"comment_ctime":1552524772,"is_pvip":false,"replies":[{"id":"27760","content":"从作业入手👍🏻","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552544522,"ip_address":"","comment_id":76026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552524772","product_id":100024501,"comment_content":"打卡,基础差,学的有点吃力  认真完成课后作业吧","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443138,"discussion_content":"从作业入手👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552544522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76025,"user_name":"白开了杯水","can_delete":false,"product_type":"c1","uid":1156672,"ip_address":"","ucode":"F0328577343AB5","user_header":"https://static001.geekbang.org/account/avatar/00/11/a6/40/6518a188.jpg","comment_is_top":false,"comment_ctime":1552524771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552524771","product_id":100024501,"comment_content":"选对了课，项目优化妥妥的","like_count":0},{"had_liked":false,"id":76024,"user_name":"tianna","can_delete":false,"product_type":"c1","uid":1457895,"ip_address":"","ucode":"385C7AC7B6772B","user_header":"","comment_is_top":false,"comment_ctime":1552524763,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552524763","product_id":100024501,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":76013,"user_name":"小猪圣骑士","can_delete":false,"product_type":"c1","uid":1454895,"ip_address":"","ucode":"D3AACF74E4806F","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/2f/772d4cd0.jpg","comment_is_top":false,"comment_ctime":1552523980,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552523980","product_id":100024501,"comment_content":"很不错，学习学习","like_count":0},{"had_liked":false,"id":76008,"user_name":"Songs","can_delete":false,"product_type":"c1","uid":1077042,"ip_address":"","ucode":"0A0194E74DADAC","user_header":"https://wx.qlogo.cn/mmopen/vi_32/42BbywassRLmQloNgHWWsqIa30aKyaqdNvjFBkhs87HzxMFn1unDZqjAh7Xkgibeq5k6eS269XSpLI5I7CMoz9g/0","comment_is_top":false,"comment_ctime":1552523602,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552523602","product_id":100024501,"comment_content":"学习了，干货满满啊！等会儿自己实践一下","like_count":0},{"had_liked":false,"id":76007,"user_name":"Onion_Knight","can_delete":false,"product_type":"c1","uid":1457087,"ip_address":"","ucode":"67BDCCFCB1EB85","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/bf/9de6d2af.jpg","comment_is_top":false,"comment_ctime":1552523550,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552523550","product_id":100024501,"comment_content":"匠人精神真的可怕，可以做到这么极致. ","like_count":0},{"had_liked":false,"id":76003,"user_name":"SuperMario","can_delete":false,"product_type":"c1","uid":1455888,"ip_address":"","ucode":"22B34DD5A1FA4D","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/10/4e03be02.jpg","comment_is_top":false,"comment_ctime":1552523325,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552523325","product_id":100024501,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":75967,"user_name":"","can_delete":false,"product_type":"c1","uid":1380004,"ip_address":"","ucode":"04E31DC73B4BAE","user_header":"https://static001.geekbang.org/account/avatar/00/15/0e/a4/16426d45.jpg","comment_is_top":false,"comment_ctime":1552517040,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552517040","product_id":100024501,"comment_content":"质量很高，更期待后面的文章了<br>","like_count":0},{"had_liked":false,"id":75947,"user_name":"ViTo_Tse","can_delete":false,"product_type":"c1","uid":1053289,"ip_address":"","ucode":"63347320EE66CC","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/69/5541bb26.jpg","comment_is_top":false,"comment_ctime":1552496154,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552496154","product_id":100024501,"comment_content":"居然深夜更新，学习让我快乐😂","like_count":0},{"had_liked":false,"id":75945,"user_name":"🌟🔥七","can_delete":false,"product_type":"c1","uid":1108545,"ip_address":"","ucode":"726AF3D7333BED","user_header":"https://static001.geekbang.org/account/avatar/00/10/ea/41/d5099f95.jpg","comment_is_top":false,"comment_ctime":1552495556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552495556","product_id":100024501,"comment_content":"学习了～","like_count":0},{"had_liked":false,"id":75940,"user_name":"刘隐林","can_delete":false,"product_type":"c1","uid":1458294,"ip_address":"","ucode":"39E2685A1CAAA1","user_header":"https://static001.geekbang.org/account/avatar/00/16/40/76/781a0d76.jpg","comment_is_top":false,"comment_ctime":1552495097,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552495097","product_id":100024501,"comment_content":"深夜打卡","like_count":0},{"had_liked":false,"id":75939,"user_name":"iyhjiang","can_delete":false,"product_type":"c1","uid":1016207,"ip_address":"","ucode":"775B3AFFFD36A2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/81/8f/709dc95a.jpg","comment_is_top":false,"comment_ctime":1552494897,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552494897","product_id":100024501,"comment_content":"第一篇文章，就是满满的干货！","like_count":0},{"had_liked":false,"id":75931,"user_name":"简生","can_delete":false,"product_type":"c1","uid":1245345,"ip_address":"","ucode":"AE0EFF92406E17","user_header":"https://static001.geekbang.org/account/avatar/00/13/00/a1/e943773e.jpg","comment_is_top":false,"comment_ctime":1552493246,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552493246","product_id":100024501,"comment_content":"沙发，深夜打卡学习。","like_count":0}]}