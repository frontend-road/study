{"id":102132,"title":"10 | ç”Ÿäº§è€…å‹ç¼©ç®—æ³•é¢é¢è§‚","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å¤•ã€‚ä»Šå¤©æˆ‘è¦å’Œä½ åˆ†äº«çš„å†…å®¹æ˜¯ï¼šç”Ÿäº§è€…å‹ç¼©ç®—æ³•é¢é¢è§‚ã€‚</p><p>è¯´èµ·å‹ç¼©ï¼ˆcompressionï¼‰ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šä¸ä¼šæ„Ÿåˆ°é™Œç”Ÿã€‚å®ƒç§‰æ‰¿äº†ç”¨æ—¶é—´å»æ¢ç©ºé—´çš„ç»å…¸trade-offæ€æƒ³ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ç”¨CPUæ—¶é—´å»æ¢ç£ç›˜ç©ºé—´æˆ–ç½‘ç»œI/Oä¼ è¾“é‡ï¼Œå¸Œæœ›ä»¥è¾ƒå°çš„CPUå¼€é”€å¸¦æ¥æ›´å°‘çš„ç£ç›˜å ç”¨æˆ–æ›´å°‘çš„ç½‘ç»œI/Oä¼ è¾“ã€‚åœ¨Kafkaä¸­ï¼Œå‹ç¼©ä¹Ÿæ˜¯ç”¨æ¥åšè¿™ä»¶äº‹çš„ã€‚ä»Šå¤©æˆ‘å°±æ¥è·Ÿä½ åˆ†äº«ä¸€ä¸‹Kafkaä¸­å‹ç¼©çš„é‚£äº›äº‹å„¿ã€‚</p><h2>æ€ä¹ˆå‹ç¼©ï¼Ÿ</h2><p>Kafkaæ˜¯å¦‚ä½•å‹ç¼©æ¶ˆæ¯çš„å‘¢ï¼Ÿè¦å¼„æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œå°±è¦ä»Kafkaçš„æ¶ˆæ¯æ ¼å¼è¯´èµ·äº†ã€‚ç›®å‰Kafkaå…±æœ‰ä¸¤å¤§ç±»æ¶ˆæ¯æ ¼å¼ï¼Œç¤¾åŒºåˆ†åˆ«ç§°ä¹‹ä¸ºV1ç‰ˆæœ¬å’ŒV2ç‰ˆæœ¬ã€‚V2ç‰ˆæœ¬æ˜¯Kafka 0.11.0.0ä¸­æ­£å¼å¼•å…¥çš„ã€‚</p><p>ä¸è®ºæ˜¯å“ªä¸ªç‰ˆæœ¬ï¼ŒKafkaçš„æ¶ˆæ¯å±‚æ¬¡éƒ½åˆ†ä¸ºä¸¤å±‚ï¼šæ¶ˆæ¯é›†åˆï¼ˆmessage setï¼‰ä»¥åŠæ¶ˆæ¯ï¼ˆmessageï¼‰ã€‚ä¸€ä¸ªæ¶ˆæ¯é›†åˆä¸­åŒ…å«è‹¥å¹²æ¡æ—¥å¿—é¡¹ï¼ˆrecord itemï¼‰ï¼Œè€Œæ—¥å¿—é¡¹æ‰æ˜¯çœŸæ­£å°è£…æ¶ˆæ¯çš„åœ°æ–¹ã€‚Kafkaåº•å±‚çš„æ¶ˆæ¯æ—¥å¿—ç”±ä¸€ç³»åˆ—æ¶ˆæ¯é›†åˆæ—¥å¿—é¡¹ç»„æˆã€‚Kafkaé€šå¸¸ä¸ä¼šç›´æ¥æ“ä½œå…·ä½“çš„ä¸€æ¡æ¡æ¶ˆæ¯ï¼Œå®ƒæ€»æ˜¯åœ¨æ¶ˆæ¯é›†åˆè¿™ä¸ªå±‚é¢ä¸Šè¿›è¡Œå†™å…¥æ“ä½œã€‚</p><p>é‚£ä¹ˆç¤¾åŒºå¼•å…¥V2ç‰ˆæœ¬çš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢ï¼ŸV2ç‰ˆæœ¬ä¸»è¦æ˜¯é’ˆå¯¹V1ç‰ˆæœ¬çš„ä¸€äº›å¼Šç«¯åšäº†ä¿®æ­£ï¼Œå’Œæˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„ä¸»é¢˜ç›¸å…³çš„ä¿®æ­£æœ‰å“ªäº›å‘¢ï¼Ÿå…ˆä»‹ç»ä¸€ä¸ªï¼Œå°±æ˜¯æŠŠæ¶ˆæ¯çš„å…¬å…±éƒ¨åˆ†æŠ½å–å‡ºæ¥æ”¾åˆ°å¤–å±‚æ¶ˆæ¯é›†åˆé‡Œé¢ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¡æ¶ˆæ¯éƒ½ä¿å­˜è¿™äº›ä¿¡æ¯äº†ã€‚</p><!-- [[[read_end]]] --><p>æˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚åŸæ¥åœ¨V1ç‰ˆæœ¬ä¸­ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½éœ€è¦æ‰§è¡ŒCRCæ ¡éªŒï¼Œä½†æœ‰äº›æƒ…å†µä¸‹æ¶ˆæ¯çš„CRCå€¼æ˜¯ä¼šå‘ç”Ÿå˜åŒ–çš„ã€‚æ¯”å¦‚åœ¨Brokerç«¯å¯èƒ½ä¼šå¯¹æ¶ˆæ¯æ—¶é—´æˆ³å­—æ®µè¿›è¡Œæ›´æ–°ï¼Œé‚£ä¹ˆé‡æ–°è®¡ç®—ä¹‹åçš„CRCå€¼ä¹Ÿä¼šç›¸åº”æ›´æ–°ï¼›å†æ¯”å¦‚Brokerç«¯åœ¨æ‰§è¡Œæ¶ˆæ¯æ ¼å¼è½¬æ¢æ—¶ï¼ˆä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹è€ç‰ˆæœ¬å®¢æˆ·ç«¯ç¨‹åºï¼‰ï¼Œä¹Ÿä¼šå¸¦æ¥CRCå€¼çš„å˜åŒ–ã€‚é‰´äºè¿™äº›æƒ…å†µï¼Œå†å¯¹æ¯æ¡æ¶ˆæ¯éƒ½æ‰§è¡ŒCRCæ ¡éªŒå°±æœ‰ç‚¹æ²¡å¿…è¦äº†ï¼Œä¸ä»…æµªè´¹ç©ºé—´è¿˜è€½è¯¯CPUæ—¶é—´ï¼Œå› æ­¤åœ¨V2ç‰ˆæœ¬ä¸­ï¼Œæ¶ˆæ¯çš„CRCæ ¡éªŒå·¥ä½œå°±è¢«ç§»åˆ°äº†æ¶ˆæ¯é›†åˆè¿™ä¸€å±‚ã€‚</p><p>V2ç‰ˆæœ¬è¿˜æœ‰ä¸€ä¸ªå’Œå‹ç¼©æ¯æ¯ç›¸å…³çš„æ”¹è¿›ï¼Œå°±æ˜¯ä¿å­˜å‹ç¼©æ¶ˆæ¯çš„æ–¹æ³•å‘ç”Ÿäº†å˜åŒ–ã€‚ä¹‹å‰V1ç‰ˆæœ¬ä¸­ä¿å­˜å‹ç¼©æ¶ˆæ¯çš„æ–¹æ³•æ˜¯æŠŠå¤šæ¡æ¶ˆæ¯è¿›è¡Œå‹ç¼©ç„¶åä¿å­˜åˆ°å¤–å±‚æ¶ˆæ¯çš„æ¶ˆæ¯ä½“å­—æ®µä¸­ï¼›è€ŒV2ç‰ˆæœ¬çš„åšæ³•æ˜¯å¯¹æ•´ä¸ªæ¶ˆæ¯é›†åˆè¿›è¡Œå‹ç¼©ã€‚æ˜¾ç„¶åè€…åº”è¯¥æ¯”å‰è€…æœ‰æ›´å¥½çš„å‹ç¼©æ•ˆæœã€‚</p><p>æˆ‘å¯¹ä¸¤ä¸ªç‰ˆæœ¬åˆ†åˆ«åšäº†ä¸€ä¸ªç®€å•çš„æµ‹è¯•ï¼Œç»“æœæ˜¾ç¤ºï¼Œåœ¨ç›¸åŒæ¡ä»¶ä¸‹ï¼Œä¸è®ºæ˜¯å¦å¯ç”¨å‹ç¼©ï¼ŒV2ç‰ˆæœ¬éƒ½æ¯”V1ç‰ˆæœ¬èŠ‚çœç£ç›˜ç©ºé—´ã€‚å½“å¯ç”¨å‹ç¼©æ—¶ï¼Œè¿™ç§èŠ‚çœç©ºé—´çš„æ•ˆæœæ›´åŠ æ˜æ˜¾ï¼Œå°±åƒä¸‹é¢è¿™ä¸¤å¼ å›¾å±•ç¤ºçš„é‚£æ ·ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/11/21/11ddc5575eb6e799f456515c75e1d821.png?wh=1016*404\" alt=\"\"></p><h2>ä½•æ—¶å‹ç¼©ï¼Ÿ</h2><p>åœ¨Kafkaä¸­ï¼Œå‹ç¼©å¯èƒ½å‘ç”Ÿåœ¨ä¸¤ä¸ªåœ°æ–¹ï¼šç”Ÿäº§è€…ç«¯å’ŒBrokerç«¯ã€‚</p><p>ç”Ÿäº§è€…ç¨‹åºä¸­é…ç½®compression.typeå‚æ•°å³è¡¨ç¤ºå¯ç”¨æŒ‡å®šç±»å‹çš„å‹ç¼©ç®—æ³•ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µç¨‹åºä»£ç å±•ç¤ºäº†å¦‚ä½•æ„å»ºä¸€ä¸ªå¼€å¯GZIPçš„Producerå¯¹è±¡ï¼š</p><pre><code> Properties props = new Properties();\n props.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n props.put(&quot;acks&quot;, &quot;all&quot;);\n props.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n props.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n // å¼€å¯GZIPå‹ç¼©\n props.put(&quot;compression.type&quot;, &quot;gzip&quot;);\n \n Producer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(props);\n</code></pre><p>è¿™é‡Œæ¯”è¾ƒå…³é”®çš„ä»£ç è¡Œæ˜¯props.put(â€œcompression.typeâ€, â€œgzipâ€)ï¼Œå®ƒè¡¨æ˜è¯¥Producerçš„å‹ç¼©ç®—æ³•ä½¿ç”¨çš„æ˜¯GZIPã€‚è¿™æ ·Producerå¯åŠ¨åç”Ÿäº§çš„æ¯ä¸ªæ¶ˆæ¯é›†åˆéƒ½æ˜¯ç»GZIPå‹ç¼©è¿‡çš„ï¼Œæ•…è€Œèƒ½å¾ˆå¥½åœ°èŠ‚çœç½‘ç»œä¼ è¾“å¸¦å®½ä»¥åŠKafka Brokerç«¯çš„ç£ç›˜å ç”¨ã€‚</p><p>åœ¨ç”Ÿäº§è€…ç«¯å¯ç”¨å‹ç¼©æ˜¯å¾ˆè‡ªç„¶çš„æƒ³æ³•ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘è¯´åœ¨Brokerç«¯ä¹Ÿå¯èƒ½è¿›è¡Œå‹ç¼©å‘¢ï¼Ÿå…¶å®å¤§éƒ¨åˆ†æƒ…å†µä¸‹Brokerä»Producerç«¯æ¥æ”¶åˆ°æ¶ˆæ¯åä»…ä»…æ˜¯åŸå°ä¸åŠ¨åœ°ä¿å­˜è€Œä¸ä¼šå¯¹å…¶è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œä½†è¿™é‡Œçš„â€œå¤§éƒ¨åˆ†æƒ…å†µâ€ä¹Ÿæ˜¯è¦æ»¡è¶³ä¸€å®šæ¡ä»¶çš„ã€‚æœ‰ä¸¤ç§ä¾‹å¤–æƒ…å†µå°±å¯èƒ½è®©Brokeré‡æ–°å‹ç¼©æ¶ˆæ¯ã€‚</p><p>æƒ…å†µä¸€ï¼šBrokerç«¯æŒ‡å®šäº†å’ŒProducerç«¯ä¸åŒçš„å‹ç¼©ç®—æ³•ã€‚</p><p>å…ˆçœ‹ä¸€ä¸ªä¾‹å­ã€‚æƒ³è±¡è¿™æ ·ä¸€ä¸ªå¯¹è¯ã€‚</p><p>Producerè¯´ï¼šâ€œæˆ‘è¦ä½¿ç”¨GZIPè¿›è¡Œå‹ç¼©ã€‚â€</p><p>Brokerè¯´ï¼šâ€œä¸å¥½æ„æ€ï¼Œæˆ‘è¿™è¾¹æ¥æ”¶çš„æ¶ˆæ¯å¿…é¡»ä½¿ç”¨Snappyç®—æ³•è¿›è¡Œå‹ç¼©ã€‚â€</p><p>ä½ çœ‹ï¼Œè¿™ç§æƒ…å†µä¸‹Brokeræ¥æ”¶åˆ°GZIPå‹ç¼©æ¶ˆæ¯åï¼Œåªèƒ½è§£å‹ç¼©ç„¶åä½¿ç”¨Snappyé‡æ–°å‹ç¼©ä¸€éã€‚å¦‚æœä½ ç¿»å¼€Kafkaå®˜ç½‘ï¼Œä½ ä¼šå‘ç°Brokerç«¯ä¹Ÿæœ‰ä¸€ä¸ªå‚æ•°å«compression.typeï¼Œå’Œä¸Šé¢é‚£ä¸ªä¾‹å­ä¸­çš„åŒåã€‚ä½†æ˜¯è¿™ä¸ªå‚æ•°çš„é»˜è®¤å€¼æ˜¯producerï¼Œè¿™è¡¨ç¤ºBrokerç«¯ä¼šâ€œå°Šé‡â€Producerç«¯ä½¿ç”¨çš„å‹ç¼©ç®—æ³•ã€‚å¯ä¸€æ—¦ä½ åœ¨Brokerç«¯è®¾ç½®äº†ä¸åŒçš„compression.typeå€¼ï¼Œå°±ä¸€å®šè¦å°å¿ƒäº†ï¼Œå› ä¸ºå¯èƒ½ä¼šå‘ç”Ÿé¢„æ–™ä¹‹å¤–çš„å‹ç¼©/è§£å‹ç¼©æ“ä½œï¼Œé€šå¸¸è¡¨ç°ä¸ºBrokerç«¯CPUä½¿ç”¨ç‡é£™å‡ã€‚</p><p>æƒ…å†µäºŒï¼šBrokerç«¯å‘ç”Ÿäº†æ¶ˆæ¯æ ¼å¼è½¬æ¢ã€‚</p><p>æ‰€è°“çš„æ¶ˆæ¯æ ¼å¼è½¬æ¢ä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹è€ç‰ˆæœ¬çš„æ¶ˆè´¹è€…ç¨‹åºã€‚è¿˜è®°å¾—ä¹‹å‰è¯´è¿‡çš„V1ã€V2ç‰ˆæœ¬å§ï¼Ÿåœ¨ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒKafkaé›†ç¾¤ä¸­åŒæ—¶ä¿å­˜å¤šç§ç‰ˆæœ¬çš„æ¶ˆæ¯æ ¼å¼éå¸¸å¸¸è§ã€‚ä¸ºäº†å…¼å®¹è€ç‰ˆæœ¬çš„æ ¼å¼ï¼ŒBrokerç«¯ä¼šå¯¹æ–°ç‰ˆæœ¬æ¶ˆæ¯æ‰§è¡Œå‘è€ç‰ˆæœ¬æ ¼å¼çš„è½¬æ¢ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šæ¶‰åŠæ¶ˆæ¯çš„è§£å‹ç¼©å’Œé‡æ–°å‹ç¼©ã€‚ä¸€èˆ¬æƒ…å†µä¸‹è¿™ç§æ¶ˆæ¯æ ¼å¼è½¬æ¢å¯¹æ€§èƒ½æ˜¯æœ‰å¾ˆå¤§å½±å“çš„ï¼Œé™¤äº†è¿™é‡Œçš„å‹ç¼©ä¹‹å¤–ï¼Œå®ƒè¿˜è®©Kafkaä¸§å¤±äº†å¼•ä»¥ä¸ºè±ªçš„Zero Copyç‰¹æ€§ã€‚</p><p>æ‰€è°“â€œZero Copyâ€å°±æ˜¯â€œé›¶æ‹·è´â€ï¼Œæˆ‘åœ¨ä¸“æ <a href=\"https://time.geekbang.org/column/article/101107\">ç¬¬6æœŸ</a>æåˆ°è¿‡ï¼Œè¯´çš„æ˜¯å½“æ•°æ®åœ¨ç£ç›˜å’Œç½‘ç»œè¿›è¡Œä¼ è¾“æ—¶é¿å…æ˜‚è´µçš„å†…æ ¸æ€æ•°æ®æ‹·è´ï¼Œä»è€Œå®ç°å¿«é€Ÿçš„æ•°æ®ä¼ è¾“ã€‚å› æ­¤å¦‚æœKafkaäº«å—ä¸åˆ°è¿™ä¸ªç‰¹æ€§çš„è¯ï¼Œæ€§èƒ½å¿…ç„¶æœ‰æ‰€æŸå¤±ï¼Œæ‰€ä»¥å°½é‡ä¿è¯æ¶ˆæ¯æ ¼å¼çš„ç»Ÿä¸€å§ï¼Œè¿™æ ·ä¸ä»…å¯ä»¥é¿å…ä¸å¿…è¦çš„è§£å‹ç¼©/é‡æ–°å‹ç¼©ï¼Œå¯¹æå‡å…¶ä»–æ–¹é¢çš„æ€§èƒ½ä¹Ÿå¤§æœ‰è£¨ç›Šã€‚å¦‚æœæœ‰å…´è¶£ä½ å¯ä»¥æ·±å…¥åœ°äº†è§£ä¸‹Zero Copyçš„åŸç†ã€‚</p><h2>ä½•æ—¶è§£å‹ç¼©ï¼Ÿ</h2><p>æœ‰å‹ç¼©å¿…æœ‰è§£å‹ç¼©ï¼é€šå¸¸æ¥è¯´è§£å‹ç¼©å‘ç”Ÿåœ¨æ¶ˆè´¹è€…ç¨‹åºä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´Producerå‘é€å‹ç¼©æ¶ˆæ¯åˆ°Brokeråï¼ŒBrokerç…§å•å…¨æ”¶å¹¶åŸæ ·ä¿å­˜èµ·æ¥ã€‚å½“Consumerç¨‹åºè¯·æ±‚è¿™éƒ¨åˆ†æ¶ˆæ¯æ—¶ï¼ŒBrokerä¾ç„¶åŸæ ·å‘é€å‡ºå»ï¼Œå½“æ¶ˆæ¯åˆ°è¾¾Consumerç«¯åï¼Œç”±Consumerè‡ªè¡Œè§£å‹ç¼©è¿˜åŸæˆä¹‹å‰çš„æ¶ˆæ¯ã€‚</p><p>é‚£ä¹ˆç°åœ¨é—®é¢˜æ¥äº†ï¼ŒConsumeræ€ä¹ˆçŸ¥é“è¿™äº›æ¶ˆæ¯æ˜¯ç”¨ä½•ç§å‹ç¼©ç®—æ³•å‹ç¼©çš„å‘¢ï¼Ÿå…¶å®ç­”æ¡ˆå°±åœ¨æ¶ˆæ¯ä¸­ã€‚Kafkaä¼šå°†å¯ç”¨äº†å“ªç§å‹ç¼©ç®—æ³•å°è£…è¿›æ¶ˆæ¯é›†åˆä¸­ï¼Œè¿™æ ·å½“Consumerè¯»å–åˆ°æ¶ˆæ¯é›†åˆæ—¶ï¼Œå®ƒè‡ªç„¶å°±çŸ¥é“äº†è¿™äº›æ¶ˆæ¯ä½¿ç”¨çš„æ˜¯å“ªç§å‹ç¼©ç®—æ³•ã€‚å¦‚æœç”¨ä¸€å¥è¯æ€»ç»“ä¸€ä¸‹å‹ç¼©å’Œè§£å‹ç¼©ï¼Œé‚£ä¹ˆæˆ‘å¸Œæœ›ä½ è®°ä½è¿™å¥è¯ï¼š<strong>Producerç«¯å‹ç¼©ã€Brokerç«¯ä¿æŒã€Consumerç«¯è§£å‹ç¼©ã€‚</strong></p><p>é™¤äº†åœ¨Consumerç«¯è§£å‹ç¼©ï¼ŒBrokerç«¯ä¹Ÿä¼šè¿›è¡Œè§£å‹ç¼©ã€‚æ³¨æ„äº†ï¼Œè¿™å’Œå‰é¢æåˆ°æ¶ˆæ¯æ ¼å¼è½¬æ¢æ—¶å‘ç”Ÿçš„è§£å‹ç¼©æ˜¯ä¸åŒçš„åœºæ™¯ã€‚æ¯ä¸ªå‹ç¼©è¿‡çš„æ¶ˆæ¯é›†åˆåœ¨Brokerç«¯å†™å…¥æ—¶éƒ½è¦å‘ç”Ÿè§£å‹ç¼©æ“ä½œï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å¯¹æ¶ˆæ¯æ‰§è¡Œå„ç§éªŒè¯ã€‚æˆ‘ä»¬å¿…é¡»æ‰¿è®¤è¿™ç§è§£å‹ç¼©å¯¹Brokerç«¯æ€§èƒ½æ˜¯æœ‰ä¸€å®šå½±å“çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹CPUçš„ä½¿ç”¨ç‡è€Œè¨€ã€‚</p><p>äº‹å®ä¸Šï¼Œæœ€è¿‘å›½å†…äº¬ä¸œçš„å°ä¼™ä¼´ä»¬åˆšåˆšå‘ç¤¾åŒºæå‡ºäº†ä¸€ä¸ªbugfixï¼Œå»ºè®®å»æ‰å› ä¸ºåšæ¶ˆæ¯æ ¡éªŒè€Œå¼•å…¥çš„è§£å‹ç¼©ã€‚æ®ä»–ä»¬ç§°ï¼Œå»æ‰äº†è§£å‹ç¼©ä¹‹åï¼ŒBrokerç«¯çš„CPUä½¿ç”¨ç‡è‡³å°‘é™ä½äº†50%ã€‚ä¸è¿‡æœ‰äº›é—æ†¾çš„æ˜¯ï¼Œç›®å‰ç¤¾åŒºå¹¶æœªé‡‡çº³è¿™ä¸ªå»ºè®®ï¼ŒåŸå› å°±æ˜¯è¿™ç§æ¶ˆæ¯æ ¡éªŒæ˜¯éå¸¸é‡è¦çš„ï¼Œä¸å¯ç›²ç›®å»ä¹‹ã€‚æ¯•ç«Ÿå…ˆæŠŠäº‹æƒ…åšå¯¹æ˜¯æœ€é‡è¦çš„ï¼Œåœ¨åšå¯¹çš„åŸºç¡€ä¸Šï¼Œå†è€ƒè™‘æŠŠäº‹æƒ…åšå¥½åšå¿«ã€‚é’ˆå¯¹è¿™ä¸ªä½¿ç”¨åœºæ™¯ï¼Œä½ ä¹Ÿå¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œæ˜¯å¦æœ‰ä¸€ä¸ªä¸¤å…¨å…¶ç¾çš„æ–¹æ¡ˆï¼Œæ—¢èƒ½é¿å…æ¶ˆæ¯è§£å‹ç¼©ä¹Ÿèƒ½å¯¹æ¶ˆæ¯æ‰§è¡Œæ ¡éªŒã€‚</p><h2><strong>å„ç§å‹ç¼©ç®—æ³•å¯¹æ¯”</strong></h2><p>é‚£ä¹ˆæˆ‘ä»¬æ¥è°ˆè°ˆå‹ç¼©ç®—æ³•ã€‚è¿™å¯æ˜¯é‡å¤´æˆï¼ä¹‹å‰è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦æ¯”è¾ƒä¸€ä¸‹å„ä¸ªå‹ç¼©ç®—æ³•çš„ä¼˜åŠ£ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½æœ‰é’ˆå¯¹æ€§åœ°é…ç½®é€‚åˆæˆ‘ä»¬ä¸šåŠ¡çš„å‹ç¼©ç­–ç•¥ã€‚</p><p>åœ¨Kafka 2.1.0ç‰ˆæœ¬ä¹‹å‰ï¼ŒKafkaæ”¯æŒ3ç§å‹ç¼©ç®—æ³•ï¼šGZIPã€Snappyå’ŒLZ4ã€‚ä»2.1.0å¼€å§‹ï¼ŒKafkaæ­£å¼æ”¯æŒZstandardç®—æ³•ï¼ˆç®€å†™ä¸ºzstdï¼‰ã€‚å®ƒæ˜¯Facebookå¼€æºçš„ä¸€ä¸ªå‹ç¼©ç®—æ³•ï¼Œèƒ½å¤Ÿæä¾›è¶…é«˜çš„å‹ç¼©æ¯”ï¼ˆcompression ratioï¼‰ã€‚</p><p>å¯¹äº†ï¼Œçœ‹ä¸€ä¸ªå‹ç¼©ç®—æ³•çš„ä¼˜åŠ£ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„æŒ‡æ ‡ï¼šä¸€ä¸ªæŒ‡æ ‡æ˜¯å‹ç¼©æ¯”ï¼ŒåŸå…ˆå 100ä»½ç©ºé—´çš„ä¸œè¥¿ç»å‹ç¼©ä¹‹åå˜æˆäº†å 20ä»½ç©ºé—´ï¼Œé‚£ä¹ˆå‹ç¼©æ¯”å°±æ˜¯5ï¼Œæ˜¾ç„¶å‹ç¼©æ¯”è¶Šé«˜è¶Šå¥½ï¼›å¦ä¸€ä¸ªæŒ‡æ ‡å°±æ˜¯å‹ç¼©/è§£å‹ç¼©ååé‡ï¼Œæ¯”å¦‚æ¯ç§’èƒ½å‹ç¼©æˆ–è§£å‹ç¼©å¤šå°‘MBçš„æ•°æ®ã€‚åŒæ ·åœ°ï¼Œååé‡ä¹Ÿæ˜¯è¶Šé«˜è¶Šå¥½ã€‚</p><p>ä¸‹é¢è¿™å¼ è¡¨æ˜¯Facebook Zstandardå®˜ç½‘æä¾›çš„ä¸€ä»½å‹ç¼©ç®—æ³•benchmarkæ¯”è¾ƒç»“æœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/cf/68/cfe20a2cdcb1ae3b304777f7be928068.png?wh=411*346\" alt=\"\"></p><p>ä»è¡¨ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°zstdç®—æ³•æœ‰ç€æœ€é«˜çš„å‹ç¼©æ¯”ï¼Œè€Œåœ¨ååé‡ä¸Šçš„è¡¨ç°åªèƒ½è¯´ä¸­è§„ä¸­çŸ©ã€‚åè§‚LZ4ç®—æ³•ï¼Œå®ƒåœ¨ååé‡æ–¹é¢åˆ™æ˜¯æ¯«æ— ç–‘é—®çš„æ‰§ç‰›è€³è€…ã€‚å½“ç„¶å¯¹äºè¡¨æ ¼ä¸­æ•°æ®çš„æƒå¨æ€§æˆ‘ä¸åšè¿‡å¤šè§£è¯»ï¼Œåªæƒ³ç”¨å®ƒæ¥è¯´æ˜ä¸€ä¸‹å½“å‰å„ç§å‹ç¼©ç®—æ³•çš„å¤§è‡´è¡¨ç°ã€‚</p><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼ŒGZIPã€Snappyã€LZ4ç”šè‡³æ˜¯zstdçš„è¡¨ç°å„æœ‰åƒç§‹ã€‚ä½†å¯¹äºKafkaè€Œè¨€ï¼Œå®ƒä»¬çš„æ€§èƒ½æµ‹è¯•ç»“æœå´å‡ºå¥‡å¾—ä¸€è‡´ï¼Œå³åœ¨ååé‡æ–¹é¢ï¼šLZ4 &gt; Snappy &gt; zstdå’ŒGZIPï¼›è€Œåœ¨å‹ç¼©æ¯”æ–¹é¢ï¼Œzstd &gt; LZ4 &gt; GZIP &gt; Snappyã€‚å…·ä½“åˆ°ç‰©ç†èµ„æºï¼Œä½¿ç”¨Snappyç®—æ³•å ç”¨çš„ç½‘ç»œå¸¦å®½æœ€å¤šï¼Œzstdæœ€å°‘ï¼Œè¿™æ˜¯åˆç†çš„ï¼Œæ¯•ç«Ÿzstdå°±æ˜¯è¦æä¾›è¶…é«˜çš„å‹ç¼©æ¯”ï¼›åœ¨CPUä½¿ç”¨ç‡æ–¹é¢ï¼Œå„ä¸ªç®—æ³•è¡¨ç°å¾—å·®ä¸å¤šï¼Œåªæ˜¯åœ¨å‹ç¼©æ—¶Snappyç®—æ³•ä½¿ç”¨çš„CPUè¾ƒå¤šä¸€äº›ï¼Œè€Œåœ¨è§£å‹ç¼©æ—¶GZIPç®—æ³•åˆ™å¯èƒ½ä½¿ç”¨æ›´å¤šçš„CPUã€‚</p><h2><strong>æœ€ä½³å®è·µ</strong></h2><p>äº†è§£äº†è¿™äº›ç®—æ³•å¯¹æ¯”ï¼Œæˆ‘ä»¬å°±èƒ½æ ¹æ®è‡ªèº«çš„å®é™…æƒ…å†µæœ‰é’ˆå¯¹æ€§åœ°å¯ç”¨åˆé€‚çš„å‹ç¼©ç®—æ³•ã€‚</p><p>é¦–å…ˆæ¥è¯´å‹ç¼©ã€‚ä½•æ—¶å¯ç”¨å‹ç¼©æ˜¯æ¯”è¾ƒåˆé€‚çš„æ—¶æœºå‘¢ï¼Ÿ</p><p>ä½ ç°åœ¨å·²ç»çŸ¥é“Producerç«¯å®Œæˆçš„å‹ç¼©ï¼Œé‚£ä¹ˆå¯ç”¨å‹ç¼©çš„ä¸€ä¸ªæ¡ä»¶å°±æ˜¯Producerç¨‹åºè¿è¡Œæœºå™¨ä¸Šçš„CPUèµ„æºè¦å¾ˆå……è¶³ã€‚å¦‚æœProducerè¿è¡Œæœºå™¨æœ¬èº«CPUå·²ç»æ¶ˆè€—æ®†å°½äº†ï¼Œé‚£ä¹ˆå¯ç”¨æ¶ˆæ¯å‹ç¼©æ— ç–‘æ˜¯é›ªä¸ŠåŠ éœœï¼Œåªä¼šé€‚å¾—å…¶åã€‚</p><p>é™¤äº†CPUèµ„æºå……è¶³è¿™ä¸€æ¡ä»¶ï¼Œå¦‚æœä½ çš„ç¯å¢ƒä¸­å¸¦å®½èµ„æºæœ‰é™ï¼Œé‚£ä¹ˆæˆ‘ä¹Ÿå»ºè®®ä½ å¼€å¯å‹ç¼©ã€‚äº‹å®ä¸Šæˆ‘è§è¿‡çš„å¾ˆå¤šKafkaç”Ÿäº§ç¯å¢ƒéƒ½é­é‡è¿‡å¸¦å®½è¢«æ‰“æ»¡çš„æƒ…å†µã€‚è¿™å¹´å¤´ï¼Œå¸¦å®½å¯æ˜¯æ¯”CPUå’Œå†…å­˜è¿˜è¦çè´µçš„ç¨€ç¼ºèµ„æºï¼Œæ¯•ç«Ÿä¸‡å…†ç½‘ç»œè¿˜ä¸æ˜¯æ™®é€šå…¬å¸çš„æ ‡é…ï¼Œå› æ­¤åƒå…†ç½‘ç»œä¸­Kafkaé›†ç¾¤å¸¦å®½èµ„æºè€—å°½è¿™ä»¶äº‹æƒ…å°±ç‰¹åˆ«å®¹æ˜“å‡ºç°ã€‚å¦‚æœä½ çš„å®¢æˆ·ç«¯æœºå™¨CPUèµ„æºæœ‰å¾ˆå¤šå¯Œä½™ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ å¼€å¯zstdå‹ç¼©ï¼Œè¿™æ ·èƒ½æå¤§åœ°èŠ‚çœç½‘ç»œèµ„æºæ¶ˆè€—ã€‚</p><p>å…¶æ¬¡è¯´è¯´è§£å‹ç¼©ã€‚å…¶å®ä¹Ÿæ²¡ä»€ä¹ˆå¯è¯´çš„ã€‚ä¸€æ—¦å¯ç”¨å‹ç¼©ï¼Œè§£å‹ç¼©æ˜¯ä¸å¯é¿å…çš„äº‹æƒ…ã€‚è¿™é‡Œåªæƒ³å¼ºè°ƒä¸€ç‚¹ï¼šæˆ‘ä»¬å¯¹ä¸å¯æŠ—æ‹’çš„è§£å‹ç¼©æ— èƒ½ä¸ºåŠ›ï¼Œä½†è‡³å°‘èƒ½è§„é¿æ‰é‚£äº›æ„æ–™ä¹‹å¤–çš„è§£å‹ç¼©ã€‚å°±åƒæˆ‘å‰é¢è¯´çš„ï¼Œå› ä¸ºè¦å…¼å®¹è€ç‰ˆæœ¬è€Œå¼•å…¥çš„è§£å‹ç¼©æ“ä½œå°±å±äºè¿™ç±»ã€‚æœ‰æ¡ä»¶çš„è¯å°½é‡ä¿è¯ä¸è¦å‡ºç°æ¶ˆæ¯æ ¼å¼è½¬æ¢çš„æƒ…å†µã€‚</p><h2>å°ç»“</h2><p>æ€»ç»“ä¸€ä¸‹ä»Šå¤©åˆ†äº«çš„å†…å®¹ï¼šæˆ‘ä»¬ä¸»è¦è®¨è®ºäº†Kafkaå‹ç¼©çš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬Kafkaæ˜¯å¦‚ä½•å¯¹æ¶ˆæ¯è¿›è¡Œå‹ç¼©çš„ã€ä½•æ—¶è¿›è¡Œå‹ç¼©åŠè§£å‹ç¼©ï¼Œè¿˜å¯¹æ¯”äº†ç›®å‰Kafkaæ”¯æŒçš„å‡ ä¸ªå‹ç¼©ç®—æ³•ï¼Œæœ€åæˆ‘ç»™å‡ºäº†å·¥ç¨‹åŒ–çš„æœ€ä½³å®è·µã€‚åˆ†äº«è¿™ä¹ˆå¤šå†…å®¹ï¼Œæˆ‘å°±åªæœ‰ä¸€ä¸ªç›®çš„ï¼šå°±æ˜¯å¸Œæœ›ä½ èƒ½æ ¹æ®è‡ªèº«çš„å®é™…æƒ…å†µæ°å½“åœ°é€‰æ‹©åˆé€‚çš„Kafkaå‹ç¼©ç®—æ³•ï¼Œä»¥æ±‚å®ç°æœ€å¤§çš„èµ„æºåˆ©ç”¨ç‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ab/df/ab1578f5b970c08b9ec524c0304bbedf.jpg?wh=2069*2560\" alt=\"\"></p><h2>å¼€æ”¾è®¨è®º</h2><p>æœ€åç»™å‡ºä¸€é“ä½œä¸šé¢˜ï¼Œè¯·èŠ±æ—¶é—´æ€è€ƒä¸€ä¸‹ï¼šå‰é¢æˆ‘ä»¬æåˆ°äº†Brokerè¦å¯¹å‹ç¼©æ¶ˆæ¯é›†åˆæ‰§è¡Œè§£å‹ç¼©æ“ä½œï¼Œç„¶åé€æ¡å¯¹æ¶ˆæ¯è¿›è¡Œæ ¡éªŒï¼Œæœ‰äººæå‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆï¼šæŠŠè¿™ç§æ¶ˆæ¯æ ¡éªŒç§»åˆ°Producerç«¯æ¥åšï¼ŒBrokerç›´æ¥è¯»å–æ ¡éªŒç»“æœå³å¯ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…åœ¨Brokerç«¯æ‰§è¡Œè§£å‹ç¼©æ“ä½œã€‚ä½ è®¤åŒè¿™ç§æ–¹æ¡ˆå—ï¼Ÿ</p><p>æ¬¢è¿å†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":107296,"user_name":"èƒ¡å¤•","can_delete":false,"product_type":"c1","uid":1288090,"ip_address":"","ucode":"5709A689B6683B","user_header":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","comment_is_top":true,"comment_ctime":1561512488,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"9.2233724893879009e+18","product_id":100029201,"comment_content":"åˆšåˆšçœ‹åˆ°4å¤©å‰äº¬ä¸œæçš„é‚£ä¸ªjiraå·²ç»ä¿®å¤äº†ï¼Œçœ‹æ¥è§„é¿äº†brokerç«¯ä¸ºæ‰§è¡Œæ ¡éªŒè€Œåšçš„è§£å‹ç¼©æ“ä½œï¼Œä»£ç ä¹Ÿmergeè¿›äº†2.4ç‰ˆæœ¬ã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥çœ‹ä¸€ä¸‹ï¼šhttps:&#47;&#47;issues.apache.org&#47;jira&#47;browse&#47;KAFKA-8106","like_count":106,"discussions":[{"author":{"id":1130806,"avatar":"https://static001.geekbang.org/account/avatar/00/11/41/36/8ad36e50.jpg","nickname":"èººåœ¨å®—ä»‹æ‰‹å¿ƒé‡Œçš„æ³¢å¦","note":"","ucode":"088D242CEAA8FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3926,"discussion_content":"https://github.com/apache/kafka/pull/6699 â€œThis function will not read data from DataInput to ByteBuffer which need newly creating .This will reduce the allocation and copying of ByteBuffer when logValidator do validation .This will reduces GC frequency. We offer a simple read function to read data from DataInput whithout create ByteBuffer.Of course this opertion can not avoid deconmpression to data.â€å¹¶æ²¡æœ‰é¿å…è§£å‹ç¼©ï¼Œåªæ˜¯é¿å…äº†æ–°çš„å†…å­˜åˆ†é…ã€‚","likes_number":48,"is_delete":false,"is_hidden":false,"ctime":1564984900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1130806,"avatar":"https://static001.geekbang.org/account/avatar/00/11/41/36/8ad36e50.jpg","nickname":"èººåœ¨å®—ä»‹æ‰‹å¿ƒé‡Œçš„æ³¢å¦","note":"","ucode":"088D242CEAA8FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265207,"discussion_content":"èµä¸€äº›è®©è€å¸ˆå°´å°¬çš„è¯„è®º","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1589379763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3926,"ip_address":""},"score":265207,"extra":""},{"author":{"id":1357603,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b7/23/ea83d6eb.jpg","nickname":"-.-","note":"","ucode":"3CDC606BDFDD80","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1130806,"avatar":"https://static001.geekbang.org/account/avatar/00/11/41/36/8ad36e50.jpg","nickname":"èººåœ¨å®—ä»‹æ‰‹å¿ƒé‡Œçš„æ³¢å¦","note":"","ucode":"088D242CEAA8FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411154,"discussion_content":"çœ‹åˆ°äº†å†…éƒ¨äº¬ä¸œåŒäº‹çš„åˆ†äº«ï¼Œåº”è¯¥æ˜¯åœ¨éå†çš„é€»è¾‘é‡Œé¢åšä¸€äº›ç»†èŠ‚ä¼˜åŒ–ï¼Œå¤„ç†é˜¶æ®µæ¯æ¬¡åœ¨æ•°æ®æµä¹‹å¤–æ–°ç”³è¯·äº†ä¸€å—byteBufferçš„å†…å­˜ï¼Œæ‰€ä»¥é‡‡ç”¨æ•°æ®æµé‡Œæ‹¿å‡ºå»keyå’Œvalueä¹‹å¤–çš„æ•°æ®ï¼Œå‡å°‘å¤šä½™çš„å†…å­˜ç”³è¯·ï¼Œè¾¾åˆ°ä¸€å±‚ä¼˜åŒ–ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1635859076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3926,"ip_address":""},"score":411154,"extra":""},{"author":{"id":2052656,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/52/30/f7cdca9c.jpg","nickname":"æ‚¨çš„å¥½å‹å·²ä¸å­˜åœ¨","note":"","ucode":"0D67353B07E9AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542204,"discussion_content":"å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640681429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":265207,"ip_address":""},"score":542204,"extra":""}]},{"author":{"id":1054958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","nickname":"ABC","note":"","ucode":"7501AD9C0C4A70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556295,"discussion_content":"æœ€è¿‘æœ‰ç©ºçœ‹çœ‹æ–°ç‰ˆKafka3.xæœ‰æ²¡æœ‰ä¿®å¤brokerè§£å‹è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647303278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108225,"user_name":"å¸¸è¶…","can_delete":false,"product_type":"c1","uid":1138665,"ip_address":"","ucode":"4AE7743B4ADF20","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/e9/95ef44f3.jpg","comment_is_top":false,"comment_ctime":1561701145,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"465418169113","product_id":100029201,"comment_content":"æ–‡ä¸­å¯¹äºæ¶ˆæ¯ç»“æ„çš„æè¿°ï¼Œç¡®å®å¼•èµ·äº†ä¸€äº›æ··ä¹±ï¼Œä¸‹é¢è¯•å›¾æ•´ç†ä¸€ä¸‹ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ã€‚<br>æ¶ˆæ¯ï¼ˆv1å«messageï¼Œv2å«recordï¼‰æ˜¯åˆ†æ‰¹æ¬¡ï¼ˆbatchï¼‰è¯»å†™çš„ï¼Œbatchæ˜¯kafkaè¯»å†™ï¼ˆç½‘ç»œä¼ è¾“å’Œæ–‡ä»¶è¯»å†™ï¼‰çš„åŸºæœ¬å•ä½ï¼Œä¸åŒç‰ˆæœ¬ï¼Œå¯¹ç›¸åŒï¼ˆæˆ–è€…å«ç›¸ä¼¼ï¼‰çš„æ¦‚å¿µï¼Œå«æ³•ä¸ä¸€æ ·ã€‚<br>v1ï¼ˆkafka 0.11.0ä¹‹å‰ï¼‰:message set, message<br>v2ï¼ˆkafka 0.11.0ä»¥åï¼‰:record batch,record<br>å…¶ä¸­record batchå¯¹è‹±è¯­message setï¼Œrecordå¯¹åº”äºmessageã€‚<br>ä¸€ä¸ªrecord batchï¼ˆmessage setï¼‰å¯ä»¥åŒ…å«å¤šä¸ªrecordï¼ˆmessageï¼‰ã€‚<br><br>å¯¹äºæ¯ä¸ªç‰ˆæœ¬çš„æ¶ˆæ¯ç»“æ„çš„ç»†èŠ‚ï¼Œå¯ä»¥å‚è€ƒkafkaå®˜æ–¹æ–‡æ¡£çš„5.3 Message Format ç« ï¼Œé‡Œé¢å¯¹æ¶ˆæ¯ç»“æ„åˆ—å¾—éå¸¸æ¸…æ¥šã€‚<br>","like_count":109,"discussions":[{"author":{"id":2143908,"avatar":"https://static001.geekbang.org/account/avatar/00/20/b6/a4/26f03a69.jpg","nickname":"æœ‰å¯ä¸ä½•","note":"","ucode":"96FB6815502800","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555338,"discussion_content":"çš„ç¡®å¾ˆæ··ä¹±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646876443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193755,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","nickname":"æ‹¿ç¬”å°æ˜Ÿ","note":"","ucode":"D3D8F6A959710D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530696,"discussion_content":"ä½œè€…åº”è¯¥æŠŠä»–è®²çš„kafka Javaå®¢æˆ·ç«¯æºç ç‰ˆæœ¬æå‰è¯´å¥½ï¼Œä¸ç„¶ä¼šäº§ç”Ÿä¸å¿…è¦çš„æ­§ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637128171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155275,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","nickname":"å¼ ä¸‰ä¸°","note":"","ucode":"3A6215A40B3B21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312902,"discussion_content":"å®Œç¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602850765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1591647,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erIOKPCqh4nsBibVmpgVFFBYTANQEKRjSEx0HFompr4mJnG2kHib6Briav58ROTbtQQehhYfzAN2sGbg/132","nickname":"I0r3k","note":"","ucode":"1DA9442061E539","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306472,"discussion_content":"çš„ç¡®æ··ä¹±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600283392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302518,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598943999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1190060,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/ac/37a2a265.jpg","nickname":"å¼±æ°´ç©¿äº‘å¤©","note":"","ucode":"80DC528A23ED7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281074,"discussion_content":"ç‰›æ‰¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591668207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107149,"user_name":"Geek_8441fd","can_delete":false,"product_type":"c1","uid":1564668,"ip_address":"","ucode":"A557F31D5E61C2","user_header":"","comment_is_top":false,"comment_ctime":1561468167,"is_pvip":false,"replies":[{"id":"38823","content":"å—¯å—¯ï¼ŒæŒºå¥½çš„ã€‚æˆ‘è‡ªå·±ä¹Ÿå­¦åˆ°äº†ä¸€äº›ã€‚å¦å¤–æ ¡éªŒä¸ä»…ä»…æ˜¯CRCæ ¡éªŒï¼Œè¿˜æœ‰æ¶ˆæ¯çº§åˆ«çš„æ£€æŸ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561514248,"ip_address":"","comment_id":107149,"utype":1}],"discussion_count":5,"race_medal":0,"score":"229194734855","product_id":100029201,"comment_content":"brokerç«¯æ ¡éªŒå¯ä»¥åˆ†ä¸¤æ­¥èµ°ã€‚<br>ç¬¬1æ­¥ï¼Œmessage set å±‚é¢ï¼Œå¢åŠ ä¸€ä¸ª crcï¼Œè¿™æ ·å¯ä»¥ä¸ç”¨è§£å‹ç¼©ï¼Œç›´æ¥æ ¡éªŒå‹ç¼©åçš„æ•°æ®ã€‚<br>å¦‚æœæ ¡éªŒä¸æˆåŠŸï¼Œè¯´æ˜message set ä¸­æœ‰æŸåçš„messageï¼›<br>è¿™æ—¶ï¼Œå†åšè§£å‹æ“ä½œï¼ŒæŒ¨ä¸ªæ ¡éªŒmessageï¼Œæ‰¾å‡ºæŸåçš„é‚£ä¸€ä¸ªã€‚<br><br>è¿™æ ·çš„è¯ï¼Œç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ç”¨åšè§£å‹æ“ä½œçš„ï¼›åªæœ‰åœ¨ç¡®å®å‘ç”Ÿé”™è¯¯æ—¶ï¼Œæ‰éœ€è¦è§£å‹ã€‚<br>è¯·æŒ‡æ­£ã€‚","like_count":54,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455387,"discussion_content":"å—¯å—¯ï¼ŒæŒºå¥½çš„ã€‚æˆ‘è‡ªå·±ä¹Ÿå­¦åˆ°äº†ä¸€äº›ã€‚å¦å¤–æ ¡éªŒä¸ä»…ä»…æ˜¯CRCæ ¡éªŒï¼Œè¿˜æœ‰æ¶ˆæ¯çº§åˆ«çš„æ£€æŸ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561514248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155275,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","nickname":"å¼ ä¸‰ä¸°","note":"","ucode":"3A6215A40B3B21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390754,"discussion_content":"ä½ è¯´çš„åº”è¯¥æ˜¯v1ç‰ˆæœ¬çš„æ¶ˆæ¯ï¼Œæ¶ˆæ¯é›†åˆå±‚é¢åšçš„crcï¼Œå› ä¸ºv1ç‰ˆæœ¬å‹ç¼©çš„åªæ˜¯æ¶ˆæ¯ï¼ŒæŠŠå‹ç¼©åçš„æ¶ˆæ¯æ”¾è¿›æ¶ˆæ¯é›†åˆçš„æ¶ˆæ¯ä½“å­—æ®µä¸­ã€‚\nå¦‚æœæ˜¯v2ç‰ˆæœ¬ï¼Œé‚£å°±ä¸€å®šéœ€è¦è§£å‹äº†ï¼Œå› ä¸ºv2æ˜¯ä»¥æ¶ˆæ¯é›†åˆä¸ºå•ä½è¿›è¡Œå‹ç¼©çš„ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1630027291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2822014,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/0f/7e/82b4e962.jpg","nickname":"clious","note":"","ucode":"6D6A6792E801A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559402,"discussion_content":"å…ˆæ··æ£€ï¼Œå†å•æ£€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648736385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1051563,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0b/ab/0e2857e5.jpg","nickname":"Codingå°å…ˆ","note":"","ucode":"965B1CC757E026","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328997,"discussion_content":"å¯¹çš„ æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œæ•´ä¸ªè¿›è¡Œæ£€éªŒï¼Œå°±ä¸ç”¨è§£å‹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606295227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49189,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573562932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106850,"user_name":"ä½ å¥½æ—…è¡Œè€…","can_delete":false,"product_type":"c1","uid":1154101,"ip_address":"","ucode":"5C72A428DC28F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","comment_is_top":false,"comment_ctime":1561398994,"is_pvip":false,"discussion_count":12,"race_medal":0,"score":"186244992722","product_id":100029201,"comment_content":"ä¸è¡Œå§ï¼Œæ ¡éªŒæ“ä½œåº”è¯¥ä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢åœ¨ç½‘ç»œä¼ è¾“çš„è¿‡ç¨‹ä¸­å‡ºç°æ•°æ®ä¸¢å¤±çš„æƒ…å†µï¼Œåœ¨Producerç«¯åšå®Œæ ¡éªŒä¹‹åå¦‚æœåœ¨ä¼ è¾“çš„æ—¶å€™å‡ºç°äº†é”™è¯¯ï¼Œé‚£è¿™ä¸ªæ ¡éªŒå°±æ²¡æœ‰æ„ä¹‰äº†ã€‚<br>æˆ‘æœ‰ä¸€ä¸ªé—®é¢˜æƒ³è¯·æ•™è€å¸ˆï¼Œå¦‚æœæ¯æ¬¡ä¼ åˆ°Brokerçš„æ¶ˆæ¯éƒ½è¦åšä¸€æ¬¡æ ¡éªŒï¼Œé‚£æ˜¯ä¸æ˜¯éƒ½è¦æŠŠæ¶ˆæ¯ä»å†…æ ¸æ€æ‹·è´åˆ°ç”¨æˆ·æ€åšæ ¡éªŒï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯é‚£é›¶æ‹·è´æœºåˆ¶ä¸æ˜¯å°±æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°äº†ï¼Ÿ","like_count":43,"discussions":[{"author":{"id":1333607,"avatar":"https://static001.geekbang.org/account/avatar/00/14/59/67/f4ba1da4.jpg","nickname":"Hello world","note":"","ucode":"4D2EF3034571B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯é›¶æ‹·è´æ˜¯kafkaåœ¨å°†è‡ªå·±å­˜å‚¨åœ¨ç£ç›˜é‡Œçš„æ•°æ®è¯»å–å‡ºæ¥å‘é€ç»™consumerï¼Œè€Œåšæ¶ˆæ¯æ ¡éªŒæ˜¯brokerç«¯æ¥å—åˆ°æ¶ˆæ¯å°±è§£å‹ç¼©è¿›è¡Œæ ¡éªŒï¼Œè¿™å’Œé›¶æ‹·è´ä¸å†²çª","likes_number":17,"is_delete":false,"is_hidden":false,"ctime":1561454221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1068927,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4f/7f/5dc11380.jpg","nickname":"è‹å¿—è¾‰","note":"","ucode":"39B25CE21C04EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1333607,"avatar":"https://static001.geekbang.org/account/avatar/00/14/59/67/f4ba1da4.jpg","nickname":"Hello world","note":"","ucode":"4D2EF3034571B7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8342,"discussion_content":"å¯¹çš„ï¼Œæˆ‘ä¹Ÿæ„Ÿè§‰è¿™å’Œé›¶æ‹·è´æ²¡æœ‰å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567932888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":335,"ip_address":""},"score":8342,"extra":""},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1333607,"avatar":"https://static001.geekbang.org/account/avatar/00/14/59/67/f4ba1da4.jpg","nickname":"Hello world","note":"","ucode":"4D2EF3034571B7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302519,"discussion_content":"æœ‰æ²¡æœ‰å…³ç³»æ˜¯çœ‹æ¶ˆæ¯æ˜¯æ˜¯å“ªé‡Œè¿›è¡Œæ ¡éªŒçš„ï¼Œå¦‚æœæ˜¯åœ¨ç”¨æˆ·æ€ï¼ŒåŠ¿å¿…æœ‰å†…æ ¸æ€å’Œç”¨æˆ·æ€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598944256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":335,"ip_address":""},"score":302519,"extra":""},{"author":{"id":2706844,"avatar":"https://static001.geekbang.org/account/avatar/00/29/4d/9c/ae441524.jpg","nickname":"wupeng","note":"","ucode":"0AC0A3C97142D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":585663,"discussion_content":"è¿™é‡Œåº”è¯¥æ˜¯ æ˜¯å¦copyåˆ°ç”¨æˆ·å†…å­˜ä¸­å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661755009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302519,"ip_address":"åŒ—äº¬"},"score":585663,"extra":""}]},{"author":{"id":1132785,"avatar":"https://static001.geekbang.org/account/avatar/00/11/48/f1/93817e0f.jpg","nickname":"å¾®æ˜Ÿ","note":"","ucode":"D41E7EB64D64F9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3104,"discussion_content":"å®ç°ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•ˆéªŒé—®é¢˜ï¼Œå¯ä»¥æ”¾åˆ°ç½‘ç»œå±‚å»å®ç°ï¼Œè¿™æ ·æœ¯ä¸šæœ‰ä¸“æ”»ï¼Œæ•ˆç‡ä¹Ÿé«˜","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1564188622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"æƒ˜ é—»","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338830,"discussion_content":"mark,æˆ‘ä¹Ÿè§‰å¾—è€å¸ˆè¿™é‡Œè¯´çš„å‰åæ–‡å†²çª.å‰é¢è¯´æ¶ˆæ¯æ ¼å¼ä¸ä¸€è‡´ä¼šå¯¼è‡´è§£å‹ç¼©å†å‹ç¼©,ä¼šå¤±å»é›¶æ‹·è´çš„ç‰¹æ€§.åé¢åˆè¯´ä¸ç®¡æ¶ˆæ¯æ ¼å¼ä¸€ä¸ä¸€è‡´éƒ½ä¼šè§£å‹ç¼©è¿›è¡Œæ ¡éªŒ.å¯¹ç…§å‰é¢æ¥çœ‹,è¿™é‡Œä¼¼ä¹ä¹Ÿæ˜¯ä¼šä¸§å°¸é›¶æ‹·è´çš„æ€§è´¨.","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1609396280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2015446,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKXf8W8e1yfnpX27ofJibVHhicicKvWeMxvQGgd72tfMm00e9u58EKD6TRFSGuTf7I7147GftmT1qFlg/132","nickname":"lecram","note":"","ucode":"B9409F53E182B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"æƒ˜ é—»","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364156,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼š1. brokeræ‹¿åˆ°æ•°æ®åï¼Œä¼šæŠŠæ¶ˆæ¯é›†åˆå†™å…¥åˆ°ç£ç›˜é‡Œé¢ï¼Œå†™å…¥å‰è¿›è¡Œäº†æ¶ˆæ¯é›†åˆè§£å‹ç¼©æ ¡éªŒï¼›è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ— è®ºæ˜¯å¦è¿›è¡Œäº†è§£å‹ç¼©ï¼Œæ¶ˆæ¯é›†åˆä¸€å®šæ˜¯ä»ç”¨æˆ·æ€->å†…æ ¸æ€ï¼Œæœ¬æ¥å°±ç”¨ä¸ä¸Šé›¶æ‹·è´ï¼Œæ‰€ä»¥å°±ä¸å­˜åœ¨ä¸§å¤±é›¶æ‹·è´è¿™ä¸€è¯´æ³•ï¼› 2. å½“æ¶ˆè´¹è€…æ¥å–æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„æ¶ˆæ¯é›†åˆåŸæœ¬å­˜å‚¨åœ¨ç£ç›˜ä¸­ï¼Œé¦–å…ˆä¼šè¢«æ“ä½œç³»ç»ŸåŠ è½½åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªæ—¶å€™ä¼šè¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœæ¶ˆæ¯æ ¼å¼å’Œæ¶ˆè´¹è€…çš„ä¸ä¸€è‡´ã€æˆ–è€…å‹ç¼©ç®—æ³•å’Œæ¶ˆè´¹è€…çš„ä¸ä¸€è‡´ï¼Œé‚£æ¶ˆæ¯é›†åˆå°±éœ€è¦è¢«åŠ è½½åˆ°ç”¨æˆ·æ€ï¼Œè¿›è¡Œæ ¼å¼è½¬åŒ–æˆ–è€…å‹ç¼©ç®—æ³•è½¬æ¢ï¼Œè¿™æ ·å°±ç”¨ä¸ä¸Šé›¶æ‹·è´äº†ï¼Œä½†æ˜¯å‡å¦‚æ˜¯ä¸€è‡´çš„ï¼Œå°±ç›´æ¥é€šè¿‡é›¶æ‹·è´å°†æ•°æ®ä»å†…æ ¸æ€å‘é€åˆ°æ¶ˆè´¹è€…é‚£å»å°±è¡Œäº†ï½","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1617374458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338830,"ip_address":""},"score":364156,"extra":""},{"author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"æƒ˜ é—»","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2015446,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKXf8W8e1yfnpX27ofJibVHhicicKvWeMxvQGgd72tfMm00e9u58EKD6TRFSGuTf7I7147GftmT1qFlg/132","nickname":"lecram","note":"","ucode":"B9409F53E182B2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364746,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617591444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":364156,"ip_address":""},"score":364746,"extra":""},{"author":{"id":1109389,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/8d/377c106a.jpg","nickname":"KWğŸ’¤","note":"","ucode":"290DD7016F4EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2015446,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKXf8W8e1yfnpX27ofJibVHhicicKvWeMxvQGgd72tfMm00e9u58EKD6TRFSGuTf7I7147GftmT1qFlg/132","nickname":"lecram","note":"","ucode":"B9409F53E182B2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406813,"discussion_content":"å‘ƒ...socket bufferé€šè¿‡é€šé“ï¼ˆæˆ–è€…DMAï¼‰ç›´æ¥è·Ÿkernel bufferï¼ˆæ–‡ä»¶è¿™é‡Œå®é™…æ˜¯page bufferï¼‰åŒå‘äº¤äº’çš„ã€‚brokerç«¯å³ä¾¿è¦æ ¡éªŒï¼Œä¹Ÿå¯ä»¥ç”¨mmapå‡å°‘æ‹·è´ã€‚kafkaä¸»è¦è®²çš„é›¶æ‹·è´æ˜¯fileåˆ°socketè¿™ä¸€æ®µä¼ è¾“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634831202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":364156,"ip_address":""},"score":406813,"extra":""}]},{"author":{"id":1620239,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b9/0f/648a4b3f.jpg","nickname":"é…æ–¹","note":"","ucode":"C8C7214F0C195E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62120,"discussion_content":"brokeræ¥æ”¶æ¶ˆæ¯çš„recvbufferç»è¿‡ç½‘å¡æ‹·è´è‡³ç”¨æˆ·ç©ºé—´ï¼Œåœ¨ç”¨æˆ·ç©ºé—´è¿›è¡Œæ ¡éªŒæ“ä½œï¼Œå®Œæˆåæ¶ˆæ¯å†™å…¥ç£ç›˜ï¼Œåº”è¯¥ä¸ç»è¿‡å†…æ ¸æ€ã€‚æ¶ˆæ¯æ¶ˆè´¹æ—¶IOåº”è¯¥ä¼šè°ƒç”¨readå°†æ¶ˆæ¯ä»ç£ç›˜æ‹·è´è‡³å†…æ ¸ç©ºé—´ï¼Œåœ¨ç”±cpuå¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´è¿›è¡Œsendbufferç»„è£…è¿›å…¥ç½‘ç»œå±‚ã€‚æˆ‘æ˜¯è¿™æ ·ç†è§£çš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574818071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1579066,"avatar":"https://static001.geekbang.org/account/avatar/00/18/18/3a/b407889c.jpg","nickname":"Geek_817ea4","note":"","ucode":"D1194D33C4DC11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":787,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562058225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001861,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/85/3f161d95.jpg","nickname":"Alpha","note":"","ucode":"60CA15A25EC796","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289,"discussion_content":"æœ‰æƒ³ç›¸åŒçš„ç–‘é—®ï¼Œ`æ¯ä¸ªå‹ç¼©è¿‡çš„æ¶ˆæ¯é›†åˆåœ¨ Broker ç«¯å†™å…¥æ—¶éƒ½è¦å‘ç”Ÿè§£å‹ç¼©ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å¯¹æ¶ˆæ¯æ‰§è¡Œå„ç§éªŒè¯`ï¼Œè¿™æ˜¯å¦æ„å‘³ç€åªè¦æœ‰å‹ç¼© å°±ä¸§å¤±é›¶æ‹·è´ç‰¹æ€§äº†å‘¢ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1561429711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106898,"user_name":"Li Shunduo","can_delete":false,"product_type":"c1","uid":1222882,"ip_address":"","ucode":"6C5AB4129E9780","user_header":"https://static001.geekbang.org/account/avatar/00/12/a8/e2/f8e51df2.jpg","comment_is_top":false,"comment_ctime":1561423564,"is_pvip":false,"replies":[{"id":"38803","content":"ç›®å‰java  consumerçš„è®¾è®¡æ˜¯ä¸€æ¬¡å–å‡ºä¸€æ‰¹ï¼Œç¼“å­˜åœ¨å®¢æˆ·ç«¯å†…å­˜ä¸­ï¼Œç„¶åå†è¿‡æ»¤å‡ºmax.poll.recordsæ¡æ¶ˆæ¯è¿”ç»™ä½ ï¼Œä¹Ÿä¸ç®—å¤ªæµªè´¹å§ï¼Œæ¯•ç«Ÿä¸‹æ¬¡å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­å–ï¼Œä¸ç”¨å†å‘è¯·æ±‚äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561511711,"ip_address":"","comment_id":106898,"utype":1}],"discussion_count":5,"race_medal":0,"score":"104640638668","product_id":100029201,"comment_content":"å‡å¦‚ä¸€ä¸ªæ¶ˆæ¯é›†åˆé‡Œæœ‰10æ¡æ¶ˆæ¯ï¼Œå¹¶ä¸”è¢«å‹ç¼©ï¼Œä½†æ˜¯æ¶ˆè´¹ç«¯é…ç½®æ¯æ¬¡åªpoll 5æ¡æ¶ˆæ¯ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹ç«¯æ€ä¹ˆè§£å‹ç¼©ï¼ŸçŸ›ç›¾ç‚¹æ˜¯ å¦‚æœåªå–5æ¡æ¶ˆæ¯ï¼Œéœ€è¦brokerå¸®åŠ©è§£å‹ç¼©ï¼›å¦‚æœå–æ•´ä¸ªæ¶ˆæ¯é›†åˆ10æ¡æ¶ˆæ¯ï¼Œä¼šæœ‰è´·æ¬¾ç­‰èµ„æºçš„æµªè´¹ï¼Ÿ","like_count":25,"discussions":[{"author":{"id":1133918,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","nickname":"lmtoo","note":"","ucode":"FCD5B9C941D448","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284,"discussion_content":"è¿™ç§æ¶ˆè´¹ç«¯ç›´æ¥å–å‡ºæ¶ˆæ¯é›†åˆï¼Œç„¶åè§£å‹ï¼Œåªå–5æ¡","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1561426664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455272,"discussion_content":"ç›®å‰java  consumerçš„è®¾è®¡æ˜¯ä¸€æ¬¡å–å‡ºä¸€æ‰¹ï¼Œç¼“å­˜åœ¨å®¢æˆ·ç«¯å†…å­˜ä¸­ï¼Œç„¶åå†è¿‡æ»¤å‡ºmax.poll.recordsæ¡æ¶ˆæ¯è¿”ç»™ä½ ï¼Œä¹Ÿä¸ç®—å¤ªæµªè´¹å§ï¼Œæ¯•ç«Ÿä¸‹æ¬¡å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­å–ï¼Œä¸ç”¨å†å‘è¯·æ±‚äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561511711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328573,"discussion_content":"leaderä¸­æ¶ˆæ¯çš„indexæ˜¯ä¸€æ¡æ¶ˆæ¯çš„è¿˜æ˜¯ä¸€æ‰¹æ¶ˆæ¯çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606182810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328572,"discussion_content":"æ¶ˆè´¹ç«¯å–ä¸€æ‰¹ï¼Œindexæ˜¯è®°5 è¿˜æ˜¯ 10","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606182752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366596,"discussion_content":"åº”è¯¥æ˜¯5ï¼Œå› ä¸ºå¦å¤–5ä¸ªåœ¨é€»è¾‘ä¸Šå¹¶æ²¡æœ‰è¢«å–å‡ºï¼Œåªæ˜¯ç¼“å­˜åœ¨å®¢æˆ·ç«¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618129150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328572,"ip_address":""},"score":366596,"extra":""}]}]},{"had_liked":false,"id":107081,"user_name":"Hello world","can_delete":false,"product_type":"c1","uid":1333607,"ip_address":"","ucode":"4D2EF3034571B7","user_header":"https://static001.geekbang.org/account/avatar/00/14/59/67/f4ba1da4.jpg","comment_is_top":false,"comment_ctime":1561455274,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"83165833898","product_id":100029201,"comment_content":"åšä¸€ä¸ªç¬”è®°<br>æ€ä¹ˆå‹ç¼©ï¼š<br>1ã€æ–°ç‰ˆæœ¬æ”¹è¿›å°†æ¯ä¸ªæ¶ˆæ¯å…¬å…±éƒ¨åˆ†å–å‡ºæ”¾åœ¨å¤–å±‚æ¶ˆæ¯é›†åˆï¼Œä¾‹å¦‚æ¶ˆæ¯çš„ CRC å€¼<br>2ã€æ–°è€ç‰ˆæœ¬çš„ä¿å­˜å‹ç¼©æ¶ˆæ¯çš„æ–¹æ³•å˜åŒ–ï¼Œæ–°ç‰ˆæœ¬æ˜¯å¯¹æ•´ä¸ªæ¶ˆæ¯é›†åˆè¿›è¡Œå‹ç¼©<br>ä½•æ—¶å‹ç¼©ï¼š<br>1ã€æ­£å¸¸æƒ…å†µä¸‹éƒ½æ˜¯producerå‹ç¼©ï¼ŒèŠ‚çœå¸¦å®½ï¼Œç£ç›˜å­˜å‚¨<br>2ã€ä¾‹å¤–æƒ…å†µ aã€brokerç«¯å’Œproducerç«¯ä½¿ç”¨çš„å‹ç¼©æ–¹æ³•ä¸åŒ bã€brokerä¸clientäº¤äº’ï¼Œæ¶ˆæ¯ç‰ˆæœ¬ä¸åŒ<br>ä½•æ—¶è§£å‹ç¼©ï¼š<br>1ã€consumerç«¯è§£å‹ç¼©<br>2ã€brokerç«¯è§£å‹ç¼©ï¼Œç”¨æ¥å¯¹æ¶ˆæ¯æ‰§è¡ŒéªŒè¯<br><br>ä¼˜åŒ–ï¼šé€‰æ‹©é€‚åˆè‡ªå·±çš„å‹ç¼©ç®—æ³•ï¼Œæ˜¯æ›´çœ‹é‡ååé‡è¿˜æ˜¯å‹ç¼©ç‡ã€‚å…¶æ¬¡å°½é‡serverå’Œclientä¿æŒä¸€è‡´ï¼Œè¿™æ ·ä¸ä¼šæŸå¤±kafkaçš„zero copyä¼˜åŠ¿","like_count":20,"discussions":[{"author":{"id":1155275,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","nickname":"å¼ ä¸‰ä¸°","note":"","ucode":"3A6215A40B3B21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312904,"discussion_content":"éå¸¸å®Œç¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602851078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107356,"user_name":"é£ä¸­èŠ±","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1561518303,"is_pvip":false,"replies":[{"id":"38936","content":"ä¸ªäººè§‰å¾—å­¦ä¸€ä¸ªä¸œè¥¿æœ€é‡è¦çš„è¿˜æ˜¯è¦ç”¨ï¼Œå¦‚æœåªæ˜¯å‚åŠ ä¸€äº›åŸ¹è®­è¯¾ç¨‹å¾ˆéš¾å…¨é¢çš„ç†è§£ã€‚æ‚¨è¿™ä¹ˆå¤šçš„ç•™è¨€æˆ‘ä¸€ç›´åšæŒå›å¤ã€‚æˆ‘ä¹Ÿä¸€ç›´æ˜¯è¿™ä¸ªè§‚ç‚¹ï¼šç”¨èµ·æ¥ï¼Œè‡ªç„¶é—®é¢˜å°±æ¥äº†ã€‚<br><br>æˆ‘å­¦æœºå™¨å­¦ä¹ çš„ç»å†å’Œæ‚¨ç°åœ¨å­¦Kafkaå¾ˆåƒã€‚æ²¡æœ‰å®é™…ä½¿ç”¨åœºæ™¯æ€ä¹ˆå­¦éƒ½è§‰å¾—æ·±å…¥ä¸äº†ã€‚<br><br>æˆ‘ç»™æ‚¨çš„å»ºè®®æ˜¯ï¼šæŠŠKafkaå®˜ç½‘é€šè¯»å‡ éç„¶åå†å®ç°ä¸€ä¸ªå®æ—¶æ—¥å¿—æ”¶é›†ç³»ç»Ÿï¼ˆæ¯”å¦‚æŠŠæœåŠ¡å™¨æ—¥å¿—å®æ—¶æ”¾å…¥Kafkaï¼‰ã€‚äº‹å®ä¸Šï¼Œèƒ½æŠŠå®˜ç½‘å…¨é¢ç†è§£çš„è¯å·²ç»æ¯”å¾ˆå¤šKafkaä½¿ç”¨è€…è¦å¼ºäº†ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561596481,"ip_address":"","comment_id":107356,"utype":1}],"discussion_count":2,"race_medal":0,"score":"78870929631","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆæ‚¨å¥½ï¼ æˆ‘ä»¬å·²ç»å­¦å†10å¤šèŠ‚è¯¾äº†ï¼ é’ˆå¯¹æˆ‘ä»¬å¾—ç•™è¨€å’Œåé¦ˆï¼Œä¸çŸ¥é“æ‚¨æœ‰æ²¡æœ‰ç»™æˆ‘ä»¬ä¸€äº›åç»­å¾—è¯¾ç¨‹å¾—å­¦ä¹ å»ºè®®å’Œæ–¹æ³•ï¼Ÿæˆ‘ç›®å‰å¾—å­¦ä¹ å°±æ˜¯æ‚¨å‘Šè¯‰æˆ‘ä»¬å¾—ï¼Œæˆ‘å¿…é¡»å­¦ä¼šè®°ä½ã€‚ä½†æ˜¯çœ‹åŒå­¦ä»¬å¾—è¯„è®ºå’Œåé¦ˆï¼Œæˆ‘è§‰å¾—è²Œä¼¼è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šçŸ¥è¯†å•Šä¸”ä¸çŸ¥ä¹Ÿä¸æ‡‚ï¼Œæ•…æœ‰æ­¤ä¸€é—®ï¼å¸Œæœ›è€å¸ˆèƒ½ç»™ä¸ä¸€ç‚¹ä¸€ç‚¹å­¦ä¹ å»ºè®®ï¼Ÿ æ„Ÿè°¢è€å¸ˆ","like_count":19,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455484,"discussion_content":"ä¸ªäººè§‰å¾—å­¦ä¸€ä¸ªä¸œè¥¿æœ€é‡è¦çš„è¿˜æ˜¯è¦ç”¨ï¼Œå¦‚æœåªæ˜¯å‚åŠ ä¸€äº›åŸ¹è®­è¯¾ç¨‹å¾ˆéš¾å…¨é¢çš„ç†è§£ã€‚æ‚¨è¿™ä¹ˆå¤šçš„ç•™è¨€æˆ‘ä¸€ç›´åšæŒå›å¤ã€‚æˆ‘ä¹Ÿä¸€ç›´æ˜¯è¿™ä¸ªè§‚ç‚¹ï¼šç”¨èµ·æ¥ï¼Œè‡ªç„¶é—®é¢˜å°±æ¥äº†ã€‚\n\næˆ‘å­¦æœºå™¨å­¦ä¹ çš„ç»å†å’Œæ‚¨ç°åœ¨å­¦Kafkaå¾ˆåƒã€‚æ²¡æœ‰å®é™…ä½¿ç”¨åœºæ™¯æ€ä¹ˆå­¦éƒ½è§‰å¾—æ·±å…¥ä¸äº†ã€‚\n\næˆ‘ç»™æ‚¨çš„å»ºè®®æ˜¯ï¼šæŠŠKafkaå®˜ç½‘é€šè¯»å‡ éç„¶åå†å®ç°ä¸€ä¸ªå®æ—¶æ—¥å¿—æ”¶é›†ç³»ç»Ÿï¼ˆæ¯”å¦‚æŠŠæœåŠ¡å™¨æ—¥å¿—å®æ—¶æ”¾å…¥Kafkaï¼‰ã€‚äº‹å®ä¸Šï¼Œèƒ½æŠŠå®˜ç½‘å…¨é¢ç†è§£çš„è¯å·²ç»æ¯”å¾ˆå¤šKafkaä½¿ç”¨è€…è¦å¼ºäº†ã€‚\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1561596481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1085237,"avatar":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","nickname":"é£ä¸­èŠ±","note":"","ucode":"067E0A1E116844","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452,"discussion_content":"è°¢è°¢è€å¸ˆçš„ç­”å¤å’Œç»™å‡ºçš„å­¦å»ºè®®ï¼ éå¸¸æ„Ÿè°¢æ‚¨ä¸€ç›´ä»¥æ¥çš„å›å¤ï¼ æ„Ÿè°¢è€å¸ˆï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561598422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160967,"user_name":"è¡£ç”³äºº","can_delete":false,"product_type":"c1","uid":1115777,"ip_address":"","ucode":"887FE9109B97DE","user_header":"https://static001.geekbang.org/account/avatar/00/11/06/81/28418795.jpg","comment_is_top":false,"comment_ctime":1576071276,"is_pvip":false,"replies":[{"id":"61395","content":"æ˜¯çš„ï¼Œå°±æ˜¯ä½ ç†è§£çš„é‚£æ ·ã€‚Kafkaä½¿ç”¨Zero Copyä¼˜åŒ–å°†é¡µç¼“å­˜ä¸­çš„æ•°æ®ç›´æ¥ä¼ è¾“åˆ°Socketâ€”â€”è¿™çš„ç¡®æ˜¯å‘ç”Ÿåœ¨brokeråˆ°consumerçš„é“¾è·¯ä¸Šã€‚è¿™ç§ä¼˜åŒ–èƒ½æˆè¡Œçš„å‰ææ˜¯consumerç«¯èƒ½å¤Ÿè¯†åˆ«ç£ç›˜ä¸Šçš„æ¶ˆæ¯æ ¼å¼ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1576111302,"ip_address":"","comment_id":160967,"utype":1}],"discussion_count":3,"race_medal":0,"score":"70295548012","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹æºç ï¼Œbrokeråœ¨æ¥æ”¶produceræ¶ˆæ¯å¹¶è½ç›˜è¿™å—è²Œä¼¼æ²¡æœ‰ç”¨é›¶æ‹·è´å•Šï¼åªæœ‰ä¼ è¾“ç»™consumeræ—¶ç”¨äº†ï¼Œæ±‚è§£ç­”","like_count":17,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477547,"discussion_content":"æ˜¯çš„ï¼Œå°±æ˜¯ä½ ç†è§£çš„é‚£æ ·ã€‚Kafkaä½¿ç”¨Zero Copyä¼˜åŒ–å°†é¡µç¼“å­˜ä¸­çš„æ•°æ®ç›´æ¥ä¼ è¾“åˆ°Socketâ€”â€”è¿™çš„ç¡®æ˜¯å‘ç”Ÿåœ¨brokeråˆ°consumerçš„é“¾è·¯ä¸Šã€‚è¿™ç§ä¼˜åŒ–èƒ½æˆè¡Œçš„å‰ææ˜¯consumerç«¯èƒ½å¤Ÿè¯†åˆ«ç£ç›˜ä¸Šçš„æ¶ˆæ¯æ ¼å¼ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576111302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328576,"discussion_content":"é›¶æ‹·è´æ˜¯å‘ç”Ÿåœ¨æ¶ˆè´¹çš„æ—¶å€™ï¼Œkafkaç›´æ¥ä»ç£ç›˜è¯»å–åˆ°ç½‘å¡ä¸Šé€šè¿‡ç½‘ç»œå‘é€ç»™æ¶ˆè´¹ç«¯çš„ç½‘å¡å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606183101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135707,"avatar":"https://static001.geekbang.org/account/avatar/00/11/54/5b/1a14d829.jpg","nickname":"WhatAKitty","note":"","ucode":"911C089450926B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223104,"discussion_content":"Kafkaä¸ºå•¥ä¸åœ¨è·å–æ¶ˆæ¯åå†æ ¹æ®æ¶ˆæ¯çš„ç‰ˆæœ¬æ¥åšæ ¼å¼è½¬åŒ–ï¼Ÿæ˜¯å› ä¸ºä¼šé€ æˆé‡å®¢æˆ·ç«¯çš„æƒ…å†µå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586185989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113056,"user_name":"æ˜ŸæœŸå…«","can_delete":false,"product_type":"c1","uid":1185504,"ip_address":"","ucode":"34A37F73A48E7F","user_header":"https://static001.geekbang.org/account/avatar/00/12/16/e0/7abad3cc.jpg","comment_is_top":false,"comment_ctime":1562892362,"is_pvip":false,"replies":[{"id":"41138","content":"ä¸»è¦æ˜¯è¿™ä¸¤ä¸ªå‚æ•°ï¼šbatch.sizeå’Œlinger.msã€‚å¦‚æœæ˜¯ç”Ÿäº§äº†ä¸€æ¡æ¶ˆæ¯ä¸”linger.ms=0ï¼Œé€šå¸¸producerå°±ä¼šç«‹å³å‘é€è€…ä¸€æ¡æ¶ˆæ¯äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562894094,"ip_address":"","comment_id":113056,"utype":1}],"discussion_count":2,"race_medal":0,"score":"61692434506","product_id":100029201,"comment_content":"è€å¸ˆé‚£å†é—®ä¸€ä¸‹ï¼Œå¦‚æœå¤šæ¡æ¶ˆæ¯ç»„æˆæ¶ˆæ¯é›†åˆå‘é€ï¼Œé‚£æ˜¯ä»€ä¹ˆæ¡ä»¶æ§åˆ¶æ¶ˆæ¯å‘é€ï¼Œå¦‚æœæ˜¯ä¸€æ¡åˆæ˜¯ä»€ä¹ˆæ¡ä»¶æ§åˆ¶è§¦å‘å‘é€çš„å‘¢","like_count":14,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458038,"discussion_content":"ä¸»è¦æ˜¯è¿™ä¸¤ä¸ªå‚æ•°ï¼šbatch.sizeå’Œlinger.msã€‚å¦‚æœæ˜¯ç”Ÿäº§äº†ä¸€æ¡æ¶ˆæ¯ä¸”linger.ms=0ï¼Œé€šå¸¸producerå°±ä¼šç«‹å³å‘é€è€…ä¸€æ¡æ¶ˆæ¯äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562894094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49191,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573563091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106925,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1561425445,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57396000293","product_id":100029201,"comment_content":"æ ¡éªŒçš„ç›®çš„æ˜¯é˜²æ­¢å› ä¸ºç½‘ç»œä¼ è¾“å‡ºç°é—®é¢˜å¯¼è‡´brokerç«¯æ¥æ”¶äº†å—æŸçš„æ¶ˆæ¯ï¼Œæ‰€ä»¥åº”è¯¥æ”¾åœ¨ä½œä¸ºserverr brokerç«¯è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨ä½œä¸ºclientç«¯çš„producerã€‚æ”¹è¿›çš„æ–¹æ¡ˆå¯ä»¥æ˜¯é’ˆå¯¹ä¸€æ¬¡ä¼ è¾“çš„æ•´ä¸ªmessage setè¿›è¡ŒCRCæ£€éªŒï¼Œè€Œä¸æ˜¯é’ˆå¯¹ä¸€æ¡æ¡æ¶ˆæ¯ï¼Œè¿™èƒ½å¤Ÿå¤§å¤§æé«˜æ ¡éªŒæ•ˆç‡ï¼Œå› ä¸ºé¿å…äº†è§£å‹ç¼©ã€‚","like_count":13},{"had_liked":false,"id":107754,"user_name":"å—è¾•åŒ—è¾™","can_delete":false,"product_type":"c1","uid":1214502,"ip_address":"","ucode":"03EC406AE0D591","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","comment_is_top":false,"comment_ctime":1561603585,"is_pvip":false,"replies":[{"id":"39135","content":"å®ƒåªæ˜¯è§£å‹ç¼©è¯»å–è€Œå·²ï¼Œä¸ä¼šå°†è§£å‹ç¼©ä¹‹åçš„æ•°æ®å›å†™åˆ°ç£ç›˜ã€‚å¦å¤–å°±åƒæˆ‘ç½®é¡¶çš„ç•™è¨€é‚£æ ·ï¼Œç›®å‰ç¤¾åŒºå·²ç»æ¥çº³äº†äº¬ä¸œå°ä¼™ä¼´çš„ä¿®æ”¹ï¼Œè²Œä¼¼å¯ä»¥ç»•è¿‡è¿™éƒ¨åˆ†è§£å‹ç¼©äº†ï¼Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561681043,"ip_address":"","comment_id":107754,"utype":1}],"discussion_count":3,"race_medal":0,"score":"48806243841","product_id":100029201,"comment_content":"è€å¸ˆæœ‰ä¸€ç‚¹ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹brokerç«¯ä¼šåŸæ ·ä¿å­˜èµ·æ¥ï¼Œä½†æ˜¯ä¸ºäº†æ£€éªŒéœ€è¦è§£å‹ç¼©ã€‚è¯¥æ€ä¹ˆå»ç†è§£è¿™ä¸ªè¿‡ç¨‹å‘¢ï¼Œbrokerç«¯è§£å‹ç¼©ä»¥åè¿˜ä¼šå‹ç¼©è¿˜åŸå—ï¼Ÿ<br>è¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨ç”¨æˆ·æ€æ‰§è¡Œçš„å—ï¼Œæ€»æ„Ÿè§‰æ€ªæ€ªçš„","like_count":11,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455656,"discussion_content":"å®ƒåªæ˜¯è§£å‹ç¼©è¯»å–è€Œå·²ï¼Œä¸ä¼šå°†è§£å‹ç¼©ä¹‹åçš„æ•°æ®å›å†™åˆ°ç£ç›˜ã€‚å¦å¤–å°±åƒæˆ‘ç½®é¡¶çš„ç•™è¨€é‚£æ ·ï¼Œç›®å‰ç¤¾åŒºå·²ç»æ¥çº³äº†äº¬ä¸œå°ä¼™ä¼´çš„ä¿®æ”¹ï¼Œè²Œä¼¼å¯ä»¥ç»•è¿‡è¿™éƒ¨åˆ†è§£å‹ç¼©äº†ï¼Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561681043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328577,"discussion_content":"æŒä¹…åŒ–çš„æ—¶å€™æ˜¯å‹ç¼©çš„è¿˜æ˜¯è§£å‹ç¼©çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606183492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/e24e181e.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347557,"discussion_content":"æˆ‘ç†è§£åº”è¯¥æ˜¯è§£å‹ç¼©æ ¡éªŒé€šè¿‡ä¹‹åï¼ŒæŠŠåŸæ¥çš„å‹ç¼©æ¶ˆæ¯é›†ï¼ˆåŸæ ·ï¼‰å­˜èµ·æ¥ï¼Œä¸çŸ¥é“ç†è§£å¾—å¯¹ä¸å¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612257058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328577,"ip_address":""},"score":347557,"extra":""}]}]},{"had_liked":false,"id":106981,"user_name":"dream","can_delete":false,"product_type":"c1","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1561431189,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"48806071445","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå¯¹äºæ¶ˆæ¯å±‚æ¬¡ã€æ¶ˆæ¯é›†åˆã€æ¶ˆæ¯è¿™ä¸‰è€…çš„æ¦‚å¿µä¸å…³ç³»æˆ‘æœ‰ç‚¹æ‡µï¼Œèƒ½ä¸èƒ½è¯¦ç»†è¯´ä¸€ä¸‹ï¼Ÿè°¢è°¢ï¼","like_count":11,"discussions":[{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49119,"discussion_content":"é‚£å°±ç™¾åº¦â€¦\nå…¶å®è¯´è¿™äº›åº”è¯¥æœ‰å›¾çš„ï¼Œè€Œä¸æ˜¯æ–‡å­—ã€‚\næˆ‘å»ç™¾åº¦å’¯","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573557108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1085237,"avatar":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","nickname":"é£ä¸­èŠ±","note":"","ucode":"067E0A1E116844","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381,"discussion_content":"å…¶å®æˆ‘ä¹Ÿæ²¡æœ‰æ€ä¹ˆæ˜ç™½ï¼ æ¶ˆæ¯å±‚æ¬¡ï¼š1 æ¶ˆæ¯é›†åˆ 2 æ¶ˆæ¯ ã€‚ä¹Ÿå¸Œæœ›è€å¸ˆè¾›è‹¦å†è¯´ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561517449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106985,"user_name":"dream","can_delete":false,"product_type":"c1","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1561432222,"is_pvip":false,"replies":[{"id":"38828","content":"æ¶ˆæ¯æ‰¹æ¬¡RecordBatché‡Œé¢åŒ…å«è‹¥å¹²æ¡æ¶ˆæ¯ï¼ˆrecord)ã€‚<br>ä½ å¯ä»¥è®¤ä¸ºæ¶ˆæ¯æ‰¹æ¬¡å’Œæ¶ˆæ¯é›†åˆæ˜¯ç­‰ä»·çš„ï¼Œæ¶ˆæ¯å’Œæ—¥å¿—é¡¹æ˜¯ç­‰ä»·çš„ã€‚<br>è¿™æ ·æ¶ˆæ¯å±‚æ¬¡æœ‰ä¸¤å±‚ï¼šå¤–å±‚æ˜¯æ¶ˆæ¯æ‰¹æ¬¡ï¼ˆæˆ–æ¶ˆæ¯é›†åˆï¼‰ï¼›é‡Œå±‚æ˜¯æ¶ˆæ¯ï¼ˆæˆ–æ—¥å¿—é¡¹ï¼‰ã€‚<br>Producerä»¥recordbatchä¸ºå•ä½å‘é€æ¶ˆæ¯ï¼Œå¯¹äºV2ç‰ˆæœ¬ä¸€ä¸ªbatchä¸­é€šå¸¸åŒ…å«å¤šæ¡æ¶ˆæ¯ã€‚<br><br>åœ¨V2ç‰ˆæœ¬ä¸­ï¼Œåœ¨batchå±‚é¢è®¡ç®—CRCå€¼ï¼›åœ¨V1ç‰ˆæœ¬ä¸­ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½è¦è®¡ç®—CRCå€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561514897,"ip_address":"","comment_id":106985,"utype":1}],"discussion_count":6,"race_medal":0,"score":"44511105182","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘å¯¹æ¶ˆæ¯å±‚æ¬¡ã€æ¶ˆæ¯é›†åˆã€æ¶ˆæ¯ã€æ—¥å¿—é¡¹è¿™äº›æ¦‚å¿µä¸å®ƒä»¬ä¹‹é—´çš„å…³ç³»æ„Ÿè§‰å¾ˆæ‡µï¼Œ<br>æ¶ˆæ¯å±‚æ¬¡éƒ½åˆ†æ¶ˆæ¯é›†åˆä»¥åŠæ¶ˆæ¯ï¼Œæ¶ˆæ¯é›†åˆä¸­åŒ…å«æ—¥å¿—é¡¹ï¼Œæ—¥å¿—é¡¹ä¸­å°è£…æ¶ˆæ¯ï¼Œ<br>é‚£ä¹ˆæ—¥å¿—é¡¹ä¸­å°è£…çš„æ˜¯producerå‘é€çš„æ¶ˆæ¯å—ï¼Ÿ<br>ä¸€ä¸ªæ—¥å¿—é¡¹ä¸­ä¼šåŒ…å«å¤šæ¡æ¶ˆæ¯å—ï¼Ÿ<br>æ¶ˆæ¯é›†åˆä¸­æ¶ˆæ¯é¡¹å°è£…çš„çš„æ¶ˆæ¯ä¸æ¶ˆæ¯å±‚æ¬¡åŒ…å«çš„æ¶ˆæ¯æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ<br>è¿™ä¸¤ä¸ªæ¶ˆæ¯ä¸producerå‘é€çš„æ¶ˆæ¯æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ<br>ä¸€ä¸ªæ¶ˆæ¯é›†åˆå¯¹åº”æ˜¯producerå‘é€çš„ä¸€æ¡æ¶ˆæ¯è¿˜æ˜¯å¤šæ¡æ¶ˆæ¯å‘¢ï¼Ÿ<br>æœ€åï¼Œè€å¸ˆèƒ½ä¸èƒ½è¯¦ç»†è¯´ä¸€ä¸‹CRCæ ¡éªŒï¼Œè°¢è°¢ï¼","like_count":11,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455313,"discussion_content":"æ¶ˆæ¯æ‰¹æ¬¡RecordBatché‡Œé¢åŒ…å«è‹¥å¹²æ¡æ¶ˆæ¯ï¼ˆrecord)ã€‚\nä½ å¯ä»¥è®¤ä¸ºæ¶ˆæ¯æ‰¹æ¬¡å’Œæ¶ˆæ¯é›†åˆæ˜¯ç­‰ä»·çš„ï¼Œæ¶ˆæ¯å’Œæ—¥å¿—é¡¹æ˜¯ç­‰ä»·çš„ã€‚\nè¿™æ ·æ¶ˆæ¯å±‚æ¬¡æœ‰ä¸¤å±‚ï¼šå¤–å±‚æ˜¯æ¶ˆæ¯æ‰¹æ¬¡ï¼ˆæˆ–æ¶ˆæ¯é›†åˆï¼‰ï¼›é‡Œå±‚æ˜¯æ¶ˆæ¯ï¼ˆæˆ–æ—¥å¿—é¡¹ï¼‰ã€‚\nProducerä»¥recordbatchä¸ºå•ä½å‘é€æ¶ˆæ¯ï¼Œå¯¹äºV2ç‰ˆæœ¬ä¸€ä¸ªbatchä¸­é€šå¸¸åŒ…å«å¤šæ¡æ¶ˆæ¯ã€‚\n\nåœ¨V2ç‰ˆæœ¬ä¸­ï¼Œåœ¨batchå±‚é¢è®¡ç®—CRCå€¼ï¼›åœ¨V1ç‰ˆæœ¬ä¸­ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½è¦è®¡ç®—CRCå€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561514897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2739957,"avatar":"","nickname":"Geek_39299b","note":"","ucode":"908C2FC4DECD33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389392,"discussion_content":"äº†ç„¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629260140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328579,"discussion_content":"çœ‹åˆ°è¿™ ç¬é—´æ˜ç™½äº†ï¼Œéƒ½ç»Ÿä¸€æˆä¸€ä¸ªåç§°å¤šå¥½ï¼Œéæä¸¤ç§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606183808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49197,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573563312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4782,"discussion_content":"æœ‰åŒæ ·çš„ç–‘æƒ‘ï¼Œå¦‚æœå‡ºç°æœªè§£é‡Šè¿‡çš„æ¦‚å¿µï¼Œå…ˆè§£é‡Šä¸€ä¸‹å°±å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565737744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49198,"discussion_content":"æ²¡æœ‰è§£é‡Šå°±è¿‡äº†ã€‚å¯èƒ½æœ‰ç”¨è¿‡çš„ï¼Œè¿˜èƒ½ç†è§£ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573563340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4782,"ip_address":""},"score":49198,"extra":""}]}]},{"had_liked":false,"id":106913,"user_name":"æ›¾è½¼éºŸ","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1561424494,"is_pvip":false,"replies":[{"id":"38800","content":"æœ‰ä¸€å®šé“ç†ã€‚æœ‰æœºä¼šæˆ‘å‘ç¤¾åŒºåé¦ˆä¸‹ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561511332,"ip_address":"","comment_id":106913,"utype":1}],"discussion_count":3,"race_medal":0,"score":"44511097454","product_id":100029201,"comment_content":"ä¸è®¤åŒï¼Œå› ä¸ºç½‘ç»œä¼ è¾“ä¹Ÿä¼šé€ æˆä¸¢å¤±ï¼Œä½†æ˜¯æˆ‘å»ºè®®å¯ä»¥åœ¨æ¶ˆæ¯é‡Œé¢ä½¿ç”¨ä¸€ç§æ¶ˆè€—è¾ƒå°çš„ç­¾åæ–¹å¼signï¼Œæ¯”å¦‚å¤šä½¿ç”¨ä½ç§»ç­‰æ–¹å¼ï¼Œbrokeç«¯ä¹Ÿè¿™ä¹ˆæ“çºµï¼Œå¦‚æœç­¾åä¸ä¸€è‡´è¯æ˜æœ‰æ•°æ®ä¸¢å¤±ï¼ŒåŒæ—¶ç­¾åçš„æ–¹å¼å¯ä»¥é¿å…CPUå¤§é‡æ¶ˆè€—","like_count":10,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455279,"discussion_content":"æœ‰ä¸€å®šé“ç†ã€‚æœ‰æœºä¼šæˆ‘å‘ç¤¾åŒºåé¦ˆä¸‹ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561511332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2275396,"avatar":"","nickname":"13549804879","note":"","ucode":"303DFF7082E504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373021,"discussion_content":"ç½‘ç»œä¼ è¾“é€ æˆä¸¢å¤±ï¼Œä¸æ˜¯ç”¨ä¼ è¾“å±‚æ¥é‡ä¼ å’Œæ ¡éªŒå—ï¼Ÿ å¹²å˜›åœ¨åº”ç”¨å±‚åšè¿™äº‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620569771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1361159,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","nickname":"æ¶›å“¥å“¥","note":"","ucode":"329A1384E3AB5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2275396,"avatar":"","nickname":"13549804879","note":"","ucode":"303DFF7082E504","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546101,"discussion_content":"æ˜¯çš„ï¼Œtcpåè®®èƒ½å¤Ÿä¿è¯æ¶ˆæ¯ä¸ä¸¢ã€‚ä¸ç†è§£ä»–ä»¬è¯´çš„ç½‘ç»œä¼ è¾“ä¸¢æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642160514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373021,"ip_address":""},"score":546101,"extra":""}]}]},{"had_liked":false,"id":109007,"user_name":"å—è¾•åŒ—è¾™","can_delete":false,"product_type":"c1","uid":1214502,"ip_address":"","ucode":"03EC406AE0D591","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","comment_is_top":false,"comment_ctime":1561947255,"is_pvip":false,"replies":[{"id":"39460","content":"åŒä¸€å°brokerä¸Šå¯èƒ½å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„æ¶ˆæ¯ï¼Œä½†æ¯æ¡æ¶ˆæ¯åªä¼šä»¥1ä¸ªç‰ˆæœ¬çš„å½¢å¼ä¿å­˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561951946,"ip_address":"","comment_id":109007,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35921685623","product_id":100029201,"comment_content":"è€å¸ˆæœ‰ä¸€ç‚¹æœ‰ç‚¹è¿·æƒ‘ï¼Œbrokerä¸ºäº†å¤šç‰ˆæœ¬æ¶ˆæ¯å…¼å®¹ï¼Œæ„æ€æ˜¯ä¸€ä»½æ¶ˆæ¯æœ‰å¤šä¸ªç‰ˆæœ¬å­˜åœ¨å—ï¼Œæ˜¯è¿™ä¸ªæ„æ€å—ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456206,"discussion_content":"åŒä¸€å°brokerä¸Šå¯èƒ½å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„æ¶ˆæ¯ï¼Œä½†æ¯æ¡æ¶ˆæ¯åªä¼šä»¥1ä¸ªç‰ˆæœ¬çš„å½¢å¼ä¿å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561951946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1051563,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0b/ab/0e2857e5.jpg","nickname":"Codingå°å…ˆ","note":"","ucode":"965B1CC757E026","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329000,"discussion_content":"å°±æ˜¯ä¼šæ ¹æ® Broker çš„ Kafka çš„ç‰ˆæœ¬ï¼Œç„¶åä¿å­˜æ­¤ç‰ˆæœ¬çš„æ¶ˆæ¯å§ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606295455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107013,"user_name":"ç§‹","can_delete":false,"product_type":"c1","uid":1398322,"ip_address":"","ucode":"68A2544787E339","user_header":"https://static001.geekbang.org/account/avatar/00/15/56/32/c8b3256c.jpg","comment_is_top":false,"comment_ctime":1561438061,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"35921176429","product_id":100029201,"comment_content":"æˆ‘çœ‹äº†ä¸‰éè€å¸ˆçš„è¯¾ï¼Œå¾—åˆ°äº†æˆ‘è¦çš„ç­”æ¡ˆï¼š<br>1.å¦‚æœç”Ÿäº§è€…ä½¿ç”¨äº†å‹ç¼©ï¼Œbrokerä¸ºäº†crcæ ¡éªŒï¼Œä¼šå¯åŠ¨è§£å‹ï¼Œè¿™ä¸ªè§£å‹è¿‡ç¨‹ä¸å¯é¿å…ï¼›<br>2.v2çš„brokerä¸ºäº†ä½ç‰ˆæœ¬çš„æ¶ˆè´¹è€…ï¼Œä¼šæŠŠæ¶ˆæ¯å†æ¬¡è§£å‹å¹¶è¿›è¡Œåè®®è½¬æ¢ã€‚<br>æ‰€ä»¥æ¶ˆè´¹è€…çš„å…¼å®¹æˆæœ¬è¾ƒå¤§ï¼Œéœ€è¦é¿å…è¿™ä¸ªæƒ…å†µã€‚","like_count":8,"discussions":[{"author":{"id":1155275,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","nickname":"å¼ ä¸‰ä¸°","note":"","ucode":"3A6215A40B3B21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38389,"discussion_content":"åœ¨ç¬¬ä¸€æ¬¡è§£å‹çš„æ—¶å€™æŠŠæ‰€æœ‰çš„äº‹éƒ½åšäº†ä¸å°±å¥½äº†  ä¸ºä½•è¦å†æ¬¡è§£å‹å‘¢ï¼Ÿ  è¿™å—ä¸æ˜¯ç‰¹åˆ«ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571765482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1155275,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","nickname":"å¼ ä¸‰ä¸°","note":"","ucode":"3A6215A40B3B21","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366598,"discussion_content":"ä»–è¯´çš„æ˜¯é€»è¾‘å±‚é¢çš„ï¼Œä½ è¯´çš„æ˜¯å·¥ç¨‹å®ç°å±‚é¢çš„ï¼Œè¯´ä¸å®šçœŸæ˜¯ä¸€æ¬¡å®Œæˆä¸¤ä»¶äº‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618129541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":38389,"ip_address":""},"score":366598,"extra":""}]}]},{"had_liked":false,"id":134301,"user_name":"ä»£ç å°ç”Ÿ","can_delete":false,"product_type":"c1","uid":1263675,"ip_address":"","ucode":"4AA4B707B78EDF","user_header":"https://static001.geekbang.org/account/avatar/00/13/48/3b/f28beddc.jpg","comment_is_top":false,"comment_ctime":1568798700,"is_pvip":false,"replies":[{"id":"51544","content":"V2ä¾ç„¶æ˜¯åšCRCæ ¡éªŒçš„ï¼Œåªä¸è¿‡æ˜¯åœ¨record batchè¿™ä¸ªå±‚çº§ä¸Šåšï¼Œè€Œä¸æ˜¯ä¸€æ¡ä¸€æ¡æ¶ˆæ¯åœ°åšäº†ã€‚å¦‚æœCRCæ ¡éªŒå¤±è´¥ï¼Œé‡ä¼ batchã€‚ä¹Ÿå°±æ˜¯è¯´ä¸ä¼šä»¥æ¶ˆæ¯ä½œä¸ºä¼ è¾“å•ä½è¿›è¡Œæ ¡éªŒï¼Œè¿™æ ·æ•ˆç‡å¤ªä½","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1568853829,"ip_address":"","comment_id":134301,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31633569772","product_id":100029201,"comment_content":"åŸæ¥åœ¨ V1 ç‰ˆæœ¬ä¸­ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½éœ€è¦æ‰§è¡Œ CRC æ ¡éªŒï¼Œä½†æ˜¯CRCåœ¨æŸäº›æƒ…å†µä¸‹ä¼šå˜åŒ–ï¼Œæ‰€ä»¥crcæ‹¿åˆ°æ¶ˆæ¯é›†å’Œä¸­æ›´å¥½ï¼Œè¿™ä¸ªé€»è¾‘æˆ‘æ²¡æœ‰æ˜ç™½å‘¢ï¼Œæ—¢ç„¶CRCä¼šå˜ï¼Œä¸ºäº†æ¶ˆæ¯çš„æ­£ç¡®æ€§ä¸æ›´åº”è¯¥æ¯æ¡æ¶ˆæ¯éƒ½æ ¡éªŒå—ï¼Ÿä¸ºä»€ä¹ˆè¯´æ‹¿åˆ°æ¶ˆæ¯é›†å’Œä¸­ä¸€æ¬¡æ ¡éªŒæ›´å¥½å‘¢ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467696,"discussion_content":"V2ä¾ç„¶æ˜¯åšCRCæ ¡éªŒçš„ï¼Œåªä¸è¿‡æ˜¯åœ¨record batchè¿™ä¸ªå±‚çº§ä¸Šåšï¼Œè€Œä¸æ˜¯ä¸€æ¡ä¸€æ¡æ¶ˆæ¯åœ°åšäº†ã€‚å¦‚æœCRCæ ¡éªŒå¤±è´¥ï¼Œé‡ä¼ batchã€‚ä¹Ÿå°±æ˜¯è¯´ä¸ä¼šä»¥æ¶ˆæ¯ä½œä¸ºä¼ è¾“å•ä½è¿›è¡Œæ ¡éªŒï¼Œè¿™æ ·æ•ˆç‡å¤ªä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568853829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122035,"user_name":"What for","can_delete":false,"product_type":"c1","uid":1254381,"ip_address":"","ucode":"1308573CE047B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/ed/a4a774a8.jpg","comment_is_top":false,"comment_ctime":1565273570,"is_pvip":false,"replies":[{"id":"44816","content":"ä¸æ˜¯å›ºå®šæ•°é‡ã€‚<br>â€œåœ¨ Producer ç«¯å³ä½¿æ¶ˆæ¯å¹¶æ²¡æœ‰è¾¾åˆ° batch.size çš„æ•°é‡ï¼Œlinger.ms ä¹Ÿå¯ä»¥è®©å®ƒå‘é€ä¸€æ‰¹æ•°æ®â€ --- æ˜¯çš„<br><br>å–å†³äºlinger.msçš„å€¼<br>","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565276646,"ip_address":"","comment_id":122035,"utype":1}],"discussion_count":4,"race_medal":0,"score":"27335077346","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ‚¨çš„è¯¾ç¨‹å¾ˆæ£’ï¼Œåˆå¾ˆå®ç”¨åˆæœ‰åŸç†æ€§çš„åˆ†æï¼<br>æˆ‘æƒ³é—®ä¸€ä¸ªé—®é¢˜ï¼ŒProducer å‘é€æ•°æ®æ—¶ä»¥æ‰¹æ¬¡ä¸ºå•ä½ï¼Œé‚£ä¹ˆ batch ä¸ broker ç«¯çš„æ¶ˆæ¯é›†åˆåˆæ˜¯æ€ä¹ˆæ ·çš„å¯¹åº”å…³ç³»å‘¢ï¼Ÿæ¯ä¸ªæ¶ˆæ¯é›†åˆçš„ record æ•°é‡æ˜¯å¦å›ºå®šå‘¢ï¼Ÿ<br>å°±æ˜¯è¯´åœ¨ Producer ç«¯å³ä½¿æ¶ˆæ¯å¹¶æ²¡æœ‰è¾¾åˆ° batch.size çš„æ•°é‡ï¼Œlinger.ms ä¹Ÿå¯ä»¥è®©å®ƒå‘é€ä¸€æ‰¹æ•°æ®ï¼Œé‚£ broker åœ¨ä½å³°æœŸçš„æ—¶å€™æ”¶åˆ°ä¸€æ‰¹æ•°æ®ä¹‹åæ˜¯ä¼šå†™å…¥ç¼“å­˜ç­‰å‡‘å¤Ÿä¸€å®šæ•°é‡ç»„æˆä¸€ä¸ªæ¶ˆæ¯é›†åˆè¿˜æ˜¯è¯´ä¼šç«‹å³ï¼ˆæˆ–è®¾ç½®è¶…æ—¶æ—¶é—´ï¼‰ç»„æˆä¸€ä¸ªæ¶ˆæ¯é›†åˆå†™å…¥ç£ç›˜ï¼Ÿ<br>è°¢è°¢ï¼","like_count":6,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462066,"discussion_content":"ä¸æ˜¯å›ºå®šæ•°é‡ã€‚\nâ€œåœ¨ Producer ç«¯å³ä½¿æ¶ˆæ¯å¹¶æ²¡æœ‰è¾¾åˆ° batch.size çš„æ•°é‡ï¼Œlinger.ms ä¹Ÿå¯ä»¥è®©å®ƒå‘é€ä¸€æ‰¹æ•°æ®â€ --- æ˜¯çš„\n\nå–å†³äºlinger.msçš„å€¼\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565276646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2094925,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/f7/4d/09554c96.jpg","nickname":"iron bo","note":"","ucode":"4BFB1331637AA3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":560304,"discussion_content":"é‚£åé¢çš„æ¶ˆæ¯åœ¨Brokeè½ç›˜ï¼Œæ˜¯ä»¥å¤šå°‘ä¸ªæ¶ˆæ¯ä¸€æ‰¹æ¬¡è½ç›˜ï¼Œè¿˜æ˜¯ï¼Œå°±ä¸€ä¸ªæ¶ˆæ¯ä¸€ä¸ªæ¶ˆæ¯çš„è½ç›˜å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649255045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":462066,"ip_address":""},"score":560304,"extra":""}]},{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366599,"discussion_content":"å…¶å®è¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯è§¦å‘å‘é€æ“ä½œçš„é˜ˆå€¼ï¼Œä¸”ä»»ä¸€è¾¾åˆ°å°±ä¼šè§¦å‘æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618129720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008348,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","nickname":"moooofly","note":"","ucode":"4A20795C281B6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195630,"discussion_content":"æ„Ÿè§‰æ²¡æœ‰å›ç­”å®Œå…¨â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583292342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111830,"user_name":"juan","can_delete":false,"product_type":"c1","uid":1503525,"ip_address":"","ucode":"2799013456F532","user_header":"https://static001.geekbang.org/account/avatar/00/16/f1/25/6908f80a.jpg","comment_is_top":false,"comment_ctime":1562628576,"is_pvip":false,"replies":[{"id":"40682","content":"æ²¡æœ‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562634481,"ip_address":"","comment_id":111830,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23037465056","product_id":100029201,"comment_content":"å¦‚æœåœ¨é…ç½®ä¸­ä¸æŒ‡å®šå‹ç¼©ç®—æ³•ï¼Œkafkaæœ‰é»˜è®¤çš„å‹ç¼©ç®—æ³•å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457460,"discussion_content":"æ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562634481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366600,"discussion_content":"é»˜è®¤å€¼å°±æ˜¯ä¸å‹ç¼©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618129803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106912,"user_name":"è«é—®æµå¹´","can_delete":false,"product_type":"c1","uid":1249663,"ip_address":"","ucode":"23140E031AED4B","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/7f/80d56c1c.jpg","comment_is_top":false,"comment_ctime":1561424486,"is_pvip":false,"replies":[{"id":"38809","content":"æ¯”å¦‚compactç±»å‹çš„topicè¦æ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ç­‰ã€‚æœ‰ä¸ªå¥½æ¶ˆæ¯æ˜¯æˆ‘çœ‹æœ€æ–°çš„2.4å·²ç»æ¥æ”¶äº†äº¬ä¸œåŒå­¦æçš„bugè€Œä¸”ä¹Ÿä¿®æ­£äº†ã€‚å°šä¸çŸ¥é“äº¬ä¸œæ–¹é¢æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥çœ‹ä¸€ä¸‹ï¼šhttps:&#47;&#47;issues.apache.org&#47;jira&#47;browse&#47;KAFKA-8106","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561512373,"ip_address":"","comment_id":106912,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23036260966","product_id":100029201,"comment_content":"æˆ‘è§‰å¾—æ¶ˆæ¯æ£€éªŒæ”¾åœ¨producerç«¯æ˜¯ä¸åˆç†çš„ã€‚é¦–å…ˆï¼Œæ£€éªŒåº”è¯¥æ˜¯æ¶ˆæ¯æ¥æ”¶æ–¹brokerçš„è´£ä»»ï¼Œæ¯ä¸ªå‘é€æ–¹ä¸åº”è¯¥æ‰¿æ‹…è¿™ç§å…¬å…±çš„æ£€éªŒå·¥ä½œï¼Œä¹Ÿä¸åˆ©äºæ‰©å±•ã€‚å…¶æ¬¡ï¼Œå‘é€æ–¹produceræ£€éªŒå½±å“äº†producerçš„æ€§èƒ½ï¼Œè€Œä¸”å¹¶ä¸èƒ½ä¿è¯æ¶ˆæ¯åˆ°è¾¾brokeråä¾ç„¶æ­£ç¡®ã€‚<br>å¦å¤–ï¼Œæƒ³è¯·æ•™ä¸‹è€å¸ˆï¼Œbrokerå¯¹æ¶ˆæ¯è¿›è¡Œçš„æ£€éªŒä¸€èˆ¬æœ‰å“ªäº›ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455278,"discussion_content":"æ¯”å¦‚compactç±»å‹çš„topicè¦æ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ç­‰ã€‚æœ‰ä¸ªå¥½æ¶ˆæ¯æ˜¯æˆ‘çœ‹æœ€æ–°çš„2.4å·²ç»æ¥æ”¶äº†äº¬ä¸œåŒå­¦æçš„bugè€Œä¸”ä¹Ÿä¿®æ­£äº†ã€‚å°šä¸çŸ¥é“äº¬ä¸œæ–¹é¢æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥çœ‹ä¸€ä¸‹ï¼šhttps://issues.apache.org/jira/browse/KAFKA-8106","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561512373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107729,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1561600391,"is_pvip":false,"replies":[{"id":"39138","content":"å—¯å—¯ï¼Œç‰ˆæœ¬ä¸€è‡´è‚¯å®šæ˜¯èƒ½ä¿è¯çš„ï¼Œä¸è¿‡é€šå¸¸æ¯”è¾ƒéš¾åšåˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561681197,"ip_address":"","comment_id":107729,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18741469575","product_id":100029201,"comment_content":"æ€ä¹ˆæ ·æ‰èƒ½ä¿æŒæ¶ˆæ¯æ ¼å¼ç»Ÿä¸€å‘¢ï¼Œåªè¦é›†ç¾¤ä¸­çš„ kafka ç‰ˆæœ¬ä¸€è‡´å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455640,"discussion_content":"å—¯å—¯ï¼Œç‰ˆæœ¬ä¸€è‡´è‚¯å®šæ˜¯èƒ½ä¿è¯çš„ï¼Œä¸è¿‡é€šå¸¸æ¯”è¾ƒéš¾åšåˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561681197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267000,"user_name":"å½’é›¶","can_delete":false,"product_type":"c1","uid":1103208,"ip_address":"","ucode":"C99B8E93009A46","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","comment_is_top":false,"comment_ctime":1607567392,"is_pvip":true,"replies":[{"id":"97340","content":"ä¹Ÿè®¸åº”è¯¥è¿™ä¹ˆè¯´ï¼Œè§£å‹çš„å®Œæ•´æ­¥éª¤åŒ…æ‹¬ï¼š1ã€è§£å‹ï¼›2ã€æŠŠè§£å‹åçš„æ•°æ®ä¿å­˜ä¸‹æ¥ã€‚brokerç«¯é¿å…è§£å‹çš„æ„æ€æ˜¯brokeråªéœ€è¦æŠŠæ•°æ®è§£å‹ä¹‹ååŠ¨æ€è¿›è¡Œæ ¡éªŒï¼Œè€Œæ— éœ€æŠŠè§£å‹ä¹‹åçš„ç»“æœä¿å­˜ï¼Œæ˜¯è¿™ä¸ªæ„æ€","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1608080537,"ip_address":"","comment_id":267000,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14492469280","product_id":100029201,"comment_content":"è¿™èŠ‚è§‰å¾—è€å¸ˆè®²çš„æœ‰ç‚¹æ²¡çœ‹æ‡‚ï¼Œå‰é¢è¯´åªæœ‰ä¸¤ä¸ªåœºæ™¯brokerä¼šè§£å‹ï¼Œå¤§éƒ¨åˆ†åœºæ™¯æ˜¯&quot;**Producer ç«¯å‹ç¼©ã€Broker ç«¯ä¿æŒã€Consumer ç«¯è§£å‹ç¼©**ã€‚&quot; åé¢åˆè¯´æ¯ä¸ªå‹ç¼©è¿‡çš„æ¶ˆæ¯é›†åˆåœ¨ Broker ç«¯å†™å…¥æ—¶éƒ½è¦å‘ç”Ÿè§£å‹ç¼©æ“ä½œï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å¯¹æ¶ˆæ¯æ‰§è¡Œå„ç§éªŒè¯ã€‚è¿™ä¸€å—èƒ½å†è§£é‡Šä¸‹å—ï¼Ÿè°¢è°¢ï¼","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511476,"discussion_content":"ä¹Ÿè®¸åº”è¯¥è¿™ä¹ˆè¯´ï¼Œè§£å‹çš„å®Œæ•´æ­¥éª¤åŒ…æ‹¬ï¼š1ã€è§£å‹ï¼›2ã€æŠŠè§£å‹åçš„æ•°æ®ä¿å­˜ä¸‹æ¥ã€‚brokerç«¯é¿å…è§£å‹çš„æ„æ€æ˜¯brokeråªéœ€è¦æŠŠæ•°æ®è§£å‹ä¹‹ååŠ¨æ€è¿›è¡Œæ ¡éªŒï¼Œè€Œæ— éœ€æŠŠè§£å‹ä¹‹åçš„ç»“æœä¿å­˜ï¼Œæ˜¯è¿™ä¸ªæ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608080537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2739957,"avatar":"","nickname":"Geek_39299b","note":"","ucode":"908C2FC4DECD33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389393,"discussion_content":"äº†ç„¶ ï¼Œè¿™ä¹ˆé‡è¦çš„ç»†èŠ‚ï¼Œè¿˜æ˜¯æ—©äº›æå‡ºæ¯”ä»·å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629260624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193751,"user_name":"ä¸€åå…­å¤œ","can_delete":false,"product_type":"c1","uid":1606581,"ip_address":"","ucode":"41D4A6695B2A7B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJIIibocUHNRgafeNUvibW0YI2v1qDaiaZCVQ37FcrMs0ettIDD0snhsy4Ac2ADnLmjM7KGNeznj2hrg/132","comment_is_top":false,"comment_ctime":1584957709,"is_pvip":false,"replies":[{"id":"73867","content":"1. æ²¡ä»€ä¹ˆä¸åŒï¼›2. åªæœ‰ä¸€æ¬¡ï¼›3. å·®ä¸å¤šçš„ã€‚æ˜¯å¦è½¬æ¢ä¹Ÿè¦çœ‹æ˜¯å¦çœŸçš„éœ€è¦è½¬æ¢ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1585012193,"ip_address":"","comment_id":193751,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14469859597","product_id":100029201,"comment_content":"è€å¸ˆï¼Œé—®ä¸€ä¸‹ï¼Œå¦‚æœproducerç«¯è®¾ç½®äº†å‹ç¼©ï¼Œé‚£ä¹ˆbrokerç«¯ä¸å¯é¿å…çš„ä¼šè§£å‹ç¼©ï¼Œ1ã€é‚£ä¹ˆæ­¤æ—¶çš„è§£å‹ç¼©å’Œâ€œBroker ç«¯æŒ‡å®šäº†å’Œ Producer ç«¯ä¸åŒçš„å‹ç¼©ç®—æ³•â€ä»¥åŠâ€œBroker ç«¯å‘ç”Ÿäº†æ¶ˆæ¯æ ¼å¼è½¬æ¢â€è¿™ä¸¤ç§æƒ…å†µäº§ç”Ÿçš„è§£å‹ç¼©æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ2ã€è¿™ç§ä¼šäº§ç”Ÿä¸¤æ¬¡è§£å‹ç¼©ï¼Œè¿˜æ˜¯åªæœ‰ä¸€æ¬¡è§£å‹ç¼©å‘¢ï¼Ÿ3ã€è§£å‹ç¼©åä¼šå…ˆåšcrcæ ¡éªŒï¼Œç„¶åå†åšå…¶ä»–è½¬æ¢ä¹ˆï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488644,"discussion_content":"1. æ²¡ä»€ä¹ˆä¸åŒï¼›2. åªæœ‰ä¸€æ¬¡ï¼›3. å·®ä¸å¤šçš„ã€‚æ˜¯å¦è½¬æ¢ä¹Ÿè¦çœ‹æ˜¯å¦çœŸçš„éœ€è¦è½¬æ¢ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585012193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184647,"user_name":"moooofly","can_delete":false,"product_type":"c1","uid":1008348,"ip_address":"","ucode":"4A20795C281B6F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","comment_is_top":false,"comment_ctime":1583377473,"is_pvip":false,"replies":[{"id":"71462","content":"brokeræ²¡æœ‰è®¾ç½® --- æˆ‘ç†è§£ä½ æƒ³è¯´è®¾ç½®æˆâ€œä¸å‹ç¼©â€ï¼Œå¯¹å§ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆbrokerç«¯ä¼šè§£å‹æ¶ˆæ¯ç„¶åå†™å…¥diskã€‚å‘é€ç»™consumeræ—¶å°±æ˜¯æœªå‹ç¼©çš„ã€‚<br><br>consumerç«¯æ²¡æœ‰é’ˆå¯¹å‹ç¼©çš„è®¾ç½®","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1583456933,"ip_address":"","comment_id":184647,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14468279361","product_id":100029201,"comment_content":"å¦‚æœproducerè®¾ç½®äº†compress.typeï¼Œè€Œbrokeræ²¡æœ‰è®¾ç½®ï¼Œä¹‹åbrokerä¼šè§£å‹æ¶ˆæ¯ï¼Œç„¶åä¿å­˜åœ¨diskä¸Šï¼Œé‚£åç»­å‘é€ç»™ consumer çš„æ¶ˆæ¯æ˜¯å‹ç¼©è¿‡çš„ï¼Œè¿˜æ˜¯æœªå‹ç¼©çš„ï¼Ÿè¿˜æ˜¯ä¹Ÿè¦å–å†³äº consumer é’ˆå¯¹å‹ç¼©çš„é…ç½®ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486078,"discussion_content":"brokeræ²¡æœ‰è®¾ç½® --- æˆ‘ç†è§£ä½ æƒ³è¯´è®¾ç½®æˆâ€œä¸å‹ç¼©â€ï¼Œå¯¹å§ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆbrokerç«¯ä¼šè§£å‹æ¶ˆæ¯ç„¶åå†™å…¥diskã€‚å‘é€ç»™consumeræ—¶å°±æ˜¯æœªå‹ç¼©çš„ã€‚\n\nconsumerç«¯æ²¡æœ‰é’ˆå¯¹å‹ç¼©çš„è®¾ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583456933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181393,"user_name":"å’¸æ·¡ä¸€é¦–è¯—","can_delete":false,"product_type":"c1","uid":1435869,"ip_address":"","ucode":"FEE5A9B5139BF1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLl9nj9b6RydKADq82ZwOad0fQcvXWyQKk5U5RFC2kzHGI4GjIQsIZvHsEm7mFELgMiaGx3lGq9vag/132","comment_is_top":false,"comment_ctime":1582534310,"is_pvip":false,"replies":[{"id":"70337","content":"ä¿è¯brokerç«¯å’Œclientsç«¯ç‰ˆæœ¬ä¸€è‡´å°±ä¸ä¼šå‡ºç°è½¬æ¢ã€‚<br><br>â€œBroker ç«¯å¯¹æ–°ç‰ˆæœ¬æ¶ˆæ¯æ‰§è¡Œå‘è€ç‰ˆæœ¬æ ¼å¼çš„è½¬æ¢æ˜¯æ¶ˆè´¹è€…æ¶ˆè´¹æ—¶è§¦å‘çš„å—ï¼Ÿâ€ --- æ˜¯çš„<br><br>æ˜¯å¦å‹ç¼©è§£å‹ç¼©å–å†³äºæ¶ˆæ¯ä¹‹å‰æ˜¯æ€ä¹ˆä¿å­˜çš„ã€‚å¦‚æœproducerå°±æ²¡æœ‰å‹ç¼©æ¶ˆæ¯ï¼Œé‚£ä¹ˆè‡ªç„¶ä¸æ¶‰åŠè¿™äº›å‹ç¼©ã€è§£å‹ç¼©çš„è¿‡ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1582592994,"ip_address":"","comment_id":181393,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14467436198","product_id":100029201,"comment_content":"è€å¸ˆï¼Œâ€åœ¨ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒKafka é›†ç¾¤ä¸­åŒæ—¶ä¿å­˜å¤šç§ç‰ˆæœ¬çš„æ¶ˆæ¯æ ¼å¼éå¸¸å¸¸è§ã€‚ä¸ºäº†å…¼å®¹è€ç‰ˆæœ¬çš„æ ¼å¼ï¼ŒBroker ç«¯ä¼šå¯¹æ–°ç‰ˆæœ¬æ¶ˆæ¯æ‰§è¡Œå‘è€ç‰ˆæœ¬æ ¼å¼çš„è½¬æ¢â€ è¿™å¥è¯ä¸æ˜¯å¾ˆç†è§£ï¼Œæ¶ˆæ¯çš„ä¸åŒç‰ˆæœ¬æ˜¯ç”±ç”Ÿäº§è€…ç‰ˆæœ¬å†³å®šè¿˜æ˜¯ broker æœåŠ¡ç«¯çš„ç‰ˆæœ¬å†³å®šï¼Œåªéœ€è¦ä¿è¯æœåŠ¡ç«¯ç‰ˆæœ¬ä¸€è‡´å°±ä¸ä¼šå‡ºç°ä¸åŒæ¶ˆæ¯æ ¼å¼å—ï¼Ÿå¦å¤–ï¼ŒBroker ç«¯å¯¹æ–°ç‰ˆæœ¬æ¶ˆæ¯æ‰§è¡Œå‘è€ç‰ˆæœ¬æ ¼å¼çš„è½¬æ¢æ˜¯æ¶ˆè´¹è€…æ¶ˆè´¹æ—¶è§¦å‘çš„å—ï¼Ÿå…¶è½¬æ¢è¿‡ç¨‹æ˜¯å…ˆè§£å‹ç¼©ï¼Œç„¶åå‹ç¼©ï¼Œæœ€åäº¤ç»™è€æ¿æ¶ˆè´¹è€…å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484987,"discussion_content":"ä¿è¯brokerç«¯å’Œclientsç«¯ç‰ˆæœ¬ä¸€è‡´å°±ä¸ä¼šå‡ºç°è½¬æ¢ã€‚\n\nâ€œBroker ç«¯å¯¹æ–°ç‰ˆæœ¬æ¶ˆæ¯æ‰§è¡Œå‘è€ç‰ˆæœ¬æ ¼å¼çš„è½¬æ¢æ˜¯æ¶ˆè´¹è€…æ¶ˆè´¹æ—¶è§¦å‘çš„å—ï¼Ÿâ€ --- æ˜¯çš„\n\næ˜¯å¦å‹ç¼©è§£å‹ç¼©å–å†³äºæ¶ˆæ¯ä¹‹å‰æ˜¯æ€ä¹ˆä¿å­˜çš„ã€‚å¦‚æœproducerå°±æ²¡æœ‰å‹ç¼©æ¶ˆæ¯ï¼Œé‚£ä¹ˆè‡ªç„¶ä¸æ¶‰åŠè¿™äº›å‹ç¼©ã€è§£å‹ç¼©çš„è¿‡ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582592994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162434,"user_name":"finger","can_delete":false,"product_type":"c1","uid":1751791,"ip_address":"","ucode":"1ADE5B840832D4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erYNqD6TIViagNYicZoykSo5WhJs1eu2auaMor17rEdMiaUgKxzibfegsicgTkHpk9JTXD1cFqzeOMWsdg/132","comment_is_top":false,"comment_ctime":1576517457,"is_pvip":false,"replies":[{"id":"61783","content":"å¾ˆå¥½çš„æ€è·¯ã€‚éœ€è¦æ€è€ƒè¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼Œbrokerå¦‚ä½•èƒ½å¤Ÿä¿¡ä»»producerç«¯å‘æ¥çš„ä¿¡æ¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1576543803,"ip_address":"","comment_id":162434,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14461419345","product_id":100029201,"comment_content":"æœ‰ä¸ªæ€è·¯ï¼Œå¯ä»¥åœ¨producer å‹ç¼©ä¹‹åï¼Œå°†æ¶ˆæ¯å­—èŠ‚é•¿åº¦ä¸€å¹¶å‘é€ç»™brokerï¼Œbrokeré€šè¿‡å­—èŠ‚é•¿åº¦æ¥åˆ¤æ–­æ˜¯å¦å‘é€ç½‘ç»œä¸¢åŒ…ï¼Œå®ç°æ•°æ®å®Œæ•´æ€§æ ¡éªŒã€‚","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478048,"discussion_content":"å¾ˆå¥½çš„æ€è·¯ã€‚éœ€è¦æ€è€ƒè¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼Œbrokerå¦‚ä½•èƒ½å¤Ÿä¿¡ä»»producerç«¯å‘æ¥çš„ä¿¡æ¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576543803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143720,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1571763805,"is_pvip":false,"replies":[{"id":"55478","content":"hmmm.... æ•…äº‹åº”è¯¥è¿™ä¹ˆè®²ã€‚ç¤¾åŒºå¯¹å¤–å®£ç§°æ˜¯brokeræ‹¿åˆ°æ¶ˆæ¯åä¸è§£å‹ï¼Œå› ä¸ºè¿™æ˜¯ç¤¾åŒºä¹‹å‰åšçš„ä¸€æ¬¡ä¼˜åŒ–ï¼Œä½†å®é™…ä¸Šbrokerç«¯æ‹¿åˆ°æ¶ˆæ¯åè¿˜æ˜¯ä¼šè§£å‹çš„ï¼Œåšå„ç§æ ¡éªŒã€‚å½“ç„¶æœ€è¿‘ç¤¾åŒºæ–°å¢äº†ä¸€ä¸ªpatchè²Œä¼¼ç§»é™¤å› åšæ ¡éªŒè€Œå¼•å…¥çš„è§£å‹ã€‚Consumerç«¯æ‹¿åˆ°å‹ç¼©æ¶ˆæ¯åè‚¯å®šè¦è§£å‹æ‰èƒ½æ¶ˆè´¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1571791819,"ip_address":"","comment_id":143720,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14456665693","product_id":100029201,"comment_content":"ä¸‹é¢è¿™å¥è¯ä¸å¤ªæ˜ç™½äº†ï¼Œè€å¸ˆåè¾¹è¯´å®é™…ä¸Šæ¶ˆè´¹ç«¯æ¥æ”¶æ¶ˆæ¯çš„æ—¶å€™ä¸€å®šä¼šè§£å‹çš„ï¼Œå› ä¸ºéœ€è¦å¯¹æ¶ˆæ¯é›†åˆåšCRCæ£€éªŒï¼Œæ–‡ä¸­æœ‰æ®µè¯è¯´åªæœ‰ä¸¤ä¸ªä¾‹å¤–æƒ…å†µæ˜¯è§£å‹çš„ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£åˆ°åº•æ˜¯åŸå°ä¸åŠ¨è¿˜æ˜¯ä¸€å®šè§£å‹å‘¢ï¼Ÿ<br><br>â€å…¶å®å¤§éƒ¨åˆ†æƒ…å†µä¸‹ Broker ä» Producer ç«¯æ¥æ”¶åˆ°æ¶ˆæ¯åä»…ä»…æ˜¯åŸå°ä¸åŠ¨åœ°ä¿å­˜è€Œä¸ä¼šå¯¹å…¶è¿›è¡Œä»»ä½•ä¿®æ”¹â€<br><br>","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471665,"discussion_content":"hmmm.... æ•…äº‹åº”è¯¥è¿™ä¹ˆè®²ã€‚ç¤¾åŒºå¯¹å¤–å®£ç§°æ˜¯brokeræ‹¿åˆ°æ¶ˆæ¯åä¸è§£å‹ï¼Œå› ä¸ºè¿™æ˜¯ç¤¾åŒºä¹‹å‰åšçš„ä¸€æ¬¡ä¼˜åŒ–ï¼Œä½†å®é™…ä¸Šbrokerç«¯æ‹¿åˆ°æ¶ˆæ¯åè¿˜æ˜¯ä¼šè§£å‹çš„ï¼Œåšå„ç§æ ¡éªŒã€‚å½“ç„¶æœ€è¿‘ç¤¾åŒºæ–°å¢äº†ä¸€ä¸ªpatchè²Œä¼¼ç§»é™¤å› åšæ ¡éªŒè€Œå¼•å…¥çš„è§£å‹ã€‚Consumerç«¯æ‹¿åˆ°å‹ç¼©æ¶ˆæ¯åè‚¯å®šè¦è§£å‹æ‰èƒ½æ¶ˆè´¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571791819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175651,"user_name":"å…ƒæ°”è›‹è›‹","can_delete":false,"product_type":"c1","uid":1777976,"ip_address":"","ucode":"F89194DB861530","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq4Qc6ian5Y9KT5tg88ickhBvictPKvu2CXrib8oxnXbrTLicGwIArskjxuWLQxMvniavPCibvWNgVK6ic19g/132","comment_is_top":false,"comment_ctime":1580790304,"is_pvip":false,"replies":[{"id":"68339","content":"ä¸æ˜¯è¯´è§£å‹ç¼©å°±ä¸€å®šä¼šä¸§å¤±Zero Copyã€‚å› ç‰ˆæœ¬è½¬åŒ–è€Œå¯¼è‡´æ¶ˆæ¯æ ¼å¼è¦è¢«é‡æ„çš„åœºæ™¯æ‰ä¼šä¸§å¤±Zero Copyã€‚å¦åˆ™ï¼Œåªæ˜¯è§£å‹ç¼©ï¼Œæ•°æ®ä¾ç„¶åœ¨é¡µç¼“å­˜ä¸­å•Š","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1580864597,"ip_address":"","comment_id":175651,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10170724896","product_id":100029201,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œå¦‚æœBrokerç«¯ä¸€å®šä¼šè§£å‹ç¼©ï¼Œé‚£ä¹ˆä¸€å®šä¼šå°†æ•°æ®ä»å†…æ ¸æ€æ‹·è´åˆ°ç”¨æˆ·æ€ï¼Œé‚£ä¹ˆKafkaæ˜¯æ€ä¹ˆå®ç°å†…æ ¸æ€çš„é›¶æ‹·è´","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482843,"discussion_content":"ä¸æ˜¯è¯´è§£å‹ç¼©å°±ä¸€å®šä¼šä¸§å¤±Zero Copyã€‚å› ç‰ˆæœ¬è½¬åŒ–è€Œå¯¼è‡´æ¶ˆæ¯æ ¼å¼è¦è¢«é‡æ„çš„åœºæ™¯æ‰ä¼šä¸§å¤±Zero Copyã€‚å¦åˆ™ï¼Œåªæ˜¯è§£å‹ç¼©ï¼Œæ•°æ®ä¾ç„¶åœ¨é¡µç¼“å­˜ä¸­å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580864597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153559,"user_name":"é›¨è½æ¼‚æ´‹","can_delete":false,"product_type":"c1","uid":1127624,"ip_address":"","ucode":"9D53DB4482AA24","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKPmOyph1XeszC69tTLENkZFJqjJ7CqtxlSpNEiaonB9ebLnKEh8w7gk7TXQiay4JvA0fQtLYKw718Q/132","comment_is_top":false,"comment_ctime":1574258702,"is_pvip":false,"replies":[{"id":"59025","content":"Brokerç«¯å’ŒClientç«¯ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œç‰¹åˆ«æ˜¯Brokerç«¯ç‰ˆæœ¬&lt;Clientç«¯ç‰ˆæœ¬","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1574295859,"ip_address":"","comment_id":153559,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10164193294","product_id":100029201,"comment_content":"ä½•æ—¶ä¼šå‘ç”Ÿæ–°ç‰ˆæœ¬æ¶ˆæ¯å‘è€ç‰ˆæœ¬æ¶ˆæ¯çš„è½¬æ¢ï¼Ÿè¿™ç‚¹ä¸æ˜¯å¾ˆæ˜ç™½~","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475209,"discussion_content":"Brokerç«¯å’ŒClientç«¯ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œç‰¹åˆ«æ˜¯Brokerç«¯ç‰ˆæœ¬&amp;lt;Clientç«¯ç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574295859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328587,"discussion_content":"å¹³æ»‘å‡çº§brokerç‰ˆæœ¬çš„æ—¶å€™ï¼ŒæŒä¹…åŒ–åçš„æ•°æ®ä¹Ÿæ˜¯å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606184912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145099,"user_name":"æ³¨å®šéå‡¡","can_delete":false,"product_type":"c1","uid":1113597,"ip_address":"","ucode":"80673056E131B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","comment_is_top":false,"comment_ctime":1572190180,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10162124772","product_id":100029201,"comment_content":"1ï¼Œä¸ºä»€ä¹ˆè¦å‹ç¼©ï¼š<br>        å‹ç¼©ç§‰æ‰¿äº†ç”¨æ—¶é—´æ¢ç©ºé—´çš„ç»å…¸trade-offæ€æƒ³ï¼Œå³ç”¨CPUçš„æ—¶é—´å»æ¢å–ç£ç›˜ç©ºé—´æˆ–ç½‘ç»œI&#47;Oä¼ è¾“é‡ï¼ŒKafkaçš„å‹ç¼©ç®—æ³•ä¹Ÿæ˜¯å‡ºäºè¿™ç§ç›®çš„ã€‚<br><br>2ï¼Œå¦‚ä½•å‹ç¼©ï¼š<br>\täº†è§£Kafkaå¦‚ä½•å‹ç¼©æ¶ˆæ¯ï¼Œé¦–å…ˆè¦æ¸…æ¥šKafkaçš„æ¶ˆæ¯æ ¼å¼ï¼Œç›®å‰kafkaæœ‰ä¸¤å¤§ç±»æ¶ˆæ¯æ ¼å¼ï¼Œç¤¾åŒºç§°ä¹‹ä¸ºV1ç‰ˆæœ¬å’ŒV2ç‰ˆæœ¬ã€‚<br>Aï¼šå…±åŒç‚¹:<br>\t(1)ï¼šKafkaçš„æ¶ˆæ¯å±‚æ¬¡åˆ†ä¸ºï¼šæ¶ˆæ¯é›†åˆï¼ˆmessage setï¼‰å’Œæ¶ˆæ¯ï¼ˆmessageï¼‰ï¼›ä¸€ä¸ªæ¶ˆæ¯é›†åˆä¸­åŒ…å«è‹¥å¹²æ¡æ—¥å¿—é¡¹ï¼ˆrecord itemï¼‰ï¼Œè€Œæ—¥å¿—é¡¹æ‰æ˜¯çœŸæ­£å°è£…æ¶ˆæ¯çš„åœ°æ–¹ã€‚<br>\t(2)ï¼šKafkaåº•å±‚çš„æ¶ˆæ¯æ—¥å¿—ç”±ä¸€ç³»åˆ—æ¶ˆæ¯é›†åˆæ—¥å¿—é¡¹ç»„æˆã€‚Kafkaé€šå¸¸ä¸ä¼šç›´æ¥æ“ä½œå…·ä½“çš„ä¸€æ¡æ¡æ¶ˆæ¯ï¼Œä»–æ€»æ˜¯åœ¨æ¶ˆæ¯é›†åˆè¿™ä¸ªå±‚é¢ä¸Šè¿›è¡Œå†™å…¥æ“ä½œã€‚<br>Bï¼šä¸åŒç‚¹ï¼šå¼•å…¥V2çš„ç›®çš„ä¸»è¦æ˜¯é’ˆå¯¹V1ç‰ˆæœ¬çš„ä¸€äº›å¼Šç«¯åšäº†ä¿®æ­£<br>ï¼ˆ1ï¼‰æŠŠæ¶ˆæ¯çš„å…¬å…±éƒ¨åˆ†æŠ½å–å‡ºæ¥æ”¾åˆ°å¤–å±‚é›†åˆé‡Œã€‚<br>        å¦‚ï¼šåœ¨V1ä¸­æ¯æ¡æ¶ˆæ¯éƒ½è¦æ‰§è¡ŒCRCæ ¡éªŒï¼ˆå¾ªç¯å†—ä½™æ ¡éªŒï¼‰ï¼Œæœ‰äº›æƒ…å†µä¸‹æ¶ˆæ¯çš„CRCå€¼ä¼šå˜ï¼Œå¯¹æ¯æ¡æ¶ˆæ¯éƒ½æ‰§è¡ŒCRCæ ¡éªŒï¼Œä¸ä»…æµªè´¹ç©ºé—´è¿˜è€½è¯¯CUPæ—¶é—´ã€‚<br>ï¼ˆ2ï¼‰æŠ¥å­˜å‹ç¼©æ¶ˆæ¯çš„æ–¹æ³•å‘ç”Ÿäº†å˜åŒ–ï¼š<br>        v1æŠŠå¤šæ¡æ¶ˆæ¯è¿›è¡Œå‹ç¼©ååœ¨ä¿å­˜åˆ°å¤–å±‚æ¶ˆæ¯çš„æ¶ˆæ¯ä½“å­—æ®µä¸­ã€‚<br>        v2 å¯¹æ•´ä¸ªæ¶ˆæ¯é›†åˆè¿›è¡Œå‹ç¼©ï¼Œå‹ç¼©æ•ˆæœå¥½ä¸å‰è€…ã€‚<br><br>3ï¼Œä½•æ—¶å‹ç¼©ï¼š<br>\tåœ¨kafkaä¸­å¯èƒ½å‘ç”Ÿå‹ç¼©çš„åœ°æ–¹ï¼šç”Ÿäº§è€…ç«¯å’ŒBrokerç«¯<br>Aï¼šç”Ÿäº§è€…ç«¯ï¼šé…ç½®compression.typeå‚æ•°å³è¡¨ç¤ºæŒ‡å®šç±»å‹çš„å‹ç¼©ç®—æ³•ã€‚<br>Bï¼šæœ‰ä¸¤ç§æƒ…å†µä¼šæ ·Brokerç«¯ä¹Ÿå¯èƒ½è¿›è¡Œå‹ç¼©<br>\tï¼ˆ1ï¼‰ï¼šBrokerç«¯æŒ‡å®šäº†å’ŒProducerç«¯ä¸åŒçš„å‹ç¼©ç®—æ³•ï¼Œè¿™ä¼šå¯¼è‡´Brokerç«¯æ¥æ”¶åˆ°ç”Ÿäº§è€…å‘æ¥çš„å‹ç¼©æ¶ˆæ¯ï¼ŒBrokerç«¯é‡æ–°è§£å‹ã€åœ¨å‹ç¼©ã€‚<br>\tï¼ˆ2ï¼‰ï¼šBrokerç«¯å‘ç”Ÿäº†æ¶ˆæ¯æ ¼å¼è½¬æ¢ï¼Œè¿™ç§è½¬æ¢ä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹è€ç‰ˆæœ¬çš„æ¶ˆè´¹è€…ç¨‹åºï¼Œï¼ˆv1å’Œv2çš„å·®åˆ«ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šæ¶‰åŠæ¶ˆæ¯çš„è§£å‹å’Œé‡æ–°å‹ç¼©ã€‚è¿™ä¸ä»…å¯¹æ€§èƒ½å½±å“å¾ˆå¤§ï¼Œè¿˜ä¼šè®©Kafkaä¸§å¤±å¼•ä»¥ä¸ºè±ªçš„Zero Copyç‰¹æ€§ã€‚<br><br>4ï¼Œä½•æ—¶è§£å‹ï¼š<br>é€šå¸¸æƒ…å†µä¸‹è§£å‹å‘ç”Ÿåœ¨æ¶ˆè´¹è€…ç«¯ã€‚<br>Aï¼šè¿™ä¸ªæµç¨‹æ˜¯Producerå‘é€çš„å‹ç¼©æ¶ˆæ¯åˆ°Brokerï¼ŒBrokeråŸå°ä¸åŠ¨çš„ä¿å­˜èµ·æ¥ï¼Œå½“Consumerç¨‹åºè¯·æ±‚è¿™éƒ¨åˆ†æ¶ˆæ¯æ—¶ï¼ŒBrokeråŸæ ·å‘å‡ºå»ï¼Œå½“ä¸‹æ¶ˆæ¯åˆ°çš„Consumerç«¯åï¼Œç”±Consumerè‡ªè¡Œè§£å‹ã€‚<br>Bï¼šConsumeä¹‹æ‰€ä»¥çŸ¥é“è¿™äº›æ¶ˆæ¯æ˜¯ç”¨ä½•ç§å‹ç¼©ç®—æ³•çš„ï¼Œæ˜¯å› ä¸ºKafkaä¼šå°†å¯ç”¨äº†å“ªç§å‹ç¼©ç®—æ³•å°è£…åˆ°æ¶ˆæ¯é›†åˆä¸­ï¼Œå½“Consumerè¯»å–åˆ°æ¶ˆæ¯é›†åˆæ—¶ï¼Œå°±çŸ¥é“äº†ã€‚<br><br>5ï¼šå‹ç¼©ç®—æ³•å¯¹æ¯”ï¼š<br>åœ¨Kafka2.1.0ç‰ˆæœ¬ä¹‹å‰ï¼Œä»…æ”¯æŒGZIPï¼ŒSnappyå’ŒLZ4ã€‚2.1.0åè¿˜æ”¯æŒZstandardç®—æ³•(Facebookå¼€æºï¼Œèƒ½å¤Ÿæä¾›è¶…é«˜å‹ç¼©æ¯”)ã€‚<br>Aï¼šä¸€ä¸ªå‹ç¼©ç®—æ³•çš„ä¼˜åŠ£ï¼Œæœ‰ä¸¤ä¸ªé‡è¦æŒ‡æ ‡ï¼šå‹ç¼©æ¯”å’Œå‹ç¼©&#47;è§£å‹ç¼©ååé‡ï¼Œä¸¤è€…éƒ½æ˜¯è¶Šé«˜è¶Šå¥½ã€‚<br>Bï¼šååé‡ï¼šLZ4&gt;Snappy&gt;zstdå’ŒGZIPï¼Œå‹ç¼©æ¯”ï¼šzstd&gt;LZ4&gt;GZIP&gt;Snappy<br><br>6ï¼šæœ€ä½³å®è·µï¼š<br>Aï¼šå¯ç”¨å‹ç¼©çš„ä¸€ä¸ªæ¡ä»¶æ˜¯Producerç«¯æ‰€åœ¨æœºå™¨CPUèµ„æºå……è£•<br>Bï¼šç”Ÿäº§ç¯å¢ƒç½‘ç»œå¸¦å®½èµ„æºæœ‰é™<br>Cï¼šå°½é‡ä¸è¦å‡ºç°æ¶ˆæ¯æ ¼å¼è½¬æ¢çš„æƒ…å†µã€‚<br>","like_count":2},{"had_liked":false,"id":132343,"user_name":"Tim","can_delete":false,"product_type":"c1","uid":1480717,"ip_address":"","ucode":"3AAA9FD3D8DDDB","user_header":"https://static001.geekbang.org/account/avatar/00/16/98/0d/fb77a32c.jpg","comment_is_top":false,"comment_ctime":1568093381,"is_pvip":false,"replies":[{"id":"50636","content":"CRCæ ¡éªŒã€compact topicæ ¡éªŒç­‰ã€‚ä¸è¿‡å¯ä»¥çœ‹æˆ‘ç½®é¡¶çš„å¸–å­ï¼Œç›®å‰ç¤¾åŒºçœŸçš„å·²ç»ç§»é™¤äº†è¿™æ–¹é¢çš„æ ¡éªŒï¼Œè€Œä¸”æ˜¯å’±ä»¬å›½å†…å¼€å‘äººå‘˜æäº¤çš„patch","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1568113386,"ip_address":"","comment_id":132343,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10158027973","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªå¯¼è‡´ä¸å¾—ä¸æ‰§è¡Œè§£å‹çš„æ¶ˆæ¯æ ¡éªŒï¼Œä¸»è¦æ˜¯è¦æ ¡éªŒä»€ä¹ˆå‘¢ï¼Ÿæ ¹æ®ä»€ä¹ˆé€»è¾‘æ ¡éªŒå‘¢ï¼Ÿååˆ†æ„Ÿè°¢è€å¸ˆ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466888,"discussion_content":"CRCæ ¡éªŒã€compact topicæ ¡éªŒç­‰ã€‚ä¸è¿‡å¯ä»¥çœ‹æˆ‘ç½®é¡¶çš„å¸–å­ï¼Œç›®å‰ç¤¾åŒºçœŸçš„å·²ç»ç§»é™¤äº†è¿™æ–¹é¢çš„æ ¡éªŒï¼Œè€Œä¸”æ˜¯å’±ä»¬å›½å†…å¼€å‘äººå‘˜æäº¤çš„patch","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568113386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118482,"user_name":"è¡Œåˆ™å°†è‡³","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1564373110,"is_pvip":false,"replies":[{"id":"43516","content":"hmmmmï¼Œä¸å¤ªç¡®å®šæˆ‘100%ç†è§£äº†ä½ çš„æ„æ€ã€‚å¦‚æœä½ æ˜¯æƒ³é—®ï¼Œrebalanceä¹‹åconsumerä¼šæ›´æ¢ä¹‹å‰çš„æ¶ˆè´¹åˆ†åŒºåˆ†é…æ–¹æ¡ˆï¼Œé‚£ä¹ˆä¸è®ºæ˜¯ä¸æ˜¯key-orderingçš„ï¼Œéƒ½æœ‰è¿™ä¸ªé£é™©ï¼šå³åŸæ¥ç”±consumer1æ¶ˆè´¹çš„keyedæ¶ˆæ¯ï¼Œç°åœ¨æ”¹ç”±consumer2æ¶ˆè´¹äº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564447367,"ip_address":"","comment_id":118482,"utype":1}],"discussion_count":1,"race_medal":1,"score":"10154307702","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè¿½é—®ä¸€ä¸ªé—®é¢˜ã€‚ä¹‹å‰é—®è¿‡æ‚¨å…³äºä½¿ç”¨key-orderingç­–ç•¥çš„é—®é¢˜ã€‚å¦‚æœå‡ºç°reblanceï¼Œå°±å¯èƒ½å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±çš„é—®é¢˜ã€‚æ˜¯ä¸æ˜¯è¯´ï¼Œå¦‚æœä½¿ç”¨key-orderingç­–ç•¥ï¼Œå°±å¿…é¡»ä¿è¯æ¶ˆè´¹è€…ç»„ä¸èƒ½å‡ºç°reblanceï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460430,"discussion_content":"hmmmmï¼Œä¸å¤ªç¡®å®šæˆ‘100%ç†è§£äº†ä½ çš„æ„æ€ã€‚å¦‚æœä½ æ˜¯æƒ³é—®ï¼Œrebalanceä¹‹åconsumerä¼šæ›´æ¢ä¹‹å‰çš„æ¶ˆè´¹åˆ†åŒºåˆ†é…æ–¹æ¡ˆï¼Œé‚£ä¹ˆä¸è®ºæ˜¯ä¸æ˜¯key-orderingçš„ï¼Œéƒ½æœ‰è¿™ä¸ªé£é™©ï¼šå³åŸæ¥ç”±consumer1æ¶ˆè´¹çš„keyedæ¶ˆæ¯ï¼Œç°åœ¨æ”¹ç”±consumer2æ¶ˆè´¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564447367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107104,"user_name":"åˆ˜æœ‹","can_delete":false,"product_type":"c1","uid":1075141,"ip_address":"","ucode":"7B7B8E4776C22E","user_header":"https://static001.geekbang.org/account/avatar/00/10/67/c5/63b09189.jpg","comment_is_top":false,"comment_ctime":1561459591,"is_pvip":false,"replies":[{"id":"38826","content":"æ¶ˆæ¯batchçš„å…ƒæ•°æ®ä¸ç”¨è§£å‹ç¼©å°±èƒ½è·å–","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561514586,"ip_address":"","comment_id":107104,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151394183","product_id":100029201,"comment_content":"é—®é¢˜: å‹ç¼©&#47;è§£å‹ç¼©æ ¼å¼ç±»å‹ä¿å­˜ä½ç½®è¡¨è¿°ä¸æ¸…æ™°<br>æ–‡å†…åœ¨è§£å‹ç¼©æ—¶è¯´,Kafkaä¼šå°†å¯ç”¨äº†å“ªäº›å‹ç¼©ç®—æ³•å°è£…è¿›æ¶ˆæ¯é›†åˆä¸­,è¿™æ ·å½“Consumerè¯»å–åˆ°æ¶ˆæ¯é›†åˆæ—¶,<br>å®ƒè‡ªç„¶å°±çŸ¥é“äº†è¿™äº›æ¶ˆæ¯ä½¿ç”¨çš„æ˜¯å“ªç§å‹ç¼©ç®—æ³•.ä½†åœ¨æ–‡å†…å‹ç¼©æ—¶è¯´, V2ç‰ˆæœ¬æ˜¯å¯¹æ•´ä¸ªæ¶ˆæ¯é›†åˆè¿›è¡Œå‹ç¼©.<br><br>ä»å­—é¢æ„æ€æ¥ç†è§£,Produceråœ¨å¯¹æ¶ˆæ¯é›†åˆå‹ç¼©å‰,å·²ç»å°†å‹ç¼©æ ¼å¼å°è£…åˆ°äº†æ¶ˆæ¯é›†åˆä¸­.Consumeræ˜¯æ€ä¹ˆè·å–çš„å‹ç¼©æ ¼å¼ç±»å‹?è¦è·å–å‹ç¼©æ ¼å¼å¾—å…ˆè¿›è¡Œè§£å‹,ç„¶åæ‰èƒ½è·å–å‹ç¼©ç±»å‹. è¿™å‰åè¡¨è¿°æœ‰çŸ›ç›¾äº†,æœ‰å¾…è§£æƒ‘.","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455365,"discussion_content":"æ¶ˆæ¯batchçš„å…ƒæ•°æ®ä¸ç”¨è§£å‹ç¼©å°±èƒ½è·å–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561514586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324099,"user_name":"xusenme","can_delete":false,"product_type":"c1","uid":1263618,"ip_address":"","ucode":"5AD07291DF9752","user_header":"","comment_is_top":false,"comment_ctime":1638294316,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5933261612","product_id":100029201,"comment_content":"æ„Ÿè§‰è€å¸ˆè®²ä¸æ¸…æ¥šï¼Œç»™äººä¸€ç§å‰åçŸ›ç›¾çš„æ„Ÿè§‰ï¼Œä¸€ä¼šè¯´è§£å‹ç¼©æ— æ³•ä½¿ç”¨é›¶æ‹·è´ï¼Œä¸€ä¼šå„¿åˆè¯´ä¸€å®šä¼šæœ‰è§£å‹ç¼©","like_count":2},{"had_liked":false,"id":312498,"user_name":"æ—¥å°±æœˆå°†","can_delete":false,"product_type":"c1","uid":2651148,"ip_address":"","ucode":"0F9BA55A2898FF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/cabLXAUXiavXnEckAgo971o4l1CxP4L9wOV2eUGTyKBUicTib6gJyKV9iatM4GG1scz5Ym17GOzXWQEGzhE31tXUtQ/132","comment_is_top":false,"comment_ctime":1631843728,"is_pvip":false,"replies":[{"id":"114440","content":"å› ä¸ºè¦ç°åœ¨java heapä¸Šè¿›è¡Œå¤„ç†ï¼Œæ²¡æ³•ç›´æ¥èµ°page cache","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1634004629,"ip_address":"","comment_id":312498,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5926811024","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆBrokerç«¯å‘ç”Ÿäº†æ¶ˆæ¯æ ¼å¼è½¬æ¢ä¼šè®©kafkaä¸§å¤±zero copyç‰¹æ€§ï¼ŒBrokerç«¯å’ŒProducerç«¯ä½¿ç”¨ä¸åŒçš„å‹ç¼©ç®—æ³•ä¹Ÿä¼šå‡ºç°è¿™ç§æƒ…å†µå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526989,"discussion_content":"å› ä¸ºè¦ç°åœ¨java heapä¸Šè¿›è¡Œå¤„ç†ï¼Œæ²¡æ³•ç›´æ¥èµ°page cache","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634004629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302359,"user_name":"ä½™ç”Ÿ","can_delete":false,"product_type":"c1","uid":2421369,"ip_address":"","ucode":"AEF6C96738F03B","user_header":"https://static001.geekbang.org/account/avatar/00/24/f2/79/b2012f53.jpg","comment_is_top":false,"comment_ctime":1626178336,"is_pvip":true,"replies":[{"id":"109449","content":"å¤§è‡´å¯ä»¥è®¤ä¸ºæŠ½è±¡å‡ºäº†ä¸€äº›å…¬å…±éƒ¨åˆ†ï¼Œæ‰€ä»¥èŠ‚çœäº†ç©ºé—´","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1626241797,"ip_address":"","comment_id":302359,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5921145632","product_id":100029201,"comment_content":"æˆ‘å¯¹ä¸¤ä¸ªç‰ˆæœ¬åˆ†åˆ«åšäº†ä¸€ä¸ªç®€å•çš„æµ‹è¯•ï¼Œç»“æœæ˜¾ç¤ºï¼Œåœ¨ç›¸åŒæ¡ä»¶ä¸‹ï¼Œä¸è®ºæ˜¯å¦å¯ç”¨å‹ç¼©ï¼ŒV2 ç‰ˆæœ¬éƒ½æ¯” V1 ç‰ˆæœ¬èŠ‚çœç£ç›˜ç©ºé—´ã€‚å½“å¯ç”¨å‹ç¼©æ—¶ï¼Œè¿™ç§èŠ‚çœç©ºé—´çš„æ•ˆæœæ›´åŠ æ˜æ˜¾ï¼Œå°±åƒä¸‹é¢è¿™ä¸¤å¼ å›¾å±•ç¤ºçš„é‚£æ ·ï¼š-------æœªå‹ç¼©ï¼Œä¸ºä½•v2æ¯”v1ä¹Ÿèƒ½èŠ‚çº¦å¾ˆå¤šç©ºé—´?","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523272,"discussion_content":"å¤§è‡´å¯ä»¥è®¤ä¸ºæŠ½è±¡å‡ºäº†ä¸€äº›å…¬å…±éƒ¨åˆ†ï¼Œæ‰€ä»¥èŠ‚çœäº†ç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626241797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263923,"user_name":"Codingå°å…ˆ","can_delete":false,"product_type":"c1","uid":1051563,"ip_address":"","ucode":"965B1CC757E026","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/ab/0e2857e5.jpg","comment_is_top":false,"comment_ctime":1606295344,"is_pvip":false,"replies":[{"id":"95854","content":"å¦‚æœæƒ³è¦æ·±å…¥å­¦ä¹ Kafkaï¼Œå»ºè®®ä»æºç å¼€å§‹è¯»èµ·ï¼Œå¯ä»¥å‚è€ƒæˆ‘å¦ä¸€ä¸ªä¸“æ ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1606440257,"ip_address":"","comment_id":263923,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5901262640","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå…¬å¸æ²¡æœ‰ç”¨åˆ° Kafkaï¼Œæ€ä¹ˆæ·±å…¥å‘¢ï¼Ÿç›®å‰æ¥è¯´ï¼Œçœ‹äº† Kafka çš„ä¸€äº›æºç ï¼Œä½†è¿˜ä¸å¤Ÿæ·±å…¥ã€‚Kafka ä½¿ç”¨æ–¹é¢çš„è¯å°±ä¼šæ­å»ºå’Œ producer å’Œ comsumer çš„ç¨‹åºç¼–å†™å’Œç®€å•çš„ä¸€äº›å‚æ•°é…ç½®ã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510350,"discussion_content":"å¦‚æœæƒ³è¦æ·±å…¥å­¦ä¹ Kafkaï¼Œå»ºè®®ä»æºç å¼€å§‹è¯»èµ·ï¼Œå¯ä»¥å‚è€ƒæˆ‘å¦ä¸€ä¸ªä¸“æ ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606440257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156651,"user_name":"ã€‚ã€‚ã€‚ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":1612570,"ip_address":"","ucode":"985B1561AC9152","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Xibh27ZicBhXls5KsPibBXZI4RKlR0MUbUiaEuOS2ORibKaxWSicpIjd4lvWUWqtNAde7EeDDTpWKAiapGdHeaiaDqczWQ/132","comment_is_top":false,"comment_ctime":1574930647,"is_pvip":false,"replies":[{"id":"60180","content":"ä¸æ˜¯ä¸ç”¨æ ¡éªŒäº†ï¼Œè€Œæ˜¯æ›´â€œèªæ˜â€åœ°æ ¡éªŒäº†ï¼Œè‡³å°‘é¿å¼€äº†è§£å‹ç¼©","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1574988322,"ip_address":"","comment_id":156651,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5869897943","product_id":100029201,"comment_content":"å¦‚æœbrokerä¸ç”¨æ£€éªŒäº†ï¼Œé‚£ä¹ˆæˆ‘Produceç«¯å’ŒBrokerç«¯å°±ç®—æŒ‡å®šçš„å‹ç¼©ç®—æ³•ä¸ä¸€æ ·ä¹Ÿæ²¡å½±å“æˆ–è€…è¯´Brokerç«¯å°±æ²¡å¿…è¦æŒ‡å®šå‹ç¼©ç®—æ³•äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476187,"discussion_content":"ä¸æ˜¯ä¸ç”¨æ ¡éªŒäº†ï¼Œè€Œæ˜¯æ›´â€œèªæ˜â€åœ°æ ¡éªŒäº†ï¼Œè‡³å°‘é¿å¼€äº†è§£å‹ç¼©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574988322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134719,"user_name":"äº‘å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1010459,"ip_address":"","ucode":"4475AF1598FBFD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/1b/4b397b80.jpg","comment_is_top":false,"comment_ctime":1568902449,"is_pvip":false,"replies":[{"id":"51715","content":"å—¯å—¯ï¼Œæ˜¯çš„ã€‚ä¸è¿‡æœ€æ–°ç‰ˆå·²ç»ç§»é™¤äº†å› æ ¡éªŒè€Œå¼•å…¥çš„è§£å‹ç¼©æ“ä½œ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1568939921,"ip_address":"","comment_id":134719,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5863869745","product_id":100029201,"comment_content":"ç”¨æˆ·æ¶ˆæ¯æ ¡éªŒçš„brokerè§£å‹ç¼©è¿‡ç¨‹ï¼Œçœ‹æ–‡ç« åƒæ˜¯å¿…é¡»çš„æ“ä½œï¼Œä½†è¿™æ ·æ˜¯ä¸æ˜¯ä¹Ÿç”¨ä¸åˆ°zero copyå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467878,"discussion_content":"å—¯å—¯ï¼Œæ˜¯çš„ã€‚ä¸è¿‡æœ€æ–°ç‰ˆå·²ç»ç§»é™¤äº†å› æ ¡éªŒè€Œå¼•å…¥çš„è§£å‹ç¼©æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568939921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113021,"user_name":"æ˜ŸæœŸå…«","can_delete":false,"product_type":"c1","uid":1185504,"ip_address":"","ucode":"34A37F73A48E7F","user_header":"https://static001.geekbang.org/account/avatar/00/12/16/e0/7abad3cc.jpg","comment_is_top":false,"comment_ctime":1562888825,"is_pvip":false,"replies":[{"id":"41106","content":"é‚£å°±ä¼šå‘é€åªåŒ…å«ä¸€æ¡æ¶ˆæ¯çš„æ¶ˆæ¯é›†åˆ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562891467,"ip_address":"","comment_id":113021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857856121","product_id":100029201,"comment_content":"è€å¸ˆï¼šä»Šå¤©å†çœ‹çœ‹ä¸€éï¼Œæœ‰ä¸ªç–‘é—®ï¼Œproduceræ˜¯ä»¥æ¶ˆæ¯é›†åˆä¸ºå•ä½å‘é€ï¼Œæ¶ˆæ¯é›†åˆåŒ…å«å¤šæ¡æ¶ˆæ¯ï¼Œé‚£å¦‚æœåªå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œæ€ä¹ˆå‘é€å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458019,"discussion_content":"é‚£å°±ä¼šå‘é€åªåŒ…å«ä¸€æ¡æ¶ˆæ¯çš„æ¶ˆæ¯é›†åˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562891467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108282,"user_name":"Jowin","can_delete":false,"product_type":"c1","uid":1114356,"ip_address":"","ucode":"19017F7D06C22A","user_header":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","comment_is_top":false,"comment_ctime":1561711928,"is_pvip":false,"replies":[{"id":"39450","content":"ç´¢å¼•æœºåˆ¶æ²¡æœ‰å˜åŒ–ï¼Œæœ¬æ¥ä¹Ÿæ˜¯ç¨€ç–ç´¢å¼•ï¼Œä¿å­˜çš„æ˜¯æ¶ˆæ¯ä½ç§»åˆ°ç‰©ç†æ–‡ä»¶ä½ç½®çš„æ˜ å°„ã€‚ä¸è®ºå“ªä¸ªæ¶ˆæ¯æ ¼å¼ï¼Œæ¶ˆæ¯ä½ç§»æ•°æ®éƒ½æ˜¯å‡†ç¡®ä¸”ä¸å˜çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561947724,"ip_address":"","comment_id":108282,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856679224","product_id":100029201,"comment_content":"@èƒ¡è€å¸ˆï¼Œè¯·å‡ä¸€ä¸ªé—®é¢˜ï¼Œè®°å¾—Kafkaåè®®å‡çº§åˆ°2.0ä¹‹åï¼Œä¸€ä¸ªMessageSetä¸­ä¼šåŒ…å«å¤šæ¡æ¶ˆæ¯ï¼Œé‚£ä¹ˆåœ¨brokerç«¯ä¿å­˜æ—¥å¿—æ–‡ä»¶å¹¶æ›´æ–°ç´¢å¼•çš„æ—¶å€™ï¼Œä¸éœ€è¦æŠŠMessageSetæ‹†å¼€ï¼ŒæŸ¥çœ‹æ¯ä¸ªæ¶ˆæ¯åœ¨åˆ†åŒºä¸­çš„çš„åç§»ï¼Œä»è€Œæ›´æ–°ç´¢å¼•æ–‡ä»¶ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455899,"discussion_content":"ç´¢å¼•æœºåˆ¶æ²¡æœ‰å˜åŒ–ï¼Œæœ¬æ¥ä¹Ÿæ˜¯ç¨€ç–ç´¢å¼•ï¼Œä¿å­˜çš„æ˜¯æ¶ˆæ¯ä½ç§»åˆ°ç‰©ç†æ–‡ä»¶ä½ç½®çš„æ˜ å°„ã€‚ä¸è®ºå“ªä¸ªæ¶ˆæ¯æ ¼å¼ï¼Œæ¶ˆæ¯ä½ç§»æ•°æ®éƒ½æ˜¯å‡†ç¡®ä¸”ä¸å˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561947724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107445,"user_name":"giantbroom","can_delete":false,"product_type":"c1","uid":1059516,"ip_address":"","ucode":"7258784193C302","user_header":"","comment_is_top":false,"comment_ctime":1561537596,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5856504892","product_id":100029201,"comment_content":"æˆ‘è§‰å¾—æœ‰2ä¸ªæ–¹æ¡ˆå¯ä»¥è€ƒè™‘ï¼š<br>1. åœ¨Producerå’ŒBrokerå»ºç«‹è¿æ¥æ˜¯ï¼Œç”Ÿæˆä¸€ä¸ªtokenï¼ŒProduceræ¯æ¬¡å‘é€æ¶ˆæ¯æ˜¯éƒ½å¸¦ç€tokenï¼ŒBrokeråªéœ€éªŒè¯tokençš„æœ‰æ•ˆæ€§ï¼Œè€Œä¸å¿…åœ¨è§£å‹ç¼©ï¼›<br>2. Produceråœ¨å‹ç¼©ä¹‹åï¼Œæ ¹æ®å‹ç¼©åçš„æ•°æ®ç”Ÿæˆjwt tokenï¼ŒBrokeråŒæ ·åªéœ€éªŒè¯jwtå³å¯ã€‚","like_count":1,"discussions":[{"author":{"id":1618482,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/32/d26f92c5.jpg","nickname":"å¢¨å°é›¨çš„çŒ«","note":"","ucode":"A14EBA5949837D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210475,"discussion_content":"crcæ ¡éªŒæ˜¯ä¸ºäº†æ ¡éªŒä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®æ˜¯å¦æœ‰ä¸¢å¤±ï¼Œtokençš„å¼•å…¥èƒ½è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584724730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107115,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1561462014,"is_pvip":false,"replies":[{"id":"38825","content":"æ¶ˆè´¹è€…éƒ½æ˜¯è‡ªåŠ¨å‘åå…¼å®¹çš„ï¼Œè¿™ä¹Ÿæ˜¯å¥½äº‹å§ã€‚ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561514378,"ip_address":"","comment_id":107115,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856429310","product_id":100029201,"comment_content":"è¯·é—®ä¸€ä¸‹è€å¸ˆæ€æ ·åœ¨æ¶ˆè´¹è€…ç«¯é…ç½®è®©æ¶ˆè´¹è€…ä¸ç”¨å…¼å®¹è€ç‰ˆæœ¬V1ç‰ˆæœ¬çš„æ¶ˆæ¯?","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455372,"discussion_content":"æ¶ˆè´¹è€…éƒ½æ˜¯è‡ªåŠ¨å‘åå…¼å®¹çš„ï¼Œè¿™ä¹Ÿæ˜¯å¥½äº‹å§ã€‚ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561514378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106943,"user_name":"October","can_delete":false,"product_type":"c1","uid":1137879,"ip_address":"","ucode":"CEDA78F4A5F8B1","user_header":"https://static001.geekbang.org/account/avatar/00/11/5c/d7/e4673fde.jpg","comment_is_top":false,"comment_ctime":1561427065,"is_pvip":false,"replies":[{"id":"38832","content":"å…¶å®æ¶ˆæ¯é›†åˆæ˜¯serverç«¯æºç ä¸­çš„ææ³•ï¼Œæœ€æ–°çš„produceræºç éƒ½å«record batchã€‚ProduceRequestä¸­å¯ä»¥å°è£…å¤šä¸ªbatchã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561515077,"ip_address":"","comment_id":106943,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856394361","product_id":100029201,"comment_content":"æ¶ˆæ¯é›†åˆæŒ‡çš„æ˜¯æ¯ä¸ªProducerRequestæ‰€åŒ…å«çš„ProducerRecordï¼Œè¿˜æ˜¯æ¯ä¸ªProducerBatchåŒ…å«çš„ProudcerRecordï¼Œä¸ªäººæ„Ÿè§‰æ˜¯å‰è€…ã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455294,"discussion_content":"å…¶å®æ¶ˆæ¯é›†åˆæ˜¯serverç«¯æºç ä¸­çš„ææ³•ï¼Œæœ€æ–°çš„produceræºç éƒ½å«record batchã€‚ProduceRequestä¸­å¯ä»¥å°è£…å¤šä¸ªbatchã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561515077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347932,"user_name":"å—ç“œ","can_delete":false,"product_type":"c1","uid":1500785,"ip_address":"","ucode":"A3828CEC6257CC","user_header":"https://static001.geekbang.org/account/avatar/00/16/e6/71/491dcad1.jpg","comment_is_top":false,"comment_ctime":1654590766,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654590766","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæ¶ˆæ¯å‘é€åˆ°Brokerçš„æ—¶å€™éœ€è¦crcæ ¡éªŒï¼Œè¿™ä¸ªéœ€ä¸éœ€è¦æ¶ˆæ¯è§£ç ï¼Ÿå¦‚æœéœ€è¦æ¶ˆæ¯è§£ç çš„è¯ï¼Œå‚¨å­˜åˆ°ç£ç›˜ä¸­çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦å‹ç¼©ã€‚è¿™æ ·å­æ„Ÿè§‰å’Œä½ æå‡ºçš„ï¼šç”Ÿäº§è€…å‹ç¼©ï¼Œbrokerä¿æŒä¸å˜ï¼Œæ¶ˆè´¹è€…è§£å‹ã€‚æ„Ÿè§‰å­˜åœ¨çŸ›ç›¾ï¼Œèƒ½è§£æƒ‘ä¸‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":323415,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1637894711,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637894711","product_id":100029201,"comment_content":"Producer ç«¯å‹ç¼©ã€Broker ç«¯ä¿æŒã€Consumer ç«¯è§£å‹ç¼©ã€‚  Zstdå‹ç¼©ç®—æ³• æ¯”è¾ƒå¥½","like_count":0},{"had_liked":false,"id":320954,"user_name":"ç§‹å¤©","can_delete":false,"product_type":"c1","uid":1057056,"ip_address":"","ucode":"A7E1D953EF7E17","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","comment_is_top":false,"comment_ctime":1636596637,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1636596637","product_id":100029201,"comment_content":"åœ¨producerç«¯åšæ ¡éªŒ è¿˜æ˜¯ä¸è¡Œå§  å¦‚æœåœ¨åˆ°è¾¾brokerç«¯åšäº†æ›´æ”¹å‘¢","like_count":0},{"had_liked":false,"id":311533,"user_name":"shuifa","can_delete":false,"product_type":"c1","uid":1040063,"ip_address":"","ucode":"636733F5C88A7B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/de/bf/4df4224d.jpg","comment_is_top":false,"comment_ctime":1631271243,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1631271243","product_id":100029201,"comment_content":"å‹ç¼©ç®—æ³•çš„è¡¡é‡ä¸¤ä¸ªæŒ‡æ ‡ï¼šå‹ç¼©æ¯”å’Œååé‡(å¯ä»¥ç†è§£ä¸ºå‹ç¼©é€Ÿåº¦)<br>å‹ç¼©æ¯”æ–¹é¢ï¼šZstd &gt; LZ4 &gt; GZIP &gt; Snappy <br>ååé‡æ–¹é¢ï¼šLZ4 &gt; Snappy &gt; Zstd &gt; GZIP<br>ä»ä¸Šé¢ï¼Œç»¼åˆä¸Šçœ‹LZ4è¿˜æ˜¯æ¯”è¾ƒä¼˜ç§€çš„","like_count":0},{"had_liked":false,"id":309701,"user_name":"Allan","can_delete":false,"product_type":"c1","uid":1310388,"ip_address":"","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1630308048,"is_pvip":false,"replies":[{"id":"112525","content":"ç›®å‰æ²¡æœ‰è¿™ä¸ªè®¾ç½®","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1630810090,"ip_address":"","comment_id":309701,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630308048","product_id":100029201,"comment_content":"æ˜¯å¦å¯ä»¥æ ¹æ®è®¾ç½®æ ‡è¯†æ¥è¯´æ˜è¦ä¸è¦brokeråšè§£å‹ç¼©æ“ä½œï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525973,"discussion_content":"ç›®å‰æ²¡æœ‰è¿™ä¸ªè®¾ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630810090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309123,"user_name":"Leo","can_delete":false,"product_type":"c1","uid":2649276,"ip_address":"","ucode":"CEBAD9CDCFC2A3","user_header":"https://static001.geekbang.org/account/avatar/00/28/6c/bc/f751786b.jpg","comment_is_top":false,"comment_ctime":1629951006,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629951006","product_id":100029201,"comment_content":"ä»¥Producerä»Brokerä¸­æ¶ˆè´¹æ¥ä¸¾ä¾‹ï¼šâ€œé›¶æ‹·è´æŠ€æœ¯â€åªç”¨å°†ç£ç›˜æ–‡ä»¶çš„æ•°æ®å¤åˆ¶åˆ°é¡µé¢ç¼“å­˜ä¸­ä¸€æ¬¡ï¼Œç„¶åå°†æ•°æ®ä»é¡µé¢ç¼“å­˜ç›´æ¥å‘é€åˆ°ç½‘ç»œä¸­ï¼ˆå‘é€ç»™ä¸åŒçš„è®¢é˜…è€…æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªé¡µé¢ç¼“å­˜ï¼‰ï¼Œé¿å…äº†é‡å¤å¤åˆ¶æ“ä½œã€‚<br><br>ç®€å•æ¥è¯´ï¼š<br>1. Brokerå†…éƒ¨çš„è§£å‹æ ¡éªŒä¸æ¶‰åŠåˆ°ä¼ è¾“ï¼Œå°±æ›´ä¸æ¶‰åŠåˆ°é›¶æ‹·è´ï¼Œæ‰€ä»¥è°ˆä½•ç ´åé›¶æ‹·è´ï¼› <br>2. ä½†æ˜¯åœ¨æ¥å—Produceræ¶ˆæ¯ï¼Œä»¥åŠConsumerè¯»å–æ¶ˆæ¯çš„è¿‡ç¨‹ä¸­ï¼Œä¼šæ¶‰åŠåˆ°é›¶æ‹·è´ï¼Œè¿™æ—¶å€™å¯èƒ½ä¼šå› ä¸ºæ–‡ç« ä¸­çš„ä¸¤ç‚¹åŸå› ç ´åé›¶æ‹·è´ï¼›<br>ï¼ˆæ›´å¤šè¯·å‚è€ƒé“¾æ¥ï¼š1ï¼šhttps:&#47;&#47;www.jianshu.com&#47;p&#47;835ec2d4c170 ï¼Œ 2ï¼šhttps:&#47;&#47;blog.csdn.net&#47;ljheee&#47;article&#47;details&#47;99652448ï¼‰","like_count":0},{"had_liked":false,"id":307096,"user_name":"whuzxj","can_delete":false,"product_type":"c1","uid":1460568,"ip_address":"","ucode":"0EC6153B0A0E8A","user_header":"","comment_is_top":false,"comment_ctime":1628858319,"is_pvip":true,"replies":[{"id":"112536","content":"ä¹Ÿä¸ä¸€å®šï¼Œæ–‡æœ¬æ¶ˆæ¯æœ¬èº«å°±æœ‰å¾ˆå¤§çš„å‹ç¼©ç©ºé—´","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1630810804,"ip_address":"","comment_id":307096,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1628858319","product_id":100029201,"comment_content":"Kafkaå‘é€åªåŒ…å«ä¸€æ¡å¾ˆå¤§æ¶ˆæ¯ï¼ˆå¦‚1Mï¼‰çš„æ¶ˆæ¯é›†åˆæ˜¯ä¸æ˜¯å‹ç¼©å°±ä¸èµ·ä½œç”¨æˆ–è€…è¯´å‹ç¼©æ¯”å°±æ¥è¿‘äº1äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525042,"discussion_content":"ä¹Ÿä¸ä¸€å®šï¼Œæ–‡æœ¬æ¶ˆæ¯æœ¬èº«å°±æœ‰å¾ˆå¤§çš„å‹ç¼©ç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630810804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302358,"user_name":"ä½™ç”Ÿ","can_delete":false,"product_type":"c1","uid":2421369,"ip_address":"","ucode":"AEF6C96738F03B","user_header":"https://static001.geekbang.org/account/avatar/00/24/f2/79/b2012f53.jpg","comment_is_top":false,"comment_ctime":1626177683,"is_pvip":true,"replies":[{"id":"109450","content":"å°±æ˜¯æŒ‡åŒ…å«äº†å¤šæ¡å‹ç¼©æ¶ˆæ¯çš„å¤–å±‚æ¶ˆæ¯","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1626241838,"ip_address":"","comment_id":302358,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626177683","product_id":100029201,"comment_content":"V2 ç‰ˆæœ¬è¿˜æœ‰ä¸€ä¸ªå’Œå‹ç¼©æ¯æ¯ç›¸å…³çš„æ”¹è¿›ï¼Œå°±æ˜¯ä¿å­˜å‹ç¼©æ¶ˆæ¯çš„æ–¹æ³•å‘ç”Ÿäº†å˜åŒ–ã€‚ä¹‹å‰ V1 ç‰ˆæœ¬ä¸­ä¿å­˜å‹ç¼©æ¶ˆæ¯çš„æ–¹æ³•æ˜¯æŠŠå¤šæ¡æ¶ˆæ¯è¿›è¡Œå‹ç¼©ç„¶åä¿å­˜åˆ°å¤–å±‚æ¶ˆæ¯çš„æ¶ˆæ¯ä½“å­—æ®µä¸­ï¼›è€Œ V2 ç‰ˆæœ¬çš„åšæ³•æ˜¯å¯¹æ•´ä¸ªæ¶ˆæ¯é›†åˆè¿›è¡Œå‹ç¼©ã€‚æ˜¾ç„¶åè€…åº”è¯¥æ¯”å‰è€…æœ‰æ›´å¥½çš„å‹ç¼©æ•ˆæœã€‚-----å¤–å±‚æ¶ˆæ¯æ˜¯æŒ‡å•¥ï¼Œä¸ºå•¥æåˆ°è¿™4ä¸ªå­—","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523271,"discussion_content":"å°±æ˜¯æŒ‡åŒ…å«äº†å¤šæ¡å‹ç¼©æ¶ˆæ¯çš„å¤–å±‚æ¶ˆæ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626241838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293313,"user_name":"å›´åŸé‡Œçš„ç¨»è‰äºº","can_delete":false,"product_type":"c1","uid":2592377,"ip_address":"","ucode":"19FF15E582C16F","user_header":"https://static001.geekbang.org/account/avatar/00/27/8e/79/e0eecf4c.jpg","comment_is_top":false,"comment_ctime":1621331671,"is_pvip":false,"replies":[{"id":"107174","content":"è¿™ä¸ªé€šå¸¸å¯èƒ½æ˜¯å› ä¸º__consumer_offsetså‰¯æœ¬å‘ç”Ÿäº†é‡é€‰ä¸¾ï¼ŒæŒ‰è¯´ä¸åº”è¯¥æ˜¯é—®é¢˜çš„ä¸»è¦åŸå› ã€‚è¿˜æ˜¯æŸ¥ä¸‹æœ‰æ— å…¶ä»–çš„error logå§","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1622353759,"ip_address":"","comment_id":293313,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1621331671","product_id":100029201,"comment_content":"æ‚¨å¥½ï¼Œè¯·é—®ä¸€ä¸‹consumerä¸æ¶ˆè´¹æ¶ˆæ¯ï¼ŒæŸ¥serveræ—¥å¿—æœ‰å‘Šè­¦å¦‚ä¸‹ï¼š<br>The last checkpoint dirty offset for partition __consumer_offsets-12 is 47, which is larger than the log end offset 0. Resetting to the log start offset 0.<br>éº»çƒ¦è€å¸ˆå¸®å¿™çœ‹ä¸‹ï¼Œè¿™æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520155,"discussion_content":"è¿™ä¸ªé€šå¸¸å¯èƒ½æ˜¯å› ä¸º__consumer_offsetså‰¯æœ¬å‘ç”Ÿäº†é‡é€‰ä¸¾ï¼ŒæŒ‰è¯´ä¸åº”è¯¥æ˜¯é—®é¢˜çš„ä¸»è¦åŸå› ã€‚è¿˜æ˜¯æŸ¥ä¸‹æœ‰æ— å…¶ä»–çš„error logå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622353759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284378,"user_name":"é‚€æœˆå¯¹å½±","can_delete":false,"product_type":"c1","uid":1204313,"ip_address":"","ucode":"A3482EDF73EB0D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QicTra5HbNEwGxeG49XibcUibB82I2hpBnp8tviaiaicvFAojuMtRiaLCyl6syzzoS546H2hJibNAQ3h9XM097iapiaamcEQ/132","comment_is_top":false,"comment_ctime":1616221657,"is_pvip":false,"replies":[{"id":"103535","content":"ä¸å½±å“å•Šï¼Œå› ä¸ºæ ¡éªŒç»“æŸåå‘é€çš„æ•°æ®ä¾ç„¶å¯ä»¥ç›´æ¥èµ°zero copyé€šé“","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1616721910,"ip_address":"","comment_id":284378,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616221657","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ è¯·æ•™ä¸ªé—®é¢˜ï¼Œ ç½‘ä¸Šè¯´producerå‘brokerå‘é€æ•°æ® é€šè¿‡mmapæ–‡ä»¶æ˜ å°„çš„æ–¹å¼å®ç°é›¶æ‹·è´ï¼Œä½†æ˜¯ä½ æ–‡ç« åˆ†æbrokeræ˜¯æœ‰ä¸€ç³»åˆ—çš„æ£€éªŒæœºåˆ¶ï¼Œé‚£è‚¯å®šæ˜¯è¦è¯»åˆ°ç”¨æˆ·æ€å†…å­˜å•Š è¿™æ ·å°±ä¸å¯èƒ½å®ç°ç”Ÿäº§è€…å‘é€æ•°æ®é›¶æ‹·è´ï¼Œéš¾é“æ˜¯ç½‘ä¸Šè¯´çš„ä¸æ­£ç¡®å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517326,"discussion_content":"ä¸å½±å“å•Šï¼Œå› ä¸ºæ ¡éªŒç»“æŸåå‘é€çš„æ•°æ®ä¾ç„¶å¯ä»¥ç›´æ¥èµ°zero copyé€šé“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616721910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284019,"user_name":"Allan","can_delete":false,"product_type":"c1","uid":1310388,"ip_address":"","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1616038524,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616038524","product_id":100029201,"comment_content":"1ã€producerç«¯æ¯•ç«Ÿæ˜¯å®¢æˆ·ç«¯ï¼Œå¦‚æœæ ¡éªŒäº†ï¼ŒbrokeræœåŠ¡ç«¯ä¸ç”¨æ ¡éªŒï¼Œæˆ‘è§‰å¾—å¯èƒ½ä¼šå­˜åœ¨å±é™©çš„æ•°æ®è¿›å…¥ï¼Œæ„Ÿè§‰ä¸æ˜¯å¾ˆåˆé€‚ã€‚<br>2ã€å¦‚æœproduceræ ¡éªŒï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å¯èƒ½å°±éœ€è¦æ›´å¤šæ—¶é—´ï¼Œé‚£ä¹ˆä½“éªŒæ„Ÿä¹Ÿä¼šä¸‹é™ã€‚","like_count":0},{"had_liked":false,"id":283010,"user_name":"yuhualee7","can_delete":false,"product_type":"c1","uid":1589803,"ip_address":"","ucode":"770E51D2802D9E","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIpvzBpfHNojUU8IPHFe8qK8Xm5gkuw4BWA6AYCMTNNKaP0VU7qXcYdL3vlFDPxNrEA3mgcPnd43g/132","comment_is_top":false,"comment_ctime":1615517351,"is_pvip":false,"replies":[{"id":"102953","content":"ä¸ä¼šçš„ã€‚åŸæ¥ä»€ä¹ˆæ ·åé¢ä¾ç„¶ä»€ä¹ˆæ ·","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1615942364,"ip_address":"","comment_id":283010,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615517351","product_id":100029201,"comment_content":"è€å¸ˆè¯·æ•™ä¸€ä¸‹ï¼Œå¦‚æœæœ‰100æ¡æ¶ˆæ¯ï¼Œå‹ç¼©æ‰¹é‡å‘é€åˆ°brokerï¼Œæ¯æ¡æ¶ˆæ¯éƒ½æœ‰keyï¼Œé‚£ä¹ˆbrokeræ˜¯éœ€è¦è§£å‹ï¼ŒéªŒè¯ä¹‹åï¼Œå†æŒ‰ç…§keyå­˜åˆ°å¯¹åº”çš„åˆ†åŒºä¸­å—ï¼Ÿå¦‚æœè¿™æ ·brokeré‚£å°±ä¸æ˜¯å‹ç¼©å­˜å‚¨äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516908,"discussion_content":"ä¸ä¼šçš„ã€‚åŸæ¥ä»€ä¹ˆæ ·åé¢ä¾ç„¶ä»€ä¹ˆæ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615942364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277638,"user_name":"æ„æ— å°½","can_delete":false,"product_type":"c1","uid":1234489,"ip_address":"","ucode":"DA179626C46B81","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/39/6b45878d.jpg","comment_is_top":false,"comment_ctime":1612500606,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612500606","product_id":100029201,"comment_content":"æœ¬èŠ‚ä¸»è¦ä»‹ç»äº† Kafka ä¸­çš„å‡ ç§å¸¸è§çš„è§£å‹ç¼©ç®—æ³•ä»¥åŠä¸åŒçš„è§£å‹ç¼©ç®—æ³•å¯¹èµ„æºçš„å ç”¨æƒ…å†µã€‚<br><br>ä½•æ—¶éœ€è¦è§£å‹ç¼©ï¼Ÿ<br>å‹ç¼©ä¸€èˆ¬å‘ç”Ÿåœ¨ Producer å¤„ï¼Œè§£å‹ç¼©å‘ç”Ÿåœ¨ Consumer å¤„ã€‚ä½†æ˜¯ Brocker æ¥å—åˆ° Producer çš„æ¶ˆæ¯åï¼Œä¹Ÿä¼šè¿›è¡Œè§£å‹ç¼©ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†è¿›è¡Œæ£€éªŒã€‚<br><br>ä¸€èˆ¬å»ºè®® Brocker å’Œ Producer çš„å‹ç¼©ç®—æ³•ä¿æŒä¸€è‡´ï¼Œå¦åˆ™åœ¨ Broker å¤„å¤šè¿›è¡Œè§£å‹ç¼©ï¼Œä¼šå ç”¨ç³»ç»Ÿèµ„æºã€‚<br><br>å¦‚æœåœ¨ Brocker ç«¯å‘ç”Ÿäº†æ¶ˆæ¯æ ¼å¼çš„å˜åŒ–ï¼Œé™¤äº†è¦è§£å‹ç¼©å¤–ï¼Œè¿˜ä¼šè®© Kafka ä¸§å¤±äº† é›¶æ‹·è´ çš„ä¼˜åŠ¿ã€‚<br><br>å„ç§å‹ç¼©ç®—æ³•çš„å¯¹æ¯”ï¼š<br>åœ¨ååé‡æ–¹é¢ï¼šLZ4 &gt; Snappy &gt; zstd å’Œ GZIP<br>è€Œåœ¨å‹ç¼©æ¯”æ–¹é¢ï¼Œzstd &gt; LZ4 &gt; GZIP &gt; Snappy<br><br>æœ€ä½³å®è·µ<br>åœ¨ CPU å’Œå¸¦å®½å……è¶³çš„æƒ…å†µä¸‹å¼€å¯å‹ç¼©ç®—æ³•ï¼Œä¸ç„¶ä¼šé€‚å¾—å…¶åã€‚å¦‚æœ CPU æ¯”è¾ƒå……è¶³çš„æƒ…å†µä¸‹ï¼Œå»ºè®®å¼€å¯ zstd ç®—æ³•è¿›è¡Œå‹ç¼©ã€‚","like_count":0},{"had_liked":false,"id":276549,"user_name":"å±±æµ·","can_delete":false,"product_type":"c1","uid":1702117,"ip_address":"","ucode":"77FA9967E58FA3","user_header":"https://static001.geekbang.org/account/avatar/00/19/f8/e5/119d5c15.jpg","comment_is_top":false,"comment_ctime":1611998896,"is_pvip":false,"replies":[{"id":"100445","content":"producerå®é™…ä¸Šæ˜¯åœ¨æ„å»ºæ¶ˆæ¯çš„è¿‡ç¨‹ä¸­å‹ç¼©çš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1612141806,"ip_address":"","comment_id":276549,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1611998896","product_id":100029201,"comment_content":"æˆ‘æœ‰ç‚¹ç–‘æƒ‘ï¼Œ è§£å‹ç¼©å’Œæ ¡éªŒæ­£å¸¸æ¥è®²æœ¬æ¥å°±ä¸å†²çªå‘€ã€‚ æ ¡éªŒæ˜¯é€šè¿‡crcï¼Œæˆ‘ç†è§£æ˜¯produceråœ¨æ„å»ºå®Œæ¶ˆæ¯åè¿›è¡Œå‹ç¼©ï¼Œ å‹ç¼©ç»“æŸåè®¡ç®—ä¸€ä¸ªcrcã€‚ crcå’Œå‹ç¼©ä½“ä¸€èµ· ä¼ é€åˆ°brokerä¹‹åï¼Œ brokerå¯¹å‹ç¼©ä½“è®¡ç®—crcï¼ŒåŒæ—¶è¿›è¡Œæ¯”å¯¹ï¼Œè¿™ä¸ªè¿‡ç¨‹å®Œå…¨ä¸ç”¨è§£å‹ç¼©ã€‚ ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514748,"discussion_content":"producerå®é™…ä¸Šæ˜¯åœ¨æ„å»ºæ¶ˆæ¯çš„è¿‡ç¨‹ä¸­å‹ç¼©çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612141806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271084,"user_name":"æƒ˜ é—»","can_delete":false,"product_type":"c1","uid":1181650,"ip_address":"","ucode":"C5909F034BF072","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","comment_is_top":false,"comment_ctime":1609396289,"is_pvip":false,"replies":[{"id":"98421","content":"å…³äºzero copyçš„é—®é¢˜ï¼Œä¼šæœ‰ä¸€ä¸ªå‹˜è¯¯ã€‚å®é™…ä¸Šå¹¶ä¸ä¼šä¸§å¤±zerocopy<br>","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1609721503,"ip_address":"","comment_id":271084,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1609396289","product_id":100029201,"comment_content":"æˆ‘è§‰å¾—è€å¸ˆè¿™é‡Œè¯´çš„å‰åæ–‡å†²çª.å‰é¢è¯´æ¶ˆæ¯æ ¼å¼ä¸ä¸€è‡´ä¼šå¯¼è‡´è§£å‹ç¼©å†å‹ç¼©,ä¼šå¤±å»é›¶æ‹·è´çš„ç‰¹æ€§.åé¢åˆè¯´ä¸ç®¡æ¶ˆæ¯æ ¼å¼ä¸€ä¸ä¸€è‡´éƒ½ä¼šè§£å‹ç¼©è¿›è¡Œæ ¡éªŒ.å¯¹ç…§å‰é¢æ¥çœ‹,è¿™é‡Œä¼¼ä¹ä¹Ÿæ˜¯ä¼šä¸§å°¸é›¶æ‹·è´çš„æ€§è´¨.","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512836,"discussion_content":"å…³äºzero copyçš„é—®é¢˜ï¼Œä¼šæœ‰ä¸€ä¸ªå‹˜è¯¯ã€‚å®é™…ä¸Šå¹¶ä¸ä¼šä¸§å¤±zerocopy\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609721503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269746,"user_name":"å°å°å¨œ","can_delete":false,"product_type":"c1","uid":2331112,"ip_address":"","ucode":"CD83F09B842B2B","user_header":"https://static001.geekbang.org/account/avatar/00/23/91/e8/f2a1dfb0.jpg","comment_is_top":false,"comment_ctime":1608776357,"is_pvip":false,"replies":[{"id":"98449","content":"å…¶å®å…³äºè¿™ä¸€è®²è§£å‹ç¼©çš„æ‰€æœ‰é—®é¢˜åœ¨äºè¿™æ ·çš„äº‹å®ï¼šæˆ‘æ‰€è¯´çš„è§£å‹ç¼©æ˜¯æŒ‡æŠŠå·²å‹ç¼©çš„æ¶ˆæ¯æ‰§è¡Œè§£å‹ç¼©ä¹‹åä¿å­˜åˆ°å­˜å‚¨ä¸­ï¼Œå¦‚æœä»…ä»…æŠŠæ¶ˆæ¯è§£å‹å¹¶æ‰§è¡Œä¸€äº›æ£€æŸ¥ï¼Œä¸è¢«è§†ä¸ºæ˜¯çœŸæ­£çš„è§£å‹ç¼©","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1609724291,"ip_address":"","comment_id":269746,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1608776357","product_id":100029201,"comment_content":"ä¸çŸ¥é“è¿‡å»è¿™ä¹ˆä¹…è€å¸ˆè¿˜ä¼šä¸ä¼šè§£ç­”ç–‘é—®ï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ï¼š<br>â€œåœ¨ç”Ÿäº§è€…ç«¯å¯ç”¨å‹ç¼©æ˜¯å¾ˆè‡ªç„¶çš„æƒ³æ³•ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘è¯´åœ¨ Broker ç«¯ä¹Ÿå¯èƒ½è¿›è¡Œå‹ç¼©å‘¢ï¼Ÿå…¶å®å¤§éƒ¨åˆ†æƒ…å†µä¸‹ Broker ä» Producer ç«¯æ¥æ”¶åˆ°æ¶ˆæ¯åä»…ä»…æ˜¯åŸå°ä¸åŠ¨åœ°ä¿å­˜è€Œä¸ä¼šå¯¹å…¶è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œä½†è¿™é‡Œçš„â€œå¤§éƒ¨åˆ†æƒ…å†µâ€ä¹Ÿæ˜¯è¦æ»¡è¶³ä¸€å®šæ¡ä»¶çš„ã€‚æœ‰ä¸¤ç§ä¾‹å¤–æƒ…å†µå°±å¯èƒ½è®© Broker é‡æ–°å‹ç¼©æ¶ˆæ¯ã€‚â€åœ¨äº¬ä¸œå¤§ä½¬æå‡ºå–æ¶ˆbrokerç«¯ä¸ºæ‰§è¡Œæ ¡éªŒè€Œåšçš„è§£å‹ç¼©æ“ä½œå‰ï¼Œé™¤äº†ä¸¤ä¸ªä¾‹å¤–æƒ…å†µbrokerä¼šè§£å‹ç¼©é‡æ–°å‹ç¼©ï¼Œé‚£å…¶ä»–æƒ…å†µbrokerå°±ä¸ä¼šè§£å‹ç¼©é‡æ–°å‹ç¼©äº†å˜›ï¼Œæ„Ÿè§‰ä¸åé¢æ‰€è¯´çš„brokerç«¯æ ¡éªŒï¼ˆæ¯ä¸ªå‹ç¼©è¿‡çš„æ¶ˆæ¯é›†åˆåœ¨ Broker ç«¯å†™å…¥æ—¶éƒ½è¦å‘ç”Ÿè§£å‹ç¼©æ“ä½œï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å¯¹æ¶ˆæ¯æ‰§è¡Œå„ç§éªŒè¯ï¼‰æœ‰ç‚¹ç›¸è¿èƒŒå•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512368,"discussion_content":"å…¶å®å…³äºè¿™ä¸€è®²è§£å‹ç¼©çš„æ‰€æœ‰é—®é¢˜åœ¨äºè¿™æ ·çš„äº‹å®ï¼šæˆ‘æ‰€è¯´çš„è§£å‹ç¼©æ˜¯æŒ‡æŠŠå·²å‹ç¼©çš„æ¶ˆæ¯æ‰§è¡Œè§£å‹ç¼©ä¹‹åä¿å­˜åˆ°å­˜å‚¨ä¸­ï¼Œå¦‚æœä»…ä»…æŠŠæ¶ˆæ¯è§£å‹å¹¶æ‰§è¡Œä¸€äº›æ£€æŸ¥ï¼Œä¸è¢«è§†ä¸ºæ˜¯çœŸæ­£çš„è§£å‹ç¼©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609724291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103208,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","nickname":"å½’é›¶","note":"","ucode":"C99B8E93009A46","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352590,"discussion_content":"è¿™ä¸ªæœ‰ç‚¹å¥‡æ€ªå‘€ï¼Œå‰æï¼šåˆ°è¾¾brokerçš„æ¶ˆæ¯è‚¯å®šè¦è½ç›˜çš„ï¼Œå¦åˆ™consumeræ€ä¹ˆæ‹‰å–æ¶ˆæ¯ã€‚\né‚£ä¹ˆæŒ‰ç…§è€å¸ˆè¯´çš„ï¼Œbrokerä»…ä»…æŠŠæ¶ˆæ¯è§£å‹å¹¶æ‰§è¡Œä¸€äº›æ£€æŸ¥ï¼Œä¸è¢«è§†ä¸ºæ˜¯çœŸæ­£çš„è§£å‹ç¼©ã€‚é‚£ä¹ˆè½ç£ç›˜çš„æ¶ˆæ¯æ˜¯æœªå‹ç¼©çš„ï¼Œé‚£brokeræ˜¯å°†æ¶ˆæ¯ä¸€ä»½è§£å‹ä¸è½ç£ç›˜ï¼Ÿä¸€ä»½ä¸è§£å‹è½ç£ç›˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614777146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261848,"user_name":"å­™æ—­æ˜","can_delete":false,"product_type":"c1","uid":1561193,"ip_address":"","ucode":"E93060E3013718","user_header":"https://static001.geekbang.org/account/avatar/00/17/d2/69/1326aee1.jpg","comment_is_top":false,"comment_ctime":1605537271,"is_pvip":true,"replies":[{"id":"95151","content":"ä¼šä½¿ç”¨å•Šï¼Œä¸»è¦è¿˜æ˜¯ä¸ºäº†èŠ‚çœå¸¦å®½å’Œç£ç›˜","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1605684797,"ip_address":"","comment_id":261848,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605537271","product_id":100029201,"comment_content":"å®é™…ç”Ÿäº§ä¸­ä¼šä½¿ç”¨å‹ç¼©å—ï¼Ÿå°±æ˜¯ä¸ºäº†èŠ‚çº¦å¸¦å®½å’Œç£ç›˜èµ„æºå—ï¼Ÿè¿˜æœ‰æ²¡æœ‰å…¶ä»–æ–¹é¢çš„è€ƒè™‘","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509635,"discussion_content":"ä¼šä½¿ç”¨å•Šï¼Œä¸»è¦è¿˜æ˜¯ä¸ºäº†èŠ‚çœå¸¦å®½å’Œç£ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605684797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251899,"user_name":"Alpha","can_delete":false,"product_type":"c1","uid":1001861,"ip_address":"","ucode":"60CA15A25EC796","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/85/3f161d95.jpg","comment_is_top":false,"comment_ctime":1601957616,"is_pvip":false,"replies":[{"id":"92145","content":"åº”è¯¥è¿™ä¹ˆè¯´ï¼Œbrokerä¼šå¯¹æ¶ˆæ¯è¿›è¡Œæ£€æµ‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠåˆ°è§£å‹ç¼©è¯»å–ï¼Œä½†ä¸ä¼šä¿æŒè§£å‹ç¼©çš„çŠ¶æ€ï¼Œå› è€Œä¹Ÿå°±æ²¡æœ‰åé¢çš„å†å‹ç¼©","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1602205989,"ip_address":"","comment_id":251899,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1601957616","product_id":100029201,"comment_content":"å¯¹Brokerç«¯å¯¹æ¶ˆæ¯çš„å¤„ç†æœ‰ä¸ªç–‘é—®ï¼š<br>æ–‡ä¸­è®²åˆ°Brokeræ¥æ”¶åˆ°æ¶ˆæ¯åâ€œåŸå°ä¸åŠ¨â€åœ°ä¿å­˜ï¼Œå¹¶å¼ºè°ƒâ€œProducer ç«¯å‹ç¼©ã€Broker ç«¯ä¿æŒã€Consumer ç«¯è§£å‹ç¼©â€ï¼Œè€Œä¸‹æ–‡åˆæåˆ°å¯¹äºå‹ç¼©è¿‡çš„æ¶ˆæ¯Brokeréƒ½ä¼šè§£å‹ç¼©ä»¥ä¾¿è¿›è¡Œæ ¡éªŒï¼Œé‚£å²‚ä¸æ˜¯å¹¶éâ€œåŸå°ä¸åŠ¨â€ï¼Ÿ<br><br>å¯¹å‹ç¼©æ¶ˆæ¯çš„åœºæ™¯ï¼ŒBrokerçš„æ“ä½œæ˜¯è¿™æ ·å—ï¼šè§£å‹ - æ ¡éªŒ - é‡æ–°å‹ç¼© - å­˜å‚¨åˆ° log segmentï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506652,"discussion_content":"åº”è¯¥è¿™ä¹ˆè¯´ï¼Œbrokerä¼šå¯¹æ¶ˆæ¯è¿›è¡Œæ£€æµ‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠåˆ°è§£å‹ç¼©è¯»å–ï¼Œä½†ä¸ä¼šä¿æŒè§£å‹ç¼©çš„çŠ¶æ€ï¼Œå› è€Œä¹Ÿå°±æ²¡æœ‰åé¢çš„å†å‹ç¼©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602205989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242969,"user_name":"å•æœ‹è£","can_delete":false,"product_type":"c1","uid":1272662,"ip_address":"","ucode":"8AD121BEDD9675","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/56/37a4cea7.jpg","comment_is_top":false,"comment_ctime":1597907781,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597907781","product_id":100029201,"comment_content":"ä¸èµåŒè¿™ç§åšæ³•ï¼Œå› ä¸ºæ¶ˆæ¯çš„å‡ºé”™é‡å‘æœºåˆ¶ï¼Œåº”è¯¥åœ¨â€œè·¯ç”±å±‚â€è§£å†³ï¼Œä¹Ÿå°±æ˜¯brokerç«¯è§£å†³ï¼Œä¸ç„¶ä¼šå¾ˆå½±å“æ•´ä¸ªä½“ç³»çš„æ€§èƒ½å’Œç½‘ç»œå¸¦å®½ååæ•ˆç›Šã€‚<br>è¿˜æœ‰ä¸€ä¸ªç–‘é—®å“ˆï¼Œé‚£ä¸ªbrokerçš„è§£å‹ç¼©â€œæ ¡éªŒâ€åœºæ™¯ï¼Œæ˜¯ä¸æ˜¯è§£å‹ç¼©åä¸ä¼šå†é‡æ–°å‹ç¼©ï¼Œåªè¦ç®—æ³•ä¸€è‡´ï¼Œå‹ç¼©ä»æœ‰å‰¯æœ¬ä¿ç•™ï¼Œçœå»äº†é‡å‹ç¼©çš„è¿‡ç¨‹ã€‚ä¸ç„¶ï¼Œä¸ºä»€ä¹ˆè¯´æ˜¯ä¸åŒåœºæ™¯å‘¢ï¼Ÿï¼Ÿä¸¤ä¸ªåœ¨ä¸€å—è§£å†³ä¸ä¹…å¥½äº†ï¼Œåªæ˜¯åŠ äº†ä¸ªâ€œæ ¡éªŒâ€è¿‡ç¨‹è€Œå·²ã€‚","like_count":0},{"had_liked":false,"id":239299,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1596499956,"is_pvip":false,"replies":[{"id":"88412","content":"1. å¯¹çš„<br>2. ä¾ç„¶å¯ä»¥çš„~ ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1596519375,"ip_address":"","comment_id":239299,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596499956","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œè¦æ˜¯æˆ‘producerç«¯ç”Ÿäº§æ¶ˆæ¯æ—¶ä¸æŒ‡å®šå‹ç¼©ã€‚<br>åœ¨broker ç«¯æŒ‡å®šäº†å‹ç¼©ï¼Œé‚£ä¹ˆï¼š<br><br>1. brokerç«¯æ”¶åˆ°æ¶ˆæ¯åä¼šæŒ‰æŒ‡å®šçš„å‹ç¼©æ–¹å¼ä¸ºæˆ‘ä»¬å‹ç¼©å§ï¼Ÿ<br><br>2. æ­¤æ—¶ï¼Œåœ¨producerç«¯æœªæŒ‡å®šå‹ç¼©ï¼Œbrokerç«¯æŒ‡å®šäº†å‹ç¼©çš„æƒ…å†µä¸‹ï¼Œconsumerä»ç„¶å¯ä»¥æ­£å¸¸æ¶ˆè´¹brokerç«¯å‹ç¼©è¿‡çš„æ¶ˆæ¯å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503052,"discussion_content":"1. å¯¹çš„\n2. ä¾ç„¶å¯ä»¥çš„~ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596519375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237693,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1595927398,"is_pvip":false,"replies":[{"id":"87820","content":"1. ä¸€ä¸ªRecordBatchä¸‹çš„æ¶ˆæ¯éƒ½æ˜¯åŒä¸€ä¸ªpartitionçš„<br>2. ä¸é€‚åˆç•™ç»™consumerç«¯ï¼Œå› ä¸ºæœ‰äº›consumerå®¢æˆ·ç«¯çš„å®ç°ä¸æ˜¯ç¤¾åŒºæ¥åšçš„ï¼Œæ— æ³•ä¿è¯æ˜¯å¦çœŸçš„å¯ä»¥æ‰§è¡Œæ ¡éªŒ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1595937429,"ip_address":"","comment_id":237693,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595927398","product_id":100029201,"comment_content":"1. çœ‹åˆ°æœ‰äººè¯´åŒä¸€ä¸ªrecordBatch æ˜¯ åŒä¸€ä¸ªtopic ä¸‹çš„æ¶ˆæ¯ã€‚ æˆ‘æƒ³é—®ï¼ŒåŒä¸€ä¸ªrecord Batchçš„æ¶ˆæ¯ä¸æ˜¯åŒä¸€ä¸ªpartitionçš„å—ï¼Ÿ<br><br>2. brokerç«¯æ€»æ˜¯è¦å¯¹record batchåšæ ¡éªŒï¼Œä¹Ÿçœ‹åˆ°è€å¸ˆçš„ç¬¬ä¸€æ¡ç•™è¨€è¯´é‚£æ¡jiraå·²ç»ä¿®å¤äº†ã€‚<br>æˆ‘æƒ³é¡ºç€è¿™ä¸ªè¯´ï¼Œbrokerç«¯æ˜¯åšrecord batchçº§åˆ«çš„æ ¡éªŒï¼Œrecordçº§åˆ«çš„æ ¡éªŒèƒ½å¦ç•™åˆ°consumerç«¯åšå‘¢ï¼Ÿ æ¯•ç«Ÿbroker åˆ° consumer ä¹Ÿæœ‰å¯èƒ½å‡ºé”™ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502507,"discussion_content":"1. ä¸€ä¸ªRecordBatchä¸‹çš„æ¶ˆæ¯éƒ½æ˜¯åŒä¸€ä¸ªpartitionçš„\n2. ä¸é€‚åˆç•™ç»™consumerç«¯ï¼Œå› ä¸ºæœ‰äº›consumerå®¢æˆ·ç«¯çš„å®ç°ä¸æ˜¯ç¤¾åŒºæ¥åšçš„ï¼Œæ— æ³•ä¿è¯æ˜¯å¦çœŸçš„å¯ä»¥æ‰§è¡Œæ ¡éªŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595937429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227160,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1592301352,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592301352","product_id":100029201,"comment_content":"------brokeræ¶ˆæ¯é‡æ–°å‹ç¼©æ„å¤–æƒ…å†µ<br>æ¶ˆæ¯çš„å‹ç¼©ä¸€èˆ¬æ˜¯åœ¨producerç«¯ï¼Œä½†æ˜¯brokerä¹Ÿä¼šåœ¨ä¸€äº›æ¡ä»¶ä¸‹è§¦å‘ã€‚<br>æƒ…å†µä¸€ï¼šBroker ç«¯æŒ‡å®šäº†å’Œ Producer ç«¯ä¸åŒçš„å‹ç¼©ç®—æ³•ã€‚<br>è¿™ç§æƒ…å†µä¸‹ Broker æ¥æ”¶åˆ° GZIP å‹ç¼©æ¶ˆæ¯åï¼Œåªèƒ½è§£å‹ç¼©ç„¶åä½¿ç”¨ Snappy é‡æ–°å‹ç¼©ä¸€é<br>æƒ…å†µäºŒï¼šBroker ç«¯å‘ç”Ÿäº†æ¶ˆæ¯æ ¼å¼è½¬æ¢ã€‚<br><br>------é€‚åˆå¯ç”¨å‹ç¼©çš„æ¡ä»¶<br>å¯ç”¨å‹ç¼©çš„ä¸€ä¸ªæ¡ä»¶å°±æ˜¯ Producer ç¨‹åºè¿è¡Œæœºå™¨ä¸Šçš„ CPU èµ„æºè¦å¾ˆå……è¶³ã€‚è¿˜æœ‰å°±æ˜¯å¸¦å®½èµ„æºæœ‰é™ã€‚å¦‚æœä½ çš„å®¢æˆ·ç«¯æœºå™¨ CPU èµ„æºæœ‰å¾ˆå¤šå¯Œä½™ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ å¼€å¯ zstd å‹ç¼©ï¼Œè¿™æ ·èƒ½æå¤§åœ°èŠ‚çœç½‘ç»œèµ„æºæ¶ˆè€—<br>","like_count":0},{"had_liked":false,"id":226073,"user_name":"æœ«åŒ—ã€‚","can_delete":false,"product_type":"c1","uid":1246109,"ip_address":"","ucode":"6C6C06416E77D3","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/9d/a245af6a.jpg","comment_is_top":false,"comment_ctime":1591946027,"is_pvip":false,"replies":[{"id":"83309","content":"å¯¹çš„ã€‚æ¶ˆæ¯ä½¿ç”¨äº†ä»€ä¹ˆå‹ç¼©å™¨ä¼šè®°å½•åœ¨æ¶ˆæ¯é›†åˆå…ƒæ•°æ®ä¸­ä¸€èµ·è¢«å†™å…¥åˆ°brokerã€‚consumerè¯»å‡ºåè‡ªåŠ¨å°±çŸ¥é“ç”¨ä»€ä¹ˆç®—æ³•è§£å‹äº†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1591973333,"ip_address":"","comment_id":226073,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591946027","product_id":100029201,"comment_content":"è¯·é—®ä¸‹è€å¸ˆï¼Œå¦‚æœä¹‹å‰é¡¹ç›®æ²¡æœ‰ä½¿ç”¨å‹ç¼©ç®—æ³•ï¼Œç°åœ¨æŒ‡å®šä¸€ä¸ªå‹ç¼©ç®—æ³•ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£åªéœ€è¦é‡æ–°å‘å¸ƒä¸‹ç”Ÿäº§è€…å³å¯ï¼Œå› ä¸ºæ¶ˆè´¹è€…ä¼šæ ¹æ®æ¶ˆæ¯æ¥å†³å®šæ˜¯å¦è§£å‹ä»¥åŠå¯¹åº”çš„è§£å‹ç®—æ³•ï¼Œä¸çŸ¥é“è¿™æ ·ç†è§£æ˜¯å¦æ­£ç¡®ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498098,"discussion_content":"å¯¹çš„ã€‚æ¶ˆæ¯ä½¿ç”¨äº†ä»€ä¹ˆå‹ç¼©å™¨ä¼šè®°å½•åœ¨æ¶ˆæ¯é›†åˆå…ƒæ•°æ®ä¸­ä¸€èµ·è¢«å†™å…¥åˆ°brokerã€‚consumerè¯»å‡ºåè‡ªåŠ¨å°±çŸ¥é“ç”¨ä»€ä¹ˆç®—æ³•è§£å‹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591973333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225283,"user_name":"è€¿å˜‰è‰º","can_delete":false,"product_type":"c1","uid":2023401,"ip_address":"","ucode":"727A22BD41E8AF","user_header":"","comment_is_top":false,"comment_ctime":1591704864,"is_pvip":false,"replies":[{"id":"82955","content":"producerè‡ªå·±åšæ ¡éªŒä¸ä¸€å®šæœ‰å¯ä¿¡åº¦","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1591709733,"ip_address":"","comment_id":225283,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591704864","product_id":100029201,"comment_content":"æŠŠæ¶ˆæ¯æ ¡éªŒæ”¾åˆ°producerç«¯ï¼Œæ ¹æœ¬ä¸èµ·ä½œç”¨ï¼Œåœ¨brokerç«¯åº”è¯¥æ˜¯å¯¹æ¶ˆæ¯å®Œæ•´æ€§è¿›è¡Œæ ¡éªŒï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é‡‡ç”¨ç±»ä¼¼shaã€md5è¿™ç§ï¼Œæˆ‘çè¯´çš„å“ˆå“ˆï¼Œä¸è®¤åŒçš„è¯å‹¿å–·","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497794,"discussion_content":"producerè‡ªå·±åšæ ¡éªŒä¸ä¸€å®šæœ‰å¯ä¿¡åº¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591709733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224760,"user_name":"cocos","can_delete":false,"product_type":"c1","uid":1016599,"ip_address":"","ucode":"6DCA74033FFBEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/17/74c6e081.jpg","comment_is_top":false,"comment_ctime":1591532856,"is_pvip":false,"replies":[{"id":"82731","content":"1. å–å†³äºbrokerç«¯çš„å‹ç¼©&#47;è§£å‹ç¼©é…ç½®ã€‚å¦‚æœå’Œproducerä½¿ç”¨ç›¸åŒçš„å‹ç¼©å™¨&#47;è§£å‹ç¼©å™¨ï¼ˆè¿™æ˜¯é»˜è®¤æƒ…å†µï¼‰ï¼Œé‚£ä¹ˆbrokerä¸å¯¹æ¶ˆæ¯åšä»»ä½•è½¬æ¢ï¼Œç›´æ¥ä»¥1æ¡æ¶ˆæ¯ä¿å­˜åœ¨ç£ç›˜ä¸Š<br>2. ä¸ä¼šå‡ºç°è§£å‹ä¸€åŠæäº¤ä½ç§»çš„åœºæ™¯ï¼Œä¸€å®šæ˜¯ç­‰ä¸€æ‰¹æ¶ˆæ¯éƒ½è·å–å®Œæˆåå†æäº¤ä½ç§»","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1591539962,"ip_address":"","comment_id":224760,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591532856","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆå­¦äº†æ‚¨çš„è¯¾ç¨‹æ”¶è·å¾ˆå¤§ï¼Œç°åœ¨æœ‰2ä¸ªç–‘é—®ï¼š<br>1.å‡å¦‚ç”±10ä¸ªrecordæ„æˆçš„record batchå‹ç¼©åå‘ç»™brokerï¼ŒbrokeræŠŠå‹ç¼©åçš„æ¶ˆæ¯ä½œä¸ºä¸€ä¸ªè¿˜æ˜¯åä¸ªrecordè½ç›˜ï¼Ÿï¼ˆè¿™10æ¡æ¶ˆæ¯çš„offsetä¸€æ ·å—ï¼Ÿï¼‰<br>2.consumeræ”¶åˆ°å‹ç¼©çš„æ¶ˆæ¯ï¼ˆ10ä¸ªrecordæ„æˆï¼‰ï¼Œè§£å‹å¤„ç†åˆ°ä¸­é€”ï¼ˆå¤„ç†åˆ°ç¬¬å…­ä¸ªrecordï¼‰æäº¤ä½ç§»ï¼Œbrokerä¼šæ€ä¹ˆå¤„ç†è¿™ä¸ªä½ç§»ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497600,"discussion_content":"1. å–å†³äºbrokerç«¯çš„å‹ç¼©/è§£å‹ç¼©é…ç½®ã€‚å¦‚æœå’Œproducerä½¿ç”¨ç›¸åŒçš„å‹ç¼©å™¨/è§£å‹ç¼©å™¨ï¼ˆè¿™æ˜¯é»˜è®¤æƒ…å†µï¼‰ï¼Œé‚£ä¹ˆbrokerä¸å¯¹æ¶ˆæ¯åšä»»ä½•è½¬æ¢ï¼Œç›´æ¥ä»¥1æ¡æ¶ˆæ¯ä¿å­˜åœ¨ç£ç›˜ä¸Š\n2. ä¸ä¼šå‡ºç°è§£å‹ä¸€åŠæäº¤ä½ç§»çš„åœºæ™¯ï¼Œä¸€å®šæ˜¯ç­‰ä¸€æ‰¹æ¶ˆæ¯éƒ½è·å–å®Œæˆåå†æäº¤ä½ç§»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591539962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217566,"user_name":"Link","can_delete":false,"product_type":"c1","uid":1228809,"ip_address":"","ucode":"B29B64E34603F7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIlMZ7YLMia3JlkFjgp4Jf4YPAfIYVfND9NajC1D0MFCTbXEtHxsQLCictduy8EdKKXkKq7I5Erc4hw/132","comment_is_top":false,"comment_ctime":1589534658,"is_pvip":false,"replies":[{"id":"80552","content":"å—¯å—¯ï¼Œbrokerä¸èƒ½å®Œå…¨ç›¸ä¿¡clientsç«¯çš„æ ¡éªŒç»“æœå“¦","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1589639510,"ip_address":"","comment_id":217566,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589534658","product_id":100029201,"comment_content":"åœ¨ProduceråšCRCæ ¡éªŒï¼Œä¸ªäººæ„Ÿè§‰å°±åƒç›®å‰ç–«æƒ…å¤§ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»Aåœ°åˆ°Båœ°ï¼Œæˆ‘åœ¨Aé‡ä½“æ¸©ä¹‹åï¼Œåˆ°äº†Båœ°å°±ä¸ç”¨é‡äº†ï¼Œè¿™è‚¯å®šä¸å¤ªåˆç†","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495183,"discussion_content":"å—¯å—¯ï¼Œbrokerä¸èƒ½å®Œå…¨ç›¸ä¿¡clientsç«¯çš„æ ¡éªŒç»“æœå“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589639510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214940,"user_name":"å´ç§‘ğŸ€","can_delete":false,"product_type":"c1","uid":1112547,"ip_address":"","ucode":"8F2C317887A323","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/e3/2529c7dd.jpg","comment_is_top":false,"comment_ctime":1588853714,"is_pvip":false,"replies":[{"id":"79681","content":"å¾ˆæœ‰é“ç†ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1588983625,"ip_address":"","comment_id":214940,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588853714","product_id":100029201,"comment_content":"æ¶ˆæ¯æ ¡éªŒåº”è¯¥ä¸èƒ½æ”¾åˆ°producerï¼Œå› ä¸ºæ ¡éªŒå°±æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ•°æ®æ ¼å¼å‘ç”Ÿå˜åŒ–çš„ã€‚<br>æˆ‘ä»¬ç¡®ä¿producerä¸brokerç«¯çš„æ ¼å¼ä¸€ç›´ï¼Œå‡å°‘CPUçš„æ¶ˆè€—","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494248,"discussion_content":"å¾ˆæœ‰é“ç†ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588983625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184648,"user_name":"moooofly","can_delete":false,"product_type":"c1","uid":1008348,"ip_address":"","ucode":"4A20795C281B6F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","comment_is_top":false,"comment_ctime":1583377481,"is_pvip":false,"replies":[{"id":"71461","content":"brokerä¸èƒ½å®Œå…¨ç›¸ä¿¡ä¸€ä¸ªuntrusted clientsè‡ªå·±åšçš„æ ¡éªŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1583456877,"ip_address":"","comment_id":184648,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1583377481","product_id":100029201,"comment_content":"producer å’Œ consumer è‡ªè¡Œåˆ†åˆ«è´Ÿè´£å‹ç¼©+è§£å‹ç¼©+æ ¡éªŒï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥å®Œå…¨ç»•å¼€ broker çš„å‹ç¼©è§£å‹ç¼©é—®é¢˜äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486079,"discussion_content":"brokerä¸èƒ½å®Œå…¨ç›¸ä¿¡ä¸€ä¸ªuntrusted clientsè‡ªå·±åšçš„æ ¡éªŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583456877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008348,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","nickname":"moooofly","note":"","ucode":"4A20795C281B6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":197951,"discussion_content":"æˆ‘èƒ½ç†è§£brokerä¸èƒ½å®Œå…¨ç›¸ä¿¡è¿™ä¸ªç†ç”±ï¼Œå¦‚æœæ˜¯è‡ªå·±çš„ç¯å¢ƒï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è‡ªå·±è®¤ä¸ºæ˜¯å®Œå…¨å¯ä¿¡çš„ï¼Œæ˜¯å¦èƒ½è¿™ä¹ˆä½¿ç”¨å‘¢ï¼Œå› ä¸ºè¿™æ ·ç”¨ä¼¼ä¹æ•ˆç‡ä¼šæ›´é«˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583457716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162432,"user_name":"finger","can_delete":false,"product_type":"c1","uid":1751791,"ip_address":"","ucode":"1ADE5B840832D4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erYNqD6TIViagNYicZoykSo5WhJs1eu2auaMor17rEdMiaUgKxzibfegsicgTkHpk9JTXD1cFqzeOMWsdg/132","comment_is_top":false,"comment_ctime":1576517149,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576517149","product_id":100029201,"comment_content":"producer ä¼ è¾“å­˜åœ¨ç½‘ç»œä¸¢åŒ…é£é™©ï¼Œåœ¨produceræ ¡éªŒæ²¡æœ‰æ„ä¹‰ã€‚","like_count":0},{"had_liked":false,"id":151760,"user_name":"å‘å¾€çš„ç”Ÿæ´»","can_delete":false,"product_type":"c1","uid":1397298,"ip_address":"","ucode":"0E8DB45357820F","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/32/bb570f48.jpg","comment_is_top":false,"comment_ctime":1573786385,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1573786385","product_id":100029201,"comment_content":"Broker ç«¯è§£å‹ç¼©ä¹‹åï¼Œæ ¡éªŒæ•°æ®å®Œä¼šåœ¨é‡æ–°å‹ç¼©æ•°æ®ï¼Œæ‰€ä»¥å¯¼è‡´CPUä½¿ç”¨é£™å‡ä¹ˆ","like_count":0},{"had_liked":false,"id":150659,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1573575944,"is_pvip":false,"replies":[{"id":"57961","content":"æ‚¨èƒ½è¯¦ç»†è¯´è¯´å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1573609467,"ip_address":"","comment_id":150659,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1573575944","product_id":100029201,"comment_content":"ä¸ºå•¥è€å¸ˆçš„å†…å®¹éƒ¨åˆ†å‰åçŸ›ç›¾çš„.","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474234,"discussion_content":"æ‚¨èƒ½è¯¦ç»†è¯´è¯´å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573609467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49626,"discussion_content":"è¯´é”™äº†ã€‚åº”è¯¥æ˜¯æœ‰äº›ä¸œè¥¿è¯´ä¸æ¸…æ¥šã€‚\nå°±æ˜¯å†…å®¹æœ‰äº›åº”è¯¥ç”¨å›¾è¡¨ç¤ºæ¯”è¾ƒå¥½ã€‚\nè¿˜æœ‰å°±æ˜¯å¾ˆå¤šç–‘é—®éƒ½èƒ½åœ¨è¯„è®ºä¸­ä½“ç°å‡ºæ¥ã€‚\næŒºå¤šäººçš„è¯„è®ºæ˜¯å¯¹å†…å®¹çš„ä¸€äº›ç–‘é—®ï¼Œè™½ç„¶å®Œç»“äº†ï¼Œä½†æ˜¯è¿˜æ˜¯å»ºè®®åº”è¯¥è¯´æ¸…æ¥šç‚¹ï¼Œå¤§å®¶å°±ä¸ä¼šæœ‰å¾ˆå¤šç–‘é—®äº†ã€‚\nå¤§éƒ¨åˆ†ç–‘é—®æˆ‘éƒ½åœ¨è¯„è®ºä¸­ä½œè€…çš„å›å¤çœ‹åˆ°è¡¥å……ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573617100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148900,"user_name":"æƒœæ˜”","can_delete":false,"product_type":"c1","uid":1441589,"ip_address":"","ucode":"B3478E40B612FC","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/35/b744c027.jpg","comment_is_top":false,"comment_ctime":1573106451,"is_pvip":false,"replies":[{"id":"57349","content":"å¯ä»¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1573176191,"ip_address":"","comment_id":148900,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573106451","product_id":100029201,"comment_content":"è¯·é—®è€å¸ˆ æ¶ˆæ¯æ ¡éªŒä¹Ÿä¸èƒ½äº«å—kafkaçš„zero copyäº†å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473661,"discussion_content":"å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573176191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144815,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1572061844,"is_pvip":false,"replies":[{"id":"55952","content":"é€šå¸¸éƒ½ä¼šå¢åŠ TPSï¼Œå…·ä½“çš„å½±å“å› ç¯å¢ƒè€Œå®šï¼Œéœ€è¦ä»”ç»†æµ‹è¯•ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1572224783,"ip_address":"","comment_id":144815,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572061844","product_id":100029201,"comment_content":"å¼€å¯å‹ç¼©çš„è¯ï¼Œä¼šå¯¹ååé‡æœ‰å¤šå¤§å½±å“å‘¢ï¼Ÿæ¯”å¦‚ååç‡","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472122,"discussion_content":"é€šå¸¸éƒ½ä¼šå¢åŠ TPSï¼Œå…·ä½“çš„å½±å“å› ç¯å¢ƒè€Œå®šï¼Œéœ€è¦ä»”ç»†æµ‹è¯•ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572224783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137781,"user_name":"éªéª","can_delete":false,"product_type":"c1","uid":1192417,"ip_address":"","ucode":"899B32D219D1A0","user_header":"https://static001.geekbang.org/account/avatar/00/12/31/e1/e9efc2ae.jpg","comment_is_top":false,"comment_ctime":1569846739,"is_pvip":false,"replies":[{"id":"53470","content":"æ‚¨çš„é—®é¢˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯è§‰å¾—ä¸åº”è¯¥åªæœ‰è¿™ä¹ˆå°‘çš„ç£ç›˜å ç”¨ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1570495606,"ip_address":"","comment_id":137781,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569846739","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œäº§ç”Ÿçš„æ—¥å¿—åº”è¯¥ä¹Ÿæ˜¯å‹ç¼©çš„ï¼Œè€Œä¸”å‹ç¼©æ¯”è¿˜ä¸ä½ï¼Œ<br>æˆ‘æœ‰ä¸ªKAFKAé›†ç¾¤ä¿å­˜FILEBEATä¸Šä¼ çš„æ¶ˆæ¯ï¼Œä¸€å¤©çº¦500Gé»˜è®¤ä¿å­˜24å°æ—¶ï¼Œé›†ç¾¤ä¸‰ä¸ªåˆ†åŒºä¸‰ä»ï¼Œä½†ä¸€å¤©çš„æ—¥å¿—é‡å°±50Gå·¦å³ï¼Œä¸€ç›´ä¸èƒ½ç†è§£ï¼Œè¯·æŒ‡æ•™ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469258,"discussion_content":"æ‚¨çš„é—®é¢˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯è§‰å¾—ä¸åº”è¯¥åªæœ‰è¿™ä¹ˆå°‘çš„ç£ç›˜å ç”¨ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570495606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130012,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1567351332,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1567351332","product_id":100029201,"comment_content":"åˆ†å¸ƒå¼æœ€åŸºç¡€çš„åŸç†CAPä¸­çš„På°±æ˜¯è¯´ç½‘ç»œä¼ è¾“æ˜¯ä¼šé”™è¯¯çš„ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œä¸å¯ä¿¡ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´Producerè¿›è¡Œæ¶ˆæ¯æ ¡éªŒæœ‰ä¸¤ç‚¹ä¸åˆé€‚ï¼š<br>1ã€æ²¡å¿…è¦ï¼Œå†…å­˜ä¸­çš„æ•°æ®ä¼ è¾“å‡ºé”™æƒ…å†µä¸å¤šã€‚<br>2ã€ä¹°åŠæ³•éªŒè¯ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„æ¶ˆæ¯å‡†ç¡®ä¿¡ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œå…¶å®è¿˜æ˜¯éœ€è¦åœ¨Brokerä¸­å¯¹æ•°æ®åšä¸€æ¬¡æ ¡éªŒã€‚<br>æ‰€ä»¥æ•°æ®åœ¨Brokerç«¯åšè§£å‹ç¼©å’Œæ ¡éªŒåº”è¯¥æ˜¯éœ€è¦çš„ï¼Œä½†æ˜¯å¯ä»¥å°†è¿™è®¾ç½®ä¸€ä¸ªå¯é€‰é¡¹ï¼šä½¿ç”¨ç±»ä¼¼UDPçš„å°½æœ€å¤§èƒ½åŠ›æ ¡éªŒï¼Œæˆ–è€…å¯ä»¥æŠŠæ ¡éªŒæ”¾åˆ°Consumerä¸€ç«¯ç­‰ç­‰","like_count":0},{"had_liked":false,"id":123640,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1565738748,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565738748","product_id":100029201,"comment_content":"1ï¼šä¸è®ºæ˜¯å“ªä¸ªç‰ˆæœ¬ï¼ŒKafka çš„æ¶ˆæ¯å±‚æ¬¡éƒ½åˆ†ä¸ºä¸¤å±‚ï¼šæ¶ˆæ¯é›†åˆï¼ˆmessage setï¼‰ä»¥åŠæ¶ˆæ¯ï¼ˆmessageï¼‰ã€‚ä¸€ä¸ªæ¶ˆæ¯é›†åˆä¸­åŒ…å«è‹¥å¹²æ¡æ—¥å¿—é¡¹ï¼ˆrecord itemï¼‰ï¼Œè€Œæ—¥å¿—é¡¹æ‰æ˜¯çœŸæ­£å°è£…æ¶ˆæ¯çš„åœ°æ–¹ã€‚Kafka åº•å±‚çš„æ¶ˆæ¯æ—¥å¿—ç”±ä¸€ç³»åˆ—æ¶ˆæ¯é›†åˆæ—¥å¿—é¡¹ç»„æˆã€‚Kafka é€šå¸¸ä¸ä¼šç›´æ¥æ“ä½œå…·ä½“çš„ä¸€æ¡æ¡æ¶ˆæ¯ï¼Œå®ƒæ€»æ˜¯åœ¨æ¶ˆæ¯é›†åˆè¿™ä¸ªå±‚é¢ä¸Šè¿›è¡Œå†™å…¥æ“ä½œã€‚<br>è¿™æ®µæè¿°ï¼Œæ¦‚å¿µè¾ƒå¤šï¼Œä»–ä»¬ä¹‹é—´çš„å…³ç³»æœ‰äº›æ‡µï¼Ÿæ¶ˆæ¯å±‚æ¬¡&#47;æ¶ˆæ¯é›†åˆ&#47;æ¶ˆæ¯&#47;æ—¥å¿—é¡¹&#47;æ¶ˆæ¯æ—¥å¿—<br>æ¶ˆæ¯å±‚æ¬¡å…·ä½“æŒ‡ä»€ä¹ˆæ„æ€ï¼Ÿå®ƒåŒ…æ‹¬æ¶ˆæ¯é›†åˆå’Œæ¶ˆæ¯ï¼Œæ¶ˆæ¯é›†åˆæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå­—é¢ç†è§£æ˜¯æ¶ˆæ¯çš„é›†åˆï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œåé¢åˆè¯´æ¶ˆæ¯é›†åˆæ˜¯æ¶ˆæ¯æ—¥å¿—çš„é›†åˆï¼Œè€Œæ¶ˆæ¯æ—¥å¿—æ˜¯æ¶ˆæ¯çš„å°è£…ï¼Œæ„Ÿè§‰æ¶ˆæ¯é›†åˆå¹¶ä¸æ˜¯æ¶ˆæ¯çš„é›†åˆï¼Ÿ<br>æœŸå¾…è€å¸ˆæˆ–å…¶å®ƒåŒå­¦ï¼Œå†å¸®å¿™æ¢³ç†ä¸€ä¸‹ï¼Œå¤šè°¢<br><br>2ï¼šæˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚åŸæ¥åœ¨ V1 ç‰ˆæœ¬ä¸­ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½éœ€è¦æ‰§è¡Œ CRC æ ¡éªŒï¼Œä½†æœ‰äº›æƒ…å†µä¸‹æ¶ˆæ¯çš„ CRC å€¼æ˜¯ä¼šå‘ç”Ÿå˜åŒ–çš„ã€‚æ¯”å¦‚åœ¨ Broker ç«¯å¯èƒ½ä¼šå¯¹æ¶ˆæ¯æ—¶é—´æˆ³å­—æ®µè¿›è¡Œæ›´æ–°ï¼Œé‚£ä¹ˆé‡æ–°è®¡ç®—ä¹‹åçš„ CRC å€¼ä¹Ÿä¼šç›¸åº”æ›´æ–°ï¼›å†æ¯”å¦‚ Broker ç«¯åœ¨æ‰§è¡Œæ¶ˆæ¯æ ¼å¼è½¬æ¢æ—¶ï¼ˆä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹è€ç‰ˆæœ¬å®¢æˆ·ç«¯ç¨‹åºï¼‰ï¼Œä¹Ÿä¼šå¸¦æ¥ CRC å€¼çš„å˜åŒ–ã€‚é‰´äºè¿™äº›æƒ…å†µï¼Œå†å¯¹æ¯æ¡æ¶ˆæ¯éƒ½æ‰§è¡Œ CRC æ ¡éªŒå°±æœ‰ç‚¹æ²¡å¿…è¦äº†ï¼Œä¸ä»…æµªè´¹ç©ºé—´è¿˜è€½è¯¯ CPU æ—¶é—´ï¼Œå› æ­¤åœ¨ V2 ç‰ˆæœ¬ä¸­ï¼Œæ¶ˆæ¯çš„ CRC æ ¡éªŒå·¥ä½œå°±è¢«ç§»åˆ°äº†æ¶ˆæ¯é›†åˆè¿™ä¸€å±‚ã€‚<br>è¿™æ®µæè¿°ï¼Œæ„Ÿè§‰æ²¡å¿…è¦å†å¯¹æ¯æ¡éƒ½æ‰§è¡ŒCRCæ ¡éªŒçš„ä¾æ®ä¸å……åˆ†ï¼Ÿæ¯•ç«ŸCRCçš„å€¼å˜åŒ–äº†<br><br>3ï¼šæ–‡ä¸­å¹¶æœªæè¿°å„ç§å‹ç¼©ç®—æ³•çš„åŸç†å‘€ï¼Ÿ<br><br>4ï¼šå¯¹å¾…å‹ç¼©çš„åŸºæœ¬å¤ªåº¦<br>producerâ€”â€”æˆ‘å‹<br>brokerâ€”â€”æˆ‘ä¼ <br>consumerâ€”â€”æˆ‘è§£å‹<br>","like_count":0,"discussions":[{"author":{"id":1155275,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","nickname":"å¼ ä¸‰ä¸°","note":"","ucode":"3A6215A40B3B21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38393,"discussion_content":"é‡ç‚¹æ˜¯broker:æˆ‘ä¼  ï¼Œæ€ä¹ˆä¼ ï¼Ÿ    æ–‡ä¸­å¾ˆçŸ›ç›¾ï¼Œæœ‰æ®µè¯è¯´åªæœ‰ä¸¤ç§æƒ…å†µè§£å‹ï¼Œåæ¥åˆè¯´è§£å‹æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºéœ€è¦crcæ£€éªŒï¼Œéš¾é“è¿™ä¸¤ç§è§£å‹ä¸ä¸€æ ·ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571765830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121169,"user_name":"icejoywoo","can_delete":false,"product_type":"c1","uid":1019222,"ip_address":"","ucode":"E68C8B54D07EC3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/56/2a04dd88.jpg","comment_is_top":false,"comment_ctime":1565069766,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565069766","product_id":100029201,"comment_content":"producerç«¯åšçš„è¯ï¼Œè¿™ä¸ªæ ¡éªŒå¯èƒ½å­˜åœ¨å®‰å…¨é£é™©å§","like_count":0},{"had_liked":false,"id":120773,"user_name":"DC","can_delete":false,"product_type":"c1","uid":1250344,"ip_address":"","ucode":"EC0E7E86056FA6","user_header":"https://static001.geekbang.org/account/avatar/00/13/14/28/9e3edef0.jpg","comment_is_top":false,"comment_ctime":1564993020,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564993020","product_id":100029201,"comment_content":"æˆ‘ä½¿ç”¨åœºæ™¯ä¸­è¿˜æ²¡æœ‰é‡åˆ°ioç“¶é¢ˆï¼Œæ‰€ä»¥æ²¡æœ‰è¿›è¡Œæ¶ˆæ¯å‹ç¼©ï¼Œè€Œä¸”å¦‚æœbrokerçš„è§£å‹ä¼šå¸¦æ¥cpuçš„æ¶ˆè€—ï¼Œå¯èƒ½æœ‰é£é™©ï¼Œé‚£è¿™ä¸ªæƒè¡¡å°±è¦è°¨æ…äº†ã€‚","like_count":0},{"had_liked":false,"id":112944,"user_name":"å…¶å®æˆ‘å¾ˆå±Œ","can_delete":false,"product_type":"c1","uid":1138722,"ip_address":"","ucode":"2B75EAAD748A60","user_header":"https://static001.geekbang.org/account/avatar/00/11/60/22/92284df2.jpg","comment_is_top":false,"comment_ctime":1562852890,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562852890","product_id":100029201,"comment_content":"ç”Ÿäº§ä¸Šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œlog.retention.bytesé…ç½®çš„5gï¼Œlog.segment.bytesæ˜¯500mï¼Œç„¶åè¿™ä¸ªtopicå°±ä¸€ç›´ä¸ä¼šè¢«æ¸…ç†ï¼Œç©ºé—´ä¸€ç›´å¢é•¿ï¼Œå·²ç»åå‡ gäº†å•åˆ†åŒºå•å‰¯æœ¬ï¼Œè¯·é—®æ˜¯è§¦å‘äº†bugå—ï¼Œè§KAFKA-6030ï¼Œæ€¥ï¼Œæ±‚è€å¸ˆæŒ‡æ•™","like_count":0},{"had_liked":false,"id":112552,"user_name":"æœ¨å«å…­","can_delete":false,"product_type":"c1","uid":1199495,"ip_address":"","ucode":"D113DF578C5BF5","user_header":"https://static001.geekbang.org/account/avatar/00/12/4d/87/57236a2d.jpg","comment_is_top":false,"comment_ctime":1562756578,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1562756578","product_id":100029201,"comment_content":"è¯´ä¸€ä¸ªä¸å¤ªæˆç†Ÿçš„æƒ³æ³•ï¼š<br>å¦‚æœæ—¢è¦å‹ç¼©ï¼Œåˆè¦brokerç«¯æ ¡éªŒçš„è¯ï¼Œèƒ½ä¸èƒ½è¿™æ ·ï¼š<br>1. producerç«¯å‹ç¼©åŸå§‹æ¶ˆæ¯Aï¼Œç»“æœä¸ºA&#39;ï¼Œproducerç«¯å¯¹å‹ç¼©è¿‡ç¨‹çš„æ­£ç¡®æ€§è´Ÿè´£<br>2. producerç«¯å¯¹A&#39;ç”Ÿæˆmd5sumï¼Œæˆ–è€…å…¶ä»–å›ºå®šä½æ•°ç®—æ³•ï¼Œè¿½åŠ åˆ°Aâ€˜åä¸ºB<br>3. producerå‘é€æ¶ˆæ¯B<br>4. brokeræ‹¿åˆ°æ¶ˆæ¯Bï¼Œä»æœ«å°¾å–æ ¡éªŒå€¼ï¼Œå¯¹æ¶ˆæ¯å‰éƒ¨åˆ†è¿›è¡Œæ ¡éªŒ<br>5. brokerç«¯é€‰æ‹©ä¸¢å¼ƒæˆ–è€…ä¿ç•™æ ¡éªŒå€¼ï¼Œè§†æ¶ˆè´¹ç«¯æ˜¯å¦éœ€è¦æ ¡éªŒ<br><br>ä»¥ä¸Šã€‚<br>ç¼ºç‚¹ï¼š1.ç‰ºç‰²éƒ¨åˆ†ç½‘ç»œå¸¦å®½ï¼ŒèŠ‚çœä¸€éƒ¨åˆ†brokerç«¯cpuï¼›2. å¢åŠ äº†æ¶ˆæ¯ä½“çš„ç»“æ„<br><br>è¯·è€å¸ˆè¯„åˆ¤ï¼Œæ¬¢è¿å„ä½åŒå­¦å‘è¡¨æ„è§ã€‚","like_count":0},{"had_liked":false,"id":108385,"user_name":"ç”µå…‰ç«çŸ³","can_delete":false,"product_type":"c1","uid":1013160,"ip_address":"","ucode":"3AD33BB4AA940F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg","comment_is_top":false,"comment_ctime":1561735549,"is_pvip":false,"replies":[{"id":"39447","content":"1. ä¼šè§£å‹ï¼Œç„¶åä¿å­˜åœ¨diskä¸Š<br>2. ä¼šå‹ç¼©","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561947483,"ip_address":"","comment_id":108385,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1561735549","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œé—®ä¸ªé—®é¢˜ï¼Œ<br>1. å¦‚æœproducerè®¾ç½®äº†compress.typeï¼Œè€Œbrokeræ²¡æœ‰è®¾ç½®ï¼Œæ˜¯å¦brokeråœ¨æ¥æ”¶åˆ°å‹ç¼©çš„æ•°æ®åï¼Œè§£å‹ç„¶åå­˜å‚¨æœªå‹ç¼©çš„æ•°æ®åˆ°diskä¸Šé¢ï¼Ÿ<br>2. å¦‚æœproduceræ²¡æœ‰è®¾ç½®compress.typeï¼Œè€Œbrokerè®¾ç½®äº†compress.typeï¼Œæ˜¯å¦brokeråœ¨æ¥æ”¶åˆ°åŸæ•°æ®åï¼Œè¿›è¡Œå‹ç¼©ç„¶åå­˜å‚¨ï¼Ÿ<br>è°¢è°¢äº†ï¼","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455944,"discussion_content":"1. ä¼šè§£å‹ï¼Œç„¶åä¿å­˜åœ¨diskä¸Š\n2. ä¼šå‹ç¼©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561947483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008348,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","nickname":"moooofly","note":"","ucode":"4A20795C281B6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195643,"discussion_content":"è¿½é—®é—®é¢˜1ï¼šå¦‚æœproducerè®¾ç½®äº†compress.typeï¼Œè€Œbrokeræ²¡æœ‰è®¾ç½®ï¼Œä¹‹åbrokerä¼šè§£å‹æ¶ˆæ¯ï¼Œç„¶åä¿å­˜åœ¨diskä¸Šï¼Œé‚£åç»­å‘é€ç»™ consumer çš„æ¶ˆæ¯æ˜¯å‹ç¼©è¿‡çš„ï¼Œè¿˜æ˜¯æœªå‹ç¼©çš„ï¼Ÿè¿˜æ˜¯ä¹Ÿè¦å–å†³äº consumer é’ˆå¯¹å‹ç¼©çš„é…ç½®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583293718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542987,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","nickname":"è¡Œåˆ™å°†è‡³","note":"","ucode":"DB972F2DF059C4","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3257,"discussion_content":"è€å¸ˆï¼Œä¹‹å‰æ‚¨æåˆ°è¿‡ï¼Œè§£å‹ç¼©æ˜¯åœ¨consumerç«¯å®Œæˆçš„ã€‚æ—¢ç„¶brokerç«¯å·²ç»å°†æ¶ˆæ¯è§£å‹ç¼©ï¼Œç„¶åæŒä¹…åŒ–ç£ç›˜äº†ï¼Œé‚£\nconsumerè§£å‹ç¼©çš„æ„æ€æ˜¯æŒ‡å“ªä¸ªæ–¹é¢å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564359347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1103208,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","nickname":"å½’é›¶","note":"","ucode":"C99B8E93009A46","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1542987,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","nickname":"è¡Œåˆ™å°†è‡³","note":"","ucode":"DB972F2DF059C4","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":352591,"discussion_content":"èµèµèµã€‚è€å¸ˆè§£ç­”ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614777272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3257,"ip_address":""},"score":352591,"extra":""}]}]},{"had_liked":false,"id":108283,"user_name":"Jowin","can_delete":false,"product_type":"c1","uid":1114356,"ip_address":"","ucode":"19017F7D06C22A","user_header":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","comment_is_top":false,"comment_ctime":1561712176,"is_pvip":false,"replies":[{"id":"39449","content":"æ˜¯çš„ã€‚ä¸è¿‡è¿™å’Œè§£å‹ä¸è§£å‹æ²¡æœ‰å…³ç³»ã€‚RecordBatchä¸­è®¾ç½®äº†å‹ç¼©ç±»å‹","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561947671,"ip_address":"","comment_id":108283,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561712176","product_id":100029201,"comment_content":"æ˜¯ä¸æ˜¯æ¯ä¸ªRecordBatchåªèƒ½åŒ…å«åŒä¸€ä¸ªä¸»é¢˜çš„æ¶ˆæ¯ï¼Ÿå¦åˆ™å°±éœ€è¦è§£å‹ï¼Œä¿å­˜åˆ°ä¸åŒä¸»é¢˜çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455900,"discussion_content":"æ˜¯çš„ã€‚ä¸è¿‡è¿™å’Œè§£å‹ä¸è§£å‹æ²¡æœ‰å…³ç³»ã€‚RecordBatchä¸­è®¾ç½®äº†å‹ç¼©ç±»å‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561947671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107272,"user_name":"è½éœä¸å­¤é¹œ","can_delete":false,"product_type":"c1","uid":1111004,"ip_address":"","ucode":"1F06EB86DD2E6B","user_header":"https://static001.geekbang.org/account/avatar/00/10/f3/dc/e7e5c159.jpg","comment_is_top":false,"comment_ctime":1561510484,"is_pvip":false,"replies":[{"id":"38817","content":"ä¾ç„¶å¯èƒ½è¦è§£å‹ç¼©","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561513874,"ip_address":"","comment_id":107272,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561510484","product_id":100029201,"comment_content":"ç”Ÿäº§è€…ç«¯æ ¹æ®åŸç”Ÿæ¶ˆæ¯å‹ç¼©åçš„å‹ç¼©å†…å®¹ï¼Œç»™å‡ºæ£€éªŒè§„åˆ™ï¼ŒæœåŠ¡ç«¯ç›´æ¥æ ¹æ®æ£€éªŒè§„åˆ™å¯¹å‹ç¼©åçš„å†…å®¹åšæ£€éªŒï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455447,"discussion_content":"ä¾ç„¶å¯èƒ½è¦è§£å‹ç¼©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561513874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106968,"user_name":"é£ä¸­èŠ±","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1561429699,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561429699","product_id":100029201,"comment_content":"æ‰“å¡ç»§ç»­è·Ÿè¿›ä¸­ï¼Œè€å¸ˆä»Šå¤©æœ‰ä¸ªç¾¤é‡Œæœ‹å‹é—® ï¼šæœ‰æ²¡æœ‰åšè¿‡ç”µå•†é¡¹ç›®çš„å…„å¼Ÿ  åˆ†äº«ä¸€ä¸‹å¤šä¸ªä¿ƒé”€ å¤šç§ä»˜æ¬¾æ–¹å¼çš„  è®¾è®¡æ¨¡å‹ï¼Ÿ å½“æ—¶æˆ‘çœ‹åˆ°å°±å›ç­”ä»–ï¼š å¯ä»¥è€ƒè™‘kafka å¾—åˆ†åŒºæ¦‚å¿µè®¾è®¡ ä¸åŒå¾—ä¿ƒé”€ï¼Œä¸é€šå¾—ä»˜æ¬¾æ–¹å¼ ã€‚è€å¸ˆæˆ‘æ˜¯ä¸æ˜¯æœ‰ç‚¹å‘ä»–ï¼Ÿ å“ˆå“ˆï¼Œä½†æ˜¯æˆ‘å­¦äº†è€å¸ˆè®²å¾—åˆ†åŒºï¼Œæˆ‘æ„Ÿè§‰è¿˜æ˜¯è€ƒè™‘ä¸‹å¾—ï¼Œå‡å¦‚åœºæ™¯ï¼šä»–å¾—ä¿ƒé”€å¾ˆçŒ›ï¼Œä»–çš„æ”¯ä»˜æ–¹å¼å¾ˆæ…¢ï¼Œæˆ–è€…å¾ˆå¤šã€‚æ˜¯ä¸æ˜¯å¯ä»¥è€ƒè™‘ä¸‹å‘¢ï¼Œæœ›è€å¸ˆå°±æˆ‘å¾—ç²—ç•¥å¾—æƒ³æ³•ï¼Œç»™ç‚¹æŒ‡ç‚¹ã€‚å¤šè°¢è€å¸ˆè¾›è‹¦å¾—æŒ‡å¯¼ï¼ï¼","like_count":0},{"had_liked":false,"id":106964,"user_name":"aof","can_delete":false,"product_type":"c1","uid":1062864,"ip_address":"","ucode":"5815D63C4926BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg","comment_is_top":false,"comment_ctime":1561429367,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561429367","product_id":100029201,"comment_content":"åº”è¯¥æ˜¯ä¸è¡Œçš„ã€‚<br>å¦‚æœæå‰ï¼Œé‚£ä»producerç«¯ç½‘ç»œä¼ è¾“æ•°æ®åˆ°brokerï¼Œç„¶åå†ä¼ è¾“åˆ°consumerï¼Œè¿™ä¸¤ä¸ªé˜¶æ®µéƒ½ä¼šå› ä¸ºæ˜¯ä¼ è¾“çš„å·²ç»è§£å‹ç¼©ä¹‹åçš„æ•°æ®ï¼Œè€Œé€ æˆè€—è´¹æ›´å¤§çš„å¸¦å®½ç­‰èµ„æºï¼Œå½±å“æ•ˆç‡ã€‚","like_count":0},{"had_liked":false,"id":106938,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1561426813,"is_pvip":false,"replies":[{"id":"38833","content":"æ¶ˆæ¯é›†åˆçš„å…ƒæ•°æ®ä¿¡æ¯ä¸éœ€è§£å‹ç¼©å°±èƒ½è·å–åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561515095,"ip_address":"","comment_id":106938,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561426813","product_id":100029201,"comment_content":"Producer ç«¯å‹ç¼©ã€Broker ç«¯ä¿æŒã€Consumerç«¯è§£å‹ç¼©ï¼Œè¿™è·Ÿåé¢æè¿°æœåŠ¡ç«¯æ ¡éªŒè§£å‹ç¼©çŸ›ç›¾å•Šï¼Œè¿˜æœ‰ä¸€ä¸ªåœ°æ–¹å°±æ˜¯â€œå¯¹æ•´ä¸ªæ¶ˆæ¯é›†åˆè¿›è¡Œå‹ç¼©â€ï¼Œæ—¢ç„¶å¯¹çœŸä¸ªæ¶ˆæ¯é›†åˆå‹ç¼©ï¼Œè§£å‹æ—¶åˆæ€ä¹ˆè·å–å‹ç¼©ç®—æ³•å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455292,"discussion_content":"æ¶ˆæ¯é›†åˆçš„å…ƒæ•°æ®ä¿¡æ¯ä¸éœ€è§£å‹ç¼©å°±èƒ½è·å–åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561515095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106927,"user_name":"ç§‹","can_delete":false,"product_type":"c1","uid":1398322,"ip_address":"","ucode":"68A2544787E339","user_header":"https://static001.geekbang.org/account/avatar/00/15/56/32/c8b3256c.jpg","comment_is_top":false,"comment_ctime":1561425662,"is_pvip":false,"replies":[{"id":"38834","content":"hmmm.... è¿™ç§æ€§èƒ½ä¸Šçš„æŸè€—çœŸæ˜¯ä¸å¥½è¯„ä¼°ï¼Œæœ€å¥½å®é™…æµ‹è¯•ä¸€ä¸‹å§","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561515168,"ip_address":"","comment_id":106927,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561425662","product_id":100029201,"comment_content":"è€å¸ˆæåˆ°çš„brokeræ¶ˆæ¯æ ¼å¼è½¬æ¢å‘ç”Ÿåœ¨æœ‰è€çš„æ¶ˆè´¹ç«¯æ¶ˆè´¹v2æ ¼å¼æ¶ˆæ¯å…¼å®¹çš„ï¼Œæˆ‘æœ‰ä¸ªä¸šåŠ¡åœºæ™¯æ˜¯è€çš„ç”Ÿäº§è€…å‘é€ç»™v2ç‰ˆæœ¬çš„brokerï¼Œä¸ºäº†crcæ ¡éªŒï¼Œæ­¤æ—¶brokerä¹Ÿä¼šè¿›è¡Œæ ¼å¼è½¬æ¢å­˜å‚¨ä¹ˆï¼Ÿè¿™ä¸ªåœºæ™¯å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—å’Œé€‚é…æ¶ˆè´¹è€…æ ¼å¼æ€§èƒ½æ¶ˆè€—å¯å¦å¯¹ç­‰ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455284,"discussion_content":"hmmm.... è¿™ç§æ€§èƒ½ä¸Šçš„æŸè€—çœŸæ˜¯ä¸å¥½è¯„ä¼°ï¼Œæœ€å¥½å®é™…æµ‹è¯•ä¸€ä¸‹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561515168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106917,"user_name":"å´å®‡æ™¨","can_delete":false,"product_type":"c1","uid":1199968,"ip_address":"","ucode":"F8F45B7067DF6D","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/60/049a20e9.jpg","comment_is_top":false,"comment_ctime":1561424815,"is_pvip":false,"replies":[{"id":"38810","content":"å—¯å—¯ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›åœ°æ–¹éœ€è¦æ ¡éªŒã€‚æ¯”å¦‚Compactç±»å‹ä¸»é¢˜å¿…é¡»æœ‰keyè¿™ä»¶äº‹æƒ…å°±è¦æ ¡éªŒä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561512407,"ip_address":"","comment_id":106917,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561424815","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ•°æ®æ ¡éªŒæ˜¯æŒ‡crcç å—ï¼Œé‚£ä¸æ˜¯ä¸éœ€è¦è§£å‹ç¼©å—ï¼Ÿè¿˜æ˜¯æœ‰å…¶ä»–æ ¡éªŒçš„åœ°æ–¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455281,"discussion_content":"å—¯å—¯ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›åœ°æ–¹éœ€è¦æ ¡éªŒã€‚æ¯”å¦‚Compactç±»å‹ä¸»é¢˜å¿…é¡»æœ‰keyè¿™ä»¶äº‹æƒ…å°±è¦æ ¡éªŒä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561512407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106895,"user_name":"æ˜ç¿¼","can_delete":false,"product_type":"c1","uid":1068361,"ip_address":"","ucode":"E77F86BEB3D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","comment_is_top":false,"comment_ctime":1561423224,"is_pvip":false,"replies":[{"id":"38802","content":"è¿˜æ˜¯ä¸€æ¡ä¸€æ¡åœ°åšæ ¡éªŒã€‚æ¶ˆè´¹æ—¶æ‰§è¡Œçš„è½¬æ¢","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561511371,"ip_address":"","comment_id":106895,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1561423224","product_id":100029201,"comment_content":"æ£€éªŒçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºé”™ï¼Œè¿™ä¸ªæ”¾åœ¨å®¢æˆ·ç«¯åšå°±å¤±å»äº†æ„ä¹‰ã€‚<br><br>èƒ¡è€å¸ˆè¯·æ•™ä¸‹ï¼Œåœ¨æœåŠ¡å™¨ç«¯åšè¿™ç§æ£€éªŒå¯¹äºv2æ¶ˆæ¯è€Œè¨€ä¸æ˜¯æ•´ä¸ªæ¶ˆæ¯å—éƒ½åšæ ¡éªŒç ï¼Ÿæ€ä¹ˆè¿˜ä¸€æ¡æ¶ˆæ¯ä¸€æ¡æ¶ˆæ¯åšæ£€éªŒé‚£ï¼Ÿ<br>è¿˜æœ‰æ‚¨è¯´çš„kafkaä¸ºäº†å…¼å®¹ä¸åŒç‰ˆæœ¬çš„æ¶ˆè´¹è€…å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„æ¶ˆæ¯ï¼Œè¿™ä¸ªä¸ä¼šè®©ç£ç›˜çˆ†äº†å—ï¼Ÿè¿˜æ˜¯åªæ˜¯åœ¨æ¶ˆè´¹è¿™ä¸ªæ¶ˆæ¯çš„æ—¶é—´å†åšè½¬æ¢ï¼Ÿè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455271,"discussion_content":"è¿˜æ˜¯ä¸€æ¡ä¸€æ¡åœ°åšæ ¡éªŒã€‚æ¶ˆè´¹æ—¶æ‰§è¡Œçš„è½¬æ¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561511371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008348,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","nickname":"moooofly","note":"","ucode":"4A20795C281B6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195749,"discussion_content":"&#34;ä½œè€…å›å¤: V2ä¾ç„¶æ˜¯åšCRCæ ¡éªŒçš„ï¼Œåªä¸è¿‡æ˜¯åœ¨record batchè¿™ä¸ªå±‚çº§ä¸Šåšï¼Œè€Œä¸æ˜¯ä¸€æ¡ä¸€æ¡æ¶ˆæ¯åœ°åšäº†ã€‚å¦‚æœCRCæ ¡éªŒå¤±è´¥ï¼Œé‡ä¼ batchã€‚ä¹Ÿå°±æ˜¯è¯´ä¸ä¼šä»¥æ¶ˆæ¯ä½œä¸ºä¼ è¾“å•ä½è¿›è¡Œæ ¡éªŒï¼Œè¿™æ ·æ•ˆç‡å¤ªä½&#34;--ä½œè€…çš„å›å¤â€¦â€¦æœ‰ç‚¹çœ‹ä¸æ‡‚â€¦â€¦æ™•","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583304136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333607,"avatar":"https://static001.geekbang.org/account/avatar/00/14/59/67/f4ba1da4.jpg","nickname":"Hello world","note":"","ucode":"4D2EF3034571B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339,"discussion_content":"v2ç‰ˆæœ¬çš„æ ¡éªŒå°±æ˜¯æ¶ˆæ¯é›†åˆè§£å‹ç¼©æ ¡éªŒã€‚\nè¿™ä¸ªæ˜¯çœ‹consumerçš„æ¶ˆæ¯æ ¼å¼ï¼Œæ˜¯ä¼ è¾“ç»™consumeræ—¶è¿›è¡Œè½¬æ¢ï¼Œå› ä¸ºè¦è½¬æ¢ï¼Œæ‰€ä»¥zero copyçš„ä¼˜åŠ¿å°±æ²¡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561455830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}