{"id":418778,"title":"åŠ é¤ï½œæ„šæ˜§ä¹‹å·…ï¼šä½ çš„Rustå­¦ä¹ å¸¸è§é—®é¢˜æ±‡æ€»","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆå¤©ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å­¦äº†å¾ˆå¤š Rust çš„çŸ¥è¯†ï¼Œæ¯”å¦‚åŸºæœ¬è¯­æ³•ã€å†…å­˜ç®¡ç†ã€æ‰€æœ‰æƒã€ç”Ÿå‘½å‘¨æœŸç­‰ï¼Œä¹Ÿå±•ç¤ºäº†ä¸‰ä¸ªéå¸¸æœ‰ä»£è¡¨æ€§çš„ç¤ºä¾‹é¡¹ç›®ï¼Œè®©ä½ äº†è§£æ¥è¿‘çœŸå®åº”ç”¨ç¯å¢ƒçš„ Rust ä»£ç æ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p><p>è™½ç„¶å­¦äº†è¿™ä¹ˆå¤šä¸œè¥¿ï¼Œä½ æ˜¯ä¸æ˜¯è¿˜æ˜¯æœ‰ç§â€œä¸€å­¦å°±ä¼šï¼Œä¸€å†™å°±åºŸâ€çš„æ„Ÿè§‰ï¼Ÿåˆ«ç€æ€¥ï¼Œé¥­è¦ä¸€å£ä¸€å£åƒï¼Œä»»ä½•æ–°çŸ¥è¯†çš„å­¦ä¹ éƒ½ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œæˆ‘ä»¬è®©å­å¼¹å…ˆé£ä¸€ä¼šã€‚ä½ ä¹Ÿå¯ä»¥é¼“åŠ±ä¸€ä¸‹è‡ªå·±ï¼Œå·²ç»å®Œæˆäº†è¿™ä¹ˆå¤šæ¬¡æ‰“å¡ï¼Œç»§ç»­åšæŒã€‚</p><p>åœ¨ä»Šå¤©è¿™ä¸ªåŠ é¤é‡Œæˆ‘ä»¬å°±ä¼‘ä¸ªå°å‡ï¼Œè°ƒæ•´ä¸€ä¸‹å­¦ä¹ èŠ‚å¥ï¼Œæ¥èŠä¸€èŠ Rust å¼€å‘ä¸­çš„å¸¸è§é—®é¢˜ï¼Œå¸Œæœ›å¯ä»¥è§£å†³ä½ çš„ä¸€äº›å›°æƒ‘ã€‚</p><h2>æ‰€æœ‰æƒé—®é¢˜</h2><p><strong>Qï¼š</strong>å¦‚æœæˆ‘æƒ³åˆ›å»ºåŒå‘é“¾è¡¨ï¼Œè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ</p><p>Rust æ ‡å‡†åº“æœ‰ <a href=\"https://doc.rust-lang.org/std/collections/struct.LinkedList.html\">LinkedList</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨çš„å®ç°ã€‚ä½†æ˜¯å½“ä½ éœ€è¦ä½¿ç”¨é“¾è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆè€ƒè™‘ä¸€ä¸‹ï¼Œ<strong>åŒæ ·çš„éœ€æ±‚æ˜¯å¦å¯ä»¥ç”¨åˆ—è¡¨ Vec&lt;T&gt;ã€å¾ªç¯ç¼“å†²åŒº VecDeque&lt;T&gt; æ¥å®ç°</strong>ã€‚å› ä¸ºï¼Œé“¾è¡¨å¯¹ç¼“å­˜éå¸¸ä¸å‹å¥½ï¼Œæ€§èƒ½ä¼šå·®å¾ˆå¤šã€‚</p><p>å¦‚æœä½ åªæ˜¯å¥½å¥‡å¦‚ä½•å®ç°åŒå‘é“¾è¡¨ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¹‹å‰è®²çš„ Rc / RefCell ï¼ˆ<a href=\"https://time.geekbang.org/column/article/416722\">ç¬¬9è®²</a>ï¼‰æ¥å®ç°ã€‚å¯¹äºé“¾è¡¨çš„ next æŒ‡é’ˆï¼Œä½ å¯ä»¥ç”¨ Rcï¼›å¯¹äº prev æŒ‡é’ˆï¼Œå¯ä»¥ç”¨ <a href=\"https://doc.rust-lang.org/std/rc/struct.Weak.html\">Weak</a>ã€‚</p><p>Weak ç›¸å½“äºä¸€ä¸ªå¼±åŒ–ç‰ˆæœ¬çš„ Rcï¼Œä¸å‚ä¸åˆ°å¼•ç”¨è®¡æ•°çš„è®¡ç®—ä¸­ï¼Œè€ŒWeak å¯ä»¥ <a href=\"https://doc.rust-lang.org/std/rc/struct.Weak.html#method.upgrade\">upgrade</a> åˆ° Rc æ¥ä½¿ç”¨ã€‚å¦‚æœä½ ç”¨è¿‡å…¶å®ƒè¯­è¨€çš„å¼•ç”¨è®¡æ•°æ•°æ®ç»“æ„ï¼Œä½ åº”è¯¥å¯¹ Weak ä¸é™Œç”Ÿï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬æ‰“ç ´å¾ªç¯å¼•ç”¨ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±è¯•ç€å®ç°ä¸€ä¸‹ï¼Œç„¶åå¯¹ç…§è¿™ä¸ª<a href=\"https://gist.github.com/matey-jack/3e19b6370c6f7036a9119b79a82098ca\">å‚è€ƒå®ç°</a>ã€‚</p><!-- [[[read_end]]] --><p>ä½ ä¹Ÿè®¸å¥½å¥‡ä¸ºä»€ä¹ˆ Rust æ ‡å‡†åº“çš„ LinkedList ä¸ç”¨ Rc/Weakï¼Œé‚£æ˜¯å› ä¸ºæ ‡å‡†åº“ç›´æ¥ç”¨ <a href=\"https://doc.rust-lang.org/std/ptr/struct.NonNull.html\">NonNull</a> æŒ‡é’ˆå’Œ unsafeã€‚</p><p><strong>Qï¼š</strong>ç¼–è¯‘å™¨æ€»å‘Šè¯‰æˆ‘ï¼šâ€œuse of moved valueâ€ é”™è¯¯ï¼Œè¯¥æ€ä¹ˆç ´ï¼Ÿ</p><p>è¿™æ˜¯æˆ‘ä»¬åˆå­¦ Rust æ—¶ç»å¸¸ä¼šé‡åˆ°çš„é”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯æ˜¯è¯´<strong>ä½ åœ¨è¯•å›¾è®¿é—®ä¸€ä¸ªæ‰€æœ‰æƒå·²ç»ç§»èµ°çš„å˜é‡</strong>ã€‚</p><p>å¯¹äºè¿™æ ·çš„é”™è¯¯ï¼Œé¦–å…ˆä½ è¦åˆ¤æ–­ï¼Œè¿™ä¸ªå˜é‡çœŸçš„éœ€è¦è¢«ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½œç”¨åŸŸä¸‹ä¹ˆï¼Ÿå¦‚æœä¸éœ€è¦ï¼Œå¯ä¸å¯ä»¥ä½¿ç”¨å€Ÿç”¨ï¼Ÿï¼ˆ<a href=\"https://time.geekbang.org/column/article/415988\">ç¬¬8è®²</a>ï¼‰å¦‚æœçš„ç¡®éœ€è¦ç§»åŠ¨ç»™å¦ä¸€ä¸ªä½œç”¨åŸŸçš„è¯ï¼š</p><ol>\n<li>å¦‚æœéœ€è¦å¤šä¸ªæ‰€æœ‰è€…å…±äº«åŒä¸€ä»½æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ Rc / Arcï¼Œè¾…ä»¥ Cell / RefCell / Mutex / RwLockã€‚ï¼ˆ<a href=\"https://time.geekbang.org/column/article/416722\">ç¬¬9è®²</a>ï¼‰</li>\n<li>å¦‚æœä¸éœ€è¦å¤šä¸ªæ‰€æœ‰è€…å…±äº«ï¼Œé‚£å¯ä»¥è€ƒè™‘å®ç° Clone ç”šè‡³ Copyã€‚ï¼ˆ<a href=\"https://time.geekbang.org/column/article/415988\">ç¬¬7è®²</a>ï¼‰</li>\n</ol><h2>ç”Ÿå‘½å‘¨æœŸé—®é¢˜</h2><p><strong>Qï¼š</strong>ä¸ºä»€ä¹ˆæˆ‘çš„å‡½æ•°è¿”å›ä¸€ä¸ªå¼•ç”¨çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ€»æ˜¯è·Ÿæˆ‘è¿‡ä¸å»ï¼Ÿ</p><p>å‡½æ•°è¿”å›å¼•ç”¨æ—¶ï¼Œé™¤éæ˜¯é™æ€å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼•ç”¨ä¸€å®šå’Œå¸¦æœ‰å¼•ç”¨çš„æŸä¸ªè¾“å…¥å‚æ•°æœ‰å…³ã€‚è¾“å…¥å‚æ•°å¯èƒ½æ˜¯ &amp;selfã€&amp;mut self æˆ–è€… &amp;T / &amp;mut Tã€‚<strong>æˆ‘ä»¬è¦å»ºç«‹æ­£ç¡®çš„è¾“å…¥å’Œè¿”å›å€¼ä¹‹é—´çš„å…³ç³»ï¼Œè¿™ä¸ªå…³ç³»å’Œå‡½æ•°å†…éƒ¨çš„å®ç°æ— å…³ï¼Œåªå’Œå‡½æ•°çš„ç­¾åæœ‰å…³</strong>ã€‚</p><p>æ¯”å¦‚ HashMap çš„ <a href=\"https://doc.rust-lang.org/src/std/collections/hash/map.rs.html#729-735\">get() æ–¹æ³•</a>ï¼š</p><pre><code class=\"language-rust\">pub fn get&lt;Q: ?Sized&gt;(&amp;self, k: &amp;Q) -&gt; Option&lt;&amp;V&gt;\n    where\n        K: Borrow&lt;Q&gt;,\n        Q: Hash + Eq\n</code></pre><p>æˆ‘ä»¬å¹¶ä¸ç”¨å®ç°å®ƒæˆ–è€…çŸ¥é“å®ƒå¦‚ä½•å®ç°ï¼Œå°±å¯ä»¥ç¡®å®šè¿”å›å€¼ Option&lt;&amp;V&gt; åˆ°åº•è·Ÿè°æœ‰å…³ç³»ã€‚å› ä¸ºè¿™é‡Œåªæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š&amp;self æˆ–è€… k: &amp;Qã€‚æ˜¾ç„¶æ˜¯ &amp;selfï¼Œå› ä¸º HashMap æŒæœ‰æ•°æ®ï¼Œè€Œ k åªæ˜¯ç”¨æ¥åœ¨ HashMap é‡ŒæŸ¥è¯¢çš„ keyã€‚</p><p>è¿™é‡Œä¸ºä»€ä¹ˆä¸éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‚æ•°å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬ä¹‹å‰è®²çš„è§„åˆ™ï¼š<strong>å½“ &amp;self / &amp;mut self å‡ºç°æ—¶ï¼Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸå’Œå®ƒå…³è”</strong>ã€‚ï¼ˆ<a href=\"https://time.geekbang.org/column/article/417384\">ç¬¬10è®²</a>ï¼‰è¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„è§„åˆ™ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æ–¹æ³•ï¼Œå¦‚æœè¿”å›å¼•ç”¨ï¼Œå®ƒåŸºæœ¬ä¸Šæ˜¯å¼•ç”¨ &amp;self é‡Œçš„æŸä¸ªæ•°æ®ã€‚</p><p>å¦‚æœä½ èƒ½ææ˜ç™½è¿™ä¸€å±‚å…³ç³»ï¼Œé‚£ä¹ˆå°±æ¯”è¾ƒå®¹æ˜“å¤„ç†ï¼Œå‡½æ•°è¿”å›å¼•ç”¨æ—¶å‡ºç°çš„ç”Ÿå‘½å‘¨æœŸé”™è¯¯ã€‚</p><p>å½“ä½ è¦è¿”å›åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œåˆ›å»ºçš„æˆ–è€…å¾—åˆ°çš„æ•°æ®ï¼Œå’Œå‚æ•°æ— å…³ï¼Œé‚£ä¹ˆ<strong>æ— è®ºå®ƒæ˜¯ä¸€ä¸ªæœ‰æ‰€æœ‰æƒçš„æ•°æ®ï¼Œè¿˜æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œä½ åªèƒ½è¿”å›å¸¦æ‰€æœ‰æƒçš„æ•°æ®</strong>ã€‚å¯¹äºå¼•ç”¨ï¼Œè¿™å°±æ„å‘³ç€è°ƒç”¨ clone() æˆ–è€… to_owned() æ¥ï¼Œä»å¼•ç”¨ä¸­å¾—åˆ°æ‰€æœ‰æƒã€‚</p><h2>æ•°æ®ç»“æ„é—®é¢˜</h2><p><strong>Qï¼š</strong>ä¸ºä»€ä¹ˆ Rust å­—ç¬¦ä¸²è¿™ä¹ˆæ··ä¹±ï¼Œæœ‰ Stringã€&amp;Stringã€&amp;str è¿™ä¹ˆå¤šä¸åŒçš„è¡¨è¿°ï¼Ÿ</p><p>æˆ‘ä¸å¾—ä¸è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¯¯å¯¼æ€§çš„é—®é¢˜ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜æœ‰ç‚¹èƒ¡ä¹±æ€»ç»“çš„å€¾å‘ï¼Œå¾ˆå®¹æ˜“æŠŠäººå¸¦åˆ°æ²Ÿé‡Œã€‚</p><p>é¦–å…ˆï¼Œä»»ä½•æ•°æ®ç»“æ„ Tï¼Œéƒ½å¯ä»¥æœ‰æŒ‡å‘å®ƒçš„å¼•ç”¨ &amp;Tï¼Œ<strong>æ‰€ä»¥ String è·Ÿ &amp;Stringçš„åŒºåˆ«ï¼Œä»¥åŠ String è·Ÿ &amp;strçš„åŒºåˆ«ï¼Œå‹æ ¹æ˜¯ä¸¤ä¸ªé—®é¢˜</strong>ã€‚</p><p>æ›´å¥½çš„é—®é¢˜æ˜¯ï¼šä¸ºä»€ä¹ˆæœ‰äº† Stringï¼Œè¿˜è¦æœ‰ &amp;strï¼Ÿæˆ–è€…ï¼Œæ›´é€šç”¨çš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆ Stringã€Vec&lt;T&gt; è¿™æ ·å­˜æ”¾è¿ç»­æ•°æ®çš„å®¹å™¨ï¼Œè¿˜è¦æœ‰åˆ‡ç‰‡çš„æ¦‚å¿µå‘¢ï¼Ÿ</p><p>ä¸€æ—¦é—®åˆ°ç‚¹å­ä¸Šï¼Œç­”æ¡ˆä¸è¨€è‡ªå–»ï¼Œå› ä¸ºåˆ‡ç‰‡æ˜¯ä¸€ä¸ªéå¸¸é€šç”¨çš„æ•°æ®ç»“æ„ã€‚</p><p>ç”¨è¿‡ Python çš„äººéƒ½çŸ¥é“ï¼š</p><pre><code class=\"language-python\">s = \"hello world\"\nlet slice1 = s[:5] # å¯ä»¥å¯¹å­—ç¬¦ä¸²åˆ‡ç‰‡\nlet slice2 = slice1[1:3] # å¯ä»¥å¯¹åˆ‡ç‰‡å†åˆ‡ç‰‡\nprint(slice1, slice2) # æ‰“å° hello, el\n</code></pre><p>è¿™å’Œ Rust çš„ String åˆ‡ç‰‡ä½•å…¶ç›¸ä¼¼ï¼š</p><pre><code class=\"language-rust\">let s = \"hello world\".to_string();\nlet slice1 = &amp;s[..5]; // å¯ä»¥å¯¹å­—ç¬¦ä¸²åˆ‡ç‰‡\nlet slice2 = &amp;slice1[1..3]; // å¯ä»¥å¯¹åˆ‡ç‰‡å†åˆ‡ç‰‡\nprintln!(\"{} {}\", slice1, slice2); // æ‰“å° hello el\n</code></pre><p>æ‰€ä»¥ &amp;str æ˜¯ String çš„åˆ‡ç‰‡ï¼Œä¹Ÿå¯ä»¥æ˜¯ &amp;str çš„åˆ‡ç‰‡ã€‚å®ƒå’Œ &amp;[T] ä¸€æ ·ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå°±æ˜¯ä¸€ä¸ªå¸¦ç€é•¿åº¦çš„èƒ–æŒ‡é’ˆï¼ŒæŒ‡å‘äº†ä¸€ç‰‡è¿ç»­çš„å†…å­˜åŒºåŸŸã€‚</p><p>ä½ å¯ä»¥è¿™ä¹ˆç†è§£ï¼š<strong>åˆ‡ç‰‡ä¹‹äº Vec&lt;T&gt; / String ç­‰æ•°æ®ï¼Œå°±å¥½æ¯”æ•°æ®åº“é‡Œçš„è§†å›¾ï¼ˆviewï¼‰ä¹‹äºè¡¨ï¼ˆtableï¼‰</strong>ã€‚å…³äºè¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä¼šåœ¨åé¢ï¼Œè®²Rustçš„æ•°æ®ç»“æ„æ—¶è¯¦ç»†è®²åˆ°ã€‚</p><p><strong>Qï¼š</strong>åœ¨è¯¾ç¨‹çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œç”¨äº†å¾ˆå¤š unwrap()ï¼Œè¿™æ ·å¯ä»¥ä¹ˆï¼Ÿ</p><p>å½“æˆ‘ä»¬éœ€è¦ä» Option<t> æˆ–è€… Result&lt;T, E&gt; ä¸­è·å¾—æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ unwrap()ï¼Œè¿™æ˜¯ç¤ºä¾‹ä»£ç å‡ºç° unwrap() çš„åŸå› ã€‚</t></p><p>å¦‚æœæˆ‘ä»¬åªæ˜¯å†™ä¸€äº›å­¦ä¹ æ€§è´¨çš„ä»£ç ï¼Œé‚£ä¹ˆ unwrap() æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé™¤éä½ å¯ä»¥ç¡®ä¿ unwrap() ä¸ä¼šå¼•å‘ panic!()ï¼Œå¦åˆ™åº”è¯¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥å¤„ç†æ•°æ®ï¼Œæˆ–è€…ä½¿ç”¨é”™è¯¯å¤„ç†çš„ ? æ“ä½œç¬¦ã€‚æˆ‘ä»¬åç»­ä¼šæœ‰ä¸“é—¨ä¸€è®²èŠ Rust çš„é”™è¯¯å¤„ç†ã€‚</p><p>é‚£ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥ç¡®å®š unwrap() ä¸ä¼š panic å‘¢ï¼Ÿå¦‚æœåœ¨åš unwrap() ä¹‹å‰ï¼Œ<strong>Option&lt;T&gt; æˆ–è€… Result&lt;T, E&gt; ä¸­å·²ç»æœ‰åˆé€‚çš„å€¼ï¼ˆSome(T) æˆ–è€… Ok(T)ï¼‰</strong>ï¼Œä½ å°±å¯ä»¥åš unwrap()ã€‚æ¯”å¦‚è¿™æ ·çš„ä»£ç ï¼š</p><pre><code class=\"language-rust\">// å‡è®¾ v æ˜¯ä¸€ä¸ª Vec&lt;T&gt;\nif v.is_empty() {\n    return None;\n}\n\n// æˆ‘ä»¬ç°åœ¨ç¡®å®šè‡³å°‘æœ‰ä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥ unwrap æ˜¯å®‰å…¨çš„\nlet first = v.pop().unwrap();\n</code></pre><p><strong>Qï¼š</strong>ä¸ºä»€ä¹ˆæ ‡å‡†åº“çš„æ•°æ®ç»“æ„æ¯”å¦‚ Rc / Vec ç”¨é‚£ä¹ˆå¤š unsafeï¼Œä½†åˆ«äººæ€»æ˜¯å‘Šè¯‰æˆ‘ï¼Œunsafe ä¸å¥½ï¼Ÿ</p><p>å¥½é—®é¢˜ã€‚C è¯­è¨€çš„å¼€å‘è€…ä¹Ÿè®¤ä¸º asm ä¸å¥½ï¼Œä½† C çš„å¾ˆå¤šåº“é‡Œä¹Ÿå¤§é‡ä½¿ç”¨ asmã€‚</p><p>æ ‡å‡†åº“çš„è´£ä»»æ˜¯ï¼Œåœ¨ä¿è¯å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œå³ä½¿ç‰ºç‰²ä¸€å®šçš„å¯è¯»æ€§ï¼Œä¹Ÿè¦ç”¨æœ€é«˜æ•ˆçš„æ‰‹æ®µæ¥å®ç°è¦å®ç°çš„åŠŸèƒ½ï¼›åŒæ—¶ï¼Œä¸ºæ ‡å‡†åº“çš„ç”¨æˆ·æä¾›ä¸€ä¸ªä¼˜é›…ã€é«˜çº§çš„æŠ½è±¡ï¼Œè®©ä»–ä»¬å¯ä»¥åœ¨ç»å¤§å¤šæ•°åœºåˆä¸‹å†™å‡ºæ¼‚äº®çš„ä»£ç ï¼Œæ— éœ€å’Œä¸‘é™‹æ‰“äº¤é“ã€‚</p><p>Rustä¸­ï¼Œunsafe ä»£ç æŠŠç¨‹åºçš„æ­£ç¡®æ€§å’Œå®‰å…¨æ€§äº¤ç»™äº†å¼€å‘è€…æ¥ä¿è¯ï¼Œè€Œæ ‡å‡†åº“çš„å¼€å‘è€…èŠ±äº†å¤§é‡çš„ç²¾åŠ›å’Œæµ‹è¯•æ¥ä¿è¯è¿™ç§æ­£ç¡®æ€§å’Œå®‰å…¨æ€§ã€‚è€Œæˆ‘ä»¬è‡ªå·±æ’°å†™ unsafe ä»£ç æ—¶ï¼Œé™¤éæœ‰ç»éªŒä¸°å¯Œçš„å¼€å‘è€… review ä»£ç ï¼Œå¦åˆ™ï¼Œæœ‰å¯èƒ½ç–äºå¯¹å¹¶å‘æƒ…å†µçš„è€ƒè™‘ï¼Œå†™å‡ºäº†æœ‰é—®é¢˜çš„ä»£ç ã€‚</p><p>æ‰€ä»¥åªè¦ä¸æ˜¯å¿…é¡»ï¼Œå»ºè®®ä¸è¦å†™ unsafe ä»£ç ã€‚<strong>æ¯•ç«Ÿå¤§éƒ¨åˆ†æˆ‘ä»¬è¦å¤„ç†çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥é€šè¿‡è‰¯å¥½çš„è®¾è®¡ã€åˆé€‚çš„æ•°æ®ç»“æ„å’Œç®—æ³•æ¥å®ç°</strong>ã€‚</p><p><strong>Qï¼š</strong>åœ¨ Rust é‡Œï¼Œæˆ‘å¦‚ä½•å£°æ˜å…¨å±€å˜é‡å‘¢ï¼Ÿ</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/411632\">ç¬¬3è®²</a>é‡Œï¼Œæˆ‘ä»¬è®²è¿‡ const å’Œ staticï¼Œå®ƒä»¬éƒ½å¯ä»¥ç”¨äºå£°æ˜å…¨å±€å˜é‡ã€‚ä½†æ³¨æ„ï¼Œé™¤éä½¿ç”¨ unsafeï¼Œstatic æ— æ³•ä½œä¸º mut ä½¿ç”¨ï¼Œå› ä¸ºè¿™æ„å‘³ç€å®ƒå¯èƒ½åœ¨å¤šä¸ªçº¿ç¨‹ä¸‹è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸å®‰å…¨ï¼š</p><pre><code class=\"language-rust\">static mut COUNTER: u64 = 0; \n\nfn main() {\n    COUNTER += 1; // ç¼–è¯‘ä¸è¿‡ï¼Œç¼–è¯‘å™¨å‘Šè¯‰ä½ éœ€è¦ä½¿ç”¨ unsafe\n}\n</code></pre><p>å¦‚æœä½ çš„ç¡®æƒ³ç”¨å¯å†™çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥ç”¨ Mutex&lt;T&gt;ï¼Œç„¶è€Œï¼Œåˆå§‹åŒ–å®ƒå¾ˆéº»çƒ¦ï¼Œè¿™æ—¶ï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªåº“ <a href=\"https://docs.rs/lazy_static/1.4.0/lazy_static/\">lazy_static</a>ã€‚æ¯”å¦‚ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=4a292c22d7c1ad359e64d36a3f6806ab\">ä»£ç </a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">use lazy_static::lazy_static;\nuse std::collections::HashMap;\nuse std::sync::{Arc, Mutex};\n\nlazy_static! {\n    static ref HASHMAP: Arc&lt;Mutex&lt;HashMap&lt;u32, &amp;'static str&gt;&gt;&gt; = {\n        let mut m = HashMap::new();\n        m.insert(0, \"foo\");\n        m.insert(1, \"bar\");\n        m.insert(2, \"baz\");\n        Arc::new(Mutex::new(m))\n    };\n}\n\nfn main() {\n    let mut map = HASHMAP.lock().unwrap();\n    map.insert(3, \"waz\");\n\n    println!(\"map: {:?}\", map);\n}\n</code></pre><h2>è°ƒè¯•å·¥å…·</h2><p><strong>Qï¼š</strong>Rust ä¸‹ï¼Œä¸€èˆ¬å¦‚ä½•è°ƒè¯•åº”ç”¨ç¨‹åºï¼Ÿ</p><p>æˆ‘è‡ªå·±ä¸€èˆ¬ä¼šç”¨ tracing æ¥æ‰“æ—¥å¿—ï¼Œä¸€äº›ç®€å•çš„ç¤ºä¾‹ä»£ç ä¼šä½¿ç”¨ println! / dbg! ï¼Œæ¥æŸ¥çœ‹æ•°æ®ç»“æ„åœ¨æŸä¸ªæ—¶åˆ»çš„çŠ¶æ€ã€‚è€Œåœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œæˆ‘å‡ ä¹ä¸ä¼šç”¨è°ƒè¯•å™¨è®¾ç½®æ–­ç‚¹å•æ­¥è·Ÿè¸ªã€‚</p><p>å› ä¸ºä¸å…¶æµªè´¹æ—¶é—´åœ¨è°ƒè¯•ä¸Šï¼Œä¸å¦‚å¤šèŠ±æ—¶é—´åšè®¾è®¡ã€‚<strong>åœ¨å®ç°çš„æ—¶å€™ï¼Œæ·»åŠ è¶³å¤Ÿæ¸…æ™°çš„æ—¥å¿—ï¼Œä»¥åŠæ’°å†™åˆé€‚çš„å•å…ƒæµ‹è¯•ï¼Œæ¥ç¡®ä¿ä»£ç é€»è¾‘ä¸Šçš„æ­£ç¡®æ€§</strong>ã€‚å¦‚æœä½ å‘ç°è‡ªå·±æ€»éœ€è¦ä½¿ç”¨è°ƒè¯•å·¥å…·å•æ­¥è·Ÿè¸ªæ‰èƒ½ææ¸…æ¥šç¨‹åºçš„çŠ¶æ€ï¼Œè¯´æ˜ä»£ç æ²¡æœ‰è®¾è®¡å¥½ï¼Œè¿‡äºå¤æ‚ã€‚</p><p>å½“æˆ‘å­¦ä¹  Rust æ—¶ï¼Œä¼šå¸¸ç”¨è°ƒè¯•å·¥å…·æ¥æŸ¥çœ‹å†…å­˜ä¿¡æ¯ï¼Œåç»­çš„è¯¾ç¨‹ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œåœ¨åˆ†ææœ‰äº›æ•°æ®ç»“æ„æ—¶ä½¿ç”¨äº†è¿™äº›å·¥å…·ã€‚</p><p>Rust ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <a href=\"https://github.com/rust-lang/rust/blob/master/src/etc/rust-gdb\">rust-gdb</a> æˆ– <a href=\"https://github.com/rust-lang/rust/blob/master/src/etc/rust-lldb\">rust-lldb</a>ï¼Œå®ƒä»¬æä¾›äº†ä¸€äº›å¯¹ Rust æ›´å‹å¥½çš„ pretty-print åŠŸèƒ½ï¼Œåœ¨å®‰è£… Rust æ—¶ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢«å®‰è£…ã€‚æˆ‘ä¸ªäººä¹ æƒ¯ä½¿ç”¨ gdbï¼Œä½† rust-gdb é€‚åˆåœ¨ linux ä¸‹ï¼Œåœ¨ OS X ä¸‹æœ‰äº›é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä¸€èˆ¬ä¼šåˆ‡åˆ° Ubuntu è™šæ‹Ÿæœºä¸­ä½¿ç”¨ rust-gdbã€‚</p><h2>å…¶å®ƒé—®é¢˜</h2><p><strong>Qï¼š</strong>ä¸ºä»€ä¹ˆ Rust ç¼–è¯‘å‡ºæ¥çš„äºŒè¿›åˆ¶é‚£ä¹ˆå¤§ï¼Ÿä¸ºä»€ä¹ˆ Rust ä»£ç è¿è¡Œèµ·æ¥é‚£ä¹ˆæ…¢ï¼Ÿ</p><p>å¦‚æœä½ æ˜¯ç”¨ cargo build ç¼–è¯‘å‡ºæ¥çš„ï¼Œé‚£å¾ˆæ­£å¸¸ï¼Œå› ä¸ºè¿™æ˜¯ä¸ª debug buildï¼Œé‡Œé¢æœ‰å¤§é‡çš„è°ƒè¯•ä¿¡æ¯ã€‚ä½ å¯ä»¥ç”¨ cargo build --release æ¥ç¼–è¯‘å‡ºä¼˜åŒ–è¿‡çš„ç‰ˆæœ¬ï¼Œå®ƒä¼šå°å¾ˆå¤šã€‚å¦å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å¾ˆå¤šæ–¹æ³•è¿›ä¸€æ­¥ä¼˜åŒ–äºŒè¿›åˆ¶çš„å¤§å°ï¼Œå¦‚æœä½ å¯¹æ­¤æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª<a href=\"https://github.com/johnthagen/min-sized-rust\">æ–‡æ¡£</a>ã€‚</p><p>Rustçš„å¾ˆå¤šåº“å¦‚æœä½ ä¸ç”¨ --release æ¥ç¼–è¯‘ï¼Œå®ƒä¸ä¼šåšä»»ä½•ä¼˜åŒ–ï¼Œæœ‰æ—¶å€™ç”šè‡³æ„Ÿè§‰æ¯”ä½ çš„ Node.js ä»£ç è¿˜æ…¢ã€‚æ‰€ä»¥å½“ä½ è¦æŠŠä»£ç åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œä¸€å®šè¦ä½¿ç”¨ release buildã€‚</p><p><strong>Qï¼š</strong>è¿™é—¨è¯¾ä½¿ç”¨ä»€ä¹ˆæ ·çš„ Rust ç‰ˆæœ¬ï¼Ÿä¼šéšç€ 2021 edition æ›´æ–°ä¹ˆï¼Ÿ</p><p>ä¼šçš„ã€‚Rust æ˜¯ä¸€é—¨ä¸æ–­åœ¨å‘å±•çš„è¯­è¨€ï¼Œæ¯å…­å‘¨å°±ä¼šæœ‰ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬è¯ç”Ÿï¼Œä¼´éšç€å¾ˆå¤šæ–°çš„åŠŸèƒ½ã€‚æ¯”å¦‚ <a href=\"https://blog.rust-lang.org/2021/03/25/Rust-1.51.0.html\">const generics</a>ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=1f2d31bcc74d6a2582e344b5d8e9288a\">ä»£ç </a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">#[derive(Debug)]\nstruct Packet&lt;const N: usize&gt; {\n    data: [u8; N],\n}\n\nfn main() {\n    let ip = Packet { data: [0u8; 20] };\n    let udp = Packet { data: [0u8; 8] };\n    \n    println!(\"ip: {:?}, udp: {:?}\", ip, udp);\n}\n</code></pre><p>å†æ¯”å¦‚æœ€è¿‘åˆšå‘çš„ <a href=\"https://blog.rust-lang.org/2021/09/09/Rust-1.55.0.html\">1.55</a> æ”¯æŒäº† open range patternï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=f42ce3a4464501791cbe3f4e2bfc8cc7\">ä»£ç </a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">fn main() {\n    println!(\"{}\", match_range(10001));\n}\n\nfn match_range(v: usize) -&gt; &amp;'static str {\n    match v {\n        0..=99 =&gt; \"good\",\n        100..=9999 =&gt; \"unbelievable\",\n        10000.. =&gt; \"beyond expectation\",\n        _ =&gt; unreachable!(),\n    }\n}\n</code></pre><p>å†è¿‡ä¸€ä¸ªå¤šæœˆï¼ŒRust å°±è¦å‘å¸ƒ 2021 edition äº†ã€‚ç”±äº Rust è‰¯å¥½çš„å‘åå…¼å®¹èƒ½åŠ›ï¼Œæˆ‘å»ºè®®ä¿æŒä½¿ç”¨æœ€æ–°çš„ Rust ç‰ˆæœ¬ã€‚ç­‰ 2021 edition å‘å¸ƒåï¼Œæˆ‘ä¼šæ›´æ–°ä»£ç åº“åˆ° 2021 editionï¼Œæ–‡ç¨¿ä¸­çš„ç›¸åº”ä»£ç ä¹Ÿä¼šéšä¹‹æ›´æ–°ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æ¥ä¸€é“ç®€å•çš„æ€è€ƒé¢˜ï¼Œæˆ‘ä»¬æŠŠä¹‹å‰å­¦çš„å†…å®¹èä¼šè´¯é€šä¸€ä¸‹ï¼Œä»£ç å±•ç¤ºäº†æœ‰é—®é¢˜çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½ èƒ½æ‰¾åˆ°åŸå› ä¹ˆï¼Ÿï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=a71fcd49f8562fba6b01912715ee9133\">ä»£ç </a>ï¼‰</p><pre><code class=\"language-rust\">use std::str::Chars;\n\n// é”™è¯¯ï¼Œä¸ºä»€ä¹ˆï¼Ÿ\nfn lifetime1() -&gt; &amp;str {\n    let name = \"Tyr\".to_string();\n    &amp;name[1..]\n}\n\n// é”™è¯¯ï¼Œä¸ºä»€ä¹ˆï¼Ÿ\nfn lifetime2(name: String) -&gt; &amp;str {\n    &amp;name[1..]\n}\n\n// æ­£ç¡®ï¼Œä¸ºä»€ä¹ˆï¼Ÿ\nfn lifetime3(name: &amp;str) -&gt; Chars {\n    name.chars()\n}\n</code></pre><p>æ¬¢è¿åœ¨ç•™è¨€åŒºæŠ¢ç­”ï¼Œä¹Ÿéå¸¸æ¬¢è¿ä½ åˆ†äº«è¿™æ®µæ—¶é—´çš„å­¦ä¹ æ„Ÿå—ï¼Œä¸€èµ·äº¤æµè¿›æ­¥ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾å›å½’æ­£æ–‡è®²Rustçš„ç±»å‹ç³»ç»Ÿï¼Œä¸‹èŠ‚è¯¾è§ï¼</p>","comments":[{"had_liked":false,"id":330325,"user_name":"ç§‹å£°èµ‹","can_delete":false,"product_type":"c1","uid":1214412,"ip_address":"","ucode":"56E3AECD442E6E","user_header":"https://static001.geekbang.org/account/avatar/00/12/87/cc/628b5fe3.jpg","comment_is_top":true,"comment_ctime":1641912101,"is_pvip":false,"replies":[{"id":"120473","content":"06é‚£ç¯‡æœ‰ç®€å•è®²åˆ°å®ï¼Œä¸è¿‡å› ä¸ºå®æ˜¯é«˜çº§å†…å®¹åœ¨è¯¾ç¨‹é‡Œç›®å‰æ²¡æœ‰è¯¦ç»†è®²è§£ï¼Œä½ å¯ä»¥è‡ªå·±æ‰¾èµ„æ–™å­¦ä¹ ã€‚ä¹‹åè€å¸ˆæœ‰ç©ºä¼šè¡¥å……ä¸€ç¯‡å…³äºå®çš„å†…å®¹ï¼Œä¹Ÿæ¬¢è¿æœŸå¾…ï½","user_name":"ç¼–è¾‘å›å¤","comment_id":330325,"uid":"2547771","ip_address":"","utype":2,"ctime":1642039573,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"9.2233720470866002e+18","product_id":100085301,"comment_content":"æˆ‘çœ‹åˆ°ç”¨äº†å¾ˆå¤šçš„å®ï¼Œè¿™ä¸ªæœ‰æ²¡æœ‰è¯¦ç»†çš„è¯´æ˜å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2547771,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e0/3b/8ec916b2.jpg","nickname":"å¤šå°‘","note":"","ucode":"0A6EF7AA6E4BB7","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545683,"discussion_content":"06é‚£ç¯‡æœ‰ç®€å•è®²åˆ°å®ï¼Œä¸è¿‡å› ä¸ºå®æ˜¯é«˜çº§å†…å®¹åœ¨è¯¾ç¨‹é‡Œç›®å‰æ²¡æœ‰è¯¦ç»†è®²è§£ï¼Œä½ å¯ä»¥è‡ªå·±æ‰¾èµ„æ–™å­¦ä¹ ã€‚ä¹‹åè€å¸ˆæœ‰ç©ºä¼šè¡¥å……ä¸€ç¯‡å…³äºå®çš„å†…å®¹ï¼Œä¹Ÿæ¬¢è¿æœŸå¾…ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642039573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312472,"user_name":"lisiur","can_delete":false,"product_type":"c1","uid":1201350,"ip_address":"","ucode":"CEB2DBCE29CAA7","user_header":"https://static001.geekbang.org/account/avatar/00/12/54/c6/c2481790.jpg","comment_is_top":false,"comment_ctime":1631836215,"is_pvip":false,"replies":[{"id":"113217","content":"éå¸¸æ£’ï¼","user_name":"ä½œè€…å›å¤","comment_id":312472,"uid":"1079375","ip_address":"","utype":1,"ctime":1631844304,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"147660724279","product_id":100085301,"comment_content":"ç¬¬ä¸€ä¸ªï¼Œæ²¡æœ‰æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸï¼Œä½†å³ä½¿æ ‡æ³¨ä¹Ÿä¸å¯¹ï¼Œå› ä¸ºè¿”å›å€¼å¼•ç”¨äº†æœ¬åœ°å·²ç» drop çš„ Stringï¼Œä¼šé€ æˆæ‚¬å‚æŒ‡é’ˆé—®é¢˜ï¼›<br><br>ç¬¬äºŒä¸ªï¼Œå’Œç¬¬ä¸€ä¸ªç±»ä¼¼ï¼Œå› ä¸ºå‚æ•°æ˜¯å…·æœ‰æ‰€æœ‰æƒçš„ Stringï¼Œè¯¥ String ä¼šåœ¨å‡½æ•°æ‰§è¡Œå®Œåè¢« dropï¼Œè¿”å›å€¼ä¸èƒ½å¼•ç”¨è¯¥ Stringï¼›<br><br>ç¬¬ä¸‰ä¸ªï¼Œå› ä¸º Chars çš„å®Œæ•´å®šä¹‰æ˜¯ Chars&lt;&#39;a&gt;ï¼Œæ ¹æ®ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨è§„åˆ™ï¼ŒChars å†…éƒ¨çš„å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸå’Œå‚æ•° name ä¸€è‡´ï¼Œæ‰€ä»¥ä¸ä¼šäº§ç”Ÿé—®é¢˜ã€‚","like_count":34,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526975,"discussion_content":"éå¸¸æ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631844304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312522,"user_name":"ä¹Œé¾™çŒ¹","can_delete":false,"product_type":"c1","uid":2739949,"ip_address":"","ucode":"43F94A0DEC54BE","user_header":"https://static001.geekbang.org/account/avatar/00/29/ce/ed/3dbe915b.jpg","comment_is_top":false,"comment_ctime":1631848102,"is_pvip":false,"replies":[{"id":"113270","content":":) åšè¿™ä¸€é—¨è¯¾æˆ‘å°±æ„Ÿè§‰å·²ç»ç«­å°½å…¨åŠ›äº†ï¼Œåšå®Œä¼°è®¡è¦ä¼‘åŠå¹´æ‰èƒ½ç¼“è¿‡æ¥","user_name":"ä½œè€…å›å¤","comment_id":312522,"uid":"1079375","ip_address":"","utype":1,"ctime":1631927415,"user_name_real":"Tyr"}],"discussion_count":6,"race_medal":0,"score":"74646292134","product_id":100085301,"comment_content":"é™ˆè€å¸ˆï¼Œå•¥æ—¶å€™å†å‡ºä¸€é—¨ Elixir ç¼–ç¨‹çš„ç¬¬ä¸€è¯¾å•Š ","like_count":17,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526998,"discussion_content":":) åšè¿™ä¸€é—¨è¯¾æˆ‘å°±æ„Ÿè§‰å·²ç»ç«­å°½å…¨åŠ›äº†ï¼Œåšå®Œä¼°è®¡è¦ä¼‘åŠå¹´æ‰èƒ½ç¼“è¿‡æ¥","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1631927415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1805805,"avatar":"","nickname":"renee","note":"","ucode":"3821D9296CD19F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":578267,"discussion_content":"å¤©å“¥ï¼Œè¾›è‹¦äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656637006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":526998,"ip_address":""},"score":578267,"extra":""}]},{"author":{"id":1214893,"avatar":"https://static001.geekbang.org/account/avatar/00/12/89/ad/4efd929a.jpg","nickname":"è€è€","note":"","ucode":"C32E743518DECD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552432,"discussion_content":"é™ˆè€å¸ˆçš„è¯¾ä¹°çˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645457187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1021850,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/97/9a/01f87514.jpg","nickname":"woodong","note":"","ucode":"069EE091ADB5F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541882,"discussion_content":"å¥½æœŸå¾…ï½  /å…´å¥‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640590830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1159437,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/tNAmMmIN8MMCd1Leto5gtH2XhIzVRgAeqe6RJOsibEZtPpQH81MBvxu6xY5pL2fgkqNzgerQwYrmO9U3UYU2Tmw/132","nickname":"Zilr","note":"","ucode":"A38FD050DB316B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397509,"discussion_content":"æ˜¯è¯´çœŸæœ‰å¯èƒ½åšå—? æœŸå¾…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632630572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2739949,"avatar":"https://static001.geekbang.org/account/avatar/00/29/ce/ed/3dbe915b.jpg","nickname":"ä¹Œé¾™çŒ¹","note":"","ucode":"43F94A0DEC54BE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394571,"discussion_content":"æ²¡å…³ç³» å•¥æ—¶å€™å‡º  ä¸€å®šæ”¯æŒ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631943006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312464,"user_name":"gnu","can_delete":false,"product_type":"c1","uid":1631832,"ip_address":"","ucode":"B598402D9377D9","user_header":"https://static001.geekbang.org/account/avatar/00/18/e6/58/a0f74927.jpg","comment_is_top":false,"comment_ctime":1631812275,"is_pvip":false,"replies":[{"id":"113219","content":"éå¸¸æ£’ï¼ä¿®æ”¹å¾—ä¹Ÿå¾ˆæ£’ï¼","user_name":"ä½œè€…å›å¤","comment_id":312464,"uid":"1079375","ip_address":"","utype":1,"ctime":1631844387,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"44581485235","product_id":100085301,"comment_content":"lifetime1: <br>è¿”å›çš„å¼•ç”¨æ˜¯åœ¨ lifetime1 é‡Œè¢«åˆ†é…ï¼Œlifetime1 ç»“æŸåå¼•ç”¨å°±è¢«å›æ”¶ï¼Œæ‰€ä»¥é”™è¯¯ã€‚<br>æ”¹ä¸ºè½¬æˆ string åè¿”å›ã€‚<br>```<br>fn lifetime1() -&gt; String {<br>    let name = &quot;Tyr&quot;.to_string();<br>    name[1..].to_string()<br>}<br>```<br><br><br>lifetime2:<br>å‡½æ•°å‚æ•°æ˜¯ Stringï¼Œç¼–è¯‘å™¨æ— æ³•é€šè¿‡å‚æ•°ç¡®å®šè¿”å›å€¼ &amp;str çš„ç”Ÿå‘½å‘¨æœŸã€‚<br>ä¿®æ”¹ä¸º<br>```<br>fn lifetime2(name: &amp;String) -&gt; &amp;str {<br>    &amp;name[1..]<br>}<br>```<br><br>lifetime3:<br>è¿”å› Chars ç±»å‹çš„ç”Ÿå‘½å‘¨æœŸä¸å‚æ•° name å…³è”ï¼Œæ‰€ä»¥æ­£ç¡®ã€‚","like_count":10,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526972,"discussion_content":"éå¸¸æ£’ï¼ä¿®æ”¹å¾—ä¹Ÿå¾ˆæ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631844387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312562,"user_name":"Arthur","can_delete":false,"product_type":"c1","uid":1784009,"ip_address":"","ucode":"1C064405490769","user_header":"https://static001.geekbang.org/account/avatar/00/1b/38/c9/63ea8fe6.jpg","comment_is_top":false,"comment_ctime":1631865430,"is_pvip":true,"replies":[{"id":"113265","content":"éå¸¸å¥½ï¼Œç›®å‰æœ€æ£’çš„ç­”æ¡ˆï¼","user_name":"ä½œè€…å›å¤","comment_id":312562,"uid":"1079375","ip_address":"","utype":1,"ctime":1631926640,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"40286571094","product_id":100085301,"comment_content":"lifetime1:<br>nameä¸ºå‡½æ•°å†…éƒ¨çš„ä¸´æ—¶å˜é‡ï¼Œç±»å‹æ˜¯Stringï¼Œå‡½æ•°è¿”å›å€¼ä¸ºå…¶å¼•ç”¨ï¼Œä½†å¼•ç”¨çš„å˜é‡nameç”Ÿå‘½å‘¨æœŸåœ¨å‡½æ•°ç»“æŸæ—¶ï¼Œä¼šè¢«dropï¼Œå› æ­¤æ­¤å¤„å¼•ç”¨å¤±æ•ˆï¼Œæ— å€¼å¯å€Ÿï¼›<br><br>lifetime2:<br>nameä¸ºå…·æœ‰æ‰€æœ‰æƒçš„å‚æ•°ï¼Œç±»å‹æ˜¯Stringï¼Œåœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œæ‰€æœ‰æƒä¼šmoveç»™nameï¼Œåœ¨å‡½æ•°æ‰§è¡Œç»“æŸæ—¶ï¼Œnameä¼šè¢«dropï¼Œå› æ­¤è¿”å›å€¼çš„å¼•ç”¨è¿˜æ˜¯æ— å€¼å¯å€Ÿï¼Œç¼–è¯‘å™¨æ— æ³•æ¨å¯¼å‡ºåˆç†çš„ç”Ÿå‘½å‘¨æœŸï¼›<br><br>lifetime3:<br>chars()è¿”å›çš„iteratorå…·æœ‰å’Œå‡½æ•°å‚æ•°nameç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œnameæœ¬èº«åˆæ˜¯ä¸€ä¸ªå€Ÿç”¨ï¼ŒçœŸæ­£å…·æœ‰æ‰€æœ‰æƒçš„å˜é‡å­˜æ´»çš„æ¯”å‡½æ•°ä¹…ï¼Œå› æ­¤è¿™ä¸ªå‡½æ•°å¯ä»¥ç¼–è¯‘é€šè¿‡<br><br>å‚è€ƒææ–™ï¼š<br>ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯<br>```plain<br>   |<br>12 | fn lifetime1() -&gt; &amp;str {<br>   |                   ^ expected named lifetime parameter<br>   |<br>   = help: this function&#39;s return type contains a borrowed value, but there is no value for it to be borrowed from<br><br>  --&gt; src&#47;main.rs:18:31<br>   |<br>18 | fn lifetime2(name: String) -&gt; &amp;str {<br>   |                               ^ expected named lifetime parameter<br>   |<br>   = help: this function&#39;s return type contains a borrowed value with an elided lifetime, but the lifetime cannot be derived from the arguments<br><br>```<br><br>æ ‡å‡†åº“å…·ä½“å®ç°<br>```rust<br>&#47;&#47; Returns an iterator over the chars of a string slice.<br>pub fn chars(&amp;self) -&gt; Chars&lt;&#39;_&gt;<br><br>&#47;&#47; Converts the given value to a String.<br>fn to_string(&amp;self) -&gt; String<br>```","like_count":9,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527026,"discussion_content":"éå¸¸å¥½ï¼Œç›®å‰æœ€æ£’çš„ç­”æ¡ˆï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631926640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318235,"user_name":"å½­äºšä¼¦","can_delete":false,"product_type":"c1","uid":2425378,"ip_address":"","ucode":"77A32C73A23F72","user_header":"https://static001.geekbang.org/account/avatar/00/25/02/22/19585900.jpg","comment_is_top":false,"comment_ctime":1635212131,"is_pvip":true,"replies":[{"id":"116585","content":"&amp;str &#47; &amp;String ç”Ÿå‘½å‘¨æœŸä¸ºä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿç”Ÿå‘½å‘¨æœŸå’Œç±»å‹æ— å…³ï¼Œå’Œæ•°æ®æœ‰å…³ã€‚æˆ‘çŒœä½ è¯´ &amp;str å’Œ &amp;String å£°æ˜å‘¨æœŸä¸ä¸€æ ·ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¼šä½¿ç”¨ string literalï¼Œæ¯”å¦‚ï¼š<br><br>let s1 = &quot;hello&quot;;<br>let s2 = &quot;hello&quot;.to_stirng();<br><br>è¿™ä¸¤è€…ç”Ÿå‘½å‘¨æœŸä¸ä¸€æ ·æ˜¯å› ä¸º &quot;hello&quot; æœ¬èº«æ˜¯ &amp;&#39;staticï¼ˆç¼–è¯‘æ—¶æ”¾åœ¨ RODATA section ä¸­ï¼‰ï¼Œè€Œ s2 å¤åˆ¶äº†ä¸€ä»½ &quot;hello&quot; æ”¾åœ¨å †ä¸Šã€‚","user_name":"ä½œè€…å›å¤","comment_id":318235,"uid":"1079375","ip_address":"","utype":1,"ctime":1636643945,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"23110048611","product_id":100085301,"comment_content":"å…³äºString å’Œ &amp;strç›¸å…³çš„å„ç§é—®é¢˜,  æˆ‘çš„ç»éªŒ, ä¸€ä¸ªæ ¸å¿ƒåŸå› æ˜¯å› ä¸º String å®ç°äº†Deref&lt;Target = str&gt;,  Stringå’Œ&amp;stræ˜¯é€šè¿‡è¿™ä¸ªDeref Traitå»ºç«‹äº†äº’æ¢çš„å…³ç³»; <br><br>è¿™æ ·åšå¸¦æ¥äº†å¾ˆå¤šä¾¿åˆ©, åŒæ—¶ä¹Ÿæœ‰ä¸ªside effect, å°±æ˜¯å½“å‚æ•°è¦æ±‚æ˜¯ &amp;str æ—¶, å®å‚å¯èƒ½æ˜¯&amp;strä¹Ÿå¯èƒ½æ˜¯&amp;String, è€Œä¸¤è€…çš„ç”Ÿå‘½å‘¨æœŸæ˜æ˜¾æ˜¯ä¸ä¸€æ ·çš„, äºæ˜¯å°±äº§ç”Ÿäº†å„ç§çœ‹ä¼¼æ¯”è¾ƒéš¾ä»¥ç¢ç£¨çš„é—®é¢˜.","like_count":5,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529148,"discussion_content":"&amp;amp;str / &amp;amp;String ç”Ÿå‘½å‘¨æœŸä¸ºä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿç”Ÿå‘½å‘¨æœŸå’Œç±»å‹æ— å…³ï¼Œå’Œæ•°æ®æœ‰å…³ã€‚æˆ‘çŒœä½ è¯´ &amp;amp;str å’Œ &amp;amp;String å£°æ˜å‘¨æœŸä¸ä¸€æ ·ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¼šä½¿ç”¨ string literalï¼Œæ¯”å¦‚ï¼š\n\nlet s1 = &amp;quot;hello&amp;quot;;\nlet s2 = &amp;quot;hello&amp;quot;.to_stirng();\n\nè¿™ä¸¤è€…ç”Ÿå‘½å‘¨æœŸä¸ä¸€æ ·æ˜¯å› ä¸º &amp;quot;hello&amp;quot; æœ¬èº«æ˜¯ &amp;amp;&amp;#39;staticï¼ˆç¼–è¯‘æ—¶æ”¾åœ¨ RODATA section ä¸­ï¼‰ï¼Œè€Œ s2 å¤åˆ¶äº†ä¸€ä»½ &amp;quot;hello&amp;quot; æ”¾åœ¨å †ä¸Šã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636643945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312574,"user_name":"è®°äº‹æœ¬","can_delete":false,"product_type":"c1","uid":1401568,"ip_address":"","ucode":"FA942636EE0CC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","comment_is_top":false,"comment_ctime":1631870527,"is_pvip":false,"replies":[{"id":"113272","content":"æ˜¯çš„ï¼Œæ‰€ä»¥ * ä¸èƒ½ç›´æ¥ä½¿ç”¨åœ¨è¯¸å¦‚ String &#47; Vec è¿™æ ·æ•°æ®ç»“æ„çš„å¼•ç”¨ä¸Šã€‚å½“ä½ å°è¯•è¿™æ ·åšï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼šæ•°æ®è¢« borrowï¼Œä½†åˆè¢« moveï¼Œä¸”æ²¡æœ‰å®ç° copyï¼Œæ‰€ä»¥é”™è¯¯ã€‚<br><br>```rust<br>fn main() {<br>    let s = &quot;hello&quot;.to_string();<br>    let r1 = &amp;s;<br>    let s1 = *r1;<br>    <br>    println!(&quot;{:?}&quot;, s1);<br>}<br>```<br><br>æ‰€ä»¥è¿™é‡Œä¼šç¼–è¯‘å‡ºé”™ï¼Œè€Œä¸æ˜¯ç§»åŠ¨æ‰€æœ‰æƒã€‚ä½ ä¸èƒ½ä¸€è¾¹å€Ÿç”¨ï¼Œä¸€è¾¹ç§»åŠ¨æ‰€æœ‰æƒã€‚","user_name":"ä½œè€…å›å¤","comment_id":312574,"uid":"1079375","ip_address":"","utype":1,"ctime":1631928173,"user_name_real":"Tyr"}],"discussion_count":2,"race_medal":0,"score":"18811739711","product_id":100085301,"comment_content":"è€å¸ˆï¼Œå…³äºæ™ºèƒ½æŒ‡é’ˆä¸€äº›é—®é¢˜ï¼š<br>æ•°æ®æ”¾åœ¨å †ä¸Šï¼Œè¿”å›æŒ‡é’ˆç»™æ ˆä¸Šçš„ç»“æ„ä½“<br>æ™ºèƒ½æŒ‡é’ˆæœ‰ä¸ªç‰¹ç‚¹ï¼Œ*è§£è€¦åˆ°åŸå‹ï¼Œ&amp;*å°±æ˜¯è·å–æ•°æ®çš„å¼•ç”¨ï¼Œå•&amp;æ ˆä¸Šç»“æ„ä½“çš„åœ°å€<br>*å› ä¸ºä¼šè§£è€¦å‡ºåŸå‹ï¼Œæ‰€ä»¥åŸæ•°æ®æ˜¯å¦å®ç°copy traitï¼Œå¦åˆ™ä¼šmoveï¼Œæ™ºèƒ½æŒ‡é’ˆå°±æ²¡æœ‰æ‰€æœ‰æƒäº†","like_count":4,"discussions":[{"author":{"id":1390032,"avatar":"https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg","nickname":"é˜¿æˆ","note":"","ucode":"CEC3CD65FB9333","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531783,"discussion_content":"ä½†è¿™è·Ÿæ™ºèƒ½æŒ‡é’ˆæ²¡å•¥å…³ç³»å•Šâ€¦â€¦\nçœ‹è¿™ä¸ªä¾‹å­ï¼š\nstruct Simple;\nfn main() {\n    let simple = Simple;\n    let ref_simple = &amp;simple;\n   let moved_place = *ref_simple; // ERROR: cannot move out of `*ref_simple` which is behind a shared reference \n}\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637416137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527031,"discussion_content":"æ˜¯çš„ï¼Œæ‰€ä»¥ * ä¸èƒ½ç›´æ¥ä½¿ç”¨åœ¨è¯¸å¦‚ String / Vec è¿™æ ·æ•°æ®ç»“æ„çš„å¼•ç”¨ä¸Šã€‚å½“ä½ å°è¯•è¿™æ ·åšï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼šæ•°æ®è¢« borrowï¼Œä½†åˆè¢« moveï¼Œä¸”æ²¡æœ‰å®ç° copyï¼Œæ‰€ä»¥é”™è¯¯ã€‚\n\n```rust\nfn main() {\n    let s = &amp;quot;hello&amp;quot;.to_string();\n    let r1 = &amp;amp;s;\n    let s1 = *r1;\n    \n    println!(&amp;quot;{:?}&amp;quot;, s1);\n}\n```\n\næ‰€ä»¥è¿™é‡Œä¼šç¼–è¯‘å‡ºé”™ï¼Œè€Œä¸æ˜¯ç§»åŠ¨æ‰€æœ‰æƒã€‚ä½ ä¸èƒ½ä¸€è¾¹å€Ÿç”¨ï¼Œä¸€è¾¹ç§»åŠ¨æ‰€æœ‰æƒã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631928173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312697,"user_name":"Kerry","can_delete":false,"product_type":"c1","uid":2061524,"ip_address":"","ucode":"92F809EC998FC6","user_header":"https://static001.geekbang.org/account/avatar/00/1f/74/d4/38d813f0.jpg","comment_is_top":false,"comment_ctime":1631945804,"is_pvip":false,"replies":[{"id":"113315","content":"ğŸ‘ éå¸¸å¥½ã€‚è¦æ³¨æ„çš„æ˜¯ä¾‹å­ 1 çš„æ”¹æ³•å¹¶ä¸æ˜¯é€šç”¨çš„ï¼Œå®ƒåªé€‚åˆå°‘æ•°å¯ä»¥ &amp;&#39;static çš„æƒ…å†µã€‚","user_name":"ä½œè€…å›å¤","comment_id":312697,"uid":"1079375","ip_address":"","utype":1,"ctime":1631982059,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"14516847692","product_id":100085301,"comment_content":"ä¾‹å­ä¸€ï¼š<br><br>1. &amp;strç”Ÿå‘½å‘¨æœŸä¸æ˜ç¡®<br>2. è¿”å›äº†å±€éƒ¨å‡½æ•°æ‹¥æœ‰æ‰€æœ‰æƒçš„å¼•ç”¨ï¼Œä¹Ÿæ˜¯ç”Ÿå‘½å‘¨æœŸé—®é¢˜<br><br>å¯æ”¹ä¸ºï¼š<br><br>fn lifetime1() -&gt; &amp;&#39;static str { <br>    let name = &quot;Tyr&quot;;<br>    &amp;name[1..]<br>}<br><br>ä¾‹å­äºŒï¼š<br><br>å‡½æ•°å‚æ•°ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œè€Œä¸”Stringæ²¡æœ‰å®ç°Copy Traitï¼Œä¼ å‚çš„æ—¶å€™ä¼šæŠŠå½¢å‚çš„æ‰€æœ‰æƒç»™åˆ°å®å‚ï¼Œè¿™æ—¶å€™è·Ÿä¾‹å­ä¸€æ˜¯ä¸€æ ·çš„ã€‚è§£å†³åŠæ³•æ˜¯æŠŠå½¢å‚å®šä¹‰ä¸ºå¼•ç”¨ç±»å‹ï¼Œå¦‚&amp;strï¼ˆ&amp;Stringä¹Ÿä¸æ˜¯ä¸è¡Œï¼‰:<br><br>fn lifetime2(name: &amp;str) -&gt; &amp;str { <br>    &amp;name[1..]<br>}<br><br>æ³¨æ„è¿™é‡Œä¾‹å­äºŒä¸ç”¨æŒ‡å®šè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥ä»å‚æ•°åˆ—è¡¨è‡ªåŠ¨æ¨æ–­ã€‚<br><br>ä¾‹å­ä¸‰ï¼š<br><br>Charsæ˜¯å­—ç¬¦ä¸²åˆ‡ç‰‡è¿­ä»£å™¨ï¼Œç”Ÿå‘½å‘¨æœŸä¸&amp;stræ˜¯ä¸€è‡´çš„ï¼Œè¿™ä¸€ç‚¹å¯ä»¥ä»ç­¾åä¸­çœ‹å‡ºï¼š<br><br>&#47;&#47; std::str::chars<br>pub fn chars(&amp;self) -&gt; Chars&lt;&#39;_&gt;<br><br>&#47;&#47; std::str::Chars<br>pub struct Chars&lt;&#39;a&gt; {<br>    pub(super) iter: slice::Iter&lt;&#39;a, u8&gt;,<br>}","like_count":3,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527083,"discussion_content":"ğŸ‘ éå¸¸å¥½ã€‚è¦æ³¨æ„çš„æ˜¯ä¾‹å­ 1 çš„æ”¹æ³•å¹¶ä¸æ˜¯é€šç”¨çš„ï¼Œå®ƒåªé€‚åˆå°‘æ•°å¯ä»¥ &amp;amp;&amp;#39;static çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631982059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312494,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1631842344,"is_pvip":false,"replies":[{"id":"113214","content":"éå¸¸æ£’ï¼","user_name":"ä½œè€…å›å¤","comment_id":312494,"uid":"1079375","ip_address":"","utype":1,"ctime":1631844261,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":2,"score":"14516744232","product_id":100085301,"comment_content":"æ¯”è¾ƒç®€å•çš„é—®é¢˜ï¼Œç¬¬ä¸€ä¸ª name åœ¨å‡½æ•°é‡Œé¢åˆ›å»ºçš„ Stringï¼Œå‡½æ•°è¿”å›æ—¶å°±é‡Šæ”¾æ‰äº†ï¼Œè¿™æ˜¯æœ€ç›´ç™½çš„æ‚¬å‚å¼•ç”¨ã€‚ç¬¬äºŒä¸ª name æ˜¯ä»è°ƒç”¨è€… move è¿‡æ¥çš„ Stringï¼Œè¿›å…¥è¯¥å‡½æ•°ï¼Œæ‰€æœ‰æƒå°±å½’å‡½æ•°äº†ï¼Œè¿”å›æ—¶ name ä¹Ÿå°†è¢«é‡Šæ”¾ã€‚ç¬¬ä¸‰ä¸ª name ä¸ç”¨åŠ ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œå‚æ•°æ˜¯å¼•ç”¨ï¼Œè¿”å›çš„æ•°æ®ä¸è¯¥å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒï¼Œæ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ç¼–è¯‘é€šè¿‡ã€‚","like_count":3,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526987,"discussion_content":"éå¸¸æ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631844261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319074,"user_name":"ä¸å¯","can_delete":false,"product_type":"c1","uid":1142858,"ip_address":"","ucode":"62F4E3BA34278A","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/4a/30cf63db.jpg","comment_is_top":false,"comment_ctime":1635567226,"is_pvip":false,"replies":[{"id":"116400","content":"ä¸€èˆ¬æ˜¯ä¸€ä¸ª clone()ï¼Œå¾—åˆ°æœ‰æ‰€æœ‰æƒçš„æ•°æ®ã€‚æ¯”å¦‚ &amp;str -&gt; Stringã€‚æ–‡æ¡£ï¼šhttps:&#47;&#47;doc.rust-lang.org&#47;std&#47;borrow&#47;trait.ToOwned.html#tymethod.to_owned","user_name":"ä½œè€…å›å¤","comment_id":319074,"uid":"1079375","ip_address":"","utype":1,"ctime":1636557278,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"5930534522","product_id":100085301,"comment_content":"to_owned() ä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529490,"discussion_content":"ä¸€èˆ¬æ˜¯ä¸€ä¸ª clone()ï¼Œå¾—åˆ°æœ‰æ‰€æœ‰æƒçš„æ•°æ®ã€‚æ¯”å¦‚ &amp;amp;str -&amp;gt; Stringã€‚æ–‡æ¡£ï¼šhttps://doc.rust-lang.org/std/borrow/trait.ToOwned.html#tymethod.to_owned","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636557278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313347,"user_name":"äºšä¼¦ç¢è¯­","can_delete":false,"product_type":"c1","uid":1014505,"ip_address":"","ucode":"F32E5E1B63CC90","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/e9/da5c0203.jpg","comment_is_top":false,"comment_ctime":1632384701,"is_pvip":false,"replies":[{"id":"113524","content":"å—¯ã€‚å…¶å®ä¸å¿…è¿™ä¹ˆè®°ã€‚è¿˜æ˜¯è¦æŠ“ä½ String å’Œ str çš„å®è´¨ã€‚ä¸€ä¸ªæ‹¥æœ‰æ‰€æœ‰æƒï¼ˆè‡ªç„¶ä¹Ÿå¯ä»¥ put_strï¼‰ï¼Œä¸€ä¸ªæ²¡æœ‰æ‰€æœ‰æƒï¼Œåªæ˜¯åˆ‡ç‰‡ï¼ˆè‡ªç„¶ä¸èƒ½ resize åˆ«äººçš„ä¸œè¥¿ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","comment_id":313347,"uid":"1079375","ip_address":"","utype":1,"ctime":1632464441,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"5927351997","product_id":100085301,"comment_content":"å¯¹&amp;str å’Œ &amp;Stringçš„åŒºåˆ«ï¼Œæ›´æ–°ä¸€ç‚¹ï¼š<br>Stringå¯ä»¥åŠ¨æ€çš„è°ƒæ•´å†…å­˜å¤§å°ã€‚ strä¸èƒ½resize. <br>&amp;strç›´æ¥æ˜¯æŒ‡åˆ°äº†Stringå­˜å‚¨çš„å¼•ç”¨ï¼Œ&amp;Stringæ˜¯å¯¹äºStringå†…å­˜å¯¹è±¡çš„å¼•ç”¨ã€‚<br>å‚è€ƒï¼š<br>https:&#47;&#47;users.rust-lang.org&#47;t&#47;whats-the-difference-between-string-and-str&#47;10177&#47;8","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527320,"discussion_content":"å—¯ã€‚å…¶å®ä¸å¿…è¿™ä¹ˆè®°ã€‚è¿˜æ˜¯è¦æŠ“ä½ String å’Œ str çš„å®è´¨ã€‚ä¸€ä¸ªæ‹¥æœ‰æ‰€æœ‰æƒï¼ˆè‡ªç„¶ä¹Ÿå¯ä»¥ put_strï¼‰ï¼Œä¸€ä¸ªæ²¡æœ‰æ‰€æœ‰æƒï¼Œåªæ˜¯åˆ‡ç‰‡ï¼ˆè‡ªç„¶ä¸èƒ½ resize åˆ«äººçš„ä¸œè¥¿ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632464441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312516,"user_name":"è®°äº‹æœ¬","can_delete":false,"product_type":"c1","uid":1401568,"ip_address":"","ucode":"FA942636EE0CC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","comment_is_top":false,"comment_ctime":1631847579,"is_pvip":false,"replies":[{"id":"113271","content":"String &#47; Vec éƒ½æ˜¯æ™ºèƒ½æŒ‡é’ˆã€‚ç†è®ºä¸Šä»»ä½•å®ç°äº† Deref &#47; DerefMut &#47; Drop çš„æ•°æ®ç»“æ„ï¼Œéƒ½æ˜¯æ™ºèƒ½æŒ‡é’ˆã€‚","user_name":"ä½œè€…å›å¤","comment_id":312516,"uid":"1079375","ip_address":"","utype":1,"ctime":1631927505,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"5926814875","product_id":100085301,"comment_content":"è€å¸ˆï¼ŒStringï¼ŒVecç®—æ˜¯æ™ºèƒ½æŒ‡é’ˆå—ï¼Ÿ*Stringè§£é™¤strï¼Œç„¶å&amp;*Stringå°±æ˜¯&amp;sträº†ï¼ŒBox::new()å¥½åƒä¹Ÿå¯ä»¥è¿™æ ·ç”¨ï¼ŒBox::new(String::new)è¿™æ ·çš„ä½¿ç”¨ï¼Œå†…å­˜å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–å•Š","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526994,"discussion_content":"String / Vec éƒ½æ˜¯æ™ºèƒ½æŒ‡é’ˆã€‚ç†è®ºä¸Šä»»ä½•å®ç°äº† Deref / DerefMut / Drop çš„æ•°æ®ç»“æ„ï¼Œéƒ½æ˜¯æ™ºèƒ½æŒ‡é’ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631927505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359194,"user_name":"æœ¨é¸¢","can_delete":false,"product_type":"c1","uid":1200260,"ip_address":"å››å·","ucode":"6900EFB05CB9A5","user_header":"https://static001.geekbang.org/account/avatar/00/12/50/84/e51e1db3.jpg","comment_is_top":false,"comment_ctime":1665315625,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665315625","product_id":100085301,"comment_content":"è¿˜æ²¡çœ‹åˆ°è¿™é‡Œå°±ä½“ä¼šåˆ°é™ˆè€å¸ˆè¯´çš„æ„šæ˜§ä¹‹é¢ äº†ï¼Œrustçš„å¤§é‡ç®€å†™å°±å½“æ˜¯è¯­è¨€ç‰¹è‰²æ¥çœ‹äº†ï¼Œåˆ°äº†æ‰€æœ‰æƒã€rcã€arcã€ç”Ÿå‘½å‘¨æœŸè¿™äº›ç« èŠ‚ï¼Œçœ‹å®Œç†è®ºå†å¯¹ç…§ä»£ç å°±è’™åœˆäº†ï¼Œä»£ç å®Œå…¨çœ‹ä¸æ‡‚å•Šï¼<br>vec!å’Œç›´æ¥å®šä¹‰åˆ‡ç‰‡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>String::fromå®šä¹‰çš„å­—ç¬¦ä¸²å’Œç›´æ¥åŒå¼•å·å®šä¹‰çš„ç»“æœæ˜¯ä¸€å›äº‹å—ï¼Ÿ<br>ç”Ÿå‘½å‘¨æœŸæ ‡ç¤ºæ˜¯ &#39; è¿˜æ˜¯ &#39;a-z ï¼Œå‚æ•°é‡Œé¢ä¸­å®šä¹‰ï¼Œå’Œå¤–ç•Œä¼ å‚æ—¶å€™å®šä¹‰æœ‰åŒºåˆ«å—ï¼Ÿ<br>è¯­æ³• spawnï¼ˆ|| {}ï¼‰åˆ°åº•è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿè¿˜æ˜¯è¯´è¿™ä¸ªå†™æ³•æ˜¯spawnç‹¬æœ‰çš„å‘¢ï¼Ÿ<br><br>è‚¯å®šæ˜¯æˆ‘å¤ªç™½ï¼Œå¤ªå…ˆå»çœ‹çœ‹ruståŸºç¡€è¯­æ³•å†æ¥ä»æ–°çœ‹ï¼Œæ¶¦äº†æ¶¦äº†<br><br>PSï¼šé™ˆè€å¸ˆè®²å¾—éå¸¸é€å½»ï¼Œè®¡ç®—æœºåŸºç¡€ï¼Œrustç¼–ç¨‹æ€æƒ³éƒ½å¨“å¨“é“æ¥ï¼Œæœ‰rustç»éªŒçš„åŒå­¦è‚¯å®šä¼šå¾ˆæœ‰å…±é¸£ï¼Œè¯„è®ºåŒºçš„ç²¾åå¸–ä¹Ÿèƒ½çœ‹åˆ°","like_count":0},{"had_liked":false,"id":323962,"user_name":"æ‰‹æœºå¤±è”æˆ·","can_delete":false,"product_type":"c1","uid":1258691,"ip_address":"","ucode":"876DC3D73F8E3A","user_header":"https://static001.geekbang.org/account/avatar/00/13/34/c3/ed5881c6.jpg","comment_is_top":false,"comment_ctime":1638241178,"is_pvip":false,"replies":[{"id":"118873","content":"ä¹‹å‰å› ä¸ºå®ç›¸å…³çš„å†…å®¹æ˜¯é«˜çº§å†…å®¹ï¼Œæ‰€ä»¥æ²¡æ”¾åœ¨è¿™ä¸ªè¯¾ç¨‹ä¸­ã€‚","user_name":"ä½œè€…å›å¤","comment_id":323962,"uid":"1079375","ip_address":"","utype":1,"ctime":1639849460,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1638241178","product_id":100085301,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹è¯¾ç¨‹é‡Œæ²¡æœ‰æåˆ°rustå®ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œè¯·é—®åç»­ä¼šè®²è¿™ä¸ªå—ï¼Ÿå› ä¸ºæœ‰äº›rusté¡¹ç›®ï¼Œæ¯”å¦‚tokioéƒ½ä¼šç”¨åˆ°å®ï¼Œå¯¼è‡´ä»£ç ä¸æ˜¯å¾ˆå®¹æ˜“æ‡‚ï¼Œè€å¸ˆèƒ½ä¸èƒ½åç»­ä¸“é—¨å‡ºä¸€æœŸè®²ä¸€ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539834,"discussion_content":"ä¹‹å‰å› ä¸ºå®ç›¸å…³çš„å†…å®¹æ˜¯é«˜çº§å†…å®¹ï¼Œæ‰€ä»¥æ²¡æ”¾åœ¨è¿™ä¸ªè¯¾ç¨‹ä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639849460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320971,"user_name":"mobus","can_delete":false,"product_type":"c1","uid":1055088,"ip_address":"","ucode":"966C72FC8AE50A","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/70/7dbf25dc.jpg","comment_is_top":false,"comment_ctime":1636601094,"is_pvip":false,"replies":[{"id":"116571","content":"match &#47; if let å°±æ˜¯ä½ æœ€å¥½çš„å·¥å…·ï¼Œä½ å¯ä»¥åšéå¸¸æ·±å…¥çš„æ¨¡å¼åŒ¹é…","user_name":"ä½œè€…å›å¤","comment_id":320971,"uid":"1079375","ip_address":"","utype":1,"ctime":1636641431,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"1636601094","product_id":100085301,"comment_content":"è€å¸ˆï¼Œæœ‰æ²¡æœ‰åŠæ³•å¿«é€Ÿæå– æšä¸¾å€¼ï¼Ÿæ¯”å¦‚jsonrpc request ï¼Œä¸ºäº†åŒ¹é…æœ€ç»ˆè¯·æ±‚å€¼ï¼Œä»£ç è†¨èƒ€çš„å¤ªå‰å®³äº†","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530173,"discussion_content":"match / if let å°±æ˜¯ä½ æœ€å¥½çš„å·¥å…·ï¼Œä½ å¯ä»¥åšéå¸¸æ·±å…¥çš„æ¨¡å¼åŒ¹é…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636641431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319813,"user_name":"æ´»ç€","can_delete":false,"product_type":"c1","uid":2172358,"ip_address":"","ucode":"1AF2541D53C9EC","user_header":"https://static001.geekbang.org/account/avatar/00/21/25/c6/5b3ddf17.jpg","comment_is_top":false,"comment_ctime":1635950368,"is_pvip":false,"replies":[{"id":"116373","content":"è°¢è°¢ï¼","user_name":"ä½œè€…å›å¤","comment_id":319813,"uid":"1079375","ip_address":"","utype":1,"ctime":1636555295,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"1635950368","product_id":100085301,"comment_content":"è€å¸ˆè¾›è‹¦äº†ï¼Œè¯¾ç¨‹éå¸¸å¥½ğŸ‘","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529779,"discussion_content":"è°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636555295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313346,"user_name":"äºšä¼¦ç¢è¯­","can_delete":false,"product_type":"c1","uid":1014505,"ip_address":"","ucode":"F32E5E1B63CC90","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/e9/da5c0203.jpg","comment_is_top":false,"comment_ctime":1632384414,"is_pvip":false,"replies":[{"id":"113525","content":"æ­£ç¡®ï¼","user_name":"ä½œè€…å›å¤","comment_id":313346,"uid":"1079375","ip_address":"","utype":1,"ctime":1632464453,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"1632384414","product_id":100085301,"comment_content":"use std::str::Chars;<br><br>&#47;&#47; é”™è¯¯ï¼Œä¸ºä»€ä¹ˆï¼Ÿ<br>&#47;&#47; name åœ¨lifetime1 çš„blockä¸‹å°±ä¼šè¢«dropæ‰ï¼Œæ‰€ä»¥è¿”å›&amp;stræ˜¯ä¸å¯¹<br>fn lifetime1() -&gt; String {<br>    let name = &quot;Tyr&quot;.to_string();<br>    name[1..].to_string()<br>}<br><br>&#47;&#47; é”™è¯¯ï¼Œä¸ºä»€ä¹ˆï¼Ÿ<br>&#47;&#47; nameç±»å‹å˜ä¸ºString, ownershipæ”¹å˜ï¼Œä½†æ˜¯è¿”å›æ˜¯å¼•ç”¨ï¼Œblockç»“æŸä¼šè¢«dropæ‰ã€‚å¯ä»¥è®²å…¥å‚æ”¹ä¸ºå¼•ç”¨ã€‚<br>fn lifetime2(name: &amp;String) -&gt; &amp;str {<br>    &amp;name[1..]<br>}<br><br>&#47;&#47; æ­£ç¡®ï¼Œä¸ºä»€ä¹ˆï¼Ÿ<br>&#47;&#47; é»˜è®¤å’Œå‚æ•°ä¸€æ ·çš„ç”Ÿå‘½å‘¨æœŸ<br>fn lifetime3(name: &amp;str) -&gt; Chars {<br>    name.chars()<br>}","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527319,"discussion_content":"æ­£ç¡®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632464453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312937,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1632130127,"is_pvip":true,"replies":[{"id":"113411","content":"å—¯ï¼Œä½†è¿™æ ·å®é™…ä¸Šåœ¨ arena å†…éƒ¨æœ‰å†…å­˜æ³„æ¼ã€‚","user_name":"ä½œè€…å›å¤","comment_id":312937,"uid":"1079375","ip_address":"","utype":1,"ctime":1632241244,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"1632130127","product_id":100085301,"comment_content":"æŸäº›æƒ…æ™¯ä¸‹å¸¦ç¯çš„ç»“æ„å¯ä»¥ç”¨Arenaå®ç°ï¼Œæ¯”å¦‚typed_arenaï¼Œç”¨çš„æ—¶å€™ä¸ç®¡é‡Šæ”¾ï¼Œç”¨å®Œäº†ä¸€èµ·é‡Šæ”¾ã€‚","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527169,"discussion_content":"å—¯ï¼Œä½†è¿™æ ·å®é™…ä¸Šåœ¨ arena å†…éƒ¨æœ‰å†…å­˜æ³„æ¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632241244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312833,"user_name":"è®°äº‹æœ¬","can_delete":false,"product_type":"c1","uid":1401568,"ip_address":"","ucode":"FA942636EE0CC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","comment_is_top":false,"comment_ctime":1632043628,"is_pvip":false,"replies":[{"id":"113408","content":"ç¬¦åˆã€‚","user_name":"ä½œè€…å›å¤","comment_id":312833,"uid":"1079375","ip_address":"","utype":1,"ctime":1632240987,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"1632043628","product_id":100085301,"comment_content":"å‡å¦‚ æ³›å‹Tçº¦æŸéœ€è¦å®ç°AsRef trait, str å·²ç»å®ç°AsRef tarit,é‚£ä¹ˆ&amp;strç¬¦åˆè¿™ä¸ªæ³›å‹å‚æ•°å—?","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527129,"discussion_content":"ç¬¦åˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632240987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312636,"user_name":"å¤§å“‰ä¹¾å…ƒ","can_delete":false,"product_type":"c1","uid":2738552,"ip_address":"","ucode":"1FE07EB60046ED","user_header":"","comment_is_top":false,"comment_ctime":1631918468,"is_pvip":false,"replies":[{"id":"113275","content":"ä¸èƒ½ã€‚ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶æ˜¯ä¸¤ä¸ªçŠ¶æ€ã€‚cargo run ç›¸å½“äºåœ¨å½“å‰ç›®å½•ä¸‹è¿è¡Œç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹è¿è¡Œè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚æ‰€ä»¥è¿è¡Œæ—¶ä¸è¦å‡å®šç¨‹åºè¿è¡Œçš„å·¥ä½œç›®å½•ã€‚","user_name":"ä½œè€…å›å¤","comment_id":312636,"uid":"1079375","ip_address":"","utype":1,"ctime":1631932055,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"1631918468","product_id":100085301,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œå…³äºæ–‡ä»¶æ“ä½œçš„ç›¸å¯¹è·¯å¾„ï¼Œå¦‚æœæ˜¯å…ˆç¼–è¯‘å†æ‰§è¡Œï¼Œrustä¼šä»¥å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨ç›®å½•ä½œä¸ºå½“å‰ç›®å½•è¿›è¡Œæ–‡ä»¶æ“ä½œï¼Œå¦‚æœç›´æ¥cargo runçš„è¯åˆ™æ˜¯ä»¥æºæ–‡ä»¶ç›®å½•ä½œä¸ºç›¸å¯¹ç›®å½•æ‰§è¡Œï¼Œæœ‰åŠæ³•ç»Ÿä¸€èµ·æ¥ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527058,"discussion_content":"ä¸èƒ½ã€‚ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶æ˜¯ä¸¤ä¸ªçŠ¶æ€ã€‚cargo run ç›¸å½“äºåœ¨å½“å‰ç›®å½•ä¸‹è¿è¡Œç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹è¿è¡Œè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚æ‰€ä»¥è¿è¡Œæ—¶ä¸è¦å‡å®šç¨‹åºè¿è¡Œçš„å·¥ä½œç›®å½•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631932055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312551,"user_name":"èŠ¥æœ«å°é¾™","can_delete":false,"product_type":"c1","uid":1176417,"ip_address":"","ucode":"387D01880867AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/f3/61/8f7fca5b.jpg","comment_is_top":false,"comment_ctime":1631861725,"is_pvip":false,"replies":[{"id":"113268","content":"leetcode è·Ÿçº¯ç®—æ³•æœ‰å…³ï¼Œè·Ÿè¯­æ³•åå€’å…³ç³»ä¸å¤§å§ã€‚åº”è¯¥ä¸éœ€è¦å’Œå€Ÿç”¨&#47;ç”Ÿå‘½å‘¨æœŸæ‰“äº¤é“ï¼Œä¹ŸåŸºæœ¬ä¸Šä¸æ¶‰åŠå¤ªå¤šæ‰€æœ‰æƒï¼ˆé™¤äº† String å’Œ Vec&lt;T&gt;ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç”¨å„ç§æ•°å€¼ç±»å‹å§ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631927325,"ip_address":"","comment_id":312551,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1631861725","product_id":100085301,"comment_content":"åœ¨ç”¨rusté‡æ–°æ’¸leetcodeï¼ŒçœŸç—›è‹¦ã€‚","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527018,"discussion_content":"leetcode è·Ÿçº¯ç®—æ³•æœ‰å…³ï¼Œè·Ÿè¯­æ³•åå€’å…³ç³»ä¸å¤§å§ã€‚åº”è¯¥ä¸éœ€è¦å’Œå€Ÿç”¨/ç”Ÿå‘½å‘¨æœŸæ‰“äº¤é“ï¼Œä¹ŸåŸºæœ¬ä¸Šä¸æ¶‰åŠå¤ªå¤šæ‰€æœ‰æƒï¼ˆé™¤äº† String å’Œ Vec&amp;lt;T&amp;gt;ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç”¨å„ç§æ•°å€¼ç±»å‹å§ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631927325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1176417,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f3/61/8f7fca5b.jpg","nickname":"èŠ¥æœ«å°é¾™","note":"","ucode":"387D01880867AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394522,"discussion_content":"ä¸»è¦æ˜¯æ²¡æœ‰ç”¨ç†Ÿç»ƒï¼Œç”¨JAVAå†™è½»æ¾åŠ æ„‰å¿«ï¼Œç”¨rusté‚£ä¸ªæ†‹å±ˆå•Šï¼Œå…¶å®å°±æ˜¯è¿˜æ²¡æœ‰ç†Ÿæ‚‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631927883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312487,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1631840825,"is_pvip":false,"replies":[{"id":"113215","content":"åŠ æ²¹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631844270,"ip_address":"","comment_id":312487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631840825","product_id":100085301,"comment_content":"æ‰“å¡ çœŸçš„æ˜¯æ„šæ˜§ä¹‹å·…äº† éœ€è¦é‡å¤´å†æ¥äº†","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526984,"discussion_content":"åŠ æ²¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631844270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312481,"user_name":"25ma","can_delete":false,"product_type":"c1","uid":1303713,"ip_address":"","ucode":"AB5435B9DB52C9","user_header":"https://static001.geekbang.org/account/avatar/00/13/e4/a1/178387da.jpg","comment_is_top":false,"comment_ctime":1631839513,"is_pvip":false,"replies":[{"id":"113216","content":"å¯¹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631844286,"ip_address":"","comment_id":312481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631839513","product_id":100085301,"comment_content":"1.è¿”å›æ˜¯ä¸€ä¸ª&amp;str,ä½†æ˜¯nameçš„ç”Ÿå‘½å‘¨æœŸåœ¨å‡½æ•°æ‰§è¡Œç»“æŸå°±å·²ç»dropæ‰äº†ï¼Œæ‰€ä»¥ä¼šé€ æˆæ‚¬å‚æŒ‡é’ˆçš„é—®é¢˜<br>2.åŒæ ·ä¹Ÿæ˜¯çŠ¯è§„ï¼Œä¸€ä¸ª&amp;str,ä¸åŒçš„åœ°æ–¹æ˜¯å½“nameè¿™ä¸ªä¸å¯å˜å˜é‡ä¼ é€’è¿›å‡½æ•°lifttime2çš„æ—¶å€™å·²ç»å°†å€¼move,ç„¶è€Œè¿™æ—¶å†è¿”å›ä¸€ä¸ª&amp;str,åŒæ ·ä¹Ÿä¼šé€ æˆæ‚¬å‚æŒ‡é’ˆçš„é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526982,"discussion_content":"å¯¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631844286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312475,"user_name":"Do","can_delete":false,"product_type":"c1","uid":1313480,"ip_address":"","ucode":"EA11EBD6439D1B","user_header":"https://static001.geekbang.org/account/avatar/00/14/0a/c8/dae4a360.jpg","comment_is_top":false,"comment_ctime":1631837323,"is_pvip":false,"replies":[{"id":"113213","content":"å•¥å¤ªæ…¢äº†ï¼Œæ›´æ–°é€Ÿåº¦å˜›ï¼Ÿç°åœ¨ä¸“æ éƒ½æ˜¯ä¸€å‘¨æ›´æ–°ä¸‰ç¯‡ï¼Œå› ä¸ºä¹Ÿè¦è€ƒè™‘åˆ°è€å¸ˆé«˜è´¨é‡è¾“å‡ºçš„é¢‘ç‡å’Œå¤§å®¶å­¦ä¹ çš„é¢‘ç‡ã€‚å¦‚æœè§‰å¾—æ…¢ï¼Œè¯´æ˜ä½ çš„çš„Rustè¿›åº¦éå¸¸ä¸é”™ï¼Œå­¦æœ‰ä½™åŠ›å˜›ï¼Œæ¨èé…å¥—ç¬¬ä¸€ç¯‡åŠ é¤é‡Œçš„èµ„æ–™æ¥å­¦ä¹ å™¢ğŸ’ª","user_name":"ç¼–è¾‘å›å¤","user_name_real":"å¶å¦‚èŠŠ","uid":"2547771","ctime":1631843268,"ip_address":"","comment_id":312475,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1631837323","product_id":100085301,"comment_content":"å¤ªæ…¢äº†","like_count":0,"discussions":[{"author":{"id":2547771,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e0/3b/8ec916b2.jpg","nickname":"å¤šå°‘","note":"","ucode":"0A6EF7AA6E4BB7","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526977,"discussion_content":"å•¥å¤ªæ…¢äº†ï¼Œæ›´æ–°é€Ÿåº¦å˜›ï¼Ÿç°åœ¨ä¸“æ éƒ½æ˜¯ä¸€å‘¨æ›´æ–°ä¸‰ç¯‡ï¼Œå› ä¸ºä¹Ÿè¦è€ƒè™‘åˆ°è€å¸ˆé«˜è´¨é‡è¾“å‡ºçš„é¢‘ç‡å’Œå¤§å®¶å­¦ä¹ çš„é¢‘ç‡ã€‚å¦‚æœè§‰å¾—æ…¢ï¼Œè¯´æ˜ä½ çš„çš„Rustè¿›åº¦éå¸¸ä¸é”™ï¼Œå­¦æœ‰ä½™åŠ›å˜›ï¼Œæ¨èé…å¥—ç¬¬ä¸€ç¯‡åŠ é¤é‡Œçš„èµ„æ–™æ¥å­¦ä¹ å™¢ğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631843268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312467,"user_name":"hughieyu","can_delete":false,"product_type":"c1","uid":1206690,"ip_address":"","ucode":"FC1A64B2BAB784","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/a2/c30ac459.jpg","comment_is_top":false,"comment_ctime":1631827649,"is_pvip":false,"replies":[{"id":"113218","content":"å¯¹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631844313,"ip_address":"","comment_id":312467,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631827649","product_id":100085301,"comment_content":"1. name dropäº†<br>2. name dropäº†<br>3. nameçš„å†…å­˜æ•°æ®æ‹·è´å¹¶è½¬æ¢åˆ°äº†ä¸€ä¸ªæ–°çš„æ‹¥æœ‰æ‰€æœ‰æƒçš„å¯¹è±¡ä¸­","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526973,"discussion_content":"å¯¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631844313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}