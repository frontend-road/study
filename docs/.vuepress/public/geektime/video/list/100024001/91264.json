{"id":91264,"title":"51 | 高效字符串连接","content":"<h1>课件及源代码地址</h1><p><a href=\"https://gitee.com/geektime-geekbang/go_learning\">https://gitee.com/geektime-geekbang/go_learning</a></p><h2>书目推荐</h2><p><a href=\"time://mall?url=https%3A%2F%2Fh5.youzan.com%2Fv2%2Fgoods%2F1ycmk3uob0ryw\">《计算机程序的构造和解释》</a></p>","comments":[{"had_liked":false,"id":156997,"user_name":"york","can_delete":false,"product_type":"c3","uid":1312024,"ip_address":"","ucode":"C6519CBD0EC9A4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKnp5snhMVf9pa6WKtU0J2C6jxtI3NaO4WqlkvuUPLvU3pDmtgeEvlk0icMj4TGeGWfUENWvVn0ic5w/132","comment_is_top":false,"comment_ctime":1575010985,"is_pvip":false,"replies":[{"id":61474,"content":"map是一个结构，其中结构中包含一个指向数据存储空间的指针，所以虽然在传递过程中复制产生了一个新的结构对象，但其中的指向数据存储空间的指针值也被复制了，所以还是指向了同一块地址即同一数据存储空间","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1576158903,"ip_address":"","comment_id":156997,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"package main\nimport &quot;fmt&quot;\nfunc main()  {\n\tmap1 := map[string]string{&quot;key&quot;:&quot;value&quot;}\n\ttest1(map1)\n\tfmt.Println(map1[&quot;key&quot;])\n}\nfunc test1(map1 map[string]string)  {\n\tmap1[&quot;key&quot;] = &quot;newValue&quot;\n}\n输出：newValue\n请问老师，test1函数接受的参数不是一个指针，应当是拷贝了一份map,为什么会影响到main函数的map值","like_count":4,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476297,"discussion_content":"map是一个结构，其中结构中包含一个指向数据存储空间的指针，所以虽然在传递过程中复制产生了一个新的结构对象，但其中的指向数据存储空间的指针值也被复制了，所以还是指向了同一块地址即同一数据存储空间","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576158903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237441,"user_name":"郭星","can_delete":false,"product_type":"c3","uid":1182219,"ip_address":"","ucode":"8A0F5DF80E0C61","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/0b/985d3800.jpg","comment_is_top":false,"comment_ctime":1595832235,"is_pvip":false,"replies":[{"id":104465,"content":"这个不能一概而论\n1. 是否对于存储空间有考虑，\n2. 是否允许原有存储的对象被修改","user_name":"作者回复","user_name_real":"蔡超","uid":1008262,"ctime":1618106000,"ip_address":"","comment_id":237441,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"对于map或slice 中存储struct 时,是存储实例好还是存储指针好?","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502419,"discussion_content":"这个不能一概而论\n1. 是否对于存储空间有考虑，\n2. 是否允许原有存储的对象被修改","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618106000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127430,"user_name":"虢國技醬","can_delete":false,"product_type":"c3","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1566707178,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"学习大牛的coding方式和方法很重要，就像测试和性能这块，很多东西都其实是可以用量化的数据比对出来的，测试和性能这块收获很大；心中对于测试和性能调优有了步骤1，2，3；虽然还有许多东西需要实战积累，但总是有了一个路线，心理上不害怕了","like_count":11},{"had_liked":false,"id":285525,"user_name":"数字记忆","can_delete":false,"product_type":"c3","uid":1227797,"ip_address":"","ucode":"26E16F65F559A1","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/15/23ce17f9.jpg","comment_is_top":false,"comment_ctime":1616857178,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"这一节的东西还是不错的，有干货","like_count":1},{"had_liked":false,"id":288043,"user_name":"escray","can_delete":false,"product_type":"c3","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1618279953,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"fmt.Sprintf 也能连接字符串，很少用\nAdd +  最常用，但是性能也比较差，每次都要生成一个新的 string，原有的 string 需要 GC\nStringBuilder 性能最好，1.10 版本之后推荐使用\nbytes.Buffer 性能和 StringBuilder 差不多，1.10 版本之前使用\n\nJava 或者 C# 里面也有 StringBuilder，名字类似，不知道底层实现是否一致。\n\n有同学说要学习老师的 coding 方式和方法，我也同意，其实只要有 Benchmark Test，那么很多编程的想法和猜测，都可以自己写代码测试一下。","like_count":0}]}