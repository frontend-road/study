{"id":96623,"title":"24 | ç‰©ç†å†…å­˜ç®¡ç†ï¼ˆä¸‹ï¼‰ï¼šä¼šè®®å®¤ç®¡ç†å‘˜å¦‚ä½•åˆ†é…ä¼šè®®å®¤ï¼Ÿ","content":"<p>å‰ä¸€èŠ‚ï¼Œå‰é¢æˆ‘ä»¬è§£æäº†æ•´é¡µçš„åˆ†é…æœºåˆ¶ã€‚å¦‚æœé‡åˆ°å°çš„å¯¹è±¡ï¼Œç‰©ç†å†…å­˜æ˜¯å¦‚ä½•åˆ†é…çš„å‘¢ï¼Ÿè¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€çœ‹ã€‚</p><h2>å°å†…å­˜çš„åˆ†é…</h2><p>å‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œå¦‚æœé‡åˆ°å°çš„å¯¹è±¡ï¼Œä¼šä½¿ç”¨slubåˆ†é…å™¨è¿›è¡Œåˆ†é…ã€‚é‚£æˆ‘ä»¬å°±å…ˆæ¥è§£æå®ƒçš„å·¥ä½œåŸç†ã€‚</p><p>è¿˜è®°å¾—å’±ä»¬åˆ›å»ºè¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨dup_task_structï¼Œå®ƒæƒ³è¦è¯•å›¾å¤åˆ¶ä¸€ä¸ªtask_structå¯¹è±¡ï¼Œéœ€è¦å…ˆè°ƒç”¨alloc_task_struct_nodeï¼Œåˆ†é…ä¸€ä¸ªtask_structå¯¹è±¡ã€‚</p><p>ä»è¿™æ®µä»£ç å¯ä»¥çœ‹å‡ºï¼Œå®ƒè°ƒç”¨äº†kmem_cache_alloc_nodeå‡½æ•°ï¼Œåœ¨task_structçš„ç¼“å­˜åŒºåŸŸtask_struct_cachepåˆ†é…äº†ä¸€å—å†…å­˜ã€‚</p><pre><code>static struct kmem_cache *task_struct_cachep;\n\ntask_struct_cachep = kmem_cache_create(&quot;task_struct&quot;,\n\t\t\tarch_task_struct_size, align,\n\t\t\tSLAB_PANIC|SLAB_NOTRACK|SLAB_ACCOUNT, NULL);\n\nstatic inline struct task_struct *alloc_task_struct_node(int node)\n{\n\treturn kmem_cache_alloc_node(task_struct_cachep, GFP_KERNEL, node);\n}\n\nstatic inline void free_task_struct(struct task_struct *tsk)\n{\n\tkmem_cache_free(task_struct_cachep, tsk);\n}\n</code></pre><p>åœ¨ç³»ç»Ÿåˆå§‹åŒ–çš„æ—¶å€™ï¼Œtask_struct_cachepä¼šè¢«kmem_cache_createå‡½æ•°åˆ›å»ºã€‚è¿™ä¸ªå‡½æ•°ä¹Ÿæ¯”è¾ƒå®¹æ˜“çœ‹æ‡‚ï¼Œä¸“é—¨ç”¨äºåˆ†é…task_structå¯¹è±¡çš„ç¼“å­˜ã€‚è¿™ä¸ªç¼“å­˜åŒºçš„åå­—å°±å«task_structã€‚ç¼“å­˜åŒºä¸­æ¯ä¸€å—çš„å¤§å°æ­£å¥½ç­‰äºtask_structçš„å¤§å°ï¼Œä¹Ÿå³arch_task_struct_sizeã€‚</p><p>æœ‰äº†è¿™ä¸ªç¼“å­˜åŒºï¼Œæ¯æ¬¡åˆ›å»ºtask_structçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ç”¨åˆ°å†…å­˜é‡Œé¢å»åˆ†é…ï¼Œå…ˆåœ¨ç¼“å­˜é‡Œé¢çœ‹çœ‹æœ‰æ²¡æœ‰ç›´æ¥å¯ç”¨çš„ï¼Œè¿™å°±æ˜¯<strong>kmem_cache_alloc_node</strong>çš„ä½œç”¨ã€‚</p><!-- [[[read_end]]] --><p>å½“ä¸€ä¸ªè¿›ç¨‹ç»“æŸï¼Œtask_structä¹Ÿä¸ç”¨ç›´æ¥è¢«é”€æ¯ï¼Œè€Œæ˜¯æ”¾å›åˆ°ç¼“å­˜ä¸­ï¼Œè¿™å°±æ˜¯<strong>kmem_cache_free</strong>çš„ä½œç”¨ã€‚è¿™æ ·ï¼Œæ–°è¿›ç¨‹åˆ›å»ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ç”¨ç°æˆçš„ç¼“å­˜ä¸­çš„task_structäº†ã€‚</p><p>æˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹ï¼Œç¼“å­˜åŒºstruct kmem_cacheåˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p><pre><code>struct kmem_cache {\n\tstruct kmem_cache_cpu __percpu *cpu_slab;\n\t/* Used for retriving partial slabs etc */\n\tunsigned long flags;\n\tunsigned long min_partial;\n\tint size;\t\t/* The size of an object including meta data */\n\tint object_size;\t/* The size of an object without meta data */\n\tint offset;\t\t/* Free pointer offset. */\n#ifdef CONFIG_SLUB_CPU_PARTIAL\n\tint cpu_partial;\t/* Number of per cpu partial objects to keep around */\n#endif\n\tstruct kmem_cache_order_objects oo;\n\t/* Allocation and freeing of slabs */\n\tstruct kmem_cache_order_objects max;\n\tstruct kmem_cache_order_objects min;\n\tgfp_t allocflags;\t/* gfp flags to use on each alloc */\n\tint refcount;\t\t/* Refcount for slab cache destroy */\n\tvoid (*ctor)(void *);\n......\n\tconst char *name;\t/* Name (only for display!) */\n\tstruct list_head list;\t/* List of slab caches */\n......\n\tstruct kmem_cache_node *node[MAX_NUMNODES];\n};\n\n</code></pre><p>åœ¨struct kmem_cacheé‡Œé¢ï¼Œæœ‰ä¸ªå˜é‡struct list_head listï¼Œè¿™ä¸ªç»“æ„æˆ‘ä»¬å·²ç»çœ‹åˆ°è¿‡å¤šæ¬¡äº†ã€‚æˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå¯¹äºæ“ä½œç³»ç»Ÿæ¥è®²ï¼Œè¦åˆ›å»ºå’Œç®¡ç†çš„ç¼“å­˜ç»å¯¹ä¸æ­¢task_structã€‚éš¾é“mm_structå°±ä¸éœ€è¦å—ï¼Ÿfs_structå°±ä¸éœ€è¦å—ï¼Ÿéƒ½éœ€è¦ã€‚å› æ­¤ï¼Œæ‰€æœ‰çš„ç¼“å­˜æœ€åéƒ½ä¼šæ”¾åœ¨ä¸€ä¸ªé“¾è¡¨é‡Œé¢ï¼Œä¹Ÿå°±æ˜¯LIST_HEAD(slab_caches)ã€‚</p><p>å¯¹äºç¼“å­˜æ¥è®²ï¼Œå…¶å®å°±æ˜¯åˆ†é…äº†è¿ç»­å‡ é¡µçš„å¤§å†…å­˜å—ï¼Œç„¶åæ ¹æ®ç¼“å­˜å¯¹è±¡çš„å¤§å°ï¼Œåˆ‡æˆå°å†…å­˜å—ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿™é‡Œæœ‰ä¸‰ä¸ªkmem_cache_order_objectsç±»å‹çš„å˜é‡ã€‚è¿™é‡Œé¢çš„orderï¼Œå°±æ˜¯2çš„orderæ¬¡æ–¹ä¸ªé¡µé¢çš„å¤§å†…å­˜å—ï¼Œobjectså°±æ˜¯èƒ½å¤Ÿå­˜æ”¾çš„ç¼“å­˜å¯¹è±¡çš„æ•°é‡ã€‚</p><p>æœ€ç»ˆï¼Œæˆ‘ä»¬å°†å¤§å†…å­˜å—åˆ‡åˆ†æˆå°å†…å­˜å—ï¼Œæ ·å­å°±åƒä¸‹é¢è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/17/5e/172839800c8d51c49b67ec8c4d07315e.jpeg?wh=2483*1523\" alt=\"\"></p><p>æ¯ä¸€é¡¹çš„ç»“æ„éƒ½æ˜¯ç¼“å­˜å¯¹è±¡åé¢è·Ÿä¸€ä¸ªä¸‹ä¸€ä¸ªç©ºé—²å¯¹è±¡çš„æŒ‡é’ˆï¼Œè¿™æ ·éå¸¸æ–¹ä¾¿å°†æ‰€æœ‰çš„ç©ºé—²å¯¹è±¡é“¾æˆä¸€ä¸ªé“¾ã€‚å…¶å®ï¼Œè¿™å°±ç›¸å½“äºå’±ä»¬æ•°æ®ç»“æ„é‡Œé¢å­¦çš„ï¼Œç”¨æ•°ç»„å®ç°ä¸€ä¸ªå¯éšæœºæ’å…¥å’Œåˆ é™¤çš„é“¾è¡¨ã€‚</p><p>æ‰€ä»¥ï¼Œè¿™é‡Œé¢å°±æœ‰ä¸‰ä¸ªå˜é‡ï¼šsizeæ˜¯åŒ…å«è¿™ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼Œobject_sizeæ˜¯çº¯å¯¹è±¡çš„å¤§å°ï¼Œoffsetå°±æ˜¯æŠŠä¸‹ä¸€ä¸ªç©ºé—²å¯¹è±¡çš„æŒ‡é’ˆå­˜æ”¾åœ¨è¿™ä¸€é¡¹é‡Œçš„åç§»é‡ã€‚</p><p>é‚£è¿™äº›ç¼“å­˜å¯¹è±¡å“ªäº›è¢«åˆ†é…äº†ã€å“ªäº›åœ¨ç©ºç€ï¼Œä»€ä¹ˆæƒ…å†µä¸‹æ•´ä¸ªå¤§å†…å­˜å—éƒ½è¢«åˆ†é…å®Œäº†ï¼Œéœ€è¦å‘ä¼™ä¼´ç³»ç»Ÿç”³è¯·å‡ ä¸ªé¡µå½¢æˆæ–°çš„å¤§å†…å­˜å—ï¼Ÿè¿™äº›ä¿¡æ¯è¯¥ç”±è°æ¥ç»´æŠ¤å‘¢ï¼Ÿ</p><p>æ¥ä¸‹æ¥å°±æ˜¯æœ€é‡è¦çš„ä¸¤ä¸ªæˆå‘˜å˜é‡å‡ºåœºçš„æ—¶å€™äº†ã€‚kmem_cache_cpuå’Œkmem_cache_nodeï¼Œå®ƒä»¬éƒ½æ˜¯æ¯ä¸ªNUMAèŠ‚ç‚¹ä¸Šæœ‰ä¸€ä¸ªï¼Œæˆ‘ä»¬åªéœ€è¦çœ‹ä¸€ä¸ªèŠ‚ç‚¹é‡Œé¢çš„æƒ…å†µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/45/0a/45f38a0c7bce8c98881bbe8b8b4c190a.jpeg?wh=2603*2033\" alt=\"\"></p><p>åœ¨åˆ†é…ç¼“å­˜å—çš„æ—¶å€™ï¼Œè¦åˆ†ä¸¤ç§è·¯å¾„ï¼Œ<strong>fast path</strong>å’Œ<strong>slow path</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>å¿«é€Ÿé€šé“</strong>å’Œ<strong>æ™®é€šé€šé“</strong>ã€‚å…¶ä¸­kmem_cache_cpuå°±æ˜¯å¿«é€Ÿé€šé“ï¼Œkmem_cache_nodeæ˜¯æ™®é€šé€šé“ã€‚æ¯æ¬¡åˆ†é…çš„æ—¶å€™ï¼Œè¦å…ˆä»kmem_cache_cpuè¿›è¡Œåˆ†é…ã€‚å¦‚æœkmem_cache_cpué‡Œé¢æ²¡æœ‰ç©ºé—²çš„å—ï¼Œé‚£å°±åˆ°kmem_cache_nodeä¸­è¿›è¡Œåˆ†é…ï¼›å¦‚æœè¿˜æ˜¯æ²¡æœ‰ç©ºé—²çš„å—ï¼Œæ‰å»ä¼™ä¼´ç³»ç»Ÿåˆ†é…æ–°çš„é¡µã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œkmem_cache_cpué‡Œé¢æ˜¯å¦‚ä½•å­˜æ”¾ç¼“å­˜å—çš„ã€‚</p><pre><code>struct kmem_cache_cpu {\n\tvoid **freelist;\t/* Pointer to next available object */\n\tunsigned long tid;\t/* Globally unique transaction id */\n\tstruct page *page;\t/* The slab from which we are allocating */\n#ifdef CONFIG_SLUB_CPU_PARTIAL\n\tstruct page *partial;\t/* Partially allocated frozen slabs */\n#endif\n......\n};\n</code></pre><p>åœ¨è¿™é‡Œï¼ŒpageæŒ‡å‘å¤§å†…å­˜å—çš„ç¬¬ä¸€ä¸ªé¡µï¼Œç¼“å­˜å—å°±æ˜¯ä»é‡Œé¢åˆ†é…çš„ã€‚freelistæŒ‡å‘å¤§å†…å­˜å—é‡Œé¢ç¬¬ä¸€ä¸ªç©ºé—²çš„é¡¹ã€‚æŒ‰ç…§ä¸Šé¢è¯´çš„ï¼Œè¿™ä¸€é¡¹ä¼šæœ‰æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªç©ºé—²çš„é¡¹ï¼Œæœ€ç»ˆæ‰€æœ‰ç©ºé—²çš„é¡¹ä¼šå½¢æˆä¸€ä¸ªé“¾è¡¨ã€‚</p><p>partialæŒ‡å‘çš„ä¹Ÿæ˜¯å¤§å†…å­˜å—çš„ç¬¬ä¸€ä¸ªé¡µï¼Œä¹‹æ‰€ä»¥åå­—å«partialï¼ˆéƒ¨åˆ†ï¼‰ï¼Œå°±æ˜¯å› ä¸ºå®ƒé‡Œé¢éƒ¨åˆ†è¢«åˆ†é…å‡ºå»äº†ï¼Œéƒ¨åˆ†æ˜¯ç©ºçš„ã€‚è¿™æ˜¯ä¸€ä¸ªå¤‡ç”¨åˆ—è¡¨ï¼Œå½“pageæ»¡äº†ï¼Œå°±ä¼šä»è¿™é‡Œæ‰¾ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹kmem_cache_nodeçš„å®šä¹‰ã€‚</p><pre><code>struct kmem_cache_node {\n\tspinlock_t list_lock;\n......\n#ifdef CONFIG_SLUB\n\tunsigned long nr_partial;\n\tstruct list_head partial;\n......\n#endif\n};\n</code></pre><p>è¿™é‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ªpartialï¼Œæ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚è¿™ä¸ªé“¾è¡¨é‡Œå­˜æ”¾çš„æ˜¯éƒ¨åˆ†ç©ºé—²çš„å†…å­˜å—ã€‚è¿™æ˜¯kmem_cache_cpué‡Œé¢çš„partialçš„å¤‡ç”¨åˆ—è¡¨ï¼Œå¦‚æœé‚£é‡Œæ²¡æœ‰ï¼Œå°±åˆ°è¿™é‡Œæ¥æ‰¾ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™ä¸ªåˆ†é…è¿‡ç¨‹ã€‚kmem_cache_alloc_nodeä¼šè°ƒç”¨slab_alloc_nodeã€‚ä½ è¿˜æ˜¯å…ˆé‡ç‚¹çœ‹è¿™é‡Œé¢çš„æ³¨é‡Šï¼Œè¿™é‡Œé¢è¯´çš„å°±æ˜¯å¿«é€Ÿé€šé“å’Œæ™®é€šé€šé“çš„æ¦‚å¿µã€‚</p><pre><code>/*\n * Inlined fastpath so that allocation functions (kmalloc, kmem_cache_alloc)\n * have the fastpath folded into their functions. So no function call\n * overhead for requests that can be satisfied on the fastpath.\n *\n * The fastpath works by first checking if the lockless freelist can be used.\n * If not then __slab_alloc is called for slow processing.\n *\n * Otherwise we can simply pick the next object from the lockless free list.\n */\nstatic __always_inline void *slab_alloc_node(struct kmem_cache *s,\n\t\tgfp_t gfpflags, int node, unsigned long addr)\n{\n\tvoid *object;\n\tstruct kmem_cache_cpu *c;\n\tstruct page *page;\n\tunsigned long tid;\n......\n\ttid = this_cpu_read(s-&gt;cpu_slab-&gt;tid);\n\tc = raw_cpu_ptr(s-&gt;cpu_slab);\n......\n\tobject = c-&gt;freelist;\n\tpage = c-&gt;page;\n\tif (unlikely(!object || !node_match(page, node))) {\n\t\tobject = __slab_alloc(s, gfpflags, node, addr, c);\n\t\tstat(s, ALLOC_SLOWPATH);\n\t} \n......\n\treturn object;\n}\n</code></pre><p>å¿«é€Ÿé€šé“å¾ˆç®€å•ï¼Œå–å‡ºcpu_slabä¹Ÿå³kmem_cache_cpuçš„freelistï¼Œè¿™å°±æ˜¯ç¬¬ä¸€ä¸ªç©ºé—²çš„é¡¹ï¼Œå¯ä»¥ç›´æ¥è¿”å›äº†ã€‚å¦‚æœæ²¡æœ‰ç©ºé—²çš„äº†ï¼Œåˆ™åªå¥½è¿›å…¥æ™®é€šé€šé“ï¼Œè°ƒç”¨__slab_allocã€‚</p><pre><code>static void *___slab_alloc(struct kmem_cache *s, gfp_t gfpflags, int node,\n\t\t\t  unsigned long addr, struct kmem_cache_cpu *c)\n{\n\tvoid *freelist;\n\tstruct page *page;\n......\nredo:\n......\n\t/* must check again c-&gt;freelist in case of cpu migration or IRQ */\n\tfreelist = c-&gt;freelist;\n\tif (freelist)\n\t\tgoto load_freelist;\n\n\n\tfreelist = get_freelist(s, page);\n\n\n\tif (!freelist) {\n\t\tc-&gt;page = NULL;\n\t\tstat(s, DEACTIVATE_BYPASS);\n\t\tgoto new_slab;\n\t}\n\n\nload_freelist:\n\tc-&gt;freelist = get_freepointer(s, freelist);\n\tc-&gt;tid = next_tid(c-&gt;tid);\n\treturn freelist;\n\n\nnew_slab:\n\n\n\tif (slub_percpu_partial(c)) {\n\t\tpage = c-&gt;page = slub_percpu_partial(c);\n\t\tslub_set_percpu_partial(c, page);\n\t\tstat(s, CPU_PARTIAL_ALLOC);\n\t\tgoto redo;\n\t}\n\n\n\tfreelist = new_slab_objects(s, gfpflags, node, &amp;c);\n......\n\treturn freeli\n\n</code></pre><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆå†æ¬¡å°è¯•ä¸€ä¸‹kmem_cache_cpuçš„freelistã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸‡ä¸€å½“å‰è¿›ç¨‹è¢«ä¸­æ–­ï¼Œç­‰å›æ¥çš„æ—¶å€™ï¼Œåˆ«äººå·²ç»é‡Šæ”¾äº†ä¸€äº›ç¼“å­˜ï¼Œè¯´ä¸å®šåˆæœ‰ç©ºé—´äº†å‘¢ã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±è·³åˆ°load_freelistï¼Œåœ¨è¿™é‡Œå°†freelistæŒ‡å‘ä¸‹ä¸€ä¸ªç©ºé—²é¡¹ï¼Œè¿”å›å°±å¯ä»¥äº†ã€‚</p><p>å¦‚æœfreelistè¿˜æ˜¯æ²¡æœ‰ï¼Œåˆ™è·³åˆ°new_slabé‡Œé¢å»ã€‚è¿™é‡Œé¢æˆ‘ä»¬å…ˆå»kmem_cache_cpuçš„partialé‡Œé¢çœ‹ã€‚å¦‚æœpartialä¸æ˜¯ç©ºçš„ï¼Œé‚£å°±å°†kmem_cache_cpuçš„pageï¼Œä¹Ÿå°±æ˜¯å¿«é€Ÿé€šé“çš„é‚£ä¸€å¤§å—å†…å­˜ï¼Œæ›¿æ¢ä¸ºpartialé‡Œé¢çš„å¤§å—å†…å­˜ã€‚ç„¶åredoï¼Œé‡æ–°è¯•ä¸‹ã€‚è¿™æ¬¡åº”è¯¥å°±å¯ä»¥æˆåŠŸäº†ã€‚</p><p>å¦‚æœçœŸçš„è¿˜ä¸è¡Œï¼Œé‚£å°±è¦åˆ°new_slab_objectsäº†ã€‚</p><pre><code>static inline void *new_slab_objects(struct kmem_cache *s, gfp_t flags,\n\t\t\tint node, struct kmem_cache_cpu **pc)\n{\n\tvoid *freelist;\n\tstruct kmem_cache_cpu *c = *pc;\n\tstruct page *page;\n\n\n\tfreelist = get_partial(s, flags, node, c);\n\n\n\tif (freelist)\n\t\treturn freelist;\n\n\n\tpage = new_slab(s, flags, node);\n\tif (page) {\n\t\tc = raw_cpu_ptr(s-&gt;cpu_slab);\n\t\tif (c-&gt;page)\n\t\t\tflush_slab(s, c);\n\n\n\t\tfreelist = page-&gt;freelist;\n\t\tpage-&gt;freelist = NULL;\n\n\n\t\tstat(s, ALLOC_SLAB);\n\t\tc-&gt;page = page;\n\t\t*pc = c;\n\t} else\n\t\tfreelist = NULL;\n\n\n\treturn freelis\n</code></pre><p>åœ¨è¿™é‡Œé¢ï¼Œget_partialä¼šæ ¹æ®node idï¼Œæ‰¾åˆ°ç›¸åº”çš„kmem_cache_nodeï¼Œç„¶åè°ƒç”¨get_partial_nodeï¼Œå¼€å§‹åœ¨è¿™ä¸ªèŠ‚ç‚¹è¿›è¡Œåˆ†é…ã€‚</p><pre><code>/*\n * Try to allocate a partial slab from a specific node.\n */\nstatic void *get_partial_node(struct kmem_cache *s, struct kmem_cache_node *n,\n\t\t\t\tstruct kmem_cache_cpu *c, gfp_t flags)\n{\n\tstruct page *page, *page2;\n\tvoid *object = NULL;\n\tint available = 0;\n\tint objects;\n......\n\tlist_for_each_entry_safe(page, page2, &amp;n-&gt;partial, lru) {\n\t\tvoid *t;\n\n\n\t\tt = acquire_slab(s, n, page, object == NULL, &amp;objects);\n\t\tif (!t)\n\t\t\tbreak;\n\n\n\t\tavailable += objects;\n\t\tif (!object) {\n\t\t\tc-&gt;page = page;\n\t\t\tstat(s, ALLOC_FROM_PARTIAL);\n\t\t\tobject = t;\n\t\t} else {\n\t\t\tput_cpu_partial(s, page, 0);\n\t\t\tstat(s, CPU_PARTIAL_NODE);\n\t\t}\n\t\tif (!kmem_cache_has_cpu_partial(s)\n\t\t\t|| available &gt; slub_cpu_partial(s) / 2)\n\t\t\tbreak;\n\t}\n......\n\treturn object;\n</code></pre><p>acquire_slabä¼šä»kmem_cache_nodeçš„partialé“¾è¡¨ä¸­æ‹¿ä¸‹ä¸€å¤§å—å†…å­˜æ¥ï¼Œå¹¶ä¸”å°†freelistï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€å—ç©ºé—²çš„ç¼“å­˜å—ï¼Œèµ‹å€¼ç»™tã€‚å¹¶ä¸”å½“ç¬¬ä¸€è½®å¾ªç¯çš„æ—¶å€™ï¼Œå°†kmem_cache_cpuçš„pageæŒ‡å‘å–ä¸‹æ¥çš„è¿™ä¸€å¤§å—å†…å­˜ï¼Œè¿”å›çš„objectå°±æ˜¯è¿™å—å†…å­˜é‡Œé¢çš„ç¬¬ä¸€ä¸ªç¼“å­˜å—tã€‚å¦‚æœkmem_cache_cpuä¹Ÿæœ‰ä¸€ä¸ªpartialï¼Œå°±ä¼šè¿›è¡Œç¬¬äºŒè½®ï¼Œå†æ¬¡å–ä¸‹ä¸€å¤§å—å†…å­˜æ¥ï¼Œè¿™æ¬¡è°ƒç”¨put_cpu_partialï¼Œæ”¾åˆ°kmem_cache_cpuçš„partialé‡Œé¢ã€‚</p><p>å¦‚æœkmem_cache_nodeé‡Œé¢ä¹Ÿæ²¡æœ‰ç©ºé—²çš„å†…å­˜ï¼Œè¿™å°±è¯´æ˜åŸæ¥åˆ†é…çš„é¡µé‡Œé¢éƒ½æ”¾æ»¡äº†ï¼Œå°±è¦å›åˆ°new_slab_objectså‡½æ•°ï¼Œé‡Œé¢new_slabå‡½æ•°ä¼šè°ƒç”¨allocate_slabã€‚</p><pre><code>static struct page *allocate_slab(struct kmem_cache *s, gfp_t flags, int node)\n{\n\tstruct page *page;\n\tstruct kmem_cache_order_objects oo = s-&gt;oo;\n\tgfp_t alloc_gfp;\n\tvoid *start, *p;\n\tint idx, order;\n\tbool shuffle;\n\n\n\tflags &amp;= gfp_allowed_mask;\n......\n\tpage = alloc_slab_page(s, alloc_gfp, node, oo);\n\tif (unlikely(!page)) {\n\t\too = s-&gt;min;\n\t\talloc_gfp = flags;\n\t\t/*\n\t\t * Allocation may have failed due to fragmentation.\n\t\t * Try a lower order alloc if possible\n\t\t */\n\t\tpage = alloc_slab_page(s, alloc_gfp, node, oo);\n\t\tif (unlikely(!page))\n\t\t\tgoto out;\n\t\tstat(s, ORDER_FALLBACK);\n\t}\n......\n\treturn page;\n}\n</code></pre><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°äº†alloc_slab_pageåˆ†é…é¡µé¢ã€‚åˆ†é…çš„æ—¶å€™ï¼Œè¦æŒ‰kmem_cache_order_objectsé‡Œé¢çš„orderæ¥ã€‚å¦‚æœç¬¬ä¸€æ¬¡åˆ†é…ä¸æˆåŠŸï¼Œè¯´æ˜å†…å­˜å·²ç»å¾ˆç´§å¼ äº†ï¼Œé‚£å°±æ¢æˆminç‰ˆæœ¬çš„kmem_cache_order_objectsã€‚</p><p>å¥½äº†ï¼Œè¿™ä¸ªå¤æ‚çš„å±‚å±‚åˆ†é…æœºåˆ¶ï¼Œæˆ‘ä»¬å°±è®²åˆ°è¿™é‡Œï¼Œä½ ç†è§£åˆ°è¿™é‡Œä¹Ÿå°±å¤Ÿç”¨äº†ã€‚</p><h2>é¡µé¢æ¢å‡º</h2><p>å¦ä¸€ä¸ªç‰©ç†å†…å­˜ç®¡ç†å¿…é¡»è¦å¤„ç†çš„äº‹æƒ…å°±æ˜¯ï¼Œé¡µé¢æ¢å‡ºã€‚æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ— è®ºæ˜¯32ä½è¿˜æ˜¯64ä½ï¼Œè™šæ‹Ÿåœ°å€ç©ºé—´éƒ½éå¸¸å¤§ï¼Œç‰©ç†å†…å­˜ä¸å¯èƒ½æœ‰è¿™ä¹ˆå¤šçš„ç©ºé—´æ”¾å¾—ä¸‹ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé¡µé¢åªæœ‰åœ¨è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œæ‰ä¼šæ”¾åœ¨ç‰©ç†å†…å­˜ä¸­ã€‚å¦‚æœè¿‡äº†ä¸€æ®µæ—¶é—´ä¸è¢«ä½¿ç”¨ï¼Œå³ä¾¿ç”¨æˆ·è¿›ç¨‹å¹¶æ²¡æœ‰é‡Šæ”¾å®ƒï¼Œç‰©ç†å†…å­˜ç®¡ç†ä¹Ÿæœ‰è´£ä»»åšä¸€å®šçš„å¹²é¢„ã€‚ä¾‹å¦‚ï¼Œå°†è¿™äº›ç‰©ç†å†…å­˜ä¸­çš„é¡µé¢æ¢å‡ºåˆ°ç¡¬ç›˜ä¸Šå»ï¼›å°†ç©ºå‡ºçš„ç‰©ç†å†…å­˜ï¼Œäº¤ç»™æ´»è·ƒçš„è¿›ç¨‹å»ä½¿ç”¨ã€‚</p><p>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘é¡µé¢æ¢å‡ºå‘¢ï¼Ÿ</p><p>å¯ä»¥æƒ³è±¡ï¼Œæœ€å¸¸è§çš„æƒ…å†µå°±æ˜¯ï¼Œåˆ†é…å†…å­˜çš„æ—¶å€™ï¼Œå‘ç°æ²¡æœ‰åœ°æ–¹äº†ï¼Œå°±è¯•å›¾å›æ”¶ä¸€ä¸‹ã€‚ä¾‹å¦‚ï¼Œå’±ä»¬è§£æç”³è¯·ä¸€ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨get_page_from_freelistï¼Œæ¥ä¸‹æ¥çš„è°ƒç”¨é“¾ä¸ºget_page_from_freelist-&gt;node_reclaim-&gt;__node_reclaim-&gt;shrink_nodeï¼Œé€šè¿‡è¿™ä¸ªè°ƒç”¨é“¾å¯ä»¥çœ‹å‡ºï¼Œé¡µé¢æ¢å‡ºä¹Ÿæ˜¯ä»¥å†…å­˜èŠ‚ç‚¹ä¸ºå•ä½çš„ã€‚</p><p>å½“ç„¶è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ä½œä¸ºå†…å­˜ç®¡ç†ç³»ç»Ÿåº”è¯¥ä¸»åŠ¨å»åšçš„ï¼Œè€Œä¸èƒ½ç­‰çœŸçš„å‡ºäº†äº‹å„¿å†åšï¼Œè¿™å°±æ˜¯å†…æ ¸çº¿ç¨‹<strong>kswapd</strong>ã€‚è¿™ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œåœ¨ç³»ç»Ÿåˆå§‹åŒ–çš„æ—¶å€™å°±è¢«åˆ›å»ºã€‚è¿™æ ·å®ƒä¼šè¿›å…¥ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œç›´åˆ°ç³»ç»Ÿåœæ­¢ã€‚åœ¨è¿™ä¸ªå¾ªç¯ä¸­ï¼Œå¦‚æœå†…å­˜ä½¿ç”¨æ²¡æœ‰é‚£ä¹ˆç´§å¼ ï¼Œé‚£å®ƒå°±å¯ä»¥æ”¾å¿ƒç¡å¤§è§‰ï¼›å¦‚æœå†…å­˜ç´§å¼ äº†ï¼Œå°±éœ€è¦å»æ£€æŸ¥ä¸€ä¸‹å†…å­˜ï¼Œçœ‹çœ‹æ˜¯å¦éœ€è¦æ¢å‡ºä¸€äº›å†…å­˜é¡µã€‚</p><pre><code>/*\n * The background pageout daemon, started as a kernel thread\n * from the init process.\n *\n * This basically trickles out pages so that we have _some_\n * free memory available even if there is no other activity\n * that frees anything up. This is needed for things like routing\n * etc, where we otherwise might have all activity going on in\n * asynchronous contexts that cannot page things out.\n *\n * If there are applications that are active memory-allocators\n * (most normal use), this basically shouldn't matter.\n */\nstatic int kswapd(void *p)\n{\n\tunsigned int alloc_order, reclaim_order;\n\tunsigned int classzone_idx = MAX_NR_ZONES - 1;\n\tpg_data_t *pgdat = (pg_data_t*)p;\n\tstruct task_struct *tsk = current;\n\n\n    for ( ; ; ) {\n......\n        kswapd_try_to_sleep(pgdat, alloc_order, reclaim_order,\n\t\t\t\t\tclasszone_idx);\n......\n        reclaim_order = balance_pgdat(pgdat, alloc_order, classzone_idx);\n......\n    }\n}\n\n</code></pre><p>è¿™é‡Œçš„è°ƒç”¨é“¾æ˜¯balance_pgdat-&gt;kswapd_shrink_node-&gt;shrink_nodeï¼Œæ˜¯ä»¥å†…å­˜èŠ‚ç‚¹ä¸ºå•ä½çš„ï¼Œæœ€åä¹Ÿæ˜¯è°ƒç”¨shrink_nodeã€‚</p><p>shrink_nodeä¼šè°ƒç”¨shrink_node_memcgã€‚è¿™é‡Œé¢æœ‰ä¸€ä¸ªå¾ªç¯å¤„ç†é¡µé¢çš„åˆ—è¡¨ï¼Œçœ‹è¿™ä¸ªå‡½æ•°çš„æ³¨é‡Šï¼Œå…¶å®å’Œä¸Šé¢æˆ‘ä»¬æƒ³è¡¨è¾¾çš„å†…å­˜æ¢å‡ºæ˜¯ä¸€æ ·çš„ã€‚</p><pre><code>/*\n * This is a basic per-node page freer.  Used by both kswapd and direct reclaim.\n */\nstatic void shrink_node_memcg(struct pglist_data *pgdat, struct mem_cgroup *memcg,\n\t\t\t      struct scan_control *sc, unsigned long *lru_pages)\n{\n......\n\tunsigned long nr[NR_LRU_LISTS];\n\tenum lru_list lru;\n......\n\twhile (nr[LRU_INACTIVE_ANON] || nr[LRU_ACTIVE_FILE] ||\n\t\t\t\t\tnr[LRU_INACTIVE_FILE]) {\n\t\tunsigned long nr_anon, nr_file, percentage;\n\t\tunsigned long nr_scanned;\n\n\n\t\tfor_each_evictable_lru(lru) {\n\t\t\tif (nr[lru]) {\n\t\t\t\tnr_to_scan = min(nr[lru], SWAP_CLUSTER_MAX);\n\t\t\t\tnr[lru] -= nr_to_scan;\n\n\n\t\t\t\tnr_reclaimed += shrink_list(lru, nr_to_scan,\n\t\t\t\t\t\t\t    lruvec, memcg, sc);\n\t\t\t}\n\t\t}\n......\n\t}\n......\n</code></pre><p>è¿™é‡Œé¢æœ‰ä¸ªlruåˆ—è¡¨ã€‚ä»ä¸‹é¢çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œæ‰€æœ‰çš„é¡µé¢éƒ½è¢«æŒ‚åœ¨LRUåˆ—è¡¨ä¸­ã€‚LRUæ˜¯Least Recent Useï¼Œä¹Ÿå°±æ˜¯æœ€è¿‘æœ€å°‘ä½¿ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªåˆ—è¡¨é‡Œé¢ä¼šæŒ‰ç…§æ´»è·ƒç¨‹åº¦è¿›è¡Œæ’åºï¼Œè¿™æ ·å°±å®¹æ˜“æŠŠä¸æ€ä¹ˆç”¨çš„å†…å­˜é¡µæ‹¿å‡ºæ¥åšå¤„ç†ã€‚</p><p>å†…å­˜é¡µæ€»å…±åˆ†ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯<strong>åŒ¿åé¡µ</strong>ï¼Œå’Œè™šæ‹Ÿåœ°å€ç©ºé—´è¿›è¡Œå…³è”ï¼›ä¸€ç±»æ˜¯<strong>å†…å­˜æ˜ å°„</strong>ï¼Œä¸ä½†å’Œè™šæ‹Ÿåœ°å€ç©ºé—´å…³è”ï¼Œè¿˜å’Œæ–‡ä»¶ç®¡ç†å…³è”ã€‚</p><p>å®ƒä»¬æ¯ä¸€ç±»éƒ½æœ‰ä¸¤ä¸ªåˆ—è¡¨ï¼Œä¸€ä¸ªæ˜¯activeï¼Œä¸€ä¸ªæ˜¯inactiveã€‚é¡¾åæ€ä¹‰ï¼Œactiveå°±æ˜¯æ¯”è¾ƒæ´»è·ƒçš„ï¼Œinactiveå°±æ˜¯ä¸æ€ä¹ˆæ´»è·ƒçš„ã€‚è¿™ä¸¤ä¸ªé‡Œé¢çš„é¡µä¼šå˜åŒ–ï¼Œè¿‡ä¸€æ®µæ—¶é—´ï¼Œæ´»è·ƒçš„å¯èƒ½å˜ä¸ºä¸æ´»è·ƒï¼Œä¸æ´»è·ƒçš„å¯èƒ½å˜ä¸ºæ´»è·ƒã€‚å¦‚æœè¦æ¢å‡ºå†…å­˜ï¼Œé‚£å°±æ˜¯ä»ä¸æ´»è·ƒçš„åˆ—è¡¨ä¸­æ‰¾å‡ºæœ€ä¸æ´»è·ƒçš„ï¼Œæ¢å‡ºåˆ°ç¡¬ç›˜ä¸Šã€‚</p><pre><code>enum lru_list {\n\tLRU_INACTIVE_ANON = LRU_BASE,\n\tLRU_ACTIVE_ANON = LRU_BASE + LRU_ACTIVE,\n\tLRU_INACTIVE_FILE = LRU_BASE + LRU_FILE,\n\tLRU_ACTIVE_FILE = LRU_BASE + LRU_FILE + LRU_ACTIVE,\n\tLRU_UNEVICTABLE,\n\tNR_LRU_LISTS\n};\n\n\n#define for_each_evictable_lru(lru) for (lru = 0; lru &lt;= LRU_ACTIVE_FILE; lru++)\n\n\nstatic unsigned long shrink_list(enum lru_list lru, unsigned long nr_to_scan,\n\t\t\t\t struct lruvec *lruvec, struct mem_cgroup *memcg,\n\t\t\t\t struct scan_control *sc)\n{\n\tif (is_active_lru(lru)) {\n\t\tif (inactive_list_is_low(lruvec, is_file_lru(lru),\n\t\t\t\t\t memcg, sc, true))\n\t\t\tshrink_active_list(nr_to_scan, lruvec, sc, lru);\n\t\treturn 0;\n\t}\n\n\n\treturn shrink_inactive_list(nr_to_scan, lruvec, sc, lru);\n</code></pre><p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œshrink_listä¼šå…ˆç¼©å‡æ´»è·ƒé¡µé¢åˆ—è¡¨ï¼Œå†å‹ç¼©ä¸æ´»è·ƒçš„é¡µé¢åˆ—è¡¨ã€‚å¯¹äºä¸æ´»è·ƒåˆ—è¡¨çš„ç¼©å‡ï¼Œshrink_inactive_listå°±éœ€è¦å¯¹é¡µé¢è¿›è¡Œå›æ”¶ï¼›å¯¹äºåŒ¿åé¡µæ¥è®²ï¼Œéœ€è¦åˆ†é…swapï¼Œå°†å†…å­˜é¡µå†™å…¥æ–‡ä»¶ç³»ç»Ÿï¼›å¯¹äºå†…å­˜æ˜ å°„å…³è”äº†æ–‡ä»¶çš„ï¼Œæˆ‘ä»¬éœ€è¦å°†åœ¨å†…å­˜ä¸­å¯¹äºæ–‡ä»¶çš„ä¿®æ”¹å†™å›åˆ°æ–‡ä»¶ä¸­ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>å¥½äº†ï¼Œå¯¹äºç‰©ç†å†…å­˜çš„ç®¡ç†å°±è®²åˆ°è¿™é‡Œäº†ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ã€‚å¯¹äºç‰©ç†å†…å­˜æ¥è®²ï¼Œä»ä¸‹å±‚åˆ°ä¸Šå±‚çš„å…³ç³»åŠåˆ†é…æ¨¡å¼å¦‚ä¸‹ï¼š</p><ul>\n<li>\n<p>ç‰©ç†å†…å­˜åˆ†NUMAèŠ‚ç‚¹ï¼Œåˆ†åˆ«è¿›è¡Œç®¡ç†ï¼›</p>\n</li>\n<li>\n<p>æ¯ä¸ªNUMAèŠ‚ç‚¹åˆ†æˆå¤šä¸ªå†…å­˜åŒºåŸŸï¼›</p>\n</li>\n<li>\n<p>æ¯ä¸ªå†…å­˜åŒºåŸŸåˆ†æˆå¤šä¸ªç‰©ç†é¡µé¢ï¼›</p>\n</li>\n<li>\n<p>ä¼™ä¼´ç³»ç»Ÿå°†å¤šä¸ªè¿ç»­çš„é¡µé¢ä½œä¸ºä¸€ä¸ªå¤§çš„å†…å­˜å—åˆ†é…ç»™ä¸Šå±‚ï¼›</p>\n</li>\n<li>\n<p>kswapdè´Ÿè´£ç‰©ç†é¡µé¢çš„æ¢å…¥æ¢å‡ºï¼›</p>\n</li>\n<li>\n<p>Slub Allocatorå°†ä»ä¼™ä¼´ç³»ç»Ÿç”³è¯·çš„å¤§å†…å­˜å—åˆ‡æˆå°å—ï¼Œåˆ†é…ç»™å…¶ä»–ç³»ç»Ÿã€‚</p>\n</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/52/54/527e5c861fd06c6eb61a761e4214ba54.jpeg?wh=2368*1693\" alt=\"\"></p><h2>è¯¾å ‚ç»ƒä¹ </h2><p>å†…å­˜çš„æ¢å…¥å’Œæ¢å‡ºæ¶‰åŠswapåˆ†åŒºï¼Œé‚£ä½ çŸ¥é“å¦‚ä½•æ£€æŸ¥å½“å‰swapåˆ†åŒºæƒ…å†µï¼Œå¦‚ä½•å¯ç”¨å’Œå…³é—­swapåŒºåŸŸï¼Œå¦‚ä½•è°ƒæ•´swappinesså—ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„ç–‘æƒ‘å’Œè§è§£ï¼Œä¹Ÿæ¬¢è¿ä½ æ”¶è—æœ¬èŠ‚å†…å®¹ï¼Œåå¤ç ”è¯»ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå’Œä»–ä¸€èµ·å­¦ä¹ ã€è¿›æ­¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/37/8c0a95fa07a8b9a1abfd394479bdd637.jpg?wh=1110*659\" alt=\"\"></p>","neighbors":{"left":{"article_title":"23 | ç‰©ç†å†…å­˜ç®¡ç†ï¼ˆä¸Šï¼‰ï¼šä¼šè®®å®¤ç®¡ç†å‘˜å¦‚ä½•åˆ†é…ä¼šè®®å®¤ï¼Ÿ","id":96103},"right":{"article_title":"25 | ç”¨æˆ·æ€å†…å­˜æ˜ å°„ï¼šå¦‚ä½•æ‰¾åˆ°æ­£ç¡®çš„ä¼šè®®å®¤ï¼Ÿ","id":97030}},"comments":[{"had_liked":false,"id":97552,"user_name":"why","can_delete":false,"product_type":"c1","uid":1012937,"ip_address":"","ucode":"C9E796E53F6F5E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/c9/d3439ca4.jpg","comment_is_top":false,"comment_ctime":1558693218,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"130407712098","product_id":100024701,"comment_content":"- å°å†…å­˜åˆ†é…, ä¾‹å¦‚åˆ†é… task_struct å¯¹è±¡<br>    - ä¼šè°ƒç”¨ kmem_cache_alloc_node å‡½æ•°, ä» task_struct ç¼“å­˜åŒºåŸŸ task_struct_cachep(åœ¨ç³»ç»Ÿåˆå§‹åŒ–æ—¶, ç”± kmem_cache_create åˆ›å»º) åˆ†é…ä¸€å—å†…å­˜<br>    - ä½¿ç”¨ task_struct å®Œæ¯•å, è°ƒç”¨ kmem_cache_free å›æ”¶åˆ°ç¼“å­˜æ± ä¸­<br>    - struct kmem_cache ç”¨äºè¡¨ç¤ºç¼“å­˜åŒºä¿¡æ¯, ç¼“å­˜åŒºå³åˆ†é…è¿ç»­å‡ ä¸ªé¡µçš„å¤§å—å†…å­˜, å†åˆ‡æˆå°å†…å­˜<br>    - å°å†…å­˜å³ç¼“å­˜åŒºçš„æ¯ä¸€é¡¹, éƒ½ç”±å¯¹è±¡å’ŒæŒ‡å‘ä¸‹ä¸€é¡¹ç©ºé—²å°å†…å­˜çš„æŒ‡é’ˆç»„æˆ(éšæœºæ’å…¥&#47;åˆ é™¤+å¿«é€ŸæŸ¥æ‰¾ç©ºé—²)<br>    - struct kmem_cache ä¸­ä¸‰ä¸ª kmem_cache_order_objects è¡¨ç¤ºä¸åŒçš„éœ€è¦åˆ†é…çš„å†…å­˜å—å¤§å°çš„é˜¶æ•°å’Œå¯¹è±¡æ•°<br>    - åˆ†é…ç¼“å­˜çš„å°å†…å­˜å—ç”±ä¸¤ä¸ªè·¯å¾„ fast path å’Œ slow path , åˆ†åˆ«å¯¹åº” struct kmem_cache ä¸­çš„ kmem_cache_cpu å’Œ kmem_cache_node<br>    - åˆ†é…æ—¶å…ˆä» kmem_cache_cpu åˆ†é…, è‹¥å…¶æ— ç©ºé—², å†ä» kmem_cache_node åˆ†é…, è¿˜æ²¡æœ‰å°±ä»ä¼™ä¼´ç³»ç»Ÿç”³è¯·æ–°å†…å­˜å—<br>    - struct kmem_cache_cpu ä¸­<br>        - page æŒ‡å‘å¤§å†…å­˜å—çš„ç¬¬ä¸€ä¸ªé¡µ<br>        - freelist æŒ‡å‘å¤§å†…å­˜å—ä¸­ç¬¬ä¸€ä¸ªç©ºé—²é¡¹<br>        - partial æŒ‡å‘å¦ä¸€ä¸ªå¤§å†…å­˜å—çš„ç¬¬ä¸€ä¸ªé¡µ, ä½†è¯¥å†…å­˜å—æœ‰éƒ¨åˆ†å·²åˆ†é…å‡ºå», å½“ page æ»¡å, åœ¨ partial ä¸­æ‰¾<br>    - struct kmem_cache_node<br>        - ä¹Ÿæœ‰ partial, æ˜¯ä¸€ä¸ªé“¾è¡¨, å­˜æ”¾éƒ¨åˆ†ç©ºé—²çš„å¤šä¸ªå¤§å†…å­˜å—, è‹¥ kmem_cacche_cpu ä¸­çš„ partial ä¹Ÿæ— ç©ºé—², åˆ™åœ¨è¿™æ‰¾<br>    - åˆ†é…è¿‡ç¨‹<br>        - kmem_cache_alloc_node-&gt;slab_alloc_node<br>        - å¿«é€Ÿé€šé“, å–å‡º kmem_cache_cpu çš„ freelist , è‹¥æœ‰ç©ºé—²ç›´æ¥è¿”å›<br>        - æ™®é€šé€šé“, è‹¥ freelist æ— ç©ºé—², è°ƒç”¨ `__slab_alloc`<br>        - `__slab_alloc` ä¼šé‡æ–°æŸ¥çœ‹ freelist, è‹¥è¿˜ä¸æ»¡è¶³, æŸ¥çœ‹ kmem_cache_cpu çš„ partial <br>        - è‹¥ partial ä¸ä¸ºç©º, ç”¨å…¶æ›¿æ¢ page, å¹¶é‡æ–°æ£€æŸ¥æ˜¯å¦æœ‰ç©ºé—²<br>        - è‹¥è¿˜æ˜¯æ— ç©ºé—², è°ƒç”¨ new_slab_objects<br>        - new_slab_objects æ ¹æ®èŠ‚ç‚¹ id æ‰¾åˆ°å¯¹åº” kmem_cache_node , è°ƒç”¨ get_partial_node<br>        - é¦–å…ˆä» kmem_cache_node çš„ partial é“¾è¡¨æ‹¿ä¸‹ä¸€å¤§å—å†…å­˜, æ›¿æ¢ kmem_cache_cpu çš„ page, å†å–ä¸€å—æ›¿æ¢ kmem_cache_cpu çš„ partial<br>        - è‹¥ kmem_cache_node ä¹Ÿæ²¡æœ‰ç©ºé—², åˆ™åœ¨ new_slab_objects ä¸­è°ƒç”¨ new_slab-&gt;allocate_slab-&gt;alloc_slab_page æ ¹æ®æŸä¸ª kmem_cache_order_objects è®¾ç½®ç”³è¯·å¤§å—å†…å­˜<br>- é¡µé¢æ¢å‡º<br>    - è§¦å‘æ¢å‡º: <br>    - 1) åˆ†é…å†…å­˜æ—¶å‘ç°æ²¡æœ‰ç©ºé—²; è°ƒç”¨ `get_page_from_freelist-&gt;node_reclaim-&gt;__node_reclaim-&gt;shrink_node`<br>    - 2) å†…å­˜ç®¡ç†ä¸»åŠ¨æ¢å‡º, ç”±å†…æ ¸çº¿ç¨‹ kswapd å®ç°<br>    - kswapd åœ¨å†…å­˜ä¸ç´§å¼ æ—¶ä¼‘çœ , åœ¨å†…å­˜ç´§å¼ æ—¶æ£€æµ‹å†…å­˜ è°ƒç”¨ balance_pgdat-&gt;kswapd_shrink_node-&gt;shrink_node<br>    - é¡µé¢éƒ½æŒ‚åœ¨ lru é“¾è¡¨ä¸­, é¡µé¢æœ‰ä¸¤ç§ç±»å‹: åŒ¿åé¡µ; æ–‡ä»¶å†…å­˜æ˜ å°„é¡µ<br>    - æ¯ä¸€ç±»æœ‰ä¸¤ä¸ªåˆ—è¡¨: active å’Œ inactive åˆ—è¡¨<br>    - è¦æ¢å‡ºæ—¶, ä» inactive åˆ—è¡¨ä¸­æ‰¾åˆ°æœ€ä¸æ´»è·ƒçš„é¡µæ¢å‡º<br>    - æ›´æ–°åˆ—è¡¨, shrink_list å…ˆç¼©å‡ active åˆ—è¡¨, å†ç¼©å‡ä¸æ´»è·ƒåˆ—è¡¨<br>    - ç¼©å‡ä¸æ´»è·ƒåˆ—è¡¨æ—¶å¯¹é¡µé¢è¿›è¡Œå›æ”¶:<br>        - åŒ¿åé¡µå›æ”¶: åˆ†é… swap, å°†å†…å­˜ä¹Ÿå†™å…¥æ–‡ä»¶ç³»ç»Ÿ<br>        - æ–‡ä»¶å†…å­˜æ˜ å°„é¡µ: å°†å†…å­˜ä¸­çš„æ–‡ä»¶ä¿®æ”¹å†™å…¥æ–‡ä»¶ä¸­","like_count":31},{"had_liked":false,"id":96663,"user_name":"W.jyao","can_delete":false,"product_type":"c1","uid":1422582,"ip_address":"","ucode":"C57B3A78B6A795","user_header":"https://static001.geekbang.org/account/avatar/00/15/b4/f6/735673f7.jpg","comment_is_top":false,"comment_ctime":1558485922,"is_pvip":false,"replies":[{"id":"49276","content":"å¤šçœ‹å‡ éå°±å¥½äº†","user_name":"ä½œè€…å›å¤","comment_id":96663,"uid":"1001590","ip_address":"","utype":1,"ctime":1567609412,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":4,"race_medal":0,"score":"83162864546","product_id":100024701,"comment_content":"çœŸå¿ƒçœ‹ä¸æ‡‚äº†ï¼ŒğŸ˜”ğŸ˜”ğŸ˜”","like_count":20,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450959,"discussion_content":"å¤šçœ‹å‡ éå°±å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567609412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053390,"avatar":"https://static001.geekbang.org/account/avatar/00/10/12/ce/a8c8b5e8.jpg","nickname":"Jason","note":"","ucode":"ABB3F1A63E102A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5168,"discussion_content":"çœ‹åˆ°ä½ è¿™ä¹ˆè¯´ï¼Œæˆ‘ä¹Ÿå°±æ”¾å¿ƒäº†ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯è¿™æ ·å“ˆå“ˆã€‚ä¸€å¼€å§‹è¿˜èƒ½çœ‹æ‡‚æ–‡å­—ï¼Œä¹Ÿèƒ½çœ‹æ‡‚ä»£ç ï¼Œåˆ°ç°åœ¨å®Œå…¨å¿½ç•¥ä»£ç åªçœ‹æ–‡å­—éƒ½å¾ˆåƒåŠ›ï¼Œå®Œå…¨é ç¡¬æ’‘ã€‚è¿™ä¸“æ å¤ªç¡¬æ ¸äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566026093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1968013,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/07/8d/3e76560f.jpg","nickname":"ç‹å»ºå³°","note":"","ucode":"8BF1AEFFA7EA5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379200,"discussion_content":"çœ‹ç€å¤´å¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623750574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1817246,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ba/9e/b0d5542d.jpg","nickname":"Geek_6f2a39","note":"","ucode":"EA58EA41164AC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":191920,"discussion_content":"å·²ç»åšå¥½å†çœ‹ä¸€æ¬¡çš„å‡†å¤‡äº†ï¼ŒåŠ æ²¹å…±å‹‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583046319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114462,"user_name":"è¶…è¶…","can_delete":false,"product_type":"c1","uid":1476077,"ip_address":"","ucode":"D0751F29553481","user_header":"https://static001.geekbang.org/account/avatar/00/16/85/ed/905b052f.jpg","comment_is_top":false,"comment_ctime":1563322311,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78872733639","product_id":100024701,"comment_content":"1.ç³»ç»Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹æ‰ä¼šä½¿ç”¨SWAPï¼Ÿ<br><br>å®é™…ä¸Šï¼Œå¹¶ä¸æ˜¯ç­‰æ‰€æœ‰çš„ç‰©ç†å†…å­˜éƒ½æ¶ˆè€—å®Œæ¯•ä¹‹åï¼Œæ‰å»ä½¿ç”¨swapçš„ç©ºé—´ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ˜¯ç”±swappiness å‚æ•°å€¼æ§åˆ¶ã€‚<br>[root@rhce ~]# catÂ &#47;proc&#47;sys&#47;vm&#47;swappiness<br><br>60<br>è¯¥å€¼é»˜è®¤å€¼æ˜¯60.<br><br>swappiness=0çš„æ—¶å€™è¡¨ç¤ºæœ€å¤§é™åº¦ä½¿ç”¨ç‰©ç†å†…å­˜ï¼Œç„¶åæ‰æ˜¯ swapç©ºé—´ï¼Œ<br><br>swappinessï¼100çš„æ—¶å€™è¡¨ç¤ºç§¯æçš„ä½¿ç”¨swapåˆ†åŒºï¼Œå¹¶ä¸”æŠŠå†…å­˜ä¸Šçš„æ•°æ®åŠæ—¶çš„æ¬è¿åˆ°swapç©ºé—´é‡Œé¢ã€‚<br><br>ç°åœ¨æœåŠ¡å™¨çš„å†…å­˜åŠ¨ä¸åŠ¨å°±æ˜¯ä¸Šç™¾Gï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå‚æ•°å€¼è®¾ç½®çš„ä½ä¸€äº›ï¼Œè®©æ“ä½œç³»ç»Ÿå°½å¯èƒ½çš„ä½¿ç”¨ç‰©ç†å†…å­˜ï¼Œé™ä½ç³»ç»Ÿå¯¹swapçš„ä½¿ç”¨ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚<br><br>","like_count":19},{"had_liked":false,"id":96925,"user_name":"é²å‹ƒ","can_delete":false,"product_type":"c1","uid":1142312,"ip_address":"","ucode":"9B5E4A5B1A54E5","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/28/1e307312.jpg","comment_is_top":false,"comment_ctime":1558536304,"is_pvip":false,"replies":[{"id":"49261","content":"å…¶å®å“ªé—¨è¯¾éƒ½ä¸€æ ·å“ˆ","user_name":"ä½œè€…å›å¤","comment_id":96925,"uid":"1001590","ip_address":"","utype":1,"ctime":1567608360,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"65983045744","product_id":100024701,"comment_content":"æœç„¶å’Œä½ çš„ç½‘ç»œè¯¾ç¨‹ä¸€æ ·ï¼Œè¶Šåˆ°åé¢è¶Šholdä¸ä½ğŸ˜‚","like_count":16,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451068,"discussion_content":"å…¶å®å“ªé—¨è¯¾éƒ½ä¸€æ ·å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567608360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114463,"user_name":"è¶…è¶…","can_delete":false,"product_type":"c1","uid":1476077,"ip_address":"","ucode":"D0751F29553481","user_header":"https://static001.geekbang.org/account/avatar/00/16/85/ed/905b052f.jpg","comment_is_top":false,"comment_ctime":1563322380,"is_pvip":false,"replies":[{"id":"46602","content":"å¦‚æ­¤è®¤çœŸï¼Œå…¸èŒƒå•Š","user_name":"ä½œè€…å›å¤","comment_id":114463,"uid":"1001590","ip_address":"","utype":1,"ctime":1566363968,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"57397897228","product_id":100024701,"comment_content":"2. å¦‚ä½•ä¿®æ”¹swappinesså‚æ•°ï¼Ÿ<br><br>--ä¸´æ—¶æ€§ä¿®æ”¹ï¼š<br><br>[root@rhce ~]# sysctl vm.swappiness=10<br><br>vm.swappiness = 10<br><br>[root@rhce ~]# cat &#47;proc&#47;sys&#47;vm&#47;swappiness<br>10<br>è¿™é‡Œæˆ‘ä»¬çš„ä¿®æ”¹å·²ç»ç”Ÿæ•ˆï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬é‡å¯äº†ç³»ç»Ÿï¼Œåˆä¼šå˜æˆ60.<br><br>--æ°¸ä¹…ä¿®æ”¹ï¼š<br>åœ¨&#47;etc&#47;sysctl.conf æ–‡ä»¶é‡Œæ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š<br>vm.swappiness=10<br>æˆ–è€…ï¼š<br>[root@rhce ~]# echo &#39;vm.swappiness=10&#39; &gt;&gt;&#47;etc&#47;sysctl.conf<br><br>ä¿å­˜ï¼Œé‡å¯ï¼Œå°±ç”Ÿæ•ˆäº†ã€‚","like_count":14,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458675,"discussion_content":"å¦‚æ­¤è®¤çœŸï¼Œå…¸èŒƒå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566363968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96648,"user_name":"æ¬ å€ºå¤ªå¤š","can_delete":false,"product_type":"c1","uid":1099238,"ip_address":"","ucode":"B0CC91FA6F3981","user_header":"https://static001.geekbang.org/account/avatar/00/10/c5/e6/50c5b805.jpg","comment_is_top":false,"comment_ctime":1558484130,"is_pvip":true,"replies":[{"id":"49277","content":"é‡ç‚¹å…³æ³¨æµç¨‹ï¼Œä¸å…³æ³¨ç»†èŠ‚","user_name":"ä½œè€…å›å¤","comment_id":96648,"uid":"1001590","ip_address":"","utype":1,"ctime":1567609431,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"57393058978","product_id":100024701,"comment_content":"çœ‹åˆ°ç°åœ¨ï¼Œä»£ç è¶Šæ¥è¶Šå¤šï¼Œå…³äºä»£ç çš„é˜…è¯»éœ€è¦ä¹ˆï¼Ÿæ€ä¹ˆå»åšå‘¢","like_count":14,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450953,"discussion_content":"é‡ç‚¹å…³æ³¨æµç¨‹ï¼Œä¸å…³æ³¨ç»†èŠ‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567609431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1521245,"avatar":"https://static001.geekbang.org/account/avatar/00/17/36/5d/7f16e05b.jpg","nickname":"Gabriel","note":"","ucode":"5E5306B4E3533A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":190704,"discussion_content":"å…ˆçœ‹æ³¨é‡Šã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582972250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96871,"user_name":"æ´»çš„æ½‡æ´’","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1558526306,"is_pvip":false,"replies":[{"id":"49264","content":"èµ","user_name":"ä½œè€…å›å¤","comment_id":96871,"uid":"1001590","ip_address":"","utype":1,"ctime":1567608459,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"44508199266","product_id":100024701,"comment_content":"èŠ±äº†4ä¸ªå¤šå°æ—¶ç»ˆäºæŠŠç¬”è®°åšå®Œ<br>åˆ†äº«ç»™å¤§å®¶ï¼š<br>https:&#47;&#47;www.cnblogs.com&#47;luoahong&#47;p&#47;10907734.html","like_count":11,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451043,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567608459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96601,"user_name":"åˆ˜å¼·","can_delete":false,"product_type":"c1","uid":1035612,"ip_address":"","ucode":"B2E41BB894A727","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/5c/e09eac13.jpg","comment_is_top":false,"comment_ctime":1558457390,"is_pvip":false,"replies":[{"id":"49279","content":"åŠ æ²¹ï¼Œå¤šçœ‹å‡ é","user_name":"ä½œè€…å›å¤","comment_id":96601,"uid":"1001590","ip_address":"","utype":1,"ctime":1567609491,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"40213163054","product_id":100024701,"comment_content":"è¿™å‡ èŠ‚çœ‹èµ·æ¥åƒåŠ›äº†ï¼Œéœ€è¦ç†è§£çš„å¤–å›´çŸ¥è¯†å¾ˆå¤šï¼","like_count":9,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450929,"discussion_content":"åŠ æ²¹ï¼Œå¤šçœ‹å‡ é","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567609491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114469,"user_name":"è¶…è¶…","can_delete":false,"product_type":"c1","uid":1476077,"ip_address":"","ucode":"D0751F29553481","user_header":"https://static001.geekbang.org/account/avatar/00/16/85/ed/905b052f.jpg","comment_is_top":false,"comment_ctime":1563322681,"is_pvip":false,"replies":[{"id":"46601","content":"èµ","user_name":"ä½œè€…å›å¤","comment_id":114469,"uid":"1001590","ip_address":"","utype":1,"ctime":1566363929,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"31628093753","product_id":100024701,"comment_content":"3. å¦‚ä½•æŸ¥çœ‹swapåˆ†åŒº<br>swapon -s<br>cat &#47;proc&#47;swaps<br>free<br>vmstat<br>ä»¥ä¸Š4ç±»å‘½ä»¤éƒ½å¯ä»¥æŸ¥çœ‹swapåˆ†åŒºçš„å¤§å°å’Œä½¿ç”¨æƒ…å†µ","like_count":8,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458677,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566363929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96671,"user_name":"guojiun","can_delete":false,"product_type":"c1","uid":1020017,"ip_address":"","ucode":"FF9FC87C9E4E72","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/71/e961e311.jpg","comment_is_top":false,"comment_ctime":1558486818,"is_pvip":false,"replies":[{"id":"49273","content":"èµ","user_name":"ä½œè€…å›å¤","comment_id":96671,"uid":"1001590","ip_address":"","utype":1,"ctime":1567609171,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"31623257890","product_id":100024701,"comment_content":"https:&#47;&#47;events.static.linuxfound.org&#47;sites&#47;events&#47;files&#47;slides&#47;slaballocators.pdf é€™è£¡æœ‰æ¸…æ¥šçš„è¦–æ„åœ–ï¼Œå°ç…§è‘—çœ‹æœƒæ›´æ¸…æ¥šï¼","like_count":8,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450963,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567609171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223805,"user_name":"sundy","can_delete":false,"product_type":"c1","uid":1724856,"ip_address":"","ucode":"581D4B976524B6","user_header":"https://static001.geekbang.org/account/avatar/00/1a/51/b8/f76b15a1.jpg","comment_is_top":false,"comment_ctime":1591184433,"is_pvip":false,"replies":[{"id":"83006","content":"å…¶å®æ˜¯æœ‰ä¸€ä¸ªæ•´ä½“æ€è·¯çš„ï¼Œè¢«ä»£ç æ‰“æ–­äº†ï¼Œå¯ä»¥è®²ä»£ç æ€»ç»“ä¸€ä¸ªæ®µè½å¤§æ„ï¼Œç„¶åå†ç©¿èµ·æ¥çœ‹ï¼Œæ˜¯ä¸æ˜¯å¥½ä¸€äº›","user_name":"ä½œè€…å›å¤","comment_id":223805,"uid":"1001590","ip_address":"","utype":1,"ctime":1591753071,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"23066020913","product_id":100024701,"comment_content":"çœŸçš„åº”è¯¥å°‘ç²˜ä»£ç  å¤šè®²åŸç†ã€å¤šæŠ½è±¡ï¼Œä¸ç„¶å¾ˆéš¾å°†æ‚¨è®²çš„ä¸œè¥¿ä¸²è”èµ·æ¥ï¼Œè¿åŸºæœ¬åŸç†éƒ½ä¸äº†è§£ç¡¬ç”Ÿç”Ÿçš„è®²ä»£ç å®åœ¨æ˜¯è®©äººå›°æƒ‘","like_count":6,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497246,"discussion_content":"å…¶å®æ˜¯æœ‰ä¸€ä¸ªæ•´ä½“æ€è·¯çš„ï¼Œè¢«ä»£ç æ‰“æ–­äº†ï¼Œå¯ä»¥è®²ä»£ç æ€»ç»“ä¸€ä¸ªæ®µè½å¤§æ„ï¼Œç„¶åå†ç©¿èµ·æ¥çœ‹ï¼Œæ˜¯ä¸æ˜¯å¥½ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591753071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114472,"user_name":"è¶…è¶…","can_delete":false,"product_type":"c1","uid":1476077,"ip_address":"","ucode":"D0751F29553481","user_header":"https://static001.geekbang.org/account/avatar/00/16/85/ed/905b052f.jpg","comment_is_top":false,"comment_ctime":1563322888,"is_pvip":false,"replies":[{"id":"46599","content":"èµ","user_name":"ä½œè€…å›å¤","comment_id":114472,"uid":"1001590","ip_address":"","utype":1,"ctime":1566363922,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"18743192072","product_id":100024701,"comment_content":"å‚è€ƒæ–‡ç« ï¼šhttps:&#47;&#47;mp.weixin.qq.com&#47;s&#47;6JVpke8bDKI9lvh_l6QF-w","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458679,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566363922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279805,"user_name":"ç»¿ç®­ä¾ ","can_delete":false,"product_type":"c1","uid":1528536,"ip_address":"","ucode":"B994F558A98E29","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/d8/123a4981.jpg","comment_is_top":false,"comment_ctime":1613967840,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10203902432","product_id":100024701,"comment_content":"è¿™ä¸ªä¸“æ æœ€å¤§çš„å¥½å¤„å°±æ˜¯èƒ½å°†é‚£äº›ä¸“ä¸šçš„åšçš„ä¹¦ç±çš„å®½æ³›çŸ¥è¯†ç‚¹ä¸²èµ·æ¥ï¼Œèƒ½å¸®åŠ©æ·±å…¥ç†è§£ï¼ï¼ï¼","like_count":2,"discussions":[{"author":{"id":2028554,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK8HE5kCNluviaVjzPSk0YuacxXF6HFV2257c4edGGpnZSCR2e2Z7S9c89ahY6A4WsbtLMhfgeicYeA/132","nickname":"ä¸­åå°å¨ç¥","note":"","ucode":"2C4CB3D6777969","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369966,"discussion_content":"ç²¾é«“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619236162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96963,"user_name":"chengzise","can_delete":false,"product_type":"c1","uid":1006070,"ip_address":"","ucode":"1C27D216359894","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/f6/ed66d1c1.jpg","comment_is_top":false,"comment_ctime":1558567433,"is_pvip":false,"replies":[{"id":"34859","content":"æ˜¯çš„ï¼Œä¼šæ˜ å°„æˆä¸ºè™šæ‹Ÿåœ°å€ï¼Œæ˜¯æ•´é¡µä¼šæœ‰è™šæ‹Ÿåœ°å€","user_name":"ä½œè€…å›å¤","comment_id":96963,"uid":"1001590","ip_address":"","utype":1,"ctime":1558680975,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"10148502025","product_id":100024701,"comment_content":"è€å¸ˆå¥½ï¼Œè¿™ä¸¤èŠ‚è®²çš„æ˜¯ç‰©ç†å†…å­˜çš„ç®¡ç†å’Œåˆ†é…ï¼Œå¤§æ¦‚é€»è¾‘æ˜¯çœ‹çš„æ‡‚çš„ï¼Œç»†èŠ‚éœ€è¦ç»§ç»­åå¤ç ”è¯»æ‰è¡Œã€‚å…¶ä¸­æœ‰ä¸ªé—®é¢˜ï¼Œkmem_cacheéƒ¨åˆ†å·²ç»å±äºé¡µå†…å°å†…å­˜åˆ†é…ï¼Œè¿™ä¸ªåˆ†é…ç®—æ³•å±äºè™šæ‹Ÿå†…å­˜åˆ†é…ï¼Œä¸ç®—ç‰©ç†å†…å­˜ç®¡ç†èŒƒç•´å§ï¼Ÿ å°±æ˜¯è¯´å…ˆåˆ†é…ç‰©ç†å†…å­˜é¡µï¼Œæ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œå†åœ¨è¿™ä¸ªè™šæ‹Ÿå†…å­˜åˆ†é…å°å†…å­˜ç»™ç¨‹åºé€»è¾‘ä½¿ç”¨ã€‚å¸Œæœ›è€å¸ˆè§£ç­”ä¸€ä¸‹ã€‚","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451081,"discussion_content":"æ˜¯çš„ï¼Œä¼šæ˜ å°„æˆä¸ºè™šæ‹Ÿåœ°å€ï¼Œæ˜¯æ•´é¡µä¼šæœ‰è™šæ‹Ÿåœ°å€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558680975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281640,"user_name":"å¾å°‘æ–‡","can_delete":false,"product_type":"c1","uid":1670331,"ip_address":"","ucode":"8E35B10DA44EE3","user_header":"https://static001.geekbang.org/account/avatar/00/19/7c/bb/635a2710.jpg","comment_is_top":false,"comment_ctime":1614837797,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5909805093","product_id":100024701,"comment_content":"çœ‹åˆ°è¿™é‡Œéå¸¸æœ‰ä¸€ç§çœ‹Windowså†…æ ¸åŸç†ä¸å®ç°çš„æ„Ÿå—äº†ï¼Œå°±æ˜¯æ„Ÿè§‰ç»å¸¸æ‘†å‡ºä¸€å¤§å †æ•°æ®ç»“æ„ï¼Œçœ‹çš„å¤ªç—›è‹¦äº†ã€‚æ‰“ç®—è®°å¥½ç¬”è®°ç„¶åæ¯å¤©æ‰“å¼€çœ‹ä¸€çœ‹ã€‚","like_count":1},{"had_liked":false,"id":237183,"user_name":"Spring","can_delete":false,"product_type":"c1","uid":1222211,"ip_address":"","ucode":"8175463FB4705B","user_header":"https://static001.geekbang.org/account/avatar/00/12/a6/43/cb6ab349.jpg","comment_is_top":false,"comment_ctime":1595731179,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5890698475","product_id":100024701,"comment_content":"æœ‰äº†å¿«é€Ÿé€šé“ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦æ™®é€šé€šé“ï¼Œè¿™ä¸€ç‚¹æä¸æ˜ç™½","like_count":1,"discussions":[{"author":{"id":1000550,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/66/95976d10.jpg","nickname":"ä¸€è·¯å‘å‰","note":"","ucode":"853B90DF308425","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298380,"discussion_content":"å¿«é€Ÿé€šé“æ˜¯cahe_cpuï¼Œæ¯”æ™®é€šé€šé“ä»£ä»·æ›´å¤§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597284188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224337,"user_name":"stevensafin","can_delete":false,"product_type":"c1","uid":1053553,"ip_address":"","ucode":"CC692A740C5FD5","user_header":"https://static001.geekbang.org/account/avatar/00/10/13/71/3762b089.jpg","comment_is_top":false,"comment_ctime":1591347592,"is_pvip":false,"replies":[{"id":"83003","content":"å…¶å®é€šè¿‡é‡Œé¢çš„å›¾ï¼ŒåŸºæœ¬èƒ½å¤Ÿç†è§£æ•´ä¸ªæµç¨‹ã€‚å¤§æ¦‚çš„æ€æƒ³å’Œå’±ä»¬é€šè¿‡å¤šçº§ç¼“å­˜åŠ é€Ÿæ•°æ®åº“è®¿é—®å·®ä¸å¤šï¼Œä¸€çº§æ‰¾ä¸åˆ°æ‰¾äºŒçº§ï¼ŒäºŒçº§æ‰¾ä¸åˆ°æ‰¾æ•°æ®åº“ã€‚","user_name":"ä½œè€…å›å¤","comment_id":224337,"uid":"1001590","ip_address":"","utype":1,"ctime":1591752935,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5886314888","product_id":100024701,"comment_content":"å¯¹äºslabåˆ†é…å†…å­˜çš„æœºåˆ¶ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç”¨ä¸ªæµç¨‹å›¾æ¥è¡¨ç¤ºä¼šæ›´å¥½ä¸€ç‚¹ï¼Ÿè¿˜æœ‰å°±æ˜¯å¿«æ…¢é€šé“çš„é€Ÿåº¦å·®è·å’Œå…·ä½“è®¾è®¡åŸå› èƒ½ä¸èƒ½è¯´æ˜ä¸€ä¸‹ï¼Œæ„Ÿè°¢è€å¸ˆ","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497446,"discussion_content":"å…¶å®é€šè¿‡é‡Œé¢çš„å›¾ï¼ŒåŸºæœ¬èƒ½å¤Ÿç†è§£æ•´ä¸ªæµç¨‹ã€‚å¤§æ¦‚çš„æ€æƒ³å’Œå’±ä»¬é€šè¿‡å¤šçº§ç¼“å­˜åŠ é€Ÿæ•°æ®åº“è®¿é—®å·®ä¸å¤šï¼Œä¸€çº§æ‰¾ä¸åˆ°æ‰¾äºŒçº§ï¼ŒäºŒçº§æ‰¾ä¸åˆ°æ‰¾æ•°æ®åº“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591752935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129254,"user_name":"å¥”è·‘çš„ç ä»”","can_delete":false,"product_type":"c1","uid":1609871,"ip_address":"","ucode":"AB3B02B07B8B8C","user_header":"https://static001.geekbang.org/account/avatar/00/18/90/8f/9c691a5f.jpg","comment_is_top":false,"comment_ctime":1567071392,"is_pvip":false,"replies":[{"id":"48746","content":"ä¸€ä¸ªå†…å­˜å—çš„slubå…¨éƒ¨é‡Šæ”¾ä¹‹åï¼Œæ•´ä¸ªé¡µéƒ½ä¼šå›æ”¶","user_name":"ä½œè€…å›å¤","comment_id":129254,"uid":"1001590","ip_address":"","utype":1,"ctime":1567493393,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5862038688","product_id":100024701,"comment_content":"è€å¸ˆï¼Œslubå­˜åœ¨å›æ”¶æœºåˆ¶å§ï¼Ÿå°±æ˜¯slubä¸­ç©ºé—²å¾ˆå¤šçš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯ä¼šè¿™äº›å†…å­˜å—é‡Šæ”¾ï¼Œè¿”å›ç»™ç³»ç»Ÿå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465362,"discussion_content":"ä¸€ä¸ªå†…å­˜å—çš„slubå…¨éƒ¨é‡Šæ”¾ä¹‹åï¼Œæ•´ä¸ªé¡µéƒ½ä¼šå›æ”¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567493393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129239,"user_name":"å¥”è·‘çš„ç ä»”","can_delete":false,"product_type":"c1","uid":1609871,"ip_address":"","ucode":"AB3B02B07B8B8C","user_header":"https://static001.geekbang.org/account/avatar/00/18/90/8f/9c691a5f.jpg","comment_is_top":false,"comment_ctime":1567069169,"is_pvip":false,"replies":[{"id":"48748","content":"ä¸æ˜¯åŒä¸€å—çš„ã€‚å¤‡ç”¨åˆ—è¡¨ï¼Œå½“ page æ»¡äº†ï¼Œå°±ä¼šä»è¿™é‡Œæ‰¾<br>","user_name":"ä½œè€…å›å¤","comment_id":129239,"uid":"1001590","ip_address":"","utype":1,"ctime":1567493634,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5862036465","product_id":100024701,"comment_content":"è€å¸ˆï¼Œkmem_cache_cpuä¸­çš„pageå’Œpartialä¸æ˜¯æŒ‡å‘åŒä¸€å—å†…å­˜åŒºåŸŸçš„å§ï¼Œä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆè®¾è®¡å‘¢ï¼Ÿpartialçš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465351,"discussion_content":"ä¸æ˜¯åŒä¸€å—çš„ã€‚å¤‡ç”¨åˆ—è¡¨ï¼Œå½“ page æ»¡äº†ï¼Œå°±ä¼šä»è¿™é‡Œæ‰¾\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567493634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112532,"user_name":"æ— å’","can_delete":false,"product_type":"c1","uid":1479120,"ip_address":"","ucode":"B9759B5646F3AB","user_header":"https://static001.geekbang.org/account/avatar/00/16/91/d0/35bc62b1.jpg","comment_is_top":false,"comment_ctime":1562752977,"is_pvip":true,"replies":[{"id":"46715","content":"å¯¹æ¯ä¸ªNUMAç»“ç‚¹æ¥è¯´ï¼Œéƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„kswapdå®ˆæŠ¤è¿›ç¨‹","user_name":"ä½œè€…å›å¤","comment_id":112532,"uid":"1001590","ip_address":"","utype":1,"ctime":1566385924,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5857720273","product_id":100024701,"comment_content":"kswapd åœ¨å†…å­˜ç´§å¼ çš„æ—¶å€™ï¼Œå¼€å§‹å·¥ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªç´§å¼ çš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ€»çš„ç‰©ç†å†…å­˜è¿˜æ˜¯æŒ‰ç…§ zone æ¥åŒºåˆ†å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457783,"discussion_content":"å¯¹æ¯ä¸ªNUMAç»“ç‚¹æ¥è¯´ï¼Œéƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„kswapdå®ˆæŠ¤è¿›ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566385924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98145,"user_name":"å‘¨å¹³","can_delete":false,"product_type":"c1","uid":1047936,"ip_address":"","ucode":"CA1869B139A4F6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/80/52763d62.jpg","comment_is_top":false,"comment_ctime":1558920758,"is_pvip":false,"replies":[{"id":"35389","content":"ç‰©ç†å†…å­˜åˆ†é…å®Œæ¯•ä¸€æ•´é¡µçš„æ—¶å€™ï¼Œä¼šé€šè¿‡page_addressåˆ†é…ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œå°å—éƒ½æ˜¯åŸºäºè¿™ä¸ªè™šæ‹Ÿåœ°å€çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":98145,"uid":"1001590","ip_address":"","utype":1,"ctime":1559100856,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5853888054","product_id":100024701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘é—®ï¼Œè¿™äº›å†…å­˜å°å—çš„åˆ†é…åŠé‡Šæ”¾ï¼Œéƒ½æ˜¯åœ¨ç‰©ç†å†…å­˜ä¸­å®Œæˆçš„å‘¢ï¼Œè¿˜æ˜¯åœ¨è™šæ‹Ÿå†…å­˜ä¸­å®Œæˆå†æ˜ å°„å¯¹å¯¹åº”çš„ç‰©ç†å†…å­˜å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451576,"discussion_content":"ç‰©ç†å†…å­˜åˆ†é…å®Œæ¯•ä¸€æ•´é¡µçš„æ—¶å€™ï¼Œä¼šé€šè¿‡page_addressåˆ†é…ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œå°å—éƒ½æ˜¯åŸºäºè¿™ä¸ªè™šæ‹Ÿåœ°å€çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559100856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96957,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1558564079,"is_pvip":false,"replies":[{"id":"49259","content":"å¯¹çš„å¯¹çš„ï¼Œå¯ä»¥è®²å¥½ä¹…å‘¢","user_name":"ä½œè€…å›å¤","comment_id":96957,"uid":"1001590","ip_address":"","utype":1,"ctime":1567608236,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5853531375","product_id":100024701,"comment_content":"slabåˆ†é…å™¨å†…å®¹å¾ˆå¤šï¼Œè¿™æ ·è®²ä¸€è®²å¤§ä½“æ¡†æ¶ä¹Ÿä¸é”™ï¼Œè¦ä¸ç„¶å°±æ›´çœ‹ä¸æ‡‚äº†","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451079,"discussion_content":"å¯¹çš„å¯¹çš„ï¼Œå¯ä»¥è®²å¥½ä¹…å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567608236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334107,"user_name":"èµµå†›æ—","can_delete":false,"product_type":"c1","uid":1098601,"ip_address":"","ucode":"226A9E7582F24E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/69/7353dd4c.jpg","comment_is_top":false,"comment_ctime":1644747519,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644747519","product_id":100024701,"comment_content":"è€å¸ˆï¼Œslubåˆ†é…çš„éƒ½æ˜¯æ•°æ®ç»“æ„å›ºå®šçš„å¯¹è±¡ï¼Œå¦‚task_structã€mm_structï¼Œå¦‚æœç¨‹åºä¸­æœ‰å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„å¤§å°å›ºå®šï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆåˆ†é…çš„å‘¢","like_count":0},{"had_liked":false,"id":321463,"user_name":"Jia Tiancai","can_delete":false,"product_type":"c1","uid":2548102,"ip_address":"","ucode":"EF2F5FE8A0DF3E","user_header":"","comment_is_top":false,"comment_ctime":1636885870,"is_pvip":false,"discussion_count":0,"race_medal":3,"score":"1636885870","product_id":100024701,"comment_content":"kmem_cache_cpu å’Œ kmem_cache_nodeï¼Œå®ƒä»¬éƒ½æ˜¯æ¯ä¸ª NUMA èŠ‚ç‚¹ä¸Šæœ‰ä¸€ä¸ªã€‚<br>éº»çƒ¦è€å¸ˆå¸®å¿™è§£ç­”ä¸€ä¸‹ç–‘é—®ï¼Œkmem_cacheä¸åŒçš„objectéƒ½ä¼šåˆ›å»ºå¯¹åº”çš„kmem_cacheï¼Œä¸ºä»€ä¹ˆæ¯ä¸ªNVMAèŠ‚ç‚¹ä¸Šåªæœ‰ä¸€ä¸ªå‘¢ï¼Ÿå•ä¸ªNVMAèŠ‚ç‚¹ä¸Šä¼šå­˜åœ¨å¤šä¸ªkmem_cache_cpu å’Œ kmem_cache_nodeå§!","like_count":0},{"had_liked":false,"id":306538,"user_name":"å°æ–¹","can_delete":false,"product_type":"c1","uid":1480022,"ip_address":"","ucode":"CB2970313E2489","user_header":"https://static001.geekbang.org/account/avatar/00/16/95/56/116c25d5.jpg","comment_is_top":false,"comment_ctime":1628601457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628601457","product_id":100024701,"comment_content":"æ‚¨å¥½ï¼Œé—®ä¸ªä»£ç å®ç°çš„é—®é¢˜ï¼Œkmem cache cpué‡Œé¢çš„å˜é‡freelistä¸ºå•¥å®šä¹‰ä¸ºäºŒé‡æŒ‡é’ˆï¼Œæ³¨é‡Šé‡Œé¢å†™çš„æ˜¯æŒ‡å‘å¯ç”¨çš„objectï¼Œåœ¨å¿«é€Ÿåˆ†é…é€šé“é‡Œé¢ï¼Œç›´æ¥å°±è¿”å›freelistäº†ï¼Œæ‰€ä»¥ä½ è¯´çš„é‚£ä¸ªé“¾è¡¨å›¾æ˜¯ä¸æ˜¯æœ‰ç‚¹å°é—®é¢˜ï¼Œä¸‹ä¸ªç©ºé—²å¯¹è±¡çš„æŒ‡é’ˆæ˜¯ä¸æ˜¯è¦æŒ‡å‘objectï¼Œè€Œä¸æ˜¯æŒ‡å‘ä¸‹ä¸ªç©ºé—²å¯¹è±¡æŒ‡é’ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":276088,"user_name":"åš","can_delete":false,"product_type":"c1","uid":2019536,"ip_address":"","ucode":"C02AB1CDE39D1A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d0/d0/a6c6069d.jpg","comment_is_top":false,"comment_ctime":1611792474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611792474","product_id":100024701,"comment_content":"æœ‰ç‚¹ä¸æ‡‚å¿«é€Ÿé€šé“å’Œæ™®é€šé€šé“é‡Œé¢çš„partitalçš„åŒºåˆ«ï¼Œè¿˜æœ‰å°±æ˜¯è¿›ç¨‹é”€æ¯åç¼“å­˜æ˜¯æ”¾å›å“ªé‡Œä¸å¤ªæ‡‚ã€‚","like_count":0},{"had_liked":false,"id":266619,"user_name":"--","can_delete":false,"product_type":"c1","uid":1075167,"ip_address":"","ucode":"A262E3991E69DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/67/df/8b85d0d9.jpg","comment_is_top":false,"comment_ctime":1607418191,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607418191","product_id":100024701,"comment_content":"slabå¯¹è±¡å¦‚æœå¤§äºä¸€ä¸ªé¡µçš„å¤§å°ï¼Œé‚£ä¹ˆslabæ˜¯å¦ä¹Ÿä»ç„¶ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Ÿå¦‚æœå¯¹è±¡çš„å¤§å°æ˜¯4kB+1Byteï¼Œé‚£ä¹ˆå¤§çš„å†…å­˜å—æ˜¯2*4kBï¼Œè¿™æ ·å…¶å®æ¯æ¬¡åˆ†é…ä¸€ä¸ªå¯¹è±¡ä¹‹åä»ç„¶æœ‰å¤§é‡å†…å­˜æ˜¯æœªä½¿ç”¨çš„ã€‚æˆ‘çš„ç†è§£æ­£ç¡®å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":241398,"user_name":"ä¸€è·¯å‘å‰","can_delete":false,"product_type":"c1","uid":1000550,"ip_address":"","ucode":"853B90DF308425","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/66/95976d10.jpg","comment_is_top":false,"comment_ctime":1597284446,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597284446","product_id":100024701,"comment_content":"è™šæ‹Ÿå†…å­˜æ˜¯é€šè¿‡å†…å­˜é¡µæ¥è®¿é—®ç‰©ç†å†…å­˜çš„ï¼Œç³»ç»Ÿä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¸æ–­åˆ†é…+é¢‘ç¹æ¢å…¥æ¢å‡ºé¡µï¼Œä¼šä¸ä¼šé€ æˆé¡µè¡¨ä¸è¿ç»­ï¼Œä¸çŸ¥é“ä¼šä¸ä¼šæ•´ç†é¡µè¡¨å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":236257,"user_name":"xuanyuan","can_delete":false,"product_type":"c1","uid":1113737,"ip_address":"","ucode":"1EC79B9372868F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI2icbib62icXtibTkThtyRksbuJLoTLMts7zook2S30MiaBtbz0f5JskwYicwqXkhpYfvCpuYkcvPTibEaQ/132","comment_is_top":false,"comment_ctime":1595379505,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595379505","product_id":100024701,"comment_content":"è®²çš„å¾ˆå¥½ï¼Œæ˜¯çœ‹æºç ç‰¹åˆ«å¥½çš„æŒ‡å¯¼æ–‡æ¡£ã€‚å¾ˆå¤šäººåé¦ˆçœ‹ä¸æ‡‚ï¼Œä¸»è¦æ˜¯è¿™é—¨è¯¾ä¸é€‚åˆï¼Œè€Œä¸æ˜¯è¯¾ç¨‹ä¸å¥½ã€‚å¯¹ç…§æºç æŒ‰ç…§è€å¸ˆçš„ç‹¬ç«‹èµ°ä¸€éå°±å¯ä»¥ç†Ÿæ‚‰linuxå†…å­˜ç®¡ç†çš„æ ¸å¿ƒäº†ã€‚","like_count":0},{"had_liked":false,"id":223223,"user_name":"å—ç“œ","can_delete":false,"product_type":"c1","uid":1079562,"ip_address":"","ucode":"53561F551857A4","user_header":"https://static001.geekbang.org/account/avatar/00/10/79/0a/a417ec1c.jpg","comment_is_top":false,"comment_ctime":1591023319,"is_pvip":false,"replies":[{"id":"83008","content":"æ¯ä¸€èŠ‚çš„æ€»ç»“ï¼Œéƒ½æœ‰ä¸ªå›¾å’Œæµç¨‹ï¼Œè¶³å¤Ÿåˆ°è¾¾äº†è§£çš„ç¨‹åº¦äº†","user_name":"ä½œè€…å›å¤","comment_id":223223,"uid":"1001590","ip_address":"","utype":1,"ctime":1591753180,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1591023319","product_id":100024701,"comment_content":"è¿‡äºè´´è¿‘äºæœºå™¨å®ç°ç»†èŠ‚ï¼Œé™¤éå¾ˆç†Ÿã€æˆ–è€…ä¸€ç•ªæ—¶é—´ã€ç²¾åŠ›è‹¦åŠŸå¤«ï¼Œå¦åˆ™ä¸å¾—è¦é¢†ï¼Œè‰è‰æ è¿‡ï¼›<br><br>å³åˆ»æ—¶é—´å¸¦ç»™çš„ï¼Œæˆ‘æƒ³æ›´å¤šæ˜¯å¿«é€Ÿçš„çŸ¥è¯†äº†è§£ã€‚æœ¬æ–‡è¿™ç‚¹ç»†èŠ‚è¿‡äºåå‘ç»†èŠ‚æè¿°ï¼Œéš¾ä»¥è¾¾åˆ°å¿«é€Ÿäº†è§£ç¨‹åº¦","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497062,"discussion_content":"æ¯ä¸€èŠ‚çš„æ€»ç»“ï¼Œéƒ½æœ‰ä¸ªå›¾å’Œæµç¨‹ï¼Œè¶³å¤Ÿåˆ°è¾¾äº†è§£çš„ç¨‹åº¦äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591753180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204492,"user_name":"çš®çš®ä¾ ","can_delete":false,"product_type":"c1","uid":1258402,"ip_address":"","ucode":"04205990C1DE1F","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/a2/6c0ffc15.jpg","comment_is_top":false,"comment_ctime":1586407472,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586407472","product_id":100024701,"comment_content":"è€å¸ˆï¼Œkmem_cache_cpuä¸­çš„pageå’Œpartialæ˜¯æŒ‡å‘åŒä¸€å—å†…å­˜åŒºåŸŸä¹ˆï¼Ÿæ—¢ç„¶pageåˆ—è¡¨é‡Œæ²¡æœ‰äº†ï¼Œpartialè¿˜æœ‰ä¹ˆï¼Œè¿˜éœ€è¦åˆ°partialé‡Œå†æ‰¾ä¸€ä¸‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":184760,"user_name":"å¤©ç«ºè‘µæŸ æª¬æ©™èŠ±æŸš","can_delete":false,"product_type":"c1","uid":1545971,"ip_address":"","ucode":"0F3620FABAEECB","user_header":"https://static001.geekbang.org/account/avatar/00/17/96/f3/b06a899c.jpg","comment_is_top":false,"comment_ctime":1583397117,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583397117","product_id":100024701,"comment_content":"è®²çš„çœŸå¥½ï¼Œä¸ç„¶å…‰è‡ªå·±çœ‹æ·±å…¥ç†è§£linuxå†…æ ¸é‚£æœ¬ä¹¦å†…å­˜ç®¡ç†ç« èŠ‚ï¼Œä¹Ÿæ— æ³•æŠŠæµç¨‹æ¢³ç†çš„é‚£ä¹ˆæ¸…æ¥šï¼Œè€å¸ˆè¿™ä¸¤ç« æœ‰å›¾æœ‰æ–‡æœ‰ä»£ç ï¼Œçœ‹äº†ä¸¤å¤©ä¹Ÿèƒ½åšåˆ°ç†è§£å¤§ä½“æ¡†æ¶å’Œå…³é”®ç»“æ„ï¼Œå†æ•´ç†ç¬”è®°æ—¶ä¸æ—¶å¤ä¹ ä¸‹ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚","like_count":0},{"had_liked":false,"id":160948,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1576067982,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576067982","product_id":100024701,"comment_content":"kmem_cacheåº”è¯¥æ˜¯ç§é«˜é€Ÿç¼“å­˜ï¼Œç”¨æ¥è§£å†³å¯¹è±¡é¢‘ç¹åˆ†é…å’Œé‡Šæ”¾çš„é—®é¢˜ï¼Œå…¶å®å°±æ˜¯ç›´æ¥æŠŠä¸ç”¨çš„å¯¹è±¡åœ¨æ”¾å›é“¾è¡¨é‡Œï¼Œè€Œä¸æ˜¯é‡Šæ”¾å¯¹è±¡çš„å†…å­˜","like_count":0},{"had_liked":false,"id":116615,"user_name":"æ ‹èƒ½","can_delete":false,"product_type":"c1","uid":1006849,"ip_address":"","ucode":"8BD9C939D3E8E1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/01/9cd84003.jpg","comment_is_top":false,"comment_ctime":1563882027,"is_pvip":false,"replies":[{"id":"46426","content":"è¿™é‡Œçš„æ„æ€æ˜¯æ¯ä¸ªNUMAèŠ‚ç‚¹ï¼Œè‡ªå·±æ¢å‡ºè‡ªå·±çš„ï¼Œä¸æ˜¯å°†æ•´ä¸ªNUMAèŠ‚ç‚¹éƒ½æ¢å‡º","user_name":"ä½œè€…å›å¤","comment_id":116615,"uid":"1001590","ip_address":"","utype":1,"ctime":1566299952,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1563882027","product_id":100024701,"comment_content":"æˆ‘æƒ³çŸ¥é“æ–‡ä¸­ â€œå¯¹äºç¼“å­˜æ¥è®²ï¼Œå…¶å®å°±æ˜¯åˆ†é…äº†è¿ç»­å‡ é¡µçš„å¤§å†…å­˜å—ï¼Œç„¶åæ ¹æ®ç¼“å­˜å¯¹è±¡å¤§å°ï¼Œåˆ‡æˆå°å†…å­˜å—â€ ä¸­ï¼Œå°å†…å­˜å—å’Œé¡µå¤§å°æ˜¯æ€ä¹ˆä¸ªå…³ç³»ï¼ŸæŒ‰æˆ‘çš„ç†è§£å°å†…å­˜å—å°±æ˜¯task_structå¯¹è±¡å¤§å°ï¼Œä¸€ä¸ªé¡µä¸­æœ‰å¾ˆå¤šã€‚è€Œkmem_cache_cpuä¸­å¯¹äºä¸­freelistæ˜¯å¤§å†…å­˜å—ä¸­çš„é¡¹ï¼Œè¿™ä¸ªè¿™ä¸ªé¡¹å’Œå°å†…å­˜å—æˆ–task_structæœ‰ä¸ªä»€ä¹ˆå…³ç³»ï¼Ÿæ˜¯å¤§å°ä¸€æ ·å‘¢ï¼Œè¿˜æ˜¯æ€ä¸ªå…³ç³»ï¼Ÿè¿˜æœ‰æœ€åè®²é¡µé¢æ¢å‡ºå•ä½æ˜¯å†…å­˜èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹ä¸å¯èƒ½æ˜¯æ•´ä¸ªNUMAèŠ‚å§ï¼Œæ˜¯æŒ‡å•¥æˆ‘æ²¡çœ‹æ˜ç™½","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459611,"discussion_content":"è¿™é‡Œçš„æ„æ€æ˜¯æ¯ä¸ªNUMAèŠ‚ç‚¹ï¼Œè‡ªå·±æ¢å‡ºè‡ªå·±çš„ï¼Œä¸æ˜¯å°†æ•´ä¸ªNUMAèŠ‚ç‚¹éƒ½æ¢å‡º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566299952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105732,"user_name":"skye","can_delete":false,"product_type":"c1","uid":1027840,"ip_address":"","ucode":"C55C9F52C78A00","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","comment_is_top":false,"comment_ctime":1561079424,"is_pvip":false,"replies":[{"id":"48887","content":"mmap","user_name":"ä½œè€…å›å¤","comment_id":105732,"uid":"1001590","ip_address":"","utype":1,"ctime":1567504525,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1561079424","product_id":100024701,"comment_content":"è€å¸ˆèƒ½è®²è®²å¤§å—å†…å­˜çš„åˆ†é…å—","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454791,"discussion_content":"mmap","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567504525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102924,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1560329539,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560329539","product_id":100024701,"comment_content":"æŸ¥çœ‹åˆ†åŒºæƒ…å†µï¼š&#47;proc&#47;swaps","like_count":0},{"had_liked":false,"id":99250,"user_name":"zhj","can_delete":false,"product_type":"c1","uid":1311772,"ip_address":"","ucode":"65B9E222D6E075","user_header":"https://static001.geekbang.org/account/avatar/00/14/04/1c/b0c6c009.jpg","comment_is_top":false,"comment_ctime":1559182315,"is_pvip":false,"replies":[{"id":"49235","content":"åœ¨é¡µè¡¨åšäº†æ ‡è®°ï¼Œè¯´æ˜å·²ç»æ¢å‡ºäº†","user_name":"ä½œè€…å›å¤","comment_id":99250,"uid":"1001590","ip_address":"","utype":1,"ctime":1567604966,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1559182315","product_id":100024701,"comment_content":"éº»çƒ¦é—®ä¸‹ï¼Œæ¢å‡ºä¸æ´»è·ƒç‰©ç†é¡µçš„æ—¶å€™ï¼Œå¯¹äºåŸæ¥è¿›ç¨‹Aæ˜¯æ— æ„ŸçŸ¥çš„ï¼ŒAä¸­çš„é¡µè¡¨ä¿å­˜äº†è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„ï¼Œåœ¨Aè§†è§’çœ‹æ¥è¿˜æ˜¯åŸæ¥å¤§å°çš„å†…å­˜ï¼Œä½†å½“Aéœ€è¦è®¿é—®è¿™ä¸ªä¸æ´»è·ƒçš„é¡µæ—¶ï¼Œè¿™ä¸ªæ˜ å°„å…³ç³»å·²ç»ä¸æˆç«‹ï¼Œæ‰€ä»¥æˆ‘çš„é—®é¢˜å°±æ˜¯å½“æ¢å‡ºå‘ç”Ÿçš„æ—¶å€™ï¼Œå¯¹Açš„é¡µè¡¨æ˜¯è¿›è¡Œäº†ä»€ä¹ˆç‰¹æ®Šå¤„ç†ï¼Œæœ›è€å¸ˆç­”ç–‘ä¸‹","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452036,"discussion_content":"åœ¨é¡µè¡¨åšäº†æ ‡è®°ï¼Œè¯´æ˜å·²ç»æ¢å‡ºäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567604966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98620,"user_name":"å·äº‘","can_delete":false,"product_type":"c1","uid":1265438,"ip_address":"","ucode":"3D56399A7C5BDF","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/1e/e2b7a9ba.jpg","comment_is_top":false,"comment_ctime":1559043407,"is_pvip":false,"replies":[{"id":"35370","content":"è°¢è°¢ï¼Œè¿™é—¨è¯¾ä¸»è¦å¼ºè°ƒæµç¨‹ï¼Œä»£ç æ˜¯ä¸ªå°è¯ï¼Œä¸é€‚åˆä½œä¸ºç‰¹åˆ«ä¸¥è‚ƒçš„ä»£ç åˆ†æä¹¦ç±çœ‹ï¼Œä¸ºäº†çªå‡ºå†…æ ¸å·¥ä½œæœºåˆ¶å’Œæµç¨‹ï¼Œåˆ é™¤å’Œçœç•¥äº†å¾ˆå¤šå†…æ ¸ä»£ç ","user_name":"ä½œè€…å›å¤","comment_id":98620,"uid":"1001590","ip_address":"","utype":1,"ctime":1559099968,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1559043407","product_id":100024701,"comment_content":"è®²å¾—çœŸå¥½ï¼Œæ·±å…¥åˆ°ä»£ç å±‚é¢ï¼Œå¦åˆ™è¦æ˜¯è‡ªå·±ç ”ç©¶å¤ªå›°éš¾äº†ï¼Œä¸è¿‡ä¹Ÿç¡®å®éœ€è¦ä¸€å®šçš„LinuxåŸºç¡€ï¼Œæ ¹æ®è€å¸ˆçš„è®²è§£å†å»çœ‹ä¸‹linuxå†…æ ¸çš„ä¹¦ç±ï¼Œä¼šæå‡çš„æ›´å¿«çš„","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451757,"discussion_content":"è°¢è°¢ï¼Œè¿™é—¨è¯¾ä¸»è¦å¼ºè°ƒæµç¨‹ï¼Œä»£ç æ˜¯ä¸ªå°è¯ï¼Œä¸é€‚åˆä½œä¸ºç‰¹åˆ«ä¸¥è‚ƒçš„ä»£ç åˆ†æä¹¦ç±çœ‹ï¼Œä¸ºäº†çªå‡ºå†…æ ¸å·¥ä½œæœºåˆ¶å’Œæµç¨‹ï¼Œåˆ é™¤å’Œçœç•¥äº†å¾ˆå¤šå†…æ ¸ä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559099968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96669,"user_name":"é‡‘å­è‡å‡‰çš„é“ç²‰å°é€—","can_delete":false,"product_type":"c1","uid":1000602,"ip_address":"","ucode":"6A2C601F6EEBB5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/9a/c03bea17.jpg","comment_is_top":false,"comment_ctime":1558486691,"is_pvip":false,"replies":[{"id":"49274","content":"ä¸èƒ½å§","user_name":"ä½œè€…å›å¤","comment_id":96669,"uid":"1001590","ip_address":"","utype":1,"ctime":1567609386,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1558486691","product_id":100024701,"comment_content":"æ€ä¹ˆè‡ªå®šä¹‰é¡µé¢æ¢å‡ºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450962,"discussion_content":"ä¸èƒ½å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567609386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}