{"id":98987,"title":"05 | [è§†é¢‘]opmé¡¹ç›®å¯¼è¯»","content":"<p><video poster=\"https://static001.geekbang.org/resource/image/b8/a2/b8e479499551550984792f338043a8a2.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/fe4a99b62946f2c31c2095c167b26f9c/32bb5df8-16d13f123cf-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\"https://media001.geekbang.org/71f11392644a4bd19a04901804f3faa2/b54cb30cb2b648d1a3e6392ecc351626-e6d62449b88ad07255d04f874d679181-sd.m3u8\" type=\"application/x-mpegURL\"><source src=\"https://media001.geekbang.org/71f11392644a4bd19a04901804f3faa2/b54cb30cb2b648d1a3e6392ecc351626-32e46e96bebe336fa79a9419934ca38a-hd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ¸©é“­ã€‚</p><p>ä»Šå¤©çš„å†…å®¹ï¼Œæˆ‘ç‰¹æ„å®‰æ’æˆäº†è§†é¢‘çš„å½¢å¼æ¥è®²è§£ã€‚ä¸è¿‡ï¼Œåœ¨ä½ çœ‹è§†é¢‘ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆé—®ä½ è¿™ä¹ˆå‡ ä¸ªé—®é¢˜ï¼š</p><ul>\n<li>åœ¨çœŸå®çš„é¡¹ç›®ä¸­ï¼Œä½ ä¼šé…ç½® nginx.confï¼Œä»¥ä¾¿å’Œ Lua ä»£ç è”åŠ¨å—ï¼Ÿ</li>\n<li>ä½ æ¸…æ¥š OpenResty çš„ä»£ç ç»“æ„è¯¥å¦‚ä½•ç»„ç»‡å—ï¼Ÿ</li>\n</ul><p>è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯ä»Šå¤©è§†é¢‘è¯¾è¦è§£å†³çš„æ ¸å¿ƒå†…å®¹ï¼Œå¸Œæœ›ä½ å¯ä»¥å…ˆè‡ªå·±æ€è€ƒä¸€ä¸‹ï¼Œå¹¶å¸¦ç€é—®é¢˜æ¥å­¦ä¹ ä»Šå¤©çš„è§†é¢‘å†…å®¹ã€‚</p><p>åŒæ—¶ï¼Œæˆ‘ä¼šç»™å‡ºç›¸åº”çš„æ–‡å­—ä»‹ç»ï¼Œæ–¹ä¾¿ä½ åœ¨å¬å®Œè§†é¢‘å†…å®¹åï¼ŒåŠæ—¶æ€»ç»“ä¸å¤ä¹ ã€‚ä¸‹é¢æ˜¯ä»Šå¤©è¿™èŠ‚è¯¾çš„æ–‡å­—ä»‹ç»éƒ¨åˆ†ã€‚</p><h2>ä»Šæ—¥æ ¸å¿ƒ</h2><p><a href=\"https://github.com/openresty/opm/\">opm</a> æ˜¯ OpenResty ä¸­ä¸ºæ•°ä¸å¤šçš„ç½‘ç«™ç±»é¡¹ç›®ï¼Œè€Œé‡Œé¢çš„ä»£ç ï¼ŒåŸºæœ¬ä¸Šæ˜¯ç”± OpenResty çš„ä½œè€…äº²è‡ªæ“åˆ€å®Œæˆçš„ã€‚</p><p>å¾ˆå¤š OpenResty çš„ä½¿ç”¨è€…å¹¶ä¸æ¸…æ¥šï¼Œå¦‚ä½•åœ¨çœŸå®çš„é¡¹ç›®ä¸­å»é…ç½® nginx.confï¼Œ ä»¥åŠå¦‚ä½•ç»„ç»‡ Lua çš„ä»£ç ç»“æ„ã€‚ç¡®å®ï¼Œåœ¨è¿™æ–¹é¢å¯ä»¥å‚è€ƒçš„å¼€æºé¡¹ç›®å¹¶ä¸å¤šï¼Œç»™å­¦ä¹ ä½¿ç”¨å¸¦äº†ä¸å°çš„é˜»åŠ›ã€‚</p><p>ä¸è¿‡ï¼Œå€ŸåŠ©ä»Šå¤©çš„è¿™ä¸ªé¡¹ç›®ï¼Œä½ å°±å¯ä»¥å…‹æœè¿™ä¸€ç‚¹äº†ã€‚ä½ å°†ä¼šç†Ÿæ‚‰ä¸€ä¸ªOpenResty é¡¹ç›®çš„ç»“æ„å’Œå¼€å‘æµç¨‹ï¼Œè¿˜èƒ½çœ‹åˆ° OpenResty çš„ä½œè€…æ˜¯å¦‚ä½•ç¼–å†™ä¸šåŠ¡ç±» Lua ä»£ç çš„ã€‚</p><p>opm è¿˜æ¶‰åŠåˆ°æ•°æ®åº“çš„æ“ä½œï¼Œå®ƒåå°æ•°æ®çš„å‚¨å­˜ï¼Œä½¿ç”¨çš„æ˜¯PostgreSQL ï¼Œä½ å¯ä»¥é¡ºä¾¿äº†è§£ä¸‹ OpenResty å’Œæ•°æ®åº“æ˜¯å¦‚ä½•äº¤äº’çš„ã€‚</p><!-- [[[read_end]]] --><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸ªé¡¹ç›®è¿˜æ¶‰åŠåˆ°ä¸€äº›ç®€å•çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä¹Ÿæ˜¯ä¸ºäº†åé¢ä¸“é—¨è®¾ç«‹çš„æ€§èƒ½ä¼˜åŒ–å†…å®¹åšä¸ªé“ºå«ã€‚</p><p>æœ€åï¼Œæµè§ˆå®Œ opm è¿™ä¸ªé¡¹ç›®åï¼Œä½ å¯ä»¥è‡ªè¡Œçœ‹ä¸‹å¦å¤–ä¸€ä¸ªç±»ä¼¼çš„é¡¹ç›®ï¼Œé‚£å°±æ˜¯ OpenResty çš„å®˜æ–¹ç½‘ç«™ï¼š<a href=\"https://github.com/openresty/openresty.org\">https://github.com/openresty/openresty.org</a>ã€‚</p><h2>è¯¾ä»¶å‚è€ƒ</h2><p>ä»Šå¤©çš„è¯¾ä»¶å·²ç»ä¸Šä¼ åˆ°äº†æˆ‘çš„GitHubä¸Šï¼Œä½ å¯ä»¥è‡ªå·±ä¸‹è½½å­¦ä¹ ã€‚</p><p>é“¾æ¥å¦‚ä¸‹ï¼š<a href=\"https://github.com/iresty/geektime-slides\">https://github.com/iresty/geektime-slides</a></p><p>å¦‚æœæœ‰ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œä½ å¯ä»¥åœ¨ç•™è¨€åŒºæé—®ï¼Œå¦ä¹Ÿå¯ä»¥åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„å­¦ä¹ å¿ƒå¾—ã€‚æœŸå¾…ä¸ä½ çš„å¯¹è¯ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµã€ä¸€èµ·è¿›æ­¥ã€‚</p>","neighbors":{"left":{"article_title":"04 | å¦‚ä½•ç®¡ç†ç¬¬ä¸‰æ–¹åŒ…ï¼Ÿä»åŒ…ç®¡ç†å·¥å…·luarockså’Œopmè¯´èµ·","id":98660},"right":{"article_title":"06 | OpenResty ä¸­ç”¨åˆ°çš„ NGINX çŸ¥è¯†","id":99522}},"comments":[{"had_liked":false,"id":101399,"user_name":"ä¸šä½™è‰","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1559801287,"is_pvip":false,"replies":[{"id":"36657","content":"ï¼šï¼‰","user_name":"ä½œè€…å›å¤","comment_id":101399,"uid":"1017955","ip_address":"","utype":1,"ctime":1559957812,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"18739670471","product_id":100028301,"comment_content":"è®²å¸ˆæ˜¯åœ¨ç§€å‘é™…çº¿ğŸ˜Š","like_count":4,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452945,"discussion_content":"ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559957812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101089,"user_name":"æ´","can_delete":false,"product_type":"c1","uid":1510376,"ip_address":"","ucode":"154C10D830FB70","user_header":"https://static001.geekbang.org/account/avatar/00/17/0b/e8/1deb2efc.jpg","comment_is_top":false,"comment_ctime":1559714722,"is_pvip":false,"replies":[{"id":"36599","content":"$prefix å°±æ˜¯ nginx å¯åŠ¨æ—¶å€™ -p åé¢çš„è·¯å¾„ã€‚æ¯”å¦‚ï¼šnginx -p &#47;usr&#47;local&#47;openresty, é‚£ä¹ˆ $prefix çš„å€¼å°±æ˜¯  &#47;usr&#47;local&#47;openresty","user_name":"ä½œè€…å›å¤","comment_id":101089,"uid":"1017955","ip_address":"","utype":1,"ctime":1559863930,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"10149649314","product_id":100028301,"comment_content":"lua_package_path &quot;$prefix&#47;lua&#47;?.lua;$prefix&#47;lua&#47;vendor&#47;?.lua;;&quot;;å¯¹äºè¿™ä¸ªè·¯å¾„çš„$prefixè¿˜æ˜¯æœ‰ä¸€ç‚¹ä¸å¤ªç†è§£ï¼Œå¯ä»¥åœ¨å…·ä½“ä¸€ç‚¹å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452799,"discussion_content":"$prefix å°±æ˜¯ nginx å¯åŠ¨æ—¶å€™ -p åé¢çš„è·¯å¾„ã€‚æ¯”å¦‚ï¼šnginx -p /usr/local/openresty, é‚£ä¹ˆ $prefix çš„å€¼å°±æ˜¯  /usr/local/openresty","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559863930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100945,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1559693869,"is_pvip":true,"replies":[{"id":"36596","content":"ä¸¤ä¸ªåˆ†å·çš„æ„æ€æ˜¯é»˜è®¤çš„æŸ¥æ‰¾è·¯å¾„","user_name":"ä½œè€…å›å¤","comment_id":100945,"uid":"1017955","ip_address":"","utype":1,"ctime":1559863825,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"10149628461","product_id":100028301,"comment_content":"lua_package_path &quot;$prefix&#47;lua&#47;?.lua;$prefix&#47;lua&#47;vendor&#47;?.lua;;&quot;;<br><br>è¿™ä¸ªåé¢ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ª åˆ†å·å‘¢ ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452749,"discussion_content":"ä¸¤ä¸ªåˆ†å·çš„æ„æ€æ˜¯é»˜è®¤çš„æŸ¥æ‰¾è·¯å¾„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559863825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152161,"user_name":"åŒ—å†¥Master","can_delete":false,"product_type":"c1","uid":1014142,"ip_address":"","ucode":"EBCCEC79AFC5DF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/79/7e/c38ac02f.jpg","comment_is_top":false,"comment_ctime":1573895118,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5868862414","product_id":100028301,"comment_content":"å˜é‡å‰é¢è¦åŠ localï¼Œå‡½æ•°å‰é¢æ˜¯ä¸æ˜¯ä¹Ÿåº”è¯¥åŠ ï¼šlocal function _M.do_upload() end","like_count":1,"discussions":[{"author":{"id":1255432,"avatar":"","nickname":"å‘¨æ¨","note":"","ucode":"CE0F1D03554A2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394585,"discussion_content":"åŠ ä¸Šæ›´å¥½ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631949552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104607,"user_name":"wusiration","can_delete":false,"product_type":"c1","uid":1104438,"ip_address":"","ucode":"A9403377054F1E","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/36/ac0ff6a7.jpg","comment_is_top":false,"comment_ctime":1560783705,"is_pvip":false,"replies":[{"id":"37917","content":"åé¢æœ‰ nginx çš„åŸºç¡€çŸ¥è¯†ç« èŠ‚ä»‹ç»ï¼Œå¯¹äº nginx èƒ½çœ‹æ‡‚é…ç½®ï¼ŒçŸ¥é“å®ƒçš„å¤§æ¦‚åŸç†å°±è¡Œäº†","user_name":"ä½œè€…å›å¤","comment_id":104607,"uid":"1017955","ip_address":"","utype":1,"ctime":1560840548,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"5855751001","product_id":100028301,"comment_content":"1.éœ€è¦åœ¨lua_package_pathä¸­é…ç½®luaçš„æºç è·¯å¾„<br>2.å‚ç…§opmå’Œopenresty.orgï¼Œæºç ç»“æ„å‡ä¸ºutil&#47;,conf&#47;,templates&#47;,lua&#47;<br><br>è€å¸ˆï¼Œå­¦ä¹ openrestyéœ€è¦å¯¹nginxäº†è§£åˆ°ä»€ä¹ˆç¨‹åº¦å•Š","like_count":1,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454340,"discussion_content":"åé¢æœ‰ nginx çš„åŸºç¡€çŸ¥è¯†ç« èŠ‚ä»‹ç»ï¼Œå¯¹äº nginx èƒ½çœ‹æ‡‚é…ç½®ï¼ŒçŸ¥é“å®ƒçš„å¤§æ¦‚åŸç†å°±è¡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560840548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169376,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1578323857,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1578323857","product_id":100028301,"comment_content":"luarocks.orgæ˜¯é€šè¿‡Lapisæ¡†æ¶ç”¨MoonScriptå†™çš„ï¼šhttps:&#47;&#47;luarocks.org&#47;about","like_count":0},{"had_liked":false,"id":114618,"user_name":"X.","can_delete":false,"product_type":"c1","uid":1606024,"ip_address":"","ucode":"2B35AC0A4A1F17","user_header":"https://static001.geekbang.org/account/avatar/00/18/81/88/1dc092cf.jpg","comment_is_top":false,"comment_ctime":1563351544,"is_pvip":false,"replies":[{"id":"42832","content":"orange æˆ‘ä¸å¤ªæ¸…æ¥šï¼Œå»ºè®®æœ€å¥½åˆ° orange çš„ issue é‡Œé¢æé—®ã€‚","user_name":"ä½œè€…å›å¤","comment_id":114618,"uid":"1017955","ip_address":"","utype":1,"ctime":1563973595,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":2,"race_medal":0,"score":"1563351544","product_id":100028301,"comment_content":"å¤§ä½¬å¥½ï¼Œæˆ‘ç”¨ORå­¦ä¹ éƒ¨ç½²orangeAPIç½‘å…³ç¢°è§ç‚¹é—®é¢˜ã€‚<br>æˆ‘æ­å»ºçš„å®éªŒç¯å¢ƒæ˜¯CentOS 7.6.1810ï¼Œå¬ä½ çš„åœ¨å®˜ç½‘ç”¨yumå®‰è£…çš„æœ€æ–°ç‰ˆORæ²¡ç”¨ç¼–è¯‘å®‰è£…ï¼ˆç¼–è¯‘å®‰è£…ä¹‹å‰é—®é¢˜æ›´å¤šï¼Œï¼Œï¼‰ç„¶ånginx -v resty -v éƒ½å¯ä»¥æŸ¥çœ‹åˆ°ä¿¡æ¯ï¼Œnginxä¹Ÿèµ·æ¥äº†ï¼Œæµè§ˆç½‘é¡µä¹Ÿèƒ½çœ‹åˆ°OpenResty<br>å¯åŠ¨orangeçš„æ—¶å€™æœ€åä¸€æ­¥æç¤ºï¼š<br>[INFO] ORANGE_CONF=&#47;usr&#47;local&#47;orange&#47;conf&#47;orange.conf nginx -p &#47;usr&#47;local&#47;orange -c &#47;usr&#47;local&#47;orange&#47;conf&#47;nginx.conf <br>nginx: [error] init_by_lua error: init_by_lua:2: module &#39;orange.orange&#39; not found:<br>1ï¼šæˆ‘çš„lua_package_path &quot;$prefix&#47;usr&#47;local&#47;lor&#47;?.lua;;$prefix&#47;usr&#47;local&#47;orange&#47;?.lua;;&quot;; æ˜¯è¿™ä¹ˆé…ç½®çš„ï¼Œæˆ‘çœ‹orangeéœ€è¦lorçš„æ”¯æŒï¼Œè¿™ä¸ªè·¯å¾„æ˜¯åªéœ€è¦é…ç½®lorçš„luaè·¯å¾„ï¼Œè¿˜æ˜¯è¦æŠŠorange luaçš„è·¯å¾„ä¹Ÿå†™ä¸Šï¼Œå°±æ˜¯è¯´ä»¥åç”¨çš„luaä¸æ­¢ä¸€ä¸ªï¼Œæ˜¯ä¸€èµ·å†™åœ¨è¿™ä¹ˆã€‚<br>2ï¼šæˆ‘çœ‹ä»–æ„æ€æ˜¯init_by_luaæ‰¾ä¸åˆ°orange.orangeï¼Œæˆ‘çš„æ˜¯è¿™æ ·çš„<br> init_by_lua_block {<br>        local orange = require(&quot;orange.orange&quot;)<br>        local env_orange_conf = os.getenv(&quot;ORANGE_CONF&quot;)<br>        print(string.char(27) .. &quot;[34m&quot; .. &quot;[INFO]&quot; .. string.char(27).. &quot;[0m&quot;, [[the env[ORANGE_CONF] is ]], env_orange_conf)<br><br>        -- Here, you can also use the absolute path, eg: local confige_file = &quot;&#47;home&#47;openresty&#47;orange&#47;conf&#47;orange.conf&quot;<br>        local config_file = env_orange_conf or ngx.config.prefix().. &quot;&#47;conf&#47;orange.conf&quot;<br>        local config, store = orange.init({<br>            config = config_file<br>        })<br>æˆ‘çœ‹ä½ è§†é¢‘é‡Œè¯´nginx.confå°½é‡å°‘é…ç½®ï¼Œæˆ‘åŸºæœ¬æ²¡åŠ¨åªæ”¹äº†lua_package_path ï¼Œä½†æ˜¯orangeé»˜è®¤çš„init_by_lua_block {<br>        local orange = require(&quot;orange.orange&quot;) è¿™é‡Œé¢ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ˜¯orange.orangeï¼Œä»–æœ‰luaçš„æ–‡ä»¶åœ¨orangeçš„æ–‡ä»¶å¤¹ä¸‹è¿˜æœ‰ä¸ªorangeæ–‡ä»¶å¤¹ è¿™é‡Œé¢æ‰æœ‰Luaæ–‡ä»¶ åº”è¯¥æ˜¯å¯åŠ¨æ–‡ä»¶å§ï¼Œèµ·ä¸æ¥è·Ÿè¿™ä¸ª . æœ‰å…³ä¹ˆã€‚ <br>ä¸‡åˆ†æ„Ÿè°¢","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458747,"discussion_content":"orange æˆ‘ä¸å¤ªæ¸…æ¥šï¼Œå»ºè®®æœ€å¥½åˆ° orange çš„ issue é‡Œé¢æé—®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563973595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1606024,"avatar":"https://static001.geekbang.org/account/avatar/00/18/81/88/1dc092cf.jpg","nickname":"X.","note":"","ucode":"2B35AC0A4A1F17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2208,"discussion_content":"2019/07/17 03:55:44 [error] 8919#8919: init_by_lua error: init_by_lua:2: module &#39;orange.orange&#39; not found:\n\tno field package.preload[&#39;orange.orange&#39;]\n\tno file &#39;/usr/local/orange//usr/local/lor/orange/orange.lua&#39;\n\tno file &#39;/usr/local/openresty/site/lualib/orange/orange.ljbc&#39;\n\tno file &#39;/usr/local/openresty/site/lualib/orange/orange/init.ljbc&#39;\n\tno file &#39;/usr/local/openresty/lualib/orange/orange.ljbc&#39;\n\tno file &#39;/usr/local/openresty/lualib/orange/orange/init.ljbc&#39;\n\tno file &#39;/usr/local/openresty/site/lualib/orange/orange.lua&#39;\n\tno file &#39;/usr/local/openresty/site/lualib/orange/orange/init.lua&#39;\n\tno file &#39;/usr/local/openresty/lualib/orange/orange.lua&#39;\n\tno file &#39;/usr/local/openresty/lualib/orange/orange/init.lua&#39;\n\tno file &#39;./orange/orange.lua&#39;\n\tno file &#39;/usr/local/openresty/luajit/share/luajit-2.1.0-beta3/orange/orange.lua&#39;\n\tno file &#39;/usr/local/share/lua/5.1/orange/orange.lua&#39;\n\tno file &#39;/usr/local/share/lua/5.1/orange/orange/init.lua&#39;\n\tno file &#39;/usr/local/openresty/luajit/share/lua/5.1/orange/orange.lua&#39;\n\tno file &#39;/usr/local/openresty/luajit/share/lua/5.1/orange/orange/init.lua&#39;\n\tno file &#39;/usr/local/orange//usr/local/orange/orange/orange.lua&#39;\n\tno file &#39;/usr/local/openresty/site/lualib/orange/orange.ljbc&#39;\n\tno file &#39;/usr/local/openresty/site/lualib/orange/orange/init.ljbc&#39;\n\tno file &#39;/usr/local/openresty/lualib/orange/orange.ljbc&#39;\n\tno file &#39;/usr/local/openresty/lualib/orange/orange/init.ljbc&#39;\n\tno file &#39;/usr/local/openresty/site/lualib/orange/orange.lua&#39;\n\tno file &#39;/usr/local/openresty/site/lualib/orange/orange/init.lua&#39;\n\tno file &#39;/usr/local/openresty/lualib/orange/orange.lua&#39;\n\tno file &#39;/usr/local/openresty/lualib/orange/orange/init.lua&#39;\n\tno file &#39;./orange/orange.lua&#39;\n\tno file &#39;/usr/local/openresty/luajit/share/luajit-2.1.0-beta3/orange/orange.lua&#39;\n\t.\n        .\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563354214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112864,"user_name":"å°é±¼ğŸ‘","can_delete":false,"product_type":"c1","uid":1584972,"ip_address":"","ucode":"E04E6A7660AE78","user_header":"https://static001.geekbang.org/account/avatar/00/18/2f/4c/04441552.jpg","comment_is_top":false,"comment_ctime":1562833713,"is_pvip":false,"replies":[{"id":"41174","content":"æ€ä¹ˆå®‰è£…çš„å‘¢ï¼Ÿè¿™ä¸ªæ˜¯å°‘äº† perl çš„åº“ï¼Œéœ€è¦ç”¨ cpanm è¿™æ ·çš„åŒ…ç®¡ç†å™¨å®‰è£…ä¸‹","user_name":"ä½œè€…å›å¤","comment_id":112864,"uid":"1017955","ip_address":"","utype":1,"ctime":1562904482,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":2,"race_medal":0,"score":"1562833713","product_id":100028301,"comment_content":"opmå‘½ä»¤æŠ¥é”™<br>Can&#39;t locate Digest&#47;MD5.pm in @INC (@INC contains: &#47;usr&#47;local&#47;lib64&#47;perl5 &#47;usr&#47;local&#47;share&#47;perl5 &#47;usr&#47;lib64&#47;perl5&#47;vendor_perl &#47;usr&#47;share&#47;perl5&#47;vendor_perl &#47;usr&#47;lib64&#47;perl5 &#47;usr&#47;share&#47;perl5 .) at &#47;usr&#47;bin&#47;opm line 16.<br>BEGIN failed--compilation aborted at &#47;usr&#47;bin&#47;opm line 16","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457935,"discussion_content":"æ€ä¹ˆå®‰è£…çš„å‘¢ï¼Ÿè¿™ä¸ªæ˜¯å°‘äº† perl çš„åº“ï¼Œéœ€è¦ç”¨ cpanm è¿™æ ·çš„åŒ…ç®¡ç†å™¨å®‰è£…ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562904482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1162734,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bd/ee/87679555.jpg","nickname":"å«ä¸­","note":"","ucode":"1B9759D9D42B06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590828,"discussion_content":"å¯ä»¥å°è¯•ï¼šyum install -y perl-Digest-MD5","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666092601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101689,"user_name":"å°ç¾Š","can_delete":false,"product_type":"c1","uid":1000877,"ip_address":"","ucode":"50239B7052BFD2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epgKOrnIOAjzXJgb0f0ljTZLeqrMXYaHic1MKQnPbAzxSKgYxd7K2DlqRW8SibTkwV2MAUZ4OlgRnNw/132","comment_is_top":false,"comment_ctime":1559916659,"is_pvip":false,"replies":[{"id":"36658","content":"å¤§æ¦‚çš„åŸå› æ˜¯è·³è¿‡äº† Lua å±‚é¢çš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œprint å‡½æ•°ä¸ä»…æ¥å—å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œä¹Ÿæ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ã€‚åé¢æ€§èƒ½ä¼˜åŒ–ç« èŠ‚è¿˜ä¼šç»§ç»­è¿™ä¸ªè¯é¢˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":101689,"uid":"1017955","ip_address":"","utype":1,"ctime":1559957902,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"1559916659","product_id":100028301,"comment_content":"i = i+1 ä¸‹æ ‡è®¡ç®— ï¼Œ æœ€åçš„ print æ²¡æœ‰å¬æ‡‚ã€‚ã€‚ã€‚  ä¸ºä»€ä¹ˆæœ‰æ€§èƒ½ä¼˜åŒ–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453071,"discussion_content":"å¤§æ¦‚çš„åŸå› æ˜¯è·³è¿‡äº† Lua å±‚é¢çš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œprint å‡½æ•°ä¸ä»…æ¥å—å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œä¹Ÿæ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ã€‚åé¢æ€§èƒ½ä¼˜åŒ–ç« èŠ‚è¿˜ä¼šç»§ç»­è¿™ä¸ªè¯é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559957902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101083,"user_name":"äº","can_delete":false,"product_type":"c1","uid":1548143,"ip_address":"","ucode":"2AF0771F869F59","user_header":"https://static001.geekbang.org/account/avatar/00/17/9f/6f/0e341408.jpg","comment_is_top":false,"comment_ctime":1559712034,"is_pvip":false,"replies":[{"id":"36597","content":"æ…¢æ…¢æ¥ï¼Œå…ˆæœ‰ä¸€ä¸ªå¤§æ¦‚çš„å°è±¡","user_name":"ä½œè€…å›å¤","comment_id":101083,"uid":"1017955","ip_address":"","utype":1,"ctime":1559863853,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":2,"race_medal":0,"score":"1559712034","product_id":100028301,"comment_content":"è€å¸ˆï¼Œä½œä¸ºä¸€ä¸ªåˆšæ¥è§¦çš„èœé¸Ÿã€‚æ„Ÿè§‰éƒ½ä¸æ˜¯å¤ªç†è§£ã€‚","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452796,"discussion_content":"æ…¢æ…¢æ¥ï¼Œå…ˆæœ‰ä¸€ä¸ªå¤§æ¦‚çš„å°è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559863853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255432,"avatar":"","nickname":"å‘¨æ¨","note":"","ucode":"CE0F1D03554A2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394586,"discussion_content":"å¤šçœ‹ä¸¤éå°±å¥½äº†ï¼Œç”±äºé¡¹ç›®è¦ç”¨ï¼Œæˆ‘è¿™å‘¨æ‰å¼€å§‹çœ‹openrestyï¼Œç°åœ¨çœ‹ç¬¬äºŒéæ„Ÿè§‰ç†è§£å¥½å¤šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631949634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100930,"user_name":"nanyun","can_delete":false,"product_type":"c1","uid":1067105,"ip_address":"","ucode":"FF029071ACB041","user_header":"https://static001.geekbang.org/account/avatar/00/10/48/61/803d5bbf.jpg","comment_is_top":false,"comment_ctime":1559691912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559691912","product_id":100028301,"comment_content":"è§†é¢‘çš„æ•ˆæœå¥½å¾ˆå¤šï¼Œèµã€‚","like_count":0}]}