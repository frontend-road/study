{"id":116369,"title":"35 | MySQLè°ƒä¼˜ä¹‹ç´¢å¼•ï¼šç´¢å¼•çš„å¤±æ•ˆä¸ä¼˜åŒ–","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åˆ˜è¶…ã€‚</p><p>ä¸çŸ¥é“ä½ æ˜¯å¦è·Ÿæˆ‘æœ‰è¿‡åŒæ ·çš„ç»å†ï¼Œé‚£å°±æ˜¯ä½œä¸ºä¸€ä¸ªå¼€å‘å·¥ç¨‹å¸ˆï¼Œç»å¸¸è¢«DBAå«è¿‡å»â€œæ‰¹è¯„â€ï¼Œè€Œæœ€å¸¸è§çš„å°±æ˜¯ç”³è¯·åˆ›å»ºæ–°çš„ç´¢å¼•æˆ–å‘ç°æ…¢SQLæ—¥å¿—äº†ã€‚</p><p>è®°å¾—ä¹‹å‰æœ‰ä¸€æ¬¡è¿­ä»£ä¸€ä¸ªä¸šåŠ¡æ¨¡å—çš„å¼€å‘ï¼Œæ¶‰åŠåˆ°äº†ä¸€ä¸ªæ–°çš„æŸ¥è¯¢ä¸šåŠ¡ï¼Œéœ€è¦æ ¹æ®å•†å“ç±»å‹ã€è®¢å•çŠ¶æ€ç­›é€‰å‡ºéœ€è¦çš„è®¢å•ï¼Œå¹¶ä»¥è®¢å•æ—¶é—´è¿›è¡Œæ’åºã€‚ç”±äºskuçš„ç´¢å¼•å·²ç»å­˜åœ¨äº†ï¼Œæˆ‘åœ¨å®Œæˆä¸šåŠ¡å¼€å‘ä¹‹åï¼Œæäº¤äº†ä¸€ä¸ªåˆ›å»ºstatusçš„ç´¢å¼•çš„éœ€æ±‚ï¼Œç†ç”±æ˜¯SQLæŸ¥è¯¢éœ€è¦ä½¿ç”¨åˆ°è¿™ä¸¤ä¸ªç´¢å¼•ï¼š</p><blockquote>\n<p>select * from order where status =1 and sku=10001 order by create_time asc</p>\n</blockquote><p>ç„¶è€Œï¼ŒDBAå¾ˆå¿«å°±å°†è¿™ä¸ªéœ€æ±‚é©³å›äº†ï¼Œå¹¶ç»™å‡ºäº†é‡å»ºä¸€ä¸ªskuã€statusä»¥åŠcreate_timeç»„åˆç´¢å¼•çš„å»ºè®®ï¼ŒæŸ¥è¯¢é¡ºåºä¹Ÿæ”¹æˆäº† sku=10001 and status=1ã€‚å½“æ—¶æˆ‘æ˜¯çŸ¥é“ä¸ºä»€ä¹ˆè¦é‡å»ºç»„åˆç´¢å¼•ï¼Œä½†å´æ— æ³•ç†è§£ä¸ºä»€ä¹ˆè¦æ·»åŠ create_timeè¿™åˆ—è¿›è¡Œç»„åˆã€‚</p><p>ä»æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ä½¿ç”¨åˆ°äº†ç´¢å¼•ï¼Œé‚£ä¸ºä»€ä¹ˆDBAè¿˜è¦æ±‚å°†create_timeè¿™ä¸€åˆ—åŠ å…¥åˆ°ç»„åˆç´¢å¼•ä¸­å‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/113440\">ç¬¬33è®²</a>ä¸­æåˆ°è¿‡ï¼Œç›¸ä¿¡ä½ ä¹Ÿå·²ç»çŸ¥é“ç­”æ¡ˆäº†ã€‚é€šè¿‡æ•…äº‹æˆ‘ä»¬å¯ä»¥å‘ç°ç´¢å¼•çŸ¥è¯†åœ¨å¹³æ—¶å¼€å‘æ—¶çš„é‡è¦æ€§ï¼Œç„¶è€Œå®ƒåˆå¾ˆå®¹æ˜“è¢«æˆ‘ä»¬å¿½ç•¥ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘ä»¬å°±æ¥è¯¦ç»†èŠä¸€èŠç´¢å¼•ã€‚</p><!-- [[[read_end]]] --><h2>MySQLç´¢å¼•å­˜å‚¨ç»“æ„</h2><p>ç´¢å¼•æ˜¯ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æœ€é‡è¦çš„æ–¹å¼ä¹‹ä¸€ï¼Œå®ƒæ˜¯åœ¨MySQLçš„å­˜å‚¨å¼•æ“å±‚ä¸­å®ç°çš„ï¼Œæ‰€ä»¥æ¯ä¸€ç§å­˜å‚¨å¼•æ“å¯¹åº”çš„ç´¢å¼•ä¸ä¸€å®šç›¸åŒã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¼ è¡¨æ ¼ï¼Œçœ‹çœ‹ä¸åŒçš„å­˜å‚¨å¼•æ“åˆ†åˆ«æ”¯æŒå“ªç§ç´¢å¼•ç±»å‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f6/1b/f6dc2c083b30377628b3699322f6611b.jpg?wh=1334*342\" alt=\"\"></p><p>B+Treeç´¢å¼•å’ŒHashç´¢å¼•æ˜¯æˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨çš„ä¸¤ä¸ªç´¢å¼•æ•°æ®å­˜å‚¨ç»“æ„ï¼ŒB+Treeç´¢å¼•æ˜¯é€šè¿‡B+æ ‘å®ç°çš„ï¼Œæ˜¯æœ‰åºæ’åˆ—å­˜å‚¨ï¼Œæ‰€ä»¥åœ¨æ’åºå’ŒèŒƒå›´æŸ¥æ‰¾æ–¹é¢éƒ½æ¯”è¾ƒæœ‰ä¼˜åŠ¿ã€‚å¦‚æœä½ å¯¹B+Treeç´¢å¼•ä¸å¤Ÿäº†è§£ï¼Œå¯ä»¥é€šè¿‡è¯¥<a href=\"https://zhuanlan.zhihu.com/p/27700617\">é“¾æ¥</a>äº†è§£ä¸‹å®ƒçš„æ•°æ®ç»“æ„åŸç†ã€‚</p><p>Hashç´¢å¼•ç›¸å¯¹ç®€å•äº›ï¼Œåªæœ‰Memoryå­˜å‚¨å¼•æ“æ”¯æŒHashç´¢å¼•ã€‚Hashç´¢å¼•é€‚åˆkey-valueé”®å€¼å¯¹æŸ¥è¯¢ï¼Œæ— è®ºè¡¨æ•°æ®å¤šå¤§ï¼ŒæŸ¥è¯¢æ•°æ®çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼Œä¸”ç›´æ¥é€šè¿‡Hashç´¢å¼•æŸ¥è¯¢çš„æ€§èƒ½æ¯”å…¶å®ƒç´¢å¼•éƒ½è¦ä¼˜è¶Šã€‚</p><p>åœ¨åˆ›å»ºè¡¨æ—¶ï¼Œæ— è®ºä½¿ç”¨InnoDBè¿˜æ˜¯MyISAMå­˜å‚¨å¼•æ“ï¼Œé»˜è®¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªä¸»é”®ç´¢å¼•ï¼Œè€Œåˆ›å»ºçš„ä¸»é”®ç´¢å¼•é»˜è®¤ä½¿ç”¨çš„æ˜¯B+Treeç´¢å¼•ã€‚ä¸è¿‡è™½ç„¶è¿™ä¸¤ä¸ªå­˜å‚¨å¼•æ“éƒ½æ”¯æŒB+Treeç´¢å¼•ï¼Œä½†å®ƒä»¬åœ¨å…·ä½“çš„æ•°æ®å­˜å‚¨ç»“æ„æ–¹é¢å´æœ‰æ‰€ä¸åŒã€‚</p><p>InnoDBé»˜è®¤åˆ›å»ºçš„ä¸»é”®ç´¢å¼•æ˜¯èšç°‡ç´¢å¼•ï¼ˆClustered Indexï¼‰ï¼Œå…¶å®ƒç´¢å¼•éƒ½å±äºè¾…åŠ©ç´¢å¼•ï¼ˆSecondary Indexï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸ºäºŒçº§ç´¢å¼•æˆ–éèšç°‡ç´¢å¼•ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¯´æ˜ä¸‹è¿™ä¸¤ç§ç´¢å¼•åœ¨å­˜å‚¨æ•°æ®ä¸­çš„å…·ä½“å®ç°ã€‚</p><p>é¦–å…ˆåˆ›å»ºä¸€å¼ å•†å“è¡¨ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>CREATE TABLE `merchandise`  (\n  `id` int(11) NOT NULL,\n  `serial_no` varchar(20)  DEFAULT NULL,\n  `name` varchar(255) DEFAULT NULL,\n  `unit_price` decimal(10, 2) DEFAULT NULL,\n  PRIMARY KEY (`id`) USING BTREE\n) CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;\n</code></pre><p>ç„¶åæ–°å¢äº†ä»¥ä¸‹å‡ è¡Œæ•°æ®ï¼Œå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/52/c8/524d7510e8c3ec264f274798d72b99c8.jpg?wh=1166*406\" alt=\"\"></p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯MyISAMå­˜å‚¨å¼•æ“ï¼Œç”±äºMyISAMä½¿ç”¨çš„æ˜¯è¾…åŠ©ç´¢å¼•ï¼Œç´¢å¼•ä¸­æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹ä»…ä»…è®°å½•çš„æ˜¯æ¯è¡Œæ•°æ®çš„ç‰©ç†åœ°å€ï¼Œå³è¡ŒæŒ‡é’ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ea/43/eacb96b876a4db6f3f020bd1efd39243.jpg?wh=2352*962\" alt=\"\"></p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯InnoDBå­˜å‚¨å¼•æ“ï¼Œç”±äºInnoDBä½¿ç”¨çš„æ˜¯èšç°‡ç´¢å¼•ï¼Œèšç°‡ç´¢å¼•ä¸­çš„å¶å­èŠ‚ç‚¹åˆ™è®°å½•äº†ä¸»é”®å€¼ã€äº‹åŠ¡idã€ç”¨äºäº‹åŠ¡å’ŒMVCCçš„å›æµæŒ‡é’ˆä»¥åŠæ‰€æœ‰çš„å‰©ä½™åˆ—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/9a/42/9a98b5abb7ff82530b02c6aeb15b6242.jpg?wh=2326*1012\" alt=\"\"></p><p>åŸºäºä¸Šé¢çš„å›¾ç¤ºï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ ¹æ®å•†å“ç¼–ç æŸ¥è¯¢å•†å“ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å•†å“ç¼–ç serial_noåˆ—ä½œä¸ºä¸€ä¸ªç´¢å¼•åˆ—ã€‚æ­¤æ—¶åˆ›å»ºçš„ç´¢å¼•æ˜¯ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼Œä¸MyISAMå­˜å‚¨å¼•æ“çš„ä¸»é”®ç´¢å¼•çš„å­˜å‚¨æ–¹å¼æ˜¯ä¸€è‡´çš„ï¼Œä½†å¶å­èŠ‚ç‚¹å­˜å‚¨çš„å°±ä¸æ˜¯è¡ŒæŒ‡é’ˆäº†ï¼Œè€Œæ˜¯ä¸»é”®å€¼ï¼Œå¹¶ä»¥æ­¤æ¥ä½œä¸ºæŒ‡å‘è¡Œçš„æŒ‡é’ˆã€‚è¿™æ ·çš„å¥½å¤„å°±æ˜¯å½“è¡Œå‘ç”Ÿç§»åŠ¨æˆ–è€…æ•°æ®åˆ†è£‚æ—¶ï¼Œä¸ç”¨å†ç»´æŠ¤ç´¢å¼•çš„å˜æ›´ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸»é”®ç´¢å¼•æŸ¥è¯¢å•†å“ï¼Œåˆ™ä¼šæŒ‰ç…§B+æ ‘çš„ç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„å¶å­èŠ‚ç‚¹ï¼Œç›´æ¥è·å–åˆ°è¡Œæ•°æ®ï¼š</p><blockquote>\n<p>select * from merchandise where id=7</p>\n</blockquote><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨å•†å“ç¼–ç æŸ¥è¯¢å•†å“ï¼Œå³ä½¿ç”¨è¾…åŠ©ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ï¼Œåˆ™ä¼šå…ˆæ£€ç´¢è¾…åŠ©ç´¢å¼•ä¸­çš„B+æ ‘çš„serial_noï¼Œæ‰¾åˆ°å¯¹åº”çš„å¶å­èŠ‚ç‚¹ï¼Œè·å–ä¸»é”®å€¼ï¼Œç„¶åå†é€šè¿‡èšç°‡ç´¢å¼•ä¸­çš„B+æ ‘æ£€ç´¢åˆ°å¯¹åº”çš„å¶å­èŠ‚ç‚¹ï¼Œç„¶åè·å–æ•´è¡Œæ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹å«åšå›è¡¨ã€‚</p><p>åœ¨äº†è§£äº†ç´¢å¼•çš„å®ç°åŸç†åï¼Œæˆ‘ä»¬å†æ¥è¯¦ç»†äº†è§£ä¸‹å¹³æ—¶å»ºç«‹å’Œä½¿ç”¨ç´¢å¼•æ—¶ï¼Œéƒ½æœ‰å“ªäº›è°ƒä¼˜æ–¹æ³•å‘¢ï¼Ÿ</p><h2>1.è¦†ç›–ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢</h2><p>å‡è®¾æˆ‘ä»¬åªéœ€è¦æŸ¥è¯¢å•†å“çš„åç§°ã€ä»·æ ¼ä¿¡æ¯ï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆæ–¹å¼æ¥é¿å…å›è¡¨å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªç»„åˆç´¢å¼•ï¼Œå³å•†å“ç¼–ç ã€åç§°ã€ä»·æ ¼ä½œä¸ºä¸€ä¸ªç»„åˆç´¢å¼•ã€‚å¦‚æœç´¢å¼•ä¸­å­˜åœ¨è¿™äº›æ•°æ®ï¼ŒæŸ¥è¯¢å°†ä¸ä¼šå†æ¬¡æ£€ç´¢ä¸»é”®ç´¢å¼•ï¼Œä»è€Œé¿å…å›è¡¨ã€‚</p><p>ä»è¾…åŠ©ç´¢å¼•ä¸­æŸ¥è¯¢å¾—åˆ°è®°å½•ï¼Œè€Œä¸éœ€è¦é€šè¿‡èšç°‡ç´¢å¼•æŸ¥è¯¢è·å¾—ï¼ŒMySQLä¸­å°†å…¶ç§°ä¸ºè¦†ç›–ç´¢å¼•ã€‚ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„å¥½å¤„å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬ä¸éœ€è¦æŸ¥è¯¢å‡ºåŒ…å«æ•´è¡Œè®°å½•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå› æ­¤å¯ä»¥å‡å°‘å¤§é‡çš„I/Oæ“ä½œã€‚</p><p>é€šå¸¸åœ¨InnoDBä¸­ï¼Œé™¤äº†æŸ¥è¯¢éƒ¨åˆ†å­—æ®µå¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•æ¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ä¹‹å¤–ï¼Œç»Ÿè®¡æ•°é‡ä¹Ÿä¼šç”¨åˆ°ã€‚ä¾‹å¦‚ï¼Œåœ¨<a href=\"https://time.geekbang.org/column/article/113440\">ç¬¬32è®²</a>æˆ‘ä»¬è®² SELECT  COUNT(*)æ—¶ï¼Œå¦‚æœä¸å­˜åœ¨è¾…åŠ©ç´¢å¼•ï¼Œæ­¤æ—¶ä¼šé€šè¿‡æŸ¥è¯¢èšç°‡ç´¢å¼•æ¥ç»Ÿè®¡è¡Œæ•°ï¼Œå¦‚æœæ­¤æ—¶æ­£å¥½å­˜åœ¨ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼Œåˆ™ä¼šé€šè¿‡æŸ¥è¯¢è¾…åŠ©ç´¢å¼•æ¥ç»Ÿè®¡è¡Œæ•°ï¼Œå‡å°‘I/Oæ“ä½œã€‚</p><p>é€šè¿‡EXPLAINï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° InnoDB  å­˜å‚¨å¼•æ“ä½¿ç”¨äº†idx_orderç´¢å¼•åˆ—æ¥ç»Ÿè®¡è¡Œæ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c6/6f/c689b2fd284c19fd2049b1f73091226f.jpg?wh=2588*370\" alt=\"\"></p><h2>2.è‡ªå¢å­—æ®µä½œä¸»é”®ä¼˜åŒ–æŸ¥è¯¢</h2><p>ä¸Šé¢æˆ‘ä»¬è®²äº† InnoDB  åˆ›å»ºä¸»é”®ç´¢å¼•é»˜è®¤ä¸ºèšç°‡ç´¢å¼•ï¼Œæ•°æ®è¢«å­˜æ”¾åœ¨äº†B+æ ‘çš„å¶å­èŠ‚ç‚¹ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ä¸ªå¶å­èŠ‚ç‚¹å†…çš„å„ä¸ªæ•°æ®æ˜¯æŒ‰ä¸»é”®é¡ºåºå­˜æ”¾çš„ï¼Œå› æ­¤ï¼Œæ¯å½“æœ‰ä¸€æ¡æ–°çš„æ•°æ®æ’å…¥æ—¶ï¼Œæ•°æ®åº“ä¼šæ ¹æ®ä¸»é”®å°†å…¶æ’å…¥åˆ°å¯¹åº”çš„å¶å­èŠ‚ç‚¹ä¸­ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œé‚£ä¹ˆæ¯æ¬¡æ’å…¥çš„æ–°æ•°æ®å°±ä¼šæŒ‰é¡ºåºæ·»åŠ åˆ°å½“å‰ç´¢å¼•èŠ‚ç‚¹çš„ä½ç½®ï¼Œä¸éœ€è¦ç§»åŠ¨å·²æœ‰çš„æ•°æ®ï¼Œå½“é¡µé¢å†™æ»¡ï¼Œå°±ä¼šè‡ªåŠ¨å¼€è¾Ÿä¸€ä¸ªæ–°é¡µé¢ã€‚å› ä¸ºä¸éœ€è¦é‡æ–°ç§»åŠ¨æ•°æ®ï¼Œå› æ­¤è¿™ç§æ’å…¥æ•°æ®çš„æ–¹æ³•æ•ˆç‡éå¸¸é«˜ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨éè‡ªå¢ä¸»é”®ï¼Œç”±äºæ¯æ¬¡æ’å…¥ä¸»é”®çš„ç´¢å¼•å€¼éƒ½æ˜¯éšæœºçš„ï¼Œå› æ­¤æ¯æ¬¡æ’å…¥æ–°çš„æ•°æ®æ—¶ï¼Œå°±å¯èƒ½ä¼šæ’å…¥åˆ°ç°æœ‰æ•°æ®é¡µä¸­é—´çš„æŸä¸ªä½ç½®ï¼Œè¿™å°†ä¸å¾—ä¸ç§»åŠ¨å…¶å®ƒæ•°æ®æ¥æ»¡è¶³æ–°æ•°æ®çš„æ’å…¥ï¼Œç”šè‡³éœ€è¦ä»ä¸€ä¸ªé¡µé¢å¤åˆ¶æ•°æ®åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢ï¼Œæˆ‘ä»¬é€šå¸¸å°†è¿™ç§æƒ…å†µç§°ä¸ºé¡µåˆ†è£‚ã€‚é¡µåˆ†è£‚è¿˜æœ‰å¯èƒ½ä¼šé€ æˆå¤§é‡çš„å†…å­˜ç¢ç‰‡ï¼Œå¯¼è‡´ç´¢å¼•ç»“æ„ä¸ç´§å‡‘ï¼Œä»è€Œå½±å“æŸ¥è¯¢æ•ˆç‡ã€‚</p><p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå»ºè®®ä½¿ç”¨è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®ã€‚</p><h2>3.å‰ç¼€ç´¢å¼•ä¼˜åŒ–</h2><p>å‰ç¼€ç´¢å¼•é¡¾åæ€ä¹‰å°±æ˜¯ä½¿ç”¨æŸä¸ªå­—æ®µä¸­å­—ç¬¦ä¸²çš„å‰å‡ ä¸ªå­—ç¬¦å»ºç«‹ç´¢å¼•ï¼Œé‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨å‰ç¼€æ¥å»ºç«‹ç´¢å¼•å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œç´¢å¼•æ–‡ä»¶æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸­çš„ï¼Œè€Œç£ç›˜ä¸­æœ€å°åˆ†é…å•å…ƒæ˜¯é¡µï¼Œé€šå¸¸ä¸€ä¸ªé¡µçš„é»˜è®¤å¤§å°ä¸º16KBï¼Œå‡è®¾æˆ‘ä»¬å»ºç«‹çš„ç´¢å¼•çš„æ¯ä¸ªç´¢å¼•å€¼å¤§å°ä¸º2KBï¼Œåˆ™åœ¨ä¸€ä¸ªé¡µä¸­ï¼Œæˆ‘ä»¬èƒ½è®°å½•8ä¸ªç´¢å¼•å€¼ï¼Œå‡è®¾æˆ‘ä»¬æœ‰8000è¡Œè®°å½•ï¼Œåˆ™éœ€è¦1000ä¸ªé¡µæ¥å­˜å‚¨ç´¢å¼•ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨è¯¥ç´¢å¼•æŸ¥è¯¢æ•°æ®ï¼Œå¯èƒ½éœ€è¦éå†å¤§é‡é¡µï¼Œè¿™æ˜¾ç„¶ä¼šé™ä½æŸ¥è¯¢æ•ˆç‡ã€‚</p><p>å‡å°ç´¢å¼•å­—æ®µå¤§å°ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªé¡µä¸­å­˜å‚¨çš„ç´¢å¼•é¡¹ï¼Œæœ‰æ•ˆæé«˜ç´¢å¼•çš„æŸ¥è¯¢é€Ÿåº¦ã€‚åœ¨ä¸€äº›å¤§å­—ç¬¦ä¸²çš„å­—æ®µä½œä¸ºç´¢å¼•æ—¶ï¼Œä½¿ç”¨å‰ç¼€ç´¢å¼•å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡å°ç´¢å¼•é¡¹çš„å¤§å°ã€‚</p><p>ä¸è¿‡ï¼Œå‰ç¼€ç´¢å¼•æ˜¯æœ‰ä¸€å®šçš„å±€é™æ€§çš„ï¼Œä¾‹å¦‚order byå°±æ— æ³•ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼Œæ— æ³•æŠŠå‰ç¼€ç´¢å¼•ç”¨ä½œè¦†ç›–ç´¢å¼•ã€‚</p><h2>4.é˜²æ­¢ç´¢å¼•å¤±æ•ˆ</h2><p>å½“æˆ‘ä»¬ä¹ æƒ¯å»ºç«‹ç´¢å¼•æ¥å®ç°æŸ¥è¯¢SQLçš„æ€§èƒ½ä¼˜åŒ–åï¼Œæ˜¯ä¸æ˜¯å°±ä¸‡äº‹å¤§å‰äº†å‘¢ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬çœ‹ä¼¼ä½¿ç”¨åˆ°äº†ç´¢å¼•ï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«ä¼˜åŒ–å™¨é€‰æ‹©ä½¿ç”¨ã€‚</p><p>å¯¹äºHashç´¢å¼•å®ç°çš„åˆ—ï¼Œå¦‚æœä½¿ç”¨åˆ°èŒƒå›´æŸ¥è¯¢ï¼Œé‚£ä¹ˆè¯¥ç´¢å¼•å°†æ— æ³•è¢«ä¼˜åŒ–å™¨ä½¿ç”¨åˆ°ã€‚ä¹Ÿå°±æ˜¯è¯´Memoryå¼•æ“å®ç°çš„Hashç´¢å¼•åªæœ‰åœ¨â€œ=â€çš„æŸ¥è¯¢æ¡ä»¶ä¸‹ï¼Œç´¢å¼•æ‰ä¼šç”Ÿæ•ˆã€‚æˆ‘ä»¬å°†orderè¡¨è®¾ç½®ä¸ºMemoryå­˜å‚¨å¼•æ“ï¼Œåˆ†ææŸ¥è¯¢æ¡ä»¶ä¸ºid&lt;10çš„SQLï¼Œå¯ä»¥å‘ç°æ²¡æœ‰ä½¿ç”¨åˆ°ç´¢å¼•ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/d0/8eaac54829f3c99337e481d833a93dd0.jpg?wh=1986*310\" alt=\"\"></p><p>å¦‚æœæ˜¯ä»¥%å¼€å¤´çš„LIKEæŸ¥è¯¢å°†æ— æ³•åˆ©ç”¨èŠ‚ç‚¹æŸ¥è¯¢æ•°æ®ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0b/bb/0b20dbd8274be269779989b3df546dbb.jpg?wh=1932*376\" alt=\"\"></p><p>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨å¤åˆç´¢å¼•æ—¶ï¼Œéœ€è¦ä½¿ç”¨ç´¢å¼•ä¸­çš„æœ€å·¦è¾¹çš„åˆ—è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰èƒ½ä½¿ç”¨åˆ°å¤åˆç´¢å¼•ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨orderè¡¨ä¸­å»ºç«‹ä¸€ä¸ªå¤åˆç´¢å¼•idx_user_order_status(<code>order_no</code>, <code>status</code>, <code>user_id</code>)ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨order_noã€order_no+statusã€order_no+status+user_idä»¥åŠorder_no+user_idç»„åˆæŸ¥è¯¢ï¼Œåˆ™èƒ½åˆ©ç”¨åˆ°ç´¢å¼•ï¼›è€Œå¦‚æœæˆ‘ä»¬ç”¨statusã€status+user_idæŸ¥è¯¢ï¼Œå°†æ— æ³•ä½¿ç”¨åˆ°ç´¢å¼•ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸å¬è¿‡çš„æœ€å·¦åŒ¹é…åŸåˆ™ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4c/f0/4cebb097ea9a1d2db2c3cfc98bf611f0.jpg?wh=2122*302\" alt=\"\"></p><p><img src=\"https://static001.geekbang.org/resource/image/18/65/18b7427c6d7e65821284fe90ec461565.jpg?wh=2202*302\" alt=\"\"></p><p>å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨orï¼Œä¸”orçš„å‰åæ¡ä»¶ä¸­æœ‰ä¸€ä¸ªåˆ—æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ä½¿ç”¨åˆ°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2b/35/2b8f194d32bf2387264d50258c1f2235.jpg?wh=2236*308\" alt=\"\"></p><p>æ‰€ä»¥ï¼Œä½ æ‡‚äº†å—ï¼Ÿä½œä¸ºä¸€åå¼€å‘äººå‘˜ï¼Œå¦‚æœæ²¡æœ‰ç†Ÿæ‚‰MySQLï¼Œç‰¹åˆ«æ˜¯MySQLç´¢å¼•çš„åŸºç¡€çŸ¥è¯†ï¼Œå¾ˆå¤šæ—¶å€™éƒ½å°†è¢«DBAæ‰¹è¯„åˆ°æ€€ç–‘äººç”Ÿã€‚</p><h2>æ€»ç»“</h2><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹ æƒ¯ä½¿ç”¨é»˜è®¤çš„ InnoDB ä½œä¸ºè¡¨å­˜å‚¨å¼•æ“ã€‚åœ¨ä½¿ç”¨InnoDBä½œä¸ºå­˜å‚¨å¼•æ“æ—¶ï¼Œåˆ›å»ºçš„ç´¢å¼•é»˜è®¤ä¸ºB+æ ‘æ•°æ®ç»“æ„ï¼Œå¦‚æœæ˜¯ä¸»é”®ç´¢å¼•ï¼Œåˆ™å±äºèšç°‡ç´¢å¼•ï¼Œéä¸»é”®ç´¢å¼•åˆ™å±äºè¾…åŠ©ç´¢å¼•ã€‚åŸºäºä¸»é”®æŸ¥è¯¢å¯ä»¥ç›´æ¥è·å–åˆ°è¡Œä¿¡æ¯ï¼Œè€ŒåŸºäºè¾…åŠ©ç´¢å¼•ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œåˆ™éœ€è¦è¿›è¡Œå›è¡¨ï¼Œç„¶åå†é€šè¿‡ä¸»é”®ç´¢å¼•è·å–åˆ°æ•°æ®ã€‚</p><p>å¦‚æœåªæ˜¯æŸ¥è¯¢ä¸€åˆ—æˆ–å°‘éƒ¨åˆ†åˆ—çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¦†ç›–ç´¢å¼•æ¥é¿å…å›è¡¨ã€‚è¦†ç›–ç´¢å¼•åªéœ€è¦è¯»å–ç´¢å¼•ï¼Œä¸”ç”±äºç´¢å¼•æ˜¯é¡ºåºå­˜å‚¨ï¼Œå¯¹äºèŒƒå›´æˆ–æ’åºæŸ¥è¯¢æ¥è¯´ï¼Œå¯ä»¥æå¤§åœ°æå°‘ç£ç›˜I/Oæ“ä½œã€‚</p><p>é™¤äº†äº†è§£ç´¢å¼•çš„å…·ä½“å®ç°å’Œä¸€äº›ç‰¹æ€§ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µå‘ç”Ÿã€‚å¦‚æœè§‰å¾—è¿™äº›è§„åˆ™å¤ªå¤šï¼Œéš¾ä»¥è®°ä½ï¼Œæˆ‘ä»¬å°±è¦å…»æˆç»å¸¸æ£€æŸ¥SQLæ‰§è¡Œè®¡åˆ’çš„ä¹ æƒ¯ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¢å•è¡¨order_detailï¼Œå…¶ä¸­æœ‰ä¸»é”®idã€ä¸»è®¢å•order_idã€å•†å“skuç­‰å­—æ®µï¼Œå…¶ä¸­è¯¥è¡¨æœ‰ä¸»é”®ç´¢å¼•ã€ä¸»è®¢å•idç´¢å¼•ã€‚</p><p>ç°åœ¨æœ‰ä¸€ä¸ªæŸ¥è¯¢è®¢å•è¯¦æƒ…çš„SQLå¦‚ä¸‹ï¼ŒæŸ¥è¯¢è®¢å•å·èŒƒå›´åœ¨5000~10000ï¼Œè¯·é—®è¯¥æŸ¥è¯¢é€‰æ‹©çš„ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆæ–¹å¼å¯ä»¥å¼ºåˆ¶ä½¿ç”¨æˆ‘ä»¬æœŸæœ›çš„ç´¢å¼•å‘¢ï¼Ÿ</p><pre><code>select * from order_detail where order_id between 5000 and 10000ï¼›\n</code></pre><p>æœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„ç­”æ¡ˆã€‚ä¹Ÿæ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€è¯·ä»–ä¸€èµ·è®¨è®ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/bb/67/bbe343640d6b708832c4133ec53ed967.jpg?wh=1110*659\" alt=\"unpreview\"></p>","neighbors":{"left":{"article_title":"34 | MySQLè°ƒä¼˜ä¹‹äº‹åŠ¡ï¼šé«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®åº“äº‹åŠ¡è°ƒä¼˜","id":114194},"right":{"article_title":"36 | è®°ä¸€æ¬¡çº¿ä¸ŠSQLæ­»é”äº‹æ•…ï¼šå¦‚ä½•é¿å…æ­»é”ï¼Ÿ","id":117247}},"comments":[{"had_liked":false,"id":122530,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1565418198,"is_pvip":false,"replies":[{"id":"45095","content":"å› ä¸ºorder_idç´¢å¼•ä¸èƒ½è¦†ç›–æˆ‘ä»¬è¦æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å¯¹order_idæŸ¥è¯¢ä¹‹åè¿˜éœ€è¦ä¸€æ¬¡å›è¡¨æ¥æŸ¥æ‰¾åˆ°æ•´è¡Œæ•°æ®ï¼Œè™½ç„¶order_idç´¢å¼•æ˜¯é¡ºåºå­˜æ”¾çš„ï¼Œä½†æ˜¯ç›¸å¯¹äºä¸»é”®idå­˜æ”¾çš„æ•°æ®é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ï¼Œæ‰€ä»¥å­˜åœ¨æ¯æ¬¡å›è¡¨éƒ½æ˜¯éšæœºè·å–æ•´è¡Œæ•°æ®ï¼Œå¦‚æœåœ¨è·å–å¤§é‡æ•°æ®æ—¶ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è·å–æ•°æ®æ€§èƒ½è‚¯å®šæ˜¯ä¸ç†æƒ³çš„ã€‚<br><br>æ‰€ä»¥mysqlä¸€èˆ¬åˆ¤æ–­åœ¨æŸ¥è¯¢è¶…è¿‡æ•´ä¸ªè¡¨20%çš„æ•°æ®æ—¶ï¼Œå°±ä¼šè€ƒè™‘ä½¿ç”¨èšæ—ç´¢å¼•æ¥æŸ¥æ‰¾æ•°æ®ï¼Œè¿™ç§æ–¹å¼é¡ºåºè¯»å–æ•°æ®çš„å¯èƒ½æ€§è¦å¤§äºä½¿ç”¨è¾…åŠ©ç´¢å¼•çš„éšæœºè¯»ã€‚<br><br>åœ¨æŸ¥è¯¢å°‘é‡æ•°æ®çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¾…åŠ©ç´¢å¼•æ€§èƒ½æ›´åŠ ï¼Œè€ŒæŸ¥è¯¢å¤§é‡æ•°æ®æ—¶ï¼Œå°±æœªå¿…äº†ã€‚<br><br>å¦‚æœæˆ‘ä»¬å‘ç°åœ¨æŸ¥è¯¢ä¸€å®šé‡æ•°æ®ä½¿ç”¨è¾…åŠ©ç´¢å¼•è¦æ¯”ä¸»é”®ç´¢å¼•å¿«ï¼Œè€Œæ•°æ®åº“åˆæ²¡æœ‰æŒ‰ç…§æˆ‘ä»¬æœŸæœ›çš„å»ä½¿ç”¨è¾…åŠ©ç´¢å¼•ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥é€šè¿‡å­æŸ¥è¯¢æˆ–force indexæ¥å¼ºåˆ¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565574445,"ip_address":"","comment_id":122530,"utype":1}],"discussion_count":5,"race_medal":0,"score":"297918161622","product_id":100028001,"comment_content":"å›ç­”è€å¸ˆé—®é¢˜ï¼š<br>æŒ‰ç…§è€å¸ˆçš„æ“ä½œäº†ä¸€éï¼Œå®éªŒå°éƒ¨åˆ†åŒºé—´æ˜¯ä¼šèµ°order_idç´¢å¼•çš„ï¼Œä½†æ˜¯æŸ¥è¯¢èŒƒå›´ç»§ç»­å¢å¤§ ï¼Œåè€Œä¸èµ°ç´¢å¼•è€Œæ˜¯å…¨è¡¨æ‰«æï¼Œå¤§æ¦‚æˆ‘ä¼°æ‘¸ç€çš„æ˜¯å°äºå…¨è¡¨5åˆ†ä¹‹ä¸€åŒºé—´èƒ½å¤Ÿèµ°ç´¢å¼•ï¼Œè¶…è¿‡5åˆ†ä¹‹ä¸€ä¼šå…¨è¡¨æ‰«æï¼Œå¯ä»¥ä½¿ç”¨force indexï¼ˆç´¢å¼•åï¼‰å¼ºåˆ¶ä½¿ç”¨è¯¥ç´¢å¼•ï¼Œè¿™å°±æ˜¯æœ‰äº›sqlè¡¨å¼€å§‹è·‘çš„æŒºå¿«çš„ï¼Œåé¢è¶Šæ¥è¶Šæ…¢çš„åŸå› å§ã€‚ã€‚ä½†ä¸æ¸…æ¥šmysqlä¼˜åŒ–å™¨ä¸ºå•¥è¦è¿™æ ·é€‰æ‹©ï¼Œå¸Œæœ›è€å¸ˆè§£æƒ‘ï¼Ÿ","like_count":70,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462294,"discussion_content":"å› ä¸ºorder_idç´¢å¼•ä¸èƒ½è¦†ç›–æˆ‘ä»¬è¦æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å¯¹order_idæŸ¥è¯¢ä¹‹åè¿˜éœ€è¦ä¸€æ¬¡å›è¡¨æ¥æŸ¥æ‰¾åˆ°æ•´è¡Œæ•°æ®ï¼Œè™½ç„¶order_idç´¢å¼•æ˜¯é¡ºåºå­˜æ”¾çš„ï¼Œä½†æ˜¯ç›¸å¯¹äºä¸»é”®idå­˜æ”¾çš„æ•°æ®é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ï¼Œæ‰€ä»¥å­˜åœ¨æ¯æ¬¡å›è¡¨éƒ½æ˜¯éšæœºè·å–æ•´è¡Œæ•°æ®ï¼Œå¦‚æœåœ¨è·å–å¤§é‡æ•°æ®æ—¶ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è·å–æ•°æ®æ€§èƒ½è‚¯å®šæ˜¯ä¸ç†æƒ³çš„ã€‚\n\næ‰€ä»¥mysqlä¸€èˆ¬åˆ¤æ–­åœ¨æŸ¥è¯¢è¶…è¿‡æ•´ä¸ªè¡¨20%çš„æ•°æ®æ—¶ï¼Œå°±ä¼šè€ƒè™‘ä½¿ç”¨èšæ—ç´¢å¼•æ¥æŸ¥æ‰¾æ•°æ®ï¼Œè¿™ç§æ–¹å¼é¡ºåºè¯»å–æ•°æ®çš„å¯èƒ½æ€§è¦å¤§äºä½¿ç”¨è¾…åŠ©ç´¢å¼•çš„éšæœºè¯»ã€‚\n\nåœ¨æŸ¥è¯¢å°‘é‡æ•°æ®çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¾…åŠ©ç´¢å¼•æ€§èƒ½æ›´åŠ ï¼Œè€ŒæŸ¥è¯¢å¤§é‡æ•°æ®æ—¶ï¼Œå°±æœªå¿…äº†ã€‚\n\nå¦‚æœæˆ‘ä»¬å‘ç°åœ¨æŸ¥è¯¢ä¸€å®šé‡æ•°æ®ä½¿ç”¨è¾…åŠ©ç´¢å¼•è¦æ¯”ä¸»é”®ç´¢å¼•å¿«ï¼Œè€Œæ•°æ®åº“åˆæ²¡æœ‰æŒ‰ç…§æˆ‘ä»¬æœŸæœ›çš„å»ä½¿ç”¨è¾…åŠ©ç´¢å¼•ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥é€šè¿‡å­æŸ¥è¯¢æˆ–force indexæ¥å¼ºåˆ¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565574445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1928441,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/cfNtHoAbHvia1O0jIopiafYbnppEPiawgicKa8vdI2FxMMEdqORB4VLzkYTuGJGA7HibustnU0hDTOD7YSDAWuxhmrg/132","nickname":"Geek_299a34","note":"","ucode":"79AECE06F08E87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308090,"discussion_content":"ä¼˜åŒ–å™¨æ ¹æ®æˆæœ¬è€ƒè™‘èµ°ä¸èµ°ç´¢å¼•å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600844260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1451141,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIu1n1DhUGGKdbP3ib8aoBDIbzaDXM9YzyowcJDTnCOLNJc3CP6dCYVmibHe7LMK37WXSicsFMicLuLBw/132","nickname":"Geek__ad4af7fe01f4","note":"","ucode":"C911D3E120964E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6375,"discussion_content":"è¯·é—®è€å¸ˆï¼Œæ—¢ç„¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•æ•ˆç‡ä½ï¼Œmysqlé»˜è®¤è¶…å‡º20%åˆä½¿ç”¨ä¸»é”®ç´¢å¼•ä¼˜åŒ–ï¼Œè€Œä¼˜åŒ–çš„æ•ˆæœåˆå˜ä½ï¼Œä¸ºä½•è¿˜è¦å¼ºåˆ¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•ï¼Ÿ\n\nè¿™é‡Œå¼ºåˆ¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•çš„ä¼˜åŒ– å’Œä¸‹é¢æ‚¨çš„æè¿°ä¸æ˜¯å†²çªå—ï¼Ÿ\n\nå› ä¸ºorder_idç´¢å¼•ä¸èƒ½è¦†ç›–æˆ‘ä»¬è¦æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å¯¹order_idæŸ¥è¯¢ä¹‹åè¿˜éœ€è¦ä¸€æ¬¡å›è¡¨æ¥æŸ¥æ‰¾åˆ°æ•´è¡Œæ•°æ®ï¼Œè™½ç„¶order_idç´¢å¼•æ˜¯é¡ºåºå­˜æ”¾çš„ï¼Œä½†æ˜¯ç›¸å¯¹äºä¸»é”®idå­˜æ”¾çš„æ•°æ®é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ï¼Œæ‰€ä»¥å­˜åœ¨æ¯æ¬¡å›è¡¨éƒ½æ˜¯éšæœºè·å–æ•´è¡Œæ•°æ®ï¼Œå¦‚æœåœ¨è·å–å¤§é‡æ•°æ®æ—¶ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è·å–æ•°æ®æ€§èƒ½è‚¯å®šæ˜¯ä¸ç†æƒ³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566873294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1451141,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIu1n1DhUGGKdbP3ib8aoBDIbzaDXM9YzyowcJDTnCOLNJc3CP6dCYVmibHe7LMK37WXSicsFMicLuLBw/132","nickname":"Geek__ad4af7fe01f4","note":"","ucode":"C911D3E120964E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306483,"discussion_content":"ä¼˜åŒ–å™¨çš„ä¼°ç®—ç»“æœæ˜¯è¿™æ ·ï¼Œæ‰€ä»¥æ‰ä¸èµ°order_idç´¢å¼•ï¼Œå…¶å®order_idç´¢å¼•æ•ˆæœå¥½å¾—å¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600300256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6375,"ip_address":""},"score":306483,"extra":""}]},{"author":{"id":1211223,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","nickname":"QQæ€ª","note":"","ucode":"1A39B8433D9208","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4593,"discussion_content":"è€å¸ˆ666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565583149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122440,"user_name":"CCC","can_delete":false,"product_type":"c1","uid":1259814,"ip_address":"","ucode":"1608E84D2F0655","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/26/61e46afe.jpg","comment_is_top":false,"comment_ctime":1565369070,"is_pvip":false,"replies":[{"id":"45096","content":"å¯¹çš„ï¼Œç‚¹èµè¡¥å……","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565574483,"ip_address":"","comment_id":122440,"utype":1}],"discussion_count":1,"race_medal":0,"score":"91759682286","product_id":100028001,"comment_content":"å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°æ“ä½œæˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¹Ÿä¼šå¯¼è‡´ç´¢å¼•çš„å¤±æ•ˆ","like_count":22,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462253,"discussion_content":"å¯¹çš„ï¼Œç‚¹èµè¡¥å……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565574483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122739,"user_name":"Loubobooo","can_delete":false,"product_type":"c1","uid":1108306,"ip_address":"","ucode":"7B2543A80EBDEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/52/aa3be800.jpg","comment_is_top":false,"comment_ctime":1565510013,"is_pvip":false,"replies":[{"id":"45089","content":"æ€è·¯æ˜¯å¯¹çš„ï¼Œè¿™ç§æ–¹å¼å¯ä»¥è§£å†³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565573702,"ip_address":"","comment_id":122739,"utype":1}],"discussion_count":3,"race_medal":0,"score":"74579954045","product_id":100028001,"comment_content":"æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œå¯ä»¥åˆ©ç”¨å­æŸ¥è¯¢å»å‡å°‘å›è¡¨æ“ä½œï¼Œæ—¢ç„¶æœ‰ä¸»é”®è‡ªå¢idï¼Œä¾¿å¯ä»¥åˆ©ç”¨èšç°‡ç´¢å¼•çš„ä¼˜åŠ¿æ¥å¼ºåˆ¶èµ°ç´¢å¼•ã€‚ä»£ç æ–¹æ³•å¦‚ä¸‹ï¼šselect * from order_detail where id in (select id from order_detail where order_id between 5000 and 10000)","like_count":17,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462382,"discussion_content":"æ€è·¯æ˜¯å¯¹çš„ï¼Œè¿™ç§æ–¹å¼å¯ä»¥è§£å†³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565573702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2922769,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/99/11/12ef5f6d.jpg","nickname":"OUu","note":"","ucode":"06E84F52B1619E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565776,"discussion_content":"inåè¾¹çš„èŒƒå›´ä¸èƒ½å¤ªå¤§ï¼Œä¸å®šä¼šèµ°ç´¢å¼•ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650542015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2742520,"avatar":"https://static001.geekbang.org/account/avatar/00/29/d8/f8/a775cde7.jpg","nickname":"å¤ªé˜³ä¸å†°","note":"","ucode":"C2B97279BD66C7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556255,"discussion_content":"æ„Ÿè§‰è¿™ç§æ–¹å¼ä¸å°±æ˜¯å›è¡¨çš„æ‰‹åŠ¨ç‰ˆä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647265068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138329,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1570166166,"is_pvip":false,"replies":[{"id":"53306","content":"åŒºåˆ«åœ¨äºèšç°‡ç´¢å¼•å­˜å‚¨äº†å…¶ä»–æ•°æ®ï¼Œè€Œè¾…åŠ©ç´¢å¼•åªä¿å­˜äº†ç´¢å¼•åˆ—å’Œä¸»é”®ï¼Œæ‰€ä»¥é€šè¿‡æŸ¥è¯¢è¾…åŠ©ç´¢å¼•ç»Ÿè®¡è¡Œæ£€ç´¢çš„æ•°æ®é‡ä¼šæ›´å°‘ï¼ŒI&#47;Oæ“ä½œä¼šæ›´å°‘","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1570345271,"ip_address":"","comment_id":138329,"utype":1}],"discussion_count":2,"race_medal":0,"score":"57404741014","product_id":100028001,"comment_content":"â€å¦‚æœä¸å­˜åœ¨è¾…åŠ©ç´¢å¼•ï¼Œæ­¤æ—¶ä¼šé€šè¿‡æŸ¥è¯¢èšç°‡ç´¢å¼•æ¥ç»Ÿè®¡è¡Œæ•°ï¼Œå¦‚æœæ­¤æ—¶æ­£å¥½å­˜åœ¨ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼Œåˆ™ä¼šé€šè¿‡æŸ¥è¯¢è¾…åŠ©ç´¢å¼•æ¥ç»Ÿè®¡è¡Œæ•°ï¼Œå‡å°‘ I&#47;O æ“ä½œã€‚â€œ<br>è¿™æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿéƒ½æ˜¯é€šè¿‡ç´¢å¼•ç»Ÿè®¡è¡Œæ•°","like_count":13,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469488,"discussion_content":"åŒºåˆ«åœ¨äºèšç°‡ç´¢å¼•å­˜å‚¨äº†å…¶ä»–æ•°æ®ï¼Œè€Œè¾…åŠ©ç´¢å¼•åªä¿å­˜äº†ç´¢å¼•åˆ—å’Œä¸»é”®ï¼Œæ‰€ä»¥é€šè¿‡æŸ¥è¯¢è¾…åŠ©ç´¢å¼•ç»Ÿè®¡è¡Œæ£€ç´¢çš„æ•°æ®é‡ä¼šæ›´å°‘ï¼ŒI/Oæ“ä½œä¼šæ›´å°‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570345271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306482,"discussion_content":"è¿™ä¸ªè¦çœ‹æ€»æ•°æ®é‡äº†ï¼Œæ•°æ®é‡å¤§äº†ä»¥åæ‰æ˜¯è¿™ä¸ªæ•ˆæœï¼›å…¶å®æƒ³æƒ³æ•°æ®é‡å°çš„æ—¶å€™ä¹Ÿä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600300187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122603,"user_name":"å¼ å­¦ç£Š","can_delete":false,"product_type":"c1","uid":1250029,"ip_address":"","ucode":"F545F384A6F1E1","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotSSnZic41tGkbflx0ogIg3ia6g2muFY1hCgosL2t3icZm7I8Ax1hcv1jNgr6vrZ53dpBuGhaoc6DKg/132","comment_is_top":false,"comment_ctime":1565432778,"is_pvip":false,"replies":[{"id":"45090","content":"åˆ†æåˆ°ä½ï¼Œç­”æ¡ˆæ­£ç¡®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565573823,"ip_address":"","comment_id":122603,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57400007626","product_id":100028001,"comment_content":"ç”±äºæ˜¯select *æ“ä½œï¼Œæ‰€ä»¥æ¯æ¡è®°å½•éƒ½éœ€è¿›è¡Œå›è¡¨ï¼Œå½“serverå±‚åˆ†æå™¨å‘ç°betweençš„èŒƒå›´å¤ªå¤§æ—¶ï¼Œä½¿ç”¨è¾…åŠ©ç´¢å¼•å­˜åœ¨å¤§é‡å›è¡¨æ“ä½œï¼Œæ‰€ä»¥è§‰å¾—å¾—ä¸å¿å¤±ï¼Œæ•…è€Œç›´æ¥ä½¿ç”¨ä¸»é”®ç´¢å¼•ã€‚å¦‚æœæƒ³ä½¿ç”¨æˆ‘ä»¬æœŸæœ›çš„ç´¢å¼•ï¼Œéœ€è¦ç»™serverå±‚åˆ†æå™¨ä¸€ä¸ªhintï¼Œforce index(idx_order_id)","like_count":13,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462327,"discussion_content":"åˆ†æåˆ°ä½ï¼Œç­”æ¡ˆæ­£ç¡®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565573823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133601,"user_name":"man1s","can_delete":false,"product_type":"c1","uid":1466953,"ip_address":"","ucode":"FFDB6B52F65A1B","user_header":"https://static001.geekbang.org/account/avatar/00/16/62/49/6332c99b.jpg","comment_is_top":false,"comment_ctime":1568619093,"is_pvip":false,"replies":[{"id":"51393","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568721237,"ip_address":"","comment_id":133601,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27338422869","product_id":100028001,"comment_content":"èµ°ä¸»é”®ç´¢å¼•ï¼Œä¼˜åŒ–å™¨è®¤ä¸º5000æ•°æ®+å›è¡¨5000æ¬¡æ€§èƒ½æ¶ˆè€—è¦å¤§äºå…¨è¡¨æ‰«æ<br>force index ","like_count":6,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467444,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568721237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186444,"user_name":"è€ƒä¼‘","can_delete":false,"product_type":"c1","uid":1053955,"ip_address":"","ucode":"968DFC00D6D0CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","comment_is_top":false,"comment_ctime":1583845981,"is_pvip":false,"replies":[{"id":"72176","content":"innodbä¸èƒ½æ‰‹åŠ¨è®¾ç½®å“ˆå¸Œç´¢å¼•ï¼Œä½†æœ‰è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å¦‚æœå‘ç°æ ‘çš„æŸ¥è¯¢è·¯å¾„å¤ªé•¿æ—¶ï¼Œä¼šè®°å½•åˆ°ä¸€ä¸ªå“ˆå¸Œç¼“å­˜ä¸­ï¼Œè¿™ä¸ªæ—¶å€™ä¼šç”¨åˆ°å“ˆå¸Œç´¢å¼•ã€‚<br><br>å“ˆå¸Œç´¢å¼•åœ¨å…³é”®å­—æŸ¥è¯¢æ—¶éå¸¸å¿«ï¼Œä½†ä¹Ÿæœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œä¾‹å¦‚æ— æ³•è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ã€æ— æ³•æ’åºç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1584013835,"ip_address":"","comment_id":186444,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23058682461","product_id":100028001,"comment_content":"ä¸ºä»€ä¹ˆinnodbå­˜å‚¨å¼•æ“æ²¡æœ‰æ”¯æŒå“ˆå¸Œç´¢å¼•ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486756,"discussion_content":"innodbä¸èƒ½æ‰‹åŠ¨è®¾ç½®å“ˆå¸Œç´¢å¼•ï¼Œä½†æœ‰è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å¦‚æœå‘ç°æ ‘çš„æŸ¥è¯¢è·¯å¾„å¤ªé•¿æ—¶ï¼Œä¼šè®°å½•åˆ°ä¸€ä¸ªå“ˆå¸Œç¼“å­˜ä¸­ï¼Œè¿™ä¸ªæ—¶å€™ä¼šç”¨åˆ°å“ˆå¸Œç´¢å¼•ã€‚\n\nå“ˆå¸Œç´¢å¼•åœ¨å…³é”®å­—æŸ¥è¯¢æ—¶éå¸¸å¿«ï¼Œä½†ä¹Ÿæœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œä¾‹å¦‚æ— æ³•è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ã€æ— æ³•æ’åºç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584013835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159129,"user_name":"æŸã€ î‰","can_delete":false,"product_type":"c1","uid":1221247,"ip_address":"","ucode":"44360946CCAC8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/a2/7f/cf86eef9.jpg","comment_is_top":false,"comment_ctime":1575544543,"is_pvip":false,"replies":[{"id":"61471","content":"èº«ä»½è¯å‰å‡ ä½ä¸€èˆ¬åœ¨ç›¸åŒåŸå¸‚æˆ–çœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä½œä¸ºå‰ç¼€ç´¢å¼•åŒºåˆ†åº¦ä¸å¤§ï¼Œå¦‚æœå€’åºå­˜å‚¨ï¼Œä»¥åŸæ¥åå…­ä½ä½œä¸ºé¦–ä½åŒºåˆ†åº¦æ›´å¤§ï¼Œalert table xxx add index index_idno(idno(6));","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1576153634,"ip_address":"","comment_id":159129,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23050381023","product_id":100028001,"comment_content":"ä½¿ç”¨æŸä¸ªå­—æ®µä¸­å­—ç¬¦ä¸²çš„å‰å‡ ä¸ªå­—ç¬¦å»ºç«‹ç´¢å¼•ï¼Ÿè¿™å¥ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œèƒ½å¦ç»†è®²ä¸€ä¸‹ï¼Œèƒ½å¦ä»¥èº«ä»½è¯è¿™ä¸ªå­—æ®µä½œä¸ªæ —å­ï¼Ÿ<br>","like_count":5,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476961,"discussion_content":"èº«ä»½è¯å‰å‡ ä½ä¸€èˆ¬åœ¨ç›¸åŒåŸå¸‚æˆ–çœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä½œä¸ºå‰ç¼€ç´¢å¼•åŒºåˆ†åº¦ä¸å¤§ï¼Œå¦‚æœå€’åºå­˜å‚¨ï¼Œä»¥åŸæ¥åå…­ä½ä½œä¸ºé¦–ä½åŒºåˆ†åº¦æ›´å¤§ï¼Œalert table xxx add index index_idno(idno(6));","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576153634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306484,"discussion_content":"ä¹Ÿå¯ä»¥å€’ç€å­˜ åšç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600300375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123691,"user_name":"Charles","can_delete":false,"product_type":"c1","uid":1027892,"ip_address":"","ucode":"F0605C817C36D1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/34/c7081824.jpg","comment_is_top":false,"comment_ctime":1565743963,"is_pvip":false,"replies":[{"id":"51151","content":"å›è¡¨å°±ç›¸å½“äºä¸¤æ¬¡ç´¢å¼•æ ‘æ‰«ææ“ä½œäº†ï¼Œè€Œä¸»é”®æŸ¥è¯¢åªæœ‰ä¸€æ¬¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568541878,"ip_address":"","comment_id":123691,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23040580443","product_id":100028001,"comment_content":"æƒ³é—®ä¸‹è€å¸ˆä¸ºä»€ä¹ˆå›è¡¨æŸ¥è¯¢çš„é€Ÿåº¦ä¼šæ…¢äºç›´æ¥ç”¨ä¸»é”®æŸ¥è¯¢ï¼Œå› ä¸ºå›è¡¨ä¹Ÿæ˜¯ä½¿ç”¨ä¸»é”®IDå»æŸ¥è¯¢çš„ï¼Œå°±ç®—æŸ¥è¯¢çš„æ•°æ®é‡å¤§ï¼Œç”¨ä¸ç”¨å­æŸ¥è¯¢éƒ½æ˜¯ä½¿ç”¨ä¸»é”®IDå»å›è¡¨æˆ–æ˜¯æŸ¥è¯¢ï¼Œé€Ÿåº¦åº”è¯¥ä¸€æ ·å§","like_count":5,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462772,"discussion_content":"å›è¡¨å°±ç›¸å½“äºä¸¤æ¬¡ç´¢å¼•æ ‘æ‰«ææ“ä½œäº†ï¼Œè€Œä¸»é”®æŸ¥è¯¢åªæœ‰ä¸€æ¬¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568541878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101929,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg","nickname":"å¼ å¾·","note":"","ucode":"31FE63E8725EFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6961,"discussion_content":"è¿™ä¸ªæ˜¯å› ä¸ºå¤šè®¿é—®äº†ä¸€æ¬¡ç£ç›˜  è€Œä¸”æ¯æ¬¡å›è¡¨éƒ½æ˜¯ç£ç›˜çš„éšæœºIO","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1567222941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1926759,"avatar":"","nickname":"èµµç‰é—¯","note":"","ucode":"82E85AC08206EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1101929,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg","nickname":"å¼ å¾·","note":"","ucode":"31FE63E8725EFC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284560,"discussion_content":"æˆ‘è®¤ä¸ºä¸æ˜¯å¤šäº†ä¸€æ¬¡å›è¡¨å•Šï¼Œæ˜¯å¤šäº†å¾ˆå¤šæ¬¡å•Šï¼Œæ¯æ‹¿åˆ°ä¸€ä¸ªorder_idéƒ½éœ€è¦æ ¹æ®å…¶å­˜å‚¨çš„ä¸»é”®å›è¡¨æŸ¥è¯¢æ•´è¡Œæ•°æ®ã€‚è€Œå­æŸ¥è¯¢æ˜¯å…ˆæŠŠæ‰€æœ‰çš„ä¸»é”®éƒ½æ‹¿åˆ°å†ä¸€èµ·å›è¡¨æŸ¥è¯¢ï¼Œåªéœ€è¦ä¸€æ¬¡å›è¡¨ï¼Œæˆ‘è¯´çš„å¯¹å—ï¼Ÿï¼Ÿï¼Ÿï¼Ÿä½ æ˜¯æ€ä¹ˆæƒ³çš„åªæ˜¯å¤šäº†ä¸€æ¬¡è€Œå·²å‘¢ï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592556245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6961,"ip_address":""},"score":284560,"extra":""}]}]},{"had_liked":false,"id":172190,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1579105693,"is_pvip":false,"replies":[{"id":"67214","content":"å¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªæ²¡æœ‰ç´¢å¼•ï¼Œè¿™ä¸ªæ²¡æœ‰ç´¢å¼•çš„åˆ—å°±ä¼šæ¶‰åŠåˆ°å…¨è¡¨æ‰«æ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1579523092,"ip_address":"","comment_id":172190,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18758974877","product_id":100028001,"comment_content":"å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨ orï¼Œä¸” or çš„å‰åæ¡ä»¶ä¸­æœ‰ä¸€ä¸ªåˆ—æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ä½¿ç”¨åˆ°ã€‚æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæ¶‰åŠåˆ°çš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ç”¨åˆ°ï¼ŒåŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481657,"discussion_content":"å¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªæ²¡æœ‰ç´¢å¼•ï¼Œè¿™ä¸ªæ²¡æœ‰ç´¢å¼•çš„åˆ—å°±ä¼šæ¶‰åŠåˆ°å…¨è¡¨æ‰«æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579523092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186361,"user_name":"å¼ æŒ¯å®‡","can_delete":false,"product_type":"c1","uid":1130691,"ip_address":"","ucode":"7A6FD7294E65FF","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/c3/e545ba80.jpg","comment_is_top":false,"comment_ctime":1583829963,"is_pvip":false,"replies":[{"id":"72177","content":"ä¸ºäº†é¿å…æ–‡ä»¶æ’åºçš„å‘ç”Ÿã€‚å› ä¸ºæŸ¥è¯¢æ—¶æˆ‘ä»¬åªèƒ½ç”¨åˆ°statusç´¢å¼•ï¼Œå¦‚æœè¦å¯¹create_timeè¿›è¡Œæ’åºï¼Œåˆ™éœ€è¦ä½¿ç”¨æ–‡ä»¶æ’åºfilesortã€‚<br><br>filesortæ˜¯é€šè¿‡ç›¸åº”çš„æ’åºç®—æ³•å°†å–å¾—çš„æ•°æ®åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿåˆ™ä¼šä½¿ç”¨ç£ç›˜æ–‡ä»¶ä½œä¸ºè¾…åŠ©ã€‚è™½ç„¶åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œfilesortå¹¶ä¸æ˜¯ç‰¹åˆ«æ¶ˆè€—æ€§èƒ½ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é¿å…filesortå°±å°½é‡é¿å…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1584013985,"ip_address":"","comment_id":186361,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14468731851","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæ²¡æ˜ç™½å¼€å¤´é‚£æ®µï¼Œä¸ºä»€ä¹ˆè¦æ·»åŠ  create_time è¿™åˆ—è¿›è¡Œç»„åˆç´¢å¼•å•Š","like_count":4,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486727,"discussion_content":"ä¸ºäº†é¿å…æ–‡ä»¶æ’åºçš„å‘ç”Ÿã€‚å› ä¸ºæŸ¥è¯¢æ—¶æˆ‘ä»¬åªèƒ½ç”¨åˆ°statusç´¢å¼•ï¼Œå¦‚æœè¦å¯¹create_timeè¿›è¡Œæ’åºï¼Œåˆ™éœ€è¦ä½¿ç”¨æ–‡ä»¶æ’åºfilesortã€‚\n\nfilesortæ˜¯é€šè¿‡ç›¸åº”çš„æ’åºç®—æ³•å°†å–å¾—çš„æ•°æ®åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿåˆ™ä¼šä½¿ç”¨ç£ç›˜æ–‡ä»¶ä½œä¸ºè¾…åŠ©ã€‚è™½ç„¶åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œfilesortå¹¶ä¸æ˜¯ç‰¹åˆ«æ¶ˆè€—æ€§èƒ½ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é¿å…filesortå°±å°½é‡é¿å…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584013985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130691,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/c3/e545ba80.jpg","nickname":"å¼ æŒ¯å®‡","note":"","ucode":"7A6FD7294E65FF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203224,"discussion_content":"è°¢è°¢è€å¸ˆè¿™ä¹ˆä¸“ä¸šçš„ç­”å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584014177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171810,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1579016996,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10168951588","product_id":100028001,"comment_content":"order è¡¨ä¸­å»ºç«‹ä¸€ä¸ªå¤åˆç´¢å¼• idx_user_order_status(order_no, status, user_id)ï¼Œä½¿ç”¨ order_no+user_id ç»„åˆæŸ¥è¯¢ï¼Œåªæœ‰order_noä¼šç”¨åˆ°ç´¢å¼•ï¼Œuser_idå¹¶ä¸ä¼š","like_count":2,"discussions":[{"author":{"id":1926759,"avatar":"","nickname":"èµµç‰é—¯","note":"","ucode":"82E85AC08206EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284564,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—ä½ è¯´çš„å¯¹å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592557006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168158,"user_name":"è¡Œè€…","can_delete":false,"product_type":"c1","uid":1618607,"ip_address":"","ucode":"8179D167D99CB9","user_header":"https://static001.geekbang.org/account/avatar/00/18/b2/af/81303f5a.jpg","comment_is_top":false,"comment_ctime":1578022295,"is_pvip":false,"replies":[{"id":"65925","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1578483650,"ip_address":"","comment_id":168158,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10167956887","product_id":100028001,"comment_content":"ç´¢å¼•å¤±æ•ˆä¸€å¥è¯æ€»ç»“ï¼Œå­—æ®µaæœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆåªèƒ½åŒ¹é…å­—æ®µaï¼Œé™¤æ­¤ä¹‹å¤–å‡ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œæ¯”å¦‚æ‰€æœ‰å¯¹å­—æ®µaçš„å‡½æ•°è®¡ç®—ï¼ˆå¦‚reverseã€crc32ï¼‰ï¼Œç±»å‹è½¬æ¢ï¼ˆå¦‚bigintè½¬vacharï¼Œä¹Ÿå°±æ˜¯SQLä¸­æœ‰æ²¡æœ‰å•å¼•å·ï¼‰ï¼Œå‰ç½®æ¨¡ç³Šæœç´¢ï¼ˆlike &quot;%å¼ ä¸‰&quot;ï¼Œå› ä¸ºåç½®æ¨¡ç³ŠåŒ¹é…å¯ä»¥ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼‰ï¼Œwhereå­å¥çš„å¤šæ¡ä»¶ç»„åˆä¸å½“ï¼ˆéœ€è¦æ ¹æ®æƒ…å†µçš„åˆ†ææ˜¯å¦ä¼šç”¨ç´¢å¼•ï¼‰","like_count":2,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480155,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578483650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128349,"user_name":"Geek__ad4af7fe01f4","can_delete":false,"product_type":"c1","uid":1451141,"ip_address":"","ucode":"C911D3E120964E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIu1n1DhUGGKdbP3ib8aoBDIbzaDXM9YzyowcJDTnCOLNJc3CP6dCYVmibHe7LMK37WXSicsFMicLuLBw/132","comment_is_top":false,"comment_ctime":1566873343,"is_pvip":false,"replies":[{"id":"47775","content":"è¿™ä¸ªè·Ÿå…·ä½“åœºæ™¯æœ‰å…³ç³»ï¼Œåœ¨æ•°æ®é‡éå¸¸å¤§çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä½¿ç”¨è¾…åŠ©ç´¢å¼•ä¼šæ•ˆç‡æ›´é«˜äº›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1566956966,"ip_address":"","comment_id":128349,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10156807935","product_id":100028001,"comment_content":"è¯·é—®è€å¸ˆï¼Œæ—¢ç„¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•æ•ˆç‡ä½ï¼Œmysqlé»˜è®¤è¶…å‡º20%åˆä½¿ç”¨ä¸»é”®ç´¢å¼•ä¼˜åŒ–ï¼Œè€Œä¼˜åŒ–çš„æ•ˆæœåˆå˜ä½ï¼Œä¸ºä½•è¿˜è¦å¼ºåˆ¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•ï¼Ÿ<br><br>è¿™é‡Œå¼ºåˆ¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•çš„ä¼˜åŒ– å’Œä¸‹é¢æ‚¨çš„æè¿°ä¸æ˜¯å†²çªå—ï¼Ÿ<br><br>å› ä¸ºorder_idç´¢å¼•ä¸èƒ½è¦†ç›–æˆ‘ä»¬è¦æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å¯¹order_idæŸ¥è¯¢ä¹‹åè¿˜éœ€è¦ä¸€æ¬¡å›è¡¨æ¥æŸ¥æ‰¾åˆ°æ•´è¡Œæ•°æ®ï¼Œè™½ç„¶order_idç´¢å¼•æ˜¯é¡ºåºå­˜æ”¾çš„ï¼Œä½†æ˜¯ç›¸å¯¹äºä¸»é”®idå­˜æ”¾çš„æ•°æ®é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ï¼Œæ‰€ä»¥å­˜åœ¨æ¯æ¬¡å›è¡¨éƒ½æ˜¯éšæœºè·å–æ•´è¡Œæ•°æ®ï¼Œå¦‚æœåœ¨è·å–å¤§é‡æ•°æ®æ—¶ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è·å–æ•°æ®æ€§èƒ½è‚¯å®šæ˜¯ä¸ç†æƒ³","like_count":2,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464911,"discussion_content":"è¿™ä¸ªè·Ÿå…·ä½“åœºæ™¯æœ‰å…³ç³»ï¼Œåœ¨æ•°æ®é‡éå¸¸å¤§çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä½¿ç”¨è¾…åŠ©ç´¢å¼•ä¼šæ•ˆç‡æ›´é«˜äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566956966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171824,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1579019908,"is_pvip":false,"replies":[{"id":"67218","content":"è¿™é‡ŒæŒ‡çš„æ˜¯æ— æ¡ä»¶æœç´¢ï¼Œå¦‚æœæœ‰æ¡ä»¶æœç´¢ï¼Œåˆ™ä¼šæ ¹æ®æœç´¢æ¡ä»¶çš„ç´¢å¼•æ¥ç»Ÿè®¡è¡Œæ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1579523405,"ip_address":"","comment_id":171824,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873987204","product_id":100028001,"comment_content":"SELECT  COUNT(*) æ—¶ï¼Œå¦‚æœä¸å­˜åœ¨è¾…åŠ©ç´¢å¼•ï¼Œæ­¤æ—¶ä¼šé€šè¿‡æŸ¥è¯¢èšç°‡ç´¢å¼•æ¥ç»Ÿè®¡è¡Œæ•°ï¼Œå¦‚æœæ­¤æ—¶æ­£å¥½å­˜åœ¨ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼Œåˆ™ä¼šé€šè¿‡æŸ¥è¯¢è¾…åŠ©ç´¢å¼•æ¥ç»Ÿè®¡è¡Œæ•°ï¼Œå‡å°‘ I&#47;O æ“ä½œã€‚ è¿™é‡Œè¯´çš„æ­£å¥½å­˜åœ¨ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼ŒæŒ‡çš„æ˜¯whereæ¡ä»¶ä¸­æ­£å¥½å­˜åœ¨è¾…åŠ©ç´¢å¼•å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481524,"discussion_content":"è¿™é‡ŒæŒ‡çš„æ˜¯æ— æ¡ä»¶æœç´¢ï¼Œå¦‚æœæœ‰æ¡ä»¶æœç´¢ï¼Œåˆ™ä¼šæ ¹æ®æœç´¢æ¡ä»¶çš„ç´¢å¼•æ¥ç»Ÿè®¡è¡Œæ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579523405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147936,"user_name":"ä¼ ä¼ ä¼ ä¼ ä¼ ä¼ å¥‡","can_delete":false,"product_type":"c1","uid":1515160,"ip_address":"","ucode":"4078C07257ADA0","user_header":"https://static001.geekbang.org/account/avatar/00/17/1e/98/51a2bb5f.jpg","comment_is_top":false,"comment_ctime":1572920246,"is_pvip":false,"replies":[{"id":"74195","content":"è¦†ç›–ç´¢å¼•ä¸­çš„å¶å­èŠ‚ç‚¹æ˜¯ä¸»é”®ç´¢å¼•ï¼Œä½†æ˜¯éå¶å­èŠ‚ç‚¹ä¸­åŒ…å«äº†è¦†ç›–ç´¢å¼•çš„å€¼ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œå›è¡¨æ“ä½œ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1585139894,"ip_address":"","comment_id":147936,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867887542","product_id":100028001,"comment_content":"æ¥æ™šäº†<br>æœ‰ä¸€äº‹ä¸æ˜ï¼Œé€šè¿‡åˆ›å»ºè¦†ç›–ç´¢å¼•ï¼ˆå¦‚æ–‡ä¸­å°†å•†å“ç¼–ç ã€åç§°ã€ä»·æ ¼ä½œä¸ºä¸€ä¸ªç»„åˆç´¢å¼•ï¼‰åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥é¿å…å›è¡¨ã€‚ä½†æ˜¯éä¸»é”®ç´¢å¼•å­˜å‚¨çš„å´æ˜¯ä¸»é”®çš„å€¼ï¼Œå¹¶ä»¥æ­¤æ¥ä½œä¸ºæŒ‡å‘è¡Œçš„æŒ‡é’ˆã€‚åœ¨æŸ¥è¯¢å•†å“ç¼–ç çš„æ—¶å€™ï¼Œæ€ä¹ˆç†è§£é¿å…å›è¡¨å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473344,"discussion_content":"è¦†ç›–ç´¢å¼•ä¸­çš„å¶å­èŠ‚ç‚¹æ˜¯ä¸»é”®ç´¢å¼•ï¼Œä½†æ˜¯éå¶å­èŠ‚ç‚¹ä¸­åŒ…å«äº†è¦†ç›–ç´¢å¼•çš„å€¼ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œå›è¡¨æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585139894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131742,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1567871227,"is_pvip":false,"replies":[{"id":"50649","content":"å¦‚æœä¸idç´¢å¼•çš„æ’åºæ˜¯ä¸€è‡´çš„ï¼Œä¼šèµ°ç´¢å¼•ï¼Œå¯ä»¥åŠ¨æ‰‹å®è·µä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568124815,"ip_address":"","comment_id":131742,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5862838523","product_id":100028001,"comment_content":" è€å¸ˆï¼Œä½ è¿™ä¸ªè¡¨é‡Œçš„order idå’Œidä¸æ˜¯ä¸€èµ·é€’å¢çš„ä¹ˆï¼Ÿå¦‚æœorderidä¹Ÿæ˜¯é€’å¢çš„ï¼Œé‚£æƒ…å†µåˆæ˜¯æ€å‘¢","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466606,"discussion_content":"å¦‚æœä¸idç´¢å¼•çš„æ’åºæ˜¯ä¸€è‡´çš„ï¼Œä¼šèµ°ç´¢å¼•ï¼Œå¯ä»¥åŠ¨æ‰‹å®è·µä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568124815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2742520,"avatar":"https://static001.geekbang.org/account/avatar/00/29/d8/f8/a775cde7.jpg","nickname":"å¤ªé˜³ä¸å†°","note":"","ucode":"C2B97279BD66C7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556256,"discussion_content":"å¦‚æœæ˜¯ä¸€èµ·é€’å¢çš„å°±å¯ä»¥ç”¨ä¸Šæ¬¡é‚£ç§limitçš„æŸ¥è¯¢ä¼˜åŒ–æ–¹å¼å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647265156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123493,"user_name":"æˆ‘è¡Œæˆ‘ç´ ","can_delete":false,"product_type":"c1","uid":1224678,"ip_address":"","ucode":"4C69542FAB0671","user_header":"https://static001.geekbang.org/account/avatar/00/12/af/e6/9c77acff.jpg","comment_is_top":false,"comment_ctime":1565686292,"is_pvip":false,"replies":[{"id":"45306","content":"å®˜ç½‘ç»™å‡ºçš„æ˜¯ä¸æ”¯æŒè‡ªåˆ›å»ºhashæ•°æ®ç»“æ„çš„ç´¢å¼•ï¼Œä½†æ˜¯å®ƒæ˜¯è‡ªé€‚åº”çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸èƒ½äººä¸ºçš„å¹²é¢„ä½¿ç”¨hashç´¢å¼•ã€‚å…·ä½“çš„å¯ä»¥å‚è€ƒå®˜ç½‘ï¼šhttps:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;create-index.html","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565694519,"ip_address":"","comment_id":123493,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860653588","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·é—®ä¸‹InnoDBå¼•æ“ä¸‹ä½¿ç”¨HASHç´¢å¼•ä¹Ÿå¯ä»¥å•Šï¼Œä½†æ˜¯æ–‡ä¸­çš„å›¾InnoDBç´¢å¼•Hashæ˜¯no","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462696,"discussion_content":"å®˜ç½‘ç»™å‡ºçš„æ˜¯ä¸æ”¯æŒè‡ªåˆ›å»ºhashæ•°æ®ç»“æ„çš„ç´¢å¼•ï¼Œä½†æ˜¯å®ƒæ˜¯è‡ªé€‚åº”çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸èƒ½äººä¸ºçš„å¹²é¢„ä½¿ç”¨hashç´¢å¼•ã€‚å…·ä½“çš„å¯ä»¥å‚è€ƒå®˜ç½‘ï¼šhttps://dev.mysql.com/doc/refman/8.0/en/create-index.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565694519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350983,"user_name":"Geek_926921","can_delete":false,"product_type":"c1","uid":2532285,"ip_address":"","ucode":"51C3B0178D77E1","user_header":"","comment_is_top":false,"comment_ctime":1657438422,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657438422","product_id":100028001,"comment_content":"ç´¢å¼•å®ç°å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§<br>1. æ²¡æœ‰éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™<br>2. ä½¿ç”¨ç ´åç´¢å¼•çš„å‡½æ•°<br>3. ç»„åˆç´¢å¼•å¤±æ•ˆ<br>4. å­—æ®µå­˜å‚¨ä¸ºnullï¼Œè¿™ä¸ªæ¯”è¾ƒç‰¹æ®Šï¼Œnullæ˜¯ä¸èµ°ç´¢å¼•çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šDBAè®©æˆ‘ä»¬è®¾è®¡è¡¨çš„æ—¶å€™ç»™é»˜è®¤å€¼ã€‚ä¸€æ˜¯èŠ‚çœå­˜å‚¨ç©ºé—´ï¼ŒäºŒæ˜¯èµ°ç´¢å¼•.<br>5. è¿˜æœ‰æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ä¸ªå‡½æ•°ï¼Œin ï¼Œè¿™é‡Œæµ‹è¯•è¿‡ï¼Œiné‡Œé¢çš„å‚æ•°è¶…è¿‡5ä¸ªå¥½åƒå°±ä¸èµ°ç´¢å¼•äº†ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚","like_count":0},{"had_liked":false,"id":336867,"user_name":"KaitoShy","can_delete":false,"product_type":"c1","uid":1038415,"ip_address":"","ucode":"E2E2E9BD3F5048","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/4f/65abc6f0.jpg","comment_is_top":false,"comment_ctime":1646411493,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646411493","product_id":100028001,"comment_content":"è€å¸ˆ,ä½ å¥½ã€‚çœ‹äº†æ–‡ç« æ”¶ç›ŠåŒªæµ…ã€‚ä½†æˆ‘çœ‹åˆ°â€åœ¨åˆ›å»ºè¡¨æ—¶ï¼Œæ— è®ºä½¿ç”¨ InnoDB è¿˜æ˜¯ MyISAM å­˜å‚¨å¼•æ“ï¼Œé»˜è®¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªä¸»é”®ç´¢å¼•ï¼Œè€Œåˆ›å»ºçš„ä¸»é”®ç´¢å¼•é»˜è®¤ä½¿ç”¨çš„æ˜¯ B+Tree ç´¢å¼•ã€‚â€æ—¶ï¼Œæƒ³åˆ° MySQL å®˜æ–¹æ–‡æ¡£ä¸­è¯´ï¼Œæ¯ä¸ª InnoDB çš„è¡¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œé€šå¸¸æ¥è¯´èšç°‡ç´¢å¼•å°±æ˜¯ä¸»é”®ç´¢å¼•ã€‚ä½†æ˜¯æœ‰ç§æƒ…å†µæ˜¯ï¼Œæˆ‘åˆ›å»ºè¡¨çš„æ—¶å€™ä¸æŒ‡å®šä¸»é”®å°±ä¸ä¼šå°±ä¸»é”®ç´¢å¼•äº†ï¼Œé‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œèšç°‡ç´¢å¼•å°±æ˜¯ç¬¬ä¸€ä¸ªéç©ºçš„å”¯ä¸€ç´¢å¼•ï¼Œå¦‚æœä¸»é”®ç´¢å¼•å’Œåˆé€‚çš„å”¯ä¸€ç´¢å¼•çš„è¯ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªéšè—çš„èšç°‡ç´¢å¼•ã€‚æ‰€ä»¥çš„æè¿°æ˜¯ä¸æ˜¯ä¸å¤ªå¦¥å½“ï¼Ÿè¯·è€å¸ˆæŒ‡ç‚¹ã€‚https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;5.7&#47;en&#47;innodb-index-types.html","like_count":0},{"had_liked":false,"id":272498,"user_name":"å“¦","can_delete":false,"product_type":"c1","uid":1444469,"ip_address":"","ucode":"A634888525305B","user_header":"https://static001.geekbang.org/account/avatar/00/16/0a/75/24764b3f.jpg","comment_is_top":false,"comment_ctime":1610100092,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610100092","product_id":100028001,"comment_content":"è€å¸ˆï¼Œåœ¨æµ‹è¯•ä½¿ç”¨ statusã€status+user_id æŸ¥è¯¢ï¼Œä»ç„¶èƒ½å¤Ÿä½¿ç”¨ç´¢å¼•æ ‘ï¼Œåªä¸è¿‡type=indexï¼Œæ˜¯å› ä¸ºé«˜ç‰ˆæœ¬mysqlä¼˜åŒ–äº†å—","like_count":1},{"had_liked":false,"id":248749,"user_name":"Javaå’å¢™å·¥ç¨‹å¸ˆ","can_delete":false,"product_type":"c1","uid":1937062,"ip_address":"","ucode":"E76AE44A9C76AE","user_header":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","comment_is_top":false,"comment_ctime":1600300889,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600300889","product_id":100028001,"comment_content":"æ•°æ®é‡å°çš„æ—¶å€™ä¸éœ€è¦ä¼˜åŒ–ï¼Œæ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™åšä¼˜åŒ–æˆæœ¬å¾ˆé«˜ï¼Œæ¯”å¦‚åŠ ç´¢å¼•ï¼›ç´¢å¼•ä¸Šçº¿æœ€å¼€å§‹æ•°æ®é‡åˆå…·è§„æ¨¡çš„æ—¶å€™è¦å¤šçœ‹çœ‹æ•°æ®åº“ï¼Œæ—©ä¼˜åŒ–","like_count":0},{"had_liked":false,"id":243335,"user_name":"éšé£","can_delete":false,"product_type":"c1","uid":1441812,"ip_address":"","ucode":"35C0133563EEB1","user_header":"https://static001.geekbang.org/account/avatar/00/16/00/14/84a976e7.jpg","comment_is_top":false,"comment_ctime":1598064412,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1598064412","product_id":100028001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¹³æ—¶å†™sqlçš„æ—¶å€™ï¼Œç»å¸¸è¦è¿›è¡Œæ—¶é—´èŒƒå›´æŸ¥è¯¢ï¼Œä½†æ˜¯å¯¹æ—¶é—´å­—æ®µç”¨äº†æ—¶é—´è½¬æ¢å‡½æ•°ä¹‹åï¼Œç´¢å¼•å°±ä¼šå¤±æ•ˆï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1039225,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/79/9426c6ce.jpg","nickname":"Super~çªçª","note":"","ucode":"5A0FCD19B24EAF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336432,"discussion_content":"å¯¹å€¼è¿›è¡Œå‡½æ•°æ“ä½œï¼Œä¸è¦å¯¹æ•°æ®åº“å­—æ®µè¿›è¡Œå‡½æ•°æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608595264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228558,"user_name":"wkq2786130","can_delete":false,"product_type":"c1","uid":1256821,"ip_address":"","ucode":"0F3A9DF9928C67","user_header":"https://static001.geekbang.org/account/avatar/00/13/2d/75/e7c29de4.jpg","comment_is_top":false,"comment_ctime":1592734362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592734362","product_id":100028001,"comment_content":"```<br>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨å¤åˆç´¢å¼•æ—¶ï¼Œéœ€è¦ä½¿ç”¨ç´¢å¼•ä¸­çš„æœ€å·¦è¾¹çš„åˆ—è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰èƒ½ä½¿ç”¨åˆ°å¤åˆç´¢å¼•ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨ order è¡¨ä¸­å»ºç«‹ä¸€ä¸ªå¤åˆç´¢å¼• idx_user_order_status(order_no, status, user_id)ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ order_noã€order_no+statusã€order_no+status+user_id ä»¥åŠ order_no+user_id ç»„åˆæŸ¥è¯¢ï¼Œåˆ™èƒ½åˆ©ç”¨åˆ°ç´¢å¼•ï¼›è€Œå¦‚æœæˆ‘ä»¬ç”¨ statusã€status+user_id æŸ¥è¯¢ï¼Œå°†æ— æ³•ä½¿ç”¨åˆ°ç´¢å¼•ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸å¬è¿‡çš„æœ€å·¦åŒ¹é…åŸåˆ™ã€‚<br>```<br>è€å¸ˆï¼Œå’Œä½ ç¡®è®¤ä¸‹ï¼Œæˆ‘è®°å¾—ä¹¦ä¸Šè¯´çš„æ˜¯ order_no+user_id åœ¨æŸ¥è¯¢æ—¶order_noå­—æ®µå¯ä»¥ç”¨åˆ°å¤åˆç´¢å¼• idx_user_order_status(order_no, status, user_id)ï¼Œuser_idç”¨ä¸åˆ°ç´¢å¼•<br>","like_count":0},{"had_liked":false,"id":216770,"user_name":"Geek_521fd2","can_delete":false,"product_type":"c1","uid":1980706,"ip_address":"","ucode":"2D32831FCACBFA","user_header":"","comment_is_top":false,"comment_ctime":1589339817,"is_pvip":false,"replies":[{"id":"80537","content":"SQLæ‰§è¡Œè¿‡ç¨‹ä¸­æ˜¯é€šè¿‡ä¼˜åŒ–å™¨é€‰æ‹©ç´¢å¼•çš„ï¼Œé€šå¸¸æ˜¯åŸºäºæ‰«æè¡Œæ•°ï¼Œå³æ‰¾åˆ°æ‰«æè¡Œæ•°æœ€å°‘çš„ç´¢å¼•ã€‚è€Œæ‰«æè¡Œæ•°é€šå¸¸æ˜¯ç”±COUNT(DISTINCT(field)) &#47; COUNT(field)è®¡ç®—æ‰€å¾—ï¼Œå³åŸºæ•°&#47;æ•°æ®æ€»æ•°ï¼ŒåŸºæ•°ä»£è¡¨ä¸ç›¸åŒå€¼çš„æ•°é‡ï¼Œè€Œè¿™ä¸ªåŸºæ•°ä¹Ÿæ˜¯é€šè¿‡é‡‡æ ·è·å–çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1589617825,"ip_address":"","comment_id":216770,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589339817","product_id":100028001,"comment_content":"sqlæ‰§è¡Œçš„æ—¶å€™å¦‚ä½•é€‰æ‹©è¡¨ä¸­ç´¢å¼•ï¼Œä¼šè‡ªåŠ¨åˆå¹¶å¤šä¸ªå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494942,"discussion_content":"SQLæ‰§è¡Œè¿‡ç¨‹ä¸­æ˜¯é€šè¿‡ä¼˜åŒ–å™¨é€‰æ‹©ç´¢å¼•çš„ï¼Œé€šå¸¸æ˜¯åŸºäºæ‰«æè¡Œæ•°ï¼Œå³æ‰¾åˆ°æ‰«æè¡Œæ•°æœ€å°‘çš„ç´¢å¼•ã€‚è€Œæ‰«æè¡Œæ•°é€šå¸¸æ˜¯ç”±COUNT(DISTINCT(field)) / COUNT(field)è®¡ç®—æ‰€å¾—ï¼Œå³åŸºæ•°/æ•°æ®æ€»æ•°ï¼ŒåŸºæ•°ä»£è¡¨ä¸ç›¸åŒå€¼çš„æ•°é‡ï¼Œè€Œè¿™ä¸ªåŸºæ•°ä¹Ÿæ˜¯é€šè¿‡é‡‡æ ·è·å–çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589617825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199380,"user_name":"10å¹´ä»¥å","can_delete":false,"product_type":"c1","uid":1297421,"ip_address":"","ucode":"FE58CA7E5C2AF9","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/0d/89435926.jpg","comment_is_top":false,"comment_ctime":1585488051,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585488051","product_id":100028001,"comment_content":"mysqlä¼˜åŒ–","like_count":0},{"had_liked":false,"id":171823,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1579019140,"is_pvip":false,"replies":[{"id":"67221","content":"å› ä¸ºè¾…åŠ©ç´¢å¼•order_idç´¢å¼•ä¸èƒ½è¦†ç›–æˆ‘ä»¬è¦æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å¯¹order_idæŸ¥è¯¢ä¹‹åè¿˜éœ€è¦ä¸€æ¬¡å›è¡¨æ¥æŸ¥æ‰¾åˆ°æ•´è¡Œæ•°æ®ï¼Œè™½ç„¶order_idç´¢å¼•æ˜¯é¡ºåºå­˜æ”¾çš„ï¼Œä½†æ˜¯ç›¸å¯¹äºä¸»é”®idå­˜æ”¾çš„æ•°æ®é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ï¼Œæ‰€ä»¥å­˜åœ¨æ¯æ¬¡å›è¡¨éƒ½æ˜¯éšæœºè·å–æ•´è¡Œæ•°æ®ï¼Œå¦‚æœåœ¨è·å–å¤§é‡æ•°æ®æ—¶ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è·å–æ•°æ®æ€§èƒ½è‚¯å®šæ˜¯ä¸ç†æƒ³çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1579524170,"ip_address":"","comment_id":171823,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579019140","product_id":100028001,"comment_content":"åœ¨å¯¹â€œQQæ€ªâ€çš„å›å¤ä¸­ï¼Œè€å¸ˆè¯´ï¼šåœ¨æŸ¥è¯¢å°‘é‡æ•°æ®çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¾…åŠ©ç´¢å¼•æ€§èƒ½æ›´åŠ ï¼Œè€ŒæŸ¥è¯¢å¤§é‡æ•°æ®æ—¶ï¼Œå°±æœªå¿…äº†ã€‚ä¸ºä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481523,"discussion_content":"å› ä¸ºè¾…åŠ©ç´¢å¼•order_idç´¢å¼•ä¸èƒ½è¦†ç›–æˆ‘ä»¬è¦æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å¯¹order_idæŸ¥è¯¢ä¹‹åè¿˜éœ€è¦ä¸€æ¬¡å›è¡¨æ¥æŸ¥æ‰¾åˆ°æ•´è¡Œæ•°æ®ï¼Œè™½ç„¶order_idç´¢å¼•æ˜¯é¡ºåºå­˜æ”¾çš„ï¼Œä½†æ˜¯ç›¸å¯¹äºä¸»é”®idå­˜æ”¾çš„æ•°æ®é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ï¼Œæ‰€ä»¥å­˜åœ¨æ¯æ¬¡å›è¡¨éƒ½æ˜¯éšæœºè·å–æ•´è¡Œæ•°æ®ï¼Œå¦‚æœåœ¨è·å–å¤§é‡æ•°æ®æ—¶ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è·å–æ•°æ®æ€§èƒ½è‚¯å®šæ˜¯ä¸ç†æƒ³çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579524170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161799,"user_name":"é˜¿æœ","can_delete":false,"product_type":"c1","uid":1066705,"ip_address":"","ucode":"349D3572F5ABE7","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/d1/a1ddf49f.jpg","comment_is_top":false,"comment_ctime":1576333460,"is_pvip":false,"replies":[{"id":"61961","content":"å…·ä½“è¦çœ‹æŸ¥è¯¢statusçš„å€¼çš„æ•°æ®é‡ï¼Œä¾‹å¦‚å¦‚æœæ•°æ®å¤§éƒ¨åˆ†æ˜¯status=1çš„ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿæ˜¯æŸ¥è¯¢status=1çš„æ•°æ®ï¼Œé‚£å»ºç«‹status+codeçš„è”åˆç´¢å¼•å°±æ²¡æœ‰å¾ˆå¤§æ„ä¹‰ï¼Œè¿™ä¸ªæ—¶å€™å»ºè®®åªå»ºç«‹codeç´¢å¼•å°±å¯ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯è¦æŸ¥è¯¢å°‘é‡status=0ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å»ºç«‹status+codeè”åˆç´¢å¼•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1576668379,"ip_address":"","comment_id":161799,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1576333460","product_id":100028001,"comment_content":"statusè¿™ç§å­—æ®µä¹Ÿéœ€è¦åŠ å…¥åˆ°è”åˆç´¢å¼•ä¸­å—ï¼Ÿæ¯”å¦‚æŸ¥è¯¢statuså’Œcodeï¼Œæ˜¯å»ºstatus+codeçš„è”åˆç´¢å¼•å¥½è¿˜æ˜¯åªå»ºç«‹codeç´¢å¼•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477866,"discussion_content":"å…·ä½“è¦çœ‹æŸ¥è¯¢statusçš„å€¼çš„æ•°æ®é‡ï¼Œä¾‹å¦‚å¦‚æœæ•°æ®å¤§éƒ¨åˆ†æ˜¯status=1çš„ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿæ˜¯æŸ¥è¯¢status=1çš„æ•°æ®ï¼Œé‚£å»ºç«‹status+codeçš„è”åˆç´¢å¼•å°±æ²¡æœ‰å¾ˆå¤§æ„ä¹‰ï¼Œè¿™ä¸ªæ—¶å€™å»ºè®®åªå»ºç«‹codeç´¢å¼•å°±å¯ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯è¦æŸ¥è¯¢å°‘é‡status=0ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å»ºç«‹status+codeè”åˆç´¢å¼•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576668379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066705,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/d1/a1ddf49f.jpg","nickname":"é˜¿æœ","note":"","ucode":"349D3572F5ABE7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":90767,"discussion_content":"statuså¤šä¸å°‘éƒ½æœ‰å¯èƒ½æŸ¥è¯¢ï¼Œæ‰€ä»¥è¿˜æ˜¯åŠ å…¥åˆ°è”åˆç´¢å¼•æ¯”è¾ƒå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576773831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135687,"user_name":"è¡Œåˆ™å°†è‡³","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1569241255,"is_pvip":false,"discussion_count":2,"race_medal":1,"score":"1569241255","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæˆ‘è¯•äº†ä¸€ä¸‹æœ€å·¦åŒ¹é…åŸåˆ™ã€‚æŒ‰ç…§æ‚¨çš„ä¾‹å­è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°æœ‰çš„æ—¶å€™ï¼Œandä¸¤ç«¯çš„è¡¨è¾¾å¼äº¤æ¢é¡ºåºï¼Œä¾ç„¶å¯ä»¥ä½¿ç”¨åˆ°å¤åˆç´¢å¼•ã€‚æŸ¥äº†æŸ¥ï¼Œæ˜¯å› ä¸ºmysqlçš„ä¼˜åŒ–å™¨ä¼šè‡ªå·±ä¼˜åŒ–ã€‚è¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿç½‘ä¸Šçš„è§£é‡Šæ²¡æœ‰çœ‹æ‡‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1377572,"avatar":"https://static001.geekbang.org/account/avatar/00/15/05/24/1cc3d337.jpg","nickname":"æå¤","note":"","ucode":"66686DF9700A17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48687,"discussion_content":"æœ€å·¦åŒ¹é…åŸåˆ™æŒ‡çš„æ˜¯ä½ çš„whereæ¡ä»¶ä¸­è¦å‡ºç°åˆ›å»ºç»„åˆç´¢å¼•æ—¶æ”¾åœ¨æœ€å·¦è¾¹çš„åˆ—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573520317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1348830,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/SM4fwn9uFicXU8cQ1rNF2LQdKNbZI1FX1jmdwaE2MTrBawbugj4TQKjMKWG0sGbmqQickyARXZFS8NZtobvoWTHA/132","nickname":"td901105","note":"","ucode":"32D42A4F36FA02","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1377572,"avatar":"https://static001.geekbang.org/account/avatar/00/15/05/24/1cc3d337.jpg","nickname":"æå¤","note":"","ucode":"66686DF9700A17","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271261,"discussion_content":"å¯¹çš„ï¼Œç”¨ä½ çš„ç´¢å¼•çš„æœ€å·¦åˆ—å»whereæ¡ä»¶ä¸­å»æ‰¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590110746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":48687,"ip_address":""},"score":271261,"extra":""}]}]},{"had_liked":false,"id":133534,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1568598379,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1568598379","product_id":100028001,"comment_content":"Key Point:<br><br>å¦‚æœè§‰å¾—è¿™äº›è§„åˆ™å¤ªå¤šï¼Œéš¾ä»¥è®°ä½ï¼Œæˆ‘ä»¬å°±è¦å…»æˆç»å¸¸æ£€æŸ¥ SQL æ‰§è¡Œè®¡åˆ’çš„ä¹ æƒ¯ã€‚","like_count":0},{"had_liked":false,"id":133210,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1568444506,"is_pvip":false,"replies":[{"id":"51104","content":"mysqlæŸ¥è¯¢ä¼˜åŒ–æ˜¯åŸºäºæ£€ç´¢æˆæœ¬è€ƒè™‘ï¼Œè€Œä¸æ˜¯åŸºäºæ—¶é—´æˆæœ¬è€ƒè™‘ï¼Œå‡è®¾æˆ‘ä»¬è¯»å–çš„æ˜¯éšæœºè¡Œçš„æ•°æ®ï¼Œåœ¨ç£ç›˜ä¸­å­˜å‚¨æ˜¯æ— åºçš„ï¼Œæœ‰å¯èƒ½åœ¨æ‰«æå°‘æ•°è¡Œçš„æƒ…å†µä¸‹ï¼Œæ‰€éœ€æ—¶é—´æ›´é•¿ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šå‡ºç°è¯¯é€‰æ‹©ç´¢å¼•ã€‚<br><br>é€šå¸¸åœ¨ä¸€äº›inæ“ä½œæ—¶ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨æˆ‘ä»¬å»ºç«‹çš„ç´¢å¼•ï¼Œå½“æ•°æ®é‡è¶…è¿‡ä¸€å®šé‡æ—¶ï¼Œä¼šæ”¹èµ°ä¸»é”®ç´¢å¼•ã€‚æˆ‘ä»¬ä¸€èˆ¬æ˜¯é€šè¿‡æ…¢æ—¥å¿—æ¥æ’æŸ¥è¿™äº›é—®é¢˜ï¼Œä¸€æ—¦å‘ç°ä¸æ˜¯èµ°çš„æˆ‘ä»¬æƒ³è¦çš„ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨force indexæ¥å¼ºåˆ¶èµ°æœŸæœ›çš„ç´¢å¼•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568533705,"ip_address":"","comment_id":133210,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568444506","product_id":100028001,"comment_content":"è€å¸ˆï¼Œè¯·é—®å­˜å‚¨å¼•æ“å…·ä½“åˆ¤æ–­ä½¿ç”¨ä»€ä¹ˆç´¢å¼•çš„åŸåˆ™æ˜¯å•¥?å¤§ä½“çš„åŸåˆ™è‚¯å®šæ˜¯æ€ä¹ˆå¿«æ€ä¹ˆèµ°?ä¸è¿‡ä¹Ÿå­˜åœ¨ä¸€å®šçš„è¯¯åˆ¤ï¼Œè¯·é—®è€å¸ˆæ¸…æ¥šè¯¯åˆ¤çš„åŸå› å’Œå…·ä½“éƒ½æœ‰é‚£äº›åœºæ™¯å˜›ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467296,"discussion_content":"mysqlæŸ¥è¯¢ä¼˜åŒ–æ˜¯åŸºäºæ£€ç´¢æˆæœ¬è€ƒè™‘ï¼Œè€Œä¸æ˜¯åŸºäºæ—¶é—´æˆæœ¬è€ƒè™‘ï¼Œå‡è®¾æˆ‘ä»¬è¯»å–çš„æ˜¯éšæœºè¡Œçš„æ•°æ®ï¼Œåœ¨ç£ç›˜ä¸­å­˜å‚¨æ˜¯æ— åºçš„ï¼Œæœ‰å¯èƒ½åœ¨æ‰«æå°‘æ•°è¡Œçš„æƒ…å†µä¸‹ï¼Œæ‰€éœ€æ—¶é—´æ›´é•¿ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šå‡ºç°è¯¯é€‰æ‹©ç´¢å¼•ã€‚\n\né€šå¸¸åœ¨ä¸€äº›inæ“ä½œæ—¶ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨æˆ‘ä»¬å»ºç«‹çš„ç´¢å¼•ï¼Œå½“æ•°æ®é‡è¶…è¿‡ä¸€å®šé‡æ—¶ï¼Œä¼šæ”¹èµ°ä¸»é”®ç´¢å¼•ã€‚æˆ‘ä»¬ä¸€èˆ¬æ˜¯é€šè¿‡æ…¢æ—¥å¿—æ¥æ’æŸ¥è¿™äº›é—®é¢˜ï¼Œä¸€æ—¦å‘ç°ä¸æ˜¯èµ°çš„æˆ‘ä»¬æƒ³è¦çš„ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨force indexæ¥å¼ºåˆ¶èµ°æœŸæœ›çš„ç´¢å¼•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568533705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132342,"user_name":"DY","can_delete":false,"product_type":"c1","uid":1459006,"ip_address":"","ucode":"55536A524A99B4","user_header":"https://static001.geekbang.org/account/avatar/00/16/43/3e/960d12cb.jpg","comment_is_top":false,"comment_ctime":1568092617,"is_pvip":false,"replies":[{"id":"50646","content":"æˆ‘ä»¬è¿™é‡Œè®¨è®ºçš„æ˜¯ç´¢å¼•å¤±æ•ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568123641,"ip_address":"","comment_id":132342,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1568092617","product_id":100028001,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚ select * from order_detail where id in (select id from order_detail where order_id between 5000 and 10000)ï¼› è¿™ç§ä¼˜åŒ–æ–¹å¼æˆ‘è¯•äº†è¯•ï¼Œ æ²¡èµ·åˆ°ä»€ä¹ˆä¼˜åŒ–ä½œç”¨ã€‚é—®äº†ä¸‹DBAï¼Œè¯´éƒ½å›è¡¨äº†ï¼Œ å…ˆæŸ¥è¯¢ä¸»é”®IDä¹Ÿå›è¡¨ï¼Œ æ„Ÿè§‰å’Œè‡ªå·±ç†è§£çš„ä¸ä¸€æ ·ï¼Œä½†æ˜¯åˆæ²¡æ³•åé©³ã€‚çœ‹äº†ä¸‹æ‰§è¡Œè®¡åˆ’è¿™æ¡sqlä¹Ÿç¡®å®å›è¡¨äº†","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466887,"discussion_content":"æˆ‘ä»¬è¿™é‡Œè®¨è®ºçš„æ˜¯ç´¢å¼•å¤±æ•ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568123641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1459006,"avatar":"https://static001.geekbang.org/account/avatar/00/16/43/3e/960d12cb.jpg","nickname":"DY","note":"","ucode":"55536A524A99B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":9426,"discussion_content":"è€å¸ˆï¼Œä½ å¥½ã€‚æˆ‘éªŒè¯äº†ä¸‹ï¼Œselect * from order_detail where id in (select id from order_detail where order_id between 5000 and 10000)ï¼› å‘ç°å­sqlå¦‚æœæ˜¯åŒºé—´æ®µæŸ¥è¯¢çš„è¯ä¼šå›è¡¨ï¼Œç›´æ¥ç”¨=ä¸ä¼šå›è¡¨ã€‚åŒºé—´æ®µæŸ¥è¯¢ä¸»é”®ä¼šå›è¡¨ï¼Œæœ‰ç‚¹ä¸å¤ªçŸ¥é“åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568167737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123215,"user_name":"å’Œä½ ä¸€èµ·æ¬ç –çš„èƒ¡å¤§çˆ·","can_delete":false,"product_type":"c1","uid":1008587,"ip_address":"","ucode":"54607F4E17917A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/cb/7c004188.jpg","comment_is_top":false,"comment_ctime":1565627515,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565627515","product_id":100028001,"comment_content":"å¥½å‡ ä¸ªéƒ½åŒå­¦éƒ½æåˆ° select * from order_detail where id in (select id from order_detail where order_id between 5000 and 10000)ï¼Œè‡³å°‘mysql 57é‡Œè¿™æ ·å†™","like_count":0,"discussions":[{"author":{"id":1008587,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/63/cb/7c004188.jpg","nickname":"å’Œä½ ä¸€èµ·æ¬ç –çš„èƒ¡å¤§çˆ·","note":"","ucode":"54607F4E17917A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4659,"discussion_content":"ç´¢å¼•æ˜¯å¤±æ•ˆçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565627559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122882,"user_name":"å¯†ç 123456","can_delete":false,"product_type":"c1","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1565569165,"is_pvip":false,"replies":[{"id":"45083","content":"å¤šç†Ÿæ‚‰ä¸€é—¨æ•°æ®åº“ä¹Ÿæ˜¯å¥½çš„ï¼ŒçŸ¥å·±çŸ¥å½¼","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565572943,"ip_address":"","comment_id":122882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565569165","product_id":100028001,"comment_content":"æˆ‘è¿™ä¸€ç›´ç”¨çš„éƒ½æ˜¯oracleï¼Œçœ‹åˆ°mysqlå°±æƒ³ï¼Œå¿«å¿«è·³è¿‡ã€‚åæ¥å‘ç°ï¼Œå’Œæ•°æ®åº“å…³ç³»ä¸å¤§ï¼Œå¾ˆå¤šéƒ½æ˜¯é€šç”¨çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462438,"discussion_content":"å¤šç†Ÿæ‚‰ä¸€é—¨æ•°æ®åº“ä¹Ÿæ˜¯å¥½çš„ï¼ŒçŸ¥å·±çŸ¥å½¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565572943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122537,"user_name":"æ–°ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1079495,"ip_address":"","ucode":"4473DC1505F158","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","comment_is_top":false,"comment_ctime":1565419799,"is_pvip":false,"replies":[{"id":"45091","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565573835,"ip_address":"","comment_id":122537,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565419799","product_id":100028001,"comment_content":"æŸ¥è¯¢ç”¨order_idç´¢å¼•ï¼Œç„¶åè¿›è¡Œå›è¡¨æŸ¥è¯¢","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462298,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565573835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122532,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1565418975,"is_pvip":false,"replies":[{"id":"45092","content":"æ­£è§£ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565573952,"ip_address":"","comment_id":122532,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565418975","product_id":100028001,"comment_content":"è¯·é—®è¯¥æŸ¥è¯¢é€‰æ‹©çš„ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆæ–¹å¼å¯ä»¥å¼ºåˆ¶ä½¿ç”¨æˆ‘ä»¬æœŸæœ›çš„ç´¢å¼•å‘¢ï¼Ÿ<br>ä¼šç›´æ¥æŸ¥è¯¢ä¸»é”®ç´¢å¼•è¿›è¡Œå…¨è¡¨æ‰«æï¼Œå› ä¸ºæ•°æ®åº“ä¼˜åŒ–å™¨åœ¨åˆ¤æ–­SQLè¯­å¥æ‰§è¡Œä½¿ç”¨å“ªä¸ªç´¢å¼•æ—¶ä¼šè®¡ç®—ä»£ä»·ï¼Œå¦‚æœä½¿ç”¨ä¸»è®¢å• id ç´¢å¼•å›è¡¨å¤ªå¤šï¼Œä»£ä»·å¤ªå¤§ï¼Œè¿˜ä¸å¦‚ç”¨ä¸»é”®ç´¢å¼•è¿›è¡Œå…¨è¡¨æ‰«æã€‚<br>æˆ‘è§‰å¾—SQLæ”¹ä¸ºä»¥ä¸‹æ–¹å¼å¯ä»¥ä½¿ç”¨ä¸»è®¢å• id ç´¢å¼•ï¼Œå¹¶æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚<br>select * from order_detail where id in (select id from order_detail where order_id between 5000 and 10000)","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462295,"discussion_content":"æ­£è§£ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565573952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1459006,"avatar":"https://static001.geekbang.org/account/avatar/00/16/43/3e/960d12cb.jpg","nickname":"DY","note":"","ucode":"55536A524A99B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":9072,"discussion_content":"è¿™ç§æ–¹å¼æ€ä¹ˆä¼˜åŒ–äº†å•Šï¼Ÿçœ‹ç€éƒ½æ˜ç™½ï¼Œä½†æ˜¯ä¸€çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œå‘ç°è¿™ç§æ–¹å¼ä¹Ÿå›è¡¨äº†ã€‚ è€Œä¸”ä¸¤ä¸ªsql å“ªä¸ªåæ‰§è¡Œå“ªä¸ªç”¨æ—¶å°‘ï¼Œèµ·ä¸åˆ°ä¼˜åŒ–ä½œç”¨å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568128181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122487,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1565405851,"is_pvip":false,"replies":[{"id":"45100","content":"å¯¹çš„ï¼Œæ€è·¯å°±æ˜¯å¼ºåˆ¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565574681,"ip_address":"","comment_id":122487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565405851","product_id":100028001,"comment_content":"å¯ä»¥ç”¨å­æŸ¥è¯¢å®ç°ï¼Œå› ä¸ºorder_id çš„ç´¢å¼•ä¸­æœ‰ä¸»é”®idï¼Œå…ˆä½¿ç”¨order_id çš„ç´¢å¼•æŸ¥è¯¢åˆ°ä¸»é”®idï¼Œç„¶åé€šè¿‡ä¸»é”®å†ä»è¡¨é‡ŒæŸ¥è¯¢<br>SELECT *<br>FROM order_detail<br>WHERE id IN (SELECT id FROM order_detail WHERE order_id BETWEEN 5000 AND 10000);<br>","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462272,"discussion_content":"å¯¹çš„ï¼Œæ€è·¯å°±æ˜¯å¼ºåˆ¶ä½¿ç”¨è¾…åŠ©ç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565574681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122481,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1565403707,"is_pvip":false,"replies":[{"id":"45102","content":"å·²ç»ç»™å‡ºç­”æ¡ˆï¼Œè¯·è½¬è‡³QQæ€ªçš„é—®ç­”é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565574758,"ip_address":"","comment_id":122481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565403707","product_id":100028001,"comment_content":"ç´¢å¼•å¤±æ•ˆ:è¿™ä¸ªæ“ä½œåœ¨ç´¢å¼•æ ‘ä¸Šæ»¡è¶³ä¸äº†éœ€æ±‚ã€‚å°±ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œb+æ ‘çš„ç‰¹æ€§å°±æ˜¯æœ‰åº(æœ€å·¦å¯ä»¥ç†è§£ä¸ºé«˜ä½æœ‰æ•ˆ)ã€‚<br>è¯¾åä¹ é¢˜ï¼Œæ„Ÿè§‰è€å¸ˆè¿™ä¹ˆé—®è‚¯å®šä¸ä¼šèµ°ä¸»è®¢å•idçš„ç´¢å¼•äº†ï¼ŒåŸå› å¾…è€å¸ˆè§£ç­”ã€‚<br>å¦‚æœæœ‰åˆ†å¸ƒå¼idç”Ÿæˆç³»ç»Ÿèƒ½ä¿è¯ç”Ÿæˆçš„idæœ‰åºé€’å¢çš„è¯ã€‚å¯ä»¥ä¸ç”¨è‡ªå¢çš„idåšä¸»é”®ï¼Œç›´æ¥ç”¨ç”Ÿæˆçš„oreder_idåšä¸»é”®ï¼Œå¯å°‘ä¸€æ¬¡å›è¡¨ã€‚æ„šè§æœŸå¾…è€å¸ˆçš„ç­”æ¡ˆ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462270,"discussion_content":"å·²ç»ç»™å‡ºç­”æ¡ˆï¼Œè¯·è½¬è‡³QQæ€ªçš„é—®ç­”é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565574758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122474,"user_name":"é—¨çª—å°äºŒ","can_delete":false,"product_type":"c1","uid":1006424,"ip_address":"","ucode":"0BF3780C247F22","user_header":"","comment_is_top":false,"comment_ctime":1565401463,"is_pvip":true,"replies":[{"id":"45098","content":"æ­£è§£ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565574604,"ip_address":"","comment_id":122474,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565401463","product_id":100028001,"comment_content":"çœ‹æŸ¥è¯¢ä¼˜åŒ–å™¨è®¡ç®—å‡ºæ¥çš„ä»£ä»·ï¼ä¸çŸ¥é“æ•°æ®é‡å°çš„æ—¶å€™ä¼šä¸ä¼šç›´æ¥ä½¿ç”¨idç´¢å¼•è¿™æ ·ç›¸æ¯”order_idè€Œè¨€æ˜¯å°‘äº†å›è¡¨çš„ä»£ä»·ï¼æ­£å¸¸æƒ…å†µåº”è¯¥è¿˜æ˜¯ä½¿ç”¨ä¸»è®¢å•idçš„ç´¢å¼•ï¼æœ€ç»ˆè¿˜æ˜¯éœ€è¦ç»“åˆæ‰§è¡Œè®¡åˆ’çœ‹ä¸‹æ˜¯ä¸æ˜¯å¯ä»¥ä¼˜åŒ–æˆ–è€…è¯´æŒ‡å®šéœ€è¦æŸ¥è¯¢å‡ºæ¥çš„åˆ—è€Œä¸æ˜¯*ã€‚å¼ºåˆ¶ä½¿ç”¨æŸä¸ªç´¢å¼•æ˜¯force indexå§","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462268,"discussion_content":"æ­£è§£ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565574604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}