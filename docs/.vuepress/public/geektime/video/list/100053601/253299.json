{"id":253299,"title":"11 | PMQ 2.0çš„è®¾è®¡è§£æï¼ˆä¸Šï¼‰","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-distributed\">https://gitee.com/geektime-geekbang/geektime-distributed</a></p>","comments":[{"had_liked":false,"id":247604,"user_name":"OlafOO","can_delete":false,"product_type":"c3","uid":1019254,"ip_address":"","ucode":"105F8B194ED37B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/76/994a9929.jpg","comment_is_top":false,"comment_ctime":1599754239,"is_pvip":false,"replies":[{"id":91018,"content":"æœ‰å…´è¶£å¯ä»¥çœ‹pmqæºç ï¼š\nhttps:&#47;&#47;github.com&#47;ppdaicorp&#47;pmq\næ˜¯ä¸€ä¸ªç»å…¸çš„åˆ†åº“åˆ†è¡¨æ¡ˆä¾‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1599918439,"ip_address":"","comment_id":247604,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"è®²çš„å¤ªç²¾å½©äº†ï¼Œè¿˜èƒ½ç”¨æ•°æ®åº“æï¼Œä»¥å‰å°±æ²¡æƒ³è¿‡..","like_count":10,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505449,"discussion_content":"æœ‰å…´è¶£å¯ä»¥çœ‹pmqæºç ï¼š\nhttps://github.com/ppdaicorp/pmq\næ˜¯ä¸€ä¸ªç»å…¸çš„åˆ†åº“åˆ†è¡¨æ¡ˆä¾‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599918439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019254,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/76/994a9929.jpg","nickname":"OlafOO","note":"","ucode":"105F8B194ED37B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305424,"discussion_content":"å—¯å—¯ï¼Œå…ˆçœ‹å®Œè€å¸ˆçš„ä¸“æ ï¼Œè°¢è°¢è€å¸ˆå›å¤ğŸ˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599919428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229671,"user_name":"geekbang","can_delete":false,"product_type":"c3","uid":1121231,"ip_address":"","ucode":"ED660016CD014C","user_header":"","comment_is_top":false,"comment_ctime":1593095436,"is_pvip":false,"replies":[{"id":84833,"content":"DBå¯¹æ¯”æ–‡ä»¶çš„ä¼˜åŠ¿ï¼š\n1.  æ•°æ®åº“æˆç†Ÿï¼Œå¹¶ä¸”å·²ç»æœ‰æˆç†Ÿçš„HAæ–¹æ¡ˆï¼Œæ¯”æ–‡ä»¶æ›´å¯é \n2. å¯ä»¥æ–¹ä¾¿æŸ¥æ¶ˆæ¯\n3. Brokerå’Œå­˜å‚¨åˆ†ç¦»ï¼ŒBrokeræ— çŠ¶æ€ï¼Œå¯ä»¥ç®€å•æ‰©å±•\n\næ€§èƒ½æ¯”è¾ƒï¼šDBå’Œæ–‡ä»¶åº”è¯¥åœ¨åŒä¸€é‡çº§ï¼Œå†™å…¥å’Œè¯»å–åŸºæœ¬éƒ½æ˜¯é¡ºåºæ“ä½œï¼Œæ²¡æœ‰å“ªä¸ªæœ‰æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ã€‚\n\nDBçš„åŠ£åŠ¿ï¼šéœ€è¦å•ç‹¬çš„DBæ•°æ®åº“ï¼Œæˆæœ¬ç¨é«˜ï¼Œä¸åƒKafkaåªè¦Brokerä¸Šçš„æ–‡ä»¶å­˜å‚¨å°±å¥½äº†ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1593189054,"ip_address":"","comment_id":229671,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"æ³¢æ³¢è€å¸ˆï¼Œè¯·é—®åŸºäºæ•°æ®åº“å­˜å‚¨é™¤äº†å®ç°ç®€å•å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¼˜åŠ¿å—ï¼Ÿå®ƒå’ŒåŸºäºæ–‡ä»¶å­˜å‚¨æ¯”è¾ƒæœ‰å“ªäº›åŠ£åŠ¿å‘¢ï¼Ÿä»–ä»¬çš„æ€§èƒ½æ¯”è¾ƒä¼šæ˜¯ä¸€ä¸ªä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499584,"discussion_content":"DBå¯¹æ¯”æ–‡ä»¶çš„ä¼˜åŠ¿ï¼š\n1.  æ•°æ®åº“æˆç†Ÿï¼Œå¹¶ä¸”å·²ç»æœ‰æˆç†Ÿçš„HAæ–¹æ¡ˆï¼Œæ¯”æ–‡ä»¶æ›´å¯é \n2. å¯ä»¥æ–¹ä¾¿æŸ¥æ¶ˆæ¯\n3. Brokerå’Œå­˜å‚¨åˆ†ç¦»ï¼ŒBrokeræ— çŠ¶æ€ï¼Œå¯ä»¥ç®€å•æ‰©å±•\n\næ€§èƒ½æ¯”è¾ƒï¼šDBå’Œæ–‡ä»¶åº”è¯¥åœ¨åŒä¸€é‡çº§ï¼Œå†™å…¥å’Œè¯»å–åŸºæœ¬éƒ½æ˜¯é¡ºåºæ“ä½œï¼Œæ²¡æœ‰å“ªä¸ªæœ‰æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ã€‚\n\nDBçš„åŠ£åŠ¿ï¼šéœ€è¦å•ç‹¬çš„DBæ•°æ®åº“ï¼Œæˆæœ¬ç¨é«˜ï¼Œä¸åƒKafkaåªè¦Brokerä¸Šçš„æ–‡ä»¶å­˜å‚¨å°±å¥½äº†ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593189054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":2823089,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/13/b1/9f089294.jpg","nickname":"æ–½è£è£","note":"","ucode":"7D16C877D40630","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":530648,"discussion_content":"å¤§ä½¬è¯·æ•™ä¸€ä¸‹ï¼Œå…³äºdbå’Œæ–‡ä»¶çš„æ€§èƒ½åœ¨åŒä¸€é‡çº§çš„åŸå› ï¼Ÿæˆ‘å»æŸ¥äº†ä¸€ä¸‹mysqlçš„èµ„æ–™ï¼Œb+æ ‘å¶å­èŠ‚ç‚¹å­˜å‚¨çš„è®°å½•æ˜¯é¡ºåºçš„ï¼Œæ‰€ä»¥è¯»å–idä¸º1234è¿™æ ·æŒ‰é¡ºåºçš„è®°å½•æ—¶ï¼Œmysqlåº•å±‚æ–‡ä»¶çš„æ“ä½œä¹Ÿå°±æ˜¯é¡ºåºè¯»ï¼Œæˆ‘è¯´çš„å¯¹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637116852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":499584,"ip_address":"","group_id":0},"score":530648,"extra":"{\"user_type\":1}"},{"author":{"id":2055809,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5e/81/82709d6e.jpg","nickname":"ç å°å‘†","note":"","ucode":"44532D6ABF9340","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2823089,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/13/b1/9f089294.jpg","nickname":"æ–½è£è£","note":"","ucode":"7D16C877D40630","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591205,"discussion_content":"è¿™é‡Œåº“è¡¨idçš„è®¾è®¡ åº”è¯¥ä¸èƒ½ç”¨ è‡ªå¢ æ¥ä½¿ç”¨,å› ä¸ºè¦è€ƒè™‘åˆ†å¸ƒå¼çš„æƒ…å†µ,éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼id","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666362411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":530648,"ip_address":"å¹¿ä¸œ","group_id":0},"score":591205,"extra":""}]}]},{"had_liked":false,"id":232626,"user_name":"Geek_jm95v6","can_delete":false,"product_type":"c3","uid":1154286,"ip_address":"","ucode":"291F1A4DAA3DB7","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/ee/f5cb8bd3.jpg","comment_is_top":false,"comment_ctime":1594052203,"is_pvip":false,"replies":[{"id":86106,"content":"å—¯ï¼Œä»ç†è®ºä¸Šè®²ï¼Œç”Ÿäº§è€…&#47;æ¶ˆè´¹è€…ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥å®ç°PMQçš„åŠŸèƒ½ã€‚ä½†æ˜¯è¿™æ ·ç”Ÿäº§è€…&#47;æ¶ˆè´¹è€…å°±å’Œæ•°æ®åº“ç›´æ¥è€¦åˆäº†ï¼Œè€Œä¸”ç”Ÿäº§è€…&#47;æ¶ˆè´¹è€…çš„é€»è¾‘ä¼šå˜å¾—éå¸¸å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤å’Œå‡çº§ï¼Œæ¯”æ–¹è¯´æ•°æ®åº“æ‰©å®¹çš„è¯ï¼Œç”Ÿäº§&#47;æ¶ˆè´¹è€…çš„è¿æ¥å­—ç¬¦ä¸²éƒ½éœ€è¦è°ƒæ•´ã€‚\n\nå¢åŠ ä¸€å±‚Brokerä½œä¸ºé—´æ¥ï¼Œç”Ÿäº§&#47;æ¶ˆè´¹è€…å’ŒDBå°±ä¸è€¦åˆï¼Œé€šè¿‡Brokerå¯ä»¥å±è”½DBçš„æ‰©å®¹å‡çº§ç­‰å˜åŒ–ï¼Œè€Œä¸”ç”Ÿäº§&#47;æ¶ˆè´¹é€»è¾‘ç®€å•ï¼Œæ˜“äºå‡çº§ç»´æŠ¤ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1594310810,"ip_address":"","comment_id":232626,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"æ³¢æ³¢è€å¸ˆå¥½ æƒ³é—®ä¸‹ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°brokerä¸Š ä»¥åŠæ¶ˆè´¹è€…å»æ‹‰æ¶ˆæ¯ brokeråªæ˜¯åšäº†ä¸€ä¸ªæ¶ˆæ¯è½åº“çš„æ“ä½œå’ŒæŸ¥è¯¢çš„æ“ä½œå—ï¼Ÿå¦‚æœæ˜¯è¿™æ · é‚£ç”Ÿäº§è€…ç›´æ¥å°†æ¶ˆæ¯å…¥åº“å’Œæ¶ˆè´¹ç«¯ç›´æ¥å»æŸ¥è¯¢æœ‰å•¥åŒºåˆ«ï¼Ÿèƒ½è¯¦ç»†è¯´ä¸‹å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500711,"discussion_content":"å—¯ï¼Œä»ç†è®ºä¸Šè®²ï¼Œç”Ÿäº§è€…/æ¶ˆè´¹è€…ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥å®ç°PMQçš„åŠŸèƒ½ã€‚ä½†æ˜¯è¿™æ ·ç”Ÿäº§è€…/æ¶ˆè´¹è€…å°±å’Œæ•°æ®åº“ç›´æ¥è€¦åˆäº†ï¼Œè€Œä¸”ç”Ÿäº§è€…/æ¶ˆè´¹è€…çš„é€»è¾‘ä¼šå˜å¾—éå¸¸å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤å’Œå‡çº§ï¼Œæ¯”æ–¹è¯´æ•°æ®åº“æ‰©å®¹çš„è¯ï¼Œç”Ÿäº§/æ¶ˆè´¹è€…çš„è¿æ¥å­—ç¬¦ä¸²éƒ½éœ€è¦è°ƒæ•´ã€‚\n\nå¢åŠ ä¸€å±‚Brokerä½œä¸ºé—´æ¥ï¼Œç”Ÿäº§/æ¶ˆè´¹è€…å’ŒDBå°±ä¸è€¦åˆï¼Œé€šè¿‡Brokerå¯ä»¥å±è”½DBçš„æ‰©å®¹å‡çº§ç­‰å˜åŒ–ï¼Œè€Œä¸”ç”Ÿäº§/æ¶ˆè´¹é€»è¾‘ç®€å•ï¼Œæ˜“äºå‡çº§ç»´æŠ¤ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594310810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046552,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/18/3e5e7db3.jpg","nickname":"Lorgine","note":"","ucode":"DB64E85327A252","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289834,"discussion_content":"Mqæœ¬è´¨å°±æ˜¯ä½ è¯´çš„è¿™ä¸ªåŠŸèƒ½çš„æç‚¼ã€‚ä½ è‡ªå·±å»å®ç°è¦è€ƒè™‘æ‰©å®¹ç¼©å®¹ï¼Œè¿˜æœ‰æ€ä¹ˆä¿è¯å¤šä¸ªå®ä¾‹æ¶ˆè´¹å¤šä¸ªè¡¨çš„é—®é¢˜ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594222418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276995,"user_name":"ç™½å°é¾™","can_delete":false,"product_type":"c3","uid":1230191,"ip_address":"","ucode":"34BFCBA8D98AB8","user_header":"https://static001.geekbang.org/account/avatar/00/12/c5/6f/8ba27eab.jpg","comment_is_top":false,"comment_ctime":1612227507,"is_pvip":false,"replies":[{"id":100995,"content":"ä½ çš„ç†è§£æ˜¯æ­£ç¡®çš„ï¼Œä¸€ä¸ªqueueé‡Œå¤´çš„æ•°æ®æ˜¯çŠ¶æ€ï¼Œå¦‚æœä¸€ä¸ªconsumerGroupä¸­çš„ä¸¤ä¸ªconsumeråŒæ—¶æ¶ˆè´¹çš„è¯ï¼Œå¿…ç„¶å­˜åœ¨çŠ¶æ€ç«äº‰é—®é¢˜ï¼ŒåŠ é”å¯¹æ€§èƒ½çš„å½±å“éå¸¸å¤§ï¼Œè€Œä¸”ä¸¤ä¸ªconsumerä¹‹é—´è¿˜éœ€è¦åŒæ­¥æ¶ˆè´¹æŒ‡é’ˆï¼Œå¼€é”€æ›´å¤§ï¼Œæ‰€ä»¥ä¸€ä¸ªconsumerGroupä¸­çš„ä¸¤ä¸ªconsumerä¸èƒ½åŒæ—¶æ¶ˆè´¹ä¸€ä¸ªqueueã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1612797609,"ip_address":"","comment_id":276995,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"å¯¹äºä¸€ä¸ªpartitionåªèƒ½æœ‰ä¸€ä¸ªæ¶ˆè´¹æŒ‡é’ˆçš„ç†è§£ï¼šå¦‚æœåŒä¸€ä¸ªconsumerGroupçš„ä¸¤ä¸ªconsumeræ¶ˆè´¹åŒä¸€ä¸ªqueueï¼ˆpartitionï¼‰ï¼Œç”±äºå„è‡ªéƒ½å­˜åœ¨æ¶ˆè´¹æŒ‡é’ˆï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªconsumerå°±å½¢æˆäº†æ¶ˆæ¯èµ„æºç«äº‰å…³ç³»ï¼Œä¸ºäº†é¿å…é‡å¤æ¶ˆè´¹ï¼Œå°±å¾—åŠ é”ï¼Œæ˜¾ç„¶å¢åŠ äº†ç³»ç»Ÿå¤æ‚æ€§å¹¶å½±å“æ€§èƒ½ã€‚é¡¾ä¸€ä¸ªæ¶ˆè´¹è€…ç»„çš„æ¶ˆè´¹è€…ä¹‹é—´ä¸èƒ½ç»‘å®šåˆ°åŒä¸€ä¸ªqueueä¸Šã€‚è¿˜æœ›è€å¸ˆç‚¹è¯„ï¼","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514891,"discussion_content":"ä½ çš„ç†è§£æ˜¯æ­£ç¡®çš„ï¼Œä¸€ä¸ªqueueé‡Œå¤´çš„æ•°æ®æ˜¯çŠ¶æ€ï¼Œå¦‚æœä¸€ä¸ªconsumerGroupä¸­çš„ä¸¤ä¸ªconsumeråŒæ—¶æ¶ˆè´¹çš„è¯ï¼Œå¿…ç„¶å­˜åœ¨çŠ¶æ€ç«äº‰é—®é¢˜ï¼ŒåŠ é”å¯¹æ€§èƒ½çš„å½±å“éå¸¸å¤§ï¼Œè€Œä¸”ä¸¤ä¸ªconsumerä¹‹é—´è¿˜éœ€è¦åŒæ­¥æ¶ˆè´¹æŒ‡é’ˆï¼Œå¼€é”€æ›´å¤§ï¼Œæ‰€ä»¥ä¸€ä¸ªconsumerGroupä¸­çš„ä¸¤ä¸ªconsumerä¸èƒ½åŒæ—¶æ¶ˆè´¹ä¸€ä¸ªqueueã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612797609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242869,"user_name":"æ·±å±±å°ä¹¦ç«¥","can_delete":false,"product_type":"c3","uid":1079593,"ip_address":"","ucode":"6B5DD3B3D84534","user_header":"https://static001.geekbang.org/account/avatar/00/10/79/29/a90cf777.jpg","comment_is_top":false,"comment_ctime":1597880711,"is_pvip":false,"replies":[{"id":89707,"content":"åŒä¸€ä¸ªtopicçš„æ‰€æœ‰partitionå­˜å‚¨çš„æ¶ˆæ¯éƒ½æ˜¯å±äºè¿™ä¸ªtopicçš„ï¼Œæ¯”æ–¹è¯´å’Œorderè®¢å•æ›´æ–°æ¶ˆæ¯ç›¸å…³è”çš„topicå«order_update_msgï¼Œé‚£ä¹ˆæ‰€æœ‰å’Œè®¢å•æ›´æ–°ç›¸å…³çš„æ¶ˆæ¯ï¼Œéƒ½ä¼šåˆ†å¸ƒåœ¨è¿™ä¸ªorder_update_msgçš„ä¸åŒpartitionä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1598106975,"ip_address":"","comment_id":242869,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"æ³¢æ³¢è€å¸ˆï¼ŒåŒä¸€ä¸ªtopicçš„æ‰€æœ‰partitionå­˜å‚¨çš„æ¶ˆæ¯éƒ½æ˜¯ä¸€æ ·çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504117,"discussion_content":"åŒä¸€ä¸ªtopicçš„æ‰€æœ‰partitionå­˜å‚¨çš„æ¶ˆæ¯éƒ½æ˜¯å±äºè¿™ä¸ªtopicçš„ï¼Œæ¯”æ–¹è¯´å’Œorderè®¢å•æ›´æ–°æ¶ˆæ¯ç›¸å…³è”çš„topicå«order_update_msgï¼Œé‚£ä¹ˆæ‰€æœ‰å’Œè®¢å•æ›´æ–°ç›¸å…³çš„æ¶ˆæ¯ï¼Œéƒ½ä¼šåˆ†å¸ƒåœ¨è¿™ä¸ªorder_update_msgçš„ä¸åŒpartitionä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598106975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230897,"user_name":"æ±Ÿæµ","can_delete":false,"product_type":"c3","uid":1343480,"ip_address":"","ucode":"D1FDC0777BF88B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL23Wicb0gO9RIYCXOiajnCf92RDd0MOOGuFxx4ZKQpDDlMgLbZecMDdnfCEIPQkbebgBuic2SXfm0Gw/132","comment_is_top":false,"comment_ctime":1593517658,"is_pvip":false,"replies":[{"id":85373,"content":"ä½ å¥½ï¼Œæˆ‘å¹¶æ²¡æœ‰è¯´æ–‡ä»¶ç³»ç»Ÿä¸€å®šæ²¡æœ‰æ•°æ®åº“å¯é ï¼Œæ¯•ç«Ÿæ•°æ®åº“åº•å±‚ä¹Ÿæ˜¯åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„ã€‚\n\nåªä¸è¿‡MySQLä¹‹ç±»çš„æ•°æ®åº“å·²ç»æ¯”è¾ƒæˆç†Ÿï¼Œå¤§é‡å¯é æ€§æŠ€æœ¯å·²ç»æ²‰æ·€åœ¨é‡Œå¤´ï¼Œæ¢å¥è¯è¯´ï¼Œå‘å·²ç»åŸºæœ¬ä¸Šè¢«è¸©å¹³äº†ã€‚\n\nåŸºäºæ–‡ä»¶åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šå­˜å‰¯æœ¬ï¼Œå½“ç„¶å¯ä»¥åšåˆ°é«˜å¯é ï¼Œä¸è¿‡æˆ‘è§‰å¾—æœ‰ç‚¹å¤æ‚äº†ï¼Œè¿œæ²¡æœ‰MySQLä¸»ä»æ¥å¾—ç®€å•æˆç†Ÿè®©äººæ”¾å¿ƒ(æ³¢æ³¢ä¸ªäººè§‚ç‚¹)ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1593619224,"ip_address":"","comment_id":230897,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"æ³¢æ³¢è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼šä½ è¯´åŸºäºæ–‡ä»¶ç³»ç»Ÿæ¥åšæ²¡æœ‰æ•°æ®åº“å¯é æ˜¯å› ä¸ºæ•°æ®åº“æœ‰æ—¥å¿—æ¢å¤åŠŸèƒ½å—ï¼Œä½†æ˜¯åŸºäºæ–‡ä»¶æ¥åšåœ¨ä¸åŒèŠ‚ç‚¹ä¸Šæœ‰å‰¯æœ¬æ¥ä¿è¯å¯é æ€§å•Šï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500066,"discussion_content":"ä½ å¥½ï¼Œæˆ‘å¹¶æ²¡æœ‰è¯´æ–‡ä»¶ç³»ç»Ÿä¸€å®šæ²¡æœ‰æ•°æ®åº“å¯é ï¼Œæ¯•ç«Ÿæ•°æ®åº“åº•å±‚ä¹Ÿæ˜¯åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„ã€‚\n\nåªä¸è¿‡MySQLä¹‹ç±»çš„æ•°æ®åº“å·²ç»æ¯”è¾ƒæˆç†Ÿï¼Œå¤§é‡å¯é æ€§æŠ€æœ¯å·²ç»æ²‰æ·€åœ¨é‡Œå¤´ï¼Œæ¢å¥è¯è¯´ï¼Œå‘å·²ç»åŸºæœ¬ä¸Šè¢«è¸©å¹³äº†ã€‚\n\nåŸºäºæ–‡ä»¶åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šå­˜å‰¯æœ¬ï¼Œå½“ç„¶å¯ä»¥åšåˆ°é«˜å¯é ï¼Œä¸è¿‡æˆ‘è§‰å¾—æœ‰ç‚¹å¤æ‚äº†ï¼Œè¿œæ²¡æœ‰MySQLä¸»ä»æ¥å¾—ç®€å•æˆç†Ÿè®©äººæ”¾å¿ƒ(æ³¢æ³¢ä¸ªäººè§‚ç‚¹)ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593619224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229930,"user_name":"jhren","can_delete":false,"product_type":"c3","uid":1596987,"ip_address":"","ucode":"60F7CCEA1E2C88","user_header":"https://static001.geekbang.org/account/avatar/00/18/5e/3b/845fb641.jpg","comment_is_top":false,"comment_ctime":1593214903,"is_pvip":false,"replies":[{"id":84922,"content":"PMQ(åŒ…æ‹¬kafka)éƒ½æ˜¯é‡‡ç”¨æ¶ˆè´¹è€…æ‹‰æ¨¡å¼çš„ï¼Œä¸æ˜¯æ¨æ¨¡å¼ã€‚ä¹Ÿå°±æ˜¯è¯´æ¶ˆæ¯æ˜¯æ¶ˆè´¹è€…ä¸»åŠ¨æ¥æ‹‰çš„ï¼Œä¸æ˜¯Brokerä¸»åŠ¨æ¨çš„ã€‚è¿™ä¸ªä¸€å®šè¦å…ˆç†è§£ã€‚\n\næ¶ˆæ¯åœ¨PMQçš„DBä¸­(æˆ–è€…Kafkaçš„brokerä¸Š)ï¼Œåªéœ€è¦å­˜ä¸€ä»½ã€‚ä½†æ˜¯æ¶ˆè´¹è€…å¯ä»¥ç»„æˆä¸åŒçš„æ¶ˆè´¹è€…ç»„(consumer group)ï¼Œç„¶åéƒ½å¯ä»¥æ¥æ‹‰åŒä¸€ä¸ªåˆ†åŒºä¸­çš„æ¶ˆæ¯ï¼Œåªè¦å„è‡ªç»´æŠ¤è‡ªå·±çš„æ¶ˆè´¹è€…æŒ‡é’ˆå°±å¯ä»¥äº†ã€‚\n\nè¿™ä¸€èŠ‚è¯¾ä½ å¯ä»¥å¤šæ¶ˆåŒ–ä¸‹ï¼ŒæŠŠæ•°ç»„å’ŒæŒ‡é’ˆçš„é‚£ä¸ªpptçœ‹æ˜ç™½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1593270548,"ip_address":"","comment_id":229930,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"è¯·é—®æ³¢æ³¢è€å¸ˆï¼ŒåŒä¸€ä¸ªæ¶ˆæ¯è¦å‘ç»™å¤šä¸ªconsumeråˆ†åˆ«ç‹¬ç«‹æ¶ˆè´¹ã€‚\næ˜¯æŠŠè¿™ä¸ªæ¶ˆæ¯åœ¨è¯¥Topicçš„æ¯ä¸ªPartitionéƒ½å‘ä¸€æ¬¡å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499702,"discussion_content":"PMQ(åŒ…æ‹¬kafka)éƒ½æ˜¯é‡‡ç”¨æ¶ˆè´¹è€…æ‹‰æ¨¡å¼çš„ï¼Œä¸æ˜¯æ¨æ¨¡å¼ã€‚ä¹Ÿå°±æ˜¯è¯´æ¶ˆæ¯æ˜¯æ¶ˆè´¹è€…ä¸»åŠ¨æ¥æ‹‰çš„ï¼Œä¸æ˜¯Brokerä¸»åŠ¨æ¨çš„ã€‚è¿™ä¸ªä¸€å®šè¦å…ˆç†è§£ã€‚\n\næ¶ˆæ¯åœ¨PMQçš„DBä¸­(æˆ–è€…Kafkaçš„brokerä¸Š)ï¼Œåªéœ€è¦å­˜ä¸€ä»½ã€‚ä½†æ˜¯æ¶ˆè´¹è€…å¯ä»¥ç»„æˆä¸åŒçš„æ¶ˆè´¹è€…ç»„(consumer group)ï¼Œç„¶åéƒ½å¯ä»¥æ¥æ‹‰åŒä¸€ä¸ªåˆ†åŒºä¸­çš„æ¶ˆæ¯ï¼Œåªè¦å„è‡ªç»´æŠ¤è‡ªå·±çš„æ¶ˆè´¹è€…æŒ‡é’ˆå°±å¯ä»¥äº†ã€‚\n\nè¿™ä¸€èŠ‚è¯¾ä½ å¯ä»¥å¤šæ¶ˆåŒ–ä¸‹ï¼ŒæŠŠæ•°ç»„å’ŒæŒ‡é’ˆçš„é‚£ä¸ªpptçœ‹æ˜ç™½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593270548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1596987,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5e/3b/845fb641.jpg","nickname":"jhren","note":"","ucode":"60F7CCEA1E2C88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286773,"discussion_content":"æ˜ç™½äº† è°¢è°¢æ³¢æ³¢è€å¸ˆ æˆ‘å†ä»”ç»†çœ‹ä¸€éè¿™èŠ‚è¯¾","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593275146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289282,"user_name":"å†™ç‚¹å•¥å‘¢","can_delete":false,"product_type":"c3","uid":1065272,"ip_address":"","ucode":"C19032CF1C41BA","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/38/4f89095b.jpg","comment_is_top":false,"comment_ctime":1618968114,"is_pvip":false,"replies":[{"id":106065,"content":"1ï¼Œè‡ªå¢ä¸»é”®å¯èƒ½å‡ºç°ä¸è¿ç»­ï¼Œç”Ÿäº§ç«¯æ²¡æœ‰å…³ç³»ï¼Œæ¶ˆè´¹ç«¯clientä¼šè‡ªåŠ¨å¤„ç†ã€‚\n2ï¼Œmysqlæ•°æ®åº“çš„HAä¸»è¦é‡‡ç”¨MySQL MHAæœºåˆ¶å®ç°ï¼Œè§£å†³å¤šåº“äº‹åŠ¡é—®é¢˜æˆæœ¬å¾ˆé«˜ï¼Œå‘ç”Ÿé—®é¢˜æ¦‚ç‡å¾ˆä½ï¼Œç»¼åˆè¯„ä¼°ä¸‹æ¥æš‚æ²¡æœ‰å®ç°ï¼Œå¦‚æœç¡®å®å‘ç”Ÿï¼Œç›®å‰ä¾èµ–äººå·¥è§£å†³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1621095772,"ip_address":"","comment_id":289282,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"æ•°æ®åº“è‡ªå¢åˆ—æœ‰æ•°å€¼ä¸è¿ç»­çš„æƒ…å†µ(æ¯”å¦‚äº‹åŠ¡å›æ»šï¼Œæ•°æ®åº“å´©æºƒæ¢å¤åœºæ™¯ï¼‰ï¼Œè¯·é—®æ³¢æ³¢è€å¸ˆPMQåœ¨å·¥ç¨‹ä¸Šæ˜¯å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µçš„ï¼Ÿ\nå¦å¤–åˆ©ç”¨æ•°æ®åº“æ˜¯å¦‚ä½•å®ç°partition replicationæ¥åšåˆ°æ•°æ®é«˜å¯ç”¨å‘¢ï¼ˆå¦‚ä½•è§£å†³å¤šåº“é—´äº‹åŠ¡ï¼‰ã€‚è°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518874,"discussion_content":"1ï¼Œè‡ªå¢ä¸»é”®å¯èƒ½å‡ºç°ä¸è¿ç»­ï¼Œç”Ÿäº§ç«¯æ²¡æœ‰å…³ç³»ï¼Œæ¶ˆè´¹ç«¯clientä¼šè‡ªåŠ¨å¤„ç†ã€‚\n2ï¼Œmysqlæ•°æ®åº“çš„HAä¸»è¦é‡‡ç”¨MySQL MHAæœºåˆ¶å®ç°ï¼Œè§£å†³å¤šåº“äº‹åŠ¡é—®é¢˜æˆæœ¬å¾ˆé«˜ï¼Œå‘ç”Ÿé—®é¢˜æ¦‚ç‡å¾ˆä½ï¼Œç»¼åˆè¯„ä¼°ä¸‹æ¥æš‚æ²¡æœ‰å®ç°ï¼Œå¦‚æœç¡®å®å‘ç”Ÿï¼Œç›®å‰ä¾èµ–äººå·¥è§£å†³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621095772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372258,"user_name":"å¼ è¾‰","can_delete":false,"product_type":"c3","uid":3583297,"ip_address":"åŒ—äº¬","ucode":"28F6CB14AA51D3","user_header":"https://static001.geekbang.org/account/avatar/00/36/ad/41/a89e7c56.jpg","comment_is_top":false,"comment_ctime":1680914480,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"æ³¢æ³¢è€å¸ˆï¼Œè®²ä¹‰æ–¹ä¾¿å‘ä¸€ä¸‹ä¹ˆ","like_count":0}]}