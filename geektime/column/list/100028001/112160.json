{"id":112160,"title":"32 | ç­”ç–‘è¯¾å ‚ï¼šæ¨¡å—äº”æ€è€ƒé¢˜é›†é”¦","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åˆ˜è¶…ã€‚</p><p>æ¨¡å—äº”æˆ‘ä»¬éƒ½åœ¨è®¨è®ºè®¾è®¡æ¨¡å¼ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè®¾è®¡æ¨¡å¼ä¸ä»…å¯ä»¥ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç ç»“æ„ï¼Œä½¿ä»£ç å¯æ‰©å±•æ€§ã€å¯è¯»æ€§å¼ºï¼ŒåŒæ—¶ä¹Ÿèµ·åˆ°äº†ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½çš„ä½œç”¨ï¼Œè¿™æ˜¯æˆ‘è®¾ç½®è¿™ä¸ªæ¨¡å—çš„åˆè¡·ã€‚ç‰¹åˆ«æ˜¯åœ¨ä¸€äº›é«˜å¹¶å‘åœºæ™¯ä¸­ï¼Œçº¿ç¨‹åä½œç›¸å…³çš„è®¾è®¡æ¨¡å¼å¯ä»¥å¤§å¤§æé«˜ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚</p><p>é‚£ä¹ˆæˆªè‡³æœ¬å‘¨ï¼Œæœ‰å…³è®¾è®¡æ¨¡å¼çš„å†…å®¹å°±ç»“æŸäº†ï¼Œä¸çŸ¥ä½ æœ‰æ²¡æœ‰å‘ç°è¿™ä¸ªæ¨¡å—çš„æ€è€ƒé¢˜éƒ½æ¯”è¾ƒå‘æ•£ï¼Œå¾ˆå¤šåŒå­¦ä¹Ÿåœ¨ç•™è¨€åŒºä¸­å†™å‡ºäº†å¾ˆå¤šç¡¬æ ¸ä¿¡æ¯ï¼Œä¿ƒè¿›äº†æŠ€æœ¯äº¤æµã€‚è¿™ä¸€è®²çš„ç­”ç–‘è¯¾å ‚æˆ‘å°±æ¥ä¸ºä½ æ€»ç»“ä¸‹è¯¾åæ€è€ƒé¢˜ï¼Œå¸Œæœ›æˆ‘çš„ç­”æ¡ˆèƒ½è®©ä½ æœ‰æ–°çš„æ”¶è·ã€‚</p><p><a href=\"https://time.geekbang.org/column/article/109564\">ç¬¬ 26 è®²</a></p><p><strong>é™¤äº†ä»¥ä¸Šé‚£äº›å®ç°å•ä¾‹çš„æ–¹å¼ï¼Œä½ è¿˜çŸ¥é“å…¶å®ƒå®ç°æ–¹å¼å—ï¼Ÿ</strong></p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/99774\">ç¬¬9è®²</a>ä¸­ï¼Œæˆ‘æ›¾æåˆ°è¿‡ä¸€ä¸ªå•ä¾‹åºåˆ—åŒ–é—®é¢˜ï¼Œå…¶ç­”æ¡ˆå°±æ˜¯ä½¿ç”¨æšä¸¾æ¥å®ç°å•ä¾‹ï¼Œè¿™æ ·å¯ä»¥é¿å…Javaåºåˆ—åŒ–ç ´åä¸€ä¸ªç±»çš„å•ä¾‹ã€‚</p><p>æšä¸¾ç”Ÿæ¥å°±æ˜¯å•ä¾‹ï¼Œæšä¸¾ç±»çš„åŸŸï¼ˆfieldï¼‰å…¶å®æ˜¯ç›¸åº”çš„enumç±»å‹çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå› ä¸ºåœ¨Javaä¸­æšä¸¾æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘åï¼Œæšä¸¾ç±»ä¸­çš„æšä¸¾åŸŸä¼šè¢«å£°æ˜ä¸ºstaticå±æ€§ã€‚</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/109564\">ç¬¬26è®²</a>ä¸­ï¼Œæˆ‘å·²ç»è¯¦ç»†è§£é‡Šäº†JVMæ˜¯å¦‚ä½•ä¿è¯staticæˆå‘˜å˜é‡åªè¢«å®ä¾‹åŒ–ä¸€æ¬¡çš„ï¼Œæˆ‘ä»¬ä¸å¦¨å†æ¥å›é¡¾ä¸‹ã€‚ä½¿ç”¨äº†staticä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œä¼šåœ¨ç±»åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­è¢«æ”¶é›†è¿›ç±»æ„é€ å™¨å³&lt;clinit&gt;æ–¹æ³•ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼ŒJVMä¼šä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œè¯¥ç±»çš„&lt;clinit&gt;æ–¹æ³•ï¼Œå…¶å®ƒçº¿ç¨‹å°†ä¼šè¢«é˜»å¡ç­‰å¾…ã€‚ç­‰åˆ°å”¯ä¸€çš„ä¸€æ¬¡&lt;clinit&gt;æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œå…¶å®ƒçº¿ç¨‹å°†ä¸ä¼šå†æ‰§è¡Œ&lt;clinit&gt;æ–¹æ³•ï¼Œè½¬è€Œæ‰§è¡Œè‡ªå·±çš„ä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œstaticä¿®é¥°äº†æˆå‘˜å˜é‡ï¼Œåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹èƒ½ä¿è¯åªå®ä¾‹åŒ–ä¸€æ¬¡ã€‚</p><!-- [[[read_end]]] --><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç ç®€å•äº†è§£ä¸‹ä½¿ç”¨æšä¸¾å®ç°çš„é¥¿æ±‰å•ä¾‹æ¨¡å¼ï¼š</p><pre><code>//é¥¿æ±‰æ¨¡å¼ æšä¸¾å®ç°\npublic enum Singleton {\n    INSTANCE;//ä¸å®ä¾‹åŒ–\n    public List&lt;String&gt; list = null;// listå±æ€§\n\n\tprivate Singleton() {//æ„é€ å‡½æ•°\n\t\tlist = new ArrayList&lt;String&gt;();\n\t}\n    public static Singleton getInstance(){\n        return INSTANCE;//è¿”å›å·²å­˜åœ¨çš„å¯¹è±¡\n    }\n}\n</code></pre><p>è¯¥æ–¹å¼å®ç°çš„å•ä¾‹æ²¡æœ‰å®ç°æ‡’åŠ è½½åŠŸèƒ½ï¼Œé‚£å¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨åˆ°æ‡’åŠ è½½åŠŸèƒ½å‘¢ï¼Ÿæ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŸºäºå†…éƒ¨ç±»æ¥å®ç°ï¼š</p><pre><code>//æ‡’æ±‰æ¨¡å¼ æšä¸¾å®ç°\npublic class Singleton {\n    //ä¸å®ä¾‹åŒ–\n    public List&lt;String&gt; list = null;// listå±æ€§\n\n\tprivate Singleton(){//æ„é€ å‡½æ•°\n\t\tlist = new ArrayList&lt;String&gt;();\n\t}\n    //ä½¿ç”¨æšä¸¾ä½œä¸ºå†…éƒ¨ç±»\n    private enum EnumSingleton {\n        INSTANCE;//ä¸å®ä¾‹åŒ–\n        private Singleton instance = null;\n\n        private EnumSingleton(){//æ„é€ å‡½æ•°\n\t\t    instance = new Singleton();\n     \t}\n        public Singleton getSingleton(){\n            return instance;//è¿”å›å·²å­˜åœ¨çš„å¯¹è±¡\n        }\n    }\n\n    public static Singleton getInstance(){\n        return EnumSingleton.INSTANCE.getSingleton();//è¿”å›å·²å­˜åœ¨çš„å¯¹è±¡\n    }\n}\n</code></pre><p><a href=\"https://time.geekbang.org/column/article/109980\">ç¬¬27è®²</a></p><p><strong>ä¸Šä¸€è®²çš„å•ä¾‹æ¨¡å¼å’Œè¿™ä¸€è®²çš„äº«å…ƒæ¨¡å¼éƒ½æ˜¯ä¸ºäº†é¿å…é‡å¤åˆ›å»ºå¯¹è±¡ï¼Œä½ çŸ¥é“è¿™ä¸¤è€…çš„åŒºåˆ«åœ¨å“ªå„¿å—ï¼Ÿ</strong></p><p>é¦–å…ˆï¼Œè¿™ä¸¤ç§è®¾è®¡æ¨¡å¼çš„å®ç°æ–¹å¼æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬ä½¿ç”¨å•ä¾‹æ¨¡å¼æ˜¯é¿å…æ¯æ¬¡è°ƒç”¨ä¸€ä¸ªç±»å®ä¾‹æ—¶ï¼Œéƒ½è¦é‡å¤å®ä¾‹åŒ–è¯¥å®ä¾‹ï¼Œç›®çš„æ˜¯åœ¨ç±»æœ¬èº«è·å–å®ä¾‹åŒ–å¯¹è±¡çš„å”¯ä¸€æ€§ï¼›è€Œäº«å…ƒæ¨¡å¼åˆ™æ˜¯é€šè¿‡ä¸€ä¸ªå…±äº«å®¹å™¨æ¥å®ç°ä¸€ç³»åˆ—å¯¹è±¡çš„å…±äº«ã€‚</p><p>å…¶æ¬¡ï¼Œä¸¤è€…åœ¨ä½¿ç”¨åœºæ™¯ä¸Šä¹Ÿæ˜¯æœ‰åŒºåˆ«çš„ã€‚å•ä¾‹æ¨¡å¼æ›´å¤šçš„æ˜¯å¼ºè°ƒå‡å°‘å®ä¾‹åŒ–æå‡æ€§èƒ½ï¼Œå› æ­¤å®ƒä¸€èˆ¬æ˜¯ä½¿ç”¨åœ¨ä¸€äº›éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å®ä¾‹åŒ–å¯¹è±¡ï¼Œæˆ–åˆ›å»ºå’Œé”€æ¯å®ä¾‹åŒ–å¯¹è±¡éå¸¸æ¶ˆè€—èµ„æºçš„ç±»ä¸­ã€‚</p><p>ä¾‹å¦‚ï¼Œè¿æ¥æ± å’Œçº¿ç¨‹æ± ä¸­çš„è¿æ¥å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼å®ç°çš„ï¼Œæ•°æ®åº“æ“ä½œæ˜¯éå¸¸é¢‘ç¹çš„ï¼Œæ¯æ¬¡æ“ä½œéƒ½éœ€è¦åˆ›å»ºå’Œé”€æ¯è¿æ¥ï¼Œå¦‚æœä½¿ç”¨å•ä¾‹ï¼Œå¯ä»¥èŠ‚çœä¸æ–­æ–°å»ºå’Œå…³é—­æ•°æ®åº“è¿æ¥æ‰€å¼•èµ·çš„æ€§èƒ½æ¶ˆè€—ã€‚è€Œäº«å…ƒæ¨¡å¼æ›´å¤šçš„æ˜¯å¼ºè°ƒå…±äº«ç›¸åŒå¯¹è±¡æˆ–å¯¹è±¡å±æ€§ï¼Œä»¥æ­¤èŠ‚çº¦å†…å­˜ä½¿ç”¨ç©ºé—´ã€‚</p><p>é™¤äº†åŒºåˆ«ï¼Œè¿™ä¸¤ç§è®¾è®¡æ¨¡å¼ä¹Ÿæœ‰å…±æ€§ï¼Œå•ä¾‹æ¨¡å¼å¯ä»¥é¿å…é‡å¤åˆ›å»ºå¯¹è±¡ï¼ŒèŠ‚çº¦å†…å­˜ç©ºé—´ï¼Œäº«å…ƒæ¨¡å¼ä¹Ÿå¯ä»¥é¿å…ä¸€ä¸ªç±»çš„é‡å¤å®ä¾‹åŒ–ã€‚æ€»ä¹‹ï¼Œä¸¤è€…å¾ˆç›¸ä¼¼ï¼Œä½†ä¾§é‡ç‚¹ä¸ä¸€æ ·ï¼Œå‡å¦‚ç¢°åˆ°ä¸€äº›è¦åœ¨ä¸¤ç§è®¾è®¡æ¨¡å¼ä¸­åšé€‰æ‹©çš„åœºæ™¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ä¾§é‡ç‚¹æ¥é€‰æ‹©ã€‚</p><p><a href=\"https://time.geekbang.org/column/article/110862\">ç¬¬28è®²</a></p><p><strong>é™¤äº†ä»¥ä¸Šè¿™äº›å¤šçº¿ç¨‹çš„è®¾è®¡æ¨¡å¼ï¼ˆçº¿ç¨‹ä¸Šä¸‹æ–‡è®¾è®¡æ¨¡å¼ã€Thread-Per-Messageè®¾è®¡æ¨¡å¼ã€Worker-Threadè®¾è®¡æ¨¡å¼ï¼‰ï¼Œå¹³æ—¶ä½ è¿˜ä½¿ç”¨è¿‡å…¶å®ƒçš„è®¾è®¡æ¨¡å¼æ¥ä¼˜åŒ–å¤šçº¿ç¨‹ä¸šåŠ¡å—ï¼Ÿ</strong></p><p>åœ¨è¿™ä¸€è®²çš„ç•™è¨€åŒºï¼ŒundifinedåŒå­¦é—®åˆ°äº†ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨Worker-Threadè®¾è®¡æ¨¡å¼ï¼Œworkerçº¿ç¨‹å¦‚æœæ˜¯å¼‚æ­¥è¯·æ±‚å¤„ç†ï¼Œå½“æˆ‘ä»¬ç›‘å¬åˆ°æœ‰è¯·æ±‚è¿›æ¥ä¹‹åï¼Œå°†ä»»åŠ¡äº¤ç»™å·¥ä½œçº¿ç¨‹ï¼Œæ€ä¹ˆæ‹¿åˆ°è¿”å›ç»“æœï¼Œå¹¶è¿”å›ç»™ä¸»çº¿ç¨‹å‘¢ï¼Ÿ</p><p>å›ç­”è¿™ä¸ªé—®é¢˜çš„è¿‡ç¨‹ä¸­å°±ä¼šç”¨åˆ°ä¸€äº›åˆ«çš„è®¾è®¡æ¨¡å¼ï¼Œå¯ä»¥ä¸€èµ·çœ‹çœ‹ã€‚</p><p>å¦‚æœè¦è·å–åˆ°å¼‚æ­¥çº¿ç¨‹çš„æ‰§è¡Œç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Futureè®¾è®¡æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä»»åŠ¡ï¼Œéœ€è¦ä¸€å°æœºå™¨æ‰§è¡Œï¼Œä½†æ˜¯è¯¥ä»»åŠ¡éœ€è¦ä¸€ä¸ªå·¥äººåˆ†é…ç»™æœºå™¨æ‰§è¡Œï¼Œå½“æœºå™¨æ‰§è¡Œå®Œæˆä¹‹åï¼Œéœ€è¦é€šçŸ¥å·¥äººä»»åŠ¡çš„å…·ä½“å®Œæˆç»“æœã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è®¾è®¡ä¸€ä¸ªFutureæ¨¡å¼æ¥å®ç°è¿™ä¸ªä¸šåŠ¡ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç”³æ˜ä¸€ä¸ªä»»åŠ¡æ¥å£ï¼Œä¸»è¦æä¾›ç»™ä»»åŠ¡è®¾è®¡ï¼š</p><pre><code>public interface Task&lt;T, P&gt; {\n\tT doTask(P param);//å®Œæˆä»»åŠ¡\n}\n</code></pre><p>å…¶æ¬¡ï¼Œæˆ‘ä»¬ç”³æ˜ä¸€ä¸ªæäº¤ä»»åŠ¡æ¥å£ç±»ï¼ŒTaskServiceä¸»è¦ç”¨äºæäº¤ä»»åŠ¡ï¼Œæäº¤ä»»åŠ¡å¯ä»¥åˆ†ä¸ºéœ€è¦è¿”å›ç»“æœå’Œä¸éœ€è¦è¿”å›ç»“æœä¸¤ç§ï¼š</p><pre><code>public interface TaskService&lt;T, P&gt; {\n\tFuture&lt;?&gt; submit(Runnable  runnable);//æäº¤ä»»åŠ¡ï¼Œä¸è¿”å›ç»“æœ\n    Future&lt;?&gt; submit(Task&lt;T,P&gt; task, P param);//æäº¤ä»»åŠ¡ï¼Œå¹¶è¿”å›ç»“æœ\n}\n</code></pre><p>æ¥ç€ï¼Œæˆ‘ä»¬å†ç”³æ˜ä¸€ä¸ªæŸ¥è¯¢æ‰§è¡Œç»“æœçš„æ¥å£ç±»ï¼Œç”¨äºæäº¤ä»»åŠ¡ä¹‹åï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­æŸ¥è¯¢æ‰§è¡Œç»“æœï¼š</p><pre><code>public interface Future&lt;T&gt; {\n\n\tT get(); //è·å–è¿”å›ç»“æœ\n\tboolean done(); //åˆ¤æ–­æ˜¯å¦å®Œæˆ\n}\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å…ˆå®ç°è¿™ä¸ªä»»åŠ¡æ¥å£ç±»ï¼Œå½“éœ€è¦è¿”å›ç»“æœæ—¶ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨è·å–ç»“æœç±»çš„finishæ–¹æ³•å°†ç»“æœä¼ å›ç»™æŸ¥è¯¢æ‰§è¡Œç»“æœç±»ï¼š</p><pre><code>public class TaskServiceImpl&lt;T, P&gt; implements TaskService&lt;T, P&gt; {\n\n\t/**\n\t * æäº¤ä»»åŠ¡å®ç°æ–¹æ³•ï¼Œä¸éœ€è¦è¿”å›æ‰§è¡Œç»“æœ\n\t */\n\t@Override\n\tpublic Future&lt;?&gt; submit(Runnable runnable) {\n\t\tfinal FutureTask&lt;Void&gt; future = new FutureTask&lt;Void&gt;();\n\t\tnew Thread(() -&gt; {\n\t\t\trunnable.run();\n\t\t}, Thread.currentThread().getName()).start();\n\t\treturn future;\n\t}\n\t\n\t/**\n\t * æäº¤ä»»åŠ¡å®ç°æ–¹æ³•ï¼Œéœ€è¦è¿”å›æ‰§è¡Œç»“æœ\n\t */\n\t@Override\n\tpublic Future&lt;?&gt; submit(Task&lt;T, P&gt; task, P param) {\n\t\tfinal FutureTask&lt;T&gt; future = new FutureTask&lt;T&gt;();\n\t\tnew Thread(() -&gt; {\n\t\t\tT result = task.doTask(param);\n\t\t\tfuture.finish(result);\n\t\t}, Thread.currentThread().getName()).start();\n\t\treturn future;\n\t}\n}\n</code></pre><p>æœ€åï¼Œæˆ‘ä»¬å†å®ç°è¿™ä¸ªæŸ¥è¯¢æ‰§è¡Œç»“æœæ¥å£ç±»ï¼ŒFutureTaskä¸­ï¼Œget  å’Œ  finish  æ–¹æ³•åˆ©ç”¨äº†çº¿ç¨‹é—´çš„é€šä¿¡waitå’ŒnotifyAllå®ç°äº†çº¿ç¨‹çš„é˜»å¡å’Œå”¤é†’ã€‚å½“ä»»åŠ¡æ²¡æœ‰å®Œæˆä¹‹å‰é€šè¿‡getæ–¹æ³•è·å–ç»“æœï¼Œä¸»çº¿ç¨‹å°†ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆï¼Œå†ç”±ä»»åŠ¡çº¿ç¨‹è°ƒç”¨finishæ–¹æ³•å°†ç»“æœä¼ å›ç»™ä¸»çº¿ç¨‹ï¼Œå¹¶å”¤é†’è¯¥é˜»å¡çº¿ç¨‹ï¼š</p><pre><code>public class FutureTask&lt;T&gt; implements Future&lt;T&gt; {\n\n\tprivate T result;\n\tprivate boolean isDone = false;\n\tprivate final Object LOCK = new Object();\n\n\t@Override\n\tpublic T get() {\n\t\tsynchronized (LOCK) {\n\t\t\twhile (!isDone) {\n\t\t\t\ttry {\n\t\t\t\t\tLOCK.wait();//é˜»å¡ç­‰å¾…\n\t\t\t\t} catch (InterruptedException e) {\n\t\t\t\t\t// TODO Auto-generated catch block\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * è·å–åˆ°ç»“æœï¼Œå¹¶å”¤é†’é˜»å¡çº¿ç¨‹\n\t * @param result\n\t */\n\tpublic void finish(T result) {\n\t\tsynchronized (LOCK) {\n\t\t\tif (isDone) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.result = result;\n\t\t\tthis.isDone = true;\n\t\t\tLOCK.notifyAll();\n\t\t}\n\t}\n\n\t@Override\n\tpublic boolean done() {\n\t\treturn isDone;\n\t}\n}\n</code></pre><p>æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªé€ è½¦ä»»åŠ¡ï¼Œç„¶åç”¨ä»»åŠ¡æäº¤ç±»æäº¤è¯¥é€ è½¦ä»»åŠ¡ï¼š</p><pre><code>public class MakeCarTask&lt;T, P&gt; implements Task&lt;T, P&gt; {\n\n\t@SuppressWarnings(&quot;unchecked&quot;)\n\t@Override\n\tpublic T doTask(P param) {\n\t\t\n\t\tString car = param + &quot; is created success&quot;;\n\t\t\n\t\ttry {\n\t\t\tThread.sleep(2000);\n\t\t} catch (InterruptedException e) {\n\t\t\t// TODO Auto-generated catch block\n\t\t\te.printStackTrace();\n\t\t}\n\t\t\n\t\treturn (T) car;\n\t}\n}\n</code></pre><p>æœ€åè¿è¡Œè¯¥ä»»åŠ¡ï¼š</p><pre><code>public class App {\n\n\tpublic static void main(String[] args) {\n\t\t// TODO Auto-generated method stub\n\n\t\tTaskServiceImpl&lt;String, String&gt; taskService = new TaskServiceImpl&lt;String, String&gt;();//åˆ›å»ºä»»åŠ¡æäº¤ç±»\n\t\t MakeCarTask&lt;String, String&gt; task = new MakeCarTask&lt;String, String&gt;();//åˆ›å»ºä»»åŠ¡\n\t\t \n\t\t Future&lt;?&gt; future = taskService.submit(task, &quot;car1&quot;);//æäº¤ä»»åŠ¡\n\t\t String result = (String) future.get();//è·å–ç»“æœ\n\t\t \n\t\t System.out.print(result);\n\t}\n\n}\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>car1 is created success\n</code></pre><p>ä»JDK1.5èµ·ï¼ŒJavaå°±æä¾›äº†ä¸€ä¸ªFutureç±»ï¼Œå®ƒå¯ä»¥é€šè¿‡get()æ–¹æ³•é˜»å¡ç­‰å¾…è·å–å¼‚æ­¥æ‰§è¡Œçš„è¿”å›ç»“æœï¼Œç„¶è€Œè¿™ç§æ–¹å¼åœ¨æ€§èƒ½æ–¹é¢ä¼šæ¯”è¾ƒç³Ÿç³•ã€‚åœ¨JDK1.8ä¸­ï¼ŒJavaæä¾›äº†CompletableFutureç±»ï¼Œå®ƒæ˜¯åŸºäºå¼‚æ­¥å‡½æ•°å¼ç¼–ç¨‹ã€‚ç›¸å¯¹é˜»å¡å¼ç­‰å¾…è¿”å›ç»“æœï¼ŒCompletableFutureå¯ä»¥é€šè¿‡å›è°ƒçš„æ–¹å¼æ¥å¤„ç†è®¡ç®—ç»“æœï¼Œæ‰€ä»¥å®ç°äº†å¼‚æ­¥éé˜»å¡ï¼Œä»æ€§èƒ½ä¸Šæ¥è¯´å®ƒæ›´åŠ ä¼˜è¶Šäº†ã€‚</p><p>åœ¨Dubbo2.7.0ç‰ˆæœ¬ä¸­ï¼ŒDubboä¹Ÿæ˜¯åŸºäºCompletableFutureå®ç°äº†å¼‚æ­¥é€šä¿¡ï¼ŒåŸºäºå›è°ƒæ–¹å¼å®ç°äº†å¼‚æ­¥éé˜»å¡é€šä¿¡ï¼Œæ“ä½œéå¸¸ç®€å•æ–¹ä¾¿ã€‚</p><p><a href=\"https://time.geekbang.org/column/article/111288\">ç¬¬29è®²</a></p><p><strong>æˆ‘ä»¬å¯ä»¥ç”¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼æ¥å®ç°ç¬æ—¶é«˜å¹¶å‘çš„æµé‡å‰Šå³°ï¼Œç„¶è€Œè¿™æ ·åšè™½ç„¶ç¼“è§£äº†æ¶ˆè´¹æ–¹çš„å‹åŠ›ï¼Œä½†ç”Ÿäº§æ–¹åˆ™ä¼šå› ä¸ºç¬æ—¶é«˜å¹¶å‘ï¼Œè€Œå‘ç”Ÿå¤§é‡çº¿ç¨‹é˜»å¡ã€‚é¢å¯¹è¿™æ ·çš„æƒ…å†µï¼Œä½ çŸ¥é“æœ‰ä»€ä¹ˆæ–¹å¼å¯ä»¥ä¼˜åŒ–çº¿ç¨‹é˜»å¡æ‰€å¸¦æ¥çš„æ€§èƒ½é—®é¢˜å—ï¼Ÿ</strong></p><p>æ— è®ºæˆ‘ä»¬çš„ç¨‹åºä¼˜åŒ–å¾—æœ‰å¤šä¹ˆå‡ºè‰²ï¼Œåªè¦å¹¶å‘ä¸Šæ¥ï¼Œä¾ç„¶ä¼šå‡ºç°ç“¶é¢ˆã€‚è™½ç„¶ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼å¯ä»¥å¸®æˆ‘ä»¬å®ç°æµé‡å‰Šå³°ï¼Œä½†æ˜¯å½“å¹¶å‘é‡ä¸Šæ¥ä¹‹åï¼Œä¾ç„¶æœ‰å¯èƒ½å¯¼è‡´ç”Ÿäº§æ–¹å¤§é‡çº¿ç¨‹é˜»å¡ç­‰å¾…ï¼Œå¼•èµ·ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¢åŠ ç³»ç»Ÿæ€§èƒ½å¼€é”€ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨æ¥å…¥å±‚åšé™æµã€‚</p><p>é™æµçš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨çº¿ç¨‹æ± ã€ä½¿ç”¨Guavaçš„RateLimiterç­‰ã€‚ä½†å½’æ ¹ç»“åº•ï¼Œå®ƒä»¬éƒ½æ˜¯åŸºäºè¿™ä¸¤ç§é™æµç®—æ³•æ¥å®ç°çš„ï¼šæ¼æ¡¶ç®—æ³•å’Œä»¤ç‰Œæ¡¶ç®—æ³•ã€‚</p><p>æ¼æ¡¶ç®—æ³•æ˜¯åŸºäºä¸€ä¸ªæ¼æ¡¶æ¥å®ç°çš„ï¼Œæˆ‘ä»¬çš„è¯·æ±‚å¦‚æœè¦è¿›å…¥åˆ°ä¸šåŠ¡å±‚ï¼Œå¿…é¡»ç»è¿‡æ¼æ¡¶ï¼Œæ¼æ¡¶å‡ºå£çš„è¯·æ±‚é€Ÿç‡æ˜¯å‡è¡¡çš„ï¼Œå½“å…¥å£çš„è¯·æ±‚é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå¦‚æœæ¼æ¡¶å·²ç»æ»¡äº†ï¼Œè¯·æ±‚å°†ä¼šæº¢å‡ºï¼ˆè¢«æ‹’ç»ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¿è¯ä»æ¼æ¡¶å‡ºæ¥çš„è¯·æ±‚é‡æ°¸è¿œæ˜¯å‡è¡¡çš„ï¼Œä¸ä¼šå› ä¸ºå…¥å£çš„è¯·æ±‚é‡çªç„¶å¢å¤§ï¼Œè‡´ä½¿è¿›å…¥ä¸šåŠ¡å±‚çš„å¹¶å‘é‡è¿‡å¤§è€Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p><p>ä»¤ç‰Œæ¡¶ç®—æ³•æ˜¯æŒ‡ç³»ç»Ÿä¼šä»¥ä¸€ä¸ªæ’å®šçš„é€Ÿåº¦åœ¨ä¸€ä¸ªæ¡¶ä¸­æ”¾å…¥ä»¤ç‰Œï¼Œä¸€ä¸ªè¯·æ±‚å¦‚æœè¦è¿›æ¥ï¼Œå®ƒéœ€è¦æ‹¿åˆ°ä¸€ä¸ªä»¤ç‰Œæ‰èƒ½è¿›å…¥åˆ°ä¸šåŠ¡å±‚ï¼Œå½“æ¡¶é‡Œæ²¡æœ‰ä»¤ç‰Œå¯ä»¥å–æ—¶ï¼Œåˆ™è¯·æ±‚ä¼šè¢«æ‹’ç»ã€‚Googleçš„GuavaåŒ…ä¸­çš„RateLimiterå°±æ˜¯åŸºäºä»¤ç‰Œæ¡¶ç®—æ³•å®ç°çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ¼æ¡¶ç®—æ³•å¯ä»¥é€šè¿‡é™åˆ¶å®¹é‡æ± å¤§å°æ¥æ§åˆ¶æµé‡ï¼Œè€Œä»¤ç‰Œç®—æ³•åˆ™å¯ä»¥é€šè¿‡é™åˆ¶å‘æ”¾ä»¤ç‰Œçš„é€Ÿç‡æ¥æ§åˆ¶æµé‡ã€‚</p><p><a href=\"https://time.geekbang.org/column/article/111600\">ç¬¬30è®²</a></p><p><strong>è´£ä»»é“¾æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ä¸è£…é¥°å™¨æ¨¡å¼æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ã€‚åœ¨å¹³æ—¶ï¼Œè¿™äº›è®¾è®¡æ¨¡å¼é™¤äº†åœ¨ä¸šåŠ¡ä¸­è¢«ç”¨åˆ°ä¹‹å¤–ï¼Œåœ¨æ¶æ„è®¾è®¡ä¸­ä¹Ÿç»å¸¸è¢«ç”¨åˆ°ï¼Œä½ æ˜¯å¦åœ¨æºç ä¸­è§è¿‡è¿™å‡ ç§è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯å‘¢ï¼Ÿæ¬¢è¿ä½ ä¸å¤§å®¶åˆ†äº«ã€‚</strong></p><p>è´£ä»»é“¾æ¨¡å¼ç»å¸¸è¢«ç”¨åœ¨ä¸€ä¸ªå¤„ç†éœ€è¦ç»å†å¤šä¸ªäº‹ä»¶å¤„ç†çš„åœºæ™¯ã€‚ä¸ºäº†é¿å…ä¸€ä¸ªå¤„ç†è·Ÿå¤šä¸ªäº‹ä»¶è€¦åˆåœ¨ä¸€èµ·ï¼Œè¯¥æ¨¡å¼ä¼šå°†å¤šä¸ªäº‹ä»¶è¿æˆä¸€æ¡é“¾ï¼Œé€šè¿‡è¿™æ¡é“¾è·¯å°†æ¯ä¸ªäº‹ä»¶çš„å¤„ç†ç»“æœä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„ç†äº‹ä»¶ã€‚è´£ä»»é“¾æ¨¡å¼ç”±ä¸¤ä¸ªä¸»è¦å®ç°ç±»ç»„æˆï¼šæŠ½è±¡å¤„ç†ç±»å’Œå…·ä½“å¤„ç†ç±»ã€‚</p><p>å¦å¤–ï¼Œå¾ˆå¤šå¼€æºæ¡†æ¶ä¹Ÿç”¨åˆ°äº†è´£ä»»é“¾æ¨¡å¼ï¼Œä¾‹å¦‚Dubboä¸­çš„Filterå°±æ˜¯åŸºäºè¯¥æ¨¡å¼å®ç°çš„ã€‚è€ŒDubboçš„è®¸å¤šåŠŸèƒ½éƒ½æ˜¯é€šè¿‡Filteræ‰©å±•å®ç°çš„ï¼Œæ¯”å¦‚ç¼“å­˜ã€æ—¥å¿—ã€ç›‘æ§ã€å®‰å…¨ã€telnetä»¥åŠRPCæœ¬èº«ï¼Œè´£ä»»é“¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å®ç°äº†Filteræ¥å£ï¼Œç„¶åç”±ProtocolFilterWrapperå°†æ‰€æœ‰çš„Filterä¸²è¿èµ·æ¥ã€‚</p><p>ç­–ç•¥æ¨¡å¼ä¸è£…é¥°å™¨æ¨¡å¼åˆ™æ›´ä¸ºç›¸ä¼¼ï¼Œç­–ç•¥æ¨¡å¼ä¸»è¦ç”±ä¸€ä¸ªç­–ç•¥åŸºç±»ã€å…·ä½“ç­–ç•¥ç±»ä»¥åŠä¸€ä¸ªå·¥å‚ç¯å¢ƒç±»ç»„æˆï¼Œä¸è£…é¥°å™¨æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œç­–ç•¥æ¨¡å¼æ˜¯æŒ‡æŸä¸ªå¯¹è±¡åœ¨ä¸åŒçš„åœºæ™¯ä¸­ï¼Œé€‰æ‹©çš„å®ç°ç­–ç•¥ä¸ä¸€æ ·ã€‚ä¾‹å¦‚ï¼ŒåŒæ ·æ˜¯ä»·æ ¼ç­–ç•¥ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼å®ç°ã€‚åŸºäºçº¢åŒ…çš„ä¿ƒé”€æ´»åŠ¨å•†å“ï¼Œåªèƒ½ä½¿ç”¨çº¢åŒ…ç­–ç•¥ï¼Œè€ŒåŸºäºæŠ˜æ‰£åˆ¸çš„ä¿ƒé”€æ´»åŠ¨å•†å“ï¼Œä¹Ÿåªèƒ½ä½¿ç”¨æŠ˜æ‰£åˆ¸ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯æ¨¡å—äº”æ‰€æœ‰æ€è€ƒé¢˜çš„ç­”æ¡ˆï¼Œç°åœ¨ä¸å¦¨å’Œä½ çš„ç­”æ¡ˆç»“åˆä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ–°çš„æ”¶è·å‘¢ï¼Ÿå¦‚æœä½ è¿˜æœ‰å…¶å®ƒé—®é¢˜ï¼Œè¯·åœ¨ç•™è¨€åŒºä¸­æå‡ºï¼Œæˆ‘ä¼šä¸€ä¸€è§£ç­”ã€‚æœ€åæ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€è¯·ä»–åŠ å…¥è®¨è®ºã€‚</p><p></p>","comments":[{"had_liked":false,"id":120086,"user_name":"å‘æ¡æ©™å­ ã€‚","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1564787738,"is_pvip":false,"replies":[{"id":"44101","content":"1ã€å¤–éƒ¨ç±»åˆæ¬¡åŠ è½½ï¼Œä¼šåˆå§‹åŒ–é™æ€å˜é‡ã€é™æ€ä»£ç å—ã€é™æ€æ–¹æ³•ï¼Œä½†ä¸ä¼šåŠ è½½å†…éƒ¨ç±»å’Œé™æ€å†…éƒ¨ç±»ã€‚<br><br>å¦‚æœæˆ‘ä»¬ä½¿ç”¨å†…éƒ¨ç±»å®ç°ï¼Œä¸ä¼šåœ¨åˆå§‹åŒ–ç±»æ—¶åŠ è½½å†…éƒ¨ç±»ï¼Œåªæœ‰åœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨EnumSingleton.INSTANCEï¼Œæ‰ä¼šåŠ è½½ EnumSingleton ç±»ï¼Œè€Œåªæœ‰åœ¨åŠ è½½EnumSingletonç±»ä¹‹åï¼Œæ‰ä¼šå®ä¾‹åŒ–åˆ›å»ºINSTANCEå¯¹è±¡ï¼Œç”±äºINSTANCEæ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ–æ—¶ç”±&lt;clinit&gt; æ–¹æ³•ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚<br><br>2ã€å…ƒç©ºé—´å­˜æ”¾çš„æ˜¯ç±»å…ƒç´ ï¼Œè€Œé™æ€å¸¸é‡æ± å­˜æ”¾çš„æ˜¯ç±»çš„å­—é¢é‡å’Œå­—ç¬¦å¼•ç”¨ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± å­˜æ”¾çš„æ˜¯ç›´æ¥å¼•ç”¨ã€‚è¿™é‡Œçš„é™æ€å¸¸é‡æ± ä¹Ÿæ˜¯å¾ˆå¤šäººè¯´çš„å­—ç¬¦ä¸²å¸¸é‡æ± ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1564798955,"ip_address":"","comment_id":120086,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57399362586","product_id":100028001,"comment_content":"è€å¸ˆï¼Œ å¯¹äºå•ä¾‹æ¨¡å¼é‚£å—è¿˜æ˜¯æœ‰äº›ä¸è§£ï¼Œå¸Œæœ›è€å¸ˆè§£ç­” ï¼šğŸ˜„<br><br>åœ¨ç±»åˆå§‹åŒ–æ—¶ ä¼šå°† staticæˆå‘˜å˜é‡æ”¾åˆ° &lt;clinit&gt; æ–¹æ³•ä¸­ ï¼Œåœ¨ç±»åŠ è½½å‡†å¤‡é˜¶æ®µè´Ÿè´£ä¸ºå…¶åˆ›å»ºå†…å­˜ï¼Œåˆ°äº†åˆå§‹åŒ–é˜¶æ®µæ‰§è¡Œ&lt;clinit &gt;æ–¹æ³• è¿›è¡Œèµ‹å€¼ã€‚ <br><br>1. è¯·é—®åœ¨ç±»åŠ è½½çš„æ—¶å€™ä¹Ÿä¼šå­˜åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¹ˆï¼Ÿè¿™å—ä¸å¤ªå¥½ç†è§£ ã€‚ä»¥åŠåé¢æ”¹æˆäº†åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç±»ï¼Œ åœ¨ç±»åŠ è½½çš„æ—¶å€™å†…éƒ¨ç±»åº”è¯¥ä¼šä¸€èµ·è¢«åŠ è½½ ï¼Œè¿™æ—¶å€™å†…éƒ¨ç±»ä¸­çš„staticä¹Ÿä¼šä¸€èµ·è¢«èµ‹å€¼ï¼Œå’Œç›´æ¥åœ¨å¤–å±‚çš„ç±»ä¸­ç›´æ¥åˆå§‹åŒ–æœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆ  ï¼Ÿ<br><br>2. è€å¸ˆï¼Œå¦å¤–æœ‰ä¸ªç‚¹æƒ³ç¡®è®¤ä¸‹ï¼Œ ç±»çš„å­—é¢é‡ï¼ˆå­—ç¬¦ä¸²å’Œfinalä¿®é¥°çš„æˆå‘˜å˜é‡ï¼‰ä¼šåœ¨ç±»åŠ è½½çš„æ—¶å€™è¢«æ”¾åˆ°å †çš„æ°¸ä¹…ä»£ä¸­ï¼ˆè¿è¡Œæ—¶å¸¸é‡æ± ï¼‰ã€‚é‚£ staticä¿®é¥°çš„æˆå‘˜å˜é‡è¿˜æ˜¯æ”¾åœ¨å…ƒæ•°æ®ç©ºé—´é‡Œæ˜¯ä¹ˆ <br>","like_count":14,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461197,"discussion_content":"1ã€å¤–éƒ¨ç±»åˆæ¬¡åŠ è½½ï¼Œä¼šåˆå§‹åŒ–é™æ€å˜é‡ã€é™æ€ä»£ç å—ã€é™æ€æ–¹æ³•ï¼Œä½†ä¸ä¼šåŠ è½½å†…éƒ¨ç±»å’Œé™æ€å†…éƒ¨ç±»ã€‚\n\nå¦‚æœæˆ‘ä»¬ä½¿ç”¨å†…éƒ¨ç±»å®ç°ï¼Œä¸ä¼šåœ¨åˆå§‹åŒ–ç±»æ—¶åŠ è½½å†…éƒ¨ç±»ï¼Œåªæœ‰åœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨EnumSingleton.INSTANCEï¼Œæ‰ä¼šåŠ è½½ EnumSingleton ç±»ï¼Œè€Œåªæœ‰åœ¨åŠ è½½EnumSingletonç±»ä¹‹åï¼Œæ‰ä¼šå®ä¾‹åŒ–åˆ›å»ºINSTANCEå¯¹è±¡ï¼Œç”±äºINSTANCEæ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ–æ—¶ç”±&amp;lt;clinit&amp;gt; æ–¹æ³•ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚\n\n2ã€å…ƒç©ºé—´å­˜æ”¾çš„æ˜¯ç±»å…ƒç´ ï¼Œè€Œé™æ€å¸¸é‡æ± å­˜æ”¾çš„æ˜¯ç±»çš„å­—é¢é‡å’Œå­—ç¬¦å¼•ç”¨ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± å­˜æ”¾çš„æ˜¯ç›´æ¥å¼•ç”¨ã€‚è¿™é‡Œçš„é™æ€å¸¸é‡æ± ä¹Ÿæ˜¯å¾ˆå¤šäººè¯´çš„å­—ç¬¦ä¸²å¸¸é‡æ± ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564798955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120333,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1564834935,"is_pvip":false,"replies":[{"id":"44500","content":"åŒæ ·æ„Ÿè°¢ä½ ä»¬ä¸€è·¯ä»¥æ¥çš„åšæŒå’Œæ”¯æŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565059536,"ip_address":"","comment_id":120333,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18744704119","product_id":100028001,"comment_content":"æ‰“å¡ï¼Œè½¬çœ¼å·²è¿‡å¤§åŠï¼Œæ„Ÿè°¢è€å¸ˆä¸€è‡´ä»¥æ¥çš„åˆ†äº«ã€‚æ£’æ£’çš„ã€‚","like_count":4,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461291,"discussion_content":"åŒæ ·æ„Ÿè°¢ä½ ä»¬ä¸€è·¯ä»¥æ¥çš„åšæŒå’Œæ”¯æŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565059536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120070,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1564769878,"is_pvip":false,"replies":[{"id":"44102","content":"ä¸‹ä¸€è®²å¼€å§‹è®²åˆ°æ•°æ®åº“è°ƒä¼˜äº†ï¼Œæ¬¢è¿ä¸€èµ·å­¦ä¹ æˆé•¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1564799016,"ip_address":"","comment_id":120070,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14449671766","product_id":100028001,"comment_content":"è€å¸ˆä¼šè®²æ•°æ®åº“è°ƒä¼˜ä¹ˆï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461192,"discussion_content":"ä¸‹ä¸€è®²å¼€å§‹è®²åˆ°æ•°æ®åº“è°ƒä¼˜äº†ï¼Œæ¬¢è¿ä¸€èµ·å­¦ä¹ æˆé•¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564799016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122278,"user_name":"suncar","can_delete":false,"product_type":"c1","uid":1077735,"ip_address":"","ucode":"4BD3C9F1E7CA96","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJDhZkQGEnzjnu3dibxbRiblWIUjXXrXic0MStUS2ApKt5WiaoxV3IVhAtSXkknODA9oibick3NHic4Frzfw/0","comment_is_top":false,"comment_ctime":1565328869,"is_pvip":false,"replies":[{"id":"45105","content":"è¿™ç›¸å½“äºä¸¤ä¸ªJVMï¼Œè®¾ç½®çš„å‚æ•°æ˜¯äº’ä¸å½±å“çš„ã€‚ä½†æ˜¯è¿˜æ˜¯ä¼šå­˜åœ¨ç›¸äº’å½±å“çš„æƒ…å†µï¼Œä¼šå­˜åœ¨ç›¸äº’ç«äº‰ä¸€äº›å…±äº«èµ„æºçš„æƒ…å†µï¼Œä¾‹å¦‚CPUï¼ŒIOç­‰","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565574887,"ip_address":"","comment_id":122278,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5860296165","product_id":100028001,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ã€‚å¦‚æœåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸¤ä¸ªåº”ç”¨ã€‚æ˜¯ä¸æ˜¯JDKåº”è¯¥å¯¹åº”ä¸€ä¸ªåº”ç”¨ã€‚å•ç‹¬å¯¹ jvmè¿›è¡Œä¼˜åŒ–ã€‚æˆ‘è§‰å¾—è¿™æ ·çš„éƒ¨ç½²è¯ JVMå‚æ•°é…ç½®ç›¸äº’ä¸å½±å“ï¼Œæ€§èƒ½æ¯”è¾ƒé«˜ã€‚ä¸çŸ¥åˆ°è¿™æ ·æ˜¯å¦åˆç†ï¼Ÿè¯·è€å¸ˆç»™ç‚¹å»ºè®®","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462184,"discussion_content":"è¿™ç›¸å½“äºä¸¤ä¸ªJVMï¼Œè®¾ç½®çš„å‚æ•°æ˜¯äº’ä¸å½±å“çš„ã€‚ä½†æ˜¯è¿˜æ˜¯ä¼šå­˜åœ¨ç›¸äº’å½±å“çš„æƒ…å†µï¼Œä¼šå­˜åœ¨ç›¸äº’ç«äº‰ä¸€äº›å…±äº«èµ„æºçš„æƒ…å†µï¼Œä¾‹å¦‚CPUï¼ŒIOç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565574887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1077735,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJDhZkQGEnzjnu3dibxbRiblWIUjXXrXic0MStUS2ApKt5WiaoxV3IVhAtSXkknODA9oibick3NHic4Frzfw/0","nickname":"suncar","note":"","ucode":"4BD3C9F1E7CA96","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4633,"discussion_content":"è€å¸ˆï¼Œé‚£ä¹ˆå¦‚æœé‡‡ç”¨docker å®¹å™¨éƒ¨ç½²çš„è¯ï¼Œæ¯ä¸ªå®¹å™¨ä¸­ä¸€ä¸ªjvmï¼Œè¿è¡Œåœ¨åŒä¸€ä¸»æœºä¸Šï¼Œæ˜¯ä¸æ˜¯åŒæ ·ä¼šäº§ç”Ÿcpuï¼Œio ç«äº‰ã€‚åƒåŒåä¸€é‚£ç§æƒ…å†µï¼Œä¼šä¸ä¼šå°†é«˜å¹¶å‘çš„åº”ç”¨éƒ¨ç½²åˆ°å•ç‹¬çš„ç‰©ç†æœºé›†ç¾¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565609431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121065,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1565053927,"is_pvip":false,"replies":[{"id":"44514","content":"æšä¸¾ç±»çš„åŸŸï¼Œå³ä»£ç ä¸­çš„INSTANCEå°±æ˜¯æˆ‘ä»¬å·²ç»å®ä¾‹åŒ–å¯¹è±¡çš„å±æ€§äº†ï¼Œç›¸å½“äºprivate static Singleton instance=new Singleton()ã€‚ æ­£å¸¸çš„æšä¸¾å®ç°æ˜¯ä¸€ä¸ªé¥¿æ±‰æ¨¡å¼ï¼Œæ²¡æœ‰æ‡’åŠ è½½çš„å®ç°ã€‚æšä¸¾ç±»çš„è¿™ä¸ªå¯ä»¥å†ä»”ç»†æ€è€ƒä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565061268,"ip_address":"","comment_id":121065,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860021223","product_id":100028001,"comment_content":"å•ä¾‹åº”è¯¥ä½œä¸ºæšä¸¾ç±»å‹çš„ä¸€ä¸ªå±æ€§ï¼Œåœ¨ç§æœ‰æ„é€ æ–¹æ³•å†…åˆ›å»ºå¹¶åˆå§‹åŒ–ï¼Œæš´éœ²ä¸€ä¸ªè·å–æ–¹æ³•ï¼Œé€šè¿‡æšä¸¾å®ä¾‹å»è·å–å•ä¾‹æ—¶ä¼šè§¦å‘å•ä¾‹åˆå§‹åŒ–ï¼Œè¿™é‡Œæ˜¯å¦æœ‰å¿…è¦åŒºåˆ†æ‡’æ±‰æ¶æ±‰ï¼Ÿè°ˆè¯å…³æ³¨ç‚¹ä¸åº”è¯¥åœ¨æšä¸¾å®ä¾‹ä¸Šå§","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461603,"discussion_content":"æšä¸¾ç±»çš„åŸŸï¼Œå³ä»£ç ä¸­çš„INSTANCEå°±æ˜¯æˆ‘ä»¬å·²ç»å®ä¾‹åŒ–å¯¹è±¡çš„å±æ€§äº†ï¼Œç›¸å½“äºprivate static Singleton instance=new Singleton()ã€‚ æ­£å¸¸çš„æšä¸¾å®ç°æ˜¯ä¸€ä¸ªé¥¿æ±‰æ¨¡å¼ï¼Œæ²¡æœ‰æ‡’åŠ è½½çš„å®ç°ã€‚æšä¸¾ç±»çš„è¿™ä¸ªå¯ä»¥å†ä»”ç»†æ€è€ƒä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565061268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121062,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1565053720,"is_pvip":false,"replies":[{"id":"44513","content":"æšä¸¾æ˜¯é¥¿æ±‰æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯åœ¨å±æ€§ä¸­å·²ç»å®ä¾‹åŒ–äº†ï¼Œç›¸å½“äºæˆ‘ä»¬æœ€å¼€å§‹è®²çš„é¥¿æ±‰æ¨¡å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565061016,"ip_address":"","comment_id":121062,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860021016","product_id":100028001,"comment_content":"æšä¸¾å•ä¾‹è¿™é‡Œæ²¡çœ‹æ‡‚ï¼Œå•ä¾‹ä¸åº”è¯¥æ˜¯ä½œä¸ºæšä¸¾ç±»çš„ä¸€ä¸ªå±æ€§ï¼Œç„¶ååœ¨æšä¸¾çš„ç§æœ‰æ„é€ æ–¹æ³•å†…å®åŠ›åŒ–","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461601,"discussion_content":"æšä¸¾æ˜¯é¥¿æ±‰æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯åœ¨å±æ€§ä¸­å·²ç»å®ä¾‹åŒ–äº†ï¼Œç›¸å½“äºæˆ‘ä»¬æœ€å¼€å§‹è®²çš„é¥¿æ±‰æ¨¡å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565061016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120255,"user_name":"å¤±ç«çš„å¤å¤©","can_delete":false,"product_type":"c1","uid":1241770,"ip_address":"","ucode":"10C6E66EB2A65F","user_header":"https://static001.geekbang.org/account/avatar/00/12/f2/aa/32fc0d54.jpg","comment_is_top":false,"comment_ctime":1564815620,"is_pvip":false,"replies":[{"id":"44499","content":"æˆ‘ç†è§£çš„æ˜¯ï¼Œé™æ€å†…éƒ¨ç±»æ˜¯ä¸€ä¸ªç‹¬ç«‹ç±»ï¼Œåªæ˜¯å€Ÿç”¨å¤–éƒ¨ç±»æ¥éšè—è‡ªå·±ã€‚è·Ÿå¤–éƒ¨ç±»æ²¡æœ‰å®è´¨æ€§çš„å…³ç³»ï¼Œå³å†…éƒ¨é™æ€ç±»ä¸éœ€è¦æœ‰æŒ‡å‘å¤–éƒ¨ç±»çš„å¼•ç”¨ã€‚ mapçš„nodeä»¥åŠlistçš„nodeéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹ç±»ï¼Œä¸å±äºmapå’Œlistï¼Œä½†nodeåˆæƒ³å€Ÿå¤–éƒ¨ç±»æ¥å­˜æ”¾è‡ªå·±ã€‚è¿™ç§æ–¹å¼ä¹Ÿå¯ä»¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚<br><br>è€Œå†…éƒ¨ç±»åˆ™ä¸ä¸€æ ·ï¼Œå†…éƒ¨ç±»åªèƒ½åœ¨å¤–éƒ¨ç±»ä¸­å®ä¾‹åŒ–è¢«ä½¿ç”¨ï¼Œå±äºçœŸæ­£çš„å†…éƒ¨ç±»ï¼Œå±äºå¤–éƒ¨ç±»çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„ä»»ä½•æˆå‘˜å˜é‡ã€‚éé™æ€å†…éƒ¨ç±»éœ€è¦æŒæœ‰å¯¹å¤–éƒ¨ç±»çš„å¼•ç”¨ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565059467,"ip_address":"","comment_id":120255,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5859782916","product_id":100028001,"comment_content":"è€å¸ˆæˆ‘é—®ä¸€ä¸‹ï¼Œå†…éƒ¨ç±»å’Œé™æ€å†…éƒ¨ç±»çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå“ªé‡Œæœ‰ä¸åŒï¼Œæˆ‘çœ‹jdké‡Œmapçš„nodeï¼Œè¿˜æœ‰listçš„nodeéƒ½æ˜¯é™æ€çš„ã€‚ä¹‹å‰æœ‰çœ‹åˆ°è®¾ç½®æˆé™æ€æ˜¯ä¸ºäº†é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œä½†æ˜¯æ²¡æœ‰æƒ³æ˜ç™½æ˜¯ä¸ºä»€ä¹ˆ","like_count":2,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461259,"discussion_content":"æˆ‘ç†è§£çš„æ˜¯ï¼Œé™æ€å†…éƒ¨ç±»æ˜¯ä¸€ä¸ªç‹¬ç«‹ç±»ï¼Œåªæ˜¯å€Ÿç”¨å¤–éƒ¨ç±»æ¥éšè—è‡ªå·±ã€‚è·Ÿå¤–éƒ¨ç±»æ²¡æœ‰å®è´¨æ€§çš„å…³ç³»ï¼Œå³å†…éƒ¨é™æ€ç±»ä¸éœ€è¦æœ‰æŒ‡å‘å¤–éƒ¨ç±»çš„å¼•ç”¨ã€‚ mapçš„nodeä»¥åŠlistçš„nodeéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹ç±»ï¼Œä¸å±äºmapå’Œlistï¼Œä½†nodeåˆæƒ³å€Ÿå¤–éƒ¨ç±»æ¥å­˜æ”¾è‡ªå·±ã€‚è¿™ç§æ–¹å¼ä¹Ÿå¯ä»¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚\n\nè€Œå†…éƒ¨ç±»åˆ™ä¸ä¸€æ ·ï¼Œå†…éƒ¨ç±»åªèƒ½åœ¨å¤–éƒ¨ç±»ä¸­å®ä¾‹åŒ–è¢«ä½¿ç”¨ï¼Œå±äºçœŸæ­£çš„å†…éƒ¨ç±»ï¼Œå±äºå¤–éƒ¨ç±»çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„ä»»ä½•æˆå‘˜å˜é‡ã€‚éé™æ€å†…éƒ¨ç±»éœ€è¦æŒæœ‰å¯¹å¤–éƒ¨ç±»çš„å¼•ç”¨ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565059467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241770,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f2/aa/32fc0d54.jpg","nickname":"å¤±ç«çš„å¤å¤©","note":"","ucode":"10C6E66EB2A65F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4014,"discussion_content":"è¿™ä¸ªé˜²æ­¢å†…å­˜æ³„éœ²æ˜¯å› ä¸ºåˆ‡æ–­äº†å†…éƒ¨ç±»å’Œå¤–éƒ¨ç±»å¾—å…³ç³»å—ï¼Ÿå°±æ˜¯è¯´å†…éƒ¨ç±»ä¸ä¾èµ–å¤–éƒ¨ç±»ï¼Œä¸ä¼šå› ä¸ºæŸä¸ªå¤–éƒ¨ç±»ä¸€ç›´å­˜åœ¨è€Œå¯¼è‡´å†…éƒ¨ç±»æ— æ³•è¢«å›æ”¶å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565060423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1241770,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f2/aa/32fc0d54.jpg","nickname":"å¤±ç«çš„å¤å¤©","note":"","ucode":"10C6E66EB2A65F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304113,"discussion_content":"æ˜¯å› ä¸ºé™æ€å†…éƒ¨ç±»ï¼Œä¸è¢«è°ƒç”¨æ ¹æœ¬ä¸åŠ è½½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599471666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4014,"ip_address":""},"score":304113,"extra":""},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1241770,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f2/aa/32fc0d54.jpg","nickname":"å¤±ç«çš„å¤å¤©","note":"","ucode":"10C6E66EB2A65F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304115,"discussion_content":"å¤–éƒ¨ç±»å­˜ä¸å­˜åœ¨è·Ÿé™æ€å†…éƒ¨ç±»æ²¡å…³ç³»çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599471764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4014,"ip_address":""},"score":304115,"extra":""}]}]},{"had_liked":false,"id":134675,"user_name":"è¡Œåˆ™å°†è‡³","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1568891160,"is_pvip":false,"replies":[{"id":"51870","content":"å¯¹çš„ï¼Œä¸ç”¨ä½¿ç”¨staticä¿®é¥°","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1569054568,"ip_address":"","comment_id":134675,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1568891160","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæ‚¨åœ¨æšä¸¾å•ä¾‹çš„ä¾‹å­ã€‚<br>&#47;&#47; æ‡’æ±‰æ¨¡å¼ æšä¸¾å®ç°<br>public class Singleton {<br>    INSTANCE;&#47;&#47; ä¸å®ä¾‹åŒ–<br>    public List&lt;String&gt; list = null;&#47;&#47; list å±æ€§<br><br>\tprivate Singleton(){&#47;&#47; æ„é€ å‡½æ•°<br>\t\tlist = new ArrayList&lt;String&gt;();<br>\t}<br>    &#47;&#47; ä½¿ç”¨æšä¸¾ä½œä¸ºå†…éƒ¨ç±»<br>    private enum EnumSingleton {<br>        INSTANCE;&#47;&#47; ä¸å®ä¾‹åŒ–<br>        private Singleton instance = null;<br><br>        private EnumSingleton(){&#47;&#47; æ„é€ å‡½æ•°<br>\t\t    instance = new Singleton();<br>     \t}<br>        public static Singleton getSingleton(){<br>            return instance;&#47;&#47; è¿”å›å·²å­˜åœ¨çš„å¯¹è±¡<br>        }<br>    }<br><br>    public static Singleton getInstance(){<br>        return EnumSingleton.INSTANCE.getSingleton();&#47;&#47; è¿”å›å·²å­˜åœ¨çš„å¯¹è±¡<br>    }<br>}<br>é—®ï¼š<br>æšä¸¾ç±»çš„getSingletonæ–¹æ³•ä¸èƒ½ç”¨staticä¿®é¥°å§ï¼Ÿ<br>Singletonå­—æ®µæ²¡æœ‰è¢«staticä¿®é¥°ï¼ŒgetSingletonæ–¹æ³•åº”è¯¥å¼•ç”¨ä¸åˆ°Singltonå­—æ®µå•Šï¼Ÿ<br>ç¼–è¯‘è¿‡ä¸å»","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467859,"discussion_content":"å¯¹çš„ï¼Œä¸ç”¨ä½¿ç”¨staticä¿®é¥°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569054568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134593,"user_name":"è¡Œåˆ™å°†è‡³","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1568875888,"is_pvip":false,"replies":[{"id":"51649","content":"é€šè¿‡åŠ¨æ‰‹å®ç°ï¼Œæ›´é€å½»çš„ç†è§£Futureçš„å®ç°åŸç†","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568895174,"ip_address":"","comment_id":134593,"utype":1}],"discussion_count":2,"race_medal":1,"score":"1568875888","product_id":100028001,"comment_content":"è€å¸ˆï¼ŒFutureè®¾è®¡æ¨¡å¼ã€‚æˆ‘è‡ªå·±ç”»äº†ä¸€ä¸‹ç±»å›¾ã€‚æ„Ÿè§‰è¿™å®Œå…¨æ˜¯åœ¨æ¨¡æ‹Ÿçº¿ç¨‹æ± çš„submit(Callable callable)çš„æ¨¡å¼å•Šã€‚æˆ‘ä»¬ç›´æ¥ç”¨javaçš„ThreadPoolExcutorã€‚å°†Per-Threadæ¨¡å¼ä¸­çš„ä»»åŠ¡ç±»ï¼Œå®ç°Callableæ¥å£ï¼Œç„¶åä½¿ç”¨ThreadPoolExcutor.submit(ä»»åŠ¡ç±»)ï¼Œç„¶åæ‹¿åˆ°Futureï¼Œè°ƒç”¨å®ƒçš„getæ–¹æ³•å°±è¡Œäº†ã€‚å¹²å˜›è¦è‡ªå·±è®¾è®¡å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467820,"discussion_content":"é€šè¿‡åŠ¨æ‰‹å®ç°ï¼Œæ›´é€å½»çš„ç†è§£Futureçš„å®ç°åŸç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568895174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542987,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","nickname":"è¡Œåˆ™å°†è‡³","note":"","ucode":"DB972F2DF059C4","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":16625,"discussion_content":"å“¦å“¦ã€‚æ˜ç™½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568902292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133136,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1568378869,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568378869","product_id":100028001,"comment_content":"æœ¬èŠ‚å€¼å¾—åå¤çœ‹ï¼Œå¾ˆä¸é”™çš„ç»éªŒåˆ†äº«ã€‚","like_count":0},{"had_liked":false,"id":120961,"user_name":"æ™“æ°","can_delete":false,"product_type":"c1","uid":1441546,"ip_address":"","ucode":"1174C88EEBF8A6","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/0a/12faa44e.jpg","comment_is_top":false,"comment_ctime":1565018957,"is_pvip":false,"replies":[{"id":"44516","content":"å…·ä½“å“ªé‡Œæœ‰é—®é¢˜å‘¢ï¼Ÿæ¬¢è¿æŒ‡å‡º","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565061397,"ip_address":"","comment_id":120961,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565018957","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæšä¸¾å•ä¾‹çš„æ‡’æ±‰æ¨¡å¼å†™çš„æœ‰é—®é¢˜å§","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461547,"discussion_content":"å…·ä½“å“ªé‡Œæœ‰é—®é¢˜å‘¢ï¼Ÿæ¬¢è¿æŒ‡å‡º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565061397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120202,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1564805924,"is_pvip":false,"replies":[{"id":"44490","content":"éœ€è¦è‡ªå·±åœ¨å·¥ä½œä¸­å¤šå­¦ä¼šæ€è€ƒï¼Œå†åŠ ä¸Šå¤šè¯»ä¸€äº›æºç ï¼Œå¯¹ç€æºç è‡ªå·±å†é‡æ–°æ‰‹å†™è¿™å¥—è®¾è®¡æ¨¡å¼çš„å®ç°ã€‚æˆ‘åœ¨ä¹‹å‰æ¨èè¿‡ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹è¿™æœ¬ä¹¦ï¼Œå†™çš„æ¯”è¾ƒç”ŸåŠ¨æœ‰è¶£ï¼Œå»ºè®®é˜…è¯»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565057899,"ip_address":"","comment_id":120202,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564805924","product_id":100028001,"comment_content":"è€å¸ˆå¥½!æ„Ÿè§‰è‡ªå·±å†™ä»£ç å¾ˆå¤šæ—¶å€™éƒ½æ˜¯é¢å‘è¿‡ç¨‹çš„æ€ç»´ã€‚çº¯çº¯çš„CRUDç¨‹åºå‘˜å¹³æ—¶99%çš„å·¥ä½œéƒ½æ˜¯å¢åˆ æ”¹æŸ¥+å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚å¦‚ä½•åŸ¹å…»è‡ªå·±çš„é¢å‘å¯¹è±¡æ€ç»´?è€å¸ˆæœ‰å¥½çš„å»ºè®®ä¹¦ç±æ¨èä¹ˆ?ä¸‡åˆ†æ„Ÿè°¢ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªåº”è¯¥æ˜¯å…±æ€§çš„é—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461237,"discussion_content":"éœ€è¦è‡ªå·±åœ¨å·¥ä½œä¸­å¤šå­¦ä¼šæ€è€ƒï¼Œå†åŠ ä¸Šå¤šè¯»ä¸€äº›æºç ï¼Œå¯¹ç€æºç è‡ªå·±å†é‡æ–°æ‰‹å†™è¿™å¥—è®¾è®¡æ¨¡å¼çš„å®ç°ã€‚æˆ‘åœ¨ä¹‹å‰æ¨èè¿‡ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹è¿™æœ¬ä¹¦ï¼Œå†™çš„æ¯”è¾ƒç”ŸåŠ¨æœ‰è¶£ï¼Œå»ºè®®é˜…è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565057899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120196,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1564805691,"is_pvip":false,"replies":[{"id":"44489","content":"æ›´åƒè§‚å¯Ÿè€…æ¨¡å¼","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565057655,"ip_address":"","comment_id":120196,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564805691","product_id":100028001,"comment_content":"å¾ˆå¹²è´§è°¢è°¢è€å¸ˆã€‚futureé‚£ä¸ªæ„Ÿè§‰å¾ˆä¸é”™ï¼Œä¹‹å‰éƒ½æ˜¯ç”¨çš„future+çº¿ç¨‹æ± +countdownLanchã€‚å®ç°å›è°ƒçš„ï¼Œè°ƒç”¨getæ–¹æ³•çš„æ—¶å€™ç¡®å®ä¼šé˜»å¡ç­‰å¾…æœ€åä¸€ä¸ªä»»åŠ¡å®Œæˆä¸ºæ­¢ï¼Œå¦‚æœéœ€è¦å¯¹ä¸€æ‰¹ä»»åŠ¡åšç»„åˆå¤„ç†çš„åŒ–åªèƒ½è¿™æ ·äº†å§ã€‚å¦‚æœä¸éœ€è¦èšåˆå¤„ç†å°±å¯ä»¥ä½¿ç”¨CompletableFutureè¿›è¡Œä¼˜åŒ–ï¼Œå›å¤´çœ‹ä¸‹CompletableFutureã€‚ä¹‹å‰å¥½åƒçœ‹è¿‡futureç±»çš„æºç ï¼Œæ²¡è®°é”™çš„è¯å’Œè€å¸ˆçš„ä»£ç å®ç°ä¸€æ ·ï¼Œä¾ç¨€è®°å¾—åªæ˜¯åŒ…äº†ä¸€å±‚ï¼Œfutureçš„runæ–¹æ³•é‡Œé¢è°ƒç”¨ä»»åŠ¡çš„callableæ–¹æ³•ï¼Œè¿”å›å€¼å­˜æ”¾åœ¨futureçš„æˆå‘˜å˜é‡resulté‡Œã€‚futureè¿™ä¸ªç®—ä»£ç†æ¨¡å¼ä¹ˆ?","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461235,"discussion_content":"æ›´åƒè§‚å¯Ÿè€…æ¨¡å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565057655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}