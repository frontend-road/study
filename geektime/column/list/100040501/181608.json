{"id":181608,"title":"13 | ç¼–è¯‘æœŸèƒ½åšäº›ä»€ä¹ˆï¼Ÿä¸€ä¸ªå®Œæ•´çš„è®¡ç®—ä¸–ç•Œ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>ä¸Šä¸€è®²æˆ‘ä»¬ç®€å•ä»‹ç»äº†æ¨¡æ¿çš„åŸºæœ¬ç”¨æ³•åŠå…¶åœ¨æ³›å‹ç¼–ç¨‹ä¸­çš„åº”ç”¨ã€‚è¿™ä¸€è®²æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ¨¡æ¿çš„å¦å¤–ä¸€ç§é‡è¦ç”¨é€”â€”â€”ç¼–è¯‘æœŸè®¡ç®—ï¼Œä¹Ÿç§°ä½œâ€œæ¨¡æ¿å…ƒç¼–ç¨‹â€ã€‚</p><h2>ç¼–è¯‘æœŸè®¡ç®—</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç»™å‡ºä¸€ä¸ªå·²ç»è¢«è¯æ˜çš„ç»“è®ºï¼šC++ æ¨¡æ¿æ˜¯å›¾çµå®Œå…¨çš„ <span class=\"orange\">[1]</span>ã€‚è¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œä½¿ç”¨ C++ æ¨¡æ¿ï¼Œä½ å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„å›¾çµæœºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥å®Œæˆä»»ä½•çš„è®¡ç®—ä»»åŠ¡ã€‚</p><p>å½“ç„¶ï¼Œè¿™åªæ˜¯ç†è®ºä¸Šçš„ç»“è®ºã€‚ä»å®é™…çš„è§’åº¦ï¼Œæˆ‘ä»¬å¹¶ä¸<strong>æƒ³</strong>ã€ä¹Ÿä¸å¯èƒ½åœ¨ç¼–è¯‘æœŸå®Œæˆæ‰€æœ‰çš„è®¡ç®—ï¼Œæ›´ä¸ç”¨è¯´ç¼–è¯‘æœŸçš„ç¼–ç¨‹æ˜¯å¾ˆå®¹æ˜“è®©äººçœ‹ä¸æ‡‚çš„â€”â€”å› ä¸ºè¿™å¹¶ä¸æ˜¯è¯­è¨€è®¾è®¡çš„åˆè¡·ã€‚å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿè¿˜æ˜¯éœ€è¦äº†è§£ä¸€ä¸‹æ¨¡æ¿å…ƒç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µï¼šå®ƒä»ç„¶æœ‰ä¸€äº›å®ç”¨çš„åœºæ™¯ï¼Œå¹¶ä¸”åœ¨å®é™…çš„å·¥ç¨‹ä¸­ä½ ä¹Ÿå¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„ä»£ç ã€‚è™½ç„¶æˆ‘ä»¬åœ¨å¼€ç¯‡å°±è¯´è¿‡ä¸è¦ç‚«æŠ€ï¼Œä½†ä½¿ç”¨æ¨¡æ¿å…ƒç¼–ç¨‹å†™å‡ºçš„ä»£ç ä»ç„¶æ˜¯å¯ç†è§£çš„ï¼Œå°¤å…¶æ˜¯å¦‚æœä½ å¯¹é€’å½’ä¸å‘æ€µçš„è¯ã€‚</p><p>å¥½ï¼Œé—²è¯å°‘å™ï¼Œæˆ‘ä»¬ä»ç„¶æ‹¿ä»£ç è¯´è¯ï¼š</p><pre><code class=\"language-c++\">template &lt;int n&gt;\nstruct factorial {\n  static const int value =\n    n * factorial&lt;n - 1&gt;::value;\n};\n\ntemplate &lt;&gt;\nstruct factorial&lt;0&gt; {\n  static const int value = 1;\n};\n</code></pre><!-- [[[read_end]]] --><p>ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªé€’å½’çš„é˜¶ä¹˜å‡½æ•°ã€‚å¯ä»¥çœ‹å‡ºï¼Œå®ƒå®Œå…¨ç¬¦åˆé˜¶ä¹˜çš„é€’å½’å®šä¹‰ï¼š</p><p>$$<br>\n\\begin{aligned}<br>\n0! &amp;= 1 \\\\\\<br>\nn! &amp;= n \\times (n - 1)!<br>\n\\end{aligned}<br>\n$$</p><p>é™¤äº†é¡ºåºæœ‰ç‰¹å®šçš„è¦æ±‚â€”â€”å…ˆå®šä¹‰ï¼Œæ‰èƒ½ç‰¹åŒ–â€”â€”å†åŠ è¯­æ³•æœ‰ç‚¹ç‰¹åˆ«ï¼Œä»£ç åŸºæœ¬ä¸Šå°±æ˜¯è¿™ä¸ªæ•°å­¦å®šä¹‰çš„ç®€å•æ˜ å°„äº†ã€‚</p><p>é‚£æˆ‘ä»¬æ€ä¹ˆçŸ¥é“è¿™ä¸ªè®¡ç®—æ˜¯ä¸æ˜¯åœ¨ç¼–è¯‘æ—¶åšçš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹ç¼–è¯‘è¾“å‡ºã€‚ä¸‹é¢ç›´æ¥è´´å‡ºå¯¹ä¸Šé¢è¿™æ ·çš„ä»£ç åŠ è¾“å‡ºï¼ˆ<code>printf(\"%d\\n\", factorial&lt;10&gt;::value);</code>ï¼‰åœ¨ x86-64 ä¸‹çš„ç¼–è¯‘ç»“æœï¼š</p><pre><code class=\"language-assembly\">.LC0:\n        .string \"%d\\n\"\nmain:\n        push    rbp\n        mov     rbp, rsp\n        mov     esi, 3628800\n        mov     edi, OFFSET FLAT:.LC0\n        mov     eax, 0\n        call    printf\n        mov     eax, 0\n        pop     rbp\n        ret\n</code></pre><p>æˆ‘ä»¬å¯ä»¥æ˜ç¡®çœ‹åˆ°ï¼Œç¼–è¯‘ç»“æœé‡Œæ˜æ˜ç™½ç™½ç›´æ¥å‡ºç°äº†å¸¸é‡ 3628800ã€‚ä¸Šé¢é‚£äº›é€’å½’ä»€ä¹ˆçš„ï¼Œå®Œå…¨éƒ½æ²¡æœ‰äº†è¸ªå½±ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä¼ é€’ä¸€ä¸ªè´Ÿæ•°ç»™ <code>factorial</code> å‘¢ï¼Ÿè¿™æ—¶çš„ç»“æœå°±åº”è¯¥æ˜¯ç¼–è¯‘æœŸé—´çš„é€’å½’æº¢å‡ºã€‚å¦‚ GCC ä¼šæŠ¥å‘Šï¼š</p><blockquote>\n<p>fatal error: template instantiation depth exceeds maximum of 900 (use -ftemplate-depth= to increase the maximum)</p>\n</blockquote><p>å¦‚æœæŠŠ <code>int</code> æ”¹æˆ <code>unsigned</code>ï¼Œä¸åŒçš„ç¼–è¯‘å™¨å’Œä¸åŒçš„æ ‡å‡†é€‰é¡¹ä¼šå¯¼è‡´ä¸åŒçš„ç»“æœã€‚æœ‰äº›æƒ…å†µä¸‹é”™è¯¯ä¿¡æ¯å®Œå…¨ä¸å˜ï¼Œæœ‰äº›æƒ…å†µä¸‹åˆ™ä¼šæŠ¥è´Ÿæ•°ä¸èƒ½è½¬æ¢åˆ° <code>unsigned</code>ã€‚é€šç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ <code>static_assert</code>ï¼Œç¡®ä¿å‚æ•°æ°¸è¿œä¸ä¼šæ˜¯è´Ÿæ•°ã€‚</p><pre><code class=\"language-c++\">template &lt;int n&gt;\nstruct factorial {\n  static_assert(\n    n &gt;= 0,\n    \"Arg must be non-negative\");\n  static const int value =\n    n * factorial&lt;n - 1&gt;::value;\n};\n</code></pre><p>è¿™æ ·ï¼Œå½“ <code>factorial</code> æ¥æ”¶åˆ°ä¸€ä¸ªè´Ÿæ•°ä½œä¸ºå‚æ•°æ—¶ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªå¹²è„†çš„é”™è¯¯ä¿¡æ¯ï¼š</p><blockquote>\n<p>error: static assertion failed: Arg must be non-negative</p>\n</blockquote><p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€äº›æ›´å¤æ‚çš„ä¾‹å­ã€‚è¿™äº›ä¾‹å­ä¸æ˜¯ä¸ºäº†è®©ä½ çœŸçš„å»å†™è¿™æ ·çš„ä»£ç ï¼Œè€Œæ˜¯å¸®åŠ©ä½ å……åˆ†ç†è§£ç¼–è¯‘æœŸç¼–ç¨‹çš„å¼ºå¤§å¨åŠ›ã€‚å¦‚æœè¿™äº›ä¾‹å­ä½ éƒ½å®Œå…¨æŒæ¡äº†ï¼Œé‚£ä»¥åç¢°åˆ°å°çš„æ¨¡æ¿é—®é¢˜ï¼Œä½ ä¸€å®šå¯ä»¥è½»æ¾è§£å†³ï¼Œå®Œå…¨ä¸åœ¨è¯ä¸‹ã€‚</p><p>å›æƒ³ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¦è¿›è¡Œç¼–è¯‘æœŸç¼–ç¨‹ï¼Œæœ€ä¸»è¦çš„ä¸€ç‚¹ï¼Œæ˜¯éœ€è¦æŠŠè®¡ç®—è½¬å˜æˆç±»å‹æ¨å¯¼ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„æ¨¡æ¿å¯ä»¥ä»£è¡¨æ¡ä»¶è¯­å¥ï¼š</p><pre><code class=\"language-c++\">template &lt;bool cond,\n          typename Then,\n          typename Else&gt;\nstruct If;\n\ntemplate &lt;typename Then,\n          typename Else&gt;\nstruct If&lt;true, Then, Else&gt; {\n  typedef Then type;\n};\n\ntemplate &lt;typename Then,\n          typename Else&gt;\nstruct If&lt;false, Then, Else&gt; {\n  typedef Else type;\n};\n</code></pre><p><code>If</code> æ¨¡æ¿æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¸ƒå°”å€¼ï¼Œåé¢ä¸¤ä¸ªåˆ™æ˜¯ä»£è¡¨ä¸åŒåˆ†æ”¯è®¡ç®—çš„ç±»å‹ï¼Œè¿™ä¸ªç±»å‹å¯ä»¥æ˜¯æˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„ä»»ä½•ä¸€ä¸ªæ¨¡æ¿å®ä¾‹ï¼ŒåŒ…æ‹¬ <code>If</code> å’Œ <code>factorial</code>ã€‚ç¬¬ä¸€ä¸ª struct å£°æ˜è§„å®šäº†æ¨¡æ¿çš„å½¢å¼ï¼Œç„¶åæˆ‘ä»¬ä¸æä¾›é€šç”¨å®šä¹‰ï¼Œè€Œæ˜¯æä¾›äº†ä¸¤ä¸ªç‰¹åŒ–ã€‚ç¬¬ä¸€ä¸ªç‰¹åŒ–æ˜¯çœŸçš„æƒ…å†µï¼Œå®šä¹‰ç»“æœ <code>type</code> ä¸º <code>Then</code> åˆ†æ”¯ï¼›ç¬¬äºŒä¸ªç‰¹åŒ–æ˜¯å‡çš„æƒ…å†µï¼Œå®šä¹‰ç»“æœ <code>type</code> ä¸º <code>Else</code> åˆ†æ”¯ã€‚</p><p>æˆ‘ä»¬ä¸€èˆ¬ä¹Ÿéœ€è¦å¾ªç¯ï¼š</p><pre><code class=\"language-c++\">template &lt;bool condition,\n          typename Body&gt;\nstruct WhileLoop;\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;true, Body&gt; {\n  typedef typename WhileLoop&lt;\n    Body::cond_value,\n    typename Body::next_type&gt;::type\n    type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;false, Body&gt; {\n  typedef\n    typename Body::res_type type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct While {\n  typedef typename WhileLoop&lt;\n    Body::cond_value, Body&gt;::type\n    type;\n};\n</code></pre><p>è¿™ä¸ªå¾ªç¯çš„æ¨¡æ¿å®šä¹‰ç¨å¤æ‚ç‚¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹å¾ªç¯ä½“ç±»å‹æœ‰ä¸€ä¸ªçº¦å®šï¼Œå®ƒå¿…é¡»æä¾›ä¸€ä¸ªé™æ€æ•°æ®æˆå‘˜ï¼Œ<code>cond_value</code>ï¼ŒåŠä¸¤ä¸ªå­ç±»å‹å®šä¹‰ï¼Œ<code>res_type</code> å’Œ <code>next_type</code>ï¼š</p><ul>\n<li><code>cond_value</code> ä»£è¡¨å¾ªç¯çš„æ¡ä»¶ï¼ˆçœŸæˆ–å‡ï¼‰</li>\n<li><code>res_type</code> ä»£è¡¨é€€å‡ºå¾ªç¯æ—¶çš„çŠ¶æ€</li>\n<li><code>next_type</code> ä»£è¡¨ä¸‹é¢å¾ªç¯æ‰§è¡Œä¸€æ¬¡æ—¶çš„çŠ¶æ€</li>\n</ul><p>è¿™é‡Œé¢æ¯”è¾ƒç»•çš„åœ°æ–¹æ˜¯ç”¨ç±»å‹æ¥ä»£è¡¨æ‰§è¡ŒçŠ¶æ€ã€‚å¦‚æœä¹‹å‰ä½ æ²¡æœ‰æ¥è§¦è¿‡å‡½æ•°å¼ç¼–ç¨‹çš„è¯ï¼Œè¿™ä¸ªåœ¨åˆå­¦æ—¶æœ‰å›°éš¾æ˜¯æ­£å¸¸çš„ã€‚æŠŠä¾‹å­å¤šçœ‹ä¸¤éï¼Œè‡ªå·±ç¼–è¯‘ã€ä¿®æ”¹ã€æŠŠç©ä¸€ä¸‹ï¼Œå°±ä¼šæ¸æ¸ç†è§£çš„ã€‚</p><p>æ’é™¤è¿™ä¸ªæŠ½è±¡æ€§ï¼Œæ¨¡æ¿çš„å®šä¹‰å’Œ <code>If</code> æ˜¯ç±»ä¼¼çš„ï¼Œè™½ç„¶æˆ‘ä»¬ä¸ºæ–¹ä¾¿ä½¿ç”¨ï¼Œå®šä¹‰äº†ä¸¤ä¸ªæ¨¡æ¿ã€‚<code>WhileLoop</code> æ¨¡æ¿æœ‰ä¸¤ä¸ªæ¨¡æ¿å‚æ•°ï¼ŒåŒæ ·ç”¨ç‰¹åŒ–æ¥å†³å®šèµ°é€’å½’åˆ†æ”¯è¿˜æ˜¯é€€å‡ºå¾ªç¯åˆ†æ”¯ã€‚<code>While</code> æ¨¡æ¿åˆ™åªéœ€è¦å¾ªç¯ä½“ä¸€ä¸ªå‚æ•°ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p><p>å¦‚æœä½ ä¹‹å‰æ¨¡æ¿ç”¨å¾—ä¸å¤šçš„è¯ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦äº†è§£çš„ç»†èŠ‚ï¼Œå°±æ˜¯ç”¨ <code>::</code> å–ä¸€ä¸ªæˆå‘˜ç±»å‹ã€å¹¶ä¸” <code>::</code> å·¦è¾¹æœ‰æ¨¡æ¿å‚æ•°çš„è¯ï¼Œå¾—é¢å¤–åŠ ä¸Š <code>typename</code> å…³é”®å­—æ¥æ ‡æ˜ç»“æœæ˜¯ä¸€ä¸ªç±»å‹ã€‚ä¸Šé¢å¾ªç¯æ¨¡æ¿çš„å®šä¹‰é‡Œå°±å‡ºç°äº†å¤šæ¬¡è¿™æ ·çš„è¯­æ³•ã€‚MSVC åœ¨è¿™æ–¹é¢å¾€å¾€æ¯”è¾ƒå®½æ¾ï¼Œä¸å†™ <code>typename</code> ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œä½†è¿™æ˜¯ä¸ç¬¦åˆ C++ æ ‡å‡†çš„ç”¨æ³•ã€‚</p><p>ä¸ºäº†è¿›è¡Œè®¡ç®—ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šç”¨çš„ä»£è¡¨æ•°å€¼çš„ç±»å‹ã€‚ä¸‹é¢è¿™ä¸ªæ¨¡æ¿å¯ä»¥é€šç”¨åœ°ä»£è¡¨ä¸€ä¸ªæ•´æ•°å¸¸æ•°ï¼š</p><pre><code class=\"language-c++\">template &lt;class T, T v&gt;\nstruct integral_constant {\n  static const T value = v;\n  typedef T value_type;\n  typedef integral_constant type;\n};\n</code></pre><p><code>integral_constant</code> æ¨¡æ¿åŒæ—¶åŒ…å«äº†æ•´æ•°çš„ç±»å‹å’Œæ•°å€¼ï¼Œè€Œé€šè¿‡è¿™ä¸ªç±»å‹çš„ <code>value</code> æˆå‘˜æˆ‘ä»¬åˆå¯ä»¥é‡æ–°å–å›è¿™ä¸ªæ•°å€¼ã€‚æœ‰äº†è¿™ä¸ªæ¨¡æ¿çš„å¸®å¿™ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸€äº›æ›´é€šç”¨çš„è®¡ç®—äº†ã€‚ä¸‹é¢è¿™ä¸ªæ¨¡æ¿å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å¾ªç¯æ¨¡æ¿æ¥å®Œæˆä» 1 åŠ åˆ° n çš„è®¡ç®—ï¼š</p><pre><code class=\"language-c++\">template &lt;int result, int n&gt;\nstruct SumLoop {\n  static const bool cond_value =\n    n != 0;\n  static const int res_value =\n    result;\n  typedef integral_constant&lt;\n    int, res_value&gt;\n    res_type;\n  typedef SumLoop&lt;result + n, n - 1&gt;\n    next_type;\n};\n\ntemplate &lt;int n&gt;\nstruct Sum {\n  typedef SumLoop&lt;0, n&gt; type;\n};\n</code></pre><p>ç„¶åä½ ä½¿ç”¨ <code>While&lt;Sum&lt;10&gt;::type&gt;::type::value</code> å°±å¯ä»¥å¾—åˆ° 1 åŠ åˆ° 10 çš„ç»“æœã€‚è™½ç„¶æœ‰ç‚¹ç»•ï¼Œä½†ä»£ç å®è´¨å°±æ˜¯åœ¨ç¼–è¯‘æœŸé—´è¿›è¡Œäº†ä»¥ä¸‹çš„è®¡ç®—ï¼š</p><pre><code class=\"language-c++\">int result = 0;\nwhile (n != 0) {\n  result = result + n;\n  n = n - 1;\n}\n</code></pre><p>ä¼°è®¡ç°åœ¨ä½ çš„å¤´å·²ç»å¾ˆæ™•äº†ã€‚ä½†æˆ‘ä¿è¯ï¼Œè¿™ä¸€è®²æœ€éš¾çš„éƒ¨åˆ†å·²ç»è¿‡å»äº†ã€‚å®é™…ä¸Šï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®²çš„ä¸œè¥¿è¿˜æ²¡æœ‰ç¦»å¼€ C++98ã€‚è€Œæˆ‘ä»¬ä¸‹é¢å‡ è®²é‡Œå¾ˆå¿«å°±ä¼šè®²åˆ°ï¼Œå¦‚ä½•åœ¨ç°ä»£ C++ é‡Œä¸ä½¿ç”¨è¿™ç§éº»çƒ¦çš„æ–¹å¼ä¹Ÿèƒ½è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚</p><h2>ç¼–è¯‘æœŸç±»å‹æ¨å¯¼</h2><p>C++ æ ‡å‡†åº“åœ¨ &lt;type_traits&gt; å¤´æ–‡ä»¶é‡Œå®šä¹‰äº†å¾ˆå¤šå·¥å…·ç±»æ¨¡æ¿ï¼Œç”¨æ¥æå–æŸä¸ªç±»å‹ï¼ˆtypeï¼‰åœ¨æŸæ–¹é¢çš„ç‰¹ç‚¹ï¼ˆtraitï¼‰<span class=\"orange\">[2]</span>ã€‚å’Œä¸Šä¸€èŠ‚ç»™å‡ºçš„ä¾‹å­ç›¸ä¼¼ï¼Œè¿™äº›ç‰¹ç‚¹æ—¢æ˜¯ç±»å‹ï¼Œåˆæ˜¯å¸¸å€¼ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿åœ°åœ¨å€¼å’Œç±»å‹ä¹‹é—´è½¬æ¢ï¼Œæ ‡å‡†åº“å®šä¹‰äº†ä¸€äº›ç»å¸¸éœ€è¦ç”¨åˆ°çš„å·¥å…·ç±»ã€‚ä¸Šé¢æè¿°çš„ <code>integral_constant</code> å°±æ˜¯å…¶ä¸­ä¸€ä¸ªï¼ˆæˆ‘çš„å®šä¹‰æœ‰æ‰€ç®€åŒ–ï¼‰ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œé’ˆå¯¹å¸ƒå°”å€¼æœ‰ä¸¤ä¸ªé¢å¤–çš„ç±»å‹å®šä¹‰ï¼š</p><pre><code class=\"language-c++\">typedef std::integral_constant&lt;\n  bool, true&gt; true_type;\ntypedef std::integral_constant&lt;\n  bool, false&gt; false_type;\n</code></pre><p>è¿™ä¸¤ä¸ªæ ‡å‡†ç±»å‹ <code>true_type</code> å’Œ <code>false_type</code> ç»å¸¸å¯ä»¥åœ¨å‡½æ•°é‡è½½ä¸­è§åˆ°ã€‚æœ‰ä¸€ä¸ªå·¥å…·å‡½æ•°å¸¸å¸¸ä¼šå†™æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nclass SomeContainer {\npublic:\n  â€¦\n  static void destroy(T* ptr)\n  {\n    _destroy(ptr,\n      is_trivially_destructible&lt;\n        T&gt;());\n  }\n\nprivate:\n  static void _destroy(T* ptr,\n                       true_type)\n  {}\n  static void _destroy(T* ptr,\n                       false_type)\n  {\n    ptr-&gt;~T();\n  }\n};\n</code></pre><p>ç±»ä¼¼ä¸Šé¢ï¼Œå¾ˆå¤šå®¹å™¨ç±»é‡Œä¼šæœ‰ä¸€ä¸ª <code>destroy</code> å‡½æ•°ï¼Œé€šè¿‡æŒ‡é’ˆæ¥ææ„æŸä¸ªå¯¹è±¡ã€‚ä¸ºäº†ç¡®ä¿æœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–ï¼Œå¸¸ç”¨çš„ä¸€ä¸ªæŠ€å·§å°±æ˜¯ç”¨ <code>is_trivially_destructible</code> æ¨¡æ¿æ¥åˆ¤æ–­ç±»æ˜¯å¦æ˜¯å¯å¹³å‡¡ææ„çš„â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸è°ƒç”¨ææ„å‡½æ•°ï¼Œä¸ä¼šé€ æˆä»»ä½•èµ„æºæ³„æ¼é—®é¢˜ã€‚æ¨¡æ¿è¿”å›çš„ç»“æœè¿˜æ˜¯ä¸€ä¸ªç±»ï¼Œè¦ä¹ˆæ˜¯ <code>true_type</code>ï¼Œè¦ä¹ˆæ˜¯ <code>false_type</code>ã€‚å¦‚æœè¦å¾—åˆ°å¸ƒå°”å€¼çš„è¯ï¼Œå½“ç„¶ä½¿ç”¨ <code>is_trivially_destructible&lt;T&gt;::value</code> å°±å¯ä»¥ï¼Œä½†æ­¤å¤„ä¸éœ€è¦ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯ï¼Œä½¿ç”¨ <code>()</code> è°ƒç”¨è¯¥ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œè®©ç¼–è¯‘å™¨æ ¹æ®æ•°å€¼ç±»å‹æ¥é€‰æ‹©åˆé€‚çš„é‡è½½ã€‚è¿™æ ·ï¼Œåœ¨ä¼˜åŒ–ç¼–è¯‘çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥æŠŠä¸éœ€è¦çš„ææ„æ“ä½œå½»åº•å…¨éƒ¨åˆ é™¤ã€‚</p><p>åƒ <code>is_trivially_destructible</code> è¿™æ ·çš„ trait ç±»æœ‰å¾ˆå¤šï¼Œå¯ä»¥ç”¨æ¥åœ¨æ¨¡æ¿é‡Œå†³å®šæ‰€éœ€çš„ç‰¹æ®Šè¡Œä¸ºï¼š</p><ul>\n<li><code>is_array</code></li>\n<li><code>is_enum</code></li>\n<li><code>is_function</code></li>\n<li><code>is_pointer</code></li>\n<li><code>is_reference</code></li>\n<li><code>is_const</code></li>\n<li><code>has_virtual_destructor</code></li>\n<li>â€¦</li>\n</ul><p>è¿™äº›ç‰¹æ®Šè¡Œä¸ºåˆ¤æ–­å¯ä»¥æ˜¯åƒä¸Šé¢è¿™æ ·ç”¨äºå†³å®šä¸åŒçš„é‡è½½ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›´æ¥ç”¨åœ¨æ¨¡æ¿å‚æ•°ç”šè‡³ä»£ç é‡Œï¼ˆè®°å¾—æˆ‘ä»¬æ˜¯å¯ä»¥ç›´æ¥å¾—åˆ°å¸ƒå°”å€¼çš„ï¼‰ã€‚</p><p>é™¤äº†å¾—åˆ°å¸ƒå°”å€¼å’Œç›¸å¯¹åº”çš„ç±»å‹çš„ trait æ¨¡æ¿ï¼Œæˆ‘ä»¬è¿˜æœ‰å¦å¤–ä¸€äº›æ¨¡æ¿ï¼Œå¯ä»¥ç”¨æ¥åšä¸€äº›ç±»å‹çš„è½¬æ¢ã€‚ä»¥ä¸€ä¸ªå¸¸è§çš„æ¨¡æ¿ <code>remove_const</code> ä¸ºä¾‹ï¼ˆç”¨æ¥å»é™¤ç±»å‹é‡Œçš„ const ä¿®é¥°ï¼‰ï¼Œå®ƒçš„å®šä¹‰å¤§è‡´å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">template &lt;class T&gt;\nstruct remove_const {\n  typedef T type;\n};\ntemplate &lt;class T&gt;\nstruct remove_const&lt;const T&gt; {\n  typedef T type;\n};\n</code></pre><p>åŒæ ·ï¼Œå®ƒä¹Ÿæ˜¯åˆ©ç”¨æ¨¡æ¿çš„ç‰¹åŒ–ï¼Œé’ˆå¯¹ const ç±»å‹å»æ‰ç›¸åº”çš„ä¿®é¥°ã€‚æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ <code>const string</code> åº”ç”¨ <code>remove_const</code>ï¼Œå°±ä¼šå¾—åˆ° <code>string</code>ï¼Œå³ï¼Œ<code>remove_const&lt;const string&gt;::type</code> ç­‰ä»·äº <code>string</code>ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚ä½ è¦æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœå¯¹ <code>const char*</code> åº”ç”¨ <code>remove_const</code> çš„è¯ï¼Œç»“æœè¿˜æ˜¯ <code>const char*</code>ã€‚åŸå› æ˜¯ï¼Œ<code>const char*</code> æ˜¯æŒ‡å‘ <code>const char</code> çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯æŒ‡å‘ <code>char</code> çš„ const æŒ‡é’ˆã€‚å¦‚æœæˆ‘ä»¬å¯¹ <code>char * const</code> åº”ç”¨ <code>remove_const</code> çš„è¯ï¼Œè¿˜æ˜¯å¯ä»¥å¾—åˆ° <code>char*</code> çš„ã€‚</p><h3>ç®€æ˜“å†™æ³•</h3><p>å¦‚æœä½ è§‰å¾—å†™ <code>is_trivially_destructible&lt;T&gt;::value</code> å’Œ <code>remove_const&lt;T&gt;::type</code> éå¸¸å•°å—¦çš„è¯ï¼Œé‚£ä½ ç»ä¸æ˜¯ä¸€ä¸ªäººã€‚åœ¨å½“å‰çš„ C++ æ ‡å‡†é‡Œï¼Œå‰è€…æœ‰å¢åŠ  <code>_v</code> çš„ç¼–è¯‘æ—¶å¸¸é‡ï¼Œåè€…æœ‰å¢åŠ  <code>_t</code> çš„ç±»å‹åˆ«åï¼š</p><pre><code class=\"language-c++\">template &lt;class T&gt;\ninline constexpr bool\n  is_trivially_destructible_v =\n    is_trivially_destructible&lt;\n      T&gt;::value;\n</code></pre><pre><code class=\"language-c++\">template &lt;class T&gt;\nusing remove_const_t =\n  typename remove_const&lt;T&gt;::type;\n</code></pre><p>è‡³äºä»€ä¹ˆæ˜¯ <code>constexpr</code>ï¼Œæˆ‘ä»¬ä¼šå•ç‹¬è®²ã€‚<code>using</code> æ˜¯ç°ä»£ C++ çš„æ–°è¯­æ³•ï¼ŒåŠŸèƒ½å¤§è‡´ä¸ <code>typedef</code> ç›¸ä¼¼ï¼Œä½† <code>typedef</code> åªèƒ½é’ˆå¯¹æŸä¸ªç‰¹å®šçš„ç±»å‹ï¼Œè€Œ <code>using</code> å¯ä»¥ç”Ÿæˆåˆ«åæ¨¡æ¿ã€‚ç›®å‰æˆ‘ä»¬åªéœ€è¦çŸ¥é“ï¼Œåœ¨ä½ éœ€è¦ trait æ¨¡æ¿çš„ç»“æœæ•°å€¼å’Œç±»å‹æ—¶ï¼Œä½¿ç”¨å¸¦ <code>_v</code> å’Œ <code>_t</code> åç¼€çš„æ¨¡æ¿å¯èƒ½ä¼šæ›´æ–¹ä¾¿ï¼Œå°¤å…¶æ˜¯å¸¦ <code>_t</code> åç¼€çš„ç±»å‹è½¬æ¢æ¨¡æ¿ã€‚</p><h2>é€šç”¨çš„ fmap å‡½æ•°æ¨¡æ¿</h2><p>ä½ åº”å½“å¤šå¤šå°‘å°‘å¬åˆ°è¿‡ map-reduceã€‚æŠ›å¼€å…¶ç›®å‰åœ¨å¤§æ•°æ®åº”ç”¨ä¸­çš„å…·ä½“æ–¹å¼ä¸è°ˆï¼Œä»æ¦‚å¿µæœ¬æºæ¥çœ‹ï¼Œmap <span class=\"orange\">[3]</span> å’Œ reduce <span class=\"orange\">[4]</span> éƒ½æ¥è‡ªå‡½æ•°å¼ç¼–ç¨‹ã€‚ä¸‹é¢æˆ‘ä»¬æ¼”ç¤ºä¸€ä¸ª map å‡½æ•°ï¼ˆå½“ç„¶ï¼Œåœ¨ C++ é‡Œå®ƒçš„åå­—å°±ä¸èƒ½å« <code>map</code> äº†ï¼‰ï¼Œå…¶ä¸­ç”¨åˆ°äº†ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å­¦åˆ°çš„å¤šä¸ªçŸ¥è¯†ç‚¹ï¼š</p><pre><code class=\"language-c++\">template &lt;\n  template &lt;typename, typename&gt;\n  class OutContainer = vector,\n  typename F, class R&gt;\nauto fmap(F&amp;&amp; f, R&amp;&amp; inputs)\n{\n  typedef decay_t&lt;decltype(\n    f(*inputs.begin()))&gt;\n    result_type;\n  OutContainer&lt;\n    result_type,\n    allocator&lt;result_type&gt;&gt;\n    result;\n  for (auto&amp;&amp; item : inputs) {\n    result.push_back(f(item));\n  }\n  return result;\n}\n</code></pre><p>æˆ‘ä»¬ï¼š</p><ul>\n<li>ç”¨ <code>decltype</code> æ¥è·å¾—ç”¨ <code>f</code> æ¥è°ƒç”¨ <code>inputs</code> å…ƒç´ çš„ç±»å‹ï¼ˆå‚è€ƒ<a href=\"https://time.geekbang.org/column/article/176850\">[ç¬¬ 8 è®²]</a>ï¼‰ï¼›</li>\n<li>ç”¨ <code>decay_t</code> æ¥æŠŠè·å¾—çš„ç±»å‹å˜æˆä¸€ä¸ªæ™®é€šçš„å€¼ç±»å‹ï¼›</li>\n<li>ç¼ºçœä½¿ç”¨ <code>vector</code> ä½œä¸ºè¿”å›å€¼çš„å®¹å™¨ï¼Œä½†å¯ä»¥é€šè¿‡æ¨¡æ¿å‚æ•°æ”¹ä¸ºå…¶ä»–å®¹å™¨ï¼›</li>\n<li>ä½¿ç”¨åŸºäºèŒƒå›´çš„ for å¾ªç¯æ¥éå† <code>inputs</code>ï¼Œå¯¹å…¶ç±»å‹ä¸ä½œå…¶ä»–è¦æ±‚ï¼ˆå‚è€ƒ<a href=\"https://time.geekbang.org/column/article/176842\">[ç¬¬ 7 è®²]</a>ï¼‰ï¼›</li>\n<li>å­˜æ”¾ç»“æœçš„å®¹å™¨éœ€è¦æ”¯æŒ <code>push_back</code> æˆå‘˜å‡½æ•°ï¼ˆå‚è€ƒ<a href=\"https://time.geekbang.org/column/article/173167\">[ç¬¬ 4 è®²]</a>ï¼‰ã€‚</li>\n</ul><p>ä¸‹é¢çš„ä»£ç å¯ä»¥éªŒè¯å…¶åŠŸèƒ½ï¼š</p><pre><code class=\"language-c++\">vector&lt;int&gt; v{1, 2, 3, 4, 5};\nint add_1(int x)\n{\n    return x + 1;\n}\n\nauto result = fmap(add_1, v);\n</code></pre><p>åœ¨ <code>fmap</code> æ‰§è¡Œä¹‹åï¼Œæˆ‘ä»¬ä¼šåœ¨ <code>result</code> é‡Œå¾—åˆ°ä¸€ä¸ªæ–°å®¹å™¨ï¼Œå…¶å†…å®¹æ˜¯ 2, 3, 4, 5, 6ã€‚</p><h2>å†…å®¹å°ç»“</h2><p>æœ¬è®²æˆ‘ä»¬ä»‹ç»äº†æ¨¡æ¿å…ƒç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µå’Œä¾‹å­ï¼Œå…¶æœ¬è´¨æ˜¯<strong>æŠŠè®¡ç®—è¿‡ç¨‹ç”¨ç¼–è¯‘æœŸçš„ç±»å‹æ¨å¯¼å’Œç±»å‹åŒ¹é…è¡¨è¾¾å‡ºæ¥</strong>ï¼›ç„¶åä»‹ç» type traits åŠå…¶åŸºæœ¬ç”¨æ³•ï¼›æœ€åæˆ‘ä»¬æ¼”ç¤ºäº†ä¸€ä¸ªç®€å•çš„é«˜é˜¶å‡½æ•° mapï¼Œå…¶å®ç°ä¸­ç”¨åˆ°äº†æˆ‘ä»¬ç›®å‰å·²ç»è®¨è®ºè¿‡çš„ä¸€äº›çŸ¥è¯†ç‚¹ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>è¿™ä¸€è®²çš„å†…å®¹å¯èƒ½æœ‰ç‚¹çƒ§è„‘ï¼Œè¯·ä½ è‡ªè¡Œå®éªŒä¸€ä¸‹ä¾‹å­ï¼Œå¹¶æ‰¾ä¸€ä¸¤ä¸ªç®€å•çš„ç®—æ³•ç”¨æ¨¡æ¿å…ƒç¼–ç¨‹çš„æ–¹æ³•å®ç°ä¸€ä¸‹ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å†™å‡ºæ¥ã€‚</p><p>å¦‚æœæœ‰ä»€ä¹ˆç‰¹åˆ«æƒ³æ³•çš„è¯ï¼Œæ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«äº¤æµã€‚</p><h2><span class=\"reference\">å‚è€ƒèµ„æ–™</span></h2><p><span class=\"reference\">[1] Todd L. Veldhuizen, â€œC++ templates are Turing completeâ€. <a href=\"http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.14.3670\">http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.14.3670</a> </span></p><p><span class=\"reference\">[2] cppreference.com, â€œStandard library header &lt;type_traits&gt;â€. <a href=\"https://en.cppreference.com/w/cpp/header/type_traits\">https://en.cppreference.com/w/cpp/header/type_traits</a> </span></p><p><span class=\"reference\">[2a] cppreference.com, â€œæ ‡å‡†åº“å¤´æ–‡ä»¶ &lt;type_traits&gt;â€. <a href=\"https://zh.cppreference.com/w/cpp/header/type_traits\">https://zh.cppreference.com/w/cpp/header/type_traits</a> </span></p><p><span class=\"reference\">[3] Wikipedia, â€œMap (higher-order function)â€. <a href=\"https://en.wikipedia.org/wiki/Map_(higher-order_function)\">https://en.wikipedia.org/wiki/Map_(higher-order_function)</a> </span></p><p><span class=\"reference\">[4] Wikipedia, â€œFold (higher-order function)â€. <a href=\"https://en.wikipedia.org/wiki/Fold_(higher-order_function)\">https://en.wikipedia.org/wiki/Fold_(higher-order_function)</a> </span></p>","comments":[{"had_liked":false,"id":165563,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1577260644,"is_pvip":false,"replies":[{"id":63150,"content":"å¯¹ï¼Œå¯¹äºæ¨¡æ¿ï¼Œå°±æ˜¯è¦åœ¨è„‘å­é‡Œæˆ–çº¸ä¸Šã€ç”µè„‘ä¸ŠæŠŠå®ƒå±•å¼€â€¦â€¦â˜ºï¸","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577275419,"ip_address":"","comment_id":165563,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è„‘å£³å„¿ç–¼çš„å…„å¼Ÿå§å¦¹ä»¬ï¼Œæˆ‘è¿™æœ‰ä¸ªå°åæ–¹ï¼Œ å“ˆå“ˆ\n\nWhile&lt; Sum&lt;2&gt;::type &gt;::type::value å®ä¾‹åŒ–(instantiation)è¿‡ç¨‹\n--&gt; While&lt; SumLoop&lt;0, 2&gt; &gt;::type::value\n--&gt; WhileLoop&lt;SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;&gt;::type::value\n--&gt; WhileLoop&lt;true, SumLoop&lt;0, 2&gt;&gt;::type::value\n\n--&gt; WhileLoop&lt;SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;::next_type&gt;::type::value\n--&gt; WhileLoop&lt;true, SumLoop&lt;2, 1&gt;&gt;::type::value\n\n--&gt; WhileLoop&lt;SumLoop&lt;2, 1&gt;::cond_value, SumLoop&lt;2, 1&gt;::next_type&gt;::type::value\n--&gt; WhileLoop&lt;true, SumLoop&lt;3, 0&gt;&gt;::type::value\n\n--&gt; WhileLoop&lt;SumLoop&lt;3, 0&gt;::cond_value, SumLoop&lt;3, 0&gt;::next_type&gt;::type::value\n--&gt; WhileLoop&lt;false, SumLoop&lt;3, -1&gt;&gt;::type::value\n\n--&gt; SumLoop&lt;3, -1&gt;::res_type::value\n\n--&gt;integral_constant&lt;int, 3&gt;::value\n--&gt;3","like_count":22},{"had_liked":false,"id":165604,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1577267357,"is_pvip":false,"replies":[{"id":63164,"content":"ä¸‹é¢çš„å‡½æ•°å’Œæ¨¡æ¿æ˜¯åŸºæœ¬ç­‰ä»·çš„ï¼š\n\nint foo(int n)\n{\n  if (n == 2 || n == 3 || n == 5) {\n    return 1;\n  } else {\n    return 2;\n  }\n}\n\ntemplate &lt;int n&gt;\nstruct Foo {\n  typedef typename If&lt;\n    (n == 2 || n == 3 || n == 5),\n    integral_constant&lt;int, 1&gt;,\n    integral_constant&lt;int, 2&gt;&gt;::type\n    type;\n};\n\nä½ å¯ä»¥è¾“å‡º foo(3)ï¼Œä¹Ÿå¯ä»¥è¾“å‡º Foo&lt;3&gt;::type::valueã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577283642,"ip_address":"","comment_id":165604,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è®°å¾—å´è€å¸ˆä¹‹å‰é¢„å‘Šè¿‡ï¼Œè¿™ä¸€èŠ‚å¯èƒ½ä¼šæ¯”è¾ƒéš¾ï¼Œç¡®å®è¢«éš¾ä½äº†ã€‚åœ¨ç¬¬ä¸€ä¸ª If æ¨¡æ¿è¿™é‡Œå°±è¢«å¡ä½äº†ï¼Œè€å¸ˆèƒ½ç»™ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ª If æ¨¡æ¿è¯¥å¦‚ä½•ä½¿ç”¨ä¹ˆï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1301097,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","nickname":"å°ä¸€æ—¥ä¸€","note":"","ucode":"0A506C2B918C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630886,"discussion_content":"åŠ ä¸Šæ³¨é‡Šå¸®åŠ©å¤§å®¶ç†è§£ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸æ–­çš„å…ˆæ¨å¯¼æ¨¡æ¿å‚æ•°å’Œæ¨å¯¼::type ç±»å‹ï¼Œè¿‡ç¨‹ä¸­ä¸æ–­çš„åš substitution\nWhile&lt; Sum&lt;2&gt;::type &gt;::type::value å®ä¾‹åŒ–(instantiation)è¿‡ç¨‹\n\n--&gt; While&lt; Sum&lt;2&gt;::type &gt;::type::value                                           // æ¨å¯¼ Sum&lt;2&gt;::type\n--&gt; While&lt; SumLoop&lt;0, 2&gt; &gt;::type::value                                          // æ¨å¯¼ While&lt; SumLoop&lt;0, 2&gt;::type\n--&gt; WhileLoop&lt;SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;&gt;::type::value             // æ¨å¯¼ SumLoop&lt;0, 2&gt;::cond_value\n--&gt; WhileLoop&lt;true, SumLoop&lt;0, 2&gt;&gt;::type::value                                  // æ¨å¯¼ WhileLoop&lt;true, SumLoop&lt;0, 2&gt;&gt;::type\n\n--&gt; WhileLoop&lt;SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;::next_type&gt;::type::value  // æ¨å¯¼ SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;::next_type\n--&gt; WhileLoop&lt;true, SumLoop&lt;2, 1&gt;&gt;::type::value                                  // æ¨å¯¼ WhileLoop&lt;true, SumLoop&lt;2, 1&gt;&gt;::type\n\n--&gt; WhileLoop&lt;SumLoop&lt;2, 1&gt;::cond_value, SumLoop&lt;2, 1&gt;::next_type&gt;::type::value  // æ¨å¯¼ SumLoop&lt;2, 1&gt;::cond_value, SumLoop&lt;2, 1&gt;::next_type\n--&gt; WhileLoop&lt;true, SumLoop&lt;3, 0&gt;&gt;::type::value                                  // æ¨å¯¼ WhileLoop&lt;true, SumLoop&lt;3, 0&gt;&gt;::type\n\n--&gt; WhileLoop&lt;SumLoop&lt;3, 0&gt;::cond_value, SumLoop&lt;3, 0&gt;::next_type&gt;::type::value  // æ¨å¯¼ SumLoop&lt;3, 0&gt;::cond_value, SumLoop&lt;3, 0&gt;::next_type\n--&gt; WhileLoop&lt;false, SumLoop&lt;3, -1&gt;&gt;::type::value                                // æ¨å¯¼ WhileLoop&lt;false, SumLoop&lt;3, -1&gt;&gt;::type\n\n--&gt; SumLoop&lt;3, -1&gt;::res_type::value                                              // æ¨å¯¼ SumLoop&lt;3, -1&gt;::res_type, ç”Ÿæˆintegral_constant&lt;int, 3&gt;\n\n--&gt;integral_constant&lt;int, 3&gt;::value                                              // è·å– é™æ€å˜é‡ value\n--&gt;3","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1699003481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479206,"discussion_content":"å¯¹ï¼Œå¯¹äºæ¨¡æ¿ï¼Œå°±æ˜¯è¦åœ¨è„‘å­é‡Œæˆ–çº¸ä¸Šã€ç”µè„‘ä¸ŠæŠŠå®ƒå±•å¼€â€¦â€¦â˜ºï¸","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577275419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2006194,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/9c/b2/1a9beeb1.jpg","nickname":"è½¬éä¸–ç•Œ","note":"","ucode":"0783BFDDE87029","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":634718,"discussion_content":"ä»ä¸Šé¢çš„å±•å¼€æˆ‘æœ‰ä¸¤ä¸ªç–‘é—®ï¼Œä¸€æ˜¯SumLoop&lt;0, 2&gt;::cond_valueåˆå§‹æ¡ä»¶ç¬¬ä¸€æ¬¡ç”¨æ²¡è¿›å…¥ä¸‹æ¬¡å¾ªç¯ä½“å³SumLoop&lt;0, 2&gt;::next_typeï¼Œç¬¬äºŒæ¬¡ç”¨äº†æ‰è¿›å…¥ï¼ŸäºŒæ˜¯n==0æ—¶æ¡ä»¶ä¸ºfalseæ—¶è¿˜è®¡ç®—äº†next_typeï¼Œå³æŠŠ0åŠ åˆ°äº†ç»“æœï¼Œè¿™æ ·å¾ˆå¯èƒ½å¯¼è‡´é”™è¯¯ï¼Œ\næ€ä¹ˆè§£å†³ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1703835603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":479206,"ip_address":"æ±Ÿè‹","group_id":0},"score":634718,"extra":""}]}]},{"had_liked":false,"id":296048,"user_name":"chang","can_delete":false,"product_type":"c1","uid":2596026,"ip_address":"","ucode":"594EF8CB4477BD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","comment_is_top":false,"comment_ctime":1622715836,"is_pvip":false,"replies":[{"id":107512,"content":"è°¢è°¢æŠ“è™«ğŸ™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1622869253,"ip_address":"","comment_id":296048,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ const string&amp; åº”ç”¨ remove_constï¼Œå°±ä¼šå¾—åˆ° string&amp;ï¼Œå³ï¼Œremove_const::type ç­‰ä»·äº string&amp;ã€‚\n\nremove_conståªèƒ½å»é¡¶å±‚constã€‚const string&amp;åº”ç”¨remove_conståè¿˜æ˜¯const string&amp;ï¼Œconst stringåº”ç”¨remove_conståæ˜¯stringã€‚","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479222,"discussion_content":"ä¸‹é¢çš„å‡½æ•°å’Œæ¨¡æ¿æ˜¯åŸºæœ¬ç­‰ä»·çš„ï¼š\n\nint foo(int n)\n{\n  if (n == 2 || n == 3 || n == 5) {\n    return 1;\n  } else {\n    return 2;\n  }\n}\n\ntemplate &amp;lt;int n&amp;gt;\nstruct Foo {\n  typedef typename If&amp;lt;\n    (n == 2 || n == 3 || n == 5),\n    integral_constant&amp;lt;int, 1&amp;gt;,\n    integral_constant&amp;lt;int, 2&amp;gt;&amp;gt;::type\n    type;\n};\n\nä½ å¯ä»¥è¾“å‡º foo(3)ï¼Œä¹Ÿå¯ä»¥è¾“å‡º Foo&amp;lt;3&amp;gt;::type::valueã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577283642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172312,"user_name":"YouCompleteMe","can_delete":false,"product_type":"c1","uid":1232859,"ip_address":"","ucode":"89B5A75DA85E0A","user_header":"https://static001.geekbang.org/account/avatar/00/12/cf/db/9693d08f.jpg","comment_is_top":false,"comment_ctime":1579147719,"is_pvip":false,"replies":[{"id":66876,"content":"å—¯ï¼Œæ˜¯çš„ï¼Œä½ çš„å†™æ³•èƒ½å°‘å±•å¼€ä¸€æ¬¡ã€‚ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1579185272,"ip_address":"","comment_id":172312,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"template &lt;typename Body&gt;\nstruct whileLoop&lt;true, Body&gt;\néƒ¨åˆ†ä¼¼ä¹æ”¹æˆä¸‹é¢è¿™æ ·ï¼Œæ›´ç›´è§‚ï¼Œ\nç¼–è¯‘æ—¶è®¡ç®—æ›´å°‘å‘¢\n\ntemplate &lt;typename Body&gt;\nstruct whileLoop&lt;true, Body&gt; {\n    typedef typename whileLoop&lt;\n      Body::next_type::cond_value, \n      typename Body::next_type&gt;::type \n      type;\n};","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521305,"discussion_content":"è°¢è°¢æŠ“è™«ğŸ™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622869253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328248,"user_name":"è«è¨€","can_delete":false,"product_type":"c1","uid":2174219,"ip_address":"","ucode":"7B4A0D0FF49806","user_header":"https://static001.geekbang.org/account/avatar/00/21/2d/0b/e6836053.jpg","comment_is_top":false,"comment_ctime":1640620214,"is_pvip":false,"replies":[{"id":119580,"content":"æ¨¡æ¿çš„å‚æ•°å¯ä»¥æ˜¯ç±»å‹ï¼ˆå¦‚ intï¼‰ï¼Œå¯ä»¥æ˜¯å€¼ï¼ˆå¦‚é•¿åº¦ 8ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ï¼ˆç±»æˆ–åˆ«åï¼‰æ¨¡æ¿ã€‚è¿™ä¸ªè¯­æ³•ä»£è¡¨ OutContainer æ˜¯ä¸€ä¸ªå¸¦ä¸¤ä¸ªç±»å‹æ¨¡æ¿å‚æ•°çš„ï¼ˆç±»æˆ–åˆ«åï¼‰æ¨¡æ¿ã€‚ï¼ˆvector æœ‰ä¸¤ä¸ªç±»å‹æ¨¡æ¿å‚æ•°ï¼Œç¬¬äºŒä¸ªæœ‰é»˜è®¤å€¼ï¼Œä¸€èˆ¬ä¸éœ€è¦è‡ªå·±æä¾›ã€‚ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1640675172,"ip_address":"","comment_id":328248,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"template &lt;  template &lt;typename, typename&gt;  class OutContainer = vector,  typename F, class R&gt;\nè¯·é—®è€å¸ˆï¼Œè¿™ä¸ªOutConContainerå‰é¢çš„template&lt;typename,typename&gt;åº”è¯¥æ€ä¹ˆç†è§£","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481695,"discussion_content":"å—¯ï¼Œæ˜¯çš„ï¼Œä½ çš„å†™æ³•èƒ½å°‘å±•å¼€ä¸€æ¬¡ã€‚ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579185272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382426,"user_name":"æäº‘é¾™","can_delete":false,"product_type":"c1","uid":3201926,"ip_address":"åŒ—äº¬","ucode":"785924B16BE788","user_header":"https://static001.geekbang.org/account/avatar/00/30/db/86/51ec4c41.jpg","comment_is_top":false,"comment_ctime":1697293170,"is_pvip":false,"replies":[{"id":139381,"content":"æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œä¼¼ä¹ä¸è¡Œï¼Ÿ\n\næˆ‘å°±å‰é¢åŠ äº† &lt;iostream&gt; çš„åŒ…å«å’Œ usingã€‚ç„¶åå°±æŠ¥é”™äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1697812894,"ip_address":"å¹¿ä¸œ","comment_id":382426,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"åˆ†äº«ä¸€ä¸‹æˆ‘çš„ä»£ç ï¼šå®ç°æ±‚æœ€å¤§å…¬çº¦æ•°çš„è¾—è½¬ç›¸é™¤æ³•\ntemplate &lt;bool Cond, typename Body&gt;\nstruct WhileLoop;\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;true, Body&gt;\n{\n    typedef typename WhileLoop&lt;Body::Cond, typename Body::NextType&gt;::type type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;false, Body&gt;\n{\n    typedef typename Body::ResType type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct While\n{\n    typedef typename WhileLoop&lt;Body::Cond, Body&gt;::type type;\n};\n\ntemplate &lt;typename T, T val&gt;\nstruct integer\n{\n    typedef T ValueType;\n    static const T Value = val;\n    typedef integer type;\n};\n\ntemplate &lt;int lhs, int rhs&gt;\nstruct GCD\n{\n    static const bool Cond = lhs % rhs != 0;\n    static const int result = lhs;\n    typedef integer&lt;int, result&gt; ResType;\n    typedef GCD&lt;rhs, lhs % rhs&gt; NextType;\n};\n\nint main()\n{\n    cout &lt;&lt; While&lt;GCD&lt;100, 56&gt;&gt;::type::Value &lt;&lt; endl;\n    return 0;\n}","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542180,"discussion_content":"æ¨¡æ¿çš„å‚æ•°å¯ä»¥æ˜¯ç±»å‹ï¼ˆå¦‚ intï¼‰ï¼Œå¯ä»¥æ˜¯å€¼ï¼ˆå¦‚é•¿åº¦ 8ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ï¼ˆç±»æˆ–åˆ«åï¼‰æ¨¡æ¿ã€‚è¿™ä¸ªè¯­æ³•ä»£è¡¨ OutContainer æ˜¯ä¸€ä¸ªå¸¦ä¸¤ä¸ªç±»å‹æ¨¡æ¿å‚æ•°çš„ï¼ˆç±»æˆ–åˆ«åï¼‰æ¨¡æ¿ã€‚ï¼ˆvector æœ‰ä¸¤ä¸ªç±»å‹æ¨¡æ¿å‚æ•°ï¼Œç¬¬äºŒä¸ªæœ‰é»˜è®¤å€¼ï¼Œä¸€èˆ¬ä¸éœ€è¦è‡ªå·±æä¾›ã€‚ï¼‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640675172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290495,"user_name":"Geek_15f2c9","can_delete":false,"product_type":"c1","uid":2557701,"ip_address":"","ucode":"3AA686B1D31AB1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Wjsc175urqxxBcCsxSDG5iaWcEq4hIg4SCCVJCIC108Ul5l7US4iaE3iaaMWodSJeybGemicEnfetHFCj9P6QI17xw/132","comment_is_top":false,"comment_ctime":1619590071,"is_pvip":false,"replies":[{"id":105294,"content":"å¾ˆå¥½çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå®é™…å¿…è¦æ€§ä¸é«˜ã€‚\n\nåŸå› æ˜¯ï¼Œf(â€¦) æå°‘ä¼šæœ‰åˆæ³•çš„ã€è¿”å›å³å€¼å¼•ç”¨çš„åœºæ™¯ã€‚å”¯ä¸€æˆ‘èƒ½æƒ³åˆ°çš„å¯èƒ½æ€§æ˜¯è¿”å›å€¼æ˜¯æ ¹æ®è¾“å…¥çš„å³å€¼ç”Ÿæˆçš„æƒ…å†µã€‚è¿™æ ·çš„è¯ï¼Œå¾—ä¿è¯åœ¨è¾“å…¥æ˜¯ä¸ªå³å€¼å®¹å™¨æ—¶ä¼ é€’å…ƒç´ çš„å³å€¼ç»™ fï¼Œæ‰€ä»¥çœŸè¦è€ƒè™‘è¿™ç§æƒ…å†µçš„è¯ï¼Œä»£ç æ¯”ä½ å†™çš„è¿˜è¦å†å¤æ‚ä¸å°‘â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1619617088,"ip_address":"","comment_id":290495,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œå¯¹ä¸‡èƒ½å¼•ç”¨ä½¿ç”¨å®Œç¾è½¬å‘æ˜¯å¦å¥½ç‚¹ï¼Œresult.push_back(std::forward&lt;decltype(f(item))&gt;(f(item)))æˆ–result.emplace_back(std::forward&lt;decltype(f(item))&gt;(f(item)));;","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629926,"discussion_content":"æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œä¼¼ä¹ä¸è¡Œï¼Ÿ\n\næˆ‘å°±å‰é¢åŠ äº† &lt;iostream&gt; çš„åŒ…å«å’Œ usingã€‚ç„¶åå°±æŠ¥é”™äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697812894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":3201926,"avatar":"https://static001.geekbang.org/account/avatar/00/30/db/86/51ec4c41.jpg","nickname":"æäº‘é¾™","note":"","ucode":"785924B16BE788","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":630236,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æ˜¯åœ¨Windowsä¸Šï¼ŒIDEæ˜¯visual studio2022, åŠ ä¸Š&lt;iostream&gt; å’Œ using æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ã€‚æˆ‘æ²¡æœ‰åœ¨gccä¸Šæµ‹è¯•ï¼Œç­‰ä¸‹æˆ‘ç”¨gccè¯•ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698200933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":629926,"ip_address":"åŒ—äº¬","group_id":0},"score":630236,"extra":""},{"author":{"id":3201926,"avatar":"https://static001.geekbang.org/account/avatar/00/30/db/86/51ec4c41.jpg","nickname":"æäº‘é¾™","note":"","ucode":"785924B16BE788","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":630255,"discussion_content":"åœ¨Linuxä¸Šç”¨gccç¼–è¯‘ç¡®å®æŠ¥é”™ï¼Œç»è¿‡æŠ¢ä¿®ï¼Œå¯é€šè¿‡ä»£ç å¦‚ä¸‹ï¼Œå¤šè°¢è€å¸ˆæé†’ï¼š\n#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;bool Cond, typename Body&gt;\nstruct WhileLoop;\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;true, Body&gt;\n{\n    typedef typename WhileLoop&lt;Body::Cond, typename Body::NextType&gt;::type type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;false, Body&gt;\n{\n    typedef typename Body::ResType type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct While\n{\n    typedef typename WhileLoop&lt;Body::Cond, Body&gt;::type type;\n};\n\ntemplate &lt;typename T, T val&gt;\nstruct integer\n{\n    typedef T ValueType;\n    static const T Value = val;\n    typedef integer type;\n};\n\ntemplate &lt;int lhs, int rhs&gt;\nstruct GCD\n{\n    static const bool Cond = rhs != 0 &amp;&amp; rhs % (lhs % rhs) != 0;\n    static const int result = rhs;\n    typedef integer&lt;int, result&gt; ResType;\n    typedef GCD&lt;rhs, lhs% rhs&gt; NextType;\n};\n\nint main()\n{\n    cout &lt;&lt; While&lt;GCD&lt;100, 56&gt;&gt;::type::Value &lt;&lt; endl;\n    return 0;\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698219333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":629926,"ip_address":"åŒ—äº¬","group_id":0},"score":630255,"extra":""}]}]},{"had_liked":false,"id":264808,"user_name":"Gazelle","can_delete":false,"product_type":"c1","uid":2049810,"ip_address":"","ucode":"5839E1510A53FE","user_header":"https://static001.geekbang.org/account/avatar/00/1f/47/12/0186b64e.jpg","comment_is_top":false,"comment_ctime":1606658144,"is_pvip":false,"replies":[{"id":96256,"content":"è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚ï¼šconst T&amp; ç­‰åŒäº T const&amp;ï¼Œä½†å’Œ T&amp; const ä¸åŒã€‚å‰è€…æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡çš„å¼•ç”¨ï¼Œåè€…æ˜¯ä¸€ä¸ªå¸¸å¼•ç”¨ã€‚åªæœ‰åè€…æ‰è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªâ€œå¸¸é‡â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1606788794,"ip_address":"","comment_id":264808,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘å®è·µå†™äº†ä¸‹remove_constï¼Œå¥½åƒæ²¡æœ‰æŠŠconstå»æ‰ã€‚è¿™é‡Œæ˜¯ä¸æ˜¯æœ‰ç‚¹é—®é¢˜å‘¢ï¼Ÿ\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;15887144&#47;stdremove-const-with-const-references\næˆ‘çœ‹è¿™é‡Œè¯´æ˜¯å¦‚æœåŒæ—¶æœ‰constå’Œå¼•ç”¨çš„è¯ï¼Œè¿˜éœ€è¦å»æ‰å¼•ç”¨ï¼Ÿ\nstd::remove_const&lt;std::remove_reference&lt;const string&amp;&gt;::type&gt;::type","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519216,"discussion_content":"å¾ˆå¥½çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå®é™…å¿…è¦æ€§ä¸é«˜ã€‚\n\nåŸå› æ˜¯ï¼Œf(â€¦) æå°‘ä¼šæœ‰åˆæ³•çš„ã€è¿”å›å³å€¼å¼•ç”¨çš„åœºæ™¯ã€‚å”¯ä¸€æˆ‘èƒ½æƒ³åˆ°çš„å¯èƒ½æ€§æ˜¯è¿”å›å€¼æ˜¯æ ¹æ®è¾“å…¥çš„å³å€¼ç”Ÿæˆçš„æƒ…å†µã€‚è¿™æ ·çš„è¯ï¼Œå¾—ä¿è¯åœ¨è¾“å…¥æ˜¯ä¸ªå³å€¼å®¹å™¨æ—¶ä¼ é€’å…ƒç´ çš„å³å€¼ç»™ fï¼Œæ‰€ä»¥çœŸè¦è€ƒè™‘è¿™ç§æƒ…å†µçš„è¯ï¼Œä»£ç æ¯”ä½ å†™çš„è¿˜è¦å†å¤æ‚ä¸å°‘â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619617088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252660,"user_name":"é²Â·æœ¬","can_delete":false,"product_type":"c1","uid":1209939,"ip_address":"","ucode":"F1DEB30C21B48E","user_header":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","comment_is_top":false,"comment_ctime":1602426833,"is_pvip":false,"replies":[{"id":92303,"content":"å“ˆå“ˆï¼Œæˆ‘å†™çš„æ—¶å€™å¤´ä¹Ÿå¾ˆå¤§ã€‚åªæ˜¯ä¸ºäº†è¯´æ˜èƒ½å†™å‡ºæ¥ï¼Œè€Œä¸æ˜¯çœŸæƒ³&#47;éœ€è¦è¿™ä¹ˆå†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1602477198,"ip_address":"","comment_id":252660,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å¯¹While&lt;Sum&lt;10&gt;::type&gt;::type::valueè¿›è¡Œæ‰‹åŠ¨æ¨å¯¼ï¼Œæœ€ç»ˆæ˜¯èƒ½æ¨å¯¼å‡ºå®é™…è¯­å¥æ˜¯ integral_constant&lt;intï¼Œ10+9+...1&gt;::valueçš„ï¼Œä½†è®©æˆ‘ç‹¬ç«‹å†™å‡º å®Œæ•´çš„ä»£ç æ˜¯ä¸‡ä¸‡ä¸èƒ½çš„ğŸ˜„","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510690,"discussion_content":"è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚ï¼šconst T&amp;amp; ç­‰åŒäº T const&amp;amp;ï¼Œä½†å’Œ T&amp;amp; const ä¸åŒã€‚å‰è€…æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡çš„å¼•ç”¨ï¼Œåè€…æ˜¯ä¸€ä¸ªå¸¸å¼•ç”¨ã€‚åªæœ‰åè€…æ‰è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªâ€œå¸¸é‡â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606788794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223332,"user_name":"åƒé±¼","can_delete":false,"product_type":"c1","uid":2005742,"ip_address":"","ucode":"CB7AC741E0E4B7","user_header":"https://static001.geekbang.org/account/avatar/00/1e/9a/ee/f996f864.jpg","comment_is_top":false,"comment_ctime":1591064079,"is_pvip":false,"replies":[{"id":82274,"content":"æŒ‡çš„å°±æ˜¯è¿™å¥ï¼š\n\n_destroy(ptr, is_trivially_destructible&lt;T&gt;())\n\nè¿™å„¿æ„é€ äº†ä¸€ä¸ª true_type æˆ– false_type çš„å¯¹è±¡ï¼Œç„¶åç¼–è¯‘å™¨ä¼šæ ¹æ®ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹ï¼Œå†³å®šè°ƒç”¨ _destroy çš„å“ªä¸ªé‡è½½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1591066358,"ip_address":"","comment_id":223332,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"â€œå¦‚æœè¦å¾—åˆ°å¸ƒå°”å€¼çš„è¯ï¼Œå½“ç„¶ä½¿ç”¨ `is_trivially_destructible::value` å°±å¯ä»¥ï¼Œä½†æ­¤å¤„ä¸éœ€è¦ã€‚éœ€è¦çš„æ˜¯ï¼Œä½¿ç”¨ `()` è°ƒç”¨è¯¥ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œè®©ç¼–è¯‘å™¨æ ¹æ®æ•°å€¼ç±»å‹æ¥é€‰æ‹©åˆé€‚çš„é‡è½½ã€‚è¿™æ ·ï¼Œåœ¨ä¼˜åŒ–ç¼–è¯‘çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥æŠŠä¸éœ€è¦çš„ææ„æ“ä½œå½»åº•å…¨éƒ¨åˆ é™¤ã€‚â€\nè€å¸ˆï¼Œè¿™é‡Œæ²¡å¤ªæ‡‚ï¼Œä½¿ç”¨ `()` è°ƒç”¨è¯¥ç±»å‹çš„æ„é€ ï¼Œè¿™é‡Œçš„è°ƒç”¨æ˜¯åœ¨å“ªé‡Œè°ƒç”¨ï¼Œä¸ºä»€ä¹ˆ destroy è¦è°ƒç”¨æ„é€ å‡½æ•°","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506828,"discussion_content":"å“ˆå“ˆï¼Œæˆ‘å†™çš„æ—¶å€™å¤´ä¹Ÿå¾ˆå¤§ã€‚åªæ˜¯ä¸ºäº†è¯´æ˜èƒ½å†™å‡ºæ¥ï¼Œè€Œä¸æ˜¯çœŸæƒ³/éœ€è¦è¿™ä¹ˆå†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602477198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165563,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1577260644,"is_pvip":false,"replies":[{"id":63150,"content":"å¯¹ï¼Œå¯¹äºæ¨¡æ¿ï¼Œå°±æ˜¯è¦åœ¨è„‘å­é‡Œæˆ–çº¸ä¸Šã€ç”µè„‘ä¸ŠæŠŠå®ƒå±•å¼€â€¦â€¦â˜ºï¸","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577275419,"ip_address":"","comment_id":165563,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è„‘å£³å„¿ç–¼çš„å…„å¼Ÿå§å¦¹ä»¬ï¼Œæˆ‘è¿™æœ‰ä¸ªå°åæ–¹ï¼Œ å“ˆå“ˆ\n\nWhile&lt; Sum&lt;2&gt;::type &gt;::type::value å®ä¾‹åŒ–(instantiation)è¿‡ç¨‹\n--&gt; While&lt; SumLoop&lt;0, 2&gt; &gt;::type::value\n--&gt; WhileLoop&lt;SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;&gt;::type::value\n--&gt; WhileLoop&lt;true, SumLoop&lt;0, 2&gt;&gt;::type::value\n\n--&gt; WhileLoop&lt;SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;::next_type&gt;::type::value\n--&gt; WhileLoop&lt;true, SumLoop&lt;2, 1&gt;&gt;::type::value\n\n--&gt; WhileLoop&lt;SumLoop&lt;2, 1&gt;::cond_value, SumLoop&lt;2, 1&gt;::next_type&gt;::type::value\n--&gt; WhileLoop&lt;true, SumLoop&lt;3, 0&gt;&gt;::type::value\n\n--&gt; WhileLoop&lt;SumLoop&lt;3, 0&gt;::cond_value, SumLoop&lt;3, 0&gt;::next_type&gt;::type::value\n--&gt; WhileLoop&lt;false, SumLoop&lt;3, -1&gt;&gt;::type::value\n\n--&gt; SumLoop&lt;3, -1&gt;::res_type::value\n\n--&gt;integral_constant&lt;int, 3&gt;::value\n--&gt;3","like_count":22,"discussions":[{"author":{"id":1301097,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","nickname":"å°ä¸€æ—¥ä¸€","note":"","ucode":"0A506C2B918C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630886,"discussion_content":"åŠ ä¸Šæ³¨é‡Šå¸®åŠ©å¤§å®¶ç†è§£ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸æ–­çš„å…ˆæ¨å¯¼æ¨¡æ¿å‚æ•°å’Œæ¨å¯¼::type ç±»å‹ï¼Œè¿‡ç¨‹ä¸­ä¸æ–­çš„åš substitution\nWhile&lt; Sum&lt;2&gt;::type &gt;::type::value å®ä¾‹åŒ–(instantiation)è¿‡ç¨‹\n\n--&gt; While&lt; Sum&lt;2&gt;::type &gt;::type::value                                           // æ¨å¯¼ Sum&lt;2&gt;::type\n--&gt; While&lt; SumLoop&lt;0, 2&gt; &gt;::type::value                                          // æ¨å¯¼ While&lt; SumLoop&lt;0, 2&gt;::type\n--&gt; WhileLoop&lt;SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;&gt;::type::value             // æ¨å¯¼ SumLoop&lt;0, 2&gt;::cond_value\n--&gt; WhileLoop&lt;true, SumLoop&lt;0, 2&gt;&gt;::type::value                                  // æ¨å¯¼ WhileLoop&lt;true, SumLoop&lt;0, 2&gt;&gt;::type\n\n--&gt; WhileLoop&lt;SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;::next_type&gt;::type::value  // æ¨å¯¼ SumLoop&lt;0, 2&gt;::cond_value, SumLoop&lt;0, 2&gt;::next_type\n--&gt; WhileLoop&lt;true, SumLoop&lt;2, 1&gt;&gt;::type::value                                  // æ¨å¯¼ WhileLoop&lt;true, SumLoop&lt;2, 1&gt;&gt;::type\n\n--&gt; WhileLoop&lt;SumLoop&lt;2, 1&gt;::cond_value, SumLoop&lt;2, 1&gt;::next_type&gt;::type::value  // æ¨å¯¼ SumLoop&lt;2, 1&gt;::cond_value, SumLoop&lt;2, 1&gt;::next_type\n--&gt; WhileLoop&lt;true, SumLoop&lt;3, 0&gt;&gt;::type::value                                  // æ¨å¯¼ WhileLoop&lt;true, SumLoop&lt;3, 0&gt;&gt;::type\n\n--&gt; WhileLoop&lt;SumLoop&lt;3, 0&gt;::cond_value, SumLoop&lt;3, 0&gt;::next_type&gt;::type::value  // æ¨å¯¼ SumLoop&lt;3, 0&gt;::cond_value, SumLoop&lt;3, 0&gt;::next_type\n--&gt; WhileLoop&lt;false, SumLoop&lt;3, -1&gt;&gt;::type::value                                // æ¨å¯¼ WhileLoop&lt;false, SumLoop&lt;3, -1&gt;&gt;::type\n\n--&gt; SumLoop&lt;3, -1&gt;::res_type::value                                              // æ¨å¯¼ SumLoop&lt;3, -1&gt;::res_type, ç”Ÿæˆintegral_constant&lt;int, 3&gt;\n\n--&gt;integral_constant&lt;int, 3&gt;::value                                              // è·å– é™æ€å˜é‡ value\n--&gt;3","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1699003481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479206,"discussion_content":"å¯¹ï¼Œå¯¹äºæ¨¡æ¿ï¼Œå°±æ˜¯è¦åœ¨è„‘å­é‡Œæˆ–çº¸ä¸Šã€ç”µè„‘ä¸ŠæŠŠå®ƒå±•å¼€â€¦â€¦â˜ºï¸","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577275419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2006194,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/9c/b2/1a9beeb1.jpg","nickname":"è½¬éä¸–ç•Œ","note":"","ucode":"0783BFDDE87029","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":634718,"discussion_content":"ä»ä¸Šé¢çš„å±•å¼€æˆ‘æœ‰ä¸¤ä¸ªç–‘é—®ï¼Œä¸€æ˜¯SumLoop&lt;0, 2&gt;::cond_valueåˆå§‹æ¡ä»¶ç¬¬ä¸€æ¬¡ç”¨æ²¡è¿›å…¥ä¸‹æ¬¡å¾ªç¯ä½“å³SumLoop&lt;0, 2&gt;::next_typeï¼Œç¬¬äºŒæ¬¡ç”¨äº†æ‰è¿›å…¥ï¼ŸäºŒæ˜¯n==0æ—¶æ¡ä»¶ä¸ºfalseæ—¶è¿˜è®¡ç®—äº†next_typeï¼Œå³æŠŠ0åŠ åˆ°äº†ç»“æœï¼Œè¿™æ ·å¾ˆå¯èƒ½å¯¼è‡´é”™è¯¯ï¼Œ\næ€ä¹ˆè§£å†³ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1703835603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":479206,"ip_address":"æ±Ÿè‹","group_id":0},"score":634718,"extra":""}]}]},{"had_liked":false,"id":165604,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1577267357,"is_pvip":false,"replies":[{"id":63164,"content":"ä¸‹é¢çš„å‡½æ•°å’Œæ¨¡æ¿æ˜¯åŸºæœ¬ç­‰ä»·çš„ï¼š\n\nint foo(int n)\n{\n  if (n == 2 || n == 3 || n == 5) {\n    return 1;\n  } else {\n    return 2;\n  }\n}\n\ntemplate &lt;int n&gt;\nstruct Foo {\n  typedef typename If&lt;\n    (n == 2 || n == 3 || n == 5),\n    integral_constant&lt;int, 1&gt;,\n    integral_constant&lt;int, 2&gt;&gt;::type\n    type;\n};\n\nä½ å¯ä»¥è¾“å‡º foo(3)ï¼Œä¹Ÿå¯ä»¥è¾“å‡º Foo&lt;3&gt;::type::valueã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577283642,"ip_address":"","comment_id":165604,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è®°å¾—å´è€å¸ˆä¹‹å‰é¢„å‘Šè¿‡ï¼Œè¿™ä¸€èŠ‚å¯èƒ½ä¼šæ¯”è¾ƒéš¾ï¼Œç¡®å®è¢«éš¾ä½äº†ã€‚åœ¨ç¬¬ä¸€ä¸ª If æ¨¡æ¿è¿™é‡Œå°±è¢«å¡ä½äº†ï¼Œè€å¸ˆèƒ½ç»™ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ª If æ¨¡æ¿è¯¥å¦‚ä½•ä½¿ç”¨ä¹ˆï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479222,"discussion_content":"ä¸‹é¢çš„å‡½æ•°å’Œæ¨¡æ¿æ˜¯åŸºæœ¬ç­‰ä»·çš„ï¼š\n\nint foo(int n)\n{\n  if (n == 2 || n == 3 || n == 5) {\n    return 1;\n  } else {\n    return 2;\n  }\n}\n\ntemplate &amp;lt;int n&amp;gt;\nstruct Foo {\n  typedef typename If&amp;lt;\n    (n == 2 || n == 3 || n == 5),\n    integral_constant&amp;lt;int, 1&amp;gt;,\n    integral_constant&amp;lt;int, 2&amp;gt;&amp;gt;::type\n    type;\n};\n\nä½ å¯ä»¥è¾“å‡º foo(3)ï¼Œä¹Ÿå¯ä»¥è¾“å‡º Foo&amp;lt;3&amp;gt;::type::valueã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577283642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296048,"user_name":"chang","can_delete":false,"product_type":"c1","uid":2596026,"ip_address":"","ucode":"594EF8CB4477BD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","comment_is_top":false,"comment_ctime":1622715836,"is_pvip":false,"replies":[{"id":107512,"content":"è°¢è°¢æŠ“è™«ğŸ™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1622869253,"ip_address":"","comment_id":296048,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ const string&amp; åº”ç”¨ remove_constï¼Œå°±ä¼šå¾—åˆ° string&amp;ï¼Œå³ï¼Œremove_const::type ç­‰ä»·äº string&amp;ã€‚\n\nremove_conståªèƒ½å»é¡¶å±‚constã€‚const string&amp;åº”ç”¨remove_conståè¿˜æ˜¯const string&amp;ï¼Œconst stringåº”ç”¨remove_conståæ˜¯stringã€‚","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521305,"discussion_content":"è°¢è°¢æŠ“è™«ğŸ™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622869253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172312,"user_name":"YouCompleteMe","can_delete":false,"product_type":"c1","uid":1232859,"ip_address":"","ucode":"89B5A75DA85E0A","user_header":"https://static001.geekbang.org/account/avatar/00/12/cf/db/9693d08f.jpg","comment_is_top":false,"comment_ctime":1579147719,"is_pvip":false,"replies":[{"id":66876,"content":"å—¯ï¼Œæ˜¯çš„ï¼Œä½ çš„å†™æ³•èƒ½å°‘å±•å¼€ä¸€æ¬¡ã€‚ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1579185272,"ip_address":"","comment_id":172312,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"template &lt;typename Body&gt;\nstruct whileLoop&lt;true, Body&gt;\néƒ¨åˆ†ä¼¼ä¹æ”¹æˆä¸‹é¢è¿™æ ·ï¼Œæ›´ç›´è§‚ï¼Œ\nç¼–è¯‘æ—¶è®¡ç®—æ›´å°‘å‘¢\n\ntemplate &lt;typename Body&gt;\nstruct whileLoop&lt;true, Body&gt; {\n    typedef typename whileLoop&lt;\n      Body::next_type::cond_value, \n      typename Body::next_type&gt;::type \n      type;\n};","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481695,"discussion_content":"å—¯ï¼Œæ˜¯çš„ï¼Œä½ çš„å†™æ³•èƒ½å°‘å±•å¼€ä¸€æ¬¡ã€‚ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579185272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328248,"user_name":"è«è¨€","can_delete":false,"product_type":"c1","uid":2174219,"ip_address":"","ucode":"7B4A0D0FF49806","user_header":"https://static001.geekbang.org/account/avatar/00/21/2d/0b/e6836053.jpg","comment_is_top":false,"comment_ctime":1640620214,"is_pvip":false,"replies":[{"id":119580,"content":"æ¨¡æ¿çš„å‚æ•°å¯ä»¥æ˜¯ç±»å‹ï¼ˆå¦‚ intï¼‰ï¼Œå¯ä»¥æ˜¯å€¼ï¼ˆå¦‚é•¿åº¦ 8ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ï¼ˆç±»æˆ–åˆ«åï¼‰æ¨¡æ¿ã€‚è¿™ä¸ªè¯­æ³•ä»£è¡¨ OutContainer æ˜¯ä¸€ä¸ªå¸¦ä¸¤ä¸ªç±»å‹æ¨¡æ¿å‚æ•°çš„ï¼ˆç±»æˆ–åˆ«åï¼‰æ¨¡æ¿ã€‚ï¼ˆvector æœ‰ä¸¤ä¸ªç±»å‹æ¨¡æ¿å‚æ•°ï¼Œç¬¬äºŒä¸ªæœ‰é»˜è®¤å€¼ï¼Œä¸€èˆ¬ä¸éœ€è¦è‡ªå·±æä¾›ã€‚ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1640675172,"ip_address":"","comment_id":328248,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"template &lt;  template &lt;typename, typename&gt;  class OutContainer = vector,  typename F, class R&gt;\nè¯·é—®è€å¸ˆï¼Œè¿™ä¸ªOutConContainerå‰é¢çš„template&lt;typename,typename&gt;åº”è¯¥æ€ä¹ˆç†è§£","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542180,"discussion_content":"æ¨¡æ¿çš„å‚æ•°å¯ä»¥æ˜¯ç±»å‹ï¼ˆå¦‚ intï¼‰ï¼Œå¯ä»¥æ˜¯å€¼ï¼ˆå¦‚é•¿åº¦ 8ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ï¼ˆç±»æˆ–åˆ«åï¼‰æ¨¡æ¿ã€‚è¿™ä¸ªè¯­æ³•ä»£è¡¨ OutContainer æ˜¯ä¸€ä¸ªå¸¦ä¸¤ä¸ªç±»å‹æ¨¡æ¿å‚æ•°çš„ï¼ˆç±»æˆ–åˆ«åï¼‰æ¨¡æ¿ã€‚ï¼ˆvector æœ‰ä¸¤ä¸ªç±»å‹æ¨¡æ¿å‚æ•°ï¼Œç¬¬äºŒä¸ªæœ‰é»˜è®¤å€¼ï¼Œä¸€èˆ¬ä¸éœ€è¦è‡ªå·±æä¾›ã€‚ï¼‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640675172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382426,"user_name":"æäº‘é¾™","can_delete":false,"product_type":"c1","uid":3201926,"ip_address":"åŒ—äº¬","ucode":"785924B16BE788","user_header":"https://static001.geekbang.org/account/avatar/00/30/db/86/51ec4c41.jpg","comment_is_top":false,"comment_ctime":1697293170,"is_pvip":false,"replies":[{"id":139381,"content":"æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œä¼¼ä¹ä¸è¡Œï¼Ÿ\n\næˆ‘å°±å‰é¢åŠ äº† &lt;iostream&gt; çš„åŒ…å«å’Œ usingã€‚ç„¶åå°±æŠ¥é”™äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1697812894,"ip_address":"å¹¿ä¸œ","comment_id":382426,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"åˆ†äº«ä¸€ä¸‹æˆ‘çš„ä»£ç ï¼šå®ç°æ±‚æœ€å¤§å…¬çº¦æ•°çš„è¾—è½¬ç›¸é™¤æ³•\ntemplate &lt;bool Cond, typename Body&gt;\nstruct WhileLoop;\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;true, Body&gt;\n{\n    typedef typename WhileLoop&lt;Body::Cond, typename Body::NextType&gt;::type type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;false, Body&gt;\n{\n    typedef typename Body::ResType type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct While\n{\n    typedef typename WhileLoop&lt;Body::Cond, Body&gt;::type type;\n};\n\ntemplate &lt;typename T, T val&gt;\nstruct integer\n{\n    typedef T ValueType;\n    static const T Value = val;\n    typedef integer type;\n};\n\ntemplate &lt;int lhs, int rhs&gt;\nstruct GCD\n{\n    static const bool Cond = lhs % rhs != 0;\n    static const int result = lhs;\n    typedef integer&lt;int, result&gt; ResType;\n    typedef GCD&lt;rhs, lhs % rhs&gt; NextType;\n};\n\nint main()\n{\n    cout &lt;&lt; While&lt;GCD&lt;100, 56&gt;&gt;::type::Value &lt;&lt; endl;\n    return 0;\n}","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629926,"discussion_content":"æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œä¼¼ä¹ä¸è¡Œï¼Ÿ\n\næˆ‘å°±å‰é¢åŠ äº† &lt;iostream&gt; çš„åŒ…å«å’Œ usingã€‚ç„¶åå°±æŠ¥é”™äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697812894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":3201926,"avatar":"https://static001.geekbang.org/account/avatar/00/30/db/86/51ec4c41.jpg","nickname":"æäº‘é¾™","note":"","ucode":"785924B16BE788","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":630236,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æ˜¯åœ¨Windowsä¸Šï¼ŒIDEæ˜¯visual studio2022, åŠ ä¸Š&lt;iostream&gt; å’Œ using æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ã€‚æˆ‘æ²¡æœ‰åœ¨gccä¸Šæµ‹è¯•ï¼Œç­‰ä¸‹æˆ‘ç”¨gccè¯•ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698200933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":629926,"ip_address":"åŒ—äº¬","group_id":0},"score":630236,"extra":""},{"author":{"id":3201926,"avatar":"https://static001.geekbang.org/account/avatar/00/30/db/86/51ec4c41.jpg","nickname":"æäº‘é¾™","note":"","ucode":"785924B16BE788","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":630255,"discussion_content":"åœ¨Linuxä¸Šç”¨gccç¼–è¯‘ç¡®å®æŠ¥é”™ï¼Œç»è¿‡æŠ¢ä¿®ï¼Œå¯é€šè¿‡ä»£ç å¦‚ä¸‹ï¼Œå¤šè°¢è€å¸ˆæé†’ï¼š\n#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;bool Cond, typename Body&gt;\nstruct WhileLoop;\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;true, Body&gt;\n{\n    typedef typename WhileLoop&lt;Body::Cond, typename Body::NextType&gt;::type type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct WhileLoop&lt;false, Body&gt;\n{\n    typedef typename Body::ResType type;\n};\n\ntemplate &lt;typename Body&gt;\nstruct While\n{\n    typedef typename WhileLoop&lt;Body::Cond, Body&gt;::type type;\n};\n\ntemplate &lt;typename T, T val&gt;\nstruct integer\n{\n    typedef T ValueType;\n    static const T Value = val;\n    typedef integer type;\n};\n\ntemplate &lt;int lhs, int rhs&gt;\nstruct GCD\n{\n    static const bool Cond = rhs != 0 &amp;&amp; rhs % (lhs % rhs) != 0;\n    static const int result = rhs;\n    typedef integer&lt;int, result&gt; ResType;\n    typedef GCD&lt;rhs, lhs% rhs&gt; NextType;\n};\n\nint main()\n{\n    cout &lt;&lt; While&lt;GCD&lt;100, 56&gt;&gt;::type::Value &lt;&lt; endl;\n    return 0;\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698219333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":629926,"ip_address":"åŒ—äº¬","group_id":0},"score":630255,"extra":""}]}]},{"had_liked":false,"id":290495,"user_name":"Geek_15f2c9","can_delete":false,"product_type":"c1","uid":2557701,"ip_address":"","ucode":"3AA686B1D31AB1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Wjsc175urqxxBcCsxSDG5iaWcEq4hIg4SCCVJCIC108Ul5l7US4iaE3iaaMWodSJeybGemicEnfetHFCj9P6QI17xw/132","comment_is_top":false,"comment_ctime":1619590071,"is_pvip":false,"replies":[{"id":105294,"content":"å¾ˆå¥½çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå®é™…å¿…è¦æ€§ä¸é«˜ã€‚\n\nåŸå› æ˜¯ï¼Œf(â€¦) æå°‘ä¼šæœ‰åˆæ³•çš„ã€è¿”å›å³å€¼å¼•ç”¨çš„åœºæ™¯ã€‚å”¯ä¸€æˆ‘èƒ½æƒ³åˆ°çš„å¯èƒ½æ€§æ˜¯è¿”å›å€¼æ˜¯æ ¹æ®è¾“å…¥çš„å³å€¼ç”Ÿæˆçš„æƒ…å†µã€‚è¿™æ ·çš„è¯ï¼Œå¾—ä¿è¯åœ¨è¾“å…¥æ˜¯ä¸ªå³å€¼å®¹å™¨æ—¶ä¼ é€’å…ƒç´ çš„å³å€¼ç»™ fï¼Œæ‰€ä»¥çœŸè¦è€ƒè™‘è¿™ç§æƒ…å†µçš„è¯ï¼Œä»£ç æ¯”ä½ å†™çš„è¿˜è¦å†å¤æ‚ä¸å°‘â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1619617088,"ip_address":"","comment_id":290495,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œå¯¹ä¸‡èƒ½å¼•ç”¨ä½¿ç”¨å®Œç¾è½¬å‘æ˜¯å¦å¥½ç‚¹ï¼Œresult.push_back(std::forward&lt;decltype(f(item))&gt;(f(item)))æˆ–result.emplace_back(std::forward&lt;decltype(f(item))&gt;(f(item)));;","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519216,"discussion_content":"å¾ˆå¥½çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå®é™…å¿…è¦æ€§ä¸é«˜ã€‚\n\nåŸå› æ˜¯ï¼Œf(â€¦) æå°‘ä¼šæœ‰åˆæ³•çš„ã€è¿”å›å³å€¼å¼•ç”¨çš„åœºæ™¯ã€‚å”¯ä¸€æˆ‘èƒ½æƒ³åˆ°çš„å¯èƒ½æ€§æ˜¯è¿”å›å€¼æ˜¯æ ¹æ®è¾“å…¥çš„å³å€¼ç”Ÿæˆçš„æƒ…å†µã€‚è¿™æ ·çš„è¯ï¼Œå¾—ä¿è¯åœ¨è¾“å…¥æ˜¯ä¸ªå³å€¼å®¹å™¨æ—¶ä¼ é€’å…ƒç´ çš„å³å€¼ç»™ fï¼Œæ‰€ä»¥çœŸè¦è€ƒè™‘è¿™ç§æƒ…å†µçš„è¯ï¼Œä»£ç æ¯”ä½ å†™çš„è¿˜è¦å†å¤æ‚ä¸å°‘â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619617088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264808,"user_name":"Gazelle","can_delete":false,"product_type":"c1","uid":2049810,"ip_address":"","ucode":"5839E1510A53FE","user_header":"https://static001.geekbang.org/account/avatar/00/1f/47/12/0186b64e.jpg","comment_is_top":false,"comment_ctime":1606658144,"is_pvip":false,"replies":[{"id":96256,"content":"è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚ï¼šconst T&amp; ç­‰åŒäº T const&amp;ï¼Œä½†å’Œ T&amp; const ä¸åŒã€‚å‰è€…æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡çš„å¼•ç”¨ï¼Œåè€…æ˜¯ä¸€ä¸ªå¸¸å¼•ç”¨ã€‚åªæœ‰åè€…æ‰è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªâ€œå¸¸é‡â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1606788794,"ip_address":"","comment_id":264808,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘å®è·µå†™äº†ä¸‹remove_constï¼Œå¥½åƒæ²¡æœ‰æŠŠconstå»æ‰ã€‚è¿™é‡Œæ˜¯ä¸æ˜¯æœ‰ç‚¹é—®é¢˜å‘¢ï¼Ÿ\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;15887144&#47;stdremove-const-with-const-references\næˆ‘çœ‹è¿™é‡Œè¯´æ˜¯å¦‚æœåŒæ—¶æœ‰constå’Œå¼•ç”¨çš„è¯ï¼Œè¿˜éœ€è¦å»æ‰å¼•ç”¨ï¼Ÿ\nstd::remove_const&lt;std::remove_reference&lt;const string&amp;&gt;::type&gt;::type","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510690,"discussion_content":"è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚ï¼šconst T&amp;amp; ç­‰åŒäº T const&amp;amp;ï¼Œä½†å’Œ T&amp;amp; const ä¸åŒã€‚å‰è€…æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡çš„å¼•ç”¨ï¼Œåè€…æ˜¯ä¸€ä¸ªå¸¸å¼•ç”¨ã€‚åªæœ‰åè€…æ‰è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªâ€œå¸¸é‡â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606788794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252660,"user_name":"é²Â·æœ¬","can_delete":false,"product_type":"c1","uid":1209939,"ip_address":"","ucode":"F1DEB30C21B48E","user_header":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","comment_is_top":false,"comment_ctime":1602426833,"is_pvip":false,"replies":[{"id":92303,"content":"å“ˆå“ˆï¼Œæˆ‘å†™çš„æ—¶å€™å¤´ä¹Ÿå¾ˆå¤§ã€‚åªæ˜¯ä¸ºäº†è¯´æ˜èƒ½å†™å‡ºæ¥ï¼Œè€Œä¸æ˜¯çœŸæƒ³&#47;éœ€è¦è¿™ä¹ˆå†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1602477198,"ip_address":"","comment_id":252660,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å¯¹While&lt;Sum&lt;10&gt;::type&gt;::type::valueè¿›è¡Œæ‰‹åŠ¨æ¨å¯¼ï¼Œæœ€ç»ˆæ˜¯èƒ½æ¨å¯¼å‡ºå®é™…è¯­å¥æ˜¯ integral_constant&lt;intï¼Œ10+9+...1&gt;::valueçš„ï¼Œä½†è®©æˆ‘ç‹¬ç«‹å†™å‡º å®Œæ•´çš„ä»£ç æ˜¯ä¸‡ä¸‡ä¸èƒ½çš„ğŸ˜„","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506828,"discussion_content":"å“ˆå“ˆï¼Œæˆ‘å†™çš„æ—¶å€™å¤´ä¹Ÿå¾ˆå¤§ã€‚åªæ˜¯ä¸ºäº†è¯´æ˜èƒ½å†™å‡ºæ¥ï¼Œè€Œä¸æ˜¯çœŸæƒ³/éœ€è¦è¿™ä¹ˆå†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602477198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223332,"user_name":"åƒé±¼","can_delete":false,"product_type":"c1","uid":2005742,"ip_address":"","ucode":"CB7AC741E0E4B7","user_header":"https://static001.geekbang.org/account/avatar/00/1e/9a/ee/f996f864.jpg","comment_is_top":false,"comment_ctime":1591064079,"is_pvip":false,"replies":[{"id":82274,"content":"æŒ‡çš„å°±æ˜¯è¿™å¥ï¼š\n\n_destroy(ptr, is_trivially_destructible&lt;T&gt;())\n\nè¿™å„¿æ„é€ äº†ä¸€ä¸ª true_type æˆ– false_type çš„å¯¹è±¡ï¼Œç„¶åç¼–è¯‘å™¨ä¼šæ ¹æ®ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹ï¼Œå†³å®šè°ƒç”¨ _destroy çš„å“ªä¸ªé‡è½½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1591066358,"ip_address":"","comment_id":223332,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"â€œå¦‚æœè¦å¾—åˆ°å¸ƒå°”å€¼çš„è¯ï¼Œå½“ç„¶ä½¿ç”¨ `is_trivially_destructible::value` å°±å¯ä»¥ï¼Œä½†æ­¤å¤„ä¸éœ€è¦ã€‚éœ€è¦çš„æ˜¯ï¼Œä½¿ç”¨ `()` è°ƒç”¨è¯¥ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œè®©ç¼–è¯‘å™¨æ ¹æ®æ•°å€¼ç±»å‹æ¥é€‰æ‹©åˆé€‚çš„é‡è½½ã€‚è¿™æ ·ï¼Œåœ¨ä¼˜åŒ–ç¼–è¯‘çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥æŠŠä¸éœ€è¦çš„ææ„æ“ä½œå½»åº•å…¨éƒ¨åˆ é™¤ã€‚â€\nè€å¸ˆï¼Œè¿™é‡Œæ²¡å¤ªæ‡‚ï¼Œä½¿ç”¨ `()` è°ƒç”¨è¯¥ç±»å‹çš„æ„é€ ï¼Œè¿™é‡Œçš„è°ƒç”¨æ˜¯åœ¨å“ªé‡Œè°ƒç”¨ï¼Œä¸ºä»€ä¹ˆ destroy è¦è°ƒç”¨æ„é€ å‡½æ•°","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497102,"discussion_content":"æŒ‡çš„å°±æ˜¯è¿™å¥ï¼š\n\n_destroy(ptr, is_trivially_destructible&amp;lt;T&amp;gt;())\n\nè¿™å„¿æ„é€ äº†ä¸€ä¸ª true_type æˆ– false_type çš„å¯¹è±¡ï¼Œç„¶åç¼–è¯‘å™¨ä¼šæ ¹æ®ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹ï¼Œå†³å®šè°ƒç”¨ _destroy çš„å“ªä¸ªé‡è½½ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591066358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2005742,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/9a/ee/f996f864.jpg","nickname":"åƒé±¼","note":"","ucode":"CB7AC741E0E4B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277526,"discussion_content":"è€å¸ˆæˆ‘çœ‹äº†ä¸‹C++referenceï¼Œis_trivially_destructible::value ç»§æ‰¿è‡ª integral_constantï¼Œè€Œ integral_constant æœ‰å¯¹ () çš„æ“ä½œç¬¦é‡è½½ï¼š\n\ntemplate <class T, T v>\nstruct integral_constant {\n  static constexpr T value = v;\n  typedef T value_type;\n  typedef integral_constant<T,v> type;\n  constexpr operator T() const noexcept { return v; }\n  constexpr T operator()() const noexcept { return v; }\n};\n\né‚£è¯¾ç¨‹ä¸­ä½¿ç”¨ is_trivially_destructible<T>() æ˜¯å¦æ˜¯ä½¿ç”¨äº†è¿™ä¸ªæ“ä½œç¬¦é‡è½½å‘¢ï¼Ÿå¦‚æœæ˜¯çš„è¯å…¶è¿”å›åº”è¯¥æ˜¯ä¸€ä¸ª bool ç±»å‹çš„å€¼ï¼Œä¸ºä»€ä¹ˆå¯ä»¥ç”¨ true_type å’Œ false_type æ¥æ¥æ”¶å‚æ•°å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591065960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2005742,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/9a/ee/f996f864.jpg","nickname":"åƒé±¼","note":"","ucode":"CB7AC741E0E4B7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278521,"discussion_content":"å½“ç„¶æ²¡æœ‰ä½¿ç”¨ operator T()ã€‚è°ƒç”¨ operator T() æ˜¯è¦åœ¨æ˜ç¡®è¦æ±‚ T ç±»å‹çš„åœºåˆï¼Œæˆ‘ä»¬å…ˆç°åœ¨åˆ™æ°æ°ç›¸åï¼Œåªæœ‰ true_type å’Œ false_type çš„é‡è½½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591195124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":277526,"ip_address":"","group_id":0},"score":278521,"extra":""}]}]},{"had_liked":false,"id":167868,"user_name":"åƒä¸€ä¸ªèŠ’æœ","can_delete":false,"product_type":"c1","uid":1762540,"ip_address":"","ucode":"313816A05796BD","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e4/ec/88ccd50b.jpg","comment_is_top":false,"comment_ctime":1577954581,"is_pvip":false,"replies":[{"id":65234,"content":"ä½ å¸Œæœ›çš„å†™æ³•æˆ‘è§‰å¾—æ˜¯å†™ä¸å‡ºæ¥çš„ï¼Œè€Œä¸”æ„ä¹‰ä¼¼ä¹ä¹Ÿä¸å¤§ï¼Ÿä¸‹é¢è¿™æ ·å†™ä¼¼ä¹è¡¨è¾¾èƒ½åŠ›æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”å¯ä»¥è¿‡ï¼š\n\ntemplate &lt;bool Condition, int num1, int num2&gt;\nusing If = typename If_&lt;Condition&gt;::\n  template type&lt;num1, num2&gt;;\n\ntemplate &lt;int num1, int num2&gt;\nusing True = If&lt;true, num1, num2&gt;;\n\ntemplate &lt;int num1, int num2&gt;\nusing False = If&lt;false, num1, num2&gt;;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577975890,"ip_address":"","comment_id":167868,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"template &lt;int num1, int num2&gt;\nstruct Add_\n{\n    const static int res = num1 + num2;\n};\n\ntemplate &lt;int num1, int num2&gt;\nstruct Sub_\n{\n    const static int res = num1 - num2;\n};\n\ntemplate &lt;bool Condition&gt;\nstruct If_;\n\ntemplate &lt;&gt;\nstruct If_ &lt;true&gt;\n{\n    template&lt;int num1, int num2&gt;\n    using type = Add_&lt;num1, num2&gt;;\n};\n\ntemplate &lt;&gt;\nstruct If_ &lt;false&gt;\n{\n    template&lt;int num1, int num2&gt;\n    using type = Sub_&lt;num1, num2&gt;;\n};\n\ntemplate&lt;int num1, int num2&gt;\ntemplate&lt;bool Condition&gt;\nusing If = typename If_&lt;Condition&gt;::template type&lt;num1, num2&gt;;\n\ntemplate&lt;int num1, int num2&gt;\nusing True = If&lt;true&gt;;\n\ntemplate&lt;int num1, int num2&gt;\nusing False = If&lt;false&gt;;\n\nè€å¸ˆä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸ªè¯­æ³•æ–¹é¢å¯èƒ½æ¯”è¾ƒé’»ç‰›è§’å°–çš„é—®é¢˜\næˆ‘å®šä¹‰äº†If_,ç”¨æ¥åœ¨trueå’Œfalseçš„æ—¶å€™è¿”å›ä¸åŒçš„æ¨¡æ¿ã€‚åˆå®šä¹‰äº†Trueå’ŒFalseï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡True&lt;a, b&gt;::resæˆ–è€…False&lt;a, b&gt;::resæ¥è·å–ä¸åŒæ¨¡æ¿çš„è®¡ç®—ç»“æœã€‚ä½†æ˜¯å¦‚æœæˆ‘æƒ³ç”¨ç±»ä¼¼If&lt;condition&gt;&lt;a, b&gt;::resè¿™æ ·çš„è°ƒç”¨ï¼ˆä¸çŸ¥é“æˆ‘è¡¨è¾¾æ¸…æ¥šæ²¡æœ‰ï¼‰æ¥è·å–ä¸åŒçš„ç»“æœï¼ˆåœ¨ä¸æ”¹If_å®šä¹‰çš„æƒ…å†µä¸‹ï¼‰ï¼Œåº”è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿè°¢è°¢ï¼","like_count":1},{"had_liked":false,"id":166499,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1577459544,"is_pvip":false,"replies":[{"id":63478,"content":"1. å› ä¸ºæ¨¡æ¿çš„å®šä¹‰å°±æ˜¯è¿™ä¸ªæ ·å­ï¼Œè™½ç„¶æˆ‘ä»¬å¹³æ—¶ç¬¬äºŒä¸ªå‚æ•°ç”¨çš„éƒ½æ˜¯é»˜è®¤æ¨¡æ¿å‚æ•°ã€‚\n\n2. ä¸æ˜¯å³å€¼å¼•ç”¨ï¼Œæ˜¯è½¬å‘å¼•ç”¨ã€‚å¤ä¹ ä¸€ä¸‹ç¬¬ 3 è®²ç»“å°¾éƒ¨åˆ†å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577508280,"ip_address":"","comment_id":166499,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºæœ€åè¿™ä¸ªä¾‹å­ï¼Œæœ‰ä¸¤ä¸ªå°é—®é¢˜ï¼š\n1ï¼Œæˆ‘ä»¬å¹³æ—¶å®šä¹‰ä¸€ä¸ª vector çš„æ—¶å€™ï¼Œä¸€èˆ¬å¹¶ä¸ä¼šå†™æˆ vector&lt;int, allocator&lt;int&gt;&gt; vec è¿™ç§å½¢å¼ï¼Œä¸ºä»€ä¹ˆæ¨¡æ¿å‡½æ•°é‡Œé¢å®šä¹‰è¿”å›å€¼ result æ—¶ï¼Œéœ€è¦å¤šä¸€ä¸ª allocatorï¼Ÿ\n2ï¼Œfmapå‡½æ•°çš„å…¥å‚å’Œforå¾ªç¯ï¼Œå…¨éƒ½ç”¨çš„å³å€¼å¼•ç”¨ï¼Œæœ‰ä»€ä¹ˆç‰¹æ®Šè€ƒé‡ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479518,"discussion_content":"1. å› ä¸ºæ¨¡æ¿çš„å®šä¹‰å°±æ˜¯è¿™ä¸ªæ ·å­ï¼Œè™½ç„¶æˆ‘ä»¬å¹³æ—¶ç¬¬äºŒä¸ªå‚æ•°ç”¨çš„éƒ½æ˜¯é»˜è®¤æ¨¡æ¿å‚æ•°ã€‚\n\n2. ä¸æ˜¯å³å€¼å¼•ç”¨ï¼Œæ˜¯è½¬å‘å¼•ç”¨ã€‚å¤ä¹ ä¸€ä¸‹ç¬¬ 3 è®²ç»“å°¾éƒ¨åˆ†å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577508280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344032,"user_name":"é™ˆç‹„","can_delete":false,"product_type":"c1","uid":2011954,"ip_address":"","ucode":"456F00EB2EB43D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/b3/32/0ee78a1a.jpg","comment_is_top":false,"comment_ctime":1651202312,"is_pvip":false,"replies":[{"id":125681,"content":"æˆ‘è‡ªå·±å†™å®Œéƒ½ä¸æƒ³çœ‹è¿™ä»£ç äº†â€¦â€¦åªæ˜¯æƒ³ç»ƒä¹ ä¸€ä¸‹ç¡®å®å¯ä»¥å†™å‡ºå¾ªç¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1651411887,"ip_address":"","comment_id":344032,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"ç¼–è¯‘æœŸç¼–ç¨‹ç¡®å®6ï¼Œæ¨¡ç‰ˆå†™å¾ªç¯ç¡®å®ç»•ï¼Œå±•å¼€å¦‚ä¸‹ï¼š\nWhile&lt;Sum&lt;10&gt;::type&gt;::type::value\nWhile&lt;SumLoop&lt;0, 10&gt;&gt;::type::value\nWhileLoop&lt;SumLoop&lt;0, 10&gt;::cond_value, SumLoop&lt;0, 10&gt;&gt;::type::value\nWhileLoop&lt;true, SumLoop&lt;0, 10&gt;&gt;::type::value\nWhileLoop&lt;SumLoop&lt;0, 10&gt;::cond_value, SumLoop&lt;0, 10&gt;::next_type&gt;::type::value\nWhileLoop&lt;true, SumLoop&lt;10, 9&gt;&gt;::type::value\nWhileLoop&lt;SumLoop&lt;10, 9&gt;&gt;::cond_value,SumLoop&lt;10, 9&gt;&gt;::next_type&gt;::type::value\n...\nWhileLoop&lt;SumLoop&lt;55, 0&gt;&gt;::cond_value,SumLoop&lt;55, 0&gt;&gt;::next_type&gt;::type::value\nWhileLoop&lt;false,SumLoop&lt;55, -1&gt;&gt;::type::value\nSumLoop&lt;55, -1&gt;::res_type::value\nintegral_constant&lt;int, 55&gt;::value","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569348,"discussion_content":"æˆ‘è‡ªå·±å†™å®Œéƒ½ä¸æƒ³çœ‹è¿™ä»£ç äº†â€¦â€¦åªæ˜¯æƒ³ç»ƒä¹ ä¸€ä¸‹ç¡®å®å¯ä»¥å†™å‡ºå¾ªç¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651411887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278996,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1613531578,"is_pvip":false,"replies":[{"id":101425,"content":"æˆ‘ç»™å‡ºçš„å®šä¹‰åªæ˜¯ç»™å¤§å®¶ç›´è§‚åœ°çœ‹ä¸€ä¸‹ã€‚ç”Ÿäº§ä»£ç åº”è¯¥ä½¿ç”¨æ ‡å‡†åº“ã€‚\n\nä¸è¿‡ï¼Œç”Ÿäº§ä»£ç ä¸€èˆ¬ä¹Ÿä¸å»ºè®®ä½¿ç”¨ using namespace std; å“¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1613630265,"ip_address":"","comment_id":278996,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"While&lt;Sum&lt;10&gt;::type&gt;::type::valueçš„ä¾‹å­ä¸­ä¼šä½¿ç”¨åˆ°äº†è‡ªå·±integral_constantæ¨¡æ¿ï¼Œä½†æ˜¯stlä¸­ä¹Ÿæœ‰ä¸€ä»½integral_constantï¼Œæ‰€ä»¥è¿è¡Œæœ¬ç¤ºä¾‹ä»£ç æ—¶å¦‚æœä¸€å¼€å§‹ç›´æ¥ using namespace stdä¼šç¼–è¯‘æŠ¥é”™","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515590,"discussion_content":"æˆ‘ç»™å‡ºçš„å®šä¹‰åªæ˜¯ç»™å¤§å®¶ç›´è§‚åœ°çœ‹ä¸€ä¸‹ã€‚ç”Ÿäº§ä»£ç åº”è¯¥ä½¿ç”¨æ ‡å‡†åº“ã€‚\n\nä¸è¿‡ï¼Œç”Ÿäº§ä»£ç ä¸€èˆ¬ä¹Ÿä¸å»ºè®®ä½¿ç”¨ using namespace std; å“¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613630265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240122,"user_name":"talor","can_delete":false,"product_type":"c1","uid":1350638,"ip_address":"","ucode":"245EE908DA39EC","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/ee/211e86cd.jpg","comment_is_top":false,"comment_ctime":1596766711,"is_pvip":false,"replies":[{"id":88666,"content":"æ˜¯æœ‰ç‚¹çƒ§ã€‚ææ˜ç™½äº†å°±æ˜¯ä¸ªæ–°ä¸–ç•Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1596785135,"ip_address":"","comment_id":240122,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è„‘å­çƒ§åäº†","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503349,"discussion_content":"æ˜¯æœ‰ç‚¹çƒ§ã€‚ææ˜ç™½äº†å°±æ˜¯ä¸ªæ–°ä¸–ç•Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596785135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239390,"user_name":"Geek_68d3d2","can_delete":false,"product_type":"c1","uid":1674369,"ip_address":"","ucode":"EBD6D881AA7A74","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqf54z1ZmqQY1kmJ6t1HAnrqMM3j6WKf0oDeVLhtnA2ZUKY6AX9MK6RjvcO8SiczXy3uU0IzBQ3tpw/132","comment_is_top":false,"comment_ctime":1596521308,"is_pvip":false,"replies":[{"id":88457,"content":"è¿˜æ˜¯ç±»å‹ã€‚ä½†åœ¨æ¨¡æ¿å…ƒç¼–ç¨‹é‡Œï¼Œç©çš„å°±æ˜¯åˆ©ç”¨ç±»å‹æ¨å¯¼æ¥åšè®¡ç®—ã€‚æ‰€ä»¥ç±»å‹æ˜¯å½“æˆå˜é‡æ¥ç”¨çš„ã€‚\n\nå“ˆå“ˆï¼Œæœ‰ç‚¹ç»•ï¼Œæ…¢æ…¢çœ‹ã€‚ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1596540192,"ip_address":"","comment_id":239390,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"typedef SumLoop&lt;0, n&gt; type;è¿™ä¸ªè¯­æ³•ä¸æ˜¯ç»™ç±»å‹å®šä¹‰åˆ«åå— æ€ä¹ˆä»£ç é‡Œå˜æˆäº†å˜é‡å®šä¹‰???","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503091,"discussion_content":"è¿˜æ˜¯ç±»å‹ã€‚ä½†åœ¨æ¨¡æ¿å…ƒç¼–ç¨‹é‡Œï¼Œç©çš„å°±æ˜¯åˆ©ç”¨ç±»å‹æ¨å¯¼æ¥åšè®¡ç®—ã€‚æ‰€ä»¥ç±»å‹æ˜¯å½“æˆå˜é‡æ¥ç”¨çš„ã€‚\n\nå“ˆå“ˆï¼Œæœ‰ç‚¹ç»•ï¼Œæ…¢æ…¢çœ‹ã€‚ğŸ˜„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596540192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1441214,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fd/be/232ffedf.jpg","nickname":"å¤§æ","note":"","ucode":"45538A3E6DF9A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316635,"discussion_content":"â€œåˆ©ç”¨ç±»å‹æ¨å¯¼åšè®¡ç®—â€ï¼Œè€å¸ˆçš„è¿™å¥è¯å¾ˆå…³é”®ã€‚ç›®å‰çš„ç†è§£å°±é€šè¿‡ typedef å®šä¹‰äº†ä¸€å †ç±»å‹ï¼Œç„¶åæ¯ä¸ªç±»å‹éƒ½éœ€è¦æ¨å¯¼ï¼Œè€Œæ¨å¯¼çš„è¿‡ç¨‹å°±æ˜¯ä¼šå±•å¼€è®¡ç®—ï¼Œé€šè¿‡åç‰¹åŒ–å¸¦å…¥äº†å„ç§å˜é‡è¿›å»ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603433369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232795,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1594119228,"is_pvip":false,"replies":[{"id":85988,"content":"å¯¹æˆ‘æ¥è®²ï¼Œres_type å’Œ res_value æ˜¯åŒä¸€ä¸ªå€¼çš„ä¸¤ç§ä¸åŒè¡¨ç°æ–¹å¼ã€‚ç›®å‰è¿™ç§å†™æ³•ï¼Œäºæˆ‘æ›´ä¸ºè‡ªç„¶äº›ã€‚ä½ çš„å†™æ³•ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚\n\næµ®ç‚¹æ•°ç”±äºç²¾åº¦é—®é¢˜ï¼Œç›®å‰åœ¨ C++ é‡Œä¸å…è®¸ç”¨ä½œæ¨¡æ¿å‚æ•°ã€‚å¯ä»¥å‚è€ƒè¿™ä¸ªè®¨è®º https:&#47;&#47;stackoverflow.com&#47;questions&#47;2183087&#47;why-cant-i-use-float-value-as-a-template-parameter","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1594213838,"ip_address":"","comment_id":232795,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è¿™ä¸€è¯¾çœ‹çš„è„‘æµ†éƒ½æ²¸è…¾äº†â€¦â€¦\nå´è€å¸ˆï¼Œæ‚¨å¥½ã€‚æœ‰å¦‚ä¸‹å‡ ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼š\nåœ¨SumLoopä¸­å®šä¹‰çš„res_valueçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨\ntypedef integral_constant&lt;int, result&gt; res_type è€Œæ˜¯\ntypedef integral_constant&lt;int, res_value&gt; res_typeå‘¢ï¼Ÿå‰è€…ç¼–è¯‘æ‰§è¡Œéƒ½æ²¡æœ‰é—®é¢˜çš„ã€‚\nåœ¨integral_constantå®šä¹‰typedef integral_constant typeç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ\nå¦å¤–æˆ‘å°è¯•ç¨å¾®æ”¹åŠ¨äº†ä¸€ä¸‹æ–‡ä¸­ä¾‹å­å¦‚ä¸‹ï¼š\ntemplate &lt;class T, T v&gt;\nstruct type_constant {\n  static const T value = v;\n  typedef T value_type;\n  typedef type_constant type;\n};\n\ntemplate &lt;typename T, T result, T n&gt;\nstruct SumLoop {\n  static const bool cond_value = (n &gt; (T)0);\n  &#47;&#47; static const int res_value = result;\n  typedef type_constant&lt;T, result&gt; res_type;\n  typedef SumLoop&lt;T, result + n, n - (T)1&gt; next_type;\n};\n\ntemplate &lt;typename T, T n&gt;\nstruct Sum {\n  typedef SumLoop&lt;T, (T)0, n&gt; type;\n};\nç»“æœå‘ç°åªèƒ½å¤Ÿæ”¯æŒèŒƒæ•´å‹ç±»å‹å¦‚int,size_t,ulongç­‰ç­‰ï¼š\nWhile&lt;Sum&lt;size_t, 10&gt;::type&gt;::type::valueç¼–è¯‘æ‰§è¡Œå·¥ä½œæ­£å¸¸ï¼›ä½†å¯¹äºæµ®ç‚¹å‹å¦‚ï¼š\nWhile&lt;Sum&lt;float, 10.0)&gt;::type&gt;::type::valueç¼–è¯‘æŠ¥é”™ï¼š\nerror: â€˜floatâ€™ is not a valid type for a template non-type parameter\nè¯·é—®è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500769,"discussion_content":"å¯¹æˆ‘æ¥è®²ï¼Œres_type å’Œ res_value æ˜¯åŒä¸€ä¸ªå€¼çš„ä¸¤ç§ä¸åŒè¡¨ç°æ–¹å¼ã€‚ç›®å‰è¿™ç§å†™æ³•ï¼Œäºæˆ‘æ›´ä¸ºè‡ªç„¶äº›ã€‚ä½ çš„å†™æ³•ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚\n\næµ®ç‚¹æ•°ç”±äºç²¾åº¦é—®é¢˜ï¼Œç›®å‰åœ¨ C++ é‡Œä¸å…è®¸ç”¨ä½œæ¨¡æ¿å‚æ•°ã€‚å¯ä»¥å‚è€ƒè¿™ä¸ªè®¨è®º https://stackoverflow.com/questions/2183087/why-cant-i-use-float-value-as-a-template-parameter","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594213838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200665,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1585632499,"is_pvip":false,"replies":[{"id":75162,"content":"1. ç¡®å®æ˜¯ä¸ºäº†çµæ´»ï¼Œä½†è¿™ä¸ªè®¾è®¡ä¸èƒ½ç®—å¾ˆæˆåŠŸï¼Œå› ä¸ºçœŸçš„ç”¨çš„äººéå¸¸å°‘ã€‚ä½†ä»ç†è®ºä¸Šæ¥è®²ï¼Œä½ ç”¨ allocator å¯ä»¥å®ç°éå¸¸ç‰¹åˆ«çš„å†…å­˜ç®¡ç†ç­–ç•¥ï¼Œå¦‚é¢„åˆ†é…ä¹‹ç±»ã€‚\n\n2. è¿­ä»£å™¨å®é™…ä¸Šæ˜¯æ¯”å®¹å™¨æ›´æŠ½è±¡çš„æ¦‚å¿µï¼Œç¬¬ 7 è®²ä»‹ç»çš„ istream_line_reader å°±ä¸èƒ½è¯´æ˜¯ä¸ªå®¹å™¨ã€‚ç¬¬ 29 è®²æœ‰æ¯”å®¹å™¨æ›´æŠ½è±¡çš„â€œèŒƒå›´â€ã€‚type_traits ç¿»è¯‘æˆä¸­æ–‡æ˜¯â€œç±»å‹ç‰¹ç‚¹â€ï¼Œæ˜¯å„ç§å¯¹å…±æ€§çš„æè¿°ï¼Œæ˜¯ä¸€ç»„éå¸¸æ•£çš„æ¦‚å¿µï¼Œè·Ÿè¿­ä»£å™¨ã€å®¹å™¨ä¹‹ç±»ç›¸æå¹¶è®ºæˆ‘è§‰å¾—ä¸å¦¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1585663530,"ip_address":"","comment_id":200665,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æœ€è¿‘åœ¨çœ‹STlæºç åˆ†æã€‚\n1.ä¸€ç›´å†æƒ³allocatorç±»ä¸ºä»€ä¹ˆè¦å­˜åœ¨ï¼Ÿ\n   ä¸ºä¸åŒçš„å®¹å™¨ç±»å‹æä¾›äº†å†…å­˜èµ„æºç®¡ç†ç±»ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ï¼Œæ›´æ–¹ä¾¿å’Œçµæ´»ã€‚å®é™…ä¸Šå¯¹äºå®¹å™¨è€Œè¨€å†…éƒ¨çš„èµ„æºéƒ½æ˜¯åˆ†å¸ƒåœ¨å¯¹ä¸Šçš„ï¼Œæ ˆä¸Šçš„åªä¸è¿‡æ˜¯ä¸ªç¬¦å·ã€‚\n2.ä¸ºä»€ä¹ˆè¦æœ‰type_traitsï¼Ÿ\n   iteratoræ˜¯å¯¹å®¹å™¨ç±»çš„ä¸€ç§åº•å±‚æŠ½è±¡.type_traitså®é™…ä¸Šä¹Ÿæ˜¯è¿™æ ·çš„æŠ½è±¡ï¼Œåªä¸è¿‡æ›´æŠ½è±¡ã€‚\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490094,"discussion_content":"1. ç¡®å®æ˜¯ä¸ºäº†çµæ´»ï¼Œä½†è¿™ä¸ªè®¾è®¡ä¸èƒ½ç®—å¾ˆæˆåŠŸï¼Œå› ä¸ºçœŸçš„ç”¨çš„äººéå¸¸å°‘ã€‚ä½†ä»ç†è®ºä¸Šæ¥è®²ï¼Œä½ ç”¨ allocator å¯ä»¥å®ç°éå¸¸ç‰¹åˆ«çš„å†…å­˜ç®¡ç†ç­–ç•¥ï¼Œå¦‚é¢„åˆ†é…ä¹‹ç±»ã€‚\n\n2. è¿­ä»£å™¨å®é™…ä¸Šæ˜¯æ¯”å®¹å™¨æ›´æŠ½è±¡çš„æ¦‚å¿µï¼Œç¬¬ 7 è®²ä»‹ç»çš„ istream_line_reader å°±ä¸èƒ½è¯´æ˜¯ä¸ªå®¹å™¨ã€‚ç¬¬ 29 è®²æœ‰æ¯”å®¹å™¨æ›´æŠ½è±¡çš„â€œèŒƒå›´â€ã€‚type_traits ç¿»è¯‘æˆä¸­æ–‡æ˜¯â€œç±»å‹ç‰¹ç‚¹â€ï¼Œæ˜¯å„ç§å¯¹å…±æ€§çš„æè¿°ï¼Œæ˜¯ä¸€ç»„éå¸¸æ•£çš„æ¦‚å¿µï¼Œè·Ÿè¿­ä»£å™¨ã€å®¹å™¨ä¹‹ç±»ç›¸æå¹¶è®ºæˆ‘è§‰å¾—ä¸å¦¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585663530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175425,"user_name":"oozero","can_delete":false,"product_type":"c1","uid":1265651,"ip_address":"","ucode":"9D14BCB54E8529","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/f3/05f5c779.jpg","comment_is_top":false,"comment_ctime":1580716204,"is_pvip":false,"replies":[{"id":68183,"content":"é‚£è¦èŠ±æ—¶é—´æ•´ç†äº†â€¦â€¦ååŠéƒ¨åˆ†çš„ä»£ç æˆ‘æ¯”è¾ƒå…¨ç‚¹ï¼Œå‰åŠéƒ¨åˆ†ä¸€å¼€å§‹æ²¡æœ‰ä¿ç•™æ‰€æœ‰çš„æµ‹è¯•ä»£ç â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1580727955,"ip_address":"","comment_id":175425,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆå¯ä»¥å°†æ–‡ä¸­ç¤ºä¾‹ä»£ç ç‰‡æ®µæ•´ç†æˆæ–‡ä»¶ï¼Œåˆ†äº«åˆ°GitHubï¼Œè®©c++åŸºç¡€ä¸æ‰å®çš„åŒå­¦å¯ä»¥æ›´ç›´è§‚çš„å­¦ä¹ å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482727,"discussion_content":"é‚£è¦èŠ±æ—¶é—´æ•´ç†äº†â€¦â€¦ååŠéƒ¨åˆ†çš„ä»£ç æˆ‘æ¯”è¾ƒå…¨ç‚¹ï¼Œå‰åŠéƒ¨åˆ†ä¸€å¼€å§‹æ²¡æœ‰ä¿ç•™æ‰€æœ‰çš„æµ‹è¯•ä»£ç â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580727955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168968,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1578227965,"is_pvip":false,"replies":[{"id":65548,"content":"æ²¡åŒºåˆ«ã€‚\n\nè¦ç‚¹æ˜¯ä½ ä¸éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡æ¿ï¼Œä¹ŸåŒæ ·èƒ½è¾¾åˆ°ç¼–è¯‘æœŸç¼–ç¨‹çš„æ•ˆæœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578272578,"ip_address":"","comment_id":168968,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"åœ¨æ–‡ä¸­æåˆ°è¿™ä¹ˆä¸€å¥è¯ï¼šâ€œå®é™…ä¸Šï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®²çš„ä¸œè¥¿è¿˜æ²¡æœ‰ç¦»å¼€ C++98ã€‚è€Œæˆ‘ä»¬ä¸‹é¢å‡ è®²é‡Œå¾ˆå¿«å°±ä¼šè®²åˆ°ï¼Œå¦‚ä½•åœ¨ç°ä»£ C++ é‡Œä¸ä½¿ç”¨è¿™ç§éº»çƒ¦çš„æ–¹å¼ä¹Ÿèƒ½è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚â€\næƒ³é—®ä¸€ä¸‹å¦‚æœç”¨ç°ä»£C++å®ç°ä¸Šè¿°çš„IFæˆ–è€…WhileLoopï¼Œç©¶ç«Ÿè·Ÿä¸Šè¿°çš„æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480389,"discussion_content":"æ²¡åŒºåˆ«ã€‚\n\nè¦ç‚¹æ˜¯ä½ ä¸éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡æ¿ï¼Œä¹ŸåŒæ ·èƒ½è¾¾åˆ°ç¼–è¯‘æœŸç¼–ç¨‹çš„æ•ˆæœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578272578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167868,"user_name":"åƒä¸€ä¸ªèŠ’æœ","can_delete":false,"product_type":"c1","uid":1762540,"ip_address":"","ucode":"313816A05796BD","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e4/ec/88ccd50b.jpg","comment_is_top":false,"comment_ctime":1577954581,"is_pvip":false,"replies":[{"id":65234,"content":"ä½ å¸Œæœ›çš„å†™æ³•æˆ‘è§‰å¾—æ˜¯å†™ä¸å‡ºæ¥çš„ï¼Œè€Œä¸”æ„ä¹‰ä¼¼ä¹ä¹Ÿä¸å¤§ï¼Ÿä¸‹é¢è¿™æ ·å†™ä¼¼ä¹è¡¨è¾¾èƒ½åŠ›æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”å¯ä»¥è¿‡ï¼š\n\ntemplate &lt;bool Condition, int num1, int num2&gt;\nusing If = typename If_&lt;Condition&gt;::\n  template type&lt;num1, num2&gt;;\n\ntemplate &lt;int num1, int num2&gt;\nusing True = If&lt;true, num1, num2&gt;;\n\ntemplate &lt;int num1, int num2&gt;\nusing False = If&lt;false, num1, num2&gt;;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577975890,"ip_address":"","comment_id":167868,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"template &lt;int num1, int num2&gt;\nstruct Add_\n{\n    const static int res = num1 + num2;\n};\n\ntemplate &lt;int num1, int num2&gt;\nstruct Sub_\n{\n    const static int res = num1 - num2;\n};\n\ntemplate &lt;bool Condition&gt;\nstruct If_;\n\ntemplate &lt;&gt;\nstruct If_ &lt;true&gt;\n{\n    template&lt;int num1, int num2&gt;\n    using type = Add_&lt;num1, num2&gt;;\n};\n\ntemplate &lt;&gt;\nstruct If_ &lt;false&gt;\n{\n    template&lt;int num1, int num2&gt;\n    using type = Sub_&lt;num1, num2&gt;;\n};\n\ntemplate&lt;int num1, int num2&gt;\ntemplate&lt;bool Condition&gt;\nusing If = typename If_&lt;Condition&gt;::template type&lt;num1, num2&gt;;\n\ntemplate&lt;int num1, int num2&gt;\nusing True = If&lt;true&gt;;\n\ntemplate&lt;int num1, int num2&gt;\nusing False = If&lt;false&gt;;\n\nè€å¸ˆä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸ªè¯­æ³•æ–¹é¢å¯èƒ½æ¯”è¾ƒé’»ç‰›è§’å°–çš„é—®é¢˜\næˆ‘å®šä¹‰äº†If_,ç”¨æ¥åœ¨trueå’Œfalseçš„æ—¶å€™è¿”å›ä¸åŒçš„æ¨¡æ¿ã€‚åˆå®šä¹‰äº†Trueå’ŒFalseï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡True&lt;a, b&gt;::resæˆ–è€…False&lt;a, b&gt;::resæ¥è·å–ä¸åŒæ¨¡æ¿çš„è®¡ç®—ç»“æœã€‚ä½†æ˜¯å¦‚æœæˆ‘æƒ³ç”¨ç±»ä¼¼If&lt;condition&gt;&lt;a, b&gt;::resè¿™æ ·çš„è°ƒç”¨ï¼ˆä¸çŸ¥é“æˆ‘è¡¨è¾¾æ¸…æ¥šæ²¡æœ‰ï¼‰æ¥è·å–ä¸åŒçš„ç»“æœï¼ˆåœ¨ä¸æ”¹If_å®šä¹‰çš„æƒ…å†µä¸‹ï¼‰ï¼Œåº”è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿè°¢è°¢ï¼","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480032,"discussion_content":"ä½ å¸Œæœ›çš„å†™æ³•æˆ‘è§‰å¾—æ˜¯å†™ä¸å‡ºæ¥çš„ï¼Œè€Œä¸”æ„ä¹‰ä¼¼ä¹ä¹Ÿä¸å¤§ï¼Ÿä¸‹é¢è¿™æ ·å†™ä¼¼ä¹è¡¨è¾¾èƒ½åŠ›æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”å¯ä»¥è¿‡ï¼š\n\ntemplate &amp;lt;bool Condition, int num1, int num2&amp;gt;\nusing If = typename If_&amp;lt;Condition&amp;gt;::\n  template type&amp;lt;num1, num2&amp;gt;;\n\ntemplate &amp;lt;int num1, int num2&amp;gt;\nusing True = If&amp;lt;true, num1, num2&amp;gt;;\n\ntemplate &amp;lt;int num1, int num2&amp;gt;\nusing False = If&amp;lt;false, num1, num2&amp;gt;;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577975890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166499,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1577459544,"is_pvip":false,"replies":[{"id":63478,"content":"1. å› ä¸ºæ¨¡æ¿çš„å®šä¹‰å°±æ˜¯è¿™ä¸ªæ ·å­ï¼Œè™½ç„¶æˆ‘ä»¬å¹³æ—¶ç¬¬äºŒä¸ªå‚æ•°ç”¨çš„éƒ½æ˜¯é»˜è®¤æ¨¡æ¿å‚æ•°ã€‚\n\n2. ä¸æ˜¯å³å€¼å¼•ç”¨ï¼Œæ˜¯è½¬å‘å¼•ç”¨ã€‚å¤ä¹ ä¸€ä¸‹ç¬¬ 3 è®²ç»“å°¾éƒ¨åˆ†å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577508280,"ip_address":"","comment_id":166499,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºæœ€åè¿™ä¸ªä¾‹å­ï¼Œæœ‰ä¸¤ä¸ªå°é—®é¢˜ï¼š\n1ï¼Œæˆ‘ä»¬å¹³æ—¶å®šä¹‰ä¸€ä¸ª vector çš„æ—¶å€™ï¼Œä¸€èˆ¬å¹¶ä¸ä¼šå†™æˆ vector&lt;int, allocator&lt;int&gt;&gt; vec è¿™ç§å½¢å¼ï¼Œä¸ºä»€ä¹ˆæ¨¡æ¿å‡½æ•°é‡Œé¢å®šä¹‰è¿”å›å€¼ result æ—¶ï¼Œéœ€è¦å¤šä¸€ä¸ª allocatorï¼Ÿ\n2ï¼Œfmapå‡½æ•°çš„å…¥å‚å’Œforå¾ªç¯ï¼Œå…¨éƒ½ç”¨çš„å³å€¼å¼•ç”¨ï¼Œæœ‰ä»€ä¹ˆç‰¹æ®Šè€ƒé‡ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480032,"discussion_content":"ä½ å¸Œæœ›çš„å†™æ³•æˆ‘è§‰å¾—æ˜¯å†™ä¸å‡ºæ¥çš„ï¼Œè€Œä¸”æ„ä¹‰ä¼¼ä¹ä¹Ÿä¸å¤§ï¼Ÿä¸‹é¢è¿™æ ·å†™ä¼¼ä¹è¡¨è¾¾èƒ½åŠ›æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”å¯ä»¥è¿‡ï¼š\n\ntemplate &amp;lt;bool Condition, int num1, int num2&amp;gt;\nusing If = typename If_&amp;lt;Condition&amp;gt;::\n  template type&amp;lt;num1, num2&amp;gt;;\n\ntemplate &amp;lt;int num1, int num2&amp;gt;\nusing True = If&amp;lt;true, num1, num2&amp;gt;;\n\ntemplate &amp;lt;int num1, int num2&amp;gt;\nusing False = If&amp;lt;false, num1, num2&amp;gt;;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577975890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344032,"user_name":"é™ˆç‹„","can_delete":false,"product_type":"c1","uid":2011954,"ip_address":"","ucode":"456F00EB2EB43D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/b3/32/0ee78a1a.jpg","comment_is_top":false,"comment_ctime":1651202312,"is_pvip":false,"replies":[{"id":125681,"content":"æˆ‘è‡ªå·±å†™å®Œéƒ½ä¸æƒ³çœ‹è¿™ä»£ç äº†â€¦â€¦åªæ˜¯æƒ³ç»ƒä¹ ä¸€ä¸‹ç¡®å®å¯ä»¥å†™å‡ºå¾ªç¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1651411887,"ip_address":"","comment_id":344032,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"ç¼–è¯‘æœŸç¼–ç¨‹ç¡®å®6ï¼Œæ¨¡ç‰ˆå†™å¾ªç¯ç¡®å®ç»•ï¼Œå±•å¼€å¦‚ä¸‹ï¼š\nWhile&lt;Sum&lt;10&gt;::type&gt;::type::value\nWhile&lt;SumLoop&lt;0, 10&gt;&gt;::type::value\nWhileLoop&lt;SumLoop&lt;0, 10&gt;::cond_value, SumLoop&lt;0, 10&gt;&gt;::type::value\nWhileLoop&lt;true, SumLoop&lt;0, 10&gt;&gt;::type::value\nWhileLoop&lt;SumLoop&lt;0, 10&gt;::cond_value, SumLoop&lt;0, 10&gt;::next_type&gt;::type::value\nWhileLoop&lt;true, SumLoop&lt;10, 9&gt;&gt;::type::value\nWhileLoop&lt;SumLoop&lt;10, 9&gt;&gt;::cond_value,SumLoop&lt;10, 9&gt;&gt;::next_type&gt;::type::value\n...\nWhileLoop&lt;SumLoop&lt;55, 0&gt;&gt;::cond_value,SumLoop&lt;55, 0&gt;&gt;::next_type&gt;::type::value\nWhileLoop&lt;false,SumLoop&lt;55, -1&gt;&gt;::type::value\nSumLoop&lt;55, -1&gt;::res_type::value\nintegral_constant&lt;int, 55&gt;::value","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479518,"discussion_content":"1. å› ä¸ºæ¨¡æ¿çš„å®šä¹‰å°±æ˜¯è¿™ä¸ªæ ·å­ï¼Œè™½ç„¶æˆ‘ä»¬å¹³æ—¶ç¬¬äºŒä¸ªå‚æ•°ç”¨çš„éƒ½æ˜¯é»˜è®¤æ¨¡æ¿å‚æ•°ã€‚\n\n2. ä¸æ˜¯å³å€¼å¼•ç”¨ï¼Œæ˜¯è½¬å‘å¼•ç”¨ã€‚å¤ä¹ ä¸€ä¸‹ç¬¬ 3 è®²ç»“å°¾éƒ¨åˆ†å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577508280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278996,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1613531578,"is_pvip":false,"replies":[{"id":101425,"content":"æˆ‘ç»™å‡ºçš„å®šä¹‰åªæ˜¯ç»™å¤§å®¶ç›´è§‚åœ°çœ‹ä¸€ä¸‹ã€‚ç”Ÿäº§ä»£ç åº”è¯¥ä½¿ç”¨æ ‡å‡†åº“ã€‚\n\nä¸è¿‡ï¼Œç”Ÿäº§ä»£ç ä¸€èˆ¬ä¹Ÿä¸å»ºè®®ä½¿ç”¨ using namespace std; å“¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1613630265,"ip_address":"","comment_id":278996,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"While&lt;Sum&lt;10&gt;::type&gt;::type::valueçš„ä¾‹å­ä¸­ä¼šä½¿ç”¨åˆ°äº†è‡ªå·±integral_constantæ¨¡æ¿ï¼Œä½†æ˜¯stlä¸­ä¹Ÿæœ‰ä¸€ä»½integral_constantï¼Œæ‰€ä»¥è¿è¡Œæœ¬ç¤ºä¾‹ä»£ç æ—¶å¦‚æœä¸€å¼€å§‹ç›´æ¥ using namespace stdä¼šç¼–è¯‘æŠ¥é”™","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569348,"discussion_content":"æˆ‘è‡ªå·±å†™å®Œéƒ½ä¸æƒ³çœ‹è¿™ä»£ç äº†â€¦â€¦åªæ˜¯æƒ³ç»ƒä¹ ä¸€ä¸‹ç¡®å®å¯ä»¥å†™å‡ºå¾ªç¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651411887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240122,"user_name":"talor","can_delete":false,"product_type":"c1","uid":1350638,"ip_address":"","ucode":"245EE908DA39EC","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/ee/211e86cd.jpg","comment_is_top":false,"comment_ctime":1596766711,"is_pvip":false,"replies":[{"id":88666,"content":"æ˜¯æœ‰ç‚¹çƒ§ã€‚ææ˜ç™½äº†å°±æ˜¯ä¸ªæ–°ä¸–ç•Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1596785135,"ip_address":"","comment_id":240122,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è„‘å­çƒ§åäº†","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515590,"discussion_content":"æˆ‘ç»™å‡ºçš„å®šä¹‰åªæ˜¯ç»™å¤§å®¶ç›´è§‚åœ°çœ‹ä¸€ä¸‹ã€‚ç”Ÿäº§ä»£ç åº”è¯¥ä½¿ç”¨æ ‡å‡†åº“ã€‚\n\nä¸è¿‡ï¼Œç”Ÿäº§ä»£ç ä¸€èˆ¬ä¹Ÿä¸å»ºè®®ä½¿ç”¨ using namespace std; å“¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613630265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239390,"user_name":"Geek_68d3d2","can_delete":false,"product_type":"c1","uid":1674369,"ip_address":"","ucode":"EBD6D881AA7A74","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqf54z1ZmqQY1kmJ6t1HAnrqMM3j6WKf0oDeVLhtnA2ZUKY6AX9MK6RjvcO8SiczXy3uU0IzBQ3tpw/132","comment_is_top":false,"comment_ctime":1596521308,"is_pvip":false,"replies":[{"id":88457,"content":"è¿˜æ˜¯ç±»å‹ã€‚ä½†åœ¨æ¨¡æ¿å…ƒç¼–ç¨‹é‡Œï¼Œç©çš„å°±æ˜¯åˆ©ç”¨ç±»å‹æ¨å¯¼æ¥åšè®¡ç®—ã€‚æ‰€ä»¥ç±»å‹æ˜¯å½“æˆå˜é‡æ¥ç”¨çš„ã€‚\n\nå“ˆå“ˆï¼Œæœ‰ç‚¹ç»•ï¼Œæ…¢æ…¢çœ‹ã€‚ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1596540192,"ip_address":"","comment_id":239390,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"typedef SumLoop&lt;0, n&gt; type;è¿™ä¸ªè¯­æ³•ä¸æ˜¯ç»™ç±»å‹å®šä¹‰åˆ«åå— æ€ä¹ˆä»£ç é‡Œå˜æˆäº†å˜é‡å®šä¹‰???","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503349,"discussion_content":"æ˜¯æœ‰ç‚¹çƒ§ã€‚ææ˜ç™½äº†å°±æ˜¯ä¸ªæ–°ä¸–ç•Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596785135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232795,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1594119228,"is_pvip":false,"replies":[{"id":85988,"content":"å¯¹æˆ‘æ¥è®²ï¼Œres_type å’Œ res_value æ˜¯åŒä¸€ä¸ªå€¼çš„ä¸¤ç§ä¸åŒè¡¨ç°æ–¹å¼ã€‚ç›®å‰è¿™ç§å†™æ³•ï¼Œäºæˆ‘æ›´ä¸ºè‡ªç„¶äº›ã€‚ä½ çš„å†™æ³•ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚\n\næµ®ç‚¹æ•°ç”±äºç²¾åº¦é—®é¢˜ï¼Œç›®å‰åœ¨ C++ é‡Œä¸å…è®¸ç”¨ä½œæ¨¡æ¿å‚æ•°ã€‚å¯ä»¥å‚è€ƒè¿™ä¸ªè®¨è®º https:&#47;&#47;stackoverflow.com&#47;questions&#47;2183087&#47;why-cant-i-use-float-value-as-a-template-parameter","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1594213838,"ip_address":"","comment_id":232795,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è¿™ä¸€è¯¾çœ‹çš„è„‘æµ†éƒ½æ²¸è…¾äº†â€¦â€¦\nå´è€å¸ˆï¼Œæ‚¨å¥½ã€‚æœ‰å¦‚ä¸‹å‡ ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼š\nåœ¨SumLoopä¸­å®šä¹‰çš„res_valueçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨\ntypedef integral_constant&lt;int, result&gt; res_type è€Œæ˜¯\ntypedef integral_constant&lt;int, res_value&gt; res_typeå‘¢ï¼Ÿå‰è€…ç¼–è¯‘æ‰§è¡Œéƒ½æ²¡æœ‰é—®é¢˜çš„ã€‚\nåœ¨integral_constantå®šä¹‰typedef integral_constant typeç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ\nå¦å¤–æˆ‘å°è¯•ç¨å¾®æ”¹åŠ¨äº†ä¸€ä¸‹æ–‡ä¸­ä¾‹å­å¦‚ä¸‹ï¼š\ntemplate &lt;class T, T v&gt;\nstruct type_constant {\n  static const T value = v;\n  typedef T value_type;\n  typedef type_constant type;\n};\n\ntemplate &lt;typename T, T result, T n&gt;\nstruct SumLoop {\n  static const bool cond_value = (n &gt; (T)0);\n  &#47;&#47; static const int res_value = result;\n  typedef type_constant&lt;T, result&gt; res_type;\n  typedef SumLoop&lt;T, result + n, n - (T)1&gt; next_type;\n};\n\ntemplate &lt;typename T, T n&gt;\nstruct Sum {\n  typedef SumLoop&lt;T, (T)0, n&gt; type;\n};\nç»“æœå‘ç°åªèƒ½å¤Ÿæ”¯æŒèŒƒæ•´å‹ç±»å‹å¦‚int,size_t,ulongç­‰ç­‰ï¼š\nWhile&lt;Sum&lt;size_t, 10&gt;::type&gt;::type::valueç¼–è¯‘æ‰§è¡Œå·¥ä½œæ­£å¸¸ï¼›ä½†å¯¹äºæµ®ç‚¹å‹å¦‚ï¼š\nWhile&lt;Sum&lt;float, 10.0)&gt;::type&gt;::type::valueç¼–è¯‘æŠ¥é”™ï¼š\nerror: â€˜floatâ€™ is not a valid type for a template non-type parameter\nè¯·é—®è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503091,"discussion_content":"è¿˜æ˜¯ç±»å‹ã€‚ä½†åœ¨æ¨¡æ¿å…ƒç¼–ç¨‹é‡Œï¼Œç©çš„å°±æ˜¯åˆ©ç”¨ç±»å‹æ¨å¯¼æ¥åšè®¡ç®—ã€‚æ‰€ä»¥ç±»å‹æ˜¯å½“æˆå˜é‡æ¥ç”¨çš„ã€‚\n\nå“ˆå“ˆï¼Œæœ‰ç‚¹ç»•ï¼Œæ…¢æ…¢çœ‹ã€‚ğŸ˜„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596540192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1441214,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fd/be/232ffedf.jpg","nickname":"å¤§æ","note":"","ucode":"45538A3E6DF9A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316635,"discussion_content":"â€œåˆ©ç”¨ç±»å‹æ¨å¯¼åšè®¡ç®—â€ï¼Œè€å¸ˆçš„è¿™å¥è¯å¾ˆå…³é”®ã€‚ç›®å‰çš„ç†è§£å°±é€šè¿‡ typedef å®šä¹‰äº†ä¸€å †ç±»å‹ï¼Œç„¶åæ¯ä¸ªç±»å‹éƒ½éœ€è¦æ¨å¯¼ï¼Œè€Œæ¨å¯¼çš„è¿‡ç¨‹å°±æ˜¯ä¼šå±•å¼€è®¡ç®—ï¼Œé€šè¿‡åç‰¹åŒ–å¸¦å…¥äº†å„ç§å˜é‡è¿›å»ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603433369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200665,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1585632499,"is_pvip":false,"replies":[{"id":75162,"content":"1. ç¡®å®æ˜¯ä¸ºäº†çµæ´»ï¼Œä½†è¿™ä¸ªè®¾è®¡ä¸èƒ½ç®—å¾ˆæˆåŠŸï¼Œå› ä¸ºçœŸçš„ç”¨çš„äººéå¸¸å°‘ã€‚ä½†ä»ç†è®ºä¸Šæ¥è®²ï¼Œä½ ç”¨ allocator å¯ä»¥å®ç°éå¸¸ç‰¹åˆ«çš„å†…å­˜ç®¡ç†ç­–ç•¥ï¼Œå¦‚é¢„åˆ†é…ä¹‹ç±»ã€‚\n\n2. è¿­ä»£å™¨å®é™…ä¸Šæ˜¯æ¯”å®¹å™¨æ›´æŠ½è±¡çš„æ¦‚å¿µï¼Œç¬¬ 7 è®²ä»‹ç»çš„ istream_line_reader å°±ä¸èƒ½è¯´æ˜¯ä¸ªå®¹å™¨ã€‚ç¬¬ 29 è®²æœ‰æ¯”å®¹å™¨æ›´æŠ½è±¡çš„â€œèŒƒå›´â€ã€‚type_traits ç¿»è¯‘æˆä¸­æ–‡æ˜¯â€œç±»å‹ç‰¹ç‚¹â€ï¼Œæ˜¯å„ç§å¯¹å…±æ€§çš„æè¿°ï¼Œæ˜¯ä¸€ç»„éå¸¸æ•£çš„æ¦‚å¿µï¼Œè·Ÿè¿­ä»£å™¨ã€å®¹å™¨ä¹‹ç±»ç›¸æå¹¶è®ºæˆ‘è§‰å¾—ä¸å¦¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1585663530,"ip_address":"","comment_id":200665,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æœ€è¿‘åœ¨çœ‹STlæºç åˆ†æã€‚\n1.ä¸€ç›´å†æƒ³allocatorç±»ä¸ºä»€ä¹ˆè¦å­˜åœ¨ï¼Ÿ\n   ä¸ºä¸åŒçš„å®¹å™¨ç±»å‹æä¾›äº†å†…å­˜èµ„æºç®¡ç†ç±»ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ï¼Œæ›´æ–¹ä¾¿å’Œçµæ´»ã€‚å®é™…ä¸Šå¯¹äºå®¹å™¨è€Œè¨€å†…éƒ¨çš„èµ„æºéƒ½æ˜¯åˆ†å¸ƒåœ¨å¯¹ä¸Šçš„ï¼Œæ ˆä¸Šçš„åªä¸è¿‡æ˜¯ä¸ªç¬¦å·ã€‚\n2.ä¸ºä»€ä¹ˆè¦æœ‰type_traitsï¼Ÿ\n   iteratoræ˜¯å¯¹å®¹å™¨ç±»çš„ä¸€ç§åº•å±‚æŠ½è±¡.type_traitså®é™…ä¸Šä¹Ÿæ˜¯è¿™æ ·çš„æŠ½è±¡ï¼Œåªä¸è¿‡æ›´æŠ½è±¡ã€‚\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500769,"discussion_content":"å¯¹æˆ‘æ¥è®²ï¼Œres_type å’Œ res_value æ˜¯åŒä¸€ä¸ªå€¼çš„ä¸¤ç§ä¸åŒè¡¨ç°æ–¹å¼ã€‚ç›®å‰è¿™ç§å†™æ³•ï¼Œäºæˆ‘æ›´ä¸ºè‡ªç„¶äº›ã€‚ä½ çš„å†™æ³•ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚\n\næµ®ç‚¹æ•°ç”±äºç²¾åº¦é—®é¢˜ï¼Œç›®å‰åœ¨ C++ é‡Œä¸å…è®¸ç”¨ä½œæ¨¡æ¿å‚æ•°ã€‚å¯ä»¥å‚è€ƒè¿™ä¸ªè®¨è®º https://stackoverflow.com/questions/2183087/why-cant-i-use-float-value-as-a-template-parameter","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594213838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175425,"user_name":"oozero","can_delete":false,"product_type":"c1","uid":1265651,"ip_address":"","ucode":"9D14BCB54E8529","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/f3/05f5c779.jpg","comment_is_top":false,"comment_ctime":1580716204,"is_pvip":false,"replies":[{"id":68183,"content":"é‚£è¦èŠ±æ—¶é—´æ•´ç†äº†â€¦â€¦ååŠéƒ¨åˆ†çš„ä»£ç æˆ‘æ¯”è¾ƒå…¨ç‚¹ï¼Œå‰åŠéƒ¨åˆ†ä¸€å¼€å§‹æ²¡æœ‰ä¿ç•™æ‰€æœ‰çš„æµ‹è¯•ä»£ç â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1580727955,"ip_address":"","comment_id":175425,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆå¯ä»¥å°†æ–‡ä¸­ç¤ºä¾‹ä»£ç ç‰‡æ®µæ•´ç†æˆæ–‡ä»¶ï¼Œåˆ†äº«åˆ°GitHubï¼Œè®©c++åŸºç¡€ä¸æ‰å®çš„åŒå­¦å¯ä»¥æ›´ç›´è§‚çš„å­¦ä¹ å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490094,"discussion_content":"1. ç¡®å®æ˜¯ä¸ºäº†çµæ´»ï¼Œä½†è¿™ä¸ªè®¾è®¡ä¸èƒ½ç®—å¾ˆæˆåŠŸï¼Œå› ä¸ºçœŸçš„ç”¨çš„äººéå¸¸å°‘ã€‚ä½†ä»ç†è®ºä¸Šæ¥è®²ï¼Œä½ ç”¨ allocator å¯ä»¥å®ç°éå¸¸ç‰¹åˆ«çš„å†…å­˜ç®¡ç†ç­–ç•¥ï¼Œå¦‚é¢„åˆ†é…ä¹‹ç±»ã€‚\n\n2. è¿­ä»£å™¨å®é™…ä¸Šæ˜¯æ¯”å®¹å™¨æ›´æŠ½è±¡çš„æ¦‚å¿µï¼Œç¬¬ 7 è®²ä»‹ç»çš„ istream_line_reader å°±ä¸èƒ½è¯´æ˜¯ä¸ªå®¹å™¨ã€‚ç¬¬ 29 è®²æœ‰æ¯”å®¹å™¨æ›´æŠ½è±¡çš„â€œèŒƒå›´â€ã€‚type_traits ç¿»è¯‘æˆä¸­æ–‡æ˜¯â€œç±»å‹ç‰¹ç‚¹â€ï¼Œæ˜¯å„ç§å¯¹å…±æ€§çš„æè¿°ï¼Œæ˜¯ä¸€ç»„éå¸¸æ•£çš„æ¦‚å¿µï¼Œè·Ÿè¿­ä»£å™¨ã€å®¹å™¨ä¹‹ç±»ç›¸æå¹¶è®ºæˆ‘è§‰å¾—ä¸å¦¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585663530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168968,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1578227965,"is_pvip":false,"replies":[{"id":65548,"content":"æ²¡åŒºåˆ«ã€‚\n\nè¦ç‚¹æ˜¯ä½ ä¸éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡æ¿ï¼Œä¹ŸåŒæ ·èƒ½è¾¾åˆ°ç¼–è¯‘æœŸç¼–ç¨‹çš„æ•ˆæœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578272578,"ip_address":"","comment_id":168968,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"åœ¨æ–‡ä¸­æåˆ°è¿™ä¹ˆä¸€å¥è¯ï¼šâ€œå®é™…ä¸Šï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®²çš„ä¸œè¥¿è¿˜æ²¡æœ‰ç¦»å¼€ C++98ã€‚è€Œæˆ‘ä»¬ä¸‹é¢å‡ è®²é‡Œå¾ˆå¿«å°±ä¼šè®²åˆ°ï¼Œå¦‚ä½•åœ¨ç°ä»£ C++ é‡Œä¸ä½¿ç”¨è¿™ç§éº»çƒ¦çš„æ–¹å¼ä¹Ÿèƒ½è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚â€\næƒ³é—®ä¸€ä¸‹å¦‚æœç”¨ç°ä»£C++å®ç°ä¸Šè¿°çš„IFæˆ–è€…WhileLoopï¼Œç©¶ç«Ÿè·Ÿä¸Šè¿°çš„æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482727,"discussion_content":"é‚£è¦èŠ±æ—¶é—´æ•´ç†äº†â€¦â€¦ååŠéƒ¨åˆ†çš„ä»£ç æˆ‘æ¯”è¾ƒå…¨ç‚¹ï¼Œå‰åŠéƒ¨åˆ†ä¸€å¼€å§‹æ²¡æœ‰ä¿ç•™æ‰€æœ‰çš„æµ‹è¯•ä»£ç â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580727955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167092,"user_name":"ä¸‰å‘³","can_delete":false,"product_type":"c1","uid":1362403,"ip_address":"","ucode":"A580F715D1CC96","user_header":"https://static001.geekbang.org/account/avatar/00/14/c9/e3/28c16afa.jpg","comment_is_top":false,"comment_ctime":1577690056,"is_pvip":false,"replies":[{"id":64982,"content":"å¾ˆå¥½ï¼ç¬¬ 18 è®²ä½ ä¼šå­¦å¾—å¾ˆè½»æ¾ã€‚ğŸ˜‰","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577791705,"ip_address":"","comment_id":167092,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è¿™ä¸ªè¯¾åæ€è€ƒé¢˜çœŸä¸æ˜¯ç›–å¾—ã€‚ã€‚ã€‚è¿˜çœ‹åˆ°äº†5åˆ†é’Ÿç¼–è¯‘æœŸå †æ’åºçš„æ®µå­ã€‚ã€‚ã€‚çœ‹å¾—æˆ‘å¿ƒæƒŠèƒ†æˆ˜ã€‚ã€‚ã€‚\nä¸è¿‡è¿˜æ˜¯ä¸€å †ç™¾åº¦å†™å‡ºäº†ä¸€ä¸ªï¼Œé’ˆå¯¹intå‹ï¼Œå†™å‡ºä»[0, N)çš„ç¼–è¯‘æœŸç”Ÿæˆæ•°ç»„çš„ä¾‹å­ã€‚ã€‚ã€‚å…¼å®¹å…¶ä»–ç±»å‹è¿˜è¦å†é¢å¤–å†™å¥½å¤šä»£ç ã€‚ã€‚å·æ‡’ç›´æ¥å†™äº†intå‹ã€‚ã€‚ã€‚\næˆ‘åœ¨msvcä¸‹æµ‹è¯•äº†ï¼Œåº”è¯¥æ²¡é—®é¢˜ã€‚ã€‚ã€‚ç”¨åˆ°äº†æ¨¡æ¿ä¸å®šå‚æ•°ï¼Œå…¶ä»–ä¸çŸ¥é“ä»€ä¹ˆæŠ€å·§çš„æ–¹æ³•ã€‚ã€‚ã€‚\næƒ³è¦è®©int Nè½¬æ¢æˆä»0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5 ã€‚ã€‚ã€‚å¡åœ¨äº†å¦‚ä½•æŠŠè¿™å †å‚æ•°å±•å¼€ã€‚ã€‚å†™å¾—å¯èƒ½å¤æ‚ä¸€äº›ã€‚ã€‚ä¸çŸ¥é“æ€ä¹ˆæ›´ç®€å•ã€‚ã€‚ ä¸‹é¢ä»£ç å§ï¼š\n\ntemplate&lt;int... values&gt;\nstruct IntegerSequence {};\n\ntemplate&lt;typename T, T v, typename INTEGER_SEQUENCE&gt;\nstruct PushBack;\n\ntemplate&lt;int v, int... values&gt;\nstruct PushBack&lt;int, v, IntegerSequence&lt;values...&gt;&gt; {\n\tusing type = IntegerSequence&lt;values..., v&gt;;\n};\n\ntemplate&lt;int N&gt;\nstruct IntegerRange {\n\tusing type = typename PushBack&lt;int, N-1, typename IntegerRange&lt;N-1&gt;::type&gt;::type;\n};\n\ntemplate&lt;&gt;\nstruct IntegerRange&lt;1&gt; {\n\tusing type = IntegerSequence&lt;0&gt;;\n};\n\ntemplate&lt;int N, typename INTEGER_SEQUENCE&gt;\nstruct RangeArray;\n\ntemplate&lt;int N, int... values&gt;\nstruct RangeArray&lt;N, IntegerSequence&lt;values...&gt;&gt; {\n\tstatic constexpr std::array&lt;int, N&gt; value = {values...};\n};\n\ntemplate&lt;int N&gt; using Range = RangeArray&lt;N, typename IntegerRange&lt;N&gt;::type&gt;;\n\næµ‹è¯•ï¼š\nauto A = Range&lt;5&gt;::value; \nä¸å‡ºæ„å¤–ï¼Œä¼šç”Ÿæˆstd::array&lt;int, 5&gt;{0,1,2,3,4};","like_count":0},{"had_liked":false,"id":166234,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1577420565,"is_pvip":false,"replies":[{"id":63346,"content":"æˆ‘çœŸæ˜¯è‡ªä½œè‡ªå—ï¼Œå¾—çœ‹è¿™æ ·çš„ä»£ç ã€‚ğŸ˜œ\n\n1. æˆ‘ç»™çš„è¿™äº›æ¨¡æ¿åªæ˜¯è¯´æ˜èƒ½åŠ›çš„ï¼Œè‚¯å®šä¸æ˜¯è®©ä½ çœŸçš„è¿™ä¹ˆå†™ä»£ç çš„ã€‚æ¯”å¦‚ä½ è¿™ç§ç´¯åŠ ï¼Œå¯ä»¥è€ƒè™‘è¿™æ ·å†™ï¼ˆåªè€ƒè™‘äº†æ­£å‘ï¼‰ï¼š\n\ntemplate &lt;int from, int to, int sum, bool ending&gt;\nstruct sum_two_op;\n\ntemplate &lt;int from, int to, int sum&gt;\nstruct sum_two_op&lt;from, to, sum, false&gt; {\n    static const int value = sum;\n};\n\ntemplate &lt;int from, int to, int sum&gt;\nstruct sum_two_op&lt;from, to, sum, true&gt; {\n    static const int value =\n        sum_two_op&lt;from + 1, to, sum + from, (from &lt; to)&gt;::value;\n};\n\ntemplate &lt;int from, int to&gt;\nstruct sum_two {\n    static const int value = sum_two_op&lt;from, to, 0, (from &lt;= to)&gt;::value;\n};\n\n2. ä½ å·²ç»å¾ˆé è¿‘äº†ï¼ŒåªçŠ¯äº†ä¸€ä¸ªå°é”™è¯¯ï¼ŒSumTwo é‡Œçš„æ–¹å‘ã€‚åº”è¯¥æ˜¯ï¼š\n\ntemplate &lt;int from, int to&gt;\nstruct SumTwo {\n    typedef SumAnyTwo&lt;(from &lt; to), from, to&gt; type;\n};\n\nå¦å¤–ï¼Œä½ ç›®å‰çš„å¤„ç†å¯¹äº from==to çš„æƒ…å†µæœ‰ç‚¹é—®é¢˜ã€‚å¯å‚è€ƒæˆ‘ä¸Šé¢çš„å†™æ³•ï¼Œé‚£æ˜¯å¯ä»¥æ­£ç¡®å¤„ç†çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577424052,"ip_address":"","comment_id":166234,"utype":1}],"discussion_count":5,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œçœ‹äº†ä½ çš„Whileæ¨¡æ¿ï¼Œè¯•ç€æƒ³æŠŠè¿™ä¸ªè®¡ç®—ç´¯åŠ çš„åŠŸèƒ½æ‰©å±•ä¸€ä¸‹ï¼Œè¾“å…¥ä»»æ„ä¸¤ä¸ªæ•°ï¼Œå¯ä»¥æ±‚ä»–ä»¬ä¹‹é—´çš„æ•°çš„ç´¯åŠ å’Œï¼Œä»£ç å¦‚ä¸‹ï¼š\ntemplate &lt;int from, int to, int sum&gt;\nstruct SumAnyTwo_A\n{\n    static const bool cond_value = from != to;\n    static const int res_value = sum;\n    typedef integral_constant&lt;int, res_value&gt; res_type;\n    typedef SumAnyTwo_A&lt;from + 1, to, sum + from&gt; next_type;\n};\n\ntemplate &lt;int from, int to, int sum&gt;\nstruct SumAnyTwo_B\n{\n    static const bool cond_value = from != to;\n    static const int res_value = sum;\n    typedef integral_constant&lt;int, res_value&gt; res_type;\n    typedef SumAnyTwo_B&lt;from - 1, to, sum + from&gt; next_type;\n};\n\ntemplate &lt;bool valueCompare, int from, int to&gt;\nstruct SumAnyTwo;\n\ntemplate &lt;int from, int to&gt;\nstruct SumAnyTwo&lt;true, from, to&gt;\n{\n    typedef SumAnyTwo_A&lt;from, to, 0&gt; addType;\n};\n\ntemplate &lt;int from, int to&gt;\nstruct SumAnyTwo&lt;false, from, to&gt;\n{\n    typedef SumAnyTwo_B&lt;from, to, 0&gt; addType;\n};\n\ntemplate &lt;int from, int to&gt;\nstruct SumTwo\n{\n    typedef SumAnyTwo&lt;(from &gt; to), from, to&gt; type;\n};\n\né‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜ï¼š\n1ï¼Œè¿™æ®µä»£ç çœ‹èµ·æ¥ä¸å¤Ÿä¼˜é›…ï¼Œåœ¨C++ 98 çš„èŒƒç•´å†…ï¼Œæœ‰æ›´å¥½çš„æ¨¡æ¿å…ƒç¼–ç¨‹å®ç°æ–¹å¼ä¹ˆï¼Ÿ\n2ï¼Œå½“æˆ‘è¯•å›¾è°ƒç”¨è¿™ä¸ªWhileæ¨¡æ¿æ—¶ï¼Œå‡ºç°å¦‚ä¸‹çŠ¶å†µï¼Œä¸æ˜ç™½ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªä¼šæŠ¥é”™\n        While&lt;SumTwo&lt;8, 3&gt;::type::addType&gt;::type::value &#47;&#47; æŠ¥é”™ï¼Œtemplate  instantiation depth exceeds maximum of 900\n        While&lt;SumAnyTwo_B&lt;8, 3, 0&gt;&gt;::type::value &#47;&#47; OK\n       While&lt;SumAnyTwo&lt;(8 - 3 &lt; 0), 8, 3&gt;::addType&gt;::type::value &#47;&#47;OK\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479741,"discussion_content":"å¾ˆå¥½ï¼ç¬¬ 18 è®²ä½ ä¼šå­¦å¾—å¾ˆè½»æ¾ã€‚ğŸ˜‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577791705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166015,"user_name":"zhang","can_delete":false,"product_type":"c1","uid":1256330,"ip_address":"","ucode":"BFA19BED5A5322","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIRm3kWsgiaEXjO0rr0Aiav7o89StFTFSXbLTkEmiaibmnw8EQTejibrtzKla0emibePT0R0KXjFRIpfXrQ/132","comment_is_top":false,"comment_ctime":1577362337,"is_pvip":false,"replies":[{"id":63327,"content":"å¯¹ä½ çš„ä¸šåŠ¡åœºæ™¯ä¸ç†Ÿæ‚‰ï¼Œéšä¾¿è¯„è®ºå‡ å¥ã€‚\n\nãƒ»C++11 é‡Œæœ‰ç°æˆçš„ mutexã€condition_variable å’Œ unique_lockã€‚\nãƒ»Client::Lock å’Œ Client::Unlock ä¼¼ä¹æ²¡æœ‰ç”¨å¤„ã€‚\nãƒ»å˜é‡ pending çš„å‘½åè®©äººå›°æƒ‘ï¼šæ”¶åˆ°æ•°æ®äº†ï¼Œâ€œæŒ‚èµ·â€æ ‡å¿—è¢«è®¾ä¸ºçœŸï¼Œç„¶åå‘é€æ•°æ®å°±èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œäº†ï¼Ÿè¿ç»­ä¸¤æ¬¡ sendData ä¸­é—´å¿…é¡»æœ‰ä¸€æ¬¡ recvData æ‰è¡Œï¼Œè€Œä¸” sendData é‡Œçš„ç­‰å¾…æ˜¯åœ¨å‘é€ä¹‹åï¼Ÿè¿™å—æ„Ÿè§‰æœ‰é—®é¢˜ã€‚\nãƒ»inter_mutex å’Œ inter_protect æœ¬èº«ç›®å‰æ²¡æœ‰çœ‹å‡ºé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577411094,"ip_address":"","comment_id":166015,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸ªmutexç›¸å…³çš„é—®é¢˜ï¼Œè™½ç„¶è¿™éƒ¨åˆ†å†…å®¹ä»¥åä¼šè®²ï¼Œä½†æˆ‘ç°åœ¨å·¥ä½œä¸­æœ‰ä¸€ä¸ªç–‘é—®ï¼Œéº»çƒ¦æ‚¨çœ‹ä¸€ä¸‹ï¼Œè°¢è°¢ã€‚\nä»£ç ç®€å†™å¦‚ä¸‹ï¼š\nclass Mutex {\npublic:\n    pthread_mutex_t mutex;\n    Mutex():mutex(PTHREAD_MUTEX_INITIALIZER) {}\n    void lock() {\n        pthread_mutex_lock(&amp;mutex);\n    }\n    void unlock() {\n        pthread_mutex_unlock(&amp;mutex);\n    }\n};\nclass Cond {\npublic:\n    pthread_cond_t cond;\n    Cond():cond(PTHREAD_COND_INITIALIZER) {}\n    void signal() {\n        pthread_cond_signal(&amp;cond);\n    }\n    void broadcast() {\n        pthread_cond_broadcast(&amp;cond);\n    }\n    void wait(Mutex &amp;mutex) {\n        pthread_cond_wait(&amp;cond, &amp;mutex.mutex);\n    }\n};\nclass ScopeLock {\n    Mutex &amp;mutex;\npublic:\n    ScopeLock(CanMutex &amp;_mutex):mutex(_mutex) {\n        mutex.lock();\n    };\n    ~ScopeLock() {\n        mutex.unlock();\n    };\n};\n\nclass Client\n{\npublic:\n    Mutex inter_mutex;\n    Mutex mutex;\n    Cond cond;\n    bool pending;\n    Client():pending(false){}\n    ~Client(){}\n    void Lock() {\n        mutex.lock();\n    }\n    void Unlock() {\n        mutex.unlock();\n    }\n    void sendData() {\n        const ScopeLock inter_protect(inter_mutex);\n        const ScopeLock protect(mutex);\n\n        &#47;&#47;send_to_server();\n\n        while (!pending) {\n            cond.wait(mutex);\n        }\n        pending = false;\n    }\n    void recvData() {\n        const ScopeLock protect(mutex);\n        pending = true;\n        cond.signal();\n    }\n};\næˆ‘æœ‰å‡ ä¸ªçº¿ç¨‹ä¼šæ‰§è¡ŒåŒä¸€ä¸ªClientå¯¹è±¡çš„sendDataå‡½æ•°ï¼Œæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒClientå¯¹è±¡çš„recvDataå‡½æ•°ã€‚æˆ‘ä¸»è¦æƒ³é—®æˆ‘å‡ ä¸ªsendDataçº¿ç¨‹éœ€è¦åŒæ­¥æ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€ä¸ªsendDataå‘é€åï¼Œå†æ‰§è¡Œå¦ä¸€ä¸ªsendDataã€‚é‚£ä¹ˆæˆ‘åœ¨sendDataå‡½æ•°æœ€å¼€å§‹åŠ æ•´ä¸ªå‡½æ•°èŒƒå›´çš„é”const ScopeLock inter_protect(inter_mutex);ï¼Œæ˜¯å¦å¯ä»¥è¿™æ ·åšï¼Ÿè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479351,"discussion_content":"å¯¹ä½ çš„ä¸šåŠ¡åœºæ™¯ä¸ç†Ÿæ‚‰ï¼Œéšä¾¿è¯„è®ºå‡ å¥ã€‚\n\nãƒ»C++11 é‡Œæœ‰ç°æˆçš„ mutexã€condition_variable å’Œ unique_lockã€‚\nãƒ»Client::Lock å’Œ Client::Unlock ä¼¼ä¹æ²¡æœ‰ç”¨å¤„ã€‚\nãƒ»å˜é‡ pending çš„å‘½åè®©äººå›°æƒ‘ï¼šæ”¶åˆ°æ•°æ®äº†ï¼Œâ€œæŒ‚èµ·â€æ ‡å¿—è¢«è®¾ä¸ºçœŸï¼Œç„¶åå‘é€æ•°æ®å°±èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œäº†ï¼Ÿè¿ç»­ä¸¤æ¬¡ sendData ä¸­é—´å¿…é¡»æœ‰ä¸€æ¬¡ recvData æ‰è¡Œï¼Œè€Œä¸” sendData é‡Œçš„ç­‰å¾…æ˜¯åœ¨å‘é€ä¹‹åï¼Ÿè¿™å—æ„Ÿè§‰æœ‰é—®é¢˜ã€‚\nãƒ»inter_mutex å’Œ inter_protect æœ¬èº«ç›®å‰æ²¡æœ‰çœ‹å‡ºé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577411094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256330,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIRm3kWsgiaEXjO0rr0Aiav7o89StFTFSXbLTkEmiaibmnw8EQTejibrtzKla0emibePT0R0KXjFRIpfXrQ/132","nickname":"zhang","note":"","ucode":"BFA19BED5A5322","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104807,"discussion_content":"è°¢è°¢å›å¤ã€‚æˆ‘çš„ä¸šåŠ¡åœºæ™¯å°±æ˜¯å‘é€çº¿ç¨‹æ‰§è¡ŒsendDataä¹‹åï¼Œå¿…é¡»ç­‰å¾…æ¥æ”¶çº¿ç¨‹recvDataä¹‹åæ‰ä¼šæ‰§è¡Œå®ŒsendDataã€‚æˆ‘çš„é—®é¢˜å°±æ˜¯æœ‰å¤šä¸ªå‘é€çº¿ç¨‹è¦æ‰§è¡ŒsendDataï¼Œæ‰€ä»¥è¿˜éœ€è¦å†åŠ ä¸€ä¸ªinter_mutexé”ï¼Œæ¥ä¿è¯å¤šä¸ªå‘é€çº¿ç¨‹æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚ä¸çŸ¥é“åœ¨sendDataå‡½æ•°ç¬¬ä¸€è¡Œå°±const ScopeLock inter_protect(inter_mutex);æ¥ä¿è¯å¤šä¸ªçº¿ç¨‹é¡ºåºæ‰§è¡Œï¼Œæ˜¯å¦æ­£ç¡®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577451704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1256330,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIRm3kWsgiaEXjO0rr0Aiav7o89StFTFSXbLTkEmiaibmnw8EQTejibrtzKla0emibePT0R0KXjFRIpfXrQ/132","nickname":"zhang","note":"","ucode":"BFA19BED5A5322","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":106050,"discussion_content":"æŒ‰è¿™ä¹ˆè¯´ï¼Œç›®å‰æ²¡å‘ç°æœ‰é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577508672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104807,"ip_address":"","group_id":0},"score":106050,"extra":""}]}]},{"had_liked":false,"id":165651,"user_name":"å®‰é™çš„é›¨","can_delete":false,"product_type":"c1","uid":1004841,"ip_address":"","ucode":"6371DE858C4D3A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/29/4fa6e9fb.jpg","comment_is_top":false,"comment_ctime":1577278553,"is_pvip":false,"replies":[{"id":63240,"content":"è§‰å¾—æœ‰è¶£å°±å¥½ï¼Œè¿™ä¸ªæˆ‘ä»¬è¦è®²ä¸Šå¥½å‡ è®²çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577336029,"ip_address":"","comment_id":165651,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"æ¨¡ç‰ˆç¼–ç¨‹å¾ˆæœ‰è¶£ï¼ŒæœŸå¾…è€å¸ˆçš„æ›´æ–°ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479351,"discussion_content":"å¯¹ä½ çš„ä¸šåŠ¡åœºæ™¯ä¸ç†Ÿæ‚‰ï¼Œéšä¾¿è¯„è®ºå‡ å¥ã€‚\n\nãƒ»C++11 é‡Œæœ‰ç°æˆçš„ mutexã€condition_variable å’Œ unique_lockã€‚\nãƒ»Client::Lock å’Œ Client::Unlock ä¼¼ä¹æ²¡æœ‰ç”¨å¤„ã€‚\nãƒ»å˜é‡ pending çš„å‘½åè®©äººå›°æƒ‘ï¼šæ”¶åˆ°æ•°æ®äº†ï¼Œâ€œæŒ‚èµ·â€æ ‡å¿—è¢«è®¾ä¸ºçœŸï¼Œç„¶åå‘é€æ•°æ®å°±èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œäº†ï¼Ÿè¿ç»­ä¸¤æ¬¡ sendData ä¸­é—´å¿…é¡»æœ‰ä¸€æ¬¡ recvData æ‰è¡Œï¼Œè€Œä¸” sendData é‡Œçš„ç­‰å¾…æ˜¯åœ¨å‘é€ä¹‹åï¼Ÿè¿™å—æ„Ÿè§‰æœ‰é—®é¢˜ã€‚\nãƒ»inter_mutex å’Œ inter_protect æœ¬èº«ç›®å‰æ²¡æœ‰çœ‹å‡ºé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577411094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256330,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIRm3kWsgiaEXjO0rr0Aiav7o89StFTFSXbLTkEmiaibmnw8EQTejibrtzKla0emibePT0R0KXjFRIpfXrQ/132","nickname":"zhang","note":"","ucode":"BFA19BED5A5322","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104807,"discussion_content":"è°¢è°¢å›å¤ã€‚æˆ‘çš„ä¸šåŠ¡åœºæ™¯å°±æ˜¯å‘é€çº¿ç¨‹æ‰§è¡ŒsendDataä¹‹åï¼Œå¿…é¡»ç­‰å¾…æ¥æ”¶çº¿ç¨‹recvDataä¹‹åæ‰ä¼šæ‰§è¡Œå®ŒsendDataã€‚æˆ‘çš„é—®é¢˜å°±æ˜¯æœ‰å¤šä¸ªå‘é€çº¿ç¨‹è¦æ‰§è¡ŒsendDataï¼Œæ‰€ä»¥è¿˜éœ€è¦å†åŠ ä¸€ä¸ªinter_mutexé”ï¼Œæ¥ä¿è¯å¤šä¸ªå‘é€çº¿ç¨‹æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚ä¸çŸ¥é“åœ¨sendDataå‡½æ•°ç¬¬ä¸€è¡Œå°±const ScopeLock inter_protect(inter_mutex);æ¥ä¿è¯å¤šä¸ªçº¿ç¨‹é¡ºåºæ‰§è¡Œï¼Œæ˜¯å¦æ­£ç¡®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577451704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1256330,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIRm3kWsgiaEXjO0rr0Aiav7o89StFTFSXbLTkEmiaibmnw8EQTejibrtzKla0emibePT0R0KXjFRIpfXrQ/132","nickname":"zhang","note":"","ucode":"BFA19BED5A5322","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":106050,"discussion_content":"æŒ‰è¿™ä¹ˆè¯´ï¼Œç›®å‰æ²¡å‘ç°æœ‰é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577508672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104807,"ip_address":"","group_id":0},"score":106050,"extra":""}]}]},{"had_liked":false,"id":165495,"user_name":"å°ä¸€æ—¥ä¸€","can_delete":false,"product_type":"c1","uid":1301097,"ip_address":"","ucode":"0A506C2B918C14","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","comment_is_top":false,"comment_ctime":1577245543,"is_pvip":false,"replies":[{"id":63149,"content":"è¯•è¯• c++1yã€c++14 ç­‰æ ‡å‡†é€‰é¡¹äº†ã€‚è¿™ä¸ª GCC å¤ªè€äº†â€¦â€¦æˆ‘è¦æ±‚ C++17ã€GCC 7 çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577275341,"ip_address":"","comment_id":165495,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;type_traits&gt;\n\nusing namespace std;\n\ntemplate&lt; class T &gt;\nusing decay_t = typename decay&lt;T&gt;::type;\n\ntemplate &lt; template &lt;typename, typename&gt; class OutContainer = vector,\n           typename F, class R&gt;\nauto fmap(F&amp;&amp; f, R&amp;&amp; inputs)\n{\n    typedef decay_t&lt;decltype( f(*inputs.begin()))&gt; result_type;\n    OutContainer&lt; result_type, allocator&lt;result_type&gt;&gt; result;\n    for (auto&amp;&amp; item : inputs) {\n        result.push_back(f(item));\n    }\n    return result;\n}\n\nint add_1(int x)\n{\n    return x + 1;\n}\n\nint main()\n{\n    vector&lt;int&gt; v{1, 2, 3, 4, 5};\n\n    auto result = fmap(add_1, v);\n\n    for (auto &amp;&amp;v : result) {\n        cout &lt;&lt; v &lt;&lt; endl;\n    }\n}\n\nç”¨g++ 4.8.5 å¸¦std=c++11å‚æ•°ç¼–è¯‘èƒ½é€šè¿‡å¹¶æ­£ç¡®è¿è¡Œï¼Œä½†æ˜¯æœ‰warning:\n13_5.cc:12:28: warning: â€˜fmapâ€™ function uses â€˜autoâ€™ type specifier without trailing return type [enabled by default] auto fmap(F&amp;&amp; f, R&amp;&amp; inputs)\n\nè¯·é—®è€å¸ˆå¦‚ä½•åŠ å°¾ç½®è¿”å›ç±»å‹æ¶ˆé™¤warning?","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479246,"discussion_content":"è§‰å¾—æœ‰è¶£å°±å¥½ï¼Œè¿™ä¸ªæˆ‘ä»¬è¦è®²ä¸Šå¥½å‡ è®²çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577336029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165438,"user_name":"æä¹‰ç››","can_delete":false,"product_type":"c1","uid":1762459,"ip_address":"","ucode":"2C79848BCF545D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","comment_is_top":false,"comment_ctime":1577238026,"is_pvip":false,"replies":[{"id":63148,"content":"æ‹¿çº¸ç¬”æ¥å±•å¼€è¯•è¯•ï¼Ÿå®é™…ä¸Šå°±æ˜¯ä¸€ç§å±•å¼€è€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577275219,"ip_address":"","comment_id":165438,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"ä¸€åˆ°æ¨¡æ¿å°±å¤„äºçœ‹ä¸æ‡‚çŠ¶æ€äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479183,"discussion_content":"è¯•è¯• c++1yã€c++14 ç­‰æ ‡å‡†é€‰é¡¹äº†ã€‚è¿™ä¸ª GCC å¤ªè€äº†â€¦â€¦æˆ‘è¦æ±‚ C++17ã€GCC 7 çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577275341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1301097,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","nickname":"å°ä¸€æ—¥ä¸€","note":"","ucode":"0A506C2B918C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100384,"discussion_content":"ä¸Šé¢çš„ä»£ç åœ¨https://www.onlinegdb.com/ä¸Šå¯ä»¥åœ¨C++14å’ŒC++17ä¸‹æ— æŠ¥è­¦ç¼–è¯‘é€šè¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577256416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1301097,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","nickname":"å°ä¸€æ—¥ä¸€","note":"","ucode":"0A506C2B918C14","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":101108,"discussion_content":"é‚£åº”è¯¥çš„å•Šï¼Œä½ çš„è­¦å‘Šå®è´¨ä¸Šè¯´çš„æ˜¯ä½ çš„ç¼–è¯‘å™¨æ²¡æœ‰æ‰“å¼€ C++14 æ”¯æŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577283957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":100384,"ip_address":"","group_id":0},"score":101108,"extra":""}]}]},{"had_liked":false,"id":165389,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1577232803,"is_pvip":false,"replies":[{"id":63038,"content":"1 æ˜¯æœ‰ç‚¹ç¼–è¯‘å™¨é­”æ³•çš„ã€‚å¦‚æœä½ æœ‰ææ„å‡½æ•°ï¼Œæˆ–è€…ä½ æ²¡æœ‰ææ„å‡½æ•°ä½†æœ‰ä¸ªé POD æ•°æ®æˆå‘˜ï¼Œis_trivially_destructible å°±ä¸æˆç«‹äº†ã€‚\n\n2 trivial æ˜¯å¾ˆå¸¸è§çš„æ•°å­¦æœ¯è¯­ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚è§ï¼š\n\nhttps:&#47;&#47;baike.baidu.com&#47;item&#47;%E5%B9%B3%E5%87%A1&#47;16739977\nhttps:&#47;&#47;zh.wikipedia.org&#47;wiki&#47;%E5%B9%B3%E5%87%A1_(%E6%95%B8%E5%AD%B8)\nhttps:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Triviality_(mathematics)","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577237045,"ip_address":"","comment_id":165389,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"â€œå¸¸ç”¨çš„ä¸€ä¸ªæŠ€å·§å°±æ˜¯ç”¨ is_trivially_destructible æ¨¡æ¿æ¥åˆ¤æ–­ç±»æ˜¯å¦æ˜¯å¯å¹³å‡¡ææ„çš„â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸è°ƒç”¨ææ„å‡½æ•°ï¼Œä¸ä¼šé€ æˆä»»ä½•èµ„æºæ³„æ¼é—®é¢˜ã€‚â€\n\néº»çƒ¦è§£é‡Šä¸€ä¸‹ï¼Œ\n#1 è¿™ä¸ªç±»æ¨¡ç‰ˆæ˜¯å¦‚ä½•è¯†åˆ«â€œï¼Œä¸è°ƒç”¨ææ„å‡½æ•°ï¼Œä¸ä¼šé€ æˆä»»ä½•èµ„æºæ³„æ¼é—®é¢˜â€ï¼Ÿ è¿™çš„èµ„æºåŒ…æ‹¬newçš„å †å†…å­˜å—ï¼Ÿ\n#2 triviallyè¿™ä¸ªè¯æ€»æ˜¯è§‰å¾—å¾ˆéš¾ç†è§£ï¼ŒC++é‡Œï¼Œä½¿ç”¨è¿™ä¸ªè¯çš„ç›®çš„ï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479141,"discussion_content":"1 æ˜¯æœ‰ç‚¹ç¼–è¯‘å™¨é­”æ³•çš„ã€‚å¦‚æœä½ æœ‰ææ„å‡½æ•°ï¼Œæˆ–è€…ä½ æ²¡æœ‰ææ„å‡½æ•°ä½†æœ‰ä¸ªé POD æ•°æ®æˆå‘˜ï¼Œis_trivially_destructible å°±ä¸æˆç«‹äº†ã€‚\n\n2 trivial æ˜¯å¾ˆå¸¸è§çš„æ•°å­¦æœ¯è¯­ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚è§ï¼š\n\nhttps://baike.baidu.com/item/%E5%B9%B3%E5%87%A1/16739977\nhttps://zh.wikipedia.org/wiki/%E5%B9%B3%E5%87%A1_(%E6%95%B8%E5%AD%B8)\nhttps://en.wikipedia.org/wiki/Triviality_(mathematics)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577237045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165386,"user_name":"æ³°ä¼¦å¢","can_delete":false,"product_type":"c1","uid":1141994,"ip_address":"","ucode":"FEA6B43C8D4FF9","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/ea/e03fec22.jpg","comment_is_top":false,"comment_ctime":1577232703,"is_pvip":false,"replies":[{"id":63040,"content":"ç¼–è¯‘æœŸè¦è¿ç»­è®²åˆ°ç¬¬ 18 è®²ï¼Œç”šè‡³ä¹‹åè¿˜ä¼šæœ‰æåˆ°çš„æœºä¼šã€‚ä½ å–œæ¬¢é‚£æ˜¯æœ€å¥½äº†ã€‚æˆ‘æ˜¯æ€•å¾ˆå¤šäººä¼šè¢«ç¼–è¯‘æœŸç¼–ç¨‹å“é€€å‘¢ã€‚ğŸ˜…\n\npolicy è¿™ä¸ªæ¦‚å¿µä¸å•ç‹¬è®²ï¼Œä½†æˆ‘è§‰å¾—åœ¨è®¨è®ºäº†ä½¿ç”¨å¸¸æ•°æ¥å¯¹æ¨¡æ¿è¿›è¡Œç‰¹åŒ–ä¹‹åï¼Œè¿™ä¸ªæ¦‚å¿µåº”è¯¥æ²¡æœ‰ç‰¹åˆ«ä¹‹å¤„ã€‚æˆ‘ä»¬çš„ä¾‹å­å€’æ˜¯ä¼šæœ‰æ ‡å‡†åº“æä¾›çš„ policyã€‚ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577237777,"ip_address":"","comment_id":165386,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"ä¸€ç›´å¯¹æ¨¡æ¿å…ƒç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œä½†æ€»æ˜¯æä¸æ˜ç™½ï¼Œä»Šå¤©å­¦ä¹ å¾ˆæœ‰æ”¶è·ï¼Œç‰¹åˆ«æ˜¯æœ€åçš„fmapï¼Œæ„Ÿè°¢è€å¸ˆï¼Œè®°å¾—æ¨¡æ¿ç¼–ç¨‹è¿˜æœ‰policyä¹‹ç±»çš„ä¸œè¥¿ï¼Œè€å¸ˆä¹‹ååœ¨ç¼–è¯‘æœŸè¿™æ–¹é¢è¿˜ä¼šæ›´è¯¦ç»†è®²è§£å—","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479139,"discussion_content":"ç¼–è¯‘æœŸè¦è¿ç»­è®²åˆ°ç¬¬ 18 è®²ï¼Œç”šè‡³ä¹‹åè¿˜ä¼šæœ‰æåˆ°çš„æœºä¼šã€‚ä½ å–œæ¬¢é‚£æ˜¯æœ€å¥½äº†ã€‚æˆ‘æ˜¯æ€•å¾ˆå¤šäººä¼šè¢«ç¼–è¯‘æœŸç¼–ç¨‹å“é€€å‘¢ã€‚ğŸ˜…\n\npolicy è¿™ä¸ªæ¦‚å¿µä¸å•ç‹¬è®²ï¼Œä½†æˆ‘è§‰å¾—åœ¨è®¨è®ºäº†ä½¿ç”¨å¸¸æ•°æ¥å¯¹æ¨¡æ¿è¿›è¡Œç‰¹åŒ–ä¹‹åï¼Œè¿™ä¸ªæ¦‚å¿µåº”è¯¥æ²¡æœ‰ç‰¹åˆ«ä¹‹å¤„ã€‚æˆ‘ä»¬çš„ä¾‹å­å€’æ˜¯ä¼šæœ‰æ ‡å‡†åº“æä¾›çš„ policyã€‚ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577237777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175497,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1580734083,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"ç±»æ¯”åˆšå­¦å‡½æ•°æ—¶çš„æ„Ÿè§‰ã€‚æ¨¡æ¿ç±»å‹æ¨å¯¼=å‡½æ•°åµŒå¥—ï¼Œç”¨äºæä¾›é€»è¾‘è¿‡ç¨‹ï¼›è®¡ç®—è¿‡ç¨‹ç”±å‚æ•°ä¼ é€’çš„è¿‡ç¨‹ä¸­è¿›è¡Œã€‚é€»è¾‘+è®¡ç®—ï¼Œè¿™æ ·å°±å®Œæˆäº†æ¨¡æ¿è®¡ç®—ã€‚","like_count":0},{"had_liked":false,"id":167092,"user_name":"ä¸‰å‘³","can_delete":false,"product_type":"c1","uid":1362403,"ip_address":"","ucode":"A580F715D1CC96","user_header":"https://static001.geekbang.org/account/avatar/00/14/c9/e3/28c16afa.jpg","comment_is_top":false,"comment_ctime":1577690056,"is_pvip":false,"replies":[{"id":64982,"content":"å¾ˆå¥½ï¼ç¬¬ 18 è®²ä½ ä¼šå­¦å¾—å¾ˆè½»æ¾ã€‚ğŸ˜‰","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577791705,"ip_address":"","comment_id":167092,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"è¿™ä¸ªè¯¾åæ€è€ƒé¢˜çœŸä¸æ˜¯ç›–å¾—ã€‚ã€‚ã€‚è¿˜çœ‹åˆ°äº†5åˆ†é’Ÿç¼–è¯‘æœŸå †æ’åºçš„æ®µå­ã€‚ã€‚ã€‚çœ‹å¾—æˆ‘å¿ƒæƒŠèƒ†æˆ˜ã€‚ã€‚ã€‚\nä¸è¿‡è¿˜æ˜¯ä¸€å †ç™¾åº¦å†™å‡ºäº†ä¸€ä¸ªï¼Œé’ˆå¯¹intå‹ï¼Œå†™å‡ºä»[0, N)çš„ç¼–è¯‘æœŸç”Ÿæˆæ•°ç»„çš„ä¾‹å­ã€‚ã€‚ã€‚å…¼å®¹å…¶ä»–ç±»å‹è¿˜è¦å†é¢å¤–å†™å¥½å¤šä»£ç ã€‚ã€‚å·æ‡’ç›´æ¥å†™äº†intå‹ã€‚ã€‚ã€‚\næˆ‘åœ¨msvcä¸‹æµ‹è¯•äº†ï¼Œåº”è¯¥æ²¡é—®é¢˜ã€‚ã€‚ã€‚ç”¨åˆ°äº†æ¨¡æ¿ä¸å®šå‚æ•°ï¼Œå…¶ä»–ä¸çŸ¥é“ä»€ä¹ˆæŠ€å·§çš„æ–¹æ³•ã€‚ã€‚ã€‚\næƒ³è¦è®©int Nè½¬æ¢æˆä»0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5 ã€‚ã€‚ã€‚å¡åœ¨äº†å¦‚ä½•æŠŠè¿™å †å‚æ•°å±•å¼€ã€‚ã€‚å†™å¾—å¯èƒ½å¤æ‚ä¸€äº›ã€‚ã€‚ä¸çŸ¥é“æ€ä¹ˆæ›´ç®€å•ã€‚ã€‚ ä¸‹é¢ä»£ç å§ï¼š\n\ntemplate&lt;int... values&gt;\nstruct IntegerSequence {};\n\ntemplate&lt;typename T, T v, typename INTEGER_SEQUENCE&gt;\nstruct PushBack;\n\ntemplate&lt;int v, int... values&gt;\nstruct PushBack&lt;int, v, IntegerSequence&lt;values...&gt;&gt; {\n\tusing type = IntegerSequence&lt;values..., v&gt;;\n};\n\ntemplate&lt;int N&gt;\nstruct IntegerRange {\n\tusing type = typename PushBack&lt;int, N-1, typename IntegerRange&lt;N-1&gt;::type&gt;::type;\n};\n\ntemplate&lt;&gt;\nstruct IntegerRange&lt;1&gt; {\n\tusing type = IntegerSequence&lt;0&gt;;\n};\n\ntemplate&lt;int N, typename INTEGER_SEQUENCE&gt;\nstruct RangeArray;\n\ntemplate&lt;int N, int... values&gt;\nstruct RangeArray&lt;N, IntegerSequence&lt;values...&gt;&gt; {\n\tstatic constexpr std::array&lt;int, N&gt; value = {values...};\n};\n\ntemplate&lt;int N&gt; using Range = RangeArray&lt;N, typename IntegerRange&lt;N&gt;::type&gt;;\n\næµ‹è¯•ï¼š\nauto A = Range&lt;5&gt;::value; \nä¸å‡ºæ„å¤–ï¼Œä¼šç”Ÿæˆstd::array&lt;int, 5&gt;{0,1,2,3,4};","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479741,"discussion_content":"å¾ˆå¥½ï¼ç¬¬ 18 è®²ä½ ä¼šå­¦å¾—å¾ˆè½»æ¾ã€‚ğŸ˜‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577791705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166234,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1577420565,"is_pvip":false,"replies":[{"id":63346,"content":"æˆ‘çœŸæ˜¯è‡ªä½œè‡ªå—ï¼Œå¾—çœ‹è¿™æ ·çš„ä»£ç ã€‚ğŸ˜œ\n\n1. æˆ‘ç»™çš„è¿™äº›æ¨¡æ¿åªæ˜¯è¯´æ˜èƒ½åŠ›çš„ï¼Œè‚¯å®šä¸æ˜¯è®©ä½ çœŸçš„è¿™ä¹ˆå†™ä»£ç çš„ã€‚æ¯”å¦‚ä½ è¿™ç§ç´¯åŠ ï¼Œå¯ä»¥è€ƒè™‘è¿™æ ·å†™ï¼ˆåªè€ƒè™‘äº†æ­£å‘ï¼‰ï¼š\n\ntemplate &lt;int from, int to, int sum, bool ending&gt;\nstruct sum_two_op;\n\ntemplate &lt;int from, int to, int sum&gt;\nstruct sum_two_op&lt;from, to, sum, false&gt; {\n    static const int value = sum;\n};\n\ntemplate &lt;int from, int to, int sum&gt;\nstruct sum_two_op&lt;from, to, sum, true&gt; {\n    static const int value =\n        sum_two_op&lt;from + 1, to, sum + from, (from &lt; to)&gt;::value;\n};\n\ntemplate &lt;int from, int to&gt;\nstruct sum_two {\n    static const int value = sum_two_op&lt;from, to, 0, (from &lt;= to)&gt;::value;\n};\n\n2. ä½ å·²ç»å¾ˆé è¿‘äº†ï¼ŒåªçŠ¯äº†ä¸€ä¸ªå°é”™è¯¯ï¼ŒSumTwo é‡Œçš„æ–¹å‘ã€‚åº”è¯¥æ˜¯ï¼š\n\ntemplate &lt;int from, int to&gt;\nstruct SumTwo {\n    typedef SumAnyTwo&lt;(from &lt; to), from, to&gt; type;\n};\n\nå¦å¤–ï¼Œä½ ç›®å‰çš„å¤„ç†å¯¹äº from==to çš„æƒ…å†µæœ‰ç‚¹é—®é¢˜ã€‚å¯å‚è€ƒæˆ‘ä¸Šé¢çš„å†™æ³•ï¼Œé‚£æ˜¯å¯ä»¥æ­£ç¡®å¤„ç†çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577424052,"ip_address":"","comment_id":166234,"utype":1}],"discussion_count":5,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œçœ‹äº†ä½ çš„Whileæ¨¡æ¿ï¼Œè¯•ç€æƒ³æŠŠè¿™ä¸ªè®¡ç®—ç´¯åŠ çš„åŠŸèƒ½æ‰©å±•ä¸€ä¸‹ï¼Œè¾“å…¥ä»»æ„ä¸¤ä¸ªæ•°ï¼Œå¯ä»¥æ±‚ä»–ä»¬ä¹‹é—´çš„æ•°çš„ç´¯åŠ å’Œï¼Œä»£ç å¦‚ä¸‹ï¼š\ntemplate &lt;int from, int to, int sum&gt;\nstruct SumAnyTwo_A\n{\n    static const bool cond_value = from != to;\n    static const int res_value = sum;\n    typedef integral_constant&lt;int, res_value&gt; res_type;\n    typedef SumAnyTwo_A&lt;from + 1, to, sum + from&gt; next_type;\n};\n\ntemplate &lt;int from, int to, int sum&gt;\nstruct SumAnyTwo_B\n{\n    static const bool cond_value = from != to;\n    static const int res_value = sum;\n    typedef integral_constant&lt;int, res_value&gt; res_type;\n    typedef SumAnyTwo_B&lt;from - 1, to, sum + from&gt; next_type;\n};\n\ntemplate &lt;bool valueCompare, int from, int to&gt;\nstruct SumAnyTwo;\n\ntemplate &lt;int from, int to&gt;\nstruct SumAnyTwo&lt;true, from, to&gt;\n{\n    typedef SumAnyTwo_A&lt;from, to, 0&gt; addType;\n};\n\ntemplate &lt;int from, int to&gt;\nstruct SumAnyTwo&lt;false, from, to&gt;\n{\n    typedef SumAnyTwo_B&lt;from, to, 0&gt; addType;\n};\n\ntemplate &lt;int from, int to&gt;\nstruct SumTwo\n{\n    typedef SumAnyTwo&lt;(from &gt; to), from, to&gt; type;\n};\n\né‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜ï¼š\n1ï¼Œè¿™æ®µä»£ç çœ‹èµ·æ¥ä¸å¤Ÿä¼˜é›…ï¼Œåœ¨C++ 98 çš„èŒƒç•´å†…ï¼Œæœ‰æ›´å¥½çš„æ¨¡æ¿å…ƒç¼–ç¨‹å®ç°æ–¹å¼ä¹ˆï¼Ÿ\n2ï¼Œå½“æˆ‘è¯•å›¾è°ƒç”¨è¿™ä¸ªWhileæ¨¡æ¿æ—¶ï¼Œå‡ºç°å¦‚ä¸‹çŠ¶å†µï¼Œä¸æ˜ç™½ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªä¼šæŠ¥é”™\n        While&lt;SumTwo&lt;8, 3&gt;::type::addType&gt;::type::value &#47;&#47; æŠ¥é”™ï¼Œtemplate  instantiation depth exceeds maximum of 900\n        While&lt;SumAnyTwo_B&lt;8, 3, 0&gt;&gt;::type::value &#47;&#47; OK\n       While&lt;SumAnyTwo&lt;(8 - 3 &lt; 0), 8, 3&gt;::addType&gt;::type::value &#47;&#47;OK\n\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479451,"discussion_content":"æˆ‘çœŸæ˜¯è‡ªä½œè‡ªå—ï¼Œå¾—çœ‹è¿™æ ·çš„ä»£ç ã€‚ğŸ˜œ\n\n1. æˆ‘ç»™çš„è¿™äº›æ¨¡æ¿åªæ˜¯è¯´æ˜èƒ½åŠ›çš„ï¼Œè‚¯å®šä¸æ˜¯è®©ä½ çœŸçš„è¿™ä¹ˆå†™ä»£ç çš„ã€‚æ¯”å¦‚ä½ è¿™ç§ç´¯åŠ ï¼Œå¯ä»¥è€ƒè™‘è¿™æ ·å†™ï¼ˆåªè€ƒè™‘äº†æ­£å‘ï¼‰ï¼š\n\ntemplate &amp;lt;int from, int to, int sum, bool ending&amp;gt;\nstruct sum_two_op;\n\ntemplate &amp;lt;int from, int to, int sum&amp;gt;\nstruct sum_two_op&amp;lt;from, to, sum, false&amp;gt; {\n    static const int value = sum;\n};\n\ntemplate &amp;lt;int from, int to, int sum&amp;gt;\nstruct sum_two_op&amp;lt;from, to, sum, true&amp;gt; {\n    static const int value =\n        sum_two_op&amp;lt;from + 1, to, sum + from, (from &amp;lt; to)&amp;gt;::value;\n};\n\ntemplate &amp;lt;int from, int to&amp;gt;\nstruct sum_two {\n    static const int value = sum_two_op&amp;lt;from, to, 0, (from &amp;lt;= to)&amp;gt;::value;\n};\n\n2. ä½ å·²ç»å¾ˆé è¿‘äº†ï¼ŒåªçŠ¯äº†ä¸€ä¸ªå°é”™è¯¯ï¼ŒSumTwo é‡Œçš„æ–¹å‘ã€‚åº”è¯¥æ˜¯ï¼š\n\ntemplate &amp;lt;int from, int to&amp;gt;\nstruct SumTwo {\n    typedef SumAnyTwo&amp;lt;(from &amp;lt; to), from, to&amp;gt; type;\n};\n\nå¦å¤–ï¼Œä½ ç›®å‰çš„å¤„ç†å¯¹äº from==to çš„æƒ…å†µæœ‰ç‚¹é—®é¢˜ã€‚å¯å‚è€ƒæˆ‘ä¸Šé¢çš„å†™æ³•ï¼Œé‚£æ˜¯å¯ä»¥æ­£ç¡®å¤„ç†çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577424052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347724,"discussion_content":"å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612317248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1490070,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","nickname":"æ€»ç»Ÿè€å”","note":"","ucode":"F2CC66E5BB4871","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104368,"discussion_content":"æ„Ÿè°¢å´è€å¸ˆåŠæ—¶ç­”ç–‘ã€‚ä¸è¿‡è¿˜æœ‰ç‚¹å°ç–‘é—®ï¼Œä½ è¯´æ–¹å‘é”™äº†ï¼Œç¡®å®æŠŠå¤§äºç¬¦å·æ”¹æˆå°äºç¬¦å·å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Œæ˜¯å› ä¸ºå¤§äºç¬¦å·ä¼šå¹²æ‰°æ¨¡æ¿ç±»å‹çš„æ¨æ–­ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577427638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1490070,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","nickname":"æ€»ç»Ÿè€å”","note":"","ucode":"F2CC66E5BB4871","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104385,"discussion_content":"ä¸æ˜¯å•Šï¼Œä½ ç¬¦å·é”™äº†ï¼Œæ¨¡æ¿å±•å¼€å°±åˆ°è¾¾ä¸äº†ç»ˆç»“æ¡ä»¶äº†ã€‚æœ¬æ¥å±•å¼€5æ¬¡å°±ç»“æŸï¼Œç°åœ¨å˜æˆæ— ç©·å±•å¼€äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577429507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104368,"ip_address":"","group_id":0},"score":104385,"extra":""},{"author":{"id":1490070,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","nickname":"æ€»ç»Ÿè€å”","note":"","ucode":"F2CC66E5BB4871","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":104522,"discussion_content":"ç¡®å®æ˜¯æˆ‘æ²¡çœ‹ä»”ç»†ï¼Œå¤šè°¢å´è€å¸ˆè€å¿ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577439320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104385,"ip_address":"","group_id":0},"score":104522,"extra":""}]}]},{"had_liked":false,"id":166015,"user_name":"zhang","can_delete":false,"product_type":"c1","uid":1256330,"ip_address":"","ucode":"BFA19BED5A5322","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIRm3kWsgiaEXjO0rr0Aiav7o89StFTFSXbLTkEmiaibmnw8EQTejibrtzKla0emibePT0R0KXjFRIpfXrQ/132","comment_is_top":false,"comment_ctime":1577362337,"is_pvip":false,"replies":[{"id":63327,"content":"å¯¹ä½ çš„ä¸šåŠ¡åœºæ™¯ä¸ç†Ÿæ‚‰ï¼Œéšä¾¿è¯„è®ºå‡ å¥ã€‚\n\nãƒ»C++11 é‡Œæœ‰ç°æˆçš„ mutexã€condition_variable å’Œ unique_lockã€‚\nãƒ»Client::Lock å’Œ Client::Unlock ä¼¼ä¹æ²¡æœ‰ç”¨å¤„ã€‚\nãƒ»å˜é‡ pending çš„å‘½åè®©äººå›°æƒ‘ï¼šæ”¶åˆ°æ•°æ®äº†ï¼Œâ€œæŒ‚èµ·â€æ ‡å¿—è¢«è®¾ä¸ºçœŸï¼Œç„¶åå‘é€æ•°æ®å°±èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œäº†ï¼Ÿè¿ç»­ä¸¤æ¬¡ sendData ä¸­é—´å¿…é¡»æœ‰ä¸€æ¬¡ recvData æ‰è¡Œï¼Œè€Œä¸” sendData é‡Œçš„ç­‰å¾…æ˜¯åœ¨å‘é€ä¹‹åï¼Ÿè¿™å—æ„Ÿè§‰æœ‰é—®é¢˜ã€‚\nãƒ»inter_mutex å’Œ inter_protect æœ¬èº«ç›®å‰æ²¡æœ‰çœ‹å‡ºé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577411094,"ip_address":"","comment_id":166015,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸ªmutexç›¸å…³çš„é—®é¢˜ï¼Œè™½ç„¶è¿™éƒ¨åˆ†å†…å®¹ä»¥åä¼šè®²ï¼Œä½†æˆ‘ç°åœ¨å·¥ä½œä¸­æœ‰ä¸€ä¸ªç–‘é—®ï¼Œéº»çƒ¦æ‚¨çœ‹ä¸€ä¸‹ï¼Œè°¢è°¢ã€‚\nä»£ç ç®€å†™å¦‚ä¸‹ï¼š\nclass Mutex {\npublic:\n    pthread_mutex_t mutex;\n    Mutex():mutex(PTHREAD_MUTEX_INITIALIZER) {}\n    void lock() {\n        pthread_mutex_lock(&amp;mutex);\n    }\n    void unlock() {\n        pthread_mutex_unlock(&amp;mutex);\n    }\n};\nclass Cond {\npublic:\n    pthread_cond_t cond;\n    Cond():cond(PTHREAD_COND_INITIALIZER) {}\n    void signal() {\n        pthread_cond_signal(&amp;cond);\n    }\n    void broadcast() {\n        pthread_cond_broadcast(&amp;cond);\n    }\n    void wait(Mutex &amp;mutex) {\n        pthread_cond_wait(&amp;cond, &amp;mutex.mutex);\n    }\n};\nclass ScopeLock {\n    Mutex &amp;mutex;\npublic:\n    ScopeLock(CanMutex &amp;_mutex):mutex(_mutex) {\n        mutex.lock();\n    };\n    ~ScopeLock() {\n        mutex.unlock();\n    };\n};\n\nclass Client\n{\npublic:\n    Mutex inter_mutex;\n    Mutex mutex;\n    Cond cond;\n    bool pending;\n    Client():pending(false){}\n    ~Client(){}\n    void Lock() {\n        mutex.lock();\n    }\n    void Unlock() {\n        mutex.unlock();\n    }\n    void sendData() {\n        const ScopeLock inter_protect(inter_mutex);\n        const ScopeLock protect(mutex);\n\n        &#47;&#47;send_to_server();\n\n        while (!pending) {\n            cond.wait(mutex);\n        }\n        pending = false;\n    }\n    void recvData() {\n        const ScopeLock protect(mutex);\n        pending = true;\n        cond.signal();\n    }\n};\næˆ‘æœ‰å‡ ä¸ªçº¿ç¨‹ä¼šæ‰§è¡ŒåŒä¸€ä¸ªClientå¯¹è±¡çš„sendDataå‡½æ•°ï¼Œæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒClientå¯¹è±¡çš„recvDataå‡½æ•°ã€‚æˆ‘ä¸»è¦æƒ³é—®æˆ‘å‡ ä¸ªsendDataçº¿ç¨‹éœ€è¦åŒæ­¥æ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€ä¸ªsendDataå‘é€åï¼Œå†æ‰§è¡Œå¦ä¸€ä¸ªsendDataã€‚é‚£ä¹ˆæˆ‘åœ¨sendDataå‡½æ•°æœ€å¼€å§‹åŠ æ•´ä¸ªå‡½æ•°èŒƒå›´çš„é”const ScopeLock inter_protect(inter_mutex);ï¼Œæ˜¯å¦å¯ä»¥è¿™æ ·åšï¼Ÿè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479451,"discussion_content":"æˆ‘çœŸæ˜¯è‡ªä½œè‡ªå—ï¼Œå¾—çœ‹è¿™æ ·çš„ä»£ç ã€‚ğŸ˜œ\n\n1. æˆ‘ç»™çš„è¿™äº›æ¨¡æ¿åªæ˜¯è¯´æ˜èƒ½åŠ›çš„ï¼Œè‚¯å®šä¸æ˜¯è®©ä½ çœŸçš„è¿™ä¹ˆå†™ä»£ç çš„ã€‚æ¯”å¦‚ä½ è¿™ç§ç´¯åŠ ï¼Œå¯ä»¥è€ƒè™‘è¿™æ ·å†™ï¼ˆåªè€ƒè™‘äº†æ­£å‘ï¼‰ï¼š\n\ntemplate &amp;lt;int from, int to, int sum, bool ending&amp;gt;\nstruct sum_two_op;\n\ntemplate &amp;lt;int from, int to, int sum&amp;gt;\nstruct sum_two_op&amp;lt;from, to, sum, false&amp;gt; {\n    static const int value = sum;\n};\n\ntemplate &amp;lt;int from, int to, int sum&amp;gt;\nstruct sum_two_op&amp;lt;from, to, sum, true&amp;gt; {\n    static const int value =\n        sum_two_op&amp;lt;from + 1, to, sum + from, (from &amp;lt; to)&amp;gt;::value;\n};\n\ntemplate &amp;lt;int from, int to&amp;gt;\nstruct sum_two {\n    static const int value = sum_two_op&amp;lt;from, to, 0, (from &amp;lt;= to)&amp;gt;::value;\n};\n\n2. ä½ å·²ç»å¾ˆé è¿‘äº†ï¼ŒåªçŠ¯äº†ä¸€ä¸ªå°é”™è¯¯ï¼ŒSumTwo é‡Œçš„æ–¹å‘ã€‚åº”è¯¥æ˜¯ï¼š\n\ntemplate &amp;lt;int from, int to&amp;gt;\nstruct SumTwo {\n    typedef SumAnyTwo&amp;lt;(from &amp;lt; to), from, to&amp;gt; type;\n};\n\nå¦å¤–ï¼Œä½ ç›®å‰çš„å¤„ç†å¯¹äº from==to çš„æƒ…å†µæœ‰ç‚¹é—®é¢˜ã€‚å¯å‚è€ƒæˆ‘ä¸Šé¢çš„å†™æ³•ï¼Œé‚£æ˜¯å¯ä»¥æ­£ç¡®å¤„ç†çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577424052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347724,"discussion_content":"å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612317248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1490070,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","nickname":"æ€»ç»Ÿè€å”","note":"","ucode":"F2CC66E5BB4871","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104368,"discussion_content":"æ„Ÿè°¢å´è€å¸ˆåŠæ—¶ç­”ç–‘ã€‚ä¸è¿‡è¿˜æœ‰ç‚¹å°ç–‘é—®ï¼Œä½ è¯´æ–¹å‘é”™äº†ï¼Œç¡®å®æŠŠå¤§äºç¬¦å·æ”¹æˆå°äºç¬¦å·å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Œæ˜¯å› ä¸ºå¤§äºç¬¦å·ä¼šå¹²æ‰°æ¨¡æ¿ç±»å‹çš„æ¨æ–­ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577427638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1490070,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","nickname":"æ€»ç»Ÿè€å”","note":"","ucode":"F2CC66E5BB4871","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104385,"discussion_content":"ä¸æ˜¯å•Šï¼Œä½ ç¬¦å·é”™äº†ï¼Œæ¨¡æ¿å±•å¼€å°±åˆ°è¾¾ä¸äº†ç»ˆç»“æ¡ä»¶äº†ã€‚æœ¬æ¥å±•å¼€5æ¬¡å°±ç»“æŸï¼Œç°åœ¨å˜æˆæ— ç©·å±•å¼€äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577429507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104368,"ip_address":"","group_id":0},"score":104385,"extra":""},{"author":{"id":1490070,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","nickname":"æ€»ç»Ÿè€å”","note":"","ucode":"F2CC66E5BB4871","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":104522,"discussion_content":"ç¡®å®æ˜¯æˆ‘æ²¡çœ‹ä»”ç»†ï¼Œå¤šè°¢å´è€å¸ˆè€å¿ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577439320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104385,"ip_address":"","group_id":0},"score":104522,"extra":""}]}]},{"had_liked":false,"id":165651,"user_name":"å®‰é™çš„é›¨","can_delete":false,"product_type":"c1","uid":1004841,"ip_address":"","ucode":"6371DE858C4D3A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/29/4fa6e9fb.jpg","comment_is_top":false,"comment_ctime":1577278553,"is_pvip":false,"replies":[{"id":63240,"content":"è§‰å¾—æœ‰è¶£å°±å¥½ï¼Œè¿™ä¸ªæˆ‘ä»¬è¦è®²ä¸Šå¥½å‡ è®²çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577336029,"ip_address":"","comment_id":165651,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"æ¨¡ç‰ˆç¼–ç¨‹å¾ˆæœ‰è¶£ï¼ŒæœŸå¾…è€å¸ˆçš„æ›´æ–°ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479246,"discussion_content":"è§‰å¾—æœ‰è¶£å°±å¥½ï¼Œè¿™ä¸ªæˆ‘ä»¬è¦è®²ä¸Šå¥½å‡ è®²çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577336029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165495,"user_name":"å°ä¸€æ—¥ä¸€","can_delete":false,"product_type":"c1","uid":1301097,"ip_address":"","ucode":"0A506C2B918C14","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","comment_is_top":false,"comment_ctime":1577245543,"is_pvip":false,"replies":[{"id":63149,"content":"è¯•è¯• c++1yã€c++14 ç­‰æ ‡å‡†é€‰é¡¹äº†ã€‚è¿™ä¸ª GCC å¤ªè€äº†â€¦â€¦æˆ‘è¦æ±‚ C++17ã€GCC 7 çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577275341,"ip_address":"","comment_id":165495,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;type_traits&gt;\n\nusing namespace std;\n\ntemplate&lt; class T &gt;\nusing decay_t = typename decay&lt;T&gt;::type;\n\ntemplate &lt; template &lt;typename, typename&gt; class OutContainer = vector,\n           typename F, class R&gt;\nauto fmap(F&amp;&amp; f, R&amp;&amp; inputs)\n{\n    typedef decay_t&lt;decltype( f(*inputs.begin()))&gt; result_type;\n    OutContainer&lt; result_type, allocator&lt;result_type&gt;&gt; result;\n    for (auto&amp;&amp; item : inputs) {\n        result.push_back(f(item));\n    }\n    return result;\n}\n\nint add_1(int x)\n{\n    return x + 1;\n}\n\nint main()\n{\n    vector&lt;int&gt; v{1, 2, 3, 4, 5};\n\n    auto result = fmap(add_1, v);\n\n    for (auto &amp;&amp;v : result) {\n        cout &lt;&lt; v &lt;&lt; endl;\n    }\n}\n\nç”¨g++ 4.8.5 å¸¦std=c++11å‚æ•°ç¼–è¯‘èƒ½é€šè¿‡å¹¶æ­£ç¡®è¿è¡Œï¼Œä½†æ˜¯æœ‰warning:\n13_5.cc:12:28: warning: â€˜fmapâ€™ function uses â€˜autoâ€™ type specifier without trailing return type [enabled by default] auto fmap(F&amp;&amp; f, R&amp;&amp; inputs)\n\nè¯·é—®è€å¸ˆå¦‚ä½•åŠ å°¾ç½®è¿”å›ç±»å‹æ¶ˆé™¤warning?","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479183,"discussion_content":"è¯•è¯• c++1yã€c++14 ç­‰æ ‡å‡†é€‰é¡¹äº†ã€‚è¿™ä¸ª GCC å¤ªè€äº†â€¦â€¦æˆ‘è¦æ±‚ C++17ã€GCC 7 çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577275341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1301097,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","nickname":"å°ä¸€æ—¥ä¸€","note":"","ucode":"0A506C2B918C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100384,"discussion_content":"ä¸Šé¢çš„ä»£ç åœ¨https://www.onlinegdb.com/ä¸Šå¯ä»¥åœ¨C++14å’ŒC++17ä¸‹æ— æŠ¥è­¦ç¼–è¯‘é€šè¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577256416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1301097,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","nickname":"å°ä¸€æ—¥ä¸€","note":"","ucode":"0A506C2B918C14","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":101108,"discussion_content":"é‚£åº”è¯¥çš„å•Šï¼Œä½ çš„è­¦å‘Šå®è´¨ä¸Šè¯´çš„æ˜¯ä½ çš„ç¼–è¯‘å™¨æ²¡æœ‰æ‰“å¼€ C++14 æ”¯æŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577283957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":100384,"ip_address":"","group_id":0},"score":101108,"extra":""}]}]},{"had_liked":false,"id":165438,"user_name":"æä¹‰ç››","can_delete":false,"product_type":"c1","uid":1762459,"ip_address":"","ucode":"2C79848BCF545D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","comment_is_top":false,"comment_ctime":1577238026,"is_pvip":false,"replies":[{"id":63148,"content":"æ‹¿çº¸ç¬”æ¥å±•å¼€è¯•è¯•ï¼Ÿå®é™…ä¸Šå°±æ˜¯ä¸€ç§å±•å¼€è€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577275219,"ip_address":"","comment_id":165438,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"ä¸€åˆ°æ¨¡æ¿å°±å¤„äºçœ‹ä¸æ‡‚çŠ¶æ€äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479158,"discussion_content":"æ‹¿çº¸ç¬”æ¥å±•å¼€è¯•è¯•ï¼Ÿå®é™…ä¸Šå°±æ˜¯ä¸€ç§å±•å¼€è€Œå·²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577275219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165389,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1577232803,"is_pvip":false,"replies":[{"id":63038,"content":"1 æ˜¯æœ‰ç‚¹ç¼–è¯‘å™¨é­”æ³•çš„ã€‚å¦‚æœä½ æœ‰ææ„å‡½æ•°ï¼Œæˆ–è€…ä½ æ²¡æœ‰ææ„å‡½æ•°ä½†æœ‰ä¸ªé POD æ•°æ®æˆå‘˜ï¼Œis_trivially_destructible å°±ä¸æˆç«‹äº†ã€‚\n\n2 trivial æ˜¯å¾ˆå¸¸è§çš„æ•°å­¦æœ¯è¯­ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚è§ï¼š\n\nhttps:&#47;&#47;baike.baidu.com&#47;item&#47;%E5%B9%B3%E5%87%A1&#47;16739977\nhttps:&#47;&#47;zh.wikipedia.org&#47;wiki&#47;%E5%B9%B3%E5%87%A1_(%E6%95%B8%E5%AD%B8)\nhttps:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Triviality_(mathematics)","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577237045,"ip_address":"","comment_id":165389,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"â€œå¸¸ç”¨çš„ä¸€ä¸ªæŠ€å·§å°±æ˜¯ç”¨ is_trivially_destructible æ¨¡æ¿æ¥åˆ¤æ–­ç±»æ˜¯å¦æ˜¯å¯å¹³å‡¡ææ„çš„â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸è°ƒç”¨ææ„å‡½æ•°ï¼Œä¸ä¼šé€ æˆä»»ä½•èµ„æºæ³„æ¼é—®é¢˜ã€‚â€\n\néº»çƒ¦è§£é‡Šä¸€ä¸‹ï¼Œ\n#1 è¿™ä¸ªç±»æ¨¡ç‰ˆæ˜¯å¦‚ä½•è¯†åˆ«â€œï¼Œä¸è°ƒç”¨ææ„å‡½æ•°ï¼Œä¸ä¼šé€ æˆä»»ä½•èµ„æºæ³„æ¼é—®é¢˜â€ï¼Ÿ è¿™çš„èµ„æºåŒ…æ‹¬newçš„å †å†…å­˜å—ï¼Ÿ\n#2 triviallyè¿™ä¸ªè¯æ€»æ˜¯è§‰å¾—å¾ˆéš¾ç†è§£ï¼ŒC++é‡Œï¼Œä½¿ç”¨è¿™ä¸ªè¯çš„ç›®çš„ï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479158,"discussion_content":"æ‹¿çº¸ç¬”æ¥å±•å¼€è¯•è¯•ï¼Ÿå®é™…ä¸Šå°±æ˜¯ä¸€ç§å±•å¼€è€Œå·²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577275219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165386,"user_name":"æ³°ä¼¦å¢","can_delete":false,"product_type":"c1","uid":1141994,"ip_address":"","ucode":"FEA6B43C8D4FF9","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/ea/e03fec22.jpg","comment_is_top":false,"comment_ctime":1577232703,"is_pvip":false,"replies":[{"id":63040,"content":"ç¼–è¯‘æœŸè¦è¿ç»­è®²åˆ°ç¬¬ 18 è®²ï¼Œç”šè‡³ä¹‹åè¿˜ä¼šæœ‰æåˆ°çš„æœºä¼šã€‚ä½ å–œæ¬¢é‚£æ˜¯æœ€å¥½äº†ã€‚æˆ‘æ˜¯æ€•å¾ˆå¤šäººä¼šè¢«ç¼–è¯‘æœŸç¼–ç¨‹å“é€€å‘¢ã€‚ğŸ˜…\n\npolicy è¿™ä¸ªæ¦‚å¿µä¸å•ç‹¬è®²ï¼Œä½†æˆ‘è§‰å¾—åœ¨è®¨è®ºäº†ä½¿ç”¨å¸¸æ•°æ¥å¯¹æ¨¡æ¿è¿›è¡Œç‰¹åŒ–ä¹‹åï¼Œè¿™ä¸ªæ¦‚å¿µåº”è¯¥æ²¡æœ‰ç‰¹åˆ«ä¹‹å¤„ã€‚æˆ‘ä»¬çš„ä¾‹å­å€’æ˜¯ä¼šæœ‰æ ‡å‡†åº“æä¾›çš„ policyã€‚ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577237777,"ip_address":"","comment_id":165386,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"ä¸€ç›´å¯¹æ¨¡æ¿å…ƒç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œä½†æ€»æ˜¯æä¸æ˜ç™½ï¼Œä»Šå¤©å­¦ä¹ å¾ˆæœ‰æ”¶è·ï¼Œç‰¹åˆ«æ˜¯æœ€åçš„fmapï¼Œæ„Ÿè°¢è€å¸ˆï¼Œè®°å¾—æ¨¡æ¿ç¼–ç¨‹è¿˜æœ‰policyä¹‹ç±»çš„ä¸œè¥¿ï¼Œè€å¸ˆä¹‹ååœ¨ç¼–è¯‘æœŸè¿™æ–¹é¢è¿˜ä¼šæ›´è¯¦ç»†è®²è§£å—","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479141,"discussion_content":"1 æ˜¯æœ‰ç‚¹ç¼–è¯‘å™¨é­”æ³•çš„ã€‚å¦‚æœä½ æœ‰ææ„å‡½æ•°ï¼Œæˆ–è€…ä½ æ²¡æœ‰ææ„å‡½æ•°ä½†æœ‰ä¸ªé POD æ•°æ®æˆå‘˜ï¼Œis_trivially_destructible å°±ä¸æˆç«‹äº†ã€‚\n\n2 trivial æ˜¯å¾ˆå¸¸è§çš„æ•°å­¦æœ¯è¯­ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚è§ï¼š\n\nhttps://baike.baidu.com/item/%E5%B9%B3%E5%87%A1/16739977\nhttps://zh.wikipedia.org/wiki/%E5%B9%B3%E5%87%A1_(%E6%95%B8%E5%AD%B8)\nhttps://en.wikipedia.org/wiki/Triviality_(mathematics)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577237045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175497,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1580734083,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"ç±»æ¯”åˆšå­¦å‡½æ•°æ—¶çš„æ„Ÿè§‰ã€‚æ¨¡æ¿ç±»å‹æ¨å¯¼=å‡½æ•°åµŒå¥—ï¼Œç”¨äºæä¾›é€»è¾‘è¿‡ç¨‹ï¼›è®¡ç®—è¿‡ç¨‹ç”±å‚æ•°ä¼ é€’çš„è¿‡ç¨‹ä¸­è¿›è¡Œã€‚é€»è¾‘+è®¡ç®—ï¼Œè¿™æ ·å°±å®Œæˆäº†æ¨¡æ¿è®¡ç®—ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479139,"discussion_content":"ç¼–è¯‘æœŸè¦è¿ç»­è®²åˆ°ç¬¬ 18 è®²ï¼Œç”šè‡³ä¹‹åè¿˜ä¼šæœ‰æåˆ°çš„æœºä¼šã€‚ä½ å–œæ¬¢é‚£æ˜¯æœ€å¥½äº†ã€‚æˆ‘æ˜¯æ€•å¾ˆå¤šäººä¼šè¢«ç¼–è¯‘æœŸç¼–ç¨‹å“é€€å‘¢ã€‚ğŸ˜…\n\npolicy è¿™ä¸ªæ¦‚å¿µä¸å•ç‹¬è®²ï¼Œä½†æˆ‘è§‰å¾—åœ¨è®¨è®ºäº†ä½¿ç”¨å¸¸æ•°æ¥å¯¹æ¨¡æ¿è¿›è¡Œç‰¹åŒ–ä¹‹åï¼Œè¿™ä¸ªæ¦‚å¿µåº”è¯¥æ²¡æœ‰ç‰¹åˆ«ä¹‹å¤„ã€‚æˆ‘ä»¬çš„ä¾‹å­å€’æ˜¯ä¼šæœ‰æ ‡å‡†åº“æä¾›çš„ policyã€‚ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577237777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}