{"id":101697,"title":"04丨使用DDL创建数据库&数据表时需要注意什么？","content":"<p>DDL是DBMS的核心组件，也是SQL的重要组成部分，DDL的正确性和稳定性是整个SQL运行的重要基础。面对同一个需求，不同的开发人员创建出来的数据库和数据表可能千差万别，那么在设计数据库的时候，究竟什么是好的原则？我们在创建数据表的时候需要注意什么？</p><p>今天的内容，你可以从以下几个角度来学习：</p><ol>\n<li>了解DDL的基础语法，它如何定义数据库和数据表；</li>\n<li>使用DDL定义数据表时，都有哪些约束性；</li>\n<li>使用DDL设计数据库时，都有哪些重要原则。</li>\n</ol><h2>DDL的基础语法及设计工具</h2><p>DDL的英文全称是Data Definition Language，中文是数据定义语言。它定义了数据库的结构和数据表的结构。</p><p>在DDL中，我们常用的功能是增删改，分别对应的命令是CREATE、DROP和ALTER。需要注意的是，在执行DDL的时候，不需要COMMIT，就可以完成执行任务。</p><p>1.<strong>对数据库进行定义</strong></p><pre><code>CREATE DATABASE nba; // 创建一个名为nba的数据库\nDROP DATABASE nba; // 删除一个名为nba的数据库\n</code></pre><p>2.<strong>对数据表进行定义</strong></p><p>创建表结构的语法是这样的：</p><pre><code>CREATE TABLE [table_name](字段名 数据类型，......)\n</code></pre><h3>创建表结构</h3><p>比如我们想创建一个球员表，表名为player，里面有两个字段，一个是player_id，它是int类型，另一个player_name字段是<code>varchar(255)</code>类型。这两个字段都不为空，且player_id是递增的。</p><!-- [[[read_end]]] --><p>那么创建的时候就可以写为：</p><pre><code>CREATE TABLE player  (\n  player_id int(11) NOT NULL AUTO_INCREMENT,\n  player_name varchar(255) NOT NULL\n);\n</code></pre><p>需要注意的是，语句最后以分号（;）作为结束符，最后一个字段的定义结束后没有逗号。数据类型中int(11)代表整数类型，显示长度为11位，括号中的参数11代表的是最大有效显示长度，与类型包含的数值范围大小无关。<code>varchar(255)</code>代表的是最大长度为255的可变字符串类型。<code>NOT NULL</code>表明整个字段不能是空值，是一种数据约束。<code>AUTO_INCREMENT</code>代表主键自动增长。</p><p>实际上，我们通常很少自己写DDL语句，可以使用一些可视化工具来创建和操作数据库和数据表。在这里我推荐使用Navicat，它是一个数据库管理和设计工具，跨平台，支持很多种数据库管理软件，比如MySQL、Oracle、MariaDB等。基本上专栏讲到的数据库软件都可以使用Navicat来管理。</p><p>假如还是针对player这张表，我们想设计以下的字段：</p><p><img src=\"https://static001.geekbang.org/resource/image/49/dd/4925e0c2a1342f4b19d29f0d665afbdd.png?wh=627*162\" alt=\"\"><br>\n其中player_id是数据表player的主键，且自动增长，也就是player_id会从1开始，然后每次加1。player_id、team_id、player_name 这三个字段均不为空，height字段可以为空。</p><p>按照上面的设计需求，我们可以使用Navicat软件进行设计，如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/cc/ef/cca134810dee3f5de5413482103367ef.png?wh=1589*384\" alt=\"\"><br>\n然后，我们还可以对player_name字段进行索引，索引类型为<code>Unique</code>。使用Navicat设置如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/9a/5b/9a806e7be2f61c64a034ee8a422ea55b.png?wh=1266*211\" alt=\"\"><br>\n这样一张player表就通过可视化工具设计好了。我们可以把这张表导出来，可以看看这张表对应的SQL语句是怎样的。方法是在Navicat左侧用右键选中player这张表，然后选择“转储SQL文件”→“仅结构”，这样就可以看到导出的SQL文件了，代码如下：</p><pre><code>DROP TABLE IF EXISTS `player`;\nCREATE TABLE `player`  (\n  `player_id` int(11) NOT NULL AUTO_INCREMENT,\n  `team_id` int(11) NOT NULL,\n  `player_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,\n  `height` float(3, 2) NULL DEFAULT 0.00,\n  PRIMARY KEY (`player_id`) USING BTREE,\n  UNIQUE INDEX `player_name`(`player_name`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;\n</code></pre><p>你能看到整个SQL文件中的DDL处理，首先先删除player表（如果数据库中存在该表的话），然后再创建player表，里面的数据表和字段都使用了反引号，这是为了避免它们的名称与MySQL保留字段相同，对数据表和字段名称都加上了反引号。</p><p>其中player_name字段的字符编码是utf8，排序规则是<code>utf8_general_ci</code>，代表对大小写不敏感，如果设置为<code>utf8_bin</code>，代表对大小写敏感，还有许多其他排序规则这里不进行介绍。</p><p>因为player_id设置为了主键，因此在DDL中使用<code>PRIMARY KEY</code>进行规定，同时索引方法采用BTREE。</p><p>因为我们对player_name字段进行索引，在设置字段索引时，我们可以设置为<code>UNIQUE INDEX</code>（唯一索引），也可以设置为其他索引方式，比如<code>NORMAL INDEX</code>（普通索引），这里我们采用<code>UNIQUE INDEX</code>。唯一索引和普通索引的区别在于它对字段进行了唯一性的约束。在索引方式上，你可以选择<code>BTREE</code>或者<code>HASH</code>，这里采用了<code>BTREE</code>方法进行索引。我会在后面介绍<code>BTREE</code>和<code>HASH</code>索引方式的区别。</p><p>整个数据表的存储规则采用InnoDB。之前我们简单介绍过InnoDB，它是MySQL5.5版本之后默认的存储引擎。同时，我们将字符编码设置为utf8，排序规则为<code>utf8_general_ci</code>，行格式为<code>Dynamic</code>，就可以定义数据表的最后约定了：</p><pre><code>ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;\n</code></pre><p>你能看出可视化工具还是非常方便的，它能直接帮我们将数据库的结构定义转化成SQL语言，方便数据库和数据表结构的导出和导入。不过在使用可视化工具前，你首先需要了解对于DDL的基础语法，至少能清晰地看出来不同字段的定义规则、索引方法，以及主键和外键的定义。</p><h3>修改表结构</h3><p>在创建表结构之后，我们还可以对表结构进行修改，虽然直接使用Navicat可以保证重新导出的数据表就是最新的，但你也有必要了解，如何使用DDL命令来完成表结构的修改。</p><p>1.添加字段，比如我在数据表中添加一个age字段，类型为<code>int(11)</code></p><pre><code>ALTER TABLE player ADD (age int(11));\n</code></pre><p>2.修改字段名，将age字段改成<code>player_age</code></p><pre><code>ALTER TABLE player RENAME COLUMN age to player_age\n</code></pre><p>3.修改字段的数据类型，将<code>player_age</code>的数据类型设置为<code>float(3,1)</code></p><pre><code>ALTER TABLE player MODIFY (player_age float(3,1));\n</code></pre><p>4.删除字段, 删除刚才添加的<code>player_age</code>字段</p><pre><code>ALTER TABLE player DROP COLUMN player_age;\n</code></pre><h2>数据表的常见约束</h2><p>当我们创建数据表的时候，还会对字段进行约束，约束的目的在于保证RDBMS里面数据的准确性和一致性。下面，我们来看下常见的约束有哪些。</p><p>首先是主键约束。</p><p>主键起的作用是唯一标识一条记录，不能重复，不能为空，即UNIQUE+NOT NULL。一个数据表的主键只能有一个。主键可以是一个字段，也可以由多个字段复合组成。在上面的例子中，我们就把player_id设置为了主键。</p><p>其次还有外键约束。</p><p>外键确保了表与表之间引用的完整性。一个表中的外键对应另一张表的主键。外键可以是重复的，也可以为空。比如player_id在player表中是主键，如果你想设置一个球员比分表即player_score，就可以在player_score中设置player_id为外键，关联到player表中。</p><p>除了对键进行约束外，还有字段约束。</p><p>唯一性约束。</p><p>唯一性约束表明了字段在表中的数值是唯一的，即使我们已经有了主键，还可以对其他字段进行唯一性约束。比如我们在player表中给player_name设置唯一性约束，就表明任何两个球员的姓名不能相同。需要注意的是，唯一性约束和普通索引（NORMAL  INDEX）之间是有区别的。唯一性约束相当于创建了一个约束和普通索引，目的是保证字段的正确性，而普通索引只是提升数据检索的速度，并不对字段的唯一性进行约束。</p><p>NOT NULL约束。对字段定义了NOT NULL，即表明该字段不应为空，必须有取值。</p><p>DEFAULT，表明了字段的默认值。如果在插入数据的时候，这个字段没有取值，就设置为默认值。比如我们将身高height字段的取值默认设置为0.00，即<code>DEFAULT 0.00</code>。</p><p>CHECK约束，用来检查特定字段取值范围的有效性，CHECK约束的结果不能为FALSE，比如我们可以对身高height的数值进行CHECK约束，必须≥0，且＜3，即<code>CHECK(height&gt;=0 AND height&lt;3)</code>。</p><h2>设计数据表的原则</h2><p>我们在设计数据表的时候，经常会考虑到各种问题，比如：用户都需要什么数据？需要在数据表中保存哪些数据？哪些数据是经常访问的数据？如何提升检索效率？</p><p>如何保证数据表中数据的正确性，当插入、删除、更新的时候该进行怎样的约束检查？</p><p>如何降低数据表的数据冗余度，保证数据表不会因为用户量的增长而迅速扩张？</p><p>如何让负责数据库维护的人员更方便地使用数据库？</p><p>除此以外，我们使用数据库的应用场景也各不相同，可以说针对不同的情况，设计出来的数据表可能千差万别。那么有没有一种设计原则可以让我们来借鉴呢？这里我整理了一个“<strong>三少一多</strong>”原则：</p><p>1.<strong>数据表的个数越少越好</strong></p><p>RDBMS的核心在于对实体和联系的定义，也就是E-R图（Entity Relationship Diagram），数据表越少，证明实体和联系设计得越简洁，既方便理解又方便操作。</p><p>2.<strong>数据表中的字段个数越少越好</strong></p><p>字段个数越多，数据冗余的可能性越大。设置字段个数少的前提是各个字段相互独立，而不是某个字段的取值可以由其他字段计算出来。当然字段个数少是相对的，我们通常会在数据冗余和检索效率中进行平衡。</p><p>3.<strong>数据表中联合主键的字段个数越少越好</strong></p><p>设置主键是为了确定唯一性，当一个字段无法确定唯一性的时候，就需要采用联合主键的方式（也就是用多个字段来定义一个主键）。联合主键中的字段越多，占用的索引空间越大，不仅会加大理解难度，还会增加运行时间和索引空间，因此联合主键的字段个数越少越好。</p><p>4.<strong>使用主键和外键越多越好</strong></p><p>数据库的设计实际上就是定义各种表，以及各种字段之间的关系。这些关系越多，证明这些实体之间的冗余度越低，利用度越高。这样做的好处在于不仅保证了数据表之间的独立性，还能提升相互之间的关联使用率。</p><p>你应该能看出来“三少一多”原则的核心就是简单可复用。简单指的是用更少的表、更少的字段、更少的联合主键字段来完成数据表的设计。可复用则是通过主键、外键的使用来增强数据表之间的复用率。因为一个主键可以理解是一张表的代表。键设计得越多，证明它们之间的利用率越高。</p><h2>总结</h2><p>今天我们学习了DDL的基础语法，比如如何对数据库和数据库表进行定义，也了解了使用Navicat可视化管理工具来辅助我们完成数据表的设计，省去了手写SQL的工作量。</p><p>在创建数据表的时候，除了对字段名及数据类型进行定义以外，我们考虑最多的就是关于字段的约束，我介绍了7种常见的约束，它们都是数据表设计中会用到的约束：主键、外键、唯一性、NOT NULL、DEFAULT、CHECK约束等。</p><p>当然，了解了如何操作创建数据表之后，你还需要动脑思考，怎样才能设计出一个好的数据表？设计的原则都有哪些？针对这个，我整理出了“三少一多”原则，在实际使用过程中，你需要灵活掌握，因为这个原则并不是绝对的，有时候我们需要牺牲数据的冗余度来换取数据处理的效率。</p><p><img src=\"https://static001.geekbang.org/resource/image/80/c1/80aecedfad59aad06cc08bb9bca721c1.jpg?wh=3296*2313\" alt=\"\"><br>\n我们在创建数据表的时候，会对数据表设置主键、外键和索引。你能说下这三者的作用和区别吗？</p><p>欢迎你在评论区写下你的答案，我会和你一起交流，也欢迎把这篇文章分享给你的朋友或者同事。</p>","comments":[{"had_liked":true,"id":104974,"user_name":"我知道了嗯","can_delete":false,"product_type":"c1","uid":1138471,"ip_address":"","ucode":"9186EC1F32C490","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/27/a6873bc9.jpg","comment_is_top":true,"comment_ctime":1560901699,"is_pvip":false,"replies":[{"id":"38068","content":"是否使用外键确实会有一些争议。我来解释下关于外键的使用：<br>首先，外键本身是为了实现强一致性，所以如果需要正确性&gt;性能的话，还是建议使用外键，它可以让我们在数据库的层面保证数据的完整性和一致性。<br>当然不用外键，你也可以在业务层进行实现。不过，这样做也同样存在一定的风险，因为这样，就会让业务逻辑会与数据具备一定的耦合性。也就是业务逻辑和数据必须同时修改。而且在工作中，业务层可能会经常发生变化。<br><br>当然，很多互联网的公司，尤其是超大型的数据应用场景，大量的插入，更新和删除在外键的约束下会降低性能，同时数据库在水平拆分和分库的情况下，数据库端也做不到执行外键约束。另外，在高并发的情况下，外键的存在也会造成额外的开销。因为每次更新数据，都需要检查另外一张表的数据，也容易造成死锁。<br>所以在这种情况下，尤其是大型项目中后期，可以采用业务层来实现，取消外键提高效率。<br>不过在SQL学习之初，包括在系统最初设计的时候，还是建议你采用规范的数据库设计，也就是采用外键来对数据表进行约束。因为这样可以建立一个强一致性，可靠性高的数据库结构，也不需要在业务层来实现过多的检查。<br>当然在项目后期，业务量增大的情况下，你需要更多考虑到数据库性能问题，可以取消外键的约束，转移到业务层来实现。而且在大型互联网项目中，考虑到分库分表的情况，也会降低外键的使用。<br>不过在SQL学习，以及项目早期，还是建议你使用外键。在项目后期，你可以分析有哪些外键造成了过多的性能消耗。一般遵循2&#47;8原则，会有20%的外键造成80%的资源效率，你可以只把这20%的外键进行开放，采用业务层逻辑来进行实现，当然你需要保证业务层的实现没有错误。不同阶段，考虑的问题不同。当用户和业务量增大的时候，对于大型互联网应用，也会通过减少外键的使用，来减低死锁发生的概率，提高并发处理能力。<br>","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1560912774,"ip_address":"","comment_id":104974,"utype":1}],"discussion_count":14,"race_medal":0,"score":"9.2233732281216e+18","product_id":100029501,"comment_content":"外键多了会有很多维护问题吧？","like_count":278,"discussions":[{"author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"阿斯蒂芬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158526,"discussion_content":"刚在[外键越多越好]处记了笔记，写下了“关于应用层建议尽量不用外键以降低数据库复杂度和提高效率”这类观点与老师建议的冲突和自己的疑惑。没想到评论区就看到了老师的答疑，讲的非常清晰易懂，大赞。\n只是老师提到了外键导致检查另一个表自己可能发生的死锁，这两个现象的原理，目前还想不出来，先mark一下，希望后续能学习知识自己解答。","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1580595953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000012,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/4c/1d5c1263.jpg","nickname":"池建强","note":"","ucode":"0E359BFB3AC329","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52,"discussion_content":"可以多级评论了","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1561019129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1003005,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","nickname":"许童童","note":"","ucode":"4B799C0C6BC678","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1000012,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/4c/1d5c1263.jpg","nickname":"池建强","note":"","ucode":"0E359BFB3AC329","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":84,"discussion_content":"太好了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561087940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":52,"ip_address":""},"score":84,"extra":""},{"author":{"id":1038415,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d8/4f/65abc6f0.jpg","nickname":"KaitoShy","note":"","ucode":"E2E2E9BD3F5048","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1000012,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/4c/1d5c1263.jpg","nickname":"池建强","note":"","ucode":"0E359BFB3AC329","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":320,"discussion_content":"手机上啥时候更新能看到啊","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561447732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":52,"ip_address":""},"score":320,"extra":""},{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"骑行的掌柜J","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1038415,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d8/4f/65abc6f0.jpg","nickname":"KaitoShy","note":"","ucode":"E2E2E9BD3F5048","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5378,"discussion_content":"不知道 电脑版可以看到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566213274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320,"ip_address":""},"score":5378,"extra":""}]},{"author":{"id":1398330,"avatar":"https://static001.geekbang.org/account/avatar/00/15/56/3a/cfea9fb5.jpg","nickname":"姚锦辉","note":"","ucode":"E4795AF6DE9FC2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":739,"discussion_content":"老师很清楚的讲了什么时候需要用外键、为什么要用外键，什么时候不用外键、为什么不用外键 👍","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1562026147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454512,"discussion_content":"是否使用外键确实会有一些争议。我来解释下关于外键的使用：\n首先，外键本身是为了实现强一致性，所以如果需要正确性&amp;gt;性能的话，还是建议使用外键，它可以让我们在数据库的层面保证数据的完整性和一致性。\n当然不用外键，你也可以在业务层进行实现。不过，这样做也同样存在一定的风险，因为这样，就会让业务逻辑会与数据具备一定的耦合性。也就是业务逻辑和数据必须同时修改。而且在工作中，业务层可能会经常发生变化。\n\n当然，很多互联网的公司，尤其是超大型的数据应用场景，大量的插入，更新和删除在外键的约束下会降低性能，同时数据库在水平拆分和分库的情况下，数据库端也做不到执行外键约束。另外，在高并发的情况下，外键的存在也会造成额外的开销。因为每次更新数据，都需要检查另外一张表的数据，也容易造成死锁。\n所以在这种情况下，尤其是大型项目中后期，可以采用业务层来实现，取消外键提高效率。\n不过在SQL学习之初，包括在系统最初设计的时候，还是建议你采用规范的数据库设计，也就是采用外键来对数据表进行约束。因为这样可以建立一个强一致性，可靠性高的数据库结构，也不需要在业务层来实现过多的检查。\n当然在项目后期，业务量增大的情况下，你需要更多考虑到数据库性能问题，可以取消外键的约束，转移到业务层来实现。而且在大型互联网项目中，考虑到分库分表的情况，也会降低外键的使用。\n不过在SQL学习，以及项目早期，还是建议你使用外键。在项目后期，你可以分析有哪些外键造成了过多的性能消耗。一般遵循2/8原则，会有20%的外键造成80%的资源效率，你可以只把这20%的外键进行开放，采用业务层逻辑来进行实现，当然你需要保证业务层的实现没有错误。不同阶段，考虑的问题不同。当用户和业务量增大的时候，对于大型互联网应用，也会通过减少外键的使用，来减低死锁发生的概率，提高并发处理能力。\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1560912774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":3,"child_discussions":[{"author":{"id":2064750,"avatar":"","nickname":"springXu","note":"","ucode":"F5DB0B963C894F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":531780,"discussion_content":"留言区的回复也精彩。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637413876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":454512,"ip_address":""},"score":531780,"extra":"{\"user_type\":1}"},{"author":{"id":2061470,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/74/9e/31872e2c.jpg","nickname":"bahao","note":"","ucode":"3D99BE6BA2F3AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":534546,"discussion_content":"很精彩 解惑了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638221003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":454512,"ip_address":""},"score":534546,"extra":""},{"author":{"id":1155437,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a1/6d/a4ff33bb.jpg","nickname":"Lee","note":"","ucode":"0FF1C4EAF7F98A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":560027,"discussion_content":"c老师好，有个点不明白，高并发下，更新数据，需要检查另外一张表的数据，容易造成死锁，这句怎么理解 谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649128806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":454512,"ip_address":""},"score":560027,"extra":""}]},{"author":{"id":1339724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/71/4c/2cefec07.jpg","nickname":"静水流深","note":"","ucode":"644F05EFBD2E7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217518,"discussion_content":"外键可能会引起全表锁，不加索引的情况下，并发多了就会锁表，导致前端应用超时。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585566872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1400962,"avatar":"https://static001.geekbang.org/account/avatar/00/15/60/82/9a43504b.jpg","nickname":"[耶]友超","note":"","ucode":"890572F77C3670","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1288,"discussion_content":"牛\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562504891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001204,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/f4/5e878cd4.jpg","nickname":"李佳","note":"","ucode":"082E7FCA4AE76D","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":96,"discussion_content":"老师的讲解够透彻","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561097485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106159,"user_name":"梁😜","can_delete":false,"product_type":"c1","uid":1034977,"ip_address":"","ucode":"078473C50B802B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ca/e1/d8537537.jpg","comment_is_top":false,"comment_ctime":1561191892,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"212014589396","product_id":100029501,"comment_content":"在阿里巴巴《JAVA开发手册》中有这么一条<br>“【强制】不得使用外键与级联，一切外键概念必须在应用层解决。”，说明指出<br>“外键与级 联更新适用于单机低并发，不适合分布式、高并发集群;级联更新是强阻塞，存在数据库更新风暴的风 险;外键影响数据库的插入速度。”<br>老师对此怎么看呢？","like_count":50,"discussions":[{"author":{"id":1636568,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM6iagw7ct4ca3niaSEFNicu2wy2KuCibO6eiaRzoRGJb50WTrbkKQib9mTArnTr8jJUazO9O2ibLZNfjjl35cfCHkBPs7N/132","nickname":"Geek_f39659","note":"","ucode":"2206A8C590423C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48110,"discussion_content":"个人理解：专业搞数据库的人通常喜欢一些学术化的东西，而且偏向于来用自己最擅长的技术（数据库）来搞定更多的东西。比如说用外键来保证非常强的数据一致性，理论上说很完美，技术实现上很难，很复杂，但是我们能搞定，很牛。但是使用中一旦牵扯到性能问题，需要分库分表分布式。这层复杂度就变成累赘了，这层添加的复杂度会在系统需要scale out 时给别的工作带来极大的困扰。用外键来做跨表强一致性不是不好，不是不先进，而是当我们面临着更大，更危险和难缠的敌人（大容量，高并发，分布式）的时候。我们需要分清主要矛盾与次要矛盾。不能因为手中有榔头就看什么都像钉子。","likes_number":23,"is_delete":false,"is_hidden":false,"ctime":1573449476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1516796,"avatar":"","nickname":"时间小偷","note":"","ucode":"0EBC79DDD822C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2685,"discussion_content":"老师应该便学术，实际项目经验比较少","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1563858733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484998,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a8/c6/f3d8effb.jpg","nickname":"Hulam","note":"","ucode":"CD6AE1C18F463A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25414,"discussion_content":"我也觉得，实际开发中外键很难维护，个人看法。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1570525243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1234202,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Gf2QrwPGnMxzibPQoVjgoRAFtpO2Sy8QUNqyNRHgwkkZjH9XT1nficRmQAYP40IxgjcM4yaxDicuadiaGCIyyJLWQA/132","nickname":"zs19940317","note":"","ucode":"CC4DE62F16B8D1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":54893,"discussion_content":"看第一条评论的老师回复","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574322810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1110662,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f2/86/d689f77e.jpg","nickname":"Hank_Yan","note":"","ucode":"86899B561C502B","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67846,"discussion_content":"小项目可以用用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575183510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104954,"user_name":"夜路破晓","can_delete":false,"product_type":"c1","uid":1353577,"ip_address":"","ucode":"9B875F94B759B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3hZfficKPGCq2kjFBu9SgaMjibJTEl7iaW1ta6pZNyiaWP8XEsNpunlnsiaOtBpWTXfT5BvRP3qNByml6p9rtBvqewg/132","comment_is_top":false,"comment_ctime":1560882024,"is_pvip":false,"replies":[{"id":"38074","content":"可以这么理解，这么说也比较有趣。在数据库系统中实现他们会采用一些技术方式。比如索引，常用的算法有BTree何Hash索引，是一种数据结构来实现快速检索的目的。","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1560913863,"ip_address":"","comment_id":104954,"utype":1}],"discussion_count":2,"race_medal":0,"score":"164769639272","product_id":100029501,"comment_content":"类比自己，<br>主键就好比是我的身份证；<br>外键就好比我在各种团队组织中的身份，如在单位是员工和管理者、在家是儿子和丈夫、在协会是会员和委员等；<br>索引就好比是我的某些特征或者独树一帜的风格，玉树临风、风流倜傥之类的。","like_count":39,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454501,"discussion_content":"可以这么理解，这么说也比较有趣。在数据库系统中实现他们会采用一些技术方式。比如索引，常用的算法有BTree何Hash索引，是一种数据结构来实现快速检索的目的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560913863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2992790,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/aa/96/791d0f5e.jpg","nickname":"花棉棉","note":"","ucode":"7B5D80A6DFC958","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591176,"discussion_content":"哈哈哈哈可以这么变相夸自己的吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666340929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104960,"user_name":"KaitoShy","can_delete":false,"product_type":"c1","uid":1038415,"ip_address":"","ucode":"E2E2E9BD3F5048","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/4f/65abc6f0.jpg","comment_is_top":false,"comment_ctime":1560898667,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"104640113771","product_id":100029501,"comment_content":"主键：唯一标识一条记录，不能重复，不能为空。<br>外键：确保了表于表之间引用的完整性，可以重复，可以为空<br>索引：提升数据检索速度<br>区别：主键是索引的一种，而且是唯一索引的一种。而并非在是索引，是两表之间的链接<br><br>疑问：1. 关于使用主键和外键越多越好有个疑问，是否涉及到数据库的维护成本，性能等问题呢？而我们现实生活中很少到外键约束，基本上用程序维持这种关系的。<br>2. 设计原则和之前了解的“数据库设计的三大范式”有什么关系呢？个人感觉是从不同纬度讲述了设计的方法，三大范式过于理论化，而老师的更具有实操性。不过还是希望老师，讲解一下。","like_count":25},{"had_liked":false,"id":105024,"user_name":"pepezzzz","can_delete":false,"product_type":"c1","uid":1143169,"ip_address":"","ucode":"414AD2DFD4BA1A","user_header":"https://static001.geekbang.org/account/avatar/00/11/71/81/4e47560f.jpg","comment_is_top":false,"comment_ctime":1560906401,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"91755219617","product_id":100029501,"comment_content":"外键怎么会越多越好呢？ 现在的数模设计都是不用外键，会带来数据归档和数据操作等一系列问题。","like_count":22,"discussions":[{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"杯莫停","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303990,"discussion_content":"大概是照顾初学者，还是按标准数据库实现来做。自己了解就是了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599445796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":true,"id":105177,"user_name":"夜路破晓","can_delete":false,"product_type":"c1","uid":1353577,"ip_address":"","ucode":"9B875F94B759B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3hZfficKPGCq2kjFBu9SgaMjibJTEl7iaW1ta6pZNyiaWP8XEsNpunlnsiaOtBpWTXfT5BvRP3qNByml6p9rtBvqewg/132","comment_is_top":false,"comment_ctime":1560933596,"is_pvip":false,"replies":[{"id":"64075","content":"对的","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577608882,"ip_address":"","comment_id":105177,"utype":1}],"discussion_count":3,"race_medal":0,"score":"83165312220","product_id":100029501,"comment_content":"修改字段数据类型,报错,改写成:<br>ALTER TABLE player MODIFY column player_age float(3,1)<br>","like_count":20,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454584,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577608882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1702255,"avatar":"https://static001.geekbang.org/account/avatar/00/19/f9/6f/9c008ceb.jpg","nickname":"stanleyjobson","note":"","ucode":"4CA84795F59339","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251025,"discussion_content":"这都20年了..还没改....幸好自己试试 ...这放着错误不修订..这是什么态度.","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1588058706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"骑行的掌柜J","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5375,"discussion_content":"就是","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566211147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105080,"user_name":"马以","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1560913011,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"83165291635","product_id":100029501,"comment_content":"老师您好，mysql的编码utf-8是3个字节的，它和我们传统的utf-8编码是不一样的，mysql中不是用了utf-8mb4莱对应4字节的utf-8编码吗？我在项目中一般都会用utf-8mb4这种，请问下这两个在生产环境如何做选择呢？","like_count":20,"discussions":[{"author":{"id":1212044,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/8c/f029535a.jpg","nickname":"hallo128","note":"","ucode":"3921D6E11CFCB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":129,"discussion_content":"池大也是推荐utf-8mb4，没毛病，你说得很对。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1561129415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"杯莫停","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303991,"discussion_content":"utf-8mb4没毛病","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599445858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1463023,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLbchZfeEnshPuUwEsQkn1XbWxjs3rRUpSRUxjW4q7rOcrPvXld0IxEZ1jlpEJdklFeEVERJoOfibg/132","nickname":"qf年间","note":"","ucode":"AA08AC984637EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8980,"discussion_content":"utf8mb4","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568116776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1231713,"avatar":"https://static001.geekbang.org/account/avatar/00/12/cb/61/b62d8a3b.jpg","nickname":"张立华","note":"","ucode":"173B938DD9478A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2456,"discussion_content":"MySQL中用utf8mb4","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563638120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1727,"discussion_content":"没有特殊字符、表情之类的，我觉得 utf-8 就行了。但如果考虑以后的发展，直接使用 utf-8 就行了。这点空间上的占用问题不大","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562849285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115394,"user_name":"nzdx","can_delete":false,"product_type":"c1","uid":1367646,"ip_address":"","ucode":"B52A3A99C9DDF4","user_header":"https://wx.qlogo.cn/mmopen/vi_32/SocvWtb7QIG0ibLf42ESf1BibqWqbPD7jBibS5Jib3UUskUIlQibbQWmBlMlrmVwowSqGXGBRJaKEezaSuvaibxCqHGQ/132","comment_is_top":false,"comment_ctime":1563556097,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"70283032833","product_id":100029501,"comment_content":"MySQL8.0.16版本及以上才支持check，以前的版本解析后就忽略了，不起作用","like_count":17},{"had_liked":false,"id":105636,"user_name":"o灬o","can_delete":false,"product_type":"c1","uid":1226136,"ip_address":"","ucode":"82FF205F75A487","user_header":"https://static001.geekbang.org/account/avatar/00/12/b5/98/7ea28ec7.jpg","comment_is_top":false,"comment_ctime":1561046363,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"65985555803","product_id":100029501,"comment_content":"银行业的数据库基本不用自增长的主键，不利于维护，基本上都是使用唯一标识字段uuid+日期+渠道流水(unique index)来保证数据的唯一性；老师您的这种方法很适合初学者和复习者。","like_count":16,"discussions":[{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"杯莫停","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303995,"discussion_content":"为什么要用自增长是有原因的，这跟数据库底层设计有关。具体原因你可以了解下MySQL的存储引擎实现原理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599446099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1268609,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epbyHPGNLu9sDQOs1V6brMcDwia55pyIlP9n62oO6IYS6kIFDnOSON4ugSeBSy6WhDUnYyJC6vtnHQ/132","nickname":"lcqbug","note":"","ucode":"08FA17F21BCEC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274939,"discussion_content":"数据库中的uuid怎么产生的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590635026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105041,"user_name":"allean","can_delete":false,"product_type":"c1","uid":1051470,"ip_address":"","ucode":"A0D2DB4F219EAA","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/4e/fd946cb2.jpg","comment_is_top":false,"comment_ctime":1560908094,"is_pvip":false,"replies":[{"id":"38059","content":"分情况而定，如果外键或者这些属性字段不需要修改的话，可以使用冗余字段替代，达到通过“空间换时间”的效果<br>所以呢，如果冗余字段可控好维护，可以使用。如果涉及到级联删除&#47;级联更新，冗余字段不可控，建议还是采用外键的方式。<br>","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1560908746,"ip_address":"","comment_id":105041,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44510581054","product_id":100029501,"comment_content":"实际生产环境，更多的是用一个冗余字段取代外键吧？","like_count":11,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454533,"discussion_content":"分情况而定，如果外键或者这些属性字段不需要修改的话，可以使用冗余字段替代，达到通过“空间换时间”的效果\n所以呢，如果冗余字段可控好维护，可以使用。如果涉及到级联删除/级联更新，冗余字段不可控，建议还是采用外键的方式。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560908746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112420,"user_name":"Danpier","can_delete":false,"product_type":"c1","uid":1463474,"ip_address":"","ucode":"11E208FDE34961","user_header":"https://static001.geekbang.org/account/avatar/00/16/54/b2/5ea0b709.jpg","comment_is_top":false,"comment_ctime":1562730142,"is_pvip":false,"replies":[{"id":"63728","content":"HeidiSQL 不错","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577530695,"ip_address":"","comment_id":112420,"utype":1}],"discussion_count":3,"race_medal":0,"score":"40217435806","product_id":100029501,"comment_content":"数据库管理工具墙裂推荐开源免费的 HeidiSQL（支持 MariaDB，MySQL，Microsoft SQL Server，PostgreSQL），运存占用低，很流畅，功能还全，Navicat 年费实在太贵了。","like_count":10,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457726,"discussion_content":"HeidiSQL 不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530943,"discussion_content":"🤣因为收费问题，改用dbeaver了，也是开源免费，支持的数据库类型也很多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637192874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"丁丁历险记","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374368,"discussion_content":"你不用盗版？？？？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621152107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105413,"user_name":"木偶人King","can_delete":false,"product_type":"c1","uid":1028805,"ip_address":"","ucode":"0BDCA51E6F0B76","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/c5/6ae0be56.jpg","comment_is_top":false,"comment_ctime":1560995078,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"40215700742","product_id":100029501,"comment_content":"老师咱们这里<br>ALTER TABLE player RENAME COLUMN age to player_age<br>在mysql中报错。mysql中修改列名属性  用change或者modify 吧。<br>修改表名用rename to.<br>","like_count":9,"discussions":[{"author":{"id":1575435,"avatar":"https://static001.geekbang.org/account/avatar/00/18/0a/0b/4d529732.jpg","nickname":"墨忘","note":"","ucode":"54733987C8641C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356,"discussion_content":"应该是版本问题，我开始用的5.6也是不行，后来改成8.0.16的版本就可以了，老师这里用的是8.0.13吧，至少之前看到他贴出来的版本是这个。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561475084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111183,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f4/8f/06bd9544.jpg","nickname":"AlphaGao","note":"","ucode":"862000415389FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296191,"discussion_content":"alter table player change age player_age int(11);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596466807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1578425,"avatar":"https://static001.geekbang.org/account/avatar/00/18/15/b9/2b7103e7.jpg","nickname":"A.Q","note":"","ucode":"B147761D59E50D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8017,"discussion_content":"使用新版本的mysql  用的是公用sql语句\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567758759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105007,"user_name":"kyle","can_delete":false,"product_type":"c1","uid":1179158,"ip_address":"","ucode":"DB05C0F7D2C472","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/16/0f096793.jpg","comment_is_top":false,"comment_ctime":1560904984,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40215610648","product_id":100029501,"comment_content":"外键越多越好吗？应该是维护麻烦的缘故，我们都没使用外键了！","like_count":9},{"had_liked":false,"id":104961,"user_name":"chengzise","can_delete":false,"product_type":"c1","uid":1006070,"ip_address":"","ucode":"1C27D216359894","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/f6/ed66d1c1.jpg","comment_is_top":false,"comment_ctime":1560899070,"is_pvip":false,"replies":[{"id":"64083","content":"对的","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577609046,"ip_address":"","comment_id":104961,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40215604734","product_id":100029501,"comment_content":"我的理解：<br>主键：确保本表每行数据的唯一性<br>外键：与外表建立连接<br>索引：加快本表数据的查找","like_count":9,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454506,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577609046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127409,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1566701685,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27336505461","product_id":100029501,"comment_content":"     老师讲到navicat:不过其实可能忽略了一个问题；第三方工具的建表其实有时是有Bug的，字符集有时会并非如同设计的的一致；这个实际工作中有碰到过，一切看似OK，show create table就发现问题了。<br>     其实mysql的建表语句应当去用Xshell之类的工具连到数据库创建：否则有时导出来的字符集就会与预期不一致，非原生态自己制作的数据库第三方工具都有类似问题；尤其一旦建表数目到数百张之后还是有一定比例有次问题。sql server的查询分析器是微软自己开发的才没有这问题。","like_count":7,"discussions":[{"author":{"id":1034165,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c7/b5/59b85e9c.jpg","nickname":"闫钟峰","note":"","ucode":"28DE00FE11DB60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266983,"discussion_content":"Mysql的话，可以用mysql workbench吧。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589585211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105223,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1560941817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27330745593","product_id":100029501,"comment_content":"我的理解:<br><br><br>主键:用来在表中确定一条数据，唯一且不可为空;<br><br>外键:用来关联两个表的数据，对删除有约束，可以防止误删除数据(在实际删除时，也需要先删除外键关联的数据才能删除当前表的数据)。外键可以为空。<br><br>索引:用来加快查询的速度，有唯一索引和普通索引。<br><br>区别:<br><br>主键:确定唯一性，增删改的时候都会用到;查询单条记录的时候会用到，不可为空;<br><br>外键:查询和删除，修改，可为空;<br><br>索引:查询，统计数据。","like_count":6},{"had_liked":false,"id":105015,"user_name":"阡陌","can_delete":false,"product_type":"c1","uid":1141254,"ip_address":"","ucode":"58634836C8E03F","user_header":"https://static001.geekbang.org/account/avatar/00/11/6a/06/66831563.jpg","comment_is_top":false,"comment_ctime":1560905736,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27330709512","product_id":100029501,"comment_content":"可是实际工作的时候更多的外键确实增大了维护难度。对于老师说的外键越多越好表示难以理解。老师可否细讲一下","like_count":6},{"had_liked":false,"id":160609,"user_name":"taoist","can_delete":false,"product_type":"c1","uid":1195004,"ip_address":"","ucode":"D70AFE25CD8F10","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/fc/04a75cd0.jpg","comment_is_top":false,"comment_ctime":1575985541,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"23050822021","product_id":100029501,"comment_content":"<br>＃ MariaDB 下执行下面语句<br><br># 创建自增，须设为主键<br>CREATE TABLE player ( player_id int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY, player_name varchar(255) NOT NULL);<br><br>#  重命名字段<br>alter table player change column `age` player_age int(11);<br><br>＃ 修改字段类型<br>alter table player change column `player_age`  player_age float(3,1);<br>","like_count":5},{"had_liked":false,"id":121652,"user_name":"番茄","can_delete":false,"product_type":"c1","uid":1583667,"ip_address":"","ucode":"7354EEB2D8A43D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTICAILuSqtnAfl1zcgRWIULia2nbjzlybTEQJUMT68KPj80BicwQyibAK3Icxp4qwC03LqrtvfX0fbZg/132","comment_is_top":false,"comment_ctime":1565179155,"is_pvip":false,"replies":[{"id":"63568","content":"对，如果是有自增列，这个自增列必须定义为键","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577518453,"ip_address":"","comment_id":121652,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23040015635","product_id":100029501,"comment_content":" 直接写这段，会报错哦<br>create table player (<br>player_id int(11) NOT NULL AUTO_INCREMENT,<br>player_name varchar(255) NOT NULL<br>);<br>报错信息如下，所以是要设置主键吗：<br>Incorrect table definition; there can be only one auto column and it must be defined as a key","like_count":5,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461892,"discussion_content":"对，如果是有自增列，这个自增列必须定义为键","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577518453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1693414,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d6/e6/87234c32.jpg","nickname":"木心云影","note":"","ucode":"5F7244D779AD9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48031,"discussion_content":"按照翻译是这样的，必须只有一个自增列，且这个自增列必须定义为键，你在auto_increment 后面加一个primary key试试看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573442910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105267,"user_name":"风中花","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1560951021,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23035787501","product_id":100029501,"comment_content":"老师好！可不可以说下外键和冗余一个字段的不同！有时候是可以到达一样的效果！我早期使用orcal数据哪会全是外键设计！我记得做数据很麻烦和插入数据也有困惑！那时的感觉！也许就是老师说的数据强一致的作用效果！现在大多数关系关联全是冗余字段！其实我一直没有明白真正的差异和区别！望老师能解惑！谢谢","like_count":5},{"had_liked":false,"id":105109,"user_name":"何学琛","can_delete":false,"product_type":"c1","uid":1462779,"ip_address":"","ucode":"8D4BB137E7D570","user_header":"https://static001.geekbang.org/account/avatar/00/16/51/fb/681d5b2e.jpg","comment_is_top":false,"comment_ctime":1560919120,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18740788304","product_id":100029501,"comment_content":"三少一多，跟实际生产环境差很多呀","like_count":4},{"had_liked":false,"id":105071,"user_name":"Geek_e6159b","can_delete":false,"product_type":"c1","uid":1576240,"ip_address":"","ucode":"0684569F9B114D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLlibCGekRp9bxJ3dGfOWghhNVdF771ejzwqKnicKFBpmGuutwNGF3HGZz7KEEz2mdvPckibReRsVtDw/132","comment_is_top":false,"comment_ctime":1560911276,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18740780460","product_id":100029501,"comment_content":"修改表中字段的名称，alter table player change age player_age int(11);","like_count":4},{"had_liked":false,"id":105021,"user_name":"Eglinux","can_delete":false,"product_type":"c1","uid":1187353,"ip_address":"","ucode":"4AAB9940789442","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/19/17245c59.jpg","comment_is_top":false,"comment_ctime":1560906085,"is_pvip":false,"replies":[{"id":"64080","content":"对","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577609005,"ip_address":"","comment_id":105021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18740775269","product_id":100029501,"comment_content":"ALTER TABLE student DROP COLUMN player_age;<br>这里是 player 吧？","like_count":4,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454525,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577609005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105017,"user_name":"Sam","can_delete":false,"product_type":"c1","uid":1309087,"ip_address":"","ucode":"AE9044BE8BD2B9","user_header":"https://static001.geekbang.org/account/avatar/00/13/f9/9f/515d1686.jpg","comment_is_top":false,"comment_ctime":1560905840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18740775024","product_id":100029501,"comment_content":"主键，在一个表中唯一标记一行数据，作用等效于唯一约束+not null；在MySQL InnoDB引擎，数据表按照主键来组织表数据，形成索引组织表；在Oracle中，也有IOT表，但不显式指定创建索引组织表，那么数据表默认是堆表，主键上另外创建一个主键索引；<br>外键，是指定两表之间的父子关系，子表外键上的数据，必须要在父表存在，在父表和子表的外键相关列上创建索引，会大大提高性能；<br>索引，是提高查询效率的关键手段。索引是跟数据表相互独立的数据库对象，除非是Oracle中的索引组织表或者MySQL中的主键索引。索引的类型有B+树，hash，bitmap，全文索引等等。在表数据更新时需要维护索引结构，对DML效率有影响。","like_count":4},{"had_liked":false,"id":222936,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1590970855,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14475872743","product_id":100029501,"comment_content":"一般在业务层实现外键约束。学院派才喜欢瞎折腾什么外健，触发器，存储过程，还扯出一大堆好的理由出来。<br>而事实上工程的主要复杂度往往来源于变化以及规模。<br>所以各个子母块之间偶合越小越好。存储中间件就安心的做好自己存储的那一块即可。没有必要一个存储中间件天天操着业务如何处理的心<br>","like_count":3},{"had_liked":false,"id":142341,"user_name":"学习爱好者","can_delete":false,"product_type":"c1","uid":1236851,"ip_address":"","ucode":"F00A42CAB9912D","user_header":"","comment_is_top":false,"comment_ctime":1571357689,"is_pvip":false,"replies":[{"id":"59768","content":"《MySQL技术内容：InnoDB存储引擎》<br>《MySQL性能调优与架构设计》<br>《深入浅出MySQL》<br>《MySQL 8 Cookbook》","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1574741281,"ip_address":"","comment_id":142341,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14456259577","product_id":100029501,"comment_content":"老师能给推荐几本关于SQL以及MySQL的书吗？市面上的书感觉讲的太零散，不系统，也不全面，看完之后总觉得缺少了很多知识点。希望老师能回复。","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471074,"discussion_content":"《MySQL技术内容：InnoDB存储引擎》\n《MySQL性能调优与架构设计》\n《深入浅出MySQL》\n《MySQL 8 Cookbook》","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574741281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105667,"user_name":"苦行僧","can_delete":false,"product_type":"c1","uid":1055334,"ip_address":"","ucode":"726024A9A9CF44","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","comment_is_top":false,"comment_ctime":1561072434,"is_pvip":false,"replies":[{"id":"64062","content":"多谢分享","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577608363,"ip_address":"","comment_id":105667,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14445974322","product_id":100029501,"comment_content":"修改大表字段需要谨慎 容易引发表结构写锁","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454763,"discussion_content":"多谢分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577608363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105285,"user_name":"　　星豪","can_delete":false,"product_type":"c1","uid":1545903,"ip_address":"","ucode":"31C3FEA16F7BE8","user_header":"https://static001.geekbang.org/account/avatar/00/17/96/af/da8fd6ed.jpg","comment_is_top":false,"comment_ctime":1560955107,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14445856995","product_id":100029501,"comment_content":"还有，老师问一个小白的问题，我是刚刚学习这方面的知识，平时也就是用mysql练习，今天老师用的Navicat不太会用，我按照上课的讲的做了个表，但是我生成的行格式为Compact，而且无法更改，但是我在mysql上查看，就和老师写的那个行格式是一样的，这个是什么缘故呢？<br>-----Navicat中的------<br>ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;<br>-------mysql上的----<br> &#47;*!50100 STORAGE MEMORY *&#47; ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;","like_count":3},{"had_liked":false,"id":105170,"user_name":"‭","can_delete":false,"product_type":"c1","uid":1584000,"ip_address":"","ucode":"67D0FA087E06B8","user_header":"https://static001.geekbang.org/account/avatar/00/18/2b/80/1f2bc7a8.jpg","comment_is_top":false,"comment_ctime":1560932718,"is_pvip":false,"replies":[{"id":"64076","content":"可以设置为主键","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577608892,"ip_address":"","comment_id":105170,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14445834606","product_id":100029501,"comment_content":"创建表结构那里 是不是没把player_id设为主键","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454581,"discussion_content":"可以设置为主键","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577608892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105168,"user_name":"Andre","can_delete":false,"product_type":"c1","uid":1563047,"ip_address":"","ucode":"2713749A29A4E0","user_header":"https://static001.geekbang.org/account/avatar/00/17/d9/a7/a794afb1.jpg","comment_is_top":false,"comment_ctime":1560932594,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14445834482","product_id":100029501,"comment_content":"陈老师能说一下hash到底是怎么一回事吗？感觉很懵<br>","like_count":3},{"had_liked":false,"id":105096,"user_name":"六维","can_delete":false,"product_type":"c1","uid":1022887,"ip_address":"","ucode":"EB1C15AC06A8DF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/a7/440aff07.jpg","comment_is_top":false,"comment_ctime":1560915364,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14445817252","product_id":100029501,"comment_content":"有一些开发规范里面，是不建议使用数据库中的外键的。这和文中提及的一多的原则有点冲突，怎么取舍呢？","like_count":3},{"had_liked":false,"id":105006,"user_name":"seasickness","can_delete":false,"product_type":"c1","uid":1228943,"ip_address":"","ucode":"6D7CB0A3ED4CD8","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/8f/bcbd3e20.jpg","comment_is_top":false,"comment_ctime":1560904913,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14445806801","product_id":100029501,"comment_content":"外键在应用层面实现 在数据库中只添加索引 会不会更好一点","like_count":3},{"had_liked":false,"id":105000,"user_name":"墨禾","can_delete":false,"product_type":"c1","uid":1216590,"ip_address":"","ucode":"81BA44231AABE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/90/4e/efaea936.jpg","comment_is_top":false,"comment_ctime":1560904616,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14445806504","product_id":100029501,"comment_content":"1、主键：唯一表示一条记录、不能重复、不能为空。<br>2、外键：确保表与表之间引用的完整性，一个表中的外键对应的另一张表的主键，外键可重；保证数据的完整性。<br>3、索引：分为唯一性索引和普通索引，通过唯一性索引可建立非主键的唯一性约束。","like_count":3},{"had_liked":false,"id":221930,"user_name":"lcqbug","can_delete":false,"product_type":"c1","uid":1268609,"ip_address":"","ucode":"08FA17F21BCEC5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epbyHPGNLu9sDQOs1V6brMcDwia55pyIlP9n62oO6IYS6kIFDnOSON4ugSeBSy6WhDUnYyJC6vtnHQ/132","comment_is_top":false,"comment_ctime":1590635335,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10180569927","product_id":100029501,"comment_content":"如果表之间的关系不用外键来表示，表关系靠业务代码逻辑实现，会不会降低数据库压力？","like_count":2},{"had_liked":false,"id":221925,"user_name":"lcqbug","can_delete":false,"product_type":"c1","uid":1268609,"ip_address":"","ucode":"08FA17F21BCEC5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epbyHPGNLu9sDQOs1V6brMcDwia55pyIlP9n62oO6IYS6kIFDnOSON4ugSeBSy6WhDUnYyJC6vtnHQ/132","comment_is_top":false,"comment_ctime":1590634925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10180569517","product_id":100029501,"comment_content":"1.mysql数据库中没有check吧？2.平时听说数据库设计的三范式是老师讲的这几条原则的基础吧？","like_count":2},{"had_liked":false,"id":217017,"user_name":"Geek_fly","can_delete":false,"product_type":"c1","uid":1524509,"ip_address":"","ucode":"6D65B9A70C222F","user_header":"","comment_is_top":false,"comment_ctime":1589385501,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10179320093","product_id":100029501,"comment_content":"老师用的啥数据库，我用 MySQL 按文中创建表和修改表结构，都报错","like_count":2},{"had_liked":false,"id":216909,"user_name":"千山鸟","can_delete":false,"product_type":"c1","uid":1495932,"ip_address":"","ucode":"C516CE85AD66B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erKQqC4tKaCKgJTbHNMFpSShwPwTKPiaEeBIKWs6IticW4jqXeXTBPPbnY6TzCcHInaRTBj0wyrFjaw/132","comment_is_top":false,"comment_ctime":1589366392,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10179300984","product_id":100029501,"comment_content":"我在项目开发中很少使用外键，更多的是增加冗余字段","like_count":2},{"had_liked":false,"id":207545,"user_name":"傻傻的帅","can_delete":false,"product_type":"c1","uid":1668617,"ip_address":"","ucode":"14A795523A682E","user_header":"https://static001.geekbang.org/account/avatar/00/19/76/09/62a10668.jpg","comment_is_top":false,"comment_ctime":1587105368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10177039960","product_id":100029501,"comment_content":"老师，有个问题一直不解，为什么一张表只能有一个主键，是基于什么因素的呢？","like_count":2},{"had_liked":false,"id":165342,"user_name":"奋斗中的小神仙","can_delete":false,"product_type":"c1","uid":1242927,"ip_address":"","ucode":"C416EC7B8141E7","user_header":"https://static001.geekbang.org/account/avatar/00/12/f7/2f/da7f1a62.jpg","comment_is_top":false,"comment_ctime":1577203230,"is_pvip":false,"replies":[{"id":"63758","content":"对","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577531284,"ip_address":"","comment_id":165342,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10167137822","product_id":100029501,"comment_content":"老师您好，这里写的是六个约束吧","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479130,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577531284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149990,"user_name":"木心云影","can_delete":false,"product_type":"c1","uid":1693414,"ip_address":"","ucode":"5F7244D779AD9F","user_header":"https://static001.geekbang.org/account/avatar/00/19/d6/e6/87234c32.jpg","comment_is_top":false,"comment_ctime":1573441961,"is_pvip":false,"replies":[{"id":"59812","content":"哈哈 多谢云影同学认可","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1574756547,"ip_address":"","comment_id":149990,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10163376553","product_id":100029501,"comment_content":"首先，这门课程真心不错，非常感谢作者的用心。打个比方：语句最后以分号（;）作为结束符，最后一个字段的定义结束后没有逗号，这样一段，虽然很细微但是新手很容易犯错的问题，作者注意到且不厌其烦地指出来，足以证明作者的用心。另外，前端页面的划线功能，只有一种颜色，如果能够更加完善一下，比如可以改变线条颜色、改变粗细就够了。当然这有点吹毛求疵，不过既然是产品嘛，肯定是越完美越好。<br>作者留下的问题：<br>主键：保证每条记录的唯一性；<br>外键：建立表与表之间的关联性；<br>索引：提高查询效率。不过据说一个表索引也不是越多越好，要有一个度。","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474032,"discussion_content":"哈哈 多谢云影同学认可","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574756547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119049,"user_name":"雪飞鸿","can_delete":false,"product_type":"c1","uid":1012325,"ip_address":"","ucode":"65D7B030828809","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/65/68bd8177.jpg","comment_is_top":false,"comment_ctime":1564493762,"is_pvip":true,"replies":[{"id":"63616","content":"嗯 文中列的是6种","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577524701,"ip_address":"","comment_id":119049,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10154428354","product_id":100029501,"comment_content":"文中说有7种约束，只看到了主键、外键、惟一、Not Null、Default、Check六种约束。","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460728,"discussion_content":"嗯 文中列的是6种","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577524701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107793,"user_name":"雨先生的晴天","can_delete":false,"product_type":"c1","uid":1246015,"ip_address":"","ucode":"71850548322A1C","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/3f/09308258.jpg","comment_is_top":false,"comment_ctime":1561610428,"is_pvip":false,"replies":[{"id":"39179","content":"对的，同时主键在一张表中不能有多个，即可以没有主键，或者只有一个主键。一个主键可以是一个或多个字段组成的。","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561687176,"ip_address":"","comment_id":107793,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151545020","product_id":100029501,"comment_content":"主键：UNIQUE+NOT NUL<br>外键：确保表与表之间引用完整性，可以重复，可以为空。一个表中的外键对应另一张表的主键<br>检索：只是为了提高查询速度，对于字段没有唯一性的约束<br>","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455675,"discussion_content":"对的，同时主键在一张表中不能有多个，即可以没有主键，或者只有一个主键。一个主键可以是一个或多个字段组成的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561687176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107473,"user_name":"满怀","can_delete":false,"product_type":"c1","uid":1483113,"ip_address":"","ucode":"EFAC662A37D684","user_header":"https://static001.geekbang.org/account/avatar/00/16/a1/69/0ddda908.jpg","comment_is_top":false,"comment_ctime":1561541619,"is_pvip":false,"replies":[{"id":"63997","content":"不错的总结","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607213,"ip_address":"","comment_id":107473,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151476211","product_id":100029501,"comment_content":"主键：主键是一张表中唯一表示每一个行记录的属性<br>外键：外键是当子表中存在父表中的主键字段时，将子表中的字段设置为父表的外键，用于实现参照完整性<br>索引：类似书中的书签，索引就是表中的&quot;书签&quot;，根据索引字段存储记录信息，从而利用索引的快速查找功能，提高我们的SQL语句执行效率","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455522,"discussion_content":"不错的总结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106594,"user_name":"victor666","can_delete":false,"product_type":"c1","uid":1073136,"ip_address":"","ucode":"20C9BE10E07D55","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/f0/a73607b3.jpg","comment_is_top":false,"comment_ctime":1561351926,"is_pvip":false,"replies":[{"id":"64021","content":"多谢分享","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607666,"ip_address":"","comment_id":106594,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151286518","product_id":100029501,"comment_content":"工程上不是少使用外键 应该是避免使用数据库层面的物理外键 使用逻辑外键来保存表的关系","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455148,"discussion_content":"多谢分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106116,"user_name":"supermouse","can_delete":false,"product_type":"c1","uid":1321860,"ip_address":"","ucode":"88072D5F881827","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/84/07f0c0d6.jpg","comment_is_top":false,"comment_ctime":1561180117,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10151114709","product_id":100029501,"comment_content":"主键是表中的记录的唯一标识，不能重复，不能为空，用来区分同一张表中不同的记录。一张表的外键是另一张表的主键，起到关联的作用，同时可以降低数据的冗余度，提高数据利用率。索引是对数据库表中一列或多列的值进行排序的一种结构，使用索引可快速访问数据库表中的特定信息，索引的一个主要目的就是加快检索表中数据。对于经常用来作为查询条件的字段，应该建立索引。但是对着数据量的增加，索引占用的空间也会越来越大","like_count":2},{"had_liked":false,"id":105994,"user_name":"野马","can_delete":false,"product_type":"c1","uid":1065176,"ip_address":"","ucode":"CC58CBF541D34A","user_header":"https://static001.geekbang.org/account/avatar/00/10/40/d8/69722032.jpg","comment_is_top":false,"comment_ctime":1561122369,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10151056961","product_id":100029501,"comment_content":"1.作用：【主键】→元首<br>              【外键】→辅佐<br>              【索引】→门牌号<br><br>2.区别：【主键】→保证数据唯一性<br>              【外键】→保证数据完整性<br>              【索引】→提升查数据速度","like_count":2},{"had_liked":false,"id":105310,"user_name":"Yt","can_delete":false,"product_type":"c1","uid":1508210,"ip_address":"","ucode":"E094E3666A1440","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Pk7HVX99cBlSOicLoa8KN8yCKx1pWIyYuy7zxL2ibXicYRFq2ic7LMYiaXMajuQNRZzL4QyuJX6ToRoficsBPlT3Meog/132","comment_is_top":false,"comment_ctime":1560961412,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10150896004","product_id":100029501,"comment_content":"主键：整张表的代表，需要具有唯一性，正确性<br>外键：一张表的援 交手段，外键使用率越多，越容易保持好一致性，但是如果一张表里全部都是外键，不就成了混子表了吗？为什么关系越多，反而越能保证数据表的独立性。<br>索引：BTREE、HASH只听过名字，不太了解这两个索引方式的区别；UNIQUE 索引是普通索引上再加上唯一性约束，为确保准确性。此处有疑问，索引不应该是在数据库创建好，数据放到里面之后，在使用时索引数据，为什么索引这个后续步骤能干涉到数据库结构的建立","like_count":2},{"had_liked":false,"id":105256,"user_name":"Hoo-Ah","can_delete":false,"product_type":"c1","uid":1306913,"ip_address":"","ucode":"823093A6C7DEE7","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/21/52e8267b.jpg","comment_is_top":false,"comment_ctime":1560948561,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10150883153","product_id":100029501,"comment_content":"一张表只能有一个主键，或者是联合主键用来确保主键的唯一性；外键使用来关联其他表结构的，比如一张表使用外键关联另一张表的主键用来显示表之间的关联关系，但是外键也有缺点就是在大并发的场景下对数据库频繁的增删查改会降低效率；索引是为了提高数据的查询效率，就好比一本书的目录。<br>mysql的索引使用的B+tree，最后一层之间的数据使用链表可以减少回表操作提高查询效率。","like_count":2},{"had_liked":false,"id":105134,"user_name":"Geek_010040","can_delete":false,"product_type":"c1","uid":1584146,"ip_address":"","ucode":"A786E8EEB69005","user_header":"https://static001.geekbang.org/","comment_is_top":false,"comment_ctime":1560926725,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10150861317","product_id":100029501,"comment_content":"新项目如果上MySQL，用外键的应该不多吧，大都靠程序维持数据关系。可能Oracle和SqlServer中的多一点，另外存储过程同理呀","like_count":2},{"had_liked":false,"id":105128,"user_name":"New Youth","can_delete":false,"product_type":"c1","uid":1476600,"ip_address":"","ucode":"B1B5382F651DF3","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/f8/eb29ac28.jpg","comment_is_top":false,"comment_ctime":1560925748,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10150860340","product_id":100029501,"comment_content":"老师  你用的mysql是不是新版的 我执行改变字段名那里就报错了 .....","like_count":2},{"had_liked":false,"id":105066,"user_name":"江南皮革厂研发中心保安队长","can_delete":false,"product_type":"c1","uid":1099584,"ip_address":"","ucode":"231419643A5CC5","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/40/66a203cd.jpg","comment_is_top":false,"comment_ctime":1560910502,"is_pvip":false,"replies":[{"id":"38079","content":"这里用的是反引号 ，对于表名、字段、数据库名可以加上反引号 ` 来保证语句的执行度<br>","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1560915327,"ip_address":"","comment_id":105066,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10150845094","product_id":100029501,"comment_content":"老师。文章里create table的sql语句字段的单引号是普通的单引号吗？我看您写的像是反引号` `","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454545,"discussion_content":"这里用的是反引号 ，对于表名、字段、数据库名可以加上反引号 ` 来保证语句的执行度\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560915327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105027,"user_name":"嗨呀、","can_delete":false,"product_type":"c1","uid":1571307,"ip_address":"","ucode":"AC40442DCE1050","user_header":"https://static001.geekbang.org/account/avatar/00/17/f9/eb/90f911ee.jpg","comment_is_top":false,"comment_ctime":1560906629,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10150841221","product_id":100029501,"comment_content":"数据定义的代码创建一个nba数据库注释应该错了","like_count":2},{"had_liked":false,"id":104998,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1560904595,"is_pvip":false,"replies":[{"id":"64082","content":"各有利弊，互联网公司用的外键少","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577609040,"ip_address":"","comment_id":104998,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10150839187","product_id":100029501,"comment_content":"平时好像比较少用外键, 如果外键比较多会不会增加表之间的耦合度, 提高理解和维护的成本?","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454520,"discussion_content":"各有利弊，互联网公司用的外键少","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577609040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232202,"user_name":"gtp","can_delete":false,"product_type":"c1","uid":1372089,"ip_address":"","ucode":"12E21307343B3A","user_header":"https://static001.geekbang.org/account/avatar/00/14/ef/b9/c0c12bea.jpg","comment_is_top":false,"comment_ctime":1593917988,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5888885284","product_id":100029501,"comment_content":"<br>ALTER TABLE player MODIFY (player_age float(3,1)); 修改为 ALTER TABLE player MODIFY player_age float(3,1);","like_count":1},{"had_liked":false,"id":201839,"user_name":"小熊","can_delete":false,"product_type":"c1","uid":1634686,"ip_address":"","ucode":"9E4CD1DA292076","user_header":"https://static001.geekbang.org/account/avatar/00/18/f1/7e/8925aba5.jpg","comment_is_top":false,"comment_ctime":1585843613,"is_pvip":false,"replies":[{"id":"75462","content":"加油","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1585875006,"ip_address":"","comment_id":201839,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880810909","product_id":100029501,"comment_content":"学习了","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490435,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585875006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193905,"user_name":"宇过添情","can_delete":false,"product_type":"c1","uid":1878956,"ip_address":"","ucode":"59DC854F0492CB","user_header":"","comment_is_top":false,"comment_ctime":1584978886,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879946182","product_id":100029501,"comment_content":"mysql和oracle中，采用不同的编码格式，比如utf～8或者GBK，对应的中文长度是不一样的。不同的编码对应不同的中文长度能整理说说吗？谢谢。","like_count":1},{"had_liked":false,"id":193880,"user_name":"luck_tou","can_delete":false,"product_type":"c1","uid":1904497,"ip_address":"","ucode":"E6BACBB08C504E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKkThulMFj6MiaY8qlsmHWrlIzo1SEhwDjwpgLP2bhLYETx1f0DepRDsBdssd5dFKN35zzFUYnia1Q/132","comment_is_top":false,"comment_ctime":1584977338,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5879944634","product_id":100029501,"comment_content":"第一眼看到老师说建议使用外键时候疑惑了一下，也看过关于开发手册上禁止外键的条款，不过仔细想想还是看使用场景找最合适的方案，不要被自己的经验捆绑","like_count":2},{"had_liked":false,"id":191317,"user_name":"Cookie123456","can_delete":false,"product_type":"c1","uid":1913261,"ip_address":"","ucode":"F9EF63C38F8976","user_header":"","comment_is_top":false,"comment_ctime":1584762721,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879730017","product_id":100029501,"comment_content":"您好，我在navicat里使用了alter table user modify(start_date varchar(20))语句，start_date是datetime类型的，但是运行的时候显示我有语法错误，我的Mysql是5.6.6版本的，我想问一下，是有什么问题吗？还有就是用这些命令修改mysql里的字段的类型是有什么规则吗？","like_count":1},{"had_liked":false,"id":190367,"user_name":"稚者","can_delete":false,"product_type":"c1","uid":1128204,"ip_address":"","ucode":"D824C0B263B26A","user_header":"https://static001.geekbang.org/account/avatar/00/11/37/0c/c623649c.jpg","comment_is_top":false,"comment_ctime":1584633289,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5879600585","product_id":100029501,"comment_content":"有件事我一直在好奇，id int primary key auto_increment，自增长，如果增长超过了Integer.MAX_VALUE会发生什么？","like_count":1,"discussions":[{"author":{"id":1904497,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKkThulMFj6MiaY8qlsmHWrlIzo1SEhwDjwpgLP2bhLYETx1f0DepRDsBdssd5dFKN35zzFUYnia1Q/132","nickname":"luck_tou","note":"","ucode":"E6BACBB08C504E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212574,"discussion_content":"如果你定义的id应该是循环归零，然后报唯一性冲突错；如果你mysql没有定义主键则他自己使用rowid会循环归零，而后重新自增开始覆盖你原先的行数据（很可怕）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584977549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185311,"user_name":"jacksnow","can_delete":false,"product_type":"c1","uid":1264732,"ip_address":"","ucode":"49693079973EEF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJafX5kNYJKpD9czE7pjYJtDWnuHeWQLtkfyAtPYUicbiafAUBvUqSnKTM3bahib1wURcRg2miaOFGnpQ/132","comment_is_top":false,"comment_ctime":1583559021,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878526317","product_id":100029501,"comment_content":"在mysql中check约束无效","like_count":1},{"had_liked":false,"id":182574,"user_name":"grey927","can_delete":false,"product_type":"c1","uid":1202782,"ip_address":"","ucode":"833E02ED835B4A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/5e/a897cb0d.jpg","comment_is_top":false,"comment_ctime":1582810958,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5877778254","product_id":100029501,"comment_content":"请问陈老师，行格式为Dynamic， 这个Dynamic意思是？","like_count":1},{"had_liked":false,"id":177711,"user_name":"😳","can_delete":false,"product_type":"c1","uid":1452857,"ip_address":"","ucode":"9AFB87EF308539","user_header":"https://static001.geekbang.org/account/avatar/00/16/2b/39/19041d78.jpg","comment_is_top":false,"comment_ctime":1581478133,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5876445429","product_id":100029501,"comment_content":"主键：惟一的，不能重复<br>外键：与别的表相关联<br>索引：提高数据检索的效率","like_count":1},{"had_liked":false,"id":173659,"user_name":"人の初","can_delete":false,"product_type":"c1","uid":1566409,"ip_address":"","ucode":"18CD87305CB752","user_header":"https://static001.geekbang.org/account/avatar/00/17/e6/c9/bb06c947.jpg","comment_is_top":false,"comment_ctime":1579654829,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5874622125","product_id":100029501,"comment_content":"请问老师，您推荐的《深入浅出MySQL》适合入门学员吗？是哪个版本？我查到太多版本了，谢谢","like_count":1},{"had_liked":false,"id":161582,"user_name":"高泽林","can_delete":false,"product_type":"c1","uid":1764725,"ip_address":"","ucode":"DE54EBFFF11265","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/AGicQgKibwja1SxkQ7oXQE8hYH7yCpiaicNHw3qZRuNB81aVDOQm9P1zd5F75Jbtv66G15D6ZjbbqfnoETR4321Zdw/132","comment_is_top":false,"comment_ctime":1576238818,"is_pvip":false,"replies":[{"id":"62583","content":"外键约束这个，在实际工作中有时候可以放开，前面的三少用的更多一些","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577070923,"ip_address":"","comment_id":161582,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5871206114","product_id":100029501,"comment_content":"三少一多！！！","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477771,"discussion_content":"外键约束这个，在实际工作中有时候可以放开，前面的三少用的更多一些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577070923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158797,"user_name":"Geek_d3a509","can_delete":false,"product_type":"c1","uid":1765573,"ip_address":"","ucode":"8A40A85D4D1A73","user_header":"","comment_is_top":false,"comment_ctime":1575453542,"is_pvip":false,"replies":[{"id":"62635","content":"正确，总结的不错","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577079316,"ip_address":"","comment_id":158797,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870420838","product_id":100029501,"comment_content":"主键：唯一标识一条记录，不能为空，不能重复。<br>外键：是用于建立和加强两个表数据之间的一列或多列，允许为空，可以重复。<br>索引：为了能够快速找到具有特定值的记录。<br>区别——主键只能有一个，一个表可以有多个外键，一个表可以有多个唯一索引","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476850,"discussion_content":"正确，总结的不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577079316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149475,"user_name":"沈克","can_delete":false,"product_type":"c1","uid":1110946,"ip_address":"","ucode":"7AED88C12FD672","user_header":"https://static001.geekbang.org/account/avatar/00/10/f3/a2/70ed46ae.jpg","comment_is_top":false,"comment_ctime":1573228660,"is_pvip":false,"discussion_count":2,"race_medal":1,"score":"5868195956","product_id":100029501,"comment_content":"老师好 “数据类型中 int(11) 代表整数类型，显示长度为 11 位，括号中的参数 11 代表的是最大有效显示长度，与类型包含的数值范围大小无关” 这里不太能理解，我自己实验了int(2),发现可以显示超过2位。<br>mysql&gt; desc player;<br>+-------------+--------------+------+-----+---------+-------+<br>| Field       | Type         | Null | Key | Default | Extra |<br>+-------------+--------------+------+-----+---------+-------+<br>| player_id   | int(2)       | NO   |     | NULL    |       |<br>| player_name | varchar(255) | NO   |     | NULL    |       |<br>+-------------+--------------+------+-----+---------+-------+<br>mysql&gt; SELECT * FROM player;<br>+-----------+-------------+<br>| player_id | player_name |<br>+-----------+-------------+<br>|     10000 | test        |<br>+-----------+-------------+","like_count":1,"discussions":[{"author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"阿斯蒂芬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158844,"discussion_content":"int(n)中的n表示显示的长度（也可以理解为宽度），在创建或修改表的时候如果设置了zerofill属性，可以显式查看其效果。\n拿老师的这个例子，列出关键部分， ... player_id int(2) zerofill ...，这样创建后的表，当player_id的值不足2位显示，即player_id<10的时候，查询结果展示会将不够两位显示宽度的值前面填充一位0，以达到至少2位显示长度的效果。比如player_id=1，实际展示的是「01」，以此类推。但是注意当值超过2位的时候，并不代表显示会被截取，比如当player_id=100的时候，显示是「100」已经大于设置的2位显示长度，因此我认为这里int(n)中的n表示的应该是最小的显示长度而不是最大。（此处质疑老师的表述，欢迎探讨）\n为什么要提供这样的设计，我猜想可能有些系统的需求是要求显示位数对齐的，在数据库层面直接提供对齐也是一种便捷。（未考证）\n说回int类型的数值范围，一般来讲int类型是4个字节32位，考虑符号的前提下即-2147483648～2147483647，数一数显示位正好是10位（负数11位），因此常用的写法int(11)是比较容易理解的。\n当默认没有设置zerofill的时候，显示并不会进行补0，这时候个人认为这个显示长度并没有什么实际有意义的约束效果。\n综上，结合varchar(255)表示最多255个字符的定义，我觉得mysql这种数据类型 type(n)的表示方式，大体可以理解为：\n1. 当数据类型是定长（指的是数据取值范围）如int/short，其实际占用的存储空间是固定的，n只表示在开启了zerofill的情景下至少显示的长度，如不足n则左侧补足；\n2. 当数据类型是变长，如varchar，则n表示的意义是该列值最多可以达到的存储空间的长度（当然这个存储空间是跟变长的类型挂钩的），此时n的意义与显示长度无关。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1580633281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1110946,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f3/a2/70ed46ae.jpg","nickname":"沈克","note":"","ucode":"7AED88C12FD672","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"阿斯蒂芬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159839,"discussion_content":"👍🏿 很详细","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580736327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":158844,"ip_address":""},"score":159839,"extra":""}]}]},{"had_liked":false,"id":148265,"user_name":"王加武","can_delete":false,"product_type":"c1","uid":1665471,"ip_address":"","ucode":"DDCFE578C6C428","user_header":"https://static001.geekbang.org/account/avatar/00/19/69/bf/50a824a4.jpg","comment_is_top":false,"comment_ctime":1572965841,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5867933137","product_id":100029501,"comment_content":"主键指的是一张数据表的中的唯一表示，被设为主键的字段不可为空，不可重复<br>外键建立了表与表之间的联系，一张数据表中的外键是另一张表中的主键，这样他们才能建立起联系，外键是可以重复的，也可以为空。<br>索引：是对数据库或者是数据表中的值进行排序的一种结构，索引使得数据的查询效率提高，有利于性能的提升","like_count":1},{"had_liked":false,"id":145723,"user_name":"橙子冰","can_delete":false,"product_type":"c1","uid":1353766,"ip_address":"","ucode":"9209E86F324172","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oPPib2eqibMhUlnmFY7fLWuxSJibrBDrQUNZDTr7kSDNpFAeeNm8QibjO149R6Ddo6Lp8qtticGgstph5SKA2hcG8EQ/132","comment_is_top":false,"comment_ctime":1572352576,"is_pvip":false,"replies":[{"id":"59756","content":"https:&#47;&#47;github.com&#47;cystanford&#47;sql_nba_data 这里","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1574739841,"ip_address":"","comment_id":145723,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867319872","product_id":100029501,"comment_content":"老师，数据库在哪里下载","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472546,"discussion_content":"https://github.com/cystanford/sql_nba_data 这里","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574739841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135887,"user_name":"半夏","can_delete":false,"product_type":"c1","uid":1461619,"ip_address":"","ucode":"F5DE4A11120F5F","user_header":"https://static001.geekbang.org/account/avatar/00/16/4d/73/17d3d431.jpg","comment_is_top":false,"comment_ctime":1569292746,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5864260042","product_id":100029501,"comment_content":"老师,修改字段名的时候,是不是不能修改主键字段?","like_count":1},{"had_liked":false,"id":135875,"user_name":"Cola_","can_delete":false,"product_type":"c1","uid":1264718,"ip_address":"","ucode":"99996D04CA4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/4c/4e/91267714.jpg","comment_is_top":false,"comment_ctime":1569291424,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5864258720","product_id":100029501,"comment_content":"主键：用来唯一标识，不能为空，不能重复<br>外键：用来关联表与表之间的关系，可以重复，可以为空<br>索引：为了提高检索速度<br>建立数据表的几点建议：<br>1.表少一点<br>2.字段少一点<br>3.联合主键少一点<br>4.外键少一点","like_count":1},{"had_liked":false,"id":129141,"user_name":"嗯丶屌丝","can_delete":false,"product_type":"c1","uid":1127638,"ip_address":"","ucode":"8ACF77B1124FF5","user_header":"https://static001.geekbang.org/account/avatar/00/11/34/d6/cc060875.jpg","comment_is_top":false,"comment_ctime":1567048815,"is_pvip":false,"replies":[{"id":"53396","content":"NBA球员数据：https:&#47;&#47;github.com&#47;cystanford&#47;sql_nba_data<br>王者荣耀英雄数据：https:&#47;&#47;github.com&#47;cystanford&#47;sql_heros_data","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1570432979,"ip_address":"","comment_id":129141,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862016111","product_id":100029501,"comment_content":"您好 sql 文件在那？","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465300,"discussion_content":"NBA球员数据：https://github.com/cystanford/sql_nba_data\n王者荣耀英雄数据：https://github.com/cystanford/sql_heros_data","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570432979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129130,"user_name":"puhan","can_delete":false,"product_type":"c1","uid":1529235,"ip_address":"","ucode":"50746E9A4990A8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/icniaGmw8xiboxib5xa1RSNvRDX1yVQTrcSqVOlJPibt0A6SM7EnFTHa6ib0YQKSUPqtx7wVksxZZXK4huUpCqrKjT1w/132","comment_is_top":false,"comment_ctime":1567046465,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5862013761","product_id":100029501,"comment_content":"主键：唯一标识一条记录，不能重复<br>外键：数据表之间的相关性<br>索引：提升检索速度<br>三者区别：外键类似于一个人是另一个人的同学；索引类似于一个人的特性；主键类似于一个人的身份证ID","like_count":1},{"had_liked":false,"id":128196,"user_name":"Serendipity","can_delete":false,"product_type":"c1","uid":1370694,"ip_address":"","ucode":"E9C7B39BD8DCCD","user_header":"https://static001.geekbang.org/account/avatar/00/14/ea/46/9c9808a9.jpg","comment_is_top":false,"comment_ctime":1566861701,"is_pvip":false,"replies":[{"id":"62749","content":"ALTER TABLE player MODIFY player_age FLOAT(3,1)<br>MODIFY之后 不需要()<br>另外check下player表中是否有player_age字段","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577088714,"ip_address":"","comment_id":128196,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5861828997","product_id":100029501,"comment_content":"MySQL 版本：8.0.16<br><br>运行 ALTER TABLE player MODIFY (player_age FLOAT(3,1)) 报错：1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;(player_age FLOAT(3,1))&#39; at line 1, Time: 0.000000s<br><br>原因是什么呢？？<br>","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464837,"discussion_content":"ALTER TABLE player MODIFY player_age FLOAT(3,1)\nMODIFY之后 不需要()\n另外check下player表中是否有player_age字段","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577088714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123851,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1168774,"ip_address":"","ucode":"9A5B148A7E453A","user_header":"https://static001.geekbang.org/account/avatar/00/11/d5/86/5b1ff7d9.jpg","comment_is_top":false,"comment_ctime":1565771939,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5860739235","product_id":100029501,"comment_content":"Do not repeat yourself !","like_count":1},{"had_liked":false,"id":114969,"user_name":"邢雪","can_delete":false,"product_type":"c1","uid":1391268,"ip_address":"","ucode":"F161EC12F500EB","user_header":"https://static001.geekbang.org/account/avatar/00/15/3a/a4/9d78ac16.jpg","comment_is_top":false,"comment_ctime":1563439539,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5858406835","product_id":100029501,"comment_content":"主键：唯一标识一条记录的作用<br>外键：确保了表与表之间的完整性<br>索引：1）通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性<br>          2）大大加快数据的检索速度       <br>区别：主键：只能有一个<br>          外键：一个表可以有多个外键<br>          索引：一个表可以有多个唯一索引","like_count":1},{"had_liked":false,"id":114914,"user_name":"邢雪","can_delete":false,"product_type":"c1","uid":1391268,"ip_address":"","ucode":"F161EC12F500EB","user_header":"https://static001.geekbang.org/account/avatar/00/15/3a/a4/9d78ac16.jpg","comment_is_top":false,"comment_ctime":1563432276,"is_pvip":false,"replies":[{"id":"63890","content":"MODIFY 后面的（）去掉试试","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577603514,"ip_address":"","comment_id":114914,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5858399572","product_id":100029501,"comment_content":"老师你好，我这个一直报错，百度了我也不知道什么原因<br>alter table player modify(age float(3,1));<br>报错：<br>1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;(age float(3,1))&#39; at line 6","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458883,"discussion_content":"MODIFY 后面的（）去掉试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577603514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"骑行的掌柜J","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5377,"discussion_content":"上面有个朋友回答了 应该写成：\nalter table player MODIFY COLUMN player_age float(3,1); \n才行， 老师打掉了一个 COLUMN 单词。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566211352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1321088,"avatar":"https://static001.geekbang.org/account/avatar/00/14/28/80/78d18d39.jpg","nickname":"小萝莉的怪蜀黍","note":"","ucode":"DF7AE7B48F8686","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2801,"discussion_content":"去掉modify 后面的挂号，执行alter table player modify age float(3,1)，显示正常","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563944559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113890,"user_name":"杨靖雯🍒","can_delete":false,"product_type":"c1","uid":1570711,"ip_address":"","ucode":"A81797BB784956","user_header":"https://static001.geekbang.org/account/avatar/00/17/f7/97/2d62cfba.jpg","comment_is_top":false,"comment_ctime":1563180222,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5858147518","product_id":100029501,"comment_content":"请问老师和大家:下载安装了mysql,目前可以用cmd打开运行，如何下载老师给的王者荣耀数据表进行练习呢😂😂研究了很久未果，求好心人指点😂","like_count":1,"discussions":[{"author":{"id":1693414,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d6/e6/87234c32.jpg","nickname":"木心云影","note":"","ucode":"5F7244D779AD9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48034,"discussion_content":"方法一：下载老师说的那个软件，然后软件中有一个导入表的选项；\n方法二：将老师的表用记事本打开，复制下来，运行mysql，复制到mysql中即可。\n如果不清楚可以在网上找个视频看看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573443147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112875,"user_name":"小年","can_delete":false,"product_type":"c1","uid":1239992,"ip_address":"","ucode":"BDEF5315847236","user_header":"https://static001.geekbang.org/account/avatar/00/12/eb/b8/22065888.jpg","comment_is_top":false,"comment_ctime":1562835865,"is_pvip":false,"replies":[{"id":"41020","content":"更新到9月中下旬。","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1562849235,"ip_address":"","comment_id":112875,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857803161","product_id":100029501,"comment_content":"刚来，还不晚，问一下老师，这个专栏大概更新到几月份会结束呢？9月份前可以更新完吗","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457938,"discussion_content":"更新到9月中下旬。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562849235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112569,"user_name":"Simple life","can_delete":false,"product_type":"c1","uid":1571460,"ip_address":"","ucode":"1902D7F72FB43F","user_header":"https://static001.geekbang.org/account/avatar/00/17/fa/84/f01d203a.jpg","comment_is_top":false,"comment_ctime":1562762287,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857729583","product_id":100029501,"comment_content":"表设计，你少说了范式，设计表要至少要满足第三范式","like_count":1},{"had_liked":false,"id":112112,"user_name":"二狗","can_delete":false,"product_type":"c1","uid":1244288,"ip_address":"","ucode":"91C38887F4F07B","user_header":"https://static001.geekbang.org/account/avatar/00/12/fc/80/21d67b9b.jpg","comment_is_top":false,"comment_ctime":1562670844,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5857638140","product_id":100029501,"comment_content":"修改字段的数据类型modify后面不用加括号 加括号提示语法错误","like_count":1},{"had_liked":false,"id":111780,"user_name":"傅hc","can_delete":false,"product_type":"c1","uid":1453398,"ip_address":"","ucode":"AEE6AA5AE1407A","user_header":"https://static001.geekbang.org/account/avatar/00/16/2d/56/5a1dce22.jpg","comment_is_top":false,"comment_ctime":1562598427,"is_pvip":false,"replies":[{"id":"63737","content":"可以使用Navicat来管理你的MySQL","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577530863,"ip_address":"","comment_id":111780,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857565723","product_id":100029501,"comment_content":"小白一枚，是用Navicat Premium还是Navicat for MySQL？我看课程有说MySQL和Oracle···","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457444,"discussion_content":"可以使用Navicat来管理你的MySQL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110207,"user_name":"linus","can_delete":false,"product_type":"c1","uid":1246600,"ip_address":"","ucode":"910606671D1706","user_header":"https://static001.geekbang.org/account/avatar/00/13/05/88/0a1f1b1d.jpg","comment_is_top":false,"comment_ctime":1562208103,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5857175399","product_id":100029501,"comment_content":"constraint什么时候该用，有什么作用","like_count":1,"discussions":[{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"丁丁历险记","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374369,"discussion_content":"建议无视掉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621152206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107408,"user_name":"JustDoDT","can_delete":false,"product_type":"c1","uid":1127175,"ip_address":"","ucode":"6AF0B80F00EAEF","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","comment_is_top":false,"comment_ctime":1561530955,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856498251","product_id":100029501,"comment_content":"修改一处报错：<br>1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;(player_age FLOAT(3,1))&#39; at line 1, Time: 0.020000s<br>3. 修改字段的数据类型，将player_age的数据类型设置为float(3,1)<br>遇到的同学改成这个可能解决这个问题。<br>ALTER TABLE player MODIFY COLUMN player_age FLOAT(3,1);","like_count":1},{"had_liked":false,"id":107369,"user_name":"不负","can_delete":false,"product_type":"c1","uid":1238323,"ip_address":"","ucode":"147F5860711811","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/33/ff5c52ad.jpg","comment_is_top":false,"comment_ctime":1561520511,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"5856487807","product_id":100029501,"comment_content":"老师，可否解释下“数据冗余”和“实体间的冗余度”？数据冗余是指查询出一个表但有大量字段不需要使用？<br>之前建过一个Oracle数据表（6个不相关但需要存储的值），有两种设计方式：① 由6个字段+id字段组成<br>② 由id、value、type 字段组成，使用type字段区分是哪种类型的值<br>之前采用了①，考虑到<br>1. 基本每次查询所有6个字段都要使用；<br>2. 采用第②种的话表数据条数会多很多，感觉①就是结果集横向大，②就是结果集纵向大，看了文中的“三多一少”中字段越少越好的原则，再选偏向第②种，如果是老师你会选哪种？<br>而且有遇到一些表字段非常多，一些字段有些场景下才会用到，这种不知道怎么优化了","like_count":1},{"had_liked":false,"id":107248,"user_name":"胡小榕","can_delete":false,"product_type":"c1","uid":1300169,"ip_address":"","ucode":"351E2032C75CB6","user_header":"https://static001.geekbang.org/account/avatar/00/13/d6/c9/08a62ac7.jpg","comment_is_top":false,"comment_ctime":1561508415,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856475711","product_id":100029501,"comment_content":"请问一下老师：&quot;utf8_general_ci，代表对大小写不敏感&quot;，是指对表名&#47;字段名不区分大小写？还是对字段内容值不区分大小写呢？","like_count":1},{"had_liked":false,"id":106516,"user_name":"都市夜归人","can_delete":false,"product_type":"c1","uid":1071909,"ip_address":"","ucode":"DFF59BE3D80B42","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/25/d78cc1fe.jpg","comment_is_top":false,"comment_ctime":1561338502,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5856305798","product_id":100029501,"comment_content":"使用主键和外键越多越好?我们以前做的项目都明确发对使用外键约束","like_count":1},{"had_liked":false,"id":106420,"user_name":"庞鑫华","can_delete":false,"product_type":"c1","uid":1114368,"ip_address":"","ucode":"2A4B9FD568ADF7","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/00/326f3d4d.jpg","comment_is_top":false,"comment_ctime":1561295050,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856262346","product_id":100029501,"comment_content":"使用外键依然需要业务维护吧，刊主，不知是否正确？","like_count":1},{"had_liked":false,"id":105949,"user_name":"仙道","can_delete":false,"product_type":"c1","uid":1161146,"ip_address":"","ucode":"CF35D34B484B71","user_header":"https://static001.geekbang.org/account/avatar/00/11/b7/ba/ae4cabd8.jpg","comment_is_top":false,"comment_ctime":1561110645,"is_pvip":false,"replies":[{"id":"64048","content":"嗯 不同公司要求不同，互联网公司使用的少","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577608184,"ip_address":"","comment_id":105949,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5856077941","product_id":100029501,"comment_content":"阿里java开发规范里面讲不要用外键","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454882,"discussion_content":"嗯 不同公司要求不同，互联网公司使用的少","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577608184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1693414,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d6/e6/87234c32.jpg","nickname":"木心云影","note":"","ucode":"5F7244D779AD9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48035,"discussion_content":"确实，有外键的话，表的维护会比较麻烦。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573443240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105849,"user_name":"👽","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1561093587,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856060883","product_id":100029501,"comment_content":"请教一下，现在有部分实现方式为  不拉强关联关系。<br>也就是说不使用表的关系，而是仅仅存另一张表的id作关联。<br>这种方式现在主流嘛？与强关联相比优势在哪？","like_count":1},{"had_liked":false,"id":105798,"user_name":"91、洲先生","can_delete":false,"product_type":"c1","uid":1136904,"ip_address":"","ucode":"285C552078E192","user_header":"https://static001.geekbang.org/account/avatar/00/11/59/08/e33bfa11.jpg","comment_is_top":false,"comment_ctime":1561085235,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856052531","product_id":100029501,"comment_content":"主键和外键越多越好这个不明白<br><br>主键一个表只能一个，没法多啊<br>外键这玩意在oltp场景基本上就不给用啊，高并发下更不给用","like_count":1},{"had_liked":false,"id":105708,"user_name":"小星星","can_delete":false,"product_type":"c1","uid":1163671,"ip_address":"","ucode":"94D24B1A37B63C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c1/97/3c54731e.jpg","comment_is_top":false,"comment_ctime":1561077973,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856045269","product_id":100029501,"comment_content":"上面说三少一多原则有矛盾吧?<br>又说要尽量少的建表，又说要多用主键和外键，每多建一个主键不得新加一张表吗?","like_count":1},{"had_liked":false,"id":105635,"user_name":"啦啦啦","can_delete":false,"product_type":"c1","uid":1131687,"ip_address":"","ucode":"6B12EC90A62525","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/a7/171c1e86.jpg","comment_is_top":false,"comment_ctime":1561046011,"is_pvip":false,"replies":[{"id":"64068","content":"加油 啦啦啦","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577608640,"ip_address":"","comment_id":105635,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856013307","product_id":100029501,"comment_content":"打卡","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454747,"discussion_content":"加油 啦啦啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577608640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105615,"user_name":"Geek_010040","can_delete":false,"product_type":"c1","uid":1584146,"ip_address":"","ucode":"A786E8EEB69005","user_header":"https://static001.geekbang.org/","comment_is_top":false,"comment_ctime":1561042254,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856009550","product_id":100029501,"comment_content":"ALTER TABLE player RENAME COLUMN age to player_age<br>这是Oracle语法，mysql好像要加上字段类型呀","like_count":1},{"had_liked":false,"id":105575,"user_name":"肥而不腻","can_delete":false,"product_type":"c1","uid":1435246,"ip_address":"","ucode":"3E6786A82A6DD6","user_header":"https://static001.geekbang.org/account/avatar/00/15/e6/6e/062da5e4.jpg","comment_is_top":false,"comment_ctime":1561034304,"is_pvip":false,"replies":[{"id":"64070","content":"加油刘强同学","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577608672,"ip_address":"","comment_id":105575,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856001600","product_id":100029501,"comment_content":"日常看完专栏和留言！","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454728,"discussion_content":"加油刘强同学","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577608672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105274,"user_name":"　　星豪","can_delete":false,"product_type":"c1","uid":1545903,"ip_address":"","ucode":"31C3FEA16F7BE8","user_header":"https://static001.geekbang.org/account/avatar/00/17/96/af/da8fd6ed.jpg","comment_is_top":false,"comment_ctime":1560953223,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855920519","product_id":100029501,"comment_content":"你好，老师。你说数据表的个数是越少越好，而使用主键和外键越多越好，我的理解是，这两者之间是不是有些矛盾呢？因为要求主键外键越多，那表明表与表之间的关系更紧密，虽然是各个表之间的独立性越好了，但一个表出一个外键，一个表出一个，这样外键和逐渐地增多的同时也会导致数据表的增多吧？还是说应该理解为一个数据表中可以有多个列充当主键和外键，从未保证数据表在数量更少的情况下，增加主键和外键的增加呢？如果是这种情况下的话，那是不是也就需要数据表中的字段相对更独立一些，字段中的数据越不能重复呢？不知道是不是我的描述有问题，希望老师能够帮忙解答。","like_count":1},{"had_liked":false,"id":105225,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1560942139,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855909435","product_id":100029501,"comment_content":"平时几乎都是使用冗余字段来充当外键的作用，很少使用外键。<br><br>原因可能有，数据新增之后很少变化，几乎不存在删除的情况;感觉在业务层控制更方便一些。<br>","like_count":1},{"had_liked":false,"id":105197,"user_name":"老贼","can_delete":false,"product_type":"c1","uid":1024567,"ip_address":"","ucode":"34351477387A2C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a2/37/a6aa243c.jpg","comment_is_top":false,"comment_ctime":1560937466,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855904762","product_id":100029501,"comment_content":"在生产环境中基本不用外键了，即使用也不作约束检查。<br>另外mysql不是说不要用utf8字符集吗？据说这个不是真正的utf8,会导致稀奇古怪的问题。","like_count":1},{"had_liked":false,"id":105085,"user_name":"马以","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1560913473,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5855880769","product_id":100029501,"comment_content":"老师还有一个问题就是您说：“唯一性约束相当于创建了一个约束和普通索引，目的是保证字段的正确性”，那么如果我在一个字段定义了唯一性约束，是不是mysql会为这个字段建立一个索引？加入我的业务中根本就不会根据这个字段查询数据，这么做就没什么意义了吧？","like_count":1,"discussions":[{"author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"阿斯蒂芬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158849,"discussion_content":"是个好问题，请问你有答案了么。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580633992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105058,"user_name":"felix","can_delete":false,"product_type":"c1","uid":1086157,"ip_address":"","ucode":"DF514D0BB9B508","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/cd/d39e568c.jpg","comment_is_top":false,"comment_ctime":1560909606,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855876902","product_id":100029501,"comment_content":"设备表的属性（扩展字段，不常用）特别多，是都放设备表里，还是建另外一个表（一对一的关系）存呢？","like_count":1},{"had_liked":false,"id":105046,"user_name":"微凉","can_delete":false,"product_type":"c1","uid":1178156,"ip_address":"","ucode":"F6BD0AE11AE224","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/2c/9a0c45e6.jpg","comment_is_top":false,"comment_ctime":1560908411,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855875707","product_id":100029501,"comment_content":"我们的数据库设计都是不用外键关联的，会带来很多问题吧","like_count":1},{"had_liked":false,"id":105044,"user_name":"程序员人生","can_delete":false,"product_type":"c1","uid":1113668,"ip_address":"","ucode":"C5C5073D89AAA2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/44/3e3040ac.jpg","comment_is_top":false,"comment_ctime":1560908342,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855875638","product_id":100029501,"comment_content":"现在设计表都不怎么会用外键的","like_count":1},{"had_liked":false,"id":105039,"user_name":"吃饭饭","can_delete":false,"product_type":"c1","uid":1231549,"ip_address":"","ucode":"95CFA07CDA2957","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","comment_is_top":false,"comment_ctime":1560908013,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855875309","product_id":100029501,"comment_content":"Mysql的物理外键基本上不用，另外示例中name字段加唯一索引不是很合理吧，而且唯一索引用起来也得注意一些事情","like_count":1},{"had_liked":false,"id":343388,"user_name":"高兴业","can_delete":false,"product_type":"c1","uid":2974360,"ip_address":"","ucode":"6F6B8C58F5FEBF","user_header":"","comment_is_top":false,"comment_ctime":1650811545,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650811545","product_id":100029501,"comment_content":"牺牲数据的冗余度来换取数据处理的效率","like_count":0},{"had_liked":false,"id":325291,"user_name":"到道可道","can_delete":false,"product_type":"c1","uid":1031181,"ip_address":"","ucode":"12B94B6C26BE0D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bc/0d/00424e81.jpg","comment_is_top":false,"comment_ctime":1638891714,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1638891714","product_id":100029501,"comment_content":"修改字段类型，应修改为这样：<br>ALTER TABLE player MODIFY COLUMN player_age float(3,1);<br>才能正常执行","like_count":0},{"had_liked":false,"id":317532,"user_name":"越锋利","can_delete":false,"product_type":"c1","uid":2815900,"ip_address":"","ucode":"63E9E3F3C7D53D","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f7/9c/69c5c5dc.jpg","comment_is_top":false,"comment_ctime":1634827800,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634827800","product_id":100029501,"comment_content":"Navicat 现在是收费软件，推荐用 DBeaver","like_count":0},{"had_liked":false,"id":316080,"user_name":"汤建国","can_delete":false,"product_type":"c1","uid":2308769,"ip_address":"","ucode":"5836B661311795","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/dbcKqibcMry7cvNedeSV60XicaCrMrZFBwHbanvyvFtSgGfmfGX7hMWjXibRlRZicrfpatAiaaFSKcShy1ic3gULDq0Q/132","comment_is_top":false,"comment_ctime":1634125637,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634125637","product_id":100029501,"comment_content":"请问ALTER TABLE player RENAME COLUMN age to player_age这句sql是针对mysql8的版本么，我在mysql:5.6版本会报语法错误","like_count":0},{"had_liked":false,"id":307781,"user_name":"Geek_84c2cb","can_delete":false,"product_type":"c1","uid":2640016,"ip_address":"","ucode":"96A7A1D911F7AC","user_header":"","comment_is_top":false,"comment_ctime":1629253538,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629253538","product_id":100029501,"comment_content":"老师，为什么要设置两次排序规则呢","like_count":0},{"had_liked":false,"id":307698,"user_name":"安德森先生","can_delete":false,"product_type":"c1","uid":2564411,"ip_address":"","ucode":"482BAF82DB7390","user_header":"https://static001.geekbang.org/account/avatar/00/27/21/3b/e3edea37.jpg","comment_is_top":false,"comment_ctime":1629204623,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629204623","product_id":100029501,"comment_content":"基础篇中为啥没有往表中插入数据的语法呀","like_count":0},{"had_liked":false,"id":294575,"user_name":"止水","can_delete":false,"product_type":"c1","uid":2001806,"ip_address":"","ucode":"8871BD0DFBF275","user_header":"https://static001.geekbang.org/account/avatar/00/1e/8b/8e/0373644f.jpg","comment_is_top":false,"comment_ctime":1622003845,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622003845","product_id":100029501,"comment_content":"请问大佬如何下载练习文件呢？","like_count":0},{"had_liked":false,"id":293011,"user_name":"完美坚持","can_delete":false,"product_type":"c1","uid":1919541,"ip_address":"","ucode":"AE0261D8DDEF64","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","comment_is_top":false,"comment_ctime":1621154813,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621154813","product_id":100029501,"comment_content":"主键，在一个表中唯一标记一行数据，作用等效于唯一约束+not null；在MySQL InnoDB引擎，数据表按照主键来组织表数据，形成索引组织表；在Oracle中，也有IOT表，但不显式指定创建索引组织表，那么数据表默认是堆表，主键上另外创建一个主键索引；<br>外键，是指定两表之间的父子关系，子表外键上的数据，必须要在父表存在，在父表和子表的外键相关列上创建索引，会大大提高性能；<br>索引，是提高查询效率的关键手段。索引是跟数据表相互独立的数据库对象，除非是Oracle中的索引组织表或者MySQL中的主键索引。索引的类型有B+树，hash，bitmap，全文索引等等。在表数据更新时需要维护索引结构，对DML效率有影响。","like_count":0},{"had_liked":false,"id":293005,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1621152016,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621152016","product_id":100029501,"comment_content":"主键为啥不统一叫 id  就完事了，每表一名字 写sql 时不累，<br>封装时不麻烦？<br>开发的记忆力如此珍惜的资源  ，要学会爱惜。<br>基础的coc  原则麻烦遵守一下。","like_count":0},{"had_liked":false,"id":293004,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1621151779,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621151779","product_id":100029501,"comment_content":"别瞎信什么三少一多，要讲场景的。<br>谁便举几个例子  <br>1  往往主库表会少建索引（写压力）从库会多建索引（读压力）<br>2  用户账号，往往加个余额字段  [多了个字段]。  而不是每次求余额时把十几年的余额变更流水全累加一下。","like_count":0},{"had_liked":false,"id":293003,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1621150901,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621150901","product_id":100029501,"comment_content":"数据库解决好存储和搜索即可，外键约束和存储过程一样，<br>都属于典型的越俎代庖。违背基础的srp 原则。<br><br>涉及到业务的事，尽量在业务层解决。<br>不然  一旦复杂度提升，例如分库分表，瞬间外键约束可以把你坑到飞起来。","like_count":0},{"had_liked":false,"id":263890,"user_name":"Wang","can_delete":false,"product_type":"c1","uid":1052957,"ip_address":"","ucode":"9BEFA46433F86B","user_header":"https://static001.geekbang.org/account/avatar/00/10/11/1d/6ad7eb3c.jpg","comment_is_top":false,"comment_ctime":1606288510,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1606288510","product_id":100029501,"comment_content":"数据表 主键，外键，索引的作用和区别。<br>1.主键，确保了表中的数据的唯一性。有且只有一条记录，并且没有重复数据，也不能为空。一条记录不在表中存储多次。一般设置id为主键。也可以设置多个字段一起作为主键。<br>2.外键，A表的主键是B表的外键，外键可以为空，可以重复。它确保的是这两个表之间的关系。<br>应用中多数是在代码层做关联。数据库设置外键比较少。<br>3.索引，设置索引可以提升表中数据的查询效率，索引的种类有多种，索引的数据类型也有很多种。mysql为例:索引分为","like_count":0},{"had_liked":false,"id":263830,"user_name":"Wang","can_delete":false,"product_type":"c1","uid":1052957,"ip_address":"","ucode":"9BEFA46433F86B","user_header":"https://static001.geekbang.org/account/avatar/00/10/11/1d/6ad7eb3c.jpg","comment_is_top":false,"comment_ctime":1606275660,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1606275660","product_id":100029501,"comment_content":"ALTER TABLE player RENAME COLUMN age to player_age<br>它在MySQL 的workbench下面执行报错，<br>查了下，rename应该是修改表名称的。<br><br>ALTER TABLE player CHANGE COLUMN age to player_age int (11);<br>是修改字段名称的。","like_count":0},{"had_liked":false,"id":250762,"user_name":"草鱼禾","can_delete":false,"product_type":"c1","uid":2184778,"ip_address":"","ucode":"06865069745DBF","user_header":"https://static001.geekbang.org/account/avatar/00/21/56/4a/6e3e0bbd.jpg","comment_is_top":false,"comment_ctime":1601213551,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601213551","product_id":100029501,"comment_content":"1、给表的一个字段设置主键后，就相当于设计了唯一性约束以及唯一索引，增加查询效率。<br>2、设置外键后，建立表与表之间的联系，提高表的复用率，减少字段的冗余度。<br>3、添加索引后，主要希望能提升查询的时间效率，但是索引过多就会影响空间效率，需要做一个平衡。","like_count":0},{"had_liked":false,"id":246644,"user_name":"杯莫停","can_delete":false,"product_type":"c1","uid":1759325,"ip_address":"","ucode":"4FA1D5CBBEF702","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","comment_is_top":false,"comment_ctime":1599445428,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1599445428","product_id":100029501,"comment_content":"初学者还是多手写SQL比较好，平时项目开发中也都是手写SQL脚本执行升级。当然如果你熟练使用SQL了，为了节省时间，可以使用像navicat这种工具，去做DDL。另外在实际项目中基本没有使用过外键约束，都是集群部署，使用外键的话可能会出问题。<br>主键约束是数据的唯一性，它也是个索引确切的说是聚簇索引，反应到B-树上就是非叶子节点存储的数据。索引包括了聚簇索引，二级索引（辅助索引）等。作用就是能让我们查询性能更好。当然索引不是越多越好，多了太占内存，索引维护也很不方便，适得其反。而且在设计SQL语句的时候也要注意，在特定情况下索引会失效。你不但要维护索引，而且查询没用到索引这是很糟糕的事情。","like_count":0},{"had_liked":false,"id":240612,"user_name":"夏天呀","can_delete":false,"product_type":"c1","uid":1673679,"ip_address":"","ucode":"1C5C060C05923B","user_header":"https://static001.geekbang.org/account/avatar/00/19/89/cf/1c7703b1.jpg","comment_is_top":false,"comment_ctime":1597016827,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597016827","product_id":100029501,"comment_content":"主键：唯一标识一条记录。不能重复，不能为空（UNIQUE+NOT NULL）<br>外键：确保表与表之间引用的完整性，一个表的外键对应另一个表的主键。可重复，可为空。<br>索引：分为唯一索引（UNIQUE INDEX）和普通索引（NORMAL INDEX）。唯一索引对字段进行了唯一性约束，而普通索引只是提升了数据检索的速度，对字段没有唯一性约束。<br>","like_count":0},{"had_liked":false,"id":238446,"user_name":"LIKE","can_delete":false,"product_type":"c1","uid":1254252,"ip_address":"","ucode":"9DAB7F9051648A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","comment_is_top":false,"comment_ctime":1596170543,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596170543","product_id":100029501,"comment_content":"数据库管理软件，推荐 DBeaver：<br>1.开源、跨平台<br>2.sql编辑器支持提示、显示字段注释<br>3.搜索结果，支持横向、竖向展示，Tap 切换<br>.........","like_count":0},{"had_liked":false,"id":238444,"user_name":"LIKE","can_delete":false,"product_type":"c1","uid":1254252,"ip_address":"","ucode":"9DAB7F9051648A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","comment_is_top":false,"comment_ctime":1596169888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596169888","product_id":100029501,"comment_content":"主键：一般为自增主键<br>外键：很少看到外键了，表关联一般通过业务层中不会变更的字段，比如订单号、账号等<br>索引：为了提高数据检索效率，一般根据业务中条件项：where、group、order by等设置，参照覆盖索引、索引最左前缀等，减少不必要索引。","like_count":0},{"had_liked":false,"id":238211,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1596096300,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1596096300","product_id":100029501,"comment_content":"主键：每张表最多只有一个主键，并且主键值是不能重复，不能为空，用来标识该行。<br>外键：当需要和其他表做关联操作时，用外键来对应其他表的主键，外键可以重复可以为空，也可以由多个字段组成；<br>索引：用来提高检索效率","like_count":0},{"had_liked":false,"id":229582,"user_name":"Johnny","can_delete":false,"product_type":"c1","uid":1219785,"ip_address":"","ucode":"2F047912201D67","user_header":"https://static001.geekbang.org/account/avatar/00/12/9c/c9/4b01f4e2.jpg","comment_is_top":false,"comment_ctime":1593065689,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1593065689","product_id":100029501,"comment_content":"主键：标识数据唯一性保证数据正确性，索引的一种能够提升查询效率。<br>外键：保证引用正确性，降低数据的冗余，物理外键会降低数据插入效率。<br>索引：能够提升查询的效率，影响降低插入的效率。","like_count":0}]}