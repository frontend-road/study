{"id":102008,"title":"11 | 你能写出正确的网址吗？","content":"<p>上一讲里我们一起学习了HTTP协议里的请求方法，其中最常用的一个是GET，它用来从服务器上某个资源获取数据，另一个是POST，向某个资源提交数据。</p><p>那么，应该用什么来标记服务器上的资源呢？怎么区分“这个”资源和“那个”资源呢？</p><p>经过前几讲的学习，你一定已经知道了，用的是URI，也就是<strong>统一资源标识符</strong>（<strong>U</strong>niform <strong>R</strong>esource <strong>I</strong>dentifier）。因为它经常出现在浏览器的地址栏里，所以俗称为“网络地址”，简称“网址”。</p><p>严格地说，URI不完全等同于网址，它包含有URL和URN两个部分，在HTTP世界里用的网址实际上是URL——<strong>统一资源定位符</strong>（<strong>U</strong>niform <strong>R</strong>esource <strong>L</strong>ocator）。但因为URL实在是太普及了，所以常常把这两者简单地视为相等。</p><p>不仅我们生活中的上网要用到URI，平常的开发、测试、运维的工作中也少不了它。</p><p>如果你在客户端做iOS、 Android或者某某小程序开发，免不了要连接远程服务，就会调用底层API用URI访问服务。</p><p>如果你使用Java、PHP做后台Web开发，也会调用getPath()、parse_url() 等函数来处理URI，解析里面的各个要素。</p><p>在测试、运维配置Apache、Nginx等Web服务器的时候也必须正确理解URI，分离静态资源与动态资源，或者设置规则实现网页的重定向跳转。</p><!-- [[[read_end]]] --><p>总之一句话，URI非常重要，要搞懂HTTP甚至网络应用，就必须搞懂URI。</p><h2>URI的格式</h2><p>不知道你平常上网的时候有没有关注过地址栏里的那一长串字符，有的比较简短，有的则一行都显示不下，有的意思大概能看明白，而有的则带着各种怪字符，有如“天书”。</p><p>其实只要你弄清楚了URI的格式，就能够轻易地“破解”这些难懂的“天书”了。</p><p>URI本质上是一个字符串，这个字符串的作用是<strong>唯一地标记资源的位置或者名字</strong>。</p><p>这里我要提醒你注意，它不仅能够标记万维网的资源，也可以标记其他的，如邮件系统、本地文件系统等任意资源。而“资源”既可以是存在磁盘上的静态文本、页面数据，也可以是由Java、PHP提供的动态服务。</p><p>下面的这张图显示了URI最常用的形式，由scheme、host:port、path和query四个部分组成，但有的部分可以视情况省略。</p><p><img src=\"https://static001.geekbang.org/resource/image/46/2a/46581d7e1058558d8e12c1bf37d30d2a.png?wh=1548*363\" alt=\"\"></p><h2>URI的基本组成</h2><p>URI第一个组成部分叫<strong>scheme</strong>，翻译成中文叫“<strong>方案名</strong>”或者“<strong>协议名</strong>”，表示<strong>资源应该使用哪种协议</strong>来访问。</p><p>最常见的当然就是“http”了，表示使用HTTP协议。另外还有“https”，表示使用经过加密、安全的HTTPS协议。此外还有其他不是很常见的scheme，例如ftp、ldap、file、news等。</p><p>浏览器或者你的应用程序看到URI里的scheme，就知道下一步该怎么走了，会调用相应的HTTP或者HTTPS下层API。显然，如果一个URI没有提供scheme，即使后面的地址再完善，也是无法处理的。</p><p>在scheme之后，必须是<strong>三个特定的字符</strong>“<strong>://</strong>”，它把scheme和后面的部分分离开。</p><p>实话实说，这个设计非常的怪异，我最早上网的时候看见地址栏里的“://”就觉得很别扭，直到现在也还是没有太适应。URI的创造者蒂姆·伯纳斯-李也曾经私下承认“://”并非必要，当初有些“过于草率”了。</p><p>不过这个设计已经有了三十年的历史，不管我们愿意不愿意，只能接受。</p><p>在“://”之后，是被称为“<strong>authority</strong>”的部分，表示<strong>资源所在的主机名</strong>，通常的形式是“host:port”，即主机名加端口号。</p><p>主机名可以是IP地址或者域名的形式，必须要有，否则浏览器就会找不到服务器。但端口号有时可以省略，浏览器等客户端会依据scheme使用默认的端口号，例如HTTP的默认端口号是80，HTTPS的默认端口号是443。</p><p>有了协议名和主机地址、端口号，再加上后面<strong>标记资源所在位置</strong>的<strong>path</strong>，浏览器就可以连接服务器访问资源了。</p><p>URI里path采用了类似文件系统“目录”“路径”的表示方式，因为早期互联网上的计算机多是UNIX系统，所以采用了UNIX的“/”风格。其实也比较好理解，它与scheme后面的“://”是一致的。</p><p>这里我也要再次提醒你注意，URI的path部分必须以“/”开始，也就是必须包含“/”，不要把“/”误认为属于前面authority。</p><p>说了这么多“理论”，来看几个实例。</p><pre><code>http://nginx.org\nhttp://www.chrono.com:8080/11-1\nhttps://tools.ietf.org/html/rfc7230\nfile:///D:/http_study/www/\n</code></pre><p>第一个URI算是最简单的了，协议名是“http”，主机名是“nginx.org”，端口号省略，所以是默认的80，而路径部分也被省略了，默认就是一个“/”，表示根目录。</p><p>第二个URI是在实验环境里这次课程的专用URI，主机名是“www.chrono.com”，端口号是8080，后面的路径是“/11-1”。</p><p>第三个是HTTP协议标准文档RFC7230的URI，主机名是“tools.ietf.org”，路径是“/html/rfc7230”。</p><p>最后一个URI要注意了，它的协议名不是“http”，而是“file”，表示这是本地文件，而后面居然有三个斜杠，这是怎么回事？</p><p>如果你刚才仔细听了scheme的介绍就能明白，这三个斜杠里的前两个属于URI特殊分隔符“://”，然后后面的“/D:/http_study/www/”是路径，而中间的主机名被“省略”了。这实际上是file类型URI的“特例”，它允许省略主机名，默认是本机localhost。</p><p>但对于HTTP或HTTPS这样的网络通信协议，主机名是绝对不能省略的。原因之前也说了，会导致浏览器无法找到服务器。</p><p>我们可以在实验环境里用Chrome浏览器再仔细观察一下HTTP报文里的URI。</p><p>运行Chrome，用F12打开开发者工具，然后在地址栏里输入“<a href=\"http://www.chrono.com/11-1\">http://www.chrono.com/11-1</a>”，得到的结果如下图。</p><p><img src=\"https://static001.geekbang.org/resource/image/20/9f/20ac5ee55b8ee30527492c8abb60ff9f.png?wh=803*663\" alt=\"\"></p><p>在开发者工具里依次选“Network”“Doc”，就可以找到请求的URI。然后在Headers页里看Request Headers，用“view source”就可以看到浏览器发的原始请求头了。</p><p>发现了什么特别的没有？</p><p>在HTTP报文里的URI“/11-1”与浏览器里输入的“<a href=\"http://www.chrono.com/11-1\">http://www.chrono.com/11-1</a>”有很大的不同，协议名和主机名都不见了，只剩下了后面的部分。</p><p>这是因为协议名和主机名已经分别出现在了请求行的版本号和请求头的Host字段里，没有必要再重复。当然，在请求行里使用完整的URI也是可以的，你可以在课后自己试一下。</p><p>通过这个小实验，我们还得到了一个结论：<span class=\"orange\">客户端和服务器看到的URI是不一样的</span>。客户端看到的必须是完整的URI，使用特定的协议去连接特定的主机，而服务器看到的只是报文请求行里被删除了协议名和主机名的URI。</p><p>如果你配置过Nginx，你就应该明白了，Nginx作为一个Web服务器，它的location、rewrite等指令操作的URI其实指的是真正URI里的path和后续的部分。</p><h2>URI的查询参数</h2><p>使用“协议名+主机名+路径”的方式，已经可以精确定位网络上的任何资源了。但这还不够，很多时候我们还想在操作资源的时候附加一些额外的修饰参数。</p><p>举几个例子：获取商品图片，但想要一个32×32的缩略图版本；获取商品列表，但要按某种规则做分页和排序；跳转页面，但想要标记跳转前的原始页面。</p><p>仅用“协议名+主机名+路径”的方式是无法适应这些场景的，所以URI后面还有一个“<strong>query</strong>”部分，它在path之后，用一个“?”开始，但不包含“?”，表示对资源附加的额外要求。这是个很形象的符号，比“://”要好的多，很明显地表示了“查询”的含义。</p><p>查询参数query有一套自己的格式，是多个“<strong>key=value</strong>”的字符串，这些KV值用字符“<strong>&amp;</strong>”连接，浏览器和服务器都可以按照这个格式把长串的查询参数解析成可理解的字典或关联数组形式。</p><p>你可以在实验环境里用Chrome试试下面这个加了query参数的URI：</p><pre><code>http://www.chrono.com:8080/11-1?uid=1234&amp;name=mario&amp;referer=xxx\n</code></pre><p>Chrome的开发者工具也能解码出query里的KV对，省得我们“人肉”分解。</p><p><img src=\"https://static001.geekbang.org/resource/image/e4/f3/e42073080968e8e0c58d9a9126ab82f3.png?wh=656*369\" alt=\"\"></p><p>还可以再拿一个实际的URI来看一下，这个URI是某电商网站的一个商品查询URI，比较复杂，但相信现在的你能够毫不费力地区分出里面的协议名、主机名、路径和查询参数。</p><pre><code>https://search.jd.com/Search?keyword=openresty&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=openresty&amp;psort=3&amp;click=0\n</code></pre><p>你也可以把这个URI输入到Chrome的地址栏里，再用开发者工具仔细检查它的组成部分。</p><h2>URI的完整格式</h2><p>讲完了query参数，URI就算完整了，HTTP协议里用到的URI绝大多数都是这种形式。</p><p>不过必须要说的是，URI还有一个“真正”的完整形态，如下图所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/ff/38/ff41d020c7a27d1e8191057f0e658b38.png?wh=2023*383\" alt=\"\"></p><p>这个“真正”形态比基本形态多了两部分。</p><p>第一个多出的部分是协议名之后、主机名之前的<strong>身份信息</strong>“user:passwd@”，表示登录主机时的用户名和密码，但现在已经不推荐使用这种形式了（RFC7230），因为它把敏感信息以明文形式暴露出来，存在严重的安全隐患。</p><p>第二个多出的部分是查询参数后的<strong>片段标识符</strong>“#fragment”，它是URI所定位的资源内部的一个“锚点”或者说是“标签”，浏览器可以在获取资源后直接跳转到它指示的位置。</p><p>但片段标识符仅能由浏览器这样的客户端使用，服务器是看不到的。也就是说，浏览器永远不会把带“#fragment”的URI发送给服务器，服务器也永远不会用这种方式去处理资源的片段。</p><h2>URI的编码</h2><p>刚才我们看到了，在URI里只能使用ASCII码，但如果要在URI里使用英语以外的汉语、日语等其他语言该怎么办呢？</p><p>还有，某些特殊的URI，会在path、query里出现“@&amp;?\"等起界定符作用的字符，会导致URI解析错误，这时又该怎么办呢？</p><p>所以，URI引入了编码机制，对于ASCII码以外的字符集和特殊字符做一个特殊的操作，把它们转换成与URI语义不冲突的形式。这在RFC规范里称为“escape”和“unescape”，俗称“转义”。</p><p>URI转义的规则有点“简单粗暴”，直接把非ASCII码或特殊字符转换成十六进制字节值，然后前面再加上一个“%”。</p><p>例如，空格被转义成“%20”，“?”被转义成“%3F”。而中文、日文等则通常使用UTF-8编码后再转义，例如“银河”会被转义成“%E9%93%B6%E6%B2%B3”。</p><p>有了这个编码规则后，URI就更加完美了，可以支持任意的字符集用任何语言来标记资源。</p><p>不过我们在浏览器的地址栏里通常是不会看到这些转义后的“乱码”的，这实际上是浏览器一种“友好”表现，隐藏了URI编码后的“丑陋一面”，不信你可以试试下面的这个URI。</p><pre><code>http://www.chrono.com:8080/11-1?夸父逐日\n</code></pre><p>先在Chrome的地址栏里输入这个query里含有中文的URI，然后点击地址栏，把它再拷贝到其他的编辑器里，它就会“现出原形”：</p><pre><code>http://www.chrono.com:8080/11-1?%E5%A4%B8%E7%88%B6%E9%80%90%E6%97%A5\n</code></pre><h2>小结</h2><p>今天我们学习了网址也就是URI的知识，在这里小结一下今天的内容。</p><ol>\n<li><span class=\"orange\">URI是用来唯一标记服务器上资源的一个字符串，通常也称为URL；</span></li>\n<li><span class=\"orange\">URI通常由scheme、host:port、path和query四个部分组成，有的可以省略；</span></li>\n<li><span class=\"orange\">scheme叫“方案名”或者“协议名”，表示资源应该使用哪种协议来访问；</span></li>\n<li><span class=\"orange\">“host:port”表示资源所在的主机名和端口号；</span></li>\n<li><span class=\"orange\">path标记资源所在的位置；</span></li>\n<li><span class=\"orange\">query表示对资源附加的额外要求；</span></li>\n<li><span class=\"orange\">在URI里对“@&amp;/”等特殊字符和汉字必须要做编码，否则服务器收到HTTP报文后会无法正确处理。</span></li>\n</ol><h2>课下作业</h2><ol>\n<li>HTTP协议允许在在请求行里使用完整的URI，但为什么浏览器没有这么做呢？</li>\n<li>URI的查询参数和头字段很相似，都是key-value形式，都可以任意自定义，那么它们在使用时该如何区别呢？（具体分析可以在“答疑篇”<a href=\"https://time.geekbang.org/column/article/146833\">第41讲</a>中的URI查询参数和头字段部分查看）</li>\n</ol><p>欢迎你把自己的答案写在留言区，与我和其他同学一起讨论。如果你觉得有所收获，欢迎你把文章分享给你的朋友。</p><p><img src=\"https://static001.geekbang.org/resource/image/26/cb/26e06ff1fee9a7cd0b9c1a99bf9d32cb.png?wh=1769*2694\" alt=\"\"></p><p></p>","neighbors":{"left":{"article_title":"10 | 应该如何理解请求方法？","id":101518},"right":{"article_title":"12 | 响应状态码该怎么用？","id":102483}},"comments":[{"had_liked":false,"id":131864,"user_name":"Bayes","can_delete":false,"product_type":"c1","uid":1539608,"ip_address":"","ucode":"2F83B2EFCE6B5D","user_header":"https://static001.geekbang.org/account/avatar/00/17/7e/18/c3ed4650.jpg","comment_is_top":false,"comment_ctime":1567941371,"is_pvip":false,"replies":[{"id":"50412","content":"感谢补充。","user_name":"作者回复","comment_id":131864,"uid":"1181974","ip_address":"","utype":1,"ctime":1567991209,"user_name_real":"chrono"}],"discussion_count":4,"race_medal":0,"score":"237791142651","product_id":100029001,"comment_content":"escape已经被废弃了，我补充一下encodeURI的原理。<br>把字符（unicode）编码成utf-8，utf-8是用1-4个字节表示的，所以每个字节转换成16进制并在前面用百分号（%）连接，最后并把每个字节转换的结果连接起来。","like_count":55,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466652,"discussion_content":"感谢补充。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567991209,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1624355,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c9/23/76511858.jpg","nickname":"洛奇","note":"","ucode":"662B4005721119","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583559,"discussion_content":"你说的encodeURI和escape的结果是一样的，不是吗？那为什么escape被废弃？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660206050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121701,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIpF5euTNx3GOkmf515HFh1ahAzogerLfIyLia2AspTIR9fkU6icGbo2ungo23cdM5s9dUjZGMno7ZA/132","nickname":"dawn","note":"","ucode":"979CE356267183","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577126,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655946222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051293,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/4c/dd/c6035349.jpg","nickname":"Bumblebee","note":"","ucode":"B879C8A511D08D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548308,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643122103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105727,"user_name":"瑞","can_delete":false,"product_type":"c1","uid":1334600,"ip_address":"","ucode":"1C5945FD2D05C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/5d/48/03abbbd1.jpg","comment_is_top":false,"comment_ctime":1561079140,"is_pvip":false,"replies":[{"id":"38329","content":"不完全正确。<br><br>我是这样理解的：<br><br>query参数针对的是资源（uri），而字段针对的是本次请求，也就是报文。<br><br>一个是长期、稳定的，一个是短期、临时的。","user_name":"作者回复","comment_id":105727,"uid":"1181974","ip_address":"","utype":1,"ctime":1561125309,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"139000032612","product_id":100029001,"comment_content":"第二个问题: 一个是属于header的参数，一个是属于body参数","like_count":33,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454788,"discussion_content":"不完全正确。\n\n我是这样理解的：\n\nquery参数针对的是资源（uri），而字段针对的是本次请求，也就是报文。\n\n一个是长期、稳定的，一个是短期、临时的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561125309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106251,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1561218866,"is_pvip":false,"replies":[{"id":"38428","content":"如果网站使用了cdn就会解析到cdn，否则就是网站自己的服务器。<br><br>判断远近很复杂，也是cdn的核心技术之一，术语叫GSLB。简单来说，就是看ip地址，然后有一个对照表，就知道在哪里了。","user_name":"作者回复","comment_id":106251,"uid":"1181974","ip_address":"","utype":1,"ctime":1561259735,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"87460564786","product_id":100029001,"comment_content":"老师好!我有个问题。之前说了DNS域名解析成IP有可能解析到CDN服务器的IP。然后CDN服务器就是离用户越近效果越好。所以在DNS域名解析的时候会优先解析到最近的IP是么?如果是的话DNS服务器又是怎么判断近和远的么?谢谢老师","like_count":20,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455015,"discussion_content":"如果网站使用了cdn就会解析到cdn，否则就是网站自己的服务器。\n\n判断远近很复杂，也是cdn的核心技术之一，术语叫GSLB。简单来说，就是看ip地址，然后有一个对照表，就知道在哪里了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561259735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105644,"user_name":"大小兵","can_delete":false,"product_type":"c1","uid":1209885,"ip_address":"","ucode":"1227870F26D322","user_header":"https://static001.geekbang.org/account/avatar/00/12/76/1d/b4262bdc.jpg","comment_is_top":false,"comment_ctime":1561048296,"is_pvip":false,"replies":[{"id":"38327","content":"回答正确，但关于字段和query参数的区别可以再多说一些。","user_name":"作者回复","comment_id":105644,"uid":"1181974","ip_address":"","utype":1,"ctime":1561125055,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"53100655848","product_id":100029001,"comment_content":"1: 因为在请求头的字段中都有，没必要重复<br>2: 因该是通过最开始的？和每个KV中间的&amp;来区别","like_count":12,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454750,"discussion_content":"回答正确，但关于字段和query参数的区别可以再多说一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561125055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107119,"user_name":"xmr","can_delete":false,"product_type":"c1","uid":1009622,"ip_address":"","ucode":"1BBF165F91F10B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/d6/2f5cb85c.jpg","comment_is_top":false,"comment_ctime":1561462429,"is_pvip":true,"replies":[{"id":"38792","content":"这是两个不一样的域名，但可能解析后是一个ip地址。","user_name":"作者回复","comment_id":107119,"uid":"1181974","ip_address":"","utype":1,"ctime":1561510665,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"48806102685","product_id":100029001,"comment_content":"url带www和不带有什么区别？<br>比如http:&#47;&#47;www.baidu.com和http:&#47;&#47;baidu.com有什么区别?","like_count":11,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455374,"discussion_content":"这是两个不一样的域名，但可能解析后是一个ip地址。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561510665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179014,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1581872821,"is_pvip":false,"replies":[{"id":"69486","content":"<br>1.是的<br><br>2.body数据与get&#47;post无关，只是多年来的应用习惯post带数据，造成了误解。","user_name":"作者回复","comment_id":179014,"uid":"1181974","ip_address":"","utype":1,"ctime":1581910162,"user_name_real":"chrono"}],"discussion_count":3,"race_medal":0,"score":"44531545781","product_id":100029001,"comment_content":"query太长，是可以用post方法放到body里？小贴士里写的是get？意思是get也可以在body里携带数据？","like_count":10,"discussions":[{"author":{"id":1031086,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bb/ae/344c5139.jpg","nickname":"商商","note":"","ucode":"1AE40CC6E4941B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284436,"discussion_content":"按照规范，get的body是语义不明的，各个应用可以自己处理。Java里面就有一些框架get请求不支持body传输。所以作者这种说话是有误导性的，get请求尽量还是不要带body","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1592532300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2033168,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/06/10/77f6ccea.jpg","nickname":"尘灬","note":"","ucode":"553924A550B3BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577398,"discussion_content":"springboot就不支持get请求带body 使用@requestbody解析请求体就会解析异常","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1656067950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484062,"discussion_content":"\n1.是的\n\n2.body数据与get/post无关，只是多年来的应用习惯post带数据，造成了误解。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581910162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105822,"user_name":"业余草","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1561088519,"is_pvip":false,"replies":[{"id":"38299","content":"thanks。","user_name":"作者回复","comment_id":105822,"uid":"1181974","ip_address":"","utype":1,"ctime":1561109021,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"40215794183","product_id":100029001,"comment_content":"这门课程的质量还可以，期待疯狂更新！","like_count":9,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454826,"discussion_content":"thanks。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561109021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161257,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1576157971,"is_pvip":false,"replies":[{"id":"61492","content":"<br>1.可以拿磁盘文件系统来对比理解。绝对路径就是从web服务器的根目录开始的文件查找路径，相对路径是以当前页面的路径为基准，使用“.”“..”来查找文件。一般多用相对路径，写起来比较方便。<br><br>2.RESTful是一种Web API设计风格，以http协议传输数据，接口使用uri，使用get&#47;post等方法来表示操作。和WebService、gRPC不同，它不是强制的，只是一种指导意见，遵守它可以写出易理解、易维护的Web服务","user_name":"作者回复","comment_id":161257,"uid":"1181974","ip_address":"","utype":1,"ctime":1576198668,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"35935896339","product_id":100029001,"comment_content":"老师可以讲讲web里的绝对路径和相对路径么，还有restful。。感觉有点迷糊","like_count":8,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477663,"discussion_content":"\n1.可以拿磁盘文件系统来对比理解。绝对路径就是从web服务器的根目录开始的文件查找路径，相对路径是以当前页面的路径为基准，使用“.”“..”来查找文件。一般多用相对路径，写起来比较方便。\n\n2.RESTful是一种Web API设计风格，以http协议传输数据，接口使用uri，使用get/post等方法来表示操作。和WebService、gRPC不同，它不是强制的，只是一种指导意见，遵守它可以写出易理解、易维护的Web服务","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576198668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106942,"user_name":"壹笙☞漂泊","can_delete":false,"product_type":"c1","uid":1092577,"ip_address":"","ucode":"3A0B8EC881665C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ab/e1/f6b921fa.jpg","comment_is_top":false,"comment_ctime":1561427012,"is_pvip":false,"replies":[{"id":"38687","content":"总结的非常好，赞！","user_name":"作者回复","comment_id":106942,"uid":"1181974","ip_address":"","utype":1,"ctime":1561430204,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"31626198084","product_id":100029001,"comment_content":"课后题：<br>1、不需要重复写，在head里面有的<br>2、字段是针对这次请求的，query是针对访问的资源<br><br>总结：<br>1、URI常用的形式：<br>    <br>scheme :&#47;&#47; host:port path ? query<br><br>        scheme:协议名<br>        host:port 资源所在主机名,地址+端口，如果不写端口，浏览器使用默认的端口<br>        path:资源所在位置，必须以“&#47;”开始<br>        query: 查询参数，以“?”开始，但不包含“?”。key=value字符串，用&amp;连接<br>        eg：<br>https:&#47;&#47;search.jd.com&#47;Search?keyword=openresty&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=openresty&amp;psort=3&amp;click=0<br>2、URI的完整格式<br> scheme :&#47;&#47; user:passwd@ host:port path ? query #fragment<br>        User:passwd@ : 身份信息，但是不推荐这样使用，泄露重要信息<br>        #fragment ：片段标识符。标识URI所定位的资源内部的一个锚点，浏览器可以跳转到它指示的位置。服务器看不到#fragment<br><br>3、URI的编码<br>    直接把非ASCII 码或特殊字符转换成十六进制字节值，然后前面加一个“%”，中文、日文等通常使用UTF-8编码后再转义。<br>        ","like_count":8,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455293,"discussion_content":"总结的非常好，赞！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561430204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127772,"user_name":"Jaising","can_delete":false,"product_type":"c1","uid":1037630,"ip_address":"","ucode":"F68830B7B90F96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d5/3e/7f3a9c2b.jpg","comment_is_top":false,"comment_ctime":1566790453,"is_pvip":false,"replies":[{"id":"47372","content":"为了方便用户使用，浏览器会有一些容错处理，可以输入不同太规范的uri，但我们自己写程序还是要尽量按照标准来。","user_name":"作者回复","comment_id":127772,"uid":"1181974","ip_address":"","utype":1,"ctime":1566795747,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"27336594229","product_id":100029001,"comment_content":"请罗老师解释下原因：<br>Chrome是不是对URL做了Scheme和Host等识别，下面几个URL都可以访问到资源<br>file:&#47;&#47;&#47;D:&#47;http_study&#47;www&#47; ——省略Host可以<br>file:&#47;&#47;D:&#47;http_study&#47;www&#47; ——省略Host和根路径可以<br>file:&#47;D:&#47;http_study&#47;www&#47; ——这个是为什么呢？<br>D:&#47;http_study&#47;www&#47; ——省略Scheme和Host可以<br>但是省略Scheme是不行的：<br>:&#47;&#47;&#47;D:&#47;http_study&#47;www&#47;<br>可是如果使用Http协议的话，就可以省略Scheme：<br>:&#47;&#47;nginx.org","like_count":7,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464648,"discussion_content":"为了方便用户使用，浏览器会有一些容错处理，可以输入不同太规范的uri，但我们自己写程序还是要尽量按照标准来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566795747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105735,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1561079816,"is_pvip":false,"replies":[{"id":"38302","content":"dns只解析ip地址，端口号是浏览器添加的。<br><br>如果不提供端口号，浏览器就会添加默认端口号，比如80&#47;443。","user_name":"作者回复","comment_id":105735,"uid":"1181974","ip_address":"","utype":1,"ctime":1561109123,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"23035916296","product_id":100029001,"comment_content":"老师好!访问网页的时候，都是只有域名没有端口号。这些服务器都是使用默认端口号么?dns解析的时候域名就会解析成IP默认端口号也是在浏览器端就拼上去的么?","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454793,"discussion_content":"dns只解析ip地址，端口号是浏览器添加的。\n\n如果不提供端口号，浏览器就会添加默认端口号，比如80/443。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561109123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125105,"user_name":"安排","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1566087269,"is_pvip":false,"replies":[{"id":"46203","content":"地址栏里的query参数是uri的一部分，当然是在请求头里。","user_name":"作者回复","comment_id":125105,"uid":"1181974","ip_address":"","utype":1,"ctime":1566262813,"user_name_real":"chrono"}],"discussion_count":4,"race_medal":0,"score":"18745956453","product_id":100029001,"comment_content":"浏览器地址栏写的query信息，在发送时是什么形态？直接原样写到body里吗？还是浏览器先自己解析成kv形势，然后写到请求头里？","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463435,"discussion_content":"地址栏里的query参数是uri的一部分，当然是在请求头里。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566262813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1490049,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJpJz0SORayxydkezyVfk4TvDcJjSahuMbvXPkCbvvjC4RLt6picrlp4rrxXm22TbRQrbC6ibl8zNSw/132","nickname":"Sean","note":"","ucode":"9360D9FBB2F851","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275487,"discussion_content":"老师，确定一下，url里的query是写在header里的吗？实验的时候，服务器收到的header里看不到query的信息呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590721005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1799719,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/76/27/aa2743e7.jpg","nickname":"小南风","note":"","ucode":"249B070497C815","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1490049,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJpJz0SORayxydkezyVfk4TvDcJjSahuMbvXPkCbvvjC4RLt6picrlp4rrxXm22TbRQrbC6ibl8zNSw/132","nickname":"Sean","note":"","ucode":"9360D9FBB2F851","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":300839,"discussion_content":"同学，我认为是出现在请求行里面 就是第一行。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598280056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":275487,"ip_address":""},"score":300839,"extra":""}]},{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"安排","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5429,"discussion_content":"多谢解答","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566263169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121389,"user_name":"四月的紫色花","can_delete":false,"product_type":"c1","uid":1564190,"ip_address":"","ucode":"67863848E5D766","user_header":"https://static001.geekbang.org/account/avatar/00/17/de/1e/ca04d2c5.jpg","comment_is_top":false,"comment_ctime":1565132497,"is_pvip":false,"replies":[{"id":"44594","content":"说的很好。<br><br>我在之前的答复里好像也说过，头字段针对的是本次请求，而query参数针对的是uri表示的资源，两者的作用域和时效性是不一样的。","user_name":"作者回复","comment_id":121389,"uid":"1181974","ip_address":"","utype":1,"ctime":1565135846,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"18745001681","product_id":100029001,"comment_content":"第二个实际上想问的是这两者形式很相近，应该在什么场景下使用查询参数或者头字段。<br>感谢老师每次都回复，关于第二个问题我又想了下，头字段是每个请求都有，虽然只有host是必须，但大部分情况下每次请求都不只有host，还有很多其他的头；查询参数是用来说明资源的属性的，想要更为详细的资源的时候就可以加这个查询参数。","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461773,"discussion_content":"说的很好。\n\n我在之前的答复里好像也说过，头字段针对的是本次请求，而query参数针对的是uri表示的资源，两者的作用域和时效性是不一样的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565135846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278520,"user_name":"天方夜","can_delete":false,"product_type":"c1","uid":1034749,"ip_address":"","ucode":"5D17D55B0CE10C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c9/fd/5ac43929.jpg","comment_is_top":false,"comment_ctime":1613014394,"is_pvip":false,"replies":[{"id":"101342","content":"是的，不过如果我们自己写程序发请求，在get的时候是可以带body的。<br><br>只是现在大家都这么用，就造成了一种误解，以为get不能有body。","user_name":"作者回复","comment_id":278520,"uid":"1181974","ip_address":"","utype":1,"ctime":1613390901,"user_name_real":"罗剑锋"}],"discussion_count":1,"race_medal":0,"score":"14497916282","product_id":100029001,"comment_content":"xhr 和 fetch 都是在 GET 请求中忽略 body 的，所以在浏览器端，常规方式是无法在 GET 请求中附带 body 的。","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515410,"discussion_content":"是的，不过如果我们自己写程序发请求，在get的时候是可以带body的。\n\n只是现在大家都这么用，就造成了一种误解，以为get不能有body。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613390901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110361,"user_name":"Geek_5443a0","can_delete":false,"product_type":"c1","uid":1135221,"ip_address":"","ucode":"9149B73035916D","user_header":"","comment_is_top":false,"comment_ctime":1562241494,"is_pvip":false,"replies":[{"id":"40163","content":"大体正确。<br><br>URI 的查询参数描述的是资源的属性，字段描述的是本次请求的属性，区别比较细微。","user_name":"作者回复","comment_id":110361,"uid":"1181974","ip_address":"","utype":1,"ctime":1562288682,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"14447143382","product_id":100029001,"comment_content":"课下作业2:<br>URI 的查询参数决定了这个请求要做什么<br>头字段里面是这个请求的元数据<br><br>可以这么理解么?<br>","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456839,"discussion_content":"大体正确。\n\nURI 的查询参数描述的是资源的属性，字段描述的是本次请求的属性，区别比较细微。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562288682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106027,"user_name":"qzmone","can_delete":false,"product_type":"c1","uid":1081681,"ip_address":"","ucode":"E10DC194F04B74","user_header":"https://static001.geekbang.org/account/avatar/00/10/81/51/4999f121.jpg","comment_is_top":false,"comment_ctime":1561129969,"is_pvip":false,"replies":[{"id":"38349","content":"GET http:&#47;&#47;www.chrono.com&#47;11-1 HTTP&#47;1.1<br><br>用Telnet发，浏览器不行。","user_name":"作者回复","comment_id":106027,"uid":"1181974","ip_address":"","utype":1,"ctime":1561166405,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"10151064561","product_id":100029001,"comment_content":"关于“在请求行里使用完整的 URI 也是可以的，你可以在课后自己试”，是这样写吗：http:&#47;&#47;www.chrono.com&#47;http:&#47;&#47;www.chrono.com&#47;11-1","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454925,"discussion_content":"GET http://www.chrono.com/11-1 HTTP/1.1\n\n用Telnet发，浏览器不行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561166405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105704,"user_name":"Aaaaaaaaaaayou","can_delete":false,"product_type":"c1","uid":1073601,"ip_address":"","ucode":"67BA315B87587D","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/c1/93031a2a.jpg","comment_is_top":false,"comment_ctime":1561077586,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10151012178","product_id":100029001,"comment_content":"escape转换的十六进制是符号的unicode编码吧","like_count":2,"discussions":[{"author":{"id":1215892,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8d/94/150dfe78.jpg","nickname":"GGL","note":"","ucode":"AED10B8248D1E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352922,"discussion_content":"unicode编码是一种编码规范，utf-8是unicode编码的一种实现方式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614911456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133945,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4d/79/803537db.jpg","nickname":"慢动作","note":"","ucode":"62C944F4A4D8AC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6291,"discussion_content":"不是，是utf8编码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566824962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105690,"user_name":"一粟","can_delete":false,"product_type":"c1","uid":1058773,"ip_address":"","ucode":"2EE966F3C36B5F","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/d5/0fd21753.jpg","comment_is_top":false,"comment_ctime":1561076101,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10151010693","product_id":100029001,"comment_content":"这次真的确定了:&#47;&#47;的真正作用了，分隔符。编码转义，怪不得server端要转义编码了。","like_count":2},{"had_liked":false,"id":320119,"user_name":"HILLIEX","can_delete":false,"product_type":"c1","uid":2768497,"ip_address":"","ucode":"14DF652C759FC0","user_header":"https://static001.geekbang.org/account/avatar/00/2a/3e/71/98af2a83.jpg","comment_is_top":false,"comment_ctime":1636086486,"is_pvip":false,"replies":[{"id":"116098","content":"说的很好，加油。","user_name":"作者回复","comment_id":320119,"uid":"1181974","ip_address":"","utype":1,"ctime":1636172257,"user_name_real":"罗剑锋"}],"discussion_count":1,"race_medal":0,"score":"5931053782","product_id":100029001,"comment_content":"Q1：HTTP 协议允许在在请求行里使用完整的 URI，但为什么浏览器没有这么做呢？<br><br>A1：意义是一样的，整个请求都可以拿到完整的URI。<br><br>Q2：URI 的查询参数和头字段很相似，都是 key-value 形式，都可以任意自定义，那么它们在使用时该如何区别呢？<br><br>A2：先讲相同的，都是KV结构。再将不同的，第一、最明显的区别，查询参数，是跟整个URL一起出现的，而header如果不打开开发者模式，或者不抓包都看不到带了什么参数。第二、规则不同，头部字段不允许下划线、空格，查询字段key可以。补充：评论区老师答复“query参数针对的是资源（uri），而字段针对的是本次请求，也就是报文。一个是长期、稳定的，一个是短期、临时的。”","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529882,"discussion_content":"说的很好，加油。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636172257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227280,"user_name":"stg609","can_delete":false,"product_type":"c1","uid":1073025,"ip_address":"","ucode":"FB70A75A891BB8","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/81/1c614f4a.jpg","comment_is_top":false,"comment_ctime":1592352097,"is_pvip":false,"replies":[{"id":"83753","content":"uri里的域名不区分大小写，但后面的path是区分的，所以unix和Windows有区别。","user_name":"作者回复","comment_id":227280,"uid":"1181974","ip_address":"","utype":1,"ctime":1592356923,"user_name_real":"罗剑锋"}],"discussion_count":1,"race_medal":0,"score":"5887319393","product_id":100029001,"comment_content":"Url 是否区分大小写？网站部署在 unix 中的话好像默认是区分的，但windows就不区分。这个是否在rfc 标准中有定义？是否推荐小写？","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498571,"discussion_content":"uri里的域名不区分大小写，但后面的path是区分的，所以unix和Windows有区别。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592356923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173224,"user_name":"GodMaker","can_delete":false,"product_type":"c1","uid":1809440,"ip_address":"","ucode":"336D7F9091A716","user_header":"","comment_is_top":false,"comment_ctime":1579481988,"is_pvip":false,"replies":[{"id":"67184","content":"get其实任何时候都可以带body，但因为一般get要附带的请求参数都比较小，所以通常都是用query参数解决了。<br><br>如果你的请求比较复杂，query表示不了，那么在body里带上json数据就很合适。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1579496156,"ip_address":"","comment_id":173224,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5874449284","product_id":100029001,"comment_content":"老师，关于小贴士第三点有点疑问：我一般看到的都是POST请求带body，但是GET带body没见过（虽然规范好像允许）。因为前端一般是用浏览器的XMLHttpRequest类实现Ajax通信的，这个类的实例有个send方法，对于GET和HEAD请求send方法的参数只能是null，也就是body里面什么都不发送，所以想问下GET带body可以在什么场景出现呢？","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482002,"discussion_content":"get其实任何时候都可以带body，但因为一般get要附带的请求参数都比较小，所以通常都是用query参数解决了。\n\n如果你的请求比较复杂，query表示不了，那么在body里带上json数据就很合适。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579496156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160329,"user_name":"小侠","can_delete":false,"product_type":"c1","uid":1045025,"ip_address":"","ucode":"A35A61061E41B2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/21/00600713.jpg","comment_is_top":false,"comment_ctime":1575937271,"is_pvip":false,"replies":[{"id":"61191","content":"统一资源名称（英语：Uniform Resource Name，缩写：URN），已经基本不使用了，所以URI现在差不多可以认为就是URL。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1575939519,"ip_address":"","comment_id":160329,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5870904567","product_id":100029001,"comment_content":"URI包含有 URL 和 URN 两个部分，后面有说URI等同于URL，那URN是什么？这部分没听明白","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477337,"discussion_content":"统一资源名称（英语：Uniform Resource Name，缩写：URN），已经基本不使用了，所以URI现在差不多可以认为就是URL。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575939519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157155,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1575044063,"is_pvip":false,"replies":[{"id":"60453","content":"笔误，写错了，非常抱歉，我尽快改过来。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1575248925,"ip_address":"","comment_id":157155,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870011359","product_id":100029001,"comment_content":"老师在本篇的- URI 的查询参数这个小节那里：“浏览器和客户端都可以按照这个格式把长串的查询参数解析成可理解的字典或关联数组形式。” 您读读是：“浏览器和服务器都可以.....”。想请问一下，老师你的本意是“浏览器和客户端”还是“浏览器和服务器”啊？","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476343,"discussion_content":"笔误，写错了，非常抱歉，我尽快改过来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575248925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129328,"user_name":"FENGYISHUN","can_delete":false,"product_type":"c1","uid":1351791,"ip_address":"","ucode":"40B73848D02DBD","user_header":"https://static001.geekbang.org/account/avatar/00/14/a0/6f/86ab7184.jpg","comment_is_top":false,"comment_ctime":1567088996,"is_pvip":false,"replies":[{"id":"48136","content":"有的uri会对uri解码，显示正常的文字，但有的uri太长太怪，可能就不显示正常文字了。<br><br>但本质上uri里的非ascii码都是被编码的，这是rfc规定的。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1567119670,"ip_address":"","comment_id":129328,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862056292","product_id":100029001,"comment_content":"为什么有的uri是可以看到编码后的乱码的，有的看不到？","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465403,"discussion_content":"有的uri会对uri解码，显示正常的文字，但有的uri太长太怪，可能就不显示正常文字了。\n\n但本质上uri里的非ascii码都是被编码的，这是rfc规定的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567119670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121315,"user_name":"四月的紫色花","can_delete":false,"product_type":"c1","uid":1564190,"ip_address":"","ucode":"67863848E5D766","user_header":"https://static001.geekbang.org/account/avatar/00/17/de/1e/ca04d2c5.jpg","comment_is_top":false,"comment_ctime":1565098164,"is_pvip":false,"replies":[{"id":"44580","content":"回答正确。<br><br>不过第二个问题怪我没说清楚，实际上想问的是这两者形式很相近，应该在什么场景下使用查询参数或者头字段。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1565102066,"ip_address":"","comment_id":121315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860065460","product_id":100029001,"comment_content":"1.HTTP 协议允许在在请求行里使用完整的 URI，但为什么浏览器没有这么做呢？<br>       因为在请求头里的一些字段，比如host里已经有了，没必要重复写。<br>2.URI 的查询参数和头字段很相似，都是 key-value 形式，都可以任意自定义，那么它们在使用时该如何区别呢？<br>     查询参数会以？开头的解析出来的时候，前面会说明是query 参数。","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461737,"discussion_content":"回答正确。\n\n不过第二个问题怪我没说清楚，实际上想问的是这两者形式很相近，应该在什么场景下使用查询参数或者头字段。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565102066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117276,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1564018094,"is_pvip":true,"replies":[{"id":"42975","content":"uri与http同时发明的，里的协议名可以扩展，比如后来就添加了WebSocket。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1564034125,"ip_address":"","comment_id":117276,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858985390","product_id":100029001,"comment_content":"老师，URI  是发明在http之前吧？居然包含了那么多应用层协议（ssh,ftp,file ,http ）。","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459893,"discussion_content":"uri与http同时发明的，里的协议名可以扩展，比如后来就添加了WebSocket。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564034125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111976,"user_name":"sam700000","can_delete":false,"product_type":"c1","uid":1069133,"ip_address":"","ucode":"C2ABDDC56B2D50","user_header":"https://static001.geekbang.org/account/avatar/00/10/50/4d/db91e218.jpg","comment_is_top":false,"comment_ctime":1562645905,"is_pvip":true,"replies":[{"id":"40764","content":"加user和password的uri可以用，但不推荐，非常不安全，所以我就不过多介绍了，避免“误入歧途”。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562677301,"ip_address":"","comment_id":111976,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857613201","product_id":100029001,"comment_content":"之前用https做git remote的引用地址时，git pull 时为了避免交互输入密码和用户名就使用https就直接在URL加user和password，后来就都改ssh的方式了","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457527,"discussion_content":"加user和password的uri可以用，但不推荐，非常不安全，所以我就不过多介绍了，避免“误入歧途”。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562677301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108640,"user_name":"赵健","can_delete":false,"product_type":"c1","uid":1260246,"ip_address":"","ucode":"553E417EE92EFB","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/d6/485590bd.jpg","comment_is_top":false,"comment_ctime":1561818573,"is_pvip":false,"replies":[{"id":"39417","content":"按照rfc3986，#fragment必须在qurey后面，你的这种情况可能是实现做了特殊的兼容处理，个人建议还是最好按标准来。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561943550,"ip_address":"","comment_id":108640,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856785869","product_id":100029001,"comment_content":"老师，你好，想请问下，query和fragment是不是没有严格的顺序，工作中发现query写在fragment后面也没有什么问题","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456065,"discussion_content":"按照rfc3986，#fragment必须在qurey后面，你的这种情况可能是实现做了特殊的兼容处理，个人建议还是最好按标准来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561943550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107229,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1561506201,"is_pvip":false,"replies":[{"id":"38795","content":"我印象里应该都是用utf-8编码转义的。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561510985,"ip_address":"","comment_id":107229,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856473497","product_id":100029001,"comment_content":"想请教一下老师，URI 里面对特殊字符和 ASCII 以外的字符集转义是完全使用 UTF-8 编码吗？还是说只是针对部分的字符使用 UTF-8 转义，另外的字符使用其他的编码方式？","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455429,"discussion_content":"我印象里应该都是用utf-8编码转义的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561510985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107040,"user_name":"亚洲舞王.尼古拉斯赵四","can_delete":false,"product_type":"c1","uid":1443078,"ip_address":"","ucode":"7159F5D7232696","user_header":"https://static001.geekbang.org/account/avatar/00/16/05/06/f5979d65.jpg","comment_is_top":false,"comment_ctime":1561445314,"is_pvip":false,"replies":[{"id":"38747","content":"看来大家没明白我问题的意思，怪我没说清楚。<br><br>这个问题的意思是query是kv形式，头字段也是kv形式，应该如何正确地使用它们，它们有什么区别。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561453416,"ip_address":"","comment_id":107040,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856412610","product_id":100029001,"comment_content":"问题2中，get请求“?”后面的参数是放在请求头中带过去的，应该是通过？和&amp;区分的，如果是post请求的话，参数是在body中携带的，可以直接在body中查找的吧，这样就可以和请求头中的字段区分了","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455337,"discussion_content":"看来大家没明白我问题的意思，怪我没说清楚。\n\n这个问题的意思是query是kv形式，头字段也是kv形式，应该如何正确地使用它们，它们有什么区别。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561453416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105962,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1561115722,"is_pvip":true,"replies":[{"id":"38326","content":"统一资源名，现在用的很少。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561124953,"ip_address":"","comment_id":105962,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5856083018","product_id":100029001,"comment_content":"URN代表什么的？","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454890,"discussion_content":"统一资源名，现在用的很少。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561124953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105961,"user_name":"xmr","can_delete":false,"product_type":"c1","uid":1009622,"ip_address":"","ucode":"1BBF165F91F10B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/d6/2f5cb85c.jpg","comment_is_top":false,"comment_ctime":1561115570,"is_pvip":true,"replies":[{"id":"38323","content":"world wide web，见第一讲。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561124829,"ip_address":"","comment_id":105961,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856082866","product_id":100029001,"comment_content":"www表示什么意思?比如https:&#47;&#47;www.baidu.com","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454889,"discussion_content":"world wide web，见第一讲。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561124829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105959,"user_name":"彧豪","can_delete":false,"product_type":"c1","uid":1161233,"ip_address":"","ucode":"8979F477E0BC5B","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/11/26838646.jpg","comment_is_top":false,"comment_ctime":1561115318,"is_pvip":false,"replies":[{"id":"38324","content":"弄明白了就好。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561124846,"ip_address":"","comment_id":105959,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856082614","product_id":100029001,"comment_content":"哦哦，原来是这样，+号属于非法字符，以及标准的做法是前端encode之后再给后端传过去，后端貌似会自动decode","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454888,"discussion_content":"弄明白了就好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561124846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105728,"user_name":"古夜","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1561079176,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856046472","product_id":100029001,"comment_content":"太简单。。","like_count":1},{"had_liked":false,"id":355953,"user_name":"lets get it on","can_delete":false,"product_type":"c1","uid":3166082,"ip_address":"上海","ucode":"8F7BA7FE387089","user_header":"https://static001.geekbang.org/account/avatar/00/30/4f/82/96e02305.jpg","comment_is_top":false,"comment_ctime":1661867648,"is_pvip":false,"replies":[{"id":"129574","content":"nice.","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1661923717,"ip_address":"上海","comment_id":355953,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1661867648","product_id":100029001,"comment_content":"不重复写uri也有节约资源这方面的原因吧，计算机的核心思想就是抠","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585977,"discussion_content":"nice.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661923717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345236,"user_name":"ゝ骑着小车去兜风。","can_delete":false,"product_type":"c1","uid":2600957,"ip_address":"","ucode":"35F9E5360DF42C","user_header":"https://static001.geekbang.org/account/avatar/00/27/af/fd/a1708649.jpg","comment_is_top":false,"comment_ctime":1652150354,"is_pvip":false,"replies":[{"id":"126059","content":"<br>1.这个不太清楚，可能是网站，也可能是浏览器。<br><br>2.body部分属于应用部分了，不是uri，要应用自己去编码。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1652233326,"ip_address":"","comment_id":345236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1652150354","product_id":100029001,"comment_content":"老师你好，有个问题需要请教下。您在文章URI编码中提到“在 URI 里只能使用 ASCII 码......直接把非 ASCII 码或特殊字符转换成十六进制字节值，然后前面再加上一个“%”。”,请问这个转换过程是由浏览器做的吧？ 还有就是对于http消息content-type为application&#47;x-www-form-urlencoded的body内容为access_id=MTAuMTYxLjQyLjE3Mwa00a&amp;password=!@#$%^&amp;    这个body内容的password值都为特殊字符，它的值不需要进行转译吧。  还请老师解答","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571448,"discussion_content":"\n1.这个不太清楚，可能是网站，也可能是浏览器。\n\n2.body部分属于应用部分了，不是uri，要应用自己去编码。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652233326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339712,"user_name":"cake","can_delete":false,"product_type":"c1","uid":1966533,"ip_address":"","ucode":"55A7FC6CC1204C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","comment_is_top":false,"comment_ctime":1648305310,"is_pvip":false,"replies":[{"id":"124243","content":"主机上会有一个hosts文件，实现了主机名到IP地址的简单解析。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1648438210,"ip_address":"","comment_id":339712,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1648305310","product_id":100029001,"comment_content":"请问下 主机名 和 域名应该不是一个东西吧 0-0，为啥URI主机名可以以域名方式显示呢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558720,"discussion_content":"主机上会有一个hosts文件，实现了主机名到IP地址的简单解析。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648438210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339711,"user_name":"cake","can_delete":false,"product_type":"c1","uid":1966533,"ip_address":"","ucode":"55A7FC6CC1204C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","comment_is_top":false,"comment_ctime":1648305268,"is_pvip":false,"replies":[{"id":"124242","content":"有编码表可以查，另外很多编程语言也可以转换。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1648438120,"ip_address":"","comment_id":339711,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1648305268","product_id":100029001,"comment_content":"老师 请问下 非ASCII码 就是 特殊 字符么 0-0。特殊字符你怎么知道 他十六进制是多少呢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558719,"discussion_content":"有编码表可以查，另外很多编程语言也可以转换。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648438120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328417,"user_name":"刘敏","can_delete":false,"product_type":"c1","uid":1417888,"ip_address":"","ucode":"AB3FB7D7093D71","user_header":"https://static001.geekbang.org/account/avatar/00/15/a2/a0/df09ef0f.jpg","comment_is_top":false,"comment_ctime":1640710296,"is_pvip":false,"replies":[{"id":"119722","content":"great","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1640827411,"ip_address":"","comment_id":328417,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640710296","product_id":100029001,"comment_content":"1. HTTP 协议允许在在请求行里使用完整的 URI，但为什么浏览器没有这么做呢？<br>因为URI中的方案和host都已经在起始行的协议和Host中传输了，这样可以减少传输字节大小。<br>2. URI 的查询参数和头字段很相似，都是 key-value 形式，都可以任意自定义，那么它们在使用时该如何区别呢？（具体分析可以在“答疑篇”第 41 讲中的 URI 查询参数和头字段部分查看）<br>两者的作用不太一样，query表达的是对资源附加的额外要求，比如我需要查询前20条数据，而请求头中的键值对应该是每次请求都会传输给服务器。<br>一个属于URI的query部分，一个属于http协议中的请求头部分，服务器在获取的时候应该也是不一致的","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542680,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640827411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323345,"user_name":"加奶油的泡芙","can_delete":false,"product_type":"c1","uid":2252455,"ip_address":"","ucode":"2158A94A8E0D35","user_header":"https://static001.geekbang.org/account/avatar/00/22/5e/a7/98815ba7.jpg","comment_is_top":false,"comment_ctime":1637848901,"is_pvip":false,"replies":[{"id":"117343","content":"great","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1637906356,"ip_address":"","comment_id":323345,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637848901","product_id":100029001,"comment_content":"头部字段的KV值是为了额外补充一些报文的信息，而URI中query中的KV值是为了对资源信息进行补充、查找。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533567,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637906356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320705,"user_name":"路漫漫","can_delete":false,"product_type":"c1","uid":1273044,"ip_address":"","ucode":"F70F1DC612DE9D","user_header":"https://static001.geekbang.org/account/avatar/00/13/6c/d4/85ef1463.jpg","comment_is_top":false,"comment_ctime":1636461742,"is_pvip":false,"replies":[{"id":"116331","content":"一般来说，post的数据都是放在body里的，不过其实http协议并没有做这个限制，我们把数据放在query args里也可以。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1636522431,"ip_address":"","comment_id":320705,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636461742","product_id":100029001,"comment_content":"老师，post 传的数据是放在实体里面了吗","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530088,"discussion_content":"一般来说，post的数据都是放在body里的，不过其实http协议并没有做这个限制，我们把数据放在query args里也可以。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636522431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293066,"user_name":"X青年","can_delete":false,"product_type":"c1","uid":2010313,"ip_address":"","ucode":"E6EB3CCA7DB1C8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJH3dribPS9AibkGhjN0giaWAa45SD8lCxkStyQrJibl7CPJRDNicvicwM224tHd3gLq2wvWbMAQ70IF6IA/132","comment_is_top":false,"comment_ctime":1621180278,"is_pvip":false,"replies":[{"id":"106099","content":"#fragment只能在客户端、浏览器上看到，当浏览器与服务器通信的时候，发送的请求里是没有#fragment，所以服务器是看不到的。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1621212375,"ip_address":"","comment_id":293066,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1621180278","product_id":100029001,"comment_content":"“但片段标识符仅能由浏览器这样的客户端使用，服务器是看不到的。也就是说，浏览器永远不会把带“#fragment”的 URI 发送给服务器，服务器也永远不会用这种方式去处理资源的片段。”<br><br>老师，这段话我没看明白，浏览器不是会发给服务器吗？怎么又说永远不会把#fragment发给服务器？服务器又不会用这种方式处理，又是指什么意思？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520054,"discussion_content":"#fragment只能在客户端、浏览器上看到，当浏览器与服务器通信的时候，发送的请求里是没有#fragment，所以服务器是看不到的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621212375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2010313,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJH3dribPS9AibkGhjN0giaWAa45SD8lCxkStyQrJibl7CPJRDNicvicwM224tHd3gLq2wvWbMAQ70IF6IA/132","nickname":"X青年","note":"","ucode":"E6EB3CCA7DB1C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374594,"discussion_content":"老师，意思如果中间抓包的话看不到？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621259162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289090,"user_name":"Leolee","can_delete":false,"product_type":"c1","uid":1928428,"ip_address":"","ucode":"2EC31B0AE5B03D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/8SdpYbicwXVXt0fIN7L0f2TSGIScQIhWXT7vTze9GHBsjTvDyyQW9KEPsKBpRNs4anV61oF59BZqHf586b3o4ibw/132","comment_is_top":false,"comment_ctime":1618856206,"is_pvip":false,"replies":[{"id":"104891","content":"笔记整理的很完善，相信会对其他同学有很大的帮助。great。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1618877272,"ip_address":"","comment_id":289090,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618856206","product_id":100029001,"comment_content":"作业：<br>1、因为在请求头里已经有了，没必要再浪费资源去在请求行带上，这样可以节省资源。<br>2、字段是对本次请求的，query是对访问的资源，作用域和时效性不同，前者就是本次短时使用，后者是长期使用。<br>作业能写出来主要是靠看留言，其实都是似懂非懂的，先把笔记做好，整个课程学完再精简笔记成思维导图，最后再来看一次问题，应该就彻底吸收了。<br><br>什么是URL<br>客户端发送最常用的请求方法是GET，它的作用是从服务器的某个资源上获取数据，另一个是POST，向某个资源提交数据。而令服务器区分、标记资源的方法就是使用URI(Uniform Resource Identifier)，也即统一资源标识符标识符，因为它经常出现在浏览器的地址栏里，所以俗称“网址”。<br>严格来讲，URI不完全等同于网址，它包含有URL和URN（ Uniform Resource Name 统一资源名称，目前已经基本不使用了，所以可以认为URI=URL）两个部分，在HTTP世界里用的网址实际上是URL——统一资源定位符（Uniform Resource Locator）。但因为URL实在太普及了，所以常常把两者简单地视为相等。<br>URL非常重要，要搞懂HTTP甚至网络应用，就必须搞懂URI。<br>直接理解为URL=URL即可。 <br><br>URI的格式<br>URI本质上是一个字符串，作用是唯一地标记资源的位置或者名字。它不仅能够标记万维网的资源，也可以标记其他的，如邮件系统、本地文件系统等任意资源，这个资源可以是硬盘存储的静态文本、页面数据，也可以是由JAVA、PHP提供的动态服务。<br><br>scheme（方案名、协议名），表示资源应该使用哪种协议来访问，常见的有http、https，不常见的有ftp、ldap、file、news等。这个是必须要有的，因为浏览器是根据URI里的scheme来决定下一步怎么走的，如果缺失了，后面的地址写得再完善也没用。<br><br>authority（权威的意思，资源所在的主机名，掌握着资源自然就是权威了）：通常形式是“host：port”，即主机名加端口号。主机名是IP地址或域名的形式，必须要有，否则浏览器就会找不到服务器，端口号则有时候可以忽略，因为有些协议有默认端口号，例如HTTP是80,https是443。<br><br>path（路径）：这个就类似文件系统的目录、路径的表示方式，用&#47;分隔，这是UNIX系统的风格，与现在windows的\\相反。这个其实与scheme后面的“:&#47;&#47;”是一样的。URI的path部分必须以&#47;开始，必须包含&#47;，看到authority后的&#47;就知道path从这个&#47;开始了。<br><br>客户端和服务器看到的URI是不一样的，客户端看到的必须是完整的URI，使用特定的协议去链接特定的主机，而服务器看到的只是报文请求行里被删除了协议名和主机名的URI。<br><br>query（查询的意思）：以？开始，但不包含？，表示对资源附加的额外要求。查询参数query有一套自己的格式，是多个”key=value“的字符串，这些KV值用字符”&amp;“链接，浏览器和服务器都可以按照这个格式把长串的查询参数解析成可理解的字典或关联数组式。<br><br>以上是常用的HTTP协议的URI组成部分，还有一个真正的URI组成，多了一个锚点和明文形式的username、password，但这种已经不推荐使用了，因为它是明文形式，存在严重的安全隐患。片段表示符”#fragment“是URI所定位的资源内部的一个锚点或者说是标签，浏览器在获取志愿后直接跳到它指示的位置，但只能由客户端使用，浏览器永远不会把带”#fragment“的URI发送给服务器，服务器也永远不会用这种方式去处理资源的片段。<br><br>URI的编码<br>URI里只能使用ASCII码，但可以通过编码机制，对于ASCII码以外的字符集和特殊字符左一个转义操作，也即escape和unescape，转义和反转义。（目前已被废弃，现在的encodeURI原理是把字符（unicode）编码成utf-8，utf-8用1-4个字节表示，所以每个字节换成16进制并在签名用%链接，最后把每个字节转换的结果链接起来。）<br>URI的转义规则就是把非ASCII码或特殊字符转换成十六进制字节值，然后在前面加上一个%符。例如，空格转义成”%20“，？转义成”%3f“，而中文、日文则通常使用UTF-8编码后再转义，例如“银河”会被转义成“ %E9%93%B6%E6%B2%B3“。<br>这个转码规则令URI更加完美，可以支持任意的字符集用任何语言来标记资源。<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518817,"discussion_content":"笔记整理的很完善，相信会对其他同学有很大的帮助。great。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618877272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286491,"user_name":"纳兰容若","can_delete":false,"product_type":"c1","uid":1605876,"ip_address":"","ucode":"2E1EA2CDFDA1A9","user_header":"https://static001.geekbang.org/account/avatar/00/18/80/f4/564209ea.jpg","comment_is_top":false,"comment_ctime":1617343803,"is_pvip":true,"replies":[{"id":"104074","content":"这些都是开源的，在GitHub上都有文档。可以参考：https:&#47;&#47;github.com&#47;chronolaw&#47;openresty_dev<br>https:&#47;&#47;github.com&#47;chronolaw&#47;favorite-nginx<br>https:&#47;&#47;github.com&#47;openresty&#47;lua-nginx-module&#47;#nginx-api-for-lua<br><br>或者去看我的《openresty完全开发指南》","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1617366823,"ip_address":"","comment_id":286491,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617343803","product_id":100029001,"comment_content":"老师您好 第二遍看老师的教程 看老师的lua文件夹下有一些lua脚本 <br>我想请教一下如果我自己学习写这些脚本应该注意些什么呢<br>ngx.var.scheme这些API 有什么类似MSDN的文档么 如果出错了有调试的方法么<br><br>谢谢老师的回复","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518009,"discussion_content":"这些都是开源的，在GitHub上都有文档。可以参考：https://github.com/chronolaw/openresty_dev\nhttps://github.com/chronolaw/favorite-nginx\nhttps://github.com/openresty/lua-nginx-module/#nginx-api-for-lua\n\n或者去看我的《openresty完全开发指南》","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617366823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282969,"user_name":"Geek_Maggie","can_delete":false,"product_type":"c1","uid":1609708,"ip_address":"","ucode":"3B74088B2C7B93","user_header":"https://static001.geekbang.org/account/avatar/00/18/8f/ec/c30b45d4.jpg","comment_is_top":false,"comment_ctime":1615478444,"is_pvip":false,"replies":[{"id":"102685","content":"回答的挺好，关于第二个问题，可以参考后面的答疑篇。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615508936,"ip_address":"","comment_id":282969,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615478444","product_id":100029001,"comment_content":"1. 协议名和主机名已经分别出现在了请求行的版本号和请求头的 Host 字段里，没有必要再重复；<br>2.URI 的查询参数和头字段很相似，都是 key-value 形式，都可以任意自定义，那么它们在使用时该如何区别呢？<br>答：在“？”后面跟着的就是查询参数。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516894,"discussion_content":"回答的挺好，关于第二个问题，可以参考后面的答疑篇。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615508936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282710,"user_name":"刘杰","can_delete":false,"product_type":"c1","uid":2460800,"ip_address":"","ucode":"5B3A55700D6063","user_header":"https://static001.geekbang.org/account/avatar/00/25/8c/80/7310baac.jpg","comment_is_top":false,"comment_ctime":1615371450,"is_pvip":false,"replies":[{"id":"102626","content":"对，其他不清楚的可以参考其他同学的回答，然后再自己琢磨琢磨。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615422207,"ip_address":"","comment_id":282710,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615371450","product_id":100029001,"comment_content":"1、因为请求行里已经有协议了，而且在请求头里可以找到主机名，所以可以不使用完整的URI<br>2、暂时不知道","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516818,"discussion_content":"对，其他不清楚的可以参考其他同学的回答，然后再自己琢磨琢磨。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615422207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277325,"user_name":"乘风破浪","can_delete":false,"product_type":"c1","uid":2406841,"ip_address":"","ucode":"937AF15F3FEBDC","user_header":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","comment_is_top":false,"comment_ctime":1612359111,"is_pvip":false,"replies":[{"id":"100647","content":"其实我个人觉得，除非是写论文，或者是咬文嚼字，大多数时候不用刻意区分url和uri。<br><br>urn现在基本是没有了，而uri基本等同于url。<br><br>另外，#intro不是资源，它是资源的定位锚点。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1612414231,"ip_address":"","comment_id":277325,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612359111","product_id":100029001,"comment_content":"URI,URL,URN的区别<br>参考一些文章是这么区分的：<br>估计面试时有点用<br>URI:<br>http:&#47;&#47;www.abc.com&#47;index.html#intro<br>URL:<br>http:&#47;&#47;www.abc.com&#47;index.html<br>URN:<br>www.abc.com&#47;index.html#intro<br><br>简单说http:&#47;&#47;www.abc.com&#47;index.html#intro是一个URI,要访问的资源是#intro<br>URL是带scheme的路径，即需要告诉访问方式<br>URN是不带scheme的资源名字<br>-----<br>如果是：<br>http:&#47;&#47;www.abc.com&#47;index.html<br>怎么按上面的逻辑分析？<br>URI:<br>http:&#47;&#47;www.abc.com&#47;index.html<br>URL:<br>http:&#47;&#47;www.abc.com&#47;<br>URN:<br>www.abc.com&#47;index.html<br>老师怎么看？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515004,"discussion_content":"其实我个人觉得，除非是写论文，或者是咬文嚼字，大多数时候不用刻意区分url和uri。\n\nurn现在基本是没有了，而uri基本等同于url。\n\n另外，#intro不是资源，它是资源的定位锚点。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612414231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277322,"user_name":"乘风破浪","can_delete":false,"product_type":"c1","uid":2406841,"ip_address":"","ucode":"937AF15F3FEBDC","user_header":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","comment_is_top":false,"comment_ctime":1612358609,"is_pvip":false,"replies":[{"id":"100648","content":"认真的态度值得表扬。<br><br>对于这个课下问题，其实并没有权威、标准的答案，因为http本身也没有对这个做出规定，只是业内已经形成了一些约定俗成的做法，按照这种做法做大家都方便，不按这个做也完全没问题。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1612414359,"ip_address":"","comment_id":277322,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612358609","product_id":100029001,"comment_content":"关于问题2，参考了41老师的解释，我有不同的理解。<br>因为查询参数是与 URI 关联在一起的，所以它针对的就是资源（URI），是长期、稳定的。<br>---查询参数是针对资源的，即和资源强相关，接收此类参数并处理的对象主要是服务器上的服务程序，如JS, PHP等，而不会是web服务器本身。至于资源是否稳定或长期，到不一定。<br>而头字段是与一次 HTTP 请求关联的，针对的是本次请求报文，所以是短期、临时的。<br>---如果参数放在头字段里，接收此类参数并处理的首要对象是web服务器或有处理此类HTTP头部能力的服务程序。如果情况1，则web服务器得定制魔改。情况2本质和用query参数查询没有区别。<br>简单来说，就是两者的作用域和时效性是不同的。<br>---所以本质区别是处理对象是不同，如果用query传参，则处理者通常是服务程序，如果通过头字段传参，则要么定制web，要么服务程序要能处理HTTP头字段。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515003,"discussion_content":"认真的态度值得表扬。\n\n对于这个课下问题，其实并没有权威、标准的答案，因为http本身也没有对这个做出规定，只是业内已经形成了一些约定俗成的做法，按照这种做法做大家都方便，不按这个做也完全没问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612414359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228611,"user_name":"snake","can_delete":false,"product_type":"c1","uid":1217535,"ip_address":"","ucode":"A74B3D02B017FB","user_header":"https://static001.geekbang.org/account/avatar/00/12/93/ff/87d8de89.jpg","comment_is_top":false,"comment_ctime":1592752360,"is_pvip":false,"replies":[{"id":"84315","content":"在浏览器地址栏里显示的不一定正确，可以找一些在线uri编码解码工具，试一下就可以了。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592781511,"ip_address":"","comment_id":228611,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1592752360","product_id":100029001,"comment_content":"为什么我：http:&#47;&#47;www.chrono.com:8080&#47;11-1?你%20?@@&#47;&amp;我去，结果是http:&#47;&#47;www.chrono.com:8080&#47;11-1?%E4%BD%A0%20?@@&#47;&amp;%E6%88%91%E5%8E%BB，@?&#47;不是会转义吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499103,"discussion_content":"在浏览器地址栏里显示的不一定正确，可以找一些在线uri编码解码工具，试一下就可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592781511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"乘风破浪","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347891,"discussion_content":"?@就是不用编码，因为它们是标准ASCII字符","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612355044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226314,"user_name":"wordMan","can_delete":false,"product_type":"c1","uid":1335088,"ip_address":"","ucode":"3C8A681EF5E278","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/30/4ae82e16.jpg","comment_is_top":false,"comment_ctime":1592033414,"is_pvip":false,"replies":[{"id":"83366","content":"encode的规范自然就是decode的规范了，同样的算法反着来就行。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592091591,"ip_address":"","comment_id":226314,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592033414","product_id":100029001,"comment_content":"既然URI有encode,那应该也有服务端的decode吧，decode是否有规范，还是不同的web服务器有不同的方式","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498187,"discussion_content":"encode的规范自然就是decode的规范了，同样的算法反着来就行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592091591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226201,"user_name":"潇潇雨歇","can_delete":false,"product_type":"c1","uid":1251429,"ip_address":"","ucode":"4BD52BF0F0A084","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","comment_is_top":false,"comment_ctime":1591978250,"is_pvip":false,"replies":[{"id":"83329","content":"说的很对。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592023506,"ip_address":"","comment_id":226201,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591978250","product_id":100029001,"comment_content":"1、请求头有相关信息了，不需要重复<br>2、query针对的是资源，字段针对的是这次请求","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498146,"discussion_content":"说的很对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592023506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225638,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1591803394,"is_pvip":true,"replies":[{"id":"83151","content":"学习态度非常认真，nice。<br><br>第二个问题可以再参考第41讲。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1591838060,"ip_address":"","comment_id":225638,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591803394","product_id":100029001,"comment_content":"1.已经有了Host字段可以用来定位主机，不需要再请求行中加入额外的字符，减小http请求的总字符数。<br>2.query字符是URI的一部分，URI属于请求起始行的一部分。请求头字段属于request head的一部分。在使用上，一般用于直接对数据库进行操作所需要的参数，会使用query参数。head字段中一般用于对请求本身的功能上做定义一些附加说明","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497923,"discussion_content":"学习态度非常认真，nice。\n\n第二个问题可以再参考第41讲。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591838060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209843,"user_name":"cc","can_delete":false,"product_type":"c1","uid":1697629,"ip_address":"","ucode":"114C613276C6AC","user_header":"https://static001.geekbang.org/account/avatar/00/19/e7/5d/deeb2580.jpg","comment_is_top":false,"comment_ctime":1587624151,"is_pvip":false,"replies":[{"id":"78271","content":"这个是URL的编码标准，必须这么做，但&#39;+&#39;和&#39; &#39;肯定是不同的代码。<br><br>如果会写程序的话很多语言里都有专门的编码解码函数，可以转换成可读的形式，也可以搜一下有没有类似功能的网页版工具。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1587626005,"ip_address":"","comment_id":209843,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587624151","product_id":100029001,"comment_content":"URL会把空格和+  都转成%20，这种怎么解决呢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492877,"discussion_content":"这个是URL的编码标准，必须这么做，但&amp;#39;+&amp;#39;和&amp;#39; &amp;#39;肯定是不同的代码。\n\n如果会写程序的话很多语言里都有专门的编码解码函数，可以转换成可读的形式，也可以搜一下有没有类似功能的网页版工具。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587626005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206394,"user_name":"珈蓝白塔","can_delete":false,"product_type":"c1","uid":1131137,"ip_address":"","ucode":"FADBA4B1EC768D","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/81/788cd471.jpg","comment_is_top":false,"comment_ctime":1586853181,"is_pvip":false,"replies":[{"id":"77221","content":"说的对。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1586927333,"ip_address":"","comment_id":206394,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586853181","product_id":100029001,"comment_content":"浏览器没有在请求行里再次把完整的 URI 显示一遍，是为了尽量减少发送数据包的大小而提升性能吧，因为协议和主机名在其他地方已经标明了。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491773,"discussion_content":"说的对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586927333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205144,"user_name":"MClink","can_delete":false,"product_type":"c1","uid":1435733,"ip_address":"","ucode":"F479190923355C","user_header":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","comment_is_top":false,"comment_ctime":1586538915,"is_pvip":true,"replies":[{"id":"76699","content":"不客气，后面还有很多要学的，继续努力。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1586585436,"ip_address":"","comment_id":205144,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586538915","product_id":100029001,"comment_content":"讲的很细很全也很易懂，谢谢老师","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491404,"discussion_content":"不客气，后面还有很多要学的，继续努力。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586585436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197778,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1585398062,"is_pvip":false,"replies":[{"id":"74818","content":"<br>1.端口分配由国际组织决定，好像是ICANN吧。<br><br>2.需要去看tcp&#47;ip协议，可以把ip地址比喻成楼号，端口是房间号。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585532215,"ip_address":"","comment_id":197778,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585398062","product_id":100029001,"comment_content":"老师，请教一下80或443或其他协议的默认端口都是怎么选择的？另外，端口的本质是什么？操作系统里有一堆端口，供各种软件使用，不过他的本质是啥？<br>好像一座城的城门，每个软件都有默认的进出城门口，也可以走非默认的，不过一旦有人用了，别的软件就不能再用！","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489598,"discussion_content":"\n1.端口分配由国际组织决定，好像是ICANN吧。\n\n2.需要去看tcp/ip协议，可以把ip地址比喻成楼号，端口是房间号。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585532215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194202,"user_name":"Gasnerd","can_delete":false,"product_type":"c1","uid":1440263,"ip_address":"","ucode":"3630276571AF66","user_header":"https://static001.geekbang.org/account/avatar/00/15/fa/07/1d50f530.jpg","comment_is_top":false,"comment_ctime":1585037320,"is_pvip":false,"replies":[{"id":"73978","content":"great。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585040188,"ip_address":"","comment_id":194202,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585037320","product_id":100029001,"comment_content":"这三个斜杠里的前两个属于 URI 特殊分隔符“:&#47;&#47;”，然后后面的“&#47;D:&#47;http_study&#47;www&#47;”是路径，而中间的主机名被“省略”了。这实际上是 file 类型 URI 的“特例”，它允许省略主机名，默认是本机 localhost。<br><br>i have already tested the addtion between &#39;:&#47;&#47;&#39; and &#39;&#47;&#39; with &#39;localhost&#39;, that is okay. ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488781,"discussion_content":"great。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585040188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192065,"user_name":"Change","can_delete":false,"product_type":"c1","uid":1161260,"ip_address":"","ucode":"FB60D2378C9F02","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/2c/0f7baf3a.jpg","comment_is_top":false,"comment_ctime":1584835786,"is_pvip":false,"replies":[{"id":"73709","content":"<br>1.对。<br><br>2.理解的比较正确，当然这个协议里没有强制规定，还是要看使用者自己去把握，可以参考其他同学的讨论和解答。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1584926809,"ip_address":"","comment_id":192065,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1584835786","product_id":100029001,"comment_content":"1. 因为协议名和主机名已经分别出现在了请求行的版本号和请求头的 Host 字段里，没有必要再重复。<br>2.我觉得头字段是针对协议层的设置供协议层分辨与使用，查询参数是对具体的某个操作个设置的参数内容。<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488319,"discussion_content":"\n1.对。\n\n2.理解的比较正确，当然这个协议里没有强制规定，还是要看使用者自己去把握，可以参考其他同学的讨论和解答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584926809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179011,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1581872050,"is_pvip":false,"replies":[{"id":"69487","content":"链接里会用#标记锚点，点链接自然浏览器就知道了。<br><br>如果定位错误，那就显示找不到位置，直接显示整个页面。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1581910260,"ip_address":"","comment_id":179011,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581872050","product_id":100029001,"comment_content":"浏览器最开始如何知道锚点位置，万一资源已更新锚点定位错误，浏览器会作何显示？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484061,"discussion_content":"链接里会用#标记锚点，点链接自然浏览器就知道了。\n\n如果定位错误，那就显示找不到位置，直接显示整个页面。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581910260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166070,"user_name":"Wr","can_delete":false,"product_type":"c1","uid":1713790,"ip_address":"","ucode":"738B316AA2AD66","user_header":"https://static001.geekbang.org/account/avatar/00/1a/26/7e/823c083e.jpg","comment_is_top":false,"comment_ctime":1577374239,"is_pvip":false,"replies":[{"id":"63312","content":"基本正确，第二个问题可参考答疑篇。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1577407242,"ip_address":"","comment_id":166070,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577374239","product_id":100029001,"comment_content":"1. 请求头中已包含这部分信息，后面不重复，节约资源<br>2. query针对访问的资源，头字段只针对客户端本身","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479383,"discussion_content":"基本正确，第二个问题可参考答疑篇。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577407242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161249,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1576156681,"is_pvip":false,"replies":[{"id":"61490","content":"是的，域名其实就是ip地址、主机名的替代，自然没有后面路径、参数哪些东西。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1576198237,"ip_address":"","comment_id":161249,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576156681","product_id":100029001,"comment_content":"Dns解析时是不是只截取域名去解析，？后的就不管了","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477660,"discussion_content":"是的，域名其实就是ip地址、主机名的替代，自然没有后面路径、参数哪些东西。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576198237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156255,"user_name":"涯渊","can_delete":false,"product_type":"c1","uid":1443237,"ip_address":"","ucode":"F364D121087F1F","user_header":"https://static001.geekbang.org/account/avatar/00/16/05/a5/69955c34.jpg","comment_is_top":false,"comment_ctime":1574843680,"is_pvip":false,"replies":[{"id":"60011","content":"这个应该是写的时候大脑瞬间短路了，应该是GET，感谢指正。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1574847053,"ip_address":"","comment_id":156255,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574843680","product_id":100029001,"comment_content":"课外小贴士03，如果查询参数过长，为什么是POST方法呢？查询不应该是获取数据GET方法吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476050,"discussion_content":"这个应该是写的时候大脑瞬间短路了，应该是GET，感谢指正。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574847053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110305,"user_name":"响雨","can_delete":false,"product_type":"c1","uid":1581705,"ip_address":"","ucode":"C5FB3A3BC68F92","user_header":"https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg","comment_is_top":false,"comment_ctime":1562227396,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562227396","product_id":100029001,"comment_content":"请求头的key-value形式一般携带auth-token，可能会很长的数据。<br>查询字符串一般是放start_time=xxx&amp;end_time=xxx就很方便。","like_count":0},{"had_liked":false,"id":105733,"user_name":"石维康","can_delete":false,"product_type":"c1","uid":1067564,"ip_address":"","ucode":"E39ED8416B2C01","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/2c/f8451d77.jpg","comment_is_top":false,"comment_ctime":1561079675,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561079675","product_id":100029001,"comment_content":"1. 没必要重复，也降低了服务端解析URI的复杂度<br>2. URI的查询参数对用户直接可见，有利于重复发送。也方便web程序进行自定义。","like_count":0}]}