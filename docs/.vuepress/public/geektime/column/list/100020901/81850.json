{"id":81850,"title":"37 | æ¡ˆä¾‹ç¯‡ï¼šDNS è§£ææ—¶å¿«æ—¶æ…¢ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·å­¦ä¹ äº†ç½‘ç»œæ€§èƒ½çš„è¯„ä¼°æ–¹æ³•ã€‚ç®€å•å›é¡¾ä¸€ä¸‹ï¼ŒLinux ç½‘ç»œåŸºäº TCP/IP åè®®æ ˆæ„å»ºï¼Œè€Œåœ¨åè®®æ ˆçš„ä¸åŒå±‚ï¼Œæˆ‘ä»¬æ‰€å…³æ³¨çš„ç½‘ç»œæ€§èƒ½ä¹Ÿä¸å°½ç›¸åŒã€‚</p><p>åœ¨åº”ç”¨å±‚ï¼Œæˆ‘ä»¬å…³æ³¨çš„æ˜¯åº”ç”¨ç¨‹åºçš„å¹¶å‘è¿æ¥æ•°ã€æ¯ç§’è¯·æ±‚æ•°ã€å¤„ç†å»¶è¿Ÿã€é”™è¯¯æ•°ç­‰ï¼Œå¯ä»¥ä½¿ç”¨ wrkã€JMeter ç­‰å·¥å…·ï¼Œæ¨¡æ‹Ÿç”¨æˆ·çš„è´Ÿè½½ï¼Œå¾—åˆ°æƒ³è¦çš„æµ‹è¯•ç»“æœã€‚</p><p>è€Œåœ¨ä¼ è¾“å±‚ï¼Œæˆ‘ä»¬å…³æ³¨çš„æ˜¯ TCPã€UDP ç­‰ä¼ è¾“å±‚åè®®çš„å·¥ä½œçŠ¶å†µï¼Œæ¯”å¦‚ TCP è¿æ¥æ•°ã€ TCP é‡ä¼ ã€TCP é”™è¯¯æ•°ç­‰ã€‚æ­¤æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ iperfã€netperf ç­‰ï¼Œæ¥æµ‹è¯• TCP æˆ– UDP çš„æ€§èƒ½ã€‚</p><p>å†å‘ä¸‹åˆ°ç½‘ç»œå±‚ï¼Œæˆ‘ä»¬å…³æ³¨çš„åˆ™æ˜¯ç½‘ç»œåŒ…çš„å¤„ç†èƒ½åŠ›ï¼Œå³ PPSã€‚Linux å†…æ ¸è‡ªå¸¦çš„ pktgenï¼Œå°±å¯ä»¥å¸®ä½ æµ‹è¯•è¿™ä¸ªæŒ‡æ ‡ã€‚</p><p>ç”±äºä½å±‚åè®®æ˜¯é«˜å±‚åè®®çš„åŸºç¡€ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰€è¯´çš„ç½‘ç»œä¼˜åŒ–ï¼Œå®é™…ä¸ŠåŒ…å«äº†æ•´ä¸ªç½‘ç»œåè®®æ ˆçš„æ‰€æœ‰å±‚çš„ä¼˜åŒ–ã€‚å½“ç„¶ï¼Œæ€§èƒ½è¦æ±‚ä¸åŒï¼Œå…·ä½“éœ€è¦ä¼˜åŒ–çš„ä½ç½®å’Œç›®æ ‡å¹¶ä¸å®Œå…¨ç›¸åŒã€‚</p><p>å‰é¢åœ¨è¯„ä¼°ç½‘ç»œæ€§èƒ½ï¼ˆæ¯”å¦‚ HTTP æ€§èƒ½ï¼‰æ—¶ï¼Œæˆ‘ä»¬åœ¨æµ‹è¯•å·¥å…·ä¸­æŒ‡å®šäº†ç½‘ç»œæœåŠ¡çš„ IP åœ°å€ã€‚IP åœ°å€æ˜¯ TCP/IP åè®®ä¸­ï¼Œç”¨æ¥ç¡®å®šé€šä¿¡åŒæ–¹çš„ä¸€ä¸ªé‡è¦æ ‡è¯†ã€‚æ¯ä¸ª IP åœ°å€åˆåŒ…æ‹¬äº†ä¸»æœºå·å’Œç½‘ç»œå·ä¸¤éƒ¨åˆ†ã€‚ç›¸åŒç½‘ç»œå·çš„ä¸»æœºç»„æˆä¸€ä¸ªå­ç½‘ï¼›ä¸åŒå­ç½‘å†é€šè¿‡è·¯ç”±å™¨è¿æ¥ï¼Œç»„æˆä¸€ä¸ªåºå¤§çš„ç½‘ç»œã€‚</p><!-- [[[read_end]]] --><p>ç„¶è€Œï¼ŒIP åœ°å€è™½ç„¶æ–¹ä¾¿äº†æœºå™¨çš„é€šä¿¡ï¼Œå´ç»™è®¿é—®è¿™äº›æœåŠ¡çš„äººä»¬ï¼Œå¸¦æ¥äº†å¾ˆé‡çš„è®°å¿†è´Ÿæ‹…ã€‚æˆ‘ç›¸ä¿¡ï¼Œæ²¡å‡ ä¸ªäººèƒ½è®°å¾—ä½ GitHub æ‰€åœ¨çš„ IP åœ°å€ï¼Œå› ä¸ºè¿™ä¸²å­—ç¬¦ï¼Œå¯¹äººè„‘æ¥è¯´å¹¶æ²¡æœ‰ä»€ä¹ˆå«ä¹‰ï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„è®°å¿†é€»è¾‘ã€‚</p><p>ä¸è¿‡ï¼Œè¿™å¹¶ä¸å¦¨ç¢æˆ‘ä»¬ç»å¸¸ä½¿ç”¨è¿™ä¸ªæœåŠ¡ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå½“ç„¶æ˜¯å› ä¸ºè¿˜æœ‰æ›´ç®€å•ã€æ–¹ä¾¿çš„æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åŸŸå github.com è®¿é—®ï¼Œè€Œä¸æ˜¯å¿…é¡»ä¾é å…·ä½“çš„ IP åœ°å€ï¼Œè¿™å…¶å®æ­£æ˜¯åŸŸåç³»ç»Ÿ DNS çš„ç”±æ¥ã€‚</p><p>DNSï¼ˆDomain Name Systemï¼‰ï¼Œå³åŸŸåç³»ç»Ÿï¼Œæ˜¯äº’è”ç½‘ä¸­æœ€åŸºç¡€çš„ä¸€é¡¹æœåŠ¡ï¼Œä¸»è¦æä¾›åŸŸåå’Œ IP åœ°å€ä¹‹é—´æ˜ å°„å…³ç³»çš„æŸ¥è¯¢æœåŠ¡ã€‚</p><p>DNS ä¸ä»…æ–¹ä¾¿äº†äººä»¬è®¿é—®ä¸åŒçš„äº’è”ç½‘æœåŠ¡ï¼Œæ›´ä¸ºå¾ˆå¤šåº”ç”¨æä¾›äº†ï¼ŒåŠ¨æ€æœåŠ¡å‘ç°å’Œå…¨å±€è´Ÿè½½å‡è¡¡ï¼ˆGlobal Server Load Balanceï¼ŒGSLBï¼‰çš„æœºåˆ¶ã€‚è¿™æ ·ï¼ŒDNS å°±å¯ä»¥é€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„ IP æ¥æä¾›æœåŠ¡ã€‚å³ä½¿åç«¯æœåŠ¡çš„ IP åœ°å€å‘ç”Ÿå˜åŒ–ï¼Œç”¨æˆ·ä¾ç„¶å¯ä»¥ç”¨ç›¸åŒåŸŸåæ¥è®¿é—®ã€‚</p><p>DNSæ˜¾ç„¶æ˜¯æˆ‘ä»¬å·¥ä½œä¸­åŸºç¡€è€Œé‡è¦çš„ä¸€ä¸ªç¯èŠ‚ã€‚é‚£ä¹ˆï¼ŒDNS å‡ºç°é—®é¢˜æ—¶ï¼Œåˆè¯¥å¦‚ä½•åˆ†æå’Œæ’æŸ¥å‘¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘å°±å¸¦ä½ ä¸€èµ·æ¥çœ‹çœ‹è¿™ä¸ªé—®é¢˜ã€‚</p><h2>åŸŸåä¸ DNS è§£æ</h2><p>åŸŸåæˆ‘ä»¬æœ¬èº«éƒ½æ¯”è¾ƒç†Ÿæ‚‰ï¼Œç”±ä¸€ä¸²ç”¨ç‚¹åˆ†å‰²å¼€çš„å­—ç¬¦ç»„æˆï¼Œè¢«ç”¨ä½œäº’è”ç½‘ä¸­çš„æŸä¸€å°æˆ–æŸä¸€ç»„è®¡ç®—æœºçš„åç§°ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†æ–¹ä¾¿è¯†åˆ«ï¼Œäº’è”ç½‘ä¸­æä¾›å„ç§æœåŠ¡çš„ä¸»æœºä½ç½®ã€‚</p><p>è¦æ³¨æ„ï¼ŒåŸŸåæ˜¯å…¨çƒå”¯ä¸€çš„ï¼Œéœ€è¦é€šè¿‡ä¸“é—¨çš„åŸŸåæ³¨å†Œå•†æ‰å¯ä»¥ç”³è¯·æ³¨å†Œã€‚ä¸ºäº†ç»„ç»‡å…¨çƒäº’è”ç½‘ä¸­çš„ä¼—å¤šè®¡ç®—æœºï¼ŒåŸŸååŒæ ·ç”¨ç‚¹æ¥åˆ†å¼€ï¼Œå½¢æˆä¸€ä¸ªåˆ†å±‚çš„ç»“æ„ã€‚è€Œæ¯ä¸ªè¢«ç‚¹åˆ†å‰²å¼€çš„å­—ç¬¦ä¸²ï¼Œå°±æ„æˆäº†åŸŸåä¸­çš„ä¸€ä¸ªå±‚çº§ï¼Œå¹¶ä¸”ä½ç½®è¶Šé åï¼Œå±‚çº§è¶Šé«˜ã€‚</p><p>æˆ‘ä»¬ä»¥æå®¢æ—¶é—´çš„ç½‘ç«™ time.geekbang.org ä¸ºä¾‹ï¼Œæ¥ç†è§£åŸŸåçš„å«ä¹‰ã€‚è¿™ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæœ€åé¢çš„ org æ˜¯é¡¶çº§åŸŸåï¼Œä¸­é—´çš„ geekbang æ˜¯äºŒçº§åŸŸåï¼Œè€Œæœ€å·¦è¾¹çš„ time åˆ™æ˜¯ä¸‰çº§åŸŸåã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ³¨æ„ç‚¹ï¼ˆ.ï¼‰æ˜¯æ‰€æœ‰åŸŸåçš„æ ¹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰åŸŸåéƒ½ä»¥ç‚¹ä½œä¸ºåç¼€ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼Œåœ¨åŸŸåè§£æçš„è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰åŸŸåéƒ½ä»¥ç‚¹ç»“æŸã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/82/1b509317968f3f73810ac1d313ced982.png?wh=1324*544\" alt=\"\"></p><p>é€šè¿‡ç†è§£è¿™å‡ ä¸ªæ¦‚å¿µï¼Œä½ å¯ä»¥çœ‹å‡ºï¼ŒåŸŸåä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿è®©äººè®°ä½ï¼Œè€ŒIP åœ°å€æ˜¯æœºå™¨é—´çš„é€šä¿¡çš„çœŸæ­£æœºåˆ¶ã€‚æŠŠåŸŸåè½¬æ¢ä¸º IP åœ°å€çš„æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¼€å¤´æåˆ°çš„ï¼ŒåŸŸåè§£ææœåŠ¡ï¼ˆDNSï¼‰ï¼Œè€Œå¯¹åº”çš„æœåŠ¡å™¨å°±æ˜¯åŸŸåæœåŠ¡å™¨ï¼Œç½‘ç»œåè®®åˆ™æ˜¯ DNS åè®®ã€‚</p><p>è¿™é‡Œæ³¨æ„ï¼ŒDNS åè®®åœ¨ TCP/IP æ ˆä¸­å±äºåº”ç”¨å±‚ï¼Œä¸è¿‡å®é™…ä¼ è¾“è¿˜æ˜¯åŸºäº UDP æˆ–è€… TCP åè®®ï¼ˆUDP å±…å¤šï¼‰ ï¼Œå¹¶ä¸”åŸŸåæœåŠ¡å™¨ä¸€èˆ¬ç›‘å¬åœ¨ç«¯å£ 53 ä¸Šã€‚</p><p>æ—¢ç„¶åŸŸåä»¥åˆ†å±‚çš„ç»“æ„è¿›è¡Œç®¡ç†ï¼Œç›¸å¯¹åº”çš„ï¼ŒåŸŸåè§£æå…¶å®ä¹Ÿæ˜¯ç”¨é€’å½’çš„æ–¹å¼ï¼ˆä»é¡¶çº§å¼€å§‹ï¼Œä»¥æ­¤ç±»æ¨ï¼‰ï¼Œå‘é€ç»™æ¯ä¸ªå±‚çº§çš„åŸŸåæœåŠ¡å™¨ï¼Œç›´åˆ°å¾—åˆ°è§£æç»“æœã€‚</p><p>ä¸è¿‡ä¸è¦æ‹…å¿ƒï¼Œé€’å½’æŸ¥è¯¢çš„è¿‡ç¨‹å¹¶ä¸éœ€è¦ä½ äº²è‡ªæ“ä½œï¼ŒDNS æœåŠ¡å™¨ä¼šæ›¿ä½ å®Œæˆï¼Œä½ è¦åšçš„ï¼Œåªæ˜¯é¢„å…ˆé…ç½®ä¸€ä¸ªå¯ç”¨çš„ DNS æœåŠ¡å™¨å°±å¯ä»¥äº†ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œé€šå¸¸æ¥è¯´ï¼Œæ¯çº§DNS æœåŠ¡å™¨ï¼Œéƒ½ä¼šæœ‰æœ€è¿‘è§£æè®°å½•çš„ç¼“å­˜ã€‚å½“ç¼“å­˜å‘½ä¸­æ—¶ï¼Œç›´æ¥ç”¨ç¼“å­˜ä¸­çš„è®°å½•åº”ç­”å°±å¯ä»¥äº†ã€‚å¦‚æœç¼“å­˜è¿‡æœŸæˆ–è€…ä¸å­˜åœ¨ï¼Œæ‰éœ€è¦ç”¨åˆšåˆšæåˆ°çš„é€’å½’æ–¹å¼æŸ¥è¯¢ã€‚</p><p>æ‰€ä»¥ï¼Œç³»ç»Ÿç®¡ç†å‘˜åœ¨é…ç½® Linux ç³»ç»Ÿçš„ç½‘ç»œæ—¶ï¼Œé™¤äº†éœ€è¦é…ç½® IP åœ°å€ï¼Œè¿˜éœ€è¦ç»™å®ƒé…ç½® DNS æœåŠ¡å™¨ï¼Œè¿™æ ·å®ƒæ‰å¯ä»¥é€šè¿‡åŸŸåæ¥è®¿é—®å¤–éƒ¨æœåŠ¡ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘çš„ç³»ç»Ÿé…ç½®çš„å°±æ˜¯ 114.114.114.114 è¿™ä¸ªåŸŸåæœåŠ¡å™¨ã€‚ä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ¥æŸ¥è¯¢ä½ çš„ç³»ç»Ÿé…ç½®ï¼š</p><pre><code>$ cat /etc/resolv.conf\nnameserver 114.114.114.114\n</code></pre><p>å¦å¤–ï¼ŒDNS æœåŠ¡é€šè¿‡èµ„æºè®°å½•çš„æ–¹å¼ï¼Œæ¥ç®¡ç†æ‰€æœ‰æ•°æ®ï¼Œå®ƒæ”¯æŒ Aã€CNAMEã€MXã€NSã€PTR ç­‰å¤šç§ç±»å‹çš„è®°å½•ã€‚æ¯”å¦‚ï¼š</p><ul>\n<li>\n<p>A è®°å½•ï¼Œç”¨æ¥æŠŠåŸŸåè½¬æ¢æˆ IP åœ°å€ï¼›</p>\n</li>\n<li>\n<p>CNAME è®°å½•ï¼Œç”¨æ¥åˆ›å»ºåˆ«åï¼›</p>\n</li>\n<li>\n<p>è€Œ NS è®°å½•ï¼Œåˆ™è¡¨ç¤ºè¯¥åŸŸåå¯¹åº”çš„åŸŸåæœåŠ¡å™¨åœ°å€ã€‚</p>\n</li>\n</ul><p>ç®€å•æ¥è¯´ï¼Œå½“æˆ‘ä»¬è®¿é—®æŸä¸ªç½‘å€æ—¶ï¼Œå°±éœ€è¦é€šè¿‡ DNS çš„ A è®°å½•ï¼ŒæŸ¥è¯¢è¯¥åŸŸåå¯¹åº”çš„ IP åœ°å€ï¼Œç„¶åå†é€šè¿‡è¯¥ IP æ¥è®¿é—® Web æœåŠ¡ã€‚</p><p>æ¯”å¦‚ï¼Œè¿˜æ˜¯ä»¥æå®¢æ—¶é—´çš„ç½‘ç«™ time.geekbang.org ä¸ºä¾‹ï¼Œæ‰§è¡Œä¸‹é¢çš„ nslookup å‘½ä»¤ï¼Œå°±å¯ä»¥æŸ¥è¯¢åˆ°è¿™ä¸ªåŸŸåçš„ A è®°å½•ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå®ƒçš„ IP åœ°å€æ˜¯ 39.106.233.176ï¼š</p><pre><code>$ nslookup time.geekbang.org\n# åŸŸåæœåŠ¡å™¨åŠç«¯å£ä¿¡æ¯\nServer:\t\t114.114.114.114\nAddress:\t114.114.114.114#53\n\n# éæƒå¨æŸ¥è¯¢ç»“æœ\nNon-authoritative answer:\nName:\ttime.geekbang.org\nAddress: 39.106.233.17\n</code></pre><p>è¿™é‡Œè¦æ³¨æ„ï¼Œç”±äº 114.114.114.114 å¹¶ä¸æ˜¯ç›´æ¥ç®¡ç† time.geekbang.org çš„åŸŸåæœåŠ¡å™¨ï¼Œæ‰€ä»¥æŸ¥è¯¢ç»“æœæ˜¯éæƒå¨çš„ã€‚ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤ï¼Œä½ åªèƒ½å¾—åˆ° 114.114.114.114 æŸ¥è¯¢çš„ç»“æœã€‚</p><p>å‰é¢è¿˜æåˆ°äº†ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼ŒDNS æŸ¥è¯¢å®é™…ä¸Šæ˜¯ä¸€ä¸ªé€’å½’è¿‡ç¨‹ï¼Œé‚£æœ‰æ²¡æœ‰æ–¹æ³•å¯ä»¥çŸ¥é“æ•´ä¸ªé€’å½’æŸ¥è¯¢çš„æ‰§è¡Œå‘¢ï¼Ÿ</p><p>å…¶å®é™¤äº† nslookupï¼Œå¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„ DNS è§£æå·¥å…· dig ï¼Œå°±æä¾›äº† trace åŠŸèƒ½ï¼Œå¯ä»¥å±•ç¤ºé€’å½’æŸ¥è¯¢çš„æ•´ä¸ªè¿‡ç¨‹ã€‚æ¯”å¦‚ä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¾—åˆ°æŸ¥è¯¢ç»“æœï¼š</p><pre><code># +traceè¡¨ç¤ºå¼€å¯è·Ÿè¸ªæŸ¥è¯¢\n# +nodnssecè¡¨ç¤ºç¦æ­¢DNSå®‰å…¨æ‰©å±•\n$ dig +trace +nodnssec time.geekbang.org\n\n; &lt;&lt;&gt;&gt; DiG 9.11.3-1ubuntu1.3-Ubuntu &lt;&lt;&gt;&gt; +trace +nodnssec time.geekbang.org\n;; global options: +cmd\n.\t\t\t322086\tIN\tNS\tm.root-servers.net.\n.\t\t\t322086\tIN\tNS\ta.root-servers.net.\n.\t\t\t322086\tIN\tNS\ti.root-servers.net.\n.\t\t\t322086\tIN\tNS\td.root-servers.net.\n.\t\t\t322086\tIN\tNS\tg.root-servers.net.\n.\t\t\t322086\tIN\tNS\tl.root-servers.net.\n.\t\t\t322086\tIN\tNS\tc.root-servers.net.\n.\t\t\t322086\tIN\tNS\tb.root-servers.net.\n.\t\t\t322086\tIN\tNS\th.root-servers.net.\n.\t\t\t322086\tIN\tNS\te.root-servers.net.\n.\t\t\t322086\tIN\tNS\tk.root-servers.net.\n.\t\t\t322086\tIN\tNS\tj.root-servers.net.\n.\t\t\t322086\tIN\tNS\tf.root-servers.net.\n;; Received 239 bytes from 114.114.114.114#53(114.114.114.114) in 1340 ms\n\norg.\t\t\t172800\tIN\tNS\ta0.org.afilias-nst.info.\norg.\t\t\t172800\tIN\tNS\ta2.org.afilias-nst.info.\norg.\t\t\t172800\tIN\tNS\tb0.org.afilias-nst.org.\norg.\t\t\t172800\tIN\tNS\tb2.org.afilias-nst.org.\norg.\t\t\t172800\tIN\tNS\tc0.org.afilias-nst.info.\norg.\t\t\t172800\tIN\tNS\td0.org.afilias-nst.org.\n;; Received 448 bytes from 198.97.190.53#53(h.root-servers.net) in 708 ms\n\ngeekbang.org.\t\t86400\tIN\tNS\tdns9.hichina.com.\ngeekbang.org.\t\t86400\tIN\tNS\tdns10.hichina.com.\n;; Received 96 bytes from 199.19.54.1#53(b0.org.afilias-nst.org) in 1833 ms\n\ntime.geekbang.org.\t600\tIN\tA\t39.106.233.176\n;; Received 62 bytes from 140.205.41.16#53(dns10.hichina.com) in 4 ms\n</code></pre><p>dig trace çš„è¾“å‡ºï¼Œä¸»è¦åŒ…æ‹¬å››éƒ¨åˆ†ã€‚</p><ul>\n<li>\n<p>ç¬¬ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä» 114.114.114.114 æŸ¥åˆ°çš„ä¸€äº›æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆ.ï¼‰çš„ NS è®°å½•ã€‚</p>\n</li>\n<li>\n<p>ç¬¬äºŒéƒ¨åˆ†ï¼Œæ˜¯ä» NS è®°å½•ç»“æœä¸­é€‰ä¸€ä¸ªï¼ˆh.root-servers.netï¼‰ï¼Œå¹¶æŸ¥è¯¢é¡¶çº§åŸŸå org. çš„ NS è®°å½•ã€‚</p>\n</li>\n<li>\n<p>ç¬¬ä¸‰éƒ¨åˆ†ï¼Œæ˜¯ä» org. çš„ NS è®°å½•ä¸­é€‰æ‹©ä¸€ä¸ªï¼ˆb0.org.afilias-nst.orgï¼‰ï¼Œå¹¶æŸ¥è¯¢äºŒçº§åŸŸå geekbang.org. çš„ NS æœåŠ¡å™¨ã€‚</p>\n</li>\n<li>\n<p>æœ€åä¸€éƒ¨åˆ†ï¼Œå°±æ˜¯ä» geekbang.org. çš„ NS æœåŠ¡å™¨ï¼ˆdns10.hichina.comï¼‰æŸ¥è¯¢æœ€ç»ˆä¸»æœº time.geekbang.org. çš„ A è®°å½•ã€‚</p>\n</li>\n</ul><p>è¿™ä¸ªè¾“å‡ºé‡Œå±•ç¤ºçš„å„çº§åŸŸåçš„ NS è®°å½•ï¼Œå…¶å®å°±æ˜¯å„çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€ï¼Œå¯ä»¥è®©ä½ æ›´æ¸…æ¥š DNS è§£æçš„è¿‡ç¨‹ã€‚ ä¸ºäº†å¸®ä½ æ›´ç›´è§‚ç†è§£é€’å½’æŸ¥è¯¢ï¼Œæˆ‘æŠŠè¿™ä¸ªè¿‡ç¨‹æ•´ç†æˆäº†ä¸€å¼ æµç¨‹å›¾ï¼Œä½ å¯ä»¥ä¿å­˜ä¸‹æ¥ç†è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5f/d3/5ffda41ec62fc3c9e0de3fa3443c9cd3.png?wh=1322*740\" alt=\"\"></p><p>å½“ç„¶ï¼Œä¸ä»…ä»…æ˜¯å‘å¸ƒåˆ°äº’è”ç½‘çš„æœåŠ¡éœ€è¦åŸŸåï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›èƒ½å¯¹å±€åŸŸç½‘å†…éƒ¨çš„ä¸»æœºè¿›è¡ŒåŸŸåè§£æï¼ˆå³å†…ç½‘åŸŸåï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸ºä¸»æœºåï¼‰ã€‚Linux ä¹Ÿæ”¯æŒè¿™ç§è¡Œä¸ºã€‚</p><p>æ‰€ä»¥ï¼Œä½ å¯ä»¥æŠŠä¸»æœºåå’Œ IP åœ°å€çš„æ˜ å°„å…³ç³»ï¼Œå†™å…¥æœ¬æœºçš„ /etc/hosts æ–‡ä»¶ä¸­ã€‚è¿™æ ·ï¼ŒæŒ‡å®šçš„ä¸»æœºåå°±å¯ä»¥åœ¨æœ¬åœ°ç›´æ¥æ‰¾åˆ°ç›®æ ‡ IPã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æ“ä½œï¼š</p><pre><code>$ cat /etc/hosts\n127.0.0.1   localhost localhost.localdomain\n::1         localhost6 localhost6.localdomain6\n192.168.0.100 domain.com\n</code></pre><p>æˆ–è€…ï¼Œä½ è¿˜å¯ä»¥åœ¨å†…ç½‘ä¸­ï¼Œæ­å»ºè‡ªå®šä¹‰çš„ DNS æœåŠ¡å™¨ï¼Œä¸“é—¨ç”¨æ¥è§£æå†…ç½‘ä¸­çš„åŸŸåã€‚è€Œå†…ç½‘ DNS æœåŠ¡å™¨ï¼Œä¸€èˆ¬è¿˜ä¼šè®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªä¸Šæ¸¸ DNS æœåŠ¡å™¨ï¼Œç”¨æ¥è§£æå¤–ç½‘çš„åŸŸåã€‚</p><p>æ¸…æ¥šåŸŸåä¸ DNS è§£æçš„åŸºæœ¬åŸç†åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘å°±å¸¦ä½ ä¸€èµ·æ¥çœ‹å‡ ä¸ªæ¡ˆä¾‹ï¼Œå®æˆ˜åˆ†æ DNS è§£æå‡ºç°é—®é¢˜æ—¶ï¼Œè¯¥å¦‚ä½•å®šä½ã€‚</p><h2>æ¡ˆä¾‹å‡†å¤‡</h2><p>æœ¬æ¬¡æ¡ˆä¾‹è¿˜æ˜¯åŸºäº Ubuntu 18.04ï¼ŒåŒæ ·é€‚ç”¨äºå…¶ä»–çš„ Linux ç³»ç»Ÿã€‚æˆ‘ä½¿ç”¨çš„æ¡ˆä¾‹ç¯å¢ƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul>\n<li>\n<p>æœºå™¨é…ç½®ï¼š2 CPUï¼Œ8GB å†…å­˜ã€‚</p>\n</li>\n<li>\n<p>é¢„å…ˆå®‰è£… docker ç­‰å·¥å…·ï¼Œå¦‚ apt install docker.ioã€‚</p>\n</li>\n</ul><p>ä½ å¯ä»¥å…ˆæ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼ŒSSH ç™»å½•åˆ° Ubuntu æœºå™¨ä¸­ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ‹‰å–æ¡ˆä¾‹ä¸­ä½¿ç”¨çš„ Docker é•œåƒï¼š</p><pre><code>$ docker pull feisky/dnsutils\nUsing default tag: latest\n...\nStatus: Downloaded newer image for feisky/dnsutils:latest\n</code></pre><p>ç„¶åï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ä¸»æœºå½“å‰é…ç½®çš„ DNS æœåŠ¡å™¨ï¼š</p><pre><code>$ cat /etc/resolv.conf\nnameserver 114.114.114.114\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘è¿™å°ä¸»æœºé…ç½®çš„ DNS æœåŠ¡å™¨æ˜¯ 114.114.114.114ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå‡†å¤‡å·¥ä½œå°±å®Œæˆäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥æ“ä½œç¯èŠ‚ã€‚</p><h2>æ¡ˆä¾‹åˆ†æ</h2><h3>æ¡ˆä¾‹1ï¼šDNSè§£æå¤±è´¥</h3><p>é¦–å…ˆï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œè¿›å…¥ä»Šå¤©çš„ç¬¬ä¸€ä¸ªæ¡ˆä¾‹ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ å°†å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™ä¸ªè¾“å‡ºï¼š</p><pre><code># è¿›å…¥æ¡ˆä¾‹ç¯å¢ƒçš„SHELLç»ˆç«¯ä¸­\n$ docker run -it --rm -v $(mktemp):/etc/resolv.conf feisky/dnsutils bash\nroot@7e9ed6ed4974:/#\n</code></pre><p>æ³¨æ„ï¼Œè¿™å„¿rootåé¢çš„ 7e9ed6ed4974ï¼Œæ˜¯ Docker ç”Ÿæˆå®¹å™¨çš„ IDå‰ç¼€ï¼Œä½ çš„ç¯å¢ƒä¸­å¾ˆå¯èƒ½æ˜¯ä¸åŒçš„ IDï¼Œæ‰€ä»¥ç›´æ¥å¿½ç•¥è¿™ä¸€é¡¹å°±å¯ä»¥äº†ã€‚</p><blockquote>\n<p>æ³¨æ„ï¼šä¸‹é¢çš„ä»£ç æ®µä¸­ï¼Œ /# å¼€å¤´çš„å‘½ä»¤éƒ½è¡¨ç¤ºåœ¨å®¹å™¨å†…éƒ¨è¿è¡Œçš„å‘½ä»¤ã€‚</p>\n</blockquote><p>æ¥ç€ï¼Œç»§ç»­åœ¨å®¹å™¨ç»ˆç«¯ä¸­ï¼Œæ‰§è¡Œ DNS æŸ¥è¯¢å‘½ä»¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŸ¥è¯¢ time.geekbang.org çš„ IP åœ°å€ï¼š</p><pre><code>/# nslookup time.geekbang.org\n;; connection timed out; no servers could be reached\n</code></pre><p>ä½ å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªå‘½ä»¤é˜»å¡å¾ˆä¹…åï¼Œè¿˜æ˜¯å¤±è´¥äº†ï¼ŒæŠ¥äº† connection timed out å’Œ no servers could be reached é”™è¯¯ã€‚</p><p>çœ‹åˆ°è¿™é‡Œï¼Œä¼°è®¡ä½ çš„ç¬¬ä¸€ååº”å°±æ˜¯ç½‘ç»œä¸é€šäº†ï¼Œåˆ°åº•æ˜¯ä¸æ˜¯è¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬ç”¨ ping å·¥å…·æ£€æŸ¥è¯•è¯•ã€‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå°±å¯ä»¥æµ‹è¯•æœ¬åœ°åˆ° 114.114.114.114 çš„è¿é€šæ€§ï¼š</p><pre><code>/# ping -c3 114.114.114.114\nPING 114.114.114.114 (114.114.114.114): 56 data bytes\n64 bytes from 114.114.114.114: icmp_seq=0 ttl=56 time=31.116 ms\n64 bytes from 114.114.114.114: icmp_seq=1 ttl=60 time=31.245 ms\n64 bytes from 114.114.114.114: icmp_seq=2 ttl=68 time=31.128 ms\n--- 114.114.114.114 ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max/stddev = 31.116/31.163/31.245/0.058 ms\n</code></pre><p>è¿™ä¸ªè¾“å‡ºä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ç½‘ç»œæ˜¯é€šçš„ã€‚é‚£è¦æ€ä¹ˆçŸ¥é“nslookup å‘½ä»¤å¤±è´¥çš„åŸå› å‘¢ï¼Ÿè¿™é‡Œå…¶å®æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæœ€ç®€å•çš„ä¸€ç§ï¼Œå°±æ˜¯å¼€å¯ nslookup çš„è°ƒè¯•è¾“å‡ºï¼ŒæŸ¥çœ‹æŸ¥è¯¢è¿‡ç¨‹ä¸­çš„è¯¦ç»†æ­¥éª¤ï¼Œæ’æŸ¥å…¶ä¸­æ˜¯å¦æœ‰å¼‚å¸¸ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­åœ¨å®¹å™¨ç»ˆç«¯ä¸­ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>/# nslookup -debug time.geekbang.org\n;; Connection to 127.0.0.1#53(127.0.0.1) for time.geekbang.org failed: connection refused.\n;; Connection to ::1#53(::1) for time.geekbang.org failed: address not available.\n</code></pre><p>ä»è¿™æ¬¡çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œnslookup è¿æ¥ç¯å›åœ°å€ï¼ˆ127.0.0.1 å’Œ ::1ï¼‰çš„ 53 ç«¯å£å¤±è´¥ã€‚è¿™é‡Œå°±æœ‰é—®é¢˜äº†ï¼Œä¸ºä»€ä¹ˆä¼šå»è¿æ¥ç¯å›åœ°å€ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„å…ˆå‰çœ‹åˆ°çš„ 114.114.114.114 å‘¢ï¼Ÿ</p><p>ä½ å¯èƒ½å·²ç»æƒ³åˆ°äº†ç—‡ç»“æ‰€åœ¨â€”â€”æœ‰å¯èƒ½æ˜¯å› ä¸ºå®¹å™¨ä¸­æ²¡æœ‰é…ç½® DNS æœåŠ¡å™¨ã€‚é‚£æˆ‘ä»¬å°±æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç¡®è®¤ä¸€ä¸‹ï¼š</p><pre><code>/# cat /etc/resolv.conf\n</code></pre><p>æœç„¶ï¼Œè¿™ä¸ªå‘½ä»¤æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œè¯´æ˜å®¹å™¨é‡Œçš„ç¡®æ²¡æœ‰é…ç½® DNS æœåŠ¡å™¨ã€‚åˆ°è¿™ä¸€æ­¥ï¼Œå¾ˆè‡ªç„¶çš„ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†è§£å†³æ–¹æ³•ã€‚åœ¨ /etc/resolv.conf æ–‡ä»¶ä¸­ï¼Œé…ç½®ä¸Š DNS æœåŠ¡å™¨å°±å¯ä»¥äº†ã€‚</p><p>ä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåœ¨é…ç½®å¥½ DNS æœåŠ¡å™¨åï¼Œé‡æ–°æ‰§è¡Œ nslookup å‘½ä»¤ã€‚è‡ªç„¶ï¼Œæˆ‘ä»¬ç°åœ¨å‘ç°ï¼Œè¿™æ¬¡å¯ä»¥æ­£å¸¸è§£æäº†ï¼š</p><pre><code>/# echo &quot;nameserver 114.114.114.114&quot; &gt; /etc/resolv.conf\n/# nslookup time.geekbang.org\nServer:\t\t114.114.114.114\nAddress:\t114.114.114.114#53\n\nNon-authoritative answer:\nName:\ttime.geekbang.org\nAddress: 39.106.233.176\n</code></pre><p>åˆ°è¿™é‡Œï¼Œç¬¬ä¸€ä¸ªæ¡ˆä¾‹å°±è½»æ¾è§£å†³äº†ã€‚æœ€åï¼Œåœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ exit å‘½ä»¤é€€å‡ºå®¹å™¨ï¼ŒDocker å°±ä¼šè‡ªåŠ¨æ¸…ç†åˆšæ‰è¿è¡Œçš„å®¹å™¨ã€‚</p><h3>æ¡ˆä¾‹2ï¼šDNSè§£æä¸ç¨³å®š</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹ç¬¬äºŒä¸ªæ¡ˆä¾‹ã€‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œå¹¶è¿›å…¥å®ƒçš„ç»ˆç«¯ä¸­ï¼š</p><pre><code>$ docker run -it --rm --cap-add=NET_ADMIN --dns 8.8.8.8 feisky/dnsutils bash\nroot@0cd3ee0c8ecb:/#\n</code></pre><p>ç„¶åï¼Œè·Ÿä¸Šä¸€ä¸ªæ¡ˆä¾‹ä¸€æ ·ï¼Œè¿˜æ˜¯è¿è¡Œ nslookup å‘½ä»¤ï¼Œè§£æ time.geekbang.org çš„ IP åœ°å€ã€‚ä¸è¿‡ï¼Œè¿™æ¬¡è¦åŠ ä¸€ä¸ª time å‘½ä»¤ï¼Œè¾“å‡ºè§£ææ‰€ç”¨æ—¶é—´ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p><pre><code>/# time nslookup time.geekbang.org\nServer:\t\t8.8.8.8\nAddress:\t8.8.8.8#53\n\nNon-authoritative answer:\nName:\ttime.geekbang.org\nAddress: 39.106.233.176\n\nreal\t0m10.349s\nuser\t0m0.004s\nsys\t0m0.0\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ¬¡è§£æéå¸¸æ…¢ï¼Œå±…ç„¶ç”¨äº† 10 ç§’ã€‚å¦‚æœä½ å¤šæ¬¡è¿è¡Œä¸Šé¢çš„ nslookup å‘½ä»¤ï¼Œå¯èƒ½å¶å°”è¿˜ä¼šç¢°åˆ°ä¸‹é¢è¿™ç§é”™è¯¯ï¼š</p><pre><code>/# time nslookup time.geekbang.org\n;; connection timed out; no servers could be reached\n\nreal\t0m15.011s\nuser\t0m0.006s\nsys\t0m0.006s\n</code></pre><p>æ¢å¥è¯è¯´ï¼Œè·Ÿä¸Šä¸€ä¸ªæ¡ˆä¾‹ç±»ä¼¼ï¼Œä¹Ÿä¼šå‡ºç°è§£æå¤±è´¥çš„æƒ…å†µã€‚ç»¼åˆæ¥çœ‹ï¼Œç°åœ¨ DNS è§£æçš„ç»“æœä¸ä½†æ¯”è¾ƒæ…¢ï¼Œè€Œä¸”è¿˜ä¼šå‘ç”Ÿè¶…æ—¶å¤±è´¥çš„æƒ…å†µã€‚</p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿç¢°åˆ°è¿™ç§é—®é¢˜è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œæ ¹æ®å‰é¢çš„è®²è§£ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒDNS è§£æï¼Œè¯´ç™½äº†å°±æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”è¿™ä¸ªè¿‡ç¨‹è¿˜ä½¿ç”¨äº† UDP åè®®ã€‚</p><p>é‚£ä¹ˆï¼Œå¯¹äºæ•´ä¸ªæµç¨‹æ¥è¯´ï¼Œè§£æç»“æœä¸ç¨³å®šï¼Œå°±æœ‰å¾ˆå¤šç§å¯èƒ½çš„æƒ…å†µäº†ã€‚æ¯”æ–¹è¯´ï¼š</p><ul>\n<li>\n<p>DNS æœåŠ¡å™¨æœ¬èº«æœ‰é—®é¢˜ï¼Œå“åº”æ…¢å¹¶ä¸”ä¸ç¨³å®šï¼›</p>\n</li>\n<li>\n<p>æˆ–è€…æ˜¯ï¼Œå®¢æˆ·ç«¯åˆ° DNS æœåŠ¡å™¨çš„ç½‘ç»œå»¶è¿Ÿæ¯”è¾ƒå¤§ï¼›</p>\n</li>\n<li>\n<p>å†æˆ–è€…ï¼ŒDNS è¯·æ±‚æˆ–è€…å“åº”åŒ…ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹è¢«é“¾è·¯ä¸­çš„ç½‘ç»œè®¾å¤‡å¼„ä¸¢äº†ã€‚</p>\n</li>\n</ul><p>æ ¹æ®ä¸Šé¢ nslookup çš„è¾“å‡ºï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨å®¢æˆ·ç«¯è¿æ¥çš„DNS æ˜¯ 8.8.8.8ï¼Œè¿™æ˜¯ Google æä¾›çš„ DNS æœåŠ¡ã€‚å¯¹ Google æˆ‘ä»¬è¿˜æ˜¯æ¯”è¾ƒæ”¾å¿ƒçš„ï¼ŒDNS æœåŠ¡å™¨å‡ºé—®é¢˜çš„æ¦‚ç‡åº”è¯¥æ¯”è¾ƒå°ã€‚åŸºæœ¬æ’é™¤äº†DNSæœåŠ¡å™¨çš„é—®é¢˜ï¼Œé‚£æ˜¯ä¸æ˜¯ç¬¬äºŒç§å¯èƒ½ï¼Œæœ¬æœºåˆ° DNS æœåŠ¡å™¨çš„å»¶è¿Ÿæ¯”è¾ƒå¤§å‘¢ï¼Ÿ</p><p>å‰é¢è®²è¿‡ï¼Œping å¯ä»¥ç”¨æ¥æµ‹è¯•æœåŠ¡å™¨çš„å»¶è¿Ÿã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>/# ping -c3 8.8.8.8\nPING 8.8.8.8 (8.8.8.8): 56 data bytes\n64 bytes from 8.8.8.8: icmp_seq=0 ttl=31 time=137.637 ms\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=31 time=144.743 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=31 time=138.576 ms\n--- 8.8.8.8 ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max/stddev = 137.637/140.319/144.743/3.152 ms\n</code></pre><p>ä»ping çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„å»¶è¿Ÿå·²ç»è¾¾åˆ°äº† 140msï¼Œè¿™ä¹Ÿå°±å¯ä»¥è§£é‡Šï¼Œä¸ºä»€ä¹ˆè§£æè¿™ä¹ˆæ…¢äº†ã€‚å®é™…ä¸Šï¼Œå¦‚æœä½ å¤šæ¬¡è¿è¡Œä¸Šé¢çš„ ping æµ‹è¯•ï¼Œè¿˜ä¼šçœ‹åˆ°å¶å°”å‡ºç°çš„ä¸¢åŒ…ç°è±¡ã€‚</p><pre><code>$ ping -c3 8.8.8.8\nPING 8.8.8.8 (8.8.8.8): 56 data bytes\n64 bytes from 8.8.8.8: icmp_seq=0 ttl=30 time=134.032 ms\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=30 time=431.458 ms\n--- 8.8.8.8 ping statistics ---\n3 packets transmitted, 2 packets received, 33% packet loss\nround-trip min/avg/max/stddev = 134.032/282.745/431.458/148.713 ms\n</code></pre><p>è¿™ä¹Ÿè¿›ä¸€æ­¥è§£é‡Šäº†ï¼Œä¸ºä»€ä¹ˆ nslookup å¶å°”ä¼šå¤±è´¥ï¼Œæ­£æ˜¯ç½‘ç»œé“¾è·¯ä¸­çš„ä¸¢åŒ…å¯¼è‡´çš„ã€‚</p><p>ç¢°åˆ°è¿™ç§é—®é¢˜è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ˜¾ç„¶ï¼Œæ—¢ç„¶å»¶è¿Ÿå¤ªå¤§ï¼Œé‚£å°±æ¢ä¸€ä¸ªå»¶è¿Ÿæ›´å°çš„ DNS æœåŠ¡å™¨ï¼Œæ¯”å¦‚ç”µä¿¡æä¾›çš„ 114.114.114.114ã€‚</p><p>é…ç½®ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç”¨ ping æµ‹è¯•çœ‹çœ‹ï¼Œå®ƒçš„å»¶è¿Ÿæ˜¯ä¸æ˜¯çœŸçš„æ¯” 8.8.8.8 å¥½ã€‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°ï¼Œå®ƒçš„å»¶è¿Ÿåªæœ‰ 31msï¼š</p><pre><code>/# ping -c3 114.114.114.114\nPING 114.114.114.114 (114.114.114.114): 56 data bytes\n64 bytes from 114.114.114.114: icmp_seq=0 ttl=67 time=31.130 ms\n64 bytes from 114.114.114.114: icmp_seq=1 ttl=56 time=31.302 ms\n64 bytes from 114.114.114.114: icmp_seq=2 ttl=56 time=31.250 ms\n--- 114.114.114.114 ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max/stddev = 31.130/31.227/31.302/0.072 ms\n</code></pre><p>è¿™ä¸ªç»“æœè¡¨æ˜ï¼Œå»¶è¿Ÿçš„ç¡®å°äº†å¾ˆå¤šã€‚æˆ‘ä»¬ç»§ç»­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ›´æ¢ DNS æœåŠ¡å™¨ï¼Œç„¶åï¼Œå†æ¬¡æ‰§è¡Œ nslookup è§£æå‘½ä»¤ï¼š</p><pre><code>/# echo nameserver 114.114.114.114 &gt; /etc/resolv.conf\n/# time nslookup time.geekbang.org\nServer:\t\t114.114.114.114\nAddress:\t114.114.114.114#53\n\nNon-authoritative answer:\nName:\ttime.geekbang.org\nAddress: 39.106.233.176\n\nreal    0m0.064s\nuser    0m0.007s\nsys     0m0.006s\n</code></pre><p>ä½ å¯ä»¥å‘ç°ï¼Œç°åœ¨åªéœ€è¦ 64ms å°±å¯ä»¥å®Œæˆè§£æï¼Œæ¯”åˆšæ‰çš„ 10s è¦å¥½å¾ˆå¤šã€‚</p><p>åˆ°è¿™é‡Œï¼Œé—®é¢˜çœ‹ä¼¼å°±è§£å†³äº†ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ å¤šæ¬¡è¿è¡Œ nslookup å‘½ä»¤ï¼Œä¼°è®¡å°±ä¸æ˜¯æ¯æ¬¡éƒ½æœ‰å¥½ç»“æœäº†ã€‚æ¯”å¦‚ï¼Œåœ¨æˆ‘çš„æœºå™¨ä¸­ï¼Œå°±ç»å¸¸éœ€è¦ 1s ç”šè‡³æ›´å¤šçš„æ—¶é—´ã€‚</p><pre><code>/# time nslookup time.geekbang.org\nServer:\t\t114.114.114.114\nAddress:\t114.114.114.114#53\n\nNon-authoritative answer:\nName:\ttime.geekbang.org\nAddress: 39.106.233.176\n\nreal\t0m1.045s\nuser\t0m0.007s\nsys\t0m0.004s\n</code></pre><p>1s çš„ DNS è§£ææ—¶é—´è¿˜æ˜¯å¤ªé•¿äº†ï¼Œå¯¹å¾ˆå¤šåº”ç”¨æ¥è¯´ä¹Ÿæ˜¯ä¸å¯æ¥å—çš„ã€‚é‚£ä¹ˆï¼Œè¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘æƒ³ä½ ä¸€å®šå·²ç»æƒ³åˆ°äº†ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ DNS ç¼“å­˜ã€‚è¿™æ ·ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡æŸ¥è¯¢æ—¶éœ€è¦å» DNS æœåŠ¡å™¨è¯·æ±‚ï¼Œä»¥åçš„æŸ¥è¯¢ï¼Œåªè¦ DNS è®°å½•ä¸è¿‡æœŸï¼Œä½¿ç”¨ç¼“å­˜ä¸­çš„è®°å½•å°±å¯ä»¥äº†ã€‚</p><p>ä¸è¿‡è¦æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ä¸»æµ Linux å‘è¡Œç‰ˆï¼Œé™¤äº†æœ€æ–°ç‰ˆæœ¬çš„ Ubuntu ï¼ˆå¦‚ 18.04 æˆ–è€…æ›´æ–°ç‰ˆæœ¬ï¼‰å¤–ï¼Œå…¶ä»–ç‰ˆæœ¬å¹¶æ²¡æœ‰è‡ªåŠ¨é…ç½® DNS ç¼“å­˜ã€‚</p><p>æ‰€ä»¥ï¼Œæƒ³è¦ä¸ºç³»ç»Ÿå¼€å¯ DNS ç¼“å­˜ï¼Œå°±éœ€è¦ä½ åšé¢å¤–çš„é…ç½®ã€‚æ¯”å¦‚ï¼Œæœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨ dnsmasqã€‚</p><p>dnsmasq æ˜¯æœ€å¸¸ç”¨çš„ DNS ç¼“å­˜æœåŠ¡ä¹‹ä¸€ï¼Œè¿˜ç»å¸¸ä½œä¸º DHCP æœåŠ¡æ¥ä½¿ç”¨ã€‚å®ƒçš„å®‰è£…å’Œé…ç½®éƒ½æ¯”è¾ƒç®€å•ï¼Œæ€§èƒ½ä¹Ÿå¯ä»¥æ»¡è¶³ç»å¤§å¤šæ•°åº”ç”¨ç¨‹åºå¯¹ DNS ç¼“å­˜çš„éœ€æ±‚ã€‚</p><p>æˆ‘ä»¬ç»§ç»­åœ¨åˆšæ‰çš„å®¹å™¨ç»ˆç«¯ä¸­ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å¯åŠ¨ dnsmasqï¼š</p><pre><code>/# /etc/init.d/dnsmasq start\n * Starting DNS forwarder and DHCP server dnsmasq                    [ OK ]\n</code></pre><p>ç„¶åï¼Œä¿®æ”¹ /etc/resolv.confï¼Œå°† DNS æœåŠ¡å™¨æ”¹ä¸º dnsmasq çš„ç›‘å¬åœ°å€ï¼Œè¿™å„¿æ˜¯ 127.0.0.1ã€‚æ¥ç€ï¼Œé‡æ–°æ‰§è¡Œå¤šæ¬¡ nslookup å‘½ä»¤ï¼š</p><pre><code>/# echo nameserver 127.0.0.1 &gt; /etc/resolv.conf\n/# time nslookup time.geekbang.org\nServer:\t\t127.0.0.1\nAddress:\t127.0.0.1#53\n\nNon-authoritative answer:\nName:\ttime.geekbang.org\nAddress: 39.106.233.176\n\nreal\t0m0.492s\nuser\t0m0.007s\nsys\t0m0.006s\n\n/# time nslookup time.geekbang.org\nServer:\t\t127.0.0.1\nAddress:\t127.0.0.1#53\n\nNon-authoritative answer:\nName:\ttime.geekbang.org\nAddress: 39.106.233.176\n\nreal\t0m0.011s\nuser\t0m0.008s\nsys\t0m0.003s\n</code></pre><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡çš„è§£æå¾ˆæ…¢ï¼Œéœ€è¦ 0.5sï¼Œä»¥åçš„æ¯æ¬¡è§£æéƒ½å¾ˆå¿«ï¼Œåªéœ€è¦ 11msã€‚å¹¶ä¸”ï¼Œåé¢æ¯æ¬¡ DNS è§£æéœ€è¦çš„æ—¶é—´ä¹Ÿéƒ½å¾ˆç¨³å®šã€‚</p><p>æ¡ˆä¾‹çš„æœ€åï¼Œè¿˜æ˜¯åˆ«å¿˜äº†æ‰§è¡Œ exitï¼Œé€€å‡ºå®¹å™¨ç»ˆç«¯ï¼ŒDocker ä¼šè‡ªåŠ¨æ¸…ç†æ¡ˆä¾‹å®¹å™¨ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·å­¦ä¹ äº† DNS çš„åŸºæœ¬åŸç†ï¼Œå¹¶é€šè¿‡å‡ ä¸ªæ¡ˆä¾‹ï¼Œå¸¦ä½ ä¸€èµ·æŒæ¡äº†ï¼Œå‘ç° DNS è§£æé—®é¢˜æ—¶çš„åˆ†æå’Œè§£å†³æ€è·¯ã€‚</p><p>DNS æ˜¯äº’è”ç½‘ä¸­æœ€åŸºç¡€çš„ä¸€é¡¹æœåŠ¡ï¼Œæä¾›äº†åŸŸåå’Œ IP åœ°å€é—´æ˜ å°„å…³ç³»çš„æŸ¥è¯¢æœåŠ¡ã€‚å¾ˆå¤šåº”ç”¨ç¨‹åºåœ¨æœ€åˆå¼€å‘æ—¶ï¼Œå¹¶æ²¡è€ƒè™‘ DNS è§£æçš„é—®é¢˜ï¼Œåç»­å‡ºç°é—®é¢˜åï¼Œæ’æŸ¥å¥½å‡ å¤©æ‰èƒ½å‘ç°ï¼Œå…¶å®æ˜¯ DNS è§£ææ…¢å¯¼è‡´çš„ã€‚</p><p>è¯•æƒ³ï¼Œå‡å¦‚ä¸€ä¸ª Web æœåŠ¡çš„æ¥å£ï¼Œæ¯æ¬¡éƒ½éœ€è¦ 1s æ—¶é—´æ¥ç­‰å¾… DNS è§£æï¼Œé‚£ä¹ˆï¼Œæ— è®ºä½ æ€ä¹ˆä¼˜åŒ–åº”ç”¨ç¨‹åºçš„å†…åœ¨é€»è¾‘ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¸ªæ¥å£çš„å“åº”éƒ½å¤ªæ…¢ï¼Œå› ä¸ºå“åº”æ—¶é—´æ€»æ˜¯ä¼šå¤§äº 1 ç§’çš„ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨åº”ç”¨ç¨‹åºçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘åˆ° DNS è§£æå¯èƒ½å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼ŒæŒæ¡å¸¸è§çš„ä¼˜åŒ–æ–¹æ³•ã€‚è¿™é‡Œï¼Œæˆ‘æ€»ç»“äº†å‡ ç§å¸¸è§çš„ DNS ä¼˜åŒ–æ–¹æ³•ã€‚</p><ul>\n<li>\n<p>å¯¹ DNS è§£æçš„ç»“æœè¿›è¡Œç¼“å­˜ã€‚ç¼“å­˜æ˜¯æœ€æœ‰æ•ˆçš„æ–¹æ³•ï¼Œä½†è¦æ³¨æ„ï¼Œä¸€æ—¦ç¼“å­˜è¿‡æœŸï¼Œè¿˜æ˜¯è¦å» DNS æœåŠ¡å™¨é‡æ–°è·å–æ–°è®°å½•ã€‚ä¸è¿‡ï¼Œè¿™å¯¹å¤§éƒ¨åˆ†åº”ç”¨ç¨‹åºæ¥è¯´éƒ½æ˜¯å¯æ¥å—çš„ã€‚</p>\n</li>\n<li>\n<p>å¯¹ DNS è§£æçš„ç»“æœè¿›è¡Œé¢„å–ã€‚è¿™æ˜¯æµè§ˆå™¨ç­‰ Web åº”ç”¨ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç­‰ç”¨æˆ·ç‚¹å‡»é¡µé¢ä¸Šçš„è¶…é“¾æ¥ï¼Œæµè§ˆå™¨å°±ä¼šåœ¨åå°è‡ªåŠ¨è§£æåŸŸåï¼Œå¹¶æŠŠç»“æœç¼“å­˜èµ·æ¥ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨ HTTPDNS å–ä»£å¸¸è§„çš„ DNS è§£æã€‚è¿™æ˜¯å¾ˆå¤šç§»åŠ¨åº”ç”¨ä¼šé€‰æ‹©çš„æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯å¦‚ä»ŠåŸŸååŠ«æŒæ™®éå­˜åœ¨ï¼Œä½¿ç”¨ HTTP åè®®ç»•è¿‡é“¾è·¯ä¸­çš„ DNS æœåŠ¡å™¨ï¼Œå°±å¯ä»¥é¿å…åŸŸååŠ«æŒçš„é—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>åŸºäº DNS çš„å…¨å±€è´Ÿè½½å‡è¡¡ï¼ˆGSLBï¼‰ã€‚è¿™ä¸ä»…ä¸ºæœåŠ¡æä¾›äº†è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨çš„åŠŸèƒ½ï¼Œè¿˜å¯ä»¥æ ¹æ®ç”¨æˆ·çš„ä½ç½®ï¼Œè¿”å›è·ç¦»æœ€è¿‘çš„ IP åœ°å€ã€‚</p>\n</li>\n</ul><h2>æ€è€ƒ</h2><p>æœ€åï¼Œæˆ‘æƒ³è¯·ä½ æ¥èŠä¸€èŠï¼Œä½ æ‰€ç¢°åˆ°çš„ DNS é—®é¢˜ã€‚ä½ éƒ½ç¢°åˆ°è¿‡å“ªäº›ç±»å‹çš„ DNS é—®é¢˜ï¼Ÿä½ æ˜¯é€šè¿‡å“ªäº›æ–¹æ³•æ¥æ’æŸ¥çš„ï¼Œåˆé€šè¿‡å“ªäº›æ–¹æ³•è§£å†³çš„å‘¢ï¼Ÿä½ å¯ä»¥ç»“åˆä»Šå¤©å­¦åˆ°çš„çŸ¥è¯†ï¼Œæ€»ç»“è‡ªå·±çš„æ€è·¯ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p></p>","neighbors":{"left":{"article_title":"36 | å¥—è·¯ç¯‡ï¼šæ€ä¹ˆè¯„ä¼°ç³»ç»Ÿçš„ç½‘ç»œæ€§èƒ½ï¼Ÿ","id":81497},"right":{"article_title":"38 | æ¡ˆä¾‹ç¯‡ï¼šæ€ä¹ˆä½¿ç”¨ tcpdump å’Œ Wireshark åˆ†æç½‘ç»œæµé‡ï¼Ÿ","id":82321}},"comments":[{"had_liked":false,"id":71739,"user_name":"åˆ†æ¸…äº‘æ·¡","can_delete":false,"product_type":"c1","uid":1269873,"ip_address":"","ucode":"7045AE6BF72D31","user_header":"https://static001.geekbang.org/account/avatar/00/13/60/71/895ee6cf.jpg","comment_is_top":false,"comment_ctime":1551423808,"is_pvip":false,"replies":[{"id":"26319","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":71739,"uid":"1001282","ip_address":"","utype":1,"ctime":1551704933,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":9,"race_medal":0,"score":"156170246464","product_id":100020901,"comment_content":"nslookup åŸŸåç»“æœæ­£ç¡®ï¼Œä½†æ˜¯ ping åŸŸå è¿”å› unknown host, è®©æˆ‘æŒ–å‡ºä¸€å¤§æŠŠç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œä¸€ä¸‹å­å°±æŠŠdnsè¿™å—é€šå…³äº†ï¼šhttps:&#47;&#47;plantegg.github.io&#47;2019&#47;01&#47;09&#47;nslookup-OK-but-ping-fail&#47;","like_count":37,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441306,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551704933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1269873,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/71/895ee6cf.jpg","nickname":"åˆ†æ¸…äº‘æ·¡","note":"","ucode":"7045AE6BF72D31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126994,"discussion_content":"æŠ±æ­‰ï¼Œè¡¥å……ä¸ªæ–°é“¾æ¥ï¼š https://plantegg.github.io/2019/01/09/%E5%B0%B1%E6%98%AF%E8%A6%81%E4%BD%A0%E6%87%82ping--nslookup-OK-but-ping-fail/","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1578557534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1527323,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4e/1b/ba80a35e.jpg","nickname":"è¥¿å‡ºåä¸‰å½’","note":"","ucode":"693417E8D75F74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1269873,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/71/895ee6cf.jpg","nickname":"åˆ†æ¸…äº‘æ·¡","note":"","ucode":"7045AE6BF72D31","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372303,"discussion_content":"é“¾æ¥è¿˜æ˜¯ä¸å­˜åœ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620281025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":126994,"ip_address":""},"score":372303,"extra":""},{"author":{"id":1269873,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/71/895ee6cf.jpg","nickname":"åˆ†æ¸…äº‘æ·¡","note":"","ucode":"7045AE6BF72D31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1527323,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4e/1b/ba80a35e.jpg","nickname":"è¥¿å‡ºåä¸‰å½’","note":"","ucode":"693417E8D75F74","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374878,"discussion_content":"https://plantegg.github.io/2019/01/09/nslookup-OK-but-ping-fail/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621396883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":372303,"ip_address":""},"score":374878,"extra":""},{"author":{"id":1284474,"avatar":"https://static001.geekbang.org/account/avatar/00/13/99/7a/558666a5.jpg","nickname":"AceslupK","note":"","ucode":"048F84D019CBBB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1269873,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/71/895ee6cf.jpg","nickname":"åˆ†æ¸…äº‘æ·¡","note":"","ucode":"7045AE6BF72D31","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393255,"discussion_content":"å°å“¥ï¼Œè¿˜é‡åˆ°è¿‡åŸŸåèƒ½pingé€šï¼Œåº”ç”¨æœåŠ¡ä¹Ÿæ­£å¸¸ï¼Œcurlä¸è¡Œï¼Œä¸€å®šè¦åŠ -4æ‰è¡Œï¼Œæ„Ÿè§‰å’Œv6æœ‰ç‚¹ç‚¹å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631329526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374878,"ip_address":""},"score":393255,"extra":""}]},{"author":{"id":1160951,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/f7/3c3b1385.jpg","nickname":"æµ·èƒ†é˜¶æ®µ","note":"","ucode":"7A8C4BB4D0CDB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373072,"discussion_content":"æˆ‘çŒœæµ‹æ˜¯å› ä¸º/etc/hosts æ–‡ä»¶çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620607996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1269873,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/71/895ee6cf.jpg","nickname":"åˆ†æ¸…äº‘æ·¡","note":"","ucode":"7045AE6BF72D31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1160951,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/f7/3c3b1385.jpg","nickname":"æµ·èƒ†é˜¶æ®µ","note":"","ucode":"7A8C4BB4D0CDB8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381380,"discussion_content":"ä¸æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625030582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373072,"ip_address":""},"score":381380,"extra":""}]},{"author":{"id":1162382,"avatar":"","nickname":"ç¥ç¯","note":"","ucode":"615A1404E157E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46242,"discussion_content":"é“¾æ¥ä¸å­˜åœ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573134686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1315147,"avatar":"https://static001.geekbang.org/account/avatar/00/14/11/4b/fa64f061.jpg","nickname":"xfan","note":"","ucode":"48ED8D498D7F56","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":45097,"discussion_content":"urlå¤±æ•ˆäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573003882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69260,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1550708461,"is_pvip":false,"replies":[{"id":"24839","content":"èµï¼Œä¹Ÿè°¢è°¢åˆ†äº«ç»éªŒ","user_name":"ä½œè€…å›å¤","comment_id":69260,"uid":"1001282","ip_address":"","utype":1,"ctime":1550849032,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"65975217901","product_id":100020901,"comment_content":"æ‰“å¡day39<br>ç¢°åˆ°dnsé—®é¢˜æœ€å¤šçš„å°±æ˜¯åŠ«æŒï¼Œç°åœ¨å…¬ç½‘éƒ½æ˜¯å¼ºåˆ¶httpsï¼Œå†…éƒ¨ç”¨powerdnsï¼Œæ€§èƒ½åˆšåˆšçš„ï½","like_count":16,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440030,"discussion_content":"èµï¼Œä¹Ÿè°¢è°¢åˆ†äº«ç»éªŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550849032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73322,"user_name":"MJ","can_delete":false,"product_type":"c1","uid":1237145,"ip_address":"","ucode":"FCEC0C21444D2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","comment_is_top":false,"comment_ctime":1551859313,"is_pvip":false,"replies":[{"id":"26758","content":"å¯ä»¥çš„","user_name":"ä½œè€…å›å¤","comment_id":73322,"uid":"1001282","ip_address":"","utype":1,"ctime":1551885676,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"53091466865","product_id":100020901,"comment_content":"centos 7  dnsmasqå¦‚ä¸‹æ“ä½œï¼š<br><br>cat &#47;etc&#47;resolv.conf<br>nameserver 114.114.114.114<br><br>yum -y install dnsmasq<br>systemctl start dnsmasq<br><br>æµ‹è¯•dnsç¼“å­˜ï¼Œè¦æµ‹è¯•æŸ¥è¯¢é€Ÿåº¦ï¼Œè¯·è®¿é—®ä¸€ä¸ª dnsmasq å¯åŠ¨åæ²¡æœ‰è®¿é—®è¿‡çš„ç½‘ç«™ï¼Œæ‰§è¡Œï¼š<br>[root@node ~]# dig archlinux.org | grep &quot;Query time&quot;<br>;; Query time: 212 msec<br>[root@node ~]# dig archlinux.org | grep &quot;Query time&quot;<br>;; Query time: 2 msec<br>å†æ¬¡è¿è¡Œå‘½ä»¤ï¼Œå› ä¸ºä½¿ç”¨äº†ç¼“å­˜ï¼ŒæŸ¥è¯¢æ—¶é—´åº”è¯¥å¤§å¤§ç¼©çŸ­ã€‚<br><br>è€å¸ˆï¼Œè¿™ç§æƒ…å†µä¹Ÿæ˜¯å¯ä»¥çš„å§ã€‚ï¼ˆé’ˆå¯¹ä¸Šä¸€ä¸ªé—®é¢˜çš„è§£é‡Šï¼‰<br>","like_count":13,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442022,"discussion_content":"å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551885676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184690,"user_name":"ç½—è¾‘æ€ç»´","can_delete":false,"product_type":"c1","uid":1318941,"ip_address":"","ucode":"D257A06EDE928E","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/1d/0c1a184c.jpg","comment_is_top":false,"comment_ctime":1583382668,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35943121036","product_id":100020901,"comment_content":"ä»Šå¤©è¯¾ç¨‹æ¯”è¾ƒç†Ÿæ‚‰ï¼Œä½†æ˜¯æ”¶è·éå¸¸å¤§ã€‚<br>1. ä¸¤ä¸ªå‘½ä»¤çš„ä½¿ç”¨åœºæ™¯ï¼šnslookup -debugã€time nslookupã€‚<br>2. ç†è§£æ€§èƒ½åˆ†æçš„æ€è·¯ï¼šæ€§èƒ½åˆ†æå’Œä¼˜åŒ–è¦åšåˆ°å¯è§†åŒ–ï¼Œå¯é‡åŒ–ã€‚æ¯”å¦‚DNSæŸ¥è¯¢æ…¢ï¼Œå¤šå°‘å»¶è¿Ÿç®—æ…¢ï¼Ÿæœ‰ä»€ä¹ˆå‘½ä»¤å¯ä»¥è§‚å¯ŸæŒ‡æ ‡ï¼Ÿåˆæœ‰ä»€ä¹ˆå‘½ä»¤å¯ä»¥è§‚å¯ŸDNSè§£æçš„è¿‡ç¨‹ï¼Ÿ<br>ç°åœ¨å¼€å§‹æ˜ç™½è€å¸ˆç»™æˆ‘ä»¬çŒè¾“çš„æ€§èƒ½åˆ†ææ€è·¯ã€‚<br>ä»¥å‰ä¸ªäººDNSæ’æŸ¥é¡ºåºéƒ½æ˜¯è¿™ä¸‰æŠŠæ–§ï¼š<br>1. æ£€æŸ¥æœ¬åœ°hostsï¼šcat &#47;etc&#47;hosts<br>2.æ£€æŸ¥resolv.confæ–‡ä»¶ï¼šcat &#47;etc&#47;resolv.confã€‚åœ¨redhat7&#47;centos7ä¸Šä¿®æ”¹resolv.confé‡Œçš„DNSåœ°å€åï¼Œé‡å¯å¯ç½‘ç»œæœåŠ¡å‘ç°DNSåœ°å€æ¶ˆå¤±äº†ï¼Œé‚£ä¹ˆæ£€æŸ¥ä¸‹ç½‘å¡é…ç½®æ–‡ä»¶ã€‚<br>3. æ£€æŸ¥ç½‘å¡é…ç½®æ–‡ä»¶ï¼š cat &#47;etc&#47;sysconfig&#47;network-scripts&#47;ifcfg-&lt;ç½‘å¡åç§°&gt;ï¼Œçœ‹ä¸‹é‡Œå¤´æœ‰æ²¡DNSé…ç½®ä¿¡æ¯ï¼Œæ²¡æœ‰çš„è¯è¡¥ä¸Šå»ã€‚","like_count":9},{"had_liked":false,"id":85586,"user_name":"å•è¡Œé“","can_delete":false,"product_type":"c1","uid":1008944,"ip_address":"","ucode":"A5F195FE78B964","user_header":"https://static001.geekbang.org/account/avatar/00/0f/65/30/74fcbb4b.jpg","comment_is_top":false,"comment_ctime":1555134543,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23029971023","product_id":100020901,"comment_content":"å¤§ç‰›å•¥æ—¶å€™æŠŠè¿™ä¸ªç³»åˆ—å‡ºç‰ˆçº¸è´¨ä¹¦ï¼Œæ”¶è—","like_count":6},{"had_liked":false,"id":117725,"user_name":"Lucky  Guy","can_delete":false,"product_type":"c1","uid":1202375,"ip_address":"","ucode":"44B4688D764475","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/c7/a65f5080.jpg","comment_is_top":false,"comment_ctime":1564119669,"is_pvip":false,"replies":[{"id":"43476","content":"ä¸€èˆ¬æ˜¯è€ƒè™‘å°½å¯èƒ½è‡ªä¸»æ§åˆ¶DNSè§£æï¼Œæ¯”å¦‚ä½¿ç”¨ä¸“ç”¨DNSæœåŠ¡å™¨ï¼ŒHTTPDNSï¼Œç”šè‡³æ˜¯ç›´æ¥ä½¿ç”¨IPåœ°å€è·³è¿‡è§£æ","user_name":"ä½œè€…å›å¤","comment_id":117725,"uid":"1001282","ip_address":"","utype":1,"ctime":1564410843,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"18743988853","product_id":100020901,"comment_content":"è€å¸ˆå…³äº DNSæ±¡æŸ“ æœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ¡ˆä¹ˆ?","like_count":5,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460096,"discussion_content":"ä¸€èˆ¬æ˜¯è€ƒè™‘å°½å¯èƒ½è‡ªä¸»æ§åˆ¶DNSè§£æï¼Œæ¯”å¦‚ä½¿ç”¨ä¸“ç”¨DNSæœåŠ¡å™¨ï¼ŒHTTPDNSï¼Œç”šè‡³æ˜¯ç›´æ¥ä½¿ç”¨IPåœ°å€è·³è¿‡è§£æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564410843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113382,"user_name":"JJj","can_delete":false,"product_type":"c1","uid":1196463,"ip_address":"","ucode":"EA53F2CEAFCFF1","user_header":"https://static001.geekbang.org/account/avatar/00/12/41/af/4307867a.jpg","comment_is_top":false,"comment_ctime":1562989253,"is_pvip":false,"replies":[{"id":"41988","content":"å—¯å—¯ï¼Œå®é™…ä½¿ç”¨æ—¶è¦è®¾ç½® upstream DNS æœåŠ¡å™¨","user_name":"ä½œè€…å›å¤","comment_id":113382,"uid":"1001282","ip_address":"","utype":1,"ctime":1563457869,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"14447891141","product_id":100020901,"comment_content":"ä½ å¥½ï¼Œè¯·é—®ä¸‹dnsç¼“å­˜dnsmasqçš„é…ç½®é‡Œé¢æ˜¯å¦è¿˜è¦è®¾ç½®DNSæœåŠ¡å™¨åœ°å€ï¼Œæ¯”å¦‚8.8.8.8æˆ–114.114.114.114<br><br>","like_count":4,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458193,"discussion_content":"å—¯å—¯ï¼Œå®é™…ä½¿ç”¨æ—¶è¦è®¾ç½® upstream DNS æœåŠ¡å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563457869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67702,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1550225563,"is_pvip":false,"replies":[{"id":"24045","content":"æ²¡æœ‰å±•å¼€è®²ï¼Œè¿™å„¿æäº†ä¸€ç‚¹åŠ«æŒçš„è§£å†³æ–¹æ³•","user_name":"ä½œè€…å›å¤","comment_id":67702,"uid":"1001282","ip_address":"","utype":1,"ctime":1550326307,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"14435127451","product_id":100020901,"comment_content":"ä¼šæœ‰DNSåŸŸååŠ«æŒçš„å†…å®¹å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439336,"discussion_content":"æ²¡æœ‰å±•å¼€è®²ï¼Œè¿™å„¿æäº†ä¸€ç‚¹åŠ«æŒçš„è§£å†³æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550326307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239659,"user_name":"æ…¢çƒ­æ€ªå‹","can_delete":false,"product_type":"c1","uid":1282953,"ip_address":"","ucode":"897FC278FC947C","user_header":"https://static001.geekbang.org/account/avatar/00/13/93/89/f3b28216.jpg","comment_is_top":false,"comment_ctime":1596608746,"is_pvip":false,"replies":[{"id":"88789","content":"è°¢è°¢è¡¥å……","user_name":"ä½œè€…å›å¤","comment_id":239659,"uid":"1001282","ip_address":"","utype":1,"ctime":1596977814,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"10186543338","product_id":100020901,"comment_content":"æ—¢ç„¶åŸŸåä»¥åˆ†å±‚çš„ç»“æ„è¿›è¡Œç®¡ç†ï¼Œç›¸å¯¹åº”çš„ï¼ŒåŸŸåè§£æå…¶å®ä¹Ÿæ˜¯ç”¨é€’å½’çš„æ–¹å¼ï¼ˆä»é¡¶çº§å¼€å§‹ï¼Œä»¥æ­¤ç±»æ¨ï¼‰ï¼Œå‘é€ç»™æ¯ä¸ªå±‚çº§çš„åŸŸåæœåŠ¡å™¨ï¼Œç›´åˆ°å¾—åˆ°è§£æç»“æœã€‚<br>è¿™é‡Œæè¿°ä¸æ°å½“ï¼Œè€å¸ˆæ¼è®²äº†é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢ï¼š<br>ï¼ˆ1ï¼‰é€’å½’æŸ¥è¯¢<br>é€’å½’æŸ¥è¯¢æ˜¯ä¸€ç§DNS æœåŠ¡å™¨çš„æŸ¥è¯¢æ¨¡å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹DNS æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·æœºè¯·æ±‚ï¼Œå¿…é¡»ä½¿ç”¨ä¸€ä¸ªå‡†ç¡®çš„æŸ¥è¯¢ç»“æœå›å¤å®¢æˆ·æœºã€‚å¦‚æœDNS æœåŠ¡å™¨æœ¬åœ°æ²¡æœ‰å­˜å‚¨æŸ¥è¯¢DNS ä¿¡æ¯ï¼Œé‚£ä¹ˆè¯¥æœåŠ¡å™¨ä¼šè¯¢é—®å…¶ä»–æœåŠ¡å™¨ï¼Œå¹¶å°†è¿”å›çš„æŸ¥è¯¢ç»“æœæäº¤ç»™å®¢æˆ·æœºã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æœåŠ¡å™¨è·Ÿå†…ç½‘DNS æˆ–ç›´æ¥ dns ä¹‹é—´éƒ½é‡‡ç”¨é€’å½’æŸ¥è¯¢ã€‚<br>ï¼ˆ2ï¼‰è¿­ä»£æŸ¥è¯¢<br>DNS æœåŠ¡å™¨å¦å¤–ä¸€ç§æŸ¥è¯¢æ–¹å¼ä¸ºè¿­ä»£æŸ¥è¯¢ï¼ŒDNS æœåŠ¡å™¨ä¼šå‘å®¢æˆ·æœºæä¾›å…¶ä»–èƒ½å¤Ÿè§£ææŸ¥è¯¢è¯·æ±‚çš„DNS æœåŠ¡å™¨åœ°å€ï¼Œå½“å®¢æˆ·æœºå‘é€æŸ¥è¯¢è¯·æ±‚æ—¶ï¼ŒDNS æœåŠ¡å™¨å¹¶ä¸ç›´æ¥å›å¤æŸ¥è¯¢ç»“æœï¼Œè€Œæ˜¯å‘Šè¯‰å®¢æˆ·æœºå¦ä¸€å°DNS æœåŠ¡å™¨åœ°å€ï¼Œå®¢æˆ·æœºå†å‘è¿™å°DNS æœåŠ¡å™¨æäº¤è¯·æ±‚ï¼Œä¾æ¬¡å¾ªç¯ç›´åˆ°è¿”å›æŸ¥è¯¢çš„ç»“æœã€‚æ‰€ä»¥ä¸€èˆ¬å†…ç½‘ dns å’Œå¤–ç½‘ dns ä¹‹é—´çš„éƒ½é‡‡ç”¨è¿­ä»£æŸ¥è¯¢ã€‚<br>","like_count":3,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503178,"discussion_content":"è°¢è°¢è¡¥å……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596977814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2034210,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/GicvRPEGZhqFSYn00tgI08n9AicrwKUxcymiaMyfJcib0HOU6Agb08G0pR9O5npPSq8kIKFDMESjCJFDSaXfMyrqNw/132","nickname":"Geek_6d4878","note":"","ucode":"DEA2A2EAB6B30C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365012,"discussion_content":"æˆ‘å°±æ˜¯åœ¨è¯„è®ºåŒºæ‰¾è¿™ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617684751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89949,"user_name":"é™³å…ˆæ£®","can_delete":false,"product_type":"c1","uid":1229006,"ip_address":"","ucode":"0F7AC617E3FE90","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/ce/fc41ad5e.jpg","comment_is_top":false,"comment_ctime":1556344959,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10146279551","product_id":100020901,"comment_content":"å¾ˆæœ‰æ”¶è·ï¼Œæ„Ÿè°¢ä½œè€…Â·Â·Â·è¿™ä¸ªä¸“æ è¿˜æ˜¯å¾ˆè®©æˆ‘æ¶¨çŸ¥è¯†~~~ä¿®ç‚¼ä¸èƒ½ä¸€å£åƒæˆä¸€ä¸ªå¤§èƒ–å­å¾—è‡ªå·±æ…¢æ…¢å»æ¶ˆåŒ–ï¼Œä¸“æ çŸ¥è¯†ç‚¹æœ‰ç‚¹å¤šã€‚æœ‰ç‚¹åŸºç¡€ï¼Œçœ‹èµ·æ¥è™½ç„¶ä¸å¤ªè´¹åŠ›ï¼Œä½†æ˜¯è¦å®Œå…¨æŒæ¡è¿˜æ˜¯è¦å¤šå­¦å‡ éæ¸©æ•…è€ŒçŸ¥æ–°æ‰è¡Œï¼Œè¿˜å¤šæ•²ï¼Œå¤šç»ƒï¼Œå¤šè®°ï¼ˆåŸºç¡€çŸ¥è¯†ï¼‰æ‰èƒ½æ¶ˆåŒ–çŸ¥è¯†ç‚¹ã€‚","like_count":2},{"had_liked":false,"id":69162,"user_name":"bruceding","can_delete":false,"product_type":"c1","uid":1024057,"ip_address":"","ucode":"D35A2B05487EAE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/39/ddcf26ac.jpg","comment_is_top":false,"comment_ctime":1550672075,"is_pvip":false,"replies":[{"id":"24537","content":"ğŸ‘è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","comment_id":69162,"uid":"1001282","ip_address":"","utype":1,"ctime":1550675615,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"10140606667","product_id":100020901,"comment_content":"é‡åˆ°è¿‡ GO client è§£æ dns çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯åšäº†æŠ˜ä¸­ï¼Œé…ç½® &#47;etc&#47;resolv.conf  å¤šä¸ª name server è§£å†³ï¼ŒGO DNS è§£ææµç¨‹å¯ä»¥å‚è€ƒï¼š http:&#47;&#47;blog.bruceding.com&#47;516.html","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439976,"discussion_content":"ğŸ‘è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550675615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251206,"user_name":"Wen","can_delete":false,"product_type":"c1","uid":1367387,"ip_address":"","ucode":"892CB242BA9C04","user_header":"https://static001.geekbang.org/account/avatar/00/14/dd/5b/5461afad.jpg","comment_is_top":false,"comment_ctime":1601423220,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5896390516","product_id":100020901,"comment_content":"1ã€ ä¸¤ä¸ªå‘½ä»¤çš„ä½¿ç”¨åœºæ™¯ï¼šnslookup --debugã€time nslookupã€‚å®‰è£…ï¼šyum install -y bind-utils<br><br>2ã€DNSæŸ¥è¯¢é¡ºåºï¼š<br>1ï¼‰æ£€æŸ¥æœ¬åœ°hostsï¼šcat &#47;etc&#47;hosts<br>2ï¼‰æ£€æŸ¥ &#47;etc&#47;resolv.confï¼Œä¸´æ—¶ç”Ÿæ•ˆï¼Œæ°¸ä¹…ç”Ÿæ•ˆéœ€é…ç½®ç½‘å¡ã€‚<br><br>3ã€DNSä¼˜åŒ–æ€è·¯ï¼š<br>1ï¼‰æ›´æ¢å»¶è¿Ÿæ›´å°çš„DNSæœåŠ¡å™¨ï¼Œæ¯”å¦‚ç”µä¿¡çš„dnsï¼š114.114.114.114<br>2ï¼‰å¼€å¯DNSç¼“å­˜ï¼Œæ¯”å¦‚dnsmasqï¼Œå®‰è£…å’Œå¼€å¯ï¼šyum install -y dnsmasq;systemctl enable dnsmasq<br><br>","like_count":1},{"had_liked":false,"id":245497,"user_name":"Geek_04e22a","can_delete":false,"product_type":"c1","uid":1184505,"ip_address":"","ucode":"B64FF12EA28BA6","user_header":"https://static001.geekbang.org/account/avatar/00/12/12/f9/7e6e3ac6.jpg","comment_is_top":false,"comment_ctime":1598960587,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5893927883","product_id":100020901,"comment_content":"DNSè§£æåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼ŒæœåŠ¡å™¨åˆ°æœ¬åœ°DNSæœåŠ¡å™¨æ˜¯é€’å½’ï¼Œæœ¬åœ°æœåŠ¡å™¨åˆ°åŸŸåè§£ææœåŠ¡å™¨æ˜¯è¿­ä»£çš„æ–¹å¼","like_count":2},{"had_liked":false,"id":81992,"user_name":"å¦‚æœ","can_delete":false,"product_type":"c1","uid":1320638,"ip_address":"","ucode":"138A3EEEE50850","user_header":"","comment_is_top":false,"comment_ctime":1554097817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5849065113","product_id":100020901,"comment_content":"DAY37,æ‰“å¡","like_count":2},{"had_liked":false,"id":69217,"user_name":"æ½˜æ”¿å®‡","can_delete":false,"product_type":"c1","uid":1254758,"ip_address":"","ucode":"9A6658EE862D95","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/66/4835d92e.jpg","comment_is_top":false,"comment_ctime":1550678695,"is_pvip":true,"replies":[{"id":"24836","content":"å–å†³äºå®é™…ä¸šåŠ¡ï¼Œé€šå¸¸å‡ åæ¯«ç§’ä»¥ä¸‹ã€‚å†å¤§äº†ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç›´è§‚æ„Ÿå—åˆ°è¿™ä¸ªå»¶è¿Ÿäº†","user_name":"ä½œè€…å›å¤","comment_id":69217,"uid":"1001282","ip_address":"","utype":1,"ctime":1550848887,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5845645991","product_id":100020901,"comment_content":"pingä¸€ä¸ªIPçš„æ—¶å€™ï¼Œ140mså°±ç®—å»¶è¿Ÿå¾ˆå¤§äº†ï¼Œä¸€èˆ¬å¤šå°‘æ¯«ç§’ç®—æ­£å¸¸ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440007,"discussion_content":"å–å†³äºå®é™…ä¸šåŠ¡ï¼Œé€šå¸¸å‡ åæ¯«ç§’ä»¥ä¸‹ã€‚å†å¤§äº†ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç›´è§‚æ„Ÿå—åˆ°è¿™ä¸ªå»¶è¿Ÿäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550848887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68076,"user_name":"ä½³","can_delete":false,"product_type":"c1","uid":1334190,"ip_address":"","ucode":"482C90C3DC17DB","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/ae/3d639ea4.jpg","comment_is_top":false,"comment_ctime":1550407642,"is_pvip":false,"replies":[{"id":"24369","content":"å—¯å—¯ï¼Œå¾ˆå¤šåŸŸåéƒ½æ²¡æœ‰é…åå‘è§£æ","user_name":"ä½œè€…å›å¤","comment_id":68076,"uid":"1001282","ip_address":"","utype":1,"ctime":1550569723,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5845374938","product_id":100020901,"comment_content":"è¿˜éœ€è¦æ•…æ„ï¼Œlinux,pingè¿‡ç¨‹åŸŸåè§£æï¼Œè¿˜æœ‰ä¸€ä¸ªæ–¹å‘è§£æè¿‡ç¨‹ï¼Œå†…ç½‘è§£æå™¨ï¼Œç›®å‰ä½¿ç”¨corednsåšå†…ç½‘çš„åŸŸåè§£æå™¨çš„æ—¶å€™ï¼Œä½¿ç”¨etcdæ’ä»¶æ—¶å€™éœ€è¦é…ç½®æ–¹å‘è§£æé…ç½®ï¼Œå¦åˆ™pingæ—¶å€™ï¼Œä¼šæŠŠåå‘è§£æå‘é€å¤–ç½‘ä¸Šæ¸¸dns,å‡ºç°è¶…æ—¶ï¼Œ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439500,"discussion_content":"å—¯å—¯ï¼Œå¾ˆå¤šåŸŸåéƒ½æ²¡æœ‰é…åå‘è§£æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550569723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67859,"user_name":"å°è€é¼ ","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1550301775,"is_pvip":false,"replies":[{"id":"24053","content":"æ¢ä¸€ä¸ª DNS æœåŠ¡å™¨å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ dig +trace +nodnssec time.geekbang.org @8.8.8.8","user_name":"ä½œè€…å›å¤","comment_id":67859,"uid":"1001282","ip_address":"","utype":1,"ctime":1550326853,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5845269071","product_id":100020901,"comment_content":"1ï¼‰<br>root@ubuntu:&#47;usr&#47;sbin# dig +trace +nodnssec time.geekbang.org<br><br>; &lt;&lt;&gt;&gt; DiG 9.11.3-1ubuntu1.2-Ubuntu &lt;&lt;&gt;&gt; +trace +nodnssec time.geekbang.org<br>;; global options: +cmd<br>;; Received 28 bytes from 127.0.0.53#53(127.0.0.53) in 0 ms<br>ä¸ºä»€ä¹ˆåªæ˜¾ç¤ºè¿™äº›ä¿¡æ¯<br><br>2ï¼‰<br>root@ubuntu:&#47;usr&#47;sbin# whereis  dnsmasq <br>dnsmasq: &#47;usr&#47;sbin&#47;dnsmasq &#47;usr&#47;share&#47;man&#47;man8&#47;dnsmasq.8.gz<br>root@ubuntu:&#47;usr&#47;sbin# &#47;usr&#47;sbin&#47;dnsmasq start<br><br>dnsmasq: junk found in command line<br>å¦‚ä½•è§£å†³","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439403,"discussion_content":"æ¢ä¸€ä¸ª DNS æœåŠ¡å™¨å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ dig +trace +nodnssec time.geekbang.org @8.8.8.8","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550326853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67592,"user_name":"Days","can_delete":false,"product_type":"c1","uid":1317834,"ip_address":"","ucode":"4DDB1CD8F493E1","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/ca/9afb89a2.jpg","comment_is_top":false,"comment_ctime":1550204278,"is_pvip":false,"replies":[{"id":"24039","content":"å—¯å—¯ï¼Œç¯‡å¹…é™åˆ¶ï¼ŒåŸç†æ²¡æ³•å±•å¼€çš„å¤ªå¤šï¼Œè¿˜æ˜¯ä»¥æ€§èƒ½åˆ†æä¸ºä¸»ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥ç•™è¨€é‡Œé¢ç›´æ¥æã€‚","user_name":"ä½œè€…å›å¤","comment_id":67592,"uid":"1001282","ip_address":"","utype":1,"ctime":1550325791,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5845171574","product_id":100020901,"comment_content":"æ€»ç»“ï¼šå¯¹DNSå·¥ä½œæµç¨‹åšäº†æ€»ç»“ï¼Œæ„Ÿè§‰æ¯”è¾ƒåŸºç¡€ï¼ŒåæœŸæ˜¯å¦å¯ä»¥æ·±åº¦è®²è§£ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439266,"discussion_content":"å—¯å—¯ï¼Œç¯‡å¹…é™åˆ¶ï¼ŒåŸç†æ²¡æ³•å±•å¼€çš„å¤ªå¤šï¼Œè¿˜æ˜¯ä»¥æ€§èƒ½åˆ†æä¸ºä¸»ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥ç•™è¨€é‡Œé¢ç›´æ¥æã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550325791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324838,"user_name":"Runner91","can_delete":false,"product_type":"c1","uid":2849692,"ip_address":"","ucode":"770E51DFCDCA83","user_header":"https://static001.geekbang.org/account/avatar/00/2b/7b/9c/5d1dcda5.jpg","comment_is_top":false,"comment_ctime":1638676585,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638676585","product_id":100020901,"comment_content":"æ›¾ç»æ’æŸ¥ä¸€ä¸ªapiæ¥å£æ—¶å¿«æ—¶æ…¢çš„é—®é¢˜ä½¿ç”¨äº†è¿™ä¸ªpythonè„šæœ¬https:&#47;&#47;github.com&#47;reorx&#47;httpstatï¼Œèƒ½å¤Ÿæ¸…æ™°æ˜¾ç¤ºhttpå„é˜¶æ®µçš„è€—æ—¶ï¼Œé”å®šåˆ°äº†dnsé—®é¢˜åï¼Œå¯¹æ¯”&#47;etc&#47;resolv.confå‘ç°æŸäº›dns ipè¿‡æœŸäº†ï¼Œä¿®æ”¹åï¼Œåˆå¯ä»¥æ„‰å¿«çš„æ‘¸é±¼äº†","like_count":1},{"had_liked":false,"id":324828,"user_name":"å¾åŒå­¦å‘€","can_delete":false,"product_type":"c1","uid":1252813,"ip_address":"","ucode":"03383EE820514D","user_header":"https://static001.geekbang.org/account/avatar/00/13/1d/cd/3819726f.jpg","comment_is_top":false,"comment_ctime":1638672961,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638672961","product_id":100020901,"comment_content":"114.114.114.114 åå‘è§£æ ipè·å–hostname è¶…æ—¶æˆ–è€…å¤±è´¥ï¼Œæ˜¯ä»€ä¹ˆåŸå› ","like_count":0},{"had_liked":false,"id":317820,"user_name":"happysongs","can_delete":false,"product_type":"c1","uid":1544975,"ip_address":"","ucode":"2CFEB1DB78722A","user_header":"https://static001.geekbang.org/account/avatar/00/17/93/0f/ea9d3be8.jpg","comment_is_top":false,"comment_ctime":1634980773,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634980773","product_id":100020901,"comment_content":"è€å¸ˆè®²åˆ°ï¼š<br>å¯ä»¥åœ¨å†…ç½‘ä¸­ï¼Œæ­å»ºè‡ªå®šä¹‰çš„ DNS æœåŠ¡å™¨ï¼Œä¸“é—¨ç”¨æ¥è§£æå†…ç½‘ä¸­çš„åŸŸåã€‚<br>è€Œå†…ç½‘ DNS æœåŠ¡å™¨ï¼Œä¸€èˆ¬è¿˜ä¼šè®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªä¸Šæ¸¸ DNS æœåŠ¡å™¨ï¼Œç”¨æ¥è§£æå¤–ç½‘çš„åŸŸåã€‚<br><br>å¤šä¸ªä¸Šæ¸¸æœåŠ¡å™¨ï¼Œæ˜¯å¦‚ä½•é…ç½®çš„å‘¢ï¼Ÿ æœ‰æ²¡ç®€å•çš„æ¡ˆä¾‹å‘¢ï¼Ÿ è°¢è°¢ï¼","like_count":0},{"had_liked":false,"id":268981,"user_name":"Wade_é˜¿ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1688629,"ip_address":"","ucode":"5AE2E846A13443","user_header":"https://static001.geekbang.org/account/avatar/00/19/c4/35/2cc10d43.jpg","comment_is_top":false,"comment_ctime":1608458560,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608458560","product_id":100020901,"comment_content":"å¾ˆæœ‰è‰¯å¤šï¼Œæ„Ÿè°¢è¿™ä¸ªä¸“æ ï¼Œè€å¸ˆè®²çš„éå¸¸å¥½ï¼Œè®©æˆ‘å—ç›ŠåŒªæµ…ã€‚æœ€åå°ç»“é‡Œé¢å‡ ç§å¸¸è§dnsä¼˜åŒ–æ–¹æ³•é‡Œï¼ŒåŸºäº DNS çš„å…¨å±€è´Ÿè½½å‡è¡¡ï¼ˆGSLBï¼‰ï¼Œæ˜¯ä¸æ˜¯ç”¨çš„anycast æŠ€æœ¯æ¥å®ç°ï¼Ÿ","like_count":0},{"had_liked":false,"id":241728,"user_name":"æ˜ŸæœŸå…«","can_delete":false,"product_type":"c1","uid":1185504,"ip_address":"","ucode":"34A37F73A48E7F","user_header":"https://static001.geekbang.org/account/avatar/00/12/16/e0/7abad3cc.jpg","comment_is_top":false,"comment_ctime":1597403070,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597403070","product_id":100020901,"comment_content":"è€å¸ˆæœ‰é‡åˆ°ç½‘ç»œè¿æ¥close-waitå¾ˆå¤šï¼Œå¯¼è‡´cpu100çš„æƒ…å†µå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":199362,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1585487723,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585487723","product_id":100020901,"comment_content":"æ‹“å®½æ€§èƒ½é—®é¢˜çš„æ’æŸ¥æ€è·¯ï¼Œä»¥å‰æ›´å¤šèšç„¦ä¸åº”ç”¨æœåŠ¡ï¼Œå¿½è§†æ•´ä¸ªé“¾è·¯æ’æŸ¥çš„å¿…è¦æ€§~","like_count":0},{"had_liked":false,"id":163773,"user_name":"HelloTalk","can_delete":false,"product_type":"c1","uid":1618633,"ip_address":"","ucode":"F898E6A7C61D39","user_header":"https://static001.geekbang.org/account/avatar/00/18/b2/c9/b414a77c.jpg","comment_is_top":false,"comment_ctime":1576802002,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576802002","product_id":100020901,"comment_content":"å¾ˆæ£’çš„è¯¾ç¨‹","like_count":0},{"had_liked":false,"id":110319,"user_name":"eric-xin","can_delete":false,"product_type":"c1","uid":1005634,"ip_address":"","ucode":"B10BB7796CDF6B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/42/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1562229538,"is_pvip":false,"replies":[{"id":"40091","content":"è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1562249183,"ip_address":"","comment_id":110319,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562229538","product_id":100020901,"comment_content":"ä¹‹å‰æˆ‘é…ç½®å†…éƒ¨DNSæ—¶å€™å‘ç°è§£æè…¾è®¯çš„åœ°å€æœ‰é—®é¢˜ï¼Œåæ¥æŠŠè¯·æ±‚è…¾è®¯æ¥å£çš„zoneæ¢æˆäº† 119.29.29.29dns è¶…æ—¶å°±å¥½äº†ï¼Œé»˜è®¤dns è¶…æ—¶æ—¶é—´æ˜¯30ç§’ï¼Œç®€ç›´è¦å‘½","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456813,"discussion_content":"è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562249183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108306,"user_name":"æ¨é™†ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1108457,"ip_address":"","ucode":"3BC968447406EB","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/e9/1f95e422.jpg","comment_is_top":false,"comment_ctime":1561715585,"is_pvip":true,"replies":[{"id":"39656","content":"æ˜¯çš„ï¼Œæ˜¯æœ‰ç¼“å­˜çš„ï¼Œä½†ä¸æ„å‘³ç€æ‰€æœ‰è¯·æ±‚éƒ½ä¼šç¼“å­˜ä¸‹æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1562060620,"ip_address":"","comment_id":108306,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561715585","product_id":100020901,"comment_content":"è¯·æ•™ä¸‹ï¼Œä¸ºä»€ä¹ˆå¤šæ¬¡nslookupçš„æ—¶å»¶æ²¡æœ‰æå‡ï¼ŸdnsæœåŠ¡å™¨æœ¬èº«ä¸æ˜¯å¯ä»¥ç¼“å­˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455913,"discussion_content":"æ˜¯çš„ï¼Œæ˜¯æœ‰ç¼“å­˜çš„ï¼Œä½†ä¸æ„å‘³ç€æ‰€æœ‰è¯·æ±‚éƒ½ä¼šç¼“å­˜ä¸‹æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562060620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73313,"user_name":"MJ","can_delete":false,"product_type":"c1","uid":1237145,"ip_address":"","ucode":"FCEC0C21444D2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","comment_is_top":false,"comment_ctime":1551857418,"is_pvip":false,"replies":[{"id":"26757","content":"æ¡ˆä¾‹é‡Œé¢éœ€è¦çš„ï¼Œæ¢æˆdnsmasqè§£æ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551885653,"ip_address":"","comment_id":73313,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551857418","product_id":100020901,"comment_content":"echo nameserver 127.0.0.1 &gt; &#47;etc&#47;resolv.conf<br><br>è€å¸ˆï¼Œè¿™ä¸ªéœ€è¦é…ç½®å—ï¼Ÿé…ç½®åå°±è§£æä¸äº†å§<br>dnsmasqé»˜è®¤ä¼šä»&#47;etc&#47;resolv.confè¯»å–æ–‡ä»¶ï¼Œè¯»å–114.114.114.114.","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442021,"discussion_content":"æ¡ˆä¾‹é‡Œé¢éœ€è¦çš„ï¼Œæ¢æˆdnsmasqè§£æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551885653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69907,"user_name":"Christmas","can_delete":false,"product_type":"c1","uid":1219172,"ip_address":"","ucode":"F48F6BE4A7595B","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/64/ad837224.jpg","comment_is_top":false,"comment_ctime":1550901975,"is_pvip":false,"replies":[{"id":"25339","content":"è¦çœ‹çœ‹æŒ‡å®šçš„ DNS æœåŠ¡å™¨æ˜¯ä¸æ˜¯å¸¦ç¼“å­˜çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551194247,"ip_address":"","comment_id":69907,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550901975","product_id":100020901,"comment_content":"é…ç½®äº†ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œdigå’Œnslookupæœ‰ä¸€ä¸ªæ˜¯å¯ä»¥ä¸èµ°ç¼“å­˜çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440347,"discussion_content":"è¦çœ‹çœ‹æŒ‡å®šçš„ DNS æœåŠ¡å™¨æ˜¯ä¸æ˜¯å¸¦ç¼“å­˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551194247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67962,"user_name":"æ¯æ—¥éƒ½æƒ³ä¸Šç­","can_delete":false,"product_type":"c1","uid":1060466,"ip_address":"","ucode":"1DE64120C8B14A","user_header":"https://static001.geekbang.org/account/avatar/00/10/2e/72/145c10db.jpg","comment_is_top":false,"comment_ctime":1550369487,"is_pvip":false,"replies":[{"id":"24366","content":"1. ä¸æ˜¯çš„ï¼Œè¿™æ˜¯å‘½ä»¤çš„æ‰§è¡Œæ—¶é—´<br>2. windowsé‡Œé¢æ²¡æœ‰timeå‘½ä»¤ï¼Œå¯ä»¥è¯•è¯•dig","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550569071,"ip_address":"","comment_id":67962,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550369487","product_id":100020901,"comment_content":"nslookup å‰é¢åŠ time å¯ä»¥å‡ºç°è€—æ—¶æ˜¯ç”¨nslooktime æœ¬èº«çš„æœºåˆ¶å—ï¼Ÿæˆ‘æƒ³åœ¨windowsä¸­time nslookupæŸ¥çœ‹å‘ç°ä¸è¡Œï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439443,"discussion_content":"1. ä¸æ˜¯çš„ï¼Œè¿™æ˜¯å‘½ä»¤çš„æ‰§è¡Œæ—¶é—´\n2. windowsé‡Œé¢æ²¡æœ‰timeå‘½ä»¤ï¼Œå¯ä»¥è¯•è¯•dig","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550569071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67828,"user_name":"fran712","can_delete":false,"product_type":"c1","uid":1284429,"ip_address":"","ucode":"B09A1186FA1FA5","user_header":"","comment_is_top":false,"comment_ctime":1550287681,"is_pvip":false,"replies":[{"id":"24049","content":"å—¯å—¯ï¼Œå½“ç„¶å¯ä»¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550326496,"ip_address":"","comment_id":67828,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550287681","product_id":100020901,"comment_content":"ä½¿ç”¨nscdåšå®¢æˆ·ç«¯ç¼“å­˜ä¹Ÿå¯ä»¥å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439388,"discussion_content":"å—¯å—¯ï¼Œå½“ç„¶å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550326496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67776,"user_name":"SunnyBird","can_delete":false,"product_type":"c1","uid":1004463,"ip_address":"","ucode":"03A37454831083","user_header":"https://static001.geekbang.org/account/avatar/00/0f/53/af/0e3ddb1d.jpg","comment_is_top":false,"comment_ctime":1550264953,"is_pvip":false,"replies":[{"id":"24048","content":"æ˜¯çš„ï¼Œä½¿ç”¨IPåœ°å€å°±æ²¡æœ‰DNSæŸ¥è¯¢äº†","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550326440,"ip_address":"","comment_id":67776,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550264953","product_id":100020901,"comment_content":"è¯·æ•™ä¸€ä¸‹ å¦‚æœåœ¨ä½¿ç”¨ http çš„æ—¶å€™ ç›´æ¥ä½¿ç”¨ IP åœ°å€ è€Œä¸æ˜¯ åŸŸå æ˜¯ä¸æ˜¯å¯ä»¥å‡å°‘ dns æŸ¥è¯¢æ—¶é—´ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439367,"discussion_content":"æ˜¯çš„ï¼Œä½¿ç”¨IPåœ°å€å°±æ²¡æœ‰DNSæŸ¥è¯¢äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550326440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67591,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1550203638,"is_pvip":false,"replies":[{"id":"24038","content":"å—¯å—¯ï¼ŒHTTPDNS å°±æ˜¯åœ¨å®¢æˆ·ç«¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æœ‰äº›å®¢æˆ·ç«¯å¯èƒ½è¿˜ä¼šç¼“å­˜ä¸€æ‰¹ IP åœ°å€ï¼Œé¿å… DNS è§£æå¤±è´¥çš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550325722,"ip_address":"","comment_id":67591,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550203638","product_id":100020901,"comment_content":"[D37æ‰“å¡]<br>åšç§»åŠ¨ç«¯å¼€å‘æ—¶,ç¡®å®ä¼šç»å¸¸é‡åˆ°åŸŸååŠ«æŒçš„æƒ…å†µ.<br>ä¸è¿‡å½“æ—¶çš„åšæ³•éƒ½æ˜¯æ›¿æ¢httpä¸ºhttps. wsæ›¿æ¢ä¸ºwss.<br>ä»Šå¤©ç®—æ˜¯è§è¯†äº†,è¿˜å¯ä»¥ç”¨ HTTPDNS.<br><br>å¹³å¸¸æœåŠ¡å™¨ç«¯çš„dnsè§£æé—®é¢˜å¥½æ’æŸ¥å’Œå¤„ç†,å®¢æˆ·ç«¯çš„å°±éº»çƒ¦å¤šäº†.åªèƒ½è®©å®¢æˆ·ç«¯ç»•è¿‡ä¸€äº›å·²çŸ¥çš„å‘,æˆ–è€…æä¾›å¤‡é€‰æ–¹æ¡ˆ.","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439265,"discussion_content":"å—¯å—¯ï¼ŒHTTPDNS å°±æ˜¯åœ¨å®¢æˆ·ç«¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æœ‰äº›å®¢æˆ·ç«¯å¯èƒ½è¿˜ä¼šç¼“å­˜ä¸€æ‰¹ IP åœ°å€ï¼Œé¿å… DNS è§£æå¤±è´¥çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550325722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}