{"id":803088,"title":"05ï½œä½ ç”¨å¯¹æ•°æ®ç±»å‹äº†å—ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä¿Šè¾¾ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œæ•°æ®å­˜å‚¨åœ¨è¡¨é‡Œé¢ï¼Œè¡¨ç”±è‹¥å¹²ä¸ªåˆ—ç»„æˆï¼Œæ¯ä¸ªåˆ—éƒ½æœ‰å„è‡ªçš„æ•°æ®ç±»å‹ã€‚MySQLæ•°æ®åº“æ”¯æŒä¸€äº›åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬ä¸²ï¼ˆStringï¼‰ç±»å‹ã€æ•°å€¼ç±»å‹ã€æ—¥æœŸå’Œæ—¶é—´ç±»å‹ï¼ŒMySQLæ–°ç‰ˆæœ¬è¿˜æ”¯æŒä¸€äº›å¤æ‚çš„æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬JSONç±»å‹ã€ç©ºé—´æ•°æ®ç±»å‹ï¼ˆSpatial Data Typesï¼‰ã€‚</p><p>é‚£ä¹ˆï¼Œåœ¨è®¾è®¡è¡¨ç»“æ„æ—¶ï¼Œåº”è¯¥å¦‚ä½•é€‰æ‹©æ¯ä¸ªåˆ—çš„æ•°æ®ç±»å‹å‘¢ï¼Ÿæ€»ä½“æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚æ¥ç¡®å®šæ•°æ®ç±»å‹ã€‚åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬å°±æ¥è¯¦ç»†èŠä¸€èŠMySQLä¸­åŸºç¡€æ•°æ®ç±»å‹çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ï¼Œè‡³äºå¤æ‚çš„æ•°æ®ç±»å‹ï¼Œè¿™èŠ‚è¯¾å…ˆä¸åšå¤ªå¤šçš„è®¨è®ºã€‚</p><h2>ä¸²ï¼ˆStringï¼‰ç±»å‹</h2><p>å¥½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å…ˆä»ä¸²ç±»å‹å¼€å§‹è®²èµ·ã€‚</p><p>ä¸²ç±»å‹å¯åˆ†ä¸ºå®šé•¿ç±»å‹å’Œå˜é•¿ç±»å‹ã€‚å®šé•¿ç±»å‹åˆåŒ…æ‹¬ CHAR å’Œ BINARYï¼Œå˜é•¿ç±»å‹åŒ…æ‹¬VARCHARã€VARBINARYã€TEXT å’Œ BLOBã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€äº›ç®€å•çš„ä¾‹å­æ¥ç†Ÿæ‚‰ä¸€ä¸‹è¿™äº›æ•°æ®ç±»å‹ã€‚</p><h3>å­—ç¬¦ä¸²ç±»å‹</h3><h4>CHAR(N)</h4><p>é¦–å…ˆæ˜¯CHARç±»å‹çš„ä¸€äº›ä¾‹å­ã€‚</p><pre><code class=\"language-go\">mysql&gt; create table t_char(a char(10));\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; insert into t_char values('  ä¸­æ–‡ç¬¦å·    ');\nQuery OK, 1 row affected (0.00 sec)\n\nmysql&gt; select length(a), char_length(a) from t_char;\n+-----------+----------------+\n| length(a) | char_length(a) |\n+-----------+----------------+\n|        14 |              6 |\n+-----------+----------------+\n1 row in set (0.00 sec)\n\n\nmysql&gt; select a, hex(a), concat('{', a, '}') as aa from t_char;\n+------------+------------------------------+--------------+\n| a          | hex(a)                       | aa           |\n+------------+------------------------------+--------------+\n|   ä¸­æ–‡ç¬¦å· | 2020E4B8ADE69687E7ACA6E58FB7 | {  ä¸­æ–‡ç¬¦å·} |\n+------------+------------------------------+--------------+\n1 row in set (0.00 sec)\n\n\nmysql&gt; insert into t_char values('0123456789A');\nERROR 1406 (22001): Data too long for column 'a' at row 1\n\n\nmysql&gt; create table t_char(a char(256))  charset utf8mb4;\nERROR 1074 (42000): Column length too big for column 'a' (max = 255); use BLOB or TEXT instead\n</code></pre><!-- [[[read_end]]] --><p>CHARç±»å‹çš„åŸºæœ¬ç‰¹ç‚¹ï¼š</p><ol>\n<li>ä½¿ç”¨CHAR(N)çš„å½¢å¼å®šä¹‰ï¼Œå…¶ä¸­Næ˜¯è§„å®šäº†å­—æ®µä¸­å…è®¸å­˜å‚¨çš„æœ€å¤§å­—ç¬¦æ•°ï¼ŒNä¸è¶…è¿‡255ã€‚éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œçš„Næ˜¯å­—ç¬¦æ•°ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°ã€‚å¦‚æœä½¿ç”¨UTF8MB4å­—ç¬¦é›†ï¼ŒCHAR(N)æœ€å¤šå¯èƒ½å ç”¨N*4å­—èŠ‚ã€‚</li>\n<li>åœ¨InnoDBä¸­å­˜å‚¨CHAR(N)ç±»å‹çš„æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®å®é™…å ç”¨çš„ç©ºé—´ä¸åˆ°Nå­—èŠ‚ï¼Œåˆ™ä¼šä½¿ç”¨ç©ºæ ¼å¡«å……åˆ°Nã€‚è¿™é‡ŒInnoDBçš„å®ç°ä¸Šï¼Œæ˜¯å°†æ•°æ®å¡«å……åˆ°Nå­—èŠ‚ï¼Œè€Œä¸æ˜¯Nä¸ªå­—ç¬¦ã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®è™½ç„¶å­—ç¬¦æ•°ä¸åˆ°Nï¼Œä½†æ˜¯å ç”¨çš„ç©ºé—´å·²ç»è¶…è¿‡äº†Nå­—èŠ‚ï¼Œåˆ™InnoDBä¸ä¼šå†å¡«å……ç©ºæ ¼ã€‚</li>\n<li>æŸ¥è¯¢Charç±»å‹çš„å­—æ®µæ—¶ï¼ŒMySQL Serverä¼šè‡ªåŠ¨å»æ‰æœ«å°¾çš„ç©ºæ ¼ã€‚SQL_MODEä¸­çš„PAD_CHAR_TO_FULL_LENGTHå¯ä»¥æ”¹å˜è¿™ä¸ªé»˜è®¤è¡Œä¸ºï¼ˆ8.0.13ç‰ˆæœ¬å¼€å§‹ï¼ŒPAD_CHAR_TO_FULL_LENGTHè¢«æ ‡è®°deprecatedï¼Œä¸å†å»ºè®®ä½¿ç”¨ï¼‰ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æµ‹è¯•æ¡ˆä¾‹ã€‚</li>\n</ol><pre><code class=\"language-go\">mysql&gt; select concat('{', a, '}') as a1, char_length(a) from t_char;\n+------------------+----------------+\n| a1               | char_length(a) |\n+------------------+----------------+\n| {  ä¸­æ–‡ç¬¦å·}     |              6 |\n+------------------+----------------+\n\n### è®¾ç½®PAD_CHAR_TO_FULL_LENGTH\nmysql&gt; set sql_mode='PAD_CHAR_TO_FULL_LENGTH';\nQuery OK, 0 rows affected, 1 warning (0.00 sec)\n\n### è¿”å›æ•°æ®æ—¶ï¼Œä½¿ç”¨ç©ºæ ¼å¡«å……æ»¡Nä¸ªå­—ç¬¦\nmysql&gt; select concat('{', a, '}') as a1, char_length(a) from t_char;\n+----------------------+----------------+\n| a1                   | char_length(a) |\n+----------------------+----------------+\n| {  ä¸­æ–‡ç¬¦å·    }     |             10 |\n+----------------------+----------------+\n</code></pre><h3>VARCHAR(N)</h3><p>ç›¸æ¯”CHARç±»å‹ï¼ŒVARCHARç±»å‹å¯èƒ½å¹³æ—¶ä½¿ç”¨å¾—æ›´å¤šã€‚VARCHARå­—æ®µæœ€å¤šå¯å­˜å‚¨65535å­—èŠ‚ã€‚å®šä¹‰Varcharç±»å‹æ—¶ï¼Œå¦‚æœå­—æ®µå¯å­˜å‚¨çš„æœ€å¤§ç©ºé—´è¶…è¿‡äº†65535ï¼Œåˆ™åœ¨SQL Modeä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒSQLä¼šæŠ¥é”™ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒMySQLä¼šè‡ªåŠ¨å°†ç±»å‹è½¬æ¢ä¸ºTextã€‚</p><pre><code class=\"language-go\">mysql&gt; create table t_varchar1(a varchar(65536)) charset latin1;\nERROR 1074 (42000): Column length too big for column 'a' (max = 65535); use BLOB or TEXT instead\n\nmysql&gt; set sql_mode='';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; create table t_varchar1(a varchar(65536)) charset latin1;\nQuery OK, 0 rows affected, 1 warning (0.01 sec)\n\nmysql&gt; show warnings;\n+-------+------+--------------------------------------------+\n| Level | Code | Message                                    |\n+-------+------+--------------------------------------------+\n| Note  | 1246 | Converting column 'a' from VARCHAR to TEXT |\n+-------+------+--------------------------------------------+\n1 row in set (0.00 sec)\n\n### åˆ—ç±»å‹è‡ªåŠ¨è½¬æˆäº†mediumtext\nmysql&gt; desc t_varchar1;\n+-------+------------+------+-----+---------+-------+\n| Field | Type       | Null | Key | Default | Extra |\n+-------+------------+------+-----+---------+-------+\n| a     | mediumtext | YES  |     | NULL    |       |\n+-------+------------+------+-----+---------+-------+\n</code></pre><p>MySQL Serverå±‚é™åˆ¶äº†1è¡Œè®°å½•çš„æœ€å¤§é•¿åº¦ä¸º65535ã€‚1è¡Œè®°å½•ä¸­ï¼Œé™¤äº†æ•°æ®æœ¬èº«ï¼Œè¿˜æœ‰ä¸€äº›é¢å¤–çš„å¼€é”€ï¼Œæ¯”å¦‚éœ€è¦è®°å½•å˜é•¿æ•°æ®çš„å®é™…é•¿åº¦ï¼Œè¿˜éœ€è¦è®°å½•å­—æ®µæ˜¯å¦ä¸ºNULLç­‰ï¼Œæ‰€ä»¥VARCHARèƒ½å­˜å‚¨çš„æ•°æ®ï¼Œæ¯”65535è¦ç¨å¾®å°ä¸€äº›ã€‚</p><pre><code class=\"language-go\">### è¡¨åˆ›å»ºå¤±è´¥ï¼Œè¡Œé•¿è¶…è¿‡äº†65535\nmysql&gt; create table t_varchar2(a varchar(65533)) charset latin1;\nERROR 1118 (42000): Row size too large. The maximum row size for the used table type, not counting BLOBs, is 65535. This includes storage overhead, check the manual. You have to change some columns to TEXT or BLOBs\n\n### åŠ ä¸ŠNOT NULLçº¦æŸåï¼Œå¯ä»¥åˆ›å»ºæˆåŠŸ\nmysql&gt; create table t_varchar2(a varchar(65533) not null) charset latin1;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; desc t_varchar2;\n+-------+----------------+------+-----+---------+-------+\n| Field | Type           | Null | Key | Default | Extra |\n+-------+----------------+------+-----+---------+-------+\n| a     | varchar(65533) | NO   |     | NULL    |       |\n+-------+----------------+------+-----+---------+-------+\n1 row in set (0.02 sec)\n</code></pre><p>å’ŒCHARç±»å‹ä¸ä¸€æ ·ï¼ŒVARCHARç±»å‹ä¸ä¼šè‡ªåŠ¨æˆªæ–­æ’å…¥æ•°æ®ä¸­å°¾éƒ¨çš„ç©ºæ ¼ï¼Œä¹Ÿä¸ä¼šå¾€å­—æ®µå°¾éƒ¨é‡Œå¡«å……ç©ºæ ¼ã€‚</p><pre><code class=\"language-go\">mysql&gt; create table t_varchar(a varchar(10));\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; insert into t_varchar values ('abc   ');\nQuery OK, 1 row affected (0.00 sec)\n\nmysql&gt; select concat('{', a, '}') from t_varchar;\n+---------------------+\n| concat('{', a, '}') |\n+---------------------+\n| {abc   }            |\n+---------------------+\n1 row in set (0.00 sec)\n</code></pre><p>VARCHARå­—æ®µå ç”¨çš„ç©ºé—´ä¸»è¦ç”±å®é™…å­˜å‚¨çš„æ•°æ®å†³å®šã€‚å¦‚æœæˆ‘ä»¬å°†å­—æ®µå®šä¹‰ä¸ºVARCHAR(8000)ï¼Œä½†å†™å…¥çš„éƒ½æ˜¯æ¯”è¾ƒçŸ­çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¹¶ä¸ä¼šå ç”¨å¾ˆå¤šå­˜å‚¨ç©ºé—´ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬åœ¨å®šä¹‰VARCHARç±»å‹æ—¶ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æŠŠé•¿åº¦è®¾ç½®å¾—å¾ˆå¤§å‘¢ï¼Ÿåæ­£åªè¦ä¸çœŸçš„å­˜å¾ˆå¤§çš„æ•°æ®è¿›å»ï¼Œé•¿åº¦è®¾ç½®å¾—å¤§ä¸€ç‚¹å¹¶ä¸ä¼šå ç”¨é¢å¤–çš„ç©ºé—´ï¼Ÿ</p><p>ç­”æ¡ˆå½“ç„¶æ˜¯å¦å®šçš„ï¼Œå®šä¹‰VARCHARç±»å‹æ—¶ï¼Œåˆ‡è®°ä¸è¦è¶…è¿‡ä¸šåŠ¡çœŸæ­£éœ€è¦å­˜å‚¨çš„æ•°æ®çš„é•¿åº¦ã€‚æ¯”å¦‚èº«ä»½è¯å·ç é•¿åº¦æ˜¯18ä½ï¼Œé‚£ä¹ˆå°±å®šä¹‰ä¸ºVARCHAR(18)ã€‚å¦‚æœä¸šåŠ¡ä¸­é™åˆ¶äº†ç”¨æˆ·åæœ€å¤šä¸è¶…è¿‡16ä¸ªç¬¦å·ï¼Œé‚£ä¹ˆå°±å®šä¹‰ä¸ºVARCHAR(16)ã€‚</p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½æŠŠå­—æ®µé•¿åº¦è®¾ç½®å¾—å¾ˆå¤§å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼š</p><ol>\n<li>ä¸ºVARCHARå­—æ®µè®¾ç½®åˆç†çš„é•¿åº¦ï¼Œèƒ½é¿å…ä¸šåŠ¡å†™å…¥è¶…é•¿çš„æ•°æ®ã€‚è¿™å¯¹ä¸šåŠ¡å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§ä¿æŠ¤ã€‚</li>\n<li>MySQLå’Œå­˜å‚¨å¼•æ“å¯¹è¡Œé•¿åº¦éƒ½æœ‰é™åˆ¶ã€‚å¦‚æœè¡Œé•¿åº¦è¶…è¿‡65535ï¼Œå»ºè¡¨éƒ½å»ºä¸æˆåŠŸã€‚</li>\n<li>InnoDBå­˜å‚¨å¼•æ“å¯¹è¡Œé•¿åº¦ä¹Ÿæœ‰é™åˆ¶ã€‚å…·ä½“çš„é™åˆ¶å’Œé¡µé¢å¤§å°æœ‰å…³ã€‚å¯¹äºé»˜è®¤16Kçš„é¡µé¢å¤§å°ï¼Œè¡Œé•¿åº¦å¤§è‡´ä¸º8000å¤šä¸€äº›ï¼ˆé¡µé¢å¤§å°çš„ä¸€åŠï¼‰ã€‚åŒæ—¶ï¼ŒInnoDBè¿˜é™åˆ¶äº†æœ€å¤§è¡Œé•¿åº¦ä¸èƒ½è¶…è¿‡16Kã€‚è¿™é‡Œçš„è¡Œé•¿åº¦æ˜¯æŒ‡å°†è¡Œå¤–å­˜å‚¨çš„æ•°æ®æ’é™¤åï¼Œå…¶ä½™æ•°æ®å ç”¨çš„ç©ºé—´ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­å°±æ˜¯è¶…è¿‡äº†InnoDBå¯¹è¡Œé•¿åº¦çš„é™åˆ¶ã€‚æœ‰å…´è¶£çš„è¯ï¼Œä½ å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œå°†åˆ—C11é•¿åº¦æ”¹æˆå¤šå°‘åï¼Œè¡¨èƒ½å»ºæˆåŠŸï¼Ÿ</li>\n</ol><pre><code class=\"language-go\">### ä»æŠ¥é”™ä¿¡æ¯å¾—çŸ¥ï¼ŒInnoDBé»˜è®¤ä¸€è¡Œè®°å½•æœ€å¤§é•¿åº¦ä¸º8126\nmysql&gt; create table t_inno1(\n        c01 varchar(768),\n        c02 varchar(768),\n        c03 varchar(768),\n        c04 varchar(768),\n        c05 varchar(768),\n        c06 varchar(768),\n        c07 varchar(768),\n        c08 varchar(768),\n        c09 varchar(768),\n        c10 varchar(768),\n        c11 varchar(398)\n     ) engine=innodb row_format=compact charset latin1;\n\nERROR 1118 (42000): Row size too large (&gt; 8126). Changing some columns to TEXT or BLOB or using ROW_FORMAT=DYNAMIC or ROW_FORMAT=COMPRESSED may help. In current row format, BLOB prefix of 768 bytes is stored inline.\n</code></pre><ol start=\"4\">\n<li>\n<p>InnoDBäºŒçº§ç´¢å¼•é•¿åº¦æœ‰é™åˆ¶ã€‚å…·ä½“çš„é™åˆ¶è·ŸROW_FORMATå’Œé¡µé¢å¤§å°æœ‰å…³ã€‚</p>\n</li>\n<li>\n<p>å¦‚æœä½¿ç”¨äº†InnoDBï¼Œåœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œå³ä½¿å®é™…å­˜å‚¨çš„æ•°æ®ä¸€æ ·ï¼ŒVARCHARé•¿åº¦å®šä¹‰ä¸ä¸€æ ·æ—¶ï¼Œè¡Œå®é™…å ç”¨çš„ç©ºé—´ä¹Ÿå¯èƒ½ä¼šä¸ä¸€æ ·ã€‚</p>\n</li>\n</ol><p>è¿™è·ŸInnoDBæ•°æ®çš„ç‰©ç†å­˜å‚¨æ ¼å¼æœ‰å…³ã€‚å¯¹äºæ¯ä¸ªå˜é•¿ç±»å‹çš„åˆ—ï¼ŒInnoDBéœ€è¦åœ¨è¡Œé¦–åˆ†é…1-2å­—èŠ‚ï¼Œç”¨æ¥è®°å½•åˆ—é‡Œé¢å®é™…ä¸Šå­˜å‚¨äº†å¤šå°‘å­—èŠ‚çš„æ•°æ®ã€‚å¦‚æœå­—æ®µæœ€å¤§å¯èƒ½å­˜å‚¨çš„æ•°æ®ä¸è¶…è¿‡255å­—èŠ‚ï¼Œé‚£ä¹ˆåªéœ€è¦ä½¿ç”¨1ä¸ªå­—èŠ‚å°±èƒ½è¡¨ç¤ºè¿™ä¸ªé•¿åº¦ï¼ˆ1ä¸ªå­—èŠ‚8æ¯”ç‰¹ï¼Œæœ€å¤§å€¼ä¸º255ï¼‰ã€‚</p><p>å¦‚æœå­—æ®µæœ€å¤§å¯å­˜å‚¨çš„æ•°æ®è¶…è¿‡äº†255å­—èŠ‚ï¼Œé‚£ä¹ˆå½“å®é™…å­˜å‚¨çš„æ•°æ®ä¸è¶…è¿‡127å­—èŠ‚æ—¶ï¼Œä½¿ç”¨1ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨è¾¾æ•°æ®çš„é•¿åº¦ï¼Œå¦åˆ™å°±éœ€è¦ä½¿ç”¨2ä¸ªå­—èŠ‚æ¥è¡¨è¾¾æ•°æ®çš„é•¿åº¦ã€‚</p><p>ä¸ºä»€ä¹ˆæ˜¯127å‘¢ï¼Ÿå› ä¸ºå¦‚æœVARCHARå¯å­˜å‚¨çš„æ•°æ®è¶…è¿‡äº†255å­—èŠ‚åï¼Œç”¨æ¥å­˜å‚¨è®°å½•é•¿åº¦çš„å­—èŠ‚ï¼Œæœ€é«˜ä½æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œåªå‰©ä¸‹7æ¯”ç‰¹ç”¨æ¥è¡¨è¾¾é•¿åº¦ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/52/71/526a9013d725dbe1082529d476e71b71.jpg?wh=692x176\" alt=\"å›¾ç‰‡\"></p><p>è§£é‡Šä¸‹è¿™å¼ å›¾ï¼šInnoDBè¡Œé¦–ç”¨æ¥è®°å½•å˜é•¿å­—æ®µå®é™…é•¿åº¦çš„æ ¼å¼ã€‚å­—èŠ‚æœ€é«˜ä½ä¸º0æ—¶ï¼Œä½¿ç”¨1å­—èŠ‚è¡¨è¾¾é•¿åº¦ã€‚æœ€é«˜ä½ä¸º1æ—¶ï¼Œä½¿ç”¨2å­—èŠ‚è¡¨è¾¾é•¿åº¦ï¼Œæ­¤æ—¶æœ€é«˜ä½æ—è¾¹çš„æ¯”ç‰¹ï¼ˆå›¾ä¸­æ ‡è®°ä¸ºeï¼‰ä¹Ÿæœ‰ç‰¹æ®Šå«ä¹‰ï¼Œè¡¨ç¤ºå­—æ®µæ˜¯å¦æœ‰è¡Œå¤–å­˜å‚¨ï¼Œå‰©ä¸‹çš„14æ¯”ç‰¹ç”¨æ¥è¡¨è¾¾é•¿åº¦ã€‚</p><p>å®é™…ä¸Šå¯¹äºæ¯ä¸ªCHARç±»å‹çš„åˆ—ï¼ŒInnoDBä¹Ÿä¼šåœ¨è¡Œé¦–åˆ†é…1-2ä¸ªå­—èŠ‚ï¼Œç”¨æ¥è®°å½•CHARåˆ—ä¸­å®é™…å­˜å‚¨äº†å¤šå°‘å­—èŠ‚ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºç”±äºå˜é•¿å­—ç¬¦é›†çš„å­˜åœ¨ï¼ŒCHARç±»å‹å ç”¨çš„ç©ºé—´ä¹Ÿä¸ä¸€å®šæ˜¯å›ºå®šçš„ã€‚</p><ol start=\"6\">\n<li>MySQL Serverå±‚å¯èƒ½ä¼šä½¿ç”¨ä¸åŒæ•°æ®æ ¼å¼ã€‚æ¯”å¦‚åœ¨æ’åºæ—¶ï¼Œæ’åºå­—æ®µçš„å­˜å‚¨æ ¼å¼ï¼Œæˆ–è€…å°†æ’åºæ•°æ®å†™åˆ°ä¸´æ—¶æ–‡ä»¶æ—¶çš„æ ¼å¼ï¼Œå¯èƒ½ä¼šæ ¹æ®å­—æ®µå®šä¹‰çš„é•¿åº¦æ¥åˆ†é…ç©ºé—´ã€‚</li>\n</ol><p>å¦‚æœæ‰§è¡Œè®¡åˆ’éœ€è¦ç”¨åˆ°Sort Bufferã€Join Bufferã€Read RND Bufferï¼Œåœ¨è®¡ç®—è¿™äº›Bufferä¸­èƒ½ç¼“å­˜å¤šå°‘è¡Œè®°å½•æ—¶ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯åŸºäºå­—æ®µçš„å®šä¹‰é•¿åº¦æ¥è¿›è¡Œè®¡ç®—ã€‚</p><p>ä¸Šé¢åˆ—ä¸¾äº†è¿™ä¹ˆå¤šåŸå› ï¼Œå…¶å®å¹³æ—¶ä½¿ç”¨æ—¶ï¼Œæœ€é‡è¦çš„æ˜¯è®°ä½ä¸€ç‚¹ï¼š<strong>ä¸è¦è¶…è¿‡ä¸šåŠ¡çš„å®é™…éœ€è¦ï¼Œé¢å¤–å¢åŠ VARCHARå­—æ®µçš„é•¿åº¦ã€‚</strong></p><h2>äºŒè¿›åˆ¶ä¸²</h2><h3>BINARY (N)</h3><p>MySQLä½¿ç”¨BINARYå’ŒVARBINARYç±»å‹æ¥å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ã€‚BINARY(N)æ˜¯å®šé•¿ç±»å‹ï¼Œè¿™é‡ŒNæ˜¯å­—èŠ‚æ•°ï¼Œæœ€å¤§ä¸èƒ½è¶…è¿‡255ã€‚å¾€BINARYå­—æ®µä¸­å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®ä¸åˆ°Nå­—èŠ‚ï¼Œä¼šåœ¨å°¾éƒ¨å¡«å……0ã€‚</p><pre><code class=\"language-go\">mysql&gt; create table t_binary(a binary(20)) engine=innodb;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; insert into t_binary values('ä¸­æ–‡ç¬¦å·');\nQuery OK, 1 row affected (0.00 sec)\n\nmysql&gt; select a, hex(a) from t_binary;\n+----------------------+------------------------------------------+\n| a                    | hex(a)                                   |\n+----------------------+------------------------------------------+\n| ä¸­æ–‡ç¬¦å·             | E4B8ADE69687E7ACA6E58FB70000000000000000 |\n+----------------------+------------------------------------------+\n1 row in set (0.00 sec)\n</code></pre><p>å› ä¸ºå­—ç¬¦ç¼–ç åå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸²äºŒè¿›åˆ¶çš„æ•°æ®ï¼Œæ‰€ä»¥ä½¿ç”¨BINARYä¹Ÿå¯ä»¥å­˜å‚¨æ–‡æœ¬ä¿¡æ¯ã€‚å½“ç„¶æˆ‘å¹¶ä¸å»ºè®®ä½ è¿™ä¹ˆåšã€‚å…·ä½“åŸå› æˆ‘ä»¬åé¢å†è®¨è®ºã€‚</p><h3>VARBINARY(N)</h3><p>VARBINARYå­˜å‚¨å˜é•¿çš„äºŒè¿›åˆ¶ä¸²ã€‚VARBINARYå’ŒVARCHARåœ¨å¾ˆå¤šæ–¹é¢éƒ½æ¯”è¾ƒç±»ä¼¼ï¼Œæ¯”å¦‚æœ€é•¿ä¸è¶…è¿‡65535å­—èŠ‚ï¼Œç‰©ç†å­˜å‚¨æ ¼å¼ä¹Ÿç±»ä¼¼ã€‚å®é™…ä¸Šè¿™ä¸€è®²ä¸­VARCHARéƒ¨åˆ†çš„å†…å®¹å¯¹VARBINARYä¹ŸåŸºæœ¬æˆç«‹ã€‚åªä¸è¿‡VARCHAR(N)ä¸­çš„Næ˜¯å­—ç¬¦æ•°ï¼Œè€ŒVARBINARY(N)ä¸­çš„Næ˜¯å­—èŠ‚æ•°ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç”¨VARBINARYç±»å‹æ¥å­˜å‚¨æ–‡æœ¬ä¿¡æ¯å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬é€šè¿‡ä¸€äº›ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚</p><p>å…ˆåˆ›å»ºä¸€ä¸ªè¡¨ï¼Œä¸€ä¸ªå­—æ®µä½¿ç”¨VARCHARç±»å‹ï¼Œå¦ä¸€ä¸ªå­—æ®µä½¿ç”¨VARBINARYç±»å‹ï¼Œåˆçœ‹å¥½åƒéƒ½è¡Œã€‚</p><pre><code class=\"language-go\">mysql&gt; create table t_varchar_or_varbin(vc varchar(30), vb varbinary(30)) engine=innodb;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; insert into t_varchar_or_varbin values('ä¸­æ–‡ç¬¦å·', 'ä¸­æ–‡ç¬¦å·');\nQuery OK, 1 row affected (0.00 sec)\n\nmysql&gt; select * from t_varchar_or_varbin;\n+--------------+--------------+\n| vc           | vb           |\n+--------------+--------------+\n| ä¸­æ–‡ç¬¦å·     | ä¸­æ–‡ç¬¦å·     |\n+--------------+--------------+\n</code></pre><p>ä½†æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨å¦å¤–ä¸€ä¸ªGBKçš„ç»ˆç«¯æ—¶ï¼Œå°±å‡ºç°é—®é¢˜äº†ï¼ŒVARBINARYå­—æ®µè¿”å›äº†ä¹±ç ã€‚</p><pre><code class=\"language-go\">mysql&gt; select * from t_varchar_or_varbin;\n+----------+--------------+\n| vc       | vb           |\n+----------+--------------+\n| ä¸­æ–‡ç¬¦å· | æ¶“î…Ÿæƒç»—ï¹€å½¿ |\n+----------+--------------+\n1 row in set (0.00 sec)\n</code></pre><p>ä½¿ç”¨VARCHARç±»å‹æ—¶ï¼Œæ•°æ®åº“å¸®æˆ‘ä»¬è‡ªåŠ¨è¿›è¡Œäº†å­—ç¬¦é›†çš„è½¬æ¢ï¼Œè€Œä½¿ç”¨VARBINARYç±»å‹æ—¶ï¼Œæ•°æ®åº“ä¸ä¼šåšå­—ç¬¦é›†çš„è½¬æ¢ã€‚å¯¹äºVARBINARYç±»å‹ï¼Œå…¶å®ä¹Ÿä¸å­˜åœ¨å­—ç¬¦é›†è¿™ä¸ªæ¦‚å¿µã€‚</p><p>VARCHARå’ŒVARBINARYçš„å¦å¤–ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯ï¼ŒVARCHARåªå…è®¸å­˜å‚¨æ»¡è¶³å­—ç¬¦é›†ç¼–ç è§„åˆ™çš„æ•°æ®ï¼Œè€ŒVARBINARYå¯ä»¥å­˜å‚¨ä»»ä½•äºŒè¿›åˆ¶æ•°æ®ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­å°±è¯´æ˜äº†è¿™ä¸€ç‚¹ã€‚</p><pre><code class=\"language-go\">mysql&gt; delete from t_varchar_or_varbin;\nQuery OK, 1 rows affected (0.00 sec)\n\n### æ•°æ®æ— æ³•å†™å…¥VARCHARï¼Œä¸ç¬¦åˆç¼–ç è§„åˆ™\nmysql&gt; insert into t_varchar_or_varbin(vc) values ( unhex('ABAB') );\nERROR 1366 (HY000): Incorrect string value: '\\xAB\\xAB' for column 'vc' at row 1\n\n### æ•°æ®å¯ä»¥å†™å…¥VARBINARYåˆ—\nmysql&gt; insert into t_varchar_or_varbin(vb) values ( unhex('ABAB') );\nQuery OK, 1 row affected (0.00 sec)\n\n\nmysql&gt; select hex(vc), hex(vb) from t_varchar_or_varbin;\n+--------------------------+--------------------------+\n| hex(vc)                  | hex(vb)                  |\n+--------------------------+--------------------------+\n| NULL                     | ABAB                     |\n+--------------------------+--------------------------+\n</code></pre><p>æ‰€ä»¥ï¼Œå¦‚æœä¸šåŠ¡ä¸Šéœ€è¦å­˜å‚¨çš„æ˜¯æ–‡æœ¬ä¿¡æ¯ï¼Œå°±ä¸è¦ä½¿ç”¨äºŒè¿›åˆ¶ç±»å‹ã€‚åªæœ‰å½“éœ€è¦å­˜å‚¨äºŒè¿›åˆ¶ä¿¡æ¯æ—¶ï¼Œæ‰ä½¿ç”¨BINARYæˆ–VARBINARYç±»å‹ã€‚</p><p>ä½¿ç”¨VARCHARå’ŒVARBINARYç±»å‹æ—¶ï¼Œä¸èƒ½å­˜å‚¨è¶…è¿‡64Kçš„æ•°æ®ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦å­˜å‚¨æ›´å¤§çš„æ•°æ®ï¼Œåˆ™å¯ä»¥é€‰æ‹©ä½¿ç”¨Textæˆ–Blobç±»å‹ã€‚Textç±»å‹ç”¨äºå­˜å‚¨æ–‡æœ¬ä¿¡æ¯ï¼ŒBlobç±»å‹ç”¨äºå­˜å‚¨äºŒè¿›åˆ¶ä¿¡æ¯ï¼ˆä¸€å¼ å›¾ç‰‡æˆ–ä¸€ä¸ªè§†é¢‘æ–‡ä»¶éƒ½æ˜¯å…¸å‹çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰ã€‚tinytextå’Œtinyblobæœ€å¤šå­˜å‚¨256å­—èŠ‚ï¼ŒTextå’ŒBlobæœ€å¤šå­˜å‚¨64Kå­—èŠ‚ï¼Œmediumtext å’Œ mediumblob æœ€å¤šå­˜å‚¨16Må­—èŠ‚ï¼Œlongtext å’Œ longblob æœ€å¤šå­˜å‚¨4Gå­—èŠ‚ã€‚</p><p>å½“ç„¶åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬ä¸å¤ªå»ºè®®åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å¤§å¯¹è±¡ï¼Œæ¯”å¦‚å¤§é‡çš„å›¾ç‰‡ã€è§†é¢‘æ–‡ä»¶ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå»ºè®®å°†è¿™äº›æ–‡ä»¶å­˜å‚¨åˆ°å•ç‹¬çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ¯”å¦‚å¯¹è±¡å­˜å‚¨æˆ–åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚æ•°æ®åº“ä¸­æœ€å¤šåªå­˜ä¸€ä¸ªé“¾æ¥ï¼Œè®°å½•æ–‡ä»¶çš„è®¿é—®åœ°å€ã€‚</p><p>ä»ç†è®ºä¸Šæ¥è¯´ï¼Œæ‰€æœ‰æ•°æ®éƒ½å¯ä»¥å­˜åˆ°ä¸²ç±»å‹çš„å­—æ®µä¸­ï¼Œæ¯”å¦‚æ—¥æœŸæ—¶é—´ï¼ˆ2024-12-23 12:34:56ï¼‰ã€æ•°å­—ï¼ˆ123456ï¼‰éƒ½èƒ½ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜åˆ°VARCHARç±»å‹çš„åˆ—ä¸­ã€‚ä½†æ˜¯æˆ‘å»ºè®®ä½ åƒä¸‡ä¸è¦è¿™ä¹ˆåšï¼Œå› ä¸ºè¿™ä¹ˆåšæœ‰å¾ˆå¤šç¼ºç‚¹ã€‚</p><ul>\n<li>æ•°æ®å­˜å‚¨åˆ°VARCHARåˆ—åï¼Œæ— æ³•ç›´æ¥è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œéœ€è¦å…ˆè¿›è¡Œç±»å‹è½¬æ¢æ‰è¡Œã€‚</li>\n<li>å¦‚æœæˆ‘ä»¬ç»™ VARCHAR åˆ—å»ºç«‹äº†è¿‡æ»¤æ€§å¾ˆå¥½çš„ç´¢å¼•ï¼Œä½†æ˜¯ä¸šåŠ¡æŸ¥è¯¢æ•°æ®æ—¶ï¼Œä¼ å…¥äº†æ•°å­—ç±»å‹çš„å‚æ•°ï¼Œé‚£ä¹ˆå°†æ— æ³•ä½¿ç”¨è¿™ä¸ªç´¢å¼•ï¼Œä»è€Œå¯¼è‡´æŸ¥è¯¢çš„æ€§èƒ½å¾ˆå·®ã€‚è¿™ä¸ªé—®é¢˜åœ¨çœŸå®ç¯å¢ƒä¸­ä¹Ÿæ¯”è¾ƒå¸¸è§ã€‚</li>\n<li>ä½¿ç”¨VARCHARç±»å‹åï¼Œæ— æ³•é™åˆ¶ç”¨æˆ·å†™å…¥éæ³•çš„æ•°æ®ã€‚</li>\n</ul><p>è¿™é‡Œåšä¸€ä¸ªå°å°çš„è°ƒç ”ï¼šä½ å‚ä¸è¿‡çš„å„ä¸ªç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ä»€ä¹ˆæ•°æ®ç±»å‹æ¥å­˜å‚¨ç”µè¯å·ç ï¼Ÿ</p><h2>æ•°å€¼ç±»å‹</h2><h3>æ•´æ•°ç±»å‹</h3><p>æ•´æ•°ä¹Ÿå¾ˆå¸¸ç”¨çš„ä¸€ç§ç±»å‹ã€‚MySQLä¸­å¯ä»¥ä½¿ç”¨tinyintã€smallintã€intã€bigintæ¥å­˜å‚¨æ•´æ•°ï¼Œè¿™å‡ ç§æ•´æ•°ç±»å‹çš„åŒºåˆ«æ˜¯å¯ä»¥å­˜å‚¨çš„æ•°å­—çš„èŒƒå›´ä¸ä¸€æ ·ï¼ŒåŒæ—¶å ç”¨çš„ç©ºé—´ä¹Ÿä¸ä¸€æ ·ã€‚å¦‚æœä¸šåŠ¡ä¸Šæ˜ç¡®åªå­˜å‚¨æ­£æ•°ï¼Œè¿˜å¯ä»¥åœ¨ç±»å‹ååŠ ä¸Šunsignedå…³é”®å­—ã€‚</p><p>ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†å„ä¸ªæ•´æ•°ç±»å‹å¯å­˜å‚¨çš„æ•°å­—èŒƒå›´ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/dd/a3bba1b235b715097yy32f03fe6580dd.jpg?wh=2038x1456\" alt=\"\"></p><p>intç±»å‹æœ€å¤šå¯ä»¥å­˜å‚¨20å¤šäº¿ï¼Œå¦‚æœä½¿ç”¨int unsignedï¼Œèƒ½å­˜å‚¨çš„æœ€å¤§å€¼æ˜¯40å¤šäº¿ã€‚å½“ç„¶å¦‚æœä½ çš„ä¸šåŠ¡æ•°æ®é‡éå¸¸å¤§ï¼Œintå¯èƒ½è¿˜ä¸å¤Ÿç”¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨bigintã€‚</p><p>å…·ä½“ä½¿ç”¨å“ªä¸ªæ•´æ•°ç±»å‹ï¼Œä¸»è¦å–å†³äºä¸šåŠ¡å­˜å‚¨éœ€æ±‚ã€‚</p><p>å¦‚æœç”¨æ¥å­˜å‚¨ä¸€ä¸ªçŠ¶æ€å€¼ï¼Œè€Œä¸”ä¸šåŠ¡ä¸­çŠ¶æ€å€¼æœ€å¤šå¯èƒ½ä¹Ÿå°±å‡ åç§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨tinyintï¼Œå› ä¸ºè¿™æ ·å ç”¨çš„ç©ºé—´å°‘ã€‚</p><p>å¦‚æœè¦å­˜å‚¨è®¢å•çš„IDï¼Œå¹¶ä¸”ä¸šåŠ¡è¯„ä¼°å°†æ¥æ¯ç§’çš„è®¢å•é‡æœ‰1ä¸‡ï¼Œé‚£ä¹ˆ1å¤©å°±éœ€è¦åˆ†é…è¶…è¿‡8äº¿çš„è®¢å•å·ï¼Œä½¿ç”¨intç±»å‹å¯èƒ½å‡ å¤©å°±æº¢å‡ºäº†ï¼Œè¿™æ—¶å°±è¦ä½¿ç”¨bigintç±»å‹ã€‚ä½¿ç”¨bigintç±»å‹åï¼Œå¯ä»¥ç”¨å‡ åƒä¸‡å¹´ä¹Ÿä¸ä¼šæº¢å‡ºã€‚</p><h3>å°æ•°ç±»å‹</h3><p>å¦‚æœä¸šåŠ¡ä¸­éœ€è¦å­˜å‚¨å°æ•°ï¼Œå¯ä»¥ä½¿ç”¨floatã€doubleæˆ–decimalå’ŒNUMERICç±»å‹ã€‚</p><p>floatã€doubleæ˜¯éç²¾ç¡®ç±»å‹ï¼Œåœ¨è¿›è¡Œè¿ç®—æ—¶å¯èƒ½ä¼šæœ‰ä¸€äº›è¯¯å·®ã€‚é‚£ä¹ˆåœ¨å­˜å‚¨ç±»ä¼¼é‡‘é¢ç±»çš„æ•°æ®æ—¶ï¼Œå°±ä¸å¤ªåˆé€‚ã€‚</p><pre><code class=\"language-go\">mysql&gt; create table testd(a float, b double);\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql&gt; insert into testd values(1.1, 1.1);\nQuery OK, 1 row affected (0.00 sec)\n\nmysql&gt; select * from testd;\n+------+------+\n| a    | b    |\n+------+------+\n|  1.1 |  1.1 |\n+------+------+\n1 row in set (0.00 sec)\n\n### float doubleå¯èƒ½ä¼šæœ‰è¯¯å·®\nmysql&gt; select a + a, b * 1.1 from testd;\n+-------------------+--------------------+\n| a + a             | b * 1.1            |\n+-------------------+--------------------+\n| 2.200000047683716 | 1.2100000000000002 |\n+-------------------+--------------------+\n</code></pre><p>å¦‚æœè¦å­˜å‚¨ç²¾ç¡®çš„å°æ•°ä¿¡æ¯ï¼Œä¸å…è®¸æœ‰è¯¯å·®ï¼Œå¯ä»¥ä½¿ç”¨decimalæˆ–NUMERICç±»å‹ã€‚MySQLä¸­NUMERICå’Œdecimalç±»å‹å®ç°æ–¹å¼ä¸€æ ·ã€‚</p><p>ä½¿ç”¨ decimal(M, N) å½¢å¼å®šä¹‰ï¼Œå…¶ä¸­Mæ˜¯æœ‰æ•ˆæ•°å­—çš„ä½æ•°ï¼ŒNæ˜¯ä¿ç•™çš„å°æ•°ä½æ•°ã€‚</p><p>æ¯”å¦‚å¯¹äºä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œå¯ä»¥å­˜å‚¨-999999.99åˆ°999999.99ä¹‹é—´çš„æ•°å­—ã€‚</p><pre><code class=\"language-go\">mysql&gt; create table t_decimal(a decimal(8, 2)) engine=innodb;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; insert into t_decimal values(999999.99)\n    -&gt; ;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql&gt; insert into t_decimal values(1234567)\n    -&gt; ;\nERROR 1264 (22003): Out of range value for column 'a' at row 1\n</code></pre><h2>æ—¥æœŸæ—¶é—´ç±»å‹</h2><p>MySQLä¸­ä½¿ç”¨DATEã€DATETIMEã€TIMESTAMPã€TIMEã€YEARè¿™å‡ ç§ç±»å‹æ¥å­˜å‚¨æ—¶é—´æ—¥æœŸä¿¡æ¯ã€‚</p><h3>DATE</h3><p>DATEç”¨æ¥å­˜å‚¨æ—¥æœŸã€‚å¦‚æœä½ åªéœ€è¦è®°å½•æ—¥æœŸä¿¡æ¯ï¼Œä¸ç”¨è®°å½•æ—¶é—´ä¿¡æ¯ï¼Œå¦‚å­˜å‚¨äººå‘˜çš„å‡ºç”Ÿæ—¥æœŸï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨DATEç±»å‹ã€‚</p><h3>DATETIME</h3><p>å¦‚æœä½ éœ€è¦åŒæ—¶å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ï¼Œæ¯”å¦‚å­˜å‚¨è®¢å•çš„åˆ›å»ºæ—¶é—´ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨DATETIMEç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨DATETIMEå­˜å‚¨æœ€å¤šç²¾ç¡®åˆ°å¾®ç§’çš„ä¿¡æ¯ã€‚MySQLä¸­DATETIMEç±»å‹æ²¡æœ‰æ—¶åŒºçš„æ¦‚å¿µï¼Œå¦‚æœä½ éœ€è¦å¤„ç†å¤šä¸ªæ—¶åŒºçš„æ—¶é—´ä¿¡æ¯ï¼Œå¯ä»¥è€ƒè™‘åœ¨æ•°æ®åº“ä¸­ç»Ÿä¸€å­˜å‚¨UTCæ—¶åŒºçš„æ—¶é—´ï¼Œå¹¶åœ¨è¯»å–å’Œå†™å…¥æ•°æ®æ—¶åšç›¸åº”çš„æ—¶åŒºè½¬æ¢ã€‚</p><h3>TIMESTAMP</h3><p>TIMESTAMPç±»å‹ä¹Ÿå¯ä»¥åŒæ—¶å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ï¼Œä¹Ÿå¯ä»¥ç²¾ç¡®åˆ°å¾®ç§’ã€‚å’ŒDATETIMEç±»å‹ç›¸æ¯”ï¼ŒTIMESTAMPç±»å‹èƒ½è®°å½•çš„æ—¶é—´èŒƒå›´æ›´çŸ­ï¼ŒTIMESTAMPå¯ä»¥è®°å½•ä»UTC 1970-01-01 00:00:00åˆ°UTC 2038-01-19 03:14:07ä¹‹é—´çš„æ—¶é—´ã€‚TIMESTAMPç±»å‹åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œå®é™…ä¸Šä½¿ç”¨äº†4å­—èŠ‚çš„æ•´æ•°æ¥å­˜å‚¨è·UTC 1970-01-01 00:00:00ç»è¿‡çš„ç§’æ•°ã€‚</p><p>å’ŒDATETIMEç±»å‹ä¸ä¸€æ ·ï¼Œæ—¶åŒºçš„è®¾ç½®ä¼šå½±å“TIMESTAMPåˆ—ä¸­æ•°æ®çš„è¯»å†™ã€‚</p><pre><code class=\"language-go\">### \nmysql&gt; create table t_timeinfo(a timestamp, b datetime);\nQuery OK, 0 rows affected (0.02 sec)\n\n### å°†æ—¶åŒºè®¾ç½®ä¸ºUTC\nmysql&gt; set time_zone='+00:00';\nQuery OK, 0 rows affected (0.00 sec)\n\n### æ’å…¥ UTC '2024-06-07 14:06:45'\nmysql&gt; insert into t_timeinfo values('2024-06-07 14:06:45', '2024-06-07 14:06:45');\nQuery OK, 1 row affected (0.00 sec)\n\nmysql&gt; select * from t_timeinfo;\n+---------------------+---------------------+\n| a                   | b                   |\n+---------------------+---------------------+\n| 2024-06-07 14:06:45 | 2024-06-07 14:06:45 |\n+---------------------+---------------------+\n1 row in set (0.00 sec)\n\n### å°†æ—¶åŒºè®¾ç½®ä¸ºä¸œ8åŒº\nmysql&gt; set time_zone='+08:00';\nQuery OK, 0 rows affected (0.00 sec)\n\n### Timestampåˆ—çš„è¿”å›æ•°æ®è½¬æ¢æˆå¯¹åº”çš„æ—¶åŒº\nmysql&gt; select * from t_timeinfo;\n+---------------------+---------------------+\n| a                   | b                   |\n+---------------------+---------------------+\n| 2024-06-07 22:06:45 | 2024-06-07 14:06:45 |\n+---------------------+---------------------+\n1 row in set (0.00 sec)\n</code></pre><h3>TIME</h3><p>TIME å¯èƒ½æ˜¯æ¯”è¾ƒå°‘ç”¨çš„ä¸€ç§æ—¶é—´ç±»å‹ï¼Œåªå­˜å‚¨äº†æ—¶é—´ä¿¡æ¯ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨-838:59:59åˆ°838:59:59ä¹‹é—´çš„æ—¶é—´ã€‚</p><h3>YEAR</h3><p>YEAR ç±»å‹ä½¿ç”¨1ä¸ªå­—èŠ‚æ¥å­˜å‚¨å¹´çš„ä¿¡æ¯ï¼Œæ”¯æŒçš„èŒƒå›´ä¸º1901å¹´åˆ°2155å¹´ã€‚YEAR ç±»å‹æœ€å¤§çš„ä¼˜ç‚¹å¯èƒ½å°±æ˜¯èƒ½èŠ‚çœä¸€ç‚¹ç‚¹ç©ºé—´ã€‚</p><p>æœ€åæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯¹MySQLçš„æ—¶é—´æ—¥æœŸç±»å‹åšä¸€ä¸ªå°ç»“ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8b/ab/8bf78630217c6ea6de5e637815a3a6ab.png?wh=1920x1389\" alt=\"å›¾ç‰‡\"></p><p>å¦‚æœä½¿ç”¨äº†æ—¶é—´æ—¥æœŸç±»å‹ï¼Œç¨‹åºä¸­ç»å¸¸ä¼šä½¿ç”¨ä¸€äº›æ—¶é—´æ—¥æœŸå‡½æ•°æ¥å¤„ç†æ•°æ®ã€‚ä¸‹é¢æˆ‘ä»¬å¯¹å¹³æ—¶æœ€å¸¸ç”¨çš„å‡ ä¸ªæ—¥æœŸå’Œæ—¶é—´å‡½æ•°åšä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚</p><p>ä½¿ç”¨å‡½æ•°now()æˆ–current_timestamp()æ¥è·å–ç³»ç»Ÿå½“å‰çš„æ—¶é—´ã€‚è¿™2ä¸ªå‡½æ•°çš„è¿”å›å€¼å—å‚æ•°TIME_ZONEå½±å“ï¼ŒMySQLæŒ‰TIME_ZONEçš„è®¾ç½®è¿”å›å¯¹åº”æ—¶åŒºçš„å½“å‰æ—¶é—´ã€‚</p><pre><code class=\"language-go\">mysql&gt; select now(), sleep(3), current_timestamp();\n+---------------------+----------+---------------------+\n| now()               | sleep(3) | current_timestamp() |\n+---------------------+----------+---------------------+\n| 2024-06-07 06:40:52 |        0 | 2024-06-07 06:40:52 |\n+---------------------+----------+---------------------+\n1 row in set (3.00 sec)\n</code></pre><p>å‚æ•°timestampçš„è®¾ç½®ä¼šå½±å“now()å’Œcurrent_timestamp()çš„è¿”å›ã€‚Binlogæ¨¡å¼ä¸ºSTATEMENTæ—¶ï¼Œå¤‡åº“ä¸Šå°±æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥ä¿è¯ä¸»å¤‡åº“æ—¶é—´å‡½æ•°è¿”å›ä¸€æ ·çš„æ•°æ®ã€‚</p><pre><code class=\"language-go\">mysql&gt; set timestamp=1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; select now(), current_timestamp();\n+---------------------+---------------------+\n| now()               | current_timestamp() |\n+---------------------+---------------------+\n| 1970-01-01 00:00:01 | 1970-01-01 00:00:01 |\n+---------------------+---------------------+\n1 row in set (0.00 sec)\n\n### timestampè®¾ç½®ä¸º0åï¼Œå‡½æ•°è¿”å›ç³»ç»Ÿå½“å‰æ—¶é—´\nmysql&gt; set timestamp=0;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; select now(), current_timestamp();\n+---------------------+---------------------+\n| now()               | current_timestamp() |\n+---------------------+---------------------+\n| 2024-06-07 06:47:09 | 2024-06-07 06:47:09 |\n+---------------------+---------------------+\n</code></pre><p>å‡½æ•°sysdate()ä¹Ÿèƒ½è·å–ç³»ç»Ÿå½“å‰æ—¶é—´ã€‚sysdateå’Œcurrent_timeå‡½æ•°çš„æœ€å¤§åŒºåˆ«æ˜¯sysdateæ€»æ˜¯è¿”å›å‡½æ•°æ‰§è¡Œé‚£ä¸€åˆ»çš„æ—¶é—´ï¼Œè€Œcurrent_timeå‡½æ•°è¿”å›çš„æ˜¯è¯­å¥å¼€å§‹æ‰§è¡Œçš„æ—¶é—´ï¼Œè€Œä¸”å¯ä»¥é€šè¿‡å˜é‡timestampæ§åˆ¶ã€‚åœ¨ä½¿ç”¨STATEMENTæ ¼å¼çš„Binlogæ—¶ï¼Œä½¿ç”¨sysdate()å‡½æ•°ä¼šå¯¼è‡´ä¸»å¤‡æ•°æ®ä¸ä¸€è‡´ï¼Œå› æ­¤ä¸å»ºè®®ä½¿ç”¨ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>è®¾è®¡è¡¨ç»“æ„æ—¶ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å‡ ç‚¹ã€‚</p><ol>\n<li>é€‰æ‹©ç²¾ç¡®åŒ¹é…ä¸šåŠ¡éœ€æ±‚çš„æ•°æ®ç±»å‹ã€‚å¦‚æ—¶é—´å’Œæ—¥æœŸç±»å‹çš„æ•°æ®ä½¿ç”¨TIMESTAMPæˆ–DATETIMEç±»å‹ï¼Œæ•´æ•°ç±»çš„æ•°æ®ä½¿ç”¨INTç³»åˆ—ç±»å‹ï¼Œæ–‡æœ¬ç±»å‹çš„ä½¿ç”¨VARCHARç±»å‹ã€‚</li>\n<li>è¦å…³æ³¨æ•°æ®ç±»å‹çš„ç©ºé—´å ç”¨æƒ…å†µã€‚åœ¨æ»¡è¶³ä¸šåŠ¡å­˜å‚¨éœ€æ±‚çš„å‰æä¸‹ï¼Œä¼˜å…ˆä½¿ç”¨ç©ºé—´å ç”¨æ›´å°çš„ç±»å‹ã€‚æ¯”å¦‚ä¸šåŠ¡ä¸­æœ€å¤šå‡ åç§çŠ¶æ€ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨tinyintç±»å‹ï¼Œè€Œä¸ä½¿ç”¨intæˆ–bigintã€‚VARCHARçš„é•¿åº¦è¦æŒ‰å®é™…éœ€æ±‚è®¾ç½®ã€‚</li>\n<li>å¦‚æœä¸šåŠ¡ä¸Šå¯ä»¥ä¿è¯ä¸€ä¸ªå­—æ®µä¸­ä¸€å®šä¼šæœ‰æ•°æ®ï¼Œå°±ç»™å­—æ®µåŠ ä¸ŠNot Nullçº¦æŸã€‚</li>\n<li>åœ¨å¤šä¸ªè¡¨ä¸­ï¼Œä½¿ç”¨ç›¸åŒçš„æ•°æ®ç±»å‹å­˜å‚¨åŒä¸€ä¸ªä¸šåŠ¡å­—æ®µã€‚</li>\n<li>æ–‡æœ¬ç±»å‹å­—æ®µè¦è®¾ç½®åˆé€‚çš„å­—ç¬¦é›†ã€‚å¦‚æœéœ€è¦å¤„ç†å¤šè¯­è¨€æ•°æ®ï¼Œä¼˜å…ˆè€ƒè™‘UTF8å­—ç¬¦é›†ã€‚</li>\n<li>å°½é‡ä¸è¦åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å¤§é‡å¤§å¯¹è±¡ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘æ–‡ä»¶ç­‰ï¼‰ï¼Œä½¿ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå¯èƒ½æ›´åŠ åˆé€‚ã€‚</li>\n</ol><h2>æ€è€ƒé¢˜</h2><p>ä½ åˆšåˆšæ¥åˆ°äº†1ä¸ªéœ€æ±‚ï¼Œè¦å¼€å‘ä¸€ä¸ªå‘˜å·¥ç®¡ç†ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿè®¡åˆ’ä½¿ç”¨MySQLæ•°æ®åº“ï¼Œè®¾è®¡äººå‘˜æä¾›äº†è¡¨ç»“æ„ï¼Œå…¶ä¸­å°±åŒ…æ‹¬ä¸‹é¢è¿™2ä¸ªè¡¨ã€‚ä½œä¸ºä¸€ä½èµ„æ·±çš„MySQLä½¿ç”¨è€…ï¼Œä½ è§‰å¾—è¿™2ä¸ªè¡¨å­˜åœ¨å“ªäº›é—®é¢˜ï¼Ÿä½ ä¼šæ€ä¹ˆæ”¹è¿›å‘¢ï¼Ÿ</p><pre><code class=\"language-go\">create table t_employee(\n    emp_id int not null comment 'å‘˜å·¥ç¼–å·',\n    emp_name varchar(200) comment 'å‘˜å·¥å§“å',\n    birth_day varchar(200) comment 'å‡ºç”Ÿæ—¥æœŸ',\n    age int comment 'å¹´é¾„',\n    gender varchar(200) comment 'æ€§åˆ«',\n    address varchar(200) comment 'ä½å€',\n    photo blob comment 'å‘˜å·¥ç…§ç‰‡',\n    primary key(emp_id)\n) engine=innodb charset utf8;\n\ncreate table t_emp_salary(\n    emp_id varchar(30) not null comment 'å‘˜å·¥ç¼–å·',\n    effect_date varchar(200) comment 'ç”Ÿæ•ˆæ—¥æœŸ',\n    salary double comment 'è–ªèµ„',\n    descripton varchar(2000) comment 'å¤‡æ³¨',\n    primary key(emp_id, effect_date)\n) engine=innodb charset utf8;\n</code></pre><p>æœŸå¾…ä½ çš„æ€è€ƒï¼Œæ¬¢è¿åœ¨ç•™è¨€åŒºä¸­ä¸æˆ‘äº¤æµã€‚å¦‚æœä»Šå¤©çš„è¯¾ç¨‹è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿è½¬å‘ç»™æœ‰éœ€è¦çš„æœ‹å‹ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","comments":[{"had_liked":false,"id":393774,"user_name":"123","can_delete":false,"product_type":"c1","uid":2662872,"ip_address":"æµ™æ±Ÿ","ucode":"5A343B568B9524","user_header":"https://static001.geekbang.org/account/avatar/00/28/a1/d8/42252c48.jpg","comment_is_top":false,"comment_ctime":1724832963,"is_pvip":false,"replies":[{"id":142977,"content":"InnoDBè¡Œæ ¼å¼ä¸­ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ä¿¡æ¯ï¼š\n1. è¡¨æ²¡æœ‰ä¸»é”®ï¼ŒInnoDBä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªdb_row_idï¼Œ6å­—èŠ‚\n2. éšè—å­—æ®µdb_trx_id, db_roll_ptrï¼Œåˆ†åˆ«å ç”¨6å­—èŠ‚å’Œ7å­—èŠ‚\n3. compactæ ¼å¼å›ºæœ‰çš„5å­—èŠ‚è®°å½•å¤´éƒ¨ä¿¡æ¯\n4. è¡¨é‡Œçš„å­—æ®µéƒ½å¯ä»¥ä¸ºnullï¼Œæ¯ä¸ªå­—æ®µéœ€è¦1 bitçš„æ ‡è®°ä½ï¼Œ11ä¸ªå­—æ®µæ€»å…±éœ€è¦11 bitï¼Œå–æ•´ä¸º2å­—èŠ‚ã€‚\nåŠ ä¸Švarcharæœ¬èº«å ç”¨çš„ç©ºé—´ï¼Œæ€»å…±éœ€è¦\n(768+2)* 10 + (397 + 2) + 6 + 6 + 7 + 5 + 2 = 8125å­—èŠ‚ã€‚\n\næˆ‘ç¿»äº†ä¸€ä¸‹ä»£ç ï¼Œå½“è¡Œé•¿åº¦ &gt;= 8126æ—¶ï¼Œä¼šæŠ¥Row size too largeçš„é”™è¯¯ã€‚\n\nInnoDBç‰©ç†å­˜å‚¨æ ¼å¼åœ¨ç¬¬ä¸‰ç« InnoDBå­˜å‚¨å¼•æ“ç¯‡ä¸­ä¼šè¯¦ç»†ä»‹ç»ã€‚\n\nå¦å¤–ï¼Œæˆ‘åœ¨5.7çš„ç¯å¢ƒæµ‹è¯•äº†ä¸€ä¸‹ï¼Œå»ºè¡¨æ—¶ä¸æŠ¥é”™ï¼Œä½†æ˜¯insertæ•°æ®æ—¶ä¼šæŠ¥é”™ã€‚\n\nmysql&gt; insert into t_inno2 values(\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 768, &#39;x&#39;),\n rpad(&#39;x&#39;, 398, &#39;x&#39;)\n );\n \n  ERROR 1118 (42000): Row size too large (&gt; 8126).\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":3898827,"ctime":1724845515,"ip_address":"æµ™æ±Ÿ","comment_id":393774,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæ–‡ä¸­\nmysql&gt; create table t_inno1( -&gt; c01 varchar(768), -&gt; c02 varchar(768), -&gt; c03 varchar(768), -&gt; c04 varchar(768), -&gt; c05 varchar(768), -&gt; c06 varchar(768), -&gt; c07 varchar(768), -&gt; c08 varchar(768), -&gt; c09 varchar(768), -&gt; c10 varchar(768), -&gt; c11 varchar(398) -&gt; ) engine=innodb row_format=compact charset latin1;\n\nå½“c11è®¾ç½®ä¸ºvarchar(397)çš„æ—¶å€™ï¼Œå°±å¯ä»¥åˆ›å»ºæˆåŠŸï¼Œæœ¬åœ°æ•°æ®åº“ç‰ˆæœ¬ä¸º8.0.29\nä½†æ˜¯è®¡ç®—äº†ä¸‹å…¶å®æ˜¯æ²¡æœ‰è¾¾åˆ°8126ä¸ªå­—èŠ‚çš„ï¼Œç»“åˆä¸‹å‰é¢å¯èƒ½å­˜åœ¨çš„è¡Œé¦–å­—èŠ‚åˆ†é…ï¼Œåº”è¯¥æ˜¯ï¼ˆ768+2ï¼‰* 10 + ï¼ˆ397 + 2ï¼‰= 8099ä¸ªå­—èŠ‚\nè€Œå½“c11è®¾ç½®ä¸ºvarchar(398)ï¼Œä¹Ÿå°±æ˜¯8100ä¸ªå­—èŠ‚ï¼Œä¹Ÿæ˜¯å°äº8126ä¸ªå­—èŠ‚ï¼Œç½‘ä¸Šæ‰€è¯´æ˜¯ROW_FORMAT=COMPACTçš„é—®é¢˜ï¼Œä¼šæœ‰é¢å¤–çš„å¼€é”€\n\nè¯·æ•™ä¸‹è€å¸ˆå…·ä½“çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650358,"discussion_content":"InnoDBè¡Œæ ¼å¼ä¸­ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ä¿¡æ¯ï¼š\n1. è¡¨æ²¡æœ‰ä¸»é”®ï¼ŒInnoDBä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªdb_row_idï¼Œ6å­—èŠ‚\n2. éšè—å­—æ®µdb_trx_id, db_roll_ptrï¼Œåˆ†åˆ«å ç”¨6å­—èŠ‚å’Œ7å­—èŠ‚\n3. compactæ ¼å¼å›ºæœ‰çš„5å­—èŠ‚è®°å½•å¤´éƒ¨ä¿¡æ¯\n4. è¡¨é‡Œçš„å­—æ®µéƒ½å¯ä»¥ä¸ºnullï¼Œæ¯ä¸ªå­—æ®µéœ€è¦1 bitçš„æ ‡è®°ä½ï¼Œ11ä¸ªå­—æ®µæ€»å…±éœ€è¦11 bitï¼Œå–æ•´ä¸º2å­—èŠ‚ã€‚\nåŠ ä¸Švarcharæœ¬èº«å ç”¨çš„ç©ºé—´ï¼Œæ€»å…±éœ€è¦\n(768+2)* 10 + (397 + 2) + 6 + 6 + 7 + 5 + 2 = 8125å­—èŠ‚ã€‚\n\næˆ‘ç¿»äº†ä¸€ä¸‹ä»£ç ï¼Œå½“è¡Œé•¿åº¦ >= 8126æ—¶ï¼Œä¼šæŠ¥Row size too largeçš„é”™è¯¯ã€‚\n\nInnoDBç‰©ç†å­˜å‚¨æ ¼å¼åœ¨ç¬¬ä¸‰ç« InnoDBå­˜å‚¨å¼•æ“ç¯‡ä¸­ä¼šè¯¦ç»†ä»‹ç»ã€‚\n\nå¦å¤–ï¼Œæˆ‘åœ¨5.7çš„ç¯å¢ƒæµ‹è¯•äº†ä¸€ä¸‹ï¼Œå»ºè¡¨æ—¶ä¸æŠ¥é”™ï¼Œä½†æ˜¯insertæ•°æ®æ—¶ä¼šæŠ¥é”™ã€‚\n\nmysql> insert into t_inno2 values(\n rpad('x', 768, 'x'),\n rpad('x', 768, 'x'),\n rpad('x', 768, 'x'),\n rpad('x', 768, 'x'),\n rpad('x', 768, 'x'),\n rpad('x', 768, 'x'),\n rpad('x', 768, 'x'),\n rpad('x', 768, 'x'),\n rpad('x', 768, 'x'),\n rpad('x', 768, 'x'),\n rpad('x', 398, 'x')\n );\n \n  ERROR 1118 (42000): Row size too large (> 8126).\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724845515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":2662872,"avatar":"https://static001.geekbang.org/account/avatar/00/28/a1/d8/42252c48.jpg","nickname":"123","note":"","ucode":"5A343B568B9524","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":650360,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724847646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":650358,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":650360,"extra":""}]}]},{"had_liked":false,"id":393969,"user_name":"ç‘¶ç‘¶","can_delete":false,"product_type":"c1","uid":2344024,"ip_address":"æ±Ÿè‹","ucode":"1C72F1AD911A3F","user_header":"https://static001.geekbang.org/account/avatar/00/23/c4/58/952caade.jpg","comment_is_top":false,"comment_ctime":1725453504,"is_pvip":false,"replies":[{"id":143042,"content":"è¿™ä¸ªå¾—çœ‹ä¸€ä¸‹æ•°æ®åº“çš„å…·ä½“æŠ¥é”™ä¿¡æ¯ã€‚\nå¦å¤–åœ¨æ›´æ–°è¯­å¥æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ”¶é›†å‡ ä¸ªprocesslistå¿«ç…§ï¼Œçœ‹çœ‹å½“æ—¶æ›´æ–°è¯­å¥å¤„äºå“ªä¸ªstateã€‚\næ˜ç¡®é—®é¢˜çš„åŸå› åï¼Œæ‰èƒ½æœ‰é’ˆå¯¹æ€§åœ°è§£å†³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1725616022,"ip_address":"æµ™æ±Ÿ","comment_id":393969,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨é¡¹ç›®ä¸­çš„ä¸€ä¸ªè¡¨é‡Œé¢ ä½¿ç”¨mediumtextç”¨æ¥å­˜å‚¨jsonå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸€èˆ¬50KBå¤§å°ï¼Œæ•´ä¸ªè¡¨æ•°æ®é‡ä¹Ÿå°±å‡ åƒè¡Œï¼ŒSpring Booté€šè¿‡ mybaties å»æ›´æ–°è¿™ä¸ªå­—æ®µï¼Œç»å¸¸å‘ç”Ÿè¶…æ—¶ æˆ‘æŠŠjavaè¿æ¥mysqlè¶…æ—¶æ—¶é—´æ”¹æˆ38s,ã€€ä¹Ÿç»å¸¸å‡ºç°æ›´æ–°è¶…æ—¶ æ•°æ®æ›´æ–°ä¸è¿›å»\nï¼Œéƒ½æ˜¯å†…ç½‘è¿æ¥ï¼Œä¸çŸ¥é“éœ€è¦è°ƒæ•´MySQLä»€ä¹ˆå‚æ•° å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè°¢è°¢","like_count":1,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650791,"discussion_content":"è¿™ä¸ªå¾—çœ‹ä¸€ä¸‹æ•°æ®åº“çš„å…·ä½“æŠ¥é”™ä¿¡æ¯ã€‚\nå¦å¤–åœ¨æ›´æ–°è¯­å¥æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ”¶é›†å‡ ä¸ªprocesslistå¿«ç…§ï¼Œçœ‹çœ‹å½“æ—¶æ›´æ–°è¯­å¥å¤„äºå“ªä¸ªstateã€‚\næ˜ç¡®é—®é¢˜çš„åŸå› åï¼Œæ‰èƒ½æœ‰é’ˆå¯¹æ€§åœ°è§£å†³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725616023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396475,"user_name":"æœ¨å‡ ä¸¶","can_delete":false,"product_type":"c1","uid":2420294,"ip_address":"ç¦å»º","ucode":"FFDB958DA64F8C","user_header":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","comment_is_top":false,"comment_ctime":1734604445,"is_pvip":true,"replies":[{"id":143931,"content":"æ˜¯çš„ã€‚å› ä¸ºInnoDBä¸­æ•°æ®å­˜åœ¨èšç°‡ç´¢å¼•ä¸­ï¼Œè€Œèšç°‡ç´¢å¼•æ˜¯ä¸€æ£µB+æ ‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1734660845,"ip_address":"æµ™æ±Ÿ","comment_id":396475,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"å¼•ç”¨åŸæ–‡ï¼šâ€œInnoDB å­˜å‚¨å¼•æ“å¯¹è¡Œé•¿åº¦ä¹Ÿæœ‰é™åˆ¶ã€‚å…·ä½“çš„é™åˆ¶å’Œé¡µé¢å¤§å°æœ‰å…³ã€‚å¯¹äºé»˜è®¤ 16K çš„é¡µé¢å¤§å°ï¼Œè¡Œé•¿åº¦å¤§è‡´ä¸º 8000 å¤šä¸€äº›ï¼ˆé¡µé¢å¤§å°çš„ä¸€åŠï¼‰â€\n--------------------------------------------------\nè€å¸ˆï¼Œè¿™æ„æ€æ˜¯è¯´ä¸€é¡µè‡³å°‘è¦æ”¾2è¡Œæ•°æ®ï¼Œè¯·é—®MySQLä¸ºä»€ä¹ˆè¦æœ‰è¿™ç§é™åˆ¶å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655347,"discussion_content":"æ˜¯çš„ã€‚å› ä¸ºInnoDBä¸­æ•°æ®å­˜åœ¨èšç°‡ç´¢å¼•ä¸­ï¼Œè€Œèšç°‡ç´¢å¼•æ˜¯ä¸€æ£µB+æ ‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734660845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395987,"user_name":"åƒè‹¹æœçš„è€ƒæ‹‰","can_delete":false,"product_type":"c1","uid":1304459,"ip_address":"å¹¿ä¸œ","ucode":"DD5AC5FFEAA9CC","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/8b/7baca523.jpg","comment_is_top":false,"comment_ctime":1732603090,"is_pvip":false,"replies":[{"id":143788,"content":"å›ç­”å¾—éå¸¸å…¨é¢äº†ã€‚\n\nä¸è¿‡t_emp_salaryè¡¨çš„è”åˆä¸»é”®å€’ä¸æ˜¯æˆ‘æ•…æ„è®¾è®¡æˆè¿™æ ·çš„ã€‚è¿™é‡Œæ˜¯å¼•ç”¨äº†employeeæ ·ä¾‹æ•°æ®åº“çš„salariesè¡¨ã€‚ï¼ˆhttps:&#47;&#47;github.com&#47;datacharmer&#47;test_db&#47;blob&#47;master&#47;employees.sqlï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1732712026,"ip_address":"æµ™æ±Ÿ","comment_id":395987,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"t_employeeè¡¨ï¼šemp_nameå¤ªé•¿ï¼Œbirth_dayç±»å‹ä¸å¯¹ï¼Œgenderå¤ªé•¿æˆ–è€…æ›´æ¢ç±»å‹ï¼Œaddresså¤ªé•¿ï¼Œphotoä¸å»ºè®®åœ¨æ•°æ®åº“å­˜photoè¿™ç§blobï¼Œcharsetæœ€å¥½æ˜¯utf8mb4\nt_emp_salaryï¼šeffect_dateç±»å‹ä¸å¯¹ï¼Œprimary keyä¸ç”¨è”åˆç´¢å¼•ï¼Œå› ä¸ºå¾ˆå¯èƒ½t_employeeå’Œt_emp_salaryè¦å…³è”æŸ¥è¯¢ï¼Œè¿™ç§è”åˆç´¢å¼•ç”¨ä¸ä¸Šï¼Œcharsetæœ€å¥½æ˜¯utf8mb4\nå¦å¤–ï¼Œt_employeeå’Œt_emp_salaryçš„emp_idæœ€å¥½ä¿æŒåŒä¸€ç±»å‹ï¼Œé¿å…è¡¨è¿æ¥æ—¶çš„ç±»å‹è½¬æ¢","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654445,"discussion_content":"å›ç­”å¾—éå¸¸å…¨é¢äº†ã€‚\n\nä¸è¿‡t_emp_salaryè¡¨çš„è”åˆä¸»é”®å€’ä¸æ˜¯æˆ‘æ•…æ„è®¾è®¡æˆè¿™æ ·çš„ã€‚è¿™é‡Œæ˜¯å¼•ç”¨äº†employeeæ ·ä¾‹æ•°æ®åº“çš„salariesè¡¨ã€‚ï¼ˆhttps://github.com/datacharmer/test_db/blob/master/employees.sqlï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1732712026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394225,"user_name":"ç¬™ é¸¢","can_delete":false,"product_type":"c1","uid":3951358,"ip_address":"ä¸Šæµ·","ucode":"477AF524212C6D","user_header":"https://static001.geekbang.org/account/avatar/00/3c/4a/fe/7b6bd101.jpg","comment_is_top":false,"comment_ctime":1726153030,"is_pvip":false,"replies":[{"id":143097,"content":"è¿™ä¸ªå’Œç‰ˆæœ¬ã€ä»¥åŠå‚æ•°innodb_strict_modeéƒ½æœ‰å…³ç³»ã€‚\n\nmysql&gt; select @@version,  @@innodb_strict_mode;\n+--------------+----------------------+\n| @@version    | @@innodb_strict_mode |\n+--------------+----------------------+\n| 8.0.32-debug |                    1 |\n+--------------+----------------------+\n\n\nmysql&gt; CREATE TABLE `t_inno10` (\n       `c01` varchar(768) DEFAULT NULL,\n       `c02` varchar(768) DEFAULT NULL,\n       `c03` varchar(768) DEFAULT NULL,\n       `c04` varchar(768) DEFAULT NULL,\n       `c05` varchar(768) DEFAULT NULL,\n       `c06` varchar(768) DEFAULT NULL,\n       `c07` varchar(768) DEFAULT NULL,\n       `c08` varchar(768) DEFAULT NULL,\n       `c09` varchar(768) DEFAULT NULL,\n       `c10` varchar(768) DEFAULT NULL,\n       `c11` varchar(53333) DEFAULT NULL\n     ) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=COMPACT;\nERROR 1118 (42000): Row size too large (&gt; 8126). Changing some columns to TEXT or BLOB or using ROW_FORMAT=DYNAMIC or ROW_FORMAT=COMPRESSED may help. In current row format, BLOB prefix of 768 bytes is stored inline.","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1726207981,"ip_address":"æµ™æ±Ÿ","comment_id":394225,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"-------------------------------------------------------------------------------------------+\n| t_inno10 | CREATE TABLE `t_inno10` (\n  `c01` varchar(768) DEFAULT NULL,\n  `c02` varchar(768) DEFAULT NULL,\n  `c03` varchar(768) DEFAULT NULL,\n  `c04` varchar(768) DEFAULT NULL,\n  `c05` varchar(768) DEFAULT NULL,\n  `c06` varchar(768) DEFAULT NULL,\n  `c07` varchar(768) DEFAULT NULL,\n  `c08` varchar(768) DEFAULT NULL,\n  `c09` varchar(768) DEFAULT NULL,\n  `c10` varchar(768) DEFAULT NULL,\n  `c11` varchar(53333) DEFAULT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=COMPACT |\nè€å¸ˆï¼Œæˆ‘è¿™ä¸ªæ˜¯å‡çš„innodbè¡¨å—ï¼Ÿä¸ºä»€ä¹ˆæˆ‘è¿™ä¸ªåˆ—è¡¨æ•°è¿™ä¹ˆå¤§å•Š","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651087,"discussion_content":"è¿™ä¸ªå’Œç‰ˆæœ¬ã€ä»¥åŠå‚æ•°innodb_strict_modeéƒ½æœ‰å…³ç³»ã€‚\n\nmysql&gt; select @@version,  @@innodb_strict_mode;\n+--------------+----------------------+\n| @@version    | @@innodb_strict_mode |\n+--------------+----------------------+\n| 8.0.32-debug |                    1 |\n+--------------+----------------------+\n\n\nmysql&gt; CREATE TABLE `t_inno10` (\n       `c01` varchar(768) DEFAULT NULL,\n       `c02` varchar(768) DEFAULT NULL,\n       `c03` varchar(768) DEFAULT NULL,\n       `c04` varchar(768) DEFAULT NULL,\n       `c05` varchar(768) DEFAULT NULL,\n       `c06` varchar(768) DEFAULT NULL,\n       `c07` varchar(768) DEFAULT NULL,\n       `c08` varchar(768) DEFAULT NULL,\n       `c09` varchar(768) DEFAULT NULL,\n       `c10` varchar(768) DEFAULT NULL,\n       `c11` varchar(53333) DEFAULT NULL\n     ) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=COMPACT;\nERROR 1118 (42000): Row size too large (&gt; 8126). Changing some columns to TEXT or BLOB or using ROW_FORMAT=DYNAMIC or ROW_FORMAT=COMPRESSED may help. In current row format, BLOB prefix of 768 bytes is stored inline.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726207981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3951358,"avatar":"https://static001.geekbang.org/account/avatar/00/3c/4a/fe/7b6bd101.jpg","nickname":"ç¬™ é¸¢","note":"","ucode":"477AF524212C6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651144,"discussion_content":"mysql&gt; set innodb_strict_mode=ON;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; select @@version,  @@innodb_strict_mode;\n+-----------+----------------------+\n| @@version | @@innodb_strict_mode |\n+-----------+----------------------+\n| 8.0.28    |                    1 |\n+-----------+----------------------+\n1 row in set (0.01 sec)\n\nmysql&gt; CREATE TABLE `t_inno18` ( `c01` varchar(768) DEFAULT NULL, `c02` varchar(768) DEFAULT NULL, `c03` varchar(768) DEFAULT NULL, `c04` varchar(768) DEFAULT NULL, `c05` varchar(768) DEFAULTNULL, `c06` varchar(768) DEFAULT NULL, `c07` varchar(768) DEFAULT NULL, `c08` varchar(768) DEFAULT NULL, `c09` varchar(768) DEFAULT NULL, `c10` varchar(768) DEFAULT NULL, `c11` varchar(53333)DEFAULT NULL ) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=COMPACT;\nQuery OK, 0 rows affected (0.05 sec)\né‚£æˆ‘è¿™ä¸ªä¼°è®¡å°±æ˜¯ç‰ˆæœ¬çš„é—®é¢˜äº†ï¼Œåˆ›è¡¨å¯ä»¥ï¼Œä½†æ˜¯æ’å…¥æ•°æ®ä¼šæŠ¥&gt;8126","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726280322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393903,"user_name":"Geek_8bdefc","can_delete":false,"product_type":"c1","uid":2759242,"ip_address":"æ¹–å—","ucode":"2875C7A0432987","user_header":"","comment_is_top":false,"comment_ctime":1725288742,"is_pvip":false,"replies":[{"id":143020,"content":"è¿™ä¸ªåœ°æ–¹æ˜¯å†™é”™äº†ï¼Œ[0,65535]æ‰æ˜¯æ­£ç¡®çš„ã€‚\néå¸¸æ„Ÿè°¢æŒ‡æ­£ã€‚ğŸ¤ğŸ¤","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1725351258,"ip_address":"æµ™æ±Ÿ","comment_id":393903,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"è€å¸ˆï¼š\næ–‡ä¸­ï¼Œsmallint unsignedç±»å‹çš„æ•°å€¼èŒƒå›´ï¼š[0,32767]å¥½åƒæ ‡é”™äº†å§ï¼Œæ­£ç¡®åº”è¯¥æ˜¯ï¼š[0,65535]å§ã€‚è°¢è°¢","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650625,"discussion_content":"è¿™ä¸ªåœ°æ–¹æ˜¯å†™é”™äº†ï¼Œ[0,65535]æ‰æ˜¯æ­£ç¡®çš„ã€‚\néå¸¸æ„Ÿè°¢æŒ‡æ­£ã€‚ğŸ¤ğŸ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725351258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393901,"user_name":"TheOne","can_delete":false,"product_type":"c1","uid":1582134,"ip_address":"åŒ—äº¬","ucode":"2A359780156A8B","user_header":"https://static001.geekbang.org/account/avatar/00/18/24/36/0829cbdc.jpg","comment_is_top":false,"comment_ctime":1725275308,"is_pvip":false,"replies":[{"id":143019,"content":"æˆ‘å€¾å‘äºä½¿ç”¨datetimeç±»å‹ï¼Œè¿™æ ·è™½ç„¶ä¼šå¤šå ç”¨ä¸€ç‚¹ç©ºé—´ï¼Œä½†æ˜¯èƒ½ä¿å­˜çš„æ—¶é—´èŒƒå›´æ›´é•¿ã€‚\n\nå¦å¤–æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œtimestampç±»å‹ä¼šå—time_zoneè®¾ç½®çš„å½±å“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1725350914,"ip_address":"æµ™æ±Ÿ","comment_id":393901,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæ—¶é—´å­—æ®µæ˜¯ç”¨æ—¶é—´æˆ³è¿˜æ˜¯datetimeå‘¢ï¼Œæˆ‘ç»å†çš„è¿‡çš„å…¬å¸ä¸¤ç§æ–¹å¼éƒ½ç”¨è¿‡ï¼Œæˆ‘æ„Ÿè§‰ç”¨ä¸¤ä¸ªéƒ½æ²¡é”™ï¼Œæ‚¨å¹³å¸¸ç”¨é‚£ä¸ªå¤šä¸€äº›","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650624,"discussion_content":"æˆ‘å€¾å‘äºä½¿ç”¨datetimeç±»å‹ï¼Œè¿™æ ·è™½ç„¶ä¼šå¤šå ç”¨ä¸€ç‚¹ç©ºé—´ï¼Œä½†æ˜¯èƒ½ä¿å­˜çš„æ—¶é—´èŒƒå›´æ›´é•¿ã€‚\n\nå¦å¤–æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œtimestampç±»å‹ä¼šå—time_zoneè®¾ç½®çš„å½±å“ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1725350915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393779,"user_name":"Amosãƒ¾","can_delete":false,"product_type":"c1","uid":1567014,"ip_address":"å¹¿ä¸œ","ucode":"833F6FCB4042AD","user_header":"https://static001.geekbang.org/account/avatar/00/17/e9/26/472e16e4.jpg","comment_is_top":false,"comment_ctime":1724856062,"is_pvip":true,"replies":[{"id":142982,"content":"è¿™éƒ½æ˜¯å¯ä»¥çš„ã€‚å ç”¨çš„ç©ºé—´ä¹Ÿéƒ½æ˜¯1å­—èŠ‚ã€‚\n\nä½¿ç”¨enumç±»å‹æ—¶ï¼Œå¦‚æœæšä¸¾çš„æˆå‘˜å‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚è¦æ–°å¢ä¸€äº›ç±»å‹æ—¶ï¼Œè¿˜éœ€è¦ä¿®æ”¹å­—æ®µçš„ç±»å‹ï¼Œéœ€è¦æ‰§è¡ŒDDLã€‚\n\nä½¿ç”¨tinyintçš„è¯ï¼Œåªè¦åœ¨ç¨‹åºçš„ä»£ç ä¸­ä¿®æ”¹å°±å¥½äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1724898764,"ip_address":"æµ™æ±Ÿ","comment_id":393779,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"æ€è€ƒé¢˜ä¸­t_employeeè¡¨genderè¿™ç§ä½¿ç”¨ tinyint(1) åç¨‹åºæ ¹æ®ä¸åŒå€¼æ˜¾ç¤ºæ€§åˆ«ï¼Œè¿˜æ˜¯ç›´æ¥ enum ç±»å‹ä¸­è®¾ç½®â€œç”·â€ã€â€œå¥³â€æ¯”è¾ƒå¥½ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650393,"discussion_content":"è¿™éƒ½æ˜¯å¯ä»¥çš„ã€‚å ç”¨çš„ç©ºé—´ä¹Ÿéƒ½æ˜¯1å­—èŠ‚ã€‚\n\nä½¿ç”¨enumç±»å‹æ—¶ï¼Œå¦‚æœæšä¸¾çš„æˆå‘˜å‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚è¦æ–°å¢ä¸€äº›ç±»å‹æ—¶ï¼Œè¿˜éœ€è¦ä¿®æ”¹å­—æ®µçš„ç±»å‹ï¼Œéœ€è¦æ‰§è¡ŒDDLã€‚\n\nä½¿ç”¨tinyintçš„è¯ï¼Œåªè¦åœ¨ç¨‹åºçš„ä»£ç ä¸­ä¿®æ”¹å°±å¥½äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724898765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393775,"user_name":"123","can_delete":false,"product_type":"c1","uid":2662872,"ip_address":"æµ™æ±Ÿ","ucode":"5A343B568B9524","user_header":"https://static001.geekbang.org/account/avatar/00/28/a1/d8/42252c48.jpg","comment_is_top":false,"comment_ctime":1724833537,"is_pvip":false,"replies":[{"id":142981,"content":"å›ç­”å¾—æ¯”è¾ƒå®Œæ•´äº†ã€‚\nt_employeeä¸­ï¼Œå…¶å®ageå­—æ®µæ˜¯å¤šä½™äº†ã€‚\nt_emp_salaryçš„è”åˆä¸»é”®ï¼Œå®é™…ä¸Šæ˜¯å‚è€ƒäº†MySQLçš„employeeæ ·ä¾‹æ•°æ®åº“ï¼Œä½¿ç”¨è”åˆä¸»é”®çš„åŸå› æ˜¯è¿™ä¸ªè¡¨è®°å½•äº†å‘˜å·¥åœ¨ä¸åŒæ—¶é—´çš„salaryã€‚\n\nå¤‡æ³¨å­—æ®µçœ‹ä¸šåŠ¡éœ€è¦ï¼Œä¸€èˆ¬è®¾ç½®ä¸ªvarchar(2000)ã€varchar(4000)ï¼Œå¦‚æœåœ¨æç«¯æƒ…å†µä¸‹é•¿åº¦è¿˜ä¸å¤Ÿï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨textã€‚å¦‚æœæ•´è¡Œè®°å½•é•¿åº¦æ²¡æœ‰è¶…è¿‡é™åˆ¶ï¼Œtextç±»å‹åº”è¯¥ä¹Ÿå¯ä»¥åœ¨è¡Œå†…å­˜å‚¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1724854726,"ip_address":"æµ™æ±Ÿ","comment_id":393775,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"å›ç­”ä¸‹è¯¾åæ€è€ƒé¢˜ï¼š\n\n[t_employee]\n1ã€emp_nameè®¾ç½®è¿‡é•¿ï¼Œå§“åå¯ä»¥å›ºå®šä½æ•°\n2ã€birth_dayåº”ä½¿ç”¨dataç±»å‹\n3ã€ageä¸å¿…ç”¨intï¼Œå¯ä»¥ä½¿ç”¨unsign tinyint\n4ã€genderåŸºæœ¬ä¸Šåªä¼šæœ‰ä¸¤ç§å¯èƒ½ï¼Œè‹¥åç»­ä¸ç¡®å®šï¼Œä½¿ç”¨tinyintå®Œå…¨å¯ä»¥ï¼Œæˆ–å¯ä»¥ä½¿ç”¨char\n5ã€å°½é‡ä¸åœ¨æ•°æ®åº“ä¸­å­˜å‚¨ç…§ç‰‡çš„äºŒè¿›åˆ¶ï¼Œè€Œä½¿ç”¨å¯¹è±¡å­˜å‚¨ï¼Œé˜²æ­¢å¼•ç”¨å³å¯\n\n[t_emp_salary]\n1ã€emp_idä½œä¸ºä¸»é”®æœ€å¥½ä¸è¦ä½¿ç”¨varcharï¼Œå½±å“æŸ¥è¯¢æ€§èƒ½\n2ã€effect_dateä½¿ç”¨dateTimeå³å¯\n3ã€salaryä½¿ç”¨decimalï¼Œfloatã€doubleä¼šå­˜åœ¨è®¡ç®—è¯¯å·®\n4ã€emp_idæ˜¯ä¸ä¼šé‡å¤çš„ï¼Œå®Œå…¨ä¸éœ€è¦ä½¿ç”¨å¤åˆä¸»é”®\n\nå¦å¤–ï¼Œè¯·æ•™ä¸‹è€å¸ˆå¯¹äº[å¤‡æ³¨]è¿™ç±»å­—æ®µï¼Œåº”è¯¥è®¾ç½®æˆå¤šé•¿ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå­—æ®µè¢«å†™å…¥çš„æ•°æ®ä¸ä¼šå¤ªå¤šï¼Œæˆ–è€…æœ‰äº›ä¹Ÿå¯èƒ½ç‰¹åˆ«å¤šï¼Œæ˜¯å¦åº”è¯¥æ¢æˆtextï¼Œä½†æ˜¯textæ˜¯é¢å¤–ç©ºé—´ï¼Œå¹¶ä¸åœ¨è¡Œç©ºé—´ä¸­ï¼Œæ˜¯å¦ä¼šå½±å“æŸ¥è¯¢æ€§èƒ½","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650369,"discussion_content":"å›ç­”å¾—æ¯”è¾ƒå®Œæ•´äº†ã€‚\nt_employeeä¸­ï¼Œå…¶å®ageå­—æ®µæ˜¯å¤šä½™äº†ã€‚\nt_emp_salaryçš„è”åˆä¸»é”®ï¼Œå®é™…ä¸Šæ˜¯å‚è€ƒäº†MySQLçš„employeeæ ·ä¾‹æ•°æ®åº“ï¼Œä½¿ç”¨è”åˆä¸»é”®çš„åŸå› æ˜¯è¿™ä¸ªè¡¨è®°å½•äº†å‘˜å·¥åœ¨ä¸åŒæ—¶é—´çš„salaryã€‚\n\nå¤‡æ³¨å­—æ®µçœ‹ä¸šåŠ¡éœ€è¦ï¼Œä¸€èˆ¬è®¾ç½®ä¸ªvarchar(2000)ã€varchar(4000)ï¼Œå¦‚æœåœ¨æç«¯æƒ…å†µä¸‹é•¿åº¦è¿˜ä¸å¤Ÿï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨textã€‚å¦‚æœæ•´è¡Œè®°å½•é•¿åº¦æ²¡æœ‰è¶…è¿‡é™åˆ¶ï¼Œtextç±»å‹åº”è¯¥ä¹Ÿå¯ä»¥åœ¨è¡Œå†…å­˜å‚¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724854726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393771,"user_name":"Geek_0126","can_delete":false,"product_type":"c1","uid":3952196,"ip_address":"æµ™æ±Ÿ","ucode":"2916F7FB3F6D71","user_header":"https://static001.geekbang.org/account/avatar/00/3c/4e/44/49b29792.jpg","comment_is_top":false,"comment_ctime":1724830713,"is_pvip":false,"replies":[{"id":142980,"content":"å›ç­”å¾—å¾ˆå®Œæ•´äº†ã€‚\næˆ‘å†åŠ ä¸€æ¡ï¼šä½¿ç”¨utf8mb4ä»£æ›¿utf8ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":3898827,"ctime":1724854126,"ip_address":"æµ™æ±Ÿ","comment_id":393771,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100799401,"comment_content":"æˆ‘ä»¬ç³»ç»Ÿç”¨ varchar(20) æ¥å­˜å‚¨ç”µè¯å·ç \n\né‚£ä¸¤å¼ å‘˜å·¥è¡¨å­—æ®µç±»å‹ä½¿ç”¨æœ‰å¾ˆå¤šé”™è¯¯ï¼Œæ”¹è¿›æ–¹æ¡ˆï¼š\n1.varcharç±»å‹æŒ‰éœ€è®¾ç½® å¹¶å°½é‡è®¾ä¸º not null\n2.æ—¥æœŸå­—æ®µæ”¹ä¸ºä½¿ç”¨dateæˆ–datetimeç±»å‹\n3.ageå¹´é¾„ å¯ç”¨tinyintï¼Œæˆ–è€…ä¸è¦æ­¤å­—æ®µ \n4.ä¸è¦åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å¤§å¯¹è±¡\n5.emp_idç±»å‹ä¸¤ä¸ªè¡¨ä¸ä¸€è‡´ï¼Œå»ºè®®éƒ½ç”¨intç±»å‹\n6.è–ªèµ„å»ºè®®ç”¨æ›´ç²¾ç¡®çš„decimalç±»å‹","like_count":0,"discussions":[{"author":{"id":3898827,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/7d/cb/fa3dae58.jpg","nickname":"ä¿Šè¾¾","note":"","ucode":"F79BF9651AD086","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650367,"discussion_content":"å›ç­”å¾—å¾ˆå®Œæ•´äº†ã€‚\næˆ‘å†åŠ ä¸€æ¡ï¼šä½¿ç”¨utf8mb4ä»£æ›¿utf8ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724854126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]}]}