{"id":159455,"title":"28 | æºç å‰–æï¼šå…³é—­æœåŠ¡","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":154016,"user_name":"Standly","can_delete":false,"product_type":"c3","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1574347948,"is_pvip":false,"replies":[{"id":59378,"content":"ä¼°è®¡è¿™ä¸ªå…³é—­å¤æ‚çš„ä½ éƒ½æ€€ç–‘å…³é—­æœ‰é‚£ä¹ˆç®€å•ä¹ˆï¼Ÿé—®çš„æˆ‘ä¸ç¦å›å¤´ç¿»äº†ä¸‹dubbo&#47;hadoopå’Œåšè¿‡çš„é¡¹ç›®çš„ä»£ç äº†ï¼Œè¿˜å¥½éƒ½æ˜¯ä¸‹é¢2å¥è¯ï¼š\nbossGroup.shutdownGracefully();\nworkerGroup.shutdownGracefully();\næ‰€ä»¥æ”¾å¿ƒä½¿ç”¨å§ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574517833,"ip_address":"","comment_id":154016,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆï¼Œé‚£ç”Ÿäº§ç¯å¢ƒæ€ä¹ˆå…³é—­nettyæœåŠ¡ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475353,"discussion_content":"ä¼°è®¡è¿™ä¸ªå…³é—­å¤æ‚çš„ä½ éƒ½æ€€ç–‘å…³é—­æœ‰é‚£ä¹ˆç®€å•ä¹ˆï¼Ÿé—®çš„æˆ‘ä¸ç¦å›å¤´ç¿»äº†ä¸‹dubbo/hadoopå’Œåšè¿‡çš„é¡¹ç›®çš„ä»£ç äº†ï¼Œè¿˜å¥½éƒ½æ˜¯ä¸‹é¢2å¥è¯ï¼š\nbossGroup.shutdownGracefully();\nworkerGroup.shutdownGracefully();\næ‰€ä»¥æ”¾å¿ƒä½¿ç”¨å§ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574517833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149735,"user_name":"Allen","can_delete":false,"product_type":"c3","uid":1211051,"ip_address":"","ucode":"B57ECE1E99A77D","user_header":"https://static001.geekbang.org/account/avatar/00/12/7a/ab/99bdf0ee.jpg","comment_is_top":false,"comment_ctime":1573359922,"is_pvip":false,"replies":[{"id":57932,"content":"è°¢è°¢è‚¯å®šï¼Œå°±æ˜¯æ™®é€šè¯ä¸æ ‡å‡†......","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573569914,"ip_address":"","comment_id":149735,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆçœŸå¥½","like_count":4,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473958,"discussion_content":"è°¢è°¢è‚¯å®šï¼Œå°±æ˜¯æ™®é€šè¯ä¸æ ‡å‡†......","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573569914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154473,"user_name":"é£ç¿”","can_delete":false,"product_type":"c3","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1574437526,"is_pvip":false,"replies":[{"id":59374,"content":"ç»™ä½ ä¸¾2ä¸ªä¾‹å­å•Šï¼š\n1 æ¯”å¦‚è¯·æ±‚åˆšå»ºç«‹çš„æ—¶å€™ï¼Œé‚£ä¸ªå»ºç«‹çš„è¯·æ±‚ï¼Œä¸æ˜¯è¦registerä¹ˆï¼Œä¾‹å¦‚æ³¨å†Œè¯»äº‹ä»¶ï¼Ÿé‚£ä¸ªregisterå°±æ˜¯ä¸€ä¸ªtaskã€‚\n2 ä½ çš„ä¸šåŠ¡å¦‚æœä¸ç‹¬ç«‹å‡ºä¸€ä¸ªçº¿ç¨‹æ± æ¥å¤„ç†ï¼Œä½ ä¸å°±å¤ç”¨IOçº¿ç¨‹äº†ä¹ˆï¼Ÿé‚£ä½ çš„ä¸šåŠ¡å¤„ç†è¿™ä¸ªäº‹æƒ…å°±å°è£…æˆtaskäº†\n3 å…¶ä»–æ‰€æœ‰çš„handlerï¼Œç±»ä¼¼ç¬¬äºŒç‚¹ï¼Œåªè¦å’Œioå¤ç”¨åœ¨ä¸€èµ·ï¼Œé‚£å°±æˆä¸€ä¸ªtaskæ¥æ‰§è¡Œäº†ã€‚æ‰€ä»¥æ‰æœ‰äº†ioå’Œæ™®é€šçš„taskçš„æ¯”ä¾‹ioratioä¸€è¯´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574515784,"ip_address":"","comment_id":154473,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆ ä¸€ç›´ä¸æ‡‚tasks é‡Œè¾¹åˆ°åº•è£…çš„ä»€ä¹ˆtaskï¼Œ æ­£å¸¸å®¢æˆ·å‘é€çš„è¯·æ±‚ ä¸ç®—taskå§ é‚£ä»€ä¹ˆä¼šæ”¾åœ¨taskqueueä¸­å‘¢","like_count":2,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475482,"discussion_content":"ç»™ä½ ä¸¾2ä¸ªä¾‹å­å•Šï¼š\n1 æ¯”å¦‚è¯·æ±‚åˆšå»ºç«‹çš„æ—¶å€™ï¼Œé‚£ä¸ªå»ºç«‹çš„è¯·æ±‚ï¼Œä¸æ˜¯è¦registerä¹ˆï¼Œä¾‹å¦‚æ³¨å†Œè¯»äº‹ä»¶ï¼Ÿé‚£ä¸ªregisterå°±æ˜¯ä¸€ä¸ªtaskã€‚\n2 ä½ çš„ä¸šåŠ¡å¦‚æœä¸ç‹¬ç«‹å‡ºä¸€ä¸ªçº¿ç¨‹æ± æ¥å¤„ç†ï¼Œä½ ä¸å°±å¤ç”¨IOçº¿ç¨‹äº†ä¹ˆï¼Ÿé‚£ä½ çš„ä¸šåŠ¡å¤„ç†è¿™ä¸ªäº‹æƒ…å°±å°è£…æˆtaskäº†\n3 å…¶ä»–æ‰€æœ‰çš„handlerï¼Œç±»ä¼¼ç¬¬äºŒç‚¹ï¼Œåªè¦å’Œioå¤ç”¨åœ¨ä¸€èµ·ï¼Œé‚£å°±æˆä¸€ä¸ªtaskæ¥æ‰§è¡Œäº†ã€‚æ‰€ä»¥æ‰æœ‰äº†ioå’Œæ™®é€šçš„taskçš„æ¯”ä¾‹ioratioä¸€è¯´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574515784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209208,"user_name":"æ­¦æ–‡æ–‡æ­¦","can_delete":false,"product_type":"c3","uid":1108924,"ip_address":"","ucode":"5288366646A15B","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/bc/6ccac4bb.jpg","comment_is_top":false,"comment_ctime":1587519908,"is_pvip":false,"replies":[{"id":78815,"content":"       è¯´æ˜¯ä¼˜é›…å…³é—­ï¼Œå…¶å®ä¸æ˜¯è¯´é•¿è¿æ¥å…³é—­ä¼˜é›…ï¼Œè€Œæ˜¯åœ¨å…³é—­æ—¶ï¼Œå¯¹æ­£åœ¨å¤„ç†è¯·æ±‚çš„ä¼˜é›…ã€‚\n       ç°åœ¨å¾ˆå¤šä¸éƒ½æ˜¯è“ç»¿éƒ¨ç½²ä¹ˆï¼Ÿéƒ¨ç½²ä¹‹å‰å…ˆæŠŠæµé‡åˆ‡èµ°ï¼Œè¿™æ ·åªè¦ä¼˜é›…å¤„ç†å½“å‰çš„å‰©ä½™è¯·æ±‚å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥ä¸€æ–¹é¢ä½ å¯ä»¥æŠŠå…³é—­çš„æ—¶é—´è°ƒå¤§ç‚¹ï¼Œè¿˜æ˜¯ä¸æ”¾å¿ƒçš„è¯ï¼Œå¯ä»¥åšä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯èƒ½å®æ—¶æŸ¥çœ‹è¿˜æœ‰å¤šå°‘è¯·æ±‚è¿˜åœ¨å¤„ç†ï¼Œå¦‚æœæ²¡æœ‰äº†ï¼Œå†å‡çº§ã€‚\n        å¦å¤–ä¸€ä¸ªæ–¹é¢ä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ªä¸šåŠ¡æœ¬èº«çš„å¯é æ€§è¦æ±‚ç­‰ç­‰ï¼Œå®é™…ä¸Šï¼Œå‡è®¾ä½ å°±æŠŠæŸä¸ªè¯·æ±‚ä¸¢äº†ï¼Œä½ çš„å®¢æˆ·ç«¯ä¸€èˆ¬éƒ½ä¼šåšé‡è¯•ï¼Œç­‰äºè‡ªåŠ¨è¡¥å¿äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1588055266,"ip_address":"","comment_id":209208,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"\nè€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹(ä¹‹å‰è¿™ä¸ªé—®é¢˜å‘åˆ°ä¸Šä¸€èŠ‚è¯¾å»äº†ï¼Œæ‰€ä»¥é‡æ–°å‘ä¸€éï¼Œä¸å¥½æ„æ€)ï¼Œæˆ‘ä»¬ç”¨nettyåšæœåŠ¡ç«¯ï¼Œå‰ç«¯è®¿é—®æœåŠ¡ç«¯æ˜¯ä»ä¸€ä¸ªè¿æ¥æ± ä¸­æ‹¿è¿æ¥ï¼Œç„¶åè®¿é—®nettyæœåŠ¡ç«¯ï¼Œä½†æ˜¯ç°åœ¨ç”Ÿäº§è¿ç»´æå‡ºè®©æˆ‘å®ç°ä¼˜é›…å…³é—­ï¼Œä¹Ÿå°±æ˜¯åœ¨æœåŠ¡ç«¯å‡çº§çš„æ—¶å€™è¦è®©å®¢æˆ·ç«¯æ— æ„ŸçŸ¥ï¼Œä½†æ˜¯ç”±äºè¿æ¥æ˜¯åŸºäºtcpçš„é•¿è¿æ¥ï¼Œå°±ç®—ç”¨gracefulShutdownä¹Ÿä¿è¯ä¸äº†å®¢æˆ·ç«¯æ— æ„ŸçŸ¥ï¼Œæ‚¨æœ‰ä»€ä¹ˆå¥½çš„å»ºè®®æ¥å®ç°è¿™ç§é•¿è¿æ¥çš„ä¼˜é›…å…³é—­å—ï¼Ÿæ„Ÿè°¢è€å¸ˆçš„æŒ‡æ•™","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492738,"discussion_content":"       è¯´æ˜¯ä¼˜é›…å…³é—­ï¼Œå…¶å®ä¸æ˜¯è¯´é•¿è¿æ¥å…³é—­ä¼˜é›…ï¼Œè€Œæ˜¯åœ¨å…³é—­æ—¶ï¼Œå¯¹æ­£åœ¨å¤„ç†è¯·æ±‚çš„ä¼˜é›…ã€‚\n       ç°åœ¨å¾ˆå¤šä¸éƒ½æ˜¯è“ç»¿éƒ¨ç½²ä¹ˆï¼Ÿéƒ¨ç½²ä¹‹å‰å…ˆæŠŠæµé‡åˆ‡èµ°ï¼Œè¿™æ ·åªè¦ä¼˜é›…å¤„ç†å½“å‰çš„å‰©ä½™è¯·æ±‚å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥ä¸€æ–¹é¢ä½ å¯ä»¥æŠŠå…³é—­çš„æ—¶é—´è°ƒå¤§ç‚¹ï¼Œè¿˜æ˜¯ä¸æ”¾å¿ƒçš„è¯ï¼Œå¯ä»¥åšä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯èƒ½å®æ—¶æŸ¥çœ‹è¿˜æœ‰å¤šå°‘è¯·æ±‚è¿˜åœ¨å¤„ç†ï¼Œå¦‚æœæ²¡æœ‰äº†ï¼Œå†å‡çº§ã€‚\n        å¦å¤–ä¸€ä¸ªæ–¹é¢ä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ªä¸šåŠ¡æœ¬èº«çš„å¯é æ€§è¦æ±‚ç­‰ç­‰ï¼Œå®é™…ä¸Šï¼Œå‡è®¾ä½ å°±æŠŠæŸä¸ªè¯·æ±‚ä¸¢äº†ï¼Œä½ çš„å®¢æˆ·ç«¯ä¸€èˆ¬éƒ½ä¼šåšé‡è¯•ï¼Œç­‰äºè‡ªåŠ¨è¡¥å¿äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588055266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152568,"user_name":"è°¨å®ˆ","can_delete":false,"product_type":"c3","uid":1402386,"ip_address":"","ucode":"01751DDA988C0A","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/12/a485354c.jpg","comment_is_top":false,"comment_ctime":1574043742,"is_pvip":false,"replies":[{"id":59050,"content":"æ˜¯çš„ï¼Œç°åœ¨æˆ‘è¿˜æ˜¯è¿·æƒ˜çš„ï¼Œå“ˆå“ˆï¼Œä¸è¿‡å¥½åœ¨ï¼Œæˆ‘å‘ç°nettyçš„é‚£äº›åˆ›å§‹äººä¹Ÿä¸æ˜¯éƒ½æ‡‚ï¼Œä¸€èµ·é˜¿Qäº†ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574300601,"ip_address":"","comment_id":152568,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"å§‹äºè¿·èŒ«ï¼Œç»ˆäºæ›´é«˜çº§çš„è¿·èŒ«ã€‚å“ˆå“ˆå“ˆï¼Œç›´æŒ‡ç¨‹åºå‘˜çš„ç»ˆææœ¬è´¨~","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474861,"discussion_content":"æ˜¯çš„ï¼Œç°åœ¨æˆ‘è¿˜æ˜¯è¿·æƒ˜çš„ï¼Œå“ˆå“ˆï¼Œä¸è¿‡å¥½åœ¨ï¼Œæˆ‘å‘ç°nettyçš„é‚£äº›åˆ›å§‹äººä¹Ÿä¸æ˜¯éƒ½æ‡‚ï¼Œä¸€èµ·é˜¿Qäº†ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574300601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191978,"user_name":"NoBody","can_delete":false,"product_type":"c3","uid":1173766,"ip_address":"","ucode":"72E1B4FCDA2469","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/06/038a9cea.jpg","comment_is_top":false,"comment_ctime":1584807396,"is_pvip":false,"replies":[{"id":78827,"content":"ä¸å®¹æ˜“ï¼Œå“ˆå“ˆï¼ŒåŠ æ²¹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1588056220,"ip_address":"","comment_id":191978,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"åšæŒç¡¬ç€å¤´çš®æ‰“å¡ï¼","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488304,"discussion_content":"ä¸å®¹æ˜“ï¼Œå“ˆå“ˆï¼ŒåŠ æ²¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588056220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175424,"user_name":"InfoQ_fbb8f3b4ab40","can_delete":false,"product_type":"c3","uid":1327125,"ip_address":"","ucode":"B3CF4BFCC8FFDA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/L9VVrMFqrzeT5bsQ7CYZdcHnyEVYa59apyp322eB5icysGXYgDqkeHZmH79ibiaJUShjvftoAmLeP6pxwhFff9ib8g/132","comment_is_top":false,"comment_ctime":1580716181,"is_pvip":false,"replies":[{"id":69674,"content":"è‚¯å®šä¸èƒ½ctrl+cï¼Œä¸ç„¶ä½ ä¸å°±è¦æœ‰äº§çº¿ç¯å¢ƒçš„æƒé™äº†ä¹ˆï¼Œè€Œä¸”é‚£ä¹ˆå¤šæœºå™¨æ€ä¹ˆæ“ä½œå°¼ã€‚\n\nä¸å®šè¦é…åˆRuntime.getRuntime().addShutdownHook()ï¼Œä¸€èˆ¬ä½¿ç”¨nettyéƒ½æ˜¯åšä¸€ä¸ªæ ¸å¿ƒæœåŠ¡ï¼Œè‡ªç„¶è¦ä¸»åŠ¨å…³é—­ï¼Œè€Œä¸æ˜¯ç­‰ç€jvmå…³é—­çš„æ—¶å€™å†å…³ï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨shutdownæ–¹æ³•å°±è¡Œäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1582005067,"ip_address":"","comment_id":175424,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"ç”Ÿäº§ç¯å¢ƒçš„nettyæœåŠ¡æ˜¯è¦é…åˆRuntime.getRuntime().addShutdownHook()ä½¿ç”¨å—ï¼Ÿå…³é—­çš„æ—¶å€™åªèƒ½ctrl+cè¿™æ ·ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482726,"discussion_content":"è‚¯å®šä¸èƒ½ctrl+cï¼Œä¸ç„¶ä½ ä¸å°±è¦æœ‰äº§çº¿ç¯å¢ƒçš„æƒé™äº†ä¹ˆï¼Œè€Œä¸”é‚£ä¹ˆå¤šæœºå™¨æ€ä¹ˆæ“ä½œå°¼ã€‚\n\nä¸å®šè¦é…åˆRuntime.getRuntime().addShutdownHook()ï¼Œä¸€èˆ¬ä½¿ç”¨nettyéƒ½æ˜¯åšä¸€ä¸ªæ ¸å¿ƒæœåŠ¡ï¼Œè‡ªç„¶è¦ä¸»åŠ¨å…³é—­ï¼Œè€Œä¸æ˜¯ç­‰ç€jvmå…³é—­çš„æ—¶å€™å†å…³ï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨shutdownæ–¹æ³•å°±è¡Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582005067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014023,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/79/07/2f418316.jpg","nickname":"æ°é¥­å“’","note":"","ucode":"0395069A050057","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392104,"discussion_content":"æˆ‘ä¹Ÿä¸èƒ½ç†è§£æ€ä¹ˆå…³é—­çš„ï¼Œè‚¯å®šæ˜¯æœ‰ä¸ªåœ°æ–¹è§¦å‘çš„ï¼Œä»£ç åˆèµ°ä¸åˆ°é‚£ä¸ªå…³é—­çš„åœ°æ–¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630834868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1108924,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/bc/6ccac4bb.jpg","nickname":"æ­¦æ–‡æ–‡æ­¦","note":"","ucode":"5288366646A15B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":242600,"discussion_content":"è€å¸ˆè¯´çš„ç›´æ¥è°ƒç”¨shutdownï¼Œè¿™ä¸ªæ˜¯è°çš„æ–¹æ³•å‘¢ï¼Ÿnettyçš„è¿˜æ˜¯jvmçš„å‘¢ï¼Ÿå“ªä¸ªåŒ…ä¸‹çš„å‘€ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587481505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161649,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c3","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1576285809,"is_pvip":false,"replies":[{"id":62116,"content":"è¿™ä¸ªé—®é¢˜æœ¬èº«å’Œnettyæ²¡æœ‰å…³ç³»ï¼Œè®¨è®ºçš„æ˜¯javaç¨‹åºçš„ä¼˜ç¾å…³é—­é—®é¢˜äº†ã€‚è¿™\nä¸¤ä¸ªä¸€èˆ¬éƒ½æ˜¯æ”¾ä¸€èµ·ç”¨çš„ï¼Œä¿¡å·æ˜¯ä¸ºäº†è§¦å‘ä½ æ¥å…³ï¼Œhookæ˜¯è®©å…³é—­çš„æ—¶å€™åˆ«å¿˜è®°æ¸…ç†ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯é…åˆï¼Œæ‰€ä»¥å¯ä»¥ç½®æ¢æˆåˆ«çš„æ–¹å¼ï¼Œæ¯”å¦‚å‡è®¾ä½ æ˜¯httpæœåŠ¡å™¨ï¼Œä½ å¯ä»¥ä¸ç”¨ä¿¡å·é‡è€Œç›´æ¥ç”¨http apiè°ƒç”¨æ¥è§¦å‘å…³é—­ï¼Œä¾‹å¦‚jennkins:\nhttp:&#47;&#47;&lt;jenkins.server&gt;&#47;safeExit","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1576725266,"ip_address":"","comment_id":161649,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆï¼Œç”Ÿäº§ç¯å¢ƒå…³é—­è¦è®¾è®¡å¾—ä¼˜é›…ç‚¹ï¼Œç”¨jdkè‡ªå¸¦çš„ShutdownHookï¼Œé€‚åˆä¸ï¼Ÿè¿˜æœ‰ç”¨æ³¨å†Œä¿¡å·é‡Signal,é€‚åˆä¸ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477797,"discussion_content":"è¿™ä¸ªé—®é¢˜æœ¬èº«å’Œnettyæ²¡æœ‰å…³ç³»ï¼Œè®¨è®ºçš„æ˜¯javaç¨‹åºçš„ä¼˜ç¾å…³é—­é—®é¢˜äº†ã€‚è¿™\nä¸¤ä¸ªä¸€èˆ¬éƒ½æ˜¯æ”¾ä¸€èµ·ç”¨çš„ï¼Œä¿¡å·æ˜¯ä¸ºäº†è§¦å‘ä½ æ¥å…³ï¼Œhookæ˜¯è®©å…³é—­çš„æ—¶å€™åˆ«å¿˜è®°æ¸…ç†ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯é…åˆï¼Œæ‰€ä»¥å¯ä»¥ç½®æ¢æˆåˆ«çš„æ–¹å¼ï¼Œæ¯”å¦‚å‡è®¾ä½ æ˜¯httpæœåŠ¡å™¨ï¼Œä½ å¯ä»¥ä¸ç”¨ä¿¡å·é‡è€Œç›´æ¥ç”¨http apiè°ƒç”¨æ¥è§¦å‘å…³é—­ï¼Œä¾‹å¦‚jennkins:\nhttp://&amp;lt;jenkins.server&amp;gt;/safeExit","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576725266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161587,"user_name":"å¯çˆ±çš„å°å¥¶ç‹—","can_delete":false,"product_type":"c3","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1576240111,"is_pvip":false,"replies":[{"id":61548,"content":"åªèƒ½è¯´å¤ªç‹ äº†ï¼ŒğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1576264497,"ip_address":"","comment_id":161587,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"æˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒç›´æ¥ctrl + cï¼Œè¿™ä¸ªä¼˜ç¾å…³é—­ä¼°è®¡æ²¡ç”¨å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477773,"discussion_content":"åªèƒ½è¯´å¤ªç‹ äº†ï¼ŒğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576264497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154468,"user_name":"é£ç¿”","can_delete":false,"product_type":"c3","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1574436703,"is_pvip":false,"replies":[{"id":62174,"content":"æ˜¯çš„ï¼Œchannelå…³é—­äº†ï¼Œè¿™å—é€»è¾‘ä¹ŸæŒºä¹±çš„ï¼Œè€Œä¸”ç»è¿‡å‡ æ¬¡æ”¹å˜ï¼Œè¿ç»´æŠ¤è€…çš„é‚£äº›äººä¹Ÿè¿·ç³Šçš„å¾ˆï¼Œå¤§ä½“æ€è·¯å°±æ˜¯ä¸ä¿è¯æ‰€æœ‰è¯·æ±‚äº†ï¼Œä¸ç„¶æ—¶é—´æ— æ³•ä¿è¯ï¼Œå½“ç„¶ä¹Ÿä¼šå°½é‡ã€‚æ‰€ä»¥ä¸è¦ä¾èµ–å®ƒçš„è¡Œä¸ºï¼Œè€Œæ˜¯æŒ‡æœ›å®¢æˆ·ç«¯è‡ªå·±å»é‡è¯•ä»€ä¹ˆçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1576744733,"ip_address":"","comment_id":154468,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆ åœ¨shutdowngraceflly ä¼šå…ˆå…³é—­æ‰€æœ‰çš„channel  é‚£è¿™ä¸ªæ—¶å€™æœ‰ä¸€ä¸ªchannelå¯¹åº”çš„nioeventloop è¿˜åœ¨å¤„ç† è¿˜æ²¡æœ‰æŠŠç»“æœå†™å›è¿™ä¸ªchannel é‚£ä¹ˆ  é‚£ä¹ˆå‘é€è¿™ä¸ªè¯·æ±‚çš„å®¢æˆ·å°±æ°¸è¿œæ”¶ä¸åˆ°è¿™ä¸ªè¯·æ±‚çš„å¤„ç†ç»“æœäº†æ˜¯å§","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475480,"discussion_content":"æ˜¯çš„ï¼Œchannelå…³é—­äº†ï¼Œè¿™å—é€»è¾‘ä¹ŸæŒºä¹±çš„ï¼Œè€Œä¸”ç»è¿‡å‡ æ¬¡æ”¹å˜ï¼Œè¿ç»´æŠ¤è€…çš„é‚£äº›äººä¹Ÿè¿·ç³Šçš„å¾ˆï¼Œå¤§ä½“æ€è·¯å°±æ˜¯ä¸ä¿è¯æ‰€æœ‰è¯·æ±‚äº†ï¼Œä¸ç„¶æ—¶é—´æ— æ³•ä¿è¯ï¼Œå½“ç„¶ä¹Ÿä¼šå°½é‡ã€‚æ‰€ä»¥ä¸è¦ä¾èµ–å®ƒçš„è¡Œä¸ºï¼Œè€Œæ˜¯æŒ‡æœ›å®¢æˆ·ç«¯è‡ªå·±å»é‡è¯•ä»€ä¹ˆçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576744733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154462,"user_name":"é£ç¿”","can_delete":false,"product_type":"c3","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1574435685,"is_pvip":false,"replies":[{"id":59375,"content":"ä½ æœåŠ¡è¦ä¸Šæ–°ç‰ˆæœ¬çš„æ—¶å€™ï¼Œæˆ–è€…ä½ çš„è½¯ç¡¬ä»¶å‡çº§çš„æ—¶å€™ï¼Œæ¯”å¦‚å‡çº§os,å‡çº§æ›´å¥½çš„æœºå™¨ï¼Œä½ éƒ½éœ€è¦é‡å¯çš„å¯¹ä¸å¯¹ï¼Ÿé‡å¯ï¼Œè‡ªç„¶æƒ³ä¼˜ç¾ç‚¹ï¼Œä¸èƒ½ç›´æ¥æ‹”æ’åº§å§ï¼Œå“ˆå“ˆï¼Œæ‰€ä»¥è‚¯å®šæƒ³ç€ä¼˜ç¾å…³é—­çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574516161,"ip_address":"","comment_id":154462,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"è¯è¯´ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘ä»¬ä¼šå…³é—­nettyå‘¢ï¼Œ æˆ‘è§‰å¾—å¤§éƒ¨åˆ†æƒ…å†µ æˆ‘ä»¬æœåŠ¡å¯åŠ¨èµ·æ¥ æˆ‘ä»¬å¸Œæœ›ä»–ä¸€ç›´æ¥å—å¤„ç†è¯·æ±‚ å› æ­¤ å¤§éƒ¨åˆ†æƒ…å†µ æˆ‘ä»¬æ˜¯æ°¸è¿œä¸è°ƒç”¨shutdowngracefully å¯¹å§","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475477,"discussion_content":"ä½ æœåŠ¡è¦ä¸Šæ–°ç‰ˆæœ¬çš„æ—¶å€™ï¼Œæˆ–è€…ä½ çš„è½¯ç¡¬ä»¶å‡çº§çš„æ—¶å€™ï¼Œæ¯”å¦‚å‡çº§os,å‡çº§æ›´å¥½çš„æœºå™¨ï¼Œä½ éƒ½éœ€è¦é‡å¯çš„å¯¹ä¸å¯¹ï¼Ÿé‡å¯ï¼Œè‡ªç„¶æƒ³ä¼˜ç¾ç‚¹ï¼Œä¸èƒ½ç›´æ¥æ‹”æ’åº§å§ï¼Œå“ˆå“ˆï¼Œæ‰€ä»¥è‚¯å®šæƒ³ç€ä¼˜ç¾å…³é—­çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574516161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152885,"user_name":"witluo","can_delete":false,"product_type":"c3","uid":1443117,"ip_address":"","ucode":"3D9608C3DDDD95","user_header":"","comment_is_top":false,"comment_ctime":1574096378,"is_pvip":false,"replies":[{"id":59046,"content":"è°¢è°¢ï¼Œæ„Ÿè§‰æœ‰çš„æ—¶å€™åœ¨â€œæ³¡â€ä»£ç æ„Ÿè§‰ï¼Œè¿‡ä¸€æ®µæ—¶é—´çœ‹çœ‹ï¼Œç„¶ååˆèƒ½å¤šç†è§£ä¸€äº›ç»†èŠ‚ï¼Œå“ˆå“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574300353,"ip_address":"","comment_id":152885,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"å§‹äºè¿·èŒ«ï¼Œç»ˆäºæ›´é«˜å±‚æ¬¡çš„è¿·èŒ«ï¼›æˆ–è€…åº”è¯¥è¯´ï¼Œè¿›åŒ–åˆ°æ›´é«˜å±‚æ¬¡çš„è¿·èŒ«ï¼Œå› ä¸ºè™½ç„¶è¿·èŒ«ï¼Œä½†æ˜¯è¿˜è¦ä¸åœçš„è¿½ã€‚æ–­æ–­ç»­ç»­ç ”ç©¶nettyå¿«ä¸€å¹´äº†ï¼Œæ„Ÿè°¢è€å¸ˆå¸¦æ¥äº†ä¸åŒè§‚ç‚¹çš„æºç è§£è¯»ã€‚","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474976,"discussion_content":"è°¢è°¢ï¼Œæ„Ÿè§‰æœ‰çš„æ—¶å€™åœ¨â€œæ³¡â€ä»£ç æ„Ÿè§‰ï¼Œè¿‡ä¸€æ®µæ—¶é—´çœ‹çœ‹ï¼Œç„¶ååˆèƒ½å¤šç†è§£ä¸€äº›ç»†èŠ‚ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574300353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149661,"user_name":"æ¢¦å…¸","can_delete":false,"product_type":"c3","uid":1203920,"ip_address":"","ucode":"0A6F91068A13E8","user_header":"https://static001.geekbang.org/account/avatar/00/12/5e/d0/e676ac19.jpg","comment_is_top":false,"comment_ctime":1573308490,"is_pvip":false,"replies":[{"id":59075,"content":"è¯»äº†ä¸‰éä½ çš„è¡¨è¿°ï¼Œæ²¡æœ‰è§‰å¾—ä½ å“ªé‡Œè¯´çš„ä¸å¯¹ï¼Œå’Œæˆ‘ç†è§£å·®ä¸å¤šã€‚å“ˆå“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574304112,"ip_address":"","comment_id":149661,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"å…³äºå¹³é™å‘¨æœŸï¼ˆquiet periodï¼‰çš„åˆ†æï¼Œè¯·æŒ‡æ•™\n1. cancelScheduledTasks()ï¼ŒScheduledTaskèƒ½å–æ¶ˆçš„è¯æ‰§è¡Œå–æ¶ˆ\n2. runAllTasks()ï¼ŒScheduledTaskèƒ½æ‰§è¡Œçš„ä¹Ÿæ‰§è¡Œäº†\nå³Nettyå†…æ ¸äº§ç”Ÿçš„è°ƒåº¦ä»»åŠ¡éƒ½åœ¨EventLoopæœ€åçš„ç”Ÿå‘½æ¶ˆæ•£è¿‡ç¨‹ä¸­è¢«å¤„ç†æ‰äº†ï¼Œ\nä½†æ˜¯å¯¹äºä¸šåŠ¡ç³»ç»Ÿè€Œè¨€ï¼Œè¿˜æœ‰ç”¨æˆ·æ‰©å±•ï¼ˆè‡ªå®šä¹‰å¼‚æ­¥ä¸šåŠ¡å¤„ç†å±‚ï¼Œè‡ªå®šä¹‰Handleræ‰©å±•ç­‰ï¼‰ï¼Œä»–ä»¬å‡å¯ä»¥é€šè¿‡executeè°ƒç”¨ï¼Œæäº¤é¢å¤–çš„è°ƒåº¦ä»»åŠ¡ï¼Œè¿™äº›è°ƒåº¦ä»»åŠ¡å¯¹äºå†…æ ¸æ¥è¯´ï¼Œéœ€è¦ç»™äºˆä¸€å®šæ—¶é—´çš„è§‚å¯Ÿæ—¶é—´ï¼Œå³å¹³é™å‘¨æœŸï¼ˆquiet periodï¼‰ï¼Œå¦‚æœ‰è¿™æ ·çš„è°ƒåº¦ä»»åŠ¡å‘ç”Ÿæ‰§è¡Œï¼Œå°±å†æ¬¡è§‚å¯Ÿä¸€æ®µæ—¶é—´ã€‚åœ¨ç”Ÿå‘½çš„æœ€åé˜¶æ®µï¼Œå²æœˆé™å¥½ï¼Œä¸å¿…é‚£ä¹ˆåŠ³å¿ƒåŠ³åŠ›äº†ï¼Œç¡100æ¯«ç§’èµ·æ¥å†æ¥è§‚å¯Ÿå°±å¥½ï¼Œï¼Œï¼Œ","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473932,"discussion_content":"è¯»äº†ä¸‰éä½ çš„è¡¨è¿°ï¼Œæ²¡æœ‰è§‰å¾—ä½ å“ªé‡Œè¯´çš„ä¸å¯¹ï¼Œå’Œæˆ‘ç†è§£å·®ä¸å¤šã€‚å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574304112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258569,"user_name":"å†¬æ¸æš–","can_delete":false,"product_type":"c3","uid":1586800,"ip_address":"","ucode":"907E41AAE9A36C","user_header":"https://static001.geekbang.org/account/avatar/00/18/36/70/00122b24.jpg","comment_is_top":false,"comment_ctime":1604485715,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"å…³é—­æœåŠ¡è‡ªç„¶ä¸èƒ½åƒæ™®é€šçš„kill -9 ä¸€æ ·ç®€å•ç²—æš´\nå…¸å‹çš„æ‰“è´¥ä»—ï¼Œé¢†å¯¼å…ˆè·‘ï¼Œæ‰“å·¥ä»”åé¢è·‘ã€‚å¥½å¤„æ˜¯è€æ¿è·‘äº†ï¼Œæ²¡æœ‰æ–°éœ€æ±‚è¿›æ¥äº†ï¼Œæ‰€æœ‰äººä¹Ÿä¸ç”¨æ‹…å¿ƒäº†æ”¹éœ€æ±‚äº†\nå…ˆbossGroup.shutdownGracefully();\nå†workerGroup.shutdownGracefully();\n\nå…³é—­ä¸»è¦æ˜¯å§NioEventLoopçš„stateæ ‡è¯†ç¬¦ä¿®æ”¹ï¼Œå› ä¸ºNioEventLoopæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œå¾ªç¯çœ‹åˆ°è‡ªå·±çš„çŠ¶æ€ä¸ºå…³é—­ï¼Œä¹Ÿä¼šæ‰§è¡Œå…³é—­è‡ªå·±çš„å‘½ä»¤äº†\nè‡ªå·±å…³é—­è‡ªå·±çš„æµç¨‹ä¸ºï¼šå…ˆçœ‹çœ‹è‡ªå·±èƒ½ä¸èƒ½å…³--ã€‹å»æ‰§è¡Œé¢„è®¾å¥½çš„task&#47;hookæˆ–è€…è¿˜åœ¨æ‰§è¡Œçš„å®šæ—¶ä»»åŠ¡ï¼Œå› ä¸ºä½ éƒ½å…³é—­äº†æ‰€æœ‰çš„channelï¼Œæ˜¯ä¸ä¼šæœ‰æ–°çš„äº‹ä»¶è¿›æ¥çš„ã€‚æœ¬èº«hooké’©å­å°±æ˜¯åœ¨ç¨‹åºé€€å‡ºæ—¶å€™åº”è¯¥åšçš„åŠ¨ä½œï¼Œå½“ç„¶å¦‚æœè¶…è¿‡ä¸€ä¸ªç‰¹å®šæ—¶é—´é˜€å€¼è¿˜æ²¡æœ‰æå®Œçš„è¯ï¼Œåˆ™æ¼ç¾æˆæ€’ç»™ä½ å¼ºåˆ¶å…³é—­ï¼Œå¦‚æœä½ æ²¡æœ‰è¶…è¿‡è¿™ä¸ªæ—¶é—´çš„è¯ï¼Œç­‰ä½ ä¸€ä¸‹ï¼Œç­‰åˆ°ä½ å…¨éƒ¨æå®Œæˆ–è€…æˆ‘ä¸è€çƒ¦(æ—¶é—´é˜€å€¼)çš„æ—¶å€™\nè‡³äºçœ‹æœ‰æ²¡æœ‰taskæ‰§è¡Œï¼Œåˆ™æ˜¯taskæ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™ä¼šè®°å½•ä¸€ä¸‹æ—¶é—´ï¼Œç±»ä¼¼äºè®¡æ•°å™¨\n\nå…³é—­æœåŠ¡çš„æœ¬è´¨ï¼š\nå…³é—­æ‰€æœ‰è¿æ¥å’Œselectorï¼Œselectoræ˜¯å…ˆå…³channelï¼Œå†æŠŠchannelçš„keyå…¨éƒ¨æ‹¿å‡ºæ¥å’Œchannelè§£ç»‘æ‰ï¼Œç„¶åæ‰æ˜¯å…³æ‰è‡ªå·±ï¼Œæœ€åå…³æ‰æ‰€æœ‰çš„çº¿ç¨‹(é€€å‡ºæ‰€æœ‰çš„foræ­»å¾ªç¯)\n\nä¼˜é›…ï¼šå…¶å®å°±æ˜¯ä¸å’Œkill -9ä¸€æ ·ç²—ç²’åº¦çš„å…³æ‰ã€‚ç±»ä¼¼ç”µè„‘å…³æœºï¼Œå…ˆå…³aç¨‹åºï¼Œå†å…³bç¨‹åºï¼Œæœ€åæ‰å…³æœºã€‚killæ˜¯ç›´æ¥å¼ºåˆ¶å…³æœº\nå¯æ§ï¼šå…¶å®å°±æ˜¯ç»™äº†ä½ ä¸€ä¸ªæ‰§è¡Œæœ€å¤§æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ç»™ä½ å¼ºåˆ¶å…³æ‰ï¼Œwindowså…³æœºä¹Ÿæœ‰ç±»ä¼¼çš„\n","like_count":4},{"had_liked":false,"id":266505,"user_name":"Allen","can_delete":false,"product_type":"c3","uid":1162307,"ip_address":"","ucode":"0E0D44ABB35DBB","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/43/11acdc02.jpg","comment_is_top":false,"comment_ctime":1607358289,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"æŠ“ä½è¦ç‚¹Â·çœŸï¼Œè®²çš„çœŸå¥½ï¼Œè¿™ç« çš„ä¸ƒå¤§ä¸»çº¿æˆ‘è¦å¥½å¥½å¤šçœ‹å‡ éï¼","like_count":1},{"had_liked":false,"id":156763,"user_name":"ç²˜è±†åŒ…","can_delete":false,"product_type":"c3","uid":1228403,"ip_address":"","ucode":"5888890A217C8B","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/73/0a274128.jpg","comment_is_top":false,"comment_ctime":1574950384,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"å§‹äºè¿·æƒ˜ï¼Œç»ˆäºæ›´å¥½å±‚æ¬¡çš„è¿·æƒ˜ï¼ğŸ˜‚","like_count":1},{"had_liked":false,"id":351621,"user_name":"t0ugh","can_delete":false,"product_type":"c3","uid":2115346,"ip_address":"","ucode":"52BCC9A0B2610C","user_header":"https://static001.geekbang.org/account/avatar/00/20/47/12/ec68d04f.jpg","comment_is_top":false,"comment_ctime":1658021977,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œ22å¹´å¤å¤©æ‰¾å·¥ä½œä¹‹å‰åˆ·äº†è¿™ä¸ªè§†é¢‘ä¸€ç›´åˆ°è¿™ä¸€ç« ï¼Œæ”¶è·å¾ˆå¤šã€‚","like_count":0},{"had_liked":false,"id":347626,"user_name":"@","can_delete":false,"product_type":"c3","uid":2674662,"ip_address":"","ucode":"6DC70D2F532A7C","user_header":"https://static001.geekbang.org/account/avatar/00/28/cf/e6/a0b06992.jpg","comment_is_top":false,"comment_ctime":1654240604,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"åŠ æ²¹","like_count":0},{"had_liked":false,"id":331997,"user_name":"flying eagle","can_delete":false,"product_type":"c3","uid":1155616,"ip_address":"","ucode":"1020359D893C04","user_header":"https://static001.geekbang.org/account/avatar/00/11/a2/20/7549ff2b.jpg","comment_is_top":false,"comment_ctime":1642953003,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"è€å¸ˆè¿™ä¸€ç« èŠ‚è®²çš„çœŸå¥½ï¼Œä» netty æœåŠ¡çš„æ•´ä¸ªä¸»çº¿è¿‡ç¨‹è§¦å‘ï¼Œä¸€æ­¥æ­¥è®²è§£ï¼Œå—ç›ŠåŒªæµ…ï¼Œè™½ç„¶æºç è¿˜çœ‹ä¸æ‡‚ï¼Œä½†æ˜¯æ•´ä¸ªåŸç†æœ‰äº†å¤§è‡´çš„æŒæ¡","like_count":0},{"had_liked":false,"id":286862,"user_name":"è‰ºè¶…(é²é¸£)","can_delete":false,"product_type":"c3","uid":1029436,"ip_address":"","ucode":"7F749FA543E0F1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b5/3c/967d7291.jpg","comment_is_top":false,"comment_ctime":1617637414,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"è¿½åˆ°è¿™é‡Œï¼Œæœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å›°æƒ‘å°±æ˜¯å„ä¸ªç±»çš„èŒä¸šï¼Œæ¯”å¦‚pipelineï¼Œhandlerç­‰ï¼Œå¦‚æœåŠ ä¸€èŠ‚å°±æ›´å¥½äº†","like_count":0},{"had_liked":false,"id":242100,"user_name":"dododoç³–","can_delete":false,"product_type":"c3","uid":1730835,"ip_address":"","ucode":"EFD5D7D5FD9790","user_header":"https://static001.geekbang.org/account/avatar/00/1a/69/13/31ae93c0.jpg","comment_is_top":false,"comment_ctime":1597589752,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100036701,"comment_content":"å§‹äºè¿·èŒ«ç»ˆäºæ›´é«˜çš„è¿·èŒ«ï¼Œè€å¸ˆçš„é‡‘å¥çœŸå¤šå•Šï¼Œå“ˆå“ˆå“ˆå“ˆ","like_count":0}]}