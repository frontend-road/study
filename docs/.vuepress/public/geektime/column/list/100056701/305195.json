{"id":305195,"title":"åŠ é¤ï¼ˆäº”ï¼‰ | Redisæœ‰å“ªäº›å¥½ç”¨çš„è¿ç»´å·¥å…·ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å¾·é’§ã€‚</p><p>ä»Šå¤©çš„åŠ é¤ï¼Œæˆ‘æ¥ç»™ä½ åˆ†äº«ä¸€äº›å¥½ç”¨çš„Redisè¿ç»´å·¥å…·ã€‚</p><p>æˆ‘ä»¬åœ¨åº”ç”¨Redisæ—¶ï¼Œç»å¸¸ä¼šé¢ä¸´çš„è¿ç»´å·¥ä½œï¼ŒåŒ…æ‹¬Redisçš„è¿è¡ŒçŠ¶æ€ç›‘æ§ï¼Œæ•°æ®è¿ç§»ï¼Œä¸»ä»é›†ç¾¤ã€åˆ‡ç‰‡é›†ç¾¤çš„éƒ¨ç½²å’Œè¿ç»´ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä»è¿™ä¸‰ä¸ªæ–¹é¢ï¼Œç»™ä½ ä»‹ç»ä¸€äº›å·¥å…·ã€‚æˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸‹ç›‘æ§Rediså®æ—¶è¿è¡ŒçŠ¶æ€çš„å·¥å…·ï¼Œè¿™äº›å·¥å…·éƒ½ç”¨åˆ°äº†Redisæä¾›çš„ä¸€ä¸ªç›‘æ§å‘½ä»¤ï¼šINFOã€‚</p><h2>æœ€åŸºæœ¬çš„ç›‘æ§å‘½ä»¤ï¼šINFOå‘½ä»¤</h2><p><strong>Redisæœ¬èº«æä¾›çš„INFOå‘½ä»¤ä¼šè¿”å›ä¸°å¯Œçš„å®ä¾‹è¿è¡Œç›‘æ§ä¿¡æ¯ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯Redisç›‘æ§å·¥å…·çš„åŸºç¡€</strong>ã€‚</p><p>INFOå‘½ä»¤åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°sectionï¼Œè¿™ä¸ªå‚æ•°çš„å–å€¼æœ‰å¥½å‡ ç§ï¼Œç›¸åº”çš„ï¼ŒINFOå‘½ä»¤ä¹Ÿä¼šè¿”å›ä¸åŒç±»å‹çš„ç›‘æ§ä¿¡æ¯ã€‚æˆ‘æŠŠINFOå‘½ä»¤çš„è¿”å›ä¿¡æ¯åˆ†æˆ5å¤§ç±»ï¼Œå…¶ä¸­ï¼Œæœ‰çš„ç±»åˆ«å½“ä¸­åˆåŒ…å«äº†ä¸åŒçš„ç›‘æ§å†…å®¹ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8f/a8/8fb2ef487fd9b7073fd062d480b220a8.jpg?wh=2753*1576\" alt=\"\"></p><p>åœ¨ç›‘æ§Redisè¿è¡ŒçŠ¶æ€æ—¶ï¼ŒINFOå‘½ä»¤è¿”å›çš„ç»“æœéå¸¸æœ‰ç”¨ã€‚å¦‚æœä½ æƒ³äº†è§£INFOå‘½ä»¤çš„æ‰€æœ‰å‚æ•°è¿”å›ç»“æœçš„è¯¦ç»†å«ä¹‰ï¼Œå¯ä»¥æŸ¥çœ‹Redis<a href=\"https://redis.io/commands/info\">å®˜ç½‘</a>çš„ä»‹ç»ã€‚è¿™é‡Œï¼Œæˆ‘ç»™ä½ æå‡ ä¸ªè¿ç»´æ—¶éœ€è¦é‡ç‚¹å…³æ³¨çš„å‚æ•°ä»¥åŠå®ƒä»¬çš„é‡è¦è¿”å›ç»“æœã€‚</p><p>é¦–å…ˆï¼Œ<strong>æ— è®ºä½ æ˜¯è¿è¡Œå•å®ä¾‹æˆ–æ˜¯é›†ç¾¤ï¼Œæˆ‘å»ºè®®ä½ é‡ç‚¹å…³æ³¨ä¸€ä¸‹statã€commandstatã€cpuå’Œmemoryè¿™å››ä¸ªå‚æ•°çš„è¿”å›ç»“æœ</strong>ï¼Œè¿™é‡Œé¢åŒ…å«äº†å‘½ä»¤çš„æ‰§è¡Œæƒ…å†µï¼ˆæ¯”å¦‚å‘½ä»¤çš„æ‰§è¡Œæ¬¡æ•°å’Œæ‰§è¡Œæ—¶é—´ã€å‘½ä»¤ä½¿ç”¨çš„CPUèµ„æºï¼‰ï¼Œå†…å­˜èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼ˆæ¯”å¦‚å†…å­˜å·²ä½¿ç”¨é‡ã€å†…å­˜ç¢ç‰‡ç‡ï¼‰ï¼ŒCPUèµ„æºä½¿ç”¨æƒ…å†µç­‰ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­å®ä¾‹çš„è¿è¡ŒçŠ¶æ€å’Œèµ„æºæ¶ˆè€—æƒ…å†µã€‚</p><!-- [[[read_end]]] --><p>å¦å¤–ï¼Œå½“ä½ å¯ç”¨RDBæˆ–AOFåŠŸèƒ½æ—¶ï¼Œä½ å°±éœ€è¦é‡ç‚¹å…³æ³¨ä¸‹persistenceå‚æ•°çš„è¿”å›ç»“æœï¼Œä½ å¯ä»¥é€šè¿‡å®ƒæŸ¥çœ‹åˆ°RDBæˆ–è€…AOFçš„æ‰§è¡Œæƒ…å†µã€‚</p><p>å¦‚æœä½ åœ¨ä½¿ç”¨ä¸»ä»é›†ç¾¤ï¼Œå°±è¦é‡ç‚¹å…³æ³¨ä¸‹replicationå‚æ•°çš„è¿”å›ç»“æœï¼Œè¿™é‡Œé¢åŒ…å«äº†ä¸»ä»åŒæ­¥çš„å®æ—¶çŠ¶æ€ã€‚</p><p>ä¸è¿‡ï¼ŒINFOå‘½ä»¤åªæ˜¯æä¾›äº†æ–‡æœ¬å½¢å¼çš„ç›‘æ§ç»“æœï¼Œå¹¶æ²¡æœ‰å¯è§†åŒ–ï¼Œæ‰€ä»¥ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹å¼€æºå·¥å…·ï¼Œå°†INFOå‘½ä»¤çš„è¿”å›ç»“æœå¯è§†åŒ–ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘è¦è®²çš„Prometheusï¼Œå°±å¯ä»¥é€šè¿‡æ’ä»¶å°†Redisçš„ç»Ÿè®¡ç»“æœå¯è§†åŒ–ã€‚</p><h2>é¢å‘Prometheusçš„Redis-exporterç›‘æ§</h2><p><a href=\"https://prometheus.io/\">Prometheus</a>æ˜¯ä¸€å¥—å¼€æºçš„ç³»ç»Ÿç›‘æ§æŠ¥è­¦æ¡†æ¶ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ä»è¢«ç›‘æ§ç³»ç»Ÿä¸­æ‹‰å–ç›‘æ§æ•°æ®ï¼Œç»“åˆ<a href=\"https://grafana.com/\">Grafana</a>å·¥å…·ï¼Œè¿›è¡Œå¯è§†åŒ–å±•ç¤ºã€‚è€Œä¸”ï¼Œç›‘æ§æ•°æ®å¯ä»¥ä¿å­˜åˆ°æ—¶åºæ•°æ®åº“ä¸­ï¼Œä»¥ä¾¿è¿ç»´äººå‘˜è¿›è¡Œå†å²æŸ¥è¯¢ã€‚åŒæ—¶ï¼ŒPrometheusä¼šæ£€æµ‹ç³»ç»Ÿçš„ç›‘æ§æŒ‡æ ‡æ˜¯å¦è¶…è¿‡äº†é¢„è®¾çš„é˜ˆå€¼ï¼Œä¸€æ—¦è¶…è¿‡é˜ˆå€¼ï¼ŒPrometheuså°±ä¼šè§¦å‘æŠ¥è­¦ã€‚</p><p>å¯¹äºç³»ç»Ÿçš„æ—¥å¸¸è¿ç»´ç®¡ç†æ¥è¯´ï¼Œè¿™äº›åŠŸèƒ½æ˜¯éå¸¸é‡è¦çš„ã€‚è€ŒPrometheuså·²ç»å®ç°äº†ä½¿ç”¨è¿™äº›åŠŸèƒ½çš„å·¥å…·æ¡†æ¶ã€‚æˆ‘ä»¬åªè¦èƒ½ä»è¢«ç›‘æ§ç³»ç»Ÿä¸­è·å–åˆ°ç›‘æ§æ•°æ®ï¼Œå°±å¯ä»¥ç”¨Prometheusæ¥å®ç°è¿ç»´ç›‘æ§ã€‚</p><p>Prometheusæ­£å¥½æä¾›äº†æ’ä»¶åŠŸèƒ½æ¥å®ç°å¯¹ä¸€ä¸ªç³»ç»Ÿçš„ç›‘æ§ï¼Œæˆ‘ä»¬æŠŠæ’ä»¶ç§°ä¸ºexporterï¼Œæ¯ä¸€ä¸ªexporterå®é™…æ˜¯ä¸€ä¸ªé‡‡é›†ç›‘æ§æ•°æ®çš„ç»„ä»¶ã€‚exporteré‡‡é›†çš„æ•°æ®æ ¼å¼ç¬¦åˆPrometheusçš„è¦æ±‚ï¼ŒPrometheusè·å–è¿™äº›æ•°æ®åï¼Œå°±å¯ä»¥è¿›è¡Œå±•ç¤ºå’Œä¿å­˜äº†ã€‚</p><p><a href=\"https://github.com/oliver006/redis_exporter\">Redis-exporter</a>å°±æ˜¯ç”¨æ¥ç›‘æ§Redisçš„ï¼Œå®ƒå°†INFOå‘½ä»¤ç›‘æ§åˆ°çš„è¿è¡ŒçŠ¶æ€å’Œå„ç§ç»Ÿè®¡ä¿¡æ¯æä¾›ç»™Prometheusï¼Œä»è€Œè¿›è¡Œå¯è§†åŒ–å±•ç¤ºå’ŒæŠ¥è­¦è®¾ç½®ã€‚ç›®å‰ï¼ŒRedis-exporterå¯ä»¥æ”¯æŒRedis 2.0è‡³6.0ç‰ˆæœ¬ï¼Œé€‚ç”¨èŒƒå›´æ¯”è¾ƒå¹¿ã€‚</p><p>é™¤äº†è·å–Rediså®ä¾‹çš„è¿è¡ŒçŠ¶æ€ï¼ŒRedis-exporterè¿˜å¯ä»¥ç›‘æ§é”®å€¼å¯¹çš„å¤§å°å’Œé›†åˆç±»å‹æ•°æ®çš„å…ƒç´ ä¸ªæ•°ï¼Œè¿™ä¸ªå¯ä»¥åœ¨è¿è¡ŒRedis-exporteræ—¶ï¼Œä½¿ç”¨check-keysçš„å‘½ä»¤è¡Œé€‰é¡¹æ¥å®ç°ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å‘ä¸€ä¸ªLuaè„šæœ¬ï¼Œå®šåˆ¶åŒ–é‡‡é›†æ‰€éœ€ç›‘æ§çš„æ•°æ®ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨scriptså‘½ä»¤è¡Œé€‰é¡¹ï¼Œè®©Redis-exporterè¿è¡Œè¿™ä¸ªç‰¹å®šçš„è„šæœ¬ï¼Œä»è€Œå¯ä»¥æ»¡è¶³ä¸šåŠ¡å±‚çš„å¤šæ ·åŒ–ç›‘æ§éœ€æ±‚ã€‚</p><p>æœ€åï¼Œæˆ‘è¿˜æƒ³å†ç»™ä½ åˆ†äº«ä¸¤ä¸ªå°å·¥å…·ï¼š<a href=\"https://github.com/junegunn/redis-stat\">redis-stat</a>å’Œ<a href=\"https://github.com/snakeliwei/RedisLive\">Redis Live</a>ã€‚è·ŸRedis-exporterç›¸æ¯”ï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯è½»é‡çº§çš„ç›‘æ§å·¥å…·ã€‚å®ƒä»¬åˆ†åˆ«æ˜¯ç”¨Rubyå’ŒPythonå¼€å‘çš„ï¼Œä¹Ÿæ˜¯å°†INFOå‘½ä»¤æä¾›çš„å®ä¾‹è¿è¡ŒçŠ¶æ€ä¿¡æ¯å¯è§†åŒ–å±•ç¤ºã€‚è™½ç„¶è¿™ä¸¤ä¸ªå·¥å…·ç›®å‰å·²ç»å¾ˆå°‘æ›´æ–°äº†ï¼Œä¸è¿‡ï¼Œå¦‚æœä½ æƒ³è‡ªè¡Œå¼€å‘Redisç›‘æ§å·¥å…·ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸é”™çš„å‚è€ƒã€‚</p><p>é™¤äº†ç›‘æ§Redisçš„è¿è¡ŒçŠ¶æ€ï¼Œè¿˜æœ‰ä¸€ä¸ªå¸¸è§çš„è¿ç»´ä»»åŠ¡å°±æ˜¯æ•°æ®è¿ç§»ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥å­¦ä¹ ä¸‹æ•°æ®è¿ç§»çš„å·¥å…·ã€‚</p><h2>æ•°æ®è¿ç§»å·¥å…·Redis-shake</h2><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„å®ä¾‹é—´è¿ç§»æ•°æ®ã€‚ç›®å‰ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªæ•°æ®è¿ç§»å·¥å…·æ˜¯<a href=\"https://github.com/aliyun/redis-shake\">Redis-shake</a>ï¼Œè¿™æ˜¯é˜¿é‡Œäº‘Rediså’ŒMongoDBå›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªç”¨äºRedisæ•°æ®åŒæ­¥çš„å·¥å…·ã€‚</p><p>Redis-shakeçš„åŸºæœ¬è¿è¡ŒåŸç†ï¼Œæ˜¯å…ˆå¯åŠ¨Redis-shakeè¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹æ¨¡æ‹Ÿäº†ä¸€ä¸ªRediså®ä¾‹ã€‚ç„¶åï¼ŒRedis-shakeè¿›ç¨‹å’Œæ•°æ®è¿å‡ºçš„æºå®ä¾‹è¿›è¡Œæ•°æ®çš„å…¨é‡åŒæ­¥ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹å’ŒRedisä¸»ä»å®ä¾‹çš„å…¨é‡åŒæ­¥æ˜¯ç±»ä¼¼çš„ã€‚</p><p>æºå®ä¾‹ç›¸å½“äºä¸»åº“ï¼ŒRedis-shakeç›¸å½“äºä»åº“ï¼Œæºå®ä¾‹å…ˆæŠŠRDBæ–‡ä»¶ä¼ è¾“ç»™Redis-shakeï¼ŒRedis-shakeä¼šæŠŠRDBæ–‡ä»¶å‘é€ç»™ç›®çš„å®ä¾‹ã€‚æ¥ç€ï¼Œæºå®ä¾‹ä¼šå†æŠŠå¢é‡å‘½ä»¤å‘é€ç»™Redis-shakeï¼ŒRedis-shakeè´Ÿè´£æŠŠè¿™äº›å¢é‡å‘½ä»¤å†åŒæ­¥ç»™ç›®çš„å®ä¾‹ã€‚</p><p>ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†Redis-shakeè¿›è¡Œæ•°æ®è¿ç§»çš„è¿‡ç¨‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/02/5b/027f6ae0276d483650ee4d5179f19c5b.jpg?wh=3000*795\" alt=\"\"></p><p><strong>Redis-shakeçš„ä¸€å¤§ä¼˜åŠ¿ï¼Œå°±æ˜¯æ”¯æŒå¤šç§ç±»å‹çš„è¿ç§»ã€‚</strong></p><p><strong>é¦–å…ˆï¼Œå®ƒæ—¢æ”¯æŒå•ä¸ªå®ä¾‹é—´çš„æ•°æ®è¿ç§»ï¼Œä¹Ÿæ”¯æŒé›†ç¾¤åˆ°é›†ç¾¤é—´çš„æ•°æ®è¿ç§»</strong>ã€‚</p><p><strong>å…¶æ¬¡</strong>ï¼Œæœ‰çš„Redisåˆ‡ç‰‡é›†ç¾¤ï¼ˆä¾‹å¦‚Codisï¼‰ä¼šä½¿ç”¨proxyæ¥æ”¶è¯·æ±‚æ“ä½œï¼ŒRedis-shakeä¹ŸåŒæ ·æ”¯æŒå’Œproxyè¿›è¡Œæ•°æ®è¿ç§»ã€‚</p><p><strong>å¦å¤–</strong>ï¼Œå› ä¸ºRedis-shakeæ˜¯é˜¿é‡Œäº‘å›¢é˜Ÿå¼€å‘çš„ï¼Œæ‰€ä»¥ï¼Œé™¤äº†æ”¯æŒå¼€æºçš„Redisç‰ˆæœ¬ä»¥å¤–ï¼ŒRedis-shakeè¿˜æ”¯æŒäº‘ä¸‹çš„Rediså®ä¾‹å’Œäº‘ä¸Šçš„Rediså®ä¾‹è¿›è¡Œè¿ç§»ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°RedisæœåŠ¡ä¸Šäº‘çš„ç›®æ ‡ã€‚</p><p><strong>åœ¨æ•°æ®è¿ç§»åï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å¯¹æ¯”æºå®ä¾‹å’Œç›®çš„å®ä¾‹ä¸­çš„æ•°æ®æ˜¯å¦ä¸€è‡´</strong>ã€‚å¦‚æœæœ‰ä¸ä¸€è‡´çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒä»¬æ‰¾å‡ºæ¥ï¼Œä»ç›®çš„å®ä¾‹ä¸­å‰”é™¤ï¼Œæˆ–è€…æ˜¯å†æ¬¡è¿ç§»è¿™äº›ä¸ä¸€è‡´çš„æ•°æ®ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘å°±è¦å†ç»™ä½ ä»‹ç»ä¸€ä¸ªæ•°æ®ä¸€è‡´æ€§æ¯”å¯¹çš„å·¥å…·äº†ï¼Œå°±æ˜¯é˜¿é‡Œäº‘å›¢é˜Ÿå¼€å‘çš„<a href=\"https://github.com/aliyun/redis-full-check\">Redis-full-check</a>ã€‚</p><p>Redis-full-checkçš„å·¥ä½œåŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯å¯¹æºå®ä¾‹å’Œç›®çš„å®ä¾‹ä¸­çš„æ•°æ®è¿›è¡Œå…¨é‡æ¯”å¯¹ï¼Œä»è€Œå®Œæˆæ•°æ®æ ¡éªŒã€‚ä¸è¿‡ï¼Œä¸ºäº†é™ä½æ•°æ®æ ¡éªŒçš„æ¯”å¯¹å¼€é”€ï¼ŒRedis-full-checké‡‡ç”¨äº†å¤šè½®æ¯”è¾ƒçš„æ–¹æ³•ã€‚</p><p>åœ¨ç¬¬ä¸€è½®æ ¡éªŒæ—¶ï¼ŒRedis-full-checkä¼šæ‰¾å‡ºåœ¨æºå®ä¾‹ä¸Šçš„æ‰€æœ‰keyï¼Œç„¶åä»æºå®ä¾‹å’Œç›®çš„å®ä¾‹ä¸­æŠŠç›¸åº”çš„å€¼ä¹Ÿéƒ½æŸ¥æ‰¾å‡ºæ¥ï¼Œè¿›è¡Œæ¯”å¯¹ã€‚ç¬¬ä¸€æ¬¡æ¯”å¯¹åï¼Œredis-full-checkä¼šæŠŠç›®çš„å®ä¾‹ä¸­å’Œæºå®ä¾‹ä¸ä¸€è‡´çš„æ•°æ®ï¼Œè®°å½•åˆ°sqliteæ•°æ®åº“ä¸­ã€‚</p><p>ä»ç¬¬äºŒè½®æ ¡éªŒå¼€å§‹ï¼ŒRedis-full-checkåªæ¯”è¾ƒä¸Šä¸€è½®ç»“æŸåè®°å½•åœ¨æ•°æ®åº“ä¸­çš„ä¸ä¸€è‡´çš„æ•°æ®ã€‚</p><p>ä¸ºäº†é¿å…å¯¹å®ä¾‹çš„æ­£å¸¸è¯·æ±‚å¤„ç†é€ æˆå½±å“ï¼ŒRedis-full-checkåœ¨æ¯ä¸€è½®æ¯”å¯¹ç»“æŸåï¼Œä¼šæš‚åœä¸€æ®µæ—¶é—´ã€‚éšç€Redis-shakeå¢é‡åŒæ­¥çš„è¿›è¡Œï¼Œæºå®ä¾‹å’Œç›®çš„å®ä¾‹ä¸­çš„ä¸ä¸€è‡´æ•°æ®ä¹Ÿä¼šé€æ­¥å‡å°‘ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æ ¡éªŒæ¯”å¯¹çš„è½®æ•°ä¸ç”¨å¾ˆå¤šã€‚</p><p>æˆ‘ä»¬å¯ä»¥è‡ªå·±è®¾ç½®æ¯”å¯¹çš„è½®æ•°ã€‚å…·ä½“çš„æ–¹æ³•æ˜¯ï¼Œåœ¨è¿è¡Œredis-full-checkå‘½ä»¤æ—¶ï¼ŒæŠŠå‚æ•°comparetimesçš„å€¼è®¾ç½®ä¸ºæˆ‘ä»¬æƒ³è¦æ¯”å¯¹çš„è½®æ•°ã€‚</p><p>ç­‰åˆ°æ‰€æœ‰è½®æ•°éƒ½æ¯”å¯¹å®Œæˆåï¼Œæ•°æ®åº“ä¸­è®°å½•çš„æ•°æ®å°±æ˜¯æºå®ä¾‹å’Œç›®çš„å®ä¾‹æœ€ç»ˆçš„å·®å¼‚ç»“æœäº†ã€‚</p><p>è¿™é‡Œæœ‰ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ä¸‹ï¼ŒRedis-full-checkæä¾›äº†ä¸‰ç§æ¯”å¯¹æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡comparemodeå‚æ•°è¿›è¡Œè®¾ç½®ã€‚comparemodeå‚æ•°æœ‰ä¸‰ç§å–å€¼ï¼Œå«ä¹‰å¦‚ä¸‹ï¼š</p><ul>\n<li>KeyOutlineï¼Œåªå¯¹æ¯”keyå€¼æ˜¯å¦ç›¸ç­‰ï¼›</li>\n<li>ValueOutlineï¼Œåªå¯¹æ¯”valueå€¼çš„é•¿åº¦æ˜¯å¦ç›¸ç­‰ï¼›</li>\n<li>FullValueï¼Œå¯¹æ¯”keyå€¼ã€valueé•¿åº¦ã€valueå€¼æ˜¯å¦ç›¸ç­‰ã€‚</li>\n</ul><p>æˆ‘ä»¬åœ¨åº”ç”¨Redis-full-checkæ—¶ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡å¯¹æ•°æ®ä¸€è‡´æ€§ç¨‹åº¦çš„è¦æ±‚ï¼Œé€‰æ‹©ç›¸åº”çš„æ¯”å¯¹æ¨¡å¼ã€‚å¦‚æœä¸€è‡´æ€§è¦æ±‚é«˜ï¼Œå°±æŠŠcomparemodeå‚æ•°è®¾ç½®ä¸ºFullValueã€‚</p><p>å¥½äº†ï¼Œæœ€åï¼Œæˆ‘å†å‘ä½ ä»‹ç»ä¸€ä¸ªç”¨äºRedisé›†ç¾¤è¿ç»´ç®¡ç†çš„å·¥å…·CacheCloudã€‚</p><h2>é›†ç¾¤ç®¡ç†å·¥å…·CacheCloud</h2><p><a href=\"https://github.com/sohutv/cachecloud\">CacheCloud</a>æ˜¯æœç‹å¼€å‘çš„ä¸€ä¸ªé¢å‘Redisè¿ç»´ç®¡ç†çš„äº‘å¹³å°ï¼Œå®ƒ<strong>å®ç°äº†ä¸»ä»é›†ç¾¤ã€å“¨å…µé›†ç¾¤å’ŒRedis Clusterçš„è‡ªåŠ¨éƒ¨ç½²å’Œç®¡ç†</strong>ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨å¹³å°çš„ç®¡ç†ç•Œé¢ä¸Šè¿›è¡Œæ“ä½œã€‚</p><p>é’ˆå¯¹å¸¸è§çš„é›†ç¾¤è¿ç»´éœ€æ±‚ï¼ŒCacheCloudæä¾›äº†5ä¸ªè¿ç»´æ“ä½œã€‚</p><ul>\n<li>ä¸‹çº¿å®ä¾‹ï¼šå…³é—­å®ä¾‹ä»¥åŠå®ä¾‹ç›¸å…³çš„ç›‘æ§ä»»åŠ¡ã€‚</li>\n<li>ä¸Šçº¿å®ä¾‹ï¼šé‡æ–°å¯åŠ¨å·²ä¸‹çº¿çš„å®ä¾‹ï¼Œå¹¶è¿›è¡Œç›‘æ§ã€‚</li>\n<li>æ·»åŠ ä»èŠ‚ç‚¹ï¼šåœ¨ä¸»ä»é›†ç¾¤ä¸­ç»™ä¸»èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªä»èŠ‚ç‚¹ã€‚</li>\n<li>æ•…éšœåˆ‡æ¢ï¼šæ‰‹åŠ¨å®ŒæˆRedis Clusterä¸»ä»èŠ‚ç‚¹çš„æ•…éšœè½¬ç§»ã€‚</li>\n<li>é…ç½®ç®¡ç†ï¼šç”¨æˆ·æäº¤é…ç½®ä¿®æ”¹çš„å·¥å•åï¼Œç®¡ç†å‘˜è¿›è¡Œå®¡æ ¸ï¼Œå¹¶å®Œæˆé…ç½®ä¿®æ”¹ã€‚</li>\n</ul><p>å½“ç„¶ï¼Œä½œä¸ºè¿ç»´ç®¡ç†å¹³å°ï¼ŒCacheCloudé™¤äº†æä¾›è¿ç»´æ“ä½œä»¥å¤–ï¼Œè¿˜æä¾›äº†ä¸°å¯Œçš„ç›‘æ§ä¿¡æ¯ã€‚</p><p>CacheCloudä¸ä»…ä¼šæ”¶é›†INFOå‘½ä»¤æä¾›çš„å®ä¾‹å®æ—¶è¿è¡ŒçŠ¶æ€ä¿¡æ¯ï¼Œè¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œè€Œä¸”è¿˜ä¼šæŠŠå®ä¾‹è¿è¡ŒçŠ¶æ€ä¿¡æ¯ä¿å­˜ä¸‹æ¥ï¼Œä¾‹å¦‚å†…å­˜ä½¿ç”¨æƒ…å†µã€å®¢æˆ·ç«¯è¿æ¥æ•°ã€é”®å€¼å¯¹æ•°æ®é‡ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“Redisè¿è¡Œå‘ç”Ÿé—®é¢˜æ—¶ï¼Œè¿ç»´äººå‘˜å¯ä»¥æŸ¥è¯¢ä¿å­˜çš„å†å²è®°å½•ï¼Œå¹¶ç»“åˆå½“æ—¶çš„è¿è¡ŒçŠ¶æ€ä¿¡æ¯è¿›è¡Œåˆ†æã€‚</p><p>å¦‚æœä½ å¸Œæœ›æœ‰ä¸€ä¸ªç»Ÿä¸€å¹³å°ï¼ŒæŠŠRediså®ä¾‹ç®¡ç†ç›¸å…³çš„ä»»åŠ¡é›†ä¸­æ‰˜ç®¡èµ·æ¥ï¼ŒCacheCloudæ˜¯ä¸€ä¸ªä¸é”™çš„å·¥å…·ã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ç»™ä½ ä»‹ç»äº†å‡ ç§Redisçš„è¿ç»´å·¥å…·ã€‚</p><p>æˆ‘ä»¬å…ˆäº†è§£äº†Redisçš„INFOå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯ç›‘æ§å·¥å…·çš„åŸºç¡€ï¼Œç›‘æ§å·¥å…·éƒ½ä¼šåŸºäºINFOå‘½ä»¤æä¾›çš„ä¿¡æ¯è¿›è¡ŒäºŒæ¬¡åŠ å·¥ã€‚æˆ‘ä»¬è¿˜å­¦ä¹ äº†3ç§ç”¨æ¥ç›‘æ§Rediså®æ—¶è¿è¡ŒçŠ¶æ€çš„è¿ç»´å·¥å…·ï¼Œåˆ†åˆ«æ˜¯Redis-exporterã€redis-statå’ŒRedis Liveã€‚</p><p>å…³äºæ•°æ®è¿ç§»ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥ä½¿ç”¨Redis-shakeå·¥å…·ï¼Œä¹Ÿå¯ä»¥é€šè¿‡RDBæ–‡ä»¶æˆ–æ˜¯AOFæ–‡ä»¶è¿›è¡Œè¿ç§»ã€‚</p><p>åœ¨è¿ç»´Redisæ—¶ï¼Œåˆšåˆšè®²åˆ°çš„å¤šæ¬¾å¼€æºå·¥å…·ï¼Œå·²ç»å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„ä¸å°‘éœ€æ±‚äº†ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™ï¼Œä¸åŒä¸šåŠ¡çº¿å¯¹Redisè¿ç»´çš„éœ€æ±‚å¯èƒ½å¹¶ä¸ä¸€æ ·ï¼Œç›´æ¥ä½¿ç”¨ç°æˆçš„å¼€æºå·¥å…·å¯èƒ½æ— æ³•æ»¡è¶³å…¨éƒ¨éœ€æ±‚ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®ä½ åŸºäºå¼€æºå·¥å…·è¿›è¡ŒäºŒæ¬¡å¼€å‘æˆ–æ˜¯è‡ªç ”ï¼Œä»è€Œæ›´å¥½åœ°æ»¡è¶³ä¸šåŠ¡ä½¿ç”¨éœ€æ±‚ã€‚</p><h2>æ¯è¯¾ä¸€é—®</h2><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ç»™ä½ æä¸ªå°é—®é¢˜ï¼šä½ åœ¨å®é™…åº”ç”¨ä¸­è¿˜ä½¿ç”¨è¿‡ä»€ä¹ˆå¥½çš„è¿ç»´å·¥å…·å—ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµè®¨è®ºã€‚å¦‚æœä½ è§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿ä½ åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","neighbors":{"left":{"article_title":"åŠ é¤ï¼ˆå››ï¼‰ | Rediså®¢æˆ·ç«¯å¦‚ä½•ä¸æœåŠ¡å™¨ç«¯äº¤æ¢å‘½ä»¤å’Œæ•°æ®ï¼Ÿ","id":298504},"right":{"article_title":"åŠ é¤ï¼ˆå…­ï¼‰|  Redisçš„ä½¿ç”¨è§„èŒƒå°å»ºè®®","id":309089}},"comments":[{"had_liked":false,"id":259844,"user_name":"Kaito","can_delete":false,"product_type":"c1","uid":1020042,"ip_address":"","ucode":"79775FA35A95F2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","comment_is_top":false,"comment_ctime":1604851806,"is_pvip":true,"discussion_count":9,"race_medal":0,"score":"469756287070","product_id":100056701,"comment_content":"è€å¸ˆè¿™èŠ‚è¯¾è®²çš„å·¥å…·å¾ˆå®ç”¨ã€‚<br><br>å¹³æ—¶æˆ‘ä»¬é‡åˆ°çš„ Redis å˜æ…¢é—®é¢˜ï¼Œæœ‰æ—¶è§‰å¾—å¾ˆéš¾å®šä½åŸå› ï¼Œå…¶å®æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰åšå¥½å®Œå–„çš„ç›‘æ§ã€‚<br><br>Redis INFO ä¿¡æ¯çœ‹ä¼¼ç®€å•ï¼Œä½†æ˜¯è¿™äº›ä¿¡æ¯è®°å½•ç€ Redis è¿è¡Œæ—¶çš„å„ç§çŠ¶æ€æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬æŠŠè¿™äº›æ•°æ®é‡‡é›†åˆ°å¹¶ç›‘æ§åˆ°ä½ï¼Œ80% çš„å¼‚å¸¸æƒ…å†µèƒ½åœ¨ç¬¬ä¸€æ—¶é—´å‘ç°ã€‚<br><br>æœºå™¨çš„ CPUã€å†…å­˜ã€ç½‘ç»œã€ç£ç›˜ï¼Œéƒ½å½±å“ç€ Redis çš„æ€§èƒ½ã€‚<br><br>ç›‘æ§æ—¶æˆ‘ä»¬æœ€å¥½é‡ç‚¹å…³æ³¨ä»¥ä¸‹æŒ‡æ ‡ï¼š<br><br>1ã€å®¢æˆ·ç«¯ç›¸å…³ï¼šå½“å‰è¿æ¥æ•°ã€æ€»è¿æ¥æ•°ã€è¾“å…¥ç¼“å†²å¤§å°ã€OPS<br><br>2ã€CPUç›¸å…³ï¼šä¸»è¿›ç¨‹ CPU ä½¿ç”¨ç‡ã€å­è¿›ç¨‹ CPU ä½¿ç”¨ç‡<br><br>3ã€å†…å­˜ç›¸å…³ï¼šå½“å‰å†…å­˜ã€å³°å€¼å†…å­˜ã€å†…å­˜ç¢ç‰‡ç‡<br><br>4ã€ç½‘ç»œç›¸å…³ï¼šè¾“å…¥ã€è¾“å‡ºç½‘ç»œæµé‡<br><br>5ã€æŒä¹…åŒ–ç›¸å…³ï¼šæœ€åä¸€æ¬¡ RDB æ—¶é—´ã€RDB fork è€—æ—¶ã€æœ€åä¸€æ¬¡ AOF rewrite æ—¶é—´ã€AOF rewrite è€—æ—¶<br><br>6ã€key ç›¸å…³ï¼šè¿‡æœŸ key æ•°é‡ã€æ·˜æ±° key æ•°é‡ã€key å‘½ä¸­ç‡<br><br>7ã€å¤åˆ¶ç›¸å…³ï¼šä¸»ä»èŠ‚ç‚¹å¤åˆ¶åç§»é‡ã€ä¸»åº“å¤åˆ¶ç¼“å†²åŒº<br><br>èƒ½å¤ŸæŸ¥è¯¢è¿™äº›æŒ‡æ ‡çš„å½“å‰çŠ¶æ€æ˜¯æœ€åŸºæœ¬çš„ï¼Œæ›´å¥½çš„æ–¹æ¡ˆæ˜¯ï¼Œèƒ½å¤Ÿè®¡ç®—å‡ºè¿™äº›æŒ‡æ ‡çš„æ³¢åŠ¨æƒ…å†µï¼Œç„¶åç”ŸæˆåŠ¨æ€çš„å›¾è¡¨å±•ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å½“æŸä¸€åˆ»æŒ‡æ ‡çªå¢æ—¶ï¼Œç›‘æ§èƒ½å¸®æˆ‘ä»¬å¿«é€Ÿæ•æ‰åˆ°ï¼Œé™ä½é—®é¢˜å®šä½çš„éš¾åº¦ã€‚<br><br>ç›®å‰ä¸šç•Œæ¯”è¾ƒä¸»æµçš„ç›‘æ§ç³»ç»Ÿï¼Œéƒ½ä¼šä½¿ç”¨ Prometheus æ¥åšï¼Œæ’ä»¶ä¹Ÿå¾ˆä¸°å¯Œï¼Œç›‘æ§æŠ¥è­¦ä¹Ÿæ–¹ä¾¿é›†æˆï¼Œæ¨èç”¨èµ·æ¥ã€‚","like_count":110,"discussions":[{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"é™Œå…®","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553825,"discussion_content":"ç¡®å®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646111303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114878,"avatar":"https://static001.geekbang.org/account/avatar/00/11/02/fe/d539b96b.jpg","nickname":"æ›¹ç¿”","note":"","ucode":"B4D8B42DFB535C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548786,"discussion_content":"è¿™ä¸ªå¥½ï¼Œä¹‹å‰çœ‹è¿ç»´æå¾—Prometheuså¯¹Redisä¸»è¦å°±æ˜¯å†…å­˜ç›‘æ§ï¼Œæ²¡æƒ³åˆ°å¯ä»¥ç›‘æ§è¿™ä¹ˆå¤šï¼ŒğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643366339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062444,"avatar":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","nickname":"å°å–µå–µ","note":"","ucode":"FDBBB2A59DB8B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323567,"discussion_content":"prometheuså¥½åƒåªèƒ½ç›‘æ§dockerçš„ç¨‹åºå§ï¼Œè¿˜æ˜¯ä¸€èˆ¬çš„exeç¨‹åºæˆ–ç½‘ç«™åå°ä¹Ÿèƒ½ç›‘æ§å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604969921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1062444,"avatar":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","nickname":"å°å–µå–µ","note":"","ucode":"FDBBB2A59DB8B6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323690,"discussion_content":"çœ‹å®˜æ–¹æ–‡æ¡£å°±çŸ¥é“äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604982768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":323567,"ip_address":""},"score":323690,"extra":""}]},{"author":{"id":2273758,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDIE6cNkWfvdZEf9ic7icsorRN8uoibWJ6kibukImjUf4iamJClericBKXvOKrNI8h5b7uAwnubJRGic9JA/132","nickname":"æˆ‘æ˜¯æ£è›‹é¬¼","note":"","ucode":"58D62883A3D32C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323266,"discussion_content":"è¯·é—®ä½ ç”¨çš„ç›‘æ§è¿ç»´å¹³å°æ˜¯å“ªä¸€ç§ï¼Ÿprometheusï¼Œcachecloudï¼Œè¿˜æ˜¯å…¶å®ƒï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604909752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2273758,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDIE6cNkWfvdZEf9ic7icsorRN8uoibWJ6kibukImjUf4iamJClericBKXvOKrNI8h5b7uAwnubJRGic9JA/132","nickname":"æˆ‘æ˜¯æ£è›‹é¬¼","note":"","ucode":"58D62883A3D32C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323270,"discussion_content":"prometheus","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604910221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":323266,"ip_address":""},"score":323270,"extra":""}]},{"author":{"id":1021539,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","nickname":"æé±¼çš„æ¬ç –å¥‡","note":"","ucode":"2FD194C4DA26E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323072,"discussion_content":"opsæ˜¯å•¥æ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604883119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2253496,"avatar":"","nickname":"Geek_3d87cb","note":"","ucode":"F09334D60C3BC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1021539,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","nickname":"æé±¼çš„æ¬ç –å¥‡","note":"","ucode":"2FD194C4DA26E5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323227,"discussion_content":"æ¯ç§’æ“ä½œæ¬¡æ•°","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1604902877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":323072,"ip_address":""},"score":323227,"extra":""},{"author":{"id":1811277,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a3/4d/59390ba9.jpg","nickname":"æ’éª¨","note":"","ucode":"A413CF46211E1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1021539,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","nickname":"æé±¼çš„æ¬ç –å¥‡","note":"","ucode":"2FD194C4DA26E5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588014,"discussion_content":"qpså§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663468243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":323072,"ip_address":"å¹¿ä¸œ"},"score":588014,"extra":""}]}]},{"had_liked":false,"id":276513,"user_name":"é©¬å¬","can_delete":false,"product_type":"c1","uid":1430132,"ip_address":"","ucode":"93D83CB5FAE5AD","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/74/7861f504.jpg","comment_is_top":false,"comment_ctime":1611980957,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"48856621213","product_id":100056701,"comment_content":"Redis å·¥å…·å…¶ä»–ç”¨è¿‡çƒ­ key æŸ¥æ‰¾å·¥å…·ï¼šredis-fainaï¼Œè¿˜ä¸é”™ï¼›Githubåœ°å€ï¼šhttps:&#47;&#47;github.com&#47;facebookarchive&#47;redis-faina","like_count":11},{"had_liked":false,"id":292710,"user_name":"æ‚Ÿç©ºèŠæ¶æ„","can_delete":false,"product_type":"c1","uid":1123163,"ip_address":"","ucode":"C2F482A0CF8AF1","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/5b/983408b9.jpg","comment_is_top":false,"comment_ctime":1620948550,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14505850438","product_id":100056701,"comment_content":"Prometheusç›‘æ§å·¥å…·ç¡®å®ä¸é”™ï¼Œç•Œé¢ç¾è§‚ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼","like_count":4},{"had_liked":false,"id":289056,"user_name":"dao","can_delete":false,"product_type":"c1","uid":1087879,"ip_address":"","ucode":"4181FB270462CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","comment_is_top":false,"comment_ctime":1618835007,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10208769599","product_id":100056701,"comment_content":"æˆ‘ä»¬ç”Ÿäº§åº”ç”¨ä¸­ä½¿ç”¨ elastic metrcibeat åš redis ç»Ÿè®¡ç›‘æ§ï¼ŒåŒæ—¶ç»“åˆ zabbix åšæœºå™¨ç›‘æ§ï¼Œopserver é›†åˆå¤šç§æ•°æ®åº“çš„ç›‘æ§ã€‚ä¹Ÿç»™å¼€å‘äººå‘˜å‡†å¤‡äº†redis gui å·¥å…· redisinsightã€‚","like_count":3},{"had_liked":false,"id":343042,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1650608547,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5945575843","product_id":100056701,"comment_content":"è€å¸ˆ åŠ é¤è®²è®² Redis benchmark æ€§èƒ½æµ‹è¯•çš„å…³æ³¨ç‚¹ï¼Ÿ","like_count":1},{"had_liked":false,"id":284696,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1616419192,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"5911386488","product_id":100056701,"comment_content":"ä½œä¸ºæ²¡æœ‰å®æˆ˜ç»éªŒçš„å°ç™½ï¼Œåªèƒ½æŠŠæœ¬èŠ‚å†…å®¹æš—è‡ªè®°ä¸‹ï¼Œä»¥åéœ€è¦çš„æ—¶å€™å†å›æ¥æŸ¥è¯¢ã€‚<br><br>è¿ç»´çš„æ—¶å€™ä»…æœ‰ info çš„ä¿¡æ¯æ˜¯æ˜æ˜¾ä¸å¤Ÿçš„ï¼Œå¦åˆ™å³ä½¿å•é¡¹æŒ‡æ ‡æœ‰é—®é¢˜ï¼Œä¹Ÿåªèƒ½ä¾èµ–äºç»éªŒå€¼ï¼Œå¦‚æœæœ‰è¿ç»´å·¥å…·çš„è¯ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸€æ®µæ—¶é—´å†…çš„å¹³å‡å€¼ã€æ­£å¸¸å€¼ã€æ³¢åŠ¨æƒ…å†µç­‰ç­‰ã€‚<br><br>Prometheus ä¹‹å‰å¬è¯´è¿‡ï¼Œç°åœ¨çœ‹æ¥åº”è¯¥æ˜¯å¼€æºç³»ç»Ÿç›‘æ§æŠ¥è­¦æ¡†æ¶é‡Œé¢æ¯”è¾ƒæˆç†Ÿçš„ä¸€ä¸ªäº†ï¼Œæœ‰æœºä¼šçš„è¯å¯ä»¥å­¦ä¹ ä¸€ä¸‹ã€‚<br><br>å¦‚æœåªè¿ç»´ Redis çš„è¯ï¼ŒCacheCloud ä¼¼ä¹ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä¸çŸ¥é“é™¤äº†æœç‹ä¹‹å¤–ï¼Œæœ‰æ²¡æœ‰å…¶ä»–å¤§å‚é‡‡ç”¨ã€‚å¦å¤–ï¼ŒCacheCloud å›¢é˜Ÿè¿˜å†™äº†ä¸€æœ¬ã€ŠRediså¼€å‘ä¸è¿ç»´ã€‹ã€‚<br><br>æœ‰ä¸€ç‚¹å¥½å¥‡ï¼Œä¸ºä»€ä¹ˆä¸­å›½å›¢é˜Ÿä¼¼ä¹æ¯”è¾ƒå–œæ¬¢ Redis ï¼Ÿä¹‹å‰ä»‹ç»çš„å›¾ä¹¦ä¹Ÿå¤§éƒ¨åˆ†çš„éƒ½æ˜¯å›½å†…åŸåˆ›çš„ï¼Œè¿™æ¬¡ä»‹ç»çš„è¿ç»´å·¥å…·ä¹Ÿå¤§å¤šæ˜¯å›½å†…çš„ã€‚","like_count":1},{"had_liked":false,"id":269152,"user_name":"å­™å®å½¬2","can_delete":false,"product_type":"c1","uid":2334421,"ip_address":"","ucode":"C86EA0860CD1A3","user_header":"https://static001.geekbang.org/account/avatar/00/23/9e/d5/24fbf7c1.jpg","comment_is_top":false,"comment_ctime":1608539588,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5903506884","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæˆ‘ç›´æ¥åšä¸ªä»å®ä¾‹ï¼Œç„¶åç¨‹åºæ›´æ¢ipè¿™æ ·çš„è¿ç§»æ–¹å¼ï¼Œè¿™æ ·æ€ä¹ˆæ ·","like_count":1},{"had_liked":false,"id":355343,"user_name":"é£é¾™","can_delete":false,"product_type":"c1","uid":2276763,"ip_address":"å¹¿ä¸œ","ucode":"EC83FE73985491","user_header":"https://static001.geekbang.org/account/avatar/00/22/bd/9b/366bb87b.jpg","comment_is_top":false,"comment_ctime":1661310309,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1661310309","product_id":100056701,"comment_content":"redis-shakeå¯ä»¥æ»¡è¶³ä»é˜¿é‡Œäº‘è¿åˆ°AWSå—","like_count":0},{"had_liked":false,"id":348520,"user_name":"Tangzen","can_delete":false,"product_type":"c1","uid":2842683,"ip_address":"","ucode":"B895E7FDEEED64","user_header":"https://static001.geekbang.org/account/avatar/00/2b/60/3b/d12cd56b.jpg","comment_is_top":false,"comment_ctime":1655168964,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655168964","product_id":100056701,"comment_content":"info states ","like_count":0},{"had_liked":false,"id":346786,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1653437918,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1653437918","product_id":100056701,"comment_content":"Redis cli ğŸ™ˆ","like_count":0},{"had_liked":false,"id":334665,"user_name":"ä¸è´Ÿé’æ˜¥ä¸è´Ÿå·±ğŸ¤˜","can_delete":false,"product_type":"c1","uid":1363671,"ip_address":"","ucode":"A6DD8E8B20EA6E","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/d7/5315f6ce.jpg","comment_is_top":false,"comment_ctime":1645064480,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645064480","product_id":100056701,"comment_content":"Mark","like_count":0},{"had_liked":false,"id":330055,"user_name":"æ ‘å¿ƒ","can_delete":false,"product_type":"c1","uid":1589523,"ip_address":"","ucode":"6C329F0FF798B9","user_header":"https://static001.geekbang.org/account/avatar/00/18/41/13/ab14ad25.jpg","comment_is_top":false,"comment_ctime":1641778222,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1641778222","product_id":100056701,"comment_content":"æœ€åŸºæœ¬çš„ç›‘æ§å‘½ä»¤ï¼šINFO å‘½ä»¤<br>é¢å‘ Prometheus çš„ Redis-exporter ç›‘æ§<br>æ•°æ®è¿ç§»å·¥å…· Redis-shakeï¼ˆæ•°æ®ä¸€è‡´æ€§æ¯”å¯¹çš„å·¥å…·Redis-full-checkï¼‰<br>é›†ç¾¤ç®¡ç†å·¥å…· CacheCloud","like_count":0},{"had_liked":false,"id":289127,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1274787,"ip_address":"","ucode":"C233DF1D224EC1","user_header":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","comment_is_top":false,"comment_ctime":1618883517,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1618883517","product_id":100056701,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œä¸¤ä¸ªk8sé›†ç¾¤ï¼Œåˆ†åˆ«æ˜¯æ·±åœ³å’Œæ­¦æ±‰ï¼Œk8sé›†ç¾¤ä¸­éƒ½éƒ¨ç½²äº†redisä¸»ä»+å“¨å…µé›†ç¾¤ï¼Œæƒ³è¦æŠŠæ·±åœ³çš„redisæ•°æ®è¿ç§»åˆ°æ­¦æ±‰çš„redisé›†ç¾¤ç¯å¢ƒä¸­ï¼Œå› ä¸ºrediså®ä¾‹éƒ½åœ¨podä¸­ï¼Œredis-shakeå¯ä»¥åšåˆ°è¿™ä¸ªå˜›?","like_count":0},{"had_liked":false,"id":270829,"user_name":"å–µå–µå–µ","can_delete":false,"product_type":"c1","uid":1211713,"ip_address":"","ucode":"E3AD8BF42E19DF","user_header":"https://static001.geekbang.org/account/avatar/00/12/7d/41/3c5b770b.jpg","comment_is_top":false,"comment_ctime":1609294346,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609294346","product_id":100056701,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":267091,"user_name":"é»„æµ·å³°","can_delete":false,"product_type":"c1","uid":1275357,"ip_address":"","ucode":"E9340719BC96B2","user_header":"https://static001.geekbang.org/account/avatar/00/13/75/dd/9ead6e69.jpg","comment_is_top":false,"comment_ctime":1607592658,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"1607592658","product_id":100056701,"comment_content":"redisâ€”shakeè§£å†³çš„ç—›ç‚¹åœ¨å“ªé‡Œï¼Œä¸ºä½•ä¸ç›´æ¥åŒæ­¥åˆ°ç›®çš„redisè¿˜è¦æä¸ªä¸­é—´çš„","like_count":0,"discussions":[{"author":{"id":1070839,"avatar":"https://static001.geekbang.org/account/avatar/00/10/56/f7/d8cb89cd.jpg","nickname":"Jerry","note":"","ucode":"E3AE756E0ABEEE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411005,"discussion_content":"rdb-toolsè§‰å¾—ä¸é”™ï¼Œå¯¹æ¯”é˜¿é‡Œäº‘Redis-full-checkï¼Œå¯¹äºçº¿ä¸Šçš„å®ä¾‹è§‰å¾—å¯èƒ½å­˜åœ¨è¾ƒå¤§æ€§èƒ½é—®é¢˜ï¼Œä½¿ç”¨rdb-toolsç¦»çº¿åˆ†æå¯¹æ¯”è§‰å¾—å¯¹çº¿ä¸Šå½±å“æ›´å°å§ã€‚å°¤å…¶åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œrediså®ä¾‹å†…å­˜æ¯”è¾ƒå¤§çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635826045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2882781,"avatar":"","nickname":"Geek_7739ef","note":"","ucode":"AFCEFCF630FB10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1070839,"avatar":"https://static001.geekbang.org/account/avatar/00/10/56/f7/d8cb89cd.jpg","nickname":"Jerry","note":"","ucode":"E3AE756E0ABEEE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543520,"discussion_content":"æ˜¯è¯´è¿™ä¸ªå— https://github.com/sripathikrishnan/redis-rdb-tools","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641193835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":411005,"ip_address":""},"score":543520,"extra":""}]},{"author":{"id":1227007,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/ff/249da6da.jpg","nickname":"è¿ç»´è€èƒ¡","note":"","ucode":"DF398BEE296E11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379804,"discussion_content":"ä¸»è¦æ˜¯äº‘ç¯å¢ƒçš„åº”ç”¨ï¼Œäº‘redisæœåŠ¡æ˜¯æ— æ³•ç›´æ¥åŒæ­¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624165653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","nickname":"dao","note":"","ucode":"4181FB270462CF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368797,"discussion_content":"çœ‹äº†ä¸€ä¸‹æ–‡æ¡£ï¼Œæ”¯æŒä¸°å¯Œçš„åŒæ­¥ç±»å‹å•Šï¼Œæ¯”å¦‚é›†ç¾¤æ•°æ®ï¼Œå¦æœ‰å¯ä»¥è®¾ç½®åŒæ­¥é”®çš„è¿‡æ»¤æ¡ä»¶ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618834569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}