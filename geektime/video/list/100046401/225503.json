{"id":225503,"title":"56 | 神经网络的构建：Normalization","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/NLP\">https://gitee.com/geektime-geekbang/NLP</a></p>","comments":[{"had_liked":false,"id":315853,"user_name":"PrimeYue","can_delete":false,"product_type":"c3","uid":2089823,"ip_address":"","ucode":"13DE7DB16D5C53","user_header":"https://static001.geekbang.org/account/avatar/00/1f/e3/5f/2c8a4980.jpg","comment_is_top":false,"comment_ctime":1634022443,"is_pvip":false,"replies":[{"id":117743,"content":"不一定。BERT里面是LayerNormalization","user_name":"作者回复","user_name_real":"编辑","uid":1813673,"ctime":1638448756,"ip_address":"","comment_id":315853,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"NLP会经常用到Batch Normalization吗","like_count":0,"discussions":[{"author":{"id":1813673,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ac/a9/fbcddd1f.jpg","nickname":"王然","note":"","ucode":"45A7F34120DF47","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535471,"discussion_content":"不一定。BERT里面是LayerNormalization","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638448756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265024,"user_name":"freedom","can_delete":false,"product_type":"c3","uid":2095809,"ip_address":"","ucode":"F6C120771C5E49","user_header":"https://static001.geekbang.org/account/avatar/00/1f/fa/c1/710de9b5.jpg","comment_is_top":false,"comment_ctime":1606737770,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"老师我问个问题，在使用BN的时候，训练过程中is＿training为TRUE时候模型表现很好，在预测过程设置为FALSE，则表现下降很多。moving＿mean和moving＿var也都有保存。请问这种情况出现的原因是什么，该怎么解决呢？","like_count":0,"discussions":[{"author":{"id":1341502,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/3e/f60ea472.jpg","nickname":"grok","note":"","ucode":"4744AB3FA28FE2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635092,"discussion_content":"批量大小(batch size)不一致。BN层训练时是按批统计mean/var,而预测时整个样本作为一个batch。这导致统计偏差。建议训练BN时尽量与部署设置(整个样本作为batch)保持一致。\nmoving average的更新不足。如果BN层的training参数切换的太快,moving mean/var来不及被充分训练数据更新,那么预测时使用的统计数据质量就会比较差。可以试着增加moving average的更新迭代次数。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704407718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"美国","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}