{"id":436783,"title":"09 | 动画：Vue中如何实现动画效果？","content":"<p>你好，我是大圣。</p><p>在上一讲中，我给你讲解了组件化设计的思路，有了组件，我们就可以积木式地搭建网页了。领会组件设计的思路后，小圣继续丰富了清单组件的功能，在组件的功能实现完毕后，我给他提出了一个新的要求，希望能有一些动画效果的加入，让这个应用显得不再这么生硬。</p><p>小圣自己琢磨以后，又找过来咨询我Vue 3中实现动画的方式，所以今天我就来跟你聊一下Vue中应该如何实现常见的过渡和动效。在讲解过程中，我们会继续给之前那个清单应用添砖加瓦，给它添加更多酷炫的玩法，让我们正式开始今天的学习吧。</p><h2>前端过渡和动效</h2><p>在讲Vue中的动效和过渡之前，我想先跟你聊一下前端的过渡和动效的实现方式。举个例子，假设我现在有这样一个需求：在页面上要有一个div标签，以及一个按钮，点击页面的按钮后，能够让div标签的宽度得到增加。</p><p>在下面的代码中，我们可以实现上面所说的这个效果。这段代码里，首先是一个div标签，我们使用width控制宽度。我们想要的前端效果是，每次点击按钮的时候，div标签的宽度都增加100px。</p><pre><code class=\"language-xml\">&lt;template&gt;\n\n  &lt;div class=\"box\" :style=\"{width:width+'px'}\"&gt;&lt;/div&gt;\n  &lt;button @click=\"change\"&gt;click&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport {ref} from 'vue'\nlet width= ref(100)\nfunction change(){\n  width.value += 100\n}\n&lt;/script&gt;\n\n&lt;style&gt;\n.box{\n  background:red;\n  height:100px;\n}\n&lt;/style&gt;\n</code></pre><!-- [[[read_end]]] --><p>这个功能实现的效果图如下，小圣虽然实现了需求中提到的功能，但是现在的显示效果很生硬，这点你从下面的动态效果图中也能看出来。</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/ef/0a52318a2a136bebbe711a70e5b2f0ef.gif?wh=991x310\" alt=\"图片\"></p><p>为了优化显示的效果，首先我们可以通过一个CSS的属性transition来实现过渡，实现方式非常简单，直接在div的样式里加上一个transition配置就可以了。下面是具体的实现，其中我们给transition配置了三个参数，简单解释呢，就是div的width属性需要过渡，过渡时间是1秒，并且过渡方式是线性过渡。</p><pre><code class=\"language-xml\">&lt;style&gt;\n.box{\n  background:#d88986;\n  height:100px;\n  transition: width 1s linear;\n}\n&lt;/style&gt;\n</code></pre><p>添加上述transition配置后，前端页面会显示如下的过渡效果，是不是流畅了一些呢？实际上，日常项目开发中类似的过渡效果是很常见的。</p><p><img src=\"https://static001.geekbang.org/resource/image/dd/e4/dd5bcf6e3dbcb4bd84f97093bc0a08e4.gif?wh=991x310\" alt=\"图片\"></p><p>现在你能看到，<strong>我们可以通过transition来控制一个元素的<strong><strong>属</strong></strong>性的值，缓慢地变成另外一个值，这种操作就称之为过渡</strong>。除了transition，我们还可以通过animation和keyframe的组合实现动画。</p><p>在下面的代码中，我们指定标签的antimation配置，给标签设置move动画，持续时间为两秒，线性变化并且无限循环。然后使用@keyframes 定制move动画，内部定义了动画0%、50%和100%的位置，最终实现了一个方块循环移动的效果。</p><pre><code class=\"language-xml\">.box1{\n  width:30px;\n  height:30px;\n  position: relative;\n  background:#d88986;\n  animation: move 2s linear infinite;\n}\n@keyframes move {\n  0% {left:0px}\n  50% {left:200px}\n  100% {left:0}\n}\n</code></pre><p>上面代码的实现效果如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/20/8c070a460f13cb979cc393b55ac6a420.gif?wh=991x310\" alt=\"图片\"></p><p>这就是实现前端动画最简单的方式了，在网页应用开发的场景下，或多或少都会有过渡动画的使用需求。从最基本的颜色和位置的渐变，到页面切换都是动画的应用场景，这些动画在视觉和心理的体验上更加友好，比如等待时间的Loading加载提示，弹窗出现的显示动画等。</p><h2>Vue 3动画入门</h2><p>通常我们实现的动画，会给Web应用带来额外的价值。动画和过渡可以增加用户体验的舒适度，让变化更加自然，并且可以吸引用户的注意力，突出重点。transition和animation让我们可以用非常简单的方式实现动画。那么在Vue 3中，我们到底该如何使用动画呢？</p><p>Vue 3中提供了一些动画的封装，使用内置的transition组件来控制组件的动画。为了让你先有一个感性的认识，这里我们先来举一个最简单的例子：我们可以使用一个按钮控制标题文字的显示和隐藏，具体的代码如下，通过点击按钮，就可以控制h1标签的显示和隐藏。</p><pre><code class=\"language-xml\">&lt;template&gt;\n\n  &lt;button @click=\"toggle\"&gt;click&lt;/button&gt;\n  &lt;h1 v-if=\"showTitle\"&gt;你好 Vue 3&lt;/h1&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport {ref} from 'vue'\nlet showTitle = ref(true)\nfunction toggle(){\n  showTitle.value = !showTitle.value\n}\n&lt;/script&gt;\n</code></pre><p>在Vue中，如果我们想要在显示和隐藏标题文字的时候，加入动效进行过渡，那么我们直接使用transition组件包裹住需要动画的元素就可以了。</p><p>在下面代码中，我们使用transition包裹h1标签，并且设置了name为fade，Vue会在h1标签显示和隐藏的过程中去设置标签的class，我们可以根据这些class去实现想要的动效。</p><pre><code class=\"language-xml\">  &lt;transition name=\"fade\"&gt;\n    &lt;h1 v-if=\"showTitle\"&gt;你好 Vue 3&lt;/h1&gt;\n  &lt;/transition&gt;\n</code></pre><p>具体class的名字，Vue 的官网有一个图给出了很好的解释，图里的v-enter-from中的v，就是我们设置的name属性。所以在我们现在这个案例中，标签在进入和离开的时候，会有fade-enter-active和fade-leave-active的class，进入的开始和结束会有fade-enter-from和face-enter-to两个class。</p><p><img src=\"https://static001.geekbang.org/resource/image/71/92/718a6019316ed75f6d040e4983957692.png?wh=1920x866\" alt=\"图片\"></p><p>根据上图所示的原理，我们在style标签中新增如下代码，通过fade-enter-active和fade-leave-active两个class，去控制动画全程的过渡属性。设置opacity有0.5秒的过渡时间，并且在元素进入前和离开后设置opacity为0。</p><pre><code class=\"language-xml\">&lt;style&gt;\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s linear;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n&lt;/style&gt;\n</code></pre><p>通过对元素进入和离开的过渡设置，我们可以实现如下动画：</p><p><img src=\"https://static001.geekbang.org/resource/image/af/e0/afeed23b2f92cac24de8b83fe3df80e0.gif?wh=460x290\" alt=\"图片\"></p><h2>清单应用优化</h2><p>现在，我们通过学到的动画原理，去优化一下第二讲的清单应用。我们先来了解一下操作的场景，在原先清单应用已有的交互下，有一个交互的优化，我们想对交互再增加一个优化项。具体来说，就是当输入框为空的时候，敲击回车需要弹出一个错误的提示。</p><p>小圣同学对Composition API已经非常熟悉了，很快速地写下了下面的代码。小圣在代码的template中新增了一个显示错误消息的div，设置为绝对定位，通过showModal变量控制显示和隐藏。并且在addTodo函数中，如果title.value为空，也就是用户输入为空的时候，就设置showModal为true。这时，如果用户敲击回车，就会显示弹窗，并且定时关闭。</p><pre><code class=\"language-xml\">&lt;template&gt;\n...清单代码\n  &lt;div class=\"info-wrapper\" v-if=\"showModal\"&gt;\n    &lt;div class=\"info\"&gt;\n      哥，你啥也没输入！\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\n...清单功能代码\n  let showModal = ref(false)\n\n  function addTodo() {\n    if(!title.value){\n      showModal.value = true\n      setTimeout(()=&gt;{\n        showModal.value = false\n      },1500)\n      return \n    }\n    todos.value.push({\n      title: title.value,\n      done: false,\n    });\n    title.value = \"\";\n  }\n&lt;/script&gt;\n&lt;style&gt;\n.info-wrapper {\n  position: fixed;\n  top: 20px;\n  width:200px;\n}\n.info {\n  padding: 20px;\n  color: white;\n  background: #d88986;\n}\n&lt;/style&gt;\n</code></pre><p>新增交互后的前端显示效果如下，敲击回车后，如果输入为空，就会显示错误信息的弹窗。</p><p><img src=\"https://static001.geekbang.org/resource/image/60/47/60aea2a58ccb29ca0676189dfd3b9d47.gif?wh=646x463\" alt=\"图片\"></p><p>功能虽然实现了，但是我们想进一步提高弹窗的交互效果，也就是弹窗的显示需要新增动画。对于这个需求，我们在直接使用transition包裹弹窗之后，设置对应进入和离开的CSS样式就可以了。首先，我们给transition动画设置name为modal，在style中通过对model对应的CSS设置过渡效果后，就给弹窗增加了弹窗的效果。</p><pre><code class=\"language-xml\">&lt;transition name=\"modal\"&gt;\n  &lt;div class=\"info-wrapper\" v-if=\"showModal\"&gt;\n    &lt;div class=\"info\"&gt;\n      哥，你啥也没输入！\n    &lt;/div&gt;\n   &lt;/div&gt;\n&lt;/transition&gt;\n\n\n\n&lt;style&gt;\n  .modal-enter-from {\n    opacity: 0;\n    transform: translateY(-60px);\n  }\n  .modal-enter-active {\n    transition: all 0.3s ease;\n  }\n  .modal-leave-to {\n    opacity: 0;\n    transform: translateY(-60px);\n  }\n  .modal-leave-active {\n    transition: all 0.3s ease;\n  }\n&lt;/style&gt;\n</code></pre><p>通过上面的代码，我们可以进行过渡效果的优化。优化后，前端页面的显示效果如下，可以看到弹窗有一个明显的滑入和划出的过渡效果。</p><p><img src=\"https://static001.geekbang.org/resource/image/1d/b4/1ddf1492ebddce584eac161e65d49bb4.gif?wh=646x463\" alt=\"图片\"></p><h2>列表动画</h2><p>学了transition组件后，小圣兴致勃勃地把清单应用的列表也做了动画显示，但是现在清单列表并不是一个单独的标签，而是v-for渲染的列表元素，所以小圣就来找我求助，问我怎么实现列表项依次动画出现的效果。</p><p>在Vue中，我们把这种需求称之为列表过渡。因为transition组件会把子元素作为一个整体同时去过渡，所以我们需要一个新的内置组件transition-group。在v-for渲染列表的场景之下，我们使用transition-group组件去包裹元素，通过tag属性去指定渲染一个元素。</p><p>此外，transition-group组件还有一个特殊之处，就是不仅可以进入和离开动画，还可以改变定位。就和之前的类名一样，这个功能新增了v-move类，在下面的代码中，使用transition-group包裹渲染的li元素，并且设置动画的name属性为flip-list。然后我们根据v-move的命名规范，设置 <code>.flip-list-move</code> 的过渡属性，就实现了列表依次出现的效果了。</p><pre><code class=\"language-xml\">    &lt;ul v-if=\"todos.length\"&gt;\n      &lt;transition-group name=\"flip-list\" tag=\"ul\"&gt;\n        &lt;li v-for=\"todo in todos\" :key=\"todo.title\"&gt;\n          &lt;input type=\"checkbox\" v-model=\"todo.done\" /&gt;\n          &lt;span :class=\"{ done: todo.done }\"&gt; {{ todo.title }}&lt;/span&gt;\n        &lt;/li&gt;\n      &lt;/transition-group&gt;\n\n    &lt;/ul&gt;\n&lt;style&gt;\n.flip-list-move {\n  transition: transform 0.8s ease;\n}\n.flip-list-enter-active,\n.flip-list-leave-active {\n  transition: all 1s ease;\n}\n.flip-list-enter-from,\n.flip-list-leave-to {\n  opacity: 0;\n  transform: translateX(30px);\n}\n&lt;/style&gt;\n</code></pre><p>通过上面的代码，我们就可以得到如下的实现效果。你可以看到，在新增列表和显示错误信息的弹窗上，都设置了过渡和动画。</p><h2><img src=\"https://static001.geekbang.org/resource/image/0b/a7/0b68e2ec1b617461f198094bd643aea7.gif?wh=646x463\" alt=\"图片\"></h2><h2>页面切换动画</h2><p>对于一般的前端页面应用来说，还有一个常见的动画切换的场景，就是在页面切换这个场景时的动画。<strong>这个动画切换场景的核心原理和弹窗动画是一样的，都是通过transition标签控制页面进入和离开的class</strong>。</p><p>现在默认是在vue-router的模式下，我们使用router-view组件进行动态的组件渲染。在路由发生变化的时候，我们计算出对应匹配的组件去填充router-view。</p><p>如果要在路由组件上使用转场，并且对导航进行动画处理，你就需要使用v-slot API。我们来到src/App.vue组件中，因为之前router-view没有子元素，所以我们要对代码进行修改。</p><p>在下面的代码中，router-view通过v-slot获取渲染的组件并且赋值给Component，然后使用transition 包裹需要渲染的组件，并且通过内置组件component的is属性动态渲染组件。这里vue-router的动画切换效果算是抛砖引玉，关于vue-router进阶的适用内容，全家桶实战篇后面的几讲还会继续深入剖析。</p><pre><code class=\"language-xml\">&lt;router-view v-slot=\"{ Component }\"&gt;\n  &lt;transition  name=\"route\" mode=\"out-in\"&gt;\n    &lt;component :is=\"Component\" /&gt;\n  &lt;/transition&gt;\n&lt;/router-view&gt;\n</code></pre><h2>JavaScript动画</h2><p>在前端的大部分交互场景中，动画的主要目的是提高交互体验，CSS动画足以应对大部分场景。但如果碰见比较复杂的动画场景，就需要用JavaScript来实现，比如购物车、地图等场景。</p><p>在下面的代码中，我们首先在清单应用中加上一个删除事项的功能，当点击删除图标来删除清单的时候，可以直接删除一行。</p><pre><code class=\"language-xml\">&lt;template&gt;\n\n    ...清单应用其他代码\n    \n      &lt;transition-group name=\"flip-list\" tag=\"ul\"&gt;\n        &lt;li v-for=\"(todo,i) in todos\" :key=\"todo.title\"&gt;\n          &lt;input type=\"checkbox\" v-model=\"todo.done\" /&gt;\n          &lt;span :class=\"{ done: todo.done }\"&gt; {{ todo.title }}&lt;/span&gt;\n          &lt;span class=\"remove-btn\" @click=\"removeTodo($event,i)\"&gt;\n            ❌\n          &lt;/span&gt;\n        &lt;/li&gt;\n      &lt;/transition-group&gt; \n&lt;/template&gt;\n&lt;script&gt;\n  function removeTodo(e,i){\n    todos.value.splice(i,1)\n  }\n&lt;/script&gt;\n</code></pre><p>通过上面的代码，我们能实现下面所示的效果：</p><p><img src=\"https://static001.geekbang.org/resource/image/5a/b2/5afba5a388f940995c39de50d04f7fb2.gif?wh=661x381\" alt=\"图片\"></p><p>如果我们想在删除的时候，实现一个图标飞到废纸篓的动画，那么在这个场景下，使用单纯的CSS动画就不好实现了，我们需要引入JavaScript来实现动画。实现的思路也很简单，我们放一个单独存在的动画元素并且藏起来，当点击删除图标的时候，我们把这个动画元素移动到鼠标的位置，再飞到废纸篓里藏起来就可以了。</p><p>具体怎么做呢？ 在Vue的transition组件里，我们可以分别设置before-enter，enter和after-enter三个函数来更精确地控制动画。</p><p>在下面的代码中，我们首先定义了animate响应式对象来控制动画元素的显示和隐藏，并且用transition标签包裹动画元素。在beforeEnter函数中，通过getBoundingClientRect函数获取鼠标的点击位置，让动画元素通过translate属性移动到鼠标所在位置；并且在enter钩子中，把动画元素移动到初始位置，在afterEnter中，也就是动画结束后，把动画元素再隐藏起来，这样就实现了类似购物车的飞入效果。</p><pre><code class=\"language-xml\">&lt;template&gt;\n    &lt;span class=\"dustbin\"&gt;\n      🗑\n    &lt;/span&gt;\n&lt;div class=\"animate-wrap\"&gt;\n    &lt;transition @before-enter=\"beforeEnter\" @enter=\"enter\" @after-enter=\"afterEnter\"&gt;\n        &lt;div class=\"animate\" v-show=\"animate.show\"&gt;\n            📋\n        &lt;/div&gt;\n    &lt;/transition&gt;\n&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\n\nlet animate = reactive({\n  show:false,\n  el:null\n})\nfunction beforeEnter(el){\n      let dom = animate.el\n      let rect = dom.getBoundingClientRect()\n      let x = window.innerWidth - rect.left - 60\n      let y = rect.top - 10\n      el.style.transform = `translate(-${x}px, ${y}px)`\n}\nfunction enter(el,done){\n      document.body.offsetHeight\n      el.style.transform = `translate(0,0)`\n      el.addEventListener('transitionend', done)\n}\nfunction afterEnter(el){\n      animate.show = false\n      el.style.display = 'none'\n}\nfunction removeTodo(e,i){\n  animate.el = e.target\n  animate.show = true\n  todos.value.splice(i,1)\n}\n&lt;/script&gt;\n&lt;style&gt;\n.animate-wrap .animate{\n    position :fixed;\n    right :10px;\n    top :10px;\n    z-index: 100;\n    transition: all 0.5s linear;\n}\n&lt;/style&gt;\n</code></pre><p>上面代码的显示效果如下，我们点击删除后，除了列表本身的动画移出效果，还多了一个飞入废纸篓的效果。你能看到，在引入JavaScript后，我们可以实现更多定制的动画效果。</p><h2><img src=\"https://static001.geekbang.org/resource/image/0d/00/0da30b53ee409874259965d0a86d4400.gif?wh=661x381\" alt=\"图片\"></h2><h2>总结</h2><p>今天这一讲的主要内容讲完了，我们来简单复习一下今天学到的知识点。</p><p>首先我们学习了前端使用CSS实现简单动画的transition和animation两个配置；然后，我们了解到了通过Vue 3提供的transition组件，我们可以控制在Vue中动画元素进入和离开页面时候的class；通过制定的命名规范，在CSS中设置过渡和动画效果，从而很方便地实现过渡效果，并且丰富了清单应用的弹窗功能；在这之后，我们使用transition-group实现列表元素的动画；最后，我还带你了解了vue-router中页面切换动画的实现方式。</p><p>相信学完今天这一讲，你会对Vue 3中实现简单动画的方式有所领会。今天我们实现的动画功能其实是Vue中动画的入门实战，所以我特意带你体验了全套玩法。不过你需要注意的是，实际开发中动画也不是越多越好，动画的设计也需要设计师去系统地设计效果，不要用动画做出眼花缭乱的网页。</p><p>而且，实际开发中如果想实现更复杂的动画，比如常见电商中商品飞入购物车的效果，管理系统中丰富的动画效果等，只借助transition组件是很难实现的。你需要借助JavaScript和第三方库的支持，在beforeEnter、enter、afterEnter等函数中实现动画。</p><h2>思考题</h2><p>关于今天设计的弹窗动画，如果想实现一个振动的效果，该如何实现呢？</p><p>欢迎在留言区留言讨论，也欢迎你把这一讲推荐给你的朋友、同事。我们下一讲见！</p>","comments":[{"had_liked":true,"id":320177,"user_name":"ll","can_delete":false,"product_type":"c1","uid":1296458,"ip_address":"","ucode":"57C5DAC5B51036","user_header":"https://static001.geekbang.org/account/avatar/00/13/c8/4a/3a322856.jpg","comment_is_top":false,"comment_ctime":1636106094,"is_pvip":true,"replies":[{"id":"116053","content":"太用心啦！","user_name":"作者回复","comment_id":320177,"uid":"1003715","ip_address":"","utype":1,"ctime":1636112979,"user_name_real":"花果山大圣"}],"discussion_count":5,"race_medal":0,"score":"220679438190","product_id":100094401,"comment_content":"边看回顾学过和用过的动画知识，总结下：<br>      1. 为什么要用动画？<br>         首先肯定不是为了“炫技”，从产品的角度，个人觉得是为了“降低用户理解难度”，因为<br>         “动” 意味着有“生气”，比较“自然”。回想下日常生活中，碰到的人或事，如果比较“自<br>         然”是不是意味着比较“好搞”，比较“容易相处”。而我们用动画就是为了实现这样的效果。<br><br>         当然用户体验这种事，大公司应该专门有个UX部门，我们前端主要还是要以实现为主，<br>         工程师还是要“多、快、好、省”的把事情做成，这就涉及到动画的具体实现。<br><br>      2. 动画的实现<br>         个人觉得动画的实现就是CSS的事，JS实现动画也是动态改变某个元素的CSS属性。这个<br>         过程可以看下隔壁李兵老师的《浏览器工作原理与实践》其中的渲染流水线的论述，这<br>         里强调下，如果较关注的动画性能问题，还是从动画的本质理解起：<br><br>         动画的本质：“从哪里来，到哪里去，中间过程是怎么样的”。<br><br>         以本节第一段代码来说，从哪里来&quot;from&quot;，就是 box.width=100px；去哪&quot;to&quot;, 就是<br>         box.width += 100px；后面为了“动起来”，加了个中间过程，是用&quot;transition&quot;实现的，<br>         当然还有其他实现，深究还涉及到贝叶斯曲线函数，“弹簧函数”之类的技术实现。<br><br>         提下动画的性能问题，简单说就是，改变有些 CSS 属性会影响渲染流程，就是常说的<br>         “重排，重绘，合成”。提供两个资源，可以具体看下，改变哪些属性会触发。<br>         – https:&#47;&#47;csstriggers.com&#47;<br>         – https:&#47;&#47;gist.github.com&#47;paulirish&#47;5d52fb081b3570c81e3a<br><br>      3. Vue 组件化实现<br>         Vue 提供了&lt;transition&gt;, &lt;transition-group&gt;两个组件来帮助我们实现业务中的动画<br>         需求，大大的提高了我们的开发效率。<br><br>         很神奇，有需求的同学可以看看源码，看看怎么实现的，应该能学到不少知识。","like_count":52,"discussions":[{"author":{"id":1242602,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/ea/5f046856.jpg","nickname":"Dale","note":"","ucode":"AD19A33FE5EEDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554635,"discussion_content":"“贝叶斯曲线”？你要表达的，怕是贝塞尔曲线吧？","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1646498339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2822362,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/10/da/4ca8e7f9.jpg","nickname":"ValarMorghulis","note":"","ucode":"EBE10B81DB9BD2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414187,"discussion_content":"大圣讲得好，课代表总结的也好","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1636684993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529908,"discussion_content":"太用心啦！","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636112979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2177627,"avatar":"https://static001.geekbang.org/account/avatar/00/21/3a/5b/e59f76a6.jpg","nickname":"婧子酱.","note":"","ucode":"B47F87EFA8F8F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572411,"discussion_content":"牛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652775159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1296458,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c8/4a/3a322856.jpg","nickname":"ll","note":"","ucode":"57C5DAC5B51036","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415299,"discussion_content":"哈哈，过奖过奖，共同进步","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637049462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320336,"user_name":"我叫兽儿…","can_delete":false,"product_type":"c1","uid":1588964,"ip_address":"","ucode":"18EE5512915F5D","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/e4/11c66f44.jpg","comment_is_top":false,"comment_ctime":1636263265,"is_pvip":false,"replies":[{"id":"116531","content":"很棒的总结和体验<br>第一部分实战代码在这里呀，欢迎遇见bug了提pr呀<br>https:&#47;&#47;github.com&#47;shengxinjing&#47;geektime-vue-course","user_name":"作者回复","comment_id":320336,"uid":"1003715","ip_address":"","utype":1,"ctime":1636638453,"user_name_real":"花果山大圣"}],"discussion_count":2,"race_medal":0,"score":"74650707297","product_id":100094401,"comment_content":"动手实现清单删除动画的时候，踩了一个小坑，在此记录一下，代码如下：<br>&lt;ul v-if=&quot;todolist.length&quot;&gt;<br>      &lt;transition-group name=&quot;list&quot; tag=&quot;ul&quot;&gt;<br>        &lt;li v-for=&quot;(item, index) in todolist&quot; :key=&quot;index&quot;&gt;<br>          &lt;input type=&quot;checkbox&quot; v-model=&quot;item.checked&quot; &#47;&gt;<br>          &lt;span&gt;{{ item.title }}&lt;&#47;span&gt;<br>          &lt;span @click=&quot;deleteItem($event, index)&quot; class=&quot;delete&quot;&gt;x&lt;&#47;span&gt;<br>        &lt;&#47;li&gt;<br>      &lt;&#47;transition-group&gt;<br>    &lt;&#47;ul&gt;<br>这里for循环我使用了index作为key，导致删除某一个li时，动画总是作用到最后一个li上。看了半天发现index会随着li的删除而变化，比如：我删除了第三个li，但是第四个会立马补上变成第三个，后面的li会依次向前补位，导致动画错乱。解决方式就是使用唯一的不会变的值作为key，比如id.<br><br>愿共同学习，共同进步！","like_count":17,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529962,"discussion_content":"很棒的总结和体验\n第一部分实战代码在这里呀，欢迎遇见bug了提pr呀\nhttps://github.com/shengxinjing/geektime-vue-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2817281,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/fd/01/8d4a247c.jpg","nickname":"就不吃苹果","note":"","ucode":"D416C9E7704906","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415316,"discussion_content":"是的，我是把时间戳转换成字符串之后作为了id","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637054065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320102,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":2625082,"ip_address":"","ucode":"3185F34B1BCFCE","user_header":"https://static001.geekbang.org/account/avatar/00/28/0e/3a/24b79152.jpg","comment_is_top":false,"comment_ctime":1636082385,"is_pvip":false,"replies":[{"id":"116059","content":"手动触发一次重绘，开始动画","user_name":"作者回复","comment_id":320102,"uid":"1003715","ip_address":"","utype":1,"ctime":1636113081,"user_name_real":"花果山大圣"}],"discussion_count":5,"race_medal":0,"score":"44585755345","product_id":100094401,"comment_content":"想請問一下<br><br>function enter(el,done){<br>     document.body.offsetHeight <br>     el.style.transform = `translate(0,0)` <br>     el.addEventListener(&#39;transitionend&#39;, done)<br>}<br> document.body.offsetHeight 這一行的作用是什麼？<br>感謝","like_count":10,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529873,"discussion_content":"手动触发一次重绘，开始动画","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636113081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1078607,"avatar":"https://static001.geekbang.org/account/avatar/00/10/75/4f/e22e91b2.jpg","nickname":"雪狼","note":"","ucode":"13C697D0B694B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":540240,"discussion_content":"enter 钩子需要手动重绘，还需要监听完成 el.addEventListener(&#39;transitionend&#39;,done)，完成之后才交到afterEnter \n初略的看了一下官网的都用的gsap展示例子，不如你这样展示看的更明白","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639997948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":529873,"ip_address":""},"score":540240,"extra":""}]},{"author":{"id":1936087,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8a/d7/daabec34.jpg","nickname":"tequ1lAneio","note":"","ucode":"41336E87FF2E1A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412196,"discussion_content":"为了强制重绘，换成其他的可以触发重绘的操作也能实现这样的效果，只不过获取offsetHeight看起来没有副作用不接收也不占内存空间。","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1636099460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2649877,"avatar":"","nickname":"肖辉鉴","note":"","ucode":"8760E7C1299230","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540694,"discussion_content":"确实不注释的话会感觉有点疑惑还以为笔误了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640139431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2827587,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erYxdZiaviaS6wtoOA0NJHmAGLzZTyxKnWdicD17q6HARtJeaD4sS4mGQZu5WuDOicBEeGl3dX0TWZQcQ/132","nickname":"szpg","note":"","ucode":"CAA33E5609F178","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412161,"discussion_content":"同问！！  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636091356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327269,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1640020849,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"31704791921","product_id":100094401,"comment_content":"<br>列表动画那一部分，tag 的目的是给 li 渲染一个 ul 父元素，且要给 v-for 指定一个 key 属性，否则动画是不会有效果的。","like_count":6},{"had_liked":false,"id":322613,"user_name":"Geek_0c8aff","can_delete":false,"product_type":"c1","uid":2636593,"ip_address":"","ucode":"64089C32DB4CA9","user_header":"","comment_is_top":false,"comment_ctime":1637500122,"is_pvip":false,"replies":[{"id":"118401","content":"赞，nextTick也可以","user_name":"作者回复","comment_id":322613,"uid":"1003715","ip_address":"","utype":1,"ctime":1639404093,"user_name_real":"编辑"}],"discussion_count":5,"race_medal":0,"score":"31702271194","product_id":100094401,"comment_content":"&#47;&#47; bug, 删除todo的最后一项，加入垃圾桶的动画位置不对（0,0），以下是我的修改。<br>function removeTodo(e: any, i: number) {<br>      animate.el = e.target<br>      animate.show = true<br>      setTimeout(()=&gt;{<br>        todos.value.splice(i, 1)<br>      },100)<br>    }","like_count":7,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538412,"discussion_content":"赞，nextTick也可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639404094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1078607,"avatar":"https://static001.geekbang.org/account/avatar/00/10/75/4f/e22e91b2.jpg","nickname":"雪狼","note":"","ucode":"13C697D0B694B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":540236,"discussion_content":"为啥我todos不用写value，直接todos.splice(i, 1)，todos也用reactive包裹了呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639997348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":538412,"ip_address":""},"score":540236,"extra":""}]},{"author":{"id":2678493,"avatar":"https://static001.geekbang.org/account/avatar/00/28/de/dd/5243309b.jpg","nickname":"YFCHEN","note":"","ucode":"2B76C7F4D557FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540735,"discussion_content":"有点想不明白这个问题，为什么删除最后一个才会出现动画位置不对的情况呢？加上定时器为什么就能解决呢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640145779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":2678493,"avatar":"https://static001.geekbang.org/account/avatar/00/28/de/dd/5243309b.jpg","nickname":"YFCHEN","note":"","ucode":"2B76C7F4D557FB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572488,"discussion_content":"是的，我也没想明白","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652801129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":540735,"ip_address":""},"score":572488,"extra":""},{"author":{"id":2571581,"avatar":"https://static001.geekbang.org/account/avatar/00/27/3d/3d/7fe4846f.jpg","nickname":"崔皓","note":"","ucode":"C55F6A35466B32","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":588468,"discussion_content":"删除最后一个li元素的之后，li已经不在dom上了，不在dom上的元素的坐标就是（0，0）,用定时器执行是为了异步执行删除li，主线程先不删除li以便于图标可以正确定位，等主线程任务（给图标定位）执行完了，再回来删除li","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663774055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":572488,"ip_address":"浙江"},"score":588468,"extra":""}]}]},{"had_liked":false,"id":320672,"user_name":"柒月","can_delete":false,"product_type":"c1","uid":1371240,"ip_address":"","ucode":"839A8F88C376A3","user_header":"https://static001.geekbang.org/account/avatar/00/14/ec/68/06d59613.jpg","comment_is_top":false,"comment_ctime":1636446374,"is_pvip":false,"replies":[{"id":"116524","content":"很赞的提醒，第一部分实战代码在这里呀，欢迎遇见bug了提pr呀<br>https:&#47;&#47;github.com&#47;shengxinjing&#47;geektime-vue-course","user_name":"作者回复","comment_id":320672,"uid":"1003715","ip_address":"","utype":1,"ctime":1636638218,"user_name_real":"花果山大圣"}],"discussion_count":7,"race_medal":0,"score":"31701217446","product_id":100094401,"comment_content":"页面切换动画的时候，要求路由组件必须要有个根元素包裹，不然动画不生效的。<br>https:&#47;&#47;stackoverflow.com&#47;questions&#47;65553121&#47;vue-3-transition-renders-non-element-root-node-that-cannot-be-animated","like_count":7,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530081,"discussion_content":"很赞的提醒，第一部分实战代码在这里呀，欢迎遇见bug了提pr呀\nhttps://github.com/shengxinjing/geektime-vue-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2636593,"avatar":"","nickname":"Geek_0c8aff","note":"","ucode":"64089C32DB4CA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532010,"discussion_content":"&lt;router-view v-slot=&#34;{ Component,route }&#34;&gt;\n    &lt;transition name=&#34;route&#34; mode=&#34;out-in&#34;&gt;\n      &lt;div :key=&#34;route.name&#34;&gt;\n      &lt;component :is=&#34;Component&#34; /&gt;\n      &lt;/div&gt;\n    &lt;/transition&gt;\n  &lt;/router-view&gt;\n// 这样就可以实现","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1637499558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2530170,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ9oIRvWZARRkKiayTYw9MNGPQbprTvMZhSk9icw6Ifib8iaSfTLhniaMdJ9LE4NMqSFRxuXZFGZf8NkUQ/132","nickname":"Geek_aa3c34","note":"","ucode":"9B4C3C594F58D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549795,"discussion_content":"的确需要包裹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644243522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2893240,"avatar":"","nickname":"Geek_1ecc87","note":"","ucode":"C86309AF8AD535","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546073,"discussion_content":"当有相同标签名的元素切换时，需要通过 key attribute 设置唯一的值来标记以让 Vue 区分它们，否则 Vue 为了效率只会替换相同标签内部的内容。即使在技术上没有必要，给在 &lt;transition&gt; 组件中的多个元素设置 key 是一个更好的实践。\n\nhttps://cn.vuejs.org/v2/guide/transitions.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642152955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1078607,"avatar":"https://static001.geekbang.org/account/avatar/00/10/75/4f/e22e91b2.jpg","nickname":"雪狼","note":"","ucode":"13C697D0B694B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540243,"discussion_content":"是这样的，必须放在一个root元素下才生效","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639998180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1232975,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d0/4f/b068b1b3.jpg","nickname":"Dean","note":"","ucode":"9003F1E9ECD286","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415243,"discussion_content":"是改成这样吗？\n<router-view v-slot=&#34;{ Component }&#34;>\n    <transition name=&#34;route&#34; mode=&#34;out-in&#34;>\n      <div>\n        <component :is=&#34;Component&#34; />\n      </div>\n    </transition>\n  </router-view>\n我加了css，但还是没有动画效果啊\n<style scoped>\n/* route transitions */\n.route-enter-from {\n  opacity: 0;\n  transform: translateX(100px);\n}\n.route-enter-active {\n  transition: all 0.3s ease-out;\n}\n.route-leave-to {\n  opacity: 0;\n  transform: translateX(-100px);\n}\n.route-leave-active {\n  transition: all 0.3s ease-in;\n}\n</style>","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637035561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1232975,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d0/4f/b068b1b3.jpg","nickname":"Dean","note":"","ucode":"9003F1E9ECD286","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557520,"discussion_content":"不是，是组件中必须是要有一个根元素。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647849635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":415243,"ip_address":""},"score":557520,"extra":""}]}]},{"had_liked":false,"id":320194,"user_name":"bugu","can_delete":false,"product_type":"c1","uid":1862545,"ip_address":"","ucode":"FEBF82A876C979","user_header":"https://static001.geekbang.org/account/avatar/00/1c/6b/91/168e10a1.jpg","comment_is_top":false,"comment_ctime":1636115291,"is_pvip":true,"replies":[{"id":"118393","content":"tag的目的是给li渲染一个ul父元素，倒是不会影响实际功能，不过会让html更语义化一些<br>","user_name":"作者回复","comment_id":320194,"uid":"1003715","ip_address":"","utype":1,"ctime":1639402955,"user_name_real":"编辑"}],"discussion_count":5,"race_medal":0,"score":"27405919067","product_id":100094401,"comment_content":"问一个问题：列表动画那一部分transition-group ，设置 tag 的作用是什么呢？我尝试去掉tag，没有看出什么差异。<br>还有下面move的动画设定<br>.flip-list-move {<br>  transition: transform 2s ease;<br>}<br>我尝试修改和删除，也没有看出什么差异。<br><br>请帮忙指定一下，谢谢老师和各位同学","like_count":6,"discussions":[{"author":{"id":2827040,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/23/20/5fd6ed6f.jpg","nickname":"碎竹落棋","note":"","ucode":"6064F35EC5A33F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414308,"discussion_content":"不设置tag默认就是span","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1636718169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2044091,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/30/bb/5988ecdb.jpg","nickname":"Margin","note":"","ucode":"2AC4BE40B4222D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537763,"discussion_content":"tag的作用是把transition-group渲染成什么元素。比如为了符合规范，ul下面最好是li，tbody下最好是tr","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1639180244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1698735,"avatar":"https://static001.geekbang.org/account/avatar/00/19/eb/af/e49af9a8.jpg","nickname":"JC.彦","note":"","ucode":"E87C1420B140F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413033,"discussion_content":"v-move需要配合position属性使用才会有效，tag的作用是把transition-group渲染成什么元素。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1636365922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538401,"discussion_content":"tag的目的是给li渲染一个ul父元素，倒是不会影响实际功能，不过会让html更语义化一些\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639402955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261700,"avatar":"https://static001.geekbang.org/account/avatar/00/13/40/84/65032a15.jpg","nickname":"黄金","note":"","ucode":"3CF4417C9D9264","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578434,"discussion_content":"与transition不同的是，group transition会将标签渲染成真实标签，使用tag则会指定渲染成什么标签，默认是span","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656740732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330759,"user_name":"Geek_1ecc87","can_delete":false,"product_type":"c1","uid":2893240,"ip_address":"","ucode":"C86309AF8AD535","user_header":"","comment_is_top":false,"comment_ctime":1642148322,"is_pvip":false,"replies":[{"id":"120837","content":"key是vue内部识别一个dom是否可以重用的标志   没有key的话dom很难复用","user_name":"作者回复","comment_id":330759,"uid":"1003715","ip_address":"","utype":1,"ctime":1642338351,"user_name_real":"编辑"}],"discussion_count":2,"race_medal":0,"score":"14527050210","product_id":100094401,"comment_content":"为什么要在v-for li中指定key添加任务的时候动画才会生效？","like_count":3,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546538,"discussion_content":"key是vue内部识别一个dom是否可以重用的标志   没有key的话dom很难复用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642338351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572728,"discussion_content":"主要是为了渲染效率吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652937912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327235,"user_name":"雪狼","can_delete":false,"product_type":"c1","uid":1078607,"ip_address":"","ucode":"13C697D0B694B2","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/4f/e22e91b2.jpg","comment_is_top":false,"comment_ctime":1639998574,"is_pvip":false,"replies":[{"id":"119281","content":"感谢建议，我尽快改进","user_name":"作者回复","comment_id":327235,"uid":"1003715","ip_address":"","utype":1,"ctime":1640229420,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"14524900462","product_id":100094401,"comment_content":"课程非常棒，在学习过程中提几个建议<br><br>1、部分代码能加点注释更方便理解，比如enter函数<br>2、css没有写全，比如垃圾筐的，这倒也不是大问题<br>3、如果每讲，最后能有一个本讲完整的实例代码贴到最后，更方便查看<br>4、动画需要一个root节点包裹才能生效，课程中没有体现出来的","like_count":3,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541005,"discussion_content":"感谢建议，我尽快改进","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640229420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323696,"user_name":"Zachy","can_delete":false,"product_type":"c1","uid":1438296,"ip_address":"","ucode":"C151EE2595DAC9","user_header":"https://static001.geekbang.org/account/avatar/00/15/f2/58/c5153d1d.jpg","comment_is_top":false,"comment_ctime":1638103197,"is_pvip":false,"replies":[{"id":"118374","content":"very geliable！！！","user_name":"作者回复","comment_id":323696,"uid":"1003715","ip_address":"","utype":1,"ctime":1639401451,"user_name_real":"编辑"}],"discussion_count":2,"race_medal":0,"score":"14523005085","product_id":100094401,"comment_content":"&#47;&#47; 强迫症下把删除动画精准还原到垃圾桶位置，暂时没加抛物线，否则效果更佳。<br>const {animate,beforeEnter, enter, afterEnter,removeTodo}  = useAnimation();<br><br>function useAnimation(){<br>  let animate = reactive({<br>    show: false,<br>    el: null,<br>  });<br>  const dustbin ={ <br>    el:null,<br>    pos:[],<br>    init(queryStr){<br>      this.el = document.querySelector(queryStr);<br>      this.getPos();<br>    },<br>    getPos(){<br>      const { left, top} = this.el.getBoundingClientRect();<br>      this.pos[0] = left;<br>      this.pos[1] = top;<br>    }<br>  }<br>  function beforeEnter(el) {<br>    let dom = animate.el;<br>    let rect = dom.getBoundingClientRect();<br>    const  aniEl=  document.querySelector(&#39;.animate&#39;);<br>    &#47;&#47;动画元素 调整到dustbin的位置,也可以css直接写精准位置<br>    aniEl.style.left = `${dustbin.pos[0]}px`; <br>    aniEl.style.top= `${dustbin.pos[1]}px`;<br>    &#47;&#47;计算并赋值偏移量<br>    let dx = dustbin.pos[0] - rect.left;<br>    let dy = dustbin.pos[1] - rect.top;<br>    el.style.transform = `translate(-${dx}px, ${dy*-1}px)`;<br>  }<br>  function enter(el, done) {<br>    document.body.offsetHeight;<br>    el.style.transform = `translate(0,0)`;<br>    el.addEventListener(&quot;transitionend&quot;, done);<br>  }<br>  function afterEnter(el) {<br>    animate.show = false;<br>    el.style.display = &quot;none&quot;;<br>  }<br>function removeTodo(e,i){<br>      animate.el = e.target<br>      animate.show = true<br>      todos.value.splice(i, 1);<br>      dustbin.init(&#39;.dustbin&#39;);<br>    }<br>  return {animate,beforeEnter,enter,afterEnter,removeTodo}<br>}","like_count":4,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538373,"discussion_content":"very geliable！！！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639401451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540666,"discussion_content":"\n如何加抛物线？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640133228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320517,"user_name":"微妙","can_delete":false,"product_type":"c1","uid":2816400,"ip_address":"","ucode":"65B09C782D5FCF","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f9/90/ddb4aba4.jpg","comment_is_top":false,"comment_ctime":1636364442,"is_pvip":false,"replies":[{"id":"116517","content":"给你点个赞，这里演示我确实没考虑到负数的情况，囧<br><br>第一部分实战代码在这里呀，欢迎遇见bug了提pr呀<br>https:&#47;&#47;github.com&#47;shengxinjing&#47;geektime-vue-course","user_name":"作者回复","comment_id":320517,"uid":"1003715","ip_address":"","utype":1,"ctime":1636638082,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"14521266330","product_id":100094401,"comment_content":"el.style.transform = `translate(-${x}px, ${y}px)` <br>模板字符串中当x为负数时会被识别为 --xpx，导致transform识别不出而变为 translate(0px, 0px);<br>应先计算好x、y的值，然后在模板字符串内赋值","like_count":3,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530025,"discussion_content":"给你点个赞，这里演示我确实没考虑到负数的情况，囧\n\n第一部分实战代码在这里呀，欢迎遇见bug了提pr呀\nhttps://github.com/shengxinjing/geektime-vue-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321828,"user_name":"于三妮","can_delete":false,"product_type":"c1","uid":2464787,"ip_address":"","ucode":"36884C1BE51F7A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7icj7X67vvABNjC284ichONicn6PFeZSUAdclWKr8FJIHfWUzx6azxPuDcCNODV8ZmqXMAUibvJZiaXsYxKCmtJfxkg/132","comment_is_top":false,"comment_ctime":1637055782,"is_pvip":false,"replies":[{"id":"118384","content":"其实就是emoji","user_name":"作者回复","comment_id":321828,"uid":"1003715","ip_address":"","utype":1,"ctime":1639401945,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"10226990374","product_id":100094401,"comment_content":"请问那个红叉叉是什么格式的，这种图片要哪里找","like_count":2,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538391,"discussion_content":"其实就是emoji","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639401945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321389,"user_name":"小胖","can_delete":false,"product_type":"c1","uid":1098584,"ip_address":"","ucode":"B1C0EFDD821630","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/58/ba171e09.jpg","comment_is_top":false,"comment_ctime":1636821981,"is_pvip":false,"replies":[{"id":"118417","content":"splice那一句用setTimeout报一下就OK拉 ","user_name":"作者回复","comment_id":321389,"uid":"1003715","ip_address":"","utype":1,"ctime":1639405037,"user_name_real":"编辑"}],"discussion_count":2,"race_medal":0,"score":"10226756573","product_id":100094401,"comment_content":"反馈个bug,最近一条todo删除，y坐标的值会为0","like_count":2,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538433,"discussion_content":"splice那一句用setTimeout报一下就OK拉 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639405037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572727,"discussion_content":"没有理解到为啥要 setTimeout 一下呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652937649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321388,"user_name":"小胖","can_delete":false,"product_type":"c1","uid":1098584,"ip_address":"","ucode":"B1C0EFDD821630","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/58/ba171e09.jpg","comment_is_top":false,"comment_ctime":1636821854,"is_pvip":false,"replies":[{"id":"116998","content":"这个是手动触发一次重绘 算是启动动画","user_name":"作者回复","comment_id":321388,"uid":"1003715","ip_address":"","utype":1,"ctime":1637243372,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"10226756446","product_id":100094401,"comment_content":"大圣老师，问下，在enter函数里面为什么需要添加一行document.body.offsetHeight，我尝试，不添加这句动画就不会生效；<br>","like_count":2,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531163,"discussion_content":"这个是手动触发一次重绘 算是启动动画","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637243372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321163,"user_name":"笑叹尘世","can_delete":false,"product_type":"c1","uid":2818538,"ip_address":"","ucode":"1A034809EF9B61","user_header":"https://static001.geekbang.org/account/avatar/00/2b/01/ea/d0be0574.jpg","comment_is_top":false,"comment_ctime":1636696896,"is_pvip":false,"replies":[{"id":"116640","content":"这是右上角废纸篓和右侧举例 以及你点击位置和X图标左侧举例之和的一个估计值","user_name":"作者回复","comment_id":321163,"uid":"1003715","ip_address":"","utype":1,"ctime":1636770133,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"10226631488","product_id":100094401,"comment_content":"let x = window.innerWidth - rect.left - 60<br>弱弱的问一下这个60是哪里的来的数值？","like_count":2,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530234,"discussion_content":"这是右上角废纸篓和右侧举例 以及你点击位置和X图标左侧举例之和的一个估计值","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636770133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320525,"user_name":"JC.彦","can_delete":false,"product_type":"c1","uid":1698735,"ip_address":"","ucode":"E87C1420B140F4","user_header":"https://static001.geekbang.org/account/avatar/00/19/eb/af/e49af9a8.jpg","comment_is_top":false,"comment_ctime":1636366067,"is_pvip":false,"replies":[{"id":"116207","content":"在removeTodo里会吧点击的元素复制给animate.el","user_name":"作者回复","comment_id":320525,"uid":"1003715","ip_address":"","utype":1,"ctime":1636378147,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"10226300659","product_id":100094401,"comment_content":"let dom = animate.el为什么获取的是要删除的li元素？","like_count":2,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530030,"discussion_content":"在removeTodo里会吧点击的元素复制给animate.el","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636378147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320180,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1239362,"ip_address":"","ucode":"1B5EF54A2A56F8","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/42/1de79e71.jpg","comment_is_top":false,"comment_ctime":1636106969,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10226041561","product_id":100094401,"comment_content":"打卡<br>1. 使用animate.css的shake动画改变弹窗元素的classname<br>2. 使用transition组件，分别在enter，leave设置对应的特定类名样式<br> 3.使用transition的js对应的钩子实现","like_count":2},{"had_liked":false,"id":320058,"user_name":"Geek_a84b8d","can_delete":false,"product_type":"c1","uid":2816188,"ip_address":"","ucode":"F10C3CDAABDEE5","user_header":"","comment_is_top":false,"comment_ctime":1636071599,"is_pvip":false,"replies":[{"id":"116060","content":"对滴","user_name":"作者回复","comment_id":320058,"uid":"1003715","ip_address":"","utype":1,"ctime":1636113104,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"10226006191","product_id":100094401,"comment_content":"思考题 可以在@keyframes move多设置几个百分比和对应的top值","like_count":2,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529858,"discussion_content":"对滴","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636113104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320051,"user_name":"小胖","can_delete":false,"product_type":"c1","uid":1098584,"ip_address":"","ucode":"B1C0EFDD821630","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/58/ba171e09.jpg","comment_is_top":false,"comment_ctime":1636066964,"is_pvip":false,"replies":[{"id":"116061","content":"不是，就是普通的emoji，参考这里<br>https:&#47;&#47;www.emojiall.com&#47;zh-hans&#47;emoji&#47;%F0%9F%97%91","user_name":"作者回复","comment_id":320051,"uid":"1003715","ip_address":"","utype":1,"ctime":1636113154,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"10226001556","product_id":100094401,"comment_content":"我想问下大圣老师，这些个字体图标是有什么vs插件么？","like_count":2,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529853,"discussion_content":"不是，就是普通的emoji，参考这里\nhttps://www.emojiall.com/zh-hans/emoji/%F0%9F%97%91","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636113154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335477,"user_name":"Geek_27b6ec","can_delete":false,"product_type":"c1","uid":1682745,"ip_address":"","ucode":"CAB158FB7F15A7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLok8xc4lQfDjjxDUF6iatEUYibVqYeGRU22EtIO3xcgjSvuO7vKwfKSc3cGoNOicp1icQlC2vOKaIGmw/132","comment_is_top":false,"comment_ctime":1645532457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5940499753","product_id":100094401,"comment_content":"最后一个垃圾桶的完整代码有么","like_count":1},{"had_liked":false,"id":333107,"user_name":"南城","can_delete":false,"product_type":"c1","uid":1377308,"ip_address":"","ucode":"EB6029016A46FE","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/1c/7899bab4.jpg","comment_is_top":false,"comment_ctime":1644073391,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5939040687","product_id":100094401,"comment_content":"过渡我到觉得实用率一般，其实接口效能，缓存上去了用户体感就好了，动画的过渡还不如状态中间状态确定性开的更符合用研。不过学是真学到了，我也不常用","like_count":1},{"had_liked":false,"id":329445,"user_name":"HAYWAEL","can_delete":false,"product_type":"c1","uid":1381899,"ip_address":"","ucode":"32A41ADFDB15E8","user_header":"https://static001.geekbang.org/account/avatar/00/15/16/0b/18dce773.jpg","comment_is_top":false,"comment_ctime":1641352445,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5936319741","product_id":100094401,"comment_content":"思考题<br><br>@keyframes shake {<br><br>    0%,<br>    100% {<br>        transform: translateX(0)<br>    }<br><br>    10% {<br>        transform: translateX(-9px)<br>    }<br><br>    20% {<br>        transform: translateX(8px)<br>    }<br><br>    30% {<br>        transform: translateX(-7px)<br>    }<br><br>    40% {<br>        transform: translateX(6px)<br>    }<br><br>    50% {<br>        transform: translateX(-5px)<br>    }<br><br>    60% {<br>        transform: translateX(4px)<br>    }<br><br>    70% {<br>        transform: translateX(-3px)<br>    }<br><br>    80% {<br>        transform: translateX(2px)<br>    }<br><br>    90% {<br>        transform: translateX(-1px)<br>    }<br>}","like_count":1},{"had_liked":false,"id":323277,"user_name":"一起","can_delete":false,"product_type":"c1","uid":2849859,"ip_address":"","ucode":"13C8ACE331F5DD","user_header":"","comment_is_top":false,"comment_ctime":1637812780,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5932780076","product_id":100094401,"comment_content":"请问为什么在 afterEnter这个函数中，不设置el.style.display这句代码，动画会在结束时会停顿一两秒才消失？","like_count":1},{"had_liked":false,"id":356383,"user_name":"Soffio","can_delete":false,"product_type":"c1","uid":3167662,"ip_address":"广东","ucode":"386C0963A7D356","user_header":"https://static001.geekbang.org/account/avatar/00/30/55/ae/de8cf97c.jpg","comment_is_top":false,"comment_ctime":1662227413,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662227413","product_id":100094401,"comment_content":"思考题：<br> &lt;span :class=&quot;[&#39;dustbin&#39;, { shake: isDel }]&quot;&gt;🗑️&lt;&#47;span&gt;<br><br>.shake {<br>  animation: shake 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;<br>  transform: translate3d(0, 0, 0);<br>  backface-visibility: hidden;<br>  perspective: 1000px;<br>}<br><br>@keyframes shake {<br>  10%,<br>  90% {<br>    transform: translate3d(-1px, 0, 0);<br>  }<br><br>  20%,<br>  80% {<br>    transform: translate3d(2px, 0, 0);<br>  }<br><br>  30%,<br>  50%,<br>  70% {<br>    transform: translate3d(-4px, 0, 0);<br>  }<br><br>  40%,<br>  60% {<br>    transform: translate3d(4px, 0, 0);<br>  }<br>}<br>1、点击删除的时候，通过一个布尔值添加抖动的类，开启个定时器跟图标走向垃圾桶的时长一样，定时器里面把布尔值设置true，然后nextTick的时候把布尔值设为false。","like_count":0},{"had_liked":false,"id":350030,"user_name":"mess.","can_delete":false,"product_type":"c1","uid":2816336,"ip_address":"","ucode":"570B282FC2D3C6","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f9/50/17255736.jpg","comment_is_top":false,"comment_ctime":1656512773,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1656512773","product_id":100094401,"comment_content":"这行 document.body.offsetHeight 是触发了什么机制？没有还不行","like_count":0},{"had_liked":false,"id":346831,"user_name":"黎川","can_delete":false,"product_type":"c1","uid":2826349,"ip_address":"","ucode":"EA55A6763FC00B","user_header":"https://static001.geekbang.org/account/avatar/00/2b/20/6d/c16a5f67.jpg","comment_is_top":false,"comment_ctime":1653466600,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653466600","product_id":100094401,"comment_content":"translate(-2px,-2px)这样就能抖动了<br>","like_count":0},{"had_liked":false,"id":346069,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1652801175,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1652801175","product_id":100094401,"comment_content":"为什么删除最后一个才会出现动画位置不对的情况呢？<br>加上定时器为什么就能解决呢？","like_count":0},{"had_liked":false,"id":343946,"user_name":"Summer夏","can_delete":false,"product_type":"c1","uid":1565400,"ip_address":"","ucode":"D26F33CA79F92E","user_header":"https://static001.geekbang.org/account/avatar/00/17/e2/d8/913105f5.jpg","comment_is_top":false,"comment_ctime":1651136175,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651136175","product_id":100094401,"comment_content":"&lt;ul v-if=&quot;todos.length&quot;&gt; 这个v-if不去掉的话  列表删除完后再新增第一条是没有动画的。","like_count":0},{"had_liked":false,"id":330981,"user_name":"Geek_9012fa","can_delete":false,"product_type":"c1","uid":2863882,"ip_address":"","ucode":"6220B3F0C8F827","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epsArz5gck1iasmRzHNfTzpKrHgXXCEwldkBGFRdDzEwp1kQWL7Z2M8Mh9PvDjOzicAaLy2ibeLGV2og/132","comment_is_top":false,"comment_ctime":1642335880,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1642335880","product_id":100094401,"comment_content":"有个问题，那flip-list-move刚开始设置与否感觉没啥区别，后面试了下新增todo往数组中间插入，如果设置了flip-list-move，则新插入的todo底下的其他项会有下移动画，而不是突兀下移。<br><br>但是，用removeTodo删除的时候，上移却是突兀上移了...没有上移动画了，这是BUG呢还是少设置了什么？","like_count":0,"discussions":[{"author":{"id":1585520,"avatar":"https://static001.geekbang.org/account/avatar/00/18/31/70/0ce98fbf.jpg","nickname":"joyjoe","note":"","ucode":"FA7D29C18D86AD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552087,"discussion_content":"v-move只有在transition-group组件非v-if条件渲染下才会有效，可以考虑包裹transtion-group组件的父标签上使用v-if。另外你这个效果是因为v-leave-active, v-enter-active, v-leave-to, v-enter-from没有正确设置导致的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645281379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322005,"user_name":"尘一粒","can_delete":false,"product_type":"c1","uid":2082196,"ip_address":"","ucode":"1BBB911123BDED","user_header":"https://static001.geekbang.org/account/avatar/00/1f/c5/94/658c7e4c.jpg","comment_is_top":false,"comment_ctime":1637134599,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637134599","product_id":100094401,"comment_content":"el.style.transform = `translate(-${x}px, ${y}px)`<br>这个界面设置的origin是右上角顶点哇<br>","like_count":0},{"had_liked":false,"id":320096,"user_name":"随心所欲。","can_delete":false,"product_type":"c1","uid":2389104,"ip_address":"","ucode":"013C92739DC6D2","user_header":"https://static001.geekbang.org/account/avatar/00/24/74/70/b9f26dfb.jpg","comment_is_top":false,"comment_ctime":1636081320,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636081320","product_id":100094401,"comment_content":"点个赞","like_count":0},{"had_liked":false,"id":320093,"user_name":"Geek_c2c81c","can_delete":false,"product_type":"c1","uid":2828519,"ip_address":"","ucode":"6D3E4596458641","user_header":"","comment_is_top":false,"comment_ctime":1636080743,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636080743","product_id":100094401,"comment_content":"第一个!","like_count":0},{"had_liked":false,"id":320061,"user_name":"亮","can_delete":false,"product_type":"c1","uid":2832280,"ip_address":"","ucode":"37DACBB8221C50","user_header":"https://static001.geekbang.org/account/avatar/00/2b/37/98/f889105a.jpg","comment_is_top":false,"comment_ctime":1636072545,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1636072545","product_id":100094401,"comment_content":"挺全","like_count":0},{"had_liked":false,"id":320055,"user_name":"Johnson","can_delete":false,"product_type":"c1","uid":1326108,"ip_address":"","ucode":"C6B6FF9EA4CC60","user_header":"https://static001.geekbang.org/account/avatar/00/14/3c/1c/47e5b7aa.jpg","comment_is_top":false,"comment_ctime":1636070367,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636070367","product_id":100094401,"comment_content":"总结的很全面😁","like_count":0}]}