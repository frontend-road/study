{"id":140763,"title":"04 | 系统设计目标（二）：系统怎样做到高可用？","content":"<p>你好，我是唐扬。</p><p>开课之后，有同学反馈说课程中偏理论知识的讲解比较多，希望看到实例。我一直关注这些声音，也感谢你提出的建议，在04讲的开篇，我想对此作出一些回应。</p><p>在课程设计时，我主要想用基础篇中的前五讲内容带你了解一些关于高并发系统设计的基本概念，期望能帮你建立一个整体的框架，这样方便在后面的演进篇和实战篇中对涉及的知识点做逐一的展开和延伸。比方说，本节课提到了降级，那我会在运维篇中以案例的方式详细介绍降级方案的种类以及适用的场景，之所以这么设计是期望通过前面少量的篇幅把课程先串起来，以点带面，逐步展开。</p><p>当然，不同的声音是我后续不断优化课程内容的动力，我会认真对待每一条建议，不断优化课程，与你一起努力、进步。</p><p>接下来，让我们正式进入课程。</p><p>本节课，我会继续带你了解高并发系统设计的第二个目标——高可用性。你需要在本节课对提升系统可用性的思路和方法有一个直观的了解，这样，当后续对点讲解这些内容时，你能马上反应过来，你的系统在遇到可用性的问题时，也能参考这些方法进行优化。</p><p><strong>高可用性（High Availability，HA）</strong>是你在系统设计时经常会听到的一个名词，它指的是系统具备较高的无故障运行的能力。</p><!-- [[[read_end]]] --><p>我们在很多开源组件的文档中看到的HA方案就是提升组件可用性，让系统免于宕机无法服务的方案。比如，你知道Hadoop 1.0中的NameNode是单点的，一旦发生故障则整个集群就会不可用；而在Hadoop2中提出的NameNode HA方案就是同时启动两个NameNode，一个处于Active状态，另一个处于Standby状态，两者共享存储，一旦Active NameNode发生故障，则可以将Standby NameNode切换成Active状态继续提供服务，这样就增强了Hadoop的持续无故障运行的能力，也就是提升了它的可用性。</p><p>通常来讲，一个高并发大流量的系统，系统出现故障比系统性能低更损伤用户的使用体验。想象一下，一个日活用户过百万的系统，一分钟的故障可能会影响到上千的用户。而且随着系统日活的增加，一分钟的故障时间影响到的用户数也随之增加，系统对于可用性的要求也会更高。所以今天，我就带你了解一下在高并发下，我们如何来保证系统的高可用性，以便给你的系统设计提供一些思路。</p><h2>可用性的度量</h2><p>可用性是一个抽象的概念，你需要知道要如何来度量它，与之相关的概念是：<strong>MTBF和MTTR。</strong></p><p><strong>MTBF（Mean Time Between Failure）</strong>是平均故障间隔的意思，代表两次故障的间隔时间，也就是系统正常运转的平均时间。这个时间越长，系统稳定性越高。</p><p><strong>MTTR（Mean Time To Repair）</strong>表示故障的平均恢复时间，也可以理解为平均故障时间。这个值越小，故障对于用户的影响越小。</p><p>可用性与MTBF和MTTR的值息息相关，我们可以用下面的公式表示它们之间的关系：</p><blockquote>\n<p>Availability = MTBF / (MTBF + MTTR)</p>\n</blockquote><p>这个公式计算出的结果是一个比例，而这个比例代表着系统的可用性。一般来说，我们会使用几个九来描述系统的可用性。</p><p><img src=\"https://static001.geekbang.org/resource/image/73/75/73a87a9bc14a27c9ec9dfda1b72e1e75.jpg?wh=1142*643\" alt=\"\"></p><p>其实通过这张图你可以发现，一个九和两个九的可用性是很容易达到的，只要没有蓝翔技校的铲车搞破坏，基本上可以通过人肉运维的方式实现。</p><p>三个九之后，系统的年故障时间从3天锐减到8小时。到了四个九之后，年故障时间缩减到1小时之内。在这个级别的可用性下，你可能需要建立完善的运维值班体系、故障处理流程和业务变更流程。你可能还需要在系统设计上有更多的考虑。比如，在开发中你要考虑，如果发生故障，是否不用人工介入就能自动恢复。当然了，在工具建设方面，你也需要多加完善，以便快速排查故障原因，让系统快速恢复。</p><p>到达五个九之后，故障就不能靠人力恢复了。想象一下，从故障发生到你接收报警，再到你打开电脑登录服务器处理问题，时间可能早就过了十分钟了。所以这个级别的可用性考察的是系统的容灾和自动恢复的能力，让机器来处理故障，才会让可用性指标提升一个档次。</p><p>一般来说，我们的核心业务系统的可用性，需要达到四个九，非核心系统的可用性最多容忍到三个九。在实际工作中，你可能听到过类似的\b说法，只是不同级别，不同业务场景的系统对于可用性要求是不一样的。</p><p>目前，你已经对可用性的评估指标有了一定程度的了解了，接下来，我们来看一看高可用的系统设计需要考虑哪些因素。</p><h2>高可用系统设计的思路</h2><p>一个成熟系统的可用性需要从系统设计和系统运维两方面来做保障，两者共同作用，缺一不可。那么如何从这两方面入手，解决系统高可用的问题呢？</p><h4>1.系统设计</h4><p>“Design for failure”是我们做高可用系统设计时秉持的第一原则。在承担百万QPS的高并发系统中，集群中机器的数量成百上千台，单机的故障是常态，几乎每一天都有发生故障的可能。</p><p>未雨绸缪才能决胜千里。我们在做系统设计的时候，要把发生故障作为一个重要的考虑点，预先考虑如何自动化地发现故障，发生故障之后要如何解决。当然了，除了要有未雨绸缪的思维之外，我们还需要掌握一些具体的优化方法，比如<strong>failover（故障转移）、超时控制以及降级和限流。</strong></p><p>一般来说，发生failover的节点可能有两种情况：</p><p>1.是在完全对等的节点之间做failover。<br>\n2.是在不对等的节点之间，即系统中存在主节点也存在备节点。</p><p>在对等节点之间做failover相对来说简单些。在这类系统中所有节点都承担读写流量，并且节点中不保存状态，每个节点都可以作为另一个节点的镜像。在这种情况下，如果访问某一个节点失败，那么简单地随机访问另一个节点就好了。</p><p>举个例子，Nginx可以配置当某一个Tomcat出现大于500的请求的时候，重试请求另一个Tomcat节点，就像下面这样：</p><p><img src=\"https://static001.geekbang.org/resource/image/e1/0a/e167ec1db28e977e37455d746e9d1d0a.jpg?wh=1142*597\" alt=\"\"></p><p>针对不对等节点的failover机制会复杂很多。比方说我们有一个主节点，有多台备用节点，这些备用节点可以是热备（同样在线提供服务的备用节点），也可以是冷备（只作为备份使用），那么我们就需要在代码中控制如何检测主备机器是否故障，以及如何做主备切换。</p><p>使用最广泛的故障检测机制是“心跳”。你可以在客户端上定期地向主节点发送心跳包，也可以从备份节点上定期发送心跳包。当一段时间内未收到心跳包，就可以认为主节点已经发生故障，可以触发选主的操作。</p><p>选主的结果需要在多个备份节点上达成一致，所以会使用某一种分布式一致性算法，比方说Paxos，Raft。</p><p>除了故障转移以外，对于系统间调用超时的控制也是高可用系统设计的一个重要考虑方面。</p><p>复杂的高并发系统通常会有很多的系统模块组成，同时也会依赖很多的组件和服务，比如说缓存组件，队列服务等等。它们之间的调用最怕的就是延迟而非失败，因为失败通常是瞬时的，可以通过重试的方式解决。而一旦调用某一个模块或者服务发生比较大的延迟，调用方就会阻塞在这次调用上，它已经占用的资源得不到释放。当存在大量这种阻塞请求时，调用方就会因为用尽资源而挂掉。</p><p>在系统开发的初期，超时控制通常不被重视，或者是没有方式来确定正确的超时时间。</p><p><strong>我之前经历过一个项目，</strong>模块之间通过RPC框架来调用，超时时间是默认的30秒。平时系统运行得非常稳定，可是一旦遇到比较大的流量，RPC服务端出现一定数量慢请求的时候，RPC客户端线程就会大量阻塞在这些慢请求上长达30秒，造成RPC客户端用尽调用线程而挂掉。后面我们在故障复盘的时候发现这个问题后，调整了RPC，数据库，缓存以及调用第三方服务的超时时间，这样在出现慢请求的时候可以触发超时，就不会造成整体系统雪崩。</p><p>既然要做超时控制，那么我们怎么来确定超时时间呢？这是一个比较困难的问题。</p><p>超时时间短了，会造成大量的超时错误，对用户体验产生影响；超时时间长了，又起不到作用。<strong>我建议你通过收集系统之间的调用日志，统计比如说99%的响应时间是怎样的，然后依据这个时间来指定超时时间。</strong>如果没有调用的日志，那么你只能按照经验值来指定超时时间。不过，无论你使用哪种方式，超时时间都不是一成不变的，需要在后面的系统维护过程中不断地修改。</p><p>超时控制实际上就是不让请求一直保持，而是在经过一定时间之后让请求失败，释放资源给接下来的请求使用。这对于用户来说是有损的，但是却是必要的，因为它牺牲了少量的请求却保证了整体系统的可用性。而我们还有另外两种有损的方案能保证系统的高可用，它们就是降级和限流。</p><p><strong>降级是为了保证核心服务的稳定而牺牲非核心服务的做法。</strong>比方说我们发一条微博会先经过反垃圾服务检测，检测内容是否是广告，通过后才会完成诸如写数据库等逻辑。</p><p>反垃圾的检测是一个相对比较重的操作，因为涉及到非常多的策略匹配，在日常流量下虽然会比较耗时却还能正常响应。但是当并发较高的情况下，它就有可能成为瓶颈，而且它也不是发布微博的主体流程，所以我们可以暂时关闭反垃圾服务检测，这样就可以保证主体的流程更加稳定。</p><p><strong>限流完全是另外一种思路，</strong>它通过对并发的请求进行限速来保护系统。</p><p>比如对于Web应用，我限制单机只能处理每秒1000次的请求，超过的部分直接返回错误给客户端。虽然这种做法损害了用户的使用体验，但是它是在极端并发下的无奈之举，是短暂的行为，因此是可以接受的。</p><p>实际上，无论是降级还是限流，在细节上还有很多可供探讨的地方，我会在后面的课程中，随着系统的不断演进深入地剖析，在基础篇里就不多说了。</p><h4>2.系统运维</h4><p>在系统设计阶段为了保证系统的可用性可以采取上面的几种方法，那在系统运维的层面又能做哪些事情呢？其实，我们可以从<strong>灰度发布、故障演练</strong>两个方面来考虑如何提升系统的可用性。</p><p>你应该知道，在业务平稳运行过程中，系统是很少发生故障的，90%的故障是发生在上线变更阶段的。比方说，你上了一个新的功能，由于设计方案的问题，数据库的慢请求数翻了一倍，导致系统请求被拖慢而产生故障。</p><p>如果没有变更，数据库怎么会无缘无故地产生那么多的慢请求呢？因此，为了提升系统的可用性，重视变更管理尤为重要。而除了提供必要回滚方案，以便在出现问题时快速回滚恢复之外，<strong>另一个主要的手段就是灰度发布。</strong></p><p>灰度发布指的是系统的变更不是一次性地推到线上的，而是按照一定比例逐步推进的。一般情况下，灰度发布是以机器维度进行的。比方说，我们先在10%的机器上进行变更，同时观察Dashboard上的系统性能指标以及错误日志。如果运行了一段时间之后系统指标比较平稳并且没有出现大量的错误日志，那么再推动全量变更。</p><p>灰度发布给了开发和运维同学绝佳的机会，让他们能在线上流量上观察变更带来的影响，是保证系统高可用的重要关卡。</p><p>灰度发布是在系统正常运行条件下，保证系统高可用的运维手段，那么我们如何知道发生故障时系统的表现呢？这里就要依靠另外一个手段：<strong>故障演练。</strong></p><p>故障演练指的是对系统进行一些破坏性的手段，观察在出现局部故障时，整体的系统表现是怎样的，从而发现系统中存在的，潜在的可用性问题。</p><p>一个复杂的高并发系统依赖了太多的组件，比方说磁盘，数据库，网卡等，这些组件随时随地都可能会发生故障，而一旦它们发生故障，会不会如蝴蝶效应一般造成整体服务不可用呢？我们并不知道，因此，故障演练尤为重要。</p><p>在我来看，<strong>故障演练和时下比较流行的“混沌工程”的思路如出一辙，</strong>作为混沌工程的鼻祖，Netfix在2010年推出的“Chaos Monkey”工具就是故障演练绝佳的工具。它通过在线上系统上随机地关闭线上节点来模拟故障，让工程师可以了解，在出现此类故障时会有什么样的影响。</p><p>当然，这一切是以你的系统可以抵御一些异常情况为前提的。如果你的系统还没有做到这一点，那么<strong>我建议你</strong>另外搭建一套和线上部署结构一模一样的线下系统，然后在这套系统上做故障演练，从而避免对生产系统造成影响。</p><h2>课程小结</h2><p>本节课我带你了解了如何度量系统的可用性，以及在做高并发系统设计时如何来保证高可用。</p><p>说了这么多，你可以看到从开发和运维角度上来看，提升可用性的方法是不同的：</p><ul>\n<li>\n<p><strong>开发</strong>注重的是如何处理故障，关键词是冗余和取舍。冗余指的是有备用节点，集群来顶替出故障的服务，比如文中提到的故障转移，还有多活架构等等；取舍指的是丢卒保车，保障主体服务的安全。</p>\n</li>\n<li>\n<p>从<strong>运维角度</strong>来看则更偏保守，注重的是如何避免故障的发生，比如更关注变更管理以及如何做故障的演练。</p>\n</li>\n</ul><p>两者结合起来才能组成一套完善的高可用体系。</p><p><strong>你还需要注意的是，</strong>提高系统的可用性有时候是以牺牲用户体验或者是牺牲系统性能为前提的，也需要大量人力来建设相应的系统，完善机制。所以我们要把握一个度，不该做过度的优化。就像我在文中提到的，核心系统四个九的可用性已经可以满足需求，就没有必要一味地追求五个九甚至六个九的可用性。</p><p>另外，一般的系统或者组件都是追求极致的性能的，那么有没有不追求性能，只追求极致的可用性的呢？答案是有的。比如配置下发的系统，它只需要在其它系统启动时提供一份配置即可，所以秒级返回也可，十秒钟也OK，无非就是增加了其它系统的启动时间而已。但是，它对可用性的要求是极高的，甚至会到六个九，原因是配置可以获取的慢，但是不能获取不到。<strong>我给你举这个例子是想让你了解，</strong>可用性和性能有时候是需要做取舍的，但如何取舍就要视不同的系统而定，不能一概而论了。</p><h2>一课一思</h2><p>在今天的课程中，我提到了很多保证高可用的手段，那么你在工作中会有哪些保证系统高可用的设计技巧呢？欢迎在留言区写下你的思考，我会跟你一起讨论这些问题。</p><p><strong>另外，期待你在评论区留下更多的声音，你的建议，我尤为珍重，我会和你一起，努力将课程做好。</strong></p><p>最后，感谢你的阅读，如果这篇文章让你有所收获，也欢迎你将它分享给更多的朋友。</p>","neighbors":{"left":{"article_title":"03 | 系统设计目标（一）：如何提升系统性能？","id":139474},"right":{"article_title":"05 | 系统设计目标（三）：如何让系统易于扩展？","id":142132}},"comments":[{"had_liked":false,"id":136200,"user_name":"jc9090kkk","can_delete":false,"product_type":"c1","uid":1338831,"ip_address":"","ucode":"6C992D07A2E78F","user_header":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","comment_is_top":false,"comment_ctime":1569381248,"is_pvip":false,"replies":[{"id":"52281","content":"好嘞，接受你的建议，后面会给出多一些的案例来帮助理解~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569422197,"ip_address":"","comment_id":136200,"utype":1}],"discussion_count":15,"race_medal":0,"score":"581389966208","product_id":100035801,"comment_content":"感谢老师的分享，对于文章中的心跳检测我个人认为其实是需要做区分的，心跳检测是区分内部检测和外部检测，外部检测伴随着随机性，有时候可能系统的响应时间或者IO已经出现拐点了，但是心跳机制还是有可能会收到响应包，从而被错误的当做系统是“正常”的，所以很多高可用的系统基本都是采用内部心跳机制，比如kafka中的通过zookeeper的watch机制来做检测来做broker中controller的failover，mysql里面是通过内部的performance_schema库中的file_summary_by_event_name表来做监控，都是为了避免外部监测的随机性所带来的影响，不过对于老师提出的可用性和高性能当中出取舍无比赞同，不同的解决方案总是伴随着优势和劣势，无非是优势所带来的效果比劣势对业务更有帮助而已，比如之前在工作中碰到过mysql主从同步有延迟的情况，mysql的高可能性其实就是靠主备同步的数据一致性来保证的，经过排查发现，业务代码中存在有操作大事务的SQL语句，这个导致从库拿到binlog去做重放的时候，时间周期拖长了，从而影响了业务，另外一个情况就是，在做秒杀的时候，除了采用redis外，还会对用户划分成两部分，一部分用户是来了以后直接报秒杀已结束，另外一部分用户才会进入秒杀的逻辑中，心里觉得还是挺对不住那部分抢不到秒杀的用户的，所以，有时候我们需要在可用性和可靠性上需要做一个取舍，没有十全十美的技术解决方案。除此之外，其实大部分的时候采用的策略是需要对业务尽量是无损的，不然运营和产品会请你喝茶的，最后想跟老师提个建议，就是希望后面的一些篇章，能否尽量将之前提到过的知识点实际运用起来或者说串联起来，并且提供一些实际场景的解决方案细节，我举个例子，比如电商秒杀，秒杀如果只采用mysql去做库存判断，会出现什么的问题，为了避免这样的问题出现，该采用什么系统，假如如果采用redis，为什么？redis的一些操作是原子操作，原子操作是什么？如何保证？类似这样的方案的优缺点和延伸，这样的话既能有效的总结之前学习到的知识点，能够将整个知识网络做一个规整，还能了解到每个技术方案的不足加深理解，从而明白什么样的场景说不能采用当前的技术方案的，还有就是在采用技术方案的同时，说明下采用方案的一些基础的理论，知识，比如cas，或者分布式系统中的cap理论，这样对于基础知识欠缺的人，在学习的时候也可以去补一些平时没有刻意学习的知识，上面是我举的例子，再次谢谢老师的分享，期待后面老师的干货文章。","like_count":135,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468504,"discussion_content":"好嘞，接受你的建议，后面会给出多一些的案例来帮助理解~","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569422197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1465986,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","nickname":"longslee","note":"","ucode":"C24E32E5B1B6F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24639,"discussion_content":"囧，你问的mysql判断库存问题，换redis原子问题，怎么这么像上次我去面试被问的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570204945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1465986,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","nickname":"longslee","note":"","ucode":"C24E32E5B1B6F5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25305,"discussion_content":"哈哈哈，我就是随便举个例子，因为数据库在判断库存的时候，如果是高并发请求瞬间一起进来的话，很可能把数据库打挂了，所以有必要引入另外的系统才替数据库做一部分事情，常见的就是redis…","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1570499296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":24639,"ip_address":""},"score":25305,"extra":""}]},{"author":{"id":2136069,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/rxz5aKicRkvqWmt6c6c7eayHvh577uibBTVQzcJKwSTqI9FaxZSRlx7NRVw4atWpqER8ncA5jErQb3wb4cPzZxlA/132","nickname":"Geek_065895","note":"","ucode":"2E6FCCC78E5767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585440,"discussion_content":"内部心跳检测和外部心跳检测有什么区别呀？不是很懂，也查不到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661572823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043495,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/27/f708ba52.jpg","nickname":"冷夜飞雪","note":"","ucode":"CC01ADAA8DFDFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362555,"discussion_content":"忍不住点个赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616981215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009831,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/68/a7/c3fd1fd9.jpg","nickname":"聪","note":"","ucode":"9D672A8580A945","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311673,"discussion_content":"质量高，不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602460086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1244248,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fc/58/90b7b363.jpg","nickname":"随风","note":"","ucode":"86A78303C9AB9D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223473,"discussion_content":"可以加微信交流吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586228748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1239693,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ea/8d/2e1b6705.jpg","nickname":"小德","note":"","ucode":"F541817F301EE6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":120379,"discussion_content":"感觉老师讲的内容有些过于抽象了，应该多加入一些实战场景\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578273722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1239693,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ea/8d/2e1b6705.jpg","nickname":"小德","note":"","ucode":"F541817F301EE6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":120514,"discussion_content":"因为很多实例的业务场景没办法细化","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578278957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":120379,"ip_address":""},"score":120514,"extra":""}]},{"author":{"id":1120472,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqhkxW4icQZYdPQe9CGVlIt5Me9QzkXX7RpyTAFLCKrJEXic31mXKlaibCEcibNvUv09WElNRZtzU8JNQ/132","nickname":"Damon","note":"","ucode":"4BDEB96F4FAE99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21766,"discussion_content":"给你点赞,感觉极客时间的课程大部分都偏重理论,缺少实践的结合,很难学以致用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569514291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1120472,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqhkxW4icQZYdPQe9CGVlIt5Me9QzkXX7RpyTAFLCKrJEXic31mXKlaibCEcibNvUv09WElNRZtzU8JNQ/132","nickname":"Damon","note":"","ucode":"4BDEB96F4FAE99","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21863,"discussion_content":"这个也是没办法的事情，因为不同的业务场景对应的解决方案五花八门，没有一种解决方案能够解决所有问题，那样也不现实，对于实战来讲，基础的理论知识必不可少，最后再加上思路来引导，认为任何的解决方案脱离业务就成为了空谈，有时候我们只是没有机会碰到海量流量和用户而已","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1569548950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":21766,"ip_address":""},"score":21863,"extra":""}]},{"author":{"id":1063734,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3b/36/2d61e080.jpg","nickname":"行者","note":"","ucode":"EA31201A7C5AE1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21595,"discussion_content":"用心了~题外话，头像很帅~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569503362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1063734,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3b/36/2d61e080.jpg","nickname":"行者","note":"","ucode":"EA31201A7C5AE1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21865,"discussion_content":"谢谢，也是希望能看到一些干货，但是老师前期的基础知识铺垫还是必不可少，毕竟一上来就讲跟深层次的东西，有些经验有限的人也会难以消化","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1569549032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":21595,"ip_address":""},"score":21865,"extra":""}]},{"author":{"id":1359878,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLDuUeF7u9lAY3qmfKSfDBQzCJuveFVyIGE7D1PEI8ZQ1kTScwvRdruYHff0zpEnJWlsYicLlWGvcTg/132","nickname":"小虎","note":"","ucode":"66CCAB2C757B3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20944,"discussion_content":"我给你点赞了，讲得非常好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569402365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1359878,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLDuUeF7u9lAY3qmfKSfDBQzCJuveFVyIGE7D1PEI8ZQ1kTScwvRdruYHff0zpEnJWlsYicLlWGvcTg/132","nickname":"小虎","note":"","ucode":"66CCAB2C757B3C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21866,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569549038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":20944,"ip_address":""},"score":21866,"extra":""}]}]},{"had_liked":false,"id":139510,"user_name":"Fourty Seven","can_delete":false,"product_type":"c1","uid":1323868,"ip_address":"","ucode":"DD213225842F68","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/5c/8c0a372a.jpg","comment_is_top":false,"comment_ctime":1570670428,"is_pvip":false,"replies":[{"id":"53822","content":"👍","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1570677889,"ip_address":"","comment_id":139510,"utype":1}],"discussion_count":2,"race_medal":0,"score":"121829754716","product_id":100035801,"comment_content":"高可用思路，<br>1.开发设计层面<br>冗余---主备，负载均衡，failover<br>取舍----降级，限流，熔断，超时控制<br><br>2.运维层面<br>灰度发布，故障演练，监控报警","like_count":28,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469975,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570677889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2050146,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/48/62/07ec0009.jpg","nickname":"nakata","note":"","ucode":"D4A564F2E399BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538916,"discussion_content":"总结的精辟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639556473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136099,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1569346360,"is_pvip":false,"replies":[{"id":"52135","content":"其实都挺难的：）","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569372186,"ip_address":"","comment_id":136099,"utype":1}],"discussion_count":4,"race_medal":0,"score":"65993855800","product_id":100035801,"comment_content":"1.本篇讲得主要是系统设计层面的服务高可用。降级，限流，超时熔断，好像主要大方向就这些了。（走mq销峰这种，我认为也是一种降级）。<br>2.从运维来看，上k8s后，编排控制下，自动维护运行的服务实例节点数量算（包括无状态和有状态服务），这算是一个高可用方面的方案。<br>3.从部署架构来看，单机房的集群，主备，redis es的多副本等等也算。扯远点还有同城异地，异城异地以及搭建灾备中心等高成本操作。（主要看系统不可用带来的损失有多大，进而做决定）。<br>总之工作中，感觉追求系统高可用比追求高性能难太多。","like_count":15,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468457,"discussion_content":"其实都挺难的：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569372186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2032894,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/04/fe/60db4684.jpg","nickname":"菜波","note":"","ucode":"DA7DED66709FA2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406952,"discussion_content":"mq削峰不算降级吧？在这个过程中没有业务受损","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634872320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1340120,"avatar":"https://static001.geekbang.org/account/avatar/00/14/72/d8/9eedbc5e.jpg","nickname":"FreeMason","note":"","ucode":"3D58AC2F9AB345","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382990,"discussion_content":"抬下竿：5G 表示不服，自动驾驶系统表示也不服","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625816959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1361159,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","nickname":"涛哥哥","note":"","ucode":"329A1384E3AB5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1340120,"avatar":"https://static001.geekbang.org/account/avatar/00/14/72/d8/9eedbc5e.jpg","nickname":"FreeMason","note":"","ucode":"3D58AC2F9AB345","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534459,"discussion_content":"不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638195227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":382990,"ip_address":""},"score":534459,"extra":""}]}]},{"had_liked":false,"id":136756,"user_name":"sun","can_delete":false,"product_type":"c1","uid":1076100,"ip_address":"","ucode":"0358B9288D4018","user_header":"https://static001.geekbang.org/account/avatar/00/10/6b/84/d1e6eac9.jpg","comment_is_top":false,"comment_ctime":1569503579,"is_pvip":false,"replies":[{"id":"52473","content":"👍👍👍","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569520543,"ip_address":"","comment_id":136756,"utype":1}],"discussion_count":5,"race_medal":0,"score":"61699045723","product_id":100035801,"comment_content":"我觉得思想最重要，光教你们具体的人家用过的实际案例，那不过是画饼充饥，每个公司的业务都完全不同，侧重点也不同，掌握了思想，明白了了设计方案和要注意的点，接下来只不过是考验个人思维严谨程度和代码水平，思想大于奇淫技巧","like_count":14,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468790,"discussion_content":"👍👍👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569520543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042354,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e7/b2/334bc992.jpg","nickname":"AlfredLover","note":"","ucode":"A3A998F362CC37","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25124,"discussion_content":"理论+实践。但大部分开发看到理论就想睡觉，觉得不重要","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570429772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1119490,"avatar":"https://static001.geekbang.org/account/avatar/00/11/15/02/66f65388.jpg","nickname":"雷霹雳的爸爸","note":"","ucode":"99BBA6D83DD11F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1042354,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e7/b2/334bc992.jpg","nickname":"AlfredLover","note":"","ucode":"A3A998F362CC37","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":43945,"discussion_content":"睡觉论很贴切...想吃快餐的太多...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572918454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":25124,"ip_address":""},"score":43945,"extra":""}]},{"author":{"id":1104287,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d9/9f/7b2f2a97.jpg","nickname":"师爷","note":"","ucode":"20E6831DABF755","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309529,"discussion_content":"实践也很重要呀，比如怎么做灰度发布，具体设计方案和工具","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601337760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1074640,"avatar":"https://static001.geekbang.org/account/avatar/00/10/65/d0/c11d4a31.jpg","nickname":"滴水藏海","note":"","ucode":"9C1F9C91189F69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229532,"discussion_content":"哈哈，我就喜欢有总纲的理论介绍，后面再讲实践案例。如果大学有专业，那和新东方的区别就是，大学先讲厨师的历史渊源发展历程职业意义这些看似不实际的东西，是不是有用就看个人了，新东方可能直接就上火炉了，当时我没上过新东方只是猜想。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586662300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136233,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1569392290,"is_pvip":false,"replies":[{"id":"52275","content":"好滴~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569421842,"ip_address":"","comment_id":136233,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44519065250","product_id":100035801,"comment_content":"希望老师能带来大家一步步设计出一个系统，从简单到复杂，演化出一个高并发、高可用、高性能、可扩展的系统。可以模拟遇到具体的问题，使用什么方法去解决。","like_count":10,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468519,"discussion_content":"好滴~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569421842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136452,"user_name":"Julien","can_delete":false,"product_type":"c1","uid":1204568,"ip_address":"","ucode":"2A3F0CF46B4034","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/58/7b078879.jpg","comment_is_top":false,"comment_ctime":1569453512,"is_pvip":false,"replies":[{"id":"52472","content":"可以配置replica set，这样主节点故障，付节点可以提升为主节点","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569513642,"ip_address":"","comment_id":136452,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31634224584","product_id":100035801,"comment_content":"老师您好，我们产品中用到了MongoDB自带的集群来达到高可用性，但发现当某个节点出现故障时，MongoDB大多数时候并不能自我恢复，从而极大影响了用户体验。对于这种案例，老师有什么好的建议?","like_count":7,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468640,"discussion_content":"可以配置replica set，这样主节点故障，付节点可以提升为主节点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569513642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136234,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1569392333,"is_pvip":false,"replies":[{"id":"52274","content":"好滴~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569421824,"ip_address":"","comment_id":136234,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23044228813","product_id":100035801,"comment_content":"希望老师能带来大家一步步设计出一个系统，从简单到复杂，演化出一个高并发、高可用、高性能、可扩展的系统。可以模拟遇到具体的问题，具体使用什么方法、使用哪些工具去解决。","like_count":5,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468520,"discussion_content":"好滴~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569421824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136320,"user_name":"任鹏斌","can_delete":false,"product_type":"c1","uid":1104086,"ip_address":"","ucode":"34319B05EA6E74","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/d6/47da34bf.jpg","comment_is_top":false,"comment_ctime":1569408698,"is_pvip":false,"replies":[{"id":"52272","content":"谢谢~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569421797,"ip_address":"","comment_id":136320,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18749277882","product_id":100035801,"comment_content":"讲的思路很清楚，虽然以前也知道高性能高可用，但没看过这么全面的总结。","like_count":4,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468569,"discussion_content":"谢谢~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569421797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161887,"user_name":"长期规划","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1576392069,"is_pvip":false,"replies":[{"id":"62158","content":"赞比喻","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1576737544,"ip_address":"","comment_id":161887,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14461293957","product_id":100035801,"comment_content":"网络跟交通真是很像<br>限流：对应交通中的限号；<br>降级：比如火车的站票，人太多，坐座没有了，改为站票，但票价没变，这就是有损服务啊<br>故障转移：轿车上一般都准备一个备胎。有些人找对象时，也会准备一个备胎，以防主胎出问题了，还可以更换。","like_count":3,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477894,"discussion_content":"赞比喻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576737544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153026,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1574142789,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14459044677","product_id":100035801,"comment_content":"我的项目中是使用Dubbo框架自带的负载均衡策略，以及Dubbo自带的失败重试功能，还有Dubbo的超时时间设置。还有一次秒杀中使用Hystrix来限流。","like_count":3},{"had_liked":false,"id":137270,"user_name":"小喵喵","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1569673946,"is_pvip":false,"replies":[{"id":"52801","content":"Remote Procedure Call，是跨进程调用的方式","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569739302,"ip_address":"","comment_id":137270,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10159608538","product_id":100035801,"comment_content":"RPC是什么？是一个调用远程接口的工具，还是一个什么框架？","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469009,"discussion_content":"Remote Procedure Call，是跨进程调用的方式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569739302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2041396,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","nickname":"宙斯","note":"","ucode":"80DF36BAD298AD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350610,"discussion_content":"远程过程调用的也好处我从网上看到的是屏蔽编程语言，语法糖友好，减少请求次数，自定义协议减少头信息。但我没得到一个确切的回答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613956567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"下个目标45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328742,"discussion_content":"http你也可以理解为rpc","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606221290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136755,"user_name":"罗招材","can_delete":false,"product_type":"c1","uid":1081091,"ip_address":"","ucode":"F8BA9DA1205E1F","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/03/e8bac3ae.jpg","comment_is_top":false,"comment_ctime":1569503297,"is_pvip":false,"replies":[{"id":"52489","content":"可以这么说吧，不过限流熔断感觉还不是冗余，是一种取舍","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569546536,"ip_address":"","comment_id":136755,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10159437889","product_id":100035801,"comment_content":"高可用，感觉本质上是冗余，所有关键路径避免单点。<br>核心要解决的问题是，故障发现 和 故障转移。 故障发现包括，超过处理流量做限流、熔断等，同时某个环节的某个节点故障时，系统能自动转移到冗余备份上，复杂点在于如何保证转移的可靠性。","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468789,"discussion_content":"可以这么说吧，不过限流熔断感觉还不是冗余，是一种取舍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569546536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1119490,"avatar":"https://static001.geekbang.org/account/avatar/00/11/15/02/66f65388.jpg","nickname":"雷霹雳的爸爸","note":"","ucode":"99BBA6D83DD11F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43949,"discussion_content":"从单个子系统自身来说，冗余+故障转移就差不多了，但是把视野放开放到整体业务服务和用户目标价值上，老师讲的取舍等问题就很重要了，比自己子系统内无休止的优化可用性要更实际一点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572918676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136127,"user_name":"饭团","can_delete":false,"product_type":"c1","uid":1332557,"ip_address":"","ucode":"E24F240CC91BE8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","comment_is_top":false,"comment_ctime":1569371314,"is_pvip":false,"replies":[{"id":"52284","content":"好嘞~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569422273,"ip_address":"","comment_id":136127,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10159305906","product_id":100035801,"comment_content":"看来基本就是，避免单点！做好熔断，限流措施！理念是这样。静待老师讲解具体手段，和分享老师的经验！","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468471,"discussion_content":"好嘞~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569422273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216716,"user_name":"天草二十六","can_delete":false,"product_type":"c1","uid":1360712,"ip_address":"","ucode":"3165EE3007527B","user_header":"https://static001.geekbang.org/account/avatar/00/14/c3/48/3a739da6.jpg","comment_is_top":false,"comment_ctime":1589331458,"is_pvip":false,"replies":[{"id":"82725","content":"可以只部署核心系统 ","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1591538941,"ip_address":"","comment_id":216716,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5884298754","product_id":100035801,"comment_content":"搭建一套和线上部署结构一模一样的线下系统，成本很高哦，估计很多没这个投入","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494923,"discussion_content":"可以只部署核心系统 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591538941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211256,"user_name":"kamida","can_delete":false,"product_type":"c1","uid":1904146,"ip_address":"","ucode":"16D7CA59870AC0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/jXbwicoDwia7ooDfwBTRyvNYQkefnVwF1CMicMS8FqKfuFAdvVZo2pqc4ic0R9kSdHTIxaE6YyqxwX8BdNGv5PqSIw/132","comment_is_top":false,"comment_ctime":1587935823,"is_pvip":false,"replies":[{"id":"78862","content":"nginx大概几万，web server（tomcat）千级别，具体看业务复杂度","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1588070148,"ip_address":"","comment_id":211256,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5882903119","product_id":100035801,"comment_content":"老师 请问一般load balancer和web server分别能处理多大的qps 分别设多少的rate limit比较好","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493234,"discussion_content":"nginx大概几万，web server（tomcat）千级别，具体看业务复杂度","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588070148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203290,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1586166646,"is_pvip":false,"replies":[{"id":"78259","content":"总结不错~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1587623664,"ip_address":"","comment_id":203290,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5881133942","product_id":100035801,"comment_content":"小结一下：<br>1：系统怎么做到高可用？高可用强调系统在出现问题的时候还可以继续使用，那怎么能做到呢？首先，就是冗余，服务冗余＋数据冗余＋设备冗余，通俗点就plan B，时刻准备。然后，就是故障隔离故障恢复，出问题不可怕，只要能自动或手动恢复就行。然后就是防止系统不可用，怎么防止限流熔断就是防止的手段。<br>2：不过这些说起来容易做起来并不简单，知道和做到之间是有鸿沟的。比如：现在有一个1亿条数据的文件，怎么高效的导入到数据库中，设计出一个完美的方案就不是那么容易。<br>3：高可用性比高性能实现起来难多了，难点我觉得在于各种出现各种异常情况该怎么处理，即使是小概率事件也需要思考对应的解决方案。比如：2中的例子，高效导入怎么实现？数据这么多库表怎么设计？如果导入的过程中出现异常怎么补偿？一亿条数据不多不少都保证放入库中怎么验证？","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490819,"discussion_content":"总结不错~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587623664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194700,"user_name":"陆江","can_delete":false,"product_type":"c1","uid":1918835,"ip_address":"","ucode":"0F2F8D21D4C1AC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK310IyFbYZjgYgDvaxibZOic5zbk28FpjLfccfYMSAgt11kd3jicA4Db3NbF8lLl4Cs9m6uRY7EFVWA/132","comment_is_top":false,"comment_ctime":1585098152,"is_pvip":false,"replies":[{"id":"75842","content":"基本上是动态的更改nginx upstream的方式","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1586088932,"ip_address":"","comment_id":194700,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880065448","product_id":100035801,"comment_content":"灰度发布的机制不是运维层的，基于业务的灰度发布机制需要写代码来实现。<br>业界有两种比较常用的方案：<br>第一种就是在NGINX层挂载lua脚本的方式，在lua脚本里面实现流量控制；<br>第二种就是在NGINX层后面再加一层api路由网关层，路由网关层的实现就比较灵活，如果是Python的，可以选用高并发异步web框架sanic来实现。<br>不知道老师说的灰度发布机制是什么样的方式，后面有没有细讲部分？","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488874,"discussion_content":"基本上是动态的更改nginx upstream的方式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586088932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185590,"user_name":"周曙光爱学习","can_delete":false,"product_type":"c1","uid":1022920,"ip_address":"","ucode":"98EAB6EBAB34B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/c8/665100a3.jpg","comment_is_top":false,"comment_ctime":1583640018,"is_pvip":false,"replies":[{"id":"72213","content":"一般在网关层，当然越上层越好，把无用请求挡出去","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1584020181,"ip_address":"","comment_id":185590,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878607314","product_id":100035801,"comment_content":"老师请问限流一般在哪一层做呢？是在流量的接入层比如slb，还是在框架层比如使用的一些http框架，还是在我们的应用代码里呢？？","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486430,"discussion_content":"一般在网关层，当然越上层越好，把无用请求挡出去","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584020181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165046,"user_name":"长期规划","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1577152240,"is_pvip":false,"replies":[{"id":"63044","content":"是的，要分核心服务和非核心服务","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1577239465,"ip_address":"","comment_id":165046,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5872119536","product_id":100035801,"comment_content":"系统高可用是分级的，分级是考虑最坏情况下，系统不会崩溃。","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479000,"discussion_content":"是的，要分核心服务和非核心服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577239465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164390,"user_name":"威特","can_delete":false,"product_type":"c1","uid":1627041,"ip_address":"","ucode":"A04D08D3859792","user_header":"https://static001.geekbang.org/account/avatar/00/18/d3/a1/e5a3ce79.jpg","comment_is_top":false,"comment_ctime":1576976785,"is_pvip":false,"replies":[{"id":"63066","content":"要演练降级的预案","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1577241283,"ip_address":"","comment_id":164390,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5871944081","product_id":100035801,"comment_content":"目前我们系统的主要手段就是降级，通过降级返回一些默认值或者其他约定好的值，以保证核心功能不收影响。","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478745,"discussion_content":"要演练降级的预案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577241283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147919,"user_name":"雷霹雳的爸爸","can_delete":false,"product_type":"c1","uid":1119490,"ip_address":"","ucode":"99BBA6D83DD11F","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/02/66f65388.jpg","comment_is_top":false,"comment_ctime":1572919250,"is_pvip":true,"replies":[{"id":"57030","content":"是的~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1572938763,"ip_address":"","comment_id":147919,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867886546","product_id":100035801,"comment_content":"系统高可用可能需要的不是技巧，而是各方的兢兢业业、殚精竭虑吧，研发要保证设计实现得足够强壮，运维要确保监控、应急响应预案到位，而且如文中所说，千万不要忽略了演练<br><br>","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473339,"discussion_content":"是的~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572938763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138412,"user_name":"longslee","can_delete":false,"product_type":"c1","uid":1465986,"ip_address":"","ucode":"C24E32E5B1B6F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","comment_is_top":false,"comment_ctime":1570205195,"is_pvip":false,"replies":[{"id":"53242","content":"其实nginx 30秒的超时作用不大，业务如果要30秒才返回结果，可能已经崩溃很久了。。<br>","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1570263648,"ip_address":"","comment_id":138412,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5865172491","product_id":100035801,"comment_content":"老师，咱们设置Nginx超时时间为30s，但是很多服务都是这个nginx转发，那～就变成了不分业务和统计统统归为30s超时，这样问题很多，请教一下应该怎样拆出来呢？","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469512,"discussion_content":"其实nginx 30秒的超时作用不大，业务如果要30秒才返回结果，可能已经崩溃很久了。。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570263648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136805,"user_name":"秦时明月","can_delete":false,"product_type":"c1","uid":1156746,"ip_address":"","ucode":"B76BE4440BD6EE","user_header":"https://static001.geekbang.org/account/avatar/00/11/a6/8a/d6e6aab8.jpg","comment_is_top":false,"comment_ctime":1569512910,"is_pvip":false,"replies":[{"id":"52487","content":"指的是到响应结束<br>","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569545683,"ip_address":"","comment_id":136805,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5864480206","product_id":100035801,"comment_content":"老师，对于一些概念一直比较混淆，请问文中说的单机限制处理1000次请求，请问是从请求到响应结束，还是只要接收了请求","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468802,"discussion_content":"指的是到响应结束\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569545683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136222,"user_name":"吃饭饭","can_delete":false,"product_type":"c1","uid":1231549,"ip_address":"","ucode":"95CFA07CDA2957","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","comment_is_top":false,"comment_ctime":1569389797,"is_pvip":false,"replies":[{"id":"52278","content":"谢谢~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569421888,"ip_address":"","comment_id":136222,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5864357093","product_id":100035801,"comment_content":"我喜欢这种由浅入深，从宏观到局部的讲述方式，👍","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468512,"discussion_content":"谢谢~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569421888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136156,"user_name":"Lim","can_delete":false,"product_type":"c1","uid":1547046,"ip_address":"","ucode":"8CFA92A3966F6D","user_header":"https://static001.geekbang.org/account/avatar/00/17/9b/26/961c6be2.jpg","comment_is_top":false,"comment_ctime":1569374721,"is_pvip":false,"replies":[{"id":"52267","content":"是的，这些组件归根结底都是使用的文中提到的方法","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569421343,"ip_address":"","comment_id":136156,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5864342017","product_id":100035801,"comment_content":"微服务就是很好的实践。Hystix的降级，熔断。Ribbon的负载均衡。还有zookeeper主备选主Paxos","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468485,"discussion_content":"是的，这些组件归根结底都是使用的文中提到的方法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569421343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1681470,"avatar":"","nickname":"Geek_a199f6","note":"","ucode":"4802DBB54513DB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21430,"discussion_content":"恩","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569483736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136147,"user_name":"Lugyedo","can_delete":false,"product_type":"c1","uid":1011793,"ip_address":"","ucode":"EB5E456B638E70","user_header":"https://static001.geekbang.org/account/avatar/00/0f/70/51/f1825adb.jpg","comment_is_top":false,"comment_ctime":1569373654,"is_pvip":true,"replies":[{"id":"52283","content":"是dev + ops的共同努力~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569422242,"ip_address":"","comment_id":136147,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5864340950","product_id":100035801,"comment_content":"看来高可用需要DevOps","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468482,"discussion_content":"是dev + ops的共同努力~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569422242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136102,"user_name":"北天魔狼","can_delete":false,"product_type":"c1","uid":1188144,"ip_address":"","ucode":"C22623ECEB8DBA","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/30/8ecce1e1.jpg","comment_is_top":false,"comment_ctime":1569364208,"is_pvip":true,"replies":[{"id":"52133","content":"监控和压测都是性能检测工具","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569372149,"ip_address":"","comment_id":136102,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5864331504","product_id":100035801,"comment_content":"希望老师在以后章节中推荐一些性能检测工具","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468460,"discussion_content":"监控和压测都是性能检测工具","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569372149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136101,"user_name":"wangbo","can_delete":false,"product_type":"c1","uid":1125722,"ip_address":"","ucode":"3F0C9C320F0A1D","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/5a/d965c147.jpg","comment_is_top":false,"comment_ctime":1569362900,"is_pvip":false,"replies":[{"id":"52134","content":"是的，对业务是有损的","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569372159,"ip_address":"","comment_id":136101,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5864330196","product_id":100035801,"comment_content":"限流算是个兜底策略吧","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468459,"discussion_content":"是的，对业务是有损的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569372159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358601,"user_name":"liupan","can_delete":false,"product_type":"c1","uid":1612910,"ip_address":"广东","ucode":"C6C7C48BCCAE12","user_header":"https://static001.geekbang.org/account/avatar/00/18/9c/6e/01b4d5d2.jpg","comment_is_top":false,"comment_ctime":1664459413,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664459413","product_id":100035801,"comment_content":"中，后端系统如何做灰度发布，是否需要所有系统配合搭建灰度环境","like_count":0},{"had_liked":false,"id":346858,"user_name":"Soyoger","can_delete":false,"product_type":"c1","uid":2967576,"ip_address":"","ucode":"D4D7BD0ABC4491","user_header":"https://static001.geekbang.org/account/avatar/00/2d/48/18/e524f344.jpg","comment_is_top":false,"comment_ctime":1653475678,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653475678","product_id":100035801,"comment_content":"做个补充吧。我觉得有几个日常工作中经常用到的点没有提到，比如 数据库备份、负载均衡策略、异地多活、服务自启动，服务动态扩容和收缩、log日志实时监控和安全管理（安全管理容易忽略，但是一旦被黑客攻击，又是毁灭性的，比如中了挖矿程序、勒索病毒...）等，这些是项目实际部署运行时常常需要做的事。还有一些比较好的理论思想，如redis 哨兵机制、AOF和RDB策略；mysql的redo log和binlog；zookeeper里面的选举策略等吧，这些都和分布式理论有一定结合。","like_count":0},{"had_liked":false,"id":341677,"user_name":"秋天","can_delete":false,"product_type":"c1","uid":1057056,"ip_address":"","ucode":"A7E1D953EF7E17","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","comment_is_top":false,"comment_ctime":1649766027,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649766027","product_id":100035801,"comment_content":"灰度发布，节点冗余，降级和限流等。后续还可以通过故障演练，来验证系统可用性，及时发现问题介入处理","like_count":0},{"had_liked":false,"id":339964,"user_name":"剑八","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1648515074,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648515074","product_id":100035801,"comment_content":"故障转移，超时时间，限流，融断，监控，故障演练","like_count":0},{"had_liked":false,"id":338530,"user_name":"梦楼","can_delete":false,"product_type":"c1","uid":2093516,"ip_address":"","ucode":"2D0F3050ACC091","user_header":"https://static001.geekbang.org/account/avatar/00/1f/f1/cc/3bd32c6f.jpg","comment_is_top":false,"comment_ctime":1647560723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647560723","product_id":100035801,"comment_content":"有很多基础素材","like_count":0},{"had_liked":false,"id":332255,"user_name":"绛府邀","can_delete":false,"product_type":"c1","uid":2897079,"ip_address":"","ucode":"FA228D8A6D56BE","user_header":"","comment_is_top":false,"comment_ctime":1643116370,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643116370","product_id":100035801,"comment_content":"灰度发布和故障演练很有效。","like_count":0},{"had_liked":false,"id":305802,"user_name":"钟小强","can_delete":false,"product_type":"c1","uid":1433570,"ip_address":"","ucode":"012B705562FDE9","user_header":"https://static001.geekbang.org/account/avatar/00/15/df/e2/c6d9cb4c.jpg","comment_is_top":false,"comment_ctime":1628171013,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628171013","product_id":100035801,"comment_content":"可用性的度量：<br>1.MTBF (mean time between failure), 平均故障间隔。<br>2.MTTR (mean time to repair), 故障的平均恢复时间。<br><br>可用性 = MTBF &#47; (MTBF + MTTR)<br><br>解决故障的方法有：<br>故障转移，常见的方法是心跳。<br>超时控制，牺牲少量的请求保证整体系统的可用性。<br>降级，为了保证核心服务的稳定而牺牲非核心服务的做法。<br>降流，降低并发量。<br><br>灰度发布，升级时只升一部分机器。<br><br>你可以看到从开发和运维角度上来看，提升可用性的方法是不同的：<br>开发注重的是如何处理故障，关键词是冗余和取舍。冗余指的是有备用节点，集群来顶替出故障的服务，比如文中提到的故障转移，还有多活架构等等；取舍指的是丢卒保车，保障主体服务的安全。<br>从运维角度来看则更偏保守，注重的是如何避免故障的发生，比如更关注变更管理以及如何做故障的演练。<br>","like_count":0},{"had_liked":false,"id":300201,"user_name":"阿彬","can_delete":false,"product_type":"c1","uid":2019590,"ip_address":"","ucode":"A5A341C625000A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d1/06/2ebe1586.jpg","comment_is_top":false,"comment_ctime":1625044907,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625044907","product_id":100035801,"comment_content":"老师, 降级是怎么降级的, 你说有些功能不重要可以关闭, 实际代码可以怎么写, 微服务中的降级只是异常熔断降级, 好像没看到人为主动降级的, 能说下怎么实现吗","like_count":0},{"had_liked":false,"id":290391,"user_name":"6","can_delete":false,"product_type":"c1","uid":1351569,"ip_address":"","ucode":"4B781E5ADEF84C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4KGDYpurPJqgb9QjqErV62ROr637icQOJ2D3icseSOhicVTHmeuSkTSYTXLWQeCKUgym43feB8ufpkkd9icsFCEupg/132","comment_is_top":false,"comment_ctime":1619523367,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619523367","product_id":100035801,"comment_content":"老师好，想请问下，如果业务那边有提出rto，rpo的要求，咱们在开发过程中怎么对应，证明能达到业务的要求？应用，网络，infra的设计怎么合并起来一起，证明系统作为一个整体，能达到业务的要求呢？谢谢","like_count":0},{"had_liked":false,"id":289821,"user_name":"石头","can_delete":false,"product_type":"c1","uid":2586341,"ip_address":"","ucode":"EB3C9A277C7B0C","user_header":"","comment_is_top":false,"comment_ctime":1619189211,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619189211","product_id":100035801,"comment_content":"其实关于建议监控分析日志来确定超时时间，也就是搭建一套埋点系统，并基于此做通用的监控平台。拿到p99也就很简单了","like_count":0},{"had_liked":false,"id":289820,"user_name":"石头","can_delete":false,"product_type":"c1","uid":2586341,"ip_address":"","ucode":"EB3C9A277C7B0C","user_header":"","comment_is_top":false,"comment_ctime":1619189039,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619189039","product_id":100035801,"comment_content":"灾备方案也是核心系统里做高可用不可少的，比如异构，同城双机房，异地多活，全球调度等。<br>这个和failover还不太一样。","like_count":0},{"had_liked":false,"id":281550,"user_name":"小新","can_delete":false,"product_type":"c1","uid":2027129,"ip_address":"","ucode":"026D65023FA80A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/ee/79/78c420c4.jpg","comment_is_top":false,"comment_ctime":1614782529,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614782529","product_id":100035801,"comment_content":"互相转移<br>限流<br>降级<br>熔断","like_count":0},{"had_liked":false,"id":263697,"user_name":"下个目标45k","can_delete":false,"product_type":"c1","uid":1066508,"ip_address":"","ucode":"193BA8C3AA9A61","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","comment_is_top":false,"comment_ctime":1606221905,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606221905","product_id":100035801,"comment_content":"现在微服务盛行,超时控制需要考虑到级联超时,不然会存在超时不准确的情况,这点go语言相关的rpc做的比较好(可能是context比较好用)","like_count":0},{"had_liked":false,"id":192243,"user_name":"sipom","can_delete":false,"product_type":"c1","uid":1074197,"ip_address":"","ucode":"80411DC49CFA57","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/15/9c9ca35c.jpg","comment_is_top":false,"comment_ctime":1584844105,"is_pvip":false,"replies":[{"id":"73898","content":"👍","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1585019948,"ip_address":"","comment_id":192243,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584844105","product_id":100035801,"comment_content":"系统架构保障：<br>1、多节点冗余，避免单点<br>2、故障节点探测、隔离<br>3、故障转移、超时监控、降级限流<br><br>制度保障：监控机制、运维流程","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488349,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585019948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160262,"user_name":"小陈","can_delete":false,"product_type":"c1","uid":1009385,"ip_address":"","ucode":"A03A299310AD18","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/e9/814d057a.jpg","comment_is_top":false,"comment_ctime":1575900454,"is_pvip":false,"replies":[{"id":"61408","content":"客户端指的是调用方~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1576116964,"ip_address":"","comment_id":160262,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575900454","product_id":100035801,"comment_content":"客户端用尽线程不会挂掉吧，应该是没有多余线程再请求了，慢请求也不会导致雪崩吧？","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477318,"discussion_content":"客户端指的是调用方~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576116964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156891,"user_name":"🐒王子 ♡桃桃。","can_delete":false,"product_type":"c1","uid":1350615,"ip_address":"","ucode":"1FD9BCD3459DC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/d7/3e4eb062.jpg","comment_is_top":false,"comment_ctime":1574992323,"is_pvip":false,"replies":[{"id":"60226","content":"谢谢：）","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1575014485,"ip_address":"","comment_id":156891,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574992323","product_id":100035801,"comment_content":"感谢老师，收获很大","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476264,"discussion_content":"谢谢：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575014485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154967,"user_name":"woshicai","can_delete":false,"product_type":"c1","uid":1596907,"ip_address":"","ucode":"B7B990F7D01277","user_header":"https://static001.geekbang.org/account/avatar/00/18/5d/eb/c6a53103.jpg","comment_is_top":false,"comment_ctime":1574606303,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574606303","product_id":100035801,"comment_content":"主要的高可用手段<br>1.  限流，原因在于业务核心功能依赖第三方，第三方已经给出拐点，根据给出的数据进行限流；<br>2. 运维： docker化，不过现在都是k8s了，后续估计还要继续改进；<br>3. failover： 这个基本都有，重试+约定超时时间，不过这个超时时间一般不出线上问题就不会改了。<br>4. 提高MTTR， MTBF因为第三方不可控，佛系了<br><br>需要改进的点： 灰度上线+故障演练，这个说实话需要正规的运维，目前比较欠缺。","like_count":0},{"had_liked":false,"id":148382,"user_name":"峰","can_delete":false,"product_type":"c1","uid":1390326,"ip_address":"","ucode":"527BB65559F0B0","user_header":"https://static001.geekbang.org/account/avatar/00/15/36/f6/d65b7302.jpg","comment_is_top":false,"comment_ctime":1573000713,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573000713","product_id":100035801,"comment_content":"我记得老师有个文章中说到应用中始终都会存在一个单点，并提到nginx和keepalived，不知道是哪一篇了","like_count":0},{"had_liked":false,"id":146294,"user_name":"无形","can_delete":false,"product_type":"c1","uid":1016889,"ip_address":"","ucode":"B740E2A68A17A5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/39/c8772466.jpg","comment_is_top":false,"comment_ctime":1572490667,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1572490667","product_id":100035801,"comment_content":"用supervisor管理程序，意外挂掉也可以迅速重启","like_count":0,"discussions":[{"author":{"id":1104850,"avatar":"https://static001.geekbang.org/account/avatar/00/10/db/d2/e29f8834.jpg","nickname":"lidashuang","note":"","ucode":"560ABE8032760E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297024,"discussion_content":"systemd","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596732191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143324,"user_name":"lhf@sz","can_delete":false,"product_type":"c1","uid":1543643,"ip_address":"","ucode":"8FDDE0E05C5DE1","user_header":"https://static001.geekbang.org/account/avatar/00/17/8d/db/c9d3e368.jpg","comment_is_top":false,"comment_ctime":1571668838,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1571668838","product_id":100035801,"comment_content":"服务变更涉及数据库变更如何保证变更期间好可用","like_count":0},{"had_liked":false,"id":140187,"user_name":"长期规划","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1570845718,"is_pvip":false,"replies":[{"id":"54206","content":"👍👍","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1570850494,"ip_address":"","comment_id":140187,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570845718","product_id":100035801,"comment_content":"手段还是挺多的，我以前只知道冗余。原来还可以考虑有损的高可用，降级，限流是有损的，我理解是尽量不用吧，毕竟影响用户了。<br>灰度发布算是渐进式升级，保证如果有故障，范围小。我联想到了改革开放时办经济特区。其实道理一样，渐进式😇😇","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470288,"discussion_content":"👍👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570850494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140169,"user_name":"长期规划","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1570844070,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570844070","product_id":100035801,"comment_content":"每增加一个9，年故障时间降到原来1&#47;10，指数级下降，但想实现的难度也越高","like_count":0},{"had_liked":false,"id":139042,"user_name":"Woosang","can_delete":false,"product_type":"c1","uid":1220919,"ip_address":"","ucode":"BB63C9F1BBDF61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/CJYUnMtcdu7GdMGxzVicTYpfsbhTKzrCIpoLIJxn8ByWsq1ol35RZLe1u4eWJpFhGK7ISpee2slWYokn0vBicw7A/132","comment_is_top":false,"comment_ctime":1570531676,"is_pvip":false,"replies":[{"id":"53626","content":"额 是的，我和小编改一下~","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1570582520,"ip_address":"","comment_id":139042,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570531676","product_id":100035801,"comment_content":"最后的总结里面的一句话，无非就是增加了其它系统的启动时间，而不是启动速度吧？！","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469765,"discussion_content":"额 是的，我和小编改一下~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570582520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138377,"user_name":"Geek_b85295","can_delete":false,"product_type":"c1","uid":1487998,"ip_address":"","ucode":"51CBB577C255EA","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqtXSgThiaEiaEqqic5YIJ7v469nCM3VXiccOJ4SxbYjW91ciczuYYEzcTVtYWaWXaokZqShuLdKsXjnFA/132","comment_is_top":false,"comment_ctime":1570184623,"is_pvip":false,"replies":[{"id":"53244","content":"我觉得从最终结果来看如果任务重新训练了，就算作是高可用了<br>","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1570263839,"ip_address":"","comment_id":138377,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570184623","product_id":100035801,"comment_content":"老师请教一个问题，对于高可用性，如果服务的形式为，一个训练的集群，每个节点上会被分配不同的训练任务。这个时候某个节点挂了，上面的任务必然会受到影响，比如用户需要重新开始训练某个任务。像这样的情况，属于高可用性吗，有没有合理的解决方法呢","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469502,"discussion_content":"我觉得从最终结果来看如果任务重新训练了，就算作是高可用了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570263839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137998,"user_name":"StarKing","can_delete":false,"product_type":"c1","uid":1004192,"ip_address":"","ucode":"EB825CFA70AC1F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/a0/d308434e.jpg","comment_is_top":false,"comment_ctime":1569976259,"is_pvip":false,"replies":[{"id":"53108","content":"后面的课程会有实际的案例的，前面是一个概要，会偏理论一些","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1570060320,"ip_address":"","comment_id":137998,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569976259","product_id":100035801,"comment_content":"1.比较合理的心跳检测和健康检测机制，防止偶尔网络抖动。<br>2.牛逼的选主策略，和快速响应告警机制。<br>3.高可用的缓存和消息组件。<br>老师以上的课往往是偏向于理论和运维知识啊","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469342,"discussion_content":"后面的课程会有实际的案例的，前面是一个概要，会偏理论一些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570060320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137647,"user_name":"LeoJen","can_delete":false,"product_type":"c1","uid":1667746,"ip_address":"","ucode":"CFB0C36E29F079","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erqEjaudl40l7Dd8icVgzibtf9ueY5ZRjgdBuu4iaLVic3mZQ22FSPjWXQMkxWKxWAOulPo7z6XvjcexA/132","comment_is_top":false,"comment_ctime":1569811466,"is_pvip":false,"replies":[{"id":"52890","content":"哨兵？","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569815509,"ip_address":"","comment_id":137647,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569811466","product_id":100035801,"comment_content":"可以请假个关于高可用业余问题不：比如线上redis集群业务，其中有某个节点挂了，但是由于节点数据量较大，导致重启需要花费大量时间，那这种情况应该快速恢复？","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469191,"discussion_content":"哨兵？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569815509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136775,"user_name":"大魔王汪汪","can_delete":false,"product_type":"c1","uid":1010680,"ip_address":"","ucode":"4B205CB52FC95F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/f8/b4da7936.jpg","comment_is_top":false,"comment_ctime":1569506252,"is_pvip":false,"replies":[{"id":"52488","content":"一般使用tc来模拟网络慢的情况，磁盘故障可以使用fiu-ctrl","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569546514,"ip_address":"","comment_id":136775,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569506252","product_id":100035801,"comment_content":"请问 针对于操作系统，网络或磁盘这种应该怎么故障注入，故障模拟应该怎么模拟呢？需要自研还是有通用的工具呢？","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468797,"discussion_content":"一般使用tc来模拟网络慢的情况，磁盘故障可以使用fiu-ctrl","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569546514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136496,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1569460531,"is_pvip":false,"replies":[{"id":"52494","content":"👍","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569546824,"ip_address":"","comment_id":136496,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569460531","product_id":100035801,"comment_content":"系统设计的时候要考虑系统能对超时进行控制，能随时降级，限流这些功能；系统上线前先进行“故障演练”；期待后面的从0到1的高并发系统设计案例。打卡03.","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468667,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569546824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136229,"user_name":"兔2🐰🍃","can_delete":false,"product_type":"c1","uid":1096984,"ip_address":"","ucode":"1FEDA044BB6CBD","user_header":"https://static001.geekbang.org/account/avatar/00/10/bd/18/2af6bf4b.jpg","comment_is_top":false,"comment_ctime":1569391916,"is_pvip":false,"replies":[{"id":"52276","content":"👍👍👍","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569421856,"ip_address":"","comment_id":136229,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569391916","product_id":100035801,"comment_content":"本节主旨：高可用的一些方案。<br>程序：超时，限流（有损业务），故障转移，降级。<br>运维：灰度发布，故障演练。<br>","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468517,"discussion_content":"👍👍👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569421856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136227,"user_name":"Cola_","can_delete":false,"product_type":"c1","uid":1264718,"ip_address":"","ucode":"99996D04CA4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/4c/4e/91267714.jpg","comment_is_top":false,"comment_ctime":1569391107,"is_pvip":false,"replies":[{"id":"52277","content":"👍👍👍","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569421876,"ip_address":"","comment_id":136227,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569391107","product_id":100035801,"comment_content":"高可用性：<br>MTBF(Mean Time Between Failure)平均故障间隔时间越大越好<br>MTTR(Mean Time To Repair)故障平均恢复时间越小越好<br>1.系统设计(备用节点顶替故障的服务，丢卒保车)<br>failover故障转移<br>超时控制<br>降级(牺牲非核心服务)<br>限流(限制每秒请求次数，例如限制在每秒1000次以内，多的请求给用户返回错误提示)<br>2.系统运维<br>灰度发布 系统的变更按照一定比例逐步推进上线，如果运行一段时间系统指标平稳且没有大量错误日志出现，则推动全量变更<br>故障演练 在线上系统上随机关闭节点模拟故障，若你的系统不能够抵御一些异常情况的话，建议在线下部署一套和线上一样的系统进行故障演练<br>同时要注意不要过度优化，以实际业务需要为准","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468516,"discussion_content":"👍👍👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569421876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136178,"user_name":"Omer","can_delete":false,"product_type":"c1","uid":1676246,"ip_address":"","ucode":"8EE3E531313265","user_header":"https://static001.geekbang.org/account/avatar/00/19/93/d6/040e4965.jpg","comment_is_top":false,"comment_ctime":1569378320,"is_pvip":false,"replies":[{"id":"52269","content":"就是获得系统的一些配置数据","user_name":"作者回复","user_name_real":"唐扬","uid":"1448977","ctime":1569421380,"ip_address":"","comment_id":136178,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1569378320","product_id":100035801,"comment_content":"配置下发不是很理解，可能是没接触过😂 ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"唐扬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468495,"discussion_content":"就是获得系统的一些配置数据","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569421380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1755152,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VTPuhJb5xxuRwH1iblqrAe3De4PoETgNWibZRkLlhvszysdtpAvSPZFuYtsJfWJmoXOFFWnpR02W9NGIiammU8UPg/132","nickname":"Info_E","note":"","ucode":"97207B2CC4C776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349993,"discussion_content":"应用启动时去配置中心拉取配置，这个过程并不需要对性能有啥要求，因为用户就是自己；相反，可用性一定要保证，就是确定一定能获取到数据，否则启动都启动不了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613655167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1232334,"avatar":"","nickname":"13761642169","note":"","ucode":"68137695FC2120","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":191424,"discussion_content":"配置中心","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582991670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}