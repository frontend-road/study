{"id":102541,"title":"06丨数据过滤：SQL数据过滤都有哪些方法？","content":"<p>我在上篇文章中讲到过，提升查询效率的一个很重要的方式，就是约束返回结果的数量，还有一个很有效的方式，就是指定筛选条件，进行过滤。过滤可以筛选符合条件的结果，并进行返回，减少不必要的数据行。</p><p>那么在今天的内容里，我们来学习如何对SQL数据进行过滤，这里主要使用的就是WHERE子句。</p><p>你可能已经使用过WHERE子句，说起来SQL其实很简单，只要能把满足条件的内容筛选出来即可，但在实际使用过程中，不同人写出来的WHERE子句存在很大差别，比如执行效率的高低，有没有遇到莫名的报错等。</p><p>在今天的学习中，你重点需要掌握以下几方面的内容：</p><ol>\n<li>学会使用WHERE子句，如何使用比较运算符对字段的数值进行比较筛选；</li>\n<li>如何使用逻辑运算符，进行多条件的过滤；</li>\n<li>学会使用通配符对数据条件进行复杂过滤。</li>\n</ol><h2>比较运算符</h2><p>在SQL中，我们可以使用WHERE子句对条件进行筛选，在此之前，你需要了解WHERE子句中的比较运算符。这些比较运算符的含义你可以参见下面这张表格：</p><p><img src=\"https://static001.geekbang.org/resource/image/3a/e0/3a2667784b4887ef15becc7056f3d3e0.png?wh=799*545\" alt=\"\"></p><p>实际上你能看到，同样的含义可能会有多种表达方式，比如小于等于，可以是（&lt;=），也可以是不大于（!&gt;）。同样不等于，可以用（&lt;&gt;），也可以用（!=），它们的含义都是相同的，但这些符号的顺序都不能颠倒，比如你不能写（=&lt;）。需要注意的是，你需要查看使用的DBMS是否支持，不同的DBMS支持的运算符可能是不同的，比如Access不支持（!=），不等于应该使用（&lt;&gt;）。在MySQL中，不支持（!&gt;）（!&lt;）等。</p><!-- [[[read_end]]] --><p>我在上一篇文章中使用了heros数据表，今天还是以这张表格做练习。下面我们通过比较运算符对王者荣耀的英雄属性进行条件筛选。</p><p>WHERE子句的基本格式是：<code>SELECT ……(列名) FROM ……(表名) WHERE ……(子句条件)</code></p><p>比如我们想要查询所有最大生命值大于6000的英雄：</p><pre><code>SQL：SELECT name, hp_max FROM heros WHERE hp_max &gt; 6000\n</code></pre><p>运行结果（41条记录）：</p><p><img src=\"https://static001.geekbang.org/resource/image/9f/c1/9f639dfe0bd9dbfc63944447f92e47c1.png?wh=790*323\" alt=\"\"></p><p>想要查询所有最大生命值在5399到6811之间的英雄：</p><pre><code>SQL：SELECT name, hp_max FROM heros WHERE hp_max BETWEEN 5399 AND 6811\n</code></pre><p>运行结果：（41条记录）</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/60/4b11a5f32f3f2807c8278f8d5637d460.png?wh=798*324\" alt=\"\"></p><p>需要注意的是<code>hp_max</code>可以取值到最小值和最大值，即5399和6811。</p><p>我们也可以对heros表中的<code>hp_max</code>字段进行空值检查。</p><pre><code>SQL：SELECT name, hp_max FROM heros WHERE hp_max IS NULL\n</code></pre><p>运行结果为空，说明heros表中的<code>hp_max</code>字段没有存在空值的数据行。</p><h2>逻辑运算符</h2><p>我刚才介绍了比较运算符，如果我们存在多个WHERE条件子句，可以使用逻辑运算符：</p><p><img src=\"https://static001.geekbang.org/resource/image/ae/c1/aeed170c57ae1e5378fbee9f8fb6a8c1.png?wh=796*272\" alt=\"\"></p><p>我们还是通过例子来看下这些逻辑运算符的使用，同样采用heros这张表的数据查询。</p><p>假设想要筛选最大生命值大于6000，最大法力大于1700的英雄，然后按照最大生命值和最大法力值之和从高到低进行排序。</p><pre><code>SQL：SELECT name, hp_max, mp_max FROM heros WHERE hp_max &gt; 6000 AND mp_max &gt; 1700 ORDER BY (hp_max+mp_max) DESC\n</code></pre><p>运行结果：（23条记录）</p><p><img src=\"https://static001.geekbang.org/resource/image/85/4e/859e7e9fcf28a30f9189ef81cfe7284e.png?wh=821*323\" alt=\"\"></p><p>如果AND和OR同时存在WHERE子句中会是怎样的呢？假设我们想要查询最大生命值加最大法力值大于8000的英雄，或者最大生命值大于6000并且最大法力值大于1700的英雄。</p><pre><code>SQL：SELECT name, hp_max, mp_max FROM heros WHERE (hp_max+mp_max) &gt; 8000 OR hp_max &gt; 6000 AND mp_max &gt; 1700 ORDER BY (hp_max+mp_max) DESC\n</code></pre><p>运行结果：（33条记录）</p><p><img src=\"https://static001.geekbang.org/resource/image/05/ae/052c1fb7031d025d5e0c0027177187ae.png?wh=823*322\" alt=\"\"></p><p>你能看出来相比于上一个条件查询，这次的条件查询多出来了10个英雄，这是因为我们放宽了条件，允许最大生命值+最大法力值大于8000的英雄显示出来。另外你需要注意到，当WHERE子句中同时存在OR和AND的时候，AND执行的优先级会更高，也就是说SQL会优先处理AND操作符，然后再处理OR操作符。</p><p>如果我们对这条查询语句OR两边的条件增加一个括号，结果会是怎样的呢？</p><pre><code>SQL：SELECT name, hp_max, mp_max FROM heros WHERE ((hp_max+mp_max) &gt; 8000 OR hp_max &gt; 6000) AND mp_max &gt; 1700 ORDER BY (hp_max+mp_max) DESC\n</code></pre><p>运行结果：</p><p><img src=\"https://static001.geekbang.org/resource/image/1a/c9/1a41124faad3aac6e8170a72e65de5c9.png?wh=820*325\" alt=\"\"></p><p>所以当WHERE子句中同时出现AND和OR操作符的时候，你需要考虑到执行的先后顺序，也就是两个操作符执行的优先级。一般来说()优先级最高，其次优先级是AND，然后是OR。</p><p>如果我想要查询主要定位或者次要定位是法师或是射手的英雄，同时英雄的上线时间不在2016-01-01到2017-01-01之间。</p><pre><code>SQL：\nSELECT name, role_main, role_assist, hp_max, mp_max, birthdate\nFROM heros \nWHERE (role_main IN ('法师', '射手') OR role_assist IN ('法师', '射手')) \nAND DATE(birthdate) NOT BETWEEN '2016-01-01' AND '2017-01-01'\nORDER BY (hp_max + mp_max) DESC\n</code></pre><p>你能看到我把WHERE子句分成了两个部分。第一部分是关于主要定位和次要定位的条件过滤，使用的是<code>role_main in ('法师', '射手') OR role_assist in ('法师', '射手')</code>。这里用到了IN逻辑运算符，同时<code>role_main</code>和<code>role_assist</code>是OR（或）的关系。</p><p>第二部分是关于上线时间的条件过滤。NOT代表否，因为我们要找到不在2016-01-01到2017-01-01之间的日期，因此用到了<code>NOT BETWEEN '2016-01-01' AND '2017-01-01'</code>。同时我们是在对日期类型数据进行检索，所以使用到了DATE函数，将字段birthdate转化为日期类型再进行比较。关于日期的操作，我会在下一篇文章中再作具体介绍。</p><p>这是运行结果（6条记录）：</p><p><img src=\"https://static001.geekbang.org/resource/image/70/8e/7048f6ff11215b6d0113b2370103828e.png?wh=981*369\" alt=\"\"></p><h2>使用通配符进行过滤</h2><p>刚才讲解的条件过滤都是对已知值进行的过滤，还有一种情况是我们要检索文本中包含某个词的所有数据，这里就需要使用通配符。通配符就是我们用来匹配值的一部分的特殊字符。这里我们需要使用到LIKE操作符。</p><p>如果我们想要匹配任意字符串出现的任意次数，需要使用（%）通配符。比如我们想要查找英雄名中包含“太”字的英雄都有哪些：</p><pre><code>SQL：SELECT name FROM heros WHERE name LIKE '%太%'\n</code></pre><p>运行结果：（2条记录）</p><p><img src=\"https://static001.geekbang.org/resource/image/b1/18/b18de17c2517d7c06c56f324309c4c18.png?wh=199*183\" alt=\"\"><br>\n需要说明的是不同DBMS对通配符的定义不同，在Access中使用的是（*）而不是（%）。另外关于字符串的搜索可能是需要区分大小写的，比如<code>'liu%'</code>就不能匹配上<code>'LIU BEI'</code>。具体是否区分大小写还需要考虑不同的DBMS以及它们的配置。</p><p>如果我们想要匹配单个字符，就需要使用下划线(<em>)通配符。（%）和（</em>）的区别在于，（%）代表零个或多个字符，而（_）只代表一个字符。比如我们想要查找英雄名除了第一个字以外，包含‘太’字的英雄有哪些。</p><pre><code>SQL：SELECT name FROM heros WHERE name LIKE '_%太%'\n</code></pre><p>运行结果（1条记录）：</p><p><img src=\"https://static001.geekbang.org/resource/image/ab/65/ab30c809327a81ee00ce4989e7815065.png?wh=197*123\" alt=\"\"></p><p>因为太乙真人的太是第一个字符，而<code>_%太%</code>中的太不是在第一个字符，所以匹配不到“太乙真人”，只可以匹配上“东皇太一”。</p><p>同样需要说明的是，在Access中使用（?）来代替（<code>_</code>），而且在DB2中是不支持通配符（<code>_</code>）的，因此你需要在使用的时候查阅相关的DBMS文档。</p><p>你能看出来通配符还是很有用的，尤其是在进行字符串匹配的时候。不过在实际操作过程中，我还是建议你尽量少用通配符，因为它需要消耗数据库更长的时间来进行匹配。即使你对LIKE检索的字段进行了索引，索引的价值也可能会失效。如果要让索引生效，那么LIKE后面就不能以（%）开头，比如使用<code>LIKE '%太%'</code>或<code>LIKE '%太'</code>的时候就会对全表进行扫描。如果使用<code>LIKE '太%'</code>，同时检索的字段进行了索引的时候，则不会进行全表扫描。</p><h2>总结</h2><p>今天我对SQL语句中的WHERE子句进行了讲解，你可以使用比较运算符、逻辑运算符和通配符这三种方式对检索条件进行过滤。</p><p>比较运算符是对数值进行比较，不同的DBMS支持的比较运算符可能不同，你需要事先查阅相应的DBMS文档。逻辑运算符可以让我们同时使用多个WHERE子句，你需要注意的是AND和OR运算符的执行顺序。通配符可以让我们对文本类型的字段进行模糊查询，不过检索的代价也是很高的，通常都需要用到全表扫描，所以效率很低。只有当LIKE语句后面不用通配符，并且对字段进行索引的时候才不会对全表进行扫描。</p><p>你可能认为学习SQL并不难，掌握这些语法就可以对数据进行筛选查询。但实际工作中不同人写的SQL语句的查询效率差别很大，保持高效率的一个很重要的原因，就是要避免全表扫描，所以我们会考虑在WHERE及ORDER BY涉及到的列上增加索引。</p><p><img src=\"https://static001.geekbang.org/resource/image/fb/50/fbd79c2c90a58891b498e7f29d935050.jpg?wh=3341*1713\" alt=\"\"></p><p>你能说一下WHERE子句中比较运算符、逻辑运算符和通配符这三者各自的作用吗？以heros数据表为例，请你编写SQL语句，对英雄名称、主要定位、次要定位、最大生命和最大法力进行查询，筛选条件为：主要定位是坦克或者战士，并且次要定位不为空，同时满足最大生命值大于8000或者最大法力小于1500的英雄，并且按照最大生命和最大法力之和从高到底的顺序进行排序。</p><p>欢迎你在评论区写下你的思考，也欢迎点击请朋友读，把这篇文章分享给你的朋友或者同事。</p>","neighbors":{"left":{"article_title":"05丨检索数据：你还在SELECT * 么？","id":102111},"right":{"article_title":"07丨什么是SQL函数？为什么使用SQL函数可能会带来问题？","id":103349}},"comments":[{"had_liked":false,"id":106480,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1561333773,"is_pvip":true,"replies":[{"id":"38521","content":"这是一个很好的问题，关于ORDER BY字段是否增加索引：<br>在MySQL中，支持两种排序方式：FileSort和Index排序。Index排序的效率更高，<br>Index排序：索引可以保证数据的有序性，因此不需要再进行排序。<br>FileSort排序：一般在内存中进行排序，占用CPU较多。如果待排结果较大，会产生临时文件I&#47;O到磁盘进行排序，效率较低。<br><br>所以使用ORDER BY子句时，应该尽量使用Index排序，避免使用FileSort排序。<br>当然具体优化器是否采用索引进行排序，你可以使用explain来进行执行计划的查看。<br>优化建议：<br>1、SQL中，可以在WHERE子句和ORDER BY子句中使用索引，目的是在WHERE子句中避免全表扫描，ORDER BY子句避免使用FileSort排序。<br>当然，某些情况下全表扫描，或者FileSort排序不一定比索引慢。但总的来说，我们还是要避免，以提高查询效率。<br>一般情况下，优化器会帮我们进行更好的选择，当然我们也需要建立合理的索引。<br>2、尽量Using Index完成ORDER BY排序。<br>如果WHERE和ORDER BY相同列就使用单索引列；如果不同使用联合索引。<br>3、无法Using Index时，对FileSort方式进行调优。","user_name":"作者回复","comment_id":106480,"uid":"1306094","ip_address":"","utype":1,"ctime":1561344094,"user_name_real":"cy"}],"discussion_count":5,"race_medal":1,"score":"439647997965","product_id":100029501,"comment_content":"就是要避免全表扫描，所以我们会考虑在 WHERE 及 ORDER BY 涉及到的列上增加索引<br>-----------------------------------------------<br>where 条件字段上加索引是可以明白的，但是为什么 order by 字段上还要加索引呢？这个时候已经通过 where条件过滤得到了数据，已经不需要在筛选过滤数据了，只需要在排序的时候根据字段排序就好了。不是很明白","like_count":102,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455107,"discussion_content":"这是一个很好的问题，关于ORDER BY字段是否增加索引：\n在MySQL中，支持两种排序方式：FileSort和Index排序。Index排序的效率更高，\nIndex排序：索引可以保证数据的有序性，因此不需要再进行排序。\nFileSort排序：一般在内存中进行排序，占用CPU较多。如果待排结果较大，会产生临时文件I/O到磁盘进行排序，效率较低。\n\n所以使用ORDER BY子句时，应该尽量使用Index排序，避免使用FileSort排序。\n当然具体优化器是否采用索引进行排序，你可以使用explain来进行执行计划的查看。\n优化建议：\n1、SQL中，可以在WHERE子句和ORDER BY子句中使用索引，目的是在WHERE子句中避免全表扫描，ORDER BY子句避免使用FileSort排序。\n当然，某些情况下全表扫描，或者FileSort排序不一定比索引慢。但总的来说，我们还是要避免，以提高查询效率。\n一般情况下，优化器会帮我们进行更好的选择，当然我们也需要建立合理的索引。\n2、尽量Using Index完成ORDER BY排序。\n如果WHERE和ORDER BY相同列就使用单索引列；如果不同使用联合索引。\n3、无法Using Index时，对FileSort方式进行调优。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1561344094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"杯莫停","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304331,"discussion_content":"我试过只有在where条件语句中和order by语句中使用了相同的inde字段才会Using Index否则都是Using filesort","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599548055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1311032,"avatar":"https://static001.geekbang.org/account/avatar/00/14/01/38/104b96a3.jpg","nickname":"谭伟","note":"","ucode":"AEC724819A2773","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38570,"discussion_content":"1是避免回表，2是索引本身有序","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571804889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1217874,"avatar":"https://static001.geekbang.org/account/avatar/00/12/95/52/ad190682.jpg","nickname":"Mr wind","note":"","ucode":"484F02D1962239","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314,"discussion_content":"使用联合索引还需要注意最左前缀原则，尤其在where 和order by ,group by 搭配时","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561443612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346267,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/db/76ab84c6.jpg","nickname":"小豹子","note":"","ucode":"972F3E6BF0FDEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225,"discussion_content":"作者说的意思应该是order by某个字段，如果你只想取前五行，那么这时候该字段上面的索引就能用得到，使用索引反向扫描。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561337953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106568,"user_name":"Samson","can_delete":false,"product_type":"c1","uid":1572899,"ip_address":"","ucode":"2114D3E2E8C5BE","user_header":"https://static001.geekbang.org/account/avatar/00/18/00/23/17868694.jpg","comment_is_top":false,"comment_ctime":1561345920,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"246374481792","product_id":100029501,"comment_content":"老师，似乎有个问题：“（%）和（_）的区别在于，（%）代表一个或多个字符，而（_）只代表一个字符。”<br><br>%似乎是代表0个或任意正整数个字符，而不是一个或多个，因为如果是一个或多个的话，那么第一个例子中的太乙真人就匹配不到了。","like_count":57,"discussions":[{"author":{"id":1217874,"avatar":"https://static001.geekbang.org/account/avatar/00/12/95/52/ad190682.jpg","nickname":"Mr wind","note":"","ucode":"484F02D1962239","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311,"discussion_content":"是的，%代表0个或者多个，不过需要注意单独的 like &#39;%&#39; 无法查出null值","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1561443444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106900,"user_name":"极客星星","can_delete":false,"product_type":"c1","uid":1010337,"ip_address":"","ucode":"73BA4E96CCB934","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/a1/6270eeb7.jpg","comment_is_top":false,"comment_ctime":1561423673,"is_pvip":false,"replies":[{"id":"38721","content":"多谢提问，这句话我说的比较省略。想表达的意思是，如果你使用了WHERE子句，对于某个字段进行了条件筛选，那么这个字段你可以通过建立索引的方式进行SQL优化。<br>因为我们在进行SQL优化的时候，应该尽量避免全表扫描。所以当我们使用WHERE子句对某个字段进行了条件筛选时，如果我们没有对这个字段建立索引，就会进入到全表扫描，因此可以考虑对这个字段建立索引。<br><br>当然你也需要注意 索引是否会失效。因此除了考虑建立字段索引以外，你还需要考虑：<br>1、不要在WHERE子句后面对字段做函数处理，同时也避免对索引字段进行数据类型转换<br>2、避免在索引字段上使用&lt;&gt;，!=，以及对字段进行NULL判断（包括 IS NULL, IS NOT NULL）<br>3、在索引字段后，慎用IN和NOT IN，如果是连续的数值，可以考虑用BETWEEN进行替换<br>因为在WHERE子句中，如果对索引字段进行了函数处理，或者使用了&lt;&gt;,!=或NULL判断等，都会造成索引失效。","user_name":"作者回复","comment_id":106900,"uid":"1306094","ip_address":"","utype":1,"ctime":1561439309,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"233489657657","product_id":100029501,"comment_content":"你好  老师 不是很明白您说的对where语句建索引是什么意思 通过sql语句怎么实现<br>谢谢","like_count":54,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455273,"discussion_content":"多谢提问，这句话我说的比较省略。想表达的意思是，如果你使用了WHERE子句，对于某个字段进行了条件筛选，那么这个字段你可以通过建立索引的方式进行SQL优化。\n因为我们在进行SQL优化的时候，应该尽量避免全表扫描。所以当我们使用WHERE子句对某个字段进行了条件筛选时，如果我们没有对这个字段建立索引，就会进入到全表扫描，因此可以考虑对这个字段建立索引。\n\n当然你也需要注意 索引是否会失效。因此除了考虑建立字段索引以外，你还需要考虑：\n1、不要在WHERE子句后面对字段做函数处理，同时也避免对索引字段进行数据类型转换\n2、避免在索引字段上使用&amp;lt;&amp;gt;，!=，以及对字段进行NULL判断（包括 IS NULL, IS NOT NULL）\n3、在索引字段后，慎用IN和NOT IN，如果是连续的数值，可以考虑用BETWEEN进行替换\n因为在WHERE子句中，如果对索引字段进行了函数处理，或者使用了&amp;lt;&amp;gt;,!=或NULL判断等，都会造成索引失效。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561439309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107032,"user_name":"陈扬鸿","can_delete":false,"product_type":"c1","uid":1284708,"ip_address":"","ucode":"DDDA8493CDC83C","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/64/eea9aa33.jpg","comment_is_top":false,"comment_ctime":1561441699,"is_pvip":false,"replies":[{"id":"38742","content":"在MySQL8.0版本之前，当我们ALTER TABLE时系统崩溃了，则会遗留.frm，.ibd文件。而在8.0版本之后，MySQL默认的InnoDB存储引擎实现了原子DDL。原子 DDL 操作写入了内部隐藏的系统表，即mysql.innodb_ddl_log中，也就是说明在DDL执行过程中如果出现了失败，是可以回滚的。<br>需要说明的是：DDL如果正常运行结束后，ddl_log中的相应日志也会被删除。如果这中间崩溃了，重启时会根据事务是否提交了来判断是做redo，还是undo DLL操作。","user_name":"作者回复","comment_id":107032,"uid":"1306094","ip_address":"","utype":1,"ctime":1561448176,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"147590329763","product_id":100029501,"comment_content":"老师，你好，现在mysql8已经没有frm文件，一旦数据字典丢失，没有表结构就无法恢复单个ibd文件的数据，如何通过mysql8的 sdi文件生成创建表的ddl语句。","like_count":33,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455335,"discussion_content":"在MySQL8.0版本之前，当我们ALTER TABLE时系统崩溃了，则会遗留.frm，.ibd文件。而在8.0版本之后，MySQL默认的InnoDB存储引擎实现了原子DDL。原子 DDL 操作写入了内部隐藏的系统表，即mysql.innodb_ddl_log中，也就是说明在DDL执行过程中如果出现了失败，是可以回滚的。\n需要说明的是：DDL如果正常运行结束后，ddl_log中的相应日志也会被删除。如果这中间崩溃了，重启时会根据事务是否提交了来判断是做redo，还是undo DLL操作。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561448176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106545,"user_name":"Abyssknight","can_delete":false,"product_type":"c1","uid":1336361,"ip_address":"","ucode":"08E8D68E4B76BB","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/29/da537902.jpg","comment_is_top":false,"comment_ctime":1561341277,"is_pvip":false,"replies":[{"id":"38523","content":"对的 解释正确","user_name":"作者回复","comment_id":106545,"uid":"1306094","ip_address":"","utype":1,"ctime":1561344988,"user_name_real":"cy"}],"discussion_count":6,"race_medal":0,"score":"143295262045","product_id":100029501,"comment_content":"关于通配符匹配里的 % 相当于正则表达式里的 .* 表示匹配大于等于0个任意字符，<br>所以  % 太 % 匹配的是 [大于等于0个任意字符]太[大于等于0个任意字符]，[东皇]太[一] 和 []太[乙真人]都符合；<br>而 _% 相当于正则表达式里的 .+ 表示匹配至少一个，即大于等于1个，<br>所以  &#39;_% 太 % 匹配的是 [大于等于1个字符]太[大于等于0个字符]，只有 [东皇]太[一] 符合。","like_count":33,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455133,"discussion_content":"对的 解释正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561344988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1237145,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","nickname":"MJ","note":"","ucode":"FCEC0C21444D2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273,"discussion_content":"亲测  可以匹配到。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561377236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1578271,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLTOaSibFSEnoB5c0qdG7g9Eia5f2xONMbWYmnpQZTYrSqUUMnG984jFVGyVG8px3oSDVUIXj185VEA/132","nickname":"Geek_7777","note":"","ucode":"FC5FFB3DE50BB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1237145,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","nickname":"MJ","note":"","ucode":"FCEC0C21444D2A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248998,"discussion_content":"太太皇一也匹的到，只要非第一位还有太，就匹的到咯","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587906126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":273,"ip_address":""},"score":248998,"extra":""}]},{"author":{"id":1237145,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","nickname":"MJ","note":"","ucode":"FCEC0C21444D2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272,"discussion_content":"问题来了，太皇太一  是否能匹配到呢？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561377080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2962599,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","nickname":"年少挽滑稽世无双","note":"","ucode":"793DCBDE25A07B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586595,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662366801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2137527,"avatar":"","nickname":"Geek_dc38fc","note":"","ucode":"D784ABCC464862","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300088,"discussion_content":"有个小疑问？请问这里的大于等于一个字符是哪个字符？如果是‘太’字符，为啥？可以理解为不对第一个字符进行匹配，只对后面的字符进行匹配吗，满足有‘太’的输出来吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597932189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107601,"user_name":"怪兽宇","can_delete":false,"product_type":"c1","uid":1079452,"ip_address":"","ucode":"3C2CC675C9DCE7","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/9c/5780b1de.jpg","comment_is_top":false,"comment_ctime":1561562740,"is_pvip":false,"replies":[{"id":"39202","content":"可以考虑：<br>1、建立索引<br>2、使用函数来替代LIKE，<br>如果是MySQL的话：可以考虑locate, position, instr, find_in_set <br>如果是SQL Server，可以考虑charindex, patindex<br>","user_name":"作者回复","comment_id":107601,"uid":"1306094","ip_address":"","utype":1,"ctime":1561693976,"user_name_real":"cy"}],"discussion_count":7,"race_medal":0,"score":"130410581620","product_id":100029501,"comment_content":"老师好, 平日因业务考核需要，一条查询语句查询条件需要写 30 多个 like &quot;%A%&quot;  ，语句跑起来特别慢，请问有什么优化方法吗？","like_count":30,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455582,"discussion_content":"可以考虑：\n1、建立索引\n2、使用函数来替代LIKE，\n如果是MySQL的话：可以考虑locate, position, instr, find_in_set \n如果是SQL Server，可以考虑charindex, patindex\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561693976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1582134,"avatar":"https://static001.geekbang.org/account/avatar/00/18/24/36/1c4af368.jpg","nickname":"TheOne","note":"","ucode":"2A359780156A8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334105,"discussion_content":"换ES吧，mysql隔着搞全文检索呢","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1607744033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1753775,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/c2/af/51cebce1.jpg","nickname":"发财","note":"","ucode":"534BFBABF9EF5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298502,"discussion_content":"老师，这个前后都模糊查询，建立索引生效吗？","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597312656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986708,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKT9Tk01eiaQ9aAhszthzGm6lwruRWPXia1YYFozctrdRvKg0Usp8NbwuKBApwD0D6Fty2tib3RdtFJg/132","nickname":"欧阳洲","note":"","ucode":"94606A6315F2BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298246,"discussion_content":"老师o(^o^)o\n不是说要少使用函数避免全表扫描吗","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597226892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1340120,"avatar":"https://static001.geekbang.org/account/avatar/00/14/72/d8/9eedbc5e.jpg","nickname":"FreeMason","note":"","ucode":"3D58AC2F9AB345","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36529,"discussion_content":"使用覆盖索引，如还需要其它 field，再拿 id 查一次。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571389611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"丁丁历险记","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1340120,"avatar":"https://static001.geekbang.org/account/avatar/00/14/72/d8/9eedbc5e.jpg","nickname":"FreeMason","note":"","ucode":"3D58AC2F9AB345","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46172,"discussion_content":"对的，尽量在存储引擎上完成过滤，减少不必要的回表。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573127433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":36529,"ip_address":""},"score":46172,"extra":""}]},{"author":{"id":1245650,"avatar":"https://static001.geekbang.org/account/avatar/00/13/01/d2/71cebd7a.jpg","nickname":"加冰","note":"","ucode":"A260F94475CC27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29809,"discussion_content":"这个能写个例子，使用索引怎么写？索引是不是就是ID？根据ID排序？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570785477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106530,"user_name":"Goal","can_delete":false,"product_type":"c1","uid":1307012,"ip_address":"","ucode":"C337CD4C7E07B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/84/7d21bd9e.jpg","comment_is_top":false,"comment_ctime":1561339490,"is_pvip":false,"replies":[{"id":"38527","content":"哈哈 太乙真人太太 这个解释的好。也就是在第一个字符之后能匹配上“太”字。","user_name":"作者回复","comment_id":106530,"uid":"1306094","ip_address":"","utype":1,"ctime":1561345596,"user_name_real":"cy"}],"discussion_count":2,"race_medal":0,"score":"113230489186","product_id":100029501,"comment_content":"老师关于通配符给的解释，不够清晰！<br>说明如下：<br>SQL：SELECT name FROM heros WHERE name LIKE &#39;_% 太 %&#39;<br><br>因为太乙真人的太是第一个字符，而_%太%中的太不是在第一个字符，所以匹配不到“太乙真人”，只可以匹配上“东皇太一”。<br><br>说明：<br>&quot;_&quot;：匹配任意一个字符，包括可以匹配到“太乙真人”的太字。 <br>但是，整体的通配符  &#39;_% 太 %&#39;，需要后面继续匹配到一个&quot;太&quot;字符，显然，&quot;太乙真人&quot;不符合了，如果是，&quot;太乙真人太太&quot;，就可以匹配到。","like_count":26,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455124,"discussion_content":"哈哈 太乙真人太太 这个解释的好。也就是在第一个字符之后能匹配上“太”字。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561345596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1321070,"avatar":"https://static001.geekbang.org/account/avatar/00/14/28/6e/32dca742.jpg","nickname":"史文强","note":"","ucode":"7CDDD70586A7A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561529,"discussion_content":"同有此疑问，这例子举得好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649663411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106842,"user_name":"stormsc","can_delete":false,"product_type":"c1","uid":1583642,"ip_address":"","ucode":"C58EAAA88C993A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epGMibYc0m7cDGC8CyCIwXynpzicpeAo6pJ8mLWxI3LxTLyaj2QLMg9Ea1M7KMWw4B9wbMfRJIs3vbg/132","comment_is_top":false,"comment_ctime":1561395118,"is_pvip":false,"replies":[{"id":"38726","content":"感谢提问，不是随机的5条。最简单的方式，你可以多重复几次，然后看下结果有没有变化。你会发现，每次运行的结果都是一样的，因此不是随机的。<br>如果想实现随机5条数据，可以采用下面的方式：<br>SELECT name,role_main,role_assist, RAND() as r FROM heros WHERE role_assist IS NOT NULL ORDER BY r LIMIT 5 ","user_name":"作者回复","comment_id":106842,"uid":"1306094","ip_address":"","utype":1,"ctime":1561440741,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"96050675630","product_id":100029501,"comment_content":"有个问题想问老师：<br>SELECT name,role_main,role_assist from heros where role_assist is not null LIMIT 5 <br>这样限定的查询结果为5条数据，是随机选择的5条数据吗？","like_count":22,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455250,"discussion_content":"感谢提问，不是随机的5条。最简单的方式，你可以多重复几次，然后看下结果有没有变化。你会发现，每次运行的结果都是一样的，因此不是随机的。\n如果想实现随机5条数据，可以采用下面的方式：\nSELECT name,role_main,role_assist, RAND() as r FROM heros WHERE role_assist IS NOT NULL ORDER BY r LIMIT 5 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561440741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106960,"user_name":"看，有只猪","can_delete":false,"product_type":"c1","uid":1137727,"ip_address":"","ucode":"F9BB302BC71CE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/5c/3f/34e5c750.jpg","comment_is_top":false,"comment_ctime":1561429189,"is_pvip":true,"replies":[{"id":"38717","content":"解释的很好，关于为什么使用DATE函数的说明可以看下这个","user_name":"作者回复","comment_id":106960,"uid":"1306094","ip_address":"","utype":1,"ctime":1561438478,"user_name_real":"cy"}],"discussion_count":3,"race_medal":0,"score":"87460775109","product_id":100029501,"comment_content":"解答一下对使用DATE函数的疑问：<br>birthdate字段可能会有时间包含在里面，如2019-01-01 00:00:00，如果直接和2019-01-01比较是会失败的，用DATE函数可以提取出原始数据的日期部分","like_count":20,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455302,"discussion_content":"解释的很好，关于为什么使用DATE函数的说明可以看下这个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561438478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1535217,"avatar":"https://static001.geekbang.org/account/avatar/00/17/6c/f1/9ab33f89.jpg","nickname":"Geek_Song","note":"","ucode":"DCC90A6683D024","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280127,"discussion_content":"可以直接比较吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591500339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225224,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","nickname":"尔冬橙","note":"","ucode":"0B013A49BC18DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":184854,"discussion_content":"Date函数转换后为什么显示在最终结果里我理解是局部转换比较，最终结果还是原始的birthdate格式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582564396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246991,"user_name":"杯莫停","can_delete":false,"product_type":"c1","uid":1759325,"ip_address":"","ucode":"4FA1D5CBBEF702","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","comment_is_top":false,"comment_ctime":1599552588,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"57434127436","product_id":100029501,"comment_content":"列举5个索引失效的场景，附SQL：<br><br>#创建二级索引name_index（name）<br>CREATE INDEX name_index ON heros(name);<br>#创建二级索引mp_max_index（mp_max）<br>CREATE INDEX mp_max_index ON heros(mp_max);<br>#创建二级索引hp_start_index（hp_start）<br>CREATE INDEX hp_start_index ON heros(hp_start);<br><br>（1）模糊匹配导致索引失效（左匹配和全匹配）<br>#索引失效<br>EXPLAIN SELECT name,hp_growth,mp_max FROM heros WHERE name LIKE &#39;%太%&#39;;<br>EXPLAIN SELECT name,hp_growth,mp_max FROM heros WHERE name LIKE &#39;%太&#39;;<br><br>（2）表达式计算导致的索引失效<br>EXPLAIN SELECT name,hp_growth,mp_max FROM heros WHERE hp_start+1=3308;<br><br>（3）联合索引导致的索引失效（最左匹配）<br>#删除name_index<br>DROP INDEX name_index ON heros;<br>#创建联合索引<br>ALTER TABLE heros ADD INDEX name_mp_start_index (name,mp_start);<br>#使用右边的mp_start索引失效<br>EXPLAIN SELECT hp_start,hp_growth,mp_max FROM heros WHERE mp_start=430;<br>#使用左边的name索引正常使用<br>EXPLAIN SELECT hp_start,hp_growth,mp_max FROM heros WHERE name=&#39;程咬金&#39;;<br><br>（4） 条件语句中对索引字段使用函数导致索引失效<br>#使用函数索引失效<br>EXPLAIN SELECT name,hp_growth,mp_max,hp_start FROM heros WHERE LEFT (hp_start,2)=33;<br><br>（5） 强制类型转换<br>EXPLAIN SELECT hp_start,hp_growth,mp_max FROM heros WHERE name=1;","like_count":13,"discussions":[{"author":{"id":2962599,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","nickname":"年少挽滑稽世无双","note":"","ucode":"793DCBDE25A07B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586597,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662367167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114120,"user_name":"Jeric","can_delete":false,"product_type":"c1","uid":1583397,"ip_address":"","ucode":"F5D94DBE7CD2F6","user_header":"","comment_is_top":false,"comment_ctime":1563239591,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"53102847143","product_id":100029501,"comment_content":"老师你好，学到目前为止课程貌似是默认大家都知道如何安装运行MYSQL，Oracle，navicat等软件。但实际作为一个初学者，我前几节课根本不知道在哪运行代码。后来自己网上找了教程安装和连接之后运行成功，不知老师是否考虑到这点，谢谢。","like_count":12,"discussions":[{"author":{"id":1941819,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/a1/3b/8586a385.jpg","nickname":"Nydia","note":"","ucode":"A33C7D8718A86F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536104,"discussion_content":"哈哈哈我也是超级初学者","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638689689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531068,"discussion_content":"哈哈，这些要自己做一遍的，网上搜一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637219626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2439706,"avatar":"","nickname":"Geek_f4e13c","note":"","ucode":"035978A5A5FF6E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349023,"discussion_content":"你这，踩踩坑就好了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612853056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1644281,"avatar":"https://static001.geekbang.org/account/avatar/00/19/16/f9/2a2b6a2b.jpg","nickname":"达人i","note":"","ucode":"D8C599207A60F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335319,"discussion_content":"自己爬的坑印象才够深刻，该爬的还是要自己爬。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608167791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583394,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/NFpgmsqvyPs8ibTrrrJ24OqoISOVW2aaYESotwl5r5PqhyLuECj6gvJN9SibECg142eyW5S9mebZGdyGzMWS1VtQ/132","nickname":"chenysh38","note":"","ucode":"149758B919B0C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8549,"discussion_content":"我也是，折腾了好几个小时才弄好。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568016532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106841,"user_name":"stormsc","can_delete":false,"product_type":"c1","uid":1583642,"ip_address":"","ucode":"C58EAAA88C993A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epGMibYc0m7cDGC8CyCIwXynpzicpeAo6pJ8mLWxI3LxTLyaj2QLMg9Ea1M7KMWw4B9wbMfRJIs3vbg/132","comment_is_top":false,"comment_ctime":1561395018,"is_pvip":false,"replies":[{"id":"38727","content":"正确，同时采用了列别名的方式。","user_name":"作者回复","comment_id":106841,"uid":"1306094","ip_address":"","utype":1,"ctime":1561441002,"user_name_real":"cy"}],"discussion_count":4,"race_medal":0,"score":"48806035274","product_id":100029501,"comment_content":"作业 mysql: select name 英雄名称, role_main 主要定位, role_assist 次要定位,hp_max 最大生命值,mp_max 最大法力值 from heros where (role_main in (&#39;坦克&#39;,&#39;战士&#39;) <br>AND role_assist is not null) AND (hp_max &gt; 8000 or mp_max &lt;1500) ORDER BY (hp_max+mp_max) DESC","like_count":11,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455249,"discussion_content":"正确，同时采用了列别名的方式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561441002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2612572,"avatar":"","nickname":"朱昳","note":"","ucode":"A14B67A35C7874","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373229,"discussion_content":"为什么in里面不用or连接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620655067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2047663,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/3e/af/c3d3c167.jpg","nickname":"心诚泽霖","note":"","ucode":"4A22A4F4066254","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339336,"discussion_content":"为什么这个别名不需要AS？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609640595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"蓦然回首","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2047663,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/3e/af/c3d3c167.jpg","nickname":"心诚泽霖","note":"","ucode":"4A22A4F4066254","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347632,"discussion_content":"在MYSQL上试了下，加与不加AS都可以，语法上不太熟悉，可能DBMS都兼容吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612268452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339336,"ip_address":""},"score":347632,"extra":""}]}]},{"had_liked":true,"id":106524,"user_name":"hlz-123","can_delete":false,"product_type":"c1","uid":1433586,"ip_address":"","ucode":"B7E5EF0C260BD2","user_header":"","comment_is_top":false,"comment_ctime":1561339198,"is_pvip":false,"replies":[{"id":"38528","content":"解释的很好，最后一个SQL查询也正确","user_name":"作者回复","comment_id":106524,"uid":"1306094","ip_address":"","utype":1,"ctime":1561345693,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"40216044862","product_id":100029501,"comment_content":"where子句WHERE 子句中比较运算符、逻辑运算符和通配符这三者各自作用？<br>1、比较运算符，比较数值的大小，数值类型可以是整数，浮点数，字符串，布尔类型等等。<br>2、逻辑运算符，定义where子句中多个条件之间的关系。<br>3、通配符，对文本类型字段进行模糊查询。<br>Mysql查询语句：<br>SELECT name,role_main,role_assist,hp_max,mp_max FROM heros <br>WHERE (role_main in (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist is not null) <br>AND (hp_max&gt;8000 OR mp_max&lt;1500) order by (hp_max+mp_max) DESC;","like_count":9,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455123,"discussion_content":"解释的很好，最后一个SQL查询也正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561345693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106476,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1561333123,"is_pvip":true,"discussion_count":4,"race_medal":1,"score":"35921071491","product_id":100029501,"comment_content":"所以使用到了 DATE 函数，将字段 birthdate 转化为日期类型再进行比较<br>-------------------------------------------------<br>对于日期的比较，不是可以直接进行比较吗？ 对于上面的例子，直接可以使用 birthdate 字段进行时间比较，为什么还要使用DATE函数转换一下呢？","like_count":8,"discussions":[{"author":{"id":1022786,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/42/aeb79b35.jpg","nickname":"Ling","note":"","ucode":"EE15D1ABDB073B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379486,"discussion_content":"如果字段数据是 2016-01-01 00:00:00，那么该字段的数据如果直接和 2016-01-01 比较的话，SQL 会返回错误。因此，这里用 DATE 函数提取出原始数据的日期部分，而后再进行比较。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623925675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1270262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","nickname":"wang","note":"","ucode":"C1A3BCACCB188E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366,"discussion_content":"可能是想体现逻辑运算符的用法？比较比较运算符比较常见","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561506992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"一步","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1270262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","nickname":"wang","note":"","ucode":"C1A3BCACCB188E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367,"discussion_content":"日期类型是可以直接进行比较的，不需要在利用日期函数转换一下，这里不太清楚， 日期转换和不转换有什么区别的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561508204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":366,"ip_address":""},"score":367,"extra":""}]},{"author":{"id":1133918,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","nickname":"lmtoo","note":"","ucode":"FCD5B9C941D448","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":226,"discussion_content":"hahaha","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561339682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108804,"user_name":"华夏","can_delete":false,"product_type":"c1","uid":1449474,"ip_address":"","ucode":"4D627CFA5A4B82","user_header":"https://static001.geekbang.org/account/avatar/00/16/1e/02/2864e0f2.jpg","comment_is_top":false,"comment_ctime":1561885911,"is_pvip":false,"replies":[{"id":"63964","content":"正确","user_name":"作者回复","comment_id":108804,"uid":"1306094","ip_address":"","utype":1,"ctime":1577606044,"user_name_real":"cy"}],"discussion_count":3,"race_medal":0,"score":"23036722391","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max <br>FROM heros <br>WHERE (role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist IS NOT NULL) <br>AND (hp_max &gt; 8000 OR mp_max &lt; 1500) <br>ORDER BY (hp_max+mp_max) DESC;<br>+-----------+-----------+-------------+--------+--------+<br>| name      | role_main | role_assist | hp_max | mp_max |<br>+-----------+-----------+-------------+--------+--------+<br>| 牛魔      | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦      | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金    | 坦克      | 战士        |   8611 |      0 |<br>| 张飞      | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟      | 战士      | 坦克        |   8050 |      0 |<br>| 吕布      | 战士      | 坦克        |   7344 |      0 |<br>| 关羽      | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰    | 战士      | 刺客        |   5397 |    100 |<br>+-----------+-----------+-------------+--------+--------+<br>8 rows in set (0.00 sec)<br>","like_count":5,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456123,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583144,"avatar":"https://static001.geekbang.org/account/avatar/00/18/28/28/afeec7f9.jpg","nickname":"蔡小天","note":"","ucode":"4801780E8BC499","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2215,"discussion_content":"请问你是在commander里面执行的吗？中文显示的问题你是如何解决的？我改了注册表，但是中文显示还是问号。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563355949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1519230,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2e/7e/acc47ee1.jpg","nickname":"OUO","note":"","ucode":"52EEB72E80BAF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1583144,"avatar":"https://static001.geekbang.org/account/avatar/00/18/28/28/afeec7f9.jpg","nickname":"蔡小天","note":"","ucode":"4801780E8BC499","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296717,"discussion_content":"试试navicat的查询","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596631089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2215,"ip_address":""},"score":296717,"extra":""}]}]},{"had_liked":false,"id":124463,"user_name":"晓涛","can_delete":false,"product_type":"c1","uid":1524351,"ip_address":"","ucode":"41CB1620A9B82C","user_header":"https://static001.geekbang.org/account/avatar/00/17/42/7f/db8fa45f.jpg","comment_is_top":false,"comment_ctime":1565889201,"is_pvip":false,"replies":[{"id":"63520","content":"就是在数据库中对某个字段创建索引，索引是一种查找方式，方便后续按照索引进行条件查找","user_name":"作者回复","comment_id":124463,"uid":"1306094","ip_address":"","utype":1,"ctime":1577516516,"user_name_real":"cy"}],"discussion_count":2,"race_medal":0,"score":"18745758385","product_id":100029501,"comment_content":"sql建立索引是什么意思，老师能详细解释下不？<br>","like_count":4,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463189,"discussion_content":"就是在数据库中对某个字段创建索引，索引是一种查找方式，方便后续按照索引进行条件查找","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577516516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2439706,"avatar":"","nickname":"Geek_f4e13c","note":"","ucode":"035978A5A5FF6E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349025,"discussion_content":"索引就是把这个字段的值通过算法放在树上面，如果是二叉树，32=2的五次方，这样查询最多5次就可以查询到，如果不建立索引那最多就是32次比较，不知道你能不能理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612853676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107767,"user_name":"不负","can_delete":false,"product_type":"c1","uid":1238323,"ip_address":"","ucode":"147F5860711811","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/33/ff5c52ad.jpg","comment_is_top":false,"comment_ctime":1561605489,"is_pvip":true,"replies":[{"id":"39182","content":"是的，在ORACLE中可以使用TO_CHAR, TO_DATE做转换：<br>TO_CHAR 把日期或数字转换为字符串 <br>TO_DATE 把字符串转换为日期类型 <br>同时在MySQL中也有类似的函数<br>DATE_FORMAT(date,&#39;%Y-%m-%d&#39;)  对应 TO_CHAR<br>STR_TO_DATE(date,&#39;%Y-%m-%d&#39;) 对应 TO_DATE<br>比如 SELECT DATE_FORMAT(NOW(),&#39;%m-%d-%Y&#39;) AS result<br>SELECT STR_TO_DATE(&#39;2017-01-01 00:10:10&#39;,&#39;%Y-%m-%d %H:%i:%s&#39;) AS result<br>","user_name":"作者回复","comment_id":107767,"uid":"1306094","ip_address":"","utype":1,"ctime":1561689508,"user_name_real":"cy"}],"discussion_count":1,"race_medal":1,"score":"14446507377","product_id":100029501,"comment_content":"过滤上线时间 DATE(birthdate) NOT BETWEEN &#39;2016-01-01&#39; AND &#39;2017-01-01&#39;，是MySQL里date类型可以直接与字符串进行比较运算？那这里birthdate可以不用 DATE 函数转换了；Oracle中日期的比较就比较严格，TO_DATE、TO_CHAR 效率也不同","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455665,"discussion_content":"是的，在ORACLE中可以使用TO_CHAR, TO_DATE做转换：\nTO_CHAR 把日期或数字转换为字符串 \nTO_DATE 把字符串转换为日期类型 \n同时在MySQL中也有类似的函数\nDATE_FORMAT(date,&amp;#39;%Y-%m-%d&amp;#39;)  对应 TO_CHAR\nSTR_TO_DATE(date,&amp;#39;%Y-%m-%d&amp;#39;) 对应 TO_DATE\n比如 SELECT DATE_FORMAT(NOW(),&amp;#39;%m-%d-%Y&amp;#39;) AS result\nSELECT STR_TO_DATE(&amp;#39;2017-01-01 00:10:10&amp;#39;,&amp;#39;%Y-%m-%d %H:%i:%s&amp;#39;) AS result\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561689508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220665,"user_name":"南辞","can_delete":false,"product_type":"c1","uid":1915530,"ip_address":"","ucode":"098E01EB97E901","user_header":"https://static001.geekbang.org/account/avatar/00/1d/3a/8a/76b03c2f.jpg","comment_is_top":false,"comment_ctime":1590306174,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10180240766","product_id":100029501,"comment_content":"关于使用函数instr(),locate()、position()、find_in_set() 函数的效率比较like 的效率更高，我用文中的例子做了尝试：<br>SELECT * FROM heros WHERE INSTR(`name`,&#39;太&#39;);<br>SELECT * FROM heros WHERE `name` LIKE &#39;%太%&#39;;<br>SELECT * FROM heros WHERE LOCATE(&#39;太&#39;,`name`);<br>SELECT * FROM heros WHERE POSITION(&#39;太&#39;IN `name`);<br>SELECT * FROM heros WHERE FIND_IN_SET(&#39;太&#39;,`name`);<br>但是最后一条语句结果出来是空的，老师能不能具体的解释一下这几个函数？","like_count":2},{"had_liked":false,"id":113469,"user_name":"ballgod","can_delete":false,"product_type":"c1","uid":1584098,"ip_address":"","ucode":"C20E95E98EAC43","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIR9QrAn9TZOrJMSYMyN96PAuAjETVrN5SPp3hMbfUAGIWtHceWPEoQtPdXeuBn7VB7dagtxynAIA/132","comment_is_top":false,"comment_ctime":1563024673,"is_pvip":false,"replies":[{"id":"41350","content":"_%太% 匹配东皇太一，不会匹配到太乙真人。因为_相当于至少要匹配一个字符，所以除了第一个字符以外，需要有“太”字，也就是东皇太一。","user_name":"作者回复","comment_id":113469,"uid":"1306094","ip_address":"","utype":1,"ctime":1563069076,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"10152959265","product_id":100029501,"comment_content":"关于通配符的问题想问一下老师，有看过python的正则表达式，评论第三位的解释中，+是一个或无穷个，*是零个或无穷个。按照老师说的%和_的含义，_%太%应该是匹配 ","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458235,"discussion_content":"_%太% 匹配东皇太一，不会匹配到太乙真人。因为_相当于至少要匹配一个字符，所以除了第一个字符以外，需要有“太”字，也就是东皇太一。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563069076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107056,"user_name":"꯭J꯭I꯭N꯭🙃","can_delete":false,"product_type":"c1","uid":1524143,"ip_address":"","ucode":"7866E1904E02BB","user_header":"https://static001.geekbang.org/account/avatar/00/17/41/af/e5629318.jpg","comment_is_top":false,"comment_ctime":1561449190,"is_pvip":false,"replies":[{"id":"64013","content":"Good Job","user_name":"作者回复","comment_id":107056,"uid":"1306094","ip_address":"","utype":1,"ctime":1577607415,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"10151383782","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist,hp_max,mp_max<br>FROM heros<br>WHERE (role_main IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL) <br>AND (hp_max &gt; 8000 or mp_max &lt; 1500)<br>ORDER BY (hp_max+mp_max) DESC;","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455344,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106826,"user_name":"Krison","can_delete":false,"product_type":"c1","uid":1481198,"ip_address":"","ucode":"F2800118EEF3C9","user_header":"https://static001.geekbang.org/account/avatar/00/16/99/ee/5204b281.jpg","comment_is_top":false,"comment_ctime":1561391098,"is_pvip":false,"replies":[{"id":"64014","content":"加油~","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607421,"ip_address":"","comment_id":106826,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151325690","product_id":100029501,"comment_content":"打卡，坚持学习","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455238,"discussion_content":"加油~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106719,"user_name":"MJ","can_delete":false,"product_type":"c1","uid":1237145,"ip_address":"","ucode":"FCEC0C21444D2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","comment_is_top":false,"comment_ctime":1561377926,"is_pvip":false,"replies":[{"id":"38737","content":"正确，结果也显示出来了。","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561444378,"ip_address":"","comment_id":106719,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151312518","product_id":100029501,"comment_content":"select name,role_main,role_assist,hp_max,mp_max from heros where (role_main in (&#39;坦克&#39;,&#39;战士&#39;) and role_assist  is not NULL) and (hp_max &gt; 8000 or mp_max &lt; 1500) order by (mp_max+hp_max) desc;<br><br>+-----------+-----------+-------------+--------+--------+<br>| name      | role_main | role_assist | hp_max | mp_max |<br>+-----------+-----------+-------------+--------+--------+<br>| 牛魔      | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦      | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金    | 坦克      | 战士        |   8611 |      0 |<br>| 张飞      | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟      | 战士      | 坦克        |   8050 |      0 |<br>| 吕布      | 战士      | 坦克        |   7344 |      0 |<br>| 关羽      | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰    | 战士      | 刺客        |   5397 |    100 |<br>+-----------+-----------+-------------+--------+--------+<br>","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455194,"discussion_content":"正确，结果也显示出来了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561444378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106574,"user_name":"太精","can_delete":false,"product_type":"c1","uid":1419939,"ip_address":"","ucode":"7B0F1B090ECF0F","user_header":"https://static001.geekbang.org/account/avatar/00/15/aa/a3/0b7f0334.jpg","comment_is_top":false,"comment_ctime":1561346996,"is_pvip":false,"replies":[{"id":"64023","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607687,"ip_address":"","comment_id":106574,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151281588","product_id":100029501,"comment_content":"select name,role_main,role_assist,mp_max,hp_max from heros where role_main in(&#39;战士&#39;,&#39;坦克&#39;) and role_assist is not null and (hp_max &gt; 8000 or mp_max&lt;1500) order by (hp_max+mp_max) desc;<br>","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455143,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106525,"user_name":"野马","can_delete":false,"product_type":"c1","uid":1065176,"ip_address":"","ucode":"CC58CBF541D34A","user_header":"https://static001.geekbang.org/account/avatar/00/10/40/d8/69722032.jpg","comment_is_top":false,"comment_ctime":1561339220,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10151273812","product_id":100029501,"comment_content":"SELECT 英雄名称,主要定位,次要定位,最大生命,最大法力FROM heros WHERE （主要定位 IN(&#39;坦克&#39;,&#39;战士&#39;)OR次要定位 IS  NOT  NULL）AND 最大生命&gt;8000 AND 最大法力&lt;1500 ORDER BY (最大生命+最大法力) DESC","like_count":2,"discussions":[{"author":{"id":1474149,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/65/c5c96122.jpg","nickname":"Peikon.val","note":"","ucode":"5AE5D794E3DDD4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364,"discussion_content":"『主要定位是坦克或者战士，「并且」次要定位不为空』所以不是 OR 而是 AND 哟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561484947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106457,"user_name":"啦啦啦","can_delete":false,"product_type":"c1","uid":1131687,"ip_address":"","ucode":"6B12EC90A62525","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/a7/171c1e86.jpg","comment_is_top":false,"comment_ctime":1561307954,"is_pvip":false,"replies":[{"id":"64029","content":"加油~","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607837,"ip_address":"","comment_id":106457,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151242546","product_id":100029501,"comment_content":"打卡打卡","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455098,"discussion_content":"加油~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274281,"user_name":"Flychen","can_delete":false,"product_type":"c1","uid":1880782,"ip_address":"","ucode":"4029A8F1D3C361","user_header":"https://static001.geekbang.org/account/avatar/00/1c/b2/ce/5638be2b.jpg","comment_is_top":false,"comment_ctime":1610952614,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5905919910","product_id":100029501,"comment_content":"<br>select <br><br>`name` 英雄名称,<br>hp_max 最大生命,<br><br>mp_max 最大法力,<br><br>role_main 主要定位,<br>role_assist 次要定位<br>from heros<br><br>where (role_main = &#39;坦克&#39; or role_main=&#39;战士&#39;) and (role_assist is not null ) and (hp_max &gt;8000 or mp_max &lt; 1500) <br>ORDER BY (hp_max + mp_max) DESC","like_count":1},{"had_liked":false,"id":273249,"user_name":"Gamehu","can_delete":false,"product_type":"c1","uid":1013894,"ip_address":"","ucode":"C494BA1A00ADBA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/86/d5019bb0.jpg","comment_is_top":false,"comment_ctime":1610509586,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5905476882","product_id":100029501,"comment_content":"你好 我们都知道有些情况会进行全表扫描，比如where后面用!=，但是我想问下是什么原因导致索引失效呢？","like_count":1},{"had_liked":false,"id":263916,"user_name":"咱是吓大的","can_delete":false,"product_type":"c1","uid":1292324,"ip_address":"","ucode":"A47C6DA5C00C6F","user_header":"https://static001.geekbang.org/account/avatar/00/13/b8/24/039f84a2.jpg","comment_is_top":false,"comment_ctime":1606294093,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"5901261389","product_id":100029501,"comment_content":"SELECT name,role_main,role_assist,hp_max,mp_max FROM heros <br>WHERE (role_main IN (&#39;坦克&#39; or &#39;战士&#39;) AND role_assist IS NOT NULL) <br>AND (hp_max&gt;8000 OR mp_max&lt;1500) ORDER BY (hp_max+mp_max) DESC;","like_count":1},{"had_liked":false,"id":252734,"user_name":"盛艳明","can_delete":false,"product_type":"c1","uid":1132347,"ip_address":"","ucode":"E4C1C699572C44","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/3b/15e4490f.jpg","comment_is_top":false,"comment_ctime":1602472067,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5897439363","product_id":100029501,"comment_content":"SELECT name &#39;英雄名称&#39;,role_main &#39;主要定位&#39;, role_assist &#39;次要定位&#39;, hp_max &#39;最大生命值&#39;, mp_max &#39;最大法力值&#39;<br>FROM test.heros<br>WHERE ((role_main in (&#39;坦克&#39;, &#39;战士&#39;))<br>    AND role_assist is not null)<br>    AND (hp_max &gt; 8000<br>   OR mp_max &lt; 1500)<br>ORDER BY (mp_max + hp_max) DESC ;<br>","like_count":1},{"had_liked":false,"id":246983,"user_name":"杯莫停","can_delete":false,"product_type":"c1","uid":1759325,"ip_address":"","ucode":"4FA1D5CBBEF702","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","comment_is_top":false,"comment_ctime":1599549991,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5894517287","product_id":100029501,"comment_content":"ORDER BY 使用索引，我的理解：<br><br>1.where得到数据<br><br>2.Order By处理数据（排序）看第一部执行计划是不是用到索引，如果用到了就可以直接获得索引的顺序，从而避免再次排序。如果没用到就做排序（using filessort）。<br><br>3.返回数据<br><br>所以关键还是WHERE条件语句中使用的索引","like_count":1},{"had_liked":false,"id":241341,"user_name":"谢庭恩","can_delete":false,"product_type":"c1","uid":1898214,"ip_address":"","ucode":"7AC11237E5A3B2","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f6/e6/fc4d0ee3.jpg","comment_is_top":false,"comment_ctime":1597253283,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5892220579","product_id":100029501,"comment_content":"运算符用于筛选值的范围，逻辑运算符用于确定筛选值的交并否关系，通配符用于排除；<br>SELECT name, role_main, role_asisst, hp_max, mp_max WHERE (role_main IN &#39;坦克&#39;, &#39;战士&#39; AND role_asisst IS NOT NULL) AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max + mp_max) DESC","like_count":1},{"had_liked":false,"id":241315,"user_name":"xiaopi3","can_delete":false,"product_type":"c1","uid":1837697,"ip_address":"","ucode":"1C92D0CDC0B39E","user_header":"https://static001.geekbang.org/account/avatar/00/1c/0a/81/69fecff9.jpg","comment_is_top":false,"comment_ctime":1597244189,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5892211485","product_id":100029501,"comment_content":"SELECT NAME,role_main,role_assist,hp_max,mp_max FROM heros WHERE role_main IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL AND (hp_max &gt; 800 OR mp_max &lt; 1500) ORDER BY (hp_max+mp_max) DESC","like_count":1},{"had_liked":false,"id":241040,"user_name":"夏天呀","can_delete":false,"product_type":"c1","uid":1673679,"ip_address":"","ucode":"1C5C060C05923B","user_header":"https://static001.geekbang.org/account/avatar/00/19/89/cf/1c7703b1.jpg","comment_is_top":false,"comment_ctime":1597157986,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5892125282","product_id":100029501,"comment_content":"Q1:<br>比较运算符：对数值进行比较；<br>逻辑运算符：使得可以同时使用多个WHERE句子（优先级：括号&gt;AND&gt;OR）<br>通配符：对文本类型字段进行模糊查询（但检索代价高，尽量避免使用）<br><br>Q2:<br>mysql&gt; SELECT name, role_main, role_assist, hp_max, mp_max FROM heros<br>    -&gt; WHERE role_mian IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL<br>    -&gt; AND hp_max&gt;8000 OR mp_max&lt;1500<br>    -&gt; ORDER BY (hp_max + mp_max) DESC;<br>ERROR 1054 (42S22): Unknown column &#39;role_mian&#39; in &#39;where clause&#39;<br>mysql&gt; SELECT name, role_main, role_assist, hp_max, mp_max<br>    -&gt; FROM heros<br>    -&gt; WHERE (role_main IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL)<br>    -&gt; AND (hp_max&gt;8000 OR mp_max&lt;1500)<br>    -&gt; ORDER BY (hp_max + mp_max) DESC;<br>+-----------+-----------+-------------+--------+--------+<br>| name      | role_main | role_assist | hp_max | mp_max |<br>+-----------+-----------+-------------+--------+--------+<br>| 牛魔      | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦      | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金    | 坦克      | 战士        |   8611 |      0 |<br>| 张飞      | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟      | 战士      | 坦克        |   8050 |      0 |<br>| 吕布      | 战士      | 坦克        |   7344 |      0 |<br>| 关羽      | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰    | 战士      | 刺客        |   5397 |    100 |<br>+-----------+-----------+-------------+--------+--------+<br>8 rows in set (0.00 sec)<br><br>欧了，明天继续~","like_count":1},{"had_liked":false,"id":239272,"user_name":"Geek_gong1zu","can_delete":false,"product_type":"c1","uid":2086659,"ip_address":"","ucode":"D629A6652AB8E2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d7/03/db060811.jpg","comment_is_top":false,"comment_ctime":1596472473,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5891439769","product_id":100029501,"comment_content":"回答第二个问题吧：<br>SELECT name,role_main,role_assist,hp_max,mp_max<br>FROM heros<br>WHERE( role_main IN (&quot;坦克&quot;,&quot;战士&quot;) AND role_assist  IS NOT NULL)<br>AND( hp_max&gt;8000 OR mp_max&lt;1500)<br>ORDER BY (hp_max+mp_max) DESC;<br>","like_count":1},{"had_liked":false,"id":238488,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1596182644,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5891149940","product_id":100029501,"comment_content":"先交作业：<br>SELECT name, role_main, role_assist, hp_max, mp_max FROM heros WHERE role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist  IS NOT NULL AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max + mp_max) DESC;<br><br>比较运算符：用于在数值层面对数据进行筛选<br>逻辑运算符：在与或非层面进行逻辑上的整合，也包括IN操作符，用来确定是否属于某个集合范围<br>通配符：一般用于字符串匹配，但会造成全局扫描，效率底下，一般不推荐使用，","like_count":1},{"had_liked":false,"id":356496,"user_name":"年少挽滑稽世无双","can_delete":false,"product_type":"c1","uid":2962599,"ip_address":"四川","ucode":"793DCBDE25A07B","user_header":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","comment_is_top":false,"comment_ctime":1662367512,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662367512","product_id":100029501,"comment_content":"# 以 heros 数据表为例，请你编写 SQL 语句，对英雄名称、主要定位、次要定位、最大生命和最大法力进行查询，筛选条件为：主要定位是坦克或者战士，并且次要定位不为空，同时满足最大生命值大于 8000 或者最大法力小于 1500 的英雄，并且按照最大生命和最大法力之和从高到底的顺序进行排序。<br>SELECT name, role_main, role_assist, hp_max, mp_max<br>FROM heros<br>WHERE (role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist IS NOT NULL)<br>AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY (hp_max + mp_max) DESC","like_count":0},{"had_liked":false,"id":329157,"user_name":"潜龙","can_delete":false,"product_type":"c1","uid":2882440,"ip_address":"","ucode":"5B77E245591D7E","user_header":"https://static001.geekbang.org/account/avatar/00/2b/fb/88/00cb17bf.jpg","comment_is_top":false,"comment_ctime":1641187499,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641187499","product_id":100029501,"comment_content":"SELECT name,role_main,role_assist,hp_max,mp_max<br>FROM heros<br>WHERE role_main in(&#39;坦克&#39;,&#39;战士&#39;) AND role_assist is not null AND (hp_max&gt;8000 or mp_max&lt;1500)<br>ORDER BY (hp_max+mp_max)DESC;  -- 来回切换大小写感觉好烦","like_count":0},{"had_liked":false,"id":313540,"user_name":"Rebirth°","can_delete":false,"product_type":"c1","uid":2500861,"ip_address":"","ucode":"0EE239A83BC307","user_header":"https://static001.geekbang.org/account/avatar/00/26/28/fd/26435d41.jpg","comment_is_top":false,"comment_ctime":1632480858,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632480858","product_id":100029501,"comment_content":"已成功执行，老师讲的真好<br>SELECT name,role_main,role_assist,hp_max,mp_max,hp_max+mp_max<br>FROM heros<br>WHERE (role_main IN (&#39;战士&#39;,&#39;坦克&#39;) AND role_assist is NOT NULL) AND (hp_max&gt;8000 OR mp_max&lt;1500)<br>ORDER BY (hp_max+mp_max) DESC;","like_count":0},{"had_liked":false,"id":310140,"user_name":"Soul of the Dragon","can_delete":false,"product_type":"c1","uid":2438011,"ip_address":"","ucode":"21603099E51B8A","user_header":"https://static001.geekbang.org/account/avatar/00/25/33/7b/9e012181.jpg","comment_is_top":false,"comment_ctime":1630499759,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630499759","product_id":100029501,"comment_content":"比较运算符：筛选数值处于某一范围内的数据；逻辑运算符：筛选满足特定条件的数据；通配符：筛选包含特定字段的数据。<br>思考题：SELECT name, role_main, role_assist, hp_max, mp_max FROM heros WHERE (role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist NOT NULL) AND (hp_max&gt;8000 OR mp_max&lt;1500) ORDER BY (hp_max+mp_max) DESC","like_count":0},{"had_liked":false,"id":305056,"user_name":"微秒","can_delete":false,"product_type":"c1","uid":1249195,"ip_address":"","ucode":"65A2E8B565B191","user_header":"https://static001.geekbang.org/account/avatar/00/13/0f/ab/9748f40b.jpg","comment_is_top":false,"comment_ctime":1627792088,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627792088","product_id":100029501,"comment_content":"老师你好，问两个小白问题，索引是什么呢？在列上增加索引又是怎么样的操作？？？","like_count":0},{"had_liked":false,"id":303641,"user_name":"夏晓树🌳🌳","can_delete":false,"product_type":"c1","uid":1232569,"ip_address":"","ucode":"7A1BDE66A7CFC4","user_header":"https://static001.geekbang.org/account/avatar/00/12/ce/b9/cfd5f7db.jpg","comment_is_top":false,"comment_ctime":1626910815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626910815","product_id":100029501,"comment_content":"<br>SELECT name, role_main, role_assist, hp_max, mp_max, birthdate<br>FROM heros <br>WHERE (role_main IN (&#39;坦克&#39;, &#39;战士&#39;) and role_assist not null<br>AND hp_max&gt;8000 or mp_max&lt;1500<br>ORDER BY (hp_max + mp_max) DESC","like_count":0},{"had_liked":false,"id":303640,"user_name":"夏晓树🌳🌳","can_delete":false,"product_type":"c1","uid":1232569,"ip_address":"","ucode":"7A1BDE66A7CFC4","user_header":"https://static001.geekbang.org/account/avatar/00/12/ce/b9/cfd5f7db.jpg","comment_is_top":false,"comment_ctime":1626910584,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626910584","product_id":100029501,"comment_content":"主要定位是坦克或者战士，并且次要定位不为空，同时满足最大生命值大于 8000 或者最大法力小于 1500 的英雄，并且按照最大生命和最大法力之和从高到底的顺序进行排序。","like_count":0},{"had_liked":false,"id":301445,"user_name":"Cy23","can_delete":false,"product_type":"c1","uid":1591293,"ip_address":"","ucode":"8DC561C5151758","user_header":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","comment_is_top":false,"comment_ctime":1625703433,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625703433","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max<br>FROM heros<br>WHERE role_main IN (&#39;坦克&#39;,&#39;战士&#39;)<br>AND role_assist IS NOT NULL<br>AND (hp_max &gt; 8000 OR mp_max &gt; 1500)<br>ORDER BY (hp_max+ mp_max) DESC","like_count":0},{"had_liked":false,"id":301014,"user_name":"罗","can_delete":false,"product_type":"c1","uid":2682153,"ip_address":"","ucode":"1FE714B9903109","user_header":"https://static001.geekbang.org/account/avatar/00/28/ed/29/33623ca0.jpg","comment_is_top":false,"comment_ctime":1625485250,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625485250","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max FROM heros<br>WHERE role_main IN (&quot;坦克&quot;, &quot;战士&quot;) AND role_assist IS NOT NULL<br>AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max + mp_max) DESC;","like_count":0},{"had_liked":false,"id":296694,"user_name":"郁方林","can_delete":false,"product_type":"c1","uid":1130275,"ip_address":"","ucode":"8ABEAFDA815DDE","user_header":"https://static001.geekbang.org/account/avatar/00/11/3f/23/8ff389d2.jpg","comment_is_top":false,"comment_ctime":1623117864,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623117864","product_id":100029501,"comment_content":"-- 作业提交<br>SELECT <br>\t`name`, role_main, role_assist, hp_max, mp_max <br>FROM<br>\theros<br>WHERE <br>\t((role_main = &#39;战士&#39; OR role_main = &#39;坦克&#39;) AND role_assist IS NOT NULL) AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY <br>\thp_max, mp_max DESC","like_count":0},{"had_liked":false,"id":295301,"user_name":"沙","can_delete":false,"product_type":"c1","uid":2641625,"ip_address":"","ucode":"E8749E3999CBE6","user_header":"https://static001.geekbang.org/account/avatar/00/28/4e/d9/426c5bc0.jpg","comment_is_top":false,"comment_ctime":1622355450,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622355450","product_id":100029501,"comment_content":"SELECT name,role_main,role_assist,hp_max,mp_max FROM heros<br>WHERE (role_main IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL) AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY (hp_max + mp_max) DESC;","like_count":0},{"had_liked":false,"id":238388,"user_name":"feng*","can_delete":false,"product_type":"c1","uid":2037422,"ip_address":"","ucode":"3080426972F9C4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/kjMRia1qRWgOktyWPSJIIqfkkpiakco1nCQnrI2n43Sicn94tJVzgQtzFXCTOTuwYww64Umkn6WSwgBdbJICfPs3Q/132","comment_is_top":false,"comment_ctime":1596157644,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596157644","product_id":100029501,"comment_content":"老师你好，关于坦克和战士这个条件我用and (主定位 =坦克 or 主定位=战士)<br>和用and 主定位 in（‘战士’、‘坦克’）<br>两个相比会更倾向于选择哪个","like_count":0},{"had_liked":false,"id":235238,"user_name":"本来是亚","can_delete":false,"product_type":"c1","uid":1073592,"ip_address":"","ucode":"14527E5BC3C2A8","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/b8/7b23f8cb.jpg","comment_is_top":false,"comment_ctime":1594949957,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1594949957","product_id":100029501,"comment_content":"比较运算符用于生成单个筛选条件，逻辑运算符则用于组合多个筛选条件，通配符则多用于模糊查询的场景","like_count":0},{"had_liked":false,"id":230883,"user_name":"bigliu66","can_delete":false,"product_type":"c1","uid":1627486,"ip_address":"","ucode":"9B82277755ED11","user_header":"https://static001.geekbang.org/account/avatar/00/18/d5/5e/1e09cb8b.jpg","comment_is_top":false,"comment_ctime":1593512897,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593512897","product_id":100029501,"comment_content":"老师，我对单列hp_max加了Normal索引，有个问题想问下。EXPLAIN SELECT name, hp_max, mp_max FROM heros WHERE hp_max &gt;7500 GROUP BY hp_max； 显示type是range,Extra是Using index condition；换成EXPLAIN SELECT name, hp_max, mp_max FROM heros WHERE hp_max &gt;7000 GROUP BY hp_max；<br>为什么type变成index,Extra变成Using where了呢？","like_count":0},{"had_liked":false,"id":229346,"user_name":"宁悦","can_delete":false,"product_type":"c1","uid":1901403,"ip_address":"","ucode":"68844C314FEEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg","comment_is_top":false,"comment_ctime":1592970093,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592970093","product_id":100029501,"comment_content":" SELECT name,role_main,role_assist,hp_max,mp_max FROM heros WHERE role_main IN(&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL AND (hp_max&gt;8000 OR mp_max&lt;1500) ORDER BY (hp_max+mp_max) DESC;","like_count":0},{"had_liked":false,"id":226632,"user_name":"糍粑","can_delete":false,"product_type":"c1","uid":1011438,"ip_address":"","ucode":"11609D809D2927","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/ee/0ce82b15.jpg","comment_is_top":false,"comment_ctime":1592161893,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592161893","product_id":100029501,"comment_content":"作业一： <br>比较运算符和逻辑运算符都是运算符，可以带1~2个参数（运算数），而且返回值也是boolean。区别是比较运算符的输入参数可以是任意comparable的值，而逻辑运算符输入参数必须是能够evalute成boolean的expression. <br>通配符：类似于简陋版的regex，放在format pattern string里的占位符，表达此处应有匹配（一个字符或多个字符）。<br><br><br>作业二：<br>SELECT name, role_main, role_assist, hp_max, mp_max <br>FROM heros <br>WHERE (role_main = &quot;战士&quot; OR role_main = &quot;坦克&quot;)<br>AND role_assist IS NOT NULL<br>AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY (hp_max + mp_max) DESC;<br><br># name, role_main, role_assist, hp_max, mp_max<br>&#39;牛魔&#39;, &#39;坦克&#39;, &#39;辅助&#39;, &#39;8476&#39;, &#39;1926&#39;<br>&#39;刘邦&#39;, &#39;坦克&#39;, &#39;辅助&#39;, &#39;8073&#39;, &#39;1940&#39;<br>&#39;程咬金&#39;, &#39;坦克&#39;, &#39;战士&#39;, &#39;8611&#39;, &#39;0&#39;<br>&#39;张飞&#39;, &#39;坦克&#39;, &#39;辅助&#39;, &#39;8341&#39;, &#39;100&#39;<br>&#39;亚瑟&#39;, &#39;战士&#39;, &#39;坦克&#39;, &#39;8050&#39;, &#39;0&#39;<br>&#39;吕布&#39;, &#39;战士&#39;, &#39;坦克&#39;, &#39;7344&#39;, &#39;0&#39;<br>&#39;关羽&#39;, &#39;战士&#39;, &#39;坦克&#39;, &#39;7107&#39;, &#39;10&#39;<br>&#39;花木兰&#39;, &#39;战士&#39;, &#39;刺客&#39;, &#39;5397&#39;, &#39;100&#39;<br>","like_count":0},{"had_liked":false,"id":224593,"user_name":"明","can_delete":false,"product_type":"c1","uid":1607502,"ip_address":"","ucode":"34FF545704EA8A","user_header":"https://static001.geekbang.org/account/avatar/00/18/87/4e/98173974.jpg","comment_is_top":false,"comment_ctime":1591454463,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1591454463","product_id":100029501,"comment_content":"老实您好，都过了一年了 也不知道您还能不能看见， 这次的课程中提到了 “全表扫描”这个概念，我从网上查，关于这个概念的解释少，而且感觉也没有解释到点子上，如果老师看得到而且还有时间，盼望老师能说明下，抱着试试的心态问一下(*^▽^*)， 毕竟都过了一年了。。。","like_count":0,"discussions":[{"author":{"id":1259157,"avatar":"https://static001.geekbang.org/account/avatar/00/13/36/95/a5358127.jpg","nickname":"罗","note":"","ucode":"C71E4413130A66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304397,"discussion_content":"我来试着解释一下。就象我们在字典中查找一个汉字一样，我们一般都是通过是拼音索引，找到它大概的页数，然后在那里面一个一个的开始查找。 数据表也是一样，它的数据都一块一块的存在磁盘中，我们的索引就指一块一块的。 如果我们有索引，就可以迅速跳到对应块。如果没有索引，那就没有办法，只能从第一页开始，顺序读，这个顺序读就全表扫描","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599564116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223727,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1168774,"ip_address":"","ucode":"9A5B148A7E453A","user_header":"https://static001.geekbang.org/account/avatar/00/11/d5/86/5b1ff7d9.jpg","comment_is_top":false,"comment_ctime":1591167131,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591167131","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max FROM heros.heros<br>WHERE role_main in (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist IS NOT NULL<br>AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY (hp_max+mp_max) DESC<br>LIMIT 20;<br>","like_count":0},{"had_liked":false,"id":220235,"user_name":"彤彤","can_delete":false,"product_type":"c1","uid":1866382,"ip_address":"","ucode":"6058FC822EF649","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/0bexhQ6hllSYOM9GoRaR0Rq99aZqOAIfBblqfNbD5YXDcWRdWcDLpaTp4R8LbSfQTaCmRhcibehHMLzTb3yQ53Q/132","comment_is_top":false,"comment_ctime":1590211301,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590211301","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max<br>FROM h_king.heros <br>WHERE (role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist is not null) <br>AND (hp_max &gt; 8000 or mp_max &lt; 1500) <br>ORDER BY (hp_max + mp_max) DESC","like_count":0},{"had_liked":false,"id":213007,"user_name":"罗盖","can_delete":false,"product_type":"c1","uid":1357135,"ip_address":"","ucode":"1B098D4CA6096A","user_header":"https://static001.geekbang.org/account/avatar/00/14/b5/4f/10c694db.jpg","comment_is_top":false,"comment_ctime":1588259874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588259874","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max, birthdate FROM game.heros WHERE (role_main IN (&#39;坦克&#39;, &#39;战士&#39;) and role_assist is not null) and (hp_max&gt;8000 or mp_max&lt;1500) order by (hp_max + mp_max)<br><br>&#39;花木兰&#39;,&#39;战士&#39;,&#39;刺客&#39;,&#39;5397&#39;,&#39;100&#39;,&#39;2016-01-01&#39;<br>&#39;关羽&#39;,&#39;战士&#39;,&#39;坦克&#39;,&#39;7107&#39;,&#39;10&#39;,&#39;2016-06-28&#39;<br>&#39;吕布&#39;,&#39;战士&#39;,&#39;坦克&#39;,&#39;7344&#39;,&#39;0&#39;,&#39;2015-12-22&#39;<br>&#39;亚瑟&#39;,&#39;战士&#39;,&#39;坦克&#39;,&#39;8050&#39;,&#39;0&#39;,NULL<br>&#39;张飞&#39;,&#39;坦克&#39;,&#39;辅助&#39;,&#39;8341&#39;,&#39;100&#39;,NULL<br>&#39;程咬金&#39;,&#39;坦克&#39;,&#39;战士&#39;,&#39;8611&#39;,&#39;0&#39;,NULL<br>&#39;刘邦&#39;,&#39;坦克&#39;,&#39;辅助&#39;,&#39;8073&#39;,&#39;1940&#39;,&#39;2016-04-26&#39;<br>&#39;牛魔&#39;,&#39;坦克&#39;,&#39;辅助&#39;,&#39;8476&#39;,&#39;1926&#39;,&#39;2015-11-24&#39;<br>","like_count":0},{"had_liked":false,"id":213004,"user_name":"罗盖","can_delete":false,"product_type":"c1","uid":1357135,"ip_address":"","ucode":"1B098D4CA6096A","user_header":"https://static001.geekbang.org/account/avatar/00/14/b5/4f/10c694db.jpg","comment_is_top":false,"comment_ctime":1588259783,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588259783","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max, birthdate FROM game.heros WHERE (role_main IN (&#39;坦克&#39;, &#39;战士&#39;) and role_assist is not null) and (hp_max&gt;8000 or mp_max&lt;1500) order by (hp_max + mp_max)","like_count":0},{"had_liked":false,"id":207626,"user_name":"Black","can_delete":false,"product_type":"c1","uid":1620774,"ip_address":"","ucode":"170977A014997C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iarwibic7h11K05YSJ9G6JERWqudL1ATGm0bib5pSCsP97rpSwuxLoDvp40RMsywibVH2g5DLphQGM51denSxx6hLZg/132","comment_is_top":false,"comment_ctime":1587121695,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587121695","product_id":100029501,"comment_content":"select name, role_main, role_assist, hp_max, mp_max from heros<br>    -&gt; where (role_main in (&#39;坦克&#39;, &#39;战士&#39;))<br>    -&gt; and role_assist is not null<br>    -&gt; and (hp_max&gt;8000 or mp_max&lt;1500)<br>    -&gt; order by (hp_max + mp_max) desc;","like_count":0},{"had_liked":false,"id":204310,"user_name":"桂冠远航","can_delete":false,"product_type":"c1","uid":1155463,"ip_address":"","ucode":"5959E1A1DAA05D","user_header":"https://static001.geekbang.org/account/avatar/00/11/a1/87/259ab5a3.jpg","comment_is_top":false,"comment_ctime":1586362275,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586362275","product_id":100029501,"comment_content":"ORDER BY (hp_max+mp_max) DESC，刚发现竟然可以这么写。","like_count":0},{"had_liked":false,"id":202412,"user_name":"玩家","can_delete":false,"product_type":"c1","uid":1187094,"ip_address":"","ucode":"75BC2C2B4FC391","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/16/b75d040a.jpg","comment_is_top":false,"comment_ctime":1585985332,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585985332","product_id":100029501,"comment_content":"SELECT name as 英雄名,role_main as 主要定位 ,role_assist as 次要定位,hp_max as 最大生命,mp_max as 最大法力<br>FROM heros<br>WHERE(role_main IN(&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL AND (hp_max&gt;8000 OR mp_max &lt; 1500))<br>ORDER BY (hp_max+mp_max) DESC","like_count":0},{"had_liked":false,"id":200675,"user_name":"谢庭恩","can_delete":false,"product_type":"c1","uid":1898214,"ip_address":"","ucode":"7AC11237E5A3B2","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f6/e6/fc4d0ee3.jpg","comment_is_top":false,"comment_ctime":1585635374,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1585635374","product_id":100029501,"comment_content":"请问老师和各位同学，我想用老师提供的王者荣耀数据进行联系，但是不知道mysql怎么安装，如何将数据在mysql里使用，请问有好心人支个招吗？完全小白，不好意思。。。","like_count":0,"discussions":[{"author":{"id":1168265,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d3/89/fcf95d32.jpg","nickname":"Allen","note":"","ucode":"10D365C791D28F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280972,"discussion_content":"mysql的安装百度一下就可以了，windows或者mac的都有。安装好了后通过admin用户登录进去，先创建一个db，从github下载sql文件，然后用source命令导入","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591633479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194012,"user_name":"track6688","can_delete":false,"product_type":"c1","uid":1088040,"ip_address":"","ucode":"0A9E893F8FD379","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/28/03613c22.jpg","comment_is_top":false,"comment_ctime":1585014919,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585014919","product_id":100029501,"comment_content":"使用通配符也可以走索引吗？，例如：SELECT name FROM heros WHERE name LIKE &#39;太%&#39; ","like_count":0},{"had_liked":false,"id":190937,"user_name":"Amo,","can_delete":false,"product_type":"c1","uid":1675087,"ip_address":"","ucode":"B77CBE5C61CDEB","user_header":"https://static001.geekbang.org/account/avatar/00/19/8f/4f/d42fdb9c.jpg","comment_is_top":false,"comment_ctime":1584711020,"is_pvip":false,"replies":[{"id":"82658","content":"加油~","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1591443593,"ip_address":"","comment_id":190937,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584711020","product_id":100029501,"comment_content":"今日打卡条件搜索","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488083,"discussion_content":"加油~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591443593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188336,"user_name":"A   闫东阳","can_delete":false,"product_type":"c1","uid":1850211,"ip_address":"","ucode":"24679CB9F41B59","user_header":"https://static001.geekbang.org/account/avatar/00/1c/3b/63/0f2d00ed.jpg","comment_is_top":false,"comment_ctime":1584342271,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584342271","product_id":100029501,"comment_content":"SELECT  name,role_main,role_assist,hp_max,mp_max from heros where （role_main in（&#39;坦克&#39;,&#39;战士&#39;） and role_assist is not null） and （hp_max&gt;8000 or mp_max&lt;1500） order by (hp_max＋mp_max)  desc","like_count":0},{"had_liked":false,"id":186071,"user_name":"胡静","can_delete":false,"product_type":"c1","uid":1185854,"ip_address":"","ucode":"B2AF44AFD0FDF7","user_header":"https://static001.geekbang.org/account/avatar/00/12/18/3e/4443a95d.jpg","comment_is_top":false,"comment_ctime":1583750376,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583750376","product_id":100029501,"comment_content":"大家都在db里试过这些语句么，DDL有提供吗","like_count":0},{"had_liked":false,"id":184825,"user_name":"马吉辉","can_delete":false,"product_type":"c1","uid":1854657,"ip_address":"","ucode":"4265EFBD2BB7BD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVIjh4T1akib5iav5IIGjXB9x98p9Y80STRcwpMDqxfGLrMvHamxlxEqLMTpiayWFWSNpBcbGwkRjRw/132","comment_is_top":false,"comment_ctime":1583413870,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583413870","product_id":100029501,"comment_content":"老师我一直没有明白的问题：<br>count(*) 和count(1)的本质区别，在工作中看到很多人有自己不同的见解，请问这里的1 表示是什么意思？到底使用哪个效率更高呢？<br>limit是随机的还是顺序的，<br>比如我要读取一个sql中的前5行数据和后5行数据，用sql如何实现呢？ 类似于linux中的head和tail 这样的命令实现的，感谢","like_count":0},{"had_liked":false,"id":182735,"user_name":"grey927","can_delete":false,"product_type":"c1","uid":1202782,"ip_address":"","ucode":"833E02ED835B4A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/5e/a897cb0d.jpg","comment_is_top":false,"comment_ctime":1582857380,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582857380","product_id":100029501,"comment_content":"请问陈老师，如果where后面and连接的两个条件互换，会对查询性能有影响吗？","like_count":0},{"had_liked":false,"id":180641,"user_name":"胡化敏","can_delete":false,"product_type":"c1","uid":1717937,"ip_address":"","ucode":"D6574E9AAFC294","user_header":"","comment_is_top":false,"comment_ctime":1582357562,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582357562","product_id":100029501,"comment_content":"SQL：<br>SELECT name, role_main, role_assist, hp_max, mp_max, birthdate<br>FROM heros <br>WHERE (role_main IN (&#39;法师&#39;, &#39;射手&#39;) OR role_assist IN (&#39;法师&#39;, &#39;射手&#39;)) <br>AND DATE(birthdate) NOT BETWEEN &#39;2016-01-01&#39; AND &#39;2017-01-01&#39;<br>ORDER BY (hp_max + mp_max) DESC<br><br>date函数是不是先扫表，然后再走where条件","like_count":0},{"had_liked":false,"id":180639,"user_name":"胡化敏","can_delete":false,"product_type":"c1","uid":1717937,"ip_address":"","ucode":"D6574E9AAFC294","user_header":"","comment_is_top":false,"comment_ctime":1582356991,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582356991","product_id":100029501,"comment_content":"老师为什么有的帖子说mysql in 不走索引，是真的不走，还是在某些条件下不走","like_count":0},{"had_liked":false,"id":178498,"user_name":"David.cui","can_delete":false,"product_type":"c1","uid":1302228,"ip_address":"","ucode":"AB46F310403612","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg","comment_is_top":false,"comment_ctime":1581713883,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581713883","product_id":100029501,"comment_content":" LIKE 后面就不能以（%）开头，比如使用LIKE &#39;%太%&#39;或LIKE &#39;%太&#39;的时候就会对全表进行扫描。如果使用LIKE &#39;太%&#39;，同时检索的字段进行了索引的时候，则不会进行全表扫描。<br>———————————————————————————-<br>这个能从原理上解释一下吗？","like_count":0},{"had_liked":false,"id":176577,"user_name":"阿斯蒂芬","can_delete":false,"product_type":"c1","uid":1024164,"ip_address":"","ucode":"61D5E3BDA4EBC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","comment_is_top":false,"comment_ctime":1581090128,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581090128","product_id":100029501,"comment_content":"老师，在「比较运算符」这一小节的表格中，「含义」这一列，第四行的「小于等于（大不于）」是否应该为「小于等于（不大于）」？","like_count":0},{"had_liked":false,"id":164474,"user_name":"爬行的蜗牛","can_delete":false,"product_type":"c1","uid":1033956,"ip_address":"","ucode":"6623B62DE63CE9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QD6bf8hkS5dHrabdW7M7Oo9An1Oo3QSxqoySJMDh7GTraxFRX77VZ2HZ13x3R4EVYddIGXicRRDAc7V9z5cLDlA/132","comment_is_top":false,"comment_ctime":1577002648,"is_pvip":false,"replies":[{"id":"62561","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577068076,"ip_address":"","comment_id":164474,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577002648","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max <br>FROM heros<br>WHERE (role_main IN (&#39;坦克&#39;,&#39;战士&#39;) )  AND ( role_assist IS NOT NULL) AND (hp_max &gt; 8000 OR mp_max &lt; 1500) <br>ORDER BY (hp_max + mp_max) DESC;   # 注意这个排序需要加括号， 不然不会生效。 ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478781,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577068076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163253,"user_name":"张驰皓","can_delete":false,"product_type":"c1","uid":1048028,"ip_address":"","ucode":"448CAA944097E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/dc/245fee32.jpg","comment_is_top":false,"comment_ctime":1576675969,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576675969","product_id":100029501,"comment_content":"最下面为我的代码，不知是否正确？有两点小问题：<br>1. 希望有习题的地方最后可以给出答案代码&#47;输出结果，方便同学自行对比差错。<br>2. 课程内容提到对列建立索引，请问应该如何建立索引？是用 select 进行查询吗？（如果是，则输出里会有索引的对应列，若此列内容为不需要输出的内容，是否有办法处理掉？）<br><br>```<br>select `name`,role_main,role_assist,hp_max,mp_max<br>FROM heros<br>WHERE (role_main IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL) AND (hp_max &gt; 8000 or mp_max &lt; 1500)<br>ORDER BY (hp_max+mp_max) DESC<br>```","like_count":0},{"had_liked":false,"id":161733,"user_name":"高泽林","can_delete":false,"product_type":"c1","uid":1764725,"ip_address":"","ucode":"DE54EBFFF11265","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/AGicQgKibwja1SxkQ7oXQE8hYH7yCpiaicNHw3qZRuNB81aVDOQm9P1zd5F75Jbtv66G15D6ZjbbqfnoETR4321Zdw/132","comment_is_top":false,"comment_ctime":1576311287,"is_pvip":false,"replies":[{"id":"62594","content":"对的 基本准则之一","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577072719,"ip_address":"","comment_id":161733,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576311287","product_id":100029501,"comment_content":"减少全表的搜索，加强效率！","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477832,"discussion_content":"对的 基本准则之一","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577072719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160990,"user_name":"taoist","can_delete":false,"product_type":"c1","uid":1195004,"ip_address":"","ucode":"D70AFE25CD8F10","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/fc/04a75cd0.jpg","comment_is_top":false,"comment_ctime":1576074180,"is_pvip":true,"replies":[{"id":"62596","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577072790,"ip_address":"","comment_id":160990,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576074180","product_id":100029501,"comment_content":"MariaDB:<br>select name,role_main,role_assist,hp_max, mp_max from heros where role_main in(&#39;坦克&#39;,&#39;战士&#39;) and (role_assist is not null ) and (hp_max &gt; 8000 or mp_max &lt;1500) order by (hp_max + mp_max) desc;<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477560,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577072790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160216,"user_name":"Geek_d3a509","can_delete":false,"product_type":"c1","uid":1765573,"ip_address":"","ucode":"8A40A85D4D1A73","user_header":"","comment_is_top":false,"comment_ctime":1575893017,"is_pvip":false,"replies":[{"id":"62602","content":"正确 加油 Geek","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577073014,"ip_address":"","comment_id":160216,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575893017","product_id":100029501,"comment_content":"作业：（第一次提交的留言中的SQL发现我误解题目意思了，后续更改如下）select name ,hp_max ,mp_max, role_main, role_assist from heros where (role_main in(&#39;战士&#39;, &#39;坦克&#39;) and role_assist is not null) and (hp_max&gt;8000 or mp_max&lt;1500)  order by (hp_max + mp_max) desc;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477299,"discussion_content":"正确 加油 Geek","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577073014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160211,"user_name":"Geek_d3a509","can_delete":false,"product_type":"c1","uid":1765573,"ip_address":"","ucode":"8A40A85D4D1A73","user_header":"","comment_is_top":false,"comment_ctime":1575892382,"is_pvip":false,"replies":[{"id":"63761","content":"Good Job 总结的不错","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577531372,"ip_address":"","comment_id":160211,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575892382","product_id":100029501,"comment_content":"比较运算符：有‘大于’、‘小于’、‘不等于’、‘等于’等等，主要的作用为比较两个数的关系或者实现某些特定的条件。<br>逻辑运算符：有‘or’、‘and’、‘in’、‘not’，实现多个字句之间的关系连接，in在某些特定的范围或条件中而not则是不在或’非’。<br>通配符：‘_’、‘%’、‘？’等，不同DBMS中略有不同，‘%’作用是查询所有包含某个字符的记录，‘_’和‘？’表示放在字符中的任何位置表示任意一个字符。<br>SQL语句：select name ,hp_max ,mp_max, role_main, role_assist from heros where hp_max&gt;8000 and mp_max&lt;1500 and (role_main in(&#39;战士&#39;, &#39;坦克&#39;) and role_assist is not null) order by (hp_max + mp_max) desc;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477295,"discussion_content":"Good Job 总结的不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577531372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159531,"user_name":"Simon","can_delete":false,"product_type":"c1","uid":1083533,"ip_address":"","ucode":"16B4A8E6EB8DC1","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/8d/0cf741d3.jpg","comment_is_top":false,"comment_ctime":1575658181,"is_pvip":false,"replies":[{"id":"62631","content":"正确，云涛同学<br>","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577079120,"ip_address":"","comment_id":159531,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575658181","product_id":100029501,"comment_content":"MySQL：<br>SELECT <br>\t`name` AS &#39;英雄姓名&#39;,<br>\t`role_main` AS &#39;主要定位&#39;,<br>\t`role_ASsist` AS &#39;次要定位&#39;,<br>\t`hp_max` AS &#39;最大生命值&#39;,<br>\t`mp_max` AS &#39;最大法力值&#39;<br>FROM `heros`<br>WHERE<br>\t`role_main` IN (&#39;坦克&#39;,&#39;战士&#39;)<br>\tAND `role_assist` IS NOT NULL<br>\tAND (<br>\t`hp_max` &gt;8000<br>\tOR `mp_max` &lt;1500<br>\t)<br>ORDER BY <br>\t(`hp_max`+`mp_max`) DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477087,"discussion_content":"正确，云涛同学\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577079120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148345,"user_name":"henry1846","can_delete":false,"product_type":"c1","uid":1590000,"ip_address":"","ucode":"D970CA36D46173","user_header":"https://static001.geekbang.org/account/avatar/00/18/42/f0/a6521a37.jpg","comment_is_top":false,"comment_ctime":1572995896,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1572995896","product_id":100029501,"comment_content":"老师，为什么用函数代替like会效果更好呢","like_count":0,"discussions":[{"author":{"id":2882440,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/fb/88/00cb17bf.jpg","nickname":"潜龙","note":"","ucode":"5B77E245591D7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543505,"discussion_content":"因为like这种方式是对全表进行搜索，就好比你查字典是每一页都翻，而不是直接看目录，所以效率会很慢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641185616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144723,"user_name":"扶幽","can_delete":false,"product_type":"c1","uid":1322612,"ip_address":"","ucode":"1400EDFF8970D3","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/74/88c613e0.jpg","comment_is_top":false,"comment_ctime":1572011313,"is_pvip":false,"replies":[{"id":"62694","content":"select name, role_main, role_assist, hp_max, mp_max from heros <br>where role_main in (&#39;坦克&#39;, &#39;战士&#39;) and role_assist is not null <br>and (hp_max&gt;8000 or mp_max&lt;1500)<br>order by (hp_max+mp_max) DESC;","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577084753,"ip_address":"","comment_id":144723,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572011313","product_id":100029501,"comment_content":"作业：<br>select name, main_role, role_asisst, hp_max, mp_max from hero <br>where main_role in (&#39;坦克&#39;, &#39;战士&#39;) and role_asisst is not null <br>and (hp_max&gt;8000 or mp_max&lt;1500)<br>order by (hp_max+mp_max) DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472085,"discussion_content":"select name, role_main, role_assist, hp_max, mp_max from heros \nwhere role_main in (&amp;#39;坦克&amp;#39;, &amp;#39;战士&amp;#39;) and role_assist is not null \nand (hp_max&amp;gt;8000 or mp_max&amp;lt;1500)\norder by (hp_max+mp_max) DESC;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577084753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142446,"user_name":"Coool","can_delete":false,"product_type":"c1","uid":1701702,"ip_address":"","ucode":"1D1AB3270B02B9","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/46/209ca424.jpg","comment_is_top":false,"comment_ctime":1571369448,"is_pvip":false,"replies":[{"id":"62781","content":"结果正确，也可以分享下SQL","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577092247,"ip_address":"","comment_id":142446,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571369448","product_id":100029501,"comment_content":"name\trole_main\trole_assist\thp_max\tmp_max<br>牛魔\t坦克\t辅助\t8476\t1926<br>刘邦\t坦克\t辅助\t8073\t1940<br>程咬金\t坦克\t战士\t8611\t0<br>张飞\t坦克\t辅助\t8341\t100<br>亚瑟\t战士\t坦克\t8050\t0<br>吕布\t战士\t坦克\t7344\t0<br>关羽\t战士\t坦克\t7107\t10<br>花木兰\t战士\t刺客\t5397\t100","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471129,"discussion_content":"结果正确，也可以分享下SQL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577092247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142445,"user_name":"Coool","can_delete":false,"product_type":"c1","uid":1701702,"ip_address":"","ucode":"1D1AB3270B02B9","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/46/209ca424.jpg","comment_is_top":false,"comment_ctime":1571369377,"is_pvip":false,"replies":[{"id":"62703","content":"正确，加油","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577085488,"ip_address":"","comment_id":142445,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571369377","product_id":100029501,"comment_content":"SELECT name,role_main,role_assist,hp_max,mp_max FROM heros WHERE (role_main IN(&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL) AND (hp_max&gt;8000 OR mp_max&lt;1500) ORDER BY (hp_max+mp_max) DESC  交作业啦~","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471128,"discussion_content":"正确，加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577085488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142052,"user_name":"半瓶醋","can_delete":false,"product_type":"c1","uid":1282746,"ip_address":"","ucode":"8C898E244D0417","user_header":"https://static001.geekbang.org/account/avatar/00/13/92/ba/9833f06f.jpg","comment_is_top":false,"comment_ctime":1571284332,"is_pvip":true,"replies":[{"id":"62707","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577085560,"ip_address":"","comment_id":142052,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571284332","product_id":100029501,"comment_content":"1）比较运算符：比较字段的数值；<br>2）逻辑运算符：多条件筛选<br>3）通配符：进行一些条件复杂的过滤，但效率较低，一般会全表扫描。<br><br>#MySQL5.5 <br>SELECT name,role_main,role_assist,hp_max,mp_max<br>FROM heros<br>WHERE (role_main in(&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL)<br>AND (hp_max&gt;8000 OR mp_max&lt;1500)<br>ORDER BY (hp_max + mp_max) DESC","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470968,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577085560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140691,"user_name":"右耳朵猫咪","can_delete":false,"product_type":"c1","uid":1014984,"ip_address":"","ucode":"3AB186CC780FBB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/c8/8627f5c1.jpg","comment_is_top":false,"comment_ctime":1571031403,"is_pvip":true,"replies":[{"id":"54447","content":"对 应该是没有空格的","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1571056826,"ip_address":"","comment_id":140691,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571031403","product_id":100029501,"comment_content":"SQL：SELECT name FROM heros WHERE name LIKE &#39;_% 太 %&#39;<br>文中这个语句太两边是不能带空格的，否则查不到。","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470511,"discussion_content":"对 应该是没有空格的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140011,"user_name":"加冰","can_delete":false,"product_type":"c1","uid":1245650,"ip_address":"","ucode":"A260F94475CC27","user_header":"https://static001.geekbang.org/account/avatar/00/13/01/d2/71cebd7a.jpg","comment_is_top":false,"comment_ctime":1570785741,"is_pvip":false,"replies":[{"id":"63773","content":"就是在数据库中对某个字段创建索引，索引是一种查找方式，方便后续按照索引进行条件查找","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577541002,"ip_address":"","comment_id":140011,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570785741","product_id":100029501,"comment_content":"老师能举个例子不？如何是建索引","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470212,"discussion_content":"就是在数据库中对某个字段创建索引，索引是一种查找方式，方便后续按照索引进行条件查找","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577541002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138481,"user_name":"jxs1211","can_delete":false,"product_type":"c1","uid":1101006,"ip_address":"","ucode":"B7F1F2D84389E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","comment_is_top":false,"comment_ctime":1570267191,"is_pvip":false,"replies":[{"id":"62714","content":"SELECT name, role_main, role_assist, hp_max, mp_max, birthdate FROM heros WHERE <br>role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND (role_assist IS NOT NULL) AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max+mp_max) DESC","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577085973,"ip_address":"","comment_id":138481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570267191","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max, birthdate FROM heroes WHERE (role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND (role_assist NOT NULL) AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max+mp_max) DESC<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469537,"discussion_content":"SELECT name, role_main, role_assist, hp_max, mp_max, birthdate FROM heros WHERE \nrole_main IN (&amp;#39;坦克&amp;#39;, &amp;#39;战士&amp;#39;) AND (role_assist IS NOT NULL) AND (hp_max &amp;gt; 8000 OR mp_max &amp;lt; 1500) ORDER BY (hp_max+mp_max) DESC","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577085973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135936,"user_name":"Cola_","can_delete":false,"product_type":"c1","uid":1264718,"ip_address":"","ucode":"99996D04CA4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/4c/4e/91267714.jpg","comment_is_top":false,"comment_ctime":1569308398,"is_pvip":false,"replies":[{"id":"63494","content":"对的","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577514536,"ip_address":"","comment_id":135936,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569308398","product_id":100029501,"comment_content":"查询优化：<br>1.limit限制查询数量<br>2.尽量少用like，尽量别全表查，且查询的字段加上索引<br>3.order by 和 where涉及到的列也增加索引","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468392,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577514536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135935,"user_name":"Cola_","can_delete":false,"product_type":"c1","uid":1264718,"ip_address":"","ucode":"99996D04CA4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/4c/4e/91267714.jpg","comment_is_top":false,"comment_ctime":1569307711,"is_pvip":false,"replies":[{"id":"62719","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577086658,"ip_address":"","comment_id":135935,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569307711","product_id":100029501,"comment_content":"作业：<br>select name,role_main,role_assist,hp_max,mp_max from heros where (role_main in (&#39;坦克&#39;,&#39;战士&#39;) and role_assist is not null) and (hp_max&gt;8000 or mp_max&lt;1500) order by (hp_max+mp_max) desc;<br>+-----------+-----------+-------------+--------+--------+<br>| name      | role_main | role_assist | hp_max | mp_max |<br>+-----------+-----------+-------------+--------+--------+<br>| 牛魔      | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦      | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金    | 坦克      | 战士        |   8611 |      0 |<br>| 张飞      | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟      | 战士      | 坦克        |   8050 |      0 |<br>| 吕布      | 战士      | 坦克        |   7344 |      0 |<br>| 关羽      | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰    | 战士      | 刺客        |   5397 |    100 |<br>+-----------+-----------+-------------+--------+--------+<br>8 rows in set (0.00 sec)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468391,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577086658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133785,"user_name":"Yuhui","can_delete":false,"product_type":"c1","uid":1110470,"ip_address":"","ucode":"811933B016179F","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/c6/6f39a982.jpg","comment_is_top":false,"comment_ctime":1568662982,"is_pvip":false,"replies":[{"id":"53363","content":"MySQL查询优化器会自动进行选择使用index sort还是file sort，通常不需要我们来进行指定。当然如果你确定某种索引方式效率更高，你也可以使用hint功能，比如USE INDEX进行提示索引","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1570428721,"ip_address":"","comment_id":133785,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568662982","product_id":100029501,"comment_content":"老师好，请教一下如何设置MySQL数据库使用index sort还是file sort呢？谢谢！","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467507,"discussion_content":"MySQL查询优化器会自动进行选择使用index sort还是file sort，通常不需要我们来进行指定。当然如果你确定某种索引方式效率更高，你也可以使用hint功能，比如USE INDEX进行提示索引","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570428721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133337,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1568520765,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1568520765","product_id":100029501,"comment_content":"老师您好，我想知道给字段加索引的原则是什么，索引对于读速度有优化，但是对于写速度又有不友好，应该如何取舍？望看到解答，谢谢","like_count":0},{"had_liked":false,"id":132969,"user_name":"xuqnqn","can_delete":false,"product_type":"c1","uid":1322427,"ip_address":"","ucode":"5A6D8472CD3AE4","user_header":"https://static001.geekbang.org/account/avatar/00/14/2d/bb/3da9ebd2.jpg","comment_is_top":false,"comment_ctime":1568286112,"is_pvip":false,"replies":[{"id":"62729","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577087185,"ip_address":"","comment_id":132969,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568286112","product_id":100029501,"comment_content":"mysql&gt; SELECT name, role_main, role_assist, hp_max, mp_max FROM heros WHERE role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist IS NOT NULL AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max + mp_max) DESC;<br>+-----------+-----------+-------------+--------+--------+<br>| name      | role_main | role_assist | hp_max | mp_max |<br>+-----------+-----------+-------------+--------+--------+<br>| 牛魔      | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦      | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金    | 坦克      | 战士        |   8611 |      0 |<br>| 张飞      | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟      | 战士      | 坦克        |   8050 |      0 |<br>| 吕布      | 战士      | 坦克        |   7344 |      0 |<br>| 关羽      | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰    | 战士      | 刺客        |   5397 |    100 |<br>+-----------+-----------+-------------+--------+--------+<br>8 rows in set (0.01 sec)<br><br>mysql&gt; <br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467197,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577087185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128539,"user_name":"听雨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1566898188,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566898188","product_id":100029501,"comment_content":"老师，instr、locate等内置函数的原理是什么，为什么比like效率高呢","like_count":0},{"had_liked":false,"id":127454,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1566720888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566720888","product_id":100029501,"comment_content":"      不过似乎有些是等效的：而且函数用在语句中是非常影响效率的-这个应当是禁用的，除非无视查询时间只是为了一个统计&#47;查询结果，又或者Function或者SP中吧。","like_count":0},{"had_liked":false,"id":122818,"user_name":"海洋","can_delete":false,"product_type":"c1","uid":1369704,"ip_address":"","ucode":"F82635CDB2FB93","user_header":"https://static001.geekbang.org/account/avatar/00/14/e6/68/1871d6ba.jpg","comment_is_top":false,"comment_ctime":1565534354,"is_pvip":false,"replies":[{"id":"63536","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577517246,"ip_address":"","comment_id":122818,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565534354","product_id":100029501,"comment_content":"作业：<br>-----------------------------------------<br>SELECT name, role_main, role_assist, hp_max, mp_max <br>FROM heros<br>WHERE (role_main IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL)<br>AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY (hp_max + mp_max) DESC;<br>------------------------------------------------","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462415,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577517246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121236,"user_name":"冲","can_delete":false,"product_type":"c1","uid":1149914,"ip_address":"","ucode":"4191C8A4DF3840","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIk46cor5XVFTPZbPOnb7pViabgy450pobo46hRHFQz5nR5ocYRKIzC8vShic36vwa553H4Vj50x5wA/132","comment_is_top":false,"comment_ctime":1565082438,"is_pvip":false,"replies":[{"id":"63579","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577518920,"ip_address":"","comment_id":121236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565082438","product_id":100029501,"comment_content":"select name,role_main,role_assist,hp_max,mp_max from heros <br>where role_main in (&#39;坦克&#39;,&#39;战士&#39;) <br>and role_assist is not NULL <br>and (hp_max&gt;8000 or mp_max&lt;1500) <br>ORDER BY (hp_max+mp_max) desc","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461696,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577518920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117509,"user_name":"巫","can_delete":false,"product_type":"c1","uid":1023068,"ip_address":"","ucode":"85E71B16812776","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/5c/4f35bdfe.jpg","comment_is_top":false,"comment_ctime":1564064328,"is_pvip":false,"replies":[{"id":"43070","content":"对 NOT的优先级更高","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1564104119,"ip_address":"","comment_id":117509,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564064328","product_id":100029501,"comment_content":"逻辑运算符应该加上 not，它的优先级比 and 还高。","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460002,"discussion_content":"对 NOT的优先级更高","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564104119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115688,"user_name":"Ronnyz","can_delete":false,"product_type":"c1","uid":1488280,"ip_address":"","ucode":"9F34527B1D343D","user_header":"https://static001.geekbang.org/account/avatar/00/16/b5/98/ffaf2aca.jpg","comment_is_top":false,"comment_ctime":1563698839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563698839","product_id":100029501,"comment_content":"mysql&gt; SELECT name, role_main, role_assist, hp_max, mp_max<br>    -&gt; FROM heros<br>    -&gt; WHERE (role_main IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL)<br>    -&gt; AND (hp_max &gt; 8000 OR mp_max &lt;1500)<br>    -&gt; ORDER BY (hp_max+mp_max) DESC;<br>","like_count":0},{"had_liked":false,"id":115417,"user_name":"my","can_delete":false,"product_type":"c1","uid":1572768,"ip_address":"","ucode":"5429CC3E93713A","user_header":"https://static001.geekbang.org/account/avatar/00/17/ff/a0/0ee46f52.jpg","comment_is_top":false,"comment_ctime":1563585011,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563585011","product_id":100029501,"comment_content":"老师，关于WHERE和ORDER BY后面加索引这块讲的内容太少了，感觉这块挺重要的，能不能在后面详细讲讲啊？最好带上例子和SQL语句来讲","like_count":0},{"had_liked":false,"id":114550,"user_name":"蓝影闪电","can_delete":false,"product_type":"c1","uid":1276629,"ip_address":"","ucode":"0B7A42D79558E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/7a/d5/dbcaadf0.jpg","comment_is_top":false,"comment_ctime":1563333513,"is_pvip":false,"replies":[{"id":"63690","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577528318,"ip_address":"","comment_id":114550,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563333513","product_id":100029501,"comment_content":"SELECT name,role_main,role_assist,hp_max,mp_max FROM heros<br>WHERE (role_main=&#39;坦克&#39; OR role_main=&#39;战士&#39;) <br>\t\t\tand role_assist IS NOT NULL<br>\t\t\tAND (hp_max&gt;8000 OR mp_max&lt;1500)<br>ORDER BY (hp_max+mp_max) DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458722,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577528318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114274,"user_name":"Fargo","can_delete":false,"product_type":"c1","uid":1018174,"ip_address":"","ucode":"434FC4C5D61750","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/3e/1976b66f.jpg","comment_is_top":false,"comment_ctime":1563264447,"is_pvip":false,"replies":[{"id":"63694","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577528450,"ip_address":"","comment_id":114274,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563264447","product_id":100029501,"comment_content":"mysql&gt; SELECT name, role_main, role_assist, hp_max, mp_max FROM heros WHERE role_main IN (&#39;战士&#39;,&#39;坦克&#39;) AND role_assist IS NOT NULL AND (hp_max&gt;8000 OR mp_max&lt;1500) ORDER BY (hp_max+mp_max) DESC;<br>+--------+-----------+-------------+--------+--------+<br>| name   | role_main | role_assist | hp_max | mp_max |<br>+--------+-----------+-------------+--------+--------+<br>| 牛魔   | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦   | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金 | 坦克      | 战士        |   8611 |      0 |<br>| 张飞   | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟   | 战士      | 坦克        |   8050 |      0 |<br>| 吕布   | 战士      | 坦克        |   7344 |      0 |<br>| 关羽   | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰 | 战士      | 刺客        |   5397 |    100 |","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458589,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577528450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112884,"user_name":"William","can_delete":false,"product_type":"c1","uid":1241365,"ip_address":"","ucode":"4499F99B180102","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/15/8fcf8038.jpg","comment_is_top":false,"comment_ctime":1562837258,"is_pvip":true,"replies":[{"id":"63709","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577529995,"ip_address":"","comment_id":112884,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1562837258","product_id":100029501,"comment_content":"```sql<br>mysql&gt; SELECT name, role_main, role_assist, hp_max, mp_max<br>    -&gt; FROM heros<br>    -&gt; WHERE role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist IS NOT NULL AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>    -&gt; ORDER BY (hp_max + mp_max) DESC;<br>+-----------+-----------+-------------+--------+--------+<br>| name      | role_main | role_assist | hp_max | mp_max |<br>+-----------+-----------+-------------+--------+--------+<br>| 牛魔      | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦      | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金    | 坦克      | 战士        |   8611 |      0 |<br>| 张飞      | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟      | 战士      | 坦克        |   8050 |      0 |<br>| 吕布      | 战士      | 坦克        |   7344 |      0 |<br>| 关羽      | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰    | 战士      | 刺客        |   5397 |    100 |<br>+-----------+-----------+-------------+--------+--------+<br>8 rows in set (0.00 sec)<br>```","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457942,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577529995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112787,"user_name":"KaitoShy","can_delete":false,"product_type":"c1","uid":1038415,"ip_address":"","ucode":"E2E2E9BD3F5048","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/4f/65abc6f0.jpg","comment_is_top":false,"comment_ctime":1562826593,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562826593","product_id":100029501,"comment_content":"（%）（_）是通配符，那如果有字段含有%_这种该怎么操作呢？","like_count":0},{"had_liked":false,"id":112368,"user_name":"tongmin_tsai","can_delete":false,"product_type":"c1","uid":1045090,"ip_address":"","ucode":"D9423E770D5846","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/62/f873cd8f.jpg","comment_is_top":false,"comment_ctime":1562724221,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562724221","product_id":100029501,"comment_content":"老师，假设根据主键查询，那么where过滤都是一条记录的情况下，in和=这两种方式的效率一样吗？还是=会比in效率高？","like_count":0},{"had_liked":false,"id":112062,"user_name":"2525","can_delete":false,"product_type":"c1","uid":1180247,"ip_address":"","ucode":"2426488C258203","user_header":"https://static001.geekbang.org/account/avatar/00/12/02/57/9b235866.jpg","comment_is_top":false,"comment_ctime":1562662532,"is_pvip":false,"replies":[{"id":"63733","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577530787,"ip_address":"","comment_id":112062,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562662532","product_id":100029501,"comment_content":"作业：mysql<br><br>SELECT<br>\tNAME AS 名称,<br>\trole_main AS 主要定位,<br>\trole_assist AS 次要定位,<br>\thp_max AS 最大生命,<br>\tmp_max AS 最大法力<br>FROM<br>\theros<br>WHERE<br>\trole_main IN (&#39;坦克&#39;, &#39;战士&#39;)<br>AND role_assist IS NOT NULL<br>AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY<br>\t(hp_max + mp_max) DESC","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457555,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111491,"user_name":"喵喵喵","can_delete":false,"product_type":"c1","uid":1211713,"ip_address":"","ucode":"E3AD8BF42E19DF","user_header":"https://static001.geekbang.org/account/avatar/00/12/7d/41/3c5b770b.jpg","comment_is_top":false,"comment_ctime":1562562443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562562443","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, mp_max, hp_max<br>FROM heros<br>WHERE role_main IN (&#39;战士&#39;, &#39;坦克&#39;)<br>  AND role_assist IS NOT NULL<br>  AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY (hp_max + mp_max) DESC;","like_count":0},{"had_liked":false,"id":111142,"user_name":"Geek_0168a2","can_delete":false,"product_type":"c1","uid":1585092,"ip_address":"","ucode":"2D3F17B775FEB2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLqDHFficypYolzgcHRGnFt3YEt68TWmc6GTJl2RMckyIicibictXrLfIVOyMJC0mbdo3Hzr5ibibpEYViaQ/132","comment_is_top":false,"comment_ctime":1562488217,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562488217","product_id":100029501,"comment_content":"老师，如果有比较运算符查询是的字符串日期的范围查询效率会怎么样呢","like_count":0},{"had_liked":false,"id":110642,"user_name":"圣地亚哥正在钓鱼🎣","can_delete":false,"product_type":"c1","uid":1573114,"ip_address":"","ucode":"F5F6D1DBDAE3D5","user_header":"https://static001.geekbang.org/account/avatar/00/18/00/fa/9259e7c5.jpg","comment_is_top":false,"comment_ctime":1562309404,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562309404","product_id":100029501,"comment_content":"表字段全都设定默认值会不会查询效率更高，另外NULL值在反向查询(&lt;&gt;或!=)时会被遗漏。","like_count":0},{"had_liked":false,"id":110623,"user_name":"一叶知秋","can_delete":false,"product_type":"c1","uid":1445189,"ip_address":"","ucode":"15A95FA86B7AE4","user_header":"https://static001.geekbang.org/account/avatar/00/16/0d/45/b88a1794.jpg","comment_is_top":false,"comment_ctime":1562304482,"is_pvip":false,"replies":[{"id":"63754","content":"不错 加油~","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577531159,"ip_address":"","comment_id":110623,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562304482","product_id":100029501,"comment_content":"哈哈哈 今天开始追进度。<br>作业： mysql select name from heros where role_main in (&#39;坦克&#39;, &#39;战士&#39;) and role_assist != &#39;&#39; and (hp_max&gt;8000 or mp_max&lt;1500) order by (hp_max + mp_max) desc;<br>输出：<br>+-----------+<br>| name      |<br>+-----------+<br>| 牛魔      |<br>| 刘邦      |<br>| 程咬金    |<br>| 张飞      |<br>| 亚瑟      |<br>| 吕布      |<br>| 关羽      |<br>| 花木兰    |<br>+-----------+<br>8 rows in set (0.00 sec)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456972,"discussion_content":"不错 加油~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577531159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108871,"user_name":"mj4ever","can_delete":false,"product_type":"c1","uid":1005549,"ip_address":"","ucode":"73028E537099CC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/ed/d50de13c.jpg","comment_is_top":false,"comment_ctime":1561905773,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1561905773","product_id":100029501,"comment_content":"SELECT name FROM heros WHERE name LIKE &#39;_%太%&#39;，\b最后一句似乎多了空格","like_count":0},{"had_liked":false,"id":108806,"user_name":"莫莫","can_delete":false,"product_type":"c1","uid":1170881,"ip_address":"","ucode":"D3A70E02A100F1","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/c1/e73d9bf1.jpg","comment_is_top":false,"comment_ctime":1561886267,"is_pvip":false,"replies":[{"id":"63963","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577606039,"ip_address":"","comment_id":108806,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561886267","product_id":100029501,"comment_content":"SELECT `name`,role_main,role_assist,hp_max,mp_max FROM heros<br>WHERE (role_main in(&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL) AND (hp_max&gt;8000 OR mp_max&lt;1500)<br>ORDER BY (hp_max+mp_max) DESC","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456124,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108701,"user_name":"H","can_delete":false,"product_type":"c1","uid":1589438,"ip_address":"","ucode":"0FCD13E5E0B276","user_header":"https://static001.geekbang.org/account/avatar/00/18/40/be/d05edc6a.jpg","comment_is_top":false,"comment_ctime":1561859631,"is_pvip":false,"replies":[{"id":"63982","content":"可以考虑SQL优化","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577606725,"ip_address":"","comment_id":108701,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561859631","product_id":100029501,"comment_content":"是不是也需要优化下sql","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456084,"discussion_content":"可以考虑SQL优化","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108688,"user_name":"Neo","can_delete":false,"product_type":"c1","uid":1070189,"ip_address":"","ucode":"A2B2E2F8780557","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/6d/c947ef55.jpg","comment_is_top":false,"comment_ctime":1561857361,"is_pvip":false,"replies":[{"id":"63971","content":"加油","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577606158,"ip_address":"","comment_id":108688,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561857361","product_id":100029501,"comment_content":"打卡：<br>SELECT name, role_main, role_assist, hp_max, mp_max FROM heros WHERE role_main IN(&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max+mp_max) DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456082,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107809,"user_name":"JustDoDT","can_delete":false,"product_type":"c1","uid":1127175,"ip_address":"","ucode":"6AF0B80F00EAEF","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","comment_is_top":false,"comment_ctime":1561615289,"is_pvip":false,"replies":[{"id":"39175","content":"结果正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561686482,"ip_address":"","comment_id":107809,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561615289","product_id":100029501,"comment_content":"对英雄名称、主要定位、次要定位、最大生命和最大法力进行查询，筛选条件为：主要定位是坦克或者战士，并且次要定位不为空，同时满足最大生命值大于 8000 或者最大法力小于 1500 的的英雄，并且按照最大生命和最大法力之和从高到底的顺序进行排序。<br><br>SELECT name, role_main, role_assist, hp_max, mp_max FROM heros <br>WHERE role_main IN (&#39;坦克&#39;, &#39;战士&#39;) <br>AND role_assist IS NOT NULL <br>AND (hp_max &gt; 8000 OR mp_max &lt; 1500) <br>ORDER BY (hp_max + mp_max) DESC;<br><br>+-----------+-----------+-------------+--------+--------+<br>| name      | role_main | role_assist | hp_max | mp_max |<br>+-----------+-----------+-------------+--------+--------+<br>| 牛魔      | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦      | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金    | 坦克      | 战士        |   8611 |      0 |<br>| 张飞      | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟      | 战士      | 坦克        |   8050 |      0 |<br>| 吕布      | 战士      | 坦克        |   7344 |      0 |<br>| 关羽      | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰    | 战士      | 刺客        |   5397 |    100 |<br>+-----------+-----------+-------------+--------+--------+<br>8 rows in set (0.00 sec)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455683,"discussion_content":"结果正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561686482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107784,"user_name":"奔波中不停","can_delete":false,"product_type":"c1","uid":1062875,"ip_address":"","ucode":"D6AFC76E02540D","user_header":"https://static001.geekbang.org/account/avatar/00/10/37/db/405157fc.jpg","comment_is_top":false,"comment_ctime":1561608346,"is_pvip":false,"replies":[{"id":"39180","content":"如果想在数据库中进行复杂排序的话，你可以根据你的排序条件计算出来权重值放到数据表中（增加一个权重值的字段），然后再在权重字段和查询条件上加索引","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561687999,"ip_address":"","comment_id":107784,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561608346","product_id":100029501,"comment_content":"老师你好，我希望能通过您的课程知道，如何对搜索结果按照额外的计算权重方式进行全站数据排序？难道我需要把全部数据插座出来，然后通过计算一个sort，再代码排序么？","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455670,"discussion_content":"如果想在数据库中进行复杂排序的话，你可以根据你的排序条件计算出来权重值放到数据表中（增加一个权重值的字段），然后再在权重字段和查询条件上加索引","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561687999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107758,"user_name":"不负","can_delete":false,"product_type":"c1","uid":1238323,"ip_address":"","ucode":"147F5860711811","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/33/ff5c52ad.jpg","comment_is_top":false,"comment_ctime":1561604036,"is_pvip":true,"replies":[{"id":"39191","content":"正确","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561691935,"ip_address":"","comment_id":107758,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1561604036","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max FROM heros<br>WHERE role_main in (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist IS NOT NULL <br>AND (hp_max&gt;8000 OR mp_max&lt;1500)<br>ORDER BY (hp_max+mp_max) DESC;<br>结果：<br>+-----------+-----------+-------------+--------+--------+<br>| name      | role_main | role_assist | hp_max | mp_max |<br>+-----------+-----------+-------------+--------+--------+<br>| 牛魔      | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦      | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金    | 坦克      | 战士        |   8611 |      0 |<br>| 张飞      | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟      | 战士      | 坦克        |   8050 |      0 |<br>| 吕布      | 战士      | 坦克        |   7344 |      0 |<br>| 关羽      | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰    | 战士      | 刺客        |   5397 |    100 |<br>+-----------+-----------+-------------+--------+--------+","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455660,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561691935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107527,"user_name":"2052","can_delete":false,"product_type":"c1","uid":1573548,"ip_address":"","ucode":"009F705ACCEB7F","user_header":"https://static001.geekbang.org/account/avatar/00/18/02/ac/d96eef2e.jpg","comment_is_top":false,"comment_ctime":1561552466,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561552466","product_id":100029501,"comment_content":"老师，请问一下我想查询最大hp_max的数据，select name ，max(hp_max) from heros；可是出来结果名字和最大hp_max对不上？怎么处理？谢谢","like_count":0},{"had_liked":false,"id":107443,"user_name":"sszz","can_delete":false,"product_type":"c1","uid":1584334,"ip_address":"","ucode":"F83860D50B7B20","user_header":"","comment_is_top":false,"comment_ctime":1561537014,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561537014","product_id":100029501,"comment_content":"你好，在索引字段后，慎用IN和NOT IN，如果是连续的数值，可以考虑用BETWEEN进行替换？MYSQL 表字段 age 普通索引，not in 会使索引失效，ALL 扫表。 in 为 range，in可以用到索引，为什么慎用 in 呢？","like_count":0},{"had_liked":false,"id":107353,"user_name":"🔰杨梓喜","can_delete":false,"product_type":"c1","uid":1201446,"ip_address":"","ucode":"CB229B8ABFBC4D","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/26/37ab4a1d.jpg","comment_is_top":false,"comment_ctime":1561517974,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561517974","product_id":100029501,"comment_content":"老师你好。如何建立索引。","like_count":0},{"had_liked":false,"id":107338,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1561516295,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561516295","product_id":100029501,"comment_content":"select语句中的DATE()函数多余了，可以不用","like_count":0},{"had_liked":false,"id":107336,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1561516108,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561516108","product_id":100029501,"comment_content":"建议github里面的建表语句中带上每个字段的中文描述，不然每次写作业要回过头来查字段对应的英文名称，太麻烦。","like_count":0},{"had_liked":false,"id":107334,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1561515969,"is_pvip":false,"replies":[{"id":"64001","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607306,"ip_address":"","comment_id":107334,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561515969","product_id":100029501,"comment_content":"mysql&gt; SELECT name, role_main, role_assist, hp_max, mp_max FROM heros WHERE (role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist IS NOT NULL) AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max + mp_max) DESC;<br>+-----------+-----------+-------------+--------+--------+<br>| name      | role_main | role_assist | hp_max | mp_max |<br>+-----------+-----------+-------------+--------+--------+<br>| 牛魔      | 坦克      | 辅助        |   8476 |   1926 |<br>| 刘邦      | 坦克      | 辅助        |   8073 |   1940 |<br>| 程咬金    | 坦克      | 战士        |   8611 |      0 |<br>| 张飞      | 坦克      | 辅助        |   8341 |    100 |<br>| 亚瑟      | 战士      | 坦克        |   8050 |      0 |<br>| 吕布      | 战士      | 坦克        |   7344 |      0 |<br>| 关羽      | 战士      | 坦克        |   7107 |     10 |<br>| 花木兰    | 战士      | 刺客        |   5397 |    100 |<br>+-----------+-----------+-------------+--------+--------+<br>8 rows in set (0.00 sec)<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455475,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107170,"user_name":"大斌","can_delete":false,"product_type":"c1","uid":1002183,"ip_address":"","ucode":"1434C2B0A29135","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/c7/ec18673b.jpg","comment_is_top":false,"comment_ctime":1561472516,"is_pvip":false,"replies":[{"id":"64011","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607377,"ip_address":"","comment_id":107170,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561472516","product_id":100029501,"comment_content":"select name ,role_main,role_assist,hp_max,mp_max from heros WHERE role_main IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL AND (hp_max&gt;8000 OR mp_max&lt;1500) ORDER BY (hp_max+mp_max) desc;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455398,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107134,"user_name":"supermouse","can_delete":false,"product_type":"c1","uid":1321860,"ip_address":"","ucode":"88072D5F881827","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/84/07f0c0d6.jpg","comment_is_top":false,"comment_ctime":1561464467,"is_pvip":false,"replies":[{"id":"64012","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607386,"ip_address":"","comment_id":107134,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561464467","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist, hp_max, mp_max <br>FROM heros <br>WHERE <br>\trole_main in (&#39;坦克&#39;, &#39;战士&#39;) AND<br>    role_assist IS NOT NULL AND<br>    (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY (hp_max+mp_max) DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455380,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107084,"user_name":"Fred","can_delete":false,"product_type":"c1","uid":1585721,"ip_address":"","ucode":"DBA8999FE43E4F","user_header":"","comment_is_top":false,"comment_ctime":1561456249,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561456249","product_id":100029501,"comment_content":"SELECT name, main_role,hp_max,mp_max<br>FROM heros<br>WHERE (main_role in (‘战士&#39;,&#39;坦克’) AND role_assist IS NOT NULL)<br>AND (hp_max&gt;8000 OR mp_max&lt;1500)<br>ORDER BY (hp_max+mp_max) DESC;<br><br>","like_count":0},{"had_liked":false,"id":106994,"user_name":"时间是最真的答案","can_delete":false,"product_type":"c1","uid":1183601,"ip_address":"","ucode":"B90F3EF769F865","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","comment_is_top":false,"comment_ctime":1561434368,"is_pvip":false,"replies":[{"id":"38715","content":"多谢支持，我也在加快备稿。因为知识点比较多，每次篇幅有限，介绍的不一定很深入。不过总的来说，重要的内容后面都会逐渐放出来的。","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561437926,"ip_address":"","comment_id":106994,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561434368","product_id":100029501,"comment_content":"速度更新了，如果作者已经写好很多篇了，可以提前更新，让学的快的同学能第一时间阅读","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455317,"discussion_content":"多谢支持，我也在加快备稿。因为知识点比较多，每次篇幅有限，介绍的不一定很深入。不过总的来说，重要的内容后面都会逐渐放出来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561437926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106993,"user_name":"时间是最真的答案","can_delete":false,"product_type":"c1","uid":1183601,"ip_address":"","ucode":"B90F3EF769F865","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","comment_is_top":false,"comment_ctime":1561434266,"is_pvip":false,"replies":[{"id":"38716","content":"正确，同时也在SELECT的name字段上加了反引号，避免了与保留字段冲突。","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561438164,"ip_address":"","comment_id":106993,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561434266","product_id":100029501,"comment_content":"SELECT `name`,role_main,role_assist,hp_max,mp_max FROM heros WHERE role_main IN (&#39;坦克&#39;,&#39;战士&#39;) AND role_assist IS NOT NULL AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max+mp_max) DESC","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455316,"discussion_content":"正确，同时也在SELECT的name字段上加了反引号，避免了与保留字段冲突。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561438164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106868,"user_name":"在路上","can_delete":false,"product_type":"c1","uid":1143372,"ip_address":"","ucode":"335960F683C23C","user_header":"https://static001.geekbang.org/account/avatar/00/11/72/4c/4d636a23.jpg","comment_is_top":false,"comment_ctime":1561419474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561419474","product_id":100029501,"comment_content":"老师，我们这边用大数据的hive，有个问题：hive查询语句where条件字段，若使用不等式，如＞、＜等，效率会很低，数据量大时会报错；说用不等式时hive只会分配一个reduce，这是一个什么样的机制，不是很明白？","like_count":0},{"had_liked":false,"id":106830,"user_name":"Yt","can_delete":false,"product_type":"c1","uid":1508210,"ip_address":"","ucode":"E094E3666A1440","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Pk7HVX99cBlSOicLoa8KN8yCKx1pWIyYuy7zxL2ibXicYRFq2ic7LMYiaXMajuQNRZzL4QyuJX6ToRoficsBPlT3Meog/132","comment_is_top":false,"comment_ctime":1561391743,"is_pvip":false,"replies":[{"id":"38730","content":"SQL语句正确（&#39;坦克&#39;需要注意下）。我在文章里主要讲解了LIKE操作符，也可以使用REGEXP操作符来进行正则表达式匹配。","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561442984,"ip_address":"","comment_id":106830,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561391743","product_id":100029501,"comment_content":"比较运算符：只有单纯的比较，查询的值比较（&gt;,&lt;,=,NULL判定）通过，则筛选通过<br>逻辑运算符：AND,OR,BETWEEN...AND，将比较运算符串联起来，组合成复杂的筛选条件<br>通配符：谈这个应该和正则表达式一起来讲，有点混乱易混淆。用于文本查询、匹配。LIKE比起REGEXP文本匹配更严格。LIKE是匹配的文本必须要有，且只能有这么多；REGEXP是匹配的文本段中有匹配的文本就行，所以REGEXP加入了控制匹配文本的位置功能。<br>SELECT name,role_main,role_assist,hp_max,mp_max<br>FROM heros<br>WHERE (role_main IN (&#39;战士&#39;,&#39;坦克‘) AND role_assist IS NOT NULL) AND(hp_max&gt;8000 OR mp_max&lt;1500)<br>ORDER BY (hp_max+mp_max)  DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455241,"discussion_content":"SQL语句正确（&amp;#39;坦克&amp;#39;需要注意下）。我在文章里主要讲解了LIKE操作符，也可以使用REGEXP操作符来进行正则表达式匹配。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561442984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106796,"user_name":"张昌","can_delete":false,"product_type":"c1","uid":1510451,"ip_address":"","ucode":"836821A2D3F783","user_header":"https://static001.geekbang.org/account/avatar/00/17/0c/33/5b6cdb06.jpg","comment_is_top":false,"comment_ctime":1561386984,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561386984","product_id":100029501,"comment_content":"老师，如果字符串的查询用like影响效率，是否能把这些字段拿出来单独成表是一个比较好的解决办法","like_count":0},{"had_liked":false,"id":106784,"user_name":"Geek_010040","can_delete":false,"product_type":"c1","uid":1584146,"ip_address":"","ucode":"A786E8EEB69005","user_header":"https://static001.geekbang.org/","comment_is_top":false,"comment_ctime":1561386314,"is_pvip":false,"replies":[{"id":"38733","content":"语句整体正确，有些列名不同，不如name, mp_max","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561444087,"ip_address":"","comment_id":106784,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561386314","product_id":100029501,"comment_content":"select hero_name, role_main, role_assist, hp_max, mp_max from hero where role_main in (xx,xx) and role_assist is not null and (hp_max &gt; 8000 or ma_max &lt; 1500 ) order by (hp_max + mp_max) desc;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455222,"discussion_content":"语句整体正确，有些列名不同，不如name, mp_max","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561444087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106775,"user_name":"Geek_010040","can_delete":false,"product_type":"c1","uid":1584146,"ip_address":"","ucode":"A786E8EEB69005","user_header":"https://static001.geekbang.org/","comment_is_top":false,"comment_ctime":1561385824,"is_pvip":false,"replies":[{"id":"38734","content":"对的，字段如果想走索引，like后面不能有前置通配符","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561444148,"ip_address":"","comment_id":106775,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561385824","product_id":100029501,"comment_content":"比较运算符：筛选条件<br>逻辑运算符：多个查询条件的连接，交并差补集<br>通配符：%零个或多个字符，_任意一个字符，like 条件只要有前置通配符，就不走索引","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455215,"discussion_content":"对的，字段如果想走索引，like后面不能有前置通配符","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561444148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106747,"user_name":"liuyyy","can_delete":false,"product_type":"c1","uid":1158611,"ip_address":"","ucode":"AAA3922482E4F7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ercic1LB9N9P1lWftkyyNqjILPAedlbRqvJl2KNTrDFCboiakKoTHPBTF3ufaIsdcLb9uXU8hFlptuw/132","comment_is_top":false,"comment_ctime":1561382580,"is_pvip":false,"replies":[{"id":"38735","content":"这句话说的相对有些省略，就是WHERE子句或ORDER BY子句后面涉及到的字段可以考虑加索引，以便避免全表扫描。当然具体情况具体分析，是否采用联合索引，索引是否会失效也是要考虑的。<br>","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561444233,"ip_address":"","comment_id":106747,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561382580","product_id":100029501,"comment_content":"老师，什么叫在WHERE和ORDER BY后面加索引呀","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455204,"discussion_content":"这句话说的相对有些省略，就是WHERE子句或ORDER BY子句后面涉及到的字段可以考虑加索引，以便避免全表扫描。当然具体情况具体分析，是否采用联合索引，索引是否会失效也是要考虑的。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561444233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106728,"user_name":"马哲富","can_delete":false,"product_type":"c1","uid":1107917,"ip_address":"","ucode":"D6BDDFE3CC07ED","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/cd/08088f14.jpg","comment_is_top":false,"comment_ctime":1561379871,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561379871","product_id":100029501,"comment_content":"老师好，where语句的执行顺序是什么样的呢？还有如何过滤条件能使语句更加优化？","like_count":0},{"had_liked":false,"id":106723,"user_name":"Hoo-Ah","can_delete":false,"product_type":"c1","uid":1306913,"ip_address":"","ucode":"823093A6C7DEE7","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/21/52e8267b.jpg","comment_is_top":false,"comment_ctime":1561378532,"is_pvip":false,"replies":[{"id":"64015","content":"加油 Hoo-Ah","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607431,"ip_address":"","comment_id":106723,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561378532","product_id":100029501,"comment_content":"打卡打卡","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455197,"discussion_content":"加油 Hoo-Ah","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106702,"user_name":"Zh","can_delete":false,"product_type":"c1","uid":1388911,"ip_address":"","ucode":"8B0032EC876B6B","user_header":"","comment_is_top":false,"comment_ctime":1561374482,"is_pvip":false,"replies":[{"id":"38738","content":"基本正确，SELECT字段中的最大法力应该是mp_max。SQL就像是英语一样，即使学过之后放下很长时间，捡起来也相对容易。 ","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561444540,"ip_address":"","comment_id":106702,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561374482","product_id":100029501,"comment_content":"SELECT name, role_main, role_assist,hp_max,mp_growth FROM heros<br>WHERE role_main IN (&#39;坦克&#39;, &#39;战士&#39;) AND role_assist IS NOT NULL AND (hp_max&gt;8000 OR mp_max&lt;1500) ORDER BY (hp_max+mp_max) DESC;<br><br>大学念完以后第一次写sql哈哈","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455184,"discussion_content":"基本正确，SELECT字段中的最大法力应该是mp_max。SQL就像是英语一样，即使学过之后放下很长时间，捡起来也相对容易。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561444540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106671,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1561369575,"is_pvip":false,"replies":[{"id":"64017","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607584,"ip_address":"","comment_id":106671,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561369575","product_id":100029501,"comment_content":"敲题目到dbeaver的时候少了 最后的 order by 之和两个字。。<br><br>修正如下:<br><br>select name,role_main,role_assist,hp_max,mp_max from heros<br>where (role_main=&#39;坦克&#39; or role_main=&#39;战士&#39;) and role_assist is not null <br>and (hp_max&gt;8000 or mp_max&lt;1500)<br>order by (hp_max+mp_max) desc<br><br>返回值:<br><br>牛魔\t坦克\t辅助\t8476\t1926<br>刘邦\t坦克\t辅助\t8073\t1940<br>程咬金\t坦克\t战士\t8611\t0<br>张飞\t坦克\t辅助\t8341\t100<br>亚瑟\t战士\t坦克\t8050\t0<br>吕布\t战士\t坦克\t7344\t0<br>关羽\t战士\t坦克\t7107\t10<br>花木兰\t战士\t刺客\t5397\t100","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455171,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106667,"user_name":"一秒","can_delete":false,"product_type":"c1","uid":1311001,"ip_address":"","ucode":"F149B7F60620BD","user_header":"https://static001.geekbang.org/account/avatar/00/14/01/19/f4da2829.jpg","comment_is_top":false,"comment_ctime":1561369028,"is_pvip":false,"replies":[{"id":"64018","content":"https:&#47;&#47;github.com&#47;cystanford&#47;sql_heros_data","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607604,"ip_address":"","comment_id":106667,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1561369028","product_id":100029501,"comment_content":"能否把王者荣耀的库导给我呢？不会建表，练习不了。","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455169,"discussion_content":"https://github.com/cystanford/sql_heros_data","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"骑行的掌柜J","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5584,"discussion_content":"你直接去git上面download后，新建个heros的表，就可以把老师的数据导入新表里面练习","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566363282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1054958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","nickname":"ABC","note":"","ucode":"7501AD9C0C4A70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279,"discussion_content":"https://github.com/pruidong/sql_heros_data/blob/master/heros_data_with_structure.sql 可以用navicat建库,然后导入上面的SQL语句就可以了.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561385812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1237145,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","nickname":"MJ","note":"","ucode":"FCEC0C21444D2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270,"discussion_content":"朋友 上一节内容，有git地址，里面有。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561376950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106654,"user_name":"leol","can_delete":false,"product_type":"c1","uid":1303229,"ip_address":"","ucode":"7FA42EAAFBAEB5","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/bd/b65420ae.jpg","comment_is_top":false,"comment_ctime":1561365300,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561365300","product_id":100029501,"comment_content":"select name,hp_max,mp_max,role_main,role_assist<br>from heros <br>where (role_main in (&#39;坦克&#39; or &#39;战士&#39;) and role_assist is not null)<br>and (hp_max &gt;8000 or hp_max&lt;1500)<br>order by (hp_max+mp_max) desc;","like_count":0},{"had_liked":false,"id":106609,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1561356060,"is_pvip":false,"replies":[{"id":"64019","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607637,"ip_address":"","comment_id":106609,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561356060","product_id":100029501,"comment_content":"SELECT name,role_main,role_assist,hp_max,mp_max from heros WHERE role_main IN (&#39;战士&#39;, &#39;坦克&#39;) AND role_assist IS NOT NULL AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY (hp_max + mp_max) DESC","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455152,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106587,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1561350072,"is_pvip":false,"replies":[{"id":"64022","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607673,"ip_address":"","comment_id":106587,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561350072","product_id":100029501,"comment_content":"MYSQL：<br>SELECT name, role_main, role_assist, hp_max, mp_max<br>FROM heros<br>WHERE ( role_main = &#39;坦克&#39; or role_main = &#39;战士&#39; ) AND role_assist IS NOT NULL AND (hp_max &gt; 8000 OR mp_max &lt; 1500)<br>ORDER BY ( hp_max + mp_max ) DESC<br><br>name\trole_main\trole_assist\thp_max\tmp_max<br>牛魔\t坦克\t辅助\t8476\t1926<br>刘邦\t坦克\t辅助\t8073\t1940<br>程咬金\t坦克\t战士\t8611\t0<br>张飞\t坦克\t辅助\t8341\t100<br>亚瑟\t战士\t坦克\t8050\t0<br>吕布\t战士\t坦克\t7344\t0<br>关羽\t战士\t坦克\t7107\t10<br>花木兰\t战士\t刺客\t5397\t100<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455147,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106578,"user_name":"TKbook","can_delete":false,"product_type":"c1","uid":1073829,"ip_address":"","ucode":"F6E0E99CC79059","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/a5/43aa0c27.jpg","comment_is_top":false,"comment_ctime":1561347598,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561347598","product_id":100029501,"comment_content":"select name, role_main, role_assist from heros where (role_main in (&#39;坦克&#39;, &#39;战士&#39;) and role_assist is not null) and (hp_max &gt; 8000 or mp_max &lt;1500) order by (hp_max + mp_max) desc;","like_count":0},{"had_liked":false,"id":106559,"user_name":"Middleware","can_delete":false,"product_type":"c1","uid":1072015,"ip_address":"","ucode":"C0028293ECDD47","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/8f/4b0ab5db.jpg","comment_is_top":false,"comment_ctime":1561344181,"is_pvip":true,"replies":[{"id":"64024","content":"Good Job","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607697,"ip_address":"","comment_id":106559,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1561344181","product_id":100029501,"comment_content":"SELECT name,role_main,role_assist,hp_max,mp_max FROM heros WHERE ((role_main in (&#39;战士&#39;,&#39;坦克&#39;)) AND (role_assist IS NOT NULL))<br>AND (hp_max &gt; 8000 OR mp_max &lt; 1500) ORDER BY hp_max+mp_max  DESC;<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455135,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106540,"user_name":"郡鸿","can_delete":false,"product_type":"c1","uid":1241201,"ip_address":"","ucode":"7A6298D288E078","user_header":"https://static001.geekbang.org/account/avatar/00/12/f0/71/c7b0a1f8.jpg","comment_is_top":false,"comment_ctime":1561341150,"is_pvip":false,"replies":[{"id":"38524","content":"正确！","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561345144,"ip_address":"","comment_id":106540,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561341150","product_id":100029501,"comment_content":"select name,role_main,role_assist,hp_max,mp_max from heros where <br>(role_main in (&#39;坦克&#39;,&#39;战士&#39;) <br>and role_assist is not null) <br>and (hp_max &gt; 8000 or mp_max &lt; 1500) order by (hp_max+mp_max) desc;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455131,"discussion_content":"正确！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561345144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106538,"user_name":"Abyssknight","can_delete":false,"product_type":"c1","uid":1336361,"ip_address":"","ucode":"08E8D68E4B76BB","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/29/da537902.jpg","comment_is_top":false,"comment_ctime":1561340718,"is_pvip":false,"replies":[{"id":"38525","content":"正确！","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561345206,"ip_address":"","comment_id":106538,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561340718","product_id":100029501,"comment_content":"select name, role_main, role_assist, hp_max, mp_max<br>from heros<br>where role_main in (&#39;坦克&#39;, &#39;战士&#39;)<br>  and role_assist is not null<br>  and (hp_max &gt; 8000 or mp_max &lt; 1500)<br>order by (hp_max + mp_max) desc;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455130,"discussion_content":"正确！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561345206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106526,"user_name":"葛亮","can_delete":false,"product_type":"c1","uid":1232328,"ip_address":"","ucode":"1B6D4B93800A35","user_header":"https://static001.geekbang.org/account/avatar/00/12/cd/c8/01068aff.jpg","comment_is_top":false,"comment_ctime":1561339236,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561339236","product_id":100029501,"comment_content":"通配符%不应该是任意字符吗（也就是含0个字符），至少SqlServer下是这样的","like_count":0},{"had_liked":false,"id":106507,"user_name":"小豹子","can_delete":false,"product_type":"c1","uid":1346267,"ip_address":"","ucode":"972F3E6BF0FDEA","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/db/76ab84c6.jpg","comment_is_top":false,"comment_ctime":1561337993,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561337993","product_id":100029501,"comment_content":"比较运算符一般是单字段与值或两个字段之间进行比较(使用&gt;&lt;=!)，逻辑运算符是一个或多个逻辑语句的拼接(使用not，and，or)，通配符一般只用于字符串里面(使用like)","like_count":0},{"had_liked":false,"id":106488,"user_name":"演","can_delete":false,"product_type":"c1","uid":1075072,"ip_address":"","ucode":"8685926BDA0A66","user_header":"https://static001.geekbang.org/account/avatar/00/10/67/80/4e52c16f.jpg","comment_is_top":false,"comment_ctime":1561335449,"is_pvip":false,"replies":[{"id":"64027","content":"Good","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607782,"ip_address":"","comment_id":106488,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561335449","product_id":100029501,"comment_content":"- 打卡<br>- SQL：SELECT name FROM heros WHERE name LIKE &#39;_% 太 %&#39;<br><br>可以筛选出包含&#39;太&#39;且不会出现在首位置的英雄名字","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455111,"discussion_content":"Good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106486,"user_name":"莱茵金属","can_delete":false,"product_type":"c1","uid":1202204,"ip_address":"","ucode":"896D833414E308","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/1c/8daf82d7.jpg","comment_is_top":false,"comment_ctime":1561334452,"is_pvip":false,"replies":[{"id":"64028","content":"刚接触数据库，或者之前做后端编程，想要了解SQL，或者已经有一些SQL基础，想要进行优化的（可以看后面的优化篇）","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1577607830,"ip_address":"","comment_id":106486,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1561334452","product_id":100029501,"comment_content":"请问老师的课程针对那些层面的程序员？","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455110,"discussion_content":"刚接触数据库，或者之前做后端编程，想要了解SQL，或者已经有一些SQL基础，想要进行优化的（可以看后面的优化篇）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1127175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","nickname":"JustDoDT","note":"","ucode":"6AF0B80F00EAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483,"discussion_content":"自学能力强，面向搜索引擎编程，面向Google编程。😏","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1561615737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106482,"user_name":"飞翔","can_delete":false,"product_type":"c1","uid":1077915,"ip_address":"","ucode":"5941C938548354","user_header":"https://static001.geekbang.org/account/avatar/00/10/72/9b/8052071e.jpg","comment_is_top":false,"comment_ctime":1561334218,"is_pvip":false,"replies":[{"id":"38501","content":"对 太字两边可以是任意的字符，%表示任意字符出现任意次数。","user_name":"作者回复","user_name_real":"cy","uid":"1306094","ctime":1561339073,"ip_address":"","comment_id":106482,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561334218","product_id":100029501,"comment_content":"通配符还是没明白%太%表示太两边可以任意字符，是这样理解吗？","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455108,"discussion_content":"对 太字两边可以是任意的字符，%表示任意字符出现任意次数。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561339073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}