{"id":185352,"title":"20 | é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼š35å²çš„ç¨‹åºå‘˜åº”è¯¥å†™ä»€ä¹ˆæ ·çš„ä»£ç ï¼Ÿ","content":"<p>æˆ‘åœ¨é˜¿é‡Œå·´å·´å·¥ä½œçš„å¤´ä¸€å¹´ï¼Œååœ¨æˆ‘å¯¹é¢çš„åŒäº‹è´Ÿè´£å¼€å‘ä¸€ä¸ªå…¬å¸ç»Ÿä¸€çš„è¿ç»´ç³»ç»Ÿã€‚ä»–å¯¹è¿™ä¸ªç³»ç»Ÿç»è¿‡è°¨æ…çš„è°ƒç ”å’Œè®¤çœŸçš„æ€è€ƒï¼ŒèŠ±è´¹äº†åŠå¹´å¤šçš„æ—¶é—´å¼€å‘ï¼Œç»ˆäºå¼€å‘å®Œäº†ã€‚ç„¶åé‚€è¯·å„ä¸ªéƒ¨é—¨çš„ç›¸å…³åŒäº‹åšå‘å¸ƒè¯„å®¡ï¼Œå¦‚æœå¤§å®¶æ²¡ä»€ä¹ˆæ„è§å°±å‘å¸ƒä¸Šçº¿ï¼Œå…¨å…¬å¸èŒƒå›´ç»Ÿä¸€æ¨å¹¿ä½¿ç”¨ã€‚</p><p>ç»“æœåœ¨è¿™ä¸ªå‘å¸ƒä¼šä¸Šï¼Œå‡ ä¹æ‰€æœ‰éƒ¨é—¨çš„åŒäº‹éƒ½æå‡ºäº†ä¸åŒçš„æ„è§ï¼šè™½ç„¶è¿™ä¸ªåŠŸèƒ½æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œä½†æ˜¯é‚£ä¸ªç‰¹æ€§å´æ˜¯ä¸èƒ½æ¥å—çš„ï¼Œæˆ‘ä»¬ä»¥å¾€ä¸æ˜¯è¿™æ ·çš„â€¦â€¦</p><p>æœ€ç³Ÿç³•çš„æ˜¯ï¼Œä¸åŒéƒ¨é—¨çš„è¿™ä¸ªåŠŸèƒ½å’Œé‚£ä¸ªç‰¹æ€§åˆå‡ ä¹ä¸ç›¸åŒã€‚æœ€ç»ˆè®¨è®ºçš„ç»“æœæ˜¯ï¼Œè¿™ä¸ªç³»ç»Ÿä¸å‘å¸ƒæ¨å¹¿ï¼Œéœ€è¦é‡æ–°è®¾è®¡ã€‚</p><p>è¿™ä¸ªåŒäº‹åˆèŠ±äº†å‡ ä¸ªæœˆçš„æ—¶é—´å°è¯•æ»¡è¶³æ‰€æœ‰éƒ¨é—¨çš„ä¸åŒçš„éœ€æ±‚ï¼Œæœ€ç»ˆå‘ç°æ— æ³•ç»Ÿä¸€è¿™äº›åŠŸèƒ½éœ€æ±‚ï¼Œäºæ˜¯è¾èŒäº†â€¦â€¦</p><p>ä»–ç¦»èŒåï¼Œæœ‰æ¬¡ä¼šä¸Šæˆ‘ä»¬åˆè®¨è®ºèµ·è¿™ä¸ªé¡¹ç›®ä¸ºä»€ä¹ˆä¼šå¤±è´¥ï¼Œå…¶ä¸­æœ‰ä¸ªåŒäº‹çš„è¯è®©æˆ‘å°è±¡æ·±åˆ»ï¼Œä»–çš„è¯çš„å¤§æ„æ˜¯ï¼šå¦‚æœä½ å¯¹è‡ªå·±è¦å¼€å‘çš„ä¸šåŠ¡é¢†åŸŸæ²¡æœ‰æ¸…æ™°çš„å®šä¹‰å’Œè¾¹ç•Œï¼Œ<strong>æ²¡æœ‰è®¾è®¡ç³»ç»Ÿçš„é¢†åŸŸæ¨¡å‹</strong>ï¼Œè€Œä»…ä»…è·Ÿç€æ‰€è°“çš„éœ€æ±‚ä¸æ–­å¼€å‘åŠŸèƒ½ï¼Œä¸€æ—¦éœ€æ±‚æ¥è‡ªå¤šä¸ªæ–¹é¢ï¼Œå°±å¯èƒ½å‘ç”Ÿéœ€æ±‚å†²çªï¼Œæˆ–è€…éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå‰ååŠŸèƒ½ä¹Ÿä¼šå‘ç”Ÿå†²çªï¼Œè¿™æ—¶ä½ è¶Šæ˜¯è¯•å›¾å¼¥è¡¥è¿™äº›å†²çªï¼Œå°±è¶Šæ˜¯é™·å…¥æ›´å¤§çš„å†²çªä¹‹ä¸­ã€‚</p><p>å›æƒ³ä¸€ä¸‹æˆ‘ç»å†çš„å„ç§é¡¹ç›®ï¼Œä¼¼ä¹ç¡®å®å¦‚æ­¤ã€‚ç”¨æˆ·æˆ–è€…äº§å“ç»ç†çš„éœ€æ±‚é›¶é›¶æ•£æ•£ï¼Œä¸æ–­å˜æ›´ã€‚å·¥ç¨‹å¸ˆåœ¨å„å¤„ä»£ç ä¸­å¯»æ‰¾å¯ä»¥å®ç°è¿™äº›éœ€æ±‚å˜æ›´çš„ä»£ç ï¼Œä¿®ä¿®è¡¥è¡¥ã€‚è½¯ä»¶åªæœ‰éœ€æ±‚åˆ†æï¼Œå¹¶æ²¡æœ‰çœŸæ­£çš„è®¾è®¡ï¼Œç³»ç»Ÿæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„é¢†åŸŸæ¨¡å‹ç»´æŒå…¶å†…åœ¨çš„é€»è¾‘ä¸€è‡´æ€§ã€‚åŠŸèƒ½ç‰¹æ€§å¹¶ä¸æ˜¯æŒ‰ç…§é¢†åŸŸæ¨¡å‹å†…åœ¨çš„é€»è¾‘è®¾è®¡ï¼Œè€Œæ˜¯æŒ‰ç…§å„è‰²äººç­‰è‡ªå·±çš„ä¸»è§‚æƒ³è±¡è®¾è®¡ã€‚é¡¹ç›®æ—¶é—´ä¸€é•¿ï¼Œå„ç§å›°éš¾é‡é‡ï¼Œéœ€æ±‚ä¸æ–­å»¶æœŸï¼Œçº¿ä¸Šbugä¸æ–­ï¼Œç®¡ç†è€…è€ƒè™‘æ˜¯ä¸æ˜¯è¦æ¨åˆ°é‡æ¥ï¼Œè€Œç¨‹åºå‘˜åˆ™è€ƒè™‘æ˜¯ä¸æ˜¯è¦è·‘è·¯ã€‚</p><!-- [[[read_end]]] --><h2>é¢†åŸŸæ¨¡å‹æ¨¡å¼</h2><p>ç›®å‰ä¼ä¸šçº§åº”ç”¨å¼€å‘ä¸­ï¼Œä¸šåŠ¡é€»è¾‘çš„ç»„ç»‡æ–¹å¼ä¸»è¦æ˜¯<strong>äº‹åŠ¡è„šæœ¬</strong>æ¨¡å¼ã€‚äº‹åŠ¡è„šæœ¬æŒ‰ç…§ä¸šåŠ¡å¤„ç†çš„è¿‡ç¨‹ç»„ç»‡ä¸šåŠ¡é€»è¾‘ï¼Œæ¯ä¸ªè¿‡ç¨‹å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„å•ä¸ªè¯·æ±‚ã€‚å®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚éƒ½åŒ…å«äº†ä¸€å®šçš„ä¸šåŠ¡å¤„ç†é€»è¾‘ï¼Œè€Œç¨‹åºåˆ™æŒ‰ç…§æ¯æ¬¡è¯·æ±‚çš„ä¸šåŠ¡é€»è¾‘è¿›è¡Œåˆ’åˆ†ã€‚</p><p>äº‹åŠ¡è„šæœ¬æ¨¡å¼å…¸å‹çš„å°±æ˜¯Controllerâ†’Serviceâ†’Daoè¿™æ ·çš„ç¨‹åºè®¾è®¡æ¨¡å¼ã€‚Controllerå°è£…ç”¨æˆ·è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°æ„é€ ä¸€äº›æ•°æ®å¯¹è±¡è°ƒç”¨Serviceï¼ŒServiceé‡Œé¢åŒ…å«å¤§é‡çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œå®Œæˆå¯¹æ•°æ®çš„å¤„ç†ï¼ŒæœŸé—´å¯èƒ½éœ€è¦é€šè¿‡Daoä»æ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œæˆ–è€…å°†æ•°æ®å†™å…¥æ•°æ®åº“ä¸­ã€‚</p><p>æ¯”å¦‚è¿™æ ·ä¸€ä¸ªä¸šåŠ¡åœºæ™¯ï¼šæ¯ä¸ªé”€å”®åˆåŒéƒ½åŒ…å«ä¸€ä¸ªäº§å“ï¼Œæ ¹æ®é”€å”®çš„ä¸åŒäº§å“ç±»å‹è®¡ç®—æ”¶å…¥ï¼Œå½“ç”¨æˆ·æ”¯ä»˜çš„æ—¶å€™ï¼Œéœ€è¦è®¡ç®—åˆåŒæ”¶å…¥ã€‚</p><p>æŒ‰ç…§äº‹åŠ¡è„šæœ¬æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç›®å‰ä¹ æƒ¯çš„æ–¹æ³•ï¼Œç¨‹åºè®¾è®¡å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0f/20/0f207cfe38ec0bf2fed2a6e7a6517620.png?wh=1050*516\" alt=\"\"></p><p>ç”¨æˆ·å‘èµ·è¯·æ±‚åˆ°Controllerï¼ŒControllerè°ƒç”¨Serviceçš„calculateRecognitionæ–¹æ³•ï¼Œå¹¶å°†åˆåŒIDä¼ é€’è¿‡å»è®¡ç®—ç¡®è®¤æ”¶å…¥ã€‚Serviceæ ¹æ®åˆåŒIDè°ƒç”¨DaoæŸ¥æ‰¾åˆåŒä¿¡æ¯ï¼Œæ ¹æ®åˆåŒè·å¾—äº§å“ç±»å‹ï¼Œå†æ ¹æ®äº§å“ç±»å‹è®¡ç®—æ”¶å…¥ï¼Œç„¶åæŠŠç¡®è®¤æ”¶å…¥ä¿å­˜åˆ°æ•°æ®åº“ã€‚</p><p>è¿™é‡Œä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜åœ¨äºï¼Œä¸åŒäº§å“ç±»å‹æ”¶å…¥çš„è®¡ç®—æ–¹æ³•ä¸åŒï¼Œå¦‚æœä¿®æ”¹è®¡ç®—æ–¹æ³•ï¼Œæˆ–è€…å¢åŠ æ–°çš„äº§å“ç±»å‹ï¼Œéƒ½éœ€è¦ä¿®æ”¹è¿™ä¸ªServiceç±»ï¼Œéšç€ä¸šåŠ¡ä¸æ–­å¤æ‚ï¼Œè¿™ä¸ªç±»ä¼šå˜å¾—è¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚</p><p>åœ¨è¿™é‡Œï¼ŒServiceåªæ˜¯ç”¨æ¥æ”¾æ”¶å…¥è®¡ç®—æ–¹æ³•çš„ä¸€ä¸ªç±»ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆè®¾è®¡çš„çº¦æŸã€‚å¦‚æœæœ‰ä¸€å¤©ï¼Œå¦ä¸€ä¸ªå®¢æˆ·ç«¯éœ€è¦è®¡ç®—å¦ä¸€ç§äº§å“ç±»å‹æ”¶å…¥ï¼Œå¾ˆå¤§å¯èƒ½ä¼šé‡æ–°å†™ä¸€ä¸ªServiceã€‚äºæ˜¯ï¼Œç›¸åŒçš„ä¸šåŠ¡åœ¨ä¸åŒçš„åœ°æ–¹ç»´æŠ¤ï¼Œäº‹æƒ…å˜å¾—æ›´åŠ å¤æ‚ã€‚</p><p>ç”±äºäº‹åŠ¡è„šæœ¬æ¨¡å¼ä¸­ï¼ŒServiceã€Daoè¿™äº›å¯¹è±¡åªæœ‰æ–¹æ³•ï¼Œæ²¡æœ‰æ•°å€¼æˆå‘˜å˜é‡ï¼Œè€Œæ–¹æ³•è°ƒç”¨æ—¶ä¼ é€’çš„æ•°å€¼å¯¹è±¡æ²¡æœ‰æ–¹æ³•ï¼ˆæˆ–è€…åªæœ‰ä¸€äº›getterã€setteræ–¹æ³•ï¼‰ï¼Œå› æ­¤äº‹åŠ¡è„šæœ¬åˆè¢«ç§°ä½œ<strong>è´«è¡€æ¨¡å‹</strong>ã€‚</p><p><strong>é¢†åŸŸæ¨¡å‹</strong>æ¨¡å¼å’Œäº‹åŠ¡è„šæœ¬æ¨¡å¼ä¸åŒã€‚åœ¨é¢†åŸŸæ¨¡å‹æ¨¡å¼ä¸‹ï¼Œä¸šåŠ¡é€»è¾‘å›´ç»•é¢†åŸŸæ¨¡å‹è®¾è®¡ã€‚æ¯”å¦‚æ”¶å…¥ç¡®è®¤æ˜¯å’ŒåˆåŒå¼ºç›¸å…³çš„ï¼Œæ˜¯åˆåŒå¯¹è±¡çš„ä¸€ä¸ªèŒè´£ï¼Œé‚£ä¹ˆåˆåŒå¯¹è±¡å°±åº”è¯¥æä¾›ä¸€ä¸ªcalculateRecognitionæ–¹æ³•è®¡ç®—æ”¶å…¥ã€‚</p><p>é¢†åŸŸæ¨¡å‹ä¸­çš„å¯¹è±¡å’Œäº‹åŠ¡è„šæœ¬ä¸­çš„å¯¹è±¡æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œæ¯”å¦‚äº‹åŠ¡è„šæœ¬ä¸­ä¹Ÿæœ‰åˆåŒContractè¿™ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªContractåªåŒ…å«åˆåŒçš„æ•°æ®ä¿¡æ¯ï¼Œä¸åŒ…å«å’ŒåˆåŒæœ‰å…³çš„è®¡ç®—é€»è¾‘ï¼Œè®¡ç®—é€»è¾‘åœ¨Serviceç±»é‡Œã€‚</p><p>è€Œé¢†åŸŸæ¨¡å‹çš„å¯¹è±¡åˆ™åŒ…å«äº†å¯¹è±¡çš„æ•°æ®å’Œè®¡ç®—é€»è¾‘ï¼Œæ¯”å¦‚åˆåŒå¯¹è±¡ï¼Œæ—¢åŒ…å«åˆåŒæ•°æ®ï¼Œä¹ŸåŒ…å«åˆåŒç›¸å…³çš„è®¡ç®—ã€‚å› æ­¤ä»é¢å‘å¯¹è±¡çš„è§’åº¦çœ‹ï¼Œé¢†åŸŸæ¨¡å‹æ‰æ˜¯çœŸæ­£çš„é¢å‘å¯¹è±¡ã€‚å¦‚æœç”¨é¢†åŸŸæ¨¡å‹è®¾è®¡ä¸Šé¢çš„åˆåŒæ”¶å…¥ç¡®è®¤ï¼Œæ˜¯è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/00/76/00974ec0e16cb4fa0045303162b95076.png?wh=1798*582\" alt=\"\"></p><p>è®¡ç®—æ”¶å…¥çš„è¯·æ±‚ç›´æ¥æäº¤ç»™åˆåŒå¯¹è±¡Contractï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±æ— éœ€ä¼ é€’åˆåŒIDï¼Œå› ä¸ºè¯·æ±‚çš„åˆåŒå¯¹è±¡å°±æ˜¯è¿™ä¸ªIDçš„å¯¹è±¡ã€‚åˆåŒå¯¹è±¡èšåˆäº†ä¸€ä¸ªäº§å“å¯¹Productï¼Œå¹¶è°ƒç”¨è¿™ä¸ªproductçš„calculateRecognitionæ–¹æ³•ï¼ŒæŠŠåˆåŒå¯¹è±¡ä¼ é€’è¿‡å»ã€‚ä¸åŒäº§å“å…³è”ä¸åŒçš„æ”¶å…¥ç¡®è®¤ç­–ç•¥recognitionStrategyï¼Œè°ƒç”¨recognitionStrategyçš„calculateRecognitionï¼Œå®Œæˆæ”¶å…¥å¯¹è±¡revenueRecognitionçš„åˆ›å»ºï¼Œä¹Ÿå°±å®Œæˆäº†æ”¶å…¥è®¡ç®—ã€‚</p><p>è¿™é‡ŒContractå’ŒProductéƒ½æ˜¯é¢†åŸŸæ¨¡å‹å¯¹è±¡ï¼Œ<strong>é¢†åŸŸæ¨¡å‹æ˜¯åˆå¹¶äº†è¡Œä¸ºå’Œæ•°æ®çš„é¢†åŸŸçš„å¯¹è±¡æ¨¡å‹</strong>ã€‚é€šè¿‡é¢†åŸŸæ¨¡å‹å¯¹è±¡çš„äº¤äº’å®Œæˆä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè®¾è®¡å¥½äº†é¢†åŸŸæ¨¡å‹å¯¹è±¡ï¼Œä¹Ÿå°±è®¾è®¡å¥½äº†ä¸šåŠ¡é€»è¾‘å®ç°ã€‚å’Œäº‹åŠ¡è„šæœ¬è¢«ç§°ä½œè´«è¡€æ¨¡å‹ç›¸å¯¹åº”çš„ï¼Œé¢†åŸŸæ¨¡å‹ä¹Ÿè¢«ç§°ä¸ºå……è¡€æ¨¡å‹ã€‚</p><p>å¯¹äºå¤æ‚çš„ä¸šåŠ¡é€»è¾‘å®ç°æ¥è¯´ï¼Œç”¨é¢†åŸŸæ¨¡å‹æ¨¡å¼æ›´æœ‰ä¼˜åŠ¿ã€‚ç‰¹åˆ«æ˜¯åœ¨æŒç»­çš„éœ€æ±‚å˜æ›´å’Œä¸šåŠ¡è¿­ä»£è¿‡ç¨‹ä¸­ï¼ŒæŠŠæ¡å¥½é¢†åŸŸæ¨¡å‹ï¼Œå¯¹ä¸šåŠ¡é€»è¾‘æœ¬èº«ä¹Ÿä¼šæœ‰æ›´æ¸…æ™°çš„è®¤è¯†ã€‚ä½¿ç”¨é¢†åŸŸæ¨¡å‹å¢åŠ æ–°çš„äº§å“ç±»å‹çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„ä»£ç ï¼Œåªéœ€è¦æ‰©å±•æ–°çš„äº§å“ç±»å’Œæ”¶å…¥ç­–ç•¥ç±»å°±å¯ä»¥äº†ã€‚</p><p>åœ¨éœ€æ±‚å˜æ›´è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªéœ€æ±‚å’Œé¢†åŸŸæ¨¡å‹æœ‰å†²çªï¼Œå’Œæ¨¡å‹çš„å®šä¹‰ä»¥åŠæ¨¡å‹é—´çš„äº¤äº’é€»è¾‘ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½è¿™ä¸ªéœ€æ±‚æœ¬èº«å°±æ˜¯ä¼ªéœ€æ±‚ã€‚å¾ˆå¤šçœ‹ä¼¼åˆç†çš„éœ€æ±‚å…¶å®å’Œä¸šåŠ¡çš„å†…åœ¨é€»è¾‘æ˜¯æœ‰å†²çªçš„ï¼Œè¿™æ ·çš„éœ€æ±‚ä¹Ÿä¸ä¼šå¸¦æ¥ä¸šåŠ¡çš„ä»·å€¼ï¼Œé€šè¿‡é¢†åŸŸæ¨¡å‹åˆ†æï¼Œå¯ä»¥è¯†åˆ«å‡ºè¿™æ ·çš„ä¼ªéœ€æ±‚ï¼Œä½¿ç³»ç»Ÿæ›´å¥½åœ°ä¿æŒä¸€è‡´æ€§ï¼Œä¹Ÿå¯ä»¥ä½¿å¼€å‘èµ„æºæŠ•å…¥åˆ°æ›´æœ‰ä»·å€¼çš„åœ°æ–¹å»ã€‚</p><h2>é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰</h2><p>å‰é¢æˆ‘è®²åˆ°é¢†åŸŸæ¨¡å‹æ¨¡å¼ï¼Œé‚£ä¹ˆå¦‚ä½•ç”¨é¢†åŸŸæ¨¡å‹æ¨¡å¼è®¾è®¡ä¸€ä¸ªå®Œæ•´è€Œå¤æ‚çš„ç³»ç»Ÿï¼Œæœ‰æ²¡æœ‰å®Œæ•´çš„æ–¹æ³•å’Œè¿‡ç¨‹æŒ‡å¯¼æ•´ä¸ªç³»ç»Ÿçš„è®¾è®¡ï¼Ÿé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Œå³DDDå°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸€é—®é¢˜çš„ã€‚</p><p><strong>é¢†åŸŸ</strong>æ˜¯ä¸€ä¸ªç»„ç»‡æ‰€åšçš„äº‹æƒ…ä»¥åŠå…¶åŒ…å«çš„ä¸€åˆ‡ï¼Œé€šä¿—åœ°è¯´ï¼Œå°±æ˜¯ç»„ç»‡çš„ä¸šåŠ¡èŒƒå›´å’Œåšäº‹æ–¹å¼ï¼Œä¹Ÿæ˜¯è½¯ä»¶å¼€å‘çš„ç›®æ ‡èŒƒå›´ã€‚æ¯”å¦‚å¯¹äºæ·˜å®è¿™æ ·ä¸€ä¸ªä»¥ç”µå­å•†åŠ¡ä¸ºä¸»è¦ä¸šåŠ¡çš„ç»„ç»‡ï¼ŒC2Cç”µå­å•†åŠ¡å°±æ˜¯å®ƒçš„é¢†åŸŸã€‚<strong>é¢†åŸŸé©±åŠ¨è®¾è®¡å°±æ˜¯ä»é¢†åŸŸå‡ºå‘ï¼Œåˆ†æé¢†åŸŸå†…æ¨¡å‹åŠå…¶å…³ç³»ï¼Œè¿›è€Œè®¾è®¡è½¯ä»¶ç³»ç»Ÿçš„æ–¹æ³•ã€‚</strong></p><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¯´è¦å¯¹C2Cç”µå­å•†åŠ¡è¿™ä¸ªé¢†åŸŸè¿›è¡Œå»ºæ¨¡è®¾è®¡ï¼Œé‚£ä¹ˆè¿™ä¸ªèŒƒå›´å°±å¤ªå¤§äº†ï¼Œä¸çŸ¥é“è¯¥å¦‚ä½•ä¸‹æ‰‹ã€‚æ‰€ä»¥é€šå¸¸çš„åšæ³•æ˜¯æŠŠæ•´ä¸ªé¢†åŸŸæ‹†åˆ†æˆå¤šä¸ª<strong>å­åŸŸ</strong>ï¼Œæ¯”å¦‚ç”¨æˆ·ã€å•†å“ã€è®¢å•ã€åº“å­˜ã€ç‰©æµã€å‘ç¥¨ç­‰ã€‚å¼ºç›¸å…³çš„å¤šä¸ªå­åŸŸç»„æˆä¸€ä¸ª<strong>é™ç•Œä¸Šä¸‹æ–‡</strong>ï¼Œé™ç•Œä¸Šä¸‹æ–‡æ˜¯å¯¹ä¸šåŠ¡é¢†åŸŸèŒƒå›´çš„æè¿°ï¼Œå¯¹äºç³»ç»Ÿå®ç°è€Œè¨€ï¼Œå¯ä»¥æƒ³è±¡æˆç›¸å½“äºæ˜¯ä¸€ä¸ªå­ç³»ç»Ÿæˆ–è€…æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚é™ç•Œä¸Šä¸‹æ–‡å’Œå­åŸŸå…±åŒç»„æˆç»„ç»‡çš„é¢†åŸŸï¼Œå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/fc/1a/fc05b9e59b857be7eb79fd42d7b4741a.jpg?wh=1280*917\" alt=\"\" title=\"å›¾ç‰‡æºè‡ªç½‘ç»œ\"></p><p>ä¸åŒçš„é™ç•Œä¸Šä¸‹æ–‡ï¼Œä¹Ÿå°±æ˜¯ä¸åŒçš„å­ç³»ç»Ÿæˆ–è€…æ¨¡å—ä¹‹é—´ä¼šæœ‰å„ç§çš„äº¤äº’åˆä½œã€‚å¦‚ä½•è®¾è®¡è¿™äº›äº¤äº’åˆä½œå‘¢ï¼ŸDDDä½¿ç”¨<strong>ä¸Šä¸‹æ–‡æ˜ å°„å›¾</strong>æ¥å®Œæˆï¼Œå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/bb/0a802030bd21f0234fe0814a8f4c3fbb.png?wh=722*372\" alt=\"\"></p><p>åœ¨DDDä¸­ï¼Œé¢†åŸŸæ¨¡å‹å¯¹è±¡ä¹Ÿè¢«ç§°ä¸º<strong>å®ä½“</strong>ï¼Œæ¯ä¸ªå®ä½“éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå…·æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œä¸€ä¸ªè®¢å•å¯¹è±¡æ˜¯ä¸€ä¸ªå®ä½“ï¼Œä¸€ä¸ªäº§å“å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªå®ä½“ï¼Œè®¢å•IDæˆ–è€…äº§å“IDæ˜¯å®ƒä»¬çš„å”¯ä¸€æ ‡è¯†ã€‚å®ä½“å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚è®¢å•çš„çŠ¶æ€ä¼šå˜åŒ–ï¼Œä½†æ˜¯å®ƒä»¬çš„å”¯ä¸€æ ‡è¯†ä¸ä¼šå˜åŒ–ã€‚</p><p><strong>å®ä½“è®¾è®¡</strong>æ˜¯DDDçš„æ ¸å¿ƒæ‰€åœ¨ï¼Œé¦–å…ˆé€šè¿‡ä¸šåŠ¡åˆ†æï¼Œè¯†åˆ«å‡ºå®ä½“å¯¹è±¡ï¼Œç„¶åé€šè¿‡ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘è®¾è®¡å®ä½“çš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™é‡Œæœ€é‡è¦çš„ï¼Œæ˜¯è¦æŠŠæ¡ä½å®ä½“çš„ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Œå®ä½“åº”è¯¥æ‰¿æ‹…ä»€ä¹ˆèŒè´£ï¼Œä¸åº”è¯¥æ‰¿æ‹…ä»€ä¹ˆèŒè´£ï¼Œåˆ†æçš„æ—¶å€™è¦æ”¾åœ¨ä¸šåŠ¡åœºæ™¯å’Œé™ç•Œä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œä¸æ˜¯æƒ³å½“ç„¶åœ°è®¤ä¸ºè¿™æ ·çš„å®ä½“å°±åº”è¯¥æ‰¿æ‹…è¿™æ ·çš„è§’è‰²ã€‚</p><p>äº‹å®ä¸Šï¼Œå¹¶ä¸æ˜¯é¢†åŸŸå†…çš„å¯¹è±¡éƒ½åº”è¯¥è¢«è®¾è®¡ä¸ºå®ä½“ï¼ŒDDDæ¨èå°½å¯èƒ½å°†å¯¹è±¡è®¾è®¡ä¸º<strong>å€¼å¯¹è±¡</strong>ã€‚æ¯”å¦‚åƒä½å€è¿™æ ·çš„å¯¹è±¡å°±æ˜¯å…¸å‹çš„å€¼å¯¹è±¡ï¼Œä¹Ÿè®¸å»ºåœ¨ä½å€ä¸Šçš„æˆ¿å­å¯ä»¥è¢«å½“åšä¸€ä¸ªå®ä½“ï¼Œä½†æ˜¯ä½å€ä»…ä»…æ˜¯å¯¹æˆ¿å­çš„ä¸€ä¸ªæè¿°ï¼Œåƒè¿™æ ·ä»…ä»…ç”¨æ¥åšåº¦é‡æˆ–æè¿°çš„å¯¹è±¡åº”è¯¥è¢«è®¾è®¡ä¸ºå€¼å¯¹è±¡ã€‚</p><p>å€¼å¯¹è±¡çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ä¸å˜æ€§ï¼Œä¸€ä¸ªå€¼å¯¹è±¡åˆ›å»ºä»¥åå°±ä¸èƒ½å†æ”¹å˜äº†ã€‚å¦‚æœåœ°å€æ”¹å˜äº†ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªæ–°åœ°å€ï¼Œè€Œä¸€ä¸ªè®¢å•å®ä½“åˆ™å¯èƒ½ä¼šç»å†åˆ›å»ºã€å¾…æ”¯ä»˜ã€å·²æ”¯ä»˜ã€ä»£å‘è´§ã€å·²å‘è´§ã€å¾…ç­¾æ”¶ã€å¾…è¯„ä»·ç­‰å„ç§å˜åŒ–ã€‚</p><p>é¢†åŸŸå®ä½“å’Œé™ç•Œä¸Šä¸‹æ–‡åŒ…å«äº†ä¸šåŠ¡çš„ä¸»è¦é€»è¾‘ï¼Œä½†æ˜¯æœ€ç»ˆå¦‚ä½•æ„å»ºä¸€ä¸ªç³»ç»Ÿï¼Œå¦‚ä½•å°†é¢†åŸŸå®ä½“å¯¹å¤–æš´éœ²ï¼Œå¼€å‘å‡ºä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿã€‚äº‹å®ä¸Šï¼ŒDDDæ”¯æŒå„ç§æ¶æ„æ–¹æ¡ˆï¼Œæ¯”å¦‚å…¸å‹çš„<strong>åˆ†å±‚æ¶æ„</strong>ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/1c/0a2b32ee054a0c9bcc202c6f7c043c1c.png?wh=306*372\" alt=\"\"></p><p>é¢†åŸŸå®ä½“è¢«æ”¾ç½®åœ¨é¢†åŸŸå±‚ï¼Œé€šè¿‡åº”ç”¨å±‚å¯¹é¢†åŸŸå®ä½“è¿›è¡ŒåŒ…è£…ï¼Œæœ€ç»ˆæä¾›ä¸€ç»„è®¿é—®æ¥å£ï¼Œé€šè¿‡æ¥å£å±‚å¯¹å¤–å¼€æ”¾ã€‚</p><p><strong>å…­è¾¹å½¢æ¶æ„</strong>æ˜¯DDDä¸­æ¯”è¾ƒçŸ¥åçš„ä¸€ç§æ¶æ„æ–¹å¼ï¼Œé¢†åŸŸæ¨¡å‹é€šè¿‡åº”ç”¨ç¨‹åºå°è£…æˆä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒç‹¬ç«‹çš„æ¨¡å—ï¼Œè€Œä¸åŒçš„å¤–éƒ¨ç³»ç»Ÿåˆ™é€šè¿‡ä¸åŒçš„é€‚é…å™¨å’Œé¢†åŸŸæ¨¡å‹äº¤äº’ï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡HTTPæ¥å£è®¿é—®é¢†åŸŸæ¨¡å‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Web Serviceæˆ–è€…æ¶ˆæ¯é˜Ÿåˆ—è®¿é—®é¢†åŸŸæ¨¡å‹ï¼Œåªéœ€è¦ä¸ºè¿™äº›ä¸åŒçš„è®¿é—®æ¥å£æä¾›ä¸åŒçš„é€‚é…å™¨å°±å¯ä»¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e4/0d/e4506951ed15f90bd4c61c8fe58ef40d.png?wh=1116*732\" alt=\"\"></p><p>é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æŠ€æœ¯ä½“ç³»å†…è¿˜æœ‰å…¶ä»–ä¸€äº›æ–¹æ³•å’Œæ¦‚å¿µï¼Œä½†æ˜¯æœ€æ ¸å¿ƒçš„è¿˜æ˜¯é¢†åŸŸæ¨¡å‹æœ¬èº«ï¼Œ<strong>é€šè¿‡é¢†åŸŸå®ä½“åŠå…¶äº¤äº’å®Œæˆä¸šåŠ¡é€»è¾‘å¤„ç†æ‰æ˜¯DDDçš„æ ¸å¿ƒç›®æ ‡</strong>ã€‚è‡³äºæ˜¯ä¸æ˜¯ç”¨äº†CQRSï¼Œæ˜¯ä¸æ˜¯äº‹ä»¶é©±åŠ¨ï¼Œæœ‰æ²¡æœ‰äº‹ä»¶æº¯æºï¼Œå¹¶ä¸æ˜¯DDDçš„æ ¸å¿ƒã€‚</p><h2>å°ç»“</h2><p>å›åˆ°æˆ‘ä»¬çš„é¢˜ç›®ï¼Œä¸€ä¸ª35å²çš„ç¨‹åºå‘˜åº”è¯¥å†™ä»€ä¹ˆæ ·çš„ä»£ç ï¼Ÿå¦‚æœä¸€ä¸ªå·¥ä½œåå¤šå¹´çš„ç¨‹åºå‘˜ï¼Œè¿˜æ˜¯ä»…ä»…å†™ä¸€äº›è·Ÿä»–å·¥ä½œç¬¬ä¸€å¹´å·®ä¸å¤šçš„CRUDä»£ç ã€‚é‚£ä¹ˆä»–è¿Ÿæ—©ä¼šé‡åˆ°è‡ªå·±çš„èŒä¸šå±æœºã€‚å…¬å¸å¿…ç„¶æ„¿æ„ç”¨æ›´å¹´è½»ã€æ›´åŠªåŠ›ï¼Œå½“ç„¶ä¹Ÿæ›´ä½è–ªæ°´çš„ç¨‹åºå‘˜æ¥ä»£æ›¿ä»–ã€‚è‡³äºå­¦ä¹ æ–°æŠ€æœ¯çš„èƒ½åŠ›ï¼Œå…¶å®å¤šå¹´å·¥ä½œç»éªŒä¹Ÿå¹¶æ²¡æœ‰å¤ªå¤šå¸®åŠ©ï¼Œæœ‰æ—¶å€™ä¹Ÿè®¸è¿˜æ˜¯åŠ£åŠ¿ã€‚</p><p>åœ¨æˆ‘çœ‹æ¥ï¼Œ35å²çš„ç¨‹åºå‘˜çœŸæ­£æœ‰ä¼˜åŠ¿çš„æ˜¯ä»–åœ¨ä¸€ä¸ªä¸šåŠ¡é¢†åŸŸçš„å¤šå¹´ç§¯æ·€ï¼Œå¯¹ä¸šåŠ¡é¢†åŸŸæœ‰æ›´æ·±åˆ»çš„ç†è§£å’Œè®¤çŸ¥ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•å°†è¿™äº›ä¸šåŠ¡æ²‰æ·€å’Œç†è§£åæ˜ åˆ°å·¥ä½œä¸­ï¼Œä½“ç°åœ¨ä»£ç ä¸­å‘¢ï¼Ÿä¹Ÿè®¸å¯ä»¥å°è¯•æ¢ç´¢é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‚å¦‚æœä¸€ä¸ªäººæœ‰å¤šå¹´çš„é¢†åŸŸç»éªŒï¼Œé‚£ä¹ˆå¿…ç„¶å¯¹é¢†åŸŸæ¨¡å‹è®¾è®¡æœ‰æ›´æ·±åˆ»çš„è®¤è¯†ï¼ŒæŠŠæ¡å¥½é¢†åŸŸæ¨¡å‹åœ¨ä¸æ–­çš„éœ€æ±‚å˜æ›´ä¸­çš„æ¼”è¿›ï¼Œä½¿ç³»ç»Ÿç»´æŒæ›´å¥½çš„æ´»åŠ›ï¼Œå¹¶å› æ­¤ä½“ç°è‡ªå·±çœŸæ­£çš„ä»·å€¼ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä½ è§‰å¾—å¤§é¾„ç¨‹åºå‘˜çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åœ¨å…¬å¸ä¿æŒè‡ªå·±çš„ä¼˜åŠ¿å’Œåœ°ä½ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„æ€è€ƒï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p>","neighbors":{"left":{"article_title":"19 | ç»„ä»¶è®¾è®¡åŸåˆ™ï¼šç»„ä»¶çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿ","id":185043},"right":{"article_title":"ç­”ç–‘ä¸¨å¯¹äºè®¾è®¡æ¨¡å¼è€Œè¨€ï¼Œåœºæ™¯åˆ°åº•æœ‰å¤šé‡è¦ï¼Ÿ","id":186504}},"comments":[{"had_liked":false,"id":170898,"user_name":"leon","can_delete":false,"product_type":"c1","uid":1217955,"ip_address":"","ucode":"97610F35D2543A","user_header":"https://static001.geekbang.org/account/avatar/00/12/95/a3/0a3cde60.jpg","comment_is_top":false,"comment_ctime":1578753266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"216327118066","product_id":100040201,"comment_content":"å…¬å¸æ˜¯ä¸éœ€è¦ç¨‹åºå‘˜çš„ï¼Œå…¬å¸åªéœ€è¦èƒ½åˆ›é€ ä»·å€¼çš„äººã€‚å¤§é¾„ç¨‹åºå‘˜çš„ä¼˜åŠ¿æ˜¯ä»–ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç¨‹åºå‘˜äº†ï¼Œä»–æ›´æ˜¯åœ¨æŸä¸€ä¸šåŠ¡ã€æŸä¸€é¢†åŸŸå†…çš„é¢†åŸŸä¸“å®¶ï¼Œè€Œä¸”çŸ¥é“å¦‚ä½•ç”¨æŠ€æœ¯å»è§£å†³å®é™…é—®é¢˜ï¼Œåˆ›é€ ä»·å€¼ã€‚","like_count":51},{"had_liked":false,"id":169169,"user_name":"ææ€ªè€…ğŸ˜˜ ğŸ˜’ ğŸ˜ ğŸ‘¿","can_delete":false,"product_type":"c1","uid":1300678,"ip_address":"","ucode":"40DFF5D3E3B24C","user_header":"https://static001.geekbang.org/account/avatar/00/13/d8/c6/2b2a58cf.jpg","comment_is_top":false,"comment_ctime":1578283194,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"83182661818","product_id":100040201,"comment_content":"è€å¸ˆå¯ä»¥æä¾›ä¸€ä¸‹é¢†åŸŸæ¨¡å‹çš„ä¾‹å­å—ï¼Œå…‰çœ‹è¿™ä¸ªæœ‰ç‚¹ä¸æ‡‚","like_count":19,"discussions":[{"author":{"id":1088710,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/c6/05a6798f.jpg","nickname":"è‹—","note":"","ucode":"5ECCC6C855E541","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296234,"discussion_content":"å¯ä»¥å‚è€ƒDDDçš„ä¸“æ ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596476524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169828,"user_name":"Zend","can_delete":false,"product_type":"c1","uid":1053921,"ip_address":"","ucode":"80EBB0B6772E27","user_header":"https://static001.geekbang.org/account/avatar/00/10/14/e1/ee5705a2.jpg","comment_is_top":false,"comment_ctime":1578453292,"is_pvip":false,"replies":[{"id":"65988","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ææ™ºæ…§","uid":"1007349","ctime":1578531925,"ip_address":"","comment_id":169828,"utype":1}],"discussion_count":2,"race_medal":0,"score":"78887864620","product_id":100040201,"comment_content":"è®°å¾—åœ¨è€å¸ˆçš„ä¸€ç¯‡æ–‡ç« ä¸­è¯´å¥½çš„ç¨‹åºå‘˜çš„å·¥ä½œæ•ˆç‡æ˜¯ä¸€èˆ¬ç¨‹åºå‘˜çš„10å€ç”šè‡³æ›´å¤šã€‚å¥½çš„ç¨‹åºå‘˜ä¸ä»…ä»£ç å†™çš„æ¼‚äº®ï¼Œå¯ç»´æŠ¤æ€§å¼º ï¼Œé¢å¯¹éœ€æ±‚å˜åŠ¨æ—¶èƒ½æ›´ä»å®¹é¢å¯¹ã€‚é‚£å¦‚ä½•åšä¸€ä¸ªå¥½çš„ç¨‹åºå‘˜ æˆ‘æƒ³å¯¹é¢†åŸŸçš„ç†è§£ï¼Œå¯¹éœ€æ±‚çš„ç†è§£ ï¼Œå…·æœ‰ä¸€å®šçš„å‰ç»æ€§æ€è€ƒï¼Œé€‚æ—¶æå‡ºè‡ªå·±çš„å»ºè®¾æ€§å»ºè®®ï¼Œé€šè¿‡ä»£ç è®©å…¬å¸çš„ä¸šåŠ¡ç³»ç»Ÿå¯æŒç»­å‘å±•ï¼Œæ¨åŠ¨å…¬å¸ä¸šåŠ¡çš„å¢é•¿ã€‚","like_count":18,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480736,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578531925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2033730,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/08/42/b14f3a32.jpg","nickname":"Geek_2ecc5d","note":"","ucode":"4B6D777B754A80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287044,"discussion_content":"ç»™ä½ å¤šå°‘é’±ï¼Œä½ è€ƒè™‘çš„æ¯”é©¬äº‘è¿˜ç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593353242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172200,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1579130937,"is_pvip":false,"replies":[{"id":"66809","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ææ™ºæ…§","uid":"1007349","ctime":1579137331,"ip_address":"","comment_id":172200,"utype":1}],"discussion_count":2,"race_medal":0,"score":"66003640377","product_id":100040201,"comment_content":"äº‹åŠ¡è„šæœ¬æ¨¡å¼çš„ç‰¹ç‚¹åœ¨äºçŠ¶æ€éƒ½åœ¨æ•°æ®åº“é‡Œï¼Œä¸šåŠ¡é€»è¾‘åœ¨serviceå±‚ï¼Œä¸šåŠ¡é€»è¾‘ä¸çŠ¶æ€å®Œå…¨åˆ†ç¦»ã€‚<br>é¢†åŸŸå¯¹è±¡æ¨¡å‹ï¼Œç‰¹ç‚¹æ˜¯èšåˆçŠ¶æ€å’Œæ“ä½œï¼Œæä¾›ç›¸å¯¹ç‹¬ç«‹çš„æ¨¡å—å’Œç±»ã€‚é¢†åŸŸçš„æ¨¡å‹çš„å¯¹è±¡ä¹‹ä¸€æ˜¯å®ä½“ï¼Œæœ‰å”¯ä¸€æ ‡è¯†ï¼Œå®ä½“è¢«é”€æ¯å‰æ ‡è¯†ä¸å˜ï¼Œèƒ½é€šè¿‡æ ‡è¯†è·å¾—ï¼Œå®ä½“çš„çŠ¶æ€ä¼šå˜åŒ–ã€‚é¢†åŸŸçš„å¦å¤–ä¸€ç§å¯¹è±¡æ˜¯å€¼å¯¹è±¡ï¼ŒçŠ¶æ€åœ¨ç”Ÿå‘½å‘¨æœŸå†…ä¸å˜ï¼Œå› è€Œæ›´ç®€å•ã€‚é¢†åŸŸå¯¹è±¡å› ä¸ºæœ‰çŠ¶æ€å¯ä»¥è¡¨è¾¾æ›´ä¸ºä¸°å¯Œçš„å…³ç³»ã€‚ä½†æ˜¯è®¾è®¡å¥½çš„é¢†åŸŸå¯¹è±¡ä¾é çš„ä¸»è¦ä¸æ˜¯æŠ€æœ¯è€Œæ˜¯å¯¹ä¸šåŠ¡çš„ç†è§£ã€‚å¤§é¾„ç¨‹åºå‘˜é€‰æ‹©çš„ä¸šåŠ¡é¢†åŸŸçš„ä½™åœ°è¿˜æ˜¯è¶Šæ¥è¶Šå°çš„ï¼Œå¯èƒ½äººè€äº†å°±æ˜¯è¿™æ ·ã€‚<br>","like_count":15,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481661,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579137331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177931,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f9/4b/5532c234.jpg","nickname":"Messi","note":"","ucode":"04302B9E7F1D75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215889,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585394985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169724,"user_name":"å±±çŒ«","can_delete":false,"product_type":"c1","uid":1466682,"ip_address":"","ucode":"004F622AEDA906","user_header":"https://static001.geekbang.org/account/avatar/00/16/61/3a/a259c187.jpg","comment_is_top":false,"comment_ctime":1578415283,"is_pvip":false,"replies":[{"id":"65879","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ææ™ºæ…§","uid":"1007349","ctime":1578451160,"ip_address":"","comment_id":169724,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44528088243","product_id":100040201,"comment_content":"ç¬¬ä¸€æ¬¡å¬åˆ°DDDè¿™ä¸ªä¸œè¥¿è¿˜æ˜¯åœ¨ä¸€å¹´å‰ï¼Œä»”ç»†äº†è§£åå‘ç°ï¼Œå…¶å®è¿™ä¸ªæ—©åœ¨å­¦ä¹ è½¯ä»¶å·¥ç¨‹çš„æ—¶å€™å°±è¢«æåŠã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯é’ˆå¯¹æŸä¸ªé¢†åŸŸï¼Œä»åŠŸèƒ½æˆ–è€…ç»„ä»¶çš„è§’åº¦å»è¿›è¡Œå¯¹è±¡çš„è®¾è®¡ã€‚<br><br>å¦å¤–å…³äº 35 å²çš„é—®é¢˜ï¼Œæˆ‘è®¤ä¸ºé™¤äº†è¦ä¿æŒå­¦ä¹ èƒ½åŠ›å¤–ï¼Œè¿˜éœ€è¦æœ‰ç³»ç»Ÿæ¶æ„èƒ½åŠ›å’Œä¸°å¯Œçš„ç»éªŒï¼ŒåŒæ—¶è¿˜éœ€è¦äº†è§£ç»æµã€å†å²ã€æ”¿æ²»ï¼Œé”»ç‚¼è‡ªå·±çš„ç¤¾äº¤å’Œå£æ‰ã€‚","like_count":10,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480694,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578451160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250389,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1601046571,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"35960784939","product_id":100040201,"comment_content":"ç®—æ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡çš„å…¥é—¨ç¯‡å§ï¼Œå¦‚æœæƒ³è¦æ·±å…¥å­¦ä¹ ï¼Œä¼°è®¡è¿˜å¾—å»éš”å£çš„ä¸“æ çœ‹çœ‹ï¼Œå¦å¤–æ›´é‡è¦çš„æ˜¯å¦‚ä½•åœ¨é¡¹ç›®ä¸­è½åœ°ã€‚<br><br>æœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œå…³äºå®ä½“ï¼Œåœ¨é¢å‘å¯¹è±¡åˆ†æçš„æ—¶å€™ï¼Œä¼¼ä¹ä¹Ÿæ˜¯å¼ºè°ƒè¦æ‰¾åˆ°ä¸šåŠ¡é¢†åŸŸã€æ‰¾åˆ°å®ä½“ï¼Œå½“ç„¶å¯èƒ½ä¸åƒé¢†åŸŸé©±åŠ¨è®¾è®¡è¿™ä¹ˆæœ‰é’ˆå¯¹æ€§ã€‚<br><br>å¤§é¾„ç¨‹åºå‘˜æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ<br><br>å…ˆè¯´åŠ£åŠ¿ï¼Œæ¯”å¹´è½»äººæ›´è´µï¼Œä½†æ˜¯å¯¹å·¥ä½œçš„æŠ•å…¥ç¨‹åº¦å¯èƒ½ä¸å¦‚å¹´è½»äººï¼Œå¦‚æœä¸æŒç»­å­¦ä¹ çš„è¯ï¼Œé‚£ä¹ˆæŠ€æœ¯ä¹Ÿå¯èƒ½è½ä¼ï¼Œç»¼åˆèµ·æ¥å°±æ˜¯æ€§ä»·æ¯”å¤ªä½ã€‚<br><br>ä¼˜åŠ¿å‘¢ï¼Œå¯èƒ½æ¯”å¹´è½»äººæˆç†Ÿç¨³å®šä¸€äº›ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸æ•¢åˆ åº“è·‘è·¯ï¼Œæ¯•ç«Ÿè¿˜è¦å…»å®¶ç³Šå£ã€‚å¦‚æœå•å†™ CRUD ä¼°è®¡å†™ä¸è¿‡å¹´è½»å°ä¼™å­ï¼Œä½†æ˜¯å¦‚æœæ˜¯å¤æ‚ä¸€ç‚¹çš„ä¸šåŠ¡é€»è¾‘ï¼Œç»éªŒå¯èƒ½è¿˜æ˜¯ä¼šæœ‰ä¸€äº›ä½œç”¨ã€‚<br><br>å¯¹äºå¤§é¾„ç¨‹åºå‘˜åœ¨ä¸šåŠ¡é¢†åŸŸçš„ç§¯ç´¯ï¼Œæˆ‘æœ‰ä¸€ç‚¹æ€€ç–‘ã€‚å…¶å®è¿™ä¸ªå’Œå­¦ä¹ æ–°æŠ€æœ¯ä¸€æ ·ï¼Œå¦‚æœä½ ä¸å»å­¦ä¹ å’Œæ€è€ƒï¼Œé‚£ä¹ˆå°±ä¸ä¼šæœ‰ä»€ä¹ˆç§¯ç´¯ã€‚<br><br>æœ€åï¼Œä½œä¸ºä¸€ä¸ªä¸å¿…é¢å¯¹â€œ35å²é—®é¢˜â€çš„å¤§é¾„ç¨‹åºå‘˜ï¼ˆå› ä¸ºæˆ‘å·²ç» 40+ äº†ï¼‰ï¼Œä»ç„¶å¸Œæœ›è‡ªå·±èƒ½å»åšæŠ€æœ¯ï¼Œå¯æ˜¯â€œç•™ç»™ä¸­å›½é˜Ÿçš„æ—¶é—´ä¸å¤šäº†â€ã€‚","like_count":9},{"had_liked":false,"id":222399,"user_name":"å·¦è€³æœµç‹®å­","can_delete":false,"product_type":"c1","uid":1067280,"ip_address":"","ucode":"095DD787E58967","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/10/af49fa20.jpg","comment_is_top":false,"comment_ctime":1590791320,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23065627800","product_id":100040201,"comment_content":"å¤§é¾„äººçš„ä¼˜åŠ¿ï¼Œä¼šå­¦ä¹ å’Œå­¦ä¹ æ–¹å‘çš„æ•ˆç‡æ˜¯æ²¡æœ‰ç»éªŒçš„äººæ— æ³•æ¯”çš„ã€‚ ï¼ˆæ¯”å¦‚ï¼Œæœ‰ç»éªŒçš„ç”¨google search è¾ƒæ²¡ç»éªŒçš„ç”¨google searchï¼Œå¯èƒ½å°±æ˜¯ä¸¤ç§å®Œå…¨ä¸åŒçš„å·¥å…·ï¼‰ã€‚æˆ–è€…é€šä¿—æ¥è®²ï¼Œå­¦ä¹ æŸä¸€æ–¹é¢ï¼Œä½ ä¸çŸ¥é“ä½ ä¸çŸ¥é“ä»€ä¹ˆã€‚æœ‰ç»éªŒçš„ï¼Œæ‰“ä¸€æªå¯èƒ½å°±å­¦ä¼šäº†ã€‚æ²¡ç»éªŒçš„æ‰“10æªæ‰å­¦ä¼šã€‚ï¼ˆæœ‰äººå¯èƒ½è¯´ï¼Œå¹´è½»çš„æ˜¯ä¸ªå¿«æªæ‰‹ï¼Œé‚£35å²æ€ä¹ˆå®šçš„ç•Œé™ï¼Ÿå¿ƒè€äº†ï¼Œ18å²å°±å·²ç»æ˜¯81å²äº†ã€‚è¿™é‡Œä¸æ ï¼Œ34.5å²å°±å¹´è½»äº†ï¼Ÿ36.2å²å°±å¹´è€äº†ï¼Ÿï¼‰","like_count":5,"discussions":[{"author":{"id":1079495,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","nickname":"æ–°ä¸–ç•Œ","note":"","ucode":"4473DC1505F158","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277447,"discussion_content":"å…„å¼Ÿï¼Œä½ è¿™åå­—éœ¸æ°”å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591058965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169221,"user_name":"ant","can_delete":false,"product_type":"c1","uid":1556708,"ip_address":"","ucode":"A39A03AF257471","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic4yAqsGtEYBSRR7gDjyg9yiaJicNhMwiaNw4rMKQ5DHTfp7gmic0gpqEwCZaou8G6CdHKCg/132","comment_is_top":false,"comment_ctime":1578296027,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14463197915","product_id":100040201,"comment_content":"è¿™ä¸€ç« ï¼ŒçœŸçš„æ˜¯æ„Ÿå—åˆ°äº†ç†è§£å±‚é¢çš„éš¾åº¦ï¼Œæˆ–è®¸å½“æˆ‘å¯¹æŸä¸€é¢†åŸŸæœ‰äº†å®Œå…¨å……åˆ†çš„ç†è§£ï¼Œå¹¶å‚ä¸äº†ç±»ä¼¼çš„æ¨¡å‹è®¾è®¡ï¼Œæ‰èƒ½æ›´å¥½çš„ç†è§£ç†è®ºå±‚é¢ï¼","like_count":3,"discussions":[{"author":{"id":1529298,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/iacfiaRC2Vze9eEaVibAFkngm4nmA0DwoibC3kHj6pCOQ87VDa955kK3kavnrDnibmfeIFd4G6Ab2fDkNrbUapL8ibAQ/132","nickname":"ä½ çš„ç¾","note":"","ucode":"71B97BDBA3CDC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":122886,"discussion_content":"æ¥æˆ‘è¿™é‡Œï¼Œå‚ä¸ä¸€æ¬¡é¢†åŸŸæ¨¡å‹è®¾è®¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578378421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020525,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","nickname":"escray","note":"","ucode":"1F4204930E47C4","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1529298,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/iacfiaRC2Vze9eEaVibAFkngm4nmA0DwoibC3kHj6pCOQ87VDa955kK3kavnrDnibmfeIFd4G6Ab2fDkNrbUapL8ibAQ/132","nickname":"ä½ çš„ç¾","note":"","ucode":"71B97BDBA3CDC3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308725,"discussion_content":"è¿˜æ‹›äººä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601045636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":122886,"ip_address":""},"score":308725,"extra":""}]}]},{"had_liked":false,"id":239278,"user_name":"è‹—","can_delete":false,"product_type":"c1","uid":1088710,"ip_address":"","ucode":"5ECCC6C855E541","user_header":"https://static001.geekbang.org/account/avatar/00/10/9c/c6/05a6798f.jpg","comment_is_top":false,"comment_ctime":1596474743,"is_pvip":false,"replies":[{"id":"88399","content":"å¯ä»¥å†™ä¸€ç¯‡æ–‡ç« è¯¦ç»†è®²è®²ä½ çš„é¢†åŸŸé©±åŠ¨è®¾è®¡å®è·µå—ï¼Ÿæ–‡ç« å‘åˆ°è¯„è®ºåŒºä¸€èµ·å­¦ä¹ ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ææ™ºæ…§","uid":"1007349","ctime":1596504779,"ip_address":"","comment_id":239278,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10186409335","product_id":100040201,"comment_content":"ä¸ªäººä»ä¼ ç»Ÿmvcè½¬åˆ°é¢†åŸŸé©±åŠ¨çš„ä¸»è¦åŠ¨åŠ›æ˜¯ï¼Œé¢†åŸŸé©±åŠ¨çš„ä»£ç æ¨¡å‹ä¸­ä½¿ç”¨è®¾è®¡æ¨¡å¼æé«˜å¯¹éœ€æ±‚çš„å“åº”èƒ½åŠ›å¾ˆæ–¹ä¾¿ï¼Œæ¯”å¦‚æ ¡éªŒåšæˆè´£ä»»é“¾ï¼ŒåŠ ä¸ªç­–ç•¥å®ç°ï¼Œæ¨¡æ¿ã€‚","like_count":2,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503043,"discussion_content":"å¯ä»¥å†™ä¸€ç¯‡æ–‡ç« è¯¦ç»†è®²è®²ä½ çš„é¢†åŸŸé©±åŠ¨è®¾è®¡å®è·µå—ï¼Ÿæ–‡ç« å‘åˆ°è¯„è®ºåŒºä¸€èµ·å­¦ä¹ ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596504779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223810,"user_name":"è€Œç«‹æ–‹","can_delete":false,"product_type":"c1","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1591185428,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5886152724","product_id":100040201,"comment_content":"æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯è€æ“","like_count":1},{"had_liked":false,"id":184745,"user_name":"æ¢ç´¢æ— æ­¢å¢ƒ","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1583395250,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878362546","product_id":100040201,"comment_content":"è€å¸ˆèƒ½å¦åŠ é¤å†é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹è®²è®²DDDï¼Ÿè€å¸ˆæ€»èƒ½æŠŠå¤æ‚çš„ä¸œè¥¿è®²å¾—æ¸…æ™°æ˜äº†","like_count":1},{"had_liked":false,"id":172018,"user_name":"é äººå“å»èµ¢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1579072219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5874039515","product_id":100040201,"comment_content":"å…¶å®è¿™ä¸ªè´«è¡€æ¨¡å‹ï¼Œåº”è¯¥æŒ‡çš„æ˜¯Daoä¸€ç±»çš„å§ï¼Œå°±æ˜¯ä¸€ä¸ªå­˜å€¼å–å€¼çš„ä¸€ä¸ªä¸œè¥¿ï¼Œæ²¡å•¥é€»è¾‘ã€‚æœ€åéƒ½æ˜¯äº¤ç»™serviceå¤„ç†ï¼Œä¸å…³å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œæ‰©å±•ä¼šå¯¼è‡´å¢åŠ serviceï¼Œä¸‡ä¸€è¦åšä»€ä¹ˆæ–°çš„æ‰©å±•å…³äºdaoå¯¼è‡´åˆ«çš„serviceä¹Ÿè¦è€ƒè™‘ã€‚<br>è¿™ä¸ªServiceåªç®¡é€»è¾‘çš„ä¹Ÿæ˜¯è´«è¡€æ¨¡å‹å—ï¼Ÿå……è¡€æ¨¡å‹æœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„æœ€ä½³å®è·µå—ï¼Ÿ","like_count":1},{"had_liked":false,"id":169328,"user_name":"å”äºŒæ¯›","can_delete":false,"product_type":"c1","uid":1597884,"ip_address":"","ucode":"7C16F45165F4BA","user_header":"https://static001.geekbang.org/account/avatar/00/18/61/bc/a656bee7.jpg","comment_is_top":false,"comment_ctime":1578315453,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"5873282749","product_id":100040201,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨DDD çš„å®è·µè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸¤ä¸ªé—®é¢˜: 1. ä¸šåŠ¡é€»è¾‘åŒ…å«åœ¨Aggregate Aä¸­ï¼Œè€Œä¸šåŠ¡é€»è¾‘å¾€å¾€éœ€è¦æŸ¥è¯¢å¤šä¸ªå…¶ä»–aggregate , ä½†æ˜¯ Aggregate åˆä¸èƒ½ç”¨ @Autowired çš„æ–¹å¼æ¥æ³¨å…¥service&#47;repository, æ‰€ä»¥æˆ‘çš„åšæ³•æ˜¯é¦–å…ˆå°†ä¾èµ–çš„aggregate æŸ¥è¯¢å‡ºæ¥ï¼Œå†ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°å¤„ç†ä¸šåŠ¡çš„aggtegate Aä¸­ï¼Œæ„Ÿè§‰è¿™ç§åšæ³•å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºæŸ¥è¯¢aggregate B çš„å‚æ•°ä¹Ÿæ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥æ— æ³•çœŸæ­£å°†ä¸šåŠ¡é€»è¾‘æ”¶åœ¨ Aggregate A é‡Œé¢ï¼Œ å¸Œæœ›è€å¸ˆæŒ‡ç‚¹ä¸€ä¸‹! <br>2. æˆ‘ä»¬çš„aggregate å…³è”é“¾æ¡å¾ˆé•¿ï¼ŒA -&gt; B-&gt; ... -&gt; G , å¹¶ä¸”ï¼Œä¸šåŠ¡é€»è¾‘ä¸­å¾€å¾€éœ€è¦ç”¨åˆ°è¿™äº›å…³è”çš„æ•°æ®ï¼Œå¦‚æœç”¨@ManyToManyçš„æ–¹å¼ï¼Œå°±ä¼šä½¿å¾— Aggregate ç‰¹åˆ«å¤§ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¹Ÿå¾ˆæ…¢ï¼Œè¿˜æœ‰å°±æ˜¯å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œä»¥å‰çš„åšæ³•éƒ½æ˜¯ç”¨ä¸€ä¸ªä¸­é—´å…³è”è¡¨æ¥è®°å½•ï¼Œä½†æ˜¯è¿™æ ·å¥½åƒæ˜¯é¢å‘è¡¨ç¼–ç¨‹ï¼ŒæŒ‰ç…§DDDï¼Œåº”è¯¥æ€ä¹ˆè®¾è®¡å‘¢ï¼Ÿ å¦‚ä½•åœ¨Aggregate ä¸­æ¥å®ç°è¿™äº›ä¸šåŠ¡é€»è¾‘å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1179565,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/ad/5020a8c5.jpg","nickname":"Farewellä¸¶","note":"","ucode":"A0D69893C5375C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":136770,"discussion_content":"å®ä½“æˆ–è€…èšåˆåº”è¯¥å‘æ›´å°çš„æ–¹å‘å»è®¾è®¡ã€‚é¢å¯¹ä½ è¿™ç§æƒ…å†µï¼Œçœ‹èµ·æ¥æ˜¯ä¸€ä¸ªæŸ¥è¯¢éœ€æ±‚ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡æ“ä½œï¼Œé‚£ä¹ˆåº”è¯¥åˆ©ç”¨ç±»ä¼¼CQRSçš„æ¶æ„æ–¹å¼ï¼Œå°†è¿™ä¸ªæŸ¥è¯¢è§†å›¾å•ç‹¬æ˜ å°„å‡ºæ¥ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¸€ä¸ªèšåˆæ¥æ•´ä½“ç®¡ç†ï¼Œä¸ç„¶ä»£ç å¾ˆéš¾æï¼Œæ•ˆç‡ä¹Ÿä¸é«˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579163154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1597884,"avatar":"https://static001.geekbang.org/account/avatar/00/18/61/bc/a656bee7.jpg","nickname":"å”äºŒæ¯›","note":"","ucode":"7C16F45165F4BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1179565,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/ad/5020a8c5.jpg","nickname":"Farewellä¸¶","note":"","ucode":"A0D69893C5375C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":139606,"discussion_content":"ä¸å•æ˜¯æŸ¥è¯¢ï¼Œä¾‹å¦‚: ç”Ÿæˆä¸€ç¬”è®¢å•çš„æ—¶å€™è¦è®¡ç®—æ‰‹ç»­è´¹ï¼Œè®¡ç®—æ‰‹ç»­è´¹å°±éœ€è¦: ç”¨æˆ·çš„ä¿¡æ¯ï¼Œç”¨æˆ·æ¥æºçš„ç›¸å…³ä¿¡æ¯ï¼Œç”¨æˆ·çš„äº¤æ˜“å†å²ä¿¡æ¯ï¼Œè¿˜éœ€è¦æ‰‹ç»­è´¹è®¡ç®—è§„åˆ™çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯éƒ½æ˜¯åœ¨ä¸åŒçš„å¾®æœåŠ¡ä¸­çš„ï¼Œè®¡ç®—æ‰‹ç»­è´¹åªæ˜¯ä¼—å¤šæ­¥éª¤ä¸­çš„ä¸€æ­¥ï¼Œè¿˜æœ‰å…¶ä»–æ­¥éª¤ï¼Œéœ€è¦æ›´å¤šçš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å‡ ä¹æ¶µç›–äº†æ•´ä¸ªç³»ç»Ÿï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆå¤„ç†?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579307099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":136770,"ip_address":""},"score":139606,"extra":""},{"author":{"id":1179565,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/ad/5020a8c5.jpg","nickname":"Farewellä¸¶","note":"","ucode":"A0D69893C5375C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1597884,"avatar":"https://static001.geekbang.org/account/avatar/00/18/61/bc/a656bee7.jpg","nickname":"å”äºŒæ¯›","note":"","ucode":"7C16F45165F4BA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":150849,"discussion_content":"é‚£ä¹ˆæˆ‘è§‰å¾—æ ¹æ®ä½ ä»¬è‡ªå·±ä¸šåŠ¡æ‰€åšçš„å¾®æœåŠ¡åˆ’åˆ†å¹¶ä¸å¤ªåˆç†ã€‚æ¯”å¦‚ç”¨æˆ·äº¤æ˜“å†å²ï¼Œæ‰‹ç»­è´¹è®¡ç®—è§„åˆ™ï¼Œè¿™äº›æ˜¯ä¸æ˜¯åº”è¯¥ç»Ÿåˆåˆ°è®¢å•æœåŠ¡ä¸­ï¼Œéƒ½æƒ³è¦æ ¹æ®ä½ çš„å› ä¸ºè¿›è¡Œæ›´å¤šçš„æ€è€ƒè®¨è®ºåˆ¤æ–­ã€‚é€šè¿‡dddåšå¾®æœåŠ¡æœ€ååº”è¯¥ä¿æŒç›¸å¯¹æ¯”è¾ƒè‰¯å¥½çš„è¾¹ç•Œï¼Œå¾®æœåŠ¡è°ƒç”¨æ˜¯ä¸å¯é¿å…ï¼Œä½†æ˜¯ç½‘ç»œå¤ªå¤šæœ‰å¯èƒ½å­˜åœ¨é—®é¢˜ã€‚å½“ç„¶ä¹Ÿå°±æ˜¯æœ‰å¯èƒ½å“ˆï¼Œä¹‹å‰çœ‹è¿‡bç«™çš„å¾®æœåŠ¡è°ƒç”¨ç¤ºä¾‹ï¼Œä¸€ä¸ªç”¨æˆ·æ¥å£å°±æ¶‰åŠäº†20å¤šä¸ªå¾®æœåŠ¡è°ƒç”¨ï¼Œä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚å…³é”®è¿˜æ˜¯è¦æ€è€ƒè‡ªå·±çš„å¾®æœåŠ¡åˆ°åº•åˆ’åˆ†åˆä¸åˆç†ï¼Œæ¯ä¸ªå¾®æœåŠ¡æ˜¯ä¸æ˜¯é«˜æ€§èƒ½ï¼Œå…¨æµç¨‹èƒ½ä¸èƒ½ä¿è¯æ­£å¸¸æƒ…å†µä¸‹çš„é«˜æ€§èƒ½ï¼Œå’Œå¼‚å¸¸æƒ…å†µä¸‹å¾—é«˜å¯ç”¨ã€‚å¯¹ç»éªŒä¸å¤šçš„ä¸šåŠ¡å¼€å‘å’Œæ¶æ„æ¥è¯´ï¼Œè¿™ä¸ªä¸šåŠ¡åŠ æŠ€æœ¯çš„ç»¼åˆè€ƒé‡ï¼Œç”šè‡³æœ‰æ—¶å€™è¿˜æœ‰å…¬å¸æˆ˜ç•¥å’Œå†…éƒ¨æ”¿æ²»çš„å› ç´ åœ¨é‡Œè¾¹ï¼Œåœ¨å†³ç­–å’Œåˆ¤æ–­ä¸Šå°±æ›´æ˜¾å¾—æ¯”è¾ƒå›°éš¾äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579831212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":139606,"ip_address":""},"score":150849,"extra":""},{"author":{"id":1088710,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/c6/05a6798f.jpg","nickname":"è‹—","note":"","ucode":"5ECCC6C855E541","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1597884,"avatar":"https://static001.geekbang.org/account/avatar/00/18/61/bc/a656bee7.jpg","nickname":"å”äºŒæ¯›","note":"","ucode":"7C16F45165F4BA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296235,"discussion_content":"è¿™äº›å‚æ•°å°±æ˜¯å€¼å¯¹è±¡ï¼Œåœ¨åº”ç”¨å±‚è°ƒç”¨å…¶å®ƒèšåˆæš´éœ²çš„æ¥å£è·å–æ•°æ®ï¼Œç„¶åä¼ é€’ç»™å®ç°æ ¸å¿ƒä¸šåŠ¡çš„èšåˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596476845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":139606,"ip_address":""},"score":296235,"extra":""}]},{"author":{"id":1529298,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/iacfiaRC2Vze9eEaVibAFkngm4nmA0DwoibC3kHj6pCOQ87VDa955kK3kavnrDnibmfeIFd4G6Ab2fDkNrbUapL8ibAQ/132","nickname":"ä½ çš„ç¾","note":"","ucode":"71B97BDBA3CDC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":122908,"discussion_content":"è¿™æ˜¯ä¸æ˜¯å¤šä¸ªèšåˆå®ŒæˆåŒä¸€ä¸ªä¸šåŠ¡é€»è¾‘ï¼Œå‡å¦‚å¾®æœåŠ¡å†…æœ‰æä¾›æ€»çº¿æœåŠ¡ï¼Œå°±æŒ‰é¡ºåºç›´æ¥è°ƒç”¨å®Œæˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578379592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350134,"user_name":"javaå°éœ¸ç‹","can_delete":false,"product_type":"c1","uid":1168540,"ip_address":"","ucode":"7094BCD9F25E1E","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/9c/030e80d3.jpg","comment_is_top":false,"comment_ctime":1656589395,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656589395","product_id":100040201,"comment_content":"ä¼˜åŠ¿åº”è¯¥æ˜¯ æ·±åº¦å’Œå¹¿åº¦çš„ç§¯ç´¯ï¼Œå­¦ä¹ æ–°æŠ€æœ¯çš„é€Ÿåº¦ï¼Œçœ‹é—®é¢˜çš„æœ¬è´¨ï¼Œåœ¨æŸä¸ªé¢†åŸŸçš„æƒå¨ï¼ŒåŒæ—¶å…·æœ‰ä¸€å®šçš„åˆ›é€ æ€§","like_count":1},{"had_liked":false,"id":298797,"user_name":"é»„è€æ¿","can_delete":false,"product_type":"c1","uid":1424264,"ip_address":"","ucode":"7C420E7FDFEA17","user_header":"https://static001.geekbang.org/account/avatar/00/15/bb/88/2d4b475c.jpg","comment_is_top":false,"comment_ctime":1624327874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624327874","product_id":100040201,"comment_content":"è€å¸ˆä¸‹é¢è¿™æ®µè¯è¯´çš„å¾ˆæœ‰é“ç†ï¼Œä½†æ˜¯å®é™…å¼€å‘è¿‡ç¨‹ä¸­å°±æ˜¯å­˜åœ¨å„ç§ä¼ªéœ€æ±‚å®¢æˆ·è¦æ±‚å®ç°ï¼Œé¢†å¯¼ã€äº§å“ä¸ç®¡ä»€ä¹ˆè®¾è®¡æ¨¡å‹ä¸ç®¡åˆç†æ€§ï¼Œå°±æ˜¯éœ¸ç‹ç¡¬ä¸Šå¼“å°±æ˜¯è¦å¼€å‘å°±ç®—å„ç§å†™æ­»æŠŠä»£ç å¼„çš„ä¸€å›¢ç³Ÿä¹Ÿè¦å¿«é€Ÿå®ç°ï¼Œè¿™æ˜¯å¾ˆå¤šä¸­å°ä¼ä¸šç›®å‰ä¸ºäº†ç”Ÿæˆè€Œé¢ä¸´çš„ç°çŠ¶ï¼Œå®Œå…¨å°±æ˜¯å®¢æˆ·è¯´å•¥å°±æ˜¯å•¥ï¼Œæ‰€ä»¥åšå¼€å‘è¶Šæ¥è¶Šç´¯äº†ï¼Œå„ç§æ— è„‘åŠ ç­<br><br>ä¸Šæ–‡åŸè¯å¦‚ä¸‹ï¼š<br>åœ¨éœ€æ±‚å˜æ›´è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªéœ€æ±‚å’Œé¢†åŸŸæ¨¡å‹æœ‰å†²çªï¼Œå’Œæ¨¡å‹çš„å®šä¹‰ä»¥åŠæ¨¡å‹é—´çš„äº¤äº’é€»è¾‘ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½è¿™ä¸ªéœ€æ±‚æœ¬èº«å°±æ˜¯ä¼ªéœ€æ±‚ã€‚å¾ˆå¤šçœ‹ä¼¼åˆç†çš„éœ€æ±‚å…¶å®å’Œä¸šåŠ¡çš„å†…åœ¨é€»è¾‘æ˜¯æœ‰å†²çªçš„ï¼Œè¿™æ ·çš„éœ€æ±‚ä¹Ÿä¸ä¼šå¸¦æ¥ä¸šåŠ¡çš„ä»·å€¼ï¼Œé€šè¿‡é¢†åŸŸæ¨¡å‹åˆ†æï¼Œå¯ä»¥è¯†åˆ«å‡ºè¿™æ ·çš„ä¼ªéœ€æ±‚ï¼Œä½¿ç³»ç»Ÿæ›´å¥½åœ°ä¿æŒä¸€è‡´æ€§ï¼Œä¹Ÿå¯ä»¥ä½¿å¼€å‘èµ„æºæŠ•å…¥åˆ°æ›´æœ‰ä»·å€¼çš„åœ°æ–¹å»ã€‚","like_count":0},{"had_liked":false,"id":218764,"user_name":"å°é«˜","can_delete":false,"product_type":"c1","uid":1283052,"ip_address":"","ucode":"FCD422249F7355","user_header":"https://static001.geekbang.org/account/avatar/00/13/93/ec/985675c8.jpg","comment_is_top":false,"comment_ctime":1589871610,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589871610","product_id":100040201,"comment_content":"åœ¨å·¥ä½œä¸­ä¹Ÿè¦åŠªåŠ›æå‡ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜çš„ç¼–ç¨‹æŠ€èƒ½å’Œè½¯å®åŠ›ã€‚","like_count":0},{"had_liked":false,"id":193446,"user_name":"X.L.","can_delete":false,"product_type":"c1","uid":1682258,"ip_address":"","ucode":"3402A8DCE81099","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/UuOV8OrMeRGuibY76OXzuBwOoL4Eru5VcFlctXlBDauibRUD0rXSsG1ibogBasmeDTbXdJOD4NGjTI2u5HAQK2bWg/132","comment_is_top":false,"comment_ctime":1584893256,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584893256","product_id":100040201,"comment_content":"å¦‚æœèƒ½åšä¸€ä¸ªé¡¹ç›®ä»éœ€æ±‚åˆ°æ‹†è§£é¢†åŸŸæ¨¡å‹ï¼Œåˆ°ä¼ªä»£ç å¼€å‘ï¼Œå¹¶ä¸”æœ‰ä¾‹å­è§„èŒƒå„ä¸ªå­åŸŸçš„äº’ç›¸è°ƒç”¨æ–¹å¼å°±æ›´å¥½äº†","like_count":0},{"had_liked":false,"id":171756,"user_name":"Haan","can_delete":false,"product_type":"c1","uid":1388133,"ip_address":"","ucode":"7A7BBE0D0CD39E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq8qpSvBoZz89u3BhGXWLibs2OibCkZl8bx74aLSJ58f467bR8anNaTiccJklcqjBdhfvvJpvLVmYesA/132","comment_is_top":false,"comment_ctime":1579007154,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579007154","product_id":100040201,"comment_content":"å¤§é¾„ç¨‹åºå‘˜ é™¤äº†åŸºæœ¬çš„æŠ€èƒ½ä¹‹å¤–ï¼Œéœ€è¦æ‰æ ¹äºæŸä¸€ç‰¹å®šçš„é¢†åŸŸã€‚rightï¼Ÿ","like_count":0}]}