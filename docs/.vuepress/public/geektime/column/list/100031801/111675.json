{"id":111675,"title":"08 | æœ‰è¯å¥½å•†é‡ï¼Œè®ºåª’ä½“åå•†","content":"<p>åœ¨<a href=\"https://time.geekbang.org/column/article/111337\">ã€Š07 | ä½ ç«Ÿç„¶ä¸çŸ¥é“SDPï¼Ÿå®ƒå¯æ˜¯WebRTCçš„é©±åŠ¨æ ¸å¿ƒï¼ã€‹</a>ä¸€æ–‡ä¸­ï¼Œæˆ‘å‘ä½ è¯¦ç»†ä»‹ç»äº†æ ‡å‡† SDP è§„èŒƒï¼Œä»¥åŠ WebRTC ä¸æ ‡å‡† SDP è§„èŒƒçš„ä¸€äº›ä¸åŒï¼Œè€Œæœ¬æ–‡æˆ‘ä»¬å°†é‡ç‚¹å­¦ä¹ ä¸€ä¸‹ WebRTC ç©¶ç«Ÿæ˜¯å¦‚ä½•ä½¿ç”¨ SDP è§„èŒƒè¿›è¡Œ<strong>åª’ä½“åå•†</strong>çš„ã€‚</p><p>æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„<strong>åå•†</strong>ä½ åº”è¯¥æ¸…æ¥šæ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¯´ç™½äº†å°±æ˜¯è®¨ä»·è¿˜ä»·ã€‚ä»¥ä¹°ç™½èœä¸ºä¾‹ï¼Œå•†å®¶è¯´ 5å…ƒä¸€é¢—ï¼Œä¹°å®¶è¯´èº«ä¸Šåªæœ‰ 4.5å…ƒå–ä¸å–ï¼Ÿå•†å®¶åŒæ„å–ï¼Œè¿™æ ·ä¸€æ¬¡åå•†å°±å®Œæˆäº†ã€‚</p><p>è€Œ<strong>åª’ä½“åå•†</strong>ä¹Ÿæ˜¯è¿™ä¸ªæ„æ€ï¼Œåªä¸è¿‡å®ƒä»¬è®¨ä»·è¿˜ä»·çš„ä¸æ˜¯ä¸€èˆ¬å•†å“ï¼Œè€Œæ˜¯ä¸åª’ä½“ç›¸å…³çš„èƒ½åŠ›ã€‚é‚£<strong>åª’ä½“èƒ½åŠ›</strong>æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®é™…å°±æ˜¯ä½ çš„è®¾å¤‡æ‰€æ”¯æŒçš„éŸ³è§†é¢‘ç¼–è§£ç å™¨ã€ä½¿ç”¨çš„ä¼ è¾“åè®®ã€ä¼ è¾“çš„é€Ÿç‡æ˜¯å¤šå°‘ç­‰ä¿¡æ¯ã€‚</p><p>æ‰€ä»¥ç®€å•åœ°è¯´ï¼Œ<strong>åª’ä½“åå•†</strong>å°±æ˜¯çœ‹çœ‹ä½ çš„è®¾å¤‡éƒ½æ”¯æŒé‚£äº›ç¼–è§£ç å™¨ï¼Œæˆ‘çš„è®¾å¤‡æ˜¯å¦ä¹Ÿæ”¯æŒï¼Ÿå¦‚æœæˆ‘çš„è®¾å¤‡ä¹Ÿæ”¯æŒï¼Œé‚£ä¹ˆå’±ä»¬åŒæ–¹å°±ç®—åå•†æˆåŠŸäº†ã€‚</p><h2>åœ¨WebRTC å¤„ç†è¿‡ç¨‹ä¸­çš„ä½ç½®</h2><p>åœ¨æ­£å¼è¿›å…¥ä¸»é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹çœ‹æœ¬æ–‡åœ¨æ•´ä¸ª WebRTC å¤„ç†è¿‡ç¨‹ä¸­çš„ä½ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f5/de/f5a65fd87dc667af6761ba7e25abe1de.png?wh=1142*599\" alt=\"\"></p><center><span class=\"reference\">WebRTCå¤„ç†è¿‡ç¨‹å›¾</span></center><p>é€šè¿‡è¿™å¼ å›¾ä½ å¯ä»¥äº†è§£åˆ°ï¼Œæœ¬æ–‡æ‰€æ¶‰åŠçš„å†…å®¹åŒ…æ‹¬<strong>åˆ›å»ºè¿æ¥</strong>å’Œ<strong>ä¿¡ä»¤</strong>ä¸¤éƒ¨åˆ†ã€‚</p><ul>\n<li>åˆ›å»ºè¿æ¥ï¼ŒæŒ‡çš„æ˜¯åˆ›å»ºRTCPeerConnectionï¼Œå®ƒè´Ÿè´£ç«¯ä¸ç«¯ä¹‹é—´å½¼æ­¤å»ºç«‹ P2P è¿æ¥ã€‚åœ¨åé¢ RTCPeerConnection ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šå¯¹å…¶åšè¿›ä¸€æ­¥çš„ä»‹ç»ã€‚</li>\n<li>ä¿¡ä»¤ï¼ŒæŒ‡çš„æ˜¯å®¢æˆ·ç«¯é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨äº¤æ¢ SDP ä¿¡æ¯ã€‚</li>\n</ul><!-- [[[read_end]]] --><p>æ‰€ä»¥ä»æœ¬æ–‡å¼€å§‹ï¼Œæˆ‘ä»¬å°±å¼€å§‹è®²è§£ WebRTC æœ€æ ¸å¿ƒçš„ä¸€éƒ¨åˆ†çŸ¥è¯†äº†ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><h2>WebRTCä¸­åª’ä½“åå•†çš„ä½œç”¨</h2><p>åœ¨ WebRTC 1.0 è§„èŒƒä¸­ï¼Œåœ¨åŒæ–¹é€šä¿¡æ—¶ï¼ŒåŒæ–¹å¿…é¡»æ¸…æ¥šå½¼æ­¤ä½¿ç”¨çš„ç¼–è§£ç å™¨æ˜¯ä»€ä¹ˆï¼Œä¹Ÿå¿…é¡»çŸ¥é“ä¼ è¾“è¿‡æ¥çš„éŸ³è§†é¢‘æµçš„ SSRCï¼ˆSSRCçš„æ¦‚å¿µå‚è§<a href=\"https://time.geekbang.org/column/article/109999\">ã€Š06 | WebRTCä¸­çš„RTPåŠRTCPè¯¦è§£ã€‹</a>ä¸€æ–‡ï¼‰ä¿¡æ¯ï¼Œå¦‚æœè¿è¿™äº›æœ€åŸºæœ¬çš„ä¿¡æ¯å½¼æ­¤éƒ½ä¸æ¸…æ¥šçš„è¯ï¼Œé‚£ä¹ˆåŒæ–¹æ˜¯æ— æ³•æ­£å¸¸é€šä¿¡çš„ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœWebRTCä¸æ¸…æ¥šå¯¹æ–¹ä½¿ç”¨çš„æ˜¯å“ªç§ç¼–ç å™¨ç¼–ç çš„æ•°æ®ï¼Œæ¯”å¦‚åˆ°åº•æ˜¯H264ï¼Œè¿˜æ˜¯VP8ï¼Ÿé‚£WebRTCå°±æ— æ³•å°†è¿™äº›æ•°æ®åŒ…æ­£å¸¸è§£ç ï¼Œè¿˜åŸæˆåŸæ¥çš„éŸ³è§†é¢‘å¸§ï¼Œè¿™å°†å¯¼è‡´éŸ³è§†é¢‘æ— æ³•æ­£å¸¸æ˜¾ç¤ºæˆ–æ’­æ”¾ã€‚</p><p>åŒæ ·çš„é“ç†ï¼Œå¦‚æœWebRTCä¸çŸ¥é“å¯¹æ–¹å‘è¿‡æ¥çš„éŸ³è§†é¢‘æµçš„ SSRC æ˜¯å¤šå°‘ï¼Œé‚£ä¹ˆWebRTCå°±æ— æ³•å¯¹è¯¥éŸ³è§†é¢‘æµçš„åˆæ³•æ€§åšéªŒè¯ï¼Œè¿™ä¹Ÿå°†å¯¼è‡´ä½ æ— æ³•è§‚çœ‹æ­£å¸¸çš„éŸ³è§†é¢‘ã€‚å› ä¸ºå¯¹äºæ— æ³•éªŒè¯çš„éŸ³è§†é¢‘æµï¼ŒWebRTCåœ¨æ¥æ”¶éŸ³è§†é¢‘åŒ…åä¼šç›´æ¥å°†å…¶æŠ›å¼ƒã€‚</p><p>é€šè¿‡ä¸Šé¢çš„æè¿°ï¼Œæˆ‘æƒ³ä½ å·²ç»éå¸¸æ¸…æ¥šåª’ä½“åå•†çš„ä½œç”¨æ˜¯ä»€ä¹ˆäº†ã€‚æ²¡é”™ï¼Œ<strong>åª’ä½“åå•†çš„ä½œç”¨å°±æ˜¯è®©åŒæ–¹æ‰¾åˆ°å…±åŒæ”¯æŒçš„åª’ä½“èƒ½åŠ›</strong>ï¼Œå¦‚åŒæ–¹éƒ½æ”¯æŒçš„ç¼–è§£ç å™¨ï¼Œä»è€Œ<strong>æœ€ç»ˆå®ç°å½¼æ­¤ä¹‹é—´çš„éŸ³è§†é¢‘é€šä¿¡</strong>ã€‚</p><p>é‚£ WebRTC æ˜¯æ€æ ·è¿›è¡Œåª’ä½“åå•†çš„å‘¢ï¼Ÿè¿™å°±è¦ç”¨åˆ°<a href=\"https://time.geekbang.org/column/article/111337\">ã€Š07 | ä½ ç«Ÿç„¶ä¸çŸ¥é“SDPï¼Ÿå®ƒå¯æ˜¯WebRTCçš„é©±åŠ¨æ ¸å¿ƒï¼ã€‹</a>æ–‡ç« ä¸­è®²è§£çš„ SDPäº†ã€‚</p><ul>\n<li>é¦–å…ˆï¼Œé€šä¿¡åŒæ–¹å°†å®ƒä»¬å„è‡ªçš„åª’ä½“ä¿¡æ¯ï¼Œå¦‚ç¼–è§£ç å™¨ã€åª’ä½“æµçš„SSRCã€ä¼ è¾“åè®®ã€IPåœ°å€å’Œç«¯å£ç­‰ï¼ŒæŒ‰ SDP æ ¼å¼æ•´ç†å¥½ã€‚</li>\n<li>ç„¶åï¼Œé€šä¿¡åŒæ–¹é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨äº¤æ¢SDPä¿¡æ¯ï¼Œå¹¶å¾…å½¼æ­¤æ‹¿åˆ°å¯¹æ–¹çš„ SDP ä¿¡æ¯åï¼Œæ‰¾å‡ºå®ƒä»¬å…±åŒæ”¯æŒçš„åª’ä½“èƒ½åŠ›ã€‚</li>\n<li>æœ€åï¼ŒåŒæ–¹æŒ‰ç…§åå•†å¥½çš„åª’ä½“èƒ½åŠ›å¼€å§‹éŸ³è§†é¢‘é€šä¿¡ã€‚</li>\n</ul><p>WebRTC è¿›è¡Œåª’ä½“åå•†çš„æ­¥éª¤åŸºæœ¬å¦‚ä¸Šæ‰€è¿°ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ WebRTC å…·ä½“æ˜¯å¦‚ä½•æ“ä½œçš„ã€‚</p><h2>RTCPeerConnection</h2><p>è®²åˆ°åª’ä½“åå•†ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸ä»‹ç»ä¸€ä¸‹ RTCPeerConnection ç±»ï¼Œ é¡¾åæ€ä¹‰ï¼Œå®ƒè¡¨ç¤ºçš„å°±æ˜¯ç«¯ä¸ç«¯ä¹‹é—´å»ºç«‹çš„<strong>è¿æ¥</strong>ã€‚</p><p>è¯¥ç±»æ˜¯æ•´ä¸ª WebRTC åº“ä¸­<strong>æœ€å…³é”®</strong>çš„ä¸€ä¸ªç±»ï¼Œé€šè¿‡å®ƒåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œå¦‚NATç©¿è¶Šã€éŸ³è§†é¢‘æ•°æ®çš„æ¥æ”¶ä¸å‘é€ï¼Œç”šè‡³å®ƒè¿˜å¯ä»¥ç”¨äºééŸ³è§†é¢‘æ•°æ®çš„ä¼ è¾“ç­‰ç­‰ ã€‚</p><p>è€Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¹‹æ‰€ä»¥è¦ä»‹ç»RTCPeerConnectionï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯<strong>æˆ‘ä»¬ä»Šå¤©è¦è®²çš„ç«¯åˆ°ç«¯ä¹‹é—´çš„åª’ä½“åå•†ï¼Œå°±æ˜¯åŸºäº RTCPeerConnection å¯¹è±¡å®ç°çš„</strong>ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•åˆ›å»ºä¸€ä¸ªRTCPeerConnectionå¯¹è±¡ï¼š</p><pre><code>...\nvar pcConfig = null;\nvar pc = new RTCPeerConnection(pcConfig);\n...\n</code></pre><p>åœ¨JavaScriptä¸‹åˆ›å»ºRTCPeerConnectionå¯¹è±¡éå¸¸ç®€å•ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œåªè¦é€šè¿‡ new å…³é”®å­—åˆ›å»ºå³å¯ã€‚</p><p>åœ¨åˆ›å»º RTCPeerConnection å¯¹è±¡æ—¶ï¼Œè¿˜å¯ä»¥ç»™å®ƒä¼ ä¸€ä¸ªå‚æ•°<strong>pcConfig</strong>ï¼Œè¯¥å‚æ•°çš„ç»“æ„éå¸¸å¤æ‚ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆå°†å…¶è®¾ç½®ä¸ºnullï¼Œåé¢åœ¨ã€Š12 | RTCPeerConnectionï¼šéŸ³è§†é¢‘å®æ—¶é€šè®¯çš„æ ¸å¿ƒã€‹ä¸€æ–‡ä¸­æˆ‘å†å¯¹å…¶åšæ›´è¯¦å°½çš„æè¿°ã€‚</p><p>æœ‰äº†RTCPeerConnectionå¯¹è±¡ï¼Œæ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å†æ¥çœ‹çœ‹ç«¯ä¸ç«¯ä¹‹é—´æ˜¯å¦‚ä½•è¿›è¡Œåª’ä½“åå•†çš„å§ï¼</p><h2>åª’ä½“åå•†çš„è¿‡ç¨‹</h2><p><strong>åœ¨é€šè®¯åŒæ–¹éƒ½åˆ›å»ºå¥½ RTCPeerConnection å¯¹è±¡å</strong>ï¼Œå®ƒä»¬å°±å¯ä»¥å¼€å§‹è¿›è¡Œåª’ä½“åå•†äº†ã€‚ä¸è¿‡åœ¨è¿›è¡Œåª’ä½“åå•†ä¹‹å‰ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå³ <strong>Offer</strong> ä¸ <strong>Answer</strong> ï¼Œä½ å¿…é¡»è¦å¼„æ¸…æ¥šã€‚</p><p>Offer ä¸ Answer æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¯¹äº1å¯¹1 é€šä¿¡çš„åŒæ–¹æ¥è¯´ï¼Œæˆ‘ä»¬ç§°é¦–å…ˆå‘é€åª’ä½“åå•†æ¶ˆæ¯çš„ä¸€æ–¹ä¸º<strong>å‘¼å«æ–¹</strong>ï¼Œè€Œå¦ä¸€æ–¹åˆ™ä¸º<strong>è¢«å‘¼å«æ–¹</strong>ã€‚</p><ul>\n<li>Offerï¼Œåœ¨åŒæ–¹é€šè®¯æ—¶ï¼Œå‘¼å«æ–¹å‘é€çš„ SDP æ¶ˆæ¯ç§°ä¸º Offerã€‚</li>\n<li>Answerï¼Œåœ¨åŒæ–¹é€šè®¯æ—¶ï¼Œè¢«å‘¼å«æ–¹å‘é€çš„ SDP æ¶ˆæ¯ç§°ä¸º  Answerã€‚</li>\n</ul><p>åœ¨WebRTCä¸­ï¼ŒåŒæ–¹åå•†çš„æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/55/29/55971e410ce15be231b3f5fab0881e29.png?wh=1142*628\" alt=\"\"></p><center><span class=\"reference\">åª’ä½“åå•†è¿‡ç¨‹å›¾</span></center><p>é¦–å…ˆï¼Œå‘¼å«æ–¹åˆ›å»º Offer ç±»å‹çš„SDPæ¶ˆæ¯ã€‚åˆ›å»ºå®Œæˆåï¼Œè°ƒç”¨ setLocalDescriptoin æ–¹æ³•å°†è¯¥Offer ä¿å­˜åˆ°æœ¬åœ° Local åŸŸï¼Œç„¶åé€šè¿‡ä¿¡ä»¤å°† Offer å‘é€ç»™è¢«å‘¼å«æ–¹ã€‚</p><p>è¢«å‘¼å«æ–¹æ”¶åˆ° Offer ç±»å‹çš„ SDP æ¶ˆæ¯åï¼Œè°ƒç”¨ setRemoteDescription æ–¹æ³•å°† Offer ä¿å­˜åˆ°å®ƒçš„ Remote åŸŸã€‚ä½œä¸ºåº”ç­”ï¼Œè¢«å‘¼å«æ–¹è¦åˆ›å»º  Answer ç±»å‹çš„ SDP æ¶ˆæ¯ï¼ŒAnsweræ¶ˆæ¯åˆ›å»ºæˆåŠŸåï¼Œå†è°ƒç”¨ setLocalDescription æ–¹æ³•å°† Answer ç±»å‹çš„ SDP æ¶ˆæ¯ä¿å­˜åˆ°æœ¬åœ°çš„ Local åŸŸã€‚æœ€åï¼Œè¢«å‘¼å«æ–¹å°† Answer æ¶ˆæ¯é€šè¿‡ä¿¡ä»¤å‘é€ç»™å‘¼å«æ–¹ã€‚è‡³æ­¤ï¼Œè¢«å‘¼å«æ–¹çš„å·¥ä½œå°±å®Œéƒ¨å®Œæˆäº†ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯å‘¼å«æ–¹çš„æ”¶å°¾å·¥ä½œï¼Œå‘¼å«æ–¹æ”¶åˆ° Answer ç±»å‹çš„æ¶ˆæ¯åï¼Œè°ƒç”¨ RTCPeerConnecton å¯¹è±¡çš„ setRemoteDescription æ–¹æ³•ï¼Œå°† Answer ä¿å­˜åˆ°å®ƒçš„ Remote åŸŸã€‚</p><p>è‡³æ­¤ï¼Œ<strong>æ•´ä¸ªåª’ä½“åå•†è¿‡ç¨‹å¤„ç†å®Œæ¯•</strong>ã€‚</p><p>å½“é€šè®¯åŒæ–¹æ‹¿åˆ°å½¼æ­¤çš„SDPä¿¡æ¯åï¼Œå°±å¯ä»¥è¿›è¡Œåª’ä½“åå•†äº†ã€‚åª’ä½“åå•†çš„å…·ä½“è¿‡ç¨‹æ˜¯åœ¨ WebRTCå†…éƒ¨å®ç°çš„ï¼Œæˆ‘ä»¬å°±ä¸å»ç»†è®²äº†ã€‚ä½ åªéœ€è¦è®°ä½æœ¬åœ°çš„ SDP å’Œè¿œç«¯çš„ SDP éƒ½è®¾ç½®å¥½åï¼Œåå•†å°±ç®—æˆåŠŸäº†ã€‚</p><h2>åª’ä½“åå•†çš„ä»£ç å®ç°</h2><p>äº†è§£äº†WebRTCçš„åª’ä½“åå•†è¿‡ç¨‹ä¹‹åï¼Œæˆ‘ä»¬å†çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ JavaScript ä»£ç æ¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚æµè§ˆå™¨æä¾›äº†å‡ ä¸ªéå¸¸æ–¹ä¾¿çš„ APIï¼Œè¿™äº› API æ˜¯å¯¹åº•å±‚ WebRTC API çš„å°è£…ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul>\n<li>createOffer ï¼Œåˆ›å»º Offerï¼›</li>\n<li>createAnswerï¼Œåˆ›å»º Answerï¼›</li>\n<li>setLocalDescriptionï¼Œè®¾ç½®æœ¬åœ° SDP ä¿¡æ¯ï¼›</li>\n<li>setRemoteDescriptionï¼Œè®¾ç½®è¿œç«¯çš„ SDP ä¿¡æ¯ã€‚</li>\n</ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç»“åˆä¸Šè¿°çš„åå•†è¿‡ç¨‹å¯¹è¿™å‡ ä¸ªé‡è¦çš„ API åšä¸‹è¯¦ç»†çš„è®²è§£ã€‚</p><h3>1. å‘¼å«æ–¹åˆ›å»ºOffer</h3><p>å½“å‘¼å«æ–¹å‘èµ·å‘¼å«ä¹‹å‰ï¼Œé¦–å…ˆè¦åˆ›å»º Offer ç±»å‹çš„ SDP ä¿¡æ¯ï¼Œå³è°ƒç”¨ <strong>RTCPeerConnection</strong> çš„ createOffer() æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>   function doCall() {\n       console.log('Sending offer to peer');\n       pc.createOffer(setLocalAndSendMessage, handleCreateOfferError);\n\t}\t\n</code></pre><p>å¦‚æœcreateOfferå‡½æ•°è°ƒç”¨æˆåŠŸçš„è¯ï¼Œæµè§ˆå™¨ä¼šå›è°ƒæˆ‘ä»¬è®¾ç½®çš„ setLocalAndSendMessage æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨ setLocalAndSendMessage æ–¹æ³•é‡Œè·å–åˆ° <strong>RTCSessionDescription ç±»å‹çš„ SDP ä¿¡æ¯</strong>ï¼›å¦‚æœå‡ºé”™åˆ™ä¼šå›è°ƒ handleCreateOfferError æ–¹æ³•ã€‚</p><p>æœ€ç»ˆï¼Œåœ¨ setLocalAndSendMessage å›è°ƒæ–¹æ³•ä¸­ï¼Œé€šè¿‡ <strong>setLocalDescription()</strong> æ–¹æ³•å°†æœ¬åœ°SDPæè¿°ä¿¡æ¯è®¾ç½®åˆ° WebRTC çš„Local  åŸŸã€‚ç„¶åé€šè¿‡ä¿¡ä»¤é€šé“å°†æ­¤ä¼šè¯æè¿°å‘é€ç»™è¢«å‘¼å«æ–¹ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>  function setLocalAndSendMessage(sessionDescription) {\n      pc.setLocalDescription(sessionDescription);\n      sendMessage(sessionDescription);\n  }\n</code></pre><h3>2. è¢«å‘¼å«æ–¹æ”¶åˆ°Offer</h3><p>è¢«å‘¼å«æ–¹æ”¶åˆ° Offer åï¼Œè°ƒç”¨ <strong>setRemoteDescription</strong> æ–¹æ³•è®¾ç½®å‘¼å«æ–¹å‘é€ç»™å®ƒçš„Offerä½œä¸ºè¿œç«¯æè¿°ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>  socket.on('message', function(message) {\n      ...\n      } else if (message.type === 'offer') {\n    \n          pc.setRemoteDescription(new RTCSessionDescription(message));\n          doAnswer();\n      } else if (...) {\n          ...\n      }\n      ....\n  });\n</code></pre><h3>3. è¢«å‘¼å«æ–¹åˆ›å»ºAnswer</h3><p>ç„¶åï¼Œè¢«å‘¼å«æ–¹è°ƒç”¨ RTCPeerConnection å¯¹è±¡çš„ createAnswer æ–¹æ³•ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªä¸è¿œç¨‹ä¼šè¯å…¼å®¹çš„æœ¬åœ°ä¼šè¯ï¼Œå¹¶æœ€ç»ˆå°†è¯¥ä¼šè¯æè¿°å‘é€ç»™å‘¼å«æ–¹ã€‚</p><pre><code> function doAnswer() {\n     pc.createAnswer().then(\n         setLocalAndSendMessage,\n         onCreateSessionDescriptionError\n     );\n }\n</code></pre><h3>4. å‘¼å«æ–¹æ”¶åˆ°Answer</h3><p>å½“å‘¼å«æ–¹å¾—åˆ°è¢«å‘¼å«æ–¹çš„ä¼šè¯æè¿°ï¼Œå³ SDP æ—¶ï¼Œè°ƒç”¨ setRemoteDescriptionæ–¹æ³•ï¼Œå°†æ”¶åˆ°çš„ä¼šè¯æè¿°è®¾ç½®ä¸ºä¸€ä¸ªè¿œç¨‹ä¼šè¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>  socket.on('message', function(message) {\n      ...\n      } else if (message.type === 'answer') {\n    \n          pc.setRemoteDescription(new RTCSessionDescription(message));\n      } else if (...) {\n          ...\n      }\n      ....\n  });\n</code></pre><p>æ­¤æ—¶ï¼Œåª’ä½“åå•†è¿‡ç¨‹å®Œæˆã€‚ç´§æ¥ç€åœ¨ WebRTC åº•å±‚ä¼šæ”¶é›† Candidateï¼Œå¹¶è¿›è¡Œè¿é€šæ€§æ£€æµ‹ï¼Œæœ€ç»ˆåœ¨é€šè¯åŒæ–¹ä¹‹é—´å»ºç«‹èµ·ä¸€æ¡é“¾è·¯æ¥ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯é€šä¿¡åŒæ–¹äº¤æ¢åª’ä½“èƒ½åŠ›ä¿¡æ¯çš„è¿‡ç¨‹ã€‚ å¯¹äºä½ æ¥è¯´ï¼Œå¦‚æœåª’ä½“åå•†è¿™ä¸ªé€»è¾‘æ²¡ææ¸…æ¥šçš„è¯ï¼Œé‚£ä¹ˆï¼Œä½ åœ¨ç¼–å†™éŸ³è§†é¢‘ç›¸å…³ç¨‹åºæ—¶å¾ˆå®¹æ˜“å‡ºç°å„ç§é—®é¢˜ï¼Œæœ€å¸¸è§çš„å°±æ˜¯éŸ³è§†ä¹‹é—´ä¸èƒ½äº’é€šã€‚</p><p>å¦å¤–ï¼Œ<strong>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œé€šä¿¡åŒæ–¹é“¾è·¯çš„å»ºç«‹æ˜¯åœ¨è®¾ç½®æœ¬åœ°åª’ä½“èƒ½åŠ›ï¼Œå³è°ƒç”¨ setLocalDescription å‡½æ•°ä¹‹åæ‰è¿›è¡Œçš„</strong>ã€‚</p><h2>å°ç»“</h2><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å‘ä½ è¯¦ç»†ä»‹ç»äº† WebRTC è¿›è¡Œåª’ä½“åå•†çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ä½ å¿…é¡»ç‰¢è®°åœ¨è„‘å­é‡Œçš„ã€‚å¦‚æœå¯¹è¿™å—ä¸ç†Ÿæ‚‰çš„è¯ï¼Œåé¢ä½ åœ¨çœŸæ­£ä½¿ç”¨ WebRTC å¼€å‘éŸ³è§†é¢‘åº”ç”¨ç¨‹åºæ—¶å°±ä¼šé‡åˆ°å„ç§å›°éš¾ï¼Œå¦‚éŸ³è§†é¢‘ä¸é€šã€å•é€šç­‰æƒ…å†µã€‚</p><p>å¦å¤–ï¼Œæœ¬æ–‡è¿˜å‘ä½ ç®€è¦ä»‹ç»äº† RTCPeerConnection å¯¹è±¡ï¼Œå®ƒæ˜¯ WebRTC çš„æ ¸å¿ƒ APIï¼Œåª’ä½“åå•†çš„å…·ä½“æ“ä½œéƒ½æ˜¯é€šè¿‡è¯¥å¯¹è±¡æ¥å®Œæˆçš„ã€‚å¯¹äºè¯¥å¯¹è±¡ï¼Œæˆ‘ä¼šåœ¨åé¢çš„æ–‡ç« ä¸­åšæ›´è¯¦å°½çš„è§£ç­”ã€‚</p><p>RTCPeerConnection é™¤äº†ä¼šåœ¨ç«¯ä¸ç«¯ä¹‹é—´å»ºç«‹è¿æ¥ã€ä¼ è¾“éŸ³è§†é¢‘æ•°æ®å¤–ï¼Œè¿˜è¦è¿›è¡Œä¸¤æ¬¡ç»‘å®šï¼šä¸€æ¬¡æ˜¯ä¸åª’ä½“æºè¿›è¡Œç»‘å®šï¼Œä»¥è§£å†³æ•°æ®ä»å“ªé‡Œæ¥çš„é—®é¢˜ï¼›å¦å¤–ä¸€æ¬¡æ˜¯ä¸è¾“å‡ºè¿›è¡Œç»‘å®šï¼Œä»¥è§£å†³æ¥æ”¶åˆ°çš„éŸ³è§†é¢‘æ•°æ®æ˜¾ç¤º/æ’­æ”¾çš„é—®é¢˜ã€‚</p><h2>æ€è€ƒæ—¶é—´</h2><p>åœ¨ WebRTCä¸­ï¼ŒSDP æ¶ˆæ¯çš„äº¤æ¢æ˜¯ä½¿ç”¨ RTCPeerConnection å¯¹è±¡å®Œæˆçš„å—ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"07 | ä½ ç«Ÿç„¶ä¸çŸ¥é“SDPï¼Ÿå®ƒå¯æ˜¯WebRTCçš„é©±åŠ¨æ ¸å¿ƒï¼","id":111337},"right":{"article_title":"09 | è®©æˆ‘ä»¬æ­å¼€WebRTCå»ºç«‹è¿æ¥çš„ç¥ç§˜é¢çº±","id":112325}},"comments":[{"had_liked":false,"id":161532,"user_name":"qiezitx","can_delete":false,"product_type":"c1","uid":1664274,"ip_address":"","ucode":"AEA470E33B4C19","user_header":"https://static001.geekbang.org/account/avatar/00/19/65/12/98fe9d80.jpg","comment_is_top":false,"comment_ctime":1576224860,"is_pvip":false,"replies":[{"id":"62493","content":"éå¸¸å‡†ç¡®ï¼","user_name":"ä½œè€…å›å¤","comment_id":161532,"uid":"1507837","ip_address":"","utype":1,"ctime":1577025304,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"61705767004","product_id":100031801,"comment_content":"sdpä¿¡æ¯çš„äº¤æ¢æ˜¯é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨å®Œæˆçš„ï¼Œåªä¸è¿‡sdpçš„å¡«å†™æ˜¯é€šè¿‡RTCPeerConnectionå®Œæˆçš„","like_count":15,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477752,"discussion_content":"éå¸¸å‡†ç¡®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577025304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119461,"user_name":"wuqilv","can_delete":false,"product_type":"c1","uid":1169314,"ip_address":"","ucode":"B9C4A2C2FF32AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/d7/a2/5f6b90a9.jpg","comment_is_top":false,"comment_ctime":1564595106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18744464290","product_id":100031801,"comment_content":"å®¢æˆ·ç«¯é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨äº¤æ¢ SDP ä¿¡æ¯ã€‚","like_count":4},{"had_liked":false,"id":230876,"user_name":"æ³¢æ³¢å®‰","can_delete":false,"product_type":"c1","uid":1044388,"ip_address":"","ucode":"1BF03F6698CA65","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ef/a4/8882d172.jpg","comment_is_top":false,"comment_ctime":1593511135,"is_pvip":true,"replies":[{"id":"87933","content":"ä¿®æ”¹SDP,å°†m=videoä¸­çš„å¤šä¸ªç¼–ç å™¨æ¢ä¸€ä¸‹ä½ç½®ï¼ŒæŠŠH264æ”¾åœ¨æœ€å‰é¢å°±å¯ä»¥äº†ã€‚ä¸è¿‡ç”±äºWebRTCçš„æ•´ä½“æœºåˆ¶æ²¡æœ‰å¯¹ H264åšç‰¹åˆ«å¥½çš„é€‚é…ï¼Œæ‰€ä»¥ç‰¹åˆ«å®¹æ˜“äº§ç”Ÿå¡é¡¿ä¸èŠ±å±ã€‚","user_name":"ä½œè€…å›å¤","comment_id":230876,"uid":"1507837","ip_address":"","utype":1,"ctime":1596027598,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":1,"race_medal":0,"score":"14478413023","product_id":100031801,"comment_content":"æˆ‘ä½¿ç”¨chromeæ’­æ”¾h264è§†é¢‘æµï¼Œæµåª’ä½“ä½¿ç”¨kurentoï¼Œå†…éƒ¨åšäº†è½¬ç ä¸ºvp8ï¼Œchromeé»˜è®¤ä½¿ç”¨vp8åå•†ï¼Œä»€ä¹ˆæ–¹æ³•å¯ä»¥ä½¿chromeä½¿ç”¨h264ï¼Œé¿å…è½¬ç ","like_count":4,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500058,"discussion_content":"ä¿®æ”¹SDP,å°†m=videoä¸­çš„å¤šä¸ªç¼–ç å™¨æ¢ä¸€ä¸‹ä½ç½®ï¼ŒæŠŠH264æ”¾åœ¨æœ€å‰é¢å°±å¯ä»¥äº†ã€‚ä¸è¿‡ç”±äºWebRTCçš„æ•´ä½“æœºåˆ¶æ²¡æœ‰å¯¹ H264åšç‰¹åˆ«å¥½çš„é€‚é…ï¼Œæ‰€ä»¥ç‰¹åˆ«å®¹æ˜“äº§ç”Ÿå¡é¡¿ä¸èŠ±å±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596027598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142303,"user_name":"ä¿Šå“¥","can_delete":false,"product_type":"c1","uid":1678451,"ip_address":"","ucode":"C5548F817D97B0","user_header":"https://static001.geekbang.org/account/avatar/00/19/9c/73/4d23e4f2.jpg","comment_is_top":false,"comment_ctime":1571329516,"is_pvip":false,"replies":[{"id":"55200","content":"é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨è½¬å‘ã€‚ Aä¸Béƒ½è¦å…ˆä¸ä¿¡ä»¤æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œä¹‹åé€šè¿‡æœåŠ¡å™¨è½¬å‘ã€‚","user_name":"ä½œè€…å›å¤","comment_id":142303,"uid":"1507837","ip_address":"","utype":1,"ctime":1571586515,"user_name_real":"garrylee"}],"discussion_count":3,"race_medal":0,"score":"14456231404","product_id":100031801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼ŒAæ€ä¹ˆçŸ¥é“å‘¼å«çš„Bè€Œä¸æ˜¯å…¶ä»–çš„Cã€Då‘¢ï¼Ÿä»ä½ çš„jsä»£ç é‡Œæ²¡æœ‰çœ‹å‡ºæ¥å¯¹Bçš„æè¿°ï¼Œæ¯”å¦‚Bçš„ipåœ°å€æ˜¯xxx.xxx.xxx.xxxã€‚é‚£ä¹ˆAè°ƒç”¨sendMessage(sessionDescription)å‘åˆ°å“ªé‡Œå»äº†å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471068,"discussion_content":"é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨è½¬å‘ã€‚ Aä¸Béƒ½è¦å…ˆä¸ä¿¡ä»¤æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œä¹‹åé€šè¿‡æœåŠ¡å™¨è½¬å‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571586515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148770,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIROsBAWicJYLbnzYH3ibiaX2T2am9z4IKxp34uJSgib2ntfh9zKLtndAcfCUJHLZO7Q3jkia3aKu8eOSg/132","nickname":"lqqçƒ­çˆ±å­¦ä¹ ","note":"","ucode":"25795B06CA56A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369428,"discussion_content":"sendMessageæ˜¯ä½ è‡ªå·±å®ç°çš„, ä½ è¦è´Ÿè´£å†™ä¸€ä¸ªæœåŠ¡æŠŠofferä»Aç«¯å‘é€ç»™Bç«¯, ç„¶åBç«¯åå•†å®Œæˆåè¿”å›ç»™Aç«¯, è¿™ä¸ªæ˜¯ä½ è‡ªå·±è¦åšçš„ä¸€ä¸ªæœåŠ¡, webrtcå¹¶æ²¡æœ‰è§„å®šä½ è¦æ€ä¹ˆåš, ç°åœ¨ä¸»æµçš„åšæ³•æ˜¯æä¸€ä¸ªä¿¡ä»¤æœåŠ¡å™¨, ä¹Ÿç§°ä¹‹ä¸ºæˆ¿é—´æœåŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619021339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1029473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b5/61/9802a552.jpg","nickname":"ican_åªä¼š0åˆ°9","note":"","ucode":"9EE33C42EE519D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272391,"discussion_content":"æ‰¾ä¸€ä¸ªä¸­é—´äºº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590297361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119487,"user_name":"Jian","can_delete":false,"product_type":"c1","uid":1023040,"ip_address":"","ucode":"358133EC2AFEB0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/40/6323850e.jpg","comment_is_top":false,"comment_ctime":1564618692,"is_pvip":false,"replies":[{"id":"43840","content":"è°å…ˆå‘èµ·å‘¼å«è°å°±å‘offer,å¦ä¸€æ–¹å‘answer;è¿™å®Œå…¨æœ‰åº”ç”¨å±‚æ§åˆ¶ï¼›æ¯”å¦‚ç¬¬ä¸€ä¸ªäººè¿›å…¥æˆ¿é—´åï¼Œå°±åœ¨å“ªé‡Œç­‰å¾…ï¼Œå½“å‘ç°ç¬¬äºŒä¸ªäººä¸Šæ¥çš„æ—¶å€™å®ƒå°±ç»™å¯¹æ–¹å‘offer å°±å¥½äº†ã€‚å¦‚æœä¸¤ä¸ªäººåŒæ—¶è¿›å…¥æˆ¿é—´ï¼Œå°±åœ¨æœåŠ¡å™¨ç«¯å»ºä¸ªé˜Ÿåˆ—ï¼Œè®©ä»–ä»¬é¡ºåºè¿›å…¥å°±å¥½äº†ï¼Œéå¸¸å¥½å¤„ç†å¯¹å§ï¼Ÿå¦å¤–ä¸¤ç«¯éƒ½å‘offer é‚£åå•†å¿…ç„¶å¤±è´¥ã€‚","user_name":"ä½œè€…å›å¤","comment_id":119487,"uid":"1507837","ip_address":"","utype":1,"ctime":1564626679,"user_name_real":"garrylee"}],"discussion_count":3,"race_medal":0,"score":"14449520580","product_id":100031801,"comment_content":"å‘¼å«æ–¹å’Œè¢«å‘¼å«æ–¹çš„è§’è‰²æ˜¯å¦‚ä½•ç¡®è®¤çš„å‘¢ï¼Ÿä¼šå¦å­˜åœ¨ä¸¤ç«¯éƒ½å‘å¯¹æ–¹å‘é€offerçš„æƒ…å†µï¼Ÿæ˜¯ç”±æœåŠ¡å™¨ç¡®å®šçš„ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460923,"discussion_content":"è°å…ˆå‘èµ·å‘¼å«è°å°±å‘offer,å¦ä¸€æ–¹å‘answer;è¿™å®Œå…¨æœ‰åº”ç”¨å±‚æ§åˆ¶ï¼›æ¯”å¦‚ç¬¬ä¸€ä¸ªäººè¿›å…¥æˆ¿é—´åï¼Œå°±åœ¨å“ªé‡Œç­‰å¾…ï¼Œå½“å‘ç°ç¬¬äºŒä¸ªäººä¸Šæ¥çš„æ—¶å€™å®ƒå°±ç»™å¯¹æ–¹å‘offer å°±å¥½äº†ã€‚å¦‚æœä¸¤ä¸ªäººåŒæ—¶è¿›å…¥æˆ¿é—´ï¼Œå°±åœ¨æœåŠ¡å™¨ç«¯å»ºä¸ªé˜Ÿåˆ—ï¼Œè®©ä»–ä»¬é¡ºåºè¿›å…¥å°±å¥½äº†ï¼Œéå¸¸å¥½å¤„ç†å¯¹å§ï¼Ÿå¦å¤–ä¸¤ç«¯éƒ½å‘offer é‚£åå•†å¿…ç„¶å¤±è´¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564626679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397592,"discussion_content":"ç”¨é˜Ÿåˆ—ä¿è¯é¡ºåºï¼Œä¸ä¼šå‡ºç° â€œåŒæ—¶è¿›å…¥â€çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632647745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1078023,"avatar":"https://static001.geekbang.org/account/avatar/00/10/73/07/c1a31ede.jpg","nickname":"åˆ˜å…ˆæ£®","note":"","ucode":"87ACF0D9AFD52D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":139626,"discussion_content":"åœ¨nodeä¸­ä¸ä¼šå‡ºç°åŒæ—¶è¿›å…¥çš„æƒ…å†µå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579309045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208964,"user_name":"icema","can_delete":false,"product_type":"c1","uid":1967595,"ip_address":"","ucode":"0054EBA80A8E5F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/6Cyqp7uksJibb0mowEHwauO21PhC2caIBz0ZZQq9Xpzo9jGYYnXamIP6n6YJWoDm9wngTPh0x8GzDLpaun6H9HA/132","comment_is_top":false,"comment_ctime":1587474740,"is_pvip":false,"replies":[{"id":"78596","content":"ä½ å¯èƒ½é€šè¿‡receiveré‡Œçš„ç»Ÿè®¡ä¿¡æ¯æ¥åˆ¤æ–­","user_name":"ä½œè€…å›å¤","comment_id":208964,"uid":"1507837","ip_address":"","utype":1,"ctime":1587983224,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"10177409332","product_id":100031801,"comment_content":"ç›®å‰é‡åˆ°äº†é‡‡é›†steamæ²¡æœ‰å£°éŸ³çš„é—®é¢˜ï¼Œå¯¹æ–¹å¬ä¸åˆ°æˆ‘çš„å£°éŸ³ï¼Œå¹¶ä¸”æ˜¯å¶ç°ï¼Œä¸æ˜¯å¿…ç°ï¼Œå‰ç«¯æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹å¼å¯ä»¥æ£€æµ‹æˆ–è€…ç›‘æ§é‡‡é›†åˆ°çš„æµæ˜¯å­˜åœ¨å¼‚å¸¸çš„æˆ–è€…æ²¡æœ‰å£°éŸ³çš„å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492687,"discussion_content":"ä½ å¯èƒ½é€šè¿‡receiveré‡Œçš„ç»Ÿè®¡ä¿¡æ¯æ¥åˆ¤æ–­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587983224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119814,"user_name":"å›","can_delete":false,"product_type":"c1","uid":1607419,"ip_address":"","ucode":"F3051212585BF5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/u9oss767Kxzbl3SVgibUzngqMiafndGzA43bgPTw8BRvTCGicAl5La5HfZJm9rTYQJBE65TkePiaVEtMDquUIaEOAg/132","comment_is_top":false,"comment_ctime":1564707458,"is_pvip":false,"replies":[{"id":"44091","content":"ä½ å¯ä»¥ä½¿ç”¨sip åè®®åšä¿¡ä»¤ï¼Œä½†sip åè®®ç”¨çš„äººæ¯”è¾ƒå°‘ï¼Œä¸€èˆ¬éƒ½åœ¨ç›‘æ§ç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œç›®å‰å¼€æºçš„åŸºæœ¬æ²¡æœ‰äººä½¿ç”¨sip ä¸WebRTC ç»“åˆ","user_name":"ä½œè€…å›å¤","comment_id":119814,"uid":"1507837","ip_address":"","utype":1,"ctime":1564796553,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"10154642050","product_id":100031801,"comment_content":"è¯·é—®è€å¸ˆå“ªäº›å¼€æºçš„sipæ¡†æ¶æ”¯æŒwebrtbcçš„å—","like_count":2,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461083,"discussion_content":"ä½ å¯ä»¥ä½¿ç”¨sip åè®®åšä¿¡ä»¤ï¼Œä½†sip åè®®ç”¨çš„äººæ¯”è¾ƒå°‘ï¼Œä¸€èˆ¬éƒ½åœ¨ç›‘æ§ç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œç›®å‰å¼€æºçš„åŸºæœ¬æ²¡æœ‰äººä½¿ç”¨sip ä¸WebRTC ç»“åˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564796553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625822,"avatar":"https://static001.geekbang.org/account/avatar/00/18/ce/de/6a9aa35a.jpg","nickname":"ææœ‰é’±","note":"","ucode":"F42EA654005525","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60582,"discussion_content":"æ®è¯´sipjs å°±æ˜¯ç”¨webrtcå®ç°çš„sip","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574739324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288601,"user_name":"Her later","can_delete":false,"product_type":"c1","uid":2033044,"ip_address":"","ucode":"85BDB2DC93C0F2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/05/94/e55abef3.jpg","comment_is_top":false,"comment_ctime":1618556994,"is_pvip":false,"replies":[{"id":"105426","content":"Webrtc åº•å±‚æ”¶é›†çš„candidate æ˜¯ä»–è‡ªå·±çš„åœ°å€ä¿¡æ¯å‘€ï¼Œéœ€è¦é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨äº¤æ¢ç»™å¯¹ç«¯åŒæ–¹æ‰èƒ½é€šä¿¡","user_name":"ä½œè€…å›å¤","comment_id":288601,"uid":"1507837","ip_address":"","utype":1,"ctime":1619871111,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":2,"race_medal":0,"score":"5913524290","product_id":100031801,"comment_content":"æ­¤æ—¶ï¼Œåª’ä½“åå•†è¿‡ç¨‹å®Œæˆã€‚ç´§æ¥ç€åœ¨ WebRTC åº•å±‚ä¼šæ”¶é›† Candidateï¼Œå¹¶è¿›è¡Œè¿é€šæ€§æ£€æµ‹ï¼Œæœ€ç»ˆåœ¨é€šè¯åŒæ–¹ä¹‹é—´å»ºç«‹èµ·ä¸€æ¡é“¾è·¯æ¥ã€‚<br>å¦‚æœ Candidate æ˜¯ WebRTC åº•å±‚æ”¶é›†çš„ ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦ç»è¿‡ä¿¡ä»¤æœåŠ¡å™¨å‘¢ ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518681,"discussion_content":"Webrtc åº•å±‚æ”¶é›†çš„candidate æ˜¯ä»–è‡ªå·±çš„åœ°å€ä¿¡æ¯å‘€ï¼Œéœ€è¦é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨äº¤æ¢ç»™å¯¹ç«¯åŒæ–¹æ‰èƒ½é€šä¿¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619871111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148770,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIROsBAWicJYLbnzYH3ibiaX2T2am9z4IKxp34uJSgib2ntfh9zKLtndAcfCUJHLZO7Q3jkia3aKu8eOSg/132","nickname":"lqqçƒ­çˆ±å­¦ä¹ ","note":"","ucode":"25795B06CA56A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369424,"discussion_content":"Candidateçš„æ•°æ®æ˜¯iceé‚£ä¸€å¥—è·å¾—çš„, Candidateæ•°æ®æ˜¯è¦ç»™å¯¹ç«¯, è®©å¯¹æ–¹è¿ä¸Šä½ . åŒç«¯æ˜¯ä¸èƒ½ç›´æ¥äº¤æ¢æ•°æ®çš„, åªèƒ½é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨è·å–åˆ°å¯¹æ–¹çš„Candidateæ‰èƒ½è¿ä¸Šå¯¹æ–¹.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619020665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177596,"user_name":"Benjamin","can_delete":false,"product_type":"c1","uid":1168314,"ip_address":"","ucode":"9650EFA8481B41","user_header":"https://static001.geekbang.org/account/avatar/00/11/d3/ba/75f3b73b.jpg","comment_is_top":false,"comment_ctime":1581431357,"is_pvip":false,"replies":[{"id":"70153","content":"åå•†æˆåŠŸä¹‹åå°±ä¸ä¼šå†æœ‰äº†ï¼Œé™¤éä½ è‡ªå·±è¦é‡æ–°å†è¿›è¡Œåå•†","user_name":"ä½œè€…å›å¤","comment_id":177596,"uid":"1507837","ip_address":"","utype":1,"ctime":1582429837,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5876398653","product_id":100031801,"comment_content":"ä¸¤ç«¯çš„ SDP çš„åˆ›å»ºéƒ½æ˜¯åœ¨ RTCPeerConnection ä¸­å®Œæˆï¼Œåˆ›å»ºå¥½äº† SDP ä¿¡æ¯ã€‚è‡³äºä¸¤ç«¯äº¤æ¢è¿™ä¸ª SDP çš„å®ç°ï¼Œæ˜¯å®Œå…¨å¯ä»¥å‰¥ç¦»è§£è€¦çš„ã€‚<br>å¸¸è§å°±æ˜¯ç”¨ single æœåŠ¡å™¨æ¥äº¤æ¢ï¼Œè‡³äºäº¤æ¢ SDP çš„å…·ä½“æ‰¿è½½æ¨¡å¼éƒ½æ˜¯è‡ªå·±å»å®ç°çš„ã€‚<br>å¸¸è§å°±æ˜¯ç”¨ socketï¼Œä¸ºäº†å¥½ç©æˆ–è€…ä¸€äº›å¸¸è§ç”¨ HTTP ä¹Ÿå¯ä»¥ï¼Œç”šè‡³å¯ä»¥ç”Ÿæˆ txt æ–‡ä»¶åœ¨ç”¨ ftp äº¤æ¢éƒ½å¯ä»¥åªè¦ä¸å«Œéº»çƒ¦ ğŸ˜€<br><br>ä½†æ˜¯ï¼ŒSDP ç¬¬ä¸€æ¬¡åçš„æ¥å›äº¤æ¢æ˜¯ä¸æ˜¯è¿˜æœ‰ï¼Œè¿™å—ä¸€ç›´å¾ˆç–‘æƒ‘ã€‚","like_count":2,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483478,"discussion_content":"åå•†æˆåŠŸä¹‹åå°±ä¸ä¼šå†æœ‰äº†ï¼Œé™¤éä½ è‡ªå·±è¦é‡æ–°å†è¿›è¡Œåå•†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582429837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119666,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1053390,"ip_address":"","ucode":"ABB3F1A63E102A","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/ce/a8c8b5e8.jpg","comment_is_top":false,"comment_ctime":1564648947,"is_pvip":false,"replies":[{"id":"43913","content":"æœ‰æ²¡æœ‰æƒ³è¿‡ç”¨httpï¼Ÿå®ƒå¯æ˜¯æµè§ˆå™¨å¤©ç„¶çš„å“ˆ","user_name":"ä½œè€…å›å¤","comment_id":119666,"uid":"1507837","ip_address":"","utype":1,"ctime":1564664505,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5859616243","product_id":100031801,"comment_content":"æ€è€ƒé¢˜ï¼šä»è€å¸ˆçš„è®²è§£æ¥çœ‹ï¼ŒSDP æ¶ˆæ¯çš„äº¤æ¢ä¸æ˜¯ä½¿ç”¨ RTCPeerConnectionå¯¹è±¡å®Œæˆçš„ï¼ŒRTCPeerConnectionå¯¹è±¡è´Ÿè´£åˆ›å»ºofferã€è®¾ç½®æœ¬åœ°SDPæè¿°ä¿¡æ¯ã€è®¾ç½®è¿œç«¯SDPæè¿°ä¿¡æ¯ã€åˆ›å»ºanswerã€‚äº¤æ¢SDPæ¶ˆæ¯åº”è¯¥æ˜¯socketå¯¹è±¡å®Œæˆçš„ï¼Œä½†socketçš„ç±»å‹å•¥å‘¢ï¼Œè¿˜ä¸çŸ¥é“ã€‚<br>","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461005,"discussion_content":"æœ‰æ²¡æœ‰æƒ³è¿‡ç”¨httpï¼Ÿå®ƒå¯æ˜¯æµè§ˆå™¨å¤©ç„¶çš„å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564664505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119504,"user_name":"Beast-Of-Prey","can_delete":false,"product_type":"c1","uid":1615956,"ip_address":"","ucode":"C8BAEB1EFA50EE","user_header":"https://static001.geekbang.org/account/avatar/00/18/a8/54/06da255b.jpg","comment_is_top":false,"comment_ctime":1564620133,"is_pvip":false,"replies":[{"id":"43835","content":"ç”±äºä¿¡ä»¤æ•°æ®é‡ä¸å¤§ï¼Œæ‰€ä»¥ä½ å¯é€‰æ‹©çš„åè®®å°±æ¯”è¾ƒå¤šäº†ï¼ŒTCPã€HTTP&#47;HTTPSã€WS&#47;WSSï¼Œéƒ½å¯ä»¥ï¼Œåº•å±‚å®ç°éƒ½æ˜¯ç”¨çš„socket","user_name":"ä½œè€…å›å¤","comment_id":119504,"uid":"1507837","ip_address":"","utype":1,"ctime":1564626344,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5859587429","product_id":100031801,"comment_content":"å‘é€ä¿¡ä»¤ç”¨socketï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460933,"discussion_content":"ç”±äºä¿¡ä»¤æ•°æ®é‡ä¸å¤§ï¼Œæ‰€ä»¥ä½ å¯é€‰æ‹©çš„åè®®å°±æ¯”è¾ƒå¤šäº†ï¼ŒTCPã€HTTP/HTTPSã€WS/WSSï¼Œéƒ½å¯ä»¥ï¼Œåº•å±‚å®ç°éƒ½æ˜¯ç”¨çš„socket","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564626344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346928,"user_name":"npersonal","can_delete":false,"product_type":"c1","uid":1337630,"ip_address":"","ucode":"060839D2BF5E33","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKOCkbWo7KTAUYkTk5sqgOSAdjS51ZH8bTxiaBNLVnIFUOMsicBHRJBoXSOX6sZp5uORE2waGyz3ysw/132","comment_is_top":false,"comment_ctime":1653540847,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653540847","product_id":100031801,"comment_content":"è€å¸ˆï¼Œæœ‰åŠæ³•æŒ‡å®šcodecæ˜¯ä½¿ç”¨ç¡¬è§£è¿˜æ˜¯è½¯è§£å—ï¼Œç›®å‰å‘ç°åœ¨è‹¹æœè®¾å¤‡ä¸Šç¡¬è§£ä¸€äº›h264çš„è§†é¢‘ä¼šå¤±è´¥æ‰ï¼Œsafariä¹Ÿæ²¡æœ‰é™çº§å¤„ç†ï¼Œchromeæœ‰é™çº§åˆ°è½¯è§£","like_count":0},{"had_liked":false,"id":340300,"user_name":"å†¤å¤§å¤´","can_delete":false,"product_type":"c1","uid":2440525,"ip_address":"","ucode":"692BD60A03D593","user_header":"","comment_is_top":false,"comment_ctime":1648731644,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648731644","product_id":100031801,"comment_content":"å¤šäººè¿›æ¥åå•†ï¼Œç„¶åå¦‚æœABCå·²ç»åå•†å¥½äº† åœ¨é€šè¯è§†é¢‘ï¼Œç„¶åDè¿›æ¥ï¼Œæ˜¯è¦è·ŸABCä¸‰äººéƒ½åå•†ä¹ˆï¼Ÿ4ä¸ªäººè¦åå•†å‡ºæ¥ä¸€ä¸ªç›¸åŒçš„äº¤é›†ä¹ˆï¼Ÿå¦‚æœç¬¬å››ä¸ªäººè¿›æ¥æ²¡æœ‰äº¤é›†ï¼Œæ¯”å¦‚å‰ä¸‰ä¸ªæ”¯æŒh264,ç¬¬å››ä¸ªäººåªæ”¯æŒvp8ï¼Œæ€ä¹ˆåŠï¼Ÿ","like_count":0},{"had_liked":false,"id":288058,"user_name":"Her later","can_delete":false,"product_type":"c1","uid":2033044,"ip_address":"","ucode":"85BDB2DC93C0F2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/05/94/e55abef3.jpg","comment_is_top":false,"comment_ctime":1618283077,"is_pvip":false,"replies":[{"id":"105429","content":"æ²¡ä¸Šæ¥ä¸€ä¸ªäººå°±å‘é€ä¸€æ¬¡offer å’Œanswer ","user_name":"ä½œè€…å›å¤","comment_id":288058,"uid":"1507837","ip_address":"","utype":1,"ctime":1619871431,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":1,"race_medal":0,"score":"1618283077","product_id":100031801,"comment_content":"å¦‚æœå¤šäººäº’åŠ¨ï¼Œæ€ä¹ˆäº¤æ¢sdpå‘¢ï¼Œæ¯ä¸¤ä¸ªäººä¹‹é—´éƒ½éœ€è¦å‘é€offerå’Œanswer å—ï¼Ÿ1v1åœºæ™¯ï¼Œä¸€ä¸ªå‘offer ä¸€ä¸ªå‘answer ï¼Œæ€ä¹ˆç¡®ä¿å‘offer çš„äººä¼šå…ˆè¿›æˆ¿é—´å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518501,"discussion_content":"æ²¡ä¸Šæ¥ä¸€ä¸ªäººå°±å‘é€ä¸€æ¬¡offer å’Œanswer ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619871431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257427,"user_name":"Bubbly","can_delete":false,"product_type":"c1","uid":1932887,"ip_address":"","ucode":"5AAAFDBCBC4CEB","user_header":"https://static001.geekbang.org/account/avatar/00/1d/7e/57/588337e9.jpg","comment_is_top":false,"comment_ctime":1603967886,"is_pvip":false,"replies":[{"id":"94539","content":"åœ¨ä¿¡ä»¤æœåŠ¡å™¨ä¸Šæœ‰roomçš„æ¦‚å¿µï¼Œå¤§å®¶è¦å…ˆåŠ å…¥åˆ°åŒä¸€ä¸ªroomä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å½¼æ­¤æ‰¾åˆ°å¯¹æ–¹äº†","user_name":"ä½œè€…å›å¤","comment_id":257427,"uid":"1507837","ip_address":"","utype":1,"ctime":1605003504,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":2,"race_medal":0,"score":"1603967886","product_id":100031801,"comment_content":"<br>  function setLocalAndSendMessage(sessionDescription) {<br>      pc.setLocalDescription(sessionDescription);<br>      sendMessage(sessionDescription);<br>  }<br>è¿™é‡Œçš„sendMessageåœ¨çœŸå®é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿåˆ›å»ºè€…æ˜¯å¦‚ä½•å‡†ç¡®çš„æ‰¾åˆ°å¯¹ç«¯çš„å‘¢ï¼Ÿè¿™é‡Œæ²¡ææ¸…æ¥š","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508325,"discussion_content":"åœ¨ä¿¡ä»¤æœåŠ¡å™¨ä¸Šæœ‰roomçš„æ¦‚å¿µï¼Œå¤§å®¶è¦å…ˆåŠ å…¥åˆ°åŒä¸€ä¸ªroomä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å½¼æ­¤æ‰¾åˆ°å¯¹æ–¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605003504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148770,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIROsBAWicJYLbnzYH3ibiaX2T2am9z4IKxp34uJSgib2ntfh9zKLtndAcfCUJHLZO7Q3jkia3aKu8eOSg/132","nickname":"lqqçƒ­çˆ±å­¦ä¹ ","note":"","ucode":"25795B06CA56A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369427,"discussion_content":"webrtcéƒ½æ²¡æœ‰è§„å®š, webrtcåªè§„å®šäº†offer/answerè¿™ä¸ªæµç¨‹, è‡³äºä½ offeræ€ä¹ˆå‘åˆ°å¯¹ç«¯, answeræ€ä¹ˆæ¥å—éƒ½æ˜¯ä½ è‡ªå·±å®ç°. ç”šè‡³ä½ å¯ä»¥ç›´æ¥æ‰‹åŠ¨è¾“å…¥è¿™äº›ä¿¡æ¯(å½“ç„¶è¿™ä¸ªæ˜¯å¼€ç©ç¬‘çš„,æˆ‘ä»¬éƒ½æ˜¯ä¸ä¼šè¿™ä¹ˆå®ç°çš„), ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªå«ä¿¡ä»¤æœåŠ¡å™¨çš„äº¤æ¢æ•°æ®, ä¹Ÿç§°ä¹‹ä¸ºæˆ¿é—´æœåŠ¡. ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619021174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215901,"user_name":"æ—æ™“å¨","can_delete":false,"product_type":"c1","uid":1972511,"ip_address":"","ucode":"1CD7376C5A7F23","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/uoPcB6q9VZmyV1IYrnBiaYneyrTeibjSbo981QYQK7O968w1ticehtGmNJ8Kx9EdKFwoiczuUT3blkNn1EBO3PXWgA/132","comment_is_top":false,"comment_ctime":1589127908,"is_pvip":true,"replies":[{"id":"81391","content":"JS çš„ socket.io åº“","user_name":"ä½œè€…å›å¤","comment_id":215901,"uid":"1507837","ip_address":"","utype":1,"ctime":1590295693,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":1,"race_medal":0,"score":"1589127908","product_id":100031801,"comment_content":"è€å¸ˆï¼Œé‚£ä¸ªsocketå¯¹è±¡æ˜¯ç”¨ä»€ä¹ˆç±»åˆ›å»ºçš„","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494602,"discussion_content":"JS çš„ socket.io åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590295693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119944,"user_name":"scorpio","can_delete":false,"product_type":"c1","uid":1097663,"ip_address":"","ucode":"E70367E765C33E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLqw36DnEjicRuXZO3fg3FftGLu6Kyvf7mOh456wicRan0hnghLoGowpYjnic5aTVESLE7oWqjljvj4A/132","comment_is_top":false,"comment_ctime":1564734896,"is_pvip":true,"replies":[{"id":"44201","content":"åº”è¯¥è¦åšåè®®è½¬æ¢ï¼Œ è¦çœ‹ NVRç”¨çš„å•¥åè®®ï¼ŒSIPï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":119944,"uid":"1507837","ip_address":"","utype":1,"ctime":1564919980,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1564734896","product_id":100031801,"comment_content":"è€å¸ˆï¼Œä»NVRæ¨æµåˆ°Webç«¯å±•ç¤ºç›‘æ§çš„å®æ—¶è§†é¢‘ï¼Œæœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿç³»ç»Ÿè¿è¡Œåœ¨å†…ç½‘ä¸Š","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461142,"discussion_content":"åº”è¯¥è¦åšåè®®è½¬æ¢ï¼Œ è¦çœ‹ NVRç”¨çš„å•¥åè®®ï¼ŒSIPï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564919980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119733,"user_name":"Geek_e39e6f","can_delete":false,"product_type":"c1","uid":1462248,"ip_address":"","ucode":"E84FEA1FF40AC7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo6WShSZ8pdClLHyxyH8ER3HlaQN8mWUCWiasIe5RUCWJ0Rbxq4eMIibibt606yh2cpTicZoyCou8Eaxg/132","comment_is_top":false,"comment_ctime":1564667691,"is_pvip":false,"replies":[{"id":"43918","content":"ä½ è¯´çš„é‚£æ˜¯ä»¥å‰äº†ï¼Œç°åœ¨æ–¹å¼å·²ç»æ”¹äº†ï¼","user_name":"ä½œè€…å›å¤","comment_id":119733,"uid":"1507837","ip_address":"","utype":1,"ctime":1564672787,"user_name_real":"garrylee"}],"discussion_count":3,"race_medal":0,"score":"1564667691","product_id":100031801,"comment_content":" WebRTC åº•å±‚ä¼šæ”¶é›† Candidateï¼Œå°±æ˜¯é€šè¿‡stunï¼ŒturnæœåŠ¡è·å–å€™é€‰åœ°å€å—ï¼Ÿ<br>è¿™ä¸ªæµç¨‹ä¸æ˜¯åœ¨äº¤æ¢sdpä¹‹å‰å°±åº”è¯¥è·å–ï¼Œç„¶åè®°å½•åœ¨sdpé‡Œï¼Œå‘é€ç»™å¯¹ç«¯çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461044,"discussion_content":"ä½ è¯´çš„é‚£æ˜¯ä»¥å‰äº†ï¼Œç°åœ¨æ–¹å¼å·²ç»æ”¹äº†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564672787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1462248,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo6WShSZ8pdClLHyxyH8ER3HlaQN8mWUCWiasIe5RUCWJ0Rbxq4eMIibibt606yh2cpTicZoyCou8Eaxg/132","nickname":"Geek_e39e6f","note":"","ucode":"E84FEA1FF40AC7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3666,"discussion_content":"è€å¸ˆï¼Œé‚£æ”¶é›†åˆ°candidateåï¼Œç›¸å…³ä¿¡æ¯æ˜¯æ€ä¹ˆé€šçŸ¥ç»™å¯¹ç«¯çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564673281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1148770,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIROsBAWicJYLbnzYH3ibiaX2T2am9z4IKxp34uJSgib2ntfh9zKLtndAcfCUJHLZO7Q3jkia3aKu8eOSg/132","nickname":"lqqçƒ­çˆ±å­¦ä¹ ","note":"","ucode":"25795B06CA56A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1462248,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo6WShSZ8pdClLHyxyH8ER3HlaQN8mWUCWiasIe5RUCWJ0Rbxq4eMIibibt606yh2cpTicZoyCou8Eaxg/132","nickname":"Geek_e39e6f","note":"","ucode":"E84FEA1FF40AC7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369426,"discussion_content":"ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨é€šçŸ¥å¯¹æ–¹, ä¿¡ä»¤æœåŠ¡å™¨ä¸€èˆ¬éƒ½ä¼šå’Œæ¯ä¸ªç”¨æˆ·ä¹‹é—´æœ‰ä¸€ä¸ªé•¿é“¾æ¥.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619020911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3666,"ip_address":""},"score":369426,"extra":""}]}]},{"had_liked":false,"id":119679,"user_name":"èŠ±æœå±±ã®é…¸æ¢…æ±¤","can_delete":false,"product_type":"c1","uid":1606018,"ip_address":"","ucode":"E4A71E8AD52CB3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoicwtj6x3l7NEcODqsXHjUTjzbl99pesNbydQUSfR6IywcKKyyaY9AIhBS0bCz3R8icMRIploDdUQA/132","comment_is_top":false,"comment_ctime":1564651314,"is_pvip":false,"replies":[{"id":"43912","content":"Js ä¸ c++çš„äº’è°ƒæ˜¯é€šè¿‡V8 å¼•æ“ï¼Œè‡³äºé‚£äº›æ˜¯WebRTC å®ç°çš„ï¼Œé‚£äº›æ˜¯æµè§ˆå™¨å®ç°çš„ï¼Œä½ åé¢æ…¢æ…¢ç†Ÿæ‚‰äº†å°±æ¸…æ¥šäº†ï¼Œåˆ«ç€æ€¥","user_name":"ä½œè€…å›å¤","comment_id":119679,"uid":"1507837","ip_address":"","utype":1,"ctime":1564664418,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1564651314","product_id":100031801,"comment_content":"æ„Ÿè°¢è®²è§£ï¼Œè¯·é—®æè€å¸ˆwebrtcçš„c++ APIæ˜¯å¦‚ä½•æ˜ å°„ä¸ºJS APIçš„ï¼Œå¦å¤–å®˜æ–¹JS APIè§„èŒƒå®šä¹‰çš„åŠŸèƒ½ï¼Œå¦‚ä½•å¯ä»¥ç¡®è®¤é‚£äº›æ˜¯åœ¨æµè§ˆå™¨ä¸­å®ç°ï¼Œé‚£äº›æ˜¯åœ¨webrtc c++ä¸­å®ç°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461014,"discussion_content":"Js ä¸ c++çš„äº’è°ƒæ˜¯é€šè¿‡V8 å¼•æ“ï¼Œè‡³äºé‚£äº›æ˜¯WebRTC å®ç°çš„ï¼Œé‚£äº›æ˜¯æµè§ˆå™¨å®ç°çš„ï¼Œä½ åé¢æ…¢æ…¢ç†Ÿæ‚‰äº†å°±æ¸…æ¥šäº†ï¼Œåˆ«ç€æ€¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564664418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}