{"id":274485,"title":"47 | 使用pytest重构项目：实现用例依赖、测试报告、数据参数化","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Selenium\">https://gitee.com/geektime-geekbang/Selenium</a></p>","comments":[{"had_liked":false,"id":286409,"user_name":"白扬","can_delete":false,"product_type":"c3","uid":1888932,"ip_address":"","ucode":"742ED44167ECC1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIR9q1SeGk89lUYtcOQzKKOP5tuVqzTiaxS1vAL3RkmGNN9XaTjV3YtUGSsNXnSIg8K2nM6pZ01PFA/132","comment_is_top":false,"comment_ctime":1617284283,"is_pvip":false,"replies":[{"id":105559,"content":"看看是不是拼写错了","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1620267105,"ip_address":"","comment_id":286409,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师我的@purest. mark后面没有dependency是神魔原因啊？","like_count":1,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517974,"discussion_content":"看看是不是拼写错了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620267105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1874915,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/9b/e3/d3bc8525.jpg","nickname":"isaac","note":"","ucode":"C84CFF8C07F40C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380443,"discussion_content":"我也是没有，请问你后来怎么解决的？\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624505011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050306,"avatar":"https://static001.geekbang.org/account/avatar/00/10/06/c2/abb7bfe3.jpg","nickname":"jeffky","note":"","ucode":"6351B7DED0CF2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366811,"discussion_content":"我也是没有","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618196278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368654,"user_name":"Geek_62d57f","can_delete":false,"product_type":"c3","uid":2585792,"ip_address":"广东","ucode":"C1155A6DBFDC7B","user_header":"","comment_is_top":false,"comment_ctime":1676528881,"is_pvip":false,"replies":[{"id":134426,"content":"老师，你好。\n业务层用例的setup_class函数中初始化了Admin Login Page对象，为什么会执行它对应模块下的用例呢？\n这一点想不通，希望老师能看到并解答，十分感谢。","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677056893,"ip_address":"河北","comment_id":368654,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"求老师解答，百度都找不到答案，和下面同学一样的问题\n##依赖的是登陆成功的用例，但是跑的时候，我admin_login中的不管是登陆成功还是失败的用例都跑了一遍之后，才跑文章分类的用例呢？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606290,"discussion_content":"老师，你好。\n业务层用例的setup_class函数中初始化了Admin Login Page对象，为什么会执行它对应模块下的用例呢？\n这一点想不通，希望老师能看到并解答，十分感谢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677056893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363321,"user_name":"庄颖","can_delete":false,"product_type":"c3","uid":2974369,"ip_address":"广东","ucode":"784890C940EC81","user_header":"","comment_is_top":false,"comment_ctime":1669535753,"is_pvip":false,"replies":[{"id":134385,"content":"在 Pytest 中，可以使用不同的作用域来控制测试用例和夹具的生命周期。以下是 Pytest 支持的作用域：\n\nfunction: 每个测试用例和夹具都会被调用一次。\n\nclass: 每个测试类在运行测试用例之前都会被调用一次。每个测试类可以包含多个测试用例。\n\nmodule: 每个测试模块在运行测试用例之前都会被调用一次。测试模块是指包含测试用例的 Python 模块。\n\nsession: 在整个测试会话期间，只会调用一次。测试会话是指执行所有测试用例的完整过程。\n\n这些作用域的区别在于它们控制测试用例和夹具的生命周期。例如，如果将作用域设置为 &quot;function&quot;，则每次运行测试用例时，都会创建新的夹具实例。如果将作用域设置为 &quot;module&quot;，则测试用例和夹具在整个测试模块期间保持不变。\n\n另外需要注意的是，如果在一个作用域中定义了一个夹具，它仍然可以在比它作用域更低的级别中使用。例如，如果在 &quot;module&quot; 作用域中定义了一个夹具，它仍然可以在 &quot;function&quot; 作用域中使用。但是，如果在一个作用域中定义了一个夹具，它不能在比它更高的级别中使用。例如，在 &quot;function&quot; 作用域中定义的夹具不能在 &quot;module&quot; 作用域中使用。","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677054528,"ip_address":"河北","comment_id":363321,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师， 查阅了一些资料，说是scope参数还有session、package、module、class几种级别，其中module是从同一模块内查询依赖，案例里跨模块使用，为什么是使用module而不是package呢？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606246,"discussion_content":"在 Pytest 中，可以使用不同的作用域来控制测试用例和夹具的生命周期。以下是 Pytest 支持的作用域：\n\nfunction: 每个测试用例和夹具都会被调用一次。\n\nclass: 每个测试类在运行测试用例之前都会被调用一次。每个测试类可以包含多个测试用例。\n\nmodule: 每个测试模块在运行测试用例之前都会被调用一次。测试模块是指包含测试用例的 Python 模块。\n\nsession: 在整个测试会话期间，只会调用一次。测试会话是指执行所有测试用例的完整过程。\n\n这些作用域的区别在于它们控制测试用例和夹具的生命周期。例如，如果将作用域设置为 &#34;function&#34;，则每次运行测试用例时，都会创建新的夹具实例。如果将作用域设置为 &#34;module&#34;，则测试用例和夹具在整个测试模块期间保持不变。\n\n另外需要注意的是，如果在一个作用域中定义了一个夹具，它仍然可以在比它作用域更低的级别中使用。例如，如果在 &#34;module&#34; 作用域中定义了一个夹具，它仍然可以在 &#34;function&#34; 作用域中使用。但是，如果在一个作用域中定义了一个夹具，它不能在比它更高的级别中使用。例如，在 &#34;function&#34; 作用域中定义的夹具不能在 &#34;module&#34; 作用域中使用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677054529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2829157,"avatar":"","nickname":"Geek_796019","note":"","ucode":"D8A6D3B4B605B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613672,"discussion_content":"因为你已经import admin_login了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681452844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2585792,"avatar":"","nickname":"Geek_62d57f","note":"","ucode":"C1155A6DBFDC7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":604940,"discussion_content":"module代表的是同文件，不是跨模块","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676512815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341902,"user_name":"忧伤的胡萝卜","can_delete":false,"product_type":"c3","uid":2352625,"ip_address":"","ucode":"6881B0A6AED809","user_header":"https://static001.geekbang.org/account/avatar/00/23/e5/f1/880994da.jpg","comment_is_top":false,"comment_ctime":1649909197,"is_pvip":false,"replies":[{"id":134416,"content":"在 Pytest 中，如果一个测试函数 B 依赖于另外一个参数化的测试函数 A，且需要在每次执行 A 函数时都执行一次 B 函数，可以使用 Pytest 的 Fixture 模块来实现。\n\n具体而言，可以定义一个 Fixture 函数，使用 `yield` 语句返回一个可迭代对象，每次迭代都执行 B 函数。然后在 A 函数中调用 Fixture 函数即可。示例如下：\n\n```\nimport pytest\n\n@pytest.fixture(scope=&quot;function&quot;)\ndef run_b():\n    # Fixture 函数，每次迭代都执行 B 函数\n    def _run_b():\n        print(&quot;B function is running...&quot;)\n    yield _run_b\n\n@pytest.mark.parametrize(&quot;arg&quot;, [1, 2, 3])\ndef test_a(run_b, arg):\n    # A 函数，每次迭代都调用 Fixture 函数\n    print(&quot;A function is running with arg:&quot;, arg)\n    run_b()  # 调用 Fixture 函数，每次迭代都执行 B 函数\n```\n\n在以上代码中，Fixture 函数 `run_b()` 每次迭代都会执行一次 B 函数。然后在参数化的测试函数 A 中，每次迭代都调用 Fixture 函数 `run_b()`，即可实现每次迭代都执行一次 B 函数的需求。\n\n需要注意的是，为了确保 Fixture 函数在 A 函数之前执行，需要在 A 函数中添加 Fixture 函数名作为参数。此外，还需要将 Fixture 函数的作用域设置为 `function`，表示每个测试函数执行时都会执行 Fixture 函数。","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677056287,"ip_address":"河北","comment_id":341902,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，请问如果B依赖了一个参数化的函数A，怎么让A每执行一次，就执行一次B，而不是A执行完所有参数后执行一次B呢？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606278,"discussion_content":"在 Pytest 中，如果一个测试函数 B 依赖于另外一个参数化的测试函数 A，且需要在每次执行 A 函数时都执行一次 B 函数，可以使用 Pytest 的 Fixture 模块来实现。\n\n具体而言，可以定义一个 Fixture 函数，使用 `yield` 语句返回一个可迭代对象，每次迭代都执行 B 函数。然后在 A 函数中调用 Fixture 函数即可。示例如下：\n\n```\nimport pytest\n\n@pytest.fixture(scope=&#34;function&#34;)\ndef run_b():\n    # Fixture 函数，每次迭代都执行 B 函数\n    def _run_b():\n        print(&#34;B function is running...&#34;)\n    yield _run_b\n\n@pytest.mark.parametrize(&#34;arg&#34;, [1, 2, 3])\ndef test_a(run_b, arg):\n    # A 函数，每次迭代都调用 Fixture 函数\n    print(&#34;A function is running with arg:&#34;, arg)\n    run_b()  # 调用 Fixture 函数，每次迭代都执行 B 函数\n```\n\n在以上代码中，Fixture 函数 `run_b()` 每次迭代都会执行一次 B 函数。然后在参数化的测试函数 A 中，每次迭代都调用 Fixture 函数 `run_b()`，即可实现每次迭代都执行一次 B 函数的需求。\n\n需要注意的是，为了确保 Fixture 函数在 A 函数之前执行，需要在 A 函数中添加 Fixture 函数名作为参数。此外，还需要将 Fixture 函数的作用域设置为 `function`，表示每个测试函数执行时都会执行 Fixture 函数。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677056287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2585792,"avatar":"","nickname":"Geek_62d57f","note":"","ucode":"C1155A6DBFDC7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":604941,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676512861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339612,"user_name":"Jone  XH","can_delete":false,"product_type":"c3","uid":2233644,"ip_address":"","ucode":"23C0354CD29C96","user_header":"https://static001.geekbang.org/account/avatar/00/22/15/2c/562d55ad.jpg","comment_is_top":false,"comment_ctime":1648224387,"is_pvip":false,"replies":[{"id":125488,"content":"把源码贴出来看看","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1651036769,"ip_address":"","comment_id":339612,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师你好，我有2条用例，为什么控制台显示我就运行了一条？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567993,"discussion_content":"把源码贴出来看看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651036769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336667,"user_name":"Enigma","can_delete":false,"product_type":"c3","uid":1180043,"ip_address":"","ucode":"CE56E377EEC60D","user_header":"https://static001.geekbang.org/account/avatar/00/12/01/8b/475a4eb4.jpg","comment_is_top":false,"comment_ctime":1646281423,"is_pvip":false,"replies":[{"id":134425,"content":"在pytest中，标记依赖关系的方式确保了被依赖用例执行成功后，才会执行依赖用例。如果依赖用例的执行依赖于被依赖用例的状态，则可能存在以下情况：\n\n被依赖用例未成功执行，导致依赖用例被跳过\n依赖用例定义的范围scope不正确\n您可以检查一下以下几个方面，看是否会影响用例执行顺序：\n\n确保被依赖的登录测试用例的标记名称和依赖测试用例中的名称一致。如果不一致，则依赖用例无法找到被依赖用例，也就不会执行。\n确保被依赖用例执行成功，没有抛出任何异常。如果被依赖用例执行失败，依赖用例会被跳过。\n确保依赖用例的scope正确设置。scope的默认值为function，表示该用例是在每个测试函数之前执行的。如果依赖用例的scope设置为module，则会在依赖用例所在的模块之前执行。如果被依赖用例在依赖用例所在的模块之后定义，则依赖用例无法找到被依赖用例，也就无法执行。\n另外，您也可以尝试使用--verbose选项运行pytest，查看pytest的详细输出，看是否有任何提示。","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677056873,"ip_address":"河北","comment_id":336667,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"求老师解答，百度都找不到答案，和下面同学一样的问题\n##依赖的是登陆成功的用例，但是跑的时候，我admin_login中的不管是登陆成功还是失败的用例都跑了一遍之后，才跑文章分类的用例呢？\n被依赖的标签：@pytest.mark.dependency(name=&#39;admin_login&#39;)\n依赖的标签：@pytest.mark.dependency(depends=[&quot;admin_login&quot;], scope=&quot;module&quot;)","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606289,"discussion_content":"在pytest中，标记依赖关系的方式确保了被依赖用例执行成功后，才会执行依赖用例。如果依赖用例的执行依赖于被依赖用例的状态，则可能存在以下情况：\n\n被依赖用例未成功执行，导致依赖用例被跳过\n依赖用例定义的范围scope不正确\n您可以检查一下以下几个方面，看是否会影响用例执行顺序：\n\n确保被依赖的登录测试用例的标记名称和依赖测试用例中的名称一致。如果不一致，则依赖用例无法找到被依赖用例，也就不会执行。\n确保被依赖用例执行成功，没有抛出任何异常。如果被依赖用例执行失败，依赖用例会被跳过。\n确保依赖用例的scope正确设置。scope的默认值为function，表示该用例是在每个测试函数之前执行的。如果依赖用例的scope设置为module，则会在依赖用例所在的模块之前执行。如果被依赖用例在依赖用例所在的模块之后定义，则依赖用例无法找到被依赖用例，也就无法执行。\n另外，您也可以尝试使用--verbose选项运行pytest，查看pytest的详细输出，看是否有任何提示。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677056874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2585792,"avatar":"","nickname":"Geek_62d57f","note":"","ucode":"C1155A6DBFDC7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":606396,"discussion_content":"老师，您对问题理解有点偏差，我的疑问主要是‘依赖的是登陆成功的用例，但是跑的时候，我admin_login中的不管是登陆成功还是失败的用例都跑了一遍之后，才跑文章分类的用例呢？’，就是如何只执行登录成功的用例，而不执行登录失败的用例？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677122163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":606289,"ip_address":"广东","group_id":0},"score":606396,"extra":""}]},{"author":{"id":2585792,"avatar":"","nickname":"Geek_62d57f","note":"","ucode":"C1155A6DBFDC7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":604942,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676512879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308300,"user_name":"Geek_d0cbdb","can_delete":false,"product_type":"c3","uid":2419162,"ip_address":"","ucode":"9472DC10BBE9F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIfOiaascAt5B4PibSoLYtRX8TiawQWmDLK3sibwQP1zshWuOk67Tx23fwicjBg3cwUdg5HM4J0ic4k7grA/132","comment_is_top":false,"comment_ctime":1629525341,"is_pvip":false,"replies":[{"id":111830,"content":"这里有一篇博客可以解释你的问题：https:&#47;&#47;www.cnblogs.com&#47;Tester_Dolores&#47;p&#47;13931537.html","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1629873175,"ip_address":"","comment_id":308300,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"添加依赖后，我的用例直接被跳过执行了：\ntestcases&#47;pytest&#47;test_category.py::TestCategory::test_add_category_error SKIPPED (test_add_category_error depends on admin_login)\ntestcases&#47;pytest&#47;test_category.py::TestCategory::test_add_category_ok SKIPPED (test_add_category_ok depends on admin_login)\ntestcases&#47;pytest&#47;test_category.py::TestAdminLogin::test_admin_login_code_ok PASSED\n","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525453,"discussion_content":"这里有一篇博客可以解释你的问题：https://www.cnblogs.com/Tester_Dolores/p/13931537.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629873175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2419162,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIfOiaascAt5B4PibSoLYtRX8TiawQWmDLK3sibwQP1zshWuOk67Tx23fwicjBg3cwUdg5HM4J0ic4k7grA/132","nickname":"Geek_d0cbdb","note":"","ucode":"9472DC10BBE9F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392380,"discussion_content":"我取消使用依赖后，只是用order指明执行顺序，也能按照顺序执行case，感觉这个时候dependency没啥用了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630984989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308184,"user_name":"Geek_d0cbdb","can_delete":false,"product_type":"c3","uid":2419162,"ip_address":"","ucode":"9472DC10BBE9F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIfOiaascAt5B4PibSoLYtRX8TiawQWmDLK3sibwQP1zshWuOk67Tx23fwicjBg3cwUdg5HM4J0ic4k7grA/132","comment_is_top":false,"comment_ctime":1629444342,"is_pvip":false,"replies":[{"id":111831,"content":"这里有一篇博客可以解释你的问题：https:&#47;&#47;www.cnblogs.com&#47;Tester_Dolores&#47;p&#47;13931537.html","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1629873180,"ip_address":"","comment_id":308184,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"B依赖A，执行文件B的时候，被依赖的A执行了，但是B中的方法都skip了，我代码里面没问题，我把老师的代码copy到自己的目录下，也是同样有依赖的会直接skip,但是我直接运行老师的项目的时候却能成功，是不是项目中有什么配置落下了","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525422,"discussion_content":"这里有一篇博客可以解释你的问题：https://www.cnblogs.com/Tester_Dolores/p/13931537.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629873180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306491,"user_name":"王潼","can_delete":false,"product_type":"c3","uid":2618946,"ip_address":"","ucode":"BED12B497F3356","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJib1lsydmKBBndAsUM94NPRunl0IrQfoP9fQRyKqtazLvic7x9TAcUUiaicOribFFYEhhJliaic8QLpGdsA/132","comment_is_top":false,"comment_ctime":1628584505,"is_pvip":false,"replies":[{"id":111092,"content":"设置断点看看怎么执行的","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1628692343,"ip_address":"","comment_id":306491,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，我的2个.py文件都在一个包里面，写的也和你一样，但是就是不执行依赖的那个方法，没有报错，也没有跳过，就是只执行了被依赖的那个文件的内容，就是不执行依赖的那个test_product\n\n登录文件：\n@pytest.mark.dependency(name=&#39;login_group&#39;)\n    def test_group(self):\n        # 进入项目租户\n        WebDriverWait(self.driver, 30, 0.2).until(EC.visibility_of_element_located((By.XPATH, &quot;&#47;html&#47;body&#47;div[2]&#47;div[2]&#47;div[4]&quot;)))\n        self.driver.find_element_by_xpath(&#39;&#47;html&#47;body&#47;div[2]&#47;div[2]&#47;div[4]&#39;).click()\n\n\n依赖的文件：\nclass Safety(object):\n\n\n    def setup_class(self):\n        self.login = TestLogin()\n\n    @pytest.mark.dependency(depends=[&quot;login_group&quot;], scope=&quot;module&quot;)\n    def test_product(self):\n        # 进入安全检查产品\n        WebDriverWait(self.login.driver, 30, 0.2).until(EC.visibility_of_element_located((By.XPATH, &quot;&#47;html&#47;body&#47;div[1]&#47;div[2]&#47;div&#47;div&#47;div&#47;div[2]&#47;div[2]&#47;div&quot;)))\n        self.login.driver.find_element_by_xpath(&#39;&#47;html&#47;body&#47;div[1]&#47;div[2]&#47;div&#47;div&#47;div&#47;div[2]&#47;div[2]&#47;div&#39;).click()\n\n    def runTest(self):\n        self.test_product()\n\nif __name__ == &#39;__main__&#39;:\n    pytest.main([&#39;test_safety.py&#39;])\n\n\n\n","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524791,"discussion_content":"设置断点看看怎么执行的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628692343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2618946,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJib1lsydmKBBndAsUM94NPRunl0IrQfoP9fQRyKqtazLvic7x9TAcUUiaicOribFFYEhhJliaic8QLpGdsA/132","nickname":"王潼","note":"","ucode":"BED12B497F3356","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388514,"discussion_content":"找了半天终于发现是类名称漏了那个要求加的Test。。。。。。。。。。。。。。。。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628817744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2618946,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJib1lsydmKBBndAsUM94NPRunl0IrQfoP9fQRyKqtazLvic7x9TAcUUiaicOribFFYEhhJliaic8QLpGdsA/132","nickname":"王潼","note":"","ucode":"BED12B497F3356","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388423,"discussion_content":"打断点看  就进入test_product方法后，执行了被依赖的登录，没有执行下面的，但是也不是顺序问题导致跳过，还是没看懂问题在哪","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628758604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302690,"user_name":"有梦想就会sou","can_delete":false,"product_type":"c3","uid":1819253,"ip_address":"","ucode":"E2271242A49971","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c2/75/14539e5d.jpg","comment_is_top":false,"comment_ctime":1626334963,"is_pvip":false,"replies":[{"id":109690,"content":"看看安装是否正确 设置断点调试一下","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1626603163,"ip_address":"","comment_id":302690,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，我生成的 allure 报告页面是空白的，请问要怎么解决呢？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523387,"discussion_content":"看看安装是否正确 设置断点调试一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626603163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294362,"user_name":"拾月","can_delete":false,"product_type":"c3","uid":2595550,"ip_address":"","ucode":"83B0E425ED5DF0","user_header":"https://static001.geekbang.org/account/avatar/00/27/9a/de/14f707e3.jpg","comment_is_top":false,"comment_ctime":1621915638,"is_pvip":false,"replies":[{"id":107102,"content":"c依赖b就行了 依赖可以传递","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1622183268,"ip_address":"","comment_id":294362,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师，有个问题想请教一下，登录页面A，新建页面B，查看页面C，比如运行B的测试用例的时候需要依赖A测试用例，这个没有问题，但是页面C需要依赖页面A和B，这个怎么处理？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520621,"discussion_content":"c依赖b就行了 依赖可以传递","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622183268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294141,"user_name":"拾月","can_delete":false,"product_type":"c3","uid":2595550,"ip_address":"","ucode":"83B0E425ED5DF0","user_header":"https://static001.geekbang.org/account/avatar/00/27/9a/de/14f707e3.jpg","comment_is_top":false,"comment_ctime":1621783912,"is_pvip":false,"replies":[{"id":107101,"content":"依赖可以传递 c只依赖b 就可以了","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1622183226,"ip_address":"","comment_id":294141,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师，想请问一下，如果有三个测试用例文件，用例A，用例B，用例C，B依赖A，C又依赖A和B这种情况怎么办？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520526,"discussion_content":"依赖可以传递 c只依赖b 就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622183226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284780,"user_name":"樊紫枫","can_delete":false,"product_type":"c3","uid":2085555,"ip_address":"","ucode":"7CBC3EAD5356CE","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d2/b3/1299a3f7.jpg","comment_is_top":false,"comment_ctime":1616468474,"is_pvip":false,"replies":[{"id":103835,"content":"把依赖去掉 试试 是否是依赖的问题 设置断点调试一下","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1617101621,"ip_address":"","comment_id":284780,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师您好\n目前有个问题如下：\n1、用户登录脚本如下：\nclass TestUserLogin(object):\n    def setup_class(self):\n        chrome_driver = r&quot;E:\\Develop\\driver\\chromedriver.exe&quot;\n        self.driver = webdriver.Chrome(executable_path=chrome_driver)\n        self.driver.get(&quot;http:&#47;&#47;localhost:8080&#47;jpress&#47;user&#47;login&quot;)\n        self.driver.maximize_window()\n    @pytest.mark.run(order=-10)\n    @pytest.mark.dependency()\n    def test_login_success(self):\n        username = &#39;17366004122&#39;\n        pwd = &quot;11081103&quot;\n        expected = &quot;用户中心&quot;\n        # 输入用户名\n        username_el = self.driver.find_element_by_name(&quot;user&quot;)\n        username_el.clear()\n        username_el.send_keys(username)\n        # 输入密码\n        pwd_el = self.driver.find_element_by_name(&quot;pwd&quot;)\n        pwd_el.clear()\n        pwd_el.send_keys(pwd)\n        # 点击登录\n        self.driver.find_element_by_class_name(&quot;btn&quot;).click()\n        # 等待登录后的页面标题\n        WebDriverWait(self.driver, 5).until(EC.title_is(expected))\n        # # 验证标题是否符合预期\n        # assert self.driver.title == expected\n        # sleep(3)\nif __name__ == &#39;__main__&#39;:\n    pytest.main([&quot;-sv&quot;, &quot;test_user_login_demo.py&quot;])\n2、登录之后修改签名脚本\nclass TestPersonSign(object):\n    def setup_class(self):\n        self.login = TestUserLogin()\n        self.case = TestPyTestCase()\n\n    @pytest.mark.run(order=-5)\n    @pytest.mark.dependency(depends=[&quot;pytest&#47;test_user_login_demo.py::TestUserLogin::test_login_success&quot;], scope=&quot;session&quot;)\n    def test_modify_01(self):\n        print(&quot;mod&quot;)\nif __name__ == &#39;__main__&#39;:\n    pytest.main([&quot;-sv&quot;, &quot;test_fix_address.py&quot;])\n但是在执行的时候：依赖的登录是成功了，但是test_modify_01 会跳过，老师可以看看下不\nPASSED\ntest_fix_address.py::TestUserLogin::test_login_success PASSED\ntest_fix_address.py::TestPersonSign::test_modify_01 SKIPPED (test_mo...)\n\n\n\n\n\n\n\n\n\n\n\n\n\n","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517467,"discussion_content":"把依赖去掉 试试 是否是依赖的问题 设置断点调试一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617101621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243580,"user_name":"Geek_jf52tq","can_delete":false,"product_type":"c3","uid":1350004,"ip_address":"","ucode":"69702DFB599C49","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/V5Q9iapkWRXblWVn7fpnA5l9nAKF023UPDnS7bib8Ylrt91epNicdeJFic0fDH8W4ickO4cdylNN50kYn9pWSDCgHEg/132","comment_is_top":false,"comment_ctime":1598195831,"is_pvip":false,"replies":[{"id":89755,"content":"设置断点 调试一下 看看怎么执行的","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1598228566,"ip_address":"","comment_id":243580,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"class test_chongzhi(object):\n    def setup_class(self):\n        self.login = TestUserLogin()\n\n    @pytest.mark.dependency(depends=[&quot;user_login&quot;], scope=&quot;module&quot;)\n    def test_huafeichongzhi(self):#话费充值\n         ------------省略\nif __name__==&quot;__main__&quot;:\n    pytest.main([&#39;test_chongzhi.py&#39;])\n执行的时候只执行了被依赖的TestUserLogin() 里面的方法，指定的test_chongzhi.py 里面 方法未被执行，是为什么","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504331,"discussion_content":"设置断点 调试一下 看看怎么执行的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598228566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2109215,"avatar":"https://static001.geekbang.org/account/avatar/00/20/2f/1f/7fbf3f8c.jpg","nickname":"椰子姑娘","note":"","ucode":"124A7DC4BF4AE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301145,"discussion_content":"我的也是这样的，直接ignored","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598423719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243173,"user_name":"软件女青年","can_delete":false,"product_type":"c3","uid":2065369,"ip_address":"","ucode":"9AFF9F92B96D9D","user_header":"https://static001.geekbang.org/account/avatar/00/1f/83/d9/e7fccc44.jpg","comment_is_top":false,"comment_ctime":1597981567,"is_pvip":false,"replies":[{"id":89670,"content":"可以 TestCase::test_method\n","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1598009978,"ip_address":"","comment_id":243173,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师我依赖的是只有在登陆成功的方法上面备注了，然后执行的时候我看了下还是会先执行失败的用例，然后执行成功的用例，再进行文章添加的用例是为什么","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504209,"discussion_content":"可以 TestCase::test_method\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598009978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1180043,"avatar":"https://static001.geekbang.org/account/avatar/00/12/01/8b/475a4eb4.jpg","nickname":"Enigma","note":"","ucode":"CE56E377EEC60D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554246,"discussion_content":"姐妹解决了吗 我也是这个问题！！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646281070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351601,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9f/b1/2894614a.jpg","nickname":"ShouIdo😂","note":"","ucode":"F8371C54FB4EB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300942,"discussion_content":"同学，你跟我的问题一样一样的，有解决办法吗或者知道原因了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598331927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243141,"user_name":"Geek_51aa5a","can_delete":false,"product_type":"c3","uid":1678226,"ip_address":"","ucode":"ACAE1673E5CEC1","user_header":"","comment_is_top":false,"comment_ctime":1597975068,"is_pvip":false,"replies":[{"id":89667,"content":"可以使用 fixture","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1598009737,"ip_address":"","comment_id":243141,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师，setup_class不能传参吗，有的时候需要在setup_class中使用参数怎么处理呢","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504194,"discussion_content":"可以使用 fixture","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598009737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242980,"user_name":"ShouIdo😂","can_delete":false,"product_type":"c3","uid":1351601,"ip_address":"","ucode":"F8371C54FB4EB2","user_header":"https://static001.geekbang.org/account/avatar/00/14/9f/b1/2894614a.jpg","comment_is_top":false,"comment_ctime":1597910789,"is_pvip":false,"replies":[{"id":89666,"content":"可以指定 只登录成功","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1598009571,"ip_address":"","comment_id":242980,"utype":1}],"discussion_count":5,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师，为什么我在category用例里面，依赖的是登陆成功的用例，但是跑的时候，我admin_login中的不管是登陆成功还是失败的用例都跑了一遍之后，才跑文章分类的用例呢？\n被依赖的标签：@pytest.mark.dependency(name=&#39;admin_login&#39;)\n依赖的标签：@pytest.mark.dependency(depends=[&quot;admin_login&quot;], scope=&quot;module&quot;)","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504147,"discussion_content":"可以指定 只登录成功","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598009571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1180043,"avatar":"https://static001.geekbang.org/account/avatar/00/12/01/8b/475a4eb4.jpg","nickname":"Enigma","note":"","ucode":"CE56E377EEC60D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":554247,"discussion_content":"老师咋实现啊 按你视频里写的 运行就是连没有依赖的用例也执行了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646281365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":504147,"ip_address":"","group_id":0},"score":554247,"extra":""},{"author":{"id":2585792,"avatar":"","nickname":"Geek_62d57f","note":"","ucode":"C1155A6DBFDC7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":604995,"discussion_content":"你倒是说怎么指定啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676539464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":504147,"ip_address":"广东","group_id":0},"score":604995,"extra":""}]},{"author":{"id":2649814,"avatar":"","nickname":"Geek_a84773","note":"","ucode":"DACA4483BF191A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390948,"discussion_content":"老师，怎么只指定依赖成功的那一条用例呢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630170209,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351601,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9f/b1/2894614a.jpg","nickname":"ShouIdo😂","note":"","ucode":"F8371C54FB4EB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300763,"discussion_content":"但是，老师，我程序执行的时候，我的装饰器并没有一起执行，这是为什么呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598259131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267894,"user_name":"ning","can_delete":false,"product_type":"c3","uid":1798471,"ip_address":"","ucode":"5A9A9F31653A0E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/rRCSdTPyqWdJkIdySLkRpCT0dW4ibxnyutO4dkzagibricncUJQOWGUqrDKhOeJ5MpicYVeia2Nn8UGQX3fc0ghLZ2g/132","comment_is_top":false,"comment_ctime":1607986801,"is_pvip":false,"replies":null,"discussion_count":4,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师，我这边B用例依赖A，执行时B用例自动被忽略了，用pytest order指定排序后B用例才会被执行，这是什么原因呢","like_count":3,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390518,"discussion_content":"这里有一篇博客 可以解释你的问题，看一下：https://www.cnblogs.com/Tester_Dolores/p/13931537.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629873114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1716156,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/2f/bc/71e5dbbc.jpg","nickname":"测试菜鸟","note":"","ucode":"610650BDE3548C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365370,"discussion_content":"是用例顺序的问题。看下自己项目里面，B用例排在A用例前面。所以pytest先收集到了B用例然后收集到了A用例。pytest先运行了B用例，而因为B的依赖A用例没有运行，由于@pytest.mark.dependency的机制导致B被跳过了。然后pytest运行收集到的A用例，所以看起来B被跳过了，A被执行了。\n解决办法：让独立的A用例在B之前运行，我是手动修改了目录名称使得他们顺序A在前B在后。正确情况下执行顺序是A-->B里面的A-->B","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617784149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1180043,"avatar":"https://static001.geekbang.org/account/avatar/00/12/01/8b/475a4eb4.jpg","nickname":"Enigma","note":"","ucode":"CE56E377EEC60D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1716156,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/2f/bc/71e5dbbc.jpg","nickname":"测试菜鸟","note":"","ucode":"610650BDE3548C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554323,"discussion_content":"请问下b排在A前面是相对什么来说啊 我改了目录顺序还是不行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646317852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":365370,"ip_address":"","group_id":0},"score":554323,"extra":""}]},{"author":{"id":1272354,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6a/22/527904b2.jpg","nickname":"hao-kuai","note":"","ucode":"DFDFDDDBA4503C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355551,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615451148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243747,"user_name":"Geek_jf52tq","can_delete":false,"product_type":"c3","uid":1350004,"ip_address":"","ucode":"69702DFB599C49","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/V5Q9iapkWRXblWVn7fpnA5l9nAKF023UPDnS7bib8Ylrt91epNicdeJFic0fDH8W4ickO4cdylNN50kYn9pWSDCgHEg/132","comment_is_top":false,"comment_ctime":1598264491,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"test_admin_login.py 修改test_user_login.py 然后修改test_article.py 里面的引用后就不会执行test_article.py 里面的依赖用例了","like_count":1,"discussions":[{"author":{"id":1716156,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/2f/bc/71e5dbbc.jpg","nickname":"测试菜鸟","note":"","ucode":"610650BDE3548C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365369,"discussion_content":"搞定了。是用例顺序的问题。你们可以看下自己项目里面，是不是B用例排在A用例前面。pytest先运行了B用例，而因为A用例没有运行，所以B被跳过了。然后pytest运行A用例，所以看起来B被跳过了，A被执行了。\n解决办法：让独立的A用例在B之前运行，我是手动修改了目录名称使得他们顺序A在前B在后。正确情况下执行顺序是A-->B里面的A-->B","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617783979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267910,"user_name":"ning","can_delete":false,"product_type":"c3","uid":1798471,"ip_address":"","ucode":"5A9A9F31653A0E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/rRCSdTPyqWdJkIdySLkRpCT0dW4ibxnyutO4dkzagibricncUJQOWGUqrDKhOeJ5MpicYVeia2Nn8UGQX3fc0ghLZ2g/132","comment_is_top":false,"comment_ctime":1607993802,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师，如果依赖的用例有返回值，这个返回值想在被依赖的用例中引用，可以实现吗","like_count":0}]}