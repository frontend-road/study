{"id":430019,"title":"开篇词｜为什么你要系统学习计算机的内存知识？","content":"<p>你好，我是海纳，欢迎来到《编程高手必学的内存知识》的课堂。</p><p>我曾经是Huawei JDK团队的负责人，现在是华为鲲鹏生态的布道师，同时还在负责华为编译器领域的相关创新工作。2019年我出版了《自己动手写Python虚拟机》一书。这两年，我利用业余时间又筹备了一本《从零开始写Linux内核》，预计明年上市。</p><p>计算机内存可以说是我的老朋友了。我和它结缘于我对基础软件开发的热爱。2007年，我本科毕业，在人大金仓从事国产数据库开发。</p><p>记得有一次，我在公司看B+树代码。我之前一直都搞不懂B+树为什么要这么设计，直到那段时间，我研究Linux内核代码，看到磁盘IO和页缓存算法时才恍然大悟。我发现，原来我对很多技术的不理解，是来自于我计算机内存管理这些知识的匮乏。</p><p>后来，我又去读了研。2012年，研究生毕业后，我去了网易做游戏开发，偏离了我曾经热爱的基础软件开发领域，但我居然又遇见了我的“老朋友”，内存管理。网易大量的游戏逻辑都是使用Python虚拟机构建的，但是由于Python采用了引用计数法进行自动内存管理，使用不当的时候，很容易发生大量的模型文件因循环引用不能自动释放的问题。</p><p>为了解决这个问题，我就希望能在Python虚拟机中引入基于复制的内存管理算法。所以，我就打开Python虚拟机的源代码，研究它的内存管理部分，做了一些尝试，虽然最终未能商业落地，但却收获了宝贵的经验。这些经验都总结在《自己动手写Python虚拟机》这本书里了。</p><!-- [[[read_end]]] --><p>两年后，我加入了华为，从事Huawei JDK的研发工作。再一次回到基础软件开发领域的我，又跟内存管理“杠”上了。那时，我遇到过一个非常棘手的问题。</p><p>这个问题的表象是，在鲲鹏CPU上，SynchronousQueue（SQ）会卡死线程。因为SQ这个结构使用了多个volatile变量，volatile的读写规则是在Java内存模型（Java Memory Model, JMM）中定义的，而华为鲲鹏芯片采用的是弱内存模型。所以，我们要解决这个问题，就不光要对JMM非常熟悉，还要对CPU的缓存管理有深入的理解。再加上，SQ的具体实现会经过HotSpot  C2编译器的优化，因此，我们同时还要搞清楚编译器是如何对内存操作进行翻译和优化的。</p><p>为了解决这个问题，我查阅了JSR133文档、CPU的设计手册、JVM的编译器设计和内存管理设计，还有多核CPU的操作系统设计等资料，深刻感受到想要分析这种涉及多个领域的问题，必须全面掌握内存相关的软硬件知识。</p><p>如果说，我与计算机内存的缘分，来自于我对基础软件开发和计算机底层原理的偏爱。那么今天，我想从更理性的、自身发展规划的角度看，和你谈谈为什么要系统地学习内存知识？</p><h2>为什么我建议你系统学习内存知识？</h2><p>现在，聊到程序员这个行业，逃不开的话题就是“职业生涯的35岁危机”。而且，你也能感受到，每年都有大量的人转行到计算机，初级的、写CRUD逻辑的人数已经逐渐见顶，出现供大于求的情况。</p><p>但是另一方面，结构性缺人又是非常常见的现象，很多公司还是感觉很难招到合适的开发人员。就拿我们编译器领域来说，招聘合适的人才，周期往往都要拉长到一年。</p><p>这是因为，在互联网的早期发展阶段，国内的ICT公司更多还是直接使用欧美的基础设施和技术，例如大型服务器、操作系统、数据库、编程语言、编译器、网络协议等等。随着国内企业的规模越来越大，各种定制化的需求也层出不穷，很多企业越来越希望自己能维护和修改基础设施。所以，当前市场对能进行底层开发的系统级程序员的需求也就越来越大。这对我们个人来说，是一个突破职业瓶颈的好机会。</p><p>那么，如何从一个应用开发程序员成长为资深的系统级程序员呢？</p><p>绕不开的一点是，我们需要熟练掌握CPU的工作原理、操作系统原理、编译器原理、分布式软件、图形渲染和数据库原理。<strong>如果从这些庞大的知识体系中选择一条脉络的话，我还是会推荐以内存管理为线索去进行学习。</strong></p><p>举个例子，在C语言编写的程序中，一个变量要经过编译器、链接器、加载器和操作系统的进程管理，然后再经过CPU的MMU模块，才能最终出现在真正的物理内存里。如果你能把这个过程讲清楚了，那就说明你对编译、链接、加载、操作系统和CPU的工作原理有了相当的理解。所以说，内存管理的知识就相当于纲领，纲举则目张。</p><h2>为什么内存相关知识这么难学？</h2><p>从我个人的学习经历中也可以看出来，想学好内存管理，必须要掌握CPU核设计知识、CPU的段页式管理等知识，还要深入了解操作系统的内存管理模块、编译器的内存分配、并发锁、基础库的设计原理等等。整体的知识结构，你可以参考下面这张图：</p><p><img src=\"https://static001.geekbang.org/resource/image/6c/d2/6c8d90837c6b213b3eb927d1c1cb3bd2.jpg?wh=2000x1266\" alt=\"\"></p><p>这里面涉及的知识覆盖了《数字电路设计》、《计算机原理》、《微处理器架构》、《体系结构》、《操作系统》、《编译原理》，还有各种编译语言库和虚拟机等等。每一点拎出来，都是一门独立的课程。即使你是在国内最好的计算机院校，想在这些课程里都取得高分也是非常困难的。更不要说，这些课程还没有涉及最新、最前沿的体系结构。</p><p>所以，我们不难看出，内存相关的知识体系的特点是：</p><ol>\n<li><strong>内容非常多，涉及的学科特别多</strong>。软硬件的工作原理都得掌握才能学得好。</li>\n<li><strong>内容非常散，不成体系</strong>。高校里传统的课程都是分层水平设置的。想学好内存管理的知识，需要将它从不同的课程拉取出来，自己进行合并总结才能最终形成知识体系。</li>\n</ol><p>针对这些难点，我设计了这套课程，希望能避免水平式讲解方式难以形成体系的缺点，通过垂直化地学习软硬件相关知识，能让你快速地形成知识体系。</p><h2>这门课是怎么设计的？</h2><p>我们的课程分为三个部分：软件篇，硬件篇和自动内存管理篇。</p><h3>软件篇</h3><p>这一部分，<strong>我们会以操作系统为核心，将进程和内存的关系彻底讲清楚，</strong>让你对操作系统、编译器，以及应用程序的运行原理有深入的理解。这样，当你遇到进程crash时，分析coredump、查看内存映射等都能游刃有余。</p><p>具体来讲，操作系统是软硬件设计的核心，它管理着所有的硬件资源，同时又为各种运行在它上面的应用程序提供服务。而内存是计算机的核心资源之一，如何高效地管理内存是操作系统的基础任务，甚至可以说是最重要的任务，它深刻影响着应用程序使用内存的方式。</p><p>而且，编译器和应用程序都是围绕这个核心来构建的。所以，在具体的讲述上，我们会采取由核心向外延的方式，把软件篇的知识都给你串联起来，如下图所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/24/32/2409476b2e9a8b35473ea5b2yy6dec32.jpg?wh=2000x1062\" alt=\"\"></p><p>另外，我们这个专栏所举的例子都是运行在Linux系统上的，采用的编译器是gcc，Java语言使用的JVM是Huawei JDK。我希望你在学习时候也准备好相关的运行环境，只要Linux内核不低于4.1，gcc版本不低于4.8，JDK版本不低于8就可以了。</p><h3>硬件篇</h3><p>这一部分，我们将会学习与内存相关的计算机体系架构，包括存储器电路、存储体系结构和多核CPU内存模型。</p><p>通过这部分的学习，你可以快速掌握缓存原理、多核CPU通信的核心知识，让你最大限度地使用好缓存，写出正确而高效的代码。同时，我们课程里对硬件知识的讲解，还可以让你掌握CPU设计一些简单原理，并且在此基础上，可以深入地学习RISC-V等开源CPU的实现。</p><p>我们都知道，随着CPU主频的提升越来越困难，厂商的主流做法是使用更多的CPU和更多的核对计算进行并行加速。这个时候，如何保证CPU核间的数据同步就成了硬件工程师的一大挑战，系统程序员必须得对这些原理有足够了解，才能写出正确高效的代码。</p><p>在讲存储器电路的时候，你会发现，根据不同的物理特性原理，人们制作了不同的存储器件，有的成本高、容量小，但速度快；有的则是成本低、容量大，但速度慢。而如何合理使用不同的器件构建一套高效的系统，让各种存储器件“扬长避短”，就是我们在计算机体系结构方面要重点研究的内容。</p><p>从下面这张图你也可以看到，硬件的结构是从下到上层层搭建的。所以，我会采用自底向上的讲解方式，带你理解存储系统是怎样由简单的器件一步步变得越来越复杂的。</p><p><img src=\"https://static001.geekbang.org/resource/image/7e/09/7e8d1cb36b7392bd9f58e76db224f009.jpg?wh=2000x1062\" alt=\"\"></p><h3>自动内存管理篇</h3><p>在这一部分，我们的关注点会从计算机软硬件，转向对具体内存管理算法的学习。</p><p>学习内存管理算法，能够让我们正确地使用各种不同的语言，例如在Python和Swift中你要注意解循环引用等等。而且，你还可以通过学习原理处理各种现实的问题，例如我们前面提到的Java程序的STW问题，等等。</p><p>我们知道，Java、Go、Python、JavaScript等语言的内存都是自动管理的，也就是由语言虚拟机托管的，所以，开发者不需要关心内存的申请和释放的问题，我们把这种类型的语言称为Managed Language。</p><p>自动内存管理极大地减少了程序员的心智负担。但是，作为程序员，如果你不了解自动内存管理的原理，还是会遇到各种各样的问题，比如，垃圾回收时stop the world带来的服务器失去响应、out of memory error等等。这也是为什么，JVM的内存管理一直都是Java程序员的热门话题。在这个课程里，我们将在内存管理篇把这部分内容一次性讲透。</p><p>总的来说，内存管理算法一直在不断克服以前算法的缺点，持续向前演进，而我们这部分整体的讲述逻辑，就是按照算法的演进逻辑进行的。</p><p>以上就是软件篇，硬件篇和自动内存管理篇的主要内容，整个课程的详细目录，我也放在了这里，你可以看一下：</p><p><img src=\"https://static001.geekbang.org/resource/image/73/87/731233583a82be2yy538ff6d0e98e687.png?wh=750x2146\" alt=\"\"></p><p>在最后，我想说成长为系统程序员，不仅仅能帮你突破职业瓶颈，提升个人的薪酬待遇，更重要的是，这是顺应国情和行业发展大趋势的选择。在当前复杂的国际环境下，我们要走出一条自主可控的芯片设计和基础软件设计之路，这是迫在眉睫的事情。我希望，未来能有越来越多的开发者从事CPU设计，操作系统和编译器开发。如果你也是这么想的，那么这个专栏可能就是你最好的启蒙，一起开始吧。</p>","neighbors":{"left":[],"right":{"article_title":"导学（一）| 拆解CPU的基本结构和运行原理","id":430173}},"comments":[{"had_liked":false,"id":318138,"user_name":"卢承灏","can_delete":false,"product_type":"c1","uid":1672266,"ip_address":"","ucode":"80805A03308CA4","user_header":"https://static001.geekbang.org/account/avatar/00/19/84/4a/50940078.jpg","comment_is_top":false,"comment_ctime":1635160895,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"130484179775","product_id":100094901,"comment_content":"今年疯狂学习操作系统知识，不为别的， 就为更好的自己！","like_count":31,"discussions":[{"author":{"id":1055475,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/f3/41d5ba7d.jpg","nickname":"iLeGeND","note":"","ucode":"4055A628A6E97C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578543,"discussion_content":"操作系统+网络","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656894658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318122,"user_name":"jjn0703","can_delete":false,"product_type":"c1","uid":1076652,"ip_address":"","ucode":"83AF403AC7DFB7","user_header":"https://static001.geekbang.org/account/avatar/00/10/6d/ac/6128225f.jpg","comment_is_top":false,"comment_ctime":1635156111,"is_pvip":true,"replies":[{"id":"115385","content":"有一些arm分支上的特有问题，openjdk的修复合入了高版本，低版本openjdk不管了。Huawei jdk低版本也会修复。","user_name":"作者回复","comment_id":318122,"uid":"1360512","ip_address":"","utype":1,"ctime":1635216262,"user_name_real":"氦钠锶"}],"discussion_count":2,"race_medal":5,"score":"57469730959","product_id":100094901,"comment_content":"听过老师几次直播，干货满满，感谢。话说，准备要用的Huawei JDK与我们平常用的JDK有什么区别么？","like_count":13,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"海纳","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529111,"discussion_content":"有一些arm分支上的特有问题，openjdk的修复合入了高版本，低版本openjdk不管了。Huawei jdk低版本也会修复。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635216262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"海纳","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408149,"discussion_content":"没有的哈。你可以使用任意的jdk，只要在8以上就可以。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635177171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338687,"user_name":"小李讲源码","can_delete":false,"product_type":"c1","uid":1107484,"ip_address":"","ucode":"2573037D7C82C8","user_header":"https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg","comment_is_top":false,"comment_ctime":1647662058,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5942629354","product_id":100094901,"comment_content":"老师最后把主题升华了啊，确实现在需要更多的开发者帮助我们中国来实现芯片的自主研发，虽然我是做软件的吧，还是希望通过老师的课程对内存这块有个系统性的学习。","like_count":2},{"had_liked":false,"id":323286,"user_name":"石天兰爱学习","can_delete":false,"product_type":"c1","uid":1451826,"ip_address":"","ucode":"0D95CDA7463516","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/4C2AgnHBt1qmRSiaqPQfEPicCdEJp6IgLC1wsVJPa1zQoRztNaZcqiaRXIblkRc1sgn7dUdPmrE011uFbibEQtia3bg/132","comment_is_top":false,"comment_ctime":1637820409,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5932787705","product_id":100094901,"comment_content":"野生程序员前来打卡😈","like_count":2},{"had_liked":false,"id":322788,"user_name":"几里瓜拉","can_delete":false,"product_type":"c1","uid":1817756,"ip_address":"","ucode":"EB2AC52C78847D","user_header":"https://static001.geekbang.org/account/avatar/00/1b/bc/9c/11b19ef6.jpg","comment_is_top":false,"comment_ctime":1637587760,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5932555056","product_id":100094901,"comment_content":"太难！告辞！","like_count":1},{"had_liked":false,"id":318443,"user_name":"Geek_1b6d74","can_delete":false,"product_type":"c1","uid":2420574,"ip_address":"","ucode":"A0847D91919B7F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Fr0y2ad4CLZNN0iaokfdyfAGwzMdttoIVfgzjBlwaCW2YB26mZta4v6pI2DV0OibCeC1OhME7NmrZo9OoRAfIhwQ/132","comment_is_top":false,"comment_ctime":1635300372,"is_pvip":false,"replies":[{"id":"115481","content":"系统级开发往往是优化底层软件，所以一般都要c&#47;c++&#47;rust这种可以直接操作内存的语言。但是高开发效率的managed language也是必备技能哦","user_name":"作者回复","comment_id":318443,"uid":"1360512","ip_address":"","utype":1,"ctime":1635308213,"user_name_real":"氦钠锶"}],"discussion_count":1,"race_medal":0,"score":"5930267668","product_id":100094901,"comment_content":"系统级开发，用的是c,c++,rust,还是java啊","like_count":1,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"海纳","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529244,"discussion_content":"系统级开发往往是优化底层软件，所以一般都要c/c++/rust这种可以直接操作内存的语言。但是高开发效率的managed language也是必备技能哦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635308213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318244,"user_name":"。。。","can_delete":false,"product_type":"c1","uid":1035567,"ip_address":"","ucode":"6882BABE9C3D6B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/2f/f4adcb41.jpg","comment_is_top":false,"comment_ctime":1635213868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5930181164","product_id":100094901,"comment_content":"是一直要努力的方向，但是任重道远","like_count":1},{"had_liked":false,"id":354275,"user_name":"lu4nx","can_delete":false,"product_type":"c1","uid":1027802,"ip_address":"四川","ucode":"DD90E3C1F44FAF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/da/14be2908.jpg","comment_is_top":false,"comment_ctime":1660235518,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660235518","product_id":100094901,"comment_content":"从零开始写 Linux 内核<br><br>准备上市了吗？","like_count":1},{"had_liked":false,"id":349557,"user_name":"小豹哥","can_delete":false,"product_type":"c1","uid":1613919,"ip_address":"","ucode":"115FF45CAA6FAD","user_header":"https://static001.geekbang.org/account/avatar/00/18/a0/5f/cf72d453.jpg","comment_is_top":false,"comment_ctime":1656061430,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656061430","product_id":100094901,"comment_content":"绕不开的一点是，我们需要熟练掌握 CPU 的工作原理、操作系统原理、编译器原理、分布式软件、图形渲染和数据库原理。  为什么图形渲染 也很重要？ 图形渲染  是类似于java中 springmvc   view 视图渲染吗？ 哈哈，老师我太菜了，希望老师解答下图形渲染 ，感谢","like_count":0},{"had_liked":false,"id":342915,"user_name":"愣锤","can_delete":false,"product_type":"c1","uid":1529599,"ip_address":"","ucode":"F01E96A3413619","user_header":"https://static001.geekbang.org/account/avatar/00/17/56/ff/cb2aa0a8.jpg","comment_is_top":false,"comment_ctime":1650531711,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650531711","product_id":100094901,"comment_content":"最后一段说的很星辰大海，愿一代代程序员前赴后继，走出一条自主之路","like_count":0},{"had_liked":false,"id":329283,"user_name":"Y          X","can_delete":false,"product_type":"c1","uid":2667912,"ip_address":"","ucode":"C9926CA7510F3C","user_header":"https://static001.geekbang.org/account/avatar/00/28/b5/88/9b65e31c.jpg","comment_is_top":false,"comment_ctime":1641267713,"is_pvip":false,"replies":[{"id":"120112","content":"加油","user_name":"作者回复","comment_id":329283,"uid":"1360512","ip_address":"","utype":1,"ctime":1641535969,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1641267713","product_id":100094901,"comment_content":"感觉写的很不错，希望能够学习到更深入的知识","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"海纳","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544473,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641535969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318153,"user_name":"kylin","can_delete":false,"product_type":"c1","uid":1351248,"ip_address":"","ucode":"3588B62A4F9534","user_header":"https://static001.geekbang.org/account/avatar/00/14/9e/50/21e0beca.jpg","comment_is_top":false,"comment_ctime":1635165704,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1635165704","product_id":100094901,"comment_content":"看了老师之前的直播，非常精彩，果断买了","like_count":0},{"had_liked":false,"id":318137,"user_name":"coder","can_delete":false,"product_type":"c1","uid":2824732,"ip_address":"","ucode":"F85CD7A71EBA0C","user_header":"https://static001.geekbang.org/account/avatar/00/2b/1a/1c/d160d44b.jpg","comment_is_top":false,"comment_ctime":1635160804,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1635160804","product_id":100094901,"comment_content":"华为jdk是开源的吗","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"海纳","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408151,"discussion_content":"是的。但你也可以选择openjdk，只要版本号不低于8即可。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635177220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}