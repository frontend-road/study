{"id":104631,"title":"61 | 使用KVO监听和处理播放资源的状态变化","content":"<p><strong>PDF 课件和源代码下载地址：</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/geektime-ios-course\">https://gitee.com/geektime-geekbang/geektime-ios-course</a></p>","comments":[{"had_liked":false,"id":142034,"user_name":"Mason","can_delete":false,"product_type":"c3","uid":1453662,"ip_address":"","ucode":"AA2E37FDF9D313","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/5e/d42c79bb.jpg","comment_is_top":false,"comment_ctime":1571281310,"is_pvip":false,"replies":[{"id":56041,"content":"1. 目前代码中，视频点击播放的Tap手势就是加到CoverView上的，在GTVideoCoverView.m中的44行\n2. button是CoverView的子view，当点击播放之后，AVPlayerLayer也是CoverView中UIImageview.layer的子layer。对于类似 addsubview&#47;addSublayer，都是最后加入的view&#47;layer在所有subviews的最上层，依赖add的时序。在代码中可以在GTVideoPlayer.m L64打一个断点，看下传入的attachView其实是 GTVideoCoverView中的UIImageView，但是无论如何，整个subview的展示顺序，都是依赖自己或者自己父View addsubview的时序的。（当然可以通过insert或者bringtoFront来调整subviews的展示，这里暂时不考虑）","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1572245898,"ip_address":"","comment_id":142034,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"朱老师你好,有两个疑惑还请帮忙解下哈\n1)试过tap添加到coverView上不行,非得添加到cell上才有响应,为何?\n2)buttonView.layer和playLayer同是coverView.layer的子layer吧,怎么感觉playLayer在buttonView.layer上层呢(我试过将buttonView的frame设为cell一样大, playLayer的frame设置成(0.0.200.200),可playLayer依然在buttonView.layer上面),想知道coverView.layer是怎么展示它的两个子layer的?是以入栈出栈的形式吗,还是AVPlayerLayer的特殊性?","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470961,"discussion_content":"1. 目前代码中，视频点击播放的Tap手势就是加到CoverView上的，在GTVideoCoverView.m中的44行\n2. button是CoverView的子view，当点击播放之后，AVPlayerLayer也是CoverView中UIImageview.layer的子layer。对于类似 addsubview/addSublayer，都是最后加入的view/layer在所有subviews的最上层，依赖add的时序。在代码中可以在GTVideoPlayer.m L64打一个断点，看下传入的attachView其实是 GTVideoCoverView中的UIImageView，但是无论如何，整个subview的展示顺序，都是依赖自己或者自己父View addsubview的时序的。（当然可以通过insert或者bringtoFront来调整subviews的展示，这里暂时不考虑）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572245898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}