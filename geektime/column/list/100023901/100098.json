{"id":100098,"title":"45 | CSP模型：Golang的主力队员","content":"<p>Golang是一门号称从语言层面支持并发的编程语言，支持并发是Golang一个非常重要的特性。在上一篇文章<a href=\"https://time.geekbang.org/column/article/99787\">《44 | 协程：更轻量级的线程》</a>中我们介绍过，Golang支持协程，协程可以类比Java中的线程，解决并发问题的难点就在于线程（协程）之间的协作。</p><p>那Golang是如何解决协作问题的呢？</p><p>总的来说，Golang提供了两种不同的方案：一种方案支持协程之间以共享内存的方式通信，Golang提供了管程和原子类来对协程进行同步控制，这个方案与Java语言类似；另一种方案支持协程之间以消息传递（Message-Passing）的方式通信，本质上是要避免共享，Golang的这个方案是基于<strong>CSP</strong>（Communicating Sequential Processes）模型实现的。Golang比较推荐的方案是后者。</p><h2>什么是CSP模型</h2><p>我们在<a href=\"https://time.geekbang.org/column/article/98903\">《42 | Actor模型：面向对象原生的并发模型》</a>中介绍了Actor模型，Actor模型中Actor之间就是不能共享内存的，彼此之间通信只能依靠消息传递的方式。Golang实现的CSP模型和Actor模型看上去非常相似，Golang程序员中有句格言：“<strong>不要以共享内存方式通信，要以通信方式共享内存</strong>（Don’t communicate by sharing memory, share memory by communicating）。”虽然Golang中协程之间，也能够以共享内存的方式通信，但是并不推荐；而推荐的以通信的方式共享内存，实际上指的就是协程之间以消息传递方式来通信。</p><!-- [[[read_end]]] --><p>下面我们先结合一个简单的示例，看看Golang中协程之间是如何以消息传递的方式实现通信的。我们示例的目标是打印从1累加到100亿的结果，如果使用单个协程来计算，大概需要4秒多的时间。单个协程，只能用到CPU中的一个核，为了提高计算性能，我们可以用多个协程来并行计算，这样就能发挥多核的优势了。</p><p>在下面的示例代码中，我们用了4个子协程来并行执行，这4个子协程分别计算[1, 25亿]、(25亿,  50亿]、(50亿, 75亿]、(75亿, 100亿]，最后再在主协程中汇总4个子协程的计算结果。主协程要汇总4个子协程的计算结果，势必要和4个子协程之间通信，<strong>Golang中协程之间通信推荐的是使用channel</strong>，channel你可以形象地理解为现实世界里的管道。另外，calc()方法的返回值是一个只能接收数据的channel ch，它创建的子协程会把计算结果发送到这个ch中，而主协程也会将这个计算结果通过ch读取出来。</p><pre><code>import (\n\t&quot;fmt&quot;\n\t&quot;time&quot;\n)\n\nfunc main() {\n    // 变量声明\n\tvar result, i uint64\n    // 单个协程执行累加操作\n\tstart := time.Now()\n\tfor i = 1; i &lt;= 10000000000; i++ {\n\t\tresult += i\n\t}\n\t// 统计计算耗时\n\telapsed := time.Since(start)\n\tfmt.Printf(&quot;执行消耗的时间为:&quot;, elapsed)\n\tfmt.Println(&quot;, result:&quot;, result)\n\n    // 4个协程共同执行累加操作\n\tstart = time.Now()\n\tch1 := calc(1, 2500000000)\n\tch2 := calc(2500000001, 5000000000)\n\tch3 := calc(5000000001, 7500000000)\n\tch4 := calc(7500000001, 10000000000)\n    // 汇总4个协程的累加结果\n\tresult = &lt;-ch1 + &lt;-ch2 + &lt;-ch3 + &lt;-ch4\n\t// 统计计算耗时\n\telapsed = time.Since(start)\n\tfmt.Printf(&quot;执行消耗的时间为:&quot;, elapsed)\n\tfmt.Println(&quot;, result:&quot;, result)\n}\n// 在协程中异步执行累加操作，累加结果通过channel传递\nfunc calc(from uint64, to uint64) &lt;-chan uint64 {\n    // channel用于协程间的通信\n\tch := make(chan uint64)\n    // 在协程中执行累加操作\n\tgo func() {\n\t\tresult := from\n\t\tfor i := from + 1; i &lt;= to; i++ {\n\t\t\tresult += i\n\t\t}\n        // 将结果写入channel\n\t\tch &lt;- result\n\t}()\n    // 返回结果是用于通信的channel\n\treturn ch\n}\n</code></pre><h2>CSP模型与生产者-消费者模式</h2><p>你可以简单地把Golang实现的CSP模型类比为生产者-消费者模式，而channel可以类比为生产者-消费者模式中的阻塞队列。不过，需要注意的是Golang中channel的容量可以是0，容量为0的channel在Golang中被称为<strong>无缓冲的channel</strong>，容量大于0的则被称为<strong>有缓冲的channel</strong>。</p><p>无缓冲的channel类似于Java中提供的SynchronousQueue，主要用途是在两个协程之间做数据交换。比如上面累加器的示例代码中，calc()方法内部创建的channel就是无缓冲的channel。</p><p>而创建一个有缓冲的channel也很简单，在下面的示例代码中，我们创建了一个容量为4的channel，同时创建了4个协程作为生产者、4个协程作为消费者。</p><pre><code>// 创建一个容量为4的channel \nch := make(chan int, 4)\n// 创建4个协程，作为生产者\nfor i := 0; i &lt; 4; i++ {\n\tgo func() {\n\t\tch &lt;- 7\n\t}()\n}\n// 创建4个协程，作为消费者\nfor i := 0; i &lt; 4; i++ {\n    go func() {\n    \to := &lt;-ch\n    \tfmt.Println(&quot;received:&quot;, o)\n    }()\n}\n</code></pre><p>Golang中的channel是语言层面支持的，所以可以使用一个左向箭头（&lt;-）来完成向channel发送数据和读取数据的任务，使用上还是比较简单的。Golang中的channel是支持双向传输的，所谓双向传输，指的是一个协程既可以通过它发送数据，也可以通过它接收数据。</p><p>不仅如此，Golang中还可以将一个双向的channel变成一个单向的channel，在累加器的例子中，calc()方法中创建了一个双向channel，但是返回的就是一个只能接收数据的单向channel，所以主协程中只能通过它接收数据，而不能通过它发送数据，如果试图通过它发送数据，编译器会提示错误。对比之下，双向变单向的功能，如果以SDK方式实现，还是很困难的。</p><h2>CSP模型与Actor模型的区别</h2><p>同样是以消息传递的方式来避免共享，那Golang实现的CSP模型和Actor模型有什么区别呢？</p><p>第一个最明显的区别就是：<strong>Actor模型中没有channel</strong>。虽然Actor模型中的 mailbox 和 channel 非常像，看上去都像个FIFO队列，但是区别还是很大的。Actor模型中的mailbox对于程序员来说是“透明”的，mailbox明确归属于一个特定的Actor，是Actor模型中的内部机制；而且Actor之间是可以直接通信的，不需要通信中介。但CSP模型中的 channel 就不一样了，它对于程序员来说是“可见”的，是通信的中介，传递的消息都是直接发送到 channel 中的。</p><p>第二个区别是：Actor模型中发送消息是<strong>非阻塞</strong>的，而CSP模型中是<strong>阻塞</strong>的。Golang实现的CSP模型，channel是一个阻塞队列，当阻塞队列已满的时候，向channel中发送数据，会导致发送消息的协程阻塞。</p><p>第三个区别则是关于消息送达的。在<a href=\"https://time.geekbang.org/column/article/98903\">《42 | Actor模型：面向对象原生的并发模型》</a>这篇文章中，我们介绍过Actor模型理论上不保证消息百分百送达，而在Golang实现的<strong>CSP模型中，是能保证消息百分百送达的</strong>。不过这种百分百送达也是有代价的，那就是有可能会导致<strong>死锁</strong>。</p><p>比如，下面这段代码就存在死锁问题，在主协程中，我们创建了一个无缓冲的channel ch，然后从ch中接收数据，此时主协程阻塞，main()方法中的主协程阻塞，整个应用就阻塞了。这就是Golang中最简单的一种死锁。</p><pre><code>func main() {\n    // 创建一个无缓冲的channel  \n    ch := make(chan int)\n    // 主协程会阻塞在此处，发生死锁\n    &lt;- ch \n}\n</code></pre><h2>总结</h2><p>Golang中虽然也支持传统的共享内存的协程间通信方式，但是推荐的还是使用CSP模型，以通信的方式共享内存。</p><p>Golang中实现的CSP模型功能上还是很丰富的，例如支持select语句，select语句类似于网络编程里的多路复用函数select()，只要有一个channel能够发送成功或者接收到数据就可以跳出阻塞状态。鉴于篇幅原因，我就点到这里，不详细介绍那么多了。</p><p>CSP模型是托尼·霍尔（Tony Hoare）在1978年提出的，不过这个模型这些年一直都在发展，其理论远比Golang的实现复杂得多，如果你感兴趣，可以参考霍尔写的<a href=\"http://www.usingcsp.com/cspbook.pdf\">Communicating Sequential Processes</a>这本电子书。另外，霍尔在并发领域还有一项重要成就，那就是提出了霍尔管程模型，这个你应该很熟悉了，Java领域解决并发问题的理论基础就是它。</p><p>Java领域可以借助第三方的类库<a href=\"https://www.cs.kent.ac.uk/projects/ofa/jcsp/\">JCSP</a>来支持CSP模型，相比Golang的实现，JCSP更接近理论模型，如果你感兴趣，可以下载学习。不过需要注意的是，JCSP并没有经过广泛的生产环境检验，所以并不建议你在生产环境中使用。</p><p>欢迎在留言区与我分享你的想法，也欢迎你在留言区记录你的思考过程。感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给更多的朋友。</p><p></p>","comments":[{"had_liked":false,"id":102562,"user_name":"Sunqc","can_delete":false,"product_type":"c1","uid":1473717,"ip_address":"","ucode":"2C54659635403F","user_header":"https://static001.geekbang.org/account/avatar/00/16/7c/b5/4a7a2bd4.jpg","comment_is_top":false,"comment_ctime":1560252614,"is_pvip":false,"replies":[{"id":"37120","content":"感谢感谢😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560263243,"ip_address":"","comment_id":102562,"utype":1}],"discussion_count":1,"race_medal":0,"score":"117524369606","product_id":100023901,"comment_content":"会反复看这些内容，每次看感觉都不一样，另外老师推荐的 并发编程的艺术，还有图解java多线程模式，结合这些书看加深理解。持续关注并发编程","like_count":27,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453480,"discussion_content":"感谢感谢😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560263243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102341,"user_name":"zhangtnty","can_delete":false,"product_type":"c1","uid":1180553,"ip_address":"","ucode":"3C9A14BD7CF432","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/89/e1621a01.jpg","comment_is_top":false,"comment_ctime":1560210526,"is_pvip":false,"replies":[{"id":"36923","content":"感谢😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560216041,"ip_address":"","comment_id":102341,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40214916190","product_id":100023901,"comment_content":"王老师辛苦了👍","like_count":9,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453372,"discussion_content":"感谢😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560216041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102372,"user_name":"QQ怪","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1560214171,"is_pvip":false,"replies":[{"id":"37124","content":"赶紧见好就收😂😂","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560263503,"ip_address":"","comment_id":102372,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27330017947","product_id":100023901,"comment_content":"更本看不够啊，不想老师停更","like_count":6,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453384,"discussion_content":"赶紧见好就收😂😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560263503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102352,"user_name":"walkingonair","can_delete":false,"product_type":"c1","uid":1444748,"ip_address":"","ucode":"0C8BEE064ABF8B","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/8c/db1ee0a2.jpg","comment_is_top":false,"comment_ctime":1560211839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27330015615","product_id":100023901,"comment_content":"最后一篇了，结束打卡，内容很丰富，还要复习两遍","like_count":6},{"had_liked":false,"id":131515,"user_name":"叫我天才好了","can_delete":false,"product_type":"c1","uid":1449175,"ip_address":"","ucode":"4EC69FB09E3435","user_header":"https://static001.geekbang.org/account/avatar/00/16/1c/d7/a53dad9e.jpg","comment_is_top":false,"comment_ctime":1567776958,"is_pvip":false,"replies":[{"id":"50125","content":"加油👍","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1567805114,"ip_address":"","comment_id":131515,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18747646142","product_id":100023901,"comment_content":"第一遍只能说让我理解了并发的处理，还是要多复习几遍。加油吧，不拼一下你永远不知道你的潜力有多大，感谢老师的分享。","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466496,"discussion_content":"加油👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567805114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114627,"user_name":"每天晒白牙","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1563352659,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"18743221843","product_id":100023901,"comment_content":"追完了","like_count":4},{"had_liked":false,"id":197386,"user_name":"宁悦","can_delete":false,"product_type":"c1","uid":1901403,"ip_address":"","ucode":"68844C314FEEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg","comment_is_top":false,"comment_ctime":1585372694,"is_pvip":false,"replies":[{"id":"75063","content":"感谢支持😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1585630753,"ip_address":"","comment_id":197386,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14470274582","product_id":100023901,"comment_content":"今天看完了整个系列，觉得老师讲的非常好，自己也在看图解java多线程，加深理解。感谢老师","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489509,"discussion_content":"感谢支持😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585630753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136159,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1569375155,"is_pvip":false,"replies":[{"id":"52158","content":"👍","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1569387512,"ip_address":"","comment_id":136159,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14454277043","product_id":100023901,"comment_content":"终于看完了。对Java领域的并发编程有了更深一层的认识。认真对待专栏的每一节课程，\b学原理，看示例程序，思考课后的问题。尤其是第一部分关于Java多线程编程相关的理论介绍是让我<br>收获最大的。工作中对于Java中的各种队列了解不是很多，在这个专栏中学习了。至于专栏中关于并发设计模式和案例分析两部分的讲解，感觉了解即可。专栏虽然结束了，但是对于并发的<br>学习没有结束，继续！","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468487,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569387512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116032,"user_name":"知行合一","can_delete":false,"product_type":"c1","uid":1521486,"ip_address":"","ucode":"2B8E634FC4CFB7","user_header":"https://static001.geekbang.org/account/avatar/00/17/37/4e/5c3153b2.jpg","comment_is_top":false,"comment_ctime":1563775182,"is_pvip":false,"replies":[{"id":"43623","content":"过奖啦😄现在就想休息😂","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1564486160,"ip_address":"","comment_id":116032,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14448677070","product_id":100023901,"comment_content":"订了十几个专栏，老师讲的是最通熟易懂的，虽然有些知识点由于自己不够熟悉还需要多看几遍，找相关的书籍多加研习。谢谢老师！真心希望以后还能学习老师的新专栏","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459362,"discussion_content":"过奖啦😄现在就想休息😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564486160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108897,"user_name":"党","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1561911775,"is_pvip":false,"replies":[{"id":"43899","content":"都可以选择的时候，更多看公司的技术路线，团队积累，实际上没那么纠结","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1564657312,"ip_address":"","comment_id":108897,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14446813663","product_id":100023901,"comment_content":"现在golang也很火 golang和java 以后怎么选","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456158,"discussion_content":"都可以选择的时候，更多看公司的技术路线，团队积累，实际上没那么纠结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564657312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105928,"user_name":"马哲富","can_delete":false,"product_type":"c1","uid":1107917,"ip_address":"","ucode":"D6BDDFE3CC07ED","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/cd/08088f14.jpg","comment_is_top":false,"comment_ctime":1561105511,"is_pvip":false,"replies":[{"id":"38315","content":"客气啦😄看的够快的👍","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1561118195,"ip_address":"","comment_id":105928,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14446007399","product_id":100023901,"comment_content":"2个星期看完了，还得慢慢消化，谢谢王老师，老师辛苦了！","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454875,"discussion_content":"客气啦😄看的够快的👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561118195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161576,"user_name":"海涛","can_delete":false,"product_type":"c1","uid":1108018,"ip_address":"","ucode":"02B0E09EE84868","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/32/f44f163e.jpg","comment_is_top":false,"comment_ctime":1576236399,"is_pvip":false,"replies":[{"id":"61606","content":"👍","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1576317925,"ip_address":"","comment_id":161576,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10166170991","product_id":100023901,"comment_content":"学的比较晚也比较慢，准备开始刷第二遍","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477769,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576317925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119573,"user_name":"jery","can_delete":false,"product_type":"c1","uid":1236800,"ip_address":"","ucode":"EDA86CE9E9C0FF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/40/5527fb46.jpg","comment_is_top":false,"comment_ctime":1564627876,"is_pvip":false,"replies":[{"id":"43898","content":"ab每台机器最多开25个线程就可以了，不知道是否有必要那么精确","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1564657003,"ip_address":"","comment_id":119573,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10154562468","product_id":100023901,"comment_content":"想问老师一个问题，问题描述：集群中有A、B两台机器，集群与另一系统C进行通信。<br>系统C作为服务端最大并发数为50。如何保证集群中两台机器并<br>发向C发起请求控制在50并发之内。<br>我的思考:解决方法1：A、B两台机器平分50个并发。2.建一张表，实时监控正在执行任务任务的线程数，让A、B并发总数不大于50.","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460959,"discussion_content":"ab每台机器最多开25个线程就可以了，不知道是否有必要那么精确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564657003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212902,"avatar":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","nickname":"旅途","note":"","ucode":"5022477E8E9441","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":194050,"discussion_content":"做一个集中式分配服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583168343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102813,"user_name":"J.M.Liu","can_delete":false,"product_type":"c1","uid":1200037,"ip_address":"","ucode":"B2CB84B8E923A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg","comment_is_top":false,"comment_ctime":1560308044,"is_pvip":false,"replies":[{"id":"37189","content":"感谢支持😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560310841,"ip_address":"","comment_id":102813,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10150242636","product_id":100023901,"comment_content":"全程跟完的，飞机起飞关机前，打卡。感谢老师","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453595,"discussion_content":"感谢支持😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560310841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102580,"user_name":"一道阳光","can_delete":false,"product_type":"c1","uid":1239557,"ip_address":"","ucode":"F35207CCCEC6E2","user_header":"https://static001.geekbang.org/account/avatar/00/12/ea/05/c0d8014d.jpg","comment_is_top":false,"comment_ctime":1560257690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10150192282","product_id":100023901,"comment_content":"个人感觉把前三个模块重点学完，后面的框架、其他模型有空了解下，不是重点。对于框架部分，有阅读源码能力有必要深入研究。","like_count":2},{"had_liked":false,"id":317188,"user_name":"卢","can_delete":false,"product_type":"c1","uid":1542037,"ip_address":"","ucode":"B6A9F41AEE348C","user_header":"https://static001.geekbang.org/account/avatar/00/17/87/95/cba0a896.jpg","comment_is_top":false,"comment_ctime":1634701642,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5929668938","product_id":100023901,"comment_content":"19年买的，21年才看，老师写的太好了，yyds","like_count":1,"discussions":[{"author":{"id":1079495,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","nickname":"新世界","note":"","ucode":"4473DC1505F158","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549184,"discussion_content":"我也是19年买，之前拖延，最近重新看了一遍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643700945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292409,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1620808945,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5915776241","product_id":100023901,"comment_content":"最后两章有点懵逼，不了解golang。。。","like_count":1},{"had_liked":false,"id":270359,"user_name":"Geek_30c31e","can_delete":false,"product_type":"c1","uid":2181920,"ip_address":"","ucode":"E63792CE7A2E57","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIIyTVrODEddUKR5FibCyYrgJxjtyMCfnKmxKWosumoEnp8L0TCF39JNUG0mz7x9TEiaxb5B2xOfIxw/132","comment_is_top":false,"comment_ctime":1609080416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5904047712","product_id":100023901,"comment_content":"来的比较晚，哈哈哈，持续复习。","like_count":1},{"had_liked":false,"id":231438,"user_name":"爱读书的张先生","can_delete":false,"product_type":"c1","uid":1106110,"ip_address":"","ucode":"1E132D3D208E7A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/be/ee317b4c.jpg","comment_is_top":false,"comment_ctime":1593676502,"is_pvip":false,"replies":[{"id":"85622","content":"👍🏻","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1593836304,"ip_address":"","comment_id":231438,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5888643798","product_id":100023901,"comment_content":"记录一下，终于看完了，感谢王老师。","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500304,"discussion_content":"👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593836304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222909,"user_name":"kimoti","can_delete":false,"product_type":"c1","uid":1897671,"ip_address":"","ucode":"0A78077408C2B1","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f4/c7/037235c9.jpg","comment_is_top":false,"comment_ctime":1590954350,"is_pvip":false,"replies":[{"id":"82601","content":"恭喜😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1591406213,"ip_address":"","comment_id":222909,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5885921646","product_id":100023901,"comment_content":"坚持到了最后一篇,感谢王老师","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496955,"discussion_content":"恭喜😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591406213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208235,"user_name":"王丰","can_delete":false,"product_type":"c1","uid":1084423,"ip_address":"","ucode":"E4A668D873A32A","user_header":"https://static001.geekbang.org/account/avatar/00/10/8c/07/b4ea8f10.jpg","comment_is_top":false,"comment_ctime":1587306945,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5882274241","product_id":100023901,"comment_content":"疫情期间看了一遍 受益匪浅 励志再刷 谢谢 王老师","like_count":1},{"had_liked":false,"id":205738,"user_name":"RRR","can_delete":false,"product_type":"c1","uid":1014991,"ip_address":"","ucode":"F32A579D201EC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/cf/d5382404.jpg","comment_is_top":false,"comment_ctime":1586721152,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5881688448","product_id":100023901,"comment_content":"channel 分为缓冲和非缓冲两种，缓冲 channel 在队列满了以后会阻塞，而非缓冲 channel 一直是阻塞操作。例子中，如果是非缓冲 channel 就不会 deadlock。","like_count":1,"discussions":[{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"时光守护者-基兰","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373802,"discussion_content":"我也觉得是阻塞而不是死锁","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620877690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183377,"user_name":"夏目","can_delete":false,"product_type":"c1","uid":1212750,"ip_address":"","ucode":"67C075A01CF4D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/4e/d71092f4.jpg","comment_is_top":false,"comment_ctime":1583030582,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5877997878","product_id":100023901,"comment_content":"老师，请问协程是对应到内核态的线程利用cpu的","like_count":1},{"had_liked":false,"id":109531,"user_name":"L","can_delete":false,"product_type":"c1","uid":1357311,"ip_address":"","ucode":"5B847B2378854E","user_header":"https://static001.geekbang.org/account/avatar/00/14/b5/ff/d1f205b0.jpg","comment_is_top":false,"comment_ctime":1562051815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857019111","product_id":100023901,"comment_content":"花了一个多月追完了","like_count":1},{"had_liked":false,"id":106062,"user_name":"Hour","can_delete":false,"product_type":"c1","uid":1448748,"ip_address":"","ucode":"AA1045ACABC0BB","user_header":"https://static001.geekbang.org/account/avatar/00/16/1b/2c/6b3c0911.jpg","comment_is_top":false,"comment_ctime":1561162270,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856129566","product_id":100023901,"comment_content":"全程跟完，很有收获！这个专栏会反复品味，因为满满干货，都是经典！","like_count":1},{"had_liked":false,"id":104537,"user_name":"Rancood","can_delete":false,"product_type":"c1","uid":1204333,"ip_address":"","ucode":"052BDF2221F480","user_header":"https://static001.geekbang.org/account/avatar/00/12/60/6d/e2576fda.jpg","comment_is_top":false,"comment_ctime":1560773745,"is_pvip":false,"replies":[{"id":"38279","content":"彼此彼此😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1561092783,"ip_address":"","comment_id":104537,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855741041","product_id":100023901,"comment_content":"第一个完整看完的课程，学到了不少，王老师辛苦了","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454314,"discussion_content":"彼此彼此😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561092783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103380,"user_name":"我的腿腿","can_delete":false,"product_type":"c1","uid":1239277,"ip_address":"","ucode":"2AAA36A7C3AD75","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/ed/f9347e5e.jpg","comment_is_top":false,"comment_ctime":1560424268,"is_pvip":false,"replies":[{"id":"37396","content":"劳动不分高低贵贱😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560428566,"ip_address":"","comment_id":103380,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855391564","product_id":100023901,"comment_content":"老师辛苦了，我也打卡，像我们底层的程序员只能好好学习技术前行了","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453848,"discussion_content":"劳动不分高低贵贱😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560428566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103078,"user_name":"ack","can_delete":false,"product_type":"c1","uid":1440912,"ip_address":"","ucode":"69CA1233EEA8E2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg","comment_is_top":false,"comment_ctime":1560382961,"is_pvip":false,"replies":[{"id":"37424","content":"多谢夸奖😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560432600,"ip_address":"","comment_id":103078,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855350257","product_id":100023901,"comment_content":"今天默默打开才发现已经更完了，谢谢老师，写得真的通俗易懂","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453720,"discussion_content":"多谢夸奖😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560432600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103056,"user_name":"拒绝","can_delete":false,"product_type":"c1","uid":1335155,"ip_address":"","ucode":"CB0264C4D3FE17","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg","comment_is_top":false,"comment_ctime":1560358609,"is_pvip":false,"replies":[{"id":"37420","content":"多谢夸奖😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560432411,"ip_address":"","comment_id":103056,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855325905","product_id":100023901,"comment_content":"第一个看完的专栏，老师叫的跟细致，以前只会简单的用一下线程，现在稍微会诊断一下多线程引发的问题了，课程虽然讲完了，内容还未消化，会反复阅读。","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453708,"discussion_content":"多谢夸奖😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560432411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102828,"user_name":"朱延云","can_delete":false,"product_type":"c1","uid":1319759,"ip_address":"","ucode":"08E6EE2AB82DE9","user_header":"https://static001.geekbang.org/account/avatar/00/14/23/4f/3ce24bed.jpg","comment_is_top":false,"comment_ctime":1560309732,"is_pvip":false,"replies":[{"id":"37232","content":"也感谢你的支持😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560348202,"ip_address":"","comment_id":102828,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855277028","product_id":100023901,"comment_content":"谢谢老师，终于补完了，对并发编程有了更多认识。特备棒的课程，辛苦了","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453603,"discussion_content":"也感谢你的支持😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560348202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102751,"user_name":"nimil","can_delete":false,"product_type":"c1","uid":1197925,"ip_address":"","ucode":"19933068972746","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/65/cce8eb34.jpg","comment_is_top":false,"comment_ctime":1560301470,"is_pvip":false,"replies":[{"id":"37190","content":"感谢支持😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560310996,"ip_address":"","comment_id":102751,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855268766","product_id":100023901,"comment_content":"最后一篇了？谢谢老师，收获很多","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453561,"discussion_content":"感谢支持😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560310996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102741,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1560300895,"is_pvip":false,"replies":[{"id":"37188","content":"还有一篇不谈技术的总结","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560310810,"ip_address":"","comment_id":102741,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855268191","product_id":100023901,"comment_content":"打卡！这是最后一期了吗？","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453554,"discussion_content":"还有一篇不谈技术的总结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560310810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102650,"user_name":"圆小白","can_delete":false,"product_type":"c1","uid":1250481,"ip_address":"","ucode":"E2C937746A8486","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLicqNWaoMc7SI7ZCFZ5cicicQ7zxlyTP9lQHYtJL8QYd17YasOn5p1iciawibqPRR1wic6FVG4V6icTDPhtA/132","comment_is_top":false,"comment_ctime":1560272428,"is_pvip":false,"replies":[{"id":"37186","content":"彼此彼此😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560310690,"ip_address":"","comment_id":102650,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855239724","product_id":100023901,"comment_content":"老师，幸苦了。","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453520,"discussion_content":"彼此彼此😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560310690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102605,"user_name":"空知","can_delete":false,"product_type":"c1","uid":1013283,"ip_address":"","ucode":"C448E98238DD36","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/23/31e5e984.jpg","comment_is_top":false,"comment_ctime":1560262294,"is_pvip":false,"replies":[{"id":"37187","content":"客气了，感谢支持😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560310736,"ip_address":"","comment_id":102605,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855229590","product_id":100023901,"comment_content":"感谢 老师 ヾ(◍°∇°◍)ﾉﾞ！","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453498,"discussion_content":"客气了，感谢支持😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560310736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102515,"user_name":"onepieceJT2018","can_delete":false,"product_type":"c1","uid":1112182,"ip_address":"","ucode":"C8C214C3D5D285","user_header":"https://static001.geekbang.org/account/avatar/00/10/f8/76/3db69173.jpg","comment_is_top":false,"comment_ctime":1560241707,"is_pvip":true,"discussion_count":0,"race_medal":3,"score":"5855209003","product_id":100023901,"comment_content":"终于追完老师的专栏  虽然golang的语法看上去有点不适应 但是了解到CSP这种模型的思想还是很有收获的","like_count":1},{"had_liked":false,"id":102451,"user_name":"西行寺咕哒子","can_delete":false,"product_type":"c1","uid":1441988,"ip_address":"","ucode":"CAE570245BA299","user_header":"https://static001.geekbang.org/account/avatar/00/16/00/c4/634c1e10.jpg","comment_is_top":false,"comment_ctime":1560222978,"is_pvip":false,"replies":[{"id":"37122","content":"你也辛苦了😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560263321,"ip_address":"","comment_id":102451,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855190274","product_id":100023901,"comment_content":"全程追更下来， 老师辛苦了","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453431,"discussion_content":"你也辛苦了😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560263321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102444,"user_name":"kaixiao7","can_delete":false,"product_type":"c1","uid":1242577,"ip_address":"","ucode":"505EC4AFB5E656","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/d1/cc6f82eb.jpg","comment_is_top":false,"comment_ctime":1560221881,"is_pvip":false,"replies":[{"id":"37123","content":"感谢信任😄","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1560263347,"ip_address":"","comment_id":102444,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855189177","product_id":100023901,"comment_content":"在这个专栏中学到了很多，尤其是并发编程的原理，老师讲的非常棒。<br>非常感谢老师，老师辛苦了！","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453429,"discussion_content":"感谢信任😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560263347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102412,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1560217253,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855184549","product_id":100023901,"comment_content":"谢谢😜 ","like_count":1},{"had_liked":false,"id":102405,"user_name":"木小柒","can_delete":false,"product_type":"c1","uid":1000802,"ip_address":"","ucode":"947439CDD0B5B1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/62/3c6041e7.jpg","comment_is_top":false,"comment_ctime":1560216565,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5855183861","product_id":100023901,"comment_content":"这个专栏是完整读完的，比虚拟机那个容易多了。虚拟机那个专栏，看的非常辛苦才读完，还很多未能理解，往后还要继续重读。读完对并发编程理解又近了一步，非常赞。","like_count":1},{"had_liked":false,"id":102404,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1560216432,"is_pvip":false,"replies":[{"id":"43626","content":"磁盘理论上也不是百分百可靠","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1564486674,"ip_address":"","comment_id":102404,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855183728","product_id":100023901,"comment_content":"&quot;Actor 模型中发送消息是非阻塞的&quot;---&gt;如果actor mailbox满了呢？是否发送者阻塞？另外，如果引入actor persistence是否能保证消息百分百送达？","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453406,"discussion_content":"磁盘理论上也不是百分百可靠","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564486674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357136,"user_name":"努力努力再努力","can_delete":false,"product_type":"c1","uid":1493907,"ip_address":"北京","ucode":"0C6EEA28FCE8C7","user_header":"https://static001.geekbang.org/account/avatar/00/16/cb/93/4adea49a.jpg","comment_is_top":false,"comment_ctime":1662986936,"is_pvip":true,"replies":[{"id":"130074","content":"👍","user_name":"作者回复","user_name_real":"编辑","uid":"1269969","ctime":1663219002,"ip_address":"北京","comment_id":357136,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1662986936","product_id":100023901,"comment_content":"学完啦 赞","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587683,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663219002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1493907,"avatar":"https://static001.geekbang.org/account/avatar/00/16/cb/93/4adea49a.jpg","nickname":"努力努力再努力","note":"","ucode":"0C6EEA28FCE8C7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588381,"discussion_content":"哈哈哈，感谢老师点赞，老师这个专栏我刷了3遍，也真正体会到什么叫温如而知新。\n\n第一次看，抱着疑惑的什么都不懂的心态看\n第二次看，抱着已知的知识，找一些疏忽的地方看\n第三次看，结合老师讲的设计模式，并发模型来看，每次看都有每次的新体验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663729342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350559,"user_name":"码小呆","can_delete":false,"product_type":"c1","uid":2055809,"ip_address":"","ucode":"44532D6ABF9340","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5e/81/82709d6e.jpg","comment_is_top":false,"comment_ctime":1657004450,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657004450","product_id":100023901,"comment_content":"感觉还需要多次观看才能够深刻理解","like_count":0},{"had_liked":false,"id":343410,"user_name":"焕澪","can_delete":false,"product_type":"c1","uid":1217720,"ip_address":"","ucode":"783F37930E5A2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/94/b8/3ac880b9.jpg","comment_is_top":false,"comment_ctime":1650819920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650819920","product_id":100023901,"comment_content":"不是很理解csp模型解决了什么问题，举的例子里面，人工拆分四个协程计算，再将结果合并，这四个结果本身也不涉及争用啊，共享还是消息并没有太大区别<br><br>如果是涉及争用的场景，共享需要管程，但消息需要阻塞，csp消息是消除了争用，同步阻塞式进行执行，优势是什么呢，望老师和大家帮忙解惑","like_count":0},{"had_liked":false,"id":332826,"user_name":"新世界","can_delete":false,"product_type":"c1","uid":1079495,"ip_address":"","ucode":"4473DC1505F158","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","comment_is_top":false,"comment_ctime":1643701121,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643701121","product_id":100023901,"comment_content":"老师的专栏真不错，22年大年初一又刷了一遍，课程中推荐的资料也不少，相当不错👍👍👍","like_count":0},{"had_liked":false,"id":320371,"user_name":"马半仙","can_delete":false,"product_type":"c1","uid":1689144,"ip_address":"","ucode":"14868A55469A76","user_header":"https://static001.geekbang.org/account/avatar/00/19/c6/38/b41dc894.jpg","comment_is_top":false,"comment_ctime":1636279547,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636279547","product_id":100023901,"comment_content":"打卡完结，谢谢老师","like_count":0},{"had_liked":false,"id":310075,"user_name":"小乙哥","can_delete":false,"product_type":"c1","uid":1063308,"ip_address":"","ucode":"C77E79BEA0C325","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","comment_is_top":false,"comment_ctime":1630479816,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630479816","product_id":100023901,"comment_content":"最后几篇的并发设计模式，还是开眼界了。之前对并发的理解狭隘的局限在java领域了，跳出来看全景，还是要关注业界其他优秀的解决方案","like_count":0},{"had_liked":false,"id":279140,"user_name":"竹马彦四郎的好朋友影法師","can_delete":false,"product_type":"c1","uid":1475385,"ip_address":"","ucode":"A9555AEFF90CDF","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/39/f9623363.jpg","comment_is_top":false,"comment_ctime":1613634965,"is_pvip":false,"replies":[{"id":"102077","content":"优秀","user_name":"作者回复","user_name_real":"王宝令","uid":"1269969","ctime":1614599272,"ip_address":"","comment_id":279140,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1613634965","product_id":100023901,"comment_content":"2021年原地过年，把这个专栏刷掉了~ 嘿嘿，喜欢，~其实都知道，但是不系统，谢谢王老师提纲挈领，吾辈获益良多！","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"王宝令","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515635,"discussion_content":"优秀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614599272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}