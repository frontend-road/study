{"id":389089,"title":"05ï½œè·¨è¶Šç°å®çš„éšœç¢ï¼ˆä¸­ï¼‰ï¼šå¯Œå«çŸ¥è¯†è¿˜æ˜¯ä»£ç åå‘³é“ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ˜Šã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠå¦‚ä½•æœ‰æ•ˆåœ°åˆ†ç¦»é¢†åŸŸæ¨¡å‹ä¸­çš„ä¸Šä¸‹æ–‡ã€‚</p><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬ä»‹ç»äº†å…³è”å¯¹è±¡ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡å…³è”å¯¹è±¡å»ºæ¨¡èšåˆ/å…³è”å…³ç³»ï¼Œä»è€Œåœ¨ä¸å½±å“æ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œæ›´å¥½åœ°ç»´æŒé¢†åŸŸæ¨¡å‹ä¸è½¯ä»¶å®ç°çš„ç»Ÿä¸€ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥çœ‹å¦ä¸€ä¸ªåœ¨å…³è”é¢†åŸŸæ¨¡å‹ä¸è½¯ä»¶å®ç°æ—¶ç»å¸¸é‡åˆ°çš„é—®é¢˜ï¼šä¸Šä¸‹æ–‡è¿‡è½½ï¼ˆContext Overloadingï¼‰ã€‚æ‰€è°“<strong>ä¸Šä¸‹æ–‡è¿‡è½½</strong>ï¼Œå°±æ˜¯æŒ‡<strong>é¢†åŸŸæ¨¡å‹ä¸­çš„æŸä¸ªå¯¹è±¡ä¼šåœ¨å¤šä¸ªä¸Šä¸‹æ–‡ä¸­å‘æŒ¥é‡è¦ä½œç”¨ï¼Œç”šè‡³æ˜¯èšåˆæ ¹</strong>ã€‚ä¸€æ¥è¿™ä¸ªå¯¹è±¡æœ¬èº«ä¼šå˜å¾—å¾ˆå¤æ‚ï¼Œé€ æˆæ¨¡å‹åƒµåŒ–ï¼›äºŒæ¥å¯èƒ½ä¼šå¸¦æ¥æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>äºæ˜¯ï¼Œå°†è¿‡è½½çš„ä¸Šä¸‹æ–‡è¿›è¡Œæœ‰æ•ˆçš„åˆ†ç¦»ï¼Œå°±æˆäº†æˆ‘ä»¬ç°åœ¨éœ€è¦é¢å¯¹çš„é—®é¢˜ã€‚æ–¹æ³•ä¸Šä¹Ÿæœ‰å¾ˆå¤šä¸åŒçš„é€‰æ‹©ï¼Œæˆ‘ä¸»è¦ä»‹ç»<strong>è§’è‰²å¯¹è±¡</strong>ï¼ˆRole Objectï¼‰å’Œ<strong>ä¸Šä¸‹æ–‡å¯¹è±¡</strong>ï¼ˆContext Objectï¼‰è¿™ä¸¤ç§ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ä¸æˆ‘ä»¬ä¸ŠèŠ‚è¯¾è®²çš„å…³è”å¯¹è±¡ä¸€è„‰ç›¸æ‰¿ï¼Œéƒ½æ˜¯é€šè¿‡å°†éšå«æ¦‚å¿µæ˜¾å¼å»ºæ¨¡æ¥è§£å†³é—®é¢˜ã€‚</p><p>åŒæ ·åœ°ï¼Œåœ¨çœ‹åˆ°å…·ä½“çš„è§£å†³æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥äº†è§£ä¸Šä¸‹æ–‡è¿‡è½½ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜ã€‚</p><h2>å› å¯Œå«é€»è¾‘è€Œäº§ç”Ÿçš„è¿‡å¤§ç±»</h2><p>ä¸ºäº†å¸®åŠ©ä½ ç†è§£ä¸Šä¸‹æ–‡è¿‡è½½ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜ï¼Œæˆ‘è¿˜æ˜¯å€ŸåŠ©æå®¢æ—¶é—´ä¸“æ çš„ä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ã€‚å½“ç„¶ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰©å±•è¿™ä¸ªé¢†åŸŸæ¨¡å‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4d/6e/4d4ee511209b887c1efeec251fce366e.jpg?wh=7538x4208\" alt=\"\"></p><p>åœ¨è¿™ä¸ªæ‰©å±•äº†çš„æ¨¡å‹ä¸­ï¼ŒåŒ…å«äº†ä¸‰ä¸ªä¸åŒçš„ä¸Šä¸‹æ–‡ã€‚</p><ol>\n<li>è®¢é˜…ï¼šç”¨æˆ·é˜…è¯»è®¢é˜…å†…å®¹çš„ä¸Šä¸‹æ–‡ï¼Œæ ¹æ®è®¢é˜…å…³ç³»åˆ¤æ–­æŸäº›å†…å®¹æ˜¯å¦å¯¹ç”¨æˆ·å¯è§ï¼›</li>\n<li>ç¤¾äº¤ï¼šç”¨æˆ·ç»´æŠ¤æœ‹å‹å…³ç³»çš„ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡æœ‹å‹å…³ç³»åˆ†äº«åŠ¨æ€ä¸ä¿¡æ¯ï¼›</li>\n<li>è®¢å•ï¼šç”¨æˆ·è´­ä¹°è®¢é˜…ä¸“æ çš„ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡è®¢å•ä¸æ”¯ä»˜ï¼Œå®Œæˆå¯¹ä¸“æ çš„è®¢é˜…ã€‚</li>\n</ol><!-- [[[read_end]]] --><p>æŒ‰ç…§è¿™ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¾—åˆ°ä¸ä¹‹å¯¹åº”çš„â€œå¯Œå«çŸ¥è¯†çš„æ¨¡å‹â€ï¼š</p><pre><code>public class User {\n    private long id;\n    \n    // ç¤¾äº¤ä¸Šä¸‹æ–‡\n    private List&lt;Friendship&gt; friends;\n    private List&lt;Moments&gt; moments;\n    \n    // è®¢é˜…ä¸Šä¸‹æ–‡\n    private List&lt;Subscription&gt; subscriptions;\n    \n    // è®¢å•ä¸Šä¸‹æ–‡\n    private List&lt;Order&gt; orders;\n    private List&lt;Payment&gt; payments;\n    \n    // ç¤¾äº¤ä¸Šä¸‹æ–‡\n    public void make(Friendship friend) {\n      ...\n    }\n    \n    public void break(Friendship friend) {\n      ...\n    }\n    \n    // è®¢å•ä¸Šä¸‹æ–‡\n    public void placeOrder(Column column) {\n      ...\n    }    \n    \n    // è®¢é˜…ä¸Šä¸‹æ–‡\n    public boolean canView(Content content) {\n      ...\n    }        \n}\n</code></pre><p>å¦‚æœå¯¹ä»£ç åå‘³é“æ•æ„Ÿçš„åŒå­¦ï¼Œä¼°è®¡å·²ç»å‘ç°é—®é¢˜æ‰€åœ¨äº†ï¼š<strong>ä¸€ä¸ªå¯¹è±¡ä¸­åŒ…å«äº†ä¸åŒçš„ä¸Šä¸‹æ–‡</strong>ï¼Œè€Œè¿™æ°å¥½æ˜¯<strong>åå‘³é“è¿‡å¤§ç±»</strong>ï¼ˆLarge Classï¼‰çš„å®šä¹‰ã€‚</p><p>é‚£ä¹ˆè¿‡å¤§ç±»ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿé¦–å½“å…¶å†²æ˜¯<strong>æ¨¡å‹åƒµç¡¬</strong>ã€‚æƒ³è¦ç†è§£è¿™ä¸ªç±»çš„è¡Œä¸ºï¼Œå°±å¿…é¡»ç†è§£æ‰€æœ‰çš„ä¸Šä¸‹æ–‡ã€‚è€Œåªæœ‰ç†è§£äº†æ‰€æœ‰çš„ä¸Šä¸‹æ–‡ï¼Œæ‰èƒ½åˆ¤æ–­å…¶ä¸­çš„ä»£ç å’Œè¡Œä¸ºæ˜¯å¦åˆç†ã€‚</p><p>äºæ˜¯ï¼Œ<strong>ä¸Šä¸‹æ–‡çš„è¿‡è½½å°±å˜æˆäº†è®¤çŸ¥çš„è¿‡è½½</strong>ï¼ˆCognitive Overloadingï¼‰ï¼Œ<strong>è€Œè®¤çŸ¥è¿‡è½½å°±ä¼šé€ æˆç»´æŠ¤çš„å›°éš¾</strong>ã€‚é€šä¿—åœ°è®²ï¼Œå°±æ˜¯<strong>â€œçœ‹ä¸æ‡‚ã€æ”¹ä¸åŠ¨â€</strong>ï¼Œä»£ç å°±å˜æˆâ€œç¥–ä¼ ä»£ç â€äº†ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬ä¸è¦å¿˜äº†ï¼Œè¿™æ˜¯ä¸æ¨¡å‹å…³è”çš„ä»£ç å•Šï¼<strong>æ”¹ä¸åŠ¨çš„ä»£ç å°±æ˜¯æ”¹ä¸åŠ¨çš„æ¨¡å‹</strong>ï¼æ”¹ä¸åŠ¨çš„åƒµç¡¬çš„æ¨¡å‹ï¼Œè¦æ€ä¹ˆå‚ä¸æç‚¼çŸ¥è¯†çš„å¾ªç¯å‘¢ï¼Ÿ</p><p>å½“ç„¶ï¼Œè¿‡å¤§ç±»è¿˜å®¹æ˜“æ»‹ç”Ÿé‡å¤ä»£ç ã€å¼•å…¥å¶ç„¶è€¦åˆé€ æˆæ„å¤–çš„ç¼ºé™·ç­‰ç¼–ç ä¸Šçš„é—®é¢˜ã€‚ä¸è¿‡è¿™äº›é—®é¢˜ä¸æ¨¡å‹åƒµç¡¬æ¯”èµ·æ¥ï¼Œä¼¼ä¹æœ‰ç‚¹ä¸å€¼ä¸€æã€‚</p><p>å¦ä¸€ä¸ªé—®é¢˜æ²¡é‚£ä¹ˆä¸¥é‡ï¼Œä½†åŒæ ·å€¼å¾—é‡è§†ï¼Œè¿™ä¸ªé—®é¢˜ä»ç„¶ä¸æ€§èƒ½æœ‰å…³ã€‚åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®¿é—®çš„æ•°æ®ä¹Ÿä¸å°½ç›¸åŒã€‚</p><p>æ¯”å¦‚åœ¨ç»´æŠ¤æœ‹å‹å…³ç³»ã€å‘å¸ƒåŠ¨æ€ä¿¡æ¯æ—¶ï¼Œæˆ‘ä»¬ä¸å¤ªå¯èƒ½è®¿é—®è®¢é˜…ä¸è®¢å•ä¿¡æ¯ã€‚ç±»ä¼¼çš„ï¼Œå½“æˆ‘ä»¬è®¿é—®è®¢å•ä¿¡æ¯çš„æ—¶å€™ï¼Œä¹Ÿä¸å¤ªå¯èƒ½å…³æ³¨æœ‹å‹ä¿¡æ¯ã€‚é‚£ä¹ˆï¼Œå½“æ‰€æœ‰çš„ä¸Šä¸‹æ–‡éƒ½æ±‡èšäºUseræ—¶ï¼Œæˆ‘ä»¬æ€ä¹ˆæ‰èƒ½è·å¾—ä¸€ä¸ªé«˜æ•ˆçš„èšåˆåŠ è½½ç­–ç•¥å‘¢ï¼ˆå½“ç„¶é€šè¿‡å…³è”å¯¹è±¡æˆ‘ä»¬èƒ½ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œå…·ä½“è¯·çœ‹ä¸Šä¸€è¯¾ï¼‰ï¼Ÿ</p><p><strong>è¿™é‡Œçš„åŠè¯¡ä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åšä»€ä¹ˆåäº‹ï¼Œåè€Œæ˜¯å› ä¸ºä¸¥æ ¼éµç…§â€œå¯Œå«çŸ¥è¯†çš„æ¨¡å‹â€çš„åŸåˆ™ï¼Œæ‰å¯¼è‡´äº†ä¸Šä¸‹æ–‡è¿‡è½½</strong>ã€‚</p><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚Useråœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­éƒ½å¤„åœ¨èšåˆæ ¹çš„ä½ç½®ï¼š</p><ul>\n<li>åœ¨è®¢é˜…ä¸Šä¸‹æ–‡ä¸­ï¼ŒUseræ˜¯Subscriptionçš„èšåˆæ ¹ï¼›</li>\n<li>åœ¨è®¢å•ä¸Šä¸‹æ–‡ä¸­ï¼ŒUseræ˜¯Paymentå’ŒOrderçš„èšåˆæ ¹ï¼›</li>\n<li>åœ¨ç¤¾äº¤ä¸Šä¸‹æ–‡ä¸­ï¼ŒUseræ˜¯Friendshipå’ŒMomentsçš„èšåˆæ ¹ã€‚</li>\n</ul><p>æ ¹æ®æ„å»ºâ€œå¯Œå«çŸ¥è¯†æ¨¡å‹â€çš„åšæ³•ï¼Œè¢«èšåˆå¯¹è±¡çš„é›†åˆé€»è¾‘æ”¾ç½®äºèšåˆ/èšåˆæ ¹é‡Œï¼Œè€Œä¸æ˜¯æ•£è½åœ¨å¤–ï¼Œæˆ–æ˜¯æ”¾åœ¨å…¶ä»–æ— å…³çš„æœåŠ¡ä¸­ã€‚è¿™ä¹ˆåšå¯ä»¥ä½¿å¾—é€»è¾‘å¯Œé›†äºæ¨¡å‹ä¸­ï¼ŒåŒæ—¶æœ‰åˆ©äºé€šè¿‡èšåˆå…³ç³»ç®¡ç†ä¸€ç»„å¯¹è±¡ä¸é¢†åŸŸæ¦‚å¿µçš„æ˜ å°„ï¼Œä¿æŒé¢†åŸŸæ¦‚å¿µä¸é€»è¾‘çš„å®Œæ•´æ€§ã€‚</p><p>é‚£ä¹ˆï¼Œæ¯å½“Useråœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å¤„äºèšåˆ/èšåˆæ ¹ä½ç½®çš„æ—¶å€™ï¼Œä¸ä¹‹ç›¸å…³çš„é€»è¾‘éƒ½ä¼šè¿›å…¥Userä¸­ï¼ŒUserä¼šä¸å¯é¿å…åœ°è†¨èƒ€ã€‚è¿™å°±æ˜¯ä¸Šä¸‹æ–‡è¿‡è½½ã€‚</p><p>åˆè¦å†è¯´ä¸€å¥é¢˜å¤–è¯äº†ã€‚åœ¨ä½¿ç”¨åŸå‘³é¢å‘å¯¹è±¡èŒƒå‹ï¼ˆVanilla Object Orientedï¼‰çš„æ—¶å€™ï¼Œä¸è‡ªè§‰åœ°å°±ä¼šäº§ç”Ÿè¿‡å¤§ç±»ï¼Œè¿™å…¶å®ä¹Ÿè·ŸSmalltalkæœ‰å…³ã€‚æ­£å¦‚æˆ‘ä»¬ä¸ŠèŠ‚è¯¾æ‰€è®²ï¼ŒSmalltalkæ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡ç³»ç»Ÿï¼Œå…¶ä¸­è¿˜åŒ…å«ä¸€ä¸ªIDEï¼š<strong>System Browser</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/34/2a/34bc46c542d65c63bb3619bed5c92f2a.gif?wh=458x360\" alt=\"\"></p><p>åœ¨Smalltalkä¸­ï¼Œæºä»£ç å¹¶ä¸ä»¥æ–‡æœ¬æ ¼å¼ä½œä¸ºä¸»è¦è¡¨è¾¾å½¢å¼ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå›¾å½¢åŒ–çš„ç•Œé¢ï¼Œè®©æˆ‘ä»¬æœ‰æŒ‡å¯¼æ€§åœ°ã€ç‰‡æ®µå¼åœ°æµè§ˆå¯¹åº”çš„ä»£ç ã€‚ä¸Šå›¾ä¸­å·¦èµ·ç¬¬ä¸‰ä¸ªçª—å£å°±æ˜¯è‡ªå®šä¹‰çš„ä¸Šä¸‹æ–‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿å¯¹è±¡ä¸­å­˜åœ¨å†å¤šçš„ä¸Šä¸‹æ–‡ï¼Œä¹Ÿä¸ä¼šå½±å“æˆ‘ä»¬å¯¹ä»£ç çš„ç†è§£å’Œä¿®æ”¹ã€‚æ¯•ç«Ÿä¸Šä¸‹æ–‡å†å¤šï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šä¸€æ¬¡çœ‹åˆ°å¤šä¸ªæ–¹æ³•çš„å…·ä½“å®ç°ä»£ç ã€‚</p><p>å¦‚æœä½ ç”¨è¿‡Eclipse IDEå¼€å‘Javaé¡¹ç›®çš„è¯ï¼Œé‚£ä¹ˆè¿™é‡Œè‚¯å®šæœ‰ä¸€ä¸ªä¸é‚£ä¹ˆæœ‰ç”¨çš„å¤æ€ªçš„è§†å›¾ï¼Œè®©ä½ ç™¾æ€ä¸å¾—å…¶è§£ã€‚ä½†å¦‚æœä½ å¯¹è¿™å¼ å›¾å’Œä¸Šé¢Smalltalk System Browseræœ‰ç‚¹äº†è§£çš„è¯ï¼Œå°±èƒ½ä»å¸ƒå±€ä¸­çœ‹å‡ºä¸€äº›ç«¯å€ªã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ce/0d/ced5ec1c086e81f9310a31635f63c40d.jpg?wh=474x332\" alt=\"\"><br>\nè¿™å…¶å®æ˜¯Eclipseå¯¹Smalltalkçš„è‡´æ•¬ã€‚æ¯•ç«Ÿï¼ŒEclipseä¹Ÿç®—æ˜¯ä¼ å¥‡Smalltalkç¨‹åºå‘˜Kent Beckçš„ä½œå“ã€‚ä½†å½“æˆ‘ä»¬ä»¥æ–‡æœ¬ä½œä¸ºæºä»£ç çš„ä¸»è¦å½¢å¼ï¼Œä»¥ç±»ä½œä¸ºæºä»£ç çš„ä¸»è¦ç»„ç»‡æ–¹å¼æ—¶ï¼Œä»…ä»…é€šè¿‡è§†å›¾çš„åˆ‡æ¢æ˜¯æ— æ³•è¾¾æˆSmalltalkçš„æ•ˆæœçš„ã€‚äºæ˜¯ï¼Œè¿‡å¤§ç±»çš„ä¸Šä¸‹æ–‡è¿‡è½½å°±æˆäº†ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ã€‚</p><h2>é€»è¾‘æ±‡èšäºä¸Šä¸‹æ–‡è¿˜æ˜¯å®ä½“ï¼Ÿ</h2><p>ä¸Šä¸‹æ–‡è¿‡è½½é—®é¢˜æœ€æ ¹æœ¬çš„ç—‡ç»“åœ¨äºï¼Œ<strong>é€»è¾‘æ˜¯éœ€è¦æ±‡èšäºå®ä½“</strong>ï¼ˆUserï¼‰<strong>è¿˜æ˜¯ä¸Šä¸‹æ–‡</strong>ï¼ˆè®¢é˜…ã€ç¤¾äº¤ä¸è®¢å•ï¼‰ã€‚</p><p>åŸå‘³é¢å‘å¯¹è±¡èŒƒå‹ï¼ˆä¹Ÿæ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡çš„é»˜è®¤é£æ ¼ï¼‰çš„ç­”æ¡ˆæ˜¯æ±‡èšäºå®ä½“ï¼Œä½†æ˜¯ç¼ºå°‘æœ‰æ•ˆåˆ†ç¦»ä¸åŒä¸Šä¸‹æ–‡çš„æ–¹å¼ã€‚è€ŒDCIèŒƒå‹ï¼ˆData-Context-Interactionï¼Œæ•°æ®-ä¸Šä¸‹æ–‡-äº¤äº’ï¼‰è¦æ±‚æ±‡èšäºæ˜¾å¼å»ºæ¨¡çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆContext Objectï¼‰ï¼Œæˆ–è€…ä¸Šä¸‹æ–‡ä¸­çš„è§’è‰²å¯¹è±¡ï¼ˆRole Objectï¼‰ä¸Šã€‚å¦‚æœæŒ‰ç…§DCIèŒƒå‹çš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹å›¾è¿™æ ·å»ºç«‹æ¨¡å‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ca/f4/ca9054cb5f3d04bd3ab755f75bf74ef4.jpg?wh=8000x4500\" alt=\"\"></p><p>è¿™å…¶å®ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ã€‚<strong>åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œç”¨æˆ·æ˜¯ä»¥ä¸åŒçš„è§’è‰²ä¸å…¶ä»–å¯¹è±¡å‘ç”Ÿäº¤äº’çš„ï¼Œè€Œä¸€æ—¦ç¦»å¼€äº†å¯¹åº”çš„ä¸Šä¸‹æ–‡ï¼Œç›¸å…³çš„äº¤äº’ä¹Ÿå°±ä¸ä¼šå‘ç”Ÿäº†</strong>ã€‚</p><p>è¿™ä¸æˆ‘ä»¬ç”Ÿæ´»ä¸­çš„ä½“éªŒæ˜¯ä¸€è‡´çš„ã€‚ä¸Šç­æ—¶ï¼Œä»¥å‘˜å·¥çš„èº«ä»½å‘ç”Ÿçš„å·¥ä½œæ´»åŠ¨ä¸äº¤äº’ï¼Œä¸‹ç­ä¹‹åå…¶å®å¯ä»¥ä¸ç”¨å‘ç”Ÿäº†ã€‚å› ä¸ºå·²ç»è„±ç¦»äº†å·¥ä½œè¿™ä¸ªä¸Šä¸‹æ–‡ï¼Œä¸å†æ‰®æ¼”è¿™ä¸ªè§’è‰²äº†ã€‚åŒæ ·çš„ï¼Œåœ¨ç”Ÿæ´»ä¸­çš„ä»¥å…¶ä»–èº«ä»½å‘ç”Ÿçš„æ´»åŠ¨ä¸äº¤äº’ï¼Œåœ¨å·¥ä½œä¸­ä¹Ÿä¸è¯¥å‘ç”Ÿã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è®¢é˜…ä¸Šä¸‹æ–‡ä¸­çš„è¯»è€…ï¼ˆReaderï¼‰ï¼Œä¸ä¼šä»¥è¯»è€…çš„èº«ä»½ä¸è®¢å•ä¸Šä¸‹æ–‡ä¸­çš„æ”¯ä»˜ä¿¡æ¯å‘ç”Ÿäº¤äº’ã€‚è€Œä¹°å®¶ï¼ˆBuyerï¼‰ï¼Œä¹Ÿä¸ä¼šä»¥ä¹°å®¶çš„èº«ä»½å»ç¤¾äº¤ä¸Šä¸‹æ–‡ä¸­å»å»ºç«‹æœ‹å‹å…³ç³»ã€‚</p><p>ä»DCIçš„è§’åº¦çœ‹å¾…èšåˆä¸èšåˆæ ¹å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¹¶ä¸æ˜¯Userèšåˆäº†Subscriptionï¼Œè€Œæ˜¯è®¢é˜…ä¸Šä¸‹æ–‡ä¸­çš„Readerèšåˆäº†å®ƒã€‚åŒæ—¶ï¼Œå¹¶ä¸æ˜¯Userèšåˆäº†Friendshipä¸Momentsï¼Œè€Œæ˜¯ç¤¾äº¤ä¸Šä¸‹æ–‡ä¸­çš„Contactèšåˆäº†å®ƒä»¬ã€‚å¯ä»¥è¯´ï¼Œ<strong>Useråªæ˜¯æ°å¥½åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æ‰®æ¼”äº†è¿™äº›è§’è‰²è€Œå·²</strong>ã€‚</p><p>ç†æ¸…äº†è¿™ä¸€å±‚å…³ç³»ï¼Œæˆ‘ä»¬ä¹Ÿå°±å‘ç°äº†ä¸Šä¸‹æ–‡è¿‡è½½çš„æ ¹æºï¼š<strong>å®ä½“åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æ‰®æ¼”çš„å¤šä¸ªè§’è‰²ï¼Œå†å€Ÿç”±èšåˆå…³ç³»ï¼Œå°†ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„é€»è¾‘å¯Œé›†äºå®ä½“ä¹‹ä¸­ï¼Œå°±é€ æˆäº†ä¸Šä¸‹æ–‡è¿‡è½½ã€‚</strong></p><p>æ˜ç™½è¿™ä¸€ç‚¹ï¼Œè§£å†³æ–¹æ¡ˆä¹Ÿå°±å‘¼ä¹‹æ¬²å‡ºäº†ï¼šé’ˆå¯¹ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„è§’è‰²å»ºæ¨¡ï¼Œå°†å¯¹åº”çš„é€»è¾‘å¯Œé›†åˆ°è§’è‰²å¯¹è±¡ä¸­ï¼Œå†è®©å®ä½“å¯¹è±¡å»æ‰®æ¼”ä¸åŒçš„è§’è‰²ï¼Œå°±èƒ½è§£å†³ä¸Šä¸‹æ–‡è¿‡è½½çš„é—®é¢˜äº†ã€‚</p><p>å½“ç„¶ï¼Œç†æƒ³æ°¸è¿œæ˜¯æ¸…æ™°ä¸”ç¾å¥½çš„ï¼Œåœ¨å®è·µä¸­å´æ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œä¸»è¦æ˜¯<strong>å¦‚ä½•åœ¨ä»£ç ä¸­å®ç°è¿™ç§å®ä½“ä¸è§’è‰²é—´çš„æ‰®æ¼”å…³ç³»</strong>ã€‚</p><h2>é€šè¿‡è§’è‰²å¯¹è±¡åˆ†ç¦»ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„é€»è¾‘</h2><p>ä¸€ä¸ªæœ€ç®€å•çš„æƒ³æ³•æ˜¯ï¼Œå°†è§’è‰²æŠ½è±¡æˆæ¥å£ï¼š</p><pre><code>//é˜…è¯»ä¸Šä¸‹æ–‡\ninterface Reader {\n    List&lt;Subscription&gt; getSubscriptions();\n    \n    boolean canView(Content content);\n}\n\n\n//è®¢å•ä¸Šä¸‹æ–‡\ninterface Buyer {\n    List&lt;Order&gt; getOrders();\n  \n    List&lt;Payment&gt; getPayments();\n  \n    void placeOrder(Column column);\n}\n\n\n//ç¤¾äº¤ä¸Šä¸‹æ–‡\ninterface Contact {\n    List&lt;Friendship&gt; friends;\n  \n    List&lt;Moments&gt; moments;\n  \n    void make(Friendship friend);\n  \n    void break(Friendship friend);\n</code></pre><p>ç„¶è€Œï¼Œè¿™å®é™…ä¸Šå¹¶æ²¡æœ‰è§£å†³ä»€ä¹ˆé—®é¢˜ï¼š</p><pre><code>public class User implements Reader, Buyer, Contact {    \n    // ç¤¾äº¤ä¸Šä¸‹æ–‡\n    public void make(Friendship friend) {\n      ...\n    }\n    \n    public void break(Friendship friend) {\n      ...\n    }\n    \n    // è®¢å•ä¸Šä¸‹æ–‡\n    public void placeOrder(Column column) {\n      ...\n    }    \n    \n    // è®¢é˜…ä¸Šä¸‹æ–‡\n    public boolean canView(Content content) {\n      ...\n    }        \n}\n</code></pre><p>é€šè¿‡å®ç°æ¥å£å»å®Œæˆè§’è‰²æ‰®æ¼”ï¼Œå¾—åˆ°çš„ä»£ç å…¶å®æ²¡ä»€ä¹ˆå·®åˆ«ã€‚è™½ç„¶å€ŸåŠ©å½“ä»£IDEï¼Œæˆ‘ä»¬å¯ä»¥è¾ƒå®¹æ˜“åœ°åˆ¤æ–­è¡Œä¸ºæ¥è‡ªå“ªä¸ªä¸Šä¸‹æ–‡ï¼Œä½†å®é™…å¾—åˆ°çš„æ”¹å–„æå…¶æœ‰é™ã€‚æ—¢ç„¶æ¥å£ä¸å¥½ç”¨çš„è¯ï¼Œå¦ä¸€ä¸ªæ€è·¯å°±æ˜¯é€šè¿‡<strong>è£…é¥°å™¨</strong>ï¼ˆDecoratorï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ç³»åˆ—è§’è‰²å¯¹è±¡ï¼ˆRole Objectï¼‰ä½œä¸ºUserçš„è£…é¥°å™¨ï¼š</p><pre><code>public class Reader {\n    private User user;\n    private List&lt;Subscription&gt; subscriptions;\n    \n    public Reader(User user) {\n        ...\n    }\n    \n    // è®¢é˜…ä¸Šä¸‹æ–‡\n    public boolean canView(Content content) {\n      ...\n    }        \n}\n\n\npublic class Buyer {\n    private User user;\n    \n    private List&lt;Order&gt; orders;\n    private List&lt;Payment&gt; payments;\n    \n    public Buyer(User user) {\n        ...\n    }\n    \n    // è®¢å•ä¸Šä¸‹æ–‡\n    public void placeOrder(Column column) {\n      ...\n    }    \n}\n\n\npublic class Contact {\n    private User user;\n    \n    private List&lt;Friendship&gt; friends;\n    private List&lt;Moments&gt; moments;\n    \n    public Contact(User user) {\n        ...\n    }\n    \n    // ç¤¾äº¤ä¸Šä¸‹æ–‡\n    public void make(Friendship friend) {\n      ...\n    }\n    \n    public void break(Friendship friend) {\n      ...\n    }\n</code></pre><p>æˆ‘ä»¬å¾ˆå®¹æ˜“åœ°å°†ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„è¡Œä¸ºä¸é€»è¾‘å¯Œé›†åˆ°å¯¹åº”çš„è§’è‰²å¯¹è±¡ä¸­ï¼Œå¹¶ä¸”ä¸é¢†åŸŸæ¨¡å‹ä¸­çš„æ¦‚å¿µå®Œå…¨å¯¹åº”èµ·æ¥ã€‚ç„¶è€Œè¿™é‡Œè¿˜æœ‰æœ€åä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯<strong>å¦‚ä½•æ„é€ è¿™äº›è£…é¥°å™¨å¯¹è±¡ã€‚</strong></p><p>ä»ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†è¡Œä¸ºä¹‹å¤–ï¼Œæˆ‘ä»¬å°†å¯¹åº”çš„èšåˆä¸å…³è”å…³ç³»ä¹Ÿéƒ½å¯Œé›†äºè§’è‰²å¯¹è±¡é‡Œäº†ï¼Œè€Œè¿™äº›è¢«èšåˆçš„å¯¹è±¡æå¤§å¯èƒ½æ˜¯è¢«æŒä¹…åŒ–åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚æ‰€ä»¥ï¼Œç®€å•çš„è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå¹¶ä¸èƒ½ä¿è¯æˆ‘ä»¬èƒ½ä»æ•°æ®åº“ä¸­æœ‰æ•ˆåœ°è¯»å–è¿™äº›æ•°æ®ï¼š</p><pre><code>User user = repository.findById(....);\n\n\nBuyer buyer = new Buyer(user); // å†…å­˜ä¸­æ„é€ è§’è‰²å¯¹è±¡\nReader reader = new Reader(user); // å¹¶ä¸ä¼šä»æ•°æ®åº“ä¸­è¯»å–\nContact contact = new Contact(user); // å…¶ä¸Šçš„å…³è”å…³ç³»\n</code></pre><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å°†æ„é€ è§’è‰²å¯¹è±¡çš„é€»è¾‘æ”¾ç½®åœ¨èƒ½å¤Ÿè§¦å‘æŠ€æœ¯è°ƒç”¨çš„åœ°æ–¹ã€‚é‚£ä¹ˆæœ€è‡ªç„¶çš„ä¸€ä¸ªé€‰æ‹©ï¼Œå°±æ˜¯Repositoryå¯¹è±¡äº†ã€‚</p><pre><code>public interface UserRepository {\n    User findById(long id); \n    \n    Buyer asBuyer(User user); \n    \n    Reader asReader(User user);\n    \n    Contact asContact(User user);\n}\n\n\npublic class UserRepositoryDB implements UserRepository {\n    public User findById(long id) {\n        return db.executeQuery(...)\n    }\n    \n    public Buyer asBuyer(User user) {\n        return new Buyer(user, db.executeQuery(...));\n    }\n    \n    public Reader asReader(User user) {\n        return new Reader(user, db.executeQuery(...));\n    }\n    \n    public Contact asContact(User user) {\n        return new Contact(user, db.executeQuery(...));\n    }\n}\n</code></pre><p>äºæ˜¯ï¼Œæˆ‘ä»¬è·å–è§’è‰²å¯¹è±¡çš„æ–¹æ³•ä¹Ÿå°±å¯ä»¥å˜æˆï¼š</p><pre><code>User user = repository.findById(....);\n\n\nBuyer buyer = repository.asBuyer(user);\nReader reader = repository.asReader(user);\nContact Contact = repository.asContact(user);\n</code></pre><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œé€šè¿‡è§’è‰²å¯¹è±¡æˆ‘ä»¬å¾—åˆ°äº†è¿˜ä¸é”™çš„ç»“æœâ€”â€”å‡ ä¹å°±æ˜¯å®Œç¾çš„æ–¹æ¡ˆäº†ã€‚è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜åŠ¿æœ‰ä»¥ä¸‹å‡ ç‚¹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬<strong>æŠŠä¸åŒä¸Šä¸‹æ–‡ä¸­çš„é€»è¾‘åˆ†åˆ«å¯Œé›†äºä¸åŒçš„è§’è‰²å¯¹è±¡ä¸­</strong>ã€‚</p><p>å½“æˆ‘ä»¬éœ€è¦æ”¹åŠ¨ä»£ç æ—¶ï¼Œåªéœ€è¦æ‰¾åˆ°å¯¹åº”ä¸Šä¸‹æ–‡ä¸­çš„è§’è‰²å¯¹è±¡ï¼Œåœ¨è§’è‰²å¯¹è±¡ä¸­è¿›è¡Œä¿®æ”¹å³å¯ã€‚è¿™ä¸€æ–¹é¢è§£å†³äº†è®¤çŸ¥è¿‡è½½çš„é—®é¢˜ï¼Œé¿å…äº†æ¨¡å‹åƒµåŒ–ã€‚å¦ä¸€æ–¹é¢ï¼Œå› ä¸ºè§’è‰²å¯¹è±¡çš„å°è£…ï¼Œä»£ç çš„æ”¹å˜å¹¶ä¸ä¼šè¿›è¡Œä¼ æ’­ã€‚</p><p>æ¯”å¦‚å¦‚æœæˆ‘ä»¬éœ€è¦ä¿®æ”¹è®¢é˜…ä¸Šä¸‹æ–‡ä¸­çš„é€»è¾‘ï¼Œåªéœ€æ‰¾åˆ°ä¸è®¢é˜…ä¸Šä¸‹æ–‡ç›¸å…³çš„è§’è‰²å¯¹è±¡Readerå°±è¡Œäº†ã€‚å› ä¸ºæˆ‘ä»¬åªæ”¹åŠ¨äº†Readerï¼Œè€ŒUserã€Buyerã€Contactéƒ½æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œæ‰€ä»¥è¿™ä¸ªä¿®æ”¹æ²¡æœ‰ä¼ æ’­åˆ°å…¶ä»–çš„ä¸Šä¸‹æ–‡ä¸­ã€‚</p><p>ä¸ä¹‹å¯¹æ¯”çš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰è§’è‰²å¯¹è±¡ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨Userä¸­ä¿®æ”¹ï¼Œé‚£ä¹ˆä¿®æ”¹å°±ä¼šè¢«ä¼ æ’­åˆ°æ‰€æœ‰çš„ä¸Šä¸‹æ–‡ä¸­ã€‚</p><p>å…¶æ¬¡ï¼Œ<strong>ä»å®ä½“å¯¹è±¡è½¬åŒ–åˆ°è§’è‰²å¯¹è±¡ç»ç”±äº†æ˜¾å¼çš„æ–¹æ³•è°ƒç”¨</strong>ï¼ˆasBuyerã€asReaderã€asContactï¼‰<strong>ï¼Œè¿™å®é™…ä¸Šè¡¨ç¤ºäº†ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬è°ƒç”¨asBuyeræ—¶ï¼Œæˆ‘ä»¬çš„ä¸Šä¸‹æ–‡å°±ä»æ— é™å®šä¸Šä¸‹æ–‡ï¼Œåˆ‡æ¢åˆ°äº†è®¢å•ä¸Šä¸‹æ–‡ã€‚é‚£ä¹ˆåœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬å¯¹å½±å“æ€§èƒ½çš„é›†åˆåŠ è½½å°±æœ‰äº†æ›´æ˜ç¡®çš„ç­”æ¡ˆï¼ˆæ¯”å¦‚è®¢å•å†å²é¢„åŠ è½½ã€æ”¯ä»˜å†å²å»¶è¿ŸåŠ è½½ç­‰ç­‰ï¼‰ï¼Œè¿›ä¸€æ­¥é¿å…å› ä¸ºæ€§èƒ½é—®é¢˜ï¼Œç ´åæ¨¡å‹ä¸è½¯ä»¶å®ç°çš„ä¸€è‡´æ€§ã€‚</p><p>ä¸è¿‡ä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œæˆ‘åˆšæ‰è¯´è¿™â€œå‡ ä¹æ˜¯å®Œç¾çš„æ–¹æ¡ˆâ€ã€‚é‚£æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜å¯ä»¥<strong>åœ¨æ­ç¤ºæ„å›¾ä¸æŠ€æœ¯è§£è€¦ä¸Šåšå¾—æ›´å¥½</strong>ã€‚</p><h2>é€šè¿‡ä¸Šä¸‹æ–‡å¯¹è±¡åˆ†ç¦»ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„é€»è¾‘</h2><p>å¦‚åŒæˆ‘ä»¬ä¹‹å‰åœ¨å…³è”å¯¹è±¡ä¸­è®²åˆ°çš„ï¼Œè·å–å…³è”é›†åˆçš„æ–¹å¼å¯èƒ½æ˜¯å¼‚æ„çš„ï¼Œä¹Ÿå°±æ˜¯ä¸æ­¢ä»æ•°æ®åº“ä¸­è¯»å–è¿™ä¸€ç§æ–¹æ³•ã€‚å¦‚æœç¤¾äº¤ä¸Šä¸‹æ–‡ä¸­çš„æœ‹å‹å…³ç³»ï¼Œæ˜¯é€šè¿‡æœåŠ¡æ¥å£è°ƒç”¨ï¼Œä»å…¶ä»–ç¤¾äº¤å¹³å°è·å–çš„å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°†asContactæ–¹æ³•ç½®äºUserRepositoryDBä¹‹å†…ï¼Œå°±æ˜¾å¾—ä¸é‚£ä¹ˆåˆé€‚äº†ã€‚</p><p>æˆ‘ä»¬æ¥æ¢ä¸ªæ€è·¯ã€‚æˆ‘ä»¬å¯ä»¥éµå¾ªå…³è”å¯¹è±¡çš„æ€è·¯ï¼Œå°†ä¸Šä¸‹æ–‡ç›´æ¥å»ºæ¨¡å‡ºæ¥ï¼Œå¹¶é€šè¿‡æ¥å£éš”ç¦»å…·ä½“å®ç°ï¼š</p><pre><code>interface SubscriptionContext {\n    interface Reader {\n        boolean canView(Content content);    \n    }\n    \n    Reader asReader(User user);\n}\n\n\ninterface SocialContext {\n    interface Contact {\n        void make(Friendship friend);\n        void break(Friendship friend);\n    }\n    \n    Contact asContact(User user);\n}\n\n\ninterface OrderContext {\n    interface Buyer {\n        void placeOrder(Column column);        \n    }\n    \n    Buyer asBuyer(User user);\n</code></pre><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ä¸Šä¸‹æ–‡å¯¹è±¡çš„è·å–æ”¾ç½®åœ¨UserRepositoryä¸Šï¼Œå¯¹å®ƒè¿›è¡Œæ”¹å†™ï¼š</p><pre><code>interface UserRepository {\n    User findUserById(long id);\n    \n    SubscriptionContext inSubscriptionContext();\n    SocialContext inSocialContext();\n    OrderContext inOrderContext();\n}\n\n\npublic class UserRepositoryDB {\n    //é€šè¿‡ä¾èµ–æ³¨å…¥è·å–ä¸åŒçš„ä¸Šä¸‹æ–‡å¯¹è±¡\n    @Inject private SubscriptionContext subscriptionContext;     \n    \n    @Inject private SocialContext socialContext;\n    \n    @Inject private OrderContext orderContext;\n    \n    ...\n}\n\næœ€åçš„ä½¿ç”¨æ–¹å¼å°±æˆäº†ï¼š\n\nUserRepository users = ....;\n\n\nUser user = users.findUserById(...);\n\n\nBuyer buyer = users.inOrderContext().asBuyer(user);\nReader reader = users.inSubscriptionContext().asReader(user);\nContact contact = users.inSocialContext().asContact(user);\n</code></pre><p>ç°åœ¨è¿™å°±æ˜¯å®Œç¾çš„æ–¹æ¡ˆã€‚é€šè¿‡å¢åŠ ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæˆ‘ä»¬è·å¾—äº†è¯¸å¤šå¥½å¤„ã€‚</p><p>ç¬¬ä¸€ï¼Œ<strong>å€Ÿç”±ä¸Šä¸‹æ–‡å¯¹è±¡çš„å°è£…ï¼Œä¸åŒä¸Šä¸‹æ–‡ä¸­çš„æŠ€æœ¯å¯ä»¥æ˜¯å®Œå…¨å¼‚æ„çš„</strong>ã€‚ä¹Ÿå°±æ˜¯åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ–¹æ¡ˆã€‚è€Œè¿™äº›æŠ€æœ¯çš„ç»†èŠ‚ï¼Œä¸ä¼šæš´éœ²ç»™å¤–åœ¨çš„ä½¿ç”¨è€…ã€‚</p><p>æ¯”å¦‚è®¢é˜…ä¸Šä¸‹æ–‡å¯ä»¥æ˜¯æ•°æ®åº“çš„ï¼Œç¤¾äº¤ä¸Šä¸‹æ–‡æ˜¯é€šè¿‡ä¸‰æ–¹APIä¸å¤–ç•ŒæœåŠ¡æ•´åˆçš„ï¼Œè®¢å•ä¸Šä¸‹æ–‡åˆ™æ˜¯é€šè¿‡æ¶ˆæ¯ç³»ç»Ÿï¼ˆMessaging Systemï¼‰ä¸ä¼ä¸šå†…è¿›é”€å­˜ç³»ç»Ÿæ•´åˆçš„ã€‚</p><p>ç¬¬äºŒï¼Œ<strong>è½¯ä»¶å®ç°ã€æ¨¡å‹ä¸ç»Ÿä¸€è¯­è¨€æ›´åŠ ç´§å¯†åœ°å…³è”åœ¨äº†ä¸€èµ·</strong>ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ç•Œé™ä¸Šä¸‹æ–‡çš„åå­—æ˜¯ç»Ÿä¸€è¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚åœ¨æ¨¡å‹ä¸­è™½ç„¶ä¸ä»¥å®ä½“çš„å½¢å¼å‡ºç°ï¼Œä½†æ€»å½’è¿˜æ˜¯æœ‰å®ƒçš„æ ‡è¯†ï¼ˆè™šçº¿çš„ä¸Šä¸‹æ–‡è¾¹ç•Œï¼‰ã€‚å¦‚æœæ²¡æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¸ä¼šæ˜¯è½¯ä»¶å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œæ€»æ˜¯è§‰å¾—ä¸å¤Ÿç†æƒ³ã€‚è€Œæœ‰äº†ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç»Ÿä¸€è¯­è¨€ã€é¢†åŸŸæ¨¡å‹å’Œè½¯ä»¶å®ç°å°±å½»åº•ä¸€è‡´äº†ã€‚è¿™ç§èˆ’æœçš„æ»‹å‘³å®åœ¨éš¾ä»¥è¨€è¡¨å•Šï¼</p><p>ç¬¬ä¸‰ï¼Œ<strong>æˆ‘ä»¬æ›´åŠ æ¸…æ¥šåœ°æ­ç¤ºäº†é¢†åŸŸçŸ¥è¯†çš„æ„å›¾</strong>ã€‚ç‰¹åˆ«æ˜¯åœ¨å¯¹ç…§è¿™é¢†åŸŸæ¨¡å‹ï¼Œå‚çœ‹Repositoryæ¥å£çš„æ—¶å€™ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/ca/f4/ca9054cb5f3d04bd3ab755f75bf74ef4.jpg?wh=8000x4500\" alt=\"\"></p><pre><code>interface UserRepository {\n    User findUserById(long id);\n    \n    SubscriptionContext inSubscriptionContext();\n    SocialContext inSocialContext();\n    OrderContext inOrderContext();\n}\n</code></pre><p>é€šè¿‡è¿™ä¸ªå®šä¹‰ï¼Œæˆ‘ä»¬æ¸…æ™°åœ°çŸ¥é“ï¼ŒUseråœ¨ä¸‰ä¸ªä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æ‰®æ¼”ä¸åŒçš„è§’è‰²ã€‚è€Œæ²¡æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡çš„æ—¶å€™ï¼Œè¿™äº›ä¿¡æ¯åˆ™æ²¡æœ‰è¢«æŠ«éœ²ï¼Œä¼šå¢åŠ ç†è§£çš„æˆæœ¬å’Œè´Ÿæ‹…ã€‚</p><h3>ä¸Šä¸‹æ–‡é—´çš„ä¾èµ–å…³ç³»</h3><p>ä¸è¿‡è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>ä¸Šä¸‹æ–‡å¯¹è±¡åœ¨å¤„ç†å¤æ‚é—®é¢˜çš„æ—¶å€™ï¼Œè¿˜èƒ½ç»§ç»­ä¿æŒç®€æ´å’Œä¼˜é›…å—ï¼Ÿ</strong>è®©æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç•¥å¾®å¤æ‚çš„é—®é¢˜ã€‚æ¯”å¦‚æˆ‘ä»¬è¦åšä¸ªæ–°ä¸šåŠ¡ï¼Œå°†æˆ‘æ‰€è®¢é˜…çš„ä¸“æ èµ é€ç»™æˆ‘çš„æœ‹å‹ã€‚</p><p>ç›´è§‰å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™éœ€è¦è·¨è¶Šä¸¤ä¸ªä¸åŒçš„ä¸Šä¸‹æ–‡ï¼Œæ‰èƒ½æ„å»ºè¿™ä¸ªä¸šåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿™ä¸ªä¸šåŠ¡ä¸­ï¼Œå¤„åœ¨è®¢é˜…ä¸Šä¸‹æ–‡ä¸­çš„Readerï¼Œä¹Ÿæ˜¯å¤„åœ¨ç¤¾äº¤ä¸Šä¸‹æ–‡ä¸­çš„Contactã€‚å•çº¯ä»å®ç°å®ƒæ¥è¯´ï¼Œé—®é¢˜ä¹Ÿä¸éš¾è§£å†³ï¼š</p><pre><code>User user = users.findUserById(...);\nUser friend = users.findUserById(...);\n\n\nContact contact = users.inSocialContext().asContact(user);\n\n\nReader reader = users.inSubscriptionContext().asReader(user);\nSubscription subscription = reader.getSubscriptions(...);\n\n\nifï¼ˆcontact.isFriend(friend)) {\n    reader.transfer(subscription, friend);\n</code></pre><p>è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œâ€œåªæœ‰æœ‹å‹é—´æ‰èƒ½èµ é€â€å±äºé¢†åŸŸé€»è¾‘ã€‚æˆ‘ä»¬å¸Œæœ›å®ƒè¢«å¯Œé›†åˆ°æ¨¡å‹ä¸­ï¼Œè€Œä¸æ˜¯åœ¨æ¨¡å‹å¤–ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿç­”æ¡ˆå‡ºä¹æ„æ–™å¾—ç®€å•ï¼Œåœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­åŠ å…¥ä¾èµ–å°±å¥½äº†ï¼š</p><pre><code>public class SubscriptionContextDB implements SubscriptionContext {\n    @Inject SocialContext SocialContext; \n    \n    public Reader asReader(User user) {\n        //åœ¨è¿™é‡Œå°†ä¾èµ–çš„ä¸Šä¸‹æ–‡ä¼ åˆ°è§’è‰²å¯¹è±¡ä¸­å»å°±å¥½äº†\n    }\n}\n</code></pre><p>è€Œå®ç°è¿™ä¸ªä¸šåŠ¡ä»£ç å°±æˆäº†ï¼š</p><pre><code>User user = users.findUserById(...);\nUser friend = users.findUserById(...);\n\n\nReader reader = users.inSubscriptionContext().asReader(user);\nSubscription subscription = reader.getSubscriptions(...);\n\n\nreader.transfer(subscription, friend)\n</code></pre><p>é€šè¿‡æ˜¾å¼å»ºæ¨¡ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸å…‰å°†ä¸šåŠ¡é€»è¾‘å¯Œé›†åˆ°é¢†åŸŸæ¨¡å‹ä¸­ï¼Œè€Œä¸”åœ¨è·¨åŸŸå¤šä¸ªä¸Šä¸‹æ–‡å®ç°æŸä¸ªä¸šåŠ¡æ—¶ï¼Œä¸Šä¸‹æ–‡ä¹‹é—´çš„ä¾èµ–å…³ç³»è¿˜æˆäº†å®ç°ç»†èŠ‚ï¼Œè¢«å°è£…äºä¸Šä¸‹æ–‡å¯¹è±¡ä¸­äº†ã€‚å¤šä¹ˆç¾å¦™å•Šï¼</p><h2>å°ç»“</h2><p>æˆ‘ä»¬æ¥ç®€å•åœ°æ€»ç»“ä¸€ä¸‹ã€‚å½“æˆ‘ä»¬ä¸¥æ ¼éµç…§â€œå¯Œå«çŸ¥è¯†çš„æ¨¡å‹â€çš„åŸåˆ™ï¼Œå°†èšåˆå…³ç³»æœ‰å…³çš„é€»è¾‘å¯Œé›†åˆ°é¢†åŸŸæ¨¡å‹ä¸Šæ—¶ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿä¸Šä¸‹æ–‡è¿‡è½½çš„é—®é¢˜ï¼Œå…¶æ ¹æºåœ¨äºå®ä½“åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æ‰®æ¼”äº†å¤šä¸ªè§’è‰²ã€‚</p><p>è€Œä¸Šä¸‹æ–‡è¿‡è½½ä¼šå¯¼è‡´æ¨¡å‹åƒµåŒ–ï¼Œä¹Ÿå°±æ˜¯â€œçœ‹ä¸æ‡‚æ”¹ä¸åŠ¨â€çš„ä»£ç å˜æˆäº†â€œçœ‹ä¸æ‡‚æ”¹ä¸åŠ¨â€çš„æ¨¡å‹ï¼Œè¿™æ ·æç‚¼çŸ¥è¯†çš„å¾ªç¯å°±æ— æ³•å±•å¼€äº†ã€‚å› è€Œæˆ‘ä»¬éœ€è¦å°†ä¸Šä¸‹æ–‡ä»é¢†åŸŸå¯¹è±¡ä¸Šå‰¥ç¦»ï¼Œè§£å†³åŠæ³•å°±æ˜¯è§’è‰²å¯¹è±¡å’Œä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p><p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè™½ç„¶ä»…ä»…ä½¿ç”¨è§’è‰²å¯¹è±¡ä¹Ÿèƒ½è§£å†³é—®é¢˜ï¼Œä½†æ˜¯é…åˆä¸Šä¸‹æ–‡å¯¹è±¡ä¸€èµ·ï¼Œå®ƒä»¬èƒ½åœ¨æ­ç¤ºæ„å›¾çš„åŒæ—¶ï¼Œä½¿æ¨¡å‹ã€ç»Ÿä¸€è¯­è¨€ä¸è½¯ä»¶å®ç°æ›´ç´§å¯†åœ°å…³è”åœ¨äº†ä¸€èµ·ï¼Œæ˜¯éå¸¸æœ‰ç”¨çš„æ¨¡å¼ã€‚</p><p>ç¼–è¾‘å°æç¤ºï¼šä¸ºäº†æ–¹ä¾¿è¯»è€…é—´çš„äº¤æµå­¦ä¹ ï¼Œæˆ‘ä»¬å»ºç«‹äº†å¾®ä¿¡è¯»è€…ç¾¤ã€‚æƒ³è¦åŠ å…¥çš„åŒå­¦ï¼Œæˆ³æ­¤åŠ å…¥<a href=\"https://jinshuju.net/f/wjtvTP\">â€œå¦‚ä½•è½åœ°ä¸šåŠ¡å»ºæ¨¡â€äº¤æµç¾¤</a>&gt;&gt;&gt;</p><h2>æ€è€ƒé¢˜</h2><p>å…³è”å¯¹è±¡ã€è§’è‰²å¯¹è±¡å’Œä¸Šä¸‹æ–‡å¯¹è±¡éƒ½å±äºç»“æ„æ¨¡å¼ï¼ˆStructural Patternï¼‰ï¼Œå¸®åŠ©æˆ‘ä»¬ç»„ç»‡å¯¹è±¡ä¸­çš„æ•°æ®ã€‚é‚£ä¹ˆä»è¡Œä¸ºæ¨¡å¼ï¼ˆBehavioral Patternï¼‰ä¸Šçœ‹ï¼Œæˆ‘ä»¬è¿˜ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/36/6b/362c6b151977aa6e278252e5eb03c26b.jpg?wh=1500x1798\" alt=\"\"></p><p>æ¬¢è¿æŠŠä½ çš„æ€è€ƒå’Œæƒ³æ³•åˆ†äº«åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä¼šå’Œä½ äº¤æµã€‚åŒæ—¶å‘¢ï¼Œæˆ‘ä¹Ÿä¼šæŠŠå…¶ä¸­ä¸€äº›ä¸é”™çš„å›ç­”ç½®é¡¶ï¼Œä¾›å¤§å®¶å­¦ä¹ ã€‚</p>","neighbors":{"left":{"article_title":"04ï½œè·¨è¶Šç°å®çš„éšœç¢ï¼ˆä¸Šï¼‰ï¼šè¦æ€§èƒ½è¿˜æ˜¯è¦æ¨¡å‹ï¼Ÿ","id":389082},"right":{"article_title":"06 | è·¨è¶Šç°å®çš„éšœç¢ï¼ˆä¸‹ï¼‰ï¼šæ¶æ„åˆ†å±‚å°±å¯¹äº†å—ï¼Ÿ","id":389095}},"comments":[{"had_liked":false,"id":303912,"user_name":"Geek_0e3b40","can_delete":false,"product_type":"c1","uid":1908431,"ip_address":"","ucode":"8C5468129A684E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7JkdLdZXNYZeopVSxeI8ml4MptQMCWI7oIHaJpfYuYjlV9Efic7x19lWickckLQzmTuFlgCVmVicZ9A/132","comment_is_top":true,"comment_ctime":1627086869,"is_pvip":false,"replies":[{"id":"110004","content":"keynote","user_name":"ä½œè€…å›å¤","comment_id":303912,"uid":"2537798","ip_address":"","utype":1,"ctime":1627089722,"user_name_real":"å¾å…«å‰"}],"discussion_count":2,"race_medal":0,"score":"9.2233720513667994e+18","product_id":100082101,"comment_content":"æƒ³é—®ä¸€ä¸‹ï¼Œæ–‡ä¸­çš„å›¾æ˜¯ç”¨ä»€ä¹ˆå·¥å…·ç”»å‡ºæ¥çš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523875,"discussion_content":"keynote","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627089722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1047773,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fc/dd/0e17bf09.jpg","nickname":"worry","note":"","ucode":"AF2BDAF6F6370E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":558867,"discussion_content":"ä¸€ä¸ªä¹ æƒ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648516305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":523875,"ip_address":""},"score":558867,"extra":""}]}]},{"had_liked":false,"id":300702,"user_name":"é˜¿é¸¡","can_delete":false,"product_type":"c1","uid":1589246,"ip_address":"","ucode":"F181422D4EB444","user_header":"https://static001.geekbang.org/account/avatar/00/18/3f/fe/35d1afbd.jpg","comment_is_top":false,"comment_ctime":1625315815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"186308909543","product_id":100082101,"comment_content":"é­”é¬¼éƒ½åœ¨ç»†èŠ‚ä¸­ï¼Œå°è¯•å»è½åœ°DDDçš„äººå¤šå¤šå°‘å°‘éƒ½ä¼šé‡åˆ°ä»Šå¤©æ–‡ç« ä¸­è¯´çš„é—®é¢˜ã€‚<br>ä»é—®é¢˜å‡ºå‘ï¼Œä¸€è·¯åˆ†æåˆ°æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå¯è§è€å¸ˆåŠŸåŠ›ä¹‹æ·±ã€‚<br>è¯»ä¸‹æ¥ç•…å¿«æ·‹æ¼“ï¼Œçˆ½ï¼","like_count":44},{"had_liked":false,"id":301247,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1625588108,"is_pvip":false,"replies":[{"id":"109094","content":"æ‰®æ¼”å¹¶ä¸æ˜¯æ´¾ç”Ÿå…³ç³» ä¹‹æ‰€ä»¥ä¸æŠŠè§’è‰²åšæˆèšåˆæ ¹ å› ä¸ºå®ƒä»¬ä¸æ˜¯ç‹¬ç«‹çš„å¯¹è±¡ ä¸ä¼šç”¨reader buyerè¡¨ æ•°æ®ä¸Šéƒ½æ˜¯userè¡¨ã€‚æ‰€ä»¥å¹¶ä¸æ˜¯å¾®ä¿¡å’Œå¾®ä¿¡è§†é¢‘å·çš„å…³ç³»ã€‚é‚£æ˜¯å…³è”è€Œä¸æ˜¯æ‰®æ¼”ã€‚åˆ†åŒ…é™¤éæœ‰arch unitå»åŠ æµ‹è¯• å¦åˆ™ä¸å¦‚å¯¹è±¡çº¦æŸåŠ›å¼ºã€‚æœ€å ç®€å•ä¸å¦åœ¨äºæ˜¯å¦ä¸æ¦‚å¿µä¸­çš„æ¨¡å‹ä¸€è‡´ï¼Œè€Œä¸åœ¨äºä»£ç çš„å†™æ³•","user_name":"ä½œè€…å›å¤","comment_id":301247,"uid":"2537798","ip_address":"","utype":1,"ctime":1625616454,"user_name_real":"å¾å…«å‰"}],"discussion_count":3,"race_medal":0,"score":"57460162956","product_id":100082101,"comment_content":"1.å¾æ˜Šè€å¸ˆçš„ä»£ç çœ‹èµ·æ¥å¾ˆèˆ’æœå•Šã€‚å°±æ˜¯å–œæ¬¢çœ‹è¿™ç§é¢ç›¸æ„å›¾çš„çš„ä»£ç ï¼Œçœ‹ä»£ç å°±åƒåœ¨çœ‹æ•…äº‹ã€‚<br><br>2.å…³äºä¸Šä¸‹æ–‡ï¼Œå¾æ˜Šè€å¸ˆçš„è¿™ä¸ªå†™æ³•æˆ‘æ˜¯ç¬¬ä¸€æ¬¡è§ï¼Œå¾ˆæœ‰æ„æ€ï¼Œé•¿è§è¯†äº†ã€‚æˆ‘è‡ªå·±ä¸€èˆ¬æ˜¯å°†ä¸Šä¸‹æ–‡ä½œä¸ºä¸€ä¸ªã€Šåº”ç”¨å±‚ã€‹åˆ°ã€Šé¢†åŸŸå±‚ã€‹ä¸­é—´çš„å±‚çº§ï¼ˆä¹è¡·äºåŠ å±‚ï¼‰ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„ã€Šé¢†åŸŸå±‚ã€‹ã€‚è¿™æ ·å…¶å®ä¸Šä¸‹æ–‡å°±ä½œä¸ºåˆ†åŒ…çš„è¾¹ç•Œåœ¨ä»£ç ä¸­ä½“ç°ï¼Œä¹Ÿç®—æ˜¯æ¨¡å‹ä¸å®ç°å…³è”ã€‚<br><br>3.å¯¹åº”çš„ä»“å‚¨å±‚ä¸ä¼šåœ¨UserRepä¸­æ”¶å…¥å¤šä¸ªä¸Šä¸‹æ–‡çš„æ“ä½œï¼Œè€Œæ˜¯ç‹¬ç«‹çš„BuyerRepï¼ŒReaderRepã€‚è¿™æ ·åšå…¶å®å¯ä»¥æ›´å¥½çš„åˆ†éš”å¤æ‚æ€§ã€‚ä½†é¡ºç€è€å¸ˆå¯¹è¿™äº›æ¨¡å‹çš„å®šä¹‰æ¥çœ‹ï¼Œå¹¶ä¸æ˜¯å¾ˆåˆé€‚ã€‚å› ä¸ºBuyerï¼ŒReaderçš„å®šä¹‰æ˜¯Userçš„è§’è‰²ï¼Œæ˜¯ä¸€ç§æ´¾ç”Ÿã€‚åˆ†éš”åŒ…ä¼šå¼±åŒ–è¿™å±‚æ´¾ç”Ÿå…³ç³»ã€‚å¯æ˜¯ï¼Œä¹Ÿä¸åªæœ‰è€å¸ˆè¿™ç§å®šä¹‰æ–¹å¼ï¼Œå¦‚æœæˆ‘å®šä¹‰Buyerï¼ŒReaderéƒ½æ˜¯ç‹¬ç«‹çš„èšåˆæ¨¡å‹ï¼Œä¸Useræ˜¯å¹³çº§çš„ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯èšåˆé—´å¹³çº§çš„å…³ç³»ï¼Œè€Œé dataå’Œroleçš„æ´¾ç”Ÿå…³ç³»ï¼Œé‚£ä¹ˆåœ¨åŒ…å±‚çº§ä¸Šæ˜ç¡®åˆ†éš”å°±æŒºåˆç†ã€‚æ‹¿å¾®ä¿¡æ¥è¯´ï¼Œå¾®ä¿¡ç”¨æˆ·å’Œå¾®ä¿¡è§†é¢‘å·ç”¨æˆ·éƒ½æ˜¯ç”¨æˆ·çš„æ´¾ç”Ÿè§’è‰²å—ï¼Ÿå¾®ä¿¡è§†é¢‘å·ç”¨æˆ·æœ‰è‡ªå·±ç‹¬ç«‹çš„ç”¨æˆ·ä½“ç³»ï¼Œå®ƒä¸å¾®ä¿¡ç”¨æˆ·æ˜¯ä¸¤ä¸ªèšåˆçš„å…³è”å…³ç³»ï¼Œä¸€ä¸ªå¾®ä¿¡ç”¨æˆ·å¯ä»¥å…³è”å¤šä¸ªå¾®ä¿¡è§†é¢‘å·ç”¨æˆ·ã€‚å®šä¹‰ä¸åŒä¸€åˆ‡å°±ä¸åŒã€‚<br><br>4.æˆ‘è®¤ä¸ºåŒ…ç»“æ„ï¼Œæ¨¡å—ç»“æ„éƒ½ç®—æ˜¯ä»£ç çš„ç»„æˆéƒ¨åˆ†ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨æ¥åšæ¨¡å‹ä¸å®ç°çš„å…³è”ã€‚ä¸çŸ¥é“å¾æ˜Šè€å¸ˆæ€ä¹ˆçœ‹ï¼Ÿ<br><br>5.æ„Ÿè§‰è¿˜æ˜¯ä¸Šä¸‹æ–‡åˆ†åŒ…æ¯”ä¸Šä¸‹æ–‡ç±»æ¨¡å‹åä½œé£é™©ä½äº›ã€‚è¿™ä¹ˆå¥½çœ‹çš„ä»£ç ï¼ˆçœŸå¿ƒçš„ï¼Œæ²¡æœ‰åä¹‰ï¼‰ï¼Œç¢°ä¸Šä¸æ‡‚çš„å¼Ÿå…„ï¼Œè¢«ç”¨é”™ï¼Œå†™åºŸçš„æ¦‚ç‡æ„Ÿè§‰è¿˜æŒºé«˜ã€‚æ”¾åˆ°å¤§å‹é¡¹ç›®ï¼Œå›¢é˜Ÿåä½œï¼Œè¿™çœŸçš„æŒºè®©äººæ‹…å¿§ã€‚è¿™åˆæ¶‰åŠåˆ°ä¸€ä¸ªå†³ç­–ç‚¹ï¼Œæ˜¯æ¨¡å‹çš„ç®€å•é‡è¦è¿˜æ˜¯æ¨¡å‹çš„å‡†ç¡®é‡è¦ã€‚æˆ‘è®¤ä¸ºè·³å‡ºæ¥ï¼Œçœ‹å“ªä¸ªå¯¹å½“å‰çš„å›¢é˜Ÿå½“å‰çš„å¤„å¢ƒæ•ˆç›Šè¾ƒé«˜å°±å“ªä¸ªé‡è¦ã€‚å¦‚æœç¡¬è¦é€‰ä¸€ä¸ªï¼Œæˆ‘é€‰ç®€å•ï¼Œå¯è¯»æ¯”å“è¶Šé‡è¦ï¼ˆæ¥è‡ªã€Šå®ç°æ¨¡å¼ã€‹çš„ä»·å€¼è§‚ï¼‰ï¼Œå¯è¯»è¦æœ‰åŒç†å¿ƒã€‚","like_count":13,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522942,"discussion_content":"æ‰®æ¼”å¹¶ä¸æ˜¯æ´¾ç”Ÿå…³ç³» ä¹‹æ‰€ä»¥ä¸æŠŠè§’è‰²åšæˆèšåˆæ ¹ å› ä¸ºå®ƒä»¬ä¸æ˜¯ç‹¬ç«‹çš„å¯¹è±¡ ä¸ä¼šç”¨reader buyerè¡¨ æ•°æ®ä¸Šéƒ½æ˜¯userè¡¨ã€‚æ‰€ä»¥å¹¶ä¸æ˜¯å¾®ä¿¡å’Œå¾®ä¿¡è§†é¢‘å·çš„å…³ç³»ã€‚é‚£æ˜¯å…³è”è€Œä¸æ˜¯æ‰®æ¼”ã€‚åˆ†åŒ…é™¤éæœ‰arch unitå»åŠ æµ‹è¯• å¦åˆ™ä¸å¦‚å¯¹è±¡çº¦æŸåŠ›å¼ºã€‚æœ€å ç®€å•ä¸å¦åœ¨äºæ˜¯å¦ä¸æ¦‚å¿µä¸­çš„æ¨¡å‹ä¸€è‡´ï¼Œè€Œä¸åœ¨äºä»£ç çš„å†™æ³•","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625616454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1246273,"avatar":"https://static001.geekbang.org/account/avatar/00/13/04/41/082e2706.jpg","nickname":"keep_curiosity","note":"","ucode":"794DC1D3FB9214","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384062,"discussion_content":"èµåŒè€å¸ˆè¯´çš„ï¼šâ€œç®€å•ä¸å¦åœ¨äºæ˜¯å¦ä¸æ¦‚å¿µä¸­çš„æ¨¡å‹ä¸€è‡´ï¼Œè€Œä¸åœ¨äºä»£ç çš„å†™æ³•â€ã€‚æ¨¡å‹çš„ç®€å•å’Œå‡†ç¡®æœ‰æ—¶å€™ä¸å†²çªã€‚å›¢é˜Ÿçš„æ”¶ç›Šä¹Ÿè¦ä»é•¿è¿œçœ‹ï¼Œå›¢é˜Ÿæ˜¯åœ¨æˆé•¿çš„ï¼Œå¥½çš„ä»£ç çœ‹å¤šäº†å°±ä¼šå†™äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626348246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1766740,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELpFhr06SHLSicj6ZjR68aRuy6q939nGqHUAROuxNc5Cks2d8gylonwyozYT3v3ibrqKmPmWibAjuIHg/132","nickname":"é‡æ”¾","note":"","ucode":"4D0FCF38F9AED3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545340,"discussion_content":"è®¤åŒä½ è¯´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641911921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303114,"user_name":"é‚“å¿—å›½","can_delete":false,"product_type":"c1","uid":1043844,"ip_address":"","ucode":"380AE67ED7B9D7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/84/0b8e2d25.jpg","comment_is_top":false,"comment_ctime":1626598272,"is_pvip":false,"replies":[{"id":"109693","content":"å®ç°éšä¾¿è€¦åˆ æ¥å£çœ‹ä¸å‡ºæ¥å°±è¡Œ è€¦åˆä¸æ˜¯åäº‹ ä¸å½“è€¦åˆæ‰æ˜¯","user_name":"ä½œè€…å›å¤","comment_id":303114,"uid":"2537798","ip_address":"","utype":1,"ctime":1626603533,"user_name_real":"å¾å…«å‰"}],"discussion_count":4,"race_medal":0,"score":"53166205824","product_id":100082101,"comment_content":"æŠŠç¤¾äº¤çš„ä¸Šä¸‹æ–‡ä¼ é€’åˆ°readeré‡Œï¼Œæ˜¯ä¸æ˜¯è®©readerè€¦åˆäº†ç¤¾äº¤å‘¢ï¼Ÿ","like_count":12,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523554,"discussion_content":"å®ç°éšä¾¿è€¦åˆ æ¥å£çœ‹ä¸å‡ºæ¥å°±è¡Œ è€¦åˆä¸æ˜¯åäº‹ ä¸å½“è€¦åˆæ‰æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626603533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550289,"discussion_content":"â€œå®ç°éšä¾¿è€¦åˆ æ¥å£çœ‹ä¸å‡ºæ¥å°±è¡Œâ€ï¼Ÿè¿™ä¸ªæˆ‘ä¹Ÿæ²¡ç†è§£ï¼Œè¿™æ ·çœŸçš„å¯ä»¥å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644474195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1766740,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELpFhr06SHLSicj6ZjR68aRuy6q939nGqHUAROuxNc5Cks2d8gylonwyozYT3v3ibrqKmPmWibAjuIHg/132","nickname":"é‡æ”¾","note":"","ucode":"4D0FCF38F9AED3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545341,"discussion_content":"1ã€å®ç°è€¦åˆå¸¦æ¥çš„é—´æ¥ä¾èµ–å…³ç³»ä¼šå¯¼è‡´å„ç§åŒ…å†²çª 2ã€éšä¾¿è€¦åˆç¢°åˆ°ä¸æ‡‚çš„åŒå­¦å¼€å‘éšä¾¿ä¾èµ–éšä¾¿ç”¨ä»£ç å°±ä¹±äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641912019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1056127,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1d/7f/aabc1b66.jpg","nickname":"hetiu","note":"","ucode":"35D9338C3ABD20","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404974,"discussion_content":"å®ç°éšä¾¿è€¦åˆçœŸçš„åˆé€‚å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634476520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303136,"user_name":"å‹¿æ›´æ”¹ä»»ä½•ä¿¡æ¯","can_delete":false,"product_type":"c1","uid":2028956,"ip_address":"","ucode":"575185C69C05A3","user_header":"","comment_is_top":false,"comment_ctime":1626607397,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"23101443877","product_id":100082101,"comment_content":"æœ€åä¸€ä¸ªèµ é€çš„ä¸¾ä¾‹æ²¡æ˜ç™½ï¼Œæœ‹å‹æ‰èƒ½èµ é€çš„è§„åˆ™åœ¨å“ªé‡Œä½“ç°äº†ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1682027,"avatar":"https://static001.geekbang.org/account/avatar/00/19/aa/6b/ab9a072a.jpg","nickname":"å¯¹ä¸é”™","note":"","ucode":"EF55733E3BD78B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391877,"discussion_content":"è¿™é‡Œæœ€ç»ˆçš„å®ç°åº”è¯¥å°±æ˜¯è®¢é˜…çš„ä¸Šä¸‹æ–‡ä¾èµ–ç¤¾äº¤çš„ä¸Šä¸‹æ–‡ï¼Œåªæ˜¯åœ¨èšåˆæ ¹çš„ä½¿ç”¨é‚£ä¸€å±‚(ä¹Ÿå°±æ˜¯user)ä¸å…³æ³¨åº•ä¸‹çš„å®ç°ç»†èŠ‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1630669011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201350,"avatar":"https://static001.geekbang.org/account/avatar/00/12/54/c6/c2481790.jpg","nickname":"lisiur","note":"","ucode":"CEB2DBCE29CAA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560487,"discussion_content":"ä¸ªäººè§‰å¾—ä¾èµ–æ­£å¥½ä½“ç°äº†æ¨¡å‹å’Œå®ç°çš„å…³è”ï¼Œæ¨¡å‹è¡¨è¾¾çš„éœ€æ±‚æ˜¯è´­ä¹°çš„ä¸“æ é€ç»™æœ‹å‹ï¼Œæœ¬èº«å°±æ¶‰åŠä¸¤ä¸ªä¸Šä¸‹æ–‡äº†ï¼Œå®ç°ä¸Šä¸¤ä¸ªä¸Šä¸‹æ–‡å¿…ç„¶å°±ä¼šæœ‰æ‰€å…³è”ã€‚å¦‚æœä»å®ç°çš„è§’åº¦æ¥è®²ï¼Œæƒ³è¦é¿å…é«˜è€¦åˆï¼Œåˆ™éœ€è¦å†åŠ ä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ä¸“é—¨ç”¨æ¥ç»„åˆè¿™ä¸¤ä¸ªä¸Šä¸‹æ–‡ï¼Œæ¯”å¦‚å°±å«â€œèµ é€å¥½å‹â€ä¸Šä¸‹æ–‡ï¼ˆç‹—å¤´ï¼‰ï¼Œå½“ç„¶è¿™æ ·çš„è¯å°±è¦åŒæ­¥åˆ°é¢†åŸŸæ¨¡å‹ä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649345063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042362,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e7/ba/aceadf0b.jpg","nickname":"RoyLING","note":"","ucode":"8F311F2CFB2DA4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386474,"discussion_content":"æˆ‘ä¹Ÿæœ‰åŒæ ·çš„ç–‘é—®ğŸ¤”ï¸å¦‚æœæ˜¯ç§»åˆ°äº†transferé‡Œï¼Œé‚£è®¢é˜…ä¸Šä¸‹æ–‡é‡Œä¼šä¾èµ–ç¤¾äº¤ä¸Šä¸‹æ–‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627608098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327530,"user_name":"é»„å¤§ä»™","can_delete":false,"product_type":"c1","uid":1610676,"ip_address":"","ucode":"6C79E6991EC3B8","user_header":"https://static001.geekbang.org/account/avatar/00/18/93/b4/22f438d0.jpg","comment_is_top":false,"comment_ctime":1640162906,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14525064794","product_id":100082101,"comment_content":"è·Œè·Œæ’æ’åœ°å®è·µåï¼Œå›è¿‡å¤´æ¥çœ‹è¿™ç¯‡ï¼Œå¦‚è·è‡³å®ã€‚<br>é€šè¿‡ä¸Šä¸‹æ–‡éš”ç¦»ï¼ŒæŠŠåŸå…ˆçš„å¤æ‚çš„ç»¼åˆæ¨¡å‹ï¼Œæ‹†åˆ°ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä¿è¯äº†ä¸Šä¸‹æ–‡å†…é€»è¾‘çš„çº¯å‡€ã€‚<br>ä½†è¿™é‡Œé¢æ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒUser è½¬æ¢ä¸º Buyer çš„è¿‡ç¨‹è¯¥ä¸è¯¥æ”¾åˆ°é¢†åŸŸå±‚ä¸­ï¼Œè¿˜æ˜¯äº¤ç”±åŸºç¡€å±‚è‡ªç”±è‡ªåœ¨åœ°å®ç°ï¼Ÿæ–‡ä¸­æ‰€è¯´çš„æ˜¯åè€…ï¼Œä¹Ÿå°±æ˜¯åªå£°æ˜ interface Buyerï¼Œç”±å®ç°å±‚æ¥å®ç° class BuyerImpl implements Buyerã€‚<br>æ„Ÿè§‰è¿™æ ·æœ‰ç‚¹å¤ªçµæ´»äº†ï¼Œæ˜¯æŠŠåŒåˆƒå‰‘ã€‚é¢†åŸŸå±‚å£°æ˜äº†å®ƒçš„è¡Œä¸ºï¼Œå¹¶å®Œå…¨ä¸å£°æ˜å®ƒçš„å®ç°ã€‚å®ç°å±‚è¦åšå¾ˆå¤šäº‹æƒ…ï¼Œæ‰èƒ½è·‘èµ·æ¥ã€‚å¦‚æœçµæ´»ä¸‹æ”¾è¿‡åº¦ï¼Œé¢†åŸŸå±‚å°±å˜æˆäº†ä¸€ä¸ªç²¾è‡´åœ°ç©ºæ¶å­ï¼Œå¦‚æœæ›¿æ¢åŸºç¡€å±‚çš„ä¸€äº›è®¾æ–½ï¼Œéœ€è¦å¤§é‡åœ°æ”¹åŠ¨æ‰èƒ½è¿ç§»è¿‡å»ã€‚","like_count":3},{"had_liked":false,"id":304093,"user_name":"å­é¾™","can_delete":false,"product_type":"c1","uid":1418784,"ip_address":"","ucode":"B7D755021D6296","user_header":"https://static001.geekbang.org/account/avatar/00/15/a6/20/13f6462f.jpg","comment_is_top":false,"comment_ctime":1627231389,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14512133277","product_id":100082101,"comment_content":"å¦‚æœæ˜¯å¾®æœåŠ¡è®¾è®¡ï¼Œè¯·é—®è¿™å‡ ä¸ªä¸Šä¸‹æ–‡æ˜¯ä¸æ˜¯åº”è¯¥ç‹¬ç«‹æˆæœåŠ¡ï¼Œé‚£userè¡¨çš„æ•°æ®æ€ä¹ˆå…±äº«å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1201350,"avatar":"https://static001.geekbang.org/account/avatar/00/12/54/c6/c2481790.jpg","nickname":"lisiur","note":"","ucode":"CEB2DBCE29CAA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560488,"discussion_content":"è°ƒç”¨useræœåŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649345141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303045,"user_name":"å“ç„¶","can_delete":false,"product_type":"c1","uid":1202149,"ip_address":"","ucode":"F0E173FD82181B","user_header":"https://static001.geekbang.org/account/avatar/00/12/57/e5/0af7593f.jpg","comment_is_top":false,"comment_ctime":1626536845,"is_pvip":false,"replies":[{"id":"109664","content":"ä¸è¡Œ å®ä½“æ˜¯ä¸€ä¸ª è¡Œä¸ºä¸åŒ","user_name":"ä½œè€…å›å¤","comment_id":303045,"uid":"2537798","ip_address":"","utype":1,"ctime":1626569121,"user_name_real":"å¾å…«å‰"}],"discussion_count":1,"race_medal":0,"score":"14511438733","product_id":100082101,"comment_content":"ä¸è¦useræ¨¡å‹ï¼Œç›´æ¥å»ºæ¨¡reader,buyer,contactä¸è¡Œå—?","like_count":3,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523531,"discussion_content":"ä¸è¡Œ å®ä½“æ˜¯ä¸€ä¸ª è¡Œä¸ºä¸åŒ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626569121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301091,"user_name":"èµµæ™é¾™","can_delete":false,"product_type":"c1","uid":2673605,"ip_address":"","ucode":"F15730BCA97EE0","user_header":"https://static001.geekbang.org/account/avatar/00/28/cb/c5/c1d7ca5e.jpg","comment_is_top":false,"comment_ctime":1625534969,"is_pvip":false,"replies":[{"id":"109060","content":"å¯ä»¥ æ‰®æ¼”è§’è‰² æœ‰ä¸åŒçš„å®ç°æ–¹æ³•","user_name":"ä½œè€…å›å¤","comment_id":301091,"uid":"2537798","ip_address":"","utype":1,"ctime":1625538519,"user_name_real":"å¾å…«å‰"}],"discussion_count":1,"race_medal":0,"score":"10215469561","product_id":100082101,"comment_content":"åˆ°äº†è§’è‰²ä¸€æ­¥ï¼Œæˆ‘è§‰å¾—æˆ‘é‡åˆ°çš„é—®é¢˜åŸºæœ¬å°±è§£å†³äº†ï¼Œå› ä¸ºæˆ‘ä¼šæŠŠã€è§’è‰²ã€‘ä½œä¸ºã€èšåˆæ ¹ã€‘ä½¿ç”¨ï¼Œå¯ä»¥è§£é‡Šä¸ºï¼šåœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸­ï¼ŒBuyerã€Readerã€Contactå°±æ˜¯èšåˆæ ¹ï¼ŒUseråªæ˜¯ä¸€ä¸ªåœ¨å®ƒä»¬ä¹‹é—´èµ·åˆ°å…³è”ä½œç”¨çš„ç±»ï¼Œåªåœ¨ã€å…³è”å…³ç³»ã€‘ç›¸å…³é€»è¾‘ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œä½¿ç”¨ã€‚æˆ‘è§‰å¾—è¿™æ ·å»ºæ¨¡èƒ½å¤Ÿæ›´è¿›ä¸€æ­¥çš„å°†æ¨¡å‹è§£è€¦ã€‚<br>æ‰€ä»¥æˆ‘å¹¶æ²¡æœ‰å¾ˆå¥½çš„ç†è§£ï¼Œæˆ‘è¿™æ ·çš„è§£å†³æ–¹æ¡ˆæ˜¯å¦è¿˜å­˜åœ¨è€å¸ˆæ‚¨è®²çš„åé¢è¿™äº›é—®é¢˜ã€‚","like_count":2,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522893,"discussion_content":"å¯ä»¥ æ‰®æ¼”è§’è‰² æœ‰ä¸åŒçš„å®ç°æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625538519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352696,"user_name":"é™é™è†å¬","can_delete":false,"product_type":"c1","uid":1263932,"ip_address":"","ucode":"0A8600CB928EFE","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg","comment_is_top":false,"comment_ctime":1658886872,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5953854168","product_id":100082101,"comment_content":"åŸºç¡€è®¾æ–½å±‚çš„åˆ’åˆ†ï¼Œä¸æ˜¯é‚£ä¹ˆå›°éš¾çš„äº‹æƒ…ï¼Œæ•æˆ‘å®è¯å®è¯´ï¼Œè¿™ç¯‡æ–‡ç« åšçš„æ–¹æ¡ˆè¿‡äºå¤æ‚ï¼Œå†™çš„å†…å®¹è¿‡äºç¹çã€‚å¯ä»¥å‚è€ƒä¸‹ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹å’Œã€Šå®ç°é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹ä¸¤æœ¬ä¹¦ï¼Œç»“åˆå®é™…æ‰èƒ½å†™å‡ºæœ‰ç”¨çš„ä¸œè¥¿ã€‚","like_count":1},{"had_liked":false,"id":323138,"user_name":"é™ˆå°è™","can_delete":false,"product_type":"c1","uid":1218864,"ip_address":"","ucode":"CB8707CE7F0BB7","user_header":"https://static001.geekbang.org/account/avatar/00/12/99/30/231af749.jpg","comment_is_top":false,"comment_ctime":1637741591,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5932708887","product_id":100082101,"comment_content":"å°±è®°ä½äº†ä¸€å¥è¯ï¼šå¤šä¹ˆæ¯ç§’å•Šï¼ï¼šï¼‰","like_count":1},{"had_liked":false,"id":310521,"user_name":"Jaising","can_delete":false,"product_type":"c1","uid":1037630,"ip_address":"","ucode":"F68830B7B90F96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d5/3e/7f3a9c2b.jpg","comment_is_top":false,"comment_ctime":1630719132,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5925686428","product_id":100082101,"comment_content":"â€œé€šè¿‡ä¸Šä¸‹æ–‡å¯¹è±¡åˆ†ç¦»ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„é€»è¾‘â€ ä¸€èŠ‚ä¸­ï¼ŒUserRepositoryDB çš„æ¥å£å®šä¹‰æ˜¯ä¸æ˜¯ç¼ºå°‘äº†å®ç°UserRepository ï¼Œåº”è¯¥æ˜¯public class UserRepositoryDB implements UserRepository {...}ï¼Œè¿™æ ·SubscriptionContext ç­‰xxxContextçš„ä¸Šä¸‹æ–‡åˆ‡æ¢å®ç°éƒ½æ”¾åˆ°UserRepositoryDB ä¸­","like_count":1},{"had_liked":false,"id":300999,"user_name":"å¨","can_delete":false,"product_type":"c1","uid":1068542,"ip_address":"","ucode":"C921CDCB22B9A3","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/fe/882eaf0f.jpg","comment_is_top":false,"comment_ctime":1625480380,"is_pvip":false,"replies":[{"id":"109041","content":"æˆ‘ä¹Ÿä¸å–œæ¬¢æ¸¸ç¦»äºä¸Šä¸‹æ–‡ä¹‹å¤–çš„æœåŠ¡ é‚£ä¸è¿‡æ˜¯è¿‡ç¨‹çš„å¦ä¸€ä¸ªåå­— ä¸å¤Ÿé¢å‘å¯¹è±¡","user_name":"ä½œè€…å›å¤","comment_id":300999,"uid":"2537798","ip_address":"","utype":1,"ctime":1625482010,"user_name_real":"å¾å…«å‰"}],"discussion_count":4,"race_medal":0,"score":"5920447676","product_id":100082101,"comment_content":"åœ¨æœ€åä¸€ä¸ªèµ é€è¯¾ç¨‹çš„ä¾‹å­é‡Œï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç”¨é¢†åŸŸæœåŠ¡è¿™æ¦‚å¿µå»åŒ…è£…èµ é€çš„é€»è¾‘å‘¢ï¼Œå› ä¸ºä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œèµ é€çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿçš„ç¡®æ˜¯éœ€è¦é€šè¿‡å¤šä¸ªä¸Šä¸‹æ–‡åä½œå®Œæˆï¼Œå¥½åƒæ”¾é¢†åŸŸæœåŠ¡é‡Œä¹Ÿåˆé€‚","like_count":1,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522870,"discussion_content":"æˆ‘ä¹Ÿä¸å–œæ¬¢æ¸¸ç¦»äºä¸Šä¸‹æ–‡ä¹‹å¤–çš„æœåŠ¡ é‚£ä¸è¿‡æ˜¯è¿‡ç¨‹çš„å¦ä¸€ä¸ªåå­— ä¸å¤Ÿé¢å‘å¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625482010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1246273,"avatar":"https://static001.geekbang.org/account/avatar/00/13/04/41/082e2706.jpg","nickname":"keep_curiosity","note":"","ucode":"794DC1D3FB9214","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384064,"discussion_content":"å¦‚æœæŠ›å¼ƒé¢†åŸŸæœåŠ¡ï¼Œå…¨éƒ¨é‡‡ç”¨æ³¨å…¥çš„æ–¹å¼å°±å¯èƒ½ä¼šå‡ºç°å¾ªç¯ä¾èµ–çš„æƒ…å†µå§ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626348480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1204947,"avatar":"https://static001.geekbang.org/account/avatar/00/12/62/d3/663de972.jpg","nickname":"æ‡µé€¼çŒ´","note":"","ucode":"BDC748A96AC316","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1246273,"avatar":"https://static001.geekbang.org/account/avatar/00/13/04/41/082e2706.jpg","nickname":"keep_curiosity","note":"","ucode":"794DC1D3FB9214","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570884,"discussion_content":"æˆ‘æ„Ÿè§‰ä¹Ÿæ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651983374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":384064,"ip_address":""},"score":570884,"extra":""}]},{"author":{"id":1204947,"avatar":"https://static001.geekbang.org/account/avatar/00/12/62/d3/663de972.jpg","nickname":"æ‡µé€¼çŒ´","note":"","ucode":"BDC748A96AC316","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570885,"discussion_content":"æˆ‘ä¹Ÿæƒ³åˆ°è¿™ä¸ªäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651983402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300977,"user_name":"ç‹©æœˆ","can_delete":false,"product_type":"c1","uid":1204178,"ip_address":"","ucode":"472CCBFBE77785","user_header":"https://static001.geekbang.org/account/avatar/00/12/5f/d2/a39e5cea.jpg","comment_is_top":false,"comment_ctime":1625474143,"is_pvip":false,"replies":[{"id":"109040","content":"ç„¶è€Œæ¨¡å‹è¡¨è¾¾ä¸äº†è§„åˆ™ æ€ä¹ˆä¹Ÿè¦åˆ°ä»£ç é‡Œ","user_name":"ä½œè€…å›å¤","comment_id":300977,"uid":"2537798","ip_address":"","utype":1,"ctime":1625479772,"user_name_real":"å¾å…«å‰"}],"discussion_count":3,"race_medal":0,"score":"5920441439","product_id":100082101,"comment_content":"åœ¨å®ç°ä¸­åŠ å…¥ä¸Šä¸‹æ–‡ä¾èµ–ï¼Œ è¿™æ ·æ˜¯ä¸æ˜¯éšè—äº†â€œå¿…é¡»å¾—æ˜¯friendæ‰èƒ½èµ é€è®¢é˜…â€è¿™ä¸ªé¢†åŸŸçŸ¥è¯†ï¼Ÿ æ¯•ç«Ÿä»é¢†åŸŸå±‚å·²ç»çœ‹ä¸åˆ°è¿™ä¸ªé€»è¾‘äº†ï¼Œ ä¸šåŠ¡é€»è¾‘ç›¸å½“äºä¸‹æ”¾äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522867,"discussion_content":"ç„¶è€Œæ¨¡å‹è¡¨è¾¾ä¸äº†è§„åˆ™ æ€ä¹ˆä¹Ÿè¦åˆ°ä»£ç é‡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625479772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1610676,"avatar":"https://static001.geekbang.org/account/avatar/00/18/93/b4/22f438d0.jpg","nickname":"é»„å¤§ä»™","note":"","ucode":"6C79E6991EC3B8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393217,"discussion_content":"ç¡®å®æ„Ÿè§‰ä¼šä¸‹æ”¾äº†å¥½å¤šåˆ°å®ç°ä¸­ï¼Œå¹¶ä¸”å¼ºè¡Œè§„å®šå®ç°å¾—éµå¾ªè¿™äº›é€»è¾‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631301867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1067638,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/76/abb7bfe3.jpg","nickname":"å¤§æµ·æµ®è","note":"","ucode":"7A3B9011C639ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384529,"discussion_content":"æ˜¯æ”¾åˆ°å®ä½“è¡Œä¸ºä¸­äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626637311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359597,"user_name":"Geek_744031","can_delete":false,"product_type":"c1","uid":2659268,"ip_address":"æµ™æ±Ÿ","ucode":"30152D64E12370","user_header":"","comment_is_top":false,"comment_ctime":1665667233,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1665667233","product_id":100082101,"comment_content":"å¦‚æœuserå’Œè§’è‰²æ˜¯èšåˆï¼Œ é‚£ä¹ˆ Subscription æ˜¯ä¸æ˜¯ä¸èƒ½æš´éœ²ç»™App å±‚å‘¢ï¼Œ æ˜¯ä¸æ˜¯åº”è¯¥æ”¹æˆ<br> User user = users.findUserById(...);<br>User friend = users.findUserById(...);<br>Reader reader = users.inSubscriptionContext().asReader(user);<br>reader.transferMySub(subscription, friend);","like_count":0},{"had_liked":false,"id":358833,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"ä¸Šæµ·","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1664873050,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664873050","product_id":100082101,"comment_content":"public class UserRepositoryDB implements UserRepository {<br>    public User findById(long id) {<br>        return db.executeQuery(...)<br>    }<br>    <br>    public Buyer asBuyer(User user) {<br>        return new Buyer(user, db.executeQuery(...));<br>    }<br>    â€¦<br>ï½<br><br>è€å¸ˆï¼Œè¿™ä¸ªä¾‹å­é‡Œé¢Buyerçš„æ„é€ å‡½æ•°å‚æ•°é‡Œ db.executeQuery é‡Œçš„å†…å®¹æ˜¯ä¸æ˜¯å»æ‹¿Orders å’ŒPayments ä¸¤ä¸ªåˆ—è¡¨å†…å®¹ä»è€Œå’ŒUser æ‹¼è£…æˆBuyer å¯¹è±¡ï¼Ÿå› ä¸ºè¿™ä¸ªæ—¶å€™orders å’Œ payments å·²ç»ä¸å†æ˜¯user çš„æˆå‘˜å˜é‡è€Œå˜æˆbuyer çš„æˆå‘˜å˜é‡äº†ã€‚","like_count":0},{"had_liked":false,"id":357010,"user_name":"æå…¨å…š","can_delete":false,"product_type":"c1","uid":2798956,"ip_address":"åŒ—äº¬","ucode":"83F45875ABB083","user_header":"https://static001.geekbang.org/account/avatar/00/2a/b5/6c/494696df.jpg","comment_is_top":false,"comment_ctime":1662855903,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662855903","product_id":100082101,"comment_content":"userå¯¹è±¡åˆ›å»ºçš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯è¦æŠŠå®ƒçš„å±æ€§å…¨éƒ¨åŠ è½½ï¼Œä¼šä¸ä¼šå½±å“æ€§èƒ½","like_count":0},{"had_liked":false,"id":354340,"user_name":"å¦‚å½±ç›¸éš","can_delete":false,"product_type":"c1","uid":1161747,"ip_address":"é™•è¥¿","ucode":"48C3B75C30C5EF","user_header":"https://static001.geekbang.org/account/avatar/00/11/ba/13/22d28c56.jpg","comment_is_top":false,"comment_ctime":1660291833,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660291833","product_id":100082101,"comment_content":"ä½ å¥½ï¼Œæ¯”å¦‚Useré‡Œé¢æœ‰ä¸ªå±æ€§ï¼šisAdult: Booleanè¡¨ç¤ºæ˜¯å¦æˆå¹´ï¼Œ<br>é‚£æˆ‘ä»¬çš„æ›´æ–°æ“ä½œæ”¾åœ¨Useråˆç†å—ï¼Ÿ<br>class User {<br>   private userIdï¼šString<br>   ...<br>   private isAdult: Boolean;<br><br>   public void updateAdult(newValue: Boolean) {<br>        this.isAdult = newValue<br>   }<br>}<br>","like_count":0},{"had_liked":false,"id":354281,"user_name":"å°ä¹å¤©å¤©","can_delete":false,"product_type":"c1","uid":1010513,"ip_address":"å¹¿ä¸œ","ucode":"1E3D6AB1C629D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/51/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1660247205,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1660247205","product_id":100082101,"comment_content":"è¿™ä¸ªæ–¹æ¡ˆï¼Œä»¥åä¸åŒçš„ä¸Šä¸‹æ–‡è¦æ‹†æˆä¸åŒçš„å¾®æœåŠ¡å¦‚ä½•å¤„ç†ï¼Ÿ","like_count":0},{"had_liked":false,"id":352135,"user_name":"Geek_1aaf73","can_delete":false,"product_type":"c1","uid":2940060,"ip_address":"","ucode":"DC65D1763AE9D0","user_header":"","comment_is_top":false,"comment_ctime":1658396419,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1658396419","product_id":100082101,"comment_content":"è¿™ç¯‡æ–‡ç« çœ‹æ‡‚äº†ï¼Œç¡®å®å¾ˆç¾å¦™ï¼Œä½†æ˜¯ç”¨åœ¨å¾®æœåŠ¡é‡Œé¢ï¼Œæœ‰åŒæ ·çš„ç–‘é—®ï¼Œæ¯”å¦‚è®¢å•ä¸­å¿ƒå¾®æœåŠ¡ï¼Œèšåˆæ ¹ä¸æ˜¯è®¢å•ä¹ˆï¼Ÿ è¯·è€å¸ˆå¸®å¿™çœ‹ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œä¸çŸ¥é“æ–‡ç« åé¢ä¼šä¸ä¼šæœ‰è§£ç­”ã€‚","like_count":0},{"had_liked":false,"id":351845,"user_name":"å°å°¹","can_delete":false,"product_type":"c1","uid":2968597,"ip_address":"","ucode":"E341E87A535AA2","user_header":"https://static001.geekbang.org/account/avatar/00/2d/4c/15/16d851ce.jpg","comment_is_top":false,"comment_ctime":1658225460,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1658225460","product_id":100082101,"comment_content":"æ„Ÿè§‰å¯¹è±¡çœŸçš„æ˜¯å¤ªå¤šäº†","like_count":0},{"had_liked":false,"id":351468,"user_name":"ç‹æ¯…","can_delete":false,"product_type":"c1","uid":1204208,"ip_address":"","ucode":"D06D1EBC440FC0","user_header":"https://static001.geekbang.org/account/avatar/00/12/5f/f0/0c4b1548.jpg","comment_is_top":false,"comment_ctime":1657810434,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657810434","product_id":100082101,"comment_content":"è¿™ä¸ªä¸Šä¸‹æ–‡çš„è¯­æ³•æ˜¯ç‰¹å®šè¯­è¨€ï¼Œphpæ²¡æœ‰è¿™ä¸ªè¯­æ³•ï¼Œæ€ä¹ˆåšè¿™ç§é¢†åŸŸå»ºæ¨¡ï¼Ÿ ç»§æ‰¿ï¼Ÿ","like_count":0},{"had_liked":false,"id":348323,"user_name":"coley wu","can_delete":false,"product_type":"c1","uid":1082095,"ip_address":"","ucode":"B2C0AD8F970981","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/ef/0badf9dc.jpg","comment_is_top":false,"comment_ctime":1654959277,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654959277","product_id":100082101,"comment_content":"åˆ†è€Œæ²»ä¹‹","like_count":0},{"had_liked":false,"id":345618,"user_name":"hk","can_delete":false,"product_type":"c1","uid":1057377,"ip_address":"","ucode":"92996CA0BCDD66","user_header":"https://static001.geekbang.org/account/avatar/00/10/22/61/580bb3c3.jpg","comment_is_top":false,"comment_ctime":1652433435,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652433435","product_id":100082101,"comment_content":"å…«å‰è€å¸ˆä½ å¥½ï¼Œæœ‰ç©ºæ—¶éº»çƒ¦å†è§£æƒ‘ä¸€ä¸‹ï¼Œæ¯”å¦‚ç”µå•†é¢†åŸŸï¼Œä¹°å®¶&#47;å–å®¶ï¼Œä¾›åº”å•†&#47;é‡‡è´­å•†&#47;åˆ†é”€å•†ç­‰æ˜¯å¦éƒ½å¯ä»¥é‡‡ç”¨è¿™ç§è§’è‰²æ‰®æ¼”æ¥åšä¸Šä¸‹æ–‡çš„éš”ç¦»å—ï¼Ÿæ‰“è½¦é¢†åŸŸï¼Œä¼šå‘˜&#47;ä¹˜å®¢&#47;å¸æœºæ˜¯å¦ä¹Ÿå¯ä»¥é‡‡ç”¨è¿™ç§è§’è‰²æ‰®æ¼”æ¥åšä¸Šä¸‹æ–‡çš„éš”ç¦»ï¼Œè°¢è°¢ï¼","like_count":0},{"had_liked":false,"id":345471,"user_name":"ä¾§è€³å€¾å¬","can_delete":false,"product_type":"c1","uid":1512642,"ip_address":"","ucode":"5BF2A2440B54F0","user_header":"https://static001.geekbang.org/account/avatar/00/17/14/c2/46ebe3a0.jpg","comment_is_top":false,"comment_ctime":1652315533,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1652315533","product_id":100082101,"comment_content":"åˆçœ‹æ„Ÿè§‰DDDå¾ˆç¾å¦™ï¼Œç»†å“èµ·æ¥ï¼Œä¸šåŠ¡æ˜¯ä¸æ˜¯è¢«æ‹†çš„ä¸ƒé›¶å…«è½ï¼Œè·Ÿä¼ ç»Ÿçš„ä¸‰å±‚ç»“æ„æ¯”è¾ƒï¼Œçºµç„¶åº”å¯¹å˜åŒ–çš„èƒ½åŠ›æé«˜äº†ï¼Œä½†æ˜¯ä»ä»£ç çš„é˜…è¯»ä¸Šæ¥è¯´ï¼Œéœ€è¦å„ä¸ªç±»çš„å»ç†è§£ä¸šåŠ¡ï¼Œæ€»è§‰å¾—ä¸é‚£ä¹ˆæ–¹ä¾¿ï¼Œå½“ç„¶ï¼Œæ­£ç¡®çš„æ–¹å¼åº”è¯¥æ˜¯ä»æ¨¡å‹å»ç†è§£ä¸šåŠ¡æ¯”è¾ƒç›´è§‚ï¼Œä½†æ˜¯å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œä»£ç æ‰æ˜¯ä»–ä»¬çš„ç»Ÿä¸€è¯­è¨€ã€‚å­¦ä¼šäº†DDDå¯¹äºè®¾è®¡è€…æ¥è¯´å¢å¼ºäº†ä»–ä»¬å¯¹ä¸šåŠ¡çš„æŒæ§ï¼Œå¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œæœ‰ä»–æ— ä»–æ²¡ç”šå½±å“ï¼Œä»£ç è¯¥å’‹å†™å’‹å†™ï¼Œè¿˜è¦è´¹æˆ‘è„‘å­ç»™ä½ åˆ†è§£ä¸šåŠ¡ï¼Œè€ƒè™‘è®¾è®¡çš„å¯è¡Œæ€§ï¼Œæ‰€ä»¥è¯´ï¼Œä»ç¨‹åºå‘˜çš„äººæ€§å»çœ‹ï¼Œæƒ³æ¨åŠ¨dddæˆ–è€…å…¶ä»–çš„å»ºæ¨¡æ–¹æ³•åº”è¯¥æŒºéš¾çš„","like_count":0},{"had_liked":false,"id":341204,"user_name":"Geek_0c38c8","can_delete":false,"product_type":"c1","uid":2798485,"ip_address":"","ucode":"3BFA4258449584","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epocEfxaGah7biaH6mEEo55eXqMSDK1ft5O6YyLS24Bo7ZRyHwAM82TOAL9AiaIccVtLeze0O3SYicyA/132","comment_is_top":false,"comment_ctime":1649419478,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649419478","product_id":100082101,"comment_content":"æˆ‘è§‰å¾—userå…³è”reader,buyer,contactå°±å¯ä»¥äº†ï¼Œå°±å˜æˆï¼šuser.reader.transfer(subscription, friend)","like_count":0},{"had_liked":false,"id":339969,"user_name":"worry","can_delete":false,"product_type":"c1","uid":1047773,"ip_address":"","ucode":"AF2BDAF6F6370E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/dd/0e17bf09.jpg","comment_is_top":false,"comment_ctime":1648516264,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648516264","product_id":100082101,"comment_content":"æ—§çº¦æ˜¯åœ¨å¤šå±‚æ¶æ„çš„å‰æä¸‹ï¼Œåˆ°äº†æ–°çº¦äº‘åŸç”Ÿï¼Œä¸Šä¸‹æ–‡ä¹‹é—´çš„é€šä¿¡å°±å˜ä¸ºæ¥å£äº†ã€‚ç¡®å®æ„Ÿè§‰åˆ°äº†ç§‹è£¤æåœ¨è¢œå­é‡Œçš„èˆ’æœ","like_count":0},{"had_liked":false,"id":338422,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1647495685,"is_pvip":true,"replies":[{"id":"123701","content":"æ²¡å¿…è¦","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"2537798","ctime":1647498454,"ip_address":"","comment_id":338422,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1647495685","product_id":100082101,"comment_content":"è€å¸ˆ dddèƒ½ç”¨åœ¨å†™æ¡†æ¶ä¸Šå˜› æ¯”å¦‚å†™ä¸ªzookeper","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556747,"discussion_content":"æ²¡å¿…è¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647498454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120997,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1a/e5/6899701e.jpg","nickname":"favorlm","note":"","ucode":"CFD52127AA6E1D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573515,"discussion_content":"ä¸ºä»€ä¹ˆæ²¡å¿…è¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653470772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332709,"user_name":"å››ä»”","can_delete":false,"product_type":"c1","uid":1047789,"ip_address":"","ucode":"7EACD1EA498B47","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/ed/e066bbf2.jpg","comment_is_top":false,"comment_ctime":1643512056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643512056","product_id":100082101,"comment_content":"asReaderçš„ä»£ç æ²¡çœ‹åˆ°ğŸ¯","like_count":0},{"had_liked":false,"id":322751,"user_name":"æ— äº‰å°±æ˜¯yk","can_delete":false,"product_type":"c1","uid":1019128,"ip_address":"","ucode":"8739E996ACD746","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/f8/d378c121.jpg","comment_is_top":false,"comment_ctime":1637574720,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637574720","product_id":100082101,"comment_content":"è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒSubscriptionContextDB å°†SocialContext ä¼ é€’ç»™è§’è‰²å¯¹è±¡Readerï¼Œè¿™æ ·è§’è‰²å¯¹è±¡å°±éœ€è¦æŒæœ‰SocialContextï¼Œè¿™ä¸ªå°±æœ‰ç‚¹å¥‡æ€ªäº†ï¼Œå› ä¸ºReaderæœ¬èº«æ˜¯ç”±SubscriptionContext è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡æ„é€ çš„ï¼Œç»“æœè‡ªå·±ç”±æŒæœ‰äº†ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ç±»ä¼¼è¿™æ ·éœ€è¦è·¨å¤šä¸ªä¸Šä¸‹æ–‡è¿›è¡Œåä½œçš„å¤æ‚åœºæ™¯ï¼Œæ˜¯ä¸æ˜¯é€šè¿‡å¢åŠ é¢†åŸŸæœåŠ¡è¿™å±‚æ¥è§£å†³ã€‚","like_count":0},{"had_liked":false,"id":322739,"user_name":"æ— äº‰å°±æ˜¯yk","can_delete":false,"product_type":"c1","uid":1019128,"ip_address":"","ucode":"8739E996ACD746","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/f8/d378c121.jpg","comment_is_top":false,"comment_ctime":1637571602,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637571602","product_id":100082101,"comment_content":"æœ€ç»ˆçš„èšåˆå¯¹è±¡ç”±UserRepository æ¥ç»„è£…ä¼šä¸ä¼šå¤ªé‡å•Šï¼Œéœ€è¦æ³¨å…¥å¾ˆå¤šå¤–éƒ¨å¯¹è±¡æˆ–è€…å…¶ä»–repositoryåˆ° UserRepository å§ã€‚","like_count":0},{"had_liked":false,"id":322148,"user_name":"æœç„¶çˆ¸çˆ¸","can_delete":false,"product_type":"c1","uid":1467300,"ip_address":"","ucode":"0E5F031A0E6A69","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/a4/e663c4d4.jpg","comment_is_top":false,"comment_ctime":1637206703,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637206703","product_id":100082101,"comment_content":"è§£äº†å¾ˆå¤šæƒ‘","like_count":0},{"had_liked":false,"id":321612,"user_name":".benxiaohai52","can_delete":false,"product_type":"c1","uid":1221835,"ip_address":"","ucode":"8F748310484724","user_header":"https://static001.geekbang.org/account/avatar/00/12/a4/cb/407d9a81.jpg","comment_is_top":false,"comment_ctime":1636966230,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636966230","product_id":100082101,"comment_content":"<br>public class SubscriptionContextDB implements SubscriptionContext {<br>    @Inject SocialContext SocialContext; <br>    <br>    public Reader asReader(User user) {<br>        &#47;&#47;åœ¨è¿™é‡Œå°†ä¾èµ–çš„ä¸Šä¸‹æ–‡ä¼ åˆ°è§’è‰²å¯¹è±¡ä¸­å»å°±å¥½äº†<br>        è¿™å—æ˜¯ä¸æ˜¯ä»å…³è”å…³ç³»è¡¨ä¸­æ ¹æ®ç”¨æˆ·å”¯ä¸€ç¼–å·æŸ¥è¯¢å¯¹åº”å…³ç³»ï¼Œåªè¦å­˜åœ¨ä¸€æ¡ä»¥ä¸Šçš„è®°å½•ï¼Œåˆ™å°±å¯ä»¥æŠŠç”¨æˆ·è½¬ä¸ºè¯»è€…<br>    }<br>}","like_count":0},{"had_liked":false,"id":321611,"user_name":".benxiaohai52","can_delete":false,"product_type":"c1","uid":1221835,"ip_address":"","ucode":"8F748310484724","user_header":"https://static001.geekbang.org/account/avatar/00/12/a4/cb/407d9a81.jpg","comment_is_top":false,"comment_ctime":1636965951,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636965951","product_id":100082101,"comment_content":"å¹³æ—¶åœ¨æƒé™ç®¡ç†ä¸­é€šå¸¸ç»™ç”¨æˆ·åˆ†é…è§’è‰²çš„å…³è”å¯¹è±¡æ˜¯ä¸æ˜¯åº”è¯¥èµ·ä¸ªåå­—å«ç®¡ç†å‘˜å•Šï¼Œåªæœ‰åˆ†é…äº†è§’è‰²çš„ç”¨æˆ·æ‰å«ç®¡ç†å‘˜","like_count":0},{"had_liked":false,"id":321610,"user_name":".benxiaohai52","can_delete":false,"product_type":"c1","uid":1221835,"ip_address":"","ucode":"8F748310484724","user_header":"https://static001.geekbang.org/account/avatar/00/12/a4/cb/407d9a81.jpg","comment_is_top":false,"comment_ctime":1636965852,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636965852","product_id":100082101,"comment_content":"1ã€ä½ æè¿°ä¸­å³æœ‰Readeræ¥å£,ä¹Ÿæœ‰Readerç±»ï¼Œæ‰€ä»¥<br><br>interface SubscriptionContext {<br>    interface Reader {<br>        boolean canView(Content content);    <br>    }<br>    <br>    Reader asReader(User user);<br>}<br><br>ä½ è¿™æ®µä»£ç é‡Œé¢çš„Readeræ˜¯æŒ‡æ¥å£è¿˜æ˜¯ç±»å•Š","like_count":0},{"had_liked":false,"id":319659,"user_name":"æ­¤æ–¹å½¼æ–¹Francis","can_delete":false,"product_type":"c1","uid":1001390,"ip_address":"","ucode":"73E6C93CF1FE39","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/ae/0a5f7a56.jpg","comment_is_top":false,"comment_ctime":1635904030,"is_pvip":false,"replies":[{"id":"116202","content":"è¿™ä¸ªä¸éœ€è¦è®²å§ ","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1636377090,"ip_address":"","comment_id":319659,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635904030","product_id":100082101,"comment_content":"å®ç°éšä¾¿è€¦åˆèƒ½å±•å¼€è®²è®²å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529710,"discussion_content":"è¿™ä¸ªä¸éœ€è¦è®²å§ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636377090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319592,"user_name":"é‡‘å­èˆ¬çš„å¿ƒ","can_delete":false,"product_type":"c1","uid":1006897,"ip_address":"","ucode":"8F6F217AF0C0EA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/31/2ccc4675.jpg","comment_is_top":false,"comment_ctime":1635860726,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1635860726","product_id":100082101,"comment_content":"è‡ªå·±èµ°åˆ°å±±é‡æ°´å¤ä¹‹æ—¶ï¼Œä½œè€…æŒ‡å‡ºæŸ³æš—èŠ±æ˜ä¹‹è·¯ï¼Œçˆ½ï¼","like_count":0},{"had_liked":false,"id":317954,"user_name":"ä¸é","can_delete":false,"product_type":"c1","uid":1480576,"ip_address":"","ucode":"49D764FE7007D0","user_header":"https://static001.geekbang.org/account/avatar/00/16/97/80/33efb09a.jpg","comment_is_top":false,"comment_ctime":1635070413,"is_pvip":true,"replies":[{"id":"116205","content":"èšåˆä¸ç”Ÿå‘½å‘¨æœŸç›¸å…³","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1636377199,"ip_address":"","comment_id":317954,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1635070413","product_id":100082101,"comment_content":"åœ¨è®¢å•ä¸Šä¸‹æ–‡ï¼Œèšåˆæ ¹ä¸åº”è¯¥ä¸åº”è¯¥æ˜¯Orderå—ï¼Ÿåœ¨æ”¯ä»˜ä¸Šä¸‹æ–‡ä¸­èšåˆæ ¹ä¸åº”è¯¥æ˜¯Payment.ä¸ºå•¥æ˜¯Buyerå‘¢","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529041,"discussion_content":"èšåˆä¸ç”Ÿå‘½å‘¨æœŸç›¸å…³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636377199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2940060,"avatar":"","nickname":"Geek_1aaf73","note":"","ucode":"DC65D1763AE9D0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580899,"discussion_content":"è¿™ç¯‡æ–‡ç« çœ‹æ‡‚äº†ï¼Œç¡®å®å¾ˆç¾å¦™ï¼Œä½†æ˜¯ç”¨åœ¨å¾®æœåŠ¡é‡Œé¢ï¼Œæœ‰åŒæ ·çš„ç–‘é—®ï¼Œæ¯”å¦‚è®¢å•ä¸­å¿ƒå¾®æœåŠ¡ï¼Œèšåˆæ ¹ä¸æ˜¯è®¢å•ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658396392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316131,"user_name":"Geek_618f9a","can_delete":false,"product_type":"c1","uid":2429792,"ip_address":"","ucode":"6AEE4DD62250FD","user_header":"","comment_is_top":false,"comment_ctime":1634174246,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634174246","product_id":100082101,"comment_content":"æ‰€è°“æ¶æ„ï¼Œå°±æ˜¯éš”ç¦»å˜åŒ–ç‚¹ã€‚æ€»ç»“å‡ºæ¥ å†™ä¸‹ï¼Œèƒ½æ˜ç¡®å„ç§ç‚¹ï¼Œæ˜ç¡®è¾¹ç•Œï¼ŒæŠŠæ¨¡ç³Šçš„å˜æ¸…æ™°ã€‚ç”¨è®¾è®¡æ€è·¯ï¼Œå†åŠ ä¸Šæ–¹æ³•ï¼Œè®¾è®¡è¾“å…¥è¾“å‡ºï¼Œæ¨¡å‹ï¼Œæ—¶åºï¼Œä¹‹åå¯åŠ¨ä»£ç ï¼Œä»£ç è´¨é‡ç›´çº¿ä¸Šå‡","like_count":0},{"had_liked":false,"id":315326,"user_name":"å…«æ­Œ","can_delete":false,"product_type":"c1","uid":1025218,"ip_address":"","ucode":"B54B99716358DE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/c2/e8ab13d7.jpg","comment_is_top":false,"comment_ctime":1633833257,"is_pvip":false,"replies":[{"id":"114191","content":"è¯·çœ‹é¢˜å¤–è¯","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1633876084,"ip_address":"","comment_id":315326,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1633833257","product_id":100082101,"comment_content":"è‡ªå·±çš„æƒ³æ³•ï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹ï¼š<br><br>1. å…³è”å¯¹è±¡ ç›¸å½“äºæŠ½åƒçš„è§„èŒƒï¼Œè€Œ è§’è‰²å¯¹è±¡ å’Œ ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæ˜¯å¯¹äºå…³è”å¯¹è±¡çš„ç‰¹æ®Šå®ç°, æœ¬è´¨ä¸Šï¼Œéƒ½æ˜¯å…³è”å¯¹è±¡ã€‚<br><br>2. æ—¢ç„¶æœ¬è´¨ä¸Šéƒ½æ˜¯ å…³è”å¯¹è±¡ï¼Œé‚£ä¹ˆå…¶å®æœ¬è´¨ä¸Šå¹¶æ²¡è§£å†³ä¸Šä¸‹æ–‡è¿‡è½½ï¼ˆContext Overloadingï¼‰çš„é—®é¢˜ã€‚<br><br>3. ä¸ºä»€ä¹ˆçœ‹èµ·æ¥åƒè§£å†³äº†ï¼Ÿè€Œä¸”è¿˜å¾ˆå®Œç¾ï¼Œæ˜¯å…³è”å¯¹è±¡é‡Œé¢åˆå¯èšåˆå…³è”å¯¹è±¡ï¼Œå¤§æ‹†å°ï¼Œå°±OKäº†ã€‚<br><br>4. é‚£ä¸ºä»€ä¹ˆä¸ç»Ÿä¸€å°±å«å…³è”å¯¹è±¡ï¼Ÿ å¦‚æœç»Ÿä¸€è¯­è¨€åªå®šä¹‰æŠ€æœ¯ï¼Œé‚£ç¡®å®å¯ä»¥ï¼Œå…³è”å¯¹è±¡å°±åƒä»¥å‰UMLé‡Œé¢çš„ç±»å›¾ä¸€æ ·ï¼Œä¸€èˆ¬äººçœ‹ä¸æ‡‚ï¼Œè€Œ è§’è‰²å¯¹è±¡ å’Œ ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¯¹äºæŠ€æœ¯äººå‘˜å’ŒéæŠ€æœ¯äººå‘˜ï¼Œå°±å¥½ç†è§£çš„å¤šã€‚<br><br>5. æŠ€æœ¯ä¸Šï¼Œå®ç°æ–¹å¼ç•¥æœ‰ä¸åŒï¼Œé’ˆå¯¹ä¸åŒåœºæ™¯é€‰ç”¨<br>\t1.) å…³è”å¯¹è±¡ï¼š getXXX() return new XXX(this)<br>\t2.) è§’è‰²å¯¹è±¡ï¼š asYYY() return (YYY)this;<br>\t3.) ä¸Šä¸‹æ–‡å¯¹è±¡ï¼š @Inject ZZZContext;<br>","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527933,"discussion_content":"è¯·çœ‹é¢˜å¤–è¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633876084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311586,"user_name":"é»„å¤§ä»™","can_delete":false,"product_type":"c1","uid":1610676,"ip_address":"","ucode":"6C79E6991EC3B8","user_header":"https://static001.geekbang.org/account/avatar/00/18/93/b4/22f438d0.jpg","comment_is_top":false,"comment_ctime":1631324463,"is_pvip":true,"replies":[{"id":"112900","content":"èŒè´£å¤ªå¤šä¸Šä¸‹æ–‡å°±æ²¡åˆ’å¯¹","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1631326657,"ip_address":"","comment_id":311586,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1631324463","product_id":100082101,"comment_content":"ä¸Šä¸‹æ–‡çš„æ¥å£å‘å±•åˆ°åé¢ä¼šä¸ä¼šèŒè´£å¤ªå¤šï¼Ÿ<br>è¿™æ—¶å€™æ‰€æœ‰çš„å®ä½“ç±»çš„ inXXXContext() æ–¹æ³•å…¨éƒ¨è¿”å›åŒä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œåœ¨é€‰æ‹©å…¶è½¬æ¢æ–¹æ³•æ—¶ï¼Œå°±å¾—è´¹åŠ²æ‰¾äº†","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526667,"discussion_content":"èŒè´£å¤ªå¤šä¸Šä¸‹æ–‡å°±æ²¡åˆ’å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631326657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1610676,"avatar":"https://static001.geekbang.org/account/avatar/00/18/93/b4/22f438d0.jpg","nickname":"é»„å¤§ä»™","note":"","ucode":"6C79E6991EC3B8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393254,"discussion_content":"æ‚¨çš„æ„æ€æ˜¯ä¸Šä¸‹æ–‡è¿‡è½½å‡ºç°å¤ªå¤šè¡¨æ˜åˆ’åˆ†æœ‰é—®é¢˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631328703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310181,"user_name":"äº‘å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1205777,"ip_address":"","ucode":"EB19F80070FE23","user_header":"https://static001.geekbang.org/account/avatar/00/12/66/11/f7408e3e.jpg","comment_is_top":false,"comment_ctime":1630536795,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630536795","product_id":100082101,"comment_content":"ç»Ÿä¸€è¯­è¨€ã€é¢†åŸŸæ¨¡å‹å’Œè½¯ä»¶å®ç°å°±å½»åº•ä¸€è‡´äº†ã€‚è¿™ç§èˆ’æœçš„æ»‹å‘³å®åœ¨éš¾ä»¥è¨€è¡¨å•Šï¼","like_count":0},{"had_liked":false,"id":310096,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1630484155,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1630484155","product_id":100082101,"comment_content":"é€šä¿—åœ°è®²ï¼Œå°±æ˜¯â€œçœ‹ä¸æ‡‚ã€æ”¹ä¸åŠ¨â€ï¼Œä»£ç å°±å˜æˆâ€œç¥–ä¼ ä»£ç â€äº†ã€‚<br>è€å¸ˆï¼Œè¿™é‡Œçš„ä»£ç ä¸ºä»€ä¹ˆä¼šçœ‹ä¸æ‡‚å‘¢ï¼Ÿå°±ç®—æ˜¯å¤§ç±»ï¼Œä»”ç»†åˆ†æåˆ†æï¼Œæˆ‘æ„Ÿè§‰ä¹Ÿèƒ½çœ‹æ˜ç™½çš„å‘€","like_count":0,"discussions":[{"author":{"id":1254112,"avatar":"https://static001.geekbang.org/account/avatar/00/13/22/e0/6295a753.jpg","nickname":"Harvey","note":"","ucode":"164D1178DA091A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541452,"discussion_content":"çœ‹ä¸æ‡‚çš„æ„æ€æ˜¯éœ€è¦èŠ±æ—¶é—´è¯»æ‡‚ï¼Œè€Œä¸”éš”ä¸€æ®µæ—¶é—´å†è¯»åˆè¦èŠ±æ—¶é—´ï¼Œæ—¶é—´å°±æ˜¯ä¼ä¸šçš„æˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŸäº›ç¼–ç¨‹è¯­è¨€ä¼šæˆä¸ºä¼ä¸šå® å„¿çš„åŸå› ï¼Œå°±æ˜¯å› ä¸ºå®ƒæ¯”å…¶ä»–è¯­è¨€æ•ˆç‡é«˜ï¼Œå“ªæ€•åªé«˜ä¸€ç‚¹ç‚¹ï¼Œæ”¾å¤§åˆ°å‡ ä¸‡äººçš„ä¼ä¸šå°±ä¼šä½“ç°å‡ºä¼˜åŠ¿ã€‚æ‰€ä»¥ç»´æŠ¤ä¸€æ®µä»£ç éœ€è¦10åˆ†é’Ÿè¿˜æ˜¯éœ€è¦1æ•´å¤©å¯¹ä¼ä¸šæ¥è®²åŒºåˆ«å¤ªå¤§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640368818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2429792,"avatar":"","nickname":"Geek_618f9a","note":"","ucode":"6AEE4DD62250FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403894,"discussion_content":"å¤ªå†…èšï¼Œæˆ–è€…è¯´useré‡Œçš„åŠŸèƒ½å˜æˆäº†å¾ˆå¤šæ¨¡å—ï¼Œä¸åŒè§’è‰²å°±æ˜¯ä¸åŒæ¨¡å—ï¼Œè¿™æ ·å°±æˆäº†é«˜è€¦åˆï¼Œæœ‰å•¥å˜åŒ–ï¼Œå°±ä¸å¥½æ”¹åŠ¨ã€‚ä¸šåŠ¡å»ºæ¨¡ï¼Œè·Ÿé¢å‘å¯¹è±¡åŸåˆ™æ˜¯ä¸å†²çªçš„ã€‚è¿™ä¸ªè¯¾æ˜¯è®²æœ€ä½³å®è·µçš„ã€‚é«˜è€¦åˆï¼Œéœ€æ±‚å˜åŒ–åï¼Œå¯¹åº”è¿™ä¸ªç±»çš„ç›¸å…³ç®—æ³•éƒ½è¦æ”¹ã€‚ æŠŠuserå¤–é¢å†å¥—ä¸€å±‚è§’è‰²ï¼Œå°±å¥½å¾ˆå¤šï¼Œå› ä¸ºéƒ½æ˜¯userï¼Œä½†è§’è‰²ä¸åŒï¼Œåšçš„äº‹ä¸äº’ç›¸å…³è”ï¼Œæœªæ¥è§’è‰²éœ€æ±‚å˜åŒ–åï¼Œæ”¹åŠ¨èŒƒå›´ä¹Ÿå°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634179181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308927,"user_name":"Marshall","can_delete":false,"product_type":"c1","uid":1197456,"ip_address":"","ucode":"E10A19386B0A9D","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/90/b2e7437a.jpg","comment_is_top":false,"comment_ctime":1629863132,"is_pvip":false,"replies":[{"id":"111927","content":"é“ç†ä¸€æ · æ‰¾åˆ°æ§åˆ¶ç”Ÿå‘½å‘¨æœŸçš„åœ°æ–¹ æ³¨å…¥","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1630024543,"ip_address":"","comment_id":308927,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1629863132","product_id":100082101,"comment_content":"ä¸€ä¸ªç”¨æˆ·å®ä½“æŒ‰ä¸Šä¸‹æ–‡ç”¨è£…é¥°å™¨çš„æ–¹å¼æ‹†åˆ†ï¼Œç¡®å®ä»¥å‰ä¸çŸ¥é“ã€‚è¿™é‡Œè¿˜æ¶‰åŠäº†æ¥å£å’Œæ³¨å…¥ï¼Œå¦‚æœæ˜¯pythonè¯­è¨€å› ä¸ºæ²¡æœ‰æ¥å£ï¼Œæ¯”å¦‚flaskæˆ–è€…djangoæ¡†æ¶ï¼Œæœ‰ä»€ä¹ˆå»ºè®®å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525685,"discussion_content":"é“ç†ä¸€æ · æ‰¾åˆ°æ§åˆ¶ç”Ÿå‘½å‘¨æœŸçš„åœ°æ–¹ æ³¨å…¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630024543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305958,"user_name":"é¸­å­","can_delete":false,"product_type":"c1","uid":1048496,"ip_address":"","ucode":"A973B86BEC352C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ff/b0/a3e19c70.jpg","comment_is_top":false,"comment_ctime":1628242978,"is_pvip":false,"replies":[{"id":"110701","content":"ä¾èµ–çš„æ˜¯æ¥å£ã€‚éšä¾¿å®ç°ä¸ªdelegationå°±è§£å¼€äº†","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1628247997,"ip_address":"","comment_id":305958,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1628242978","product_id":100082101,"comment_content":"public class SubscriptionContextDB implements SubscriptionContext {<br>    @Inject SocialContext SocialContext; <br>    <br>    public Reader asReader(User user) {<br>        &#47;&#47;åœ¨è¿™é‡Œå°†ä¾èµ–çš„ä¸Šä¸‹æ–‡ä¼ åˆ°è§’è‰²å¯¹è±¡ä¸­å»å°±å¥½äº†<br>    }<br>}<br>è¿™ä¸ªåœ°æ–¹çœ‹èµ·æ¥æœ‰ç‚¹éšæ‚£ï¼Œåœ¨è€ƒè™‘ä¸šåŠ¡çš„å‰æï¼Œå¦‚æœSocialContextDBå¯¹è±¡ä¹Ÿè¦åŒæ—¶æ³¨å…¥SubscriptionContextå¯¹è±¡æ—¶å°±ä¼šé‡åˆ°å¾ªç¯ä¾èµ–çš„é—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524576,"discussion_content":"ä¾èµ–çš„æ˜¯æ¥å£ã€‚éšä¾¿å®ç°ä¸ªdelegationå°±è§£å¼€äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628247997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303628,"user_name":"Geek_39fa7f","can_delete":false,"product_type":"c1","uid":1587075,"ip_address":"","ucode":"8C578C1F85132C","user_header":"","comment_is_top":false,"comment_ctime":1626882755,"is_pvip":false,"replies":[{"id":"109905","content":"ä¸åŒæ¨¡å¼","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1626914487,"ip_address":"","comment_id":303628,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626882755","product_id":100082101,"comment_content":"æ‰€ä»¥è¯´ä¸Šä¸‹æ–‡åŸºæœ¬å°±æ›¿ä»£äº†å…³è”å¯¹è±¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523764,"discussion_content":"ä¸åŒæ¨¡å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626914487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303139,"user_name":"fzhichao","can_delete":false,"product_type":"c1","uid":1360395,"ip_address":"","ucode":"2C45A05EB60803","user_header":"https://static001.geekbang.org/account/avatar/00/14/c2/0b/57b6c3ff.jpg","comment_is_top":false,"comment_ctime":1626611283,"is_pvip":true,"replies":[{"id":"109706","content":"æˆ‘è§‰å¾—scalaçš„implicit conversationæœ€è‡ªç„¶ã€‚ruby include module è¡¨ç¤ºcontextä¹Ÿå¯","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1626612869,"ip_address":"","comment_id":303139,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626611283","product_id":100082101,"comment_content":"å¦‚æœåˆ«çš„è¯­è¨€å‘¢ï¼Œæ¯”å¦‚ruby é€šè¿‡moduleæˆ–è€…railsçš„concernæ¥æ‹†è§£ï¼Œæ„Ÿè§‰concernæ˜¯ä¸æ˜¯åŒæ ·çš„æ„å›¾ï¼ˆasReader æˆ–è€… asBuyerï¼‰ï¼Ÿå½“ç„¶å•çº¯çš„concernæ˜¯æ²¡æœ‰åŠæ³•å¼ºåˆ¶éš”ç¦»çš„ï¼ˆä½ ä¾ç„¶å¯ä»¥æŠŠä»£ç æ··åœ¨ä¸€èµ·å†™ï¼‰ä¹Ÿè®¸å†åŠ ä¸Šrails engine æ‹†å¼€ï¼Ÿï¼ˆsubscriptionã€socialç­‰ï¼‰ç„¶åé€šè¿‡unit testä¿è¯æ¯ä¸ªç»„ä»¶éƒ½æ˜¯å¯ä»¥å•æµ‹æ— ä¾èµ–çš„ï¼ˆå¦‚æœtddçš„è¯ï¼Œé‚£è‚¯å®šå°±å¯ä»¥ä¿è¯äº†ï¼‰","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523561,"discussion_content":"æˆ‘è§‰å¾—scalaçš„implicit conversationæœ€è‡ªç„¶ã€‚ruby include module è¡¨ç¤ºcontextä¹Ÿå¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626612869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301047,"user_name":"ç®­å’Œæ–¹ç³–","can_delete":false,"product_type":"c1","uid":1938767,"ip_address":"","ucode":"818AAAFC0FD681","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIibashTHtGDWH5L0NlbuOrA6ZuI4uc1HkMD0hbIt8iaoH8hFf3jpb8jjhsvrRLTIazZP3YoR5WpMpg/132","comment_is_top":false,"comment_ctime":1625495420,"is_pvip":false,"replies":[{"id":"109044","content":"repoé‡Œå¯ä»¥æ³¨å…¥æŠ€æœ¯ä¸Šä¸‹æ–‡","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1625496183,"ip_address":"","comment_id":301047,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625495420","product_id":100082101,"comment_content":"åˆæ˜¯ä¸€ä¸ªç‰¹åˆ«å¥½çš„æ¨¡å¼è§£å†³ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼ŒèµğŸ‘<br><br>æœ‰ä¸€ä¸ªåœ°æ–¹ä¸å¤ªç†è§£ï¼Œä¸Šä¸‹æ–‡å¯¹è±¡æ”¾åœ¨UserRepoçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿå¯ä¸å¯ä»¥æ˜¯standaloneçš„ï¼Ÿè¿™ä¸¤ä¸ªå“ªä¸ªæ›´å¥½","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522884,"discussion_content":"repoé‡Œå¯ä»¥æ³¨å…¥æŠ€æœ¯ä¸Šä¸‹æ–‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625496183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300965,"user_name":"koofrank","can_delete":false,"product_type":"c1","uid":1006226,"ip_address":"","ucode":"3A1C25859E8507","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5a/92/33bbbcac.jpg","comment_is_top":false,"comment_ctime":1625471975,"is_pvip":false,"replies":[{"id":"109039","content":"å®ç°é‡Œéšä¾¿ å¯å‚è€ƒä¸‹ä¸€è¯¾","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1625479691,"ip_address":"","comment_id":300965,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625471975","product_id":100082101,"comment_content":"&#47;&#47; è®¢å•ä¸Šä¸‹æ–‡ public void placeOrder(Column column) { ... }<br><br>è¿™ä¸ªæ˜¯ä¸æ˜¯åº”è¯¥è¿”å›ä¸€ä¸ª Order å‘¢, ç„¶å repo å» save, domain è¿™ä¸€å±‚è¿™ä¸ªå®ç°é‡Œé¢ä¸å¯ä»¥è°ƒç”¨å¤–éƒ¨å§","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522864,"discussion_content":"å®ç°é‡Œéšä¾¿ å¯å‚è€ƒä¸‹ä¸€è¯¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625479691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300953,"user_name":"koofrank","can_delete":false,"product_type":"c1","uid":1006226,"ip_address":"","ucode":"3A1C25859E8507","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5a/92/33bbbcac.jpg","comment_is_top":false,"comment_ctime":1625465717,"is_pvip":false,"replies":[{"id":"109029","content":"æ²¡","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1625469972,"ip_address":"","comment_id":300953,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625465717","product_id":100082101,"comment_content":"æœ‰æ²¡æœ‰ä¸Šè¿°è§£å†³æ–¹æ¡ˆåçš„ä¸€ä¸ªå¤§è‡´å®ç°å’Œç›®å½•ç»“æ„å‘¢, æ²¡æœ‰çœ‹åˆ°æ”¾åœ¨ github ä¸Šé¢","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522862,"discussion_content":"æ²¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625469972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300950,"user_name":"å¨","can_delete":false,"product_type":"c1","uid":1068542,"ip_address":"","ucode":"C921CDCB22B9A3","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/fe/882eaf0f.jpg","comment_is_top":false,"comment_ctime":1625464253,"is_pvip":false,"replies":[{"id":"109030","content":"ä¸å¤ªè¡Œ å› ä¸ºåœ¨ç»Ÿä¸€è¯­è¨€é‡Œ ä½ ä¹Ÿä¸ä¼šè¯´ ä»€ä¹ˆä»€ä¹ˆä¸Šä¸‹æ–‡ä¸­çš„userè¿™æ ·","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1625470290,"ip_address":"","comment_id":300950,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1625464253","product_id":100082101,"comment_content":"å¦‚æœé’ˆå¯¹ä¸åŒçš„ä¸Šä¸‹æ–‡ï¼Œåœ¨å„è‡ªä¸Šä¸‹æ–‡çš„å†…éƒ¨éƒ½æ–°å»ºä¸€ä¸ªåä¸ºuserçš„ç±»ï¼Œä¸åŒä¸Šä¸‹æ–‡ä¸­çš„userç±»çš„å­—æ®µå’Œæ–¹æ³•ä¸å°½ç›¸åŒã€‚è¿™ç§æ–¹å¼å¯è¡Œå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522860,"discussion_content":"ä¸å¤ªè¡Œ å› ä¸ºåœ¨ç»Ÿä¸€è¯­è¨€é‡Œ ä½ ä¹Ÿä¸ä¼šè¯´ ä»€ä¹ˆä»€ä¹ˆä¸Šä¸‹æ–‡ä¸­çš„userè¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625470290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1204178,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5f/d2/a39e5cea.jpg","nickname":"ç‹©æœˆ","note":"","ucode":"472CCBFBE77785","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382208,"discussion_content":"é‚£å‡å¦‚åœ¨ç»Ÿä¸€è¯­è¨€é‡Œä¹Ÿå¼ºåŒ–ä¸Šä¸‹æ–‡çš„æ¦‚å¿µå‘¢ï¼Ÿä¸é€šçš„ä¸Šä¸‹æ–‡å¾ˆå¯èƒ½æ˜¯ä¸åŒä¸šåŠ¡å›¢é˜Ÿè´Ÿè´£çš„ï¼Œã€€ä»–ä»¬ä½¿ç”¨ç±»ä¼¼çš„æœ¯è¯­ä½†å¯èƒ½å¹¶æ²¡æœ‰æ„è¯†åˆ°è‡ªå·±çš„ä¸Šä¸‹æ–‡å­˜åœ¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625474258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300936,"user_name":"æ¢¦å€šæ æ†","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1625455713,"is_pvip":false,"replies":[{"id":"108996","content":"æ²¡","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1625459256,"ip_address":"","comment_id":300936,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625455713","product_id":100082101,"comment_content":"æœ‰ä»£ç ä»“åº“å—ï¼Œå¯ä»¥æä¾›ä¸€ä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522853,"discussion_content":"æ²¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625459256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300926,"user_name":"å†¯","can_delete":false,"product_type":"c1","uid":1161601,"ip_address":"","ucode":"7369C8B1A50D29","user_header":"https://static001.geekbang.org/account/avatar/00/11/b9/81/1680ec3f.jpg","comment_is_top":false,"comment_ctime":1625452191,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625452191","product_id":100082101,"comment_content":"å¦™ï¼","like_count":0},{"had_liked":false,"id":300820,"user_name":"lan_cyl","can_delete":false,"product_type":"c1","uid":1023972,"ip_address":"","ucode":"CBBC447BB691F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/e4/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1625395716,"is_pvip":false,"replies":[{"id":"108969","content":"ä¸Šä¸‹æ–‡ä¾èµ–æ˜¯åœ¨å®ç°å±‚é¢ä¸Šçš„ æ¥å£å±‚é¢æ²¡æœ‰ä¾èµ–ã€‚æ‰€ä»¥ä»æ¨¡å‹è§†è§’ ä¾èµ–æ˜¯ä¸å­˜åœ¨çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1625396561,"ip_address":"","comment_id":300820,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1625395716","product_id":100082101,"comment_content":"ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­åŠ å…¥ä¾èµ–ï¼Œç”šè‡³åœ¨Readerä¸­ä¾èµ–å…¶ä»–çš„ä¸Šä¸‹æ–‡ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿä¸å¤ªå¥½ï¼Ÿå¦å¤–åœ¨æ¨¡å‹ä¸­æ€ä¹ˆä½“ç°è¿™ç§ä¾èµ–å…³ç³»å‘¢ï¼Ÿ<br>æˆ–è€…æ˜¯å¦åº”è¯¥å»ºç«‹æ–°çš„ä¸Šä¸‹æ–‡ï¼Œä¾‹å¦‚è½¬èµ ä¸Šä¸‹æ–‡ï¼Œæ¥é¿å…ä¸Šä¸‹æ–‡ä¹‹é—´çš„è€¦åˆå‘¢ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522824,"discussion_content":"ä¸Šä¸‹æ–‡ä¾èµ–æ˜¯åœ¨å®ç°å±‚é¢ä¸Šçš„ æ¥å£å±‚é¢æ²¡æœ‰ä¾èµ–ã€‚æ‰€ä»¥ä»æ¨¡å‹è§†è§’ ä¾èµ–æ˜¯ä¸å­˜åœ¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625396561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023972,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9f/e4/abb7bfe3.jpg","nickname":"lan_cyl","note":"","ucode":"CBBC447BB691F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382145,"discussion_content":"ä¸Šä¸‹æ–‡ä¹‹é—´çš„ä¾èµ–æ˜¯å®ç°ç»†èŠ‚ä¸Šçš„ä¾èµ–ï¼Œè¿™ä¸ªå¯ä»¥ç†è§£\nä½†æ˜¯Readeråœ¨å¯Œé›†ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™ï¼Œä¹Ÿä¾èµ–äº†ç¤¾äº¤ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªå°±ä¸ç®—æ˜¯å®ç°ä¸Šçš„ä¾èµ–äº†å§ï¼Ÿéš¾é“è¯´Readerä¹Ÿæ˜¯å®ç°ç»†èŠ‚å—ï¼Ÿâ€˜æœ‹å‹ä¹‹é—´æ‰èƒ½è½¬å¢â€™çš„ä¸šåŠ¡é€»è¾‘æ˜¯å¦åº”è¯¥åœ¨æ¨¡å‹ä¸Šåæ˜ å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625450620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1204178,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5f/d2/a39e5cea.jpg","nickname":"ç‹©æœˆ","note":"","ucode":"472CCBFBE77785","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1023972,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9f/e4/abb7bfe3.jpg","nickname":"lan_cyl","note":"","ucode":"CBBC447BB691F4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382235,"discussion_content":"&#34;å°†ä¾èµ–çš„ä¸Šä¸‹æ–‡ä¼ åˆ°è§’è‰²å¯¹è±¡ä¸­&#34;,  è¿™é‡Œæˆ‘ç†è§£Readeræ˜¯ä¾èµ–äº†socialä¸Šä¸‹æ–‡çš„ï¼Œ åº”è¯¥ä¸æ­¢æ˜¯å®ç°ç»†èŠ‚ï¼Œ åœ¨é¢†åŸŸå±‚ä¹Ÿæ˜¯æœ‰è¿™ä¸ªä¾èµ–çš„ï¼Œ æ¯•ç«Ÿreaderæ¥è‡ªå¦å¤–ä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚\nå¦‚æœè¿™æ ·çš„è¯ï¼Œâ€œæœ‹å‹ä¹‹é—´æ‰èƒ½è½¬å¢â€çš„é€»è¾‘å¯ä»¥åœ¨Readeré‡Œä½“ç°çš„ï¼Œ åªæ˜¯è½¬å¢èƒ½å¦æˆåŠŸæ— æ³•é€šè¿‡transferæ–¹æ³•çœ‹å‡ºæ¥....æˆ‘ä¹Ÿè§‰å¾—è¿™é‡Œæ˜¯å¦åº”è¯¥å»ºç«‹å¦å¤–ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œ æˆ–è€…ä½¿ç”¨é¢†åŸŸæœåŠ¡ï¼ŸæœŸå¾…è€å¸ˆè§£ç­”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625481901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":382145,"ip_address":""},"score":382235,"extra":""}]}]},{"had_liked":false,"id":300799,"user_name":"webmin","can_delete":false,"product_type":"c1","uid":1047014,"ip_address":"","ucode":"98B0CA882454E8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f9/e6/47742988.jpg","comment_is_top":false,"comment_ctime":1625391540,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1625391540","product_id":100082101,"comment_content":"è€å¸ˆåœ¨ä¸Šä¸€èŠ‚è¯¾å’Œè¿™èŠ‚è¯¾ä¸­éƒ½æåˆ°äº†smalltalkï¼Œä»Šå¤©ä»Githubä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªå¼€æºå¤šå¹³å°çš„ç‰ˆæœ¬ï¼ŒRunèµ·æ¥æ„Ÿå—äº†ä¸€ä¸‹System Browserï¼Œçœ‹äº†ä¸€ä¸‹Collections - Arrayedå®ç°ï¼Œå•çœ‹æ¯ä¸ªè¯éƒ½èƒ½æ‡‚ï¼Œä½†æ˜¯æ•´æ®µä»£ç æ€ä¹ˆå¹²çš„å°±å®Œå…¨çœ‹ä¸æ‡‚äº†ã€‚<br><br>æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±ä¸‹è½½æ¥å»ç©ä¸€ä¸‹https:&#47;&#47;github.com&#47;Cuis-Smalltalk&#47;Cuis-Smalltalk-Dev<br><br>integerAt: index<br>\t&quot;Return the integer at the given index&quot;<br>\t| word |<br>\t&lt;primitive: 165&gt;<br>\tword _ self basicAt: index.<br>\tword &lt; 16r3FFFFFFF ifTrue:[^word]. &quot;Avoid LargeInteger computations&quot;<br>\t^word &gt;= 16r80000000\t&quot;Negative?!&quot;<br>\t\tifTrue:[&quot;word - 16r100000000&quot;<br>\t\t\t\t(word bitInvert32 + 1) negated]<br>\t\tifFalse:[word]","like_count":0},{"had_liked":false,"id":300731,"user_name":"å››ä»”","can_delete":false,"product_type":"c1","uid":1047789,"ip_address":"","ucode":"7EACD1EA498B47","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/ed/e066bbf2.jpg","comment_is_top":false,"comment_ctime":1625362085,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625362085","product_id":100082101,"comment_content":"è®²å¾—çœŸé€å½»ï¼","like_count":0},{"had_liked":false,"id":300697,"user_name":"è¶…","can_delete":false,"product_type":"c1","uid":1005939,"ip_address":"","ucode":"D574815D4A3496","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/73/e0aa8c84.jpg","comment_is_top":false,"comment_ctime":1625312737,"is_pvip":false,"replies":[{"id":"108938","content":"è¿™ç¯‡ä¸å°±æ˜¯è®²æ€ä¹ˆåš","user_name":"ä½œè€…å›å¤","user_name_real":"å¾å…«å‰","uid":"2537798","ctime":1625313977,"ip_address":"","comment_id":300697,"utype":1}],"discussion_count":6,"race_medal":0,"score":"1625312737","product_id":100082101,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œç³»ç»Ÿä¸€èˆ¬è¡Œä¸ºéƒ½ä¼šè·Ÿç”¨æˆ·æœ‰å…³ï¼Œè¿™æ ·å»ºæ¨¡çš„è¯userä¸å°±ä¼šè¶Šæ¥è¶Šå¤šå†…å®¹å—ï¼Ÿæˆ‘è¿˜æ˜¯æ²¡æ³•æƒ³è±¡å…·ä½“åšç³»ç»Ÿçš„æ—¶å€™è¿™ä¸ªå·¥ç¨‹æ€ä¹ˆå®ç°ã€‚","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522798,"discussion_content":"è¿™ç¯‡ä¸å°±æ˜¯è®²æ€ä¹ˆåš","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625313977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005939,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/73/e0aa8c84.jpg","nickname":"è¶…","note":"","ucode":"D574815D4A3496","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381955,"discussion_content":"å†å…·ä½“ç‚¹æè¿°ä¸€ä¸‹æˆ‘çš„ç–‘é—®ï¼Œè¿˜æ˜¯userå’Œsubscriptionï¼Œè¿˜æ˜¯readerï¼Œreaderä¸æ˜¯åº”è¯¥å»ºåœ¨subscriptionä¸Šä¸‹æ–‡é‡Œé¢å—ï¼Ÿè¿™é‡Œçš„user.inSubscribtionContext.asReaderæ˜¯æˆ‘æœ€ç–‘æƒ‘çš„åœ°æ–¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625317409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005939,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/73/e0aa8c84.jpg","nickname":"è¶…","note":"","ucode":"D574815D4A3496","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381953,"discussion_content":"æŠ±æ­‰ï¼Œå¯èƒ½æˆ‘çš„è¡¨è¾¾ä¸æ¸…æ™°ï¼Œæˆ‘çš„æ„æ€ï¼Œå¦‚æœè¿™æ ·å»ºæ¨¡ï¼Œä¹Ÿå°±æ˜¯æ¯å¤šä¸€ä¸ªè·Ÿuserç›¸å…³çš„ä¸šåŠ¡ï¼Œæˆ‘éƒ½ä¼šåœ¨useré‡Œé¢å¤šä¸€ä¸ªxxx Context çš„å°è£…å—ï¼Ÿç‰¹åˆ«æ˜¯ order å’Œ paymentï¼Œè¿™é‡Œçš„å»ºæ¨¡æ–¹æ³•ç»™äº†æˆ‘ä¸€ä¸ªå¾ˆä¸ä¸€æ ·çš„æ€è€ƒæ–¹å¼ï¼Œä¸€ä¸‹å­è½¬ä¸è¿‡æ¥ã€‚è¿‡å¾€çš„åšæ³•æ˜¯ useræ˜¯userï¼Œorderæ˜¯orderï¼Œåœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡é‡Œé¢ã€‚ä¹Ÿæ²¡æƒ³è¿‡ä¼šåœ¨useré‡Œé¢å°è£…orderçš„æ¥å£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625317010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1005939,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/73/e0aa8c84.jpg","nickname":"è¶…","note":"","ucode":"D574815D4A3496","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381971,"discussion_content":"userä¿æŒä¸å˜ï¼Œé€šè¿‡å¼•å…¥ä¸åŒçš„role obejctã€‚éš”ç¦»ä¸åŒä¸Šä¸‹æ–‡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625325750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":381953,"ip_address":""},"score":381971,"extra":""},{"author":{"id":1005939,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/73/e0aa8c84.jpg","nickname":"è¶…","note":"","ucode":"D574815D4A3496","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":381980,"discussion_content":"è¾›è‹¦è€å¸ˆè¿™ä¹ˆæ™šè¿˜å›ä¿¡æ¯ï¼ŒğŸ˜…ï¼Œæˆ‘ä¼šç»§ç»­æ¯å¤©ç­‰æ›´æ–°ç„¶ååŠªåŠ›å»ç†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625328926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":381971,"ip_address":""},"score":381980,"extra":""}]},{"author":{"id":1589246,"avatar":"https://static001.geekbang.org/account/avatar/00/18/3f/fe/35d1afbd.jpg","nickname":"é˜¿é¸¡","note":"","ucode":"F181422D4EB444","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381948,"discussion_content":"å·²ç»è¯´äº† useråœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æ˜¯ä¸åŒçš„å¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625314509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300657,"user_name":"Oops!","can_delete":false,"product_type":"c1","uid":1479474,"ip_address":"","ucode":"E2678CC12121A7","user_header":"https://static001.geekbang.org/account/avatar/00/16/93/32/e11fcd33.jpg","comment_is_top":false,"comment_ctime":1625291530,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625291530","product_id":100082101,"comment_content":"è¡Œä¸ºå¯ä»¥æ˜¯å®ä½“çš„åŠŸèƒ½ä¹Ÿå¯ä»¥æ˜¯é¢†åŸŸå†…çš„æµç¨‹ï¼ŒæœŸå¾…ä¸‹é¢å…³äºè¡Œä¸ºæ¨¡å¼å»ºæ¨¡çš„å†…å®¹ã€‚","like_count":0}]}