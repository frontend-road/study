{"id":534644,"title":"15ï½œå®æˆ˜æ¼”ç»ƒï¼šç©è½¬Kubernetesï¼ˆ1ï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>ç»è¿‡ä¸¤ä¸ªæ˜ŸæœŸçš„å­¦ä¹ ï¼Œåˆ°ä»Šå¤©æˆ‘ä»¬çš„â€œåˆçº§ç¯‡â€ä¹Ÿå¿«è¦ç»“æŸäº†ã€‚</p><p>å’Œä¹‹å‰çš„â€œå…¥é—¨ç¯‡â€ä¸€æ ·ï¼Œåœ¨è¿™æ¬¡è¯¾é‡Œï¼Œæˆ‘ä¹Ÿä¼šå¯¹å‰é¢å­¦è¿‡çš„çŸ¥è¯†åšä¸€ä¸ªæ¯”è¾ƒå…¨é¢çš„å›é¡¾ï¼Œæ¯•ç«ŸKubernetesé¢†åŸŸé‡Œæœ‰å¾ˆå¤šæ–°åè¯ã€æ–°æœ¯è¯­ã€æ–°æ¶æ„ï¼ŒçŸ¥è¯†ç‚¹å¤šä¸”æ‚ï¼Œè¿™æ ·çš„æ€»ç»“å¤ä¹ å°±æ›´æœ‰å¿…è¦ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘è¿˜æ˜¯å…ˆç®€è¦åˆ—ä¸¾ä¸€ä¸‹â€œåˆçº§ç¯‡â€é‡Œè®²åˆ°çš„Kubernetesè¦ç‚¹ï¼Œç„¶åå†ç»¼åˆè¿ç”¨è¿™äº›çŸ¥è¯†ï¼Œæ¼”ç¤ºä¸€ä¸ªå®æˆ˜é¡¹ç›®â€”â€”è¿˜æ˜¯æ­å»ºWordPressç½‘ç«™ï¼Œä¸è¿‡è¿™æ¬¡ä¸æ˜¯åœ¨Dockeré‡Œï¼Œè€Œæ˜¯åœ¨Kubernetesé›†ç¾¤é‡Œã€‚</p><h2>KubernetesæŠ€æœ¯è¦ç‚¹å›é¡¾</h2><p>å®¹å™¨æŠ€æœ¯å¼€å¯äº†äº‘åŸç”Ÿçš„å¤§æ½®ï¼Œä½†æˆç†Ÿçš„å®¹å™¨æŠ€æœ¯ï¼Œåˆ°ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨éƒ¨ç½²çš„æ—¶å€™ï¼Œå´æ˜¾å¾—â€œæ­¥å±¥ç»´è‰°â€ã€‚å› ä¸ºå®¹å™¨åªæ˜¯é’ˆå¯¹å•ä¸ªè¿›ç¨‹çš„éš”ç¦»å’Œå°è£…ï¼Œè€Œå®é™…çš„åº”ç”¨åœºæ™¯å´æ˜¯è¦æ±‚è®¸å¤šçš„åº”ç”¨è¿›ç¨‹äº’ç›¸ååŒå·¥ä½œï¼Œå…¶ä¸­çš„å„ç§å…³ç³»å’Œéœ€æ±‚éå¸¸å¤æ‚ï¼Œåœ¨å®¹å™¨è¿™ä¸ªæŠ€æœ¯å±‚æ¬¡å¾ˆéš¾æŒæ§ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<strong>å®¹å™¨ç¼–æ’</strong>ï¼ˆContainer Orchestrationï¼‰å°±å‡ºç°äº†ï¼Œå®ƒå¯ä»¥è¯´æ˜¯ä»¥å‰çš„è¿ç»´å·¥ä½œåœ¨äº‘åŸç”Ÿä¸–ç•Œçš„è½åœ°å®è·µï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯åœ¨é›†ç¾¤é‡Œè°ƒåº¦ç®¡ç†åº”ç”¨ç¨‹åºï¼Œåªä¸è¿‡ç®¡ç†çš„ä¸»ä½“ç”±äººå˜æˆäº†è®¡ç®—æœºï¼Œç®¡ç†çš„ç›®æ ‡ç”±åŸç”Ÿè¿›ç¨‹å˜æˆäº†å®¹å™¨å’Œé•œåƒã€‚</p><p>è€Œç°åœ¨ï¼Œå®¹å™¨ç¼–æ’é¢†åŸŸçš„ç‹è€…å°±æ˜¯â€”â€”Kubernetesã€‚</p><!-- [[[read_end]]] --><p>Kubernetesæºè‡ªBorgç³»ç»Ÿï¼Œå®ƒå‡èšäº†Googleçš„å†…éƒ¨ç»éªŒå’ŒCNCFçš„ç¤¾åŒºæ™ºæ…§ï¼Œæ‰€ä»¥æˆ˜èƒœäº†ç«äº‰å¯¹æ‰‹Apache Mesoså’ŒDocker Swarmï¼Œæˆä¸ºäº†å®¹å™¨ç¼–æ’é¢†åŸŸçš„äº‹å®æ ‡å‡†ï¼Œä¹Ÿæˆä¸ºäº†äº‘åŸç”Ÿæ—¶ä»£çš„åŸºç¡€æ“ä½œç³»ç»Ÿï¼Œå­¦ä¹ äº‘åŸç”Ÿå°±å¿…é¡»è¦æŒæ¡Kubernetesã€‚</p><p>ï¼ˆ<a href=\"https://time.geekbang.org/column/article/529800\">10è®²</a>ï¼‰Kubernetesçš„<strong>Master/Nodeæ¶æ„</strong>æ˜¯å®ƒå…·æœ‰è‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›çš„å…³é”®ï¼Œä¹Ÿå¯¹æˆ‘ä»¬çš„å­¦ä¹ è‡³å…³é‡è¦ï¼Œè¿™é‡Œæˆ‘å†ç”¨å¦ä¸€å¼ å‚è€ƒæ¶æ„å›¾æ¥ç®€ç•¥è¯´æ˜ä¸€ä¸‹å®ƒçš„è¿è¡Œæœºåˆ¶ï¼ˆ<a href=\"https://kubernetes.io/blog/2018/07/18/11-ways-not-to-get-hacked\">å›¾ç‰‡æ¥æº</a>ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f4/05/f429ca7114eebf140632409f3fbcbb05.png?wh=1475x852\" alt=\"å›¾ç‰‡\"></p><p>KubernetesæŠŠé›†ç¾¤é‡Œçš„è®¡ç®—èµ„æºå®šä¹‰ä¸ºèŠ‚ç‚¹ï¼ˆNodeï¼‰ï¼Œå…¶ä¸­åˆåˆ’åˆ†æˆæ§åˆ¶é¢å’Œæ•°æ®é¢ä¸¤ç±»ã€‚</p><ul>\n<li>æ§åˆ¶é¢æ˜¯MasterèŠ‚ç‚¹ï¼Œè´Ÿè´£ç®¡ç†é›†ç¾¤å’Œè¿ç»´ç›‘æ§åº”ç”¨ï¼Œé‡Œé¢çš„æ ¸å¿ƒç»„ä»¶æ˜¯<strong>apiserverã€etcdã€schedulerã€controller-manager</strong>ã€‚</li>\n<li>æ•°æ®é¢æ˜¯WorkerèŠ‚ç‚¹ï¼Œå—MasterèŠ‚ç‚¹çš„ç®¡æ§ï¼Œé‡Œé¢çš„æ ¸å¿ƒç»„ä»¶æ˜¯<strong>kubeletã€kube-proxyã€container-runtime</strong>ã€‚</li>\n</ul><p>æ­¤å¤–ï¼ŒKubernetesè¿˜æ”¯æŒæ’ä»¶æœºåˆ¶ï¼Œèƒ½å¤Ÿçµæ´»æ‰©å±•å„é¡¹åŠŸèƒ½ï¼Œå¸¸ç”¨çš„æ’ä»¶æœ‰DNSå’ŒDashboardã€‚</p><p>ä¸ºäº†æ›´å¥½åœ°ç®¡ç†é›†ç¾¤å’Œä¸šåŠ¡åº”ç”¨ï¼ŒKubernetesä»ç°å®ä¸–ç•Œä¸­æŠ½è±¡å‡ºäº†è®¸å¤šæ¦‚å¿µï¼Œç§°ä¸ºâ€œ<strong>APIå¯¹è±¡</strong>â€ï¼Œæè¿°è¿™äº›å¯¹è±¡å°±éœ€è¦ä½¿ç”¨<strong>YAML</strong>è¯­è¨€ã€‚</p><p>YAMLæ˜¯JSONçš„è¶…é›†ï¼Œä½†è¯­æ³•æ›´ç®€æ´ï¼Œè¡¨ç°èƒ½åŠ›æ›´å¼ºï¼Œæ›´é‡è¦çš„æ˜¯å®ƒä»¥â€œ<strong>å£°æ˜å¼</strong>â€æ¥è¡¨è¿°å¯¹è±¡çš„çŠ¶æ€ï¼Œä¸æ¶‰åŠå…·ä½“çš„æ“ä½œç»†èŠ‚ï¼Œè¿™æ ·Kuberneteså°±èƒ½å¤Ÿä¾é å­˜å‚¨åœ¨etcdé‡Œé›†ç¾¤çš„çŠ¶æ€ä¿¡æ¯ï¼Œä¸æ–­åœ°â€œè°ƒæ§â€å¯¹è±¡ï¼Œç›´è‡³å®é™…çŠ¶æ€ä¸æœŸæœ›çŠ¶æ€ç›¸åŒï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯Kubernetesçš„è‡ªåŠ¨åŒ–è¿ç»´ç®¡ç†ï¼ˆ<a href=\"https://time.geekbang.org/column/article/529813\">11è®²</a>ï¼‰ã€‚</p><p>Kubernetesé‡Œæœ‰å¾ˆå¤šçš„APIå¯¹è±¡ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„å¯¹è±¡æ˜¯â€œ<strong>Pod</strong>â€ï¼Œå®ƒæ†ç»‘äº†ä¸€ç»„å­˜åœ¨å¯†åˆ‡åä½œå…³ç³»çš„å®¹å™¨ï¼Œå®¹å™¨ä¹‹é—´å…±äº«ç½‘ç»œå’Œå­˜å‚¨ï¼Œåœ¨é›†ç¾¤é‡Œå¿…é¡»ä¸€èµ·è°ƒåº¦ä¸€èµ·è¿è¡Œã€‚é€šè¿‡Podè¿™ä¸ªæ¦‚å¿µï¼ŒKuberneteså°±ç®€åŒ–äº†å¯¹å®¹å™¨çš„ç®¡ç†å·¥ä½œï¼Œå…¶ä»–çš„æ‰€æœ‰ä»»åŠ¡éƒ½æ˜¯é€šè¿‡å¯¹Podè¿™ä¸ªæœ€å°å•ä½çš„å†åŒ…è£…æ¥å®ç°çš„ï¼ˆ<a href=\"https://time.geekbang.org/column/article/531551\">12è®²</a>ï¼‰ã€‚</p><p>é™¤äº†æ ¸å¿ƒçš„Podå¯¹è±¡ï¼ŒåŸºäºâ€œå•ä¸€èŒè´£â€å’Œâ€œå¯¹è±¡ç»„åˆâ€è¿™ä¸¤ä¸ªåŸºæœ¬åŸåˆ™ï¼Œæˆ‘ä»¬åˆå­¦ä¹ äº†4ä¸ªæ¯”è¾ƒç®€å•çš„APIå¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯<strong>Job/CronJob</strong>å’Œ<strong>ConfigMap</strong>/<strong>Secret</strong>ã€‚</p><ul>\n<li>Job/CronJobå¯¹åº”çš„æ˜¯ç¦»çº¿ä½œä¸šï¼Œå®ƒä»¬é€å±‚åŒ…è£…äº†Podï¼Œæ·»åŠ äº†ä½œä¸šæ§åˆ¶å’Œå®šæ—¶è§„åˆ™ï¼ˆ<a href=\"https://time.geekbang.org/column/article/531566\">13è®²</a>ï¼‰ã€‚</li>\n<li>ConfigMap/Secretå¯¹åº”çš„æ˜¯é…ç½®ä¿¡æ¯ï¼Œéœ€è¦ä»¥ç¯å¢ƒå˜é‡æˆ–è€…å­˜å‚¨å·çš„å½¢å¼æ³¨å…¥è¿›Podï¼Œç„¶åè¿›ç¨‹æ‰èƒ½åœ¨è¿è¡Œæ—¶ä½¿ç”¨ï¼ˆ<a href=\"https://time.geekbang.org/column/article/533395\">14è®²</a>ï¼‰ã€‚</li>\n</ul><p>å’ŒDockerç±»ä¼¼ï¼ŒKubernetesä¹Ÿæä¾›ä¸€ä¸ªå®¢æˆ·ç«¯å·¥å…·ï¼Œåå­—å«â€œ<strong>kubectl</strong>â€ï¼Œå®ƒç›´æ¥ä¸MasterèŠ‚ç‚¹çš„apiserveré€šä¿¡ï¼ŒæŠŠYAMLæ–‡ä»¶å‘é€ç»™RESTfulæ¥å£ï¼Œä»è€Œè§¦å‘Kubernetesçš„å¯¹è±¡ç®¡ç†å·¥ä½œæµç¨‹ã€‚</p><p>kubectlçš„å‘½ä»¤å¾ˆå¤šï¼ŒæŸ¥çœ‹è‡ªå¸¦æ–‡æ¡£å¯ä»¥ç”¨ <code>api-resources</code>ã€<code>explain</code> ï¼ŒæŸ¥çœ‹å¯¹è±¡çŠ¶æ€å¯ä»¥ç”¨ <code>get</code>ã€<code>describe</code>ã€<code>logs</code> ï¼Œæ“ä½œå¯¹è±¡å¯ä»¥ç”¨ <code>run</code>ã€<code>apply</code>ã€<code>exec</code>ã€<code>delete</code> ç­‰ç­‰ï¼ˆ<a href=\"https://time.geekbang.org/column/article/529780\">09è®²</a>ï¼‰ã€‚</p><p>ä½¿ç”¨YAMLæè¿°APIå¯¹è±¡ä¹Ÿæœ‰å›ºå®šçš„æ ¼å¼ï¼Œå¿…é¡»å†™çš„â€œå¤´å­—æ®µâ€æ˜¯â€œ<strong>apiVersion</strong>â€â€œ<strong>kind</strong>â€â€œ<strong>metadata</strong>â€ï¼Œå®ƒä»¬è¡¨ç¤ºå¯¹è±¡çš„ç‰ˆæœ¬ã€ç§ç±»å’Œåå­—ç­‰å…ƒä¿¡æ¯ã€‚å®ä½“å¯¹è±¡å¦‚Podã€Jobã€CronJobä¼šå†æœ‰â€œ<strong>spec</strong>â€å­—æ®µæè¿°å¯¹è±¡çš„æœŸæœ›çŠ¶æ€ï¼Œæœ€åŸºæœ¬çš„å°±æ˜¯å®¹å™¨ä¿¡æ¯ï¼Œéå®ä½“å¯¹è±¡å¦‚ConfigMapã€Secretä½¿ç”¨çš„æ˜¯â€œ<strong>data</strong>â€å­—æ®µï¼Œè®°å½•ä¸€äº›é™æ€çš„å­—ç¬¦ä¸²ä¿¡æ¯ã€‚</p><p>å¥½äº†ï¼Œâ€œåˆçº§ç¯‡â€é‡Œçš„KubernetesçŸ¥è¯†è¦ç‚¹æˆ‘ä»¬å°±åŸºæœ¬æ€»ç»“å®Œäº†ï¼Œå¦‚æœä½ å‘ç°å“ªéƒ¨åˆ†ä¸å¤ªæ¸…æ¥šï¼Œå¯ä»¥è¯¾åå†å¤šå¤ä¹ ä¸€ä¸‹å‰é¢çš„è¯¾ç¨‹åŠ ä»¥å·©å›ºã€‚</p><h2>WordPressç½‘ç«™åŸºæœ¬æ¶æ„</h2><p>ä¸‹é¢æˆ‘ä»¬å°±åœ¨Kubernetesé›†ç¾¤é‡Œå†æ­å»ºå‡ºä¸€ä¸ªWordPressç½‘ç«™ï¼Œç”¨çš„é•œåƒè¿˜æ˜¯â€œå…¥é—¨ç¯‡â€é‡Œçš„é‚£ä¸‰ä¸ªåº”ç”¨ï¼šWordPressã€MariaDBã€Nginxï¼Œä¸è¿‡å½“æ—¶æˆ‘ä»¬æ˜¯ç›´æ¥ä»¥å®¹å™¨çš„å½¢å¼æ¥ä½¿ç”¨å®ƒä»¬ï¼Œç°åœ¨è¦æ”¹æˆPodçš„å½¢å¼ï¼Œè®©å®ƒä»¬è¿è¡Œåœ¨Kubernetesé‡Œã€‚</p><p>æˆ‘è¿˜æ˜¯ç”»äº†ä¸€å¼ ç®€å•çš„æ¶æ„å›¾ï¼Œæ¥è¯´æ˜è¿™ä¸ªç³»ç»Ÿçš„å†…éƒ¨é€»è¾‘å…³ç³»ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3d/cc/3d9d09078f1200a84c63a7cea2f40bcc.jpg?wh=1920x865\" alt=\"å›¾ç‰‡\"></p><p>ä»è¿™å¼ å›¾ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œç½‘ç«™çš„å¤§ä½“æ¶æ„æ˜¯æ²¡æœ‰å˜åŒ–çš„ï¼Œæ¯•ç«Ÿåº”ç”¨è¿˜æ˜¯é‚£ä¸‰ä¸ªï¼Œå®ƒä»¬çš„è°ƒç”¨ä¾èµ–å…³ç³»ä¹Ÿå¿…ç„¶æ²¡æœ‰å˜åŒ–ã€‚</p><p>é‚£ä¹ˆKubernetesç³»ç»Ÿå’ŒDockerç³»ç»Ÿçš„åŒºåˆ«åˆåœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><p>å…³é”®å°±åœ¨<strong>å¯¹åº”ç”¨çš„å°è£…</strong>å’Œ<strong>ç½‘ç»œç¯å¢ƒ</strong>è¿™ä¸¤ç‚¹ä¸Šã€‚</p><p>ç°åœ¨WordPressã€MariaDBè¿™ä¸¤ä¸ªåº”ç”¨è¢«å°è£…æˆäº†Podï¼ˆç”±äºå®ƒä»¬éƒ½æ˜¯åœ¨çº¿ä¸šåŠ¡ï¼Œæ‰€ä»¥Job/CronJobåœ¨è¿™é‡Œæ´¾ä¸ä¸Šç”¨åœºï¼‰ï¼Œè¿è¡Œæ‰€éœ€çš„ç¯å¢ƒå˜é‡ä¹Ÿéƒ½è¢«æ”¹å†™æˆConfigMapï¼Œç»Ÿä¸€ç”¨â€œå£°æ˜å¼â€æ¥ç®¡ç†ï¼Œæ¯”èµ·Shellè„šæœ¬æ›´å®¹æ˜“é˜…è¯»å’Œç‰ˆæœ¬åŒ–ç®¡ç†ã€‚</p><p>å¦å¤–ï¼ŒKubernetesé›†ç¾¤åœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªè‡ªå·±çš„ä¸“ç”¨ç½‘ç»œï¼Œè¿™ä¸ªç½‘ç»œå’Œå¤–ç•Œéš”ç¦»ï¼Œè¦ç”¨ç‰¹æ®Šçš„â€œç«¯å£è½¬å‘â€æ–¹å¼æ¥ä¼ é€’æ•°æ®ï¼Œè¿˜éœ€è¦åœ¨é›†ç¾¤ä¹‹å¤–ç”¨Nginxåå‘ä»£ç†è¿™ä¸ªåœ°å€ï¼Œè¿™æ ·æ‰èƒ½å®ç°å†…å¤–æ²Ÿé€šï¼Œå¯¹æ¯”Dockerçš„ç›´æ¥ç«¯å£æ˜ å°„ï¼Œè¿™é‡Œç•¥å¾®éº»çƒ¦äº†ä¸€äº›ã€‚</p><h2>WordPressç½‘ç«™æ­å»ºæ­¥éª¤</h2><p>äº†è§£åŸºæœ¬æ¶æ„ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é€æ­¥æ­å»ºè¿™ä¸ªç½‘ç«™ç³»ç»Ÿï¼Œæ€»å…±éœ€è¦4æ­¥ã€‚</p><p><strong>ç¬¬ä¸€æ­¥</strong>å½“ç„¶æ˜¯è¦ç¼–æ’MariaDBå¯¹è±¡ï¼Œå®ƒçš„å…·ä½“è¿è¡Œéœ€æ±‚å¯ä»¥å‚è€ƒâ€œå…¥é—¨ç¯‡â€çš„å®æˆ˜æ¼”ç»ƒè¯¾ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†é‡å¤äº†ã€‚</p><p>MariaDBéœ€è¦4ä¸ªç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚æ•°æ®åº“åã€ç”¨æˆ·åã€å¯†ç ç­‰ï¼Œåœ¨Dockeré‡Œæˆ‘ä»¬æ˜¯åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨å‚æ•° <code>--env</code>ï¼Œè€Œåœ¨Kubernetesé‡Œæˆ‘ä»¬å°±åº”è¯¥ä½¿ç”¨ConfigMapï¼Œä¸ºæ­¤éœ€è¦å®šä¹‰ä¸€ä¸ª <code>maria-cm</code> å¯¹è±¡ï¼š</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: ConfigMap\nmetadata:\n&nbsp; name: maria-cm\n\ndata:\n&nbsp; DATABASE: 'db'\n&nbsp; USER: 'wp'\n&nbsp; PASSWORD: '123'\n&nbsp; ROOT_PASSWORD: '123'\n</code></pre><p>ç„¶åæˆ‘ä»¬å®šä¹‰Podå¯¹è±¡ <code>maria-pod</code>ï¼ŒæŠŠé…ç½®ä¿¡æ¯æ³¨å…¥Podï¼Œè®©MariaDBè¿è¡Œæ—¶ä»ç¯å¢ƒå˜é‡è¯»å–è¿™äº›ä¿¡æ¯ï¼š</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: Pod\nmetadata:\n&nbsp; name: maria-pod\n&nbsp; labels:\n&nbsp; &nbsp; app: wordpress\n&nbsp; &nbsp; role: database\n\nspec:\n&nbsp; containers:\n&nbsp; - image: mariadb:10\n&nbsp; &nbsp; name: maria\n&nbsp; &nbsp; imagePullPolicy: IfNotPresent\n&nbsp; &nbsp; ports:\n&nbsp; &nbsp; - containerPort: 3306\n\n&nbsp; &nbsp; envFrom:\n&nbsp; &nbsp; - prefix: 'MARIADB_'\n&nbsp; &nbsp; &nbsp; configMapRef:\n&nbsp; &nbsp; &nbsp; &nbsp; name: maria-cm\n</code></pre><p>æ³¨æ„è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªæ–°çš„å­—æ®µâ€œ<strong>envFrom</strong>â€ï¼Œè¿™æ˜¯å› ä¸ºConfigMapé‡Œçš„ä¿¡æ¯æ¯”è¾ƒå¤šï¼Œå¦‚æœç”¨ <code>env.valueFrom</code> ä¸€ä¸ªä¸ªåœ°å†™ä¼šéå¸¸éº»çƒ¦ï¼Œå®¹æ˜“å‡ºé”™ï¼Œè€Œ <code>envFrom</code> å¯ä»¥ä¸€æ¬¡æ€§åœ°æŠŠConfigMapé‡Œçš„å­—æ®µå…¨å¯¼å…¥è¿›Podï¼Œå¹¶ä¸”èƒ½å¤ŸæŒ‡å®šå˜é‡åçš„å‰ç¼€ï¼ˆå³è¿™é‡Œçš„ <code>MARIADB_</code>ï¼‰ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><p>ä½¿ç”¨ <code>kubectl apply</code> åˆ›å»ºè¿™ä¸ªå¯¹è±¡ä¹‹åï¼Œå¯ä»¥ç”¨ <code>kubectl get pod</code> æŸ¥çœ‹å®ƒçš„çŠ¶æ€ï¼Œå¦‚æœæƒ³è¦è·å–IPåœ°å€éœ€è¦åŠ ä¸Šå‚æ•° <code>-o wide</code> ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f mariadb-pod.yml\nkubectl get pod -o wide\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/3f/98/3fb0242f97c782f79ecf8ba845c81798.png?wh=1788x362\" alt=\"å›¾ç‰‡\"></p><p>ç°åœ¨æ•°æ®åº“å°±æˆåŠŸåœ°åœ¨Kubernetesé›†ç¾¤é‡Œè·‘èµ·æ¥äº†ï¼ŒIPåœ°å€æ˜¯â€œ172.17.0.2â€ï¼Œæ³¨æ„è¿™ä¸ªåœ°å€å’ŒDockerçš„ä¸åŒï¼Œæ˜¯Kubernetesé‡Œçš„ç§æœ‰ç½‘æ®µã€‚</p><p>æ¥ç€æ˜¯<strong>ç¬¬äºŒæ­¥</strong>ï¼Œç¼–æ’WordPresså¯¹è±¡ï¼Œè¿˜æ˜¯å…ˆç”¨ConfigMapå®šä¹‰å®ƒçš„ç¯å¢ƒå˜é‡ï¼š</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: ConfigMap\nmetadata:\n&nbsp; name: wp-cm\n\ndata:\n&nbsp; HOST: '172.17.0.2'\n&nbsp; USER: 'wp'\n&nbsp; PASSWORD: '123'\n&nbsp; NAME: 'db'\n</code></pre><p>åœ¨è¿™ä¸ªConfigMapé‡Œè¦æ³¨æ„çš„æ˜¯â€œHOSTâ€å­—æ®µï¼Œå®ƒå¿…é¡»æ˜¯MariaDB Podçš„IPåœ°å€ï¼Œå¦‚æœä¸å†™æ­£ç¡®WordPressä¼šæ— æ³•æ­£å¸¸è¿æ¥æ•°æ®åº“ã€‚</p><p>ç„¶åæˆ‘ä»¬å†ç¼–å†™WordPressçš„YAMLæ–‡ä»¶ï¼Œä¸ºäº†ç®€åŒ–ç¯å¢ƒå˜é‡çš„è®¾ç½®åŒæ ·ä½¿ç”¨äº† <code>envFrom</code>ï¼š</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: Pod\nmetadata:\n&nbsp; name: wp-pod\n&nbsp; labels:\n&nbsp; &nbsp; app: wordpress\n&nbsp; &nbsp; role: website\n\nspec:\n&nbsp; containers:\n&nbsp; - image: wordpress:5\n&nbsp; &nbsp; name: wp-pod\n&nbsp; &nbsp; imagePullPolicy: IfNotPresent\n&nbsp; &nbsp; ports:\n&nbsp; &nbsp; - containerPort: 80\n\n&nbsp; &nbsp; envFrom:\n&nbsp; &nbsp; - prefix: 'WORDPRESS_DB_'\n&nbsp; &nbsp; &nbsp; configMapRef:\n&nbsp; &nbsp; &nbsp; &nbsp; name: wp-cm\n</code></pre><p>æ¥ç€è¿˜æ˜¯ç”¨ <code>kubectl apply</code> åˆ›å»ºå¯¹è±¡ï¼Œ<code>kubectl get pod</code> æŸ¥çœ‹å®ƒçš„çŠ¶æ€ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f wp-pod.yml\nkubectl get pod -o wide\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/d5/de/d5e8c09e70e90179d651bf3c28abc0de.png?wh=1562x426\" alt=\"å›¾ç‰‡\"></p><p><strong>ç¬¬ä¸‰æ­¥</strong>æ˜¯ä¸ºWordPress Podæ˜ å°„ç«¯å£å·ï¼Œè®©å®ƒåœ¨é›†ç¾¤å¤–å¯è§ã€‚</p><p>å› ä¸ºPodéƒ½æ˜¯è¿è¡Œåœ¨Kuberneteså†…éƒ¨çš„ç§æœ‰ç½‘æ®µé‡Œçš„ï¼Œå¤–ç•Œæ— æ³•ç›´æ¥è®¿é—®ï¼Œæƒ³è¦å¯¹å¤–æš´éœ²æœåŠ¡ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„ <code>kubectl port-forward</code> å‘½ä»¤ï¼Œå®ƒä¸“é—¨è´Ÿè´£æŠŠæœ¬æœºçš„ç«¯å£æ˜ å°„åˆ°åœ¨ç›®æ ‡å¯¹è±¡çš„ç«¯å£å·ï¼Œæœ‰ç‚¹ç±»ä¼¼Dockerçš„å‚æ•° <code>-p</code>ï¼Œç»å¸¸ç”¨äºKubernetesçš„ä¸´æ—¶è°ƒè¯•å’Œæµ‹è¯•ã€‚</p><p>ä¸‹é¢æˆ‘å°±æŠŠæœ¬åœ°çš„â€œ8080â€æ˜ å°„åˆ°WordPress Podçš„â€œ80â€ï¼Œkubectlä¼šæŠŠè¿™ä¸ªç«¯å£çš„æ‰€æœ‰æ•°æ®éƒ½è½¬å‘ç»™é›†ç¾¤å†…éƒ¨çš„Podï¼š</p><pre><code class=\"language-plain\">kubectl port-forward wp-pod 8080:80 &amp;\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/d4/be/d445d205ae6f8c966200ffa9ba7f29be.png?wh=1366x240\" alt=\"å›¾ç‰‡\"></p><p>æ³¨æ„åœ¨å‘½ä»¤çš„æœ«å°¾æˆ‘ä½¿ç”¨äº†ä¸€ä¸ª <code>&amp;</code> ç¬¦å·ï¼Œè®©ç«¯å£è½¬å‘å·¥ä½œåœ¨åå°è¿›è¡Œï¼Œè¿™æ ·å°±ä¸ä¼šé˜»ç¢æˆ‘ä»¬åç»­çš„æ“ä½œã€‚</p><p>å¦‚æœæƒ³å…³é—­ç«¯å£è½¬å‘ï¼Œéœ€è¦æ•²å‘½ä»¤ <code>fg</code> ï¼Œå®ƒä¼šæŠŠåå°çš„ä»»åŠ¡å¸¦å›åˆ°å‰å°ï¼Œç„¶åå°±å¯ä»¥ç®€å•åœ°ç”¨â€œCtrl + Câ€æ¥åœæ­¢è½¬å‘äº†ã€‚</p><p><strong>ç¬¬å››æ­¥</strong>æ˜¯åˆ›å»ºåå‘ä»£ç†çš„Nginxï¼Œè®©æˆ‘ä»¬çš„ç½‘ç«™å¯¹å¤–æä¾›æœåŠ¡ã€‚</p><p>è¿™æ˜¯å› ä¸ºWordPressç½‘ç«™ä½¿ç”¨äº†URLé‡å®šå‘ï¼Œç›´æ¥ä½¿ç”¨â€œ8080â€ä¼šå¯¼è‡´è·³è½¬æ•…éšœï¼Œæ‰€ä»¥ä¸ºäº†è®©ç½‘ç«™æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬è¿˜åº”è¯¥åœ¨Kubernetesä¹‹å¤–å¯åŠ¨Nginxåå‘ä»£ç†ï¼Œä¿è¯å¤–ç•Œçœ‹åˆ°çš„ä»ç„¶æ˜¯â€œ80â€ç«¯å£å·ã€‚ï¼ˆè¿™é‡Œçš„ç»†èŠ‚å’Œæˆ‘ä»¬çš„è¯¾ç¨‹å…³ç³»ä¸å¤§ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç•™è¨€æé—®è®¨è®ºï¼‰</p><p>Nginxçš„é…ç½®æ–‡ä»¶å’Œ<a href=\"https://time.geekbang.org/column/article/528740\">ç¬¬7è®²</a>åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯ç›®æ ‡åœ°å€å˜æˆäº†â€œ127.0.0.1:8080â€ï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥é‡Œç”¨ <code>kubectl port-forward</code> å‘½ä»¤åˆ›å»ºçš„æœ¬åœ°åœ°å€ï¼š</p><pre><code class=\"language-plain\">server {\n&nbsp; listen 80;\n&nbsp; default_type text/html;\n\n&nbsp; location / {\n&nbsp; &nbsp; &nbsp; proxy_http_version 1.1;\n&nbsp; &nbsp; &nbsp; proxy_set_header Host $host;\n&nbsp; &nbsp; &nbsp; proxy_pass http://127.0.0.1:8080;\n&nbsp; }\n}\n</code></pre><p>ç„¶åæˆ‘ä»¬ç”¨ <code>docker run -v</code> å‘½ä»¤åŠ è½½è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œä»¥å®¹å™¨çš„æ–¹å¼å¯åŠ¨è¿™ä¸ªNginxä»£ç†ï¼š</p><pre><code class=\"language-plain\">docker run -d --rm \\\n&nbsp; &nbsp; --net=host \\\n&nbsp; &nbsp; -v /tmp/proxy.conf:/etc/nginx/conf.d/default.conf \\\n&nbsp; &nbsp; nginx:alpine\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/9f/51/9f2b16fb58dbe0a358e26042565f9851.png?wh=1920x238\" alt=\"å›¾ç‰‡\"></p><p>æœ‰äº†Nginxçš„åå‘ä»£ç†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥æœ¬æœºçš„â€œ127.0.0.1â€æˆ–è€…æ˜¯è™šæ‹Ÿæœºçš„IPåœ°å€ï¼ˆæˆ‘è¿™é‡Œä»ç„¶æ˜¯â€œ<a href=\"http://192.168.10.208\">http://192.168.10.208</a>â€ï¼‰ï¼Œçœ‹åˆ°WordPressçš„ç•Œé¢ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/73/f4/735552be9cf6d45ac41a001252ayyef4.png?wh=1524x1858\" alt=\"å›¾ç‰‡\"></p><p>ä½ ä¹Ÿå¯ä»¥åœ¨Kubernetesé‡Œä½¿ç”¨å‘½ä»¤ <code>kubectl logs</code> æŸ¥çœ‹WordPressã€MariaDBç­‰Podçš„è¿è¡Œæ—¥å¿—ï¼Œæ¥éªŒè¯å®ƒä»¬æ˜¯å¦å·²ç»æ­£ç¡®åœ°å“åº”äº†è¯·æ±‚ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/84/62/8498c598e6f3142d490218601acdbc62.png?wh=1920x809\" alt=\"å›¾ç‰‡\"></p><h2>ä½¿ç”¨Dashboardç®¡ç†Kubernetes</h2><p>åˆ°è¿™é‡ŒWordPressç½‘ç«™å°±æ­å»ºæˆåŠŸäº†ï¼Œæˆ‘ä»¬çš„ä¸»è¦ä»»åŠ¡ä¹Ÿç®—æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡æˆ‘è¿˜æƒ³å†å¸¦ä½ çœ‹çœ‹Kubernetesçš„å›¾å½¢ç®¡ç†ç•Œé¢ï¼Œä¹Ÿå°±æ˜¯Dashboardï¼Œçœ‹çœ‹ä¸ç”¨å‘½ä»¤è¡Œè¯¥æ€ä¹ˆç®¡ç†Kubernetesã€‚</p><p>å¯åŠ¨Dashboardçš„å‘½ä»¤ä½ è¿˜è®°å¾—å—ï¼Œåœ¨ç¬¬10èŠ‚è¯¾é‡Œè®²æ’ä»¶çš„æ—¶å€™æ›¾ç»è¯´è¿‡ï¼Œéœ€è¦ç”¨minikubeï¼Œå‘½ä»¤æ˜¯ï¼š</p><pre><code class=\"language-plain\">minikube dashboard\n</code></pre><p>å®ƒä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ç•Œé¢ï¼Œæ˜¾ç¤ºå‡ºå½“å‰Kubernetesé›†ç¾¤é‡Œçš„å·¥ä½œè´Ÿè½½ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/53/59/536eeb176a7737c9ed815c10af0fcf59.png?wh=1920x1022\" alt=\"å›¾ç‰‡\"></p><p>ç‚¹å‡»ä»»æ„ä¸€ä¸ªPodçš„åå­—ï¼Œå°±ä¼šè¿›å…¥ç®¡ç†ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°Podçš„è¯¦ç»†ä¿¡æ¯ï¼Œè€Œå³ä¸Šè§’æœ‰4ä¸ªå¾ˆé‡è¦çš„åŠŸèƒ½ï¼Œåˆ†åˆ«å¯ä»¥æŸ¥çœ‹æ—¥å¿—ã€è¿›å…¥Podå†…éƒ¨ã€ç¼–è¾‘Podå’Œåˆ é™¤Podï¼Œç›¸å½“äºæ‰§è¡Œ <code>logs</code>ã€<code>exec</code>ã€<code>edit</code>ã€<code>delete</code> å‘½ä»¤ï¼Œä½†è¦æ¯”å‘½ä»¤è¡Œè¦ç›´è§‚å‹å¥½çš„å¤šï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d5/28/d5e5131bfb1d6aae2f026177bf283628.png?wh=1920x781\" alt=\"å›¾ç‰‡\"></p><p>æ¯”å¦‚è¯´ï¼Œæˆ‘ç‚¹å‡»äº†ç¬¬äºŒä¸ªæŒ‰é’®ï¼Œå°±ä¼šåœ¨æµè§ˆå™¨é‡Œå¼€å¯ä¸€ä¸ªShellçª—å£ï¼Œç›´æ¥å°±æ˜¯Podçš„å†…éƒ¨Linuxç¯å¢ƒï¼Œåœ¨é‡Œé¢å¯ä»¥è¾“å…¥ä»»æ„çš„å‘½ä»¤ï¼Œæ— è®ºæ˜¯æŸ¥çœ‹çŠ¶æ€è¿˜æ˜¯è°ƒè¯•éƒ½å¾ˆæ–¹ä¾¿ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/46/4c/466c67a48616c946505242d0796ed74c.png?wh=1820x1240\" alt=\"å›¾ç‰‡\"></p><p>ConfigMap/Secretç­‰å¯¹è±¡ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œä»»æ„æŸ¥çœ‹æˆ–ç¼–è¾‘ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/de/22/defyybc05ed793b7966e1f6b68018022.png?wh=1312x976\" alt=\"å›¾ç‰‡\"></p><p>Dashboardé‡Œçš„å¯æ“ä½œçš„åœ°æ–¹è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘åªæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä»‹ç»ã€‚è™½ç„¶ä½ ä¹Ÿè®¸å·²ç»ä¹ æƒ¯äº†ä½¿ç”¨é”®ç›˜å’Œå‘½ä»¤è¡Œï¼Œä½†å¶å°”æ¢ä¸€æ¢å£å‘³ï¼Œæ”¹ç”¨é¼ æ ‡å’Œå›¾å½¢ç•Œé¢æ¥ç®¡ç†Kubernetesä¹Ÿæ˜¯ä»¶æŒºæœ‰æ„æ€çš„äº‹æƒ…ï¼Œæœ‰æœºä¼šä¸å¦¨å°è¯•ä¸€ä¸‹ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä½œä¸ºâ€œåˆçº§ç¯‡â€çš„æœ€åä¸€èŠ‚è¯¾ï¼Œä»Šå¤©æˆ‘ä»¬å›é¡¾äº†ä¸€ä¸‹Kubernetesçš„çŸ¥è¯†è¦ç‚¹ï¼Œæˆ‘è¿˜æ˜¯ç”»ä¸€ä»½è¯¦ç»†çš„æ€ç»´å¯¼å›¾ï¼Œå¸®åŠ©ä½ è¯¾åéšæ—¶å¤ä¹ æ€»ç»“ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/87/1f/87a1d338340c8ca771a97d0fyy4b611f.jpg?wh=1920x1877\" alt=\"å›¾ç‰‡\"></p><p>è¿™èŠ‚è¯¾é‡Œæˆ‘ä»¬ä½¿ç”¨Kubernetesæ­å»ºäº†WordPressç½‘ç«™ï¼Œå’Œç¬¬7è®²é‡Œçš„Dockeræ¯”è¾ƒèµ·æ¥ï¼Œæˆ‘ä»¬åº”ç”¨äº†å®¹å™¨ç¼–æ’æŠ€æœ¯ï¼Œä»¥â€œå£°æ˜å¼â€çš„YAMLæ¥æè¿°åº”ç”¨çš„çŠ¶æ€å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œè€Œä¸ä¼šåˆ—å‡ºè¯¦ç»†çš„æ“ä½œæ­¥éª¤ï¼Œè¿™å°±é™ä½äº†æˆ‘ä»¬çš„å¿ƒæ™ºè´Ÿæ‹…â€”â€”è°ƒåº¦ã€åˆ›å»ºã€ç›‘æ§ç­‰æ‚äº‹éƒ½äº¤ç»™Kuberneteså¤„ç†ï¼Œæˆ‘ä»¬åªéœ€â€œåäº«å…¶æˆâ€ã€‚</p><p>è™½ç„¶æˆ‘ä»¬æœç€äº‘åŸç”Ÿçš„æ–¹å‘è¿ˆå‡ºäº†ä¸€å¤§æ­¥ï¼Œä¸è¿‡ç°åœ¨æˆ‘ä»¬çš„å®¹å™¨ç¼–æ’è¿˜ä¸å¤Ÿå®Œå–„ï¼ŒPodçš„IPåœ°å€è¿˜å¿…é¡»æ‰‹å·¥æŸ¥æ‰¾å¡«å†™ï¼Œç¼ºå°‘è‡ªåŠ¨çš„æœåŠ¡å‘ç°æœºåˆ¶ï¼Œå¦å¤–å¯¹å¤–æš´éœ²æœåŠ¡çš„æ–¹å¼è¿˜å¾ˆåŸå§‹ï¼Œå¿…é¡»è¦ä¾èµ–é›†ç¾¤å¤–éƒ¨åŠ›é‡çš„å¸®åŠ©ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„å­¦ä¹ ä¹‹æ—…è¿˜å°†ç»§ç»­ï¼Œåœ¨æ¥ä¸‹æ¥çš„â€œä¸­çº§ç¯‡â€é‡Œï¼Œä¼šå¼€å§‹ç ”ç©¶æ›´å¤šçš„APIå¯¹è±¡ï¼Œæ¥è§£å†³è¿™é‡Œé‡åˆ°çš„é—®é¢˜ã€‚</p><h2>è¯¾ä¸‹ä½œä¸š</h2><p>æœ€åæ˜¯è¯¾ä¸‹ä½œä¸šæ—¶é—´ï¼Œç»™ä½ ç•™ä¸¤ä¸ªåŠ¨æ‰‹é¢˜ï¼š</p><ol>\n<li>MariaDBã€WordPressç°åœ¨ç”¨çš„æ˜¯ConfigMapï¼Œèƒ½å¦æ”¹ç”¨Secretæ¥å®ç°å‘¢ï¼Ÿ</li>\n<li>ä½ èƒ½å¦æŠŠNginxä»£ç†è½¬æ¢æˆPodçš„å½¢å¼ï¼Œè®©å®ƒåœ¨Kubernetesé‡Œè¿è¡Œå‘¢ï¼Ÿ</li>\n</ol><p>æœŸå¾…èƒ½çœ‹åˆ°ä½ åŠ¨æ‰‹ä½“éªŒåçš„æƒ³æ³•ï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åˆ†äº«ç»™è‡ªå·±èº«è¾¹çš„æœ‹å‹ä¸€èµ·å­¦ä¹ ã€‚</p><p>ä¸‹èŠ‚è¯¾å°±æ˜¯è§†é¢‘æ¼”ç¤ºçš„æ“ä½œè¯¾äº†ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3c/ea/3c3036bc56bb9ec14598342e56c11bea.jpg?wh=1920x1544\" alt=\"å›¾ç‰‡\"></p>","neighbors":{"left":{"article_title":"14ï½œConfigMap/Secretï¼šæ€æ ·é…ç½®ã€å®šåˆ¶æˆ‘çš„åº”ç”¨","id":533395},"right":{"article_title":"16ï½œè§†é¢‘ï¼šåˆçº§ç¯‡å®æ“æ€»ç»“","id":534688}},"comments":[{"had_liked":false,"id":353574,"user_name":"YueShi","can_delete":false,"product_type":"c1","uid":1625530,"ip_address":"ä¸Šæµ·","ucode":"8F7AFAE4641A7D","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","comment_is_top":false,"comment_ctime":1659577594,"is_pvip":true,"replies":[{"id":128556,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659579186,"ip_address":"ä¸Šæµ·","comment_id":353574,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"Macä¸Šæˆ–è€…Windowä¸Šï¼Œå¯èƒ½å‡ºç°è®¿é—®ä¸åˆ°é—®é¢˜ï¼Œè¿™é‡Œå†™äº†ä¸€ç¯‡æ’æŸ¥é—®é¢˜çš„æ€è·¯ï¼ŒæœŸæœ›èƒ½å¸®åˆ°å„ä½è€æ¿\n\nhttps:&#47;&#47;juejin.cn&#47;post&#47;7127679053242302477","like_count":18,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582653,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659579186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582689,"discussion_content":"å…„å¼Ÿï¼Œå¤ªèµäº†ï¼Œè¿™ä¸ªæœ‰ç”¨ï¼Œè§£å†³äº†æˆ‘çš„é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659597855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1140565,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKkfZpMx6JDjRiaa51DWRtncfQOy8Lblia1XkeIsXiccTG1nIKyaSic01H0IXgHM3KPSYJ1x51avblJAg/132","nickname":"Geek_8a0a23","note":"","ucode":"605C1750C59918","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651024,"discussion_content":"ä¼˜ç§€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726069166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1143399,"avatar":"https://static001.geekbang.org/account/avatar/00/11/72/67/aa52812a.jpg","nickname":"stark","note":"","ucode":"ADC5C2AE5B97C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597193,"discussion_content":"è¿™ç¯‡å†™çš„çœŸå¥½ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671521639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2113412,"avatar":"https://static001.geekbang.org/account/avatar/00/20/3f/84/47f7b661.jpg","nickname":"ä½ å¥½æå®¢æ—¶é—´","note":"","ucode":"EC1AE9FD105234","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595847,"discussion_content":"å¥½äººä¸€ç”Ÿå¹³å®‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670404372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2257640,"avatar":"https://static001.geekbang.org/account/avatar/00/22/72/e8/da3c644f.jpg","nickname":"Øå¹¶äº²äº†ä½ ä¸€å¤§å£Øéšé£å»","note":"","ucode":"38E6F3660783D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594179,"discussion_content":"æˆ‘linuxä¹Ÿå‡ºç°äº†è¿™ä¸ªé—®é¢˜ï¼Œ8080èƒ½è®¿é—®ï¼Œ80è®¿é—®ä¸äº†ã€‚ä½†æ˜¯è¿™æ ·æ“ä½œæ²¡è§£å†³ã€‚ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668851806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1610197,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKECIWSbdCJHiavP3MHwUlHsCyzbw1AUvichzuiaIYicxIWEA0s1YDWQopGXPq5O8Oe0jC0utick7EGMCQ/132","nickname":"Geek_062cdc","note":"","ucode":"3D61A8597E3615","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593496,"discussion_content":"docker  hostæ¨¡å¼ä»…æ”¯æŒ linux","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668268759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352502,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1658734051,"is_pvip":false,"replies":[{"id":128222,"content":"YAMLå†™çš„éå¸¸å¥½ï¼Œä¸è¿‡Nginxé…ç½®æ–‡ä»¶é‡Œçš„proxy_passï¼Œåœ°å€ä¸èƒ½æ˜¯127.0.0.1ï¼Œå¿…é¡»æ˜¯WordPress Podçš„åœ°å€ã€‚\n\nè¿˜æœ‰å› ä¸ºNginx podè¿è¡Œåœ¨Kubernetesé‡Œï¼Œæ˜¯ä¸å¤–ç•Œéš”ç¦»çš„ï¼Œå¿…é¡»è¦ç”¨port-forwardå¤–ç•Œæ‰èƒ½çœ‹åˆ°ï¼Œå¯ä»¥å‚è€ƒWordPressçš„åšæ³•ã€‚\n\nä½†è¿™æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œåˆ°ä¸­çº§ç¯‡æˆ‘ä»¬å­¦ä¹ äº†Serviceã€Ingresså°±èƒ½å¤Ÿè½»æ¾è§£å†³äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1181974,"ctime":1658789352,"ip_address":"","comment_id":352502,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"æ€è€ƒé¢˜ 2ï¼Œ\n\nè¯•ç€å†™å‡ºäº† Pod çš„ YAML æ–‡ä»¶\n\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: ngx-cm\n\ndata:\n  default.conf: |-\n    server {\n      listen 80;\n      default_type text&#47;html;\n\n      location &#47; {\n        proxy_http_version 1.1;\n        proxy_set_header Host $host;\n        proxy_pass http:&#47;&#47;127.0.0.1:8080;\n      }\n    }\n\n---\n\napiVersion: v1\nkind: Pod\nmetadata:\n  name: ngx-pod\n  labels:\n    app: nginx-alpine\n    role: website\n\nspec:\n  volumes:\n    - name: conf\n      configMap:\n        name: ngx-cm\n\n  containers:\n  - volumeMounts:\n    - mountPath: &#47;etc&#47;nginx&#47;conf.d&#47;\n      name: conf\n\n    image: nginx:alpine\n    name: ngx-pod\n    imagePullPolicy: IfNotPresent\n    ports:\n    - containerPort: 80\n\nå¯ä»¥æˆåŠŸåˆ›å»º Podï¼Œnginx çš„é…ç½®æ–‡ä»¶ä¹Ÿè¢«æŒ‚è½½åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œä½†æ˜¯æµè§ˆå™¨è¿˜æ˜¯æ— æ³•è®¿é—® wordpressï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘çš„ YAML æ–‡ä»¶ä¸­å°‘äº†ä»€ä¹ˆğŸ¤”ï¼Œè¿˜æœ›è€å¸ˆæŒ‡ç‚¹","like_count":18,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581427,"discussion_content":"YAMLå†™çš„éå¸¸å¥½ï¼Œä¸è¿‡Nginxé…ç½®æ–‡ä»¶é‡Œçš„proxy_passï¼Œåœ°å€ä¸èƒ½æ˜¯127.0.0.1ï¼Œå¿…é¡»æ˜¯WordPress Podçš„åœ°å€ã€‚\n\nè¿˜æœ‰å› ä¸ºNginx podè¿è¡Œåœ¨Kubernetesé‡Œï¼Œæ˜¯ä¸å¤–ç•Œéš”ç¦»çš„ï¼Œå¿…é¡»è¦ç”¨port-forwardå¤–ç•Œæ‰èƒ½çœ‹åˆ°ï¼Œå¯ä»¥å‚è€ƒWordPressçš„åšæ³•ã€‚\n\nä½†è¿™æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œåˆ°ä¸­çº§ç¯‡æˆ‘ä»¬å­¦ä¹ äº†Serviceã€Ingresså°±èƒ½å¤Ÿè½»æ¾è§£å†³äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658789353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":581735,"discussion_content":"è€å¸ˆèƒ½è®²ä¸€è®²è¿™é‡Œå¦‚æœå¯¹ Nginx Pod ç”¨ port-forwardï¼Œè¯¥æ€ä¹ˆå®šä¹‰ç«¯å£å’Œ Nginx é…ç½®å—ï¼Ÿ\n\nè¿™é‡Œæˆ‘ä¿æŒå…¶ä»– Pod ä»¥åŠ default.conf ä¸å˜ï¼Œç„¶åä½¿ç”¨\n\nkubectl port-forward ngx-pod 8081:80 &amp;\n\nåœ¨ Mac æµè§ˆå™¨ç«¯ç”¨è™šæ‹Ÿæœºåœ°å€åŠ ç«¯å£å· http://172.16.35.128:8081ï¼Œä½†æ˜¯è¿˜æ˜¯æ˜¾ç¤º â€œThis site canâ€™t be reachedâ€ï¼Œæ— æ³•è®¿é—®\n\nä¸çŸ¥é“æ˜¯ä¸æ˜¯å“ªä¸€æ­¥åšé”™äº†ï¼Œè°¢è°¢è€å¸ˆ ğŸ™","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658962234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":581427,"ip_address":"","group_id":0},"score":581735,"extra":""},{"author":{"id":1800818,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7a/72/a86c521e.jpg","nickname":"å…­æœˆ","note":"","ucode":"D94CD05F648A7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583377,"discussion_content":"ç†è®ºä¸Šå¯ä»¥ç”¨å®¹å™¨åä»£æ›¿ipï¼Œdockerå°±å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660060806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":581735,"ip_address":"å¹¿ä¸œ","group_id":0},"score":583377,"extra":""}]}]},{"had_liked":false,"id":352931,"user_name":"æœ±é›¯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"é™•è¥¿","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1659021891,"is_pvip":false,"replies":[{"id":128328,"content":"Kubernetesé¢å¯¹çš„æ˜¯å¤§è§„æ¨¡é›†ç¾¤ï¼Œå…¶å®è¿™äº›éƒ½æ˜¯å¯ä»¥ç”¨ci&#47;cdè‡ªåŠ¨åŒ–çš„ï¼Œæˆ‘ä»¬ç°åœ¨çš„å­¦ä¹ æ˜¯ä»åº•å±‚åšèµ·å…¨æ‰‹åŠ¨æ“ä½œï¼Œå½“ç„¶ä¼šéº»çƒ¦ä¸€äº›ï¼Œåˆ°åé¢ä¼šæœ‰æ›´é«˜çº§çš„å¯¹è±¡ï¼Œæ¯”å¦‚Deploymentã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659062313,"ip_address":"é™•è¥¿","comment_id":352931,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"å­¦äº†è¿™ä¸€èŠ‚ï¼Œæ²¡æ„Ÿè§‰åˆ°å®¹å™¨ç¼–æ’çš„å¥½ç”¨ï¼Œåè€Œé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨é…ç½®ä¸­ï¼Œæˆ‘æŠŠwordpressé“¾æ¥æ•°æ®åº“çš„hostç»™å°å†™äº†ï¼Œç»“æœä¸€ç›´å‘Šè¯‰æˆ‘é“¾æ¥æ•°æ®åº“å¤±è´¥ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ’æŸ¥æ‰‹æ®µï¼Œä¸€ç›´å¤±è´¥ï¼Œæˆ‘æƒ³çš„æ˜¯ï¼Œè¿™ä¸ªk8sçš„éƒ¨ç½²æ­¥éª¤å®åœ¨æ˜¯å¤ªå¤æ‚äº†ï¼Œå¤æ‚åˆ°é…ç½®éœ€è¦ä¸€ä¸ªyamlï¼Œå®¹å™¨éœ€è¦ä¸€ä¸ªyamlï¼Œport-forwardä¹Ÿéœ€è¦ä¸€ä¸ªyamlï¼Œæˆ‘æƒ³å¦‚æœæ˜¯dockerç›´æ¥éƒ¨ç½²ï¼Œå…¶å®å°±éœ€è¦ä¸¤æ¡å‘½ä»¤ï¼Œæ‰€æœ‰å‚æ•°éƒ½æ”¾åˆ°envä¸­ï¼Œæˆ–è€…æ”¾åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œä¹Ÿæ¯”æ£€æŸ¥yamlæ–‡ä»¶å¼ºï¼Œåœ¨å…¥é—¨ç¯‡ä¸­æ²¡æ„Ÿå—åˆ°k8sçš„å¥½ç”¨ï¼Œåªæ„Ÿè§‰åˆ°çç¢ï¼Œæ˜¯å› ä¸ºæœåŠ¡å¤ªå°ï¼Œè¿˜æ˜¯å› ä¸ºæ²¡ç”¨å¥½çš„åŸå› å‘¢\n","like_count":11,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581894,"discussion_content":"Kubernetesé¢å¯¹çš„æ˜¯å¤§è§„æ¨¡é›†ç¾¤ï¼Œå…¶å®è¿™äº›éƒ½æ˜¯å¯ä»¥ç”¨ci/cdè‡ªåŠ¨åŒ–çš„ï¼Œæˆ‘ä»¬ç°åœ¨çš„å­¦ä¹ æ˜¯ä»åº•å±‚åšèµ·å…¨æ‰‹åŠ¨æ“ä½œï¼Œå½“ç„¶ä¼šéº»çƒ¦ä¸€äº›ï¼Œåˆ°åé¢ä¼šæœ‰æ›´é«˜çº§çš„å¯¹è±¡ï¼Œæ¯”å¦‚Deploymentã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659062313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354353,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"åŒ—äº¬","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1660295236,"is_pvip":false,"replies":[{"id":128888,"content":"awesomeï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660306997,"ip_address":"åŒ—äº¬","comment_id":354353,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"å†™ä¸€ä¸‹ç¬¬2é¢˜å§è§£é¢˜æ­¥éª¤ï¼š\né¦–å…ˆå¦‚æœæˆ‘ä»¬æŠŠdocker å½¢å¼æ”¹æˆpodå½¢å¼è¿™é‡Œå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼ˆ1ï¼‰ç½‘ç»œé—®é¢˜ï¼Œï¼ˆ2ï¼‰nginxé…ç½®æ–‡ä»¶åŠ è½½é—®é¢˜ï¼Œ\nç¬¬ä¸€ä¸ªé—®é¢˜k8sçš„æ’ä»¶ä¼šå¤„ç†èŠ‚ç‚¹å†…ä»¥åŠèŠ‚ç‚¹é—´ç½‘ç»œé€šä¿¡é—®é¢˜ï¼Œè¿™ä¸ªæˆ‘ä»¬è¿™é‡Œæš‚æ—¶ä¸éœ€è¦è€ƒè™‘ï¼Œ\né‚£ä¹ˆéœ€è¦æˆ‘ä»¬å¤„ç†çš„å°±æ˜¯é…ç½®æ–‡ä»¶é—®é¢˜ï¼šè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šä¸ªæ–¹æ³•å¤„ç†\n   a: podæŒ‚è½½å®¿ä¸»æœºç›®å½•ï¼ŒæŠŠé…ç½®æ–‡ä»¶æ”¾åˆ°å®¿ä¸»æœºç›®å½•ä¸‹ï¼Œå®¹å™¨å¯åŠ¨æŒ‚è½½\n   b: ä½¿ç”¨æˆ‘ä»¬å­¦è¿‡çš„configMap\n   cï¼šä½¿ç”¨pvã€pvc è¿™ä¸ªåé¢è€å¸ˆåº”è¯¥ä¼šè®²åˆ°\nè¿™é‡Œæˆ‘é—¨å°±ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œä¹Ÿæ˜¯è¯„è®ºé‡Œä½¿ç”¨æœ€å¤šçš„æ–¹æ³•ï¼š\nymlæ–‡ä»¶å¦‚ä¸‹ï¼š\n    ngx-cm.yml\n\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: ngx-cm\ndata:\n  nginx.conf: |\n    server {\n      listen 8080;\n      #default_type text&#47;html;\n\n      location &#47; {\n        proxy_http_version 1.1;\n        proxy_set_header Host $host;\n        proxy_pass http:&#47;&#47;172.17.0.9:80;\n      }\n    }\n\nnginx.yml:\n\napiVersion: v1\nkind: Pod\nmetadata:\n  name: ngx-pod\n  labels:\n    env: demo\n    owner: ant\n\nspec:\n  volumes:\n    - name: nginx-conf\n      configMap:\n        name: ngx-cm\n        items:\n        - key: nginx.conf\n          path: default.conf\n  containers:\n  - image: nginx:alpine\n    name: ngx\n    volumeMounts:\n      - name: nginx-conf\n        mountPath: &#47;etc&#47;nginx&#47;conf.d\n    ports:\n    - containerPort: 8080\n\nç„¶åä½¿ç”¨ kubectl apply -f nginx.yml åˆ›å»ºpodï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ç”±äºk8sèŠ‚ç‚¹è¿˜æ˜¯ä¸€ä¸ªéš”ç¦»ç¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯æ— æ³•è®¿é—®ï¼Œ\næ‰€ä»¥æˆ‘ä»¬è¦åœ¨ç½‘é¡µè§‚å¯Ÿåˆ°å…·ä½“çš„ç½‘é¡µå†…å®¹ï¼Œè¿˜æ˜¯è¦å†ç”¨dockeråˆ›å»ºä¸€å±‚nginxä»£ç†ï¼Œserver å†…å®¹å¦‚ä¸‹ï¼š\nserver {\n  listen 80;\n  default_type text&#47;html;\n\n  location &#47; {\n      proxy_http_version 1.1;\n      proxy_set_header Host $host;\n      proxy_pass http:&#47;&#47;127.0.0.1:8888;\n  }\n}\n\nä½¿ç”¨ docker run -d --rm --net=host -v &#47;home&#47;ant&#47;kubernetes&#47;pod&#47;nginx-conf&#47;nginx.conf:&#47;etc&#47;nginx&#47;conf.d&#47;default.conf nginx:alpine\nå¯åŠ¨ï¼Œ\nç„¶åä½¿ç”¨ kubectl port-forward ngx-pod 8888:8080 &amp; åšè½¬å‘\n\nè®¿é—® http:&#47;&#47;192.168.56.208&#47; æ­£å¸¸è®¿é—®","like_count":9,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583714,"discussion_content":"awesomeï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660306997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1140565,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKkfZpMx6JDjRiaa51DWRtncfQOy8Lblia1XkeIsXiccTG1nIKyaSic01H0IXgHM3KPSYJ1x51avblJAg/132","nickname":"Geek_8a0a23","note":"","ucode":"605C1750C59918","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":642613,"discussion_content":"æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥ä¸ç”¨nginxåå‘ä»£ç† ç›´æ¥æš´éœ²k8sçš„80ç«¯å£ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1713697356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3231579,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/tjZDHOybO07lltibjmDiaQKdpE1C3ul9c9wmUWwnVohS5fSEOPcfK2d9ZvKEHu6ibMLXYNUSrA23w08Ty5MFYMfzA/132","nickname":"Geek_ec6229","note":"","ucode":"24DF2FDA6BCE13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599169,"discussion_content":"è¯·é—®ï¼šåŒä¸ªé›†ç¾¤èŠ‚ç‚¹å†…ï¼Œpodä¹‹é—´æ˜¯å¯ä»¥äº’ç›¸è®¿é—®å¾—é€šçš„æ˜¯å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673364855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"é©¬ä»¥","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":3231579,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/tjZDHOybO07lltibjmDiaQKdpE1C3ul9c9wmUWwnVohS5fSEOPcfK2d9ZvKEHu6ibMLXYNUSrA23w08Ty5MFYMfzA/132","nickname":"Geek_ec6229","note":"","ucode":"24DF2FDA6BCE13","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599234,"discussion_content":"k8sæœ‰ä¸“é—¨çš„ç½‘ç»œç»„ä»¶åšè¿™ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673416812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599169,"ip_address":"å¹¿ä¸œ","group_id":0},"score":599234,"extra":""},{"author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"é©¬ä»¥","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":3231579,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/tjZDHOybO07lltibjmDiaQKdpE1C3ul9c9wmUWwnVohS5fSEOPcfK2d9ZvKEHu6ibMLXYNUSrA23w08Ty5MFYMfzA/132","nickname":"Geek_ec6229","note":"","ucode":"24DF2FDA6BCE13","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599237,"discussion_content":"åŒä¸€ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰å†…éƒ¨çš„podé—´é€šä¿¡å…¶å®å°±æ˜¯åˆ©ç”¨ç½‘æ¡¥ï¼ˆäº¤æ¢æœºï¼‰è”é€šå„ä¸ªpodèŠ‚ç‚¹ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨dockeréƒ¨ç½²ï¼Œè¿™ä¸ªäº¤æ¢æœºé€šå¸¸æ˜¯docker0è¿™ä¸ªäº¤æ¢æœºï¼Œç„¶åé€šè¿‡vethï¼ˆå¯ä»¥æŠŠä»–å½“ä½œä¸€æ ¹ç½‘çº¿ï¼‰è¿æ¥podå’Œdocker0ï¼Œè¿™æ ·podé—´å°±å¯ä»¥é€šä¿¡äº†ï¼›\nè¿˜æœ‰å¦å¤–ä¸€ç§æƒ…å†µå°±æ˜¯ä¸åŒnodeèŠ‚ç‚¹çš„podé€šä¿¡ï¼Œè¿™å°±æ¶‰åŠåˆ°è·¨ä¸»é€šä¿¡äº†ï¼Œéœ€è¦ç”¨åˆ°å…¶å®ƒçš„ç»„ä»¶ï¼Œæ¯”å¦‚flannelã€weaveå’Œcalicoï¼Œè‡ªå·±å¯ä»¥ç”¨weaveåšå®éªŒå¾ˆæ–¹ä¾¿ï¼Œæœ‰å…´è¶£å¯ä»¥å»äº†è§£ä¸€ä¸‹å…·ä½“çš„åŸç†ï¼›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1673418458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599169,"ip_address":"å¹¿ä¸œ","group_id":0},"score":599237,"extra":""}]},{"author":{"id":3183263,"avatar":"https://static001.geekbang.org/account/avatar/00/30/92/9f/d5255fe8.jpg","nickname":"snake","note":"","ucode":"0C7398D3A68119","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596043,"discussion_content":"å¤–å±‚è¿˜è¦ç”¨dockerçš„Nginxå»è½¬å‘åˆ°podé‡Œé¢çš„Nginxï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670575927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"é©¬ä»¥","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":3183263,"avatar":"https://static001.geekbang.org/account/avatar/00/30/92/9f/d5255fe8.jpg","nickname":"snake","note":"","ucode":"0C7398D3A68119","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596164,"discussion_content":"ç±»ä¼¼ingressçš„åŠŸèƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670731097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":596043,"ip_address":"å¹¿ä¸œ","group_id":0},"score":596164,"extra":""}]}]},{"had_liked":false,"id":352463,"user_name":"æ¤°å­","can_delete":false,"product_type":"c1","uid":2278399,"ip_address":"","ucode":"CD9A5C5496AD62","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKQuaDVYz2jWN9vrmgbB785SNkmYmxf1xzEG8m8ku3ZvzYSkiaanTjqt7O47ficOQUpGmEy7eImplDw/132","comment_is_top":false,"comment_ctime":1658712107,"is_pvip":false,"replies":[{"id":128200,"content":"æ˜¯çš„ï¼Œä¼šå˜åŒ–ï¼Œåˆ°åé¢çš„ä¸­çº§ç¯‡ä¼šç”¨Serviceå¯¹è±¡æ¥è§£å†³ï¼Œè¿™é‡Œæ˜¯ä»dockeråˆ°Kubernetesçš„ä¸€ä¸ªè¿‡æ¸¡é˜¶æ®µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1658716349,"ip_address":"","comment_id":352463,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œç›®å‰Podé…ç½®ä¸­ä½¿ç”¨äº†å›ºå®šIPã€‚å¦‚æœpodè¢«é‡å¯äº†ï¼Œip æ˜¯å¦ä¼šå˜åŒ–ï¼Ÿå¦‚æœæœ‰å˜åŒ–ï¼Œè¿™æ ·é…ç½®æ˜¯å¦æœ‰ç‚¹ä¸åˆç†ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581298,"discussion_content":"æ˜¯çš„ï¼Œä¼šå˜åŒ–ï¼Œåˆ°åé¢çš„ä¸­çº§ç¯‡ä¼šç”¨Serviceå¯¹è±¡æ¥è§£å†³ï¼Œè¿™é‡Œæ˜¯ä»dockeråˆ°Kubernetesçš„ä¸€ä¸ªè¿‡æ¸¡é˜¶æ®µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658716349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353592,"user_name":"wcy","can_delete":false,"product_type":"c1","uid":1316071,"ip_address":"åŒ—äº¬","ucode":"E401E6C6D24032","user_header":"https://static001.geekbang.org/account/avatar/00/14/14/e7/c534fab3.jpg","comment_is_top":false,"comment_ctime":1659584555,"is_pvip":false,"replies":[{"id":128558,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659589146,"ip_address":"åŒ—äº¬","comment_id":353592,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"ä½œä¸š1ï¼šæ”¹ç”¨secretå¯ä»¥ï¼Œè¿™ä¸ªç®€å•ï¼ŒæŠŠdataé‡Œå¯¹åº”çš„å€¼ç”¨base64ç¼–ç å°±è¡Œï¼Œå¯¹åº”podçš„ymlæ”¹ä¸‹\nä½œä¸š2ï¼šnginxæ”¹æˆpod è¿è¡Œæ˜¯æˆåŠŸçš„ï¼Œ ä½†æ˜¯port-forwardå‡ºæ¥ï¼Œlinuxè™šæœºä¸Šç”¨firefoxæ‰“å¼€é¡µé¢æ˜¯okçš„ã€‚ä½†åœ¨shellç»ˆç«¯æœ¬åœ°æµè§ˆå™¨è®¿é—®ä¸äº†ï¼Œçœ‹äº†ä¸‹åº”è¯¥æ˜¯port-forwardçš„é—®é¢˜ï¼Œæ˜ å°„çš„ç«¯å£ç»‘å®šåœ¨Linuxè™šæœº127.0.0.1ä¸Šï¼Œæ‰€ä»¥virtualboxè½¬å‘ä¸å‡ºæ¥ã€‚\nnginx cm:\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: ngx-cm\ndata:\n  nginx.conf: |\n    server {\n    #  listen 80;\n       listen 8080;\n    #   default_type text&#47;html;\n\n       location &#47; {\n           proxy_http_version 1.1;\n           proxy_set_header Host $host;\n           proxy_pass http:&#47;&#47;172.17.0.10:80;\n       }\n     }\n\nnginx podé…ç½®ï¼š\napiVersion: v1\nkind: Pod\nmetadata:\n  name: wp-ngx-pod\n  labels:\n    env: test\n\nspec:\n  containers:\n  - image: nginx:alpine\n    name: wp-ngx\n    ports:\n    - containerPort: 8080\n    volumeMounts:\n    - mountPath: &#47;etc&#47;nginx&#47;conf.d&#47;\n      name: myngxconf\n\n  volumes:\n  - name: myngxconf\n    configMap:\n      name: ngx-cm\n      items:\n      - key: nginx.conf\n        path: default.conf\n","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582675,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659589146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361836,"user_name":"edward","can_delete":false,"product_type":"c1","uid":1604798,"ip_address":"åŒ—äº¬","ucode":"09F7A5B8D2E7BD","user_header":"","comment_is_top":false,"comment_ctime":1667903622,"is_pvip":false,"replies":[{"id":131628,"content":"å› ä¸ºå‘½ä»¤åé¢æœ‰ä¸ªä¸€ä¸ªâ€œ&amp;â€ï¼Œæ‰€ä»¥å°±è½¬å…¥äº†åå°è¿è¡Œï¼Œå¯ä»¥ç”¨ps + grepæ¥æŸ¥çœ‹ï¼Œç”¨â€œfgâ€å¸¦åˆ°å‰å°ï¼ŒCtrl+Cåœæ­¢ï¼Œæˆ–è€…çœ‹åˆ°è¿›ç¨‹å·åç›´æ¥killã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1667959627,"ip_address":"åŒ—äº¬","comment_id":361836,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"kubectl port-forward è€å¸ˆè¯·æ•™ä¸‹ è¿™ä¸ªå‘½ä»¤è®¾ç½®ç«¯å£è½¬å‘åï¼Œæ€ä¹ˆæŸ¥çœ‹å’Œå–æ¶ˆï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593105,"discussion_content":"å› ä¸ºå‘½ä»¤åé¢æœ‰ä¸ªä¸€ä¸ªâ€œ&amp;â€ï¼Œæ‰€ä»¥å°±è½¬å…¥äº†åå°è¿è¡Œï¼Œå¯ä»¥ç”¨ps + grepæ¥æŸ¥çœ‹ï¼Œç”¨â€œfgâ€å¸¦åˆ°å‰å°ï¼ŒCtrl+Cåœæ­¢ï¼Œæˆ–è€…çœ‹åˆ°è¿›ç¨‹å·åç›´æ¥killã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1667959627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606484,"discussion_content":"ä½¿ç”¨jobs -læŸ¥çœ‹åå°è¿è¡Œä»»åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677159690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352455,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1658691713,"is_pvip":false,"replies":[{"id":128198,"content":"\n1. ConfigMapå·²ç»å«åœ¨pod yamlé‡Œäº†ï¼Œæ˜¯ç”¨â€œ---â€åˆ†éš”çš„å¤šä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥åˆ›å»ºConfigMapå’Œpodã€‚\n\n2.åå‘ä»£ç†å°±æ˜¯åœ¨çœŸæ­£ç½‘ç«™ï¼ˆWordPressï¼‰å‰çš„ä¸€ä¸ªä»£ç†è½¯ä»¶ï¼Œæä¾›å®‰å…¨é˜²æŠ¤ç­‰åŠŸèƒ½ï¼Œå¯å‚è€ƒã€Šé€è§†HTTPåè®®ã€‹ã€‚ä¸åŠ è¿™ä¸ªå…¶å®ä¹Ÿå¯ä»¥ï¼Œä¸»è¦çš„ç›®çš„æ˜¯æ¨¡æ‹ŸçœŸå®ç¯å¢ƒï¼Œå¢åŠ ä¸€ç‚¹éƒ¨ç½²éš¾åº¦ã€‚\n\n3. minikube dashboardä¼šè‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨ï¼Œå¯ä»¥åŠ -hçœ‹å®ƒçš„è¯¦ç»†ç”¨æ³•ï¼Œä¹Ÿå¯ä»¥ç²˜è´´urlã€‚\n\n4.è¦æŠŠé…ç½®æ–‡ä»¶ç”¨ConfigMapçš„å½¢å¼åŠ è½½ï¼Œæ‹·è´ä¸è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1658712453,"ip_address":"","comment_id":352455,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"æœ‰åœ¨æ“ä½œè¿‡ç¨‹ä¸­é‡åˆ°å‡ ä¸ªé—®é¢˜ï¼Œè¿˜çƒ¦è¯·è€å¸ˆæŒ‡ç‚¹\n\n1ã€å‰é¢ 2 ä¸ªæ­¥éª¤ä¸­ï¼Œåœ¨ kubectl apply -f *-pod.yml ä¹‹å‰æ˜¯ä¸æ˜¯ä¹Ÿå¾— apply ä¸€ä¸‹ä¹‹å‰å®šä¹‰çš„ configMap å¯¹è±¡ï¼Ÿ\n\n2ã€å¯¹äºåå‘ä»£ç†ï¼Œä¸æ˜¯ç‰¹åˆ«çš„ç†è§£ï¼Œè€å¸ˆèƒ½ç®€å•è§£é‡Šä¸€ä¸‹åå‘ä»£ç†ï¼Œå¹¶é™„å¸¦è¯´æ˜è¿™é‡Œ Nginx è¿™é‡Œä½œä¸ºåå‘ä»£ç†çš„ç›®çš„æ˜¯ä»€ä¹ˆå—ï¼Ÿ\n\n3ã€`minikube dashboard` æ— æ³•åœ¨å‘½ä»¤è¡Œæ˜¾ç¤ºç•Œé¢ï¼Œæˆ‘å°† URL å¤åˆ¶ç²˜è´´åˆ° Ubuntu è™šæ‹Ÿæœºå›¾å½¢ç•Œé¢ä¸Šçš„æµè§ˆå™¨ä¸­ï¼Œä½†å›å¤çš„ JSON ä¸­æ˜¾ç¤º 404ï¼Ÿä¸å¤ªæ¸…æ¥šæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•\nOpening http:&#47;&#47;127.0.0.1:38539&#47;api&#47;v1&#47;namespaces&#47;kubernetes-dashboard&#47;services&#47;http:kubernetes-dashboard:&#47;proxy&#47; in your default browser...\nError: no DISPLAY environment variable specified\n\n4ã€å¯¹äºæ€è€ƒé¢˜çš„ 2ï¼Œæˆ‘åˆ›å»ºä¸€ä¸ªäº† nginx Podï¼Œç„¶åå°†å…¶é…ç½®æ–‡ä»¶é€šè¿‡ kubectl cp æ‹·è´åˆ° Pod å®¹å™¨ä¸­çš„å¯¹åº”ä½ç½®ï¼Œä½†æ˜¯å‘ç°å¹¶ä¸èµ·ä½œç”¨ï¼Œæœ¬æ¥æƒ³ç€é‡å¯ Pod è®©é…ç½®ç”Ÿæ•ˆï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æŒ‡ä»¤ã€‚è¿™é‡Œæ˜¯ä¸æ˜¯éœ€è¦å…¶ä»–çš„ K8S API å¯¹è±¡çš„å¸®åŠ©ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581291,"discussion_content":"\n1. ConfigMapå·²ç»å«åœ¨pod yamlé‡Œäº†ï¼Œæ˜¯ç”¨â€œ---â€åˆ†éš”çš„å¤šä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥åˆ›å»ºConfigMapå’Œpodã€‚\n\n2.åå‘ä»£ç†å°±æ˜¯åœ¨çœŸæ­£ç½‘ç«™ï¼ˆWordPressï¼‰å‰çš„ä¸€ä¸ªä»£ç†è½¯ä»¶ï¼Œæä¾›å®‰å…¨é˜²æŠ¤ç­‰åŠŸèƒ½ï¼Œå¯å‚è€ƒã€Šé€è§†HTTPåè®®ã€‹ã€‚ä¸åŠ è¿™ä¸ªå…¶å®ä¹Ÿå¯ä»¥ï¼Œä¸»è¦çš„ç›®çš„æ˜¯æ¨¡æ‹ŸçœŸå®ç¯å¢ƒï¼Œå¢åŠ ä¸€ç‚¹éƒ¨ç½²éš¾åº¦ã€‚\n\n3. minikube dashboardä¼šè‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨ï¼Œå¯ä»¥åŠ -hçœ‹å®ƒçš„è¯¦ç»†ç”¨æ³•ï¼Œä¹Ÿå¯ä»¥ç²˜è´´urlã€‚\n\n4.è¦æŠŠé…ç½®æ–‡ä»¶ç”¨ConfigMapçš„å½¢å¼åŠ è½½ï¼Œæ‹·è´ä¸è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658712453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":581354,"discussion_content":"ç¬¬4ç‚¹ï¼Œä½ å¯ä»¥è‡ªå·±åšä¸€ä¸ªnginxçš„image, åŒ…æ‹¬ä¿®æ”¹ä¹‹åçš„é…ç½®æ–‡ä»¶ï¼Œæ”¾ç½®åœ¨æ­£ç¡®çš„ä½ç½®ã€‚è¿™æ ·ä¹Ÿå¯ä»¥çš„ã€‚åªæ˜¯ä¸å¤Ÿå¼¹æ€§ï¼Œå¦‚æœé…ç½®è¦æ”¹ï¼Œåˆå¾—é‡æ–°åšimage","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658736901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":581291,"ip_address":"","group_id":0},"score":581354,"extra":""}]},{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581342,"discussion_content":"3. å› ä¸ºæˆ‘æ˜¯åœ¨ Mac ä¸Šçš„ Terminal SSH åˆ°è™šæ‹Ÿæœºä¸Šå»ï¼Œæ‰€ä»¥è‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨å¤±è´¥ã€‚åªæœ‰åœ¨è™šæ‹Ÿæœºå›¾å½¢ç•Œé¢ä¸­è¿è¡Œ minikube dashboard æ‰èƒ½æ­£å¸¸è‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨ã€‚ä½†æ˜¯åœ¨å›¾å½¢ç•Œé¢çš„ç»ˆç«¯ä¸­è·‘ minikube dashboard ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š\n\nExiting due to GUEST_STATUS: state: unknown state &#34;minikube&#34;: docker container inspect minikube --format=: exit status 1\nstdout:\n\nstderr:\nGot permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get &#34;http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/minikube/json&#34;: dial unix /var/run/docker.sock: connect: permission denied\n\næ„Ÿè§‰æŒºå¥‡æ€ªçš„ï¼ŒåŒæ ·åœ¨è™šæ‹Ÿæœºä¸Šï¼Œä¸ºä»€ä¹ˆ SSH ç™»é™†çš„å¯ä»¥æ­£å¸¸è¿è¡Œ minikube dashboard, ä½†æ˜¯å›¾å½¢ç•Œé¢ç™»é™†çš„å°±ä¸è¡Œã€‚æœ€åæŸ¥äº†ä¸‹ï¼Œæ›´æ”¹äº† docker æ–‡ä»¶æƒé™åå°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼Œå…·ä½“ä¹Ÿä¸æ¸…æ¥šä¸ºä»€ä¹ˆ\nsudo chmod 666 /var/run/docker.sock\nsudo usermod -aG docker ${USER}","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1658731649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374378,"user_name":"æœªæ¥å·²æ¥","can_delete":false,"product_type":"c1","uid":1187130,"ip_address":"å¹¿ä¸œ","ucode":"3A21ACFD53CB9C","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/3a/cdf9c55f.jpg","comment_is_top":false,"comment_ctime":1684051961,"is_pvip":false,"replies":[{"id":136707,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1684123613,"ip_address":"åŒ—äº¬","comment_id":374378,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"ç¬¬å››æ­¥ Nginx éƒ¨åˆ†ä½¿ç”¨ docker å¯åŠ¨å‘½ä»¤æŠŠ -v åé¢çš„ &#47;tmp&#47;proxy.conf æ”¹ä¸º `pwd`&#47;proxy.conf å³å¯ï¼Œè·Ÿ dokcer å®æˆ˜éƒ¨åˆ†ä¿æŒä¸€è‡´","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618129,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684123613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371829,"user_name":"Geek_f2f06e","can_delete":false,"product_type":"c1","uid":3073745,"ip_address":"é™•è¥¿","ucode":"B7AC635AFF7681","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/g4os8I4iaB6jn06PsvyqI1BooV5XbOC0vI3niaJ4I3SlAhkbBKG2eewlPHHJ4ROcDia18bbPFSZPDXXmgHXtrBlLg/132","comment_is_top":false,"comment_ctime":1680403871,"is_pvip":false,"replies":[{"id":135637,"content":"MariaDBä¸WordPresså¾ˆæ˜æ˜¾æ˜¯ä¸¤ä¸ªä¸åŒé¢†åŸŸçš„åº”ç”¨ï¼Œæ²¡æœ‰éå¸¸å¯†åˆ‡çš„å…³ç³»ï¼Œå¦‚æœåœ¨ä¸€ä¸ªpodé‡Œéƒ¨ç½²ï¼Œé‚£ä¹ˆå¯¹äºæ‰©å±•å’Œç»´æŠ¤éƒ½ä¸å¾ˆæ–¹ä¾¿ï¼Œä¸åº”è¯¥å¼ºåˆ¶ç»‘å®šåœ¨ä¸€èµ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1680419225,"ip_address":"åŒ—äº¬","comment_id":371829,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸€ä¸ªç–‘é—®æƒ³è¯·æ•™æ‚¨ï¼š\nè¿™é‡ŒæŠŠæ¯ä¸ªåº”ç”¨éƒ½å°è£…æˆpodï¼Œä¸ºä»€ä¹ˆä¸å°†MariaDBå’ŒWordPresså°è£…åˆ°ä¸€ä¸ªpodé‡Œé¢ï¼Œpodçš„æ„ä¹‰ä¸å°±æ˜¯å°†å¤šä¸ªå¯†åˆ‡çš„å®¹å™¨å°è£…åœ¨ä¸€èµ·","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611920,"discussion_content":"MariaDBä¸WordPresså¾ˆæ˜æ˜¾æ˜¯ä¸¤ä¸ªä¸åŒé¢†åŸŸçš„åº”ç”¨ï¼Œæ²¡æœ‰éå¸¸å¯†åˆ‡çš„å…³ç³»ï¼Œå¦‚æœåœ¨ä¸€ä¸ªpodé‡Œéƒ¨ç½²ï¼Œé‚£ä¹ˆå¯¹äºæ‰©å±•å’Œç»´æŠ¤éƒ½ä¸å¾ˆæ–¹ä¾¿ï¼Œä¸åº”è¯¥å¼ºåˆ¶ç»‘å®šåœ¨ä¸€èµ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680419225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369155,"user_name":"doos","can_delete":false,"product_type":"c1","uid":1069269,"ip_address":"æµ™æ±Ÿ","ucode":"7C9AF67F90E65C","user_header":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","comment_is_top":false,"comment_ctime":1677159515,"is_pvip":false,"replies":[{"id":134493,"content":"many thanks.","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1677199570,"ip_address":"ä¸Šæµ·","comment_id":369155,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"è¿™ä¸ªå…¥é—¨å†™çš„å¤ªå¥½äº†ï¼Œæˆ‘å½“æ—¶å­¦æ˜¯å…ˆå­¦ä¹ dockerï¼Œç ”ç©¶äº†3ä¸ªæœˆdockerï¼Œåæ¥æ‰æ…¢æ…¢å»æ¥è§¦k8så­¦äº†åŠå¹´ï¼Œæ„Ÿè§‰å†…å®¹å¤ªå¤šäº†ï¼Œè€Œä¸”çŸ¥è¯†æ¯”è¾ƒåˆ†æ•£","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606506,"discussion_content":"many thanks.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677199570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354127,"user_name":"Geek_39bdd5","can_delete":false,"product_type":"c1","uid":2781060,"ip_address":"åŒ—äº¬","ucode":"CEC28F9978165F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/cK4aAENG9h42KqeibyVNTeSUichzhv6zH1nA6iah4u6USqITMDA6qzuiaKY3of68tROwSzuRIsPpLnqgVW8ClMRH2Q/132","comment_is_top":false,"comment_ctime":1660117378,"is_pvip":false,"replies":[{"id":128804,"content":"ä¹Ÿè®¸æ˜¯ç½‘ç»œæ’ä»¶æ²¡æœ‰æ­£å¸¸å·¥ä½œï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660122618,"ip_address":"åŒ—äº¬","comment_id":354127,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"kubectl get pod -o wideæŸ¥çœ‹çš„æ—¶å€™ipæ˜¾ç¤ºæ˜¯noneæ˜¯æ€ä¹ˆå›äº‹\n","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583448,"discussion_content":"ä¹Ÿè®¸æ˜¯ç½‘ç»œæ’ä»¶æ²¡æœ‰æ­£å¸¸å·¥ä½œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660122618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2203253,"avatar":"https://static001.geekbang.org/account/avatar/00/21/9e/75/3ff9e7aa.jpg","nickname":"Java-åˆ˜æ–°æ¼³","note":"","ucode":"28F0BAA103CE6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588241,"discussion_content":"æˆ‘çš„ä¹Ÿæ˜¯è¿™æ ·çš„ï¼Œç”¨describeæŸ¥çœ‹eventï¼Œå‘ç°å¡åœ¨æ‹‰å–é•œåƒé‚£è¾¹äº†ï¼Œè¿‡äº†å¥½ä¸€ä¼šæ‰æ‹‰å®Œå¯åŠ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663605021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1401511,"avatar":"https://static001.geekbang.org/account/avatar/00/15/62/a7/595b36f8.jpg","nickname":"chuanshen","note":"","ucode":"02B565DFA534A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588001,"discussion_content":"æœ‰å¯èƒ½æ˜¯è¿˜æ²¡å¯åŠ¨å®Œæˆï¼Œç­‰è®®ä¼šï¼Œåˆ°runingçš„çŠ¶æ€\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663429560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193366,"avatar":"https://static001.geekbang.org/account/avatar/00/12/35/96/6abd636f.jpg","nickname":"null","note":"","ucode":"709A3D55AB8961","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583610,"discussion_content":"æˆ‘ä¹Ÿäº§ç”Ÿäº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ˜¯ç­‰äº†5åˆ†é’Ÿå·¦å³è‡ªåŠ¨åˆ†é…äº†IPåœ°å€äº†ï¼Œä½ å¤šç­‰ä¸€ä¸‹è¯•è¯•çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660233012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352747,"user_name":"RRR","can_delete":false,"product_type":"c1","uid":1014991,"ip_address":"","ucode":"F32A579D201EC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/cf/d5382404.jpg","comment_is_top":false,"comment_ctime":1658908491,"is_pvip":false,"replies":[{"id":128280,"content":"\n1. port-forwardåªèƒ½ç”¨äºæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå½“ç„¶è¦ç”¨Ingress\n\n2.helmå¯ä»¥ç†è§£æˆæ˜¯Kubernetesçš„å®‰è£…åŒ…ï¼Œistioæ˜¯è¿è¡Œåœ¨Kubernetesä¸Šçš„æœåŠ¡ç½‘æ ¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1658915040,"ip_address":"","comment_id":352747,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"ä¸¤ä¸ªé—®é¢˜\n\n1. port-forward å®é™…åœ¨ç”Ÿäº§ç”¨çš„å¤šä¹ˆï¼Ÿåº”è¯¥éƒ½æ˜¯ ingress å§\n2. è€å¸ˆåé¢èƒ½è®²è®² helm å’Œ Istio å—ï¼Œä»–ä»¬å’Œ k8s å…³ç³»æ˜¯ä»€ä¹ˆï¼Œæˆ‘çœ‹ä¸æ˜ç™½","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581681,"discussion_content":"\n1. port-forwardåªèƒ½ç”¨äºæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå½“ç„¶è¦ç”¨Ingress\n\n2.helmå¯ä»¥ç†è§£æˆæ˜¯Kubernetesçš„å®‰è£…åŒ…ï¼Œistioæ˜¯è¿è¡Œåœ¨Kubernetesä¸Šçš„æœåŠ¡ç½‘æ ¼ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658915040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014991,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/cf/d5382404.jpg","nickname":"RRR","note":"","ucode":"F32A579D201EC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581684,"discussion_content":"å¯¹ å…¶å®å°±æ˜¯ä¸ç†è§£ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658916733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352557,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1658760889,"is_pvip":false,"replies":[{"id":128228,"content":"\n1.å½“ç„¶å¯ä»¥ï¼ŒPodé‡Œçš„å¤šå®¹å™¨å¯ä»¥ä»»æ„ç»„åˆï¼Œä½†ä¸€èˆ¬åšæ³•éƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸€ä¸ªPod\n\n2.æ˜¯çš„ï¼Œå‚è€ƒå…¥é—¨ç¯‡ï¼ŒMariaDBè¦æ±‚ç¯å¢ƒå˜é‡å¿…é¡»è¿™ä¹ˆå‘½åã€‚\n\n3.æ˜¯çš„ï¼Œè¿™æ ·å¤–ç•Œç”¨çš„å°±æ˜¯80ç«¯å£ï¼Œè½¬å‘çš„åœ°å€ç«¯å£å°±ä¸ä¼šä¹±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1658789642,"ip_address":"","comment_id":352557,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜ï¼š\nQ1ï¼šMariaDBå’ŒWPå¯ä»¥è·‘åœ¨ä¸€ä¸ªPODé‡Œé¢å—ï¼Ÿ\n\nQ2ï¼šæ–‡ä¸­çš„prefixæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\næ–‡ä¸­å®šä¹‰mariadb-pod.ymlçš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªprefix: &#39;MARIADB_&#39;ï¼Œ è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\næ˜¯æŠŠconfigMapä¸­çš„å˜é‡åå­—å‰é¢åŠ ä¸Šè¿™ä¸ªå‰ç¼€ä½œä¸ºpodä¸­çš„å˜é‡åç§°å—ï¼Ÿ\nå³ï¼špodä¸­çš„å˜é‡åç§° = MARIADB_&#39; + configMapä¸­çš„å˜é‡åç§°ã€‚\nQ3ï¼šå…³äºè½¬å‘çš„ç–‘é—®\næ–‡ä¸­æœ‰ä¸€å¥ï¼šâ€œå› ä¸º WordPress ç½‘ç«™ä½¿ç”¨äº† URL é‡å®šå‘ï¼Œç›´æ¥ä½¿ç”¨â€œ8080â€ä¼šå¯¼è‡´è·³è½¬æ•…éšœâ€ã€‚ å¦‚æœæ²¡æœ‰nginxï¼Œå®¿ä¸»æœºä¸Šç”¨æµè§ˆå™¨ç›´æ¥è®¿é—®WPçš„8080ç«¯å£ï¼Œåˆ™ä¼šå› ä¸ºWPå†…éƒ¨å®ç°æœºåˆ¶è€Œäº§ç”Ÿé”™è¯¯ï¼› å¦‚æœåŠ ä¸Šnginxï¼Œnginxå»è®¿é—®WPçš„8080ç«¯å£ï¼Œå°±æ²¡äº‹ã€‚ æ˜¯è¿™æ ·å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581433,"discussion_content":"\n1.å½“ç„¶å¯ä»¥ï¼ŒPodé‡Œçš„å¤šå®¹å™¨å¯ä»¥ä»»æ„ç»„åˆï¼Œä½†ä¸€èˆ¬åšæ³•éƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸€ä¸ªPod\n\n2.æ˜¯çš„ï¼Œå‚è€ƒå…¥é—¨ç¯‡ï¼ŒMariaDBè¦æ±‚ç¯å¢ƒå˜é‡å¿…é¡»è¿™ä¹ˆå‘½åã€‚\n\n3.æ˜¯çš„ï¼Œè¿™æ ·å¤–ç•Œç”¨çš„å°±æ˜¯80ç«¯å£ï¼Œè½¬å‘çš„åœ°å€ç«¯å£å°±ä¸ä¼šä¹±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658789642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2917100,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/82/ec/99b480e8.jpg","nickname":"hiDaLao","note":"","ucode":"3C2DC2A3A377E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581419,"discussion_content":"1ï¼šå¯ä»¥ä½†æœ€å¥½ä¸è¦ï¼Œä¸åˆ©äºä¸šåŠ¡çš„æ‹“å±•\n2ï¼šæ˜¯çš„ï¼Œè€å¸ˆæ–‡ä¸­æœ‰è§£ç­”ï¼Œâ€œæŒ‡å®šå˜é‡åçš„å‰ç¼€ï¼ˆå³è¿™é‡Œçš„ MARIADB_ï¼‰â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658765874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378487,"user_name":"ç‰™å°æœ¨","can_delete":false,"product_type":"c1","uid":1172050,"ip_address":"åŒ—äº¬","ucode":"E5C12D37A62949","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/52/56dbb738.jpg","comment_is_top":false,"comment_ctime":1690336422,"is_pvip":false,"replies":[{"id":137940,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1690414819,"ip_address":"ä¸Šæµ·","comment_id":378487,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"æ³¨æ„wp-pod.yamlä¸­çš„HOSTå€¼ï¼Œéœ€è¦æŒ‰ç…§è‡ªå·±æœºå™¨ä¸Šçš„æ¥ã€‚\ntb@tb-laptop:~$ k get pod maria-pod -o wide\nNAME        READY   STATUS    RESTARTS   AGE   IP            NODE       NOMINATED NODE   READINESS GATES\nmaria-pod   1&#47;1     Running   0          26m   10.244.0.76   minikube   &lt;none&gt;           &lt;none&gt;\n\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624286,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690414819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374316,"user_name":"æ–‡é™çš„å®‰è¿ª","can_delete":false,"product_type":"c1","uid":1220040,"ip_address":"ä¸Šæµ·","ucode":"57ED0A746CE3BC","user_header":"https://static001.geekbang.org/account/avatar/00/12/9d/c8/695f838c.jpg","comment_is_top":false,"comment_ctime":1683887420,"is_pvip":false,"replies":[{"id":136704,"content":"çœ‹ä¸€ä¸‹podé‡Œçš„imageï¼Œæ ‡ç­¾æ˜¯å¦å’Œdockerçš„ä¸€è‡´ï¼Œè¦ä¸å°±æ¢ä¸ªç‰ˆæœ¬å§ï¼Œæ¯”å¦‚ç”¨9ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1684123541,"ip_address":"åŒ—äº¬","comment_id":374316,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œæˆ‘æ‰€æœ‰çš„è¯¾ç¨‹éƒ½è·Ÿç€ä½ çš„è¿™ä¸ªè¯¾ç¨‹èµ°çš„ï¼Œä½†æ˜¯åœ¨æœ¬æ–‡ä¸­ï¼Œåˆ›å»ºmariadb-podçš„æ—¶å€™ï¼Œä¸€åªæ‹‰å–é•œåƒå¤±è´¥ï¼Œä½†æ˜¯æˆ‘æœ¬åœ°è¿™ä¸ªé•œåƒå¾ˆæ—©å°±ä¸‹è½½ä¸‹æ¥äº†çš„ï¼Œä½†æ˜¯podä¸€ç›´æ— æ³•åˆ›å»ºæˆåŠŸImagePullBackOffï¼Œçœ‹æ—¥å¿—æ˜¯æ‹‰å–é•œåƒå¤±è´¥ï¼Œä¸ºä»€ä¹ˆæˆ‘æœ¬åœ°æœ‰è¿˜è¦å»æ‹‰é•œåƒå‘¢ï¼Ÿ\n\nubuntu@ip-10-0-12-235:~$ kubectl get pod\nNAME        READY   STATUS             RESTARTS   AGE\nmaria-pod   0&#47;1     ImagePullBackOff   0          5m17s\n\nubuntu@ip-10-0-12-235:~$ docker images\nREPOSITORY       TAG       IMAGE ID       CREATED         SIZE\nmariadb          10        4af0c16be4b1   12 hours ago    403MB\nalpine           latest    5e2b554c1c45   2 days ago      7.33MB\nhello-world      latest    9c7a54a9a43c   7 days ago      13.3kB\nnginx            1.23      448a08f1d2f9   8 days ago      142MB\nnginx            latest    448a08f1d2f9   8 days ago      142MB\nredis            latest    116cad43b6af   8 days ago      117MB\nkicbase&#47;stable   v0.0.39   67a4b1138d2d   5 weeks ago     1.05GB\nnginx            alpine    8e75cbc5b25c   6 weeks ago     41MB\nbusybox          latest    7cfbbec8963d   8 weeks ago     4.86MB\nubuntu           latest    6b7dfa7e8fdb   5 months ago    77.8MB\nwordpress        5         140ebc8d8136   12 months ago   605MB\n\n\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618126,"discussion_content":"çœ‹ä¸€ä¸‹podé‡Œçš„imageï¼Œæ ‡ç­¾æ˜¯å¦å’Œdockerçš„ä¸€è‡´ï¼Œè¦ä¸å°±æ¢ä¸ªç‰ˆæœ¬å§ï¼Œæ¯”å¦‚ç”¨9ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684123541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373231,"user_name":"tzhiyu","can_delete":false,"product_type":"c1","uid":1345992,"ip_address":"å››å·","ucode":"489C0927429445","user_header":"https://static001.geekbang.org/account/avatar/00/14/89/c8/53085ffb.jpg","comment_is_top":false,"comment_ctime":1682268403,"is_pvip":false,"replies":[{"id":136335,"content":"çœ‹ä¸€ä¸‹wp-pod.ymlé‡Œé¢æ˜¯å¦ç”¨â€œ---â€åˆ†éš”åŒ…å«äº†å¤šä¸ªå¯¹è±¡å®šä¹‰ï¼Œå¦‚æœæ˜¯GitHubä¸Šçš„YAML å°±åº”è¯¥æ²¡é”™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1682307238,"ip_address":"ä¸Šæµ·","comment_id":373231,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"è¿è¡Œä¸‹é¢è¿™è¡Œå‘½ä»¤ä¹‹å\nkubectl apply -f wp-pod.yml\n\næ²¡æœ‰å‡ºç°è€å¸ˆå›¾ç‰‡ä¸Šå‡ºç°çš„&quot;configmap&#47;maria-cm created&quot;, æ˜¯å› ä¸ºæˆ‘æ²¡æœ‰å•ç‹¬å†™maria-cm.ymlå¯¼è‡´çš„å—\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615501,"discussion_content":"çœ‹ä¸€ä¸‹wp-pod.ymlé‡Œé¢æ˜¯å¦ç”¨â€œ---â€åˆ†éš”åŒ…å«äº†å¤šä¸ªå¯¹è±¡å®šä¹‰ï¼Œå¦‚æœæ˜¯GitHubä¸Šçš„YAML å°±åº”è¯¥æ²¡é”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682307239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1345992,"avatar":"https://static001.geekbang.org/account/avatar/00/14/89/c8/53085ffb.jpg","nickname":"tzhiyu","note":"","ucode":"489C0927429445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":615505,"discussion_content":"æ„Ÿè°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682307334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":615501,"ip_address":"å››å·","group_id":0},"score":615505,"extra":""}]}]},{"had_liked":false,"id":372649,"user_name":"Geek_9d43c0","can_delete":false,"product_type":"c1","uid":3051841,"ip_address":"åŒ—äº¬","ucode":"68EEFAC76D921B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Gtf3tMDmYRoCL9Eico52ciatacq4PUHfQ8icQIYKV6KLDAJyTa8ZnLXMKf05pEice5RnEagocFobca5zv8jwyPhNKA/132","comment_is_top":false,"comment_ctime":1681392101,"is_pvip":false,"replies":[{"id":136015,"content":"kuberneteså¯åŠ¨podçš„æ—¶å€™ä¼šæŠŠconfigmapä»¥ç¯å¢ƒå˜é‡çš„å½¢å¼æ³¨å…¥ï¼Œå…¶å®å’Œdockerçš„æœºåˆ¶æ˜¯ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1681437646,"ip_address":"ä¸Šæµ·","comment_id":372649,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"æˆ‘æœ‰ä¸ªç–‘é—® mariadbå¯åŠ¨çš„æ—¶å€™ æ‹‰å– åœ¨maria-cmé‡Œé¢å£°æ˜çš„é…ç½® è¿™ä¸ªé…ç½®çš„å­—æ®µå¯åŠ¨çš„æ—¶å€™æ˜¯æ€ä¹ˆæ‰¾åˆ°çš„ å› ä¸ºæˆ‘ä»¬åœ¨dockerå¯åŠ¨çš„æ—¶å€™æ˜¯ä¼šæ˜¾å¼çš„é…ç½®å¯åŠ¨å‚æ•° å¦‚æœåŠ äº†ç»Ÿä¸€çš„å‰ç¼€ä¸ä¼šå½±å“mariadbå¯åŠ¨æ‰¾è‡ªå·±çš„é…ç½®å— ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613637,"discussion_content":"kuberneteså¯åŠ¨podçš„æ—¶å€™ä¼šæŠŠconfigmapä»¥ç¯å¢ƒå˜é‡çš„å½¢å¼æ³¨å…¥ï¼Œå…¶å®å’Œdockerçš„æœºåˆ¶æ˜¯ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681437647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371639,"user_name":"æ°¸è¿œçš„è‰è“åœ°","can_delete":false,"product_type":"c1","uid":1034001,"ip_address":"å¹¿è¥¿","ucode":"D4BD8DD42350CC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/11/89ba9915.jpg","comment_is_top":false,"comment_ctime":1680141569,"is_pvip":false,"replies":[{"id":135613,"content":"è¿™ä¸ªæ˜¯kubernetesé›†ç¾¤å†…éƒ¨çš„IPåœ°å€ï¼Œå¤–éƒ¨ä¸å¯è§ï¼Œå¯ä»¥å†å‚è€ƒåé¢è®²çš„kubernetesç½‘ç»œæ¨¡å‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1680219552,"ip_address":"åŒ—äº¬","comment_id":371639,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œmaria db åˆ›å»ºä¹‹åä¼šæœ‰ä¸€ä¸ª ip ï¼Œè¿™ä¸ª ip ç›´æ¥å°±å¯ä»¥è®©å…¶ä»– pod è®¿é—®ï¼Œè¿™æ ·ä¸æ˜¯å¤ªä¸å®‰å…¨äº†å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611640,"discussion_content":"è¿™ä¸ªæ˜¯kubernetesé›†ç¾¤å†…éƒ¨çš„IPåœ°å€ï¼Œå¤–éƒ¨ä¸å¯è§ï¼Œå¯ä»¥å†å‚è€ƒåé¢è®²çš„kubernetesç½‘ç»œæ¨¡å‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680219552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1034001,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c7/11/89ba9915.jpg","nickname":"æ°¸è¿œçš„è‰è“åœ°","note":"","ucode":"D4BD8DD42350CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":612200,"discussion_content":"æ¯”å¦‚å…¬æœ‰äº‘å¹³å°ï¼Œä¸€ä¸ªç§Ÿæˆ·çš„pod ä¹Ÿå¯ä»¥é€šè¿‡ ipè®¿é—®ä¸å±äºè‡ªå·±çš„podå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680577299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":611640,"ip_address":"å¹¿è¥¿","group_id":0},"score":612200,"extra":""}]}]},{"had_liked":false,"id":371005,"user_name":"GeekNeo","can_delete":false,"product_type":"c1","uid":1146405,"ip_address":"æµ™æ±Ÿ","ucode":"1D355A9BEB8BEA","user_header":"https://static001.geekbang.org/account/avatar/00/11/7e/25/3932dafd.jpg","comment_is_top":false,"comment_ctime":1679457105,"is_pvip":false,"replies":[{"id":135441,"content":"å¯ä»¥æŠŠä¸¤ä¸ªå¯¹è±¡åˆå¹¶åœ¨ä¸€ä¸ªYAML é‡Œåˆ›å»ºï¼Œç”¨â€œ---â€åˆ†éš”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1679705618,"ip_address":"æ¹–å—","comment_id":371005,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘å¹¶ä¸èƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ç›´æ¥åˆ›å»ºconfigmapå¯¹è±¡å’Œpod\næˆ‘éœ€è¦æ‰§è¡Œconfigmapå¯¹è±¡çš„ymlæ–‡ä»¶ ç„¶ååœ¨æ‰§è¡Œpodçš„ymlæ–‡ä»¶","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610713,"discussion_content":"å¯ä»¥æŠŠä¸¤ä¸ªå¯¹è±¡åˆå¹¶åœ¨ä¸€ä¸ªYAML é‡Œåˆ›å»ºï¼Œç”¨â€œ---â€åˆ†éš”ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1679705618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–å—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368177,"user_name":"éšé‡è€Œå®‰","can_delete":false,"product_type":"c1","uid":1716709,"ip_address":"å¹¿ä¸œ","ucode":"5A1222D6F16B4E","user_header":"https://static001.geekbang.org/account/avatar/00/1a/31/e5/8d45547d.jpg","comment_is_top":false,"comment_ctime":1675956444,"is_pvip":false,"replies":[{"id":134052,"content":"éƒ½åœ¨GitHubä¸Šï¼Œè§è¯¾å‰å‡†å¤‡ã€‚\n\næ˜¯çš„è¦å…ˆåˆ›å»ºConfigMapèµ„æºï¼Œä¸è¿‡å¦‚æœå…ˆåˆ›å»ºPodä¹Ÿæ²¡é—®é¢˜ï¼Œæ‰¾ä¸åˆ°cmå°±ä¸ä¼šè¿è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1675988032,"ip_address":"ä¸Šæµ·","comment_id":368177,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œè¯¾ç¨‹çš„æºç æœ‰å—ï¼Ÿå°±æ˜¯æ¯ä¸ªå†…å®¹ä¸­ç”¨åˆ°çš„ymlæ–‡ä»¶ã€‚ä¸ºå•¥æˆ‘è§‰å¾—åº”è¯¥å…ˆkubectl apply -f cm.ymlä¹‹åï¼Œetdæ‰ä¼šæœ‰cmçš„é…ç½®ä¿¡æ¯å•Šã€‚æˆ‘çœ‹åˆ°çš„podçš„ymlä¸­ï¼Œç›´æ¥å¼•ç”¨äº†cmé…ç½®ï¼Œä¸å¯¹å§","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603143,"discussion_content":"éƒ½åœ¨GitHubä¸Šï¼Œè§è¯¾å‰å‡†å¤‡ã€‚\n\næ˜¯çš„è¦å…ˆåˆ›å»ºConfigMapèµ„æºï¼Œä¸è¿‡å¦‚æœå…ˆåˆ›å»ºPodä¹Ÿæ²¡é—®é¢˜ï¼Œæ‰¾ä¸åˆ°cmå°±ä¸ä¼šè¿è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675988032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365114,"user_name":"conorzhong","can_delete":false,"product_type":"c1","uid":2150926,"ip_address":"åŒ—äº¬","ucode":"A2AAE8B6B41031","user_header":"https://static001.geekbang.org/account/avatar/00/20/d2/0e/579fc19b.jpg","comment_is_top":false,"comment_ctime":1672124432,"is_pvip":false,"replies":[{"id":132940,"content":"MariaDBçš„ConfigMapå¯¹è±¡åŒ…å«åœ¨äº†mariadb-pod.ymlé‡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1672129614,"ip_address":"åŒ—äº¬","comment_id":365114,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"æ–‡ä¸­ç¼ºå°‘kubectl apply -f maria-cm.yml","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597653,"discussion_content":"MariaDBçš„ConfigMapå¯¹è±¡åŒ…å«åœ¨äº†mariadb-pod.ymlé‡Œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1672129614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2150926,"avatar":"https://static001.geekbang.org/account/avatar/00/20/d2/0e/579fc19b.jpg","nickname":"conorzhong","note":"","ucode":"A2AAE8B6B41031","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":597654,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672129669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":597653,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":597654,"extra":""}]}]},{"had_liked":false,"id":363976,"user_name":"zzz","can_delete":false,"product_type":"c1","uid":1216328,"ip_address":"åŒ—äº¬","ucode":"31A5F705F012FA","user_header":"https://static001.geekbang.org/account/avatar/00/12/8f/48/c7fb8067.jpg","comment_is_top":false,"comment_ctime":1670407217,"is_pvip":false,"replies":[{"id":132320,"content":"åº”è¯¥æ˜¯è¿™ä¸ªçš„é—®é¢˜å§ï¼šHostname mariadb could not be resolvedã€‚\n\nè¿›å…¥podï¼Œçœ‹çœ‹ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®ï¼Œåº”è¯¥æœ‰WORDPRESS_DB_å‰ç¼€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1670415685,"ip_address":"åŒ—äº¬","comment_id":363976,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"Hi chrono , å‡ºç°è¿™æ ·çš„é—®é¢˜,è°ƒè¯•äº†ä¸€ä¸ªä¸‹åˆï¼š\nubuntu@master:~&#47;k8s02p&#47;k8s&#47;worldPress$ k get pods  -o wide\nNAME        READY   STATUS             RESTARTS        AGE     IP            NODE       NOMINATED NODE   READINESS GATES\nmaria-pod   1&#47;1     Running            0               29m     10.244.1.11   worker01   &lt;none&gt;           &lt;none&gt;\nwp-pod      0&#47;1     CrashLoopBackOff   3 (2m35s ago)   3m23s   10.244.1.14   worker01   &lt;none&gt;           &lt;none&gt;\n\né€šè¿‡ k logs æ£€æŸ¥ï¼š\nubuntu@master:~&#47;k8s02p&#47;k8s&#47;worldPress$ k logs wp-pod \nwordpress 09:54:52.41 \nwordpress 09:54:52.42 Welcome to the Bitnami wordpress container\nwordpress 09:54:52.42 Subscribe to project updates by watching https:&#47;&#47;github.com&#47;bitnami&#47;containers\nwordpress 09:54:52.43 Submit issues and feature requests at https:&#47;&#47;github.com&#47;bitnami&#47;containers&#47;issues\nwordpress 09:54:52.44 \nwordpress 09:54:52.45 INFO  ==&gt; ** Starting WordPress setup **\nrealpath: &#47;bitnami&#47;apache&#47;conf: No such file or directory\nwordpress 09:54:52.55 INFO  ==&gt; Configuring Apache ServerTokens directive\nwordpress 09:54:52.62 INFO  ==&gt; Configuring PHP options\nwordpress 09:54:52.63 INFO  ==&gt; Setting PHP expose_php option\nwordpress 09:54:52.69 INFO  ==&gt; Validating settings in MYSQL_CLIENT_* env vars\nwordpress 09:54:52.87 WARN  ==&gt; Hostname mariadb could not be resolved, this could lead to connection issues\nwordpress 09:54:52.88 ERROR ==&gt; The WORDPRESS_DATABASE_PASSWORD environment variable is empty or not set. Set the environment variable ALLOW_EMPTY_PASSWORD=yes to allow a blank password. This is only recommended for development environments.\n\nä½†æ˜¯wp-cm.yaml é‡Œé¢ï¼ŒHOSTåº”è¯¥æ˜¯æ²¡æœ‰é…ç½®é”™è¯¯çš„ï¼š\nubuntu@master:~&#47;k8s02p&#47;k8s&#47;worldPress$ cat wp-cm.yaml \n\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: wp-cm\ndata:\n  HOST: &#39;10.244.1.11&#39;\n  USER: &#39;wp&#39;\n  PASSWORD: &#39;123&#39;\n  NAME: &#39;db&#39;\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595868,"discussion_content":"åº”è¯¥æ˜¯è¿™ä¸ªçš„é—®é¢˜å§ï¼šHostname mariadb could not be resolvedã€‚\n\nè¿›å…¥podï¼Œçœ‹çœ‹ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®ï¼Œåº”è¯¥æœ‰WORDPRESS_DB_å‰ç¼€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670415685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363974,"user_name":"ä½ å¥½æå®¢æ—¶é—´","can_delete":false,"product_type":"c1","uid":2113412,"ip_address":"åŒ—äº¬","ucode":"EC1AE9FD105234","user_header":"https://static001.geekbang.org/account/avatar/00/20/3f/84/47f7b661.jpg","comment_is_top":false,"comment_ctime":1670406309,"is_pvip":false,"replies":[{"id":132318,"content":"502åº”è¯¥æ˜¯åç«¯æ²¡é…ç½®å¥½ï¼Œçœ‹çœ‹Nginxçš„proxy_passï¼Œåº”è¯¥æ˜¯port-forwardçš„åœ°å€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1670415435,"ip_address":"åŒ—äº¬","comment_id":363974,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘è¿™é‡Œè®¿é—®127.0.0.1:80ï¼ŒæŠ¥é”™502ï¼Œæ˜¯wordpressçš„é—®é¢˜ä¹ˆï¼Ÿ\n\n[root@localhost ~]# curl http:&#47;&#47;127.0.0.1\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;502 Bad Gateway&lt;&#47;title&gt;&lt;&#47;head&gt;\n&lt;body&gt;\n&lt;center&gt;&lt;h1&gt;502 Bad Gateway&lt;&#47;h1&gt;&lt;&#47;center&gt;\n&lt;hr&gt;&lt;center&gt;nginx&#47;1.23.2&lt;&#47;center&gt;\n&lt;&#47;body&gt;\n&lt;&#47;html&gt;\n[root@localhost ~]#\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595866,"discussion_content":"502åº”è¯¥æ˜¯åç«¯æ²¡é…ç½®å¥½ï¼Œçœ‹çœ‹Nginxçš„proxy_passï¼Œåº”è¯¥æ˜¯port-forwardçš„åœ°å€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670415435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1615572,"avatar":"https://static001.geekbang.org/account/avatar/00/18/a6/d4/8d50d502.jpg","nickname":"ç®€ç®€å•å•","note":"","ucode":"5DD625D84ED7D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595888,"discussion_content":"æ‰¾åˆ°é—®é¢˜äº†ï¼Œ502æ˜¯å› ä¸º minikube è‡ªå·±åœæ­¢äº†ã€‚ä»æ–° kubectl start å°±è¡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670437175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1615572,"avatar":"https://static001.geekbang.org/account/avatar/00/18/a6/d4/8d50d502.jpg","nickname":"ç®€ç®€å•å•","note":"","ucode":"5DD625D84ED7D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595887,"discussion_content":"æˆ‘ä¹Ÿæ˜¯502 ä½ é‚£è§£å†³äº†æ²¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670434508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362522,"user_name":"è·¯å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1700663,"ip_address":"ä¸Šæµ·","ucode":"AC42E46434A569","user_header":"https://static001.geekbang.org/account/avatar/00/19/f3/37/30a09a4a.jpg","comment_is_top":false,"comment_ctime":1668592377,"is_pvip":false,"replies":[{"id":131843,"content":"å¯ä»¥è¯•è¯•å…ˆç”¨dockerä¸‹è½½é•œåƒï¼Œç„¶åç”¨minikube loadåŠ è½½è¿›minikubeçš„èŠ‚ç‚¹ã€‚\n\nå¦å¤–MariaDBçš„é•œåƒä¸åœ¨gcr.ioï¼Œè€Œæ˜¯åœ¨docker hubä¸Šï¼Œæ‰€ä»¥æ¢å›½å†…æºå¯èƒ½æ²¡ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1668647995,"ip_address":"ä¸Šæµ·","comment_id":362522,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"podä¸€ç›´æ˜¯ContainerCreatingçŠ¶æ€ï¼Œå‡ åˆ†é’Ÿåå˜ImagePullBackOffï¼Œæ‹‰å–ä¸äº†mariadb:10é•œåƒ\næ‰§è¡Œminikube delete\nminikube start --kubernetes-version=v1.23.3 --image-mirror-country=&#39;cn&#39; --image-repository=&#39;registry.cn-hangzhou.aliyuncs.com&#47;google_containers&#39; --force\næŠŠrepositoryæ¢æˆå›½å†…çš„è¿˜æ˜¯è€æ ·å­ï¼Œå¡åŠå¤©äº†\nkubectl describe pod maria-podçš„Events:\nNormal  Pulling    4m47s  kubelet            Pulling image &quot;mariadb:10&quot;","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593905,"discussion_content":"å¯ä»¥è¯•è¯•å…ˆç”¨dockerä¸‹è½½é•œåƒï¼Œç„¶åç”¨minikube loadåŠ è½½è¿›minikubeçš„èŠ‚ç‚¹ã€‚\n\nå¦å¤–MariaDBçš„é•œåƒä¸åœ¨gcr.ioï¼Œè€Œæ˜¯åœ¨docker hubä¸Šï¼Œæ‰€ä»¥æ¢å›½å†…æºå¯èƒ½æ²¡ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668647995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007240,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/AkcVibvqux0qrKFbV7skQvQfHsl96tu9HTSaromQyzf7OOSacoorSDreBNbwOdlBeOrKr3Alc1zle66wKkibrL5g/132","nickname":"å­¦ç”Ÿç›‘ç‹±","note":"","ucode":"CA9510F6211FCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617812,"discussion_content":"minikube image load mariadb:10","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1683883984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361851,"user_name":"edward","can_delete":false,"product_type":"c1","uid":1604798,"ip_address":"åŒ—äº¬","ucode":"09F7A5B8D2E7BD","user_header":"","comment_is_top":false,"comment_ctime":1667914865,"is_pvip":false,"replies":[{"id":131636,"content":"æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œå‘½ä»¤æ˜¯docker run -d --rm --net=host nginx:alpineï¼Œ ç„¶åç”¨docker exec -it xxx ip addrï¼Œå’ŒUbuntuå®¿ä¸»æœºé‡Œæ˜¯ä¸€æ ·çš„ã€‚\n\nå…·ä½“åŸå› å¯ä»¥å†æ‰¾æ‰¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1667960293,"ip_address":"åŒ—äº¬","comment_id":361851,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è€å¸ˆè¯·é—®ä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘åœ¨æœ¬åœ°ubuntuä¸‹ip addr å’Œæˆ‘è¿›å…¥nginxçš„dockerå®¹å™¨å†…éƒ¨æ‰§è¡Œip addr æ²¡çœ‹åˆ°åŒä¸€ä¸ªIPå‘¢ï¼Œå¯åŠ¨dockeræ—¶ç¡®å®ä½¿ç”¨äº† --net=host å‚æ•°ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593114,"discussion_content":"æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œå‘½ä»¤æ˜¯docker run -d --rm --net=host nginx:alpineï¼Œ ç„¶åç”¨docker exec -it xxx ip addrï¼Œå’ŒUbuntuå®¿ä¸»æœºé‡Œæ˜¯ä¸€æ ·çš„ã€‚\n\nå…·ä½“åŸå› å¯ä»¥å†æ‰¾æ‰¾ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1667960294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1604798,"avatar":"","nickname":"edward","note":"","ucode":"09F7A5B8D2E7BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593252,"discussion_content":"å…·ä½“åŸå› æ²¡æ‰¾åˆ°ï¼Œå¸è½½docker desktop é‡æ–°å®‰è£…dockeråå°±æ­£å¸¸äº†ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668052818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360334,"user_name":"å¯å¯","can_delete":false,"product_type":"c1","uid":1053294,"ip_address":"ä¸Šæµ·","ucode":"297A5D32949128","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1VPGSQg7SqrN1Gutx31Kicks2icZjTCg1gZoDLfEcSSricYD6l5qQgE3MkMpqlhkM4gMicymOYzaudg/132","comment_is_top":false,"comment_ctime":1666438474,"is_pvip":true,"replies":[{"id":131151,"content":"æ˜¯çš„ï¼Œè¿™ä¸ªä¸€å®šè¦æ³¨æ„ã€‚\n\nminikubeåœ¨å®ƒçš„è™šæ‹ŸèŠ‚ç‚¹é‡Œåˆè¿è¡Œäº†ä¸€ä¸ªdocker daemonï¼Œå¤–ç•Œæ˜¯çœ‹ä¸åˆ°çš„ï¼Œå¯ä»¥æƒ³è±¡æˆæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1666588678,"ip_address":"ä¸Šæµ·","comment_id":360334,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"kubectl apply -f wp-pod.ymlæ‰§è¡Œåæ¯æ¬¡éƒ½å¤±è´¥ï¼Œçœ‹äº†ä¸€ä¸‹kubectl describe pod wp-podï¼Œå‘ç°æ˜¯æ‹‰å»é•œåƒè¶…æ—¶ã€‚æˆ‘å°±çº³é—·ä¸ºå•¥æˆ‘æœ¬åœ°å­˜åœ¨wordpress:5çš„dockeré•œåƒï¼Œä¸ºå•¥è¿™é‡Œæ‰¾ä¸åˆ°å‘¢ã€‚åæ¥åœ¨ç½‘ä¸Šçœ‹åˆ°minikubeä½¿ç”¨ç‹¬ç«‹çš„docker daemonï¼Œä¸åŒäºæœ¬åœ°çš„dockerå®ˆæŠ¤è¿›ç¨‹ã€‚æ‰€ä»¥éœ€è¦å…ˆæŠŠæœ¬åœ°çš„dockeré•œåƒå¯¼å…¥åˆ°minikubeä¹‹ä¸­æ‰èƒ½ä½¿ç”¨ã€‚\ndocker save wordpress:5 | (eval $(minikube docker-env) &amp;&amp; docker load)\næ­¤å‘½ä»¤å°†é•œåƒä¿å­˜ä¸ºtarå­˜æ¡£,ç„¶åå°†é•œåƒåŠ è½½åˆ°minikubeä¸­ã€‚è¿™æ—¶å€™åˆ é™¤æ‰ä¹‹å‰applyå¤±è´¥çš„podï¼Œé‡æ–°applyå°±æˆåŠŸäº†ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591455,"discussion_content":"æ˜¯çš„ï¼Œè¿™ä¸ªä¸€å®šè¦æ³¨æ„ã€‚\n\nminikubeåœ¨å®ƒçš„è™šæ‹ŸèŠ‚ç‚¹é‡Œåˆè¿è¡Œäº†ä¸€ä¸ªdocker daemonï¼Œå¤–ç•Œæ˜¯çœ‹ä¸åˆ°çš„ï¼Œå¯ä»¥æƒ³è±¡æˆæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666588678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355725,"user_name":"Aioria","can_delete":false,"product_type":"c1","uid":1161407,"ip_address":"ä¸Šæµ·","ucode":"E7158D2E1C1B72","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/bf/3a6e8773.jpg","comment_is_top":false,"comment_ctime":1661695893,"is_pvip":false,"replies":[{"id":129470,"content":"kubectl port-forwardåªèƒ½ç”¨æ¥æµ‹è¯•ï¼Œä¸èƒ½ç”¨äºç”Ÿäº§ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ci&#47;cdé‡Œç”¨ï¼Œåº”è¯¥æ”¹æˆserviceçš„æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1661743665,"ip_address":"ä¸Šæµ·","comment_id":355725,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘é—®ï¼Œ` kubectl port-forward`è¿™æ¡å‘½ä»¤æ˜¯å¦ä¹Ÿèƒ½åœ¨.ymlæ–‡ä»¶ä¸­æè¿°å‘¢ï¼Ÿè¿è¡ŒPodåå†ä»¥å‘½ä»¤æ–¹å¼æ˜ å°„ç«¯å£ï¼Œä¼¼ä¹ä¸åˆ©äºCI&#47;CDã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585640,"discussion_content":"kubectl port-forwardåªèƒ½ç”¨æ¥æµ‹è¯•ï¼Œä¸èƒ½ç”¨äºç”Ÿäº§ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ci/cdé‡Œç”¨ï¼Œåº”è¯¥æ”¹æˆserviceçš„æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661743665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353664,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"åŒ—äº¬","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1659666201,"is_pvip":false,"replies":[{"id":128585,"content":"è¿™ä¸ªä¸æ˜¯Kubernetesçš„å®˜æ–¹æ¦‚å¿µï¼Œæ˜¯æˆ‘è‡ªå·±çš„ç†è§£ï¼Œä½ å¯ä»¥å‚è€ƒæ¥æ–¹ä¾¿å­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659667812,"ip_address":"åŒ—äº¬","comment_id":353664,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œå®ä½“å¯¹è±¡å’Œéå®ä½“å¯¹è±¡æ˜¯æ€ä¹ˆåŒºåˆ†çš„ï¼Ÿ å¸¦æœ‰å®¹å™¨çš„å°±æ˜¯å®ä½“å¯¹è±¡å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582775,"discussion_content":"è¿™ä¸ªä¸æ˜¯Kubernetesçš„å®˜æ–¹æ¦‚å¿µï¼Œæ˜¯æˆ‘è‡ªå·±çš„ç†è§£ï¼Œä½ å¯ä»¥å‚è€ƒæ¥æ–¹ä¾¿å­¦ä¹ ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659667812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353418,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"ä¸Šæµ·","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1659425916,"is_pvip":false,"replies":[{"id":128482,"content":"--net=hostæ˜¯è®©dockerç”¨æœ¬æœºçš„ç½‘ç»œï¼Œä¸æ˜¯bridgeç«¯å£æ˜ å°„ï¼Œå‰é¢åº”è¯¥è®²è¿‡äº†ã€‚\n\nå¦‚æœæ˜¯æ‹’ç»è®¿é—®ï¼Œåº”è¯¥æ‰¾å…¶ä»–çš„åŸå› ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659430874,"ip_address":"ä¸Šæµ·","comment_id":353418,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œdocker run -d --rm \\ --net=host ï¼Œè¿™é‡Œçš„--net=host èµ·ä»€ä¹ˆä½œç”¨å•Šï¼ŸåŠ äº†ä»¥åï¼Œç›´æ¥æ‹’ç»è®¿é—®äº†ï¼Œä¹‹å‰ä¸éƒ½æ˜¯ä¼šç«¯å£æ˜ å°„ç”¨æ¥è®¿é—®çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582423,"discussion_content":"--net=hostæ˜¯è®©dockerç”¨æœ¬æœºçš„ç½‘ç»œï¼Œä¸æ˜¯bridgeç«¯å£æ˜ å°„ï¼Œå‰é¢åº”è¯¥è®²è¿‡äº†ã€‚\n\nå¦‚æœæ˜¯æ‹’ç»è®¿é—®ï¼Œåº”è¯¥æ‰¾å…¶ä»–çš„åŸå› ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659430874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352939,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"åŒ—äº¬","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1659025067,"is_pvip":false,"replies":[{"id":128329,"content":"port-forward åº”è¯¥åªèƒ½æœ¬æœºè®¿é—®ï¼Œå¯ä»¥ç”¨curléªŒè¯ä¸€ä¸‹ã€‚å®ƒçš„åŠŸèƒ½å¾ˆå¼±ï¼Œåªèƒ½ç”¨æ¥æµ‹è¯•ï¼Œè¦è¢«å¤–ç•Œè®¿é—®è¿˜æ˜¯å¾—ç”¨dockerå¯ä¸€ä¸ªNginxåå‘ä»£ç†æ‰è¡Œã€‚\n\nè¿™é“é¢˜åªè¦åŠ¨æ‰‹æ“ä½œè¿‡å°±è¡Œäº†ï¼Œæ²¡å¿…è¦ä¸€å®šè¦å‡ºç»“æœï¼Œå› ä¸ºåé¢ä¼šæœ‰æ›´å¥½çš„Kuberneteså¤„ç†æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659062470,"ip_address":"åŒ—äº¬","comment_id":352939,"utype":1}],"discussion_count":3,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"ç¬¬äºŒé¢˜æ ¹æ®è€å¸ˆçš„å›å¤ä¿®æ”¹äº†ä¸‹ï¼Œä½†æ˜¯è¿˜æ˜¯è¿ä¸ä¸Š\n\nvirtual-machine:~&#47;k8s-testing&#47;wordpress$ cat ngx-pod.yml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: ngx-cm\n\ndata:\n  default.conf: |-\n    server {\n      listen 80;\n      default_type text&#47;html;\n\n      location &#47; {\n        proxy_http_version 1.1;\n        proxy_set_header Host $host;\n        proxy_pass http:&#47;&#47;172.17.0.6:80;\n      }\n    }\n\n---\n\napiVersion: v1\nkind: Pod\nmetadata:\n  name: ngx-pod\n  labels:\n    app: nginx-alpine\n    role: website\n\nspec:\n  volumes:\n    - name: conf\n      configMap:\n        name: ngx-cm\n\n  containers:\n  - volumeMounts:\n    - mountPath: &#47;etc&#47;nginx&#47;conf.d&#47;\n      name: conf\n\n    image: nginx:alpine\n    name: ngx-pod\n    imagePullPolicy: IfNotPresent\n    ports:\n    - containerPort: 80\n\nport-forward é‚£é‡Œæˆ‘å–æ¶ˆäº† wp-pod çš„ port-forward, åŸå› æ˜¯è¿™é‡Œæ˜¯ç›´æ¥ä» ngx-pod bypass åˆ° wp-podï¼Œæ‰€ä»¥ä¸éœ€è¦ forward å¤–ç•Œçš„ç«¯å£ã€‚ä½†æ˜¯ ngx-pod åœ¨å®¹å™¨ä¸­ï¼Œè¿˜æ˜¯éœ€è¦çš„ï¼ŒæŒ‡ä»¤å¦‚ä¸‹\n\nkubectl port-forward ngx-pod 8080:80 &amp;\n\nä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œä» Mac æµè§ˆå™¨å°±æ˜¯è¿ä¸ä¸Šã€‚æˆ‘ä¹Ÿè¿›åˆ° ngx-pod ä¸Šæ£€æŸ¥äº†ï¼Œé…ç½®æ–‡ä»¶ä»€ä¹ˆçš„éƒ½å’Œä¸Šé¢å®šä¹‰çš„ä¸€æ ·ã€‚è¿˜çƒ¦è¯·è€å¸ˆåœ¨å¸®å¿™çœ‹çœ‹ ğŸ˜‚\n\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581896,"discussion_content":"port-forward åº”è¯¥åªèƒ½æœ¬æœºè®¿é—®ï¼Œå¯ä»¥ç”¨curléªŒè¯ä¸€ä¸‹ã€‚å®ƒçš„åŠŸèƒ½å¾ˆå¼±ï¼Œåªèƒ½ç”¨æ¥æµ‹è¯•ï¼Œè¦è¢«å¤–ç•Œè®¿é—®è¿˜æ˜¯å¾—ç”¨dockerå¯ä¸€ä¸ªNginxåå‘ä»£ç†æ‰è¡Œã€‚\n\nè¿™é“é¢˜åªè¦åŠ¨æ‰‹æ“ä½œè¿‡å°±è¡Œäº†ï¼Œæ²¡å¿…è¦ä¸€å®šè¦å‡ºç»“æœï¼Œå› ä¸ºåé¢ä¼šæœ‰æ›´å¥½çš„Kuberneteså¤„ç†æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659062470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625530,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","nickname":"YueShi","note":"","ucode":"8F7AFAE4641A7D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582648,"discussion_content":"Macæ— æ³•è®¿é—®çš„åŸå› åœ¨äºMacä¸Šçš„è½¯ä»¶æ¶æ„é—®é¢˜ï¼Œå†™äº†ä¸€ç¯‡æ–‡ç« ï¼ŒæœŸå¾…èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ©\n\nhttps://juejin.cn/post/7127679053242302477","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1659577508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185500,"avatar":"https://static001.geekbang.org/account/avatar/00/12/16/dc/e860a835.jpg","nickname":"è‚–äºŒéƒ","note":"","ucode":"BD1216F1DF0DA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582183,"discussion_content":"port-foward åé¢åŠ ä¸Š --addressè¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659285129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352816,"user_name":"ç½—è€€é¾™@åå¿˜","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1658967342,"is_pvip":true,"replies":[{"id":128295,"content":"Nginxé…ç½®æ–‡ä»¶é‡Œé™¤äº†è¦ç”¨WordPressçš„IPåœ°å€ï¼Œç«¯å£å·ä¹Ÿè¦æ˜¯WordPressçš„ç«¯å£ï¼Œä¹Ÿå°±æ˜¯80ã€‚\n\nä¹‹å‰åœ¨dockerç”¨çš„8080ï¼Œæ˜¯å› ä¸ºport-forwardæ˜ å°„çš„æ˜¯æœ¬åœ°ç«¯å£å·8080ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1658970986,"ip_address":"","comment_id":352816,"utype":1}],"discussion_count":2,"race_medal":2,"score":5,"product_id":100114501,"comment_content":"ç¬¬äºŒé¢˜ï¼šæ”¹æ˜¯èƒ½æ”¹ï¼Œä½†æ˜¯å°±æ˜¯è¿ä¸ä¸Š\nå·²ç»å‚è€ƒäº†è€å¸ˆç»™phyhouçš„å›å¤ä¸­çš„å¯¹Nginxé…ç½®ä¿®æ”¹ï¼Œæ¥ç€æ˜¯kubectl port-forward &lt;nginx&gt; 8080:80 &amp;ï¼Œç»“æœè¿˜æ˜¯è¿ä¸ä¸Š\n\nå®Œæ•´ä»£ç ï¼š\n#Nginx.yaml\napiVersion: v1\n\nkind: ConfigMap\n\nmetadata:\n\n  name: wpma-ngx-cm\n\n\n\ndata:\n\n  default.conf: |-\n\n    server {\n\n      listen 80;\n\n      default_type text&#47;html;\n\n\n\n      location &#47; {\n\n          proxy_http_version 1.1;\n\n          proxy_set_header Host $host;\n\n          proxy_pass http:&#47;&#47;172.17.0.6:8080; &#47;&#47;wordpress ip\n\n      }\n\n    }\n\n\n\n---\n\n\n\napiVersion: v1\n\nkind: Pod\n\nmetadata:\n\n  labels:\n\n    run: wpma-ngx\n\n  name: wpma-ngx\n\n\n\nspec:\n\n  containers:\n\n  - image: nginx:alpine\n\n    name: wpma-ngx\n\n    imagePullPolicy: IfNotPresent\n\n    ports:\n\n    - containerPort: 80\n\n\n\n    volumeMounts:\n\n      - name: wpma-ngx-cm\n\n        mountPath: &quot;etc&#47;nginx&#47;conf.d&quot;\n\n  volumes:\n\n    - name: wpma-ngx-cm\n\n      configMap:\n\n        name: wpma-ngx-cm","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581749,"discussion_content":"Nginxé…ç½®æ–‡ä»¶é‡Œé™¤äº†è¦ç”¨WordPressçš„IPåœ°å€ï¼Œç«¯å£å·ä¹Ÿè¦æ˜¯WordPressçš„ç«¯å£ï¼Œä¹Ÿå°±æ˜¯80ã€‚\n\nä¹‹å‰åœ¨dockerç”¨çš„8080ï¼Œæ˜¯å› ä¸ºport-forwardæ˜ å°„çš„æ˜¯æœ¬åœ°ç«¯å£å·8080ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658970986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009622,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/d6/2f5cb85c.jpg","nickname":"xmr","note":"","ucode":"1BBF165F91F10B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586889,"discussion_content":"mountPath: &#34;etc/nginx/conf.d&#34;å†™é”™äº†ï¼Œåº”è¯¥æ˜¯mountPath: &#34;/etc/nginx/conf.d&#34;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662571850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352814,"user_name":"ç½—è€€é¾™@åå¿˜","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1658962233,"is_pvip":true,"replies":[{"id":128294,"content":"good","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1658970908,"ip_address":"","comment_id":352814,"utype":1}],"discussion_count":1,"race_medal":2,"score":5,"product_id":100114501,"comment_content":"ç»ˆäºèƒ½æŠŠç½‘ç«™ç»™å¼„èµ·æ¥äº†ï¼Œå¼€å¿ƒã€‚\n\nç¬¬ä¸€é¢˜ï¼šæ”¹æˆç”¨secretï¼Œå¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠè€å¸ˆçš„ç¤ºä¾‹é‡Œçš„configMapRefæ”¹æˆsecretRef\nå®Œæ•´ä»£ç ï¼š\n#maria secret\n\napiVersion: v1\n\ndata:\n\n  DATABASE: ZGI=\n\n  PASSWORD: MTIz\n\n  ROOT_PASSWORD: MTIz\n\n  USER: d3A=\n\nkind: Secret\n\nmetadata:\n\n  creationTimestamp: null\n\n  name: maria-sc\n\n\n\n---\n\n\n\napiVersion: v1\n\nkind: Pod\n\nmetadata:\n\n  labels:\n\n    app: wordpress\n\n    role: database\n\n  name: mariasc-pod\n\n\n\nspec:\n\n  containers:\n\n  - image: mariadb:10\n\n    name: maria\n\n    imagePullPolicy: IfNotPresent\n\n    ports:\n\n    - containerPort: 3306\n\n  \n\n    envFrom:\n\n    - prefix: &#39;MARIADB_&#39;\n\n      secretRef:\n\n        name: maria-sc\n\n\n#WordPress secret\napiVersion: v1\n\ndata:\n\n  HOST: MTcyLjE3LjAuNw==\n\n  NAME: ZGI=\n\n  PASSWORD: MTIz\n\n  USER: d3A=\n\nkind: Secret\n\nmetadata:\n\n  creationTimestamp: null\n\n  name: wp-sc\n\n\n\n---\n\n\n\napiVersion: v1\n\nkind: Pod\n\nmetadata:\n\n  labels:\n\n    app: wordpress\n\n    role: website\n\n  name: wpsc-pod\n\n\n\nspec:\n\n  containers:\n\n  - image: wordpress:5\n\n    name: wordpress\n\n    imagePullPolicy: IfNotPresent\n\n    ports:\n\n    - containerPort: 80\n\n\n\n    envFrom:\n\n    - prefix: &#39;WORDPRESS_DB_&#39;\n\n      secretRef:\n\n        name: wp-sc\n\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581748,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658970908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352812,"user_name":"ç½—è€€é¾™@åå¿˜","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1658949182,"is_pvip":true,"replies":[{"id":128293,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1658970892,"ip_address":"","comment_id":352812,"utype":1}],"discussion_count":1,"race_medal":2,"score":5,"product_id":100114501,"comment_content":"ç»ˆäºè·‘é€šäº†ï¼Œæ„ŸåŠ¨","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581747,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658970892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352569,"user_name":"Matthew","can_delete":false,"product_type":"c1","uid":2843865,"ip_address":"","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1658765309,"is_pvip":false,"replies":[{"id":128261,"content":"ç”¨kubectl describe æ£€æŸ¥ä¸€ä¸‹podï¼Œå¯èƒ½æ˜¯é•œåƒæ²¡æ‹‰å–ä¸‹æ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1658813833,"ip_address":"","comment_id":352569,"utype":1}],"discussion_count":4,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"æ‰§è¡Œ kubectl apply  -f mariadb-pod.yml ä»¥åï¼ŒPODçš„çŠ¶æ€ä¸€ç›´æ˜¯ ContainerCreatingï¼Œæ˜¯ä»€ä¹ˆåŸå› ï¼Ÿåº”è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581494,"discussion_content":"ç”¨kubectl describe æ£€æŸ¥ä¸€ä¸‹podï¼Œå¯èƒ½æ˜¯é•œåƒæ²¡æ‹‰å–ä¸‹æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658813834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"å¥•","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581568,"discussion_content":"ä¹Ÿå¯èƒ½æ˜¯æŠ¥é”™äº†ï¼Œä½¿ç”¨ kubectl logs pod [pod name]","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658842817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599344,"discussion_content":"å¯ä»¥é€šè¿‡docker exec -it ngix shè¿›å…¥åˆ°é•œåƒå†…éƒ¨ï¼Œé…ç½®dockerçš„register-mirrorï¼Œç„¶åæå‰æ‹‰å–ï¼Œè¿™æ ·å°±å¯ä»¥å¿«é€Ÿå¯åŠ¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673450163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1640477,"avatar":"https://static001.geekbang.org/account/avatar/00/19/08/1d/30b32c93.jpg","nickname":"è·¯äººä¸","note":"","ucode":"078F0235DAFCA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582374,"discussion_content":"pull image å¾ˆè´¹æ—¶é—´ã€‚è€å¿ƒç­‰å¾…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659411875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396041,"user_name":"å¶æ˜","can_delete":false,"product_type":"c1","uid":1412429,"ip_address":"æ±Ÿè‹","ucode":"D0B4B7660DA766","user_header":"https://static001.geekbang.org/account/avatar/00/15/8d/4d/992070e8.jpg","comment_is_top":false,"comment_ctime":1732783044,"is_pvip":false,"replies":[{"id":143904,"content":"å½“ç„¶æ˜¯åº”ç”¨æ”¯æŒçš„ï¼Œå¦åˆ™å®ƒä¹Ÿä¸è®¤è¯†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1734341853,"ip_address":"ä¸Šæµ·","comment_id":396041,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬èƒ½å®šä¹‰çš„ç¯å¢ƒå˜é‡æ˜¯æ‰€æœ‰çš„ï¼Œè¿˜æ˜¯åªèƒ½ä½¿ç”¨åˆ«äººé¢„å…ˆè®¾è®¡ç»™æˆ‘ä»¬è®¾å®šçš„ç¯å¢ƒå˜é‡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655180,"discussion_content":"å½“ç„¶æ˜¯åº”ç”¨æ”¯æŒçš„ï¼Œå¦åˆ™å®ƒä¹Ÿä¸è®¤è¯†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734341853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396040,"user_name":"å¶æ˜","can_delete":false,"product_type":"c1","uid":1412429,"ip_address":"æ±Ÿè‹","ucode":"D0B4B7660DA766","user_header":"https://static001.geekbang.org/account/avatar/00/15/8d/4d/992070e8.jpg","comment_is_top":false,"comment_ctime":1732782973,"is_pvip":false,"replies":[{"id":143902,"content":"good","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1734341791,"ip_address":"ä¸Šæµ·","comment_id":396040,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"å¯ä»¥ç”¨ Secret æ¥å®ç°ï¼Œå¯ä»¥ç”¨ --from-literal ç”Ÿæˆ Yaml æ ·æ¿ï¼Œä¹Ÿå¯ä»¥ç”¨ echo -n &quot;text&quot; | base64 æ¥ç”ŸæˆåŠ å¯†åçš„æ–‡æœ¬ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œ ConfigMap æ–‡ä»¶ä¸­çš„ KIND è¦æ”¹æˆ Secretï¼Œä»¥åŠ Pod æ–‡ä»¶é‡Œ envFrom ä¸­çš„ configMapRef è¦æ”¹æˆ secretRef\nexport out=&quot;--dry-run=client -o yaml&quot; # å®šä¹‰Shellå˜é‡\nkubectl create secret generic maria-cm \\\n--from-literal=DATABASE=db \\\n--from-literal=USER=wp \\\n--from-literal=PASSWORD=123 \\\n--from-literal=ROOT_PASSWORD=123 \\\n$out\n","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655178,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734341791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393099,"user_name":"å±±èŒ¶èŠ±","can_delete":false,"product_type":"c1","uid":1014676,"ip_address":"æ²³å—","ucode":"103BF2B46C5E56","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7b/94/8f68c15b.jpg","comment_is_top":false,"comment_ctime":1722846997,"is_pvip":false,"replies":[{"id":142767,"content":"amazingï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1722861888,"ip_address":"ä¸Šæµ·","comment_id":393099,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"24å¹´6æœˆèµ·dockerå›½å†…å·²ç»æ— æ³•è®¿é—®dockerhubäº†ï¼Œæ‰€ä»¥åœ¨minikubeé‡Œpull imageå¾ˆè´¹åŠ²ã€‚\nä¸¤ç§æ–¹å¼è§£å†³ï¼š\n1.ç»™ubuntuå®‰è£…ä»£ç†\n2.dockerä½¿ç”¨é•œåƒï¼Œç„¶åæ‹‰å–imageï¼Œç„¶åå†åŠ è½½åˆ°minikubeé‡Œ\n\næˆ‘è¿™é‡Œç”¨ç¬¬äºŒç§æ–¹å¼ï¼š\n1. å°†mariadbé•œåƒä¿å­˜æˆmariadb.tar\n$ docker save -o mariadb.tar mariadb:10\n\n2.åŠ è½½åˆ°minikubeé‡Œ\n$ minikube image load mariadb.tar\n\n3.æŸ¥çœ‹æ˜¯å¦åŠ è½½æˆåŠŸ\n$ minikube ssh &quot;docker images&quot;\n\næ›²çº¿æ•‘å›½å§ï¼Œä¸ç„¶kubectl applyæ€»æ˜¯æ— æ³•å¯åŠ¨pod\nè‡³äºdocker é•œåƒï¼Œå¤§å®¶å»ç½‘ä¸Šæœæœï¼Œå¾ˆå¤šçš„","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649144,"discussion_content":"amazingï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1722861888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392306,"user_name":"æ’éª¨","can_delete":false,"product_type":"c1","uid":1811277,"ip_address":"å¹¿ä¸œ","ucode":"A413CF46211E1F","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a3/4d/59390ba9.jpg","comment_is_top":false,"comment_ctime":1720570269,"is_pvip":false,"replies":[{"id":142591,"content":"great.","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1720579689,"ip_address":"ä¸Šæµ·","comment_id":392306,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"port-forwardè½¬å‘çš„ç«¯å£åªèƒ½æœ¬åœ°è®¿é—®ï¼Œä¸èƒ½å¤–éƒ¨è®¿é—®ï¼Œè¿™ä¹Ÿæ˜¯è€å¸ˆä¸ºä»€ä¹ˆè¦ç”¨dockerçš„nginxå®¹å™¨å†æ¬¡è½¬å‘çš„åŸå› ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647755,"discussion_content":"great.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720579689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388268,"user_name":"å…š","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"æ²³åŒ—","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1709763529,"is_pvip":false,"replies":[{"id":141364,"content":"è¿™äº›ä¸æ˜¯èƒ½ä¸€ä¸‹å­è§£é‡Šæ¸…æ¥šçš„ï¼Œä¹Ÿè¶…å‡ºäº†â€œå…¥é—¨â€çš„èŒƒå›´ï¼Œè§è°…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1709801593,"ip_address":"åŒ—äº¬","comment_id":388268,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"ç½‘ç»œåè¾¹è¿˜ä¼šè®²ä¹ˆï¼Ÿè¿™å—æœ‰ç‚¹å›°æƒ‘ï¼Œkubectl port-forward wp-pod 8080:80 &amp; è¿™æ¡å‘½ä»¤æ˜¯æŠŠwp-podçš„80ç«¯å£é€šè¿‡é›†ç¾¤(æœ¬åœ°)8080è½¬å‘ï¼Œè¦æ˜¯ç‰©ç†é›†ç¾¤å¯æ˜¯æ²¡æœ‰æœ¬åœ°çš„ï¼Œé‚£åˆæ˜¯é€šè¿‡å“ªå°æœåŠ¡å™¨çš„ç«¯å£è¿›è¡Œè½¬å‘å‘¢ï¼Ÿserverçš„è¯ä¹Ÿæœ‰å¤šä¸ªï¼Œåˆå¦‚ä½•ç¡®å®šæˆ–è€…è¯¥å¦‚ä½•è¿›è¡Œè®¿é—®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638694,"discussion_content":"è¿™äº›ä¸æ˜¯èƒ½ä¸€ä¸‹å­è§£é‡Šæ¸…æ¥šçš„ï¼Œä¹Ÿè¶…å‡ºäº†â€œå…¥é—¨â€çš„èŒƒå›´ï¼Œè§è°…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709801593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388267,"user_name":"å…š","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"æ²³åŒ—","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1709762320,"is_pvip":false,"replies":[{"id":141362,"content":"ä½¿ç”¨envFrom","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1709801539,"ip_address":"åŒ—äº¬","comment_id":388267,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"ç¬¬ä¸€æ­¥ æ•°æ®åº“é…ç½®æ–‡ä»¶æ²¡æœ‰æ¼”ç¤ºä»€ä¹ˆæ—¶å€™æ³¨å…¥è¿›k8s","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638692,"discussion_content":"ä½¿ç”¨envFrom","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709801539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386287,"user_name":"Geek_a17d54","can_delete":false,"product_type":"c1","uid":2924566,"ip_address":"ç¾å›½","ucode":"98E70199CB485E","user_header":"","comment_is_top":false,"comment_ctime":1704444069,"is_pvip":false,"replies":[{"id":140856,"content":"å¯ä»¥åœ¨wp-podé‡Œå°è¯•è¿æ¥mariaDBï¼Œåº”è¯¥æ˜¯è¿™ä¸¤ä¸ªpodä¹‹é—´å‡ºäº†é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1704850123,"ip_address":"ä¸Šæµ·","comment_id":386287,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"wp-podæŠ¥error establishing a database connection\nkubectl execè¿›å…¥mariadb-podï¼Œä½¿ç”¨mysql -uwp -pèƒ½è¿›å…¥mysql\nkubectl exec è¿›å» wp-pod, echo $WORDPRESS_DB_USERç­‰å‘½ä»¤æŸ¥çœ‹ç¯å¢ƒå˜é‡å’ŒHOSTåœ°å€ä¹Ÿæ²¡é—®é¢˜\nå¦‚ä½•æ’æŸ¥å‘¢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635448,"discussion_content":"å¯ä»¥åœ¨wp-podé‡Œå°è¯•è¿æ¥mariaDBï¼Œåº”è¯¥æ˜¯è¿™ä¸¤ä¸ªpodä¹‹é—´å‡ºäº†é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704850123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383747,"user_name":"Geek_36c6f7","can_delete":false,"product_type":"c1","uid":1120421,"ip_address":"æ¾³å¤§åˆ©äºš","ucode":"C53E2AAD96DAEA","user_header":"","comment_is_top":false,"comment_ctime":1699544674,"is_pvip":false,"replies":[{"id":139957,"content":"å¯èƒ½æ˜¯é•œåƒæ²¡ä¸‹è½½æˆåŠŸï¼Œç”¨inspectã€logç­‰å‘½ä»¤çœ‹çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1699600740,"ip_address":"åŒ—äº¬","comment_id":383747,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è¯·é—®ä»¥ä¸‹æŠ¥é”™æ€ä¹ˆè§£å†³ï¼š\nError from server (BadRequest): container &quot;maria&quot; in pod &quot;maria-pod&quot; is waiting to start: ContainerCreating\n","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631492,"discussion_content":"å¯èƒ½æ˜¯é•œåƒæ²¡ä¸‹è½½æˆåŠŸï¼Œç”¨inspectã€logç­‰å‘½ä»¤çœ‹çœ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699600740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372634,"user_name":"æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1039351,"ip_address":"åŒ—äº¬","ucode":"652BF9B9DB377B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/f7/29cff40f.jpg","comment_is_top":false,"comment_ctime":1681371203,"is_pvip":false,"replies":[{"id":136016,"content":"ä¸åŠ æŒ‡å®šåŸŸåé»˜è®¤å°±æ˜¯ä»dockerhubä¸Šæ‹‰å–ï¼Œåº”è¯¥è¿˜æ˜¯ç½‘ç»œçš„åŸå› å§ï¼Œé…ç½®ä¸‹è½½é•œåƒå¯ä»¥æ‰¾ä¸€äº›èµ„æ–™çœ‹çœ‹ï¼Œæˆ‘ä¸€èˆ¬éƒ½æ˜¯ç›´æ¥ç”¨çš„dockerhubï¼Œsorryã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1681437729,"ip_address":"ä¸Šæµ·","comment_id":372634,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®k8sä¸­çš„é•œåƒä¸‹è½½åœ°å€å¦‚ä½•é…ç½®å‘€ï¼Ÿæ˜¯&#47;etc&#47;docker&#47;daemon.jsonä¸­çš„åœ°å€ä¹ˆï¼Ÿæˆ‘åœ¨apply mariadbçš„æ—¶å€™ï¼Œæç¤ºé•œåƒä¸‹è½½å¤±è´¥ã€‚æ„Ÿè§‰å¥½åƒç”¨çš„ä¸æ˜¯dockerçš„é•œåƒåœ°å€ã€‚\næˆ‘æŠŠymlä¸­çš„é•œåƒç›´æ¥å†™æˆimage: hub-mirror.c.163.com&#47;library&#47;mariadb:10ï¼Œè¿˜æ˜¯åŒæ ·çš„é—®é¢˜ã€‚\nWarning  Failed     93s (x3 over 4m40s)  kubelet            Failed to pull image &quot;mariadb:10&quot;: rpc error: code = Unknown desc = context canceled\n  Warning  Failed     93s (x3 over 4m40s)  kubelet            Error: ErrImagePull","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613638,"discussion_content":"ä¸åŠ æŒ‡å®šåŸŸåé»˜è®¤å°±æ˜¯ä»dockerhubä¸Šæ‹‰å–ï¼Œåº”è¯¥è¿˜æ˜¯ç½‘ç»œçš„åŸå› å§ï¼Œé…ç½®ä¸‹è½½é•œåƒå¯ä»¥æ‰¾ä¸€äº›èµ„æ–™çœ‹çœ‹ï¼Œæˆ‘ä¸€èˆ¬éƒ½æ˜¯ç›´æ¥ç”¨çš„dockerhubï¼Œsorryã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681437729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1039351,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/f7/29cff40f.jpg","nickname":"æ˜Ÿ","note":"","ucode":"652BF9B9DB377B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613547,"discussion_content":"æˆ‘ç”¨çš„ç½‘æ˜“äº‘çš„dockeræºã€‚ç›´æ¥docker pullä¹Ÿä¼šå¡ä½ã€‚\næœ€åé€šè¿‡å¢åŠ ä»£ç†ï¼Œç›´æ¥ç”¨é»˜è®¤çš„æºè§£å†³ã€‚éœ€è¦åœ¨slaveèŠ‚ç‚¹é…ç½®dockerä»£ç†ï¼Œåœ¨masterèŠ‚ç‚¹é…ç½®æ²¡æœ‰ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681387948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369955,"user_name":"Geek_062a15","can_delete":false,"product_type":"c1","uid":3563386,"ip_address":"æ±Ÿè‹","ucode":"C51FC919998974","user_header":"","comment_is_top":false,"comment_ctime":1678176204,"is_pvip":false,"replies":[{"id":134878,"content":"å¦‚æœè¿è¡Œæ—¶æ˜¯dockerï¼Œå¯ä»¥ç™»å½•èŠ‚ç‚¹ç”¨docker imagesçœ‹ï¼Œå¦‚æœæ˜¯å…¶ä»–çš„è¿è¡Œæ—¶å°±è¦ç”¨ç›¸åº”çš„å‘½ä»¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1678236392,"ip_address":"ä¸Šæµ·","comment_id":369955,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"æ€ä¹ˆæŸ¥çœ‹k8sæ‹‰å–çš„é•œåƒå‘¢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608031,"discussion_content":"å¦‚æœè¿è¡Œæ—¶æ˜¯dockerï¼Œå¯ä»¥ç™»å½•èŠ‚ç‚¹ç”¨docker imagesçœ‹ï¼Œå¦‚æœæ˜¯å…¶ä»–çš„è¿è¡Œæ—¶å°±è¦ç”¨ç›¸åº”çš„å‘½ä»¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678236392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366289,"user_name":"Lorry","can_delete":false,"product_type":"c1","uid":1066409,"ip_address":"è¾½å®","ucode":"BD4754D0F1D786","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","comment_is_top":false,"comment_ctime":1673565149,"is_pvip":false,"replies":[{"id":133478,"content":"WordPressæ˜¯PHPå†™çš„ï¼Œæˆ‘æ²¡æœ‰å¤ªäº†è§£è¿‡ï¼Œæ‰€ä»¥å›ç­”ä¸äº†ï¼ŒæŠ±æ­‰ã€‚\n\nç›´æ¥ç”¨8080è®¿é—®æ˜¯é…ç½®äº†å“ªéƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰Serviceï¼ŒWordPress Podåªèƒ½æ˜¯å†…éƒ¨IPåœ°å€ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1673580530,"ip_address":"ä¸Šæµ·","comment_id":366289,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"&quot;è¿™æ˜¯å› ä¸º WordPress ç½‘ç«™ä½¿ç”¨äº† URL é‡å®šå‘ï¼Œç›´æ¥ä½¿ç”¨â€œ8080â€ä¼šå¯¼è‡´è·³è½¬æ•…éšœ&quot;ï¼Œè¿™é‡Œwordpressé‡å®šå‘æ˜¯å‡ºäºä»€ä¹ˆåŸå› å‘¢ï¼Ÿè€å¸ˆè¯·ä»‹ç»ä¸€ä¸‹ï¼Œå¦å¤–æˆ‘è¿™è¾¹å³ä½¿æ²¡æœ‰nginxï¼Œç›´æ¥è®¿é—®8080å¯ä»¥æ­£å¸¸è®¿é—®ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599548,"discussion_content":"WordPressæ˜¯PHPå†™çš„ï¼Œæˆ‘æ²¡æœ‰å¤ªäº†è§£è¿‡ï¼Œæ‰€ä»¥å›ç­”ä¸äº†ï¼ŒæŠ±æ­‰ã€‚\n\nç›´æ¥ç”¨8080è®¿é—®æ˜¯é…ç½®äº†å“ªéƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰Serviceï¼ŒWordPress Podåªèƒ½æ˜¯å†…éƒ¨IPåœ°å€ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673580530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366082,"user_name":"Geek_ec6229","can_delete":false,"product_type":"c1","uid":3231579,"ip_address":"åŒ—äº¬","ucode":"24DF2FDA6BCE13","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/tjZDHOybO07lltibjmDiaQKdpE1C3ul9c9wmUWwnVohS5fSEOPcfK2d9ZvKEHu6ibMLXYNUSrA23w08Ty5MFYMfzA/132","comment_is_top":false,"comment_ctime":1673365085,"is_pvip":false,"replies":[{"id":133386,"content":"å½“ç„¶å¯ä»¥äº†ï¼Œè¿™æ˜¯Kubernetesçš„åŸºæœ¬ç½‘ç»œæ¨¡å‹ï¼Œå¯ä»¥å‚çœ‹åé¢çš„è¯¾ç¨‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1673413874,"ip_address":"åŒ—äº¬","comment_id":366082,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è¯·é—®ï¼šåŒä¸ªé›†ç¾¤èŠ‚ç‚¹å†…ï¼Œpodä¹‹é—´å¯ä»¥é€šè¿‡kubernetesåˆ†é…çš„ç§æœ‰ç½‘æ®µipäº’ç›¸è®¿é—®æ˜¯å—","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599229,"discussion_content":"å½“ç„¶å¯ä»¥äº†ï¼Œè¿™æ˜¯Kubernetesçš„åŸºæœ¬ç½‘ç»œæ¨¡å‹ï¼Œå¯ä»¥å‚çœ‹åé¢çš„è¯¾ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673413874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366054,"user_name":"aLong","can_delete":false,"product_type":"c1","uid":2409553,"ip_address":"ä¸Šæµ·","ucode":"11DB1B9C579811","user_header":"https://static001.geekbang.org/account/avatar/00/24/c4/51/5bca1604.jpg","comment_is_top":false,"comment_ctime":1673344087,"is_pvip":false,"replies":[{"id":133366,"content":"good","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1673353231,"ip_address":"ä¸Šæµ·","comment_id":366054,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"1. secreté…ç½®åï¼Œpodé‡Œé¢é…ç½®æ”¹æˆsecreté…ç½®åã€‚\n2. åœ¨macçš„minikubeç¯å¢ƒæ²¡é‡åˆ°ä¸Šé¢æåˆ°çš„nginxåä»£é—®é¢˜ã€‚pass äº†ğŸ˜œã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599147,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673353231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362110,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"åŒ—äº¬","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1668158123,"is_pvip":false,"replies":[{"id":131731,"content":"xmindï¼Œæˆ‘è§‰å¾—è¿˜æŒºå¥½ç”¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1668296908,"ip_address":"åŒ—äº¬","comment_id":362110,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œæ‚¨çš„è„‘å›¾æ˜¯ç”¨å“ªæ¬¾è½¯ä»¶ç”»çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593501,"discussion_content":"xmindï¼Œæˆ‘è§‰å¾—è¿˜æŒºå¥½ç”¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668296908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361646,"user_name":"mkcaptain","can_delete":false,"product_type":"c1","uid":2341231,"ip_address":"åŒ—äº¬","ucode":"0BF1BAE12B0C11","user_header":"https://static001.geekbang.org/account/avatar/00/23/b9/6f/b40d1acf.jpg","comment_is_top":false,"comment_ctime":1667729072,"is_pvip":false,"replies":[{"id":131530,"content":"dockerç½‘ç»œæ˜¯ç§æœ‰ç½‘ç»œï¼Œç›´æ¥è®¿é—®æ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»è¦ç”¨æœ¬åœ°ç½‘ç»œæ˜ å°„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1667733826,"ip_address":"åŒ—äº¬","comment_id":361646,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è€å¸ˆå¥½ï¼Œ\næˆ‘é…ç½®podå’Œnginxå®¹å™¨è¿‡ç¨‹éƒ½æˆåŠŸï¼Œä½†æœ€åæµè§ˆå™¨è®¿é—®ä¼šæœ‰å¦‚ä¸‹é”™è¯¯æç¤ºï¼š\nBad Request\r\nYour browser sent a request that this server could not understand.\r\nApache&#47;2.4.53 (Debian) Server at 172.17.0.4 Port 80\n\n172.17.0.4å·²ç»æ˜¯wp-podçš„ipï¼Œæ„Ÿè§‰æœ‰ç‚¹å¥‡æ€ªï¼Œçœ‹èµ·æ¥IPçš„è·¯å¾„æ˜¯æ­£ç¡®çš„ï¼Œæˆ‘ç†è§£æ˜¯wp-podçš„åº”ç”¨æœ‰é—®é¢˜ï¼Ÿè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592804,"discussion_content":"dockerç½‘ç»œæ˜¯ç§æœ‰ç½‘ç»œï¼Œç›´æ¥è®¿é—®æ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»è¦ç”¨æœ¬åœ°ç½‘ç»œæ˜ å°„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1667733826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2341231,"avatar":"https://static001.geekbang.org/account/avatar/00/23/b9/6f/b40d1acf.jpg","nickname":"mkcaptain","note":"","ucode":"0BF1BAE12B0C11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":592959,"discussion_content":"è°¢è°¢è€å¸ˆå›å¤ã€‚\næ˜¯è¯´åªèƒ½åœ¨minicubeçš„å®¿ä¸»æœºä¸Šï¼Œè‡ªå·±ç”¨å›¾å½¢å¼€æµè§ˆå™¨è®¿é—®ä¹ˆï¼Ÿ\næˆ‘æ˜¯åœ¨minicubeå®¿ä¸»æœºä¹‹å¤–çš„å…¶ä»–ä¸»æœºæµè§ˆå™¨ï¼Œè®¿é—®minicubeå®¿ä¸»æœºipï¼Œè¿™æ ·æ˜¯ä¸è¡Œä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667825581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":592804,"ip_address":"åŒ—äº¬","group_id":0},"score":592959,"extra":""}]}]},{"had_liked":false,"id":359961,"user_name":"rubys_","can_delete":false,"product_type":"c1","uid":1394115,"ip_address":"åŒ—äº¬","ucode":"931AD02864126A","user_header":"https://static001.geekbang.org/account/avatar/00/15/45/c3/775fe460.jpg","comment_is_top":false,"comment_ctime":1666090886,"is_pvip":false,"replies":[{"id":130932,"content":"å½“ç„¶äº†ï¼Œéƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸€ä¸ªpodï¼Œè¿™æ ·æ–¹ä¾¿ç‹¬ç«‹éƒ¨ç½²ã€ç®¡ç†ã€æ‰©å®¹ï¼Œå¤šä¸ªå®¹å™¨åœ¨ä¸€ä¸ªpodé‡Œçš„æƒ…å†µä¹Ÿæœ‰ï¼Œä½†æ¯”è¾ƒå°‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1666096023,"ip_address":"åŒ—äº¬","comment_id":359961,"utype":1}],"discussion_count":1,"race_medal":2,"score":7,"product_id":100114501,"comment_content":"æˆ‘ä¸€å¼€å§‹ä»¥ä¸ºä¼šå°† db è·Ÿ wp æ”¾åœ¨åŒä¸€ä¸ª pod çš„ä¸¤ä¸ª container é‡Œé¢çš„ï¼Œæ²¡æƒ³åˆ°æ˜¯ä¸¤ä¸ª podã€‚åœ¨ç”Ÿäº§ç¯å¢ƒé‡Œé¢ï¼Œè¿™ç§åœºæ™¯ä¹Ÿä¼šæ˜¯ä¸åŒçš„ pod å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590833,"discussion_content":"å½“ç„¶äº†ï¼Œéƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸€ä¸ªpodï¼Œè¿™æ ·æ–¹ä¾¿ç‹¬ç«‹éƒ¨ç½²ã€ç®¡ç†ã€æ‰©å®¹ï¼Œå¤šä¸ªå®¹å™¨åœ¨ä¸€ä¸ªpodé‡Œçš„æƒ…å†µä¹Ÿæœ‰ï¼Œä½†æ¯”è¾ƒå°‘ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1666096023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357463,"user_name":"Geek_fc4e0b","can_delete":false,"product_type":"c1","uid":2894152,"ip_address":"åŒ—äº¬","ucode":"67A7F1D7A896FF","user_header":"","comment_is_top":false,"comment_ctime":1663290540,"is_pvip":false,"replies":[{"id":130097,"content":"æ ‡ç­¾éšä¾¿å†™çš„ï¼Œæ²¡ä»€ä¹ˆç‰¹æ®Šå«ä¹‰ï¼ŒçœŸæ­£è¿è¡Œçš„æ—¶å€™è¦å’Œå®é™…ç¯å¢ƒç»“åˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1663299895,"ip_address":"åŒ—äº¬","comment_id":357463,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"è€å¸ˆå¥½ï¼šèƒ½è§£é‡Šä¸€ä¸‹æ ‡ç­¾ä¸ºä»€ä¹ˆæ˜¯wordpresså’Œwebsiteå—ï¼Œæœ‰ä»€ä¹ˆç‰¹æ®Šå«ä¹‰å—ï¼Œä¸¤ä¸ªyamlæ–‡ä»¶å¾—æ ‡ç­¾æœ‰å•¥å…³ç³»ï¼Œä¸å†™è¿™ä¸ªæ ‡ç­¾æœ‰å•¥å½±å“","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587801,"discussion_content":"æ ‡ç­¾éšä¾¿å†™çš„ï¼Œæ²¡ä»€ä¹ˆç‰¹æ®Šå«ä¹‰ï¼ŒçœŸæ­£è¿è¡Œçš„æ—¶å€™è¦å’Œå®é™…ç¯å¢ƒç»“åˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663299895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354041,"user_name":"rongyefeng","can_delete":false,"product_type":"c1","uid":1959482,"ip_address":"åŒ—äº¬","ucode":"9A15D947E9D645","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","comment_is_top":false,"comment_ctime":1660038407,"is_pvip":false,"replies":[{"id":128779,"content":"æ˜¯çš„ï¼Œå¯ä»¥è®©æˆ‘ä»¬çœäº›åŠ›æ°”ï¼Œå°‘å†™ç‚¹å­—ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660041070,"ip_address":"åŒ—äº¬","comment_id":354041,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"å¹¶ä¸”èƒ½å¤ŸæŒ‡å®šå˜é‡åçš„å‰ç¼€ï¼ˆå³è¿™é‡Œçš„ MARIADB_ï¼‰ ï¼šè¿™é‡Œå¯ä»¥ç†è§£ä¸ºåœ¨dataä¸­å„ä¸ªå­—æ®µçš„åŸºç¡€ä¸ŠåŠ ä¸Šè¿™ä¸ªå‰ç¼€å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583337,"discussion_content":"æ˜¯çš„ï¼Œå¯ä»¥è®©æˆ‘ä»¬çœäº›åŠ›æ°”ï¼Œå°‘å†™ç‚¹å­—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660041070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352943,"user_name":"æœ±é›¯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"åŒ—äº¬","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1659025647,"is_pvip":false,"replies":[{"id":128323,"content":"æ˜¯çš„ï¼Œport-forwardåªæ˜¯ç”¨æ¥æµ‹è¯•çš„ï¼Œæ‰€ä»¥è¦æ±‚ä¹Ÿä¸å¿…å¤ªé«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659060688,"ip_address":"åŒ—äº¬","comment_id":352943,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"8080:80 wp-podåº”è¯¥æ˜¯å°†å®¿ä¸»æœºçš„8080è½¬å‘åˆ°å®¹å™¨çš„80ï¼Œä½†åªè¦å®¹å™¨é‡å¯ï¼Œè¿™æ¡è§„åˆ™å°±æ²¡äº†ï¼Œéœ€è¦é‡æ–°åŠ å…¥ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581885,"discussion_content":"æ˜¯çš„ï¼Œport-forwardåªæ˜¯ç”¨æ¥æµ‹è¯•çš„ï¼Œæ‰€ä»¥è¦æ±‚ä¹Ÿä¸å¿…å¤ªé«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659060688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352942,"user_name":"æœ±é›¯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"é™•è¥¿","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1659025596,"is_pvip":false,"replies":[{"id":128320,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659057328,"ip_address":"é™•è¥¿","comment_id":352942,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"1. ç¬¬ä¸€é¢˜\né‡ç‚¹ä¿®æ”¹ï¼Œæ‰€æœ‰å†…å®¹éƒ½ç”¨base64åŠ å¯†åå­˜å‚¨ï¼Œç±»å‹ä¸ºSecretï¼ŒSä¸ºå¤§å†™,configMapRefæ”¹ä¸ºsecretRef,é¦–å­—æ¯æ³¨æ„å°å†™ã€‚\nå®é™…æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°echo -n &quot;172.17.0.5&quot;|base64 å’Œecho &quot;172.17.0.5&quot; |base64æ˜¯æœ‰å·®åˆ«çš„ï¼Œä½†æ˜¯ç¯å¢ƒå˜é‡é‡Œé¢çœ‹ä¸å‡ºæ¥ï¼Œæ‰€ä»¥ä¸€ç›´é…ç½®å¤±è´¥ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581875,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659057328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386286,"user_name":"Geek_a17d54","can_delete":false,"product_type":"c1","uid":2924566,"ip_address":"ç¾å›½","ucode":"98E70199CB485E","user_header":"","comment_is_top":false,"comment_ctime":1704443896,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"wp-pod æŠ¥ error establishing a database connection","like_count":0}]}