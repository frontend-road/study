{"id":195334,"title":"20 | 结构化日志组件Serilog：记录对查询分析友好的日志","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/NET-Core\">https://gitee.com/geektime-geekbang/NET-Core</a></p>","comments":[{"had_liked":false,"id":176342,"user_name":"左","can_delete":false,"product_type":"c3","uid":1048799,"ip_address":"","ucode":"FE02803AE2C0F0","user_header":"https://static001.geekbang.org/account/avatar/00/10/00/df/58fe37df.jpg","comment_is_top":false,"comment_ctime":1581039288,"is_pvip":false,"replies":[{"id":68584,"content":"两本社区大佬的新书：\n《.NET Core 底层入门》 偏底层一点\n《ASP.NET Core微服务实战》 微服务方面的","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1581148595,"ip_address":"","comment_id":176342,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"推荐书单 老师","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483082,"discussion_content":"两本社区大佬的新书：\n《.NET Core 底层入门》 偏底层一点\n《ASP.NET Core微服务实战》 微服务方面的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581148595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213212,"user_name":"爱学习的大叔","can_delete":false,"product_type":"c3","uid":1085152,"ip_address":"","ucode":"91F9ABF1EC98D0","user_header":"https://static001.geekbang.org/account/avatar/00/10/8e/e0/847348b1.jpg","comment_is_top":false,"comment_ctime":1588332191,"is_pvip":false,"replies":[{"id":79640,"content":".NET Core组件化的架构思路很值得学习","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1588939800,"ip_address":"","comment_id":213212,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"看到.net core跟日志结合的这么好，可以跟微服务里边的服务追踪很好的结合，微服务框架初见端倪了。","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493711,"discussion_content":".NET Core组件化的架构思路很值得学习","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588939800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180813,"user_name":"stg609","can_delete":false,"product_type":"c3","uid":1073025,"ip_address":"","ucode":"FB70A75A891BB8","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/81/1c614f4a.jpg","comment_is_top":false,"comment_ctime":1582421110,"is_pvip":false,"replies":[{"id":70460,"content":"trace一般在定义组件的内部使用，记录详细的执行过程信息，用以暴露给组件使用者。\ndebug与trace很像，但一般仅在有调试意图的位置记录，且更多地是给组件的开发者自己查看。\ninfo则是在业务场景、服务调用场景等更贴近业务实现部分的信息记录。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1582691377,"ip_address":"","comment_id":180813,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"老师能分析下日志的不同级别，尤其是trace, debug, info 分别用于哪种场景吗？","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484804,"discussion_content":"trace一般在定义组件的内部使用，记录详细的执行过程信息，用以暴露给组件使用者。\ndebug与trace很像，但一般仅在有调试意图的位置记录，且更多地是给组件的开发者自己查看。\ninfo则是在业务场景、服务调用场景等更贴近业务实现部分的信息记录。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582691377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177624,"user_name":"沙漠尽头的狼","can_delete":false,"product_type":"c3","uid":1756311,"ip_address":"","ucode":"A417E2BA797068","user_header":"https://static001.geekbang.org/account/avatar/00/1a/cc/97/1e63d2a4.jpg","comment_is_top":false,"comment_ctime":1581436062,"is_pvip":false,"replies":[{"id":69286,"content":"感谢支持","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1581754261,"ip_address":"","comment_id":177624,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"看完了催更","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483488,"discussion_content":"感谢支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581754261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184654,"user_name":"小帅","can_delete":false,"product_type":"c3","uid":1030822,"ip_address":"","ucode":"E68A1EFFA36F63","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/a6/32114349.jpg","comment_is_top":false,"comment_ctime":1583377966,"is_pvip":false,"replies":[{"id":71565,"content":"后面会重新梳理一下","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1583562708,"ip_address":"","comment_id":184654,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"老师好，建议从0开始搭建一个项目架构，这样讲感觉知识点太零碎，不能有效运用到项目中去。","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486082,"discussion_content":"后面会重新梳理一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583562708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183053,"user_name":"学习者","can_delete":false,"product_type":"c3","uid":1880838,"ip_address":"","ucode":"7B176FAE22C9E6","user_header":"https://static001.geekbang.org/account/avatar/00/1c/b3/06/ab52e221.jpg","comment_is_top":false,"comment_ctime":1582943176,"is_pvip":false,"replies":[{"id":70979,"content":"如果用void在catch异常并记录后要重新throw表示异常退出。\n如果用int，则可以catch并记录后返回1表示异常退出。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1583043926,"ip_address":"","comment_id":183053,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"你好： 请问 将 void main（....） 改成 int main（....）,有什么特殊意义吗？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485549,"discussion_content":"如果用void在catch异常并记录后要重新throw表示异常退出。\n如果用int，则可以catch并记录后返回1表示异常退出。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583043926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2042606,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/2a/ee/221a330a.jpg","nickname":"ZW","note":"","ucode":"ABDD9022DA36C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284437,"discussion_content":"你好，我也买了这视频，为什么看不了呢？好像需要APP才可以看，加老师微信也没同意","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592532567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176535,"user_name":"川杰","can_delete":false,"product_type":"c3","uid":1099750,"ip_address":"","ucode":"815211E1D698E6","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/e6/11f21cb4.jpg","comment_is_top":false,"comment_ctime":1581082626,"is_pvip":false,"replies":[{"id":68581,"content":"示例代码Program.cs 中最后一句\n\npublic static IHostBuilder CreateHostBuilder(string[] args) =&gt;\n            Host.CreateDefaultBuilder(args)\n                .ConfigureWebHostDefaults(webBuilder =&gt;\n                {\n                    webBuilder.UseStartup&lt;Startup&gt;();\n                })\n                .UseSerilog(dispose: true);","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1581147805,"ip_address":"","comment_id":176535,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"请问，Serilog是根据哪段代码替换net core默认的log组件的？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483134,"discussion_content":"示例代码Program.cs 中最后一句\n\npublic static IHostBuilder CreateHostBuilder(string[] args) =&amp;gt;\n            Host.CreateDefaultBuilder(args)\n                .ConfigureWebHostDefaults(webBuilder =&amp;gt;\n                {\n                    webBuilder.UseStartup&amp;lt;Startup&amp;gt;();\n                })\n                .UseSerilog(dispose: true);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581147805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215767,"discussion_content":"在program里面有UseSerilog","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585380935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485489,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/b1/c834aab5.jpg","nickname":"张小勋","note":"","ucode":"8C5E434EF53BF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":163992,"discussion_content":"应该是 .UseSerilog(dispose: true);  这行代码  替换了 默认的log组件   下载下源码  自己去测试下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581134568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176679,"user_name":"不知名妖","can_delete":false,"product_type":"c3","uid":1231253,"ip_address":"","ucode":"9C57833BD3F45E","user_header":"https://static001.geekbang.org/account/avatar/00/12/c9/95/dacc6a36.jpg","comment_is_top":false,"comment_ctime":1581136828,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"建议讲解的时候可以稍微结合一下业务应用场景，讲一下为什么这样做更好","like_count":7},{"had_liked":false,"id":176194,"user_name":"多读书","can_delete":false,"product_type":"c3","uid":1151239,"ip_address":"","ucode":"A0F87F106C5BED","user_header":"https://static001.geekbang.org/account/avatar/00/11/91/07/f270f35f.jpg","comment_is_top":false,"comment_ctime":1580984299,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"看完了催更","like_count":3},{"had_liked":false,"id":221383,"user_name":"王亚","can_delete":false,"product_type":"c3","uid":1810841,"ip_address":"","ucode":"765CDC2A4DF8CF","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a1/99/137f5ff7.jpg","comment_is_top":false,"comment_ctime":1590486975,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"老师  我的appsettings.json 里面的配置 和 代码都和您的一样  为和就是不生效呢？ 比如我改了日志级别 但不起作用","like_count":0},{"had_liked":false,"id":177793,"user_name":"Sun Fei","can_delete":false,"product_type":"c3","uid":1032631,"ip_address":"","ucode":"092EC0992050BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/b7/57f153f6.jpg","comment_is_top":false,"comment_ctime":1581501797,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"这个日志框架之前没用过，写个DEMO学习学习。","like_count":0},{"had_liked":false,"id":176672,"user_name":"张小勋","can_delete":false,"product_type":"c3","uid":1485489,"ip_address":"","ucode":"8C5E434EF53BF4","user_header":"https://static001.geekbang.org/account/avatar/00/16/aa/b1/c834aab5.jpg","comment_is_top":false,"comment_ctime":1581134414,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"看完了 希望加油 给力的快点儿更新   ","like_count":0},{"had_liked":false,"id":176538,"user_name":"川杰","can_delete":false,"product_type":"c3","uid":1099750,"ip_address":"","ucode":"815211E1D698E6","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/e6/11f21cb4.jpg","comment_is_top":false,"comment_ctime":1581082876,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"接上一条，Log.Logger = new LoggerConfigeration()，这里，并没有看到指明用Serilog的代码，好像只是指定了配置；麻烦老师解释下，serilog是怎么替换默认的log组件的","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215766,"discussion_content":"在program里面有UseSerilog","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585380912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485489,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/b1/c834aab5.jpg","nickname":"张小勋","note":"","ucode":"8C5E434EF53BF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164035,"discussion_content":"在构建HostBuilder的地方","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581140446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176305,"user_name":"Geek_a5d76c","can_delete":false,"product_type":"c3","uid":1809013,"ip_address":"","ucode":"7D1D95DB4481A4","user_header":"","comment_is_top":false,"comment_ctime":1581010375,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"一次性放出来。。。。。","like_count":0}]}