{"id":39841,"title":"16 | goè¯­å¥åŠå…¶æ‰§è¡Œè§„åˆ™ï¼ˆä¸Šï¼‰","content":"<p>ä½ å¾ˆæ£’ï¼Œå·²ç»å­¦å®Œäº†å…³äºGoè¯­è¨€æ•°æ®ç±»å‹çš„å…¨éƒ¨å†…å®¹ã€‚æˆ‘ç›¸ä¿¡ä½ ä¸ä½†å·²ç»çŸ¥æ™“äº†æ€æ ·é«˜æ•ˆåœ°ä½¿ç”¨Goè¯­è¨€å†…å»ºçš„é‚£äº›æ•°æ®ç±»å‹ï¼Œè¿˜æ˜ç™½äº†æ€æ ·æ­£ç¡®åœ°åˆ›é€ è‡ªå·±çš„æ•°æ®ç±»å‹ã€‚</p><p>å¯¹äºGoè¯­è¨€çš„ç¼–ç¨‹çŸ¥è¯†ï¼Œä½ ç¡®å®å·²ç»çŸ¥é“äº†ä¸å°‘äº†ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ çœŸæƒ³ç©è½¬Goè¯­è¨€è¿˜éœ€è¦çŸ¥é“å®ƒçš„ä¸€äº›ç‰¹è‰²æµç¨‹å’Œè¯­æ³•ã€‚</p><p>å°¤å…¶æ˜¯æˆ‘ä»¬å°†ä¼šåœ¨æœ¬ç¯‡æ–‡ç« ä¸­è®¨è®ºçš„<code>go</code>è¯­å¥ï¼Œè¿™ä¹Ÿæ˜¯Goè¯­è¨€çš„æœ€å¤§ç‰¹è‰²äº†ã€‚å®ƒè¶³å¯ä»¥ä»£è¡¨Goè¯­è¨€æœ€é‡è¦çš„ç¼–ç¨‹å“²å­¦å’Œå¹¶å‘ç¼–ç¨‹æ¨¡å¼ã€‚</p><p>è®©æˆ‘ä»¬å†é‡æ¸©ä¸€ä¸‹ä¸‹é¢è¿™å¥è¯ï¼š</p><blockquote>\n<p>Donâ€™t communicate by sharing memory; share memory by communicating.</p>\n</blockquote><p>ä»Goè¯­è¨€ç¼–ç¨‹çš„è§’åº¦è§£é‡Šï¼Œè¿™å¥è¯çš„æ„æ€å°±æ˜¯ï¼šä¸è¦é€šè¿‡å…±äº«æ•°æ®æ¥é€šè®¯ï¼Œæ°æ°ç›¸åï¼Œè¦ä»¥é€šè®¯çš„æ–¹å¼å…±äº«æ•°æ®ã€‚</p><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œé€šé“ï¼ˆä¹Ÿå°±æ˜¯channelï¼‰ç±»å‹çš„å€¼ï¼Œå¯ä»¥è¢«ç”¨æ¥ä»¥é€šè®¯çš„æ–¹å¼å…±äº«æ•°æ®ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œå®ƒä¸€èˆ¬è¢«ç”¨æ¥åœ¨ä¸åŒçš„goroutineä¹‹é—´ä¼ é€’æ•°æ®ã€‚é‚£ä¹ˆgoroutineåˆ°åº•ä»£è¡¨ç€ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ç®€å•æ¥è¯´ï¼Œgoroutineä»£è¡¨ç€å¹¶å‘ç¼–ç¨‹æ¨¡å‹ä¸­çš„ç”¨æˆ·çº§çº¿ç¨‹ã€‚ä½ å¯èƒ½å·²ç»çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿæœ¬èº«æä¾›äº†è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œè¿™ä¸¤ç§å¹¶å‘æ‰§è¡Œç¨‹åºçš„å·¥å…·ã€‚</p><h2>å‰å¯¼å†…å®¹ï¼šè¿›ç¨‹ä¸çº¿ç¨‹</h2><p>è¿›ç¨‹ï¼Œæè¿°çš„å°±æ˜¯ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯è¿è¡Œç€çš„ç¨‹åºçš„ä»£è¡¨ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªè¿›ç¨‹å…¶å®å°±æ˜¯æŸä¸ªç¨‹åºè¿è¡Œæ—¶çš„ä¸€ä¸ªäº§ç‰©ã€‚å¦‚æœè¯´é™é™åœ°èººåœ¨é‚£é‡Œçš„ä»£ç å°±æ˜¯ç¨‹åºçš„è¯ï¼Œé‚£ä¹ˆå¥”è·‘ç€çš„ã€æ­£åœ¨å‘æŒ¥ç€æ—¢æœ‰åŠŸèƒ½çš„ä»£ç å°±å¯ä»¥è¢«ç§°ä¸ºè¿›ç¨‹ã€‚</p><!-- [[[read_end]]] --><p>æˆ‘ä»¬çš„ç”µè„‘ä¸ºä»€ä¹ˆå¯ä»¥åŒæ—¶è¿è¡Œé‚£ä¹ˆå¤šåº”ç”¨ç¨‹åºï¼Ÿæˆ‘ä»¬çš„æ‰‹æœºä¸ºä»€ä¹ˆå¯ä»¥æœ‰é‚£ä¹ˆå¤šAppåŒæ—¶åœ¨åå°åˆ·æ–°ï¼Ÿè¿™éƒ½æ˜¯å› ä¸ºåœ¨å®ƒä»¬çš„æ“ä½œç³»ç»Ÿä¹‹ä¸Šæœ‰å¤šä¸ªä»£è¡¨ç€ä¸åŒåº”ç”¨ç¨‹åºæˆ–Appçš„è¿›ç¨‹åœ¨åŒæ—¶è¿è¡Œã€‚</p><p>å†æ¥è¯´è¯´çº¿ç¨‹ã€‚é¦–å…ˆï¼Œçº¿ç¨‹æ€»æ˜¯åœ¨è¿›ç¨‹ä¹‹å†…çš„ï¼Œå®ƒå¯ä»¥è¢«è§†ä¸ºè¿›ç¨‹ä¸­è¿è¡Œç€çš„æ§åˆ¶æµï¼ˆæˆ–è€…è¯´ä»£ç æ‰§è¡Œçš„æµç¨‹ï¼‰ã€‚</p><p>ä¸€ä¸ªè¿›ç¨‹è‡³å°‘ä¼šåŒ…å«ä¸€ä¸ªçº¿ç¨‹ã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹åªåŒ…å«äº†ä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå®ƒé‡Œé¢çš„æ‰€æœ‰ä»£ç éƒ½åªä¼šè¢«ä¸²è¡Œåœ°æ‰§è¡Œã€‚æ¯ä¸ªè¿›ç¨‹çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹éƒ½ä¼šéšç€è¯¥è¿›ç¨‹çš„å¯åŠ¨è€Œè¢«åˆ›å»ºï¼Œå®ƒä»¬å¯ä»¥è¢«ç§°ä¸ºå…¶æ‰€å±è¿›ç¨‹çš„ä¸»çº¿ç¨‹ã€‚</p><p>ç›¸å¯¹åº”çš„ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹ä¸­åŒ…å«äº†å¤šä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå…¶ä¸­çš„ä»£ç å°±å¯ä»¥è¢«å¹¶å‘åœ°æ‰§è¡Œã€‚é™¤äº†è¿›ç¨‹çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹ä¹‹å¤–ï¼Œå…¶ä»–çš„çº¿ç¨‹éƒ½æ˜¯ç”±è¿›ç¨‹ä¸­å·²å­˜åœ¨çš„çº¿ç¨‹åˆ›å»ºå‡ºæ¥çš„ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸»çº¿ç¨‹ä¹‹å¤–çš„å…¶ä»–çº¿ç¨‹éƒ½åªèƒ½ç”±ä»£ç æ˜¾å¼åœ°åˆ›å»ºå’Œé”€æ¯ã€‚è¿™éœ€è¦æˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™è¿›è¡Œæ‰‹åŠ¨æ§åˆ¶ï¼Œæ“ä½œç³»ç»Ÿä»¥åŠè¿›ç¨‹æœ¬èº«å¹¶ä¸ä¼šå¸®æˆ‘ä»¬ä¸‹è¾¾è¿™æ ·çš„æŒ‡ä»¤ï¼Œå®ƒä»¬åªä¼šå¿ å®åœ°æ‰§è¡Œæˆ‘ä»¬çš„æŒ‡ä»¤ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨Goç¨‹åºå½“ä¸­ï¼ŒGoè¯­è¨€çš„è¿è¡Œæ—¶ï¼ˆruntimeï¼‰ç³»ç»Ÿä¼šå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨åœ°åˆ›å»ºå’Œé”€æ¯ç³»ç»Ÿçº§çš„çº¿ç¨‹ã€‚è¿™é‡Œçš„ç³»ç»Ÿçº§çº¿ç¨‹æŒ‡çš„å°±æ˜¯æˆ‘ä»¬åˆšåˆšè¯´è¿‡çš„æ“ä½œç³»ç»Ÿæä¾›çš„çº¿ç¨‹ã€‚</p><p>è€Œå¯¹åº”çš„ç”¨æˆ·çº§çº¿ç¨‹æŒ‡çš„æ˜¯æ¶è®¾åœ¨ç³»ç»Ÿçº§çº¿ç¨‹ä¹‹ä¸Šçš„ï¼Œç”±ç”¨æˆ·ï¼ˆæˆ–è€…è¯´æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºï¼‰å®Œå…¨æ§åˆ¶çš„ä»£ç æ‰§è¡Œæµç¨‹ã€‚ç”¨æˆ·çº§çº¿ç¨‹çš„åˆ›å»ºã€é”€æ¯ã€è°ƒåº¦ã€çŠ¶æ€å˜æ›´ä»¥åŠå…¶ä¸­çš„ä»£ç å’Œæ•°æ®éƒ½å®Œå…¨éœ€è¦æˆ‘ä»¬çš„ç¨‹åºè‡ªå·±å»å®ç°å’Œå¤„ç†ã€‚</p><p>è¿™å¸¦æ¥äº†å¾ˆå¤šä¼˜åŠ¿ï¼Œæ¯”å¦‚ï¼Œå› ä¸ºå®ƒä»¬çš„åˆ›å»ºå’Œé”€æ¯å¹¶ä¸ç”¨é€šè¿‡æ“ä½œç³»ç»Ÿå»åšï¼Œæ‰€ä»¥é€Ÿåº¦ä¼šå¾ˆå¿«ï¼Œåˆæ¯”å¦‚ï¼Œç”±äºä¸ç”¨ç­‰ç€æ“ä½œç³»ç»Ÿå»è°ƒåº¦å®ƒä»¬çš„è¿è¡Œï¼Œæ‰€ä»¥å¾€å¾€ä¼šå¾ˆå®¹æ˜“æ§åˆ¶å¹¶ä¸”å¯ä»¥å¾ˆçµæ´»ã€‚</p><p>ä½†æ˜¯ï¼ŒåŠ£åŠ¿ä¹Ÿæ˜¯æœ‰çš„ï¼Œæœ€æ˜æ˜¾ä¹Ÿæœ€é‡è¦çš„ä¸€ä¸ªåŠ£åŠ¿å°±æ˜¯å¤æ‚ã€‚å¦‚æœæˆ‘ä»¬åªä½¿ç”¨äº†ç³»ç»Ÿçº§çº¿ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªè¦æŒ‡æ˜éœ€è¦æ–°çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ç‰‡æ®µï¼Œå¹¶ä¸”ä¸‹è¾¾åˆ›å»ºæˆ–é”€æ¯çº¿ç¨‹çš„æŒ‡ä»¤å°±å¥½äº†ï¼Œå…¶ä»–çš„ä¸€åˆ‡å…·ä½“å®ç°éƒ½ä¼šç”±æ“ä½œç³»ç»Ÿä»£åŠ³ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨ç”¨æˆ·çº§çº¿ç¨‹ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸æ—¢æ˜¯æŒ‡ä»¤ä¸‹è¾¾è€…ï¼Œåˆæ˜¯æŒ‡ä»¤æ‰§è¡Œè€…ã€‚æˆ‘ä»¬å¿…é¡»å…¨æƒè´Ÿè´£ä¸ç”¨æˆ·çº§çº¿ç¨‹æœ‰å…³çš„æ‰€æœ‰å…·ä½“å®ç°ã€‚</p><p>æ“ä½œç³»ç»Ÿä¸ä½†ä¸ä¼šå¸®å¿™ï¼Œè¿˜ä¼šè¦æ±‚æˆ‘ä»¬çš„å…·ä½“å®ç°å¿…é¡»ä¸å®ƒæ­£ç¡®åœ°å¯¹æ¥ï¼Œå¦åˆ™ç”¨æˆ·çº§çº¿ç¨‹å°±æ— æ³•è¢«å¹¶å‘åœ°ï¼Œç”šè‡³æ­£ç¡®åœ°è¿è¡Œã€‚æ¯•ç«Ÿæˆ‘ä»¬ç¼–å†™çš„æ‰€æœ‰ä»£ç æœ€ç»ˆéƒ½éœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿæ‰èƒ½åœ¨è®¡ç®—æœºä¸Šæ‰§è¡Œã€‚è¿™å¬èµ·æ¥å°±å¾ˆéº»çƒ¦ï¼Œä¸æ˜¯å—ï¼Ÿ</p><p><strong>ä¸è¿‡åˆ«æ‹…å¿ƒï¼ŒGoè¯­è¨€ä¸ä½†æœ‰ç€ç‹¬ç‰¹çš„å¹¶å‘ç¼–ç¨‹æ¨¡å‹ï¼Œä»¥åŠç”¨æˆ·çº§çº¿ç¨‹goroutineï¼Œè¿˜æ‹¥æœ‰å¼ºå¤§çš„ç”¨äºè°ƒåº¦goroutineã€å¯¹æ¥ç³»ç»Ÿçº§çº¿ç¨‹çš„è°ƒåº¦å™¨ã€‚</strong></p><p>è¿™ä¸ªè°ƒåº¦å™¨æ˜¯Goè¯­è¨€è¿è¡Œæ—¶ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒä¸»è¦è´Ÿè´£ç»Ÿç­¹è°ƒé…Goå¹¶å‘ç¼–ç¨‹æ¨¡å‹ä¸­çš„ä¸‰ä¸ªä¸»è¦å…ƒç´ ï¼Œå³ï¼šGï¼ˆgoroutineçš„ç¼©å†™ï¼‰ã€Pï¼ˆprocessorçš„ç¼©å†™ï¼‰å’ŒMï¼ˆmachineçš„ç¼©å†™ï¼‰ã€‚</p><p>å…¶ä¸­çš„MæŒ‡ä»£çš„å°±æ˜¯ç³»ç»Ÿçº§çº¿ç¨‹ã€‚è€ŒPæŒ‡çš„æ˜¯ä¸€ç§å¯ä»¥æ‰¿è½½è‹¥å¹²ä¸ªGï¼Œä¸”èƒ½å¤Ÿä½¿è¿™äº›Gé€‚æ—¶åœ°ä¸Mè¿›è¡Œå¯¹æ¥ï¼Œå¹¶å¾—åˆ°çœŸæ­£è¿è¡Œçš„ä¸­ä»‹ã€‚</p><p>ä»å®è§‚ä¸Šè¯´ï¼ŒGå’ŒMç”±äºPçš„å­˜åœ¨å¯ä»¥å‘ˆç°å‡ºå¤šå¯¹å¤šçš„å…³ç³»ã€‚å½“ä¸€ä¸ªæ­£åœ¨ä¸æŸä¸ªMå¯¹æ¥å¹¶è¿è¡Œç€çš„Gï¼Œéœ€è¦å› æŸä¸ªäº‹ä»¶ï¼ˆæ¯”å¦‚ç­‰å¾…I/Oæˆ–é”çš„è§£é™¤ï¼‰è€Œæš‚åœè¿è¡Œçš„æ—¶å€™ï¼Œè°ƒåº¦å™¨æ€»ä¼šåŠæ—¶åœ°å‘ç°ï¼Œå¹¶æŠŠè¿™ä¸ªGä¸é‚£ä¸ªMåˆ†ç¦»å¼€ï¼Œä»¥é‡Šæ”¾è®¡ç®—èµ„æºä¾›é‚£äº›ç­‰å¾…è¿è¡Œçš„Gä½¿ç”¨ã€‚</p><p>è€Œå½“ä¸€ä¸ªGéœ€è¦æ¢å¤è¿è¡Œçš„æ—¶å€™ï¼Œè°ƒåº¦å™¨åˆä¼šå°½å¿«åœ°ä¸ºå®ƒå¯»æ‰¾ç©ºé—²çš„è®¡ç®—èµ„æºï¼ˆåŒ…æ‹¬Mï¼‰å¹¶å®‰æ’è¿è¡Œã€‚å¦å¤–ï¼Œå½“Mä¸å¤Ÿç”¨æ—¶ï¼Œè°ƒåº¦å™¨ä¼šå¸®æˆ‘ä»¬å‘æ“ä½œç³»ç»Ÿç”³è¯·æ–°çš„ç³»ç»Ÿçº§çº¿ç¨‹ï¼Œè€Œå½“æŸä¸ªMå·²æ— ç”¨æ—¶ï¼Œè°ƒåº¦å™¨åˆä¼šè´Ÿè´£æŠŠå®ƒåŠæ—¶åœ°é”€æ¯æ‰ã€‚</p><p>æ­£å› ä¸ºè°ƒåº¦å™¨å¸®åŠ©æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„Goç¨‹åºæ‰æ€»æ˜¯èƒ½é«˜æ•ˆåœ°åˆ©ç”¨æ“ä½œç³»ç»Ÿå’Œè®¡ç®—æœºèµ„æºã€‚ç¨‹åºä¸­çš„æ‰€æœ‰goroutineä¹Ÿéƒ½ä¼šè¢«å……åˆ†åœ°è°ƒåº¦ï¼Œå…¶ä¸­çš„ä»£ç ä¹Ÿéƒ½ä¼šè¢«å¹¶å‘åœ°è¿è¡Œï¼Œå³ä½¿è¿™æ ·çš„goroutineæœ‰æ•°ä»¥åä¸‡è®¡ï¼Œä¹Ÿä»ç„¶å¯ä»¥å¦‚æ­¤ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9e/7d/9ea14f68ffbcde373ddb61e186695d7d.png?wh=1589*820\" alt=\"\"></p><p><strong> Mã€Pã€Gä¹‹é—´çš„å…³ç³»ï¼ˆç®€åŒ–ç‰ˆï¼‰</strong></p><p>ç”±äºç¯‡å¹…åŸå› ï¼Œå…³äºGoè¯­è¨€å†…éƒ¨çš„è°ƒåº¦å™¨å’Œè¿è¡Œæ—¶ç³»ç»Ÿçš„æ›´å¤šç»†èŠ‚ï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä¸å†æ·±å…¥è®²è¿°äº†ã€‚ä½ éœ€è¦çŸ¥é“ï¼ŒGoè¯­è¨€å®ç°äº†ä¸€å¥—éå¸¸å®Œå–„çš„è¿è¡Œæ—¶ç³»ç»Ÿï¼Œä¿è¯äº†æˆ‘ä»¬çš„ç¨‹åºåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ä¾æ—§èƒ½å¤Ÿç¨³å®šã€é«˜æ•ˆåœ°è¿è¡Œã€‚</p><p>å¦‚æœä½ å¯¹è¿™äº›å…·ä½“çš„ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œå¹¶è¿˜æƒ³è¿›ä¸€æ­¥æ¢ç´¢ï¼Œé‚£ä¹ˆæˆ‘æ¨èä½ å»çœ‹çœ‹æˆ‘å†™çš„é‚£æœ¬ã€ŠGoå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ã€‚æˆ‘åœ¨è¿™æœ¬ä¹¦ä¸­ç”¨äº†ç›¸å½“å¤§çš„ç¯‡å¹…é˜é‡Šäº†Goè¯­è¨€å¹¶å‘ç¼–ç¨‹æ¨¡å‹çš„åŸç†ã€è¿ä½œæœºåˆ¶ï¼Œä»¥åŠæ‰€æœ‰ä¸ä¹‹ç´§å¯†ç›¸å…³çš„çŸ¥è¯†ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä¼šä»ç¼–ç¨‹å®è·µçš„è§’åº¦å‡ºå‘ï¼Œä»¥<code>go</code>è¯­å¥çš„ç”¨æ³•ä¸ºä¸»çº¿ï¼Œå‘ä½ ä»‹ç»<code>go</code>è¯­å¥çš„æ‰§è¡Œè§„åˆ™ã€æœ€ä½³å®è·µå’Œä½¿ç”¨ç¦å¿Œã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»Šå¤©çš„<strong>é—®é¢˜ï¼šä»€ä¹ˆæ˜¯ä¸»goroutineï¼Œå®ƒä¸æˆ‘ä»¬å¯ç”¨çš„å…¶ä»–goroutineæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</strong></p><p>æˆ‘ä»¬å…·ä½“æ¥çœ‹ä¸€é“æˆ‘åœ¨é¢è¯•ä¸­ç»å¸¸æé—®çš„ç¼–ç¨‹é¢˜ã€‚</p><pre><code>package main\n\nimport &quot;fmt&quot;\n\nfunc main() {\n\tfor i := 0; i &lt; 10; i++ {\n\t\tgo func() {\n\t\t\tfmt.Println(i)\n\t\t}()\n\t}\n}\n</code></pre><p>åœ¨demo38.goä¸­ï¼Œæˆ‘åªåœ¨<code>main</code>å‡½æ•°ä¸­å†™äº†ä¸€æ¡<code>for</code>è¯­å¥ã€‚è¿™æ¡<code>for</code>è¯­å¥ä¸­çš„ä»£ç ä¼šè¿­ä»£è¿è¡Œ10æ¬¡ï¼Œå¹¶æœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡<code>i</code>ä»£è¡¨ç€å½“æ¬¡è¿­ä»£çš„åºå·ï¼Œè¯¥åºå·æ˜¯ä»<code>0</code>å¼€å§‹çš„ã€‚</p><p>åœ¨è¿™æ¡<code>for</code>è¯­å¥ä¸­ä»…æœ‰ä¸€æ¡<code>go</code>è¯­å¥ï¼Œè¿™æ¡<code>go</code>è¯­å¥ä¸­ä¹Ÿä»…æœ‰ä¸€æ¡è¯­å¥ã€‚è¿™æ¡æœ€é‡Œé¢çš„è¯­å¥è°ƒç”¨äº†<code>fmt.Println</code>å‡½æ•°å¹¶æƒ³è¦æ‰“å°å‡ºå˜é‡<code>i</code>çš„å€¼ã€‚</p><p>è¿™ä¸ªç¨‹åºå¾ˆç®€å•ï¼Œä¸‰æ¡è¯­å¥é€æ¡åµŒå¥—ã€‚æˆ‘çš„å…·ä½“é—®é¢˜æ˜¯ï¼šè¿™ä¸ªå‘½ä»¤æºç æ–‡ä»¶è¢«æ‰§è¡Œåä¼šæ‰“å°å‡ºä»€ä¹ˆå†…å®¹ï¼Ÿ</p><p>è¿™é“é¢˜çš„<strong>å…¸å‹å›ç­”</strong>æ˜¯ï¼šä¸ä¼šæœ‰ä»»ä½•å†…å®¹è¢«æ‰“å°å‡ºæ¥ã€‚</p><h2>é—®é¢˜è§£æ</h2><p>ä¸ä¸€ä¸ªè¿›ç¨‹æ€»ä¼šæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ç±»ä¼¼ï¼Œæ¯ä¸€ä¸ªç‹¬ç«‹çš„Goç¨‹åºåœ¨è¿è¡Œæ—¶ä¹Ÿæ€»ä¼šæœ‰ä¸€ä¸ªä¸»goroutineã€‚è¿™ä¸ªä¸»goroutineä¼šåœ¨Goç¨‹åºçš„è¿è¡Œå‡†å¤‡å·¥ä½œå®Œæˆåè¢«è‡ªåŠ¨åœ°å¯ç”¨ï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬åšä»»ä½•æ‰‹åŠ¨çš„æ“ä½œã€‚</p><p>æƒ³å¿…ä½ å·²ç»çŸ¥é“ï¼Œæ¯æ¡<code>go</code>è¯­å¥ä¸€èˆ¬éƒ½ä¼šæºå¸¦ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œè¿™ä¸ªè¢«è°ƒç”¨çš„å‡½æ•°å¸¸å¸¸è¢«ç§°ä¸º<code>go</code>å‡½æ•°ã€‚è€Œä¸»goroutineçš„<code>go</code>å‡½æ•°å°±æ˜¯é‚£ä¸ªä½œä¸ºç¨‹åºå…¥å£çš„<code>main</code>å‡½æ•°ã€‚</p><p>ä¸€å®šè¦æ³¨æ„ï¼Œ<code>go</code>å‡½æ•°çœŸæ­£è¢«æ‰§è¡Œçš„æ—¶é—´ï¼Œæ€»ä¼šä¸å…¶æ‰€å±çš„<code>go</code>è¯­å¥è¢«æ‰§è¡Œçš„æ—¶é—´ä¸åŒã€‚å½“ç¨‹åºæ‰§è¡Œåˆ°ä¸€æ¡<code>go</code>è¯­å¥çš„æ—¶å€™ï¼ŒGoè¯­è¨€çš„è¿è¡Œæ—¶ç³»ç»Ÿï¼Œä¼šå…ˆè¯•å›¾ä»æŸä¸ªå­˜æ”¾ç©ºé—²çš„Gçš„é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªGï¼ˆä¹Ÿå°±æ˜¯goroutineï¼‰ï¼Œå®ƒåªæœ‰åœ¨æ‰¾ä¸åˆ°ç©ºé—²Gçš„æƒ…å†µä¸‹æ‰ä¼šå»åˆ›å»ºä¸€ä¸ªæ–°çš„Gã€‚</p><p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘æ€»ä¼šè¯´â€œå¯ç”¨â€ä¸€ä¸ªgoroutineï¼Œè€Œä¸è¯´â€œåˆ›å»ºâ€ä¸€ä¸ªgoroutineçš„åŸå› ã€‚å·²å­˜åœ¨çš„goroutineæ€»æ˜¯ä¼šè¢«ä¼˜å…ˆå¤ç”¨ã€‚</p><p>ç„¶è€Œï¼Œåˆ›å»ºGçš„æˆæœ¬ä¹Ÿæ˜¯éå¸¸ä½çš„ã€‚åˆ›å»ºä¸€ä¸ªGå¹¶ä¸ä¼šåƒæ–°å»ºä¸€ä¸ªè¿›ç¨‹æˆ–è€…ä¸€ä¸ªç³»ç»Ÿçº§çº¿ç¨‹é‚£æ ·ï¼Œå¿…é¡»é€šè¿‡æ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿè°ƒç”¨æ¥å®Œæˆï¼Œåœ¨Goè¯­è¨€çš„è¿è¡Œæ—¶ç³»ç»Ÿå†…éƒ¨å°±å¯ä»¥å®Œå…¨åšåˆ°äº†ï¼Œæ›´ä½•å†µä¸€ä¸ªGä»…ç›¸å½“äºä¸ºéœ€è¦å¹¶å‘æ‰§è¡Œä»£ç ç‰‡æ®µæœåŠ¡çš„ä¸Šä¸‹æ–‡ç¯å¢ƒè€Œå·²ã€‚</p><p>åœ¨æ‹¿åˆ°äº†ä¸€ä¸ªç©ºé—²çš„Gä¹‹åï¼ŒGoè¯­è¨€è¿è¡Œæ—¶ç³»ç»Ÿä¼šç”¨è¿™ä¸ªGå»åŒ…è£…å½“å‰çš„é‚£ä¸ª<code>go</code>å‡½æ•°ï¼ˆæˆ–è€…è¯´è¯¥å‡½æ•°ä¸­çš„é‚£äº›ä»£ç ï¼‰ï¼Œç„¶åå†æŠŠè¿™ä¸ªGè¿½åŠ åˆ°æŸä¸ªå­˜æ”¾å¯è¿è¡Œçš„Gçš„é˜Ÿåˆ—ä¸­ã€‚</p><p>è¿™ç±»é˜Ÿåˆ—ä¸­çš„Gæ€»æ˜¯ä¼šæŒ‰ç…§å…ˆå…¥å…ˆå‡ºçš„é¡ºåºï¼Œå¾ˆå¿«åœ°ç”±è¿è¡Œæ—¶ç³»ç»Ÿå†…éƒ¨çš„è°ƒåº¦å™¨å®‰æ’è¿è¡Œã€‚è™½ç„¶è¿™ä¼šå¾ˆå¿«ï¼Œä½†æ˜¯ç”±äºä¸Šé¢æ‰€è¯´çš„é‚£äº›å‡†å¤‡å·¥ä½œè¿˜æ˜¯ä¸å¯é¿å…çš„ï¼Œæ‰€ä»¥è€—æ—¶è¿˜æ˜¯å­˜åœ¨çš„ã€‚</p><p>å› æ­¤ï¼Œ<code>go</code>å‡½æ•°çš„æ‰§è¡Œæ—¶é—´æ€»æ˜¯ä¼šæ˜æ˜¾æ»åäºå®ƒæ‰€å±çš„<code>go</code>è¯­å¥çš„æ‰§è¡Œæ—¶é—´ã€‚å½“ç„¶äº†ï¼Œè¿™é‡Œæ‰€è¯´çš„â€œæ˜æ˜¾æ»åâ€æ˜¯å¯¹äºè®¡ç®—æœºçš„CPUæ—¶é’Ÿå’ŒGoç¨‹åºæ¥è¯´çš„ã€‚æˆ‘ä»¬åœ¨å¤§å¤šæ•°æ—¶å€™éƒ½ä¸ä¼šæœ‰æ˜æ˜¾çš„æ„Ÿè§‰ã€‚</p><p>åœ¨è¯´æ˜äº†åŸç†ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹è¿™ç§åŸç†ä¸‹çš„è¡¨è±¡ã€‚è¯·è®°ä½ï¼Œåªè¦<code>go</code>è¯­å¥æœ¬èº«æ‰§è¡Œå®Œæ¯•ï¼ŒGoç¨‹åºå®Œå…¨ä¸ä¼šç­‰å¾…<code>go</code>å‡½æ•°çš„æ‰§è¡Œï¼Œå®ƒä¼šç«‹åˆ»å»æ‰§è¡Œåè¾¹çš„è¯­å¥ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¼‚æ­¥å¹¶å‘åœ°æ‰§è¡Œã€‚</p><p>è¿™é‡Œâ€œåè¾¹çš„è¯­å¥â€æŒ‡çš„ä¸€èˆ¬æ˜¯<code>for</code>è¯­å¥ä¸­çš„ä¸‹ä¸€ä¸ªè¿­ä»£ã€‚ç„¶è€Œï¼Œå½“æœ€åä¸€ä¸ªè¿­ä»£è¿è¡Œçš„æ—¶å€™ï¼Œè¿™ä¸ªâ€œåè¾¹çš„è¯­å¥â€æ˜¯ä¸å­˜åœ¨çš„ã€‚</p><p>åœ¨demo38.goä¸­çš„é‚£æ¡<code>for</code>è¯­å¥ä¼šä»¥å¾ˆå¿«çš„é€Ÿåº¦æ‰§è¡Œå®Œæ¯•ã€‚å½“å®ƒæ‰§è¡Œå®Œæ¯•æ—¶ï¼Œé‚£10ä¸ªåŒ…è£…äº†<code>go</code>å‡½æ•°çš„goroutineå¾€å¾€è¿˜æ²¡æœ‰è·å¾—è¿è¡Œçš„æœºä¼šã€‚</p><p>è¯·æ³¨æ„ï¼Œ<code>go</code>å‡½æ•°ä¸­çš„é‚£ä¸ªå¯¹<code>fmt.Println</code>å‡½æ•°çš„è°ƒç”¨æ˜¯ä»¥<code>for</code>è¯­å¥ä¸­çš„å˜é‡<code>i</code>ä½œä¸ºå‚æ•°çš„ã€‚ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœå½“<code>for</code>è¯­å¥æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œè¿™äº›<code>go</code>å‡½æ•°éƒ½è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œé‚£ä¹ˆå®ƒä»¬å¼•ç”¨çš„å˜é‡<code>i</code>çš„å€¼å°†ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>å®ƒä»¬éƒ½ä¼šæ˜¯<code>10</code>ï¼Œå¯¹å—ï¼Ÿé‚£ä¹ˆè¿™é“é¢˜çš„ç­”æ¡ˆä¼šæ˜¯â€œæ‰“å°å‡º10ä¸ª<code>10</code>â€ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿ</p><p>åœ¨ç¡®å®šæœ€ç»ˆçš„ç­”æ¡ˆä¹‹å‰ï¼Œä½ è¿˜éœ€è¦çŸ¥é“ä¸€ä¸ªä¸ä¸»goroutineæœ‰å…³çš„é‡è¦ç‰¹æ€§ï¼Œå³ï¼šä¸€æ—¦ä¸»goroutineä¸­çš„ä»£ç ï¼ˆä¹Ÿå°±æ˜¯<code>main</code>å‡½æ•°ä¸­çš„é‚£äº›ä»£ç ï¼‰æ‰§è¡Œå®Œæ¯•ï¼Œå½“å‰çš„Goç¨‹åºå°±ä¼šç»“æŸè¿è¡Œã€‚</p><p>å¦‚æ­¤ä¸€æ¥ï¼Œå¦‚æœåœ¨Goç¨‹åºç»“æŸçš„é‚£ä¸€åˆ»ï¼Œè¿˜æœ‰goroutineæœªå¾—åˆ°è¿è¡Œæœºä¼šï¼Œé‚£ä¹ˆå®ƒä»¬å°±çœŸçš„æ²¡æœ‰è¿è¡Œæœºä¼šäº†ï¼Œå®ƒä»¬ä¸­çš„ä»£ç ä¹Ÿå°±ä¸ä¼šè¢«æ‰§è¡Œäº†ã€‚</p><p>æˆ‘ä»¬åˆšæ‰è°ˆè®ºè¿‡ï¼Œå½“<code>for</code>è¯­å¥çš„æœ€åä¸€ä¸ªè¿­ä»£è¿è¡Œçš„æ—¶å€™ï¼Œå…¶ä¸­çš„é‚£æ¡<code>go</code>è¯­å¥å³æ˜¯æœ€åä¸€æ¡è¯­å¥ã€‚æ‰€ä»¥ï¼Œåœ¨æ‰§è¡Œå®Œè¿™æ¡<code>go</code>è¯­å¥ä¹‹åï¼Œä¸»goroutineä¸­çš„ä»£ç ä¹Ÿå°±æ‰§è¡Œå®Œäº†ï¼ŒGoç¨‹åºä¼šç«‹å³ç»“æŸè¿è¡Œã€‚é‚£ä¹ˆï¼Œå¦‚æœè¿™æ ·çš„è¯ï¼Œè¿˜ä¼šæœ‰ä»»ä½•å†…å®¹è¢«æ‰“å°å‡ºæ¥å—ï¼Ÿ</p><p>ä¸¥è°¨åœ°è®²ï¼ŒGoè¯­è¨€å¹¶ä¸ä¼šå»ä¿è¯è¿™äº›goroutineä¼šä»¥æ€æ ·çš„é¡ºåºè¿è¡Œã€‚ç”±äºä¸»goroutineä¼šä¸æˆ‘ä»¬æ‰‹åŠ¨å¯ç”¨çš„å…¶ä»–goroutineä¸€èµ·æ¥å—è°ƒåº¦ï¼Œåˆå› ä¸ºè°ƒåº¦å™¨å¾ˆå¯èƒ½ä¼šåœ¨goroutineä¸­çš„ä»£ç åªæ‰§è¡Œäº†ä¸€éƒ¨åˆ†çš„æ—¶å€™æš‚åœï¼Œä»¥æœŸæ‰€æœ‰çš„goroutineæœ‰æ›´å…¬å¹³çš„è¿è¡Œæœºä¼šã€‚</p><p>æ‰€ä»¥å“ªä¸ªgoroutineå…ˆæ‰§è¡Œå®Œã€å“ªä¸ªgoroutineåæ‰§è¡Œå®Œå¾€å¾€æ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œé™¤éæˆ‘ä»¬ä½¿ç”¨äº†æŸç§Goè¯­è¨€æä¾›çš„æ–¹å¼è¿›è¡Œäº†äººä¸ºå¹²é¢„ã€‚ç„¶è€Œï¼Œåœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è¿›è¡Œä»»ä½•äººä¸ºå¹²é¢„ã€‚</p><p>é‚£ç­”æ¡ˆåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±demo38.goä¸­å¦‚æ­¤ç®€å•çš„ä»£ç è€Œè¨€ï¼Œç»å¤§å¤šæ•°æƒ…å†µéƒ½ä¼šæ˜¯â€œä¸ä¼šæœ‰ä»»ä½•å†…å®¹è¢«æ‰“å°å‡ºæ¥â€ã€‚</p><p>ä½†æ˜¯ä¸ºäº†ä¸¥è°¨èµ·è§ï¼Œæ— è®ºåº”è˜è€…çš„å›ç­”æ˜¯â€œæ‰“å°å‡º10ä¸ª<code>10</code>â€è¿˜æ˜¯â€œä¸ä¼šæœ‰ä»»ä½•å†…å®¹è¢«æ‰“å°å‡ºæ¥â€ï¼Œåˆæˆ–æ˜¯â€œæ‰“å°å‡ºä¹±åºçš„<code>0</code>åˆ°<code>9</code>â€ï¼Œæˆ‘éƒ½ä¼šç´§æ¥ç€å»è¿½é—®â€œä¸ºä»€ä¹ˆï¼Ÿâ€å› ä¸ºåªæœ‰ä½ çŸ¥é“äº†è¿™èƒŒåçš„åŸç†ï¼Œä½ åšå‡ºçš„å›ç­”æ‰ä¼šè¢«è®¤ä¸ºæ˜¯æ­£ç¡®çš„ã€‚</p><p>è¿™ä¸ªåŸç†æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Œä»¥è‡³äºå¦‚æœä½ ä¸çŸ¥é“å®ƒï¼Œé‚£ä¹ˆå°±å‡ ä¹æ— æ³•ç¼–å†™å‡ºæ­£ç¡®çš„å¯å¹¶å‘æ‰§è¡Œçš„ç¨‹åºã€‚å¦‚æœä½ ä¸çŸ¥é“æ­¤åŸç†ï¼Œé‚£ä¹ˆå³ä½¿ä½ å†™çš„å¹¶å‘ç¨‹åºçœ‹èµ·æ¥å¯ä»¥æ­£ç¡®åœ°è¿è¡Œï¼Œé‚£ä¹Ÿè‚¯å®šæ˜¯è¿æ°”å¥½è€Œå·²ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘æè¿°äº†goroutineåœ¨æ“ä½œç³»ç»Ÿçš„å¹¶å‘ç¼–ç¨‹ä½“ç³»ï¼Œä»¥åŠåœ¨Goè¯­è¨€å¹¶å‘ç¼–ç¨‹æ¨¡å‹ä¸­çš„åœ°ä½å’Œä½œç”¨ã€‚è¿™äº›çŸ¥è¯†ç‚¹ä¼šä¸ºä½ æ‰“ä¸‹ä¸€ä¸ªåšå®çš„åŸºç¡€ã€‚</p><p>æˆ‘è¿˜æåˆ°äº†Goè¯­è¨€å†…éƒ¨çš„è¿è¡Œæ—¶ç³»ç»Ÿå’Œè°ƒåº¦å™¨ï¼Œä»¥åŠå®ƒä»¬å›´ç»•ç€goroutineåšçš„é‚£äº›ç»Ÿç­¹è°ƒé…å’Œç»´æŠ¤å·¥ä½œã€‚è¿™äº›å†…å®¹ä¸­çš„æ¯å¥è¯åº”è¯¥éƒ½ä¼šå¯¹ä½ æ­£ç¡®ç†è§£goroutineèµ·åˆ°å®è´¨æ€§çš„ä½œç”¨ã€‚ä½ å¯ä»¥ç”¨è¿™äº›çŸ¥è¯†å»è§£é‡Šä¸»é—®é¢˜ä¸­çš„é‚£ä¸ªç¨‹åºåœ¨è¿è¡Œåä¸ºä»€ä¹ˆä¼šäº§å‡ºé‚£æ ·çš„ç»“æœã€‚</p><p>ä¸‹ä¸€ç¯‡å†…å®¹ï¼Œæˆ‘ä»¬è¿˜ä¼šç»§ç»­å›´ç»•goè¯­å¥ä»¥åŠæ‰§è¡Œè§„åˆ™è°ˆä¸€äº›æ‰©å±•çŸ¥è¯†ï¼Œä»Šå¤©ç•™ç»™ä½ çš„æ€è€ƒé¢˜å°±æ˜¯ï¼šç”¨ä»€ä¹ˆæ‰‹æ®µå¯ä»¥å¯¹goroutineçš„å¯ç”¨æ•°é‡åŠ ä»¥é™åˆ¶ï¼Ÿ</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è§ã€‚</p><p><a href=\"https://github.com/hyper0x/Golang_Puzzlers\">æˆ³æ­¤æŸ¥çœ‹Goè¯­è¨€ä¸“æ æ–‡ç« é…å¥—è¯¦ç»†ä»£ç ã€‚</a></p><p></p>","neighbors":{"left":{"article_title":"15 | å…³äºæŒ‡é’ˆçš„æœ‰é™æ“ä½œ","id":18042},"right":{"article_title":"17 | goè¯­å¥åŠå…¶æ‰§è¡Œè§„åˆ™ï¼ˆä¸‹ï¼‰","id":39844}},"comments":[{"had_liked":false,"id":71627,"user_name":"Kevin Xiao","can_delete":false,"product_type":"c1","uid":1258274,"ip_address":"","ucode":"F3A5D18E731131","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/22/3e14fb1b.jpg","comment_is_top":false,"comment_ctime":1551402659,"is_pvip":false,"replies":[{"id":"25759","content":"Goè¯­è¨€é‡Œåªæœ‰ä¼ å€¼ï¼Œæ²¡æœ‰ä¼ å¼•ç”¨ã€‚å¦‚æœgoå‡½æ•°æ˜¯æ— å‚æ•°çš„åŒ¿åå‡½æ•°ï¼Œé‚£ä¹ˆåœ¨å®ƒé‡Œé¢çš„fmt.Printlnå‡½æ•°çš„å‚æ•°åªä¼šåœ¨goå‡½æ•°è¢«æ‰§è¡Œçš„æ—¶å€™æ‰ä¼šæ±‚å€¼ã€‚åˆ°é‚£ä¸ªæ—¶å€™ï¼Œiçš„å€¼å¯èƒ½å·²ç»æ˜¯10ï¼ˆæœ€åä¸€ä¸ªæ•°ï¼‰äº†ï¼Œå› ä¸ºforè¯­å¥é‚£æ—¶å€™å¯èƒ½å·²ç»éƒ½æ‰§è¡Œå®Œæ¯•äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1551415862,"ip_address":"","comment_id":71627,"utype":1}],"discussion_count":2,"race_medal":0,"score":"91745715875","product_id":100013101,"comment_content":"è¯·é—®ï¼Œè¯¥ç¤ºä¾‹ä»£ç ä¸­ï¼Œå½“goå‡½æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Ÿè€Œä¼ ç»™fmt.Println(a ...interface{})çš„æ˜¯å˜é‡içš„å¼•ç”¨å—ï¼Ÿ","like_count":22,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441240,"discussion_content":"Goè¯­è¨€é‡Œåªæœ‰ä¼ å€¼ï¼Œæ²¡æœ‰ä¼ å¼•ç”¨ã€‚å¦‚æœgoå‡½æ•°æ˜¯æ— å‚æ•°çš„åŒ¿åå‡½æ•°ï¼Œé‚£ä¹ˆåœ¨å®ƒé‡Œé¢çš„fmt.Printlnå‡½æ•°çš„å‚æ•°åªä¼šåœ¨goå‡½æ•°è¢«æ‰§è¡Œçš„æ—¶å€™æ‰ä¼šæ±‚å€¼ã€‚åˆ°é‚£ä¸ªæ—¶å€™ï¼Œiçš„å€¼å¯èƒ½å·²ç»æ˜¯10ï¼ˆæœ€åä¸€ä¸ªæ•°ï¼‰äº†ï¼Œå› ä¸ºforè¯­å¥é‚£æ—¶å€™å¯èƒ½å·²ç»éƒ½æ‰§è¡Œå®Œæ¯•äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551415862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"æƒ˜ é—»","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381619,"discussion_content":"è¿™ç›¸å½“äºæŒ‡é’ˆå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625146971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133348,"user_name":"ArtistLu","can_delete":false,"product_type":"c1","uid":1166373,"ip_address":"","ucode":"2E641A3EB4F9AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/cc/25/8c6eab2c.jpg","comment_is_top":false,"comment_ctime":1568523615,"is_pvip":true,"replies":[{"id":"51111","content":"å¯è¿è¡Œ G é˜Ÿåˆ—é‡Œé¢æ˜¯å…ˆå…¥å…ˆå‡ºçš„ï¼Œå¯æ˜¯è°ƒåº¦å™¨é‡Œæœ‰å¤šä¸ªå¯è¿è¡Œ G é˜Ÿåˆ—ï¼ˆæ¯ä¸ª P éƒ½æœ‰ä¸€ä¸ªï¼‰ï¼Œè€Œä¸”å“ªä¸ª G ä»€ä¹ˆè¿›å…¥å“ªä¸ªå¯è¿è¡ŒG é˜Ÿåˆ—è¿˜å¦æœ‰è§„åˆ™ã€‚æ‰€ä»¥è¿™ä¸¤å¥è¯å¹¶ä¸çŸ›ç›¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1568535069,"ip_address":"","comment_id":133348,"utype":1}],"discussion_count":2,"race_medal":0,"score":"78877934943","product_id":100013101,"comment_content":"è€å¸ˆè¯·é—®ä¸‹æ–‡ä¸­æåˆ°ï¼Œè¿™ç±»é˜Ÿåˆ—ä¸­çš„ G æ€»æ˜¯ä¼šæŒ‰ç…§å…ˆå…¥å…ˆå‡ºçš„é¡ºåºâ€¦â€¦å’ŒGo è¯­è¨€å¹¶ä¸ä¼šå»ä¿è¯è¿™äº› goroutine ä¼šä»¥æ€æ ·çš„é¡ºæ‰§è¡Œå¦‚ä½•ç†è§£å‹’ï¼Ÿ<br>","like_count":18,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467360,"discussion_content":"å¯è¿è¡Œ G é˜Ÿåˆ—é‡Œé¢æ˜¯å…ˆå…¥å…ˆå‡ºçš„ï¼Œå¯æ˜¯è°ƒåº¦å™¨é‡Œæœ‰å¤šä¸ªå¯è¿è¡Œ G é˜Ÿåˆ—ï¼ˆæ¯ä¸ª P éƒ½æœ‰ä¸€ä¸ªï¼‰ï¼Œè€Œä¸”å“ªä¸ª G ä»€ä¹ˆè¿›å…¥å“ªä¸ªå¯è¿è¡ŒG é˜Ÿåˆ—è¿˜å¦æœ‰è§„åˆ™ã€‚æ‰€ä»¥è¿™ä¸¤å¥è¯å¹¶ä¸çŸ›ç›¾ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1568535069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250580,"avatar":"https://static001.geekbang.org/account/avatar/00/13/15/14/21e0807e.jpg","nickname":"gm","note":"","ucode":"0E39AE5BE34E27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380580,"discussion_content":"é˜Ÿåˆ—ä¸­æ˜¯å…ˆè¿›å…ˆå‡ºï¼Œè€Œå¦‚ä½•é€‰æ‹©è¿›å“ªä¸ªé˜Ÿåˆ—å¦æœ‰è§„åˆ™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624590950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224173,"user_name":"Geek_51aa7f","can_delete":false,"product_type":"c1","uid":2029348,"ip_address":"","ucode":"B92E2C36923EB8","user_header":"","comment_is_top":false,"comment_ctime":1591299801,"is_pvip":false,"replies":[{"id":"82565","content":"å³ä½¿Pæ˜¯1ï¼ŒMä¹Ÿå¯èƒ½æœ‰å¤šä¸ªå•Šã€‚â€œæ‰“å°â€æ˜¯ä¸€ç§I&#47;Oäº‹ä»¶ã€‚åªè¦æ˜¯I&#47;Oäº‹ä»¶åœ¨æ‰§è¡Œçš„æ—¶å€™å½“å‰Må’Œå½“å‰Gå°±ä¼šè„±ç¦»å½“å‰Pï¼Œè¿™æ—¶å€™å½“å‰På¯ä»¥å†å»æ‰¾åˆ«çš„Gå»è¿è¡Œã€‚å†µä¸”ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¼šè°ƒåº¦çº¿ç¨‹çš„è¿è¡Œçš„ã€‚<br><br>æ‰€ä»¥ï¼Œè¿™ç§é¡ºåºçš„é¢„æµ‹è¿˜æ˜¯ä¸è¦åšã€‚å¦‚æœæƒ³ä¿è¯ç»å¯¹çš„é¡ºåºï¼Œå°±è¦ç”¨åŒæ­¥å·¥å…·æˆ–è€…é€šé“ã€‚<br><br>æœ€åï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹æœ€æ–°çš„Goæºç ï¼ˆgo 1.14ï¼‰ï¼Œåœ¨æœ‰ä¸€äº›æ—¶å€™è°ƒåº¦å™¨ä¹Ÿä¼šè®©Gæ’é˜Ÿï¼Œæ¯”å¦‚åœ¨ä»é€šé“çš„é˜»å¡æ“ä½œè¿”å›çš„æ—¶å€™ï¼Œåˆæ¯”å¦‚åœ¨ä»ç½‘ç»œI&#47;Oäº‹ä»¶è¿”å›çš„æ—¶å€™ï¼Œè¿˜æ¯”å¦‚åœ¨æ‰§è¡ŒGCä»»åŠ¡çš„æ—¶å€™ã€‚ä¸è¿‡ï¼Œè¿™ç§æ’é˜Ÿè¡Œä¸ºä¹Ÿå¯èƒ½ä¸æˆåŠŸï¼Œæ¯”å¦‚åœ¨æœ¬åœ°Pçš„å¯è¿è¡ŒGé˜Ÿåˆ—å·²æ»¡çš„æ—¶å€™ã€‚<br><br>æœ€åçš„æœ€åï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œé™¤éæœ‰åŒæ­¥å·¥å…·æˆ–è€…é€šé“çš„ä¿éšœï¼Œå¦åˆ™ä¸è¦å»çŒœæµ‹Gçš„æ‰§è¡Œé¡ºåºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1591328115,"ip_address":"","comment_id":224173,"utype":1}],"discussion_count":6,"race_medal":0,"score":"70310776537","product_id":100013101,"comment_content":"éƒè€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æƒ³çŸ¥é“è®¾ç½®äº†Pçš„æœ€å¤§æ•°é‡ä¸º1ä¹‹åï¼Œé‚£ä¹ˆæ ¹æ®ä½¿ç”¨goè¯­å¥æäº¤çš„é¡ºåºï¼Œè°ƒåº¦å™¨å¯è¿è¡Œé˜Ÿåˆ—æˆ–è€…æœ¬åœ°Pçš„é˜Ÿåˆ—è¿è¡Œé¡ºåºæ˜¯å…ˆå…¥å…ˆå‡ºçš„ï¼Œä½†ä¸‹é¢ä»£ç è¿”å›çš„ç»“æœå´å…ˆæ‰“å°äº†9ç„¶åæ˜¯é¡ºåºæ‰“å°0-8ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢<br>func main() {<br>   runtime.GOMAXPROCS(1)<br>   for i := 0; i &lt; 10; i++ {<br>      go func(i int) {<br>         fmt.Println(i)<br>      }(i)<br>   }<br>   time.Sleep(time.Second)<br>}<br>&#47;&#47; 9 0 1 2 3 4 5 6 7 8","like_count":17,"discussions":[{"author":{"id":2100644,"avatar":"","nickname":"Geek_8e2759","note":"","ucode":"EBDBA4D92B5C50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301558,"discussion_content":"`runtime.GOMAXPROCS()` è®¾ç½® P çš„æ•°é‡ï¼Œå®é™…ä¸Šè®¾ç½®æ P çš„ Local é˜Ÿåˆ—æ•°é‡ï¼›ä½†æ˜¯ go runtime è¿˜ä¼šé¢å¤–å­˜åœ¨ä¸€ä¸ª global é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´å³ä½¿è®¾ç½® GOMAXPROCS ä¸º 1ï¼Œç³»ç»Ÿä¸­è¿˜æ˜¯ä¼šè‡³å°‘å­˜åœ¨ä¸¤ä¸ªè°ƒåº¦é˜Ÿåˆ—ã€‚å‚è€ƒè‡ª https://tonybai.com/2017/06/23/an-intro-about-goroutine-scheduler/","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1598575689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2100644,"avatar":"","nickname":"Geek_8e2759","note":"","ucode":"EBDBA4D92B5C50","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312182,"discussion_content":"è¿™ç¯‡æ¨èçš„æ–‡ç« å¾ˆæ£’ï¼Œè°¢è°¢ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602603058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301558,"ip_address":""},"score":312182,"extra":""}]},{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497388,"discussion_content":"å³ä½¿Pæ˜¯1ï¼ŒMä¹Ÿå¯èƒ½æœ‰å¤šä¸ªå•Šã€‚â€œæ‰“å°â€æ˜¯ä¸€ç§I/Oäº‹ä»¶ã€‚åªè¦æ˜¯I/Oäº‹ä»¶åœ¨æ‰§è¡Œçš„æ—¶å€™å½“å‰Må’Œå½“å‰Gå°±ä¼šè„±ç¦»å½“å‰Pï¼Œè¿™æ—¶å€™å½“å‰På¯ä»¥å†å»æ‰¾åˆ«çš„Gå»è¿è¡Œã€‚å†µä¸”ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¼šè°ƒåº¦çº¿ç¨‹çš„è¿è¡Œçš„ã€‚\n\næ‰€ä»¥ï¼Œè¿™ç§é¡ºåºçš„é¢„æµ‹è¿˜æ˜¯ä¸è¦åšã€‚å¦‚æœæƒ³ä¿è¯ç»å¯¹çš„é¡ºåºï¼Œå°±è¦ç”¨åŒæ­¥å·¥å…·æˆ–è€…é€šé“ã€‚\n\næœ€åï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹æœ€æ–°çš„Goæºç ï¼ˆgo 1.14ï¼‰ï¼Œåœ¨æœ‰ä¸€äº›æ—¶å€™è°ƒåº¦å™¨ä¹Ÿä¼šè®©Gæ’é˜Ÿï¼Œæ¯”å¦‚åœ¨ä»é€šé“çš„é˜»å¡æ“ä½œè¿”å›çš„æ—¶å€™ï¼Œåˆæ¯”å¦‚åœ¨ä»ç½‘ç»œI/Oäº‹ä»¶è¿”å›çš„æ—¶å€™ï¼Œè¿˜æ¯”å¦‚åœ¨æ‰§è¡ŒGCä»»åŠ¡çš„æ—¶å€™ã€‚ä¸è¿‡ï¼Œè¿™ç§æ’é˜Ÿè¡Œä¸ºä¹Ÿå¯èƒ½ä¸æˆåŠŸï¼Œæ¯”å¦‚åœ¨æœ¬åœ°Pçš„å¯è¿è¡ŒGé˜Ÿåˆ—å·²æ»¡çš„æ—¶å€™ã€‚\n\næœ€åçš„æœ€åï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œé™¤éæœ‰åŒæ­¥å·¥å…·æˆ–è€…é€šé“çš„ä¿éšœï¼Œå¦åˆ™ä¸è¦å»çŒœæµ‹Gçš„æ‰§è¡Œé¡ºåºã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1591328115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1875343,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqHMAwG4atmGDJ2MtH9A3ua8N7rtxu7gAiaomCVJ53U2OBxLWibQa9gicmgfoTy4mCgFRoknes6iaJyEQ/132","nickname":"é»„æ¥·æ–‡","note":"","ucode":"130546198B6F55","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387798,"discussion_content":"å…¶å®è¿™ä¸ªè·Ÿè°ƒåº¦çš„å®ç°æœ‰å…³ï¼Œpåœ¨æºç å®ç°ä¸Šæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œä¸Šé¢æœ‰ä¸¤ä¸ªå±æ€§å­˜äº†gã€‚ä¸€ä¸ªæ˜¯runq ,è¿™ä¸ªæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º256çš„goroutineæ•°ç»„ã€‚è¿˜æœ‰ä¸ªå±æ€§æ˜¯runnextï¼Œè¿™ä¸ªå±æ€§ä¿å­˜äº†ä¸‹ä¸€ä¸ªå¯è¿è¡Œçš„gã€‚åç¨‹åœ¨è°ƒåº¦çš„æ—¶å€™æ€»æ˜¯ä¼˜å…ˆä»runnextä¸­æ‹¿ï¼Œå¦‚æœrunnextä¸ºç©ºæ‰ä¼šå»runqä¸­è·å–ä¸€ä¸ªã€‚æ–°åˆ›å»ºçš„åç¨‹æ€»æ˜¯ä¼šå…ˆæ”¾åˆ°runnextä¸­ï¼Œå¦‚æœrunnextå·²ç»æœ‰å€¼äº†å°±ä¼šæŠŠä¹‹å‰çš„å€¼æ”¾å…¥åˆ°runqä¸­ã€‚æ‰€ä»¥æœ€åä¸€ä¸ªåˆ›å»ºçš„goroutineä¼šè¢«å…ˆæ‰§è¡Œã€‚ä½†æ˜¯è™½ç„¶ä»è°ƒåº¦çš„æºç ä¸Šæ¥çœ‹æ˜¯è¿™æ ·ï¼Œè¿˜æ˜¯è·Ÿä½œè€…è¯´çš„ä¸€æ ·ï¼Œé™¤éæœ‰åŒæ­¥å·¥å…·æˆ–è€…é€šé“çš„ä¿éšœï¼Œå¦åˆ™ä¸è¦å»çŒœæµ‹Gçš„æ‰§è¡Œé¡ºåºã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1628418908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2806043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","nickname":"ddh","note":"","ucode":"8E852375365F16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541034,"discussion_content":"è¿™ä¸ªä»£ç æ¡ˆä¾‹å¾ˆå¥½å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640239715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312183,"discussion_content":"æˆ‘è§‰å¾—ï¼Œæ—¢ç„¶å¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯è¿™ä¹ˆä¸ªå›ºå®šçš„ç»“æœï¼Œå¿…ç„¶æ˜¯æœ‰æ·±å±‚æ¬¡åŸå› çš„ã€‚\nä¸çŸ¥é“æœ‰æ²¡æœ‰é«˜æ‰‹å¯¹ç€æºç å¸®å¿™åˆ†æåˆ†æäº§ç”Ÿè¿™ä¸ªç°è±¡çš„åŸå› ã€‚\n\næˆ‘çŒœæµ‹æ˜¯ä¸¤ä¸ªGé˜Ÿåˆ—å¯¼è‡´çš„ï¼Œä¸€ä¸ªæ˜¯æœ¬åœ°çš„Gé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯å…¨å±€çš„ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602603193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24662,"user_name":"cygnus","can_delete":false,"product_type":"c1","uid":1120452,"ip_address":"","ucode":"C60A86E3084754","user_header":"https://static001.geekbang.org/account/avatar/00/11/18/c4/e55fdc1c.jpg","comment_is_top":false,"comment_ctime":1537181741,"is_pvip":false,"replies":[{"id":"9373","content":"è¿™æ˜¯æ§åˆ¶Pçš„æ•°é‡çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1537443404,"ip_address":"","comment_id":24662,"utype":1}],"discussion_count":1,"race_medal":0,"score":"70256658477","product_id":100013101,"comment_content":"é™¤äº†ç”¨å¸¦ç¼“å†²çš„é€šé“ï¼Œè¿˜å¯ä»¥ç”¨runtime.GOMAXPROCS(maxProcs)æ¥æ§åˆ¶Goroutineå¹¶å‘æ•°","like_count":16,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424077,"discussion_content":"è¿™æ˜¯æ§åˆ¶Pçš„æ•°é‡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537443404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":30920,"user_name":"äº‘å­¦","can_delete":false,"product_type":"c1","uid":1027233,"ip_address":"","ucode":"366AE90BA06356","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg","comment_is_top":false,"comment_ctime":1539048353,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"61668590497","product_id":100013101,"comment_content":"è¯·é—®è¿™ä¸ªä¾‹å­ä¸­go routineå¯¹å˜é‡içš„æ•è·æ˜¯å¼•ç”¨ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1229070,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c1/0e/2b987d54.jpg","nickname":"èœ‰è£","note":"","ucode":"77CF92496855D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":33135,"discussion_content":"ä½¿ç”¨å‡½æ•°ä¹‹å¤–çš„å˜é‡   è¿™é‡Œæ˜¯é—­åŒ…","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1571101249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201009,"avatar":"https://static001.geekbang.org/account/avatar/00/12/53/71/a4e9f20e.jpg","nickname":"è¨€åˆæœ¨æ‰","note":"","ucode":"300BEDC1B07DF1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":133397,"discussion_content":"æ˜¯å€¼ä¼ é€’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578963834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229686,"user_name":"wilson","can_delete":false,"product_type":"c1","uid":2028264,"ip_address":"","ucode":"690A09CBBCCD80","user_header":"","comment_is_top":false,"comment_ctime":1593098243,"is_pvip":false,"replies":[{"id":"84779","content":"è¿™ä¸ªè¡¨ç¤ºï¼šè°ƒç”¨å‰é¢çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ func {} ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1593148349,"ip_address":"","comment_id":229686,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53132705795","product_id":100013101,"comment_content":"go func { } ()   æœ€åé‚£ä¸ªå·¦å³æ‹¬å·çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":13,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499592,"discussion_content":"è¿™ä¸ªè¡¨ç¤ºï¼šè°ƒç”¨å‰é¢çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ func {} ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593148349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28319,"user_name":"yandongxiao","can_delete":false,"product_type":"c1","uid":1017700,"ip_address":"","ucode":"D397F4DB0109C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/64/3882d90d.jpg","comment_is_top":false,"comment_ctime":1538050166,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"48782690422","product_id":100013101,"comment_content":"åˆ›å»ºèƒ½åˆ›å»ºæˆåƒä¸Šä¸‡ä¸ªgoroutineï¼Œä½†æ˜¯ä¸ä¸€å®šæœ‰é‚£ä¹ˆå¤šçš„ç³»ç»Ÿèµ„æºï¼Œæ¯”å¦‚ä¸€èˆ¬ç¨‹åºçš„æœ€å¤§å¯ä»¥æ‰“å¼€4096ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚æ‰€ä»¥éœ€è¦å¯¹goroutine çš„å¯ç”¨æ•°é‡åŠ ä»¥é™åˆ¶ã€‚å¸¸ç”¨æ–¹æ³•ï¼š<br>1. buffered channel<br>2. WaitGroup<br>","like_count":12,"discussions":[{"author":{"id":1636568,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM6iagw7ct4ca3niaSEFNicu2wy2KuCibO6eiaRzoRGJb50WTrbkKQib9mTArnTr8jJUazO9O2ibLZNfjjl35cfCHkBPs7N/132","nickname":"Geek_f39659","note":"","ucode":"2206A8C590423C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46001,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯goroutineæ˜¯åŸºäºçº¿ç¨‹æ± å®ç°çš„è½»é‡çº§ç”¨æˆ·çº¿ç¨‹ï¼Œè·Ÿæ–‡ä»¶å¥æŸ„ä»€ä¹ˆçš„ä¸æ²¾è¾¹ã€‚è¿™æ ·å¯ä»¥åŒæ—¶æœ‰æˆåƒä¸Šä¸‡çš„goroutineåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…è°ƒåº¦ã€‚åŒæ—¶è°ƒåº¦çš„æ•°ç›®å°±è¦å–å†³äºåº•ä¸‹çº¿ç¨‹æ± çš„å¤§å°äº†ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1573108253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1071974,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","nickname":"å…š","note":"","ucode":"EE531DB3EA124D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3034,"discussion_content":"goroutineæ˜¯åç¨‹+çº¿ç¨‹ï¼Œæˆåƒä¸Šä¸‡æ˜¯å¯èƒ½","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1564126740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1613760,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9f/c0/86febfff.jpg","nickname":"Master","note":"","ucode":"79D0145B853C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337810,"discussion_content":"è€å“¥ä½ è¿™è¯´çš„æœ‰é—®é¢˜å•Šï¼Œå’Œç³»ç»Ÿçº§\næ²¡å…³ç³»å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609079434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87012,"user_name":"å­™ç¨šæ˜Š","can_delete":false,"product_type":"c1","uid":1010660,"ip_address":"","ucode":"44283BA4A577B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/e4/afacba1c.jpg","comment_is_top":false,"comment_ctime":1555496759,"is_pvip":false,"replies":[{"id":"31375","content":"æˆ‘å†å¼ºè°ƒä¸€ä¸‹ã€‚åœ¨goè¯­å¥æ‰§è¡Œåï¼ŒGoè¿è¡Œæ—¶ç³»ç»Ÿä¼šæŠŠå¯¹åº”çš„goå‡½æ•°è£…è¿›æ–°å¯ç”¨çš„goroutineä¸­ï¼Œéšåè°ƒåº¦æ‰§è¡Œã€‚å› ä¸ºè¿™ä¸ªè°ƒåº¦æ˜¯ä¸ä¿è¯å…ˆåé¡ºåºçš„ï¼Œæ‰€ä»¥è¿™äº›goå‡½æ•°çš„æ‰§è¡Œåœ¨é»˜è®¤æƒ…å†µä¸‹ä¹Ÿæ˜¯ä¹±åºçš„ã€‚å› æ­¤ï¼Œä½ è¿™æ ·å†™æ— æ³•ä¿è¯æ•°å­—çš„é¡ºåºæ‰“å°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1555556121,"ip_address":"","comment_id":87012,"utype":1}],"discussion_count":5,"race_medal":0,"score":"44505169719","product_id":100013101,"comment_content":"å¦‚æœæ˜¯<br>package main<br><br>import &quot;fmt&quot;<br><br>func main() {<br>\tfor i := 0; i &lt; 10; i++ {<br>\t\tgo func(i int) {<br>\t\t\tfmt.Println(i)<br>\t\t}(i)<br>\t}<br>}<br>è¿™æ ·å­çš„è¯ï¼Œiè¾“å…¥å°±æ˜¯0-9äº†å§","like_count":10,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447280,"discussion_content":"æˆ‘å†å¼ºè°ƒä¸€ä¸‹ã€‚åœ¨goè¯­å¥æ‰§è¡Œåï¼ŒGoè¿è¡Œæ—¶ç³»ç»Ÿä¼šæŠŠå¯¹åº”çš„goå‡½æ•°è£…è¿›æ–°å¯ç”¨çš„goroutineä¸­ï¼Œéšåè°ƒåº¦æ‰§è¡Œã€‚å› ä¸ºè¿™ä¸ªè°ƒåº¦æ˜¯ä¸ä¿è¯å…ˆåé¡ºåºçš„ï¼Œæ‰€ä»¥è¿™äº›goå‡½æ•°çš„æ‰§è¡Œåœ¨é»˜è®¤æƒ…å†µä¸‹ä¹Ÿæ˜¯ä¹±åºçš„ã€‚å› æ­¤ï¼Œä½ è¿™æ ·å†™æ— æ³•ä¿è¯æ•°å­—çš„é¡ºåºæ‰“å°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555556121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2100644,"avatar":"","nickname":"Geek_8e2759","note":"","ucode":"EBDBA4D92B5C50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301555,"discussion_content":"ä¿è¯çš„æ˜¯ä¼ é€’ç»™æ¯ä¸ª go çš„å‚æ•°æ˜¯  0-9ï¼›ä½†å„ä¸ª go å¾—åˆ°ã€è¢«æ‰§è¡Œã€çš„é¡ºåºæ˜¯æ— æ³•ä¿è¯çš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1598575261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1417824,"avatar":"https://static001.geekbang.org/account/avatar/00/15/a2/60/f3939ab4.jpg","nickname":"å“ˆå“¼","note":"","ucode":"C1108406573D49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":11745,"discussion_content":"ä»–è¯´çš„æ˜¯è¿™æ ·iå°±ä¸ä¼šé‡å¤ï¼Œä¸å¯èƒ½éƒ½æ˜¯10ä¹‹ç±»çš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1568428568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1171449,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL40CYbBtPXNzH9iatW8pdfsGR321dgzicIujfa0fyEh0KsowmrEBsLcznZ4A0SichgECtOib3SsyU6jg/132","nickname":"è±¢é¾™æ°","note":"","ucode":"7F50E0EE2CFC5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1417824,"avatar":"https://static001.geekbang.org/account/avatar/00/15/a2/60/f3939ab4.jpg","nickname":"å“ˆå“¼","note":"","ucode":"C1108406573D49","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298752,"discussion_content":"è¯•ä¸€ä¸‹ï¼Œç¡®å®æ˜¯0-9ä¹±åº","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597392291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":11745,"ip_address":""},"score":298752,"extra":""}]},{"author":{"id":2323770,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/UsavciapkMHkEnWLF3Dy9Od2VfLc1h56ibw26icXLfkoXhLyh8fIWTerz214ZImpyKf0S0AFAKjGa8oyL7iavZubcA/132","nickname":"Geek_a21c83","note":"","ucode":"151208F780F47D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383095,"discussion_content":"æˆ‘è¯•äº†ä¸‹ï¼Œç»“æœä¹Ÿæ˜¯ç©ºå•Šã€‚ä¸»goroutineè¿è¡Œå®Œç›´æ¥é€€å‡ºï¼Œè¿™äº›å¼€å¯çš„goroutineæ²¡æœºä¼šæ‰§è¡Œçš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1625902695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138204,"user_name":"å¤å¤","can_delete":false,"product_type":"c1","uid":1307441,"ip_address":"","ucode":"E18B495A98A14C","user_header":"https://static001.geekbang.org/account/avatar/00/13/f3/31/903448f8.jpg","comment_is_top":false,"comment_ctime":1570092753,"is_pvip":false,"replies":[{"id":"53416","content":"ä¸»è¦æ˜¯å› ä¸ºè®¡ç®—æœºçš„å†…å­˜ï¼ˆä»¥åŠå…¶ä»–èµ„æºï¼‰æ€»æ˜¯æœ‰é™çš„ã€‚ä»ç¨‹åºè®¾è®¡çš„è§’åº¦è®²ï¼Œé™åˆ¶æŸç§æ‰§è¡Œé«˜å¹¶å‘ä»»åŠ¡çš„ goroutine çš„æ•°é‡ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚å¦å¤–ï¼Œå•è¿›ç¨‹å†…æ•°åä¸‡çš„ goroutine ä¹Ÿä¼šå¯¹ Go è¯­è¨€çš„è°ƒåº¦å™¨å’Œæ“ä½œç³»ç»Ÿå¸¦æ¥ä¸å°çš„å‹åŠ›ã€‚<br><br>å†æœ‰ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡åœ°å»é‡åŒ–ç¨‹åºå¯¹èµ„æºçš„ä½¿ç”¨ï¼Œå¹¶ä¸”æœ‰èŠ‚åˆ¶åœ°åŒºä½¿ç”¨èµ„æºã€‚å½“ç„¶ï¼Œå…·ä½“çš„ä½¿ç”¨ä¸Šé™è®¾å®šæˆå¤šå°‘åˆé€‚ï¼Œè¿˜æœ‰ä»¥å®é™…å‹æµ‹çš„ç»“æœä¸ºå‡†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1570435708,"ip_address":"","comment_id":138204,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40224798417","product_id":100013101,"comment_content":"æ—¢ç„¶ GPM åˆ†å±‚æ¨¡å‹å®šä¹‰äº† G ä¸ M å¯ä»¥å¤šå¯¹å¤šï¼Œå¹¶ä¸” G çš„åˆ›å»ºä»£ä»·å¾ˆå°æ•°é‡æ²¡æœ‰é™åˆ¶ã€‚ä¸ºä»€ä¹ˆè¦å¯¹ goroutine çš„å¯ç”¨æ•°é‡åŠ ä»¥é™åˆ¶ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469435,"discussion_content":"ä¸»è¦æ˜¯å› ä¸ºè®¡ç®—æœºçš„å†…å­˜ï¼ˆä»¥åŠå…¶ä»–èµ„æºï¼‰æ€»æ˜¯æœ‰é™çš„ã€‚ä»ç¨‹åºè®¾è®¡çš„è§’åº¦è®²ï¼Œé™åˆ¶æŸç§æ‰§è¡Œé«˜å¹¶å‘ä»»åŠ¡çš„ goroutine çš„æ•°é‡ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚å¦å¤–ï¼Œå•è¿›ç¨‹å†…æ•°åä¸‡çš„ goroutine ä¹Ÿä¼šå¯¹ Go è¯­è¨€çš„è°ƒåº¦å™¨å’Œæ“ä½œç³»ç»Ÿå¸¦æ¥ä¸å°çš„å‹åŠ›ã€‚\n\nå†æœ‰ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡åœ°å»é‡åŒ–ç¨‹åºå¯¹èµ„æºçš„ä½¿ç”¨ï¼Œå¹¶ä¸”æœ‰èŠ‚åˆ¶åœ°åŒºä½¿ç”¨èµ„æºã€‚å½“ç„¶ï¼Œå…·ä½“çš„ä½¿ç”¨ä¸Šé™è®¾å®šæˆå¤šå°‘åˆé€‚ï¼Œè¿˜æœ‰ä»¥å®é™…å‹æµ‹çš„ç»“æœä¸ºå‡†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570435708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205305,"user_name":"æ‰©æ•£æ€§ç™¾ä¸‡å’¸é¢åŒ…","can_delete":false,"product_type":"c1","uid":1905171,"ip_address":"","ucode":"6D703D51553B42","user_header":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","comment_is_top":false,"comment_ctime":1586589254,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18766458438","product_id":100013101,"comment_content":"goroutineåç¨‹ä¸çº¿ç¨‹è¿›ç¨‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼ˆè¿™æ˜¯é¢è¯•å¸¸è€ƒçš„ï¼‰ï¼Ÿä¸ºä»€ä¹ˆå®ƒçš„åˆ›å»ºå’Œé”€æ¯å¼€é”€å°±è¿™ä¹ˆä½ï¼Ÿå†è¯´äº†GPMä¹Ÿä¼šå¯¹æ¥ç³»ç»Ÿçº§çº¿ç¨‹å•Šï¼Œä¹Ÿåº”è¯¥ä¼šå­˜åœ¨ç³»ç»Ÿè°ƒç”¨ï¼Œé‚£ä¼˜åŠ¿ä½“ç°åœ¨å“ªé‡Œå‘¢ï¼Ÿ<br><br>è¿˜æœ‰èƒ½ä¸èƒ½ä¸¾å‡ ä¸ªå…³äºç”¨æˆ·çº§çº¿ç¨‹çš„ä¾‹å­ï¼Ÿæˆ‘çŸ¥é“ç³»ç»Ÿçº§çº¿ç¨‹æ˜¯ç”¨æ¯”å¦‚glibcçš„åº“å‡½æ•°åˆ›å»ºçš„ï¼Œä½†æ˜¯ä¸äº†è§£ç”¨æˆ·çº§çº¿ç¨‹ã€‚æ„Ÿè§‰å¤šçº¿ç¨‹åº“ï¼Œæˆ‘ä»¬ä¹Ÿç¡®å®åªéœ€è¦ç®¡çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯å•Šï¼Œå¹¶ä¸ç®¡è°ƒåº¦ã€‚","like_count":5},{"had_liked":false,"id":30017,"user_name":"ğŸš²ğŸƒğŸŠ","can_delete":false,"product_type":"c1","uid":1103772,"ip_address":"","ucode":"F235DF04916264","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/9c/f7d3b973.jpg","comment_is_top":false,"comment_ctime":1538624706,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18718493890","product_id":100013101,"comment_content":"é™åˆ¶Gçš„æ•°é‡ï¼Œå¯ä»¥ä½¿ç”¨goroutine pool","like_count":4},{"had_liked":false,"id":26151,"user_name":"colben","can_delete":false,"product_type":"c1","uid":1200769,"ip_address":"","ucode":"5E5DBA48578E96","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/81/745475e9.jpg","comment_is_top":false,"comment_ctime":1537507037,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18717376221","product_id":100013101,"comment_content":"&quot;é‚£ä¹Ÿè‚¯å®šæ˜¯è¿æ°”å¥½è€Œå·²&quot;<br>â€œæ€»ç»“â€å‰çš„æœ€åè¿™å¥è¯è¯´å¾—å¤ªå¯¹äº†ï¼","like_count":4},{"had_liked":false,"id":24573,"user_name":"oyt","can_delete":false,"product_type":"c1","uid":1075038,"ip_address":"","ucode":"E1E4F27FB3535F","user_header":"https://static001.geekbang.org/account/avatar/00/10/67/5e/e0323566.jpg","comment_is_top":false,"comment_ctime":1537148091,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14422049979","product_id":100013101,"comment_content":"è¦é™åˆ¶goroutineçš„å¯ç”¨æ•°é‡ï¼Œå³è¾¾åˆ°è§„å®šé™åˆ¶æ•°é‡åå°±é˜»å¡ã€‚ å¯ä»¥ä½¿ç”¨æœ‰ç¼“å†²çš„channelï¼Œä¾‹å¦‚chanCountï¼š=make(chan int,10) å¯ä»¥é™åˆ¶å¯ç”¨10ä¸ªgoroutineã€‚","like_count":3},{"had_liked":false,"id":81785,"user_name":"æ¨åº·","can_delete":false,"product_type":"c1","uid":1179356,"ip_address":"","ucode":"B9BAE2DCE50CAC","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/dc/3c025f83.jpg","comment_is_top":false,"comment_ctime":1554034826,"is_pvip":false,"replies":[{"id":"29705","content":"éšå¼ä¼ é€’ï¼Ÿæˆ‘å¥½åƒæ²¡è¯´è¿‡è¿™ä¸ªè¯å§ã€‚æ€»ä¹‹è¿™ç§ä¼ é€’éƒ½æ˜¯å€¼ä¼ é€’ã€‚<br><br>ä½ è¯´çš„è¿™ä¸ªé—®é¢˜ä¸å€¼ä¼ é€’æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚åŸå› æ˜¯goå‡½æ•°çš„æ‰§è¡Œé¡ºåºçš„ä¸ç¡®å®šæ€§ã€‚å½“è¿™äº›goå‡½æ•°æ‰§è¡Œæ—¶ï¼Œè¿­ä»£å˜é‡içš„å€¼æ˜¯ä»€ä¹ˆï¼Œgoå‡½æ•°å°±ä¼šæ‹¿åˆ°ä»€ä¹ˆã€‚ä½ å¯ä»¥å†çœ‹çœ‹æˆ‘åœ¨æ–‡ç« ä¸­çš„è¯´æ˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1554128518,"ip_address":"","comment_id":81785,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10143969418","product_id":100013101,"comment_content":"ä½ å¥½ï¼Œè€å¸ˆï¼Œè¿™ä¸ªé‡Œé¢çš„å˜é‡i ä¼ é€’åˆ°goroutineé‡Œé¢åº”è¯¥æ˜¯å€¼ä¼ é€’ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°1,10,10,10è¿™ç§æƒ…å†µå‘¢ï¼Ÿ<br>å¦‚æœçœŸçš„æ˜¯å€¼ä¼ é€’ï¼Œæ€ä¹ˆç†è§£goè¯­è¨€ä¸­éšå¼ä¼ é€’æ˜¯å€¼ä¼ é€’è¿™å¥è¯ã€‚","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445342,"discussion_content":"éšå¼ä¼ é€’ï¼Ÿæˆ‘å¥½åƒæ²¡è¯´è¿‡è¿™ä¸ªè¯å§ã€‚æ€»ä¹‹è¿™ç§ä¼ é€’éƒ½æ˜¯å€¼ä¼ é€’ã€‚\n\nä½ è¯´çš„è¿™ä¸ªé—®é¢˜ä¸å€¼ä¼ é€’æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚åŸå› æ˜¯goå‡½æ•°çš„æ‰§è¡Œé¡ºåºçš„ä¸ç¡®å®šæ€§ã€‚å½“è¿™äº›goå‡½æ•°æ‰§è¡Œæ—¶ï¼Œè¿­ä»£å˜é‡içš„å€¼æ˜¯ä»€ä¹ˆï¼Œgoå‡½æ•°å°±ä¼šæ‹¿åˆ°ä»€ä¹ˆã€‚ä½ å¯ä»¥å†çœ‹çœ‹æˆ‘åœ¨æ–‡ç« ä¸­çš„è¯´æ˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554128518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63247,"user_name":"å¸…","can_delete":false,"product_type":"c1","uid":1207367,"ip_address":"","ucode":"DB792F56C26429","user_header":"https://static001.geekbang.org/account/avatar/00/12/6c/47/57b6c4e8.jpg","comment_is_top":false,"comment_ctime":1548311035,"is_pvip":false,"replies":[{"id":"25245","content":"ä¸ä¼šï¼Œä¸»goroutineç»“æŸäº†è¿›ç¨‹ä¹Ÿå°±ç»“æŸäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1551181118,"ip_address":"","comment_id":63247,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10138245627","product_id":100013101,"comment_content":"demo38çš„ä¾‹å­ï¼Œä¸»gorutineç»“æŸä¹‹åï¼Œå…¶ä»–å·²ç»è¢«è°ƒåº¦çš„gorutineï¼Œä¼šç»§ç»­æ‰§è¡Œå—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437518,"discussion_content":"ä¸ä¼šï¼Œä¸»goroutineç»“æŸäº†è¿›ç¨‹ä¹Ÿå°±ç»“æŸäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551181118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24812,"user_name":"Yayu","can_delete":false,"product_type":"c1","uid":1058015,"ip_address":"","ucode":"5E7842458D8229","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","comment_is_top":false,"comment_ctime":1537195734,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10127130326","product_id":100013101,"comment_content":"ä¸è®¤ä¸º buffered channel çš„å®¹é‡å¯ä»¥é™åˆ¶ goroutine çš„æ•°é‡ï¼Œè¿™ä¸ªæ•°é‡çš„æœ€ä½³å€¼åº”è¯¥è·Ÿç¡¬ä»¶é…ç½®ç›¸å…³ï¼Œä½†æ˜¯å¦‚ä½•é™åˆ¶åº”è¯¥æ˜¯ä¸€ä¸ªruntime çš„å‚æ•°æ¥é™åˆ¶ã€‚å…·ä½“æ˜¯ä»€ä¹ˆï¼Œè¿˜çœŸä¸æ¸…æ¥šã€‚","like_count":2},{"had_liked":false,"id":277747,"user_name":"mkii","can_delete":false,"product_type":"c1","uid":1674466,"ip_address":"","ucode":"534914EC7EA304","user_header":"https://static001.geekbang.org/account/avatar/00/19/8c/e2/48f4e4fa.jpg","comment_is_top":false,"comment_ctime":1612539953,"is_pvip":false,"replies":[{"id":"100846","content":"è¿™æ˜¯ç”±äºï¼šè¿™äº›goå‡½æ•°çš„æ‰§è¡Œé¡ºåºåœ¨é»˜è®¤æƒ…å†µä¸‹ç›¸å½“äºæ˜¯ä¼ªéšæœºçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1612676679,"ip_address":"","comment_id":277747,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5907507249","product_id":100013101,"comment_content":"è¯•äº†ä¸€ä¸‹è®©ä¸»goroutineé€€å‡ºå‰ç¡1ç§’ï¼Œä¼šæ‰“å°å¤šä¸ª10","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515153,"discussion_content":"è¿™æ˜¯ç”±äºï¼šè¿™äº›goå‡½æ•°çš„æ‰§è¡Œé¡ºåºåœ¨é»˜è®¤æƒ…å†µä¸‹ç›¸å½“äºæ˜¯ä¼ªéšæœºçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612676679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168236,"user_name":"æ°´å…ˆç”Ÿî”","can_delete":false,"product_type":"c1","uid":1249714,"ip_address":"","ucode":"362A71DF511E3E","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/b2/dd0606b2.jpg","comment_is_top":false,"comment_ctime":1578035911,"is_pvip":false,"replies":[{"id":"65373","content":"è¿™é‡Œçš„ä¸¤ä¸ªprintæ˜¯åšå¯¹æ¯”ç”¨çš„å§ã€‚0ï½9é¡ºåºæ‰“å°åº”è¯¥æ˜¯ç¬¬ä¸€ä¸ªprintæ‰“å°å‡ºæ¥çš„ã€‚ä½ å¯ä»¥æŠŠä¸¤ä¸ªprintæ‰“å°çš„ä¸œè¥¿åˆ†åˆ«åŠ ä¸Šä¸åŒçš„å‰ç¼€ã€‚è¿™æ ·å°±å®¹æ˜“åŒºåˆ†äº†ã€‚<br><br>goå‡½æ•°çš„æ‰§è¡Œä¼šç¨å¾®æ»åä¸€äº›ï¼Œæ‰€ä»¥å½“ for è¯­å¥æ‰§è¡Œå®Œçš„æ—¶å€™ï¼ˆè¿­ä»£å˜é‡ i ä¼šå®šæ ¼åœ¨ 10 è¿™ä¸ªå€¼ä¸Šï¼‰ï¼Œæœ‰çš„goå‡½æ•°å¯èƒ½è¿˜æ²¡å¼€å§‹æ‰§è¡Œã€‚ç­‰åˆ°å®ƒä»¬æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰“å°å˜é‡ iï¼Œå°±åªä¼šæ‰“å°å‡º 10ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1578121282,"ip_address":"","comment_id":168236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873003207","product_id":100013101,"comment_content":"func main() {<br>\tfor i := 0; i &lt; 10; i++ {<br>\t\tfmt.Println(i) &#47;&#47; the first Print<br>\t\tgo func() {<br>\t\t\tfmt.Println(i)\t&#47;&#47; the second Print<br>\t\t}()<br>\t}<br>}<br>-------<br>ç¬¬ä¸€ä¸ªprintç®—æ˜¯ä¸ºgoå‡½æ•°äº‰å–äº†æ‰§è¡Œæ—¶é—´å—ï¼Ÿå¾—åˆ°çš„ç»“æœæ˜¯0è‡³9é¡ºåºï¼Œç„¶å3ï¼Œ6ï¼Œ10ï¼Œ10ï¼Œ10ã€‚<br>æŒ‰ç†ï¼Œå¾ªç¯åˆ°10ï¼Œgoå‡½æ•°ä¸æ˜¯åº”è¯¥ç»“æŸäº†ä¹ˆï¼Ÿä¸ºå•¥è¿˜ä¼šå¤šä¸¤ä¸ª10çš„å‘€ï¼Ÿ<br>éº»çƒ¦è€å¸ˆ~","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480169,"discussion_content":"è¿™é‡Œçš„ä¸¤ä¸ªprintæ˜¯åšå¯¹æ¯”ç”¨çš„å§ã€‚0ï½9é¡ºåºæ‰“å°åº”è¯¥æ˜¯ç¬¬ä¸€ä¸ªprintæ‰“å°å‡ºæ¥çš„ã€‚ä½ å¯ä»¥æŠŠä¸¤ä¸ªprintæ‰“å°çš„ä¸œè¥¿åˆ†åˆ«åŠ ä¸Šä¸åŒçš„å‰ç¼€ã€‚è¿™æ ·å°±å®¹æ˜“åŒºåˆ†äº†ã€‚\n\ngoå‡½æ•°çš„æ‰§è¡Œä¼šç¨å¾®æ»åä¸€äº›ï¼Œæ‰€ä»¥å½“ for è¯­å¥æ‰§è¡Œå®Œçš„æ—¶å€™ï¼ˆè¿­ä»£å˜é‡ i ä¼šå®šæ ¼åœ¨ 10 è¿™ä¸ªå€¼ä¸Šï¼‰ï¼Œæœ‰çš„goå‡½æ•°å¯èƒ½è¿˜æ²¡å¼€å§‹æ‰§è¡Œã€‚ç­‰åˆ°å®ƒä»¬æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰“å°å˜é‡ iï¼Œå°±åªä¼šæ‰“å°å‡º 10ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578121282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165252,"user_name":"lixiaofeng","can_delete":false,"product_type":"c1","uid":1100200,"ip_address":"","ucode":"0D6710D95B6FFB","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/a8/98507423.jpg","comment_is_top":false,"comment_ctime":1577188852,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5872156148","product_id":100013101,"comment_content":"goroutine ä»£è¡¨ç€å¹¶å‘æ¨¡å‹ä¸­çš„ç”¨æˆ·çº§çº¿ç¨‹ã€‚<br>ä¸€ä¸ªè¿›ç¨‹å°±æ˜¯æŸä¸ªç¨‹åºè¿è¡Œæ—¶çš„äº§ç‰©ã€‚<br>çº¿ç¨‹æ€»æ˜¯åœ¨è¿›ç¨‹ä¹‹å†…ï¼Œå®ƒå¯ä»¥è¢«è§†ä¸ºè¿›ç¨‹ä¸­è¿è¡Œç€çš„æ§åˆ¶æµã€‚<br>æ¯ä¸ªè¿›ç¨‹çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹éƒ½ä¼šéšç€è¯¥è¿›ç¨‹çš„å¯åŠ¨è€Œåˆ›å»ºï¼Œä»–ä»¬å¯ä»¥è¢«ç§°ä¸ºæ‰€å±è¿›ç¨‹çš„ä¸»çº¿ç¨‹ã€‚<br>ä¸»çº¿ç¨‹ä¹‹å¤–çš„å…¶ä»–çº¿ç¨‹éƒ½ç”±ä»£ç æ˜¾ç¤ºçš„åˆ›å»ºå’Œé”€æ¯ã€‚<br>Goè¯­è¨€è¿è¡Œæ—¶ï¼ˆruntimeï¼‰ç³»ç»Ÿä¼šå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºå’Œé”€æ¯ç³»ç»Ÿçº§çº¿ç¨‹ã€‚<br>Go è¯­è¨€ä¸ä½†æœ‰ç‹¬ç‰¹çš„å¹¶å‘ç¼–ç¨‹æ¨¡å‹ï¼Œä»¥åŠç”¨æˆ·çº§çº¿ç¨‹goroutine ï¼Œè¿˜æ‹¥æœ‰å¼ºå¤§çš„goroutine ã€‚<br>è°ƒåº¦å™¨æ˜¯Go è¯­è¨€è¿è¡Œæ—¶ï¼ˆruntimeï¼‰çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒä¸»è¦è´Ÿè´£ç»Ÿç­¹è°ƒé…go å¹¶å‘ç¼–ç¨‹æ¨¡å‹ä¸­çš„ä¸‰ä¸ªä¸»è¦å…ƒç´ ï¼š<br>Goroutine<br>processorï¼Œ<br>mechineï¼Œç³»ç»Ÿçº§çº¿ç¨‹<br>Gå’ŒM ä¹‹é—´ï¼Œç”±äºPçš„å­˜åœ¨å‘ˆç°å‡ºï¼Œå¤šå¯¹å¤šçš„å…³ç³»<br>å½“ä¸€ä¸ªGç”±äºæŸäº›åŸå› æš‚åœæ—¶ï¼ŒP ä¼šåŠæ—¶å‘ç°ï¼Œå¹¶æŠŠç›¸åº”çš„M åˆ†å¼€ï¼Œç»™å…¶ä»–çš„G ä½¿ç”¨ã€‚","like_count":1},{"had_liked":false,"id":105083,"user_name":"jacke","can_delete":false,"product_type":"c1","uid":1161209,"ip_address":"","ucode":"05F355E1FF88C5","user_header":"https://static001.geekbang.org/account/avatar/00/11/b7/f9/a8f26b10.jpg","comment_is_top":false,"comment_ctime":1560913278,"is_pvip":false,"replies":[{"id":"38167","content":"å¯ä»¥ä»ä¸¤ä¸ªæ–¹é¢ç†è§£ï¼š<br><br>1. è¿™äº› go å‡½æ•°çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸å›ºå®šçš„ã€‚è¿™ä¸ªæƒ³å¿…ä½ å·²ç»ç†è§£äº†ã€‚<br>2. å½“ä¸€ä¸ª fmt.Println å¼•å‘ I&#47;O æ“ä½œçš„æ—¶å€™ä¹Ÿå¯èƒ½è¢«ä¸­æ–­ï¼ˆè¢«åˆ‡æ¢ä¸‹ CPUï¼‰ã€‚å½“å®ƒå†æ¬¡è·å¾—è¿è¡Œæœºä¼šçš„æ—¶å€™ï¼Œä¹Ÿè®¸å…¶ä»–çš„ fmt.Println éƒ½æ‰“å°å®Œäº†ã€‚è¿™ç§åˆ‡æ¢å…¶å®å°±æ˜¯ Go è¿è¡Œæ—¶ç³»ç»Ÿè¿›è¡Œè°ƒåº¦çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1561003644,"ip_address":"","comment_id":105083,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5855880574","product_id":100013101,"comment_content":"é—®ä¸‹ï¼š<br>func main() {<br>\tfmt.Println(&quot;cup &quot;,runtime.NumCPU())<br>\tfor i := 0; i &lt; 10; i++ {<br>\t\tgo func() {<br>\t\t\tfmt.Println(i, &amp;i)<br>\t\t}()<br>\t}<br>\ttime.Sleep(time.Second)<br>}<br>ç»“æœï¼š<br>cup  4<br>10 0xc420016088<br>10 0xc420016088<br>10 0xc420016088<br>10 0xc420016088<br>10 0xc420016088<br>10 0xc420016088<br>10 0xc420016088<br>4 0xc420016088<br>10 0xc420016088<br>10 0xc420016088<br> <br>ç–‘é—®ï¼šgo routineçš„è°ƒåº¦æ˜¯éšæœºï¼ŒæŒ‰ç…§éƒè€å¸ˆçš„è®²è§£ï¼Œåœ¨go routineå¾—åˆ°æ‰§è¡Œçš„æ—¶å€™ fmt.Printlnï¼Œå‰é¢çš„iä»¥åŠæ˜¯10äº†ï¼Œä¸ºä»€ä¹ˆåé¢è¿˜æœ‰æ‰“å°æ˜¯4çš„æƒ…å†µ,è€Œä¸”çœ‹å‡ºæ¥iåœ°å€ä¸€æ ·ï¼Œåº”è¯¥æ˜¯åŒä¸€ä¸ªå€¼ï¼Ÿæ˜¯ä¸æ˜¯go routineæ‰§è¡Œæ˜¯å¹¶è¡Œçš„åŸå› ï¼Œæ‰€ä»¥æ‰“å°åˆ°å±å¹•æ˜¾ç¤ºç¼“å†²åŒºï¼Œæœ€åæ˜¯ä¹±åºï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454554,"discussion_content":"å¯ä»¥ä»ä¸¤ä¸ªæ–¹é¢ç†è§£ï¼š\n\n1. è¿™äº› go å‡½æ•°çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸å›ºå®šçš„ã€‚è¿™ä¸ªæƒ³å¿…ä½ å·²ç»ç†è§£äº†ã€‚\n2. å½“ä¸€ä¸ª fmt.Println å¼•å‘ I/O æ“ä½œçš„æ—¶å€™ä¹Ÿå¯èƒ½è¢«ä¸­æ–­ï¼ˆè¢«åˆ‡æ¢ä¸‹ CPUï¼‰ã€‚å½“å®ƒå†æ¬¡è·å¾—è¿è¡Œæœºä¼šçš„æ—¶å€™ï¼Œä¹Ÿè®¸å…¶ä»–çš„ fmt.Println éƒ½æ‰“å°å®Œäº†ã€‚è¿™ç§åˆ‡æ¢å…¶å®å°±æ˜¯ Go è¿è¡Œæ—¶ç³»ç»Ÿè¿›è¡Œè°ƒåº¦çš„ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561003644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253063,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/rUPjvMdUGic56wNdVm0be85REaB7nLwyEC7HiamhmeWsQichtADA3IsFubIqOXMjlsEtmicdpDRC2YhNWVrpPKj1lw/132","nickname":"å§œå­ç‰™","note":"","ucode":"1830E2FA33308B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3159,"discussion_content":"è¿™ç±»é˜Ÿåˆ—ä¸­çš„ G æ€»æ˜¯ä¼šæŒ‰ç…§å…ˆå…¥å…ˆå‡ºçš„é¡ºåºï¼Œå¾ˆå¿«åœ°ç”±è¿è¡Œæ—¶ç³»...\n\næå®¢æ—¶é—´ç‰ˆæƒæ‰€æœ‰: https://time.geekbang.org/column/article/39841 å¦‚æœæŒ‰è¿™å¥æ¥ç†è§£ï¼Œæ‰“å°4çš„ä¸æ˜¯è‚¯å®šåœ¨æ‰“å°10 çš„ä¹‹å‰å—ï¼Ÿä¸ºå•¥é¡ºåºåˆæ˜¯ä¸å›ºå®šçš„äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564234046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24682,"user_name":"æ±Ÿå±±å¦‚ç”»","can_delete":false,"product_type":"c1","uid":1188280,"ip_address":"","ucode":"BEB6228E6135B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/b8/aca814dd.jpg","comment_is_top":false,"comment_ctime":1537184383,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5832151679","product_id":100013101,"comment_content":"å¦‚æœå…è®¸å¼€å¯çš„æœ€å¤§åç¨‹æ•°æ˜¯ maxRoutineNumber ï¼Œ å¯ä»¥ç”¨ å®¹é‡ä¸ºmaxRoutineNumberçš„ç©ºç»“æ„ä½“ç±»å‹çš„ç¼“å†²é€šé“ æ§åˆ¶å…è®¸å¯ç”¨çš„æœ€å¤§åç¨‹æ•°ç›®ã€‚<br><br>å®éªŒä»£ç å¦‚ä¸‹ï¼š<br><br>func handle(i int, ch chan struct{}) {<br>\t_ = i<br>\t&lt;-ch<br>}<br><br>func main() {<br>\tvar maxRoutineNumber int = 10 &#47;&#47;æœ€å¤§å…è®¸å¼€å¯çš„åç¨‹æ•°ç›®<br>\tch := make(chan struct{}, maxRoutineNumber)<br><br>\tvar total int = 1000000 &#47;&#47;æ€»çš„å¤„ç†æ•°ç›®<br><br>\tfor i := 0; i &lt; total; i++ {<br>\t\tch &lt;- struct{}{}<br>\t\tgo handle(i, ch)<br>\t}<br><br>}<br>","like_count":1},{"had_liked":false,"id":24586,"user_name":"å¼€å¼€å¿ƒå¿ƒ","can_delete":false,"product_type":"c1","uid":1203132,"ip_address":"","ucode":"42AB03AA49628E","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/bc/c3bcd529.jpg","comment_is_top":false,"comment_ctime":1537156139,"is_pvip":false,"replies":[{"id":"9374","content":"ä¸åº”è¯¥ï¼Œæˆ‘è¿™é‡Œä¹Ÿæ­£å¸¸ï¼Œä¸çŸ¥é“ä½ è¿˜æ”¹äº†ä»€ä¹ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1537443506,"ip_address":"","comment_id":24586,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5832123435","product_id":100013101,"comment_content":"è¿™æ ·å­ä¸ºä»€ä¹ˆä¼šé€ æˆé˜»å¡ï¼Ÿæˆ‘å°±åŠ äº†\ttime.Sleep(1*time.Microsecond)ï¼Œè€Œä¸”æ—¶é—´å¾ˆçŸ­<br>for i := uint32(0); i &lt; 10; i++ {<br>\t\tgo func(i uint32) {<br>\t\t\tfn := func() {<br>\t\t\t\ttime.Sleep(1*time.Microsecond)<br>\t\t\t\tfmt.Println(i)<br>\t\t\t}<br>\t\t\t&#47;&#47;fmt.Println(&quot;å‡†å¤‡&quot;,i)<br>\t\t\ttrigger(i, fn)<br>\t\t}(i)<br>\t}","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424045,"discussion_content":"ä¸åº”è¯¥ï¼Œæˆ‘è¿™é‡Œä¹Ÿæ­£å¸¸ï¼Œä¸çŸ¥é“ä½ è¿˜æ”¹äº†ä»€ä¹ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537443506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352274,"user_name":"æ™´å¤©äº†","can_delete":false,"product_type":"c1","uid":1359669,"ip_address":"","ucode":"5310E02F8DF1F0","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/35/0e3a92a7.jpg","comment_is_top":false,"comment_ctime":1658491967,"is_pvip":false,"replies":[{"id":"128217","content":"ä½ æ˜¯å¯¹å“ªæ®µä»£ç è¿˜æ˜¯å“ªå¥è¯æœ‰ç–‘é—®ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1658751455,"ip_address":"","comment_id":352274,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658491967","product_id":100013101,"comment_content":"é—®ä¸‹è€å¸ˆ ä¸ºä»€ä¹ˆåç¨‹ goè¯­å¥mainè¢«ç­‰å¾…äº†","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581393,"discussion_content":"ä½ æ˜¯å¯¹å“ªæ®µä»£ç è¿˜æ˜¯å“ªå¥è¯æœ‰ç–‘é—®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658751455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336995,"user_name":"ææ³°æ±›","can_delete":false,"product_type":"c1","uid":1880234,"ip_address":"","ucode":"379E06A90A30D9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZxgDrR65vd6wo2ibFQM3r0IdqlY0sG0ZOJAnMuhjVfJmib4ib3dbNlnz0MH4YmjV9ajQ6IXXiaVYRlg/132","comment_is_top":false,"comment_ctime":1646541350,"is_pvip":false,"replies":[{"id":"123140","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1646559682,"ip_address":"","comment_id":336995,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1646541350","product_id":100013101,"comment_content":"æ€è€ƒé¢˜ï¼šæˆ‘è§‰å¾—æ˜¯æœ‰å­˜åœ¨çš„æ„ä¹‰çš„ï¼Œå› ä¸ºæŒ‡é’ˆå¯ä»¥é‡æ–°èµ‹å€¼è€ŒæŒ‡å‘å…¶ä»–çš„å˜é‡ï¼Œè€Œå¼•ç”¨å´ä¸èƒ½ï¼Œå¼•ç”¨å°è£…äº†åº•å±‚æ•°æ®çš„è£¸æŒ‡é’ˆï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æ·»åŠ äº†å…¶ä»–ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚sliceçš„lenå’Œcapã€‚","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554701,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646559682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1880234,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZxgDrR65vd6wo2ibFQM3r0IdqlY0sG0ZOJAnMuhjVfJmib4ib3dbNlnz0MH4YmjV9ajQ6IXXiaVYRlg/132","nickname":"ææ³°æ±›","note":"","ucode":"379E06A90A30D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":554799,"discussion_content":"è¯„è®ºæ€ä¹ˆè·‘åˆ°ä¸‹ä¸€ç« äº†å“ˆå“ˆï¼Œè°¢è°¢è€å¸ˆå›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646620741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":554701,"ip_address":""},"score":554799,"extra":""}]}]},{"had_liked":false,"id":336162,"user_name":"Geek_108cb5","can_delete":false,"product_type":"c1","uid":2355516,"ip_address":"","ucode":"47959B1E8926A5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/KhQRc8hIxHHyPV3Og2Fc5qhN3zkWUnw31wkc7mcmGyxicD9Yrvhh7N5B3icqpgWZXfuWbysn7Lv6QMPIEmYPeC4w/132","comment_is_top":false,"comment_ctime":1645962973,"is_pvip":false,"replies":[{"id":"122884","content":"æ²¡é”™ï¼Œæ˜¯è¿™æ ·ï¼Œæ‰€ä»¥è‹¥è¦æƒ³ç»“æœå¯é¢„æµ‹ï¼Œå°±éœ€è¦ä½¿ç”¨ä¸“ç”¨å·¥å…·æ¥åè°ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1646027893,"ip_address":"","comment_id":336162,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1645962973","product_id":100013101,"comment_content":"å…¶å®ä¹Ÿå¯èƒ½ä¸æ˜¯æ‰“å°10ä¸ª10çš„ï¼Œ ä¹Ÿæœ‰å¯èƒ½ä¸­é—´æŸä¸ªåç¨‹åˆšå¥½å°±æ˜¯æ‰§è¡Œäº†ï¼Œ æ‰€ä»¥å…¶å®ç»“æœæ˜¯ä¸å¯é¢„æµ‹çš„","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553683,"discussion_content":"æ²¡é”™ï¼Œæ˜¯è¿™æ ·ï¼Œæ‰€ä»¥è‹¥è¦æƒ³ç»“æœå¯é¢„æµ‹ï¼Œå°±éœ€è¦ä½¿ç”¨ä¸“ç”¨å·¥å…·æ¥åè°ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646027894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332862,"user_name":"Zå®‡é”¤é”¤","can_delete":false,"product_type":"c1","uid":2188142,"ip_address":"","ucode":"7DB36E986A7A51","user_header":"https://static001.geekbang.org/account/avatar/00/21/63/6e/6b971571.jpg","comment_is_top":false,"comment_ctime":1643765640,"is_pvip":true,"replies":[{"id":"121713","content":"è‡ªä»çº¿ç¨‹æŠ€æœ¯æ­£å¼åœ¨CPUä¸­å‡ºç°ä»¥æ¥ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹çš„ï¼Œä¸æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹æ— å…³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1644042934,"ip_address":"","comment_id":332862,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1643765640","product_id":100013101,"comment_content":"è¿™ç« èŠ‚ä¸»è¦é˜è¿°æˆ–è€…è¯´æƒ³è¡¨è¾¾çš„è¿˜æ˜¯å¯¹goè¯­è¨€ï¼Œå°±åªæœ‰ä¸€ä¸ªä¸»ç¨‹åœ¨è¿è¡Œï¼Œä¸»ç¨‹ç»“æŸäº†ä»¥åï¼Œå…¶ä»–ç›¸å…³çš„çº¿ç¨‹å°±å…³é—­çš„äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549511,"discussion_content":"è‡ªä»çº¿ç¨‹æŠ€æœ¯æ­£å¼åœ¨CPUä¸­å‡ºç°ä»¥æ¥ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹çš„ï¼Œä¸æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹æ— å…³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644042935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327938,"user_name":"jxs1211","can_delete":false,"product_type":"c1","uid":1101006,"ip_address":"","ucode":"B7F1F2D84389E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","comment_is_top":false,"comment_ctime":1640404232,"is_pvip":false,"replies":[{"id":"119433","content":"æˆ‘ä¸çŸ¥é“ä½ è¿™å¥è¯å“ªå„¿æ¥çš„ï¼Œçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œé‡è¦çš„äº‹æƒ…æˆ‘å†è·Ÿä½ è¯´ä¸‰éï¼ï¼ˆæˆ‘è®°å¾—è·Ÿä½ è¯´è¿‡ä¸æ­¢ä¸¤æ¬¡äº†ï¼‰ç»™ä½ ç½‘å€ï¼šhttps:&#47;&#47;pkg.go.dev&#47;runtime#GOMAXPROCS","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1640490907,"ip_address":"","comment_id":327938,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640404232","product_id":100013101,"comment_content":"The GOMAXPROCS variable limits the number of operating system threads that can execute user-level Go code simultaneously. <br>æ ¹æ®goæ–‡æ¡£çš„æè¿°GOMAXPROCSæ˜¯ç”¨æ¥æ§åˆ¶ç³»ç»Ÿçº§çº¿ç¨‹çš„æ•°é‡ï¼Œé‚£ä¸å°±æ˜¯å›¾ä¸­Må—ï¼Œä½†æ˜¯åˆæœ‰è¯´æ³•æ˜¯æŒ‡çš„Pçš„æ•°é‡ï¼Œè¿™ä¸ªGOMAXPROCSåˆ°åº•æŒ‡çš„åº”è¯¥è°å‘¢ã€‚","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541628,"discussion_content":"æˆ‘ä¸çŸ¥é“ä½ è¿™å¥è¯å“ªå„¿æ¥çš„ï¼Œçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œé‡è¦çš„äº‹æƒ…æˆ‘å†è·Ÿä½ è¯´ä¸‰éï¼ï¼ˆæˆ‘è®°å¾—è·Ÿä½ è¯´è¿‡ä¸æ­¢ä¸¤æ¬¡äº†ï¼‰ç»™ä½ ç½‘å€ï¼šhttps://pkg.go.dev/runtime#GOMAXPROCS","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640490908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327853,"user_name":"jxs1211","can_delete":false,"product_type":"c1","uid":1101006,"ip_address":"","ucode":"B7F1F2D84389E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","comment_is_top":false,"comment_ctime":1640328760,"is_pvip":false,"replies":[{"id":"119436","content":"ä½ éœ€è¦å¥½å¥½çœ‹ä¸€ä¸‹GPMæ¨¡å‹ï¼ŒGæ˜¯å¯ä»¥è¢«çµæ´»è°ƒåº¦çš„ï¼Œé™¤éç‰¹æ®Šæƒ…å†µï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•Mä¸Šè¿è¡Œï¼ˆMä»£è¡¨ç³»ç»Ÿçº¿ç¨‹ï¼‰ã€‚ è€Œä¸”På¹¶ä¸ä»£è¡¨goç¨‹åºï¼Œä¸€ä¸ªPç›¸å½“äºä¸€ä¸ªè¾“é€Gçš„è½¨é“ï¼Œæˆ‘ä»¬è®¾ç½®GOMAXPROCSçš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨è®¾ç½®è¿™ä¸ªè½¨é“çš„æ•°é‡ï¼Œè®¾ç½®å¯ä»¥æœ‰å¤šå°‘ä¸ªè½¨é“åŒæ—¶å‘CPUè¾“é€Gï¼Œæ‰€ä»¥æœ€å¥½è®¾ç½®æˆä¸CPUé€»è¾‘æ ¸å¿ƒæ•°é‡ç›¸åŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1026643","ctime":1640491125,"ip_address":"","comment_id":327853,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640328760","product_id":100013101,"comment_content":"çœ‹äº†è¿™é‡Œè§£é‡Šçš„Pï¼Œç»“åˆeffective-goä¸­ç›¸å…³æè¿°:<br>The current implementation of the Go runtime will not parallelize this code by default. It<br>dedicates only a single core to user-level processing. An arbitrary number of goroutines can be<br>blocked in system calls, but by default only one can be executing user-level code at any time. It<br>should be smarter and one day it will be smarter, but until it is if you want CPU parallelism you<br>must tell the run-time how many goroutines you want executing code simultaneously. There are<br>two related ways to do this. Either run your job with environment variable GOMAXPROCS set to<br>the number of cores to use or import the runtime package and call runtime.GOMAXPROCS(NCPU).<br>A helpful value might be runtime.NumCPU(), which reports the number of logical CPUs on the<br>local machine. Again, this requirement is expected to be retired as the scheduling and run-time<br>improve.<br><br>è¿™æ®µæ–‡å­—åº”è¯¥æ˜¯é’ˆå¯¹cpuè®¡ç®—å‹ä»»åŠ¡è€Œè¨€ï¼Œ<br>Pæ˜¯å¦å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªgoç¨‹åºï¼Œé€šè¿‡GOMAXPROCSæ§åˆ¶å†…éƒ¨æœ‰å¤šå°‘ä¸ªPåŒæ—¶åœ¨ä¸åŒCPUä¸Šè¿è¡Œå„è‡ªçš„goroutineï¼Œå¦‚æœå€¼ä¸º1ï¼Œé‚£ä¹ˆç”¨æˆ·æ€çš„goroutineå§‹ç»ˆç”¨ä¸€ä¸ªcpuè¿ç®—","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541631,"discussion_content":"ä½ éœ€è¦å¥½å¥½çœ‹ä¸€ä¸‹GPMæ¨¡å‹ï¼ŒGæ˜¯å¯ä»¥è¢«çµæ´»è°ƒåº¦çš„ï¼Œé™¤éç‰¹æ®Šæƒ…å†µï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•Mä¸Šè¿è¡Œï¼ˆMä»£è¡¨ç³»ç»Ÿçº¿ç¨‹ï¼‰ã€‚ è€Œä¸”På¹¶ä¸ä»£è¡¨goç¨‹åºï¼Œä¸€ä¸ªPç›¸å½“äºä¸€ä¸ªè¾“é€Gçš„è½¨é“ï¼Œæˆ‘ä»¬è®¾ç½®GOMAXPROCSçš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨è®¾ç½®è¿™ä¸ªè½¨é“çš„æ•°é‡ï¼Œè®¾ç½®å¯ä»¥æœ‰å¤šå°‘ä¸ªè½¨é“åŒæ—¶å‘CPUè¾“é€Gï¼Œæ‰€ä»¥æœ€å¥½è®¾ç½®æˆä¸CPUé€»è¾‘æ ¸å¿ƒæ•°é‡ç›¸åŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640491125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327226,"user_name":"ian","can_delete":false,"product_type":"c1","uid":1330724,"ip_address":"","ucode":"83C411A9BA8D0C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoIbczdrKInh6f4Mh1HVt6umicibxHQmSccrytwf8Ev0nfLRLYmHHibia6s4a9BSsR8SI0ib4VAav9ibLOg/132","comment_is_top":false,"comment_ctime":1639990918,"is_pvip":false,"replies":[{"id":"119122","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1640066441,"ip_address":"","comment_id":327226,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639990918","product_id":100013101,"comment_content":"åˆ›å»ºgoroutineï¼Œå¯ä»¥ç†è§£æˆçº¿ç¨‹çš„åˆ›å»ºï¼Œä¹Ÿç®—ä¸€ç§å¼‚æ­¥æ“ä½œï¼›<br>goäº‹ä»¶è§¦å‘åï¼Œç«‹é©¬ä¼šæ‰§è¡Œä¹‹åçš„ä»£ç ï¼Œæ–‡ä¸­çš„forå¾ªç¯ï¼Œæ–°è¿è¡Œäº†10ä¸ªgï¼Œéƒ½æ˜¯å¼‚æ­¥å‘ç”Ÿï¼Œä¸åšäººä¸ºå¹²é¢„ï¼Œæ‰€ä»¥å…·ä½“è°ƒåº¦åˆ°çš„æ—¶é—´ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ï¼›<br>è€Œåªæœ‰goå‡½æ•°è°ƒåº¦åˆ°çš„æ—¶å€™ï¼Œæ‰ä¼šçœŸæ­£ä½¿ç”¨åˆ° i çš„å€¼ï¼Œç”±äºgoroutineçš„æ»åæ€§ï¼Œå¯¼è‡´è¿™ä¸ªæ—¶å€™ i å¯èƒ½å·²ç»æ˜¯æœ€åçš„10äº†","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540480,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640066441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323943,"user_name":"jxs1211","can_delete":false,"product_type":"c1","uid":1101006,"ip_address":"","ucode":"B7F1F2D84389E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","comment_is_top":false,"comment_ctime":1638235845,"is_pvip":false,"replies":[{"id":"117597","content":"è¿™ä¸ªè°ƒåº¦çš„æ—¶æœºè¿˜å¯ä»¥æ˜¯æ‰§è¡Œè¯­å¥çš„å‰åï¼Œä¸ä»…ä»…æ˜¯é˜»å¡å‘ç”Ÿçš„æ—¶å€™ã€‚å¦‚æœä½ å¯¹è¿™æ–¹é¢å¾ˆæ„Ÿå…´è¶£ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ çœ‹æˆ‘å†™çš„é‚£æœ¬ä¹¦ã€‚è™½ç„¶æ˜¯å‰äº›å¹´å†™çš„ï¼Œä½†ç°åœ¨ä¹Ÿä¸è¿‡æ—¶ï¼Œè€Œä¸”é‡Œé¢ä»‹ç»çš„éå¸¸è¯¦ç»†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1638271006,"ip_address":"","comment_id":323943,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638235845","product_id":100013101,"comment_content":"<br>ç”±äºä¸» goroutine ä¼šä¸æˆ‘ä»¬æ‰‹åŠ¨å¯ç”¨çš„å…¶ä»– goroutine ä¸€èµ·æ¥å—è°ƒåº¦ï¼Œåˆå› ä¸ºè°ƒåº¦å™¨å¾ˆå¯èƒ½ä¼šåœ¨ goroutine ä¸­çš„ä»£ç åªæ‰§è¡Œäº†ä¸€éƒ¨åˆ†çš„æ—¶å€™æš‚åœï¼Œä»¥æœŸæ‰€æœ‰çš„ goroutine æœ‰æ›´å…¬å¹³çš„è¿è¡Œæœºä¼šã€‚<br>æš‚åœçš„æ—¶æœºå’Œæ¡ä»¶æ˜¯ä»€ä¹ˆï¼š æ˜¯å¦æ˜¯goå‡½æ•°ä¸­æ‰§è¡Œç­‰å¾…è€Œå¼•èµ·é˜»å¡æ—¶è§¦å‘ï¼Œè¿˜æœ‰å…¶ä»–æƒ…å†µå¯èƒ½å¼•èµ·æš‚åœå—<br>","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534756,"discussion_content":"è¿™ä¸ªè°ƒåº¦çš„æ—¶æœºè¿˜å¯ä»¥æ˜¯æ‰§è¡Œè¯­å¥çš„å‰åï¼Œä¸ä»…ä»…æ˜¯é˜»å¡å‘ç”Ÿçš„æ—¶å€™ã€‚å¦‚æœä½ å¯¹è¿™æ–¹é¢å¾ˆæ„Ÿå…´è¶£ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ çœ‹æˆ‘å†™çš„é‚£æœ¬ä¹¦ã€‚è™½ç„¶æ˜¯å‰äº›å¹´å†™çš„ï¼Œä½†ç°åœ¨ä¹Ÿä¸è¿‡æ—¶ï¼Œè€Œä¸”é‡Œé¢ä»‹ç»çš„éå¸¸è¯¦ç»†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638271006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323942,"user_name":"jxs1211","can_delete":false,"product_type":"c1","uid":1101006,"ip_address":"","ucode":"B7F1F2D84389E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","comment_is_top":false,"comment_ctime":1638235841,"is_pvip":false,"replies":[{"id":"117596","content":"æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªé˜Ÿåˆ—å•Šï¼Œâ€œç©ºé—²Gé˜Ÿåˆ—â€å’Œâ€œå¯è¿è¡ŒGé˜Ÿåˆ—â€ã€‚å¦‚æœæƒ³è¯¦ç»†äº†è§£ï¼Œå¯ä»¥ä¹°æˆ‘ä¹‹å‰å†™çš„é‚£æœ¬ã€ŠGoå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹æ¥çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1638270794,"ip_address":"","comment_id":323942,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638235841","product_id":100013101,"comment_content":"<br>å½“ç¨‹åºæ‰§è¡Œåˆ°ä¸€æ¡goè¯­å¥çš„æ—¶å€™ï¼ŒGo è¯­è¨€çš„è¿è¡Œæ—¶ç³»ç»Ÿï¼Œä¼šå…ˆè¯•å›¾ä»æŸä¸ªå­˜æ”¾ç©ºé—²çš„ G çš„é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ª Gï¼ˆä¹Ÿå°±æ˜¯ goroutineï¼‰<br>...<br>ç„¶åå†æŠŠè¿™ä¸ª G è¿½åŠ åˆ°æŸä¸ªå­˜æ”¾å¯è¿è¡Œçš„ G çš„é˜Ÿåˆ—ä¸­ã€‚<br>æ–‡ä¸­æåˆ°çš„è¿™ä¸¤ä¸ªé˜Ÿåˆ—æ˜¯å¦æ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—ï¼š","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534754,"discussion_content":"æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªé˜Ÿåˆ—å•Šï¼Œâ€œç©ºé—²Gé˜Ÿåˆ—â€å’Œâ€œå¯è¿è¡ŒGé˜Ÿåˆ—â€ã€‚å¦‚æœæƒ³è¯¦ç»†äº†è§£ï¼Œå¯ä»¥ä¹°æˆ‘ä¹‹å‰å†™çš„é‚£æœ¬ã€ŠGoå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹æ¥çœ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638270794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284243,"user_name":"çˆ±çœ‹ä¹¦çš„å°å¥³ç¥","can_delete":false,"product_type":"c1","uid":1347664,"ip_address":"","ucode":"5E21F5A1161054","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZZZzKAbLpj2qZwic2brxJ9laAcFFkjN0k8qib0UuXCwFuL472KCcDic1VeTpQ1oUxSu1TK9pPyiaRIQ/132","comment_is_top":false,"comment_ctime":1616135380,"is_pvip":false,"replies":[{"id":"103185","content":"è¿™æ—¶ä¼šè®© M å’Œ G åˆ†å¼€ï¼Œç„¶åè®©ç©ºé—²çš„ M å»è¿è¡Œå…¶ä»–çš„å¯è¿è¡Œ Gï¼›å½“ M å¼€å§‹è¿è¡ŒæŸä¸ª G ä¹‹å‰ï¼Œè¿™ä¸ª G å°±å·²ç»è¢«ç§»å‡ºç›¸åº” P çš„å¯è¿è¡Œé˜Ÿåˆ—äº†ï¼›å¦å¤–ï¼ŒM ä¸ P ä¹‹é—´æ²¡æœ‰å¿…ç„¶è”ç³»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1616303418,"ip_address":"","comment_id":284243,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1616135380","product_id":100013101,"comment_content":"è¯·é—®ï¼Œå½“Mè¿è¡Œçš„G ç³»ç»Ÿçº§è°ƒç”¨å‘ç”Ÿé˜»å¡æ—¶ï¼Œé‚£ä¹ˆPæ˜¯è®©Mä¸Gåˆ†å¼€ï¼Œè¿˜æ˜¯æŠŠMå’ŒGä¸Påˆ†å¼€ï¼Œç„¶åå»ç”¨ç©ºé—²çš„M(æ²¡æœ‰ç©ºé—²å†å»åˆ›å»ºM)å»è¿è¡Œä¸‹ä¸€ä¸ªG?","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517282,"discussion_content":"è¿™æ—¶ä¼šè®© M å’Œ G åˆ†å¼€ï¼Œç„¶åè®©ç©ºé—²çš„ M å»è¿è¡Œå…¶ä»–çš„å¯è¿è¡Œ Gï¼›å½“ M å¼€å§‹è¿è¡ŒæŸä¸ª G ä¹‹å‰ï¼Œè¿™ä¸ª G å°±å·²ç»è¢«ç§»å‡ºç›¸åº” P çš„å¯è¿è¡Œé˜Ÿåˆ—äº†ï¼›å¦å¤–ï¼ŒM ä¸ P ä¹‹é—´æ²¡æœ‰å¿…ç„¶è”ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616303418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361322,"discussion_content":"è€å¸ˆå›ç­”é”™äº†å§ï¼Ÿé¢˜ä¸»é—®çš„æ˜¯Må’ŒGåœ¨ç³»ç»Ÿè°ƒç”¨æ—¶å‘ç”Ÿé˜»å¡ï¼Œã€Šgoå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹è®²ï¼ŒGä¼šå¯¼è‡´Mä¸€èµ·é˜»å¡ã€‚\næ„Ÿè§‰è€å¸ˆæ˜¯ä¸æ˜¯æ²¡çœ‹æ¸…â€œç³»ç»Ÿè°ƒç”¨â€å•Šï¼Œè€å¸ˆå›ç­”åº”è¯¥æ˜¯éç³»ç»Ÿè°ƒç”¨é˜»å¡çš„åœºæ™¯å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616641992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273404,"user_name":"DavidJiang","can_delete":false,"product_type":"c1","uid":1643779,"ip_address":"","ucode":"92EBF337569A1B","user_header":"https://static001.geekbang.org/account/avatar/00/19/15/03/682bd618.jpg","comment_is_top":false,"comment_ctime":1610589373,"is_pvip":false,"replies":[{"id":"99075","content":"ä½ é‚£ä¸ª i0 åœ¨æ¯æ¬¡è¿­ä»£é‡Œéƒ½æ˜¯ä¸€ä¸ªæ–°å˜é‡å•Šï¼ˆi0 := iï¼‰ï¼Œéƒ½æ˜¯å•ç‹¬å­˜å‚¨çš„ï¼Œ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1610598928,"ip_address":"","comment_id":273404,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1610589373","product_id":100013101,"comment_content":"ä¸ºå•¥è¿™æ ·å†™iå€¼å°±æ˜¯ä¸åŒçš„?\t<br>var wg sync.WaitGroup<br><br>\tfor i := 0; i &lt; 10; i++ {<br>\t\twg.Add(1)<br>\t\ti0 := i<br>\t\tgo func() {<br>\t\t\tdefer wg.Done()<br>\t\t\t&#47;&#47;time.Sleep(1 * time.Second)<br>\t\t\tfmt.Println(i0)<br>\t\t}()<br><br>\t\t&#47;&#47;go func(i int) {<br>\t\t&#47;&#47;\tdefer wg.Done()<br>\t\t&#47;&#47;\ttime.Sleep(1 * time.Second)<br>\t\t&#47;&#47;\tfmt.Println(i)<br>\t\t&#47;&#47;}(i)<br>\t}<br><br>\twg.Wait() &#47;&#47; ç­‰å¾…<br><br>\tfmt.Println(&quot;TestGorouting main end&quot;)<br><br><br>è¿™æ ·å†™içš„å€¼å°±å…¨æ˜¯10?<br>\tfmt.Println(&quot;TestGorouting main exist&quot;)<br>\tvar wg sync.WaitGroup<br><br>\tfor i := 0; i &lt; 10; i++ {<br>\t\twg.Add(1)<br>\t\t&#47;&#47;i0 := i<br>\t\tgo func() {<br>\t\t\tdefer wg.Done()<br>\t\t\t&#47;&#47;time.Sleep(1 * time.Second)<br>\t\t\tfmt.Println(i)<br>\t\t}()<br><br>\t\t&#47;&#47;go func(i int) {<br>\t\t&#47;&#47;\tdefer wg.Done()<br>\t\t&#47;&#47;\ttime.Sleep(1 * time.Second)<br>\t\t&#47;&#47;\tfmt.Println(i)<br>\t\t&#47;&#47;}(i)<br>\t}<br><br>\twg.Wait() &#47;&#47; ç­‰å¾…<br><br>\tfmt.Println(&quot;TestGorouting main end&quot;)","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513595,"discussion_content":"ä½ é‚£ä¸ª i0 åœ¨æ¯æ¬¡è¿­ä»£é‡Œéƒ½æ˜¯ä¸€ä¸ªæ–°å˜é‡å•Šï¼ˆi0 := iï¼‰ï¼Œéƒ½æ˜¯å•ç‹¬å­˜å‚¨çš„ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610598928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260466,"user_name":"ç”œè´¨ç²¥","can_delete":false,"product_type":"c1","uid":2153136,"ip_address":"","ucode":"696E929660A124","user_header":"https://static001.geekbang.org/account/avatar/00/20/da/b0/a2425eca.jpg","comment_is_top":false,"comment_ctime":1605015889,"is_pvip":false,"replies":[{"id":"94610","content":"é¡ºåºæ€æ ·ä¿è¯å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1605063638,"ip_address":"","comment_id":260466,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605015889","product_id":100013101,"comment_content":"æˆ‘è§‰å¾—åº”è¯¥è¿™æ ·ï¼š<br>func main() {<br>\tvar wg sync.WaitGroup<br>\tfor i := 0; i &lt; 10; i++ {<br>\t\twg.Add(1)<br>\t\tgo func(num int) {<br>\t\t\tfmt.Println(num)<br>\t\t\twg.Done()<br>\t\t}(i)<br>\t}<br>\twg.Wait()<br>}","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509201,"discussion_content":"é¡ºåºæ€æ ·ä¿è¯å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605063638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248429,"user_name":"æ»¡æ€€","can_delete":false,"product_type":"c1","uid":1483113,"ip_address":"","ucode":"EFAC662A37D684","user_header":"https://static001.geekbang.org/account/avatar/00/16/a1/69/0ddda908.jpg","comment_is_top":false,"comment_ctime":1600160112,"is_pvip":false,"replies":[{"id":"91276","content":"ä½ è¿™æ˜¯å®Œå…¨æ˜¯ä¸²è¡ŒåŒ–äº†å•Šï¼Œä¸²è¡ŒåŒ–çš„é€å‡ºäº†1-10ã€‚ä¸é—®é¢˜å’Œè€ƒæŸ¥è¦ç‚¹ä¸ç¬¦ï¼Œæˆ‘è§‰å¾—å¯ä»¥ä¸å¾—åˆ†;-)","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1600230160,"ip_address":"","comment_id":248429,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1600160112","product_id":100013101,"comment_content":"é€šè¿‡é€šé“çš„æ–¹æ³•å®ç°äº†æŒ‰é¡ºåºæ‰“å°0-9<br>func main() {<br>\tvar ch = make(chan int, 10)<br>\tfor i := 0; i &lt; 10; i++ {<br>\t\tch &lt;- i<br>\t}<br>\truntime.GOMAXPROCS(1)<br>\tfor j := 0; j &lt; 10; j++ {<br>\t\tgo func() {<br>\t\t\tvalue := &lt;-ch<br>\t\t\tfmt.Println(value)<br>\t\t}()<br>\t}<br>\ttime.Sleep(time.Second)<br>}","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505647,"discussion_content":"ä½ è¿™æ˜¯å®Œå…¨æ˜¯ä¸²è¡ŒåŒ–äº†å•Šï¼Œä¸²è¡ŒåŒ–çš„é€å‡ºäº†1-10ã€‚ä¸é—®é¢˜å’Œè€ƒæŸ¥è¦ç‚¹ä¸ç¬¦ï¼Œæˆ‘è§‰å¾—å¯ä»¥ä¸å¾—åˆ†;-)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600230160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240152,"user_name":"å°å¥•","can_delete":false,"product_type":"c1","uid":1171471,"ip_address":"","ucode":"5294DD5895D602","user_header":"https://static001.geekbang.org/account/avatar/00/11/e0/0f/12e08ce9.jpg","comment_is_top":false,"comment_ctime":1596771312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596771312","product_id":100013101,"comment_content":"package main<br><br>import &quot;fmt&quot;<br><br>func main() {<br>\tch := make(chan int, 1)<br>\tfor i:=0; i&lt;10; i++ {<br>\t\tgo func() {<br>\t\t\tfmt.Println(i)<br>\t\t\tch &lt;- i<br>\t\t}()<br>\t\t&lt;- ch<br>\t}<br>}","like_count":0},{"had_liked":false,"id":219168,"user_name":"æ²å¤œæ˜Ÿå…‰","can_delete":false,"product_type":"c1","uid":1447220,"ip_address":"","ucode":"22F699E237B179","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLia2EwyyEVs3tWRnMlqaAG7R7HvlW4vGvxthKsicgsCEeXO1qL7mMy6GAzgdkSKcH3c70Qa2hY3JLw/132","comment_is_top":false,"comment_ctime":1589960269,"is_pvip":false,"replies":[{"id":"81062","content":"è¦è¯´æ¸…ç†å·¥ä½œï¼Œä¹Ÿå°±æ˜¯é‡Šæ”¾å„ç§èµ„æºï¼Œå†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚æˆ‘è§‰å¾—å…·ä½“æ¸…ç†äº†ä»€ä¹ˆï¼Œä»¥åŠé¡ºåºæ˜¯ä»€ä¹ˆæ— å…³ç´§è¦ã€‚ç»†èŠ‚ä½ å¯ä»¥å»çœ‹Goè¯­è¨€çš„æºç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1590033674,"ip_address":"","comment_id":219168,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589960269","product_id":100013101,"comment_content":"å½“ä¸»goroutineç»“æŸæ—¶ï¼Œgoä¼šåšä»€ä¹ˆæ¸…ç†å·¥ä½œï¼Œæ¸…ç†é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495700,"discussion_content":"è¦è¯´æ¸…ç†å·¥ä½œï¼Œä¹Ÿå°±æ˜¯é‡Šæ”¾å„ç§èµ„æºï¼Œå†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚æˆ‘è§‰å¾—å…·ä½“æ¸…ç†äº†ä»€ä¹ˆï¼Œä»¥åŠé¡ºåºæ˜¯ä»€ä¹ˆæ— å…³ç´§è¦ã€‚ç»†èŠ‚ä½ å¯ä»¥å»çœ‹Goè¯­è¨€çš„æºç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590033674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204093,"user_name":"www","can_delete":false,"product_type":"c1","uid":1898338,"ip_address":"","ucode":"ADC9BC655EA16C","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f7/62/947004d0.jpg","comment_is_top":false,"comment_ctime":1586331570,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586331570","product_id":100013101,"comment_content":"èƒŒååŸç†æ‡‚äº†ï¼Œä¸æ‰“å°ä»»ä½•æ•°å­—ï¼›æ‰“å°å‡º7 7 8 8 8 3 8 10 ç­‰éšæœºç»“æœéƒ½æ‰§è¡Œå‡ºç°è¿‡","like_count":0},{"had_liked":false,"id":195993,"user_name":"starj","can_delete":false,"product_type":"c1","uid":1108791,"ip_address":"","ucode":"3546E42F1340B2","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/37/a2f4c9f8.jpg","comment_is_top":false,"comment_ctime":1585228567,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585228567","product_id":100013101,"comment_content":"å†™äº†æ®µæ—¶é—´ä»£ç ï¼Œå›æ¥å†çœ‹æœç„¶æ˜ç™½å¾ˆå¤š","like_count":0},{"had_liked":false,"id":191545,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1584780132,"is_pvip":false,"replies":[{"id":"73554","content":"åƒåšè¿™ç§ç®€å•çš„å¾ªç¯çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šåœ¨é‡Œé¢sleepè‹¥å¹²çº³ç§’ã€‚ä¸è¿‡ï¼ŒGoæœ€æ–°ç‰ˆæœ¬åº”è¯¥å·²ç»åšäº†è¿™æ–¹é¢çš„ä¼˜åŒ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1584870929,"ip_address":"","comment_id":191545,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1584780132","product_id":100013101,"comment_content":"æˆ‘ä»Šå¤©åˆæŠŠ10æ”¹æˆ100 1000 ç”šè‡³10000éƒ½æ²¡è§æ‰“å°ï¼æˆ‘è§‰å¾—æ˜¯å› ä¸ºä¸»goroutineä¸€ç›´åœ¨å ç”¨cpuä»¥è‡³äºæˆ‘ä»¬ç”¨goè¯­å¥å¯åŠ¨çš„goroutineæ²¡æœ‰æœºä¼šå¾—åˆ°æ‰§è¡Œï¼Œå½“æˆ‘ä»¬ä¸»goroutineæ‰§è¡Œå®Œä»¥åï¼Œè™½ç„¶é‡Šæ”¾äº†cpuä½†æ˜¯ç¨‹åºå·²ç»ç»“æŸäº†ï¼Œæ‰€ä»¥ä¹Ÿä¸è§ä»»ä½•æ‰“å°ï¼Œæ‰€ä»¥åŠ ä¸ªç­‰å¾…æˆ–è€…ç¡çœ ï¼Œè®©å‡ºcpuå…¶ä»–goroutineæ‰ä¼šæœ‰æœºä¼šæ‰§è¡Œï¼ä¸çŸ¥é“æˆ‘ç†è§£å¾—å¯¹ä¸å¯¹ï¼","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488200,"discussion_content":"åƒåšè¿™ç§ç®€å•çš„å¾ªç¯çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šåœ¨é‡Œé¢sleepè‹¥å¹²çº³ç§’ã€‚ä¸è¿‡ï¼ŒGoæœ€æ–°ç‰ˆæœ¬åº”è¯¥å·²ç»åšäº†è¿™æ–¹é¢çš„ä¼˜åŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584870929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1959820,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKibWRTLrWvazQT5Oc35WZnLeayYYd0TqmaN4u0iciakwjul6UmqEiaQGwSE944TQZicNwpBNSeHtVshJQ/132","nickname":"æ›¹ä¸–å®","note":"","ucode":"077D133BF3E760","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261081,"discussion_content":"æˆ‘ç”¨çš„æ˜¯go1.13.5ï¼Œå½“æŠŠforå¾ªç¯10æ”¹æˆ100çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™å°±ä¼šè¾“å‡ºæ•°æ®ã€‚æ”¹æˆ1000æ¯æ¬¡éƒ½ä¼šè¾“å‡ºæ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588937837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1236766,"avatar":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","nickname":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","note":"","ucode":"103543D6E706BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210834,"discussion_content":"æˆ–è€…è®©å‡ºæ—¶é—´ç‰‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584780235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191016,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1584717698,"is_pvip":false,"replies":[{"id":"73382","content":"å½“ç„¶æœ‰å¯èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨ç¼ºçœæƒ…å†µä¸‹åšå¤šä¸ªgoroutineä¹‹é—´çš„æ‰§è¡Œé¡ºåºçš„å‡è®¾ï¼ˆmainå‡½æ•°å¯¹åº”ç€ä¸»goroutineï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1584779711,"ip_address":"","comment_id":191016,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584717698","product_id":100013101,"comment_content":"<br>package main<br><br>import &quot;fmt&quot;<br><br>func main() {<br>  for i := 0; i &lt; 10; i++ {<br>    go func() {<br>      fmt.Println(i)<br>    }()<br>  }<br>}æˆ‘ä»Šå¤©çªç„¶æƒ³é—®çš„æ˜¯ï¼Œæœ‰æ²¡æœ‰å¯èƒ½forå¾ªç¯è¿˜æ²¡æ‰§è¡Œå®Œgoroutineå°±åœ¨æ‰§è¡Œäº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488102,"discussion_content":"å½“ç„¶æœ‰å¯èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨ç¼ºçœæƒ…å†µä¸‹åšå¤šä¸ªgoroutineä¹‹é—´çš„æ‰§è¡Œé¡ºåºçš„å‡è®¾ï¼ˆmainå‡½æ•°å¯¹åº”ç€ä¸»goroutineï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584779711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189622,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1584534886,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584534886","product_id":100013101,"comment_content":"å‰é¢æåˆ°<br>è¿™ç±»é˜Ÿåˆ—ä¸­çš„ G æ€»æ˜¯ä¼šæŒ‰ç…§å…ˆå…¥å…ˆå‡ºçš„é¡ºåºï¼Œå¾ˆå¿«åœ°ç”±è¿è¡Œæ—¶ç³»ç»Ÿå†…éƒ¨çš„è°ƒåº¦å™¨å®‰æ’è¿è¡Œã€‚è™½ç„¶è¿™ä¼šå¾ˆå¿«ï¼Œä½†æ˜¯ç”±äºä¸Šé¢æ‰€è¯´çš„é‚£äº›å‡†å¤‡å·¥ä½œè¿˜æ˜¯ä¸å¯é¿å…çš„ï¼Œæ‰€ä»¥è€—æ—¶è¿˜æ˜¯å­˜åœ¨çš„ã€‚<br>åé¢åˆè¯´<br>Go è¯­è¨€å¹¶ä¸ä¼šå»ä¿è¯è¿™äº› goroutine ä¼šä»¥æ€æ ·çš„é¡ºåºè¿è¡Œã€‚ç”±äºä¸» goroutine ä¼šä¸æˆ‘ä»¬æ‰‹åŠ¨å¯ç”¨çš„å…¶ä»– goroutine ä¸€èµ·æ¥å—è°ƒåº¦ï¼Œåˆå› ä¸ºè°ƒåº¦å™¨å¾ˆå¯èƒ½ä¼šåœ¨ goroutine ä¸­çš„ä»£ç åªæ‰§è¡Œäº†ä¸€éƒ¨åˆ†çš„æ—¶å€™æš‚åœï¼Œä»¥æœŸæ‰€æœ‰çš„ goroutine æœ‰æ›´å…¬å¹³çš„è¿è¡Œæœºä¼šã€‚<br>æ‰€ä»¥å°±æœ‰ç‚¹è¿·ç³Š,åé¢æåˆ°çš„åº”è¯¥æ˜¯ æˆ‘ä»¬æ‰‹åŠ¨å¯ç”¨çš„goroutineæ‰€åœ¨çš„é˜Ÿåˆ—å’Œä¸»routineåœ¨è¿›è¡ŒæŠ¢å å§,é˜Ÿåˆ—ä¸­çš„goroutineæ˜¯ä¸¥æ ¼æŒ‰ç…§é¡ºåºæ‰§è¡Œçš„ é™¤éæœ‰ä»£ç ä½¿å¾—goroutineæš‚åœæˆ–è€…æŒ‚èµ·å§<br>ä¹‹å‰æˆ‘å°±åœ¨æƒ³goåˆ°åº•æ˜¯æ€ä¹ˆå®ç°é«˜å¹¶å‘çš„ ç›´åˆ°çœ‹äº†ä»Šå¤©çš„è¯¾ç¨‹æˆ‘æ‰æ˜ç™½<br>ä¸»è¦è¿˜æ˜¯å› ä¸ºæˆ‘ä»¬å¯ç”¨çš„goroutineä¸ä¼šæœ‰ç³»ç»Ÿå‚ä¸ è™½ç„¶æœ€ç»ˆæ˜¯ä¾é ç³»ç»Ÿçº¿ç¨‹åœ¨æ‰§è¡Œçš„,è€Œä¸”goroutineçš„åˆ›å»ºæ¯”è¾ƒå»‰ä»· ä¸å½±å“ç³»ç»Ÿï¼Œè€Œä¸”æœ‰ä¸€ç§çº¿ç¨‹æ± çš„æ„Ÿè§‰éœ€è¦ç”¨çš„æ—¶å€™å–å‡ºæ¥ç”¨ ä¸å¤Ÿäº†æ‰©å®¹<br>è€Œä¸”go è¯­å¥ æ‰§è¡Œäº†ä»¥åå¹¶ä¸ä¼šå½±å“å½“å‰routineçš„æ‰§è¡ŒçŠ¶æ€,<br>é‡ç‚¹æ˜¯ goroutineçš„æ‰§è¡Œå¯èƒ½æ˜æ˜¾è¿Ÿäºgoè¯­å¥çš„æ‰§è¡Œ ä¸»è¦è¿˜æ˜¯æåˆ°å‰é¢çš„å‡†å¤‡å·¥ä½œ(æ¯”å¦‚å…ˆä»ç©ºé—²Gé˜Ÿåˆ—ä¸­æ‰¾ä¸€ä¸ªå¯ä»¥ç”¨çš„goroutine,æ²¡æœ‰å°±ç›´æ¥åˆ›å»ºä¸€ä¸ªgoroutineç›¸å½“äºæ‰©å®¹ï¼Œç„¶åå†å’ŒMç³»ç»Ÿçº¿ç¨‹ç›¸æŒ‚é ï¼Œå¦‚æœMå®åœ¨ä¸å¤Ÿç”¨äº†å†ç”³è¯·ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹,å¦‚æœæŸä¸ªæ­£åœ¨æ‰§è¡Œçš„goroutineè¢«æŒ‚èµ·äº†ï¼Œåˆ™è®©å‡ºMç»™å…¶ä»–éœ€è¦æ‰§è¡Œçš„goroutineï¼Œè€Œä¸”è¿™äº›goroutineæ˜¯æŒ‰ç…§é˜Ÿåˆ—çš„é¡ºåºæ‰§è¡Œ)<br>","like_count":0},{"had_liked":false,"id":188420,"user_name":"ç»™åŠ›","can_delete":false,"product_type":"c1","uid":1113645,"ip_address":"","ucode":"646EE4AFC17224","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/2d/2c9177ca.jpg","comment_is_top":false,"comment_ctime":1584352173,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584352173","product_id":100013101,"comment_content":"å¯ä»¥ç”¨å¸¦ç¼“å†²çš„chanæ¥æ§åˆ¶å¹¶å‘çš„æ•°é‡ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥æ§åˆ¶å¯åŠ¨çš„æ•°é‡","like_count":0},{"had_liked":false,"id":173313,"user_name":"æœ¨æ‰","can_delete":false,"product_type":"c1","uid":1127799,"ip_address":"","ucode":"85651CBDDF7EDC","user_header":"https://static001.geekbang.org/account/avatar/00/11/35/77/95e95b32.jpg","comment_is_top":false,"comment_ctime":1579501700,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579501700","product_id":100013101,"comment_content":"åŠ é” ","like_count":0},{"had_liked":false,"id":166658,"user_name":"ç–¯ç´","can_delete":false,"product_type":"c1","uid":1099379,"ip_address":"","ucode":"82ACAA4A27753D","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/73/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1577537771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577537771","product_id":100013101,"comment_content":"ç¬¬äºŒéè¯»ï¼Œç†è§£å¾—æ›´åŠ æ·±åˆ»äº†ã€‚å­—å­—å¥å¥å°†åŸç†è§£é‡Šå¾—æ¸…æ™°åˆ°ä½ã€‚","like_count":0},{"had_liked":false,"id":151465,"user_name":"x","can_delete":false,"product_type":"c1","uid":1234454,"ip_address":"","ucode":"AB74494440A008","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/16/43b4814c.jpg","comment_is_top":false,"comment_ctime":1573725695,"is_pvip":false,"replies":[{"id":"58358","content":"sync.WaitGroup ç”¨åœ¨è¿™é‡Œä¸æ˜¯å¾ˆå¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1573786974,"ip_address":"","comment_id":151465,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573725695","product_id":100013101,"comment_content":"sync.WaitGroupæ¥é™åˆ¶goroutineçš„æ•°é‡ï¼Ÿ æ¯å¯åŠ¨ä¸€ä¸ªADDä¸€æ¬¡ï¼Œæ‰§è¡Œå®Œå†doneä¸€æ¬¡ï¼Œä¸ºäº†é˜²æ­¢ä¸»çº¿ç¨‹çš„ç»“æŸå¯ä»¥åœ¨å¾ªç¯ååŠ ä¸Šwaitã€‚ ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474482,"discussion_content":"sync.WaitGroup ç”¨åœ¨è¿™é‡Œä¸æ˜¯å¾ˆå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573786974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146878,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1572685588,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572685588","product_id":100013101,"comment_content":"å› ä¸ºgoroutineæ˜¯å¼‚æ­¥å¹¶å‘æ‰§è¡Œï¼Œæ‰€ä»¥æœ‰å¯èƒ½ä»€ä¹ˆæ‰“å°ä¸å‡ºæ¥ï¼Œä¹Ÿæœ‰å¯èƒ½ï¼Œæ‰“å°å‡ºçš„æ˜¯ä¹±åºçš„0-9","like_count":0},{"had_liked":false,"id":117769,"user_name":"å…š","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1564126977,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564126977","product_id":100013101,"comment_content":"è¿™ä¸ªé¢˜çš„ä¾‹å­è‚¯å®šæ˜¯æ²¡æœ‰ä»»ä½•æ˜¾ç¤ºï¼Œå› ä¸ºä¸»çº¿ç¨‹éƒ½ç»“æŸäº†ï¼Œä¾æ‰˜è¿™ä¸ªä¸»çº¿ç¨‹çš„ä¸€åˆ‡éƒ½ç°é£çƒŸç­äº†ï¼Œä½†æ˜¯è¦æ˜¯åè¾¹åŠ ä¸ªå®šæ—¶ï¼Œé‚£ä¼šæ— åºçš„æ˜¾ç¤º0åˆ°9ï¼Œå› ä¸ºæ¯æ¬¡forå¾ªç¯ä¼šæŠŠiçš„å€¼æ‹·è´åˆ°æ‰“å°å‚æ•°é‡Œã€‚æ˜¯ä¸€ä¸ªå‰¯æœ¬ä¸æ˜¯åŸæ¥çš„i","like_count":0,"discussions":[{"author":{"id":1244537,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fd/79/d42c4c68.jpg","nickname":"ä¸æˆç†Ÿçš„èŒ","note":"","ucode":"4F5059446D062D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7092,"discussion_content":"è¿™é‡Œä¸æ˜¯å‰¯æœ¬ã€‚è¿™é‡Œçš„iç›¸å½“äºå…±äº«å†…å­˜ã€‚ä½ çœ‹å®ƒçš„ä¾‹å­ä¸æ˜¯ä¼ å‚çš„ã€‚æ‰€ä»¥æ˜¯æœ‰å¯èƒ½å‡ºç°å…¨10çš„ã€‚è¿™é‡Œåº”è¯¥ä¸»è¦æ˜¯è®²å¦‚æœä¸ä¸»åŠ¨å¹²é¢„è°ƒåº¦ï¼Œå“ªä¸ªæºç¨‹å…ˆè¢«æ‰§è¡Œæ˜¯æ— æ³•ç¡®å®šçš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1567354382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93597,"user_name":"å¿—é‘«","can_delete":false,"product_type":"c1","uid":1095392,"ip_address":"","ucode":"408869664EEA13","user_header":"https://static001.geekbang.org/account/avatar/00/10/b6/e0/52a07898.jpg","comment_is_top":false,"comment_ctime":1557528141,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557528141","product_id":100013101,"comment_content":"ä¸ªäººç¬”è®°ï¼šé€šè¿‡é˜»å¡é€šé“æ•°ç»„æ¥å®ç°<br><br>package main<br>import &quot;fmt&quot;<br><br>func main() {<br>\tconst n = 10<br>\tchs := [n + 1]chan struct{}{}<br>\tchs[n] = make(chan struct{})<br>\tfor i := 0; i &lt; n; i++ {<br>\t\tchs[i] = make(chan struct{})<br>\t\tgo func(i int) {<br>\t\t\t&lt;-chs[i]<br>\t\t\tfmt.Println(i)<br>\t\t\tchs[i+1] &lt;- struct{}{}<br>\t\t}(i)<br>\t}<br>\tchs[0] &lt;- struct{}{}<br>\t&lt;-chs[n]<br>}","like_count":0},{"had_liked":false,"id":92586,"user_name":"ç‹æœé˜³","can_delete":false,"product_type":"c1","uid":1326057,"ip_address":"","ucode":"27484160F289EA","user_header":"https://static001.geekbang.org/account/avatar/00/14/3b/e9/d05b5434.jpg","comment_is_top":false,"comment_ctime":1557304953,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557304953","product_id":100013101,"comment_content":"&#47;&#47;çœ‹äº†è¯„è®º æ„Ÿè§‰è¿™æ ·çš„ä»£ç æ›´æœ‰æ•ˆè¯´æ˜é—®é¢˜<br>package main<br>import (<br>\t&quot;fmt&quot;<br>\t&quot;time&quot;<br>)<br>func main() {<br>\tfor i := 0; i &lt; 100; i++ {<br>\t\tgo func(j int) {<br>\t\t\tfmt.Printf(&quot;%d,%d\\n&quot;, i, j)<br>\t\t}(i)<br>\t}<br>        &#47;&#47; å°è¯•æ³¨é‡Šæ‰ä¸‹è¾¹è¿™è¡Œä»£ç <br>\ttime.Sleep(time.Second * 2)<br>}<br>","like_count":0},{"had_liked":false,"id":92569,"user_name":"ç‹æœé˜³","can_delete":false,"product_type":"c1","uid":1326057,"ip_address":"","ucode":"27484160F289EA","user_header":"https://static001.geekbang.org/account/avatar/00/14/3b/e9/d05b5434.jpg","comment_is_top":false,"comment_ctime":1557303598,"is_pvip":false,"replies":[{"id":"33118","content":"å¸Œæœ›åœ¨ä½ çœ‹å®Œäº†è¿™ä¸€ç¯‡å’Œä¸‹ä¸€ç¯‡ä¹‹åèƒ½æ˜ç™½å¦‚æ­¤è¾“å‡ºçš„åŸå› ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1557325380,"ip_address":"","comment_id":92569,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557303598","product_id":100013101,"comment_content":"package main<br><br>import (<br>\t&quot;fmt&quot;<br>\t&quot;time&quot;<br>)<br><br>func main() {<br>\tfor i := 0; i &lt; 10; i++ {<br>\t\tgo func() {<br>\t\t\tfmt.Println(i)<br>\t\t}()<br>\t}<br>\ttime.Sleep(time.Second * 2)<br>}<br><br>è¿è¡Œç»“æœ  å…¨éƒ¨10ï¼Œå¶ç°4æˆ–è€…5","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449323,"discussion_content":"å¸Œæœ›åœ¨ä½ çœ‹å®Œäº†è¿™ä¸€ç¯‡å’Œä¸‹ä¸€ç¯‡ä¹‹åèƒ½æ˜ç™½å¦‚æ­¤è¾“å‡ºçš„åŸå› ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557325380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69486,"user_name":"Geek_1ed70f","can_delete":false,"product_type":"c1","uid":1394112,"ip_address":"","ucode":"B9A1928A6967B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erNhKGpqicibpQO3tYvl9vwiatvBzn27ut9y5lZ8hPgofPCFC24HX3ko7LW5mNWJficgJncBCGKpGL2jw/132","comment_is_top":false,"comment_ctime":1550755402,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550755402","product_id":100013101,"comment_content":"æœ¬æ¥æƒ³å›ç­”   &quot;æˆ–è®¸åªèƒ½æ— åºçš„æ‰“å°  2-3ä¸ª 0-9ä¹‹é—´æ— åº print æ—¶å€™mainå‡½æ•°å°±ç»“æŸäº†,å…¶ä»–çš„å°±æ²¡æœºä¼šæ‰“å°äº†&quot; ...........å¤§å¤šæ•°æƒ…å†µæ˜¯ ä¸€ä¸ªæœºä¼šéƒ½æ‹¿ä¸åˆ°?","like_count":0},{"had_liked":false,"id":64124,"user_name":"è¶…sir","can_delete":false,"product_type":"c1","uid":1306234,"ip_address":"","ucode":"5F8D9E8659D5DE","user_header":"https://static001.geekbang.org/account/avatar/00/13/ee/7a/ed5352d2.jpg","comment_is_top":false,"comment_ctime":1548671283,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548671283","product_id":100013101,"comment_content":"import (<br>\t&quot;fmt&quot;<br>)<br><br>func main() {<br>\tfor i := 0; i &lt; 10; i++ {<br>\t\tgo func() {<br>\t\t\tfmt.Println(i)<br>\t\t}()<br>\t}<br><br>}<br>ç»“æœï¼š<br>æƒ…æ™¯1ï¼š<br>1<br>10<br>10<br>10<br>æƒ…æ™¯2ï¼š<br>æ— è¾“å‡º","like_count":0},{"had_liked":false,"id":64122,"user_name":"è¶…sir","can_delete":false,"product_type":"c1","uid":1306234,"ip_address":"","ucode":"5F8D9E8659D5DE","user_header":"https://static001.geekbang.org/account/avatar/00/13/ee/7a/ed5352d2.jpg","comment_is_top":false,"comment_ctime":1548671169,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548671169","product_id":100013101,"comment_content":"package main<br><br>import (<br>\t&quot;fmt&quot;<br>\t&quot;time&quot;<br>)<br><br>func main() {<br>\tfor i := 0; i &lt; 10; i++ {<br>\t\tgo func(i int) {<br>\t\t\tfmt.Println(i)<br>\t\t}(i)<br>\t}<br>\ttime.Sleep(5*time.Second)<br>}<br>&#47;&#47;ç»“æœæ˜¯ï¼š<br>0<br>7<br>6<br>2<br>1<br>3<br>4<br>8<br>9<br>5","like_count":0},{"had_liked":false,"id":62280,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1548000395,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548000395","product_id":100013101,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":56706,"user_name":"è‡£å­","can_delete":false,"product_type":"c1","uid":1197737,"ip_address":"","ucode":"88A9924E77C052","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/a9/87da06f7.jpg","comment_is_top":false,"comment_ctime":1546525368,"is_pvip":false,"replies":[{"id":"21286","content":"å¾€åçœ‹ï¼Œè¿™æ˜¯è¿ç»­å‰§","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1547205458,"ip_address":"","comment_id":56706,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546525368","product_id":100013101,"comment_content":"è¯·é—®å¦‚æœæƒ³è®©forå¾ªç¯æ‰“å°içš„å˜é‡åªèƒ½é€šè¿‡sleepå—ï¼Ÿ é‚£å¦‚æœè¿™æ ·çš„è¯ï¼Œæˆ‘ç¼–å†™ä¸šåŠ¡é€»è¾‘è¿˜æ²¡å®Œæˆå°±ç»“æŸäº†ã€‚å²‚ä¸æ˜¯æœ‰é—®é¢˜ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435185,"discussion_content":"å¾€åçœ‹ï¼Œè¿™æ˜¯è¿ç»­å‰§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547205458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46021,"user_name":"Dev-L","can_delete":false,"product_type":"c1","uid":1145068,"ip_address":"","ucode":"485E940C3F17B9","user_header":"https://static001.geekbang.org/account/avatar/00/11/78/ec/f7f0d21a.jpg","comment_is_top":false,"comment_ctime":1543834568,"is_pvip":false,"replies":[{"id":"16991","content":"Goé‡Œåªä¼šä¼ å€¼ï¼Œå–å†³äºä¼ çš„å€¼æœ¬èº«çš„ç‰¹æ€§äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1544185592,"ip_address":"","comment_id":46021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543834568","product_id":100013101,"comment_content":"è¯·é—®ç»™go åé¢çš„å‡½æ•°ä¼ å‚ï¼Œå‚æ•°æ˜¯ä»€ä¹ˆæ—¶å€™ç»‘å®šçš„å‘¢ï¼Ÿæ˜¯å‡½æ•°æ‰§è¡Œçš„æ—¶å€™å—ï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œç›¸å½“äºä¼ çš„iå…¶å®ä¸æ˜¯ä¼ å€¼è€Œä¸”ä¼ å¼•ç”¨äº†ï¼Ÿè¿˜è¯·è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431307,"discussion_content":"Goé‡Œåªä¼šä¼ å€¼ï¼Œå–å†³äºä¼ çš„å€¼æœ¬èº«çš„ç‰¹æ€§äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544185592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25421,"user_name":"yann [æ‰¬] :æ›¹åŒå­¦","can_delete":false,"product_type":"c1","uid":1199315,"ip_address":"","ucode":"C449253263E796","user_header":"https://static001.geekbang.org/account/avatar/00/12/4c/d3/365fe5a1.jpg","comment_is_top":false,"comment_ctime":1537325777,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537325777","product_id":100013101,"comment_content":"pythonçš„è¯,ä¼šæœ‰ä¸€ä¸ªä¸»ç¨‹åºçš„é˜»å¡è¿‡ç¨‹,å¹¶ä¸”éœ€è¦æ˜¾æ€§å¯¼å…¥çº¿ç¨‹æ¨¡å—,è²Œä¼¼goæ²¡æœ‰æ˜æ˜¾è¡¨ç°å‡ºç±»ä¼¼çš„ç‰¹å¾","like_count":0},{"had_liked":false,"id":24891,"user_name":"ç¬¨ç¬¨","can_delete":false,"product_type":"c1","uid":1005351,"ip_address":"","ucode":"6DA6DCAF6A7DCB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/27/805786be.jpg","comment_is_top":false,"comment_ctime":1537228006,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1537228006","product_id":100013101,"comment_content":"æˆ‘ç†è§£è¿™é‡Œâ€œå¯ç”¨goruntineâ€æŒ‡çš„æ˜¯åŒæ—¶å‚ä¸å¹¶å‘çš„goruntineï¼Œé™åˆ¶çš„æ‰‹æ®µå¯ä»¥é€šè¿‡é…ç½®å‚æ•°GOMAXPROCESSæˆ–è€…å‡½æ•°è°ƒç”¨è®¾ç½®max processæ¥å®ç°ã€‚","like_count":0}]}