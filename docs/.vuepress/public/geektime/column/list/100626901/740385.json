{"id":740385,"title":"ç»“æŸè¯­ï½œæœªæ¥è®©Rustå¸¦ä½ â€œé”ˆâ€åˆ°èµ·é£","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„è€æœ‹å‹ Mikeã€‚</p><p>30è®²çš„è¯¾ç¨‹å¾ˆå¿«å°±ç»“æŸäº†ï¼Œæ„Ÿè°¢ä½ ä¸€è·¯çš„æ”¯æŒä¸é™ªä¼´ï¼Œæ¯ä¸€æ¬¡è¯„è®ºåŒºçš„äº’åŠ¨éƒ½èƒ½è®©æˆ‘æ„Ÿè§‰åˆ°å†™è¿™é—¨è¯¾çš„é‡è¦æ„ä¹‰ã€‚æˆ‘çœ‹åˆ°äº†ä½ åœ¨ä¸æ–­æ€è€ƒä¸­å¯¹Rustçš„ç†è§£è¶Šæ¥è¶Šæ·±ï¼Œç•éš¾æƒ…ç»ªä¹Ÿéšä¹‹ä¸€åˆ†åˆ†å‡å°‘ï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´æˆ‘ä¸€èµ·åºŠå°±ä¼šæ‰“å¼€è¯„è®ºï¼Œçœ‹çœ‹ä½ æœ‰å“ªäº›æ–°æ€è€ƒã€æ–°å›°æƒ‘ï¼Œè¿™ä¹Ÿæˆäº†æˆ‘æ¯å¤©çš„åŠ¨åŠ›æ¥æºã€‚</p><p>çœ‹åˆ°è¶Šæ¥è¶Šå¤šçš„æœ‹å‹åŠ å…¥å­¦ä¹ ï¼Œé€æ¸â€œé”ˆâ€åŒ–ï¼Œæˆ‘æƒ³æˆ‘å†™è¿™é—¨è¯¾ç¨‹æœ€åŸºæœ¬çš„ç›®æ ‡è¾¾åˆ°äº†â€”â€”è®©ä½ ä»¥æ¯”è¾ƒè½»æ¾çš„å¿ƒæ€å»æŒæ¡Rustçš„åŸºç¡€çŸ¥è¯†ï¼Œä¸ºä½ ä»¥åç”¨Rustå»è§£å†³ç”Ÿäº§ä¸Šçš„éš¾é¢˜æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚</p><p>åœ¨è¿™å‡ ä¸ªæœˆé‡Œæˆ‘ä»¬äº†è§£äº†Rustå¾ˆå¤šéå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œå¯¹æ‰€æœ‰æƒã€Traitã€ç±»å‹è¿˜æœ‰å¼‚æ­¥ç¼–ç¨‹å’ŒUnsafeç¼–ç¨‹ç­‰é‡è¦æ¦‚å¿µæœ‰äº†æ›´æ·±çš„ç†è§£ï¼Œæ­¤å¤–è¿˜è½¬å˜äº†å¯¹Rustå°åŠ©æ‰‹çš„æ€åº¦ï¼ŒçœŸæ­£æŠŠå®ƒå½“æˆäº†æˆ‘ä»¬çš„å¥½ä¼™ä¼´ã€‚è¿™éƒ½æ˜¯æˆ‘ä»¬å…±åŒåŠªåŠ›çš„ç»“æœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e4/f6/e47a32cf1b0c9561f2994ff5f04154f6.jpg?wh=6924x4500\" alt=\"å›¾ç‰‡\"></p><p>è€Œè¿™æœ€åä¸€èŠ‚è¯¾ä¹ŸåŒæ ·çè´µï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯æƒ³å†â€œå” å¨å” å¨â€ï¼Œå¸¦ä½ å›é¡¾æˆ‘ä»¬è¯¾ç¨‹é‡Œæœ€é‡è¦çš„ä¸€äº›ä¸œè¥¿ã€‚å¸Œæœ›ä½ ä¸ä»…èƒ½å¤ŸæŒæ¡åŸºæœ¬çš„Rustä»£ç åº”è¯¥æ€ä¹ˆå†™ï¼Œè¿˜èƒ½ç†è§£Rustä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ã€‚</p><h2>Rustæ‰€æœ‰æƒæ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ</h2><p>è¦è¯´ Rust é‡Œæœ€é‡è¦çš„ä¸œè¥¿ï¼Œä¸€å®šå°‘ä¸äº†æ‰€æœ‰æƒï¼Œéƒ½è¯´é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œåœ¨è¯¾ç¨‹ä¸­æˆ‘è¯´äº†åˆä½•æ­¢ä¸‰éï¼Œæ‰€ä»¥æˆ‘æƒ³ç”¨è¿™æœ€åä¸€ç‚¹ç‚¹å®è´µçš„æ—¶é—´å†æ¥è®²ä¸€è®²æ‰€æœ‰æƒä»ä½•è€Œæ¥ï¼Œåˆä½•ä»¥è‡³æ­¤çš„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“Rustæˆé•¿äºå·¨äººçš„è‚©è†€ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»Cè¯­è¨€è¯´èµ·ã€‚</p><!-- [[[read_end]]] --><h3>Cè¯­è¨€çš„æ‰‹åŠ¨å†…å­˜ç®¡ç†</h3><p>Cçš„åšæ³•æ˜¯å®Œå…¨äº¤ç»™ç¨‹åºå‘˜è‡ªå·±æ¥ç®¡ç†å †å†…å­˜ï¼Œä¹Ÿå°±æ˜¯åˆ†é…å†…å­˜åŠé‡Šæ”¾å†…å­˜ã€‚æ¯”å¦‚ï¼š</p><ul>\n<li>ä½ mallocäº†ä¸€å—å†…å­˜ï¼Œä½†æ˜¯å¦‚æœå¿˜äº†å†™ free çš„è¯ï¼Œå°±ä¼šé€ æˆå†…å­˜æ³„éœ²ã€‚</li>\n<li>å¦‚æœä½ åœ¨ä¸åŒçš„åœ°æ–¹ free äº†ä¸¤æ¬¡çš„è¯ï¼ˆæŒ‡é’ˆçš„å¤šæ¬¡freeï¼‰ï¼Œå°±ä¼šé€ æˆæœªå®šä¹‰è¡Œä¸ºï¼Œæ¯”å¦‚æ®µé”™è¯¯ã€‚</li>\n<li>ä½ å®šä¹‰äº†ä¸€ä¸ªæŒ‡é’ˆï¼Œä½†æ˜¯æ²¡æœ‰åˆå§‹åŒ–çš„è¯ï¼Œå¯¹æŒ‡é’ˆçš„è§£å¼•ç”¨ï¼ˆæœªåˆå§‹åŒ–æŒ‡é’ˆè®¿é—®ï¼‰ä¹Ÿä¼šç”Ÿæˆæœªå®šä¹‰è¡Œä¸ºã€‚</li>\n<li>ä½ ç”¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†ä¸€ä¸ªåˆ†é…çš„å †å†…å­˜ï¼Œä½†æ˜¯åœ¨æŸä¸ªåœ°æ–¹è¢«freeæ‰äº†ï¼Œä½†æ˜¯ä½ åˆå¯¹è¿™ä¸ªæŒ‡é’ˆè§£å¼•ç”¨çš„è¯ï¼ˆé‡Šæ”¾åè®¿é—®ï¼‰ï¼Œåˆä¼šå‡ºç°æœªå®šä¹‰è¡Œä¸ºã€‚</li>\n<li>â€¦â€¦</li>\n</ul><p>å› æ­¤åœ¨Cè¯­è¨€ä¸­ï¼Œå‡ºç°äº†ä¸€å¥—é¿å‘çš„æœ€ä½³å®è·µæ€»ç»“ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸€æ¡åŸåˆ™å°±æ˜¯<strong>è°åˆ†é…è°é‡Šæ”¾</strong>ï¼Œè¿™æ˜¯ä¸€æ¡äººä¸ºçš„çº¦å®šã€‚</p><p>çœ‹èµ·æ¥Cè¯­è¨€é‡Œçš„å†…å­˜ç®¡ç†å®Œå…¨æ˜¯æ‰‹åŠ¨çš„ï¼Œå…¶å®ä¸å°½ç„¶ï¼Œæ‰‹åŠ¨ç®¡ç†çš„ä¸»è¦æ˜¯å †å†…å­˜éƒ¨åˆ†ã€‚æ ˆä¸Šå†…å­˜çš„ç®¡ç†å…¶å®æ˜¯è‡ªåŠ¨çš„ã€‚å› ä¸ºæ ˆä¸Šçš„å†…å­˜ç®¡ç†åªæ¶‰åŠåˆ°ä¸€ä¸ªæ ˆé¡¶æŒ‡é’ˆå’Œè®¡ç®—åç§»é‡ï¼Œä¼šä»¥å‡½æ•°æ ˆå¸§ä¸ºå•å…ƒå‹æ ˆå‡ºæ ˆï¼Œè¿™å—å„¿å†…å­˜ä¼šéšç€å‡½æ•°å±‚æ¬¡çš„è°ƒç”¨è‡ªåŠ¨åˆ†é…å’Œå›æ”¶ã€‚ç¼–è¯‘å™¨ä¿è¯äº†è¿™å—çš„å†…å­˜ä¸ä¼šå‘ç”Ÿé”™è¯¯çš„ç®¡ç†ã€‚</p><h3>Javaçš„GC</h3><p>ç”±äºCè¯­è¨€å†…å­˜ç®¡ç†éå¸¸ç—›è‹¦ï¼Œæ€»æ˜¯é¿å…ä¸äº†å„ç§å†…å­˜å´©æºƒçš„é—®é¢˜ã€‚äººä»¬æƒ³å‡ºäº†å¦ä¸€ç§æ–¹æ¡ˆï¼Œç”¨ä¸€ä¸ªç®¡å®¶è‡ªåŠ¨å¸®æˆ‘ä»¬æ¸…ç†é‚£äº›ä¸è¦çš„â€œåƒåœ¾â€ï¼Œè¿™æ­£æ˜¯Java ç­‰åé¢ä¸€ç³»åˆ—è¯­è¨€çš„åšæ³•ã€‚è¿™ä¸ªç®¡å®¶å°±æ˜¯ GCï¼ˆåƒåœ¾å›æ”¶å™¨ï¼‰ã€‚è¿™ç§æ–¹æ¡ˆçš„æ€è·¯å°±æ˜¯ï¼Œç¨‹åºå‘˜åªç®¡åˆ†é…å†…å­˜ï¼Œç”¨å®Œå°±ä¸ç®¡äº†ï¼ŒGCä¼šè‡ªåŠ¨è·Ÿè¸ªè¿™äº›èµ„æºï¼Œåœ¨é€‚å½“çš„æ—¶å€™è‡ªåŠ¨å›æ”¶ã€‚è¿™å¤§å¤§é‡Šæ”¾äº†ç¨‹åºå‘˜çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œæœ‰äººç»™ä½ è´Ÿè´£æ”¶å°¾äº†ï¼Œå¤šå¤§çš„å¥½äº‹å„¿å‘€ï¼</p><p>ä½†æ˜¯GCæ–¹æ¡ˆçš„ä»£ä»·ä¹Ÿæ˜¯æ˜æ˜¾çš„ï¼Œæ¯”å¦‚ä¸ç®¡ä½¿ç”¨ä»€ä¹ˆè·Ÿè¸ªå›æ”¶ç®—æ³•ï¼Œå®ƒå§‹ç»ˆå­˜åœ¨STWï¼ˆStop the Worldï¼‰çš„é—®é¢˜ã€‚å®ƒæ€»æ˜¯åœ¨ç¨‹åºå‘˜ä¸åº•å±‚ä¹‹é—´éš”ç¦»äº†ä¸€å±‚ï¼Œå¾ˆéš¾åšåˆ°ç²¾ç¡®æ§åˆ¶ã€‚è¿™ä¸¤ç‚¹åœ¨åšä¸Šå±‚åº”ç”¨å¼€å‘çš„æ—¶å€™é—®é¢˜ä¸æ˜æ˜¾ã€‚ä½†æ˜¯åœ¨æ¶‰åŠåˆ°ä¸€äº›å…³é”®ç³»ç»Ÿçš„æ—¶å€™ï¼Œå½±å“å°±å¾ˆå¤§äº†ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿è¡Œæ€§èƒ½ä¹Ÿä¼šæœ‰å½±å“ã€‚</p><h3>C++çš„æ™ºèƒ½æŒ‡é’ˆ</h3><p>C++æ˜¯ä¸€é—¨å¾ˆç‰›çš„è¯­è¨€ï¼Œå®ƒä¸€æ–¹é¢åšåˆ°äº†å®Œå…¨å…¼å®¹Cã€‚å¦ä¸€æ–¹é¢åˆåœ¨ç°ä»£è¯­è¨€çš„æ–¹å‘ä¸Šåšäº†å¾ˆå¤šæ¢ç´¢ã€‚<a href=\"https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization\">RAII</a>ï¼ˆResource acquisition is initializationï¼‰æˆ–è€… SBRMï¼ˆScope-based Resource Managementï¼‰å°±æ˜¯åœ¨C++é‡Œé¢æå‡ºçš„ã€‚</p><p>å®ƒçš„æ€è·¯å…¶å®å°±åŸºäºä¸Šé¢æåˆ°çš„é‚£ä¸ªæƒ…å†µï¼š<strong>æ—¢ç„¶æ ˆä¸Šçš„å†…å­˜ç®¡ç†æ˜¯è‡ªåŠ¨çš„ï¼Œé‚£å¦‚æœæ‰¾åˆ°ä¸€ç§åŠæ³•å°†å †ä¸Šçš„èµ„æºä¸æ ˆä¸Šçš„å†…å­˜èµ„æºç»‘å®šï¼Œé‚£ä¸å°±å¯ä»¥è‡ªåŠ¨ç®¡ç†å †ä¸Šçš„å†…å­˜èµ„æºäº†å—ï¼Ÿ</strong>è®©å †ä¸Šçš„å†…å­˜èµ„æºéšç€æ ˆä¸Šçš„èµ„æºä¸€èµ·åˆ›å»ºä¸€èµ·å›æ”¶ï¼ŒåŒæ—¶è¿™ä¹Ÿæ˜¯ä½¿ç”¨å›ºå®šå°ºå¯¸çš„ç»“æ„ç®¡ç†éå›ºå®šå°ºå¯¸çš„ç»“æ„çš„æ–¹æ³•ã€‚</p><p>æ—¢ç„¶æ˜¯ç»‘å®šï¼Œé‚£å°±ä¼šå­˜åœ¨ä¸€ä¸ªæŒ‡å‘çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯éœ€è¦åœ¨æ ˆä¸Šçš„ä¸€ä¸ªå›ºå®šå°ºå¯¸çš„ç»“æ„ä¸­æœ‰ä¸€ä¸ªæŒ‡å‘å¾…ç®¡ç†çš„å †å†…å­˜èµ„æºçš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆå­˜çš„å°±æ˜¯é‚£ä¸ªå †å†…å­˜èµ„æºçš„å†…å­˜åœ°å€ã€‚è¿™ä¸ªå›ºå®šå°ºå¯¸çš„ç»“æ„å°±æ˜¯<strong>æ™ºèƒ½æŒ‡é’ˆ</strong>ã€‚å› æ­¤åœ¨C++ä¸­ä½ ä¼šçœ‹åˆ° <code>unique_ptr</code>ã€<code>shared_ptr</code> ç­‰æ™ºèƒ½æŒ‡é’ˆã€‚</p><h3>Rustçš„æ‰€æœ‰æƒ</h3><p>Rustå®Œå…¨æ²¿ç”¨äº†è¿™ä¸ªä¼˜ç§€çš„æ€æƒ³å’Œæ–¹æ³•ï¼Œå´æ²¡æœ‰ä»è¯­æ³•ä¸Šå…¼å®¹Cçš„è´Ÿæ‹…ã€‚Rustè¿›ä¸€æ­¥æŠŠè¿™ä¸ªè´Ÿè´£ç®¡ç†èµ„æºçš„æ™ºèƒ½æŒ‡é’ˆå† ä»¥<strong>æ‰€æœ‰æƒ</strong>ã€‚å¯¹åº”çš„ï¼ŒRustä¸­çš„åŸå§‹æŒ‡é’ˆraw pointerå°±æ²¡æœ‰æ‰€æœ‰æƒçš„æ¦‚å¿µï¼Œå› ä¸ºå®ƒå¹¶ä¸å‚ä¸è´Ÿè´£é‡Šæ”¾çš„å·¥ä½œã€‚</p><p>æ™ºèƒ½æŒ‡é’ˆæœ‰å¾ˆå¤šç§ç­–ç•¥ï¼Œä¸C++ç‰ˆæœ¬å¯¹åº”çš„ï¼ŒRustçš„ <code>Box&lt;T&gt;</code> å°±å¯¹åº” <code>unique_ptr</code>ï¼Œç‹¬å æ‰€æœ‰æƒï¼Œ<code>Arc&lt;T&gt;</code> å°±å¯¹åº” <code>shared_ptr</code>ï¼Œå…±äº«æ‰€æœ‰æƒã€‚ä»å‰é¢çš„å­¦ä¹ å¯ä»¥çœ‹åˆ°ï¼ŒStringã€Vecå…¶å®ä¹Ÿæ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒä»¬å…·æœ‰æ‰€æœ‰æƒå±æ€§ã€‚Boxå°±æ˜¯æ³›åŒ–ç‰ˆæœ¬çš„Stringã€Vecï¼ŒStringã€Vec æ˜¯ç‰¹åŒ–ç‰ˆæœ¬çš„ Boxã€‚å½“ç„¶è¿˜å­˜åœ¨å…¶ä»–æ™ºèƒ½æŒ‡é’ˆï¼Œä½ ç”šè‡³å¯ä»¥æ„æ€è‡ªå®šä¹‰ç­–ç•¥ï¼Œå®šä¹‰è‡ªå·±çš„æ™ºèƒ½æŒ‡é’ˆã€‚</p><p>å½“ç„¶æ‰€æœ‰æƒä¸ä»…æ¶µç›–æ™ºèƒ½æŒ‡é’ˆå’Œå †ä¸Šçš„èµ„æºã€‚æ ˆä¸Šçš„èµ„æºä¹Ÿæœ‰æ‰€æœ‰æƒã€‚æ¯”å¦‚ i8ã€å›ºå®šå°ºå¯¸çš„ç»“æ„ä½“ç­‰ç­‰ï¼Œé»˜è®¤éƒ½æ”¾åœ¨æ ˆä¸Šï¼Œå®ƒä»¬ä¹Ÿæ˜¯å…·æœ‰æ‰€æœ‰æƒçš„ã€‚æ‰€æœ‰æƒæ¦‚å¿µçš„æ ¸å¿ƒåœ¨äºä¸€ä¸ªæ ˆä¸Šå˜é‡ï¼ˆå½“ç„¶æ˜¯å›ºå®šå°ºå¯¸çš„ï¼‰æ˜¯å¦è´Ÿè´£ç®¡ç†èµ„æºã€‚å¯¹äºi8è¿™æ ·å›ºå®šå°ºå¯¸çš„ç»“æ„ä½“ç­‰ç±»å‹æ¥è¯´ï¼Œå®ƒä»¬æœ¬èº«çš„å€¼å°±å­˜åœ¨æ ˆä¸Šåˆ†é…çš„é‚£ä¸€å°å—å†…å­˜ç©ºé—´ä¸­ï¼Œå› æ­¤ä¼šéšç€æ ˆçš„å›æ”¶è‡ªåŠ¨è¢«å›æ”¶æ‰ï¼Œå› æ­¤ä¹Ÿç›¸å½“äºè¿™äº›å˜é‡ä¹Ÿç®¡ç†äº†èµ„æºã€‚å› æ­¤å®ƒä»¬ä¹Ÿæ˜¯å…·æœ‰æ‰€æœ‰æƒçš„ã€‚</p><h4>æ‰€æœ‰æƒä¹‹ä¸Šï¼šMoveä¸Copy</h4><p>è€ŒMoveè¯­ä¹‰ä¸Copyè¯­ä¹‰æ˜¯å¦ä¸€ç äº‹ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£æˆæ‰€æœ‰æƒä¹‹ä¸Šçš„ä¸Šå±‚æ¦‚å¿µã€‚åœ¨Rustä¸­ï¼Œåªè¦æŸç§ç±»å‹å®ç°äº†Copy traitï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨ = å·å†èµ‹å€¼æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ Copy è¯­ä¹‰ã€‚åä¹‹ï¼Œä¼šæ‰§è¡ŒMoveè¯­ä¹‰ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼ŒRustå¯¹è¯­è¨€å’Œæ ‡å‡†åº“é‡Œå¾ˆå¤šå›ºå®šå°ºå¯¸çš„åŸºç¡€ç±»å‹å®ç°äº† Copy è¯­ä¹‰ï¼Œè€Œå¯¹åŒæ ·æ˜¯å›ºå®šå°ºå¯¸çš„ç»“æ„ä½“å´é»˜è®¤æ²¡æœ‰å®ç°Copyè¯­ä¹‰ã€‚<strong>Moveè¯­ä¹‰å°±æ˜¯ç§»åŠ¨æ‰€æœ‰æƒï¼Œé˜²æ­¢è¿‡å¤§çš„å†…å­˜å¤åˆ¶å¼€é”€ã€‚Copyè¯­ä¹‰å°±æ˜¯å¤åˆ¶æ‰€æœ‰æƒï¼Œåˆ›å»ºæ–°çš„æ‰€æœ‰æƒï¼ŒåŸæ¥é‚£ä¸ªæ‰€æœ‰æƒä»ç„¶è¢«åŸæ¥çš„å˜é‡æŒæœ‰ã€‚</strong></p><h4><strong>'a ç”Ÿå‘½æœŸæ ‡æ³¨</strong></h4><p>Rusté€šè¿‡æ‰€æœ‰æƒæœºåˆ¶ï¼Œå®ç°äº†å¯¹èµ„æºçš„â€œè‡ªåŠ¨â€ç®¡ç†ã€‚ä½†æ˜¯è¿™ç§ç®¡ç†æ–¹å¼ä¹Ÿä¼šå¸¦æ¥ä¸€äº›æ–°çš„è´Ÿæ‹…ï¼Œé‚£å°±æ˜¯å¯¹æ‰€æœ‰æƒå˜é‡çš„å¼•ç”¨ç”Ÿå‘½æœŸçš„æœ‰æ•ˆæ€§åˆ†æå°±ä¼šæ¯”è¾ƒå¤æ‚ï¼Œå› ä¸ºéœ€è¦ç¡®ä¿è¿™äº›å¼•ç”¨ä¸èƒ½è¶…å‡ºæ‰€æœ‰æƒå‹å˜é‡çš„ç”Ÿå‘½æœŸã€‚è¿™å—ç›®å‰ä¸šç•Œè¿˜æ— æ³•åšåˆ°é€»è¾‘çº§åˆ«çš„åˆ†æï¼Œåªæ˜¯ä»å‡½æ•°çš„ç­¾åå®šä¹‰ä¸Šè¿›è¡Œåˆ†æã€‚<strong>å› æ­¤åœ¨å¿…è¦çš„æ—¶å€™ï¼ŒRustç¼–è¯‘å™¨è¿˜éœ€è¦ç¨‹åºå‘˜æ¥æä¾›ä¸€äº›ä¿¡æ¯ï¼Œè¿™å°±æ˜¯ 'a ç”Ÿå‘½æœŸæ ‡æ³¨çš„æ¥æºã€‚</strong></p><p>ä¸¥æ ¼çš„å¼•ç”¨ç”Ÿå‘½æœŸåˆ†ææ˜¯Rustå¼€è¾Ÿçš„æ–°é¢†åŸŸï¼Œæ¯”C++æ›´è¿›ä¸€æ­¥ã€‚æ‰€ä»¥è¯´Rustä¸ä»…æ˜¯å·¥ç¨‹ä¸Šçš„åˆ›æ–°ï¼Œä¹Ÿåœ¨è®¡ç®—æœºè¯­è¨€ç†è®ºä¸Šåšäº†ä¸€äº›åˆ›æ–°ã€‚</p><p>æ‰€æœ‰æƒæœ‰ä¸‰æ€ï¼š<strong>æ‰€æœ‰æƒå˜é‡ã€ä¸å¯å˜å¼•ç”¨ã€å¯å˜å¼•ç”¨ã€‚</strong>è¿™ä¸‰ç§å½¢æ€å‡ ä¹è´¯ç©¿Rustè¯­è¨€çš„æ‰€æœ‰æ–¹é¢ã€‚<code>Box&lt;Self&gt;</code>ã€ <code>Arc&lt;Self&gt;</code> ç­‰å®é™…åªæ˜¯æ‰€æœ‰æƒå˜é‡çš„å˜ä½“ã€‚å…¶å®Rustçš„æ‰€æœ‰æƒå°±æ˜¯è¿™ä¹ˆä¸€å›äº‹å„¿ï¼Œå°±æ˜¯è¿™äº›å†…å®¹äº†ã€‚</p><h2>Rustéš¾å­¦çš„ç‚¹åœ¨å“ªå„¿ï¼Ÿ</h2><p>é™¤äº†æ‰€æœ‰æƒè¿™ä¸€å—ä¹‹å¤–ï¼ŒRustæ™®éè¢«è®¤ä¸ºéš¾å­¦çš„è¿˜æœ‰å®ƒ<strong>ä¸¥æ ¼çš„ç±»å‹ç³»ç»Ÿ</strong>ï¼Œå¾ˆå¤šäººä¸ä¹ æƒ¯ã€‚</p><ol>\n<li>ç±»å‹åŒ–ä¸ç±»å‹å‚æ•°ï¼ˆæ³›å‹ï¼‰å„ç§å½¢å¼çš„ç»„åˆã€‚</li>\n<li>ç±»å‹åµŒå¥—çš„æ´‹è‘±ç»“æ„ä¼šè®©ç±»å‹å˜å¾—å¾ˆé•¿ï¼Œä¸€æ—¦å‡ºç°ç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ï¼Œåˆå­¦è€…å®¹æ˜“è¢«ç¼–è¯‘å™¨ç»™å‡ºçš„ä¿¡æ¯å“ä½ã€‚</li>\n<li>å…¨æ–°çš„traitç†å¿µã€‚</li>\n</ol><p>Rustä¸­çš„ç±»å‹ç¡®å®æ¯”è¾ƒä¸¥æ ¼ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ï¼ŒCé‡Œå°±ä¸€ä¸ª <code>char *</code>ï¼Œè€ŒRustä¸­æœ‰é‚£ä¹ˆå¤šä¸åŒçš„åˆ†ç±»ã€‚ä½†æ˜¯å®é™…ä¸Šï¼ŒC çš„ <code>char *</code> åœ¨çœŸæ­£åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿˜éœ€è¦åœ¨ä¸åŒçš„åœºæ™¯ä¸­å­¦ä¹ é‚£ä¸ªåœºæ™¯ä¸­çš„çŸ¥è¯†ï¼Œå¹¶åœ¨ <code>char *</code> åŸºç¡€ä¸Šç»§ç»­å°å¿ƒç¿¼ç¿¼åœ°å¤„ç†ã€‚è€ŒRustä¸­çš„è¿™äº›å­—ç¬¦ä¸²ç±»å‹å…¶å®å·²ç»åŒ…å«äº†å¾ˆå¤šåœºæ™¯ä¿¡æ¯äº†ï¼Œä½ ç›´æ¥ç”¨å°±è¡Œäº†ï¼Œå¦‚æœç”¨å¾—ä¸å¯¹ï¼Œåœ¨ç¼–è¯‘æœŸé—´å°±ä¼šè¢«æŒ‡å‡ºã€‚<strong>ç±»å‹åŒ–å…¶å®å°±æ˜¯å›Šæ‹¬æ›´å¤šè§„èŒƒä¿¡æ¯çš„è¿‡ç¨‹ï¼Œè®©æˆ‘ä»¬åœ¨ç¼–ç¨‹çš„æ—¶å€™å‡å°‘å‡ºé”™çš„å‡ ç‡ã€‚</strong></p><p>Rustçš„é”™è¯¯å¤„ç†ä¹Ÿå®Œå…¨å»ºç«‹åœ¨æ ‡å‡†åŒ–çš„ç±»å‹ç³»ç»Ÿä¸Šï¼ˆ<code>Result&lt;T, E&gt;</code>ï¼‰ï¼Œè¿™æ˜¯ä¸€ç§ä¸ä¹‹å‰çš„ä¸»æµè¯­è¨€å®Œå…¨ä¸åŒçš„æ€è·¯ï¼Œå› æ­¤å¼€å§‹å­¦èµ·æ¥å¯èƒ½ä¸å¤ªé€‚åº”ã€‚ä½†æ˜¯å…¶å®ä¸€æ—¦æ€è·¯è½¬æ¢è¿‡æ¥ï¼Œä¼šå‘ç°Rustçš„è¿™å¥—æ ‡å‡†çš„é”™è¯¯å¤„ç†æ€æƒ³æ›´ä¼˜ç¾ï¼Œæ›´èƒ½é™ä½æˆ‘ä»¬çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚</p><h3>ç±»å‹ç³»ç»Ÿä¸ä¼ ç»Ÿçš„OOP</h3><p>traitç†è®ºæ˜¯ä¸€ç§å¹³é“ºçš„ç†å¿µï¼Œå®ƒä¸ä¼ ç»Ÿçš„OOPç†å¿µå®Œå…¨ä¸åŒï¼Œç”šè‡³æ˜¯å®Œå…¨å¯¹ç«‹çš„ã€‚ä½ å¯ä»¥è¿™æ ·æ¥ç†è§£ï¼ŒOOPå°±åƒä¼ ç»Ÿè¡€ç¼˜ç¤¾ä¼šï¼Œåšä»€ä¹ˆéƒ½è¦çœ‹å‡ºèº«ï¼Œè€Œtraitæ˜¯ç°ä»£æ³•æ²»ç¤¾ä¼šï¼Œå¤§å®¶éƒ½å¹³ç­‰ã€‚<strong>åœ¨ Rustä¸­ï¼Œæ‰€æœ‰ trait éƒ½æ˜¯å¹³ç­‰çš„ã€‚</strong>ä¸ç®¡æ˜¯stdæ ‡å‡†åº“ä¸­çš„traitï¼Œè¿˜æ˜¯ä½ è‡ªå®šä¹‰çš„traitï¼Œå®ƒä»¬éƒ½æ˜¯å¹³ç­‰å…³ç³»ï¼Œä¸å­˜åœ¨ä»€ä¹ˆç»§æ‰¿ã€‚</p><p>traitå¯ä»¥ç±»æ¯”ä¸ºç¤¾ä¼šä¸­çš„æ³•å¾‹ï¼Œç»™å®ä½“ï¼ˆè‡ªç„¶äººã€æ³•äººç­‰ï¼‰ä»¥çº¦æŸã€‚æ³•å¾‹çº¦æŸä½ çš„åŒæ—¶ï¼Œå…¶å®ä¹Ÿç»™ä½ ç•Œå®šäº†èƒ½åšçš„äº‹æƒ…ï¼Œä¹Ÿå°±æ˜¯ä½ å…·æœ‰æŸäº›èƒ½åŠ›ã€‚å› æ­¤ç±»æ¯”è¿‡æ¥ï¼Œtrait ä½“ç³»å®é™…æ˜¯ä¸€ç§çº¦æŸ + èƒ½åŠ›ä½“ç³»ã€‚ä»ç¤¾ä¼šçš„å‘å±•æ¥çœ‹ï¼ŒRust è¿™ç§ trait æ¶æ„ä¸‹çš„ç±»å‹ä½“ç³»ï¼Œç›¸æ¯”äºOOPï¼Œç”Ÿäº§åŠ›å¯ä»¥æ›´é«˜ã€‚æˆ–è€…è¯´ <strong>Rust çš„ trait ä½“ç³»ï¼Œå®é™…æ›´å®¹æ˜“å‡†ç¡®æè¿°ç°å®ä¸–ç•Œï¼Œå› ä¸ºç°ä»£ä¸–ç•Œä¸»ä½“å°±æ˜¯æŒ‰è¿™ç§æ–¹å¼è¿è¡Œçš„</strong>ã€‚</p><p>å½“ç„¶æˆ‘ä»¬å¹¶ä¸æ˜¯è¯´ OOP å°±æ˜¯é”™çš„ã€‚åœ¨æŸäº›åœºåˆï¼Œæ¯”å¦‚æ—è°±æ¨¡å‹ã€GUIç•Œé¢æè¿°ç­‰ï¼Œå®ƒç¡®å®æ˜¯æ›´é€‚åˆçš„æŠ½è±¡æ–¹æ³•ã€‚å› æ­¤ä½ å¯ä»¥çœ‹åˆ°Slintè¿™ç§GUIæ¡†æ¶ï¼Œåœ¨Rustä¸­é€ å‡ºä¸€ä¸ªå…·æœ‰ç»§æ‰¿èƒ½åŠ›çš„æè¿°æ€§è¯­è¨€slintã€‚è¿™å°±ç›¸å½“äºæŠŠä¸¤ç§æŠ½è±¡æ–¹æ³•çš„ä¼˜åŠ¿ç»“åˆèµ·æ¥äº†ã€‚</p><p>ä»éš¾åº¦æ¥è®²ï¼Œå…¶å®traitä½“ç³»æ¯”å®Œæ•´çš„OOPä½“ç³»æ›´ç®€å•ã€çŸ¥è¯†ç‚¹æ›´å°‘ã€‚å¼€å§‹æ—¶æ„Ÿè§‰éš¾å­¦ï¼Œå¯èƒ½ä¸»è¦æ˜¯æ€ç»´éœ€è¦è½¬å˜ã€‚æ¯•ç«ŸOOPæ€æƒ³å æ®äº†è½¯ä»¶å¼€å‘æ ¸å¿ƒåœ°ä½å‡ åå¹´äº†ã€‚</p><p>å› æ­¤<strong>å­¦ä¹ Rustçš„ä¸¤å¤§æ ¸å¿ƒå°±æ˜¯æ‰€æœ‰æƒä½“ç³»ä¸trait ä½“ç³»</strong>ã€‚å®ƒä»¬å°±å¥½åƒä¸€æ ¹ç»³å­çš„ä¸¤å¤´ï¼Œåªè¦ä½ æŠŠä¸¤ä¸ªå¤´æèµ·æ¥äº†ï¼Œé‚£ä¹ˆå…¶ä»–ä¸œè¥¿å¾ˆå¿«å°±è·Ÿç€èµ·æ¥äº†ã€‚å¹¶ä¸æ˜¯è¯´å…¶ä»–ä¸œè¥¿ä¸é‡è¦ï¼Œå®ƒä»¬éƒ½æ˜¯æ„æˆRustè¿™ä¸ªæ•´ä½“çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚æˆ‘ä»¬è¿™é‡Œè¯´çš„æ˜¯å­¦ä¹ æ–¹æ³•ï¼Œä¸€å®šè¦æŠŠè¿™ä¸¤ä¸ªä¸»è¦çš„ä¸œè¥¿ææ‡‚ï¼Œå…¶ä»–çš„çŸ¥è¯†ç‚¹ç›¸å¯¹æ¯”è¾ƒç‹¬ç«‹ï¼Œå¯ä»¥è¢«è¿™ä¸¤æ ·ç‰¹æ€§æœ‰æ•ˆåœ°ä¸²èµ·æ¥ã€‚</p><h2>æœ€åçš„å¯„è¯­</h2><p>ä½ å­¦ä¹ Rustçš„æ—¶å€™æ›´é‡è¦çš„æ˜¯å­¦ä¼šè½¬å˜æ€ç»´ï¼Œæ¯•ç«Ÿå‰é¢å‡ åå¹´çš„ä¸»æµè¯­è¨€éƒ½é‡‡ç”¨äº†ä¸åŒçš„æ€ç»´æ¨¡å‹ã€‚åªè¦ä½ èŠ±ä¸Šä¸€å®šæ—¶é—´é€‚åº”äº†å®ƒï¼Œä½ å°±ä¼šå‘ç°Rustæ˜¯å¦‚æ­¤ä¼˜ç¾ã€é«˜æ•ˆã€å¯Œæœ‰åˆ›æ„ã€‚</p><p>Rustæ˜¯ä¸€ä½å¤šé¢æ‰‹ï¼ŒçŸ¥è¯†ç‚¹å¾ˆå¤šã€‚ä½ å¯ä»¥å…ˆé€‰æ‹©ä¸€ä¸ªæ–¹å‘åˆ‡å…¥ï¼Œä½¿ç”¨Rustå®ç°ä½ æœ€ç†Ÿæ‚‰çš„æˆ–è€…æœ€æ„Ÿå…´è¶£çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œäº§ç”Ÿä»·å€¼å›é¦ˆï¼Œç„¶åå†æ‰©å±•åˆ°å…¶ä»–æ„Ÿå…´è¶£çš„æ–¹é¢ã€‚å°±åƒæˆ‘å¸¸è¯´çš„ï¼Œ<strong>å­¦ä¹ å’Œåº”ç”¨ Rust æ²¡æœ‰å¤©èŠ±æ¿ï¼Œå¤©èŠ±æ¿å°±æ˜¯ä½ çš„æƒ³è±¡åŠ›ã€‚</strong></p><p>Rustèƒ½åº”ç”¨åœ¨å¹¿æ³›çš„è¡Œä¸šï¼Œæˆ‘ä»¬è¿™é—¨è¯¾ç¨‹åªæ˜¯åˆšèµ·äº†ä¸ªå¤´ï¼Œåé¢è¿˜æœ‰å¤§é‡çš„çŸ¥è¯†ç‚¹éœ€è¦æ·±å…¥æ¢ç´¢ã€‚å­¦Rustå°±æ˜¯å­¦CSè®¡ç®—æœºç§‘å­¦ï¼Œå¸Œæœ›ä½ ä¸æˆ‘ä¸€èµ·æŒç»­æ¢ç´¢ï¼Œç”¨Rustèµ‹èƒ½å„è¡Œå„ä¸šã€‚</p><p>å¬æˆ‘è¯´äº†è¿™ä¹ˆå¤šï¼Œæœ€åæˆ‘ä¹Ÿæƒ³å¬å¬ä½ çš„æƒ³æ³•ï¼Œè¿™é‡Œæˆ‘ç‰¹åˆ«å‡†å¤‡äº†ä¸€ä»½<a href=\"http://jinshuju.net/f/eeZQnc\">ç»“è¯¾é—®å·</a>ï¼Œä½ å¯ä»¥èŠ±å‡ åˆ†é’Ÿå¡«å†™ä¸€ä¸‹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¬åˆ°ä½ çš„â€œå£°éŸ³â€ã€‚</p><p><a href=\"http://jinshuju.net/f/eeZQnc\"><img src=\"https://static001.geekbang.org/resource/image/4e/24/4e1ea06ac81bee2e4fa290732f81c824.jpg?wh=1142x801\" alt=\"\"></a></p>","neighbors":{"left":{"article_title":"30ï½œUnsafeç¼–ç¨‹ï¼ˆä¸‹ï¼‰ï¼šä½¿ç”¨Rustä¸ºPythonå†™ä¸€ä¸ªæ‰©å±•","id":739360},"right":{"article_title":"ç»“è¯¾æµ‹è¯•ï½œæ¥èµ´ä¸€åœºæ»¡åˆ†ä¹‹çº¦","id":740086}},"comments":[{"had_liked":false,"id":386956,"user_name":"å°è™å­ğŸ¯","can_delete":false,"product_type":"c1","uid":2843479,"ip_address":"åŒ—äº¬","ucode":"4C9530B3FB407B","user_header":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","comment_is_top":true,"comment_ctime":1705998335,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"Mike è€å¸ˆçš„å…¬ä¼—å·ï¼šè·Ÿç€ MT å­¦ Rustï¼Œæ¬¢è¿å…³æ³¨ï½","like_count":2},{"had_liked":false,"id":386280,"user_name":"é•¿æ—å•Š","can_delete":false,"product_type":"c1","uid":1707743,"ip_address":"å››å·","ucode":"B75CB4919FF25A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/0e/df/a64b3146.jpg","comment_is_top":false,"comment_ctime":1704435920,"is_pvip":false,"replies":[{"id":140796,"content":"ç ”ç©¶ç ”ç©¶ğŸ§","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1704497639,"ip_address":"é‡åº†","comment_id":386280,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100626901,"comment_content":"å†æ¥ä¸ªç³»ç»Ÿæ€§è¿›é˜¶å®æˆ˜è¯¾å§","like_count":3,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635174,"discussion_content":"ç ”ç©¶ç ”ç©¶ğŸ§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704497639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386576,"user_name":"Jack Xin","can_delete":false,"product_type":"c1","uid":1425444,"ip_address":"ä¸Šæµ·","ucode":"BEC98A1F437239","user_header":"https://static001.geekbang.org/account/avatar/00/15/c0/24/01699070.jpg","comment_is_top":false,"comment_ctime":1705133195,"is_pvip":false,"replies":[{"id":140942,"content":"è°¢è°¢è‚¯å®šï¼Œå…±å‹‰ğŸ™","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1705326555,"ip_address":"é‡åº†","comment_id":386576,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"æˆ‘è§‰å¾—å”è€å¸ˆæœ‰ä¸€ç§ç‰¹åˆ«çš„èƒ½åŠ›ï¼Œrustä¸€äº›å¤æ‚éš¾æ‡‚çš„æ¦‚å¿µåœ¨è€å¸ˆçš„è®²è¿°ä¸‹ï¼Œå´å˜å¾—é€šä¿—æ˜“æ‡‚ï¼Œè®©äººè§‰å¾—å…´è¶£ç›ç„¶ï¼Œè°¢è°¢è€å¸ˆï¼Œå­¦å®Œè€å¸ˆçš„è¯¾è®©æˆ‘å–œæ¬¢ä¸Šäº†rust ","like_count":1,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635883,"discussion_content":"è°¢è°¢è‚¯å®šï¼Œå…±å‹‰ğŸ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705326555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390448,"user_name":"å†·çŸ³","can_delete":false,"product_type":"c1","uid":1523432,"ip_address":"å¹¿ä¸œ","ucode":"2A2B056A83E963","user_header":"https://static001.geekbang.org/account/avatar/00/17/3e/e8/3736f3cd.jpg","comment_is_top":false,"comment_ctime":1715366331,"is_pvip":false,"replies":[{"id":142025,"content":"æ€»å½’æ˜¯å­¦å®Œäº†å˜›ï¼ä¸é”™çš„","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2843479,"ctime":1715397522,"ip_address":"åŒ—äº¬","comment_id":390448,"utype":2}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"æ‹–å»¶ç—‡æ™šæœŸæ€»äºå­¦å®Œå•¦ï¼å•Šå•Šå•Š","like_count":0,"discussions":[{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":644635,"discussion_content":"æ€»å½’æ˜¯å­¦å®Œäº†å˜›ï¼ä¸é”™çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715397523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":387385,"user_name":"Geek_042531","can_delete":false,"product_type":"c1","uid":1541870,"ip_address":"å¹¿ä¸œ","ucode":"A42530B8592C77","user_header":"","comment_is_top":false,"comment_ctime":1707143393,"is_pvip":false,"replies":[{"id":141249,"content":"å¯ä»¥ï¼Œåé¢æœ‰æœºä¼šå¯ä»¥ç»§ç»­å±•å¼€è®²è®²è¿™å—å„¿","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1708627421,"ip_address":"åŠ æ‹¿å¤§","comment_id":387385,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"ç»ˆäºçœ‹å®Œäº†ä¸€éï¼Œæ”¶è·å¾ˆå¤§ï¼Œæœ‰ç‚¹æ„çŠ¹æœªå°½ã€‚Mikeè€å¸ˆï¼Œæ˜¯å¦å¯ä»¥è®²è§£ä¸€äº›é«˜çº§ç‚¹çš„çŸ¥è¯†ç‚¹ï¼Ÿæ¯”å¦‚æ€§èƒ½ä¼˜åŒ–ç›¸å…³çš„ä¸œè¥¿ã€‚","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":637560,"discussion_content":"å¯ä»¥ï¼Œåé¢æœ‰æœºä¼šå¯ä»¥ç»§ç»­å±•å¼€è®²è®²è¿™å—å„¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708627421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŠ æ‹¿å¤§","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386514,"user_name":"Noya","can_delete":false,"product_type":"c1","uid":1519230,"ip_address":"æµ™æ±Ÿ","ucode":"52EEB72E80BAF8","user_header":"https://static001.geekbang.org/account/avatar/00/17/2e/7e/a15b477c.jpg","comment_is_top":false,"comment_ctime":1705013609,"is_pvip":false,"replies":[{"id":140911,"content":"æ³°é…·è¾£","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1705068299,"ip_address":"é‡åº†","comment_id":386514,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"Over!","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635716,"discussion_content":"æ³°é…·è¾£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705068299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386369,"user_name":"superggn","can_delete":false,"product_type":"c1","uid":3623568,"ip_address":"åŒ—äº¬","ucode":"831CCD98B393FE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7Q403U68Oy4lXG5sFBPVKLrfwaRzBqpBZibpEBXcPf9UOO3qrnh7RELoByTLzBZLkN9Nukfsj7DibynbZjKAKgag/132","comment_is_top":false,"comment_ctime":1704695069,"is_pvip":false,"replies":[{"id":140815,"content":"çœ‹åˆ°å•¦ï¼Œè°¢è°¢ä½ è¿™ä¹ˆè®¤çœŸçš„åé¦ˆğŸŒ¹","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2843479,"ctime":1704695615,"ip_address":"åŒ—äº¬","comment_id":386369,"utype":2}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"é—®å·é‡Œæäº†ä¸€æ³¢å…³äºè¿­ä»£çš„çœ‹æ³•ï¼Œ æœ‰ç‚¹é•¿ï¼Œ å¸Œæœ›èƒ½çœ‹åˆ°ï¼Œ æœ‰ç²¾åŠ›æœ‰æ—¶é—´çš„è¯å¯ä»¥è€ƒè™‘æä¸€æ³¢ï¼ˆç¬‘ï¼‰","like_count":0,"discussions":[{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635283,"discussion_content":"çœ‹åˆ°å•¦ï¼Œè°¢è°¢ä½ è¿™ä¹ˆè®¤çœŸçš„åé¦ˆğŸŒ¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1704695615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386288,"user_name":"å®‰","can_delete":false,"product_type":"c1","uid":3554532,"ip_address":"å¹¿ä¸œ","ucode":"F6C46F533F5982","user_header":"https://static001.geekbang.org/account/avatar/00/36/3c/e4/b262e14c.jpg","comment_is_top":false,"comment_ctime":1704445274,"is_pvip":false,"replies":[{"id":140797,"content":"è°¢è°¢ï¼Œå¥½è®·","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1704497659,"ip_address":"é‡åº†","comment_id":386288,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"æœŸå¾…åç»­,æˆ‘çš„è€æœ‹å‹","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635175,"discussion_content":"è°¢è°¢ï¼Œå¥½è®·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704497659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386255,"user_name":"å€ªæ­¥çƒ¤","can_delete":false,"product_type":"c1","uid":2187797,"ip_address":"æµ™æ±Ÿ","ucode":"AEC400C7CD9A2C","user_header":"https://static001.geekbang.org/account/avatar/00/21/62/15/c1c4c8d6.jpg","comment_is_top":false,"comment_ctime":1704411962,"is_pvip":false,"replies":[{"id":140787,"content":"30è®²æ­£æ–‡+3ç¯‡è¯¾åé¢˜+å¼€ç¯‡è¯ç»“æŸè¯­æµ‹è¯•é¢˜ï¼Œä¸€å…±36è®²ï¼Œä½ å†çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯æ˜¾ç¤ºå·²å­¦35å‘€ï¼Œè¿˜æœ‰ä¸€èŠ‚æœªå­¦","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2843479,"ctime":1704420096,"ip_address":"åŒ—äº¬","comment_id":386255,"utype":2}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"å¥½åƒå°‘ä¸€è®²ï¼Œæ˜¾ç¤ºæ˜¯35&#47;36","like_count":0,"discussions":[{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635101,"discussion_content":"30è®²æ­£æ–‡+3ç¯‡è¯¾åé¢˜+å¼€ç¯‡è¯ç»“æŸè¯­æµ‹è¯•é¢˜ï¼Œä¸€å…±36è®²ï¼Œä½ å†çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯æ˜¾ç¤ºå·²å­¦35å‘€ï¼Œè¿˜æœ‰ä¸€èŠ‚æœªå­¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704420097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386267,"user_name":"å°è™å­ğŸ¯","can_delete":false,"product_type":"c1","uid":2843479,"ip_address":"åŒ—äº¬","ucode":"4C9530B3FB407B","user_header":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","comment_is_top":false,"comment_ctime":1704422684,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"æˆ‘å·²ç»æ‹¿åˆ°ç»“è¯¾è¯ä¹¦äº†ï¼Œè°æœ‰æˆ‘å¿«ï½","like_count":2},{"had_liked":false,"id":386254,"user_name":"ä¸€å¸¦ä¸€è·¯","can_delete":false,"product_type":"c1","uid":1633613,"ip_address":"å››å·","ucode":"BD3E750A9EBF25","user_header":"https://static001.geekbang.org/account/avatar/00/18/ed/4d/7df516d5.jpg","comment_is_top":false,"comment_ctime":1704391925,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"å¤ªæ£’äº†ï¼ŒæœŸå¾…åç»­è¯¾ç¨‹(â—â€¢á´—â€¢â—)","like_count":1},{"had_liked":false,"id":390386,"user_name":"Calvin","can_delete":false,"product_type":"c1","uid":1603004,"ip_address":"å¹¿ä¸œ","ucode":"0EEF5B207623B5","user_header":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","comment_is_top":false,"comment_ctime":1715237762,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"ç¼ºå°‘çš„å•æµ‹å’Œé›†æµ‹å¦‚æœä¸€å¹¶ä»‹ç»å°±å¥½äº†","like_count":0}]}