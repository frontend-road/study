{"id":717796,"title":"06 | Function Calling：让GPT学会使用工具","content":"<p>由于openai 11月6日发布的新的API  v1.0.0, 不兼容以前的版本，所以课程代码会做一定的更新。老师已经更新了部分章节的典型代码，<br>\n链接如下（两个链接都可以，国内用户推荐第二个）：</p><p><a href=\"https://github.com/chaocai2001/gpt_in_practice_v1\">https://github.com/chaocai2001/gpt_in_practice_v1</a></p><p><a href=\"https://gitee.com/chao-superman/llm_in_practice_v1\">https://gitee.com/chao-superman/llm_in_practice_v1</a></p><p>其他部分学员可以参考修改。老师也会在近期陆续更新代码。</p>","comments":[{"had_liked":false,"id":382658,"user_name":"Revive","can_delete":false,"product_type":"c3","uid":3733027,"ip_address":"湖南","ucode":"AE9B0E531D5571","user_header":"https://static001.geekbang.org/account/avatar/00/38/f6/23/10ccfe80.jpg","comment_is_top":false,"comment_ctime":1697765525,"is_pvip":false,"replies":[{"id":139375,"content":"对的，由GPT来判断，是根据要解决的问题及方法的描述来决定的。","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1697774329,"ip_address":"北京","comment_id":382658,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"老师，请问在输入问题发起请求后，”判断是否需要调用方法“这一步骤是由gpt来判断吗，它是基于什么信息来判断的，又是根据什么消息来判断使用哪一个方法？","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629898,"discussion_content":"对的，由GPT来判断，是根据要解决的问题及方法的描述来决定的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697774329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008312,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/b8/0e1b655e.jpg","nickname":"fireshort","note":"","ucode":"10550CA9C6C730","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629910,"discussion_content":"视频中的例子没体现出gpt的判断，视频中的例子gpt肯定要调用那个函数来查询集群的状态的，那还不如一开始就调用函数获取结果，然后让gpt给建议？\n\n蔡老师能举其他的例子来让gpt判断是否要调用函数吗？就是可能要、可能不要调用函数。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697788837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382617,"user_name":"我的康康","can_delete":false,"product_type":"c3","uid":1501436,"ip_address":"山东","ucode":"E7E2C969A91F8C","user_header":"https://static001.geekbang.org/account/avatar/00/16/e8/fc/4d84560f.jpg","comment_is_top":false,"comment_ctime":1697683542,"is_pvip":false,"replies":[{"id":139345,"content":"谢谢你的认可🙏","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1697693165,"ip_address":"北京","comment_id":382617,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"感谢老师蔡老师 受到的启发很大","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629826,"discussion_content":"谢谢你的认可🙏","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697693165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385843,"user_name":"Geek_2a62e6","can_delete":false,"product_type":"c3","uid":2984983,"ip_address":"广东","ucode":"5FE561C0AF2DF0","user_header":"","comment_is_top":false,"comment_ctime":1703497955,"is_pvip":false,"replies":[{"id":140636,"content":"我暂时还没有用过百度的模型，不知道是不是模型或者api上支持的差异，可以询问一下百度的支持","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1703634561,"ip_address":"北京","comment_id":385843,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"设置了func call  ，大模型一直都不调用，是模型的问题吗？ 我用的是百度的大模型erniebot","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634538,"discussion_content":"我暂时还没有用过百度的模型，不知道是不是模型或者api上支持的差异，可以询问一下百度的支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703634561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384715,"user_name":"阿毅","can_delete":false,"product_type":"c3","uid":1126482,"ip_address":"北京","ucode":"5B006F905A1FDE","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/52/7880dcf0.jpg","comment_is_top":false,"comment_ctime":1701390200,"is_pvip":false,"replies":[{"id":140297,"content":"谢谢你的认可！","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1701400296,"ip_address":"北京","comment_id":384715,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"感谢老师，更深入了解GPT！","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632824,"discussion_content":"谢谢你的认可！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1701400297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386859,"user_name":"刘稹","can_delete":false,"product_type":"c3","uid":1061398,"ip_address":"美国","ucode":"04E72146C6E68D","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/16/ea9c3cb2.jpg","comment_is_top":false,"comment_ctime":1705726853,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"1. 把之前一节课学习的搜索方法copy过来\n2. funcs里增加search_by_google的函数定义\n3.在run_conversation中的response里的functions增加一下内容\n{\n                &quot;name&quot;:&quot;search_by_google&quot;,\n                &quot;description&quot;:&quot;Search keyword, worlds, or sentence on the Google search engine to get resrult&quot;,\n                &quot;parameters&quot;:{\n                    &quot;type&quot;:&quot;object&quot;,\n                    &quot;properties&quot;:{\n                        &quot;question&quot;:{\n                            &quot;type&quot;:&quot;string&quot;,\n                            &quot;description&quot;:&quot;the name of the cluster&quot;,\n                        },\n                    },\n                    &quot;required&quot;:[&quot;question&quot;],\n                }\n            }\n这样基于老师课堂的例子就可以扩展支持从google搜索内容。\nprint(run(&quot;帮我查一下可口可乐是什么时候成立的&quot;)) &#47;&#47;执行该句子\n\n下面得到结果\n========\n-----message------\nChatCompletionMessage(content=None, role=&#39;assistant&#39;, function_call=FunctionCall(arguments=&#39;{\\n  &quot;question&quot;: &quot;可口可乐成立时间&quot;\\n}&#39;, name=&#39;search_by_google&#39;), tool_calls=None)\n-----message------\n{&#39;question&#39;: &#39;可口可乐成立时间&#39;}\n-----message------\nChatCompletionMessage(content=&#39;可口可乐是在1892年成立的。&#39;, role=&#39;assistant&#39;, function_call=None, tool_calls=None)\n-----message------\n可口可乐是在1892年成立的。\n\n这个例子真的是震惊了。对于公司内部的管理系统，可以利用这种模式开发一套自然语言的交互软件。 感谢老师","like_count":0}]}