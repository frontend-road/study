{"id":107143,"title":"14ä¸¨ä»€ä¹ˆæ˜¯äº‹åŠ¡å¤„ç†ï¼Œå¦‚ä½•ä½¿ç”¨COMMITå’ŒROLLBACKè¿›è¡Œæ“ä½œï¼Ÿ","content":"<p>æˆ‘ä»¬çŸ¥é“åœ¨MySQL 5.5ç‰ˆæœ¬ä¹‹å‰ï¼Œé»˜è®¤çš„å­˜å‚¨å¼•æ“æ˜¯MyISAMï¼Œåœ¨5.5ç‰ˆæœ¬ä¹‹åé»˜è®¤å­˜å‚¨å¼•æ“æ˜¯InnoDBã€‚InnoDBå’ŒMyISAMåŒºåˆ«ä¹‹ä¸€å°±æ˜¯InnoDBæ”¯æŒäº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥è¯´è¿™æ˜¯InnoDBå–ä»£MyISAMçš„é‡è¦åŸå› ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯äº‹åŠ¡å‘¢ï¼Ÿäº‹åŠ¡çš„è‹±æ–‡æ˜¯transactionï¼Œä»è‹±æ–‡ä¸­ä½ ä¹Ÿèƒ½çœ‹å‡ºæ¥å®ƒæ˜¯è¿›è¡Œä¸€æ¬¡å¤„ç†çš„åŸºæœ¬å•å…ƒï¼Œè¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚</p><p>è¿™ä¹ˆè®²ï¼Œä½ å¯èƒ½è§‰å¾—æœ‰äº›æŠ½è±¡ï¼Œæˆ‘æ¢ä¸€ç§æ–¹å¼è®²ã€‚</p><p>ä¸çŸ¥é“ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„æƒ…å†µï¼Œä½ å»å®¶é—¨å£çš„å°å–é“ºä¹°ä¸œè¥¿ï¼Œå·²ç»äº¤äº†é’±ï¼Œä½†æ˜¯è€æ¿æ¯”è¾ƒå¿™æ¥äº†ä¸ªç”µè¯ï¼Œå¿˜è®°ä½ æ˜¯å¦äº¤è¿‡é’±ï¼Œç„¶åè®©ä½ é‡æ–°ä»˜æ¬¾ï¼Œè¿™æ—¶ä½ è¿˜è¦æ‰¾ä¹‹å‰çš„ä»˜æ¬¾è®°å½•è¯æ˜ä½ å·²ç»å®Œæˆäº†ä»˜æ¬¾ã€‚</p><p>å®é™…ä¸Šå¦‚æœæˆ‘ä»¬çº¿ä¸‹çš„äº¤æ˜“ä¹Ÿèƒ½æ”¯æŒäº‹åŠ¡ï¼ˆæ»¡è¶³äº‹åŠ¡çš„ç‰¹æ€§ï¼‰ï¼Œå°±ä¸ä¼šå‡ºç°äº¤äº†é’±å´æ‹¿ä¸åˆ°å•†å“çš„çƒ¦æ¼äº†ï¼ŒåŒæ ·ï¼Œå¯¹äºå°å–é“ºçš„è€æ¿æ¥è¯´ï¼Œä¹Ÿä¸å­˜åœ¨ç»™å‡ºäº†å•†å“ä½†æ²¡æœ‰æ”¶åˆ°æ¬¾çš„é£é™©ã€‚æ€»ä¹‹ï¼Œäº‹åŠ¡ä¿è¯äº†ä¸€æ¬¡å¤„ç†çš„å®Œæ•´æ€§ï¼Œä¹Ÿä¿è¯äº†æ•°æ®åº“ä¸­çš„æ•°æ®ä¸€è‡´æ€§ã€‚å®ƒæ˜¯ä¸€ç§é«˜çº§çš„æ•°æ®å¤„ç†æ–¹å¼ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹çš„æ—¶å€™æŸä¸€ä¸ªç¯èŠ‚å‡ºäº†é”™ï¼Œå®ƒå…è®¸æˆ‘ä»¬å›æ»šè¿˜åŸã€‚æ­£æ˜¯å› ä¸ºè¿™ä¸ªç‰¹ç‚¹ï¼Œäº‹åŠ¡éå¸¸é€‚åˆåº”ç”¨åœ¨å®‰å…¨æ€§é«˜çš„åœºæ™¯é‡Œï¼Œæ¯”å¦‚é‡‘èè¡Œä¸šç­‰ã€‚</p><p>æˆ‘ä»¬ä»Šå¤©å°±æ¥å­¦ä¹ ä¸‹SQLä¸­çš„äº‹åŠ¡ã€‚ä»Šå¤©çš„è¯¾ç¨‹ä½ å°†é‡ç‚¹æŒæ¡ä»¥ä¸‹çš„å†…å®¹ï¼š</p><!-- [[[read_end]]] --><ol>\n<li>äº‹åŠ¡çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ç†è§£å®ƒä»¬ï¼Ÿ</li>\n<li>å¦‚ä½•å¯¹äº‹åŠ¡è¿›è¡Œæ§åˆ¶ï¼Ÿæ§åˆ¶çš„å‘½ä»¤éƒ½æœ‰å“ªäº›ï¼Ÿ</li>\n<li>ä¸ºä»€ä¹ˆæˆ‘ä»¬æ‰§è¡ŒCOMMITã€ROLLBACKè¿™äº›å‘½ä»¤çš„æ—¶å€™ï¼Œæœ‰æ—¶ä¼šæˆåŠŸï¼Œæœ‰æ—¶ä¼šå¤±è´¥ï¼Ÿ</li>\n</ol><h2>äº‹åŠ¡çš„ç‰¹æ€§ï¼šACID</h2><p>æˆ‘åˆšæ‰æåˆ°äº†äº‹åŠ¡çš„ç‰¹æ€§ï¼šè¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚ä¸è¿‡è¦å¯¹äº‹åŠ¡è¿›è¡Œæ›´æ·±ä¸€æ­¥çš„ç†è§£ï¼Œè¿˜è¦ä»äº‹åŠ¡çš„4ä¸ªç‰¹æ€§è¯´èµ·ï¼Œè¿™4ä¸ªç‰¹æ€§ç”¨è‹±æ–‡å­—æ¯æ¥è¡¨è¾¾å°±æ˜¯ACIDã€‚</p><ol>\n<li>Aï¼Œä¹Ÿå°±æ˜¯åŸå­æ€§ï¼ˆAtomicityï¼‰ã€‚åŸå­çš„æ¦‚å¿µå°±æ˜¯ä¸å¯åˆ†å‰²ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºç»„æˆç‰©è´¨çš„åŸºæœ¬å•ä½ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è¿›è¡Œæ•°æ®å¤„ç†æ“ä½œçš„åŸºæœ¬å•ä½ã€‚</li>\n<li>Cï¼Œå°±æ˜¯ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€‚ä¸€è‡´æ€§æŒ‡çš„å°±æ˜¯æ•°æ®åº“åœ¨è¿›è¡Œäº‹åŠ¡æ“ä½œåï¼Œä¼šç”±åŸæ¥çš„ä¸€è‡´çŠ¶æ€ï¼Œå˜æˆå¦ä¸€ç§ä¸€è‡´çš„çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´å½“äº‹åŠ¡æäº¤åï¼Œæˆ–è€…å½“äº‹åŠ¡å‘ç”Ÿå›æ»šåï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸä¸èƒ½è¢«ç ´åã€‚</li>\n<li>Iï¼Œå°±æ˜¯éš”ç¦»æ€§ï¼ˆIsolationï¼‰ã€‚å®ƒæŒ‡çš„æ˜¯æ¯ä¸ªäº‹åŠ¡éƒ½æ˜¯å½¼æ­¤ç‹¬ç«‹çš„ï¼Œä¸ä¼šå—åˆ°å…¶ä»–äº‹åŠ¡çš„æ‰§è¡Œå½±å“ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªäº‹åŠ¡åœ¨æäº¤ä¹‹å‰ï¼Œå¯¹å…¶ä»–äº‹åŠ¡éƒ½æ˜¯ä¸å¯è§çš„ã€‚</li>\n<li>æœ€åä¸€ä¸ªDï¼ŒæŒ‡çš„æ˜¯æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚äº‹åŠ¡æäº¤ä¹‹åå¯¹æ•°æ®çš„ä¿®æ”¹æ˜¯æŒä¹…æ€§çš„ï¼Œå³ä½¿åœ¨ç³»ç»Ÿå‡ºæ•…éšœçš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ç³»ç»Ÿå´©æºƒæˆ–è€…å­˜å‚¨ä»‹è´¨å‘ç”Ÿæ•…éšœï¼Œæ•°æ®çš„ä¿®æ”¹ä¾ç„¶æ˜¯æœ‰æ•ˆçš„ã€‚å› ä¸ºå½“äº‹åŠ¡å®Œæˆï¼Œæ•°æ®åº“çš„æ—¥å¿—å°±ä¼šè¢«æ›´æ–°ï¼Œè¿™æ—¶å¯ä»¥é€šè¿‡æ—¥å¿—ï¼Œè®©ç³»ç»Ÿæ¢å¤åˆ°æœ€åä¸€æ¬¡æˆåŠŸçš„æ›´æ–°çŠ¶æ€ã€‚</li>\n</ol><p>ACIDå¯ä»¥è¯´æ˜¯äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ï¼Œåœ¨è¿™å››ä¸ªç‰¹æ€§ä¸­ï¼ŒåŸå­æ€§æ˜¯åŸºç¡€ï¼Œéš”ç¦»æ€§æ˜¯æ‰‹æ®µï¼Œä¸€è‡´æ€§æ˜¯çº¦æŸæ¡ä»¶ï¼Œè€ŒæŒä¹…æ€§æ˜¯æˆ‘ä»¬çš„ç›®çš„ã€‚åŸå­æ€§å’Œéš”ç¦»æ€§æ¯”è¾ƒå¥½ç†è§£ï¼Œè¿™é‡Œæˆ‘è®²ä¸‹å¯¹ä¸€è‡´æ€§çš„ç†è§£ï¼ˆå›½å†…å¾ˆå¤šç½‘ç«™ä¸Šå¯¹ä¸€è‡´æ€§çš„é˜è¿°æœ‰è¯¯ï¼Œå…·ä½“ä½ å¯ä»¥å‚è€ƒWikipediaå¯¹<a href=\"https://en.wikipedia.org/wiki/ACID\">Consistency</a>çš„é˜è¿°ï¼‰ã€‚</p><p>æˆ‘ä¹‹å‰è®²åˆ°è¿‡æ•°æ®è¡¨çš„7ç§å¸¸è§çº¦æŸï¼ˆ<a href=\"https://time.geekbang.org/column/article/101697\">å¯¹åº”04ç¯‡</a>ï¼‰ã€‚è¿™é‡ŒæŒ‡çš„ä¸€è‡´æ€§æœ¬èº«æ˜¯ç”±å…·ä½“çš„ä¸šåŠ¡å®šä¹‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä½•å†™å…¥æ•°æ®åº“ä¸­çš„æ•°æ®éƒ½éœ€è¦æ»¡è¶³æˆ‘ä»¬äº‹å…ˆå®šä¹‰çš„çº¦æŸè§„åˆ™ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œåœ¨æ•°æ®è¡¨ä¸­æˆ‘ä»¬å°†å§“åå­—æ®µè®¾ç½®ä¸ºå”¯ä¸€æ€§çº¦æŸï¼Œè¿™æ—¶å½“äº‹åŠ¡è¿›è¡Œæäº¤æˆ–è€…äº‹åŠ¡å‘ç”Ÿå›æ»šçš„æ—¶å€™ï¼Œå¦‚æœæ•°æ®è¡¨ä¸­çš„å§“åéå”¯ä¸€ï¼Œå°±ç ´åäº†äº‹åŠ¡çš„ä¸€è‡´æ€§è¦æ±‚ã€‚æ‰€ä»¥è¯´ï¼Œäº‹åŠ¡æ“ä½œä¼šè®©æ•°æ®è¡¨çš„çŠ¶æ€å˜æˆå¦ä¸€ç§ä¸€è‡´çš„çŠ¶æ€ï¼Œå¦‚æœäº‹åŠ¡ä¸­çš„æŸä¸ªæ“ä½œå¤±è´¥äº†ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨æ’¤é”€å½“å‰æ­£åœ¨æ‰§è¡Œçš„äº‹åŠ¡ï¼Œè¿”å›åˆ°äº‹åŠ¡æ“ä½œä¹‹å‰çš„çŠ¶æ€ã€‚</p><p>äº‹åŠ¡çš„å¦ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯æŒä¹…æ€§ï¼ŒæŒä¹…æ€§æ˜¯é€šè¿‡äº‹åŠ¡æ—¥å¿—æ¥ä¿è¯çš„ã€‚æ—¥å¿—åŒ…æ‹¬äº†å›æ»šæ—¥å¿—å’Œé‡åšæ—¥å¿—ã€‚å½“æˆ‘ä»¬é€šè¿‡äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå°†æ•°æ®åº“çš„å˜åŒ–ä¿¡æ¯è®°å½•åˆ°é‡åšæ—¥å¿—ä¸­ï¼Œç„¶åå†å¯¹æ•°æ®åº“ä¸­å¯¹åº”çš„è¡Œè¿›è¡Œä¿®æ”¹ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå³ä½¿æ•°æ®åº“ç³»ç»Ÿå´©æºƒï¼Œæ•°æ®åº“é‡å¯åä¹Ÿèƒ½æ‰¾åˆ°æ²¡æœ‰æ›´æ–°åˆ°æ•°æ®åº“ç³»ç»Ÿä¸­çš„é‡åšæ—¥å¿—ï¼Œé‡æ–°æ‰§è¡Œï¼Œä»è€Œä½¿äº‹åŠ¡å…·æœ‰æŒä¹…æ€§ã€‚</p><h2>äº‹åŠ¡çš„æ§åˆ¶</h2><p>å½“æˆ‘ä»¬äº†è§£äº†äº‹åŠ¡çš„ç‰¹æ€§åï¼Œå†æ¥çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨äº‹åŠ¡ã€‚æˆ‘ä»¬çŸ¥é“Oracleæ˜¯æ”¯æŒäº‹åŠ¡çš„ï¼Œè€Œåœ¨MySQLä¸­ï¼Œåˆ™éœ€è¦é€‰æ‹©é€‚åˆçš„å­˜å‚¨å¼•æ“æ‰å¯ä»¥æ”¯æŒäº‹åŠ¡ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯MySQLï¼Œå¯ä»¥é€šè¿‡SHOW ENGINESå‘½ä»¤æ¥æŸ¥çœ‹å½“å‰MySQLæ”¯æŒçš„å­˜å‚¨å¼•æ“éƒ½æœ‰å“ªäº›ï¼Œä»¥åŠè¿™äº›å­˜å‚¨å¼•æ“æ˜¯å¦æ”¯æŒäº‹åŠ¡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/dd/45/ddfbb2ec8a03dc4eb3c77ae3dea63945.png?wh=1728*413\" alt=\"\"><br>\nä½ èƒ½çœ‹å‡ºåœ¨MySQLä¸­ï¼ŒInnoDBæ˜¯æ”¯æŒäº‹åŠ¡çš„ï¼Œè€ŒMyISAMå­˜å‚¨å¼•æ“ä¸æ”¯æŒäº‹åŠ¡ã€‚</p><p>çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å¯¹äº‹åŠ¡æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œç°åœ¨æˆ‘ä»¬å†æ¥çœ‹ä¸‹äº‹åŠ¡çš„å¸¸ç”¨æ§åˆ¶è¯­å¥éƒ½æœ‰å“ªäº›ã€‚</p><ol>\n<li>START TRANSACTIONæˆ–è€… BEGINï¼Œä½œç”¨æ˜¯æ˜¾å¼å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚</li>\n<li>COMMITï¼šæäº¤äº‹åŠ¡ã€‚å½“æäº¤äº‹åŠ¡åï¼Œå¯¹æ•°æ®åº“çš„ä¿®æ”¹æ˜¯æ°¸ä¹…æ€§çš„ã€‚</li>\n<li>ROLLBACKæˆ–è€…ROLLBACK TO [SAVEPOINT]ï¼Œæ„ä¸ºå›æ»šäº‹åŠ¡ã€‚æ„æ€æ˜¯æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æ²¡æœ‰æäº¤çš„ä¿®æ”¹ï¼Œæˆ–è€…å°†äº‹åŠ¡å›æ»šåˆ°æŸä¸ªä¿å­˜ç‚¹ã€‚</li>\n<li>SAVEPOINTï¼šåœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¿å­˜ç‚¹ï¼Œæ–¹ä¾¿åç»­é’ˆå¯¹ä¿å­˜ç‚¹è¿›è¡Œå›æ»šã€‚ä¸€ä¸ªäº‹åŠ¡ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªä¿å­˜ç‚¹ã€‚</li>\n<li>RELEASE SAVEPOINTï¼šåˆ é™¤æŸä¸ªä¿å­˜ç‚¹ã€‚</li>\n<li>SET TRANSACTIONï¼Œè®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚</li>\n</ol><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä½¿ç”¨äº‹åŠ¡æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºéšå¼äº‹åŠ¡å’Œæ˜¾å¼äº‹åŠ¡ã€‚éšå¼äº‹åŠ¡å®é™…ä¸Šå°±æ˜¯è‡ªåŠ¨æäº¤ï¼ŒOracleé»˜è®¤ä¸è‡ªåŠ¨æäº¤ï¼Œéœ€è¦æ‰‹å†™COMMITå‘½ä»¤ï¼Œè€ŒMySQLé»˜è®¤è‡ªåŠ¨æäº¤ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥é…ç½®MySQLçš„å‚æ•°ï¼š</p><pre><code>mysql&gt; set autocommit =0;  //å…³é—­è‡ªåŠ¨æäº¤\n</code></pre><pre><code>mysql&gt; set autocommit =1;  //å¼€å¯è‡ªåŠ¨æäº¤\n</code></pre><p>æˆ‘ä»¬çœ‹ä¸‹åœ¨MySQLçš„é»˜è®¤çŠ¶æ€ä¸‹ï¼Œä¸‹é¢è¿™ä¸ªäº‹åŠ¡æœ€åçš„å¤„ç†ç»“æœæ˜¯ä»€ä¹ˆï¼š</p><pre><code>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;\nBEGIN;\nINSERT INTO test SELECT 'å…³ç¾½';\nCOMMIT;\nBEGIN;\nINSERT INTO test SELECT 'å¼ é£';\nINSERT INTO test SELECT 'å¼ é£';\nROLLBACK;\nSELECT * FROM test;\n</code></pre><p>è¿è¡Œç»“æœï¼ˆ1è¡Œæ•°æ®ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a7/26/a7a49569e87dd5c6f5333a81d33c2826.png?wh=222*121\" alt=\"\"></p><p>åœ¨è¿™ä¸ªäº‹åŠ¡ä¸­ï¼Œæ•´ä¸ªSQLä¸€å…±æ‰§è¡Œäº†2ä¸ªäº‹åŠ¡ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ’å…¥â€œå…³ç¾½â€ï¼Œæäº¤åæ‰§è¡ŒæˆåŠŸï¼Œç¬¬äºŒä¸ªæ˜¯æ’å…¥ä¸¤æ¬¡â€œå¼ é£â€ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å°†nameè®¾ç½®ä¸ºäº†ä¸»é”®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸»é”®çš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡æ’å…¥â€œå¼ é£â€æ—¶å°±ä¼šäº§ç”Ÿé”™è¯¯ï¼Œç„¶åæ‰§è¡ŒROLLBACKç›¸å½“äºå¯¹äº‹åŠ¡è¿›è¡Œäº†å›æ»šï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°æœ€ç»ˆç»“æœåªæœ‰ä¸€è¡Œæ•°æ®ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œä¹‹åçš„ç»“æœï¼Œå³â€œå…³ç¾½â€ã€‚</p><p>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬è¿›è¡Œä¸‹é¢çš„æ“ä½œåˆä¼šæ€æ ·å‘¢ï¼Ÿ</p><pre><code>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;\nBEGIN;\nINSERT INTO test SELECT 'å…³ç¾½';\nCOMMIT;\nINSERT INTO test SELECT 'å¼ é£';\nINSERT INTO test SELECT 'å¼ é£';\nROLLBACK;\nSELECT * FROM test;\n</code></pre><p>è¿è¡Œç»“æœï¼ˆ2è¡Œæ•°æ®ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/df/f7/df437e577ce75363f5eb22dc362dbff7.png?wh=239*169\" alt=\"\"><br>\nä½ èƒ½çœ‹åˆ°è¿™æ¬¡æ•°æ®æ˜¯2è¡Œï¼Œä¸Šä¸€æ¬¡æ“ä½œæˆ‘æŠŠä¸¤æ¬¡æ’å…¥â€œå¼ é£â€æ”¾åˆ°ä¸€ä¸ªäº‹åŠ¡é‡Œï¼Œè€Œè¿™æ¬¡æ“ä½œå®ƒä»¬ä¸åœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œï¼Œé‚£ä¹ˆå¯¹äºMySQLæ¥è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™å®é™…ä¸Šå°±æ˜¯ä¸¤ä¸ªäº‹åŠ¡ï¼Œå› ä¸ºåœ¨autocommit=1çš„æƒ…å†µä¸‹ï¼ŒMySQLä¼šè¿›è¡Œéšå¼äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨æäº¤ï¼Œå› æ­¤åœ¨è¿›è¡Œç¬¬ä¸€æ¬¡æ’å…¥â€œå¼ é£â€åï¼Œæ•°æ®è¡¨é‡Œå°±å­˜åœ¨äº†ä¸¤è¡Œæ•°æ®ï¼Œè€Œç¬¬äºŒæ¬¡æ’å…¥â€œå¼ é£â€å°±ä¼šæŠ¥é”™ï¼š<code>1062 - Duplicate entry 'å¼ é£' for key 'PRIMARY'</code>ã€‚</p><p>æœ€åæˆ‘ä»¬åœ¨æ‰§è¡ŒROLLBACKçš„æ—¶å€™ï¼Œå®é™…ä¸Šäº‹åŠ¡å·²ç»è‡ªåŠ¨æäº¤äº†ï¼Œå°±æ²¡æ³•è¿›è¡Œå›æ»šäº†ã€‚</p><p>åŒæ ·çš„æˆ‘ä»¬å†æ¥çœ‹ä¸‹è¿™æ®µä»£ç ï¼Œä½ åˆèƒ½å‘ç°ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p><pre><code>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;\nSET @@completion_type = 1;\nBEGIN;\nINSERT INTO test SELECT 'å…³ç¾½';\nCOMMIT;\nINSERT INTO test SELECT 'å¼ é£';\nINSERT INTO test SELECT 'å¼ é£';\nROLLBACK;\nSELECT * FROM test;\n</code></pre><p>è¿è¡Œç»“æœï¼ˆ1è¡Œæ•°æ®ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/26/80/26d1f5a4a534eb9b1415ce867f006b80.png?wh=221*116\" alt=\"\"></p><p>ä½ èƒ½çœ‹åˆ°è¿˜æ˜¯ç›¸åŒçš„SQLä»£ç ï¼Œåªæ˜¯æˆ‘åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰è®¾ç½®äº†<code>SET @@completion_type = 1;</code>ï¼Œç»“æœå°±å’Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡å¤„ç†çš„ä¸€æ ·ï¼Œåªæœ‰ä¸€ä¸ªâ€œå…³ç¾½â€ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>è¿™é‡Œæˆ‘è®²è§£ä¸‹MySQLä¸­completion_typeå‚æ•°çš„ä½œç”¨ï¼Œå®é™…ä¸Šè¿™ä¸ªå‚æ•°æœ‰3ç§å¯èƒ½ï¼š</p><ol>\n<li>completion=0ï¼Œè¿™æ˜¯é»˜è®¤æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬æ‰§è¡ŒCOMMITçš„æ—¶å€™ä¼šæäº¤äº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªäº‹åŠ¡æ—¶ï¼Œè¿˜éœ€è¦æˆ‘ä»¬ä½¿ç”¨START TRANSACTIONæˆ–è€…BEGINæ¥å¼€å¯ã€‚</li>\n<li>completion=1ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬æäº¤äº‹åŠ¡åï¼Œç›¸å½“äºæ‰§è¡Œäº†COMMIT AND CHAINï¼Œä¹Ÿå°±æ˜¯å¼€å¯ä¸€ä¸ªé“¾å¼äº‹åŠ¡ï¼Œå³å½“æˆ‘ä»¬æäº¤äº‹åŠ¡ä¹‹åä¼šå¼€å¯ä¸€ä¸ªç›¸åŒéš”ç¦»çº§åˆ«çš„äº‹åŠ¡ï¼ˆéš”ç¦»çº§åˆ«ä¼šåœ¨ä¸‹ä¸€èŠ‚ä¸­è¿›è¡Œä»‹ç»ï¼‰ã€‚</li>\n<li>completion=2ï¼Œè¿™ç§æƒ…å†µä¸‹COMMIT=COMMIT AND RELEASEï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬æäº¤åï¼Œä¼šè‡ªåŠ¨ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥ã€‚</li>\n</ol><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç é‡Œï¼Œæˆ‘ä½¿ç”¨äº†completion=1ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘æäº¤ä¹‹åï¼Œç›¸å½“äºåœ¨ä¸‹ä¸€è¡Œå†™äº†ä¸€ä¸ªSTART TRANSACTIONæˆ–BEGINã€‚è¿™æ—¶ä¸¤æ¬¡æ’å…¥â€œå¼ é£â€ä¼šè¢«è®¤ä¸ºæ˜¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¹‹å†…çš„æ“ä½œï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡æ’å…¥â€œå¼ é£â€å°±ä¼šå¯¼è‡´äº‹åŠ¡å¤±è´¥ï¼Œè€Œå›æ»šä¹Ÿå°†è¿™æ¬¡äº‹åŠ¡è¿›è¡Œäº†æ’¤é”€ï¼Œæ‰€ä»¥ä½ èƒ½çœ‹åˆ°çš„ç»“æœå°±åªæœ‰ä¸€ä¸ªâ€œå…³ç¾½â€ã€‚</p><p>é€šè¿‡è¿™æ ·ç®€å•çš„ç»ƒä¹ ï¼Œä½ åº”è¯¥èƒ½ä½“ä¼šåˆ°äº‹åŠ¡æäº¤å’Œå›æ»šçš„æ“ä½œã€‚</p><p>å½“æˆ‘ä»¬è®¾ç½®autocommit=0æ—¶ï¼Œä¸è®ºæ˜¯å¦é‡‡ç”¨START TRANSACTIONæˆ–è€…BEGINçš„æ–¹å¼æ¥å¼€å¯äº‹åŠ¡ï¼Œéƒ½éœ€è¦ç”¨COMMITè¿›è¡Œæäº¤ï¼Œè®©äº‹åŠ¡ç”Ÿæ•ˆï¼Œä½¿ç”¨ROLLBACKå¯¹äº‹åŠ¡è¿›è¡Œå›æ»šã€‚</p><p>å½“æˆ‘ä»¬è®¾ç½®autocommit=1æ—¶ï¼Œæ¯æ¡SQLè¯­å¥éƒ½ä¼šè‡ªåŠ¨è¿›è¡Œæäº¤ã€‚<br>\nä¸è¿‡è¿™æ—¶ï¼Œå¦‚æœä½ é‡‡ç”¨START TRANSACTIONæˆ–è€…BEGINçš„æ–¹å¼æ¥æ˜¾å¼åœ°å¼€å¯äº‹åŠ¡ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹åŠ¡åªæœ‰åœ¨COMMITæ—¶æ‰ä¼šç”Ÿæ•ˆï¼Œåœ¨ROLLBACKæ—¶æ‰ä¼šå›æ»šã€‚</p><h2>æ€»ç»“</h2><p>å…³äºSQLä¸­çš„äº‹åŠ¡å¤„ç†ï¼Œå†…å®¹ç›¸å¯¹æ¯”è¾ƒå¤šï¼Œå› æ­¤æˆ‘ä¼šé‡‡ç”¨ä¸¤èŠ‚æ¥è¿›è¡Œè®²è§£ã€‚ä»Šå¤©æˆ‘ä»¬å¯¹äº‹åŠ¡çš„æ¦‚å¿µè¿›è¡Œäº†ç†è§£ï¼Œå¹¶è¿›è¡Œäº†ç®€å•çš„äº‹åŠ¡æ“ä½œã€‚æˆ‘ä»¬åœ¨åšæ•°æ®åº“æ“ä½œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¤±è´¥ï¼Œä½†æ­£æ˜¯å› ä¸ºæœ‰äº‹åŠ¡çš„å­˜åœ¨ï¼Œå³ä½¿åœ¨æ•°æ®åº“æ“ä½œå¤±è´¥çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚åŒæ ·ï¼Œå¤šä¸ªåº”ç”¨ç¨‹åºè®¿é—®æ•°æ®åº“çš„æ—¶å€™ï¼Œäº‹åŠ¡å¯ä»¥æä¾›éš”ç¦»ï¼Œä¿è¯äº‹åŠ¡ä¹‹é—´ä¸è¢«å¹²æ‰°ã€‚æœ€åï¼Œäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œç»“æœå°±ä¼šæ˜¯æ°¸ä¹…æ€§çš„ï¼Œè¿™å°±æ„å‘³ç€ï¼Œå³ä½¿ç³»ç»Ÿå´©æºƒäº†ï¼Œæ•°æ®åº“ä¹Ÿå¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ¢å¤ã€‚</p><p>åœ¨ä½¿ç”¨äº‹åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨æ§åˆ¶æµè¯­å¥å¯¹äº‹åŠ¡è¿›è¡Œæ“ä½œï¼Œä¸è¿‡åœ¨å®é™…æ“ä½œä¸­ï¼Œä¸ä¸€å®šæ¯æ¬¡ä½¿ç”¨COMMITæˆ–ROLLBACKéƒ½ä¼šæˆåŠŸï¼Œä½ è¿˜éœ€è¦çŸ¥é“å½“å‰ç³»ç»Ÿçš„äº‹åŠ¡æ‰§è¡Œæ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä¸€äº›å¸¸ç”¨çš„å‚æ•°æƒ…å†µï¼Œæ¯”å¦‚MySQLä¸­çš„autocommitå’Œcompletion_typeç­‰ã€‚</p><p>äº‹åŠ¡æ˜¯æ•°æ®åº“åŒºåˆ«äºæ–‡ä»¶ç³»ç»Ÿçš„é‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œå½“æˆ‘ä»¬æœ‰äº†äº‹åŠ¡å°±ä¼šè®©æ•°æ®åº“å§‹ç»ˆä¿æŒä¸€è‡´æ€§ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜èƒ½é€šè¿‡äº‹åŠ¡çš„æœºåˆ¶æ¢å¤åˆ°æŸä¸ªæ—¶é—´ç‚¹ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å·²æäº¤åˆ°æ•°æ®åº“çš„ä¿®æ”¹ä¸ä¼šå› ä¸ºç³»ç»Ÿå´©æºƒè€Œä¸¢å¤±ã€‚</p><p><img src=\"\" alt=\"\"></p><p>ä»Šå¤©çš„å†…å®¹åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œä½ èƒ½è¯´ä¸€ä¸‹MySQLä¸­éƒ½æœ‰å“ªäº›å­˜å‚¨å¼•æ“æ”¯æŒäº‹åŠ¡ï¼Œé€šè¿‡ä»€ä¹ˆå‘½ä»¤å¯ä»¥æŸ¥çœ‹å®ƒä»¬å—ï¼Ÿå¦å¤–ï¼Œä½ æ˜¯å¦‚ä½•ç†è§£äº‹åŠ¡çš„ç‰¹æ€§çš„ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„ç­”æ¡ˆï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·æ¥äº¤æµã€‚</p>","comments":[{"had_liked":true,"id":113482,"user_name":"æŸ”è½¯çš„èƒ–","can_delete":false,"product_type":"c1","uid":1573853,"ip_address":"","ucode":"32B0CDA0E03BC5","user_header":"https://static001.geekbang.org/account/avatar/00/18/03/dd/e9f4c243.jpg","comment_is_top":false,"comment_ctime":1563028214,"is_pvip":false,"replies":[{"id":"41349","content":"å¯¹çš„ï¼Œåœ¨MySQLä¸­ï¼Œå¦‚æœæ˜¯è¿ç»­BEGINï¼Œå¼€å¯äº†ç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿˜æ²¡æœ‰è¿›è¡ŒCOMMITæäº¤ï¼Œè€Œç›´æ¥è¿›è¡Œç¬¬äºŒä¸ªäº‹åŠ¡çš„BEGINï¼Œæ•°æ®åº“ä¼šéšå¼çš„å¸®åŠ©COMMITç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åè¿›å…¥åˆ°ç¬¬äºŒä¸ªäº‹åŠ¡<br>","user_name":"ä½œè€…å›å¤","comment_id":113482,"uid":"1306094","ip_address":"","utype":1,"ctime":1563068594,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"250671131382","product_id":100029501,"comment_content":"set autocommit=0;<br>BEGIN;<br>INSERT INTO test1 VALUES (&#39;a&#39;) ;<br>BEGIN;<br>INSERT INTO test1 VALUES (&#39;b&#39;);<br>INSERT INTO test1 VALUES (&#39;b&#39;);<br><br>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªBEGINæ²¡æœ‰æ˜¾ç¤ºæäº¤ã€‚åœ¨æ‰§è¡Œç¬¬äºŒä¸ªBEGINæ—¶ï¼Œè‡ªåŠ¨æŠŠç¬¬ä¸€ä¸ªäº‹åŠ¡æäº¤äº†ã€‚è¯·é—®è¿™æ˜¯MYSQLä¸­é»˜è®¤çš„è¡Œä¸ºå—ï¼Ÿ","like_count":59,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458242,"discussion_content":"å¯¹çš„ï¼Œåœ¨MySQLä¸­ï¼Œå¦‚æœæ˜¯è¿ç»­BEGINï¼Œå¼€å¯äº†ç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿˜æ²¡æœ‰è¿›è¡ŒCOMMITæäº¤ï¼Œè€Œç›´æ¥è¿›è¡Œç¬¬äºŒä¸ªäº‹åŠ¡çš„BEGINï¼Œæ•°æ®åº“ä¼šéšå¼çš„å¸®åŠ©COMMITç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åè¿›å…¥åˆ°ç¬¬äºŒä¸ªäº‹åŠ¡\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563068594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113066,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1562892720,"is_pvip":false,"replies":[{"id":"63705","content":"æ„Ÿè°¢AntåŒå­¦","user_name":"ä½œè€…å›å¤","comment_id":113066,"uid":"1306094","ip_address":"","utype":1,"ctime":1577529619,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"65987402160","product_id":100029501,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½ç©¿æ’ç€ä¸€äº›å·¥ä½œç¯å¢ƒä¸­çš„å®ä¾‹æ¥ä»‹ç»å‘¢ï¼Ÿæ¯”å¦‚è¯´äº‹åŠ¡çš„è‡ªåŠ¨æäº¤ï¼Œç”Ÿäº§å½“ä¸­æˆ‘ä»¬è¦è®¾ç½®æˆè‡ªåŠ¨æäº¤è¿˜æ˜¯ä¸è‡ªåŠ¨æäº¤ï¼Œæ˜¯åŸºäºä»€ä¹ˆæ ·çš„æƒ…å†µä¸‹æ‰è¿™æ ·è®¾è®¡ï¼Œè¿™æ ·å°±æ›´å®¹æ˜“ç†è§£äº†ï½ï¼Œä¸€ä¸ªå°å»ºè®®","like_count":16,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458041,"discussion_content":"æ„Ÿè°¢AntåŒå­¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577529619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123116,"user_name":"æŒ å¤´ä¾ ","can_delete":false,"product_type":"c1","uid":1150474,"ip_address":"","ucode":"F96966832E2252","user_header":"https://static001.geekbang.org/account/avatar/00/11/8e/0a/31ec5392.jpg","comment_is_top":false,"comment_ctime":1565609019,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"44515281979","product_id":100029501,"comment_content":"è€å¸ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œåœ¨ç¬¬äºŒä¸ªbeginä¸­æ’å…¥äº†ä¸¤ä¸ª â€˜å¼ é£â€™ ï¼Œä½†æ˜¯æ‰§è¡Œæ—¶å‘ç”Ÿé”™è¯¯ï¼Œä¸æ˜¯è¯´é”™è¯¯ä¼šå›æ»šå—ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦æŒ‡å®š ROLLBACKï¼Ÿ<br><br>å¦‚æœå°†ç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„ROLLBACK æ”¹æˆCOMMIT ä¸ºä»€ä¹ˆä¼šæœ‰ä¸€æ¡ â€˜å¼ é£â€™ æ’å…¥æˆåŠŸå‘¢ï¼Ÿè¿™ä¸¤ä¸ªinsertä¸åº”è¯¥æ˜¯ä¸€ä¸ªäº‹åŠ¡å†…å—ï¼Ÿä¸åº”è¯¥éƒ½è¿›è¡Œå›æ»šå—ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1055819,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1c/4b/2e5df06f.jpg","nickname":"ä¸‰ä»¶äº‹","note":"","ucode":"BCC867C8961A24","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413834,"discussion_content":"æ‰€ä»¥è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯å•¥ï¼ŸğŸ˜‚ä¸¤å¹´äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636567191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1055819,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1c/4b/2e5df06f.jpg","nickname":"ä¸‰ä»¶äº‹","note":"","ucode":"BCC867C8961A24","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537514,"discussion_content":"ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œrollbakï¼Œæœ€åå°±æ˜¯åªæœ‰å…³ç¾½ã€‚å¦‚æœrollbackæ”¹æˆcommitï¼Œå°±ä¼šæ’å…¥ä¸€æ¡å¼ é£ã€‚ä»¥ä¸Šç»“æœæ²¡æœ‰æ¯›ç—…å•Šã€‚\n\nå¦‚æœæ˜¯é»˜è®¤çš„autocommit=1ï¼›å¹¶ä¸”æ²¡æœ‰ç”¨begin æˆ–è€…å…¶ä»–æ˜¾ç¤ºå¼€å¯äº‹åŠ¡çš„æƒ…å†µï¼Œä¸€æ¡ SQLè¯­å¥æœ¬èº«å°±ä¼šéšå¼å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœè¿™ä¸ªSQLäº‹åŠ¡å‡ºé”™ï¼Œå½“ç„¶å°±è‡ªåŠ¨å›æ»šï¼Œæ¢å¤åˆ°æ‰§è¡ŒSQLä¹‹å‰çš„çŠ¶æ€ã€‚\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639091684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":413834,"ip_address":""},"score":537514,"extra":""}]}]},{"had_liked":false,"id":113177,"user_name":"å¤œè·¯ç ´æ™“","can_delete":false,"product_type":"c1","uid":1353577,"ip_address":"","ucode":"9B875F94B759B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3hZfficKPGCq2kjFBu9SgaMjibJTEl7iaW1ta6pZNyiaWP8XEsNpunlnsiaOtBpWTXfT5BvRP3qNByml6p9rtBvqewg/132","comment_is_top":false,"comment_ctime":1562908652,"is_pvip":false,"replies":[{"id":"41361","content":"å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚ä¸è¿‡å®é™…æ“ä½œçš„æ—¶å€™ï¼Œè¿˜éœ€è¦ä½¿ç”¨COMMITå’ŒROLLBACKæ¥ç®¡ç†æˆ‘ä»¬çš„äº‹åŠ¡","user_name":"ä½œè€…å›å¤","comment_id":113177,"uid":"1306094","ip_address":"","utype":1,"ctime":1563072097,"user_name_real":"cy"}],"discussion_count":2,"race_medal":0,"score":"40217614316","product_id":100029501,"comment_content":"äº‹åŠ¡æ˜¯ä¸ªæœ‰ç†æƒ³ã€æœ‰ä¸ªæ€§ã€è®²çˆ±æ†çš„è€¿ç›´BOYã€‚è·Ÿè¿™æ ·çš„äººæ‰“äº¤é“ä¼šå¾ˆæ”¾å¿ƒã€‚","like_count":10,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458094,"discussion_content":"å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚ä¸è¿‡å®é™…æ“ä½œçš„æ—¶å€™ï¼Œè¿˜éœ€è¦ä½¿ç”¨COMMITå’ŒROLLBACKæ¥ç®¡ç†æˆ‘ä»¬çš„äº‹åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563072097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1302228,"avatar":"https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg","nickname":"David.cui","note":"","ucode":"AB46F310403612","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171884,"discussion_content":"é è°±é’å¹´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581755312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131829,"user_name":"æ£®é±¼","can_delete":false,"product_type":"c1","uid":1638587,"ip_address":"","ucode":"6AF86EB05088F4","user_header":"https://static001.geekbang.org/account/avatar/00/19/00/bb/25a29311.jpg","comment_is_top":false,"comment_ctime":1567926080,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35927664448","product_id":100029501,"comment_content":"ä½ å¥½ï¼Œåœ¨æ€»ç»“éƒ¨åˆ†ä¹‹å‰ï¼ŒéŸ³é¢‘ä¸­æœ‰ä¸€æ®µâ€œDELIMITERâ€æ“ä½œæ–¹å¼ï¼Œæˆ‘çœ‹æ–‡æœ¬ä¸­å¹¶æ²¡æœ‰ç›¸åº”çš„æ®µè½ï¼Œå¯å¦æœ‰ç©ºè®©å·¥ä½œäººå‘˜è¡¥ä¸Šï¼Ÿè°¢è°¢ï¼","like_count":9},{"had_liked":false,"id":144741,"user_name":"åŠç“¶é†‹","can_delete":false,"product_type":"c1","uid":1282746,"ip_address":"","ucode":"8C898E244D0417","user_header":"https://static001.geekbang.org/account/avatar/00/13/92/ba/9833f06f.jpg","comment_is_top":false,"comment_ctime":1572020673,"is_pvip":true,"replies":[{"id":"59759","content":"åŠ æ²¹ æ€»ç»“çš„ä¸é”™","user_name":"ä½œè€…å›å¤","comment_id":144741,"uid":"1306094","ip_address":"","utype":1,"ctime":1574739937,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"31636791745","product_id":100029501,"comment_content":"MySQLä¸­InnoDBæ˜¯æ”¯æŒäº‹åŠ¡çš„ï¼ŒMyISAMä¸æ”¯æŒäº‹åŠ¡çš„ï¼Œå¯ä»¥é€šè¿‡SHOW ENGINESå‘½ä»¤æŸ¥çœ‹~<br>äº‹åŠ¡ï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼šè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ã€‚å…·ä½“ï¼šå››ä¸ªç‰¹æ€§ï¼ˆACIDï¼‰<br>Aï¼šåŸå­æ€§ï¼Œä¸å¯åˆ†å‰²ï¼›<br>Cï¼šä¸€è‡´æ€§ï¼Œæ— è®ºäº‹åŠ¡æ˜¯å¦æäº¤æˆåŠŸï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸä¸ä¼šæ”¹å˜ï¼Œå³ä¼šç”±åŸæ¥çš„ä¸€è‡´æ€§çŠ¶æ€å˜ä¸ºå¦ä¸€ç§ä¸€è‡´æ€§çŠ¶æ€ï¼›<br>Iï¼šéš”ç¦»æ€§ï¼Œå„ä¸ªäº‹åŠ¡æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šäº’ç›¸å½±å“ï¼›<br>Dï¼šæŒä¹…æ€§ï¼Œä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹æ˜¯æŒä¹…çš„ï¼Œå³ä½¿ç³»ç»Ÿæ•…éšœï¼Œä¿®æ”¹ä¾ç„¶æœ‰æ•ˆã€‚<br><br>----åˆ†å‰²çº¿---<br>è®°ä¸€ä¸‹ï¼ŒåŠ æ·±å°è±¡~","like_count":8,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472094,"discussion_content":"åŠ æ²¹ æ€»ç»“çš„ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574739937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117208,"user_name":"åºé‘«å","can_delete":false,"product_type":"c1","uid":1114368,"ip_address":"","ucode":"2A4B9FD568ADF7","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/00/326f3d4d.jpg","comment_is_top":false,"comment_ctime":1564009979,"is_pvip":false,"replies":[{"id":"63800","content":"æˆ‘è®°å¾—ä¸“æ åé¢ç« èŠ‚é‡Œæœ‰è®²åˆ°è¿‡ï¼Œå¯ä»¥çœ‹çœ‹","user_name":"ä½œè€…å›å¤","comment_id":117208,"uid":"1306094","ip_address":"","utype":1,"ctime":1577542227,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"31628781051","product_id":100029501,"comment_content":"è€å¸ˆï¼Œä»€ä¹ˆæ—¶å€™èƒ½è®²ä¸€ä¸‹redo,undo log","like_count":8,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459862,"discussion_content":"æˆ‘è®°å¾—ä¸“æ åé¢ç« èŠ‚é‡Œæœ‰è®²åˆ°è¿‡ï¼Œå¯ä»¥çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577542227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130866,"user_name":"å¼ å°å€”","can_delete":false,"product_type":"c1","uid":1574088,"ip_address":"","ucode":"6C1B2C4D8CE4C8","user_header":"https://static001.geekbang.org/account/avatar/00/18/04/c8/c75f4f2d.jpg","comment_is_top":false,"comment_ctime":1567561647,"is_pvip":false,"replies":[{"id":"53405","content":"å¯¹äºå¤æ‚çš„äº‹åŠ¡æ¥è¯´ï¼Œå¯ä»¥é‡‡ç”¨savepointï¼Œå¯ä»¥å›æ»šåˆ°æŒ‡å®šçš„ä¿ç•™ç‚¹ï¼Œæ“ä½œèµ·æ¥æ›´çµæ´»","user_name":"ä½œè€…å›å¤","comment_id":130866,"uid":"1306094","ip_address":"","utype":1,"ctime":1570434176,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"23042398127","product_id":100029501,"comment_content":"æ–‡ç« ä¸­æåˆ°çš„ä¿å­˜ç‚¹ savepointï¼Œå®ç”¨åœºæ™¯æœ‰å“ªäº›å‘¢ ","like_count":6,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466165,"discussion_content":"å¯¹äºå¤æ‚çš„äº‹åŠ¡æ¥è¯´ï¼Œå¯ä»¥é‡‡ç”¨savepointï¼Œå¯ä»¥å›æ»šåˆ°æŒ‡å®šçš„ä¿ç•™ç‚¹ï¼Œæ“ä½œèµ·æ¥æ›´çµæ´»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570434176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113167,"user_name":"æ¯›è±†","can_delete":false,"product_type":"c1","uid":1547185,"ip_address":"","ucode":"7D838CA50D044D","user_header":"https://static001.geekbang.org/account/avatar/00/17/9b/b1/74b04ee6.jpg","comment_is_top":false,"comment_ctime":1562906648,"is_pvip":false,"replies":[{"id":"41208","content":"ç›®å‰æ˜¯å›´ç»•ä¸€ä¸ªRDBMSæ¥åšä¸¾ä¾‹ï¼Œé¡ºä¾¿ä¸¾ä¾‹ä¸‹Oracleå’ŒSQL Serverçš„ä¸åŒï¼Œè¿™äº›ä¸åŒæˆ‘å›æ¥å†åšä¸ªè¯¦ç»†çš„æ•´ç†ï¼Œæ”¾åˆ°è¿›é˜¶ç¯‡ä¸­","user_name":"ä½œè€…å›å¤","comment_id":113167,"uid":"1306094","ip_address":"","utype":1,"ctime":1562920063,"user_name_real":"cy"}],"discussion_count":4,"race_medal":0,"score":"23037743128","product_id":100029501,"comment_content":"ä¸ºä»€ä¹ˆä¸€ç›´é‡ç‚¹åœ¨è®²Mysqlå‘¢ï¼Œoracleåªæ˜¯éšå£ä¸€æï¼Œè€Œä¸”oracleæ˜¯æœ‰è‡ªåŠ¨æäº¤çš„ï¼Œä¾‹å¦‚åƒcreateè¯­å¥ï¼Œoracleæ˜¯è‡ªåŠ¨æäº¤","like_count":6,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458088,"discussion_content":"ç›®å‰æ˜¯å›´ç»•ä¸€ä¸ªRDBMSæ¥åšä¸¾ä¾‹ï¼Œé¡ºä¾¿ä¸¾ä¾‹ä¸‹Oracleå’ŒSQL Serverçš„ä¸åŒï¼Œè¿™äº›ä¸åŒæˆ‘å›æ¥å†åšä¸ªè¯¦ç»†çš„æ•´ç†ï¼Œæ”¾åˆ°è¿›é˜¶ç¯‡ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562920063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1554764,"avatar":"https://static001.geekbang.org/account/avatar/00/17/b9/4c/8c9edc85.jpg","nickname":"å°åº","note":"","ucode":"7C8367CDB47163","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382213,"discussion_content":"åœ¨ç¬¬å››è®²ä¸­è€å¸ˆæ˜¯æåˆ°è¿‡è¿™ä¸ªçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625475369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1159283,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b0/73/bdf14b17.jpg","nickname":"Z_Winner","note":"","ucode":"B397220071E198","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38126,"discussion_content":"å°±oracleæ¥è¯´ï¼Œddlæ˜¯ä¸å­˜åœ¨äº‹åŠ¡ä¸€è¯´çš„å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571732787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1211987,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/53/c29c2fc9.jpg","nickname":"sdjdd","note":"","ucode":"512F2338DFF793","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1785,"discussion_content":"æ—¢ç„¶äºŒè€…éƒ½æœ‰è‡ªåŠ¨æäº¤ï¼Œé‚£é‡ç‚¹è®²ä¸€ä¸ªä¸å°±è¡Œäº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562912491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132329,"user_name":"Tyrant","can_delete":false,"product_type":"c1","uid":1478302,"ip_address":"","ucode":"CD053E316EB124","user_header":"https://static001.geekbang.org/account/avatar/00/16/8e/9e/7b4aa967.jpg","comment_is_top":false,"comment_ctime":1568085488,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14452987376","product_id":100029501,"comment_content":"æˆ‘å‘ç°åœ¨navicaté‡Œï¼Œrollbackå®Œå…¨æ²¡ç”¨ï¼Œä¸çŸ¥é“ä¸ºå•¥","like_count":4,"discussions":[{"author":{"id":1964047,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/f8/0f/64c3acf5.jpg","nickname":"Ape","note":"","ucode":"B25C3AF51D7A5D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":245918,"discussion_content":"åŒæ„Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587712000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114471,"user_name":"æ¼”","can_delete":false,"product_type":"c1","uid":1075072,"ip_address":"","ucode":"8685926BDA0A66","user_header":"https://static001.geekbang.org/account/avatar/00/10/67/80/4e52c16f.jpg","comment_is_top":false,"comment_ctime":1563322888,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"14448224776","product_id":100029501,"comment_content":"CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>COMMIT;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>ROLLBACK;<br>SELECT * FROM test;<br><br>è€å¸ˆ åé¢ä¸¤æ¬¡æ’å…¥å¼ é£ä¸åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿™ä¸¤æ¬¡æ’å…¥å‰é¢ä¹Ÿæ²¡æœ‰begin","like_count":3,"discussions":[{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6879,"discussion_content":"ä¸ªäººç†è§£æ­£å› è¿™ä¸¤æ¬¡å¼ é£å‰é¢æ²¡BEGINï¼Œæ ¹æ®äº‹åŠ¡ï¼ˆæ˜¯è¿›è¡Œä¸€æ¬¡å¤„ç†çš„åŸºæœ¬å•å…ƒï¼‰çš„å®šä¹‰ï¼Œè¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚æ‰€ä»¥å½“ç¬¬ä¸€æ¬¡æ’å…¥å¼ é£çš„æ—¶å€™ï¼Œå› ä¸ºæ²¡æœ‰BEGIN,æ‰€ä»¥ä¼šé»˜è®¤è‡ªåŠ¨æäº¤ï¼Œæ­¤æ—¶æ•°æ®è¡¨å°±æœ‰ä¸¤æ¡æ•°æ®äº†ï¼›è€Œå†æ¬¡æ’å…¥åŒæ ·çš„å¼ é£ï¼Œå› ä¸ºä¸äº‹åŠ¡çš„ä¸€è‡´æ€§è¿èƒŒäº†ï¼Œæ‰€ä»¥è¯¥æ¡ä¸ä¼šæ‰§è¡Œï¼Œå°±ä¼šæŠ¥é”™ï¼Œè¿™å°±æ˜¯å¦ä¸€ä¸ªäº‹åŠ¡äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1567152406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1524154,"avatar":"https://static001.geekbang.org/account/avatar/00/17/41/ba/ae028565.jpg","nickname":"YqY","note":"","ucode":"73FB936045DCB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204971,"discussion_content":"ç¬¬äºŒä¸ªå¼ é£æŠ¥é”™ä¸»è¦è¿˜æ˜¯å› ä¸ºä¸»é”®å”¯ä¸€æ€§çš„åŸå› å§ï¼Œä¸¤ä¸ªå¼ é£é‡å¤äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584243223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6879,"ip_address":""},"score":204971,"extra":""}]},{"author":{"id":1186981,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1c/a5/226ce8a7.jpg","nickname":"Noir","note":"","ucode":"985D4C4A5E1E85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391604,"discussion_content":"CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;\nBEGIN;\nINSERT INTO test SELECT &#39;AAA&#39;;\nCOMMIT; -- äº‹åŠ¡ç»“æŸï¼ŒAAA è¢«æäº¤\n\nINSERT INTO test SELECT &#39;BBB&#39;; -- ä¸€ä¸ªäº‹åŠ¡ç»“æŸäº†ï¼Œæäº¤ BBB\nINSERT INTO test SELECT &#39;BBB&#39;; -- è¿™ä¸ªäº‹åŠ¡å¤±è´¥äº†ï¼Œæ— æ³•æäº¤\nROLLBACK; -- å›æ»šä¸Šä¸€ä¸ªäº‹åŠ¡ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ª BBB æ˜¯ä¸Šä¸Šä¸ªäº‹åŠ¡ï¼Œæ— æ³•è¢«å›æ»š\nSELECT * FROM test; -- AAA + BBB","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630548643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1706074,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/08/5a/4d709cf5.jpg","nickname":"Prayã€PF","note":"","ucode":"1E3E4073763490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282393,"discussion_content":"å› ä¸ºè¿™æ˜¯éšå¼çš„äº‹åŠ¡ï¼Œæ¯æ¡insertè¯­å¥éƒ½æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œæ‰§è¡Œå®Œåéƒ½è‡ªåŠ¨æäº¤ï¼Œåˆç”±äºnameä¸ºä¸»é”®ï¼Œä¸èƒ½é‡å¤ï¼Œæ•…ä¼šæŠ¥é”™ï¼Œå›æ»šä¹‹åå°±è¿˜å‰©ä¸€ä¸ªå…³ç¾½ï¼Œå¼ é£\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591962642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1353712,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a7/f0/e3212f18.jpg","nickname":"èƒ¡","note":"","ucode":"3917AFED7701CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5454,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566282568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113260,"user_name":"æ—¶é—´æ˜¯æœ€çœŸçš„ç­”æ¡ˆ","can_delete":false,"product_type":"c1","uid":1183601,"ip_address":"","ucode":"B90F3EF769F865","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","comment_is_top":false,"comment_ctime":1562926483,"is_pvip":false,"replies":[{"id":"41360","content":"é‡‡ç”¨é»˜è®¤çš„autocommit=1;<br>ç¬¬ä¸€ä¸ªå®éªŒåé¢é‚£ä¸ªåº”è¯¥æ˜¯ROLLBACKï¼Œå’Œåé¢çš„å®éªŒéƒ½ä¸€æ ·ï¼Œæœ€åä¸€ä¸ªæ“ä½œåº”è¯¥æ˜¯ROLLBACKã€‚æ‰€ä»¥ç»“æœï¼š<br>å®éªŒ1ï¼šå…³ç¾½<br>å®éªŒ2ï¼šå…³ç¾½ï¼Œå¼ é£<br>å®éªŒ3ï¼šå…³ç¾½<br>","user_name":"ä½œè€…å›å¤","comment_id":113260,"uid":"1306094","ip_address":"","utype":1,"ctime":1563072031,"user_name_real":"cy"}],"discussion_count":4,"race_medal":0,"score":"14447828371","product_id":100029501,"comment_content":"ä¸çŸ¥é“ä½œè€…åœ¨ä»€ä¹ˆæ ·çš„ç¯å¢ƒä¸‹æ“ä½œçš„ï¼Œæˆ‘å®éªŒç»“æœå’Œä½ çš„ä¸ä¸€æ ·ï¼›<br>æˆ‘çš„ MySQL8.0ï¼Œä½¿ç”¨ Navicat 12 æ“ä½œçš„ï¼Œå®éªŒç»“æœéƒ½ä¸ä¸€æ ·<br>ç¬¬ä¸€ä¸ªå®éªŒï¼Œæ•°æ®åº“ä¸­æ’å…¥ä¸¤æ¡æ•°æ®ï¼šå…³ç¾½ï¼Œå¼ é£<br>ç¬¬äºŒä¸ªå®éªŒï¼Œæ•°æ®åº“ä¸­æ’å…¥ä¸¤æ¡æ•°æ®ï¼šå…³ç¾½ï¼Œå¼ é£<br>ç¬¬ä¸‰ä¸ªå®éªŒï¼Œæ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼šå…³ç¾½<br>éº»çƒ¦è€å¸ˆå›å¤ä¸€ä¸‹","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458136,"discussion_content":"é‡‡ç”¨é»˜è®¤çš„autocommit=1;\nç¬¬ä¸€ä¸ªå®éªŒåé¢é‚£ä¸ªåº”è¯¥æ˜¯ROLLBACKï¼Œå’Œåé¢çš„å®éªŒéƒ½ä¸€æ ·ï¼Œæœ€åä¸€ä¸ªæ“ä½œåº”è¯¥æ˜¯ROLLBACKã€‚æ‰€ä»¥ç»“æœï¼š\nå®éªŒ1ï¼šå…³ç¾½\nå®éªŒ2ï¼šå…³ç¾½ï¼Œå¼ é£\nå®éªŒ3ï¼šå…³ç¾½\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563072031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1913261,"avatar":"","nickname":"Cookie123456","note":"","ucode":"F9EF63C38F8976","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218881,"discussion_content":"æˆ‘çš„å’Œä¸Šé¢çš„ä¸€æ ·ï¼Œç¬¬ä¸€ä¸ªå®éªŒä¹Ÿæ˜¯ï¼Œæ•°æ®è¡¨é‡Œé¢åªæœ‰ä¸€ä¸ªå…³äºï¼Œä½†æ˜¯ç”¨Select æŸ¥è¯¢è¯­å¥ï¼Œç»“æœæ˜¾ç¤º å…³ç¾½å’Œå¼ é£ä¸¤ä¸ªæ•°æ®ï¼Œå¤ªç¥å¥‡äº†","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1585710694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1051663,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","nickname":"mickey","note":"","ucode":"8B490C2DDE4010","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2278,"discussion_content":"å®éªŒä¸€ï¼Œå› ä¸ºä½ æ˜¯åœ¨ Navicatä¸­æ‰§è¡Œï¼Œæ‰§è¡Œåˆ°æ’å…¥ç¬¬2ä¸ªâ€œå¼ é£â€æ˜¯å°±æŠ¥é”™äº†ï¼Œåé¢çš„è¯­å¥å°±ä¸æ‰§è¡Œäº†ï¼Œæ‰€ä»¥ä½ èƒ½çœ‹åˆ°1ä¸ªâ€œå¼ é£â€ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1563433854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1624846,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cb/0e/a9fee0b6.jpg","nickname":"é—«åŸå“²","note":"","ucode":"1903E022DF6A6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332869,"discussion_content":"æ‰§è¡Œä¹‹åæ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹ ROLLBACK , å› ä¸ºä¹‹å‰æŠ¥é”™äº†,æ‰€ä»¥ROLLBACK æ²¡æœ‰æ‰§è¡Œå“ªä¸ªå¯¼è‡´çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607361684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113124,"user_name":"JustDoDT","can_delete":false,"product_type":"c1","uid":1127175,"ip_address":"","ucode":"6AF0B80F00EAEF","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","comment_is_top":false,"comment_ctime":1562900224,"is_pvip":false,"replies":[{"id":"41209","content":"ä¸ä¼šçš„ï¼Œé€æ¸ä¼šæœ‰æ„Ÿè§‰ï¼Œå°¤å…¶æ˜¯è·Ÿç€ä»£ç è·‘ä¸€éçš„æ—¶å€™ï¼Œæ•ˆæœæ›´ä½³","user_name":"ä½œè€…å›å¤","comment_id":113124,"uid":"1306094","ip_address":"","utype":1,"ctime":1562920098,"user_name_real":"cy"}],"discussion_count":2,"race_medal":0,"score":"14447802112","product_id":100029501,"comment_content":"çœ‹ç€æ–‡ç« å¬ä¸€éï¼Œç„¶ååœ¨è¯»æ–‡ç« å®è·µä¸€ä¸‹ã€‚ç„¶åæ¶ˆåŒ–æ¶ˆåŒ–ï¼Œç„¶å1ä¸ªå°æ—¶å­¦å®Œä¸€ç¯‡ã€‚<br>æˆ‘æ˜¯ä¸æ˜¯å¾ˆèœã€‚","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458069,"discussion_content":"ä¸ä¼šçš„ï¼Œé€æ¸ä¼šæœ‰æ„Ÿè§‰ï¼Œå°¤å…¶æ˜¯è·Ÿç€ä»£ç è·‘ä¸€éçš„æ—¶å€™ï¼Œæ•ˆæœæ›´ä½³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562920098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375984,"discussion_content":"ä¸€ä¸ªå°æ—¶å­¦å®Œä¸€ç¯‡ä¸ç®—æ…¢æŠŠ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621913609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143943,"user_name":"çŸ¥è¡Œåˆä¸€","can_delete":false,"product_type":"c1","uid":1532274,"ip_address":"","ucode":"70649648B4D0C6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/3Sltwd1ib5QAd2fq7UJSZ2EickmfEn9R2gl5Ot61ZPpEialyxCXiadp8ofD16oSc4QbTSOWgTvSVHPthaGibendgd3Q/132","comment_is_top":false,"comment_ctime":1571811275,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"10161745867","product_id":100029501,"comment_content":"ä¸ºä»€ä¹ˆåœ¨navicatä¸­ï¼Œæˆ‘å’Œè€å¸ˆçš„ä»£ç ä¸€è‡´ã€‚ä½†æ˜¯ï¼Œå®éªŒç»“æœï¼Œæ€»æ˜¯ä¸åŒã€‚ å¼ é£ï¼Œæ¯æ¬¡éƒ½è¢«å­˜è¿›å»äº†ã€‚å¾ˆä¸ç†è§£ï¼èƒ½è¯´è¯´å—ï¼Ÿ è°¢è°¢","like_count":3,"discussions":[{"author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333093,"discussion_content":"å¯èƒ½è¿™ä¸ªå¸–å­å¯¹ä½ æœ‰å¸®åŠ©:https://stackoverflow.com/questions/31072074/unable-to-start-simple-transaction-in-sqlite","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607431564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1149914,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIk46cor5XVFTPZbPOnb7pViabgy450pobo46hRHFQz5nR5ocYRKIzC8vShic36vwa553H4Vj50x5wA/132","nickname":"å†²","note":"","ucode":"4191C8A4DF3840","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42019,"discussion_content":"ä¸€æ ·  ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572571722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1717108,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/33/74/44dd4799.jpg","nickname":"åŒ…çº¸è„¸ä¹‹ç‹","note":"","ucode":"D1D539F56555B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40092,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ï¼Œnavicat æœ‰æ¯’ï¼Œä½¿ç”¨ mysql å‘½ä»¤è¡Œæ¨¡å¼çš„è¯å€’æ˜¯å’Œè€å¸ˆçš„å®éªŒç»“æœä¸€è‡´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572077114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113887,"user_name":"linus","can_delete":false,"product_type":"c1","uid":1246600,"ip_address":"","ucode":"910606671D1706","user_header":"https://static001.geekbang.org/account/avatar/00/13/05/88/0a1f1b1d.jpg","comment_is_top":false,"comment_ctime":1563179823,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"10153114415","product_id":100029501,"comment_content":"DROP TABLE test;<br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>set autocommit=0;<br>BEGIN;<br>INSERT INTO test SELECT &#39;aaa&#39;;<br>COMMIT;<br>BEGIN;<br>INSERT INTO test SELECT &#39;bbb&#39;;<br>INSERT INTO test SELECT &#39;bbb&#39;;<br>ROLLBACK;<br>SELECT * FROM test;<br><br>ä¸ºä»€ä¹ˆæˆ‘çš„ç»“æœè¿˜æ˜¯<br> aaa<br> bbb","like_count":3,"discussions":[{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6885,"discussion_content":"æ²¡æœ‰å•Š æˆ‘è¿è¡Œä½ è¿™ä¸ªç¨‹åºåç»“æœå‡ºæ¥å°±æ˜¯ aaa","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567153818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1524154,"avatar":"https://static001.geekbang.org/account/avatar/00/17/41/ba/ae028565.jpg","nickname":"YqY","note":"","ucode":"73FB936045DCB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204973,"discussion_content":"æˆ‘çš„å°±æ˜¯åªæœ‰aaa  åº”è¯¥æ˜¯ä½ è®¾ç½®é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584243403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016284,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/81/dc/a1662051.jpg","nickname":"Bruce","note":"","ucode":"61E439EEF865A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3091,"discussion_content":"éš¾é“æ˜¯ä½ çš„set autocommitæ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564154406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113474,"user_name":"æŸ”è½¯çš„èƒ–","can_delete":false,"product_type":"c1","uid":1573853,"ip_address":"","ucode":"32B0CDA0E03BC5","user_header":"https://static001.geekbang.org/account/avatar/00/18/03/dd/e9f4c243.jpg","comment_is_top":false,"comment_ctime":1563026039,"is_pvip":false,"replies":[{"id":"41346","content":"åœ¨MySQLä¸­BEGINç”¨äºå¼€å¯äº‹åŠ¡ï¼Œå¯¹äºè¿ç»­BEGINçš„æƒ…å†µï¼Œå¼€å¯äº†ç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿˜æ²¡æœ‰è¿›è¡ŒCOMMITæäº¤ï¼Œè€Œç›´æ¥è¿›è¡Œç¬¬äºŒä¸ªäº‹åŠ¡çš„BEGINï¼Œè¿™æ—¶æ•°æ®åº“ä¼šéšå¼çš„å¸®åŠ©COMMITç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åè¿›å…¥åˆ°ç¬¬äºŒä¸ªäº‹åŠ¡<br>","user_name":"ä½œè€…å›å¤","comment_id":113474,"uid":"1306094","ip_address":"","utype":1,"ctime":1563068418,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"10152960631","product_id":100029501,"comment_content":"å¦‚æœâ€œINSERT INTO test SELECT &#39;å…³ç¾½&#39;;â€ä¹‹åæ²¡æœ‰æ‰§è¡ŒCOMMITï¼Œç»“æœåº”è¯¥æ˜¯ç©ºã€‚<br>ä½†æ˜¯æˆ‘æ‰§è¡Œå‡ºæ¥çš„ç»“æœæ˜¯&#39;å…³ç¾½&#39;ï¼Œä¸ºä»€ä¹ˆROLLBACKæ²¡æœ‰å…¨éƒ¨å›é€€ã€‚<br><br>ä»£ç å¦‚ä¸‹<br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>ROLLBACK;<br>SELECT * FROM test;<br>","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458238,"discussion_content":"åœ¨MySQLä¸­BEGINç”¨äºå¼€å¯äº‹åŠ¡ï¼Œå¯¹äºè¿ç»­BEGINçš„æƒ…å†µï¼Œå¼€å¯äº†ç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿˜æ²¡æœ‰è¿›è¡ŒCOMMITæäº¤ï¼Œè€Œç›´æ¥è¿›è¡Œç¬¬äºŒä¸ªäº‹åŠ¡çš„BEGINï¼Œè¿™æ—¶æ•°æ®åº“ä¼šéšå¼çš„å¸®åŠ©COMMITç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åè¿›å…¥åˆ°ç¬¬äºŒä¸ªäº‹åŠ¡\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563068418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113225,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1562920382,"is_pvip":false,"replies":[{"id":"41351","content":"å¯ä»¥çš„ éšç€æˆ‘ä»¬å¯¹äº‹åŠ¡ç†è§£çš„æ·±å…¥ï¼Œå¯¹ACIDè¿™å››ä¸ªç‰¹æ€§ä¹Ÿä¼šäº†è§£çš„è¶Šæ¥è¶Šå…¨é¢","user_name":"ä½œè€…å›å¤","comment_id":113225,"uid":"1306094","ip_address":"","utype":1,"ctime":1563069177,"user_name_real":"cy"}],"discussion_count":1,"race_medal":1,"score":"10152854974","product_id":100029501,"comment_content":"ACID å¯ä»¥è¯´æ˜¯äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ï¼Œåœ¨è¿™å››ä¸ªç‰¹æ€§ä¸­ï¼ŒåŸå­æ€§æ˜¯åŸºç¡€ï¼Œéš”ç¦»æ€§æ˜¯æ‰‹æ®µï¼Œä¸€è‡´æ€§æ˜¯çº¦æŸæ¡ä»¶ï¼Œè€ŒæŒä¹…æ€§æ˜¯æˆ‘ä»¬çš„ç›®çš„ã€‚<br>------ä»¥åé¢è¯•å°±è¯´è¿™ä¸€å¥ï¼Œå¦‚æœé—®ACID","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458117,"discussion_content":"å¯ä»¥çš„ éšç€æˆ‘ä»¬å¯¹äº‹åŠ¡ç†è§£çš„æ·±å…¥ï¼Œå¯¹ACIDè¿™å››ä¸ªç‰¹æ€§ä¹Ÿä¼šäº†è§£çš„è¶Šæ¥è¶Šå…¨é¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563069177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113212,"user_name":"æˆ‘ä¸æ˜¯çŸ¿é•¿","can_delete":false,"product_type":"c1","uid":1232421,"ip_address":"","ucode":"6E31D775AA8D03","user_header":"https://static001.geekbang.org/account/avatar/00/12/ce/25/14a648ae.jpg","comment_is_top":false,"comment_ctime":1562916721,"is_pvip":true,"replies":[{"id":"41352","content":"è°¢è°¢ è‡ªå·±å¯ä»¥è·‘ä¸‹ä»£ç  å¤šåŠ æ·±ç†è§£","user_name":"ä½œè€…å›å¤","comment_id":113212,"uid":"1306094","ip_address":"","utype":1,"ctime":1563069208,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"10152851313","product_id":100029501,"comment_content":"å­¦ä¹ äº†","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458113,"discussion_content":"è°¢è°¢ è‡ªå·±å¯ä»¥è·‘ä¸‹ä»£ç  å¤šåŠ æ·±ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563069208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113092,"user_name":"hlz-123","can_delete":false,"product_type":"c1","uid":1433586,"ip_address":"","ucode":"B7E5EF0C260BD2","user_header":"","comment_is_top":false,"comment_ctime":1562896082,"is_pvip":false,"replies":[{"id":"41160","content":"å¯¹çš„ çœ‹ä½ çš„MySQLéƒ½æ”¯æŒå“ªäº›å­˜å‚¨å¼•æ“ï¼Œä¸€èˆ¬æ˜¯InnoDBå’ŒBDBæ”¯æŒäº‹åŠ¡","user_name":"ä½œè€…å›å¤","comment_id":113092,"uid":"1306094","ip_address":"","utype":1,"ctime":1562900190,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"10152830674","product_id":100029501,"comment_content":"1.åœ¨MySQLä¸­ï¼Œåªæœ‰InnoDBå¼•æ“æ”¯æŒäº‹åŠ¡ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤SHOW ENGINESæŸ¥çœ‹<br>2.äº‹åŠ¡çš„ç‰¹æ€§ï¼Œå¯ä»¥ç†è§£ä¸ºå®Œæ•´æ€§ï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰æŒ‡ä»¤è¦ä¹ˆå…¨éƒ¨æœ‰æ•ˆï¼Œè¦ä¹ˆå…¨éƒ¨å¤±æ•ˆï¼Œ<br>                       å¦‚æœæœ‰ä¸€éƒ¨åˆ†è¯­å¥æˆåŠŸï¼Œæœ‰ä¸€éƒ¨åˆ†è¯­å¥å¤±è´¥ï¼Œæ•°æ®åº“ä¹Ÿä¼šæ’¤é”€æˆåŠŸçš„è¯­å¥æ•ˆæœï¼Œ<br>                       å›æ»šåˆ°è¯¥äº‹åŠ¡æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458051,"discussion_content":"å¯¹çš„ çœ‹ä½ çš„MySQLéƒ½æ”¯æŒå“ªäº›å­˜å‚¨å¼•æ“ï¼Œä¸€èˆ¬æ˜¯InnoDBå’ŒBDBæ”¯æŒäº‹åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562900190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162516,"user_name":"tttttttttttt_SL","can_delete":false,"product_type":"c1","uid":1786450,"ip_address":"","ucode":"86F65220247250","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/60IQmdia47hpG35UJwqXuL52DdibibQJ5vkOxbjP6hjdoLpZsfDPOLYZiar9M0QAiaCZckVl8ZENjMnKmFlvpv9Ur2w/132","comment_is_top":false,"comment_ctime":1576547841,"is_pvip":false,"replies":[{"id":"62567","content":"åŠ æ²¹~","user_name":"ä½œè€…å›å¤","comment_id":162516,"uid":"1306094","ip_address":"","utype":1,"ctime":1577068221,"user_name_real":"cy"}],"discussion_count":1,"race_medal":0,"score":"5871515137","product_id":100029501,"comment_content":"çœ‹äº†å››äº”éæ‡‚äº†","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478074,"discussion_content":"åŠ æ²¹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577068221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116606,"user_name":"Ronnyz","can_delete":false,"product_type":"c1","uid":1488280,"ip_address":"","ucode":"9F34527B1D343D","user_header":"https://static001.geekbang.org/account/avatar/00/16/b5/98/ffaf2aca.jpg","comment_is_top":false,"comment_ctime":1563880008,"is_pvip":false,"replies":[{"id":"63642","content":"æ•´ç†çš„ä¸é”™","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577526259,"ip_address":"","comment_id":116606,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858847304","product_id":100029501,"comment_content":"ä½œä¸šï¼š<br>SHOW ENGINES; æ˜¾ç¤ºçš„å¼•æ“æœ‰ï¼šMEMORYã€MRG_MYISAMã€CSV ã€FEDERATED ã€PERFORMANCE_SCHEMAã€ MyISAM  ã€InnoDB ã€BLACKHOLE ã€ARCHIVE ï¼Œå…¶ä¸­åªæœ‰InnoDB Supports transactions<br>äº‹åŠ¡çš„ä¿å­˜ç‚¹å°±ç›¸å½“äºå­˜æ¡£å§","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459608,"discussion_content":"æ•´ç†çš„ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577526259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113375,"user_name":"Better me","can_delete":false,"product_type":"c1","uid":1261959,"ip_address":"","ucode":"CADF08D357489A","user_header":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","comment_is_top":false,"comment_ctime":1562987847,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5857955143","product_id":100029501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ•°æ®åº“äº‹åŠ¡çš„éšå¼æäº¤å’Œæ˜¾å¼æäº¤åˆ†åˆ«æœ‰ä»€ä¹ˆä½¿ç”¨åœºæ™¯ï¼Œèƒ½å¦å…·ä½“ä¸¾ä¾‹è¯´æ˜ä¸‹ã€‚","like_count":1,"discussions":[{"author":{"id":1585659,"avatar":"https://static001.geekbang.org/account/avatar/00/18/31/fb/e5918d39.jpg","nickname":"é£æœº","note":"","ucode":"D0CA3AE2B50686","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2303,"discussion_content":"ä½ å¯ä»¥è®¤ä¸º: æ›´æ”¹äº†æ•°æ®åº“å¹¶ä½¿ç”¨äº†commitçš„å°±æ˜¯æ˜¾å¼æäº¤,æ›´æ”¹äº†æ•°æ®åº“ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨commitå°±æ˜¯éšå¼æäº¤","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563445973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113307,"user_name":"å¤§æ–Œ","can_delete":false,"product_type":"c1","uid":1002183,"ip_address":"","ucode":"1434C2B0A29135","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/c7/ec18673b.jpg","comment_is_top":false,"comment_ctime":1562941717,"is_pvip":false,"replies":[{"id":"41347","content":"å¯¹çš„ ç†è§£æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1563068481,"ip_address":"","comment_id":113307,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857909013","product_id":100029501,"comment_content":"åœ¨mysqlä¸­ç”¨çš„æœ€å¤šçš„å­˜å‚¨å¼•æ“æœ‰ï¼šinnodbï¼Œbdbï¼Œmyisam ,memory ç­‰ã€‚å…¶ä¸­innodbå’Œbdbæ”¯æŒäº‹åŠ¡è€Œmyisamç­‰ä¸æ”¯æŒäº‹åŠ¡ã€‚<br><br>æŸ¥çœ‹å‘½ä»¤ï¼šshow engines<br><br>å¯¹äº‹åŠ¡ç‰¹æ€§çš„ç†è§£ï¼šåŸå­æ€§æ˜¯åŸºç¡€ï¼Œéš”ç¦»æ€§æ˜¯æ‰‹æ®µï¼Œä¸€è‡´æ€§æ˜¯çº¦æŸæ¡ä»¶ï¼ŒæŒä¹…æ€§æ˜¯ç›®çš„","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458160,"discussion_content":"å¯¹çš„ ç†è§£æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563068481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113133,"user_name":"é­é¢–çª","can_delete":false,"product_type":"c1","uid":1184964,"ip_address":"","ucode":"097544C71EBDA7","user_header":"https://static001.geekbang.org/account/avatar/00/12/14/c4/e354d8ba.jpg","comment_is_top":false,"comment_ctime":1562901678,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857868974","product_id":100029501,"comment_content":"åœ¨æˆ‘çš„å®éªŒä¸­ï¼Œäº‹åŠ¡å‡ºç°é”™è¯¯æ˜¯ä¸ä¼šè‡ªåŠ¨å›æ»šï¼Œå¿…é¡»æ˜¾å¼æœ‰ ROLLBACK å‘½ä»¤ã€‚å¦‚æœä½¿ç”¨sql clientå·¥å…·ï¼Œé‚£å¾ˆå¯èƒ½æ˜¯å·¥å…·è¿›è¡Œäº†åˆ¤æ–­ï¼Œå¹¶åšäº†è‡ªåŠ¨å¤„ç†ã€‚å¦‚æœåœ¨mysql clientçš„å‘½ä»¤è¡Œä¸­ï¼Œä¸ä¼šé‡é”™è‡ªåŠ¨å›æ»šã€‚","like_count":1},{"had_liked":false,"id":113040,"user_name":"mocobk","can_delete":false,"product_type":"c1","uid":1444632,"ip_address":"","ucode":"E82B6DF738BCBB","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/18/b82d4617.jpg","comment_is_top":false,"comment_ctime":1562891286,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5857858582","product_id":100029501,"comment_content":"<br>Mysqlä¸­ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”¨åˆ°æ˜¾ç¤ºäº‹åŠ¡ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1021539,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","nickname":"æé±¼çš„æ¬ç –å¥‡","note":"","ucode":"2FD194C4DA26E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1938,"discussion_content":"è¿™ä¸ªä¸»è¦å‡ºç°åœ¨ä¸šåŠ¡æ“ä½œä¸­ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563109951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345336,"user_name":"Geek_dc1862","can_delete":false,"product_type":"c1","uid":1888016,"ip_address":"","ucode":"DC3B41D6BC89D4","user_header":"","comment_is_top":false,"comment_ctime":1652196650,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652196650","product_id":100029501,"comment_content":"æ€ä¹ˆæŸ¥çœ‹mysqlæ•°æ®åº“å‚æ•°è®¾ç½®æƒ…å†µå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":343065,"user_name":"Geek_77a67c","can_delete":false,"product_type":"c1","uid":2985088,"ip_address":"","ucode":"735E6C5E0865EC","user_header":"","comment_is_top":false,"comment_ctime":1650615362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650615362","product_id":100029501,"comment_content":"åœ¨mysqlé‡Œé¢é»˜è®¤æ˜¯è‡ªåŠ¨æäº¤äº‹åŠ¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€æ¡dmlè¯­å¥ä¸€ä¸ªä¼šè‡ªåŠ¨æäº¤çš„äº‹åŠ¡ï¼Œåœ¨Oracleé‡Œé¢è‡ªåŠ¨æäº¤äº‹åŠ¡æ˜¯é»˜è®¤å…³é—­çš„ï¼Œæ‰€ä»¥è¦æ‰‹åŠ¨å¼€å¯äº‹åŠ¡å¹¶æ‰‹åŠ¨ç»“æŸäº‹åŠ¡<br>","like_count":0},{"had_liked":false,"id":342303,"user_name":"PCC","can_delete":false,"product_type":"c1","uid":1330305,"ip_address":"","ucode":"BA27B7737E232B","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/81/34398512.jpg","comment_is_top":false,"comment_ctime":1650182031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650182031","product_id":100029501,"comment_content":"æœ‰ä¸ªé—®é¢˜ä¸æ˜¯å¾ˆæ˜ç™½ï¼šå‡ ä¸ªå®éªŒä¸­æœ€åéƒ½æ˜¾å¼å†™ROLLBACKï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬çŸ¥é“ç¬¬äºŒæ¬¡æ’å…¥â€œå¼ é£â€åæœ‰å…«ä¹ä¼šå¤±è´¥æ‰€ä»¥æ˜¾å¼åœ°å†™å‡ºæ¥å—ï¼Ÿå¦‚æœæœ€åä¸å†™ROLLBACKä¼šæ€æ ·ï¼Ÿè€Œä¸”å¦‚æœä¸ç¡®å®šå‰é¢çš„è¯­å¥æ‰§è¡Œæ˜¯å¦ä¼šå¤±è´¥æ—¶ï¼Œå†™äº†COMMITï¼Œä¸‡ä¸€æ‰§è¡Œå¤±è´¥ï¼Œå¤±è´¥çš„äº‹åŠ¡ä¼šè‡ªåŠ¨å›æ»šå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":339703,"user_name":"ç¨‹åºå‘˜å°é…’æ —å­","can_delete":false,"product_type":"c1","uid":1507507,"ip_address":"","ucode":"3EB088DDFC1C8B","user_header":"https://static001.geekbang.org/account/avatar/00/17/00/b3/fd62aa8f.jpg","comment_is_top":false,"comment_ctime":1648301418,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1648301418","product_id":100029501,"comment_content":"å­¦ä¹ äº†ä»¥åè¦å¤šå¤šç»ƒä¹ ï¼Œä¸ç„¶ç†è§£å¾—å¤šæ·±åˆ»éƒ½ä¼šå¿˜","like_count":0},{"had_liked":false,"id":338404,"user_name":"Geek_4e68bc","can_delete":false,"product_type":"c1","uid":2608672,"ip_address":"","ucode":"8EFF07E4D221AA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKX6QqquojicLSgpgu88MibWkuXfIQcqlgoWReZ97bfygwThIHWqUmJyjGlOhJj1Be3tA1WFkJkSjFw/132","comment_is_top":false,"comment_ctime":1647487123,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647487123","product_id":100029501,"comment_content":"è€å¸ˆï¼Œæˆ‘å‘ç°savepointåªå¯ä»¥åœ¨å½“å‰äº‹åŠ¡ä¸­ä½¿ç”¨ã€‚å¦‚æœæˆ‘å¸Œæœ›åœ¨ä¸åŒäº‹åŠ¡ä¹‹é—´ä¹Ÿè®¾ç½®ä¿å­˜ç‚¹ï¼Œåº”è¯¥æ€ä¹ˆè®¾ç½®å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":337587,"user_name":"å‘¨ä¿Š","can_delete":false,"product_type":"c1","uid":2723993,"ip_address":"","ucode":"018FF939002C0B","user_header":"https://static001.geekbang.org/account/avatar/00/29/90/99/24cccca5.jpg","comment_is_top":false,"comment_ctime":1646904585,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646904585","product_id":100029501,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½<br>åœ¨æ–‡ç« ä¸­ä½ ä¹‹å‰è¯´æ˜¯mysqlé»˜è®¤è‡ªåŠ¨æäº¤ï¼Œä½†æ˜¯åœ¨åé¢çš„æè¿°ä¸­ï¼Œcompletion = 0æ‚¨è¿™è¾¹è¯´æ˜¯é»˜è®¤æƒ…å†µï¼Œä½†æ˜¯completion = 0 æ˜¯å…³é—­è‡ªåŠ¨æäº¤ï¼Œè¿™é‡Œæ˜¯ä¸æ˜¯æœ‰ç‚¹çŸ›ç›¾","like_count":0},{"had_liked":false,"id":334237,"user_name":"H","can_delete":false,"product_type":"c1","uid":2370639,"ip_address":"","ucode":"D932D7F9DAFDB8","user_header":"https://static001.geekbang.org/account/avatar/00/24/2c/4f/be77ceac.jpg","comment_is_top":false,"comment_ctime":1644824639,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644824639","product_id":100029501,"comment_content":"æ²¡æœ‰ç†è§£å‰ä¸¤ä¸ªç¤ºä¾‹çš„äº‹åŠ¡æ•°é‡ï¼Œç™¾åº¦çœ‹äº†ä¸‹<br>â‘ æ‰‹åŠ¨å¼€å¯æ‰‹åŠ¨æäº¤ï¼šå½“ç”¨æˆ·æ‰§è¡Œstart transactionå‘½ä»¤æ—¶ï¼ˆäº‹åŠ¡åˆå§‹åŒ–ï¼‰ï¼Œä¸€ä¸ªäº‹åŠ¡å¼€å¯ï¼Œå½“ç”¨æˆ·æ‰§è¡Œcommitå‘½ä»¤æ—¶å½“å‰äº‹åŠ¡æäº¤ã€‚ä»ç”¨æˆ·æ‰§è¡Œstart transactionå‘½ä»¤åˆ°ç”¨æˆ·æ‰§è¡Œcommitå‘½ä»¤ä¹‹é—´çš„ä¸€ç³»åˆ—æ“ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡å‘¨æœŸã€‚è‹¥ä¸æ‰§è¡Œcommitå‘½ä»¤ï¼Œç³»ç»Ÿåˆ™é»˜è®¤äº‹åŠ¡å›æ»šã€‚<br><br>â‘¡è‡ªåŠ¨å¼€å¯è‡ªåŠ¨æäº¤ï¼šå¦‚æœç”¨æˆ·åœ¨å½“å‰æƒ…å†µä¸‹ï¼ˆå‚æ•°autocommit=1ï¼‰æœªæ‰§è¡Œstart transactionå‘½ä»¤è€Œå¯¹æ•°æ®åº“è¿›è¡Œäº†æ“ä½œï¼Œç³»ç»Ÿåˆ™é»˜è®¤ç”¨æˆ·å¯¹æ•°æ®åº“çš„æ¯ä¸€ä¸ªæ“ä½œä¸ºä¸€ä¸ªå­¤ç«‹çš„äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·æ¯è¿›è¡Œä¸€æ¬¡æ“ä½œç³»éƒ½ä¼šå³æ—¶æäº¤æˆ–è€…å³æ—¶å›æ»šã€‚è¿™ç§æƒ…å†µä¸‹ç”¨æˆ·çš„æ¯ä¸€ä¸ªæ“ä½œéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡å‘¨æœŸã€‚<br><br>ç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€ä¸ªä»…æœ‰2ä¸ªäº‹åŠ¡æ˜¯å› ä¸ºä½¿ç”¨äº†beginï¼Œæ˜¾ç¤ºå¼€å¯åˆ°ç»“æŸï¼Œæ˜¯ä¸æ˜¯å¿…é¡»æœ‰commitæˆ–rollback<br>ç¬¬äºŒä¸ªåº”è¯¥æœ‰3ä¸ªäº‹åŠ¡ï¼Œæ²¡æœ‰æ˜¾ç¤ºå¼€å¯äº‹åŠ¡ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªæ“ä½œéƒ½ä¼šéšå¼çš„å¼€å¯ä¸€ä¸ªäº‹åŠ¡<br><br>è¿™æ ·ç†è§£å¯¹å—","like_count":0},{"had_liked":false,"id":322743,"user_name":"Fortune","can_delete":false,"product_type":"c1","uid":1508654,"ip_address":"","ucode":"6B9465AC996523","user_header":"https://static001.geekbang.org/account/avatar/00/17/05/2e/5a6b6b6e.jpg","comment_is_top":false,"comment_ctime":1637572979,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637572979","product_id":100029501,"comment_content":"Mysqlçš„éšå¼äº‹åŠ¡ä½“ç°æœ‰é‚£äº›å‘¢","like_count":0},{"had_liked":false,"id":321802,"user_name":"å°æŸ’Â·ä»£è´­","can_delete":false,"product_type":"c1","uid":2762791,"ip_address":"","ucode":"94C67F0203BAF2","user_header":"https://static001.geekbang.org/account/avatar/00/2a/28/27/6246dc0d.jpg","comment_is_top":false,"comment_ctime":1637049769,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637049769","product_id":100029501,"comment_content":"MySQL [heros]&gt; DROP TABLE test;<br>Query OK, 0 rows affected (0.01 sec)<br><br>MySQL [heros]&gt; CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>Query OK, 0 rows affected (0.01 sec)<br><br>MySQL [heros]&gt; BEGIN;<br>Query OK, 0 rows affected (0.00 sec)<br><br>MySQL [heros]&gt; INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>MySQL [heros]&gt; SELECT * FROM test;<br>+--------+<br>| name   |<br>+--------+<br>| å…³ç¾½   |<br>+--------+<br>1 row in set (0.00 sec)<br><br>MySQL [heros]&gt; INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>MySQL [heros]&gt; SELECT * FROM test;<br>+--------+<br>| name   |<br>+--------+<br>| å…³ç¾½   |<br>| å¼ é£   |<br>+--------+<br>2 rows in set (0.00 sec)<br><br>MySQL [heros]&gt; INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>ERROR 1062 (23000): Duplicate entry &#39;å¼ é£&#39; for key &#39;PRIMARY&#39;<br>MySQL [heros]&gt; SELECT * FROM test;<br>+--------+<br>| name   |<br>+--------+<br>| å…³ç¾½   |<br>| å¼ é£   |<br>+--------+<br>2 rows in set (0.00 sec)<br><br>MySQL [heros]&gt; ROLLBACK;<br>Query OK, 0 rows affected (0.00 sec)<br><br>MySQL [heros]&gt; SELECT * FROM test;<br>Empty set (0.00 sec)<br><br>ä»è¿™æ®µçœ‹å‡ºï¼ŒCOMMITä¸ä»…æ˜¯æäº¤äº‹åŠ¡ï¼ŒåŒæ—¶ä¹Ÿç»™è¿™ä¸ªäº‹åŠ¡ç”»ä¸€ä¸ªENDï¼Œè¿™æ˜¯æˆ‘çš„ç†è§£ã€‚","like_count":0},{"had_liked":false,"id":321799,"user_name":"å°æŸ’Â·ä»£è´­","can_delete":false,"product_type":"c1","uid":2762791,"ip_address":"","ucode":"94C67F0203BAF2","user_header":"https://static001.geekbang.org/account/avatar/00/2a/28/27/6246dc0d.jpg","comment_is_top":false,"comment_ctime":1637049335,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637049335","product_id":100029501,"comment_content":"MYSQLé»˜è®¤çŠ¶æ€ä¸‹ï¼Œç‰ˆæœ¬5.7.34<br><br>MySQL [(none)]&gt; SELECT @@autocommit;<br>+--------------+<br>| @@autocommit |<br>+--------------+<br>|            1 |<br>+--------------+<br>1 row in set (0.00 sec)<br><br>MySQL [(none)]&gt; use heros;<br>Database changed<br>MySQL [heros]&gt; DROP TABLE test;<br>Query OK, 0 rows affected (0.01 sec)<br><br>MySQL [heros]&gt; CREATE TABLE test(name VARCHAR(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>Query OK, 0 rows affected (0.01 sec)<br><br>MySQL [heros]&gt; BEGIN;<br>Query OK, 0 rows affected (0.00 sec)<br><br>MySQL [heros]&gt; INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>MySQL [heros]&gt; SELECT * FROM test;<br>+--------+<br>| name   |<br>+--------+<br>| å…³ç¾½   |<br>+--------+<br>1 row in set (0.00 sec)<br><br>MySQL [heros]&gt; BEGIN;<br>Query OK, 0 rows affected (0.00 sec)<br><br>MySQL [heros]&gt; INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>MySQL [heros]&gt; SELECT * FROM test;<br>+--------+<br>| name   |<br>+--------+<br>| å…³ç¾½   |<br>| å¼ é£   |<br>+--------+<br>2 rows in set (0.00 sec)<br><br>MySQL [heros]&gt; INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>ERROR 1062 (23000): Duplicate entry &#39;å¼ é£&#39; for key &#39;PRIMARY&#39;<br>MySQL [heros]&gt; ROLLBACK;<br>Query OK, 0 rows affected (0.00 sec)<br><br>MySQL [heros]&gt; SELECT * FROM test;<br>+--------+<br>| name   |<br>+--------+<br>| å…³ç¾½   |<br>+--------+<br>1 row in set (0.00 sec)<br><br>BEGINå¼€å¯ä¸€ä¸ªäº‹åŠ¡","like_count":0},{"had_liked":false,"id":318254,"user_name":"Geek_09c5c4","can_delete":false,"product_type":"c1","uid":2737389,"ip_address":"","ucode":"1A3981FC18E70A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/WFcMMkjhJEorWesqXk1foJoIicIl7Y4J0PLibOouXSyxcqZICnDg2fiaHCEWJYJnNyaVZ09Iso53ibKGksHiaib5JVbg/132","comment_is_top":false,"comment_ctime":1635216996,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1635216996","product_id":100029501,"comment_content":"æˆ‘ç”¨çš„mysqlï¼Œä¸‰ä¸ªè¿è¡Œåéƒ½æ˜¯å…³ç¾½å’Œå¼ é£ï¼Œçœ‹äº†çœ‹æ—¶é—´æˆ³ï¼Œæ˜¯å¦æ˜¯éšç€mysqlçš„æ›´æ–°ï¼Œè¿™ç¯‡å·²ç»ä¸é€‚ç”¨äº†å‘¢","like_count":0,"discussions":[{"author":{"id":1897818,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f5/5a/64e33940.jpg","nickname":"ä¸€æ ‘åŠå“­","note":"","ucode":"1DB53D04F43DD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587322,"discussion_content":"ä¸€æ ·ï¼Œæœ‰æ²¡æœ‰å¤§ç¥è§£ç­”ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662975598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317691,"user_name":"Geek_28670d","can_delete":false,"product_type":"c1","uid":2814926,"ip_address":"","ucode":"7BA10C23E56F1E","user_header":"","comment_is_top":false,"comment_ctime":1634891757,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634891757","product_id":100029501,"comment_content":"äº‹åŠ¡æ˜¯æŒ‡æ•°æ®åº“ä¸ºäº†å®ŒæˆæŸä¸€ä»¶äº‹æƒ…ï¼Œè¦åšçš„ä¸€ç»„æ“ä½œã€‚å®ƒå…·æœ‰å¦‚ä¸‹å››ä¸ªç‰¹æ€§ï¼š<br>1.åŸå­æ€§ï¼Œäº‹åŠ¡æ˜¯ä¸å¯åˆ†éš”çš„ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸè¦ä¹ˆå…¨éƒ¨å¤±è´¥;<br>2.ä¸€è‡´æ€§ï¼Œäº‹åŠ¡çš„æäº¤æˆ–è€…å›æ»šåï¼Œæ•°æ®åº”æ»¡è¶³æ•°æ®åº“çš„çº¦æŸè§„åˆ™ï¼›<br>3.éš”ç¦»æ€§ï¼Œäº‹åŠ¡ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œå®ƒä»¬æ‰§è¡Œäº’ä¸å½±å“ï¼›<br>4.æŒä¹…æ€§ï¼Œäº‹åŠ¡æäº¤åæ˜¯æ°¸ä¹…ä¿å­˜çš„ï¼Œå³ä½¿å®•æœºä¹Ÿä¸ä¼šä¸¢å¤±ã€‚","like_count":0},{"had_liked":false,"id":304272,"user_name":"å¢¨æŸ“","can_delete":false,"product_type":"c1","uid":2702673,"ip_address":"","ucode":"7822312E4675A5","user_header":"https://static001.geekbang.org/account/avatar/00/29/3d/51/f5b7558c.jpg","comment_is_top":false,"comment_ctime":1627310923,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627310923","product_id":100029501,"comment_content":"è¯·é—®æœ‰é‡Œé¢æœ‰Oracleç‰ˆæœ¬çš„å—","like_count":0},{"had_liked":false,"id":266663,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1607431457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607431457","product_id":100029501,"comment_content":"åªæœ‰InnoDBæ”¯æŒ,é€šè¿‡show enginesæ¥æŸ¥çœ‹.<br>äº‹åŠ¡çš„ç‰¹æ€§:<br>A:åŸå­æ€§,è¦ä¹ˆå…¨åš,è¦ä¹ˆå…¨ä¸åš,ä¸ä¼šå­˜åœ¨åšä¸€éƒ¨åˆ†çš„æƒ…å†µ.<br>C:ä¸€è‡´æ€§,æ‰§è¡Œå‰å’Œæ‰§è¡Œå,ç»“æœæ˜¯ä¸€è‡´çš„,æ¯”å¦‚è½¬è´¦å‰å,åŒæ–¹çš„é‡‘é¢æ€»é‡æ˜¯ä¸€è‡´çš„,ä¸èƒ½å‡ºç°é’±ä¸ç¿¼è€Œé£çš„æƒ…å†µ.<br>I:éš”ç¦»æ€§,æˆ‘çš„äº‹åŠ¡æäº¤å¯¹ä½ æ¥è¯´æ˜¯ä¸å¯è§çš„,ç›¸äº’ä¹‹é—´ä¸ä¼šå¹²æ‰°.<br>D:æŒä¹…æ€§,æäº¤ä¹‹åå¯¹æ•°æ®çš„ä¿®æ”¹æ˜¯æŒä¹…çš„,å³ä½¿è¿‡ç¨‹ä¸­å‡ºç°å´©æºƒçš„æƒ…å†µ,ä¹Ÿå¯ä»¥é€šè¿‡æ—¥å¿—è¿›è¡Œæ¢å¤.","like_count":0},{"had_liked":false,"id":256915,"user_name":"ç››è‰³æ˜","can_delete":false,"product_type":"c1","uid":1132347,"ip_address":"","ucode":"E4C1C699572C44","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/3b/15e4490f.jpg","comment_is_top":false,"comment_ctime":1603782545,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603782545","product_id":100029501,"comment_content":"1. Innodb<br>2.show engines","like_count":0},{"had_liked":false,"id":253158,"user_name":"ç››è‰³æ˜","can_delete":false,"product_type":"c1","uid":1132347,"ip_address":"","ucode":"E4C1C699572C44","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/3b/15e4490f.jpg","comment_is_top":false,"comment_ctime":1602638741,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602638741","product_id":100029501,"comment_content":"1. MySql InnoDB å¼•æ“ æ”¯æŒäº‹åŠ¡<br>2. show engines","like_count":0},{"had_liked":false,"id":239262,"user_name":"pan","can_delete":false,"product_type":"c1","uid":1439228,"ip_address":"","ucode":"7C95D66C95E1BA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1iaykDMsDvUbd13DxewFGibSExGyNyzmHK8cciam9EH9RRWbhfSgMDPIbGP5hfe9hX0uTEkybhmic3fdpYVHXmRpJg/132","comment_is_top":false,"comment_ctime":1596469407,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596469407","product_id":100029501,"comment_content":"å½“æˆ‘ä»¬è®¾ç½® autocommit=0 æ—¶ï¼Œä¸è®ºæ˜¯å¦é‡‡ç”¨ START TRANSACTION æˆ–è€… BEGIN çš„æ–¹å¼æ¥å¼€å¯äº‹åŠ¡ï¼Œéƒ½éœ€è¦ç”¨ COMMIT è¿›è¡Œæäº¤ï¼Œè®©äº‹åŠ¡ç”Ÿæ•ˆï¼Œä½¿ç”¨ ROLLBACK å¯¹äº‹åŠ¡è¿›è¡Œå›æ»šã€‚å½“æˆ‘ä»¬è®¾ç½® autocommit=1 æ—¶ï¼Œæ¯æ¡ SQL è¯­å¥éƒ½ä¼šè‡ªåŠ¨è¿›è¡Œæäº¤ã€‚ä¸è¿‡è¿™æ—¶ï¼Œå¦‚æœä½ é‡‡ç”¨ START TRANSACTION æˆ–è€… BEGIN çš„æ–¹å¼æ¥æ˜¾å¼åœ°å¼€å¯äº‹åŠ¡ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹åŠ¡åªæœ‰åœ¨ COMMIT æ—¶æ‰ä¼šç”Ÿæ•ˆï¼Œåœ¨ ROLLBACK æ—¶æ‰ä¼šå›æ»šã€‚ <br>è¿™ä¸€æ®µçš„æè¿°æ˜¯ä¸æ˜¯å†™åäº†ï¼Œ0çš„æ—¶å€™æ˜¯é»˜è®¤commitï¼Œè€Œ1æ˜¯éœ€è¦æ˜¾ç¤ºcommitå› ä¸ºè¢«é»˜è®¤å¼€å¯äº†äº‹åŠ¡ã€‚","like_count":0},{"had_liked":false,"id":237760,"user_name":"Value","can_delete":false,"product_type":"c1","uid":1443434,"ip_address":"","ucode":"5413E5E4A7326C","user_header":"https://static001.geekbang.org/account/avatar/00/16/06/6a/48fb83f3.jpg","comment_is_top":false,"comment_ctime":1595944693,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595944693","product_id":100029501,"comment_content":"æˆ‘ä½¿ç”¨Navicat 15æ¨¡æ‹Ÿå®éªŒä¸€æ—¶ï¼Œæ•°æ®è¡¨ä¸­åªæœ‰1æ¡æ•°æ®ï¼šâ€œå…³ç¾½â€ã€‚ä½†å½“å‰æŸ¥è¯¢çª—å£â€œSELECT * FROM testâ€ å´èƒ½å¾—åˆ°ç»“æœï¼šâ€œå…³ç¾½â€ï¼Œâ€œå¼ é£â€ã€‚åˆ‡æ¢çª—å£æ—¶æŸ¥è¯¢æ­£å¸¸ï¼Œæ˜¾ç¤ºä¸º1æ¡æ•°æ®ã€‚<br><br>è¿™ä¸ªç°è±¡æ˜¯å› ä¸ºNavicat å®¢æˆ·ç«¯çš„åŸå› è¿˜æ˜¯å’ŒMYSQLä¸­çš„äº‹åŠ¡æŸäº›ç‰¹æ€§æœ‰å…³ï¼Ÿè¿™ä¸ªç°è±¡ä¹Ÿå¤ªè¿·æƒ‘äº†...<br>æ±‚è€å¸ˆè§£ç­”ã€‚","like_count":0},{"had_liked":false,"id":214683,"user_name":"ç‹é”æµ©","can_delete":false,"product_type":"c1","uid":1988541,"ip_address":"","ucode":"00FCBEACF7906D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoeoiahO3vO8xnQbuLkriapWV5J6b08tUiaxhhA7oyRHoBQV7OQQ3TxmSASXs4J39rgibAD9hgptc5jhA/132","comment_is_top":false,"comment_ctime":1588781481,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588781481","product_id":100029501,"comment_content":"å¯¹äºäº‹åŠ¡çš„ä¸€è‡´æ€§å­˜åœ¨éƒ¨åˆ†ç–‘æƒ‘ï¼šæ•°æ®åº“ä¼šç”±åŸæ¥çš„ä¸€è‡´æ€§çŠ¶æ€å˜ä¸ºå¦ä¸€ç§ä¸€è‡´æ€§çŠ¶æ€ã€‚ç½‘ä¸Šç»å¸¸ä¼šä¸¾çš„ä¾‹å­æ˜¯é“¶è¡Œè½¬è´¦ä¸šåŠ¡ï¼Œaæœ‰100ï¼Œbæœ‰100ï¼Œæ¯”å¦‚aå‘bè½¬è´¦ä¸€æ®µé‡‘é¢ï¼Œä½†æ˜¯äº‹åŠ¡æ‰§è¡Œå‰åè¦ä¿è¯abçš„æ€»é‡‘é¢ä¸º200ã€‚æ‰€ä»¥ä¸€è‡´æ€§æ˜¯å¯¹æˆ‘ä»¬ç¼–å†™äº‹åŠ¡çš„è¦æ±‚å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":208897,"user_name":"Black","can_delete":false,"product_type":"c1","uid":1620774,"ip_address":"","ucode":"170977A014997C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iarwibic7h11K05YSJ9G6JERWqudL1ATGm0bib5pSCsP97rpSwuxLoDvp40RMsywibVH2g5DLphQGM51denSxx6hLZg/132","comment_is_top":false,"comment_ctime":1587460038,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587460038","product_id":100029501,"comment_content":"äº‹åŠ¡å°±æ˜¯ä¸€ç§å…ƒæ“ä½œï¼Œè¿›è¡Œä¸€ç³»åˆ—å¤æ‚çš„æ“ä½œçš„æ—¶å€™å¯ä»¥ä½¿ç”¨äº‹åŠ¡ï¼Œæ¥ç¡®ä¿å¤±è´¥åä»å¤´å¼€å§‹ï¼Œè€Œä¸æ˜¯åœåœ¨æŸä¸ªéœ€è¦é€é¡¹æŸ¥æ‰¾çš„åœ°æ–¹ã€‚","like_count":0},{"had_liked":false,"id":201072,"user_name":"Cookie123456","can_delete":false,"product_type":"c1","uid":1913261,"ip_address":"","ucode":"F9EF63C38F8976","user_header":"","comment_is_top":false,"comment_ctime":1585712011,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585712011","product_id":100029501,"comment_content":"æˆ‘å¯¹å®éªŒäºŒ æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ<br><br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>COMMIT;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>ROLLBACK;<br>SELECT * FROM test;<br><br>å½“è¿è¡Œå®Œç¬¬ä¸€æäº¤çš„æ—¶å€™ï¼ŒæŒ‰ç†è¯´ä¸‹é¢ä¸ä¼šå†æ¬¡æ‰§è¡Œäº†ã€‚å› ä¸ºcompletion=0ï¼Œè¿™æ˜¯é»˜è®¤æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬æ‰§è¡Œ COMMIT çš„æ—¶å€™ä¼šæäº¤äº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªäº‹åŠ¡æ—¶ï¼Œè¿˜éœ€è¦æˆ‘ä»¬ä½¿ç”¨ START TRANSACTION æˆ–è€… BEGIN æ¥å¼€å¯ã€‚  <br>","like_count":0,"discussions":[{"author":{"id":1682468,"avatar":"https://static001.geekbang.org/account/avatar/00/19/ac/24/0684a141.jpg","nickname":"å½­çºªç¨‹","note":"","ucode":"F9222D72E791C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221096,"discussion_content":"completion = 0 çš„æƒ…å†µä¸ä¸€å®šéè¦é‡å†™beginæ‰èƒ½å¼€å¯äº‹åŠ¡å§ï¼Œæ–‡ç« ç»“å°¾åªæ˜¯è¯´äº†å¦‚æœè¦æœ‰beginæˆ–startå¼€å¯äº‹åŠ¡æ—¶å¿…é¡»æœ‰commitæ‰èƒ½ç®—ç»“æŸä¸€ä¸ªäº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒé‡ç‚¹æ˜¯æƒ³è¯´å¦‚æœcompletion=1éœ€è¦æœ‰commitå…³é”®å­—ç»“æŸï¼Œå¦åˆ™å°±ç®—ä¸€ä¸ªäº‹åŠ¡ï¼Œrollbackä¼šä¸€èµ·é€€å›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585973345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201060,"user_name":"Cookie123456","can_delete":false,"product_type":"c1","uid":1913261,"ip_address":"","ucode":"F9EF63C38F8976","user_header":"","comment_is_top":false,"comment_ctime":1585711203,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585711203","product_id":100029501,"comment_content":"é¦–å…ˆç¬¬ä¸€ä¸ªå®éªŒï¼Œè¿è¡Œå®Œåˆ›å»ºäº‹åŠ¡çš„è¯­å¥ä¹‹åï¼Œç”¨SQLè¯­å¥æŸ¥è¯¢ï¼Œå¾—å‡ºçš„ç»“æœæ˜¯å…³ç¾½å’Œå¼ é£ï¼Œç„¶è€Œæ•°æ®è¡¨ä¸­åªæœ‰å…³ç¾½ä¸€æ¡æ•°æ®ï¼Œå¯è§SQLè¯­å¥ è¿è¡Œè¯»äº†è„æ•°æ® ã€‚å¦‚æœåœ¨Navicatä¸­å†æ¬¡æ–°å»ºæŸ¥è¯¢ï¼Œæ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œåˆ™åªæœ‰å…³ç¾½ä¸€æ¡æ•°æ®ï¼Œå¯æ˜¯å®ƒä¸ºä»€ä¹ˆä¼šè¯»è„æ•°æ®å‘¢ï¼Ÿï¼Ÿï¼Ÿå¾ˆå€¼å¾—æ€è€ƒ","like_count":0},{"had_liked":false,"id":194813,"user_name":"luck_tou","can_delete":false,"product_type":"c1","uid":1904497,"ip_address":"","ucode":"E6BACBB08C504E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKkThulMFj6MiaY8qlsmHWrlIzo1SEhwDjwpgLP2bhLYETx1f0DepRDsBdssd5dFKN35zzFUYnia1Q/132","comment_is_top":false,"comment_ctime":1585107406,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585107406","product_id":100029501,"comment_content":"è™½ç„¶è¿™äº›éƒ½ä¼šï¼Œä½†æ˜¯è·Ÿç€è€å¸ˆå†è¿‡ä¸€éè¿˜æ˜¯è§‰å¾—ä¼šæœ‰æ–°çš„æ€è€ƒ","like_count":0},{"had_liked":false,"id":192731,"user_name":"å²ä¸‚å†°é¢¨","can_delete":false,"product_type":"c1","uid":1010780,"ip_address":"","ucode":"531CD21E85620B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/5c/26d8efcd.jpg","comment_is_top":false,"comment_ctime":1584870153,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584870153","product_id":100029501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œ<br>è¿™æ˜¯æˆ‘å†mysql8.0 Clientæ‰§è¡Œçš„ç»“æœï¼š<br>mysql&gt; CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;SET @@completion_type = 1;BEGIN;INSERT INTO test SELECT &#39;å…³ç¾½&#39;;COMMIT;INSERT INTO test SELECT &#39;å¼ é£&#39;;INSERT INTO test SELECT &#39;å¼ é£&#39;;ROLLBACK;SELECT * FROM test;<br>Query OK, 0 rows affected (0.37 sec)<br><br>Query OK, 0 rows affected (0.00 sec)<br><br>Query OK, 0 rows affected (0.00 sec)<br><br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>Query OK, 0 rows affected (0.10 sec)<br><br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>ERROR 1062 (23000): Duplicate entry &#39;å¼ é£&#39; for key &#39;PRIMARY&#39;<br>Query OK, 0 rows affected (0.08 sec)<br><br>+------+<br>| name |<br>+------+<br>| å…³ç¾½ |<br>+------+<br>1 row in set (0.00 sec)<br>æ˜¯ä¸€æ¡è®°å½•<br>--------------------------------------------------------------<br>ä»¥ä¸‹æ˜¯é€šè¿‡Navicatæ‰§è¡Œçš„ç»“æœï¼š<br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>SET @@completion_type = 1;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>COMMIT;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;ROLLBACK;<br>SELECT * FROM test;<br>ç»“æœï¼š<br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB<br>&gt; OK<br>&gt; æ—¶é—´: 0.391s<br><br><br>SET @@completion_type = 1<br>&gt; OK<br>&gt; æ—¶é—´: 0.001s<br><br><br>BEGIN<br>&gt; OK<br>&gt; æ—¶é—´: 0.001s<br><br><br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;<br>&gt; Affected rows: 1<br>&gt; æ—¶é—´: 0.006s<br><br><br>COMMIT<br>&gt; OK<br>&gt; æ—¶é—´: 0.065s<br><br><br>INSERT INTO test SELECT &#39;å¼ é£&#39;<br>&gt; Affected rows: 1<br>&gt; æ—¶é—´: 0.001s<br><br><br>INSERT INTO test SELECT &#39;å¼ é£&#39;<br>&gt; 1062 - Duplicate entry &#39;å¼ é£&#39; for key &#39;PRIMARY&#39;<br>&gt; æ—¶é—´: 0.001s<br>å…³ç¾½<br>å¼ é£<br>ä¸ºä»€ä¹ˆæŸ¥å‡ºæ¥çš„æ˜¯ä¸¤æ¡ç»“æœï¼Œè€Œä¸”å†æ‰§è¡Œçš„æ—¶å€™ç¬¬ä¸€æ¡å¼ é£æ’å…¥æˆåŠŸäº†ï¼Œ<br><br>","like_count":0},{"had_liked":false,"id":190752,"user_name":"supermouse","can_delete":false,"product_type":"c1","uid":1321860,"ip_address":"","ucode":"88072D5F881827","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/84/07f0c0d6.jpg","comment_is_top":false,"comment_ctime":1584689968,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584689968","product_id":100029501,"comment_content":"è€å¸ˆï¼Œæˆ‘æ‰§è¡Œæ‚¨çš„ç¬¬ä¸‰ä¸ªä¾‹å­çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢çš„SQLè¯­å¥ï¼Œä¸ºä»€ä¹ˆæœ€åè¡¨ä¸­çš„æ•°æ®æ˜¯â€œå…³ç¾½ï¼Œå¼ é£â€å‘¢ï¼Ÿæˆ‘çš„ç”¨çš„æ˜¯MySQL8.0ï¼Œå›¾å½¢åŒ–å·¥å…·ç”¨çš„æ˜¯MySQLå®˜æ–¹æä¾›çš„workbenchã€‚<br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>SET @@completion_type = 1;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>COMMIT;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>ROLLBACK;<br>SELECT * FROM test;","like_count":0},{"had_liked":false,"id":178596,"user_name":"David.cui","can_delete":false,"product_type":"c1","uid":1302228,"ip_address":"","ucode":"AB46F310403612","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg","comment_is_top":false,"comment_ctime":1581755410,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581755410","product_id":100029501,"comment_content":"è€å¸ˆå…³äºacidçš„è§£é‡Šæ˜¯æˆ‘è§è¿‡çš„æ¯”è¾ƒæ¸…æ¥šçš„","like_count":0},{"had_liked":false,"id":166741,"user_name":"æ…•åŸæš–é˜³","can_delete":false,"product_type":"c1","uid":1490699,"ip_address":"","ucode":"F6B58F377325DB","user_header":"https://static001.geekbang.org/account/avatar/00/16/bf/0b/173b87bb.jpg","comment_is_top":false,"comment_ctime":1577583029,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1577583029","product_id":100029501,"comment_content":"CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>COMMIT;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>ROLLBACK;<br>SELECT * FROM test;<br><br>è€å¸ˆï¼Œè¿™æ®µä¸­ç¬¬ä¸€ä¸ªå¼ é£ä¸ºä»€ä¹ˆæ²¡æœ‰éšå¼æäº¤å‘¢","like_count":0,"discussions":[{"author":{"id":1024164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","nickname":"é˜¿æ–¯è’‚èŠ¬","note":"","ucode":"61D5E3BDA4EBC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159042,"discussion_content":"å› ä¸ºç¬¬ä¸€ä¸ªã€Œå¼ é£ã€ä¹Ÿåœ¨æ˜¾å¼çš„ã€ŒBEGINã€ä¹‹åï¼Œå³æ•°æ®åº“è¢«å‘ŠçŸ¥æ¥ä¸‹æ¥çš„æ“ä½œæ˜¯ç”±å¼€å¯äº‹åŠ¡è€…ä¸»åŠ¨æ§åˆ¶ï¼Œè€Œä¸æ˜¯æ•°æ®åº“è‡ªåŠ¨éšå¼æäº¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580650040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149596,"user_name":"Geek-fans","can_delete":false,"product_type":"c1","uid":1184743,"ip_address":"","ucode":"56518D2121E884","user_header":"https://static001.geekbang.org/account/avatar/00/12/13/e7/202ac86f.jpg","comment_is_top":false,"comment_ctime":1573287484,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1573287484","product_id":100029501,"comment_content":"å¦‚æœäº‹åŠ¡ä¸­æ‰€æœ‰sqlè¯­å¥æ‰§è¡Œæ­£ç¡®åˆ™éœ€è¦è‡ªå·±æ‰‹åŠ¨æäº¤commitï¼›å¦åˆ™æœ‰ä»»ä½•ä¸€æ¡æ‰§è¡Œé”™è¯¯ï¼Œéœ€è¦è‡ªå·±æäº¤ä¸€æ¡rollbackï¼Œè¿™æ—¶ä¼šå›æ»šæ‰€æœ‰æ“ä½œï¼Œè€Œä¸æ˜¯commitä¼šç»™ä½ è‡ªåŠ¨åˆ¤æ–­å’Œå›æ»šã€‚","like_count":0,"discussions":[{"author":{"id":1690807,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cc/b7/af6ef83d.jpg","nickname":"æŠ¢å°å­©å­ç³–åƒ","note":"","ucode":"09F302FC76582A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":54002,"discussion_content":"ä¸æ˜ç™½ä¸ºä»€ä¹ˆéœ€è¦è‡ªå·±æäº¤ä¸€æ¡rollback  å¦‚æœçŸ¥é“ä¼šå‡ºé”™ \næ­£å¸¸äººè‚¯å®šä¼šæ”¹æˆæ­£ç¡®çš„è¯­å¥ è€Œä¸æ˜¯åŠ ä¸Šrollback\nå¦‚æœæ˜¯ä¸ç¡®å®šæ˜¯ä¸æ˜¯ä¼šå‡ºé”™ è€Œæˆ‘ä»¬åŠ ä¸Šäº†rollback  ç„¶åè¿è¡Œç»“æœæ­£å¸¸ é‚£æˆ‘ä»¬å†™çš„rollbackè¿˜ä¼šä¸ä¼šè¢«æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574249591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1184743,"avatar":"https://static001.geekbang.org/account/avatar/00/12/13/e7/202ac86f.jpg","nickname":"Geek-fans","note":"","ucode":"56518D2121E884","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1690807,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cc/b7/af6ef83d.jpg","nickname":"æŠ¢å°å­©å­ç³–åƒ","note":"","ucode":"09F302FC76582A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67835,"discussion_content":"sqlæœ‰ç›¸å…³åˆ¤é”™è¯­æ³•ï¼Œç±»ä¼¼ifï¼ˆæ¡ä»¶å‡ºé”™ï¼‰rollbackã€‚è¿™ä¸ªå¯ä»¥æœä¸€ä¸‹ï¼Œæˆ‘ä¹Ÿæ˜¯æƒ³åˆ°ç±»ä¼¼é—®é¢˜ç®€å•äº†è§£äº†ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575181688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":54002,"ip_address":""},"score":67835,"extra":""}]}]},{"had_liked":false,"id":136641,"user_name":"Crush","can_delete":false,"product_type":"c1","uid":1586771,"ip_address":"","ucode":"5E6D4EE02525D8","user_header":"https://static001.geekbang.org/account/avatar/00/18/36/53/1e797289.jpg","comment_is_top":false,"comment_ctime":1569486802,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569486802","product_id":100029501,"comment_content":"ä¸€èˆ¬ä¸æ˜¯æ‰§è¡Œå¤±è´¥æ‰§è¡Œå›æ»šæ‰æœ‰æ„ä¹‰å—ï¼Ÿä¸é€šè¿‡æµç¨‹è¯­å¥åˆ¤æ–­ä¸€ä¸‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":129557,"user_name":"Tyrant","can_delete":false,"product_type":"c1","uid":1478302,"ip_address":"","ucode":"CD053E316EB124","user_header":"https://static001.geekbang.org/account/avatar/00/16/8e/9e/7b4aa967.jpg","comment_is_top":false,"comment_ctime":1567154138,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1567154138","product_id":100029501,"comment_content":"```sql<br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>COMMIT;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>ROLLBACK;<br>SELECT * FROM test;<br>```<br>ä¸ºä»€ä¹ˆæˆ‘ç›´æ¥å¤åˆ¶è€å¸ˆçš„ä»£ç ï¼Œç»“æœå´ä¸ä¸€æ ·ï¼Œå¼ é£ä¹Ÿå­˜è¿›å»äº†ï¼Ÿï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1360554,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/aa/fbff810a.jpg","nickname":"äºŒåˆ€ç”°","note":"","ucode":"1854DA6F1017E5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":82111,"discussion_content":"æ„Ÿè§‰äº‹åŠ¡çš„éš”ç¦»æ€§å®Œå…¨æ²¡èµ·åˆ°æ•ˆæœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576321493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1697310,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e6/1e/0f13edb4.jpg","nickname":"hello sunshine","note":"","ucode":"EC59DBE9AADA9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36519,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571388332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125963,"user_name":"èƒ¡","can_delete":false,"product_type":"c1","uid":1353712,"ip_address":"","ucode":"3917AFED7701CA","user_header":"https://static001.geekbang.org/account/avatar/00/14/a7/f0/e3212f18.jpg","comment_is_top":false,"comment_ctime":1566284134,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566284134","product_id":100029501,"comment_content":"CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;;<br>COMMIT;<br>BEGIN;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>INSERT INTO test SELECT &#39;å¼ é£&#39;;<br>ROLLBACK;<br><br><br><br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB<br>&gt; OK<br>&gt; æ—¶é—´: 0.034s<br><br><br>BEGIN<br>&gt; OK<br>&gt; æ—¶é—´: 0s<br><br><br>INSERT INTO test SELECT &#39;å…³ç¾½&#39;<br>&gt; Affected rows: 1<br>&gt; æ—¶é—´: 0.005s<br><br><br>COMMIT<br>&gt; OK<br>&gt; æ—¶é—´: 0.002s<br><br><br>BEGIN<br>&gt; OK<br>&gt; æ—¶é—´: 0s<br><br><br>INSERT INTO test SELECT &#39;å¼ é£&#39;<br>&gt; Affected rows: 1<br>&gt; æ—¶é—´: 0s<br><br><br>INSERT INTO test SELECT &#39;å¼ é£&#39;<br>&gt; 1062 - Duplicate entry &#39;å¼ é£&#39; for key &#39;PRIMARY&#39;<br>&gt; æ—¶é—´: 0s<br><br><br>å…³ç¾½<br>å¼ é£<br><br>1ã€è¿è¡Œä¸‹æ¥å°±æ˜¯å…³äºå¼ é£<br>2ã€ä¸å¤ªç†è§£ç¬¬äºŒç§æ–¹å¼  é»˜è®¤æ˜¯ä¸¤ä¸ªäº‹åŠ¡ ","like_count":0},{"had_liked":false,"id":124511,"user_name":"ç²—èŒ¶","can_delete":false,"product_type":"c1","uid":1543236,"ip_address":"","ucode":"B7EF050090A1A6","user_header":"https://static001.geekbang.org/account/avatar/00/17/8c/44/c50d62b2.jpg","comment_is_top":false,"comment_ctime":1565915187,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565915187","product_id":100029501,"comment_content":"æˆ‘è¿˜æ˜¯æœ‰ç‚¹æ‡µã€‚æ˜¾å¼äº‹åŠ¡ä»¥START TRANSACTION æˆ–è€… BEGINå¼€å¤´ï¼Œé‚£ä»¥ä»€ä¹ˆç»“æŸå‘¢ï¼ŸCOMMITå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":114927,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1563434706,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563434706","product_id":100029501,"comment_content":"# æŸ¥çœ‹æ”¯æŒçš„å¼•æ“<br>SHOW ENGINES;<br><br>","like_count":0},{"had_liked":false,"id":114803,"user_name":"l_j_dota_1111","can_delete":false,"product_type":"c1","uid":1490128,"ip_address":"","ucode":"4CA8A41F5107C7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJwHLLQK3AicN8XqichEbfqSACpRB5kry8bIMBcuB3bSiaeic9hABrmn7TZgqaWJ8Xc1gWh6icasZCt3Fg/132","comment_is_top":false,"comment_ctime":1563410458,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563410458","product_id":100029501,"comment_content":"ä¸€ç›´åœ¨ç”¨postgresï¼Œpostgisï¼Œå¯ä»¥å¾ˆå¥½çš„æ”¯æŒç©ºé—´æ•°æ®","like_count":0},{"had_liked":false,"id":113640,"user_name":"ğŸ„½ğŸ„¸ğŸ…‡ğŸ…„ğŸ…‚","can_delete":false,"product_type":"c1","uid":1000060,"ip_address":"","ucode":"853763C229A5AA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","comment_is_top":false,"comment_ctime":1563101925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563101925","product_id":100029501,"comment_content":"set autocommit=0äº†, è¿˜éœ€è¦beginæˆ–start transactionæ¥å¼€å¯äº‹åŠ¡?","like_count":0},{"had_liked":false,"id":113199,"user_name":"æ±Ÿå—çš®é©å‚ç ”å‘ä¸­å¿ƒä¿å®‰é˜Ÿé•¿","can_delete":false,"product_type":"c1","uid":1099584,"ip_address":"","ucode":"231419643A5CC5","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/40/66a203cd.jpg","comment_is_top":false,"comment_ctime":1562912951,"is_pvip":false,"replies":[{"id":"41359","content":"å¯¹çš„ éƒ½æ˜¯åœ¨autocommit=1çš„ç¯å¢ƒä¸‹ï¼Œç¬¬ä¸€ä¸ªä¾‹å­åé¢é‚£ä¸ªåº”è¯¥æ˜¯ROLLBACKã€‚ç¬¬äºŒæ¬¡æ’å…¥å¼ é£ä¼šæŠ¥Duplicate ERRORï¼Œéœ€è¦ROLLBACKæ‰ä¼šè¿›è¡Œå›æ»šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1563071862,"ip_address":"","comment_id":113199,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562912951","product_id":100029501,"comment_content":"è€å¸ˆï¼Œå‰é¢ä¸¤ä¸ªä¾‹å­æ‚¨åº”è¯¥ä¹Ÿæ˜¯åœ¨autocommit=1çš„ç¯å¢ƒä¸‹è¿è¡Œçš„å§ï¼Œæˆ‘è¿™è¾¹ä¸ç®¡è¿™ä¸ªå‚æ•°æ˜¯1è¿˜æ˜¯0ï¼Œäº‹åŠ¡é‡Œè¿ç»­æäº¤ä¸¤ä¸ªä¸€æ ·çš„nameå­—æ®µä¼šæŠ¥é”™ç„¶åä¹Ÿä¼šæ·»åŠ ä¸Šä¸€æ¡ï¼Œé™¤érollbackï¼Œæ‰€ä»¥æ‚¨å‰é¢ä¸¤ä¸ªä¾‹å­æ˜¯ä¸æ˜¯ä¸¾åäº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458107,"discussion_content":"å¯¹çš„ éƒ½æ˜¯åœ¨autocommit=1çš„ç¯å¢ƒä¸‹ï¼Œç¬¬ä¸€ä¸ªä¾‹å­åé¢é‚£ä¸ªåº”è¯¥æ˜¯ROLLBACKã€‚ç¬¬äºŒæ¬¡æ’å…¥å¼ é£ä¼šæŠ¥Duplicate ERRORï¼Œéœ€è¦ROLLBACKæ‰ä¼šè¿›è¡Œå›æ»šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563071862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113119,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1562899536,"is_pvip":false,"replies":[{"id":"41354","content":"å¯¹ åº”è¯¥æ˜¯ROLLBACK","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1563069399,"ip_address":"","comment_id":113119,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1562899536","product_id":100029501,"comment_content":"ç¬¬ä¸€ä¾‹å­æ’å…¥ä¸¤æ¡â€˜å¼ é£â€™ï¼Œåº”è¯¥æ˜¯ç”¨rollbackè€Œä¸æ˜¯commitå§ï¼Œæˆ‘æµ‹è¯•çš„ä½¿ç”¨commitçš„è¯ï¼Œä¼šæœ‰ä¸€æ¡&#39;å¼ é£&#39;çš„è®°å½•æŒä¹…åŒ–åˆ°äº†æ•°æ®åº“ä¸­","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458065,"discussion_content":"å¯¹ åº”è¯¥æ˜¯ROLLBACK","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563069399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1353712,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a7/f0/e3212f18.jpg","nickname":"èƒ¡","note":"","ucode":"3917AFED7701CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5453,"discussion_content":"æ€ä¹ˆè¯•éƒ½ä¸å¯¹ï¼ŒåŸæ¥åŸå› åœ¨è¿™é‡Œï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566282323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113112,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1562898295,"is_pvip":false,"replies":[{"id":"41358","content":"å¦‚æœé‡‡ç”¨autocommit=1;çš„æƒ…å†µ åº”è¯¥å°±æ˜¯aaa, bbbä¸¤æ¡æ•°æ®ã€‚å¦‚æœæ˜¯autocommit=0;çš„æƒ…å†µï¼Œåº”è¯¥å°±æ˜¯ä½ è¿™ä¸ªç»“æœï¼Œä¹Ÿå°±æ˜¯ä¸€æ¡è®°å½• aaa","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1563070561,"ip_address":"","comment_id":113112,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1562898295","product_id":100029501,"comment_content":"ç¬¬äºŒä¸ªä¾‹å­ç»“æœä¹Ÿä¸åŒ<br><br>mysql&gt; DROP TABLE test;<br>Query OK, 0 rows affected (0.02 sec)<br><br>mysql&gt; CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>Query OK, 0 rows affected (0.04 sec)<br><br>mysql&gt; BEGIN;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; INSERT INTO test SELECT &#39;aaa&#39;;<br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>mysql&gt; COMMIT;<br>Query OK, 0 rows affected (0.02 sec)<br><br>mysql&gt; INSERT INTO test SELECT &#39;bbb&#39;;<br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>mysql&gt; INSERT INTO test SELECT &#39;bbb&#39;;<br>ERROR 1062 (23000): Duplicate entry &#39;bbb&#39; for key &#39;PRIMARY&#39;<br>mysql&gt; ROLLBACK;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; SELECT * FROM test;<br>+------+<br>| name |<br>+------+<br>| aaa  |<br>+------+<br>1 row in set (0.00 sec)<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458059,"discussion_content":"å¦‚æœé‡‡ç”¨autocommit=1;çš„æƒ…å†µ åº”è¯¥å°±æ˜¯aaa, bbbä¸¤æ¡æ•°æ®ã€‚å¦‚æœæ˜¯autocommit=0;çš„æƒ…å†µï¼Œåº”è¯¥å°±æ˜¯ä½ è¿™ä¸ªç»“æœï¼Œä¹Ÿå°±æ˜¯ä¸€æ¡è®°å½• aaa","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563070561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1083653,"avatar":"https://static001.geekbang.org/account/avatar/00/10/89/05/02b2f22a.jpg","nickname":"SleepyKoala","note":"","ucode":"C9A5CAC53107CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290299,"discussion_content":"è¯•ä¸€ä¸‹ï¼Œå…ˆè®¾ç½®\nset completion_type = 0;\nset autocommit=1;\nç„¶åå†è·‘ä¾‹å­äºŒï¼Œå°±èƒ½å¾—åˆ°ä¸¤æ¡æ•°æ®äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594398058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1127175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","nickname":"JustDoDT","note":"","ucode":"6AF0B80F00EAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1768,"discussion_content":"åªåœ¨ä½ å½“å‰æŸ¥è¯¢æ˜¯è¿™æ ·ï¼Œä½ æ–°å»ºä¸€ä¸ªæŸ¥è¯¢çœ‹çœ‹ï¼Œä¼šå’Œè€å¸ˆè®²çš„ç»“æœä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562900085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1127175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","nickname":"JustDoDT","note":"","ucode":"6AF0B80F00EAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1767,"discussion_content":"è¦åˆ·æ–°ï¼Œå»è¡¨é‡Œçœ‹çœ‹ï¼Œæ˜¯ç»“æœæ˜¯å’Œè€å¸ˆæ–‡ç« é‡Œè¯´çš„ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562899997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113111,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1562898150,"is_pvip":false,"replies":[{"id":"41357","content":"é‡‡ç”¨é»˜è®¤çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯autocommit=1;<br>ä»£ç ä¸­è°ƒæ•´äº†ä¸‹ï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ªæ˜¯ROLLBACKï¼Œä¸‹é¢æ˜¯å®Œæ•´ä»£ç ï¼Œä½ å†è¯•ä¸‹ï¼š<br>DROP TABLE test;<br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#39;aaa&#39;;<br>COMMIT;<br>BEGIN;<br>INSERT INTO test SELECT &#39;bbb&#39;;<br>INSERT INTO test SELECT &#39;bbb&#39;;<br>ROLLBACK;<br>SELECT * FROM test;<br>è¿è¡Œç»“æœåº”è¯¥åªæœ‰ aaa","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1563070461,"ip_address":"","comment_id":113111,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1562898150","product_id":100029501,"comment_content":"ä¸ºä»€ä¹ˆæˆ‘è¯•ä¸‹æ¥çš„ç»“æœè·Ÿè€å¸ˆè¯´çš„ä¸ä¸€æ ·å‘¢ï¼Ÿ<br><br>mysql&gt; set autocommit=0;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; <br>mysql&gt; DROP TABLE test;<br>Query OK, 0 rows affected (0.02 sec)<br><br>mysql&gt; CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>Query OK, 0 rows affected (0.05 sec)<br><br>mysql&gt; BEGIN;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; INSERT INTO test SELECT &#39;aaa&#39;;<br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>mysql&gt; COMMIT;<br>Query OK, 0 rows affected (0.02 sec)<br><br>mysql&gt; BEGIN;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; INSERT INTO test SELECT &#39;bbb&#39;;<br>Query OK, 1 row affected (0.00 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br><br>mysql&gt; INSERT INTO test SELECT &#39;bbb&#39;;<br>ERROR 1062 (23000): Duplicate entry &#39;bbb&#39; for key &#39;PRIMARY&#39;<br>mysql&gt; COMMIT;<br>Query OK, 0 rows affected (0.01 sec)<br><br>mysql&gt; SELECT * FROM test;<br>+------+<br>| name |<br>+------+<br>| aaa  |<br>| bbb  |<br>+------+<br>2 rows in set (0.00 sec)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458058,"discussion_content":"é‡‡ç”¨é»˜è®¤çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯autocommit=1;\nä»£ç ä¸­è°ƒæ•´äº†ä¸‹ï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ªæ˜¯ROLLBACKï¼Œä¸‹é¢æ˜¯å®Œæ•´ä»£ç ï¼Œä½ å†è¯•ä¸‹ï¼š\nDROP TABLE test;\nCREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;\nBEGIN;\nINSERT INTO test SELECT &amp;#39;aaa&amp;#39;;\nCOMMIT;\nBEGIN;\nINSERT INTO test SELECT &amp;#39;bbb&amp;#39;;\nINSERT INTO test SELECT &amp;#39;bbb&amp;#39;;\nROLLBACK;\nSELECT * FROM test;\nè¿è¡Œç»“æœåº”è¯¥åªæœ‰ aaa","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563070461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008920,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJqWuvuicHD7RVlEDJamWNmwVdkjeH4pLxPXoicwqbnpOibI1MFFz9SIVJmQeKSZQRP9np1NUV3wpmnA/132","nickname":"æœ±æˆäº®","note":"","ucode":"669B049357B3FA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66032,"discussion_content":"æˆ‘çš„æ˜¯ aaa,  bbbä¸¤æ¡ï¼›æŸ¥äº†autocommitæ˜¯1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575037659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1353712,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a7/f0/e3212f18.jpg","nickname":"èƒ¡","note":"","ucode":"3917AFED7701CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5455,"discussion_content":"æˆ‘ä¹Ÿä¸ä¸€æ ·ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566283079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113097,"user_name":"æ±Ÿå—çš®é©å‚ç ”å‘ä¸­å¿ƒä¿å®‰é˜Ÿé•¿","can_delete":false,"product_type":"c1","uid":1099584,"ip_address":"","ucode":"231419643A5CC5","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/40/66a203cd.jpg","comment_is_top":false,"comment_ctime":1562896648,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562896648","product_id":100029501,"comment_content":"ä¸¾æ‰‹------- è€å¸ˆï¼Œäº‹åŠ¡çš„ä¾‹å­é‡Œè¿ç»­æ’å…¥ä¸¤ä¸ªä¸€æ ·çš„å­—æ®µï¼Œæ’å…¥ç¬¬äºŒä¸ªä¸ä¼šæŠ¥é”™å—ï¼ŸæŠ¥é”™äº†ä¹‹åå†æ‰§è¡Œåé¢çš„sqlè¿˜æ˜¯æ’å…¥äº†ä¸€æ¡å§ï¼Ÿï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":113087,"user_name":"KEEPUP","can_delete":false,"product_type":"c1","uid":1436576,"ip_address":"","ucode":"D0B31031E2923F","user_header":"https://static001.geekbang.org/account/avatar/00/15/eb/a0/9d294a9a.jpg","comment_is_top":false,"comment_ctime":1562895096,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562895096","product_id":100029501,"comment_content":"å…³é—­è‡ªåŠ¨æäº¤ï¼Œå¦‚æœæ²¡æœ‰beginï¼Œé‚£ä¹ˆæäº¤çš„æ—¶å€™äº‹åŠ¡ä»ä»€ä¹ˆä½ç½®å¼€å§‹å‘¢ï¼Ÿ<br>å¼€å¯è‡ªåŠ¨æäº¤ï¼Œå¦‚æœæœ‰beginï¼Œé‚£ä¹ˆä¸ä¼šè‡ªåŠ¨æäº¤ï¼Œåªèƒ½æ‰‹åŠ¨commit æäº¤å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":113061,"user_name":"å¬é›¨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1562892647,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562892647","product_id":100029501,"comment_content":"è€å¸ˆï¼Œå…³äºä¸€è‡´æ€§ï¼Œæˆ‘æ˜¯å¦å¯ä»¥è¿™æ ·ç†è§£ï¼šä½“ç°åœ¨ä»£ç ä¸­å°±æ˜¯ï¼Œé¢„å…ˆå®šä¹‰ä¸€ç»„ä»£ç ï¼Œå¦‚æœç¨‹åºé¡ºåˆ©æ‰§è¡Œå®Œï¼Œå°±è¯´æ˜¯ç¬¦åˆä¸€è‡´æ€§ï¼Œå¦‚æœä¸­é—´æŸä¸ªç¯èŠ‚å‡ºäº†é—®é¢˜ï¼Œæ¯”å¦‚æŠ›ä¸ªå¼‚å¸¸ï¼Œå°±ä¸ç¬¦åˆä¸€è‡´æ€§äº†ï¼Œéœ€è¦å›æ»šï¼Œè¿™æ ·ç†è§£å¯ä»¥å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":113030,"user_name":"Cyber_Derek","can_delete":false,"product_type":"c1","uid":1239646,"ip_address":"","ucode":"D9B3596BDC35A4","user_header":"https://static001.geekbang.org/account/avatar/00/12/ea/5e/79dd13b5.jpg","comment_is_top":false,"comment_ctime":1562890135,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1562890135","product_id":100029501,"comment_content":"å…³äºä¸€è‡´æ€§é‚£ä¸ªé“¾æ¥æˆ‘æ‰“å¼€æ— æ³•åŠ è½½èƒ½ä¸èƒ½è´´ä¸€æ®µå‡ºæ¥ï¼Ÿå›½å†…å¾ˆå¤šåšå®¢å…³äºä¸€è‡´æ€§çš„è®²è§£çœŸçš„æ˜¯å¾ˆå‘","like_count":0,"discussions":[{"author":{"id":1144692,"avatar":"https://static001.geekbang.org/account/avatar/00/11/77/74/c1f0aa46.jpg","nickname":"ä¹ æƒ¯æ²‰æ·€","note":"","ucode":"9C590226330AD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1755,"discussion_content":"Consistency\nMain article: Consistency (database systems)\nConsistency ensures that a transaction can only bring the database from one valid state to another, maintaining database invariants: any data written to the database must be valid according to all defined rules, including constraints, cascades, triggers, and any combination thereof. This prevents database corruption by an illegal transaction, but does not guarantee that a transaction is correct. Referential integrity guarantees the primary key - foreign key relationship.","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1562894594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1673679,"avatar":"https://static001.geekbang.org/account/avatar/00/19/89/cf/1c7703b1.jpg","nickname":"å¤å¤©å‘€","note":"","ucode":"1C5C060C05923B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1144692,"avatar":"https://static001.geekbang.org/account/avatar/00/11/77/74/c1f0aa46.jpg","nickname":"ä¹ æƒ¯æ²‰æ·€","note":"","ucode":"9C590226330AD3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299711,"discussion_content":"æ„Ÿè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597796154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1755,"ip_address":""},"score":299711,"extra":""}]}]}]}