{"id":18651,"title":"09 | 微服务治理的手段有哪些？","content":"<p>上一期我给你讲述了服务追踪的基本原理，有了分布式服务追踪系统，在服务出现问题的时候，我们就可以定位服务哪里出现了问题。一般单体应用改造成微服务架构后，还会增加哪些问题呢？又该如何应对呢？</p>\n<p>前面我讲到单体应用改造为微服务架构后，服务调用由本地调用变成远程调用，服务消费者A需要通过注册中心去查询服务提供者B的地址，然后发起调用，这个看似简单的过程就可能会遇到下面几种情况，比如：</p>\n<ul>\n<li>\n<p>注册中心宕机；</p>\n</li>\n<li>\n<p>服务提供者B有节点宕机；</p>\n</li>\n<li>\n<p>服务消费者A和注册中心之间的网络不通；</p>\n</li>\n<li>\n<p>服务提供者B和注册中心之间的网络不通；</p>\n</li>\n<li>\n<p>服务消费者A和服务提供者B之间的网络不通；</p>\n</li>\n<li>\n<p>服务提供者B有些节点性能变慢；</p>\n</li>\n<li>\n<p>服务提供者B短时间内出现问题。</p>\n</li>\n</ul>\n<p>可见，一次服务调用，服务提供者、注册中心、网络这三者都可能会有问题，此时服务消费者应该如何处理才能确保调用成功呢？这就是服务治理要解决的问题。</p>\n<p>接下来我们一起来看看<span class=\"orange\">常用的服务治理手段</span>。</p>\n<h2>节点管理</h2>\n<p>根据我的经验，服务调用失败一般是由两类原因引起的，一类是服务提供者自身出现问题，如服务器宕机、进程意外退出等；一类是网络问题，如服务提供者、注册中心、服务消费者这三者任意两者之间的网络出现问题。</p>\n<p>无论是服务提供者自身出现问题还是网络发生问题，都有两种节点管理手段。</p><!-- [[[read_end]]] -->\n<p><strong>1. 注册中心主动摘除机制</strong></p>\n<p>这种机制要求服务提供者定时的主动向注册中心汇报心跳，注册中心根据服务提供者节点最近一次汇报心跳的时间与上一次汇报心跳时间做比较，如果超出一定时间，就认为服务提供者出现问题，继而把节点从服务列表中摘除，并把最近的可用服务节点列表推送给服务消费者。</p>\n<p><strong>2. 服务消费者摘除机制</strong></p>\n<p>虽然注册中心主动摘除机制可以解决服务提供者节点异常的问题，但如果是因为注册中心与服务提供者之间的网络出现异常，最坏的情况是注册中心会把服务节点全部摘除，导致服务消费者没有可用的服务节点调用，但其实这时候服务提供者本身是正常的。所以，将存活探测机制用在服务消费者这一端更合理，如果服务消费者调用服务提供者节点失败，就将这个节点从内存中保存的可用服务提供者节点列表中移除。</p>\n<h2>负载均衡</h2>\n<p>一般情况下，服务提供者节点不是唯一的，多是以集群的方式存在，尤其是对于大规模的服务调用来说，服务提供者节点数目可能有上百上千个。由于机器采购批次的不同，不同服务节点本身的配置也可能存在很大差异，新采购的机器CPU和内存配置可能要高一些，同等请求量情况下，性能要好于旧的机器。对于服务消费者而言，在从服务列表中选取可用节点时，如果能让配置较高的新机器多承担一些流量的话，就能充分利用新机器的性能。这就需要对负载均衡算法做一些调整。</p>\n<p>常用的负载均衡算法主要包括以下几种。</p>\n<p><strong>1. 随机算法</strong></p>\n<p>顾名思义就是从可用的服务节点中随机选取一个节点。一般情况下，随机算法是均匀的，也就是说后端服务节点无论配置好坏，最终得到的调用量都差不多。</p>\n<p><strong>2. 轮询算法</strong></p>\n<p>就是按照固定的权重，对可用服务节点进行轮询。如果所有服务节点的权重都是相同的，则每个节点的调用量也是差不多的。但可以给某些硬件配置较好的节点的权重调大些，这样的话就会得到更大的调用量，从而充分发挥其性能优势，提高整体调用的平均性能。</p>\n<p><strong>3. 最少活跃调用算法</strong></p>\n<p>这种算法是在服务消费者这一端的内存里动态维护着同每一个服务节点之间的连接数，当调用某个服务节点时，就给与这个服务节点之间的连接数加1，调用返回后，就给连接数减1。然后每次在选择服务节点时，根据内存里维护的连接数倒序排列，选择连接数最小的节点发起调用，也就是选择了调用量最小的服务节点，性能理论上也是最优的。</p>\n<p><strong>4. 一致性Hash算法</strong></p>\n<p>指相同参数的请求总是发到同一服务节点。当某一个服务节点出现故障时，原本发往该节点的请求，基于虚拟节点机制，平摊到其他节点上，不会引起剧烈变动。</p>\n<p>这几种算法的实现难度也是逐步提升的，所以选择哪种节点选取的负载均衡算法要根据实际场景而定。如果后端服务节点的配置没有差异，同等调用量下性能也没有差异的话，选择随机或者轮询算法比较合适；如果后端服务节点存在比较明显的配置和性能差异，选择最少活跃调用算法比较合适。</p>\n<h2>服务路由</h2>\n<p>对于服务消费者而言，在内存中的可用服务节点列表中选择哪个节点不仅由负载均衡算法决定，还由路由规则确定。</p>\n<p>所谓的路由规则，就是通过一定的规则如条件表达式或者正则表达式来限定服务节点的选择范围。</p>\n<p>为什么要制定路由规则呢？主要有两个原因。</p>\n<p><strong>1. 业务存在灰度发布的需求</strong></p>\n<p>比如，服务提供者做了功能变更，但希望先只让部分人群使用，然后根据这部分人群的使用反馈，再来决定是否做全量发布。这个时候，就可以通过类似按尾号进行灰度的规则限定只有一定比例的人群才会访问新发布的服务节点。</p>\n<p><strong>2. 多机房就近访问的需求</strong></p>\n<p>据我所知，大部分业务规模中等及以上的互联网公司，为了业务的高可用性，都会将自己的业务部署在不止一个IDC中。这个时候就存在一个问题，不同IDC之间的访问由于要跨IDC，通过专线访问，尤其是IDC相距比较远时延迟就会比较大，比如北京和广州的专线延迟一般在30ms左右，这对于某些延时敏感性的业务是不可接受的，所以就要一次服务调用尽量选择同一个IDC内部的节点，从而减少网络耗时开销，提高性能。这时一般可以通过IP段规则来控制访问，在选择服务节点时，优先选择同一IP段的节点。</p>\n<p>那么路由规则该如何配置呢？根据我的实际项目经验，一般有两种配置方式。</p>\n<p><strong>1. 静态配置</strong></p>\n<p>就是在服务消费者本地存放服务调用的路由规则，在服务调用期间，路由规则不会发生改变，要想改变就需要修改服务消费者本地配置，上线后才能生效。</p>\n<p><strong>2. 动态配置</strong></p>\n<p>这种方式下，路由规则是存在注册中心的，服务消费者定期去请求注册中心来保持同步，要想改变服务消费者的路由配置，可以通过修改注册中心的配置，服务消费者在下一个同步周期之后，就会请求注册中心来更新配置，从而实现动态更新。</p>\n<h2>服务容错</h2>\n<p>服务调用并不总是一定成功的，前面我讲过，可能因为服务提供者节点自身宕机、进程异常退出或者服务消费者与提供者之间的网络出现故障等原因。对于服务调用失败的情况，需要有手段自动恢复，来保证调用成功。</p>\n<p>常用的手段主要有以下几种。</p>\n<ul>\n<li>\n<p>FailOver：失败自动切换。就是服务消费者发现调用失败或者超时后，自动从可用的服务节点列表总选择下一个节点重新发起调用，也可以设置重试的次数。这种策略要求服务调用的操作必须是幂等的，也就是说无论调用多少次，只要是同一个调用，返回的结果都是相同的，一般适合服务调用是读请求的场景。</p>\n</li>\n<li>\n<p>FailBack：失败通知。就是服务消费者调用失败或者超时后，不再重试，而是根据失败的详细信息，来决定后续的执行策略。比如对于非幂等的调用场景，如果调用失败后，不能简单地重试，而是应该查询服务端的状态，看调用到底是否实际生效，如果已经生效了就不能再重试了；如果没有生效可以再发起一次调用。</p>\n</li>\n<li>\n<p>FailCache：失败缓存。就是服务消费者调用失败或者超时后，不立即发起重试，而是隔一段时间后再次尝试发起调用。比如后端服务可能一段时间内都有问题，如果立即发起重试，可能会加剧问题，反而不利于后端服务的恢复。如果隔一段时间待后端节点恢复后，再次发起调用效果会更好。</p>\n</li>\n<li>\n<p>FailFast：快速失败。就是服务消费者调用一次失败后，不再重试。实际在业务执行时，一般非核心业务的调用，会采用快速失败策略，调用失败后一般就记录下失败日志就返回了。</p>\n</li>\n</ul>\n<p>从我对服务容错不同策略的描述中，你可以看出它们的使用场景是不同的，一般情况下对于幂等的调用，可以选择FailOver或者FailCache，非幂等的调用可以选择FailBack或者FailFast。</p>\n<h2>总结</h2>\n<p>上面我讲的服务治理的手段是最常用的手段，它们从不同角度来确保服务调用的成功率。节点管理是从服务节点健康状态角度来考虑，负载均衡和服务路由是从服务节点访问优先级角度来考虑，而服务容错是从调用的健康状态角度来考虑，可谓是殊途同归。</p>\n<p>在实际的微服务架构实践中，上面这些服务治理手段一般都会在服务框架中默认集成了，比如阿里开源的服务框架Dubbo、微博开源的服务框架Motan等，不需要业务代码去实现。如果想自己实现服务治理的手段，可以参考这些开源服务框架的实现。</p>\n<h2>思考题</h2>\n<p>上面讲述的这些服务治理手段，哪些是你的业务场景中可能需要的？你可以描述下你的业务场景，以及思考下为什么这些服务治理手段可以解决你的问题。</p>\n<p>欢迎你在留言区写下自己的思考，与我一起讨论。</p>\n<p></p>\n","comments":[{"had_liked":false,"id":23748,"user_name":"白鹿","can_delete":false,"product_type":"c1","uid":1212969,"ip_address":"","ucode":"7830EFDFDDDD23","user_header":"https://static001.geekbang.org/account/avatar/00/12/82/29/eae46cb9.jpg","comment_is_top":false,"comment_ctime":1536631016,"is_pvip":false,"replies":[{"id":"8660","content":"性能好的话，连接也释放得快","user_name":"作者回复","comment_id":23748,"uid":"1010144","ip_address":"","utype":1,"ctime":1536639648,"user_name_real":"古月中心相心"}],"discussion_count":2,"race_medal":0,"score":"113205780712","product_id":100014401,"comment_content":"最少活跃调用法，理想情况下，每个服务提供者的连接数一样多，为什么最适合性能参差不齐的情况？难道不是性能好的连接多，差的连接少，比较好吗？","like_count":27,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423707,"discussion_content":"性能好的话，连接也释放得快","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1536639648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1811495,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a4/27/15e75982.jpg","nickname":"小袁","note":"","ucode":"3F5D8721F577D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310612,"discussion_content":"频道三步握手四步挥手带来的延时不会比服务器处理的时延大？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601950555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27356,"user_name":"叽歪","can_delete":false,"product_type":"c1","uid":1101499,"ip_address":"","ucode":"B525E3F511E122","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/bb/bc5a3a03.jpg","comment_is_top":false,"comment_ctime":1537877490,"is_pvip":false,"replies":[{"id":"9961","content":"正常情况下，性能不好的机器因为处理慢，所以活跃连接数要比性能好的要多，所以按照最少活跃负载均衡算法的话，请求会更少","user_name":"作者回复","comment_id":27356,"uid":"1010144","ip_address":"","utype":1,"ctime":1537936286,"user_name_real":"古月中心相心"}],"discussion_count":1,"race_medal":0,"score":"65962386930","product_id":100014401,"comment_content":"最少活跃方式，按这个来的话，请求都打到性能不好的机器了？不会压死性能不会的机器吗","like_count":16,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424889,"discussion_content":"正常情况下，性能不好的机器因为处理慢，所以活跃连接数要比性能好的要多，所以按照最少活跃负载均衡算法的话，请求会更少","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537936286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47931,"user_name":"taowcdl","can_delete":false,"product_type":"c1","uid":1079299,"ip_address":"","ucode":"B2562224EE73DC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/EjFPyYDaxDYS3TntDa1uXlRs8nOpvMcXiazTNNhkGibk0PQaxw1GGu8Mvy1yg1w6nibZXjV12632nPibmpq3PMnickg/132","comment_is_top":false,"comment_ctime":1544259506,"is_pvip":true,"replies":[{"id":"18053","content":"是的，这个说法更严谨一些，感谢指正。","user_name":"作者回复","comment_id":47931,"uid":"1010144","ip_address":"","utype":1,"ctime":1544944627,"user_name_real":"古月中心相心"}],"discussion_count":1,"race_medal":0,"score":"44493932466","product_id":100014401,"comment_content":"注册中心摘除机制说的是不是有问题  应该是把当前时间和最近一次收到心跳的时间做对比吧 超过一定时间 就摘除吧","like_count":11,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431950,"discussion_content":"是的，这个说法更严谨一些，感谢指正。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544944627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25980,"user_name":"Geek_sky","can_delete":false,"product_type":"c1","uid":1117551,"ip_address":"","ucode":"F72C02C081790D","user_header":"https://static001.geekbang.org/account/avatar/00/11/0d/6f/6af1d734.jpg","comment_is_top":false,"comment_ctime":1537489386,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27307293162","product_id":100014401,"comment_content":"消费者从内存中摘除此问题用户服务者，那么注册中心是否同步摘除？注册中心不摘除问题服务者的话，是否会又同步给了消费者？这块是怎么处理的呢？","like_count":7},{"had_liked":false,"id":23952,"user_name":"Sam_Deep_Thinking","can_delete":false,"product_type":"c1","uid":1001152,"ip_address":"","ucode":"8E4EF6F24B821B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/c0/bf880bda.jpg","comment_is_top":false,"comment_ctime":1536731780,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"27306535556","product_id":100014401,"comment_content":"作者果然是老司机，还没见过列举的这么全的，点个赞。","like_count":7},{"had_liked":false,"id":23740,"user_name":"面试官问","can_delete":false,"product_type":"c1","uid":1009375,"ip_address":"","ucode":"F9CE89589772F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/df/501ba989.jpg","comment_is_top":false,"comment_ctime":1536628044,"is_pvip":true,"replies":[{"id":"8646","content":"看情况，注册中心也可以存配置，两者可以分开部署也可以部署在一起","user_name":"作者回复","comment_id":23740,"uid":"1010144","ip_address":"","utype":1,"ctime":1536633376,"user_name_real":"古月中心相心"}],"discussion_count":1,"race_medal":0,"score":"18716497228","product_id":100014401,"comment_content":"路由规则应该是存在配置中心而不是注册中心吧？","like_count":5,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423702,"discussion_content":"看情况，注册中心也可以存配置，两者可以分开部署也可以部署在一起","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536633376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44497,"user_name":"Bobo","can_delete":false,"product_type":"c1","uid":1307392,"ip_address":"","ucode":"7D5D9D84359B5B","user_header":"https://static001.geekbang.org/account/avatar/00/13/f3/00/01137172.jpg","comment_is_top":false,"comment_ctime":1543453606,"is_pvip":false,"replies":[{"id":"18056","content":"是的，只知道自身的情况，大部分情况下可以反馈整体的情况","user_name":"作者回复","comment_id":44497,"uid":"1010144","ip_address":"","utype":1,"ctime":1544944791,"user_name_real":"古月中心相心"}],"discussion_count":1,"race_medal":0,"score":"14428355494","product_id":100014401,"comment_content":"最小活跃数，消费者维护的仅仅是自己与各个提供者的连接数，并不能得知服务提供者的总消费情况，这样子不能均衡吧","like_count":4,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430778,"discussion_content":"是的，只知道自身的情况，大部分情况下可以反馈整体的情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544944791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23851,"user_name":"面试官问","can_delete":false,"product_type":"c1","uid":1009375,"ip_address":"","ucode":"F9CE89589772F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/df/501ba989.jpg","comment_is_top":false,"comment_ctime":1536701495,"is_pvip":true,"replies":[{"id":"8749","content":"实际线上时一般分开部署，这里先不引入配置中心的概念，专栏后面会专门讲解","user_name":"作者回复","comment_id":23851,"uid":"1010144","ip_address":"","utype":1,"ctime":1536721687,"user_name_real":"古月中心相心"}],"discussion_count":1,"race_medal":0,"score":"14421603383","product_id":100014401,"comment_content":"注册中心和配置中心两者的关注点不同，在微服务架构下一般都是分开的，除非有历史原因，例如淘宝的配置中心是在07，08年服务拆分的时候产生的，当时业界还没有微服务的概念，所以配置中心也是在注册中心里面的，但后来发现两者关注点不同，很快就把配置中心从注册中心中拆分出来了。","like_count":2,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423754,"discussion_content":"实际线上时一般分开部署，这里先不引入配置中心的概念，专栏后面会专门讲解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536721687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66070,"user_name":"木木木","can_delete":false,"product_type":"c1","uid":1240679,"ip_address":"","ucode":"5EBC11AB704EF2","user_header":"https://static001.geekbang.org/account/avatar/00/12/ee/67/d6d9499e.jpg","comment_is_top":false,"comment_ctime":1549870041,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10139804633","product_id":100014401,"comment_content":"由于目前是手机游戏项目，<br>负载均衡应用在逻辑和战斗服务的分配上，<br>服务路由：根据网络延时分配战斗服<br>节点管理： 通过统一的注册中心，其他服务和注册中心进行心跳检查，并且订阅服务状态相关的消息，一旦对应服务挂了，消费者可以知道。不过可能会有延时<br>服务容错：现在所有的接口基本都是failfast，直接失败，打印日志处理。","like_count":2},{"had_liked":false,"id":314923,"user_name":"俯瞰风景.","can_delete":false,"product_type":"c1","uid":1044166,"ip_address":"","ucode":"A6DB68B7B84AEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/c6/bebcbcf0.jpg","comment_is_top":false,"comment_ctime":1633582877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5928550173","product_id":100014401,"comment_content":"服务治理的目的是确保服务调用的成功率。<br><br>服务调用失败一般是由两类原因引起的，一类是服务提供者自身出现问题，如服务器宕机、进程意外退出等；一类是网络问题，如服务提供者、注册中心、服务消费者这三者任意两者之间的网络出现问题。<br><br>节点管理：如果检测到服务提供者宕机了，就要进行节点管理。有两种方式：注册中心主动摘除机制和服务消费者摘除机制。前者是在注册中心维护和更新服务列表，后者是在消费者缓存中维护和更新服务列表。<br><br>负载均衡：由于服务提供者节点不是唯一的，多是以集群的方式存在的。所以要进行负载均衡。为了更加高效地使用硬件资源，提升整体性能，所以要根据服务节点的配置差异选用合适的负载均衡算法。如果后端服务节点的配置没有差异，同等调用量下性能也没有差异的话，选择随机或者轮询算法比较合适；如果后端服务节点存在比较明显的配置和性能差异，选择最少活跃调用算法比较合适。<br><br>服务路由配置：为了优化服务调用的性能，要结合服务节点的配置和网络传输的距离选择合适的服务接待进行调用，这就需要配置服务路由了。通过配置服务路由，还可以进行灰度发布。<br><br>服务容错处理：此外，服务调用故障是不可避免的，出现调用故障时要进行服务容错处理，具体处理方案要根据不同的业务场景进行选择。","like_count":2},{"had_liked":false,"id":40143,"user_name":"看不到de颜色","can_delete":false,"product_type":"c1","uid":1162714,"ip_address":"","ucode":"88348CCAE81931","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/da/3d76ea74.jpg","comment_is_top":false,"comment_ctime":1542522811,"is_pvip":false,"replies":[{"id":"18061","content":"对于大流量业务来说，调用失败的次数可以忽略，并且灵敏度要高于使用注册中心","user_name":"作者回复","comment_id":40143,"uid":"1010144","ip_address":"","utype":1,"ctime":1544945105,"user_name_real":"古月中心相心"}],"discussion_count":1,"race_medal":0,"score":"5837490107","product_id":100014401,"comment_content":"关于失败节点摘除有点疑惑。如果靠消费者在调用失败后才摘除异常节点的话，那么岂不会降低系统的稳定性。是否应当是注册中心和消费端一起配合进行服务端状态判断呢？","like_count":1,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429394,"discussion_content":"对于大流量业务来说，调用失败的次数可以忽略，并且灵敏度要高于使用注册中心","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544945105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24264,"user_name":"Master.Zuo","can_delete":false,"product_type":"c1","uid":1200897,"ip_address":"","ucode":"E5CF06CA582C6B","user_header":"https://static001.geekbang.org/account/avatar/00/12/53/01/83698649.jpg","comment_is_top":false,"comment_ctime":1536886349,"is_pvip":true,"replies":[{"id":"8939","content":"专栏后面会详细讲解","user_name":"作者回复","comment_id":24264,"uid":"1010144","ip_address":"","utype":1,"ctime":1536995737,"user_name_real":"古月中心相心"}],"discussion_count":1,"race_medal":0,"score":"5831853645","product_id":100014401,"comment_content":"服务的降级和限流一般是有哪些手段？","like_count":1,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423903,"discussion_content":"专栏后面会详细讲解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536995737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23967,"user_name":"海洋","can_delete":false,"product_type":"c1","uid":1028104,"ip_address":"","ucode":"591C2E740C41FA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b0/08/7aeea8ac.jpg","comment_is_top":false,"comment_ctime":1536734783,"is_pvip":false,"replies":[{"id":"8821","content":"后面专栏有细讲","user_name":"作者回复","comment_id":23967,"uid":"1010144","ip_address":"","utype":1,"ctime":1536810461,"user_name_real":"古月中心相心"}],"discussion_count":1,"race_medal":0,"score":"5831702079","product_id":100014401,"comment_content":"如果是注册中心宕机，有什么机制来保障调用成功率呢？","like_count":2,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423795,"discussion_content":"后面专栏有细讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536810461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309811,"user_name":"Sch0ng","can_delete":false,"product_type":"c1","uid":1145554,"ip_address":"","ucode":"73F6113931B1AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg","comment_is_top":false,"comment_ctime":1630338941,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630338941","product_id":100014401,"comment_content":"服务治理用来确保服务之间调用的成功率。<br>","like_count":0},{"had_liked":false,"id":202617,"user_name":"爱学习的大叔","can_delete":false,"product_type":"c1","uid":1085152,"ip_address":"","ucode":"91F9ABF1EC98D0","user_header":"https://static001.geekbang.org/account/avatar/00/10/8e/e0/847348b1.jpg","comment_is_top":false,"comment_ctime":1586015861,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586015861","product_id":100014401,"comment_content":"对服务治理有了更全面的认识(๑•̀ㅂ•́)و✧","like_count":0},{"had_liked":false,"id":134934,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1665956,"ip_address":"","ucode":"3F05D870403D24","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIkQibcXZNOtOTagaPnHuaXggKJDktbW9pUAdn8wdRWQZNP2jiatdzIbD5iaCibFuibB9RHExLEoc5BFBg/132","comment_is_top":false,"comment_ctime":1568958730,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568958730","product_id":100014401,"comment_content":"服务消费者摘除机制这里没听懂，消费者的列表不是注册中心给的吗？这里说的是消费者从自己的内存中的服务列表中摘除请求失败的服务吗？","like_count":0},{"had_liked":false,"id":108418,"user_name":"护爽使者","can_delete":false,"product_type":"c1","uid":1275464,"ip_address":"","ucode":"12DC35DD74671C","user_header":"https://static001.geekbang.org/account/avatar/00/13/76/48/5ab89daa.jpg","comment_is_top":false,"comment_ctime":1561767579,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561767579","product_id":100014401,"comment_content":"一致性hash是根据请求的IP吧","like_count":0},{"had_liked":false,"id":96993,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1558571078,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558571078","product_id":100014401,"comment_content":"赞👍，干货满满<br>没有开发过微服务框架不熟悉，原理能听明白，知道是怎么回事!","like_count":0},{"had_liked":false,"id":91341,"user_name":"学习","can_delete":false,"product_type":"c1","uid":1451763,"ip_address":"","ucode":"5DEEDEEF65322E","user_header":"https://static001.geekbang.org/account/avatar/00/16/26/f3/5c6f125b.jpg","comment_is_top":false,"comment_ctime":1556985146,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1556985146","product_id":100014401,"comment_content":"文中说：如果后端服务节点的配置没有差异，同等调用量下性能也没有差异的话，选择随机或者轮询算法比较合适；如果后端服务节点存在比较明显的配置和性能差异，选择最少活跃调用算法比较合适。<br>前者是否应选择随机或者最少活跃调用算法，后者是否应选择轮询算法？","like_count":0,"discussions":[{"author":{"id":1177289,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/c9/4da2a82a.jpg","nickname":"黄大仙","note":"","ucode":"337B6E811CF47D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2195,"discussion_content":"这个属于权重算法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563350057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76042,"user_name":"江南豆沙包","can_delete":false,"product_type":"c1","uid":1061596,"ip_address":"","ucode":"4B7833260F9F2F","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/dc/d3e3847f.jpg","comment_is_top":false,"comment_ctime":1552525666,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552525666","product_id":100014401,"comment_content":"胡老师，你好。初探微服务那一篇，服务治理这块说到了自动扩缩容，本文没有说到，这块一般怎么弄？","like_count":0},{"had_liked":false,"id":73970,"user_name":"探索无止境","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1552049573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552049573","product_id":100014401,"comment_content":"老师你好，最少活跃调用算法，这个是有消费端实现的吗？我感觉应该是服务端来统计会更准确一些，因为连接服务端可以有多个客户端，那么这个比如在A客户端看来是连接数少了，比如2，但可能B客户端连接数很多，比如200，所以应该看所有客户端加起来的总连接数更准确些，不知道分析得是否正确？还请老师指点！","like_count":0},{"had_liked":false,"id":65285,"user_name":"何何何何何少侠","can_delete":false,"product_type":"c1","uid":1125973,"ip_address":"","ucode":"455179D476BF45","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/55/dd2b5083.jpg","comment_is_top":false,"comment_ctime":1549193269,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1549193269","product_id":100014401,"comment_content":"应该是对于幂等的场景才需要查询服务状态吧？<br>非幂等等服务请求直接重试就好了啊。","like_count":0,"discussions":[{"author":{"id":2815900,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/f7/9c/69c5c5dc.jpg","nickname":"越锋利","note":"","ucode":"63E9E3F3C7D53D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406893,"discussion_content":"是不是说反了…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634865336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57414,"user_name":"王盛武","can_delete":false,"product_type":"c1","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1546784339,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546784339","product_id":100014401,"comment_content":"阿忠老师好，请问本章节的服务治理 和 断路器里的服务的降级和限流 之间是什么样的关系呢？","like_count":0},{"had_liked":false,"id":37338,"user_name":"王维","can_delete":false,"product_type":"c1","uid":1091684,"ip_address":"","ucode":"836E6CDB1A56BA","user_header":"https://static001.geekbang.org/account/avatar/00/10/a8/64/965e0d9b.jpg","comment_is_top":false,"comment_ctime":1541552628,"is_pvip":false,"replies":[{"id":"13469","content":"不太清楚，.net语言基本没接触过","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1541643422,"ip_address":"","comment_id":37338,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1541552628","product_id":100014401,"comment_content":".net 有什么好的微服务框架？.net core 算不算","like_count":0,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428297,"discussion_content":"不太清楚，.net语言基本没接触过","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541643422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32122,"user_name":"波波安","can_delete":false,"product_type":"c1","uid":1002452,"ip_address":"","ucode":"2A677908E5A75D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/d4/b7719327.jpg","comment_is_top":false,"comment_ctime":1539423265,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1539423265","product_id":100014401,"comment_content":"请问下，dubbo的节点管理采用的是什么方式？","like_count":0},{"had_liked":false,"id":31347,"user_name":"gesanri","can_delete":false,"product_type":"c1","uid":1121174,"ip_address":"","ucode":"AE3B97DC3ED668","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELtOO0HKrj5SI5JSlmwiaCvaF6GLiaTmf5NX88OZaO3HymTAGTeIoicBUjqzmMF6sF5raPFjuqLFibrrw/132","comment_is_top":false,"comment_ctime":1539155567,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539155567","product_id":100014401,"comment_content":"最少活跃算法，在服务消费者端存储服务提供者的连接数，有个问题，如果服务消费者端也不止一个呢？消费者A存储服务提供者C连接有10个，消费者B存储服务提供者C连接有100个，而服务提供者D实际连接数有50个，按这个算法，A的请求会到C，而实际应该到D，或者服务消费者端之间会同步服务提供者的连接数？","like_count":0},{"had_liked":false,"id":28004,"user_name":"lgtao","can_delete":false,"product_type":"c1","uid":1022718,"ip_address":"","ucode":"5854B3CBAC87CC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9a/fe/3e37a60e.jpg","comment_is_top":false,"comment_ctime":1537974449,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1537974449","product_id":100014401,"comment_content":".net有哪些微服务的开发框架，胡老师有推荐么？","like_count":0,"discussions":[{"author":{"id":1091684,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a8/64/965e0d9b.jpg","nickname":"王维","note":"","ucode":"836E6CDB1A56BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588170,"discussion_content":"在service mesh时代，并不存在和某一语言耦合的微服务框架，现在更多的是sidecar方式，和语言解耦合。\n服务发现和service mesh参考consul","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663585761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24117,"user_name":"李二木","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1536807029,"is_pvip":true,"replies":[{"id":"8816","content":"加剧故障","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1536810378,"ip_address":"","comment_id":24117,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536807029","product_id":100014401,"comment_content":"FailOver假如在服务全部挂掉后会怎样呢？","like_count":0,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423848,"discussion_content":"加剧故障","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536810378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24014,"user_name":"Mr.","can_delete":false,"product_type":"c1","uid":1213096,"ip_address":"","ucode":"89F3B96A639482","user_header":"https://static001.geekbang.org/account/avatar/00/12/82/a8/abba514a.jpg","comment_is_top":false,"comment_ctime":1536752322,"is_pvip":false,"replies":[{"id":"8820","content":"后面实践篇会展开细讲","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1536810447,"ip_address":"","comment_id":24014,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536752322","product_id":100014401,"comment_content":"把之前了解的全部整理了一遍，这篇干货很多","like_count":0,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423808,"discussion_content":"后面实践篇会展开细讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536810447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24011,"user_name":"范闲","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1536751496,"is_pvip":false,"replies":[{"id":"8819","content":"tars","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1536810431,"ip_address":"","comment_id":24011,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536751496","product_id":100014401,"comment_content":"有啥cpp的微服务框架嘛","like_count":0,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423807,"discussion_content":"tars","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536810431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23873,"user_name":"文敦复","can_delete":false,"product_type":"c1","uid":1195258,"ip_address":"","ucode":"B8F4A6BD5D7805","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/fa/e2990931.jpg","comment_is_top":false,"comment_ctime":1536712642,"is_pvip":false,"replies":[{"id":"8747","content":"专栏后面有讲","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1536721624,"ip_address":"","comment_id":23873,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536712642","product_id":100014401,"comment_content":"一致性 Hash 算法如何处理服务器增加或者减少的问题？","like_count":0,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423764,"discussion_content":"专栏后面有讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536721624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23745,"user_name":"...","can_delete":false,"product_type":"c1","uid":1037826,"ip_address":"","ucode":"95B6293E8274C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d6/02/dfcf14be.jpg","comment_is_top":false,"comment_ctime":1536629747,"is_pvip":false,"replies":[{"id":"8648","content":"后面专栏会讲，可以了解下gRPC","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1536633416,"ip_address":"","comment_id":23745,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536629747","product_id":100014401,"comment_content":"您好，问一下，我看举的例子都是java的框架，如果是go语言开发，有什么好的服务治理框架呢？求推荐","like_count":1,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423704,"discussion_content":"后面专栏会讲，可以了解下gRPC","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536633416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}