{"id":93090,"title":"23 | å¦‚ä½•æ„é€ é…·ç‚«çš„ç‰©ç†æ•ˆæœå’Œè¿‡åœºåŠ¨ç”»æ•ˆæœï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æˆ´é“­ã€‚ä»Šå¤©ï¼Œæˆ‘è¦å’Œä½ åˆ†äº«çš„æ˜¯å¦‚ä½•ä¸ºä½  App æ·»åŠ é…·ç‚«çš„åŠ¨ç”»æ•ˆæœã€‚</p><p>ä¸è®ºæ˜¯iOSå¼€å‘ï¼Œè¿˜æ˜¯Androidå¼€å‘ï¼Œç°åœ¨çš„åŠ¨ç”»åº“å·®ä¸å¤šéƒ½éœ€è¦æ‰‹åŠ¨å»ç¼–å†™åŠ¨ç”»ä»£ç ã€‚è¿™æ ·çš„è¯ï¼ŒiOS å’Œ Android å¼€å‘è€…å°±éœ€è¦åˆ†åˆ«å»ç¼–å†™é€‚åˆè‡ªå·±ç³»ç»Ÿçš„ä»£ç ã€‚è€Œä¸”ï¼Œæ‰‹åŠ¨ç¼–å†™åŠ¨ç”»çš„ä»£ç ä¹Ÿéå¸¸å¤æ‚ï¼Œä¸å®¹æ˜“ç»´æŠ¤ï¼Œå¾ˆå¤šåŠ¨ç”»ç»†èŠ‚çš„è°ƒæ•´è¿˜éœ€è¦å’ŒåŠ¨ç”»è®¾è®¡å¸ˆä¸æ–­æ²Ÿé€šæ‰“ç£¨ï¼Œå°¤å…¶æ˜¯åƒè¡Œä»¥ä¸Šçš„åŠ¨ç”»ä»£ç ç¼–å†™ã€ç»´æŠ¤ã€æ²Ÿé€šçš„æˆæœ¬å·¨å¤§ã€‚</p><p>æ‰‹åŠ¨ç¼–å†™åŠ¨ç”»ä»£ç ï¼Œé™¤äº†ä¼šå½±å“åˆ°å¼€å‘è€…å¤–ï¼ŒåŠ¨ç”»è®¾è®¡å¸ˆä¹Ÿéš¾ä»¥å¹¸å…ã€‚ä¸€æ¬¾äº§å“é€‚é…çš„å¹³å°è¶Šå¤šï¼ŒåŠ¨ç”»è®¾è®¡å¸ˆè®¾è®¡èµ°æŸ¥çš„å‘¨æœŸå°±è¶Šé•¿ï¼Œç›¸åº”çš„åŠ¨ç”»æˆæœ¬å°±è¶Šé«˜ã€‚åŒæ—¶ï¼ŒåŠ¨ç”»è®¾è®¡å¸ˆå¾ˆå…´å¥‹åœ°è®¾è®¡å‡ºä¸€å¥—ç‚«é…·åœ°åŠ¨ç”»æ•ˆæœåï¼Œåœ¨è¦é€šè¿‡å¼€å‘è€…å®ç°å‡ºæ¥æ—¶ï¼Œå´å› ä¸ºå·¥æ—¶è¯„ä¼°è¿‡é•¿è€Œä¸€å†è¢«ç®€åŒ–ï¼Œç”šè‡³è¢«ç›´æ¥å–æ¶ˆã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œä»¥åä»–è¿˜ä¼šåŠ¨åŠ›åè¶³åœ°å»è®¾è®¡é…·ç‚«çš„åŠ¨ç”»æ•ˆæœå—ï¼Ÿ</p><p>æ‰€ä»¥ï¼Œä½ ä¼šå‘ç°ç°åœ¨æœ‰é…·ç‚«çš„åŠ¨ç”»æ•ˆæœçš„ App éå¸¸å°‘ï¼Œè€Œä¸”å¤šæ˜¯å‡ºè‡ªä¸ªäººå¼€å‘è€…ä¹‹æ‰‹ã€‚é‚£ä¹ˆï¼Œè¿™å°±æé«˜äº†å¯¹ä¸ªäººå¼€å‘è€…çš„è¦æ±‚ï¼Œä¸ä½†è¦æ±‚ä»–ä»£ç å†™å¾—å¥½ï¼Œè¿˜è¦èƒ½å¤Ÿè®¾è®¡å‡ºå¥½çš„åŠ¨ç”»æ•ˆæœã€‚ä½†æ˜¯ï¼Œè¿™æ ·çš„äººæ‰ä¹Ÿæ˜¯ä¸å¯å¤šå¾—ã€‚</p><p>é‚£ï¼Œåˆ°åº•æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤ŸæŠŠåŠ¨ç”»åˆ¶ä½œå’ŒAppå¼€å‘éš”ç¦»å¼€ï¼Œä¸“äººåšä¸“äº‹ï¼Œè€Œä¸”è¿˜èƒ½ä½¿å¾—å¤šä¸ªå¹³å°çš„åŠ¨ç”»æ•ˆæœä¿æŒä¸€è‡´å‘¢ï¼Ÿ</p><!-- [[[read_end]]] --><p>åŠæ³•æ€»æ¯”å›°éš¾å¤šã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€èµ·çœ‹çœ‹å¦‚ä½•å®ç°çš„é—®é¢˜å§ã€‚</p><h2>Lottie</h2><p><a href=\"http://airbnb.io/lottie/#/\">Lottie æ¡†æ¶</a>å°±å¾ˆå¥½åœ°è§£å†³äº†åŠ¨ç”»åˆ¶ä½œä¸å¼€å‘éš”ç¦»ï¼Œä»¥åŠå¤šå¹³å°ç»Ÿä¸€çš„é—®é¢˜ã€‚</p><p>Lottie æ˜¯ Airbnb å¼€æºçš„ä¸€ä¸ªåŠ¨ç”»æ¡†æ¶ã€‚Lottie è¿™ä¸ªåå­—æ¥è‡ªäºä¸€åå¾·å›½å¯¼æ¼”æ´›ç‰¹Â·èµ–å°¼æ ¼å°”ï¼ˆLotte Reinigerï¼‰ï¼Œå¥¹æœ€è‘—åçš„ç”µå½±å«ä½œâ€œé˜¿èµ«è¿ˆå¾·ç‹å­å†é™©è®°ï¼ˆThe Adventures of Prince Achmedï¼‰â€ã€‚è¿™ä¸ªæ¡†æ¶å’Œå…¶ä»–çš„åŠ¨ç”»æ¡†æ¶ä¸å¤ªä¸€æ ·ï¼ŒåŠ¨ç”»çš„ç¼–å†™å’Œç»´æŠ¤å°†ç”±åŠ¨ç”»è®¾è®¡å¸ˆå®Œæˆï¼Œå®Œå…¨æ— éœ€å¼€å‘è€…æ“å¿ƒã€‚</p><p>åŠ¨ç”»è®¾è®¡å¸ˆåšå¥½åŠ¨ç”»ä»¥åï¼Œå¯ä»¥ä½¿ç”¨<a href=\"https://www.adobe.com/products/aftereffects.html\">After Effects</a>å°†åŠ¨ç”»å¯¼å‡ºæˆJSONæ–‡ä»¶ï¼Œç„¶åç”±Lottie åŠ è½½å’Œæ¸²æŸ“è¿™ä¸ªJSONæ–‡ä»¶ï¼Œå¹¶è½¬æ¢æˆå¯¹åº”çš„åŠ¨ç”»ä»£ç ã€‚ç”±äºæ˜¯JSONæ ¼å¼ï¼Œæ–‡ä»¶ä¹Ÿä¼šå¾ˆå°ï¼Œå¯ä»¥å‡å°‘ App åŒ…å¤§å°ã€‚è¿è¡Œæ—¶è¿˜å¯ä»¥é€šè¿‡ä»£ç æ§åˆ¶æ›´æ”¹åŠ¨ç”»ï¼Œæ¯”å¦‚æ›´æ”¹é¢œè‰²ã€ä½ç½®ä»¥åŠä»»ä½•å…³é”®å€¼ã€‚å¦å¤–ï¼ŒLottie è¿˜æ”¯æŒé¡µé¢åˆ‡æ¢çš„è¿‡åœºåŠ¨ç”»ï¼ˆUIViewController Transitionsï¼‰ã€‚</p><p>ä¸‹é¢çš„ä¸¤å¼ åŠ¨ç”»ï¼Œå°±æ˜¯ä½¿ç”¨Lottie åšå‡ºæ¥çš„æ•ˆæœã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/4a/c9/4a6a19fdb4fc53757d27ddb6aa4380c9.gif?wh=900*507\" alt=\"\"></p><p><img src=\"https://static001.geekbang.org/resource/image/27/75/270ed9bc73a18fde74611bdbef419975.gif?wh=800*400\" alt=\"\"></p><p>ä¸Šé¢è¿™äº›åŠ¨ç”»ï¼Œå°±æ˜¯ç”±åŠ¨ç”»è®¾è®¡å¸ˆä½¿ç”¨ After Effects åˆ›ä½œï¼Œç„¶åä½¿ç”¨ <a href=\"https://github.com/airbnb/lottie-web\">Bodymovin</a>è¿›è¡Œå¯¼å‡ºçš„ï¼Œå¼€å‘è€…å®Œå…¨ä¸ç”¨åšä»€ä¹ˆé¢å¤–çš„ä»£ç å·¥ä½œï¼Œå°±èƒ½å¤Ÿä½¿ç”¨åŸç”Ÿæ–¹å¼å°†å…¶æ¸²æŸ“å‡ºæ¥ã€‚</p><p>Bodymovin æ˜¯ Hernan Torrisi åšçš„ä¸€ä¸ª After Effects çš„æ’ä»¶ï¼Œèµ·åˆå¯¼å‡ºçš„JSONæ–‡ä»¶åªæ˜¯é€šè¿‡ JavaScript åœ¨ç½‘é¡µä¸­è¿›è¡ŒåŠ¨ç”»çš„æ’­æ”¾ï¼Œåæ¥æ‰å°†JSONæ–‡ä»¶çš„è§£ææ¸²æŸ“åº”ç”¨åˆ°äº†å…¶ä»–å¹³å°ä¸Šã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨ Bodymovin å‘¢ï¼Ÿ</p><h2>Bodymovin</h2><p>ä½ éœ€è¦å…ˆåˆ°<a href=\"https://www.adobeexchange.com/creativecloud.details.12557.html\">Adobeå®˜ç½‘</a>ä¸‹è½½Bodymovinæ’ä»¶ï¼Œå¹¶åœ¨ After Effects ä¸­å®‰è£…ã€‚ä½¿ç”¨ After Effects åˆ¶ä½œå®ŒåŠ¨ç”»åï¼Œé€‰æ‹© Windows èœå•ï¼Œæ‰¾åˆ° Extensions çš„ Bodymovin é¡¹ï¼Œåœ¨èœå•ä¸­é€‰æ‹© Render æŒ‰é’®å°±å¯ä»¥è¾“å‡ºJSONæ–‡ä»¶äº†ã€‚</p><p><a href=\"https://lottiefiles.com/\">LottieFilesç½‘ç«™</a>è¿˜æ˜¯ä¸€ä¸ªåŠ¨ç”»è®¾è®¡å¸ˆåˆ†äº«ä½œå“çš„å¹³å°ï¼Œæ¯ä¸ªåŠ¨ç”»æ•ˆæœçš„JSONæ–‡ä»¶éƒ½å¯ä¸‹è½½ä½¿ç”¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ ç°åœ¨æ²¡æœ‰åŠ¨ç”»è®¾è®¡å¸ˆé…åˆçš„è¯ï¼Œå¯ä»¥åˆ°è¿™ä¸ªç½‘ç«™å»æŸ¥æ‰¾å¹¶ä¸‹è½½ä¸€ä¸ª Bodymovin ç”Ÿæˆçš„JSONæ–‡ä»¶ï¼Œç„¶åè¿ç”¨åˆ°å·¥ç¨‹ä¸­å»è¯•è¯•æ•ˆæœã€‚</p><h2>åœ¨ iOS ä¸­ä½¿ç”¨ Lottie</h2><p>åœ¨iOSå¼€å‘ä¸­ä½¿ç”¨Lottieä¹Ÿå¾ˆç®€å•ï¼Œåªè¦é›†æˆ Lottie æ¡†æ¶ï¼Œç„¶ååœ¨ç¨‹åºä¸­é€šè¿‡ Lottie çš„æ¥å£æ§åˆ¶ After Effects ç”Ÿæˆçš„åŠ¨ç”» JSON å°±è¡Œäº†ã€‚</p><p>é¦–å…ˆï¼Œä½ å¯ä»¥é€šè¿‡ CocoaPods é›†æˆ Lottie æ¡†æ¶åˆ°ä½ å·¥ç¨‹ä¸­ã€‚Lottie iOS æ¡†æ¶çš„ GitHub åœ°å€æ˜¯<a href=\"https://github.com/airbnb/lottie-ios/\">https://github.com/airbnb/lottie-ios/</a>ï¼Œå®˜æ–¹ä¹Ÿæä¾›äº†<a href=\"https://github.com/airbnb/lottie-ios/tree/master/Example\">å¯ä¾›å­¦ä¹ çš„ç¤ºä¾‹</a>ã€‚</p><p>ç„¶åï¼Œå¿«é€Ÿè¯»å–ä¸€ä¸ªç”±Bodymovin ç”Ÿæˆçš„JSONæ–‡ä»¶è¿›è¡Œæ’­æ”¾ã€‚å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>LOTAnimationView *animation = [LOTAnimationView animationNamed:@&quot;Lottie&quot;];\n[self.view addSubview:animation];\n[animation playWithCompletion:^(BOOL animationFinished) {\n  // åŠ¨ç”»å®Œæˆåéœ€è¦å¤„ç†çš„äº‹æƒ…\n}];\n</code></pre><p>åˆ©ç”¨ Lottie çš„åŠ¨ç”»è¿›åº¦æ§åˆ¶èƒ½åŠ›ï¼Œè¿˜å¯ä»¥å®Œæˆæ‰‹åŠ¿ä¸åŠ¨æ•ˆåŒæ­¥çš„é—®é¢˜ã€‚åŠ¨ç”»è¿›åº¦æ§åˆ¶æ˜¯ LOTAnimationView çš„ animationProgress å±æ€§ï¼Œè®¾ç½®å±æ€§çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>CGPoint translation = [gesture getTranslationInView:self.view];\nCGFloat progress = translation.y / self.view.bounds.size.height;\nanimationView.animationProgress = progress;\n</code></pre><p>Lottie è¿˜å¸¦æœ‰ä¸€ä¸ª UIViewController animation-controllerï¼Œå¯ä»¥è‡ªå®šä¹‰é¡µé¢åˆ‡æ¢çš„è¿‡åœºåŠ¨ç”»ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>#pragma mark -- å®šåˆ¶è½¬åœºåŠ¨ç”»\n\n// ä»£ç†è¿”å›æ¨å‡ºæ§åˆ¶å™¨çš„åŠ¨ç”»\n- (id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source {\n  LOTAnimationTransitionController *animationController = [[LOTAnimationTransitionController alloc] initWithAnimationNamed:@&quot;vcTransition1&quot; fromLayerNamed:@&quot;outLayer&quot; toLayerNamed:@&quot;inLayer&quot; applyAnimationTransform:NO];\n  return animationController;\n}\n\n// ä»£ç†è¿”å›é€€å‡ºæ§åˆ¶å™¨çš„åŠ¨ç”»\n- (id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForDismissedController:(UIViewController *)dismissed {\n  LOTAnimationTransitionController *animationController = [[LOTAnimationTransitionController alloc] initWithAnimationNamed:@&quot;vcTransition2&quot; fromLayerNamed:@&quot;outLayer&quot; toLayerNamed:@&quot;inLayer&quot; applyAnimationTransform:NO];\n  return animationController;\n}\n</code></pre><p>Lottie åœ¨è¿è¡ŒæœŸé—´æä¾›æ¥å£å’Œåè®®æ¥æ›´æ”¹åŠ¨ç”»ï¼Œæœ‰åŠ¨ç”»æ•°æ®æœç´¢æ¥å£ LOTKeyPathï¼Œä»¥åŠè®¾ç½®åŠ¨ç”»æ•°æ®çš„åè®® LOTValueDelegateã€‚è¯¦ç»†çš„è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹ä»£ç ï¼Œä½ å¯ä»¥å‚çœ‹<a href=\"http://airbnb.io/lottie/#/ios\">å®˜æ–¹ iOS æ•™ç¨‹</a>ã€‚</p><h2>å¤šå¹³å°æ”¯æŒ</h2><p>Lottie æ”¯æŒå¤šå¹³å°ï¼Œé™¤äº† æ”¯æŒ<a href=\"https://github.com/airbnb/lottie-ios\">iOS</a>ï¼Œè¿˜æ”¯æŒ <a href=\"https://github.com/airbnb/lottie-android\">Android</a> ã€<a href=\"https://github.com/react-native-community/lottie-react-native\">React Native</a>å’Œ<a href=\"https://github.com/simolus3/fluttie\">Flutter</a>ã€‚é™¤äº†å®˜æ–¹ç»´æŠ¤çš„è¿™äº›å¹³å°å¤–ï¼ŒLottieè¿˜æ”¯æŒ<a href=\"https://github.com/windows-toolkit/Lottie-Windows\">Windows</a>ã€<a href=\"https://blog.qt.io/blog/2019/03/08/announcing-qtlottie/\">Qt</a>ã€<a href=\"https://skia.org/user/modules/skottie\">Skia</a> ã€‚é™ˆå¿è¿˜å®ç°äº† <a href=\"https://github.com/chenqingspring/react-lottie\">React</a>ã€<a href=\"https://github.com/chenqingspring/vue-lottie\">Vue</a>å’Œ<a href=\"https://github.com/chenqingspring/ng-lottie\">Angular</a>å¯¹ Lottieçš„æ”¯æŒï¼Œå¹¶å·²å°†ä»£ç æ”¾åˆ°äº†GitHubä¸Šã€‚</p><p>æœ‰äº†è¿™ä¹ˆå¤šå¹³å°çš„æ”¯æŒï¼Œå¯¹äºåŠ¨ç”»è®¾è®¡å¸ˆæ¥è¯´ï¼Œå¯ä»¥å®‰å¿ƒåšåŠ¨ç”»ï¼Œåªè¦ç®€å•åœ°è½¬æ¢å°±å¯ä»¥å®Œç¾å±•ç°åŠ¨ç”»æ•ˆæœï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒåˆ°å¼€å‘è€…é‚£é‡ŒåŠ¨ç”»æ•ˆæœè¢«å¤§æ‰“æŠ˜æ‰£äº†ã€‚è€Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œå†ä¹Ÿä¸ç”¨å†™é‚£äº›éš¾ä»¥ç»´æŠ¤çš„å¤§é‡åŠ¨æ•ˆä»£ç äº†ï¼Œè€Œä¸”Appå®‰è£…åŒ…çš„ä½“ç§¯è¿˜å˜å°äº†ã€‚</p><p>é‚£ä¹ˆï¼Œ<strong>è¿™ä¹ˆç¥å¥‡çš„æ¡†æ¶ï¼Œåœ¨ iOS é‡Œåˆ°åº•æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</strong>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±çœ‹ä¸‹Lottieçš„å®ç°åŸç†å§ã€‚</p><p>é€šè¿‡åŸç†çš„å­¦ä¹ ï¼Œä½ ä¼šæŒæ¡é€šè¿‡ JSON æ¥æ§åˆ¶ä»£ç é€»è¾‘çš„èƒ½åŠ›ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥æŠŠè¿è¥æ´»åŠ¨æµç¨‹çš„ä»£ç é€»è¾‘è®¾è®¡ä¸ºä¸€ç§è§„èŒƒï¼Œå†è®¾è®¡ä¸€ä¸ªæ‹–æ‹½å·¥å…·ç”¨æ¥åˆ›å»ºè¿è¥æ´»åŠ¨æµç¨‹ï¼Œæœ€åç”Ÿæˆä¸€ä»½è¡¨ç¤ºè¿è¥æ´»åŠ¨é€»è¾‘çš„ JSONï¼Œä¸‹å‘åˆ° App å†…æ¥å¼€å¯æ–°çš„è¿è¥æ´»åŠ¨ã€‚</p><h2>Lottie å®ç°åŸç†</h2><p>å®é™…ä¸Šï¼Œ<a href=\"https://github.com/airbnb/lottie-ios\">Lottie iOS</a>åœ¨ iOS å†…åšçš„äº‹æƒ…å°±æ˜¯å°† After Effects ç¼–è¾‘çš„åŠ¨ç”»å†…å®¹ï¼Œé€šè¿‡JSONæ–‡ä»¶è¿™ä¸ªä¸­é—´åª’ä»‹ï¼Œä¸€ä¸€æ˜ å°„åˆ° iOS çš„ LayerModelã€Keyframeã€ShapeItemã€DashElementã€Markerã€Maskã€Transform è¿™äº›ç±»çš„å±æ€§ä¸­å¹¶ä¿å­˜äº†ä¸‹æ¥ï¼Œæ¥ä¸‹æ¥å†é€šè¿‡ CoreAnimation è¿›è¡Œæ¸²æŸ“ã€‚è¿™å°±å’Œä½ æ‰‹åŠ¨å†™åŠ¨ç”»ä»£ç çš„å®ç°æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¿™ä¸ªè¿‡ç¨‹çš„ç²¾å‡†æè¿°ï¼Œå…¨éƒ¨ç”±åŠ¨ç”»è®¾è®¡å¸ˆé€šè¿‡ JSONæ–‡ä»¶è¾“å…¥è¿›æ¥äº†ã€‚</p><p>Lottie iOS ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ Codableåè®®æ¥è§£æJSONæ–‡ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥äº«å—ç³»ç»Ÿå‡çº§å¸¦æ¥æ€§èƒ½æå‡çš„ä¾¿åˆ©ï¼Œæ¯”å¦‚ ShapeItem è¿™ä¸ªç±»è®¾è®¡å¦‚ä¸‹ï¼š</p><pre><code>// Shape Layer\nclass ShapeItem: Codable {\n  \n  /// shape çš„åå­—\n  let name: String\n  \n  /// shape çš„ç±»å‹\n  let type: ShapeType\n\n  // å’Œ json ä¸­å­—ç¬¦æ˜ å°„\n  private enum CodingKeys : String, CodingKey {\n    case name = &quot;nm&quot;\n    case type = &quot;ty&quot;\n  }\n  // åˆå§‹åŒ–\n  required init(from decoder: Decoder) throws {\n    let container = try decoder.container(keyedBy: ShapeItem.CodingKeys.self)\n    self.name = try container.decodeIfPresent(String.self, forKey: .name) ?? &quot;Layer&quot;\n    self.type = try container.decode(ShapeType.self, forKey: .type)\n  }\n\n}\n</code></pre><p>é€šè¿‡ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºï¼ŒShapeItem æœ‰ä¸¤ä¸ªå±æ€§ï¼Œæ˜ å°„åˆ°JSONçš„å­—ç¬¦é”®å€¼æ˜¯ nm å’Œ tyï¼Œåˆ†åˆ«ä»£è¡¨ shape çš„åå­—å’Œç±»å‹ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å†ä¸€èµ·çœ‹ä¸€æ®µ Bodymovin ç”Ÿæˆçš„JSONä»£ç ï¼š</p><pre><code>{&quot;ty&quot;:&quot;st&quot;,&quot;fillEnabled&quot;:true,&quot;c&quot;:{&quot;k&quot;:[{&quot;i&quot;:{&quot;x&quot;:[0.833],&quot;y&quot;:[0.833]},&quot;o&quot;:{&quot;x&quot;:[0.167],&quot;y&quot;:[0.167]},&quot;n&quot;:[&quot;0p833_0p833_0p167_0p167&quot;],&quot;t&quot;:22,&quot;s&quot;:[0,0.65,0.6,1],&quot;e&quot;:[0.76,0.76,0.76,1]},{&quot;t&quot;:36}]},&quot;o&quot;:{&quot;k&quot;:100},&quot;w&quot;:{&quot;k&quot;:3},&quot;lc&quot;:2,&quot;lj&quot;:2,&quot;nm&quot;:&quot;Stroke 1&quot;,&quot;mn&quot;:&quot;ADBE Vector Graphic - Stroke&quot;}\n\n</code></pre><p>åœ¨è¿™æ®µJSONä»£ç ä¸­ï¼Œnm é”®å¯¹åº”çš„å€¼æ˜¯ Stroke 1ï¼Œty é”®å¯¹åº”çš„å€¼æ˜¯ stã€‚é‚£æˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œ<strong>st æ˜¯ä»€ä¹ˆç±»å‹ã€‚</strong></p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒShapeType æ˜¯ä¸ªæšä¸¾ç±»å‹ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code>enum ShapeType: String, Codable {\n  case ellipse = &quot;el&quot;\n  case fill = &quot;fl&quot;\n  case gradientFill = &quot;gf&quot;\n  case group = &quot;gr&quot;\n  case gradientStroke = &quot;gs&quot;\n  case merge = &quot;mm&quot;\n  case rectangle = &quot;rc&quot;\n  case repeater = &quot;rp&quot;\n  case round = &quot;rd&quot;\n  case shape = &quot;sh&quot;\n  case star = &quot;sr&quot;\n  case stroke = &quot;st&quot;\n  case trim = &quot;tm&quot;\n  case transform = &quot;tr&quot;\n}\n</code></pre><p>é€šè¿‡ä¸Šé¢çš„æšä¸¾å®šä¹‰ï¼Œå¯ä»¥çœ‹åˆ° st å¯¹åº”çš„æ˜¯ stroke ç±»å‹ã€‚</p><p>Lottie å°±æ˜¯é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—çš„ç±»ç»“æ„ï¼Œå¯ä»¥å°†JSONæ•°æ®å…¨éƒ¨æ˜ å°„è¿‡æ¥ã€‚æ‰€æœ‰æ˜ å°„ç”¨çš„ç±»éƒ½æ”¾åœ¨ Lottie çš„ Model ç›®å½•ä¸‹ã€‚ä½¿ç”¨ CoreAnimation æ¸²æŸ“çš„ç›¸å…³ä»£ç éƒ½åœ¨ NodeRenderSystem ç›®å½•ä¸‹ï¼Œæ¯”å¦‚å‰é¢ä¸¾ä¾‹çš„ Stokeã€‚</p><p>åœ¨æ¸²æŸ“å‰ä¼šç”Ÿæˆä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®ç°åœ¨ StrokeNode.swift é‡Œï¼Œç„¶åå¯¹ StokeNode è¿™ä¸ªèŠ‚ç‚¹æ¸²æŸ“çš„é€»è¾‘åœ¨ StrokeRenderer.swift é‡Œã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// è®¾ç½® Context\nfunc setupForStroke(_ inContext: CGContext) {\n  inContext.setLineWidth(width) // è¡Œå®½\n  inContext.setMiterLimit(miterLimit)\n  inContext.setLineCap(lineCap.cgLineCap) // è¡Œé—´éš”\n  inContext.setLineJoin(lineJoin.cgLineJoin)\n\t// è®¾ç½®çº¿æ¡æ ·å¼\n  if let dashPhase = dashPhase, let lengths = dashLengths {\n    inContext.setLineDash(phase: dashPhase, lengths: lengths)\n  } else {\n    inContext.setLineDash(phase: 0, lengths: [])\n  }\n}\n\n// æ¸²æŸ“\nfunc render(_ inContext: CGContext) {\n  guard inContext.path != nil &amp;&amp; inContext.path!.isEmpty == false else {\n    return\n  }\n  guard let color = color else { return }\n  hasUpdate = false\n  setupForStroke(inContext)\n  inContext.setAlpha(opacity) // è®¾ç½®é€æ˜åº¦\n  inContext.setStrokeColor(color) // è®¾ç½®é¢œè‰²\n  inContext.strokePath()\n}\n</code></pre><p>è¿™æ®µä»£ç çœ‹èµ·æ¥æ˜¯ä¸æ˜¯å°±å¾ˆç†Ÿæ‚‰äº†ï¼Ÿ</p><p>å¦‚æœæ˜¯æ‰‹å†™åŠ¨ç”»ï¼Œè¿™äº›ä»£ç å°±éœ€è¦ä¸æ–­é‡å¤åœ°å†™ã€‚ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å»å†™åŠ¨ç”»çš„è¯ï¼Œä¹Ÿæ— éå°±æ˜¯å¤šå°è£…äº†ä¸€å±‚ï¼Œè€Œå±æ€§çš„è®¾ç½®ã€åŠ¨ç”»æ—¶é—´çš„è®¾ç½®ç­‰ï¼Œè¿˜æ˜¯éœ€è¦æ‰‹åŠ¨æ·»åŠ å¾ˆå¤šä»£ç æ¥å®Œæˆã€‚</p><p>ä½†æ˜¯ï¼Œä½¿ç”¨ Lottie åï¼Œä½ å°±å®Œå…¨ä¸ç”¨å»ç®¡è¿™äº›ä»£ç äº†ï¼Œåªéœ€è¦åœ¨ After Effects é‚£è®¾ç½®å±æ€§ã€æ§åˆ¶åŠ¨ç”»æ—¶é—´å°±å¥½äº†ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘åˆ†äº«äº†ä¸€ä¸ªåˆ¶ä½œåŠ¨ç”»çš„åˆ©å™¨ Lottieï¼Œå¹¶å’Œä½ è¯´äº†å¦‚ä½•åœ¨ iOS ä¸­ä½¿ç”¨ï¼Œä»¥åŠå®ƒçš„å®ç°åŸç†ã€‚å¬åˆ°è¿™ï¼Œä½ ä¸€å®šæ„Ÿåˆ°å¥‡æ€ªï¼Œ iOS å¼€å‘ä¸­è¿˜æœ‰å¾ˆå¤šä¼˜ç§€çš„åŠ¨ç”»æ¡†æ¶ï¼Œæ¯”å¦‚ Popï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆæˆ‘åªè·Ÿä½ è¯´äº† Lottie å‘¢ï¼Ÿ</p><p>å› ä¸ºåœ¨æˆ‘çœ‹æ¥ï¼Œ Lottie è¿™æ ·çš„å·¥ä½œæµç¨‹æˆ–è®¸å°±æ˜¯æœªæ¥çš„è¶‹åŠ¿ï¼Œå°±åƒ iOS ç°åœ¨çš„å‘å±•è¶‹åŠ¿ä¸€æ ·ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¸šåŠ¡é€»è¾‘ä¸å†éœ€è¦å…¨éƒ¨ä½¿ç”¨ Objective-C æˆ– Swift æ¥å®ç°äº†ï¼Œè€Œæ˜¯ä½¿ç”¨JavaScript è¯­è¨€æˆ–è€… DSL ç”šè‡³æ˜¯å·¥å…·æ¥æè¿°ä¸šåŠ¡ï¼Œç„¶åå°†æè¿°ä¸šåŠ¡çš„ä»£ç è½¬æ¢æˆä¸€ç§ä¸­é—´ä»£ç ï¼Œæ¯”å¦‚ JSONï¼Œä¸åŒå¹³å°å†å¯¹ç›¸åŒçš„ä¸­é—´ä»£ç è¿›è¡Œè§£æå¤„ç†ï¼Œä»¥æ‰§è¡Œä¸­é—´ä»£ç æè¿°çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p>è¿™æ ·åšä¸ä»…å¯ä»¥å‡è½» App åŒ…çš„å¤§å°ï¼Œå®ç°å¤šç«¯é€»è¾‘çš„ç»Ÿä¸€å¤„ç†ï¼Œè¿˜å¯ä»¥è®©å›¢é˜Ÿåˆ†å·¥æ›´åŠ æ˜ç¡®ï¼Œä¸€éƒ¨åˆ†äººä¸“é—¨å¼€å‘ä¸šåŠ¡ä»£ç ï¼Œå¦ä¸€éƒ¨åˆ†äººè´Ÿè´£ç«¯å†…ç¨³å®šæ€§ã€è´¨é‡æŠŠæ§ã€æ€§èƒ½æå‡å·¥ä½œçš„å»ºè®¾ã€‚</p><h2>è¯¾åä½œä¸š</h2><p>ç›¸ä¿¡ä½ çœ‹åˆ°è¿™ï¼Œä¸€å®šå·²ç»å¿ä¸ä½æƒ³å°è¯•èº«æ‰‹äº†ï¼Œé‚£ä¹ˆå°±è¯·ä½ åˆ° <a href=\"https://lottiefiles.com/\">LottieFiles</a>ç½‘ç«™ä¸‹è½½ä¸€ä¸ªJSONæ–‡ä»¶ï¼Œåšä¸€ä¸ª Lottie Demo æ„Ÿå—ä¸‹å§ã€‚</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","neighbors":{"left":{"article_title":"22 | ç»†è¯´ iOS å“åº”å¼æ¡†æ¶å˜è¿ï¼Œå“ªäº›æ€æƒ³å¯ä»¥ä¸ºæˆ‘æ‰€ç”¨ï¼Ÿ","id":93054},"right":{"article_title":"24 | A/B æµ‹è¯•ï¼šéªŒè¯å†³ç­–æ•ˆæœçš„åˆ©å™¨","id":93097}},"comments":[{"had_liked":false,"id":92443,"user_name":"ç¬è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1335108,"ip_address":"","ucode":"98C603307CA374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iaYibsvL94uobwgXsHVUnFh0AzibQAmWQicibytkmIEvmFhAPBpj8lXnjmYcJySqgDPoIeLAAicQFrIJVS9uNZbD7gmw/132","comment_is_top":false,"comment_ctime":1557275294,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"48801915550","product_id":100024501,"comment_content":"å¥½å¥‡å¤§ç¥æ˜¯æ€æ ·äº†è§£åˆ°è¿™äº›æˆ‘ä»¬ä¸€èˆ¬æ¥è§¦ä¸åˆ°çš„æ¸ é“ï¼Ÿæ˜¯é‡åˆ°é—®é¢˜ï¼Œä¸æ–­è¿½é—®ï¼Œå¯»æ‰¾ï¼Ÿ","like_count":12},{"had_liked":false,"id":91196,"user_name":"ä¸‰ä»¶äº‹","can_delete":false,"product_type":"c1","uid":1055819,"ip_address":"","ucode":"BCC867C8961A24","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/4b/2e5df06f.jpg","comment_is_top":false,"comment_ctime":1556903992,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31621675064","product_id":100024501,"comment_content":"ä¸€ç›´å¾ˆå¥½å¥‡å¦‚æœåªç”¨ç³»ç»Ÿapié‚£äº›å¤æ‚ä¸€äº›çš„åŠ¨ç”»éƒ½æ˜¯æ€ä¹ˆå®ç°å‡ºæ¥çš„ï¼Ÿå„ç§è®¡ç®—åæ ‡ï¼Œç”»çº¿ï¼Œä»–ä»¬æ˜¯å¦‚ä½•çŸ¥é“è¿™æ ·åšçš„å‘¢ï¼Ÿ","like_count":8},{"had_liked":false,"id":144711,"user_name":"èŠ±ä»™å­","can_delete":false,"product_type":"c1","uid":1249216,"ip_address":"","ucode":"9840BF416F1F0F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0f/c0/e6151cce.jpg","comment_is_top":false,"comment_ctime":1572004653,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14456906541","product_id":100024501,"comment_content":"Lottieç°åœ¨åªæœ‰swiftç‰ˆæœ¬ï¼Œæ²¡æœ‰objective-cç‰ˆæœ¬å—ï¼Œå¦‚æœç”¨objective-cåªèƒ½æ¡¥æ¥ä½¿ç”¨ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1002729,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4c/e9/6c5191ea.jpg","nickname":"æ—¶é—´éƒ½å»å“ªäº†","note":"","ucode":"F1A52A55218C0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":160494,"discussion_content":"å¯ä»¥ç”¨Lottie 2.3.5è¿™ä¸ªç‰ˆæœ¬","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580810221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2382667,"avatar":"","nickname":"æ–‡åŸ¹å®š","note":"","ucode":"A13E83C4FFDEBC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374950,"discussion_content":"pod &#39;lottie-ios&#39;, &#39;=2.5.2&#39;\nè¿™ä¸ªå¯ä»¥åœ¨OCä¸‹è¿è¡Œï¼Œè‡ªæµ‹OKï¼š\n- (void)testLottieAnimation{\n    LOTAnimationView *aniView = [LOTAnimationView animationNamed:@&#34;lf20_0y27xv96&#34;];\n    aniView.loopAnimation = YES;\n    [self.view addSubview:aniView];\n    [aniView play];\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621417161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91874,"user_name":"å´å°å®‰","can_delete":false,"product_type":"c1","uid":1371398,"ip_address":"","ucode":"EDF8E04F867069","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqr5ibqxYwcSgqPA7s49MZb1vEKKXT4mPTojwiclXkJf3ug26NuzTa6A5gbicR2rAUHdEkUAn13Rr2KQ/132","comment_is_top":false,"comment_ctime":1557124568,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14442026456","product_id":100024501,"comment_content":"ä½¿ç”¨SVGAçš„åº“ä¸æ˜¯æ•ˆæœæ›´å¥½ï¼Ÿè¿˜æ”¯æŒflashå¯¼å‡ºï¼Œè·Ÿlottieåœ¨æ€§èƒ½å†…å­˜ä¸Šå¯¹æ¯”å¦‚ä½•","like_count":4},{"had_liked":false,"id":90983,"user_name":"æ”¿","can_delete":false,"product_type":"c1","uid":1234640,"ip_address":"","ucode":"F17443038872DE","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/d0/259e7ce3.jpg","comment_is_top":false,"comment_ctime":1556766404,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10146700996","product_id":100024501,"comment_content":"Lottieç¡®å®æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œä½†æ˜¯ä¹‹å‰ä½¿ç”¨çš„æ—¶å€™é‡åˆ°è¿‡å¤§å°ä¸åŒ¹é…çš„é—®é¢˜ï¼Œä¸çŸ¥é“æ˜¯è®¾è®¡å¸ˆçš„é”…è¿˜æ˜¯æˆ‘çš„é”…ã€‚éœ€è¦ä»£ç è¿™è¾¹å»é€‚é…è¿™ä¸ªä¸å¤ªå‡†ç¡®çš„å¤§å°ã€‚","like_count":2},{"had_liked":false,"id":94742,"user_name":"å¾ç§€æ»¨","can_delete":false,"product_type":"c1","uid":1457337,"ip_address":"","ucode":"36895D00A181FB","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/b9/42b228f8.jpg","comment_is_top":false,"comment_ctime":1557888232,"is_pvip":false,"replies":[{"id":"35016","content":"åœ¨26ç¯‡é‡Œæˆ‘åˆ—äº†ä¸€ä¸ªä½¿ç”¨ JSON è¡¨ç¤º JavaScript ä»£ç é€»è¾‘çš„ JSON","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1558851331,"ip_address":"","comment_id":94742,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852855528","product_id":100024501,"comment_content":"è€å¸ˆï¼Œä½ è¯´çš„â€œé€šè¿‡ JSON æ¥æ§åˆ¶ä»£ç é€»è¾‘çš„èƒ½åŠ›â€èƒ½å†è®²è®²å—ï¼Ÿä½ ä¸¾çš„ä¾‹å­çœ‹ä¸æ‡‚<br>","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450190,"discussion_content":"åœ¨26ç¯‡é‡Œæˆ‘åˆ—äº†ä¸€ä¸ªä½¿ç”¨ JSON è¡¨ç¤º JavaScript ä»£ç é€»è¾‘çš„ JSON","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558851331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92471,"user_name":"å¹å•Šå¹å¹","can_delete":false,"product_type":"c1","uid":1455385,"ip_address":"","ucode":"FFB7D85C26145B","user_header":"https://static001.geekbang.org/account/avatar/00/16/35/19/4f9dc4b5.jpg","comment_is_top":false,"comment_ctime":1557279112,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5852246408","product_id":100024501,"comment_content":"å¤ªå¼ºäº†","like_count":2},{"had_liked":false,"id":91028,"user_name":"èµ·èª“å››å¢ƒ","can_delete":false,"product_type":"c1","uid":1305558,"ip_address":"","ucode":"7BF03EBFA57518","user_header":"https://static001.geekbang.org/account/avatar/00/13/eb/d6/24da1c90.jpg","comment_is_top":false,"comment_ctime":1556807295,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5851774591","product_id":100024501,"comment_content":"ä¹Ÿé‡åˆ°è¿‡æ¥¼ä¸Šä¸€æ ·çš„è°ƒæ•´å¤§å°ã€é€‚é…çš„é—®é¢˜ï¼Œé—®ä¸€ä¸‹ï¼Œå…¶ä»–åŒå­¦æœ‰æ²¡æœ‰å¥½çš„æ–¹æ¡ˆï¼Ÿ","like_count":2},{"had_liked":false,"id":90954,"user_name":"å¶æ»´å…³","can_delete":false,"product_type":"c1","uid":1454438,"ip_address":"","ucode":"506BCBD5706631","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/66/f4fe2778.jpg","comment_is_top":false,"comment_ctime":1556758087,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5851725383","product_id":100024501,"comment_content":"å¤ªå¥½äº†ï¼æ‰çŸ¥é“å±…ç„¶æœ‰è¿™ä¹ˆä¸€ä¸ªæ¡†æ¶ğŸ˜ƒï¼ŒåŠ¨ç”»æ•ˆæœä¸€ç›´æ˜¯æˆ‘çš„å¼±é¡¹ã€‚","like_count":1},{"had_liked":false,"id":226128,"user_name":"MELO","can_delete":false,"product_type":"c1","uid":2029340,"ip_address":"","ucode":"70BE8FBA819F73","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f7/1c/d1cff020.jpg","comment_is_top":false,"comment_ctime":1591956240,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591956240","product_id":100024501,"comment_content":"éå¸¸é€‚åˆä¸ªäººå¼€å‘è€…","like_count":0},{"had_liked":false,"id":166618,"user_name":"ç‡ƒã‚†ã‚‹å‘½","can_delete":false,"product_type":"c1","uid":1483061,"ip_address":"","ucode":"1981965D4BC317","user_header":"https://static001.geekbang.org/account/avatar/00/16/a1/35/40a9f436.jpg","comment_is_top":false,"comment_ctime":1577521689,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577521689","product_id":100024501,"comment_content":"ä¸€ç›´ä»¥ä¸ºæ˜¯å·¥ç¨‹å¸ˆè‡ªå·±ä»£ç å†™çš„  ç°åœ¨æ‰çŸ¥é“å®ç°çš„æ–¹æ³•","like_count":0},{"had_liked":false,"id":146419,"user_name":"ç™¾å˜é¢åŒ…è¶…äººğŸ§","can_delete":false,"product_type":"c1","uid":1458521,"ip_address":"","ucode":"9431AB4B259407","user_header":"https://static001.geekbang.org/account/avatar/00/16/41/59/9525530d.jpg","comment_is_top":false,"comment_ctime":1572518467,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1572518467","product_id":100024501,"comment_content":"åœ¨tabæ ä¸Šç”¨lottieåšçš„åŠ¨ç”»æ€ä¹ˆå»åšå±å¹•çš„é€‚é…å‘¢ï¼Œå¯èƒ½ä¼šæœ‰é»˜è®¤å›¾æ ‡å°ºå¯¸å¯¹ä¸ä¸Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1036572,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d1/1c/81b7031b.jpg","nickname":"ç‰›ç‰›","note":"","ucode":"06475887346FB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":103587,"discussion_content":"è¿™ä¸ªtabBar ä¸‰æ–¹åº“ï¼Œæ”¯æŒLottieã€‚ä¸çŸ¥é“æœ‰æ²¡æœ‰ä½ è¯´çš„é—®é¢˜https://github.com/ChenYilong/CYLTabBarController","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577375188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96859,"user_name":"èµ¶ç´§å­¦èµ·æ¥","can_delete":false,"product_type":"c1","uid":1523664,"ip_address":"","ucode":"965392C1C38638","user_header":"https://static001.geekbang.org/account/avatar/00/17/3f/d0/5bd853ea.jpg","comment_is_top":false,"comment_ctime":1558524648,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1558524648","product_id":100024501,"comment_content":"ocå·¥ç¨‹å¦‚ä½•ç”¨cocoapodsä½¿ç”¨lottie-ios swiftåº“ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2583710,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLf83hK8eSmqia43jSftGNsZMBISQHl5BusCF2icXCs055z52sLjAkibUGViao8ibEMNNrQXHy9sTP2VoA/132","nickname":"Geek_193c78","note":"","ucode":"FDE63396C71891","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377331,"discussion_content":"è‡ªå·±ç”¨swiftå°è£…ä¸€å±‚,ä¾›OCè°ƒç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622604791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1453760,"avatar":"","nickname":"Calabash_Boy","note":"","ucode":"19E4D819792983","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":926,"discussion_content":"lottieçš„2.5.3ç‰ˆæœ¬æ˜¯OCçš„,ä½ å¯ä»¥æŒ‡å®šç‰ˆæœ¬å¼•å…¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562153697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94511,"user_name":"å¬åŒ—å†¥","can_delete":false,"product_type":"c1","uid":1092761,"ip_address":"","ucode":"96FA7B6552B7FC","user_header":"https://static001.geekbang.org/account/avatar/00/10/ac/99/27d50976.jpg","comment_is_top":false,"comment_ctime":1557829390,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557829390","product_id":100024501,"comment_content":"æˆ´è€å¸ˆï¼Œæ€ä¹ˆè°ƒæ•´åŠ¨ç”»çš„å¤§å°å’Œä½ç½®ï¼Ÿå°è¯•ç”¨äº†contentModeå‚æ•°ï¼Œæ²¡æœ‰æƒ³è¦çš„æ•ˆæœã€‚ã€‚ã€‚ã€‚åƒæˆ‘ æƒ³æŠŠè¿™ä¸ªåŠ¨ç”» https:&#47;&#47;lottiefiles.com&#47;295-refresh å½“åšæŸä¸ªViewçš„åˆ†å‰²çº¿ï¼Œå› ä¸ºjsonåŠ¨ç”»ä¸æ˜¯å¡«æ»¡æ•´ä¸ªèƒŒæ™¯çš„ï¼Œæ‰€ä»¥åŠ è½½ä¸Šå»çš„æ—¶å€™å°±åªæœ‰ä¸€å°å—æ˜¾ç¤ºï¼Œç½‘ä¸Šæ‰¾ä¸åˆ°ç›¸å…³çš„æ–¹æ³•","like_count":0},{"had_liked":false,"id":93918,"user_name":"å¼€å…ƒâ‚‚Â³Â³Â³Â³Â³Â³Â³","can_delete":false,"product_type":"c1","uid":1170155,"ip_address":"","ucode":"AB391580A9B051","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/eb/0a356fdb.jpg","comment_is_top":false,"comment_ctime":1557666807,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557666807","product_id":100024501,"comment_content":"æˆ‘ä¹Ÿå¾ˆå¥½å¥‡ï¼Œåƒæ˜¯è¿™ç§æ¡†æ¶ï¼Œè€å¸ˆæ˜¯æ€ä¹ˆçŸ¥é“çš„å‘¢ï¼Ÿä»€ä¹ˆé€”å¾„èƒ½äº†è§£åˆ°è¿™äº›æ¡†æ¶çš„å­˜åœ¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":91124,"user_name":"data","can_delete":false,"product_type":"c1","uid":1010493,"ip_address":"","ucode":"4EEC3CE11E65F8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/3d/ae41c2b3.jpg","comment_is_top":false,"comment_ctime":1556871887,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1556871887","product_id":100024501,"comment_content":"æ„Ÿè§‰æ¯ç¯‡æ–‡ç« æˆ‘éƒ½éœ€è¦ç”¨å¾ˆé•¿çš„æ—¶é—´æ¶ˆè€—","like_count":0,"discussions":[{"author":{"id":2382667,"avatar":"","nickname":"æ–‡åŸ¹å®š","note":"","ucode":"A13E83C4FFDEBC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374940,"discussion_content":"å…ˆæŠŠæ‰€æœ‰æ–‡ç« ä¸ç®¡çœ‹ä¸çœ‹å¾—æ‡‚éƒ½è¿‡ä¸€éï¼Œç¬¬äºŒæ¬¡çœ‹çš„æ—¶å€™å°±æ„Ÿè§‰å¾ˆç®€å•äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621416195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90953,"user_name":"Moon","can_delete":false,"product_type":"c1","uid":1455141,"ip_address":"","ucode":"D062B481A9171F","user_header":"https://static001.geekbang.org/account/avatar/00/16/34/25/1dfe5086.jpg","comment_is_top":false,"comment_ctime":1556757753,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556757753","product_id":100024501,"comment_content":"666ï¼Œå—æ•™äº†ã€‚","like_count":0}]}