{"id":1294,"title":"12 | æ¯ä¸ªå·¥ç¨‹å¸ˆéƒ½åº”è¯¥äº†è§£çš„ï¼šæ•°æ®åº“çŸ¥è¯†","content":"<p>æ•°æ®åº“å’Œç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒåŒæ ·æ˜¯è½¯ä»¶å·¥ç¨‹å¸ˆä»¬çš„å¿…äº‰ä¹‹åœ°ã€‚ä»Šå¤©æˆ‘å°±å’Œå¤§å®¶èŠä¸€äº›æ•°æ®åº“ç›¸å…³çš„çŸ¥è¯†ã€‚</p>\n<p>å»å¹´ Uber å‘è¡¨äº†ä¸€ç¯‡æ–‡ç« ï¼Œå®£å¸ƒä»–ä»¬ä» PostgreSQL è½¬åˆ° MySQL äº†ã€‚æ–‡ç« çš„å†…å®¹å¾ˆå¥½ï¼ŒåŒæ—¶è¿˜ç§‘æ™®äº†ä¸€äº›æ•°æ®åº“ç´¢å¼•å’Œå¤åˆ¶çš„åŸºæœ¬å¸¸è¯†ã€‚å½“æ—¶ï¼Œæˆ‘è½¬ç»™äº†ä¸€ä¸ªæœ‹å‹ï¼Œæœ‹å‹çœ‹äº†ä¹‹åè¯´ï¼šâ€œå“¦ï¼Œä»–ä»¬ 2013 å¹´æ‰å‘äº†ä¸€ç¯‡æ–‡ç« è¯´ä»–ä»¬ä» MySQL è½¬åˆ° PostgreSQL ã€‚â€</p>\n<p>æˆ‘æ‰¾æ¥æœ‹å‹æåˆ°çš„é‚£ç¯‡æ—§æ–‡ï¼Œè¯»è¿‡ä¹‹åï¼Œå¤§æ¦‚ç†è§£äº†ä¸¤ç¯‡è½¬å‹æ–‡ç« èƒŒåçš„åŸå› ã€‚</p>\n<p>ä½œä¸ºä¸¤å¤§ä¸»æµå¼€æºæ•°æ®åº“ï¼ŒMySQL å’Œ PostgreSQL çš„ â€œæˆ˜äº‰â€ ä»æœªåœæ­¢ï¼Œè™½ç„¶ç¡çƒŸä¸å¦‚ç¼–ç¨‹è¯­è¨€é‚£ä¹ˆæµ“çƒˆï¼Œä½†ä¹Ÿæ˜¯ä½ æ¥æˆ‘å¾€ï¼Œå‰‘å½±åˆ€å…‰ã€‚</p>\n<p>å¦‚æœå» Quora æˆ–è€… Stack Overflow ä¸Šæœç´¢ MySQL V.S. PostgreSQL  è¿™æ ·çš„å…³é”®å­—ï¼Œä¼šå‡ºç°ä¸€å¤§å †å¸–å­ï¼Œå¤§å®¶å„æ‰§ä¸€è¯ä¼—è¯´çº·çº­ï¼Œæˆ‘çš„æ„Ÿè§‰åˆ™æ˜¯ï¼šä¸¤è€…å„æœ‰å„çš„ä¼˜åŠ¿å’Œä½¿ç”¨åœºæ™¯ï¼Œå¹¶ä¸å­˜åœ¨ä¸€ç§æ•°æ®åº“å¯¹å¦ä¸€ç§å‹å€’æ€§ä¼˜åŠ¿ã€‚</p>\n<p>å¯¹äºå¤§éƒ¨åˆ†ç¨‹åºå‘˜æ¥è¯´ï¼Œå…¬å¸ç”¨å“ªä¸ªæ•°æ®åº“ï¼ŒåŸºæœ¬æ— éœ€ä½ å»å†³å®šã€‚åŠ å…¥ä¸€ä¸ªå…¬å¸çš„æ—¶å€™ï¼Œé™¤éæ˜¯åˆ›ä¸šå…¬å¸ï¼Œæˆ–è€…ä½ æ˜¯ CTOã€VPã€æ€»ç›‘çº§åˆ«çš„ï¼Œå¦åˆ™å¤§éƒ¨åˆ†çš„æŠ€æœ¯é€‰å‹æ—©å·²åº”è¯¥å°˜åŸƒè½å®šã€‚</p>\n<p>å°¤å…¶æ˜¯æ•°æ®åº“ï¼Œä¸€æ—¦é€‰æ‹©ï¼Œå†è¿ç§»çš„ä»£ä»·éå¸¸å¤§ã€‚å› æ­¤ï¼Œé™¤éæœ‰é¢ è¦†æ€§çš„ä¼˜åŠ¿æˆ–è€…éš¾ä»¥å…‹æœçš„é—®é¢˜ï¼Œå¾ˆå°‘æœ‰å…¬å¸ä¼šå»è´¹æ—¶è´¹åŠ›åšè¿™ç§å¤§çš„è¿ç§»ã€‚</p>\n<p>ä¸è®ºæ˜¯æŠ€æœ¯é€‰å‹è¿˜æ˜¯æŠ€æœ¯è½¬å‹ï¼Œå…¶ä¸­ä¸å¯å¿½ç•¥çš„å› ç´ æ˜¯ï¼šä½ çš„å·¥ç¨‹å¸ˆæ›´å®¹æ˜“é©¾é©­å“ªä¸€ç§æŠ€æœ¯ï¼Œæˆ–è€…æœ‰è¯è¯­æƒçš„å†³ç­–è€…ä»¬å€¾å‘äºå“ªä¸€ç§æŠ€æœ¯ã€‚è¿™ä¸€ç‚¹å…¶å®å’Œç¨‹åºè¯­è¨€çš„é€‰å‹æœ‰å¼‚æ›²åŒå·¥ä¹‹å¤„ã€‚</p>\n<p>ç±»ä¼¼ Uber ä¸¤æ¬¡é«˜è°ƒè½¬å‹çš„äº‹æƒ…ï¼Œåœ¨æˆ‘æ›¾ç»å·¥ä½œè¿‡çš„ Square å…¬å¸ä¹Ÿå‘ç”Ÿè¿‡ã€‚</p>\n<p>Square æœ€æ—©ä½¿ç”¨çš„æ˜¯ MySQLï¼Œåˆ°äº† 2012 å¹´ï¼Œç”±äº PostgreSQL çš„å„ç§ä¼˜åŠ¿è¶Šæ¥è¶Šçªå‡º â€”â€” æ¯”å¦‚å¯¹åœ°ç†ç©ºé—´ï¼ˆGeospatialï¼‰æ•°æ®å’Œæœç´¢çš„æ”¯æŒï¼Œå½“æ—¶å‡ ä½èµ„æ·±å·¥ç¨‹å¸ˆä¹Ÿå¼€å§‹å¤§åŠ›å€¡å¯¼ï¼Œå¾ˆå¤šæ–°çš„æœåŠ¡å°±å°è¯•æ€§åœ°ä½¿ç”¨ PostgreSQLã€‚</p>\n<p>é‚£æ—¶å€™ï¼Œå…¬å¸çš„æ¶æ„æ˜¯ MySQL å’Œ PostgreSQL å¹¶å­˜çš„ã€‚å¯¹äºæˆ‘è€Œè¨€ï¼Œè¿™å°±æœ‰æœºä¼šå­¦ä¹ ã€æŒæ¡å’Œæ¯”è¾ƒä¸¤ç§ä¸åŒçš„æŠ€æœ¯ã€‚</p>\n<p>åœ¨æˆ‘æ¥çœ‹ï¼Œä¸¤è€…å„æœ‰ç‰¹ç‚¹ï¼Œæœ‰äº›æŠ€æœ¯å®ç°åœ¨ MySQL é‡Œæ›´æ–¹ä¾¿ä¸€ç‚¹ï¼Œå¦ä¸€äº›åˆ™åä¹‹ã€‚æ— è®ºå“ªç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œæ€»æœ‰æ–¹æ¡ˆå¯ä»¥è§£å†³é—®é¢˜ï¼Œå¹¶æ²¡æœ‰è§‰å¾—éè¦å“ªä¸€ç§æ‰è¡Œã€‚</p>\n<p>ä¸€ä¸ªå…¬å¸å¦‚æœæ•°æ®åº“ä»æ¥ä¸å‡ºé—®é¢˜ï¼Œé‚£ä¸€å®šæ˜¯å› ä¸ºæ²¡æœ‰ä¸šåŠ¡é‡æˆ–è€…æµé‡ã€‚æ‰€æœ‰æŠ€æœ¯çš„é€‰å‹å’Œè®¾è®¡ï¼Œéƒ½æœ‰å®ƒçš„åº”ç”¨åœºæ™¯ï¼Œé™¤å»é‚£äº›è®©äººå¼€å¿ƒçš„æ¡ˆä¾‹ï¼Œå‰©ä¸‹çš„æ¯«æ— ç–‘é—®å°±æ˜¯å‘ã€‚</p>\n<p>å¦‚ä½•å°½å¯èƒ½åœ°é¿å¼€è¿™äº›å‘ï¼Œå¦‚ä½•åœ¨å‡ºç°é—®é¢˜çš„æ—¶å€™å¯ä»¥ç”¨æœ€å¿«çš„é€Ÿåº¦å»ä¿®å¤ï¼Œè¿™äº›éƒ½æ˜¯è‡³å…³é‡è¦çš„å› ç´ ã€‚</p>\n<p>å¤§éƒ¨åˆ†å·¥ç¨‹å¸ˆå¹¶ä¸æ˜¯æ•°æ®åº“ä¸“å®¶ï¼Œåœ¨ Square å…¬å¸ä¸¤ç§æ•°æ®åº“å¹¶å­˜çš„æœŸé—´ï¼ŒPostgreSQL çš„ç‰›äººå¯¥å¯¥æ— å‡ ï¼Œä½†æ˜¯ MySQL å´æœ‰å‡ ä¸ªä¸“å®¶æ˜¯æä¸ºé è°±çš„ã€‚å¯¹æˆ‘ä»¬è€Œè¨€  ï¼ŒPostgreSQL å’Œ MySQL çš„ç›¸å¯¹ä¼˜åŠ¿ï¼Œéƒ½æ¯”ä¸è¿‡å‡ºé—®é¢˜çš„æ—¶å€™æœ‰äººæ•‘ç«å’Œè§£æƒ‘æ¥çš„é‡è¦ã€‚</p>\n<p>å¦å¤–ï¼Œä¸€ä¸ªå…¬å¸ç»´ç³»ä¸¤å¥—åŒç±»çš„æ•°æ®åº“ç³»ç»Ÿæœ¬èº«å°±æ˜¯ä¸ªè´Ÿæ‹…ï¼Œå› ä¸ºè¿™äº›åŸå› ï¼Œé‚£äº›ä½¿ç”¨ PostgreSQL çš„æœåŠ¡æ…¢æ…¢å°±è½¬æˆäº† MySQL ã€‚</p>\n<p>æˆ‘ä»¬æ”¯ä»˜ç±»çš„æŠ€æœ¯å·¥ä½œéœ€è¦å¼ºäº‹åŠ¡å’Œä¸€è‡´æ€§çš„æ”¯æŒï¼Œæ‰€ä»¥ NoSQL ç±»å‹çš„æ•°æ®åº“ç”¨å¾—æ¯”è¾ƒå°‘ï¼Œä¸»è¦ä½¿ç”¨çš„æ˜¯ MySQL æˆ–è€… PostgreSQLã€‚ç”±äºåœ¨å·¥ä½œä¸­å¸¸å¸¸ä¸æ•°æ®åº“æ‰“äº¤é“ï¼Œæˆ‘ä¹Ÿé€æ¸äº†è§£åˆ°ä¸å°‘ç›¸å…³çš„çŸ¥è¯†å’ŒæŠ€æœ¯ï¼Œä½†æ˜¯çº¿ä¸ŠçœŸçš„å‡ºäº†é—®é¢˜ï¼Œæˆ‘è¿˜æ˜¯æ²¡æœ‰æŠŠæ¡è‡ªå·±å»æå®šã€‚</p>\n<p>å¥½åœ¨ï¼Œæ¯ä¸ªå…¬å¸éƒ½ä¼šæœ‰ä¸€äº›ä¸“æ”»æ•°æ®åº“çš„å¤§ç‰›ï¼Œè¿™ç§ä¸“é—¨çš„èŒä½ä¾¿æ˜¯ DBAï¼Œæœ‰çš„ä¸­å°åˆ›ä¸šå…¬å¸æ²¡æœ‰ä¸“èŒ DBAï¼Œæ•°æ®åº“ä¾¿ç”±åšè¿ç»´çš„äººç»´æŠ¤ã€‚æˆ‘å’Œå‡ ä½è¿™æ ·çš„ç‰›äººç§äº¤ç”šå¥½ï¼ŒåŠ ä¹‹å¹³æ—¶è‡ªå·±å¤„ç†èµ·ç³»ç»Ÿä¸­å‡ºç°çš„ç›¸å…³é—®é¢˜ï¼Œä¹Ÿä¼šå¸¸å¸¸è¯·æ•™ä»–ä»¬ï¼Œä¸€æ¥äºŒå»å°±çŸ¥é“äº†å¾ˆå¤šæœ‰è¶£çš„æ•°æ®åº“çŸ¥è¯†ã€‚</p>\n<p>å¯¹æ•°æ®åº“ä¸“å®¶æˆ‘ä¸€å‘æ˜¯æ•¬ä½©çš„æ€åº¦ï¼Œä»–ä»¬çš„ä»·å€¼ä¸å¯å°è§‘ã€‚å…¬å¸åªè¦ç¨å…·è§„æ¨¡ï¼Œå¦‚æœæ•°æ®åº“è¿™å—åšä¸å¥½ï¼ŒåŸºæœ¬ä¹Ÿå°±æ²¡ä»€ä¹ˆå¯ç©çš„äº†ã€‚æ•°æ®åº“å¯ä»¥è¯´æ˜¯äº’è”ç½‘å…¬å¸æœ€å®è´µçš„èµ„äº§ï¼Œè¿™å—ä¸å‡ºé—®é¢˜ä¹Ÿç½¢ï¼Œä¸€å‡ºé—®é¢˜ï¼Œå³æ˜¯è§è¡€å°å–‰ï¼ŒæœåŠ¡ç›´æ¥å®•æœºã€‚</p>\n<h1>å…³äºæ•°æ®åº“ï¼Œæœ€å¸¸è§çš„é—®é¢˜éƒ½æœ‰å“ªäº›å‘¢ï¼Ÿ</h1>\n<!-- [[[read_end]]] -->\n<h2>ç¬¬ä¸€ä¸ªæ˜¯é€‰å‹</h2>\n<p>å› ä¸ºæ¯ä¸ªå…¬å¸çš„ä¸šåŠ¡ä¸åŒï¼Œæ•°æ®åº“ç³»ç»Ÿçš„åº”ç”¨åœºæ™¯ä¸ä¸€æ ·ï¼Œé€‰å‹ä¹Ÿä¼šä¸å°½ç›¸åŒï¼Œä½†å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œæ²¡æœ‰å“ªä¸ªç³»ç»Ÿä¸€å®šæ˜¯æœ€å¥½çš„ã€‚</p>\n<p>æ¯”å¦‚åšæ”¯ä»˜ä¸šåŠ¡ä¸€å®šè¦å¼ºäº‹åŠ¡æ€§ã€ä¸€è‡´æ€§çš„æ”¯æŒï¼Œå¾ˆå¤šç¤¾äº¤å¹³å°æ›´å¤šæ—¶å€™éœ€è¦çš„æ˜¯é«˜å¯ç”¨ï¼›æœ‰çš„ä¸šåŠ¡å†™æ“ä½œç‰¹åˆ«é‡ï¼Œæœ‰çš„ä¸šåŠ¡æ›´é‡è¦çš„æ˜¯è¯»æ“ä½œï¼›æœ‰çš„ä¸šåŠ¡å¯èƒ½åªå…³å¿ƒæœ€è¿‘å‡ å¤©çš„æ•°æ®ï¼Œäºæ˜¯å¯ä»¥å®¹å¿è€æ•°æ®è¯»å†™çš„ä½æ•ˆï¼Œæœ‰çš„å´è¦é¢‘é¢‘è®¿é—®å†å²æ•°æ®ï¼Œéœ€è¦è¯»å†™çš„é«˜æ•ˆï¼›æœ‰çš„ä¸šåŠ¡å¯ä»¥é€šè¿‡åŠ ç´¢å¼•è§£å†³æŸ¥è¯¢æ•ˆç‡ï¼Œæœ‰çš„å´åªèƒ½é€šè¿‡åŠ ç¼“å­˜ç­‰ç­‰ã€‚</p>\n<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬å¸ä¼šé€‰æ‹©å¤šä¸ªæ•°æ®åº“ç³»ç»Ÿå¹¶å­˜ï¼Œé€šè¿‡ä¸åŒçš„æŠ€æœ¯å’Œæ¶æ„ç»™äºˆç›¸å…³çš„ä¸šåŠ¡åœºæ™¯æœ€ä¼˜æ”¯æŒã€‚å¦‚æœä¸€æ—¦é€‰å‹å¤±è¯¯ï¼Œä¾¿ä¸ä¼šæœ‰é¢‘é¢‘è¸©å‘ä¸€è¯´ï¼Œå› ä¸ºè¿™åŸºæœ¬å°±ç®—ç›´æ¥æ‰è¿›äº†å‘é‡Œã€‚</p>\n<h2>ç¬¬äºŒä¸ªæ˜¯æ•°æ®åº“ç›¸å…³çš„æ¶æ„</h2>\n<p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿè¿™é‡Œçš„æ¶æ„åŒ…æ‹¬æ•°æ®åº“ä¸Šå±‚çš„ç¼“å­˜ç³»ç»Ÿè®¾è®¡ï¼Œç¨‹åºè¯­è¨€å¯¹æ•°æ®åº“è¿æ¥çš„å¤„ç†ï¼Œä»£ç†å±‚ï¼ˆProxy Layerï¼‰çš„åŠŸèƒ½ï¼Œä»¥åŠå’ŒäºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinlogï¼‰ç­‰ç›¸å…³çš„æ•°æ®ç®¡é“ï¼ˆData Pipelineï¼‰çš„æ­å»ºã€‚å½“ç„¶ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬äº†æ•°æ®åº“ç³»ç»Ÿçš„åˆ†åŒºã€å¤‡ä»½ç­‰çš„å…·ä½“è®¾è®¡ã€‚</p>\n<p>å¾ˆå¤šå…¬å¸æ—©æœŸæ‰€æœ‰çš„è¡¨éƒ½åœ¨ä¸€ä¸ªæ•°æ®åº“é‡Œé¢ï¼Œå› ä¸ºå„ç§è¿æ¥æ± ï¼ˆConnection Poolï¼‰å’Œååé‡ï¼ˆThroughputï¼‰çš„é™åˆ¶ï¼ŒåŸºæœ¬æ²¡æ³•åšæ‰©å±•ã€‚èƒ½å¤Ÿåˆç†åœ°è®¾è®¡æ•°æ®åº“è¡¨çš„åˆ†ç¦»ï¼ŒæŠŠæ•°æ®ç›¸å…³çš„æ”¾åœ¨ä¸€èµ·ï¼Œä¸é‚£ä¹ˆç›¸å…³æˆ–ç”šè‡³ä¸ç›¸å…³çš„æ”¾åœ¨å¦ä¸€ä¸ªæ•°æ®åº“é‡Œã€‚è¿™äº›çœ‹èµ·æ¥å¾ˆç®€å•çš„åšæ³•ï¼Œå¾ˆå¤šæ—¶å€™å´å¯ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šç¼“è§£å¯æ‰©å±•çš„é—®é¢˜ã€‚</p>\n<h2>ç¬¬ä¸‰ä¸ªï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¹³æ—¶é‡åˆ°æœ€å¤šé—®é¢˜çš„ï¼šäººä¸ºé”™è¯¯</h2>\n<p>å†å¥½çš„ç³»ç»Ÿï¼Œä½¿ç”¨å§¿åŠ¿ä¸å¯¹ä¹Ÿæ˜¯æ‰ç„¶ï¼Œæ›´ä½•å†µå¹¶ä¸æ˜¯æ‰€æœ‰çš„å·¥ç¨‹å¸ˆéƒ½æ˜¯æ•°æ®åº“ä¸“å®¶ï¼Œæ‰€ä»¥äººä¸ºçš„é”™è¯¯æ˜¯æœ€å¸¸å‡ºç°çš„é—®é¢˜ã€‚</p>\n<p>äººä¸ºé”™è¯¯åˆ†æˆä¸¤ç§ã€‚ ä¸€ç§æ˜¯æ“ä½œæ•°æ®åº“æ—¶çŠ¯çš„é”™è¯¯ã€‚å¦ä¸€ç§æ˜¯ç¨‹åºå‘˜åœ¨ç¨‹åºé‡Œæˆ–è€…è„šæœ¬é‡ŒçŠ¯çš„é”™è¯¯ã€‚</p>\n<p>æ“ä½œæ•°æ®åº“æ—¶çŠ¯çš„é”™è¯¯çš„æ¦‚ç‡æ¯”è¾ƒä½ï¼Œä½†å±å®³å´æœ€å¤§ã€‚å‡ ä¹æ‰€æœ‰çš„å…¬å¸éƒ½ä¼šæœ‰ç±»ä¼¼çš„ä¼ å¥‡æ—¶é—´ï¼Œæˆ‘å¬è¿‡çš„å°±æœ‰ä¸‰ç§è¯¯æ“ä½œçš„ç‰ˆæœ¬ã€‚</p>\n<p>ç¬¬ä¸€ç§æ˜¯å·¥ç¨‹å¸ˆæ— æ„æˆ–æœ‰æ„ï¼Œâ€œä¸å°å¿ƒâ€ åˆ æ‰äº†æ•°æ®åº“æ ¸å¿ƒè¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ã€‚è¿™ä¸æ˜¯æ®µå­ï¼Œåœ¨ Facebook å°±æ›¾ç»å‘ç”Ÿè¿‡ç±»ä¼¼çš„äº‹æƒ…ï¼Œå½“äº‹äººè¿˜æ˜¯æˆ‘çš„ä¸€ä¸ªæœ‹å‹ï¼Œå¥½åœ¨åæ¥æ¢å¤äº†ï¼Œè¿™äº‹å„¿ä¾¿ä¹Ÿæˆäº†ä»–çš„å·¥ç¨‹å¸ˆå†å²ä¸Šå…‰è¾‰çš„ä¸€ç¬”ã€‚</p>\n<p>ç¬¬äºŒç§å·¥ç¨‹å¸ˆåœ¨çº¿ä¿®æ”¹è¡¨ç»“æ„ï¼ˆ online schema change ï¼‰çš„æ—¶å€™ï¼Œä¸å°å¿ƒä¸€æ­¥è¯¯æ“ä½œï¼Œç»“æœæ•°æ®åº“è¢«é”ï¼ˆ Lock ï¼‰é•¿è¾¾å‡ ä¸ªå°æ—¶ï¼Œè¯¥å…¬å¸ç½‘ç«™ä¹Ÿå°±æŒ‚äº†å¥½å‡ ä¸ªå°æ—¶ã€‚</p>\n<p>ç¬¬ä¸‰ç§æ˜¯å¬å›½å†…ä¸€ä¸ªå¤§å…¬å¸çš„æœ‹å‹è¯´çš„ï¼Œç»†èŠ‚è¿˜å·²ç»æ— æ³•è¿˜åŸã€‚åªè®°å¾—å¬è¯´ä»–ä»¬çš„ä¸¤å°æœåŠ¡å™¨ï¼Œåœ¨åšä¸»ä»åˆ‡æ¢çš„æ—¶å€™ï¼Œæ‹”é”™äº†ä¸€ä¸ªç”µæºæ’å¤´ï¼Œç„¶åâ€¦â€¦å°±æ²¡æœ‰ä¸‹æ–‡äº†ã€‚</p>\n<p>ç¨‹åºå‘˜åœ¨ç¨‹åºé‡Œæˆ–è€…è„šæœ¬é‡ŒçŠ¯çš„é”™è¯¯å°±å¾ˆå¸¸è§äº†ã€‚</p>\n<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬çŸ¥é“ Ruby on Rails å¯¹æ•°æ®åº“çš„æ“ä½œåŸºæœ¬æ˜¯é€šè¿‡ Active Record æ¥å®Œæˆçš„ã€‚Active Record å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± æ¥é™åˆ¶æ¯ä¸ªåº”ç”¨åˆ°æ•°æ®åº“çš„è¿æ¥ã€‚</p>\n<p>å¦‚æœæŸä¸€ä¸ªç¨‹åºæˆ–è€…è„šæœ¬æŸ¥è¯¢æ²¡æœ‰ç´¢å¼•çš„æ•°æ®ï¼Œå¯¼è‡´å…¨è¡¨æ‰«æï¼Œå†åŠ ä¸Šä¸€äº›ç½‘é¡µæœåŠ¡å™¨ï¼ˆWeb Serverï¼‰çš„å¹¶è¡Œè®¿é—®ï¼Œç»å¸¸ä¼šæœ‰æ•´ä¸ªæ•°æ®åº“çš„æ‰€æœ‰é“¾æ¥è¢«å ç”¨çš„æƒ…å†µï¼Œè¿ç»ˆæ­¢æŸ¥è¯¢ï¼ˆKill Query ï¼‰éƒ½æ²¡æ³•æ‰§è¡Œï¼Œåªèƒ½äººè‚‰å»åšä¸€äº›ç±»ä¼¼é‡å¯çš„ç‰©ç†æ“ä½œã€‚è¿˜æœ‰æ›´å¸¸è§çš„ï¼Œå°±æ˜¯ç¨‹åºé‡Œçš„ N+1 æŸ¥è¯¢é—®é¢˜ã€‚é¢å¯¹è¿™ç±»é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®åº“çš„è¿æ¥æŸ¥è¯¢åŠŸèƒ½ï¼Œæ¯”å¦‚ left outer join æ¥é¿å… N+1 çš„é—®é¢˜ã€‚</p>\n<h2>æœ€åä¸€ä¸ªæ˜¯æ•°æ®åº“è®¿é—®ç“¶é¢ˆ</h2>\n<p>åªè¦æ˜¯æ•°æ®åº“ï¼Œå°±æœ‰ååé‡çš„é™åˆ¶ï¼Œè€Œæ•°æ®åº“è®¿é—®ç“¶é¢ˆä¾¿æ˜¯è‡ªç„¶æµé‡å¢é•¿æˆ–è€…æµé‡çªå¢é€ æˆçš„ã€‚åªè¦ä½ çš„ä¸šåŠ¡åœ¨å¢é•¿ï¼Œæ€»æœ‰ä¸€å¤©æ•°æ®åº“è®¿é—®å°±ä¼šè¾¾åˆ°ä¸€ä¸ªä¸Šé™ã€‚åœ¨è¿™ä¸ªé¢„è­¦åˆ°æ¥å‰ï¼Œä½ éœ€è¦åšå„ç§å‚ç›´æˆ–æ°´å¹³æ‰©å±•æ¥æå‡è¿™ä¸ªä¸Šé™ï¼Œæˆ–è€…ï¼Œä½ å¯ä»¥é€šè¿‡ç¼“å­˜å’Œå…¶ä»–æœºåˆ¶æ¥å¯¹è®¿é—®é‡è¿›è¡Œåˆ†æµï¼Œè¿™é‡Œé¢å¯ä»¥åšçš„å·¥ä½œå°±å¤šäº†ã€‚</p>\n<p>æµé‡çš„çªå¢ä¸€èˆ¬æ˜¯ç±»ä¼¼åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼ˆDDoSï¼‰æˆ–å¸‚åœºæ´»åŠ¨å¸¦æ¥çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºæŸä¸ªé»‘å¤©é¹…äº‹ä»¶é€ æˆçš„ï¼Œè¿™äº›åŸå› éƒ½å¾ˆéš¾é¢„æ–™ã€‚</p>\n<p>å¦‚æœæ˜¯æœ‰è®¡åˆ’çš„å¸‚åœºæ´»åŠ¨ï¼Œå°±éœ€è¦æå‰åšå¥½å„ç§æˆ˜æ–—å‡†å¤‡ã€‚å¦‚æœæ˜¯æ¶æ„æ”»å‡»ï¼Œé‚£å°±åªèƒ½é å„ç§é˜²å¾¡å·¥ç¨‹ï¼Œå¦‚ IP é˜»å¡ï¼ˆIP Blockingï¼‰æˆ–è€…ç¬¬ä¸‰æ–¹çš„é«˜é˜²ç³»ç»ŸæŒ¡æ‰è¿™äº›æµé‡æ¥ä¿è¯æ•°æ®åº“çš„æ­£å¸¸å·¥ä½œã€‚</p>\n<h1>ç ”å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰å“ªäº›ä¸æ•°æ®åº“ç›¸å…³çš„é—®é¢˜å‘¢ï¼Ÿ</h1>\n<p>æˆ‘ä»¬ä»¥ MySQL ä¸ºä¾‹ï¼Œè®²è®²æ—¥å¸¸å¼€å‘ä¸­åº”è¯¥æ³¨æ„çš„ï¼Œä¸æ•°æ®åº“ç›¸å…³çš„é—®é¢˜ã€‚</p>\n<h2>ç´¢å¼•</h2>\n<p>åˆ›å»ºç´¢å¼•é€šå¸¸æ˜¯ä¸ºäº†æé«˜å¸¸ç”¨æŸ¥è¯¢è¯­å¥çš„æ€§èƒ½ï¼Œå°†æŸäº›åˆ—ä»¥ç‰¹å®šçš„æ•°æ®ç»“æ„ï¼ˆå¸¸è§çš„å¦‚ B-Treeï¼‰æœ‰åºå­˜å‚¨èµ·æ¥ã€‚ç»´æŒè¿™æ ·çš„ä¸€ä¸ªæ•°æ®ç»“æ„åœ¨å†™æ•°æ®çš„æ—¶å€™ä¼šæœ‰ä¸€äº›ç³»ç»Ÿå¼€é”€ ï¼ˆOverheadï¼‰ã€‚ä½†å¦‚æœæŸ¥è¯¢ç¡®å®æ˜¯é«˜é¢‘çš„ï¼Œé‚£ä¹ˆè¿™æ ·çš„ç³»ç»Ÿå¼€é”€å°±å¾ˆåˆ’ç®—ã€‚åœ¨å»ºè¡¨æ—¶éœ€è¦è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„é«˜é¢‘æŸ¥è¯¢ï¼Œå¦ä¸€æ–¹é¢ï¼Œå¿Œè®³è¿‡åº¦åœ°â€œä¸ºæœªæ¥è®¾è®¡ â€(Design for the Future)ï¼Œä¹Ÿå°±æ˜¯åŠ ä¸€å †å¯èƒ½æ ¹æœ¬ä¸å¸¸ç”¨çš„ç´¢å¼•ï¼Œåè€Œå¢åŠ äº†å†™æ•°æ®æ—¶å€™çš„æˆæœ¬å’Œè´Ÿæ‹…ã€‚</p>\n<p>ç´¢å¼•å¦ä¸€ä¸ªå¸¸è§çš„ç”¨é€”å°±æ˜¯ä¿è¯æŸä¸€åˆ—æˆ–è€…æŸå‡ åˆ—çš„ç»„åˆæ˜¯å”¯ä¸€çš„ï¼ˆ Unique ï¼‰ï¼Œè¿™ä¹Ÿç§°ä¸ºå”¯ä¸€æ€§ç´¢å¼•ï¼ˆUnique Indexingï¼‰ï¼Œåœ¨å†™ä¸šåŠ¡é€»è¾‘ä»£ç çš„æ—¶å€™ä¼šå¸¸å¸¸ç”¨åˆ°ã€‚</p>\n<p>æ¯”å¦‚ä½ æœ‰ä¸€ä¸ªç”¨æˆ·è¡¨ï¼ˆ User Table )ï¼Œä½ æƒ³è®©æ‰€æœ‰ç”¨æˆ·ï¼ˆ User ï¼‰çš„ç”µå­é‚®ä»¶éƒ½æ˜¯å”¯ä¸€çš„ï¼Œè¿™ä¸ªæ—¶å€™ç”¨å”¯ä¸€ç´¢å¼•ï¼ˆ Unique Indexing ï¼‰å°±å¾ˆæ–¹ä¾¿ã€‚ä¸è¿‡å”¯ä¸€ç´¢å¼•ï¼ˆ Unique Indexing ï¼‰å’Œå¯é€‰åˆ—ï¼ˆ Optional Column ï¼‰ç»„åˆåœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œä¹Ÿæœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚</p>\n<p>æ¯”å¦‚ï¼Œä½ æƒ³å¯¹åˆ—Xåšå”¯ä¸€ç´¢å¼•ï¼ˆUnique Index Column Xï¼‰ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿè®¸æœ‰äº›æƒ…å†µä¸‹åˆ—Xï¼ˆColumn Xï¼‰å¹¶ä¸å”¯ä¸€ï¼Œæˆ‘ä»¬ä¾¿æŠŠç´¢å¼•æ”¹æˆäº†å¯¹åˆ—Xå’Œåˆ—Yä½œå”¯ä¸€ç´¢å¼•ï¼ˆ Unique Index Column X + Column Yï¼‰ï¼Œä½†æ˜¯åˆ—Yï¼ˆColumn Yï¼‰æ˜¯ Nullable çš„ã€‚</p>\n<p>è¿™ä¸ªæ—¶å€™ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ</p>\n<p>ä½ ä¼šæœ‰å¤šæ¡è®°å½•ï¼Œæœ‰ç€ä¸€æ ·çš„ X å€¼ï¼Œä»¥åŠ Null çš„ Y å€¼ã€‚å¾ˆæ„å¤–å¯¹å§ï¼ŒåŸå› å°±æ˜¯ Null åœ¨æ•°æ®åº“é‡Œå¸¸å¸¸è§£é‡Šä¸º â€œä¸ç¡®å®šâ€ è€Œä¸æ˜¯ç©ºã€‚</p>\n<h2>äº‹åŠ¡æ”¯æŒ</h2>\n<p>è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„é—®é¢˜å°±æ˜¯æ•°æ®åº“çš„äº‹åŠ¡æ”¯æŒï¼ˆTransactional Supportï¼‰ã€‚ç®€å•è¯´æ¥ï¼Œå°±æ˜¯åˆ©ç”¨æ•°æ®åº“æœ¬èº«æä¾›çš„äº‹åŠ¡æ€§ï¼Œæ¥å°è£…ä¸€ç³»åˆ—éœ€è¦åŒæ—¶å®Œæˆçš„åŠ¨ä½œã€‚</p>\n<p>æ¯”å¦‚åœ¨ä¸€æ®µäº‹åŠ¡é‡Œé¢ï¼Œå…ˆæ‰§è¡ŒXï¼Œå†æ‰§è¡ŒY  (Transaction do Xï¼›Yï¼›end)ï¼Œå¦‚æœ X å’Œ Y éƒ½æ˜¯æ•°æ®åº“å†™æ“ä½œï¼Œé‚£è¦ä¹ˆä¸¤ä¸ªå†™æ“ä½œéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹æ•°æ®åº“çš„æ”¹åŠ¨ä¼šç»Ÿä¸€æŠŠäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹æäº¤åˆ°æ•°æ®åº“ï¼ˆ Commitï¼‰ï¼Œè€Œæäº¤ï¼ˆ Commit ï¼‰å‰çš„ä»»ä½•é”™è¯¯éƒ½ä¼šè§¦å‘æ‰€æœ‰æ›´æ–°å›æ»šåˆ°å¼€å§‹çš„çŠ¶æ€ï¼ˆ Rollback ï¼‰æˆ–å¼•å‘ä¸æ­£å¸¸è¿›ç¨‹çš„ç»ˆæ­¢ ï¼ˆ Abort ï¼‰ã€‚</p>\n<p>è™½ç„¶æ­£ç¡®ä½¿ç”¨äº‹åŠ¡æ”¯æŒï¼ˆ Transactional Support ï¼‰ä¼šå¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ä¹Ÿå¸¸å¸¸è§åˆ°è¿‡åº¦ä½¿ç”¨è®©ä»£ç å˜å¾—å¾ˆè„†å¼±ç”šè‡³æ˜¯å‡ºç° Bug çš„æƒ…å†µã€‚</p>\n<p>å¸¸è§çš„å‡ ç§æƒ…å†µå¦‚ä¸‹ã€‚</p>\n<ol>\n<li>\n<p>äº‹åŠ¡ï¼ˆTransaction ï¼‰ä¸­å°è£…çš„ä»£ç é€»è¾‘å¤ªé•¿å¤ªå¤æ‚ï¼Œç”šè‡³è°ƒç”¨äº†åˆ«çš„å‡½æ•°ã€‚å¾ˆå¤šæ—¶å€™ï¼Œå¾ˆéš¾å»æ¨ç†å½“æ‰§è¡Œä¸­æŠ›å‡ºå¼‚å¸¸çš„è¯ï¼Œåˆ°åº•å“ªäº›ä¼šå›æ»šï¼Œå“ªäº›ä¼šäº§ç”Ÿé—ç•™å½±å“ã€‚</p>\n</li>\n<li>\n<p>äº‹åŠ¡ä¸­å°è£…äº†ä¸æ•°æ®åº“æ”¹åŠ¨æ— å…³çš„é€»è¾‘ã€‚</p>\n</li>\n<li>\n<p>äº‹åŠ¡ä¸­æœ‰ä¸å¯é€†çš„æ“ä½œï¼Œä¾‹å¦‚å‘é€ç”µå­é‚®ä»¶ç»™ç”¨æˆ·ï¼Œå‘å¸ƒï¼ˆPublishï¼‰åˆ°ä¸€ä¸ªJobé˜Ÿåˆ—ï¼ˆQueueï¼‰ç­‰ã€‚è¿™ç§æƒ…å†µä¼šå¯¼è‡´ç³»ç»Ÿçš„ä¸ä¸€è‡´ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªå†™æ“ä½œè¢«å›æ»šäº†ï¼Œä½†è¿™æ¡æ•°æ®ç›¸å…³çš„ Job è¿˜æ˜¯è¢«åŠ å…¥åˆ°é˜Ÿåˆ—äº†ï¼Œå°±ä¼šå¼•å‘é”™è¯¯ã€‚</p>\n</li>\n<li>\n<p>äº‹åŠ¡ä¸­åŒ…æ‹¬äº†åœ¨ä¸åŒæ•°æ®åº“é‡Œé¢çš„äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œè¿™éœ€è¦å•ç‹¬å¤„ç†ã€‚</p>\n</li>\n<li>\n<p>äº‹åŠ¡ä¸­åµŒå¥—äº†äº‹åŠ¡ï¼Œä¸åŒæƒ…å†µå¯èƒ½ä¼šæœ‰ä¸åŒçš„ç»“æœï¼Œå¦‚æœæ²¡ææ¸…æ¥šï¼Œå°±å¯èƒ½å‡ºç°æ„å¤–çš„è¡Œä¸ºã€‚</p>\n</li>\n</ol>\n<p>æ›´å¤šæƒ…å†µå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œä½†è¿‡åº¦ä½¿ç”¨äº‹åŠ¡æ”¯æŒå¾€å¾€ä¼šè®©é€»è¾‘å˜å¾—ä¸å¿…è¦çš„å¤æ‚ã€‚</p>\n<h2>æ•°æ®åº“é”</h2>\n<p>æ•°æ®åº“ä¼šå‡ºç° Race Conditionï¼Œæˆ‘ä»¬å¸¸å¸¸æŠŠ Race Condition å«åšç«äº‰æ¡ä»¶ï¼Œæ˜¯æŒ‡å¤šä¸ªè¿›ç¨‹æˆ–è€…çº¿ç¨‹å¹¶å‘è®¿é—®å’Œæ“ä½œåŒä¸€æ•°æ®ï¼Œä¸”æ‰§è¡Œç»“æœä¸è®¿é—®å‘ç”Ÿçš„ç‰¹å®šé¡ºåºæœ‰å…³çš„ç°è±¡ã€‚</p>\n<p>å¦‚ä½•è§£å†³ç«äº‰æ¡ä»¶ï¼ˆ Race Condition ï¼‰å‘¢ï¼Ÿå¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨å„ç§é”æœºåˆ¶æ¥ç¡®ä¿è¡Œä¸ºçš„å¯é¢„æµ‹æ€§å’Œæ­£ç¡®æ€§ã€‚æ ¹æ®å®é™…æƒ…å†µçš„ä¸åŒï¼ŒåŠ é”çš„æ–¹å¼ä¼šä¸ä¸€æ ·ã€‚</p>\n<p>å¸¸è§çš„æœ‰ä¹è§‚é”å®šï¼ˆ Optimistic Locking ï¼‰å’Œæ‚²è§‚é”å®šï¼ˆ Pessimistic Lockingï¼‰ã€‚æ€»çš„è¯´æ¥ï¼Œå‰è€…åœ¨å¯¹æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„ç³»ç»Ÿé‡Œæ›´ä¸ºå¸¸è§ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾ˆå¤šç³»ç»Ÿéƒ½ä¼šè‡ªå·±å®ç°é”å®šï¼ˆ Locking ï¼‰æœºåˆ¶ã€‚</p>\n<h2>ç¼“å­˜å’Œä¸»ä»æœºåˆ¶</h2>\n<p>ä¸ºäº†æé«˜æ€§èƒ½ï¼Œæˆ‘ä»¬ä¼šä¸ºæ•°æ®åº“å¢åŠ ç¼“å­˜ï¼ˆ Caching ï¼‰å’Œä¸»ä»ï¼ˆ Master - Slave ï¼‰ç­‰æœºåˆ¶ï¼Œè¿™æœ‰æ—¶å€™ä¼šå¼•èµ·æ•°æ®çš„ä¸ä¸€è‡´æ€§ã€‚å¸¸è§çš„æƒ…å†µæ˜¯ï¼Œå¦‚æœç³»ç»Ÿé»˜è®¤æ˜¯åœ¨ä»èŠ‚ç‚¹ï¼ˆ Slave ï¼‰è¯»æ•°æ®ï¼Œé‚£ä¹ˆä¸€äº›åˆšåˆšæ›´æ–°åˆ°ä¸»èŠ‚ç‚¹ï¼ˆ Master ï¼‰çš„æ•°æ®åœ¨è¯»çš„æ—¶å€™å°±æœ‰å¯èƒ½è¯»ä¸åˆ°ã€‚è¿™ä¸ªæƒ…å†µåœ¨ä½¿ç”¨ä¸€äº›æ•°æ®å…³è” ï¼ˆAssociationï¼‰çš„æ—¶å€™æ›´å®¹æ˜“è¯»ä¸åˆ°ã€‚Rails çš„ Active Record æ•°æ®å…³è” ï¼ˆAssociationï¼‰ï¼Œå°±å¾ˆå®¹æ˜“å‡ºç°è¿™ä¸€ç±»çš„é—®é¢˜ã€‚</p>\n<p>ä»Šå¤©è·Ÿå¤§å®¶ä»‹ç»äº†ä¸å°‘æ•°æ®åº“ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œå¦‚æœä½ æ˜¯ä¸ªè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæƒ³å¿…è¿™äº›å†…å®¹éƒ½å·²ç»è€³ç†Ÿèƒ½è¯¦ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ã€‚</p>\n<ol>\n<li>\n<p>æœ¬æ–‡ä» MySQL å’Œ PostgreSQL çš„è¿ç§»å’Œé€‰å‹å…¥æ‰‹ï¼Œä»‹ç»äº†æ•°æ®åº“çš„æŠ€æœ¯ç‰¹ç‚¹å’Œé€‰å‹é—®é¢˜ã€‚åœ¨æˆ‘çœ¼é‡Œï¼Œæ²¡æœ‰æ›´å¥½çš„æŠ€æœ¯ï¼Œåªæœ‰æ›´é€‚åˆçš„æŠ€æœ¯ã€‚</p>\n</li>\n<li>\n<p>æ•°æ®åº“é¢†åŸŸä¼šç¢°åˆ°å“ªäº›é—®é¢˜å‘¢ï¼Ÿæˆ‘ä¸ºå¤§å®¶ä»‹ç»äº†æ•°æ®åº“é€‰æ‹©ã€æ•°æ®åº“ç›¸å…³çš„æ¶æ„é—®é¢˜ã€äººä¸ºå¤±è¯¯çš„é—®é¢˜ï¼Œè¿˜æœ‰æ•°æ®åº“é­é‡æµé‡ç“¶é¢ˆä»¥åŠç›¸å…³çš„åº”å¯¹æ–¹å¼ã€‚</p>\n</li>\n<li>\n<p>å‡ ä¹æ¯ä¸ªå·¥ç¨‹å¸ˆåœ¨ç¼–ç¨‹çš„æ—¶å€™éƒ½ä¼šå’Œæ•°æ®åº“æ‰“äº¤é“ï¼Œç ”å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬åº”è¯¥æ³¨æ„ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿåœ¨è¿™ä¸ªç« èŠ‚æˆ‘ä»¬è®²äº†ç´¢å¼•ã€äº‹åŠ¡æ”¯æŒã€æ•°æ®åº“é”ã€ç¼“å­˜å’Œä¸»ä»æœºåˆ¶ã€‚</p>\n</li>\n</ol>\n<p>æ–‡ä¸­æ¯ä¸ªç‚¹éƒ½å¯ä»¥æ·±å…¥å±•å¼€ï¼Œç‹¬è‡ªæ¢³ç†ï¼Œæœ€ç»ˆå½¢æˆç³»ç»Ÿçš„çŸ¥è¯†å‚¨å¤‡ã€‚å› ä¸ºç¯‡å¹…æ‰€é™ï¼Œä¸èƒ½æ¶‰åŠæ‰€æœ‰çš„æŠ€æœ¯ç»†èŠ‚ï¼Œæ–‡ä¸­æåˆ°çš„å†…å®¹éƒ½æ˜¯æˆ‘åœ¨å·¥ä½œä¸­é‡åˆ°è¿‡çš„é—®é¢˜å’Œå®æˆ˜ç»éªŒï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚</p>\n<p>å¦‚æœä½ æœ‰ä¸åŒçš„æƒ³æ³•ï¼Œæ›´å¥½çš„è§‚ç‚¹ï¼Œè¯·åœ¨ç•™è¨€ä¸­å‘Šè¯‰æˆ‘ï¼Œäº’é€šæœ‰æ— ï¼Œä¸€èµ·æˆé•¿ã€‚</p>\n<p>å‚è€ƒé“¾æ¥ï¼š<a href=\"https://eng.uber.com/mysql-migration/\">https://eng.uber.com/mysql-migration/</a></p>\n<p><br> </p>\n<p><a href=\"https://time.geekbang.org/activity/sale-poster?utm_source=app&amp;utm_medium=zhuyun-article&amp;utm_campaign=zhuyun-saleposter&amp;utm_content=zhuyun0416\">æˆ³æ­¤è·å–ä½ çš„ä¸“å±æµ·æŠ¥</a></p>\n","comments":[{"had_liked":false,"id":1331,"user_name":"ä¸€è·¯å‘åŒ—","can_delete":false,"product_type":"c1","uid":1017835,"ip_address":"","ucode":"DB0FF1C153C485","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/eb/20492a37.jpg","comment_is_top":false,"comment_ctime":1512790601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35872528969","product_id":100002401,"comment_content":"ç”¨è¿‡æ•°æ®åº“ï¼Œä½†æ˜¯æ²¡æœ‰æ€ä¹ˆå»ç†è§£è¿‡ã€‚è¯»è¿‡ä¹‹åï¼Œé†é†çŒé¡¶","like_count":8},{"had_liked":false,"id":1473,"user_name":"å…¬å‰‘ï½œGong Jian","can_delete":false,"product_type":"c1","uid":1021606,"ip_address":"","ucode":"856E97500970BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/96/a6/7b39ed2c.jpg","comment_is_top":false,"comment_ctime":1513211736,"is_pvip":true,"discussion_count":4,"race_medal":0,"score":"31577982808","product_id":100002401,"comment_content":"å®‰å§ï¼Œåœ¨çº¿ä¿®æ”¹å¤§è¡¨çš„è¡¨ç»“æ„ï¼ŒMySQLä¼šlockä½ï¼Œæœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":3201542,"avatar":"","nickname":"Geek_92aa92","note":"","ucode":"DE3AD18F465CC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590644,"discussion_content":"pt-change","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665967455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3201542,"avatar":"","nickname":"Geek_92aa92","note":"","ucode":"DE3AD18F465CC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590643,"discussion_content":"ç”¨æ’ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665967444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1934598,"avatar":"","nickname":"stay hungry","note":"","ucode":"60EE69AC5DAFB5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346013,"discussion_content":"onlineDDL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611838820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1965188,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/fc/84/30af1749.jpg","nickname":"Ascend","note":"","ucode":"B2F3EBEFE89C9C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263484,"discussion_content":"å‡†å¤‡ä¸ªä¸´æ—¶è¡¨å…ˆç”¨ç€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589208832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":1314,"user_name":"shibo","can_delete":false,"product_type":"c1","uid":1020267,"ip_address":"","ucode":"E8D9BDC76C15CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/6b/eec81d65.jpg","comment_is_top":false,"comment_ctime":1512712481,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"22987548961","product_id":100002401,"comment_content":"éå¸¸å¹²è´§ï¼ï¼ï¼ï¼å®‰å§ä»¥åæ˜¯ä¸æ˜¯å¯ä»¥åœ¨billingæä¸ªtech talkå‘€ lol","like_count":5},{"had_liked":false,"id":5479,"user_name":"RAY","can_delete":false,"product_type":"c1","uid":1071120,"ip_address":"","ucode":"0DC83ECF552BB4","user_header":"https://static001.geekbang.org/account/avatar/00/10/58/10/06d65160.jpg","comment_is_top":false,"comment_ctime":1523408166,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14408310054","product_id":100002401,"comment_content":"é€‚åˆåˆçº§ç§‘æ™®","like_count":3},{"had_liked":false,"id":18311,"user_name":"Geek_c8eb71","can_delete":false,"product_type":"c1","uid":1073915,"ip_address":"","ucode":"3E975663DDF1AC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7OeXw9mfSM7u6TyT4BJDEaA3T42iaCH3R6PoDickWK79icANwffs1rsib9L5M7bUicqpdtTEh4LdLTByg/132","comment_is_top":false,"comment_ctime":1533255852,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10123190444","product_id":100002401,"comment_content":"æ•°æ®åº“çš„åˆçº§åŸç†","like_count":2,"discussions":[{"author":{"id":2013538,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b9/62/62fa58d5.jpg","nickname":"Alan","note":"","ucode":"807A7B88974EB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288191,"discussion_content":"æ‰«ç›²ç­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593674211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":1534,"user_name":"kimi","can_delete":false,"product_type":"c1","uid":1014643,"ip_address":"","ucode":"4DBCA231850D6A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7b/73/e5b46aa9.jpg","comment_is_top":false,"comment_ctime":1513423565,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5808390861","product_id":100002401,"comment_content":"å®‰å§ä»€ä¹ˆæ—¶å€™è¯´ä¸€ä¸‹åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä»¥åŠä½ æ›¾å·¥ä½œè¿‡çš„ä¸¤ä¸ªå…¬å¸åœ¨æ”¯ä»˜ç¯èŠ‚å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡","like_count":1},{"had_liked":false,"id":1311,"user_name":"å­æ‚ ","can_delete":false,"product_type":"c1","uid":1000383,"ip_address":"","ucode":"070BB09477E8A8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/bf/9a982bc1.jpg","comment_is_top":false,"comment_ctime":1512707824,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5807675120","product_id":100002401,"comment_content":"å®‰å§çš„è¿™ç¯‡æ–‡ç« å¾ˆå®ç”¨ï¼ŒMarkäº†ï¼","like_count":1},{"had_liked":false,"id":1310,"user_name":"MC","can_delete":false,"product_type":"c1","uid":1004183,"ip_address":"","ucode":"AA0035C9C43516","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/97/4593cda8.jpg","comment_is_top":false,"comment_ctime":1512705706,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5807673002","product_id":100002401,"comment_content":"å—¯ï¼Œå°±åœ¨åˆšåˆšä¸Šçº¿ä¸€ä¸ªæ ¸å¿ƒå­˜å‚¨è¿‡ç¨‹çš„å˜æ›´ã€‚æ­¤å­˜å‚¨è¿‡ç¨‹æ‰€ä»¥è¯·æ±‚éƒ½ä¼šæ¶‰åŠåˆ°ã€‚ç„¶åæ€§èƒ½ä¸åŸå…ˆçš„æœ‰æ‰€å˜å·®ï¼Œå¯¼è‡´APIè¯·æ±‚ç§¯å‹å¹¶è¶…æ—¶ğŸ˜¢ã€‚Rollbackåï¼Œå†™äº†ä¸ªIncident Reportã€‚ç°åœ¨åœ¨BARTç­‰è½¦å›å®¶â€¦","like_count":1},{"had_liked":false,"id":352910,"user_name":"FlyYan","can_delete":false,"product_type":"c1","uid":1224391,"ip_address":"åŒ—äº¬","ucode":"EE0728B6CB59A3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIqJhicJVYfLiaYDzNNJj1Tzic1J2yEanobQdaZHdT41cVPib1EaXa3bsL1ExHhcEGFfm77hFJRe4WI6g/132","comment_is_top":false,"comment_ctime":1659005730,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659005730","product_id":100002401,"comment_content":"è¯¾ç¨‹æœ‰äº›ä¹±ï¼Œæ„Ÿè§‰åœ¨å‡‘æ•°","like_count":1},{"had_liked":false,"id":286748,"user_name":"è¶…","can_delete":false,"product_type":"c1","uid":1101952,"ip_address":"","ucode":"F45F5ED7073E8A","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/80/67e3312c.jpg","comment_is_top":false,"comment_ctime":1617548706,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617548706","product_id":100002401,"comment_content":"æ•°æ®åº“ï¼Œå¤§æœ‰å­¦é—®","like_count":0},{"had_liked":false,"id":208093,"user_name":"Ric","can_delete":false,"product_type":"c1","uid":1917008,"ip_address":"","ucode":"2CCABA029EE711","user_header":"https://static001.geekbang.org/account/avatar/00/1d/40/50/a960f038.jpg","comment_is_top":false,"comment_ctime":1587274732,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587274732","product_id":100002401,"comment_content":"æ•¸æ“šåº«è¨­è¨ˆç¢ºå¯¦å°æ•´å€‹ç³»çµ±çš„æˆæ•—èµ·é—œéµæ€§ä½œç”¨ã€‚","like_count":0},{"had_liked":false,"id":147852,"user_name":"mikejiang","can_delete":false,"product_type":"c1","uid":1396090,"ip_address":"","ucode":"9350F6DC7BC0E8","user_header":"https://static001.geekbang.org/account/avatar/00/15/4d/7a/106c3745.jpg","comment_is_top":false,"comment_ctime":1572914100,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572914100","product_id":100002401,"comment_content":"æ•°æ®åº“çš„è¿ç§»æˆæœ¬å¾ˆå¤§ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šä¸ä¼šè¿ç§»ã€‚å¦å¤–æ•°æ®åº“å»ºè®®å°å…¬å¸ä½¿ç”¨äº‘æ•°æ®åº“ï¼Œè¿™æ ·ä¼šçœä¸‹æ¥å¾ˆå¤šæˆæœ¬ã€‚","like_count":0},{"had_liked":false,"id":146053,"user_name":"ç†™æ–‡","can_delete":false,"product_type":"c1","uid":1143039,"ip_address":"","ucode":"4F49FD59E7FEF0","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/ff/80242486.jpg","comment_is_top":false,"comment_ctime":1572426299,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572426299","product_id":100002401,"comment_content":"å—æ•™äº†ï¼Œéå¸¸æœ‰æ„ä¹‰","like_count":0},{"had_liked":false,"id":38882,"user_name":"é”","can_delete":false,"product_type":"c1","uid":1110915,"ip_address":"","ucode":"A245BA96C9471F","user_header":"https://static001.geekbang.org/account/avatar/00/10/f3/83/e2612d81.jpg","comment_is_top":false,"comment_ctime":1542156789,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542156789","product_id":100002401,"comment_content":"è¯·é—®å®‰å§ï¼Œæ”¯ä»˜ä¸šåŠ¡ä¾èµ–æ•°æ®åº“çš„äº‹åŠ¡ç‰¹æ€§ä¹ˆï¼Ÿå¤§å…¬å¸çš„åšæ³•éƒ½æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å…¬å¸æ˜¯ä¸å…è®¸ç”¨æ•°æ®åº“äº‹åŠ¡çš„ï¼Œè¿˜æœ›è§£ç–‘ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":1813,"user_name":"Dylan","can_delete":false,"product_type":"c1","uid":1040236,"ip_address":"","ucode":"58064D0C9F9F5F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/df/6c/5af32271.jpg","comment_is_top":false,"comment_ctime":1514524169,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1514524169","product_id":100002401,"comment_content":"å‰ä¸¤å¤©å°±åˆšåˆšåœ¨ç”Ÿäº§çš„æ•°æ®åº“ä¸Šç›´æ¥è¿›è¡Œæ“ä½œï½ç”±ä¸¤ä¸ªèµ„æ·±çš„æ•°æ®åº“å·¥ç¨‹å¸ˆä¸€èµ·å†ä¸‰æ ¸å¯¹è„šæœ¬ï¼Œæ‰æ•¢æœ€åè¿è¡Œï½çœŸçš„æ˜¯åæ€•","like_count":0},{"had_liked":false,"id":1305,"user_name":"äº§å“åŠ©ç†","can_delete":false,"product_type":"c1","uid":1019821,"ip_address":"","ucode":"39A76D346A96E9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/ad/6e3e9e15.jpg","comment_is_top":false,"comment_ctime":1512696392,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1512696392","product_id":100002401,"comment_content":"åˆšå‚åŠ å·¥ä½œæ—¶ï¼Œå…¬å¸å°±æµä¼ ä¸€ä¸ªå¤§ç¥è¯¯æ“ä½œåˆ åº“çš„ä¼ è¯´ã€‚","like_count":0}]}