{"id":111814,"title":"37 | Kafka & ZMQï¼šè‡ªåŠ¨åŒ–äº¤æ˜“æµæ°´çº¿","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ™¯éœ„ã€‚</p><p>åœ¨è¿›è¡Œè¿™èŠ‚è¯¾çš„å­¦ä¹ å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹ï¼Œå‰é¢ä¸‰èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦äº†äº›ä»€ä¹ˆã€‚</p><p>ç¬¬ 34 è®²ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•é€šè¿‡ RESTful API åœ¨äº¤æ˜“æ‰€ä¸‹å•ï¼›ç¬¬ 35 è®²ï¼Œæˆ‘ä»¬è®²è§£äº†å¦‚ä½•é€šè¿‡ Websocket ï¼Œæ¥è·å–äº¤æ˜“æ‰€çš„ orderbook æ•°æ®ï¼›ç¬¬ 36 è®²ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å®ç°ä¸€ä¸ªç­–ç•¥ï¼Œä»¥åŠå¦‚ä½•å¯¹ç­–ç•¥è¿›è¡Œå†å²å›æµ‹ã€‚</p><p>äº‹å®ä¸Šï¼Œåˆ°è¿™é‡Œï¼Œä¸€ä¸ªç®€å•çš„ã€å¯ä»¥è¿ä½œçš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿå·²ç»æˆå‹äº†ã€‚ä½ å¯ä»¥å¯¹ç­–ç•¥è¿›è¡Œåå¤ä¿®æ”¹ï¼ŒæœŸå¾…èƒ½å¾—åˆ°ä¸é”™çš„ PnLã€‚ä½†æ˜¯ï¼Œå¯¹äºä¸€ä¸ªå®Œå–„çš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿæ¥è¯´ï¼Œåªæœ‰åŸºæœ¬éª¨æ¶è¿˜æ˜¯ä¸å¤Ÿçš„ã€‚</p><p>åœ¨å¤§å‹é‡åŒ–äº¤æ˜“å…¬å¸ï¼Œç³»ç»Ÿä¸€èˆ¬æ˜¯åˆ†å¸ƒå¼è¿è¡Œçš„ï¼Œå„ä¸ªæ¨¡å—ç‹¬ç«‹åœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œç„¶åäº’ç›¸è¿æ¥æ¥å®ç°ã€‚å³ä½¿æ˜¯ä¸ªäººçš„äº¤æ˜“ç³»ç»Ÿï¼Œåœ¨è¿›è¡Œè¯¸å¦‚é«˜é¢‘å¥—åˆ©ç­‰ç®—æ³•æ—¶ï¼Œä¹Ÿéœ€è¦å°†æ‰§è¡Œå±‚å¸ƒç½®åœ¨é è¿‘äº¤æ˜“æ‰€çš„æœºå™¨èŠ‚ç‚¹ä¸Šã€‚</p><p>æ‰€ä»¥ï¼Œä»ä»Šå¤©è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬ç»§ç»­å›åˆ° Python çš„æŠ€æœ¯æ ˆï¼Œä»é‡åŒ–äº¤æ˜“ç³»ç»Ÿè¿™ä¸ªè§’åº¦åˆ‡å…¥ï¼Œä¸ºä½ è®²è§£å¦‚ä½•å®ç°åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´çš„å¤æ‚åä½œã€‚</p><h2>ä¸­é—´ä»¶</h2><p>æˆ‘ä»¬å…ˆæ¥ä»‹ç»ä¸€ä¸‹ä¸­é—´ä»¶è¿™ä¸ªæ¦‚å¿µã€‚ä¸­é—´ä»¶ï¼Œæ˜¯å°†æŠ€æœ¯åº•å±‚å·¥å…·å’Œåº”ç”¨å±‚è¿›è¡Œè¿æ¥çš„ç»„ä»¶ã€‚å®ƒè¦å®ç°çš„æ•ˆæœåˆ™æ˜¯ï¼Œè®©æˆ‘ä»¬è¿™äº›éœ€è¦åˆ©ç”¨æœåŠ¡çš„å·¥ç¨‹å¸ˆï¼Œä¸å¿…å»å…³å¿ƒåº•å±‚çš„å…·ä½“å®ç°ã€‚æˆ‘ä»¬åªéœ€è¦æ‹¿ç€ä¸­é—´ä»¶çš„æ¥å£æ¥ç”¨å°±å¥½äº†ã€‚</p><p>è¿™ä¸ªæ¦‚å¿µå¬èµ·æ¥å¹¶ä¸éš¾ç†è§£ï¼Œæˆ‘ä»¬å†ä¸¾ä¸ªä¾‹å­è®©ä½ å½»åº•æ˜ç™½ã€‚æ¯”å¦‚æ‹¿æ•°æ®åº“æ¥è¯´ï¼Œåº•å±‚æ•°æ®åº“æœ‰å¾ˆå¤šå¾ˆå¤šç§ï¼Œä»å…³ç³»å‹æ•°æ®åº“ MySQL åˆ°éå…³ç³»å‹æ•°æ®åº“ NoSQLï¼Œä»åˆ†å¸ƒå¼æ•°æ®åº“ Spanner åˆ°å†…å­˜æ•°æ®åº“ Redisï¼Œä¸åŒçš„æ•°æ®åº“æœ‰ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œä¹Ÿæœ‰ç€ä¸åŒçš„ä¼˜ç¼ºç‚¹ï¼Œæ›´æœ‰ç€ä¸åŒçš„è°ƒç”¨æ–¹å¼ã€‚é‚£ä¹ˆä¸­é—´ä»¶èµ·ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</p><!-- [[[read_end]]] --><p>ä¸­é—´ä»¶ï¼Œç­‰äºåœ¨è¿™äº›ä¸åŒçš„æ•°æ®åº“ä¸ŠåŠ äº†ä¸€å±‚é€»è¾‘ï¼Œè¿™ä¸€å±‚é€»è¾‘ä¸“é—¨ç”¨æ¥å’Œæ•°æ®åº“æ‰“äº¤é“ï¼Œè€Œå¯¹å¤–åªéœ€è¦æš´éœ²åŒä¸€ä¸ªæ¥å£å³å¯ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸Šå±‚çš„ç¨‹åºå‘˜è°ƒç”¨ä¸­é—´ä»¶æ¥å£æ—¶ï¼Œåªéœ€è¦è®©ä¸­é—´ä»¶æŒ‡å®šå¥½æ•°æ®åº“å³å¯ï¼Œå…¶ä»–å‚æ•°å®Œå…¨ä¸€è‡´ï¼Œæå¤§åœ°æ–¹ä¾¿äº†ä¸Šå±‚çš„å¼€å‘ï¼›åŒæ—¶ï¼Œä¸‹å±‚æŠ€æœ¯æ ˆåœ¨æ›´æ–°æ¢ä»£çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥åšåˆ°å’Œä¸Šå±‚å®Œå…¨åˆ†ç¦»ï¼Œä¸å½±å“ç¨‹åºå‘˜çš„ä½¿ç”¨ã€‚</p><p>å®ƒä»¬ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œä½ å¯ä»¥å‚ç…§ä¸‹é¢æˆ‘ç”»çš„è¿™å¼ å›¾ã€‚æˆ‘ä¹ æƒ¯æ€§æŠŠä¸­é—´ä»¶çš„ä½œç”¨è°ƒä¾ƒä¸ºï¼šæ²¡æœ‰ä»€ä¹ˆäº‹æƒ…æ˜¯åŠ ä¸€å±‚è§£å†³ä¸äº†çš„ï¼›å¦‚æœæœ‰ï¼Œé‚£å°±åŠ ä¸¤å±‚ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f4/50/f49f221a8191d8fa95eeea146bbbf550.png?wh=968*628\" alt=\"\"></p><p>å½“ç„¶ï¼Œè¿™åªæ˜¯å…¶ä¸­ä¸€ä¸ªä¾‹å­ï¼Œä¹Ÿåªæ˜¯ä¸­é—´ä»¶çš„ä¸€ç§å½¢å¼ã€‚äº‹å®ä¸Šï¼Œæ¯”å¦‚åœ¨é˜¿é‡Œï¼Œä¸­é—´ä»¶ä¸»è¦æœ‰åˆ†å¸ƒå¼å…³ç³»å‹æ•°æ®åº“ DRDSã€æ¶ˆæ¯é˜Ÿåˆ—å’Œåˆ†å¸ƒå¼æœåŠ¡è¿™ä¹ˆä¸‰ç§å½¢å¼ã€‚è€Œæˆ‘ä»¬ä»Šå¤©ï¼Œä¸»è¦ä¼šç”¨åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå› ä¸ºå®ƒéå¸¸ç¬¦åˆé‡åŒ–äº¤æ˜“ç³»ç»Ÿçš„åº”ç”¨åœºæ™¯ï¼Œå³äº‹ä»¶é©±åŠ¨æ¨¡å‹ã€‚</p><h2>æ¶ˆæ¯é˜Ÿåˆ—</h2><p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—å‘¢ï¼Ÿä¸€å¦‚å…¶åï¼Œæ¶ˆæ¯ï¼Œå³äº’è”ç½‘ä¿¡æ¯ä¼ é€’çš„ä¸ªä½“ï¼›è€Œé˜Ÿåˆ—ï¼Œå­¦è¿‡ç®—æ³•å’Œæ•°æ®ç»“æ„çš„ä½ ï¼Œåº”è¯¥å¾ˆæ¸…æ¥šè¿™ä¸ª FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰çš„æ•°æ®ç»“æ„å§ã€‚ï¼ˆå¦‚æœç®—æ³•åŸºç¡€ä¸å¤ªç‰¢ï¼Œå»ºè®®ä½ å¯ä»¥å­¦ä¹ æå®¢æ—¶é—´å¹³å°ä¸Šç‹äº‰è€å¸ˆçš„â€œæ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾â€ä¸“æ ï¼Œ<a href=\"https://time.geekbang.org/column/article/41330\">ç¬¬ 09è®²</a>å³ä¸ºé˜Ÿåˆ—çŸ¥è¯†ï¼‰</p><p>ç®€è€Œè¨€ä¹‹ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å°±æ˜¯ä¸€ä¸ªä¸´æ—¶å­˜æ”¾æ¶ˆæ¯çš„å®¹å™¨ï¼Œæœ‰äººå‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¨é€æ¶ˆæ¯ï¼›æœ‰äººåˆ™ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå‘ç°æ–°æ¶ˆæ¯å°±ä¼šå–èµ°ã€‚æ ¹æ®æˆ‘ä»¬åˆšåˆšå¯¹ä¸­é—´ä»¶çš„è§£é‡Šï¼Œæ¸…æ™°å¯è§ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿæ˜¯ä¸€ç§ä¸­é—´ä»¶ã€‚</p><p>ç›®å‰ï¼Œå¸‚é¢ä¸Šä½¿ç”¨è¾ƒå¤šçš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰ RabbitMQã€Kafkaã€RocketMQã€ZMQ ç­‰ã€‚ä¸è¿‡ä»Šå¤©ï¼Œæˆ‘åªä»‹ç»æœ€å¸¸ç”¨çš„ ZMQ å’Œ Kafkaã€‚</p><p>æˆ‘ä»¬å…ˆæ¥æƒ³æƒ³ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä½œä¸ºä¸­é—´ä»¶æœ‰ä»€ä¹ˆç‰¹ç‚¹å‘¢ï¼Ÿ</p><p>é¦–å…ˆæ˜¯ä¸¥æ ¼çš„æ—¶åºæ€§ã€‚åˆšåˆšè¯´äº†ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œä½ ä¸¢ç»™å®ƒ <code>1, 2, 3</code>ï¼Œç„¶åå¦ä¸€ä¸ªäººä»é‡Œé¢å–æ•°æ®ï¼Œé‚£ä¹ˆå–å‡ºæ¥çš„ä¸€å®šä¹Ÿæ˜¯ <code>1, 2, 3</code>ï¼Œä¸¥æ ¼ä¿è¯äº†å…ˆè¿›å»çš„æ•°æ®å…ˆå‡ºå»ï¼Œåè¿›å»çš„æ•°æ®åå‡ºå»ã€‚æ˜¾ç„¶ï¼Œè¿™ä¹Ÿæ˜¯æ¶ˆæ¯æœºåˆ¶ä¸­å¿…é¡»è¦ä¿è¯çš„ä¸€ç‚¹ï¼Œä¸ç„¶é¢ ä¸‰å€’å››çš„ç»“æœä¸€å®šä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p><p>è¯´åˆ°é˜Ÿåˆ—çš„ç‰¹ç‚¹ï¼Œç®€å•æä¸€å¥ï¼Œä¸â€œå…ˆè¿›å…ˆå‡ºâ€œç›¸å¯¹çš„æ˜¯æ ˆè¿™ç§æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯å…ˆè¿›åå‡ºçš„ï¼Œä½ ä¸¢ç»™å®ƒ <code>1, 2, 3</code>ï¼Œå†ä»é‡Œé¢å–å‡ºæ¥çš„æ—¶å€™ï¼Œæ‹¿åˆ°çš„å°±æ˜¯<code>3, 2, 1</code>äº†ï¼Œè¿™ä¸€ç‚¹ä¸€å®šè¦åŒºåˆ†æ¸…æ¥šã€‚</p><p>å…¶æ¬¡ï¼Œæ˜¯åˆ†å¸ƒå¼ç½‘ç»œç³»ç»Ÿçš„è€ç”Ÿå¸¸è°ˆé—®é¢˜ã€‚å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿå¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸é‡å¤ï¼Ÿè¿™ä¸€åˆ‡ï¼Œæ¶ˆæ¯é˜Ÿåˆ—åœ¨è®¾è®¡çš„æ—¶å€™éƒ½å·²ç»è€ƒè™‘å¥½äº†ï¼Œä½ åªéœ€è¦æ‹¿æ¥ç”¨å°±å¯ä»¥ï¼Œä¸å¿…è¿‡å¤šæ·±ç©¶ã€‚</p><p>ä¸è¿‡ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ˜¯å¦‚ä½•é™ä½ç³»ç»Ÿå¤æ‚åº¦ï¼Œèµ·åˆ°ä¸­é—´ä»¶çš„è§£è€¦ä½œç”¨å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™å¼ å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f6/f0/f6a5e84033070f5ee7746ca85680aef0.png?wh=749*527\" alt=\"\"></p><p>æ¶ˆæ¯é˜Ÿåˆ—çš„æ¨¡å¼æ˜¯å‘å¸ƒå’Œè®¢é˜…ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆæ¯å‘å¸ƒè€…å¯ä»¥å‘å¸ƒæ¶ˆæ¯ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆæ¯æ¥å—è€…å¯ä»¥è®¢é˜…æ¶ˆæ¯ã€‚ ä»å›¾ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ¶ˆæ¯å‘å¸ƒè€…å’Œæ¶ˆæ¯æ¥å—è€…ä¹‹é—´æ²¡æœ‰ç›´æ¥è€¦åˆï¼Œå…¶ä¸­ï¼Œ</p><ul>\n<li>æ¶ˆæ¯å‘å¸ƒè€…å°†æ¶ˆæ¯å‘é€åˆ°åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—åï¼Œå°±ç»“æŸäº†å¯¹æ¶ˆæ¯çš„å¤„ç†ï¼›</li>\n<li>æ¶ˆæ¯æ¥å—è€…ä»åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—è·å–è¯¥æ¶ˆæ¯åï¼Œå³å¯è¿›è¡Œåç»­å¤„ç†ï¼Œå¹¶ä¸éœ€è¦æ¢å¯»è¿™ä¸ªæ¶ˆæ¯ä»ä½•è€Œæ¥ã€‚</li>\n</ul><p>è‡³äºæ–°å¢ä¸šåŠ¡çš„é—®é¢˜ï¼Œåªè¦ä½ å¯¹è¿™ç±»æ¶ˆæ¯æ„Ÿå…´è¶£ï¼Œå³å¯è®¢é˜…è¯¥æ¶ˆæ¯ï¼Œå¯¹åŸæœ‰ç³»ç»Ÿå’Œä¸šåŠ¡æ²¡æœ‰ä»»ä½•å½±å“ï¼Œæ‰€ä»¥ä¹Ÿå°±å®ç°äº†ä¸šåŠ¡çš„å¯æ‰©å±•æ€§è®¾è®¡ã€‚</p><p>è®²äº†è¿™ä¹ˆå¤šæ¦‚å¿µå±‚çš„ä¸œè¥¿ï¼Œæƒ³å¿…ä½ è¿«ä¸åŠå¾…åœ°æƒ³çœ‹å…·ä½“ä»£ç äº†å§ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ ZMQ çš„å®ç°ã€‚</p><h3>ZMQ</h3><p>å…ˆæ¥çœ‹ ZMQï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸è½»é‡çº§çš„æ¶ˆæ¯é˜Ÿåˆ—å®ç°ã€‚</p><blockquote>\n<p>ä½œè€… Pieter Hintjens æ˜¯ä¸€ä½å¤§ç‰›ï¼Œä»–æœ¬äººçš„ç»å†ä¹Ÿå¾ˆä¼ å¥‡ï¼Œ2010å¹´è¯Šæ–­å‡ºèƒ†ç®¡ç™Œï¼Œå¹¶æˆåŠŸåšäº†æ‰‹æœ¯åˆ‡é™¤ã€‚ä½†2016å¹´4æœˆï¼Œå´å‘ç°ç™Œç—‡å¤§é¢ç§¯æ‰©æ•£åˆ°äº†è‚ºéƒ¨ï¼Œå·²ç»æ— æ³•æ²»ç–—ã€‚ä»–å†™çš„æœ€åä¸€ç¯‡é€šä¿¡æ¨¡å¼æ˜¯å…³äºæ­»äº¡åè®®çš„ï¼Œä¹‹ååœ¨æ¯”åˆ©æ—¶é€‰æ‹©æ¥å—å®‰ä¹æ­»ã€‚</p>\n</blockquote><p>ZMQ æ˜¯ä¸€ä¸ªç®€å•å¥½ç”¨çš„ä¼ è¾“å±‚ï¼Œå®ƒæœ‰ä¸‰ç§ä½¿ç”¨æ¨¡å¼ï¼š</p><ul>\n<li>Request - Reply æ¨¡å¼ï¼›</li>\n<li>Publish - Subscribe æ¨¡å¼ï¼›</li>\n<li>Parallel Pipeline æ¨¡å¼ã€‚</li>\n</ul><p>ç¬¬ä¸€ç§æ¨¡å¼å¾ˆç®€å•ï¼Œclient å‘æ¶ˆæ¯ç»™ serverï¼Œserver å¤„ç†åè¿”å›ç»™ clientï¼Œå®Œæˆä¸€æ¬¡äº¤äº’ã€‚è¿™ä¸ªåœºæ™¯ä½ ä¸€å®šå¾ˆç†Ÿæ‚‰å§ï¼Œæ²¡é”™ï¼Œå’Œ HTTP æ¨¡å¼éå¸¸åƒï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å°±ä¸é‡ç‚¹ä»‹ç»äº†ã€‚è‡³äºç¬¬ä¸‰ç§æ¨¡å¼ï¼Œä¸ä»Šå¤©å†…å®¹æ— å…³ï¼Œè¿™é‡Œæˆ‘ä¹Ÿä¸åšæ·±å…¥è®²è§£ã€‚</p><p>æˆ‘ä»¬éœ€è¦è¯¦ç»†æ¥çœ‹çš„æ˜¯ç¬¬äºŒç§ï¼Œå³â€œPubSubâ€æ¨¡å¼ã€‚ä¸‹é¢æ˜¯å®ƒçš„å…·ä½“å®ç°ï¼Œä»£ç å¾ˆæ¸…æ™°ï¼Œä½ åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ï¼š</p><pre><code># è®¢é˜…è€… 1\nimport zmq\n\n\ndef run():\n    context = zmq.Context()\n    socket = context.socket(zmq.SUB)\n    socket.connect('tcp://127.0.0.1:6666')\n    socket.setsockopt_string(zmq.SUBSCRIBE, '')\n\n    print('client 1')\n    while True:\n        msg = socket.recv()\n        print(&quot;msg: %s&quot; % msg)\n\n\nif __name__ == '__main__':\n    run()\n\n########## è¾“å‡º ##########\n\nclient 1\nmsg: b'server cnt 1'\nmsg: b'server cnt 2'\nmsg: b'server cnt 3'\nmsg: b'server cnt 4'\nmsg: b'server cnt 5'\n</code></pre><pre><code># è®¢é˜…è€… 2\nimport zmq\n\n\ndef run():\n    context = zmq.Context()\n    socket = context.socket(zmq.SUB)\n    socket.connect('tcp://127.0.0.1:6666')\n    socket.setsockopt_string(zmq.SUBSCRIBE, '')\n\n    print('client 2')\n    while True:\n        msg = socket.recv()\n        print(&quot;msg: %s&quot; % msg)\n\n\nif __name__ == '__main__':\n    run()\n\n########## è¾“å‡º ##########\n\nclient 2\nmsg: b'server cnt 1'\nmsg: b'server cnt 2'\nmsg: b'server cnt 3'\nmsg: b'server cnt 4'\nmsg: b'server cnt 5'\n</code></pre><pre><code># å‘å¸ƒè€…\nimport time\nimport zmq\n\n\ndef run():\n    context = zmq.Context()\n    socket = context.socket(zmq.PUB)\n    socket.bind('tcp://*:6666')\n\n    cnt = 1\n\n    while True:\n        time.sleep(1)\n        socket.send_string('server cnt {}'.format(cnt))\n        print('send {}'.format(cnt))\n        cnt += 1\n\n\nif __name__ == '__main__':\n    run()\n\n########## è¾“å‡º ##########\n\nsend 1\nsend 2\nsend 3\nsend 4\nsend 5\n</code></pre><p>è¿™é‡Œè¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœä½ æƒ³è¦è¿è¡Œä»£ç ï¼Œè¯·å…ˆè¿è¡Œä¸¤ä¸ªè®¢é˜…è€…ï¼Œç„¶åå†æ‰“å¼€å‘å¸ƒè€…ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘æ¥ç®€å•è®²è§£ä¸€ä¸‹ã€‚</p><p>å¯¹äºè®¢é˜…è€…ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯åˆ›å»ºä¸€ä¸ª zmq Contextï¼Œè¿æ¥ socket åˆ°æŒ‡å®šç«¯å£ã€‚å…¶ä¸­ï¼Œsetsockopt_string() å‡½æ•°ç”¨æ¥è¿‡æ»¤ç‰¹å®šçš„æ¶ˆæ¯ï¼Œè€Œä¸‹é¢è¿™è¡Œä»£ç ï¼š</p><pre><code>socket.setsockopt_string(zmq.SUBSCRIBE, '') \n</code></pre><p>åˆ™è¡¨ç¤ºä¸è¿‡æ»¤ä»»ä½•æ¶ˆæ¯ã€‚æœ€åï¼Œæˆ‘ä»¬è°ƒç”¨ socket.recv() æ¥æ¥å—æ¶ˆæ¯å°±è¡Œäº†ï¼Œè¿™æ¡è¯­å¥ä¼šé˜»å¡åœ¨è¿™é‡Œï¼Œç›´åˆ°æœ‰æ–°æ¶ˆæ¯æ¥ä¸´ã€‚</p><p>å¯¹äºå‘å¸ƒè€…ï¼Œæˆ‘ä»¬åŒæ ·è¦åˆ›å»ºä¸€ä¸ª zmq Contextï¼Œç»‘å®šåˆ°æŒ‡å®šç«¯å£ï¼Œä¸è¿‡è¯·æ³¨æ„ï¼Œè¿™é‡Œç”¨çš„æ˜¯ bind è€Œä¸æ˜¯ connectã€‚å› ä¸ºåœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªåœ°å€ç«¯å£ bind åªèƒ½æœ‰ä¸€ä¸ªï¼Œä½†å´å¯ä»¥æœ‰å¾ˆå¤šä¸ª connect é“¾æ¥åˆ°è¿™ä¸ªåœ°æ–¹ã€‚åˆå§‹åŒ–å®Œæˆåï¼Œå†è°ƒç”¨ socket.send_string ï¼Œå³å¯å°†æˆ‘ä»¬æƒ³è¦å‘é€çš„å†…å®¹å‘é€ç»™ ZMQã€‚</p><p>å½“ç„¶ï¼Œè¿™é‡Œè¿˜æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚é¦–å…ˆï¼Œæœ‰äº† send_stringï¼Œæˆ‘ä»¬å…¶å®å·²ç»å¯ä»¥é€šè¿‡ JSON åºåˆ—åŒ–ï¼Œæ¥ä¼ é€’å‡ ä¹æˆ‘ä»¬æƒ³è¦çš„æ‰€æœ‰æ•°æ®ç»“æ„ï¼Œè¿™é‡Œçš„æ•°æ®æµç»“æ„å°±å·²ç»å¾ˆæ¸…æ¥šäº†ã€‚</p><p>å¦å¤–ï¼ŒæŠŠå‘å¸ƒè€…çš„ time.sleep(1) æ”¾åœ¨ while å¾ªç¯çš„æœ€åï¼Œä¸¥æ ¼æ¥è¯´åº”è¯¥æ˜¯ä¸å½±å“ç»“æœçš„ã€‚è¿™é‡Œä½ å¯ä»¥å°è¯•åšä¸ªå®éªŒï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><p>ä½ è¿˜å¯ä»¥æ€è€ƒä¸‹å¦ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœè¿™é‡Œæ˜¯å¤šä¸ªå‘å¸ƒè€…ï¼Œé‚£ä¹ˆ ZMQ åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><h3>Kafka</h3><p>æ¥ç€æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ Kafkaã€‚</p><p>é€šè¿‡ä»£ç å®ç°ä½ ä¹Ÿå¯ä»¥å‘ç°ï¼ŒZMQ çš„ä¼˜ç‚¹ä¸»è¦åœ¨è½»é‡ã€å¼€æºå’Œæ–¹ä¾¿æ˜“ç”¨ä¸Šï¼Œä½†åœ¨å·¥ä¸šçº§åˆ«çš„åº”ç”¨ä¸­ï¼Œå¤§éƒ¨åˆ†äººè¿˜æ˜¯ä¼šè½¬å‘ Kafka è¿™æ ·çš„æœ‰å……è¶³æ”¯æŒçš„è½®å­ä¸Šã€‚</p><p>ç›¸æ¯”è€Œè¨€ï¼ŒKafka æä¾›äº†ç‚¹å¯¹ç‚¹ç½‘ç»œå’Œå‘å¸ƒè®¢é˜…æ¨¡å‹çš„æ”¯æŒï¼Œè¿™ä¹Ÿæ˜¯ç”¨é€”æœ€å¹¿æ³›çš„ä¸¤ç§æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹ã€‚è€Œä¸”å’Œ ZMQ ä¸€æ ·ï¼ŒKafka ä¹Ÿæ˜¯å®Œå…¨å¼€æºçš„ï¼Œå› æ­¤ä½ ä¹Ÿèƒ½å¾—åˆ°å¼€æºç¤¾åŒºçš„å……åˆ†æ”¯æŒã€‚</p><p>Kafkaçš„ä»£ç å®ç°ï¼Œå’ŒZMQå¤§åŒå°å¼‚ï¼Œè¿™é‡Œæˆ‘å°±ä¸ä¸“é—¨è®²è§£äº†ã€‚å…³äºKafkaçš„æ›´å¤šå†…å®¹ï¼Œæå®¢æ—¶é—´å¹³å°ä¹Ÿæœ‰å¯¹ Kafka çš„ä¸“é—¨è¯¦ç»†çš„ä»‹ç»ï¼Œå¯¹æ­¤æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥åœ¨æå®¢æ—¶é—´ä¸­æœç´¢â€œ<a href=\"https://time.geekbang.org/column/intro/191\">Kafkaæ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜</a>â€ï¼Œè¿™ä¸ªä¸“æ é‡Œï¼Œèƒ¡å¤•è€å¸ˆç”¨è¯¦å®çš„ç¯‡å¹…ï¼Œè®²è§£äº† Kafka çš„å®æˆ˜å’Œå†…æ ¸ï¼Œä½ å¯ä»¥åŠ ä»¥å­¦ä¹ å’Œä½¿ç”¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d4/27/d401e91a10826773067857e3c9974a27.png?wh=1804*1132\" alt=\"\"></p><center>æ¥è‡ªæå®¢æ—¶é—´ä¸“æ â€œKafkaæ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜â€</center><h2>åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„ Orderbook æ•°æ®æµ</h2><p>æœ€åå›åˆ°æˆ‘ä»¬çš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿä¸Šã€‚</p><p>é‡åŒ–äº¤æ˜“ç³»ç»Ÿä¸­ï¼Œè·å– orderbook ä¸€èˆ¬æœ‰ä¸¤ç§ç”¨é€”ï¼šç­–ç•¥ç«¯è·å–å®æ—¶æ•°æ®ï¼Œç”¨æ¥åšå†³ç­–ï¼›å¤‡ä»½åœ¨æ–‡ä»¶æˆ–è€…æ•°æ®åº“ä¸­ï¼Œæ–¹ä¾¿è®©ç­–ç•¥å’Œå›æµ‹ç³»ç»Ÿå°†æ¥ä½¿ç”¨ã€‚</p><p>å¦‚æœæˆ‘ä»¬ç›´æ¥å•æœºç›‘å¬äº¤æ˜“æ‰€çš„æ¶ˆæ¯ï¼Œé£é™©å°†ä¼šå˜å¾—å¾ˆå¤§ï¼Œè¿™åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å«åš Single Point Failureã€‚ä¸€æ—¦è¿™å°æœºå™¨å‡ºäº†æ•…éšœï¼Œæˆ–è€…ç½‘ç»œè¿æ¥çªç„¶ä¸­æ–­ï¼Œæˆ‘ä»¬çš„äº¤æ˜“ç³»ç»Ÿå°†ç«‹åˆ»æš´éœ²äºé£é™©ä¸­ã€‚</p><p>äºæ˜¯ï¼Œä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒåœ°åŒºæ”¾ç½®ä¸åŒçš„æœºå™¨ï¼Œä½¿ç”¨ä¸åŒçš„ç½‘ç»œåŒæ—¶è¿æ¥åˆ°äº¤æ˜“æ‰€ï¼Œç„¶åå°†è¿™äº›æœºå™¨æ”¶é›†åˆ°çš„ä¿¡æ¯æ±‡æ€»ã€å»é‡ï¼Œæœ€åç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„å‡†ç¡®æ•°æ®ã€‚ç›¸åº”çš„æ‹“æ‰‘å›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ab/dc/ab08e31f805d1f7ea596ae4ccdea48dc.png?wh=760*837\" alt=\"\"></p><p>å½“ç„¶ï¼Œè¿™ç§åšæ³•ä¹Ÿæœ‰å¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼šå› ä¸ºè¦åŒæ—¶ç­‰å¾…å¤šä¸ªæ•°æ®æœåŠ¡å™¨çš„æ•°æ®ï¼Œå†åŠ ä¸Šæ¶ˆæ¯é˜Ÿåˆ—çš„æ½œåœ¨å¤„ç†å»¶è¿Ÿå’Œç½‘ç»œå»¶è¿Ÿï¼Œå¯¹ç­–ç•¥æœåŠ¡å™¨è€Œè¨€ï¼Œå¯èƒ½è¦å¢åŠ å‡ ååˆ°æ•°ç™¾æ¯«ç§’çš„å»¶è¿Ÿã€‚å¦‚æœæ˜¯ä¸€äº›é«˜é¢‘æˆ–è€…æ»‘ç‚¹è¦æ±‚æ¯”è¾ƒé«˜çš„ç­–ç•¥ï¼Œè¿™ç§åšæ³•éœ€è¦è°¨æ…è€ƒè™‘ã€‚</p><p>ä½†æ˜¯ï¼Œå¯¹äºä½é¢‘ç­–ç•¥ã€æ³¢æ®µç­–ç•¥ï¼Œè¿™ç§å»¶è¿Ÿæ¢æ¥çš„æ•´ä¸ªç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ¶æ„çš„è§£è€¦æ€§ï¼Œè¿˜æ˜¯éå¸¸å€¼å¾—çš„ã€‚ä¸è¿‡ï¼Œä½ ä»ç„¶éœ€è¦æ³¨æ„ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨æœ‰å¯èƒ½æˆä¸ºç“¶é¢ˆï¼Œä¹Ÿå°±æ˜¯åˆšåˆšæ‰€è¯´çš„Single Point Failureï¼Œä¸€æ—¦æ­¤å¤„æ–­å¼€ï¼Œä¾ç„¶ä¼šå°†ç³»ç»Ÿç½®äºé£é™©ä¹‹ä¸­ã€‚</p><p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›å¾ˆæˆç†Ÿçš„ç³»ç»Ÿï¼Œä¾‹å¦‚é˜¿é‡Œçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼ŒAWS çš„ Simple Queue Service ç­‰ç­‰ï¼Œä½¿ç”¨è¿™äº›éå¸¸æˆç†Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿï¼Œé£é™©ä¹Ÿå°†ä¼šæœ€å°åŒ–ã€‚</p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬åˆ†æäº†ç°ä»£åŒ–è½¯ä»¶å·¥ç¨‹é¢†åŸŸä¸­çš„ä¸­é—´ä»¶ç³»ç»Ÿï¼Œä»¥åŠå…¶ä¸­çš„ä¸»è¦åº”ç”¨â€”â€”æ¶ˆæ¯é˜Ÿåˆ—ã€‚æˆ‘ä»¬è®²è§£äº†æœ€åŸºç¡€çš„æ¶ˆæ¯é˜Ÿåˆ—çš„æ¨¡å¼ï¼ŒåŒ…æ‹¬ç‚¹å¯¹ç‚¹æ¨¡å‹ã€å‘å¸ƒè€…è®¢é˜…è€…æ¨¡å‹ï¼Œå’Œä¸€äº›å…¶ä»–æ¶ˆæ¯é˜Ÿåˆ—è‡ªå·±æ”¯æŒçš„æ¨¡å‹ã€‚</p><p>åœ¨çœŸå®çš„é¡¹ç›®è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬è¦æ ¹æ®è‡ªå·±çš„äº§å“éœ€æ±‚ï¼Œæ¥é€‰æ‹©ä½¿ç”¨ä¸åŒçš„æ¨¡å‹ï¼›åŒæ—¶ä¹Ÿè¦åœ¨ç¼–ç¨‹å®è·µä¸­ï¼ŒåŠ æ·±å¯¹ä¸åŒæŠ€èƒ½ç‚¹çš„äº†è§£ï¼Œå¯¹ç³»ç»Ÿå¤æ‚æ€§è¿›è¡Œè§£è€¦ï¼Œè¿™æ‰æ˜¯è®¾è®¡å‡ºé«˜è´¨é‡ç³»ç»Ÿçš„å¿…ç»ä¹‹è·¯ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©çš„æ€è€ƒé¢˜ï¼Œæ–‡ä¸­æˆ‘ä¹Ÿæåˆ°è¿‡ï¼Œè¿™é‡Œå†ä¸“é—¨åˆ—å‡ºå¼ºè°ƒä¸€ä¸‹ã€‚åœ¨ZMQ é‚£é‡Œï¼Œæˆ‘æå‡ºäº†ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul>\n<li>å¦‚æœä½ è¯•ç€æŠŠå‘å¸ƒè€…çš„ time.sleep(1) æ”¾åœ¨ while å¾ªç¯çš„æœ€åï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>\n<li>å¦‚æœæœ‰å¤šä¸ªå‘å¸ƒè€…ï¼ŒZMQ åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</li>\n</ul><p>æ¬¢è¿ç•™è¨€å†™ä¸‹ä½ çš„æ€è€ƒå’Œç–‘æƒ‘ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„äººä¸€èµ·å­¦ä¹ ã€‚</p><p></p>","comments":[{"had_liked":false,"id":125461,"user_name":"Jingxiao","can_delete":false,"product_type":"c1","uid":1259521,"ip_address":"","ucode":"EB966BB87132F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","comment_is_top":true,"comment_ctime":1566187115,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"9.2233721157303992e+18","product_id":100026901,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¤§å®¶çš„å›å¤å¾ˆæ­£ç¡®ï¼Œtime.sleep(1) åç½®ï¼Œåˆ™ç¬¬ä¸€æ¡æ¶ˆæ¯ä¼šä¸¢å¤±ï¼Œå› ä¸ºå»ºç«‹è¿æ¥éœ€è¦æ—¶é—´ï¼Œå»ºç«‹æˆåŠŸä¹‹å‰çš„æ‰€æœ‰æ¶ˆæ¯éƒ½ä¼šä¸¢å¤±ã€‚<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œåœ¨ linux socket ä¸­, ä¸€ä¸ªè¿æ¥å°±æ˜¯ä¸€ä¸ª socket , ä½†åœ¨ ZMQ ä¸­, ä¸€ä¸ª socket ä¸Šå¯ä»¥æ‰¿è½½å¤šä¸ªæ•°æ®è¿æ¥. è¿™é‡Œ socket å’Œconnectionä¸å†æ˜¯åŒä¸ªå±‚æ¬¡ä¸Šçš„ç­‰ä»·è¯æ±‡, è¦æŠŠsocketç†è§£ä¸ºç¨‹åºå‘˜è®¿é—®æ•°æ®è¿æ¥çš„ä¸€ä¸ªå…¥å£ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ç»‘å®šä¸€ä¸ª socket ä¹‹åï¼Œå¯ä»¥è®©å¤šä¸ªå‘å¸ƒè€…è¿æ¥åˆ°è¿™é‡Œå³å¯ï¼Œå’Œå¤šä¸ªè®¢é˜…è€…çš„ä½¿ç”¨æ˜¯åŒæ ·çš„æ–¹å¼ã€‚","like_count":19,"discussions":[{"author":{"id":1355401,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ae/89/81404170.jpg","nickname":"Carl","note":"","ucode":"B611507DCFFA11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212298,"discussion_content":"è€å¸ˆï¼Œæˆ‘ç†è§£æ˜¯æ–°å»ºä¸€ä¸ªå‘å¸ƒè€…2ï¼Œå°†bindæ–¹æ³•æ›´æ”¹ä¸ºconnectæ–¹æ³•ï¼Œä½†æµ‹è¯•å‘ç°è®¢é˜…è€…éƒ½æ¥æ”¶ä¸åˆ°å‘å¸ƒè€…2å‘å¸ƒçš„æ¶ˆæ¯ï¼Œè¯·é—®å“ªé‡Œå‡ºäº†é—®é¢˜å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584957120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1110437,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f1/a5/6cc9f728.jpg","nickname":"ç§‹å¤©çš„é€æ˜é›¨ğŸŒ§ï¸","note":"","ucode":"9363B49BFA6C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1355401,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ae/89/81404170.jpg","nickname":"Carl","note":"","ucode":"B611507DCFFA11","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218908,"discussion_content":"ç¬¬äºŒä¸ªé—®é¢˜ï¼Œè¯•äº†åŒæ ·çš„æ–¹æ³•ï¼Œé‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å¯¹è€å¸ˆçš„æ„æ€ç†è§£é”™äº†ã€‚å¦å¤–çœ‹åˆ°æœ‰XPUB/XSUBæ¨¡å¼å¯ä»¥å¤šä¸ªå‘å¸ƒè€…å¯¹å¤šä¸ªè®¢é˜…è€…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585712805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":212298,"ip_address":""},"score":218908,"extra":""}]}]},{"had_liked":false,"id":121910,"user_name":"Skrpy","can_delete":false,"product_type":"c1","uid":1524904,"ip_address":"","ucode":"BB6CB4E9AA1712","user_header":"https://static001.geekbang.org/account/avatar/00/17/44/a8/0ce75c8c.jpg","comment_is_top":false,"comment_ctime":1565247128,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"139004200600","product_id":100026901,"comment_content":"æˆ‘ä»¥ä¸ºå®æˆ˜ç¯‡ä¼šæœ‰é‡åŒ–äº¤æ˜“å¹³å°çš„å®ç°çš„â€¦å¯æ˜¯è€å¸ˆåªè®²äº†ä¸€äº› Kafka çš„æ¦‚å¿µï¼Œ39è®²çš„ Django ä¹Ÿåªæ˜¯å®˜æ–¹æ–‡æ¡£çš„ä¾‹å­â€¦è€å¸ˆæœ‰æ²¡æœ‰æ›´å¥½çš„å®æˆ˜æ•™ç¨‹ï¼Ÿ","like_count":33,"discussions":[{"author":{"id":2281842,"avatar":"","nickname":"Geek_97cfce","note":"","ucode":"4FA103B707B78D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337369,"discussion_content":"ç¢ºå¯¦ï¼Œå¤§å¤±æ‰€æœ›!","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1608884706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043446,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/eb/f6/ec7971f4.jpg","nickname":"å›ºæ€Uç›˜","note":"","ucode":"9C473DA25CB4C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400945,"discussion_content":"å¤§å¤±æ‰€æœ›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633496723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050145,"avatar":"https://static001.geekbang.org/account/avatar/00/10/06/21/27053296.jpg","nickname":"Sky2008","note":"","ucode":"53C06E0ED256B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24065,"discussion_content":"æœ¨å¾—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569990154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119884,"user_name":"SCAR","can_delete":false,"product_type":"c1","uid":1031209,"ip_address":"","ucode":"38C0927FA3C5FC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bc/29/022905e6.jpg","comment_is_top":false,"comment_ctime":1564718674,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31629489746","product_id":100026901,"comment_content":"æ€è€ƒé¢˜<br>1.å¦‚æœæŠŠtime.sleep(1)æ”¾åœ¨while å¾ªç¯çš„æœ€åï¼Œè®¢é˜…è€…ä¼šæ¥æ”¶ä¸åˆ°å‘å¸ƒè€…å‘å¸ƒçš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯â€˜server cnt 1â€™ï¼Œå› ä¸ºè®¢é˜…è€…å’Œå‘å¸ƒè€…å»ºç«‹è¿æ¥éœ€è¦æ—¶é—´ï¼Œè¿æ¥å¥½åå·²ç»æ˜¯åœ¨ç¬¬ä¸€ä¸ªæ¶ˆæ¯å‘å¸ƒä¹‹åäº†ï¼Œè‡ªç„¶è®¢é˜…è€…ä¼šæ‰‹ä¸åˆ°ç¬¬ä¸€ä¸ªæ¶ˆæ¯çš„ã€‚<br>2.å¤šä¸ªå‘å¸ƒè€…çš„è¯ï¼Œä¸åŒçš„å‘å¸ƒè€…ä½¿ç”¨ä¸åŒçš„ç«¯å£ï¼Œè€Œåè®¢é˜…è€…æ ¹æ®åŒ¹é…çš„ç«¯å£è¯»å–æ¶ˆæ¯ã€‚","like_count":7},{"had_liked":false,"id":119957,"user_name":"hlz-123","can_delete":false,"product_type":"c1","uid":1433586,"ip_address":"","ucode":"B7E5EF0C260BD2","user_header":"","comment_is_top":false,"comment_ctime":1564737291,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23039573771","product_id":100026901,"comment_content":"æ€è€ƒé¢˜<br>1.å¦‚æœæŠŠtime.sleep(1)æ”¾åœ¨whileå¾ªç¯æœ€åï¼Œè®¢é˜…è€…æ¥æ”¶ä¸åˆ°å‘å¸ƒè€…çš„ç¬¬ä¸€æ¡æ¶ˆæ¯ï¼Œå› ä¸ºï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…å»ºç«‹è¿æ¥éœ€è¦æ—¶é—´ï¼Œåœ¨æˆ‘çš„ç”µè„‘ä¸­ï¼Œå»ºç«‹è¿æ¥çš„æ—¶é—´ä¸ä½äº0.5ç§’ï¼Œå¹¶ä¸”é€šè¿‡ç¨‹åºè¿è¡Œè¡¨æ˜ï¼Œåªåœ¨å‘å¸ƒè€…whileå¾ªç¯ä¸­ç¬¬ä¸€æ¬¡æ‰§è¡Œsleep(1)ï¼Œä»¥åæ¯æ¬¡å¾ªç¯ä¸æ‰§è¡Œsleep(1),æ¥æ”¶è€…ä¹Ÿèƒ½æ­£å¸¸æ¥æ”¶åˆ°å‘å¸ƒè€…ä¿¡æ¯ï¼Œ<br>è‡³äºå…·ä½“åŸå› ï¼Œéœ€è¦è€å¸ˆè®²è§£ä¸€ä¸‹ã€‚<br>2.å¦‚æœæœ‰å¤šä¸ªå‘å¸ƒè€…ï¼Œæ¯ä¸ªå‘å¸ƒè€…åº”è¯¥ç»‘å®šä¸€ä¸ªsocket<br>              ä¾‹å¦‚ï¼Œå‘å¸ƒè€…1ï¼Œsocket.bind(&#39;tcp:&#47;&#47;*:6666&#39;)<br>                        å‘å¸ƒè€…2ï¼Œsocket.bind(&#39;tcp:&#47;&#47;*:6667&#39;)<br>   å¯¹äºæ¥æ”¶è€…æ¥è®²ï¼Œå¯ä»¥æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå‘å¸ƒè€…çš„æ¶ˆæ¯ï¼Œ<br>              æ¥æ”¶å‘å¸ƒè€…1æ¶ˆæ¯ï¼Œsocket.connect(&#39;tcp:&#47;&#47;127.0.0.1:6666&#39;)<br>              æ¥æ”¶å‘å¸ƒè€…2æ¶ˆæ¯ï¼Œsocket.connect(&#39;tcp:&#47;&#47;127.0.0.1:6667&#39;)","like_count":5},{"had_liked":false,"id":119865,"user_name":"å®ä»”","can_delete":false,"product_type":"c1","uid":1013493,"ip_address":"","ucode":"A0F17DFF99DB21","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg","comment_is_top":false,"comment_ctime":1564714904,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18744584088","product_id":100026901,"comment_content":"æŠŠå‘å¸ƒè€…çš„time.sleep(1)æ”¾åˆ°å¾ªç¯è¯­å¥åé¢ï¼Œä¼šå¯¼è‡´ç¬¬ä¸€æ¡æ¶ˆæ¯(server cnt 1)ä¸¢å¤±ã€‚åŸå› æ˜¯æ­¤æ—¶å‘å¸ƒè€…åº”è¯¥è¿˜æ²¡æœ‰å’Œzmqå®Œå…¨å»ºç«‹é€šè®¯é€šé“ï¼Œå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±","like_count":5},{"had_liked":false,"id":278074,"user_name":"æ•™æˆ","can_delete":false,"product_type":"c1","uid":1071570,"ip_address":"","ucode":"922FD565836A83","user_header":"https://static001.geekbang.org/account/avatar/00/10/59/d2/c309928f.jpg","comment_is_top":false,"comment_ctime":1612750912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10202685504","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨pyzmqï¼Œå‘å¸ƒè€…&#47;è®¢é˜…è€…æ¨¡å¼ï¼Œå‘ç°æœ‰ä¸€ä¸ªè®¢é˜…è€…çªç„¶æ¥æ”¶ä¸åˆ°ä¿¡æ¯äº†ï¼Œä¹‹å‰èƒ½æ¥æ”¶ï¼Œè¯·è€å¸ˆæŒ‡ç‚¹ä¸€ä¸‹","like_count":2},{"had_liked":false,"id":201035,"user_name":"ç§‹å¤©çš„é€æ˜é›¨ğŸŒ§ï¸","can_delete":false,"product_type":"c1","uid":1110437,"ip_address":"","ucode":"9363B49BFA6C14","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/a5/6cc9f728.jpg","comment_is_top":false,"comment_ctime":1585708365,"is_pvip":false,"replies":[{"id":"75933","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1586150328,"ip_address":"","comment_id":201035,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10175642957","product_id":100026901,"comment_content":"æœ¬æœºç¯å¢ƒpython 3.7.6ï¼Œ éœ€è¦æŠŠcontext = zmq.Context() æ”¹æˆ context = zmq.Context.instance()","like_count":2,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490218,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586150328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119844,"user_name":"å®ä»”","can_delete":false,"product_type":"c1","uid":1013493,"ip_address":"","ucode":"A0F17DFF99DB21","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg","comment_is_top":false,"comment_ctime":1564711774,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10154646366","product_id":100026901,"comment_content":"æŠŠtime.sleep(1)æ”¾åˆ°whileåé¢ï¼Œæ¶ˆè´¹è€…ç¬¬ä¸€ä¸ªæ•°æ®åŒ…(server cnt 1)æ”¶ä¸åˆ°","like_count":2},{"had_liked":false,"id":193742,"user_name":"Carl","can_delete":false,"product_type":"c1","uid":1355401,"ip_address":"","ucode":"B611507DCFFA11","user_header":"https://static001.geekbang.org/account/avatar/00/14/ae/89/81404170.jpg","comment_is_top":false,"comment_ctime":1584956959,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879924255","product_id":100026901,"comment_content":"æˆ‘ç†è§£æ–°å¢ä¸€ä¸ªå‘å¸ƒè€…2ï¼Œå°†bindæ–¹æ³•æ”¹ä¸ºconnectï¼Œä½†æ˜¯æµ‹è¯•å‘ç°å¹¶ä¸èƒ½å¤Ÿæ¥æ”¶åˆ°å‘å¸ƒè€…2å‘å¸ƒçš„ä¿¡æ¯","like_count":1},{"had_liked":false,"id":185380,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1583570925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878538221","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ï¼š<br>ï¼ˆ1ï¼‰time.sleep(1)æ”¾åˆ°å¾ªç¯æœ€åï¼Œå‘å¸ƒè€…ç¬¬ä¸€æ¬¡å‘é€çš„æ¶ˆæ¯ï¼Œæ²¡æœ‰è¢«è®¢é˜…è€…æ¥å—åˆ°ã€‚<br>ç”±äºå¯¹zmqçŸ¥ä¹‹ç”šå°‘ï¼Œä¸ªäººè‚¤æµ…ç†è§£ï¼šå¯èƒ½æ˜¯zmqçš„å‘å¸ƒè€…åœ¨ç»‘å®šç«¯å£æ—¶ï¼Œä¸­é—´ä»¶å¯èƒ½ä¼šåšä¸€ç³»åˆ—çš„æ£€æµ‹ï¼Œå¦‚æ£€æµ‹ç½‘ç»œï¼Œæ£€æŸ¥ç«¯å£çš„å¯ç”¨æ€§ç­‰ç­‰ï¼Œä¼šæœ‰ä¸€å®šçš„å»¶è¿Ÿï¼Œå› æ­¤éœ€è¦åœ¨ç«¯å£ç»‘å®šåå»¶è¿Ÿä¸€ç§’ã€‚<br><br>ï¼ˆ2ï¼‰å¯¹äºæœ‰å¤šä¸ªå‘å¸ƒè€…ï¼Œzmqè¦æ±‚ä¸åŒçš„å‘å¸ƒè€…ç»‘å®šåˆ°ä¸åŒçš„ç«¯å£ï¼Œå¤šä¸ªå‘å¸ƒè€…è¿˜æ˜¯å¯ä»¥æ­£å¸¸å‘é€ä¿¡æ¯ï¼Œè€Œå¯¹äºè®¢é˜…è€…ï¼Œéœ€è¦ç»‘å®šå¯¹åº”çš„å‘å¸ƒè€…ç«¯å£æ‰èƒ½æ¥å—åˆ°å‘å¸ƒè€…å‘é€çš„ä¿¡æ¯ã€‚<br><br>ä»¥ä¸Šè§è§£ï¼Œæœ‰é”™è¯¯ä¹‹å¤„è¯·è€å¸ˆæŒ‡æ­£ã€‚","like_count":1},{"had_liked":false,"id":133196,"user_name":"hel793","can_delete":false,"product_type":"c1","uid":1414844,"ip_address":"","ucode":"4E4F51EE321162","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKxqOFPRvW2d6WEC705zuSSvxBOBxibBib4XQxBGAGPOx2bRGqhsSeQkUNa0Z11OJoKbuGsNaMR4GNg/132","comment_is_top":false,"comment_ctime":1568440696,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5863407992","product_id":100026901,"comment_content":"éœ€å®‰è£… pyzmq","like_count":1},{"had_liked":false,"id":120484,"user_name":"å°ä¾ é¾™æ—‹é£","can_delete":false,"product_type":"c1","uid":1126441,"ip_address":"","ucode":"073F3924A99835","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","comment_is_top":false,"comment_ctime":1564910875,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5859878171","product_id":100026901,"comment_content":"socket.bind(&#39;tcp:&#47;&#47;*:6666&#39;)è¿™å¥è¯é‡ŒåŸŸåå†™æˆ*æ˜¯ä¸æ˜¯æŒ‡ä»»æ„åŸŸåï¼Ÿ","like_count":1},{"had_liked":false,"id":343224,"user_name":"Geek_fc975d","can_delete":false,"product_type":"c1","uid":2459939,"ip_address":"","ucode":"05B6507FE4349B","user_header":"https://static001.geekbang.org/account/avatar/00/25/89/23/e71f180b.jpg","comment_is_top":false,"comment_ctime":1650718414,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650718414","product_id":100026901,"comment_content":"è€å¸ˆï¼Œä½¿ç”¨pip install zmqçš„å®‰è£…æ–¹å¼å®‰è£…åï¼Œå‘ç°å¾ˆå¤šå‡½æ•°ä¸èƒ½ç”¨ï¼Œè¯·æ•™è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":310576,"user_name":"06","can_delete":false,"product_type":"c1","uid":1983445,"ip_address":"","ucode":"E28B4D359D120F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/43/d5/358b4426.jpg","comment_is_top":false,"comment_ctime":1630751739,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630751739","product_id":100026901,"comment_content":"æ–‡ç« æåˆ°ä¸­ä½é¢‘ç­–ç•¥å¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æé«˜ç¨³å®šæ€§ï¼Œé‚£ä¹ˆé«˜é¢‘ç­–ç•¥æœ‰æ²¡æœ‰ç±»ä¼¼çš„å®ç°ï¼Ÿ","like_count":0},{"had_liked":false,"id":294024,"user_name":"dived","can_delete":false,"product_type":"c1","uid":2369413,"ip_address":"","ucode":"141916A3BAF5A1","user_header":"https://static001.geekbang.org/account/avatar/00/24/27/85/ddeeaf30.jpg","comment_is_top":false,"comment_ctime":1621684111,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621684111","product_id":100026901,"comment_content":"ä¸çŸ¥é“æˆ‘å¾—å®ç°æ˜¯ä¸€ä¸ªå’Œè€å¸ˆè¯´å¾—æ„æ€ä¸<br>c.py<br>    context = zmq.Context()<br>    socket = context.socket(zmq.PULL)<br>    socket.bind(&#39;tcp:&#47;&#47;127.0.0.1:6666&#39;)<br>s1.py&#47; s2.py<br>    print(&#39;send1&#39;) &#47; print(&#39;send2&#39;<br>    socket = context.socket(zmq.PUSH)<br>    socket.connect(&#39;tcp:&#47;&#47;127.0.0.1:6666&#39;)<br>","like_count":0},{"had_liked":false,"id":119819,"user_name":"Claywoow","can_delete":false,"product_type":"c1","uid":1524797,"ip_address":"","ucode":"1F1C70BCE33536","user_header":"https://static001.geekbang.org/account/avatar/00/17/44/3d/35d6670d.jpg","comment_is_top":false,"comment_ctime":1564708254,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1564708254","product_id":100026901,"comment_content":"è€å¸ˆï¼Œceleryè¿™ä¸ªæ¶ˆæ¯é˜Ÿåˆ—å’Œæ‚¨è®²è¿°çš„è¿™ä¸¤ç§æœ‰ä»€ä¹ˆåŒºåˆ«å˜›ï¼Ÿç”Ÿäº§ç¯å¢ƒå¤§å¤šå“ªç§æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒå®ç”¨å’Œé«˜æ•ˆ","like_count":0,"discussions":[{"author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3819,"discussion_content":"RabbitMQ ä¹Ÿæ˜¯ç”Ÿäº§çº§åˆ«çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸ºä»€ä¹ˆè€å¸ˆä¸è®²è¿™ä¸ªå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564841570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1218173,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/7d/c7e8cd34.jpg","nickname":"å¹²å¸ƒçƒ","note":"","ucode":"048ABC199D89B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3692,"discussion_content":"ä¸ªäººç†è§£celeryåªæ˜¯ä¸€ç§å¼‚æ­¥å¤„ç†çš„å·¥å…·ï¼Œceleryæœ¬èº«ä¹Ÿæ˜¯ä¾èµ–å…¶ä»–æ¶ˆæ¯é˜Ÿåˆ—çš„ï¼Œæ¯”å¦‚æœåŠ¡å™¨å‘é€æ¶ˆæ¯åˆ°ä¸­é—´ä»¶ï¼Œå¦‚redisã€RabbitMQã€Kafkaç­‰ï¼Œcelery workerå‘ä¸­é—´ä»¶è®¢é˜…æ¶ˆæ¯å¹¶ä»ä¸­å–å‡ºè¿›è¡Œå¤„ç†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1564714679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119796,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1564704847,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564704847","product_id":100026901,"comment_content":"ä»Šå¤©è°ˆåˆ°äº†æ•°æ®ç»“æ„ï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œæ•°æ®ç»“æ„å¦‚æœæ˜¯åŸºäºé“¾è¡¨çš„ï¼Œåœ¨å…¶å®ƒè¯­è¨€ä¸­ä¼šå¤§é‡ä½¿ç”¨æŒ‡é’ˆå’Œå¼•ç”¨ï¼Œä½†æ˜¯åŸºäºpythonè¯­è¨€å˜é‡å«ä¹‰çš„ç‰¹æ®Šæ€§åŠå‚æ•°ä¼ é€’çš„ç‰¹æ€§ï¼Œåœ¨å®ç°é“¾è¡¨ç»“æ„çš„æ—¶å€™æœ‰æ²¡æœ‰æ¯”è¾ƒæ˜ç¡®çš„æŒ‡å¯¼å‘¢ï¼Ÿ<br><br>æ„Ÿè§‰9å’±ä»¬ä¸“æ æœ‰å¾ˆå¤šç‚¹éƒ½å’Œæ•°æ®ç»“æ„çš„å®ç°æœ‰å…³ï¼Œä½†æ˜¯æ¯”è¾ƒåˆ†æ•£ã€‚","like_count":0,"discussions":[{"author":{"id":1284626,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9a/12/06863960.jpg","nickname":"ç¨³","note":"","ucode":"BF5723E63E4115","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3695,"discussion_content":"pythonçš„é“¾è¡¨æ˜¯ç”¨ç±»å®ç°çš„ï¼Œç±»çš„ä¼ é€’æ˜¯ä¼ é€’æŒ‡é’ˆ--ä¸ªäººç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564716777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}