{"id":120014,"title":"23 | å•çº¿ç¨‹æ¨¡å‹æ€ä¹ˆä¿è¯UIè¿è¡Œæµç•…ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚</p><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·å­¦ä¹ äº†å¦‚ä½•åœ¨Flutterä¸­å®ç°åŠ¨ç”»ã€‚å¯¹äºç»„ä»¶åŠ¨ç”»ï¼ŒFlutterå°†åŠ¨ç”»çš„çŠ¶æ€ä¸æ¸²æŸ“è¿›è¡Œäº†åˆ†ç¦»ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨åŠ¨ç”»æ›²çº¿ç”Ÿæˆå™¨Animationã€åŠ¨ç”»çŠ¶æ€æ§åˆ¶å™¨AnimationControllerä¸åŠ¨ç”»è¿›åº¦ç›‘å¬å™¨ä¸€èµ·é…åˆå®ŒæˆåŠ¨ç”»æ›´æ–°ï¼›è€Œå¯¹äºè·¨é¡µé¢åŠ¨ç”»ï¼ŒFlutteræä¾›äº†Heroç»„ä»¶ï¼Œå¯ä»¥å®ç°å…±äº«å…ƒç´ å˜æ¢çš„é¡µé¢åˆ‡æ¢æ•ˆæœã€‚</p><p>åœ¨ä¹‹å‰çš„ç« èŠ‚é‡Œï¼Œæˆ‘ä»¬ä»‹ç»äº†å¾ˆå¤šFlutteræ¡†æ¶å‡ºè‰²çš„æ¸²æŸ“å’Œäº¤äº’èƒ½åŠ›ã€‚æ”¯æ’‘èµ·è¿™äº›å¤æ‚çš„èƒ½åŠ›èƒŒåï¼Œå®é™…ä¸Šæ˜¯åŸºäºå•çº¿ç¨‹æ¨¡å‹çš„Dartã€‚é‚£ä¹ˆï¼Œä¸åŸç”ŸAndroidå’ŒiOSçš„å¤šçº¿ç¨‹æœºåˆ¶ç›¸æ¯”ï¼Œå•çº¿ç¨‹çš„Dartå¦‚ä½•ä»è¯­è¨€è®¾è®¡å±‚é¢å’Œä»£ç è¿è¡Œæœºåˆ¶ä¸Šä¿è¯Flutter UIçš„æµç•…æ€§å‘¢ï¼Ÿ</p><p>å› æ­¤ä»Šå¤©ï¼Œæˆ‘ä¼šé€šè¿‡å‡ ä¸ªå°ä¾‹å­ï¼Œå¾ªåºæ¸è¿›åœ°å‘ä½ ä»‹ç»Dartè¯­è¨€çš„Event Loopå¤„ç†æœºåˆ¶ã€å¼‚æ­¥å¤„ç†å’Œå¹¶å‘ç¼–ç¨‹çš„åŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œä»è¯­è¨€è®¾è®¡å’Œå®è·µå±‚é¢ç†è§£Dartå•çº¿ç¨‹æ¨¡å‹ä¸‹çš„ä»£ç è¿è¡Œæœ¬è´¨ï¼Œä»è€Œæ‡‚å¾—åç»­å¦‚ä½•åœ¨å·¥ä½œä¸­ä½¿ç”¨Futureä¸Isolateï¼Œä¼˜åŒ–æˆ‘ä»¬çš„é¡¹ç›®ã€‚</p><h2>Event Loopæœºåˆ¶</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹è¿™æ ·ä¸€ä¸ªæ¦‚å¿µï¼Œé‚£å°±æ˜¯<strong>Dartæ˜¯å•çº¿ç¨‹çš„</strong>ã€‚é‚£å•çº¿ç¨‹æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿè¿™æ„å‘³ç€Dartä»£ç æ˜¯æœ‰åºçš„ï¼ŒæŒ‰ç…§åœ¨mainå‡½æ•°å‡ºç°çš„æ¬¡åºä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œï¼Œä¸ä¼šè¢«å…¶ä»–ä»£ç ä¸­æ–­ã€‚å¦å¤–ï¼Œä½œä¸ºæ”¯æŒFlutterè¿™ä¸ªUIæ¡†æ¶çš„å…³é”®æŠ€æœ¯ï¼ŒDartå½“ç„¶ä¹Ÿæ”¯æŒå¼‚æ­¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>å•çº¿ç¨‹å’Œå¼‚æ­¥å¹¶ä¸å†²çªã€‚</strong></p><!-- [[[read_end]]] --><p>é‚£ä¸ºä»€ä¹ˆå•çº¿ç¨‹ä¹Ÿå¯ä»¥å¼‚æ­¥ï¼Ÿ</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªå¤§å‰æï¼Œé‚£å°±æ˜¯æˆ‘ä»¬çš„Appç»å¤§å¤šæ•°æ—¶é—´éƒ½åœ¨ç­‰å¾…ã€‚æ¯”å¦‚ï¼Œç­‰ç”¨æˆ·ç‚¹å‡»ã€ç­‰ç½‘ç»œè¯·æ±‚è¿”å›ã€ç­‰æ–‡ä»¶IOç»“æœï¼Œç­‰ç­‰ã€‚è€Œè¿™äº›ç­‰å¾…è¡Œä¸ºå¹¶ä¸æ˜¯é˜»å¡çš„ã€‚æ¯”å¦‚è¯´ï¼Œç½‘ç»œè¯·æ±‚ï¼ŒSocketæœ¬èº«æä¾›äº†selectæ¨¡å‹å¯ä»¥å¼‚æ­¥æŸ¥è¯¢ï¼›è€Œæ–‡ä»¶IOï¼Œæ“ä½œç³»ç»Ÿä¹Ÿæä¾›äº†åŸºäºäº‹ä»¶çš„å›è°ƒæœºåˆ¶ã€‚</p><p>æ‰€ä»¥ï¼ŒåŸºäºè¿™äº›ç‰¹ç‚¹ï¼Œå•çº¿ç¨‹æ¨¡å‹å¯ä»¥åœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­åšåˆ«çš„äº‹æƒ…ï¼Œç­‰çœŸæ­£éœ€è¦å“åº”ç»“æœäº†ï¼Œå†å»åšå¯¹åº”çš„å¤„ç†ã€‚å› ä¸ºç­‰å¾…è¿‡ç¨‹å¹¶ä¸æ˜¯é˜»å¡çš„ï¼Œæ‰€ä»¥ç»™æˆ‘ä»¬çš„æ„Ÿè§‰å°±åƒæ˜¯åŒæ—¶åœ¨åšå¤šä»¶äº‹æƒ…ä¸€æ ·ã€‚ä½†å…¶å®å§‹ç»ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¤„ç†ä½ çš„äº‹æƒ…ã€‚</p><p>ç­‰å¾…è¿™ä¸ªè¡Œä¸ºæ˜¯é€šè¿‡Event Loopé©±åŠ¨çš„ã€‚äº‹ä»¶é˜Ÿåˆ—Event Queueä¼šæŠŠå…¶ä»–å¹³è¡Œä¸–ç•Œï¼ˆæ¯”å¦‚Socketï¼‰å®Œæˆçš„ï¼Œéœ€è¦ä¸»çº¿ç¨‹å“åº”çš„äº‹ä»¶æ”¾å…¥å…¶ä¸­ã€‚åƒå…¶ä»–è¯­è¨€ä¸€æ ·ï¼ŒDartä¹Ÿæœ‰ä¸€ä¸ªå·¨å¤§çš„äº‹ä»¶å¾ªç¯ï¼Œåœ¨ä¸æ–­çš„è½®è¯¢äº‹ä»¶é˜Ÿåˆ—ï¼Œå–å‡ºäº‹ä»¶ï¼ˆæ¯”å¦‚ï¼Œé”®ç›˜äº‹ä»¶ã€I\\Oäº‹ä»¶ã€ç½‘ç»œäº‹ä»¶ç­‰ï¼‰ï¼Œåœ¨ä¸»çº¿ç¨‹åŒæ­¥æ‰§è¡Œå…¶å›è°ƒå‡½æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0c/ec/0cb6e6d34295cef460e48d139bc944ec.png?wh=880*582\" alt=\"\"></p><center><span class=\"reference\">å›¾1 ç®€åŒ–ç‰ˆEvent Loop</span></center><h2>å¼‚æ­¥ä»»åŠ¡</h2><p>äº‹å®ä¸Šï¼Œå›¾1çš„Event Loopç¤ºæ„å›¾åªæ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆã€‚åœ¨Dartä¸­ï¼Œå®é™…ä¸Šæœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—ï¼ˆEvent Queueï¼‰ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰ã€‚åœ¨æ¯ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼ŒDartæ€»æ˜¯å…ˆå»ç¬¬ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æŸ¥è¯¢æ˜¯å¦æœ‰å¯æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‰ä¼šå¤„ç†åç»­çš„äº‹ä»¶é˜Ÿåˆ—çš„æµç¨‹ã€‚</p><p>æ‰€ä»¥ï¼ŒEvent Loopå®Œæ•´ç‰ˆçš„æµç¨‹å›¾ï¼Œåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/70/bc/70dc4e1c222ddfaee8aa06df85c22bbc.png?wh=902*678\" alt=\"\"></p><center><span class=\"reference\">å›¾2 Microtask Queueä¸Event Queue</span></center><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†åˆ«çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªé˜Ÿåˆ—çš„ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯å§ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚å¾®ä»»åŠ¡é¡¾åæ€ä¹‰ï¼Œè¡¨ç¤ºä¸€ä¸ªçŸ­æ—¶é—´å†…å°±ä¼šå®Œæˆçš„å¼‚æ­¥ä»»åŠ¡ã€‚ä»ä¸Šé¢çš„æµç¨‹å›¾å¯ä»¥çœ‹åˆ°ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—åœ¨äº‹ä»¶å¾ªç¯ä¸­çš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼Œåªè¦é˜Ÿåˆ—ä¸­è¿˜æœ‰ä»»åŠ¡ï¼Œå°±å¯ä»¥ä¸€ç›´éœ¸å ç€äº‹ä»¶å¾ªç¯ã€‚</p><p>å¾®ä»»åŠ¡æ˜¯ç”±scheduleMicroTaskå»ºç«‹çš„ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œè¿™æ®µä»£ç ä¼šåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­è¾“å‡ºä¸€æ®µå­—ç¬¦ä¸²ï¼š</p><pre><code>scheduleMicrotask(() =&gt; print('This is a microtask'));\n</code></pre><p>ä¸è¿‡ï¼Œä¸€èˆ¬çš„å¼‚æ­¥ä»»åŠ¡é€šå¸¸ä¹Ÿå¾ˆå°‘å¿…é¡»è¦åœ¨äº‹ä»¶é˜Ÿåˆ—å‰å®Œæˆï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦å¤ªé«˜çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸å¾ˆå°‘ä¼šç›´æ¥ç”¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°±è¿Flutterå†…éƒ¨ï¼Œä¹Ÿåªæœ‰7å¤„ç”¨åˆ°äº†è€Œå·²ï¼ˆæ¯”å¦‚ï¼Œæ‰‹åŠ¿è¯†åˆ«ã€æ–‡æœ¬è¾“å…¥ã€æ»šåŠ¨è§†å›¾ã€ä¿å­˜é¡µé¢æ•ˆæœç­‰éœ€è¦é«˜ä¼˜æ‰§è¡Œä»»åŠ¡çš„åœºæ™¯ï¼‰ã€‚</p><p>å¼‚æ­¥ä»»åŠ¡æˆ‘ä»¬ç”¨çš„æœ€å¤šçš„è¿˜æ˜¯ä¼˜å…ˆçº§æ›´ä½çš„Event Queueã€‚æ¯”å¦‚ï¼ŒI/Oã€ç»˜åˆ¶ã€å®šæ—¶å™¨è¿™äº›å¼‚æ­¥äº‹ä»¶ï¼Œéƒ½æ˜¯é€šè¿‡äº‹ä»¶é˜Ÿåˆ—é©±åŠ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„ã€‚</p><p><strong>Dartä¸ºEvent Queueçš„ä»»åŠ¡å»ºç«‹æä¾›äº†ä¸€å±‚å°è£…ï¼Œå«ä½œFuture</strong>ã€‚ä»åå­—ä¸Šä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªåœ¨æœªæ¥æ—¶é—´æ‰ä¼šå®Œæˆçš„ä»»åŠ¡ã€‚</p><p>æŠŠä¸€ä¸ªå‡½æ•°ä½“æ”¾å…¥Futureï¼Œå°±å®Œæˆäº†ä»åŒæ­¥ä»»åŠ¡åˆ°å¼‚æ­¥ä»»åŠ¡çš„åŒ…è£…ã€‚Futureè¿˜æä¾›äº†é“¾å¼è°ƒç”¨çš„èƒ½åŠ›ï¼Œå¯ä»¥åœ¨å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åä¾æ¬¡æ‰§è¡Œé“¾è·¯ä¸Šçš„å…¶ä»–å‡½æ•°ä½“ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªå…·ä½“çš„ä»£ç ç¤ºä¾‹ï¼šåˆ†åˆ«å£°æ˜ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­è¾“å‡ºä¸€æ®µå­—ç¬¦ä¸²ã€‚å…¶ä¸­ç¬¬äºŒä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œè¿˜ä¼šç»§ç»­è¾“å‡ºå¦å¤–ä¸¤æ®µå­—ç¬¦ä¸²ï¼š</p><pre><code>Future(() =&gt; print('Running in Future 1'));//ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯è¾“å‡ºå­—ç¬¦ä¸²\n\nFuture(() =&gt; print(â€˜Running in Future 2'))\n  .then((_) =&gt; print('and then 1'))\n  .then((_) =&gt; print('and then 2â€™));//ä¸Šä¸€ä¸ªäº‹ä»¶å¾ªç¯ç»“æŸåï¼Œè¿ç»­è¾“å‡ºä¸‰æ®µå­—ç¬¦ä¸²\n</code></pre><p>å½“ç„¶ï¼Œè¿™ä¸¤ä¸ªFutureå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œä¼˜å…ˆçº§æ¯”å¾®ä»»åŠ¡çš„ä¼˜å…ˆçº§è¦ä½ã€‚</p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªFutureå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œæ˜¯ç›¸å¯¹ç®€å•çš„ï¼šåœ¨æˆ‘ä»¬å£°æ˜ä¸€ä¸ªFutureæ—¶ï¼ŒDartä¼šå°†å¼‚æ­¥ä»»åŠ¡çš„å‡½æ•°æ‰§è¡Œä½“æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ï¼Œç„¶åç«‹å³è¿”å›ï¼Œåç»­çš„ä»£ç ç»§ç»­åŒæ­¥æ‰§è¡Œã€‚è€Œå½“åŒæ­¥æ‰§è¡Œçš„ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œäº‹ä»¶é˜Ÿåˆ—ä¼šæŒ‰ç…§åŠ å…¥äº‹ä»¶é˜Ÿåˆ—çš„é¡ºåºï¼ˆå³å£°æ˜é¡ºåºï¼‰ï¼Œä¾æ¬¡å–å‡ºäº‹ä»¶ï¼Œæœ€ååŒæ­¥æ‰§è¡ŒFutureçš„å‡½æ•°ä½“åŠåç»­çš„thenã€‚</p><p>è¿™æ„å‘³ç€ï¼Œ<strong>thenä¸Futureå‡½æ•°ä½“å…±ç”¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯</strong>ã€‚è€Œå¦‚æœFutureæœ‰å¤šä¸ªthenï¼Œå®ƒä»¬ä¹Ÿä¼šæŒ‰ç…§é“¾å¼è°ƒç”¨çš„å…ˆåé¡ºåºåŒæ­¥æ‰§è¡Œï¼ŒåŒæ ·ä¹Ÿä¼šå…±ç”¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚</p><p>å¦‚æœFutureæ‰§è¡Œä½“å·²ç»æ‰§è¡Œå®Œæ¯•äº†ï¼Œä½†ä½ åˆæ‹¿ç€è¿™ä¸ªFutureçš„å¼•ç”¨ï¼Œå¾€é‡Œé¢åŠ äº†ä¸€ä¸ªthenæ–¹æ³•ä½“ï¼Œè¿™æ—¶Dartä¼šå¦‚ä½•å¤„ç†å‘¢ï¼Ÿé¢å¯¹è¿™ç§æƒ…å†µï¼ŒDartä¼šå°†åç»­åŠ å…¥çš„thenæ–¹æ³•ä½“æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°½å¿«æ‰§è¡Œã€‚</p><p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†Futureçš„æ‰§è¡Œè§„åˆ™ï¼Œå³ï¼Œå…ˆåŠ å…¥äº‹ä»¶é˜Ÿåˆ—ï¼Œæˆ–è€…å…ˆå£°æ˜çš„ä»»åŠ¡å…ˆæ‰§è¡Œï¼›thenåœ¨Futureç»“æŸåç«‹å³æ‰§è¡Œã€‚</p><ul>\n<li>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œç”±äºf1æ¯”f2å…ˆå£°æ˜ï¼Œå› æ­¤ä¼šè¢«å…ˆåŠ å…¥äº‹ä»¶é˜Ÿåˆ—ï¼Œæ‰€ä»¥f1æ¯”f2å…ˆæ‰§è¡Œï¼›</li>\n<li>åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œç”±äºFutureå‡½æ•°ä½“ä¸thenå…±ç”¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œå› æ­¤f3æ‰§è¡Œåä¼šç«‹åˆ»åŒæ­¥æ‰§è¡Œthen 3ï¼›</li>\n<li>æœ€åä¸€ä¸ªä¾‹å­ä¸­ï¼ŒFutureå‡½æ•°ä½“æ˜¯nullï¼Œè¿™æ„å‘³ç€å®ƒä¸éœ€è¦ä¹Ÿæ²¡æœ‰äº‹ä»¶å¾ªç¯ï¼Œå› æ­¤åç»­çš„thenä¹Ÿæ— æ³•ä¸å®ƒå…±äº«ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒDartä¼šæŠŠåç»­çš„thenæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œåœ¨ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œã€‚</li>\n</ul><pre><code>//f1æ¯”f2å…ˆæ‰§è¡Œ\nFuture(() =&gt; print('f1'));\nFuture(() =&gt; print('f2'));\n\n//f3æ‰§è¡Œåä¼šç«‹åˆ»åŒæ­¥æ‰§è¡Œthen 3\nFuture(() =&gt; print('f3')).then((_) =&gt; print('then 3'));\n\n//then 4ä¼šåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°½å¿«æ‰§è¡Œ\nFuture(() =&gt; null).then((_) =&gt; print('then 4'));\n</code></pre><p>è¯´äº†è¿™ä¹ˆå¤šè§„åˆ™ï¼Œå¯èƒ½å¤§å®¶å¹¶æ²¡æœ‰å®Œå…¨è®°ä½ã€‚é‚£æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹ï¼Œæ¥æŠŠä¹‹å‰ä»‹ç»çš„å„ä¸ªæ‰§è¡Œè§„åˆ™éƒ½ä¸²èµ·æ¥ï¼Œå†é›†ä¸­å­¦ä¹ ä¸€ä¸‹ã€‚</p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¾æ¬¡å£°æ˜äº†è‹¥å¹²ä¸ªå¼‚æ­¥ä»»åŠ¡Futureï¼Œä»¥åŠå¾®ä»»åŠ¡ã€‚åœ¨å…¶ä¸­çš„ä¸€äº›Futureå†…éƒ¨ï¼Œæˆ‘ä»¬åˆå†…åµŒäº†Futureä¸microtaskçš„å£°æ˜ï¼š</p><pre><code>Future(() =&gt; print('f1'));//å£°æ˜ä¸€ä¸ªåŒ¿åFuture\nFuture fx = Future(() =&gt;  null);//å£°æ˜Future fxï¼Œå…¶æ‰§è¡Œä½“ä¸ºnull\n\n//å£°æ˜ä¸€ä¸ªåŒ¿åFutureï¼Œå¹¶æ³¨å†Œäº†ä¸¤ä¸ªthenã€‚åœ¨ç¬¬ä¸€ä¸ªthenå›è°ƒé‡Œå¯åŠ¨äº†ä¸€ä¸ªå¾®ä»»åŠ¡\nFuture(() =&gt; print('f2')).then((_) {\n  print('f3');\n  scheduleMicrotask(() =&gt; print('f4'));\n}).then((_) =&gt; print('f5'));\n\n//å£°æ˜äº†ä¸€ä¸ªåŒ¿åFutureï¼Œå¹¶æ³¨å†Œäº†ä¸¤ä¸ªthenã€‚ç¬¬ä¸€ä¸ªthenæ˜¯ä¸€ä¸ªFuture\nFuture(() =&gt; print('f6'))\n  .then((_) =&gt; Future(() =&gt; print('f7')))\n  .then((_) =&gt; print('f8'));\n\n//å£°æ˜äº†ä¸€ä¸ªåŒ¿åFuture\nFuture(() =&gt; print('f9'));\n\n//å¾€æ‰§è¡Œä½“ä¸ºnullçš„fxæ³¨å†Œäº†äº†ä¸€ä¸ªthen\nfx.then((_) =&gt; print('f10'));\n\n//å¯åŠ¨ä¸€ä¸ªå¾®ä»»åŠ¡\nscheduleMicrotask(() =&gt; print('f11'));\nprint('f12');\n</code></pre><p>è¿è¡Œä¸€ä¸‹ï¼Œä¸Šè¿°å„ä¸ªå¼‚æ­¥ä»»åŠ¡ä¼šä¾æ¬¡æ‰“å°å…¶å†…éƒ¨æ‰§è¡Œç»“æœï¼š</p><pre><code>f12\nf11\nf1\nf10\nf2\nf3\nf5\nf4\nf6\nf9\nf7\nf8\n</code></pre><p>çœ‹åˆ°è¿™å„¿ï¼Œä½ å¯èƒ½å·²ç»æ‡µäº†ã€‚åˆ«æ€¥ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹è¿™æ®µä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒEvent Queueä¸Microtask Queueä¸­çš„å˜åŒ–æƒ…å†µï¼Œä¾æ¬¡åˆ†æä¸€ä¸‹å®ƒä»¬çš„æ‰§è¡Œé¡ºåºä¸ºä»€ä¹ˆä¼šæ˜¯è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8a/8b/8a1106a01613fa999a35911fc5922e8b.gif?wh=800*540\" alt=\"\"></p><center><span class=\"reference\">å›¾3 Event Queueä¸Microtask Queueå˜åŒ–ç¤ºä¾‹</span></center><ul>\n<li>å› ä¸ºå…¶ä»–è¯­å¥éƒ½æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œæ‰€ä»¥å…ˆæ‰“å°f12ã€‚</li>\n<li>å‰©ä¸‹çš„å¼‚æ­¥ä»»åŠ¡ä¸­ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¼˜å…ˆçº§æœ€é«˜ï¼Œå› æ­¤éšåæ‰“å°f11ï¼›ç„¶åæŒ‰ç…§Futureå£°æ˜çš„å…ˆåé¡ºåºï¼Œæ‰“å°f1ã€‚</li>\n<li>éšååˆ°äº†fxï¼Œç”±äºfxçš„æ‰§è¡Œä½“æ˜¯nullï¼Œç›¸å½“äºæ‰§è¡Œå®Œæ¯•äº†ï¼ŒDartå°†fxçš„thenæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç”±äºå¾®ä»»åŠ¡é˜Ÿåˆ—çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå› æ­¤fxçš„thenè¿˜æ˜¯ä¼šæœ€å…ˆæ‰§è¡Œï¼Œæ‰“å°f10ã€‚</li>\n<li>ç„¶ååˆ°äº†fxä¸‹é¢çš„f2ï¼Œæ‰“å°f2ï¼Œç„¶åæ‰§è¡Œthenï¼Œæ‰“å°f3ã€‚f4æ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œè¦åˆ°ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯æ‰æ‰§è¡Œï¼Œå› æ­¤åç»­çš„thenç»§ç»­åŒæ­¥æ‰§è¡Œï¼Œæ‰“å°f5ã€‚æœ¬æ¬¡äº‹ä»¶å¾ªç¯ç»“æŸï¼Œä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯å–å‡ºf4è¿™ä¸ªå¾®ä»»åŠ¡ï¼Œæ‰“å°f4ã€‚</li>\n<li>ç„¶ååˆ°äº†f2ä¸‹é¢çš„f6ï¼Œæ‰“å°f6ï¼Œç„¶åæ‰§è¡Œthenã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªthenæ˜¯ä¸€ä¸ªFutureå¼‚æ­¥ä»»åŠ¡ï¼Œå› æ­¤è¿™ä¸ªthenï¼Œä»¥åŠåç»­çš„thenéƒ½è¢«æ”¾å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­äº†ã€‚</li>\n<li>f6ä¸‹é¢è¿˜æœ‰f9ï¼Œæ‰“å°f9ã€‚</li>\n<li>æœ€åä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œæ‰“å°f7ï¼Œä»¥åŠåç»­çš„f8ã€‚</li>\n</ul><p>ä¸Šé¢çš„ä»£ç å¾ˆæ˜¯çƒ§è„‘ï¼Œä¸‡å¹¸æˆ‘ä»¬å¹³æ—¶å¼€å‘Flutteræ—¶ä¸€èˆ¬ä¸ä¼šé‡åˆ°è¿™æ ·å¥‡è‘©çš„å†™æ³•ï¼Œæ‰€ä»¥ä½ å¤§å¯æ”¾å¿ƒã€‚ä½ åªéœ€è¦è®°ä½ä¸€ç‚¹ï¼š<strong>thenä¼šåœ¨Futureå‡½æ•°ä½“æ‰§è¡Œå®Œæ¯•åç«‹åˆ»æ‰§è¡Œï¼Œæ— è®ºæ˜¯å…±ç”¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯è¿˜æ˜¯è¿›å…¥ä¸‹ä¸€ä¸ªå¾®ä»»åŠ¡ã€‚</strong></p><p>åœ¨æ·±å…¥ç†è§£Futureå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œè§„åˆ™ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹æ€ä¹ˆå°è£…ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ã€‚</p><h2>å¼‚æ­¥å‡½æ•°</h2><p>å¯¹äºä¸€ä¸ªå¼‚æ­¥å‡½æ•°æ¥è¯´ï¼Œå…¶è¿”å›æ—¶å†…éƒ¨æ‰§è¡ŒåŠ¨ä½œå¹¶æœªç»“æŸï¼Œå› æ­¤éœ€è¦è¿”å›ä¸€ä¸ªFutureå¯¹è±¡ï¼Œä¾›è°ƒç”¨è€…ä½¿ç”¨ã€‚è°ƒç”¨è€…æ ¹æ®Futureå¯¹è±¡ï¼Œæ¥å†³å®šï¼šæ˜¯åœ¨è¿™ä¸ªFutureå¯¹è±¡ä¸Šæ³¨å†Œä¸€ä¸ªthenï¼Œç­‰Futureçš„æ‰§è¡Œä½“ç»“æŸäº†ä»¥åå†è¿›è¡Œå¼‚æ­¥å¤„ç†ï¼›è¿˜æ˜¯ä¸€ç›´åŒæ­¥ç­‰å¾…Futureæ‰§è¡Œä½“ç»“æŸã€‚</p><p>å¯¹äºå¼‚æ­¥å‡½æ•°è¿”å›çš„Futureå¯¹è±¡ï¼Œå¦‚æœè°ƒç”¨è€…å†³å®šåŒæ­¥ç­‰å¾…ï¼Œåˆ™éœ€è¦åœ¨è°ƒç”¨å¤„ä½¿ç”¨awaitå…³é”®å­—ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨å¤„çš„å‡½æ•°ä½“ä½¿ç”¨asyncå…³é”®å­—ã€‚</p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå¼‚æ­¥æ–¹æ³•å»¶è¿Ÿ3ç§’è¿”å›äº†ä¸€ä¸ªHello 2019ï¼Œåœ¨è°ƒç”¨å¤„æˆ‘ä»¬ä½¿ç”¨awaitè¿›è¡ŒæŒç»­ç­‰å¾…ï¼Œç­‰å®ƒè¿”å›äº†å†æ‰“å°ï¼š</p><pre><code>//å£°æ˜äº†ä¸€ä¸ªå»¶è¿Ÿ3ç§’è¿”å›Helloçš„Futureï¼Œå¹¶æ³¨å†Œäº†ä¸€ä¸ªthenè¿”å›æ‹¼æ¥åçš„Hello 2019\nFuture&lt;String&gt; fetchContent() =&gt; \n  Future&lt;String&gt;.delayed(Duration(seconds:3), () =&gt; &quot;Hello&quot;)\n    .then((x) =&gt; &quot;$x 2019&quot;);\n\n  main() async{\n    print(await fetchContent());//ç­‰å¾…Hello 2019çš„è¿”å›\n  }\n</code></pre><p>ä¹Ÿè®¸ä½ å·²ç»æ³¨æ„åˆ°äº†ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨awaitè¿›è¡Œç­‰å¾…çš„æ—¶å€™ï¼Œåœ¨ç­‰å¾…è¯­å¥çš„è°ƒç”¨ä¸Šä¸‹æ–‡å‡½æ•°mainåŠ ä¸Šäº†asyncå…³é”®å­—ã€‚ä¸ºä»€ä¹ˆè¦åŠ è¿™ä¸ªå…³é”®å­—å‘¢ï¼Ÿ</p><p>å› ä¸º<strong>Dartä¸­çš„awaitå¹¶ä¸æ˜¯é˜»å¡ç­‰å¾…ï¼Œè€Œæ˜¯å¼‚æ­¥ç­‰å¾…</strong>ã€‚Dartä¼šå°†è°ƒç”¨ä½“çš„å‡½æ•°ä¹Ÿè§†ä½œå¼‚æ­¥å‡½æ•°ï¼Œå°†ç­‰å¾…è¯­å¥çš„ä¸Šä¸‹æ–‡æ”¾å…¥Event Queueä¸­ï¼Œä¸€æ—¦æœ‰äº†ç»“æœï¼ŒEvent Loopå°±ä¼šæŠŠå®ƒä»Event Queueä¸­å–å‡ºï¼Œç­‰å¾…ä»£ç ç»§ç»­æ‰§è¡Œã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä¸ºäº†å¸®åŠ©ä½ åŠ æ·±å°è±¡ï¼Œæˆ‘å‡†å¤‡äº†ä¸¤ä¸ªå…·ä½“çš„æ¡ˆä¾‹ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¿™æ®µä»£ç ã€‚ç¬¬äºŒè¡Œçš„thenæ‰§è¡Œä½“f2æ˜¯ä¸€ä¸ªFutureï¼Œä¸ºäº†ç­‰å®ƒå®Œæˆå†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†awaitï¼ŒæœŸæœ›æ‰“å°ç»“æœä¸ºf1ã€f2ã€f3ã€f4ï¼š</p><pre><code>Future(() =&gt; print('f1'))\n  .then((_) async =&gt; await Future(() =&gt; print('f2')))\n  .then((_) =&gt; print('f3'));\nFuture(() =&gt; print('f4'));\n</code></pre><p>å®é™…ä¸Šï¼Œå½“ä½ è¿è¡Œè¿™æ®µä»£ç æ—¶å°±ä¼šå‘ç°ï¼Œæ‰“å°å‡ºæ¥çš„ç»“æœå…¶å®æ˜¯f1ã€f4ã€f2ã€f3ï¼</p><p>æˆ‘æ¥ç»™ä½ åˆ†æä¸€ä¸‹è¿™æ®µä»£ç çš„æ‰§è¡Œé¡ºåºï¼š</p><ul>\n<li>æŒ‰ç…§ä»»åŠ¡çš„å£°æ˜é¡ºåºï¼Œf1å’Œf4è¢«å…ˆååŠ å…¥äº‹ä»¶é˜Ÿåˆ—ã€‚</li>\n<li>f1è¢«å–å‡ºå¹¶æ‰“å°ï¼›ç„¶ååˆ°äº†thenã€‚thençš„æ‰§è¡Œä½“æ˜¯ä¸ªfuture f2ï¼Œäºæ˜¯æ”¾å…¥Event Queueã€‚ç„¶åæŠŠawaitä¹Ÿæ”¾åˆ°Event Queueé‡Œã€‚</li>\n<li>è¿™ä¸ªæ—¶å€™è¦æ³¨æ„äº†ï¼ŒEvent Queueé‡Œé¢è¿˜æœ‰ä¸€ä¸ªf4ï¼Œæˆ‘ä»¬çš„awaitå¹¶ä¸èƒ½é˜»å¡f4çš„æ‰§è¡Œã€‚å› æ­¤ï¼ŒEvent Loopå…ˆå–å‡ºf4ï¼Œæ‰“å°f4ï¼›ç„¶åæ‰èƒ½å–å‡ºå¹¶æ‰“å°f2ï¼Œæœ€åæŠŠç­‰å¾…çš„awaitå–å‡ºï¼Œå¼€å§‹æ‰§è¡Œåé¢çš„f3ã€‚</li>\n</ul><p>ç”±äºawaitæ˜¯é‡‡ç”¨äº‹ä»¶é˜Ÿåˆ—çš„æœºåˆ¶å®ç°ç­‰å¾…è¡Œä¸ºçš„ï¼Œæ‰€ä»¥æ¯”å®ƒå…ˆåœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­çš„f4å¹¶ä¸ä¼šè¢«å®ƒé˜»å¡ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼šåœ¨ä¸»å‡½æ•°è°ƒç”¨ä¸€ä¸ªå¼‚æ­¥å‡½æ•°å»æ‰“å°ä¸€æ®µè¯ï¼Œè€Œåœ¨è¿™ä¸ªå¼‚æ­¥å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨awaitä¸asyncåŒæ­¥ç­‰å¾…äº†å¦ä¸€ä¸ªå¼‚æ­¥å‡½æ•°è¿”å›å­—ç¬¦ä¸²ï¼š</p><pre><code>//å£°æ˜äº†ä¸€ä¸ªå»¶è¿Ÿ2ç§’è¿”å›Helloçš„Futureï¼Œå¹¶æ³¨å†Œäº†ä¸€ä¸ªthenè¿”å›æ‹¼æ¥åçš„Hello 2019\nFuture&lt;String&gt; fetchContent() =&gt; \n  Future&lt;String&gt;.delayed(Duration(seconds:2), () =&gt; &quot;Hello&quot;)\n    .then((x) =&gt; &quot;$x 2019&quot;);\n//å¼‚æ­¥å‡½æ•°ä¼šåŒæ­¥ç­‰å¾…Hello 2019çš„è¿”å›ï¼Œå¹¶æ‰“å°\nfunc() async =&gt; print(await fetchContent());\n\nmain() {\n  print(&quot;func before&quot;);\n  func();\n  print(&quot;func after&quot;);\n}\n</code></pre><p>è¿è¡Œè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å‘ç°æœ€ç»ˆè¾“å‡ºçš„é¡ºåºå…¶å®æ˜¯â€œfunc beforeâ€â€œfunc afterâ€â€œHello 2019â€ã€‚funcå‡½æ•°ä¸­çš„ç­‰å¾…è¯­å¥ä¼¼ä¹æ²¡èµ·ä½œç”¨ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>åŒæ ·ï¼Œæˆ‘æ¥ç»™ä½ åˆ†æä¸€ä¸‹è¿™æ®µä»£ç çš„æ‰§è¡Œé¡ºåºï¼š</p><ul>\n<li>é¦–å…ˆï¼Œç¬¬ä¸€å¥ä»£ç æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤å…ˆæ‰“å°â€œfunc beforeâ€ã€‚</li>\n<li>ç„¶åï¼Œè¿›å…¥funcå‡½æ•°ï¼Œfuncå‡½æ•°è°ƒç”¨äº†å¼‚æ­¥å‡½æ•°fetchContentï¼Œå¹¶ä½¿ç”¨awaitè¿›è¡Œç­‰å¾…ï¼Œå› æ­¤æˆ‘ä»¬æŠŠfetchContentã€awaitè¯­å¥çš„ä¸Šä¸‹æ–‡å‡½æ•°funcå…ˆåæ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ã€‚</li>\n<li>awaitçš„ä¸Šä¸‹æ–‡å‡½æ•°å¹¶ä¸åŒ…å«è°ƒç”¨æ ˆï¼Œå› æ­¤funcåç»­ä»£ç ç»§ç»­æ‰§è¡Œï¼Œæ‰“å°â€œfunc afterâ€ã€‚</li>\n<li>2ç§’åï¼ŒfetchContentå¼‚æ­¥ä»»åŠ¡è¿”å›â€œHello 2019â€ï¼Œäºæ˜¯funcçš„awaitä¹Ÿè¢«å–å‡ºï¼Œæ‰“å°â€œHello 2019â€ã€‚</li>\n</ul><p>é€šè¿‡ä¸Šè¿°åˆ†æï¼Œä½ å‘ç°äº†ä»€ä¹ˆç°è±¡ï¼Ÿé‚£å°±æ˜¯awaitä¸asyncåªå¯¹è°ƒç”¨ä¸Šä¸‹æ–‡çš„å‡½æ•°æœ‰æ•ˆï¼Œå¹¶ä¸å‘ä¸Šä¼ é€’ã€‚å› æ­¤å¯¹äºè¿™ä¸ªæ¡ˆä¾‹è€Œè¨€ï¼Œfuncæ˜¯åœ¨å¼‚æ­¥ç­‰å¾…ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨mainå‡½æ•°ä¸­ä¹ŸåŒæ­¥ç­‰å¾…ï¼Œéœ€è¦åœ¨è°ƒç”¨å¼‚æ­¥å‡½æ•°æ—¶ä¹ŸåŠ ä¸Šawaitï¼Œåœ¨mainå‡½æ•°ä¹ŸåŠ ä¸Šasyncã€‚</p><p>ç»è¿‡ä¸Šé¢ä¸¤ä¸ªä¾‹å­çš„åˆ†æï¼Œä½ åº”è¯¥å·²ç»æ˜ç™½awaitä¸asyncæ˜¯å¦‚ä½•é…åˆï¼Œå®Œæˆç­‰å¾…å·¥ä½œçš„äº†å§ã€‚</p><p>ä»‹ç»å®Œäº†å¼‚æ­¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹åœ¨Dartä¸­ï¼Œå¦‚ä½•é€šè¿‡å¤šçº¿ç¨‹å®ç°å¹¶å‘ã€‚</p><h2>Isolate</h2><p>å°½ç®¡Dartæ˜¯åŸºäºå•çº¿ç¨‹æ¨¡å‹çš„ï¼Œä½†ä¸ºäº†è¿›ä¸€æ­¥åˆ©ç”¨å¤šæ ¸CPUï¼Œå°†CPUå¯†é›†å‹è¿ç®—è¿›è¡Œéš”ç¦»ï¼ŒDartä¹Ÿæä¾›äº†å¤šçº¿ç¨‹æœºåˆ¶ï¼Œå³Isolateã€‚åœ¨Isolateä¸­ï¼Œèµ„æºéš”ç¦»åšå¾—éå¸¸å¥½ï¼Œæ¯ä¸ªIsolateéƒ½æœ‰è‡ªå·±çš„Event Loopä¸Queueï¼Œ<strong>Isolateä¹‹é—´ä¸å…±äº«ä»»ä½•èµ„æºï¼Œåªèƒ½ä¾é æ¶ˆæ¯æœºåˆ¶é€šä¿¡ï¼Œå› æ­¤ä¹Ÿå°±æ²¡æœ‰èµ„æºæŠ¢å é—®é¢˜</strong>ã€‚</p><p>å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ï¼ŒIsolateçš„åˆ›å»ºéå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªè¦ç»™å®šä¸€ä¸ªå‡½æ•°å…¥å£ï¼Œåˆ›å»ºæ—¶å†ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå°±å¯ä»¥å¯åŠ¨Isolateäº†ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªIsolateçš„å…¥å£å‡½æ•°ï¼Œç„¶ååœ¨mainå‡½æ•°ä¸­å¯åŠ¨å®ƒï¼Œå¹¶ä¼ å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼š</p><pre><code>doSth(msg) =&gt; print(msg);\n\nmain() {\n  Isolate.spawn(doSth, &quot;Hi&quot;);\n  ...\n}\n</code></pre><p>ä½†æ›´å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„éœ€æ±‚å¹¶ä¸ä¼šè¿™ä¹ˆç®€å•ï¼Œä¸ä»…å¸Œæœ›èƒ½å¹¶å‘ï¼Œè¿˜å¸Œæœ›Isolateåœ¨å¹¶å‘æ‰§è¡Œçš„æ—¶å€™å‘ŠçŸ¥ä¸»Isolateå½“å‰çš„æ‰§è¡Œç»“æœã€‚</p><p>å¯¹äºæ‰§è¡Œç»“æœçš„å‘ŠçŸ¥ï¼ŒIsolateé€šè¿‡å‘é€ç®¡é“ï¼ˆSendPortï¼‰å®ç°æ¶ˆæ¯é€šä¿¡æœºåˆ¶ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å¯åŠ¨å¹¶å‘Isolateæ—¶å°†ä¸»Isolateçš„å‘é€ç®¡é“ä½œä¸ºå‚æ•°ä¼ ç»™å®ƒï¼Œè¿™æ ·å¹¶å‘Isolateå°±å¯ä»¥åœ¨ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ååˆ©ç”¨è¿™ä¸ªå‘é€ç®¡é“ç»™æˆ‘ä»¬å‘æ¶ˆæ¯äº†ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ï¼šåœ¨ä¸»Isolateé‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¹¶å‘Isolateï¼Œåœ¨å‡½æ•°å…¥å£ä¼ å…¥äº†ä¸»Isolateçš„å‘é€ç®¡é“ï¼Œç„¶åç­‰å¾…å¹¶å‘Isolateçš„å›ä¼ æ¶ˆæ¯ã€‚åœ¨å¹¶å‘Isolateä¸­ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ªç®¡é“ç»™ä¸»Isolateå‘äº†ä¸€ä¸ªHelloå­—ç¬¦ä¸²ï¼š</p><pre><code>Isolate isolate;\n\nstart() async {\n  ReceivePort receivePort= ReceivePort();//åˆ›å»ºç®¡é“\n  //åˆ›å»ºå¹¶å‘Isolateï¼Œå¹¶ä¼ å…¥å‘é€ç®¡é“\n  isolate = await Isolate.spawn(getMsg, receivePort.sendPort);\n  //ç›‘å¬ç®¡é“æ¶ˆæ¯\n  receivePort.listen((data) {\n    print('Dataï¼š$data');\n    receivePort.close();//å…³é—­ç®¡é“\n    isolate?.kill(priority: Isolate.immediate);//æ€æ­»å¹¶å‘Isolate\n    isolate = null;\n  });\n}\n//å¹¶å‘Isolateå¾€ç®¡é“å‘é€ä¸€ä¸ªå­—ç¬¦ä¸²\ngetMsg(sendPort) =&gt; sendPort.send(&quot;Hello&quot;);\n</code></pre><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Isolateä¸­ï¼Œå‘é€ç®¡é“æ˜¯å•å‘çš„ï¼šæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªIsolateæ‰§è¡ŒæŸé¡¹ä»»åŠ¡ï¼ŒIsolateæ‰§è¡Œå®Œæ¯•åï¼Œå‘é€æ¶ˆæ¯å‘ŠçŸ¥æˆ‘ä»¬ã€‚å¦‚æœIsolateæ‰§è¡Œä»»åŠ¡æ—¶ï¼Œéœ€è¦ä¾èµ–ä¸»Isolateç»™å®ƒå‘é€å‚æ•°ï¼Œæ‰§è¡Œå®Œæ¯•åå†å‘é€æ‰§è¡Œç»“æœç»™ä¸»Isolateï¼Œè¿™æ ·<strong>åŒå‘é€šä¿¡çš„åœºæ™¯æˆ‘ä»¬å¦‚ä½•å®ç°å‘¢</strong>ï¼Ÿç­”æ¡ˆä¹Ÿå¾ˆç®€å•ï¼Œè®©å¹¶å‘Isolateä¹Ÿå›ä¼ ä¸€ä¸ªå‘é€ç®¡é“å³å¯ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ª<strong>å¹¶å‘è®¡ç®—é˜¶ä¹˜</strong>çš„ä¾‹å­æ¥è¯´æ˜å¦‚ä½•å®ç°åŒå‘é€šä¿¡ã€‚</p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¼‚æ­¥å‡½æ•°è®¡ç®—é˜¶ä¹˜ã€‚åœ¨è¿™ä¸ªå¼‚æ­¥å‡½æ•°å†…ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå¹¶å‘Isolateï¼Œä¼ å…¥ä¸»Isolateçš„å‘é€ç®¡é“ï¼›å¹¶å‘Isolateä¹Ÿå›ä¼ ä¸€ä¸ªå‘é€ç®¡é“ï¼›ä¸»Isolateæ”¶åˆ°å›ä¼ ç®¡é“åï¼Œå‘é€å‚æ•°Nç»™å¹¶å‘Isolateï¼Œç„¶åç«‹å³è¿”å›ä¸€ä¸ªFutureï¼›å¹¶å‘Isolateç”¨å‚æ•°Nï¼Œè°ƒç”¨åŒæ­¥è®¡ç®—é˜¶ä¹˜çš„å‡½æ•°ï¼Œè¿”å›æ‰§è¡Œç»“æœï¼›æœ€åï¼Œä¸»Isolateæ‰“å°äº†è¿”å›ç»“æœï¼š</p><pre><code>//å¹¶å‘è®¡ç®—é˜¶ä¹˜\nFuture&lt;dynamic&gt; asyncFactoriali(n) async{\n  final response = ReceivePort();//åˆ›å»ºç®¡é“\n  //åˆ›å»ºå¹¶å‘Isolateï¼Œå¹¶ä¼ å…¥ç®¡é“\n  await Isolate.spawn(_isolate,response.sendPort);\n  //ç­‰å¾…Isolateå›ä¼ ç®¡é“\n  final sendPort = await response.first as SendPort;\n  //åˆ›å»ºäº†å¦ä¸€ä¸ªç®¡é“answer\n  final answer = ReceivePort();\n  //å¾€Isolateå›ä¼ çš„ç®¡é“ä¸­å‘é€å‚æ•°ï¼ŒåŒæ—¶ä¼ å…¥answerç®¡é“\n  sendPort.send([n,answer.sendPort]);\n  return answer.first;//ç­‰å¾…Isolateé€šè¿‡answerç®¡é“å›ä¼ æ‰§è¡Œç»“æœ\n}\n\n//Isolateå‡½æ•°ä½“ï¼Œå‚æ•°æ˜¯ä¸»Isolateä¼ å…¥çš„ç®¡é“\n_isolate(initialReplyTo) async {\n  final port = ReceivePort();//åˆ›å»ºç®¡é“\n  initialReplyTo.send(port.sendPort);//å¾€ä¸»Isolateå›ä¼ ç®¡é“\n  final message = await port.first as List;//ç­‰å¾…ä¸»Isolateå‘é€æ¶ˆæ¯(å‚æ•°å’Œå›ä¼ ç»“æœçš„ç®¡é“)\n  final data = message[0] as int;//å‚æ•°\n  final send = message[1] as SendPort;//å›ä¼ ç»“æœçš„ç®¡é“ \n  send.send(syncFactorial(data));//è°ƒç”¨åŒæ­¥è®¡ç®—é˜¶ä¹˜çš„å‡½æ•°å›ä¼ ç»“æœ\n}\n\n//åŒæ­¥è®¡ç®—é˜¶ä¹˜\nint syncFactorial(n) =&gt; n &lt; 2 ? n : n * syncFactorial(n-1);\nmain() async =&gt; print(await asyncFactoriali(4));//ç­‰å¾…å¹¶å‘è®¡ç®—é˜¶ä¹˜ç»“æœ\n</code></pre><p>çœ‹å®Œè¿™æ®µä»£ç ä½ æ˜¯ä»€ä¹ˆæ„Ÿè§‰å‘¢ï¼Ÿæˆ‘ä»¬åªæ˜¯ä¸ºäº†å¹¶å‘è®¡ç®—ä¸€ä¸ªé˜¶ä¹˜ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å¤ªç¹çäº†ï¼Ÿ</p><p>æ²¡é”™ï¼Œç¡®å®å¤ªç¹çäº†ã€‚åœ¨Flutterä¸­ï¼Œåƒè¿™æ ·æ‰§è¡Œå¹¶å‘è®¡ç®—ä»»åŠ¡æˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ›´ç®€å•çš„æ–¹å¼ã€‚Flutteræä¾›äº†æ”¯æŒå¹¶å‘è®¡ç®—çš„computeå‡½æ•°ï¼Œå…¶å†…éƒ¨å¯¹Isolateçš„åˆ›å»ºå’ŒåŒå‘é€šä¿¡è¿›è¡Œäº†å°è£…æŠ½è±¡ï¼Œå±è”½äº†å¾ˆå¤šåº•å±‚ç»†èŠ‚ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨æ—¶åªéœ€è¦ä¼ å…¥å‡½æ•°å…¥å£å’Œå‡½æ•°å‚æ•°ï¼Œå°±èƒ½å¤Ÿå®ç°å¹¶å‘è®¡ç®—å’Œæ¶ˆæ¯é€šçŸ¥ã€‚</p><p>æˆ‘ä»¬è¯•ç€ç”¨computeå‡½æ•°æ”¹é€ ä¸€ä¸‹å¹¶å‘è®¡ç®—é˜¶ä¹˜çš„ä»£ç ï¼š</p><pre><code>//åŒæ­¥è®¡ç®—é˜¶ä¹˜\nint syncFactorial(n) =&gt; n &lt; 2 ? n : n * syncFactorial(n-1);\n//ä½¿ç”¨computeå‡½æ•°å°è£…Isolateçš„åˆ›å»ºå’Œç»“æœçš„è¿”å›\nmain() async =&gt; print(await compute(syncFactorial, 4));\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œç”¨computeå‡½æ•°æ”¹é€ ä»¥åï¼Œæ•´ä¸ªä»£ç å°±å˜æˆäº†ä¸¤è¡Œï¼Œç°åœ¨å¹¶å‘è®¡ç®—é˜¶ä¹˜çš„ä»£ç çœ‹èµ·æ¥å°±æ¸…çˆ½å¤šäº†ã€‚</p><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©å…³äºDartçš„å¼‚æ­¥ä¸å¹¶å‘æœºåˆ¶ã€å®ç°åŸç†çš„åˆ†äº«å°±åˆ°è¿™é‡Œäº†ï¼Œæˆ‘ä»¬æ¥ç®€å•å›é¡¾ä¸€ä¸‹ä¸»è¦å†…å®¹ã€‚</p><p>Dartæ˜¯å•çº¿ç¨‹çš„ï¼Œä½†é€šè¿‡äº‹ä»¶å¾ªç¯å¯ä»¥å®ç°å¼‚æ­¥ã€‚è€ŒFutureæ˜¯å¼‚æ­¥ä»»åŠ¡çš„å°è£…ï¼Œå€ŸåŠ©äºawaitä¸asyncï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡äº‹ä»¶å¾ªç¯å®ç°éé˜»å¡çš„åŒæ­¥ç­‰å¾…ï¼›Isolateæ˜¯Dartä¸­çš„å¤šçº¿ç¨‹ï¼Œå¯ä»¥å®ç°å¹¶å‘ï¼Œæœ‰è‡ªå·±çš„äº‹ä»¶å¾ªç¯ä¸Queueï¼Œç‹¬å èµ„æºã€‚Isolateä¹‹é—´å¯ä»¥é€šè¿‡æ¶ˆæ¯æœºåˆ¶è¿›è¡Œå•å‘é€šä¿¡ï¼Œè¿™äº›ä¼ é€’çš„æ¶ˆæ¯é€šè¿‡å¯¹æ–¹çš„äº‹ä»¶å¾ªç¯é©±åŠ¨å¯¹æ–¹è¿›è¡Œå¼‚æ­¥å¤„ç†ã€‚</p><p>åœ¨UIç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œå¼‚æ­¥å’Œå¤šçº¿ç¨‹æ˜¯ä¸¤ä¸ªç›¸ä¼´ç›¸ç”Ÿçš„åè¯ï¼Œä¹Ÿæ˜¯å¾ˆå®¹æ˜“æ··æ·†çš„æ¦‚å¿µã€‚å¯¹äºå¼‚æ­¥æ–¹æ³•è°ƒç”¨è€Œè¨€ï¼Œä»£ç ä¸éœ€è¦ç­‰å¾…ç»“æœçš„è¿”å›ï¼Œè€Œæ˜¯é€šè¿‡å…¶ä»–æ‰‹æ®µï¼ˆæ¯”å¦‚é€šçŸ¥ã€å›è°ƒã€äº‹ä»¶å¾ªç¯æˆ–å¤šçº¿ç¨‹ï¼‰åœ¨åç»­çš„æŸä¸ªæ—¶åˆ»ä¸»åŠ¨ï¼ˆæˆ–è¢«åŠ¨ï¼‰åœ°æ¥æ”¶æ‰§è¡Œç»“æœã€‚</p><p>å› æ­¤ï¼Œä»è¾©è¯å…³ç³»ä¸Šæ¥çœ‹ï¼Œå¼‚æ­¥ä¸å¤šçº¿ç¨‹å¹¶ä¸æ˜¯ä¸€ä¸ªåŒç­‰å…³ç³»ï¼šå¼‚æ­¥æ˜¯ç›®çš„ï¼Œå¤šçº¿ç¨‹åªæ˜¯æˆ‘ä»¬å®ç°å¼‚æ­¥çš„ä¸€ä¸ªæ‰‹æ®µä¹‹ä¸€ã€‚è€Œåœ¨Flutterä¸­ï¼Œå€ŸåŠ©äºUIæ¡†æ¶æä¾›çš„äº‹ä»¶å¾ªç¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨é˜»å¡çš„åŒæ—¶ç­‰å¾…å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œå› æ­¤å¹¶ä¸éœ€è¦å¼€å¤šçº¿ç¨‹ã€‚æˆ‘ä»¬ä¸€å®šè¦è®°ä½è¿™ä¸€ç‚¹ã€‚</p><p>æˆ‘æŠŠä»Šå¤©åˆ†äº«æ‰€æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æ‰“åŒ…åˆ°äº†<a href=\"https://github.com/cyndibaby905/23_dart_async\">GitHub</a>ä¸­ï¼Œä½ å¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼Œåå¤è¿è¡Œå‡ æ¬¡ï¼ŒåŠ æ·±ç†è§£ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸¤é“æ€è€ƒé¢˜å§ã€‚</p><ol>\n<li>åœ¨é€šè¿‡å¹¶å‘Isolateè®¡ç®—é˜¶ä¹˜çš„ä¾‹å­ä¸­ï¼Œæˆ‘åœ¨asyncFactorialiæ–¹æ³•é‡Œå…ˆåå‘ç»™äº†å¹¶å‘Isolateä¸¤ä¸ªSendPortã€‚ä½ èƒ½å¦è§£é‡Šä¸‹è¿™ä¹ˆåšçš„åŸå› ï¼Ÿå¯ä»¥åªå‘ä¸€ä¸ªSendPortå—ï¼Ÿ</li>\n<li>è¯·æ”¹é€ ä»¥ä¸‹ä»£ç ï¼Œåœ¨ä¸æ”¹å˜æ•´ä½“å¼‚æ­¥ç»“æ„çš„æƒ…å†µä¸‹ï¼Œå®ç°è¾“å‡ºç»“æœä¸ºf1ã€f2ã€f3ã€f4ã€‚</li>\n</ol><pre><code>Future(() =&gt; print('f1'))\n  .then((_) async =&gt; await Future(() =&gt; print('f2')))\n  .then((_) =&gt; print('f3'));\nFuture(() =&gt; print('f4'));\n</code></pre><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç­‰å¾…ä½ ï¼æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","comments":[{"had_liked":false,"id":145545,"user_name":"jerry","can_delete":false,"product_type":"c1","uid":1032859,"ip_address":"","ucode":"525F24CD2FBB0F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/9b/75ba46ad.jpg","comment_is_top":false,"comment_ctime":1572313273,"is_pvip":false,"replies":[{"id":"56244","content":"æˆ‘ä»¬æ‰€è¯´çš„å•çº¿ç¨‹æŒ‡çš„æ˜¯ä¸»Isolateã€‚è€ŒGPUç»˜åˆ¶æŒ‡ä»¤æœ‰å•ç‹¬çš„çº¿ç¨‹æ‰§è¡Œï¼Œè·Ÿä¸»Isolateæ— å…³ã€‚äº‹å®ä¸ŠFlutteræä¾›äº†4ç§task runnerï¼Œæœ‰ç‹¬ç«‹çš„çº¿ç¨‹å»è¿è¡Œä¸“å±çš„ä»»åŠ¡ï¼š<br>1.Platform Task Runnerï¼šå¤„ç†æ¥è‡ªå¹³å°ï¼ˆAndroid&#47;iOSï¼‰çš„æ¶ˆæ¯<br>2.UI Task Runnerï¼šæ‰§è¡Œæ¸²æŸ“é€»è¾‘ã€å¤„ç†native pluginçš„æ¶ˆæ¯ã€timerã€microtaskã€å¼‚æ­¥I&#47;Oæ“ä½œå¤„ç†ç­‰<br>3.GPU Task Runnerï¼šæ‰§è¡ŒGPUæŒ‡ä»¤<br>4.IO Task Runnerï¼šæ‰§è¡ŒI&#47;Oä»»åŠ¡<br>é™¤æ­¤ä¹‹å¤–ï¼Œæ“ä½œç³»ç»Ÿæœ¬èº«ä¹Ÿæä¾›äº†å¤§é‡å¼‚æ­¥å¹¶å‘æœºåˆ¶ï¼Œå¯ä»¥åˆ©ç”¨å¤šçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼ˆæ¯”å¦‚socketï¼‰ï¼Œæˆ‘ä»¬åœ¨ä¸»Isolateä¸­æ— éœ€å…³å¿ƒï¼ˆå¦‚æœçœŸæƒ³ä¸»åŠ¨åˆ›å»ºå¹¶å‘ä»»åŠ¡ä¹Ÿå¯ä»¥ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1572345009,"ip_address":"","comment_id":145545,"utype":1}],"discussion_count":1,"race_medal":0,"score":"70291790009","product_id":100031001,"comment_content":"æ‚¨å¥½è€å¸ˆï¼Œå•çº¿ç¨‹æ¨¡å‹æ˜¯æŒ‡çš„äº‹ä»¶é˜Ÿåˆ—æ¨¡å‹ï¼Œå’Œç»˜åˆ¶ç•Œé¢çš„çº¿ç¨‹æ˜¯ä¸€ä¸ªå—","like_count":17,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472457,"discussion_content":"æˆ‘ä»¬æ‰€è¯´çš„å•çº¿ç¨‹æŒ‡çš„æ˜¯ä¸»Isolateã€‚è€ŒGPUç»˜åˆ¶æŒ‡ä»¤æœ‰å•ç‹¬çš„çº¿ç¨‹æ‰§è¡Œï¼Œè·Ÿä¸»Isolateæ— å…³ã€‚äº‹å®ä¸ŠFlutteræä¾›äº†4ç§task runnerï¼Œæœ‰ç‹¬ç«‹çš„çº¿ç¨‹å»è¿è¡Œä¸“å±çš„ä»»åŠ¡ï¼š\n1.Platform Task Runnerï¼šå¤„ç†æ¥è‡ªå¹³å°ï¼ˆAndroid/iOSï¼‰çš„æ¶ˆæ¯\n2.UI Task Runnerï¼šæ‰§è¡Œæ¸²æŸ“é€»è¾‘ã€å¤„ç†native pluginçš„æ¶ˆæ¯ã€timerã€microtaskã€å¼‚æ­¥I/Oæ“ä½œå¤„ç†ç­‰\n3.GPU Task Runnerï¼šæ‰§è¡ŒGPUæŒ‡ä»¤\n4.IO Task Runnerï¼šæ‰§è¡ŒI/Oä»»åŠ¡\né™¤æ­¤ä¹‹å¤–ï¼Œæ“ä½œç³»ç»Ÿæœ¬èº«ä¹Ÿæä¾›äº†å¤§é‡å¼‚æ­¥å¹¶å‘æœºåˆ¶ï¼Œå¯ä»¥åˆ©ç”¨å¤šçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼ˆæ¯”å¦‚socketï¼‰ï¼Œæˆ‘ä»¬åœ¨ä¸»Isolateä¸­æ— éœ€å…³å¿ƒï¼ˆå¦‚æœçœŸæƒ³ä¸»åŠ¨åˆ›å»ºå¹¶å‘ä»»åŠ¡ä¹Ÿå¯ä»¥ï¼‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572345009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136288,"user_name":"Geek_keyi","can_delete":false,"product_type":"c1","uid":1674102,"ip_address":"","ucode":"F085903C779D19","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJEDNglUOrnn3bWOByASEZjMSGZl9EEiby6Z2hfQdCFLuP2FbphsEbSGEQyA1VmmhwqCPiaiaguHMoZQ/132","comment_is_top":false,"comment_ctime":1569403594,"is_pvip":false,"replies":[{"id":"52456","content":"æ–‡ä»¶I&#47;Oå’Œç½‘ç»œè°ƒç”¨å¹¶ä¸æ˜¯åœ¨Dartå±‚åšçš„ï¼Œè€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥çº¿ç¨‹ï¼Œä»–ä¿©æŠŠæ´»å„¿å¹²å®Œä¹‹åæŠŠç»“æœåˆšåˆ°é˜Ÿåˆ—ä¸­ï¼ŒDartä»£ç åªæ˜¯æ‰§è¡Œä¸€ä¸ªç®€å•çš„è¯»åŠ¨ä½œã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1569501570,"ip_address":"","comment_id":136288,"utype":1}],"discussion_count":5,"race_medal":0,"score":"57403978442","product_id":100031001,"comment_content":"å¯¹Dartå•çº¿ç¨‹æ¨¡å‹ç†è§£è¿˜æ˜¯è¿·æƒ‘ï¼Œè¯·æ•™ä¸€ä¸‹ï¼šå‡å¦‚æœ‰ä¸€ä¸ªä»»åŠ¡ï¼ˆè¯»å†™æ–‡ä»¶æˆ–è€…ç½‘ç»œï¼‰è€—æ—¶10ç§’ï¼Œå¹¶ä¸”åŠ å…¥åˆ°äº†äº‹ä»¶ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ‰§è¡Œå•è¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ä¸å°±æŠŠçº¿ç¨‹å¡ä¸»å—ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468546,"discussion_content":"æ–‡ä»¶I/Oå’Œç½‘ç»œè°ƒç”¨å¹¶ä¸æ˜¯åœ¨Dartå±‚åšçš„ï¼Œè€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥çº¿ç¨‹ï¼Œä»–ä¿©æŠŠæ´»å„¿å¹²å®Œä¹‹åæŠŠç»“æœåˆšåˆ°é˜Ÿåˆ—ä¸­ï¼ŒDartä»£ç åªæ˜¯æ‰§è¡Œä¸€ä¸ªç®€å•çš„è¯»åŠ¨ä½œã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569501570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1313651,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0b/73/4f1c9676.jpg","nickname":"èˆ’å¤§é£","note":"","ucode":"5CC2E0F8C40E38","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24307,"discussion_content":"è€å¸ˆï¼Œè¿˜æ˜¯æœ‰ç‚¹å›°æƒ‘ï¼Œå¸Œæœ›è§£ç­”ä¸‹ï¼Œä½ è¯´çš„:æ–‡ä»¶IOå’Œç½‘ç»œè°ƒç”¨å¹¶ä¸æ˜¯åœ¨dartå±‚åšçš„ï¼Œè€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥çº¿ç¨‹ï¼Œè¿™å¥è¯æ€ä¹ˆç†è§£ï¼Œæ˜¯å› ä¸ºdarté‡Œçš„æ–‡ä»¶IOå’Œç½‘ç»œè°ƒç”¨æ˜¯è¿™æ ·å°è£…å®ç°çš„å—?å¦‚æœä¸æ˜¯ï¼Œé‚£å…¶å®ƒè¯­è¨€ï¼Œæ¯”å¦‚Androidå¼€å‘ä¸­ä¸ºä»€ä¹ˆè¦å•ç‹¬å¼€çº¿ç¨‹å»åšIOå’Œç½‘ç»œè¯·æ±‚ï¼ŒAndroidå¼€å‘ä¸­çš„IOå’Œç½‘ç»œè¯·æ±‚ä¸æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥çº¿ç¨‹å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570089977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1792683,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5a/ab/bda5b14d.jpg","nickname":"Xingjian","note":"","ucode":"9047292CB92A13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1313651,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0b/73/4f1c9676.jpg","nickname":"èˆ’å¤§é£","note":"","ucode":"5CC2E0F8C40E38","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":110773,"discussion_content":"Dartçš„æ–‡ä»¶IOå’Œç½‘ç»œåº“éƒ½æ˜¯ç”¨å¼‚æ­¥(Future and Stream)å®ç°çš„ï¼Œè¿™äº›æ“ä½œåœ¨åº•å±‚è¿˜æ˜¯é€šè¿‡OSçš„ç³»ç»Ÿè°ƒç”¨æ¥å®ç°ï¼Œå¯ä»¥æ˜¯åŒæ­¥ä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥ï¼Œè¿™ä¸ªä¸å¹³å°OSå¯¹å…·ä½“æ“ä½œçš„æ”¯æŒæœ‰å…³ï¼›ä¸è¿‡ä¸è®ºOSå¦‚ä½•å®ç°ï¼Œæä¾›ç»™Dartçš„æ˜¯å¼‚æ­¥æ¥å£ï¼Œéé˜»å¡çš„ï¼Œè¿™æ ·å¼€å‘äººå‘˜å°±ä¸éœ€è¦è‡ªå·±å»èµ·ç‹¬ç«‹çº¿ç¨‹ï¼ˆæˆ–isolateï¼‰å»å¤„ç†é‡Œï¼Œè¿™ä¸ªä¸Nodeç±»ä¼¼ã€‚Androidæ‰€ä½¿ç”¨çš„Javaè¯­è¨€ä¹Ÿæœ‰ç±»ä¼¼çš„æ”¯æŒï¼Œå¦‚æ—©æœŸçš„async task, ä»¥åŠåæ¥çš„å„ç§åº“ï¼ˆå¦‚ionï¼‰ï¼Œä¸éœ€è¦è‡ªå·±ç›´æ¥å»èµ·çº¿ç¨‹æ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œé™¤éä½ æ„¿æ„ã€‚æ¯•ç«ŸJavaæ˜¯ä¸ªè¾ƒä¸ºæ—©æœŸçš„è¯­è¨€ï¼Œè€Œå¼‚æ­¥ç¼–ç¨‹å…´èµ·è¾ƒæ™šï¼Œå› æ­¤Javaè¯­è¨€æœ¬èº«åœ¨è¿™æ–¹é¢çš„æ”¯æŒä¸æ˜¯å¾ˆç»Ÿä¸€ã€‚æ³¨æ„ï¼ŒOSçš„å¼‚æ­¥æ”¯æŒå’Œè¯­è¨€çš„å¼‚æ­¥ç¼–ç¨‹ä¸æ˜¯ä¸€å›äº‹ï¼Œè™½ç„¶æ˜¯ä¸€è„‰ç›¸æ‰¿çš„ã€‚æœ‰æ²¡æœ‰OSçš„å¼‚æ­¥æ”¯æŒï¼Œè¯­è¨€éƒ½å¯ä»¥æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577756113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":24307,"ip_address":""},"score":110773,"extra":""},{"author":{"id":1792683,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5a/ab/bda5b14d.jpg","nickname":"Xingjian","note":"","ucode":"9047292CB92A13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1313651,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0b/73/4f1c9676.jpg","nickname":"èˆ’å¤§é£","note":"","ucode":"5CC2E0F8C40E38","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":110794,"discussion_content":"å¦å¤–ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¯­è¨€çº§çš„å¼‚æ­¥ç¼–ç¨‹å¼ºè°ƒâ€œå•çº¿ç¨‹â€ä¸‹çš„å¼‚æ­¥IOä»»åŠ¡æ”¯æŒï¼Œæ­¤æ—¶å¹¶ä¸éœ€è¦å¦èµ·åˆ«çš„æ‰§è¡Œä½“ï¼Œå› ä¸ºIOæ“ä½œå¾€å¾€åªéœ€å‘å‡ºè¯·æ±‚ï¼Œç„¶åéƒ½ç»“æœå³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶ä¸éœ€è¦é¢å¤–çš„å¼‚æ­¥çº¿ç¨‹å»æ‰§è¡Œè€—æ—¶æ“ä½œã€‚OSæœ¬èº«åªæ˜¯æä¾›ç³»ç»Ÿè°ƒç”¨APIï¼Œä¹Ÿä¸ä¼šè‡ªå·±èµ·çº¿ç¨‹ã€‚å¦‚æœä½ ç”¨Androidçš„ionåº“ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚è€Œå¯¹äºé€šç”¨çš„è€—æ—¶è®¡ç®—ä»»åŠ¡ï¼Œä¾‹å¦‚æ±‚è§£é˜¶ä¹˜ï¼Œå¼‚æ­¥ç¼–ç¨‹å¸®åŠ©ä¸å¤§ï¼Œè€Œåº”è¯¥å¦èµ·æ‰§è¡Œä½“æ¯”å¦‚async task, isolateç­‰è¿›è¡Œå¹¶å‘æ“ä½œã€‚åªä¸è¿‡ç°åœ¨æœ‰çš„å¹¶å‘ç¼–ç¨‹APIæŠŠè¿™ä¸¤ç±»æ··åœ¨ä¸€èµ·äº†ï¼Œæ¯”å¦‚æœ‰çš„åº“æŠŠå¼‚æ­¥å’Œå¹¶å‘ä»»åŠ¡éƒ½ç”¨coroutineæ¥åŒ…è£…ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577757406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":24307,"ip_address":""},"score":110794,"extra":""}]},{"author":{"id":1330032,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4b/70/33137826.jpg","nickname":"æ²ˆæ°","note":"","ucode":"17E314B07844F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556818,"discussion_content":"é‚£ä¸æ˜¯è·Ÿandroidçš„UIçº¿ç¨‹ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647522812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253477,"user_name":"è®¸å…ˆæ£®","can_delete":false,"product_type":"c1","uid":1795371,"ip_address":"","ucode":"1F42D4A6B5C6AF","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/2b/446ef7b6.jpg","comment_is_top":false,"comment_ctime":1602749472,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23077585952","product_id":100031001,"comment_content":"â€œç„¶ååˆ°äº† f2 ä¸‹é¢çš„ f6ï¼Œæ‰“å° f6ï¼Œç„¶åæ‰§è¡Œ thenã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ª then æ˜¯ä¸€ä¸ª Future å¼‚æ­¥ä»»åŠ¡ï¼Œå› æ­¤è¿™ä¸ª thenï¼Œä»¥åŠåç»­çš„ then éƒ½è¢«æ”¾å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­äº†ã€‚â€<br>è€å¸ˆä½ å¥½ï¼Œè¿™å¥è¯ä¸­ååŠæ®µè§£é‡Šçš„ä¸å‡†ç¡®ã€‚åº”è¯¥æ˜¯ï¼š<br> thenå‡½æ•°ä¼šè¿”å›futureï¼Œæ‰€ä»¥ç”¨=&gt;çš„å†™æ³•æ—¶ï¼Œ æ–°åˆ›å»ºçš„futureä¼šè¢«thenè¿”å›ï¼Œç¬¬äºŒä¸ªthençš„è°ƒç”¨è€…å°±æ˜¯æ–°çš„futureå¯¹è±¡ï¼Œ  æ‰€ä»¥ç¬¬äºŒä¸ªthenå°±ä¸è·Ÿç€åŸå…ˆçš„future è€Œæ˜¯è·Ÿç€å®ƒçš„æ–°futureäº†ã€‚<br>å¦‚æœæŠŠ=&gt;æ¢æˆå¤§æ‹¬å·ï¼Œæ­¤æ—¶ç¬¬äºŒä¸ªthenè¿˜æ˜¯è·Ÿç€åŸå…ˆçš„futureï¼Œå’Œæ–°futureæ— å…³ã€‚","like_count":6,"discussions":[{"author":{"id":1924308,"avatar":"","nickname":"å¼ æ°¸å¸…","note":"","ucode":"5D7E19F07919FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337192,"discussion_content":"ç‰›é€¼å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608820330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126401,"user_name":"å´å°å®‰","can_delete":false,"product_type":"c1","uid":1371398,"ip_address":"","ucode":"EDF8E04F867069","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqr5ibqxYwcSgqPA7s49MZb1vEKKXT4mPTojwiclXkJf3ug26NuzTa6A5gbicR2rAUHdEkUAn13Rr2KQ/132","comment_is_top":false,"comment_ctime":1566381535,"is_pvip":false,"replies":[{"id":"47652","content":"æ— éœ€æ‹…å¿ƒï¼Œæˆ‘ä»¬è¯´çš„å•çº¿ç¨‹å…¶å®æ˜¯é’ˆå¯¹ä¸»Isolateçš„ã€‚äº‹å®ä¸ŠFlutteræä¾›äº†4ç§task runnerï¼Œä»–ä»¬æœ‰ç‹¬ç«‹çš„çº¿ç¨‹å»è¿è¡Œä¸“å±çš„ä»»åŠ¡ï¼š<br>1.Platform Task Runnerï¼šå¤„ç†æ¥è‡ªå¹³å°ï¼ˆAndroid&#47;iOSï¼‰çš„æ¶ˆæ¯<br>2.UI Task Runnerï¼šæ‰§è¡Œæ¸²æŸ“é€»è¾‘ã€å¤„ç†native pluginçš„æ¶ˆæ¯ã€timerã€microtaskã€å¼‚æ­¥I&#47;Oæ“ä½œå¤„ç†ç­‰<br>3.GPU Task Runnerï¼šæ‰§è¡ŒGPUæŒ‡ä»¤<br>4.IO Task Runnerï¼šæ‰§è¡ŒI&#47;Oä»»åŠ¡<br>è¿™äº›ç‰¹å®šä»»åŠ¡çš„æ‰§è¡Œéƒ½æ˜¯å›ºå®šçš„å¥—è·¯ï¼Œå¦å¤–æ“ä½œç³»ç»Ÿæœ¬èº«ä¹Ÿæä¾›äº†å¤§é‡å¼‚æ­¥å¹¶å‘æœºåˆ¶ï¼Œå¯ä»¥åˆ©ç”¨å¤šçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼ˆæ¯”å¦‚socketï¼‰ï¼Œæˆ‘ä»¬åœ¨ä¸»Isolateä¸­æ— éœ€å…³å¿ƒï¼ˆå¦‚æœçœŸæƒ³ä¸»åŠ¨åˆ›å»ºå¹¶å‘ä»»åŠ¡ä¹Ÿå¯ä»¥ï¼‰ï¼Œå› æ­¤è¯´åŸºäºä¸»Isolateçš„Flutteræ˜¯å•çº¿ç¨‹æ¨¡å‹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1566898641,"ip_address":"","comment_id":126401,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18746250719","product_id":100031001,"comment_content":"ç°åœ¨æ‰‹æœºéƒ½æ˜¯å¤šæ ¸ï¼Œä½¿ç”¨futureæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡éƒ½æ˜¯æ”¾åœ¨å½“å‰çº¿ç¨‹ï¼Œè€Œè¦åœ¨å…¶ä»–çº¿ç¨‹æ‰§è¡Œå°±è¦è¿™ä¹ˆéº»çƒ¦ï¼Œè¿™æ ·å¤§éƒ¨åˆ†äººå†™çš„å¼‚æ­¥ä»»åŠ¡éƒ½å‘æŒ¥ä¸äº†å¤šæ ¸çš„æ€§èƒ½ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹æµªè´¹ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463973,"discussion_content":"æ— éœ€æ‹…å¿ƒï¼Œæˆ‘ä»¬è¯´çš„å•çº¿ç¨‹å…¶å®æ˜¯é’ˆå¯¹ä¸»Isolateçš„ã€‚äº‹å®ä¸ŠFlutteræä¾›äº†4ç§task runnerï¼Œä»–ä»¬æœ‰ç‹¬ç«‹çš„çº¿ç¨‹å»è¿è¡Œä¸“å±çš„ä»»åŠ¡ï¼š\n1.Platform Task Runnerï¼šå¤„ç†æ¥è‡ªå¹³å°ï¼ˆAndroid/iOSï¼‰çš„æ¶ˆæ¯\n2.UI Task Runnerï¼šæ‰§è¡Œæ¸²æŸ“é€»è¾‘ã€å¤„ç†native pluginçš„æ¶ˆæ¯ã€timerã€microtaskã€å¼‚æ­¥I/Oæ“ä½œå¤„ç†ç­‰\n3.GPU Task Runnerï¼šæ‰§è¡ŒGPUæŒ‡ä»¤\n4.IO Task Runnerï¼šæ‰§è¡ŒI/Oä»»åŠ¡\nè¿™äº›ç‰¹å®šä»»åŠ¡çš„æ‰§è¡Œéƒ½æ˜¯å›ºå®šçš„å¥—è·¯ï¼Œå¦å¤–æ“ä½œç³»ç»Ÿæœ¬èº«ä¹Ÿæä¾›äº†å¤§é‡å¼‚æ­¥å¹¶å‘æœºåˆ¶ï¼Œå¯ä»¥åˆ©ç”¨å¤šçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼ˆæ¯”å¦‚socketï¼‰ï¼Œæˆ‘ä»¬åœ¨ä¸»Isolateä¸­æ— éœ€å…³å¿ƒï¼ˆå¦‚æœçœŸæƒ³ä¸»åŠ¨åˆ›å»ºå¹¶å‘ä»»åŠ¡ä¹Ÿå¯ä»¥ï¼‰ï¼Œå› æ­¤è¯´åŸºäºä¸»Isolateçš„Flutteræ˜¯å•çº¿ç¨‹æ¨¡å‹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566898641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1752518,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/bd/c6/24e2c375.jpg","nickname":"YJY","note":"","ucode":"430E0ADCDA6C4C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384076,"discussion_content":"è€å¸ˆæˆ‘æƒ³è¯·é—®ä¸‹ï¼Œåƒç½‘ç»œè¯·æ±‚ï¼Œè¯·æ±‚å®Œæˆåçš„å¼‚æ­¥å›è°ƒï¼Œæ˜¯æ€ä¹ˆå’Œä¸»isolateçº¿ç¨‹è¿›è¡Œäº¤äº’çš„ï¼Œåº•è¡¬å±‚é€»è¾‘æ˜¯æ€ä¹ˆæ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626354946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1008315,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/bb/323a3133.jpg","nickname":"ä¸‹é›¨å¤©","note":"","ucode":"816B3792ECC50A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1752518,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/bd/c6/24e2c375.jpg","nickname":"YJY","note":"","ucode":"430E0ADCDA6C4C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542333,"discussion_content":"åŒæ ·æ˜¯ç®¡é“å®ç°çš„æ¶ˆæ¯æœºåˆ¶å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640729567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":384076,"ip_address":""},"score":542333,"extra":""}]}]},{"had_liked":false,"id":206310,"user_name":"fwd","can_delete":false,"product_type":"c1","uid":1941288,"ip_address":"","ucode":"B8F43348AB0CA9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eooslLSbAgVTWKIEQbjUCbk0s3KuW0MC3T0GSbzh0zC5nIkfFHIwhyGyLOibricf2bhDdfgAoZc5kDQ/132","comment_is_top":false,"comment_ctime":1586838069,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10176772661","product_id":100031001,"comment_content":"ç¬¬äºŒé¢˜è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„å§ã€‚main() async {<br>  await Future(() =&gt; print(&#39;f1&#39;))<br>    .then((_) =&gt; Future(() =&gt; print(&#39;f2&#39;)))<br>    .then((_) =&gt; print(&#39;f3&#39;));<br>  Future(() =&gt; print(&#39;f4&#39;));<br>}","like_count":2},{"had_liked":false,"id":160491,"user_name":"Geek_20f143","can_delete":false,"product_type":"c1","uid":1701883,"ip_address":"","ucode":"5D97BD5FA4A26F","user_header":"","comment_is_top":false,"comment_ctime":1575963227,"is_pvip":false,"replies":[{"id":"63380","content":"ä½ æŠŠç¬¬ä¸€ä¸ªè¯­å¥çš„thenåŠ ä¸ªreturnå†è¯•è¯•<br>    Future(() =&gt; print(&#39;a1&#39;))<br>        .then((_) {<br>      return Future(() =&gt; print(&#39;a2&#39;));<br>    }).then((_) =&gt; print(&#39;a3&#39;));","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1577435911,"ip_address":"","comment_id":160491,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10165897819","product_id":100031001,"comment_content":"    Future(() =&gt; print(&#39;a1&#39;))<br>        .then((_) {<br>      Future(() =&gt; print(&#39;a2&#39;));<br>    }).then((_) =&gt; print(&#39;a3&#39;));<br><br><br>Future(() =&gt; print(&#39;a1&#39;))<br>        .then((_) =&gt; Future(() =&gt; print(&#39;a2&#39;)))<br>        .then((_) =&gt; print(&#39;a3&#39;));<br><br>è€å¸ˆ,ä¸ºä»€ä¹ˆç¬¬ä¸€éƒ¨åˆ†æ‰“å°é¡ºåºæ˜¯a1 a3 a2... ç¬¬äºŒéƒ¨åˆ†æ‰“å°é¡ºåºæ˜¯a1 a2 a3<br>a2åŒºåˆ«é‚£éƒ¨åˆ†ä¸æ˜¯åªæ˜¯è¯­æ³•ç³–å—?","like_count":3,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477390,"discussion_content":"ä½ æŠŠç¬¬ä¸€ä¸ªè¯­å¥çš„thenåŠ ä¸ªreturnå†è¯•è¯•\n    Future(() =&amp;gt; print(&amp;#39;a1&amp;#39;))\n        .then((_) {\n      return Future(() =&amp;gt; print(&amp;#39;a2&amp;#39;));\n    }).then((_) =&amp;gt; print(&amp;#39;a3&amp;#39;));","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577435911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147010,"user_name":"GGL","can_delete":false,"product_type":"c1","uid":1215892,"ip_address":"","ucode":"AED10B8248D1E7","user_header":"https://static001.geekbang.org/account/avatar/00/12/8d/94/150dfe78.jpg","comment_is_top":false,"comment_ctime":1572762759,"is_pvip":false,"replies":[{"id":"59790","content":"å•è¡Œç®­å¤´å‡½æ•°æ˜¯Futureï¼Œå’Œå‡½æ•°ä½“é‡Œæœ‰Futureä¸æ˜¯ä¸€å›äº‹","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1574754403,"ip_address":"","comment_id":147010,"utype":1}],"discussion_count":7,"race_medal":0,"score":"10162697351","product_id":100031001,"comment_content":"&#47;&#47; ç¬¬ä¸€æ®µ<br>  Future(() =&gt; print(&#39;f6&#39;))<br>    .then((_) =&gt; Future(() =&gt; print(&#39;f7&#39;)))<br>    .then((_) =&gt; print(&#39;f8&#39;));<br><br>æ‰§è¡Œç»“æœä¸ºï¼šf6 f7 f8<br><br>  &#47;&#47; ç¬¬äºŒæ®µ<br>  Future(() =&gt; print(&#39;f6&#39;))<br>  .then((_) {<br>      Future(() =&gt; print(&#39;f7&#39;));<br>    })<br>  .then((_) =&gt; print(&#39;f8&#39;));<br><br>æ‰§è¡Œç»“æœä¸ºï¼šf6 f8 f7<br><br>è€å¸ˆï¼Œä¸Šé¢è¿™ä¸¤æ®µä»£ç ä¸ºä»€ä¹ˆæ‰§è¡Œç»“æœä¸ä¸€æ ·å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473094,"discussion_content":"å•è¡Œç®­å¤´å‡½æ•°æ˜¯Futureï¼Œå’Œå‡½æ•°ä½“é‡Œæœ‰Futureä¸æ˜¯ä¸€å›äº‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574754403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1044793,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f1/39/768503ad.jpg","nickname":"é’±æ´‹å½ª","note":"","ucode":"84FBB0E48FD885","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218313,"discussion_content":"ç¬¬ä¸€æ®µä»£ç æ˜¯ä¾æ¬¡æ‰”å…¥event queueï¼Œç¬¬äºŒæ®µä»£ç f6æ‰”å…¥event queueæ‰§è¡Œï¼Œç¬¬ä¸€ä¸ªthenå°†f7æ‰”å…¥event queueè¿”å›äº†nullï¼Œå¯¼è‡´ç¬¬äºŒä¸ªthen çš„f8å®é™…æ˜¯æ‰”åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ï¼Œæ‰€ä»¥f8æ—©äºf7æ‰“å°ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1585646920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1879421,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/ad/7d/8e64b756.jpg","nickname":"å¹¿ä¸œå¤§è‚ ç²‰","note":"","ucode":"23BCDE1243CFD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223217,"discussion_content":"æŠŠç¬¬äºŒæ®µ ç¬¬äºŒä¸ªthen é‡Œé¢åŠ ä¸ªreturn å°±å¥½äº†ã€‚=> æ˜¯ç®€åŒ–åªæœ‰ä¸€è¡Œä»£ç çš„æ—¶å€™ï¼Œç›´æ¥ä½œä¸ºè¿”å›å€¼äº†\nFuture(() => print(&#39;f6&#39;))\n  .then((_) {\n      return Future(() => print(&#39;f7&#39;));\n    })\n  .then((_) => print(&#39;f8&#39;));","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586189997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1879421,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/ad/7d/8e64b756.jpg","nickname":"å¹¿ä¸œå¤§è‚ ç²‰","note":"","ucode":"23BCDE1243CFD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223218,"discussion_content":"è¿™é‡Œçš„ F7 æˆ‘ç®—æ˜¯çœ‹æ˜ç™½äº†ï¼Œå°±ç±»ä¼¼rxjava é‡Œé¢flatmap äº†ä¸€ä¸ª observable ,ç›´æ¥ä¸²è¡Œèµ°ä¸‹å»äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586190349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005356,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/2c/b0793828.jpg","nickname":"ssala","note":"","ucode":"CCD82C81756FC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135160,"discussion_content":"ç¬¬ä¸€æ®µçš„ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªthenæ‰§è¡Œä»¥åï¼Œå¾—åˆ°ä¸€ä¸ªfutureå¯¹è±¡ï¼Œå…¶å°è£…çš„å›è°ƒä¸åº”è¯¥åœ¨ä¸‹ä¸ªäº‹ä»¶å¾ªç¯è°ƒç”¨å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579073761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1701883,"avatar":"","nickname":"Geek_20f143","note":"","ucode":"5D97BD5FA4A26F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":77984,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™ä¸ªé—®é¢˜ï¼Œæ²¡å¤ªæ‡‚å•è¡Œç®­å¤´å‡½æ•°æ˜¯Futureçš„æ„æ€ï¼Œè¿™ä¸æ˜¯è¯­æ³•ç³–å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575963290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1792683,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5a/ab/bda5b14d.jpg","nickname":"Xingjian","note":"","ucode":"9047292CB92A13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1701883,"avatar":"","nickname":"Geek_20f143","note":"","ucode":"5D97BD5FA4A26F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":110801,"discussion_content":"å•è¡Œç®­å¤´å‡½æ•°çš„è¿”å›å€¼æ˜¯æŒ‡å‘çš„Futureï¼Œè€Œåœ¨å‡½æ•°é‡Œï¼Œstatement(åˆ†å·)è¿”å›çš„æ˜¯ç©º(null)ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577757638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":77984,"ip_address":""},"score":110801,"extra":""}]}]},{"had_liked":false,"id":129296,"user_name":"lk","can_delete":false,"product_type":"c1","uid":1222590,"ip_address":"","ucode":"15CD5F7984668D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a7/be/b036d9c8.jpg","comment_is_top":false,"comment_ctime":1567081784,"is_pvip":false,"replies":[{"id":"48123","content":"èµğŸ‘å¦å¤–å»ºè®®æŠŠawaitåŠ ä¸Š","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1567097413,"ip_address":"","comment_id":129296,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10157016376","product_id":100031001,"comment_content":"Future(() =&gt; print(&#39;f1&#39;))<br>      .then((_) async =&gt;  scheduleMicrotask(() =&gt; print(&#39;f2&#39;)))<br>      .then((_) =&gt; print(&#39;f3&#39;));<br>  Future(() =&gt; print(&#39;f4&#39;));","like_count":2,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465387,"discussion_content":"èµğŸ‘å¦å¤–å»ºè®®æŠŠawaitåŠ ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567097413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298530,"user_name":"é­…å½±","can_delete":false,"product_type":"c1","uid":1360952,"ip_address":"","ucode":"F26F7F1331A4DA","user_header":"https://static001.geekbang.org/account/avatar/00/14/c4/38/e0fefa2b.jpg","comment_is_top":false,"comment_ctime":1624178318,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5919145614","product_id":100031001,"comment_content":"&#47;&#47;then 4ä¼šåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°½å¿«æ‰§è¡ŒFuture(() =&gt; null).then((_) =&gt; print(&#39;then 4&#39;));<br>ä¸ºä»€ä¹ˆ Future å†…éƒ¨ä¸ºç©ºï¼Œå°±ä¸å°† then çš„å†…å®¹æ·»åŠ åˆ° Event Queue ä¸­ï¼Œè€Œæ˜¯æ·»åŠ åˆ° Microtask Queue ä¸­ï¼Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡","like_count":1},{"had_liked":false,"id":234692,"user_name":"å°æ¶›","can_delete":false,"product_type":"c1","uid":1454199,"ip_address":"","ucode":"F663DC8CF9E939","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/77/14bf75fe.jpg","comment_is_top":false,"comment_ctime":1594774899,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5889742195","product_id":100031001,"comment_content":"è€å¸ˆï¼Œå¦‚ä½•å–æ¶ˆå·²ç»åŠ å…¥äº‹ä»¶é˜Ÿåˆ—çš„ä»»åŠ¡å‘¢ï¼Ÿ  æ¯”å¦‚ä¹‹å‰awaitä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œç°åœ¨æƒ³å–æ¶ˆ","like_count":1},{"had_liked":false,"id":159263,"user_name":"æ»¡å¤§å¤§","can_delete":false,"product_type":"c1","uid":1170022,"ip_address":"","ucode":"06DE739A6CE9EF","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/66/5858322e.jpg","comment_is_top":false,"comment_ctime":1575593110,"is_pvip":true,"replies":[{"id":"63378","content":"å°±æ˜¯awaitåªç­‰å¾…å½“å‰çš„è¯­å¥ï¼Œå¹¶ä¸æ˜¯ä»¥æŠŠæ•´ä¸ªè°ƒç”¨æ ˆéƒ½é”æ­»çš„æ–¹å¼è¿›è¡Œç­‰å¾…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1577435718,"ip_address":"","comment_id":159263,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870560406","product_id":100031001,"comment_content":"await çš„ä¸Šä¸‹æ–‡å‡½æ•°å¹¶ä¸åŒ…å«è°ƒç”¨æ ˆï¼Œå› æ­¤ func åç»­ä»£ç ç»§ç»­æ‰§è¡Œï¼Œæ‰“å°â€œfunc afterâ€ã€‚è¿™é‡Œæ€ä¹ˆç†è§£ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476997,"discussion_content":"å°±æ˜¯awaitåªç­‰å¾…å½“å‰çš„è¯­å¥ï¼Œå¹¶ä¸æ˜¯ä»¥æŠŠæ•´ä¸ªè°ƒç”¨æ ˆéƒ½é”æ­»çš„æ–¹å¼è¿›è¡Œç­‰å¾…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577435718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153127,"user_name":"èœå¤´","can_delete":false,"product_type":"c1","uid":1456964,"ip_address":"","ucode":"C5E95519F9EA21","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","comment_is_top":false,"comment_ctime":1574164555,"is_pvip":false,"replies":[{"id":"59089","content":"å¯ä»¥çš„ï¼ŒèµğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1574308063,"ip_address":"","comment_id":153127,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5869131851","product_id":100031001,"comment_content":"1ã€å› ä¸ºä¸¤ä¸ª SendPort çš„ä½œç”¨ä¸ä¸€æ ·<br>ç¬¬ä¸€ä¸ª SendPort æ˜¯ä¸ºäº†è®©å¹¶å‘ Isolate å›ä¼ ä¸€ä¸ª SendPort<br>ç¬¬äºŒä¸ª SendPort æ˜¯ä¸ºäº†è®©å¹¶å‘ Isolate å›ä¼ ç»“æœ<br>å¯ä»¥æ”¹é€ æˆä¸€ä¸ª<br>ç›‘å¬ç¬¬ä¸€ä¸ª SendPort çš„å›è°ƒï¼Œæ ¹æ®ç»“æœç±»å‹å¤ç”¨è¿™ä¸ª SendPort<br>å¹¶ä¸”åœ¨è®¡ç®—ç»“æœå®Œæˆä¹‹åå…³æ‰ SendPort å³å¯<br>","like_count":2,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475053,"discussion_content":"å¯ä»¥çš„ï¼ŒèµğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574308063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1742621,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/97/1d/4bac8dbf.jpg","nickname":"VI jolie","note":"","ucode":"1CBC214FFEB546","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329083,"discussion_content":"Future<dynamic> asyncFactoriali(n) async {\n  final response = ReceivePort(); // åˆ›å»ºç®¡é“\n  // åˆ›å»ºå¹¶å‘ Isolateï¼Œå¹¶ä¼ å…¥ç®¡é“\n  await Isolate.spawn(_isolate, response.sendPort);\n  // ç­‰å¾… Isolate å›ä¼ ç®¡é“\n   response.listen((message) {\n    if (message is SendPort) {\n      message.send(n);\n    } else {\n      print(&#39;$message&#39;);\n      response.close();\n    }\n  });\n}\né—®é¢˜æ˜¯è¿™ä¸ªæ€ä¹ˆreturn å•Šï¼Œç­”ä¸»çŸ¥é“ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606308737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1697975,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e8/b7/0f43ae79.jpg","nickname":"è¨€è€…æ­Œé€”","note":"","ucode":"67CCB2E8DD8B28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311712,"discussion_content":"è¿™é‡Œæˆ‘è§‰å¾—å°±åº”è¯¥æ”¹é€ æˆä¸€ä¸ªã€‚çœ‹èµ·æ¥å¤ªæ··ä¹±äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602470906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145149,"user_name":"Geek_869250","can_delete":false,"product_type":"c1","uid":1457445,"ip_address":"","ucode":"292980DF23D5A0","user_header":"http://thirdwx.qlogo.cn/mmopen/h0KAdRFKjCOSLRjzictvlaHOxsEiaWMSqcO68oiaUqffzyYlEKrDRvicHociabv72HNuR2VdECr8mVFIRiayM0Dd7bNDnaiceicHysF7/132","comment_is_top":false,"comment_ctime":1572224357,"is_pvip":false,"replies":[{"id":"56198","content":"åŸºæœ¬ä¸Šä¸€æ ·ï¼Œå› ä¸ºDartçš„å•çº¿ç¨‹æ¨¡å‹å°±æ˜¯å€Ÿé‰´çš„js","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1572321949,"ip_address":"","comment_id":145149,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5867191653","product_id":100031001,"comment_content":"è€å¸ˆå¯ä»¥å’ŒJSçš„event loopåšä¸ªæ¯”è¾ƒå—<br>","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472267,"discussion_content":"åŸºæœ¬ä¸Šä¸€æ ·ï¼Œå› ä¸ºDartçš„å•çº¿ç¨‹æ¨¡å‹å°±æ˜¯å€Ÿé‰´çš„js","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572321949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1360952,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c4/38/e0fefa2b.jpg","nickname":"é­…å½±","note":"","ucode":"F26F7F1331A4DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379862,"discussion_content":"æœ‰åŒºåˆ«ï¼ŒJS ä¸­æ˜¯å…ˆæ‰§è¡Œ Event Queue ä¸­çš„å®ä»»åŠ¡ï¼Œå†å»æ‰§è¡Œå¾®ä»»åŠ¡ã€‚Dart ç›¸å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624194735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138196,"user_name":"èˆ’å¤§é£","can_delete":false,"product_type":"c1","uid":1313651,"ip_address":"","ucode":"5CC2E0F8C40E38","user_header":"https://static001.geekbang.org/account/avatar/00/14/0b/73/4f1c9676.jpg","comment_is_top":false,"comment_ctime":1570089996,"is_pvip":true,"replies":[{"id":"53522","content":"1.æ–‡ä»¶I&#47;Oå’Œç½‘ç»œè°ƒç”¨è¿™ç±»åº•å±‚æœåŠ¡è°ƒç”¨ï¼Œåªæ˜¯Embedderå±‚åšäº†ä¸€æ¬¡å°è£…ï¼Œåº•å±‚æœ‰ä¸“é—¨çš„çº¿ç¨‹å¤„ç†è¿™äº›ä»»åŠ¡ï¼›<br>2.ä¸¤è€…è®¾è®¡ç†å¿µä¸åŒè€Œå·²ï¼ŒåŸç”ŸAndroidæ›´åº•å±‚ã€‚ä½ ä¹Ÿå¯ä»¥è¯•ç€å¢åŠ ä¸€å±‚ï¼Œç”¨çº¿ç¨‹æ± æ¨¡æ‹Ÿå‡ºç±»ä¼¼Dartçš„Isolateæœºåˆ¶ï¼Œå®ç°I&#47;Oã€ç½‘ç»œè°ƒç”¨çš„å¼‚æ­¥åŒ–ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1570518694,"ip_address":"","comment_id":138196,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5865057292","product_id":100031001,"comment_content":"è€å¸ˆï¼Œè¿˜æ˜¯æœ‰ç‚¹å›°æƒ‘ï¼Œå¸Œæœ›è§£ç­”ä¸‹ï¼Œä½ è¯´çš„:æ–‡ä»¶IOå’Œç½‘ç»œè°ƒç”¨å¹¶ä¸æ˜¯åœ¨dartå±‚åšçš„ï¼Œè€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥çº¿ç¨‹ï¼Œè¿™å¥è¯æ€ä¹ˆç†è§£ï¼Œæ˜¯å› ä¸ºdarté‡Œçš„æ–‡ä»¶IOå’Œç½‘ç»œè°ƒç”¨æ˜¯è¿™æ ·å°è£…å®ç°çš„å—?å¦‚æœä¸æ˜¯ï¼Œé‚£å…¶å®ƒè¯­è¨€ï¼Œæ¯”å¦‚Androidå¼€å‘ä¸­ä¸ºä»€ä¹ˆè¦å•ç‹¬å¼€çº¿ç¨‹å»åšIOå’Œç½‘ç»œè¯·æ±‚ï¼ŒAndroidå¼€å‘ä¸­çš„IOå’Œç½‘ç»œè¯·æ±‚ä¸æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥çº¿ç¨‹å—","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469432,"discussion_content":"1.æ–‡ä»¶I/Oå’Œç½‘ç»œè°ƒç”¨è¿™ç±»åº•å±‚æœåŠ¡è°ƒç”¨ï¼Œåªæ˜¯Embedderå±‚åšäº†ä¸€æ¬¡å°è£…ï¼Œåº•å±‚æœ‰ä¸“é—¨çš„çº¿ç¨‹å¤„ç†è¿™äº›ä»»åŠ¡ï¼›\n2.ä¸¤è€…è®¾è®¡ç†å¿µä¸åŒè€Œå·²ï¼ŒåŸç”ŸAndroidæ›´åº•å±‚ã€‚ä½ ä¹Ÿå¯ä»¥è¯•ç€å¢åŠ ä¸€å±‚ï¼Œç”¨çº¿ç¨‹æ± æ¨¡æ‹Ÿå‡ºç±»ä¼¼Dartçš„Isolateæœºåˆ¶ï¼Œå®ç°I/Oã€ç½‘ç»œè°ƒç”¨çš„å¼‚æ­¥åŒ–ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570518694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129544,"user_name":"æ¥¼å¤–æ¥¼","can_delete":false,"product_type":"c1","uid":1243180,"ip_address":"","ucode":"791F2CA15B8F1F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/sgEfkeMSIIibeH4l0HS8uwM6PGY3DSHoW5tV9l1hDQ06tr3OnI7F545Wdxsh59rqOKnzjLUpCcEqic3P9zZbKzPQ/132","comment_is_top":false,"comment_ctime":1567152434,"is_pvip":false,"replies":[{"id":"49517","content":"awaité˜»å¡çš„æ˜¯å½“å‰ä¸Šä¸‹æ–‡çš„åç»­ä»£ç æ‰§è¡Œï¼Œå¹¶ä¸èƒ½é˜»å¡å…¶è°ƒç”¨æ ˆä¸Šå±‚çš„åç»­ä»£ç æ‰§è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1567677939,"ip_address":"","comment_id":129544,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862119730","product_id":100031001,"comment_content":"Dart ä¸­çš„ await å¹¶ä¸æ˜¯é˜»å¡ç­‰å¾…ï¼Œè€Œæ˜¯å¼‚æ­¥ç­‰å¾…ï¼Œè¿™å¥è¯æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Œawait å°±æ˜¯é˜»å¡åé¢ä»£ç æ‰§è¡Œï¼Œç­‰å¾…å¼‚æ­¥ä»£ç è¿”å›ã€‚éš¾é“æˆ‘ç†è§£æœ‰è¯¯ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465534,"discussion_content":"awaité˜»å¡çš„æ˜¯å½“å‰ä¸Šä¸‹æ–‡çš„åç»­ä»£ç æ‰§è¡Œï¼Œå¹¶ä¸èƒ½é˜»å¡å…¶è°ƒç”¨æ ˆä¸Šå±‚çš„åç»­ä»£ç æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567677939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347003,"user_name":"VI jolie","can_delete":false,"product_type":"c1","uid":1742621,"ip_address":"","ucode":"1CBC214FFEB546","user_header":"https://static001.geekbang.org/account/avatar/00/1a/97/1d/4bac8dbf.jpg","comment_is_top":false,"comment_ctime":1653613339,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653613339","product_id":100031001,"comment_content":"ä½ å‘ç°äº†ä»€ä¹ˆç°è±¡ï¼Ÿé‚£å°±æ˜¯ await ä¸ async åªå¯¹è°ƒç”¨ä¸Šä¸‹æ–‡çš„å‡½æ•°æœ‰æ•ˆï¼Œå¹¶ä¸å‘ä¸Šä¼ é€’ã€‚è¿™ä¸ªæ€ä¹ˆç†è§£","like_count":0},{"had_liked":false,"id":335957,"user_name":"é’å±±","can_delete":false,"product_type":"c1","uid":1131070,"ip_address":"","ucode":"749BAD1834AC0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/3e/1d9c257f.jpg","comment_is_top":false,"comment_ctime":1645787728,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645787728","product_id":100031001,"comment_content":"è€å¸ˆæ‚¨å¥½, æˆ‘ä¸çŸ¥é“ä½ è¿˜åœ¨å›ç­”è¿™ä¸ªä¸“æ çš„é—®é¢˜ä¸,æˆ‘åœ¨ç°å®ç¼–ç ä¸­é‡è§äº†ä¸€ä¸ªé—®é¢˜:isolateä¸MethodChannel ä¸èƒ½ä¸€èµ·ä½¿ç”¨,è¿™è®©æˆ‘çš„appåŠ è½½å¹¶ä¸æµç¨‹,åŸå› æ˜¯è°ƒç”¨åŸç”Ÿæ–¹æ³•æ—¶éœ€è¦å¾ˆä¹…çš„æ—¶é—´,uiçº¿ç¨‹ä¼šç­‰å¾…æ‰§è¡Œå®Œæˆåå†åŠ è½½ui,ä¸çŸ¥é“è€å¸ˆå¯¹ç€æ–¹é¢æœ‰ä»€ä¹ˆç»éªŒæˆ–è€…å¯å®ç°æ–¹æ¡ˆ.","like_count":0},{"had_liked":false,"id":313533,"user_name":"ææºæ¸…","can_delete":false,"product_type":"c1","uid":2750697,"ip_address":"","ucode":"4B5FC6B0890024","user_header":"","comment_is_top":false,"comment_ctime":1632477089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632477089","product_id":100031001,"comment_content":"æ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·ç†è§£ï¼ŒIOäº‹ä»¶ã€ç½‘ç»œè¯·æ±‚è¿™ç§è€—æ—¶æ“ä½œï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨å…¶ä»–çº¿ç¨‹æ¥æ‰§è¡Œï¼Œåªæ˜¯å°†ç»“æœæ‰”å›æ‰€è°“çš„dartå•çº¿ç¨‹ä¸­ï¼Œæœ€ç»ˆä»å¾ªç¯é˜Ÿåˆ—ä¸­æ‹¿åˆ°å¤„ç†ç»“æœï¼Ÿ","like_count":0},{"had_liked":false,"id":302756,"user_name":"YJY","can_delete":false,"product_type":"c1","uid":1752518,"ip_address":"","ucode":"430E0ADCDA6C4C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/bd/c6/24e2c375.jpg","comment_is_top":false,"comment_ctime":1626354981,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626354981","product_id":100031001,"comment_content":"è€å¸ˆæˆ‘æƒ³è¯·é—®ä¸‹ï¼Œåƒç½‘ç»œè¯·æ±‚ï¼Œè¯·æ±‚å®Œæˆåçš„å¼‚æ­¥å›è°ƒï¼Œæ˜¯æ€ä¹ˆå’Œä¸»isolateçº¿ç¨‹è¿›è¡Œäº¤äº’çš„ï¼Œåº•è¡¬å±‚é€»è¾‘æ˜¯æ€ä¹ˆæ ·çš„","like_count":0},{"had_liked":false,"id":295648,"user_name":"å¼ å¤§å°‘","can_delete":false,"product_type":"c1","uid":1469709,"ip_address":"","ucode":"216081FF1CA061","user_header":"https://static001.geekbang.org/account/avatar/00/16/6d/0d/bf246ff1.jpg","comment_is_top":false,"comment_ctime":1622530020,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622530020","product_id":100031001,"comment_content":"è€å¸ˆï¼Œç»˜åˆ¶åŠ¨ç”»çš„animationæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯flutterç³»ç»Ÿçš„ç‹¬ç«‹çº¿ç¨‹åšæ”¯æŒï¼Ÿä¸ç„¶å²‚ä¸æ˜¯ä¹Ÿå’Œäº‹ä»¶é˜Ÿåˆ—æœ‰å†²çªï¼Ÿ<br>æ¯”å¦‚è¦å®ç°ä¸€ä¸ªåŠ¨ç”»ï¼Œè€Œåœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­åŠ è½½ç½‘ç»œæˆ–è€…æ–‡ä»¶ï¼ŒæŒ‰ç…§å•çº¿ç¨‹ä»£ç é¡ºåºå¯èƒ½å¦‚ä¸‹æ­¥éª¤<br>1ï¼ŒåŠ è½½ç½‘ç»œæˆ–åŠ¨ç”»éƒ¨åˆ†ä¼šé€šè¿‡futureåŠ åˆ°äº‹ä»¶é˜Ÿåˆ—<br>2ï¼ŒåŠ¨ç”»éƒ¨åˆ†å¼€å§‹æ‰§è¡Œ<br>æ­¤æ—¶ç†è®ºä¸Šæ—¶åŠ¨ç”»å¼€å§‹æ‰§è¡Œçš„åŒæ—¶ï¼Œåº”è¯¥ç®—æ˜¯æœ¬æ¬¡äº‹ä»¶ç»“æŸï¼Œå¼€å§‹èµ°äº‹ä»¶é˜Ÿåˆ—çš„åŠ è½½æ“ä½œå§ï¼Ÿ","like_count":0},{"had_liked":false,"id":230317,"user_name":"yl","can_delete":false,"product_type":"c1","uid":1330401,"ip_address":"","ucode":"6AFB54FB11EEC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/e1/49db2fc3.jpg","comment_is_top":false,"comment_ctime":1593346252,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593346252","product_id":100031001,"comment_content":"&#47;&#47;ä¸¤ä¸ªæ–¹æ³•éƒ½éœ€è¦æ”¹é€ ä¸‹ï¼Œç¬¬ä¸€ä¸ªåªè¦æŠŠä¸»çš„portä¼ é€’ç»™å­isolateï¼Œå­isolateé‡Œåšè®¡ç®—å°±è¡Œäº†ï¼Œåœ¨ä¸»çš„portéœ€è¦åšç±»å‹åˆ¤æ–­<br>  &#47;&#47; å¹¶å‘è®¡ç®—é˜¶ä¹˜<br>  Future&lt;void&gt; asyncFactoriali(n) async {<br>    final response = ReceivePort(); &#47;&#47; åˆ›å»ºç®¡é“<br>    &#47;&#47; åˆ›å»ºå¹¶å‘ Isolateï¼Œå¹¶ä¼ å…¥ç®¡é“<br>    await Isolate.spawn(_isolate, response.sendPort);<br>    &#47;&#47; ç­‰å¾… Isolate å›ä¼ ç®¡é“<br>    response.listen((message) {<br>      if (message is SendPort) {<br>        message.send(n);<br>      } else {<br>        print(&#39;IsolateTest123ï¼š$message&#39;);<br>      }<br>    });<br>  }<br><br>&#47;&#47;Isolate å‡½æ•°ä½“ï¼Œå‚æ•°æ˜¯ä¸» Isolate ä¼ å…¥çš„ç®¡é“<br>  static _isolate(initialReplyTo) async {<br>    final port = ReceivePort(); &#47;&#47; åˆ›å»ºç®¡é“<br>    initialReplyTo.send(port.sendPort); &#47;&#47; å¾€ä¸» Isolate å›ä¼ ç®¡é“<br>    port.listen((message) {<br>      if (message is int) {<br>        initialReplyTo.send(syncFactorial(message));<br>      }<br>    });<br>  }","like_count":0},{"had_liked":false,"id":227619,"user_name":"è‚–","can_delete":false,"product_type":"c1","uid":1529343,"ip_address":"","ucode":"763D0C2871B92F","user_header":"https://static001.geekbang.org/account/avatar/00/17/55/ff/1489d0fb.jpg","comment_is_top":false,"comment_ctime":1592443539,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592443539","product_id":100031001,"comment_content":"<br>&#47;&#47;å£°æ˜äº†ä¸€ä¸ªå»¶è¿Ÿ2ç§’è¿”å›Helloçš„Futureï¼Œå¹¶æ³¨å†Œäº†ä¸€ä¸ªthenè¿”å›æ‹¼æ¥åçš„Hello 2019<br>Future&lt;String&gt; fetchContent() =&gt; <br><br><br>print(&quot;12345678909876543&quot;);&#47;&#47;è‡ªå·±æ·»åŠ çš„ï¼›<br>  Future&lt;String&gt;.delayed(Duration(seconds:2), () =&gt; &quot;Hello&quot;)<br>    .then((x) =&gt; &quot;$x 2019&quot;);<br>&#47;&#47;å¼‚æ­¥å‡½æ•°ä¼šåŒæ­¥ç­‰å¾…Hello 2019çš„è¿”å›ï¼Œå¹¶æ‰“å°<br>func() async =&gt; print(await fetchContent());<br><br>main() {<br>  print(&quot;func before&quot;);<br>  func();<br>  print(&quot;func after&quot;);<br>}<br>è€å¸ˆï¼Œä¸ªä¾‹å­ä¸­æ˜¯å§fetchContentå‡½æ•°åŠ å…¥äº†é˜Ÿåˆ—å—ï¼Ÿè¿˜æ˜¯æŠŠawaitå’ŒFuture&lt;String&gt;.delayed(ã€‚ã€‚ã€‚åŠå…¶ä¸‹æ–‡åŠ å…¥é˜Ÿåˆ—ï¼Ÿ","like_count":0},{"had_liked":false,"id":223732,"user_name":"smilingmiao","can_delete":false,"product_type":"c1","uid":1157910,"ip_address":"","ucode":"B48F429563EF74","user_header":"https://static001.geekbang.org/account/avatar/00/11/ab/16/0f83cab6.jpg","comment_is_top":false,"comment_ctime":1591167632,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591167632","product_id":100031001,"comment_content":"Future&lt;String&gt; fetchContent() =&gt; <br>Future&lt;String&gt;.delayed(Duration(seconds: 2), () =&gt; &quot;Hello&quot;)<br>.then((x) =&gt; &quot;$x 2020&quot;).then((x) =&gt; &quot;$x 2021&quot;);<br><br>func() async =&gt; print(await fetchContent());<br><br>void main() async {<br>  print(&quot;func before&quot;);<br>  await func();<br>  print(&quot;func after&quot;);<br>}<br><br>&#47;&#47; è¾“å‡º<br>func before<br>Hello 2020 2021<br>func after","like_count":0},{"had_liked":false,"id":216865,"user_name":"å°ç§‹","can_delete":false,"product_type":"c1","uid":1213880,"ip_address":"","ucode":"68497F5A66A3D1","user_header":"https://static001.geekbang.org/account/avatar/00/12/85/b8/7f146b83.jpg","comment_is_top":false,"comment_ctime":1589357098,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589357098","product_id":100031001,"comment_content":"Isolateä»£ç ç¤ºä¾‹ä¸­ await Isolate.spawn(_isolate,response.sendPort);æŠ¥ä»¥ä¸‹è¿™ç§é”™è¯¯æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªæœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„å—ï¼Ÿ<br>Isolate.spawn expects to be passed a static or top-level function","like_count":0},{"had_liked":false,"id":216475,"user_name":"é™ˆæ–Œ","can_delete":false,"product_type":"c1","uid":1450358,"ip_address":"","ucode":"B3F3A2117F8455","user_header":"https://static001.geekbang.org/account/avatar/00/16/21/76/0e443bcb.jpg","comment_is_top":false,"comment_ctime":1589268135,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589268135","product_id":100031001,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹è¿™ä¸ªåœºæ™¯<br>void methodA() async {<br>    await netWorkA().then((res){<br>        print(â€œnetWorkA()å“åº”â€);<br>    });<br>    await netWorkB().then((res){<br>        print(â€œnetWorkB()å“åº”â€);<br>    });<br>}<br>æ‰§è¡ŒmethodAçš„æ—¶å€™ï¼Œä¼šé¡ºåºè°ƒç”¨åå°æ¥å£netWorkAã€netWorkBï¼Œä½†æ˜¯å“åº”çš„æ—¶å€™ï¼Œä¸¤ä¸ªprintçš„è¾“å‡ºé¡ºåºæ˜¯ä¸ä¸€å®šçš„å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":211454,"user_name":"çŒ«çŒ«","can_delete":false,"product_type":"c1","uid":1518041,"ip_address":"","ucode":"46E5356348DA36","user_header":"https://static001.geekbang.org/account/avatar/00/17/29/d9/4358d6fb.jpg","comment_is_top":false,"comment_ctime":1587965868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587965868","product_id":100031001,"comment_content":"thenä¸­æœ‰futureçš„è¯ï¼Œåç»­çš„thenä¸‹æ¬¡æ‰§è¡Œ<br>thenä¸­æœ‰microtaskçš„è¯ï¼Œåç»­çš„thenç»§ç»­æ‰§è¡Œ","like_count":0},{"had_liked":false,"id":209440,"user_name":"å¼ è®­åš-forrest","can_delete":false,"product_type":"c1","uid":1331072,"ip_address":"","ucode":"9A50F9BD3FFDE1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIdTsqPhlVH3TFElzic8422uBDelRjYiaktCJRmIRpLrgBBfBKnSO9PlbHibnHAc9cQEmLHes3fayEw/132","comment_is_top":false,"comment_ctime":1587549567,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1587549567","product_id":100031001,"comment_content":"Isolate çš„æ–¹æ³•ä¸ºå•¥è¦æ±‚æ˜¯staticçš„","like_count":0,"discussions":[{"author":{"id":1129422,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3b/ce/88bf2008.jpg","nickname":"æµªè¿¹æ±Ÿæ¹–","note":"","ucode":"514459670AC242","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552486,"discussion_content":"éé™æ€æ–¹æ³•çš„è°ƒç”¨ä¾èµ–å¯¹è±¡æœ¬èº«ï¼Œä½† Isolate ä¸èƒ½å…±äº«å†…å­˜ï¼Œæ— æ³•è®¿é—®å¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645495550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200157,"user_name":"è‚–","can_delete":false,"product_type":"c1","uid":1529343,"ip_address":"","ucode":"763D0C2871B92F","user_header":"https://static001.geekbang.org/account/avatar/00/17/55/ff/1489d0fb.jpg","comment_is_top":false,"comment_ctime":1585551541,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585551541","product_id":100031001,"comment_content":"void main() async{<br>    print(&#39;f1&#39;);<br>    print(await methodC());<br>    print(&#39;f2&#39;);<br>    Future(() =&gt; print(&#39;f3&#39;));<br>    methodD();<br>}<br><br>methodC() {<br>    print(&#39;f4&#39;);<br>    return  Future.delayed(Duration(seconds: 2),(){return Future.value(&quot;f5&quot;);});<br>}<br><br>methodD(){<br>  print(&#39;f6&#39;);<br>}<br><br>f1<br>f4<br>f5<br>f2<br>f6<br>f3<br>è€å¸ˆä»¬ï¼šè¿™ä¸ªæ‰“å° f4 f5ä¸ºä»€ä¹ˆåœ¨f1 f2ä¹‹é—´ï¼Œawait ä¸æ˜¯å¼‚æ­¥ç­‰å¾…å—ï¼Ÿ await methodC()åŠ å…¥even é˜Ÿåˆ—ï¼Œå…ˆæ‰“å° f2ï¼ŒFuture(() =&gt; print(&#39;f3&#39;));  åŠ å…¥é˜Ÿåˆ— ç„¶åæ‰“å°f6 ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":183933,"user_name":"Geek_473879","can_delete":false,"product_type":"c1","uid":1843920,"ip_address":"","ucode":"D7F4C74F6D0030","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7h2t7ZmOZEpzazicoHF0ricTvaObicQCYZpolMz38tnPzcV1KywglcTibf6yPY0JLc4PWA3LtapgJKg/132","comment_is_top":false,"comment_ctime":1583163893,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583163893","product_id":100031001,"comment_content":"main()  {<br>    print( fe());&#47;&#47;ç­‰å¾…Hello 2019çš„è¿”å›<br><br>    print(&#39;sdasd&#39;);<br>    Future(() =&gt; print(&#39;f1&#39;))  .then((_) async =&gt; await Future(() =&gt; print(&#39;f2&#39;)))  .then((_) =&gt; print(&#39;f3&#39;));Future(() =&gt; print(&#39;f4&#39;));<br>}<br><br>&#47;&#47;å£°æ˜äº†ä¸€ä¸ªå»¶è¿Ÿ3ç§’è¿”å›Helloçš„Futureï¼Œå¹¶æ³¨å†Œäº†ä¸€ä¸ªthenè¿”å›æ‹¼æ¥åçš„Hello 2019<br>Future&lt;String&gt; fe()=&gt;<br>    Future&lt;String&gt;.delayed(Duration(seconds: 3),() =&gt; &#39;hello&#39;).<br>    then((x) =&gt; &quot;$x 2019&quot;);<br>è¿™ä¸ªä¸ºå•¥ç»“æœæ˜¯Instance of &#39;Future&lt;String&gt;&#39;<br>sdasd<br>f1<br>f4<br>f2<br>f3","like_count":0},{"had_liked":false,"id":175947,"user_name":"(Jet)é»„ä»²å¹³","can_delete":false,"product_type":"c1","uid":1244363,"ip_address":"","ucode":"2AF4F9B460795C","user_header":"https://static001.geekbang.org/account/avatar/00/12/fc/cb/5e79c6ed.jpg","comment_is_top":false,"comment_ctime":1580890129,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580890129","product_id":100031001,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®â€œawait ä¸ async åªå¯¹è°ƒç”¨ä¸Šä¸‹æ–‡çš„å‡½æ•°æœ‰æ•ˆâ€ã€‚è¿™é‡Œçš„â€œä¸Šä¸‹æ–‡â€è¦å¦‚ä½•ç†è§£","like_count":0},{"had_liked":false,"id":172004,"user_name":"ssala","can_delete":false,"product_type":"c1","uid":1005356,"ip_address":"","ucode":"CCD82C81756FC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/2c/b0793828.jpg","comment_is_top":false,"comment_ctime":1579069343,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579069343","product_id":100031001,"comment_content":"è€å¸ˆï¼Œdartä»äº‹ä»¶å¾ªç¯ä¸­è·å–äº‹ä»¶å¹¶å¤„ç†ï¼Œé‚£è°è´Ÿè´£å‘äº‹ä»¶é˜Ÿåˆ—ä¸­æ·»åŠ äº‹ä»¶å‘¢ï¼Ÿæˆ–è€…è¯´æˆ‘ä»¬çš„å¼‚æ­¥ä»»åŠ¡æ˜¯åœ¨ä½•æ—¶ä»¥ä½•ç§æ–¹å¼åŠ å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":170238,"user_name":"æœ‰ç¯æ— æœˆä¸å¨±äºº","can_delete":false,"product_type":"c1","uid":1805761,"ip_address":"","ucode":"5DA936A8782A1C","user_header":"https://static001.geekbang.org/account/avatar/00/1b/8d/c1/1add352c.jpg","comment_is_top":false,"comment_ctime":1578555432,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1578555432","product_id":100031001,"comment_content":"è€å¸ˆ,ä½ è¿™æ–‡æ¡£æ²¡æœ‰å…³äºflutterå’Œnativeé€šä¿¡çš„å†…å®¹ä»‹ç»?","like_count":0,"discussions":[{"author":{"id":1126460,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/3c/c2c72e28.jpg","nickname":"æ˜Ÿæ˜Ÿ","note":"","ucode":"013714D9EF1847","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205818,"discussion_content":"Method Channel\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584345802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170192,"user_name":"æœ‰ç¯æ— æœˆä¸å¨±äºº","can_delete":false,"product_type":"c1","uid":1805761,"ip_address":"","ucode":"5DA936A8782A1C","user_header":"https://static001.geekbang.org/account/avatar/00/1b/8d/c1/1add352c.jpg","comment_is_top":false,"comment_ctime":1578545891,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578545891","product_id":100031001,"comment_content":"è€å¸ˆ,flutterå’Œnativeçš„é€šä¿¡æ˜¯ä¸æ˜¯ä¹Ÿåªæ˜¯åœ¨ä¸»isolateé‡Œå®ç°çš„?ä¸€ä¸ª channelçš„è¯,åœ¨é‡åˆ°å¹¶å‘é€šä¿¡çš„æ—¶å€™æ˜¯ä¸æ˜¯å°±å¯ä»¥ç”¨futureé¢„é˜²é€šé“è¢«é˜»å¡?","like_count":0},{"had_liked":false,"id":165278,"user_name":"cv0cv0","can_delete":false,"product_type":"c1","uid":1360093,"ip_address":"","ucode":"93FF9277F03FD0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEIsgI4ub1VOKWtVOfouAzSqx8Yt8ibQEsAnwNJsJHmuJzzpQqG79HullvYwpic8hgiclgON2GwXSjw/132","comment_is_top":false,"comment_ctime":1577192386,"is_pvip":false,"replies":[{"id":"63407","content":"import &#39;package:flutter&#47;foundation.dart&#39;;<br>","user_name":"ä½œè€…å›å¤","comment_id":165278,"uid":"1088582","ip_address":"","utype":1,"ctime":1577439923,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1577192386","product_id":100031001,"comment_content":"compute å‡½æ•°æ˜¯ä»€ä¹ˆåŒ…ï¼Ÿè‡ªåŠ¨å¯¼å…¥æ‰¾ä¸åˆ°è¿™ä¸ªå‡½æ•°ã€‚","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479104,"discussion_content":"import &amp;#39;package:flutter/foundation.dart&amp;#39;;\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577439923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146973,"user_name":"èœå¤´","can_delete":false,"product_type":"c1","uid":1456964,"ip_address":"","ucode":"C5E95519F9EA21","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","comment_is_top":false,"comment_ctime":1572747561,"is_pvip":false,"replies":[{"id":"59789","content":"1.ä½ è¿™ä¸ªä»£ç ç¼–è¯‘ä¸é€šè¿‡å§<br>2.å•è¡Œç®­å¤´å‡½æ•°çš„thenæ˜¯Futureï¼Œå’Œå‡½æ•°ä½“å†…æœ‰Futureä¸æ˜¯ä¸€å›äº‹<br>","user_name":"ä½œè€…å›å¤","comment_id":146973,"uid":"1088582","ip_address":"","utype":1,"ctime":1574754294,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":2,"race_medal":0,"score":"1572747561","product_id":100031001,"comment_content":"è€å¸ˆä¸Šé¢çš„ä¾‹å­ä¸­æœ‰ä¸€ä¸ªç–‘é—®<br>&#47;&#47;å£°æ˜äº†ä¸€ä¸ªåŒ¿åFutureï¼Œå¹¶æ³¨å†Œäº†ä¸¤ä¸ªthenã€‚ç¬¬ä¸€ä¸ªthenæ˜¯ä¸€ä¸ªFuture<br><br>Future f6 = Future(() =&gt; print(&#39;f6&#39;))<br><br>f6.then((_) =&gt; f7 = Future(() =&gt; print(&#39;f7&#39;)); return f7)<br>.then((_) =&gt; print(&#39;f8&#39;));<br><br>è€å¸ˆè¿™å—å„¿çš„è°ƒç”¨æ—¶åºä¸ºä»€ä¹ˆä¸æ˜¯ f6 f8 ..... f7<br><br>f7 ä¼šè¢«æ”¾åˆ°äº‹ä»¶é˜Ÿåˆ—é‡Œé¢äº† ä½†æ˜¯f6çš„ç¬¬äºŒä¸ª .then(() =&gt;print(&#39;8&#39;)) ä¸ºä»€ä¹ˆä¹Ÿä¼šè¢«æ”¾åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­<br>","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473081,"discussion_content":"1.ä½ è¿™ä¸ªä»£ç ç¼–è¯‘ä¸é€šè¿‡å§\n2.å•è¡Œç®­å¤´å‡½æ•°çš„thenæ˜¯Futureï¼Œå’Œå‡½æ•°ä½“å†…æœ‰Futureä¸æ˜¯ä¸€å›äº‹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574754294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1089359,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9f/4f/1d14d424.jpg","nickname":"éš”å£å°åœŸè±†","note":"","ucode":"DCCFEC661B9199","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248051,"discussion_content":"è€å¸ˆ, æˆ‘ä¹Ÿæœ‰ä¸€æ ·çš„é—®é¢˜, ä¸ºä»€ä¹ˆå‡½æ•°ä½“å†…çš„Futureå’Œ return Future ä¼šä½¿ç»“æœå¤§ä¸ä¸€æ ·? è°¢è°¢å›ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587829675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146970,"user_name":"èœå¤´","can_delete":false,"product_type":"c1","uid":1456964,"ip_address":"","ucode":"C5E95519F9EA21","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","comment_is_top":false,"comment_ctime":1572747271,"is_pvip":false,"replies":[{"id":"59785","content":"f7è¿™ä¸ª then æ˜¯ä¸€ä¸ª Future å¼‚æ­¥ä»»åŠ¡ï¼Œå› æ­¤è¿™ä¸ª thenï¼Œä»¥åŠåç»­çš„ then éƒ½è¢«æ”¾å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­äº†","user_name":"ä½œè€…å›å¤","comment_id":146970,"uid":"1088582","ip_address":"","utype":1,"ctime":1574753768,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1572747271","product_id":100031001,"comment_content":"è€å¸ˆä¸Šé¢çš„ä¾‹å­ä¸­æœ‰ä¸€ä¸ªç–‘é—®<br>&#47;&#47;å£°æ˜äº†ä¸€ä¸ªåŒ¿åFutureï¼Œå¹¶æ³¨å†Œäº†ä¸¤ä¸ªthenã€‚ç¬¬ä¸€ä¸ªthenæ˜¯ä¸€ä¸ªFuture<br><br>Future f6 = Future(() =&gt; print(&#39;f6&#39;))<br><br>f6.then((_) =&gt; f7 = Future(() =&gt; print(&#39;f7&#39;)); return f7)<br>.then((_) =&gt; print(&#39;f8&#39;));<br><br>è€å¸ˆè¿™å—å„¿çš„è°ƒç”¨æ—¶åºä¸ºä»€ä¹ˆä¸æ˜¯ f6 f8 ..... f7<br>Future æ‰§è¡Œçš„ then ä¸æ˜¯å’Œ Future ä¸€ä¸ªäº‹ä»¶å¾ªç¯å—","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473078,"discussion_content":"f7è¿™ä¸ª then æ˜¯ä¸€ä¸ª Future å¼‚æ­¥ä»»åŠ¡ï¼Œå› æ­¤è¿™ä¸ª thenï¼Œä»¥åŠåç»­çš„ then éƒ½è¢«æ”¾å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574753768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142566,"user_name":"å·«å±±è€å¦–","can_delete":false,"product_type":"c1","uid":1056037,"ip_address":"","ucode":"B35E2CF1B3B04E","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/25/c4cc1e9f.jpg","comment_is_top":false,"comment_ctime":1571397459,"is_pvip":true,"replies":[{"id":"56207","content":"ä¸å¯¹å“¦ï¼Œæ³¨æ„çœ‹å…¶å®æˆ‘åœ¨å¹¶å‘Isolateä¸­å‘äº†ä¸¤æ¬¡SendPort","user_name":"ä½œè€…å›å¤","comment_id":142566,"uid":"1088582","ip_address":"","utype":1,"ctime":1572322823,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":1,"score":"1571397459","product_id":100031001,"comment_content":"ç¬¬ä¸€ä¸ªæ€è€ƒé¢˜ï¼Œæ˜¯å› ä¸ºisolateæ˜¯å•å‘é€šä¿¡çš„ï¼Œè¦è¾¾åˆ°åŒå‘é€šä¿¡éœ€è¦å›ä¼ ä¸€ä¸ªå‘é€é€šé“ï¼Œæ‰€ä»¥éœ€è¦ä¸¤ä¸ªSendPortã€‚ ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471180,"discussion_content":"ä¸å¯¹å“¦ï¼Œæ³¨æ„çœ‹å…¶å®æˆ‘åœ¨å¹¶å‘Isolateä¸­å‘äº†ä¸¤æ¬¡SendPort","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572322823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130568,"user_name":"C","can_delete":false,"product_type":"c1","uid":1599441,"ip_address":"","ucode":"C5845E7EC389EC","user_header":"https://static001.geekbang.org/account/avatar/00/18/67/d1/1c69ad22.jpg","comment_is_top":false,"comment_ctime":1567484773,"is_pvip":false,"replies":[{"id":"48901","content":"Future f = Future(() =&gt; print(&#39;f1&#39;));<br>f.then((_) =&gt; Future(() =&gt; print(&#39;f2&#39;)));<br>f.then((_) =&gt; print(&#39;f3&#39;));<br>Future(() =&gt; print(&#39;f4&#39;));<br>è¿™ä¹ˆçœ‹æ˜ç™½äº†ä¹ˆ","user_name":"ä½œè€…å›å¤","comment_id":130568,"uid":"1088582","ip_address":"","utype":1,"ctime":1567511040,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":3,"race_medal":0,"score":"1567484773","product_id":100031001,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼š<br>Future(() =&gt; print(&quot;f1&quot;))<br>  ..then((_) =&gt; Future(() =&gt; print(&quot;f2&quot;)))<br>  ..then((_) =&gt; print(&quot;f3&quot;));<br>Future(() =&gt; print(&quot;f4&quot;));<br>è¿™æ ·æ‰“å°å‡ºæ¥çš„ç»“æœä¸ºä»€ä¹ˆæ˜¯ f1 f3 f4 f2","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466013,"discussion_content":"Future f = Future(() =&amp;gt; print(&amp;#39;f1&amp;#39;));\nf.then((_) =&amp;gt; Future(() =&amp;gt; print(&amp;#39;f2&amp;#39;)));\nf.then((_) =&amp;gt; print(&amp;#39;f3&amp;#39;));\nFuture(() =&amp;gt; print(&amp;#39;f4&amp;#39;));\nè¿™ä¹ˆçœ‹æ˜ç™½äº†ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567511040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1456964,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","nickname":"èœå¤´","note":"","ucode":"C5E95519F9EA21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42666,"discussion_content":"è€å¸ˆ æˆ‘çŸ¥é“äº†\n\nå› ä¸º Future(() => print(&#39;f6&#39;))\n .then((_) => Future(() => print(&#39;f7&#39;))\n.then((_) => print(&#39;f8&#39;))\n\nå¯ä»¥æ”¹å†™ä¸º\nFuture f6 = Future(() => print(&#39;f6&#39;);\nFuture f8 = f6.then(() => Future(() => print(f7)));\nf8.then(() => print(&#39;f8&#39;)\n\nè€Œä¸æ˜¯ f6.then(() => print(&#39;f8&#39;))\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572750571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1456964,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","nickname":"èœå¤´","note":"","ucode":"C5E95519F9EA21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42663,"discussion_content":"//å£°æ˜äº†ä¸€ä¸ªåŒ¿åFutureï¼Œå¹¶æ³¨å†Œäº†ä¸¤ä¸ªthenã€‚ç¬¬ä¸€ä¸ªthenæ˜¯ä¸€ä¸ªFuture\nFuture(() => print(&#39;f6&#39;)) \n .then((_) => Future(() => print(&#39;f7&#39;)))\n  .then((_) => print(&#39;f8&#39;));\n//å£°æ˜äº†ä¸€ä¸ªåŒ¿åFutureFuture(() => print(&#39;f9&#39;));\nè¿™ä¸ªçš„æ‰§è¡Œé¡ºåºä¸ºä»€ä¹ˆæ˜¯ f6 f9 f7 f8\nè€Œä¸æ˜¯ f6 f8 f9 f7","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572748256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129317,"user_name":"å°æ°´æ»´","can_delete":false,"product_type":"c1","uid":1411555,"ip_address":"","ucode":"559FAF5F117BB5","user_header":"https://static001.geekbang.org/account/avatar/00/15/89/e3/aa57d3b2.jpg","comment_is_top":false,"comment_ctime":1567086331,"is_pvip":false,"replies":[{"id":"48121","content":"ä¸å¯ä»¥ï¼Œå› ä¸ºèµ„æºå®Œå…¨éš”ç¦»","user_name":"ä½œè€…å›å¤","comment_id":129317,"uid":"1088582","ip_address":"","utype":1,"ctime":1567097002,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1567086331","product_id":100031001,"comment_content":"è¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¹¶å‘Isolateä¸­å¯ä»¥æ“ä½œwidgetå—","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465396,"discussion_content":"ä¸å¯ä»¥ï¼Œå› ä¸ºèµ„æºå®Œå…¨éš”ç¦»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567097002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129314,"user_name":"å°æ°´æ»´","can_delete":false,"product_type":"c1","uid":1411555,"ip_address":"","ucode":"559FAF5F117BB5","user_header":"https://static001.geekbang.org/account/avatar/00/15/89/e3/aa57d3b2.jpg","comment_is_top":false,"comment_ctime":1567086207,"is_pvip":false,"replies":[{"id":"48125","content":"èµã€‚æœ‰ä¸ªå°bugï¼šresponseæ²¡æœ‰closeæ‰","user_name":"ä½œè€…å›å¤","comment_id":129314,"uid":"1088582","ip_address":"","utype":1,"ctime":1567097595,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1567086207","product_id":100031001,"comment_content":"testIsolate() async{<br>  print(await asyncFactoriali(4));<br>}<br>&#47;&#47; åŒæ­¥è®¡ç®—é˜¶ä¹˜<br>int syncFactorial(n) =&gt; n &lt; 2 ? n : n * syncFactorial(n-1);<br><br><br>&#47;&#47; å¹¶å‘è®¡ç®—é˜¶ä¹˜<br>Future&lt;dynamic&gt; asyncFactoriali(n) async{<br>  final response = ReceivePort();&#47;&#47; åˆ›å»ºç®¡é“<br>  &#47;&#47; åˆ›å»ºå¹¶å‘ Isolateï¼Œå¹¶ä¼ å…¥ç®¡é“<br>  await Isolate.spawn(_isolate,response.sendPort);<br>  response.listen((data){<br>    if (data is SendPort){<br>      data.send(n);<br>    } else {<br>      print(&quot;&gt;&gt;&gt;&gt;&gt;&gt;$data&quot;);<br>    }<br>  });<br>}<br><br>&#47;&#47;Isolate å‡½æ•°ä½“ï¼Œå‚æ•°æ˜¯ä¸» Isolate ä¼ å…¥çš„ç®¡é“<br>_isolate(initialReplyTo) async {<br>  final port = ReceivePort();&#47;&#47; åˆ›å»ºç®¡é“<br>  initialReplyTo.send(port.sendPort);&#47;&#47; å¾€ä¸» Isolate å›ä¼ ç®¡é“<br>  final message = await port.first as int;&#47;&#47; ç­‰å¾…ä¸» Isolate å‘é€æ¶ˆæ¯ (å‚æ•°å’Œå›ä¼ ç»“æœçš„ç®¡é“)<br>  initialReplyTo.send(syncFactorial(message));&#47;&#47; è°ƒç”¨åŒæ­¥è®¡ç®—é˜¶ä¹˜çš„å‡½æ•°å›ä¼ ç»“æœ<br>}<br><br>","like_count":0,"discussions":[{"author":{"id":1742621,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/97/1d/4bac8dbf.jpg","nickname":"VI jolie","note":"","ucode":"1CBC214FFEB546","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329058,"discussion_content":"ä½ è¿™ä¸ªçš„è¿”å›å€¼æ˜¯nullå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606305387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129307,"user_name":"å°æ°´æ»´","can_delete":false,"product_type":"c1","uid":1411555,"ip_address":"","ucode":"559FAF5F117BB5","user_header":"https://static001.geekbang.org/account/avatar/00/15/89/e3/aa57d3b2.jpg","comment_is_top":false,"comment_ctime":1567084319,"is_pvip":false,"replies":[{"id":"48122","content":"å†…å­˜å˜é‡åœ¨Isolateä¹‹é—´æ˜¯ä¸å…±äº«çš„ï¼Œå¯¹äºä½ è¿™ä¸ªcaseï¼ŒIsolateä¹‹é—´ä¼šå¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œå¤åˆ¶","user_name":"ä½œè€…å›å¤","comment_id":129307,"uid":"1088582","ip_address":"","utype":1,"ctime":1567097091,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":2,"race_medal":0,"score":"1567084319","product_id":100031001,"comment_content":"å¦‚æœä¸»Isolateåˆ›å»ºä¸¤ä¸ªå¹¶å‘Isolateï¼Œç„¶åæŠŠä¸€ä¸ªæ•°ç»„åˆ†åˆ«ä¼ é€’ç»™ä¸¤ä¸ªå¹¶å‘Isolateï¼Œä¸¤ä¸ªå¹¶å‘Isolateéƒ½å»æ“ä½œæ•°ç»„ï¼Œè¿™æ ·å®‰å…¨å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465391,"discussion_content":"å†…å­˜å˜é‡åœ¨Isolateä¹‹é—´æ˜¯ä¸å…±äº«çš„ï¼Œå¯¹äºä½ è¿™ä¸ªcaseï¼ŒIsolateä¹‹é—´ä¼šå¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œå¤åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567097091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1411555,"avatar":"https://static001.geekbang.org/account/avatar/00/15/89/e3/aa57d3b2.jpg","nickname":"å°æ°´æ»´","note":"","ucode":"559FAF5F117BB5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6784,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘å†™demoå·²ç»éªŒè¯ï¼Œç¡®å®æ˜¯æ‹·è´ä¸€ä»½ï¼Œæ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567097155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129261,"user_name":"bo_oc","can_delete":false,"product_type":"c1","uid":1639900,"ip_address":"","ucode":"87E64362EBFF6B","user_header":"","comment_is_top":false,"comment_ctime":1567072139,"is_pvip":false,"replies":[{"id":"48090","content":"f3ä¸éœ€è¦microtask","user_name":"ä½œè€…å›å¤","comment_id":129261,"uid":"1088582","ip_address":"","utype":1,"ctime":1567077130,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1567072139","product_id":100031001,"comment_content":"Future(() =&gt; print(&#39;f1&#39;))<br>        .then((_){ scheduleMicrotask(()=&gt;print(&#39;f2&#39;)); })<br>        .then((_){ scheduleMicrotask(()=&gt;print(&#39;f3&#39;)); });<br>    Future(() =&gt; print(&#39;f4&#39;));","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465367,"discussion_content":"f3ä¸éœ€è¦microtask","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567077130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128994,"user_name":"ptlCoder","can_delete":false,"product_type":"c1","uid":1029656,"ip_address":"","ucode":"B7CF1C4A5970B9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b6/18/ede273fe.jpg","comment_is_top":false,"comment_ctime":1567002974,"is_pvip":false,"replies":[{"id":"48092","content":"ä¸å¤šï¼Œå¤§å¤šæ•°å¹¶å‘ä»»åŠ¡çš„åœºæ™¯é€šè¿‡computeå°±å¯ä»¥æå®šäº†","user_name":"ä½œè€…å›å¤","comment_id":128994,"uid":"1088582","ip_address":"","utype":1,"ctime":1567077579,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1567002974","product_id":100031001,"comment_content":"åƒç›´æ¥ä½¿ç”¨isolateè¿™ç§ç®¡é“æœºåˆ¶çš„åœºæ™¯å¤šä¸å¤šï¼Ÿä¸ªäººæ„Ÿè§‰è¿™ç§å†™æ³•ç¹çä¸å®¹æ˜“æ‡‚","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465216,"discussion_content":"ä¸å¤šï¼Œå¤§å¤šæ•°å¹¶å‘ä»»åŠ¡çš„åœºæ™¯é€šè¿‡computeå°±å¯ä»¥æå®šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567077579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128932,"user_name":"å¤§åœŸè±†","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1566986205,"is_pvip":true,"replies":[{"id":"47863","content":"æ˜¯çš„ï¼Œä¸è¿‡jsä¹Ÿæä¾›äº†workeræœºåˆ¶ï¼Œå¯ä»¥åšä¸€äº›ç›¸å¯¹ç‹¬ç«‹çš„äº‹æƒ…","user_name":"ä½œè€…å›å¤","comment_id":128932,"uid":"1088582","ip_address":"","utype":1,"ctime":1566986845,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1566986205","product_id":100031001,"comment_content":"èƒ½å¦è¿™æ ·è®¤ä¸ºï¼Œdartçš„è¿™ç§çº¿ç¨‹æ¨¡å‹æ—¢è§£å†³äº†Android&#47;iOSè¿™ç§å¤šçº¿ç¨‹æœºåˆ¶å› ä¸ºçº¿ç¨‹æŠ¢å ç­‰åŸå› å¯¼è‡´IOå¯†é›†å‹è®¡ç®—ä¸ç»™åŠ›ï¼Œä¹Ÿè§£å†³äº†jsè¿™ç§çº¯å•çº¿ç¨‹æ¨¡å‹å¯¼è‡´çš„CPUå¯†é›†å‹è®¡ç®—ä¸ç»™åŠ›çš„é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465183,"discussion_content":"æ˜¯çš„ï¼Œä¸è¿‡jsä¹Ÿæä¾›äº†workeræœºåˆ¶ï¼Œå¯ä»¥åšä¸€äº›ç›¸å¯¹ç‹¬ç«‹çš„äº‹æƒ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566986845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128925,"user_name":"å¤§åœŸè±†","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1566984980,"is_pvip":true,"replies":[{"id":"47862","content":"jsä¹Ÿå¯ä»¥å¼€web workerï¼Œå…¶å®æ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","comment_id":128925,"uid":"1088582","ip_address":"","utype":1,"ctime":1566986775,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1566984980","product_id":100031001,"comment_content":"è€å¸ˆï¼Œèƒ½å¦è¿™æ ·ç†è§£ï¼Œjsæ˜¯å•çº¿ç¨‹ï¼Œç„¶åä¸€ä¸ªäº‹ä»¶å¾ªç¯çš„æ¨¡å‹ï¼Œå’Œflutterä¸€æ ·ï¼ŒI&#47;Oæ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥æ–‡ä»¶ï¼Œç½‘ç»œéƒ½æ²¡é—®é¢˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªWhile(true)çš„æ­»å¾ªç¯ï¼Œjså°±å¡æ­»äº†ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚è€Œè¿™ç§æƒ…å†µflutteræ²¡é—®é¢˜ï¼ŒWhile(true)çš„æ­»å¾ªç¯å¯ä»¥æ”¾åˆ°å¦å¤–ä¸€ä¸ªisolateé‡Œé¢ï¼Œå†…å­˜å’Œä¸»isolateä¹Ÿæ˜¯éš”ç¦»çš„ï¼Œä¸å½±å“ä¸»isolateå’Œä¸»çº¿ç¨‹ã€‚","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465179,"discussion_content":"jsä¹Ÿå¯ä»¥å¼€web workerï¼Œå…¶å®æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566986775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128824,"user_name":"å¤§æ’","can_delete":false,"product_type":"c1","uid":1330033,"ip_address":"","ucode":"B8E3E2273F74DB","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/71/591ae170.jpg","comment_is_top":false,"comment_ctime":1566968165,"is_pvip":true,"replies":[{"id":"48072","content":"Isolateä¼šå¼€è¾Ÿæ–°çš„å†…å­˜æ ˆï¼Œå¯¹å†…å­˜æœ‰æ›´å¤šè¦æ±‚ï¼ˆå¤§çº¦20MBï¼‰","user_name":"ä½œè€…å›å¤","comment_id":128824,"uid":"1088582","ip_address":"","utype":1,"ctime":1567058792,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1566968165","product_id":100031001,"comment_content":"å¼€å¯ä¸€ä¸ªIsolateä¼šä¸ä¼šå¾ˆæ¶ˆè€—èµ„æºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465121,"discussion_content":"Isolateä¼šå¼€è¾Ÿæ–°çš„å†…å­˜æ ˆï¼Œå¯¹å†…å­˜æœ‰æ›´å¤šè¦æ±‚ï¼ˆå¤§çº¦20MBï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567058792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127423,"user_name":"Geek_0d3a08","can_delete":false,"product_type":"c1","uid":1184316,"ip_address":"","ucode":"3FB6E2CBD81A7C","user_header":"https://static001.geekbang.org/account/avatar/00/12/12/3c/2e7fd24f.jpg","comment_is_top":false,"comment_ctime":1566704995,"is_pvip":false,"replies":[{"id":"47353","content":"ç”¨microtaskæ˜¯å¯¹çš„ï¼Œä¸è¿‡æ²¡æœ‰Future.microtaskè¿™æ ·çš„è¯­æ³•","user_name":"ä½œè€…å›å¤","comment_id":127423,"uid":"1088582","ip_address":"","utype":1,"ctime":1566793318,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":2,"race_medal":0,"score":"1566704995","product_id":100031001,"comment_content":"2.Future(() =&gt; print(&#39;f1&#39;))<br>      .then((_) async =&gt; await Future.microtask(() =&gt; print(&#39;f2&#39;)))<br>      .then((_) =&gt; print(&#39;f3&#39;));<br>  Future(() =&gt; print(&#39;f4&#39;));","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464484,"discussion_content":"ç”¨microtaskæ˜¯å¯¹çš„ï¼Œä¸è¿‡æ²¡æœ‰Future.microtaskè¿™æ ·çš„è¯­æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566793318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1184316,"avatar":"https://static001.geekbang.org/account/avatar/00/12/12/3c/2e7fd24f.jpg","nickname":"Geek_0d3a08","note":"","ucode":"3FB6E2CBD81A7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6265,"discussion_content":"æœ‰ï¼Œæˆ‘ç”¨aså®ƒè‡ªåŠ¨æç¤ºå°±æ˜¯Future.microttaskäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566815879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127420,"user_name":"Geek_0d3a08","can_delete":false,"product_type":"c1","uid":1184316,"ip_address":"","ucode":"3FB6E2CBD81A7C","user_header":"https://static001.geekbang.org/account/avatar/00/12/12/3c/2e7fd24f.jpg","comment_is_top":false,"comment_ctime":1566704744,"is_pvip":false,"replies":[{"id":"47355","content":"èµğŸ‘ï¼ˆæ³¨æ„ä¸‹ä¸»Isolateåœ¨å‘é€å‚æ•°æ—¶ä¼ å…¥çš„portå¯ä»¥çœå»ï¼‰","user_name":"ä½œè€…å›å¤","comment_id":127420,"uid":"1088582","ip_address":"","utype":1,"ctime":1566793592,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":2,"race_medal":0,"score":"1566704744","product_id":100031001,"comment_content":"1.å¯ä»¥ï¼Œå†™æ³•æ”¹ä¸€ä¸‹å°±è¡Œ<br>&#47;&#47; å¹¶å‘è®¡ç®—é˜¶ä¹˜<br>asyncFactoriali(n) async {<br>  final response = ReceivePort(); &#47;&#47; åˆ›å»ºç®¡é“<br>  &#47;&#47; åˆ›å»ºå¹¶å‘ Isolateï¼Œå¹¶ä¼ å…¥ç®¡é“<br>  await Isolate.spawn(_isolate, response.sendPort);<br>  response.listen((value){<br>    if(value is SendPort) {<br>      final answer = ReceivePort();<br>      &#47;&#47; å¾€ Isolate å›ä¼ çš„ç®¡é“ä¸­å‘é€å‚æ•°ï¼ŒåŒæ—¶ä¼ å…¥ answer ç®¡é“<br>      value.send([n, answer.sendPort]);<br>    }<br>    print(&quot;============$value&quot;);<br>  });<br><br>}<br><br>&#47;&#47;Isolate å‡½æ•°ä½“ï¼Œå‚æ•°æ˜¯ä¸» Isolate ä¼ å…¥çš„ç®¡é“<br>_isolate(initialReplyTo) async {<br>  final port = ReceivePort(); &#47;&#47; åˆ›å»ºç®¡é“<br>  initialReplyTo.send(port.sendPort); &#47;&#47; å¾€ä¸» Isolate å›ä¼ ç®¡é“<br>  final message = await port.first as List; &#47;&#47; ç­‰å¾…ä¸» Isolate å‘é€æ¶ˆæ¯ (å‚æ•°å’Œå›ä¼ ç»“æœçš„ç®¡é“)<br>  final data = message[0] as int; &#47;&#47; å‚æ•°<br>&#47;&#47;  final send = message[1] as SendPort;&#47;&#47; å›ä¼ ç»“æœçš„ç®¡é“<br>  initialReplyTo.send(syncFactorial(data)); &#47;&#47; è°ƒç”¨åŒæ­¥è®¡ç®—é˜¶ä¹˜çš„å‡½æ•°å›ä¼ ç»“æœ<br>}<br><br>&#47;&#47; åŒæ­¥è®¡ç®—é˜¶ä¹˜<br>int syncFactorial(n) =&gt; n &lt; 2 ? n : n * syncFactorial(n - 1);<br><br>main()  =&gt;  asyncFactoriali(4);","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464483,"discussion_content":"èµğŸ‘ï¼ˆæ³¨æ„ä¸‹ä¸»Isolateåœ¨å‘é€å‚æ•°æ—¶ä¼ å…¥çš„portå¯ä»¥çœå»ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566793592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1330401,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4c/e1/49db2fc3.jpg","nickname":"yl","note":"","ucode":"6AFB54FB11EEC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287008,"discussion_content":"è¿™é‡Œçš„answeræ²¡å¿…è¦å†æ–°å»ºä¸€ä¸ªçš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593346406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127255,"user_name":"day day up","can_delete":false,"product_type":"c1","uid":1501020,"ip_address":"","ucode":"E9875555B6BD8F","user_header":"https://static001.geekbang.org/account/avatar/00/16/e7/5c/38afffa2.jpg","comment_is_top":false,"comment_ctime":1566623956,"is_pvip":false,"replies":[{"id":"47348","content":"1.ä¸å¯¹å“¦ï¼Œä¸¤ä¸ªç®¡é“ä»åŠŸèƒ½ä¸Šçœ‹æ˜¯ä¸€æ ·çš„<br>2.ç»“æœå€’æ˜¯å¯¹ï¼Œä¸è¿‡å·²ç»æ”¹å˜ä»£ç çš„è¯­ä¹‰äº†","user_name":"ä½œè€…å›å¤","comment_id":127255,"uid":"1088582","ip_address":"","utype":1,"ctime":1566792943,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":3,"race_medal":0,"score":"1566623956","product_id":100031001,"comment_content":"1.å› ä¸ºæ¥æ”¶æ–¹è¦ç­‰å¾…å‘é€æ–¹ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦ä¸¤ä¸ªç®¡é“ï¼Ÿ<br>2.Future(() =&gt; print(&#39;f1&#39;))<br>  .then((_) async =&gt; await Future(() =&gt; print(&#39;f2&#39;)))<br>  .then((_) =&gt; print(&#39;f3&#39;));<br>Future(() =&gt; null).then((_)=&gt;print(&#39;f4&#39;));<br>","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464399,"discussion_content":"1.ä¸å¯¹å“¦ï¼Œä¸¤ä¸ªç®¡é“ä»åŠŸèƒ½ä¸Šçœ‹æ˜¯ä¸€æ ·çš„\n2.ç»“æœå€’æ˜¯å¯¹ï¼Œä¸è¿‡å·²ç»æ”¹å˜ä»£ç çš„è¯­ä¹‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566792943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1587578,"avatar":"https://static001.geekbang.org/account/avatar/00/18/39/7a/7d5406dd.jpg","nickname":"å’•å’•å’•","note":"","ucode":"9E2E8A6E54C6D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7219,"discussion_content":"ä¸æ‡‚ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™é¡ºåºæ˜¯å¯¹çš„ï¼Ÿf4ä¸ºå•¥ä¸æ˜¯å…ˆä¸f2æ‰“å‡ºæ¥ï¼Œé˜Ÿåˆ—ä¸åº”è¯¥æ˜¯f1 null ç„¶åæ‰§è¡Œf1æ—¶å€™æŠŠf2æ”¾è¿›æ¥ï¼Œæ‰§è¡Œnullçš„æ—¶å€™æ‰§è¡Œä¼˜å…ˆé˜Ÿåˆ—é‡Œçš„f4å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567421548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501020,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/5c/38afffa2.jpg","nickname":"day day up","note":"","ucode":"E9875555B6BD8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6220,"discussion_content":"è€å¸ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªFutureå‰é¢åŠ awaité˜»å¡å¯¹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566793215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127131,"user_name":"æ·¡ï½","can_delete":false,"product_type":"c1","uid":1123784,"ip_address":"","ucode":"88577F9F1392CD","user_header":"https://static001.geekbang.org/account/avatar/00/11/25/c8/7a950a91.jpg","comment_is_top":false,"comment_ctime":1566565894,"is_pvip":false,"replies":[{"id":"48068","content":"å‡†ç¡®çš„æ¥è¯´æ˜¯å‘½ä»¤è¡Œç¨‹åºå’Œflutteråº”ç”¨ä¸åŒï¼šQueueé‡Œæ¶ˆæ¯ä¸ºç©ºï¼Œå‘½ä»¤è¡Œç¨‹åºä¼šç›´æ¥é€€å‡ºï¼›è€Œflutteråˆ™ä¼šæŠŠæ—¶é—´äº¤ç»™æ“ä½œç³»ç»Ÿï¼Œç³»ç»Ÿä¼šä¼‘çœ ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡æœ‰æ–°çš„äº‹ä»¶æŠŠå®ƒå”¤é†’","user_name":"ä½œè€…å›å¤","comment_id":127131,"uid":"1088582","ip_address":"","utype":1,"ctime":1567058104,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1566565894","product_id":100031001,"comment_content":"æƒ³é—®ä¸‹  ä¸ºä»€ä¹ˆäº‹ä»¶é˜Ÿåˆ— Event Queueäº‹ä»¶é˜Ÿåˆ—é‡Œé¢çš„æ¶ˆæ¯ä¸ºç©ºçš„æ—¶å€™ appå°±é€€å‡ºäº†å‘¢ï¼Ÿä¸ä¼šæ— é™å¾ªç¯å—ï¼Ÿæ— çº¿å¾ªç¯çš„è¯ä¼šä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464333,"discussion_content":"å‡†ç¡®çš„æ¥è¯´æ˜¯å‘½ä»¤è¡Œç¨‹åºå’Œflutteråº”ç”¨ä¸åŒï¼šQueueé‡Œæ¶ˆæ¯ä¸ºç©ºï¼Œå‘½ä»¤è¡Œç¨‹åºä¼šç›´æ¥é€€å‡ºï¼›è€Œflutteråˆ™ä¼šæŠŠæ—¶é—´äº¤ç»™æ“ä½œç³»ç»Ÿï¼Œç³»ç»Ÿä¼šä¼‘çœ ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡æœ‰æ–°çš„äº‹ä»¶æŠŠå®ƒå”¤é†’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567058104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125955,"user_name":"çŸ®ä¸ªå­å…ˆç”ŸğŸ˜","can_delete":false,"product_type":"c1","uid":1147205,"ip_address":"","ucode":"2242A457B0E10D","user_header":"https://static001.geekbang.org/account/avatar/00/11/81/45/9aa91b75.jpg","comment_is_top":false,"comment_ctime":1566282645,"is_pvip":false,"replies":[{"id":"48097","content":"Event buså°±æ˜¯åŸºäºStreamControlleråšçš„","user_name":"ä½œè€…å›å¤","comment_id":125955,"uid":"1088582","ip_address":"","utype":1,"ctime":1567078121,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":2,"race_medal":0,"score":"1566282645","product_id":100031001,"comment_content":"è€å¸ˆ,æœ‰ç¯‡å¹…è®²è§£ä¸‹StreamControllerå“åº”å¼ç¼–ç¨‹å—,å’Œevent_busçš„åŒºåˆ«","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463764,"discussion_content":"Event buså°±æ˜¯åŸºäºStreamControlleråšçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567078121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194659,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3a/a3/47a0c3c6.jpg","nickname":"zhangls","note":"","ucode":"E3E2840EA4BDB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5577,"discussion_content":"è¯¾ç¨‹å†…å®¹æ˜¯æ—©å°±åˆ¶å®šå¥½äº†çš„ï¼Œå¯ä»¥åœ¨è¯¾ç¨‹ä»‹ç»é‡ŒæŸ¥çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566358931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125952,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566281797,"is_pvip":false,"replies":[{"id":"46471","content":"1.ä¸å¯¹å“¦ï¼Œä¸¤ä¸ªç®¡é“éƒ½æ˜¯ä½œä¸ºå›ä¼ æ¶ˆæ¯ç”¨çš„ï¼Œç¬¬ä¸€ä¸ªç®¡é“è®©å¹¶å‘Isolateå›ä¼ è‡ªå·±çš„ç®¡é“ï¼Œç¬¬äºŒä¸ªç®¡é“è®©å¹¶å‘Isolateå›ä¼ ç»“æœï¼Œé¢˜ç›®é—®é¢˜æ˜¯ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªç®¡é“ï¼Œä¸€ä¸ªç®¡é“ä¸è¡Œå—ï¼Ÿ<br>2.ç»“æœå€’æ˜¯å¯¹ï¼Œä¸è¿‡è¿™ä¸ªå†™æ³•å¯¹4çš„æ•´ä½“ç»“æ„æ”¹åŠ¨è¿˜æ˜¯å¾ˆå¤§çš„","user_name":"ä½œè€…å›å¤","comment_id":125952,"uid":"1088582","ip_address":"","utype":1,"ctime":1566311137,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":1,"race_medal":0,"score":"1566281797","product_id":100031001,"comment_content":"æˆ‘æ¥å›ç­”ä¸€ä¸‹æ€è€ƒé¢˜ï¼š<br>1.å› ä¸ºå‘é€ç®¡é“æ˜¯å•å‘çš„ï¼Œæ‰€ä»¥åˆ›å»ºä¸¤ä¸ªç®¡é“ï¼Œè®©ä¸€ä¸ªä½œä¸ºå›ä¼ æ¶ˆæ¯çš„ç®¡é“ã€‚<br>2.<br>Future(() =&gt; print(&#39;f1&#39;))<br>      .then((_) async =&gt; await Future(() =&gt; print(&#39;f2&#39;)))<br>      .then((_) =&gt; print(&#39;f3&#39;));<br>    Future(() async =&gt; await(Future(() =&gt; print(&#39;f4&#39;))));","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463763,"discussion_content":"1.ä¸å¯¹å“¦ï¼Œä¸¤ä¸ªç®¡é“éƒ½æ˜¯ä½œä¸ºå›ä¼ æ¶ˆæ¯ç”¨çš„ï¼Œç¬¬ä¸€ä¸ªç®¡é“è®©å¹¶å‘Isolateå›ä¼ è‡ªå·±çš„ç®¡é“ï¼Œç¬¬äºŒä¸ªç®¡é“è®©å¹¶å‘Isolateå›ä¼ ç»“æœï¼Œé¢˜ç›®é—®é¢˜æ˜¯ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªç®¡é“ï¼Œä¸€ä¸ªç®¡é“ä¸è¡Œå—ï¼Ÿ\n2.ç»“æœå€’æ˜¯å¯¹ï¼Œä¸è¿‡è¿™ä¸ªå†™æ³•å¯¹4çš„æ•´ä½“ç»“æ„æ”¹åŠ¨è¿˜æ˜¯å¾ˆå¤§çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566311137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125874,"user_name":"å¤§åœŸè±†","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1566266794,"is_pvip":true,"replies":[{"id":"46311","content":"ç¡®å®åœ¨åº”ç”¨å±‚ç›´æ¥ç”¨Isolateçš„ä¸å¤šï¼ŒJSONè§£ç ç®—æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œå»ºè®®é€šè¿‡computeå‡½æ•°å»æå®šçš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":125874,"uid":"1088582","ip_address":"","utype":1,"ctime":1566283812,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":2,"race_medal":0,"score":"1566266794","product_id":100031001,"comment_content":"è¿™ä¸ªå•çº¿ç¨‹ï¼Œäº‹ä»¶å¾ªç¯çš„æ¨¡å‹ï¼Œå’Œjsæ˜¯ç±»ä¼¼çš„ã€‚é—®ä¸‹è€å¸ˆï¼Œæ—¢ç„¶dartä¸­i&#47;oï¼Œè®¡ç®—ç­‰è€—æ—¶æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¼‚æ­¥å…¨éƒ½æ˜¯åç¨‹å®ç°çš„æ ·å­ã€‚Isolateåœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œåº”è¯¥æ²¡æœ‰å¤ªå¤§çš„å¿…è¦ç”¨åˆ°å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463728,"discussion_content":"ç¡®å®åœ¨åº”ç”¨å±‚ç›´æ¥ç”¨Isolateçš„ä¸å¤šï¼ŒJSONè§£ç ç®—æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œå»ºè®®é€šè¿‡computeå‡½æ•°å»æå®šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566283812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1733144,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/72/18/d9e2fcf9.jpg","nickname":"æˆ‘æ¥äººé—´ä¸€è¶Ÿ","note":"","ucode":"15CAF96EF899E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288345,"discussion_content":"å’Œjsäº‹ä»¶å¾ªç¯çš„æ¨¡å‹æ˜¯ç±»ä¼¼çš„ ä½†æ˜¯æ‰§è¡Œé€»è¾‘ä¸å¤ªä¸€æ · jsæœ‰å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„æ˜¯å®ä»»åŠ¡ è€Œè¿™é‡Œæ˜¯å…ˆæ‰§è¡Œçš„å¾®ä»»åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593735525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125811,"user_name":"ä¸æŸæŸ","can_delete":false,"product_type":"c1","uid":1134357,"ip_address":"","ucode":"F7E9478D9998DB","user_header":"https://static001.geekbang.org/account/avatar/00/11/4f/15/463fcaf1.jpg","comment_is_top":false,"comment_ctime":1566262021,"is_pvip":false,"replies":[{"id":"46284","content":"f6æ˜¯æ‰§è¡Œä½“ï¼Œåé¢ä¸¤ä¸ªéƒ½æ˜¯ä»–çš„then","user_name":"ä½œè€…å›å¤","comment_id":125811,"uid":"1088582","ip_address":"","utype":1,"ctime":1566280980,"user_name_real":"åœŸè±†ç›’å­"}],"discussion_count":2,"race_medal":0,"score":"1566262021","product_id":100031001,"comment_content":"f8å¤–é¢çš„thenæ–¹æ³•ä½“æ˜¯ä¸æ˜¯åº”è¯¥æ”¾åˆ°f7æ‰€åœ¨futureå¯¹åƒåé¢ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463701,"discussion_content":"f6æ˜¯æ‰§è¡Œä½“ï¼Œåé¢ä¸¤ä¸ªéƒ½æ˜¯ä»–çš„then","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566280980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1456964,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","nickname":"èœå¤´","note":"","ucode":"C5E95519F9EA21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42667,"discussion_content":"æˆ‘ç†è§£çš„æ˜¯ ç¬¬äºŒä¸ª then ä¸æ˜¯ f6 çš„ then, è€Œ æ˜¯ç¬¬ä¸€ä¸ª then ç»“æœ çš„ then","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572750692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}