{"id":108204,"title":"17 | 如何实现统一异常处理？","content":"<ul>\n<li>\n<p>代码：<a href=\"https://gitee.com/geektime-geekbang/staffjoy\">https://gitee.com/geektime-geekbang/staffjoy</a></p>\n</li>\n<li>\n<p>课件：<a href=\"https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ\">https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ</a> 提取码: 1aeh</p>\n</li>\n</ul>","comments":[{"had_liked":false,"id":196275,"user_name":"彬清","can_delete":false,"product_type":"c3","uid":1220372,"ip_address":"","ucode":"04620BAC60F15F","user_header":"https://static001.geekbang.org/account/avatar/00/12/9f/14/b9505789.jpg","comment_is_top":false,"comment_ctime":1585268953,"is_pvip":false,"replies":[{"id":74975,"content":"初步网上查了一下，一种统一处理feign接口异常的方法是：用RestControllerAdvice集中捕获和处理FeignException\n参考：\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;55020389&#47;spring-feign-client-exception-handling\nhttps:&#47;&#47;www.javacodemonk.com&#47;feign-exception-handling-spring-cloud-20d17f69\n\n异常一般可以分为两类：\n1. 底层http通讯异常，比如连不上或超时等\n2. 服务端返回http错误码异常。\n\n具体要根据应用场景分析。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585572374,"ip_address":"","comment_id":196275,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，微服务内部调用feign接口抛出的异常，如何统一处理，需要捕获什么类型的异常？","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489256,"discussion_content":"初步网上查了一下，一种统一处理feign接口异常的方法是：用RestControllerAdvice集中捕获和处理FeignException\n参考：\nhttps://stackoverflow.com/questions/55020389/spring-feign-client-exception-handling\nhttps://www.javacodemonk.com/feign-exception-handling-spring-cloud-20d17f69\n\n异常一般可以分为两类：\n1. 底层http通讯异常，比如连不上或超时等\n2. 服务端返回http错误码异常。\n\n具体要根据应用场景分析。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585572374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115718,"user_name":"oldriver","can_delete":false,"product_type":"c3","uid":1078780,"ip_address":"","ucode":"8D798BD516341D","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/fc/2e4eff0c.jpg","comment_is_top":false,"comment_ctime":1563704390,"is_pvip":false,"replies":[{"id":42466,"content":"你好，统一异常处理属于微服务治理的重要环节，不管公司规模大小，并发量多大，都要做。我之前在eBay这种大厂工作过，它的交易量非常大，但它的框架层和业务层错误处理做得非常细致，反倒是一些中小公司常常忽略异常处理。异常处理发生时的确有一定的性能损耗，但是这个是必须的，而且生产级代码是建议尽可能细致全面的做错误处理，目前没有证据显示，细粒度的错误处理会引发性能问题。另外，很多大厂的服务框架都有统一异常处理逻辑，统一异常处理有利于规范和后续的运维。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1563802034,"ip_address":"","comment_id":115718,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，虽然统一异常处理能让开发人员专注于业务，任何不符合业务规范的地方都通过异常往外throw，这样容易让开发人员乱throw异常，而创建异常本身是比较好性能的，而且统一异常是通过aop实现的，在项目比较小的时候可能对业务没啥影响，但是在高并发，大业务量场景下是不是也能使用统一异常处理，我团队内部对此进行了讨论，但是没有结果（目前项目的业务量不大，使用的是统一异常处理），能否请老师告知下，像一些一线大厂（阿里，字节跳动），在高并发场景下是如何处理异常的","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459252,"discussion_content":"你好，统一异常处理属于微服务治理的重要环节，不管公司规模大小，并发量多大，都要做。我之前在eBay这种大厂工作过，它的交易量非常大，但它的框架层和业务层错误处理做得非常细致，反倒是一些中小公司常常忽略异常处理。异常处理发生时的确有一定的性能损耗，但是这个是必须的，而且生产级代码是建议尽可能细致全面的做错误处理，目前没有证据显示，细粒度的错误处理会引发性能问题。另外，很多大厂的服务框架都有统一异常处理逻辑，统一异常处理有利于规范和后续的运维。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563802034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027346,"avatar":"","nickname":"老码不识途","note":"","ucode":"18CC5EE8532153","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2944,"discussion_content":"当系统出异常时，重点在于记录、处理异常，而不是考虑性能。 \n所以在处理异常时考虑性能从本质上是错误的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564053070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153332,"user_name":"Demon.Lee","can_delete":false,"product_type":"c3","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1574218577,"is_pvip":false,"replies":[{"id":58991,"content":"我之前设计框架的时候，一般只设计两类异常，一类是框架异常(或者你说的系统异常)，另一类是业务异常(业务开发自己定制扩展)。\n\n异常种类不需要太多，但是错误码(error code)和错误消息(error message)可以按需定义。你提到的回滚操作可以根据错误码判断。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1574253645,"ip_address":"","comment_id":153332,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，微服务异常设计这块，您有什么好的实践么？\n1. 比如，异常的分类，有的人归结为：业务异常，系统异常，代码异常 三类，您怎么看？\n2. 有时候，我们需要针对某一种特殊异常进行数据回滚处理，此时就得用特殊异常了，比如：微服务A调用了微服务B，微服务B可能会出现各种异常，但我只需要针对其中某一种或几种异常进行数据回滚操作（即要重新调用微服务B的反向API），此时异常分类又不一样了，只是3类肯定不行。\n我用的暂时是mongoDB，事务不要求强一致性。\n\n所以，我在想是不是统一返回给的web前端的异常，设计成3类就行，而微服务之间则需要按照具体需要进行设计。还望老师解答下，谢谢了。","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475124,"discussion_content":"我之前设计框架的时候，一般只设计两类异常，一类是框架异常(或者你说的系统异常)，另一类是业务异常(业务开发自己定制扩展)。\n\n异常种类不需要太多，但是错误码(error code)和错误消息(error message)可以按需定义。你提到的回滚操作可以根据错误码判断。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574253645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244072,"user_name":"💢 星星💢","can_delete":false,"product_type":"c3","uid":1254392,"ip_address":"","ucode":"A402B765222C35","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","comment_is_top":false,"comment_ctime":1598372065,"is_pvip":false,"replies":[{"id":90031,"content":"这个取决于Controller方法会不会抛异常。我简单查了一下：\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;22003011&#47;spring-mvc-validation-exceptionhandler-invoked-before-controller-method\n\n如果Controller方法中不带BindingResult参数，那么验证失败就会抛出异常，抛出异常的话ErrorController可以统一捕获。\n\n如果Controller方法中带BindingResult参数，那么就不会抛异常，当然ErrorController也就捕获不到。\n\n具体可以做个简单例子尝试一下。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1598616562,"ip_address":"","comment_id":244072,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"web端的参数校验，例如JSR参数校验注解，例如@notblank @vaild ，课程里的统一异常实现ErrorController，通过Object exception = request.getAttribute(RequestDispatcher.ERROR_EXCEPTION); 也能捕获到么？没有实践过。就直接问问老师嘿嘿。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504468,"discussion_content":"这个取决于Controller方法会不会抛异常。我简单查了一下：\nhttps://stackoverflow.com/questions/22003011/spring-mvc-validation-exceptionhandler-invoked-before-controller-method\n\n如果Controller方法中不带BindingResult参数，那么验证失败就会抛出异常，抛出异常的话ErrorController可以统一捕获。\n\n如果Controller方法中带BindingResult参数，那么就不会抛异常，当然ErrorController也就捕获不到。\n\n具体可以做个简单例子尝试一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598616562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254392,"avatar":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","nickname":"💢 星星💢","note":"","ucode":"A402B765222C35","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302004,"discussion_content":"非常感谢波波老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598754905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117164,"user_name":"Fchen","can_delete":false,"product_type":"c3","uid":1124609,"ip_address":"","ucode":"AA2130C6661F30","user_header":"https://static001.geekbang.org/account/avatar/00/11/29/01/203fcb5d.jpg","comment_is_top":false,"comment_ctime":1563979706,"is_pvip":false,"replies":[{"id":42999,"content":"是的，谢谢提醒！","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564058882,"ip_address":"","comment_id":117164,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"mvc的可以使用@ControllerAdvice注解，和@RestControllerAdvice类似的","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459846,"discussion_content":"是的，谢谢提醒！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564058882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188086,"user_name":"钱","can_delete":false,"product_type":"c3","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1584320793,"is_pvip":false,"replies":[{"id":72892,"content":"微服务层统一异常处理可以做到，可参考我的案例代码，可以做得粒度较细，也可以比较粗，具体看业务需要。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1584441189,"ip_address":"","comment_id":188086,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"统一异常处理，web端重要性相对弱一点，微服务层怎么统一处理呢？每个接口情况一般差异较大，也是只需两种嘛？框架异常＋业务异常，通过封装异常对象来统一响应？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487336,"discussion_content":"微服务层统一异常处理可以做到，可参考我的案例代码，可以做得粒度较细，也可以比较粗，具体看业务需要。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584441189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175011,"user_name":"旭东(Frank)","can_delete":false,"product_type":"c3","uid":1024486,"ip_address":"","ucode":"176FA629800062","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","comment_is_top":false,"comment_ctime":1580526854,"is_pvip":false,"replies":[{"id":68186,"content":"课程的重点是微服务和云原生架构，微服务&#47;云原生架构和具体前端(vue&#47;reactjs&#47;angularjs)无关，课程以reactjs为例只是演示。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1580730592,"ip_address":"","comment_id":175011,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"前端vue 就更好了","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482594,"discussion_content":"课程的重点是微服务和云原生架构，微服务/云原生架构和具体前端(vue/reactjs/angularjs)无关，课程以reactjs为例只是演示。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580730592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144115,"user_name":"grey927","can_delete":false,"product_type":"c3","uid":1202782,"ip_address":"","ucode":"833E02ED835B4A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/5e/a897cb0d.jpg","comment_is_top":false,"comment_ctime":1571844582,"is_pvip":false,"replies":[{"id":55670,"content":"你好，因为Staffjoy是一个简单教学案例，所以：\n\n1. 服务层的异常统一包装成ServiceException，里头有error code和message等关键信息就够了，暂时也没有必要再继承。\n\n2. 继承RuntimeException就不用麻烦手动捕获，可以集中让Spring ControllerAdvice异常机制统一捕获。\n\n当然，这个只是我个人做法，对于异常的使用，不同的人有不同的风格，所以你也可以按需采用你自己的风格。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1571918557,"ip_address":"","comment_id":144115,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"杨老师，我有2个疑问，关于Staffjoy中的ServiceException，\n1. 我理解是异常的基类,如果业务模块自定义的异常，应该就是继承这个ServiceException这个基类就可以了对吧？我这个理解是否有问题？\n2. 为什么是继承RuntimeExcetption类，而不是直接继承Exception类？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471817,"discussion_content":"你好，因为Staffjoy是一个简单教学案例，所以：\n\n1. 服务层的异常统一包装成ServiceException，里头有error code和message等关键信息就够了，暂时也没有必要再继承。\n\n2. 继承RuntimeException就不用麻烦手动捕获，可以集中让Spring ControllerAdvice异常机制统一捕获。\n\n当然，这个只是我个人做法，对于异常的使用，不同的人有不同的风格，所以你也可以按需采用你自己的风格。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571918557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140847,"user_name":"ZeroE","can_delete":false,"product_type":"c3","uid":1420758,"ip_address":"","ucode":"1516C950EDEFE7","user_header":"https://static001.geekbang.org/account/avatar/00/15/ad/d6/0c85ecf0.jpg","comment_is_top":false,"comment_ctime":1571059221,"is_pvip":false,"replies":[{"id":54615,"content":"统一异常处理用了Spring的RestControllerAdvice机制(可以网上找下，相关文档很多)，相关类GlobalExceptionTranslator在common-lib中，其它Spring应用只要能类扫描到并加载这个GlobalExceptionTranslator，就可以实现统一异常处理。\n\n在其它Spring应用中，框架异常或者你自己定义的异常，向外抛出时，最终会被这个RestControllerAdvice所捕获，并做统一处理。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1571145244,"ip_address":"","comment_id":140847,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，统一异常处理是写在common-lib里面的，但是web-app通过dependency的方式引入之后，在怎么把common-lib里面的异常处理类实例化的？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470589,"discussion_content":"统一异常处理用了Spring的RestControllerAdvice机制(可以网上找下，相关文档很多)，相关类GlobalExceptionTranslator在common-lib中，其它Spring应用只要能类扫描到并加载这个GlobalExceptionTranslator，就可以实现统一异常处理。\n\n在其它Spring应用中，框架异常或者你自己定义的异常，向外抛出时，最终会被这个RestControllerAdvice所捕获，并做统一处理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571145244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135768,"user_name":"jshadow","can_delete":false,"product_type":"c3","uid":1149128,"ip_address":"","ucode":"5086660EBC4D21","user_header":"https://static001.geekbang.org/account/avatar/00/11/88/c8/1e8f99c8.jpg","comment_is_top":false,"comment_ctime":1569255934,"is_pvip":false,"replies":[{"id":52116,"content":"从你描述我没有看出具体什么问题，可以加我微信(bulldog2015，说明来自极客时间)，进一步了解细节。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1569328507,"ip_address":"","comment_id":135768,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"请问老师，视频里全局格式化BaseResponse Json格式的地方在哪个地方了？因为按照您视频里的例子，我这边返回BaseResponse后，Json格式有点小问题","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468334,"discussion_content":"从你描述我没有看出具体什么问题，可以加我微信(bulldog2015，说明来自极客时间)，进一步了解细节。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569328507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119384,"user_name":"吕","can_delete":false,"product_type":"c3","uid":1210890,"ip_address":"","ucode":"8F08E2CB81C4C3","user_header":"https://static001.geekbang.org/account/avatar/00/12/7a/0a/0ce5c232.jpg","comment_is_top":false,"comment_ctime":1564575497,"is_pvip":false,"replies":[{"id":43784,"content":"你可以在ControllerAdvice里头对SQL相关类型的异常单独捕获和转换处理一下，给用户一个友好的提示。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564578524,"ip_address":"","comment_id":119384,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"我也做了统一异常处理，但是对于sql执行时的错误，会直接反馈的页面sql乱码，而不是友好提示，不知道怎么处理","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460879,"discussion_content":"你可以在ControllerAdvice里头对SQL相关类型的异常单独捕获和转换处理一下，给用户一个友好的提示。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564578524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115588,"user_name":"磊","can_delete":false,"product_type":"c3","uid":1600149,"ip_address":"","ucode":"85852C8EDDE3CB","user_header":"https://static001.geekbang.org/account/avatar/00/18/6a/95/d7578546.jpg","comment_is_top":false,"comment_ctime":1563638570,"is_pvip":false,"replies":[{"id":42263,"content":"你好，第二章本身就是关于框架设计的，偏代码层次较多。后续课程大部分都是架构原理+代码分析结合，大致一半一半的比例。最后几章偏实际操作容器部署为主。谢谢继续关注我的课程！","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1563713317,"ip_address":"","comment_id":115588,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"希望老师阐述关于架构设计方面的实践经验，代码层面不易过细，代码入门大可以看其他教程，因为第二次更新明显感觉不如前10课干货多","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459179,"discussion_content":"你好，第二章本身就是关于框架设计的，偏代码层次较多。后续课程大部分都是架构原理+代码分析结合，大致一半一半的比例。最后几章偏实际操作容器部署为主。谢谢继续关注我的课程！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563713317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115158,"user_name":"WL","can_delete":false,"product_type":"c3","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1563501589,"is_pvip":false,"replies":[{"id":42224,"content":"你指的是Servlet Filter吗？如果是，在Spring中也可以统一异常处理，类似MVC统一异常处理做法，实现ErrorController接口。可以参考staffjoy中的faraday项目GlobalErrorController(https:&#47;&#47;github.com&#47;spring2go&#47;staffjoy&#47;blob&#47;master&#47;faraday&#47;src&#47;main&#47;java&#47;xyz&#47;staffjoy&#47;faraday&#47;controller&#47;GlobalErrorController.java)","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1563621009,"ip_address":"","comment_id":115158,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"请问一下老师过滤器怎样进行统一异常处理","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458994,"discussion_content":"你指的是Servlet Filter吗？如果是，在Spring中也可以统一异常处理，类似MVC统一异常处理做法，实现ErrorController接口。可以参考staffjoy中的faraday项目GlobalErrorController(https://github.com/spring2go/staffjoy/blob/master/faraday/src/main/java/xyz/staffjoy/faraday/controller/GlobalErrorController.java)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563621009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}