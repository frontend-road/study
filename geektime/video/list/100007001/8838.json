{"id":8838,"title":"30 | 开关驱动开发原理","content":"无","comments":[{"had_liked":false,"id":12038,"user_name":"王宁","can_delete":false,"product_type":"c3","uid":1048061,"ip_address":"","ucode":"4E6258270B7BE9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/fd/1e3d14ee.jpg","comment_is_top":false,"comment_ctime":1528529937,"is_pvip":false,"replies":[{"id":3986,"content":"是有技术债问题，所以要定期清理，但用好了很有用，是很多一线公司的devops最佳实践","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1528624046,"ip_address":"","comment_id":12038,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"这样会不会导致一堆类似IF ELSE的判断。看着也令人很头疼吧。\n调试和问题修复的时候复杂度应该也会增加不少。","like_count":8,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419091,"discussion_content":"是有技术债问题，所以要定期清理，但用好了很有用，是很多一线公司的devops最佳实践","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528624046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239560,"user_name":"点点","can_delete":false,"product_type":"c3","uid":1222823,"ip_address":"","ucode":"2E29A4DC027A16","user_header":"https://static001.geekbang.org/account/avatar/00/12/a8/a7/4d8cb9cf.jpg","comment_is_top":false,"comment_ctime":1596587804,"is_pvip":false,"replies":[{"id":88632,"content":"功能开关驱动适用于大部分代码功能更新场景，包括功能完善或者bug，只是需要把更新的代码和老代码，通过一个开关来控制而已。\n\nif (switch == on) { &#47;&#47; 开关可以通过配置中心操作\n    新代码； &#47;&#47; 包括功能完善或者bugfix\n} else {\n    老代码;\n}","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1596729489,"ip_address":"","comment_id":239560,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"对功能的完善或者bug的修改这样的基于开关驱动的开发怎么处理 ？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503140,"discussion_content":"功能开关驱动适用于大部分代码功能更新场景，包括功能完善或者bug，只是需要把更新的代码和老代码，通过一个开关来控制而已。\n\nif (switch == on) { // 开关可以通过配置中心操作\n    新代码； // 包括功能完善或者bugfix\n} else {\n    老代码;\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596729489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65114,"user_name":"yien","can_delete":false,"product_type":"c3","uid":1345013,"ip_address":"","ucode":"37CC1AFAC8B0BC","user_header":"https://static001.geekbang.org/account/avatar/00/14/85/f5/10275c0a.jpg","comment_is_top":false,"comment_ctime":1549067105,"is_pvip":false,"replies":[{"id":23572,"content":"两种方式都是有利有弊，分支有冲突问题，TBD有代码债问题，没有绝对好，需要研发流程规范和治理配合。之前在eBay，开关驱动开发有大规模生产实践，效果不错。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1549974367,"ip_address":"","comment_id":65114,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"这个就好像以前用svn管理代码的时候，对于个性化开发的需求都是通过if else 去做了，后面发现一堆代码债。后面使用git多分支管理，特定需求拉新分支去处理，不影响主干的功能，和代码侵入。怎么说呢，感觉如果功能多的，配置中心会有一堆配置开关的，也不敢维护，如果配置中心有一个测试通过，正式发布新功能的时候，自动屏蔽老功能代码就好咯。","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438324,"discussion_content":"两种方式都是有利有弊，分支有冲突问题，TBD有代码债问题，没有绝对好，需要研发流程规范和治理配合。之前在eBay，开关驱动开发有大规模生产实践，效果不错。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549974367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":38521,"user_name":"莫行","can_delete":false,"product_type":"c3","uid":1286296,"ip_address":"","ucode":"5A5602DAB5A55C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI7SFdnXQeromenlsuf64N7z2qMDribhPsbfFjEWvAQEICExz7Spzox5YjvzevnhkeX1IIV2ziaOhUA/132","comment_is_top":false,"comment_ctime":1542071004,"is_pvip":false,"replies":[{"id":14308,"content":"这种模式下要求每次提交都是较完整功能，保证主干始终可build可布署，暂不起用功能躲在开关后面","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1542367111,"ip_address":"","comment_id":38521,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"这种情况不好做code review吧。每天提交到主干的代码不一定是完整的功能","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428732,"discussion_content":"这种模式下要求每次提交都是较完整功能，保证主干始终可build可布署，暂不起用功能躲在开关后面","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542367111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323388,"avatar":"https://static001.geekbang.org/account/avatar/00/14/31/7c/eb9550fc.jpg","nickname":"王昊天","note":"","ucode":"82E71DDC455B3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372269,"discussion_content":"确实不方便code review,而且开发人员的水平不同，可能在开关位置就埋雷了，另一个问题是前端的功能开关如何控制呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620263606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":36791,"user_name":"Sam_Deep_Thinking","can_delete":false,"product_type":"c3","uid":1001152,"ip_address":"","ucode":"8E4EF6F24B821B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/c0/106d98e7.jpg","comment_is_top":false,"comment_ctime":1541332612,"is_pvip":false,"replies":[{"id":13180,"content":"对，可以先把apollo搭建起来，FDD对研发效能和系统稳定性、DevOps等都有立杆见影效果","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1541423528,"ip_address":"","comment_id":36791,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"非常不错。看完之后，我觉得开关驱动开发非常合适与重构。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428018,"discussion_content":"对，可以先把apollo搭建起来，FDD对研发效能和系统稳定性、DevOps等都有立杆见影效果","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541423528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28085,"user_name":"winter0703","can_delete":false,"product_type":"c3","uid":1127344,"ip_address":"","ucode":"9C44673EB57B64","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/b0/0730577b.jpg","comment_is_top":false,"comment_ctime":1538007335,"is_pvip":false,"replies":[{"id":10669,"content":"恩，开关驱动开发是业界最佳实践，国内还未普及，需要架构师布道宣传，我也是做些布道宣传。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1538479274,"ip_address":"","comment_id":28085,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"实践中已经有挺多类似做法，但是没上升到方法论层面，现在听杨老师一讲，觉得可以大规模推广。定期清理很关键，这要通过机制来解决，时间长了谁都说不清楚。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425137,"discussion_content":"恩，开关驱动开发是业界最佳实践，国内还未普及，需要架构师布道宣传，我也是做些布道宣传。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538479274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215369,"user_name":"李圣悦","can_delete":false,"product_type":"c3","uid":1638427,"ip_address":"","ucode":"C1786C98824E50","user_header":"https://static001.geekbang.org/account/avatar/00/19/00/1b/eee13196.jpg","comment_is_top":false,"comment_ctime":1588983042,"is_pvip":false,"replies":[{"id":79977,"content":"对人有一定要求，软件开发还是智力密集型行业。基于主干开发模式+开关驱动开发是行业最佳实践，值得尝试。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1589204005,"ip_address":"","comment_id":215369,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"觉得主线开发，质量太依赖人了，人又是最不靠谱的。这样代码不敢用…","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494405,"discussion_content":"对人有一定要求，软件开发还是智力密集型行业。基于主干开发模式+开关驱动开发是行业最佳实践，值得尝试。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589204005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1638427,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/1b/eee13196.jpg","nickname":"李圣悦","note":"","ucode":"C1786C98824E50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263394,"discussion_content":"嗯，也不能太过。我接触到的软件开发，漏洞至少有80%是人疏忽造成的，并且软件行业逐步年轻化，那架构和开发流程也应该会往这个方向发展。我觉得提倡主干模式开发的同时应该强制性落地CICD，也就是说主干开发也是有要求的，但不能把主要要求放到人上","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589204519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200689,"user_name":"J.Smile","can_delete":false,"product_type":"c3","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/d1ab239e.jpg","comment_is_top":false,"comment_ctime":1585638498,"is_pvip":false,"replies":[{"id":75436,"content":"对，尽量控制分支线的数量，这是架构治理的一部分。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585839108,"ip_address":"","comment_id":200689,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"感觉无论TBD模式还是其他版本发布模式，如果同时开发的支线太多，版本控制就变得非常复杂。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490102,"discussion_content":"对，尽量控制分支线的数量，这是架构治理的一部分。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585839108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192098,"user_name":"Jason","can_delete":false,"product_type":"c3","uid":1085947,"ip_address":"","ucode":"6EECC0C25A9FCC","user_header":"https://static001.geekbang.org/account/avatar/00/10/91/fb/9b9d22a0.jpg","comment_is_top":false,"comment_ctime":1584837460,"is_pvip":false,"replies":[{"id":74010,"content":"对，需要配合一定的治理监控，也要对开发人员进行一定的培训。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585053366,"ip_address":"","comment_id":192098,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"开关配置确实好用，单滥用就会使代码很难维护","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488326,"discussion_content":"对，需要配合一定的治理监控，也要对开发人员进行一定的培训。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585053366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52742,"user_name":"Nick","can_delete":false,"product_type":"c3","uid":1011634,"ip_address":"","ucode":"3EF2F5AE260644","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6f/b2/4c010d46.jpg","comment_is_top":false,"comment_ctime":1545493437,"is_pvip":false,"replies":[{"id":19370,"content":"先在主干上修复bug，再从F2 release切F2.1分支，再将主干反向merge到F2.1，可参考原文（ppt里头有原文链接）。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1545654571,"ip_address":"","comment_id":52742,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"那F2.1的代码最后怎么办？不回master的话，下次release怎么处理呢？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433967,"discussion_content":"先在主干上修复bug，再从F2 release切F2.1分支，再将主干反向merge到F2.1，可参考原文（ppt里头有原文链接）。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545654571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42632,"user_name":"Eric","can_delete":false,"product_type":"c3","uid":1053498,"ip_address":"","ucode":"59752A51A382A6","user_header":"https://static001.geekbang.org/account/avatar/00/10/13/3a/b0454322.jpg","comment_is_top":false,"comment_ctime":1542984520,"is_pvip":false,"replies":[{"id":15526,"content":"开关驱动重构一般是向下兼容的，这样在出问题后才能安全退回去，存储结构变化也没关系，你把它们先封装在抽象接口（API或服务）后面，只要接口不变向下兼容，你后台的具体存储就可以腾挪变化。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1543237021,"ip_address":"","comment_id":42632,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"老师，今天学习了TBD ，想问个问题，如果使用开关控制新老功能的交替，假如存储层结构在新老功能交替中有变化，这种情况 通常怎么处理？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430144,"discussion_content":"开关驱动重构一般是向下兼容的，这样在出问题后才能安全退回去，存储结构变化也没关系，你把它们先封装在抽象接口（API或服务）后面，只要接口不变向下兼容，你后台的具体存储就可以腾挪变化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543237021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":40716,"user_name":"self-discipline","can_delete":false,"product_type":"c3","uid":1024457,"ip_address":"","ucode":"A5AEDCA9ACC68A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/c9/501a1d02.jpg","comment_is_top":false,"comment_ctime":1542665848,"is_pvip":false,"replies":[{"id":15264,"content":"微服务团队可大可小，还是会一个团队门人有几个组员并行开发需合并的场景，开关驱动开发建议基于主干开发减少合并，适合微服务，迭代周期二周左右节奏","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1542986160,"ip_address":"","comment_id":40716,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"咨询下老师,如果是微服务,自己处理自己的项目，那么按理来说不会有这种合并问题吧,同时做小版本的迭代,迭代周期不会超过半个月","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429593,"discussion_content":"微服务团队可大可小，还是会一个团队门人有几个组员并行开发需合并的场景，开关驱动开发建议基于主干开发减少合并，适合微服务，迭代周期二周左右节奏","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542986160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":40713,"user_name":"self-discipline","can_delete":false,"product_type":"c3","uid":1024457,"ip_address":"","ucode":"A5AEDCA9ACC68A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/c9/501a1d02.jpg","comment_is_top":false,"comment_ctime":1542664264,"is_pvip":false,"replies":[{"id":15265,"content":"谢谢支持！加油💪","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1542986190,"ip_address":"","comment_id":40713,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"收获很大","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429592,"discussion_content":"谢谢支持！加油💪","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542986190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348951,"user_name":"路漫漫其修远兮","can_delete":false,"product_type":"c3","uid":1067340,"ip_address":"","ucode":"7FD7CAC526A0AA","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/4c/a3ea8eb2.jpg","comment_is_top":false,"comment_ctime":1655605951,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"貌似是一种理想状态，开关用在业务开发里面实践基本上没办法落地。业务快速发展代码复杂度、理解成本、易错成本等，代码重构是牺牲业务进度为前提，开关过多去开关验证也需要成本。大厂没听说那个这样搞的，配置还是在业务策略和灰度方面比较合适，专门有业务配置系统单独配置（面向角色是运营产品），通过策略实现业务灵活性。讲解里面强依赖主干+开关控制业务开发流程的模式，个人感觉是不合适的，耦合太严重对功能快速上线和测试验证不友好，上线必须保证稳定性，上线交付物应该是稳定可靠的而不是存在异议非稳定的。交付物不稳定产品的稳定性就不用考虑了，保证不了稳定性的模式没有什么存在的意义啊。","like_count":1},{"had_liked":false,"id":333261,"user_name":"on","can_delete":false,"product_type":"c3","uid":2869085,"ip_address":"","ucode":"D0B59D9F0FC209","user_header":"https://static001.geekbang.org/account/avatar/00/2b/c7/5d/40bdba38.jpg","comment_is_top":false,"comment_ctime":1644234888,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"开关和tbd还是两个东西吧，只是tbd依赖开关。\nTBD希望两天左右就回到主干，虽然有开关，但并没有开发完，也没回归老代码，对代码的可靠性还是要求很高的。\n单说tbd，不说开关。tbd这种方式有公司真正落地吗？","like_count":0}]}