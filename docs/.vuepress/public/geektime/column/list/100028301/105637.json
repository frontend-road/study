{"id":105637,"title":"35 | [视频]实际项目中的性能优化：ingress-nginx中的几个PR解读","content":"<p><video poster=\"https://static001.geekbang.org/resource/image/53/80/536c067253bc7d68cfbb54f762484980.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/fe4a99b62946f2c31c2095c167b26f9c/1a97c39b-16ce823e7a2-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\"https://media001.geekbang.org/402947d480674f578b44c42e194ef714/8e5079a430654fe4a9901fad3e5a9a3a-72367b8ed74bf04d395686d3b65b78d1-sd.m3u8\" type=\"application/x-mpegURL\"><source src=\"https://media001.geekbang.org/402947d480674f578b44c42e194ef714/8e5079a430654fe4a9901fad3e5a9a3a-71ddb15e8eaa40b4179db24e849427d2-hd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>你好，我是温铭。</p><p>今天的内容，我同样会以视频的形式来讲解。老规矩，在你进行视频学习之前，先问你这么几个问题：</p><ul>\n<li>如何在开源项目中找到可能存在的性能问题？</li>\n<li>在 Github 上，如何与其他开发者正确地交流？</li>\n</ul><p>这几个问题，也是今天视频课要解决的核心内容，希望你可以先自己思考一下，并带着问题来学习今天的视频内容。</p><p>同时，我会给出相应的文字介绍，方便你在听完视频内容后，及时总结与复习。下面是今天这节课的文字介绍部分。</p><h2>今日核心</h2><p><a href=\"https://github.com/kubernetes/ingress-nginx\">ingress-nginx</a> 是 k8s 官方的一个项目，主要使用Go、 Nginx 和 lua-nginx-module 来处理入口流量。</p><p>在今天的视频中，我会为你清楚介绍，如何运用我们刚刚学习的性能优化方面的知识，来发现开源项目的性能问题。要知道，在我们给开源项目贡献 PR 时，跑通测试案例集以及与项目维护者积极沟通，都是非常重要的。</p><p>下面是 ingress-nginx 中，和 OpenResty 性能相关的两个 PR：</p><ul>\n<li><a href=\"https://github.com/kubernetes/ingress-nginx/pull/3673\">https://github.com/kubernetes/ingress-nginx/pull/3673</a></li>\n<li><a href=\"https://github.com/kubernetes/ingress-nginx/pull/3674\">https://github.com/kubernetes/ingress-nginx/pull/3674</a></li>\n</ul><!-- [[[read_end]]] --><p>从中你也可以发现，即使是资深的开发者，对 LuaJIT 相关的优化，可能也并不是很熟悉。一方面是因为，这两个 PR 涉及到的代码，并不会对整体系统造成严重的性能下降；另一个方面，这方面的优化知识，没有人系统地总结过，开发者即使想优化也找不到方向。</p><p>事实上，很多时候，我们站在代码可读性和可维护性的角度来看，可有可无的优化是不必要的，你只要去优化那些被频繁执行的代码片段就可以了，过度优化是万恶之源。</p><p>那么，学完今天这节课后，你是否可以在其他的开源项目中，找到类似的性能优化点呢？</p><h2>课件参考</h2><p>今天的课件已经上传到了我的GitHub上，你可以自己下载学习。</p><p>链接如下：<a href=\"https://github.com/iresty/geektime-slides\">https://github.com/iresty/geektime-slides</a></p><p>如果有不清楚的地方，你可以在留言区提问，另也可以在留言区分享你的学习心得。期待与你的对话，也欢迎你把这篇文章分享给你的同事、朋友，我们一起交流、一起进步。</p>","neighbors":{"left":{"article_title":"34 | 特别放送：OpenResty编码指南","id":116204},"right":{"article_title":"36 | 盘点OpenResty的各种调试手段","id":116491}},"comments":[{"had_liked":false,"id":123832,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1565768577,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5860735873","product_id":100028301,"comment_content":"感觉ingress-nginx贡献者和我们一样，一脸蒙蔽啊，哈哈。","like_count":2,"discussions":[{"author":{"id":1009422,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","nickname":"eason2017","note":"","ucode":"E070BA624FA490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291595,"discussion_content":"其实还是要熟练使用后自然就熟悉了。自己踩踩坑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594884682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}