{"id":67684,"title":"134 | Prometheus ç›‘æ§æœ€ä½³å®è·µ","content":"æ— ","comments":[{"had_liked":false,"id":103141,"user_name":"ğŸ’€WILL-betağŸ’€","can_delete":false,"product_type":"c3","uid":1044424,"ip_address":"","ucode":"22DA1271C705B3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ef/c8/9d9581cb.jpg","comment_is_top":false,"comment_ctime":1560387500,"is_pvip":false,"replies":[{"id":37702,"content":"ä¸ç›´æ¥æ”¯æŒï¼Œé™¤éä½ å®šåˆ¶Prometheusçš„æºç ã€‚å»ºè®®å¼€å‘ä¸€ä¸ªSideCar(æ¯”å¦‚ç”¨java)ï¼Œè¿™ä¸ªSideCarå’ŒPrometheusä½åœ¨ä¸€ä¸ªæœºå™¨ä¸Šï¼Œä¸¤ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªSideCarå¯ä»¥å¯¹æ¥è¯»å–Apolloçš„é…ç½®ï¼Œç„¶åæ›´æ–°Prometheusçš„æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ŒPromethueså¯ä»¥æ„ŸçŸ¥é…ç½®æ–‡ä»¶çš„å˜åŒ–å¹¶åŠ¨æ€åŠ è½½ã€‚è¿™ä¸ªå·¥ä½œé‡ä¸æ˜¯å¾ˆå¤§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1560678459,"ip_address":"","comment_id":103141,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"è¯·é—®è€å¸ˆï¼šPrometheusæ”¯æŒé€šè¿‡Apolloå®ç°åŠ¨æ€é…ç½®å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453751,"discussion_content":"ä¸ç›´æ¥æ”¯æŒï¼Œé™¤éä½ å®šåˆ¶Prometheusçš„æºç ã€‚å»ºè®®å¼€å‘ä¸€ä¸ªSideCar(æ¯”å¦‚ç”¨java)ï¼Œè¿™ä¸ªSideCarå’ŒPrometheusä½åœ¨ä¸€ä¸ªæœºå™¨ä¸Šï¼Œä¸¤ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªSideCarå¯ä»¥å¯¹æ¥è¯»å–Apolloçš„é…ç½®ï¼Œç„¶åæ›´æ–°Prometheusçš„æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ŒPromethueså¯ä»¥æ„ŸçŸ¥é…ç½®æ–‡ä»¶çš„å˜åŒ–å¹¶åŠ¨æ€åŠ è½½ã€‚è¿™ä¸ªå·¥ä½œé‡ä¸æ˜¯å¾ˆå¤§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560678459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103712,"user_name":"åˆåŒå’å•æ˜¯ä¸€å¹´å•Š","can_delete":false,"product_type":"c3","uid":1000015,"ip_address":"","ucode":"E067320E537DEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/4f/ff1ac464.jpg","comment_is_top":false,"comment_ctime":1560496418,"is_pvip":false,"replies":[{"id":37710,"content":"AlertManagerä¸€èˆ¬å¼„ä¸€å°å°±å¤Ÿäº†(å®ƒæ˜¯æœ‰çŠ¶æ€çš„ä¸€èˆ¬ä¸èƒ½éƒ¨ä¸¤ä¸ª)ï¼ŒæŒ‚äº†æš‚æ—¶æ²¡æœ‰å‘Šè­¦ï¼Œå¦‚æœä¸æ”¾å¿ƒï¼Œå¯ä»¥åšä¸€å¥—å…ƒç›‘æ§ï¼Œä¹Ÿå°±æ˜¯å•ç‹¬å†æ­ä¸€å¥—Prometheus+AlertManagerï¼Œç”±å®ƒå»ç›‘æ§åŸæ¥é‚£å¥—Prometheus+AlertManagerã€‚Grafanaä¹Ÿä¸å¤ªè¦ç´§ï¼Œä¸€èˆ¬éƒ¨ä¸¤ä¸ªåšHAèº²åœ¨nginxåé¢å³å¯(https:&#47;&#47;grafana.com&#47;docs&#47;tutorials&#47;ha_setup&#47;)ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1560682454,"ip_address":"","comment_id":103712,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæƒ³è¯·é—®ä¸‹ Prometheus 3ç§æ–¹å¼é«˜å¯ç”¨æ¶æ„ å…¶ä¸­ Altermanager å•ç‹¬éƒ¨ç½²ä¸€å°å°±å¯ä»¥äº†æ˜¯å—ï¼Ÿè¿˜æœ‰ Grafana è¦æ€ä¹ˆéƒ¨ç½²æœ‰æ¨èæ–¹æ¡ˆå—","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453975,"discussion_content":"AlertManagerä¸€èˆ¬å¼„ä¸€å°å°±å¤Ÿäº†(å®ƒæ˜¯æœ‰çŠ¶æ€çš„ä¸€èˆ¬ä¸èƒ½éƒ¨ä¸¤ä¸ª)ï¼ŒæŒ‚äº†æš‚æ—¶æ²¡æœ‰å‘Šè­¦ï¼Œå¦‚æœä¸æ”¾å¿ƒï¼Œå¯ä»¥åšä¸€å¥—å…ƒç›‘æ§ï¼Œä¹Ÿå°±æ˜¯å•ç‹¬å†æ­ä¸€å¥—Prometheus+AlertManagerï¼Œç”±å®ƒå»ç›‘æ§åŸæ¥é‚£å¥—Prometheus+AlertManagerã€‚Grafanaä¹Ÿä¸å¤ªè¦ç´§ï¼Œä¸€èˆ¬éƒ¨ä¸¤ä¸ªåšHAèº²åœ¨nginxåé¢å³å¯(https://grafana.com/docs/tutorials/ha_setup/)ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560682454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214625,"user_name":"å¼ çˆ½","can_delete":false,"product_type":"c3","uid":1021129,"ip_address":"","ucode":"ED2969DA26E8E0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/94/c9/374a69f2.jpg","comment_is_top":false,"comment_ctime":1588774457,"is_pvip":false,"replies":[{"id":79673,"content":"æ•°æ®ä¸ä¼šé‡å¤ï¼Œå› ä¸ºæ¯ä¸ªPrometheuséƒ½æœ‰è‡ªå·±ç‹¬ç«‹å­˜å‚¨ï¼Œè¿™æ ·åšåªæ˜¯ä¸€ç§ç®€å•HAåšæ³•ï¼Œåªæ˜¯ä¼šé‡å¤æ‹‰å–ä¸¤æ¬¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1588949274,"ip_address":"","comment_id":214625,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"Prometheusæ˜¯pullçš„æ¨¡å¼ï¼Œå¦‚æœå¯ä¸¤å°å»pullåº”ç”¨çš„metricsï¼Œä¼šå­˜åœ¨é‡å¤æŠ“å–çš„æƒ…å†µï¼ŒHAåªæ˜¯åœ¨æ¥æ”¶è¯·æ±‚æ‰æœ‰æ„ä¹‰ï¼Œä¸å¤ªæ˜ç™½è¿™ç§HAå¦‚ä½•ä¿è¯åªæŠ“å–ä¸€æ¬¡æ•°æ®","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494144,"discussion_content":"æ•°æ®ä¸ä¼šé‡å¤ï¼Œå› ä¸ºæ¯ä¸ªPrometheuséƒ½æœ‰è‡ªå·±ç‹¬ç«‹å­˜å‚¨ï¼Œè¿™æ ·åšåªæ˜¯ä¸€ç§ç®€å•HAåšæ³•ï¼Œåªæ˜¯ä¼šé‡å¤æ‹‰å–ä¸¤æ¬¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588949274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181064,"user_name":"å¤©ç©ºå¤§æµ·","can_delete":false,"product_type":"c3","uid":1007748,"ip_address":"","ucode":"CF625DF1D89856","user_header":"https://static001.geekbang.org/account/avatar/00/0f/60/84/354dafcb.jpg","comment_is_top":false,"comment_ctime":1582468741,"is_pvip":false,"replies":[{"id":70411,"content":"çœ‹ä¸€ä¸ªä¸œè¥¿æ˜¯å¦æœ‰çŠ¶æ€ï¼Œä½ å°±çœ‹å®ƒæ˜¯å¦èƒ½æ°´å¹³æ— çŠ¶æ€æ‰©å®¹ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªPromethuesæœåŠ¡ï¼Œç„¶åéƒ¨ç½²å¤šä¸ªAlertManagerï¼Œå®é™…Promethueså¯ä»¥é…å…¶ä¸­ä¸€ä¸ªAlertManagerä½œä¸ºå‘Šè­¦ä¿¡æ¯æ¥å—è€…ï¼Œé‚£ä¹ˆå…¶å®ƒå¤šéƒ¨ç½²çš„AlertManagerå°±æ²¡ç”¨æµªè´¹äº†ï¼›ä½ ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªPrometheusé…ç½®æ‰€æœ‰çš„AlertManagerä½œä¸ºå‘Šè­¦ä¿¡æ¯æ¥æ”¶è€…ï¼Œé‚£ä¹ˆå½“Promethuesè§¦å‘å‘Šè­¦æ—¶ï¼Œè¿™æ—¶è¿™äº›AlertManagerä¼šå‘é€é‡å¤çš„å‘Šè­¦é€šçŸ¥ã€‚å…·ä½“åˆ¤æ–­AlertManageræœ‰çŠ¶æ€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1582637869,"ip_address":"","comment_id":181064,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"æ³¢æ³¢è€å¸ˆï¼ŒAlertManageræ˜¯æœ‰çŠ¶æ€çš„å§å…·ä½“éƒ½æŒ‡å“ªäº›åœ°æ–¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484904,"discussion_content":"çœ‹ä¸€ä¸ªä¸œè¥¿æ˜¯å¦æœ‰çŠ¶æ€ï¼Œä½ å°±çœ‹å®ƒæ˜¯å¦èƒ½æ°´å¹³æ— çŠ¶æ€æ‰©å®¹ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªPromethuesæœåŠ¡ï¼Œç„¶åéƒ¨ç½²å¤šä¸ªAlertManagerï¼Œå®é™…Promethueså¯ä»¥é…å…¶ä¸­ä¸€ä¸ªAlertManagerä½œä¸ºå‘Šè­¦ä¿¡æ¯æ¥å—è€…ï¼Œé‚£ä¹ˆå…¶å®ƒå¤šéƒ¨ç½²çš„AlertManagerå°±æ²¡ç”¨æµªè´¹äº†ï¼›ä½ ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªPrometheusé…ç½®æ‰€æœ‰çš„AlertManagerä½œä¸ºå‘Šè­¦ä¿¡æ¯æ¥æ”¶è€…ï¼Œé‚£ä¹ˆå½“Promethuesè§¦å‘å‘Šè­¦æ—¶ï¼Œè¿™æ—¶è¿™äº›AlertManagerä¼šå‘é€é‡å¤çš„å‘Šè­¦é€šçŸ¥ã€‚å…·ä½“åˆ¤æ–­AlertManageræœ‰çŠ¶æ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582637869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007748,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/60/84/354dafcb.jpg","nickname":"å¤©ç©ºå¤§æµ·","note":"","ucode":"CF625DF1D89856","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":185826,"discussion_content":"æ²¡æ˜ç™½ï¼Œé…å¤šä¸ªnginxä¹Ÿä¼šå¸¦æ¥é‡å¤æµé‡å•Šï¼Œé…ä¸€ä¸ªå…¶ä»–éƒ¨ç½²çš„nginxä¹Ÿæµªè´¹äº†ï¼Œä½†nginxæ˜¯æ— çŠ¶æ€çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582641003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103143,"user_name":"ğŸ’€WILL-betağŸ’€","can_delete":false,"product_type":"c3","uid":1044424,"ip_address":"","ucode":"22DA1271C705B3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ef/c8/9d9581cb.jpg","comment_is_top":false,"comment_ctime":1560387742,"is_pvip":false,"replies":[{"id":37703,"content":"ä¸¤ä¸ªæ–¹æ¡ˆï¼Œä¸€ä¸ªæ˜¯é‡‡ç”¨Promethuesçš„æœåŠ¡å‘ç°ServiceDiscoveryæœºåˆ¶ï¼Œå¯ä»¥å‘ç°å…·ä½“çš„æœåŠ¡å®ä¾‹ç„¶åé‡‡é›†metricsï¼Œå¯èƒ½éœ€è¦é’ˆå¯¹äº‘æœåŠ¡çš„APIè¿›è¡Œæ‰©å±•ï¼Œå…·ä½“å¯ä»¥å‚è€ƒhttps:&#47;&#47;github.com&#47;prometheus&#47;prometheus&#47;tree&#47;master&#47;discoveryï¼Œè¿™é‡Œå·²ç»æœ‰ä¸€äº›äº‘æœåŠ¡å¯¹æ¥æ”¯æŒã€‚ç¬¬äºŒæ–¹æ¡ˆæ˜¯é‡‡ç”¨pushæ¨¡å¼ï¼Œè®©å®¢æˆ·ç«¯ç›´æ¥æŠŠmetrics pushå‡ºæ¥åˆ°Promethuesçš„Push Gatewayï¼Œè¿™ä¸ªPromethuesä¹Ÿæ˜¯æ”¯æŒçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ³¢","uid":1030344,"ctime":1560678879,"ip_address":"","comment_id":103143,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"è¯·é—®è€å¸ˆï¼šPrometheuså¦‚ä½•æ”¯æŒéšè—åœ¨ä¸€ä¸ªåŸŸååçš„å¤šä¸ªå®ä¾‹å‘¢ï¼Ÿæ¯”å¦‚å„äº‘å‚å•†æä¾›çš„WebAPPçš„PaaSï¼Œä¸€ä¸ªåŸŸååæœ‰å¤šä¸ªå®ä¾‹ï¼Œè²Œä¼¼ä¸èƒ½è®©Prometheuså»æ‹‰å„ä¸ªå®ä¾‹çš„Metricsæ•°æ®ã€‚åªèƒ½è‡ªå·±å†™exporterå¯¹å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"æ¨æ³¢","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453753,"discussion_content":"ä¸¤ä¸ªæ–¹æ¡ˆï¼Œä¸€ä¸ªæ˜¯é‡‡ç”¨Promethuesçš„æœåŠ¡å‘ç°ServiceDiscoveryæœºåˆ¶ï¼Œå¯ä»¥å‘ç°å…·ä½“çš„æœåŠ¡å®ä¾‹ç„¶åé‡‡é›†metricsï¼Œå¯èƒ½éœ€è¦é’ˆå¯¹äº‘æœåŠ¡çš„APIè¿›è¡Œæ‰©å±•ï¼Œå…·ä½“å¯ä»¥å‚è€ƒhttps://github.com/prometheus/prometheus/tree/master/discoveryï¼Œè¿™é‡Œå·²ç»æœ‰ä¸€äº›äº‘æœåŠ¡å¯¹æ¥æ”¯æŒã€‚ç¬¬äºŒæ–¹æ¡ˆæ˜¯é‡‡ç”¨pushæ¨¡å¼ï¼Œè®©å®¢æˆ·ç«¯ç›´æ¥æŠŠmetrics pushå‡ºæ¥åˆ°Promethuesçš„Push Gatewayï¼Œè¿™ä¸ªPromethuesä¹Ÿæ˜¯æ”¯æŒçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560678879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}