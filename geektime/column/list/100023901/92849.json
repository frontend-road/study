{"id":92849,"title":"27 | å¹¶å‘å·¥å…·ç±»æ¨¡å—çƒ­ç‚¹é—®é¢˜ç­”ç–‘","content":"<p>å‰é¢æˆ‘ä»¬ç”¨13ç¯‡æ–‡ç« çš„å†…å®¹ä»‹ç»äº†Java SDKæä¾›çš„å¹¶å‘å·¥å…·ç±»ï¼Œè¿™äº›å·¥å…·ç±»éƒ½æ˜¯ä¹…ç»è€ƒéªŒçš„ï¼Œæ‰€ä»¥å­¦å¥½ç”¨å¥½å®ƒä»¬å¯¹äºè§£å†³å¹¶å‘é—®é¢˜éå¸¸é‡è¦ã€‚æˆ‘ä»¬åœ¨ä»‹ç»è¿™äº›å·¥å…·ç±»çš„æ—¶å€™ï¼Œé‡ç‚¹ä»‹ç»äº†è¿™äº›å·¥å…·ç±»çš„äº§ç”ŸèƒŒæ™¯ã€åº”ç”¨åœºæ™¯ä»¥åŠå®ç°åŸç†ï¼Œç›®çš„å°±æ˜¯è®©ä½ åœ¨é¢å¯¹å¹¶å‘é—®é¢˜çš„æ—¶å€™ï¼Œæœ‰æ€è·¯ï¼Œæœ‰åŠæ³•ã€‚åªæœ‰æ€è·¯ã€åŠæ³•æœ‰äº†ï¼Œæ‰è°ˆå¾—ä¸Šå¼€å§‹åŠ¨æ‰‹è§£å†³é—®é¢˜ã€‚</p><p>å½“ç„¶äº†ï¼Œåªæœ‰æ€è·¯å’ŒåŠæ³•è¿˜ä¸è¶³ä»¥æŠŠé—®é¢˜è§£å†³ï¼Œæœ€ç»ˆè¿˜æ˜¯è¦åŠ¨æ‰‹å®è·µçš„ï¼Œæˆ‘è§‰å¾—åœ¨å®è·µä¸­æœ‰ä¸¤æ–¹é¢çš„é—®é¢˜éœ€è¦é‡ç‚¹å…³æ³¨ï¼š<strong>ç»†èŠ‚é—®é¢˜ä¸æœ€ä½³å®è·µ</strong>ã€‚åƒé‡Œä¹‹å ¤æ¯äºèšç©´ï¼Œç»†èŠ‚è™½ç„¶ä¸èƒ½ä¿è¯æˆåŠŸï¼Œä½†æ˜¯å¯ä»¥å¯¼è‡´å¤±è´¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€ç›´éƒ½å¼ºè°ƒè¦å…³æ³¨ç»†èŠ‚ã€‚è€Œæœ€ä½³å®è·µæ˜¯å‰äººçš„ç»éªŒæ€»ç»“ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ä¸è¦é˜´æ²Ÿé‡Œç¿»èˆ¹ï¼Œæ‰€ä»¥æ²¡æœ‰åè¶³çš„ç†ç”±ï¼Œä¸€å®šè¦éµå®ˆã€‚</p><p>ä¸ºäº†è®©ä½ å­¦å®Œå³å­¦å³ç”¨ï¼Œæˆ‘åœ¨æ¯ç¯‡æ–‡ç« çš„æœ€åéƒ½ç»™ä½ ç•™äº†é“æ€è€ƒé¢˜ã€‚è¿™13ç¯‡æ–‡ç« çš„13ä¸ªæ€è€ƒé¢˜ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç›¸å…³å·¥å…·ç±»åœ¨ä½¿ç”¨ä¸­éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€äº›ç»†èŠ‚é—®é¢˜ï¼Œå·¥ä½œä¸­å®¹æ˜“ç¢°åˆ°ä¸”è´¹ç¥è´¹åŠ›ï¼Œæ‰€ä»¥å’±ä»¬ä»Šå¤©å°±æ¥ä¸€ä¸€åˆ†æã€‚</p><h2>1. while(true) æ€»ä¸è®©äººçœå¿ƒ</h2><p><a href=\"https://time.geekbang.org/column/article/87779\">ã€Š14 | Lock&amp;Conditionï¼ˆä¸Šï¼‰ï¼šéšè—åœ¨å¹¶å‘åŒ…ä¸­çš„ç®¡ç¨‹ã€‹</a>çš„æ€è€ƒé¢˜ï¼Œæœ¬æ„æ˜¯é€šè¿‡ç ´åä¸å¯æŠ¢å æ¡ä»¶æ¥é¿å…æ­»é”é—®é¢˜ï¼Œä½†æ˜¯å®ƒçš„å®ç°ä¸­æœ‰ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ï¼š while(true) æ²¡æœ‰breakæ¡ä»¶ï¼Œä»è€Œå¯¼è‡´äº†æ­»å¾ªç¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸ªå®ç°è™½ç„¶ä¸å­˜åœ¨æ­»é”é—®é¢˜ï¼Œä½†è¿˜æ˜¯å­˜åœ¨æ´»é”é—®é¢˜çš„ï¼Œè§£å†³æ´»é”é—®é¢˜å¾ˆç®€å•ï¼Œåªéœ€è¦éšæœºç­‰å¾…ä¸€å°æ®µæ—¶é—´å°±å¯ä»¥äº†ã€‚</p><!-- [[[read_end]]] --><p>ä¿®å¤åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»…ä»…ä¿®æ”¹äº†ä¸¤ä¸ªåœ°æ–¹ï¼Œä¸€å¤„æ˜¯è½¬è´¦æˆåŠŸä¹‹åbreakï¼Œå¦ä¸€å¤„æ˜¯åœ¨whileå¾ªç¯ä½“ç»“æŸå‰å¢åŠ äº†<code>Thread.sleep(éšæœºæ—¶é—´)</code>ã€‚</p><pre><code>class Account {\n  private int balance;\n  private final Lock lock\n          = new ReentrantLock();\n  // è½¬è´¦\n  void transfer(Account tar, int amt){\n    while (true) {\n      if(this.lock.tryLock()) {\n        try {\n          if (tar.lock.tryLock()) {\n            try {\n              this.balance -= amt;\n              tar.balance += amt;\n              //æ–°å¢ï¼šé€€å‡ºå¾ªç¯\n              break;\n            } finally {\n              tar.lock.unlock();\n            }\n          }//if\n        } finally {\n          this.lock.unlock();\n        }\n      }//if\n      //æ–°å¢ï¼šsleepä¸€ä¸ªéšæœºæ—¶é—´é¿å…æ´»é”\n      Thread.sleep(éšæœºæ—¶é—´);\n    }//while\n  }//transfer\n}\n</code></pre><p>è¿™ä¸ªæ€è€ƒé¢˜é‡Œé¢çš„while(true)é—®é¢˜è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çœ‹å‡ºæ¥çš„ï¼Œ<strong>ä½†ä¸æ˜¯æ‰€æœ‰çš„while(true)é—®é¢˜éƒ½è¿™ä¹ˆæ˜¾è€Œæ˜“è§çš„</strong>ï¼Œå¾ˆå¤šéƒ½éšè—å¾—æ¯”è¾ƒæ·±ã€‚</p><p>ä¾‹å¦‚ï¼Œ<a href=\"https://time.geekbang.org/column/article/90515\">ã€Š21 | åŸå­ç±»ï¼šæ— é”å·¥å…·ç±»çš„å…¸èŒƒã€‹</a>çš„æ€è€ƒé¢˜æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªwhile(true)ï¼Œä¸è¿‡å®ƒéšè—å¾—å°±æ¯”è¾ƒæ·±äº†ã€‚çœ‹ä¸Šå» <code>while(!rf.compareAndSet(or, nr))</code> æ˜¯æœ‰ç»ˆæ­¢æ¡ä»¶çš„ï¼Œè€Œä¸”è·‘å•çº¿ç¨‹æµ‹è¯•ä¸€ç›´éƒ½æ²¡æœ‰é—®é¢˜ã€‚å®é™…ä¸Šå´å­˜åœ¨ä¸¥é‡çš„å¹¶å‘é—®é¢˜ï¼Œé—®é¢˜å°±å‡ºåœ¨å¯¹orçš„èµ‹å€¼åœ¨whileå¾ªç¯ä¹‹å¤–ï¼Œè¿™æ ·æ¯æ¬¡å¾ªç¯orçš„å€¼éƒ½ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥ä¸€æ—¦æœ‰ä¸€æ¬¡å¾ªç¯rf.compareAndSet(or, nr)çš„å€¼ç­‰äºfalseï¼Œé‚£ä¹‹åæ— è®ºå¾ªç¯å¤šå°‘æ¬¡ï¼Œéƒ½ä¼šç­‰äºfalseã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå˜æˆäº†while(true)é—®é¢˜ã€‚æ—¢ç„¶æ‰¾åˆ°äº†åŸå› ï¼Œä¿®æ”¹å°±å¾ˆç®€å•äº†ï¼Œåªè¦æŠŠå¯¹orçš„èµ‹å€¼ç§»åˆ°whileå¾ªç¯ä¹‹å†…å°±å¯ä»¥äº†ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class SafeWM {\n  class WMRange{\n    final int upper;\n    final int lower;\n    WMRange(int upper,int lower){\n    //çœç•¥æ„é€ å‡½æ•°å®ç°\n    }\n  }\n  final AtomicReference&lt;WMRange&gt;\n    rf = new AtomicReference&lt;&gt;(\n      new WMRange(0,0)\n    );\n  // è®¾ç½®åº“å­˜ä¸Šé™\n  void setUpper(int v){\n    WMRange nr;\n    WMRange or;\n    //åŸä»£ç åœ¨è¿™é‡Œ\n    //WMRange or=rf.get();\n    do{\n      //ç§»åŠ¨åˆ°æ­¤å¤„\n      //æ¯ä¸ªå›åˆéƒ½éœ€è¦é‡æ–°è·å–æ—§å€¼\n      or = rf.get();\n      // æ£€æŸ¥å‚æ•°åˆæ³•æ€§\n      if(v &lt; or.lower){\n        throw new IllegalArgumentException();\n      }\n      nr = new\n        WMRange(v, or.lower);\n    }while(!rf.compareAndSet(or, nr));\n  }\n}\n</code></pre><h2>2. signalAll() æ€»è®©äººçœå¿ƒ</h2><p><a href=\"https://time.geekbang.org/column/article/88487\">ã€Š15 | Lock&amp;Conditionï¼ˆä¸‹ï¼‰ï¼šDubboå¦‚ä½•ç”¨ç®¡ç¨‹å®ç°å¼‚æ­¥è½¬åŒæ­¥ï¼Ÿã€‹</a>çš„æ€è€ƒé¢˜æ˜¯å…³äºsignal()å’ŒsignalAll()çš„ï¼ŒDubboæœ€è¿‘å·²ç»æŠŠsignal()æ”¹æˆsignalAll()äº†ï¼Œæˆ‘è§‰å¾—ç”¨signal()ä¹Ÿä¸èƒ½è¯´é”™ï¼Œä½†çš„ç¡®æ˜¯<strong>ç”¨signalAll()ä¼šæ›´å®‰å…¨</strong>ã€‚æˆ‘ä¸ªäººä¹Ÿå€¾å‘äºä½¿ç”¨signalAll()ï¼Œå› ä¸ºæˆ‘ä»¬å†™ç¨‹åºï¼Œä¸æ˜¯åšæ•°å­¦é¢˜ï¼Œè€Œæ˜¯åœ¨æå·¥ç¨‹ï¼Œå·¥ç¨‹ä¸­ä¼šæœ‰å¾ˆå¤šä¸ç¨³å®šçš„å› ç´ ï¼Œæ›´æœ‰å¾ˆå¤šä½ é¢„æ–™ä¸åˆ°çš„æƒ…å†µå‘ç”Ÿï¼Œæ‰€ä»¥ä¸è¦è®©ä½ çš„ä»£ç é“¤è€Œèµ°é™©ï¼Œå°½é‡ä½¿ç”¨æ›´ç¨³å¦¥çš„æ–¹æ¡ˆå’Œè®¾è®¡ã€‚Dubboä¿®æ”¹åçš„ç›¸å…³ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>// RPCç»“æœè¿”å›æ—¶è°ƒç”¨è¯¥æ–¹æ³•   \nprivate void doReceived(Response res) {\n  lock.lock();\n  try {\n    response = res;\n    done.signalAll();\n  } finally {\n    lock.unlock();\n  }\n}\n</code></pre><h2>3. Semaphoreéœ€è¦é”ä¸­é”</h2><p><a href=\"https://time.geekbang.org/column/article/88499\">ã€Š16 | Semaphoreï¼šå¦‚ä½•å¿«é€Ÿå®ç°ä¸€ä¸ªé™æµå™¨ï¼Ÿã€‹</a>çš„æ€è€ƒé¢˜æ˜¯å¯¹è±¡æ± çš„ä¾‹å­ä¸­Vectorèƒ½å¦æ¢æˆArrayListï¼Œç­”æ¡ˆæ˜¯ä¸å¯ä»¥çš„ã€‚Semaphoreå¯ä»¥å…è®¸å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªä¸´ç•ŒåŒºï¼Œé‚£å°±æ„å‘³ç€å¯èƒ½å­˜åœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ArrayListï¼Œè€ŒArrayListä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥å¯¹è±¡æ± çš„ä¾‹å­ä¸­æ˜¯ä¸èƒ½å¤Ÿå°†Vectoræ¢æˆArrayListçš„ã€‚<strong>Semaphoreå…è®¸å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªä¸´ç•ŒåŒºï¼Œè¿™ä¹Ÿæ˜¯ä¸€æŠŠåŒåˆƒå‰‘</strong>ï¼Œå½“å¤šä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œå¦‚æœéœ€è¦è®¿é—®å…±äº«å˜é‡å°±ä¼šå­˜åœ¨å¹¶å‘é—®é¢˜ï¼Œæ‰€ä»¥å¿…é¡»<strong>åŠ é”</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´Semaphoreéœ€è¦é”ä¸­é”ã€‚</p><h2>4. é”çš„ç”³è¯·å’Œé‡Šæ”¾è¦æˆå¯¹å‡ºç°</h2><p><a href=\"https://time.geekbang.org/column/article/89456\">ã€Š18 | StampedLockï¼šæœ‰æ²¡æœ‰æ¯”è¯»å†™é”æ›´å¿«çš„é”ï¼Ÿã€‹</a>æ€è€ƒé¢˜çš„Bugå‡ºåœ¨æ²¡æœ‰æ­£ç¡®åœ°é‡Šæ”¾é”ã€‚é”çš„ç”³è¯·å’Œé‡Šæ”¾è¦æˆå¯¹å‡ºç°ï¼Œå¯¹æ­¤æˆ‘ä»¬æœ‰ä¸€ä¸ªæœ€ä½³å®è·µï¼Œå°±æ˜¯ä½¿ç”¨<strong>try{}finally{}</strong>ï¼Œä½†æ˜¯try{}finally{}å¹¶ä¸èƒ½è§£å†³æ‰€æœ‰é”çš„é‡Šæ”¾é—®é¢˜ã€‚æ¯”å¦‚ç¤ºä¾‹ä»£ç ä¸­ï¼Œé”çš„å‡çº§ä¼šç”Ÿæˆæ–°çš„stamp ï¼Œè€Œfinallyä¸­é‡Šæ”¾é”ç”¨çš„æ˜¯é”å‡çº§å‰çš„stampï¼Œæœ¬è´¨ä¸Šè¿™ä¹Ÿå±äºé”çš„ç”³è¯·å’Œé‡Šæ”¾æ²¡æœ‰æˆå¯¹å‡ºç°ï¼Œåªæ˜¯å®ƒéšè—å¾—æœ‰ç‚¹æ·±ã€‚è§£å†³è¿™ä¸ªé—®é¢˜å€’ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦å¯¹stamp é‡æ–°èµ‹å€¼å°±å¯ä»¥äº†ï¼Œä¿®å¤åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>private double x, y;\nfinal StampedLock sl = new StampedLock();\n// å­˜åœ¨é—®é¢˜çš„æ–¹æ³•\nvoid moveIfAtOrigin(double newX, double newY){\n long stamp = sl.readLock();\n try {\n  while(x == 0.0 &amp;&amp; y == 0.0){\n    long ws = sl.tryConvertToWriteLock(stamp);\n    if (ws != 0L) {\n      //é—®é¢˜å‡ºåœ¨æ²¡æœ‰å¯¹stampé‡æ–°èµ‹å€¼\n      //æ–°å¢ä¸‹é¢ä¸€è¡Œ\n      stamp = ws;\n      x = newX;\n      y = newY;\n      break;\n    } else {\n      sl.unlockRead(stamp);\n      stamp = sl.writeLock();\n    }\n  }\n } finally {\n  //æ­¤å¤„unlockçš„æ˜¯stamp\n  sl.unlock(stamp);\n}\n</code></pre><h2>5. å›è°ƒæ€»è¦å…³å¿ƒæ‰§è¡Œçº¿ç¨‹æ˜¯è°</h2><p><a href=\"https://time.geekbang.org/column/article/89461\">ã€Š19 | CountDownLatchå’ŒCyclicBarrierï¼šå¦‚ä½•è®©å¤šçº¿ç¨‹æ­¥è°ƒä¸€è‡´ï¼Ÿã€‹</a>çš„æ€è€ƒé¢˜æ˜¯ï¼šCyclicBarrierçš„å›è°ƒå‡½æ•°ä½¿ç”¨äº†ä¸€ä¸ªå›ºå®šå¤§å°ä¸º1çš„çº¿ç¨‹æ± ï¼Œæ˜¯å¦åˆç†ï¼Ÿæˆ‘è§‰å¾—æ˜¯åˆç†çš„ï¼Œå¯ä»¥ä»ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢æ¥åˆ†æã€‚</p><p>ç¬¬ä¸€ä¸ªæ˜¯çº¿ç¨‹æ± å¤§å°æ˜¯1ï¼Œåªæœ‰1ä¸ªçº¿ç¨‹ï¼Œä¸»è¦åŸå› æ˜¯check()æ–¹æ³•çš„è€—æ—¶æ¯”getPOrders()å’ŒgetDOrders()éƒ½è¦çŸ­ï¼Œæ‰€ä»¥æ²¡å¿…è¦ç”¨å¤šä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶å•çº¿ç¨‹èƒ½ä¿è¯è®¿é—®çš„æ•°æ®ä¸å­˜åœ¨å¹¶å‘é—®é¢˜ã€‚</p><p>ç¬¬äºŒä¸ªæ˜¯ä½¿ç”¨äº†çº¿ç¨‹æ± ï¼Œå¦‚æœä¸ä½¿ç”¨ï¼Œç›´æ¥åœ¨å›è°ƒå‡½æ•°é‡Œè°ƒç”¨check()æ–¹æ³•æ˜¯å¦å¯ä»¥å‘¢ï¼Ÿç»å¯¹ä¸å¯ä»¥ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™ä¸ªè¦åˆ†æä¸€ä¸‹å›è°ƒå‡½æ•°å’Œå”¤é†’ç­‰å¾…çº¿ç¨‹ä¹‹é—´çš„å…³ç³»ã€‚ä¸‹é¢æ˜¯CyclicBarrierç›¸å…³çš„æºç ï¼Œé€šè¿‡æºç ä½ ä¼šå‘ç°CyclicBarrieræ˜¯åŒæ­¥è°ƒç”¨å›è°ƒå‡½æ•°ä¹‹åæ‰å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°é‡Œç›´æ¥è°ƒç”¨check()æ–¹æ³•ï¼Œé‚£å°±æ„å‘³ç€åœ¨æ‰§è¡Œcheck()çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½åŒæ—¶æ‰§è¡ŒgetPOrders()å’ŒgetDOrders()çš„ï¼Œè¿™æ ·å°±èµ·ä¸åˆ°æå‡æ€§èƒ½çš„ä½œç”¨ã€‚</p><pre><code>try {\n  //barrierCommandæ˜¯å›è°ƒå‡½æ•°\n  final Runnable command = barrierCommand;\n  //è°ƒç”¨å›è°ƒå‡½æ•°\n  if (command != null)\n\tcommand.run();\n  ranAction = true;\n  //å”¤é†’ç­‰å¾…çš„çº¿ç¨‹\n  nextGeneration();\n  return 0;\n} finally {\n  if (!ranAction)\n\tbreakBarrier();\n}\n</code></pre><p>æ‰€ä»¥ï¼Œå½“é‡åˆ°å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œä½ åº”è¯¥æœ¬èƒ½åœ°é—®è‡ªå·±ï¼šæ‰§è¡Œå›è°ƒå‡½æ•°çš„çº¿ç¨‹æ˜¯å“ªä¸€ä¸ªï¼Ÿè¿™ä¸ªåœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹éå¸¸é‡è¦ã€‚å› ä¸ºä¸åŒçº¿ç¨‹ThreadLocalé‡Œçš„æ•°æ®æ˜¯ä¸åŒçš„ï¼Œæœ‰äº›æ¡†æ¶æ¯”å¦‚Springå°±ç”¨ThreadLocalæ¥ç®¡ç†äº‹åŠ¡ï¼Œå¦‚æœä¸æ¸…æ¥šå›è°ƒå‡½æ•°ç”¨çš„æ˜¯å“ªä¸ªçº¿ç¨‹ï¼Œå¾ˆå¯èƒ½ä¼šå¯¼è‡´é”™è¯¯çš„äº‹åŠ¡ç®¡ç†ï¼Œå¹¶æœ€ç»ˆå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p><p>CyclicBarrierçš„å›è°ƒå‡½æ•°ç©¶ç«Ÿæ˜¯å“ªä¸ªçº¿ç¨‹æ‰§è¡Œçš„å‘¢ï¼Ÿå¦‚æœä½ åˆ†ææºç ï¼Œä½ ä¼šå‘ç°æ‰§è¡Œå›è°ƒå‡½æ•°çš„çº¿ç¨‹æ˜¯å°†CyclicBarrierå†…éƒ¨è®¡æ•°å™¨å‡åˆ° 0 çš„é‚£ä¸ªçº¿ç¨‹ã€‚æ‰€ä»¥æˆ‘ä»¬å‰é¢è®²æ‰§è¡Œcheck()çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½åŒæ—¶æ‰§è¡ŒgetPOrders()å’ŒgetDOrders()ï¼Œå› ä¸ºæ‰§è¡Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„çº¿ç¨‹ä¸€ä¸ªåœ¨ç­‰å¾…ï¼Œä¸€ä¸ªæ­£åœ¨å¿™ç€æ‰§è¡Œcheck()ã€‚</p><p>å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼š<strong>å½“çœ‹åˆ°å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œä¸€å®šé—®ä¸€é—®æ‰§è¡Œå›è°ƒå‡½æ•°çš„çº¿ç¨‹æ˜¯è°</strong>ã€‚</p><h2>6. å…±äº«çº¿ç¨‹æ± ï¼šæœ‰ç¦åŒäº«å°±è¦æœ‰éš¾åŒå½“</h2><p><a href=\"https://time.geekbang.org/column/article/91569\">ã€Š24 | CompletableFutureï¼šå¼‚æ­¥ç¼–ç¨‹æ²¡é‚£ä¹ˆéš¾ã€‹</a>çš„æ€è€ƒé¢˜æ˜¯ä¸‹åˆ—ä»£ç æ˜¯å¦æœ‰é—®é¢˜ã€‚å¾ˆå¤šåŒå­¦éƒ½å‘ç°è¿™æ®µä»£ç çš„é—®é¢˜äº†ï¼Œä¾‹å¦‚æ²¡æœ‰å¼‚å¸¸å¤„ç†ã€é€»è¾‘ä¸ä¸¥è°¨ç­‰ç­‰ï¼Œä¸è¿‡æˆ‘æ›´æƒ³è®©ä½ å…³æ³¨çš„æ˜¯ï¼šfindRuleByJdbc()è¿™ä¸ªæ–¹æ³•éšè—ç€ä¸€ä¸ªé˜»å¡å¼I/Oï¼Œè¿™æ„å‘³ç€ä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹ã€‚é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„CompletableFutureå…±äº«ä¸€ä¸ªForkJoinPoolï¼Œå½“æœ‰é˜»å¡å¼I/Oæ—¶ï¼Œå¯èƒ½å¯¼è‡´æ‰€æœ‰çš„ForkJoinPoolçº¿ç¨‹éƒ½é˜»å¡ï¼Œè¿›è€Œå½±å“æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><pre><code>//é‡‡è´­è®¢å•\nPurchersOrder po;\nCompletableFuture&lt;Boolean&gt; cf = \n  CompletableFuture.supplyAsync(()-&gt;{\n    //åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢è§„åˆ™\n    return findRuleByJdbc();\n  }).thenApply(r -&gt; {\n    //è§„åˆ™æ ¡éªŒ\n    return check(po, r);\n});\nBoolean isOk = cf.join();\n</code></pre><p>åˆ©ç”¨å…±äº«ï¼Œå¾€å¾€èƒ½è®©æˆ‘ä»¬å¿«é€Ÿå®ç°åŠŸèƒ½ï¼Œæ‰€è°“æ˜¯æœ‰ç¦åŒäº«ï¼Œä½†æ˜¯ä»£ä»·å°±æ˜¯æœ‰éš¾è¦åŒå½“ã€‚åœ¨å¼ºè°ƒé«˜å¯ç”¨çš„ä»Šå¤©ï¼Œå¤§å¤šæ•°äººæ›´å€¾å‘äºä½¿ç”¨éš”ç¦»çš„æ–¹æ¡ˆã€‚</p><h2>7. çº¿ä¸Šé—®é¢˜å®šä½çš„åˆ©å™¨ï¼šçº¿ç¨‹æ ˆdump</h2><p><a href=\"https://time.geekbang.org/column/article/88909\">ã€Š17 | ReadWriteLockï¼šå¦‚ä½•å¿«é€Ÿå®ç°ä¸€ä¸ªå®Œå¤‡çš„ç¼“å­˜ï¼Ÿã€‹</a>å’Œ<a href=\"https://time.geekbang.org/column/article/90201\">ã€Š20 | å¹¶å‘å®¹å™¨ï¼šéƒ½æœ‰å“ªäº›â€œå‘â€éœ€è¦æˆ‘ä»¬å¡«ï¼Ÿã€‹</a>çš„æ€è€ƒé¢˜ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å®šä½çº¿ä¸Šå¹¶å‘é—®é¢˜ï¼Œæ–¹æ¡ˆå¾ˆç®€å•ï¼Œå°±æ˜¯é€šè¿‡æŸ¥çœ‹çº¿ç¨‹æ ˆæ¥å®šä½é—®é¢˜ã€‚é‡ç‚¹æ˜¯æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€ï¼Œåˆ†æçº¿ç¨‹è¿›å…¥è¯¥çŠ¶æ€çš„åŸå› æ˜¯å¦åˆç†ï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://time.geekbang.org/column/article/86366\">ã€Š09 | Javaçº¿ç¨‹ï¼ˆä¸Šï¼‰ï¼šJavaçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‹</a>æ¥åŠ æ·±ç†è§£ã€‚</p><p>ä¸ºäº†ä¾¿äºåˆ†æå®šä½çº¿ç¨‹é—®é¢˜ï¼Œä½ éœ€è¦ç»™çº¿ç¨‹èµ‹äºˆä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—ï¼Œå¯¹äºçº¿ç¨‹æ± å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ThreadFactoryæ¥ç»™çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹èµ‹äºˆæœ‰æ„ä¹‰çš„åå­—ï¼Œä¹Ÿå¯ä»¥åœ¨æ‰§è¡Œrun()æ–¹æ³•æ—¶é€šè¿‡<code>Thread.currentThread().setName();</code>æ¥ç»™çº¿ç¨‹èµ‹äºˆä¸€ä¸ªæ›´è´´è¿‘ä¸šåŠ¡çš„åå­—ã€‚</p><h2>æ€»ç»“</h2><p>Javaå¹¶å‘å·¥å…·ç±»åˆ°ä»Šå¤©ä¸ºæ­¢ï¼Œå°±å‘Šä¸€æ®µè½äº†ï¼Œç”±äºç¯‡å¹…åŸå› ï¼Œä¸èƒ½æ¯ä¸ªå·¥å…·ç±»éƒ½è¯¦ç»†ä»‹ç»ã€‚Javaå¹¶å‘å·¥å…·ç±»å†…å®¹ç¹æ‚ï¼Œç†Ÿç»ƒä½¿ç”¨æ˜¯éœ€è¦ä¸€ä¸ªè¿‡ç¨‹çš„ï¼Œè€Œä¸”éœ€è¦å¤šåŠ å®è·µã€‚å¸Œæœ›ä½ å­¦å®Œè¿™ä¸ªæ¨¡å—ä¹‹åï¼Œé‡åˆ°å¹¶å‘é—®é¢˜æ—¶æœ€èµ·ç èƒ½çŸ¥é“ç”¨å“ªäº›å·¥å…·å¯ä»¥è§£å†³ã€‚è‡³äºå·¥å…·ä½¿ç”¨çš„ç»†èŠ‚å’Œæœ€ä½³å®è·µï¼Œæˆ‘æ€»ç»“çš„ä¹Ÿåªæ˜¯æˆ‘è®¤ä¸ºé‡è¦çš„ã€‚ç”±äºæ¯ä¸ªäººçš„æ€ç»´æ–¹å¼å’Œç¼–ç ä¹ æƒ¯ä¸åŒï¼Œä¹Ÿè®¸æˆ‘è®¤ä¸ºä¸é‡è¦çš„ï¼Œæ°æ°æ˜¯ä½ çš„çŸ­æ¿ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å†…å®¹æ›´å¤šåœ°è¿˜æ˜¯éœ€è¦ä½ å»å®è·µï¼Œåœ¨å®è·µä¸­å…»æˆè‰¯å¥½çš„ç¼–ç ä¹ æƒ¯ï¼Œä¸æ–­çº æ­£é”™è¯¯çš„æ€ç»´æ–¹å¼ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":90741,"user_name":"Sunqc","can_delete":false,"product_type":"c1","uid":1473717,"ip_address":"","ucode":"2C54659635403F","user_header":"https://static001.geekbang.org/account/avatar/00/16/7c/b5/4a7a2bd4.jpg","comment_is_top":false,"comment_ctime":1556622722,"is_pvip":false,"replies":[{"id":"34459","content":"æ„Ÿè°¢æ„Ÿè°¢ğŸ˜ƒ","user_name":"ä½œè€…å›å¤","comment_id":90741,"uid":"1269969","ip_address":"","utype":1,"ctime":1558362745,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":4,"race_medal":0,"score":"310794268034","product_id":100023901,"comment_content":"å¬è€å¸ˆè®²è¯¾æ˜¯ä¸€ç§äº«å—ï¼Œå¾ˆèˆ’æœï¼Œä»æ–‡å­—å™è¿°å°±æ„Ÿè§‰å¾ˆå’Œè”¼å¯äº²ï¼Œä¸åƒæœ‰çš„è€å¸ˆï¼Œè™½ç„¶æŠ€æœ¯ä¹Ÿå¾ˆç‰›ï¼Œä½†æ˜¯è¯é‡Œè¯å¤–é€æ¼ç€è‡ªå·±å¤šç‰›å¤šç‰›çš„æ„Ÿè§‰","like_count":72,"discussions":[{"author":{"id":1897671,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f4/c7/037235c9.jpg","nickname":"kimoti","note":"","ucode":"0A78077408C2B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269908,"discussion_content":"åŒæ„Ÿ,å…¶å®é«˜äººéƒ½æ˜¯å¾ˆè°¦è™šçš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1589960937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1277081,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg","nickname":"lakeslove","note":"","ucode":"65E14D29D3C981","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1897671,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f4/c7/037235c9.jpg","nickname":"kimoti","note":"","ucode":"0A78077408C2B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319193,"discussion_content":"æŸäº›é«˜äººçœŸå¿ƒä¸è°¦è™šï¼Œè¯¾ç¨‹æ³›æ³›è€Œè°ˆï¼Œé—®ç‚¹ç»†èŠ‚é—®é¢˜è¿˜ä¸æ­ç†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603961041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":269908,"ip_address":""},"score":319193,"extra":""}]},{"author":{"id":2342014,"avatar":"https://static001.geekbang.org/account/avatar/00/23/bc/7e/c1422d90.jpg","nickname":"æ‰“å·¥äººçš„ç²¾ç¥é¢†è¢–","note":"","ucode":"8EC3864768368D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537372,"discussion_content":"ä½ è¯´çš„æ˜¯ä¸æ˜¯é©¬å£«å…µ?","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1639044291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448634,"discussion_content":"æ„Ÿè°¢æ„Ÿè°¢ğŸ˜ƒ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1558362745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144575,"user_name":"ipofss","can_delete":false,"product_type":"c1","uid":1018620,"ip_address":"","ucode":"DE3061C9259F9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","comment_is_top":false,"comment_ctime":1571972366,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"57406547214","product_id":100023901,"comment_content":"è¿™ä¸€ç« çš„å†…å®¹ï¼Œæˆ‘è§‰å¾—ç­‰æŠŠæ•´ä¸ªä¸“æ å­¦å®Œä¹‹åï¼Œè¿˜æœ‰å¿…è¦å†ä»”ç»†å›é¡¾ä¸€éï¼Œç„¶åå†åŠ ä¸Šå…¶ä»–çš„æ–‡ç« ï¼Œè‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸‹demoï¼Œæ‰èƒ½è®°ä½çš„å¤šä¸€äº›ï¼Œæ¯•ç«Ÿå¹³æ—¶å·¥ä½œä¸­ç”¨åˆ°å¤šçº¿ç¨‹çš„åœ°æ–¹ä¸å¤š","like_count":14,"discussions":[{"author":{"id":1441830,"avatar":"https://static001.geekbang.org/account/avatar/00/16/00/26/a80010f0.jpg","nickname":"JL","note":"","ucode":"07BD8069AE2CBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310177,"discussion_content":"ç”¨å¾—ä¸å¤š ä½†æ˜¯é¢è¯•æ—¶å€™é—®åˆ°ç‰¹åˆ«å¤šğŸ¤£","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601664611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1513825,"avatar":"https://static001.geekbang.org/account/avatar/00/17/19/61/119cbde2.jpg","nickname":"Dolly","note":"","ucode":"CC74978F393055","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1441830,"avatar":"https://static001.geekbang.org/account/avatar/00/16/00/26/a80010f0.jpg","nickname":"JL","note":"","ucode":"07BD8069AE2CBD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361298,"discussion_content":"æ‰å¿ƒäº†ï¼Œå¹³æ—¶crudç³Šé¡µé¢ï¼Œé¢è¯•å¤šçº¿ç¨‹é«˜å¹¶å‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1616639853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":310177,"ip_address":""},"score":361298,"extra":""}]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279856,"discussion_content":"ç¡®å®å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591435707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136964,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1569567571,"is_pvip":true,"replies":[{"id":"52707","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":136964,"uid":"1269969","ip_address":"","utype":1,"ctime":1569667474,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"31634338643","product_id":100023901,"comment_content":"å…³äºçº¿ç¨‹åä½œé‚£é‡Œä¸ºä»€ä¹ˆä½¿ç”¨å•çº¿ç¨‹çº¿ç¨‹æ± ï¼Œç‰¹æ„å›å¤´é‡æ–°çœ‹äº†ä¸‹ä»£ç ï¼Œç»ˆäºæ˜ç™½äº†è€å¸ˆçš„åšæ³•ï¼Œå› ä¸ºå›è°ƒå‡½æ•°ä¹Ÿä¼šå æ®ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹ï¼Œå¦‚æœä¸ä½¿ç”¨é¢å¤–çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆå°±ä¼šå­˜åœ¨éƒ¨åˆ†ä¸²è¡Œï¼Œå°±è¾¾ä¸åˆ°å®Œå…¨åˆ†å·¥å¹¶è¡Œï¼Œä»¥æå‡ååçš„æ•ˆæœäº†","like_count":7,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468883,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569667474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053955,"avatar":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","nickname":"è€ƒä¼‘","note":"","ucode":"968DFC00D6D0CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":45449,"discussion_content":"æˆ‘ä¹Ÿæ˜¯åˆå›å»çœ‹äº†ä¸€éæ‰æ˜ç™½ï¼Œåˆ©ç”¨çº¿ç¨‹æ± æ‰§è¡Œcheck()æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸ºäº†ä¿è¯checkçš„å¼‚æ­¥è°ƒç”¨ï¼Œè¿›è€Œæå‡ç³»ç»Ÿçš„æ€§èƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573039605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90568,"user_name":"é‚±","can_delete":false,"product_type":"c1","uid":1443771,"ip_address":"","ucode":"6235D4CDA8B8C3","user_header":"https://static001.geekbang.org/account/avatar/00/16/07/bb/97ba4ccd.jpg","comment_is_top":false,"comment_ctime":1556582591,"is_pvip":false,"replies":[{"id":"32444","content":"è¿™ä¸ªè¿˜æ˜¯è¦çœ‹å®é™…åœºæ™¯ï¼Œä¸»è¦æ˜¯è€ƒè™‘æ•°æ®åº“äº‹åŠ¡ï¼Œè¿˜æœ‰çº¿ç¨‹æ± æ˜¯ä¸æ˜¯éš”ç¦»çš„","user_name":"ä½œè€…å›å¤","comment_id":90568,"uid":"1269969","ip_address":"","utype":1,"ctime":1556590269,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"31621353663","product_id":100023901,"comment_content":"ç‹è€å¸ˆä½ å¥½ï¼Œæˆ‘æƒ³é—®æ‚¨ä¸€ä¸ªé—®é¢˜:åœ¨å®é™…çš„é¡¹ç›®ä¸­ä½¿ç”¨çº¿ç¨‹æ± å¹¶è¡Œæ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯å’Œæ•°æ®åº“çš„äº¤äº’éƒ½ä¸è¦æ”¾åœ¨çº¿ç¨‹æ± å½“ä¸­","like_count":7,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448572,"discussion_content":"è¿™ä¸ªè¿˜æ˜¯è¦çœ‹å®é™…åœºæ™¯ï¼Œä¸»è¦æ˜¯è€ƒè™‘æ•°æ®åº“äº‹åŠ¡ï¼Œè¿˜æœ‰çº¿ç¨‹æ± æ˜¯ä¸æ˜¯éš”ç¦»çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556590269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90709,"user_name":"é‡è§é˜³å…‰","can_delete":false,"product_type":"c1","uid":1203576,"ip_address":"","ucode":"378E5D37B3CD0E","user_header":"https://static001.geekbang.org/account/avatar/00/12/5d/78/f011d586.jpg","comment_is_top":false,"comment_ctime":1556614294,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"27326418070","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¦‚æœè¯´æ¯ä¸ªä¸åŒçš„ä¸šåŠ¡éƒ½éœ€è¦ä¸åŒçš„çº¿ç¨‹æ± å»å¤„ç†ï¼Œé‚£è¿™æ ·çº¿ç¨‹æ± ä¸æ˜¯è¶Šæ¥è¶Šå¤šï¼Œè¿™ç§åº”è¯¥å¦‚ä½•è§£å†³","like_count":7,"discussions":[{"author":{"id":1174199,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ea/b7/1a18a39d.jpg","nickname":"5-åˆ˜æ–°æ³¢(Arvin)","note":"","ucode":"DBD135D2587A93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206188,"discussion_content":"éœ€è¦æ§åˆ¶å„ä¸ªçº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„æ•°é‡ï¼Œçº¿ç¨‹æ± èµ·äº†éš”ç¦»å’Œå¹¶å‘çš„ä½œç”¨ï¼Œåªæœ‰åœ¨æœ€å…³é”®çš„åœ°æ–¹ç”¨ï¼Œæ¯”å¦‚â€œæ…¢é€Ÿâ€ï¼Œâ€œåˆ†å‘â€ç­‰åœºæ™¯ã€‚å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ„æ€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584370797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369099,"discussion_content":"å¯¹æ“ä½œç³»ç»Ÿæ¥è¯´éƒ½ä¸€æ ·ï¼Œè™½ç„¶ä½ è‡ªå·±æœ‰ä¸åŒçš„æ± å­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618928773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180569,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1582339283,"is_pvip":false,"replies":[{"id":"70315","content":"æœ‰æ—¶å€™æ˜æ˜çŸ¥é“æ–¹æ³•è¿”å›å€¼ä¸ä¼šä¸ºç©ºï¼Œä¾ç„¶ä¼šåˆ¤æ–­ä¸€ä¸‹ï¼Œè¿™ä¸ªåªæ˜¯æœ€ä½³å®è·µè€Œå·²","user_name":"ä½œè€…å›å¤","comment_id":180569,"uid":"1269969","ip_address":"","utype":1,"ctime":1582553889,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"18762208467","product_id":100023901,"comment_content":"2. signalAll() æ€»è®©äººçœå¿ƒ<br>å¦‚æœéå¸¸æ˜ç¡®çš„çŸ¥é“ åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨é˜»å¡ç­‰å¾…ï¼Œæ˜ç¡®çš„å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™æ ·ä¸æ›´å¥½å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484716,"discussion_content":"æœ‰æ—¶å€™æ˜æ˜çŸ¥é“æ–¹æ³•è¿”å›å€¼ä¸ä¼šä¸ºç©ºï¼Œä¾ç„¶ä¼šåˆ¤æ–­ä¸€ä¸‹ï¼Œè¿™ä¸ªåªæ˜¯æœ€ä½³å®è·µè€Œå·²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582553889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90553,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1556554304,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18736423488","product_id":100023901,"comment_content":"æ‰“å¡ï¼Œè™½ç„¶æ²¡æœ‰æ·±å…¥äº†è§£æ¯ä¸ªå·¥å…·ç±»ï¼Œä½†ç¡®å®äº†è§£æ›´å¤šäº†ã€‚","like_count":5},{"had_liked":false,"id":219176,"user_name":"kimoti","can_delete":false,"product_type":"c1","uid":1897671,"ip_address":"","ucode":"0A78077408C2B1","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f4/c7/037235c9.jpg","comment_is_top":false,"comment_ctime":1589961387,"is_pvip":false,"replies":[{"id":"93196","content":"å…±äº«ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œåªè¦æœ‰ä¸€ä¸ªé˜»å¡æ–¹æ³•ï¼Œæœ€ç»ˆæ‰€æœ‰çº¿ç¨‹éƒ½ä¼šé˜»å¡","user_name":"ä½œè€…å›å¤","comment_id":219176,"uid":"1269969","ip_address":"","utype":1,"ctime":1603458015,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":4,"race_medal":0,"score":"14474863275","product_id":100023901,"comment_content":"æƒ³è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆå½“ä¸€ä¸ªçº¿ç¨‹é‡åˆ°é˜»å¡å¼IOçš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹éƒ½ä¼šé˜»å¡å‘¢ï¼Ÿ<br>å…¶ä»–çº¿ç¨‹å¹¶æ²¡æœ‰é‡åˆ°é˜»å¡å¼IOå‘€ã€‚","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495703,"discussion_content":"å…±äº«ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œåªè¦æœ‰ä¸€ä¸ªé˜»å¡æ–¹æ³•ï¼Œæœ€ç»ˆæ‰€æœ‰çº¿ç¨‹éƒ½ä¼šé˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603458015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1756574,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/icHLBNHJGoTGGF6vSDCgQg13cXvVgwyicAHu5icZtwJ9diaibj493mkCEXJ1bKc6Lqquaf4FnCzoxeGa5QIj77ZeCew/132","nickname":"Geek_c387a8","note":"","ucode":"643C6E82310DAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570760,"discussion_content":"è¿™ä¸ªé—®é¢˜æˆ‘ä¹Ÿæœ‰ç‚¹ç–‘é—®ï¼Œç›®å‰çœ‹åˆ°åªè°ƒç”¨ä¸€æ¬¡ï¼Œæ„æ€æ˜¯ä¸æ˜¯ï¼Œå¦‚æœæ˜¯å¾ªç¯ä¸åœçš„è°ƒç”¨æˆ–è€…å¾ˆå¤šåœ°æ–¹ä½¿ç”¨CompletableFutureï¼Œæœ€ç»ˆçº¿ç¨‹æ± é‡Œæ‰€æœ‰çº¿ç¨‹éƒ½å µåœ¨é‚£ä¸ªé˜»å¡æ–¹æ³•é‡Œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651904036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":495703,"ip_address":""},"score":570760,"extra":""}]},{"author":{"id":2179875,"avatar":"https://static001.geekbang.org/account/avatar/00/21/43/23/d98fb8f7.jpg","nickname":"Niverkk","note":"","ucode":"F9220C10107E44","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378455,"discussion_content":"å¹¶å‘ï¼Œä¸€æ¬¡é˜»å¡ä¸€ä¸ªï¼Œæœ€åä¸å°±å…¨é˜»å¡ä½äº†å—ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623230227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1219139,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9a/43/d6291e76.jpg","nickname":"Qå®çš„å®","note":"","ucode":"55C575755A4905","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367433,"discussion_content":"ä¸ºå•¥ä¼šå¯¼è‡´æ¯ä¸ªçº¿ç¨‹éƒ½é˜»å¡å‘¢ï¼Œè¿˜æ˜¯æ²¡æ˜ç™½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618362676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91397,"user_name":"éƒ‘æ™¨Cc","can_delete":false,"product_type":"c1","uid":1324942,"ip_address":"","ucode":"57146E444D6329","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/8e/cf0b4575.jpg","comment_is_top":false,"comment_ctime":1557025240,"is_pvip":false,"replies":[{"id":"34444","content":"finallyéƒ½ä¼šæ‰§è¡Œ","user_name":"ä½œè€…å›å¤","comment_id":91397,"uid":"1269969","ip_address":"","utype":1,"ctime":1558359361,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"14441927128","product_id":100023901,"comment_content":"è€å¸ˆ ç¬¬ä¸€ä¸ªwhile(true)çš„ä¾‹å­ æ€ä¹ˆåœ¨é‡Šæ”¾é”ä¹‹å‰å°± breaké€€å‡ºå¾ªç¯äº†ï¼Ÿéš¾é“breakä¸è¯¥åœ¨é‡Šæ”¾é”ä¹‹åå—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448905,"discussion_content":"finallyéƒ½ä¼šæ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558359361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90793,"user_name":"ban","can_delete":false,"product_type":"c1","uid":1034204,"ip_address":"","ucode":"E523CE97E48266","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","comment_is_top":false,"comment_ctime":1556646014,"is_pvip":false,"replies":[{"id":"32574","content":"æ‰§è¡Œ check() çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½åŒæ—¶æ‰§è¡Œ getPOrders() å’Œ getDOrders()ï¼Œå› ä¸ºæ‰§è¡Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„çº¿ç¨‹ä¸€ä¸ªåœ¨ç­‰å¾…ï¼Œä¸€ä¸ªæ­£åœ¨å¿™ç€æ‰§è¡Œ check()ã€‚","user_name":"ä½œè€…å›å¤","comment_id":90793,"uid":"1269969","ip_address":"","utype":1,"ctime":1556700295,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"10146580606","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚<br>ç¬¬äº”é¢˜çš„é—®é¢˜é‡Œé¢ï¼šé€šè¿‡æºç ä½ ä¼šå‘ç° CyclicBarrier æ˜¯åŒæ­¥è°ƒç”¨å›è°ƒå‡½æ•°ä¹‹åæ‰å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°é‡Œç›´æ¥è°ƒç”¨ check() æ–¹æ³•ï¼Œé‚£å°±æ„å‘³ç€åœ¨æ‰§è¡Œ check() çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½åŒæ—¶æ‰§è¡Œ getPOrders() å’Œ getDOrders() çš„ã€‚<br><br>æ„æ€æ˜¯è¯´å¦‚æœå›è°ƒå‡½æ•°ç›´æ¥æ‰§è¡Œchekc()æ–¹æ³•ï¼Œä¼šè®©check()å’Œï¼ˆgetPOrders() å’Œ getDOrders() ï¼‰å˜æˆä¸²è¡Œçš„æƒ…å†µå—ï¼","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448656,"discussion_content":"æ‰§è¡Œ check() çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½åŒæ—¶æ‰§è¡Œ getPOrders() å’Œ getDOrders()ï¼Œå› ä¸ºæ‰§è¡Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„çº¿ç¨‹ä¸€ä¸ªåœ¨ç­‰å¾…ï¼Œä¸€ä¸ªæ­£åœ¨å¿™ç€æ‰§è¡Œ check()ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556700295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318020,"user_name":"æå‰‘","can_delete":false,"product_type":"c1","uid":2062321,"ip_address":"","ucode":"F37908267733AE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiaPl8VlycfEgPmuGacSAAdf08Ect7rfAtRzW2jiaslsPSicIDwibG8yObgcI0ooTLDl0zH4M17ziazjg/132","comment_is_top":false,"comment_ctime":1635125327,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5930092623","product_id":100023901,"comment_content":"å¹¶å‘å·¥å…·åº”è¯¥éƒ½æ¶‰åŠåˆ°aqså§ ä½†è¿™ä¸€å—æ²¡çœ‹è®²åˆ°","like_count":1},{"had_liked":false,"id":214669,"user_name":"è§å—å±±","can_delete":false,"product_type":"c1","uid":1118111,"ip_address":"","ucode":"6A8BB82B7573CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","comment_is_top":false,"comment_ctime":1588778570,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5883745866","product_id":100023901,"comment_content":"è¿™ç« å°±æ˜¯å·¥å…·å•Šï¼Œåªèƒ½ç†è§£æ¯ä¸ªå·¥å…·çš„åœºæ™¯ï¼Œæ‰èƒ½ç†Ÿç»ƒçš„åº”ç”¨ï¼Œè€Œå…·ä½“çš„ç»†èŠ‚åå€’ä¸æ˜¯éå¸¸é‡è¦äº†","like_count":1},{"had_liked":false,"id":354235,"user_name":"é«˜å¿—å¼º","can_delete":false,"product_type":"c1","uid":1276563,"ip_address":"è¾½å®","ucode":"68737002043752","user_header":"https://static001.geekbang.org/account/avatar/00/13/7a/93/c9302518.jpg","comment_is_top":false,"comment_ctime":1660206709,"is_pvip":false,"replies":[{"id":"129095","content":"ppt","user_name":"ä½œè€…å›å¤","comment_id":354235,"uid":"1269969","ip_address":"è¾½å®","utype":1,"ctime":1660884254,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1660206709","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹æ‚¨æ–‡ç« ä¸­çš„æµç¨‹å›¾ï¼Œä½¿ç”¨ä»€ä¹ˆå·¥å…·ç”»çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584503,"discussion_content":"ppt","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660884255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350029,"user_name":"ç å°å‘†","can_delete":false,"product_type":"c1","uid":2055809,"ip_address":"","ucode":"44532D6ABF9340","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5e/81/82709d6e.jpg","comment_is_top":false,"comment_ctime":1656512658,"is_pvip":true,"replies":[{"id":"127520","content":"è¿™ä¸ªä¸“æ å¯ä»¥å«&lt;javaå¹¶å‘ç¼–ç¨‹æ³¨&gt;ï¼Œçœ‹è¿™ä¸ªä¸“æ æœ‰åŠ©äºçœ‹æ‡‚å¥½å¤šå¹¶å‘ç¼–ç¨‹çš„ä¹¦ç±","user_name":"ä½œè€…å›å¤","comment_id":350029,"uid":"1269969","ip_address":"","utype":1,"ctime":1657004267,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1656512658","product_id":100023901,"comment_content":"çœ‹è€å¸ˆçš„è¯¾ç¨‹,ç»“åˆjavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ç»“åˆ,å­¦ä¹ èµ·æ¥æ›´åŠ å¥½å‘¢~~","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578769,"discussion_content":"è¿™ä¸ªä¸“æ å¯ä»¥å«&lt;javaå¹¶å‘ç¼–ç¨‹æ³¨&gt;ï¼Œçœ‹è¿™ä¸ªä¸“æ æœ‰åŠ©äºçœ‹æ‡‚å¥½å¤šå¹¶å‘ç¼–ç¨‹çš„ä¹¦ç±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657004267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269379,"user_name":"å¼ æ´‹","can_delete":false,"product_type":"c1","uid":1182914,"ip_address":"","ucode":"549BE5DEEF8417","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/c2/bad34a50.jpg","comment_is_top":false,"comment_ctime":1608628368,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1608628368","product_id":100023901,"comment_content":"ä¹‹å‰è¿˜å¯¹CyclicBarrier é‚£ç¯‡ä½¿ç”¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ± æœ‰ç–‘é—®ï¼Œé€šè¿‡ä»Šå¤©çš„è§£ç­”ï¼ŒèŒ…å¡é¡¿å¼€ï¼Œæ˜¯è‡ªå·±ä¹‹å‰çš„ç†è§£ç‰‡é¢äº†ã€‚","like_count":0},{"had_liked":false,"id":208765,"user_name":"InfoQ_e077cb303519","can_delete":false,"product_type":"c1","uid":1390669,"ip_address":"","ucode":"2CCA309DB2EF46","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLAK6F4BFT5ewhJEeZrjmRx5HxP8tvnNpJcpLlotHiadp0s6aL3d7LfMHEuQP6tibu80wUy8micVu4oQ/132","comment_is_top":false,"comment_ctime":1587434346,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587434346","product_id":100023901,"comment_content":"è€å¸ˆï¼Œåœ¨ä¸€ä¸ªé¡¹ç›®ä¸­çº¿ç¨‹æ± å…±äº«æ€ä¹ˆå®ç°æ¯”è¾ƒå¥½","like_count":0},{"had_liked":false,"id":186722,"user_name":"bbbi","can_delete":false,"product_type":"c1","uid":1682175,"ip_address":"","ucode":"9A539AEF791428","user_header":"https://static001.geekbang.org/account/avatar/00/19/aa/ff/e2c331e0.jpg","comment_is_top":false,"comment_ctime":1583911750,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583911750","product_id":100023901,"comment_content":"å·¥å…·ç±»ç¡®å®æœ‰ç‚¹å¤šï¼Œè€Œä¸”éƒ½æ˜¯å®è·µæ€§å¾ˆå¼ºçš„ï¼Œè¿™ä¸€éçœ‹ä»…ä»…æ˜¯èµ°é©¬è§‚èŠ±è€Œå·²","like_count":0},{"had_liked":false,"id":117435,"user_name":"ç§‹å¤©","can_delete":false,"product_type":"c1","uid":1057056,"ip_address":"","ucode":"A7E1D953EF7E17","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","comment_is_top":false,"comment_ctime":1564046788,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1564046788","product_id":100023901,"comment_content":"å¹¶å‘ç¼–ç¨‹è¿˜éœ€è¦å¤šè¸©å‘ï¼Œæœ€è¿‘å°±å› ä¸ºè¿™ä¸ªå¯¼è‡´ç³»ç»Ÿå‡ºç°å¼‚å¸¸ï¼Œè€Œå¯¼è‡´çº¿ç³»ç»Ÿcpuå æ»¡","like_count":0},{"had_liked":false,"id":112851,"user_name":"æ¨æ˜¥é¹","can_delete":false,"product_type":"c1","uid":1172056,"ip_address":"","ucode":"518F38232F97B5","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/58/8c8897c8.jpg","comment_is_top":false,"comment_ctime":1562831420,"is_pvip":false,"replies":[{"id":"41242","content":"å¾ˆåƒä¸¤é˜¶æ®µæäº¤çš„åœºæ™¯ï¼Œä½ å¯ä»¥è¯•ä¸€è¯•","user_name":"ä½œè€…å›å¤","comment_id":112851,"uid":"1269969","ip_address":"","utype":1,"ctime":1562940846,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"1562831420","product_id":100023901,"comment_content":"æ‚¨å¥½ã€‚æˆ‘ç°åœ¨çš„ä¸šåŠ¡éœ€æ±‚ï¼š<br>åªè¦æœ‰ä¸€ä¸ªå­çº¿ç¨‹å¤±è´¥ï¼Œé‚£ä¹ˆä¸»çº¿ç¨‹ä»¥åŠå…¶ä»–å­çº¿ç¨‹çš„äº‹åŠ¡ä¹Ÿè¦è¿›è¡Œå›æ»šï¼Ÿ<br>é‚£æ€ä¹ˆå®ç°æ¯”è¾ƒå¥½ä¸€äº›ã€‚è°¢è°¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457929,"discussion_content":"å¾ˆåƒä¸¤é˜¶æ®µæäº¤çš„åœºæ™¯ï¼Œä½ å¯ä»¥è¯•ä¸€è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562940846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018240,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/89/80/3666ced3.jpg","nickname":"é»„æµ©ç‰¹","note":"","ucode":"C3A4BBF4FB8519","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":34125,"discussion_content":"æˆ‘è§‰å¾—å¯ä»¥å­çº¿ç¨‹ä¸è´Ÿè´£æ•°æ®ä¿®æ”¹å…¨éƒ¨ä¼ å›ä¸»çº¿ç¨‹è¿›è¡Œä¿®æ”¹, ä¸»çº¿ç¨‹ç›‘ç£æ‰€æœ‰å­çº¿ç¨‹çš„å¼‚å¸¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571160753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93961,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1557676363,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1557676363","product_id":100023901,"comment_content":"å¤©å‘ï¼Œæˆ‘ä¸€ç›´ä»¥ä¸ºæ‰§è¡Œcheck()çš„æ˜¯ fixedPoolä¸­çš„çš„é‚£å”¯ä¸€ä¸€ä¸ªçº¿ç¨‹!","like_count":0,"discussions":[{"author":{"id":1063422,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/fe/99465085.jpg","nickname":"Adrian","note":"","ucode":"C11789EA4AFC69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4460,"discussion_content":"æ˜¯fixedPoolä¸­çš„é‚£ä¸ªçº¿ç¨‹æ‰§è¡Œçš„ï¼Œåªä¸è¿‡æ˜¯æ‰§è¡Œå›è°ƒå‡½æ•°çš„çº¿ç¨‹å”¤èµ·çº¿ç¨‹æ± å°†ä»»åŠ¡åšæ‰äº†ï¼Œä¸¢ç»™çº¿ç¨‹æ± åšæ‰ä¹‹åï¼Œå½“å‰çº¿ç¨‹å°±å¯ä»¥ç»§ç»­æ‰§è¡Œå¹¶å‘çš„getOrdersè¿™äº›æ“ä½œäº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1565437016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90886,"user_name":"æé±¼çš„æ¬ç –å¥‡","can_delete":false,"product_type":"c1","uid":1021539,"ip_address":"","ucode":"2FD194C4DA26E5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","comment_is_top":false,"comment_ctime":1556711261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556711261","product_id":100023901,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½åœ¨ä¸Šé¢æåˆ°çš„åŸæ–‡å‡ºé”™çš„ä»£ç è¾¹å†™ä¸Šæ­£ç¡®çš„åšï¼Œå¹¶ç”¨æ³¨é‡Šè¯´æ˜","like_count":0},{"had_liked":false,"id":90601,"user_name":"è‹å¿—è¾‰","can_delete":false,"product_type":"c1","uid":1068927,"ip_address":"","ucode":"39B25CE21C04EE","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/7f/5dc11380.jpg","comment_is_top":false,"comment_ctime":1556586644,"is_pvip":false,"replies":[{"id":"32446","content":"å¦‚æœcheckå°±ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œåº”è¯¥ä¸ä¼š","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1556590584,"ip_address":"","comment_id":90601,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556586644","product_id":100023901,"comment_content":"ç¬¬äº”ä¸ªé—®é¢˜ï¼Œæˆ‘è§‰å¾—åº”è¯¥å…ˆåŒæ­¥å–å®Œå‰ä¸¤ä¸ªèŠ‚ç‚¹å†å¼‚æ­¥è°ƒç”¨checké€»è¾‘ï¼Œå¦åˆ™æç«¯æƒ…å†µï¼Œå–åˆ°çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¸æ˜¯åŒ¹é…çš„","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448589,"discussion_content":"å¦‚æœcheckå°±ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œåº”è¯¥ä¸ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556590584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}