{"id":2421,"title":"29 | æ¨èé˜…è¯»ï¼šåˆ†å¸ƒå¼æ•°æ®è°ƒåº¦ç›¸å…³è®ºæ–‡","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆçš“ï¼Œç½‘åå·¦è€³æœµè€—å­ã€‚</p><p>æˆ‘ä»¬åœ¨ä¹‹å‰çš„ç³»åˆ—æ–‡ç« ã€Šåˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨ã€‹ä¸­è¯´è¿‡ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€ä¸ªå…³é”®æŠ€æœ¯æ˜¯â€œæ•°æ®è°ƒåº¦â€ã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦æ‰©å……èŠ‚ç‚¹ï¼Œæé«˜ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ï¼Œæ‰€ä»¥å¿…é¡»å†—ä½™æ•°æ®ç»“ç‚¹ã€‚</p><p>å»ºç«‹æ•°æ®ç»“ç‚¹çš„å‰¯æœ¬çœ‹ä¸Šå»å®¹æ˜“ï¼Œä½†å…¶ä¸­æœ€å¤§çš„éš¾ç‚¹å°±æ˜¯åˆ†å¸ƒå¼ä¸€è‡´æ€§çš„é—®é¢˜ã€‚ä¸‹é¢ï¼Œæˆ‘ä¼šå¸¦ä½ çœ‹çœ‹æ•°æ®è°ƒåº¦ä¸–ç•Œä¸­çš„ä¸€äº›æŠ€æœ¯ç‚¹ä»¥åŠç›¸å…³çš„æŠ€æœ¯è®ºæ–‡ã€‚</p><p>å¯¹äºåˆ†å¸ƒå¼çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œç›¸ä¿¡ä½ åœ¨å‰é¢çœ‹è¿‡å¥½å‡ æ¬¡ä¸‹é¢è¿™å¼ å›¾ã€‚ä»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒPaxosç®—æ³•çš„é‡è¦ç¨‹åº¦ã€‚è¿˜æœ‰äººè¯´ï¼Œåˆ†å¸ƒå¼ä¸‹çœŸæ­£çš„ä¸€è‡´æ€§ç®—æ³•åªæœ‰Paxosã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/95/50/95e0fd0862be0e3489713687bf363f50.png?wh=656*348\" alt=\"\"></p><h1>Paxosç®—æ³•</h1><p>Paxosç®—æ³•ï¼Œæ˜¯è±æ–¯åˆ©Â·å…°ä¼¯ç‰¹ï¼ˆLesile Lamportï¼‰äº1990å¹´æå‡ºæ¥çš„ä¸€ç§åŸºäºæ¶ˆæ¯ä¼ é€’ä¸”å…·æœ‰é«˜åº¦å®¹é”™ç‰¹æ€§çš„ä¸€è‡´æ€§ç®—æ³•ã€‚ä½†æ˜¯è¿™ä¸ªç®—æ³•å¤ªè¿‡äºæ™¦æ¶©ï¼Œæ‰€ä»¥ï¼Œä¸€ç›´ä»¥æ¥éƒ½å±äºç†è®ºä¸Šçš„è®ºæ–‡æ€§è´¨çš„ä¸œè¥¿ã€‚</p><p>å…¶è¿›å…¥å·¥ç¨‹åœˆçš„æºå¤´åœ¨äºGoogleçš„Chubby lockâ€”â€”ä¸€ä¸ªåˆ†å¸ƒå¼çš„é”æœåŠ¡ï¼Œç”¨åœ¨äº†Bigtableä¸­ã€‚ç›´åˆ°Googleå‘å¸ƒäº†ä¸‹é¢çš„è¿™ä¸¤ç¯‡è®ºæ–‡ï¼ŒPaxosæ‰è¿›å…¥åˆ°å·¥ç¨‹ç•Œçš„è§†é‡ä¸­æ¥ã€‚</p><ul>\n<li>\n<p><a href=\"https://static.googleusercontent.com/media/research.google.com/en//archive/bigtable-osdi06.pdf\">Bigtable: A Distributed Storage System for Structured Data</a></p>\n</li>\n<li>\n<p><a href=\"https://static.googleusercontent.com/media/research.google.com/en//archive/chubby-osdi06.pdf\">The Chubby lock service for loosely-coupled distributed systems</a></p>\n</li>\n</ul><!-- [[[read_end]]] --><p>Googleä¸Big Tableç›¸é½åçš„è¿˜æœ‰å¦å¤–ä¸¤ç¯‡è®ºæ–‡ã€‚</p><ul>\n<li>\n<p><a href=\"https://static.googleusercontent.com/media/research.google.com/en//archive/gfs-sosp2003.pdf\">The Google File System</a></p>\n</li>\n<li>\n<p><a href=\"https://static.googleusercontent.com/media/research.google.com/en//archive/mapreduce-osdi04.pdf\">MapReduce: Simplifed Data Processing on Large Clusters</a></p>\n</li>\n</ul><p>ä¸è¿‡ï¼Œè¿™å‡ ç¯‡è®ºæ–‡ä¸­å¹¶æ²¡æœ‰è®²å¤ªå¤šçš„Paxosç®—æ³•ç»†èŠ‚ä¸Šçš„å†…å®¹ï¼Œåè€Œåœ¨è®ºæ–‡<a href=\"https://static.googleusercontent.com/media/research.google.com/en//archive/paxos_made_live.pdf\">Paxos Made Live â€“ An Engineering Perspective</a> ä¸­æåˆ°äº†å¾ˆå¤šå·¥ç¨‹å®ç°çš„ç»†èŠ‚ã€‚æ¯”å¦‚ï¼ŒGoogleå®ç°Paxosæ—¶é‡åˆ°çš„å„ç§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œè®²è¿°äº†ä»ç†è®ºåˆ°å®é™…åº”ç”¨äºŒè€…ä¹‹é—´å·¨å¤§çš„é¸¿æ²Ÿã€‚</p><p>å°¤å…¶åœ¨æ»¡åœ°éƒ½æ˜¯å‘çš„åˆ†å¸ƒå¼ç³»ç»Ÿé¢†åŸŸï¼Œè¿™ç¯‡è®ºæ–‡æ²¡æœ‰è¿‡å¤šè®¨è®ºPaxosç®—æ³•æœ¬èº«ï¼Œè€Œæ˜¯åœ¨è®¨è®ºå¦‚ä½•å°†ç†è®ºåº”ç”¨åˆ°å®è·µï¼Œå¦‚ä½•å¼¥è¡¥ç†è®ºåœ¨å®è·µä¸­çš„ä¸è¶³ï¼Œå¦‚ä½•å–èˆï¼Œå¦‚ä½•æµ‹è¯•ï¼Œè¿™äº›åœ¨å®è·µä¸­çš„å„ç§é—®é¢˜æ‰æ˜¯å·¥ç¨‹çš„é­…åŠ›ã€‚æ‰€ä»¥å»ºè®®ä½ è¯»ä¸€è¯»ã€‚</p><p>Paxosç®—æ³•çš„åŸç‰ˆè®ºæ–‡æˆ‘åœ¨è¿™é‡Œå°±ä¸è´´äº†ï¼Œå› ä¸ºä¸€æ¥æ¯”è¾ƒæ™¦æ¶©ï¼ŒäºŒæ¥ä¹Ÿä¸æ˜“æ‡‚ã€‚æ¨èä¸€ç¯‡æ¯”è¾ƒå®¹æ˜“è¯»çš„â€”â€”<a href=\"http://harry.me/blog/2014/12/27/neat-algorithms-paxos/\">Neat Algorithms - Paxos</a> ï¼Œè¿™ç¯‡æ–‡ç« ä¸­è¿˜æœ‰ä¸€äº›å°åŠ¨ç”»å¸®åŠ©ä½ è¯»æ‡‚ã€‚è¿˜æœ‰ä¸€ç¯‡å¯ä»¥å¸®ä½ ç†è§£çš„æ–‡ç« æ˜¯<a href=\"https://angus.nyc/2012/paxos-by-example/\">Paxos by Examples</a>ã€‚</p><p>å¦‚æœä½ è¦è‡ªå·±å®ç°Paxosç®—æ³•ï¼Œè¿™é‡Œæœ‰å‡ ç¯‡æ–‡ç« ä¾›ä½ å‚è€ƒã€‚</p><ul>\n<li>\n<p><a href=\"http://www.inf.usi.ch/faculty/pedone/MScThesis/marco.pdf\">Paxos Made Code</a> ï¼Œä½œè€…æ˜¯é©¬å…‹ç½—Â·æ™®é‡Œç±³(Macro Primi)ï¼Œä»–å®ç°äº†ä¸€ä¸ªPaxoså¼€æºåº“<a href=\"http://libpaxos.sourceforge.net/\">libpaxos</a>ã€‚</p>\n</li>\n<li>\n<p><a href=\"http://www.cnds.jhu.edu/pub/papers/cnds-2008-2.pdf\">Paxos for System Builders</a> ï¼Œä»ä¸€ä¸ªç³»ç»Ÿå®ç°è€…çš„è§’åº¦è®¨è®ºäº†å®ç°Paxosçš„è¯¸å¤šå…·ä½“é—®é¢˜ï¼Œæ¯”å¦‚Leaderé€‰ä¸¾ã€æ•°æ®åŠæ¶ˆæ¯ç±»å‹ã€æµæ§ç­‰ã€‚</p>\n</li>\n<li>\n<p><a href=\"http://www.cs.cornell.edu/courses/cs7412/2011sp/paxos.pdf\">Paxos Made Moderately Complex</a>ï¼Œè¿™ç¯‡æ–‡ç« æ¯”è¾ƒæ–°ï¼Œæ˜¯2011å¹´æ‰å‘è¡¨çš„ã€‚æ–‡ä¸­ä»‹ç»äº†å¾ˆå¤šå®ç°ç»†èŠ‚ï¼Œå¹¶æä¾›äº†å¾ˆå¤šä¼ªä»£ç ï¼Œä¸€æ–¹é¢å¯ä»¥å¸®åŠ©ç†è§£Paxosï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥æ®æ­¤å®ç°ä¸€ä¸ªPaxosã€‚</p>\n</li>\n<li>\n<p><a href=\"https://web.stanford.edu/class/cs340v/papers/paxos.pdf\">Paxos Made Practical</a>ä¸»è¦ä»‹ç»å¦‚ä½•é‡‡ç”¨Paxoså®ç°replicationã€‚</p>\n</li>\n</ul><p>é™¤äº†é©¬å…‹ç½—Â·æ™®é‡Œç±³çš„é‚£ä¸ªå¼€æºå®ç°å¤–ï¼Œåˆ°GitHubä¸Šæ‰¾ä¸€ä¸‹ï¼Œä½ å°±ä¼šçœ‹åˆ°è¿™äº›é¡¹ç›®ï¼š<a href=\"https://github.com/cocagne/paxos\">Plain Paxos Implementations Python & Java</a>ã€<a href=\"https://github.com/xiang90/paxos\">A go implementation of the Paxos algorithm</a> ã€‚</p><p>ZooKeeper æœ‰å’ŒPaxoséå¸¸ç›¸ä¼¼çš„ä¸€äº›ç‰¹å¾ï¼Œæ¯”å¦‚é¢†å¯¼é€‰ä¸¾ã€ææ¡ˆå·ç­‰ï¼Œä½†æ˜¯å®ƒæœ¬è´¨ä¸Šä¸æ˜¯Paxosåè®®ï¼Œè€Œæ˜¯è‡ªå·±å‘æ˜çš„Zabåè®®ï¼Œæœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥è¯»ä¸€ä¸‹è¿™ç¯‡è®ºæ–‡ï¼š<br>\n<a href=\"https://pdfs.semanticscholar.org/fc11/031895c302dc52404d34de58af1a72f3b817.pdf\">Zab: High-Performance broadcast for primary-backup systems</a>ã€‚</p><p>ä¸Šè¿°çš„Google File Systemã€MapReduceã€Bigtableå¹¶ç§°ä¸ºâ€œè°·ä¸‰ç¯‡â€ã€‚åŸºæœ¬ä¸Šæ¥è¯´ï¼Œæ•´ä¸ªä¸–ç•Œå·¥ç¨‹ç³»ç»Ÿå› ä¸ºè¿™ä¸‰ç¯‡æ–‡ç« ï¼Œå¼€å§‹å‘åˆ†å¸ƒå¼ç³»ç»Ÿæ¼”åŒ–ï¼Œè€Œäº‘è®¡ç®—ä¸­çš„å¾ˆå¤šå…³é”®æŠ€æœ¯ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸‰ç¯‡æ–‡ç« æ‰å¾—ä»¥æˆç†Ÿã€‚åæ¥ï¼Œé›…è™å…¬å¸ä¹ŸåŸºäºè¿™ä¸‰ç¯‡è®ºæ–‡å¼€å‘äº†ä¸€ä¸ªå¼€æºçš„è½¯ä»¶â€”â€”Hadoopã€‚</p><h1>Raftç®—æ³•</h1><p>å› ä¸ºPaxosç®—æ³•å¤ªè¿‡äºæ™¦æ¶©ï¼Œè€Œä¸”åœ¨å®é™…çš„å®ç°ä¸Šæœ‰å¤ªå¤šçš„å‘ï¼Œå¹¶ä¸å¤ªå®¹æ˜“å†™å¯¹ã€‚æ‰€ä»¥ï¼Œæœ‰äººæå‡ºäº†å¦å¤–ä¸€ä¸ªä¸€è‡´æ€§çš„ç®—æ³•ï¼Œå«Raftã€‚å…¶åŸå§‹è®ºæ–‡æ˜¯<a href=\"https://raft.github.io/raft.pdf\"> In search of an Understandable Consensus Algorithm (Extended Version) </a>å¯»æ‰¾ä¸€ç§æ˜“äºç†è§£çš„Raftç®—æ³•ã€‚è¿™ç¯‡è®ºæ–‡çš„è¯‘æ–‡åœ¨InfoQä¸Šã€Š<a href=\"http://www.infoq.com/cn/articles/raft-paper\">Raftä¸€è‡´æ€§ç®—æ³•è®ºæ–‡è¯‘æ–‡</a>ã€‹ï¼Œæ¨èä½ è¯»ä¸€è¯»ã€‚</p><p>Raftç®—æ³•å’ŒPaxosçš„æ€§èƒ½å’ŒåŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒå’ŒPaxosç®—æ³•çš„ç»“æ„ä¸ä¸€æ ·ï¼Œè¿™ä½¿Raftç®—æ³•æ›´å®¹æ˜“ç†è§£å¹¶ä¸”æ›´å®¹æ˜“å®ç°ã€‚é‚£ä¹ˆRaftæ˜¯æ€æ ·åšåˆ°çš„å‘¢ï¼Ÿ</p><p>RaftæŠŠè¿™ä¸ªä¸€è‡´æ€§çš„ç®—æ³•åˆ†è§£æˆäº†å‡ ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯é¢†å¯¼é€‰ä¸¾ï¼ˆLeader Selectionï¼‰ï¼Œä¸€ä¸ªæ˜¯æ—¥å¿—å¤åˆ¶ï¼ˆLog Replicationï¼‰ï¼Œä¸€ä¸ªæ˜¯å®‰å…¨æ€§ï¼ˆSafetyï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯æˆå‘˜å˜åŒ–ï¼ˆMembership Changesï¼‰ã€‚å¯¹äºä¸€èˆ¬äººæ¥è¯´ï¼ŒRaftåè®®æ¯”Paxosçš„å­¦ä¹ æ›²çº¿æ›´ä½ï¼Œä¹Ÿæ›´å¹³æ»‘ã€‚</p><p>Raftåè®®ä¸­æœ‰ä¸€ä¸ªçŠ¶æ€æœºï¼Œæ¯ä¸ªç»“ç‚¹ä¼šæœ‰ä¸‰ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ Leaderã€Candidateå’ŒFollowerã€‚Followeråªå“åº”å…¶ä»–æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°ä»»ä½•ä¿¡æ¯ï¼Œå®ƒå°±ä¼šæˆä¸ºä¸€ä¸ªCandidateï¼Œå¹¶å¼€å§‹è¿›è¡Œé€‰ä¸¾ã€‚æ”¶åˆ°å¤§å¤šæ•°äººåŒæ„é€‰ç¥¨çš„äººä¼šæˆä¸ºæ–°çš„Leaderã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/40/33/408fe585546319dbe0e6c8422dc0e733.png?wh=865*386\" alt=\"\"></p><p>ä¸€æ—¦é€‰ä¸¾å‡ºäº†ä¸€ä¸ªLeaderï¼Œå®ƒå°±å¼€å§‹è´Ÿè´£æœåŠ¡å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚æ¯ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½åŒ…å«ä¸€ä¸ªè¦è¢«å¤åˆ¶çŠ¶æ€æœºæ‰§è¡Œçš„æŒ‡ä»¤ã€‚Leaderé¦–å…ˆè¦æŠŠè¿™ä¸ªæŒ‡ä»¤è¿½åŠ åˆ°logä¸­å½¢æˆä¸€ä¸ªæ–°çš„entryï¼Œç„¶åé€šè¿‡AppendEntries RPCå¹¶è¡Œåœ°æŠŠè¯¥entryå‘ç»™å…¶ä»–æœåŠ¡å™¨ï¼ˆserverï¼‰ã€‚å¦‚æœå…¶ä»–æœåŠ¡å™¨æ²¡å‘ç°é—®é¢˜ï¼Œå¤åˆ¶æˆåŠŸåä¼šç»™Leaderä¸€ä¸ªè¡¨ç¤ºæˆåŠŸçš„ACKã€‚</p><p>Leaderæ”¶åˆ°å¤§å¤šæ•°ACKååº”ç”¨è¯¥æ—¥å¿—ï¼Œè¿”å›å®¢æˆ·ç«¯æ‰§è¡Œç»“æœã€‚å¦‚æœFollowerå´©æºƒ ï¼ˆcrashï¼‰æˆ–è€…ä¸¢åŒ…ï¼ŒLeaderä¼šä¸æ–­é‡è¯•AppendEntries RPCã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/04/9f/0428dd28b89eba37de4e13ff9093ba9f.png?wh=748*560\" alt=\"\"></p><p>è¿™é‡Œæ¨èå‡ ä¸ªä¸é”™çš„Raftç®—æ³•çš„åŠ¨ç”»æ¼”ç¤ºã€‚</p><ul>\n<li>\n<p><a href=\"http://thesecretlivesofdata.com/raft/\">Raft â€“ The Secret Lives of Data</a></p>\n</li>\n<li>\n<p><a href=\"https://raft.github.io/\">Raft Consensus Algorithm</a></p>\n</li>\n<li>\n<p><a href=\"http://kanaka.github.io/raft.js/\">Raft Distributed Consensus Algorithm Visualization</a></p>\n</li>\n</ul><h1>é€»è¾‘é’Ÿå’Œå‘é‡é’Ÿ</h1><p>åé¢ï¼Œä¸šå†…åˆæå‡ºæ¥ä¸€äº›å·¥ç¨‹ä¸Šçš„ä¸œè¥¿ï¼Œæ¯”å¦‚Amazonçš„DynamoDBï¼Œå…¶è®ºæ–‡<a href=\"http://bnrg.eecs.berkeley.edu/~randy/Courses/CS294.F07/Dynamo.pdf\">Dynamo: Amazonâ€™s Highly Available Key Value Store</a> çš„å½±å“åŠ›ä¹Ÿå¾ˆå¤§ã€‚è¿™ç¯‡è®ºæ–‡ä¸­è®²è¿°äº†Amazon çš„DynamoDBæ˜¯å¦‚ä½•æ»¡è¶³ç³»ç»Ÿçš„é«˜å¯ç”¨ã€é«˜æ‰©å±•å’Œé«˜å¯é è¦æ±‚çš„ï¼Œå…¶ä¸­è¿˜å±•ç¤ºäº†ç³»ç»Ÿæ¶æ„æ˜¯å¦‚ä½•åšåˆ°æ•°æ®åˆ†å¸ƒä»¥åŠæ•°æ®ä¸€è‡´æ€§çš„ã€‚</p><p>GFSé‡‡ç”¨çš„æ˜¯æŸ¥è¡¨å¼çš„æ•°æ®åˆ†å¸ƒï¼Œè€ŒDynamoDBé‡‡ç”¨çš„æ˜¯è®¡ç®—å¼çš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ”¹è¿›ç‰ˆçš„é€šè¿‡è™šæ‹Ÿç»“ç‚¹å‡å°‘å¢åŠ ç»“ç‚¹å¸¦æ¥æ•°æ®è¿ç§»çš„ä¸€è‡´æ€§å“ˆå¸Œã€‚å¦å¤–ï¼Œè¿™ç¯‡è®ºæ–‡ä¸­è¿˜è®²è¿°äº†ä¸€ä¸ªNRWæ¨¡å¼ç”¨äºè®©ç”¨æˆ·å¯ä»¥çµæ´»åœ°åœ¨CAPç³»ç»Ÿä¸­é€‰å–å…¶ä¸­ä¸¤é¡¹ï¼Œè¿™ä½¿ç”¨åˆ°äº†Vector Clockâ€”â€”å‘é‡æ—¶é’Ÿæ¥æ£€æµ‹ç›¸åº”çš„æ•°æ®å†²çªã€‚æœ€åè¿˜ä»‹ç»äº†ä½¿ç”¨Handoffçš„æœºåˆ¶å¯¹å¯ç”¨æ€§çš„æå‡ã€‚</p><p>è¿™ç¯‡æ–‡ç« ä¸­æœ‰å‡ ä¸ªå…³é”®çš„æ¦‚å¿µï¼Œä¸€ä¸ªæ˜¯Vector Clockï¼Œå¦ä¸€ä¸ªæ˜¯Gossipåè®®ã€‚</p><p>æåˆ°å‘é‡æ—¶é’Ÿå°±éœ€è¦æä¸€ä¸‹é€»è¾‘æ—¶é’Ÿã€‚æ‰€è°“é€»è¾‘æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯åœ¨åˆ†å¸ƒç³»ç»Ÿä¸­ä¸ºäº†è§£å†³æ¶ˆæ¯æœ‰åºçš„é—®é¢˜ï¼Œç”±äºåœ¨ä¸åŒçš„æœºå™¨ä¸Šæœ‰ä¸åŒçš„æœ¬åœ°æ—¶é—´ï¼Œè¿™äº›æœ¬åœ°æ—¶é—´çš„åŒæ­¥å¾ˆéš¾æï¼Œä¼šå¯¼è‡´æ¶ˆæ¯ä¹±åºã€‚</p><p>äºæ˜¯Paxosç®—æ³•çš„å‘æ˜äººå…°ä¼¯ç‰¹ï¼ˆLamportï¼‰æäº†ä¸ªå‘é‡æ—¶é’Ÿï¼Œæ¯ä¸ªç³»ç»Ÿç»´æŠ¤ä¸€ä¸ªæœ¬åœ°çš„è®¡æ•°å™¨ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„é€»è¾‘æ—¶é’Ÿã€‚æ¯æ‰§è¡Œä¸€ä¸ªäº‹ä»¶ï¼ˆä¾‹å¦‚å‘ç½‘ç»œå‘é€æ¶ˆæ¯ï¼Œæˆ–æ˜¯äº¤ä»˜åˆ°åº”ç”¨å±‚ï¼‰éƒ½å¯¹è¿™ä¸ªè®¡æ•°å™¨åšåŠ 1æ“ä½œã€‚å½“è·¨ç³»ç»Ÿçš„æ—¶å€™ï¼Œåœ¨æ¶ˆæ¯ä½“ä¸Šé™„ç€æœ¬åœ°è®¡ç®—å™¨ï¼Œå½“æ¥æ”¶ç«¯æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œæ›´æ–°è‡ªå·±çš„è®¡æ•°å™¨ï¼ˆå–å¯¹ç«¯ä¼ æ¥çš„è®¡æ•°å™¨å’Œè‡ªå·±å½“æˆè®¡æ•°å™¨çš„æœ€å¤§å€¼ï¼‰ï¼Œä¹Ÿå°±æ˜¯è°ƒæ•´è‡ªå·±çš„æ—¶é’Ÿã€‚</p><p>é€»è¾‘æ—¶é’Ÿå¯ä»¥ä¿è¯ï¼Œå¦‚æœäº‹ä»¶Aå…ˆäºäº‹ä»¶Bï¼Œé‚£ä¹ˆäº‹ä»¶Açš„æ—¶é’Ÿä¸€å®šå°äºäº‹ä»¶Bçš„æ—¶é’Ÿï¼Œä½†æ˜¯è¿”è¿‡æ¥åˆ™æ— æ³•ä¿è¯ï¼Œå› ä¸ºè¿”è¿‡æ¥æ²¡æœ‰å› æœå…³ç³»ã€‚æ‰€ä»¥ï¼Œå‘é‡æ—¶é’Ÿè§£é‡Šäº†å› æœå…³ç³»ã€‚å‘é‡æ—¶é’Ÿç»´æŠ¤äº†æ•°æ®æ›´æ–°çš„ä¸€ç»„ç‰ˆæœ¬å·ï¼ˆç‰ˆæœ¬å·å…¶å®å°±æ˜¯ä½¿ç”¨é€»è¾‘æ—¶é’Ÿï¼‰ã€‚</p><p>å‡å¦‚ä¸€ä¸ªæ•°æ®éœ€è¦å­˜åœ¨ä¸‰ä¸ªç»“ç‚¹ä¸ŠAã€Bã€Cã€‚é‚£ä¹ˆå‘é‡ç»´åº¦å°±æ˜¯3ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ‰€æœ‰ç»“ç‚¹å¯¹äºè¿™ä¸ªæ•°æ®çš„å‘é‡ç‰ˆæœ¬æ˜¯[A:0, B:0, C:0]ã€‚å½“æœ‰æ•°æ®æ›´æ–°æ—¶ï¼Œæ¯”å¦‚ä»Aç»“ç‚¹æ›´æ–°ï¼Œé‚£ä¹ˆï¼Œæ•°æ®çš„å‘é‡ç‰ˆæœ¬å˜æˆ[A:1, B:0, C:0]ï¼Œç„¶åå‘å…¶ä»–ç»“ç‚¹å¤åˆ¶è¿™ä¸ªç‰ˆæœ¬ï¼Œå…¶åœ¨è¯­ä¹‰ä¸Šè¡¨ç¤ºä¸ºæˆ‘å½“å‰çš„æ•°æ®æ˜¯ç”±Aç»“æœæ›´æ–°çš„ï¼Œè€Œåœ¨é€»è¾‘ä¸Šåˆ™å¯ä»¥è®©åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ•°æ®æ›´æ–°çš„é¡ºåºæ‰¾åˆ°ç›¸å…³çš„å› æœå…³ç³»ã€‚</p><p>è¿™å…¶ä¸­çš„é€»è¾‘å…³ç³»ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹<a href=\"http://lass.cs.umass.edu/~shenoy/courses/spring05/lectures.html\">é©¬è¨è¯¸å¡å¤§å­¦è¯¾ç¨‹ Distributed Operating System </a>ä¸­ç¬¬10èŠ‚<a href=\"http://lass.cs.umass.edu/~shenoy/courses/spring05/lectures/Lec10.pdf\"> Clock Synchronization </a>è¿™ç¯‡è®²è®®ã€‚å…³äºVector Clockï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹<a href=\"http://basho.com/posts/technical/why-vector-clocks-are-easy/\"> Why Vector Clocks are Easy</a>å’Œ<a href=\"http://basho.com/posts/technical/why-vector-clocks-are-hard/\">Why Vector Clocks are Hard</a> è¿™ä¸¤ç¯‡æ–‡ç« ã€‚</p><h1>Gossipåè®®</h1><p>å¦å¤–ï¼ŒDynamoDBä¸­ä½¿ç”¨åˆ°äº†Gossipåè®®æ¥åšæ•°æ®åŒæ­¥ï¼Œè¿™ä¸ªåè®®çš„åŸå§‹è®ºæ–‡æ˜¯ <a href=\"https://www.cs.cornell.edu/home/rvr/papers/flowgossip.pdf\">Efficient Reconciliation and Flow Control for Anti-Entropy Protocols</a>ã€‚Gossipç®—æ³•ä¹Ÿæ˜¯Cassandraä½¿ç”¨çš„æ•°æ®å¤åˆ¶åè®®ã€‚è¿™ä¸ªåè®®å°±åƒå…«å¦å’Œè°£è¨€ä¼ æ’­ä¸€æ ·ï¼Œå¯ä»¥ â€œä¸€ä¼ åã€åä¼ ç™¾â€ä¼ æ’­å¼€æ¥ã€‚ä½†æ˜¯è¿™ä¸ªåè®®çœ‹ä¼¼ç®€å•ï¼Œç»†èŠ‚ä¸Šå´éå¸¸éº»çƒ¦ã€‚</p><p>æ ¹æ®è¿™ç¯‡è®ºæ–‡ï¼ŒèŠ‚ç‚¹ä¹‹é—´å­˜åœ¨ä¸‰ç§é€šä¿¡æ–¹å¼ã€‚</p><ul>\n<li>\n<p>pushæ–¹å¼ã€‚AèŠ‚ç‚¹å°†æ•°æ®(key,value,version)åŠå¯¹åº”çš„ç‰ˆæœ¬å·æ¨é€ç»™BèŠ‚ç‚¹ï¼ŒBèŠ‚ç‚¹æ›´æ–°Aä¸­æ¯”è‡ªå·±æ–°çš„æ•°æ®ã€‚</p>\n</li>\n<li>\n<p>pull æ–¹å¼ã€‚Aä»…å°†æ•°æ®key,versionæ¨é€ç»™Bï¼ŒBå°†æœ¬åœ°æ¯”Aæ–°çš„æ•°æ®(key,value,version)æ¨é€ç»™Aï¼ŒAæ›´æ–°æœ¬åœ°ã€‚</p>\n</li>\n<li>\n<p>push/pullæ–¹å¼ã€‚ä¸pullç±»ä¼¼ï¼Œåªæ˜¯å¤šäº†ä¸€æ­¥ï¼ŒAå†å°†æœ¬åœ°æ¯”Bæ–°çš„æ•°æ®æ¨é€ç»™Bï¼ŒBæ›´æ–°æœ¬åœ°ã€‚</p>\n</li>\n</ul><p>å¦‚æœæŠŠä¸¤ä¸ªèŠ‚ç‚¹æ•°æ®åŒæ­¥ä¸€æ¬¡å®šä¹‰ä¸ºä¸€ä¸ªå‘¨æœŸï¼Œé‚£ä¹ˆåœ¨ä¸€ä¸ªå‘¨æœŸå†…ï¼Œpushéœ€é€šä¿¡1æ¬¡ï¼Œpulléœ€2æ¬¡ï¼Œpush/pullåˆ™éœ€3æ¬¡ã€‚ä»æ•ˆæœä¸Šæ¥è®²ï¼Œpush/pullæœ€å¥½ï¼Œç†è®ºä¸Šä¸€ä¸ªå‘¨æœŸå†…å¯ä»¥ä½¿ä¸¤ä¸ªèŠ‚ç‚¹å®Œå…¨ä¸€è‡´ã€‚ç›´è§‚æ„Ÿè§‰ä¸Šï¼Œä¹Ÿæ˜¯push/pullçš„æ”¶æ•›é€Ÿåº¦æœ€å¿«ã€‚</p><p>å¦å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šåˆéœ€è¦ä¸€ä¸ªåè°ƒæœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•äº¤æ¢æ•°æ®èƒ½è¾¾åˆ°æœ€å¿«çš„ä¸€è‡´æ€§â€”â€”æ¶ˆé™¤èŠ‚ç‚¹çš„ä¸ä¸€è‡´æ€§ã€‚ä¸Šé¢æ‰€è®²çš„pushã€pullç­‰æ˜¯é€šä¿¡æ–¹å¼ï¼Œåè°ƒæ˜¯åœ¨é€šä¿¡æ–¹å¼ä¸‹çš„æ•°æ®äº¤æ¢æœºåˆ¶ã€‚</p><p>åè°ƒæ‰€é¢ä¸´çš„æœ€å¤§é—®é¢˜æ˜¯ï¼Œä¸€æ–¹é¢éœ€è¦æ‰¾åˆ°ä¸€ä¸ªç»æµçš„æ–¹å¼ï¼Œå› ä¸ºä¸å¯èƒ½æ¯æ¬¡éƒ½æŠŠä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„æ•°æ®å‘é€ç»™å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼›å¦ä¸€æ–¹é¢ï¼Œè¿˜éœ€è¦è€ƒè™‘åˆ°ç›¸å…³çš„å®¹é”™æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å½“å› ä¸ºç½‘ç»œé—®é¢˜ä¸å¯è¾¾çš„æ—¶å€™ï¼Œæ€ä¹ˆåŠï¼Ÿ</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰ä¸¤ç§æœºåˆ¶ï¼šä¸€ç§æ˜¯ä»¥å›ºå®šæ¦‚ç‡ä¼ æ’­çš„Anti-Entropyæœºåˆ¶ï¼Œå¦ä¸€ç§æ˜¯ä»…ä¼ æ’­æ–°åˆ°è¾¾æ•°æ®çš„Rumor-Mongeringæœºåˆ¶ã€‚å‰è€…æœ‰å®Œå¤‡çš„å®¹é”™æ€§ï¼Œä½†æ˜¯éœ€è¦æ›´å¤šçš„ç½‘ç»œå’ŒCPUèµ„æºï¼Œåè€…åˆ™åè¿‡æ¥ï¼Œä¸è€—èµ„æºï¼Œä½†åœ¨å®¹é”™æ€§ä¸Šéš¾ä»¥ä¿è¯ã€‚</p><p>Anti-Entropyçš„æœºåˆ¶åˆåˆ†ä¸ºPrecise Reconciliationï¼ˆç²¾ç¡®åè°ƒï¼‰å’ŒScuttlebutt Reconciliationï¼ˆæ•´ä½“åè°ƒï¼‰è¿™ä¸¤ç§ã€‚å‰è€…å¸Œæœ›åœ¨æ¯æ¬¡é€šä¿¡å‘¨æœŸå†…éƒ½éå¸¸ç²¾ç¡®åœ°æ¶ˆé™¤åŒæ–¹çš„ä¸ä¸€è‡´æ€§ï¼Œå…·ä½“è¡¨ç°å°±æ˜¯äº’å‘å¯¹æ–¹éœ€è¦æ›´æ–°çš„æ•°æ®ã€‚å› ä¸ºæ¯ä¸ªç»“ç‚¹éƒ½å¯ä»¥è¯»å†™ï¼Œæ‰€ä»¥è¿™éœ€è¦æ¯ä¸ªæ•°æ®éƒ½è¦ç‹¬ç«‹ç»´æŠ¤è‡ªå·±çš„ç‰ˆæœ¬å·ã€‚</p><p>è€Œæ•´ä½“åè°ƒä¸ç²¾ç¡®åè°ƒä¸åŒçš„æ˜¯ï¼Œæ•´ä½“åè°ƒä¸æ˜¯ä¸ºæ¯ä¸ªæ•°æ®éƒ½ç»´æŠ¤å•ç‹¬çš„ç‰ˆæœ¬å·ï¼Œè€Œæ˜¯æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æ•°æ®ç»Ÿä¸€ç»´æŠ¤ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸€è‡´çš„å…¨å±€ç‰ˆæœ¬ã€‚è¿™æ ·ä¸å…¶ä»–ç»“æœäº¤æ¢æ•°æ®çš„æ—¶å€™ï¼Œå°±åªéœ€è¦æ¯”è¾ƒèŠ‚ç‚¹ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯æ•°æ®ä¸ªä½“çš„ç‰ˆæœ¬ï¼Œè¿™æ ·ä¼šæ¯”è¾ƒç»æµä¸€äº›ã€‚å¦‚æœç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œåˆ™éœ€è¦åšç²¾ç¡®åè°ƒã€‚</p><p>å› ä¸ºç¯‡å¹…é—®é¢˜ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œä½ å¯ä»¥çœ‹çœ‹åŸå§‹çš„è®ºæ–‡ï¼Œè¿˜å¯ä»¥å»çœ‹çœ‹Cassandraä¸­çš„æºç ï¼Œä»¥åŠåˆ°GitHubæœä¸€ä¸‹å…¶ä»–äººçš„å®ç°ã€‚å¤šè¯´ä¸€å¥ï¼ŒCassandraçš„å®ç°æ˜¯åŸºäºæ•´ä½“åè°ƒçš„push/pullæ¨¡å¼ã€‚</p><p>å…³äºGossipçš„ä¸€äº›å›¾ç¤ºåŒ–çš„ä¸œè¥¿ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹åŠ¨ç”»<a href=\"https://rrmoelker.github.io/gossip-visualization/\">gossip visualization</a>ã€‚</p><h1>åˆ†å¸ƒå¼æ•°æ®åº“æ–¹é¢</h1><p>ä¸Šé¢è®²çš„éƒ½æ˜¯ä¸€äº›åŸºæœ¬æ¦‚å¿µç›¸å…³çš„ä¸œè¥¿ï¼Œä¸‹é¢æˆ‘ä»¬æ¥è°ˆè°ˆæ•°æ®åº“æ–¹é¢çš„ä¸€äº›è®ºæ–‡ã€‚</p><p>ä¸€ç¯‡æ˜¯AWS Auroraçš„è®ºæ–‡ <a href=\"http://www.allthingsdistributed.com/files/p1041-verbitski.pdf\">Amazon Aurora: Design Considerations for High Throughput Cloud â€“Native Relation Databases</a>ã€‚</p><p>Auroraæ˜¯AWSå°†MySQLçš„è®¡ç®—å’Œå­˜å‚¨åˆ†ç¦»åï¼Œè®¡ç®—èŠ‚ç‚¹scale upï¼Œå­˜å‚¨èŠ‚ç‚¹scale outã€‚å¹¶æŠŠå…¶redo logç‹¬ç«‹è®¾è®¡æˆä¸€ä¸ªå­˜å‚¨æœåŠ¡ï¼ŒæŠŠåˆ†å¸ƒå¼çš„æ•°æ®æ–¹é¢çš„ä¸œè¥¿å…¨éƒ¨ç”©ç»™äº†åº•å±‚å­˜å‚¨ç³»ç»Ÿã€‚ä»è€Œæé«˜äº†æ•´ä½“çš„ååé‡å’Œæ°´å¹³çš„æ‰©å±•èƒ½åŠ›ã€‚</p><p>Auroraè¦å†™6ä»½æ‹·è´ï¼Œä½†æ˜¯å…¶åªéœ€è¦æŠŠä¸€ä¸ªQuorumä¸­çš„æ—¥å¿—å†™æˆåŠŸå°±å¯ä»¥äº†ã€‚å¦‚ä¸‹æ‰€ç¤ºã€‚å¯ä»¥çœ‹åˆ°ï¼Œå°†å­˜å‚¨æœåŠ¡åšæˆä¸€ä¸ªè·¨æ•°æ®ä¸­å¿ƒçš„æœåŠ¡ï¼Œæé«˜æ•°æ®åº“å®¹ç¾ï¼Œé™ä½æ€§èƒ½å½±å“ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/70/eb/70eac246964e3ef8ad5100944bf5bdeb.png?wh=861*592\" alt=\"\"></p><p>å¯¹äºå­˜å‚¨æœåŠ¡çš„è®¾è®¡ï¼Œæ ¸å¿ƒçš„åŸç†å°±æ˜¯latencyä¸€å®šè¦ä½ï¼Œæ¯•ç«Ÿå†™6ä¸ªcopyæ˜¯ä¸€ä»¶å¼€é”€å¾ˆå¤§çš„äº‹ã€‚æ‰€ä»¥ï¼ŒåŸºæœ¬ä¸Šæ¥è¯´ï¼ŒAuroraç”¨çš„æ˜¯å¼‚æ­¥æ¨¡å‹ï¼Œç„¶åæ‹¼å‘½åœ°åšå¹¶è¡Œå¤„ç†ï¼Œå…¶ä¸­ç”¨åˆ°çš„ä¹Ÿæ˜¯Gossipåè®®ã€‚å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7f/81/7f89ba6764ede9fc4df223e541179381.png?wh=860*566\" alt=\"\"></p><p>åœ¨ä¸Šé¢è¿™ä¸ªå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®Œæˆå‰ä¸¤æ­¥ï¼Œå°±å¯ä»¥ACKå›è°ƒç”¨æ–¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ•°æ®åœ¨æœ¬åœ°è½åœ°äº†ï¼Œå°±å¯ä»¥è¿”å›æˆåŠŸäº†ã€‚ç„¶åï¼Œå¯¹äºå…­ä¸ªå‰¯æœ¬ï¼Œè¿™ä¸ªlogä¼šåŒæ—¶å‘é€åˆ°6ä¸ªå­˜å‚¨ç»“ç‚¹ï¼Œåªéœ€è¦æœ‰å¤§äº4ä¸ªæˆåŠŸACKï¼Œå°±ç®—å†™æˆåŠŸäº†ã€‚ç¬¬4æ­¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”¨çš„æ˜¯Gossipåè®®ã€‚ç„¶åï¼Œç¬¬5æ­¥äº§ç”Ÿcache é¡µï¼Œä¾¿äºæŸ¥è¯¢ã€‚ç¬¬6æ­¥åœ¨S3åšSnapshotï¼Œç±»ä¼¼äºCheckpointã€‚</p><p>ç¬¬äºŒç¯‡æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„è®ºæ–‡æ˜¯Googleçš„ <a href=\"http://static.googleusercontent.com/media/research.google.com/zh-CN//archive/spanner-osdi2012.pdf\">Spanner: Googleâ€™s Globally-Distributed Database</a>ã€‚<br>\nSpanner æ˜¯Googleçš„å…¨çƒåˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆGlobally-Distributed Database) ã€‚Spannerçš„æ‰©å±•æ€§è¾¾åˆ°äº†ä»¤äººå’‹èˆŒçš„å…¨çƒçº§ï¼Œå¯ä»¥æ‰©å±•åˆ°æ•°ç™¾ä¸‡å°æœºå™¨ï¼Œæ•°ä»¥ç™¾è®¡çš„æ•°æ®ä¸­å¿ƒï¼Œä¸Šä¸‡äº¿çš„è¡Œã€‚æ›´ç»™åŠ›çš„æ˜¯ï¼Œé™¤äº†å¤¸å¼ çš„æ‰©å±•æ€§ä¹‹å¤–ï¼Œå®ƒè¿˜èƒ½åŒæ—¶é€šè¿‡åŒæ­¥å¤åˆ¶å’Œå¤šç‰ˆæœ¬æ¥æ»¡è¶³å¤–éƒ¨ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§ä¹Ÿæ˜¯å¾ˆå¥½çš„ã€‚</p><p>ä¸‹é¢æ˜¯Spanserverçš„ä¸€ä¸ªæ¶æ„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/13/91/1341af251b8997a3bd9de9272b9be191.jpg?wh=1533x1473\" alt=\"\"><br>\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªæ•°æ®ä¸­å¿ƒéƒ½ä¼šæœ‰ä¸€å¥—Colossusï¼Œè¿™æ˜¯ç¬¬äºŒä»£çš„GFSã€‚æ¯ä¸ªæœºå™¨æœ‰100-1000ä¸ªtabletï¼Œä¹Ÿå°±æ˜¯ç›¸å½“æ•°æ®åº“è¡¨ä¸­çš„è¡Œé›†ï¼Œç‰©ç†å­˜å‚¨å°±æ˜¯æ•°æ®æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œä¸€å¼ è¡¨æœ‰2000è¡Œï¼Œç„¶åæœ‰20ä¸ªtabletï¼Œé‚£ä¹ˆæ¯ä¸ªtabletåˆ†åˆ«æœ‰100è¡Œæ•°æ®ã€‚</p><p>åœ¨tabletä¸Šå±‚é€šè¿‡Paxosåè®®è¿›è¡Œåˆ†å¸ƒå¼è·¨æ•°æ®ä¸­å¿ƒçš„ä¸€è‡´æ€§æ•°æ®åŒæ­¥ã€‚Paxosä¼šé€‰å‡ºä¸€ä¸ªreplicaåšLeaderï¼Œè¿™ä¸ªLeaderçš„å¯¿å‘½é»˜è®¤æ˜¯10sï¼Œ10såé‡é€‰ã€‚Leaderå°±ç›¸å½“äºå¤åˆ¶æ•°æ®çš„masterï¼Œå…¶ä»–replicaçš„æ•°æ®éƒ½æ˜¯ä»å®ƒé‚£é‡Œå¤åˆ¶çš„ã€‚è¯»è¯·æ±‚å¯ä»¥èµ°ä»»æ„çš„replicaï¼Œä½†æ˜¯å†™è¯·æ±‚åªæœ‰å»Leaderã€‚è¿™äº›replicaç»Ÿç§°ä¸ºä¸€ä¸ªPaxos Groupã€‚</p><p>Groupä¹‹é—´ä¹Ÿæœ‰æ•°æ®äº¤äº’ä¼ è¾“ï¼ŒGoogleå®šä¹‰äº†æœ€å°ä¼ è¾“å¤åˆ¶å•å…ƒdirectoryï¼Œæ˜¯ä¸€äº›æœ‰å…±åŒå‰ç¼€çš„keyè®°å½•ï¼Œè¿™äº›keyä¹Ÿæœ‰ç›¸åŒçš„replicaé…ç½®å±æ€§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e8/68/e85a1bf5efac06601fd6c5e9b75aa068.png?wh=561*293\" alt=\"\"></p><p>ç›®å‰ï¼ŒåŸºäºSpannerè®ºæ–‡çš„å¼€æºå®ç°æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯Googleå…¬å¸è‡ªå·±çš„äººå‡ºæ¥åšçš„<a href=\"https://github.com/cockroachdb/cockroach\">CockroachDB</a>ï¼Œå¦ä¸€ä¸ªæ˜¯å›½äººåšçš„<a href=\"https://github.com/pingcap/tidb\">TiDB</a>ã€‚</p><h1>å°ç»“</h1><p>æ­£å¦‚æˆ‘åœ¨ä¹‹å‰çš„åˆ†å¸ƒå¼ç³»ç»Ÿçš„æœ¬è´¨æ–‡ç« é‡Œæ‰€è¯´åˆ°çš„ï¼Œåˆ†å¸ƒå¼çš„æœåŠ¡çš„è°ƒåº¦éœ€è¦ä¸€ä¸ªåˆ†å¸ƒå¼çš„å­˜å‚¨ç³»ç»Ÿæ¥æ”¯æŒæœåŠ¡çš„æ•°æ®è°ƒåº¦ã€‚è€Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå„å¤§å…¬å¸éƒ½åœ¨åˆ†å¸ƒå¼çš„æ•°æ®åº“ä¸Šåšå„ç§å„æ ·çš„åˆ›æ–°ï¼Œä»–ä»¬éƒ½åœ¨ä½¿ç”¨åº•å±‚çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæ¥åšå­˜å‚¨å¼•æ“ï¼ŒæŠŠå­˜å‚¨å’Œè®¡ç®—åˆ†ç¦»å¼€æ¥ï¼Œç„¶åä½¿ç”¨åˆ†å¸ƒå¼ä¸€è‡´æ€§çš„æ•°æ®åŒæ­¥åè®®çš„ç®—æ³•æ¥åœ¨ä¸Šå±‚æä¾›é«˜å¯ç”¨ã€é«˜æ‰©å±•çš„æ”¯æŒã€‚</p><p>ä»è¿™ç‚¹æ¥çœ‹ï¼Œå¯ä»¥é¢„è§åˆ°ï¼Œè¿‡å»çš„åˆ†åº“åˆ†è¡¨å¹¶é€šè¿‡ä¸€ä¸ªæ•°æ®è®¿é—®çš„ä»£ç†æœåŠ¡çš„ç©æ³•ï¼Œåº”è¯¥åœ¨ä¸ä¹…å°±ä¼šè¿‡æ—¶å°±ä¼šæˆä¸ºå†å²ã€‚çœŸæ­£çš„ç°ä»£åŒ–çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨å°±æ˜¯Auroraå’ŒSpannerè¿™æ ·çš„æ–¹å¼ã€‚</p><p>é€šè¿‡ä¸Šé¢çš„è¿™äº›è®ºæ–‡å’Œç›¸å…³çš„å·¥ç¨‹å®è·µä»¥åŠå¼€æºé¡¹ç›®ï¼Œç›¸ä¿¡å¯ä»¥è®©ä½ åœ¨ç»†èŠ‚æ–¹é¢å¯¹åˆ†å¸ƒå¼ä¸­æœ€éš¾çš„ä¸€å—â€”â€”æ•°æ®è°ƒåº¦æ–¹é¢æœ‰æ›´å¤šçš„è®¤è¯†ã€‚</p><p>ã€Šåˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„æœ¬è´¨ã€‹ç³»åˆ—æ–‡ç« çš„ç›®å½•å¦‚ä¸‹ï¼Œæ–¹ä¾¿ä½ æŸ¥æ‰¾è‡ªå·±å…³æ³¨çš„å†…å®¹ã€‚</p><ul>\n<li><a href=\"https://time.geekbang.org/column/article/1411\">åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„å†°ä¸ç«</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1505\">ä»äºšé©¬é€Šçš„å®è·µï¼Œè°ˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„éš¾ç‚¹</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1512\">åˆ†å¸ƒå¼ç³»ç»Ÿçš„æŠ€æœ¯æ ˆ</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1513\">åˆ†å¸ƒå¼ç³»ç»Ÿå…³é”®æŠ€æœ¯ï¼šå…¨æ ˆç›‘æ§</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1604\">åˆ†å¸ƒå¼ç³»ç»Ÿå…³é”®æŠ€æœ¯ï¼šæœåŠ¡è°ƒåº¦</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1609\">åˆ†å¸ƒå¼ç³»ç»Ÿå…³é”®æŠ€æœ¯ï¼šæµé‡ä¸æ•°æ®è°ƒåº¦</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1610\">æ´æ‚‰PaaSå¹³å°çš„æœ¬è´¨</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2080\">æ¨èé˜…è¯»ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„ç»å…¸èµ„æ–™</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2421\">æ¨èé˜…è¯»ï¼šåˆ†å¸ƒå¼æ•°æ®è°ƒåº¦ç›¸å…³è®ºæ–‡</a></li>\n</ul>","comments":[{"had_liked":false,"id":23472,"user_name":"å¼ å¿—è¿œ","can_delete":false,"product_type":"c1","uid":1043990,"ip_address":"","ucode":"08337A651F03C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/16/6484dede.jpg","comment_is_top":false,"comment_ctime":1536397123,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"138975350595","product_id":100002201,"comment_content":"åªèƒ½è¯´ä½œè€…å¾ˆå¤šæ–‡ç« å­¦ä¹ æ—¶é—´å•ä½æœ€å°‘æ˜¯æœˆ","like_count":33,"discussions":[{"author":{"id":1938853,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/95/a5/de5df896.jpg","nickname":"JSJohnsonJS","note":"","ucode":"732F8EA6078302","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579256,"discussion_content":"æ·±è¡¨è®¤åŒå•Šï¼Œçœ‹å®Œäº†ä¹‹åï¼Œæ„Ÿè§‰ä½œè€…çš„é«˜åº¦ï¼Œå¤ªé«˜äº†ï¼Œå·²ç»ä¸æ˜¯ä»°æœ›çš„ç¨‹åº¦äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1657269026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157442,"user_name":"ä¸šä½™çˆ±å¥½è€…","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1575165087,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57409739935","product_id":100002201,"comment_content":"åˆ†åº“åˆ†è¡¨ä¸å°±å°±ä¼šæˆä¸ºå†å²ï¼Œæœ¬ä»¥ä¸ºå¤šä¹ˆé«˜çº§çš„æŠ€æœ¯ï¼Œæ²¡æƒ³åˆ°å°±åªæ˜¯ä¸ªè¿‡æ¸¡æ€§äº§å“ã€‚æœç„¶å­¦æŠ€æœ¯è¿˜æ˜¯è¦å­¦æ€æƒ³ï¼Œå­¦ä¹ æ¯ä¸ªæŠ€æœ¯å‡ºç°çš„èƒŒæ™¯ï¼Œè¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œæœ¬èº«åˆæœ‰ä»€ä¹ˆå¼Šç«¯ï¼Œæ”¹å¦‚ä½•è§£å†³ã€‚","like_count":13},{"had_liked":false,"id":2189,"user_name":"Michael Zhu","can_delete":false,"product_type":"c1","uid":1018356,"ip_address":"","ucode":"3C81174369B987","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/f4/2b89d2dc.jpg","comment_is_top":false,"comment_ctime":1516238929,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57350813777","product_id":100002201,"comment_content":"è¿™ä»¥åä¹Ÿä¸ç”¨å½•éŸ³äº†ï¼Œæœ¬æƒ³å¬ç€çœäº‹ï¼Œç»“æœè¿˜è¦æ‰‹æœºç¿»çœ‹ï¼Œè·³æ¥è·³å»æ›´éº»çƒ¦äº†","like_count":13},{"had_liked":false,"id":2230,"user_name":"æ¹–å¿ƒäº­çœ‹é›ª","can_delete":false,"product_type":"c1","uid":1023363,"ip_address":"","ucode":"88BAEBA964B6BC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9d/83/968da410.jpg","comment_is_top":false,"comment_ctime":1516427215,"is_pvip":false,"replies":[{"id":"468","content":"è°¢è°¢å•Šï¼æ˜¯æˆ‘æé”™äº†â€¦â€¦","user_name":"ä½œè€…å›å¤","comment_id":2230,"uid":"1001269","ip_address":"","utype":1,"ctime":1516713652,"user_name_real":"å·¦è€³æœµ"}],"discussion_count":1,"race_medal":0,"score":"40171132879","product_id":100002201,"comment_content":"è€—å­å“¥ï¼Œzookeeperä¸æ˜¯ç”¨çš„paxoså•Š","like_count":10,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"å·¦è€³æœµ","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415677,"discussion_content":"è°¢è°¢å•Šï¼æ˜¯æˆ‘æé”™äº†â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1516713652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":2186,"user_name":"è˜‘è‡ç‹è€…","can_delete":false,"product_type":"c1","uid":1003667,"ip_address":"","ucode":"453C6F6185ADA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/93/c67d4f03.jpg","comment_is_top":false,"comment_ctime":1516234737,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40170940401","product_id":100002201,"comment_content":"æ¯ä¸€ç¯‡éƒ½èƒ½å­¦ä¸€ä¸ªæœˆï¼å¤§çˆ±æ¨èé˜…è¯»ç³»åˆ—ï¼","like_count":9},{"had_liked":false,"id":2243,"user_name":"mgxian","can_delete":false,"product_type":"c1","uid":1014806,"ip_address":"","ucode":"7B7E77E6A83B87","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/16/4d1e5cc1.jpg","comment_is_top":false,"comment_ctime":1516456109,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18696325293","product_id":100002201,"comment_content":"è¯·é—®è€å¸ˆçš„æ¶æ„å›¾ ç¤ºæ„å›¾ æ˜¯ç”¨ä»€ä¹ˆè½¯ä»¶ç”»çš„ æ„Ÿè§‰å¾ˆä¸é”™","like_count":4,"discussions":[{"author":{"id":1129610,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3c/8a/900ca88a.jpg","nickname":"test","note":"","ucode":"C57A175CBC6547","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312925,"discussion_content":"ä¸€èˆ¬çš„æµç¨‹å›¾è½¯ä»¶åº”è¯¥éƒ½å¯ä»¥ï¼ŒåŠ ä¸Šå„ç§å±æ€§å°±å¯ä»¥åšçš„çœ‹èµ·æ¥å¤æ‚äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602854762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217489,"user_name":"é˜¿æ–¯è’‚èŠ¬","can_delete":false,"product_type":"c1","uid":1024164,"ip_address":"","ucode":"61D5E3BDA4EBC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","comment_is_top":false,"comment_ctime":1589513737,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14474415625","product_id":100002201,"comment_content":"åˆè§Googleä¸‰é©¾é©¬è½¦ï¼šBig Tableã€GFSã€MapReduceã€‚<br>Paxosã€Raftéƒ½æ˜¯åªå¬è¿‡æ²¡æ€ä¹ˆæ¥è§¦è¿‡ï¼Œå€’æ˜¯Gossipï¼Œåœ¨Redisé›†ç¾¤ä¸­æœ‰åº”ç”¨åˆ°ï¼Œå½“æ—¶å°±æ˜¯ç»™ç¿»è¯‘çš„â€œæµè¨€â€åè®®ï¼Œä¸çš“å“¥è®²çš„ã€Œä¸€ä¼ åã€åä¼ ç™¾ã€æŒºæ­çš„ã€‚<br>çœ‹æ¥åˆ†å¸ƒå¼çš„ä¸€å¤§å…³é”®ï¼Œå°±æ˜¯è®¾è®¡å¥½çš„ç®—æ³•æˆ–æœºåˆ¶ï¼Œä½¿èŠ‚ç‚¹é—´è¾¾æˆå°½å¯èƒ½çš„ä¸€è‡´æ€§ã€‚<br>åˆ†å¸ƒå¼æ•°æ®åº“æ–¹é¢ï¼ŒTiDBè¢«åœˆå†…äººå£«å®‰åˆ©è¿‡å¥½å‡ æ¬¡ï¼Œä¸€ç›´æ²¡æœ‰ç ”ç©¶ï¼Œçš“å“¥èƒŒä¹¦ï¼Œå¯ä»¥æ”¾å¿ƒå­¦ä¹ äº†ï¼Œå…‰æ˜¯çœ‹äº†ä¸‹æ–‡æ¡£ï¼Œâ€œé«˜åº¦å…¼å®¹MySQLã€100%æ”¯æŒæ ‡å‡†çš„ACIDäº‹åŠ¡ã€çœŸæ­£çš„é‡‘èçº§é«˜å¯ç”¨...â€ï¼ŒçœŸæ˜¯niubility","like_count":4},{"had_liked":false,"id":2739,"user_name":"Dç“œå“¥","can_delete":false,"product_type":"c1","uid":1020000,"ip_address":"","ucode":"616192C94A700C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/60/44bf9fcc.jpg","comment_is_top":false,"comment_ctime":1518421111,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14403322999","product_id":100002201,"comment_content":"è€—å­å“¥ï¼è¿˜æœ‰ä¸€ç¯‡è®ºæ–‡å¯èƒ½ä¹Ÿå€¼å¾—æ¨èï¼š<br><br>Spanner: Becoming a SQL System<br><br>https:&#47;&#47;static.googleusercontent.com&#47;media&#47;research.google.com&#47;zh-CN&#47;&#47;pubs&#47;archive&#47;46103.pdf<br><br>æ‰“å°å‡ºæ¥è¿˜æ²¡æœ‰è¯»ï¼ğŸ˜‚","like_count":3},{"had_liked":false,"id":105120,"user_name":"åˆåŒå’å•æ˜¯ä¸€å¹´å•Š","can_delete":false,"product_type":"c1","uid":1000015,"ip_address":"","ucode":"E067320E537DEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/4f/ff1ac464.jpg","comment_is_top":false,"comment_ctime":1560923139,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10150857731","product_id":100002201,"comment_content":"çœ‹äº†ä¸‹TiDB æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¯¹ä¸šåŠ¡æ²¡æœ‰ä»»ä½•ä¾µå…¥æ€§ï¼Œèƒ½ä¼˜é›…çš„æ›¿æ¢ä¼ ç»Ÿçš„æ•°æ®åº“ä¸­é—´ä»¶ã€æ•°æ®åº“åˆ†åº“åˆ†è¡¨ç­‰ Sharding æ–¹æ¡ˆ  è¯·é—®ä¸‹TiDBæ˜¯å¦å·²ç»æ¯”è¾ƒæˆç†Ÿå¯ä»¥ç›´æ¥ç”¨äºç”Ÿäº§å®è·µ","like_count":2,"discussions":[{"author":{"id":1623409,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c5/71/f7c43b49.jpg","nickname":"é£å‘åŒ—å¹","note":"","ucode":"2FD0BC5159E1C1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590404,"discussion_content":"å¹³å®‰äº§é™©ä¹Ÿåœ¨ç”¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665719355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155414,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a1/56/ad5dba39.jpg","nickname":"moliniao","note":"","ucode":"D38D159E960FFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4980,"discussion_content":"ç¾å›¢éƒ½åœ¨ç”¨ï¼Œåº”è¯¥å¯ä»¥å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565862772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95594,"user_name":"ç¨»è‰äºº","can_delete":false,"product_type":"c1","uid":1535799,"ip_address":"","ucode":"CC8039AE206778","user_header":"https://static001.geekbang.org/account/avatar/00/17/6f/37/7597630e.jpg","comment_is_top":false,"comment_ctime":1558094532,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10148029124","product_id":100002201,"comment_content":"é™ˆè€å¸ˆï¼Œæˆ‘ç°åœ¨æ˜¯å¤§æ•°æ®å¹³å°å¼€å‘ï¼Œæˆ‘çœ‹å¤§æ•°æ®å¹³å°å½’æ ¹ç»“åº•éƒ½æ˜¯åˆ†å¸ƒå¼çš„ä¸œè¥¿ï¼Œæˆ‘å¦‚æœåœ¨å¤§æ•°æ®å¹³å°å¼€å‘æ·±å…¥ä¸€æ­¥çš„è¯ï¼Œæ˜¯åˆ†å¸ƒå¼é¢†åŸŸè¿˜æ˜¯è®¡ç®—å¼•æ“é¢†åŸŸï¼Ÿ","like_count":2},{"had_liked":false,"id":167304,"user_name":"CalanceHao","can_delete":false,"product_type":"c1","uid":1401137,"ip_address":"","ucode":"068B4AC4D1D402","user_header":"https://static001.geekbang.org/account/avatar/00/15/61/31/211ac1a9.jpg","comment_is_top":false,"comment_ctime":1577759817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5872727113","product_id":100002201,"comment_content":"æ·»åŠ åˆ°é˜…è¯»åˆ—è¡¨ï¼Œä¸€ç‚¹ç‚¹å•ƒğŸ’ªğŸ»<br>ğŸ™è°¢è°¢å·¦è€³æ•´ç†çš„é˜…è¯»æ¨èï¼Œæœ‰äº†è¿›åº¦æ¡ï¼Œæ¸¸æˆçœ‹èµ·æ¥æ‰æ²¡é‚£ä¹ˆéš¾å˜›ï½","like_count":2},{"had_liked":false,"id":165240,"user_name":"æ”»åŸç‹®Ra","can_delete":false,"product_type":"c1","uid":1681051,"ip_address":"","ucode":"4D6F97A6481166","user_header":"https://static001.geekbang.org/account/avatar/00/19/a6/9b/20b9fce3.jpg","comment_is_top":false,"comment_ctime":1577186667,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5872153963","product_id":100002201,"comment_content":"æƒ­æ„§äºè‡ªå·±çš„çŸ¥è¯†å±€é™æ€§ï¼Œæ¯ä¸€ç¯‡æ–‡ç« éƒ½è¶³å¤Ÿæˆ‘å¥½å¥½ç ”è¯»å¥½ä¸€æ®µæ—¶é—´ã€‚è€—å­å”çš„ã€Šå·¦è€³å¬é£ã€‹é€‚åˆåå¤ç ”è¯»ï¼Œé€æ­¥åŠ æ·±ç†è§£ï¼Œæˆé•¿ï¼ï¼ï¼","like_count":1},{"had_liked":false,"id":104790,"user_name":"ç¨‹åºå‘˜å°è·ƒ","can_delete":false,"product_type":"c1","uid":1015483,"ip_address":"","ucode":"25BB96E0791A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","comment_is_top":false,"comment_ctime":1560838688,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5855805984","product_id":100002201,"comment_content":"è¿˜å¥½ä¹‹å‰çœ‹è¿‡å¾®æœåŠ¡ï¼Œä¸ç„¶è¿™äº›ï¼Œéƒ½ä¸çŸ¥é“å¦‚ä½•æ¥ç†è§£ã€‚","like_count":1},{"had_liked":false,"id":77562,"user_name":"é“é¸Ÿ","can_delete":false,"product_type":"c1","uid":1227710,"ip_address":"","ucode":"D89CDBEA75BD40","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/be/0f96379d.jpg","comment_is_top":false,"comment_ctime":1552962956,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5847930252","product_id":100002201,"comment_content":"æ‰“å¡","like_count":1},{"had_liked":false,"id":14760,"user_name":"è¥¿å›­å…¬å­","can_delete":false,"product_type":"c1","uid":1062404,"ip_address":"","ucode":"2A21906A04DFE7","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/04/9fa7e773.jpg","comment_is_top":false,"comment_ctime":1530636912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5825604208","product_id":100002201,"comment_content":"Mark","like_count":1},{"had_liked":false,"id":3441,"user_name":"summer","can_delete":false,"product_type":"c1","uid":1000006,"ip_address":"","ucode":"7DF4E4FD6E9111","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/46/274d8dcc.jpg","comment_is_top":false,"comment_ctime":1519624829,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5814592125","product_id":100002201,"comment_content":"å¥½æ–‡ç« ","like_count":1},{"had_liked":false,"id":340827,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1649166340,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649166340","product_id":100002201,"comment_content":"è¿˜æ˜¯è¦è®¤çœŸå­¦ä¹ ï¼Œæ€è€ƒï½ï½","like_count":0},{"had_liked":false,"id":292580,"user_name":"æ§‘Â·å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1445744,"ip_address":"","ucode":"897F0475592E3A","user_header":"https://static001.geekbang.org/account/avatar/00/16/0f/70/f59db672.jpg","comment_is_top":false,"comment_ctime":1620883521,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1620883521","product_id":100002201,"comment_content":"åˆ†å¸ƒå¼ç³»ç»ŸçœŸæ˜¯å¤ªè¿‡åºå¤§ï¼Œç‘Ÿç‘Ÿå‘æŠ–ã€‚","like_count":0},{"had_liked":false,"id":168044,"user_name":"__Sunde__","can_delete":false,"product_type":"c1","uid":1088846,"ip_address":"","ucode":"17663D41830555","user_header":"https://static001.geekbang.org/account/avatar/00/10/9d/4e/546db84a.jpg","comment_is_top":false,"comment_ctime":1577992018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577992018","product_id":100002201,"comment_content":"Paxos by example çš„é“¾æ¥é”™äº†ï¼š https:&#47;&#47;medium.com&#47;@angusmacdonald&#47;paxos-by-example-66d934e18522","like_count":0},{"had_liked":false,"id":2299,"user_name":"ä¸‰ä¸‡è‹±å°º","can_delete":false,"product_type":"c1","uid":1020753,"ip_address":"","ucode":"7ACF0073A65139","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/51/10a500bf.jpg","comment_is_top":false,"comment_ctime":1516693928,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1516693928","product_id":100002201,"comment_content":"è¿™ç§å¤§çº²å¼çš„æ–‡ç« æˆ‘å¾ˆå–œæ¬¢ğŸ˜„","like_count":0}]}