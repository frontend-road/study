{"id":619632,"title":"13｜迭代二概述：怎样更深刻地理解领域知识？","content":"<p>你好，我是钟敬。</p><p>这节课开始，我们即将进入第二个迭代，一起学习几个DDD里更高级的实践和模式，带你逐步提升领域建模能力，更深刻地理解领域知识。</p><p>在梳理迭代二主要内容和迭代需求之前，我会先帮你巩固一下迭代一知识点。这是因为，你在学习了前面的课程以后，有些知识点虽然掌握了，但知识点之间还没能形成有机的整体。这节课我会帮你把它们联系起来，形成完整的知识图景。另一方面，只有扎实地掌握迭代一，才能更好地掌握迭代二。</p><h2>迭代一回顾</h2><p>在《领域驱动设计》的原书里，Evans喜欢用“概念图”总结模式。我也准备学习原作者，用概念图帮你串联一下迭代一的知识点。概念图是个比较简单的工具，在下面的讲解过程中你自然就会掌握了。另外，我也会指出每个知识点在《领域驱动设计》一书中的章节，以便你对照原书，进一步加深理解。</p><p>按照建模落地的过程，我们把迭代一的知识点分成捕获行为需求和事件风暴、模型的建立以及模型的实现这三个部分来回顾。</p><h3>捕获行为需求和事件风暴</h3><p>首先，我们复习一下捕获行为需求和事件风暴。下面这张图表示了捕获行为需求和DDD两个核心模式的关系。<br>\n<img src=\"https://static001.geekbang.org/resource/image/00/72/003c288f5932bf05491873f6a68b0572.jpg?wh=3733x2067\" alt=\"\"></p><p>这张图就是一张概念图。一个椭圆框表示一个概念。箭头表示概念之间有关系。箭头上的文字表示关系的含义。箭头的方向代表的是读这些文字的方向。比如说，“用例分析”指向“捕获行为需求”，读“……是……的一种方法”的时候，就把“用例分析”代入第一个省略号，把“捕获行为需求”代入第二个省略号，对应的读法是“用例分析是捕获行为需求的一种方法”。</p><!-- [[[read_end]]] --><p>另外，橙色的椭圆代表《DDD》原书中的模式。黄色椭圆的概念不是《DDD》中的模式。可能在书里提过，但没有算作模式，也可能书中没有提，而是我们课程补充的内容。</p><p>DDD有“统一语言”和“模型驱动设计”两个核心模式。统一语言在书里的2.1节；模型驱动设计在3.1节。</p><p>上面这张图的意思是，捕获行为需求为模型驱动设计奠定了基础。在捕获行为需求的时候已经开始形成统一语言，在模型驱动设计的过程中会进一步完善统一语言。</p><p>捕获行为需求有不同的方法，我们这门课重点介绍了事件风暴，但不意味着别的方法不可以，例如用例分析、用户故事地图也是常见的方法。即使你的团队已经有了成熟的方法，事件风暴的思路也仍然值得借鉴，你可以尝试在原来的方法里加入协作、统一语言、识别领域名词的实践。</p><p>下面我们再用一张概念图回顾一下事件风暴内部的元素。你也可以学以致用，演练一下这张图里的内容怎么读。<br>\n<img src=\"https://static001.geekbang.org/resource/image/32/d9/32e6cc121be71c2327962ba9150153d9.jpg?wh=3733x2260\" alt=\"\"></p><p>从这张图里我们看到了这样的概念和关系：执行者查询读数据，然后发出命令。命令触发领域事件。可以从命令、领域事件、执行者、读数据中识别出领域名词。</p><p>领域事件也是一种DDD的模式，但在2003年的《DDD》一书里没有提过这一模式，但后来业界的一些专家提出了领域事件的重要性。直到2015年，Evans又写了一本小册子<a href=\"http://domainlanguage.com/wp-content/uploads/2016/05/DDD_Reference_2015-03.pdf\">《DDD Reference》</a>来简要地总结DDD的所有模式。这时候才在DDD中正式增加了这个模式。</p><p>下面这张图说明了事件风暴的元素和DDD其他部分的关系。<br>\n<img src=\"https://static001.geekbang.org/resource/image/2f/52/2f8a19fddc03aa1713ee35ff04878052.jpg?wh=3733x2081\" alt=\"\"></p><p>我们按从上往下，从左往右的顺序来解读这张概念图。</p><p>首先，读数据和命令，一般会映射到应用服务的API。读数据映射为查询功能，命令映射为增、删、改等功能。然后，应用服务会查询或操作领域对象，领域对象的修改则会触发领域事件。最后，领域对象的识别，可以从领域名词开始。执行者，一般会映射成领域对象充当的角色。</p><h3>模型的建立</h3><p>下面我们来复习模型的建立，我们结合后面这张图来看看。<br>\n<img src=\"https://static001.geekbang.org/resource/image/27/d5/27916e54412fd8e9fa4540c6e916a9d5.jpg?wh=3500x2316\" alt=\"\"></p><p>相比之前的概念图，是不是感觉这张图有点眼花缭乱了？其实如果你充分理解了迭代一的知识，就会觉得容易阅读了。</p><p>我们从领域知识开始看。DDD非常重视对领域知识的消化，这主要是在模型驱动设计过程中进行的。而领域模型是模型驱动设计的核心。领域模型使用UML来建模，包含表示领域概念的领域对象、对象之间的关联以及把对象按内聚和耦合关系分组的模块。领域对象分成实体和值对象两类，不过迭代一只讲了实体，所以说实体是一种领域对象。</p><p>另外，领域知识还包含业务规则，把业务规则记录在业务规则表中，可以保证业务规则在分析和实现的时候不会遗漏。</p><p>在模型驱动设计的过程中会运用和形成统一语言，统一语言用于描述领域知识，而领域模型和词汇表都可以帮我们固化统一语言。</p><p>在《DDD》原书的第一章讲了如何消化领域知识；5.1节讲了关联，在5.2节讲了实体，5.4节讲了模块。</p><h3>模型的实现</h3><p>说完模型的建立，我们再看看模型的实现。可以先看看下面的图。</p><p><img src=\"https://static001.geekbang.org/resource/image/e1/6a/e1e042d4de2d026596c36a5ac67afd6a.jpg?wh=3500x3026\" alt=\"\"></p><p>我们从“领域模型”开始看。模型的实现主要是依据模型编写代码和设计数据库。代码和数据库的命名都要依据统一语言。编码时使用分层架构。</p><p>分层架构主要包括<strong>领域层、应用层、适配器层</strong>，我们分别细看一下这三层所关联的主要概念。</p><ul>\n<li>领域层中的领域对象和模块都与领域模型保持一致。领域对象和领域服务都会实现领域逻辑。此外，领域层还有工厂来创建领域对象，仓库的接口来持久化领域对象。</li>\n<li>应用层主要包含应用服务，是领域层的“门面”。</li>\n<li>适配器层用于分离输入输出技术和业务关注点。适配器分为主动适配器和被动适配器，其中被动适配器包含仓库的实现。</li>\n</ul><p>最后，不论是领域对象、领域服务还是应用服务，都应实现揭示意图的接口。</p><p>在《DDD》原书的4.1节介绍分层架构；5.4节介绍服务，包含了应用服务和领域服务；6.2节介绍工厂；6.3节介绍仓库；10.1节介绍揭示意图的接口。</p><p>总的来说，通过迭代一，我们掌握了最基本的技能，回顾完迭代一的内容，我们再讲一下迭代二会讲什么新内容。</p><h2>迭代二的内容</h2><p>通过迭代二，我们会掌握一些更高级的技能，以便处理更复杂的需求。这几个技能都是在DDD中不太好理解的，分别是聚合、值对象、限定和泛化。</p><p>学完了迭代一，在此基础上讨论这些进阶知识，你才更容易消化理解。</p><p>第一个要讲的是“聚合”。聚合是若干个具有整体部分关系的领域对象的组合。而且，需要维护有强一致的业务规则。聚合能帮助我们更简单地确定事务边界，保护业务规则。</p><p>第二个是“值对象”。我们在迭代一讲过，领域对象分成实体和值对象两种。实体比较好理解，而值对象的含义就众说纷纭了。我们在这个迭代会从建模、编码、背后的认识事物的思维等方面把值对象讲清楚。理解了值对象，可以更细致地为领域知识建模，避免一些建模中常见的错误，而且也可以促使我们更深刻地理解实体。</p><p>接下来，我们会讲“限定”。这个技术掌握起来并没有想象中难，而且很有用，可以起到深化领域知识和简化关联的作用。《DDD》一书中也做了强调。</p><p>最后一个是“泛化”。泛化是建模技能由初级向中、高级进阶的关键技能，可以帮我们进一步提高模型的抽象程度。恰当使用的话，会使模型变得更加灵活和强大。当然，我也会介绍什么时候“不”使用泛化。</p><h2>迭代二的需求</h2><p>为了讲解前面这几个技能，我们在迭代二里会引入几个新的需求。这些需求中的大部分，都是由于SaaS系统要应对不同公司需求，所增加的灵活性。</p><h3>需求一：人员与组织管理</h3><p>首先看看人员和组织管理的新需求。</p><p>在这个迭代，我们要为员工记录工作经验和技能。一个员工可以有多条工作经验，也可以有多种技能。</p><p>记录工作经验时，要记录工作的公司和时间段。例如，小张在2001年1月1日到2005年1月1日在某某银行工作。</p><p>记录技能时，要记录一个人在某个技能上积累了多少年的经验，达到什么程度。比如，小王积累了10年的Java经验，达到高级水平。</p><p>此外，还会有一些相应的业务规则，比如：工作经验的时间段不能重叠；一个技能不能录入两次；时间段的结束日期要大于开始日期等。</p><h3>需求二：项目管理</h3><p>在项目管理方面也新增了几个需求。</p><p>第一，为了在管理上评估绩效和分清责任，需要记录客户经理、合同经理、项目经理的变更历史。例如小张在今年上半年担任项目A的项目经理，下半年转去做另一个项目B的经理。那么，年终评价时，小张上半年在A项目上的成绩仍然属于小张，不会因为小张现在是项目B的经理就不算了。如果不记录历史，就无法做到这一点。</p><p>第二，为了更细粒度的管理项目，需要把项目拆分为子项目。</p><p>第三，有些公司希望把项目分成客户项目和内部项目两种。客户项目是服务于外部客户的，必须有合同。内部项目是公司内部的，没有合同；</p><p>第四，还有一些公司，想要把项目分成需要分配人员的项目和不需要分配人员的项目。比如有些公司内部兴趣小组的项目，可以不必专门分配人员。</p><h3>需求三：工时登记</h3><p>上面的变动会影响到工时登记。比如说，有些公司需要在项目层面报工时，另外一些公司需要在子项目上报工时，还有些公司则是“两可”。</p><p>业务规则也有相应的变化，比如说，只有对于需要分配人员的项目，才会适用“员工只能在已分配的项目上报工时”的规则。</p><p>另外，还有些工时，不报在任何项目上。比如说，项目不紧张的时候，员工可以用一些时间学习。管理人员还经常需要一些纯粹的管理和沟通时间。这些时间都不属于某个特定的项目。这种报工时的需求这个迭代里也要得到处理。</p><p>最后，今天讲的所有需求我都汇总到了下面这张表里，你可以看一下，方便后面的实战。<br>\n<img src=\"https://static001.geekbang.org/resource/image/5c/53/5c3096416ee78d3bd383bcaa07997e53.jpg?wh=2961x1642\" alt=\"\"></p><h2>总结</h2><p>今天的内容就基本讲完了，我们来总结一下。</p><p>这节课，我们使用<strong>概念图</strong>的方式回顾了第一个迭代的内容，包括捕获行为需求和事件风暴、模型的建立和模型的实现三部分。我们还区分了哪些内容是《DDD》原书中的模式，并且给出了原书中对应的章节号，以便你对照阅读，加深理解。</p><p>顺便说一句，学习一门学问，阅读“原典”往往是学习的“捷径”。但是由于一些小伙伴面向对象的基础不牢，所以觉得《DDD》原书“晦涩”，不容易懂。学了我们这门课程再看原著，你可以体会一下，会不会有一种豁然开朗的感觉。</p><p>今天我们还概述了迭代二的主要内容，包括聚合、值对象、限定和泛化。这些概念常常众说纷纭，以讹传讹。我会在迭代二尝试用通俗易懂的方式，为你揭示它们的本质意义，以便你能够更深刻地理解领域知识，处理更复杂的问题。</p><p>为了帮你更好地消化这些新内容，我们在这个迭代里引入了一些新需求。针对这些新需求，你不妨自己先想想怎样建模，怎样写代码。在后面的学习过程中，再对比一下我们的课程是怎么讲的，这样你的理解会更加深刻。</p><h2>思考题</h2><p>最后是两道思考题。<br>\n1.你以前是否听说过聚合，你是怎么理解的？</p><p>2.你以前是否听说过值对象，你是怎么理解的？</p><p>好，今天的课程结束了，有什么问题欢迎在评论区留言，下节课，我们开始学习一个重要的DDD模式——聚合。</p>","neighbors":{"left":{"article_title":"12｜代码实现（下）：怎样更加“面向对象”？","id":619447},"right":{"article_title":"14｜聚合的概念：怎样保护业务规则？","id":620047}},"comments":[{"had_liked":false,"id":371971,"user_name":"听水的湖","can_delete":false,"product_type":"c1","uid":1501385,"ip_address":"北京","ucode":"B1759F90165D81","user_header":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","comment_is_top":true,"comment_ctime":1680574261,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"【代码更新】\n同学们好，我是编辑小新。\n\n迭代一配套代码已整理到GitHub，希望同学们好好利用，觉得不错别忘了给老师点个Star。\n代码链接：https:&#47;&#47;github.com&#47;zhongjinggz&#47;geekdemo","like_count":2},{"had_liked":false,"id":365934,"user_name":"听水的湖","can_delete":false,"product_type":"c1","uid":1501385,"ip_address":"北京","ucode":"B1759F90165D81","user_header":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","comment_is_top":true,"comment_ctime":1673246788,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"🚩【特别策划之建模题目挑战赛】\n同学们好，我是这门课的编辑小新，为了帮助同学们更好的学习和理解DDD，更深入地和老师学习、互动。我们给大家安排了这次建模题目，体现大家综合实力的时候到了！\n\n钟老师给出了如下需求场景，请你来绘制领域模型。\n\n假设你所在的公司想实施敏捷软件开发，委托你为公司开发一个敏捷项目管理软件。公司领导提出的需求是这样的：\n1.公司会开发很多款软件产品，每个产品有一个产品待办清单（product backlog）。\n2.产品待办清单中的待办项是用户故事，由产品经理提供。\n3.用户故事有一个文字性的描述，还有若干验收条件（Acceptance Criteria）。\n4.产品经理可调整代办项的优先级。\n5.每个用户故事要估算故事点。\n6.每个迭代，项目经理把用户故事移入迭代待办清单（sprint backlog）。\n7.每个迭代，由一个敏捷团队负责。\n8.迭代待办清单所有故事点的和不能超过迭代容量。\n9.每个用户故事由一个同事负责。\n10.每个用户故事有TODO、DOING、DONE 三种状态，由开发人员切换状态。\n\n请根据上面的场景，用你熟悉的工具绘制出系统的领域模型。然后把模型以图片的形式导出，贴在你喜欢的共享文档（例如腾讯文档、石墨文档等），然后在这节课的留言区里提交超链接就可以了，提交格式为昵称+链接。我看到后，会精选评论并置顶。\n\n这道题假设你学习完了迭代一，并且了解敏捷软件开发过程。如果对“产品代办清单”“迭代代办清单”“用户故事”“验收条件”“故事点”“敏捷团队”等概念还不了解的话，可以去网上搜一下，这些都是敏捷的一些基本概念。\n\n请注意这道题的目的不是为了考试，而是锻炼同学们的建模技能，所以你也不妨发挥一下，增加一些合理的需求，以便使模型更加丰富。期待你的“作业”！","like_count":2,"discussions":[{"author":{"id":1315438,"avatar":"https://static001.geekbang.org/account/avatar/00/14/12/6e/3a0b4930.jpg","nickname":"FiRerOUNd","note":"","ucode":"571CB6565F9713","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599122,"discussion_content":"附上事件风暴模拟：https://drive.google.com/file/d/1a2JcYvahzg9MuhpeUNoxPoPMjmWpC0p3/view?usp=sharing","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673340743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1315438,"avatar":"https://static001.geekbang.org/account/avatar/00/14/12/6e/3a0b4930.jpg","nickname":"FiRerOUNd","note":"","ucode":"571CB6565F9713","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599112,"discussion_content":"FIREROUND\nhttps://drive.google.com/file/d/1KYATUE0uruetcSyll5lJjHd2lDQHKq3G/view","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673338985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367176,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"北京","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1674984366,"is_pvip":true,"replies":[{"id":135203,"content":"思维导图是有层次的，概念图没有固有的层次。\n\n现在您应该已经学过值对象的课程了吧？原谅我回复得太迟了 ：）","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1678980000,"ip_address":"广东","comment_id":367176,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"概念图 concept map 是 1970 年左右提出来的，不知道是什么原因，没有思维导图那么流行，但是表达能力还是挺好的。没有看过《领域驱动设计》，所以专栏中的几张概念图让我印象深刻，感觉在头脑风暴的时候可以使用。\n\n对于思考题，聚合和值对象之前都曾经听说过，而且一般不作为特别重点的概念讲解，所以对于迭代二有点好奇。\n\n1. 我的理解，聚合就是把一组相关的领域模型集合起来，提炼出聚合根，比如人员管理上，员工就可以作为一个聚合根。\n2. 值对象一般是不需要实例化的对象，也就是不能独立存在的对象，比如人员的角色、岗位、职级之类的。","like_count":2,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609472,"discussion_content":"思维导图是有层次的，概念图没有固有的层次。\n\n现在您应该已经学过值对象的课程了吧？原谅我回复得太迟了 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678980000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365629,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"广东","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1672835448,"is_pvip":false,"replies":[{"id":133225,"content":"再接再厉，共同提高","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1672995446,"ip_address":"广东","comment_id":365629,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"看了迭代二的需求，故事越来越真实了","like_count":2,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598692,"discussion_content":"再接再厉，共同提高","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1672995446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026921,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/69/5f1f0d1c.jpg","nickname":"支离书","note":"","ucode":"AD2570AC5EF7BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598539,"discussion_content":"确实，迭代二的需求看着就有诚意","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1672898224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366940,"user_name":"Johar","can_delete":false,"product_type":"c1","uid":1101969,"ip_address":"重庆","ucode":"834136A6F64CDC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/91/89123507.jpg","comment_is_top":false,"comment_ctime":1674638934,"is_pvip":false,"replies":[{"id":135212,"content":"抱歉我回答得太迟了。您现在应该已经看到后面的课程了，这两个问题已经不成问题了吧？","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1678983648,"ip_address":"广东","comment_id":366940,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"1. 你以前是否听说过聚合，你是怎么理解的？\n聚合也是目前微服务划分的一种常用手段，将业务关系紧密，规模大小合适的一些领域对象作为一个聚合放在一个微服务中。\n2. 你以前是否听说过值对象，你是怎么理解的？\n值对象，判断唯一性可以根据其值判断，而不是根据id判断，在DDD中一般根据是否有单独的持久化记录来判断。","like_count":1,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609500,"discussion_content":"抱歉我回答得太迟了。您现在应该已经看到后面的课程了，这两个问题已经不成问题了吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678983648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366864,"user_name":"plimlips","can_delete":false,"product_type":"c1","uid":1332753,"ip_address":"重庆","ucode":"3E58B5A6721FF3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4UBeJ4vlwbBU8ibVz6hdgr2Qozco6xSaIgRfNd2zvPPU7BTINsgKcW3MuQmrZ2A3AB0dyiccoHubZxukLZWmHVibw/132","comment_is_top":false,"comment_ctime":1674477783,"is_pvip":false,"replies":[{"id":133698,"content":"1 是的，这个维度就两种\n2 模型可分为动态和静态两方面，领域对象是静态，领域服务和领域事件是动态方面\n3 哪个设计模式有角色对象？","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1674530440,"ip_address":"广东","comment_id":366864,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"其实一直想知道：\n1.为什么领域对象只有实体和值对象两种？他们是否就是0和1的关系，在这个维度就这两个？\n2.领域服务、领域事件又是什么维度的对象？\n3.设计模式中的角色对象和领域对象是怎样的关系？","like_count":1,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600557,"discussion_content":"1 是的，这个维度就两种\n2 模型可分为动态和静态两方面，领域对象是静态，领域服务和领域事件是动态方面\n3 哪个设计模式有角色对象？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674530440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1332753,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/4UBeJ4vlwbBU8ibVz6hdgr2Qozco6xSaIgRfNd2zvPPU7BTINsgKcW3MuQmrZ2A3AB0dyiccoHubZxukLZWmHVibw/132","nickname":"plimlips","note":"","ucode":"3E58B5A6721FF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":600601,"discussion_content":"感谢钟老师解答，\n问题补充：\n1.实体和值对象是什么维度的对象？\n2.您第二个问题的回答解释了是在动静态维度的对象，在这个维度上是否就不会去讨论实体和值对象？\n3.指的是设计模式里面的每种对象。\n\n这几个问题其实想问对象有哪些不同维度？在学习ddd、oop、设计模式、数据建模的中的各种对象的时候，经常会有维度错乱的感觉，混淆对象的概念。\n我对oop的理解是，oop是一种角色驱动的分析和设计的方法论，就是说运用oop要优先分析对象的角色。比如在分析项目管理这种业务系统时，员工属于业务执行人这类角色、部门属于业务环境这类角色、项目属于业务这类角色，也就是说这三个对象属于业务角色这个范畴，在这个范畴分析的时候我们就不能又说实体和值对象这些概念；\n关于设计模式。业务对象包括了业务角色和业务属性，设计模式中的对象是去除了属性的纯角色的对象，且这些角色是比业务角色抽象程度更高。\n所以，在讨论业务模型时，要放在业务维度来讨论，就不要把实体和值对象放进来讨论，也不要又把设计模式里面的各个对象放进来讨论。\n综上，像DDD的分层架构和限界上下文一样，对对象进行讨论的时候，也要有一个对象分层图来指导我们。比如自上而下分别是：\n1.业务层\n2.分析层（实体、值对象、静态动态对象）\n3.设计层（设计模式）\n4.存储层（关系模型、nosql）\n然后前三层由oop来封装、由设计原则来约束。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674608852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":600557,"ip_address":"重庆","group_id":0},"score":600601,"extra":""}]}]},{"had_liked":false,"id":365638,"user_name":"kkxue","can_delete":false,"product_type":"c1","uid":1159904,"ip_address":"北京","ucode":"0DCB861D5543D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/b2/e0/bf56878a.jpg","comment_is_top":false,"comment_ctime":1672840841,"is_pvip":false,"replies":[{"id":133221,"content":"哈哈哈老师的预判挺准，希望课程能让你渐入佳境～","user_name":"编辑回复","user_name_real":"编辑","uid":1501385,"ctime":1672993622,"ip_address":"北京","comment_id":365638,"utype":2}],"discussion_count":1,"race_medal":5,"score":2,"product_id":100311801,"comment_content":"刚好想问如何对照《DDD》","like_count":1,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598686,"discussion_content":"哈哈哈老师的预判挺准，希望课程能让你渐入佳境～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672993622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392467,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"广东","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/d1ab239e.jpg","comment_is_top":false,"comment_ctime":1721035721,"is_pvip":false,"replies":[{"id":143659,"content":"共同进步 ：）","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1731484156,"ip_address":"广东","comment_id":392467,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"概念图是好总结的好东西，怪不得看原书的时候结尾作者总是用一幅图来结束。赞！","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653855,"discussion_content":"共同进步 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731484157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382327,"user_name":"Geek_53c57c","can_delete":false,"product_type":"c1","uid":3730255,"ip_address":"美国","ucode":"9DBFEDFF234578","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoHa3lncdWTDgnC2l3aqmAAFra5QnlKcFI2ThfVk1BFVqT9v53ZZmtCehMOK9n3zZtK0EptenPCMQ/132","comment_is_top":false,"comment_ctime":1697077538,"is_pvip":false,"replies":[{"id":139703,"content":"多谢，共同进步！","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1699078531,"ip_address":"广东","comment_id":382327,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"老师深入浅出，以前做的项目用到了DDD，对于项目的架构设计一直理解的不到位。看了老师的课，受益匪浅。","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630932,"discussion_content":"多谢，共同进步！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699078531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":377516,"user_name":"runmark","can_delete":false,"product_type":"c1","uid":1004144,"ip_address":"山东","ucode":"1360DC018D2D08","user_header":"","comment_is_top":false,"comment_ctime":1688623760,"is_pvip":false,"replies":[{"id":137593,"content":"你说得对，谢谢抓虫。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1688808389,"ip_address":"广东","comment_id":377516,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"模型的实现 一节中的图是否有问题？\n适配器层，\n应该是被动适配器包含仓库的实现。\n图中画错了。","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":622911,"discussion_content":"你说得对，谢谢抓虫。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1688808389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":376351,"user_name":"Geek_d80800","can_delete":false,"product_type":"c1","uid":3326854,"ip_address":"上海","ucode":"CA6034A23C8ADF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq1doUzOEpeTRYUjaRhIkqecwS9cfKFNImQiaRia1SxDmCBWQjiaiafTpWicTeCYS7XuN4WkibkRR8XLB3g/132","comment_is_top":false,"comment_ctime":1686728480,"is_pvip":false,"replies":[{"id":137248,"content":"我这个课用的是 draw.io","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1686837670,"ip_address":"广东","comment_id":376351,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"https:&#47;&#47;www.processon.com&#47;view&#47;link&#47;64896e101da920111bce9e8f\n员工角色，通过starUml不太好画，有没有好的工具推荐","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621126,"discussion_content":"我这个课用的是 draw.io","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686837671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":375222,"user_name":"风揽明月","can_delete":false,"product_type":"c1","uid":3074275,"ip_address":"浙江","ucode":"89937129F1B68E","user_header":"https://static001.geekbang.org/account/avatar/00/2e/e8/e3/e8fd8682.jpg","comment_is_top":false,"comment_ctime":1685086885,"is_pvip":false,"replies":[{"id":136949,"content":"具体在哪里？\n","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1685170493,"ip_address":"广东","comment_id":375222,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"模型的实现的图片中有一处错误，应该是被动适配器和仓库连接的","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619488,"discussion_content":"具体在哪里？\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1685170493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3074275,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/e8/e3/e8fd8682.jpg","nickname":"风揽明月","note":"","ucode":"89937129F1B68E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619668,"discussion_content":"&#34;模型的实现&#34; 标题的第一张图片","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1685411456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368199,"user_name":"py","can_delete":false,"product_type":"c1","uid":1496577,"ip_address":"上海","ucode":"2372522D715419","user_header":"https://static001.geekbang.org/account/avatar/00/16/d6/01/2448b4a9.jpg","comment_is_top":false,"comment_ctime":1675999114,"is_pvip":false,"replies":[{"id":135179,"content":"1 不是子领域的问题，是领域对象之间的问题，我想您已经看到后面讲聚合的课程了吧？","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1678975815,"ip_address":"广东","comment_id":368199,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"1.听说过，就是业务领域包含多个子领域\n2. 不清楚","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609438,"discussion_content":"1 不是子领域的问题，是领域对象之间的问题，我想您已经看到后面讲聚合的课程了吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678975815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366619,"user_name":"6点无痛早起学习的和尚","can_delete":false,"product_type":"c1","uid":1703256,"ip_address":"北京","ucode":"33A8A1CDA103F9","user_header":"https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg","comment_is_top":false,"comment_ctime":1674001891,"is_pvip":false,"replies":[{"id":133665,"content":"学习时间是否可以归入项目，还是要看是否符合业务专家的理解。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1674449013,"ip_address":"广东","comment_id":366619,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"一些问题：\n1. 关于迭代二里的工时登记里的学习时间、这些可以归类到一个项目上：比如其他项目，也需要进行登记，这样在盘人力的时候，才知道人员一周的工时。","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600491,"discussion_content":"学习时间是否可以归入项目，还是要看是否符合业务专家的理解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674449013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365900,"user_name":"张逃逃","can_delete":false,"product_type":"c1","uid":1435550,"ip_address":"北京","ucode":"DBF3A573CDF7DB","user_header":"https://static001.geekbang.org/account/avatar/00/15/e7/9e/5853da22.jpg","comment_is_top":false,"comment_ctime":1673186865,"is_pvip":false,"replies":[{"id":133294,"content":"课程简介那里有入群方式。","user_name":"编辑回复","user_name_real":"编辑","uid":1501385,"ctime":1673232768,"ip_address":"北京","comment_id":365900,"utype":2}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"这个课可太好了，相见恨晚啊。问一下，这个课有交流群吗？","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598939,"discussion_content":"课程简介那里有入群方式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673232769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365896,"user_name":"leesper","can_delete":false,"product_type":"c1","uid":1351104,"ip_address":"广东","ucode":"CC76320571BECA","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/c0/cb5341ec.jpg","comment_is_top":false,"comment_ctime":1673185989,"is_pvip":false,"replies":[{"id":133300,"content":"这两个专题在后面都会详细讲，倒是再细聊。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1673239125,"ip_address":"广东","comment_id":365896,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"思考题：\n1. 听说过，学习UML的时候接触过这个概念，当时书上解释是整体和部分的关系，我总不能理解和组合有啥区别，现在放到DDD中来看，就明白了：聚合中的个体离开了聚合就没有存在的意义了\n\n2. 以前没听说过值对象，接触了DDD的一些书后知道了，实体的ID只要不变，内容不管怎么变都是同一个实体，但值对象的值变了，就不是原来的值对象了","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598959,"discussion_content":"这两个专题在后面都会详细讲，倒是再细聊。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673239125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365669,"user_name":"沐瑞Lynn","can_delete":false,"product_type":"c1","uid":2419069,"ip_address":"广东","ucode":"07CE753F1A4DBC","user_header":"","comment_is_top":false,"comment_ctime":1672890592,"is_pvip":false,"replies":[{"id":133228,"content":"业务相关的实体放在一起，也可以是模块。不可修改是对的，不可修改背后的本质原因可以再想想。后续课程一块聊哈。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1672995700,"ip_address":"广东","comment_id":365669,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"本人粗浅的理解：\n1、聚合，就是业务相关的实体放在一起；\n2、值对象，是不可修改的属性的集合；","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598696,"discussion_content":"业务相关的实体放在一起，也可以是模块。不可修改是对的，不可修改背后的本质原因可以再想想。后续课程一块聊哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672995700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365656,"user_name":"张强","can_delete":false,"product_type":"c1","uid":1273361,"ip_address":"广东","ucode":"A017F014BABD30","user_header":"https://static001.geekbang.org/account/avatar/00/13/6e/11/65e668c0.jpg","comment_is_top":false,"comment_ctime":1672876320,"is_pvip":false,"replies":[{"id":133230,"content":"这里咱们先初步想一下，后续课程详细聊。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1672996071,"ip_address":"广东","comment_id":365656,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"1. 聚合类似项目 ，项目分为 内部项目和外部项目。\n2.值对象 ，代表具体的内容，例如：国家 省份等","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598699,"discussion_content":"这里咱们先初步想一下，后续课程详细聊。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672996071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365636,"user_name":"小鱼儿吐泡泡","can_delete":false,"product_type":"c1","uid":1031710,"ip_address":"广东","ucode":"2B4AA532B2B066","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/1e/94886200.jpg","comment_is_top":false,"comment_ctime":1672839586,"is_pvip":false,"replies":[{"id":133232,"content":"意思上没啥大问题，后面课程咱们再扣细点。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1672996221,"ip_address":"广东","comment_id":365636,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"值对象：用于描述目的、具有整体概念和不可修改的属性； 如：  值对象 Money 用来表示金额； Money 可以由金额数量+货币方式组成\n\n聚合：实体+ 值对象构成聚合；它用来确保这些领域对象在实现共同的业务逻辑时，能保证数据的一致性。\n聚合是数据修改和持久化的基本单元，每一个聚合对应一个仓储，实现数据的持久化。 如：Order 可以当成聚合， 将Order 中包含OrderItem ","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598701,"discussion_content":"意思上没啥大问题，后面课程咱们再扣细点。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672996221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365632,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"广东","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1672838119,"is_pvip":false,"replies":[{"id":133231,"content":"理论没啥问题，后续课程咱们看看实践。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1672996141,"ip_address":"广东","comment_id":365632,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"个人看到的比较好的关于聚合的，理解容易，实践难\n    定义：\n        将实体和值对象划分为聚合并围绕聚合定义边界\n        作为一个整体来定义聚合的属性和不变量，并把执行责任赋予聚合根或者指定的框架机制\n        选择一个实体作为聚合根，并仅允许外部对象持有对聚合根的引用\n    作用\n        提升了对象系统的粒度\n        保障业务完整性\n        减少出错概率\n    划分原则\n        生命周期一致性\n            是指聚合边界内的对象，和聚合根之间存在“人身依附”关系。\n            即：如果聚合根消失，聚合内的其他元素都应该同时消失\n        问题域一致\n            事实上问题域一致是限界上下文（Bounded Context）的约束\n            聚合作为一种战术模式，所表示的模型一定会位于同一个限界上下文之内\n        场景频率一致\n            经常被同时操作的对象，它们往往属于同一个聚合。而那些极少被同时关注的对象，一般不应该划为一个聚合\n            操作场景不一致的对象，或者说如果一个对象在不同场景下都会被使用，应该考虑把它们分到不同的聚合中\n        小聚合","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598700,"discussion_content":"理论没啥问题，后续课程咱们看看实践。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672996141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365631,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"广东","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1672837963,"is_pvip":false,"replies":[{"id":133224,"content":"嗯嗯，共同学习","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1672995418,"ip_address":"广东","comment_id":365631,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100311801,"comment_content":"期待泛化和后续的课程，都是很实际的需求并且在实现过程中觉得怎么做都行的场景","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598691,"discussion_content":"嗯嗯，共同学习","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672995418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}