{"id":2274,"title":"14 | 微服务通讯方式 RPC vs REST","content":"<p>无</p>\n","comments":[{"had_liked":false,"id":2383,"user_name":"LMD","can_delete":false,"product_type":"c3","uid":1013443,"ip_address":"","ucode":"7626FBB7A4E771","user_header":"","comment_is_top":true,"comment_ctime":1516964848,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"关于《微服务架构核心20讲》课程讲义（PDF 文件），学员可复制下面链接到浏览器下载获取。 http:&#47;&#47;t.cn&#47;RQs9iTw","like_count":7},{"had_liked":false,"id":3339,"user_name":"我可能是个程序员","can_delete":false,"product_type":"c3","uid":1051795,"ip_address":"","ucode":"8CA580EA34EEF3","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/93/e3014470.jpg","comment_is_top":false,"comment_ctime":1519113516,"is_pvip":false,"replies":[{"id":1373,"content":"http是一种基于tcp的web通讯协议，json是一种消息格式（不是通讯协议），soap是一种web service的消息格式（soap ws通常基于http），rpc是远程过程调用，restful是web service的一种风格（基于http&#47;json）。本质上这些东西都是帮我们实现远程调用分布在另外一台机器上的应用的某个功能，需要通信协议（http or tcp）+ 消息格式(json or soap)，本质上都可以称为远程过程调用rpc，restful也是一种特殊的rpc。确有点搞，要靠经验积累要一定程度自然分清楚。","user_name":"作者回复","user_name_real":"晨晖","uid":1000463,"ctime":1522821137,"ip_address":"","comment_id":3339,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"经常身边有人说webservice协议，http协议，json协议，soup协议，rpc协议，restfull，总觉得晕晕的区分不开，老师怎么看待这些？如何分类","like_count":26,"discussions":[{"author":{"id":1000463,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/0f/abb7bfe3.jpg","nickname":"Geek_4zi01v","note":"","ucode":"6A485218B87E38","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415874,"discussion_content":"http是一种基于tcp的web通讯协议，json是一种消息格式（不是通讯协议），soap是一种web service的消息格式（soap ws通常基于http），rpc是远程过程调用，restful是web service的一种风格（基于http/json）。本质上这些东西都是帮我们实现远程调用分布在另外一台机器上的应用的某个功能，需要通信协议（http or tcp）+ 消息格式(json or soap)，本质上都可以称为远程过程调用rpc，restful也是一种特殊的rpc。确有点搞，要靠经验积累要一定程度自然分清楚。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522821137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":3419,"user_name":"alnssi","can_delete":false,"product_type":"c3","uid":1053877,"ip_address":"","ucode":"D45334DA1AA661","user_header":"","comment_is_top":false,"comment_ctime":1519488149,"is_pvip":false,"replies":[{"id":1361,"content":"你讲得也是一个原因","user_name":"作者回复","user_name_real":"晨晖","uid":1000463,"ctime":1522812012,"ip_address":"","comment_id":3419,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"对外开放这块rpc除了消息二进制不友好以外，应该主要是外部平台无法直接访问到具体Server吧，因为rpc一般是直连而企业有防火墙无法直接穿透直连，所以只能包一层rest服务。","like_count":12,"discussions":[{"author":{"id":1000463,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/0f/abb7bfe3.jpg","nickname":"Geek_4zi01v","note":"","ucode":"6A485218B87E38","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415898,"discussion_content":"你讲得也是一个原因","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522812012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139421,"user_name":"Ricco","can_delete":false,"product_type":"c3","uid":1590993,"ip_address":"","ucode":"E2DD9F22A46B7E","user_header":"https://static001.geekbang.org/account/avatar/00/18/46/d1/c38a4c61.jpg","comment_is_top":false,"comment_ctime":1570630174,"is_pvip":false,"replies":[{"id":74644,"content":"对","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585405568,"ip_address":"","comment_id":139421,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"gRPC的通讯协议是HTTP2.0","like_count":6,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469934,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585405568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9442,"user_name":"人丑就应多读书","can_delete":false,"product_type":"c3","uid":1131393,"ip_address":"","ucode":"286E5A75EAAD5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/81/1618d469.jpg","comment_is_top":false,"comment_ctime":1526873122,"is_pvip":false,"replies":[{"id":2854,"content":"大部场景restful就可以，restful是目前业界趋势。如果业务场景对性能要求很高，且企业业务规模发展到一定阶段，可考虑rpc。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526913539,"ip_address":"","comment_id":9442,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"老师，对于选型rpc还是resrful的场景，能举个例子说明吗？","like_count":5,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418069,"discussion_content":"大部场景restful就可以，restful是目前业界趋势。如果业务场景对性能要求很高，且企业业务规模发展到一定阶段，可考虑rpc。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526913539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109112,"user_name":"小黄鸡","can_delete":false,"product_type":"c3","uid":1052618,"ip_address":"","ucode":"9497430EB4CDAA","user_header":"https://static001.geekbang.org/account/avatar/00/10/0f/ca/532d8e8e.jpg","comment_is_top":false,"comment_ctime":1561964387,"is_pvip":false,"replies":[{"id":39539,"content":"你讲的分布式事务基于消息的实现方式，这两篇文章可以参考(medium需要翻墙)：\nhttps:&#47;&#47;dzone.com&#47;articles&#47;data-consistency-in-microservices-architecture\n\nhttps:&#47;&#47;medium.com&#47;technology-learning&#47;event-sourcing-and-cqrs-a-look-at-kafka-e0c1b90d17d8\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1561983155,"ip_address":"","comment_id":109112,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"杨波老师，咨询您一个问题，分布式事务如果采用本地消息表加上消息队列的方式实现最终一致性，那是不是就不需要rpc了，就用消息队列发送rpc的接口类.方法名.输入输出参数。\n\n还有本地消息表存放的具体内容是什么呢？\n\n我对这个最终一致性方案的实现，看不到具体的设计和实现，有点懵逼，无法理解","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456248,"discussion_content":"你讲的分布式事务基于消息的实现方式，这两篇文章可以参考(medium需要翻墙)：\nhttps://dzone.com/articles/data-consistency-in-microservices-architecture\n\nhttps://medium.com/technology-learning/event-sourcing-and-cqrs-a-look-at-kafka-e0c1b90d17d8\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561983155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101924,"user_name":"刘冲","can_delete":false,"product_type":"c3","uid":1000439,"ip_address":"","ucode":"0C4F66921AE76C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/f7/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1560057643,"is_pvip":false,"replies":[{"id":36857,"content":"对，json rpc也是一种特殊的RPC，采用json作为消息，一般binary rpc更常见。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1560169057,"ip_address":"","comment_id":101924,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"不是也有json rpc么","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453175,"discussion_content":"对，json rpc也是一种特殊的RPC，采用json作为消息，一般binary rpc更常见。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560169057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":7759,"user_name":"张鑫","can_delete":false,"product_type":"c3","uid":1030197,"ip_address":"","ucode":"9A0AE1DD952B59","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/35/86e333b9.jpg","comment_is_top":false,"comment_ctime":1525702965,"is_pvip":false,"replies":[{"id":2286,"content":"绝对性能一般REST低于RPC，但具体选择要看通讯层性能是不是你系统的瓶颈，不是瓶颈选两个任意都OK，简单选REST，性能有瓶颈则考虑RPC和二进制编码优化","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1525793219,"ip_address":"","comment_id":7759,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"请问杨老师，在什么情况下REST通讯方式的性能要高于RPC呢？按理说REST方式比RPC多封装了一层，应该在开销上RPC更低一些吧","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417472,"discussion_content":"绝对性能一般REST低于RPC，但具体选择要看通讯层性能是不是你系统的瓶颈，不是瓶颈选两个任意都OK，简单选REST，性能有瓶颈则考虑RPC和二进制编码优化","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1525793219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193153,"user_name":"程序员二师兄","can_delete":false,"product_type":"c3","uid":1205697,"ip_address":"","ucode":"C9E3B5B3358BDF","user_header":"https://static001.geekbang.org/account/avatar/00/12/65/c1/afcd981b.jpg","comment_is_top":false,"comment_ctime":1584884959,"is_pvip":false,"replies":[{"id":74963,"content":"REST比较简单，对开发较友好。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585571512,"ip_address":"","comment_id":193153,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"工作当中还是使用 REST 比较多","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488511,"discussion_content":"REST比较简单，对开发较友好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585571512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191341,"user_name":"华仔","can_delete":false,"product_type":"c3","uid":1047435,"ip_address":"","ucode":"241962BCA71674","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/8b/a1feb0bf.jpg","comment_is_top":false,"comment_ctime":1584764611,"is_pvip":false,"replies":[{"id":74959,"content":"很多公司采用对外rest + 对内rpc，但是这个方案也有一个不足：需要维护两套服务框架。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585571421,"ip_address":"","comment_id":191341,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"对外rest 对内rpc","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488154,"discussion_content":"很多公司采用对外rest + 对内rpc，但是这个方案也有一个不足：需要维护两套服务框架。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585571421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181456,"user_name":"钱","can_delete":false,"product_type":"c3","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1582543526,"is_pvip":false,"replies":[{"id":74748,"content":"本质上都是远程调用，不是实际还是有区别","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585483390,"ip_address":"","comment_id":181456,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"RPC不就是远程进程调用嘛？REST应该也是RPC的一种吧！然后，再根据所用的的通信协议不同来具体比较吧？\n内网用TCP，外网用HTTP😁","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485005,"discussion_content":"本质上都是远程调用，不是实际还是有区别","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585483390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42868,"user_name":"张懿","can_delete":false,"product_type":"c3","uid":1306374,"ip_address":"","ucode":"372E9576EC2880","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/06/3b6eb72e.jpg","comment_is_top":false,"comment_ctime":1543066800,"is_pvip":false,"replies":[{"id":16466,"content":"有用mq做服务通信做法，有公司这么干，好处是解耦，不好是异步调试不便，还有单点瓶颈","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1543841840,"ip_address":"","comment_id":42868,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"我们最近在看AMQP作为通信方式，您怎么看呢？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430221,"discussion_content":"有用mq做服务通信做法，有公司这么干，好处是解耦，不好是异步调试不便，还有单点瓶颈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543841840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16439,"user_name":"meijing0114","can_delete":false,"product_type":"c3","uid":1012416,"ip_address":"","ucode":"B349D33E2F3ECC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/c0/b09911a0.jpg","comment_is_top":false,"comment_ctime":1531961417,"is_pvip":false,"replies":[{"id":5716,"content":"嗯，TAS是微服务+运维开箱即用大套餐平台。swagger支持契约驱动编程模型","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1531973213,"ip_address":"","comment_id":16439,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"我们公司现在就在使用TARS这套解决方案，优缺点感觉文中都已经说到了。和其他rpc框架略有不同的是，TARS还包括了一套运维平台体系，带来的好处是一站式解决方案，不好的地方是需要运维团队对TARS本身有一定的运维能力。除此之外，swagger一般需要先写代码，再生成文档，但是IDL却可以预先消除服务提供者和调用者依赖，这点在开发效率上应该也是rpc的优势。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420794,"discussion_content":"嗯，TAS是微服务+运维开箱即用大套餐平台。swagger支持契约驱动编程模型","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531973213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":7695,"user_name":"Sailor","can_delete":false,"product_type":"c3","uid":1108928,"ip_address":"","ucode":"92774BD8CC1921","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/c0/76076aa1.jpg","comment_is_top":false,"comment_ctime":1525652291,"is_pvip":false,"replies":[{"id":2287,"content":"SC低层一般是REST，但feign具有一些RPC强类型客户端特性，不必纠结","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1525793322,"ip_address":"","comment_id":7695,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"springcloud中的feign是属于rpc还是rest？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417445,"discussion_content":"SC低层一般是REST，但feign具有一些RPC强类型客户端特性，不必纠结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1525793322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281317,"user_name":"king","can_delete":false,"product_type":"c3","uid":1100439,"ip_address":"","ucode":"FFC090D0EF1F80","user_header":"https://static001.geekbang.org/account/avatar/00/10/ca/97/5042c207.jpg","comment_is_top":false,"comment_ctime":1614688109,"is_pvip":false,"replies":[{"id":102213,"content":"http2是未来方向，grpc是基于http2的。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1614787055,"ip_address":"","comment_id":281317,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"http2也是二进制传输了","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516356,"discussion_content":"http2是未来方向，grpc是基于http2的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614787055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388509,"user_name":"Devin","can_delete":false,"product_type":"c3","uid":1031224,"ip_address":"湖北","ucode":"E0BEEB9F6366BD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bc/38/e5219420.jpg","comment_is_top":false,"comment_ctime":1710314454,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"讲的太好了，24年买这个课程都觉得很值！","like_count":0},{"had_liked":false,"id":377816,"user_name":"林元彬","can_delete":false,"product_type":"c3","uid":2558955,"ip_address":"北京","ucode":"5F6B5662235E7F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJZ2DPs8z1lU2Uvfj9L0O9155k3rUk7Hd2czWwc0K55OTPic9wRiaR8vGs2YiaN9c99FMqiagoov1oSHQ/132","comment_is_top":false,"comment_ctime":1689295992,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"websocket \n怎么讲呢老师","like_count":0},{"had_liked":false,"id":333932,"user_name":"一生.明朗","can_delete":false,"product_type":"c3","uid":2849609,"ip_address":"","ucode":"A49F0B6F52C1F8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DNX5XibMEAeZicXCeypU1O9uLYstU6mqj3FDIoeodvFhEI6YV3FibJ28gDg5UfjpuF5XgFQCxZLM12XAyfY8Smiatw/132","comment_is_top":false,"comment_ctime":1644594849,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"1.http协议工作在第7层，rpc的tcp工作在第四层，rpc会快。\n2.http较重，payload较大。\n3.rpc的开发以及运维架构等复杂度变高。\n\n大多数场景下，体量不是顶级，网络io根本不是瓶颈，专注业务就好，rest首选，顶级流量，rpc更优。","like_count":0},{"had_liked":false,"id":315094,"user_name":"Geek6575","can_delete":false,"product_type":"c3","uid":2791503,"ip_address":"","ucode":"C23DDCF687621E","user_header":"","comment_is_top":false,"comment_ctime":1633686169,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"老师，感觉这块rpc和rest放在一起对比有些不合适呀。\n我一直觉得服务间通讯方式就两大类：rpc（一般是同步），mq（一般是异步）\nrpc我理解的是像本地方法一样调用远程服务，底层通讯可以是http，tcp，自定义的\n而rest我觉得更像是对http相应体的规范。\n还请老师指教","like_count":0},{"had_liked":false,"id":218494,"user_name":"我来也","can_delete":false,"product_type":"c3","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1589808752,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"老师的对比很详细，学习了。","like_count":0}]}