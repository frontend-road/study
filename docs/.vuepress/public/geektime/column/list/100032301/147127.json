{"id":147127,"title":"33 | åŠ¨æ‰‹å®ç°ä¸€ä¸ªç®€å•çš„RPCæ¡†æ¶ï¼ˆä¸‰ï¼‰ï¼šå®¢æˆ·ç«¯","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æç¥ã€‚</p><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬å·²ç»ä¸€èµ·å®ç°äº†è¿™ä¸ªRPCæ¡†æ¶ä¸­çš„ä¸¤ä¸ªåŸºç¡€ç»„ä»¶ï¼šåºåˆ—åŒ–å’Œç½‘ç»œä¼ è¾“éƒ¨åˆ†ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬ç»§ç»­æ¥å®ç°è¿™ä¸ªRPCæ¡†æ¶çš„å®¢æˆ·ç«¯éƒ¨åˆ†ã€‚</p><p>åœ¨ã€Š<a href=\"https://time.geekbang.org/column/article/144320\">31 | åŠ¨æ‰‹å®ç°ä¸€ä¸ªç®€å•çš„RPCæ¡†æ¶ï¼ˆä¸€ï¼‰ï¼šåŸç†å’Œç¨‹åºçš„ç»“æ„</a>ã€‹è¿™èŠ‚è¯¾ä¸­æˆ‘ä»¬æåˆ°è¿‡ï¼Œåœ¨RPCæ¡†æ¶ä¸­ï¼Œæœ€å…³é”®çš„å°±æ˜¯ç†è§£â€œæ¡©â€çš„å®ç°åŸç†ï¼Œæ¡©æ˜¯RPCæ¡†æ¶åœ¨å®¢æˆ·ç«¯çš„æœåŠ¡ä»£ç†ï¼Œå®ƒå’Œè¿œç¨‹æœåŠ¡å…·æœ‰ç›¸åŒçš„æ–¹æ³•ç­¾åï¼Œæˆ–è€…è¯´æ˜¯å®ç°äº†ç›¸åŒçš„æ¥å£ï¼Œå®¢æˆ·ç«¯åœ¨è°ƒç”¨RPCæ¡†æ¶æä¾›çš„æœåŠ¡æ—¶ï¼Œå®é™…è°ƒç”¨çš„å°±æ˜¯â€œæ¡©â€æä¾›çš„æ–¹æ³•ï¼Œåœ¨æ¡©çš„å®ç°æ–¹æ³•ä¸­ï¼Œå®ƒä¼šå‘è¯·æ±‚åˆ°æœåŠ¡ç«¯è·å–è°ƒç”¨ç»“æœå¹¶è¿”å›ç»™è°ƒç”¨æ–¹ã€‚</p><p><strong>åœ¨RPCæ¡†æ¶çš„å®¢æˆ·ç«¯ä¸­ï¼Œæœ€å…³é”®çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•æ¥ç”Ÿæˆå’Œå®ç°è¿™ä¸ªæ¡©ã€‚</strong></p><h2>å¦‚ä½•æ¥åŠ¨æ€åœ°ç”Ÿæˆæ¡©ï¼Ÿ</h2><p>RPCæ¡†æ¶ä¸­çš„è¿™ç§æ¡©çš„è®¾è®¡ï¼Œå®ƒå…¶å®é‡‡ç”¨äº†ä¸€ç§è®¾è®¡æ¨¡å¼ï¼šâ€œä»£ç†æ¨¡å¼â€ã€‚ä»£ç†æ¨¡å¼ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ï¼Œè¢«ä»£ç†çš„é‚£ä¸ªå¯¹è±¡ç§°ä¸ºå§”æ‰˜å¯¹è±¡ã€‚</p><p>åœ¨RPCæ¡†æ¶ä¸­ï¼Œä»£ç†å¯¹è±¡éƒ½æ˜¯ç”±RPCæ¡†æ¶çš„å®¢æˆ·ç«¯æ¥æä¾›çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸€ç›´è¯´çš„â€œæ¡©â€ï¼Œå§”æ‰˜å¯¹è±¡å°±æ˜¯åœ¨æœåŠ¡ç«¯ï¼ŒçœŸæ­£å®ç°ä¸šåŠ¡é€»è¾‘çš„æœåŠ¡ç±»çš„å®ä¾‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6c/48/6ca3f88f1a6c06513d5adfe976efcc48.jpg?wh=4266*768\" alt=\"\"></p><p>æˆ‘ä»¬æœ€å¸¸ç”¨Springæ¡†æ¶ï¼Œå®ƒçš„æ ¸å¿ƒIOCï¼ˆä¾èµ–æ³¨å…¥ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ï¼‰æœºåˆ¶ï¼Œå°±æ˜¯è¿™ç§ä»£ç†æ¨¡å¼çš„ä¸€ä¸ªå®ç°ã€‚æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åˆ©ç”¨è¿™ç§ä»£ç†æ¨¡å¼ï¼Œåœ¨è°ƒç”¨æµç¨‹ä¸­åŠ¨æ€åœ°æ³¨å…¥ä¸€äº›éä¾µå…¥å¼ä¸šåŠ¡é€»è¾‘ã€‚</p><!-- [[[read_end]]] --><p>è¿™é‡Œçš„â€œéä¾µå…¥â€æŒ‡çš„æ˜¯ï¼Œåœ¨ç°æœ‰çš„è°ƒç”¨é“¾ä¸­ï¼Œå¢åŠ ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸ç”¨å»ä¿®æ”¹è°ƒç”¨é“¾ä¸Šä¸‹æ¸¸çš„ä»£ç ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬è¦ç›‘æ§ä¸€ä¸ªæ–¹æ³•Açš„è¯·æ±‚è€—æ—¶ï¼Œæ™®é€šçš„æ–¹å¼å°±æ˜¯åœ¨æ–¹æ³•çš„å¼€å§‹å’Œè¿”å›è¿™ä¸¤ä¸ªåœ°æ–¹å„åŠ ä¸€æ¡è®°å½•æ—¶é—´çš„è¯­å¥ï¼Œè¿™ç§æ–¹æ³•å°±éœ€è¦ä¿®æ”¹è¿™ä¸ªæ–¹æ³•çš„ä»£ç ï¼Œè¿™æ˜¯ä¸€ç§â€œä¾µå…¥å¼â€çš„æ–¹å¼ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥ç»™è¿™ä¸ªæ–¹æ³•æ‰€åœ¨çš„ç±»åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ï¼Œåœ¨è¿™ä¸ªä»£ç†ç±»çš„Aæ–¹æ³•ä¸­ï¼Œå…ˆè®°å½•å¼€å§‹æ—¶é—´ï¼Œç„¶åè°ƒç”¨å§”æ‰˜ç±»çš„Aæ–¹æ³•ï¼Œå†è®°å½•ç»“æŸæ—¶é—´ã€‚æŠŠè¿™ä¸ªä»£ç†ç±»åŠ å…¥åˆ°è°ƒç”¨é“¾ä¸­ï¼Œå°±å¯ä»¥å®ç°â€œéä¾µå…¥å¼â€è®°å½•è€—æ—¶äº†ã€‚åŒæ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨åœ¨æƒé™éªŒè¯ã€é£é™©æ§åˆ¶ã€è°ƒç”¨é“¾è·Ÿè¸ªç­‰ç­‰è¿™äº›åœºæ™¯ä¸­ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªRPCæ¡†æ¶çš„å®¢æˆ·ç«¯ä¸­ï¼Œæ€ä¹ˆæ¥å®ç°çš„è¿™ä¸ªä»£ç†ç±»ï¼Œä¹Ÿå°±æ˜¯â€œæ¡©â€ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆå®šä¸€ä¸ªStubFactoryæ¥å£ï¼Œè¿™ä¸ªæ¥å£å°±åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š</p><pre><code>public interface StubFactory {\n    &lt;T&gt; T createStub(Transport transport, Class&lt;T&gt; serviceClass);\n}\n</code></pre><p>è¿™ä¸ªæ¡©å·¥å‚æ¥å£åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•createStubï¼Œå®ƒçš„åŠŸèƒ½å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ¡©çš„å®ä¾‹ï¼Œè¿™ä¸ªæ¡©å®ç°çš„æ¥å£å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä»£ç ä¸­çš„æ³›å‹Tã€‚è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªTransportå¯¹è±¡ï¼Œè¿™ä¸ªTransportæˆ‘ä»¬åœ¨ä¸ŠèŠ‚è¯¾ä»‹ç»è¿‡ï¼Œå®ƒæ˜¯ç”¨æ¥ç»™æœåŠ¡ç«¯å‘è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨çš„ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªClasså¯¹è±¡ï¼Œå®ƒç”¨æ¥å‘Šè¯‰æ¡©å·¥å‚ï¼šæˆ‘éœ€è¦ä½ ç»™æˆ‘åˆ›å»ºçš„è¿™ä¸ªæ¡©ï¼Œåº”è¯¥æ˜¯ä»€ä¹ˆç±»å‹çš„ã€‚createStubçš„è¿”å›å€¼å°±æ˜¯ç”±å·¥å‚åˆ›å»ºå‡ºæ¥çš„æ¡©ã€‚</p><p>å¦‚ä½•æ¥å®ç°è¿™ä¸ªå·¥å‚æ–¹æ³•ï¼Œåˆ›å»ºæ¡©å‘¢ï¼Ÿè¿™ä¸ªæ¡©å®ƒæ˜¯ä¸€ä¸ªç”±RPCæ¡†æ¶ç”Ÿæˆçš„ç±»ï¼Œè¿™ä¸ªç±»å®ƒè¦å®ç°ç»™å®šçš„æ¥å£ï¼Œé‡Œé¢çš„é€»è¾‘å°±æ˜¯æŠŠæ–¹æ³•åå’Œå‚æ•°å°è£…æˆè¯·æ±‚ï¼Œå‘é€ç»™æœåŠ¡ç«¯ï¼Œç„¶åå†æŠŠæœåŠ¡ç«¯è¿”å›çš„è°ƒç”¨ç»“æœè¿”å›ç»™è°ƒç”¨æ–¹ã€‚è¿™é‡Œæˆ‘ä»¬å·²ç»è§£å†³äº†ç½‘ç»œä¼ è¾“å’Œåºåˆ—åŒ–çš„é—®é¢˜ï¼Œå‰©ä¸‹ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜å°±æ˜¯å¦‚ä½•æ¥ç”Ÿæˆè¿™ä¸ªç±»äº†ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ™®é€šçš„ç±»å®ƒæ˜¯ç”±æˆ‘ä»¬ç¼–å†™çš„æºä»£ç ï¼Œé€šè¿‡ç¼–è¯‘å™¨ç¼–è¯‘ä¹‹åç”Ÿæˆçš„ã€‚é‚£RPCæ¡†æ¶æ€ä¹ˆæ‰èƒ½æ ¹æ®è¦å®ç°çš„æ¥å£æ¥ç”Ÿæˆä¸€ä¸ªç±»å‘¢ï¼Ÿåœ¨è¿™ä¸€å—å„¿ï¼Œä¸åŒçš„RPCæ¡†æ¶çš„å®ç°æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚ï¼ŒgRPCå®ƒæ˜¯åœ¨ç¼–è¯‘IDLçš„æ—¶å€™å°±æŠŠæ¡©ç”Ÿæˆå¥½äº†ï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘å‡ºæ¥æ¡©ï¼Œå®ƒæ˜¯ç›®æ ‡è¯­è¨€çš„æºä»£ç æ–‡ä»¶ã€‚æ¯”å¦‚è¯´ï¼Œç›®æ ‡è¯­è¨€æ˜¯Javaï¼Œç¼–è¯‘å®Œæˆåå®ƒä»¬ä¼šç”Ÿæˆä¸€äº›Javaçš„æºä»£ç æ–‡ä»¶ï¼Œå…¶ä¸­ä»¥Grpc.javaç»“å°¾çš„æ–‡ä»¶å°±æ˜¯ç”Ÿæˆçš„æ¡©çš„æºä»£ç ã€‚è¿™äº›ç”Ÿæˆçš„æºä»£ç æ–‡ä»¶å†ç»è¿‡Javaç¼–è¯‘å™¨ç¼–è¯‘ä»¥åï¼Œå°±æˆäº†æ¡©ã€‚</p><p>è€ŒDubboæ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆçš„æ¡©ï¼Œè¿™ä¸ªå®ç°å°±æ›´åŠ å¤æ‚äº†ï¼Œå¹¶ä¸”å®ƒåˆ©ç”¨äº†å¾ˆå¤šJavaè¯­è¨€åº•å±‚çš„ç‰¹æ€§ã€‚ä½†æ˜¯å®ƒçš„åŸç†å¹¶ä¸å¤æ‚ï¼ŒJavaæºä»£ç ç¼–è¯‘å®Œæˆä¹‹åï¼Œç”Ÿæˆçš„æ˜¯ä¸€äº›classæ–‡ä»¶ï¼ŒJVMåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œè¯»å–è¿™äº›Classæ–‡ä»¶æ¥åˆ›å»ºå¯¹åº”ç±»çš„å®ä¾‹ã€‚</p><p>è¿™ä¸ªClassæ–‡ä»¶è™½ç„¶éå¸¸å¤æ‚ï¼Œä½†æœ¬è´¨ä¸Šï¼Œå®ƒé‡Œé¢è®°å½•çš„å†…å®¹ï¼Œå°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„æºä»£ç ä¸­çš„å†…å®¹ï¼ŒåŒ…æ‹¬ç±»çš„å®šä¹‰ï¼Œæ–¹æ³•å®šä¹‰å’Œä¸šåŠ¡é€»è¾‘ç­‰ç­‰ï¼Œå¹¶ä¸”å®ƒä¹Ÿæ˜¯æœ‰å›ºå®šçš„æ ¼å¼çš„ã€‚å¦‚æœè¯´ï¼Œæˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ ¼å¼ï¼Œæ¥ç”Ÿæˆä¸€ä¸ªclassæ–‡ä»¶ï¼Œåªè¦è¿™ä¸ªæ–‡ä»¶çš„æ ¼å¼æ˜¯ç¬¦åˆJavaè§„èŒƒçš„ï¼ŒJVMå°±å¯ä»¥è¯†åˆ«å¹¶åŠ è½½å®ƒã€‚è¿™æ ·å°±ä¸éœ€è¦ç»è¿‡æºä»£ç ã€ç¼–è¯‘è¿™äº›è¿‡ç¨‹ï¼Œç›´æ¥åŠ¨æ€æ¥åˆ›å»ºä¸€ä¸ªæ¡©ã€‚</p><p>ç”±äºåŠ¨æ€ç”Ÿæˆclassæ–‡ä»¶è¿™éƒ¨åˆ†é€»è¾‘å’ŒJavaè¯­è¨€çš„ç‰¹æ€§æ˜¯ç´§å¯†å…³è”çš„ï¼Œè€ƒè™‘æœ‰äº›åŒå­¦å¹¶ä¸ç†Ÿæ‚‰Javaè¯­è¨€ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªRPCçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨ä¸€ç§æ›´é€šç”¨çš„æ–¹å¼æ¥åŠ¨æ€ç”Ÿæˆæ¡©ã€‚æˆ‘ä»¬é‡‡ç”¨çš„æ–¹å¼æ˜¯ï¼šå…ˆç”Ÿæˆæ¡©çš„æºä»£ç ï¼Œç„¶ååŠ¨æ€åœ°ç¼–è¯‘è¿™ä¸ªç”Ÿæˆçš„æºä»£ç ï¼Œç„¶åå†åŠ è½½åˆ°JVMä¸­ã€‚</p><p>ä¸ºäº†è®©è¿™éƒ¨åˆ†ä»£ç ä¸ä¼šè¿‡äºå¤æ‚ï¼Œä¾¿äºä½ å¿«é€Ÿç†è§£ï¼Œæˆ‘ä»¬é™å®šï¼šæœåŠ¡æ¥å£åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•åªèƒ½æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹éƒ½æ˜¯Stringç±»å‹ã€‚ä½ åœ¨å­¦ä¼šè¿™éƒ¨åˆ†åŠ¨æ€ç”Ÿæˆæ¡©çš„åŸç†ä¹‹åï¼Œå¾ˆå®¹æ˜“é‡æ„è¿™éƒ¨åˆ†ä»£ç æ¥è§£é™¤è¿™ä¸ªé™å®šï¼Œæ— éæ˜¯å¤šéå†å‡ æ¬¡æ–¹æ³•å’Œå‚æ•°è€Œå·²ã€‚</p><p>æˆ‘ä¹‹å‰è®²è¿‡ï¼Œæˆ‘ä»¬éœ€è¦åŠ¨æ€ç”Ÿæˆçš„è¿™ä¸ªæ¡©ï¼Œå®ƒæ¯ä¸ªæ–¹æ³•çš„é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æŠŠç±»åã€æ–¹æ³•åå’Œæ–¹æ³•çš„å‚æ•°å°è£…æˆè¯·æ±‚ï¼Œç„¶åå‘ç»™æœåŠ¡ç«¯ï¼Œæ”¶åˆ°æœåŠ¡ç«¯å“åº”ä¹‹åå†æŠŠç»“æœä½œä¸ºè¿”å›å€¼ï¼Œè¿”å›ç»™è°ƒç”¨æ–¹ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªAbstractStubçš„æŠ½è±¡ç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­å®ç°å¤§éƒ¨åˆ†é€šç”¨çš„é€»è¾‘ï¼Œè®©æ‰€æœ‰åŠ¨æ€ç”Ÿæˆçš„æ¡©éƒ½ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»ï¼Œè¿™æ ·åŠ¨æ€ç”Ÿæˆæ¡©çš„ä»£ç ä¼šæ›´å°‘ä¸€äº›ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥å®ç°å®¢æˆ·ç«¯æœ€å…³é”®çš„è¿™éƒ¨åˆ†ä»£ç ï¼šå®ç°è¿™ä¸ªStubFactoryæ¥å£åŠ¨æ€ç”Ÿæˆæ¡©ã€‚</p><pre><code>public class DynamicStubFactory implements StubFactory{\n    private final static String STUB_SOURCE_TEMPLATE =\n            &quot;package com.github.liyue2008.rpc.client.stubs;\\n&quot; +\n            &quot;import com.github.liyue2008.rpc.serialize.SerializeSupport;\\n&quot; +\n            &quot;\\n&quot; +\n            &quot;public class %s extends AbstractStub implements %s {\\n&quot; +\n            &quot;    @Override\\n&quot; +\n            &quot;    public String %s(String arg) {\\n&quot; +\n            &quot;        return SerializeSupport.parse(\\n&quot; +\n            &quot;                invokeRemote(\\n&quot; +\n            &quot;                        new RpcRequest(\\n&quot; +\n            &quot;                                \\&quot;%s\\&quot;,\\n&quot; +\n            &quot;                                \\&quot;%s\\&quot;,\\n&quot; +\n            &quot;                                SerializeSupport.serialize(arg)\\n&quot; +\n            &quot;                        )\\n&quot; +\n            &quot;                )\\n&quot; +\n            &quot;        );\\n&quot; +\n            &quot;    }\\n&quot; +\n            &quot;}&quot;;\n\n    @Override\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public &lt;T&gt; T createStub(Transport transport, Class&lt;T&gt; serviceClass) {\n        try {\n            // å¡«å……æ¨¡æ¿\n            String stubSimpleName = serviceClass.getSimpleName() + &quot;Stub&quot;;\n            String classFullName = serviceClass.getName();\n            String stubFullName = &quot;com.github.liyue2008.rpc.client.stubs.&quot; + stubSimpleName;\n            String methodName = serviceClass.getMethods()[0].getName();\n\n            String source = String.format(STUB_SOURCE_TEMPLATE, stubSimpleName, classFullName, methodName, classFullName, methodName);\n            // ç¼–è¯‘æºä»£ç \n            JavaStringCompiler compiler = new JavaStringCompiler();\n            Map&lt;String, byte[]&gt; results = compiler.compile(stubSimpleName + &quot;.java&quot;, source);\n            // åŠ è½½ç¼–è¯‘å¥½çš„ç±»\n            Class&lt;?&gt; clazz = compiler.loadClass(stubFullName, results);\n            // æŠŠTransportèµ‹å€¼ç»™æ¡©\n            ServiceStub stubInstance = (ServiceStub) clazz.newInstance();\n            stubInstance.setTransport(transport);\n            // è¿”å›è¿™ä¸ªæ¡©\n            return (T) stubInstance;\n        } catch (Throwable t) {\n            throw new RuntimeException(t);\n        }\n    }\n}\n</code></pre><p>ä¸€èµ·æ¥çœ‹ä¸€ä¸‹è¿™æ®µä»£ç ï¼Œé™æ€å˜é‡STUB_SOURCE_TEMPLATEæ˜¯æ¡©çš„æºä»£ç çš„æ¨¡æ¿ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ï¼Œå¡«å……æ¨¡æ¿ä¸­å˜é‡ï¼Œç”Ÿæˆæ¡©çš„æºç ï¼Œç„¶ååŠ¨æ€çš„ç¼–è¯‘ã€åŠ è½½è¿™ä¸ªæ¡©å°±å¯ä»¥äº†ã€‚</p><p>å…ˆæ¥çœ‹è¿™ä¸ªæ¨¡æ¿ï¼Œå®ƒå”¯ä¸€çš„è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå°±åªæœ‰ä¸€è¡Œä»£ç ï¼ŒæŠŠæ¥å£çš„ç±»åã€æ–¹æ³•åå’Œåºåˆ—åŒ–åçš„å‚æ•°å°è£…æˆä¸€ä¸ªRpcRequestå¯¹è±¡ï¼Œè°ƒç”¨çˆ¶ç±»AbstractStubä¸­çš„invokeRemoteæ–¹æ³•ï¼Œå‘é€ç»™æœåŠ¡ç«¯ã€‚invokeRemoteæ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯åºåˆ—åŒ–çš„è°ƒç”¨ç»“æœï¼Œæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­æŠŠè¿™ä¸ªç»“æœååºåˆ—åŒ–ä¹‹åï¼Œç›´æ¥ä½œä¸ºè¿”å›å€¼è¿”å›ç»™è°ƒç”¨æ–¹å°±å¯ä»¥äº†ã€‚</p><p>å†æ¥çœ‹ä¸‹é¢çš„createStrubæ–¹æ³•ï¼Œä»serviceClassè¿™ä¸ªå‚æ•°ä¸­ï¼Œå¯ä»¥å–åˆ°æœåŠ¡æ¥å£å®šä¹‰çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¥å£åã€å®ƒæœ‰å“ªäº›æ–¹æ³•ã€æ¯ä¸ªæ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ç­‰ç­‰ã€‚é€šè¿‡è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥å¡«å……æ¨¡æ¿ï¼Œç”Ÿæˆæ¡©çš„æºä»£ç ã€‚</p><p>æ¡©çš„ç±»åå°±å®šä¹‰ä¸ºï¼šâ€œæ¥å£å + Stubâ€ï¼Œä¸ºäº†é¿å…ç±»åå†²çªï¼Œæˆ‘ä»¬æŠŠè¿™äº›æ¡©éƒ½ç»Ÿä¸€æ”¾åˆ°å›ºå®šçš„åŒ…com.github.liyue2008.rpc.client.stubsä¸‹é¢ã€‚å¡«å……å¥½æ¨¡æ¿ç”Ÿæˆçš„æºä»£ç å­˜æ”¾åœ¨sourceå˜é‡ä¸­ï¼Œç„¶åç»è¿‡åŠ¨æ€ç¼–è¯‘ã€åŠ¨æ€åŠ è½½ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°è¿™ä¸ªæ¡©çš„ç±»clazzï¼Œåˆ©ç”¨åå°„åˆ›å»ºä¸€ä¸ªæ¡©çš„å®ä¾‹stubInstanceã€‚æŠŠç”¨äºç½‘ç»œä¼ è¾“çš„å¯¹è±¡transportèµ‹å€¼ç»™æ¡©ï¼Œè¿™æ ·æ¡©æ‰èƒ½ä¸æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®ç°äº†åŠ¨æ€åˆ›å»ºä¸€ä¸ªæ¡©ã€‚</p><h2>ä½¿ç”¨ä¾èµ–å€’ç½®åŸåˆ™è§£è€¦è°ƒç”¨è€…å’Œå®ç°</h2><p>åœ¨è¿™ä¸ªRPCæ¡†æ¶çš„ä¾‹å­ä¸­ï¼Œå¾ˆå¤šåœ°æ–¹æˆ‘ä»¬éƒ½é‡‡ç”¨äº†åŒæ ·ä¸€ç§è§£è€¦çš„æ–¹æ³•ï¼šé€šè¿‡å®šä¹‰ä¸€ä¸ªæ¥å£æ¥è§£è€¦è°ƒç”¨æ–¹å’Œå®ç°ã€‚åœ¨è®¾è®¡ä¸Šè¿™ç§æ–¹æ³•ç§°ä¸ºâ€œä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰â€ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œè°ƒç”¨æ–¹ä¸åº”ä¾èµ–äºå…·ä½“å®ç°ï¼Œè€Œæ˜¯ä¸ºå®ç°å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œè®©è°ƒç”¨æ–¹å’Œå®ç°éƒ½ä¾èµ–äºè¿™ä¸ªæ¥å£ã€‚è¿™ç§æ–¹æ³•ä¹Ÿç§°ä¸ºâ€œé¢å‘æ¥å£ç¼–ç¨‹â€ã€‚å®ƒçš„å¥½å¤„æˆ‘ä»¬ä¹‹å‰å·²ç»åå¤è¯´è¿‡äº†ï¼Œå¯ä»¥è§£è€¦è°ƒç”¨æ–¹å’Œå…·ä½“çš„å®ç°ï¼Œä¸ä»…å®ç°æ˜¯å¯æ›¿æ¢çš„ï¼Œå®ç°è¿åŒå®šä¹‰å®ç°çš„æ¥å£ä¹Ÿæ˜¯å¯ä»¥å¤ç”¨çš„ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„StubFactoryå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„å®ç°ç±»æ˜¯DynamicStubFactoryï¼Œè°ƒç”¨æ–¹æ˜¯NettyRpcAccessPointï¼Œè°ƒç”¨æ–¹NettyAccessPointå¹¶ä¸ä¾èµ–å®ç°ç±»DynamicStubFactoryï¼Œå°±å¯ä»¥è°ƒç”¨DynamicStubFactoryçš„createStubæ–¹æ³•ã€‚</p><p>è¦è§£è€¦è°ƒç”¨æ–¹å’Œå®ç°ç±»ï¼Œè¿˜éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼šè°æ¥åˆ›å»ºå®ç°ç±»çš„å®ä¾‹ï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œéƒ½æ˜¯è°ä½¿ç”¨è°åˆ›å»ºï¼Œä½†è¿™é‡Œé¢æˆ‘ä»¬ä¸ºäº†è§£è€¦è°ƒç”¨æ–¹å’Œå®ç°ç±»ï¼Œè°ƒç”¨æ–¹å°±ä¸èƒ½æ¥ç›´æ¥åˆ›å»ºå®ç°ç±»ï¼Œå› ä¸ºè¿™æ ·å°±æ— æ³•è§£è€¦äº†ã€‚é‚£èƒ½ä¸èƒ½ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¥åˆ›å»ºè¿™ä¸ªå®ç°ç±»å‘¢ï¼Ÿä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œå³ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»æ¥åˆ›å»ºå®ç°ï¼Œé‚£ä¾èµ–å…³ç³»å°±å˜æˆäº†ï¼šè°ƒç”¨æ–¹ä¾èµ–ç¬¬ä¸‰æ–¹ç±»ï¼Œç¬¬ä¸‰æ–¹ç±»ä¾èµ–å®ç°ç±»ï¼Œè°ƒç”¨æ–¹è¿˜æ˜¯é—´æ¥ä¾èµ–å®ç°ç±»ï¼Œè¿˜æ˜¯æ²¡æœ‰è§£è€¦ã€‚</p><p>è¿™ä¸ªé—®é¢˜æ€ä¹ˆæ¥è§£å†³ï¼Ÿæ²¡é”™ï¼Œä½¿ç”¨Springçš„ä¾èµ–æ³¨å…¥æ˜¯å¯ä»¥è§£å†³çš„ã€‚è¿™é‡Œå†ç»™ä½ ä»‹ç»ä¸€ç§Javaè¯­è¨€å†…ç½®çš„ï¼Œæ›´è½»é‡çº§çš„è§£å†³æ–¹æ¡ˆï¼šSPIï¼ˆService Provider Interfaceï¼‰ã€‚åœ¨SPIä¸­ï¼Œæ¯ä¸ªæ¥å£åœ¨ç›®å½•META-INF/services/ä¸‹éƒ½æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶åå°±æ˜¯ä»¥è¿™ä¸ªæ¥å£çš„ç±»åï¼Œæ–‡ä»¶çš„å†…å®¹å°±æ˜¯å®ƒçš„å®ç°ç±»çš„ç±»åã€‚è¿˜æ˜¯ä»¥StubFactoryæ¥å£ä¸ºä¾‹ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒçš„é…ç½®æ–‡ä»¶ï¼š</p><pre><code>$cat rpc-netty/src/main/resources/META-INF/services/com.github.liyue2008.rpc.client.StubFactory\ncom.github.liyue2008.rpc.client.DynamicStubFactory\n</code></pre><p>åªè¦æŠŠè¿™ä¸ªé…ç½®æ–‡ä»¶ã€æ¥å£å’Œå®ç°ç±»éƒ½æ”¾åˆ°CLASSPATHä¸­ï¼Œå°±å¯ä»¥é€šè¿‡SPIçš„æ–¹å¼æ¥è¿›è¡ŒåŠ è½½äº†ã€‚åŠ è½½çš„å‚æ•°å°±æ˜¯è¿™ä¸ªæ¥å£çš„classå¯¹è±¡ï¼Œè¿”å›å€¼å°±æ˜¯è¿™ä¸ªæ¥å£çš„æ‰€æœ‰å®ç°ç±»çš„å®ä¾‹ï¼Œè¿™æ ·å°±åœ¨â€œä¸ä¾èµ–å®ç°ç±»â€çš„å‰æä¸‹ï¼Œè·å¾—äº†ä¸€ä¸ªå®ç°ç±»çš„å®ä¾‹ã€‚å…·ä½“çš„å®ç°ä»£ç åœ¨ServiceSupportè¿™ä¸ªç±»ä¸­ã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·å®ç°äº†è¿™ä¸ªRPCæ¡†æ¶çš„å®¢æˆ·ç«¯ï¼Œåœ¨å®¢æˆ·ç«¯ä¸­ï¼Œæœ€æ ¸å¿ƒçš„éƒ¨åˆ†å°±æ˜¯æ¡©ï¼Œä¹Ÿå°±æ˜¯è¿œç¨‹æœåŠ¡çš„ä»£ç†ç±»ã€‚åœ¨æ¡©ä¸­ï¼Œæ¯ä¸ªæ–¹æ³•çš„é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯æŠŠæ¥å£åã€æ–¹æ³•åå’Œè¯·æ±‚çš„å‚æ•°å°è£…æˆä¸€ä¸ªè¯·æ±‚å‘ç»™æœåŠ¡ç«¯ï¼Œç”±æœåŠ¡ç«¯è°ƒç”¨çœŸæ­£çš„ä¸šåŠ¡ç±»è·å–ç»“æœå¹¶è¿”å›ç»™å®¢æˆ·ç«¯çš„æ¡©ï¼Œæ¡©å†æŠŠç»“æœè¿”å›ç»™è°ƒç”¨æ–¹ã€‚</p><p>å®¢æˆ·ç«¯å®ç°çš„éš¾ç‚¹å°±æ˜¯ï¼Œå¦‚ä½•æ¥åŠ¨æ€åœ°ç”Ÿæˆæ¡©ã€‚åƒgRPCè¿™ç±»å¤šè¯­è¨€çš„RPCæ¡†æ¶ï¼Œéƒ½æ˜¯åœ¨ç¼–è¯‘IDLçš„è¿‡ç¨‹ä¸­ç”Ÿæˆæ¡©çš„æºä»£ç ï¼Œå†å’Œä¸šåŠ¡ä»£ç ï¼Œä½¿ç”¨ç›®æ ‡è¯­è¨€çš„ç¼–è¯‘å™¨ä¸€èµ·ç¼–è¯‘çš„ã€‚è€ŒåƒDubboè¿™ç±»æ²¡æœ‰ç¼–è¯‘è¿‡ç¨‹çš„RPCæ¡†æ¶ï¼Œéƒ½æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œåˆ©ç”¨ä¸€äº›è¯­è¨€åŠ¨æ€ç‰¹æ€§ï¼ŒåŠ¨æ€åˆ›å»ºçš„æ¡©ã€‚</p><p>RPCæ¡†æ¶çš„è¿™ç§â€œæ¡©â€çš„è®¾è®¡ï¼Œå…¶å®æ˜¯ä¸€ç§åŠ¨æ€ä»£ç†è®¾è®¡æ¨¡å¼ã€‚è¿™ç§è®¾è®¡æ¨¡å¼å¯ä»¥åœ¨ä¸ä¿®æ”¹æºç ï¼Œç”šè‡³ä¸éœ€è¦æºç çš„æƒ…å†µä¸‹ï¼Œåœ¨è°ƒç”¨é“¾ä¸­æ³¨å…¥ä¸€äº›ä¸šåŠ¡é€»è¾‘ã€‚è¿™æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„é«˜çº§æŠ€å·§ï¼Œå¯ä»¥ç”¨åœ¨æƒé™éªŒè¯ã€é£é™©æ§åˆ¶ã€è°ƒç”¨é“¾è·Ÿè¸ªç­‰ç­‰å¾ˆå¤šåœºæ™¯ä¸­ï¼Œå¸Œæœ›ä½ èƒ½æŒæ¡å®ƒçš„å®ç°åŸç†ã€‚</p><p>æœ€åæˆ‘ä»¬ä»‹ç»çš„ä¾èµ–å€’ç½®åŸåˆ™ï¼Œå¯ä»¥éå¸¸æœ‰æ•ˆåœ°é™ä½ç³»ç»Ÿå„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦ï¼Œå¹¶ä¸”ä¸ä¼šè¿‡åº¦å¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œå»ºè®®ä½ åœ¨è®¾è®¡è½¯ä»¶çš„æ—¶å€™å¹¿æ³›çš„é‡‡ç”¨ã€‚å…¶å®ä½ æƒ³ä¸€ä¸‹ï¼Œç°åœ¨è¿™ä¹ˆæµè¡Œçš„å¾®æœåŠ¡æ€æƒ³ï¼Œå…¶å®å°±æ˜¯ä¾èµ–å€’ç½®åŸåˆ™çš„å®è·µã€‚åªæ˜¯åœ¨å¾®æœåŠ¡ä¸­ï¼Œå®ƒæ›´æç«¯åœ°æŠŠè°ƒç”¨æ–¹å’Œå®ç°åˆ†ç¦»æˆäº†ä¸åŒçš„è½¯ä»¶é¡¹ç›®ï¼Œå®ç°äº†å®Œå…¨çš„è§£è€¦ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©çš„è¯¾åä½œä¸šï¼Œè¿˜æ˜¯éœ€è¦åŠ¨æ‰‹æ¥å†™ä»£ç ã€‚ç†Ÿæ‚‰Javaè¯­è¨€çš„åŒå­¦ï¼Œè¯·ä½ æ‰©å±•ä¸€ä¸‹æˆ‘ä»¬ç°åœ¨è¿™ä¸ªRPCæ¡†æ¶å®¢æˆ·ç«¯ï¼Œè§£é™¤â€œæœåŠ¡æ¥å£åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•åªèƒ½æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹éƒ½æ˜¯Stringç±»å‹â€è¿™ä¸ªé™åˆ¶ï¼Œè®©æˆ‘ä»¬çš„è¿™ä¸ªRPCæ¡†æ¶çœŸæ­£èƒ½æ”¯æŒä»»æ„æ¥å£ã€‚</p><p>ä¸ç†Ÿæ‚‰Javaè¯­è¨€çš„åŒå­¦ï¼Œä½ å¯ä»¥ç”¨ä½ æ“…é•¿çš„è¯­è¨€ï¼ŒæŠŠæˆ‘ä»¬è¿™èŠ‚è¯¾è®²è§£çš„RPCå®¢æˆ·ç«¯å®ç°å‡ºæ¥ï¼Œè¦æ±‚é‡‡ç”¨å’Œæˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸€æ ·çš„åºåˆ—åŒ–æ–¹å¼ï¼Œè¿™æ ·ï¼Œä½ å®ç°çš„å®¢æˆ·ç«¯æ˜¯å¯ä»¥å’Œæˆ‘ä»¬ä¾‹å­ä¸­çš„æœåŠ¡ç«¯æ­£å¸¸è¿›è¡Œé€šä¿¡ï¼Œå®ç°è·¨è¯­è¨€è°ƒç”¨çš„ã€‚æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œåˆ†äº«ä½ çš„ä»£ç ã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ä¸€äº›å¯å‘ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":144274,"user_name":"Gred","can_delete":false,"product_type":"c1","uid":1442929,"ip_address":"","ucode":"F68068880E348B","user_header":"https://static001.geekbang.org/account/avatar/00/16/04/71/853b2292.jpg","comment_is_top":false,"comment_ctime":1571885755,"is_pvip":false,"replies":[{"id":55711,"content":"æˆ‘æ˜¯ç¬¬ä¸€ä¸ªStarè¿™ä¸ªé¡¹ç›®çš„äººå“¦ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1571970702,"ip_address":"","comment_id":144274,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"1.æ”¹ç”¨CGLibåŠ¨æ€ä»£ç†ï¼Œå¢åŠ å¤šæ¥å£å¤šæ–¹æ³•æ”¯æŒã€‚\n2.å¢åŠ Objectåºåˆ—åŒ–ç±»ä»¥åŠé»˜è®¤åºåˆ—åŒ–ç±»ï¼Œå¢åŠ å¯¹å¤šå…¥å‚çš„åºåˆ—åŒ–æ”¯æŒã€‚\nå€ŸèŠ±çŒ®ä½›äº†ï¼Œéº»çƒ¦è€å¸ˆæŒ‡å¯¼ä¸‹\nhttps:&#47;&#47;github.com&#47;Gred01&#47;simple-rpc-framework","like_count":30},{"had_liked":false,"id":146933,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1049360,"ip_address":"","ucode":"D8A7F7F6A0BEA9","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","comment_is_top":false,"comment_ctime":1572707342,"is_pvip":false,"replies":[{"id":56816,"content":"å¤§è‡´æµè§ˆä¸€ä¸‹ä»£ç ï¼Œæ€è·¯æ˜¯æ²¡é—®é¢˜çš„ï¼Œéå¸¸æ£’ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1572830257,"ip_address":"","comment_id":146933,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"åŸºæœ¬ç±»å‹æš‚æœªå®ç°ï¼Œ\nhttps:&#47;&#47;github.com&#47;Switch-vov&#47;simple-rpc-framework&#47;tree&#47;feature-stub","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471871,"discussion_content":"æˆ‘æ˜¯ç¬¬ä¸€ä¸ªStarè¿™ä¸ªé¡¹ç›®çš„äººå“¦ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571970702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1442929,"avatar":"https://static001.geekbang.org/account/avatar/00/16/04/71/853b2292.jpg","nickname":"Gred","note":"","ucode":"F68068880E348B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39638,"discussion_content":"ğŸ˜‚æ„Ÿè°¢è€å¸ˆï¼Œæˆ‘è¿˜æ‰“ç®—ç”¨protostuffæ¥æ”¹å–„åºåˆ—åŒ–ï¼Œæ˜¨å¤©è°ƒç ”äº†ä¸‹ï¼Œè¿™ä¸ªåŸºäºprotobufçš„ç»„ä»¶æ€§èƒ½å’Œå‹ç¼©ç‡è¿˜ä¸é”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571971426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1434022,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e1/a6/311b8639.jpg","nickname":"æ˜Ÿæ„¿","note":"","ucode":"ADEF252DEEA84E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1442929,"avatar":"https://static001.geekbang.org/account/avatar/00/16/04/71/853b2292.jpg","nickname":"Gred","note":"","ucode":"F68068880E348B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":97226,"discussion_content":"å…„å¼Ÿï¼Œé¡¹ç›®åœ°å€å‘å‡ºæ¥å‘—ï¼Œç”¨protostuffåºåˆ—åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577108907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":39638,"ip_address":"","group_id":0},"score":97226,"extra":""},{"author":{"id":1211936,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/20/d9ae2a0b.jpg","nickname":"Cherish","note":"","ucode":"C1B5E1B44703BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1442929,"avatar":"https://static001.geekbang.org/account/avatar/00/16/04/71/853b2292.jpg","nickname":"Gred","note":"","ucode":"F68068880E348B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384802,"discussion_content":"å“ˆå“ˆæˆ‘ä¹Ÿæƒ³å‚è€ƒå‚è€ƒğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626759852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":39638,"ip_address":"","group_id":0},"score":384802,"extra":""}]}]},{"had_liked":false,"id":139502,"user_name":"wzzJike","can_delete":false,"product_type":"c1","uid":1113760,"ip_address":"","ucode":"4753DE6543D25B","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/a0/46d1ebcb.jpg","comment_is_top":false,"comment_ctime":1570669677,"is_pvip":false,"replies":[{"id":53844,"content":"æ˜¯è¿™æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570690276,"ip_address":"","comment_id":139502,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"javaçš„å¾ˆå¤šæ¡†æ¶ä½¿ç”¨çš„éƒ½æ˜¯jdkçš„åŠ¨æ€ä»£ç†å§ï¼Œèƒ½è·å–åˆ°ä»£ç†ç±»ï¼Œè°ƒç”¨æ–¹æ³•ï¼Œå‚æ•°ä¿¡æ¯","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473062,"discussion_content":"å¤§è‡´æµè§ˆä¸€ä¸‹ä»£ç ï¼Œæ€è·¯æ˜¯æ²¡é—®é¢˜çš„ï¼Œéå¸¸æ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572830257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167380,"user_name":"Khirye","can_delete":false,"product_type":"c1","uid":1080985,"ip_address":"","ucode":"6C54C126FA54B8","user_header":"https://static001.geekbang.org/account/avatar/00/10/7e/99/c4302030.jpg","comment_is_top":false,"comment_ctime":1577781065,"is_pvip":false,"replies":[{"id":65562,"content":"SPIæœ¬è´¨ä¸Šæ˜¯åŠ¨æ€åˆ›å»ºä¾èµ–æ¥å£çš„å®ç°ç±»ï¼Œè§£å†³é—®é¢˜çš„å°±æ˜¯â€œè§£è€¦â€æ¥å£çš„è°ƒç”¨æ–¹å¯¹æ¥å£å®ç°ç±»çš„ä¾èµ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1578274311,"ip_address":"","comment_id":167380,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ã€‚æ‚¨çš„æ–‡ç« ä¸­å†™é“ï¼šâ€œé‚£èƒ½ä¸èƒ½ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¥åˆ›å»ºè¿™ä¸ªå®ç°ç±»å‘¢ï¼Ÿä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œå³ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»æ¥åˆ›å»ºå®ç°ï¼Œé‚£ä¾èµ–å…³ç³»å°±å˜æˆäº†ï¼šè°ƒç”¨æ–¹ä¾èµ–ç¬¬ä¸‰æ–¹ç±»ï¼Œç¬¬ä¸‰æ–¹ç±»ä¾èµ–å®ç°ç±»ï¼Œè°ƒç”¨æ–¹è¿˜æ˜¯é—´æ¥ä¾èµ–å®ç°ç±»ï¼Œè¿˜æ˜¯æ²¡æœ‰è§£è€¦â€ï¼Œé‚£ä¹ˆè¯·é—®SPIè·Ÿâ€œä¸€ä¸ªç¬¬ä¸‰æ–¹æ¥åˆ›å»ºå®ç°ç±»â€è¿™ä¸ªè¡Œä¸ºæœ¬è´¨ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ã€‚æˆ‘çš„ç†è§£æ˜¯SPIæœ¬è´¨ä¸Šä¹Ÿæ˜¯â€œåˆ›å»ºâ€äº†ä¸€ä¸ªç±»ã€‚è¿˜æœ›è€å¸ˆè§£æƒ‘ğŸ™\n\n","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469969,"discussion_content":"æ˜¯è¿™æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570690276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139661,"user_name":"A9","can_delete":false,"product_type":"c1","uid":1053211,"ip_address":"","ucode":"76D07F8EBE8DD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/1b/f62722ca.jpg","comment_is_top":false,"comment_ctime":1570700160,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è§£é™¤å‚æ•°å’Œè¿”å›å€¼çš„é™åˆ¶ï¼Œæ„å‘³ç€åºåˆ—åŒ–æ¨¡å—è¦æ”¯æŒä»»æ„ç±»ï¼Œè¿™å°±éœ€è¦å®ç°ä¸€å¥—é€šç”¨çš„åºåˆ—åŒ–åè®®æˆ–åœ¨serializeæ¨¡å—ä¸­å®ç°ç”¨åˆ°çš„æ‰€æœ‰ç±»å‹ã€‚å‡è®¾ä¾æ—§ä½¿ç”¨è‡ªå®šä¹‰åè®®ï¼Œå¹¶ä¸”ç”¨åˆ°çš„æ‰€æœ‰ç±»å‹å‡å®ç°äº†åºåˆ—åŒ–æ¥å£ã€‚éœ€è¦è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š\n  1.DynamicStubFactory#createStubçš„Methodå¤„ç†ï¼Œä½¿ç”¨getMethodsè·å–methodæ•°ç»„ï¼Œforå¾ªç¯å¤„ç†methodè€Œä¸æ˜¯ç›´æ¥å»æ•°ç»„ä¸‹æ ‡0\n  2.æŠŠDynamicStubFactoryçš„ç±»ä»£ç æ¨¡æ¿è¿›è¡Œæ‹†åˆ†ï¼Œåˆ†ä¸ºç±»æ¨¡æ¿å’Œæ–¹æ³•æ¨¡æ¿ï¼Œå…ˆç”Ÿæˆæ‰€æœ‰methodçš„ä»£ç ï¼Œå†ä»¥æ­¤ç”Ÿæˆæ•´ä¸ªç±»çš„ä»£ç \n  3.å®šä¹‰ä¸€ä¸ªæ–°çš„åè®®ç»“æ„ç”¨æ¥å­˜æ”¾å‡½æ•°çš„å‚æ•°ï¼Œç”¨æ­¤ç±»å‹ä»£æ›¿RpcRequestçš„serializedArgumentså˜é‡ï¼Œå¹¶ä¿®æ”¹RpcRequestçš„åºåˆ—åŒ–ç›¸å…³å‡½æ•°\n  4.ä¿®æ”¹RpcRequestHandler#handle:52è¡Œå†…æ ¹æ®rpcRequestå»å–å¾—å®é™…methodçš„å‡½æ•°ï¼Œè·å–ä»»æ„å‚æ•°ä¸ªæ•°å’Œç±»å‹çš„å¯¹åº”å‡½æ•°\n","like_count":5},{"had_liked":false,"id":140001,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1570782988,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æ˜ç¡®çš„çŸ¥é“è‡ªå·±çš„é—®é¢˜åå†è¡¥å¼€å‘è¯­è¨€é‚£å—çš„æ¼ã€ã€ã€è¯¾ç¨‹æ‹‰äº†3èŠ‚ï¼šçœ‹æ¥ä¸€ä¸ªäººçš„ç²¾åŠ›è¿˜æ˜¯æœ‰é™ï¼Œå®Œå…¨ä¸æ‹‰çš„è·Ÿäº†30èŠ‚åé¢è¿˜æ˜¯æ‹‰ä¸‹äº†è¯¾ç¨‹ï¼ŒåŠ¨æ‰‹è¿™å—åªèƒ½åˆ©ç”¨åŒä¼‘æ—¥å†äº‰å–è¡¥ä¸Šä¸€ç‚¹äº†ã€‚ã€‚ã€‚","like_count":2},{"had_liked":false,"id":247587,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1599748802,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æ¡ˆä¾‹ç¯‡å¤ªç²¾å½©äº†","like_count":1},{"had_liked":false,"id":148859,"user_name":"äºšæ´²èˆç‹.å°¼å¤æ‹‰æ–¯èµµå››","can_delete":false,"product_type":"c1","uid":1443078,"ip_address":"","ucode":"7159F5D7232696","user_header":"https://static001.geekbang.org/account/avatar/00/16/05/06/f5979d65.jpg","comment_is_top":false,"comment_ctime":1573095507,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"å˜»å˜»ï¼Œå¼€å¿ƒï¼ŒæˆåŠŸæ”¯æŒä»»æ„æ•°ç›®æ–¹æ³•ï¼Œä»»æ„è¿”å›å€¼ç±»å‹ï¼Œæ¥å£æˆåŠŸè°ƒç”¨å¹¶æ­£ç¡®å·¥ä½œï¼Œå…¶å®è¿™ä¸ªä½œä¸šå°±æ˜¯ä¸€ä¸ªå¾ªç¯éå†çš„è¿‡ç¨‹ï¼Œç„¶åå°†æ¯ä¸ªæ–¹æ³•çš„è¿”å›å€¼ï¼Œæ–¹æ³•åæ›¿æ¢çš„è¿‡ç¨‹","like_count":1},{"had_liked":false,"id":366121,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"æµ™æ±Ÿ","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1673413839,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":2,"product_id":100032301,"comment_content":"æ£’ğŸ‘ğŸ»","like_count":0},{"had_liked":false,"id":144274,"user_name":"Gred","can_delete":false,"product_type":"c1","uid":1442929,"ip_address":"","ucode":"F68068880E348B","user_header":"https://static001.geekbang.org/account/avatar/00/16/04/71/853b2292.jpg","comment_is_top":false,"comment_ctime":1571885755,"is_pvip":false,"replies":[{"id":55711,"content":"æˆ‘æ˜¯ç¬¬ä¸€ä¸ªStarè¿™ä¸ªé¡¹ç›®çš„äººå“¦ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1571970702,"ip_address":"","comment_id":144274,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"1.æ”¹ç”¨CGLibåŠ¨æ€ä»£ç†ï¼Œå¢åŠ å¤šæ¥å£å¤šæ–¹æ³•æ”¯æŒã€‚\n2.å¢åŠ Objectåºåˆ—åŒ–ç±»ä»¥åŠé»˜è®¤åºåˆ—åŒ–ç±»ï¼Œå¢åŠ å¯¹å¤šå…¥å‚çš„åºåˆ—åŒ–æ”¯æŒã€‚\nå€ŸèŠ±çŒ®ä½›äº†ï¼Œéº»çƒ¦è€å¸ˆæŒ‡å¯¼ä¸‹\nhttps:&#47;&#47;github.com&#47;Gred01&#47;simple-rpc-framework","like_count":30,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471871,"discussion_content":"æˆ‘æ˜¯ç¬¬ä¸€ä¸ªStarè¿™ä¸ªé¡¹ç›®çš„äººå“¦ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571970702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1442929,"avatar":"https://static001.geekbang.org/account/avatar/00/16/04/71/853b2292.jpg","nickname":"Gred","note":"","ucode":"F68068880E348B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39638,"discussion_content":"ğŸ˜‚æ„Ÿè°¢è€å¸ˆï¼Œæˆ‘è¿˜æ‰“ç®—ç”¨protostuffæ¥æ”¹å–„åºåˆ—åŒ–ï¼Œæ˜¨å¤©è°ƒç ”äº†ä¸‹ï¼Œè¿™ä¸ªåŸºäºprotobufçš„ç»„ä»¶æ€§èƒ½å’Œå‹ç¼©ç‡è¿˜ä¸é”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571971426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1434022,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e1/a6/311b8639.jpg","nickname":"æ˜Ÿæ„¿","note":"","ucode":"ADEF252DEEA84E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1442929,"avatar":"https://static001.geekbang.org/account/avatar/00/16/04/71/853b2292.jpg","nickname":"Gred","note":"","ucode":"F68068880E348B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":97226,"discussion_content":"å…„å¼Ÿï¼Œé¡¹ç›®åœ°å€å‘å‡ºæ¥å‘—ï¼Œç”¨protostuffåºåˆ—åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577108907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":39638,"ip_address":"","group_id":0},"score":97226,"extra":""},{"author":{"id":1211936,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/20/d9ae2a0b.jpg","nickname":"Cherish","note":"","ucode":"C1B5E1B44703BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1442929,"avatar":"https://static001.geekbang.org/account/avatar/00/16/04/71/853b2292.jpg","nickname":"Gred","note":"","ucode":"F68068880E348B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384802,"discussion_content":"å“ˆå“ˆæˆ‘ä¹Ÿæƒ³å‚è€ƒå‚è€ƒğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626759852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":39638,"ip_address":"","group_id":0},"score":384802,"extra":""}]}]},{"had_liked":false,"id":146933,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1049360,"ip_address":"","ucode":"D8A7F7F6A0BEA9","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","comment_is_top":false,"comment_ctime":1572707342,"is_pvip":false,"replies":[{"id":56816,"content":"å¤§è‡´æµè§ˆä¸€ä¸‹ä»£ç ï¼Œæ€è·¯æ˜¯æ²¡é—®é¢˜çš„ï¼Œéå¸¸æ£’ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1572830257,"ip_address":"","comment_id":146933,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"åŸºæœ¬ç±»å‹æš‚æœªå®ç°ï¼Œ\nhttps:&#47;&#47;github.com&#47;Switch-vov&#47;simple-rpc-framework&#47;tree&#47;feature-stub","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473062,"discussion_content":"å¤§è‡´æµè§ˆä¸€ä¸‹ä»£ç ï¼Œæ€è·¯æ˜¯æ²¡é—®é¢˜çš„ï¼Œéå¸¸æ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572830257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139502,"user_name":"wzzJike","can_delete":false,"product_type":"c1","uid":1113760,"ip_address":"","ucode":"4753DE6543D25B","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/a0/46d1ebcb.jpg","comment_is_top":false,"comment_ctime":1570669677,"is_pvip":false,"replies":[{"id":53844,"content":"æ˜¯è¿™æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570690276,"ip_address":"","comment_id":139502,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"javaçš„å¾ˆå¤šæ¡†æ¶ä½¿ç”¨çš„éƒ½æ˜¯jdkçš„åŠ¨æ€ä»£ç†å§ï¼Œèƒ½è·å–åˆ°ä»£ç†ç±»ï¼Œè°ƒç”¨æ–¹æ³•ï¼Œå‚æ•°ä¿¡æ¯","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469969,"discussion_content":"æ˜¯è¿™æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570690276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167380,"user_name":"Khirye","can_delete":false,"product_type":"c1","uid":1080985,"ip_address":"","ucode":"6C54C126FA54B8","user_header":"https://static001.geekbang.org/account/avatar/00/10/7e/99/c4302030.jpg","comment_is_top":false,"comment_ctime":1577781065,"is_pvip":false,"replies":[{"id":65562,"content":"SPIæœ¬è´¨ä¸Šæ˜¯åŠ¨æ€åˆ›å»ºä¾èµ–æ¥å£çš„å®ç°ç±»ï¼Œè§£å†³é—®é¢˜çš„å°±æ˜¯â€œè§£è€¦â€æ¥å£çš„è°ƒç”¨æ–¹å¯¹æ¥å£å®ç°ç±»çš„ä¾èµ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1578274311,"ip_address":"","comment_id":167380,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ã€‚æ‚¨çš„æ–‡ç« ä¸­å†™é“ï¼šâ€œé‚£èƒ½ä¸èƒ½ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¥åˆ›å»ºè¿™ä¸ªå®ç°ç±»å‘¢ï¼Ÿä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œå³ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»æ¥åˆ›å»ºå®ç°ï¼Œé‚£ä¾èµ–å…³ç³»å°±å˜æˆäº†ï¼šè°ƒç”¨æ–¹ä¾èµ–ç¬¬ä¸‰æ–¹ç±»ï¼Œç¬¬ä¸‰æ–¹ç±»ä¾èµ–å®ç°ç±»ï¼Œè°ƒç”¨æ–¹è¿˜æ˜¯é—´æ¥ä¾èµ–å®ç°ç±»ï¼Œè¿˜æ˜¯æ²¡æœ‰è§£è€¦â€ï¼Œé‚£ä¹ˆè¯·é—®SPIè·Ÿâ€œä¸€ä¸ªç¬¬ä¸‰æ–¹æ¥åˆ›å»ºå®ç°ç±»â€è¿™ä¸ªè¡Œä¸ºæœ¬è´¨ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ã€‚æˆ‘çš„ç†è§£æ˜¯SPIæœ¬è´¨ä¸Šä¹Ÿæ˜¯â€œåˆ›å»ºâ€äº†ä¸€ä¸ªç±»ã€‚è¿˜æœ›è€å¸ˆè§£æƒ‘ğŸ™\n\n","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479840,"discussion_content":"SPIæœ¬è´¨ä¸Šæ˜¯åŠ¨æ€åˆ›å»ºä¾èµ–æ¥å£çš„å®ç°ç±»ï¼Œè§£å†³é—®é¢˜çš„å°±æ˜¯â€œè§£è€¦â€æ¥å£çš„è°ƒç”¨æ–¹å¯¹æ¥å£å®ç°ç±»çš„ä¾èµ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578274311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1740409,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/8e/79/f9d5dd3a.jpg","nickname":"å•è¶…","note":"","ucode":"B36883984BE16B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379922,"discussion_content":"æˆ‘è¿˜æ˜¯ä¸å¤ªæ˜ç™½ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå›°æ‰°äº†æˆ‘å¾ˆä¹…ï¼Œä¾èµ–å…³ç³»æ”¾åœ¨é…ç½®æ–‡ä»¶é‡Œå°±æ˜¯è§£è€¦äº†ï¼Œæ”¾åœ¨ä»£ç é‡Œå°±æ˜¯è€¦åˆï¼Œè¿™é‡Œé…ç½®æ–‡ä»¶å’Œä»£ç æœ‰ä»€ä¹ˆå¤ªå¤§åŒºåˆ«å—ï¼Ÿ\nå¦å¤–ï¼Œè¢«è°ƒç”¨æ–¹æ¥å£ä¸ä¾èµ–è°ƒç”¨æ–¹ï¼Œè¿™æœ¬èº«å°±æ˜¯ä½“ç°ä¾èµ–å€’è½¬åŸåˆ™çš„ä¸€ç§è®¾è®¡ï¼Œä¸ç®¡è§£æ²¡è§£è€¦éƒ½åº”è¯¥æ˜¯ä¸ä¾èµ–çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624247143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1080985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7e/99/c4302030.jpg","nickname":"Khirye","note":"","ucode":"6C54C126FA54B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121755,"discussion_content":"OKï¼Œæˆ‘ç†è§£äº†ï¼Œæ‰€ä»¥è¯´æ‰€è°“â€œè§£è€¦â€ï¼Œè§£çš„æ˜¯è°ƒç”¨æ–¹å¯¹â€œè¢«è°ƒç”¨æ–¹æ¥å£æ˜¯å…·ä½“å®ç°â€çš„ä¾èµ–ï¼Œè€Œä¸æ˜¯è§£çš„â€œè¢«è°ƒç”¨æ–¹æ¥å£æœ¬èº«çš„ä¾èµ–â€ã€‚å¤šè°¢è€å¸ˆè§£æƒ‘ï¼ğŸ™ğŸ»","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578322702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139661,"user_name":"A9","can_delete":false,"product_type":"c1","uid":1053211,"ip_address":"","ucode":"76D07F8EBE8DD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/1b/f62722ca.jpg","comment_is_top":false,"comment_ctime":1570700160,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è§£é™¤å‚æ•°å’Œè¿”å›å€¼çš„é™åˆ¶ï¼Œæ„å‘³ç€åºåˆ—åŒ–æ¨¡å—è¦æ”¯æŒä»»æ„ç±»ï¼Œè¿™å°±éœ€è¦å®ç°ä¸€å¥—é€šç”¨çš„åºåˆ—åŒ–åè®®æˆ–åœ¨serializeæ¨¡å—ä¸­å®ç°ç”¨åˆ°çš„æ‰€æœ‰ç±»å‹ã€‚å‡è®¾ä¾æ—§ä½¿ç”¨è‡ªå®šä¹‰åè®®ï¼Œå¹¶ä¸”ç”¨åˆ°çš„æ‰€æœ‰ç±»å‹å‡å®ç°äº†åºåˆ—åŒ–æ¥å£ã€‚éœ€è¦è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š\n  1.DynamicStubFactory#createStubçš„Methodå¤„ç†ï¼Œä½¿ç”¨getMethodsè·å–methodæ•°ç»„ï¼Œforå¾ªç¯å¤„ç†methodè€Œä¸æ˜¯ç›´æ¥å»æ•°ç»„ä¸‹æ ‡0\n  2.æŠŠDynamicStubFactoryçš„ç±»ä»£ç æ¨¡æ¿è¿›è¡Œæ‹†åˆ†ï¼Œåˆ†ä¸ºç±»æ¨¡æ¿å’Œæ–¹æ³•æ¨¡æ¿ï¼Œå…ˆç”Ÿæˆæ‰€æœ‰methodçš„ä»£ç ï¼Œå†ä»¥æ­¤ç”Ÿæˆæ•´ä¸ªç±»çš„ä»£ç \n  3.å®šä¹‰ä¸€ä¸ªæ–°çš„åè®®ç»“æ„ç”¨æ¥å­˜æ”¾å‡½æ•°çš„å‚æ•°ï¼Œç”¨æ­¤ç±»å‹ä»£æ›¿RpcRequestçš„serializedArgumentså˜é‡ï¼Œå¹¶ä¿®æ”¹RpcRequestçš„åºåˆ—åŒ–ç›¸å…³å‡½æ•°\n  4.ä¿®æ”¹RpcRequestHandler#handle:52è¡Œå†…æ ¹æ®rpcRequestå»å–å¾—å®é™…methodçš„å‡½æ•°ï¼Œè·å–ä»»æ„å‚æ•°ä¸ªæ•°å’Œç±»å‹çš„å¯¹åº”å‡½æ•°\n","like_count":5},{"had_liked":false,"id":140001,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1570782988,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æ˜ç¡®çš„çŸ¥é“è‡ªå·±çš„é—®é¢˜åå†è¡¥å¼€å‘è¯­è¨€é‚£å—çš„æ¼ã€ã€ã€è¯¾ç¨‹æ‹‰äº†3èŠ‚ï¼šçœ‹æ¥ä¸€ä¸ªäººçš„ç²¾åŠ›è¿˜æ˜¯æœ‰é™ï¼Œå®Œå…¨ä¸æ‹‰çš„è·Ÿäº†30èŠ‚åé¢è¿˜æ˜¯æ‹‰ä¸‹äº†è¯¾ç¨‹ï¼ŒåŠ¨æ‰‹è¿™å—åªèƒ½åˆ©ç”¨åŒä¼‘æ—¥å†äº‰å–è¡¥ä¸Šä¸€ç‚¹äº†ã€‚ã€‚ã€‚","like_count":2},{"had_liked":false,"id":247587,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1599748802,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æ¡ˆä¾‹ç¯‡å¤ªç²¾å½©äº†","like_count":1},{"had_liked":false,"id":148859,"user_name":"äºšæ´²èˆç‹.å°¼å¤æ‹‰æ–¯èµµå››","can_delete":false,"product_type":"c1","uid":1443078,"ip_address":"","ucode":"7159F5D7232696","user_header":"https://static001.geekbang.org/account/avatar/00/16/05/06/f5979d65.jpg","comment_is_top":false,"comment_ctime":1573095507,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"å˜»å˜»ï¼Œå¼€å¿ƒï¼ŒæˆåŠŸæ”¯æŒä»»æ„æ•°ç›®æ–¹æ³•ï¼Œä»»æ„è¿”å›å€¼ç±»å‹ï¼Œæ¥å£æˆåŠŸè°ƒç”¨å¹¶æ­£ç¡®å·¥ä½œï¼Œå…¶å®è¿™ä¸ªä½œä¸šå°±æ˜¯ä¸€ä¸ªå¾ªç¯éå†çš„è¿‡ç¨‹ï¼Œç„¶åå°†æ¯ä¸ªæ–¹æ³•çš„è¿”å›å€¼ï¼Œæ–¹æ³•åæ›¿æ¢çš„è¿‡ç¨‹","like_count":1},{"had_liked":false,"id":366121,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"æµ™æ±Ÿ","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1673413839,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":2,"product_id":100032301,"comment_content":"æ£’ğŸ‘ğŸ»","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479840,"discussion_content":"SPIæœ¬è´¨ä¸Šæ˜¯åŠ¨æ€åˆ›å»ºä¾èµ–æ¥å£çš„å®ç°ç±»ï¼Œè§£å†³é—®é¢˜çš„å°±æ˜¯â€œè§£è€¦â€æ¥å£çš„è°ƒç”¨æ–¹å¯¹æ¥å£å®ç°ç±»çš„ä¾èµ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578274311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1740409,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/8e/79/f9d5dd3a.jpg","nickname":"å•è¶…","note":"","ucode":"B36883984BE16B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379922,"discussion_content":"æˆ‘è¿˜æ˜¯ä¸å¤ªæ˜ç™½ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå›°æ‰°äº†æˆ‘å¾ˆä¹…ï¼Œä¾èµ–å…³ç³»æ”¾åœ¨é…ç½®æ–‡ä»¶é‡Œå°±æ˜¯è§£è€¦äº†ï¼Œæ”¾åœ¨ä»£ç é‡Œå°±æ˜¯è€¦åˆï¼Œè¿™é‡Œé…ç½®æ–‡ä»¶å’Œä»£ç æœ‰ä»€ä¹ˆå¤ªå¤§åŒºåˆ«å—ï¼Ÿ\nå¦å¤–ï¼Œè¢«è°ƒç”¨æ–¹æ¥å£ä¸ä¾èµ–è°ƒç”¨æ–¹ï¼Œè¿™æœ¬èº«å°±æ˜¯ä½“ç°ä¾èµ–å€’è½¬åŸåˆ™çš„ä¸€ç§è®¾è®¡ï¼Œä¸ç®¡è§£æ²¡è§£è€¦éƒ½åº”è¯¥æ˜¯ä¸ä¾èµ–çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624247143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1080985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7e/99/c4302030.jpg","nickname":"Khirye","note":"","ucode":"6C54C126FA54B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121755,"discussion_content":"OKï¼Œæˆ‘ç†è§£äº†ï¼Œæ‰€ä»¥è¯´æ‰€è°“â€œè§£è€¦â€ï¼Œè§£çš„æ˜¯è°ƒç”¨æ–¹å¯¹â€œè¢«è°ƒç”¨æ–¹æ¥å£æ˜¯å…·ä½“å®ç°â€çš„ä¾èµ–ï¼Œè€Œä¸æ˜¯è§£çš„â€œè¢«è°ƒç”¨æ–¹æ¥å£æœ¬èº«çš„ä¾èµ–â€ã€‚å¤šè°¢è€å¸ˆè§£æƒ‘ï¼ğŸ™ğŸ»","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578322702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}