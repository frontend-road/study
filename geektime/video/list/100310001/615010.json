{"id":615010,"title":"60｜类的继承：如何解决代码重用的问题？","content":"<p><strong>课后习题</strong><br>\n请结合类的继承，为童谣定义类和方法：<br>\n小老鼠，上灯台，偷油吃，下不来，喵喵喵，猫来了，叽里咕噜滚下来。</p><p><strong>课程代码、课件及其他相关资料地址</strong><br>\n<a href=\"https://gitee.com/wilsonyin/zero-basics-python\">https://gitee.com/wilsonyin/zero-basics-python</a></p>","comments":[{"had_liked":false,"id":379673,"user_name":"Geek_219b52","can_delete":false,"product_type":"c3","uid":1524531,"ip_address":"浙江","ucode":"955D79DEFD2DF4","user_header":"https://static001.geekbang.org/account/avatar/00/17/43/33/b9127867.jpg","comment_is_top":false,"comment_ctime":1692264569,"is_pvip":false,"replies":[{"id":138342,"content":"我帮你补充一下super() 的定义，\nsuper() 是 Python 的一个内建函数，它用于调用父类（或多个祖先类）中的方法。这个函数在处理继承和多重继承时尤为有用。在 Python 3 中，super() 和 super(ClassName, self) 基本上是等价的，但 super() 更简洁。\n\nclass Parent:\n    def hello(self):\n        print(&quot;Calling parent method&quot;)\n\nclass Child(Parent):\n    def hello(self):\n        super().hello()\n        print(&quot;Calling child method&quot;)\n\nc = Child()\nc.hello()\n\n输出结果\nCalling parent method\nCalling child method\n\n在上面的例子中，Child 类覆盖了 Parent 类的 hello 方法。在 Child 类的 hello 方法中，我们使用 super().hello() 调用了 Parent 类的 hello 方法。","user_name":"作者回复","user_name_real":"编辑","uid":1056235,"ctime":1692534442,"ip_address":"甘肃","comment_id":379673,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"个人理解，不使用super()，就不会去找父类下面的run()方法，还是执行了自己（子类）的run()方法\n\nclass Father(object):\n    def run(self):\n        print(&quot;run is father&quot;)\n\nclass Son(Father):\n    def run(self):\n        # super().run()\n        print(&quot;run is son&quot;)     \n\ncz = Father()\ncz.run()        \n\ncxt = Son()\ncxt.run()","like_count":0,"discussions":[{"author":{"id":1056235,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1d/eb/b2123759.jpg","nickname":"尹会生","note":"","ucode":"D1093DBD093617","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":626097,"discussion_content":"我帮你补充一下super() 的定义，\nsuper() 是 Python 的一个内建函数，它用于调用父类（或多个祖先类）中的方法。这个函数在处理继承和多重继承时尤为有用。在 Python 3 中，super() 和 super(ClassName, self) 基本上是等价的，但 super() 更简洁。\n\nclass Parent:\n    def hello(self):\n        print(&#34;Calling parent method&#34;)\n\nclass Child(Parent):\n    def hello(self):\n        super().hello()\n        print(&#34;Calling child method&#34;)\n\nc = Child()\nc.hello()\n\n输出结果\nCalling parent method\nCalling child method\n\n在上面的例子中，Child 类覆盖了 Parent 类的 hello 方法。在 Child 类的 hello 方法中，我们使用 super().hello() 调用了 Parent 类的 hello 方法。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1692534442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"甘肃","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366247,"user_name":"繁星不灭","can_delete":false,"product_type":"c3","uid":3042945,"ip_address":"广东","ucode":"7610E71D8FF224","user_header":"https://static001.geekbang.org/account/avatar/00/2e/6e/81/a52fe3f6.jpg","comment_is_top":false,"comment_ctime":1673507123,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"1.习题练习\nclass Animal():\n    #定义动物类\n    def move(self,animal,location,destination,distance,direction):\n        #方法：动物能移动\n        print(f&quot;The {animal} moved {distance} meter {direction} from the {location} to the {destination}&quot;)\n\n    def bark(self,animal,sound):\n        #方法：动物能发出声音\n        print(f&quot;The {animal} make a {sound} sound&quot;)\n\n    def eat(self,animal,eat_thing):\n        #方法：动物能吃东西\n        print(f&quot;The {animal} eat {eat_thing}&quot;)\n\n#实例化一只老鼠\nmouse=Animal()\n#实例化一只猫\ncat=Animal()\n\n#老鼠上灯台\nmouse.move(&quot;mouse&quot;,&quot;ground&quot;,&quot;Menorah&quot;,0.5,&quot;upward&quot;)\n#老鼠偷油吃\nmouse.eat(&quot;mouse&quot;,&quot;oil&quot;)\n#老鼠下不来\nmouse.move(&quot;mouse&quot;,&quot;Menorah&quot;,&quot;Menorah&quot;,0,&quot;down&quot;)\n#猫喵喵喵\ncat.bark(&quot;cat&quot;,&quot;喵喵喵&quot;)\n#猫来了\ncat.move(&quot;cat&quot;,&quot;room&quot;,&quot;ground&quot;,5,&quot;left&quot;)\n#老鼠叽里咕噜滚下来\nmouse.bark(&quot;mouse&quot;,&quot;叽里咕噜&quot;)\nmouse.move(&quot;mouse&quot;,&quot;Menorah&quot;,&quot;ground&quot;,0.5,&quot;down&quot;)\n\n2.输出结果\nThe mouse moved 0.5 meter upward from the ground to the Menorah\nThe mouse eat oil\nThe mouse moved 0 meter down from the Menorah to the Menorah\nThe cat make a 喵喵喵 sound\nThe cat moved 5 meter left from the room to the ground\nThe mouse make a 叽里咕噜 sound\nThe mouse moved 0.5 meter down from the Menorah to the ground","like_count":12},{"had_liked":false,"id":368413,"user_name":"yanyu-xin","can_delete":false,"product_type":"c3","uid":1899757,"ip_address":"广东","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1676302181,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class Animal(object): \n    &#39;&#39;&#39;动物类&#39;&#39;&#39;\n    def __init__(self, name):\n        self.name = name\n    def action_roll(self):\n        self.act = &#39; roll &#39;\n    def action_walk(self):\n        self.act = &#39; walk&#39; \n    def action_crawl(self):\n        self.act = &#39; crawl&#39;\n    def direction_up(self):\n        self.act_direction = &#39; up&#39;\n    def direction_down(self):\n        self.act_direction = &#39; down&#39;\n    def direction_here(self):\n         self.act_direction = &#39; come here&#39;\n    def action_sound(self, sound):\n        self.act_sound = sound\n    def action_location(self, location):\n        self.act_location = location\n\nclass Cat(Animal) :\n    &#39;&#39;&#39; 猫&#39;&#39;&#39;\n    def __init__(self, name):\n        super().__init__(name)\n        self.name=name\n    def cry(self):\n        self.sound =&#39; mews [ miaows ]&#39;\n\nclass Mouse(Animal) :\n    &#39;&#39;&#39;老鼠 &#39;&#39;&#39;\n    def __init__(self, name):\n        super().__init__(name)\n        self.name = name\n    def cry(self):\n        self.sound =&#39; squeak goes the rat&#39;\n    def eat_oil(self):\n        self.act = &#39; steal oil to eat. &#39;\n    def refuse_down(self):\n        self.act = &#39; refuse to come down&#39;\n\nTom = Cat(&#39;Tom&#39;)\nJerry= Mouse(&#39;Jerry&#39;)\n# 小老鼠，上灯台\nJerry.action_crawl() \nJerry.direction_up()\nJerry.action_location(&#39; lampstand&#39;)\nstr1 = Jerry.name + Jerry.act + Jerry.act_direction + Jerry.act_location\n# 偷油吃\nJerry.eat_oil()\nstr2 = Jerry.name + Jerry.act \n# 吱吱叫，下不来\nJerry.cry()\nJerry.refuse_down()\nstr3 = Jerry.name + Jerry.act\nstr4 = Jerry.name + Jerry.sound\n# 喵喵喵\nTom.cry()\nstr5 = Tom.name + Tom.sound\n# 猫来了\nTom.action_walk()\nTom.direction_here()\nstr6 = Tom.name + Tom.act + Tom.act_direction\n# 叽里咕噜滚下来\nJerry.action_roll()\nJerry.direction_down()\nJerry.action_sound(&#39; rumble &#39;)\nJerry.action_location(&#39; floor &#39;)\nstr7 = Jerry.name + Jerry.act  + Jerry.act_direction + Jerry.act_location + Jerry.act_sound\nprint(f&#39;{str1},\\n{str2},\\n{str3},\\n{str4},\\n{str5},\\n{str6},\\n{str7}.&#39;)","like_count":3},{"had_liked":false,"id":384519,"user_name":"依托答辩","can_delete":false,"product_type":"c3","uid":2383299,"ip_address":"上海","ucode":"4BE79E8A030813","user_header":"https://static001.geekbang.org/account/avatar/00/24/5d/c3/b8bb888c.jpg","comment_is_top":false,"comment_ctime":1701079938,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"# 动物基类\nclass Animal:\n  def __init__(self, name, sound):\n    self.name = name\n    self.sound = sound\n  def walk(self):\n    print(&#39;能走路&#39;)\n  def run(self):\n    print(&#39;能跑&#39;)\n  def sound(self):\n    print(&#39;能叫&#39;)\n  \n  def show(self):\n    print(self.name, self.sound)\n\n# 混入\nclass UpMixin:\n  def up(self):\n    print(&#39;上灯台, 下不来&#39;)\n\nclass RollDownMixin:\n  def roll(self):\n    print(&#39;叽里咕噜滚下来&#39;)\n\n# 小老鼠\nclass Mouse(Animal, UpMixin, RollDownMixin):\n  def show(self):\n    super().show()\n    super().up()\n  def roll(self):\n    super().roll()\n# 猫\nclass Cat(Animal):\n  def show(self):\n    super().show()\n    print(&#39;猫来了&#39;)\n\nmouse = Mouse(&#39;小老鼠&#39;, &#39;吱吱吱&#39;)\nmouse.show()\ncat = Cat(&#39;猫&#39;, &#39;喵喵喵&#39;)\ncat.show()\nmouse.roll()","like_count":2},{"had_liked":false,"id":366888,"user_name":"Seven","can_delete":false,"product_type":"c3","uid":2403766,"ip_address":"四川","ucode":"37D99CF8535CDE","user_header":"https://static001.geekbang.org/account/avatar/00/24/ad/b6/a8caa2c7.jpg","comment_is_top":false,"comment_ctime":1674531642,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"不实用super()会报错, NameError: name &#39;run&#39; is not defined, 调用了一个未定义的方法","like_count":2},{"had_liked":false,"id":378705,"user_name":"Geek_Mike","can_delete":false,"product_type":"c3","uid":3196376,"ip_address":"云南","ucode":"CFA942192C3B74","user_header":"https://static001.geekbang.org/account/avatar/00/30/c5/d8/c5509b9c.jpg","comment_is_top":false,"comment_ctime":1690644931,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"# 请结合类的继承，为童谣定义类和方法：小老鼠，上灯台，偷油吃，下不来，喵喵喵，猫来了，叽里咕噜滚下来。\n\nclass Animal():\n    def __init__(self, name, sound):\n        self.name = name\n        self.sound = sound\n\n    def show_up(self):\n        print(f&#39;{self.sound}, {self.name}来了,&#39;)\n\n\nclass Mouse(Animal): \n    def show_up(self):\n        super().show_up()\n        print(&#39;上灯台，偷油吃，下不来&#39;)\n\n\nclass Cat(Animal):\n    def show_up(self):\n        super().show_up()\n        print(&#39;叽里咕噜滚下来&#39;)\n\n    \nlittle_mouse = Mouse(name=&#39;小老鼠&#39;,sound=&#39;吱吱吱&#39;)\nlittle_cat = Cat(name=&#39;小猫咪&#39;,sound=&#39;喵喵喵&#39;)\nlittle_mouse.show_up()\nlittle_cat.show_up()","like_count":1},{"had_liked":false,"id":366209,"user_name":"江江儿嘛哩哄","can_delete":false,"product_type":"c3","uid":1928117,"ip_address":"浙江","ucode":"E7D6E59551B7F1","user_header":"https://static001.geekbang.org/account/avatar/00/1d/6b/b5/14586a78.jpg","comment_is_top":false,"comment_ctime":1673486530,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class Animal(object):\n    def func(self):\n        print(&quot;It can run and bark&quot;)\n\nclass Mouse(Animal):\n    def func(self):\n        super().func()\n        print(&quot;It climb onto the candlestick &quot;)\n\nclass Cat(Animal):\n    def func(self):\n        super().func()\n        print(&quot;It can catch mouse&quot;)\n\nobj = Animal()\nobj.func()\n\nobj1 = Mouse()\nobj1.func()\n\nobj2 = Cat()\nobj2.func()","like_count":1},{"had_liked":false,"id":388897,"user_name":"Geek_c131f7","can_delete":false,"product_type":"c3","uid":3828103,"ip_address":"美国","ucode":"88BB639931161E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/icniaGmw8xiboyC25ic8l7Vf62AOJ9ysHeAZSxPYMAnL8TticuELVSpnZcexwicbyaeVSCdtnN0MNWawrdBcgeLwmhdg/132","comment_is_top":false,"comment_ctime":1711080309,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class animal:\n    size = 0\n    life = 1\n    def move(self):\n        print(&#39;medium&#39;)\n        pass\n    \nclass mouse(animal):\n    size = &#39;small&#39;\n    def move(self):\n        super().move()\n        print(&#39;上灯台&#39;)\n        print(&#39;偷油吃&#39;)\n\nclass cat(animal):\n    size = &#39;bigger&#39;\n    def move(self):\n        super().move()\n        print(&#39;喵&#39;)","like_count":0},{"had_liked":false,"id":384999,"user_name":"Geek_0c747b","can_delete":false,"product_type":"c3","uid":3790728,"ip_address":"广东","ucode":"7D7251D7B98B08","user_header":"","comment_is_top":false,"comment_ctime":1701919471,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"这是一个使用类和继承来描述这个童谣的 Python 代码示例：\n\n```python\nclass Animal:\n    def __init__(self, name):\n        self.name = name\n\n    def make_sound(self):\n        pass\n\nclass Mouse(Animal):\n    def __init__(self):\n        super().__init__(&quot;小老鼠&quot;)\n\n    def climb(self):\n        print(f&quot;{self.name}，上灯台&quot;)\n\n    def eat_oil(self):\n        print(f&quot;{self.name}，偷油吃&quot;)\n\n    def cannot_get_down(self):\n        print(f&quot;{self.name}，下不来&quot;)\n\nclass Cat(Animal):\n    def __init__(self):\n        super().__init__(&quot;猫&quot;)\n\n    def make_sound(self):\n        print(f&quot;喵喵喵，{self.name}来了&quot;)\n\nmouse = Mouse()\nmouse.climb()\nmouse.eat_oil()\nmouse.cannot_get_down()\n\ncat = Cat()\ncat.make_sound()\n\nprint(&quot;叽里咕噜滚下来&quot;)\n```\n\n在这个代码中，我们首先定义了一个基类 `Animal`，它有一个 `name` 属性和一个 `make_sound` 方法。然后我们定义了两个继承自 `Animal` 的子类：`Mouse` 和 `Cat`。`Mouse` 类有 `climb`、`eat_oil` 和 `cannot_get_down` 方法来描述小老鼠的行为。`Cat` 类重写了 `make_sound` 方法来描述猫的叫声。最后，我们创建了一个 `Mouse` 对象和一个 `Cat` 对象，并调用了它们的方法来讲述童谣的故事。                                                                                                   .","like_count":0},{"had_liked":false,"id":384666,"user_name":"Geek_377ac8","can_delete":false,"product_type":"c3","uid":3739732,"ip_address":"广东","ucode":"FAFF79EFED3AF4","user_header":"","comment_is_top":false,"comment_ctime":1701315074,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"class Father(object):\n    def run(self):\n        print(&quot;父类的run&quot;)\n\nclass Son(Father):\n    def run(self):\n        self.run()\n        print(&quot;子类的run&quot;)\n\nobj = Father()\n\nobj1 = Son()\n\nobj1.run()\n\n如果不用super()方法调用父类的方法，而直接用self调用父类方法，会报递归错误\n猜测原因可能是在子类中self.run()属于自己调用自己，没有办法退出，导致了死循环","like_count":0},{"had_liked":false,"id":369604,"user_name":"麥白","can_delete":false,"product_type":"c3","uid":1264163,"ip_address":"上海","ucode":"058A631CA1A56B","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/23/6800a1b6.jpg","comment_is_top":false,"comment_ctime":1677721352,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"class Animal:\n    pass\n\n\nclass EatableMixin:\n    @staticmethod\n    def eat(animal_name: str, food: str):\n        print(f&quot;{animal_name} eat {food}&quot;)\n\n\nclass Movable:\n    @staticmethod\n    def move(animal_name: str, place: str):\n        print(f&quot;{animal_name} move {place}&quot;)\n\n    @staticmethod\n    def not_move(animal_name: str, place: str):\n        print(f&quot;{animal_name} can not move {place}&quot;)\n\n\nclass Vocable:\n    @staticmethod\n    def yell(animal_name: str, sound: str):\n        print(f&quot;{animal_name} yell {sound}&quot;)\n\n\nclass Cat(Animal, Movable, Vocable):\n    pass\n\n\nclass Mouse(Animal, EatableMixin, Movable):\n    pass\n\n\ncat = Cat()\nmouse = Mouse()\n# 小老鼠，上灯台，偷油吃，下不来\nmouse.move(&quot;mouse&quot;, &quot;lamp stand&quot;)\nmouse.eat(&quot;mouse&quot;, &quot;oil&quot;)\nmouse.not_move(&quot;mouse&quot;, &quot;overground&quot;)\n\n# 喵喵喵，猫来了，叽里咕噜滚下来\ncat.yell(&quot;cat&quot;, &quot;miao miao~&quot;)\ncat.move(&quot;cat&quot;, &quot;lamp stand&quot;)\nmouse.move(&quot;mouse&quot;, &quot;overground&quot;)","like_count":0}]}