{"id":109750,"title":"02 | 该如何选择消息队列？","content":"<p>你好，我是李玥。这节课我们来聊一下几个比较常见的开源的消息队列中间件。如果你正在做消息队列技术选型，不知道该选择哪款消息队列，你一定要先听一下这节课的内容。</p><p>作为一个程序员，相信你一定听过“没有银弹”这个说法，这里面的银弹是指能轻松杀死狼人、用白银做的子弹，什么意思呢？我对这句话的理解是说，在软件工程中，不存在像“银弹”这样可以解决一切问题的设计、架构或软件，每一个软件系统，它都是独一无二的，你不可能用一套方法去解决所有的问题。</p><p>在消息队列的技术选型这个问题上，也是同样的道理。并不存在说，哪个消息队列就是“最好的”。常用的这几个消息队列，每一个产品都有自己的优势和劣势，你需要根据现有系统的情况，选择最适合你的那款产品。</p><h2>选择消息队列产品的基本标准</h2><p>虽然这些消息队列产品在功能和特性方面各有优劣，但我们在选择的时候要有一个最低标准，保证入选的产品至少是及格的。</p><p>接下来我们先说一下这及格的标准是什么样的。</p><p>首先，必须是开源的产品，这个非常重要。开源意味着，如果有一天你使用的消息队列遇到了一个影响你系统业务的Bug，你至少还有机会通过修改源代码来迅速修复或规避这个Bug，解决你的系统火烧眉毛的问题，而不是束手无策地等待开发者不一定什么时候发布的下一个版本来解决。</p><!-- [[[read_end]]] --><p>其次，这个产品必须是近年来比较流行并且有一定社区活跃度的产品。流行的好处是，只要你的使用场景不太冷门，你遇到Bug的概率会非常低，因为大部分你可能遇到的Bug，其他人早就遇到并且修复了。你在使用过程中遇到的一些问题，也比较容易在网上搜索到类似的问题，然后很快的找到解决方案。</p><p>还有一个优势就是，流行的产品与周边生态系统会有一个比较好的集成和兼容，比如，Kafka和Flink就有比较好的兼容性，Flink内置了Kafka的Data Source，使用Kafka就很容易作为Flink的数据源开发流计算应用，如果你用一个比较小众的消息队列产品，在进行流计算的时候，你就不得不自己开发一个Flink的Data Source。</p><p>最后，作为一款及格的消息队列产品，必须具备的几个特性包括：</p><ul>\n<li>消息的可靠传递：确保不丢消息；</li>\n<li>Cluster：支持集群，确保不会因为某个节点宕机导致服务不可用，当然也不能丢消息；</li>\n<li>性能：具备足够好的性能，能满足绝大多数场景的性能要求。</li>\n</ul><p>接下来我们一起看一下有哪些符合上面这些条件，可供选择的开源消息队列产品。</p><h2>可供选择的消息队列产品</h2><p><strong>1. RabbitMQ</strong></p><p>首先，我们说一下老牌儿消息队列RabbitMQ，俗称兔子MQ。RabbitMQ是使用一种比较小众的编程语言：Erlang语言编写的，它最早是为电信行业系统之间的可靠通信设计的，也是少数几个支持AMQP协议的消息队列之一。</p><p>RabbitMQ就像它的名字中的兔子一样：轻量级、迅捷，它的Slogan，也就是宣传口号，也很明确地表明了RabbitMQ的特点：Messaging that just works，“开箱即用的消息队列”。也就是说，RabbitMQ是一个相当轻量级的消息队列，非常容易部署和使用。</p><p>另外RabbitMQ还号称是世界上使用最广泛的开源消息队列，是不是真的使用率世界第一，我们没有办法统计，但至少是“最流行的消息中间之一”，这是没有问题的。</p><p>RabbitMQ一个比较有特色的功能是支持非常灵活的路由配置，和其他消息队列不同的是，它在生产者（Producer）和队列（Queue）之间增加了一个Exchange模块，你可以理解为交换机。</p><p>这个Exchange模块的作用和交换机也非常相似，根据配置的路由规则将生产者发出的消息分发到不同的队列中。路由的规则也非常灵活，甚至你可以自己来实现路由规则。基于这个Exchange，可以产生很多的玩儿法，如果你正好需要这个功能，RabbitMQ是个不错的选择。</p><p>RabbitMQ的客户端支持的编程语言大概是所有消息队列中最多的，如果你的系统是用某种冷门语言开发的，那你多半可以找到对应的RabbitMQ客户端。</p><p>接下来说下RabbitMQ的几个问题。</p><p>第一个问题是，RabbitMQ对消息堆积的支持并不好，在它的设计理念里面，消息队列是一个管道，大量的消息积压是一种不正常的情况，应当尽量去避免。当大量消息积压的时候，会导致RabbitMQ的性能急剧下降。</p><p>第二个问题是，RabbitMQ的性能是我们介绍的这几个消息队列中最差的，根据官方给出的测试数据综合我们日常使用的经验，依据硬件配置的不同，它大概每秒钟可以处理几万到十几万条消息。其实，这个性能也足够支撑绝大多数的应用场景了，不过，如果你的应用对消息队列的性能要求非常高，那不要选择RabbitMQ。</p><p>最后一个问题是RabbitMQ使用的编程语言Erlang，这个编程语言不仅是非常小众的语言，更麻烦的是，这个语言的学习曲线非常陡峭。大多数流行的编程语言，比如Java、C/C++、Python和JavaScript，虽然语法、特性有很多的不同，但它们基本的体系结构都是一样的，你只精通一种语言，也很容易学习其他的语言，短时间内即使做不到精通，但至少能达到“会用”的水平。</p><p>就像一个以英语为母语的人，学习法语、德语都很容易，但是你要是让他去学汉语，那基本上和学习其他这些语言不是一个难度级别的。很不幸的是，Erlang就是编程语言中的“汉语”。所以如果你想基于RabbitMQ做一些扩展和二次开发什么的，建议你慎重考虑一下可持续维护的问题。</p><p><strong>2. RocketMQ</strong></p><p>RocketMQ是阿里巴巴在2012年开源的消息队列产品，后来捐赠给 Apache 软件基金会，2017正式毕业，成为Apache的顶级项目。阿里内部也是使用RocketMQ作为支撑其业务的消息队列，经历过多次“双十一”考验，它的性能、稳定性和可靠性都是值得信赖的。作为优秀的国产消息队列，近年来越来越多的被国内众多大厂使用。</p><p>我在总结RocketMQ的特点时，发现很难找出RocketMQ有什么特别让我印象深刻的特点，也很难找到它有什么缺点。</p><p>RocketMQ就像一个品学兼优的好学生，有着不错的性能，稳定性和可靠性，具备一个现代的消息队列应该有的几乎全部功能和特性，并且它还在持续的成长中。</p><p>RocketMQ有非常活跃的中文社区，大多数问题你都可以找到中文的答案，也许会成为你选择它的一个原因。另外，RocketMQ使用Java语言开发，它的贡献者大多数都是中国人，源代码相对也比较容易读懂，你很容易对RocketMQ进行扩展或者二次开发。</p><p>RocketMQ对在线业务的响应时延做了很多的优化，大多数情况下可以做到毫秒级的响应，<strong>如果你的应用场景很在意响应时延，那应该选择使用RocketMQ。</strong></p><p>RocketMQ的性能比RabbitMQ要高一个数量级，每秒钟大概能处理几十万条消息。</p><p>RocketMQ的一个劣势是，作为国产的消息队列，相比国外的比较流行的同类产品，在国际上还没有那么流行，与周边生态系统的集成和兼容程度要略逊一筹。</p><p><strong>3. Kafka</strong></p><p>最后我们聊一聊Kafka。Kafka最早是由LinkedIn开发，目前也是Apache的顶级项目。Kafka最初的设计目的是用于处理海量的日志。</p><p>在早期的版本中，为了获得极致的性能，在设计方面做了很多的牺牲，比如不保证消息的可靠性，可能会丢失消息，也不支持集群，功能上也比较简陋，这些牺牲对于处理海量日志这个特定的场景都是可以接受的。这个时期的Kafka甚至不能称之为一个合格的消息队列。</p><p>但是，请注意，重点一般都在后面。随后的几年Kafka逐步补齐了这些短板，你在网上搜到的很多消息队列的对比文章还在说Kafka不可靠，其实这种说法早已经过时了。当下的Kafka已经发展为一个非常成熟的消息队列产品，无论在数据可靠性、稳定性和功能特性等方面都可以满足绝大多数场景的需求。</p><p><strong>Kafka与周边生态系统的兼容性是最好的没有之一，尤其在大数据和流计算领域，几乎所有的相关开源软件系统都会优先支持Kafka。</strong></p><p>Kafka使用Scala和Java语言开发，设计上大量使用了批量和异步的思想，这种设计使得Kafka能做到超高的性能。Kafka的性能，尤其是异步收发的性能，是三者中最好的，但与RocketMQ并没有量级上的差异，大约每秒钟可以处理几十万条消息。</p><p>我曾经使用配置比较好的服务器对Kafka进行过压测，在有足够的客户端并发进行异步批量发送，并且开启压缩的情况下，Kafka的极限处理能力可以超过每秒2000万条消息。</p><p>但是Kafka这种异步批量的设计带来的问题是，它的同步收发消息的响应时延比较高，因为当客户端发送一条消息的时候，Kafka并不会立即发送出去，而是要等一会儿攒一批再发送，在它的Broker中，很多地方都会使用这种“先攒一波再一起处理”的设计。当你的业务场景中，每秒钟消息数量没有那么多的时候，Kafka的时延反而会比较高。所以，<strong>Kafka不太适合在线业务场景。</strong></p><h2>第二梯队的消息队列</h2><p>除了上面给你介绍的三大消息队列之外，还有几个第二梯队的产品，我个人的观点是，这些产品之所以没那么流行，或多或少都有着比较明显的短板，不推荐使用。在这儿呢，我简单介绍一下，纯当丰富你的知识广度。</p><p>先说ActiveMQ，ActiveMQ是最老牌的开源消息队列，是十年前唯一可供选择的开源消息队列，目前已进入老年期，社区不活跃。无论是功能还是性能方面，ActiveMQ都与现代的消息队列存在明显的差距，它存在的意义仅限于兼容那些还在用的爷爷辈儿的系统。</p><p>接下来说说ZeroMQ，严格来说ZeroMQ并不能称之为一个消息队列，而是一个基于消息队列的多线程网络库，如果你的需求是将消息队列的功能集成到你的系统进程中，可以考虑使用ZeroMQ。</p><p>最后说一下Pulsar，很多人可能都没听说过这个产品，Pulsar是一个新兴的开源消息队列产品，最早是由Yahoo开发，目前处于成长期，流行度和成熟度相对没有那么高。与其他消息队列最大的不同是，Pulsar采用存储和计算分离的设计，我个人非常喜欢这种设计，它有可能会引领未来消息队列的一个发展方向，建议你持续关注这个项目。</p><h2>总结</h2><p>在了解了上面这些开源消息队列各自的特点和优劣势后，我相信你对于消息队列的选择已经可以做到心中有数了。我也总结了几条选择的建议供你参考。</p><p>如果说，消息队列并不是你将要构建系统的主角之一，你对消息队列功能和性能都没有很高的要求，只需要一个开箱即用易于维护的产品，我建议你使用RabbitMQ。</p><p>如果你的系统使用消息队列主要场景是处理在线业务，比如在交易系统中用消息队列传递订单，那RocketMQ的低延迟和金融级的稳定性是你需要的。</p><p>如果你需要处理海量的消息，像收集日志、监控信息或是前端的埋点这类数据，或是你的应用场景大量使用了大数据、流计算相关的开源产品，那Kafka是最适合你的消息队列。</p><p>如果我说的这些场景和你的场景都不符合，你看了我之前介绍的这些消息队列的特点后，还是不知道如何选择，那就选你最熟悉的吧，毕竟这些产品都能满足大多数应用场景，使用熟悉的产品还可以快速上手不是？</p><h2>思考题</h2><p>本节课的思考题也是围绕着消息队列的技术选型来设置的。你开发过的或是正在开发的系统，对消息队列的需求是什么样的？现在选择的消息队列是哪款产品？在学完了本节课后，你觉得当前选择的消息队列是否是最佳的选择？理由是什么？欢迎在留言区与我分享讨论。</p><p>感谢阅读，如果你觉得这篇文章对你有一些启发，也欢迎把它分享给你的朋友。</p><p></p>","neighbors":{"left":{"article_title":"01 | 为什么需要消息队列？","id":109572},"right":{"article_title":"03 | 消息模型：主题和队列有什么区别？","id":110459}},"comments":[{"had_liked":false,"id":117465,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1564053916,"is_pvip":false,"replies":[{"id":43091,"content":"主要是设计上的选择问题，Kafka中到处都是“批量和异步”设计，它更关注的是整体的吞吐量，而RocketMQ的设计选择更多的是尽量及时处理请求。\n\n比如发消息，同样是用户调用了send()方法，RockMQ它会直接把这个消息发出去，而Kafka会把这个消息放到本地缓存里面，然后择机异步批量发送。\n\n所以，RocketMQ它的时延更小一些，而Kafka的吞吐量更高。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564106754,"ip_address":"","comment_id":117465,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"请问一下老师rocketMQ是怎么做到低延时的？","like_count":113},{"had_liked":false,"id":117205,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1563996009,"is_pvip":false,"replies":[{"id":42944,"content":"当然可以，架构无所谓好坏，关键是适合。用多套MQ好处是发挥各自的长处，代价是维护成本比较高。具体是不是适合，还是要架构师根据各种实际情况来权衡。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019300,"ip_address":"","comment_id":117205,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"     一套架构中是否可能存在多套中间件？在线的生产业务使用rockmq，运维&#47;监控方面使用kafka。","like_count":43,"discussions":[{"author":{"id":1635388,"avatar":"https://static001.geekbang.org/account/avatar/00/18/f4/3c/60bf7a17.jpg","nickname":"快乐的平头哥","note":"","ucode":"D7D2FA5DA6D8BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39337,"discussion_content":"老师 你这个说的不全 其实kafka 可以立即发送的 设置lingms=0就可以了..","likes_number":21,"is_delete":false,"is_hidden":false,"ctime":1571914134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459984,"discussion_content":"主要是设计上的选择问题，Kafka中到处都是“批量和异步”设计，它更关注的是整体的吞吐量，而RocketMQ的设计选择更多的是尽量及时处理请求。\n\n比如发消息，同样是用户调用了send()方法，RockMQ它会直接把这个消息发出去，而Kafka会把这个消息放到本地缓存里面，然后择机异步批量发送。\n\n所以，RocketMQ它的时延更小一些，而Kafka的吞吐量更高。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1564106754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545411,"discussion_content":"那再来一个，消费端消费消息的时候kafka是client 采取轮训的拉的方式，rocketmq的是消费端与broker之间的配合实现推拉结合的方式","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1641952914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1802337,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/61/ae3bb67c.jpg","nickname":"毛毛虫大帝","note":"","ucode":"1EBB026121C060","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":155320,"discussion_content":"batch.size和linger.ms都是可以通过调节来平衡吞吐量和延时的","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1580224771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1305499,"avatar":"https://static001.geekbang.org/account/avatar/00/13/eb/9b/2a2ba2a5.jpg","nickname":"newrain","note":"","ucode":"74DB65E903145C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1802337,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/61/ae3bb67c.jpg","nickname":"毛毛虫大帝","note":"","ucode":"1EBB026121C060","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277861,"discussion_content":" 在相处r","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591110825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":155320,"ip_address":"","group_id":0},"score":277861,"extra":""}]},{"author":{"id":1364034,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","nickname":"我已经设置了昵称","note":"","ucode":"ED672C5EBDBDC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3110,"discussion_content":"那要是我本地测试发送，岂不是有可能发送不出去？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564196558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"凯文小猪","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1364034,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","nickname":"我已经设置了昵称","note":"","ucode":"ED672C5EBDBDC4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399471,"discussion_content":"不会 取决于linger.ms","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632972293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3110,"ip_address":"","group_id":0},"score":399471,"extra":""}]}]},{"had_liked":false,"id":118969,"user_name":"Goal","can_delete":false,"product_type":"c1","uid":1307012,"ip_address":"","ucode":"C337CD4C7E07B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/84/7d21bd9e.jpg","comment_is_top":false,"comment_ctime":1564476053,"is_pvip":false,"replies":[{"id":43694,"content":"你咋知道我是詹密呢？","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564536150,"ip_address":"","comment_id":118969,"utype":1}],"discussion_count":9,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"听得我激动的喊了一句：“湖人总冠军”","like_count":31,"discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545412,"discussion_content":"非常正常。。涉及到大数据之间计算的kafka，业务rocketmq，数据之间可以通过brdige flow即可","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1641952953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459860,"discussion_content":"当然可以，架构无所谓好坏，关键是适合。用多套MQ好处是发挥各自的长处，代价是维护成本比较高。具体是不是适合，还是要架构师根据各种实际情况来权衡。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564019300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514399,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/9f/4f959cf1.jpg","nickname":"石锋","note":"","ucode":"F2DE76366BBE57","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3499,"discussion_content":"某母婴产品的一个同事跟我说，他们公司就是这样处理的，用Rocket处理订单，用kafka处理埋点和日志，看来还是对kafka的稳定性不是那么的肯定","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564539728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2405308,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b3/bc/4d00adce.jpg","nickname":"知行","note":"","ucode":"A514020B2ED437","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1514399,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/9f/4f959cf1.jpg","nickname":"石锋","note":"","ucode":"F2DE76366BBE57","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555112,"discussion_content":"个人猜测，不一定是稳定性的原因。 可能是需要用到rocketmq的其他特性，例如事务消息， 延迟消息等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646750271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3499,"ip_address":"","group_id":0},"score":555112,"extra":""}]},{"author":{"id":1074310,"avatar":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","nickname":"yang","note":"","ucode":"1AA1497C5A293C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3283,"discussion_content":"这是一个大胆的想法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564375316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2882,"discussion_content":"个人认为可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117494,"user_name":"猿人谷","can_delete":false,"product_type":"c1","uid":1100149,"ip_address":"","ucode":"85106C7FB14C43","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/75/62ce2d69.jpg","comment_is_top":false,"comment_ctime":1564059643,"is_pvip":false,"replies":[{"id":43095,"content":"正确的使用RabbitMQ是可以保证严格有序的，你在学习完“03 消息模型：主题和队列有什么区别？”之后，再看一下RabbitMQ的配置应该就会知道该如何解决你的问题了。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564107397,"ip_address":"","comment_id":117494,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"我所在公司用rabbitmq也遇到消息的有序性无法保证的问题，通过在业务层面去弥补，终究不是种好方案。\n请问老师在保证有序性消费上有什么好的方案？\n","like_count":25,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460692,"discussion_content":"你咋知道我是詹密呢？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564536150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1801058,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7b/62/ec94cee4.jpg","nickname":"小彭","note":"","ucode":"8DCC27EC5AF263","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":548452,"discussion_content":"老师，14年詹密报道","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643201061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":460692,"ip_address":"","group_id":0},"score":548452,"extra":""}]},{"author":{"id":1734856,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/78/c8/b9ee0b77.jpg","nickname":"Colin","note":"","ucode":"9BECC5D6113590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274153,"discussion_content":"伊戈达拉球迷前来报道","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590546925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008100,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/e4/db3f783b.jpg","nickname":"Karson","note":"","ucode":"E0286BF6CA7281","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225985,"discussion_content":"科密来报道了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586412040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"拼yin世界","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375483,"discussion_content":"笑死我了，哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621680717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133702,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","nickname":"angel😇txy🤓","note":"","ucode":"C0AEE0D8BAF7ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5414,"discussion_content":"那科密可以学习这个课程不","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566250166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1612809,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/m7Ow3WiaSHeE4LBMqsRNVu6sP15UqIlYSx69bj1iaCYcbCQq3ic2zNGgWg2SAOBRCGIcENFIacEnntTcADl8xgNlQ/132","nickname":"孟子曰","note":"","ucode":"8E5898F8B87271","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1133702,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","nickname":"angel😇txy🤓","note":"","ucode":"C0AEE0D8BAF7ED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138449,"discussion_content":"都喊“湖人总冠军”呢，应该可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579244056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5414,"ip_address":"","group_id":0},"score":138449,"extra":""},{"author":{"id":1020492,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/4c/40783447.jpg","nickname":"何骧","note":"","ucode":"11DCC74CE2F300","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1133702,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","nickname":"angel😇txy🤓","note":"","ucode":"C0AEE0D8BAF7ED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296845,"discussion_content":"科密可以，詹黑不可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596684448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5414,"ip_address":"","group_id":0},"score":296845,"extra":""},{"author":{"id":1809686,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/16/a2fb8136.jpg","nickname":"季某人","note":"","ucode":"1EEF2A58C3BD79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020492,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/4c/40783447.jpg","nickname":"何骧","note":"","ucode":"11DCC74CE2F300","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635239,"discussion_content":"说实话也是黑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704622516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296845,"ip_address":"北京","group_id":0},"score":635239,"extra":""}]}]},{"had_liked":false,"id":118303,"user_name":"吴青","can_delete":false,"product_type":"c1","uid":1048965,"ip_address":"","ucode":"26DBF37AAF0000","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/85/a2279772.jpg","comment_is_top":false,"comment_ctime":1564317420,"is_pvip":false,"replies":[{"id":43400,"content":"exchange确实是AMQP协议中定义的，RabbitMQ是AMQP的一个实现。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564366130,"ip_address":"","comment_id":118303,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师 exchange是rabbitmq独有的么？exchange好像属于amqp协议，看了看amqp似乎说到了。","like_count":19,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459996,"discussion_content":"正确的使用RabbitMQ是可以保证严格有序的，你在学习完“03 消息模型：主题和队列有什么区别？”之后，再看一下RabbitMQ的配置应该就会知道该如何解决你的问题了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564107397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1100149,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c9/75/62ce2d69.jpg","nickname":"猿人谷","note":"","ucode":"85106C7FB14C43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3007,"discussion_content":"期待03篇，谢谢玥哥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564107543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117562,"user_name":"wmg","can_delete":false,"product_type":"c1","uid":1070036,"ip_address":"","ucode":"BA4CED171B59E9","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/d4/2ed767ea.jpg","comment_is_top":false,"comment_ctime":1564088762,"is_pvip":false,"replies":[{"id":43101,"content":"配置得当的情况下，可以做到2-3ms。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108829,"ip_address":"","comment_id":117562,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"“因为当客户端发送一条消息的时候，Kafka 并不会立即发送出去，而是要等一会儿攒一批再发送，在它的 Broker 中，很多地方都会使用这种“先攒一波再一起处理”的设计。当你的业务场景中，每秒钟消息数量没有那么多的时候，Kafka 的时延反而会比较高。所以，Kafka 不太适合在线业务场景。”，老师，批次的大小是可配置的，在我们的使用场景中，如果消息没有积压的情况下，延迟基本上小于10ms，我想问一下rocketmq的延迟一般是多少？","like_count":18,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460351,"discussion_content":"exchange确实是AMQP协议中定义的，RabbitMQ是AMQP的一个实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564366130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184966,"user_name":"Geek_d6623f","can_delete":false,"product_type":"c1","uid":1881571,"ip_address":"","ucode":"AE058A2A87193D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLepzwkdGg5Unwge4cC2Y0FVQrSyAJEoElzI0aA9wWcwO8icG67Qeg38lxuQLRfWgJnor1dK9ibEMWw/132","comment_is_top":false,"comment_ctime":1583459685,"is_pvip":false,"replies":[{"id":71650,"content":"2 这种情况你不用担心，无论从理论上，还是很多生产系统的实际验证，都不会丢消息的。\n\n1、3 二种情况是一样的，就是没发消息或者发失败了，这种情况其实和你把数据往数据库里写失败了是类似的，具体怎么处理还是得看业务。\n\n比如说，重要的业务可以用一主一备二个主题。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1583636458,"ip_address":"","comment_id":184966,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"想问下老师，关于MQ丢消息是怎么看的。我在用MQ的时候一直没有办法放心，如果在每个发MQ的场景都加一个补偿任务来保证最终一致性，又觉得MQ本身解耦的特性就浪费了。\n消息丢失主要有这么几个场景：\n1.客户端在发MQ消息的时候，网络抖动timeout导致没有发出去。\n2.客户端发MQ消息成功后，MQ本身有可能会丢消息。（虽然我看RocketMQ官方说不会丢，有持久化）\n3.业务处理完后，准备发MQ消息的时候，系统崩溃或者重启，导致消息没有发出去。","like_count":16,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486194,"discussion_content":"2 这种情况你不用担心，无论从理论上，还是很多生产系统的实际验证，都不会丢消息的。\n\n1、3 二种情况是一样的，就是没发消息或者发失败了，这种情况其实和你把数据往数据库里写失败了是类似的，具体怎么处理还是得看业务。\n\n比如说，重要的业务可以用一主一备二个主题。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583636458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136272,"user_name":"yan","can_delete":false,"product_type":"c1","uid":1020386,"ip_address":"","ucode":"8E7F8155D15646","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/e2/acf750ab.jpg","comment_is_top":false,"comment_ctime":1569401132,"is_pvip":false,"replies":[{"id":52311,"content":"建议看一下batch.size和linger.ms这两个参数的含义","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1569460637,"ip_address":"","comment_id":136272,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"kafka如果凑不够一批，那等什么时候发送？","like_count":13,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468534,"discussion_content":"建议看一下batch.size和linger.ms这两个参数的含义","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569460637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125732,"user_name":"angel😇txy🤓","can_delete":false,"product_type":"c1","uid":1133702,"ip_address":"","ucode":"C0AEE0D8BAF7ED","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","comment_is_top":false,"comment_ctime":1566250076,"is_pvip":false,"replies":[{"id":46922,"content":"金融级只是一种说法，并没有什么标准。但确实有很多涉及金融类的系统选择使用RocketMQ。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521736,"ip_address":"","comment_id":125732,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师好，rocket mq为何号称金融级的稳定性呢","like_count":13,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460025,"discussion_content":"配置得当的情况下，可以做到2-3ms。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564108829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1096652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bb/cc/fac12364.jpg","nickname":"xxx","note":"","ucode":"E79CEA70430449","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584526,"discussion_content":"嗯，看到这条感到很慌，看了下kafka配置，batch.size和linger.ms都是控制该行为的，默认是立即发送（linger.ms = 0）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660894537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124986,"user_name":"👻 小二","can_delete":false,"product_type":"c1","uid":1625463,"ip_address":"","ucode":"9EEA8553163270","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/77/b2ab5d44.jpg","comment_is_top":false,"comment_ctime":1566034368,"is_pvip":false,"replies":[{"id":45898,"content":"emq是专注于MQTT场景的一个消息队列，如果你的使用场景是连接海量的IoT设备，可以考虑。\n\nnsq使用Go语言开发，如果团队的技术栈是基于Go语言搭建的，nsq是一个很好的选择。\n\n这两个消息队列我都没有深入的使用和测试过，所以没办法跟你分享它们的优缺点和性能。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566121679,"ip_address":"","comment_id":124986,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师， 能稍微讲下emq跟nsq 的优缺点跟性能吗？","like_count":12,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486194,"discussion_content":"2 这种情况你不用担心，无论从理论上，还是很多生产系统的实际验证，都不会丢消息的。\n\n1、3 二种情况是一样的，就是没发消息或者发失败了，这种情况其实和你把数据往数据库里写失败了是类似的，具体怎么处理还是得看业务。\n\n比如说，重要的业务可以用一主一备二个主题。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583636458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117465,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1564053916,"is_pvip":false,"replies":[{"id":43091,"content":"主要是设计上的选择问题，Kafka中到处都是“批量和异步”设计，它更关注的是整体的吞吐量，而RocketMQ的设计选择更多的是尽量及时处理请求。\n\n比如发消息，同样是用户调用了send()方法，RockMQ它会直接把这个消息发出去，而Kafka会把这个消息放到本地缓存里面，然后择机异步批量发送。\n\n所以，RocketMQ它的时延更小一些，而Kafka的吞吐量更高。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564106754,"ip_address":"","comment_id":117465,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"请问一下老师rocketMQ是怎么做到低延时的？","like_count":113,"discussions":[{"author":{"id":1635388,"avatar":"https://static001.geekbang.org/account/avatar/00/18/f4/3c/60bf7a17.jpg","nickname":"快乐的平头哥","note":"","ucode":"D7D2FA5DA6D8BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39337,"discussion_content":"老师 你这个说的不全 其实kafka 可以立即发送的 设置lingms=0就可以了..","likes_number":21,"is_delete":false,"is_hidden":false,"ctime":1571914134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459984,"discussion_content":"主要是设计上的选择问题，Kafka中到处都是“批量和异步”设计，它更关注的是整体的吞吐量，而RocketMQ的设计选择更多的是尽量及时处理请求。\n\n比如发消息，同样是用户调用了send()方法，RockMQ它会直接把这个消息发出去，而Kafka会把这个消息放到本地缓存里面，然后择机异步批量发送。\n\n所以，RocketMQ它的时延更小一些，而Kafka的吞吐量更高。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1564106754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545411,"discussion_content":"那再来一个，消费端消费消息的时候kafka是client 采取轮训的拉的方式，rocketmq的是消费端与broker之间的配合实现推拉结合的方式","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1641952914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1802337,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/61/ae3bb67c.jpg","nickname":"毛毛虫大帝","note":"","ucode":"1EBB026121C060","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":155320,"discussion_content":"batch.size和linger.ms都是可以通过调节来平衡吞吐量和延时的","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1580224771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1305499,"avatar":"https://static001.geekbang.org/account/avatar/00/13/eb/9b/2a2ba2a5.jpg","nickname":"newrain","note":"","ucode":"74DB65E903145C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1802337,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/61/ae3bb67c.jpg","nickname":"毛毛虫大帝","note":"","ucode":"1EBB026121C060","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277861,"discussion_content":" 在相处r","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591110825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":155320,"ip_address":"","group_id":0},"score":277861,"extra":""}]},{"author":{"id":1364034,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","nickname":"我已经设置了昵称","note":"","ucode":"ED672C5EBDBDC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3110,"discussion_content":"那要是我本地测试发送，岂不是有可能发送不出去？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564196558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"凯文小猪","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1364034,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","nickname":"我已经设置了昵称","note":"","ucode":"ED672C5EBDBDC4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399471,"discussion_content":"不会 取决于linger.ms","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632972293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3110,"ip_address":"","group_id":0},"score":399471,"extra":""}]}]},{"had_liked":false,"id":117205,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1563996009,"is_pvip":false,"replies":[{"id":42944,"content":"当然可以，架构无所谓好坏，关键是适合。用多套MQ好处是发挥各自的长处，代价是维护成本比较高。具体是不是适合，还是要架构师根据各种实际情况来权衡。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019300,"ip_address":"","comment_id":117205,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"     一套架构中是否可能存在多套中间件？在线的生产业务使用rockmq，运维&#47;监控方面使用kafka。","like_count":43,"discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545412,"discussion_content":"非常正常。。涉及到大数据之间计算的kafka，业务rocketmq，数据之间可以通过brdige flow即可","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1641952953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459860,"discussion_content":"当然可以，架构无所谓好坏，关键是适合。用多套MQ好处是发挥各自的长处，代价是维护成本比较高。具体是不是适合，还是要架构师根据各种实际情况来权衡。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564019300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514399,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/9f/4f959cf1.jpg","nickname":"石锋","note":"","ucode":"F2DE76366BBE57","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3499,"discussion_content":"某母婴产品的一个同事跟我说，他们公司就是这样处理的，用Rocket处理订单，用kafka处理埋点和日志，看来还是对kafka的稳定性不是那么的肯定","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564539728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2405308,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b3/bc/4d00adce.jpg","nickname":"知行","note":"","ucode":"A514020B2ED437","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1514399,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/9f/4f959cf1.jpg","nickname":"石锋","note":"","ucode":"F2DE76366BBE57","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555112,"discussion_content":"个人猜测，不一定是稳定性的原因。 可能是需要用到rocketmq的其他特性，例如事务消息， 延迟消息等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646750271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3499,"ip_address":"","group_id":0},"score":555112,"extra":""}]},{"author":{"id":1074310,"avatar":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","nickname":"yang","note":"","ucode":"1AA1497C5A293C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3283,"discussion_content":"这是一个大胆的想法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564375316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2882,"discussion_content":"个人认为可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118969,"user_name":"Goal","can_delete":false,"product_type":"c1","uid":1307012,"ip_address":"","ucode":"C337CD4C7E07B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/84/7d21bd9e.jpg","comment_is_top":false,"comment_ctime":1564476053,"is_pvip":false,"replies":[{"id":43694,"content":"你咋知道我是詹密呢？","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564536150,"ip_address":"","comment_id":118969,"utype":1}],"discussion_count":9,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"听得我激动的喊了一句：“湖人总冠军”","like_count":31,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460692,"discussion_content":"你咋知道我是詹密呢？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564536150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1801058,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7b/62/ec94cee4.jpg","nickname":"小彭","note":"","ucode":"8DCC27EC5AF263","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":548452,"discussion_content":"老师，14年詹密报道","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643201061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":460692,"ip_address":"","group_id":0},"score":548452,"extra":""}]},{"author":{"id":1734856,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/78/c8/b9ee0b77.jpg","nickname":"Colin","note":"","ucode":"9BECC5D6113590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274153,"discussion_content":"伊戈达拉球迷前来报道","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590546925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008100,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/e4/db3f783b.jpg","nickname":"Karson","note":"","ucode":"E0286BF6CA7281","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225985,"discussion_content":"科密来报道了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586412040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"拼yin世界","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375483,"discussion_content":"笑死我了，哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621680717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133702,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","nickname":"angel😇txy🤓","note":"","ucode":"C0AEE0D8BAF7ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5414,"discussion_content":"那科密可以学习这个课程不","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566250166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1612809,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/m7Ow3WiaSHeE4LBMqsRNVu6sP15UqIlYSx69bj1iaCYcbCQq3ic2zNGgWg2SAOBRCGIcENFIacEnntTcADl8xgNlQ/132","nickname":"孟子曰","note":"","ucode":"8E5898F8B87271","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1133702,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","nickname":"angel😇txy🤓","note":"","ucode":"C0AEE0D8BAF7ED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138449,"discussion_content":"都喊“湖人总冠军”呢，应该可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579244056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5414,"ip_address":"","group_id":0},"score":138449,"extra":""},{"author":{"id":1020492,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/4c/40783447.jpg","nickname":"何骧","note":"","ucode":"11DCC74CE2F300","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1133702,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","nickname":"angel😇txy🤓","note":"","ucode":"C0AEE0D8BAF7ED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296845,"discussion_content":"科密可以，詹黑不可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596684448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5414,"ip_address":"","group_id":0},"score":296845,"extra":""},{"author":{"id":1809686,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/16/a2fb8136.jpg","nickname":"季某人","note":"","ucode":"1EEF2A58C3BD79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020492,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/4c/40783447.jpg","nickname":"何骧","note":"","ucode":"11DCC74CE2F300","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635239,"discussion_content":"说实话也是黑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704622516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296845,"ip_address":"北京","group_id":0},"score":635239,"extra":""}]}]},{"had_liked":false,"id":117494,"user_name":"猿人谷","can_delete":false,"product_type":"c1","uid":1100149,"ip_address":"","ucode":"85106C7FB14C43","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/75/62ce2d69.jpg","comment_is_top":false,"comment_ctime":1564059643,"is_pvip":false,"replies":[{"id":43095,"content":"正确的使用RabbitMQ是可以保证严格有序的，你在学习完“03 消息模型：主题和队列有什么区别？”之后，再看一下RabbitMQ的配置应该就会知道该如何解决你的问题了。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564107397,"ip_address":"","comment_id":117494,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"我所在公司用rabbitmq也遇到消息的有序性无法保证的问题，通过在业务层面去弥补，终究不是种好方案。\n请问老师在保证有序性消费上有什么好的方案？\n","like_count":25,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459996,"discussion_content":"正确的使用RabbitMQ是可以保证严格有序的，你在学习完“03 消息模型：主题和队列有什么区别？”之后，再看一下RabbitMQ的配置应该就会知道该如何解决你的问题了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564107397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1100149,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c9/75/62ce2d69.jpg","nickname":"猿人谷","note":"","ucode":"85106C7FB14C43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3007,"discussion_content":"期待03篇，谢谢玥哥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564107543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118303,"user_name":"吴青","can_delete":false,"product_type":"c1","uid":1048965,"ip_address":"","ucode":"26DBF37AAF0000","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/85/a2279772.jpg","comment_is_top":false,"comment_ctime":1564317420,"is_pvip":false,"replies":[{"id":43400,"content":"exchange确实是AMQP协议中定义的，RabbitMQ是AMQP的一个实现。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564366130,"ip_address":"","comment_id":118303,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师 exchange是rabbitmq独有的么？exchange好像属于amqp协议，看了看amqp似乎说到了。","like_count":19,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460351,"discussion_content":"exchange确实是AMQP协议中定义的，RabbitMQ是AMQP的一个实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564366130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117562,"user_name":"wmg","can_delete":false,"product_type":"c1","uid":1070036,"ip_address":"","ucode":"BA4CED171B59E9","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/d4/2ed767ea.jpg","comment_is_top":false,"comment_ctime":1564088762,"is_pvip":false,"replies":[{"id":43101,"content":"配置得当的情况下，可以做到2-3ms。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108829,"ip_address":"","comment_id":117562,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"“因为当客户端发送一条消息的时候，Kafka 并不会立即发送出去，而是要等一会儿攒一批再发送，在它的 Broker 中，很多地方都会使用这种“先攒一波再一起处理”的设计。当你的业务场景中，每秒钟消息数量没有那么多的时候，Kafka 的时延反而会比较高。所以，Kafka 不太适合在线业务场景。”，老师，批次的大小是可配置的，在我们的使用场景中，如果消息没有积压的情况下，延迟基本上小于10ms，我想问一下rocketmq的延迟一般是多少？","like_count":18,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460025,"discussion_content":"配置得当的情况下，可以做到2-3ms。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564108829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1096652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bb/cc/fac12364.jpg","nickname":"xxx","note":"","ucode":"E79CEA70430449","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584526,"discussion_content":"嗯，看到这条感到很慌，看了下kafka配置，batch.size和linger.ms都是控制该行为的，默认是立即发送（linger.ms = 0）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660894537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184966,"user_name":"Geek_d6623f","can_delete":false,"product_type":"c1","uid":1881571,"ip_address":"","ucode":"AE058A2A87193D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLepzwkdGg5Unwge4cC2Y0FVQrSyAJEoElzI0aA9wWcwO8icG67Qeg38lxuQLRfWgJnor1dK9ibEMWw/132","comment_is_top":false,"comment_ctime":1583459685,"is_pvip":false,"replies":[{"id":71650,"content":"2 这种情况你不用担心，无论从理论上，还是很多生产系统的实际验证，都不会丢消息的。\n\n1、3 二种情况是一样的，就是没发消息或者发失败了，这种情况其实和你把数据往数据库里写失败了是类似的，具体怎么处理还是得看业务。\n\n比如说，重要的业务可以用一主一备二个主题。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1583636458,"ip_address":"","comment_id":184966,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"想问下老师，关于MQ丢消息是怎么看的。我在用MQ的时候一直没有办法放心，如果在每个发MQ的场景都加一个补偿任务来保证最终一致性，又觉得MQ本身解耦的特性就浪费了。\n消息丢失主要有这么几个场景：\n1.客户端在发MQ消息的时候，网络抖动timeout导致没有发出去。\n2.客户端发MQ消息成功后，MQ本身有可能会丢消息。（虽然我看RocketMQ官方说不会丢，有持久化）\n3.业务处理完后，准备发MQ消息的时候，系统崩溃或者重启，导致消息没有发出去。","like_count":16,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463677,"discussion_content":"金融级只是一种说法，并没有什么标准。但确实有很多涉及金融类的系统选择使用RocketMQ。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566521736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136272,"user_name":"yan","can_delete":false,"product_type":"c1","uid":1020386,"ip_address":"","ucode":"8E7F8155D15646","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/e2/acf750ab.jpg","comment_is_top":false,"comment_ctime":1569401132,"is_pvip":false,"replies":[{"id":52311,"content":"建议看一下batch.size和linger.ms这两个参数的含义","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1569460637,"ip_address":"","comment_id":136272,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"kafka如果凑不够一批，那等什么时候发送？","like_count":13,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468534,"discussion_content":"建议看一下batch.size和linger.ms这两个参数的含义","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569460637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125732,"user_name":"angel😇txy🤓","can_delete":false,"product_type":"c1","uid":1133702,"ip_address":"","ucode":"C0AEE0D8BAF7ED","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","comment_is_top":false,"comment_ctime":1566250076,"is_pvip":false,"replies":[{"id":46922,"content":"金融级只是一种说法，并没有什么标准。但确实有很多涉及金融类的系统选择使用RocketMQ。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521736,"ip_address":"","comment_id":125732,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师好，rocket mq为何号称金融级的稳定性呢","like_count":13,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463677,"discussion_content":"金融级只是一种说法，并没有什么标准。但确实有很多涉及金融类的系统选择使用RocketMQ。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566521736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124986,"user_name":"👻 小二","can_delete":false,"product_type":"c1","uid":1625463,"ip_address":"","ucode":"9EEA8553163270","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/77/b2ab5d44.jpg","comment_is_top":false,"comment_ctime":1566034368,"is_pvip":false,"replies":[{"id":45898,"content":"emq是专注于MQTT场景的一个消息队列，如果你的使用场景是连接海量的IoT设备，可以考虑。\n\nnsq使用Go语言开发，如果团队的技术栈是基于Go语言搭建的，nsq是一个很好的选择。\n\n这两个消息队列我都没有深入的使用和测试过，所以没办法跟你分享它们的优缺点和性能。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566121679,"ip_address":"","comment_id":124986,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师， 能稍微讲下emq跟nsq 的优缺点跟性能吗？","like_count":12,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463392,"discussion_content":"emq是专注于MQTT场景的一个消息队列，如果你的使用场景是连接海量的IoT设备，可以考虑。\n\nnsq使用Go语言开发，如果团队的技术栈是基于Go语言搭建的，nsq是一个很好的选择。\n\n这两个消息队列我都没有深入的使用和测试过，所以没办法跟你分享它们的优缺点和性能。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566121679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548566,"discussion_content":"补充：\n先来看 MQTT，即消息队列遥测传输。这是一种基于发布 / 订阅的 ISO 标准消息传递协议，它在 TCP/IP 协议上工作。对于带宽昂贵且所需开销较小的嵌入式系统等客户端来说，MQTT 是一种完美的协议。\n\n再来看 AMQP，即高级消息队列协议。它是异步通信中最流行的协议之一，也是面向消息中间件的开放标准应用层协议。它的主要特点是消息定向、排队、路由、可靠性和安全性。与 MQTT 相比，AMQP 的功能更强大，因此，它更适合在需要更高处理和内存要求的客户端系统上运行。这也意味着，它无法在物联网的传感器或嵌入式世界中很好地发挥作用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643265667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545414,"discussion_content":"emq 完全不适合消息积压，相信您看过emq的官方手册就知道了，每个topic可以配置保留最多保留几条消息，注意这个配置是全局配置，且对性能本身会有影响。。所以默认最多一条即可","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641953035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476323,"avatar":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","nickname":" 尿布","note":"","ucode":"D1C8BDA7540962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248767,"discussion_content":"学习了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587894052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117946,"user_name":"我已经设置了昵称","can_delete":false,"product_type":"c1","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1564197056,"is_pvip":false,"replies":[{"id":43188,"content":"我们提到的都是消息队列本身的性能，不包括生产者和消费者处理各自业务逻辑的时间。一般测试消息队列性能的时候，生产者和消费者是没有任何业务逻辑的。\n","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564206900,"ip_address":"","comment_id":117946,"utype":1}],"discussion_count":7,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"一直不明白一个问题，每秒处理几万～几十万数据，这不应该是按照下游业务的消费能力来讲的吗，比如我们现在的服务tps就只能打到几百。还是说老师和网上讲的都是发送到消息队列的能力？又或是几万几十万只针下游业务只打个日志专门用来做性能测试的情况？希望解答下","like_count":9,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460193,"discussion_content":"我们提到的都是消息队列本身的性能，不包括生产者和消费者处理各自业务逻辑的时间。一般测试消息队列性能的时候，生产者和消费者是没有任何业务逻辑的。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564206900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026894,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/4e/82e9657c.jpg","nickname":"jeff","note":"","ucode":"68456DD035BDF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586363,"discussion_content":"这是针对消息队列的基准测试、不是针对你的服务或系统。这就要 尽可能保证将业务处理的影响、网络传输的影响 降到最低！否则无法得到客观数据！你说的这个 测试对象就是你的系统了！假如通过 网速为 1b的网线（甚至离线）测试你的服务 结果 肯定不能代表你的服务性能呢。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1662137636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548570,"discussion_content":"个人观点：\n确实不应该考虑上下游的生产和消费能力去测试消息队列的性能，因业务的不同，测试消息队列的结果自然也不同，但是自己结合自身业务，进行测试。从而得出自身业务系统能发挥出消息队列的性能的几层功力。另外，消息队列本身的性能涉及到两方面，即读写性能，或者说收发性能，至于存储，对上下游服务，本身应该是透明的，只要消息队列本身能够保证存储是没问题的，基本不需要去关注。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643267074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2264579,"avatar":"","nickname":"Geek_1d4102","note":"","ucode":"9438F651125653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318441,"discussion_content":"我认为测试吞吐量本来就不应该考虑业务，实际中也许复杂消费者处理能力不足，可以增加更多的消费者集群。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603755208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1138821,"avatar":"https://static001.geekbang.org/account/avatar/00/11/60/85/f72f1d94.jpg","nickname":"与路同飞","note":"","ucode":"2985F1440A1962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311414,"discussion_content":"因为你一个mq集群不只给一个消费方用的，是给整个公司用的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602331697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1660823,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjcGW3N8Zh6fapKCpLnlykWtrLCOMwbPuiaCTEXx0d2mtP6vu5kP2x0cpaiaTGianHKsI1VO6gXpEZA/132","nickname":"Htian","note":"","ucode":"945E858AFE7FBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20610,"discussion_content":"理想化的情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569334351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133702,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","nickname":"angel😇txy🤓","note":"","ucode":"C0AEE0D8BAF7ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5415,"discussion_content":"除去业务逻辑的性能","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566250251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117855,"user_name":"13761642169","can_delete":false,"product_type":"c1","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1564149887,"is_pvip":false,"replies":[{"id":43196,"content":"技术有好坏，但架构设计上，特别是技术选择都没有绝对的对错，适合就好。\n\nKafka的时延虽然稍大一些，但也只是ms基本的差异，也不是完全不能用于在线业务。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564207900,"ip_address":"","comment_id":117855,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"Kafka 不太适合在线业务场景。这个我不同意，这些完全可以立即发送","like_count":8},{"had_liked":false,"id":117310,"user_name":"InfoQ_686548eeb0d8","can_delete":false,"product_type":"c1","uid":1316985,"ip_address":"","ucode":"8222D0A7EE6155","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIsf7oYWKWrCu7LzT4xt2ZvLdNsn2Me8yEcdgVjJTKe68MQicIcO09FLXRYH5R8hCJ9RiatklFkSGtQ/132","comment_is_top":false,"comment_ctime":1564021520,"is_pvip":false,"replies":[{"id":42968,"content":"挖坟的问题，受内存大小的限制，不太好解决。这和采用那种消息队列关系不太大。有条件的话，可以使用SSD结合Raid，消费速度基本上是可以打满万兆网卡的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564029637,"ip_address":"","comment_id":117310,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"流处理中消息延迟不能避免回溯处理，kafka如果消息已经不在内存里，访问性能会有影响，pulsar 可以很好解决这个问题吗？","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460193,"discussion_content":"我们提到的都是消息队列本身的性能，不包括生产者和消费者处理各自业务逻辑的时间。一般测试消息队列性能的时候，生产者和消费者是没有任何业务逻辑的。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564206900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026894,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/4e/82e9657c.jpg","nickname":"jeff","note":"","ucode":"68456DD035BDF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586363,"discussion_content":"这是针对消息队列的基准测试、不是针对你的服务或系统。这就要 尽可能保证将业务处理的影响、网络传输的影响 降到最低！否则无法得到客观数据！你说的这个 测试对象就是你的系统了！假如通过 网速为 1b的网线（甚至离线）测试你的服务 结果 肯定不能代表你的服务性能呢。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1662137636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548570,"discussion_content":"个人观点：\n确实不应该考虑上下游的生产和消费能力去测试消息队列的性能，因业务的不同，测试消息队列的结果自然也不同，但是自己结合自身业务，进行测试。从而得出自身业务系统能发挥出消息队列的性能的几层功力。另外，消息队列本身的性能涉及到两方面，即读写性能，或者说收发性能，至于存储，对上下游服务，本身应该是透明的，只要消息队列本身能够保证存储是没问题的，基本不需要去关注。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643267074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2264579,"avatar":"","nickname":"Geek_1d4102","note":"","ucode":"9438F651125653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318441,"discussion_content":"我认为测试吞吐量本来就不应该考虑业务，实际中也许复杂消费者处理能力不足，可以增加更多的消费者集群。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603755208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1138821,"avatar":"https://static001.geekbang.org/account/avatar/00/11/60/85/f72f1d94.jpg","nickname":"与路同飞","note":"","ucode":"2985F1440A1962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311414,"discussion_content":"因为你一个mq集群不只给一个消费方用的，是给整个公司用的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602331697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1660823,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjcGW3N8Zh6fapKCpLnlykWtrLCOMwbPuiaCTEXx0d2mtP6vu5kP2x0cpaiaTGianHKsI1VO6gXpEZA/132","nickname":"Htian","note":"","ucode":"945E858AFE7FBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20610,"discussion_content":"理想化的情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569334351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133702,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","nickname":"angel😇txy🤓","note":"","ucode":"C0AEE0D8BAF7ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5415,"discussion_content":"除去业务逻辑的性能","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566250251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117239,"user_name":"David Mao","can_delete":false,"product_type":"c1","uid":1307248,"ip_address":"","ucode":"217112492D0955","user_header":"https://static001.geekbang.org/account/avatar/00/13/f2/70/8159901c.jpg","comment_is_top":false,"comment_ctime":1564014397,"is_pvip":false,"replies":[{"id":42948,"content":"当然可以，在京东就是这样的集中式大集群，为所有业务提供消息服务。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019551,"ip_address":"","comment_id":117239,"utype":1}],"discussion_count":5,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"我们的云平台有多个项目，每个项目用的消息中间件不同，有的用RabbitMQ, 有的用Kafka， 请教老师，这些消息中间件可以建设成一个统一的，集中式的架构吗？也就是建设成一个消息中间件平台，所有的项目来共用。","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460143,"discussion_content":"技术有好坏，但架构设计上，特别是技术选择都没有绝对的对错，适合就好。\n\nKafka的时延虽然稍大一些，但也只是ms基本的差异，也不是完全不能用于在线业务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564207900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026894,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/4e/82e9657c.jpg","nickname":"jeff","note":"","ucode":"68456DD035BDF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586364,"discussion_content":"并发足够高时 延时可以不用考虑的！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662137756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117675,"user_name":"青舟","can_delete":false,"product_type":"c1","uid":1192732,"ip_address":"","ucode":"2651482AC0DEC6","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/1c/59a4e803.jpg","comment_is_top":false,"comment_ctime":1564109658,"is_pvip":false,"replies":[{"id":43191,"content":"但我个人的意见：这个需求不太适合用MQ来实现。\n\n另外，是不是可以换个思路来考虑这个问题，你一定需要一个设备离线的通知来触发什么业务逻辑吗？还是只是需要查询设备的时候，能正确的给出设备是否在线就可以了？\n\n如果是后者，实现代价要低很多。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564207599,"ip_address":"","comment_id":117675,"utype":1}],"discussion_count":7,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"老师您好，\n请问是否有消息队列支持延时消息，并可以撤回延时消息的？\n\n需求：物联网平台要对设备离线事件做监控，我想在每次设备上报数据时，发送一个延时判断离线的延时消息到MQ，如果设备正常再次上报数据，就取消上次的延时消息，并发送一个新的延时消息。\n目的是不希望每次上报数据都会导致消费端做一次离线判断，只需要对最后一次上报做判断即可。","like_count":6,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459875,"discussion_content":"当然可以，在京东就是这样的集中式大集群，为所有业务提供消息服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1026894,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/4e/82e9657c.jpg","nickname":"jeff","note":"","ucode":"68456DD035BDF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":586362,"discussion_content":"这算是技术中台了吗？还是 paas ？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662137214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":459875,"ip_address":"河北","group_id":0},"score":586362,"extra":""}]},{"author":{"id":1802337,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/61/ae3bb67c.jpg","nickname":"毛毛虫大帝","note":"","ucode":"1EBB026121C060","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":155329,"discussion_content":"京东内部的JMQ消息中间件产品就提供了一站式集中消息服务的能力 解决了不同消息中间件的使用和部署问题 通过多协议支持满足不同消息服务的对接能力 同时自身一套集中式大集群部署和运维","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580225136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1765546,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/f0/aa/dfe88746.jpg","nickname":"极客加油站","note":"","ucode":"654B861307AE37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598953,"discussion_content":"666 课程给力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673237625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006789,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","nickname":"梁中华","note":"","ucode":"52FE40242CBAD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4340,"discussion_content":"可以把消息中间件包装一层服务吗？应用不直接链接消息服务器，而是通过一个自定义的RPC服务接口发送到消息服务器，这样就可以屏蔽消息中间件的复杂度。包括后面的升级，换消息中间件调用方都不受影响。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565322414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215904,"user_name":"foo","can_delete":false,"product_type":"c1","uid":1354029,"ip_address":"","ucode":"119D948DE2179A","user_header":"https://static001.geekbang.org/account/avatar/00/14/a9/2d/f35acbe6.jpg","comment_is_top":false,"comment_ctime":1589129686,"is_pvip":false,"replies":[{"id":79947,"content":"这里面“埋点”指的是在APP、小程序和Web页面上的采集的数据，这些埋点数据记录用户的行为，比如你打开了哪个页面，点击了哪个按钮，在哪个商品上停留了多久等等这些用户行为信息。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1589171578,"ip_address":"","comment_id":215904,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"老师，在文章结尾地方提到了前端埋点这个名词，能帮忙解释一下这个名词吗？该怎么去理解呢？","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460082,"discussion_content":"但我个人的意见：这个需求不太适合用MQ来实现。\n\n另外，是不是可以换个思路来考虑这个问题，你一定需要一个设备离线的通知来触发什么业务逻辑吗？还是只是需要查询设备的时候，能正确的给出设备是否在线就可以了？\n\n如果是后者，实现代价要低很多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564207599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1282039,"avatar":"https://static001.geekbang.org/account/avatar/00/13/8f/f7/9b59c019.jpg","nickname":"内卷毁灭世界","note":"","ucode":"928F29B8C1F60D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5265,"discussion_content":"设备每上报一次数据，通过redis zset的scope保存设备离线时间戳，然后通过定时任务，不断的把scope小于当前时间的设备状态更新的离线。最近也在做类似的事情，想出来的一种解决方案。","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1566123893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1240856,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ef/18/5bd7b1be.jpg","nickname":"总有一天","note":"","ucode":"730405447A6E95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286251,"discussion_content":"QMQ可以延时发送","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593094922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019689,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8f/29/0e1b477d.jpg","nickname":"图南日晟","note":"","ucode":"B9C573079293D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230177,"discussion_content":"物联网设备可以考虑MQTT订阅发布。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586731896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2106016,"avatar":"https://static001.geekbang.org/account/avatar/00/20/22/a0/d8631910.jpg","nickname":"Y a n g","note":"","ucode":"A59C5958750550","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582765,"discussion_content":"这个相等于心跳超时，然后通知业务来做离线更新。可以参考netty的IdleStateHandler心跳机制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659665551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"云南","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1402471,"avatar":"https://static001.geekbang.org/account/avatar/00/15/66/67/4a2ffcca.jpg","nickname":"Kurisu","note":"","ucode":"500382340F2FEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":144256,"discussion_content":"撤回逻辑用途不大。发的消息当做心跳包来处理就好了，平台侧基于该设备最后一次发送时间来判断是否在线","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579524043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1530493,"avatar":"","nickname":"Geek_e7834d","note":"","ucode":"ABAF1B1B7E6490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3109,"discussion_content":"rabbitmq有延时队列 能不能撤回不确定","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564195962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180582,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1582341809,"is_pvip":false,"replies":[{"id":70343,"content":"主要是发送性能的考虑。在线业务场景下，Kafka的发送时延是要明显高于其它MQ的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1582597618,"ip_address":"","comment_id":180582,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"为什么因为 Kafka 有“微批”的机制就说 Kafka 不太适合在线业务场景呢？延迟也没有这么夸张吧，而且也可以通过将 linger.ms 调小尽快发布消息。\n不太理解老师为什么这么说？","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494605,"discussion_content":"这里面“埋点”指的是在APP、小程序和Web页面上的采集的数据，这些埋点数据记录用户的行为，比如你打开了哪个页面，点击了哪个按钮，在哪个商品上停留了多久等等这些用户行为信息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589171578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125654,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1566221646,"is_pvip":false,"replies":[{"id":46226,"content":"自研的主要原因有二个：第一是规模足够大，能够负担得起自研的成本。第二是，每种消息队列都有它的优势和劣势，不能完全适合大厂的需求。\n\n关于Kafka如何保证顺序消费，可以看一下08答疑这节课中的内容。\n\n另外，当前版本的Kafka是可以保证完全不丢消息的，丢消息已经是n年前很老的版本时的旧黄历了。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566265179,"ip_address":"","comment_id":125654,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"1：该如何选择MQ？\n多快好省，适合的既是最好的。\n1-1：多——功能多，比如：保证不丢消息、保证不重复消费、支持顺序消费、支持集群、支持消息持久化，用的人多，支持的人多，兼容的产品多\n1-2：快——跑的快，性能高，延迟底\n1-3：好——好学习，好维护，好二次开发\n1-4：省——开源省钱，易维护也省钱，性能稳定省心\n多快好省能存在确实非常好，不过这只能是愿望，世间没有十全十美的解决方案，要一样往往需要舍一样。\n\n2：根据老师的分析，我觉得基本的选择次序是\n2-1：kafka\n2-2：rocketMQ\n2-3：rabbitMQ\n2-4：pulsar\n2-5：公司自研\n\n疑问？\n已经有如此之多的选择了，还要自研，难道没有一个合适的嘛？老师觉得自研的核心支撑点是什么？\n另外，在学习kafka的时候，清楚的记得两点\n一是：单分区才能保证顺序消费\n二是：消息不能保证100%不丢失，这个和老师的描述有出入？假如某一时刻leader副本所在的broker都宕机了，那消息还能不丢嘛？或者某一时刻所有broker都宕机了？这样会丢消息吧？\n","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484722,"discussion_content":"主要是发送性能的考虑。在线业务场景下，Kafka的发送时延是要明显高于其它MQ的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582597618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120713,"user_name":"rrbbt","can_delete":false,"product_type":"c1","uid":1128740,"ip_address":"","ucode":"637A27C532D817","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/24/963178c4.jpg","comment_is_top":false,"comment_ctime":1564980965,"is_pvip":false,"replies":[{"id":44340,"content":"给用户提供的API一般都是推模式，比较易于使用。\n大部分消息队列内部的实现都是拉模式，性能比较好。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564989900,"ip_address":"","comment_id":120713,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"老师，用rabbitmq，kafka，rocketmq，你们线上消费消息都是用的推模式还是拉模式啊？","like_count":4,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463646,"discussion_content":"自研的主要原因有二个：第一是规模足够大，能够负担得起自研的成本。第二是，每种消息队列都有它的优势和劣势，不能完全适合大厂的需求。\n\n关于Kafka如何保证顺序消费，可以看一下08答疑这节课中的内容。\n\n另外，当前版本的Kafka是可以保证完全不丢消息的，丢消息已经是n年前很老的版本时的旧黄历了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566265179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1036566,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d1/16/6347bbc0.jpg","nickname":"顶新","note":"","ucode":"241D3CCCAE536B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8842,"discussion_content":"保证消息不丢失，采用了消息持久化的方式来保证的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568081689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548573,"discussion_content":"无法保证消息一定不丢失，比如说所有的服务都挂掉了，而且所有的存储都失效了，再极端一点就是发生在同一时刻，或者地球毁灭，那一切也没有意义了。只是发生的概率很低，低到你永远都遇不到，真遇到了，该说你是幸运的还是不幸的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643267794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1225224,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/6LaITPQ4Lk5fZn8ib1tfsPW8vI9icTuSwAddiajVfibPDiaDvMU2br6ZT7K0LWCKibSQuicT7sIEVmY4K7ibXY0T7UQEiag/132","nickname":"尔东橙","note":"","ucode":"0B013A49BC18DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575172,"discussion_content":"那时候会直接返回失败","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654647765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":548573,"ip_address":"","group_id":0},"score":575172,"extra":""}]}]},{"had_liked":false,"id":117264,"user_name":"古夜","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1564016957,"is_pvip":false,"replies":[{"id":42962,"content":"所以需要好好学英语哦。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564020915,"ip_address":"","comment_id":117264,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"我们用zeromq，奈何国内资料太少，想深入了解都不行","like_count":4,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459887,"discussion_content":"所以需要好好学英语哦。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564020915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1091781,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epjdWhOia2BKpvYDUIria0klBOvxU4v8CfsobsGYicUia6Hybb4n658LfJymFbuPk0koxldr6QIOpQsMA/132","nickname":"Eric","note":"","ucode":"67802124F5181D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3086,"discussion_content":"nanomsg和zeromq怎么选择？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564152193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397339,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/FheCgo4Ovibo0L1vAGgMdZkzQMm1GUMHMMqQ8aglufXaD2hW9z96DjQicAam723jOCZwXVmiaNiaaq4PLsf4COibZ5A/132","nickname":"miniluo","note":"","ucode":"5735B6DEE7902B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3023,"discussion_content":"之前做物联网项目用过，也是靠看国外文章。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564119558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117946,"user_name":"我已经设置了昵称","can_delete":false,"product_type":"c1","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1564197056,"is_pvip":false,"replies":[{"id":43188,"content":"我们提到的都是消息队列本身的性能，不包括生产者和消费者处理各自业务逻辑的时间。一般测试消息队列性能的时候，生产者和消费者是没有任何业务逻辑的。\n","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564206900,"ip_address":"","comment_id":117946,"utype":1}],"discussion_count":7,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"一直不明白一个问题，每秒处理几万～几十万数据，这不应该是按照下游业务的消费能力来讲的吗，比如我们现在的服务tps就只能打到几百。还是说老师和网上讲的都是发送到消息队列的能力？又或是几万几十万只针下游业务只打个日志专门用来做性能测试的情况？希望解答下","like_count":9,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460143,"discussion_content":"技术有好坏，但架构设计上，特别是技术选择都没有绝对的对错，适合就好。\n\nKafka的时延虽然稍大一些，但也只是ms基本的差异，也不是完全不能用于在线业务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564207900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026894,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/4e/82e9657c.jpg","nickname":"jeff","note":"","ucode":"68456DD035BDF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586364,"discussion_content":"并发足够高时 延时可以不用考虑的！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662137756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117855,"user_name":"13761642169","can_delete":false,"product_type":"c1","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1564149887,"is_pvip":false,"replies":[{"id":43196,"content":"技术有好坏，但架构设计上，特别是技术选择都没有绝对的对错，适合就好。\n\nKafka的时延虽然稍大一些，但也只是ms基本的差异，也不是完全不能用于在线业务。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564207900,"ip_address":"","comment_id":117855,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"Kafka 不太适合在线业务场景。这个我不同意，这些完全可以立即发送","like_count":8,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459908,"discussion_content":"挖坟的问题，受内存大小的限制，不太好解决。这和采用那种消息队列关系不太大。有条件的话，可以使用SSD结合Raid，消费速度基本上是可以打满万兆网卡的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564029637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476323,"avatar":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","nickname":" 尿布","note":"","ucode":"D1C8BDA7540962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248909,"discussion_content":"不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587902370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117310,"user_name":"InfoQ_686548eeb0d8","can_delete":false,"product_type":"c1","uid":1316985,"ip_address":"","ucode":"8222D0A7EE6155","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIsf7oYWKWrCu7LzT4xt2ZvLdNsn2Me8yEcdgVjJTKe68MQicIcO09FLXRYH5R8hCJ9RiatklFkSGtQ/132","comment_is_top":false,"comment_ctime":1564021520,"is_pvip":false,"replies":[{"id":42968,"content":"挖坟的问题，受内存大小的限制，不太好解决。这和采用那种消息队列关系不太大。有条件的话，可以使用SSD结合Raid，消费速度基本上是可以打满万兆网卡的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564029637,"ip_address":"","comment_id":117310,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"流处理中消息延迟不能避免回溯处理，kafka如果消息已经不在内存里，访问性能会有影响，pulsar 可以很好解决这个问题吗？","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459908,"discussion_content":"挖坟的问题，受内存大小的限制，不太好解决。这和采用那种消息队列关系不太大。有条件的话，可以使用SSD结合Raid，消费速度基本上是可以打满万兆网卡的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564029637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476323,"avatar":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","nickname":" 尿布","note":"","ucode":"D1C8BDA7540962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248909,"discussion_content":"不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587902370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117239,"user_name":"David Mao","can_delete":false,"product_type":"c1","uid":1307248,"ip_address":"","ucode":"217112492D0955","user_header":"https://static001.geekbang.org/account/avatar/00/13/f2/70/8159901c.jpg","comment_is_top":false,"comment_ctime":1564014397,"is_pvip":false,"replies":[{"id":42948,"content":"当然可以，在京东就是这样的集中式大集群，为所有业务提供消息服务。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019551,"ip_address":"","comment_id":117239,"utype":1}],"discussion_count":5,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"我们的云平台有多个项目，每个项目用的消息中间件不同，有的用RabbitMQ, 有的用Kafka， 请教老师，这些消息中间件可以建设成一个统一的，集中式的架构吗？也就是建设成一个消息中间件平台，所有的项目来共用。","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459875,"discussion_content":"当然可以，在京东就是这样的集中式大集群，为所有业务提供消息服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1026894,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/4e/82e9657c.jpg","nickname":"jeff","note":"","ucode":"68456DD035BDF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":586362,"discussion_content":"这算是技术中台了吗？还是 paas ？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662137214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":459875,"ip_address":"河北","group_id":0},"score":586362,"extra":""}]},{"author":{"id":1802337,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/61/ae3bb67c.jpg","nickname":"毛毛虫大帝","note":"","ucode":"1EBB026121C060","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":155329,"discussion_content":"京东内部的JMQ消息中间件产品就提供了一站式集中消息服务的能力 解决了不同消息中间件的使用和部署问题 通过多协议支持满足不同消息服务的对接能力 同时自身一套集中式大集群部署和运维","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580225136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1765546,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/f0/aa/dfe88746.jpg","nickname":"极客加油站","note":"","ucode":"654B861307AE37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598953,"discussion_content":"666 课程给力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673237625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006789,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","nickname":"梁中华","note":"","ucode":"52FE40242CBAD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4340,"discussion_content":"可以把消息中间件包装一层服务吗？应用不直接链接消息服务器，而是通过一个自定义的RPC服务接口发送到消息服务器，这样就可以屏蔽消息中间件的复杂度。包括后面的升级，换消息中间件调用方都不受影响。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565322414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117675,"user_name":"青舟","can_delete":false,"product_type":"c1","uid":1192732,"ip_address":"","ucode":"2651482AC0DEC6","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/1c/59a4e803.jpg","comment_is_top":false,"comment_ctime":1564109658,"is_pvip":false,"replies":[{"id":43191,"content":"但我个人的意见：这个需求不太适合用MQ来实现。\n\n另外，是不是可以换个思路来考虑这个问题，你一定需要一个设备离线的通知来触发什么业务逻辑吗？还是只是需要查询设备的时候，能正确的给出设备是否在线就可以了？\n\n如果是后者，实现代价要低很多。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564207599,"ip_address":"","comment_id":117675,"utype":1}],"discussion_count":7,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"老师您好，\n请问是否有消息队列支持延时消息，并可以撤回延时消息的？\n\n需求：物联网平台要对设备离线事件做监控，我想在每次设备上报数据时，发送一个延时判断离线的延时消息到MQ，如果设备正常再次上报数据，就取消上次的延时消息，并发送一个新的延时消息。\n目的是不希望每次上报数据都会导致消费端做一次离线判断，只需要对最后一次上报做判断即可。","like_count":6,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460082,"discussion_content":"但我个人的意见：这个需求不太适合用MQ来实现。\n\n另外，是不是可以换个思路来考虑这个问题，你一定需要一个设备离线的通知来触发什么业务逻辑吗？还是只是需要查询设备的时候，能正确的给出设备是否在线就可以了？\n\n如果是后者，实现代价要低很多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564207599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1282039,"avatar":"https://static001.geekbang.org/account/avatar/00/13/8f/f7/9b59c019.jpg","nickname":"内卷毁灭世界","note":"","ucode":"928F29B8C1F60D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5265,"discussion_content":"设备每上报一次数据，通过redis zset的scope保存设备离线时间戳，然后通过定时任务，不断的把scope小于当前时间的设备状态更新的离线。最近也在做类似的事情，想出来的一种解决方案。","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1566123893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1240856,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ef/18/5bd7b1be.jpg","nickname":"总有一天","note":"","ucode":"730405447A6E95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286251,"discussion_content":"QMQ可以延时发送","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593094922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019689,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8f/29/0e1b477d.jpg","nickname":"图南日晟","note":"","ucode":"B9C573079293D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230177,"discussion_content":"物联网设备可以考虑MQTT订阅发布。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586731896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2106016,"avatar":"https://static001.geekbang.org/account/avatar/00/20/22/a0/d8631910.jpg","nickname":"Y a n g","note":"","ucode":"A59C5958750550","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582765,"discussion_content":"这个相等于心跳超时，然后通知业务来做离线更新。可以参考netty的IdleStateHandler心跳机制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659665551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"云南","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1402471,"avatar":"https://static001.geekbang.org/account/avatar/00/15/66/67/4a2ffcca.jpg","nickname":"Kurisu","note":"","ucode":"500382340F2FEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":144256,"discussion_content":"撤回逻辑用途不大。发的消息当做心跳包来处理就好了，平台侧基于该设备最后一次发送时间来判断是否在线","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579524043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1530493,"avatar":"","nickname":"Geek_e7834d","note":"","ucode":"ABAF1B1B7E6490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3109,"discussion_content":"rabbitmq有延时队列 能不能撤回不确定","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564195962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215904,"user_name":"foo","can_delete":false,"product_type":"c1","uid":1354029,"ip_address":"","ucode":"119D948DE2179A","user_header":"https://static001.geekbang.org/account/avatar/00/14/a9/2d/f35acbe6.jpg","comment_is_top":false,"comment_ctime":1589129686,"is_pvip":false,"replies":[{"id":79947,"content":"这里面“埋点”指的是在APP、小程序和Web页面上的采集的数据，这些埋点数据记录用户的行为，比如你打开了哪个页面，点击了哪个按钮，在哪个商品上停留了多久等等这些用户行为信息。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1589171578,"ip_address":"","comment_id":215904,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"老师，在文章结尾地方提到了前端埋点这个名词，能帮忙解释一下这个名词吗？该怎么去理解呢？","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494605,"discussion_content":"这里面“埋点”指的是在APP、小程序和Web页面上的采集的数据，这些埋点数据记录用户的行为，比如你打开了哪个页面，点击了哪个按钮，在哪个商品上停留了多久等等这些用户行为信息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589171578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180582,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1582341809,"is_pvip":false,"replies":[{"id":70343,"content":"主要是发送性能的考虑。在线业务场景下，Kafka的发送时延是要明显高于其它MQ的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1582597618,"ip_address":"","comment_id":180582,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"为什么因为 Kafka 有“微批”的机制就说 Kafka 不太适合在线业务场景呢？延迟也没有这么夸张吧，而且也可以通过将 linger.ms 调小尽快发布消息。\n不太理解老师为什么这么说？","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484722,"discussion_content":"主要是发送性能的考虑。在线业务场景下，Kafka的发送时延是要明显高于其它MQ的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582597618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125654,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1566221646,"is_pvip":false,"replies":[{"id":46226,"content":"自研的主要原因有二个：第一是规模足够大，能够负担得起自研的成本。第二是，每种消息队列都有它的优势和劣势，不能完全适合大厂的需求。\n\n关于Kafka如何保证顺序消费，可以看一下08答疑这节课中的内容。\n\n另外，当前版本的Kafka是可以保证完全不丢消息的，丢消息已经是n年前很老的版本时的旧黄历了。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566265179,"ip_address":"","comment_id":125654,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"1：该如何选择MQ？\n多快好省，适合的既是最好的。\n1-1：多——功能多，比如：保证不丢消息、保证不重复消费、支持顺序消费、支持集群、支持消息持久化，用的人多，支持的人多，兼容的产品多\n1-2：快——跑的快，性能高，延迟底\n1-3：好——好学习，好维护，好二次开发\n1-4：省——开源省钱，易维护也省钱，性能稳定省心\n多快好省能存在确实非常好，不过这只能是愿望，世间没有十全十美的解决方案，要一样往往需要舍一样。\n\n2：根据老师的分析，我觉得基本的选择次序是\n2-1：kafka\n2-2：rocketMQ\n2-3：rabbitMQ\n2-4：pulsar\n2-5：公司自研\n\n疑问？\n已经有如此之多的选择了，还要自研，难道没有一个合适的嘛？老师觉得自研的核心支撑点是什么？\n另外，在学习kafka的时候，清楚的记得两点\n一是：单分区才能保证顺序消费\n二是：消息不能保证100%不丢失，这个和老师的描述有出入？假如某一时刻leader副本所在的broker都宕机了，那消息还能不丢嘛？或者某一时刻所有broker都宕机了？这样会丢消息吧？\n","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463646,"discussion_content":"自研的主要原因有二个：第一是规模足够大，能够负担得起自研的成本。第二是，每种消息队列都有它的优势和劣势，不能完全适合大厂的需求。\n\n关于Kafka如何保证顺序消费，可以看一下08答疑这节课中的内容。\n\n另外，当前版本的Kafka是可以保证完全不丢消息的，丢消息已经是n年前很老的版本时的旧黄历了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566265179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1036566,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d1/16/6347bbc0.jpg","nickname":"顶新","note":"","ucode":"241D3CCCAE536B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8842,"discussion_content":"保证消息不丢失，采用了消息持久化的方式来保证的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568081689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548573,"discussion_content":"无法保证消息一定不丢失，比如说所有的服务都挂掉了，而且所有的存储都失效了，再极端一点就是发生在同一时刻，或者地球毁灭，那一切也没有意义了。只是发生的概率很低，低到你永远都遇不到，真遇到了，该说你是幸运的还是不幸的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643267794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1225224,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/6LaITPQ4Lk5fZn8ib1tfsPW8vI9icTuSwAddiajVfibPDiaDvMU2br6ZT7K0LWCKibSQuicT7sIEVmY4K7ibXY0T7UQEiag/132","nickname":"尔东橙","note":"","ucode":"0B013A49BC18DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575172,"discussion_content":"那时候会直接返回失败","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654647765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":548573,"ip_address":"","group_id":0},"score":575172,"extra":""}]}]},{"had_liked":false,"id":120713,"user_name":"rrbbt","can_delete":false,"product_type":"c1","uid":1128740,"ip_address":"","ucode":"637A27C532D817","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/24/963178c4.jpg","comment_is_top":false,"comment_ctime":1564980965,"is_pvip":false,"replies":[{"id":44340,"content":"给用户提供的API一般都是推模式，比较易于使用。\n大部分消息队列内部的实现都是拉模式，性能比较好。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564989900,"ip_address":"","comment_id":120713,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"老师，用rabbitmq，kafka，rocketmq，你们线上消费消息都是用的推模式还是拉模式啊？","like_count":4,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461444,"discussion_content":"给用户提供的API一般都是推模式，比较易于使用。\n大部分消息队列内部的实现都是拉模式，性能比较好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564989900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117264,"user_name":"古夜","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1564016957,"is_pvip":false,"replies":[{"id":42962,"content":"所以需要好好学英语哦。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564020915,"ip_address":"","comment_id":117264,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"我们用zeromq，奈何国内资料太少，想深入了解都不行","like_count":4,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461444,"discussion_content":"给用户提供的API一般都是推模式，比较易于使用。\n大部分消息队列内部的实现都是拉模式，性能比较好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564989900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127949,"user_name":"~尘曦~","can_delete":false,"product_type":"c1","uid":1175695,"ip_address":"","ucode":"BFA7E7DBD9047B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f0/8f/ca9fded0.jpg","comment_is_top":false,"comment_ctime":1566813634,"is_pvip":false,"replies":[{"id":47526,"content":"是可以的。\n\n不过作为一款消息队列来说，redis无论是功能还是性能，与真正的消息队列都有很大的差距。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566868673,"ip_address":"","comment_id":127949,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"redis不是也可做消息队列吗\n","like_count":3},{"had_liked":false,"id":163311,"user_name":"VIP2","can_delete":false,"product_type":"c1","uid":1787871,"ip_address":"","ucode":"A28B23B96A5524","user_header":"","comment_is_top":false,"comment_ctime":1576683813,"is_pvip":false,"replies":[{"id":62387,"content":"正确使用Kafka是不会丢数据的，即使Kafka有异步发送、异步刷盘的机制，也可以通过一些配置确保不丢数据。\n\n具体方法请看一下《05 | 如何确保消息不会丢失?》","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1576896940,"ip_address":"","comment_id":163311,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"我们现在用的kafka，主要场景是做异步处理，我们做消息发送时，用的是异步去发送，通过定时到数据库去拉数据，然后发送！主要考虑的场景是，因为kafka现在用的异步刷盘方式，可能会丢失一个窗口内的数据，所以业务中做了一层包装！请问老师是怎么考虑这种场景的","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478343,"discussion_content":"正确使用Kafka是不会丢数据的，即使Kafka有异步发送、异步刷盘的机制，也可以通过一些配置确保不丢数据。\n\n具体方法请看一下《05 | 如何确保消息不会丢失?》","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576896940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135455,"user_name":"给我点阳光就灿烂","can_delete":false,"product_type":"c1","uid":1462209,"ip_address":"","ucode":"F3B0439BE0D062","user_header":"https://static001.geekbang.org/account/avatar/00/16/4f/c1/7f596aba.jpg","comment_is_top":false,"comment_ctime":1569165500,"is_pvip":false,"replies":[{"id":51964,"content":"如果你团队都是go语言技术栈，并且对消息队列没有特殊的需求，建议你选用NSQ，原因我在文中也提到过，选一个和自己团队技术栈相同的产品，后续维护成本相对低一些。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1569202565,"ip_address":"","comment_id":135455,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"想咨询一下NSQ这个消息队列究竟怎么样，最近在选Kafka还是NSQ中纠结，golang做的后台是不是更适合选NSQ呢","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468204,"discussion_content":"如果你团队都是go语言技术栈，并且对消息队列没有特殊的需求，建议你选用NSQ，原因我在文中也提到过，选一个和自己团队技术栈相同的产品，后续维护成本相对低一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569202565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118400,"user_name":"衡子","can_delete":false,"product_type":"c1","uid":1109433,"ip_address":"","ucode":"0AED79FC9D14BB","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/b9/825b2411.jpg","comment_is_top":false,"comment_ctime":1564360673,"is_pvip":false,"replies":[{"id":43375,"content":"可以在有消息堆积能力（支撑可回溯需求）的消息队列里面选择，Kafka和RocketMQ都可以满足这些要求。\n\n关于重复消费的问题，后面我会专门讲到该如何处理。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564364367,"ip_address":"","comment_id":118400,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"在做银行项目，目前还没有引入消息队列，计划要有消息队列来提升性能，个人理解银行项目的可靠性要求高，消息不能丢失，不能重复消费，可回溯，什么队列合适呢？相对而言，是否rocketmq","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468204,"discussion_content":"如果你团队都是go语言技术栈，并且对消息队列没有特殊的需求，建议你选用NSQ，原因我在文中也提到过，选一个和自己团队技术栈相同的产品，后续维护成本相对低一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569202565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117252,"user_name":"Jaising","can_delete":false,"product_type":"c1","uid":1037630,"ip_address":"","ucode":"F68830B7B90F96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d5/3e/7f3a9c2b.jpg","comment_is_top":false,"comment_ctime":1564015883,"is_pvip":false,"replies":[{"id":42963,"content":"是的，架构设计很多情况下是在做取舍和选择。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564020948,"ip_address":"","comment_id":117252,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"李老师所说的是不是可以按照CAP理论来讲，不同场景总要做出取舍对吧；\n另，目前在线业务使用RocketMQ，做了二次开发的，中文支持不错而且社区响应速度快","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459883,"discussion_content":"是的，架构设计很多情况下是在做取舍和选择。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564020948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117213,"user_name":"我知道了嗯","can_delete":false,"product_type":"c1","uid":1138471,"ip_address":"","ucode":"9186EC1F32C490","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/27/a6873bc9.jpg","comment_is_top":false,"comment_ctime":1564011081,"is_pvip":false,"replies":[{"id":46913,"content":"Kafka消费时采用的是拉模式。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521365,"ip_address":"","comment_id":117213,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"kafka是主动发消息给消费者，还是消费者主动来拉消息👀","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459883,"discussion_content":"是的，架构设计很多情况下是在做取舍和选择。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564020948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178124,"user_name":"swortect","can_delete":false,"product_type":"c1","uid":1288071,"ip_address":"","ucode":"A8C294E590C1B6","user_header":"https://static001.geekbang.org/account/avatar/00/13/a7/87/4f2fa359.jpg","comment_is_top":false,"comment_ctime":1581592000,"is_pvip":false,"replies":[{"id":69504,"content":"可以考虑一下RabbitMQ：https:&#47;&#47;www.rabbitmq.com&#47;tutorials&#47;tutorial-one-php.html","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1581918671,"ip_address":"","comment_id":178124,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"老师好，看了这节课感觉在线业务上rocketmq比较适合，但是我是php开发的，用rocket了解了一下要装的扩展很多，很多都是第三方自己开发的，生产环境下可能要做很多调整。想请问一下有适合php开发的消息通道么","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459865,"discussion_content":"Kafka消费时采用的是拉模式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566521365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121223,"user_name":"海罗沃德","can_delete":false,"product_type":"c1","uid":1165364,"ip_address":"","ucode":"8704F1D6980FA0","user_header":"https://static001.geekbang.org/account/avatar/00/11/c8/34/fb871b2c.jpg","comment_is_top":false,"comment_ctime":1565080403,"is_pvip":false,"replies":[{"id":44613,"content":"这个问题已经不是技术问题了，你更多的需要从成本，运维方便程度，后续是否有可能从AWS迁出，这些方面来考虑。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1565138424,"ip_address":"","comment_id":121223,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"AWS的SNS+SQS怎么样？对于使用AWS的系统，云端消息队列和开源消息队列怎么选择？","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483675,"discussion_content":"可以考虑一下RabbitMQ：https://www.rabbitmq.com/tutorials/tutorial-one-php.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581918671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019568,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/b0/ef201991.jpg","nickname":"CcczzZ","note":"","ucode":"5F46DA5053D2BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297011,"discussion_content":"php还是用RabbitMQ方便些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596727471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120903,"user_name":"竺芯","can_delete":false,"product_type":"c1","uid":1515371,"ip_address":"","ucode":"B2CC13C9BD2D23","user_header":"https://static001.geekbang.org/account/avatar/00/17/1f/6b/3ac8903e.jpg","comment_is_top":false,"comment_ctime":1565011460,"is_pvip":false,"replies":[{"id":44472,"content":"音频","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1565054665,"ip_address":"","comment_id":120903,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"这是视频还是语音？","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461523,"discussion_content":"音频","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565054665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117499,"user_name":"明不二","can_delete":false,"product_type":"c1","uid":1106160,"ip_address":"","ucode":"621B6A8B932095","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/f0/5a29e705.jpg","comment_is_top":false,"comment_ctime":1564061740,"is_pvip":false,"replies":[{"id":43097,"content":"据我了解，新版的Redis支持 Pub&#47;Sub功能，但它只是一个“支持Pub&#47;Sub功能的KV Store”，对于消息这块儿，它和主流的消息队列比，无论是功能、性能还是扩展性方面都是有很多差异的。但也不意味着你不能选择Redis用于收发消息，比如你现在的业务重度依赖Redis，你正好有一些Pub&#47;Sub的需求，Redis也能满足，那就没必要专门再上一套MQ集群。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108151,"ip_address":"","comment_id":117499,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"现在项目里主要还是使用 kafka，对 kafka 的访问接口进行了二次封装，便于业务团队使用。同时，在一些轻量级场景下，项目正在考虑使用 redis 提供的 mq 功能实现消息队列。老师能讲讲 redis mq 在使用上的优缺点不？","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459998,"discussion_content":"据我了解，新版的Redis支持 Pub/Sub功能，但它只是一个“支持Pub/Sub功能的KV Store”，对于消息这块儿，它和主流的消息队列比，无论是功能、性能还是扩展性方面都是有很多差异的。但也不意味着你不能选择Redis用于收发消息，比如你现在的业务重度依赖Redis，你正好有一些Pub/Sub的需求，Redis也能满足，那就没必要专门再上一套MQ集群。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564108151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023093,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/75/525e53b1.jpg","nickname":"Hobby","note":"","ucode":"8954830380D44F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343943,"discussion_content":"redis还有stream，这个更适合作消息队列","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611215779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046714,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg","nickname":"Geek_zbvt62","note":"","ucode":"81EA27ADD9EC1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3029,"discussion_content":"层主这里说的redis mq功能可能是redis里那个list功能。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564122028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127949,"user_name":"~尘曦~","can_delete":false,"product_type":"c1","uid":1175695,"ip_address":"","ucode":"BFA7E7DBD9047B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f0/8f/ca9fded0.jpg","comment_is_top":false,"comment_ctime":1566813634,"is_pvip":false,"replies":[{"id":47526,"content":"是可以的。\n\n不过作为一款消息队列来说，redis无论是功能还是性能，与真正的消息队列都有很大的差距。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566868673,"ip_address":"","comment_id":127949,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"redis不是也可做消息队列吗\n","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464719,"discussion_content":"是可以的。\n\n不过作为一款消息队列来说，redis无论是功能还是性能，与真正的消息队列都有很大的差距。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1896868,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f1/a4/79c36b87.jpg","nickname":"流云","note":"","ucode":"26C5A9166EC6D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251334,"discussion_content":"redis做消息队列有两种玩法，一种是使用pub/sub，但是消息无法持久化；另一种使用list数据结构，消息可以持久化了，但性能堪忧","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588080758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1023093,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/75/525e53b1.jpg","nickname":"Hobby","note":"","ucode":"8954830380D44F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1896868,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f1/a4/79c36b87.jpg","nickname":"流云","note":"","ucode":"26C5A9166EC6D8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343942,"discussion_content":"用stream呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611214680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":251334,"ip_address":"","group_id":0},"score":343942,"extra":""}]}]},{"had_liked":false,"id":163311,"user_name":"VIP2","can_delete":false,"product_type":"c1","uid":1787871,"ip_address":"","ucode":"A28B23B96A5524","user_header":"","comment_is_top":false,"comment_ctime":1576683813,"is_pvip":false,"replies":[{"id":62387,"content":"正确使用Kafka是不会丢数据的，即使Kafka有异步发送、异步刷盘的机制，也可以通过一些配置确保不丢数据。\n\n具体方法请看一下《05 | 如何确保消息不会丢失?》","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1576896940,"ip_address":"","comment_id":163311,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"我们现在用的kafka，主要场景是做异步处理，我们做消息发送时，用的是异步去发送，通过定时到数据库去拉数据，然后发送！主要考虑的场景是，因为kafka现在用的异步刷盘方式，可能会丢失一个窗口内的数据，所以业务中做了一层包装！请问老师是怎么考虑这种场景的","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464719,"discussion_content":"是可以的。\n\n不过作为一款消息队列来说，redis无论是功能还是性能，与真正的消息队列都有很大的差距。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1896868,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f1/a4/79c36b87.jpg","nickname":"流云","note":"","ucode":"26C5A9166EC6D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251334,"discussion_content":"redis做消息队列有两种玩法，一种是使用pub/sub，但是消息无法持久化；另一种使用list数据结构，消息可以持久化了，但性能堪忧","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588080758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1023093,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/75/525e53b1.jpg","nickname":"Hobby","note":"","ucode":"8954830380D44F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1896868,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f1/a4/79c36b87.jpg","nickname":"流云","note":"","ucode":"26C5A9166EC6D8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343942,"discussion_content":"用stream呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611214680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":251334,"ip_address":"","group_id":0},"score":343942,"extra":""}]}]},{"had_liked":false,"id":135455,"user_name":"给我点阳光就灿烂","can_delete":false,"product_type":"c1","uid":1462209,"ip_address":"","ucode":"F3B0439BE0D062","user_header":"https://static001.geekbang.org/account/avatar/00/16/4f/c1/7f596aba.jpg","comment_is_top":false,"comment_ctime":1569165500,"is_pvip":false,"replies":[{"id":51964,"content":"如果你团队都是go语言技术栈，并且对消息队列没有特殊的需求，建议你选用NSQ，原因我在文中也提到过，选一个和自己团队技术栈相同的产品，后续维护成本相对低一些。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1569202565,"ip_address":"","comment_id":135455,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"想咨询一下NSQ这个消息队列究竟怎么样，最近在选Kafka还是NSQ中纠结，golang做的后台是不是更适合选NSQ呢","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478343,"discussion_content":"正确使用Kafka是不会丢数据的，即使Kafka有异步发送、异步刷盘的机制，也可以通过一些配置确保不丢数据。\n\n具体方法请看一下《05 | 如何确保消息不会丢失?》","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576896940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118400,"user_name":"衡子","can_delete":false,"product_type":"c1","uid":1109433,"ip_address":"","ucode":"0AED79FC9D14BB","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/b9/825b2411.jpg","comment_is_top":false,"comment_ctime":1564360673,"is_pvip":false,"replies":[{"id":43375,"content":"可以在有消息堆积能力（支撑可回溯需求）的消息队列里面选择，Kafka和RocketMQ都可以满足这些要求。\n\n关于重复消费的问题，后面我会专门讲到该如何处理。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564364367,"ip_address":"","comment_id":118400,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"在做银行项目，目前还没有引入消息队列，计划要有消息队列来提升性能，个人理解银行项目的可靠性要求高，消息不能丢失，不能重复消费，可回溯，什么队列合适呢？相对而言，是否rocketmq","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460394,"discussion_content":"可以在有消息堆积能力（支撑可回溯需求）的消息队列里面选择，Kafka和RocketMQ都可以满足这些要求。\n\n关于重复消费的问题，后面我会专门讲到该如何处理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564364367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117252,"user_name":"Jaising","can_delete":false,"product_type":"c1","uid":1037630,"ip_address":"","ucode":"F68830B7B90F96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d5/3e/7f3a9c2b.jpg","comment_is_top":false,"comment_ctime":1564015883,"is_pvip":false,"replies":[{"id":42963,"content":"是的，架构设计很多情况下是在做取舍和选择。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564020948,"ip_address":"","comment_id":117252,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"李老师所说的是不是可以按照CAP理论来讲，不同场景总要做出取舍对吧；\n另，目前在线业务使用RocketMQ，做了二次开发的，中文支持不错而且社区响应速度快","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460394,"discussion_content":"可以在有消息堆积能力（支撑可回溯需求）的消息队列里面选择，Kafka和RocketMQ都可以满足这些要求。\n\n关于重复消费的问题，后面我会专门讲到该如何处理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564364367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117213,"user_name":"我知道了嗯","can_delete":false,"product_type":"c1","uid":1138471,"ip_address":"","ucode":"9186EC1F32C490","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/27/a6873bc9.jpg","comment_is_top":false,"comment_ctime":1564011081,"is_pvip":false,"replies":[{"id":46913,"content":"Kafka消费时采用的是拉模式。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521365,"ip_address":"","comment_id":117213,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"kafka是主动发消息给消费者，还是消费者主动来拉消息👀","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459865,"discussion_content":"Kafka消费时采用的是拉模式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566521365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178124,"user_name":"swortect","can_delete":false,"product_type":"c1","uid":1288071,"ip_address":"","ucode":"A8C294E590C1B6","user_header":"https://static001.geekbang.org/account/avatar/00/13/a7/87/4f2fa359.jpg","comment_is_top":false,"comment_ctime":1581592000,"is_pvip":false,"replies":[{"id":69504,"content":"可以考虑一下RabbitMQ：https:&#47;&#47;www.rabbitmq.com&#47;tutorials&#47;tutorial-one-php.html","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1581918671,"ip_address":"","comment_id":178124,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"老师好，看了这节课感觉在线业务上rocketmq比较适合，但是我是php开发的，用rocket了解了一下要装的扩展很多，很多都是第三方自己开发的，生产环境下可能要做很多调整。想请问一下有适合php开发的消息通道么","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483675,"discussion_content":"可以考虑一下RabbitMQ：https://www.rabbitmq.com/tutorials/tutorial-one-php.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581918671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019568,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/b0/ef201991.jpg","nickname":"CcczzZ","note":"","ucode":"5F46DA5053D2BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297011,"discussion_content":"php还是用RabbitMQ方便些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596727471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121223,"user_name":"海罗沃德","can_delete":false,"product_type":"c1","uid":1165364,"ip_address":"","ucode":"8704F1D6980FA0","user_header":"https://static001.geekbang.org/account/avatar/00/11/c8/34/fb871b2c.jpg","comment_is_top":false,"comment_ctime":1565080403,"is_pvip":false,"replies":[{"id":44613,"content":"这个问题已经不是技术问题了，你更多的需要从成本，运维方便程度，后续是否有可能从AWS迁出，这些方面来考虑。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1565138424,"ip_address":"","comment_id":121223,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"AWS的SNS+SQS怎么样？对于使用AWS的系统，云端消息队列和开源消息队列怎么选择？","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461689,"discussion_content":"这个问题已经不是技术问题了，你更多的需要从成本，运维方便程度，后续是否有可能从AWS迁出，这些方面来考虑。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565138424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548575,"discussion_content":"那么，AWS的SNS+SQS与主流消息队列个方面对比是怎样的呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643268601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120903,"user_name":"竺芯","can_delete":false,"product_type":"c1","uid":1515371,"ip_address":"","ucode":"B2CC13C9BD2D23","user_header":"https://static001.geekbang.org/account/avatar/00/17/1f/6b/3ac8903e.jpg","comment_is_top":false,"comment_ctime":1565011460,"is_pvip":false,"replies":[{"id":44472,"content":"音频","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1565054665,"ip_address":"","comment_id":120903,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"这是视频还是语音？","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461689,"discussion_content":"这个问题已经不是技术问题了，你更多的需要从成本，运维方便程度，后续是否有可能从AWS迁出，这些方面来考虑。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565138424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548575,"discussion_content":"那么，AWS的SNS+SQS与主流消息队列个方面对比是怎样的呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643268601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117499,"user_name":"明不二","can_delete":false,"product_type":"c1","uid":1106160,"ip_address":"","ucode":"621B6A8B932095","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/f0/5a29e705.jpg","comment_is_top":false,"comment_ctime":1564061740,"is_pvip":false,"replies":[{"id":43097,"content":"据我了解，新版的Redis支持 Pub&#47;Sub功能，但它只是一个“支持Pub&#47;Sub功能的KV Store”，对于消息这块儿，它和主流的消息队列比，无论是功能、性能还是扩展性方面都是有很多差异的。但也不意味着你不能选择Redis用于收发消息，比如你现在的业务重度依赖Redis，你正好有一些Pub&#47;Sub的需求，Redis也能满足，那就没必要专门再上一套MQ集群。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108151,"ip_address":"","comment_id":117499,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"现在项目里主要还是使用 kafka，对 kafka 的访问接口进行了二次封装，便于业务团队使用。同时，在一些轻量级场景下，项目正在考虑使用 redis 提供的 mq 功能实现消息队列。老师能讲讲 redis mq 在使用上的优缺点不？","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461523,"discussion_content":"音频","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565054665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117225,"user_name":"永钱","can_delete":false,"product_type":"c1","uid":1057123,"ip_address":"","ucode":"E758406EA4E23B","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/63/f47576e1.jpg","comment_is_top":false,"comment_ctime":1564012636,"is_pvip":false,"replies":[{"id":42947,"content":"Pulsar会经常举行一些MeetUp，可以参与一下。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019470,"ip_address":"","comment_id":117225,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"Pulsar,看好它","like_count":1},{"had_liked":false,"id":214808,"user_name":"grey927","can_delete":false,"product_type":"c1","uid":1202782,"ip_address":"","ucode":"833E02ED835B4A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/5e/a897cb0d.jpg","comment_is_top":false,"comment_ctime":1588822583,"is_pvip":false,"replies":[{"id":79932,"content":"这是一个队列的库，虽然功能有一些相似，但使用场景和消息队列是不一样的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1589170500,"ip_address":"","comment_id":214808,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"李老师，你是如何评价Disruptor这个MQ队列的？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459869,"discussion_content":"Pulsar会经常举行一些MeetUp，可以参与一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149352,"user_name":"超级马里骜","can_delete":false,"product_type":"c1","uid":1440399,"ip_address":"","ucode":"DAA2C0E2878D94","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epJAVzcic6EjMPRaamustQCLxNFgjpmze7Dcnyn8gmUxkXzhSzI39xvP3N3QiaYyVTn2MDiauuylGoqQ/132","comment_is_top":false,"comment_ctime":1573200294,"is_pvip":false,"replies":[{"id":57590,"content":"几乎所有的MQ都可以实现竞争消费，这些最基本的MQ功能各种消息队列都具备。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1573347195,"ip_address":"","comment_id":149352,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"请问下，我需要竞争消费可以用哪种呢？我目前看来只有activemq支持","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494207,"discussion_content":"这是一个队列的库，虽然功能有一些相似，但使用场景和消息队列是不一样的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589170500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"凯文小猪","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399476,"discussion_content":"disruptor是本地队列 用于高吞吐量下的线程一致性 性能优于JDK自带的Queue。但它本身不是消息队列","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632972934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132994,"user_name":"天晴录","can_delete":false,"product_type":"c1","uid":1656786,"ip_address":"","ucode":"E27A5909F2A67C","user_header":"https://static001.geekbang.org/account/avatar/00/19/47/d2/5a49bbfb.jpg","comment_is_top":false,"comment_ctime":1568294796,"is_pvip":false,"replies":[{"id":50952,"content":"redis 是一个kv存储系统，和消息队列的功能是不一样的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1568339526,"ip_address":"","comment_id":132994,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"老师，新人想请问一下：redis跟消息队列的关系，redis不也是开源的吗？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473828,"discussion_content":"几乎所有的MQ都可以实现竞争消费，这些最基本的MQ功能各种消息队列都具备。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573347195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440399,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epJAVzcic6EjMPRaamustQCLxNFgjpmze7Dcnyn8gmUxkXzhSzI39xvP3N3QiaYyVTn2MDiauuylGoqQ/132","nickname":"超级马里骜","note":"","ucode":"DAA2C0E2878D94","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47403,"discussion_content":"您好，再请教下，有没有可以拉取的消息中间价","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573347271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132822,"user_name":"何永鹏","can_delete":false,"product_type":"c1","uid":1019925,"ip_address":"","ucode":"3BF6CD283D1269","user_header":"/0","comment_is_top":false,"comment_ctime":1568247844,"is_pvip":false,"replies":[{"id":50887,"content":"我不太了解这个消息队列，所以没办法帮到你。如果你感兴趣，可以研究一下它的文档和源代码，也欢迎你在这里分享你的研究成果。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1568252186,"ip_address":"","comment_id":132822,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"请问老师，如何评价 NATS 呢？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467206,"discussion_content":"redis 是一个kv存储系统，和消息队列的功能是不一样的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568339526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125489,"user_name":"👻 小二","can_delete":false,"product_type":"c1","uid":1625463,"ip_address":"","ucode":"9EEA8553163270","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/77/b2ab5d44.jpg","comment_is_top":false,"comment_ctime":1566192836,"is_pvip":false,"replies":[{"id":46216,"content":"这个没法统一给出答案，涉及的变量太多，消息的大小，集群配置的方式、服务器的配置、同步异步发送、是否开启压缩、客户端的并发数量等等都会很大的影响实际的tps。\n\n但一般来说，如果不考虑集群，10w以下tps，应该单个Broker就差不多可以满足。\n\n","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566264421,"ip_address":"","comment_id":125489,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"老师， 能在资源占用方面讲一下rabbitmq、rocketmq、kafka的区别吗？比如1w tps， 大概要多少节点多少配置， 10w要多少","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467135,"discussion_content":"我不太了解这个消息队列，所以没办法帮到你。如果你感兴趣，可以研究一下它的文档和源代码，也欢迎你在这里分享你的研究成果。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568252186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120719,"user_name":"庄小P","can_delete":false,"product_type":"c1","uid":1489063,"ip_address":"","ucode":"A71FA01F713790","user_header":"","comment_is_top":false,"comment_ctime":1564982470,"is_pvip":false,"replies":[{"id":44341,"content":"你是指用C++实现的，还是支持C++客户端的消息队列呢？\n\n如果是后者，很多消息队列都支持使用C++语言接入。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564989972,"ip_address":"","comment_id":120719,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"请问老师有没有用c++的消息队列呢","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463582,"discussion_content":"这个没法统一给出答案，涉及的变量太多，消息的大小，集群配置的方式、服务器的配置、同步异步发送、是否开启压缩、客户端的并发数量等等都会很大的影响实际的tps。\n\n但一般来说，如果不考虑集群，10w以下tps，应该单个Broker就差不多可以满足。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566264421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120201,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1564805813,"is_pvip":false,"replies":[{"id":44179,"content":"AMQ可以用订阅的方式变相来实现。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564891199,"ip_address":"","comment_id":120201,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"目前使用RabbitMQ，基本满足业务需求，系统对实时要求不是很高，很喜欢它的一个路由多个队列监听的功能，可以通过队列名区分不同的业务。请问老师，ActiveMQ能实现这个功能吗？（以前系统用这个所以好奇问问）","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461446,"discussion_content":"你是指用C++实现的，还是支持C++客户端的消息队列呢？\n\n如果是后者，很多消息队列都支持使用C++语言接入。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564989972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119748,"user_name":"年强","can_delete":false,"product_type":"c1","uid":1368168,"ip_address":"","ucode":"CDBAA296978FB0","user_header":"https://static001.geekbang.org/account/avatar/00/14/e0/68/bc5956b9.jpg","comment_is_top":false,"comment_ctime":1564672497,"is_pvip":false,"replies":[{"id":46916,"content":"应该是丢消息的问题。后面我们会有专门的课程来讲如何确保不丢消息。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521478,"ip_address":"","comment_id":119748,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"您好，请问在mq中 最容易出问题或者是最重要的点应该在哪里","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461236,"discussion_content":"AMQ可以用订阅的方式变相来实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564891199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119694,"user_name":"X-Cat","can_delete":false,"product_type":"c1","uid":1502831,"ip_address":"","ucode":"D551FCFD8E4B78","user_header":"https://static001.geekbang.org/account/avatar/00/16/ee/6f/981ee976.jpg","comment_is_top":false,"comment_ctime":1564654871,"is_pvip":false,"replies":[{"id":46915,"content":"不会只讲某一种MQ的，而是以讲解原理和技术为主。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521434,"ip_address":"","comment_id":119694,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"你好，在这个课程中会教我们应用一种MQ吗？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461052,"discussion_content":"应该是丢消息的问题。后面我们会有专门的课程来讲如何确保不丢消息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566521478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117225,"user_name":"永钱","can_delete":false,"product_type":"c1","uid":1057123,"ip_address":"","ucode":"E758406EA4E23B","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/63/f47576e1.jpg","comment_is_top":false,"comment_ctime":1564012636,"is_pvip":false,"replies":[{"id":42947,"content":"Pulsar会经常举行一些MeetUp，可以参与一下。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019470,"ip_address":"","comment_id":117225,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"Pulsar,看好它","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459869,"discussion_content":"Pulsar会经常举行一些MeetUp，可以参与一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214808,"user_name":"grey927","can_delete":false,"product_type":"c1","uid":1202782,"ip_address":"","ucode":"833E02ED835B4A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/5e/a897cb0d.jpg","comment_is_top":false,"comment_ctime":1588822583,"is_pvip":false,"replies":[{"id":79932,"content":"这是一个队列的库，虽然功能有一些相似，但使用场景和消息队列是不一样的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1589170500,"ip_address":"","comment_id":214808,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"李老师，你是如何评价Disruptor这个MQ队列的？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494207,"discussion_content":"这是一个队列的库，虽然功能有一些相似，但使用场景和消息队列是不一样的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589170500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"凯文小猪","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399476,"discussion_content":"disruptor是本地队列 用于高吞吐量下的线程一致性 性能优于JDK自带的Queue。但它本身不是消息队列","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632972934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149352,"user_name":"超级马里骜","can_delete":false,"product_type":"c1","uid":1440399,"ip_address":"","ucode":"DAA2C0E2878D94","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epJAVzcic6EjMPRaamustQCLxNFgjpmze7Dcnyn8gmUxkXzhSzI39xvP3N3QiaYyVTn2MDiauuylGoqQ/132","comment_is_top":false,"comment_ctime":1573200294,"is_pvip":false,"replies":[{"id":57590,"content":"几乎所有的MQ都可以实现竞争消费，这些最基本的MQ功能各种消息队列都具备。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1573347195,"ip_address":"","comment_id":149352,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"请问下，我需要竞争消费可以用哪种呢？我目前看来只有activemq支持","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473828,"discussion_content":"几乎所有的MQ都可以实现竞争消费，这些最基本的MQ功能各种消息队列都具备。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573347195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440399,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epJAVzcic6EjMPRaamustQCLxNFgjpmze7Dcnyn8gmUxkXzhSzI39xvP3N3QiaYyVTn2MDiauuylGoqQ/132","nickname":"超级马里骜","note":"","ucode":"DAA2C0E2878D94","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47403,"discussion_content":"您好，再请教下，有没有可以拉取的消息中间价","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573347271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132994,"user_name":"天晴录","can_delete":false,"product_type":"c1","uid":1656786,"ip_address":"","ucode":"E27A5909F2A67C","user_header":"https://static001.geekbang.org/account/avatar/00/19/47/d2/5a49bbfb.jpg","comment_is_top":false,"comment_ctime":1568294796,"is_pvip":false,"replies":[{"id":50952,"content":"redis 是一个kv存储系统，和消息队列的功能是不一样的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1568339526,"ip_address":"","comment_id":132994,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"老师，新人想请问一下：redis跟消息队列的关系，redis不也是开源的吗？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467206,"discussion_content":"redis 是一个kv存储系统，和消息队列的功能是不一样的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568339526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132822,"user_name":"何永鹏","can_delete":false,"product_type":"c1","uid":1019925,"ip_address":"","ucode":"3BF6CD283D1269","user_header":"/0","comment_is_top":false,"comment_ctime":1568247844,"is_pvip":false,"replies":[{"id":50887,"content":"我不太了解这个消息队列，所以没办法帮到你。如果你感兴趣，可以研究一下它的文档和源代码，也欢迎你在这里分享你的研究成果。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1568252186,"ip_address":"","comment_id":132822,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"请问老师，如何评价 NATS 呢？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467135,"discussion_content":"我不太了解这个消息队列，所以没办法帮到你。如果你感兴趣，可以研究一下它的文档和源代码，也欢迎你在这里分享你的研究成果。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568252186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125489,"user_name":"👻 小二","can_delete":false,"product_type":"c1","uid":1625463,"ip_address":"","ucode":"9EEA8553163270","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/77/b2ab5d44.jpg","comment_is_top":false,"comment_ctime":1566192836,"is_pvip":false,"replies":[{"id":46216,"content":"这个没法统一给出答案，涉及的变量太多，消息的大小，集群配置的方式、服务器的配置、同步异步发送、是否开启压缩、客户端的并发数量等等都会很大的影响实际的tps。\n\n但一般来说，如果不考虑集群，10w以下tps，应该单个Broker就差不多可以满足。\n\n","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566264421,"ip_address":"","comment_id":125489,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"老师， 能在资源占用方面讲一下rabbitmq、rocketmq、kafka的区别吗？比如1w tps， 大概要多少节点多少配置， 10w要多少","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463582,"discussion_content":"这个没法统一给出答案，涉及的变量太多，消息的大小，集群配置的方式、服务器的配置、同步异步发送、是否开启压缩、客户端的并发数量等等都会很大的影响实际的tps。\n\n但一般来说，如果不考虑集群，10w以下tps，应该单个Broker就差不多可以满足。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566264421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120719,"user_name":"庄小P","can_delete":false,"product_type":"c1","uid":1489063,"ip_address":"","ucode":"A71FA01F713790","user_header":"","comment_is_top":false,"comment_ctime":1564982470,"is_pvip":false,"replies":[{"id":44341,"content":"你是指用C++实现的，还是支持C++客户端的消息队列呢？\n\n如果是后者，很多消息队列都支持使用C++语言接入。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564989972,"ip_address":"","comment_id":120719,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"请问老师有没有用c++的消息队列呢","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461446,"discussion_content":"你是指用C++实现的，还是支持C++客户端的消息队列呢？\n\n如果是后者，很多消息队列都支持使用C++语言接入。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564989972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120201,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1564805813,"is_pvip":false,"replies":[{"id":44179,"content":"AMQ可以用订阅的方式变相来实现。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564891199,"ip_address":"","comment_id":120201,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"目前使用RabbitMQ，基本满足业务需求，系统对实时要求不是很高，很喜欢它的一个路由多个队列监听的功能，可以通过队列名区分不同的业务。请问老师，ActiveMQ能实现这个功能吗？（以前系统用这个所以好奇问问）","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461236,"discussion_content":"AMQ可以用订阅的方式变相来实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564891199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119748,"user_name":"年强","can_delete":false,"product_type":"c1","uid":1368168,"ip_address":"","ucode":"CDBAA296978FB0","user_header":"https://static001.geekbang.org/account/avatar/00/14/e0/68/bc5956b9.jpg","comment_is_top":false,"comment_ctime":1564672497,"is_pvip":false,"replies":[{"id":46916,"content":"应该是丢消息的问题。后面我们会有专门的课程来讲如何确保不丢消息。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521478,"ip_address":"","comment_id":119748,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"您好，请问在mq中 最容易出问题或者是最重要的点应该在哪里","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461052,"discussion_content":"应该是丢消息的问题。后面我们会有专门的课程来讲如何确保不丢消息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566521478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119694,"user_name":"X-Cat","can_delete":false,"product_type":"c1","uid":1502831,"ip_address":"","ucode":"D551FCFD8E4B78","user_header":"https://static001.geekbang.org/account/avatar/00/16/ee/6f/981ee976.jpg","comment_is_top":false,"comment_ctime":1564654871,"is_pvip":false,"replies":[{"id":46915,"content":"不会只讲某一种MQ的，而是以讲解原理和技术为主。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521434,"ip_address":"","comment_id":119694,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"你好，在这个课程中会教我们应用一种MQ吗？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461021,"discussion_content":"不会只讲某一种MQ的，而是以讲解原理和技术为主。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566521434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119692,"user_name":"星帆","can_delete":false,"product_type":"c1","uid":1199415,"ip_address":"","ucode":"40BB9C3088699D","user_header":"https://static001.geekbang.org/account/avatar/00/12/4d/37/d6359a78.jpg","comment_is_top":false,"comment_ctime":1564653834,"is_pvip":false,"replies":[{"id":46914,"content":"说说你的具体需求？","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521397,"ip_address":"","comment_id":119692,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"iot有推荐的吗消息中间件那","like_count":0},{"had_liked":false,"id":119410,"user_name":"努力奋斗的Pisces","can_delete":false,"product_type":"c1","uid":1336441,"ip_address":"","ucode":"AD4F8909CF190A","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/79/f1e1ca76.jpg","comment_is_top":false,"comment_ctime":1564580749,"is_pvip":false,"replies":[{"id":43853,"content":"批量也是保证顺序的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564627350,"ip_address":"","comment_id":119410,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"老师，kafka是批量发送的话，对于处理多个消息处理一个业务的时候是不是会出现先后顺序的问题","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461020,"discussion_content":"说说你的具体需求？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566521397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114772,"avatar":"https://static001.geekbang.org/account/avatar/00/11/02/94/abb7bfe3.jpg","nickname":"Geek_wip5z8","note":"","ucode":"2F075AC7E3847D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533526,"discussion_content":"可以实时了解下emqx这个消息队列","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637894884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118997,"user_name":"黑色的眼睛黑色的夜","can_delete":false,"product_type":"c1","uid":1564650,"ip_address":"","ucode":"16F521AC3398A4","user_header":"https://static001.geekbang.org/account/avatar/00/17/df/ea/6ac330b8.jpg","comment_is_top":false,"comment_ctime":1564482290,"is_pvip":false,"replies":[{"id":43726,"content":"我们大部分课讲得都是消息队列通用原理，当然包括RabbitMQ等比较流行的消息队列都会涉及到。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564539640,"ip_address":"","comment_id":118997,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"老师会讲rabbitmq相关的知识不？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460892,"discussion_content":"批量也是保证顺序的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564627350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118661,"user_name":"DaysJan","can_delete":false,"product_type":"c1","uid":1119236,"ip_address":"","ucode":"5313A48DB71044","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/04/9de4e5c6.jpg","comment_is_top":false,"comment_ctime":1564408516,"is_pvip":false,"replies":[{"id":43533,"content":"beanstalkd主要的功能应该是做任务调度。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564450251,"ip_address":"","comment_id":118661,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"老师可以聊一下 Beanstalk 吗？任务队列和消息队列有哪些区别？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460703,"discussion_content":"我们大部分课讲得都是消息队列通用原理，当然包括RabbitMQ等比较流行的消息队列都会涉及到。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564539640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117735,"user_name":"Geek_zbvt62","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg","comment_is_top":false,"comment_ctime":1564122265,"is_pvip":false,"replies":[{"id":43130,"content":"和我们测试的结论差不多。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564130704,"ip_address":"","comment_id":117735,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"之前使用rabbitmq，后来因为吞吐量的问题就换了，目前已经有90%迁移到rocketmq上来了。\n当初考量rocketmq和kafka，最终选了rocketmq，主要是考虑rocketmq用java写的源码比较容易看懂，另外支持一些独特的功能比如事务消息，定时消息。\n另外还有一点是被rocketmq的介绍打动，其宣称“kafka在topic特别多的情况下性能会有大幅度下降而rocketmq依然坚挺”，并附上很测试结果（全网可搜）。不知道老师对这个结论有什么看法？\n","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460513,"discussion_content":"beanstalkd主要的功能应该是做任务调度。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564450251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117530,"user_name":"Hxd","can_delete":false,"product_type":"c1","uid":1357303,"ip_address":"","ucode":"B8B04AA5738CC9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKg3ia2DDFuGLZRtHw6to43icxKyia1eHbxTUh1CY1dSuTp5WmQN01A1aLAia1lkaR8EAkXD4h76n8Bog/132","comment_is_top":false,"comment_ctime":1564067906,"is_pvip":false,"replies":[{"id":43098,"content":"抱歉这个我不了解。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108474,"ip_address":"","comment_id":117530,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"作者您好，请问MetaQ和RocketMQ是同一种吗？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460100,"discussion_content":"和我们测试的结论差不多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564130704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053192,"avatar":"https://static001.geekbang.org/account/avatar/00/10/12/08/abb7bfe3.jpg","nickname":"roger","note":"","ucode":"A4C01B958183F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3153,"discussion_content":"特别多是什么量级呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564229328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1051102,"avatar":"https://static001.geekbang.org/account/avatar/00/10/09/de/55cc6c2f.jpg","nickname":"大树","note":"","ucode":"53768ABF0013E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053192,"avatar":"https://static001.geekbang.org/account/avatar/00/10/12/08/abb7bfe3.jpg","nickname":"roger","note":"","ucode":"A4C01B958183F2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7511,"discussion_content":"同问😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567522398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3153,"ip_address":"","group_id":0},"score":7511,"extra":""}]}]},{"had_liked":false,"id":117527,"user_name":"Geek_xbye50","can_delete":false,"product_type":"c1","uid":1006424,"ip_address":"","ucode":"0BF3780C247F22","user_header":"","comment_is_top":false,"comment_ctime":1564067640,"is_pvip":false,"replies":[{"id":43100,"content":"我们会有一节课专门介绍Pulsar。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108720,"ip_address":"","comment_id":117527,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"其实在做技术选型的时候也需要从运维的角度去考量，因为毕竟引入一个新的组件的是需要学习成本以及运维成本的。还有老师后面可否给我们多多分享下Pulsar","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460010,"discussion_content":"我们会有一节课专门介绍Pulsar。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564108720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117517,"user_name":"不能扮演天使","can_delete":false,"product_type":"c1","uid":1046172,"ip_address":"","ucode":"9922330BFF7FFB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/9c/b457a937.jpg","comment_is_top":false,"comment_ctime":1564065191,"is_pvip":false,"replies":[{"id":43099,"content":"早期的Kafka它是为处理海量日志而设计的，这个场景下，它注重的是吞吐量，少量的日志丢失对业务来说不是问题。所以它设计层面就没有可靠性保证，换取的是超高的吞吐量。\n\n但是现在的Kafka已经有非常完善的数据可靠性保证机制，正确的配置和使用就不会丢消息。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108675,"ip_address":"","comment_id":117517,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"这些消息队列丟消息的原因是啥，比如说kafka为啥会丟消息，又是怎么改进的？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460006,"discussion_content":"早期的Kafka它是为处理海量日志而设计的，这个场景下，它注重的是吞吐量，少量的日志丢失对业务来说不是问题。所以它设计层面就没有可靠性保证，换取的是超高的吞吐量。\n\n但是现在的Kafka已经有非常完善的数据可靠性保证机制，正确的配置和使用就不会丢消息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564108675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117459,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1564052165,"is_pvip":false,"replies":[{"id":43090,"content":"在确保消息有序性这块儿，Kafka和RocketMQ的实现基本是一样的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564106423,"ip_address":"","comment_id":117459,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"1.经历了公司从RabbitMQ迁移到RocketMQ，感觉应该是从性能和稳定性上的考虑（公司业务在快速发展）\n2.业务流程数据原先计划使用RocketMQ来将业务数据同步到ES中，需要保证消息的有序性，原先计划使用公司封装的RocketMQ，但是做不到顺序消费（集群情况下），改用了kafka\n3.现在使用kafka感觉有延迟，有时候还挺明显","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459981,"discussion_content":"在确保消息有序性这块儿，Kafka和RocketMQ的实现基本是一样的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564106423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1364034,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","nickname":"我已经设置了昵称","note":"","ucode":"ED672C5EBDBDC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3111,"discussion_content":"顺序消息kafka只取同一个patition的数据就可以保证，rocketMQ按照老师说的应该是同一个queue","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564196761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1100149,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c9/75/62ce2d69.jpg","nickname":"猿人谷","note":"","ucode":"85106C7FB14C43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2950,"discussion_content":"我司用rabbitmq也遇到消息的有序性无法保证的问题，通过在业务层面去弥补，终究不是种好方案。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564059188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117447,"user_name":"Geek_53fdc0","can_delete":false,"product_type":"c1","uid":1613161,"ip_address":"","ucode":"AC791BEE2D03C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIqdDwaegnfzFbkibAdmyXh8EVI5No2MESZa0D1Y2QePDdhBVvug11Qbx7y3yFE4fVtrMn56Oeu3SQ/132","comment_is_top":false,"comment_ctime":1564048788,"is_pvip":false,"replies":[{"id":43089,"content":"这个是相对Kafka来说的。微妙级的响应时延基本上只存在于实验室里。真正在生产环境，在比较好的IDC内内网中，一般网络时延能做到500-1000us已经很不错了，再加上Broker本身处理的时延，能做到1ms左右的时延已经是非常理想了，所以，我的观点是，不用纠结到底是微妙级还是毫秒级。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564106335,"ip_address":"","comment_id":117447,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"请问rabbitmq的响应延时不是微秒级别吗？为啥考虑延时问题会选择rocketmq","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459981,"discussion_content":"在确保消息有序性这块儿，Kafka和RocketMQ的实现基本是一样的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564106423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1364034,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","nickname":"我已经设置了昵称","note":"","ucode":"ED672C5EBDBDC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3111,"discussion_content":"顺序消息kafka只取同一个patition的数据就可以保证，rocketMQ按照老师说的应该是同一个queue","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564196761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1100149,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c9/75/62ce2d69.jpg","nickname":"猿人谷","note":"","ucode":"85106C7FB14C43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2950,"discussion_content":"我司用rabbitmq也遇到消息的有序性无法保证的问题，通过在业务层面去弥补，终究不是种好方案。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564059188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119692,"user_name":"星帆","can_delete":false,"product_type":"c1","uid":1199415,"ip_address":"","ucode":"40BB9C3088699D","user_header":"https://static001.geekbang.org/account/avatar/00/12/4d/37/d6359a78.jpg","comment_is_top":false,"comment_ctime":1564653834,"is_pvip":false,"replies":[{"id":46914,"content":"说说你的具体需求？","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566521397,"ip_address":"","comment_id":119692,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"iot有推荐的吗消息中间件那","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461020,"discussion_content":"说说你的具体需求？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566521397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114772,"avatar":"https://static001.geekbang.org/account/avatar/00/11/02/94/abb7bfe3.jpg","nickname":"Geek_wip5z8","note":"","ucode":"2F075AC7E3847D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533526,"discussion_content":"可以实时了解下emqx这个消息队列","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637894884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119410,"user_name":"努力奋斗的Pisces","can_delete":false,"product_type":"c1","uid":1336441,"ip_address":"","ucode":"AD4F8909CF190A","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/79/f1e1ca76.jpg","comment_is_top":false,"comment_ctime":1564580749,"is_pvip":false,"replies":[{"id":43853,"content":"批量也是保证顺序的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564627350,"ip_address":"","comment_id":119410,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"老师，kafka是批量发送的话，对于处理多个消息处理一个业务的时候是不是会出现先后顺序的问题","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460892,"discussion_content":"批量也是保证顺序的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564627350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118997,"user_name":"黑色的眼睛黑色的夜","can_delete":false,"product_type":"c1","uid":1564650,"ip_address":"","ucode":"16F521AC3398A4","user_header":"https://static001.geekbang.org/account/avatar/00/17/df/ea/6ac330b8.jpg","comment_is_top":false,"comment_ctime":1564482290,"is_pvip":false,"replies":[{"id":43726,"content":"我们大部分课讲得都是消息队列通用原理，当然包括RabbitMQ等比较流行的消息队列都会涉及到。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564539640,"ip_address":"","comment_id":118997,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"老师会讲rabbitmq相关的知识不？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460703,"discussion_content":"我们大部分课讲得都是消息队列通用原理，当然包括RabbitMQ等比较流行的消息队列都会涉及到。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564539640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118661,"user_name":"DaysJan","can_delete":false,"product_type":"c1","uid":1119236,"ip_address":"","ucode":"5313A48DB71044","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/04/9de4e5c6.jpg","comment_is_top":false,"comment_ctime":1564408516,"is_pvip":false,"replies":[{"id":43533,"content":"beanstalkd主要的功能应该是做任务调度。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564450251,"ip_address":"","comment_id":118661,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"老师可以聊一下 Beanstalk 吗？任务队列和消息队列有哪些区别？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460513,"discussion_content":"beanstalkd主要的功能应该是做任务调度。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564450251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117735,"user_name":"Geek_zbvt62","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg","comment_is_top":false,"comment_ctime":1564122265,"is_pvip":false,"replies":[{"id":43130,"content":"和我们测试的结论差不多。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564130704,"ip_address":"","comment_id":117735,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"之前使用rabbitmq，后来因为吞吐量的问题就换了，目前已经有90%迁移到rocketmq上来了。\n当初考量rocketmq和kafka，最终选了rocketmq，主要是考虑rocketmq用java写的源码比较容易看懂，另外支持一些独特的功能比如事务消息，定时消息。\n另外还有一点是被rocketmq的介绍打动，其宣称“kafka在topic特别多的情况下性能会有大幅度下降而rocketmq依然坚挺”，并附上很测试结果（全网可搜）。不知道老师对这个结论有什么看法？\n","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460100,"discussion_content":"和我们测试的结论差不多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564130704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053192,"avatar":"https://static001.geekbang.org/account/avatar/00/10/12/08/abb7bfe3.jpg","nickname":"roger","note":"","ucode":"A4C01B958183F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3153,"discussion_content":"特别多是什么量级呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564229328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1051102,"avatar":"https://static001.geekbang.org/account/avatar/00/10/09/de/55cc6c2f.jpg","nickname":"大树","note":"","ucode":"53768ABF0013E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053192,"avatar":"https://static001.geekbang.org/account/avatar/00/10/12/08/abb7bfe3.jpg","nickname":"roger","note":"","ucode":"A4C01B958183F2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7511,"discussion_content":"同问😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567522398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3153,"ip_address":"","group_id":0},"score":7511,"extra":""}]}]},{"had_liked":false,"id":117530,"user_name":"Hxd","can_delete":false,"product_type":"c1","uid":1357303,"ip_address":"","ucode":"B8B04AA5738CC9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKg3ia2DDFuGLZRtHw6to43icxKyia1eHbxTUh1CY1dSuTp5WmQN01A1aLAia1lkaR8EAkXD4h76n8Bog/132","comment_is_top":false,"comment_ctime":1564067906,"is_pvip":false,"replies":[{"id":43098,"content":"抱歉这个我不了解。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108474,"ip_address":"","comment_id":117530,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"作者您好，请问MetaQ和RocketMQ是同一种吗？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460011,"discussion_content":"抱歉这个我不了解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564108474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000985,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/19/8497686b.jpg","nickname":"张和祥","note":"","ucode":"AFFCA32CA6C166","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3129,"discussion_content":"RocketMQ是MetaQ的升级版本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564206300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117527,"user_name":"Geek_xbye50","can_delete":false,"product_type":"c1","uid":1006424,"ip_address":"","ucode":"0BF3780C247F22","user_header":"","comment_is_top":false,"comment_ctime":1564067640,"is_pvip":false,"replies":[{"id":43100,"content":"我们会有一节课专门介绍Pulsar。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108720,"ip_address":"","comment_id":117527,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"其实在做技术选型的时候也需要从运维的角度去考量，因为毕竟引入一个新的组件的是需要学习成本以及运维成本的。还有老师后面可否给我们多多分享下Pulsar","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460011,"discussion_content":"抱歉这个我不了解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564108474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000985,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/19/8497686b.jpg","nickname":"张和祥","note":"","ucode":"AFFCA32CA6C166","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3129,"discussion_content":"RocketMQ是MetaQ的升级版本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564206300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117517,"user_name":"不能扮演天使","can_delete":false,"product_type":"c1","uid":1046172,"ip_address":"","ucode":"9922330BFF7FFB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/9c/b457a937.jpg","comment_is_top":false,"comment_ctime":1564065191,"is_pvip":false,"replies":[{"id":43099,"content":"早期的Kafka它是为处理海量日志而设计的，这个场景下，它注重的是吞吐量，少量的日志丢失对业务来说不是问题。所以它设计层面就没有可靠性保证，换取的是超高的吞吐量。\n\n但是现在的Kafka已经有非常完善的数据可靠性保证机制，正确的配置和使用就不会丢消息。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564108675,"ip_address":"","comment_id":117517,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"这些消息队列丟消息的原因是啥，比如说kafka为啥会丟消息，又是怎么改进的？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460010,"discussion_content":"我们会有一节课专门介绍Pulsar。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564108720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117459,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1564052165,"is_pvip":false,"replies":[{"id":43090,"content":"在确保消息有序性这块儿，Kafka和RocketMQ的实现基本是一样的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564106423,"ip_address":"","comment_id":117459,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"1.经历了公司从RabbitMQ迁移到RocketMQ，感觉应该是从性能和稳定性上的考虑（公司业务在快速发展）\n2.业务流程数据原先计划使用RocketMQ来将业务数据同步到ES中，需要保证消息的有序性，原先计划使用公司封装的RocketMQ，但是做不到顺序消费（集群情况下），改用了kafka\n3.现在使用kafka感觉有延迟，有时候还挺明显","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460006,"discussion_content":"早期的Kafka它是为处理海量日志而设计的，这个场景下，它注重的是吞吐量，少量的日志丢失对业务来说不是问题。所以它设计层面就没有可靠性保证，换取的是超高的吞吐量。\n\n但是现在的Kafka已经有非常完善的数据可靠性保证机制，正确的配置和使用就不会丢消息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564108675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117447,"user_name":"Geek_53fdc0","can_delete":false,"product_type":"c1","uid":1613161,"ip_address":"","ucode":"AC791BEE2D03C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIqdDwaegnfzFbkibAdmyXh8EVI5No2MESZa0D1Y2QePDdhBVvug11Qbx7y3yFE4fVtrMn56Oeu3SQ/132","comment_is_top":false,"comment_ctime":1564048788,"is_pvip":false,"replies":[{"id":43089,"content":"这个是相对Kafka来说的。微妙级的响应时延基本上只存在于实验室里。真正在生产环境，在比较好的IDC内内网中，一般网络时延能做到500-1000us已经很不错了，再加上Broker本身处理的时延，能做到1ms左右的时延已经是非常理想了，所以，我的观点是，不用纠结到底是微妙级还是毫秒级。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564106335,"ip_address":"","comment_id":117447,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"请问rabbitmq的响应延时不是微秒级别吗？为啥考虑延时问题会选择rocketmq","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459975,"discussion_content":"这个是相对Kafka来说的。微妙级的响应时延基本上只存在于实验室里。真正在生产环境，在比较好的IDC内内网中，一般网络时延能做到500-1000us已经很不错了，再加上Broker本身处理的时延，能做到1ms左右的时延已经是非常理想了，所以，我的观点是，不用纠结到底是微妙级还是毫秒级。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564106335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"凯文小猪","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399479,"discussion_content":"网络通信本身就要占用几个ms 所以1ms在实际生产下没有必要特意要求 这种场景不是没有 只不过我们大多数不需要达到工业级标准。\n其实50ms-100ms对用户来说响应是非常快的 而这个时间范围对我们来说刚刚好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632973168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117436,"user_name":"梨还羽","can_delete":false,"product_type":"c1","uid":1243267,"ip_address":"","ucode":"F6C89EF10DFC89","user_header":"https://static001.geekbang.org/account/avatar/00/12/f8/83/008b7b58.jpg","comment_is_top":false,"comment_ctime":1564046795,"is_pvip":false,"replies":[{"id":43083,"content":"我们可以一起学习一下，从官方给出的性能测试结果来看，和主流的消息队列性能还是有差距。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564105972,"ip_address":"","comment_id":117436,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"NSQ如何呢，基于golang开发的","like_count":0},{"had_liked":false,"id":117367,"user_name":"jack","can_delete":false,"product_type":"c1","uid":1612614,"ip_address":"","ucode":"5A26761299F7AC","user_header":"https://static001.geekbang.org/account/avatar/00/18/9b/46/ad3194bd.jpg","comment_is_top":false,"comment_ctime":1564034377,"is_pvip":false,"replies":[{"id":43077,"content":"Kafka内部采用的是批消息集群，每批中有多少条消息，是在Producer决定的，决定每批中有多少消息，主要是在Producer中的2个参数来控制的：linger.ms and batch.size","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564105205,"ip_address":"","comment_id":117367,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"老师，我在使用kafka的时候，没有发现您说的“攒一会儿再发送”，而是生产者很快将消息发送出去，消费者每次只消费很少的数据，设置过几个参数都不起作用，怎么设置批量消费呢？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459932,"discussion_content":"Kafka内部采用的是批消息集群，每批中有多少条消息，是在Producer决定的，决定每批中有多少消息，主要是在Producer中的2个参数来控制的：linger.ms and batch.size","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564105205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117327,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/65c7e3ef.jpg","comment_is_top":false,"comment_ctime":1564024393,"is_pvip":false,"replies":[{"id":42976,"content":"这个问题有点儿大，可以说一下具体的场景。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564034128,"ip_address":"","comment_id":117327,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"有没有一种MQ是可以通过参数配置来改变CAP属性的？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459932,"discussion_content":"Kafka内部采用的是批消息集群，每批中有多少条消息，是在Producer决定的，决定每批中有多少消息，主要是在Producer中的2个参数来控制的：linger.ms and batch.size","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564105205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117287,"user_name":"木小柒","can_delete":false,"product_type":"c1","uid":1000802,"ip_address":"","ucode":"947439CDD0B5B1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/62/3c6041e7.jpg","comment_is_top":false,"comment_ctime":1564018862,"is_pvip":false,"replies":[{"id":42952,"content":"太老版本的Kafka确实会丢消息，因为最开始Kafka的设计就不是要保证消息可靠传递的，但是新版本已经解决了丢消息的问题。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019849,"ip_address":"","comment_id":117287,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"老项目中都是kafka，一部分还在用。老人说消息存在丢失，不可靠。部分人开始自研类似的消息系统，说消息不丢不重，强制推行。个人还是比较喜欢kafka，丢消息的场景没遇到过，可能是我能容忍少量消息丢失，也可能是他们线上部署的版本太旧。毕竟kafka是通用的，不分公司项目语言，有一个大家默默认可和懂的规范，对任何人都容易掌握。公司自己研发的消息系统，没参与过，但似乎都是kafka的精简版，摒弃了一些不需要的特性，在够用的基础上，融入自己的业务，比如跟解析binlog一起替业务团队做了，只需要提供主库和配置一些规则，业务团队开箱即用，要不然其实没什么优势。","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459899,"discussion_content":"太老版本的Kafka确实会丢消息，因为最开始Kafka的设计就不是要保证消息可靠传递的，但是新版本已经解决了丢消息的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117270,"user_name":"李","can_delete":false,"product_type":"c1","uid":1119312,"ip_address":"","ucode":"5C0FAA211F2E26","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg","comment_is_top":false,"comment_ctime":1564017592,"is_pvip":true,"replies":[{"id":42960,"content":"这里面的在线业务指的是那种服务于web页面或者APP的服务，这种服务都需要很低的延迟，否则APP就会很卡，体验不好。\n\n流计算一般不会服务在线业务，都是做事后的统计分析。\n","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564020883,"ip_address":"","comment_id":117270,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"老师文章里说Kafaka不适合在线业务，但后面又说kafaka适合流计算， 流计算不是在线业务吗？这两者有什么区别呢？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459915,"discussion_content":"这个问题有点儿大，可以说一下具体的场景。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564034128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117240,"user_name":"sun留白","can_delete":false,"product_type":"c1","uid":1531348,"ip_address":"","ucode":"53FEEA5E244C9A","user_header":"https://static001.geekbang.org/account/avatar/00/17/5d/d4/e5ea1c25.jpg","comment_is_top":false,"comment_ctime":1564014409,"is_pvip":false,"replies":[{"id":42951,"content":"可以替换，替换之前最好考虑一下新的架构要能适应未来二三年的业务发展即可。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019681,"ip_address":"","comment_id":117240,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"卡，现在用的是activemq。使用原因，大致是这套框架构建的比较早，系统对各性能处理要求也不是很大，主要还是解藕。但是，容易出现丢包，接收不到的问题。觉得可以替换成rabbit mq，性能应该更强一些，稳定。请作者大大指点。","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459891,"discussion_content":"这里面的在线业务指的是那种服务于web页面或者APP的服务，这种服务都需要很低的延迟，否则APP就会很卡，体验不好。\n\n流计算一般不会服务在线业务，都是做事后的统计分析。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564020883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1119312,"avatar":"https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg","nickname":"李","note":"","ucode":"5C0FAA211F2E26","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2907,"discussion_content":"流计算不是一般做实时在线分析吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564032099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117212,"user_name":"我知道了嗯","can_delete":false,"product_type":"c1","uid":1138471,"ip_address":"","ucode":"9186EC1F32C490","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/27/a6873bc9.jpg","comment_is_top":false,"comment_ctime":1564011081,"is_pvip":false,"replies":[{"id":42945,"content":"是拉模式。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019322,"ip_address":"","comment_id":117212,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"kafka是主动发消息给消费者，还是消费者主动来拉消息👀","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459876,"discussion_content":"可以替换，替换之前最好考虑一下新的架构要能适应未来二三年的业务发展即可。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117341,"user_name":"一记妙蛙直拳","can_delete":false,"product_type":"c1","uid":1375256,"ip_address":"","ucode":"BC3556131D4D61","user_header":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","comment_is_top":false,"comment_ctime":1564026546,"is_pvip":false,"replies":null,"discussion_count":13,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"仔细阅读了三遍，每一字都是精华\n选择中间件的考量维度：可靠性，性能，功能，可运维行，可拓展性，是否开源及社区活跃度\nrabbitmq：\n优点：轻量，迅捷，容易部署和使用，拥有灵活的路由配置\n缺点：性能和吞吐量较差，不易进行二次开发\nrocketmq：\n优点：性能好，稳定可靠，有活跃的中文社区，特点响应快\n缺点：兼容性较差，但随意影响力的扩大，该问题会有改善\nkafka：\n优点：拥有强大的性能及吞吐量，兼容性很好\n缺点：由于“攒一波再处理”导致延迟比较高\npulsar：\n采用存储和计算分离的设计，是消息队里产品中黑马，值得持续关注","like_count":250,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459864,"discussion_content":"是拉模式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121690,"user_name":"Coding小先","can_delete":false,"product_type":"c1","uid":1051563,"ip_address":"","ucode":"965B1CC757E026","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/ab/0e2857e5.jpg","comment_is_top":false,"comment_ctime":1565184029,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"期待ing，没用过消息队列，没玩过多线程。但我不想成为一个只会CRUD的","like_count":45},{"had_liked":false,"id":117871,"user_name":"Mark Yao","can_delete":false,"product_type":"c1","uid":1091768,"ip_address":"","ucode":"0535CEB691F618","user_header":"https://static001.geekbang.org/account/avatar/00/10/a8/b8/73ef30ed.jpg","comment_is_top":false,"comment_ctime":1564157759,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"我们就是那种对消息队列功能和性能都没有很高的要求，所以选择RabbitMQ。不管选择哪种消息队列其中还有个很关键的因素，团队里面有人能hold它，最起码熟悉掌握其详细配置。选择不熟悉的MQ会变成不定时炸弹，在生产遇到问题无法快速解决。\n","like_count":26},{"had_liked":false,"id":117436,"user_name":"梨还羽","can_delete":false,"product_type":"c1","uid":1243267,"ip_address":"","ucode":"F6C89EF10DFC89","user_header":"https://static001.geekbang.org/account/avatar/00/12/f8/83/008b7b58.jpg","comment_is_top":false,"comment_ctime":1564046795,"is_pvip":false,"replies":[{"id":43083,"content":"我们可以一起学习一下，从官方给出的性能测试结果来看，和主流的消息队列性能还是有差距。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564105972,"ip_address":"","comment_id":117436,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"NSQ如何呢，基于golang开发的","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459970,"discussion_content":"我们可以一起学习一下，从官方给出的性能测试结果来看，和主流的消息队列性能还是有差距。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564105972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117367,"user_name":"jack","can_delete":false,"product_type":"c1","uid":1612614,"ip_address":"","ucode":"5A26761299F7AC","user_header":"https://static001.geekbang.org/account/avatar/00/18/9b/46/ad3194bd.jpg","comment_is_top":false,"comment_ctime":1564034377,"is_pvip":false,"replies":[{"id":43077,"content":"Kafka内部采用的是批消息集群，每批中有多少条消息，是在Producer决定的，决定每批中有多少消息，主要是在Producer中的2个参数来控制的：linger.ms and batch.size","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564105205,"ip_address":"","comment_id":117367,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"老师，我在使用kafka的时候，没有发现您说的“攒一会儿再发送”，而是生产者很快将消息发送出去，消费者每次只消费很少的数据，设置过几个参数都不起作用，怎么设置批量消费呢？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459970,"discussion_content":"我们可以一起学习一下，从官方给出的性能测试结果来看，和主流的消息队列性能还是有差距。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564105972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117327,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/65c7e3ef.jpg","comment_is_top":false,"comment_ctime":1564024393,"is_pvip":false,"replies":[{"id":42976,"content":"这个问题有点儿大，可以说一下具体的场景。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564034128,"ip_address":"","comment_id":117327,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"有没有一种MQ是可以通过参数配置来改变CAP属性的？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459915,"discussion_content":"这个问题有点儿大，可以说一下具体的场景。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564034128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117287,"user_name":"木小柒","can_delete":false,"product_type":"c1","uid":1000802,"ip_address":"","ucode":"947439CDD0B5B1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/62/3c6041e7.jpg","comment_is_top":false,"comment_ctime":1564018862,"is_pvip":false,"replies":[{"id":42952,"content":"太老版本的Kafka确实会丢消息，因为最开始Kafka的设计就不是要保证消息可靠传递的，但是新版本已经解决了丢消息的问题。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019849,"ip_address":"","comment_id":117287,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"老项目中都是kafka，一部分还在用。老人说消息存在丢失，不可靠。部分人开始自研类似的消息系统，说消息不丢不重，强制推行。个人还是比较喜欢kafka，丢消息的场景没遇到过，可能是我能容忍少量消息丢失，也可能是他们线上部署的版本太旧。毕竟kafka是通用的，不分公司项目语言，有一个大家默默认可和懂的规范，对任何人都容易掌握。公司自己研发的消息系统，没参与过，但似乎都是kafka的精简版，摒弃了一些不需要的特性，在够用的基础上，融入自己的业务，比如跟解析binlog一起替业务团队做了，只需要提供主库和配置一些规则，业务团队开箱即用，要不然其实没什么优势。","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459899,"discussion_content":"太老版本的Kafka确实会丢消息，因为最开始Kafka的设计就不是要保证消息可靠传递的，但是新版本已经解决了丢消息的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117270,"user_name":"李","can_delete":false,"product_type":"c1","uid":1119312,"ip_address":"","ucode":"5C0FAA211F2E26","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg","comment_is_top":false,"comment_ctime":1564017592,"is_pvip":true,"replies":[{"id":42960,"content":"这里面的在线业务指的是那种服务于web页面或者APP的服务，这种服务都需要很低的延迟，否则APP就会很卡，体验不好。\n\n流计算一般不会服务在线业务，都是做事后的统计分析。\n","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564020883,"ip_address":"","comment_id":117270,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"老师文章里说Kafaka不适合在线业务，但后面又说kafaka适合流计算， 流计算不是在线业务吗？这两者有什么区别呢？","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459891,"discussion_content":"这里面的在线业务指的是那种服务于web页面或者APP的服务，这种服务都需要很低的延迟，否则APP就会很卡，体验不好。\n\n流计算一般不会服务在线业务，都是做事后的统计分析。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564020883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1119312,"avatar":"https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg","nickname":"李","note":"","ucode":"5C0FAA211F2E26","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2907,"discussion_content":"流计算不是一般做实时在线分析吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564032099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117240,"user_name":"sun留白","can_delete":false,"product_type":"c1","uid":1531348,"ip_address":"","ucode":"53FEEA5E244C9A","user_header":"https://static001.geekbang.org/account/avatar/00/17/5d/d4/e5ea1c25.jpg","comment_is_top":false,"comment_ctime":1564014409,"is_pvip":false,"replies":[{"id":42951,"content":"可以替换，替换之前最好考虑一下新的架构要能适应未来二三年的业务发展即可。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019681,"ip_address":"","comment_id":117240,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"卡，现在用的是activemq。使用原因，大致是这套框架构建的比较早，系统对各性能处理要求也不是很大，主要还是解藕。但是，容易出现丢包，接收不到的问题。觉得可以替换成rabbit mq，性能应该更强一些，稳定。请作者大大指点。","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459876,"discussion_content":"可以替换，替换之前最好考虑一下新的架构要能适应未来二三年的业务发展即可。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117212,"user_name":"我知道了嗯","can_delete":false,"product_type":"c1","uid":1138471,"ip_address":"","ucode":"9186EC1F32C490","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/27/a6873bc9.jpg","comment_is_top":false,"comment_ctime":1564011081,"is_pvip":false,"replies":[{"id":42945,"content":"是拉模式。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1564019322,"ip_address":"","comment_id":117212,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"kafka是主动发消息给消费者，还是消费者主动来拉消息👀","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459864,"discussion_content":"是拉模式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564019322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117341,"user_name":"一记妙蛙直拳","can_delete":false,"product_type":"c1","uid":1375256,"ip_address":"","ucode":"BC3556131D4D61","user_header":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","comment_is_top":false,"comment_ctime":1564026546,"is_pvip":false,"replies":null,"discussion_count":13,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"仔细阅读了三遍，每一字都是精华\n选择中间件的考量维度：可靠性，性能，功能，可运维行，可拓展性，是否开源及社区活跃度\nrabbitmq：\n优点：轻量，迅捷，容易部署和使用，拥有灵活的路由配置\n缺点：性能和吞吐量较差，不易进行二次开发\nrocketmq：\n优点：性能好，稳定可靠，有活跃的中文社区，特点响应快\n缺点：兼容性较差，但随意影响力的扩大，该问题会有改善\nkafka：\n优点：拥有强大的性能及吞吐量，兼容性很好\n缺点：由于“攒一波再处理”导致延迟比较高\npulsar：\n采用存储和计算分离的设计，是消息队里产品中黑马，值得持续关注","like_count":250,"discussions":[{"author":{"id":1375256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","nickname":"一记妙蛙直拳","note":"","ucode":"BC3556131D4D61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376987,"discussion_content":"一年半再后头看我的评论  难以置信这是我写的","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1622452401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1137516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5b/6c/43ffc996.jpg","nickname":"℡.com","note":"","ucode":"92ECF6572AE80E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1375256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","nickname":"一记妙蛙直拳","note":"","ucode":"BC3556131D4D61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379338,"discussion_content":"反手就是一个赞，总结到位","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623834494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376987,"ip_address":"","group_id":0},"score":379338,"extra":""},{"author":{"id":1531879,"avatar":"https://static001.geekbang.org/account/avatar/00/17/5f/e7/318ce10e.jpg","nickname":"算法成瘾者","note":"","ucode":"6E7A8E8844F9C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1375256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","nickname":"一记妙蛙直拳","note":"","ucode":"BC3556131D4D61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571965,"discussion_content":"厉害了，能总结的精辟的人，也是思维和能力到位的人👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652515128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376987,"ip_address":"","group_id":0},"score":571965,"extra":""},{"author":{"id":3556831,"avatar":"","nickname":"Geek_0085d4","note":"","ucode":"B4322D4F187FF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1375256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","nickname":"一记妙蛙直拳","note":"","ucode":"BC3556131D4D61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615485,"discussion_content":"又过了一年了 ，大佬在哪高就\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682302053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376987,"ip_address":"上海","group_id":0},"score":615485,"extra":""}]},{"author":{"id":1089235,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9e/d3/abb7bfe3.jpg","nickname":"wholly","note":"","ucode":"3CB7D06CC6C670","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4577,"discussion_content":"学习委员，请往前座","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1565573753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1674602,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJPHfGiaByESiaHPWbfQicjgap3unxDsxlG6JuUCNvEFJNLibNjeX4CQYNtsvXBXqTpBERUIPyiagGBXbg/132","nickname":"Geek_55a272","note":"","ucode":"7B12A9B322B3BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374534,"discussion_content":"而且kafka只能支持批量处理 无法较好的处理ack","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1621237947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1674602,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJPHfGiaByESiaHPWbfQicjgap3unxDsxlG6JuUCNvEFJNLibNjeX4CQYNtsvXBXqTpBERUIPyiagGBXbg/132","nickname":"Geek_55a272","note":"","ucode":"7B12A9B322B3BF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545410,"discussion_content":"怒赞 这是非常重要的一个点，这个点决定了对业务并行消费及其困难，因为大部分业务操作并不是计算类型，而是io处理，kafka的partition限制，外加ack的设计导致了，并行消费能力弱，同时决定了没有延迟消费 + 补偿消费的问题实现起来都麻烦很多。。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1641952826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374534,"ip_address":"","group_id":0},"score":545410,"extra":""},{"author":{"id":2405308,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b3/bc/4d00adce.jpg","nickname":"知行","note":"","ucode":"A514020B2ED437","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555111,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646750111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":545410,"ip_address":"","group_id":0},"score":555111,"extra":""}]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"钱","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5387,"discussion_content":"总结的好","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566218990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201982,"avatar":"https://static001.geekbang.org/account/avatar/00/12/57/3e/b91c03db.jpg","nickname":"往事随风.","note":"","ucode":"381BDB8533BDEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3650,"discussion_content":"攒一波的概念从何而来啊？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564658206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1023437,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9d/cd/93864919.jpg","nickname":"空白宇宙","note":"","ucode":"9031293BDAAB0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1201982,"avatar":"https://static001.geekbang.org/account/avatar/00/12/57/3e/b91c03db.jpg","nickname":"往事随风.","note":"","ucode":"381BDB8533BDEF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4042,"discussion_content":"挺好啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565076900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3650,"ip_address":"","group_id":0},"score":4042,"extra":""}]},{"author":{"id":1759602,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d9/72/41557176.jpg","nickname":"Edingbrugh","note":"","ucode":"E285CD9DE8BE4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312439,"discussion_content":"大兄弟读的很认真思考也很有深度","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602686121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1045577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f4/49/2b938b4f.jpg","nickname":"北极的大企鹅","note":"","ucode":"8935346D08E109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211976,"discussion_content":"不错哦，很全面 thanks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584920634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121690,"user_name":"Coding小先","can_delete":false,"product_type":"c1","uid":1051563,"ip_address":"","ucode":"965B1CC757E026","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/ab/0e2857e5.jpg","comment_is_top":false,"comment_ctime":1565184029,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"期待ing，没用过消息队列，没玩过多线程。但我不想成为一个只会CRUD的","like_count":45},{"had_liked":false,"id":117871,"user_name":"Mark Yao","can_delete":false,"product_type":"c1","uid":1091768,"ip_address":"","ucode":"0535CEB691F618","user_header":"https://static001.geekbang.org/account/avatar/00/10/a8/b8/73ef30ed.jpg","comment_is_top":false,"comment_ctime":1564157759,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"我们就是那种对消息队列功能和性能都没有很高的要求，所以选择RabbitMQ。不管选择哪种消息队列其中还有个很关键的因素，团队里面有人能hold它，最起码熟悉掌握其详细配置。选择不熟悉的MQ会变成不定时炸弹，在生产遇到问题无法快速解决。\n","like_count":26,"discussions":[{"author":{"id":1375256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","nickname":"一记妙蛙直拳","note":"","ucode":"BC3556131D4D61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376987,"discussion_content":"一年半再后头看我的评论  难以置信这是我写的","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1622452401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1137516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5b/6c/43ffc996.jpg","nickname":"℡.com","note":"","ucode":"92ECF6572AE80E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1375256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","nickname":"一记妙蛙直拳","note":"","ucode":"BC3556131D4D61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379338,"discussion_content":"反手就是一个赞，总结到位","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623834494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376987,"ip_address":"","group_id":0},"score":379338,"extra":""},{"author":{"id":1531879,"avatar":"https://static001.geekbang.org/account/avatar/00/17/5f/e7/318ce10e.jpg","nickname":"算法成瘾者","note":"","ucode":"6E7A8E8844F9C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1375256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","nickname":"一记妙蛙直拳","note":"","ucode":"BC3556131D4D61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571965,"discussion_content":"厉害了，能总结的精辟的人，也是思维和能力到位的人👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652515128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376987,"ip_address":"","group_id":0},"score":571965,"extra":""},{"author":{"id":3556831,"avatar":"","nickname":"Geek_0085d4","note":"","ucode":"B4322D4F187FF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1375256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","nickname":"一记妙蛙直拳","note":"","ucode":"BC3556131D4D61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615485,"discussion_content":"又过了一年了 ，大佬在哪高就\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682302053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376987,"ip_address":"上海","group_id":0},"score":615485,"extra":""}]},{"author":{"id":1089235,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9e/d3/abb7bfe3.jpg","nickname":"wholly","note":"","ucode":"3CB7D06CC6C670","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4577,"discussion_content":"学习委员，请往前座","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1565573753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1674602,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJPHfGiaByESiaHPWbfQicjgap3unxDsxlG6JuUCNvEFJNLibNjeX4CQYNtsvXBXqTpBERUIPyiagGBXbg/132","nickname":"Geek_55a272","note":"","ucode":"7B12A9B322B3BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374534,"discussion_content":"而且kafka只能支持批量处理 无法较好的处理ack","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1621237947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1674602,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJPHfGiaByESiaHPWbfQicjgap3unxDsxlG6JuUCNvEFJNLibNjeX4CQYNtsvXBXqTpBERUIPyiagGBXbg/132","nickname":"Geek_55a272","note":"","ucode":"7B12A9B322B3BF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545410,"discussion_content":"怒赞 这是非常重要的一个点，这个点决定了对业务并行消费及其困难，因为大部分业务操作并不是计算类型，而是io处理，kafka的partition限制，外加ack的设计导致了，并行消费能力弱，同时决定了没有延迟消费 + 补偿消费的问题实现起来都麻烦很多。。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1641952826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374534,"ip_address":"","group_id":0},"score":545410,"extra":""},{"author":{"id":2405308,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b3/bc/4d00adce.jpg","nickname":"知行","note":"","ucode":"A514020B2ED437","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555111,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646750111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":545410,"ip_address":"","group_id":0},"score":555111,"extra":""}]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"钱","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5387,"discussion_content":"总结的好","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566218990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201982,"avatar":"https://static001.geekbang.org/account/avatar/00/12/57/3e/b91c03db.jpg","nickname":"往事随风.","note":"","ucode":"381BDB8533BDEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3650,"discussion_content":"攒一波的概念从何而来啊？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564658206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1023437,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9d/cd/93864919.jpg","nickname":"空白宇宙","note":"","ucode":"9031293BDAAB0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1201982,"avatar":"https://static001.geekbang.org/account/avatar/00/12/57/3e/b91c03db.jpg","nickname":"往事随风.","note":"","ucode":"381BDB8533BDEF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4042,"discussion_content":"挺好啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565076900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3650,"ip_address":"","group_id":0},"score":4042,"extra":""}]},{"author":{"id":1759602,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d9/72/41557176.jpg","nickname":"Edingbrugh","note":"","ucode":"E285CD9DE8BE4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312439,"discussion_content":"大兄弟读的很认真思考也很有深度","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602686121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1045577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f4/49/2b938b4f.jpg","nickname":"北极的大企鹅","note":"","ucode":"8935346D08E109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211976,"discussion_content":"不错哦，很全面 thanks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584920634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118128,"user_name":"zwh","can_delete":false,"product_type":"c1","uid":1118134,"ip_address":"","ucode":"0E5690C0773C2D","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/b6/a8bbc3c6.jpg","comment_is_top":false,"comment_ctime":1564272111,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"正如老师所说，性能优秀rocketmq在国外的知名度真的挺低的。国外除了rabbitmq kafka还有还多公司使用Amazon的simple queue service ","like_count":10},{"had_liked":false,"id":117413,"user_name":"业余草","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1564042979,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"rockmq + kafka。业务 + 日志，都需要！","like_count":10},{"had_liked":false,"id":231359,"user_name":"编程界的小学生","can_delete":false,"product_type":"c1","uid":1593289,"ip_address":"","ucode":"4A5BE9A5E877FA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","comment_is_top":false,"comment_ctime":1593657231,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"我们是用户充值+积分业务。采取的RocketMQ。但是我想吐槽：Rocket MQ捐给apache后，apache把中文注释删的干干净净，问题来了：英文注释一个字没有。好难受呀。","like_count":7},{"had_liked":false,"id":249362,"user_name":"第一装甲集群司令克莱斯特","can_delete":false,"product_type":"c1","uid":1265707,"ip_address":"","ucode":"4E8FBB23AD860B","user_header":"https://static001.geekbang.org/account/avatar/00/13/50/2b/2344cdaa.jpg","comment_is_top":false,"comment_ctime":1600610600,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"老师说的真准，我们重新开发的实时数据全监控系统，基于日志就是使用Kafka+logback 埋点，进行链路穿透，实时监控业务系统的走向，及时定位问题，解决问题，而不是等运维慢慢追查日志和面向结果分析！","like_count":4},{"had_liked":false,"id":149719,"user_name":"吧唧吧唧","can_delete":false,"product_type":"c1","uid":1192449,"ip_address":"","ucode":"9F47B5BCAFA08E","user_header":"https://static001.geekbang.org/account/avatar/00/12/32/01/4bbcfceb.jpg","comment_is_top":false,"comment_ctime":1573353922,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"听完了这节课，发现公司选型消息队列确实存在问题。公司产品半金融系统，消息队列在线要求比较高，但是算不上海量，然而却选择了kafka。我负责的项目还没投入使用，悬崖勒马啊。","like_count":4},{"had_liked":false,"id":140545,"user_name":"Geek_834f54","can_delete":false,"product_type":"c1","uid":1638313,"ip_address":"","ucode":"DBC3E83EB5F5F7","user_header":"https://static001.geekbang.org/account/avatar/00/18/ff/a9/656b974a.jpg","comment_is_top":false,"comment_ctime":1570980749,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"RabbitMQ:轻量，拥有灵活的路由配置，易维护，由于是基于Erlang开发，所以不利于二次开发\nRocketMQ: (2012 阿里巴巴设计)  经历过多次“双十一”考验，有着非常活跃的社区，能达到ms级的响应，适合在线的生产业务。\nKafka（基于Scala和java开发）：最初设计目的是用于处理海量的日志，异步收发，拥有强大的性能，兼容性好，能处理海量的消息，由于“攒一波再处理”，如果每秒数量没有那么多时，kafka时延反而比较高,适合日志运维，监控需求。\n选择：\n若是对性能等要求不高，开箱即用，则选择RabbitMQ\n若是在线业务场景，选择RocketMQ\n若是运维，监控，选择Kafka","like_count":4},{"had_liked":false,"id":316632,"user_name":"youz","can_delete":false,"product_type":"c1","uid":1128014,"ip_address":"","ucode":"9429058F3DAD0F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/GqrIBI99jzwTnB4CPagiak70113nMhx7flE1D95U7lrSBOFXxuSMNOpaT5Fk44hom01rtpTCYtZhG2YXUl5iaabQ/132","comment_is_top":false,"comment_ctime":1634464257,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"我们用的 RabbitMQ，消息堆积真的被坑怕了，堆积到基本无法读写的地步了😂。","like_count":3},{"had_liked":false,"id":133293,"user_name":"Mars","can_delete":false,"product_type":"c1","uid":1088584,"ip_address":"","ucode":"D7BAA9EBB7D89C","user_header":"https://static001.geekbang.org/account/avatar/00/10/9c/48/44965714.jpg","comment_is_top":false,"comment_ctime":1568491032,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"好奇北美对那种响应时延要求比较高的场景用的是什么，毕竟rocketMQ主要是在国内用的比较多","like_count":3},{"had_liked":false,"id":345698,"user_name":"算法成瘾者","can_delete":false,"product_type":"c1","uid":1531879,"ip_address":"","ucode":"6E7A8E8844F9C3","user_header":"https://static001.geekbang.org/account/avatar/00/17/5f/e7/318ce10e.jpg","comment_is_top":false,"comment_ctime":1652515863,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"选择消息队列的几个关注方面： 性能，功能，可靠性，可维护性，扩展性，是否开源及社区活跃度。\n1）RabbitMQ:\n 优点：易部署，易使用，轻量级，迅捷，使用率高\n 缺点：性能较差，消息积累时性能下降严重，吞吐量不大，扩展性较差(基于小众语言Erlang开发)\n2）RocketMQ:\n 优点：性能稳定，时延低，国人MQ产品，整体表现好\n 缺点：国际上兼容性稍差，正在逐步改善\n3）Kafka:\n 优点：吞吐量和性能优异，适合海量数据处理\n 缺点：由于“攒一波再发”的设计导致其时延略高\n4）pulsar:\n 采用存储和计算分离的设计，是MQ中值得持续关注的产品“黑马” ","like_count":2},{"had_liked":false,"id":321760,"user_name":"wuhang202","can_delete":false,"product_type":"c1","uid":2638583,"ip_address":"","ucode":"2A81B4FE4F22DA","user_header":"https://static001.geekbang.org/account/avatar/00/28/42/f7/8b57263a.jpg","comment_is_top":false,"comment_ctime":1637032957,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"日志收集及数据分析处理：使用kafka，对flink等大数据组件的协同生态非常完善，可基于实现流式处理时端到端exactly-once等\n各业务流程间异步解耦及平滑流量：rocketmq，支持分布式事务，监控完善，部署运维简便","like_count":2,"discussions":[{"author":{"id":1023930,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9f/ba/5a9cb72f.jpg","nickname":"丹枫染秋色","note":"","ucode":"4E9A35439B615F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":623182,"discussion_content":"堆积了多少才出现无法读写的地步啊😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1689138749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118128,"user_name":"zwh","can_delete":false,"product_type":"c1","uid":1118134,"ip_address":"","ucode":"0E5690C0773C2D","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/b6/a8bbc3c6.jpg","comment_is_top":false,"comment_ctime":1564272111,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"正如老师所说，性能优秀rocketmq在国外的知名度真的挺低的。国外除了rabbitmq kafka还有还多公司使用Amazon的simple queue service ","like_count":10},{"had_liked":false,"id":117413,"user_name":"业余草","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1564042979,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"rockmq + kafka。业务 + 日志，都需要！","like_count":10},{"had_liked":false,"id":231359,"user_name":"编程界的小学生","can_delete":false,"product_type":"c1","uid":1593289,"ip_address":"","ucode":"4A5BE9A5E877FA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","comment_is_top":false,"comment_ctime":1593657231,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"我们是用户充值+积分业务。采取的RocketMQ。但是我想吐槽：Rocket MQ捐给apache后，apache把中文注释删的干干净净，问题来了：英文注释一个字没有。好难受呀。","like_count":7},{"had_liked":false,"id":249362,"user_name":"第一装甲集群司令克莱斯特","can_delete":false,"product_type":"c1","uid":1265707,"ip_address":"","ucode":"4E8FBB23AD860B","user_header":"https://static001.geekbang.org/account/avatar/00/13/50/2b/2344cdaa.jpg","comment_is_top":false,"comment_ctime":1600610600,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"老师说的真准，我们重新开发的实时数据全监控系统，基于日志就是使用Kafka+logback 埋点，进行链路穿透，实时监控业务系统的走向，及时定位问题，解决问题，而不是等运维慢慢追查日志和面向结果分析！","like_count":4},{"had_liked":false,"id":149719,"user_name":"吧唧吧唧","can_delete":false,"product_type":"c1","uid":1192449,"ip_address":"","ucode":"9F47B5BCAFA08E","user_header":"https://static001.geekbang.org/account/avatar/00/12/32/01/4bbcfceb.jpg","comment_is_top":false,"comment_ctime":1573353922,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"听完了这节课，发现公司选型消息队列确实存在问题。公司产品半金融系统，消息队列在线要求比较高，但是算不上海量，然而却选择了kafka。我负责的项目还没投入使用，悬崖勒马啊。","like_count":4},{"had_liked":false,"id":140545,"user_name":"Geek_834f54","can_delete":false,"product_type":"c1","uid":1638313,"ip_address":"","ucode":"DBC3E83EB5F5F7","user_header":"https://static001.geekbang.org/account/avatar/00/18/ff/a9/656b974a.jpg","comment_is_top":false,"comment_ctime":1570980749,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"RabbitMQ:轻量，拥有灵活的路由配置，易维护，由于是基于Erlang开发，所以不利于二次开发\nRocketMQ: (2012 阿里巴巴设计)  经历过多次“双十一”考验，有着非常活跃的社区，能达到ms级的响应，适合在线的生产业务。\nKafka（基于Scala和java开发）：最初设计目的是用于处理海量的日志，异步收发，拥有强大的性能，兼容性好，能处理海量的消息，由于“攒一波再处理”，如果每秒数量没有那么多时，kafka时延反而比较高,适合日志运维，监控需求。\n选择：\n若是对性能等要求不高，开箱即用，则选择RabbitMQ\n若是在线业务场景，选择RocketMQ\n若是运维，监控，选择Kafka","like_count":4},{"had_liked":false,"id":316632,"user_name":"youz","can_delete":false,"product_type":"c1","uid":1128014,"ip_address":"","ucode":"9429058F3DAD0F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/GqrIBI99jzwTnB4CPagiak70113nMhx7flE1D95U7lrSBOFXxuSMNOpaT5Fk44hom01rtpTCYtZhG2YXUl5iaabQ/132","comment_is_top":false,"comment_ctime":1634464257,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"我们用的 RabbitMQ，消息堆积真的被坑怕了，堆积到基本无法读写的地步了😂。","like_count":3,"discussions":[{"author":{"id":1023930,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9f/ba/5a9cb72f.jpg","nickname":"丹枫染秋色","note":"","ucode":"4E9A35439B615F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":623182,"discussion_content":"堆积了多少才出现无法读写的地步啊😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1689138749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133293,"user_name":"Mars","can_delete":false,"product_type":"c1","uid":1088584,"ip_address":"","ucode":"D7BAA9EBB7D89C","user_header":"https://static001.geekbang.org/account/avatar/00/10/9c/48/44965714.jpg","comment_is_top":false,"comment_ctime":1568491032,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"好奇北美对那种响应时延要求比较高的场景用的是什么，毕竟rocketMQ主要是在国内用的比较多","like_count":3},{"had_liked":false,"id":345698,"user_name":"算法成瘾者","can_delete":false,"product_type":"c1","uid":1531879,"ip_address":"","ucode":"6E7A8E8844F9C3","user_header":"https://static001.geekbang.org/account/avatar/00/17/5f/e7/318ce10e.jpg","comment_is_top":false,"comment_ctime":1652515863,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"选择消息队列的几个关注方面： 性能，功能，可靠性，可维护性，扩展性，是否开源及社区活跃度。\n1）RabbitMQ:\n 优点：易部署，易使用，轻量级，迅捷，使用率高\n 缺点：性能较差，消息积累时性能下降严重，吞吐量不大，扩展性较差(基于小众语言Erlang开发)\n2）RocketMQ:\n 优点：性能稳定，时延低，国人MQ产品，整体表现好\n 缺点：国际上兼容性稍差，正在逐步改善\n3）Kafka:\n 优点：吞吐量和性能优异，适合海量数据处理\n 缺点：由于“攒一波再发”的设计导致其时延略高\n4）pulsar:\n 采用存储和计算分离的设计，是MQ中值得持续关注的产品“黑马” ","like_count":2},{"had_liked":false,"id":321760,"user_name":"wuhang202","can_delete":false,"product_type":"c1","uid":2638583,"ip_address":"","ucode":"2A81B4FE4F22DA","user_header":"https://static001.geekbang.org/account/avatar/00/28/42/f7/8b57263a.jpg","comment_is_top":false,"comment_ctime":1637032957,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"日志收集及数据分析处理：使用kafka，对flink等大数据组件的协同生态非常完善，可基于实现流式处理时端到端exactly-once等\n各业务流程间异步解耦及平滑流量：rocketmq，支持分布式事务，监控完善，部署运维简便","like_count":2},{"had_liked":false,"id":117452,"user_name":"QQ怪","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1564050422,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"哔，打卡，文章听一般就懂","like_count":2},{"had_liked":false,"id":368136,"user_name":"Link","can_delete":false,"product_type":"c1","uid":2290555,"ip_address":"云南","ucode":"C892B73A227B2A","user_header":"https://static001.geekbang.org/account/avatar/00/22/f3/7b/a966dca7.jpg","comment_is_top":false,"comment_ctime":1675928529,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"我感觉Kafka不适合在线业务的理由说不过去，这个攒一波再发出去，如果你的业务消息不多，时延反而会高，但是这个攒一波，攒多少再发，这个不是可以灵活配置和定义吗？软件设计不应该这么蠢吧？  MySQL对于异步刷盘，都有很多阈值上的配置。Kafka就因为这点就不适合做在线业务了？","like_count":1},{"had_liked":false,"id":345337,"user_name":"yzhao66","can_delete":false,"product_type":"c1","uid":1513503,"ip_address":"","ucode":"9F76363A0ECC4B","user_header":"https://static001.geekbang.org/account/avatar/00/17/18/1f/2c4cbea0.jpg","comment_is_top":false,"comment_ctime":1652196858,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"开源的rockermq的延迟队列最多支持2h，这个是个缺点。如果在做撤回未付款的订单的时候，客户两小时内不付款，就无法取消。如果碰到延迟任务时间更长的需求，就只能重复叠加队列","like_count":1},{"had_liked":false,"id":331283,"user_name":"千锤百炼领悟之极限","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1642516009,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"开源，消息可靠传递，支持集群，高性能","like_count":1},{"had_liked":false,"id":295792,"user_name":"非洲黑猴子","can_delete":false,"product_type":"c1","uid":2639724,"ip_address":"","ucode":"F5FEAC07D562E0","user_header":"https://static001.geekbang.org/account/avatar/00/28/47/6c/78184d19.jpg","comment_is_top":false,"comment_ctime":1622599935,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":1,"score":9,"product_id":100032301,"comment_content":"没有Redis吗？","like_count":1},{"had_liked":false,"id":275920,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1611718064,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"1.我们现阶段使用的是Kafka和RocketMQ,一个用于外部的日志数据接收并存储,方便集群内服务消费并聚合,一个用于内部的服务解耦,将处理完成的数据批量存库","like_count":1},{"had_liked":false,"id":249365,"user_name":"第一装甲集群司令克莱斯特","can_delete":false,"product_type":"c1","uid":1265707,"ip_address":"","ucode":"4E8FBB23AD860B","user_header":"https://static001.geekbang.org/account/avatar/00/13/50/2b/2344cdaa.jpg","comment_is_top":false,"comment_ctime":1600610813,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"Kafka批量处理，吞吐量大，但是的确不适合在线事务实时交易处理，很多公司业务订单出单，但是客户在三端吃吃查询不到，延时比较高，造成很不好的客户体验。我负责的项目准备从Kafka +MongoDB迁移到RocketMQ+Elasticsearch !方便海量数据推送和实时快速查询。","like_count":1},{"had_liked":false,"id":243042,"user_name":"爱学习的小迪","can_delete":false,"product_type":"c1","uid":1448126,"ip_address":"","ucode":"EB1CB5EA4E3A90","user_header":"https://static001.geekbang.org/account/avatar/00/16/18/be/aa622bf8.jpg","comment_is_top":false,"comment_ctime":1597929006,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"看了老师的文章，突然发现我们选择RabbitMQ用来处理海量消息是错误的，我们需要处理，系统内消息，App推送消息，前端数据埋点等。RabbitMQ对于这种场景来说，显然是不使用的，应该选择Kafka。要不然随着消息产出&gt;消费，则会出现消息挤压，拖慢RabbitMQ的性能","like_count":1},{"had_liked":false,"id":227466,"user_name":"hadoo","can_delete":false,"product_type":"c1","uid":2020961,"ip_address":"","ucode":"8F7ADA7B570721","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d6/61/dd899923.jpg","comment_is_top":false,"comment_ctime":1592387085,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"老师你觉得JMQ和RocketMQ整体上比起来怎么样","like_count":1},{"had_liked":false,"id":199568,"user_name":"谢小二","can_delete":false,"product_type":"c1","uid":1057858,"ip_address":"","ucode":"44E14E9C89E62F","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/42/99e346c7.jpg","comment_is_top":false,"comment_ctime":1585491666,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"zeromq的创始人之一后来另立门户，按照他认为正确的做法重新实现了一个zmq，教训nanomsg，据说比zmq的性能更好，api设计更友好","like_count":1},{"had_liked":false,"id":117452,"user_name":"QQ怪","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1564050422,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"哔，打卡，文章听一般就懂","like_count":2},{"had_liked":false,"id":368136,"user_name":"Link","can_delete":false,"product_type":"c1","uid":2290555,"ip_address":"云南","ucode":"C892B73A227B2A","user_header":"https://static001.geekbang.org/account/avatar/00/22/f3/7b/a966dca7.jpg","comment_is_top":false,"comment_ctime":1675928529,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"我感觉Kafka不适合在线业务的理由说不过去，这个攒一波再发出去，如果你的业务消息不多，时延反而会高，但是这个攒一波，攒多少再发，这个不是可以灵活配置和定义吗？软件设计不应该这么蠢吧？  MySQL对于异步刷盘，都有很多阈值上的配置。Kafka就因为这点就不适合做在线业务了？","like_count":1},{"had_liked":false,"id":345337,"user_name":"yzhao66","can_delete":false,"product_type":"c1","uid":1513503,"ip_address":"","ucode":"9F76363A0ECC4B","user_header":"https://static001.geekbang.org/account/avatar/00/17/18/1f/2c4cbea0.jpg","comment_is_top":false,"comment_ctime":1652196858,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"开源的rockermq的延迟队列最多支持2h，这个是个缺点。如果在做撤回未付款的订单的时候，客户两小时内不付款，就无法取消。如果碰到延迟任务时间更长的需求，就只能重复叠加队列","like_count":1},{"had_liked":false,"id":331283,"user_name":"千锤百炼领悟之极限","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1642516009,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"开源，消息可靠传递，支持集群，高性能","like_count":1},{"had_liked":false,"id":295792,"user_name":"非洲黑猴子","can_delete":false,"product_type":"c1","uid":2639724,"ip_address":"","ucode":"F5FEAC07D562E0","user_header":"https://static001.geekbang.org/account/avatar/00/28/47/6c/78184d19.jpg","comment_is_top":false,"comment_ctime":1622599935,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":1,"score":9,"product_id":100032301,"comment_content":"没有Redis吗？","like_count":1},{"had_liked":false,"id":275920,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1611718064,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"1.我们现阶段使用的是Kafka和RocketMQ,一个用于外部的日志数据接收并存储,方便集群内服务消费并聚合,一个用于内部的服务解耦,将处理完成的数据批量存库","like_count":1},{"had_liked":false,"id":249365,"user_name":"第一装甲集群司令克莱斯特","can_delete":false,"product_type":"c1","uid":1265707,"ip_address":"","ucode":"4E8FBB23AD860B","user_header":"https://static001.geekbang.org/account/avatar/00/13/50/2b/2344cdaa.jpg","comment_is_top":false,"comment_ctime":1600610813,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"Kafka批量处理，吞吐量大，但是的确不适合在线事务实时交易处理，很多公司业务订单出单，但是客户在三端吃吃查询不到，延时比较高，造成很不好的客户体验。我负责的项目准备从Kafka +MongoDB迁移到RocketMQ+Elasticsearch !方便海量数据推送和实时快速查询。","like_count":1},{"had_liked":false,"id":243042,"user_name":"爱学习的小迪","can_delete":false,"product_type":"c1","uid":1448126,"ip_address":"","ucode":"EB1CB5EA4E3A90","user_header":"https://static001.geekbang.org/account/avatar/00/16/18/be/aa622bf8.jpg","comment_is_top":false,"comment_ctime":1597929006,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"看了老师的文章，突然发现我们选择RabbitMQ用来处理海量消息是错误的，我们需要处理，系统内消息，App推送消息，前端数据埋点等。RabbitMQ对于这种场景来说，显然是不使用的，应该选择Kafka。要不然随着消息产出&gt;消费，则会出现消息挤压，拖慢RabbitMQ的性能","like_count":1},{"had_liked":false,"id":227466,"user_name":"hadoo","can_delete":false,"product_type":"c1","uid":2020961,"ip_address":"","ucode":"8F7ADA7B570721","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d6/61/dd899923.jpg","comment_is_top":false,"comment_ctime":1592387085,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"老师你觉得JMQ和RocketMQ整体上比起来怎么样","like_count":1},{"had_liked":false,"id":199568,"user_name":"谢小二","can_delete":false,"product_type":"c1","uid":1057858,"ip_address":"","ucode":"44E14E9C89E62F","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/42/99e346c7.jpg","comment_is_top":false,"comment_ctime":1585491666,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100032301,"comment_content":"zeromq的创始人之一后来另立门户，按照他认为正确的做法重新实现了一个zmq，教训nanomsg，据说比zmq的性能更好，api设计更友好","like_count":1},{"had_liked":false,"id":188059,"user_name":"slark","can_delete":false,"product_type":"c1","uid":1143574,"ip_address":"","ucode":"7E8DE962AA23A7","user_header":"https://static001.geekbang.org/account/avatar/00/11/73/16/595b0342.jpg","comment_is_top":false,"comment_ctime":1584319384,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"用什么就要要知道为什么，Kafka吞吐量高，有一个原因就是它设计为批量，批量带来可能就会有延迟","like_count":1},{"had_liked":false,"id":159838,"user_name":"刘志兵","can_delete":false,"product_type":"c1","uid":1441734,"ip_address":"","ucode":"A90C2FA49EDC23","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/c6/8b5cbe97.jpg","comment_is_top":false,"comment_ctime":1575806836,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"老师这个总结的真好，清晰明了，以后选型再也不纠结了","like_count":1},{"had_liked":false,"id":149996,"user_name":"恩佐","can_delete":false,"product_type":"c1","uid":1509370,"ip_address":"","ucode":"955C45137073EE","user_header":"https://static001.geekbang.org/account/avatar/00/17/07/fa/62186c97.jpg","comment_is_top":false,"comment_ctime":1573442904,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"架构无所谓好坏，关键是合适。\n这句话就值得买这个课了，赞","like_count":1},{"had_liked":false,"id":118161,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1018370,"ip_address":"","ucode":"7A488CC6FE15E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","comment_is_top":false,"comment_ctime":1564281244,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"刚入职新公司不久，之前对消息队列的认识也只停留在基本概念上。现在在开发的系统是一个结算系统，主要是针对订单的结算，消息中间件采用的是ActiveMQ，比较老，我自己猜测是之前的订单系统设计比较老了（貌似公司大部分系统的消息中间件都是ActiveMQ），这些年应该没有做过较大的升级改造（估计业务体量也没有达到大厂那种大级别）。我们在开发过程中可能会遇到丢消息的情况和在某些时段会有大量消息积压。我觉得我们组当前的系统对消息队列的需求使用之前选的ActiveMQ也够用，但是遇到一些问题，如丢消息，积压等目前可能还不能从本质上认识哪里出了问题。希望学习完这门课能对消息队列这个中间件有个宏观上的理解。","like_count":1},{"had_liked":false,"id":117739,"user_name":"龙猫","can_delete":false,"product_type":"c1","uid":1228191,"ip_address":"","ucode":"F0FC59632BC6F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJB6kaR6vXGP95RvKy6GnmT33EEAkoPJrUCENE0ankWfKicm6QMbfw6yiadNJlIPZEIlPYgIm8mYEwg/132","comment_is_top":false,"comment_ctime":1564122652,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"go的nsq也不错","like_count":1},{"had_liked":false,"id":117634,"user_name":"发条橙子 。","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1564103795,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"总结一波：\n\n三大主流消息队列：\nRabbit mq: 开箱即用 主要重点就是在队列上，性能一般对有消息堆积的场景下支持较弱，每秒处理几万左右 ，语言的原因造成不太好二次维护","like_count":1},{"had_liked":false,"id":117307,"user_name":"Loren","can_delete":false,"product_type":"c1","uid":1270750,"ip_address":"","ucode":"4DF8A106C984F3","user_header":"https://static001.geekbang.org/account/avatar/00/13/63/de/91fada7a.jpg","comment_is_top":false,"comment_ctime":1564021050,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"卡！数据通道 用的kakfa，","like_count":1},{"had_liked":false,"id":382067,"user_name":"王云峰","can_delete":false,"product_type":"c1","uid":1421980,"ip_address":"浙江","ucode":"699E46BE31495B","user_header":"https://static001.geekbang.org/account/avatar/00/15/b2/9c/b7b9896c.jpg","comment_is_top":false,"comment_ctime":1696648260,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"kafka多文件储存，多磁盘利用率更高。rocket冗余了业务功能比如消息查询、延迟消费等造成性能损失。kafka完全零拷贝收发不需要经过用户态处理","like_count":0},{"had_liked":false,"id":380165,"user_name":"| ~浑蛋~","can_delete":false,"product_type":"c1","uid":3024820,"ip_address":"广东","ucode":"B6904B44DFA805","user_header":"https://static001.geekbang.org/account/avatar/00/2e/27/b4/df65c0f7.jpg","comment_is_top":false,"comment_ctime":1693129723,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"怎么理解存算分离","like_count":0},{"had_liked":false,"id":369130,"user_name":"小红帽","can_delete":false,"product_type":"c1","uid":1135290,"ip_address":"广东","ucode":"876000FB67C980","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/ba/440c0157.jpg","comment_is_top":false,"comment_ctime":1677131836,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"目前我开发的业务是会员增长业务，通过开发各种类型的活动，让用户参与进来活跃业务的数据和拉新。\n在目前业务中，用到消息队列的地方有如下几种场景：\n1、活动参与需要完成指定任务，这些任务是对接其他三方系统的，所以状态也要由他们来通知。\n2、在领奖的时候需要实时对库存进行风控预警、库存预警；\n3、用户抽中实物奖品后需要发送消息让用户及时填写收货地址；\n4、购买svip卡支付、ecp审核后，这种都是异步接收结果的；\n以上场景业务量最多的是领奖数据，一天大概1000w的消息（每秒最高1wqps），而且对实时性要求高，数据一致性要求不高（可以通过人工线下补发）。\nkafka和rocketmq其实都符合我们业务的场景，但我们看中的是他与其他中间件和大数据结合兼容场景多，且集团大多数部门都使用kafka，所以选择kafka作为我们实际开发使用的消息中间件。","like_count":0,"discussions":[{"author":{"id":1896868,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f1/a4/79c36b87.jpg","nickname":"流云","note":"","ucode":"26C5A9166EC6D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251324,"discussion_content":"nsq按文档的说法还不能保证消息顺序","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588080394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188059,"user_name":"slark","can_delete":false,"product_type":"c1","uid":1143574,"ip_address":"","ucode":"7E8DE962AA23A7","user_header":"https://static001.geekbang.org/account/avatar/00/11/73/16/595b0342.jpg","comment_is_top":false,"comment_ctime":1584319384,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"用什么就要要知道为什么，Kafka吞吐量高，有一个原因就是它设计为批量，批量带来可能就会有延迟","like_count":1},{"had_liked":false,"id":159838,"user_name":"刘志兵","can_delete":false,"product_type":"c1","uid":1441734,"ip_address":"","ucode":"A90C2FA49EDC23","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/c6/8b5cbe97.jpg","comment_is_top":false,"comment_ctime":1575806836,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"老师这个总结的真好，清晰明了，以后选型再也不纠结了","like_count":1},{"had_liked":false,"id":149996,"user_name":"恩佐","can_delete":false,"product_type":"c1","uid":1509370,"ip_address":"","ucode":"955C45137073EE","user_header":"https://static001.geekbang.org/account/avatar/00/17/07/fa/62186c97.jpg","comment_is_top":false,"comment_ctime":1573442904,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"架构无所谓好坏，关键是合适。\n这句话就值得买这个课了，赞","like_count":1},{"had_liked":false,"id":118161,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1018370,"ip_address":"","ucode":"7A488CC6FE15E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","comment_is_top":false,"comment_ctime":1564281244,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"刚入职新公司不久，之前对消息队列的认识也只停留在基本概念上。现在在开发的系统是一个结算系统，主要是针对订单的结算，消息中间件采用的是ActiveMQ，比较老，我自己猜测是之前的订单系统设计比较老了（貌似公司大部分系统的消息中间件都是ActiveMQ），这些年应该没有做过较大的升级改造（估计业务体量也没有达到大厂那种大级别）。我们在开发过程中可能会遇到丢消息的情况和在某些时段会有大量消息积压。我觉得我们组当前的系统对消息队列的需求使用之前选的ActiveMQ也够用，但是遇到一些问题，如丢消息，积压等目前可能还不能从本质上认识哪里出了问题。希望学习完这门课能对消息队列这个中间件有个宏观上的理解。","like_count":1},{"had_liked":false,"id":117739,"user_name":"龙猫","can_delete":false,"product_type":"c1","uid":1228191,"ip_address":"","ucode":"F0FC59632BC6F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJB6kaR6vXGP95RvKy6GnmT33EEAkoPJrUCENE0ankWfKicm6QMbfw6yiadNJlIPZEIlPYgIm8mYEwg/132","comment_is_top":false,"comment_ctime":1564122652,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"go的nsq也不错","like_count":1,"discussions":[{"author":{"id":1896868,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f1/a4/79c36b87.jpg","nickname":"流云","note":"","ucode":"26C5A9166EC6D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251324,"discussion_content":"nsq按文档的说法还不能保证消息顺序","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588080394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117634,"user_name":"发条橙子 。","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1564103795,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"总结一波：\n\n三大主流消息队列：\nRabbit mq: 开箱即用 主要重点就是在队列上，性能一般对有消息堆积的场景下支持较弱，每秒处理几万左右 ，语言的原因造成不太好二次维护","like_count":1},{"had_liked":false,"id":117307,"user_name":"Loren","can_delete":false,"product_type":"c1","uid":1270750,"ip_address":"","ucode":"4DF8A106C984F3","user_header":"https://static001.geekbang.org/account/avatar/00/13/63/de/91fada7a.jpg","comment_is_top":false,"comment_ctime":1564021050,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"卡！数据通道 用的kakfa，","like_count":1},{"had_liked":false,"id":382067,"user_name":"王云峰","can_delete":false,"product_type":"c1","uid":1421980,"ip_address":"浙江","ucode":"699E46BE31495B","user_header":"https://static001.geekbang.org/account/avatar/00/15/b2/9c/b7b9896c.jpg","comment_is_top":false,"comment_ctime":1696648260,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"kafka多文件储存，多磁盘利用率更高。rocket冗余了业务功能比如消息查询、延迟消费等造成性能损失。kafka完全零拷贝收发不需要经过用户态处理","like_count":0},{"had_liked":false,"id":380165,"user_name":"| ~浑蛋~","can_delete":false,"product_type":"c1","uid":3024820,"ip_address":"广东","ucode":"B6904B44DFA805","user_header":"https://static001.geekbang.org/account/avatar/00/2e/27/b4/df65c0f7.jpg","comment_is_top":false,"comment_ctime":1693129723,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"怎么理解存算分离","like_count":0},{"had_liked":false,"id":369130,"user_name":"小红帽","can_delete":false,"product_type":"c1","uid":1135290,"ip_address":"广东","ucode":"876000FB67C980","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/ba/440c0157.jpg","comment_is_top":false,"comment_ctime":1677131836,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100032301,"comment_content":"目前我开发的业务是会员增长业务，通过开发各种类型的活动，让用户参与进来活跃业务的数据和拉新。\n在目前业务中，用到消息队列的地方有如下几种场景：\n1、活动参与需要完成指定任务，这些任务是对接其他三方系统的，所以状态也要由他们来通知。\n2、在领奖的时候需要实时对库存进行风控预警、库存预警；\n3、用户抽中实物奖品后需要发送消息让用户及时填写收货地址；\n4、购买svip卡支付、ecp审核后，这种都是异步接收结果的；\n以上场景业务量最多的是领奖数据，一天大概1000w的消息（每秒最高1wqps），而且对实时性要求高，数据一致性要求不高（可以通过人工线下补发）。\nkafka和rocketmq其实都符合我们业务的场景，但我们看中的是他与其他中间件和大数据结合兼容场景多，且集团大多数部门都使用kafka，所以选择kafka作为我们实际开发使用的消息中间件。","like_count":0},{"had_liked":false,"id":364361,"user_name":"Jussi Lee","can_delete":false,"product_type":"c1","uid":1211190,"ip_address":"广东","ucode":"F2F5948CCD52A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/36/fd46331c.jpg","comment_is_top":false,"comment_ctime":1670899965,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"一般选择的时候大家都不知道这三者mq 之间的区别，面试的时候也是回答了一句，我们项目就是这样用的。当问到为啥选他，而不选其他的时候，就不知其所以然了。\n如果说，消息队列并不是你将要构建系统的主角之一，你对消息队列功能和性能都没有很高的要求，只需要一个开箱即用易于维护的产品，我建议你使用 RabbitMQ。如果你的系统使用消息队列主要场景是处理在线业务，比如在交易系统中用消息队列传递订单，那 RocketMQ 的低延迟和金融级的稳定性是你需要的。如果你需要处理海量的消息，像收集日志、监控信息或是前端的埋点这类数据，或是你的应用场景大量使用了大数据、流计算相关的开源产品，那 Kafka 是最适合你的消息队列。","like_count":0},{"had_liked":false,"id":334376,"user_name":"GeekCLei","can_delete":false,"product_type":"c1","uid":1507736,"ip_address":"","ucode":"1DB42BBBB2D478","user_header":"https://static001.geekbang.org/account/avatar/00/17/01/98/d1180ff0.jpg","comment_is_top":false,"comment_ctime":1644907425,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"你好，active mq后来又出了Artemis版本，这个版本跟rocket和rabbit和kafka相比，优劣如何呢？谢谢你 ：）","like_count":0},{"had_liked":false,"id":332544,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1643333884,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"1. 对消息队列的需求是什么样的？==》 主要是为了异步处理。对于延时要求也不高，通常的消息队列均可满足。\n2. 现在选择的消息队列是哪款产品 ==》 AWS SQS ， 本身是因为业务服务器部署在AWS，很多产品都在项目中使用，包括数据库，日志，监控等。 \n关于SQS还需要阅读官方文档才能知晓更多，与上面主流消息队列的区别。","like_count":0},{"had_liked":false,"id":330954,"user_name":"macco","can_delete":false,"product_type":"c1","uid":1186971,"ip_address":"","ucode":"502B3CCF12A096","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/sBdBCczeAia0ZdJ0jqUC4bUv6lpRo2sleTib6M7Mia6d6JrdUfSHATpHWspqGeyibKgvKPcK0Q2pABw7VMaZNRK4CQ/132","comment_is_top":false,"comment_ctime":1642324107,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"我不理解的是：我们公司用的Java语言开发业务，但是消息用的却是NSQ，而不用RocketMQ，在网上查资料发现还是RocketMQ更合适。","like_count":0},{"had_liked":false,"id":324878,"user_name":"友","can_delete":false,"product_type":"c1","uid":2536820,"ip_address":"","ucode":"972A4333A8B101","user_header":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","comment_is_top":false,"comment_ctime":1638698848,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"老师我一直在寻找您会不会说一个 Go编写的MQ  ","like_count":0},{"had_liked":false,"id":323416,"user_name":"Geek_wip5z8","can_delete":false,"product_type":"c1","uid":1114772,"ip_address":"","ucode":"2F075AC7E3847D","user_header":"https://static001.geekbang.org/account/avatar/00/11/02/94/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1637895019,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"我们公司之前使用的是rabbitmq，后来业务量上来，连接数到了瓶颈，切换成emqx了，通过压测得出，2c4g的机器也可以到30w的连接","like_count":0},{"had_liked":false,"id":323091,"user_name":"加油！","can_delete":false,"product_type":"c1","uid":1749015,"ip_address":"","ucode":"947E97762DB6EF","user_header":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","comment_is_top":false,"comment_ctime":1637725382,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"我们使用kafka来做异步处理，主要用与消费端订阅mysql binlog消息，所以要求低延迟、高性能，外加集团推荐kafka，也没别的选择了。。。","like_count":0},{"had_liked":false,"id":302613,"user_name":"Geek_926921","can_delete":false,"product_type":"c1","uid":2532285,"ip_address":"","ucode":"51C3B0178D77E1","user_header":"","comment_is_top":false,"comment_ctime":1626283982,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"今天面试时候被问到为啥kafka仅用在日志处理上面，不用在业务上面，请问这个需要从哪方面去回答，当时被问懵逼了，然后说是kafka不支持消息回溯，自己面试回来查了半天资料也看不出为啥只用在日志上面，","like_count":0},{"had_liked":false,"id":297352,"user_name":"张新贵","can_delete":false,"product_type":"c1","uid":2462347,"ip_address":"","ucode":"0B0F7C14D56BAE","user_header":"","comment_is_top":false,"comment_ctime":1623472158,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"4，打卡，目前在用kafka","like_count":0},{"had_liked":false,"id":364361,"user_name":"Jussi Lee","can_delete":false,"product_type":"c1","uid":1211190,"ip_address":"广东","ucode":"F2F5948CCD52A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/36/fd46331c.jpg","comment_is_top":false,"comment_ctime":1670899965,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"一般选择的时候大家都不知道这三者mq 之间的区别，面试的时候也是回答了一句，我们项目就是这样用的。当问到为啥选他，而不选其他的时候，就不知其所以然了。\n如果说，消息队列并不是你将要构建系统的主角之一，你对消息队列功能和性能都没有很高的要求，只需要一个开箱即用易于维护的产品，我建议你使用 RabbitMQ。如果你的系统使用消息队列主要场景是处理在线业务，比如在交易系统中用消息队列传递订单，那 RocketMQ 的低延迟和金融级的稳定性是你需要的。如果你需要处理海量的消息，像收集日志、监控信息或是前端的埋点这类数据，或是你的应用场景大量使用了大数据、流计算相关的开源产品，那 Kafka 是最适合你的消息队列。","like_count":0},{"had_liked":false,"id":334376,"user_name":"GeekCLei","can_delete":false,"product_type":"c1","uid":1507736,"ip_address":"","ucode":"1DB42BBBB2D478","user_header":"https://static001.geekbang.org/account/avatar/00/17/01/98/d1180ff0.jpg","comment_is_top":false,"comment_ctime":1644907425,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"你好，active mq后来又出了Artemis版本，这个版本跟rocket和rabbit和kafka相比，优劣如何呢？谢谢你 ：）","like_count":0},{"had_liked":false,"id":332544,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1643333884,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"1. 对消息队列的需求是什么样的？==》 主要是为了异步处理。对于延时要求也不高，通常的消息队列均可满足。\n2. 现在选择的消息队列是哪款产品 ==》 AWS SQS ， 本身是因为业务服务器部署在AWS，很多产品都在项目中使用，包括数据库，日志，监控等。 \n关于SQS还需要阅读官方文档才能知晓更多，与上面主流消息队列的区别。","like_count":0},{"had_liked":false,"id":330954,"user_name":"macco","can_delete":false,"product_type":"c1","uid":1186971,"ip_address":"","ucode":"502B3CCF12A096","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/sBdBCczeAia0ZdJ0jqUC4bUv6lpRo2sleTib6M7Mia6d6JrdUfSHATpHWspqGeyibKgvKPcK0Q2pABw7VMaZNRK4CQ/132","comment_is_top":false,"comment_ctime":1642324107,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"我不理解的是：我们公司用的Java语言开发业务，但是消息用的却是NSQ，而不用RocketMQ，在网上查资料发现还是RocketMQ更合适。","like_count":0},{"had_liked":false,"id":324878,"user_name":"友","can_delete":false,"product_type":"c1","uid":2536820,"ip_address":"","ucode":"972A4333A8B101","user_header":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","comment_is_top":false,"comment_ctime":1638698848,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"老师我一直在寻找您会不会说一个 Go编写的MQ  ","like_count":0},{"had_liked":false,"id":323416,"user_name":"Geek_wip5z8","can_delete":false,"product_type":"c1","uid":1114772,"ip_address":"","ucode":"2F075AC7E3847D","user_header":"https://static001.geekbang.org/account/avatar/00/11/02/94/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1637895019,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"我们公司之前使用的是rabbitmq，后来业务量上来，连接数到了瓶颈，切换成emqx了，通过压测得出，2c4g的机器也可以到30w的连接","like_count":0},{"had_liked":false,"id":323091,"user_name":"加油！","can_delete":false,"product_type":"c1","uid":1749015,"ip_address":"","ucode":"947E97762DB6EF","user_header":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","comment_is_top":false,"comment_ctime":1637725382,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"我们使用kafka来做异步处理，主要用与消费端订阅mysql binlog消息，所以要求低延迟、高性能，外加集团推荐kafka，也没别的选择了。。。","like_count":0},{"had_liked":false,"id":302613,"user_name":"Geek_926921","can_delete":false,"product_type":"c1","uid":2532285,"ip_address":"","ucode":"51C3B0178D77E1","user_header":"","comment_is_top":false,"comment_ctime":1626283982,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"今天面试时候被问到为啥kafka仅用在日志处理上面，不用在业务上面，请问这个需要从哪方面去回答，当时被问懵逼了，然后说是kafka不支持消息回溯，自己面试回来查了半天资料也看不出为啥只用在日志上面，","like_count":0,"discussions":[{"author":{"id":1045455,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f3/cf/851dab01.jpg","nickname":"Milittle","note":"","ucode":"80E566639A8ABB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392181,"discussion_content":"大概是batch的处理概念，上面很多评论区讲到了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630890413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297352,"user_name":"张新贵","can_delete":false,"product_type":"c1","uid":2462347,"ip_address":"","ucode":"0B0F7C14D56BAE","user_header":"","comment_is_top":false,"comment_ctime":1623472158,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100032301,"comment_content":"4，打卡，目前在用kafka","like_count":0,"discussions":[{"author":{"id":1045455,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f3/cf/851dab01.jpg","nickname":"Milittle","note":"","ucode":"80E566639A8ABB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392181,"discussion_content":"大概是batch的处理概念，上面很多评论区讲到了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630890413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297246,"user_name":"慕然","can_delete":false,"product_type":"c1","uid":1667714,"ip_address":"","ucode":"8622102560A80F","user_header":"https://static001.geekbang.org/account/avatar/00/19/72/82/24fb9d18.jpg","comment_is_top":false,"comment_ctime":1623393266,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"既然国内金融级稳定用RocketMQ，那国外用什么呢？量大的话RabbitMQ支撑不住，Kafka好像也不合适？有没长得帅的出来说一下？","like_count":0},{"had_liked":false,"id":274290,"user_name":"且听风吟","can_delete":false,"product_type":"c1","uid":2291112,"ip_address":"","ucode":"D7E37D0C3CE45D","user_header":"https://static001.geekbang.org/account/avatar/00/22/f5/a8/f10d2446.jpg","comment_is_top":false,"comment_ctime":1610955984,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"看来还是RocketMQ占优，适合国内开发者。期待JMQ是不是能更胜一筹，还没了解过JMQ","like_count":0},{"had_liked":false,"id":258762,"user_name":"大橘为重","can_delete":false,"product_type":"c1","uid":1106152,"ip_address":"","ucode":"96479F205B8384","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/e8/66439469.jpg","comment_is_top":false,"comment_ctime":1604551257,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"在消息队列的选型上更有把握点了，谢谢","like_count":0},{"had_liked":false,"id":257531,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1604022123,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"我选择的是rabbitmq， 主要是公司早就选择的技术选型，不过根据公司的业务量来所，也算是能满足业务。","like_count":0},{"had_liked":false,"id":244901,"user_name":"Geek_0f31ae","can_delete":false,"product_type":"c1","uid":1870888,"ip_address":"","ucode":"A0F198BEF2AB2F","user_header":"","comment_is_top":false,"comment_ctime":1598740208,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"老师，我们公司用mongodb 做mq，我一度很困惑，难道说只是因为我们公司的数据库是mongodb 吗？","like_count":0},{"had_liked":false,"id":215383,"user_name":"oops","can_delete":false,"product_type":"c1","uid":1102831,"ip_address":"","ucode":"1DEC23A503F8A3","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/ef/9c5e695b.jpg","comment_is_top":false,"comment_ctime":1588985230,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"公司的用得activeMQ准备转rocketMQ","like_count":0},{"had_liked":false,"id":210533,"user_name":"丁小明","can_delete":false,"product_type":"c1","uid":1207622,"ip_address":"","ucode":"CC23857B8D75D5","user_header":"https://static001.geekbang.org/account/avatar/00/12/6d/46/e16291f8.jpg","comment_is_top":false,"comment_ctime":1587784991,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"我们公司研发的新框架为了让之前的业务线能够快速兼容，不得已而使用的rabbitmq和activemq两种队列。感觉activemq是切除不掉了。","like_count":0},{"had_liked":false,"id":209773,"user_name":"大海","can_delete":false,"product_type":"c1","uid":1019725,"ip_address":"","ucode":"7343F3C0CA981D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/4d/65fb45e6.jpg","comment_is_top":false,"comment_ctime":1587611774,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"老师您好，学习了如何选择消息队列后，我还有一个疑问是如何根据系统的硬件情况去合理的配置消息队列的各个参数。\n例如我的一个 SpringBoot 项目中的配置文件中类似：\nspring.rabbitmq.template.retry.enabled=true\nspring.rabbitmq.template.retry.initial-interval=1000\n我怎么去合理的配置 RabbitMQ 这些配置项，来达到最好的利用硬件资源。\n谢谢老师！","like_count":0},{"had_liked":false,"id":204542,"user_name":"Karson","can_delete":false,"product_type":"c1","uid":1008100,"ip_address":"","ucode":"E0286BF6CA7281","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/e4/db3f783b.jpg","comment_is_top":false,"comment_ctime":1586419078,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"最近在为公司选型mq，老师的课程以及留言，给了我很多帮助。\n公司目前采用微服务架构，使用dubbo作为rpc通讯。下一步要选择一款mq框架去解耦业务。\n会在rocketmq和kafka之间做出选择，也可能是两者都用。\n","like_count":0},{"had_liked":false,"id":202611,"user_name":"gtp","can_delete":false,"product_type":"c1","uid":1372089,"ip_address":"","ucode":"12E21307343B3A","user_header":"https://static001.geekbang.org/account/avatar/00/14/ef/b9/c0c12bea.jpg","comment_is_top":false,"comment_ctime":1586015232,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"没有通用的技术，精辟！","like_count":0,"discussions":[{"author":{"id":1023093,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/75/525e53b1.jpg","nickname":"Hobby","note":"","ucode":"8954830380D44F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343940,"discussion_content":"有可能","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611214327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297246,"user_name":"慕然","can_delete":false,"product_type":"c1","uid":1667714,"ip_address":"","ucode":"8622102560A80F","user_header":"https://static001.geekbang.org/account/avatar/00/19/72/82/24fb9d18.jpg","comment_is_top":false,"comment_ctime":1623393266,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"既然国内金融级稳定用RocketMQ，那国外用什么呢？量大的话RabbitMQ支撑不住，Kafka好像也不合适？有没长得帅的出来说一下？","like_count":0},{"had_liked":false,"id":274290,"user_name":"且听风吟","can_delete":false,"product_type":"c1","uid":2291112,"ip_address":"","ucode":"D7E37D0C3CE45D","user_header":"https://static001.geekbang.org/account/avatar/00/22/f5/a8/f10d2446.jpg","comment_is_top":false,"comment_ctime":1610955984,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"看来还是RocketMQ占优，适合国内开发者。期待JMQ是不是能更胜一筹，还没了解过JMQ","like_count":0},{"had_liked":false,"id":258762,"user_name":"大橘为重","can_delete":false,"product_type":"c1","uid":1106152,"ip_address":"","ucode":"96479F205B8384","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/e8/66439469.jpg","comment_is_top":false,"comment_ctime":1604551257,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"在消息队列的选型上更有把握点了，谢谢","like_count":0},{"had_liked":false,"id":257531,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1604022123,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"我选择的是rabbitmq， 主要是公司早就选择的技术选型，不过根据公司的业务量来所，也算是能满足业务。","like_count":0},{"had_liked":false,"id":244901,"user_name":"Geek_0f31ae","can_delete":false,"product_type":"c1","uid":1870888,"ip_address":"","ucode":"A0F198BEF2AB2F","user_header":"","comment_is_top":false,"comment_ctime":1598740208,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"老师，我们公司用mongodb 做mq，我一度很困惑，难道说只是因为我们公司的数据库是mongodb 吗？","like_count":0,"discussions":[{"author":{"id":1023093,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/75/525e53b1.jpg","nickname":"Hobby","note":"","ucode":"8954830380D44F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343940,"discussion_content":"有可能","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611214327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215383,"user_name":"oops","can_delete":false,"product_type":"c1","uid":1102831,"ip_address":"","ucode":"1DEC23A503F8A3","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/ef/9c5e695b.jpg","comment_is_top":false,"comment_ctime":1588985230,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"公司的用得activeMQ准备转rocketMQ","like_count":0},{"had_liked":false,"id":210533,"user_name":"丁小明","can_delete":false,"product_type":"c1","uid":1207622,"ip_address":"","ucode":"CC23857B8D75D5","user_header":"https://static001.geekbang.org/account/avatar/00/12/6d/46/e16291f8.jpg","comment_is_top":false,"comment_ctime":1587784991,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"我们公司研发的新框架为了让之前的业务线能够快速兼容，不得已而使用的rabbitmq和activemq两种队列。感觉activemq是切除不掉了。","like_count":0},{"had_liked":false,"id":209773,"user_name":"大海","can_delete":false,"product_type":"c1","uid":1019725,"ip_address":"","ucode":"7343F3C0CA981D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/4d/65fb45e6.jpg","comment_is_top":false,"comment_ctime":1587611774,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"老师您好，学习了如何选择消息队列后，我还有一个疑问是如何根据系统的硬件情况去合理的配置消息队列的各个参数。\n例如我的一个 SpringBoot 项目中的配置文件中类似：\nspring.rabbitmq.template.retry.enabled=true\nspring.rabbitmq.template.retry.initial-interval=1000\n我怎么去合理的配置 RabbitMQ 这些配置项，来达到最好的利用硬件资源。\n谢谢老师！","like_count":0},{"had_liked":false,"id":204542,"user_name":"Karson","can_delete":false,"product_type":"c1","uid":1008100,"ip_address":"","ucode":"E0286BF6CA7281","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/e4/db3f783b.jpg","comment_is_top":false,"comment_ctime":1586419078,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"最近在为公司选型mq，老师的课程以及留言，给了我很多帮助。\n公司目前采用微服务架构，使用dubbo作为rpc通讯。下一步要选择一款mq框架去解耦业务。\n会在rocketmq和kafka之间做出选择，也可能是两者都用。\n","like_count":0},{"had_liked":false,"id":202611,"user_name":"gtp","can_delete":false,"product_type":"c1","uid":1372089,"ip_address":"","ucode":"12E21307343B3A","user_header":"https://static001.geekbang.org/account/avatar/00/14/ef/b9/c0c12bea.jpg","comment_is_top":false,"comment_ctime":1586015232,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":12,"product_id":100032301,"comment_content":"没有通用的技术，精辟！","like_count":0},{"had_liked":false,"id":188977,"user_name":"💢 星星💢","can_delete":false,"product_type":"c1","uid":1254392,"ip_address":"","ucode":"A402B765222C35","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","comment_is_top":false,"comment_ctime":1584440902,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"反正选择开源且流行的，就是没错。","like_count":0},{"had_liked":false,"id":177241,"user_name":"lakeslove","can_delete":false,"product_type":"c1","uid":1277081,"ip_address":"","ucode":"65E14D29D3C981","user_header":"https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg","comment_is_top":false,"comment_ctime":1581330581,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"我们做的是在线报税系统，把发票传递给业务模块时，用了rabbitMq，当时的考虑是可靠性高，而且大家都熟悉rabbitMq。现在想想，这个选择是正确的，没必要选择rocketMq。后期业务量太大的话，可以考虑更换成rocketMq，但是由于延迟性不能太高，所以kafka始终不是我们需要的选择。","like_count":0},{"had_liked":false,"id":175552,"user_name":"进击的小明","can_delete":false,"product_type":"c1","uid":1737846,"ip_address":"","ucode":"7C9A774C504177","user_header":"https://static001.geekbang.org/account/avatar/00/1a/84/76/6091523d.jpg","comment_is_top":false,"comment_ctime":1580742443,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"老师讲的很好，学到了这些开源消息队列的选择方式，我目前在一家外资银行，消息队列使用的还是IBM Websphere MQ 请问老师要掌握IBM这个消息队列产品，只能去看它们官方的文档资料了吧？","like_count":0},{"had_liked":false,"id":172263,"user_name":"业余爱好者","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1579142437,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"心梗mq学习\n\nmq技术选型。首选开源，流行，生态圈大的产品。必须保证消息的可靠性，支持集群，性能要好。\n\nrabbitmq的特点是迅捷。支持灵活的路由配置，支持的客户端和语言也是最多的。\n但是对消息的堆积支持不好，它认为mq是个管道，消息堆积不正常。堆积时性能急剧下降。是流行的mq中性能最差的。每秒几万到十几万条消息。\n编程语言小众，学习曲线陡峭。\n\nrocketmq是国产mq,没有什么特别之处，像一个品学兼优的学生。性能，稳定性，可靠性都不错。延时较低。每秒几十万条消息。\n没有国外mq流行，生态和兼容性略逊一筹。\n\nkafka的生态和兼容性是最好的，尤其在大数据和流计算领域。使用批量和异步的思想，性能是最高的，与rocketmq没有量级上的差距。\n异步和批量的设计带来了延迟问题。不太适合在线场景。\n\n\n其他mq:\nactivemq,zeromq，pulzr。","like_count":0},{"had_liked":false,"id":171305,"user_name":"gsy_yang","can_delete":false,"product_type":"c1","uid":1263895,"ip_address":"","ucode":"68AE1FC17DDEFD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erKay7VOFxBXR4jHKgnD0TAT8xfmEcZ07qNRmxxNNufPgQgyKXwE7P5xNw2AhvnKXDJI7euzEiaacw/132","comment_is_top":false,"comment_ctime":1578899152,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"开发场景类似平台购买产品--&gt;生成订单---&gt;开通服务，量级不大，主要想学习\n①rocketMQ的事务是如何保证的\n②有序无序\n③消息业务幂等性的处理方案\n④消费端暂时做的开机自启动消费，每添加一个新的组和新的topic都会新增一个新的消费端，如何优化？\n⑤消息异常情况下的处理。","like_count":0},{"had_liked":false,"id":144303,"user_name":"Jedi","can_delete":false,"product_type":"c1","uid":1391707,"ip_address":"","ucode":"65FBDA4A5DA6D9","user_header":"https://static001.geekbang.org/account/avatar/00/15/3c/5b/a4d89578.jpg","comment_is_top":false,"comment_ctime":1571891396,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":138051,"user_name":"十元","can_delete":false,"product_type":"c1","uid":1644243,"ip_address":"","ucode":"558E9BB874B281","user_header":"https://static001.geekbang.org/account/avatar/00/19/16/d3/63ecb257.jpg","comment_is_top":false,"comment_ctime":1569999503,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"赞，字字精华，分别叙述了三个主流产品的优缺点，感觉对消息队列的选型，更加有把握了。","like_count":0},{"had_liked":false,"id":137669,"user_name":"Mr_young","can_delete":false,"product_type":"c1","uid":1207987,"ip_address":"","ucode":"99D0AABDC6A418","user_header":"https://static001.geekbang.org/account/avatar/00/12/6e/b3/b429b821.jpg","comment_is_top":false,"comment_ctime":1569815173,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"当前使用的是RabbitMQ,应用场景需要支持一份生产的数据，需要被不同的服务进行消费应用，同时需要支持处理结果确认，保证数据不丢失。但是在性能上，每秒的处理量在万级，对实时性要求不是特别高，根据本课程的各种MQ的选型，我个人觉得选择的兔子MQ比较合适。还要一个方面，部署方便。另外问下，怎么没有提到京东自研的JMQ，是不是还没开源的原因，有具体的开源时间计划呢","like_count":0},{"had_liked":false,"id":133654,"user_name":"是你","can_delete":false,"product_type":"c1","uid":1597387,"ip_address":"","ucode":"6186AABF20910A","user_header":"https://static001.geekbang.org/account/avatar/00/18/5f/cb/cd5e2f97.jpg","comment_is_top":false,"comment_ctime":1568629290,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"老师, 我们的rocketmq与多个broker(broker-a,broker-b),开启了自动创建主题, 通过rocketmq的监控界面,发现主题只在broker-a里有.而且运行一段时间,这个主题就发不出消息了, broker-a进程都是在的.后面手动在broker-b里用命令添加了这个主题,发送消息才正常.    老师,如何才能在所有的broker上自动创建主题呢, 还有就是为什么broker-a不能发送消息了呢","like_count":0},{"had_liked":false,"id":122574,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1565426937,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"我在银行工作，里边有好多用到MQ的地方，不过从来没想过用的是那种类型的MQ。。。","like_count":0},{"had_liked":false,"id":188977,"user_name":"💢 星星💢","can_delete":false,"product_type":"c1","uid":1254392,"ip_address":"","ucode":"A402B765222C35","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","comment_is_top":false,"comment_ctime":1584440902,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"反正选择开源且流行的，就是没错。","like_count":0},{"had_liked":false,"id":177241,"user_name":"lakeslove","can_delete":false,"product_type":"c1","uid":1277081,"ip_address":"","ucode":"65E14D29D3C981","user_header":"https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg","comment_is_top":false,"comment_ctime":1581330581,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"我们做的是在线报税系统，把发票传递给业务模块时，用了rabbitMq，当时的考虑是可靠性高，而且大家都熟悉rabbitMq。现在想想，这个选择是正确的，没必要选择rocketMq。后期业务量太大的话，可以考虑更换成rocketMq，但是由于延迟性不能太高，所以kafka始终不是我们需要的选择。","like_count":0},{"had_liked":false,"id":175552,"user_name":"进击的小明","can_delete":false,"product_type":"c1","uid":1737846,"ip_address":"","ucode":"7C9A774C504177","user_header":"https://static001.geekbang.org/account/avatar/00/1a/84/76/6091523d.jpg","comment_is_top":false,"comment_ctime":1580742443,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"老师讲的很好，学到了这些开源消息队列的选择方式，我目前在一家外资银行，消息队列使用的还是IBM Websphere MQ 请问老师要掌握IBM这个消息队列产品，只能去看它们官方的文档资料了吧？","like_count":0},{"had_liked":false,"id":172263,"user_name":"业余爱好者","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1579142437,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"心梗mq学习\n\nmq技术选型。首选开源，流行，生态圈大的产品。必须保证消息的可靠性，支持集群，性能要好。\n\nrabbitmq的特点是迅捷。支持灵活的路由配置，支持的客户端和语言也是最多的。\n但是对消息的堆积支持不好，它认为mq是个管道，消息堆积不正常。堆积时性能急剧下降。是流行的mq中性能最差的。每秒几万到十几万条消息。\n编程语言小众，学习曲线陡峭。\n\nrocketmq是国产mq,没有什么特别之处，像一个品学兼优的学生。性能，稳定性，可靠性都不错。延时较低。每秒几十万条消息。\n没有国外mq流行，生态和兼容性略逊一筹。\n\nkafka的生态和兼容性是最好的，尤其在大数据和流计算领域。使用批量和异步的思想，性能是最高的，与rocketmq没有量级上的差距。\n异步和批量的设计带来了延迟问题。不太适合在线场景。\n\n\n其他mq:\nactivemq,zeromq，pulzr。","like_count":0},{"had_liked":false,"id":171305,"user_name":"gsy_yang","can_delete":false,"product_type":"c1","uid":1263895,"ip_address":"","ucode":"68AE1FC17DDEFD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erKay7VOFxBXR4jHKgnD0TAT8xfmEcZ07qNRmxxNNufPgQgyKXwE7P5xNw2AhvnKXDJI7euzEiaacw/132","comment_is_top":false,"comment_ctime":1578899152,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"开发场景类似平台购买产品--&gt;生成订单---&gt;开通服务，量级不大，主要想学习\n①rocketMQ的事务是如何保证的\n②有序无序\n③消息业务幂等性的处理方案\n④消费端暂时做的开机自启动消费，每添加一个新的组和新的topic都会新增一个新的消费端，如何优化？\n⑤消息异常情况下的处理。","like_count":0},{"had_liked":false,"id":144303,"user_name":"Jedi","can_delete":false,"product_type":"c1","uid":1391707,"ip_address":"","ucode":"65FBDA4A5DA6D9","user_header":"https://static001.geekbang.org/account/avatar/00/15/3c/5b/a4d89578.jpg","comment_is_top":false,"comment_ctime":1571891396,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":138051,"user_name":"十元","can_delete":false,"product_type":"c1","uid":1644243,"ip_address":"","ucode":"558E9BB874B281","user_header":"https://static001.geekbang.org/account/avatar/00/19/16/d3/63ecb257.jpg","comment_is_top":false,"comment_ctime":1569999503,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"赞，字字精华，分别叙述了三个主流产品的优缺点，感觉对消息队列的选型，更加有把握了。","like_count":0},{"had_liked":false,"id":137669,"user_name":"Mr_young","can_delete":false,"product_type":"c1","uid":1207987,"ip_address":"","ucode":"99D0AABDC6A418","user_header":"https://static001.geekbang.org/account/avatar/00/12/6e/b3/b429b821.jpg","comment_is_top":false,"comment_ctime":1569815173,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"当前使用的是RabbitMQ,应用场景需要支持一份生产的数据，需要被不同的服务进行消费应用，同时需要支持处理结果确认，保证数据不丢失。但是在性能上，每秒的处理量在万级，对实时性要求不是特别高，根据本课程的各种MQ的选型，我个人觉得选择的兔子MQ比较合适。还要一个方面，部署方便。另外问下，怎么没有提到京东自研的JMQ，是不是还没开源的原因，有具体的开源时间计划呢","like_count":0},{"had_liked":false,"id":133654,"user_name":"是你","can_delete":false,"product_type":"c1","uid":1597387,"ip_address":"","ucode":"6186AABF20910A","user_header":"https://static001.geekbang.org/account/avatar/00/18/5f/cb/cd5e2f97.jpg","comment_is_top":false,"comment_ctime":1568629290,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"老师, 我们的rocketmq与多个broker(broker-a,broker-b),开启了自动创建主题, 通过rocketmq的监控界面,发现主题只在broker-a里有.而且运行一段时间,这个主题就发不出消息了, broker-a进程都是在的.后面手动在broker-b里用命令添加了这个主题,发送消息才正常.    老师,如何才能在所有的broker上自动创建主题呢, 还有就是为什么broker-a不能发送消息了呢","like_count":0},{"had_liked":false,"id":122574,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1565426937,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":13,"product_id":100032301,"comment_content":"我在银行工作，里边有好多用到MQ的地方，不过从来没想过用的是那种类型的MQ。。。","like_count":0},{"had_liked":false,"id":121649,"user_name":"德德","can_delete":false,"product_type":"c1","uid":1027831,"ip_address":"","ucode":"963DEE6FBFE9AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/f7/6c6cb0a6.jpg","comment_is_top":false,"comment_ctime":1565177760,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"nats呢","like_count":0},{"had_liked":false,"id":120966,"user_name":"凌天","can_delete":false,"product_type":"c1","uid":1109551,"ip_address":"","ucode":"761344882F4432","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/2f/aecf69a5.jpg","comment_is_top":false,"comment_ctime":1565019482,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"目前三个主流的公司都有使用，百花齐放。先开发自己来运维，逐步再交给运维","like_count":0},{"had_liked":false,"id":120652,"user_name":"山头","can_delete":false,"product_type":"c1","uid":1610142,"ip_address":"","ucode":"9CD45A7966F37E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/kQ0NueqD3LTRravKIH2DgtqFKLqgjZQicDZtibdTqJ8pBRjNwlKornibGj2qibPdsgLXh2xQ3MesQ7q2JyATIEBphVHpcS2iaboZqATms4IDUibes/132","comment_is_top":false,"comment_ctime":1564967130,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"林总的jmq组","like_count":0},{"had_liked":false,"id":120414,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1250758,"ip_address":"","ucode":"EB9FFA94D2F24B","user_header":"https://static001.geekbang.org/account/avatar/00/13/15/c6/f5c543ef.jpg","comment_is_top":false,"comment_ctime":1564887462,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"干货满满啊。","like_count":0},{"had_liked":false,"id":119839,"user_name":"dykw","can_delete":false,"product_type":"c1","uid":1412912,"ip_address":"","ucode":"513D787379E158","user_header":"https://static001.geekbang.org/account/avatar/00/15/8f/30/ae34a463.jpg","comment_is_top":false,"comment_ctime":1564710442,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"原来用过kafka，由于数据量级蛮大，对延迟没啥要求，如果使用rabbitMq同步不怎么好 ;现在用的rabbitMq,消息量没那么大，但是如果后期量起来，需要对吞吐量进一步优化的话，就要好好考虑了","like_count":0},{"had_liked":false,"id":119274,"user_name":"Panda","can_delete":false,"product_type":"c1","uid":1095740,"ip_address":"","ucode":"911A200C7B18BE","user_header":"https://static001.geekbang.org/account/avatar/00/10/b8/3c/1a294619.jpg","comment_is_top":false,"comment_ctime":1564548817,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"看好 Pulsar ","like_count":0},{"had_liked":false,"id":119134,"user_name":"苦行僧","can_delete":false,"product_type":"c1","uid":1055334,"ip_address":"","ucode":"726024A9A9CF44","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","comment_is_top":false,"comment_ctime":1564530657,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"我们用的就是上古的activemq，客户端消息监听，服务端推送，老师broker无法在多个消费者监听的情况下保证有序性，总会出现后入的消息先消费掉？","like_count":0},{"had_liked":false,"id":119002,"user_name":"sasmiditer","can_delete":false,"product_type":"c1","uid":1158519,"ip_address":"","ucode":"C82AE609CFB223","user_header":"https://static001.geekbang.org/account/avatar/00/11/ad/77/f81c61d6.jpg","comment_is_top":false,"comment_ctime":1564483586,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"能说说和dds的区别吗","like_count":0},{"had_liked":false,"id":118705,"user_name":"beiler","can_delete":false,"product_type":"c1","uid":1192989,"ip_address":"","ucode":"0A62FE86617486","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/1d/169cd800.jpg","comment_is_top":false,"comment_ctime":1564418097,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"我们最开始选择了rabbitmq，主要感觉他在获取数据后如果处理失败这条消息不会被消费而被回收，感觉很棒，但是后来由于实施人员用不明白我们就换成了redis………只能说够用……","like_count":0},{"had_liked":false,"id":118652,"user_name":"梅云霞","can_delete":false,"product_type":"c1","uid":1400992,"ip_address":"","ucode":"01C8F85B59A202","user_header":"https://static001.geekbang.org/account/avatar/00/15/60/a0/dc0bf77c.jpg","comment_is_top":false,"comment_ctime":1564406712,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"打卡","like_count":0,"discussions":[{"author":{"id":1108673,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ea/c1/3a0eb385.jpg","nickname":"Andrew DP","note":"","ucode":"814BBD97587BC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3762,"discussion_content":"消息顺序消息队列不保证的，通常的做法是以一个单节点服务来保证消息有序性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564793684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121649,"user_name":"德德","can_delete":false,"product_type":"c1","uid":1027831,"ip_address":"","ucode":"963DEE6FBFE9AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/f7/6c6cb0a6.jpg","comment_is_top":false,"comment_ctime":1565177760,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"nats呢","like_count":0},{"had_liked":false,"id":120966,"user_name":"凌天","can_delete":false,"product_type":"c1","uid":1109551,"ip_address":"","ucode":"761344882F4432","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/2f/aecf69a5.jpg","comment_is_top":false,"comment_ctime":1565019482,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"目前三个主流的公司都有使用，百花齐放。先开发自己来运维，逐步再交给运维","like_count":0},{"had_liked":false,"id":120652,"user_name":"山头","can_delete":false,"product_type":"c1","uid":1610142,"ip_address":"","ucode":"9CD45A7966F37E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/kQ0NueqD3LTRravKIH2DgtqFKLqgjZQicDZtibdTqJ8pBRjNwlKornibGj2qibPdsgLXh2xQ3MesQ7q2JyATIEBphVHpcS2iaboZqATms4IDUibes/132","comment_is_top":false,"comment_ctime":1564967130,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"林总的jmq组","like_count":0},{"had_liked":false,"id":120414,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1250758,"ip_address":"","ucode":"EB9FFA94D2F24B","user_header":"https://static001.geekbang.org/account/avatar/00/13/15/c6/f5c543ef.jpg","comment_is_top":false,"comment_ctime":1564887462,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"干货满满啊。","like_count":0},{"had_liked":false,"id":119839,"user_name":"dykw","can_delete":false,"product_type":"c1","uid":1412912,"ip_address":"","ucode":"513D787379E158","user_header":"https://static001.geekbang.org/account/avatar/00/15/8f/30/ae34a463.jpg","comment_is_top":false,"comment_ctime":1564710442,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"原来用过kafka，由于数据量级蛮大，对延迟没啥要求，如果使用rabbitMq同步不怎么好 ;现在用的rabbitMq,消息量没那么大，但是如果后期量起来，需要对吞吐量进一步优化的话，就要好好考虑了","like_count":0},{"had_liked":false,"id":119274,"user_name":"Panda","can_delete":false,"product_type":"c1","uid":1095740,"ip_address":"","ucode":"911A200C7B18BE","user_header":"https://static001.geekbang.org/account/avatar/00/10/b8/3c/1a294619.jpg","comment_is_top":false,"comment_ctime":1564548817,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"看好 Pulsar ","like_count":0},{"had_liked":false,"id":119134,"user_name":"苦行僧","can_delete":false,"product_type":"c1","uid":1055334,"ip_address":"","ucode":"726024A9A9CF44","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","comment_is_top":false,"comment_ctime":1564530657,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"我们用的就是上古的activemq，客户端消息监听，服务端推送，老师broker无法在多个消费者监听的情况下保证有序性，总会出现后入的消息先消费掉？","like_count":0,"discussions":[{"author":{"id":1108673,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ea/c1/3a0eb385.jpg","nickname":"Andrew DP","note":"","ucode":"814BBD97587BC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3762,"discussion_content":"消息顺序消息队列不保证的，通常的做法是以一个单节点服务来保证消息有序性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564793684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119002,"user_name":"sasmiditer","can_delete":false,"product_type":"c1","uid":1158519,"ip_address":"","ucode":"C82AE609CFB223","user_header":"https://static001.geekbang.org/account/avatar/00/11/ad/77/f81c61d6.jpg","comment_is_top":false,"comment_ctime":1564483586,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"能说说和dds的区别吗","like_count":0},{"had_liked":false,"id":118705,"user_name":"beiler","can_delete":false,"product_type":"c1","uid":1192989,"ip_address":"","ucode":"0A62FE86617486","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/1d/169cd800.jpg","comment_is_top":false,"comment_ctime":1564418097,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"我们最开始选择了rabbitmq，主要感觉他在获取数据后如果处理失败这条消息不会被消费而被回收，感觉很棒，但是后来由于实施人员用不明白我们就换成了redis………只能说够用……","like_count":0},{"had_liked":false,"id":118652,"user_name":"梅云霞","can_delete":false,"product_type":"c1","uid":1400992,"ip_address":"","ucode":"01C8F85B59A202","user_header":"https://static001.geekbang.org/account/avatar/00/15/60/a0/dc0bf77c.jpg","comment_is_top":false,"comment_ctime":1564406712,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":14,"product_id":100032301,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":118214,"user_name":"好饿早知道送外卖了","can_delete":false,"product_type":"c1","uid":1132304,"ip_address":"","ucode":"AED22DB5BF8FC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/10/2d673601.jpg","comment_is_top":false,"comment_ctime":1564294058,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"👍真棒","like_count":0},{"had_liked":false,"id":118060,"user_name":"看不到de颜色","can_delete":false,"product_type":"c1","uid":1162714,"ip_address":"","ucode":"88348CCAE81931","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/da/3d76ea74.jpg","comment_is_top":false,"comment_ctime":1564221424,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"哈哈，想知道我司JMQ更像那种开源的MQ。","like_count":0},{"had_liked":false,"id":118021,"user_name":"DeathKnightH","can_delete":false,"product_type":"c1","uid":1058526,"ip_address":"","ucode":"632E00A01247A3","user_header":"","comment_is_top":false,"comment_ctime":1564213573,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"现在开发的系统对消息队列的要求：\n1.性能每秒几千到几万条消息\n2.使用简单\n3.对响应延迟无要求\n\n目前还没有使用消息队列，综合本节课程，我个人偏向于选择RabbitMQ，理由有三条：\n1.消息数量不大，对吞吐量要求不高。\n2.不作为业务系统，对响应延迟也没有要求\n3.开箱即用，使用起来不需要太多学习门槛\n","like_count":0},{"had_liked":false,"id":118013,"user_name":"Fortune","can_delete":false,"product_type":"c1","uid":1508654,"ip_address":"","ucode":"6B9465AC996523","user_header":"https://static001.geekbang.org/account/avatar/00/17/05/2e/5a6b6b6e.jpg","comment_is_top":false,"comment_ctime":1564212617,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"打卡，首先谢谢老师的分享，老师的讲解风格真的很好，是我订阅的几个老师里面，讲的容易理解，通俗易懂，逻辑层次真的很清晰，这个给老师点个赞，因为其他老师讲的很好，但是有些细点的内容还是会让我比较难理解哈，可能是我个人理解的原因哈，启发：我目前系统还没有队列这块，从老师的讲解里面，我觉得哈，可以用roketMQ在业务层面，并且我涉及到系统是金融这块的哈，如果涉及大数据这块和流计算这块用kafka收集日志,并且roketMQ有阿里的背书，并且近年来阿里在不断拥抱开源等。打卡完毕，感谢！","like_count":0},{"had_liked":false,"id":117917,"user_name":"我瑟瑟的方法","can_delete":false,"product_type":"c1","uid":1065819,"ip_address":"","ucode":"1364CD531E1B72","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/5b/17fef3ba.jpg","comment_is_top":false,"comment_ctime":1564191489,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"Metaq是阿里内部叫法，就是rocket mq","like_count":0},{"had_liked":false,"id":117637,"user_name":"发条橙子 。","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1564104005,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"怎么我往右点一下 就会碰到发布.....","like_count":0},{"had_liked":false,"id":117635,"user_name":"发条橙子 。","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1564103951,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"总结一波：\n\n三大主流消息队列：\n\nRabbit mq: 开箱即用 主要重点就是在队列上，性能一般对有消息堆积的场景下支持较弱，每秒处理几万左右 ，语言的原因造成不太好二次维护\n\nRocket mq: 早期由阿里开源出来 ，所以中文社区和文档比较多，由java开发可二次维护成本高，","like_count":0},{"had_liked":false,"id":117617,"user_name":"小伟","can_delete":false,"product_type":"c1","uid":1359701,"ip_address":"","ucode":"124953423491E2","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/55/198c6104.jpg","comment_is_top":false,"comment_ctime":1564102683,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"公司去年做个了gdpr的项目，需要对大量审计数据做etl和聚合，用的kafka，感觉还是挺好的，因为不是在线系统不涉及性能，但看稳定性还是不错的","like_count":0},{"had_liked":false,"id":117553,"user_name":"爱科幻爱魔法细节控","can_delete":false,"product_type":"c1","uid":1275753,"ip_address":"","ucode":"BEECFA102FA711","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoAgs66iaTKNaTZtFJibhNWYhudlpv39r6gmy5Joj3DB32VZvrYqcguOYExVjfJ7UQHr5AXvjMceia3g/132","comment_is_top":false,"comment_ctime":1564073749,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":117508,"user_name":"骅子","can_delete":false,"product_type":"c1","uid":1614439,"ip_address":"","ucode":"5B73B2CA31A374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJE3icOZFWfVR2kRibFp021wUzsdW7iaRSQiapRgBFgIMm9CarRT3ia0TqtK5mlveoBwbPPpsuTiaudAhlA/132","comment_is_top":false,"comment_ctime":1564064264,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"打卡，kafka+flink","like_count":0},{"had_liked":false,"id":118214,"user_name":"好饿早知道送外卖了","can_delete":false,"product_type":"c1","uid":1132304,"ip_address":"","ucode":"AED22DB5BF8FC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/10/2d673601.jpg","comment_is_top":false,"comment_ctime":1564294058,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"👍真棒","like_count":0},{"had_liked":false,"id":118060,"user_name":"看不到de颜色","can_delete":false,"product_type":"c1","uid":1162714,"ip_address":"","ucode":"88348CCAE81931","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/da/3d76ea74.jpg","comment_is_top":false,"comment_ctime":1564221424,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"哈哈，想知道我司JMQ更像那种开源的MQ。","like_count":0},{"had_liked":false,"id":118021,"user_name":"DeathKnightH","can_delete":false,"product_type":"c1","uid":1058526,"ip_address":"","ucode":"632E00A01247A3","user_header":"","comment_is_top":false,"comment_ctime":1564213573,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"现在开发的系统对消息队列的要求：\n1.性能每秒几千到几万条消息\n2.使用简单\n3.对响应延迟无要求\n\n目前还没有使用消息队列，综合本节课程，我个人偏向于选择RabbitMQ，理由有三条：\n1.消息数量不大，对吞吐量要求不高。\n2.不作为业务系统，对响应延迟也没有要求\n3.开箱即用，使用起来不需要太多学习门槛\n","like_count":0,"discussions":[{"author":{"id":1394861,"avatar":"https://static001.geekbang.org/account/avatar/00/15/48/ad/8be724da.jpg","nickname":"陈泽坛","note":"","ucode":"C81B402868E9E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3422,"discussion_content":"打卡~~~ 公司用的是兔子。  但是自己在处理日志相关的，想用kafka","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564473165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118013,"user_name":"Fortune","can_delete":false,"product_type":"c1","uid":1508654,"ip_address":"","ucode":"6B9465AC996523","user_header":"https://static001.geekbang.org/account/avatar/00/17/05/2e/5a6b6b6e.jpg","comment_is_top":false,"comment_ctime":1564212617,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"打卡，首先谢谢老师的分享，老师的讲解风格真的很好，是我订阅的几个老师里面，讲的容易理解，通俗易懂，逻辑层次真的很清晰，这个给老师点个赞，因为其他老师讲的很好，但是有些细点的内容还是会让我比较难理解哈，可能是我个人理解的原因哈，启发：我目前系统还没有队列这块，从老师的讲解里面，我觉得哈，可以用roketMQ在业务层面，并且我涉及到系统是金融这块的哈，如果涉及大数据这块和流计算这块用kafka收集日志,并且roketMQ有阿里的背书，并且近年来阿里在不断拥抱开源等。打卡完毕，感谢！","like_count":0},{"had_liked":false,"id":117917,"user_name":"我瑟瑟的方法","can_delete":false,"product_type":"c1","uid":1065819,"ip_address":"","ucode":"1364CD531E1B72","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/5b/17fef3ba.jpg","comment_is_top":false,"comment_ctime":1564191489,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"Metaq是阿里内部叫法，就是rocket mq","like_count":0},{"had_liked":false,"id":117637,"user_name":"发条橙子 。","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1564104005,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"怎么我往右点一下 就会碰到发布.....","like_count":0},{"had_liked":false,"id":117635,"user_name":"发条橙子 。","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1564103951,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"总结一波：\n\n三大主流消息队列：\n\nRabbit mq: 开箱即用 主要重点就是在队列上，性能一般对有消息堆积的场景下支持较弱，每秒处理几万左右 ，语言的原因造成不太好二次维护\n\nRocket mq: 早期由阿里开源出来 ，所以中文社区和文档比较多，由java开发可二次维护成本高，","like_count":0},{"had_liked":false,"id":117617,"user_name":"小伟","can_delete":false,"product_type":"c1","uid":1359701,"ip_address":"","ucode":"124953423491E2","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/55/198c6104.jpg","comment_is_top":false,"comment_ctime":1564102683,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"公司去年做个了gdpr的项目，需要对大量审计数据做etl和聚合，用的kafka，感觉还是挺好的，因为不是在线系统不涉及性能，但看稳定性还是不错的","like_count":0},{"had_liked":false,"id":117553,"user_name":"爱科幻爱魔法细节控","can_delete":false,"product_type":"c1","uid":1275753,"ip_address":"","ucode":"BEECFA102FA711","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoAgs66iaTKNaTZtFJibhNWYhudlpv39r6gmy5Joj3DB32VZvrYqcguOYExVjfJ7UQHr5AXvjMceia3g/132","comment_is_top":false,"comment_ctime":1564073749,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":117508,"user_name":"骅子","can_delete":false,"product_type":"c1","uid":1614439,"ip_address":"","ucode":"5B73B2CA31A374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJE3icOZFWfVR2kRibFp021wUzsdW7iaRSQiapRgBFgIMm9CarRT3ia0TqtK5mlveoBwbPPpsuTiaudAhlA/132","comment_is_top":false,"comment_ctime":1564064264,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":15,"product_id":100032301,"comment_content":"打卡，kafka+flink","like_count":0,"discussions":[{"author":{"id":1394861,"avatar":"https://static001.geekbang.org/account/avatar/00/15/48/ad/8be724da.jpg","nickname":"陈泽坛","note":"","ucode":"C81B402868E9E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3422,"discussion_content":"打卡~~~ 公司用的是兔子。  但是自己在处理日志相关的，想用kafka","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564473165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117501,"user_name":"盏子","can_delete":false,"product_type":"c1","uid":1205421,"ip_address":"","ucode":"1694100877EFFF","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/ad/a58ad8e6.jpg","comment_is_top":false,"comment_ctime":1564062000,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"目前在用rabbitmq，灵活的topic路由机制，十分舒适啊","like_count":0},{"had_liked":false,"id":117460,"user_name":"陈亦凡","can_delete":false,"product_type":"c1","uid":1071734,"ip_address":"","ucode":"52A0731541792D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5a/76/3f8dcda6.jpg","comment_is_top":false,"comment_ctime":1564052186,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"有个项目用的zeromq，但是server端部署的是遗留的服务，没法维护，业务只是需要一个轻量级的消息队列，这种情况下及时替换为rabbitmq是","like_count":0},{"had_liked":false,"id":117416,"user_name":"HDZ","can_delete":false,"product_type":"c1","uid":1239063,"ip_address":"","ucode":"5E0E5ECDF86F61","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/17/6c9a12c6.jpg","comment_is_top":false,"comment_ctime":1564043176,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":117362,"user_name":"一个小西瓜🍉","can_delete":false,"product_type":"c1","uid":1083393,"ip_address":"","ucode":"59D38C97758304","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/01/2bc57cd0.jpg","comment_is_top":false,"comment_ctime":1564031680,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"上家公司用的是基于开源nsq进行二次开发的消息中间件。","like_count":0},{"had_liked":false,"id":117324,"user_name":"Bug? Feature!","can_delete":false,"product_type":"c1","uid":1164531,"ip_address":"","ucode":"F8FA8A0094FBA0","user_header":"https://static001.geekbang.org/account/avatar/00/11/c4/f3/92f654f1.jpg","comment_is_top":false,"comment_ctime":1564024117,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"RabbitMQ还是比较流行，不是特别在意性能的话，阔以考虑！Kafka一般都应用于大数据领域！","like_count":0},{"had_liked":false,"id":117319,"user_name":"sayid","can_delete":false,"product_type":"c1","uid":1101465,"ip_address":"","ucode":"E40E0D86768DCA","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/99/4382727b.jpg","comment_is_top":false,"comment_ctime":1564023538,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"采用rabbitMQ,  有良好的运维界面，仅仅只是使用消息队列功能，用于异步和业务模块解耦，对性能要求不是很高。rabbitMQ能满足现阶段需求","like_count":0},{"had_liked":false,"id":117298,"user_name":"风中花","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1564020112,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"打卡 目前我也再学习kafka ,正好比较着学习。希望老师得干货满满得","like_count":0},{"had_liked":false,"id":117246,"user_name":"hu big sea","can_delete":false,"product_type":"c1","uid":1486549,"ip_address":"","ucode":"489F9B4BF819FF","user_header":"https://static001.geekbang.org/account/avatar/00/16/ae/d5/abe7078a.jpg","comment_is_top":false,"comment_ctime":1564015422,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"银弹……莫名想到并发编程实战呢……","like_count":0},{"had_liked":false,"id":117237,"user_name":"略。。。。。。。","can_delete":false,"product_type":"c1","uid":1613315,"ip_address":"","ucode":"7CCDF4D6DC28C3","user_header":"https://static001.geekbang.org/account/avatar/00/18/9e/03/12079f39.jpg","comment_is_top":false,"comment_ctime":1564014069,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":117230,"user_name":"miniluo","can_delete":false,"product_type":"c1","uid":1397339,"ip_address":"","ucode":"5735B6DEE7902B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/FheCgo4Ovibo0L1vAGgMdZkzQMm1GUMHMMqQ8aglufXaD2hW9z96DjQicAam723jOCZwXVmiaNiaaq4PLsf4COibZ5A/132","comment_is_top":false,"comment_ctime":1564013478,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"目前采用的是rabbitmq，业务量不大，足以满足未来1-2年业务发展","like_count":0},{"had_liked":false,"id":117501,"user_name":"盏子","can_delete":false,"product_type":"c1","uid":1205421,"ip_address":"","ucode":"1694100877EFFF","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/ad/a58ad8e6.jpg","comment_is_top":false,"comment_ctime":1564062000,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"目前在用rabbitmq，灵活的topic路由机制，十分舒适啊","like_count":0},{"had_liked":false,"id":117460,"user_name":"陈亦凡","can_delete":false,"product_type":"c1","uid":1071734,"ip_address":"","ucode":"52A0731541792D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5a/76/3f8dcda6.jpg","comment_is_top":false,"comment_ctime":1564052186,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"有个项目用的zeromq，但是server端部署的是遗留的服务，没法维护，业务只是需要一个轻量级的消息队列，这种情况下及时替换为rabbitmq是","like_count":0},{"had_liked":false,"id":117416,"user_name":"HDZ","can_delete":false,"product_type":"c1","uid":1239063,"ip_address":"","ucode":"5E0E5ECDF86F61","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/17/6c9a12c6.jpg","comment_is_top":false,"comment_ctime":1564043176,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":117362,"user_name":"一个小西瓜🍉","can_delete":false,"product_type":"c1","uid":1083393,"ip_address":"","ucode":"59D38C97758304","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/01/2bc57cd0.jpg","comment_is_top":false,"comment_ctime":1564031680,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"上家公司用的是基于开源nsq进行二次开发的消息中间件。","like_count":0},{"had_liked":false,"id":117324,"user_name":"Bug? Feature!","can_delete":false,"product_type":"c1","uid":1164531,"ip_address":"","ucode":"F8FA8A0094FBA0","user_header":"https://static001.geekbang.org/account/avatar/00/11/c4/f3/92f654f1.jpg","comment_is_top":false,"comment_ctime":1564024117,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"RabbitMQ还是比较流行，不是特别在意性能的话，阔以考虑！Kafka一般都应用于大数据领域！","like_count":0},{"had_liked":false,"id":117319,"user_name":"sayid","can_delete":false,"product_type":"c1","uid":1101465,"ip_address":"","ucode":"E40E0D86768DCA","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/99/4382727b.jpg","comment_is_top":false,"comment_ctime":1564023538,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"采用rabbitMQ,  有良好的运维界面，仅仅只是使用消息队列功能，用于异步和业务模块解耦，对性能要求不是很高。rabbitMQ能满足现阶段需求","like_count":0},{"had_liked":false,"id":117298,"user_name":"风中花","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1564020112,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"打卡 目前我也再学习kafka ,正好比较着学习。希望老师得干货满满得","like_count":0},{"had_liked":false,"id":117246,"user_name":"hu big sea","can_delete":false,"product_type":"c1","uid":1486549,"ip_address":"","ucode":"489F9B4BF819FF","user_header":"https://static001.geekbang.org/account/avatar/00/16/ae/d5/abe7078a.jpg","comment_is_top":false,"comment_ctime":1564015422,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"银弹……莫名想到并发编程实战呢……","like_count":0},{"had_liked":false,"id":117237,"user_name":"略。。。。。。。","can_delete":false,"product_type":"c1","uid":1613315,"ip_address":"","ucode":"7CCDF4D6DC28C3","user_header":"https://static001.geekbang.org/account/avatar/00/18/9e/03/12079f39.jpg","comment_is_top":false,"comment_ctime":1564014069,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":117230,"user_name":"miniluo","can_delete":false,"product_type":"c1","uid":1397339,"ip_address":"","ucode":"5735B6DEE7902B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/FheCgo4Ovibo0L1vAGgMdZkzQMm1GUMHMMqQ8aglufXaD2hW9z96DjQicAam723jOCZwXVmiaNiaaq4PLsf4COibZ5A/132","comment_is_top":false,"comment_ctime":1564013478,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":16,"product_id":100032301,"comment_content":"目前采用的是rabbitmq，业务量不大，足以满足未来1-2年业务发展","like_count":0},{"had_liked":false,"id":117227,"user_name":"没意思","can_delete":false,"product_type":"c1","uid":1410723,"ip_address":"","ucode":"C3EE16CF216D8C","user_header":"https://static001.geekbang.org/account/avatar/00/15/86/a3/2c6b2407.jpg","comment_is_top":false,"comment_ctime":1564012862,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"打卡第二天","like_count":0},{"had_liked":false,"id":117226,"user_name":"白小白","can_delete":false,"product_type":"c1","uid":1400416,"ip_address":"","ucode":"143F1C8294818A","user_header":"https://static001.geekbang.org/account/avatar/00/15/5e/60/1c13626b.jpg","comment_is_top":false,"comment_ctime":1564012802,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"当前的业务需求是要处理大量的日志消息，所以在用的是Kafka。之前在做订单处理的时候用的是rocketmq。\n目前的日志消息很庞大，不过Kafka都能很好的处理。因为是处理日志的原因，所以对消息的瞬时性没有太高的要求，哈哈，哪些延迟都被包容性的忽略掉了。","like_count":0},{"had_liked":false,"id":117214,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1564011161,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"打卡04","like_count":0},{"had_liked":false,"id":117207,"user_name":"驴在囧途","can_delete":false,"product_type":"c1","uid":1463269,"ip_address":"","ucode":"DC3EE6F3FEB6C1","user_header":"https://static001.geekbang.org/account/avatar/00/16/53/e5/88b220cf.jpg","comment_is_top":false,"comment_ctime":1564008431,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"我也打个卡","like_count":0},{"had_liked":false,"id":117203,"user_name":"Tx爱上360","can_delete":false,"product_type":"c1","uid":1363968,"ip_address":"","ucode":"FE0577CBB623E4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/00/b037b74f.jpg","comment_is_top":false,"comment_ctime":1563991989,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"打卡，滴，第二天👻","like_count":0},{"had_liked":false,"id":117227,"user_name":"没意思","can_delete":false,"product_type":"c1","uid":1410723,"ip_address":"","ucode":"C3EE16CF216D8C","user_header":"https://static001.geekbang.org/account/avatar/00/15/86/a3/2c6b2407.jpg","comment_is_top":false,"comment_ctime":1564012862,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"打卡第二天","like_count":0},{"had_liked":false,"id":117226,"user_name":"白小白","can_delete":false,"product_type":"c1","uid":1400416,"ip_address":"","ucode":"143F1C8294818A","user_header":"https://static001.geekbang.org/account/avatar/00/15/5e/60/1c13626b.jpg","comment_is_top":false,"comment_ctime":1564012802,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"当前的业务需求是要处理大量的日志消息，所以在用的是Kafka。之前在做订单处理的时候用的是rocketmq。\n目前的日志消息很庞大，不过Kafka都能很好的处理。因为是处理日志的原因，所以对消息的瞬时性没有太高的要求，哈哈，哪些延迟都被包容性的忽略掉了。","like_count":0,"discussions":[{"author":{"id":1215657,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8c/a9/ce8e0d18.jpg","nickname":"浅滩","note":"","ucode":"BF1D8EE42A6F3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3000,"discussion_content":"对消息内容大小 会介绍么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564104674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117214,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1564011161,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"打卡04","like_count":0},{"had_liked":false,"id":117207,"user_name":"驴在囧途","can_delete":false,"product_type":"c1","uid":1463269,"ip_address":"","ucode":"DC3EE6F3FEB6C1","user_header":"https://static001.geekbang.org/account/avatar/00/16/53/e5/88b220cf.jpg","comment_is_top":false,"comment_ctime":1564008431,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"我也打个卡","like_count":0},{"had_liked":false,"id":117203,"user_name":"Tx爱上360","can_delete":false,"product_type":"c1","uid":1363968,"ip_address":"","ucode":"FE0577CBB623E4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/00/b037b74f.jpg","comment_is_top":false,"comment_ctime":1563991989,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":17,"product_id":100032301,"comment_content":"打卡，滴，第二天👻","like_count":0,"discussions":[{"author":{"id":1215657,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8c/a9/ce8e0d18.jpg","nickname":"浅滩","note":"","ucode":"BF1D8EE42A6F3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3000,"discussion_content":"对消息内容大小 会介绍么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564104674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}