{"id":136549,"title":"期中大作业丨动手编写一个自己的程序吧！","content":"<p>你好，我们之前已经学习了网络编程的基础篇和提高篇。经过近两个月的学习，不知道你对这些内容的掌握程度如何呢？</p><p>我之前说过，网络编程是一个既重视理论，又重视实战的内容模块。一味地消化理论并不足以让你掌握网络编程，只有自己亲自动手写代码，编写程序，才能对TCP、UDP、套接字这些内容有更深切的体会，才能切实感受到它们是如何帮助我们的程序进行互联互通的。</p><p>网络编程就像一个魔法棒，我们之前已经学习了一些“咒语”，但上手操纵才能真实地施展魔法。所以我在专栏中安排了一个期中作业，借由这个作业让你上手编写代码，相信你在这个过程中也会更有成就感。</p><p>我在这里再提供一些“咒语”提示，方便你回顾之前的内容，以便在解题的时候更加胸有成竹。</p><p>客户端程序可以以<a href=\"https://time.geekbang.org/column/article/126126\">第11篇文章</a>的程序例子为原型，这里主要考察使用select多路复用，一方面从标准输入接收字节流，另一方面通过套接字读写，以及使用shutdown关闭半连接的能力。</p><p>服务器端程序则考察套接字读写的能力，以及对端连接关闭情况下的异常处理等能力。</p><p>题目不难，相信你可以做好。</p><h2>题干</h2><p>请你分别写一个客户端程序和服务器程序，客户端程序连接上服务器之后，通过敲命令和服务器进行交互，支持的交互命令包括：</p><!-- [[[read_end]]] --><ul>\n<li>pwd：显示服务器应用程序启动时的当前路径。</li>\n<li>cd：改变服务器应用程序的当前路径。</li>\n<li>ls：显示服务器应用程序当前路径下的文件列表。</li>\n<li>quit：客户端进程退出，但是服务器端不能退出，第二个客户可以再次连接上服务器端。</li>\n</ul><h2>客户端程序要求</h2><ol>\n<li>可以指定待连接的服务器端IP地址和端口。</li>\n<li>在输入一个命令之后，回车结束，之后等待服务器端将执行结果返回，客户端程序需要将结果显示在屏幕上。</li>\n<li>样例输出如下所示。</li>\n</ol><pre><code>第一次连接服务器\n$./telnet-client 127.0.0.1 43211\npwd\n/home/vagrant/shared/Code/network/yolanda/build/bin\ncd ..\npwd\n/home/vagrant/shared/Code/network/yolanda/build\ncd ..\npwd\n/home/vagrant/shared/Code/network/yolanda\nls\nbuild\nchap-11\nchap-12\nchap-13\nchap-14\nchap-15\nchap-16\nchap-17\nchap-18\nchap-20\nchap-21\nchap-22\nchap-23\nchap-25\nchap-26\nchap-27\nchap-28\nchap-4\nchap-5\nchap-6\nchap-7\nclean.sh\ncmake-build-debug\nCMakeLists.txt\nlib\nmid-homework\nREADME.md\n\n\ncd -\npwd\n/home/vagrant/shared/Code/network/yolanda\ncd /home\npwd\n/home\nls\nubuntu\nvagrant\nquit\n\n//再次连接服务器\n$./telnet-client 127.0.0.1 43211\npwd\n/home/vagrant/shared/Code/network/yolanda/build\nls\nbin\nchap-11\nchap-12\nchap-13\nchap-15\nchap-16\nchap-17\nchap-18\nchap-20\nchap-21\nchap-22\nchap-23\nchap-25\nchap-26\nchap-28\nchap-4\nchap-5\nchap-6\nchap-7\nCMakeCache.txt\nCMakeFiles\ncmake_install.cmake\nlib\nMakefile\nmid-homework\n\nquit\n</code></pre><h2>服务器程序要求</h2><ol>\n<li>暂时不需要考虑多个客户并发连接的情形，只考虑每次服务一个客户连接。</li>\n<li>要把命令执行的结果返回给已连接的客户端。</li>\n<li>服务器端不能因为客户端退出就直接退出。</li>\n</ol><p>你可以把自己编写的程序代码放到GitHub上，并在评论里留下链接。我会认真查看这些代码，并在周五给出自己的反馈意见以及题目分析。由于时间有限，无法尽数查看，后续我会以答疑或者加餐的形式再做补充。</p><p>期待你的成果！</p><p></p>","neighbors":{"left":{"article_title":"19丨提高篇答疑：如何理解TCP四次挥手？","id":135735},"right":{"article_title":"期中大作业丨题目以及解答剖析","id":138405}},"comments":[{"had_liked":false,"id":134082,"user_name":"传说中的成大大","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1568734446,"is_pvip":false,"replies":[{"id":"51673","content":"写得不错，精神可嘉","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568907511,"ip_address":"","comment_id":134082,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40223440110","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;xiecheng1991&#47;network-practise-code-by-myself&#47;tree&#47;master&#47;mid_test<br>实现了如下功能<br>1. 自定义协议用于服务器端发送到客户端过后是否有需要打印的内容如ls和pwd的返回<br>2. 设置了心跳检测 如果客户端一定时间不发消息过后 服务器会断开它的连接并且退出,退出的原因在于因为只有一个客户端的连接 所以如果不退出会重复的select超时<br>3. 设置了重用so_reuseaddr 避免time_wait状态<br>4. 实现了ls命令<br>5. 实现了pwd命令<br>代码缺陷如下<br>1. 未完整的实现cd命令确实理解不到<br>2. 因为只能实现1对1的服务器客户端逻辑 所以很多地方写的不全面<br>今天晚上花了三个多小时把代码写好 并且通过gdb调试完成","like_count":10,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467609,"discussion_content":"写得不错，精神可嘉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568907511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134439,"user_name":"沉淀的梦想","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1568829187,"is_pvip":false,"replies":[{"id":"51600","content":"写的挺好的呀","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568884169,"ip_address":"","comment_id":134439,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14453731075","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;DQinYuan&#47;homework-telnet-test<br><br>我主要是写Java的，没怎么写过C，边百度边写好不容易写出一版，代码可能比较简陋，老师不要嫌弃","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467748,"discussion_content":"写的挺好的呀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568884169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134764,"user_name":"Steiner","can_delete":false,"product_type":"c1","uid":1622329,"ip_address":"","ucode":"232C1C75207A1E","user_header":"https://static001.geekbang.org/account/avatar/00/18/c1/39/11904266.jpg","comment_is_top":false,"comment_ctime":1568911944,"is_pvip":false,"replies":[{"id":"51750","content":"char * path;<br>path=getcwd(path,128);<br><br>这段改下:<br>char path[128];<br>char * result = getcwd(path, 128);<br><br>因为需要分配一段内存给getcwd调用才可以。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568960290,"ip_address":"","comment_id":134764,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10158846536","product_id":100032701,"comment_content":"第一次写这种比较大的交互程序,用c语言写了几次，感觉一堆东西都写在一起太难维护了,于是用c++做了点类设计.发现的程序bug太多了,目前打算简单的交互以下,服务端一次与一个客户端交互,服务端老是段错误，用gdb发现这个path一直都是0x0,不知道什么原因,求老师指正<br>https:&#47;&#47;github.com&#47;Ne-Steiner&#47;socket","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467892,"discussion_content":"char * path;\npath=getcwd(path,128);\n\n这段改下:\nchar path[128];\nchar * result = getcwd(path, 128);\n\n因为需要分配一段内存给getcwd调用才可以。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568960290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134085,"user_name":"sdjdd","can_delete":false,"product_type":"c1","uid":1211987,"ip_address":"","ucode":"512F2338DFF793","user_header":"https://static001.geekbang.org/account/avatar/00/12/7e/53/c29c2fc9.jpg","comment_is_top":false,"comment_ctime":1568736341,"is_pvip":false,"replies":[{"id":"51672","content":"写得很不错啊","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568907489,"ip_address":"","comment_id":134085,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10158670933","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;sdjdd&#47;net-programming-midterm","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467611,"discussion_content":"写得很不错啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568907489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204719,"user_name":"ray","can_delete":false,"product_type":"c1","uid":1717235,"ip_address":"","ucode":"10962C711CBC11","user_header":"","comment_is_top":false,"comment_ctime":1586445088,"is_pvip":false,"replies":[{"id":"76800","content":"👍","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1586680918,"ip_address":"","comment_id":204719,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5881412384","product_id":100032701,"comment_content":"感谢老师的指导，虽然写的有点晕，但还是收获良多。<br>现在还不敢说能徒手写出良好的socket程式，但若是要除错，使用linux工具找问题，已经顺畅许多了！<br>再次感谢老师的指导^^<br><br>平常用php开发，就用php写啦XD<br>https:&#47;&#47;github.com&#47;ChanJuiHuang&#47;php_socket_program","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491269,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586680918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133600,"user_name":"传说中的成大大","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1568618743,"is_pvip":false,"replies":[{"id":"51613","content":"被你看出来了 :)","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568885987,"ip_address":"","comment_id":133600,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5863586039","product_id":100032701,"comment_content":"这个期中大作业的难点不在网络方面 在于 如何在程序中如何cd ..&#47; pwd ls等等o(╥﹏╥)o","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467443,"discussion_content":"被你看出来了 :)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568885987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170784,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","nickname":"yusuf","note":"","ucode":"9F32149B2ADDA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13098,"discussion_content":"cd可以使用chdir函数，ls和pwd可以使用popen函数","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568640687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327600,"user_name":"Mandone","can_delete":false,"product_type":"c1","uid":1116017,"ip_address":"","ucode":"FE236389CEF200","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/71/d3049207.jpg","comment_is_top":false,"comment_ctime":1640185476,"is_pvip":true,"replies":[{"id":"119415","content":"多写写就好了。","user_name":"作者回复","user_name_real":"编辑","uid":"1618647","ctime":1640402417,"ip_address":"","comment_id":327600,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640185476","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;mandone&#47;net-code&#47;tree&#47;master&#47;mid-test <br>补作业了，同Java开发，确实有点吃劲","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541484,"discussion_content":"多写写就好了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640402417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180197,"user_name":"supermouse","can_delete":false,"product_type":"c1","uid":1321860,"ip_address":"","ucode":"88072D5F881827","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/84/07f0c0d6.jpg","comment_is_top":false,"comment_ctime":1582208406,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582208406","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;YoungYo&#47;MidtermAssignment&#47;tree&#47;master<br>主要是参考了老师的第11讲的代码，老师说的要求基本都实现了，唯一有点缺陷的是执行cd命令的时候不能执行“cd -”、“cd ~”这类命令，只能指定确切的目录名，比如“&#47;home”","like_count":0},{"had_liked":false,"id":149689,"user_name":"chs","can_delete":false,"product_type":"c1","uid":1618711,"ip_address":"","ucode":"BE4B6A19317400","user_header":"https://static001.geekbang.org/account/avatar/00/18/b3/17/19ea024f.jpg","comment_is_top":false,"comment_ctime":1573321509,"is_pvip":false,"replies":[{"id":"58547","content":"写得很好。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1573990858,"ip_address":"","comment_id":149689,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573321509","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;chenghengs&#47;network<br>请多指教","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473942,"discussion_content":"写得很好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573990858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136081,"user_name":"YidWang","can_delete":false,"product_type":"c1","uid":1619756,"ip_address":"","ucode":"C91A9117EC3540","user_header":"https://static001.geekbang.org/account/avatar/00/18/b7/2c/e1682683.jpg","comment_is_top":false,"comment_ctime":1569340557,"is_pvip":false,"replies":[{"id":"52214","content":"具体是指？","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1569408534,"ip_address":"","comment_id":136081,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569340557","product_id":100032701,"comment_content":"消息的去重 没有设计","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468449,"discussion_content":"具体是指？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569408534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134533,"user_name":"coffee0218","can_delete":false,"product_type":"c1","uid":1618721,"ip_address":"","ucode":"CEA9C06AE3DA79","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoFayz14Khwd5PUz23GfWCmXG8hRdwkwY32E0el2AwcicYC8qA5MgRouViaBIj3E9TibB9WjoYjsO80Q/132","comment_is_top":false,"comment_ctime":1568859521,"is_pvip":false,"replies":[{"id":"51602","content":"可以不用考虑这个特殊情况","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568884665,"ip_address":"","comment_id":134533,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568859521","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;coffee0218&#47;c_client_server<br>cd ~还是有问题","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467793,"discussion_content":"可以不用考虑这个特殊情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568884665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133768,"user_name":"Geek_007","can_delete":false,"product_type":"c1","uid":1467182,"ip_address":"","ucode":"C80107538EAA7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/2e/e49116d1.jpg","comment_is_top":false,"comment_ctime":1568649149,"is_pvip":false,"replies":[{"id":"51611","content":"首先，golang里面的go routine(协程)是golang语言层面的设计，它具体的执行也是依赖操作系统线程语义的，它的优点是帮我们管理了线程切换，同时对线程切换进行了优化，它们的高效也是利用了操作系统提供的能力，两者并不矛盾。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568885926,"ip_address":"","comment_id":133768,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1568649149","product_id":100032701,"comment_content":"我有一个问题，高级语言如go，它就没有epoll或者select(不是select那个关键字)。它的epoll只能是syscall，那是不是意味着协程和单进程的epoll多路复用是一样高效的呢？？？lua似乎也没有epoll的实现。但是他们也都很高效","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467501,"discussion_content":"首先，golang里面的go routine(协程)是golang语言层面的设计，它具体的执行也是依赖操作系统线程语义的，它的优点是帮我们管理了线程切换，同时对线程切换进行了优化，它们的高效也是利用了操作系统提供的能力，两者并不矛盾。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568885926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1211987,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/53/c29c2fc9.jpg","nickname":"sdjdd","note":"","ucode":"512F2338DFF793","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13513,"discussion_content":"Linux 下 go 的 net  包是用 epoll 实现的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568682806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101405,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ce/5d/5297717a.jpg","nickname":"初见","note":"","ucode":"06D7952CED37D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14125,"discussion_content":"lua的高效依赖于nginx，nginx 是 epoll 实现的（当然也支持select诸如此类）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568728569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133763,"user_name":"(￣_￣ )","can_delete":false,"product_type":"c1","uid":1133366,"ip_address":"","ucode":"8B6E2EF240D4AD","user_header":"https://static001.geekbang.org/account/avatar/00/11/4b/36/ed40fb3a.jpg","comment_is_top":false,"comment_ctime":1568648053,"is_pvip":false,"replies":[{"id":"51675","content":"给努力的同学点赞","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568907530,"ip_address":"","comment_id":133763,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568648053","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;hongningexpro&#47;Linux_network_program&#47;tree&#47;master&#47;middle_exam","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467498,"discussion_content":"给努力的同学点赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568907530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133707,"user_name":"yusuf","can_delete":false,"product_type":"c1","uid":1170784,"ip_address":"","ucode":"9F32149B2ADDA0","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","comment_is_top":false,"comment_ctime":1568639795,"is_pvip":false,"replies":[{"id":"51674","content":"赞","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568907518,"ip_address":"","comment_id":133707,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568639795","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;linuxxiaoyu&#47;tcp","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467480,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568907518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133501,"user_name":"向东","can_delete":false,"product_type":"c1","uid":1200181,"ip_address":"","ucode":"9F621FBF115620","user_header":"https://static001.geekbang.org/account/avatar/00/12/50/35/079d04c8.jpg","comment_is_top":false,"comment_ctime":1568594687,"is_pvip":false,"replies":[{"id":"51616","content":"我用的是chdir系统调用。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1568886135,"ip_address":"","comment_id":133501,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1568594687","product_id":100032701,"comment_content":"服务器应用程序的当前路径怎么获取。<br>cd ..，怎么和当前路径进行关联起来？","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467406,"discussion_content":"我用的是chdir系统调用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568886135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2075086,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/a9/ce/23f2e185.jpg","nickname":"Running man","note":"","ucode":"F3357D6696A5C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332190,"discussion_content":"果然有埋伏，就觉得主体不只是网络交互","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607088938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622329,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c1/39/11904266.jpg","nickname":"Steiner","note":"","ucode":"232C1C75207A1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":15643,"discussion_content":"chdir\ngetcwd\n自己查文档(｡･∀･)ﾉﾞヾ(･ω･。)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568824012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}