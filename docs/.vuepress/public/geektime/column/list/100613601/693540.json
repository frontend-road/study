{"id":693540,"title":"07ï½œç±»åŠ è½½å­ç³»ç»Ÿï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•æ‰“é€ ä¸€ä¸ªå±äºä½ çš„ç±»åŠ è½½å™¨ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åº·æ¨ã€‚</p><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬å­¦ä¹ äº†JVMä¸­çš„ç±»åŠ è½½æµç¨‹å’Œæœºåˆ¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥æ‰§è¡Œè¿™ä¸ªæµç¨‹çš„ç±»åŠ è½½å™¨ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å°†äº†è§£åˆ°JVMä¸­çš„ç±»åŠ è½½å™¨å®¶æ—åŠå…¶åœ¨æœ€æ–°çš„JVMç‰ˆæœ¬ä¸­çš„æ¼”è¿›ã€‚æœ€åæˆ‘è¿˜ä¼šå¸¦ä½ æ‰“é€ ä¸€ä¸ªä¸“å±äºä½ è‡ªå·±çš„è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç®¡ç†å’Œä½¿ç”¨Javaåº”ç”¨ç¨‹åºï¼Œæé«˜å¯é æ€§å’Œå®‰å…¨æ€§ï¼Œå¹¶æ»¡è¶³æˆ‘ä»¬çš„ç‰¹å®šéœ€æ±‚ã€‚</p><h2>ç±»åŠ è½½å™¨å®¶æ—</h2><p><img src=\"https://static001.geekbang.org/resource/image/f1/12/f1063a739064846562ec04d1a9059e12.png?wh=1920x1173\" alt=\"å›¾ç‰‡\"></p><p>JVMä¸­çš„ç±»åŠ è½½å™¨å®¶æ—æœ‰5ä¸ªæˆå‘˜ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€ä¸ªä¸ªçœ‹ã€‚</p><h3>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰</h3><p>è¿™æ˜¯æ‰€æœ‰ç±»åŠ è½½å™¨ä¸­å”¯ä¸€ä¸€ä¸ªç”¨C++ä»£ç å®ç°çš„ï¼Œæ²¡æœ‰å¯¹åº”çš„ç±»ï¼Œä¹Ÿæ˜¯JVM å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦è´Ÿè´£åŠ è½½Java æ ¸å¿ƒåº“ã€‚</p><h3>æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰</h3><p>æ‰©å±•ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½çš„ç›®å½•æ˜¯ jre/lib/extï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„å…·ä½“æ–‡ä»¶å’Œç±»åº“å®é™…ä¸Šä¼šå›  Java ç‰ˆæœ¬å’Œå¹³å°çš„ä¸åŒè€Œä¸åŒã€‚ä¾‹å¦‚ï¼Œåœ¨ Windows ç³»ç»Ÿçš„ Oracle JDK 8 ä¸­ï¼Œé€šå¸¸ä½ å¯ä»¥æ‰¾åˆ°access-bridge-64.jarã€cldrdata.jarç­‰æ–‡ä»¶ã€‚</p><p>è¿™äº›æ–‡ä»¶é‡Œä¸»è¦æ˜¯Javaçš„æ‰©å±•ç±»åº“ï¼ŒåŒ…æ‹¬å„ç§IOã€ç½‘ç»œåè®®ã€åŠ å¯†ã€å­—ç¬¦é›†æ”¯æŒç­‰ç­‰ã€‚ç„¶è€Œåœ¨éƒ¨åˆ† Linux å‘å¸ƒç‰ˆå’Œ Docker ç¯å¢ƒä¸­ï¼Œä½ å¯èƒ½å‘ç° ext ç›®å½•æ˜¯ç©ºçš„ã€‚</p><!-- [[[read_end]]] --><p>åœ¨Java 9åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œç”±äºå¼•å…¥äº†æ–°çš„æ¨¡å—ç³»ç»Ÿï¼Œè¿™ä¸ªæœºåˆ¶å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚JDK 9 ä¹‹åçš„ç‰ˆæœ¬ä¸å†æœ‰ jre/lib/ext è¿™ä¸ªè·¯å¾„ï¼Œæ‰©å±•ç±»åŠ è½½å™¨ä¹Ÿè¢«å¹³å°ç±»åŠ è½½å™¨ï¼ˆPlatform ClassLoaderï¼‰æ›¿ä»£ã€‚</p><h3>åº”ç”¨ç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰</h3><p>åº”ç”¨ç±»åŠ è½½å™¨åº”è¯¥æ˜¯æˆ‘ä»¬æ—¥å¸¸æ¥è§¦æœ€å¤šçš„ç±»åŠ è½½å™¨ï¼Œä¹Ÿæ˜¯ç³»ç»Ÿé»˜è®¤çš„ç±»åŠ è½½å™¨ï¼ŒClassLoader.getSystemClassLoader() ç³»ç»Ÿç±»åŠ è½½å™¨è¯´çš„å°±æ˜¯å®ƒï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><p>åº”ç”¨ç±»åŠ è½½å™¨ä¸»è¦ä»å“ªäº›è·¯å¾„åŠ è½½å‘¢ï¼Ÿæˆ‘æ•´ç†åœ¨è¡¨æ ¼ä¸­äº†ï¼Œä½ å¯ä»¥å‚è€ƒã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/69/b3/69a813c1e19251940afe27276d6267b3.jpg?wh=1920x849\" alt=\"å›¾ç‰‡\"></p><p>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ç¼–è¯‘ä¸€ä¸ªåä¸º com.future.Food çš„ Java ç±»ï¼ŒæŠŠå®ƒæ”¾åœ¨å½“å‰ç›®å½•ä¸‹åä¸º classes çš„ç›®å½•é‡Œï¼Œåœ¨å‘½ä»¤è¡Œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œ <code>java -cp ./classes com.future.Food</code> æ¥åŠ è½½å’Œè¿è¡Œè¿™ä¸ªç±»ã€‚</p><p>å½“æˆ‘ä»¬ä½¿ç”¨IDEï¼ˆå¦‚Eclipseã€IntelliJ IDEAç­‰ï¼‰å¼€å‘Javaåº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼ŒIDEé€šå¸¸ä¼šè‡ªåŠ¨è®¾å®šCLASSPATHï¼Œè¿™ä¸ª CLASSPATH é‡Œæœ‰é¡¹ç›®çš„binæˆ–targetï¼ˆç”±æ„å»ºå·¥å…·å¦‚Mavenã€Gradleè®¾å®šï¼‰ç›®å½•ä»¥åŠæ‰€æœ‰çš„ä¾èµ–åº“ã€‚</p><h2>è‡ªå®šä¹‰ç±»åŠ è½½å™¨</h2><p>å¤æ‚çš„æ—¥å¸¸å·¥ä½œä¸­ä¼šå­˜åœ¨ä¸€äº›åœºæ™¯ï¼Œæ²¡åŠæ³•ç”¨ä¸Šè¿°çš„ç±»åŠ è½½å™¨æ¥å®Œæˆç±»åŠ è½½çš„å·¥ä½œï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ¥æ‰“é€ ä¸€ä¸ªè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œæ»¡è¶³ç‰¹å®šåœºæ™¯çš„å®šåˆ¶åŒ–éœ€æ±‚ã€‚</p><p>è¦æƒ³æ‰“é€ ä¸€ä¸ªçº¿ä¸Šæ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿçš„è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œéœ€è¦éµå¾ªä¸€äº›é‡è¦çš„è®¾è®¡åŸåˆ™ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/7e/1b13bce735b4e5e74a20a99dc8030f7e.jpg?wh=1920x560\" alt=\"å›¾ç‰‡\"></p><p>é™¤äº†è¿™äº›éœ€è¦éµå®ˆçš„åŸåˆ™ï¼Œä½ è¿˜éœ€è¦æ³¨æ„è§„é¿å‡ ä¸ªå¸¸è§çš„é”™è¯¯ã€‚é¦–å…ˆåœ¨é‡å†™ loadClass() æ–¹æ³•çš„æ—¶å€™ï¼Œè¦<strong>ç¡®ä¿ä¼˜å…ˆå§”æ‰˜ç»™çˆ¶ç±»åŠ è½½å™¨ï¼Œ<strong>å¦åˆ™ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç±»çš„é‡å¤åŠ è½½å’Œç±»ç‰ˆæœ¬ä¸ä¸€è‡´ç­‰é—®é¢˜ã€‚è¿˜æœ‰åœ¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„å®ç°ä¸­ï¼Œéœ€è¦</strong>å¯¹å¼‚å¸¸æƒ…å†µè¿›è¡Œè‰¯å¥½çš„å¤„ç†</strong>ï¼Œæ¯”å¦‚ç±»æœªæ‰¾åˆ°ã€è¯»å–æ–‡ä»¶é”™è¯¯ç­‰ã€‚è¿™äº›å¼‚å¸¸ä¸€èˆ¬éœ€è¦æŠ›å‡ºä¸€ä¸ª java.lang.ClassNotFoundExceptionï¼Œæ–¹ä¾¿ä¸Šå±‚è°ƒç”¨è€…è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚</p><p>ä¸‹é¢æˆ‘å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„å®ä¾‹ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹ã€‚</p><pre><code class=\"language-java\">import java.io.*;\nimport java.util.HashMap;\n// è‡ªå®šä¹‰ClassLoaderç±»ï¼Œç»§æ‰¿è‡ªClassLoader\npublic class CustomClassLoader extends ClassLoader {\n    // å®šä¹‰äº†ç±»æ–‡ä»¶çš„æ ¹è·¯å¾„\n    private String rootDir;\n    // ç¼“å­˜å·²ç»åŠ è½½çš„ç±»\n    private HashMap&lt;String, Class&lt;?&gt;&gt; loadedClasses;\n    \n    /**\n     * Constructor\n     * @param rootDir ç±»æ–‡ä»¶çš„æ ¹ç›®å½•è·¯å¾„\n     */\n    public CustomClassLoader(String rootDir) {\n        this.rootDir = rootDir;\n        // åˆå§‹åŒ–ç¼“å­˜Hashmap\n        loadedClasses = new HashMap&lt;&gt;();\n    }\n    /**\n     * åŠ è½½ç±»æ–‡ä»¶å¹¶è¿”å›Classå®ä¾‹\n     * @param className ç±»çš„å…¨é™å®šå\n     * @return åŠ è½½çš„ç±»çš„Classå®ä¾‹\n     * @throws ClassNotFoundException å¦‚æœç±»æœªè¢«æ‰¾åˆ°æˆ–åŠ è½½\n     */\n    @Override\n    protected Class&lt;?&gt; findClass(String className) throws ClassNotFoundException {\n        // ä»å·²åŠ è½½çš„ç±»ç¼“å­˜ä¸­æŸ¥æ‰¾ç±»\n        Class&lt;?&gt; loadedClass = loadedClasses.get(className);\n        // å¦‚æœç±»å·²ç»è¢«åŠ è½½ï¼Œä»ç¼“å­˜ä¸­è¿”å›\n        if (loadedClass != null) {\n            return loadedClass;\n        }\n        // å¦åˆ™è¯»å–ç±»æ–‡ä»¶çš„å­—èŠ‚ç \n        byte[] classBytes = getClassBytes(className);\n        if (classBytes == null) {\n            throw new ClassNotFoundException();\n        }\n        // åœ¨é”å®šçš„ç¯å¢ƒä¸­ï¼Œå®šä¹‰ç±»å¹¶å°†ç±»æ”¾å…¥å·²åŠ è½½çš„ç±»ç¼“å­˜ä¸­\n        synchronized (loadedClasses) {\n            loadedClass = defineClass(className, classBytes, 0, classBytes.length);\n            loadedClasses.put(className, loadedClass);\n        }\n        return loadedClass;\n    }\n    /**\n     * æ ¹æ®ç±»åè¯»å–ç±»æ–‡ä»¶çš„å­—èŠ‚ç \n     * @param className ç±»çš„å…¨åï¼ˆåŒ…æ‹¬åŒ…åï¼‰\n     * @return ç±»æ–‡ä»¶çš„å­—èŠ‚ç \n     */\n    private byte[] getClassBytes(String className) {\n        // å°†å…¨åè½¬æ¢ä¸ºæ–‡ä»¶å\n        String classPath = rootDir + '/' +\n                className.replace('.', '/') + \".class\";\n        FileInputStream fis = null;\n        ByteArrayOutputStream baos = null;\n        try {\n            fis = new FileInputStream(classPath);\n            baos = new ByteArrayOutputStream();\n            byte[] buffer = new byte[1024];\n            int bytesRead;\n            // å¾ªç¯è¯»å–æ–‡ä»¶ç›´åˆ°æ–‡ä»¶ç»“æŸ\n            while ((bytesRead = fis.read(buffer)) != -1) {\n                baos.write(buffer, 0, bytesRead);\n            }\n            // è¿”å›å­—èŠ‚æµçš„å­—èŠ‚æ•°ç»„\n            return baos.toByteArray();\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            // å…³é—­èµ„æº\n            try {\n                if (fis != null) {\n                    fis.close();\n                }\n                if (baos != null) {\n                    baos.close();\n                }\n            } catch (IOException e2) {\n                e2.printStackTrace();\n            }\n        }\n        return null;\n    }\n    public static void main(String[] args) {\n        // åˆ›å»ºæ–°çš„CustomClassLoaderå®ä¾‹\n        CustomClassLoader customClassLoader = new CustomClassLoader(\"/path/to/classes\");\n        try {\n            // é€šè¿‡è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨åŠ è½½ä¸€ä¸ªç±»ï¼Œè¾“å‡ºå…¶ç±»å\n            Class&lt;?&gt; sampleClass = customClassLoader.loadClass(\"com.example.SampleClass\");\n            System.out.println(\"Class loaded successfully: \" + sampleClass.getName());\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre><p>ä½ å¯ä»¥åŠ¨åŠ¨æ‰‹è·Ÿç€æˆ‘ä¸€èµ·å®ç°è¿™ä¸ªè‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ï¼Œæ¬¢è¿ä½ æŠŠä½ çš„ä»£ç åˆ†äº«åˆ°è¯„è®ºåŒºã€‚</p><h2>åŒäº²å§”æ´¾æ¨¡å‹</h2><p>åŒäº²å§”æ´¾æ¨¡å‹æ˜¯JVMç±»åŠ è½½å™¨è¿›è¡Œç±»åŠ è½½æ—¶éµå¾ªçš„åŸºæœ¬åŸåˆ™ã€‚å½“ç±»åŠ è½½å™¨éœ€è¦åŠ è½½ä¸€ä¸ªç±»æ—¶ï¼Œå®ƒä¼šå…ˆå°†åŠ è½½è¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨èƒ½å¤ŸåŠ è½½æˆåŠŸï¼Œåˆ™ç›´æ¥è¿”å›åŠ è½½çš„ç±»ã€‚åªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨æ²¡åŠæ³•åŠ è½½çš„æ—¶å€™ï¼Œæ‰ç”±å½“å‰ç±»åŠ è½½å™¨å°è¯•åŠ è½½ã€‚</p><p>é€šè¿‡åŒäº²å§”æ´¾æ¨¡å‹ï¼Œæ ¸å¿ƒç±»åº“ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ï¼Œé¿å…ä¸å¯ä¿¡çš„ç±»å¯¹æ ¸å¿ƒç±»åº“é€ æˆç ´åã€‚åŒæ—¶ï¼Œé€šè¿‡è¿™ç§æœ‰å±‚æ¬¡çš„ç±»åŠ è½½å™¨ç»“æ„ï¼Œç¡®ä¿åŒä¸€ä¸ªç±»åªä¼šè¢«åŠ è½½ä¸€æ¬¡ï¼Œä¿è¯äº†ç±»çš„ä¸€è‡´æ€§ã€‚</p><h3>æ ¸å¿ƒæµç¨‹</h3><ol>\n<li>ç±»åŠ è½½è¯·æ±‚ï¼šå½“ Class.forName() æˆ–ClassLoader.loadClass() æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œç±»åŠ è½½å™¨ä¼šæ ¹æ®ç±»çš„å…¨é™å®šåæ¥åŠ è½½ç±»ã€‚</li>\n<li>å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨ï¼šç±»åŠ è½½å™¨é¦–å…ˆå°†åŠ è½½è¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨è¿›è¡Œå¤„ç†ã€‚</li>\n<li>çˆ¶ç±»åŠ è½½å™¨å¤„ç†ï¼šçˆ¶ç±»åŠ è½½å™¨æŒ‰ç…§ç›¸åŒçš„å§”æ´¾æœºåˆ¶ï¼Œå°†åŠ è½½è¯·æ±‚ç»§ç»­å§”æ´¾ç»™å…¶çˆ¶ç±»åŠ è½½å™¨ï¼Œç›´è‡³è¾¾åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ã€‚</li>\n<li>åŠ è½½ç±»ï¼šå¦‚æœçˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½ç±»ï¼Œå½“å‰ç±»åŠ è½½å™¨ä¼šå°è¯•è‡ªå·±åŠ è½½ç±»ã€‚å¦‚æœåŠ è½½æˆåŠŸï¼Œå°±è¿”å›åŠ è½½çš„ Class å¯¹è±¡ï¼›å¦‚æœåŠ è½½å¤±è´¥ï¼Œå°†ä¼šæŠ›å‡º ClassNotFoundException å¼‚å¸¸ã€‚</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/95/bd/95f5377d57647438ce25073cdaab2cbd.png?wh=1920x1214\" alt=\"å›¾ç‰‡\"></p><h3>åº”ç”¨åœºæ™¯</h3><p>åŒäº²å§”æ´¾æ¨¡å‹ä¸»è¦åº”ç”¨äºå“ªäº›åœºæ™¯å‘¢ï¼Ÿ</p><ol>\n<li><strong>ç±»åŠ è½½éš”ç¦»ï¼š</strong>é€šè¿‡ä½¿ç”¨ä¸åŒçš„ç±»åŠ è½½å™¨åŠ è½½ä¸åŒçš„ç±»ï¼Œå®ç°ç±»åŠ è½½çš„éš”ç¦»æ€§ï¼Œé¿å…ç±»ä¹‹é—´çš„äº’ç›¸å½±å“å’Œå†²çªã€‚</li>\n<li><strong>å®‰å…¨æ²™ç®±éš”ç¦»</strong>é€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨å®ç°å®‰å…¨æ²™ç®±çš„æœºåˆ¶ï¼Œå¯¹ä¸å¯ä¿¡çš„ç±»è¿›è¡Œéš”ç¦»åŠ è½½å’Œé™åˆ¶æƒé™ï¼Œæé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚</li>\n<li><strong>åŠ¨æ€æ‰©å±•å’Œæ’ä»¶åŒ–</strong>é€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨å®ç°åŠ¨æ€åŠ è½½å’Œå¸è½½åŠŸèƒ½ï¼Œå®ç°ç³»ç»Ÿçš„åŠ¨æ€æ‰©å±•å’Œæ’ä»¶åŒ–ï¼Œæå‡ç¨‹åºçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</li>\n<li><strong>å¤šç‰ˆæœ¬éš”ç¦»</strong>é€šè¿‡ä½¿ç”¨ä¸åŒçš„ç±»åŠ è½½å™¨åŠ è½½ä¸åŒç‰ˆæœ¬çš„ç±»ï¼Œå®ç°åœ¨åŒä¸€ä¸ªç¨‹åºä¸­ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„åº“æ–‡ä»¶ï¼Œé¿å…ç‰ˆæœ¬å†²çªã€‚</li>\n</ol><h3>é™åˆ¶</h3><p>ä¸è¿‡è¿™ä¸ªæ¨¡å‹ä¸€æ—¦å†³å®šäº†ä¸€ä¸ªç±»è¢«ClassLoaderåŠ è½½ï¼Œé‚£ä¹ˆå®ƒåœ¨è¿è¡ŒæœŸé—´å°±ä¼šä¸€ç›´ä¿æŒè¢«åŠ è½½çš„çŠ¶æ€ï¼Œå³ä½¿ç±»çš„å®šä¹‰å·²ç»å‘ç”Ÿäº†å˜åŒ–ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œé™¤éé‡æ–°å¯åŠ¨JVMã€‚å› æ­¤ï¼Œè¿™ç§æ¨¡å‹é™åˆ¶äº†æˆ‘ä»¬åŠ¨æ€åŠ è½½æ–°ç±»çš„èƒ½åŠ›ã€‚</p><p>è¿™ç§é™åˆ¶çš„ä¸»è¦åŸå› åœ¨äºJavaå†…å­˜ç®¡ç†æœºåˆ¶çš„è®¾è®¡ã€‚ä¸€æ—¦ç±»è¢«åŠ è½½ï¼Œå®ƒçš„Classå¯¹è±¡å°±ä¼šè¢«ClassLoaderæŒæœ‰å¹¶ç¼“å­˜èµ·æ¥ï¼Œåªæœ‰å½“ClassLoaderã€Classå¯¹è±¡è¿˜æœ‰å®ƒæ‰€æœ‰çš„å®ä¾‹å¯¹è±¡å…¨éƒ¨ä¸å¯è¾¾çš„æ—¶å€™ï¼ŒGCæ‰ä¼šå›æ”¶è¿™ä¸ªç±»ã€‚</p><h3>Tomcat ä¸ºä»€ä¹ˆèƒ½å¤Ÿçªç ´é™åˆ¶ï¼Ÿ</h3><p>Tomcat ä½¿ç”¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„æ–¹å¼çªç ´äº†åŒäº²å§”æ´¾æ¨¡å‹çš„é™åˆ¶ã€‚å®ƒä½¿ç”¨äº†å…±åŒçš„çˆ¶åŠ è½½å™¨ï¼ˆcommon ClassLoaderï¼‰ï¼Œéš”ç¦»äº†ä¸åŒçš„Webæ¨¡å—ï¼Œä½¿æ¯ä¸ªWebæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ç±»åŠ è½½å™¨ã€‚è¿™æ ·ä¸åŒWebæ¨¡å—çš„ç±»å¯ä»¥ç›¸äº’è®¿é—®ï¼Œè€Œå’Œçˆ¶åŠ è½½å™¨æ— å…³ã€‚é™¤äº†Tomcatï¼ŒSPIæœºåˆ¶ä¹Ÿæ˜¯çªç ´åŒäº²å§”æ´¾æ¨¡å‹çš„å…¸å‹åœºæ™¯ï¼Œåé¢æˆ‘ä»¬è¿˜ä¼šè¯¦ç»†ä»‹ç»ã€‚</p><h2>ç±»åŠ è½½å™¨çš„æ¼”è¿›</h2><p>éšç€JVMçš„è¿­ä»£ï¼Œåœ¨ä¸åŒçš„ JDK ç‰ˆæœ¬ä¸­ï¼Œç±»åŠ è½½å™¨ä¹Ÿåœ¨å‘ç”Ÿç€å˜åŒ–ã€‚</p><p>ä»JDK 9å¼€å§‹ï¼ŒJVM å¼•å…¥äº†æ–°çš„æ¨¡å—ç³»ç»ŸJPMSï¼ˆJava Platform Module Systemï¼‰ï¼Œå°† Java æ ¸å¿ƒåº“åˆ†æˆäº†ä¸€ç³»åˆ—çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åªåŒ…å«ç›¸å…³çš„åŠŸèƒ½ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ã€‚åŸæœ¬çš„å¼•å¯¼ç±»åŠ è½½å™¨ä¹Ÿè¢«æ‹†åˆ†æˆäº†ä¸¤ä¸ªä¸åŒçš„åŠ è½½å™¨ï¼Œåˆ†åˆ«æ˜¯å¹³å°ç±»åŠ è½½å™¨ï¼ˆPlatform ClassLoaderï¼‰å’Œç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆSystem ClassLoaderï¼‰ã€‚</p><p>è€Œåˆ°äº†JDK 11ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼ŒJVM ä½¿ç”¨ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰æŠ€æœ¯ï¼Œå…è®¸ä¸åŒçš„ Java è¿›ç¨‹å…±äº«ç›¸åŒçš„ JVM ç±»å…ƒæ•°æ®ã€‚åˆ°JDK 17çš„æ—¶å€™ï¼ŒJVM åˆ™æ˜¯ç›´æ¥ç§»é™¤äº†ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œæ‰€æœ‰çš„ç±»åŠ è½½æ“ä½œç”±åŸæœ¬çš„åº”ç”¨ç±»åŠ è½½å™¨æ¥ç®¡ã€‚è¿™ä¸ªæ”¹åŠ¨ç®€åŒ–äº† JVM æ¶æ„ï¼Œä¹Ÿå‡å°æ½œåœ¨çš„å®‰å…¨é£é™©ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>ä»Šå¤©æˆ‘ä»¬ä»‹ç»äº†JVMä¸­çš„ç±»åŠ è½½å™¨å®¶æ—ï¼ŒåŒ…æ‹¬å¼•å¯¼ç±»åŠ è½½å™¨ã€æ‰©å±•ç±»åŠ è½½å™¨å’Œåº”ç”¨ç±»åŠ è½½å™¨ã€‚å¼•å¯¼ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½Javaæ ¸å¿ƒåº“ï¼Œæ‰©å±•ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½Javaæ‰©å±•åº“ï¼Œåº”ç”¨ç±»åŠ è½½å™¨æ˜¯ç³»ç»Ÿé»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚</p><p>é™¤äº†ç³»ç»Ÿæä¾›çš„ç±»åŠ è½½å™¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ¥æ»¡è¶³ç‰¹å®šçš„ä¸šåŠ¡éœ€æ±‚ã€‚æ­¤å¤–æˆ‘ä»¬è¿˜ä»‹ç»äº†åŒäº²å§”æ´¾æ¨¡å‹çš„åŸåˆ™ï¼Œå°±æ˜¯å½“ç±»åŠ è½½å™¨éœ€è¦åŠ è½½ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œä¼šå…ˆå§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨ï¼Œåªæœ‰çˆ¶ç±»åŠ è½½å™¨æ²¡åŠæ³•åŠ è½½çš„æ—¶å€™ï¼Œæ‰ç”±å½“å‰ç±»åŠ è½½å™¨åŠ è½½ã€‚è¿™ä¸ªæ¨¡å‹ä¿è¯äº†æ ¸å¿ƒç±»åº“çš„å®‰å…¨æ€§å’Œç±»çš„ä¸€è‡´æ€§ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜äº†è§£äº†ç±»åŠ è½½å™¨çš„æ¼”è¿›ï¼Œåœ¨ä¸åŒçš„JDKç‰ˆæœ¬ä¸­ï¼Œç±»åŠ è½½å™¨ä¹Ÿæœ‰æ‰€å˜åŒ–ï¼Œæ¯”å¦‚å¼•å…¥æ¨¡å—ç³»ç»Ÿå’Œç±»æ•°æ®å…±äº«ç­‰ã€‚</p><h2>æ€è€ƒé¢˜</h2><ol>\n<li>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åŒäº²å§”æ´¾æ¨¡å‹è¿›è¡Œç±»åŠ è½½ï¼Ÿå®ƒçš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li>åœ¨JDKçš„æ¼”è¿›è¿‡ç¨‹ä¸­ï¼Œç±»åŠ è½½å™¨å‘ç”Ÿäº†å“ªäº›å˜åŒ–ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ æŠŠç­”æ¡ˆåˆ†äº«åˆ°è¯„è®ºåŒºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾çš„å†…å®¹åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ï¼Œé‚€è¯·ä»–ä»¬ä¸€èµ·å­¦ä¹ ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p><h2>ğŸ’¡ ç‚¹äº®ä½ çš„çŸ¥è¯†æ¡†æ¶å›¾</h2><p><img src=\"https://static001.geekbang.org/resource/image/33/45/33d5f2cd5yy6a454a1629fc09d314945.jpg?wh=5476x3900\" alt=\"å›¾ç‰‡\"></p>","neighbors":{"left":{"article_title":"06ï½œç±»åŠ è½½å­ç³»ç»Ÿ ï¼ˆä¸Šï¼‰ï¼šç±»åŠ è½½çš„æµç¨‹ä¸æœºåˆ¶","id":692897},"right":{"article_title":"08ï½œåå°„æœºåˆ¶ï¼šç»™ä½ ä¸€æŠŠæ‰“å¼€JVMåé—¨çš„é’¥åŒ™","id":696610}},"comments":[{"had_liked":false,"id":381371,"user_name":"C.","can_delete":false,"product_type":"c1","uid":1444698,"ip_address":"æ±Ÿè‹","ucode":"5AE269220EFD73","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/5a/453ad411.jpg","comment_is_top":false,"comment_ctime":1695113874,"is_pvip":false,"replies":[{"id":139131,"content":"æ¯”å¦‚ï¼Œå¯¹äº Java çš„æ¨¡å—åŒ–æœ‰æ›´å¥½çš„æ”¯æŒï¼Œç³»ç»Ÿç±»åŠ è½½å™¨åœ¨åŠ è½½æ¨¡å—æ—¶å¯èƒ½å­˜åœ¨æ˜ å°„å…³ç³»æ··ä¹±çš„æƒ…å†µï¼Œç§»é™¤ç³»ç»Ÿç±»åŠ è½½å™¨ä½¿å¾—åœ¨æ¨¡å—é—´çš„åŠ è½½å…³ç³»ä¸Šæœ‰æ›´ç›´æ¥çš„ç®¡ç†ï¼Œæé«˜äº†æ¨¡å—åŒ–ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚æé«˜äº†è¿è¡Œæ—¶æ€§èƒ½ï¼Œå› ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨é€šå¸¸éœ€è¦æœç´¢æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„å¤šä¸ªè·¯å¾„ï¼Œè€Œåº”ç”¨ç±»åŠ è½½å™¨å¯ä»¥ä» JVM ç±»è·¯å¾„ä¸­æ›´ç›´æ¥åœ°å¯»æ‰¾å’ŒåŠ è½½ç±»ã€‚ ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696514963,"ip_address":"åŒ—äº¬","comment_id":381371,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"åˆ° JDK 17 çš„æ—¶å€™ï¼ŒJVM åˆ™æ˜¯ç›´æ¥ç§»é™¤äº†ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œæ‰€æœ‰çš„ç±»åŠ è½½æ“ä½œç”±åŸæœ¬çš„åº”ç”¨ç±»åŠ è½½å™¨æ¥ç®¡ã€‚è¿™ä¸ªæ”¹åŠ¨ç®€åŒ–äº† JVM æ¶æ„ï¼Œä¹Ÿå‡å°æ½œåœ¨çš„å®‰å…¨é£é™©ã€‚\nè¿™ä¸ªæ½œåœ¨é£é™©æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629015,"discussion_content":"æ¯”å¦‚ï¼Œå¯¹äº Java çš„æ¨¡å—åŒ–æœ‰æ›´å¥½çš„æ”¯æŒï¼Œç³»ç»Ÿç±»åŠ è½½å™¨åœ¨åŠ è½½æ¨¡å—æ—¶å¯èƒ½å­˜åœ¨æ˜ å°„å…³ç³»æ··ä¹±çš„æƒ…å†µï¼Œç§»é™¤ç³»ç»Ÿç±»åŠ è½½å™¨ä½¿å¾—åœ¨æ¨¡å—é—´çš„åŠ è½½å…³ç³»ä¸Šæœ‰æ›´ç›´æ¥çš„ç®¡ç†ï¼Œæé«˜äº†æ¨¡å—åŒ–ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚æé«˜äº†è¿è¡Œæ—¶æ€§èƒ½ï¼Œå› ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨é€šå¸¸éœ€è¦æœç´¢æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„å¤šä¸ªè·¯å¾„ï¼Œè€Œåº”ç”¨ç±»åŠ è½½å™¨å¯ä»¥ä» JVM ç±»è·¯å¾„ä¸­æ›´ç›´æ¥åœ°å¯»æ‰¾å’ŒåŠ è½½ç±»ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696514963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381725,"user_name":"è®°å¾—æ™šç¡","can_delete":false,"product_type":"c1","uid":3720824,"ip_address":"åŒ—äº¬","ucode":"C3DA9EDA2DBDB7","user_header":"https://static001.geekbang.org/account/avatar/00/38/c6/78/dc201b84.jpg","comment_is_top":false,"comment_ctime":1695739012,"is_pvip":false,"replies":[{"id":139123,"content":"æ¯”å¦‚é‚£äº›åè¯å‘¢ï¼Œå…¶å®å¯ä»¥å…ˆæœ‰é€»è¾‘ä¸Šæ•´ä½“çš„è®¤çŸ¥ï¼Œç„¶åé€ä¸ªæ”»å…‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696512336,"ip_address":"åŒ—äº¬","comment_id":381725,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"æ„Ÿè§‰å¾ˆå¤šåè¯éƒ½ä¸æ‡‚æ˜¯ä»€ä¹ˆæ„æ€ å¾ˆéš¾ç†è§£","like_count":0,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629003,"discussion_content":"æ¯”å¦‚é‚£äº›åè¯å‘¢ï¼Œå…¶å®å¯ä»¥å…ˆæœ‰é€»è¾‘ä¸Šæ•´ä½“çš„è®¤çŸ¥ï¼Œç„¶åé€ä¸ªæ”»å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696512336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382896,"user_name":"ç‹ç››æ­¦","can_delete":false,"product_type":"c1","uid":1182516,"ip_address":"åŒ—äº¬","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1698156846,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è¿™æ ·ä¸åŒ Web æ¨¡å—çš„ç±»å¯ä»¥ç›¸äº’è®¿é—®\n\nå‡†ç¡®è¯´æ˜¯webæ¨¡å—èƒ½è®¿é—®common libç›®å½•çš„ç±»ã€‚  webæ¨¡å—çš„ç±»å¹¶ä¸èƒ½ç›¸äº’è®¿é—®","like_count":1},{"had_liked":false,"id":382200,"user_name":"Geek_320730","can_delete":false,"product_type":"c1","uid":3035552,"ip_address":"åŒ—äº¬","ucode":"CF7E6C8E91D2C4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/XWv3mvIFORNgRk9wF8QLb9aXfh1Uz1hADtUmlFwQJVxIzhBf8HWc4QqU7iaTzj8wB5p5QJLRAvlQNrOqXtrg1Og/132","comment_is_top":false,"comment_ctime":1696869873,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"ç¤ºä¾‹æ–‡ä»¶ç›´æ¥è¿è¡Œï¼Œé€šè¿‡getClassLoaderè·å–ç±»çš„classLoader,è·å–çš„æ˜¯AppClassLoaderï¼Œå¹¶æ²¡æœ‰èµ°å®šä¹‰çš„ç±»åŠ è½½å™¨ï¼Œæ­¤æ—¶debugä¹Ÿä¸ä¼šè¿›å…¥æ–­ç‚¹ã€‚ç„¶ååˆ é™¤ç¼–è¯‘åçš„SampleClassæ–‡ä»¶ï¼Œä½¿AppClassLoaderä¸èƒ½æ­£å¸¸åŠ è½½ç±»ï¼Œå†è¿›è¡Œdebugï¼Œå°±ä¼šè¿›å…¥æ–­ç‚¹ï¼Œè¯´æ˜å…ˆåœ¨çˆ¶ç±»åŠ è½½å™¨AppClassLoaderä¸­åŠ è½½ï¼Œå¤±è´¥åï¼Œåœ¨ä½¿ç”¨å½“å‰è‡ªå®šä¹‰åŠ è½½å™¨ã€‚\næä¾›å¦ä¸€ä¸ªå®ä¾‹ï¼šhttps:&#47;&#47;github.com&#47;kuifir&#47;practice&#47;blob&#47;master&#47;jvm-module&#47;src&#47;main&#47;java&#47;com&#47;kuifir&#47;classloader&#47;CompileClassLoader.java\næ­¤å®ä¾‹å¯ä»¥åŠ è½½æ²¡æœ‰classæ–‡ä»¶çš„ç›®æ ‡ç±»ï¼Œå½“classæ–‡ä»¶å­˜åœ¨çš„æ—¶å€™ï¼ŒClassLoaderä¸ºAppClassLoaderï¼Œå½“classæ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼ŒClassLoaderä¸ºè‡ªå®šä¹‰ç±»åŠ è½½å™¨ã€‚","like_count":0},{"had_liked":false,"id":381689,"user_name":"æµ©ä»”æ˜¯ç¨‹åºå‘˜","can_delete":false,"product_type":"c1","uid":1104601,"ip_address":"å¹¿ä¸œ","ucode":"A7E5CF9E1571A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","comment_is_top":false,"comment_ctime":1695690989,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è€å¸ˆï¼Œæ™®é€šçš„åº”ç”¨ä¸­æœ‰ä»€ä¹ˆåœºæ™¯å¯ä»¥ç”¨åˆ°è‡ªå®šä¹‰ç±»åŠ è½½å™¨å—ï¼Ÿå¦‚æœæˆ‘æƒ³è¦è¦†ç›–ç¬¬ä¸‰æ–¹åº“çš„æŸä¸€ä¸ªç±»ï¼Œå¯ä»¥æ€ä¹ˆåšå‘¢","like_count":0,"discussions":[{"author":{"id":1384043,"avatar":"https://static001.geekbang.org/account/avatar/00/15/1e/6b/ccee30e3.jpg","nickname":"æ«å¶","note":"","ucode":"8F85C3FA6D1ABA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631427,"discussion_content":"å¥½å¥½å†™ä½ çš„crudå¾—äº†ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰ï¼Œçœ‹ä¸‹Tomcatæ€ä¹ˆåšçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699518478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380584,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"æ²³å—","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1693869149,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜ï¼š\nQ1ï¼šjre\\libä¸‹é¢å“ªä¸€ä¸ªæ˜¯å¯åŠ¨ç±»åŠ è½½å™¨ï¼Ÿæ­¤ç›®å½•ä¸‹é¢å¹¶æ²¡æœ‰Bootstrap ClassLoaderä¸€ç±»çš„æ–‡ä»¶ã€‚jre\\lib\\extä¸‹é¢å“ªä¸ªæ˜¯æ‰©å±•ç±»åŠ è½½å™¨ï¼Ÿæ­¤ç›®å½•ä¸‹é¢å¹¶æ²¡æœ‰ExtClassLoaderä¸€ç±»çš„æ–‡ä»¶ã€‚\nQ2ï¼šæˆ‘çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šæ²¡æœ‰å®šä¹‰CLASSPATHç¯å¢ƒå˜é‡ï¼Œè¿™è¯´æ˜æ²¡æœ‰åº”ç”¨ç±»åŠ è½½å™¨å—ï¼Ÿ\nQ3ï¼šJavaæ ¸å¿ƒåº“ä¸»è¦åŒ…å«å“ªäº›åŠŸèƒ½ï¼Ÿ\nQ4ï¼šIdeaä¸­çš„CLASSPATHåœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°ï¼Ÿ\nQ5ï¼šè‡ªå®šä¹‰ç±»åŠ è½½å™¨å®ç°ä»¥åï¼Œéœ€è¦åšä»€ä¹ˆæ“ä½œæ‰èƒ½è¢«JVMä½¿ç”¨ï¼Ÿ\nQ6ï¼šæœ¬è¯¾ä¸­çš„è‡ªå®šä¹‰ç±»åŠ è½½å™¨ä¾‹å­ï¼Œå§”æ‰˜çˆ¶ç±»å®ç°å—ï¼Ÿå¥½åƒæ²¡æœ‰çœ‹åˆ°å“ªéƒ¨åˆ†ä»£ç æ˜¯ç”¨æ¥å§”æ‰˜çˆ¶ç±»å®ç°çš„ã€‚\nQ7ï¼šTomcatæ¯ä¸ªWEBæ¨¡å—æœ‰è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œè¿™äº›æ¨¡å—çš„ç±»åŠ è½½å™¨éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„çˆ¶åŠ è½½å™¨ï¼Œå¯¹å—ï¼Ÿ æ­¤å¤–ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œè¿˜æœ‰å¯åŠ¨ç±»åŠ è½½å™¨ã€æ‰©å±•ç±»åŠ è½½å™¨å—ï¼Ÿ\nQ8ï¼šâ€œå¼•å¯¼ç±»åŠ è½½å™¨â€æ˜¯æŒ‡å¯åŠ¨ç±»åŠ è½½å™¨å—ï¼Ÿ\nQ9ï¼šå¹³å°ç±»åŠ è½½å™¨å’Œç³»ç»Ÿç±»åŠ è½½å™¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":380569,"user_name":"sc","can_delete":false,"product_type":"c1","uid":1025718,"ip_address":"æµ™æ±Ÿ","ucode":"46D659C89BA8C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/b6/27412d76.jpg","comment_is_top":false,"comment_ctime":1693827998,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":1,"score":2,"product_id":100613601,"comment_content":"è¯·é—®è€å¸ˆï¼Œåœ¨ ç±»åŠ è½½å™¨çš„æ¼”è¿› å°èŠ‚ä¸­è®²åˆ°ï¼Œjdk9 ã€åŸæœ¬çš„å¼•å¯¼ç±»åŠ è½½å™¨ä¹Ÿè¢«æ‹†åˆ†æˆäº†ä¸¤ä¸ªä¸åŒçš„åŠ è½½å™¨ï¼Œåˆ†åˆ«æ˜¯å¹³å°ç±»åŠ è½½å™¨ï¼ˆPlatform ClassLoaderï¼‰å’Œç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆSystem ClassLoaderï¼‰ã€‚ã€æ˜¯æŒ‡åœ¨ jdk9 ä¸­çš„ Bootstrap ClassLoader è¢«æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†äº†å—ï¼Œé‚£ Bootstrap ClassLoader è¿˜å­˜åœ¨å—ï¼Œè¿™é‡Œè¯´çš„æ‹†é£ä¹‹åçš„ç³»ç»Ÿç±»åŠ è½½å™¨å’Œä¹‹å‰è¯´çš„çš„åº”ç”¨ç±»åŠ è½½å™¨ä¸æ˜¯ä¸€ç§åŠ è½½å™¨å—ï¼Œä¹‹åè¯´ jdk17 åˆå–æ¶ˆäº†ç³»ç»Ÿç±»åŠ è½½ï¼Œé‚£åœ¨ jdk17 ä¸­ï¼Œè¿˜æ˜¯å¼•å¯¼ç±»åŠ è½½å™¨-å¹³å°ç±»åŠ è½½å™¨-åº”ç”¨ç±»åŠ è½½å™¨-è‡ªå®šä¹‰ç±»åŠ è½½å™¨ è¿™æ ·å—","like_count":0}]}