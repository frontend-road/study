{"id":264176,"title":"30 | 第四章总结","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-distributed\">https://gitee.com/geektime-geekbang/geektime-distributed</a></p>","comments":[{"had_liked":false,"id":260533,"user_name":"Zach.Chow","can_delete":false,"product_type":"c3","uid":1287569,"ip_address":"","ucode":"30067A4141B2C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/a5/91/bfedaf52.jpg","comment_is_top":false,"comment_ctime":1605057275,"is_pvip":false,"replies":[{"id":95016,"content":"你好，Session Server B异步写后端DB只是一种备份机制，即是写DB暂时写失败，只要Session Server B本身没有挂，也没有关系，因为会话数据在Session Server B上仍然存在，Session Client仍然可以正常访问Session Server B上面的会话数据，换句话说，后端写DB失败对Session Client来说是不可见的。\n\n只有当Session Server B本身挂，这个时候Session Client会感知到，它会重新选一台Session Server(假设C)，这个时候Session Server C上没有对应的会话数据，于是C会去后端DB加载，之所以能够从后端DB加载，是因为之前Session Server B挂之前有异步写入DB的备份。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1605537259,"ip_address":"","comment_id":260533,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100053601,"comment_content":"波波老师，请教一下，Session Server B异步写失败后，它自己做了缓存，此时Session Client 怎么知道它异步写失败了，然后去请求Session Server C呢？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509222,"discussion_content":"你好，Session Server B异步写后端DB只是一种备份机制，即是写DB暂时写失败，只要Session Server B本身没有挂，也没有关系，因为会话数据在Session Server B上仍然存在，Session Client仍然可以正常访问Session Server B上面的会话数据，换句话说，后端写DB失败对Session Client来说是不可见的。\n\n只有当Session Server B本身挂，这个时候Session Client会感知到，它会重新选一台Session Server(假设C)，这个时候Session Server C上没有对应的会话数据，于是C会去后端DB加载，之所以能够从后端DB加载，是因为之前Session Server B挂之前有异步写入DB的备份。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605537259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}