{"id":93014,"title":"14 | è¿›ç¨‹æ•°æ®ç»“æ„ï¼ˆä¸‹ï¼‰ï¼šé¡¹ç›®å¤šäº†å°±éœ€è¦é¡¹ç›®ç®¡ç†ç³»ç»Ÿ","content":"<p>ä¸Šä¸¤èŠ‚ï¼Œæˆ‘ä»¬è§£è¯»äº†task_structçš„å¤§éƒ¨åˆ†çš„æˆå‘˜å˜é‡ã€‚è¿™æ ·ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„æ–¹æ–¹é¢é¢ï¼Œéƒ½å¯ä»¥å¾ˆå¥½åœ°ç®¡ç†èµ·æ¥ï¼Œä½†æ˜¯å…¶ä¸­æœ‰ä¸€ä¸ªé—®é¢˜æˆ‘ä»¬æ²¡æœ‰è°ˆã€‚åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦è°ƒç”¨åˆ°ç³»ç»Ÿè°ƒç”¨ï¼Œå°±éœ€è¦è¿›å…¥å†…æ ¸ç»§ç»­æ‰§è¡Œã€‚é‚£å¦‚ä½•å°†ç”¨æˆ·æ€çš„æ‰§è¡Œå’Œå†…æ ¸æ€çš„æ‰§è¡Œä¸²èµ·æ¥å‘¢ï¼Ÿ</p><p>è¿™å°±éœ€è¦ä»¥ä¸‹ä¸¤ä¸ªé‡è¦çš„æˆå‘˜å˜é‡ï¼š</p><pre><code>struct thread_info\t\tthread_info;\nvoid  *stack;\n</code></pre><h2>ç”¨æˆ·æ€å‡½æ•°æ ˆ</h2><p>åœ¨ç”¨æˆ·æ€ä¸­ï¼Œç¨‹åºçš„æ‰§è¡Œå¾€å¾€æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚å‡½æ•°è°ƒç”¨éƒ½æ˜¯é€šè¿‡æ ˆæ¥è¿›è¡Œçš„ã€‚æˆ‘ä»¬å‰é¢å¤§è‡´è®²è¿‡å‡½æ•°æ ˆçš„åŸç†ï¼Œä»Šå¤©æˆ‘ä»¬ä»”ç»†åˆ†æä¸€ä¸‹ã€‚</p><p>å‡½æ•°è°ƒç”¨å…¶å®ä¹Ÿå¾ˆç®€å•ã€‚å¦‚æœä½ å»çœ‹æ±‡ç¼–è¯­è¨€çš„ä»£ç ï¼Œå…¶å®å°±æ˜¯æŒ‡ä»¤è·³è½¬ï¼Œä»ä»£ç çš„ä¸€ä¸ªåœ°æ–¹è·³åˆ°å¦å¤–ä¸€ä¸ªåœ°æ–¹ã€‚è¿™é‡Œæ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜æ˜¯ï¼Œå‚æ•°å’Œè¿”å›åœ°å€åº”è¯¥æ€ä¹ˆä¼ é€’è¿‡å»å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬çœ‹å‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹ï¼ŒAè°ƒç”¨Bã€è°ƒç”¨Cã€è°ƒç”¨Dï¼Œç„¶åè¿”å›Cã€è¿”å›Bã€è¿”å›Aï¼Œè¿™æ˜¯ä¸€ä¸ªåè¿›å…ˆå‡ºçš„è¿‡ç¨‹ã€‚æœ‰æ²¡æœ‰è§‰å¾—è¿™ä¸ªè¿‡ç¨‹å¾ˆç†Ÿæ‚‰ï¼Ÿæ²¡é”™ï¼Œå’±ä»¬æ•°æ®ç»“æ„é‡Œå­¦çš„æ ˆï¼Œä¹Ÿæ˜¯åè¿›å…ˆå‡ºçš„ï¼Œæ‰€ä»¥ç”¨æ ˆä¿å­˜è¿™äº›æœ€åˆé€‚ã€‚</p><p>åœ¨è¿›ç¨‹çš„å†…å­˜ç©ºé—´é‡Œé¢ï¼Œæ ˆæ˜¯ä¸€ä¸ªä»é«˜åœ°å€åˆ°ä½åœ°å€ï¼Œå¾€ä¸‹å¢é•¿çš„ç»“æ„ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æ˜¯æ ˆåº•ï¼Œä¸‹é¢æ˜¯æ ˆé¡¶ï¼Œå…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œéƒ½æ˜¯ä»ä¸‹é¢çš„æ ˆé¡¶å¼€å§‹çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ae/2e/aec865abccf0308155f4138cc905972e.jpg?wh=1846*1619\" alt=\"\"></p><p>æˆ‘ä»¬å…ˆæ¥çœ‹32ä½æ“ä½œç³»ç»Ÿçš„æƒ…å†µã€‚åœ¨CPUé‡Œï¼Œ<strong>ESP</strong>ï¼ˆExtended Stack Pointerï¼‰æ˜¯æ ˆé¡¶æŒ‡é’ˆå¯„å­˜å™¨ï¼Œå…¥æ ˆæ“ä½œPushå’Œå‡ºæ ˆæ“ä½œPopæŒ‡ä»¤ï¼Œä¼šè‡ªåŠ¨è°ƒæ•´ESPçš„å€¼ã€‚å¦å¤–æœ‰ä¸€ä¸ªå¯„å­˜å™¨<strong>EBP</strong>ï¼ˆExtended Base Pointerï¼‰ï¼Œæ˜¯æ ˆåŸºåœ°å€æŒ‡é’ˆå¯„å­˜å™¨ï¼ŒæŒ‡å‘å½“å‰æ ˆå¸§çš„æœ€åº•éƒ¨ã€‚</p><!-- [[[read_end]]] --><p>ä¾‹å¦‚ï¼ŒAè°ƒç”¨Bï¼ŒAçš„æ ˆé‡Œé¢åŒ…å«Aå‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œç„¶åæ˜¯è°ƒç”¨Bçš„æ—¶å€™è¦ä¼ ç»™å®ƒçš„å‚æ•°ï¼Œç„¶åè¿”å›Açš„åœ°å€ï¼Œè¿™ä¸ªåœ°å€ä¹Ÿåº”è¯¥å…¥æ ˆï¼Œè¿™å°±å½¢æˆäº†Açš„æ ˆå¸§ã€‚æ¥ä¸‹æ¥å°±æ˜¯Bçš„æ ˆå¸§éƒ¨åˆ†äº†ï¼Œå…ˆä¿å­˜çš„æ˜¯Aæ ˆå¸§çš„æ ˆåº•ä½ç½®ï¼Œä¹Ÿå°±æ˜¯EBPã€‚å› ä¸ºåœ¨Bå‡½æ•°é‡Œé¢è·å–Aä¼ è¿›æ¥çš„å‚æ•°ï¼Œå°±æ˜¯é€šè¿‡è¿™ä¸ªæŒ‡é’ˆè·å–çš„ï¼Œæ¥ä¸‹æ¥ä¿å­˜çš„æ˜¯Bçš„å±€éƒ¨å˜é‡ç­‰ç­‰ã€‚</p><p>å½“Bè¿”å›çš„æ—¶å€™ï¼Œè¿”å›å€¼ä¼šä¿å­˜åœ¨EAXå¯„å­˜å™¨ä¸­ï¼Œä»æ ˆä¸­å¼¹å‡ºè¿”å›åœ°å€ï¼Œå°†æŒ‡ä»¤è·³è½¬å›å»ï¼Œå‚æ•°ä¹Ÿä»æ ˆä¸­å¼¹å‡ºï¼Œç„¶åç»§ç»­æ‰§è¡ŒAã€‚</p><p>å¯¹äº64ä½æ“ä½œç³»ç»Ÿï¼Œæ¨¡å¼å¤šå°‘æœ‰äº›ä¸ä¸€æ ·ã€‚å› ä¸º64ä½æ“ä½œç³»ç»Ÿçš„å¯„å­˜å™¨æ•°ç›®æ¯”è¾ƒå¤šã€‚raxç”¨äºä¿å­˜å‡½æ•°è°ƒç”¨çš„è¿”å›ç»“æœã€‚æ ˆé¡¶æŒ‡é’ˆå¯„å­˜å™¨å˜æˆäº†rspï¼ŒæŒ‡å‘æ ˆé¡¶ä½ç½®ã€‚å †æ ˆçš„Popå’ŒPushæ“ä½œä¼šè‡ªåŠ¨è°ƒæ•´rspï¼Œæ ˆåŸºæŒ‡é’ˆå¯„å­˜å™¨å˜æˆäº†rbpï¼ŒæŒ‡å‘å½“å‰æ ˆå¸§çš„èµ·å§‹ä½ç½®ã€‚</p><p>æ”¹å˜æ¯”è¾ƒå¤šçš„æ˜¯å‚æ•°ä¼ é€’ã€‚rdiã€rsiã€rdxã€rcxã€r8ã€r9è¿™6ä¸ªå¯„å­˜å™¨ï¼Œç”¨äºä¼ é€’å­˜å‚¨å‡½æ•°è°ƒç”¨æ—¶çš„6ä¸ªå‚æ•°ã€‚å¦‚æœè¶…è¿‡6çš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦æ”¾åˆ°æ ˆé‡Œé¢ã€‚</p><p>ç„¶è€Œï¼Œå‰6ä¸ªå‚æ•°æœ‰æ—¶å€™éœ€è¦è¿›è¡Œå¯»å€ï¼Œä½†æ˜¯å¦‚æœåœ¨å¯„å­˜å™¨é‡Œé¢ï¼Œæ˜¯æ²¡æœ‰åœ°å€çš„ï¼Œå› è€Œè¿˜æ˜¯ä¼šæ”¾åˆ°æ ˆé‡Œé¢ï¼Œåªä¸è¿‡æ”¾åˆ°æ ˆé‡Œé¢çš„æ“ä½œæ˜¯è¢«è°ƒç”¨å‡½æ•°åšçš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/77/c0/770b0036a8b2695463cd95869f5adec0.jpg?wh=1840*1973\" alt=\"\"></p><p>ä»¥ä¸Šçš„æ ˆæ“ä½œï¼Œéƒ½æ˜¯åœ¨è¿›ç¨‹çš„å†…å­˜ç©ºé—´é‡Œé¢è¿›è¡Œçš„ã€‚</p><h2>å†…æ ¸æ€å‡½æ•°æ ˆ</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼Œä»è¿›ç¨‹çš„å†…å­˜ç©ºé—´åˆ°å†…æ ¸ä¸­äº†ã€‚å†…æ ¸ä¸­ä¹Ÿæœ‰å„ç§å„æ ·çš„å‡½æ•°è°ƒç”¨æ¥è°ƒç”¨å»çš„ï¼Œä¹Ÿéœ€è¦è¿™æ ·ä¸€ä¸ªæœºåˆ¶ï¼Œè¿™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>è¿™æ—¶å€™ï¼Œä¸Šé¢çš„æˆå‘˜å˜é‡stackï¼Œä¹Ÿå°±æ˜¯å†…æ ¸æ ˆï¼Œå°±æ´¾ä¸Šäº†ç”¨åœºã€‚</p><p>Linuxç»™æ¯ä¸ªtaskéƒ½åˆ†é…äº†å†…æ ¸æ ˆã€‚åœ¨32ä½ç³»ç»Ÿä¸Šarch/x86/include/asm/page_32_types.hï¼Œæ˜¯è¿™æ ·å®šä¹‰çš„ï¼šä¸€ä¸ªPAGE_SIZEæ˜¯4Kï¼Œå·¦ç§»ä¸€ä½å°±æ˜¯ä¹˜ä»¥2ï¼Œä¹Ÿå°±æ˜¯8Kã€‚</p><pre><code>#define THREAD_SIZE_ORDER\t1\n#define THREAD_SIZE\t\t(PAGE_SIZE &lt;&lt; THREAD_SIZE_ORDER)\n</code></pre><p>å†…æ ¸æ ˆåœ¨64ä½ç³»ç»Ÿä¸Šarch/x86/include/asm/page_64_types.hï¼Œæ˜¯è¿™æ ·å®šä¹‰çš„ï¼šåœ¨PAGE_SIZEçš„åŸºç¡€ä¸Šå·¦ç§»ä¸¤ä½ï¼Œä¹Ÿå³16Kï¼Œå¹¶ä¸”è¦æ±‚èµ·å§‹åœ°å€å¿…é¡»æ˜¯8192çš„æ•´æ•°å€ã€‚</p><pre><code>#ifdef CONFIG_KASAN\n#define KASAN_STACK_ORDER 1\n#else\n#define KASAN_STACK_ORDER 0\n#endif\n\n\n#define THREAD_SIZE_ORDER\t(2 + KASAN_STACK_ORDER)\n#define THREAD_SIZE  (PAGE_SIZE &lt;&lt; THREAD_SIZE_ORDER)\n</code></pre><p>å†…æ ¸æ ˆæ˜¯ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/31/2d/31d15bcd2a053235b5590977d12ffa2d.jpeg?wh=2126*1553\" alt=\"\"></p><p>è¿™æ®µç©ºé—´çš„æœ€ä½ä½ç½®ï¼Œæ˜¯ä¸€ä¸ªthread_infoç»“æ„ã€‚è¿™ä¸ªç»“æ„æ˜¯å¯¹task_structç»“æ„çš„è¡¥å……ã€‚å› ä¸ºtask_structç»“æ„åºå¤§ä½†æ˜¯é€šç”¨ï¼Œä¸åŒçš„ä½“ç³»ç»“æ„å°±éœ€è¦ä¿å­˜ä¸åŒçš„ä¸œè¥¿ï¼Œæ‰€ä»¥å¾€å¾€ä¸ä½“ç³»ç»“æ„æœ‰å…³çš„ï¼Œéƒ½æ”¾åœ¨thread_infoé‡Œé¢ã€‚</p><p>åœ¨å†…æ ¸ä»£ç é‡Œé¢æœ‰è¿™æ ·ä¸€ä¸ªunionï¼Œå°†thread_infoå’Œstackæ”¾åœ¨ä¸€èµ·ï¼Œåœ¨include/linux/sched.hæ–‡ä»¶ä¸­å°±æœ‰ã€‚</p><pre><code>union thread_union {\n#ifndef CONFIG_THREAD_INFO_IN_TASK\n\tstruct thread_info thread_info;\n#endif\n\tunsigned long stack[THREAD_SIZE/sizeof(long)];\n};\n</code></pre><p>è¿™ä¸ªunionå°±æ˜¯è¿™æ ·å®šä¹‰çš„ï¼Œå¼€å¤´æ˜¯thread_infoï¼Œåé¢æ˜¯stackã€‚</p><p>åœ¨å†…æ ¸æ ˆçš„æœ€é«˜åœ°å€ç«¯ï¼Œå­˜æ”¾çš„æ˜¯å¦ä¸€ä¸ªç»“æ„pt_regsï¼Œå®šä¹‰å¦‚ä¸‹ã€‚å…¶ä¸­ï¼Œ32ä½å’Œ64ä½çš„å®šä¹‰ä¸ä¸€æ ·ã€‚</p><pre><code>#ifdef __i386__\nstruct pt_regs {\n\tunsigned long bx;\n\tunsigned long cx;\n\tunsigned long dx;\n\tunsigned long si;\n\tunsigned long di;\n\tunsigned long bp;\n\tunsigned long ax;\n\tunsigned long ds;\n\tunsigned long es;\n\tunsigned long fs;\n\tunsigned long gs;\n\tunsigned long orig_ax;\n\tunsigned long ip;\n\tunsigned long cs;\n\tunsigned long flags;\n\tunsigned long sp;\n\tunsigned long ss;\n};\n#else \nstruct pt_regs {\n\tunsigned long r15;\n\tunsigned long r14;\n\tunsigned long r13;\n\tunsigned long r12;\n\tunsigned long bp;\n\tunsigned long bx;\n\tunsigned long r11;\n\tunsigned long r10;\n\tunsigned long r9;\n\tunsigned long r8;\n\tunsigned long ax;\n\tunsigned long cx;\n\tunsigned long dx;\n\tunsigned long si;\n\tunsigned long di;\n\tunsigned long orig_ax;\n\tunsigned long ip;\n\tunsigned long cs;\n\tunsigned long flags;\n\tunsigned long sp;\n\tunsigned long ss;\n/* top of stack page */\n};\n#endif \n</code></pre><p>çœ‹åˆ°è¿™ä¸ªæ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Ÿå’±ä»¬åœ¨è®²ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œå·²ç»å¤šæ¬¡è§è¿‡è¿™ä¸ªç»“æ„ã€‚å½“ç³»ç»Ÿè°ƒç”¨ä»ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„æ—¶å€™ï¼Œé¦–å…ˆè¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯å°†ç”¨æˆ·æ€è¿è¡Œè¿‡ç¨‹ä¸­çš„CPUä¸Šä¸‹æ–‡ä¿å­˜èµ·æ¥ï¼Œå…¶å®ä¸»è¦å°±æ˜¯ä¿å­˜åœ¨è¿™ä¸ªç»“æ„çš„å¯„å­˜å™¨å˜é‡é‡Œã€‚è¿™æ ·å½“ä»å†…æ ¸ç³»ç»Ÿè°ƒç”¨è¿”å›çš„æ—¶å€™ï¼Œæ‰èƒ½è®©è¿›ç¨‹åœ¨åˆšæ‰çš„åœ°æ–¹æ¥ç€è¿è¡Œä¸‹å»ã€‚</p><p>å¦‚æœæˆ‘ä»¬å¯¹æ¯”ç³»ç»Ÿè°ƒç”¨é‚£ä¸€èŠ‚çš„å†…å®¹ï¼Œä½ ä¼šå‘ç°ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œå‹æ ˆçš„å€¼çš„é¡ºåºå’Œstruct pt_regsä¸­å¯„å­˜å™¨å®šä¹‰çš„é¡ºåºæ˜¯ä¸€æ ·çš„ã€‚</p><p>åœ¨å†…æ ¸ä¸­ï¼ŒCPUçš„å¯„å­˜å™¨ESPæˆ–è€…RSPï¼Œå·²ç»æŒ‡å‘å†…æ ¸æ ˆçš„æ ˆé¡¶ï¼Œåœ¨å†…æ ¸æ€é‡Œçš„è°ƒç”¨éƒ½æœ‰å’Œç”¨æˆ·æ€ç›¸ä¼¼çš„è¿‡ç¨‹ã€‚</p><h2>é€šè¿‡task_structæ‰¾å†…æ ¸æ ˆ</h2><p>å¦‚æœæœ‰ä¸€ä¸ªtask_structçš„stackæŒ‡é’ˆåœ¨æ‰‹ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‡½æ•°æ‰¾åˆ°è¿™ä¸ªçº¿ç¨‹å†…æ ¸æ ˆï¼š</p><pre><code>static inline void *task_stack_page(const struct task_struct *task)\n{\n\treturn task-&gt;stack;\n}\n</code></pre><p>ä»task_structå¦‚ä½•å¾—åˆ°ç›¸åº”çš„pt_regså‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‡½æ•°ï¼š</p><pre><code>/*\n * TOP_OF_KERNEL_STACK_PADDING reserves 8 bytes on top of the ring0 stack.\n * This is necessary to guarantee that the entire &quot;struct pt_regs&quot;\n * is accessible even if the CPU haven't stored the SS/ESP registers\n * on the stack (interrupt gate does not save these registers\n * when switching to the same priv ring).\n * Therefore beware: accessing the ss/esp fields of the\n * &quot;struct pt_regs&quot; is possible, but they may contain the\n * completely wrong values.\n */\n#define task_pt_regs(task) \\\n({\t\t\t\t\t\t\t\t\t\\\n\tunsigned long __ptr = (unsigned long)task_stack_page(task);\t\\\n\t__ptr += THREAD_SIZE - TOP_OF_KERNEL_STACK_PADDING;\t\t\\\n\t((struct pt_regs *)__ptr) - 1;\t\t\t\t\t\\\n})\n</code></pre><p>ä½ ä¼šå‘ç°ï¼Œè¿™æ˜¯å…ˆä»task_structæ‰¾åˆ°å†…æ ¸æ ˆçš„å¼€å§‹ä½ç½®ã€‚ç„¶åè¿™ä¸ªä½ç½®åŠ ä¸ŠTHREAD_SIZEå°±åˆ°äº†æœ€åçš„ä½ç½®ï¼Œç„¶åè½¬æ¢ä¸ºstruct pt_regsï¼Œå†å‡ä¸€ï¼Œå°±ç›¸å½“äºå‡å°‘äº†ä¸€ä¸ªpt_regsçš„ä½ç½®ï¼Œå°±åˆ°äº†è¿™ä¸ªç»“æ„çš„é¦–åœ°å€ã€‚</p><p>è¿™é‡Œé¢æœ‰ä¸€ä¸ªTOP_OF_KERNEL_STACK_PADDINGï¼Œè¿™ä¸ªçš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code>#ifdef CONFIG_X86_32\n# ifdef CONFIG_VM86\n#  define TOP_OF_KERNEL_STACK_PADDING 16\n# else\n#  define TOP_OF_KERNEL_STACK_PADDING 8\n# endif\n#else\n# define TOP_OF_KERNEL_STACK_PADDING 0\n#endif\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ32ä½æœºå™¨ä¸Šæ˜¯8ï¼Œå…¶ä»–æ˜¯0ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå‹æ ˆpt_regsæœ‰ä¸¤ç§æƒ…å†µã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒCPUç”¨ringæ¥åŒºåˆ†æƒé™ï¼Œä»è€ŒLinuxå¯ä»¥åŒºåˆ†å†…æ ¸æ€å’Œç”¨æˆ·æ€ã€‚</p><p>å› æ­¤ï¼Œç¬¬ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬æ‹¿æ¶‰åŠä»ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„å˜åŒ–çš„ç³»ç»Ÿè°ƒç”¨æ¥è¯´ã€‚å› ä¸ºæ¶‰åŠæƒé™çš„æ”¹å˜ï¼Œä¼šå‹æ ˆä¿å­˜SSã€ESPå¯„å­˜å™¨çš„ï¼Œè¿™ä¸¤ä¸ªå¯„å­˜å™¨å…±å ç”¨8ä¸ªbyteã€‚</p><p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œä¸æ¶‰åŠæƒé™çš„å˜åŒ–ï¼Œå°±ä¸ä¼šå‹æ ˆè¿™8ä¸ªbyteã€‚è¿™æ ·å°±ä¼šä½¿å¾—ä¸¤ç§æƒ…å†µä¸å…¼å®¹ã€‚å¦‚æœæ²¡æœ‰å‹æ ˆè¿˜è®¿é—®ï¼Œå°±ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥è¿˜ä¸å¦‚é¢„ç•™åœ¨è¿™é‡Œï¼Œä¿è¯å®‰å…¨ã€‚åœ¨64ä½ä¸Šï¼Œä¿®æ”¹äº†è¿™ä¸ªé—®é¢˜ï¼Œå˜æˆäº†å®šé•¿çš„ã€‚</p><p>å¥½äº†ï¼Œç°åœ¨å¦‚æœä½ task_structåœ¨æ‰‹ï¼Œå°±èƒ½å¤Ÿè½»æ¾å¾—åˆ°å†…æ ¸æ ˆå’Œå†…æ ¸å¯„å­˜å™¨ã€‚</p><h2>é€šè¿‡å†…æ ¸æ ˆæ‰¾task_struct</h2><p>é‚£å¦‚æœä¸€ä¸ªå½“å‰åœ¨æŸä¸ªCPUä¸Šæ‰§è¡Œçš„è¿›ç¨‹ï¼Œæƒ³çŸ¥é“è‡ªå·±çš„task_structåœ¨å“ªé‡Œï¼Œåˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>è¿™ä¸ªè‰°å·¨çš„ä»»åŠ¡è¦äº¤ç»™thread_infoè¿™ä¸ªç»“æ„ã€‚</p><pre><code>struct thread_info {\n\tstruct task_struct\t*task;\t\t/* main task structure */\n\t__u32\t\t\tflags;\t\t/* low level flags */\n\t__u32\t\t\tstatus;\t\t/* thread synchronous flags */\n\t__u32\t\t\tcpu;\t\t/* current CPU */\n\tmm_segment_t\t\taddr_limit;\n\tunsigned int\t\tsig_on_uaccess_error:1;\n\tunsigned int\t\tuaccess_err:1;\t/* uaccess failed */\n};\n</code></pre><p>è¿™é‡Œé¢æœ‰ä¸ªæˆå‘˜å˜é‡taskæŒ‡å‘task_structï¼Œæ‰€ä»¥æˆ‘ä»¬å¸¸ç”¨current_thread_info()-&gt;taskæ¥è·å–task_structã€‚</p><pre><code>static inline struct thread_info *current_thread_info(void)\n{\n\treturn (struct thread_info *)(current_top_of_stack() - THREAD_SIZE);\n}\n</code></pre><p>è€Œthread_infoçš„ä½ç½®å°±æ˜¯å†…æ ¸æ ˆçš„æœ€é«˜ä½ç½®ï¼Œå‡å»THREAD_SIZEï¼Œå°±åˆ°äº†thread_infoçš„èµ·å§‹åœ°å€ã€‚</p><p>ä½†æ˜¯ç°åœ¨å˜æˆè¿™æ ·äº†ï¼Œåªå‰©ä¸‹ä¸€ä¸ªflagsã€‚</p><pre><code>struct thread_info {\n        unsigned long           flags;          /* low level flags */\n};\n</code></pre><p>é‚£è¿™æ—¶å€™æ€ä¹ˆè·å–å½“å‰è¿è¡Œä¸­çš„task_structå‘¢ï¼Ÿcurrent_thread_infoæœ‰äº†æ–°çš„å®ç°æ–¹å¼ã€‚</p><p>åœ¨include/linux/thread_info.hä¸­å®šä¹‰äº†current_thread_infoã€‚</p><pre><code>#include &lt;asm/current.h&gt;\n#define current_thread_info() ((struct thread_info *)current)\n#endif\n</code></pre><p>é‚£currentåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿåœ¨arch/x86/include/asm/current.hä¸­å®šä¹‰äº†ã€‚</p><pre><code>struct task_struct;\n\n\nDECLARE_PER_CPU(struct task_struct *, current_task);\n\n\nstatic __always_inline struct task_struct *get_current(void)\n{\n\treturn this_cpu_read_stable(current_task);\n}\n\n\n#define current get_current\n</code></pre><p>åˆ°è¿™é‡Œï¼Œä½ ä¼šå‘ç°ï¼Œæ–°çš„æœºåˆ¶é‡Œé¢ï¼Œæ¯ä¸ªCPUè¿è¡Œçš„task_structä¸é€šè¿‡thread_infoè·å–äº†ï¼Œè€Œæ˜¯ç›´æ¥æ”¾åœ¨Per CPU å˜é‡é‡Œé¢äº†ã€‚</p><p>å¤šæ ¸æƒ…å†µä¸‹ï¼ŒCPUæ˜¯åŒæ—¶è¿è¡Œçš„ï¼Œä½†æ˜¯å®ƒä»¬å…±åŒä½¿ç”¨å…¶ä»–çš„ç¡¬ä»¶èµ„æºçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³å¤šä¸ªCPUä¹‹é—´çš„åŒæ­¥é—®é¢˜ã€‚</p><p>Per CPUå˜é‡æ˜¯å†…æ ¸ä¸­ä¸€ç§é‡è¦çš„åŒæ­¥æœºåˆ¶ã€‚é¡¾åæ€ä¹‰ï¼ŒPer CPUå˜é‡å°±æ˜¯ä¸ºæ¯ä¸ªCPUæ„é€ ä¸€ä¸ªå˜é‡çš„å‰¯æœ¬ï¼Œè¿™æ ·å¤šä¸ªCPUå„è‡ªæ“ä½œè‡ªå·±çš„å‰¯æœ¬ï¼Œäº’ä¸å¹²æ¶‰ã€‚æ¯”å¦‚ï¼Œå½“å‰è¿›ç¨‹çš„å˜é‡current_taskå°±è¢«å£°æ˜ä¸ºPer CPUå˜é‡ã€‚</p><p>è¦ä½¿ç”¨Per CPUå˜é‡ï¼Œé¦–å…ˆè¦å£°æ˜è¿™ä¸ªå˜é‡ï¼Œåœ¨arch/x86/include/asm/current.hä¸­æœ‰ï¼š</p><pre><code>DECLARE_PER_CPU(struct task_struct *, current_task);\n</code></pre><p>ç„¶åæ˜¯å®šä¹‰è¿™ä¸ªå˜é‡ï¼Œåœ¨arch/x86/kernel/cpu/common.cä¸­æœ‰ï¼š</p><pre><code>DEFINE_PER_CPU(struct task_struct *, current_task) = &amp;init_task;\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç³»ç»Ÿåˆšåˆšåˆå§‹åŒ–çš„æ—¶å€™ï¼Œcurrent_taskéƒ½æŒ‡å‘init_taskã€‚</p><p>å½“æŸä¸ªCPUä¸Šçš„è¿›ç¨‹è¿›è¡Œåˆ‡æ¢çš„æ—¶å€™ï¼Œcurrent_taskè¢«ä¿®æ”¹ä¸ºå°†è¦åˆ‡æ¢åˆ°çš„ç›®æ ‡è¿›ç¨‹ã€‚ä¾‹å¦‚ï¼Œè¿›ç¨‹åˆ‡æ¢å‡½æ•°__switch_toå°±ä¼šæ”¹å˜current_taskã€‚</p><pre><code>__visible __notrace_funcgraph struct task_struct *\n__switch_to(struct task_struct *prev_p, struct task_struct *next_p)\n{\n......\nthis_cpu_write(current_task, next_p);\n......\nreturn prev_p;\n}\n</code></pre><p>å½“è¦è·å–å½“å‰çš„è¿è¡Œä¸­çš„task_structçš„æ—¶å€™ï¼Œå°±éœ€è¦è°ƒç”¨this_cpu_read_stableè¿›è¡Œè¯»å–ã€‚</p><pre><code>#define this_cpu_read_stable(var)       percpu_stable_op(&quot;mov&quot;, var)\n</code></pre><p>å¥½äº†ï¼Œç°åœ¨å¦‚æœä½ æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œæ­£åœ¨æŸä¸ªCPUä¸Šè¿è¡Œï¼Œå°±èƒ½å¤Ÿè½»æ¾å¾—åˆ°task_structäº†ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>è¿™ä¸€èŠ‚è™½ç„¶åªä»‹ç»äº†å†…æ ¸æ ˆï¼Œä½†æ˜¯å†…å®¹æ›´åŠ é‡è¦ã€‚å¦‚æœè¯´task_structçš„å…¶ä»–æˆå‘˜å˜é‡éƒ½æ˜¯å’Œè¿›ç¨‹ç®¡ç†æœ‰å…³çš„ï¼Œå†…æ ¸æ ˆæ˜¯å’Œè¿›ç¨‹è¿è¡Œæœ‰å…³ç³»çš„ã€‚</p><p>æˆ‘è¿™é‡Œç”»äº†ä¸€å¼ å›¾æ€»ç»“ä¸€ä¸‹32ä½å’Œ64ä½çš„å·¥ä½œæ¨¡å¼ï¼Œå·¦è¾¹æ˜¯32ä½çš„ï¼Œå³è¾¹æ˜¯64ä½çš„ã€‚</p><ul>\n<li>\n<p>åœ¨ç”¨æˆ·æ€ï¼Œåº”ç”¨ç¨‹åºè¿›è¡Œäº†è‡³å°‘ä¸€æ¬¡å‡½æ•°è°ƒç”¨ã€‚32ä½å’Œ64çš„ä¼ é€’å‚æ•°çš„æ–¹å¼ç¨æœ‰ä¸åŒï¼Œ32ä½çš„å°±æ˜¯ç”¨å‡½æ•°æ ˆï¼Œ64ä½çš„å‰6ä¸ªå‚æ•°ç”¨å¯„å­˜å™¨ï¼Œå…¶ä»–çš„ç”¨å‡½æ•°æ ˆã€‚</p>\n</li>\n<li>\n<p>åœ¨å†…æ ¸æ€ï¼Œ32ä½å’Œ64ä½éƒ½ä½¿ç”¨å†…æ ¸æ ˆï¼Œæ ¼å¼ä¹Ÿç¨æœ‰ä¸åŒï¼Œä¸»è¦é›†ä¸­åœ¨pt_regsç»“æ„ä¸Šã€‚</p>\n</li>\n<li>\n<p>åœ¨å†…æ ¸æ€ï¼Œ32ä½å’Œ64ä½çš„å†…æ ¸æ ˆå’Œtask_structçš„å…³è”å…³ç³»ä¸åŒã€‚32ä½ä¸»è¦é thread_infoï¼Œ64ä½ä¸»è¦é Per-CPUå˜é‡ã€‚</p>\n</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/82/5c/82ba663aad4f6bd946d48424196e515c.jpeg?wh=3811*2824\" alt=\"\"></p><h2>è¯¾å ‚ç»ƒä¹ </h2><p>è¿™ä¸€èŠ‚è®²å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®²äº†å‡½æ•°æ ˆçš„å·¥ä½œæ¨¡å¼ã€‚è¯·ä½ å†™ä¸€ä¸ªç¨‹åºï¼Œç„¶åç¼–è¯‘ä¸ºæ±‡ç¼–è¯­è¨€ï¼Œæ‰“å¼€çœ‹ä¸€ä¸‹ï¼Œå‡½æ•°æ ˆæ˜¯å¦‚ä½•èµ·ä½œç”¨çš„ã€‚</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„ç–‘æƒ‘å’Œè§è§£ï¼Œä¹Ÿæ¬¢è¿ä½ æ”¶è—æœ¬èŠ‚å†…å®¹ï¼Œ<span class=\"orange\">åå¤ç ”è¯»</span>ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå’Œä»–ä¸€èµ·å­¦ä¹ ã€è¿›æ­¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/37/8c0a95fa07a8b9a1abfd394479bdd637.jpg?wh=1110*659\" alt=\"\"></p>","comments":[{"had_liked":false,"id":90710,"user_name":"why","can_delete":false,"product_type":"c1","uid":1012937,"ip_address":"","ucode":"C9E796E53F6F5E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/c9/d3439ca4.jpg","comment_is_top":false,"comment_ctime":1556614457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"276434521401","product_id":100024701,"comment_content":"- ç”¨æˆ·æ€&#47;å†…æ ¸æ€åˆ‡æ¢æ‰§è¡Œå¦‚ä½•ä¸²èµ·æ¥<br>- ç”¨æˆ·æ€å‡½æ•°æ ˆ; é€šè¿‡ JMP + å‚æ•° + è¿”å›åœ°å€ è°ƒç”¨å‡½æ•°<br>    - æ ˆå†…å­˜ç©ºé—´ä»é«˜åˆ°ä½å¢é•¿<br>    - 32ä½æ ˆç»“æ„: æ ˆå¸§åŒ…å« å‰ä¸€ä¸ªå¸§çš„ EBP + å±€éƒ¨å˜é‡ + Nä¸ªå‚æ•° + è¿”å›åœ°å€<br>        - ESP: æ ˆé¡¶æŒ‡é’ˆ; EBP: æ ˆåŸºå€(æ ˆå¸§æœ€åº•éƒ¨, å±€éƒ¨å˜é‡èµ·å§‹)<br>        - è¿”å›å€¼ä¿å­˜åœ¨ EAX ä¸­<br>    - 64ä½æ ˆç»“æ„: ç»“æ„ç±»ä¼¼<br>        - rax ä¿å­˜è¿”å›ç»“æœ; rsp æ ˆé¡¶æŒ‡é’ˆ; rbp æ ˆåŸºæŒ‡é’ˆ<br>        - å‚æ•°ä¼ é€’æ—¶, å‰ 6ä¸ªæ”¾å¯„å­˜å™¨ä¸­(å†ç”±è¢«è°ƒç”¨å‡½æ•° push è¿›è‡ªå·±çš„æ ˆ, ç”¨ä»¥å¯»å€), å‚æ•°è¶…è¿‡ 6ä¸ªå‹å…¥æ ˆä¸­<br>- å†…æ ¸æ ˆç»“æ„: <br>    - Linux ä¸ºæ¯ä¸ª task åˆ†é…äº†å†…æ ¸æ ˆ, 32ä½(8K), 64ä½(16K)<br>    - æ ˆç»“æ„: [é¢„ç•™8å­—èŠ‚ +] pt_regs + å†…æ ¸æ ˆ + å¤´éƒ¨ thread_info<br>    - thread_info æ˜¯ task_struct çš„è¡¥å……, å­˜å‚¨äºä½“ç³»ç»“æ„æœ‰å…³çš„å†…å®¹<br>    - pt_regs ç”¨ä»¥ä¿å­˜ç”¨æˆ·è¿è¡Œä¸Šä¸‹æ–‡, é€šè¿‡ push å¯„å­˜å™¨åˆ°æ ˆä¸­ä¿å­˜<br>    - é€šè¿‡ task_struct æ‰¾åˆ°å†…æ ¸æ ˆ<br>        - ç›´æ¥ç”± task_struct å†…çš„ stack ç›´æ¥å¾—åˆ°æŒ‡å‘ thread_info çš„æŒ‡é’ˆ<br>    - é€šè¿‡å†…æ ¸æ ˆæ‰¾åˆ° task_struct<br>        - 32ä½ ç›´æ¥ç”± thread_info ä¸­çš„æŒ‡é’ˆå¾—åˆ°<br>        - 64ä½ æ¯ä¸ª CPU å½“å‰è¿è¡Œè¿›ç¨‹çš„ task_struct çš„æŒ‡é’ˆå­˜æ”¾åˆ° Per CPU å˜é‡ current_task ä¸­; å¯è°ƒç”¨ this_cpu_read_stable è¿›è¡Œè¯»å–","like_count":65},{"had_liked":false,"id":90417,"user_name":"ç¬¬ä¹å¤©é­”ç‹","can_delete":false,"product_type":"c1","uid":1135246,"ip_address":"","ucode":"E98DDC3E5125CB","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/8e/07db8450.jpg","comment_is_top":false,"comment_ctime":1556514920,"is_pvip":false,"replies":[{"id":"32637","content":"è°¢è°¢é¼“åŠ±","user_name":"ä½œè€…å›å¤","comment_id":90417,"uid":"1001590","ip_address":"","utype":1,"ctime":1556812243,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"164765272168","product_id":100024701,"comment_content":"ä»ç½‘ç»œåè®®è¯¾å­¦åˆ°è¿™é‡Œï¼Œæ»¡æ»¡çš„å¹²è´§å•Šã€‚ç‰¹åˆ«æ˜¯é…å›¾ï¼Œå¤ªç”¨å¿ƒäº†ï¼Œä¸€çœ‹å°±æ˜¯éå¸¸æœ‰å¿ƒæ‰èƒ½åšå‡ºæ¥çš„ã€‚è°¢è°¢åˆ˜è€å¸ˆï¼","like_count":39,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448513,"discussion_content":"è°¢è°¢é¼“åŠ±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556812243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90419,"user_name":"é’çŸ³","can_delete":false,"product_type":"c1","uid":1215531,"ip_address":"","ucode":"B0056AD6453322","user_header":"https://static001.geekbang.org/account/avatar/00/12/8c/2b/3ab96998.jpg","comment_is_top":false,"comment_ctime":1556515565,"is_pvip":false,"replies":[{"id":"49507","content":"èµï¼Œæ¨èè¿™ç§æŸ¥èµ„æ–™çš„æ–¹å¼ï¼Œè¿™æ ·å­¦åˆ°çš„ä¸œè¥¿å°±å¤šå¤šäº†","user_name":"ä½œè€…å›å¤","comment_id":90419,"uid":"1001590","ip_address":"","utype":1,"ctime":1567676988,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":3,"race_medal":0,"score":"53096123117","product_id":100024701,"comment_content":"çœ‹è¿™ç¯‡å†…å®¹æ—¶ï¼ŒæŸ¥äº†å‡ ç¯‡èµ„æ–™ã€‚<br><br>åœ¨æ±‡ç¼–ä»£ç ä¸­ï¼Œå‡½æ•°è°ƒç”¨çš„å‚æ•°ä¼ é€’æ˜¯é€šè¿‡æŠŠå‚æ•°ä¾æ¬¡æ”¾åœ¨é è¿‘è°ƒç”¨è€…çš„æ ˆçš„é¡¶éƒ¨æ¥å®ç°çš„ã€‚è°ƒç”¨è€…è·å–å‚æ•°æ—¶ï¼Œåªè¦ç›¸å¯¹äºå½“å‰å¸§æŒ‡é’ˆçš„å‘ä¸Šåç§»å³å¯å–åˆ°å‚æ•°ã€‚å³å–è°ƒç”¨è€…å‡½æ•°å‚æ•°æ—¶æ‰§è¡Œmovl 8(%ebp), %edxã€‚","like_count":13,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448515,"discussion_content":"èµï¼Œæ¨èè¿™ç§æŸ¥èµ„æ–™çš„æ–¹å¼ï¼Œè¿™æ ·å­¦åˆ°çš„ä¸œè¥¿å°±å¤šå¤šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567676988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2365071,"avatar":"https://static001.geekbang.org/account/avatar/00/24/16/8f/c1baee96.jpg","nickname":"muse","note":"","ucode":"43B0C82639E39F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368781,"discussion_content":"è¿™æ ·çš„è¯ï¼Œè€å¸ˆæ–‡ä¸­ç”»çš„å›¾å°±ä¸å¯¹äº†æ˜¯å—ï¼Œå› ä¸ºå›¾ä¸­æ˜¾ç¤ºçš„æ˜¯åœ¨è°ƒç”¨é™„è¿‘æŠŠå‚æ•°å‹æ ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618831168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"å…”å˜Ÿå˜Ÿ","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2365071,"avatar":"https://static001.geekbang.org/account/avatar/00/24/16/8f/c1baee96.jpg","nickname":"muse","note":"","ucode":"43B0C82639E39F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390094,"discussion_content":"å›¾æ²¡é”™ï¼Œä½†æ˜¯æ ¹æ®Açš„EBPæ¥è®¡ç®—æœ‰é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629648894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":368781,"ip_address":""},"score":390094,"extra":""}]}]},{"had_liked":false,"id":90415,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1556514783,"is_pvip":false,"replies":[{"id":"32638","content":"å•Šï¼Œå¥½çš„ï¼Œçœ‹æ¥åº”è¯¥ç»™è‹±æ–‡ååŠ ä½œè€…çš„","user_name":"ä½œè€…å›å¤","comment_id":90415,"uid":"1001590","ip_address":"","utype":1,"ctime":1556812292,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"27326318559","product_id":100024701,"comment_content":"è€å¸ˆï¼Œæˆ‘æ±‚æ‚¨äº†ï¼Œèƒ½ä¸èƒ½æŠŠæ‚¨è®²çš„ä¸“æ ä¸­æ¶‰åŠçš„ä¹¦ååŠ ä¸ªè±†ç“£ä¹‹ç±»çš„é“¾æ¥ğŸ˜‚ğŸ˜‚ï¼Œæœ‰äº›éƒ½é‡åï¼Œä½œè€…ä¸åŒï¼ŒğŸ˜­ğŸ˜­ä¸å¸¦è¿™æ ·ç©çš„ğŸ˜­ğŸ˜­ğŸ˜­","like_count":6,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448512,"discussion_content":"å•Šï¼Œå¥½çš„ï¼Œçœ‹æ¥åº”è¯¥ç»™è‹±æ–‡ååŠ ä½œè€…çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556812292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131953,"user_name":"ZYecho","can_delete":false,"product_type":"c1","uid":1356589,"ip_address":"","ucode":"9D156DD30C581E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLh73kPzAKhz7YxUribqF6QKFiahhVAbwpgVLSRicA68c6ZFA7vUBJY1ves3LVvibrypROyI7awv47eSA/132","comment_is_top":false,"comment_ctime":1567991867,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"18747861051","product_id":100024701,"comment_content":"ä¸ºä»€ä¹ˆ32ä½çš„å¤„ç†å™¨è¿˜éœ€è¦å•ç‹¬å‹sså’Œespå‘¢ï¼Ÿ pt_regsç»“æ„ä½“ä¸­ä¸æ˜¯å·²ç»å«æœ‰è¿™ä¸¤ä¸ªå¯„å­˜å™¨äº†ä¹ˆï¼Ÿè°¢è°¢è€å¸ˆ","like_count":4,"discussions":[{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386451,"discussion_content":"ssä»¥åŠespå¯„å­˜å™¨åªèƒ½å­˜æ”¾å½“å‰çº¿ç¨‹çš„ä¿¡æ¯ï¼›å½“åˆ‡æ¢çº¿ç¨‹çš„æ—¶å€™ï¼Œå¯„å­˜å™¨å†…å®¹éœ€è¦è¿›è¡Œä¿å­˜ï¼›32bitç³»ç»Ÿæ˜¯å°†è¿™äº›å¯„å­˜å™¨å†…å®¹ç›´æ¥ä¿å­˜åˆ°ç‰©ç†å†…å­˜ç»“æ„ä¸­ï¼›64bitç³»ç»Ÿåˆ™æ˜¯æ”¾ç½®åˆ°äº†å…¶ä»–å¯„å­˜å™¨ä¸­ï¼Œæœºåˆ¶ä¸ä¸€æ ·ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627599155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1472051,"avatar":"https://static001.geekbang.org/account/avatar/00/16/76/33/928ffd21.jpg","nickname":"AlexS","note":"","ucode":"3DA81A613CE645","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312074,"discussion_content":" pt_regsç»“æ„ä½“ä½äºå†…æ ¸æ ˆä¸­ï¼Œå®ƒçš„ss esp flags cs ip åœ¨è§¦å‘ä¸­æ–­æ—¶ç”±CPUæ§åˆ¶å•å…ƒå¸®å¿™å®Œæˆå…¥æ ˆã€‚å‰©ä½™å†…å®¹ç”±SAVE_ALLä½¿ç”¨pushå…¥æ ˆã€‚æ³¨æ„è¿™é‡Œè¿˜æ¶‰åŠåˆ°ç”±ç”¨æˆ·æ ˆåˆ‡æ¢åˆ°å†…æ ¸æ ˆçš„è¿‡ç¨‹ï¼Œå³æ›´æ–°ss espå¯„å­˜å™¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹ä¹Ÿæ˜¯ç”±CPUæ§åˆ¶å•å…ƒå®Œæˆçš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602579028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1039256,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/98/60ced4c8.jpg","nickname":"æ¶›æ¶›","note":"","ucode":"4C47A3FB33EEFE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283965,"discussion_content":"https://www.cnblogs.com/chaozhu/p/6283495.html å¯ä»¥çœ‹çœ‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592407619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2766280,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/JHzZynEKL2CibTaxCZV3XOs1bJJFqbmwhmibd4U5njlaNVWPrbre1Qha2XUx1dcQ99iaYFl13PyjlYQ0rcl9N5vEg/132","nickname":"wsxzei","note":"","ucode":"8527ED444BFC73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1039256,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/98/60ced4c8.jpg","nickname":"æ¶›æ¶›","note":"","ucode":"4C47A3FB33EEFE","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":579890,"discussion_content":"è°¢è°¢ï¼Œè¿™ç¯‡æ–‡ç« å†™å¾—å¾ˆæ¸…æ™°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657758081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":283965,"ip_address":""},"score":579890,"extra":""}]}]},{"had_liked":false,"id":131493,"user_name":"ZYecho","can_delete":false,"product_type":"c1","uid":1356589,"ip_address":"","ucode":"9D156DD30C581E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLh73kPzAKhz7YxUribqF6QKFiahhVAbwpgVLSRicA68c6ZFA7vUBJY1ves3LVvibrypROyI7awv47eSA/132","comment_is_top":false,"comment_ctime":1567767348,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18747636532","product_id":100024701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåœ¨ 64 ä½ä¸Šï¼Œä¿®æ”¹äº†è¿™ä¸ªé—®é¢˜ï¼Œå˜æˆäº†å®šé•¿çš„ã€‚è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿ<br>å…·ä½“åœ¨64ä½ä¸Šæ˜¯å¦‚ä½•è¿›è¡Œæ“ä½œçš„å‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1114753,"avatar":"https://static001.geekbang.org/account/avatar/00/11/02/81/489e1cd4.jpg","nickname":"å¿˜å¿§è‰çš„çº¦å®š","note":"","ucode":"F99D2F5D179B2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382469,"discussion_content":"åº”è¯¥æ˜¯å½“æƒé™æ²¡æœ‰å˜åŒ–çš„æ—¶å€™ï¼Œä¹Ÿä¿ç•™ä¸€å®šé•¿åº¦çš„åœ°å€ä½å§ï¼Œä»¥ä¿è¯å¯»å€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625583766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143672,"user_name":"å¸Œå¤·","can_delete":false,"product_type":"c1","uid":1028673,"ip_address":"","ucode":"2E3E86AC7A19EC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/41/d9dcc7ef.jpg","comment_is_top":false,"comment_ctime":1571754238,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14456656126","product_id":100024701,"comment_content":"å†…æ ¸æ ˆè¿™ä¸ªå›¾é‡Œè¾¹é¢„ç•™8ä¸ªå­—èŠ‚ä¸‹è¾¹çš„pg_regsï¼Œåº”è¯¥æ˜¯pt_regså§ï¼Ÿ","like_count":3},{"had_liked":false,"id":98529,"user_name":"å˜‰æœ¨","can_delete":false,"product_type":"c1","uid":1317999,"ip_address":"","ucode":"AF4877693782C0","user_header":"https://static001.geekbang.org/account/avatar/00/14/1c/6f/3ea2a599.jpg","comment_is_top":false,"comment_ctime":1559018223,"is_pvip":false,"replies":[{"id":"35376","content":"åé¢è®²åˆ‡æ¢çš„æ—¶å€™ä¼šè®²ï¼Œç”¨æˆ·æ ˆç›¸å…³å¯„å­˜å™¨åœ¨pt_regsä¸­ï¼Œç”¨æˆ·æ ˆçš„å†…å­˜åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸ä¼šå†²çª","user_name":"ä½œè€…å›å¤","comment_id":98529,"uid":"1001590","ip_address":"","utype":1,"ctime":1559100335,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"14443920111","product_id":100024701,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œä¸¤ä¸ªè¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œç”¨æˆ·æ ˆçš„ä¸Šä¸‹æ–‡ä¿å­˜åœ¨å“ªï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451722,"discussion_content":"åé¢è®²åˆ‡æ¢çš„æ—¶å€™ä¼šè®²ï¼Œç”¨æˆ·æ ˆç›¸å…³å¯„å­˜å™¨åœ¨pt_regsä¸­ï¼Œç”¨æˆ·æ ˆçš„å†…å­˜åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸ä¼šå†²çª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559100335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96858,"user_name":"éª¨æ±¤é¸¡è›‹é¢","can_delete":false,"product_type":"c1","uid":1050002,"ip_address":"","ucode":"2AC141A523E710","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/92/b609f7e3.jpg","comment_is_top":false,"comment_ctime":1558524199,"is_pvip":true,"replies":[{"id":"49265","content":"mmé‡Œé¢æœ‰çš„","user_name":"ä½œè€…å›å¤","comment_id":96858,"uid":"1001590","ip_address":"","utype":1,"ctime":1567608475,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"14443426087","product_id":100024701,"comment_content":"ä¸ºä»€ä¹ˆç”¨æˆ·æ€çš„æ ˆä¸éœ€è¦ task_struct ç»´æŠ¤ä¸€ä¸ªç±»ä¼¼ *stack çš„æŒ‡é’ˆå‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451036,"discussion_content":"mmé‡Œé¢æœ‰çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567608475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90291,"user_name":"Liber","can_delete":false,"product_type":"c1","uid":1244231,"ip_address":"","ucode":"A5CBFDB15A7745","user_header":"https://static001.geekbang.org/account/avatar/00/12/fc/47/a4be64d8.jpg","comment_is_top":false,"comment_ctime":1556467368,"is_pvip":false,"replies":[{"id":"49511","content":"æ˜¯çš„ï¼Œæ˜¯çš„ï¼Œæ˜¯è‡ªåŠ¨å‘çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":90291,"uid":"1001590","ip_address":"","utype":1,"ctime":1567677068,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"14441369256","product_id":100024701,"comment_content":"0ç‚¹è‡ªåŠ¨å‘ï¼Œåº”è¯¥æ˜¯è‡ªåŠ¨å‘å¸ƒçš„å§","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448456,"discussion_content":"æ˜¯çš„ï¼Œæ˜¯çš„ï¼Œæ˜¯è‡ªåŠ¨å‘çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567677068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117453,"user_name":"kå…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1221532,"ip_address":"","ucode":"76D292DC62B52D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/9c/8a14b7db.jpg","comment_is_top":false,"comment_ctime":1564050902,"is_pvip":false,"replies":[{"id":"46413","content":"ä¸æ˜¯çš„ï¼Œå¯¹ç€å›¾å¯ä»¥çœ‹çš„æ¯”è¾ƒæ¸…æ¥š","user_name":"ä½œè€…å›å¤","comment_id":117453,"uid":"1001590","ip_address":"","utype":1,"ctime":1566299248,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":6,"race_medal":0,"score":"10153985494","product_id":100024701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜èƒ½å¦è§£ç­”ï¼Ÿ<br>task_structæ‰¾å†…æ ¸æ ˆè¿‡ç¨‹ç†è§£äº†ï¼Œä½†æ˜¯åè¿‡æ¥æ‰¾ï¼Œè¿™å¥â€œè€Œ thread_info çš„ä½ç½®å°±æ˜¯å†…æ ¸æ ˆçš„æœ€é«˜ä½ç½®ï¼Œå‡å» THREAD_SIZEï¼Œå°±åˆ°äº† thread_info çš„èµ·å§‹åœ°å€ã€‚â€æ²¡æ‡‚ï¼Œçƒ¦è¯·è§£ç­”ä¸€ä¸‹<br><br>è¿™é‡Œè¯´çš„æœ€é«˜ä½ç½®åº”è¯¥æ˜¯æ ˆé¡¶ï¼Œåˆ°äº†æ ˆé¡¶å°±æ˜¯thread_infoæœ€ä½åœ°å€ï¼Œé‚£ä¸å°±ç›´æ¥æ‰¾åˆ°äº†å—","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459978,"discussion_content":"ä¸æ˜¯çš„ï¼Œå¯¹ç€å›¾å¯ä»¥çœ‹çš„æ¯”è¾ƒæ¸…æ¥š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566299248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1576512,"avatar":"https://static001.geekbang.org/account/avatar/00/18/0e/40/49a71ed8.jpg","nickname":"å…«æˆ’","note":"","ucode":"3F262A99492A65","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353639,"discussion_content":"è¿˜æ˜¯æ²¡çœ‹æ‡‚ï¼Œè¿™é‡Œçš„æœ€é«˜ä½ç½®æ˜¯æ ˆé¡¶è¿˜æ˜¯æ ˆåº•è¿˜æ˜¯å…¶ä»–ï¼Ÿ\nè¿˜æœ‰ï¼Œçœ‹å›¾æ‰€ç¤ºthread_infoä¸å°±åœ¨æ ˆé¡¶ä½ç½®å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615182984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1472051,"avatar":"https://static001.geekbang.org/account/avatar/00/16/76/33/928ffd21.jpg","nickname":"AlexS","note":"","ucode":"3DA81A613CE645","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312077,"discussion_content":"è¿™é‡Œè¯´çš„æ˜¯æ ˆå†…å­˜ç©ºé—´çš„æœ€é¡¶éƒ¨ï¼Œä¸æ˜¯æ ˆé¡¶ï¼Œå®ƒæ¯”å®é™…æ ˆé¡¶çš„ä½ç½®çš„åœ°å€å°ï¼Œé™¤éæ»¡äº†ï¼Œä»–ä»¬ç›¸ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602579236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030816,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ba/a0/f03d20cd.jpg","nickname":"likun","note":"","ucode":"9145ED059CCC6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202820,"discussion_content":"è¿™é‡Œè¯´çš„æœ€é«˜ä½è¿½æ˜¯æ ˆåº•çš„å†…å­˜åœ°å€ï¼Œå¯¹äºæ ˆçš„pushæ“ä½œæ˜¯ä»é«˜åœ°å€ä½å‘ä½åœ°å€ä½æ¨è¿›çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583949347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1519189,"avatar":"","nickname":"Geek_00711d","note":"","ucode":"2B0B98853D4CCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5097,"discussion_content":"æ ˆåº•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565943039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1296815,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoqEsRcQ5icwkgTDBX9JA8iaqohBdIGhxMXLFDSevEXqm5sAarw3hKeEHzxkoEJ5sx7plibcRPqmicAlQ/132","nickname":"ROY","note":"","ucode":"FB99E4456D2E5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3378,"discussion_content":"åŒé—®\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564447824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136073,"user_name":"kdb_reboot","can_delete":false,"product_type":"c1","uid":1003594,"ip_address":"","ucode":"4C56FCA563FCA3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/4a/04fef27f.jpg","comment_is_top":false,"comment_ctime":1569339001,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5864306297","product_id":100024701,"comment_content":"çœ‹æ‡‚è¿™ç« ,éœ€è¦çŸ¥é“è¿›ç¨‹çš„å†…å­˜åˆ†å¸ƒå›¾","like_count":1},{"had_liked":false,"id":123737,"user_name":"...","can_delete":false,"product_type":"c1","uid":1142098,"ip_address":"","ucode":"9D73E00133C236","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/52/404912c3.jpg","comment_is_top":false,"comment_ctime":1565749080,"is_pvip":false,"replies":[{"id":"46290","content":"ä¸Šé¢æ˜¯æ ˆçš„åº•éƒ¨","user_name":"ä½œè€…å›å¤","comment_id":123737,"uid":"1001590","ip_address":"","utype":1,"ctime":1566282087,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"5860716376","product_id":100024701,"comment_content":"è€å¸ˆæœ‰ä¸ªç–‘é—® Aè°ƒç”¨B Båº”è¯¥æ˜¯è¢«è°ƒç”¨è€…å§ æ˜¯ä¸æ˜¯åº”è¯¥æ”¾åœ¨å›¾ä¸Šé¢éƒ¨åˆ†","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462792,"discussion_content":"ä¸Šé¢æ˜¯æ ˆçš„åº•éƒ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566282087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043293,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/eb/5d/2467ad6c.jpg","nickname":"æœ¨å¿ƒ","note":"","ucode":"538A3B9B214BF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":177723,"discussion_content":"è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…æåäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582119931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90452,"user_name":"é’çŸ³","can_delete":false,"product_type":"c1","uid":1215531,"ip_address":"","ucode":"B0056AD6453322","user_header":"https://static001.geekbang.org/account/avatar/00/12/8c/2b/3ab96998.jpg","comment_is_top":false,"comment_ctime":1556522918,"is_pvip":false,"replies":[{"id":"32636","content":"ä¸ä»…ä»…åˆ‡æ¢è¿™ä¸ªå˜é‡ï¼Œè¦åˆ‡æ¢çš„è¿˜æŒºå¤šçš„","user_name":"ä½œè€…å›å¤","comment_id":90452,"uid":"1001590","ip_address":"","utype":1,"ctime":1556812210,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"5851490214","product_id":100024701,"comment_content":"åœ¨12èŠ‚é‡Œé¢æåˆ°â€œLinuxçš„ä»»åŠ¡ç®¡ç†ç”±ç»Ÿä¸€çš„ç»“æ„task_structè¿›è¡Œç®¡ç†â€ã€‚é‚£ä¹ˆå¤šæ ¸CPUçš„ä»»åŠ¡åˆ‡æ¢æ—¶ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯å°†current_taskåˆ‡æ¢åˆ°å¦ä¸€ä¸ªtask_structå‘¢ï¼Ÿ<br><br>THREAD_SIZEæ˜¯å›ºå®šçš„å¤§å°ï¼Œ32ä½ç³»ç»Ÿä¸­æ˜¯8Kï¼ˆé¡µå¤§å°å·¦ç§»ä¸€ä½ï¼‰ï¼Œ64ä½ç³»ç»Ÿæ˜¯16Kï¼ˆé¡µå¤§å°å·¦ç§»äºŒä½ï¼‰ã€‚TOP_OF_KERNEL_STACK_PADDINGå°±æ˜¯å›¾â€œå†…æ ¸æ ˆæ˜¯ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„ç»“æ„â€ä¸­çš„â€œé¢„ç•™8ä¸ªå­—èŠ‚â€ã€‚<br><br>é€šè¿‡task_structæ‰¾å†…æ ¸æ ˆçš„è¿‡ç¨‹ï¼š<br>1. task_structæ‰¾å†…æ ¸æ ˆæ˜¯é€šè¿‡stackæŒ‡é’ˆï¼Œç›´æ¥æ‰¾åˆ°å†…æ ¸çº¿ç¨‹æ ˆï¼ŒstackæŒ‡é’ˆè®°å½•çš„æ˜¯å†…æ ¸æ ˆçš„é¦–åœ°å€ã€‚<br>2. task_struckæ‰¾å†…æ ¸å¯„å­˜å™¨æ˜¯é€šè¿‡ å†…æ ¸æ ˆçš„é¦–åœ°å€ï¼ˆ1ä¸­çš„stackæŒ‡é’ˆï¼‰ + (THREAD_SIZE - TOP_OF_KERNEL_STACK_PADDING)å®šä½åˆ°pt_regsçš„æœ€é«˜ä½åœ°å€ï¼Œå†å‡ä¸€å¾—åˆ°pt_regsçš„æœ€ä½ä½åœ°å€ï¼ˆé¦–åœ°å€ï¼‰ã€‚","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448531,"discussion_content":"ä¸ä»…ä»…åˆ‡æ¢è¿™ä¸ªå˜é‡ï¼Œè¦åˆ‡æ¢çš„è¿˜æŒºå¤šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556812210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440772,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fc/04/d83a555e.jpg","nickname":"Kevinâš¡ï¸Zhou","note":"","ucode":"C0FC2673705212","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25323,"discussion_content":"è¿™ä¸ªå‡1å¾—åˆ°çš„ä¸æ˜¯pt_regsçš„æœ€ä½ä¸ºåœ°å€, åœ¨æ ˆä¸­å…¶å®æ˜¯ssçš„èµ·å§‹åœ°å€,ä¹Ÿå°±æ˜¯å›¾ä¸Šæ ˆé è¿‘é¡¶éƒ¨çš„ä½ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570501523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90306,"user_name":"çŸ³ç»´åº·","can_delete":false,"product_type":"c1","uid":1067564,"ip_address":"","ucode":"E39ED8416B2C01","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/2c/f8451d77.jpg","comment_is_top":false,"comment_ctime":1556471409,"is_pvip":false,"replies":[{"id":"49510","content":"èƒ½çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":90306,"uid":"1001590","ip_address":"","utype":1,"ctime":1567677050,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":3,"race_medal":0,"score":"5851438705","product_id":100024701,"comment_content":"æ–‡ä¸­è¯´â€œæ¥ä¸‹æ¥å°±æ˜¯ B çš„æ ˆå¸§éƒ¨åˆ†äº†ï¼Œå…ˆä¿å­˜çš„æ˜¯ A æ ˆå¸§çš„æ ˆåº•ä½ç½®,ä¹Ÿå°±æ˜¯ EBPã€‚å› ä¸ºåœ¨ B å‡½æ•°é‡Œé¢è·å– A ä¼ è¿›æ¥çš„å‚æ•°ï¼Œå°±æ˜¯é€šè¿‡è¿™ä¸ªæŒ‡é’ˆè·å–çš„ï¼Œâ€æ„Ÿè§‰ä¸»æµç¼–è¯‘å™¨è¿˜æ˜¯ç›´æ¥èƒ½é€šè¿‡å½“å‰ RBP æˆ–è€… RSP æ¥è¿›è¡Œåç§»å®šä½åˆ°ä¼ è¿›æ¥çš„å‚æ•°äº†å§ï¼Ÿä¿å­˜è¿™ä¸ª A æ ˆåº•ä½ç½®æ›´å¤šçš„æ˜¯ä¸ºäº†å›å¤ A çš„ç°åœºå§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448461,"discussion_content":"èƒ½çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567677050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165971,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ca/93/181b8e65.jpg","nickname":"sinfool","note":"","ucode":"AEA84CCBB2D89D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":31587,"discussion_content":"åŒæ„Ÿï¼æˆ‘ä¹Ÿåœ¨è¿™é‡Œç–‘æƒ‘äº†å¥½ä¸€ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570937730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1470635,"avatar":"https://static001.geekbang.org/account/avatar/00/16/70/ab/7a7399a7.jpg","nickname":"tj.â€¢","note":"","ucode":"078D80A68491E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8913,"discussion_content":"è¿™å¥è¯ï¼Œæˆ‘çœ‹ç€å¾ˆæ‡µã€‚è€å¸ˆèƒ½ä¸èƒ½è§£é‡Šä¸€ä¸‹å•Šã€‚å¬ä¸æ‡‚å•Šï¼Œä¸ºä»€ä¹ˆèƒ½è·å–åˆ°å‚æ•°å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568099124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347514,"user_name":"NeverSeeYouAgainBUG","can_delete":false,"product_type":"c1","uid":2930836,"ip_address":"","ucode":"1B0E8CA284C181","user_header":"https://static001.geekbang.org/account/avatar/00/2c/b8/94/d20583ef.jpg","comment_is_top":false,"comment_ctime":1654096422,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654096422","product_id":100024701,"comment_content":"å“‡ï¼Œè€å¸ˆæ‚¨çœŸæ˜¯å·¨ä½¬å•Šï¼Œå·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨å·¨ä½¬","like_count":0},{"had_liked":false,"id":346061,"user_name":"ä¹”å…‹å”å”","can_delete":false,"product_type":"c1","uid":2350246,"ip_address":"","ucode":"31F524DC1E1498","user_header":"https://static001.geekbang.org/account/avatar/00/23/dc/a6/6c2728b9.jpg","comment_is_top":false,"comment_ctime":1652797519,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652797519","product_id":100024701,"comment_content":"é¢è¯•é—®åˆ°maxï¼ˆint aï¼Œint bï¼‰æ€ä¹ˆå‹æ ˆå‡ºæ ˆï¼Œæ˜¯æƒ³é—®æ±‡ç¼–ï¼Ÿ","like_count":0},{"had_liked":false,"id":337061,"user_name":"å‹¿å¿˜åˆå¿ƒğŸƒ","can_delete":false,"product_type":"c1","uid":1341504,"ip_address":"","ucode":"02A5D0C357ADE0","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/40/7ca70d5d.jpg","comment_is_top":false,"comment_ctime":1646578063,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646578063","product_id":100024701,"comment_content":"32ä½çš„ä»£ç ç¼–è¯‘ï¼Œæ ˆå¸§é‡Œçš„å±€éƒ¨å˜é‡å’Œä¸‹ä¸€è·³å‡½æ•°å‚æ•°ä¹‹é—´æœ‰4Bçš„ç©ºä½™æ˜¯ä¸ºå•¥å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":309664,"user_name":"LeviHou","can_delete":false,"product_type":"c1","uid":1930622,"ip_address":"","ucode":"5695713F9062BA","user_header":"https://static001.geekbang.org/account/avatar/00/1d/75/7e/16f45c25.jpg","comment_is_top":false,"comment_ctime":1630294909,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630294909","product_id":100024701,"comment_content":"å­¦ä¹ äº†ï¼Œä¹‹å‰çœ‹è¿‡åµŒå…¥å¼å®æ—¶æ“ä½œç³»ç»Ÿucosçš„å†…æ ¸åˆ‡æ¢ã€‚ç†è§£èµ·æ¥ç¨å¾®é¡ºä¸€ç‚¹ï¼Œä½†æ˜¯å¤æ‚åº¦æ¯”ucoså¤§å¾ˆå¤šï¼","like_count":0},{"had_liked":false,"id":309267,"user_name":"Geek_e08c40","can_delete":false,"product_type":"c1","uid":2666373,"ip_address":"","ucode":"8B4A3AC18EFD93","user_header":"","comment_is_top":false,"comment_ctime":1630027453,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630027453","product_id":100024701,"comment_content":"è€å¸ˆper CPUæ˜¯æŒ‰ç¼“å­˜è¡ŒåŠ è½½å˜é‡å‰¯æœ¬çš„å—ä¸€ä¸ªç¼“å­˜è¡Œå¯èƒ½ä¼šæœ‰å¤šä¸ªå˜é‡ï¼Ÿï¼Œç„¶åæ”¾åˆ°L 1-åˆ°L3çš„cacheäº†","like_count":0},{"had_liked":false,"id":308470,"user_name":"å…”å˜Ÿå˜Ÿ","can_delete":false,"product_type":"c1","uid":2028811,"ip_address":"","ucode":"5A9042B4C7670C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","comment_is_top":false,"comment_ctime":1629635392,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1629635392","product_id":100024701,"comment_content":"é€šè¿‡task_structå†…çš„ stackæŒ‡é’ˆï¼Œå¾—åˆ°thread_infoçš„åœ°å€ï¼ˆæœ€ä½åœ°å€ï¼‰ï¼ŒåŠ ä¸ŠTHREAD_SIZEï¼Œåˆ°äº†æœ€é«˜çš„åœ°å€ï¼Œå†å‡pt_regsçš„å¤§å°ï¼Œå°±åˆ°äº†pt_regsçš„èµ·å§‹åœ°å€ã€‚<br>è¿™é‡Œè¦æ³¨æ„ï¼Œä¹‹æ‰€ä»¥ä¸‹é¢æ˜¯èµ·å§‹åœ°å€ï¼Œæ˜¯å› ä¸ºLinuxéµå¾ªå°ç«¯æ¨¡å¼ï¼Œä½åœ°å€æ˜¯å­˜å‚¨å˜é‡çš„èµ·å§‹ä½ç½®ã€‚","like_count":0,"discussions":[{"author":{"id":2309990,"avatar":"","nickname":"Geek_93217e","note":"","ucode":"DC70FDB8AD83EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535937,"discussion_content":"åº”è¯¥ä¸æ˜¯è¿™ä¸ªåŸå› ï¼Œå› ä¸ºå‚ç…§å›¾å’Œæ–‡å­—â€œåœ¨å†…æ ¸ä¸­ï¼ŒCPU çš„å¯„å­˜å™¨ ESP æˆ–è€… RSPï¼Œå·²ç»æŒ‡å‘å†…æ ¸æ ˆçš„æ ˆé¡¶ï¼Œåœ¨å†…æ ¸æ€é‡Œçš„è°ƒç”¨éƒ½æœ‰å’Œç”¨æˆ·æ€ç›¸ä¼¼çš„è¿‡ç¨‹ã€‚â€æ ˆé¡¶åœ°å€æœ€å°ï¼Œpt_regsæ˜¯åœ¨é è¿‘æ ˆåº•çš„ä½ç½®ï¼Œæ‰€ä»¥æ‰æœ‰é‚£æ ·çš„è®¡ç®—è¿‡ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638612308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304548,"user_name":"é©¬æŒ¯","can_delete":false,"product_type":"c1","uid":1136329,"ip_address":"","ucode":"94234F533219C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/c9/7b3cd3e0.jpg","comment_is_top":false,"comment_ctime":1627475018,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1627475018","product_id":100024701,"comment_content":"å†…æ ¸æ ˆä¸­çš„thread_infoå’Œtask_structä¸­çš„thread_infoæ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿæ˜¯åŒä¸€ä¸ªä¸œè¥¿å—","like_count":0,"discussions":[{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"å…”å˜Ÿå˜Ÿ","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390096,"discussion_content":"å°±æ˜¯åŒä¸€ä¸ªä¸œè¥¿â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629649025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265957,"user_name":"åƒé¥­ç¡è§‰æ‰“é…±æ²¹","can_delete":false,"product_type":"c1","uid":1071668,"ip_address":"","ucode":"95EC98C2B5045B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5a/34/4cbadca6.jpg","comment_is_top":false,"comment_ctime":1607076314,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1607076314","product_id":100024701,"comment_content":"è€å¸ˆï¼Œä¹‹å‰ä»‹ç»CPUå’Œå†…å­˜æ˜¯æ€ä¹ˆé…åˆçš„ï¼Œé‚£é‡Œé¢çœ‹åˆ°æ˜¯cpuçš„å„ä¸ªå•å…ƒå’Œå†…å­˜çš„ä¸­ä»£ç æ®µã€æ•°æ®æ®µç›´æ¥å…³è”ï¼Œç°åœ¨è¿™ä¸ªå‡½æ•°æ ˆå’Œä»£ç æ®µã€æ•°æ®æ®µæ˜¯æœ‰å…³è”çš„ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386452,"discussion_content":"ä½ è¯´çš„æ˜¯ELFæ–‡ä»¶æ ¼å¼å§ï¼Œé‡Œé¢æœ‰ä»£ç æ®µï¼Œæ•°æ®æ®µï¼›é‚£ä¸ªæ˜¯è¦è¿›ç¨‹åŠ è½½è¿›å†…å­˜çš„æ•°æ®å†…å®¹ï¼›å‡½æ•°æ ˆæœ¬è´¨åªæ˜¯å­˜å‚¨å±€éƒ¨å˜é‡å’Œå‚æ•°ï¼Œè¿™äº›éƒ½æ˜¯è¿è¡Œæ—¶æŒ‡å®šçš„ï¼›å’ŒELFé‡Œé¢ä¿å­˜çš„ä»£ç ï¼Œå…¨å±€/é™æ€å˜é‡ä¸æ˜¯ä¸€å›äº‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627599757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253053,"user_name":"AlexS","can_delete":false,"product_type":"c1","uid":1472051,"ip_address":"","ucode":"3DA81A613CE645","user_header":"https://static001.geekbang.org/account/avatar/00/16/76/33/928ffd21.jpg","comment_is_top":false,"comment_ctime":1602580014,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602580014","product_id":100024701,"comment_content":"å†…å®¹è¶…æ£’der! è¿™ä¸ªå­¦è´¹äº¤å¾—å€¼ã€‚æœŸå¾…åé¢çš„å†…å®¹ã€‚","like_count":0},{"had_liked":false,"id":224744,"user_name":"Bryant.C","can_delete":false,"product_type":"c1","uid":1172363,"ip_address":"","ucode":"0DF832373CFA97","user_header":"https://static001.geekbang.org/account/avatar/00/11/e3/8b/27f875ba.jpg","comment_is_top":false,"comment_ctime":1591526519,"is_pvip":false,"replies":[{"id":"82998","content":"æ‹¼é”™äº†å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1591752529,"ip_address":"","comment_id":224744,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591526519","product_id":100024701,"comment_content":"è€å¸ˆï¼Œæœ€åæ€»ç»“æ—¶åˆ»é‚£å¼ å›¾å†…æ ¸æ ˆæ ˆåº•çš„æ–‡å­—æ˜¯å¦åº”è¯¥æ˜¯pt_regså‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497593,"discussion_content":"æ‹¼é”™äº†å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591752529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199163,"user_name":"honnkyou","can_delete":false,"product_type":"c1","uid":1026608,"ip_address":"","ucode":"FD5EC4120EE803","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/30/acc91f01.jpg","comment_is_top":false,"comment_ctime":1585480940,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585480940","product_id":100024701,"comment_content":"DEFINE_PER_CPU(struct task_struct *, current_task) = &amp;init_task;<br>è€å¸ˆè¿™ä¸ªè¯­å¥æ€ä¹ˆç†è§£ï¼Ÿ","like_count":0},{"had_liked":false,"id":193237,"user_name":"Geek_b8928e","can_delete":false,"product_type":"c1","uid":1926597,"ip_address":"","ucode":"96E4ABE3F2F145","user_header":"","comment_is_top":false,"comment_ctime":1584886620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584886620","product_id":100024701,"comment_content":"Per CPU å˜é‡æ˜¯å†…æ ¸ä¸­ä¸€ç§é‡è¦çš„åŒæ­¥æœºåˆ¶ã€‚é¡¾åæ€ä¹‰ï¼ŒPer CPU å˜é‡å°±æ˜¯ä¸ºæ¯ä¸ª CPU æ„é€ ä¸€ä¸ªå˜é‡çš„å‰¯æœ¬ï¼Œè¿™æ ·å¤šä¸ª CPU å„è‡ªæ“ä½œè‡ªå·±çš„å‰¯æœ¬ï¼Œäº’ä¸å¹²æ¶‰ã€‚","like_count":0},{"had_liked":false,"id":177949,"user_name":"èµ·è€Œè¡Œ","can_delete":false,"product_type":"c1","uid":1131399,"ip_address":"","ucode":"4F116B0B740776","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/87/7604d7a4.jpg","comment_is_top":false,"comment_ctime":1581558844,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1581558844","product_id":100024701,"comment_content":"day13è¿›ç¨‹åœ¨ç”¨æˆ·æ€ä¸å†…æ ¸æ€çš„è¿è¡Œçš„ç¡®æ˜¯éš¾ç‚¹ï¼Œper CPUçš„è®¾è®¡æ€æƒ³å¾ˆå¥‡å¦™ï¼Œèƒ½ä¿è¯å„ä¸ªCPUä¹‹é—´ä¸å†²çªã€‚<br>è¯¾ä¸‹è¿è¡Œç¨‹åºï¼Œçœ‹ä¸€ä¸‹æ±‡ç¼–è¯­è¨€ä¸‹æ ˆçš„è°ƒç”¨","like_count":0},{"had_liked":false,"id":175716,"user_name":"salmonl","can_delete":false,"product_type":"c1","uid":1010160,"ip_address":"","ucode":"0F85E5AD2C52B2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/69/f0/714c2f83.jpg","comment_is_top":false,"comment_ctime":1580805704,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580805704","product_id":100024701,"comment_content":"çœ‹å®Œäº†è¿›ç¨‹æ•°æ®ç»“æ„ï¼Œäº†è§£åˆ°äº†å¾ˆå¤šã€‚è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œç©ºé—´å¸ƒå±€åŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€BSSæ®µã€å †ã€æ ˆã€‚é‚£ä¹ˆè¿›ç¨‹çš„æ•°æ®å…·ä½“æ˜¯æ€ä¹ˆå­˜å‚¨çš„ï¼Œå…·ä½“å­˜å‚¨åœ¨è¿›ç¨‹è‡ªå·±è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­é‚£ä¸ªæ®µã€‚æœ›è€å¸ˆçœ‹åˆ°ï¼Œå¹¶è§£æƒ‘ã€‚å¤šè°¢ã€‚","like_count":0},{"had_liked":false,"id":174286,"user_name":"è¹¦å“’","can_delete":false,"product_type":"c1","uid":1458931,"ip_address":"","ucode":"56591A657DE7C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epcs6PibsP9vEXv4EibUw3bhQPUK04zRTOvfrvF08TwM67xPb1LBh2uRENHQwo2VqYfC5GhJmM7icxHA/132","comment_is_top":false,"comment_ctime":1580120344,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1580120344","product_id":100024701,"comment_content":"è¯·é—®è€å¸ˆï¼Œtask_structæ˜¯è¡¨ç¤ºå†…å­˜ä¸­è¿›ç¨‹çš„ç»“æ„ä½“ï¼Œæ˜¯ä¸æ˜¯è¿™æ ·å°†ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¸²èµ·æ¥çš„ï¼š<br>1.ç”¨æˆ·æ€æ‰ä¼šæœ‰task_struct<br>2.ç”¨æˆ·æ€å¯ä»¥é€šè¿‡task_structçš„stackæ‰¾åˆ°å†…æ ¸æ€çš„ç©ºé—´ï¼ˆæ¯”å¦‚å¯„å­˜å™¨pt_regsä»¥åŠå†…å­˜ä¸­çš„å†…æ ¸æ ˆï¼‰<br>3.å†…æ ¸æ€å¯ä»¥é€šè¿‡å†…æ ¸æ€ç©ºé—´ä¸­çš„thread_infoæ‰¾åˆ°å†…å­˜ä¸­è¿›ç¨‹çš„task_struct<br>4.åœ¨ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œä¼šå¡«å……ä¸Šé¢çš„ä¸­ä»‹æ•°æ®ï¼ˆstackå’Œthread_infoï¼‰<br><br>å¦‚æœç®€å•ç²—ç•¥çš„ç†è§£ï¼Œå°±æ˜¯ç”¨æˆ·æ€çš„å†…å­˜ä¸­åŒ…å«äº†å†…æ ¸æ€çš„åœ°å€ï¼ˆstackï¼‰ï¼Œå†…æ ¸æ€çš„å†…å­˜ç©ºé—´ä¸­ï¼ˆå¯„å­˜å™¨å’Œå†…å­˜ï¼‰åŒ…å«äº†ç”¨æˆ·æ€çš„åœ°å€ï¼ˆthread_infoï¼‰<br><br>ä¸Šé¢çš„ç†è§£æ­£ç¡®å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386608,"discussion_content":"task_structureæ˜¯å†…æ ¸æ€çš„ç»“æ„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627686095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155702,"user_name":"ç é—ªé—ª","can_delete":false,"product_type":"c1","uid":1300447,"ip_address":"","ucode":"45BE0D586A3839","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eov38ZkwCyNoBdr5drgX0cp2eOGCv7ibkhUIqCvcnFk8FyUIS6K4gHXIXh0fu7TB67jaictdDlic4OwQ/132","comment_is_top":false,"comment_ctime":1574738905,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574738905","product_id":100024701,"comment_content":"åˆ˜è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œä»€ä¹ˆæ—¶å€™ç”¨å†…æ ¸æ ˆæ‰¾task_struct?ä»€ä¹ˆæ—¶å€™åˆåè¿‡æ¥æ‰¾ï¼Ÿ","like_count":0},{"had_liked":false,"id":155301,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1574676267,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574676267","product_id":100024701,"comment_content":"æ‘˜æŠ„ï¼šå¦‚æœè¯´ task_struct çš„å…¶ä»–æˆå‘˜å˜é‡éƒ½æ˜¯å’Œè¿›ç¨‹ç®¡ç†æœ‰å…³çš„ï¼Œå†…æ ¸æ ˆæ˜¯å’Œè¿›ç¨‹è¿è¡Œæœ‰å…³ç³»çš„ã€‚","like_count":0},{"had_liked":false,"id":153084,"user_name":"Doubleuhy","can_delete":false,"product_type":"c1","uid":1259681,"ip_address":"","ucode":"33004DBF105277","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/66KHl74Hghp6pb2FLKoLbhmz2hnA9iasxxJl0uN88RBicI06y8Fkiatuu6YFEwFuR94ia02dmmDqYnnfugka32EyCQ/132","comment_is_top":false,"comment_ctime":1574155100,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574155100","product_id":100024701,"comment_content":"è€å¸ˆ 64ä½æ¶æ„å‡½æ•°è°ƒç”¨æ ˆ å›¾ä¸­æ˜¯ä¸æ˜¯æœ‰é”™é¸­   ç¬¬1-6ä¸ªå‚æ•°åº”è¯¥æ˜¯ç”±callerå­˜å…¥å¯„å­˜å™¨ä¸­ åœ¨calleeä¸­ä½¿ç”¨å‚æ•°æ˜¯é€šè¿‡movæŒ‡ä»¤æ¥ä½¿ç”¨ æ²¡æœ‰ç”¨åˆ°pushæŒ‡ä»¤ æ‰€ä»¥rspå¯„å­˜å™¨çš„å€¼åº”è¯¥å’Œrbpå€¼ä¸€æ ·æ‰å¯¹ åº”è¯¥æŒ‡å‘åŒä¸€ä¸ªåœ°å€","like_count":0},{"had_liked":false,"id":140824,"user_name":"å°æ©™å­","can_delete":false,"product_type":"c1","uid":1244724,"ip_address":"","ucode":"7E3DD87C3DE6F9","user_header":"https://static001.geekbang.org/account/avatar/00/12/fe/34/67c1ed1e.jpg","comment_is_top":false,"comment_ctime":1571053868,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571053868","product_id":100024701,"comment_content":"è€Œ thread_info çš„ä½ç½®å°±æ˜¯å†…æ ¸æ ˆçš„æœ€é«˜ä½ç½®ï¼Œå‡å»...<br><br>æå®¢æ—¶é—´ç‰ˆæƒæ‰€æœ‰: https:&#47;&#47;time.geekbang.org&#47;column&#47;article&#47;93014<br><br>è¿™å¥è¯æ€ä¹ˆç†è§£ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1313806,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/0e/1aaaf652.jpg","nickname":"åå¤§é‡‘åˆš","note":"","ucode":"23EE8DFE9C43D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216525,"discussion_content":"ä¸ªäººç†è§£ï¼Œé¦–å…ˆçœ‹æ‚¨é—®çš„è¿™å¥è¯ä¸Šé¢çš„ä»£ç ï¼Œcurrent_top_of_stack() åº”è¯¥æ˜¯æŒ‡å›¾ä¸­ï¼ˆæ–‡ä¸­çš„æ ˆå›¾ï¼‰æœ€é«˜ä½ç½®çš„åœ°å€ï¼Œç„¶åå‡å»æ•´ä¸ªæ ˆçš„å¤§å°THREAD_SIZE,å°±å¾—åˆ°å›¾æœ€ä¸‹é¢çš„åœ°å€ï¼Œæœ€ä¸‹é¢å¼€å¤´çš„å°±æ˜¯thread_infoï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯å®ƒçš„èµ·å§‹åœ°å€å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585460728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131496,"user_name":"ZYecho","can_delete":false,"product_type":"c1","uid":1356589,"ip_address":"","ucode":"9D156DD30C581E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLh73kPzAKhz7YxUribqF6QKFiahhVAbwpgVLSRicA68c6ZFA7vUBJY1ves3LVvibrypROyI7awv47eSA/132","comment_is_top":false,"comment_ctime":1567767995,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567767995","product_id":100024701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ–‡ä¸­è¯´æ¶‰åŠæƒé™çš„æ”¹å˜ï¼Œä¼šå‹æ ˆä¿å­˜ SSã€ESP å¯„å­˜å™¨ï¼Œæˆ‘æœ‰ä¸ªç–‘é—®æ˜¯è¿™ä¸ªåœ°æ–¹ä¸ºä»€ä¹ˆåªå•ç‹¬pushè¿™ä¸¤ä¸ªå¯„å­˜å™¨å‘¢ï¼Ÿ csã€ipä»¥åŠeflagså¯„å­˜å™¨å‘¢ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":113308,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1396862,"ip_address":"","ucode":"62890F03EC78AF","user_header":"https://static001.geekbang.org/account/avatar/00/15/50/7e/be0d09ea.jpg","comment_is_top":false,"comment_ctime":1562942486,"is_pvip":false,"replies":[{"id":"46675","content":"æœ¬æ¥å…¥æ ˆå°±æ˜¯ä¸€ä¸ªå‰¯æœ¬äº†ï¼Œä¸æ˜¯åŸæ¥çš„å˜é‡äº†","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1566379006,"ip_address":"","comment_id":113308,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1562942486","product_id":100024701,"comment_content":"è¢«è°ƒç”¨å‡½æ•°é€šè¿‡æ ˆæŒ‡é’ˆè·å–å…¥å‚å†…å®¹ï¼Œé‚£å‡½æ•°è°ƒç”¨çš„å‚æ•°å‰¯æœ¬æ€ä¹ˆç†è§£ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458161,"discussion_content":"æœ¬æ¥å…¥æ ˆå°±æ˜¯ä¸€ä¸ªå‰¯æœ¬äº†ï¼Œä¸æ˜¯åŸæ¥çš„å˜é‡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566379006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2401422,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","nickname":"geek","note":"","ucode":"FF0845140D72A9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363282,"discussion_content":"å‚æ•°å‰¯æœ¬æ˜¯æŒ‡ä¿®æ”¹æ–°çš„ä¸€ä»½å†…å­˜ä¸­çš„å€¼ï¼Œå’ŒåŸå˜é‡æ²¡æœ‰å…³ç³»ï¼Œå¦‚æœè¿˜æ˜¯é€šè¿‡åç§»è·å¾—æ“ä½œå¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆä¿®æ”¹çš„æœ‰å¯èƒ½æ˜¯åŸå˜é‡ï¼Œå’Œpass by valueçŸ›ç›¾ã€‚æˆ‘æ„Ÿè§‰è¿™å—æ˜¯ä¸ªé—®é¢˜ï¼Œå¾—å¯¹ç…§æ±‡ç¼–çœ‹çœ‹ã€‚pass by valueä¸pass by refrenceçš„åŒºåˆ«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617161592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111917,"user_name":"garlic","can_delete":false,"product_type":"c1","uid":1019579,"ip_address":"","ucode":"FEB147EDB5774E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/bb/c039dc11.jpg","comment_is_top":false,"comment_ctime":1562636915,"is_pvip":true,"discussion_count":1,"race_medal":1,"score":"1562636915","product_id":100024701,"comment_content":"X86_64 è°ƒç”¨å‡½æ•°æ—¶é¿å…è°ƒæ•´æ ˆæŒ‡é’ˆçš„ä½ç½®ï¼Œå­˜åœ¨ä¸€ä¸ª128byteçš„red zoneï¼Œ å¦å¤–åœ¨å®éªŒè¿‡ç¨‹ä¸­ ä¸å¦å¤–ä¸ä¸“æ é‡Œè®²åˆ°çš„ä¸å¤ªä¸€æ ·çš„çš„æ˜¯ï¼Œ ä¼ é€’å‚æ•°å¤§äº6ä¸ªçš„ï¼Œä¼šè¢«å•ç‹¬çš„æ”¾å…¥æ ˆé¡¶ï¼Œä¸è¿‡è¿™ä¸ªæ“ä½œæ˜¯è°ƒç”¨å‡½æ•°åšçš„ã€‚ç¯å¢ƒcentos7  gccï¼š gcc version 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC)ï¼Œ è¿™æ˜¯æˆ‘çš„è¯¾å ‚ä½œä¸šç¬”è®°","like_count":0,"discussions":[{"author":{"id":1019579,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/bb/c039dc11.jpg","nickname":"garlic","note":"","ucode":"FEB147EDB5774E","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1857,"discussion_content":"å½“ä¼ é€’å‚æ•°å¤§äº6ä¸ªçš„æ—¶å€™ï¼Œ å‰å…­ä¸ªå‚æ•°æ˜¯è¢«è°ƒç”¨å‡½æ•°é€šè¿‡å¯„å­˜å™¨ä¼ é€’æ”¾å…¥è‡ªå·±çš„æ ˆä¸­ï¼Œå¤§äº6ä¸ªçš„å‚æ•°ç”±è°ƒç”¨å‡½æ•°å‹æ ˆã€‚Â ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563002756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92934,"user_name":"å‘¨å¹³","can_delete":false,"product_type":"c1","uid":1047936,"ip_address":"","ucode":"CA1869B139A4F6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/80/52763d62.jpg","comment_is_top":false,"comment_ctime":1557365426,"is_pvip":false,"replies":[{"id":"49409","content":"èµï¼Œå†çœ‹ä¸€é","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1567656944,"ip_address":"","comment_id":92934,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557365426","product_id":100024701,"comment_content":"è™½ç„¶è¿˜æœ‰äº›è¿·ç³Šï¼Œä½†æ˜¯æ„Ÿè§‰è‡ªå·±çš„ç†è§£åœ¨åŠ æ·±äº†","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449429,"discussion_content":"èµï¼Œå†çœ‹ä¸€é","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567656944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91507,"user_name":"å·äº‘","can_delete":false,"product_type":"c1","uid":1265438,"ip_address":"","ucode":"3D56399A7C5BDF","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/1e/e2b7a9ba.jpg","comment_is_top":false,"comment_ctime":1557044939,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557044939","product_id":100024701,"comment_content":"è®²çš„çœŸå¥½ï¼ŒæŠŠä¹‹å‰ç”¨æˆ·æ€åˆ‡å†…æ ¸æ€ä¸æ˜ç™½çš„åœ°æ–¹éƒ½æ‹æ¸…äº†","like_count":0},{"had_liked":false,"id":90555,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1556554696,"is_pvip":false,"replies":[{"id":"32634","content":"ä¸ä¼šè®¿é—®ï¼Œä½†æ˜¯è®¿é—®åˆ°æ˜¯é”™çš„ï¼Œä¹Ÿæ¯”è¶Šç•Œå¥½ã€‚è¿™æ ·ç»Ÿä¸€å¤„ç†ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚å½“ç„¶ä¸€è·¯if elseä¹Ÿæ˜¯å¯ä»¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1556812111,"ip_address":"","comment_id":90555,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556554696","product_id":100024701,"comment_content":"å†…æ ¸æ ˆçš„æœ€é«˜åœ°å€çš„é‚£8ä¸ªå­—èŠ‚æ²¡çœ‹æ‡‚ï¼Œå¦‚æœæ²¡å‹å…¥ss,spï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦è®¿é—®å‘¢ï¼Ÿä»æºç æ³¨é‡Šçœ‹ï¼ŒåŠ äº†8ä¸ªå­—èŠ‚ä¿ç•™ï¼Œå¦‚æœæ²¡æœ‰å‹å…¥ss,sp,è¿™æ—¶å€™è®¿é—®ä¹Ÿæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ—¢ç„¶æ²¡æœ‰æ„ä¹‰ï¼Œç¨‹åºä¸ºä»€ä¹ˆè¿˜è¦è®¿é—®ä»–å•Šï¼Ÿä¸€ä¸ªåœ¨ç¨‹åºä¸­ä¸èƒ½æ§åˆ¶å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448565,"discussion_content":"ä¸ä¼šè®¿é—®ï¼Œä½†æ˜¯è®¿é—®åˆ°æ˜¯é”™çš„ï¼Œä¹Ÿæ¯”è¶Šç•Œå¥½ã€‚è¿™æ ·ç»Ÿä¸€å¤„ç†ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚å½“ç„¶ä¸€è·¯if elseä¹Ÿæ˜¯å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556812111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}