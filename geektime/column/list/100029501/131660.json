{"id":131660,"title":"40ä¸¨SQLiteï¼šä¸ºä»€ä¹ˆå¾®ä¿¡ç”¨SQLiteå­˜å‚¨èŠå¤©è®°å½•ï¼Ÿ","content":"<p>æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­è®²äº†WebSQLï¼Œå½“æˆ‘ä»¬åœ¨Chromeã€Safariå’ŒFirefoxç­‰æµè§ˆå™¨å®¢æˆ·ç«¯ä¸­ä½¿ç”¨WebSQLæ—¶ï¼Œä¼šç›´æ¥æ“ä½œSQLiteã€‚å®é™…ä¸ŠSQLiteæœ¬èº«æ˜¯ä¸€ä¸ªåµŒå…¥å¼çš„å¼€æºæ•°æ®åº“å¼•æ“ï¼Œå¤§å°åªæœ‰3Må·¦å³ï¼Œå¯ä»¥å°†æ•´ä¸ªSQLiteåµŒå…¥åˆ°åº”ç”¨ä¸­ï¼Œè€Œä¸ç”¨é‡‡ç”¨ä¼ ç»Ÿçš„å®¢æˆ·ç«¯ï¼æœåŠ¡å™¨ï¼ˆClient/Serverï¼‰çš„æ¶æ„ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯éå¸¸è½»ä¾¿ï¼Œåœ¨è®¸å¤šæ™ºèƒ½è®¾å¤‡å’Œåº”ç”¨ä¸­éƒ½å¯ä»¥ä½¿ç”¨SQLiteï¼Œæ¯”å¦‚å¾®ä¿¡å°±é‡‡ç”¨äº†SQLiteä½œä¸ºæœ¬åœ°èŠå¤©è®°å½•çš„å­˜å‚¨ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±å…¥äº†è§£ä¸€ä¸‹SQLiteï¼Œä»Šå¤©çš„å†…å®¹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ æ–¹é¢ï¼š</p><ol>\n<li>SQLiteæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›ä¼˜ç‚¹å’Œä¸è¶³ï¼Ÿ</li>\n<li>å¦‚ä½•åœ¨Pythonä¸­ä½¿ç”¨SQLiteï¼Ÿ</li>\n<li>å¦‚ä½•ç¼–å†™SQLï¼Œé€šè¿‡SQLiteæŸ¥æ‰¾å¾®ä¿¡çš„èŠå¤©è®°å½•ï¼Ÿ</li>\n</ol><h2>SQLiteæ˜¯ä»€ä¹ˆ</h2><p>SQLiteæ˜¯åœ¨2000å¹´å‘å¸ƒçš„ï¼Œåˆ°ç›®å‰ä¸ºæ­¢å·²ç»æœ‰19å¹´äº†ã€‚ä¸€ç›´é‡‡ç”¨Cè¯­è¨€ç¼–å†™ï¼Œé‡‡ç”¨Cè¯­è¨€è€ŒéC++é¢å‘å¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥æå‡ä»£ç åº•å±‚çš„æ‰§è¡Œæ•ˆç‡ã€‚ä½†SQLiteä¹Ÿæœ‰ä¸€äº›ä¼˜åŠ¿ä¸ä¸è¶³ã€‚</p><p>å®ƒçš„ä¼˜åŠ¿åœ¨äºéå¸¸è½»é‡çº§ï¼Œå­˜å‚¨æ•°æ®éå¸¸é«˜æ•ˆï¼ŒæŸ¥è¯¢å’Œæ“ä½œæ•°æ®ç®€å•æ–¹ä¾¿ã€‚æ­¤å¤–SQLiteä¸éœ€è¦å®‰è£…å’Œé…ç½®ï¼Œæœ‰å¾ˆå¥½çš„è¿ç§»æ€§ï¼Œèƒ½å¤ŸåµŒå…¥åˆ°å¾ˆå¤šåº”ç”¨ç¨‹åºä¸­ï¼Œä¸æ‰˜ç®¡åœ¨æœåŠ¡å™¨ä¸Šçš„RDBMSç›¸æ¯”ï¼Œçº¦æŸå°‘æ˜“æ“ä½œï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘æœåŠ¡å™¨çš„å‹åŠ›ã€‚</p><!-- [[[read_end]]] --><p>ä¸è¶³åœ¨äºSQLiteå¸¸ç”¨äºå°åˆ°ä¸­å‹çš„æ•°æ®å­˜å‚¨ï¼Œä¸é€‚ç”¨é«˜å¹¶å‘çš„æƒ…å†µã€‚æ¯”å¦‚åœ¨å¾®ä¿¡æœ¬åœ°å¯ä»¥ä½¿ç”¨SQLiteï¼Œå³ä½¿æ˜¯å‡ ç™¾Mçš„æ•°æ®æ–‡ä»¶ï¼Œä½¿ç”¨SQLiteä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŸ¥æ‰¾æ•°æ®å’Œç®¡ç†ï¼Œä½†æ˜¯å¾®ä¿¡æœ¬èº«çš„æœåŠ¡å™¨å°±ä¸èƒ½ä½¿ç”¨SQLiteäº†ï¼Œå› ä¸ºSQLiteåŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªå†™æ“ä½œï¼Œååé‡éå¸¸æœ‰é™ã€‚</p><p>ä½œä¸ºç®€åŒ–ç‰ˆçš„æ•°æ®åº“ï¼ŒSQLiteæ²¡æœ‰ç”¨æˆ·ç®¡ç†åŠŸèƒ½ï¼Œåœ¨è¯­æ³•ä¸Šä¹Ÿæœ‰ä¸€äº›è‡ªå·±çš„â€œæ–¹è¨€â€ã€‚æ¯”å¦‚åœ¨SQLä¸­çš„SELECTè¯­å¥ï¼ŒSQLiteå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„æ“ä½œç¬¦æ¥æ‹¼æ¥ä¸¤ä¸ªåˆ—ã€‚åœ¨MySQLä¸­ä¼šä½¿ç”¨å‡½æ•°concatï¼Œè€Œåœ¨SQLiteã€PostgreSQLã€Oracleå’ŒDb2ä¸­ä½¿ç”¨||å·ï¼Œæ¯”å¦‚ï¼šSELECT <code>MesLocalID || Message FROM \"Chat_1234\"</code>ã€‚</p><p>è¿™ä¸ªè¯­å¥ä»£è¡¨çš„æ˜¯ä»Chat_1234æ•°æ®è¡¨ä¸­æŸ¥è¯¢MesLocalIDå’ŒMessageå­—æ®µå¹¶ä¸”å°†ä»–ä»¬æ‹¼æ¥èµ·æ¥ã€‚</p><p>ä½†æ˜¯åœ¨SQLiteä¸­ä¸æ”¯æŒRIGHT JOINï¼Œå› æ­¤ä½ éœ€è¦å°†å³å¤–è¿æ¥è½¬æ¢ä¸ºå·¦å¤–è¿æ¥ï¼Œä¹Ÿå°±æ˜¯LEFT JOINï¼Œå†™æˆä¸‹é¢è¿™æ ·ï¼š</p><pre><code>SELECT * FROM team LEFT JOIN player ON player.team_id = team.team_id\n</code></pre><p>é™¤æ­¤ä»¥å¤–SQLiteä»…æ”¯æŒåªè¯»è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªèƒ½åˆ›å»ºå’Œè¯»å–è§†å›¾ï¼Œä¸èƒ½å¯¹å®ƒä»¬çš„å†…å®¹è¿›è¡Œä¿®æ”¹ã€‚</p><p>æ€»çš„æ¥è¯´æ”¯æŒSQLæ ‡å‡†çš„RDBMSè¯­æ³•éƒ½ç›¸ä¼¼ï¼Œåªæ˜¯ä¸åŒçš„DBMSä¼šæœ‰ä¸€äº›å±äºè‡ªå·±çš„â€œæ–¹è¨€â€ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„DBMSçš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ã€‚</p><h2>åœ¨Pythonä¸­ä½¿ç”¨SQLite</h2><p>æˆ‘ä¹‹å‰ä»‹ç»è¿‡å¦‚ä½•åœ¨Pythonä¸­ä½¿ç”¨MySQLï¼Œå…¶ä¸­ä¼šä½¿ç”¨åˆ°DB APIè§„èŒƒï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚åŸºäºDB APIè§„èŒƒï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œè¿æ¥ã€äº¤äº’ä»¥åŠå¼‚å¸¸çš„å¤„ç†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ef/a4/efd39186177ed0537e6e75dccaf3cba4.png?wh=1730*791\" alt=\"\"><br>\nåœ¨Pythonä¸­ä½¿ç”¨SQLiteä¹Ÿä¼šä½¿ç”¨åˆ°DB APIè§„èŒƒï¼Œä¸ä½¿ç”¨MySQLçš„äº¤äº’æ–¹å¼ä¸€æ ·ï¼Œä¹Ÿä¼šç”¨åˆ°connectionã€cursorå’Œexceptionsã€‚åœ¨Pythonä¸­é›†æˆäº†SQLite3ï¼Œç›´æ¥åŠ è½½ç›¸åº”çš„å·¥å…·åŒ…å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸‹å¦‚ä½•åœ¨Pythonä¸­ä½¿ç”¨SQLiteã€‚</p><p>åœ¨ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬éœ€è¦è¿›è¡Œå¼•ç”¨SQLiteï¼Œä½¿ç”¨ï¼š</p><pre><code>import sqlite3\n</code></pre><p>ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨SQLite3åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼š</p><pre><code>conn = sqlite3.connect(&quot;wucai.db&quot;)\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬è¿æ¥çš„æ˜¯wucai.dbè¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å­˜å‚¨ï¼Œä¸Šé¢çš„è°ƒç”¨ä¼šè‡ªåŠ¨åœ¨ç›¸åº”çš„å·¥ç¨‹è·¯å¾„é‡Œè¿›è¡Œåˆ›å»ºï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨connæ“ä½œè¿æ¥ï¼Œé€šè¿‡ä¼šè¯è¿æ¥connæ¥åˆ›å»ºæ¸¸æ ‡ï¼š</p><pre><code>cur = conn.cursor()\n</code></pre><p>é€šè¿‡è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ¸¸æ ‡curï¼Œç„¶åå¯ä»¥ä½¿ç”¨execute()æ–¹æ³•æ¥æ‰§è¡Œå„ç§DMLï¼Œæ¯”å¦‚æ’å…¥ï¼Œåˆ é™¤ï¼Œæ›´æ–°ç­‰ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡ŒSQLæŸ¥è¯¢ï¼Œç”¨çš„åŒæ ·æ˜¯execute()æ–¹æ³•ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æƒ³è¦åˆ›å»ºherosæ•°æ®è¡¨ï¼Œä»¥åŠç›¸åº”çš„å­—æ®µidã€nameã€hp_maxã€mp_maxã€role_mainï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ï¼š</p><pre><code>cur.execute(&quot;CREATE TABLE IF NOT EXISTS heros (id int primary key, name text, hp_max real, mp_max real, role_main text)&quot;)\n</code></pre><p>åœ¨åˆ›å»ºä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨execute()æ–¹æ³•æ¥æ·»åŠ ä¸€æ¡æ•°æ®ï¼š</p><pre><code>cur.execute('insert into heros values(?, ?, ?, ?, ?)', (10000, 'å¤ä¾¯æƒ‡', 7350, 1746, 'å¦å…‹'))\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ¡ä¸€æ¡æ’å…¥æ•°æ®å¤ªéº»çƒ¦ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰¹é‡æ’å…¥ï¼Œè¿™é‡Œä¼šä½¿ç”¨åˆ°executemanyæ–¹æ³•ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°å°±æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œæ¯”å¦‚ï¼š</p><pre><code>cur.executemany('insert into heros values(?, ?, ?, ?, ?)', \n           ((10000, 'å¤ä¾¯æƒ‡', 7350, 1746, 'å¦å…‹'),\n            (10001, 'é’Ÿæ— è‰³', 7000, 1760, 'æˆ˜å£«'),\n          (10002, 'å¼ é£', 8341, 100, 'å¦å…‹'),\n          (10003, 'ç‰›é­”', 8476, 1926, 'å¦å…‹'),\n          (10004, 'å•å¸ƒ', 7344, 0, 'æˆ˜å£«')))\n</code></pre><p>å¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹herosæ•°æ®è¡¨è¿›è¡ŒæŸ¥è¯¢ï¼ŒåŒæ ·ä½¿ç”¨executeæ‰§è¡ŒSQLè¯­å¥ï¼š</p><pre><code>cur.execute(&quot;SELECT id, name, hp_max, mp_max, role_main FROM heros&quot;)\n</code></pre><p>è¿™æ—¶curä¼šæŒ‡å‘æŸ¥è¯¢ç»“æœé›†çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è·å–æ•°æ®æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p><ol>\n<li>cur.fetchone()æ–¹æ³•ï¼Œè·å–ä¸€æ¡è®°å½•ï¼›</li>\n<li>cur.fetchmany(n) æ–¹æ³•ï¼Œè·å–næ¡è®°å½•ï¼›</li>\n<li>cur.fetchall()æ–¹æ³•ï¼Œè·å–å…¨éƒ¨æ•°æ®è¡Œã€‚</li>\n</ol><p>æ¯”å¦‚æˆ‘æƒ³è·å–å…¨éƒ¨çš„ç»“æœé›†ï¼Œå¯ä»¥å†™æˆè¿™æ ·ï¼š</p><pre><code>result = cur.fetchall()\n</code></pre><p>å¦‚æœæˆ‘ä»¬å¯¹äº‹åŠ¡æ“ä½œå®Œäº†ï¼Œå¯ä»¥æäº¤äº‹åŠ¡ï¼Œä½¿ç”¨<code>conn.commit()</code>å³å¯ã€‚</p><p>åŒæ ·ï¼Œå¦‚æœæ¸¸æ ‡å’Œæ•°æ®åº“çš„è¿æ¥éƒ½æ“ä½œå®Œäº†ï¼Œå¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œå…³é—­ï¼š</p><pre><code>cur.close()\nconn.close()\n</code></pre><p>ä¸Šé¢è¿™ä¸ªè¿‡ç¨‹çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import sqlite3\n# åˆ›å»ºæ•°æ®åº“è¿æ¥\nconn = sqlite3.connect(&quot;wucai.db&quot;)\n# è·å–æ¸¸æ ‡\ncur = conn.cursor()\n# åˆ›å»ºæ•°æ®è¡¨\ncur.execute(&quot;CREATE TABLE IF NOT EXISTS heros (id int primary key, name text, hp_max real, mp_max real, role_main text)&quot;)\n# æ’å…¥è‹±é›„æ•°æ®\ncur.executemany('insert into heros values(?, ?, ?, ?, ?)', \n           ((10000, 'å¤ä¾¯æƒ‡', 7350, 1746, 'å¦å…‹'),\n            (10001, 'é’Ÿæ— è‰³', 7000, 1760, 'æˆ˜å£«'),\n          (10002, 'å¼ é£', 8341, 100, 'å¦å…‹'),\n          (10003, 'ç‰›é­”', 8476, 1926, 'å¦å…‹'),\n          (10004, 'å•å¸ƒ', 7344, 0, 'æˆ˜å£«')))\ncur.execute(&quot;SELECT id, name, hp_max, mp_max, role_main FROM heros&quot;)\nresult = cur.fetchall()\nprint(result)\n# æäº¤äº‹åŠ¡ \nconn.commit()\n# å…³é—­æ¸¸æ ‡\ncur.close()\n# å…³é—­æ•°æ®åº“è¿æ¥\nconn.close()\n</code></pre><p>é™¤äº†ä½¿ç”¨Pythonæ“ä½œSQLiteä¹‹å¤–ï¼Œåœ¨æ•´ä¸ªæ“ä½œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨navicatæ•°æ®åº“å¯è§†åŒ–å·¥å…·æ¥æŸ¥çœ‹å’Œç®¡ç†SQLiteã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/fe/f2cb51591733d386239f843bd83c8afe.png?wh=1729*454\" alt=\"\"></p><h2>é€šè¿‡SQLiteæŸ¥è¯¢å¾®ä¿¡çš„èŠå¤©è®°å½•</h2><p>åˆšæ‰æˆ‘ä»¬æåˆ°å¾ˆå¤šåº”ç”¨éƒ½ä¼šé›†æˆSQLiteä½œä¸ºå®¢æˆ·ç«¯æœ¬åœ°çš„æ•°æ®åº“ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…é€šè¿‡æ•°æ®åº“æœåŠ¡å™¨è¿›è¡Œäº¤äº’ï¼Œå‡å°‘æœåŠ¡å™¨çš„å‹åŠ›ã€‚</p><p>å¦‚æœä½ æ˜¯iPhoneæ‰‹æœºï¼Œä¸å¦¨è·Ÿç€æˆ‘æ‰§è¡Œä»¥ä¸‹çš„æ­¥éª¤ï¼Œæ¥æŸ¥æ‰¾ä¸‹å¾®ä¿¡ä¸­çš„SQLiteæ–‡ä»¶çš„ä½ç½®å§ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œä½¿ç”¨iTuneså¤‡ä»½iPhoneï¼›ç¬¬äºŒæ­¥ï¼Œåœ¨ç”µè„‘ä¸­æŸ¥æ‰¾å¤‡ä»½æ–‡ä»¶ã€‚</p><p>å½“æˆ‘ä»¬å¤‡ä»½å¥½æ•°æ®ä¹‹åï¼Œéœ€è¦åœ¨æœ¬åœ°æ‰¾åˆ°å¤‡ä»½çš„æ–‡ä»¶ï¼Œå¦‚æœæ˜¯windowså¯ä»¥åœ¨C:\\Users\\XXXX\\AppData\\Roaming\\Apple Computer\\MobileSync\\Backup è¿™ä¸ªè·¯å¾„ä¸­æ‰¾åˆ°å¤‡ä»½æ–‡ä»¶å¤¹ã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼ŒæŸ¥æ‰¾Manifest.dbã€‚</p><p>åœ¨å¤‡ä»½æ–‡ä»¶å¤¹ä¸­ä¼šå­˜åœ¨Manifest.dbæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†è‹¹æœç³»ç»Ÿä¸­å„ç§å¤‡ä»½æ‰€åœ¨çš„æ–‡ä»¶ä½ç½®ã€‚</p><p>ç¬¬å››æ­¥ï¼ŒæŸ¥æ‰¾MM.sqliteã€‚</p><p>Manifest.dbæœ¬èº«æ˜¯SQLiteæ•°æ®æ–‡ä»¶ï¼Œé€šè¿‡SQLiteæˆ‘ä»¬èƒ½çœ‹åˆ°æ–‡ä»¶ä¸­åŒ…å«äº†Filesæ•°æ®è¡¨ï¼Œè¿™å¼ è¡¨ä¸­æœ‰fileIDã€domainå’ŒrelativePathç­‰å­—æ®µã€‚</p><p>å¾®ä¿¡çš„èŠå¤©è®°å½•æ–‡ä»¶ä¸ºMM.sqliteï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡SQLè¯­å¥æ¥æŸ¥è¯¢ä¸‹å®ƒçš„ä½ç½®ï¼ˆä¹Ÿå°±æ˜¯fileIDï¼‰ã€‚</p><pre><code>SELECT * FROM Files WHERE relativePath LIKE '%MM.sqlite'\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/d1/52/d11e7857bbf1da3a6b4db9c34d561e52.png?wh=1728*113\" alt=\"\"></p><p>ä½ èƒ½çœ‹åˆ°åœ¨æˆ‘çš„å¾®ä¿¡å¤‡ä»½ä¸­æœ‰2ä¸ªMM.sqliteæ–‡ä»¶ï¼Œè¿™äº›éƒ½æ˜¯å¾®ä¿¡çš„èŠå¤©è®°å½•ã€‚</p><p>ç¬¬äº”æ­¥ï¼Œåˆ†ææ‰¾åˆ°çš„MM.sqliteã€‚</p><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨å¤‡ä»½æ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾ç›¸å…³çš„fileIDï¼Œæ¯”å¦‚f71743874d7b858a01e3ddb933ce13a9a01f79aaã€‚</p><p>æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥å¤åˆ¶ä¸€ä»½ï¼Œå–åä¸ºweixin.dbï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨navicatå¯¹è¿™ä¸ªæ•°æ®åº“è¿›è¡Œå¯è§†åŒ–ç®¡ç†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/64/27/6401a3e7bbcf7757b27233b777934327.png?wh=1730*539\" alt=\"\"><br>\nå¾®ä¿¡ä¼šæŠŠä½ ä¸æ¯ä¸€ä¸ªäººçš„èŠå¤©è®°å½•éƒ½ä¿å­˜æˆä¸€å¼ æ•°æ®è¡¨ï¼Œåœ¨æ•°æ®è¡¨ä¸­ä¼šæœ‰MesLocalIDã€Messageã€Statusç­‰ç›¸åº”çš„å­—æ®µï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨åœ¨å½“å‰å¯¹è¯ä¸­çš„IDã€èŠå¤©å†…å®¹å’ŒèŠå¤©å†…å®¹çš„çŠ¶æ€ï¼‰ã€‚</p><p>å¦‚æœèŠå¤©å¯¹è±¡å¾ˆå¤šçš„è¯ï¼Œæ•°æ®è¡¨ä¹Ÿä¼šæœ‰å¾ˆå¤šï¼Œå¦‚æœæƒ³çŸ¥é“éƒ½æœ‰å“ªäº›èŠå¤©å¯¹è±¡çš„æ•°æ®è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><pre><code>SELECT name FROM sqlite_master WHERE type = 'table' AND name LIKE 'Chat\\_%' escape '\\'\n</code></pre><p>è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯sqlite_masteræ˜¯SQLiteçš„ç³»ç»Ÿè¡¨ï¼Œæ•°æ®è¡¨æ˜¯åªè¯»çš„ï¼Œé‡Œé¢ä¿å­˜äº†æ•°æ®åº“ä¸­çš„æ•°æ®è¡¨çš„åç§°ã€‚èŠå¤©è®°å½•çš„æ•°æ®è¡¨éƒ½æ˜¯ä»¥Chat_å¼€å¤´çš„ï¼Œå› ä¸º<code>ï¼ˆ_ï¼‰</code>å±äºç‰¹æ®Šå­—ç¬¦ï¼Œåœ¨LIKEè¯­å¥ä¸­ä¼šå°†<code>ï¼ˆ_ï¼‰</code>ä½œä¸ºé€šé…ç¬¦ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹å¼€å¤´ä¸ºChat_çš„æ–‡ä»¶åè¿›è¡ŒåŒ¹é…ï¼Œå°±éœ€è¦ç”¨escapeå¯¹è¿™ä¸ªç‰¹æ®Šå­—ç¬¦åšè½¬ä¹‰ã€‚</p><h2>æ€»ç»“</h2><p>æˆ‘ä»Šå¤©è®²äº†æœ‰å…³SQLiteçš„å†…å®¹ã€‚åœ¨ä½¿ç”¨SQLiteçš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„SQLiteæœ‰è‡ªå·±çš„æ–¹è¨€ï¼Œæ¯”å¦‚åœ¨è¿›è¡Œè¡¨è¿æ¥æŸ¥è¯¢çš„æ—¶å€™ä¸æ”¯æŒRIGHT JOINï¼Œéœ€è¦å°†å…¶è½¬æ¢æˆLEFT JOINç­‰ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨execute()æ–¹æ³•çš„æ—¶å€™ï¼Œå°½é‡é‡‡ç”¨å¸¦æœ‰å‚æ•°çš„SQLè¯­å¥ï¼Œä»¥å…è¢«SQLæ³¨å…¥æ”»å‡»ã€‚</p><p>å­¦ä¹ å®Œä»Šå¤©çš„å†…å®¹åï¼Œä¸å¦‚è¯•è¯•ç”¨SQLæŸ¥è¯¢æ¥æŸ¥æ‰¾æœ¬åœ°çš„èŠå¤©è®°å½•å§ã€‚</p><p><img src=\"\" alt=\"\"></p><p>æœ€åç•™ä¸€é“æ€è€ƒé¢˜å§ã€‚è¯·ä½ ä½¿ç”¨SQLæŸ¥è¯¢å¯¹å¾®ä¿¡èŠå¤©è®°å½•ä¸­å’Œâ€œä½œä¸šâ€ç›¸å…³çš„è®°å½•è¿›è¡ŒæŸ¥æ‰¾ã€‚ä¸è®ºæ˜¯iPhoneï¼Œè¿˜æ˜¯Androidæ‰‹æœºéƒ½å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„SQLiteæ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨Pythonå¯¹SQLiteè¿›è¡Œæ“ä½œï¼Œå¹¶è¾“å‡ºç»“æœã€‚</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„ç­”æ¡ˆï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p>","comments":[{"had_liked":false,"id":130854,"user_name":"æˆ‘","can_delete":false,"product_type":"c1","uid":1088100,"ip_address":"","ucode":"B73BF6017130DD","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/64/94737463.jpg","comment_is_top":false,"comment_ctime":1567560209,"is_pvip":false,"replies":[{"id":"50438","content":"Good Idea","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1568005845,"ip_address":"","comment_id":130854,"utype":1}],"discussion_count":1,"race_medal":0,"score":"91761873425","product_id":100029501,"comment_content":"å¹´åº•å¯ä»¥å¯¼å‡ºèŠå¤©è®°å½•åšä¸ªè¯äº‘","like_count":22,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466155,"discussion_content":"Good Idea","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568005845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130844,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1567559154,"is_pvip":false,"replies":[{"id":"50440","content":"ğŸ˜„ æ‰‹æœºQQçš„æœ¬åœ°èŠå¤©è®°å½•ä¹Ÿç”¨çš„SQLite","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1568006082,"ip_address":"","comment_id":130844,"utype":1}],"discussion_count":1,"race_medal":1,"score":"48812199410","product_id":100029501,"comment_content":"ğŸ˜„ï¼Œå¾®ä¿¡èŠå¤©è®°å½•ï¼Œæ¶¨å§¿åŠ¿äº†","like_count":12,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466151,"discussion_content":"ğŸ˜„ æ‰‹æœºQQçš„æœ¬åœ°èŠå¤©è®°å½•ä¹Ÿç”¨çš„SQLite","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568006082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259973,"user_name":"å°è™¾ç±³","can_delete":false,"product_type":"c1","uid":1619943,"ip_address":"","ucode":"7F0AAF55F602DC","user_header":"","comment_is_top":false,"comment_ctime":1604901549,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35964639917","product_id":100029501,"comment_content":"ç°åœ¨å·²ç»ä¸è¡Œäº†å§ï¼Ÿ<br><br>åœ¨Wechatæ–‡ä»¶ä¸‹çš„MicroMsg.db å·²ç»ä¸èƒ½ç”¨navicatæˆ–è€…sqliteå¯¼å…¥äº†ï¼Œéœ€è¦å¯†ç äº†ï¼Œè€Œä¸”ä¸æ˜¯å¾®ä¿¡å¯†ç ã€‚ã€‚","like_count":9,"discussions":[{"author":{"id":1234879,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d7/bf/9d8984b7.jpg","nickname":"ç ç‹","note":"","ucode":"A4666D3AF30D6E","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336570,"discussion_content":"èŠå¤©è®°å½•ä¸åœ¨ MM.sqlite è€Œåœ¨ message_1.sqlite æ–‡ä»¶é‡Œå¯ä»¥å°è¯•ä¸‹","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1608627103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183860,"user_name":"å››å–œ","can_delete":false,"product_type":"c1","uid":1071389,"ip_address":"","ucode":"C5EBED19C0F332","user_header":"https://static001.geekbang.org/account/avatar/00/10/59/1d/c89abcd8.jpg","comment_is_top":false,"comment_ctime":1583148312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18763017496","product_id":100029501,"comment_content":"å¾®ä¿¡å±…ç„¶æ²¡æœ‰å¯¹æ•°æ®åº“è¿›è¡ŒåŠ å¯†å—ï¼Ÿä¸ºä»€ä¹ˆå‘¢","like_count":5},{"had_liked":false,"id":130914,"user_name":"å­¦ä¹ ","can_delete":false,"product_type":"c1","uid":1437425,"ip_address":"","ucode":"CDFB71E0D1508B","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/f1/16545faf.jpg","comment_is_top":false,"comment_ctime":1567572652,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18747441836","product_id":100029501,"comment_content":"Navicatå¦‚ä½•å¯¼å…¥é‚£ä¸ªwenxin.dbå‘¢ï¼Œæœ‰ç‚¹ä¸å¤ªæ˜ç™½ï¼Œå¯ä»¥è¯´ä¸ªæ­¥éª¤å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1327313,"avatar":"https://static001.geekbang.org/account/avatar/00/14/40/d1/fb6f402a.jpg","nickname":"melon","note":"","ucode":"AFBE9426C10AFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7658,"discussion_content":"é€‰è¿æ¥çš„æ—¶å€™æœ‰ä¸ªsqlite ç„¶åå¯¼å…¥ä½ çš„db æ–‡ä»¶ å°±è¡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567602326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1619943,"avatar":"","nickname":"å°è™¾ç±³","note":"","ucode":"7F0AAF55F602DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1327313,"avatar":"https://static001.geekbang.org/account/avatar/00/14/40/d1/fb6f402a.jpg","nickname":"melon","note":"","ucode":"AFBE9426C10AFA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323223,"discussion_content":"å·²ç»è¢«åŠ é”äº†ï¼Œä¸èƒ½å¯¼å…¥Läº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604901590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7658,"ip_address":""},"score":323223,"extra":""}]}]},{"had_liked":false,"id":269375,"user_name":"ç ç‹","can_delete":false,"product_type":"c1","uid":1234879,"ip_address":"","ucode":"A4666D3AF30D6E","user_header":"https://static001.geekbang.org/account/avatar/00/12/d7/bf/9d8984b7.jpg","comment_is_top":false,"comment_ctime":1608628019,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"10198562611","product_id":100029501,"comment_content":"æˆ‘æµ‹è¯•çš„ç»“æœæ˜¯ï¼Œå¤‡ä»½æ–‡ä»¶åœ¨ messsage_1.sqlite æ–‡ä»¶ä¸­ï¼Œå¯ä»¥å°† åŸå…ˆçš„æŸ¥è¯¢SQL æ›¿æ¢æˆ SELECT * FROM Files WHERE relativePath LIKE &#39;%message\\__.sqlite&#39; ESCAPE &#39;\\&#39;;  <br>","like_count":2},{"had_liked":false,"id":192784,"user_name":"victor666","can_delete":false,"product_type":"c1","uid":1073136,"ip_address":"","ucode":"20C9BE10E07D55","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/f0/a73607b3.jpg","comment_is_top":false,"comment_ctime":1584872793,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10174807385","product_id":100029501,"comment_content":"å®‰å“å¼€å‘é»˜è®¤çš„å­˜å‚¨å°±æ˜¯sqlite","like_count":2},{"had_liked":false,"id":166892,"user_name":"ballgod","can_delete":false,"product_type":"c1","uid":1584098,"ip_address":"","ucode":"C20E95E98EAC43","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIR9QrAn9TZOrJMSYMyN96PAuAjETVrN5SPp3hMbfUAGIWtHceWPEoQtPdXeuBn7VB7dagtxynAIA/132","comment_is_top":false,"comment_ctime":1577626841,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10167561433","product_id":100029501,"comment_content":"ç”µè„‘ç«¯åªæ‰¾åˆ°äº†Msg.dbçš„æ–‡ä»¶ï¼Œæ— æ³•å¯¼å…¥åˆ°navicatä¸­ï¼Œå¹¶ä¸”ä½¿ç”¨notepadæ‰“å¼€æ˜¯ä¹±ç ï¼Œè¯·æ•™è€å¸ˆå¦‚ä½•è§£å†³ï¼Œè°¢è°¢","like_count":2,"discussions":[{"author":{"id":2725137,"avatar":"https://static001.geekbang.org/account/avatar/00/29/95/11/e7ada34e.jpg","nickname":"å¬æ™¨","note":"","ucode":"E6332436389C6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390487,"discussion_content":"åŠ å¯†äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629860332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131142,"user_name":"Hanqiu_Tan","can_delete":false,"product_type":"c1","uid":1524000,"ip_address":"","ucode":"2F5BEF36FBC797","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1r98FrLibt2JkibgLGPuLxxyn2etGbDeo7pEByourpvvZL580RFmA4S1bwPgGOkIqtsmFfFCktgLEzC2UnH9DqMQ/132","comment_is_top":false,"comment_ctime":1567650347,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10157584939","product_id":100029501,"comment_content":"Use &quot;.open FILENAME&quot; to reopen on a persistent database.<br>sqlite&gt; .open Manifest.db<br>sqlite&gt; .tables<br>Error: file is not a database<br>sqlite&gt;<br>è¿™è¾¹è¯•äº†æ‰“ä¸å¼€æ–‡ä»¶æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ","like_count":2},{"had_liked":false,"id":226936,"user_name":"RRR","can_delete":false,"product_type":"c1","uid":1014991,"ip_address":"","ucode":"F32A579D201EC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/cf/d5382404.jpg","comment_is_top":false,"comment_ctime":1592231296,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5887198592","product_id":100029501,"comment_content":"Chrome çš„å¯†ç ç®¡ç†ä¹Ÿæ˜¯ä½¿ç”¨çš„ SQLite","like_count":1},{"had_liked":false,"id":195334,"user_name":"åšå¼ˆ","can_delete":false,"product_type":"c1","uid":1433344,"ip_address":"","ucode":"B1A69837E41972","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/EcYNib1bnDf5dz6JcrE8AoyZYMdqic2VNmbBtCcVZTO9EoDZZxqlQDEqQKo6klCCmklOtN9m0dTd2AOXqSneJYLw/132","comment_is_top":false,"comment_ctime":1585181151,"is_pvip":false,"replies":[{"id":"82653","content":"å“ˆå“ˆ è°¢è°¢åšå¼ˆåŒå­¦","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1591443519,"ip_address":"","comment_id":195334,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880148447","product_id":100029501,"comment_content":"æ¶¨å§¿åŠ¿äº†ï¼Œå¯ä»¥å¯¼å‡ºå¾®ä¿¡èŠå¤©è®°å½•äº†","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489031,"discussion_content":"å“ˆå“ˆ è°¢è°¢åšå¼ˆåŒå­¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591443519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174811,"user_name":"CrazyCodes","can_delete":false,"product_type":"c1","uid":1081205,"ip_address":"","ucode":"C9C0E72522EB5B","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/75/551c5d6c.jpg","comment_is_top":false,"comment_ctime":1580395829,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5875363125","product_id":100029501,"comment_content":"å¾®ä¿¡èŠå¤©è®°å½•è¿™ä¸ªæ¶¨å§¿åŠ¿äº†ğŸ˜†","like_count":1},{"had_liked":false,"id":166891,"user_name":"ballgod","can_delete":false,"product_type":"c1","uid":1584098,"ip_address":"","ucode":"C20E95E98EAC43","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIR9QrAn9TZOrJMSYMyN96PAuAjETVrN5SPp3hMbfUAGIWtHceWPEoQtPdXeuBn7VB7dagtxynAIA/132","comment_is_top":false,"comment_ctime":1577626132,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5872593428","product_id":100029501,"comment_content":"è¯·é—®è€å¸ˆï¼Œå®‰å“å’Œç”µè„‘ç«¯çš„å¾®ä¿¡è®°å½•æ€ä¹ˆæ‰¾ï¼ŒæŸ¥èµ„æ–™æœ‰è¯´éœ€è¦rootçš„","like_count":1},{"had_liked":false,"id":135255,"user_name":"Tesla","can_delete":false,"product_type":"c1","uid":1500742,"ip_address":"","ucode":"98629AFD9861EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUcSLVV6ia3dibe7qvTu8Vic1PVs2EibxoUdx930MC7j2Q9A6s4eibMDZlcicMFY0D0icd3RrDorMChu0zw/132","comment_is_top":false,"comment_ctime":1569089960,"is_pvip":false,"replies":[{"id":"53345","content":"é€šè¿‡SQLiteåº”è¯¥æ˜¯å¯ä»¥ç¼–è¾‘å’Œä¿®æ”¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1570423518,"ip_address":"","comment_id":135255,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5864057256","product_id":100029501,"comment_content":"è¿™ä¸ªèŠå¤©è®°å½•æ–‡ä»¶åº”è¯¥æ˜¯ä¸å¯ç¼–è¾‘å’Œæ›¿æ¢çš„å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468114,"discussion_content":"é€šè¿‡SQLiteåº”è¯¥æ˜¯å¯ä»¥ç¼–è¾‘å’Œä¿®æ”¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570423518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131296,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1567696952,"is_pvip":false,"replies":[{"id":"59848","content":"åŠ æ²¹ç«¥ç«¥","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1574761372,"ip_address":"","comment_id":131296,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862664248","product_id":100029501,"comment_content":"å­¦ä¹ äº†ï¼Œè€å¸ˆã€‚","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466378,"discussion_content":"åŠ æ²¹ç«¥ç«¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574761372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316504,"user_name":"SuperSnow","can_delete":false,"product_type":"c1","uid":1065351,"ip_address":"","ucode":"84C89AA8083E6A","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","comment_is_top":false,"comment_ctime":1634362771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634362771","product_id":100029501,"comment_content":"è€å¸ˆï¼Œå¾®ä¿¡å’ŒQQçš„ç”µè„‘ç‰ˆçš„æœ¬åœ°èŠå¤©å†…å®¹ä¹Ÿæ˜¯ç”¨sqlliteå—ï¼Ÿ","like_count":0}]}