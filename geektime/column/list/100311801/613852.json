{"id":613852,"title":"06｜领域建模实践（下）：领域建模还有什么其他技巧？","content":"<p>你好，我是钟敬。</p><p><a href=\"https://time.geekbang.org/column/article/613107\">上节课</a>咱们介绍了领域建模的一些概念，也一起完成了有关租户、组织和员工的领域建模。今天这一讲，我们继续对项目管理、人员分配和工时登记部分进行建模。</p><p>在完成领域模型的过程中，我们还会对“多对多关联”进行更深入的学习，一起识别“操作”，并且划分模块，最后还会完善业务规则并建立词汇表。掌握了这些技巧，你就可以尝试运用领域建模解决一些实际问题了。</p><h2>深入理解“多对多”关联</h2><p>和<a href=\"https://time.geekbang.org/column/article/613107\">上节课</a>一样，我们从项目管理部分的领域名词开始建模。同样，你是架构师，我是产品经理。</p><p><img src=\"https://static001.geekbang.org/resource/image/52/28/529247a111134583dcf6f5d0ff6d5e28.jpg?wh=3596x2260\" alt=\"\"></p><p>我们先假定每个名词都是一个实体，然后再把这些实体一个个加到已有的模型图里。初步识别出的实体有下面这些：<br>\n<img src=\"https://static001.geekbang.org/resource/image/e9/16/e9132cc67d55c0968ed4f77ceb25d016.jpg?wh=3733x1030\" alt=\"\"></p><h3>处理“客户”</h3><p>我们首先来处理<strong>客户</strong>实体。按照需求，每个<strong>客户</strong>有一个<strong>客户经理</strong>负责。你和我确认了一下：“<strong>客户经理</strong>也是<strong>员工</strong>对吧？”我说：“是的。”于是你把<strong>客户</strong>添加到了模型里，如下图：<br>\n<img src=\"https://static001.geekbang.org/resource/image/a8/50/a85a79c8050b100858a0f11c01498b50.jpg?wh=3733x2260\" alt=\"\"></p><p>这里你把<strong>客户经理</strong>当作了一个角色，<strong>员工</strong>和<strong>客户</strong>的关联翻译成自然语言就是“一个员工可以充当多个客户的客户经理，而一个客户有且仅有一个员工作为他的客户经理”。</p><h3>处理“合同”</h3><p>完成了对客户的建模，我们开始处理<strong>合同</strong>实体。根据需求，“每个<strong>合同</strong>都有一个<strong>销售人员</strong>负责”，于是，你画出了下面的模型图：<br>\n<img src=\"https://static001.geekbang.org/resource/image/9b/e1/9b481718f5466b0ca07dd7cd1efec3e1.jpg?wh=3733x2260\" alt=\"\"></p><!-- [[[read_end]]] --><p>你有些疑惑：“客户经理是不是也是销售人员呢？”我说：“是的。”于是你意识到：“<strong>销售人员</strong>应该也是<strong>员工</strong>的一种<strong>岗位</strong>，并且在与<strong>客户</strong>的关联中，充当了<strong>客户经理</strong>这个角色。那么，类似地，<strong>销售人员</strong>又充当<strong>合同</strong>的什么角色呢？”我说：“就叫<strong>合同经理</strong>吧。”</p><p>于是，你修改了<strong>销售人员</strong>这个角色的名字，并且在<strong>岗位</strong>的注释中增加了<strong>销售人员</strong>。此外，你又增加了<strong>“只有销售人员才能作客户经理”</strong> 以及<strong>“只有销售人员才能作合同经理”</strong>这两条业务规则。</p><p>现在的模型图如下：<br>\n<img src=\"https://static001.geekbang.org/resource/image/9e/fb/9e0628befb43be54c511689c579eeafb.jpg?wh=3733x2260\" alt=\"\"></p><h3>处理“项目”</h3><p>接着，你又用类似的方法，增加了<strong>项目</strong>实体：<br>\n<img src=\"https://static001.geekbang.org/resource/image/dc/7d/dca9bde7f5fdfca903e4697430f2007d.jpg?wh=3733x2260\" alt=\"\"></p><h3>处理“为项目分配员工”</h3><p>现在我们考虑“为项目分配员工”和“员工退出项目”这两个需求。</p><p>首先，我在图里面的<strong>员工</strong>和<strong>项目</strong>之间增加了一个表示“员工被分配到项目上”的关联，同时把“一个员工预计的投入百分比不能大于百分之百”的规则也标注出来。<br>\n<img src=\"https://static001.geekbang.org/resource/image/a1/87/a158d87260f6f28fe4f8c4758a611487.jpg?wh=3733x2260\" alt=\"\"></p><p>这时候，<strong>员工</strong>和<strong>项目</strong>之间就有了两个不同的关联。原来那个一对多关联表达的是“员工充当项目经理”的关系。</p><p>另外，我们新增了一个关联，表示分配员工的关系。一个<strong>员工</strong>可以被分配到多个<strong>项目</strong>上，一个<strong>项目</strong>上又可以有多个<strong>员工</strong>，因此两者是“多对多”关联。在这个关联的<strong>员工</strong>一端，写上了<strong>项目成员</strong>这个角色。也就是<strong>员工</strong>充当了<strong>项目</strong>的<strong>项目成员</strong>。</p><p>在这里我们可以看到，<strong>两个实体之间，可以有多个关联</strong>。不同的关联代表不同含义，数量关系也可以不同，可以用角色名来区分。</p><p>然后你问我：“这里有一个关于<strong>投入百分比</strong>的规则，那么<strong>投入百分比</strong>这个属性应该记录在哪个实体上呢？”这时候我们发现了一个尴尬的问题，这个百分比既不能记录在<strong>员工</strong>实体上，也不能记录在<strong>项目</strong>实体上。</p><p>这是因为，只有<strong>员工</strong>和<strong>项目</strong>建立了项目成员这一关联的时候，记录<strong>投入百分比</strong>才是有意义的，也就是说，这个属性应该记录在这个多对多关联上。那么这在UML中怎么表达呢？</p><p>于是，我把模型改成了下面的样子：<br>\n<img src=\"https://static001.geekbang.org/resource/image/e9/b3/e9ee4d9d008e25a1de199139ce7373b3.jpg?wh=3733x2260\" alt=\"\"></p><p>这时候，原来的<strong>项目成员</strong>角色演变成了一个独立的实体，来表达<strong>员工</strong>和<strong>项目</strong>之间的多对多关联。<strong>预计投入百分比</strong>也就自然放在这个实体里面了。</p><p>注意，这时候，<strong>员工</strong>和<strong>项目成员</strong>之间的关联是一对多，<strong>项目</strong>和<strong>项目成员</strong>之间也是一对多。然后我总结道：“<strong>任何多对多关联，总能用类似的方法，通过引入一个表示关联的实体，拆成两个一对多的关联。</strong>”</p><p>接着，你又注意到一个问题，一个<strong>员工</strong>可以分配到一个<strong>项目</strong>上，然后退出<strong>项目</strong>，然后再一次分配到这个<strong>项目</strong>上，所以，我们就应该用时间段来记录员工参与项目的历史。</p><p>考虑到时间因素，有关投入百分比的业务规则可以进一步明确为“<strong>在任何时刻</strong>，一个人的预计投入百分比总和不能大于百分之百。”此外，从逻辑上，还可以识别一条规则<strong>一个员工在同一个项目上的时间段不能重叠</strong>。</p><p>于是你这样改进了模型：<br>\n<img src=\"https://static001.geekbang.org/resource/image/d7/65/d7c85ffa90f9aafb1fddfc67fc540265.jpg?wh=3733x2260\" alt=\"\"></p><h3>处理“登记工时”</h3><p>接下来，为了处理报工时的需求，你又增加了<strong>工时记录</strong>实体，以及相关的业务规则：<br>\n<img src=\"https://static001.geekbang.org/resource/image/7b/ce/7b0e15667a9bf164436f74b7972c8dce.jpg?wh=3270x2260\" alt=\"\"></p><p>同样，我们可以把<strong>工时记录</strong>看作<strong>员工</strong>和<strong>项目</strong>之间的一种多对多关系。</p><h2>识别“操作”</h2><p>经过上面的梳理，我们已经把剩余的模型梳理得差不多了。但是，在事件风暴中咱们还遗留了一个问题：怎么处理客户经理上级、销售人员上级和项目经理上级这几个概念？现在看来，它们不太像是独立的实体，而更像是某种关系。</p><p>经过讨论我们发现，客户经理、销售人员、项目经理，无非都是<strong>员工</strong>，所以他们的上级，其实都可以归纳为<strong>取员工上级</strong>这个操作。然后我们讨论出了取员工上级的逻辑：</p><p><strong>第一</strong>，如果员工不是所属组织的负责人，那么这个组织的负责人就是员工的上级；</p><p><strong>第二</strong>，如果员工就是所属组织的负责人，那么这个组织的上级组织的负责人就是这个员工的上级。</p><p>你看，在上述逻辑中，我们又引入了一个组织<strong>负责人</strong>的概念。可以认为，<strong>负责人</strong>是<strong>员工</strong>在与<strong>组织</strong>的关联中充当的一种角色。</p><p>基于这些理解，我把模型进一步完善了一下：<br>\n<img src=\"https://static001.geekbang.org/resource/image/yy/5a/yy1970cdbdf03e6a4413bb85fa39bb5a.jpg?wh=3268x2260\" alt=\"\"></p><p>在这个模型中，有几个要注意的地方：</p><p><strong>第一</strong>，为了表达<strong>组织</strong>的负责人，我在<strong>员工</strong>和<strong>组织</strong>之间又增加了一个一对多关联，表示“一个员工可以不作任何组织的负责人，也可以作多个组织的负责人；而一个组织可以暂时没有负责人，但最多只能有一个负责人。”</p><p>现在，<strong>组织</strong>和<strong>员工</strong>之间就有两种不同的关联了，分别用了<strong>成员</strong>和<strong>负责人</strong>两种角色来区分。</p><p><strong>第二</strong>，我们在<strong>员工</strong>实体上增加了<strong>取上级</strong>这个操作。<strong>操作</strong>（operation）在UML里也叫<strong>方法</strong>（method）。对象的<strong>属性</strong>是静态的值，而<strong>操作</strong>是动态的逻辑。在UML中，<strong>操作</strong>用“操作名+括号”的方式表示，括号中可以写参数。</p><p><strong>第三</strong>，我们用一个注解说明了取上级这个操作的业务逻辑。</p><p>现在，我们的领域模型已经覆盖了事件风暴中发现的所有领域概念，但是，你是不是觉得这个图已经有点乱，不太容易理解了呢？</p><h2>划分模块</h2><p>之所以这个图不容易理解，是因为很多实体和关联混杂在一起，形成了一个“蜘蛛网”。但人的认知能力是有限的，面对这样一张复杂的对象网络，就产生了认知过载（cognitive overload）。</p><p>解决这一问题的方法就是“模块化”。也就是说，把模型中的业务概念组织成若干高内聚的<strong>模块</strong>（module），而模块之间尽量低耦合。</p><p>在UML中，可以用<strong>包</strong>来表示模块。包的符号是下面这样：<br>\n<img src=\"https://static001.geekbang.org/resource/image/71/7f/7197514c032b23147a3531a8f5d8b67f.jpg?wh=3009x1597\" alt=\"\"></p><p>包的内部可以包含实体，也可以包含另外的包。在UML中，任何需要对元素进行分组的场合，都可以使用包。经过一番讨论，我们采用如下方式划分模块：<br>\n<img src=\"https://static001.geekbang.org/resource/image/ec/2e/ec0a5fd92c64e10e11cd053b8ac39e2e.jpg?wh=3431x2260\" alt=\"\"></p><p>也就是说，我们把模型分成了4个模块，分别是<strong>租户管理</strong>、<strong>组织管理</strong>、<strong>项目管理</strong>和<strong>工时管理</strong>。是不是感觉清晰多了？</p><p>有了模块，我们就可以从两个层面理解模型。</p><p><strong>第一个是宏观层面</strong>。宏观层面只关心模型中有哪些模块，以及模块间的依赖关系，不关心模块内部的细节。为了达到这个目的，我们可以画出更宏观的<strong>包图</strong>。像下面这样：<br>\n<img src=\"https://static001.geekbang.org/resource/image/22/87/22cf84702d9c9cff4518ab4b37e10c87.jpg?wh=2983x1889\" alt=\"\"></p><p>这里我们又引入了一个新的符号，就是带箭头的虚线。这在UML中表示<strong>依赖</strong>（dependency）关系，箭头由依赖方指向被依赖方。</p><p>从图中我们看到：</p><p><strong>首先</strong>，所有模块都依赖<strong>租户管理</strong>。这是因为，为了将不同租户的数据区别开来，每个模块中的实体都要说明自己是哪个租户的；</p><p><strong>其次</strong>，<strong>项目管理</strong>依赖<strong>组织管理</strong>。这是因为项目经理、项目成员等概念都依赖于组织管理中的员工；</p><p><strong>还有</strong>，<strong>工时管理</strong>既依赖<strong>组织管理</strong>又依赖<strong>项目管理</strong>。这是因为工时管理要说明（组织管理中的）哪个员工在（项目管理中的）哪个项目上投入了多少工时。</p><p>我们要注意，依赖关系和前面讲的关联关系是不一样的。<strong>关联表示的是数据上的导航关系</strong>。例如，当我们说组织和员工之间具有一对多关联的时候，就意味着，由组织可以找到下面的员工，由员工也可以找到所属的组织。</p><p>依赖表示的意思更为广泛。<strong>如果A、B两个元素，有了A才能有B，那么就可以说B依赖于A</strong>。</p><p>我们可以认为关联是一种特殊的依赖关系，但依赖还有别的形式，比如说项目管理模块依赖于组织管理模块，两者之间未必有直接的数据导航关系，可能只是项目管理调用组织管理，获得需要的数据。</p><p><strong>理解模型的第二个层面是微观层面，</strong>也就是深入到模块内部，了解实体和关联等等的细节。</p><p>通过这种分而治之的方法，我们可以在一定程度上管理复杂性，解决认知过载的问题。如果模型更加复杂，那么还要进一步采用<strong>限界上下文</strong>来处理，这个会在第三个迭代再介绍。</p><p>现在，领域模型基本完成了。为了完善开发过程，我们还要再进行两个实践：一个是完善业务规则，另一个是建立词汇表。</p><h2>完善业务规则</h2><p>我们在做事件风暴时就开始识别业务规则了，在领域建模中又识别出了更多的规则，所以现在我们需要把这些规则补充到业务规则表之中，如下表：<br>\n<img src=\"https://static001.geekbang.org/resource/image/43/96/431d4ff99edbc65c54e9a9fb083e0b96.jpg?wh=3307x2704\" alt=\"\"><br>\n其中，从R006开始，是我们领域建模阶段新识别出的领域规则。</p><h2>建立词汇表</h2><p>接着我们来建立词汇表，也就是把事件风暴和领域模型中重要的词汇列成表。为什么要建立词汇表呢？主要是有两个作用。</p><p>首先，我们需要通过词汇表来<strong>规范领域模型中的词汇</strong>。同一个词，可能会在领域模型中出现多次，时间久了，就可能不一致，因此需要进一步规范。</p><p>第二，是可以<strong>用于后续编程中的命名</strong>。按照DDD的要求，程序中的各种命名也需要统一，并且需要与领域模型中保持一致。我们会在词汇表中列出英文全称和缩写，以达到这个目的。</p><p>词汇表是保证统一语言的重要手段。</p><p>目前为止的重要词汇，都列到下面这张词汇表里了。<br>\n<img src=\"https://static001.geekbang.org/resource/image/92/0f/92704b55b0a605e9cf29c3992f76d10f.jpg?wh=3245x3105\" alt=\"\"></p><h2>总结</h2><p>好，这节课的主要内容就讲完了，下面来总结一下。</p><p>今天我们在上节课的基础上，继续对项目管理和工时管理进行领域建模。在这个过程中进一步深化了对“多对多”关联的理解：<strong>我们可以通过引入一个表示关联的实体，将一个多对多关联拆成两个一对多关联</strong>。</p><p>我们还通过取员工上级的逻辑，学习了为实体添加操作。当模型变得比较复杂时，可以把模型划分成多个模块，使模型更容易理解。</p><p>在建立完领域模型之后，我们还进行了两项实践：完善<strong>业务规则</strong>和<strong>建立词汇表</strong>。很多朋友过去并不重视这两个实践，然而，它们对落实DDD实践，具有很重要的作用，一定要引起重视。</p><p>最后还要强调一点，领域建模易学难精，需要不断地练习才能熟练掌握。希望你能拿自己的实际项目练习一下。</p><h2>思考题</h2><p>1.今天我们讲过，一个多对多关联可以拆成两个一对多关联，那么你觉得什么时候应该拆，什么时候不拆呢？</p><p>2.客户经理是可以更换的，如果要保留更换历史，模型图应该怎样改呢？</p><p>好，今天的课程结束了，有什么问题欢迎在评论区留言。下节课，我们再从理论上深入理解一下“什么是模型”以及“什么是模型驱动设计”。</p>","comments":[{"had_liked":false,"id":365119,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"广东","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":true,"comment_ctime":1672129886,"is_pvip":false,"replies":[{"id":132980,"content":"总结得非常好。对于第一点，总的没问题。描述性对象到底算不算值对象，我也思考过一下，等第二迭代讨论完值对象，可以再聊一下。关于第二点，不论具体怎么实现，要点在于，如果考虑历史的话，员工和项目就构成了多对多关系","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1672203822,"ip_address":"广东","comment_id":365119,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"1.我的观点是多对多全都可以拆，只是有时候没必要拆。以四色角度，部分ppt 描述型模型可以不拆（ddd角度，部分值对象），因为只是承接一些不变的数据，拆与不拆既不影响代码实现，也不影响展示。为什么是部分，因为有些多对多，本来在业务的认知就有个概念把它们拆了，那么与业务认知保持一致就好。\n\n2.客户经理更换这个，日志倒还好，追加操作日志能实现。但我觉得这里想表达的应该不是这个难题， 而是客户经理的关联关系在其他场景被引用的难题。假如我要考核某个员工一年时间内作为客户经理维系的客户数量，以及产生的订单，如果客户经理关连关系会变，那么如果年底该员工所有的客户都划给了其他人，那他关联出的数据就是0（历史数据因为关联关系变动而受牵连）。有两种做法，第一种，所有使用场景记录关系快照，比如产生订单，订单上不能只记录客户，还要记录当时的客户经理；第二种，限制修改关联关系。对关联关系建模，同一个时段只能有一个生效的关联关系，关联关系只能新建和作废，不能修改。如此一来，所有引用场景只需要带上当时使用的操作时间，就能捞到对应时间生效的关联关系，从而找到“当时的客户经理”。\n\n3.完善业务规则和建立词汇表，好主意，下来试试。 我自己的话，业务规则主要靠故事卡（主要还是个人精力有限）。 词汇表，建模画图时中英全写（还是单独一张词汇表灵活，能多加些纬度信息）。","like_count":5,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597745,"discussion_content":"总结得非常好。对于第一点，总的没问题。描述性对象到底算不算值对象，我也思考过一下，等第二迭代讨论完值对象，可以再聊一下。关于第二点，不论具体怎么实现，要点在于，如果考虑历史的话，员工和项目就构成了多对多关系","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1672203822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028951,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/97/9a7ee7b3.jpg","nickname":"Geek4329","note":"","ucode":"D6FB8D1B2D5DAC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629669,"discussion_content":"个人理解是，当有属性或者行为不适合放在现有的实体上时，就需要考虑拆出一个新的实体。这个不仅仅适应多对多，即便是一对一应该也是这样，假设员工和项目是一对一的关系的，那么投入比这个属性依然要放在项目员工的实体上","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697509055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364657,"user_name":"leesper","can_delete":false,"product_type":"c1","uid":1351104,"ip_address":"广东","ucode":"CC76320571BECA","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/c0/cb5341ec.jpg","comment_is_top":true,"comment_ctime":1671268146,"is_pvip":false,"replies":[{"id":132718,"content":"非常感谢热心捉虫，希望之后能捉到更多。其实有些错误是我范的，不怪小编，您这是对我口下留情了 ：）\n\n关于思考题，\n1. 说得没错，再补充一点：当关联实体自身也有值得关注的属性，或者关联实体本身也有业务关注的独立的含义的时候（常常表现为在业务的术语里面有），就可以拆。\n2. 也没错，另外，还有一个“当前客户经理”的派生关联问题，在迭代二还会提到。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671279954,"ip_address":"广东","comment_id":364657,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"抓虫时间到：\n\n（1）第7幅图（处理“为项目分配员工”——这行文字下面那幅图），图中员工类图上白色部分用于填写属性和方法那里出现了“项目经理”四个字，应该删除\n\n（2）第10幅图（处理“登记工时”——这行文字下面那幅图），图中最下面圆圈圈住的部分，业务规则中第一条“员工只能在被分配的项目上报工时”和第二条“只能在被分配的项目上报工时”重复了，应该删掉其中一条\n\n是人就会有失误，没有故意为难编辑同志的意思。一是，这只是我的学习习惯——带着问题学习。任何让我觉得心生疑窦的地方，我都要思考一下是我理解错了还是材料有问题，这样我印象才深刻。\n\n二是，ThoughtWorks老师讲的课都太过精彩，我不想错过钟老师的任何一个文字，因此读的比较仔细。\n\n思考题：\n\n1. 当我需要快速建模，了解业务知识的时候，可以先不拆多对多关联；而当我需要深入细节，用于指导开发的时候，就要拆分了，目的决定手段\n2. 客户经理是可以更换的，意味着一个客户可能被多个客户经理服务过，一个客户经理服务过多个客户，他们是多对多关系，如果要保留更换历史，就要把多对多关系拆成两个一对多关系，并记录在“客户服务历史”这个实体上，且同样地，服务时间段不能有重叠","like_count":7,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596928,"discussion_content":"非常感谢热心捉虫，希望之后能捉到更多。其实有些错误是我范的，不怪小编，您这是对我口下留情了 ：）\n\n关于思考题，\n1. 说得没错，再补充一点：当关联实体自身也有值得关注的属性，或者关联实体本身也有业务关注的独立的含义的时候（常常表现为在业务的术语里面有），就可以拆。\n2. 也没错，另外，还有一个“当前客户经理”的派生关联问题，在迭代二还会提到。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671279954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596944,"discussion_content":"谢谢leesper的反馈，也为你的学习热情点赞哦。另外同步一下：图片已经更新啦，刷新可见。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671287071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364632,"user_name":"赵晏龙","can_delete":false,"product_type":"c1","uid":2673605,"ip_address":"广东","ucode":"F15730BCA97EE0","user_header":"https://static001.geekbang.org/account/avatar/00/28/cb/c5/c1d7ca5e.jpg","comment_is_top":false,"comment_ctime":1671242371,"is_pvip":false,"replies":[{"id":132792,"content":"其实常用的就三板斧 :）","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671420216,"ip_address":"广东","comment_id":364632,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"写一篇课程治好了我多年的UML恐惧症","like_count":10,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597071,"discussion_content":"其实常用的就三板斧 :）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671420216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364823,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"广东","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1671544008,"is_pvip":false,"replies":[{"id":132851,"content":"所以说“不止是技术，还是艺术”","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671552291,"ip_address":"广东","comment_id":364823,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"划分模块很精彩，确实更容易理解了。\n感叹模块是怎么划分出来的！\nDDD 像写小说，细节错综复杂，但又逃不出大框架。\n一个会 DDD 的程序员好像是导演、作家，想象力丰富！","like_count":5,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597239,"discussion_content":"所以说“不止是技术，还是艺术”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1671552291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365945,"user_name":"阿昕","can_delete":false,"product_type":"c1","uid":1012906,"ip_address":"浙江","ucode":"F3AD093B68E074","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/aa/178a6797.jpg","comment_is_top":false,"comment_ctime":1673257684,"is_pvip":false,"replies":[{"id":133764,"content":"第1题，除了多对多关系存在业务规则，再补充两点：1）多对多关系存在专门的业务属性，2）多对多关系本身也是业务关注的一个独立概念\n\n第二题，你还画出了图，非常不错！总的思路没问题，说几个细节：1）含有“客户经理角色”的关联线和“客户与合同”的关联线粘在一块了，一般关联线不要粘在一起（第二迭代的泛化可以粘在一起）；2）含有“客户经理角色”的关联线其实可以由新建的“客户经理”实体推导出来，后面的课程讲了导出关系的画法 3）最好把多重性也画出来。\n\n祝学习愉快！","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1674957272,"ip_address":"广东","comment_id":365945,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"1.多对多关系存在业务规则时，需要拆分出来一个承载的实体，变成两个一对多的关系；\n2.增加一个客户经理的实体，修改之后的模型图：https:&#47;&#47;boardmix.cn&#47;app&#47;share?token=GR6wYS0X3IRCHXMqi7vgLwGUF_JZb_jotnRvLrCo8glJXQErpLRs2XY6d3jPZxHnxMyzrMb_9nVr2OV8VSR2_5eevpKeor0MC80Mny8EOGU=&amp;inviteCode=kjG6ak","like_count":3,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600907,"discussion_content":"第1题，除了多对多关系存在业务规则，再补充两点：1）多对多关系存在专门的业务属性，2）多对多关系本身也是业务关注的一个独立概念\n\n第二题，你还画出了图，非常不错！总的思路没问题，说几个细节：1）含有“客户经理角色”的关联线和“客户与合同”的关联线粘在一块了，一般关联线不要粘在一起（第二迭代的泛化可以粘在一起）；2）含有“客户经理角色”的关联线其实可以由新建的“客户经理”实体推导出来，后面的课程讲了导出关系的画法 3）最好把多重性也画出来。\n\n祝学习愉快！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674957272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364822,"user_name":"狂躁程序猿","can_delete":false,"product_type":"c1","uid":1062552,"ip_address":"广东","ucode":"724D777B5ED13C","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/98/cdc6baf1.jpg","comment_is_top":false,"comment_ctime":1671543823,"is_pvip":false,"replies":[{"id":132852,"content":"如果看一看Evans的《DDD》原书，就会发现里面的领域模型就是类图和包图，而且也不是划分领域，而应该是划分限界上下文。建议多看原著，一些二手三手的材料可能会让你跑偏呦。希望这门课不在此列：）","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671552462,"ip_address":"广东","comment_id":364822,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"钟老师，有些不太理解，这个过程不应该是识别Entity、VO，再划分领域的过程吗？为什么用类图、包图来解释，感觉这本不是DDD的本意","like_count":3,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597240,"discussion_content":"如果看一看Evans的《DDD》原书，就会发现里面的领域模型就是类图和包图，而且也不是划分领域，而应该是划分限界上下文。建议多看原著，一些二手三手的材料可能会让你跑偏呦。希望这门课不在此列：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671552462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365994,"user_name":"Jaising","can_delete":false,"product_type":"c1","uid":1037630,"ip_address":"安徽","ucode":"F68830B7B90F96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d5/3e/7f3a9c2b.jpg","comment_is_top":false,"comment_ctime":1673281340,"is_pvip":false,"replies":[{"id":134769,"content":"本来想仔细看看你的两篇文章再写回复，结果就一直拖下来了。你的文章最可贵的是一方面吸收了课程的知识点，另一方面又用在了自己的领域。按你这个学习方法，很快就要把我会的这点东西吃干抹净了 ：）。文章已经点赞收藏转发。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1677929696,"ip_address":"广东","comment_id":365994,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"还在犹豫要不要入手的同学可以看过来，就领域建模这两节值回票价！\n看钟老师的专栏忍不住想记点什么，最小闭环的领域建模结束了，做个小结请钟老师指正下：\n\n领域驱动设计的核心是领域建模，领域建模创造性地解决了软件分析与设计割裂的历史遗留问题，通过领域模型关联业务需求与软件实现，达成需求与交付的一致性，通过可视化模型快速消化业务知识，建立统一语言，简化认知统一认知指导开发，为业务人员与技术人员搭建起可沟通与监督的桥梁。\n\n继续做个两千字小笔记粗浅地谈谈领域建模学习与实践：https:&#47;&#47;juejin.cn&#47;post&#47;7186685036127748155\n实践中对事件风暴又有了新的想法，更新下笔记：https:&#47;&#47;juejin.cn&#47;post&#47;7182111319967924282","like_count":2,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607523,"discussion_content":"本来想仔细看看你的两篇文章再写回复，结果就一直拖下来了。你的文章最可贵的是一方面吸收了课程的知识点，另一方面又用在了自己的领域。按你这个学习方法，很快就要把我会的这点东西吃干抹净了 ：）。文章已经点赞收藏转发。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677929696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1037630,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d5/3e/7f3a9c2b.jpg","nickname":"Jaising","note":"","ucode":"F68830B7B90F96","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":607577,"discussion_content":"我天呐，钟老师太客气了，没有您的指引我可能还是在 DDD 的外围浅尝辄止，国内的软件行业真的太需要您这种务实精进的布道师了，最近忙于项目暂时没办法在专栏结束前跟完了，但我会在接下来把所学所思持续发布出来，自己成长也能点亮别人就更好了😁再次感谢钟老师的陪伴与指导","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677975434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":607523,"ip_address":"安徽","group_id":0},"score":607577,"extra":""}]}]},{"had_liked":false,"id":378678,"user_name":"blusจุ๊บ","can_delete":false,"product_type":"c1","uid":1046481,"ip_address":"陕西","ucode":"4EB706138FF11E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/d1/bd9e5f36.jpg","comment_is_top":false,"comment_ctime":1690604265,"is_pvip":false,"replies":[{"id":138084,"content":"聚合和上下文都可以看作模块。此外，还有些模块介于两者之间。模块和代码有直接的对应关系（就是代码中的包）。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1691069565,"ip_address":"广东","comment_id":378678,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"划分模块是在定聚合还是定限界上下文，这儿的模块概念怎么理解，和代码落地有对应关系吗？还是只是简单圈定一个边界而已，还是这个模块就是聚合或限界上下文","like_count":1,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624925,"discussion_content":"聚合和上下文都可以看作模块。此外，还有些模块介于两者之间。模块和代码有直接的对应关系（就是代码中的包）。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691069565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364674,"user_name":"GeekPoplar","can_delete":false,"product_type":"c1","uid":1657079,"ip_address":"广东","ucode":"4D2412EB0661DD","user_header":"https://static001.geekbang.org/account/avatar/00/19/48/f7/de8e5ea9.jpg","comment_is_top":false,"comment_ctime":1671304173,"is_pvip":true,"replies":[{"id":132791,"content":"是的","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671420176,"ip_address":"广东","comment_id":364674,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"搜了一下，&quot;n&#47;a&quot;是“not applicable”的意思，在词汇表里出现&quot;n&#47;a&quot;意味着那一部分的词汇不需要设置简称。","like_count":1,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597070,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671420176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393686,"user_name":"存在","can_delete":false,"product_type":"c1","uid":2254854,"ip_address":"北京","ucode":"F3217DC5B799BB","user_header":"https://static001.geekbang.org/account/avatar/00/22/68/06/e74b5675.jpg","comment_is_top":false,"comment_ctime":1724588832,"is_pvip":false,"replies":[{"id":143634,"content":"划分模块有时没有绝对“正确”的标准。这里的“工时管理”，看起来是可以放在“项目管理”，但另一方面，放在“组织管理”似乎也合理，因为这里考虑的是某个“人”的工时。面对这种两可的局面，那么单独作为一个模块可能合理一些。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1731398734,"ip_address":"广东","comment_id":393686,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"想问下老师这里划分模块的依据是什么，工时管理为什么要单独划分一个包，而不是放到项目管理里","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653690,"discussion_content":"划分模块有时没有绝对“正确”的标准。这里的“工时管理”，看起来是可以放在“项目管理”，但另一方面，放在“组织管理”似乎也合理，因为这里考虑的是某个“人”的工时。面对这种两可的局面，那么单独作为一个模块可能合理一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731398734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392082,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"广东","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/d1ab239e.jpg","comment_is_top":false,"comment_ctime":1719901202,"is_pvip":false,"replies":[{"id":143663,"content":"你的理解是对的，是某个人所有项目上的百分比之和不超过100%.","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1731485395,"ip_address":"广东","comment_id":392082,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"看了一遍评论区，也没有看到有人提出这个问题：\n项目成员的&quot;投入百分比&quot;属性，只是代表了在一个项目上投入的百分比，而如果想满足这条业务规则，应该要把这个成员投入到多个项目的百分比加起来不超过100%。\n--------\n老师，是这么理解吗？还是说这个百分比仅仅指的是在一个项目上项目成员所投入的百分比呢？","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653860,"discussion_content":"你的理解是对的，是某个人所有项目上的百分比之和不超过100%.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731485395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":387661,"user_name":"Geek_fe41a4","can_delete":false,"product_type":"c1","uid":2072905,"ip_address":"江苏","ucode":"3DB70FDF96D835","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK9Ijx19rLDhHkYTpnicc58dDAuCy2Zg7hpuKHkianichqFIW5qS7SEAl6jkrCBLwcC6RuicvicjCXXadA/132","comment_is_top":false,"comment_ctime":1708341960,"is_pvip":false,"replies":[{"id":141259,"content":"是一回事","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1708760380,"ip_address":"广东","comment_id":387661,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"package和module在具体规划应用程序架构的时候该怎么选择","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":637657,"discussion_content":"是一回事","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708760380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378161,"user_name":"Breakthrough","can_delete":false,"product_type":"c1","uid":2822757,"ip_address":"北京","ucode":"80EB01B5D6529D","user_header":"https://static001.geekbang.org/account/avatar/00/2b/12/65/846d566c.jpg","comment_is_top":false,"comment_ctime":1689835456,"is_pvip":false,"replies":[{"id":138090,"content":"词汇表的目的是实现统一语言，不能省。\n业务规则表是为了开发的时候不会漏掉规则，不建议省。至于是不是从事件风暴就开始，这个可以商量。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1691070434,"ip_address":"广东","comment_id":378161,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"钟老师，识别出词汇表和业务规则是为了后面做开发的时候确定字段和约束条件吗？这是必须要做梳理的事情还是可以跳过的步骤","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624931,"discussion_content":"词汇表的目的是实现统一语言，不能省。\n业务规则表是为了开发的时候不会漏掉规则，不建议省。至于是不是从事件风暴就开始，这个可以商量。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691070435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":376225,"user_name":"末日，成欢","can_delete":false,"product_type":"c1","uid":1812201,"ip_address":"陕西","ucode":"BBAEBB9C93558A","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLm8skz4F7FGGBTXWUMia6qVEc00BddeXapicv5FkAx62GmOnUNEcE4scSR60AmappQoNdIQhccKsBA/132","comment_is_top":false,"comment_ctime":1686558615,"is_pvip":false,"replies":[{"id":137251,"content":"因为我们关心的是一个员工的工时，哪怕不在同一个项目。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1686837903,"ip_address":"广东","comment_id":376225,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"老师，为什么工时记录没有和项目成员关联在一起，而是和成员关联在一起","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621129,"discussion_content":"因为我们关心的是一个员工的工时，哪怕不在同一个项目。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686837904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368210,"user_name":"yoon404","can_delete":false,"product_type":"c1","uid":3006322,"ip_address":"广东","ucode":"0F64D080AE0C9A","user_header":"https://static001.geekbang.org/account/avatar/00/2d/df/72/6ddefb95.jpg","comment_is_top":false,"comment_ctime":1676012826,"is_pvip":false,"replies":[{"id":135177,"content":"有","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1678975660,"ip_address":"广东","comment_id":368210,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"依赖关系是不是有区分直接依赖和间接依赖？","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609435,"discussion_content":"有","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678975660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367710,"user_name":"一只豆","can_delete":false,"product_type":"c1","uid":1003886,"ip_address":"广东","ucode":"73953B25ADC953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/6e/efb76357.jpg","comment_is_top":false,"comment_ctime":1675489618,"is_pvip":false,"replies":[{"id":133946,"content":"并没有固定的规则，要看具体情况。课程里是先做比较独立的模块，再做依赖于这些模块的模块。你也可以从业务价值最高，或大家最关注的模块入手。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1675641735,"ip_address":"广东","comment_id":367710,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"请问老师：在这两次课程的整体领域建模过程中，这个顺序有什么讲究吗？就是先选哪几个模块？选定模块后 先画哪个对象？","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":602040,"discussion_content":"并没有固定的规则，要看具体情况。课程里是先做比较独立的模块，再做依赖于这些模块的模块。你也可以从业务价值最高，或大家最关注的模块入手。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1675641735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365260,"user_name":"Jaising","can_delete":false,"product_type":"c1","uid":1037630,"ip_address":"广东","ucode":"F68830B7B90F96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d5/3e/7f3a9c2b.jpg","comment_is_top":false,"comment_ctime":1672302969,"is_pvip":false,"replies":[{"id":133062,"content":"关于第一题，哪怕不同角色的多重性相同，也建议在领域模型里分开，以便明确这是两个不同概念。\n最后的问题，你是对的，在前期已经可以有大概的划分，在领域建模时再调整。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1672365735,"ip_address":"广东","comment_id":365260,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"1.当发现一个业务需求或业务规则不适合建立在任何一个已有实体上，而且更适合建立在某两个实体关联上时，考虑增加实体做关联拆分，比如例子中的项目成员角色变成实体用以记录项目投入百分比，总体上把握如无必要，勿增实体的原则\n补充一个理解：对于两个实体之间存在的多个角色如果具有相同多重性可以合并成一个关联，不必区分角色，如有必要强调可以放到注释里枚举就像例子中的组织与组织类别，从而简化模型图\n\n2.问题2承接自问题1，员工与客户实体以及客户经理角色没法满足记录更换客户经理这条业务需求，因此可以按照项目成员拆分例子一样在员工与客户之间增加客户经理实体，具有开始时间与结束时间属性，更换记录操作，多重性关系是一个员工可以担任任意多客户经理，一个客户经理只能由一个员工担任，一个客户经理只负责一个客户，客户可以没有客户经理负责\n\n还有个问题请教下钟老师，模块划分基本回归到了最初的需求定义上，这是不是说建模之前的需求分析已经对模型中的实体做了初步识别呢？\n","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597936,"discussion_content":"关于第一题，哪怕不同角色的多重性相同，也建议在领域模型里分开，以便明确这是两个不同概念。\n最后的问题，你是对的，在前期已经可以有大概的划分，在领域建模时再调整。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672365735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1304009,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e5/c9/36fdec8e.jpg","nickname":"liuq","note":"","ucode":"88437D66C547C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652622,"discussion_content":"\n完了，奥卡姆剃刀不好使了。面向抽象编程，好像就是会提取更多反直觉的实体，为了应对变化","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1729264552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1037630,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d5/3e/7f3a9c2b.jpg","nickname":"Jaising","note":"","ucode":"F68830B7B90F96","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1304009,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e5/c9/36fdec8e.jpg","nickname":"liuq","note":"","ucode":"88437D66C547C4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652740,"discussion_content":"是这样，可读性和可扩展性在抽象层面需要平衡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1729559725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":652622,"ip_address":"安徽","group_id":0},"score":652740,"extra":""}]}]},{"had_liked":false,"id":364912,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"广东","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1671693197,"is_pvip":true,"replies":[{"id":132905,"content":"关于划分模块，在事件风暴阶段也可以初步做，在领域建模阶段再调整。\n\n第1题，再补充两点：1）关联本身也有业务关注的属性 2）关联本身也是对应业务术语中的关键概念\n\n第2题，目前客户经理只是员工充当的角色，如果要记录地址，需要把客户经理作为单独的实体，实体的属性就是您说的时间、现任标记等","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671969886,"ip_address":"广东","comment_id":364912,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"对于划分模块，也就是分包的过程，是不是应该在之前事件风暴甚至更早的时候就已经初步完成了？\n\n我觉的在项目中建立统一的业务规则表和词汇表是比较重要的，并且在项目的过程中不断更新。\n\n对于思考题，\n\n1. 多对多关系如果需要查询的时候，那么最好拆成两个一对多关联；如果不需要查询，只是展示，那么不拆应该也没问题。另外，如果多对多关系的两边都是实体的时候，最好拆出来，比如员工对组织；如果一边是实体，一边是数据字典，那么可以考虑不拆，比如员工对多个电话号码。\n\n2. 如果要保留客户经理的更换历史，那么可以在客户经理的模型上面增加任职的起始时间；或者是采用标记位的形式，表明现任客户经理，然后用数字或者时间表明历任客户经理。","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597524,"discussion_content":"关于划分模块，在事件风暴阶段也可以初步做，在领域建模阶段再调整。\n\n第1题，再补充两点：1）关联本身也有业务关注的属性 2）关联本身也是对应业务术语中的关键概念\n\n第2题，目前客户经理只是员工充当的角色，如果要记录地址，需要把客户经理作为单独的实体，实体的属性就是您说的时间、现任标记等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671969886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364691,"user_name":"喆","can_delete":false,"product_type":"c1","uid":1021657,"ip_address":"广东","ucode":"542E4D8FF40EEF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/96/d9/a252585b.jpg","comment_is_top":false,"comment_ctime":1671338939,"is_pvip":false,"replies":[{"id":132799,"content":"回答不错。您的问题1，课里的岗位只是举例，可以按实际情况增加；问题2，关联一定是依赖，依赖不一定是关联","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671424581,"ip_address":"广东","comment_id":364691,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"思考题回答：\n1. 个人认为这种实体主要是为了表现在事件风暴中无法正常推导出来的领域名词，我就叫他“隐式领域名词”，当发现有些领域规则没有可承载的实体的时候，就要想想是不是存在一种领域名词没有被发掘，这个时候可能就是对多对多关联进行拆分得到新的领域名词或者实体的好时机。\n2.可以在项目管理模块，新增分配记录实体(Assign Record Entity，或者更具体一点的名字），客户经理与其的关系为一对多，客户与其的关系为一对多。\n\n问题：\n1. 图中岗位是否少了开发人员？\n2. 关联一定是一种依赖关系吗？","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597081,"discussion_content":"回答不错。您的问题1，课里的岗位只是举例，可以按实际情况增加；问题2，关联一定是依赖，依赖不一定是关联","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671424581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364677,"user_name":"6点无痛早起学习的和尚","can_delete":false,"product_type":"c1","uid":1703256,"ip_address":"北京","ucode":"33A8A1CDA103F9","user_header":"https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg","comment_is_top":false,"comment_ctime":1671328364,"is_pvip":false,"replies":[{"id":132797,"content":"加油，如有可能期待你后续做分享～","user_name":"编辑回复","user_name_real":"编辑","uid":1501385,"ctime":1671422151,"ip_address":"北京","comment_id":364677,"utype":2}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311801,"comment_content":"听到老师说：一定要多实战练习，就更加坚定了，我要把自己最近在工作的一个需求，按照这几步进行练习，虽然这在初期是一个痛苦并且慢的过程","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597077,"discussion_content":"加油，如有可能期待你后续做分享～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671422151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364666,"user_name":"胖子","can_delete":false,"product_type":"c1","uid":1037760,"ip_address":"广东","ucode":"E6371346288A87","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIuRQaZX70dsBg6khub2VPM1eQAP9IWRWxgOFed3ia4kXyNJInFRicWJ0ibf2YmLsOvJa1sGygGpmJg/132","comment_is_top":false,"comment_ctime":1671279977,"is_pvip":false,"replies":[{"id":132790,"content":"您说的角色指的不是UML术语中的角色，而是权限管理中的吧？一般权限管理中叫角色，这里的岗位不用于权限管理。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671420165,"ip_address":"广东","comment_id":364666,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100311801,"comment_content":"岗位与角色有何差异？","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597069,"discussion_content":"您说的角色指的不是UML术语中的角色，而是权限管理中的吧？一般权限管理中叫角色，这里的岗位不用于权限管理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671420165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364646,"user_name":"abc🙂","can_delete":false,"product_type":"c1","uid":1887261,"ip_address":"广东","ucode":"FCF2B9091D161B","user_header":"https://static001.geekbang.org/account/avatar/00/1c/cc/1d/3c0272a1.jpg","comment_is_top":false,"comment_ctime":1671260377,"is_pvip":false,"replies":[{"id":132787,"content":"没错，这是隐式概念的一个例子。第二迭代讲泛化的时候还会有更多。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671419938,"ip_address":"广东","comment_id":364646,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100311801,"comment_content":"这是不是就是蕴含在业务逻辑中的，隐式概念，学员和班级时多对多，但是学员其实是对应到班级中的某个学号学位，班级有多个学位 。 一个学生在这个班里有学位 在另外一个班级也有学位","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597066,"discussion_content":"没错，这是隐式概念的一个例子。第二迭代讲泛化的时候还会有更多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671419938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364634,"user_name":"老狗","can_delete":false,"product_type":"c1","uid":1540332,"ip_address":"广东","ucode":"80927B4D31CFCE","user_header":"https://static001.geekbang.org/account/avatar/00/17/80/ec/b6149cbf.jpg","comment_is_top":false,"comment_ctime":1671243541,"is_pvip":false,"replies":[{"id":132782,"content":"说多对多就是业务没聊清楚，这个说法值得商榷，后面说的没问题。第二个问题也对，补充一下，原来的客户经理角色，会变成“当前客户经理”，而且可以看做客户经理历史的派生关系","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1671419564,"ip_address":"广东","comment_id":364634,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100311801,"comment_content":"1. 多对多关系大概率是没把事情描述清楚，必然会有中间的东西，但有些业务就是不准备聊清楚，就是不需要对多对多关联中的中间关系起个名的时候，就不要拆，其他时候拆\n2. 梳理关系，一个客户可能有多个客户经理服务过的历史，然后员工（销售）也是多次甚至同时担任客户经理，这里其实是个多对多关系，现有模型表现的是当前为该客户服务的客户经理。那么需要增加一个客户经理历史的对象，有1.开始时间和2.结束时间还有3.服务客户，\n员工 1..1  ------ 0..* 客户经理历史 1..*----1..1 客户","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597061,"discussion_content":"说多对多就是业务没聊清楚，这个说法值得商榷，后面说的没问题。第二个问题也对，补充一下，原来的客户经理角色，会变成“当前客户经理”，而且可以看做客户经理历史的派生关系","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671419564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388359,"user_name":"掂过碌蔗","can_delete":false,"product_type":"c1","uid":2275516,"ip_address":"广东","ucode":"6D9080A2B225AE","user_header":"https://static001.geekbang.org/account/avatar/00/22/b8/bc/5f4c9cb2.jpg","comment_is_top":false,"comment_ctime":1709994615,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100311801,"comment_content":"我发现ddd解决了很多我现在项目中遇到的问题","like_count":0},{"had_liked":false,"id":387457,"user_name":"Spoon","can_delete":false,"product_type":"c1","uid":1959822,"ip_address":"浙江","ucode":"2FF9193AD482C2","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e7/8e/318cfde0.jpg","comment_is_top":false,"comment_ctime":1707362561,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100311801,"comment_content":"事件风暴后，关系识别+实体抽象+模块划分=领域建模","like_count":0},{"had_liked":false,"id":377988,"user_name":"瀚海","can_delete":false,"product_type":"c1","uid":2062203,"ip_address":"上海","ucode":"E64C22F3F6D285","user_header":"https://static001.geekbang.org/account/avatar/00/1f/77/7b/338c4617.jpg","comment_is_top":false,"comment_ctime":1689641476,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100311801,"comment_content":"还是感觉租户和企业合在一起比较好","like_count":0},{"had_liked":false,"id":367582,"user_name":"py","can_delete":false,"product_type":"c1","uid":1496577,"ip_address":"上海","ucode":"2372522D715419","user_header":"https://static001.geekbang.org/account/avatar/00/16/d6/01/2448b4a9.jpg","comment_is_top":false,"comment_ctime":1675330128,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100311801,"comment_content":"1.当只是简单的多对多关系，没有额外的业务逻辑时可以不拆，否则应该拆出来清晰些。\n2.从一对多改成多对多关系","like_count":0}]}