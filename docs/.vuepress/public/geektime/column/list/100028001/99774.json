{"id":99774,"title":"09 | ç½‘ç»œé€šä¿¡ä¼˜åŒ–ä¹‹åºåˆ—åŒ–ï¼šé¿å…ä½¿ç”¨Javaåºåˆ—åŒ–","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åˆ˜è¶…ã€‚</p><p>å½“å‰å¤§éƒ¨åˆ†åç«¯æœåŠ¡éƒ½æ˜¯åŸºäºå¾®æœåŠ¡æ¶æ„å®ç°çš„ã€‚æœåŠ¡æŒ‰ç…§ä¸šåŠ¡åˆ’åˆ†è¢«æ‹†åˆ†ï¼Œå®ç°äº†æœåŠ¡çš„è§£è€¦ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼Œä¸åŒä¸šåŠ¡ä¹‹é—´é€šä¿¡éœ€è¦é€šè¿‡æ¥å£å®ç°è°ƒç”¨ã€‚ä¸¤ä¸ªæœåŠ¡ä¹‹é—´è¦å…±äº«ä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼Œå°±éœ€è¦ä»å¯¹è±¡è½¬æ¢æˆäºŒè¿›åˆ¶æµï¼Œé€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œä¼ é€åˆ°å¯¹æ–¹æœåŠ¡ï¼Œå†è½¬æ¢å›å¯¹è±¡ï¼Œä¾›æœåŠ¡æ–¹æ³•è°ƒç”¨ã€‚<strong>è¿™ä¸ªç¼–ç å’Œè§£ç è¿‡ç¨‹æˆ‘ä»¬ç§°ä¹‹ä¸ºåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚</strong></p><p>åœ¨å¤§é‡å¹¶å‘è¯·æ±‚çš„æƒ…å†µä¸‹ï¼Œå¦‚æœåºåˆ—åŒ–çš„é€Ÿåº¦æ…¢ï¼Œä¼šå¯¼è‡´è¯·æ±‚å“åº”æ—¶é—´å¢åŠ ï¼›è€Œåºåˆ—åŒ–åçš„ä¼ è¾“æ•°æ®ä½“ç§¯å¤§ï¼Œä¼šå¯¼è‡´ç½‘ç»œååé‡ä¸‹é™ã€‚æ‰€ä»¥ä¸€ä¸ªä¼˜ç§€çš„åºåˆ—åŒ–æ¡†æ¶å¯ä»¥æé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒJavaæä¾›äº†RMIæ¡†æ¶å¯ä»¥å®ç°æœåŠ¡ä¸æœåŠ¡ä¹‹é—´çš„æ¥å£æš´éœ²å’Œè°ƒç”¨ï¼ŒRMIä¸­å¯¹æ•°æ®å¯¹è±¡çš„åºåˆ—åŒ–é‡‡ç”¨çš„æ˜¯Javaåºåˆ—åŒ–ã€‚<span class=\"orange\">è€Œç›®å‰ä¸»æµçš„å¾®æœåŠ¡æ¡†æ¶å´å‡ ä¹æ²¡æœ‰ç”¨åˆ°Javaåºåˆ—åŒ–ï¼ŒSpringCloudç”¨çš„æ˜¯Jsonåºåˆ—åŒ–ï¼ŒDubboè™½ç„¶å…¼å®¹äº†Javaåºåˆ—åŒ–ï¼Œä½†é»˜è®¤ä½¿ç”¨çš„æ˜¯Hessianåºåˆ—åŒ–ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</span></p><p>ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±å…¥äº†è§£ä¸‹Javaåºåˆ—åŒ–ï¼Œå†å¯¹æ¯”è¿‘ä¸¤å¹´æ¯”è¾ƒç«çš„Protobufåºåˆ—åŒ–ï¼Œçœ‹çœ‹Protobufæ˜¯å¦‚ä½•å®ç°æœ€ä¼˜åºåˆ—åŒ–çš„ã€‚</p><h2>Javaåºåˆ—åŒ–</h2><p>åœ¨è¯´ç¼ºé™·ä¹‹å‰ï¼Œä½ å…ˆå¾—çŸ¥é“ä»€ä¹ˆæ˜¯Javaåºåˆ—åŒ–ä»¥åŠå®ƒçš„å®ç°åŸç†ã€‚</p><!-- [[[read_end]]] --><p>Javaæä¾›äº†ä¸€ç§åºåˆ—åŒ–æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶èƒ½å¤Ÿå°†ä¸€ä¸ªå¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶å½¢å¼ï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ï¼Œç”¨äºå†™å…¥ç£ç›˜æˆ–è¾“å‡ºåˆ°ç½‘ç»œï¼ŒåŒæ—¶ä¹Ÿèƒ½ä»ç½‘ç»œæˆ–ç£ç›˜ä¸­è¯»å–å­—èŠ‚æ•°ç»„ï¼Œååºåˆ—åŒ–æˆå¯¹è±¡ï¼Œåœ¨ç¨‹åºä¸­ä½¿ç”¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/bd/e2/bd4bc4b2746f4b005ca26042412f4ee2.png?wh=3255*439\" alt=\"\"></p><p>JDKæä¾›çš„ä¸¤ä¸ªè¾“å…¥ã€è¾“å‡ºæµå¯¹è±¡ObjectInputStreamå’ŒObjectOutputStreamï¼Œå®ƒä»¬åªèƒ½å¯¹å®ç°äº†Serializableæ¥å£çš„ç±»çš„å¯¹è±¡è¿›è¡Œååºåˆ—åŒ–å’Œåºåˆ—åŒ–ã€‚</p><p>ObjectOutputStreamçš„é»˜è®¤åºåˆ—åŒ–æ–¹å¼ï¼Œä»…å¯¹å¯¹è±¡çš„étransientçš„å®ä¾‹å˜é‡è¿›è¡Œåºåˆ—åŒ–ï¼Œè€Œä¸ä¼šåºåˆ—åŒ–å¯¹è±¡çš„transientçš„å®ä¾‹å˜é‡ï¼Œä¹Ÿä¸ä¼šåºåˆ—åŒ–é™æ€å˜é‡ã€‚</p><p>åœ¨å®ç°äº†Serializableæ¥å£çš„ç±»çš„å¯¹è±¡ä¸­ï¼Œä¼šç”Ÿæˆä¸€ä¸ªserialVersionUIDçš„ç‰ˆæœ¬å·ï¼Œè¿™ä¸ªç‰ˆæœ¬å·æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå®ƒä¼šåœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­æ¥éªŒè¯åºåˆ—åŒ–å¯¹è±¡æ˜¯å¦åŠ è½½äº†ååºåˆ—åŒ–çš„ç±»ï¼Œå¦‚æœæ˜¯å…·æœ‰ç›¸åŒç±»åçš„ä¸åŒç‰ˆæœ¬å·çš„ç±»ï¼Œåœ¨ååºåˆ—åŒ–ä¸­æ˜¯æ— æ³•è·å–å¯¹è±¡çš„ã€‚</p><p>å…·ä½“å®ç°åºåˆ—åŒ–çš„æ˜¯writeObjectå’ŒreadObjectï¼Œé€šå¸¸è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯é»˜è®¤çš„ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å®ç°Serializableæ¥å£çš„ç±»ä¸­å¯¹å…¶è¿›è¡Œé‡å†™ï¼Œå®šåˆ¶ä¸€å¥—å±äºè‡ªå·±çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æœºåˆ¶ã€‚</p><p>å¦å¤–ï¼ŒJavaåºåˆ—åŒ–çš„ç±»ä¸­è¿˜å®šä¹‰äº†ä¸¤ä¸ªé‡å†™æ–¹æ³•ï¼šwriteReplace()å’ŒreadResolve()ï¼Œå‰è€…æ˜¯ç”¨æ¥åœ¨åºåˆ—åŒ–ä¹‹å‰æ›¿æ¢åºåˆ—åŒ–å¯¹è±¡çš„ï¼Œåè€…æ˜¯ç”¨æ¥åœ¨ååºåˆ—åŒ–ä¹‹åå¯¹è¿”å›å¯¹è±¡è¿›è¡Œå¤„ç†çš„ã€‚</p><h2>Javaåºåˆ—åŒ–çš„ç¼ºé™·</h2><p>å¦‚æœä½ ç”¨è¿‡ä¸€äº›RPCé€šä¿¡æ¡†æ¶ï¼Œä½ å°±ä¼šå‘ç°è¿™äº›æ¡†æ¶å¾ˆå°‘ä½¿ç”¨JDKæä¾›çš„åºåˆ—åŒ–ã€‚å…¶å®ä¸ç”¨å’Œä¸å¥½ç”¨å¤šåŠæ˜¯æŒ‚é’©çš„ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹çœ‹JDKé»˜è®¤çš„åºåˆ—åŒ–åˆ°åº•å­˜åœ¨ç€å“ªäº›ç¼ºé™·ã€‚</p><h3>1.æ— æ³•è·¨è¯­è¨€</h3><p>ç°åœ¨çš„ç³»ç»Ÿè®¾è®¡è¶Šæ¥è¶Šå¤šå…ƒåŒ–ï¼Œå¾ˆå¤šç³»ç»Ÿéƒ½ä½¿ç”¨äº†å¤šç§è¯­è¨€æ¥ç¼–å†™åº”ç”¨ç¨‹åºã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å…¬å¸å¼€å‘çš„ä¸€äº›å¤§å‹æ¸¸æˆå°±ä½¿ç”¨äº†å¤šç§è¯­è¨€ï¼ŒC++å†™æ¸¸æˆæœåŠ¡ï¼ŒJava/Goå†™å‘¨è¾¹æœåŠ¡ï¼ŒPythonå†™ä¸€äº›ç›‘æ§åº”ç”¨ã€‚</p><p>è€ŒJavaåºåˆ—åŒ–ç›®å‰åªé€‚ç”¨åŸºäºJavaè¯­è¨€å®ç°çš„æ¡†æ¶ï¼Œå…¶å®ƒè¯­è¨€å¤§éƒ¨åˆ†éƒ½æ²¡æœ‰ä½¿ç”¨Javaçš„åºåˆ—åŒ–æ¡†æ¶ï¼Œä¹Ÿæ²¡æœ‰å®ç°Javaåºåˆ—åŒ–è¿™å¥—åè®®ã€‚å› æ­¤ï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªåŸºäºä¸åŒè¯­è¨€ç¼–å†™çš„åº”ç”¨ç¨‹åºç›¸äº’é€šä¿¡ï¼Œåˆ™æ— æ³•å®ç°ä¸¤ä¸ªåº”ç”¨æœåŠ¡ä¹‹é—´ä¼ è¾“å¯¹è±¡çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚</p><h3>2.æ˜“è¢«æ”»å‡»</h3><p>Javaå®˜ç½‘å®‰å…¨ç¼–ç æŒ‡å¯¼æ–¹é’ˆä¸­è¯´æ˜ï¼šâ€œå¯¹ä¸ä¿¡ä»»æ•°æ®çš„ååºåˆ—åŒ–ï¼Œä»æœ¬è´¨ä¸Šæ¥è¯´æ˜¯å±é™©çš„ï¼Œåº”è¯¥äºˆä»¥é¿å…â€ã€‚å¯è§Javaåºåˆ—åŒ–æ˜¯ä¸å®‰å…¨çš„ã€‚</p><p>æˆ‘ä»¬çŸ¥é“å¯¹è±¡æ˜¯é€šè¿‡åœ¨ObjectInputStreamä¸Šè°ƒç”¨readObject()æ–¹æ³•è¿›è¡Œååºåˆ—åŒ–çš„ï¼Œè¿™ä¸ªæ–¹æ³•å…¶å®æ˜¯ä¸€ä¸ªç¥å¥‡çš„æ„é€ å™¨ï¼Œå®ƒå¯ä»¥å°†ç±»è·¯å¾„ä¸Šå‡ ä¹æ‰€æœ‰å®ç°äº†Serializableæ¥å£çš„å¯¹è±¡éƒ½å®ä¾‹åŒ–ã€‚</p><p>è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œåœ¨ååºåˆ—åŒ–å­—èŠ‚æµçš„è¿‡ç¨‹ä¸­ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ‰§è¡Œä»»æ„ç±»å‹çš„ä»£ç ï¼Œè¿™æ˜¯éå¸¸å±é™©çš„ã€‚</p><p>å¯¹äºéœ€è¦é•¿æ—¶é—´è¿›è¡Œååºåˆ—åŒ–çš„å¯¹è±¡ï¼Œä¸éœ€è¦æ‰§è¡Œä»»ä½•ä»£ç ï¼Œä¹Ÿå¯ä»¥å‘èµ·ä¸€æ¬¡æ”»å‡»ã€‚æ”»å‡»è€…å¯ä»¥åˆ›å»ºå¾ªç¯å¯¹è±¡é“¾ï¼Œç„¶åå°†åºåˆ—åŒ–åçš„å¯¹è±¡ä¼ è¾“åˆ°ç¨‹åºä¸­ååºåˆ—åŒ–ï¼Œè¿™ç§æƒ…å†µä¼šå¯¼è‡´hashCodeæ–¹æ³•è¢«è°ƒç”¨æ¬¡æ•°å‘ˆæ¬¡æ–¹çˆ†å‘å¼å¢é•¿, ä»è€Œå¼•å‘æ ˆæº¢å‡ºå¼‚å¸¸ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªæ¡ˆä¾‹å°±å¯ä»¥å¾ˆå¥½åœ°è¯´æ˜ã€‚</p><pre><code>Set root = new HashSet();  \nSet s1 = root;  \nSet s2 = new HashSet();  \nfor (int i = 0; i &lt; 100; i++) {  \n   Set t1 = new HashSet();  \n   Set t2 = new HashSet();  \n   t1.add(&quot;foo&quot;); //ä½¿t2ä¸ç­‰äºt1  \n   s1.add(t1);  \n   s1.add(t2);  \n   s2.add(t1);  \n   s2.add(t2);  \n   s1 = t1;  \n   s2 = t2;   \n} \n</code></pre><p>2015å¹´FoxGlove Securityå®‰å…¨å›¢é˜Ÿçš„breenmachineå‘å¸ƒè¿‡ä¸€ç¯‡é•¿åšå®¢ï¼Œä¸»è¦å†…å®¹æ˜¯ï¼šé€šè¿‡Apache Commons Collectionsï¼ŒJavaååºåˆ—åŒ–æ¼æ´å¯ä»¥å®ç°æ”»å‡»ã€‚ä¸€åº¦æ¨ªæ‰«äº†WebLogicã€WebSphereã€JBossã€Jenkinsã€OpenNMSçš„æœ€æ–°ç‰ˆï¼Œå„å¤§Java Web Serverçº·çº·èººæªã€‚</p><p>å…¶å®ï¼ŒApache Commons Collectionså°±æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åŸºç¡€åº“ï¼Œå®ƒæ‰©å±•äº†Javaæ ‡å‡†åº“é‡Œçš„Collectionç»“æ„ï¼Œæä¾›äº†å¾ˆå¤šå¼ºæœ‰åŠ›çš„æ•°æ®ç»“æ„ç±»å‹ï¼Œå¹¶ä¸”å®ç°äº†å„ç§é›†åˆå·¥å…·ç±»ã€‚</p><p>å®ç°æ”»å‡»çš„åŸç†å°±æ˜¯ï¼šApache Commons Collectionså…è®¸é“¾å¼çš„ä»»æ„çš„ç±»å‡½æ•°åå°„è°ƒç”¨ï¼Œæ”»å‡»è€…é€šè¿‡â€œå®ç°äº†Javaåºåˆ—åŒ–åè®®â€çš„ç«¯å£ï¼ŒæŠŠæ”»å‡»ä»£ç ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Œå†ç”±Apache Commons Collectionsé‡Œçš„TransformedMapæ¥æ‰§è¡Œã€‚</p><p><strong>é‚£ä¹ˆåæ¥æ˜¯å¦‚ä½•è§£å†³è¿™ä¸ªæ¼æ´çš„å‘¢ï¼Ÿ</strong></p><p>å¾ˆå¤šåºåˆ—åŒ–åè®®éƒ½åˆ¶å®šäº†ä¸€å¥—æ•°æ®ç»“æ„æ¥ä¿å­˜å’Œè·å–å¯¹è±¡ã€‚ä¾‹å¦‚ï¼ŒJSONåºåˆ—åŒ–ã€ProtocolBufç­‰ï¼Œå®ƒä»¬åªæ”¯æŒä¸€äº›åŸºæœ¬ç±»å‹å’Œæ•°ç»„æ•°æ®ç±»å‹ï¼Œè¿™æ ·å¯ä»¥é¿å…ååºåˆ—åŒ–åˆ›å»ºä¸€äº›ä¸ç¡®å®šçš„å®ä¾‹ã€‚è™½ç„¶å®ƒä»¬çš„è®¾è®¡ç®€å•ï¼Œä½†è¶³ä»¥æ»¡è¶³å½“å‰å¤§éƒ¨åˆ†ç³»ç»Ÿçš„æ•°æ®ä¼ è¾“éœ€æ±‚ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ååºåˆ—åŒ–å¯¹è±¡ç™½åå•æ¥æ§åˆ¶ååºåˆ—åŒ–å¯¹è±¡ï¼Œå¯ä»¥é‡å†™resolveClassæ–¹æ³•ï¼Œå¹¶åœ¨è¯¥æ–¹æ³•ä¸­æ ¡éªŒå¯¹è±¡åå­—ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>@Override\nprotected Class resolveClass(ObjectStreamClass desc) throws IOException,ClassNotFoundException {\nif (!desc.getName().equals(Bicycle.class.getName())) {\n\nthrow new InvalidClassException(\n&quot;Unauthorized deserialization attempt&quot;, desc.getName());\n}\nreturn super.resolveClass(desc);\n}\n</code></pre><h3>3.åºåˆ—åŒ–åçš„æµå¤ªå¤§</h3><p>åºåˆ—åŒ–åçš„äºŒè¿›åˆ¶æµå¤§å°èƒ½ä½“ç°åºåˆ—åŒ–çš„æ€§èƒ½ã€‚åºåˆ—åŒ–åçš„äºŒè¿›åˆ¶æ•°ç»„è¶Šå¤§ï¼Œå ç”¨çš„å­˜å‚¨ç©ºé—´å°±è¶Šå¤šï¼Œå­˜å‚¨ç¡¬ä»¶çš„æˆæœ¬å°±è¶Šé«˜ã€‚å¦‚æœæˆ‘ä»¬æ˜¯è¿›è¡Œç½‘ç»œä¼ è¾“ï¼Œåˆ™å ç”¨çš„å¸¦å®½å°±æ›´å¤šï¼Œè¿™æ—¶å°±ä¼šå½±å“åˆ°ç³»ç»Ÿçš„ååé‡ã€‚</p><p>Javaåºåˆ—åŒ–ä¸­ä½¿ç”¨äº†ObjectOutputStreamæ¥å®ç°å¯¹è±¡è½¬äºŒè¿›åˆ¶ç¼–ç ï¼Œé‚£ä¹ˆè¿™ç§åºåˆ—åŒ–æœºåˆ¶å®ç°çš„äºŒè¿›åˆ¶ç¼–ç å®Œæˆçš„äºŒè¿›åˆ¶æ•°ç»„å¤§å°ï¼Œç›¸æ¯”äºNIOä¸­çš„ByteBufferå®ç°çš„äºŒè¿›åˆ¶ç¼–ç å®Œæˆçš„æ•°ç»„å¤§å°ï¼Œæœ‰æ²¡æœ‰åŒºåˆ«å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥éªŒè¯ä¸‹ï¼š</p><pre><code>User user = new User();\n    \tuser.setUserName(&quot;test&quot;);\n    \tuser.setPassword(&quot;test&quot;);\n    \t\n    \tByteArrayOutputStream os =new ByteArrayOutputStream();\n    \tObjectOutputStream out = new ObjectOutputStream(os);\n    \tout.writeObject(user);\n    \t\n    \tbyte[] testByte = os.toByteArray();\n    \tSystem.out.print(&quot;ObjectOutputStream å­—èŠ‚ç¼–ç é•¿åº¦ï¼š&quot; + testByte.length + &quot;\\n&quot;);\n</code></pre><pre><code>  ByteBuffer byteBuffer = ByteBuffer.allocate( 2048);\n\n        byte[] userName = user.getUserName().getBytes();\n        byte[] password = user.getPassword().getBytes();\n        byteBuffer.putInt(userName.length);\n        byteBuffer.put(userName);\n        byteBuffer.putInt(password.length);\n        byteBuffer.put(password);\n        \n        byteBuffer.flip();\n        byte[] bytes = new byte[byteBuffer.remaining()];\n    \tSystem.out.print(&quot;ByteBuffer å­—èŠ‚ç¼–ç é•¿åº¦ï¼š&quot; + bytes.length+ &quot;\\n&quot;);\n\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>ObjectOutputStream å­—èŠ‚ç¼–ç é•¿åº¦ï¼š99\nByteBuffer å­—èŠ‚ç¼–ç é•¿åº¦ï¼š16\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼šJavaåºåˆ—åŒ–å®ç°çš„äºŒè¿›åˆ¶ç¼–ç å®Œæˆçš„äºŒè¿›åˆ¶æ•°ç»„å¤§å°ï¼Œæ¯”ByteBufferå®ç°çš„äºŒè¿›åˆ¶ç¼–ç å®Œæˆçš„äºŒè¿›åˆ¶æ•°ç»„å¤§å°è¦å¤§ä¸Šå‡ å€ã€‚å› æ­¤ï¼ŒJavaåºåˆ—åçš„æµä¼šå˜å¤§ï¼Œæœ€ç»ˆä¼šå½±å“åˆ°ç³»ç»Ÿçš„ååé‡ã€‚</p><h3>4.åºåˆ—åŒ–æ€§èƒ½å¤ªå·®</h3><p>åºåˆ—åŒ–çš„é€Ÿåº¦ä¹Ÿæ˜¯ä½“ç°åºåˆ—åŒ–æ€§èƒ½çš„é‡è¦æŒ‡æ ‡ï¼Œå¦‚æœåºåˆ—åŒ–çš„é€Ÿåº¦æ…¢ï¼Œå°±ä¼šå½±å“ç½‘ç»œé€šä¿¡çš„æ•ˆç‡ï¼Œä»è€Œå¢åŠ ç³»ç»Ÿçš„å“åº”æ—¶é—´ã€‚æˆ‘ä»¬å†æ¥é€šè¿‡ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œæ¥å¯¹æ¯”ä¸‹Javaåºåˆ—åŒ–ä¸NIOä¸­çš„ByteBufferç¼–ç çš„æ€§èƒ½ï¼š</p><pre><code>\tUser user = new User();\n    \tuser.setUserName(&quot;test&quot;);\n    \tuser.setPassword(&quot;test&quot;);\n    \t\n    \tlong startTime = System.currentTimeMillis();\n    \t\n    \tfor(int i=0; i&lt;1000; i++) {\n    \t\tByteArrayOutputStream os =new ByteArrayOutputStream();\n        \tObjectOutputStream out = new ObjectOutputStream(os);\n        \tout.writeObject(user);\n        \tout.flush();\n        \tout.close();\n        \tbyte[] testByte = os.toByteArray();\n        \tos.close();\n    \t}\n    \n    \t\n    \tlong endTime = System.currentTimeMillis();\n    \tSystem.out.print(&quot;ObjectOutputStream åºåˆ—åŒ–æ—¶é—´ï¼š&quot; + (endTime - startTime) + &quot;\\n&quot;);\n</code></pre><pre><code>long startTime1 = System.currentTimeMillis();\n    \tfor(int i=0; i&lt;1000; i++) {\n    \t\tByteBuffer byteBuffer = ByteBuffer.allocate( 2048);\n\n            byte[] userName = user.getUserName().getBytes();\n            byte[] password = user.getPassword().getBytes();\n            byteBuffer.putInt(userName.length);\n            byteBuffer.put(userName);\n            byteBuffer.putInt(password.length);\n            byteBuffer.put(password);\n            \n            byteBuffer.flip();\n            byte[] bytes = new byte[byteBuffer.remaining()];\n    \t}\n    \tlong endTime1 = System.currentTimeMillis();\n    \tSystem.out.print(&quot;ByteBuffer åºåˆ—åŒ–æ—¶é—´ï¼š&quot; + (endTime1 - startTime1)+ &quot;\\n&quot;);\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>ObjectOutputStream åºåˆ—åŒ–æ—¶é—´ï¼š29\nByteBuffer åºåˆ—åŒ–æ—¶é—´ï¼š6\n</code></pre><p>é€šè¿‡ä»¥ä¸Šæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼šJavaåºåˆ—åŒ–ä¸­çš„ç¼–ç è€—æ—¶è¦æ¯”ByteBufferé•¿å¾ˆå¤šã€‚</p><h2>ä½¿ç”¨Protobufåºåˆ—åŒ–æ›¿æ¢Javaåºåˆ—åŒ–</h2><p>ç›®å‰ä¸šå†…ä¼˜ç§€çš„åºåˆ—åŒ–æ¡†æ¶æœ‰å¾ˆå¤šï¼Œè€Œä¸”å¤§éƒ¨åˆ†éƒ½é¿å…äº†Javaé»˜è®¤åºåˆ—åŒ–çš„ä¸€äº›ç¼ºé™·ã€‚ä¾‹å¦‚ï¼Œæœ€è¿‘å‡ å¹´æ¯”è¾ƒæµè¡Œçš„FastJsonã€Kryoã€Protobufã€Hessianç­‰ã€‚<strong>æˆ‘ä»¬å®Œå…¨å¯ä»¥æ‰¾ä¸€ç§æ›¿æ¢æ‰Javaåºåˆ—åŒ–ï¼Œè¿™é‡Œæˆ‘æ¨èä½¿ç”¨Protobufåºåˆ—åŒ–æ¡†æ¶ã€‚</strong></p><p>Protobufæ˜¯ç”±Googleæ¨å‡ºä¸”æ”¯æŒå¤šè¯­è¨€çš„åºåˆ—åŒ–æ¡†æ¶ï¼Œç›®å‰åœ¨ä¸»æµç½‘ç«™ä¸Šçš„åºåˆ—åŒ–æ¡†æ¶æ€§èƒ½å¯¹æ¯”æµ‹è¯•æŠ¥å‘Šä¸­ï¼ŒProtobufæ— è®ºæ˜¯ç¼–è§£ç è€—æ—¶ï¼Œè¿˜æ˜¯äºŒè¿›åˆ¶æµå‹ç¼©å¤§å°ï¼Œéƒ½ååˆ—å‰èŒ…ã€‚</p><p>Protobufä»¥ä¸€ä¸ª .proto åç¼€çš„æ–‡ä»¶ä¸ºåŸºç¡€ï¼Œè¿™ä¸ªæ–‡ä»¶æè¿°äº†å­—æ®µä»¥åŠå­—æ®µç±»å‹ï¼Œé€šè¿‡å·¥å…·å¯ä»¥ç”Ÿæˆä¸åŒè¯­è¨€çš„æ•°æ®ç»“æ„æ–‡ä»¶ã€‚åœ¨åºåˆ—åŒ–è¯¥æ•°æ®å¯¹è±¡çš„æ—¶å€™ï¼ŒProtobufé€šè¿‡.protoæ–‡ä»¶æè¿°æ¥ç”ŸæˆProtocol Buffersæ ¼å¼çš„ç¼–ç ã€‚</p><p><strong>è¿™é‡Œæ‹“å±•ä¸€ç‚¹ï¼Œæˆ‘æ¥è®²ä¸‹ä»€ä¹ˆæ˜¯Protocol Bufferså­˜å‚¨æ ¼å¼ä»¥åŠå®ƒçš„å®ç°åŸç†ã€‚</strong></p><p>Protocol Buffers æ˜¯ä¸€ç§è½»ä¾¿é«˜æ•ˆçš„ç»“æ„åŒ–æ•°æ®å­˜å‚¨æ ¼å¼ã€‚å®ƒä½¿ç”¨T-L-Vï¼ˆæ ‡è¯† - é•¿åº¦ - å­—æ®µå€¼ï¼‰çš„æ•°æ®æ ¼å¼æ¥å­˜å‚¨æ•°æ®ï¼ŒTä»£è¡¨å­—æ®µçš„æ­£æ•°åºåˆ—(tag)ï¼ŒProtocol Buffers å°†å¯¹è±¡ä¸­çš„æ¯ä¸ªå­—æ®µå’Œæ­£æ•°åºåˆ—å¯¹åº”èµ·æ¥ï¼Œå¯¹åº”å…³ç³»çš„ä¿¡æ¯æ˜¯ç”±ç”Ÿæˆçš„ä»£ç æ¥ä¿è¯çš„ã€‚åœ¨åºåˆ—åŒ–çš„æ—¶å€™ç”¨æ•´æ•°å€¼æ¥ä»£æ›¿å­—æ®µåç§°ï¼Œäºæ˜¯ä¼ è¾“æµé‡å°±å¯ä»¥å¤§å¹…ç¼©å‡ï¼›Lä»£è¡¨Valueçš„å­—èŠ‚é•¿åº¦ï¼Œä¸€èˆ¬ä¹Ÿåªå ä¸€ä¸ªå­—èŠ‚ï¼›Våˆ™ä»£è¡¨å­—æ®µå€¼ç»è¿‡ç¼–ç åçš„å€¼ã€‚è¿™ç§æ•°æ®æ ¼å¼ä¸éœ€è¦åˆ†éš”ç¬¦ï¼Œä¹Ÿä¸éœ€è¦ç©ºæ ¼ï¼ŒåŒæ—¶å‡å°‘äº†å†—ä½™å­—æ®µåã€‚</p><p>Protobufå®šä¹‰äº†ä¸€å¥—è‡ªå·±çš„ç¼–ç æ–¹å¼ï¼Œå‡ ä¹å¯ä»¥æ˜ å°„Java/Pythonç­‰è¯­è¨€çš„æ‰€æœ‰åŸºç¡€æ•°æ®ç±»å‹ã€‚ä¸åŒçš„ç¼–ç æ–¹å¼å¯¹åº”ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œè¿˜èƒ½é‡‡ç”¨ä¸åŒçš„å­˜å‚¨æ ¼å¼ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ec/eb/ec0ebe4f622e9edcd9de86cb92f15eeb.jpg?wh=1638*466\" alt=\"\"></p><p>å¯¹äºå­˜å‚¨Varintç¼–ç æ•°æ®ï¼Œç”±äºæ•°æ®å ç”¨çš„å­˜å‚¨ç©ºé—´æ˜¯å›ºå®šçš„ï¼Œå°±ä¸éœ€è¦å­˜å‚¨å­—èŠ‚é•¿åº¦ Lengthï¼Œæ‰€ä»¥å®é™…ä¸ŠProtocol Buffersçš„å­˜å‚¨æ–¹å¼æ˜¯ T - Vï¼Œè¿™æ ·å°±åˆå‡å°‘äº†ä¸€ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚</p><p>Protobufå®šä¹‰çš„Varintç¼–ç æ–¹å¼æ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ï¼Œæ¯ä¸ªå­—èŠ‚çš„æœ€åä¸€ä½(å³æœ€é«˜ä½)æ˜¯ä¸€ä¸ªæ ‡å¿—ä½(msb)ï¼Œç”¨0å’Œ1æ¥è¡¨ç¤ºï¼Œ0è¡¨ç¤ºå½“å‰å­—èŠ‚å·²ç»æ˜¯æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œ1è¡¨ç¤ºè¿™ä¸ªæ•°å­—åé¢è¿˜æœ‰ä¸€ä¸ªå­—èŠ‚ã€‚</p><p>å¯¹äºint32ç±»å‹æ•°å­—ï¼Œä¸€èˆ¬éœ€è¦4ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œè‹¥é‡‡ç”¨Varintç¼–ç æ–¹å¼ï¼Œå¯¹äºå¾ˆå°çš„int32ç±»å‹æ•°å­—ï¼Œå°±å¯ä»¥ç”¨1ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚å¯¹äºå¤§éƒ¨åˆ†æ•´æ•°ç±»å‹æ•°æ®æ¥è¯´ï¼Œä¸€èˆ¬éƒ½æ˜¯å°äº256ï¼Œæ‰€ä»¥è¿™ç§æ“ä½œå¯ä»¥èµ·åˆ°å¾ˆå¥½åœ°å‹ç¼©æ•°æ®çš„æ•ˆæœã€‚</p><p>æˆ‘ä»¬çŸ¥é“int32ä»£è¡¨æ­£è´Ÿæ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬æœ€åä¸€ä½æ˜¯ç”¨æ¥è¡¨ç¤ºæ­£è´Ÿå€¼ï¼Œç°åœ¨Varintç¼–ç æ–¹å¼å°†æœ€åä¸€ä½ç”¨ä½œäº†æ ‡å¿—ä½ï¼Œé‚£è¿˜å¦‚ä½•å»è¡¨ç¤ºæ­£è´Ÿæ•´æ•°å‘¢ï¼Ÿå¦‚æœä½¿ç”¨int32/int64è¡¨ç¤ºè´Ÿæ•°å°±éœ€è¦å¤šä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œåœ¨Varintç¼–ç ç±»å‹ä¸­ï¼Œé€šè¿‡Zigzagç¼–ç è¿›è¡Œè½¬æ¢ï¼Œå°†è´Ÿæ•°è½¬æ¢æˆæ— ç¬¦å·æ•°ï¼Œå†é‡‡ç”¨sint32/sint64æ¥è¡¨ç¤ºè´Ÿæ•°ï¼Œè¿™æ ·å°±å¯ä»¥å¤§å¤§åœ°å‡å°‘ç¼–ç åçš„å­—èŠ‚æ•°ã€‚</p><p>Protobufçš„è¿™ç§æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œä¸ä»…å‹ç¼©å­˜å‚¨æ•°æ®çš„æ•ˆæœå¥½ï¼Œ åœ¨ç¼–ç å’Œè§£ç çš„æ€§èƒ½æ–¹é¢ä¹Ÿå¾ˆé«˜æ•ˆã€‚Protobufçš„ç¼–ç å’Œè§£ç è¿‡ç¨‹ç»“åˆ.protoæ–‡ä»¶æ ¼å¼ï¼ŒåŠ ä¸ŠProtocol Bufferç‹¬ç‰¹çš„ç¼–ç æ ¼å¼ï¼Œåªéœ€è¦ç®€å•çš„æ•°æ®è¿ç®—ä»¥åŠä½ç§»ç­‰æ“ä½œå°±å¯ä»¥å®Œæˆç¼–ç ä¸è§£ç ã€‚å¯ä»¥è¯´Protobufçš„æ•´ä½“æ€§èƒ½éå¸¸ä¼˜ç§€ã€‚</p><h2>æ€»ç»“</h2><p>æ— è®ºæ˜¯ç½‘è·¯ä¼ è¾“è¿˜æ˜¯ç£ç›˜æŒä¹…åŒ–æ•°æ®ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å°†æ•°æ®ç¼–ç æˆå­—èŠ‚ç ï¼Œè€Œæˆ‘ä»¬å¹³æ—¶åœ¨ç¨‹åºä¸­ä½¿ç”¨çš„æ•°æ®éƒ½æ˜¯åŸºäºå†…å­˜çš„æ•°æ®ç±»å‹æˆ–è€…å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ç¼–ç å°†è¿™äº›æ•°æ®è½¬åŒ–æˆäºŒè¿›åˆ¶å­—èŠ‚æµï¼›å¦‚æœéœ€è¦æ¥æ”¶æˆ–è€…å†ä½¿ç”¨æ—¶ï¼Œåˆéœ€è¦é€šè¿‡è§£ç å°†äºŒè¿›åˆ¶å­—èŠ‚æµè½¬æ¢æˆå†…å­˜æ•°æ®ã€‚æˆ‘ä»¬é€šå¸¸å°†è¿™ä¸¤ä¸ªè¿‡ç¨‹ç§°ä¸ºåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚</p><p>Javaé»˜è®¤çš„åºåˆ—åŒ–æ˜¯é€šè¿‡Serializableæ¥å£å®ç°çš„ï¼Œåªè¦ç±»å®ç°äº†è¯¥æ¥å£ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬æ— éœ€æ‰‹åŠ¨è®¾ç½®ï¼Œè¯¥ç±»å°±ä¼šè‡ªåŠ¨å®ç°åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚</p><p>Javaé»˜è®¤çš„åºåˆ—åŒ–è™½ç„¶å®ç°æ–¹ä¾¿ï¼Œä½†å´å­˜åœ¨å®‰å…¨æ¼æ´ã€ä¸è·¨è¯­è¨€ä»¥åŠæ€§èƒ½å·®ç­‰ç¼ºé™·ï¼Œæ‰€ä»¥æˆ‘å¼ºçƒˆå»ºè®®ä½ é¿å…ä½¿ç”¨Javaåºåˆ—åŒ–ã€‚</p><p>çºµè§‚ä¸»æµåºåˆ—åŒ–æ¡†æ¶ï¼ŒFastJsonã€Protobufã€Kryoæ˜¯æ¯”è¾ƒæœ‰ç‰¹ç‚¹çš„ï¼Œè€Œä¸”æ€§èƒ½ä»¥åŠå®‰å…¨æ–¹é¢éƒ½å¾—åˆ°äº†ä¸šç•Œçš„è®¤å¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆè‡ªèº«ä¸šåŠ¡æ¥é€‰æ‹©ä¸€ç§é€‚åˆçš„åºåˆ—åŒ–æ¡†æ¶ï¼Œæ¥ä¼˜åŒ–ç³»ç»Ÿçš„åºåˆ—åŒ–æ€§èƒ½ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨å•ä¾‹æ¨¡å¼å®ç°çš„ç±»ï¼Œå¦‚æœæˆ‘ä»¬å°†è¯¥ç±»å®ç°Javaçš„Serializableæ¥å£ï¼Œå®ƒè¿˜æ˜¯å•ä¾‹å—ï¼Ÿ<span class=\"orange\">å¦‚æœè¦ä½ æ¥å†™ä¸€ä¸ªå®ç°äº†Javaçš„Serializableæ¥å£çš„å•ä¾‹ï¼Œä½ ä¼šæ€ä¹ˆå†™å‘¢ï¼Ÿ</span></p><pre><code>public class Singleton implements Serializable{\n\n    private final static Singleton singleInstance = new Singleton();\n\n    private Singleton(){}\n\n    public static Singleton getInstance(){\n       return singleInstance; \n    }\n}\n</code></pre><p>æœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„è§è§£ã€‚ä¹Ÿæ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€è¯·ä»–ä¸€èµ·å­¦ä¹ ã€‚</p><p></p>","neighbors":{"left":{"article_title":"08 | ç½‘ç»œé€šä¿¡ä¼˜åŒ–ä¹‹I/Oæ¨¡å‹ï¼šå¦‚ä½•è§£å†³é«˜å¹¶å‘ä¸‹I/Oç“¶é¢ˆï¼Ÿ","id":99478},"right":{"article_title":"10 | ç½‘ç»œé€šä¿¡ä¼˜åŒ–ä¹‹é€šä¿¡åè®®ï¼šå¦‚ä½•ä¼˜åŒ–RPCç½‘ç»œé€šä¿¡ï¼Ÿ","id":100355}},"comments":[{"had_liked":false,"id":101742,"user_name":"é™†ç¦»","can_delete":false,"product_type":"c1","uid":1483932,"ip_address":"","ucode":"2C8C206CE36A81","user_header":"https://static001.geekbang.org/account/avatar/00/16/a4/9c/b32ed9e9.jpg","comment_is_top":false,"comment_ctime":1559955763,"is_pvip":false,"replies":[{"id":"36650","content":"å›ç­”æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1559956931,"ip_address":"","comment_id":101742,"utype":1}],"discussion_count":7,"race_medal":0,"score":"418171783475","product_id":100028001,"comment_content":"åºåˆ—åŒ–ä¼šé€šè¿‡åå°„è°ƒç”¨æ— å‚æ„é€ å™¨è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç ´åå•ä¾‹æ¨¡å¼ã€‚<br>è§£å†³æ–¹æ³•æ˜¯æ·»åŠ readResolve()æ–¹æ³•ï¼Œè‡ªå®šä¹‰è¿”å›å¯¹è±¡ç­–ç•¥ã€‚","like_count":98,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453097,"discussion_content":"å›ç­”æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559956931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1204333,"avatar":"https://static001.geekbang.org/account/avatar/00/12/60/6d/e2576fda.jpg","nickname":"Rancood","note":"","ucode":"052BDF2221F480","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417,"discussion_content":"è¿™é‡Œä¸åº”è¯¥æ˜¯ååºåˆ—åŒ–å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561540835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1204947,"avatar":"https://static001.geekbang.org/account/avatar/00/12/62/d3/663de972.jpg","nickname":"æ‡µé€¼çŒ´","note":"","ucode":"BDC748A96AC316","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574372,"discussion_content":"https://stackoverflow.com/questions/8141440/how-are-constructors-called-during-serialization-and-deserialization\nDuring deserialization the accessible default constructor is called for the first class in the inheritance hierarchy that does not implement Serializable.\nåœ¨ååºåˆ—åŒ–çš„æ—¶å€™ï¼Œåœ¨è¢«ååºåˆ—åŒ–ç±»çš„ç»§æ‰¿å±‚æ¬¡ç»“æ„ä¸­ç¬¬ä¸€ä¸ªæœªå®ç° Serializable çš„çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•°å°†ä¼šè¢«è°ƒç”¨ï¼Œå­ç±»éœ€è¦å¯ä»¥è®¿é—®è¿™ä¸ªæœªå®ç°Serializable çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚è¿™ä¸ªå›ç­”æ˜¯æœ‰é—®é¢˜çš„ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654000402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1204947,"avatar":"https://static001.geekbang.org/account/avatar/00/12/62/d3/663de972.jpg","nickname":"æ‡µé€¼çŒ´","note":"","ucode":"BDC748A96AC316","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574368,"discussion_content":"java.io.ObjectInputStream#readObjectååºåˆ—åŒ–ä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653999215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2532285,"avatar":"","nickname":"Geek_926921","note":"","ucode":"51C3B0178D77E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374542,"discussion_content":"å¤§ä½¬ç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621239130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1246882,"avatar":"https://static001.geekbang.org/account/avatar/00/13/06/a2/350c4af0.jpg","nickname":"çŸ¥æ˜“","note":"","ucode":"BD3E3F0F0A40EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351102,"discussion_content":"åˆå­¦åˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614153953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2060756,"avatar":"","nickname":"åœ¨ä¸‹èŸ‘è‚ç‹","note":"","ucode":"E66A65A327095A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332125,"discussion_content":"çœŸç‰›å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607069788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101729,"user_name":"å¯†ç 123456","can_delete":false,"product_type":"c1","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1559947594,"is_pvip":false,"replies":[{"id":"36649","content":"çº¿ä¸Šä»£ç å‘ç”Ÿé”™ä½äº†ï¼Œå·²ä¿®æ­£ã€‚<br><br>å¯¼è‡´è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯åºåˆ—åŒ–ä¸­çš„readObjectä¼šé€šè¿‡åå°„ï¼Œè°ƒç”¨æ²¡æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚<br><br>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¢«åºåˆ—åŒ–ç±»ä¸­é‡å†™readResolveæ–¹æ³•ã€‚<br><br>private Object readResolve(){<br>        return singleInstance;<br>}","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1559956892,"ip_address":"","comment_id":101729,"utype":1}],"discussion_count":6,"race_medal":0,"score":"96049228106","product_id":100028001,"comment_content":"çœ‹åˆ°æé—®ï¼Œæ‰å‘ç°è¿™ç«Ÿç„¶ä¸æ˜¯å•ä¾‹ã€‚å›æƒ³å†…å®¹æ˜¯å› ä¸ºã€‚å¯ä»¥æŠŠç±»è·¯å¾„ä¸Šå‡ ä¹æ‰€æœ‰å®ç°äº† Serializable æ¥å£çš„å¯¹è±¡éƒ½å®ä¾‹åŒ–ã€‚è¿˜çœŸä¸çŸ¥é“æ€ä¹ˆå†™ï¼Ÿå†…éƒ¨ç§æœ‰ç±»å®ç°ï¼Œè¿™ç§å¯ä»¥å—ï¼Ÿ","like_count":23,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453088,"discussion_content":"çº¿ä¸Šä»£ç å‘ç”Ÿé”™ä½äº†ï¼Œå·²ä¿®æ­£ã€‚\n\nå¯¼è‡´è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯åºåˆ—åŒ–ä¸­çš„readObjectä¼šé€šè¿‡åå°„ï¼Œè°ƒç”¨æ²¡æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚\n\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¢«åºåˆ—åŒ–ç±»ä¸­é‡å†™readResolveæ–¹æ³•ã€‚\n\nprivate Object readResolve(){\n        return singleInstance;\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559956892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1297421,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cc/0d/89435926.jpg","nickname":"10å¹´ä»¥å","note":"","ucode":"FE58CA7E5C2AF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216795,"discussion_content":"æ‰“å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585486267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1242455,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","nickname":"å¤©å¤©å‘ä¸Š","note":"","ucode":"0CCCA6F4DCC480","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":103782,"discussion_content":"æˆ‘åœ¨ç§æœ‰æ„é€ æ–¹æ³•ä¸ŠåŠ äº†æ‰“å°çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ååºåˆ—åŒ–çš„æ—¶å€™æ²¡æœ‰æ‰“å°å•Šï¼Œé‚£å°±è¡¨ç¤ºæ²¡æœ‰è°ƒç”¨æ— å‚æ„é€ æ–¹æ³•å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577378725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1204947,"avatar":"https://static001.geekbang.org/account/avatar/00/12/62/d3/663de972.jpg","nickname":"æ‡µé€¼çŒ´","note":"","ucode":"BDC748A96AC316","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1242455,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","nickname":"å¤©å¤©å‘ä¸Š","note":"","ucode":"0CCCA6F4DCC480","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574369,"discussion_content":"ç½‘ä¸Šçœ‹åˆ°JAVAçš„ååºåˆ—åŒ–æ˜¯ä¸ä¼šè°ƒç”¨æ„é€ å™¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653999657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":103782,"ip_address":""},"score":574369,"extra":""}]},{"author":{"id":1242455,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","nickname":"å¤©å¤©å‘ä¸Š","note":"","ucode":"0CCCA6F4DCC480","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":103779,"discussion_content":"å¯æ˜¯æ— å‚æ„é€ å‡½æ•°ä¸æ˜¯å·²ç»ç§æœ‰äº†å—ï¼Œè¿˜èƒ½æ€ä¹ˆè°ƒç”¨å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577378129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1087945,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/c9/a7c77746.jpg","nickname":"å†°æ¿€å‡Œçš„çœ¼æ³ª","note":"","ucode":"5DCB974667E93A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1242455,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","nickname":"å¤©å¤©å‘ä¸Š","note":"","ucode":"0CCCA6F4DCC480","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":157756,"discussion_content":"è¿è¡ŒæœŸå¯ä»¥çªç ´è¿™ä¸ªè®¿é—®é™åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580517714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":103779,"ip_address":""},"score":157756,"extra":""}]}]},{"had_liked":false,"id":167158,"user_name":"å½¦å³°ä½ è¦åŠ æ²¹å•Šï¼","can_delete":false,"product_type":"c1","uid":1664020,"ip_address":"","ucode":"756E46DA81715D","user_header":"https://static001.geekbang.org/account/avatar/00/19/64/14/2f3263e3.jpg","comment_is_top":false,"comment_ctime":1577701850,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"40232407514","product_id":100028001,"comment_content":"ç¨å¾®çœ‹äº†ä¸‹è¯„è®º,è§£å†³æ–¹æ³•æ˜¯åœ¨è¢«åºåˆ—åŒ–ç±»ä¸­é‡å†™readResolveæ–¹æ³•, ä½†æ˜¯é€šè¿‡Jdkæºç å¯ä»¥çœ‹å‡º,è™½ç„¶readResolveæ–¹æ³•è¿”å›å®ä¾‹è§£å†³äº†å•ä¾‹æ¨¡å¼è¢«ç ´åçš„é—®é¢˜, ä½†å®é™…ä¸Šè¿˜æ˜¯å®ä¾‹åŒ–äº†ä¸¤æ¬¡,åªä¸è¿‡æ–°åˆ›å»ºçš„å¯¹è±¡æ²¡æœ‰è¢«è¿”å›è€Œå·².  <br>å¦‚æœåˆ›å»ºå¯¹è±¡çš„åŠ¨ä½œå‘ç”Ÿé¢‘ç‡åŠ å¿«,å°±æ„å‘³ç€å†…å­˜åˆ†é…å¼€é”€ä¹Ÿä¼šéšä¹‹å¢å¤§,åº”è¯¥ä½¿ç”¨æ³¨å†Œå¼å•ä¾‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜.","like_count":10,"discussions":[{"author":{"id":2662844,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL3xax4aG4h59x50C7LQ5K7BicvIEicakyfE0lV4Pyib6OsYc1jC7Qa37g2v8qhib5BQiaB2DfB4DMG5Cw/132","nickname":"èŠ±èŠ±ä¸–ç•Œå°äººç‰©","note":"","ucode":"3E995D63845C06","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561155,"discussion_content":"æ³¨å†Œå¼å®ç°å•ä¾‹è¿˜èƒ½åºåˆ—åŒ–å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649562702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022411,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/cb/8964faab.jpg","nickname":"-åªæ˜¯å°å°é…è§’_","note":"","ucode":"EFC1CD54A23F39","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372081,"discussion_content":"å¯¹äºæ³¨å†Œå¼ï¼Œæˆ–è€…æ‡’æ±‰å¼çš„å•ä¾‹ä¹Ÿå¯ä»¥å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620180294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1232984,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d0/58/ac40120f.jpg","nickname":"biubiubiu","note":"","ucode":"3310E95533D22B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281236,"discussion_content":"å¤ªå¼ºäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591697964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1555565,"avatar":"https://static001.geekbang.org/account/avatar/00/17/bc/6d/f6f0a442.jpg","nickname":"æ±¤å°é«˜","note":"","ucode":"D4AB7766273D52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173901,"discussion_content":"çœŸğŸ®ï¼Œè¿™ä¸ªç¡®å®æ˜¯ä¸ªé—®é¢˜ï¼Œè¯·é—®æ³¨å†Œå¼å•ä¾‹æ˜¯æ€æ ·è§£å†³çš„ï¼Ÿèƒ½å¦ç»™ä¸ªdemoï¼Œè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581866056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1664020,"avatar":"https://static001.geekbang.org/account/avatar/00/19/64/14/2f3263e3.jpg","nickname":"å½¦å³°ä½ è¦åŠ æ²¹å•Šï¼","note":"","ucode":"756E46DA81715D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1555565,"avatar":"https://static001.geekbang.org/account/avatar/00/17/bc/6d/f6f0a442.jpg","nickname":"æ±¤å°é«˜","note":"","ucode":"D4AB7766273D52","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302838,"discussion_content":"ç½‘ä¸Šå°±æœ‰å•Šï¼Œæ¯”è¾ƒç®€å•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599043959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":173901,"ip_address":""},"score":302838,"extra":""}]}]},{"had_liked":false,"id":133230,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1568454558,"is_pvip":false,"replies":[{"id":"51103","content":"åœ¨Classç±»æ–‡ä»¶ä¸­é»˜è®¤ä¼šæœ‰ä¸€ä¸ªserialNoä½œä¸ºåºåˆ—åŒ–å¯¹è±¡çš„ç‰ˆæœ¬å·ï¼Œæ— è®ºåœ¨åºåˆ—åŒ–æ–¹è¿˜æ˜¯åœ¨ååºåˆ—åŒ–æ–¹çš„classç±»æ–‡ä»¶ä¸­éƒ½å­˜åœ¨ä¸€ä¸ªé»˜è®¤åºåˆ—å·ï¼Œåœ¨åºåˆ—åŒ–æ—¶ï¼Œä¼šå°†è¯¥ç‰ˆæœ¬å·åŠ è½½è¿›å»ï¼Œåœ¨ååºåˆ—åŒ–æ—¶ï¼Œä¼šæ ¡éªŒè¯¥ç‰ˆæœ¬å·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568532627,"ip_address":"","comment_id":133230,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35928192926","product_id":100028001,"comment_content":" å®ƒä¼šåœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­æ¥éªŒè¯åºåˆ—åŒ–å¯¹è±¡æ˜¯å¦åŠ è½½äº†ååºåˆ—åŒ–çš„ç±»ï¼Œå¦‚æœæ˜¯å…·æœ‰ç›¸åŒç±»åçš„ä¸åŒç‰ˆæœ¬å·çš„ç±»ï¼Œåœ¨ååºåˆ—åŒ–ä¸­æ˜¯æ— æ³•è·å–å¯¹è±¡çš„ã€‚è€å¸ˆï¼Œè¿™å¥è¯èƒ½ä¸¾ä¸ªä¾‹å­ä¹ˆï¼Œæ²¡å¤ªæ˜ç™½","like_count":9,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467307,"discussion_content":"åœ¨Classç±»æ–‡ä»¶ä¸­é»˜è®¤ä¼šæœ‰ä¸€ä¸ªserialNoä½œä¸ºåºåˆ—åŒ–å¯¹è±¡çš„ç‰ˆæœ¬å·ï¼Œæ— è®ºåœ¨åºåˆ—åŒ–æ–¹è¿˜æ˜¯åœ¨ååºåˆ—åŒ–æ–¹çš„classç±»æ–‡ä»¶ä¸­éƒ½å­˜åœ¨ä¸€ä¸ªé»˜è®¤åºåˆ—å·ï¼Œåœ¨åºåˆ—åŒ–æ—¶ï¼Œä¼šå°†è¯¥ç‰ˆæœ¬å·åŠ è½½è¿›å»ï¼Œåœ¨ååºåˆ—åŒ–æ—¶ï¼Œä¼šæ ¡éªŒè¯¥ç‰ˆæœ¬å·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568532627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105290,"user_name":"å¼ºå“¥","can_delete":false,"product_type":"c1","uid":1206726,"ip_address":"","ucode":"3B8DC780FE4EF9","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/c6/513df085.jpg","comment_is_top":false,"comment_ctime":1560955375,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31625726447","product_id":100028001,"comment_content":"é¦–å…ˆä¸ºä»€ä¹ˆå•ä¾‹è¦å®ç°Serializableæ¥å£å‘¢ï¼Ÿå¦‚æœæœ¬èº«å°±ä¸åˆç†ï¼Œé‚£ç›´æ¥åˆ æ‰Serializableå³å¯ï¼Œæ²¡å¿…è¦ä¸ºäº†æœ¬èº«çš„ä¸åˆç†ï¼Œæ·»åŠ å¤šä½™çš„æ–¹æ³•ï¼Œé™¤éæœ‰ç‰¹æ®Šåœºæ™¯ï¼Œå¦åˆ™è¿™ä¹ˆè¿™æ ·çš„ä»£ç æŒ‡å®šä¼šè¢«ugly","like_count":7},{"had_liked":false,"id":101921,"user_name":"kevin","can_delete":false,"product_type":"c1","uid":1237471,"ip_address":"","ucode":"5F6D82F118C6F6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e1/df/6e6a4c6b.jpg","comment_is_top":false,"comment_ctime":1560054497,"is_pvip":false,"replies":[{"id":"36870","content":"springcloudæ˜¯springç”Ÿæ€ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå°±ç›®å‰springç”Ÿæ€å¾ˆå°‘å¼•å…¥éç”Ÿæ€æ¡†æ¶ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°springcloudå…¼å®¹protobufåºåˆ—åŒ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1560173653,"ip_address":"","comment_id":101921,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31624825569","product_id":100028001,"comment_content":"è€å¸ˆè¯·æ•™ä¸‹ï¼Œä¸ºä»€ä¹ˆspring cloudä¸ä½¿ç”¨protobuf, thriftç­‰æ€§èƒ½æ›´é«˜ã€æ”¯æŒè·¨å¹³å°çš„åºåˆ—åŒ–å·¥å…·ï¼Œè€Œä¸”ä½¿ç”¨jsonï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453174,"discussion_content":"springcloudæ˜¯springç”Ÿæ€ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå°±ç›®å‰springç”Ÿæ€å¾ˆå°‘å¼•å…¥éç”Ÿæ€æ¡†æ¶ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°springcloudå…¼å®¹protobufåºåˆ—åŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560173653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101765,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1559964867,"is_pvip":false,"replies":[{"id":"36864","content":"æ˜¯çš„ï¼ŒJavaåºåˆ—åŒ–ä¼šè°ƒç”¨æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºä¸€ä¸ªæ–°å¯¹è±¡","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1560171989,"ip_address":"","comment_id":101765,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31624735939","product_id":100028001,"comment_content":"æ–‡ä¸­è¯´Javaåºåˆ—åŒ–ï¼Œä¸ä¼šåºåˆ—åŒ–é™æ€å˜é‡ï¼Œè¿™ä¸ªå•ä¾‹çš„é™æ€å˜é‡ä¼šè¢«æ€ä¹ˆå¤„ç†å•Š?<br>","like_count":7,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453107,"discussion_content":"æ˜¯çš„ï¼ŒJavaåºåˆ—åŒ–ä¼šè°ƒç”¨æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºä¸€ä¸ªæ–°å¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560171989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1926759,"avatar":"","nickname":"èµµç‰é—¯","note":"","ucode":"82E85AC08206EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218284,"discussion_content":"è€å¸ˆï¼Œä½ çš„æ„æ€æ˜¯æ‰€æœ‰çš„é™æ€å˜é‡åºåˆ—åŒ–çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Ÿé‚£æ–‡ä¸­è¯´â€œJavaåºåˆ—åŒ–ï¼Œä¸ä¼šåºåˆ—åŒ–é™æ€å˜é‡â€è¿™å¥è¯å°±æ²¡æœ‰æ„ä¹‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585643902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110752,"user_name":"waniz","can_delete":false,"product_type":"c1","uid":1505761,"ip_address":"","ucode":"FA8CB4D94D85D3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibvULfLvUITGs8lOOdibnc1loJg1mKhSv8iaZYYcObNmMdHSicNng9ia2nISPYYg1zHZFR0CSLpDia3jcWKcKDMrPVFA/132","comment_is_top":false,"comment_ctime":1562325578,"is_pvip":false,"replies":[{"id":"40390","content":"Javaåºåˆ—åŒ–æ˜¯å°†Javaå¯¹è±¡è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æµï¼Œè€ŒJsonåºåˆ—åŒ–æ˜¯å°†Jsonå­—ç¬¦ä¸²è½¬ä¸ºäºŒè¿›åˆ¶çš„è¿‡ç¨‹ï¼Œåªæ˜¯åŒ…è£…çš„æ•°æ®æ ¼å¼ä¸ä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1562464743,"ip_address":"","comment_id":110752,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27332129354","product_id":100028001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼ŒJavaåºåˆ—åŒ–å°†æ•°æ®è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å­—èŠ‚æµï¼Œjsonåºåˆ—åŒ–å°†æ•°æ®è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²ã€‚ä½†æ˜¯åœ¨ç‰©ç†å±‚æ•°æ®éƒ½æ˜¯ä»¥ç”µä¿¡å·æˆ–æ¨¡æ‹Ÿä¿¡å·ä¼ è¾“ã€‚é‚£ä¹ˆä»åº”ç”¨å±‚åˆ°ç‰©ç†å±‚æ•°æ®çš„ç¼–ç çŠ¶æ€ç©¶ç«Ÿæ˜¯æ€ä¹ˆå˜åŒ–çš„?å‡ºå‘ç‚¹ä¸åŒï¼Œæœ€åéƒ½æ˜¯äºŒè¿›åˆ¶ä¼ è¾“â€¦å¿˜è§£æƒ‘","like_count":6,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457038,"discussion_content":"Javaåºåˆ—åŒ–æ˜¯å°†Javaå¯¹è±¡è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æµï¼Œè€ŒJsonåºåˆ—åŒ–æ˜¯å°†Jsonå­—ç¬¦ä¸²è½¬ä¸ºäºŒè¿›åˆ¶çš„è¿‡ç¨‹ï¼Œåªæ˜¯åŒ…è£…çš„æ•°æ®æ ¼å¼ä¸ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562464743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212902,"avatar":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","nickname":"æ—…é€”","note":"","ucode":"5022477E8E9441","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301276,"discussion_content":"éƒ½æ˜¯äºŒè¿›åˆ¶,äºŒè¿›åˆ¶çš„å¤§å°ä¹Ÿä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598456411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166523,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1577463984,"is_pvip":false,"replies":[{"id":"65937","content":"è¿™æ˜¯Javaè¯´æ˜éœ€è¦åºåˆ—åŒ–çš„ä¸€ç§æ ‡è¯†","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1578487926,"ip_address":"","comment_id":166523,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18757333168","product_id":100028001,"comment_content":"æƒ³çŸ¥é“ä¸ºä»€ä¹ˆç”¨éJavaçš„åºåˆ—åŒ–æ–¹å¼çš„ä¹Ÿéœ€è¦å®ç°Serializableæ¥å£ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479526,"discussion_content":"è¿™æ˜¯Javaè¯´æ˜éœ€è¦åºåˆ—åŒ–çš„ä¸€ç§æ ‡è¯†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578487926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131716,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1567861475,"is_pvip":false,"replies":[{"id":"51134","content":"åºåˆ—åŒ–æ˜¯å°†ä¸€ä¸ªå¯¹è±¡é€šè¿‡æŸç§æ•°æ®ç»“æ„åŒ…è£…å¥½å¯¹è±¡ä¸­çš„å…·ä½“å±æ€§å’Œå€¼ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶è¿›è¡Œç½‘ç»œä¼ è¾“çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚ä¾‹å¦‚ä¸€ä¸ªintç±»å‹çš„å±æ€§ï¼Œæ•°ç»„æ˜¯1000ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶åˆ™æ˜¯4ä¸ªå­—èŠ‚çš„byteæ•°ç»„äº†ã€‚<br><br>åé¢æˆ‘ä¼šä½¿ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥ä¼˜åŒ–è®²è§£è¿™ä¸€è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568539124,"ip_address":"","comment_id":131716,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14452763363","product_id":100028001,"comment_content":"è¯¾åæ€è€ƒåŠé—®é¢˜<br>1ï¼šè€å¸ˆèƒ½æ·±å…¥ç»†è‡´çš„è®²è®²JAVAæ€ä¹ˆå®ç°åºåˆ—åŒ–çš„å˜›ï¼Ÿæ¯”å¦‚ï¼šä¸€ä¸ªå¯¹è±¡æ€ä¹ˆä¸€æ­¥æ­¥ç¥å¥‡çš„å˜æˆä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„ï¼Ÿå¯¹è±¡ä¸­çš„å±æ€§ã€å±æ€§å€¼ã€æ–¹æ³•ã€ä»¥åŠæ­¤å¯¹è±¡çš„ä¿¡æ¯æ€ä¹ˆå˜æˆä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„ï¼Ÿ<br>2ï¼šæˆ‘ä»¬çŸ¥é“å¯¹è±¡æ˜¯é€šè¿‡åœ¨ ObjectInputStream ä¸Šè°ƒç”¨ readObject() æ–¹æ³•è¿›è¡Œååºåˆ—åŒ–çš„ï¼Œè¿™ä¸ªæ–¹æ³•å…¶å®æ˜¯ä¸€ä¸ªç¥å¥‡çš„æ„é€ å™¨ï¼Œå®ƒå¯ä»¥å°†ç±»è·¯å¾„ä¸Šå‡ ä¹æ‰€æœ‰å®ç°äº† Serializable æ¥å£çš„å¯¹è±¡éƒ½å®ä¾‹åŒ–ã€‚<br>è¿™ä¸ªç¥å¥‡çš„æ„é€ å™¨çš„å®ç°åŸç†æ˜¯å•¥ï¼Ÿä¸€ä¸ªå­—èŠ‚æ•°ç»„ä»–æ€ä¹ˆå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡çš„ï¼Ÿå¾ˆå¥½å¥‡ï¼Œä»–çŸ¥é“å­—èŠ‚æ•°ç»„å¤šå°‘ä½è¡¨ç¤ºå•¥æ„æ€ï¼Ÿç„¶åä¸€æ®µä¸€æ®µçš„å–ï¼Œä¸€æ®µçš„ç¿»è¯‘å˜›ï¼Ÿè€å¸ˆç»™è®²è®²å‘—ï¼Ÿ<br>è€å¸ˆæ·±å…¥è®²ä¸€ä¸‹åŸç†å®ç°ç»†èŠ‚ï¼ŒAPIå¼çš„è®²è§£ä¸è¿‡ç˜¾ï¼Œå’Œè€å¸ˆè¦æ·±å…¥ç†è§£çš„é£æ ¼ä¹Ÿä¸ç¬¦å‘€ğŸ˜„","like_count":3,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466590,"discussion_content":"åºåˆ—åŒ–æ˜¯å°†ä¸€ä¸ªå¯¹è±¡é€šè¿‡æŸç§æ•°æ®ç»“æ„åŒ…è£…å¥½å¯¹è±¡ä¸­çš„å…·ä½“å±æ€§å’Œå€¼ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶è¿›è¡Œç½‘ç»œä¼ è¾“çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚ä¾‹å¦‚ä¸€ä¸ªintç±»å‹çš„å±æ€§ï¼Œæ•°ç»„æ˜¯1000ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶åˆ™æ˜¯4ä¸ªå­—èŠ‚çš„byteæ•°ç»„äº†ã€‚\n\nåé¢æˆ‘ä¼šä½¿ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥ä¼˜åŒ–è®²è§£è¿™ä¸€è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568539124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105123,"user_name":"è‰å¸½è·¯é£","can_delete":false,"product_type":"c1","uid":1401733,"ip_address":"","ucode":"7416D1D82E3456","user_header":"https://static001.geekbang.org/account/avatar/00/15/63/85/9ccf1b19.jpg","comment_is_top":false,"comment_ctime":1560924539,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"14445826427","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚Java åºåˆ—åŒ–çš„å®‰å…¨æ€§ä¸­ï¼Œåºåˆ—åŒ–çš„æ—¶å€™æ‰§è¡ŒæŒ‰æ®µå¾ªç¯å¯¹è±¡é“¾çš„ä»£ç ä¸ºä»€ä¹ˆä¼šå¯¼è‡´ hashcode æˆå€å¢é•¿å‘€ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":2548016,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e1/30/56151c95.jpg","nickname":"å¾å¤§é›·","note":"","ucode":"4D6F0D4C58CE93","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406063,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634696208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140767,"user_name":"Sdylan","can_delete":false,"product_type":"c1","uid":1008503,"ip_address":"","ucode":"4589D0D0FA9275","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/77/423345ab.jpg","comment_is_top":false,"comment_ctime":1571045350,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10160979942","product_id":100028001,"comment_content":"2019.10.14 æ‰“å¡ï¼šé€‰æ‹©åºåˆ—åŒ–å››ä¸ªåŸåˆ™ï¼šç¼–è§£ç æ•ˆç‡ã€æ‰€å ç©ºé—´ã€å®‰å…¨ã€æ˜¯å¦æ”¯æŒå¤šè¯­è¨€","like_count":2},{"had_liked":false,"id":101873,"user_name":"æ™“æ°","can_delete":false,"product_type":"c1","uid":1441546,"ip_address":"","ucode":"1174C88EEBF8A6","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/0a/12faa44e.jpg","comment_is_top":false,"comment_ctime":1560006175,"is_pvip":false,"replies":[{"id":"36867","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1560172352,"ip_address":"","comment_id":101873,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5854973471","product_id":100028001,"comment_content":"ä¸æ˜¯å•ä¾‹ï¼Œå› ä¸ºåœ¨ååºåˆ—åŒ–çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ObjectInputStreamçš„readObjectæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥å¯¹å®ç°åºåˆ—åŒ–æ¥å£çš„ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œæ‰€ä»¥ä¼šç ´åå•ä¾‹æ¨¡å¼ã€‚<br>å¯ä»¥é€šè¿‡é‡å†™readResolveï¼Œè¿”å›å•ä¾‹å¯¹è±¡çš„æ–¹å¼æ¥é¿å…è¿™ä¸ªé—®é¢˜","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453151,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560172352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1613649,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/MCmfY4PQ9hp3iaQTlMdpUmR9rentlpatZRVkXHH7DK1uwK37JkwbYlf2Sh6obQmLepjUdTVicVg63u92QJe6WpGQ/132","nickname":"wy_2019","note":"","ucode":"6A8B40D273B94B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98517,"discussion_content":"æ€ä¹ˆè¯æ˜å•ä¾‹ååºåˆ—åŒ–ğŸ¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577168846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101778,"user_name":"å¼ å­¦ç£Š","can_delete":false,"product_type":"c1","uid":1250029,"ip_address":"","ucode":"F545F384A6F1E1","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotSSnZic41tGkbflx0ogIg3ia6g2muFY1hCgosL2t3icZm7I8Ax1hcv1jNgr6vrZ53dpBuGhaoc6DKg/132","comment_is_top":false,"comment_ctime":1559968577,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5854935873","product_id":100028001,"comment_content":"ä¸Šé¢è¯´é»˜è®¤åºåˆ—åŒ–æ–¹å¼ä¸ä¼šåºåˆ—åŒ–å¯¹è±¡çš„ transient çš„å®ä¾‹å˜é‡ï¼Œä¹Ÿä¸ä¼šåºåˆ—åŒ–é™æ€å˜é‡ï¼Œé‚£è¿™ä¸ªå•ä¾‹çš„å˜é‡æ˜¯é™æ€çš„ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£åºåˆ—åŒ–æˆäº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼Ÿ","like_count":1},{"had_liked":false,"id":347409,"user_name":"æ‡µé€¼çŒ´","can_delete":false,"product_type":"c1","uid":1204947,"ip_address":"","ucode":"BDC748A96AC316","user_header":"https://static001.geekbang.org/account/avatar/00/12/62/d3/663de972.jpg","comment_is_top":false,"comment_ctime":1653999017,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653999017","product_id":100028001,"comment_content":"java.io.ObjectInputStream#readObject()ååºåˆ—åŒ–ä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°","like_count":0},{"had_liked":false,"id":347302,"user_name":"æ¸…é£@çŸ¥é…’çƒˆ","can_delete":false,"product_type":"c1","uid":2767214,"ip_address":"","ucode":"393B359CBE417D","user_header":"https://static001.geekbang.org/account/avatar/00/2a/39/6e/0ea71f8a.jpg","comment_is_top":false,"comment_ctime":1653911741,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1653911741","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬é¡¹ç›®ä¹Ÿæ˜¯ä½¿ç”¨dubboï¼Œä½†æ˜¯å®ä½“ç±»éƒ½éœ€è¦å®ç°javaçš„Serializableæ¥å£ï¼Œä¸å®ç°å°±ä¼šæŠ¥é”™ã€‚ä¸æ˜¯è¯´dubboé»˜è®¤ä¸ä½¿ç”¨javaçš„åºåˆ—åŒ–å—ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯è¦å®ç°Serializableå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2699218,"avatar":"","nickname":"Geek_279849","note":"","ucode":"FC6A3514FC955C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584163,"discussion_content":"åªæ˜¯javaç”¨æ¥æ ‡è¯†åºåˆ—åŒ–çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660650191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345907,"user_name":"keep_it_real","can_delete":false,"product_type":"c1","uid":2055554,"ip_address":"","ucode":"F5057CAF752FF3","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5d/82/81b2ba91.jpg","comment_is_top":false,"comment_ctime":1652690875,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652690875","product_id":100028001,"comment_content":"Protobufåºåˆ—åŒ–çš„æ—¶å€™éœ€è¦ç”Ÿæˆç›¸å¯¹äºçš„javaæ–‡ä»¶ï¼Œæ„Ÿè§‰é‡Œé¢å¤šäº†å¥½å¤šæ²¡ç”¨çš„ä¸œè¥¿ã€‚ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘æ²¡ç”¨å¯¹ã€‚","like_count":0},{"had_liked":false,"id":309667,"user_name":"NOFX","can_delete":false,"product_type":"c1","uid":2001382,"ip_address":"","ucode":"5BD2DE30DCE277","user_header":"https://static001.geekbang.org/account/avatar/00/1e/89/e6/cf1ea14c.jpg","comment_is_top":false,"comment_ctime":1630295143,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1630295143","product_id":100028001,"comment_content":"Jsonã€Protocol ååºåˆ—åŒ–æ˜¯ä¸æ˜¯ä¹Ÿä¼šå­˜åœ¨ç ´åå•ä¾‹çš„è¡Œä¸ºå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":288429,"user_name":"Jecy-8","can_delete":false,"product_type":"c1","uid":1016276,"ip_address":"","ucode":"2AE1575B9E63A6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/81/d4/e92abeb4.jpg","comment_is_top":false,"comment_ctime":1618466638,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618466638","product_id":100028001,"comment_content":"æ–‡ä¸­çš„å›¾ï¼ŒreadResolve()æ–¹æ³•åº”è¯¥æ˜¯åœ¨ååºåˆ—åŒ–ï¼ˆå›¾ä¸­æ˜¯åºåˆ—åŒ–ï¼‰ä¹‹åçš„æ“ä½œæ–¹æ³•å§ï¼Œä¸çŸ¥é“æˆ‘ç†è§£å¯¹ä¸å¯¹","like_count":0},{"had_liked":false,"id":284563,"user_name":"Eros","can_delete":false,"product_type":"c1","uid":1659054,"ip_address":"","ucode":"7E7D7B00E3139A","user_header":"https://static001.geekbang.org/account/avatar/00/19/50/ae/4970425c.jpg","comment_is_top":false,"comment_ctime":1616339562,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616339562","product_id":100028001,"comment_content":"åºåˆ—åŒ–ä¼šé€šè¿‡åå°„è°ƒç”¨æ— å‚æ„é€ å™¨è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç ´åå•ä¾‹æ¨¡å¼ã€‚<br>è§£å†³æ–¹æ³•æ˜¯åœ¨è¢«åºåˆ—åŒ–ç±»ä¸­é‡å†™readResolveæ–¹æ³•ã€‚","like_count":0},{"had_liked":false,"id":247866,"user_name":"Geek_ad8fb9","can_delete":false,"product_type":"c1","uid":2002881,"ip_address":"","ucode":"64EF69412F6445","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELvqowyjk03bEDYiaXcly9fic79mLxFb1IRAbatOrsyeibOgI7ux7JhDXty69iav7S9x9JRN2esfEzf4Q/132","comment_is_top":false,"comment_ctime":1599897495,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599897495","product_id":100028001,"comment_content":"æˆ‘è§‰å¾—ååºåˆ—åŒ–çš„æ—¶å€™å¹¶ä¸æ˜¯é€šè¿‡åå°„è°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°ï¼Œé€šè¿‡åœ¨ideaä¸­æµ‹è¯•ï¼Œå‘ç°ç¡®å®ä¹Ÿæ²¡æœ‰è°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°ã€‚<br>JVMä¸­æœ‰ä¸€ä¸ªåé—¨å…è®¸åœ¨ä¸è°ƒç”¨ä»»ä½•æ„é€ å‡½æ•°çš„æƒ…å†µä¸‹åˆ›å»ºå¯¹è±¡ã€‚é¦–å…ˆå°†æ–°å¯¹è±¡çš„å­—æ®µåˆå§‹åŒ–ä¸ºå…¶é»˜è®¤å€¼(falseï¼Œ0ï¼Œnullç­‰)ï¼Œç„¶åå¯¹è±¡ååºåˆ—åŒ–ä»£ç ä½¿ç”¨å¯¹è±¡æµä¸­çš„å€¼å¡«å……å­—æ®µã€‚<br>readResolve()å¯ä»¥è·³è¿‡è¿™ä¸ªåé—¨ï¼Œè‡ªå®šä¹‰è¿”å›å¯¹è±¡ã€‚","like_count":0},{"had_liked":false,"id":226740,"user_name":"è€¿å˜‰è‰º","can_delete":false,"product_type":"c1","uid":2023401,"ip_address":"","ucode":"727A22BD41E8AF","user_header":"","comment_is_top":false,"comment_ctime":1592192729,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592192729","product_id":100028001,"comment_content":"æ€è€ƒé¢˜ä¸­é™¤äº†é‡å†™readResolveæ–¹æ³•ï¼Œæ˜¯ä¸æ˜¯é‡å†™readObjectæ–¹æ³•ä¹Ÿå¯ä»¥ï¼Ÿè¿˜æœ‰å¯ä¸å¯ä»¥è®²ä¸€ä¸‹åœ¨ååºåˆ—åŒ–ä»£ç ä¸­ï¼Œå“ªé‡Œæ˜¾ç¤ºäº†é€šè¿‡åå°„è°ƒç”¨äº†æ— å‚æ„é€ æ–¹æ³•ï¼Œæœ€å¥½èƒ½ç»™ä¸‹è¯¥ä»£ç åœ¨æºç ä¸­çš„ä½ç½®ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":199286,"user_name":"10å¹´ä»¥å","can_delete":false,"product_type":"c1","uid":1297421,"ip_address":"","ucode":"FE58CA7E5C2AF9","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/0d/89435926.jpg","comment_is_top":false,"comment_ctime":1585485800,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585485800","product_id":100028001,"comment_content":"åºåˆ—åŒ–","like_count":0},{"had_liked":false,"id":178487,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1581701752,"is_pvip":false,"replies":[{"id":"70520","content":"æˆ‘ä¹Ÿæ²¡æœ‰çœ‹æ‡‚è¿™å¥è¯ï¼Œè¯·é—®åœ¨å“ªé‡Œçœ‹åˆ°çš„ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1582721919,"ip_address":"","comment_id":178487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581701752","product_id":100028001,"comment_content":"åºåˆ—åŒ–å¯¹è±¡ä¸­åŠ è½½ååºåˆ—åŒ–çš„ç±»æ€ä¹ˆç†è§£ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483844,"discussion_content":"æˆ‘ä¹Ÿæ²¡æœ‰çœ‹æ‡‚è¿™å¥è¯ï¼Œè¯·é—®åœ¨å“ªé‡Œçœ‹åˆ°çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582721919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165943,"user_name":"ç‹åœ£å†›","can_delete":false,"product_type":"c1","uid":1395602,"ip_address":"","ucode":"1E13CF683137D1","user_header":"https://static001.geekbang.org/account/avatar/00/15/4b/92/03338a22.jpg","comment_is_top":false,"comment_ctime":1577347617,"is_pvip":false,"replies":[{"id":"65040","content":"è¿™ä¹Ÿæ˜¯ä¸€ä¸ªåºåˆ—åŒ–è¿‡ç¨‹ï¼Œåªä¸è¿‡æ˜¯å­—ç¬¦ä¸²å¯¹è±¡è½¬äºŒè¿›åˆ¶çš„è¿‡ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1577871947,"ip_address":"","comment_id":165943,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577347617","product_id":100028001,"comment_content":"æˆ‘ä»¬æœ‰æ—¶åŸºäºç½‘ç»œé€šè®¯çš„ä¼ è¾“ï¼Œæœ‰çš„ä¸æ˜¯ç›´æ¥ä½¿ç”¨å®ä¾‹åºåˆ—åŒ–åä¼ è¾“ï¼Œå¾ˆå¤šå°±æ˜¯å­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶æµè¿›è¡Œä¼ è¾“ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯ä¸æ¶‰åŠåˆ°åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479322,"discussion_content":"è¿™ä¹Ÿæ˜¯ä¸€ä¸ªåºåˆ—åŒ–è¿‡ç¨‹ï¼Œåªä¸è¿‡æ˜¯å­—ç¬¦ä¸²å¯¹è±¡è½¬äºŒè¿›åˆ¶çš„è¿‡ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577871947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159118,"user_name":"td901105","can_delete":false,"product_type":"c1","uid":1348830,"ip_address":"","ucode":"32D42A4F36FA02","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/SM4fwn9uFicXU8cQ1rNF2LQdKNbZI1FX1jmdwaE2MTrBawbugj4TQKjMKWG0sGbmqQickyARXZFS8NZtobvoWTHA/132","comment_is_top":false,"comment_ctime":1575540211,"is_pvip":false,"replies":[{"id":"61470","content":"éœ€è¦çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1576153033,"ip_address":"","comment_id":159118,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1575540211","product_id":100028001,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸€ä¸‹å¦‚æœä½¿ç”¨éJavaçš„åºåˆ—åŒ–æ–¹å¼çš„è¯éœ€è¦å®ç°Serializableæ¥å£å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476956,"discussion_content":"éœ€è¦çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576153033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1190150,"avatar":"https://static001.geekbang.org/account/avatar/00/12/29/06/0b327738.jpg","nickname":"Gankki","note":"","ucode":"399C6F74286590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267589,"discussion_content":"ä¸éœ€è¦ï¼Œåªæ˜¯ä¸€ç§å†™ä»£ç çš„è§„èŒƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589645123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1620973,"avatar":"https://static001.geekbang.org/account/avatar/00/18/bb/ed/8a2f349e.jpg","nickname":"ç‹ç‹¸ğŸ¦Š","note":"","ucode":"58141A02CBEDE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":170010,"discussion_content":"ä¸éœ€è¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581662799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133248,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1568463606,"is_pvip":false,"replies":[{"id":"51099","content":"NIOæ˜¯ä¸€ç§é€šä¿¡æ¨¡å‹ï¼Œå¹¶æ²¡æœ‰åŒ…å«åºåˆ—åŒ–çš„å†…å®¹ï¼Œå¯ä»¥è‡ªå·±é€‰æ‹©ä½¿ç”¨å“ªä¸€ç§åºåˆ—åŒ–","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568531817,"ip_address":"","comment_id":133248,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568463606","product_id":100028001,"comment_content":"é‚£ä¹ˆjavaçš„NIOç”¨åˆ°äº†javaçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¹ˆï¼Ÿæœ‰ä¸€æ ·çš„é—®é¢˜ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467317,"discussion_content":"NIOæ˜¯ä¸€ç§é€šä¿¡æ¨¡å‹ï¼Œå¹¶æ²¡æœ‰åŒ…å«åºåˆ—åŒ–çš„å†…å®¹ï¼Œå¯ä»¥è‡ªå·±é€‰æ‹©ä½¿ç”¨å“ªä¸€ç§åºåˆ—åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568531817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133245,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1568462238,"is_pvip":false,"replies":[{"id":"51100","content":"æ˜¯çš„ï¼Œä¸åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œåˆ™æ— æ³•åœ¨å†…å­˜ä¸­è·å–å…·ä½“çš„ä¿¡æ¯ç”¨äºä¸šåŠ¡é€»è¾‘ä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568531874,"ip_address":"","comment_id":133245,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568462238","product_id":100028001,"comment_content":" è€å¸ˆï¼Œæ‰€æœ‰åœ¨ç½‘ç»œä¸­ä¼ è¾“ä¿¡æ¯éƒ½æ˜¯è¦åºåˆ—åŒ–ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467316,"discussion_content":"æ˜¯çš„ï¼Œä¸åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œåˆ™æ— æ³•åœ¨å†…å­˜ä¸­è·å–å…·ä½“çš„ä¿¡æ¯ç”¨äºä¸šåŠ¡é€»è¾‘ä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568531874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117446,"user_name":"Jerry","can_delete":false,"product_type":"c1","uid":1088756,"ip_address":"","ucode":"4213083D076AB8","user_header":"https://static001.geekbang.org/account/avatar/00/10/9c/f4/7e14ff8a.jpg","comment_is_top":false,"comment_ctime":1564048397,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564048397","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæˆ‘è¯•ç€å†™äº†ä¸€ä¸‹è¿™ä¸ªé—®é¢˜çš„ä»£ç ï¼Œä½†æ˜¯å‘ç°Singleton åºåˆ—åŒ–å’Œååºåˆ—åŒ–åä¼šäº§ç”Ÿä¸¤ä¸ªinstance, è¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£ï¼Ÿä»¥ä¸‹æ˜¯æˆ‘çš„ä»£ç ï¼Œ<br>&#39;&#39;&#39;<br>...<br>public static void serializeMe() {<br>        try {<br>            ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(&quot;SingletonData.txt&quot;));<br>            oos.writeObject(Singleton.getInstance());<br>        } catch (IOException e) {<br>            e.printStackTrace();<br>        }<br>    }<br><br>    public static Object deSerializeMe() {<br>        Object obj = null;<br>        try {<br>            ObjectInputStream ois = new ObjectInputStream(new FileInputStream(&quot;SingletonData.txt&quot;));<br>            obj = ois.readObject();<br>        }  catch (IOException | ClassNotFoundException e) {<br>            e.printStackTrace();<br>        }<br>        return obj;<br>    }<br><br>    private static class Singleton implements Serializable {<br>        int i;<br>        private static Singleton instance = null;<br>        private Singleton() {<br>            System.out.println(&quot;Executing constructor&quot;);<br>            i = 1;<br>        }<br><br>        &#47;&#47; key change here !!!<br>        private void readObject(ObjectInputStream ois) throws IOException, ClassNotFoundException {<br>            System.out.println(&quot;readObject before [i=&quot; + i + &quot;]&quot;);<br>            ois.defaultReadObject();<br>            instance = this; &#47;&#47; After de-serialization, two objects of &#39;Singleton&#39; class are created.<br>            System.out.println(&quot;readObject after [i=&quot; + i + &quot;]&quot;);<br>        }<br><br>        &#47;&#47; thread unsafe here, don&#39;t care<br>        public static Singleton getInstance() {<br>            if (instance == null) {<br>                instance = new Singleton();<br>            }<br>            System.out.println(&quot;An instance is returned&quot;);<br>            return instance;<br>        }<br><br>        &#47;&#47; readResolve() is usually called after readObject()<br>        public Object readResolve() {<br>            System.out.println(&quot;Executing readResolve&quot;);<br>            return instance;<br>        }<br><br>        @Override<br>        public String toString() {<br>            return &quot;Singleton [i=&quot; + i + &quot;]&quot;;<br>        }<br>    }<br>&#39;&#39;&#39;","like_count":0},{"had_liked":false,"id":115340,"user_name":"è¾‰","can_delete":false,"product_type":"c1","uid":1514658,"ip_address":"","ucode":"39D6CDEF00083A","user_header":"https://static001.geekbang.org/account/avatar/00/17/1c/a2/2c3572de.jpg","comment_is_top":false,"comment_ctime":1563537538,"is_pvip":false,"replies":[{"id":"42360","content":"hessianæ˜¯ç”¨çš„hessian2åºåˆ—åŒ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1563760798,"ip_address":"","comment_id":115340,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563537538","product_id":100028001,"comment_content":"hessionæ˜¯é€šè¿‡ä»€ä¹ˆåšåºåˆ—åŒ–çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459061,"discussion_content":"hessianæ˜¯ç”¨çš„hessian2åºåˆ—åŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563760798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105131,"user_name":"17702158422","can_delete":false,"product_type":"c1","uid":1230682,"ip_address":"","ucode":"226342D3CB73BA","user_header":"","comment_is_top":false,"comment_ctime":1560925909,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560925909","product_id":100028001,"comment_content":"å¯ä»¥å®šä¹‰ä¸€ä¸ªé™æ€å±æ€§ boolean flag = false, åœ¨æ„é€ å‡½æ•°é‡Œ åˆ¤æ–­ flagæ˜¯å¦ä¸ºture, å¦‚æœä¸ºtrueåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™å°†flagèµ‹å€¼ä¸º true ï¼Œåˆ™å¯ä»¥åœ¨è¿è¡ŒæœŸé˜²æ­¢ååºåˆ—åŒ–æ—¶é€šè¿‡åå°„ç ´åå•ä¾‹æ¨¡å¼","like_count":0},{"had_liked":false,"id":102379,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1560214469,"is_pvip":false,"replies":[{"id":"37159","content":"è¯·é—®æ”¹æˆJDKåºåˆ—åŒ–çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1560302775,"ip_address":"","comment_id":102379,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560214469","product_id":100028001,"comment_content":"è€å¸ˆ æˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦å°†ä¸€äº›æ›´æ–°å‰çš„æ•°æ®ä¿å­˜èµ·æ¥ç”¨äºå›æ»šï¼Œä¿å­˜çš„å¯¹è±¡æœ‰ä¸€ä¸ª value å±æ€§æ˜¯ Object ç±»å‹çš„ï¼Œèµ‹å€¼ BigDecimal åä½¿ç”¨ FastJson åºåˆ—åŒ–ä¿å­˜åˆ°æ•°æ®åº“ï¼Œå›æ»šçš„æ—¶å€™å†ååºåˆ—åŒ–å˜æˆäº†Integerï¼Œè€ƒè™‘å°† FastJson æ”¹æˆ JDK çš„åºåˆ—åŒ–ï¼Œä½†æ˜¯åˆæ‹…å¿ƒä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Œè¯·é—®è€å¸ˆæœ‰ä»€ä¹ˆå»ºè®®å—","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453386,"discussion_content":"è¯·é—®æ”¹æˆJDKåºåˆ—åŒ–çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560302775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102307,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1560185069,"is_pvip":false,"replies":[{"id":"37169","content":"æ˜¯çš„ï¼Œä½ ç†è§£æ²¡æœ‰é”™ã€‚ObjectInputStreamå¯¹åº”readObjectï¼ŒObjectOutputStreamå¯¹åº”writeObjectã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1560307161,"ip_address":"","comment_id":102307,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1560185069","product_id":100028001,"comment_content":"å›¾ä¸€ä¸­ï¼Œè¾“å…¥æµObjectInputStreamåº”è¯¥æ˜¯ååºåˆ—å§ï¼Œè¾“å‡ºæµObjectOutputStreamåº”è¯¥æ˜¯åºåˆ—åŒ–å§ï¼Œè€å¸ˆæˆ‘ç†è§£é”™äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453352,"discussion_content":"æ˜¯çš„ï¼Œä½ ç†è§£æ²¡æœ‰é”™ã€‚ObjectInputStreamå¯¹åº”readObjectï¼ŒObjectOutputStreamå¯¹åº”writeObjectã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560307161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101901,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1560044767,"is_pvip":false,"replies":[{"id":"36868","content":"è¿™é‡Œä¸æ˜¯åºåˆ—åŒ–è°ƒç”¨hashcodeæ–¹æ³•ï¼Œè€Œæ˜¯åºåˆ—åŒ–æ—¶ï¼Œè¿è¡Œè¿™æ®µä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1560172449,"ip_address":"","comment_id":101901,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560044767","product_id":100028001,"comment_content":"åœ¨javaåºåˆ—å·å®‰å…¨æ€§é‚£é‡Œæœ‰ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆååºåˆ—åŒ–ä¼šå¯¼è‡´hashCodeæ–¹æ³•çš„é¢‘ç¹è°ƒç”¨å‘¢ï¼Œååºåˆ—åŒ–æ—¶è°ƒç”¨hashCodeçš„ä½œç”¨æ˜¯","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453164,"discussion_content":"è¿™é‡Œä¸æ˜¯åºåˆ—åŒ–è°ƒç”¨hashcodeæ–¹æ³•ï¼Œè€Œæ˜¯åºåˆ—åŒ–æ—¶ï¼Œè¿è¡Œè¿™æ®µä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560172449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101768,"user_name":"colin","can_delete":false,"product_type":"c1","uid":1292206,"ip_address":"","ucode":"7A8849B8AE33E0","user_header":"https://static001.geekbang.org/account/avatar/00/13/b7/ae/a25fcb73.jpg","comment_is_top":false,"comment_ctime":1559965677,"is_pvip":false,"replies":[{"id":"36866","content":"è¿™ä¸ªå½¢å®¹éå¸¸åˆ°ä½","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1560172321,"ip_address":"","comment_id":101768,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559965677","product_id":100028001,"comment_content":"Protobufçš„æ ¼å¼æ„Ÿè§‰å–å­—èŠ‚ç æœ‰ç‚¹ç±»ä¼¼","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453109,"discussion_content":"è¿™ä¸ªå½¢å®¹éå¸¸åˆ°ä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560172321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}