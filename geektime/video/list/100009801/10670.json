{"id":10670,"title":"08 | 函数的参数是函数 : 高阶函数的注意事项","content":"<h1>源代码及 PDF 课件地址：</h1><p><strong><a href=\"https://gitee.com/geektime-geekbang/KotlinPrimer\">https://gitee.com/geektime-geekbang/KotlinPrimer</a></strong></p>","comments":[{"had_liked":false,"id":15796,"user_name":"null","can_delete":false,"product_type":"c3","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1531500361,"is_pvip":false,"replies":[{"id":5466,"content":"java有个Void类不知道你清楚不，其实就可以可以将Unit理解为kotlin的Void类","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1531564777,"ip_address":"","comment_id":15796,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"可以简单理解 Unit 为 java 的 void 么，老师","like_count":3,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420555,"discussion_content":"java有个Void类不知道你清楚不，其实就可以可以将Unit理解为kotlin的Void类","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531564777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197956,"user_name":"bxtyfufff","can_delete":false,"product_type":"c3","uid":1175569,"ip_address":"","ucode":"61272AA17045BD","user_header":"https://static001.geekbang.org/account/avatar/00/11/f0/11/c75398da.jpg","comment_is_top":false,"comment_ctime":1585405254,"is_pvip":false,"replies":[{"id":75204,"content":"对的有括号就是调用了方法","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1585709048,"ip_address":"","comment_id":197956,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"runnable.run()执行执行方法体\nrunable::run 引用方法体，不执行。\n作为参数时，第一个写法会先执行，将最终的返回值作为参数（runable的返回值为unit）","like_count":1,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489628,"discussion_content":"对的有括号就是调用了方法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585709048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50075,"user_name":"蚂蚁内推+v","can_delete":false,"product_type":"c3","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1544859610,"is_pvip":false,"replies":[{"id":19069,"content":"下面那个相当于你就写了个变量名，但这个变量没有任何意义。","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1545380344,"ip_address":"","comment_id":50075,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"fun onlyIf(isDebug : Boolean , block:() -&gt; Unit) {\n    if (isDebug){\n        block()\n    }\n}\n和\n\nfun onlyIf(isDebug : Boolean , block:() -&gt; Unit) {\n    if (isDebug){\n        block &#47;&#47; 区别点\n    }\n}\n\n张老师 这两个啥区别方便指导下吗？上面那个是调用，下面这个为啥编译器不报错方便解释下吗\n","like_count":1,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432866,"discussion_content":"下面那个相当于你就写了个变量名，但这个变量没有任何意义。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545380344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50073,"user_name":"蚂蚁内推+v","can_delete":false,"product_type":"c3","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1544859193,"is_pvip":false,"replies":[{"id":19062,"content":"上面是lambda对象，下面是runnable对象","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1545379974,"ip_address":"","comment_id":50073,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":" var runnable = {\n        println(&quot;demo up &quot;)\n    }\n\n和 \n var runnable2 = Runnable { \n        println(&quot;runable up &quot;)\n    }\n有啥区别 ，方便老师稍微指导下吗\n","like_count":1,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432865,"discussion_content":"上面是lambda对象，下面是runnable对象","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545379974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15548,"user_name":"wendraw","can_delete":false,"product_type":"c3","uid":1123627,"ip_address":"","ucode":"EA404D7CFCAB44","user_header":"https://static001.geekbang.org/account/avatar/00/11/25/2b/7f6aabc2.jpg","comment_is_top":false,"comment_ctime":1531281034,"is_pvip":false,"replies":[{"id":5271,"content":"高阶函数是kotlin非常核心的知识点，第一篇快速上手中，我们需要知道高阶函数的语法知识，如何声明，如何调用，能看懂别人代码。在后面讲DSL时候，我们还会重点讲kotlin的lambda与运算符重载知识。\n在这里也教其他没有函数式编程经验的同学一个小技巧，在看kotlin的lambda时，在脑海里默念一下，这是一个接口对象。把lambda作为参数传入到函数中就跟平时写的回调是一样的。","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1531294624,"ip_address":"","comment_id":15548,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"完全没听懂，老师你能不能讲详细点，高阶函数一笔带过，比如调用高阶函数时，传入lambda表达式写在外面，真的不太好理解，总觉的很别扭，老师能不能解释一下kotlin为什么要这样设计？","like_count":1,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420436,"discussion_content":"高阶函数是kotlin非常核心的知识点，第一篇快速上手中，我们需要知道高阶函数的语法知识，如何声明，如何调用，能看懂别人代码。在后面讲DSL时候，我们还会重点讲kotlin的lambda与运算符重载知识。\n在这里也教其他没有函数式编程经验的同学一个小技巧，在看kotlin的lambda时，在脑海里默念一下，这是一个接口对象。把lambda作为参数传入到函数中就跟平时写的回调是一样的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531294624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202087,"user_name":"Fct","can_delete":false,"product_type":"c3","uid":1910051,"ip_address":"","ucode":"25F8D1151C3D9E","user_header":"https://static001.geekbang.org/account/avatar/00/1d/25/23/6ccf411a.jpg","comment_is_top":false,"comment_ctime":1585901078,"is_pvip":false,"replies":[{"id":83673,"content":"不能，扩展函数不是真实的函数，并不能往指定包里面加，除非显示指定包名跟sdk的一致","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1592299530,"ip_address":"","comment_id":202087,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"能不能用之前说的扩展函数 去定义一个23个参数的函数Function23，然后去解决那个问题？","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490502,"discussion_content":"不能，扩展函数不是真实的函数，并不能往指定包里面加，除非显示指定包名跟sdk的一致","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592299530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64570,"user_name":"芋头","can_delete":false,"product_type":"c3","uid":1070287,"ip_address":"","ucode":"390438CFF71F0A","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/cf/fddcf843.jpg","comment_is_top":false,"comment_ctime":1548826551,"is_pvip":false,"replies":[{"id":58070,"content":"val callable = Callable&lt;Int&gt; {...}","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1573637437,"ip_address":"","comment_id":64570,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"老师，定义一个 Runnable 可以这样\nvar runnable2 = Runnable { \n        println(&quot;runable up &quot;)\n    }\n\n那定义一个Callable&lt;V&gt;该如何定义呢","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438079,"discussion_content":"val callable = Callable&amp;lt;Int&amp;gt; {...}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573637437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":38426,"user_name":"OzoraTsubasa","can_delete":false,"product_type":"c3","uid":1298651,"ip_address":"","ucode":"A29805845F58BA","user_header":"https://static001.geekbang.org/account/avatar/00/13/d0/db/8b8173d0.jpg","comment_is_top":false,"comment_ctime":1542034126,"is_pvip":false,"replies":[{"id":15172,"content":"因为可以手动创建一个名叫Function23的接口","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1542962055,"ip_address":"","comment_id":38426,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"练习一的选择题 按我的猜想应该是报错的，因为之前视频说过参数只能支持22个，现在为什么这个是23个也OK那","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428698,"discussion_content":"因为可以手动创建一个名叫Function23的接口","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542962055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19248,"user_name":"面向加薪学习","can_delete":false,"product_type":"c3","uid":1108117,"ip_address":"","ucode":"5164A1DF058AC5","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/95/13b88119.jpg","comment_is_top":false,"comment_ctime":1533734950,"is_pvip":false,"replies":[{"id":6735,"content":"(a:Int, b:Int)-&gt;Int 这是一个类型，跟你经常写的String、Int是同类型的。传入的时候{a,b-&gt;  a+b} 这一整段是一个对象","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1533872484,"ip_address":"","comment_id":19248,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"fun only(isDebug: Boolean, block2: (a: Int, b: Int) -&gt; Int): Int {\nif (isDebug) {\nreturn block2(3, 5)\n}\nreturn 0\n}\n调用\nval result = only(true, { a, b -&gt; a + b })\nprintln(&quot;result--&quot; + result)\n\n老师这个是我定义和调用的高阶函数，为什么定义的时候就要block2写固定值,然后外面传入{a,b-&gt;a+b}\n ,参数不是应该从外面传入吗？请教老师这是为什么？\n","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421750,"discussion_content":"(a:Int, b:Int)-&amp;gt;Int 这是一个类型，跟你经常写的String、Int是同类型的。传入的时候{a,b-&amp;gt;  a+b} 这一整段是一个对象","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533872484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97450,"user_name":"遥远的救世主","can_delete":false,"product_type":"c3","uid":1181334,"ip_address":"","ucode":"4CC436479CAA21","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/96/4273bb09.jpg","comment_is_top":false,"comment_ctime":1558673773,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"练习题一按照Lambda最多有22个参数所说，应该需要自己在java中定义Function23,但在最新的Kotlin 1.3版本可以正常运行，应该像前面一位朋友所说的在新版本中没有了这个限制。","like_count":8},{"had_liked":false,"id":97447,"user_name":"遥远的救世主","can_delete":false,"product_type":"c3","uid":1181334,"ip_address":"","ucode":"4CC436479CAA21","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/96/4273bb09.jpg","comment_is_top":false,"comment_ctime":1558673501,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"Lambda表达式真是天使与恶魔于一身，初看起来好难理解。如果Lambda是函数的最后⼀个参数，可以将⼤括号放在⼩括号外⾯  ，inline只用来修饰高阶函数，function = { runnable.run() }。","like_count":2}]}