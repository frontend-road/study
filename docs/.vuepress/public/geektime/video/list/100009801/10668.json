{"id":10668,"title":"06 | 用扩展函数简化代码调用","content":"<h1>源代码及 PDF 课件地址：</h1><p><strong><a href=\"https://gitee.com/geektime-geekbang/KotlinPrimer\">https://gitee.com/geektime-geekbang/KotlinPrimer</a></strong></p>","comments":[{"had_liked":false,"id":16519,"user_name":"Geek_x85lvd","can_delete":false,"product_type":"c3","uid":1173709,"ip_address":"","ucode":"B8DCEC8CA9C11B","user_header":"https://static001.geekbang.org/account/avatar/00/11/e8/cd/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1532000936,"is_pvip":false,"replies":[{"id":5853,"content":"可以自己动手看看，把类反编译后看对应的类型","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1532310644,"ip_address":"","comment_id":16519,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"扩展函数没讲清楚，为什么有两个参数，分别是对应声明的什么，使用的时候为什么用的那个参数","like_count":5,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420828,"discussion_content":"可以自己动手看看，把类反编译后看对应的类型","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532310644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95253,"user_name":"zeal","can_delete":false,"product_type":"c3","uid":1018837,"ip_address":"","ucode":"114219DA7355CA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8b/d5/4d43face.jpg","comment_is_top":false,"comment_ctime":1557997740,"is_pvip":false,"replies":[{"id":58066,"content":"这样不应该使用扩展函数，或者说你扩展的不对，你的本意应该是想  \na.add(b,c,d) \n如果是这样，可以扩展给Number类","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1573637244,"ip_address":"","comment_id":95253,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"请问涛哥，我想扩展 Math 类，例如\n\n&#47;&#47;扩展\n public func Math.add(a,Int,b:Int,c:Int):Int = a+b+c\n\n&#47;&#47;使用\n\n由于使用时需要被扩展类的对象，但是 Math 类是不能获取对象的，这个该怎么处理呢？","like_count":4,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450386,"discussion_content":"这样不应该使用扩展函数，或者说你扩展的不对，你的本意应该是想  \na.add(b,c,d) \n如果是这样，可以扩展给Number类","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573637244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113953,"user_name":"大魔王","can_delete":false,"product_type":"c3","uid":1338779,"ip_address":"","ucode":"AF4B1A9918A9A5","user_header":"https://static001.geekbang.org/account/avatar/00/14/6d/9b/a4a30bcb.jpg","comment_is_top":false,"comment_ctime":1563193727,"is_pvip":false,"replies":[{"id":42499,"content":"👍","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1563807140,"ip_address":"","comment_id":113953,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"扩展函数编译成java后会多一个当前类类型的参数是因为扩展函数中可以访问当前对象的public变量和方法，在kotlin中调用相当于传了个this进去","like_count":3,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458454,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563807140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47266,"user_name":"aCai","can_delete":false,"product_type":"c3","uid":1174236,"ip_address":"","ucode":"FF8733FF96F179","user_header":"https://static001.geekbang.org/account/avatar/00/11/ea/dc/6ceb34a8.jpg","comment_is_top":false,"comment_ctime":1544094139,"is_pvip":false,"replies":[{"id":17294,"content":"不会影响效率，因为跟java一样只是一次方法调用。如果一定要严格的讲，那应该会加长一点点的编译时间","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1544437872,"ip_address":"","comment_id":47266,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"Kotlin独特的特性，比如扩展函数会在Java中先被编译为静态函数，再去做接下来的处理。\n是不是可以说Kotlin效率要低一点啊","like_count":1,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431720,"discussion_content":"不会影响效率，因为跟java一样只是一次方法调用。如果一定要严格的讲，那应该会加长一点点的编译时间","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544437872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159198,"user_name":"空城旧梦乱人心","can_delete":false,"product_type":"c3","uid":1756535,"ip_address":"","ucode":"CB42AA3EDD95E1","user_header":"https://static001.geekbang.org/account/avatar/00/1a/cd/77/1c50754c.jpg","comment_is_top":false,"comment_ctime":1575557104,"is_pvip":false,"replies":[{"id":63198,"content":"你可以先新建一个叫project2的工程看看","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1577325991,"ip_address":"","comment_id":159198,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"用android studio Project2.iml应该放在哪个目录下呢","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476979,"discussion_content":"你可以先新建一个叫project2的工程看看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577325991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":39991,"user_name":"MOSAIC","can_delete":false,"product_type":"c3","uid":1071945,"ip_address":"","ucode":"6217B689FFC36B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/49/90dbe5e5.jpg","comment_is_top":false,"comment_ctime":1542429757,"is_pvip":false,"replies":[{"id":15176,"content":"👍","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1542962147,"ip_address":"","comment_id":39991,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"可以，很好理解","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429322,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542962147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24398,"user_name":"逐梦","can_delete":false,"product_type":"c3","uid":1141875,"ip_address":"","ucode":"DDF5328B4150AA","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/73/d432902a.jpg","comment_is_top":false,"comment_ctime":1536974447,"is_pvip":false,"replies":[{"id":10509,"content":"嗯，视频没办法更改了，之后我会写一篇博客单独讲","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1538307021,"ip_address":"","comment_id":24398,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"我觉得拓展函数比较容易理解，拓展属性要讲一下，比如get和set方法该怎么写，它没有filed字段，我要怎么赋值","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423969,"discussion_content":"嗯，视频没办法更改了，之后我会写一篇博客单独讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538307021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21813,"user_name":"Wilson","can_delete":false,"product_type":"c3","uid":1007140,"ip_address":"","ucode":"3ADBE962C67B8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/24/040855d3.jpg","comment_is_top":false,"comment_ctime":1535359230,"is_pvip":false,"replies":[{"id":7868,"content":"fun  T.xxx()  这就是定义。使用和普通java函数用法一样","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1535445710,"ip_address":"","comment_id":21813,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"怎么定义扩展函数，怎么用扩展函数，没有理解！","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422879,"discussion_content":"fun  T.xxx()  这就是定义。使用和普通java函数用法一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535445710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16802,"user_name":"钊","can_delete":false,"product_type":"c3","uid":1174430,"ip_address":"","ucode":"015FAFA4110CE4","user_header":"https://static001.geekbang.org/account/avatar/00/11/eb/9e/c2451202.jpg","comment_is_top":false,"comment_ctime":1532222494,"is_pvip":false,"replies":[{"id":6067,"content":"因为第一篇讲的是基础，毕竟不是小班课，要照顾到更多人","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1532690012,"ip_address":"","comment_id":16802,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"很多东西都一笔带过","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420933,"discussion_content":"因为第一篇讲的是基础，毕竟不是小班课，要照顾到更多人","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532690012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95204,"user_name":"遥远的救世主","can_delete":false,"product_type":"c3","uid":1181334,"ip_address":"","ucode":"4CC436479CAA21","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/96/4273bb09.jpg","comment_is_top":false,"comment_ctime":1557984619,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"扩展函数的声明和使用是简单的，会被编译成public static，新增加的第一个参数是扩展对象","like_count":2},{"had_liked":false,"id":16824,"user_name":"Simplation","can_delete":false,"product_type":"c3","uid":1176020,"ip_address":"","ucode":"22CC71D3B021AB","user_header":"https://static001.geekbang.org/account/avatar/00/11/f1/d4/bd644628.jpg","comment_is_top":false,"comment_ctime":1532239322,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"扩展函数是静态的给一个类添加成员变量和成员方法","like_count":2},{"had_liked":false,"id":358232,"user_name":"itismelzp","can_delete":false,"product_type":"c3","uid":1273999,"ip_address":"广东","ucode":"B838AB43CCF5D8","user_header":"https://static001.geekbang.org/account/avatar/00/13/70/8f/419240e4.jpg","comment_is_top":false,"comment_ctime":1664095304,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"为什么dog可以强转成animal？","like_count":0},{"had_liked":false,"id":205407,"user_name":"陈金鑫","can_delete":false,"product_type":"c3","uid":1077127,"ip_address":"","ucode":"609A24832CA80C","user_header":"https://static001.geekbang.org/account/avatar/00/10/6f/87/669263b4.jpg","comment_is_top":false,"comment_ctime":1586610628,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"扩展属性：\nval Animal.age: Int\n    get() = 12\n\nfun main() {\n    println(Animal().age)&#47;&#47; 12\n}","like_count":0},{"had_liked":false,"id":197890,"user_name":"bxtyfufff","can_delete":false,"product_type":"c3","uid":1175569,"ip_address":"","ucode":"61272AA17045BD","user_header":"https://static001.geekbang.org/account/avatar/00/11/f0/11/c75398da.jpg","comment_is_top":false,"comment_ctime":1585402195,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"扩展函数是静态的,实际是中转类对对象的调用。\n扩展的属性实际只是set和get的方法扩展，所以这个属性其实不能直接赋值","like_count":0}]}