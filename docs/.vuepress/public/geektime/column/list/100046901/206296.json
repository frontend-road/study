{"id":206296,"title":"02 | 云虚拟机（一）：云端“攒机”，有哪些容易忽视的要点？","content":"<p>你好，我是何恺铎。</p><p>前一讲，我先从数据中心的角度入手，和你讲解了云计算中“区域”和“可用区”的概念，帮助你建立起了大局观。今天，我们就开始进入微观层面，来介绍和讨论IaaS中最重要的核心服务：云虚拟机。</p><p>我想，你可能对虚拟机并不陌生，现在虚拟机的应用已经很普遍了。传统的物理服务器上通过安装虚拟化软件，就可以虚拟出多个互相隔离的虚拟机，来帮助我们提高资源的使用效率。云计算中的虚拟机，本质上也是如此，也是底层计算存储能力的抽象和开放。</p><p>所以你也许会问，那么云虚拟机到底有什么值得讨论的呢？看上去也就是选取CPU、内存、硬盘几大件，然后启动后登录使用，似乎没有什么新鲜的东西？</p><p>没错，云虚拟机粗看起来和传统服务器较为类似。但当你对它的应用逐渐深入、规模不断加大时，就非常有必要去深入了解云虚拟机的特点了，因为你开始需要针对不同的场景进行选型，也要在性能和成本间找到最佳的平衡，让你的应用效益最大化。</p><p>因此，我接下来就会用三讲课程，为你详细讲解下云端虚拟机的“门道”。</p><h2>云虚拟机到底是什么？</h2><p>云虚拟机，顾名思义，是在云端虚拟出的服务器。这个服务器你可以完全地控制它，从底层操作系统到安装上层应用。</p><p>站在技术实现的角度来讲，虚拟化技术是云虚拟机服务的核心，它本身是一个非常宏大的技术领域。比如你可能听说过Xen、KVM、VMWare、HyperV等等虚拟化产品和技术。云计算中所使用的虚拟化技术，也大都是从这些虚拟化实现方式演化而来的。</p><!-- [[[read_end]]] --><p>作为开发者，我们当然不需要成为虚拟化技术专家。我们只需要知道，云端的虚拟化技术在不断进步和发展，使得云端虚拟化的性能损耗在不断减少、资源利用率不断提升就可以了。但你很有必要去了解云计算中虚拟机的体系结构，这也是云虚拟机与传统虚拟机的最大不同。</p><p>云虚拟机的体系结构，用一句话来概括一下，就是全面解耦的<strong>计算存储分离</strong>的设计思想。</p><p><span class=\"reference\">小提示：计算存储分离是云计算设计理念中最重要的思想之一，不仅仅体现在虚拟机上，也体现在其他的云服务架构中。我们今后还会不断涉及。</span></p><p>传统的虚拟化，往往是对单一物理机器资源的纵向切割，计算、存储、网络等各方面的能力都是一台物理机的子集。因此，从可伸缩性的角度来说，传统虚拟机存在较大的局限，当物理机的局部出现故障时，也很容易影响到里面的虚拟机。</p><p>得益于云端大规模的专属硬件以及高速的内部网络，云虚拟机的组成则有所不同。除了核心的CPU与内存部分仍属于一台宿主机外，它的网络、硬盘等其他部分，则可以超脱于宿主机之外，享受云端其他基础设施的能力。大致架构如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/78/f9/785d6518852a25283a5337646a19a1f9.jpg?wh=1142*840\" alt=\"\"></p><p>你要注意的是，这里我所给出的仅仅是一个简化加工之后的示意图。实际的云计算内部实现，会远比这个要复杂和精妙。不同的云的内部，也会有许多不同的专用硬件各显神通。</p><p>所以，云虚拟机，与其说是由一台宿主机虚拟而成的，不如说是云数据中心中的不同部分一起协作，“拼凑”而成的一台机器。这样虚拟出来的机器，我们在使用感受上其实与传统服务器并无不同，但在可扩展性和故障隔离方面，它就具有很大的优势了。</p><p>举个例子来说，一台云虚拟机，它可以同时挂载很多硬盘，还能够插上很多“网卡”，拥有多个不同的外部IP。这就是充分解耦带来的好处。</p><p>各家厂商的云虚拟机服务的名称会略有不同，阿里云称为云服务器ECS（Elastic Compute Service），AWS称为EC2（Elastic Compute Cloud），Azure就叫Virtual Machine，腾讯云则叫做云服务器CVM（Cloud Virtual Machine）等等。</p><p>这里，你需要注意将虚拟机服务和一些建站类服务区分开来，因为它们有时在名称上可能比较类似。比如“云主机”这个叫法，很多云上就是指云虚拟机，在个别云上对应的却是简单建站服务，请你注意不要混淆。</p><p><span class=\"reference\">扩展：建站类服务主要是提供一些网站的托管运行环境，如PHP。它是一个相对受限的环境，严格来说属于PaaS服务的范畴，比较注重易用性。而虚拟机呢，则提供了一台真正意义上的服务器，从操作系统到上层应用，都可以自己控制，比起建站类服务来说要开放、通用得多。</span></p><p>虽然各个云厂商对云虚拟机有不同的叫法，但它们的产品形态是比较一致的。当你来到虚拟机服务的门户，一般会有一个列表界面，能够列出当前你拥有的所有虚拟机，你可以按照不同字段过滤、删选、排序。你还可以点击某个VM查看详情，界面一般会展示出VM的常用运行指标。</p><p><img src=\"https://static001.geekbang.org/resource/image/f8/91/f86e8298381c2bfcf7d101ff3ea92a91.jpg?wh=869*643\" alt=\"\"></p><center><span class=\"reference\">AWS EC2自带的指标监控</span> </center><h2>云端“攒机”实战</h2><p>讲到这里，你已经基本了解云虚拟机的概念了。接下来，让我们进入云虚拟机的实际操作环节。</p><p>所有的云上，创建虚拟机时一般都会有相当贴心的向导，你可以在虚拟机门户上点击“创建”，然后按照步骤一步步进行即可。今天，我们就以在阿里云上创建Linux虚拟机为例，帮你把“攒机”时最主要的环节串一串，同时顺便给你介绍一下，那些在“攒机”时容易被忽视但又非常关键的要点。</p><p><span class=\"reference\">小提示：在本次实验中，建议你选择“按量付费”的付费模式，这也是云计算的经典付费模式。这种模式是按虚拟机的使用时间付费，比较适合短期实验。当然，更多付费模式都各有特点，后面的<a href=\"https://time.geekbang.org/column/article/208917\">第4讲</a>中我们会进行比较和探讨。</span></p><p><strong>第一步，当然是选择和确认虚拟机的所在区域</strong>。区域的概念，我在上一讲中已经提到过，它决定了虚拟机的地理位置。</p><p><img src=\"https://static001.geekbang.org/resource/image/e9/99/e96a0f7c49173b188154929bfbaa9499.jpg?wh=1052*440\" alt=\"\"></p><p><span class=\"reference\">小提示：在部分云中，区域是顶级概念，指定新建虚拟机的区域需要你事先在门户的右上角进行选择和切换，如AWS。</span></p><p>这样，新建的虚拟机就会处于你当前选择的区域。你还可以指定区域内的特定可用区。</p><p><strong>随后，就是虚拟机的配置确认环节</strong>，也就是我们通常所说的什么型号、几个核、几G内存的选择。配置的选择无疑非常重要，我会在下一讲着重介绍，这里我们先不妨选择默认的2核8G配置。</p><p><img src=\"https://static001.geekbang.org/resource/image/90/b6/9063f760c1a2bc2fe49e266534ed29b6.jpg?wh=744*224\" alt=\"\"></p><p>接着，就有你需要注意的一个要点：<strong>选择操作系统镜像</strong>。在这里，你可以选择虚拟机所要安装和使用的操作系统，比如常见的CentOS和Ubuntu，同时你也需要选择这个系统具体的版本号。</p><p>在操作系统的列表中，你往往会看到厂商的自有操作系统，比如阿里云的Aliyun Linux、AWS的Amazon Linux等。这是一个很有意思的事情。既然已经有诸多流行的Linux发行版了，为什么云厂商还要推出自己的Linux版本呢？我们什么时候才应该考虑使用它们呢？</p><p><img src=\"https://static001.geekbang.org/resource/image/61/d9/61b6f428f8f492ba33a17c641af510d9.jpg?wh=829*117\" alt=\"\"></p><p>你可以这样理解：</p><ul>\n<li>首先，厂商的Linux版本，在理论上会和自己云上的硬件有更好的适配，这样能够更充分地发挥相关硬件的性能。一般来说，厂商也会在自己的云上进行充分的测试和验证。</li>\n<li>其次，在内核和基础组件的选择上，厂商专有操作系统往往会根据自己的需求判断，来进行一些取舍和裁剪，所以一般会有一个相对苗条的身材，占用比较小的磁盘空间，同时启动速度更快。这是一种更适合云环境的选择，尤其是当你的虚拟机集群规模较大时，就能够显出规模经济效应了。</li>\n<li>再次，厂商操作系统会预装和云的使用操作方面的一些软件包和SDK，能够为你提供便利。比如说，厂商一般会预装该云的命令行工具（CLI，Command Line Interface），像是AWS  CLI等。</li>\n<li>另外，当然也有云厂商出于“自主可控”方面的考虑，想拥有自己能完全控制的操作系统，不但技术上可以自主演化，还能防范一些商务合作上的风险。厂商自家的PaaS服务，它的底层也一般是使用自己的操作系统。</li>\n</ul><p>所以，如果你希望操作系统有更好的软件“兼容性”，或是公司有统一的标准，就可以选择熟悉的老牌Linux系统；而如果你有一些大规模、注重性能的业务，不妨考虑尝试下厂商的Linux操作系统。</p><p><strong>接下来，在系统盘方面，我们选择默认给出的40G“高效云盘”即可</strong>。云硬盘的故事非常精彩，我们<a href=\"https://time.geekbang.org/column/article/210423\">第5讲</a>中会专项讨论，这里你只需要保持这个默认选项就可以了。</p><p><img src=\"https://static001.geekbang.org/resource/image/33/31/334c79beaad866a9f85b09fdf6d3aa31.jpg?wh=637*128\" alt=\"\"></p><p><strong>点击“下一步”，我们来到网络和安全组的配置页面</strong>。在这里，你可以配置私有网络、IP、带宽等重要的网络选项。虚拟私有网络（VPC）同样是一个很大的话题，我们会在<a href=\"https://time.geekbang.org/column/article/211071\">第6讲</a>展开学习。</p><p>这里我们简单起见，请勾选“分配公网IP地址”的选项。这样创建的虚拟机，会自动被分配一个公开IP地址，便于我们稍后从自己的电脑直接发起连接。</p><p><img src=\"https://static001.geekbang.org/resource/image/e5/0e/e5b2880979b3c1a5019a80becb0c600e.jpg?wh=632*326\" alt=\"\"></p><p>今天我想着重讨论的另一个重点，是接下来选项中的<strong><span class=\"orange\">网络安全组</span></strong>（Network Security Group, 简称NSG）。如果这里配置不当，就会直接影响虚拟机的使用。很多新同学由于不太了解这个概念，常常会造成无法远程连接登录的情况。</p><p>你可以把网络安全组理解为一层覆盖在虚拟机之外的网络防火墙。它能够控制虚拟机入站、出站的流量，并能根据协议、端口、流向等所设定的规则，来决定是否允许流量通过。</p><p>所以某种程度上，网络安全组和操作系统中我们熟知的防火墙（如Linux的iptables和Windows防火墙）一样，都起到网络安全防护的作用。</p><p>但你需要注意的是它们的区别：网络安全组并不工作在操作系统层面，而是在操作系统层之外，是额外的一层防护。非法流量在尚未到达OS的网络堆栈之前，就已经被它阻断了。所以<strong>NSG的一个优点在于，它不会影响VM的性能。</strong></p><p>另外，<strong>网络安全组是一种可复用的配置</strong>。如果你有大量虚拟机适用于同样的网络控制规则，那么，你就能够很方便地让它们使用同一个网络安全组，这样你管理起来会非常方便。</p><p>网络安全组是绝大多数云都支持和实现了重要特性，它体现了云计算中<strong>软件定义网络</strong>的特点。网络安全组非常灵活，你可以随时更改，规则也会动态生效。</p><p><span class=\"reference\">小提示：当你在排查虚拟机的连通性相关问题时，比如假设你的网站或API无法被访问，那你一定要记得检查网络安全组中的设置，查看它相关的端口和协议是否已经开放。</span></p><p><img src=\"https://static001.geekbang.org/resource/image/4a/ab/4ae25a707929d30b41c1d91c0803dfab.jpg?wh=605*333\" alt=\"\"></p><p>OK，回到我们虚拟机创建的流程，所以我们要创建或使用一个，至少开放了<strong>22端口</strong>的网络安全组，以便我们能够通过SSH连接上去。阿里云中，就提供了方便的“默认安全组”，我们只需要勾选需要开放的端口，就会帮助我们生成一个安全组实例，并对这台机器启用。你也可以事先手工创建一个安全组，并在此处选择。</p><p><img src=\"https://static001.geekbang.org/resource/image/99/4e/998ab7dd2987d2c2adb7aeedb05cca4e.jpg?wh=727*178\" alt=\"\"></p><p><strong>再点击下一步，我们就进入了“系统配置”阶段</strong>，在这里，你可以为实例命名，指定用于登录的用户名密码或密钥对等，这里比较简单我就不再赘述了。</p><p><img src=\"https://static001.geekbang.org/resource/image/7a/91/7aefdff1f6f390eab112e0c612910991.jpg?wh=876*267\" alt=\"\"></p><p>然后，暂时跳过一些可选的高级设置，<strong>确认订单后，按下“创建实例”，就可以等待虚拟机的生成了</strong>。一般数十秒至数分钟之内，一台崭新的云服务器就会就绪，进入运行状态。</p><p><img src=\"https://static001.geekbang.org/resource/image/3d/03/3d6eb8164a7096fad0e1bfca06a88b03.jpg?wh=614*82\" alt=\"\"></p><p>此时，你可以通过SSH连接上虚拟机的公开IP，使用hostnamectl命令查看一下虚拟机的信息，嗯，一切正常。</p><pre><code>client@clientVM:~$ ssh -i ./geektime-ali-sh.pem root@101.133.209.214\nWelcome to Alibaba Cloud Elastic Compute Service !\n\n[root@my-ecs-vm1 ~]# hostnamectl\n   Static hostname: my-ecs-vm1\n         Icon name: computer-vm\n           Chassis: vm\n        Machine ID: 201908292149004344218446xxxxxxxx\n           Boot ID: 2228122a7f3c4b4eb5756824xxxxxxxx\n    Virtualization: kvm\n  Operating System: Aliyun Linux 2.1903 (Hunting Beagle)\n            Kernel: Linux 4.19.57-15.1.al7.x86_64\n      Architecture: x86-6\n</code></pre><p>成功地登录上去之后，你就可以正常使用这台机器了。比如，通常我们会使用yum或apt等包管理器进行一些应用软件的安装。</p><p>到这里，我就带你初步体验完了云虚拟机的创建过程。VM类服务的本质就是租用，我们通过在门户上的简单操作，就能够完成一台定制服务器的“租用”过程。</p><p>从原理上说，这和租户从房东那租房子其实没有什么两样。而且云上的租用相当便捷，动动手指你就能轻松完成。唯一不同的是，云厂商一般不会把租客“扫地出门”，只要你按时付费，一般不会出现不允许续租的情况。</p><h2>课堂总结与思考</h2><p>在今天这一讲中，我先帮助你了解了云虚拟机的一些理论知识，尤其是一些体系结构方面的特点。然后，我们进入了创建云虚拟机的实操环节，了解了相关的流程和步骤，也讨论了其中所牵涉的一些注意事项。<strong>我强烈建议你自己也动手操作一下，完成从创建到连接的全过程，形成一个直观的感受。</strong></p><p>我们把这一讲的要点总结如下：</p><ul>\n<li>云虚拟机是最重要的IaaS服务之一，它基于计算存储分离的架构进行构建；</li>\n<li>云虚拟机的创建过程，由地域、机型、操作系统、存储、网络等多方面选项共同构成；</li>\n<li>云虚拟机可使用云厂商自有操作系统，与云有较好的适配；</li>\n<li>网络安全组是保护云虚拟机的网络防火墙，可以同时应用于多个虚拟机。</li>\n</ul><p>在今天我们实践的过程中，也引出了若干重要的概念和选项，如机型配置、云硬盘、云网络等等。后续我们会逐个地展开讨论，敬请期待。</p><p><strong>最后，给你留下两个思考题</strong>：</p><ul>\n<li>在上面的实验当中，为了便于连接我们给机器自动分配了公网IP。在生产环境中为了安全性考虑，应该尽可能避免给虚拟机分配公网IP，那么这时你如何连接到这些机器呢？</li>\n<li>暂时不再使用的云虚拟机，和传统服务器一样可以“关机”。关机状态的云虚拟机仍然会存在于虚拟机列表中，随时可以再启动。那么，关机之后它还会继续收费吗？</li>\n</ul><p>欢迎你在留言区和我互动，我会第一时间给你反馈。如果觉得有收获，也欢迎你把这篇文章分享给你的朋友。感谢阅读，我们下期再见。</p>","neighbors":{"left":{"article_title":"01 | 区域和可用区：欢迎来到云端数据中心","id":206253},"right":{"article_title":"03 | 云虚拟机（二）：眼花缭乱的虚拟机型号，我该如何选择？","id":208288}},"comments":[{"had_liked":false,"id":184207,"user_name":"拉斯","can_delete":false,"product_type":"c1","uid":1001794,"ip_address":"","ucode":"4D70DD07652F8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/42/460df60d.jpg","comment_is_top":true,"comment_ctime":1583246963,"is_pvip":false,"replies":[{"id":"71350","content":"比较正确的回答，赞。另外，要注意在有的云上会有两种关机状态，一种收费（计算资源仍然为你保留），一种不收费（计算资源被回收，下次启动时再动态分配）。需要注意查看提示并区分。","user_name":"作者回复","user_name_real":"何恺铎","uid":"1011765","ctime":1583328805,"ip_address":"","comment_id":184207,"utype":1}],"discussion_count":2,"race_medal":0,"score":"9.2233721329272996e+18","product_id":100046901,"comment_content":"1、vpn，或者虚拟机作为跳板机，通过安全组设置来源访问ip和相应端口。  2、关机是指cpu和内存部分不收费，ip和云硬盘还会继续收费。","like_count":22,"discussions":[{"author":{"id":1011765,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/70/35/28758547.jpg","nickname":"何恺铎","note":"","ucode":"D7EDA2A7A8978E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485929,"discussion_content":"比较正确的回答，赞。另外，要注意在有的云上会有两种关机状态，一种收费（计算资源仍然为你保留），一种不收费（计算资源被回收，下次启动时再动态分配）。需要注意查看提示并区分。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583328805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1031970,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bf/22/26530e66.jpg","nickname":"趁早","note":"","ucode":"949FB3AA250D80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215168,"discussion_content":"关机就是关机，资源都会保留，回收才会保留一定期限后进行彻底清除，保留期间是收费的，当然不排除某些云厂商直接给你干掉。这种一般不太合理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585295374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184247,"user_name":"北卡","can_delete":false,"product_type":"c1","uid":1218128,"ip_address":"","ucode":"2D947A61689FC6","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg","comment_is_top":true,"comment_ctime":1583256909,"is_pvip":false,"replies":[{"id":"71356","content":"因为这是刚开始，我们需要把各个环节串一串，另外也照顾部分完全没有接触过的同学。不过还是谢谢你的反馈。","user_name":"作者回复","user_name_real":"何恺铎","uid":"1011765","ctime":1583330297,"ip_address":"","comment_id":184247,"utype":1}],"discussion_count":4,"race_medal":0,"score":"9.2233720770927002e+18","product_id":100046901,"comment_content":"我觉得怎样建服务器这些步骤没必要一一介绍这么详细。主要还是想听云计算的设计、架构、最佳实践方法这些理论知识。","like_count":9,"discussions":[{"author":{"id":1281834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/yjPribEvEjfucxIXMz37icztGulgcuBAEQllOWKypiamntLLxkRIb20L7CQ2MVJxSt2KpyXW4dLpgL9YjbkDe9pAQ/132","nickname":"sanyu.h","note":"","ucode":"E4851BF6E2FB17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204715,"discussion_content":"做为阿里云内部用户 觉得这个介绍是有价值的","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1584200565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066928,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/b0/a9b77a1e.jpg","nickname":"冬风向左吹","note":"","ucode":"376C45C5134F93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202390,"discussion_content":"步骤还是要有的，要照顾一下没用过的同学，譬如我","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1583912228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1224878,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b0/ae/6c6913a2.jpg","nickname":"兰悦儿格格","note":"","ucode":"02570156A2BC21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333263,"discussion_content":"我这个不大懂的就想听这些，我觉得这个对我挺有用的","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1607491755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1011765,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/70/35/28758547.jpg","nickname":"何恺铎","note":"","ucode":"D7EDA2A7A8978E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485945,"discussion_content":"因为这是刚开始，我们需要把各个环节串一串，另外也照顾部分完全没有接触过的同学。不过还是谢谢你的反馈。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1583330297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207917,"user_name":"何恺铎","can_delete":false,"product_type":"c1","uid":1011765,"ip_address":"","ucode":"D7EDA2A7A8978E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/70/35/28758547.jpg","comment_is_top":true,"comment_ctime":1587215614,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"9.2233720642118001e+18","product_id":100046901,"comment_content":"[上讲问题参考回答]<br>“本地区域”是AWS为了进一步拓展云服务的地域覆盖而提出的，其目的同样是为了让计算存储离用户更近。“本地区域”(Local Zone)并非一个完整的区域，层级上其实更接近“可用区”(Availability Zone)，这从本地区域的子网可以和其他可用区的子网一起组成VPC能够看出来，他们的英文名也都使用了Zone这个词。","like_count":6},{"had_liked":false,"id":184241,"user_name":"Helios","can_delete":false,"product_type":"c1","uid":1380758,"ip_address":"","ucode":"BE6B98EE8F0D09","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJrOl63enWXCRxN0SoucliclBme0qrRb19ATrWIOIvibKIz8UAuVgicBMibIVUznerHnjotI4dm6ibODA/132","comment_is_top":true,"comment_ctime":1583253411,"is_pvip":false,"replies":[{"id":"71352","content":"回答正确~ 另外还需要注意两种关机状态，可参见我另一条回复。","user_name":"作者回复","user_name_real":"何恺铎","uid":"1011765","ctime":1583329888,"ip_address":"","comment_id":184241,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720556179005e+18","product_id":100046901,"comment_content":"1. 通过vpn或者跳板机<br>2. 如果是租约性质的话肯定是还是按月收费，如果是走流量的话，计算流量那部分钱就不收了，存储的钱还是会收的。","like_count":4,"discussions":[{"author":{"id":1011765,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/70/35/28758547.jpg","nickname":"何恺铎","note":"","ucode":"D7EDA2A7A8978E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485941,"discussion_content":"回答正确~ 另外还需要注意两种关机状态，可参见我另一条回复。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583329888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185997,"user_name":"cloudwas","can_delete":false,"product_type":"c1","uid":1563156,"ip_address":"","ucode":"F77C386938EEF9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epgyBDKU622NSIWQheNP911BeKFKQJYdCOae6dQsEFcz39L5mzX43kNCwKObRQgTRlYwcRlItnibMQ/132","comment_is_top":true,"comment_ctime":1583740288,"is_pvip":false,"replies":[{"id":"72025","content":"没错，是否收费的本质在于资源是否释放。但你需要注意，很多时候“关机”是深层关机，是会“释放”资源的（再次启动时会再申请资源），因此也就不会收费，保留的硬盘除外。","user_name":"作者回复","user_name_real":"何恺铎","uid":"1011765","ctime":1583858108,"ip_address":"","comment_id":185997,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720427335004e+18","product_id":100046901,"comment_content":"1. 需要使用客户环境时，经常会使用 VPN、跳板机<br>2. 按量付费资源从创建开始付费，到释放结束付费，“释放” 是指执行的释放资源操作，因欠费系统也会触发的自动释放，释放实例，才会结束计费。只是在控制台上，停止实例，不会停止计费。","like_count":1,"discussions":[{"author":{"id":1011765,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/70/35/28758547.jpg","nickname":"何恺铎","note":"","ucode":"D7EDA2A7A8978E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486574,"discussion_content":"没错，是否收费的本质在于资源是否释放。但你需要注意，很多时候“关机”是深层关机，是会“释放”资源的（再次启动时会再申请资源），因此也就不会收费，保留的硬盘除外。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583858108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183885,"user_name":"chanllenge","can_delete":false,"product_type":"c1","uid":1213699,"ip_address":"","ucode":"148FC08C90BC58","user_header":"https://static001.geekbang.org/account/avatar/00/12/85/03/1a7d3dd6.jpg","comment_is_top":false,"comment_ctime":1583154285,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27352958061","product_id":100046901,"comment_content":"可以讲一些云计算原理相关的东西吗？觉得内容偏介绍了一些","like_count":6},{"had_liked":false,"id":183881,"user_name":"绿捷智航","can_delete":false,"product_type":"c1","uid":1000405,"ip_address":"","ucode":"B6CD42A7B6E012","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/d5/2960f991.jpg","comment_is_top":false,"comment_ctime":1583152929,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23057989409","product_id":100046901,"comment_content":"1 使用vpn技术<br>2 关机后虽然没有了流量，这部分不会收费，但是仍会占用磁盘空间等资源，所以仍会收取一定的费用。","like_count":5},{"had_liked":false,"id":184140,"user_name":"SMTCode","can_delete":false,"product_type":"c1","uid":1109038,"ip_address":"","ucode":"0D837A753E4FAB","user_header":"https://static001.geekbang.org/account/avatar/00/10/ec/2e/49d13bd2.jpg","comment_is_top":false,"comment_ctime":1583236392,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18763105576","product_id":100046901,"comment_content":"云计算就是把网络、计算、存储分离开来，领活组合，构成了云虚拟机。这样的组合有更高的可用性、可扩展性、容错性。也利于云厂商合理规划资源，实现80%的云资源用于20%的热点服务上。通过这样资源优化，充分利用了资源，通过按需分配的方式，降低了用户的直接成本。更重要的是：很多基础安全、监控等服务不需要用户自身去考虑了，用户可以专心于创意应用之上。互利共赢。","like_count":4},{"had_liked":false,"id":189944,"user_name":"Geek_wadehao","can_delete":false,"product_type":"c1","uid":1918225,"ip_address":"","ucode":"F46FFAFC4933D6","user_header":"https://static001.geekbang.org/account/avatar/00/1d/45/11/51aaa953.jpg","comment_is_top":false,"comment_ctime":1584584766,"is_pvip":false,"replies":[{"id":"73206","content":"弹性网卡就是云上的虚拟网卡，是一个虚拟化的逻辑组件，所以叫“弹性网卡”。云上在用户使用层面没有“普通网卡”之说。","user_name":"作者回复","user_name_real":"何恺铎","uid":"1011765","ctime":1584631037,"ip_address":"","comment_id":189944,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14469486654","product_id":100046901,"comment_content":"弹性网卡和普通网卡有什么区别吗？","like_count":3,"discussions":[{"author":{"id":1011765,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/70/35/28758547.jpg","nickname":"何恺铎","note":"","ucode":"D7EDA2A7A8978E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487836,"discussion_content":"弹性网卡就是云上的虚拟网卡，是一个虚拟化的逻辑组件，所以叫“弹性网卡”。云上在用户使用层面没有“普通网卡”之说。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584631037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184027,"user_name":"怀朔","can_delete":false,"product_type":"c1","uid":1006865,"ip_address":"","ucode":"52FAC1C2FD37B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/11/e1f36640.jpg","comment_is_top":false,"comment_ctime":1583208009,"is_pvip":false,"replies":[{"id":"71526","content":"两台机器是否“隔离”，和是否使用同一个安全组没有关系，而是取决于安全组内定义的流量控制规则，以及所处的网络拓扑结构。","user_name":"作者回复","user_name_real":"何恺铎","uid":"1011765","ctime":1583505008,"ip_address":"","comment_id":184027,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14468109897","product_id":100046901,"comment_content":"网络安全组有一个最大同病 同个安全组内机器 无法通过安全组隔离。","like_count":3,"discussions":[{"author":{"id":1011765,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/70/35/28758547.jpg","nickname":"何恺铎","note":"","ucode":"D7EDA2A7A8978E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485858,"discussion_content":"两台机器是否“隔离”，和是否使用同一个安全组没有关系，而是取决于安全组内定义的流量控制规则，以及所处的网络拓扑结构。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583505008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006865,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/11/e1f36640.jpg","nickname":"怀朔","note":"","ucode":"52FAC1C2FD37B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198463,"discussion_content":"老师 满分 我一定从开始跟到最后 这个是我今年的目标","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583505263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183891,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1464199,"ip_address":"","ucode":"854500026E2187","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKhuGLVRYZibOTfMumk53Wn8Q0Rkg0o6DzTicbibCq42lWQoZ8lFeQvicaXuZa7dYsr9URMrtpXMVDDww/132","comment_is_top":false,"comment_ctime":1583155825,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14468057713","product_id":100046901,"comment_content":"vpn<br><br>实例没释放是会收费的","like_count":4},{"had_liked":false,"id":183863,"user_name":"夜空中最亮的星","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1583148602,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10173083194","product_id":100046901,"comment_content":"不分配公网IP的虚拟机，可以通过跳板机接入。关机收不收费要看是按量付费还是包年包月吧，不知回答的对不对。以前还真没注意云厂商的自研系统","like_count":2},{"had_liked":false,"id":187041,"user_name":"roger","can_delete":false,"product_type":"c1","uid":1053192,"ip_address":"","ucode":"A4C01B958183F2","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/08/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1583998297,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878965593","product_id":100046901,"comment_content":"想请教一下弹性网卡的实现原理和方式","like_count":1},{"had_liked":false,"id":185498,"user_name":"腾挪","can_delete":false,"product_type":"c1","uid":1003853,"ip_address":"","ucode":"E80661F2235344","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/4d/0aceadde.jpg","comment_is_top":false,"comment_ctime":1583593942,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878561238","product_id":100046901,"comment_content":"1、可以通过虚拟路由器的端口转发方式，进去到云主机。<br><br>2、还是要看个厂商的收费策略，一般都是需要为占用的资源付费的。","like_count":1},{"had_liked":false,"id":184366,"user_name":"Edwin","can_delete":false,"product_type":"c1","uid":1024532,"ip_address":"","ucode":"09A672B9BA442B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a2/14/bdfab81d.jpg","comment_is_top":false,"comment_ctime":1583299453,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5878266749","product_id":100046901,"comment_content":"1. 使用跳板机&#47;保垒机<br>2. 收硬盘使用费<br>","like_count":1},{"had_liked":false,"id":183840,"user_name":"疯语者","can_delete":false,"product_type":"c1","uid":1042709,"ip_address":"","ucode":"6D5554D14B41E5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e9/15/c809e7b3.jpg","comment_is_top":false,"comment_ctime":1583144047,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878111343","product_id":100046901,"comment_content":"答1: 可以使用服务商的vnc或者命令行工具访问虚拟机。当有多台虚拟机的时候，也可以开启一台机器作为网关，再使用集群工具控制其他虚拟机。<br><br>答2: 印象里有两种收费模式，一个是租用模式，无论是否开机都收费。二是弹性方式，使用时候按照使用的资源动态缴费，用不到的资源不缴费，但是好像会有一个“底”钱，类似“保号费”","like_count":1},{"had_liked":false,"id":183839,"user_name":"业余爱好者","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1583143967,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878111263","product_id":100046901,"comment_content":"计算和存储分离的设计在传统架构上也有体现。现在的微服务的存储部分，如各种数据库与服务的进程并不在一台机器上。<br><br>1.没有公网ip的云主机的访问肯定要经过一个云服务的厂商的公网ip,然后指定自己的内网ip,相当于一个用户名。就像nginx代理一样。<br><br>2.中文说云主机可以有租和按量两种计费方式。如果租的化肯定收费，按量的话应该不收，或者少收。<br><br>没有使用经验，只能猜了。","like_count":1},{"had_liked":false,"id":355775,"user_name":"剑客初心","can_delete":false,"product_type":"c1","uid":3109588,"ip_address":"北京","ucode":"3D66C92AE99E33","user_header":"https://static001.geekbang.org/account/avatar/00/2f/72/d4/661fb61c.jpg","comment_is_top":false,"comment_ctime":1661743442,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661743442","product_id":100046901,"comment_content":"1、可以通过NAT网关 DNAT连接<br>2、我理解的话，如果是按量计费，关机以后流量费用就不计费了，但是不确定是不是还有实例费用，只要不释放应该会收费","like_count":0},{"had_liked":false,"id":328918,"user_name":"上沅同学","can_delete":false,"product_type":"c1","uid":1238646,"ip_address":"","ucode":"CDE043A508E4EA","user_header":"https://static001.geekbang.org/account/avatar/00/12/e6/76/26f555ce.jpg","comment_is_top":false,"comment_ctime":1640935719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640935719","product_id":100046901,"comment_content":"这个课程真的相见恨晚，对于像我这种想要系统了解云服务器相关知识的同学来说，真的是很好的入门课了！","like_count":0},{"had_liked":false,"id":278095,"user_name":"嘻嘻","can_delete":false,"product_type":"c1","uid":1325931,"ip_address":"","ucode":"E1EB75DD1C05E0","user_header":"","comment_is_top":false,"comment_ctime":1612759055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612759055","product_id":100046901,"comment_content":"老师，请教下，云硬盘扩容时，对于我的云主机而言，是新挂载了一块硬盘，还是原来的盘扩大了？","like_count":0},{"had_liked":false,"id":278071,"user_name":"嘻嘻","can_delete":false,"product_type":"c1","uid":1325931,"ip_address":"","ucode":"E1EB75DD1C05E0","user_header":"","comment_is_top":false,"comment_ctime":1612750200,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612750200","product_id":100046901,"comment_content":"老师，请问下公有云的安全性是否靠谱，我云上的数据有没有可能被云厂商偷窥？导致商业秘密泄露？","like_count":0},{"had_liked":false,"id":239794,"user_name":"易轻尘","can_delete":false,"product_type":"c1","uid":1136684,"ip_address":"","ucode":"0D0CB9D6D45A70","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/2c/92c7ce3b.jpg","comment_is_top":false,"comment_ctime":1596642930,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1596642930","product_id":100046901,"comment_content":"看答案前的回答：<br>1. 像GCP这种云服务厂商直接通过浏览器提供控制台连接；使用一台虚拟机作为跳板机？<br>2. 这取决于创建虚拟机时所选择的付费模式","like_count":0},{"had_liked":false,"id":215346,"user_name":"开心噶花苞","can_delete":false,"product_type":"c1","uid":1959550,"ip_address":"","ucode":"848A07A46FF17D","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e6/7e/1651f825.jpg","comment_is_top":false,"comment_ctime":1588959164,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588959164","product_id":100046901,"comment_content":"有一个很小白很实用的建议就是如果想体验一下AWS的免费一年，一定要先搜一下类似这样的文章：AWS有多少坑。这样你会省很多钱。例如如果你建了两个VM，它其实会按双倍的时间计算。还有很多。。。。","like_count":0},{"had_liked":false,"id":215345,"user_name":"开心噶花苞","can_delete":false,"product_type":"c1","uid":1959550,"ip_address":"","ucode":"848A07A46FF17D","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e6/7e/1651f825.jpg","comment_is_top":false,"comment_ctime":1588958848,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1588958848","product_id":100046901,"comment_content":"为什么好像一直没有提google 的GCP 呢","like_count":0,"discussions":[{"author":{"id":1004119,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/57/af4e58e8.jpg","nickname":"行者无疆","note":"","ucode":"80F19373FCF82B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309353,"discussion_content":"因为是“不存在”的网站","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601264133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197254,"user_name":"JT","can_delete":false,"product_type":"c1","uid":1908462,"ip_address":"","ucode":"5A611DA50EA12C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/sdrJiaOicpzmQEp5SGGl8SmsQHOAn34ylKFXEbEOuF5a6n2U1kJPFCmcaO7S6AicRI7L90HDN6tbovG1D5CLbDwVw/132","comment_is_top":false,"comment_ctime":1585365613,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585365613","product_id":100046901,"comment_content":"用VPN，或者通过其他服务器跳转一下","like_count":0},{"had_liked":false,"id":190402,"user_name":"戴斌","can_delete":false,"product_type":"c1","uid":1119385,"ip_address":"","ucode":"7DC53BEA432217","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/99/5b1ed92b.jpg","comment_is_top":false,"comment_ctime":1584640107,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584640107","product_id":100046901,"comment_content":"我们通过跳板机远程服务器","like_count":0},{"had_liked":false,"id":189189,"user_name":"周","can_delete":false,"product_type":"c1","uid":1030086,"ip_address":"","ucode":"5595CC944F4A08","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b7/c6/839984bc.jpg","comment_is_top":false,"comment_ctime":1584471219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584471219","product_id":100046901,"comment_content":"在生产环境中为了安全性考虑，一般使用堡垒机连接服务器；<br>如果关机的话，得看你当时购买的模式，是按量流量收费还是直接购买一段时间的服务（月或年）","like_count":0},{"had_liked":false,"id":187584,"user_name":"摇滚诗人M","can_delete":false,"product_type":"c1","uid":1322082,"ip_address":"","ucode":"764F4EF205C406","user_header":"https://static001.geekbang.org/account/avatar/00/14/2c/62/94688493.jpg","comment_is_top":false,"comment_ctime":1584164593,"is_pvip":false,"replies":[{"id":"72391","content":"早年是Xen，现在用KVM的多一些。当然，微软用的是自家的技术。","user_name":"作者回复","user_name_real":"何恺铎","uid":"1011765","ctime":1584179061,"ip_address":"","comment_id":187584,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584164593","product_id":100046901,"comment_content":"想请问一下，各个云厂商实现虚拟机所使用的的虚拟化技术用的是哪一些？VMware vSphere、微软Hyper-V、Citrix XenServer 、IBM PowerVM、Red Hat Enterprise Virtulization、Huawei FusionSphere、开源的KVM、Xen、VirtualBSD？","like_count":0,"discussions":[{"author":{"id":1011765,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/70/35/28758547.jpg","nickname":"何恺铎","note":"","ucode":"D7EDA2A7A8978E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487157,"discussion_content":"早年是Xen，现在用KVM的多一些。当然，微软用的是自家的技术。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584179061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1471086,"avatar":"https://static001.geekbang.org/account/avatar/00/16/72/6e/b516d9ab.jpg","nickname":"彩新","note":"","ucode":"43779B64188F6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386579,"discussion_content":"国内云厂商主要是kvm","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627650977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184664,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1583379119,"is_pvip":false,"replies":[{"id":"71524","content":"谢谢你的回答。注意关机之后，和“流量”没有关系哦，我们这里不涉及网络流量费用。我猜你想说的是“按量付费”模式，指的是虚拟机按使用时长收费。此模式下关机，收不收费也分两种情况，参见我给其他评论的回答。","user_name":"作者回复","user_name_real":"何恺铎","uid":"1011765","ctime":1583504109,"ip_address":"","comment_id":184664,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1583379119","product_id":100046901,"comment_content":"今天的两个问题给出自己理解：<br>&quot;生产环境中为了安全性考虑，应该尽可能避免给虚拟机分配公网 IP，那么这时你如何连接到这些机器呢？&quot;<br>通常的做法是中间通过防火墙跳过去：例如：深信服、山石之类的；通过他们在中间做一层安全策略，之后再跳转过去；云厂商最近同样提倡用他们的客户端去连服务器，而非直接用VNC、远程桌面之类的工具，应当是厂商在这块做了相应的安全策略<br>暂时不再使用的云虚拟机，和传统服务器一样可以“关机”。关机状态的云虚拟机仍然会存在于虚拟机列表中，随时可以再启动。那么，关机之后它还会继续收费吗？<br>这个我记得好像是有策略的：这其实是看买的是包月还是流量，流量的云计算没买过，网盘倒是买过；记得有些是保留一定的时间。云计算这块看样子真要玩熟悉，固定和流量都得折腾一套才行。<br>包年的云计算自己有购买过，磁盘整体代价蛮低的，贵的是内存和cpu；是否保留其实一切都是一个词“代价”，合适的代价就可以获得合适的服务。<br>有见过关机后依然保存的，不过具体代价多少就不知。<br>谢谢老师的分享：跟着学习，跟着进步；享受其中，收获其中。<br>","like_count":0,"discussions":[{"author":{"id":1011765,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/70/35/28758547.jpg","nickname":"何恺铎","note":"","ucode":"D7EDA2A7A8978E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486086,"discussion_content":"谢谢你的回答。注意关机之后，和“流量”没有关系哦，我们这里不涉及网络流量费用。我猜你想说的是“按量付费”模式，指的是虚拟机按使用时长收费。此模式下关机，收不收费也分两种情况，参见我给其他评论的回答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583504109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183852,"user_name":"潘政宇","can_delete":false,"product_type":"c1","uid":1254758,"ip_address":"","ucode":"9A6658EE862D95","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/66/4835d92e.jpg","comment_is_top":false,"comment_ctime":1583145580,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1583145580","product_id":100046901,"comment_content":"1.vpn 2.关机后不收费","like_count":0}]}