{"id":358668,"title":"ç‰¹åˆ«å‘é€ï¼ˆä¸€ï¼‰ | ç»å…¸é¢è¯•é¢˜è®²è§£ç¬¬ä¸€å¼¹","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™“å³°ã€‚</p><p>åˆ°è¿™é‡Œï¼Œâ€œå®è·µç¯‡â€çš„å†…å®¹å’±ä»¬å°±å­¦å®Œäº†ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥å­¦ç‚¹å„¿ä¸ä¸€æ ·çš„â€”â€”5é“ç»å…¸é¢è¯•é¢˜ã€‚è¿™äº›éƒ½æ˜¯åœ¨å®é™…é¢è¯•ä¸­çš„åŸé¢˜ï¼Œå½“ç„¶ï¼Œæˆ‘æ²¡æœ‰å®Œå…¨ç…§æ¬ï¼Œè€Œæ˜¯ç»“åˆå’±ä»¬è¯¾ç¨‹çš„å…·ä½“æƒ…å†µï¼Œæœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œäº†è°ƒæ•´ã€‚æˆ‘ä¸ä»…ä¼šç»™ä½ æä¾›ç­”æ¡ˆï¼Œè¿˜ä¼šå’Œä½ ä¸€èµ·åˆ†æï¼Œè®©ä½ èƒ½å¤Ÿçµæ´»åœ°åƒé€è¿™äº›é¢˜ç›®ï¼Œå¹¶èƒ½ä¸¾ä¸€åä¸‰ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç°åœ¨å¼€å§‹ã€‚æˆ‘å…ˆå¸¦ä½ ä»ä¸€é“ç®€å•çš„å…³äºâ€œç´¢å¼•â€çš„é¢è¯•é¢˜å…¥æ‰‹ï¼Œç´¢å¼•åœ¨é¢è¯•é¢˜é‡Œç»å¸¸å‡ºç°ï¼Œæ¥çœ‹çœ‹è¿™ä¸€é“ä½ èƒ½ä¸èƒ½åšå¯¹ã€‚</p><h2>ç¬¬ä¸€é¢˜</h2><p>ä¸‹é¢å…³äºç´¢å¼•çš„æè¿°ï¼Œæ­£ç¡®çš„æ˜¯ï¼š</p><ol>\n<li>å»ºç«‹ç´¢å¼•çš„ä¸»è¦ç›®çš„æ˜¯å‡å°‘å†—ä½™æ•°æ®ï¼Œä½¿æ•°æ®è¡¨å ç”¨æ›´å°‘çš„ç©ºé—´ï¼Œå¹¶ä¸”æé«˜æŸ¥è¯¢çš„é€Ÿåº¦</li>\n<li>ä¸€ä¸ªè¡¨ä¸Šå¯ä»¥å»ºç«‹ä¸€ä¸ªæˆ–è€…å¤šä¸ªç´¢å¼•</li>\n<li>ç»„åˆç´¢å¼•å¯ä»¥æœ‰æ•ˆæé«˜æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œæ¯”å•å­—æ®µç´¢å¼•æ›´é«˜æ•ˆï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥åˆ›å»ºä¸€ä¸ªç”±æ‰€æœ‰çš„å­—æ®µç»„æˆçš„ç»„åˆç´¢å¼•ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³æ‰€æœ‰é—®é¢˜äº†</li>\n<li>å› ä¸ºç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œæ‰€ä»¥ç´¢å¼•å»ºå¾—è¶Šå¤šè¶Šå¥½</li>\n</ol><p>è§£æï¼šè¿™é“é¢˜çš„æ­£ç¡®ç­”æ¡ˆæ˜¯é€‰é¡¹2ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å…¶ä»–é€‰é¡¹ã€‚</p><ul>\n<li>é€‰é¡¹1è¯´å¯¹äº†ä¸€åŠï¼Œç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œä½†æ˜¯åˆ›å»ºç´¢å¼•ä¸èƒ½å‡å°‘å†—ä½™æ•°æ®ï¼Œè€Œä¸”ç´¢å¼•è¿˜è¦å ç”¨é¢å¤–çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥é€‰é¡¹1ä¸å¯¹ã€‚</li>\n<li>é€‰é¡¹3ä¸å¯¹çš„åŸå› æœ‰2ä¸ªã€‚ç¬¬ä¸€ï¼Œç»„åˆç´¢å¼•ä¸ä¸€å®šæ¯”å•å­—æ®µç´¢å¼•é«˜æ•ˆï¼Œå› ä¸ºç»„åˆç´¢å¼•çš„å­—æ®µæ˜¯æœ‰åºçš„ï¼Œéµå¾ªå·¦å¯¹é½çš„åŸåˆ™ã€‚å¦‚æœæŸ¥è¯¢çš„ç­›é€‰æ¡ä»¶ä¸åŒ…å«ç»„åˆç´¢å¼•ä¸­æœ€å·¦è¾¹çš„å­—æ®µï¼Œé‚£ä¹ˆç»„åˆç´¢å¼•å°±å®Œå…¨ä¸èƒ½ç”¨ã€‚ç¬¬äºŒï¼Œåˆ›å»ºç´¢å¼•ä¹Ÿæ˜¯æœ‰æˆæœ¬çš„ï¼Œéœ€è¦å ç”¨é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚ç”¨æ‰€æœ‰çš„å­—æ®µåˆ›å»ºç»„åˆç´¢å¼•çš„å­˜å‚¨æˆæœ¬æ¯”è¾ƒé«˜ï¼Œè€Œä¸”åˆ©ç”¨ç‡æ¯”è¾ƒä½ï¼Œå®Œå…¨ç”¨ä¸Šçš„å¯èƒ½æ€§å‡ ä¹ä¸å­˜åœ¨ï¼Œæ‰€ä»¥å¾ˆå°‘æœ‰äººä¼šè¿™æ ·åšã€‚è€Œä¸”ä¸€æ—¦æ›´æ”¹ä»»ä½•ä¸€ä¸ªå­—æ®µçš„æ•°æ®ï¼Œå°±å¿…é¡»è¦æ”¹ç´¢å¼•ï¼Œè¿™æ ·æ“ä½œæˆæœ¬ä¹Ÿæ¯”è¾ƒé«˜ã€‚</li>\n<li>é€‰é¡¹4é”™è¯¯ï¼Œå› ä¸ºç´¢å¼•æœ‰æˆæœ¬ï¼Œå¾ˆå°‘ä½œä¸ºç­›é€‰æ¡ä»¶çš„å­—æ®µï¼Œæ²¡æœ‰å¿…è¦åˆ›å»ºç´¢å¼•ã€‚</li>\n</ul><!-- [[[read_end]]] --><p>å¦‚æœè¿™é“é¢˜ä½ å›ç­”é”™äº†ï¼Œä¸€å®šè¦å›å»å¤ä¹ ä¸‹<a href=\"https://time.geekbang.org/column/article/357312\">ç¬¬11è®²</a>çš„å†…å®¹ã€‚</p><h2>ç¬¬äºŒé¢˜</h2><p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä»½å­¦ç”Ÿæˆç»©å•ï¼Œæ‰€æœ‰åŒå­¦çš„æˆç»©éƒ½å„ä¸ç›¸åŒï¼Œè¯·ç¼–å†™ä¸€ä¸ªç®€å•çš„SQLè¯­å¥ï¼ŒæŸ¥è¯¢åˆ†æ•°æ’åœ¨ç¬¬ä¸‰åçš„åŒå­¦çš„æˆç»©ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/36/d1/3618ee4c82a592bb7954c4d63d9c1dd1.jpeg?wh=1710*828\" alt=\"\"></p><p>è§£æï¼šè¿™é“é¢˜è€ƒæŸ¥çš„æ˜¯æˆ‘ä»¬å¯¹æŸ¥è¯¢è¯­å¥çš„æŒæ¡æƒ…å†µã€‚é’ˆå¯¹é¢˜ç›®ä¸­çš„åœºæ™¯ï¼Œå¯ä»¥åˆ†ä¸¤æ­¥æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼ŒæŒ‰ç…§æˆç»©é«˜ä½è¿›è¡Œæ’åºï¼š</p><pre><code>mysql&gt; SELECT *\n-&gt; FROM demo.test1\n-&gt; ORDER BY score DESC; -- DESCè¡¨ç¤ºé™åºæ’åˆ—\n+----+------+-------+\n| id | name | score |\n+----+------+-------+\n| 2 | æå›› | 90.00 |\n| 4 | èµµå…­ | 88.00 |\n| 1 | å¼ ä¸‰ | 80.00 |\n| 3 | ç‹äº” | 76.00 |\n| 5 | å­™ä¸ƒ | 67.00 |\n+----+------+-------+\n5 rows in set (0.00 sec)\n</code></pre><p>ç¬¬äºŒæ­¥ï¼Œæ‰¾å‡ºæ’åç¬¬ä¸‰çš„åŒå­¦å’Œå¯¹åº”çš„æˆç»©ã€‚æˆ‘ä»¬å¯ä»¥ç”¨<a href=\"https://time.geekbang.org/column/article/351225\">ç¬¬4è®²</a>é‡Œå­¦è¿‡çš„å¯¹è¿”å›è®°å½•è¿›è¡Œé™å®šçš„å…³é”®å­—LIMITï¼š</p><pre><code>mysql&gt; SELECT *\n-&gt; FROM demo.test1\n-&gt; ORDER BY score DESC\n-&gt; LIMIT 2,1;\n+----+------+-------+\n| id | name | score |\n+----+------+-------+\n| 1 | å¼ ä¸‰ | 80.00 |\n+----+------+-------+\n1 row in set (0.00 sec)\n</code></pre><p>åœ¨MySQLä¸­ï¼ŒLIMITåé¢å¯ä»¥è·Ÿ2ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè®°å½•çš„èµ·å§‹ä½ç½®ï¼ˆç¬¬ä¸€ä¸ªè®°å½•çš„ä½ç½®æ˜¯0ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºè¿”å›å‡ æ¡è®°å½•ã€‚å› æ­¤ï¼Œâ€œLIMIT 2,1â€å°±è¡¨ç¤ºä»ç¬¬3æ¡è®°å½•å¼€å§‹ï¼Œè¿”å›1æ¡è®°å½•ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥æŸ¥å‡ºæ’åç¬¬ä¸‰çš„åŒå­¦çš„æˆç»©äº†ã€‚</p><h2>ç¬¬ä¸‰é¢˜</h2><p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¡¨ï¼Œåˆ†åˆ«æ˜¯äººå‘˜è¡¨ï¼ˆdemo.personï¼‰å’Œåœ°å€è¡¨ï¼ˆdemo.addressï¼‰ï¼Œè¦æ±‚ä½ ä½¿ç”¨å…³è”æŸ¥è¯¢æŸ¥å‡ºå®Œæ•´ä¿¡æ¯ã€‚æ— è®ºæœ‰æ²¡æœ‰åœ°å€ä¿¡æ¯ï¼Œäººå‘˜çš„ä¿¡æ¯å¿…é¡»å…¨éƒ¨åŒ…å«åœ¨ç»“æœé›†ä¸­ã€‚</p><p>äººå‘˜è¡¨ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/90/b6ed67787cebbdb0786a42c47326a390.jpeg?wh=1377*600\" alt=\"\"></p><p>åœ°å€è¡¨ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/57/ea/5758763942c2a0dc59125bd73f3134ea.jpeg?wh=1331*524\" alt=\"\"></p><p>è§£æï¼š è¿™ä¸ªæ˜¯å…¸å‹çš„å¤–æŸ¥è¯¢ï¼Œå’±ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/353464\">ç¬¬6è®²</a>é‡Œå­¦è¿‡ã€‚é¢˜ç›®è¦æ±‚æˆ‘ä»¬æŸ¥å‡ºäººå‘˜è¡¨ä¸­çš„å…¨éƒ¨ä¿¡æ¯ï¼Œè€Œåœ°å€è¡¨ä¸­ä¿¡æ¯åˆ™å¯ä»¥ä¸ºç©ºï¼Œå°±å¯ä»¥ç”¨ä¸‹é¢çš„æŸ¥è¯¢ä»£ç ï¼š</p><pre><code>mysql&gt; SELECT *\n-&gt; FROM demo.person AS a\n-&gt; LEFT JOIN demo.address AS b -- å·¦è¿æ¥ï¼Œç¡®ä¿demo.personä¸­çš„è®°å½•å…¨éƒ¨åŒ…æ‹¬åœ¨ç»“æœé›†ä¸­\n-&gt; ON (a.id=b.id);\n+----+-------+-------+------+---------+------+-----------+\n| id | fname | lname | id | country | city | address |\n+----+-------+-------+------+---------+------+-----------+\n| 1 | å¼  | ä¸‰ | 1 | ä¸­å›½ | åŒ—äº¬ | æµ·æ·€123 |\n| 2 | æ | å›› | 2 | ç¾å›½ | çº½çº¦ | å¥¥å·´å°¼333 |\n| 3 | ç‹ | äº” | NULL | NULL | NULL | NULL |\n+----+-------+-------+------+---------+------+-----------+\n3 rows in set (0.02 sec)\n</code></pre><h2>ç¬¬å››é¢˜</h2><p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªæ•™å­¦è¡¨ï¼ˆdemo.teach)ï¼Œé‡Œé¢åŒ…å«äº†äººå‘˜ç¼–å·ï¼ˆidï¼‰ã€å§“åï¼ˆfnameï¼‰å’Œå¯¹åº”çš„è€å¸ˆçš„äººå‘˜ç¼–å·ï¼ˆteacheridï¼‰ã€‚å¦‚æœä¸€ä¸ªäººæ˜¯å­¦ç”Ÿï¼Œé‚£ä¹ˆä»–ä¸€å®šæœ‰å¯¹åº”çš„è€å¸ˆç¼–å·ï¼Œé€šè¿‡è¿™ä¸ªç¼–å·ï¼Œå°±å¯ä»¥æ‰¾åˆ°è€å¸ˆçš„ä¿¡æ¯ï¼›å¦‚æœä¸€ä¸ªäººæ˜¯è€å¸ˆï¼Œé‚£ä¹ˆä»–å¯¹åº”çš„è€å¸ˆç¼–å·å°±æ˜¯ç©ºã€‚æ¯”å¦‚è¯´ï¼Œä¸‹è¡¨ä¸­æå››çš„è€å¸ˆç¼–å·æ˜¯101ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æœç´¢äººå‘˜ç¼–å·ï¼Œæ‰¾åˆ°101çš„åç§°æ˜¯å¼ ä¸‰ï¼Œé‚£ä¹ˆæå››çš„è€å¸ˆå°±æ˜¯å¼ ä¸‰ï¼›è€Œå¼ ä¸‰è‡ªå·±å°±æ˜¯è€å¸ˆï¼Œæ‰€ä»¥ä»–å¯¹åº”çš„è€å¸ˆç¼–å·æ˜¯ç©ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8d/7c/8d9de75354c0af5bc99e01767b87a57c.jpeg?wh=1694*867\" alt=\"\"></p><p>è¦æ±‚ï¼šè¯·å†™ä¸€ä¸ªSQLè¯­å¥ï¼ŒæŸ¥è¯¢å‡ºè‡³å°‘æœ‰2åå­¦ç”Ÿçš„è€å¸ˆå§“åã€‚</p><p>è¯´æ˜ä¸€ä¸‹ï¼Œåœ¨åˆšåˆšçš„æ•°æ®è¡¨ä¸­ï¼Œå¼ ä¸‰æœ‰3åå­¦ç”Ÿï¼Œåˆ†åˆ«æ˜¯æå››ã€ç‹äº”å’Œå‘¨å…«ã€‚èµµå…­æœ‰ä¸€åå­¦ç”Ÿï¼Œæ˜¯å­™ä¸ƒã€‚å› æ­¤ï¼Œæ­£ç¡®çš„SQLè¯­å¥çš„æŸ¥è¯¢ç»“æœåº”è¯¥æ˜¯ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/e5/40/e515868404495d2cea1c271b0d0ec440.jpeg?wh=1211*225\" alt=\"\"></p><p>è§£æï¼š</p><p>é’ˆå¯¹è¿™é“é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§è¿™æ ·çš„æ€è·¯å»åšï¼š</p><ol>\n<li>é€šè¿‡ç»Ÿè®¡å­¦ç”Ÿå¯¹åº”çš„è€å¸ˆç¼–å·ï¼Œå°±å¯ä»¥è·å–è‡³å°‘æœ‰2ä¸ªå­¦ç”Ÿçš„è€å¸ˆçš„ç¼–å·ã€‚</li>\n<li>é€šè¿‡å…³è”æŸ¥è¯¢å’Œè‡ªè¿æ¥è·å–éœ€è¦çš„ä¿¡æ¯ã€‚æ‰€è°“çš„è‡ªè¿æ¥ï¼Œå°±æ˜¯æ•°æ®è¡¨ä¸è‡ªèº«è¿›è¡Œè¿æ¥ã€‚ä½ å¯ä»¥è®¤ä¸ºæ˜¯æŠŠæ•°æ®è¡¨å¤åˆ¶æˆä¸€æ¨¡ä¸€æ ·çš„2ä¸ªè¡¨ï¼Œé€šè¿‡ç»™æ•°æ®è¡¨èµ·ä¸åŒçš„åå­—æ¥åŒºåˆ†å®ƒä»¬ï¼Œè¿™æ ·æ–¹ä¾¿å¯¹è¡¨è¿›è¡Œæ“ä½œï¼Œç„¶åå°±å¯ä»¥å¯¹è¿™2ä¸ªè¡¨è¿›è¡Œè¿æ¥æ“ä½œäº†ã€‚</li>\n<li>é€šè¿‡ä½¿ç”¨æ¡ä»¶è¯­å¥WHEREå’ŒHAVINGå¯¹æ•°æ®è¿›è¡Œç­›é€‰ï¼šå…ˆç”¨WHEREç­›é€‰å‡ºæ‰€æœ‰çš„è€å¸ˆç¼–å·ï¼Œå†ç”¨HAVINGç­›é€‰å‡ºæœ‰2ä¸ªä»¥ä¸Šå­¦ç”Ÿçš„è€å¸ˆç¼–å·ã€‚</li>\n</ol><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥è·å–è€å¸ˆç¼–å·ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>mysql&gt; SELECT teacherid\n    -&gt; FROM demo.teach\n    -&gt; WHERE teacherid is not NULL     -- ç”¨WHEREç­›é€‰å‡ºæ‰€æœ‰çš„è€å¸ˆç¼–å·\n    -&gt; GROUP BY teacherid\n    -&gt; HAVING COUNT(*)&gt;=2;             -- ç”¨HAVINGç­›é€‰å‡ºæœ‰2ä¸ªä»¥ä¸Šå­¦ç”Ÿçš„è€å¸ˆç¼–å·\n+-----------+\n| teacherid |\n+-----------+\n|       101 |\n+-----------+\n1 row in set (0.00 sec)\n</code></pre><p>æ¥ç€ï¼Œé€šè¿‡è‡ªè¿æ¥ï¼Œæ¥è·å–è€å¸ˆçš„å§“åï¼š</p><pre><code>mysql&gt; SELECT a.id,a.fname\n    -&gt; FROM demo.teach AS a\n    -&gt; JOIN\n    -&gt; (\n    -&gt;  SELECT teacherid\n    -&gt;  FROM demo.teach\n    -&gt;  WHERE teacherid IS NOT NULL\n    -&gt;  GROUP BY teacherid\n    -&gt;  HAVING COUNT(*)&gt;=2\n    -&gt; ) AS b\n    -&gt; ON (a.id = b.teacherid);\n+-----+-------+\n| id  | fname |\n+-----+-------+\n| 101 | å¼ ä¸‰  |\n+-----+-------+\n1 row in set (0.00 sec)\n</code></pre><h2>ç¬¬äº”é¢˜</h2><p>å‡è®¾æŸä¸­å­¦é«˜ä¸‰å¹´çº§æœ‰å¤šä½åŒå­¦ï¼Œåˆ†æˆå¤šä¸ªç­ï¼Œæˆ‘ä»¬æœ‰ç»Ÿä¸€è®°å½•å­¦ç”Ÿæˆç»©çš„è¡¨ï¼ˆdemo.student)å’Œç­çº§ä¿¡æ¯è¡¨ï¼ˆdemo.classï¼‰ï¼Œå…·ä½“ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>å­¦ç”Ÿæˆç»©è¡¨ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/9a/20/9ae0eyy03386f24d568b8507d2dd6f20.jpeg?wh=1543*766\" alt=\"\"></p><p>ç­çº§ä¿¡æ¯è¡¨ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6c/b9/6c4d85c4dff2c626d55fbaf9671bccb9.jpeg?wh=1200*459\" alt=\"\"></p><p>è¦æ±‚ï¼šå†™ä¸€ä¸ªSQLæŸ¥è¯¢è¯­å¥ï¼ŒæŸ¥å‡ºæ¯ä¸ªç­çº§å‰ä¸‰åçš„åŒå­¦ã€‚</p><p>è¯´æ˜ä¸€ä¸‹ï¼Œé’ˆå¯¹ä¸Šé¢çš„æ•°æ®ï¼Œæ­£ç¡®çš„SQLæŸ¥è¯¢åº”è¯¥å¾—å‡ºä¸‹é¢çš„ç»“æœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5c/cd/5c6fc34826c367f5a0cdf38610b26ecd.jpeg?wh=1695*860\" alt=\"\"></p><p>è§£æï¼š</p><ol>\n<li>ä»é¢˜ç›®ç»™å‡ºçš„æŸ¥è¯¢ç»“æœçœ‹ï¼Œä¸éœ€è¦è€ƒè™‘å¹¶åˆ—çš„æƒ…å†µã€‚é‚£ä¹ˆï¼Œç°åœ¨è¦é€‰å‡ºåˆ†æ•°æ’åå‰ä¸‰çš„åŒå­¦ï¼Œå…¶å®åªè¦æ‰¾å‡º3ä¸ªæœ€å¥½çš„åˆ†æ•°ä»¥åŠå¯¹åº”çš„åŒå­¦å°±å¯ä»¥äº†ã€‚</li>\n<li>è¿™é“é¢˜éœ€è¦ç”¨åˆ°æˆ‘ä»¬è®²è¿‡çš„å…³è”æŸ¥è¯¢å’Œå­æŸ¥è¯¢çš„çŸ¥è¯†ã€‚</li>\n<li>WHEREè¯­å¥çš„ç­›é€‰æ¡ä»¶è¡¨è¾¾å¼ä¸­ï¼Œä¹Ÿå¯ä»¥åŒ…æ‹¬ä¸€ä¸ªå­æŸ¥è¯¢çš„ç»“æœã€‚</li>\n</ol><p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å‡è®¾æœ‰ä¸€ä¸ªåˆ†æ•°Xï¼Œå°±æ˜¯é‚£ä¸ªç¬¬Nå¥½çš„åˆ†æ•°ï¼Œç®—ä¸€ä¸‹æœ‰å¤šå°‘ä¸ªåŒå­¦çš„æˆç»©ä¼˜äºè¿™ä¸ªåˆ†æ•°ï¼š</p><pre><code>SELECT COUNT(DISTINCT b.points)\nFROM demo.student AS b\nWHERE b.points &gt; X;\n</code></pre><p>è¿™ä¸ªæŸ¥è¯¢çš„ç»“æœå°äº3çš„è¯ï¼Œå°±ä»£è¡¨è¿™ä¸ªåˆ†æ•°Xæ˜¯æ’åç¬¬ä¸‰çš„åˆ†æ•°äº†ã€‚</p><p>ç¬¬äºŒæ­¥ï¼ŒæŸ¥è¯¢å‡ºå“ªäº›åŒå­¦æ»¡è¶³æˆç»©æ’åå‰ä¸‰çš„è¿™ä¸ªæ¡£æ¬¡ï¼š</p><pre><code>mysql&gt; SELECT a.stdname,a.points\n    -&gt; FROM demo.student AS a\n    -&gt; WHERE 3 &gt;                       -- æ¯”è¿™ä¸ªæˆç»©å¥½çš„ä¸è¶…è¿‡3ï¼Œè¯´æ˜è¿™æ˜¯ç¬¬ä¸‰å¥½çš„æˆç»©\n    -&gt; (\n    -&gt;   SELECT COUNT(DISTINCT b.points)   -- ç»Ÿè®¡ä¸€ä¸‹æœ‰å‡ ä¸ªæˆç»©\n    -&gt;   FROM demo.student AS b\n    -&gt;   WHERE b.points &gt; a.points         -- æ¯”è¿™ä¸ªæˆç»©å¥½\n    -&gt; );\n+---------+--------+\n| stdname | points |\n+---------+--------+\n| å¼ ä¸‰    |     85 |\n| æå››    |     80 |\n| èµµå…­    |     90 |\n| å‘¨å…«    |     85 |\n+---------+--------+\n4 rows in set (0.00 sec)\n</code></pre><p>ç¬¬ä¸‰æ­¥ï¼Œä¸ç­çº§è¡¨å…³è”ï¼ŒæŒ‰ç­çº§ç»Ÿè®¡å‰ä¸‰ååŒå­¦çš„æˆç»©ï¼Œå¹¶ä¸”è·å–ç­çº§ä¿¡æ¯ï¼š</p><pre><code>mysql&gt; SELECT c.classname,a.stdname,a.points\n    -&gt; FROM demo.student AS a\n    -&gt; JOIN demo.class AS c\n    -&gt; ON (a.classid = c.id)          -- å…³è”ç­çº§ä¿¡æ¯\n    -&gt; WHERE 3 &gt;\n    -&gt; (\n    -&gt;   SELECT COUNT(DISTINCT b.points)\n    -&gt;   FROM demo.student AS b\n    -&gt;   WHERE b.points &gt; a.points\n    -&gt;   AND b.classid = a.classid   -- æŒ‰ç­çº§åˆ†åˆ«æŸ¥è¯¢\n    -&gt; )\n    -&gt; ORDER BY c.classname,a.points DESC;\n+-----------+---------+--------+\n| classname | stdname | points |\n+-----------+---------+--------+\n| åˆ›æ–°ç­    | èµµå…­    |     90 |\n| åˆ›æ–°ç­    | å¼ ä¸‰    |     85 |\n| åˆ›æ–°ç­    | å‘¨å…«    |     85 |\n| åˆ›æ–°ç­    | éƒ‘ä¹    |     70 |\n| æ™®é€šç­    | æå››    |     80 |\n| æ™®é€šç­    | ç‹äº”    |     65 |\n+-----------+---------+--------+\n6 rows in set (0.00 sec)\n</code></pre><h2>æ€»ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å€ŸåŠ©å‡ ä¸ªé¢è¯•é¢˜ï¼Œå›é¡¾äº†ç´¢å¼•çš„æ¦‚å¿µã€æŸ¥è¯¢ã€å­æŸ¥è¯¢å’Œå…³è”æŸ¥è¯¢çš„çŸ¥è¯†ï¼Œä»¥åŠæ¡ä»¶è¯­å¥WHEREå’ŒHAVINGçš„ä¸åŒä½¿ç”¨æ–¹æ³•ã€‚å¦‚æœä½ å‘ç°å“ªäº›å†…å®¹æŒæ¡å¾—è¿˜æ²¡æœ‰é‚£ä¹ˆç‰¢å›ºï¼Œä¸€å®šè¦åŠæ—¶å›å»å¤ä¹ ä¸€ä¸‹ã€‚</p><p>åœ¨çœŸæ­£çš„é¢è¯•ä¸­ï¼Œå¾ˆå°‘æœ‰å•çº¯è€ƒæŸ¥çŸ¥è¯†ç‚¹æœ¬èº«çš„é¢˜ç›®ï¼Œæ›´å¤šçš„æ˜¯è€ƒæŸ¥ä½ åœ¨è§£å†³å®é™…é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹çŸ¥è¯†çš„çµæ´»è¿ç”¨èƒ½åŠ›ã€‚æ‰€ä»¥ï¼Œåœ¨å­¦ä¹ æ¯ä¸€èŠ‚è¯¾æ—¶ï¼Œä½ ä¸€å®šè¦ç»“åˆæˆ‘ç»™å‡ºçš„å®é™…é¡¹ç›®ï¼Œå»çœŸæ­£å®è·µä¸€ä¸‹ï¼Œè¿™æ ·æ‰èƒ½ä»¥ä¸å˜åº”ä¸‡å˜ï¼Œåœ¨é¢è¯•ä¸­æœ‰å¥½çš„è¡¨ç°ã€‚</p>","neighbors":{"left":{"article_title":"28 | æ‰‹æŠŠæ‰‹å¸¦ä½ è®¾è®¡ä¸€ä¸ªå®Œæ•´çš„è¿é”è¶…å¸‚ä¿¡æ¯ç³»ç»Ÿæ•°æ®åº“ï¼ˆä¸‹ï¼‰","id":373476},"right":{"article_title":"ç‰¹åˆ«æ”¾é€ï¼ˆäºŒï¼‰| ç»å…¸é¢è¯•é¢˜è®²è§£ç¬¬äºŒå¼¹","id":366315}},"comments":[{"had_liked":false,"id":292311,"user_name":"freshswq","can_delete":false,"product_type":"c1","uid":2209672,"ip_address":"","ucode":"AA0ECD820073CE","user_header":"https://static001.geekbang.org/account/avatar/00/21/b7/88/0c3e1a80.jpg","comment_is_top":false,"comment_ctime":1620781201,"is_pvip":false,"replies":[{"id":"106536","content":"å¥½","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621567166,"ip_address":"","comment_id":292311,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31685552273","product_id":100073201,"comment_content":"ä¹‹å‰@Juneç¬¬äºŒé¢˜å’Œç¬¬äº”é¢˜éƒ½å¯ä»¥ä½¿ç”¨mysql8 æ–°åŠŸèƒ½çª—å£å‡½æ•°ï¼Œè¯•äº†ä¸€ä¸‹ï¼Œæ¯”è¾ƒå¥½ç†è§£ã€‚<br>ç›¸å…³SQLä»£ç å¦‚ä¸‹ï¼ˆå«å»ºè¡¨SQLï¼‰<br>ç¬¬äºŒé¢˜ï¼š<br><br>å»ºè¡¨å’Œæ•°æ®SQL:<br>drop table if exists test1;<br>create table test1<br>(Id int primary key,<br>Name  varchar(20),<br>Score decimal(4,2)<br>);<br><br>insert into test1 values(1,&#39;å¼ ä¸‰&#39;,80);<br>insert into test1 values(2,&#39;æå››&#39;,90);<br>insert into test1 values(3,&#39;ç‹äº”&#39;,76);<br>insert into test1 values(4,&#39;èµµå…­&#39;,88);<br>insert into test1 values(5,&#39;å­™ä¸ƒ&#39;,67);<br><br>æŸ¥è¯¢SQL:<br>select * from (<br>SELECT<br>\t* <br>FROM<br>\t( SELECT rank() over ( ORDER BY Score DESC ) AS row_num, Id, NAME, Score FROM test1 ) t <br>WHERE<br>\trow_num =3<br><br>ç¬¬äº”é¢˜ï¼š<br><br>drop table if exists student;<br>create table student<br>(<br>Id int primary key,<br>Stdname varchar(20),<br>Points decimal(4,2),<br>Classid tinyint<br>)<br><br>insert into student values(1,&#39;å¼ ä¸‰&#39;,85,1);<br>insert into student values(2,&#39;æå››&#39;,80,2);<br>insert into student values(3,&#39;ç‹äº”&#39;,65,2);<br>insert into student values(4,&#39;èµµå…­&#39;,90,1);<br>insert into student values(5,&#39;å­™ä¸ƒ&#39;,69,1);<br>insert into student values(6,&#39;å‘¨å…«&#39;,85,1);<br>insert into student values(7,&#39;éƒ‘ä¹&#39;,70,1);<br><br><br><br>drop table if exists class;<br>create table class<br>(<br>Id int primary key,<br>Classname varchar(20)<br>)<br><br>insert into class values(1,&#39;åˆ›æ–°ç­&#39;);<br>insert into class values(2,&#39;æ™®é€šç­&#39;);<br><br>æŸ¥è¯¢SQL:<br>SELECT<br>\tClassname,<br>\tStdname,<br>\tPoints <br>FROM<br>\t(<br>\tSELECT<br>\t\tdense_rank() over ( PARTITION BY Classname ORDER BY Points DESC ) AS row_num,<br>\t\tClassname,<br>\t\tStdname,<br>\t\tPoints <br>\tFROM<br>\t\tstudent a<br>\t\tJOIN class b <br>\tWHERE<br>\t\ta.Classid = b.Id <br>\t) t <br>WHERE<br>\trow_num &lt;= 3<br><br><br>","like_count":7,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519769,"discussion_content":"å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621567166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287354,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1617896722,"is_pvip":false,"replies":[{"id":"106389","content":"å¤šç»ƒä¹ ï¼Œç†Ÿæ‚‰å°±å¥½äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621502409,"ip_address":"","comment_id":287354,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5912864018","product_id":100073201,"comment_content":"å¶å°”åšåšSQLé¢˜ç›®ï¼Œå’Œåšç®—æ³•é¢˜ç›®ä¸€æ ·ï¼Œéƒ½å¯ä»¥é¢„é˜²è„‘è¢‹ç”Ÿé”ˆã€‚<br><br>è¿™ä¸€è®²ä¸­ï¼Œç¬¬äº”é¢˜æ˜¯ä¸€é“å¥½é¢˜ï¼Œæƒ³äº†ä¸€ä¼šå„¿æ‰æƒ³æ˜ç™½ã€‚è¦æ˜¯é¢è¯•è®©æˆ‘å†™ï¼Œä¸ä¸€å®šèƒ½å†™å‡ºæ¥ï¼Œå¯èƒ½é¢è¯•å®˜ç›´æ¥ä¼šçœ‹ç¬¬äº”é¢˜çš„ç»“æœæ¥ç­›é€‰å€™é€‰äººã€‚<br><br>æœ€è¿‘åœ¨å¿™ç€å¼„dockeræ­å»ºæ–°å…¬å¸çš„ç¯å¢ƒé—®é¢˜ï¼Œå¼„çš„å¤´å¤§ã€‚è¿˜æ˜¯æŠ½ç©ºè·Ÿä¸Šä¸“æ çš„è„šæ­¥ï¼","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518276,"discussion_content":"å¤šç»ƒä¹ ï¼Œç†Ÿæ‚‰å°±å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621502409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287211,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1617843038,"is_pvip":false,"replies":[{"id":"106388","content":"è¿™äº›éƒ½æ˜¯å¤§å‚çš„å®é™…é¢è¯•é¢˜ã€‚å¤šç»ƒä¹ ï¼Œå¯ä»¥å¼€é˜”æ€è·¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621502299,"ip_address":"","comment_id":287211,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5912810334","product_id":100073201,"comment_content":"<br>ç¬¬äºŒé¢˜ä¸­ï¼Œæ’åºï¼Œé™å®šè¿”å›çš„è®°å½•ï¼Œå–å…¶ä¸­åˆ†æ•°æœ€å°çš„é‚£ä¸€æ¡ï¼Œååå°±æ²¡æƒ³åˆ°ç›´æ¥ç”¨ limit å°±è§£å†³é—®é¢˜äº†ã€‚<br><br>ç¬¬å››é¢˜ï¼Œæ€è·¯è·Ÿè€å¸ˆä¸€è‡´ï¼Œä½†åœ¨é€šè¿‡åˆ†ç»„ç»Ÿè®¡å‡ºå­¦ç”Ÿå¯¹åº”çš„è€å¸ˆç¼–å·åï¼Œå°±å¡ä½äº†ï¼Œä¸çŸ¥é“åˆ©ç”¨è‡ªè¿æ¥å°±å¯ä»¥ç›´æ¥è·å–è€å¸ˆçš„å§“åã€‚<br><br>åœ¨ç¬¬äº”é¢˜ï¼Œæˆ‘æƒ³åˆ°äº†å…ˆåˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ç”¨æ¥ä¿å­˜æœ€ç»ˆçš„æŸ¥è¯¢ç»“æœï¼Œç„¶åå…³è”æŸ¥è¯¢ä¸¤å¼ è¡¨ï¼Œåˆ†åˆ«æŠŠä¸åŒç­çš„å­¦ç”Ÿæˆç»©æ’å…¥åˆ°è¿™ä¸ªä¸´æ—¶è¡¨ä¸­ï¼Œä½†å¦‚ä½•å–æ¯ä¸ªç­çš„å‰ä¸‰åï¼Œè¿™æ˜¯ä¸ªé—®é¢˜ã€‚<br><br>ç„¶åå†å›å¤´çœ‹çœ‹é¢˜ç›®è¦æ±‚ï¼Œåªå†™ä¸€ä¸ª SQL æŸ¥è¯¢è¯­å¥ï¼Œè¿™ä¹Ÿå¤ªéš¾äº†â€¦<br>","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518232,"discussion_content":"è¿™äº›éƒ½æ˜¯å¤§å‚çš„å®é™…é¢è¯•é¢˜ã€‚å¤šç»ƒä¹ ï¼Œå¯ä»¥å¼€é˜”æ€è·¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621502299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287207,"user_name":"å³è€³æœµçŒ«å’ª","can_delete":false,"product_type":"c1","uid":1014984,"ip_address":"","ucode":"3AB186CC780FBB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/c8/8627f5c1.jpg","comment_is_top":false,"comment_ctime":1617840088,"is_pvip":true,"replies":[{"id":"106387","content":"åœ¨MySQLä¸­ï¼Œä¸»é”®åŒæ—¶ä¹Ÿå¯ä»¥æ˜¯å¤–é”®çš„ï¼Œåªè¦å®šä¹‰å¥½é‚£ä¸ªæ˜¯ä¸»è¡¨å°±å¯ä»¥äº†ï¼Œä½ å¯ä»¥è¯•ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621502190,"ip_address":"","comment_id":287207,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5912807384","product_id":100073201,"comment_content":"ç¬¬ä¸‰é¢˜è²Œä¼¼æœ‰é—®é¢˜ï¼Œä¸åº”è¯¥æ ¹æ®ä¸¤ä¸ªè¡¨çš„ä¸»é”®å…³è”ï¼Œåº”è¯¥åœ¨åœ°å€è¡¨åˆ›å»ºä¸€ä¸ªäººå‘˜è¡¨çš„å¤–é”®ï¼Œè¿™ä¸ªå¤–é”®ä¸äººå‘˜è¡¨çš„ä¸»é”®å…³è”æ‰å¯¹ã€‚","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518230,"discussion_content":"åœ¨MySQLä¸­ï¼Œä¸»é”®åŒæ—¶ä¹Ÿå¯ä»¥æ˜¯å¤–é”®çš„ï¼Œåªè¦å®šä¹‰å¥½é‚£ä¸ªæ˜¯ä¸»è¡¨å°±å¯ä»¥äº†ï¼Œä½ å¯ä»¥è¯•ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621502190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365881,"discussion_content":"è¿™å—ç¡®å®ä¸èƒ½åšä¹ˆåšï¼Œä½ å‘ç°äº†ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617895413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348911,"user_name":"æåº·å¥","can_delete":false,"product_type":"c1","uid":2988316,"ip_address":"","ucode":"7284D95FF445B7","user_header":"https://static001.geekbang.org/account/avatar/00/2d/99/1c/7aaef139.jpg","comment_is_top":false,"comment_ctime":1655540233,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655540233","product_id":100073201,"comment_content":"ç¬¬ä¸‰é¢˜è®¾è®¡ä¸ä¸¥è°¨ï¼Œæ— æ³•åˆ¤æ–­ä¸¤è¡¨ä¹‹é—´çš„å…³è”å­—æ®µ","like_count":0},{"had_liked":false,"id":343721,"user_name":"Geek_3254e0","can_delete":false,"product_type":"c1","uid":2858071,"ip_address":"","ucode":"5491370FDA2CAF","user_header":"","comment_is_top":false,"comment_ctime":1651022978,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651022978","product_id":100073201,"comment_content":"ç¬¬å››é¢˜ å¯ä»¥ç”¨inå¾ˆå¥½å†™<br>SELECT id,teach.Fname from teach where id in (select Teacherid from teach GROUP BY Teacherid HAVING COUNT(Teacherid)&gt; 2);","like_count":0},{"had_liked":false,"id":343122,"user_name":"zhuyuping","can_delete":false,"product_type":"c1","uid":1886354,"ip_address":"","ucode":"B4E340789BB22C","user_header":"https://static001.geekbang.org/account/avatar/00/1c/c8/92/408a23d4.jpg","comment_is_top":false,"comment_ctime":1650640039,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650640039","product_id":100073201,"comment_content":"ç¬¬4é¢˜ï¼Œè¿™æ ·å†™å¥½åƒä¹Ÿå¯ä»¥ï¼Ÿä¹Ÿæ˜¯é‡‡ç”¨è‡ªè¿æ¥<br>select t1.id, t1.fname<br>from demo.teach t1<br>left join demo.teach t2<br>on (t1.id = t2.teacherid)<br>group by t1.id having count(t1.id) &gt;=2;","like_count":0},{"had_liked":false,"id":301572,"user_name":"å“ˆå–½","can_delete":false,"product_type":"c1","uid":1395620,"ip_address":"","ucode":"8EAA93A66B62AA","user_header":"https://static001.geekbang.org/account/avatar/00/15/4b/a4/d0f49004.jpg","comment_is_top":false,"comment_ctime":1625743912,"is_pvip":false,"replies":[{"id":"110382","content":"å¤§å‚çš„é¢è¯•é¢˜ä¸€èˆ¬ä¸ä¼šç‰¹åˆ«ç›´ç™½ï¼Œå¤šç»ƒä¹ ï¼Œæ…¢æ…¢ä¼šæœ‰æ„Ÿè§‰çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1627870474,"ip_address":"","comment_id":301572,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625743912","product_id":100073201,"comment_content":"ç¬¬äº”é¢˜å¥½éš¾ç†è§£å•Š çœ‹äº†å¥½å‡ éä¹Ÿæ²¡æ‡‚ ğŸ˜­","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523029,"discussion_content":"å¤§å‚çš„é¢è¯•é¢˜ä¸€èˆ¬ä¸ä¼šç‰¹åˆ«ç›´ç™½ï¼Œå¤šç»ƒä¹ ï¼Œæ…¢æ…¢ä¼šæœ‰æ„Ÿè§‰çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627870474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294038,"user_name":"æ²ˆåº·","can_delete":false,"product_type":"c1","uid":1611025,"ip_address":"","ucode":"02AFA50738AB8E","user_header":"https://static001.geekbang.org/account/avatar/00/18/95/11/eb431e52.jpg","comment_is_top":false,"comment_ctime":1621698659,"is_pvip":false,"replies":[{"id":"107685","content":"å¤šåšé¢˜ï¼Œå¯ä»¥å¼€é˜”æ€è·¯","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1623053101,"ip_address":"","comment_id":294038,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1621698659","product_id":100073201,"comment_content":"ç¬¬äº”é¢˜å¥½éš¾å‘€ï¼Œè¿™ä¸ªå¾ˆéš¾æƒ³åˆ°ã€‚åŸæ¥è¿˜å¯ä»¥è¾“å…¥Xå¥—å…¬å¼çš„ï¼Œè¿˜å¯ä»¥ä½¿ç”¨çª—å£å‡½æ•°ï¼Œ6å•Š","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520479,"discussion_content":"å¤šåšé¢˜ï¼Œå¯ä»¥å¼€é˜”æ€è·¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623053101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291255,"user_name":"Jun","can_delete":false,"product_type":"c1","uid":1608959,"ip_address":"","ucode":"48B7D8DDAE9CB6","user_header":"https://static001.geekbang.org/account/avatar/00/18/8c/ff/9edc274f.jpg","comment_is_top":false,"comment_ctime":1620169709,"is_pvip":false,"replies":[{"id":"106492","content":"å¯ä»¥æ ¹æ®å›¾è¡¨è‡ªå·±ç»ƒä¹ å†™ä¸€ä¸‹ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621562288,"ip_address":"","comment_id":291255,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1620169709","product_id":100073201,"comment_content":"è€å¸ˆï¼Œè¯·é—®èƒ½å¦æä¾›åˆ›å»ºè¿™äº›é¢è¯•é¢˜é‡Œé¢çš„è¡¨çš„ä»£ç ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519418,"discussion_content":"å¯ä»¥æ ¹æ®å›¾è¡¨è‡ªå·±ç»ƒä¹ å†™ä¸€ä¸‹ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621562288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291254,"user_name":"Jun","can_delete":false,"product_type":"c1","uid":1608959,"ip_address":"","ucode":"48B7D8DDAE9CB6","user_header":"https://static001.geekbang.org/account/avatar/00/18/8c/ff/9edc274f.jpg","comment_is_top":false,"comment_ctime":1620169383,"is_pvip":false,"replies":[{"id":"106491","content":"ç‰¹åˆ«æ”¾é€3ä¸­ä»‹ç»äº†çª—å£å‡½æ•°ï¼Œå¯ä»¥å‚è€ƒ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621562186,"ip_address":"","comment_id":291254,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1620169383","product_id":100073201,"comment_content":"å¦‚æœmysqlç‰ˆæœ¬å¤§äº8.0, ç¬¬äºŒé¢˜å’Œç¬¬äº”é¢˜éƒ½å¯ä»¥ç”¨row_numberæ¥è§£å†³ï¼Œæ›´åŠ ç®€æ´å’Œå®¹æ˜“ç†è§£ã€‚","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519417,"discussion_content":"ç‰¹åˆ«æ”¾é€3ä¸­ä»‹ç»äº†çª—å£å‡½æ•°ï¼Œå¯ä»¥å‚è€ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621562186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}