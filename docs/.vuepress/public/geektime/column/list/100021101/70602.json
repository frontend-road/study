{"id":70602,"title":"01 | 崩溃优化（上）：关于“崩溃”那些事儿","content":"<p>在各种场合遇到其他产品的开发人员时，大家总忍不住想在技术上切磋两招。第一句问的通常都是“你们产品的崩溃率是多少？”</p><p>程序员A自豪地说： “百分之一。”</p><p>旁边的程序员B鄙视地看了一眼，然后喊到： “千分之一！”</p><p>“万分之一” ，程序员C说完之后全场变得安静起来。</p><p>崩溃率是衡量一个应用质量高低的基本指标，这一点是你我都比较认可的。不过你说的“万分之一”就一定要比我说的“百分之一” 更好吗？我觉得，这个问题其实并不仅仅是比较两个数值这么简单。</p><p>今天我们就来聊一聊有关“崩溃”的那些事，我会从Android的两种崩溃类型谈起，再和你进一步讨论到底该怎样客观地衡量崩溃这个指标，以及又该如何看待和崩溃相关的稳定性。</p><h2>Android 的两种崩溃</h2><p>我们都知道，Android崩溃分为Java崩溃和Native崩溃。</p><p>简单来说，<strong>Java崩溃就是在Java代码中，出现了未捕获异常，导致程序异常退出</strong>。那Native崩溃又是怎么产生的呢？<strong>一般都是因为在Native代码中访问非法地址，也可能是地址对齐出现了问题，或者发生了程序主动abort，这些都会产生相应的signal信号，导致程序异常退出</strong>。</p><p>所以，“崩溃”就是程序出现异常，而一个产品的崩溃率，跟我们如何捕获、处理这些异常有比较大的关系。Java崩溃的捕获比较简单，但是很多同学对于如何捕获Native崩溃还是一知半解，下面我就重点介绍Native崩溃的捕获流程和难点。</p><!-- [[[read_end]]] --><p>1.Native崩溃的捕获流程</p><p>如果你对Native崩溃机制的一些基本知识还不是很熟悉，建议你阅读一下<a href=\"http://mp.weixin.qq.com/s/g-WzYF3wWAljok1XjPoo7w\">《Android平台Native代码的崩溃捕获机制及实现》</a>。这里我着重给你讲讲一个完整的Native崩溃从捕获到解析要经历哪些流程。</p><ul>\n<li>\n<p>编译端。编译C/C++代码时，需要将带符号信息的文件保留下来。</p>\n</li>\n<li>\n<p>客户端。捕获到崩溃时候，将收集到尽可能多的有用信息写入日志文件，然后选择合适的时机上传到服务器。</p>\n</li>\n<li>\n<p>服务端。读取客户端上报的日志文件，寻找适合的符号文件，生成可读的C/C++调用栈。</p>\n</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/95/11/95d9733860e3a52c6c3b5976ca25b711.jpg?wh=3419*1971\" alt=\"\"></p><p>2.Native崩溃捕获的难点</p><p>Chromium的<a href=\"http://chromium.googlesource.com/breakpad/breakpad/+/master\">Breakpad</a>是目前Native崩溃捕获中最成熟的方案，但很多人都觉得Breakpad过于复杂。其实我认为Native崩溃捕获这个事情本来就不容易，跟当初设计Tinker的时候一样，如果只想在90%的情况可靠，那大部分的代码的确可以砍掉；但如果想达到99%，在各种恶劣条件下依然可靠，后面付出的努力会远远高于前期。</p><p>所以在上面的三个流程中，<strong>最核心的是怎么样保证客户端在各种极端情况下依然可以生成崩溃日志</strong>。因为在崩溃时，程序会处于一个不安全的状态，如果处理不当，非常容易发生二次崩溃。</p><p>那么，生成崩溃日志时会有哪些比较棘手的情况呢？</p><p><strong>情况一：文件句柄泄漏，导致创建日志文件失败，怎么办？</strong></p><p>应对方式：我们需要提前申请文件句柄fd预留，防止出现这种情况。</p><p><strong>情况二：因为栈溢出了，导致日志生成失败，怎么办？</strong></p><p>应对方式：为了防止栈溢出导致进程没有空间创建调用栈执行处理函数，我们通常会使用常见的signalstack。在一些特殊情况，我们可能还需要直接替换当前栈，所以这里也需要在堆中预留部分空间。</p><p><strong>情况三：整个堆的内存都耗尽了，导致日志生成失败，怎么办？</strong></p><p>应对方式：这个时候我们无法安全地分配内存，也不敢使用stl或者libc的函数，因为它们内部实现会分配堆内存。这个时候如果继续分配内存，会导致出现堆破坏或者二次崩溃的情况。Breakpad做的比较彻底，重新封装了<a href=\"https://chromium.googlesource.com/linux-syscall-support/\">Linux Syscall Support</a>，来避免直接调用libc。</p><p><strong>情况四：堆破坏或二次崩溃导致日志生成失败，怎么办？</strong></p><p>应对方式：Breakpad会从原进程fork出子进程去收集崩溃现场，此外涉及与Java相关的，一般也会用子进程去操作。这样即使出现二次崩溃，只是这部分的信息丢失，我们的父进程后面还可以继续获取其他的信息。在一些特殊的情况，我们还可能需要从子进程fork出孙进程。</p><p>当然Breakpad也存在着一些问题，例如生成的minidump文件是二进制格式的，包含了太多不重要的信息，导致文件很容易达到几MB。但是minidump也不是毫无用处，它有一些比较高级的特性，比如<a href=\"https://www.chromium.org/chromium-os/packages/crash-reporting/debugging-a-minidump\">使用gdb调试</a>、可以看到传入参数等。Chromium未来计划使用Crashpad全面替代Breakpad，但目前来说还是 “too early to mobile”。</p><p>我们有时候想遵循Android的文本格式，并且添加更多我们认为重要的信息，这个时候就要去改造Breakpad的实现。<strong>比较常见的例如增加Logcat信息、Java调用栈信息以及崩溃时的其他一些有用信息，在下一节我们会有更加详细的介绍。</strong></p><p>如果想彻底弄清楚Native崩溃捕获，需要我们对虚拟机运行、汇编这些内功有一定造诣。做一个高可用的崩溃收集SDK真的不是那么容易，它需要经过多年的技术积累，要考虑的细节也非常多，每一个失败路径或者二次崩溃场景都要有应对措施或备用方案。</p><p>3.选择合适的崩溃服务</p><p>对于很多中小型公司来说，我并不建议自己去实现一套如此复杂的系统，可以选择一些第三方的服务。目前各种平台也是百花齐放，包括腾讯的<a href=\"https://bugly.qq.com/v2/\">Bugly</a>、阿里的<a href=\"http://wpk.uc.cn/\">啄木鸟平台</a>、网易云捕、Google的Firebase等等。</p><p>当然，在平台的选择方面，我认为，从产品化跟社区维护来说，Bugly在国内做的最好；从技术深度跟捕获能力来说，阿里UC浏览器内核团队打造的啄木鸟平台最佳。</p><h2>如何客观地衡量崩溃</h2><p>对崩溃有了更多了解以后，我们怎样才能客观地衡量崩溃呢？</p><p>要衡量一个指标，首先要统一计算口径。如果想评估崩溃造成的用户影响范围，我们会先去看<strong>UV崩溃率</strong>。</p><pre><code>UV 崩溃率 = 发生崩溃的 UV / 登录 UV\n</code></pre><p>只要用户出现过一次崩溃就会被计算到，所以UV崩溃率的高低会跟应用的使用时长有比较大的关系，这也是微信UV崩溃率在业界不算低的原因（强行甩锅）。当然这个时候，我们还可以去看应用PV崩溃率、启动崩溃率、重复崩溃率这些指标，计算方法都大同小异。</p><p>这里为什么要单独统计启动崩溃率呢？因为启动崩溃对用户带来的伤害最大，应用无法启动往往通过热修复也无法拯救。闪屏广告、运营活动，很多应用启动过程异常复杂，又涉及各种资源、配置下发，极其容易出现问题。微信读书、蘑菇街、淘宝、天猫这些“重运营”的应用都有使用一种叫作<a href=\"https://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&amp;mid=2247488429&amp;idx=1&amp;sn=448b414a0424d06855359b3eb2ba8569&amp;source=41#wechat_redirect\">“安全模式”</a>的技术来保障客户端的启动流程，在监控到客户端启动失败后，给用户自救的机会。</p><p>现在回到文章开头程序员“华山论剑”的小故事，我来揭秘他们解决崩溃率的“独家秘笈”。</p><p>程序员B对所有线程、任务都封装了一层try catch，“消化”掉了所有Java崩溃。至于程序是否会出现其他异常表现，这是上帝要管的事情，反正我是实现了“千分之一”的目标。</p><p>程序员C认为Native崩溃太难解决，所以他想了一个“好方法”，就是不采集所有的Native崩溃，美滋滋地跟老板汇报“万分之一”的工作成果。</p><p>了解了美好数字产生的“秘笈”后，不知道你有何感想？其实程序员B和C都是真实的案例，而且他们的用户体量都还不算小。技术指标过于KPI化，是国内比较明显的一个现象。崩溃率只是一个数字，我们的出发点应该是让用户有更好的体验。</p><h2>如何客观地衡量稳定性</h2><p>到此，我们讨论了崩溃是怎么回事儿，以及怎么客观地衡量崩溃。那崩溃率是不是就能完全等价于应用的稳定性呢？答案是肯定不行。处理了崩溃，我们还会经常遇到ANR（Application Not Responding，程序没有响应）这个问题。</p><p>出现ANR的时候，系统还会弹出对话框打断用户的操作，这是用户非常不能忍受的。这又带来另外一个问题，我们怎么去发现应用中的ANR异常呢？总结一下，通常有两种做法。</p><p><strong>1. 使用FileObserver监听/data/anr/traces.txt 的变化</strong>。非常不幸的是，很多高版本的ROM，已经没有读取这个文件的权限了。这个时候你可能只能思考其他路径，海外可以使用Google Play服务，而国内微信利用<a href=\"https://mp.weixin.qq.com/s/9Z8j3Dv_5jgf7LDQHKA0NQ?\">Hardcoder</a>框架（HC框架是一套独立于安卓系统实现的通信框架，它让App和厂商ROM能够实时“对话”了，目标就是充分调度系统资源来提升App的运行速度和画质，切实提高大家的手机使用体验）向厂商获取了更大的权限。</p><p><strong>2. 监控消息队列的运行时间</strong>。这个方案无法准确地判断是否真正出现了ANR异常，也无法得到完整的ANR日志。在我看来，更应该放到卡顿的性能范畴。</p><p>回想我当时在设计Tinker的时候，为了保证热修复不会影响应用的启动，Tinker在补丁的加载流程也设计了简单的“安全模式”，在启动时会检查上次应用的退出类型，如果检查连续三次异常退出，将会自动清除补丁。所以除了常见的崩溃，还有一些会导致应用异常退出的情况。</p><p>在讨论什么是异常退出之前，我们先看看都有哪些应用退出的情形。</p><ul>\n<li>\n<p>主动自杀。<code>Process.killProcess()</code>、<code>exit()</code> 等。</p>\n</li>\n<li>\n<p>崩溃。出现了Java或Native崩溃。</p>\n</li>\n<li>\n<p>系统重启；系统出现异常、断电、用户主动重启等，我们可以通过比较应用开机运行时间是否比之前记录的值更小。</p>\n</li>\n<li>\n<p>被系统杀死。被low memory killer杀掉、从系统的任务管理器中划掉等。</p>\n</li>\n<li>\n<p>ANR。</p>\n</li>\n</ul><p>我们可以在应用启动的时候设定一个标志，在主动自杀或崩溃后更新标志，这样下次启动时通过检测这个标志就能确认运行期间是否发生过异常退出。对应上面的五种退出场景，我们排除掉主动自杀和崩溃<strong>（崩溃会单独的统计）</strong>这两种场景，希望可以监控到剩下三种的异常退出，理论上这个异常捕获机制是可以达到100%覆盖的。</p><p>通过这个异常退出的检测，可以反映如ANR、low memory killer、系统强杀、死机、断电等其他无法正常捕获到的问题。当然异常率会存在一些误报，比如用户从系统的任务管理器中划掉应用。对于线上的大数据来说，还是可以帮助我们发现代码中的一些隐藏问题。</p><p>所以就得到了一个新的指标来衡量应用的稳定性，即<strong>异常率</strong>。</p><pre><code>UV 异常率 = 发生异常退出或崩溃的 UV / 登录 UV\n</code></pre><p>前不久我们的一个应用灰度版本发现异常退出的比例增长不少，最后排查发现由于视频播放存在一个巨大bug，会导致可能有用户手机卡死甚至重启，这是传统崩溃收集很难发现的问题。</p><p>根据应用的前后台状态，我们可以把异常退出分为前台异常退出和后台异常退出。“被系统杀死”是后台异常退出的主要原因，当然我们会<strong>更关注前台的异常退出</strong>的情况，这会跟ANR、OOM等异常情况有更大的关联。</p><p>通过异常率我们可以比较全面的评估应用的稳定性，对于线上监控还需要完善崩溃的报警机制。在微信我们可以做到5分钟级别的崩溃预警，确保能在第一时间发现线上重大问题，尽快决定是通过发版还是动态热修复解决问题。</p><h2>总结</h2><p>今天，我讲了Android的两种崩溃，重点介绍了Native崩溃的捕获流程和一些难点。做一个高可用的崩溃收集SDK并不容易，它背后涉及Linux信号处理以及内存分配、汇编等知识，当你内功修炼得越深厚，学习这些底层知识就越得心应手。</p><p>接着，我们讨论了崩溃率应该如何去计算，崩溃率的高低跟应用时长、复杂度、收集SDK有关。不仅仅是崩溃率，我们还学习了目前ANR采集的方式以及遇到的问题，最后提出了异常率这一个新的稳定性监控指标。</p><p>作为技术人员，我们不应该盲目追求崩溃率这一个数字，应该以用户体验为先，如果强行去掩盖一些问题往往更加适得其反。我们不应该随意使用try catch去隐藏真正的问题，要从源头入手，了解崩溃的本质原因，保证后面的运行流程。在解决崩溃的过程，也要做到由点到面，不能只针对这个崩溃去解决，而应该要考虑这一类崩溃怎么解决和预防。</p><p>崩溃的治理是一个长期的过程，在专栏下一期我会重点讲一些分析应用崩溃的方法论。另外，你如果细心的话，可以发现，在这篇文章里，我放了很多的超链接，后面的文章里也会有类似的情况。所以，这就要求你在读完文章之后，或者读的过程中，如果对相关的背景信息或者概念不理解，就需要花些时间阅读周边文章。当然，如果看完还是没有明白，你也可以在留言区给我留言。</p><h2>课后作业</h2><p><a href=\"https://chromium.googlesource.com/breakpad/breakpad/+/master\">Breakpad</a>是一个跨平台的开源项目，<span class=\"orange\">今天的课后作业是使用Breakpad来捕获一个Native崩溃，并在留言区写下你今天学习和练习后的总结与思考。</span></p><p>当然我在专栏GitHub的<a href=\"https://github.com/AndroidAdvanceWithGeektime\">Group</a>里也为你提供了一个<a href=\"https://github.com/AndroidAdvanceWithGeektime/Chapter01\">Sample</a>方便你练习，如果你没使用过Breakpad的话，只需要直接编译即可。希望你可以通过一个简单的Native崩溃捕获过程，完成minidump文件的生成和解析，在实践中加深对Breakpad工作机制的认识。</p><p>我要再次敲黑板划重点了，请你一定要坚持参与我们的课后练习，从最开始就养成学完后立马动手操作的好习惯，这样才能让学习效率最大化，一步步接近“成为高手”的目标。当然了，认真提交作业的同学还有机会获得学习加油礼包。接下来，就看你的了！</p><p>欢迎你点击“请朋友读”，把今天的内容分享给好友，邀请他一起学习。最后别忘了在评论区提交今天的作业，我也为认真完成作业的同学准备了丰厚的“<a href=\"http://time.geekbang.org/column/article/70250\">学习加油礼包</a>”，期待与你一起切磋进步哦。</p><p><img src=\"https://static001.geekbang.org/resource/image/24/c0/24c190870d71c3daa203a939d67358c0.jpg?wh=1110*549\" alt=\"\"><img src=\"https://static001.geekbang.org/resource/image/30/aa/306ef8892cc985a19fdd36534e7c5daa.png?wh=1110*110\" alt=\"\"></p>","comments":[{"had_liked":false,"id":45558,"user_name":"孙鹏飞","can_delete":false,"product_type":"c1","uid":1171070,"ip_address":"","ucode":"18ADF5C2B78938","user_header":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","comment_is_top":true,"comment_ctime":1543673135,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"9.2233721200027996e+18","product_id":100021101,"comment_content":"关于x86模拟器下无法生成日志的问题是由于clang导致的，需要使用gcc编译，例子的readme里已经补上了解决方法","like_count":20,"discussions":[{"author":{"id":2653766,"avatar":"https://static001.geekbang.org/account/avatar/00/28/7e/46/453a2564.jpg","nickname":"科学民工","note":"","ucode":"02E70F1A019BEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382367,"discussion_content":"提示找不到-std=c++11","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625544507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53372,"user_name":"Owen","can_delete":false,"product_type":"c1","uid":1038637,"ip_address":"","ucode":"845584BC1CCF69","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d9/2d/ca99e374.jpg","comment_is_top":true,"comment_ctime":1545634459,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"9.2233720942350008e+18","product_id":100021101,"comment_content":"关于breakpad的学习，结合老师的讲解和自己的爬坑，参照老师的demo，自己写了个自己觉得理解比较通透的总结，欢迎各位大佬指导和建议https:&#47;&#47;github.com&#47;devzhan&#47;Breakpad","like_count":14},{"had_liked":false,"id":47299,"user_name":"周大军","can_delete":false,"product_type":"c1","uid":1075960,"ip_address":"","ucode":"E9452270B728AB","user_header":"https://static001.geekbang.org/account/avatar/00/10/6a/f8/cae5e419.jpg","comment_is_top":true,"comment_ctime":1544102805,"is_pvip":false,"replies":[{"id":"16882","content":"赞","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1544107476,"ip_address":"","comment_id":47299,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720770535997e+18","product_id":100021101,"comment_content":"首先感谢下前面同学的优质评论，我遇到一些问题实在搞不定时候，参考评论解决了一些问题。以下是我具体遇到的一些问题，希望能够给用Ubuntu作为开发环境的同学一点帮助。<br>PC操作系统：Ubuntu18.04  X64<br>AS版本：3.1<br>手机：华为V8  8.0系统<br>遇到的问题：<br>1. 导入项目编译不过：<br>Build command failed.<br>Error while executing process &#47;home&#47;jayden&#47;Android&#47;Sdk&#47;cmake&#47;3.6.4111459&#47;bin&#47;cmake with arguments {-H&#47;mnt&#47;D.....<br>CMake Error: CMAKE_C_COMPILER not set, after EnableLanguage<br>CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage<br>-- Configuring incomplete, errors occurred!<br>解决方法：<br>下载cmake 3.6对应的ndk版本，下载ndk12版本（ https:&#47;&#47;dl.google.com&#47;android&#47;repository&#47;android-ndk-r12b-linux-x86_64.zip）解压到sdk路径下，并在local.properties配置上对应的ndk.dir路径。<br><br>2. minidump_stackwalk  dump对应的 crash文件时候，报错，如上老师说的，需要自己编译对应环境的源码，所以我选择下载https:&#47;&#47;github.com&#47;google&#47;breakpad里的depot_tools，然后make install出来自己用。也可以借鉴其他人下载缺失的头文件来编译github上的源码。<br><br>3. addr2line的时候，报错 File format not recognized， Linux的话需要用aarch64-linux-android-4.9，而不是arm-linux-androideabi-4.9 。<br> ~&#47;Android&#47;Sdk&#47;android-ndk-r12b&#47;toolchains&#47;aarch64-linux-android-4.9&#47;prebuilt&#47;linux-x86_64&#47;bin&#47;aarch64-linux-android-addr2line -f -C -e sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;arm64-v8a&#47;libcrash-lib.so 0x5a0<br>Crash()<br>&#47;mnt&#47;Data&#47;github&#47;Geek_Android_Improve&#47;Chapter01&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10","like_count":9,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431728,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544107476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46241,"user_name":"永远年轻","can_delete":false,"product_type":"c1","uid":1097653,"ip_address":"","ucode":"349BF9EEB4FE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/bf/b5/a8db0572.jpg","comment_is_top":true,"comment_ctime":1543888084,"is_pvip":false,"replies":[{"id":"16616","content":"这个赞一下。有一个问题就是我们虽然可以提供breakpad tools 编译好的bin放上去，但由于运行环境不同会导致上述缺少动态链接库的问题，所以建议同学自己编译。网上的文章多是提出depottools的编译方案，其实可以使用breakpad的源码直接使用cmake编译。这个在breakpad官方库的doc里有说明","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1543932800,"ip_address":"","comment_id":46241,"utype":1}],"discussion_count":3,"race_medal":0,"score":"9.223372068463401e+18","product_id":100021101,"comment_content":"虽然历经阻碍，最终没有 dump 成功，但可以给还没操作的同学一点建议<br>1.最好自备梯子，导入工程会很顺利<br>2.Smaple 里「补充内容」那几行代码是加到 build.gradle -&gt; andoroid -&gt; defaultConfig 里的<br>3.装在 ARM 设备上时提示找不到 &quot;libbreakpad-core.so&quot; , build 一个 apk 就好了<br>4.macOS 10.14 删除了 libstdc++.6.dylib 和 libstdc++.dylib 两个动态库，&#47;usr&#47;lib 里的同名文件都是 libstdc++.6.0.9.dylib 的替身，用 minidump_stackwalk 时会提示 「__ZTTNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEE」这个方法找不到，通过 google 搜索都是 Xcode 开发相关的解决方案<br>ps 试着下 depot_tools 自己编译，要下载好几个 G 的数据，放弃了。","like_count":7,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431394,"discussion_content":"这个赞一下。有一个问题就是我们虽然可以提供breakpad tools 编译好的bin放上去，但由于运行环境不同会导致上述缺少动态链接库的问题，所以建议同学自己编译。网上的文章多是提出depottools的编译方案，其实可以使用breakpad的源码直接使用cmake编译。这个在breakpad官方库的doc里有说明","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543932800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248390,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/86/1ee189f4.jpg","nickname":"Telemetry","note":"","ucode":"9EC056227BA286","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534212,"discussion_content":"2.Smaple 里「补充内容」那几行代码是加到 build.gradle -&gt; andoroid -&gt; defaultConfig 里的. 感谢，这条帮助很大，我一直是append到build.gradle的最末尾一直没成功。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638131389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135912,"avatar":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","nickname":"黑色毛衣","note":"","ucode":"FF7E235F91BA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2329,"discussion_content":"那个 so 库，build apk 的会生成吧，为啥装上去会提示找不到 so 库呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563466912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60855,"user_name":"答案","can_delete":false,"product_type":"c1","uid":1183081,"ip_address":"","ucode":"677DC3DEB6400D","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/69/678c0443.jpg","comment_is_top":false,"comment_ctime":1547562885,"is_pvip":false,"replies":[{"id":"22055","content":"👍","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1548042346,"ip_address":"","comment_id":60855,"utype":1}],"discussion_count":6,"race_medal":0,"score":"138986516357","product_id":100021101,"comment_content":"文哥～我发现其实可以不用重新编译minidump_stackwalk，Android自带就有！我是windows系统，在AS安装目录下bin\\lldb\\bin下。我写了篇文章，亲自试过，也完成了作业！我看大家在评论区都是先编译然后再解析，而且有些学员还碰到各种问题，花了很多时间，所以希望我的经验能够帮助到其他学员，https:&#47;&#47;www.jianshu.com&#47;p&#47;0bfe7800bdef","like_count":32,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436643,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548042346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339329,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6f/c1/16948c92.jpg","nickname":"※点墨书生※","note":"","ucode":"BA952031A16F25","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":242132,"discussion_content":"赞一个，成功解析","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587468055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042316,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e7/8c/0349364f.jpg","nickname":"hyzhang","note":"","ucode":"418FA688F8297B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198022,"discussion_content":"mac下同样有效；AS目录下也有minidump_stackwalk文件；","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583463053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1510680,"avatar":"https://static001.geekbang.org/account/avatar/00/17/0d/18/4968295a.jpg","nickname":"雄起啊老哥","note":"","ucode":"516F0421F90DA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52943,"discussion_content":"厉害，验证过了，完全可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574093613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1434162,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e2/32/cb116623.jpg","nickname":"欧乐为","note":"","ucode":"B1D8388AC4BA15","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40369,"discussion_content":"太棒了，咋发现的\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572177305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1331260,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/3c/03d71b3d.jpg","nickname":"Mr.Double","note":"","ucode":"17A3D6AB807DC7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38160,"discussion_content":"亲测有效，赞~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571738191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45384,"user_name":"东方","can_delete":false,"product_type":"c1","uid":1329945,"ip_address":"","ucode":"50FDAA2D95170C","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/19/6f037647.jpg","comment_is_top":false,"comment_ctime":1543629132,"is_pvip":false,"replies":[{"id":"16164","content":"一般做法有<br>1. 在线程池直接拦截所有的java异常，但是只在正式版本使用，保留灰度包不拦截<br>2. 一般crash sdk都提供虽然try catch，但依然会上报到后台的方法。","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543630986,"ip_address":"","comment_id":45384,"utype":1}],"discussion_count":1,"race_medal":0,"score":"83148007756","product_id":100021101,"comment_content":"try catch 被滥用，藏的很深，吃掉了异常。曾经因为这个问题，整个团队花了两天时间才挖出来。非常愤怒。想从Java虚拟机异常机制入手，拦截所有的Java异常，然后过滤自己感兴趣的信息。但是虚拟机复杂，无从下手。<br><br>想问一下张老师有什么好的建议？","like_count":20,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431010,"discussion_content":"一般做法有\n1. 在线程池直接拦截所有的java异常，但是只在正式版本使用，保留灰度包不拦截\n2. 一般crash sdk都提供虽然try catch，但依然会上报到后台的方法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543630986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47191,"user_name":"、、cryAllen","can_delete":false,"product_type":"c1","uid":1017204,"ip_address":"","ucode":"50032F6E2DDB4B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/85/74/e70862a2.jpg","comment_is_top":false,"comment_ctime":1544073172,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"74558517204","product_id":100021101,"comment_content":"第一步：<br>git clone代码，下载安装NDK和CMAKE，在此期间碰到一个问题，就是NDK下载版本太高，导致项目编译不过去，进一步分析，发现ndk-bundle\\toolchains文件夹中少了mips64el-linux-android-4.9和mipsel-linux-android-4.9文件，解决方法是下载一个旧的NDK版本，把这两个文件夹复制过去即可。<br><br>第二步：<br>接着就run，在手机上跑起来了，点击CRASH，程序崩溃，我进去sdcard中看到了crashDump目录，生成崩溃文件。<br><br>第三步：<br>接着运行： .&#47;tools&#47;mac&#47;minidump_stackwalk crashDump&#47;***.dmp &gt;crashLog.txt ，结果又报错了，由于我的系统是Windows，不是Mac，故需要重新编译minidump_stackwalk 工具，解决方法是下载个VMWare虚拟机，装个Unbuntu 系统，然后重新编译，在编译过程中，由于git clone了breakpad源码，会缺少一个thrid_party里的一个less文件夹，名称为linux_syscall_support.h头文件，需要补上即可。<br><br>第四步：<br>利用.&#47;configure &amp;&amp; make<br>对源码完成了编译，minidump_stackwalk这个文件在src&#47;processor&#47;目录中，然后运行：<br>.&#47;minidump_stackwalk crashDump&#47;***.dmp &gt;crashLog.txt <br>大功告成：<br>Operating system: Android<br>                  0.0.0 Linux 3.18.22+ #1 SMP PREEMPT Mon Jun 11 17:42:41 CST 2018 armv8l<br>CPU: arm<br>     ARMv1 ARM part(0x4100d0b0) features: half,thumb,fastmult,vfpv2,edsp,neon,vfpv3,tls,vfpv4,idiva,idivt<br>     10 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x77e<br>     r0 = 0x00000000    r1 = 0x00000001    r2 = 0xffdb9bdc    r3 = 0xf4a57fc0<br>     r4 = 0x702af968    r5 = 0x6fb3bc10    r6 = 0x12e21970    r7 = 0xffdb9bc8<br>     r8 = 0x12de5330    r9 = 0xf4a76a00   r10 = 0x12dd28b0   r12 = 0xf36a6fd8<br>     fp = 0x70536430    sp = 0xffdb9bb4    lr = 0xf36a379b    pc = 0xf36a377e<br>    Found by: given as instruction pointer in context<br> 1  dalvik-main space (deleted) + 0x5fffe<br>     sp = 0xffdb9bcc    pc = 0x12c60000<br>    Found by: stack scanning<br> 2  base.odex + 0x44121f<br>     sp = 0xffdb9bd0    pc = 0xdf254221<br>    Found by: stack scanning<br> 3  dalvik-LinearAlloc (deleted) + 0xf016<br>     sp = 0xffdb9bd4    pc = 0xeea9a018<br>    Found by: stack scanning<br> 4  dalvik-main space (deleted) + 0xd539e<br>     sp = 0xffdb9be0    pc = 0x12cd53a0<br>    Found by: stack scanning<br><br>","like_count":17,"discussions":[{"author":{"id":1609674,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erpOatVXGPRsqiaO8D6KBqFNtQ94vwqqicM09iaNTCfZ2r8Nxficf12I65C2SgvvyMv8ObQU5KZwKFxUw/132","nickname":"Geek_b362f0","note":"","ucode":"44586EB2A998AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371211,"discussion_content":"你好，需要下载的旧的NDK是哪个版本呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619684910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1017204,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/85/74/e70862a2.jpg","nickname":"、、cryAllen","note":"","ucode":"50032F6E2DDB4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1609674,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erpOatVXGPRsqiaO8D6KBqFNtQ94vwqqicM09iaNTCfZ2r8Nxficf12I65C2SgvvyMv8ObQU5KZwKFxUw/132","nickname":"Geek_b362f0","note":"","ucode":"44586EB2A998AA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375308,"discussion_content":"我用的是20以下的版本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621569739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":371211,"ip_address":""},"score":375308,"extra":""}]},{"author":{"id":1267172,"avatar":"https://static001.geekbang.org/account/avatar/00/13/55/e4/7061abd5.jpg","nickname":"Mr.J","note":"","ucode":"372D8C614F6C3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4948,"discussion_content":"按你的方法好了，不过我的是mac系统，直接从github上下载下来编译，缺少的啥文件也没什么提示，也编译成功了，不过日志看不懂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565856699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45358,"user_name":"Android 技师","can_delete":false,"product_type":"c1","uid":1005842,"ip_address":"","ucode":"F7691906C86655","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/12/2034b163.jpg","comment_is_top":false,"comment_ctime":1543598274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57378173122","product_id":100021101,"comment_content":"我买了 24 个课了，老师可以说是声音最好听的技术专栏作者了。","like_count":14},{"had_liked":false,"id":46924,"user_name":"IOT..Yang","can_delete":false,"product_type":"c1","uid":1240343,"ip_address":"","ucode":"11589D83B67FE9","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/17/c3eb014f.jpg","comment_is_top":false,"comment_ctime":1544002457,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"48788642713","product_id":100021101,"comment_content":"首先，按照github工程的ReadMe流程走一遍，碰到了2个提示，让我安装NDK和CMAKE，我根据提示安装后编译直接就成功了；<br><br>接着就run，在手机上跑起来了，点击CRASH，程序崩溃，我进去sdcard中看到了crashDump目录，但没有生成崩溃文件，看到评论说的，将sample的build.gradle中注释给去掉：<br>abiFilters &quot;armeabi-v7a&quot;, &#47;&#47; &quot;arm64-v8a&quot;, &quot;x86&quot; --&gt; abiFilters &quot;armeabi-v7a&quot;,  &quot;arm64-v8a&quot;, &quot;x86&quot;<br>我测试了下，成功生成了crash文件（不知道是不是张老师故意制造的障碍～捂手偷笑）；<br><br>接着运行： .&#47;tools&#47;mac&#47;minidump_stackwalk crashDump&#47;***.dmp &gt;crashLog.txt ，结果又报错了：<br>dyld: Symbol not found: __ZTTNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEE<br>  Referenced from: &#47;Users&#47;james&#47;Documents&#47;projec&#47;breakpad&#47;Chapter01&#47;.&#47;tools&#47;mac&#47;minidump_stackwalk<br>  Expected in: &#47;usr&#47;lib&#47;libstdc++.6.dylib<br> in &#47;Users&#47;james&#47;Documents&#47;projec&#47;breakpad&#47;Chapter01&#47;.&#47;tools&#47;mac&#47;minidump_stackwalk<br>Abort trap: 6<br>评论中老师说到缺少必要的动态链接库导致的，建议我们去编译breakpad源码；<br><br>然后，我去git clone了breakpad源码，利用<br>.&#47;configure <br>make<br>对源码完成了编译，minidump_stackwalk这个文件在src&#47;processor&#47;目录中，然后运行：<br>.&#47;minidump_stackwalk crashDump&#47;***.dmp &gt;crashLog.txt <br>大功告成，分享下我得成果：<br>Operating system: Android<br>                  0.0.0 Linux 3.18.31-perf-g4fd2040 #1 SMP PREEMPT Tue Dec 4 03:15:19 WIB 2018 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x600<br>     x0 = 0x0000007f7583e300    x1 = 0x0000007ff1b88ad4<br>     x2 = 0x0000007f792e3000    x3 = 0x0000000001e5a140","like_count":11,"discussions":[{"author":{"id":1330616,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4d/b8/85067041.jpg","nickname":"飞  流 星","note":"","ucode":"45A6F871E1BA85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327167,"discussion_content":"好用，终于生成CrashLog了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605757420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042316,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e7/8c/0349364f.jpg","nickname":"hyzhang","note":"","ucode":"418FA688F8297B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":197081,"discussion_content":"正解；breakpad直接在github里下载即可；","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583404816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1330860,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4e/ac/8565dcfe.jpg","nickname":"青铜","note":"","ucode":"E1434F1D4346D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52912,"discussion_content":"mac下的正解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574091545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45867,"user_name":"二两五花肉","can_delete":false,"product_type":"c1","uid":1148057,"ip_address":"","ucode":"4D6FC728BCFBDB","user_header":"https://static001.geekbang.org/account/avatar/00/11/84/99/495b1893.jpg","comment_is_top":false,"comment_ctime":1543805618,"is_pvip":false,"replies":[{"id":"16494","content":"这块的确会复杂一些，还需要对指令执行机制这些都一定了解","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543847890,"ip_address":"","comment_id":45867,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40198511282","product_id":100021101,"comment_content":"老师您好，学习这里的native崩溃处理，是不是得先学习c++，战五渣表示完全看不懂这些","like_count":9,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431245,"discussion_content":"这块的确会复杂一些，还需要对指令执行机制这些都一定了解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543847890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45554,"user_name":"克明（Kevin.Tian）","can_delete":false,"product_type":"c1","uid":1329979,"ip_address":"","ucode":"CC62E954B3CDB1","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/3b/ad333020.jpg","comment_is_top":false,"comment_ctime":1543671488,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31608442560","product_id":100021101,"comment_content":"只有空目录，里面没minidump文件","like_count":7},{"had_liked":false,"id":46009,"user_name":"少","can_delete":false,"product_type":"c1","uid":1334168,"ip_address":"","ucode":"3D6C73C72E2B1E","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/98/266422d5.jpg","comment_is_top":false,"comment_ctime":1543832421,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27313636197","product_id":100021101,"comment_content":"运行生成crashlog文件命令,总是报下面的错误:<br>dyld: Symbol not found: __ZTTNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEE<br>  Referenced from: &#47;Users&#47;Downloads&#47;Chapter01-master&#47;tools&#47;mac&#47;.&#47;minidump_stackwalk (which was built for Mac OS X 10.13)<br>  Expected in: &#47;usr&#47;lib&#47;libstdc++.6.0.9.dylib<br> in &#47;Users&#47;Downloads&#47;Chapter01-master&#47;tools&#47;mac&#47;.&#47;minidump_stackwalk<br>Abort trap: 6<br>不知道什么原因?","like_count":6,"discussions":[{"author":{"id":1125922,"avatar":"https://static001.geekbang.org/account/avatar/00/11/2e/22/cb5bce0b.jpg","nickname":"le bonheur","note":"","ucode":"7C3D1A9D099306","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341771,"discussion_content":"自己去编译","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610519770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45822,"user_name":"X","can_delete":false,"product_type":"c1","uid":1150623,"ip_address":"","ucode":"BA4C2F83953C54","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erxia5dpTeXMHR1e4ibicyRkS6fAuxarFicFZ3kwlrosFszjazFDJaRrrAiaH9hX0ia45xTKE6GetKIrgqg/132","comment_is_top":false,"comment_ctime":1543800322,"is_pvip":false,"replies":[{"id":"16492","content":"1. 有一个专门的性能收集模块，可以根据版本级别这些决定开启哪些采集模块，也可以控制采样率这些参数<br>2.微信保活做的很少的，主要的确是厂商的白名单","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543847742,"ip_address":"","comment_id":45822,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27313604098","product_id":100021101,"comment_content":" 你好张老师：<br>1.请问像微信这种大项目灰度测试一般是怎么做的？ 是开发了专门的sdk么，我所知的一般是给某些渠道包作为灰度包，或者客户端根据服务器的配置来决定启用新功能，但感觉都挺麻烦的。<br>2.另外想问张老师个与本节无关的，就是以前做跑步App，发现进程保活很痛苦，想了解下微信的保活手段有哪些，是否真的有白名单这东西？","like_count":6,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431219,"discussion_content":"1. 有一个专门的性能收集模块，可以根据版本级别这些决定开启哪些采集模块，也可以控制采样率这些参数\n2.微信保活做的很少的，主要的确是厂商的白名单","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543847742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1782816,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/34/20/6e359b6c.jpg","nickname":"布谷鸟","note":"","ucode":"3DACE2CAB4DD0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":80367,"discussion_content":"关于白名单的确是有的，之前root过oppo的一款手机，它里面有一个白名单数据库，数据库里赫然列出了微信等几个大厂app的目录","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576160899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45749,"user_name":"wmj","can_delete":false,"product_type":"c1","uid":1123812,"ip_address":"","ucode":"F280A4F41D6279","user_header":"https://static001.geekbang.org/account/avatar/00/11/25/e4/b351aa0e.jpg","comment_is_top":false,"comment_ctime":1543768256,"is_pvip":false,"replies":[{"id":"16490","content":"native异常分为有符号跟无符号两种，下一节我们会说到一些方法。","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543847532,"ip_address":"","comment_id":45749,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27313572032","product_id":100021101,"comment_content":"bugly里都是native的崩溃，要怎么处理？都是一些信号啥的，无从下手","like_count":6,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431190,"discussion_content":"native异常分为有符号跟无符号两种，下一节我们会说到一些方法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543847532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45948,"user_name":"gg","can_delete":false,"product_type":"c1","uid":1330324,"ip_address":"","ucode":"601B3AC6124515","user_header":"","comment_is_top":false,"comment_ctime":1543824257,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23018660737","product_id":100021101,"comment_content":"遇到的问题：<br>1.googlesource上breakpad源码无法下载<br>2.sample中的minidump_stackwalk无法运行<br>解决方案：<br>1.下载GitHub的镜像源码<br>2.自己编译breakpad<br>结果：<br>成功捕获native异常，并从dump文件中定位到异常代码<br>总结：<br>看似简单的例子在做的过程中也可能遇到各种问题，动手才能在做的过程中遇到问题，解决问题，提升自己的能力。","like_count":5},{"had_liked":false,"id":47537,"user_name":"青松","can_delete":false,"product_type":"c1","uid":1006419,"ip_address":"","ucode":"45E0D37BC05DC1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5b/53/ac383243.jpg","comment_is_top":false,"comment_ctime":1544152341,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18724021525","product_id":100021101,"comment_content":"windows平台，直接用Android studio导入工程，开始出现apk的库里没有libbreakpad-core.so的问题。<br>然后今天更新代码后可以了，看到提交记录加了arm64-v8a。 <br>代码里的minidump_stackwalk的版本是mac的，但是在Android Studio\\bin\\lldb\\bin找到了minidump_stackwalk.exe，也可以解析出crashLog，格式和内容看起来都非常正常，但是再使用arm-linux-androideabi-addr2line来定位代码就始终显示？，无法成功。 怀疑是minidump_stackwalk的问题。看了评论区发现windows的用户都是用了虚拟机的linux才成功的。是minidump_stackwalk无法在windows平台使用么？ 我已经在网上找了一圈，都没有找到如何在windows下编译minidump_stackwalk。望大佬帮忙解答下，谢谢！","like_count":4},{"had_liked":false,"id":46089,"user_name":"SunnyBird","can_delete":false,"product_type":"c1","uid":1004463,"ip_address":"","ucode":"03A37454831083","user_header":"https://static001.geekbang.org/account/avatar/00/0f/53/af/0e3ddb1d.jpg","comment_is_top":false,"comment_ctime":1543844147,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18723713331","product_id":100021101,"comment_content":"项目实践总结：<br>1. breakpad 下载问题，官网提供的工具可能是网络环境问题，没有下载下来，可以直接下载 master 分支 tgz 包<br>2. third_party&#47;ssl&#47;linux_syscall_support.h 缺失问题，https:&#47;&#47;chromium.googlesource.com&#47;linux-syscall-support&#47;+&#47;refs&#47;heads&#47;master 同样下载 tgz 包，解压 linux_syscall_support.h 放在项目 third_party&#47;ssl&#47; 目录<br>3. PC 端 minidump_stackwalk 工具，需要用 breakpad 源码编译<br>.&#47;configure<br>make <br>make install<br><br>项目例子地址 ： https:&#47;&#47;github.com&#47;sunnybird&#47;AdvanAndroid&#47;tree&#47;master&#47;BreakpadDemo<br>","like_count":4},{"had_liked":false,"id":45848,"user_name":"二两五花肉","can_delete":false,"product_type":"c1","uid":1148057,"ip_address":"","ucode":"4D6FC728BCFBDB","user_header":"https://static001.geekbang.org/account/avatar/00/11/84/99/495b1893.jpg","comment_is_top":false,"comment_ctime":1543803234,"is_pvip":false,"replies":[{"id":"16493","content":"如果第三方库，然后又没有symbol的话会比较麻烦。<br><br>如果本地可以复现的话，还可以用一些黑科技","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543847831,"ip_address":"","comment_id":45848,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18723672418","product_id":100021101,"comment_content":"我们项目bugly上的native crash太多了 基本都是第三方so库导致的 请问老师该怎么处理","like_count":4,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431238,"discussion_content":"如果第三方库，然后又没有symbol的话会比较麻烦。\n\n如果本地可以复现的话，还可以用一些黑科技","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543847831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1371983,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ef/4f/8b7e1f1e.jpg","nickname":"roie","note":"","ucode":"0CC9598364820A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":531993,"discussion_content":"老师，如果是第三方库导致崩溃，在bugly平台上手机的native日志信息和我们现在通过Chapter01例子自己手动转换解析出来的崩溃日志信息两者有什么区别？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637490953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":431238,"ip_address":""},"score":531993,"extra":"{\"user_type\":1}"}]},{"author":{"id":1124312,"avatar":"https://static001.geekbang.org/account/avatar/00/11/27/d8/77363ee4.jpg","nickname":"刘先生","note":"","ucode":"F23D9950CA0BF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407478,"discussion_content":"啥黑科技，可以分享下吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635008070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323726,"user_name":"Telemetry","can_delete":false,"product_type":"c1","uid":1248390,"ip_address":"","ucode":"9EC056227BA286","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/86/1ee189f4.jpg","comment_is_top":false,"comment_ctime":1638134652,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14523036540","product_id":100021101,"comment_content":"参考了很多这里的评论，对我帮助很大. 希望能给之后用Linux desktop和emulator的同学一点帮助。<br><br>能成功的版本号：<br>nkd:16<br>Android Gradle Plugin Version:4.0.1<br>Gradle version: 6.1.1<br>cmake:3.6<br><br>遇到的问题：<br>1.下好ndk16时发现系统仍然会通过ANDROID_NDK读到之前的ndk20，导致错误<br>解决方法：手动在terminal输入export ANDROID_NDK=path&#47;to&#47;ndk16<br><br>2.emulator闪退报错：<br>Android Emulator closed because internal error: emuglConfig_init: blacklisted=0 has_guest_renderer=1<br>解决方法：<br>在AVD Configuration-&gt;Emulated Performance, 选择Software而不是Graphics<br><br><br>minidump_stackwalker 工具来根据 minidump 文件生成堆栈跟踪log:<br>$ .&#47;minidump_stackwalk ..&#47;..&#47;..&#47;Chapter01&#47;1e39fbb5-2d42-41be-23ac02b4-7fa793dc.dmp &gt; ..&#47;..&#47;..&#47;Chapter01&#47;crashLog.txt<br><br>Operating system: Android<br>                  0.0.0 Linux 4.4.124+ #1 SMP PREEMPT Wed Jan 30 07:13:09 UTC 2019 i686<br>CPU: x86<br>     AuthenticAMD family 6 model 6 stepping 3<br>     4 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x515<br>    eip = 0xd14ef515   esp = 0xffb643a8   ebp = 0xffb643b8   ebx = 0xd14f0fe4<br>    esi = 0xd19bc35f   edi = 0xffb645bc   eax = 0x00000000   ecx = 0x53525a6e<br>    edx = 0xffb643d0   efl = 0x00210296<br>    Found by: given as instruction pointer in context<br> 1  libcrash-lib.so + 0x535<br>    eip = 0xd14ef535   esp = 0xffb643c0   ebp = 0xffb643c8<br>    Found by: previous frame&#39;s frame pointer<br> 2  libart.so + 0x5f6a18<br>    eip = 0xe9e7da18   esp = 0xffb643d0   ebp = 0xffb643f0<br>    Found by: previous frame&#39;s frame pointer<br>    <br><br>符号解析，可以使用 ndk 中提供的addr2line来根据地址进行一个符号反解的过程:<br>$ .&#47;Android&#47;Sdk&#47;ndk-bundle&#47;toolchains&#47;aarch64-linux-android-4.9&#47;prebuilt&#47;linux-x86_64&#47;bin&#47;aarch64-linux-android-addr2line -f -C -e Learning&#47;Chapter01&#47;sample&#47;build&#47;intermediates&#47;merged_native_libs&#47;debug&#47;out&#47;lib&#47;x86&#47;libcrash-lib.so 0x515<br>输出结果如下:<br>Crash()<br>Learning&#47;Chapter01&#47;sample&#47;.cxx&#47;cmake&#47;debug&#47;x86&#47;..&#47;..&#47;..&#47;..&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>","like_count":3},{"had_liked":false,"id":79904,"user_name":"GoghVin","can_delete":false,"product_type":"c1","uid":1464787,"ip_address":"","ucode":"876C5B94CA2F36","user_header":"https://static001.geekbang.org/account/avatar/00/16/59/d3/a9f7f9d9.jpg","comment_is_top":false,"comment_ctime":1553571672,"is_pvip":false,"replies":[{"id":"31264","content":"对的，是这样的，你这个例子里的数组会放在栈里，占用空间","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1555477961,"ip_address":"","comment_id":79904,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14438473560","product_id":100021101,"comment_content":"老师，您好，我有个问题想咨询下，我看了Breakpad的源码，发现在生成minidump的时候，其获取的是线程栈顶32K的内存区域（BreakPad注释（linux_dumper.cc:&#47;LinuxDumper::GetStackInfo）<br>&#47;&#47; Get information about the stack, given the stack pointer. We don&#39;t try to<br>&#47;&#47; walk the stack since we might not have all the information needed to do<br>&#47;&#47; unwind. So we just grab, up to, 32k of stack.），<br>请问这个理解是正确的吗？如果是正确的，那么只要运行时的栈空间大于32k，那么在服务端进行堆栈回溯的时候，就会有问题，为了验证这个猜测，我在您给的demo基础上进行了测试，代码如下：<br>&#47;&#47;==========Code 1===========<br>  int frame[1024];<br>    memset(frame, 0, sizeof(int)*1024);<br>    volatile int *a = (int *) (NULL);<br>    *a = 1;<br>&#47;&#47;==========Code 2===========<br>  int frame[40*1024];<br>    memset(frame, 0, sizeof(int)*40*1024);<br>    volatile int *a = (int *) (NULL);<br>    *a = 1;<br><br>Code 1和Code2的堆栈是不一致的，Code1中可以看到函数的调用关系，而Code2中只能看到最后crash的函数，没有调用关系。<br><br>","like_count":3,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444680,"discussion_content":"对的，是这样的，你这个例子里的数组会放在栈里，占用空间","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555477961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2103418,"avatar":"https://static001.geekbang.org/account/avatar/00/20/18/7a/a795001e.jpg","nickname":"Small bench","note":"","ucode":"90B61FDEA16B76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297089,"discussion_content":"int frame[20*1024];\nmemset(frame, 0, sizeof(int)*40*1024);\n这个错误breakpad看到未捕获到，系统会捕获到，请问下，知道为什么吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596771049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":51120,"user_name":"Seven","can_delete":false,"product_type":"c1","uid":1328562,"ip_address":"","ucode":"C1C68316449B57","user_header":"https://static001.geekbang.org/account/avatar/00/14/45/b2/ee0cfc12.jpg","comment_is_top":false,"comment_ctime":1545117818,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14430019706","product_id":100021101,"comment_content":"交作业啦<br><br>首次看到这篇文章后就进行了手动操作，无奈遇到了模拟器无法生产dmp文件，不过还好用真机可以生成成功，但是使用sample中的tools工具不能生成txt文件，后面倒是生成了，但生成的txt却是个空文件，低迷了一段时间，却又无可奈何，后来换用了windows，结果没想到难度系数无限增大。<br><br>最近看了疑点解答的文章后，又重新产生了希望，开始动手实践，终于搞定了模拟器无法生产dmp文件的问题，继续使用Mac操作，总算成功了。<br><br>第一步：<br>运行sample，得到dmp文件，将文件导入到电脑中<br><br>第二步：<br>git下来Google的breakpad项目，使用.&#47;configure &amp;&amp; make进行项目编译<br><br>第三步：<br>使用&#47;breakpad&#47;src&#47;processor&#47;microdump_stackwalk，对dmp文件进行处理，得到txt文件<br>命令：microdump_stackwalk xxx.dmp &gt;xxx.txt<br>成果如下：<br>Operating system: Android<br>                  0.0.0 Linux 4.4.23+ #1 SMP PREEMPT Mon Sep 17 22:10:21 CST 2018 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x5dc &#47;&#47; 利用这个地址<br>     x0 = 0x0000000000000000    x1 = 0x0000000000000001<br>     x2 = 0x0000000000000000    x3 = 0x0000007a494a3a00<br><br>第四步：<br>根据编译得到的信息：CPU: arm64，0x5dc <br>根据这两个信息，使用NDK对应目录下的处理工具，我这里的信息使用的工具是：<br>&#47;android-ndk-r16b&#47;toolchains&#47;aarch64-linux-android-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;aarch64-linux-android-addr2line<br>命令：&#47;xxx&#47;xxx&#47;xxx-addr2line -f -C -e &#47;xxx&#47;Chapter01&#47;sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;arm64-v8a&#47;libcrash-lib.so<br>解析得到的信息如下：<br>Crash()<br>&#47;Users&#47;qixuefeng&#47;AndroidDemo&#47;Chapter1&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>","like_count":3},{"had_liked":false,"id":301122,"user_name":"科学民工","can_delete":false,"product_type":"c1","uid":2653766,"ip_address":"","ucode":"02E70F1A019BEF","user_header":"https://static001.geekbang.org/account/avatar/00/28/7e/46/453a2564.jpg","comment_is_top":false,"comment_ctime":1625544675,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10215479267","product_id":100021101,"comment_content":"x86模拟器问题在readme的解决方案有点旧了<br>在build.gradle改为<br>defaultConfig {<br>        minSdkVersion 14<br>        targetSdkVersion 28<br>        versionCode 1<br>        versionName &quot;1.0&quot;<br><br>        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;<br>        ndk {<br>            abiFilters &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;, &quot;x86&quot;<br>        }<br>        externalNativeBuild {<br>            cmake {<br>                cppFlags&quot;-std=c++11&quot;<br>                arguments&quot;-DANDROID_STL=c++_static&quot;<br>            }<br>        }<br>    }","like_count":2},{"had_liked":false,"id":145660,"user_name":"李华","can_delete":false,"product_type":"c1","uid":1121984,"ip_address":"","ucode":"058E96ACEC2C0A","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/c0/eec916ef.jpg","comment_is_top":false,"comment_ctime":1572338698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10162273290","product_id":100021101,"comment_content":"接触Native Crash 这个东西都感觉新鲜 😂<br>刚上手就是问题：<br>1.clone depot_tools仓库 失败<br>个人解决方法：git terminal 设置代理<br>2.fetch breakpad 失败<br>个人解决方法：下载breakpad仓库到本地，然后执行.&#47;configure &amp;&amp; make，顺利编过<br>Sample倒是顺利导入了，<br>转换出来的CrashLog.txt长这个样子<br><br>Operating system: Android<br>                  0.0.0 Linux 4.4.78-13889051 #1 SMP PREEMPT Thu Jul 26 13:11:52 KST 2018 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x650<br>     x0 = 0x00000079490d9380    x1 = 0x0000007fcb806d04<br>     x2 = 0x0000000000000000    x3 = 0x00000079490c4a00<br>     x4 = 0x0000007fcb807120    x5 = 0x000000792e8a8e9f<br>     x6 = 0x0000000000000002    x7 = 0x0000000000000000<br>     x8 = 0x0000000000000000    x9 = 0x0000000000000001<br>     ......<br><br>3.????:0的鬼东西<br>这个还是要查看自己手机的CPU。比如：<br><br>➜  bin .&#47;aarch64-linux-android-addr2line -f -C -e &#47;Users&#47;xxx&#47;Downloads&#47;Chapter01-master&#47;sample&#47;build&#47;intermediates&#47;cmake&#47;debug&#47;obj&#47;x86&#47;libcrash-lib.so 0x650<br>??<br>??:0<br>➜  bin .&#47;aarch64-linux-android-addr2line -f -C -e &#47;Users&#47;xxx&#47;Downloads&#47;Chapter01-master&#47;sample&#47;build&#47;intermediates&#47;cmake&#47;debug&#47;obj&#47;armeabi-v7a&#47;libcrash-lib.so 0x650<br>??<br>??:0<br>➜  bin .&#47;aarch64-linux-android-addr2line -f -C -e &#47;Users&#47;xxx&#47;Downloads&#47;Chapter01-master&#47;sample&#47;build&#47;intermediates&#47;cmake&#47;debug&#47;obj&#47;arm64-v8a&#47;libcrash-lib.so 0x650<br>Crash()<br>&#47;Users&#47;xxx&#47;Downloads&#47;Chapter01-master&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>其实用ADB看一下就OK了","like_count":2},{"had_liked":false,"id":59412,"user_name":"古月弓虽1993","can_delete":false,"product_type":"c1","uid":1237500,"ip_address":"","ucode":"86122CC701F02A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3jSpV7VvK6NaUH6X1LNYWGsQdFSTu4SwTZ0nQlSYGTOY2FrDCcMic9qFXnu2ZGR88hBlUQK28Whg/132","comment_is_top":false,"comment_ctime":1547366626,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10137301218","product_id":100021101,"comment_content":"下载 depot_tools 工具后 fetch breakpad 老是失败，上网搜了不少方法，还是没有解决 fetch breakpad 失败的问题。后来自己想了想，fetch breakpad 实际上就是拉取 breakpad 的源码，既然通过 depot_tools 工具下载失败，直接从 github 上把 breakpad 源码 clone 下来不就好了。从github 上面直接clone 源码就好了(需要补充个缺失的文件)","like_count":2},{"had_liked":false,"id":54152,"user_name":"奚岩","can_delete":false,"product_type":"c1","uid":1107769,"ip_address":"","ucode":"E7D3A56216EE47","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/39/b47b1bc0.jpg","comment_is_top":false,"comment_ctime":1545797937,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10135732529","product_id":100021101,"comment_content":"mac 上使用 minidump_stackwalk 如果提示  dyld: Symbol not found: __ZTTNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEE<br><br>可以自己下载 depot_tools  重新编译，由于Google 资源，下载较慢，可以设置代理，clone 时设置 deepth,还是很快的：<br><br># proxy<br>export http_proxy=&quot;http:&#47;&#47;127.0.0.1:1087&quot;<br>export https_proxy=&quot;http:&#47;&#47;127.0.0.1:1087&quot;<br><br>git clone --depth=1 https:&#47;&#47;chromium.googlesource.com&#47;chromium&#47;tools&#47;depot_tools.git<br><br>然后 按照 文档执行相关命令，最终生成的文件在 breakpad&#47;src&#47;src&#47;processor 目录下<br><br>这个是我电脑编译可用的：http:&#47;&#47;img.imtianx.cn&#47;2018&#47;1226&#47;minidump_stackwalk","like_count":2},{"had_liked":false,"id":47068,"user_name":"Stefan","can_delete":false,"product_type":"c1","uid":1331264,"ip_address":"","ucode":"68ADFEEA3A5C18","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/40/292d0a3f.jpg","comment_is_top":false,"comment_ctime":1544028296,"is_pvip":false,"replies":[{"id":"16818","content":"对的，不同平台的需要使用对应的toolchains解析，一会我补充到readme里","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1544060267,"ip_address":"","comment_id":47068,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133962888","product_id":100021101,"comment_content":"换了aarch64-linux-android-4.9下面的addr2line就可以了<br><br>$NDK_HOME&#47;toolchains&#47;aarch64-linux-android-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;aarch64-linux-android-addr2line -f -C -e sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;release&#47;0&#47;lib&#47;arm64-v8a&#47;libcrash-lib.so 0x5e4","like_count":2,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431652,"discussion_content":"对的，不同平台的需要使用对应的toolchains解析，一会我补充到readme里","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544060267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46360,"user_name":"Alex","can_delete":false,"product_type":"c1","uid":1120943,"ip_address":"","ucode":"F012214B9032D2","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/af/287d374f.jpg","comment_is_top":false,"comment_ctime":1543907620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10133842212","product_id":100021101,"comment_content":"看到评论有人说在手机上没有生成dmp文件，是因为作者在simple的gradle文件中<br> ndk {<br>            abiFilters &quot;armeabi-v7a&quot;&#47;&#47;, &quot;arm64-v8a&quot;, &quot;x86&quot;<br>        }<br>注释掉了v8a的部分，只要把注释取消就好了。<br>通过本章学习，了解到了NDK的异常捕获方式及使用方法，以前获取想方设法复现异常，通过logcat直接获取到到堆栈的地址信息，并且通过addr2line、objdump和ndk-stack等工具进行定位，复现及定位十分麻烦，现在使用breakpad可以方便的像Java异常捕获，并上传到后台，以方便定位分析问题。","like_count":2},{"had_liked":false,"id":45858,"user_name":"汤姆猫","can_delete":false,"product_type":"c1","uid":1328701,"ip_address":"","ucode":"ABCC58277F05C5","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/3d/647829f9.jpg","comment_is_top":false,"comment_ctime":1543804151,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10133738743","product_id":100021101,"comment_content":"张老师能对demo说一下简单讲解吗...<br>","like_count":2},{"had_liked":false,"id":329225,"user_name":"小城大梦","can_delete":false,"product_type":"c1","uid":2615209,"ip_address":"","ucode":"F616B90C78008B","user_header":"https://static001.geekbang.org/account/avatar/00/27/e7/a9/b09e3701.jpg","comment_is_top":false,"comment_ctime":1641221504,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5936188800","product_id":100021101,"comment_content":"补一下结果：<br>Operating system: Android<br>                  0.0.0 Linux 4.14.190-perf+ #1 SMP PREEMPT Mon Oct 11 12:39:36 CST 2021 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x600<br>     x0 = 0xb400007aab675350    x1 = 0x0000007fe2474d34<br>     x2 = 0x0000007fe24740b0    x3 = 0x0000007fe24740b0<br>     x4 = 0x0000007fe24740b0    x5 = 0x0000007fe24740b0<br>     x6 = 0x0000007fe24739b0    x7 = 0x0000007fe2473ab0<br>     x8 = 0x0000000000000000    x9 = 0x0000000000000001<br>    x10 = 0x0000000000430000   x11 = 0x0000000000000020<br>    x12 = 0x0000000000000000   x13 = 0xa0407330a2e529db<br>    x14 = 0x0000000000000006   x15 = 0xffffffffffffffff<br>    x16 = 0x0000007982b20fe8   x17 = 0x0000007982b105ec<br>    x18 = 0x0000007ce1fb6000   x19 = 0xb400007b5b66fbe0<br>    x20 = 0x0000000000000000   x21 = 0xb400007b5b66fbe0<br>    x22 = 0x0000007ce1883000   x23 = 0xb400007b5b66fc98<br>    x24 = 0x00000079d59b6268   x25 = 0x0000007ce1883000<br>    x26 = 0x0000000000000037   x27 = 0x0000000000000001<br>    x28 = 0x0000007fe2474d40    fp = 0x0000007fe2474d10<br>     lr = 0x0000007982b10624    sp = 0x0000007fe2474cf0<br>     pc = 0x0000007982b10600<br>    Found by: given as instruction pointer in context<br> 1  libcrash-lib.so + 0x620<br>     fp = 0x0000007fe2474d40    lr = 0x00000079ea9bced8<br>     sp = 0x0000007fe2474d20    pc = 0x0000007982b10624<br>    Found by: previous frame&#39;s frame pointer<br> 2  libart.so + 0x13ced4<br>     fp = 0x00000079d59b6268    lr = 0x00000079eaeffb20<br>     sp = 0x0000007fe2474d50    pc = 0x00000079ea9bced8<br>    Found by: previous frame&#39;s frame pointer<br> 3  base.apk] + 0x17a65d<br>     sp = 0x0000007fe2474db8    pc = 0x0000007983027661<br>    Found by: stack scanning<br> 4  libart.so + 0x133564<br>     sp = 0x0000007fe2474e20    pc = 0x00000079ea9b3568<br>    Found by: stack scanning<br> 5  base.apk] + 0x17a65d<br>     sp = 0x0000007fe2474e40    pc = 0x0000007983027661<br>    Found by: stack scanning<br>......","like_count":1},{"had_liked":false,"id":329223,"user_name":"小城大梦","can_delete":false,"product_type":"c1","uid":2615209,"ip_address":"","ucode":"F616B90C78008B","user_header":"https://static001.geekbang.org/account/avatar/00/27/e7/a9/b09e3701.jpg","comment_is_top":false,"comment_ctime":1641221404,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5936188700","product_id":100021101,"comment_content":"遇到了3个问题<br>问题1: ndk版本不对<br>错误信息：<br>A problem occurred configuring project &#39;:breakpad-build&#39;.<br>&gt; java.lang.NullPointerException (no error message)<br>原因：ndk 版本要为 16 - 19， 而AS下载的位最新的23<br>解决：从https:&#47;&#47;github.com&#47;android&#47;ndk&#47;wiki&#47;Unsupported-Downloads上下载符合版本的NDK，如我下载的位r19c<br><br>问题2: CMake Error<br>错误信息：<br>CMake Error at &#47;Users&#47;xxxx&#47;Library&#47;Android&#47;sdk&#47;cmake&#47;3.6.4111459&#47;share&#47;cmake-3.6&#47;Modules&#47;CMakeTestCCompiler.cmake:61 (message):<br>The C compiler<br>&quot;&#47;Users&#47;xxxx&#47;learning&#47;ndk&#47;android-ndk-r19c&#47;toolchains&#47;llvm&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;clang&quot;<br>is not able to compile a simple test program.<br>......<br><br>原因：系统安全和隐私权限限制<br>解决：<br>在&quot;安全与隐私&quot; ---&gt;&quot;开发者工具&quot;---&gt; 添加AndroidStudio即可<br><br>问题3: &#47;tools&#47;mac&#47;minidump_stackwalk crashDump&#47;*.dmp &gt;crashLog.txt  失败<br>错误信息：<br>dyld: Symbol not found: __ZTTNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEE<br>  Referenced from: &#47;Users&#47;xxxx&#47;learning&#47;android_advance&#47;Chapter01&#47;.&#47;tools&#47;mac&#47;minidump_stackwalk<br>  Expected in: &#47;usr&#47;lib&#47;libstdc++.6.dylib<br> in &#47;Users&#47;xxxx&#47;learning&#47;android_advance&#47;Chapter01&#47;.&#47;tools&#47;mac&#47;minidump_stackwalk<br>原因：缺少必要的动态库<br>解决：自己编译breakpad, https:&#47;&#47;github.com&#47;google&#47;breakpad, 要注意的是还需要安装和配置download depot_tools 到环境变量中<br><br><br><br><br><br><br>","like_count":1},{"had_liked":false,"id":319471,"user_name":"吴敬悦","can_delete":false,"product_type":"c1","uid":2388378,"ip_address":"","ucode":"3584EBFA5E6463","user_header":"","comment_is_top":false,"comment_ctime":1635824712,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5930792008","product_id":100021101,"comment_content":"经过我的观察，终于发现是由于NDK的版本导致的，把版本换成20，cmake换成3.6 就能成功了；然后我使用minidump_stackwalk 对 dmp文件操作的时候又报错，我就下载对应的源码，使用最新编译的工具，发现成功了<br>Operating system: Android<br>                  0.0.0 Linux 4.14.116 #1 SMP PREEMPT Thu Sep 2 12:27:32 CST 2021 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x650<br>     x0 = 0x0000007dab0f3980    x1 = 0x0000007fdd1283f4<br>     x2 = 0x0000000000000001    x3 = 0x0000000003e103e1<br>     x4 = 0x12c80c4012c80c40    x5 = 0x0000007daace1a44<br>     x6 = 0x0000000000000001    x7 = 0x000000000000206e<br>     x8 = 0x0000000000000000    x9 = 0x0000000000000001<br>    x10 = 0x0000000000430000   x11 = 0x0000007daafee000","like_count":1},{"had_liked":false,"id":194144,"user_name":"多数派","can_delete":false,"product_type":"c1","uid":1286330,"ip_address":"","ucode":"FF683B6D269449","user_header":"https://static001.geekbang.org/account/avatar/00/13/a0/ba/63bb2c79.jpg","comment_is_top":false,"comment_ctime":1585030682,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879997978","product_id":100021101,"comment_content":"<br>1.运行该项目，点击闪退，生成dump奔溃文件<br><br> 2. 解析dmp to txt<br><br>&#47;Applications&#47;Android\\ Studio.app&#47;Contents&#47;bin&#47;lldb&#47;bin&#47;minidump_stackwalk 2.dmp &gt;1&#47;txt<br><br>Operating system: Android<br>0.0.0 Linux 4.4.153-17394809 #2 SMP PREEMPT Wed Nov 27 21:16:35 KST 2019 aarch64<br>CPU: arm64 <br>8 CPUs<br><br><br><br>Crash reason: SIGSEGV  （可以参考https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;g-WzYF3wWAljok1XjPoo7w?）<br>Crash address: 0x0<br>Process uptime: not available<br><br><br>Thread 0 (crashed)<br>0 libcrash-lib.so + 0x650    (内存地址报错)<br>x0 = 0x0000007c62e46400 x1 = 0x0000007fcc6b6f94<br>x2 = 0x0000007fcc6b7030 x3 = 0x0000007c62a34428<br>x4 = 0x0000007fcc6b7250 x5 = 0x0000007ce8389218<br><br><br><br>3.根据报错信息，获取内存地址，解析具体报错位置<br><br><br><br>&#47;Users&#47;gengbiao.fan&#47;Library&#47;Android&#47;sdk&#47;ndk-bundle&#47;toolchains&#47;aarch64-linux-android-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;aarch64-linux-android-addr2line -f -C -e &#47;Users&#47;gengbiao.fan.o&#47;Desktop&#47;libcrash-lib.so 0x650<br><br>4.获取结果<br><br><br><br><br>Crash()<br><br>&#47;Users&#47;Chapter01&#47;sample&#47;.externalNativeBuild&#47;cmake&#47;debug&#47;arm64-v8a&#47;..&#47;..&#47;..&#47;..&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br><br>","like_count":1},{"had_liked":false,"id":158164,"user_name":"璞素星空","can_delete":false,"product_type":"c1","uid":1763010,"ip_address":"","ucode":"538EC52897EF85","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e6/c2/e6861b2a.jpg","comment_is_top":false,"comment_ctime":1575340929,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5870308225","product_id":100021101,"comment_content":"Mac版Android studio中minidump_stackwalk是自带的，在同级目录下可以找到breakpad 包括所需环境python 2.7 的相关信息，可见Android studio中同样集成使用了breakpad，绝对目录&#47;Applications&#47;Android Studio.app&#47;Contents&#47;bin&#47;lldb&#47;bin&#47;minidump_stackwalk，如果想完整自己编译的话可以下载git仓库重新编译，如果不可以直接使用studio包中编译好的unix可执行文件","like_count":1},{"had_liked":false,"id":86887,"user_name":"Lebens","can_delete":false,"product_type":"c1","uid":1167935,"ip_address":"","ucode":"ABD0835F406EE1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKvH9eIPco0g6odQ90KwJJ8w29wIV8Gm6ekVLeoNICy9micxvNAYA7G7ic7oqvNNoxsSTWXOOTP4VbQ/132","comment_is_top":false,"comment_ctime":1555470424,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5850437720","product_id":100021101,"comment_content":"运气太好一次就成啊😂","like_count":1},{"had_liked":false,"id":78968,"user_name":"百岁无忧","can_delete":false,"product_type":"c1","uid":1453823,"ip_address":"","ucode":"5283111F21CE40","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/ff/9467da86.jpg","comment_is_top":false,"comment_ctime":1553310827,"is_pvip":false,"replies":[{"id":"31138","content":"可以看看后面的Sample解析","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555402062,"ip_address":"","comment_id":78968,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5848278123","product_id":100021101,"comment_content":"第一次动手尝试,发现windows下的tools&#47;mac minidump不能用,自己编译了libbreakpad ,生成的各种不同品台的tools ,但是不知道怎么用","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444305,"discussion_content":"可以看看后面的Sample解析","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555402062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49128,"user_name":"松原","can_delete":false,"product_type":"c1","uid":1342471,"ip_address":"","ucode":"6BEC86963D1870","user_header":"https://static001.geekbang.org/account/avatar/00/14/7c/07/e176e375.jpg","comment_is_top":false,"comment_ctime":1544608011,"is_pvip":false,"replies":[{"id":"17900","content":"可以通过adb pull 路径  命令来拉取","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1544754507,"ip_address":"","comment_id":49128,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839575307","product_id":100021101,"comment_content":"请问老师 Dump日志分析中的第1步要如何将抓取到的日志拉取到本地中呢？","like_count":1,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432494,"discussion_content":"可以通过adb pull 路径  命令来拉取","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544754507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46741,"user_name":"金","can_delete":false,"product_type":"c1","uid":1329947,"ip_address":"","ucode":"0761E8BFA93E22","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/1b/9a36d7a5.jpg","comment_is_top":false,"comment_ctime":1543976448,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838943744","product_id":100021101,"comment_content":"疑问<br>.&#47;dump_syms .&#47;com.wj.breakpad&#47;4ba18911-6586-4f53-e0073c87-4e5be241.dmp &gt;.&#47;com.wj.breakpad&#47;crash.txt<br>.&#47;com.wj.breakpad&#47;4ba18911-6586-4f53-e0073c87-4e5be241.dmp: file is neither a fat binary file nor a Mach-O object file<br>转换失败了，是生成的dmp文件有问题吗？在mac mini 上转换的","like_count":1},{"had_liked":false,"id":46335,"user_name":"lee","can_delete":false,"product_type":"c1","uid":1268832,"ip_address":"","ucode":"CC681CEEC3C8AC","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/60/f848a624.jpg","comment_is_top":false,"comment_ctime":1543902944,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838870240","product_id":100021101,"comment_content":"看完这期，感觉只是点了一下native的调试，有些什么方法，至于怎么使用，需要自己去扩展。GitHub上的代码编译执行后，生成dmp文件，这个文件怎么解析？我查了一圈，有说用vs打开的，我看文章定位的也很准确。应该就这么多了。<br><br>那我觉得这篇文章内容就是，<br><br>1.如果是小公司，还是用bugly，我们也用bugly，来跟踪崩溃和anr。<br>2.有native开发的问题用breakpad的方式生成dmp，用vs打开，定位问题。<br><br>不知道总结的是否正确，请老师指点。","like_count":1},{"had_liked":false,"id":45771,"user_name":"HI","can_delete":false,"product_type":"c1","uid":1238921,"ip_address":"","ucode":"C65218113883E6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/89/207cc841.jpg","comment_is_top":false,"comment_ctime":1543793922,"is_pvip":true,"replies":[{"id":"16491","content":"内存非法等一些可以通过一些工具来跑","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543847591,"ip_address":"","comment_id":45771,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838761218","product_id":100021101,"comment_content":"目前在搞NDK项目，对于Native的错误也很无奈，还好Android Studio在断点调试的模式下，出现cash的时候自动能定位到那个地方，但是这个要复现出来，还有就是有些时候定位的地方并不准确，比如对于虚函数并不能定位到准确的地方，对于内存非法访问闪退，也只能定位到系统的函数，缺少完整的堆栈信息","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431203,"discussion_content":"内存非法等一些可以通过一些工具来跑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543847591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45450,"user_name":"Kenny","can_delete":false,"product_type":"c1","uid":1234061,"ip_address":"","ucode":"E57D67DCE27967","user_header":"https://static001.geekbang.org/account/avatar/00/12/d4/8d/a3fd8957.jpg","comment_is_top":false,"comment_ctime":1543645132,"is_pvip":false,"replies":[{"id":"16188","content":"这块在运行态不太好搞，但是在编译过程是可行的。通过插桩跟变换的方法，在try catch方法块中加一些统计代码。<br><br>这个专栏后面也会提供几种插桩的实现","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543655259,"ip_address":"","comment_id":45450,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838612428","product_id":100021101,"comment_content":"张老师，你好，try catch被泛滥使用，导致异常被掩盖掉，在一些大型项目排查难度很大，刚也看了张老师给一位同学的建议，有个疑问想问:有没有方法将野线程中try catch住的异常暴露？线程池中try catch异常暴露的方法，能否科普下？","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431044,"discussion_content":"这块在运行态不太好搞，但是在编译过程是可行的。通过插桩跟变换的方法，在try catch方法块中加一些统计代码。\n\n这个专栏后面也会提供几种插桩的实现","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543655259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45411,"user_name":"秋水无痕","can_delete":false,"product_type":"c1","uid":1328707,"ip_address":"","ucode":"A3C3DF44426EBF","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/43/7545067a.jpg","comment_is_top":false,"comment_ctime":1543634311,"is_pvip":false,"replies":[{"id":"16186","content":"因为音视频，网络库等会引入很多的native实现，对微信、淘宝等一些大型应用来说。native崩溃更多","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543654940,"ip_address":"","comment_id":45411,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838601607","product_id":100021101,"comment_content":"应用层的崩溃也可以提及，native层崩溃遇到的很少。如何监控anr？","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431024,"discussion_content":"因为音视频，网络库等会引入很多的native实现，对微信、淘宝等一些大型应用来说。native崩溃更多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543654940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45393,"user_name":"Bmo","can_delete":false,"product_type":"c1","uid":1183832,"ip_address":"","ucode":"EDED4DB4E7FC3B","user_header":"https://static001.geekbang.org/account/avatar/00/12/10/58/4672a724.jpg","comment_is_top":false,"comment_ctime":1543631067,"is_pvip":false,"replies":[{"id":"16185","content":"这个没有回调，是通过启动时的一个flag来标记","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543654859,"ip_address":"","comment_id":45393,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5838598363","product_id":100021101,"comment_content":"被系统杀死，low memory kill和任务管理器中划掉，这个有回调吗？应用要怎么感知？求指点","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431017,"discussion_content":"这个没有回调，是通过启动时的一个flag来标记","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543654859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1334600,"avatar":"https://static001.geekbang.org/account/avatar/00/14/5d/48/03abbbd1.jpg","nickname":"瑞","note":"","ucode":"1C5945FD2D05C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223899,"discussion_content":"能具体说下flag的逻辑吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586260871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351861,"user_name":"小许","can_delete":false,"product_type":"c1","uid":1022020,"ip_address":"","ucode":"0A7997A3E9368A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/44/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1658236168,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658236168","product_id":100021101,"comment_content":"跑出来了，泪目，三年前就买了这个课程，看了一些，根本看不下去，太难了，看不懂，就放弃了。<br>三年后觉的自己一点成长也没有，决定重新学习这个专栏，每一篇内容都要认真学习，每一个作业都要写出来！加油！<br>（参考了留言的同学们的作业）<br>Crash()<br>&#47;home&#47;mi&#47;workspace&#47;AndroidAdvance&#47;Chapter01&#47;sample&#47;.cxx&#47;Debug&#47;4052j2f4&#47;arm64-v8a&#47;..&#47;..&#47;..&#47;..&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>","like_count":0},{"had_liked":false,"id":334731,"user_name":"Geek_36419e","can_delete":false,"product_type":"c1","uid":2896934,"ip_address":"","ucode":"5F49FCD7CD5603","user_header":"","comment_is_top":false,"comment_ctime":1645093656,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645093656","product_id":100021101,"comment_content":"2022-02-17 18:26:02: minidump.cc:5200: ERROR: ReadBytes: read 0&#47;56<br>2022-02-17 18:26:02: minidump.cc:3259: ERROR: MinidumpSystemInfo cannot read system info<br>2022-02-17 18:26:02: minidump.cc:5371: ERROR: GetStream could not read stream type 7<br>2022-02-17 18:26:02: minidump.cc:5218: ERROR: SeekSet: error 0: No error<br>2022-02-17 18:26:02: minidump.cc:5317: ERROR: SeekToStreamType could not seek to stream type 7<br>2022-02-17 18:26:02: minidump.cc:5364: ERROR: GetStream could not seek to stream type 7<br>2022-02-17 18:26:02: minidump.cc:5218: ERROR: SeekSet: error 0: No error<br>2022-02-17 18:26:02: minidump.cc:5317: ERROR: SeekToStreamType could not seek to stream type 6<br>2022-02-17 18:26:02: minidump.cc:5364: ERROR: GetStream could not seek to stream type 6<br>2022-02-17 18:26:02: minidump.cc:5218: ERROR: SeekSet: error 0: No error<br>2022-02-17 18:26:02: minidump.cc:5317: ERROR: SeekToStreamType could not seek to stream type 4<br>2022-02-17 18:26:02: minidump.cc:5364: ERROR: GetStream could not seek to stream type 4<br>2022-02-17 18:26:02: minidump.cc:5218: ERROR: SeekSet: error 0: No error<br>2022-02-17 18:26:02: minidump.cc:5317: ERROR: SeekToStreamType could not seek to stream type 5<br>2022-02-17 18:26:02: minidump.cc:5364: ERROR: GetStream could not seek to stream type 5<br>2022-02-17 18:26:02: minidump.cc:5218: ERROR: SeekSet: error 0: No error<br>2022-02-17 18:26:02: minidump.cc:5317: ERROR: SeekToStreamType could not seek to stream type 3<br>2022-02-17 18:26:02: minidump.cc:5364: ERROR: GetStream could not seek to stream type 3<br>2022-02-17 18:26:02: minidump_processor.cc:158: ERROR: Minidump crash2.dmp has no thread list<br>2022-02-17 18:26:02: minidump_stackwalk.cc:93: ERROR: MinidumpProcessor::Process failed<br>这是怎么回事 一次执行可以 出结果  第二次就是空白了","like_count":0},{"had_liked":false,"id":334690,"user_name":"Geek_36419e","can_delete":false,"product_type":"c1","uid":2896934,"ip_address":"","ucode":"5F49FCD7CD5603","user_header":"","comment_is_top":false,"comment_ctime":1645079532,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645079532","product_id":100021101,"comment_content":"<br>荣耀手机 测试<br>&#47;Breakpad: Dump path: &#47;storage&#47;emulated&#47;0&#47;94e4a8e6-4882-4b5a-53dd7582-b2269238.dmp<br>A&#47;libc: Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0 in tid 25905 (yk.breakpaddemo), pid 25905 (yk.breakpaddemo)<br>可是文件夹下 啥也没有","like_count":0},{"had_liked":false,"id":333579,"user_name":"懒人进化中","can_delete":false,"product_type":"c1","uid":1329561,"ip_address":"","ucode":"BA43864F322107","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ibpASCYk5eF1lAEbJ3TSI0RlgejuwLE36oaqockPVjcHdnIax45F6Oqib9IqhbD3OAWoic9GW2r1TF2b3n3OHicIKA/132","comment_is_top":false,"comment_ctime":1644411450,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644411450","product_id":100021101,"comment_content":"作业完成，这里打卡记录一下步骤：<br>前提：工具AndroidStudio<br>1&gt;local.properties文件中配置路径信息<br>sdk.dir=sdk路径<br>ndk.dir=sdk路径&#47;21.1.6352462 <br>cmake.dir=sdk路径&#47;cmake&#47;3.10.2.4988404<br>注意：点击Project Structure 查看自己的sdk路径后在子级目录中找到自己的ndk与cmake版本号<br>运行一下应该可以跑起来，编译不通过的话请检查ndk与cmake版本<br><br>2&gt;运行sample, crash后 adb pull 拉取日志到本地取名crash_1.dmp<br><br>3&gt;minidump_stackwalk crash_1.dmp &gt; crashlog.txt<br> 如果失败，自己下载Breakpad编译生成minidump_stackwalk  再次执行<br><br>4&gt;aarch64-linux-android-addr2line -f -C -e &#47;Chapter01路径&#47;sample&#47;build&#47;intermediates&#47;cmake&#47;debug&#47;obj&#47;arm64-v8a&#47;libcrash-lib.so 0x650<br><br>5&gt;得到结果：..&#47;..&#47;..&#47;..&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>","like_count":0},{"had_liked":false,"id":326579,"user_name":"杰良","can_delete":false,"product_type":"c1","uid":2567349,"ip_address":"","ucode":"5DC1D1C58A4731","user_header":"https://static001.geekbang.org/account/avatar/00/27/2c/b5/10141329.jpg","comment_is_top":false,"comment_ctime":1639569375,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639569375","product_id":100021101,"comment_content":"1）Java 崩溃和 Native 崩溃，可以使用 BreakPad 之类的开源工具进行捕获分析，也可以直接使用第三方的平台服务。<br>2）程序的异常退出情况也应该统计汇总分析。","like_count":0},{"had_liked":false,"id":323541,"user_name":"Telemetry","can_delete":false,"product_type":"c1","uid":1248390,"ip_address":"","ucode":"9EC056227BA286","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/86/1ee189f4.jpg","comment_is_top":false,"comment_ctime":1637980835,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1637980835","product_id":100021101,"comment_content":"请问如果没有安卓手机，能用这个sample制造crash吗？","like_count":0},{"had_liked":false,"id":322603,"user_name":"roie","can_delete":false,"product_type":"c1","uid":1371983,"ip_address":"","ucode":"0CC9598364820A","user_header":"https://static001.geekbang.org/account/avatar/00/14/ef/4f/8b7e1f1e.jpg","comment_is_top":false,"comment_ctime":1637495769,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637495769","product_id":100021101,"comment_content":"老师，解析后的报错文件.txt怎么去解读这些内容？解读内容，需要具备哪些基础的技术知识？","like_count":0},{"had_liked":false,"id":319372,"user_name":"吴敬悦","can_delete":false,"product_type":"c1","uid":2388378,"ip_address":"","ucode":"3584EBFA5E6463","user_header":"","comment_is_top":false,"comment_ctime":1635763251,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635763251","product_id":100021101,"comment_content":"我用我的mac电脑 async 结果报了下面的错误，我以为是 NDK 的版本号，发现换了也没用，报下面的错误，我宿舍电脑就没什么问题<br><br>cvc-complex-type.2.4.a: 发现了以元素 &#39;base-extension&#39; 开头的无效内容。应以 &#39;{codename, tag}&#39; 之一开头。<br>org.gradle.api.ProjectConfigurationException: A problem occurred configuring project &#39;:breakpad-build&#39;.<br>Caused by: java.lang.NullPointerException<br>\tat com.google.common.base.Preconditions.checkNotNull(Preconditions.java:787)<br>at com.android.build.gradle.internal.ndk.NdkHandler.getPlatformVersion(NdkHandler.java:159)<br>\tat com.android.build.gradle.internal.ndk.NdkHandler.supports64Bits(NdkHandler.java:332)<br>\tat com.android.build.gradle.internal.ndk.NdkHandler.getSupportedAbis(NdkHandler.java:404)","like_count":0},{"had_liked":false,"id":314243,"user_name":"盗骊","can_delete":false,"product_type":"c1","uid":1807292,"ip_address":"","ucode":"FFE96880433C3F","user_header":"","comment_is_top":false,"comment_ctime":1632909677,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632909677","product_id":100021101,"comment_content":"window环境下的作业总结<br>https:&#47;&#47;www.yuque.com&#47;docs&#47;share&#47;8e5d9137-b3e8-49e3-ac37-4bc7cc9556a7?# 《使用 Breakpad 来捕获Native 崩溃》","like_count":0},{"had_liked":false,"id":314241,"user_name":"盗骊","can_delete":false,"product_type":"c1","uid":1807292,"ip_address":"","ucode":"FFE96880433C3F","user_header":"","comment_is_top":false,"comment_ctime":1632909451,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632909451","product_id":100021101,"comment_content":"window环境下的作业总结<br>https:&#47;&#47;www.yuque.com&#47;daoli-gojen&#47;xwu4lf&#47;lozyyu","like_count":0},{"had_liked":false,"id":301425,"user_name":"锁新新","can_delete":false,"product_type":"c1","uid":1857219,"ip_address":"","ucode":"6126DABD3ACCAA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL9icGA7eqLclCVwObjibCXEu5asjlroX80Uiaeia1ribdLjy7TMPXRCpSM87n1tXIh5TyK68ITs3ibbibibw/132","comment_is_top":false,"comment_ctime":1625672666,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625672666","product_id":100021101,"comment_content":"老师，安全模式下，同步阻塞热修复，同步阻塞怎么实现呢","like_count":0},{"had_liked":false,"id":290782,"user_name":"Geek_b362f0","can_delete":false,"product_type":"c1","uid":1609674,"ip_address":"","ucode":"44586EB2A998AA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erpOatVXGPRsqiaO8D6KBqFNtQ94vwqqicM09iaNTCfZ2r8Nxficf12I65C2SgvvyMv8ObQU5KZwKFxUw/132","comment_is_top":false,"comment_ctime":1619751951,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619751951","product_id":100021101,"comment_content":"编译报错，将build.gradle中的dependencies里面的classpath改为：&#39;com.android.tools.build:gradle:4.0.1&#39;后正常","like_count":0},{"had_liked":false,"id":282384,"user_name":"Shanks-王冲","can_delete":false,"product_type":"c1","uid":1042983,"ip_address":"","ucode":"C4B90A17850E20","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ea/27/a3737d61.jpg","comment_is_top":false,"comment_ctime":1615211053,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615211053","product_id":100021101,"comment_content":"MacOS 10.15.7<br><br>犯了2个错 ——<br>1. 想偷个懒，直接用老师的tools&#47;mac&#47;下的工具，结果直接报错`dyld: Symbol not found: __ZTTNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEE`；于是得直接github下载breakpad编译；<br>2. 根据breakpad的README介绍，第2步要`cd src`，然后第三步`.&#47;configure &amp;&amp; make`，死活找不到`configure`命令，后来发现它在`breakpad&#47;configure`，并不在`breakpad&#47;src&#47;configure`，于是才编译成功；<br>综上：就是下载breakpad.zip，解压，走一条命令 -&gt; `src&#47;processor&#47;minidump_stackwalk, src&#47;processor&#47;minidump_dump` 都有了；<br><br>注意：<br>1. github下载breakpad后，`cd breakpad`，然后直接`.&#47;configure &amp;&amp; make`即可生成我们所需的工具`minidump_stackwalk`；<br>2. #NDK_HOME = your_path&#47;Anroid&#47;sdk&#47;ndk-bundle","like_count":0},{"had_liked":false,"id":279542,"user_name":"venciallee","can_delete":false,"product_type":"c1","uid":1021723,"ip_address":"","ucode":"9616E2A86E6C43","user_header":"https://static001.geekbang.org/account/avatar/00/0f/97/1b/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1613814119,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613814119","product_id":100021101,"comment_content":"请问ANR的监控除了监听traces.txt或监控消息队列还有别的方式吗？<br>据了解微信的matrix使用监控消息队列 + 发5S的消息来确定是否有ANR, 当时有考虑使用捕获SIGNAL_QUIT的方案吗？当然这个也不一定准, 看了开源方案xCrash, 好像是没有对SIGNAL_QUIT信号进行逻辑过滤, 那么随便发个SIGNAL_QUIT就触发ANR了, 关于如何过滤有什么好建议吗？","like_count":0},{"had_liked":false,"id":274018,"user_name":"諸星团","can_delete":false,"product_type":"c1","uid":1615757,"ip_address":"","ucode":"535209E48C5E13","user_header":"https://static001.geekbang.org/account/avatar/00/18/a7/8d/2f597cb1.jpg","comment_is_top":false,"comment_ctime":1610789839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610789839","product_id":100021101,"comment_content":"有没有最后卡在<br> .\\aarch64-linux-android-addr2line.exe -f -C -e .\\libcrash-lib.so 0x650<br>这个过程的呢? 前面编译breakpad都熬过去了, cash.dmp文件也拿到了, 也解析成txt了<br>但就最后解析符号的时候卡在该条命令处没有任何反应","like_count":0},{"had_liked":false,"id":268808,"user_name":"落叶有义","can_delete":false,"product_type":"c1","uid":1388940,"ip_address":"","ucode":"12673608190E55","user_header":"","comment_is_top":false,"comment_ctime":1608358354,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608358354","product_id":100021101,"comment_content":"张老师好！<br>我想请问一下java层的崩溃问题。是不是在我们Application里使用CrashHandler全局捕获崩溃之后，java层的崩溃率就一定是0了？我们app目前千分之一的崩溃率全是native崩溃造成的？","like_count":0},{"had_liked":false,"id":266559,"user_name":"Yannis","can_delete":false,"product_type":"c1","uid":1256263,"ip_address":"","ucode":"FC62D676566EEE","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/47/0f998c46.jpg","comment_is_top":false,"comment_ctime":1607394867,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607394867","product_id":100021101,"comment_content":"交作业了：<br>1.编译安装apk,运行apk点击触发crash<br>2.通过adb pull  命令从真机拿出 ***.dmp日志，并使用AS自带的minidump_stackwalk 把日志转成文本形式crashLog.txt<br>3.分析日志找出崩溃代码偏移量，然后执行D:\\Sdk\\ndk\\21.3.6528147\\toolchains\\aarch64-linux-android-4.9\\prebuilt\\windows-x86_64\\bin\\aarch64-linux-android-addr2line.exe  -f -C -e   D:\\NativeCrash\\Chapter01-master\\sample\\build\\intermediates\\transforms\\mergeJniLibs\\debug\\0\\lib\\arm64-v8a\\libcrash-lib.so 0x650<br>成功找到崩溃点<br>Crash()<br>D:\\NativeCrash\\Chapter01-master\\sample\\.externalNativeBuild\\cmake\\debug\\arm64-v8a&#47;..&#47;..&#47;..&#47;..&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>","like_count":0},{"had_liked":false,"id":264171,"user_name":"一念天堂","can_delete":false,"product_type":"c1","uid":2338802,"ip_address":"","ucode":"3B29130BFF7706","user_header":"https://static001.geekbang.org/account/avatar/00/23/af/f2/a9edcd63.jpg","comment_is_top":false,"comment_ctime":1606372430,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606372430","product_id":100021101,"comment_content":"哎，要是能早两年听这节课就好了，我之前不知道有极客时间，我还是看到鸿神分享的我发看到的，哎","like_count":0},{"had_liked":false,"id":240136,"user_name":"Small bench","can_delete":false,"product_type":"c1","uid":2103418,"ip_address":"","ucode":"90B61FDEA16B76","user_header":"https://static001.geekbang.org/account/avatar/00/20/18/7a/a795001e.jpg","comment_is_top":false,"comment_ctime":1596769557,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1596769557","product_id":100021101,"comment_content":"Breakpad可以用作系统里面监控native crash吗？另外想请教下自己下载breakpad源码添加到android工程后出现main\\cpp\\libbreakpad\\src\\client\\linux\\handler&#47;exception_handler.cc:493: error: undefined reference to &#39;breakpad_getcontext&#39; ？大家有遇到吗？","like_count":0,"discussions":[{"author":{"id":1759644,"avatar":"","nickname":"Geek_05508b","note":"","ucode":"DB0F4FABB89005","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308476,"discussion_content":"我也遇到了 ，你怎么解决的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600959561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223674,"user_name":"Shelly","can_delete":false,"product_type":"c1","uid":1961134,"ip_address":"","ucode":"AB82CBB85C64C0","user_header":"https://static001.geekbang.org/account/avatar/00/1d/ec/ae/b4a4ddf4.jpg","comment_is_top":false,"comment_ctime":1591154409,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591154409","product_id":100021101,"comment_content":"接触了新模块，很有收获，以后碰到native的crash问题不至于抓瞎，赶紧记在小本本上。","like_count":0},{"had_liked":false,"id":195451,"user_name":"Amphiprioninae","can_delete":false,"product_type":"c1","uid":1126543,"ip_address":"","ucode":"905F90ADE343D1","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8f/bdb80c9a.jpg","comment_is_top":false,"comment_ctime":1585188955,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585188955","product_id":100021101,"comment_content":"解析的时候路径出现了异常，有没有人遇到呢<br>PS E:\\Android\\Sdk\\ndk-bundle\\toolchains\\aarch64-linux-android-4.9\\prebuilt\\windows-x86_64\\bin&gt; .\\aarch64-linux-android-addr2line.exe  -f -C -e E:\\Test\\libcrash-lib.so 0x7b2<br>Crash()<br>??:?","like_count":0,"discussions":[{"author":{"id":1125922,"avatar":"https://static001.geekbang.org/account/avatar/00/11/2e/22/cb5bce0b.jpg","nickname":"le bonheur","note":"","ucode":"7C3D1A9D099306","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341773,"discussion_content":"需要找到带符号表的.so库","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610520411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176670,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1581134139,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581134139","product_id":100021101,"comment_content":"文件的生成和导入还算比较顺<br>Operating system: Android<br>                  0.0.0 Linux 3.10.73-gcfdb7f6fd568 #1 SMP PREEMPT Fri Aug 10 23:51:28 UTC 2018 aarch64<br>CPU: arm64<br>     8 CPUs<br>工具版本这里一开始没有搞好，参考了别人的comments<br>ndk-bundle&#47;toolchains&#47;aarch64-linux-android-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;aarch64-linux-android-addr2line -f -C -e sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;arm64-v8a&#47;libcrash-lib.so 0x5a0<br>Crash()<br>sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10","like_count":0},{"had_liked":false,"id":165550,"user_name":"skun","can_delete":false,"product_type":"c1","uid":1262186,"ip_address":"","ucode":"3D446663B7582A","user_header":"https://static001.geekbang.org/account/avatar/00/13/42/6a/77635d87.jpg","comment_is_top":false,"comment_ctime":1577258447,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577258447","product_id":100021101,"comment_content":"都9102年末了，课程买了N久都没有动，最近打算学学，不知道能坚持多久。<br>关于第一课也是折腾了一两天，才能正常编译程序。<br>遇到的坑，公司电脑环境好像有问题，一直报一个错，实在解决不了，刚好之前有备用虚拟机win7拿来试试，结果好用了。遇到问题如下：<br>Error while executing process D:\\android-sdk-windows\\cmake\\3.6.4111459\\bin\\cmake.exe with arguments {-HD:\\Git\\study\\sample -BD:\\Git\\study\\sample\\.externalNativeBuild\\cmake\\debug\\arm64-v8a -DANDROID_ABI=arm64-v8a -DANDROID_PLATFORM=android-16 -DCMAKE_LIBRARY_OUTPUT_DIRECTORY=D:\\Git\\study\\sample\\build\\intermediates\\cmake\\debug\\obj\\arm64-v8a -DCMAKE_BUILD_TYPE=Debug -DANDROID_NDK=D:\\android-sdk-windows\\android-ndk-r19c-windows-x86_64\\android-ndk-r19c -DCMAKE_CXX_FLAGS=-std=c++11 -DCMAKE_TOOLCHAIN_FILE=D:\\android-sdk-windows\\android-ndk-r19c-windows-x86_64\\android-ndk-r19c\\build\\cmake\\android.toolchain.cmake -DCMAKE_MAKE_PROGRAM=D:\\android-sdk-windows\\cmake\\3.6.4111459\\bin\\ninja.exe -GAndroid Gradle - Ninja}\t<br>-- Check for working C compiler: D:&#47;android-sdk-windows&#47;android-ndk-r19c-windows-x86_64&#47;android-ndk-r19c&#47;toolchains&#47;llvm&#47;prebuilt&#47;windows-x86_64&#47;bin&#47;clang.exe\t<br>-- Check for working C compiler: D:&#47;android-sdk-windows&#47;android-ndk-r19c-windows-x86_64&#47;android-ndk-r19c&#47;toolchains&#47;llvm&#47;prebuilt&#47;windows-x86_64&#47;bin&#47;clang.exe -- works\t<br>这个实在找不到解决版本，后面猜想可能公司防护软件做了禁止进程启动。换了虚拟机后好使了。<br>Operating system: Android<br>                  0.0.0 Linux 4.9.112-perf-g526fc33 #1 SMP PREEMPT Wed Oct 23 22:20:45 CST 2019 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>Crash reason:  SIGSEGV<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x5e0<br>     x0 = 0x0000007e532e8460    x1 = 0x0000007fd11d21a4<br>     x2 = 0x0000007fd11d2240    x3 = 0x0000007e526aed8c<br>     x4 = 0x0000007fd11d2460    x5 = 0x0000007e4c5db200<br>     x6 = 0x0000007fd11d1ff0    x7 = 0x0000007e3a1e0e18<br>\t","like_count":0},{"had_liked":false,"id":163897,"user_name":"庆","can_delete":false,"product_type":"c1","uid":1070453,"ip_address":"","ucode":"9ACB2EC0F4CE08","user_header":"https://static001.geekbang.org/account/avatar/00/10/55/75/7045c225.jpg","comment_is_top":false,"comment_ctime":1576821587,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576821587","product_id":100021101,"comment_content":"花了接近四十分钟搞定。<br><br>1. git clone sample repo<br>2. 按照补充内容，点击crash button拿到dmp文件<br>3.按照谷歌文档下载depot tool<br>4.下载breakpad源码，configure and make<br>5.生成 &#47;Users&#47;zhongqing&#47;Documents&#47;GeekTimeAndroid&#47;Chapter01-doc&#47;depot_tools&#47;breakpad&#47;src&#47;src&#47;processor&#47;minidump_stackwalk<br>6.用minidump_stackwalk 解析dump，拿到<br>crash位置 <br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x515<br><br>7.因为是x86模拟器，用ndk里面的x86_64-linux-android-addr2line解析这个地址，得到：<br><br>Chapter01&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10","like_count":0},{"had_liked":false,"id":161903,"user_name":"Tenderness","can_delete":false,"product_type":"c1","uid":1124304,"ip_address":"","ucode":"840A6104972502","user_header":"https://static001.geekbang.org/account/avatar/00/11/27/d0/7e18e9a2.jpg","comment_is_top":false,"comment_ctime":1576397904,"is_pvip":false,"replies":[{"id":"61983","content":"赞","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1576673714,"ip_address":"","comment_id":161903,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576397904","product_id":100021101,"comment_content":"发现这个例子做的有点顺。。<br>步骤1 ： git clone <br>步骤2 :  AS打开(我的是AS 3.5.1),安装在真机上，运行，期间没有遇到问题,运行生成崩溃<br>步骤3 ：按照@答案 同学的做法，找到AS安装目录bin&#47;llldb&#47;bin&#47;minidump_stackwalk.exe<br>步骤4：minidump_stackwalk.exe fce0137d-5599-4d74-a4b4718f-25de0247.dmp &gt; crashLog.txt<br>Operating system: Android<br>                  0.0.0 Linux 4.9.112-perf+ #2 SMP PREEMPT Tue Nov 19 04:34:25 CST 2019 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x600<br>     x0 = 0x0000007bb60e8460    x1 = 0x0000007ff49545d4","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477902,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576673714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161093,"user_name":"薯条","can_delete":false,"product_type":"c1","uid":1334064,"ip_address":"","ucode":"08E591FC62563A","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/30/83104f0f.jpg","comment_is_top":false,"comment_ctime":1576117570,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576117570","product_id":100021101,"comment_content":"二刷教程：公司做机顶盒，有system权限，so报错，进入data&#47;tom开头的目录，查看日志文件，通过ndk下面的add2line 程序，将地址翻译成代码的行数，进而定位so报错的位置","like_count":0},{"had_liked":false,"id":158249,"user_name":"璞素星空","can_delete":false,"product_type":"c1","uid":1763010,"ip_address":"","ucode":"538EC52897EF85","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e6/c2/e6861b2a.jpg","comment_is_top":false,"comment_ctime":1575358050,"is_pvip":false,"replies":[{"id":"60872","content":"是什么原因呢？可以参考一下github的例子","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1575551988,"ip_address":"","comment_id":158249,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575358050","product_id":100021101,"comment_content":"挣扎了两天，还是没有成功编译导出crash文件。。。崩溃了","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476687,"discussion_content":"是什么原因呢？可以参考一下github的例子","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575551988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156260,"user_name":"Brain","can_delete":false,"product_type":"c1","uid":1405182,"ip_address":"","ucode":"3DE9077296745C","user_header":"https://static001.geekbang.org/account/avatar/00/15/70/fe/821ed718.jpg","comment_is_top":false,"comment_ctime":1574844526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574844526","product_id":100021101,"comment_content":"跟着sample也分析出来结果了，但是有个疑惑，这个breakpad用在项目中的时候该怎样配置呢，例子中是在cmake中配置cpp文件，真正的项目中该怎么用呢？","like_count":0},{"had_liked":false,"id":155262,"user_name":"Ray","can_delete":false,"product_type":"c1","uid":1752718,"ip_address":"","ucode":"EBB2C7155C413D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/be/8e/95884469.jpg","comment_is_top":false,"comment_ctime":1574672444,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574672444","product_id":100021101,"comment_content":"1、clone 文哥 代码并且配置ndk。<br>2、Android studio 打开项目开始编译，由于一些依赖库下载不下来，所以添加了阿里的国内镜像。<br>3、编译项目通过，成功的在手机上生成了native crash文件。<br>4、将文件copy到了电脑的桌面上，然后执行 .&#47;tools&#47;mac&#47;minidump_stackwalk &#47;Users&#47;fanlei&#47;Desktop&#47;crash-native-demo.dmp &gt;crashLog.txt （copy的时候我把文件名改了）<br>5、第一次发现crashLog.txt文件虽然生成了，但是里面没有内容。所以又把BreakPad clone到了本地进行了编译（进入到breakpad后直接执行.&#47;configure &amp;&amp; make命令）。<br>6、编译成功后，我又将生成minidump_stackwalk文件拷贝到了项目中，然后直接执行<br>&#47;Users&#47;fanlei&#47;Library&#47;Android&#47;sdk&#47;ndk-bundle&#47;toolchains&#47;aarch64-linux-android-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;aarch64-linux-android-addr2line -f -C -e libcrash-lib.so 0x650<br><br><br>成功查看到了错误代码位置<br>Crash()<br>&#47;Users&#47;fanlei&#47;Desktop&#47;Chapter01&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>","like_count":0},{"had_liked":false,"id":150524,"user_name":"VI jolie","can_delete":false,"product_type":"c1","uid":1742621,"ip_address":"","ucode":"1CBC214FFEB546","user_header":"https://static001.geekbang.org/account/avatar/00/1a/97/1d/4bac8dbf.jpg","comment_is_top":false,"comment_ctime":1573549220,"is_pvip":false,"replies":[{"id":"62077","content":"在网上查一下就知道哈","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1576682309,"ip_address":"","comment_id":150524,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573549220","product_id":100021101,"comment_content":"Breakpad windows能用么","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474191,"discussion_content":"在网上查一下就知道哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576682309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148044,"user_name":"Tony","can_delete":false,"product_type":"c1","uid":1432723,"ip_address":"","ucode":"E30A96891AE98F","user_header":"https://static001.geekbang.org/account/avatar/00/15/dc/93/3521ff2b.jpg","comment_is_top":false,"comment_ctime":1572932568,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572932568","product_id":100021101,"comment_content":"把sample项目导入编译了下，很顺畅不需要修改任何脚本配置，点击crash，可以在sdcard&#47;crashDmp文件夹下找到dmp文件，但是我是windows系统，的装虚拟机才能编译出windows平台的stackwalker,张老师讲的非常好，以前没怎么考虑过Native崩溃捕捉的问题，学到了不少知识点","like_count":0},{"had_liked":false,"id":144655,"user_name":"wenny","can_delete":false,"product_type":"c1","uid":1268872,"ip_address":"","ucode":"149F1BDF8376E8","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/88/88ca1d73.jpg","comment_is_top":false,"comment_ctime":1571990497,"is_pvip":false,"replies":[{"id":"62085","content":"赞","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1576683528,"ip_address":"","comment_id":144655,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571990497","product_id":100021101,"comment_content":"经历了差点一次次的放弃，终于成功跑通<br>1.下载 sample ，成功跑通，并生成 .dmp 文件<br>2.解析 .dmp 文件时 先下载 breakpad 中的 depot_tools  时，屡屡失败，下载不下来，最终在评论里看到了有小伙伴评论直接使用 studio 自带的 minidump_stackwalk ，由于开始命令输错，老是失败，差点放弃，最后一点点排查，最后成功输出 log 文件<br>Operating system: Android<br>                  0.0.0 Linux 3.18.31-perf-g532cc70 #1 SMP PREEMPT Thu Apr 5 21:20:51 CST 2018 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>Crash reason:  SIGSEGV<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x5e0<br>     x0 = 0x0000007fa4e8c240    x1 = 0x0000007fd9612814<br>     x2 = 0x0000000000000000    x3 = 0x0000007fa4e40a00<br>     x4 = 0x0000007fd9612c88    x5 = 0x0000007fa37b5db9<br>     x6 = 0x0000007fa3827090    x7 = 0x0000000000000000<br>     x8 = 0x0000000000000001    x9 = 0x0000000000000000<br>    x10 = 0x0000000000430000   x11 = 0x0000000000000000<br>    x12 = 0x0000000000000001   x13 = 0x00000000ffffffff<br>    x14 = 0x0000000000104450   x15 = 0x960e663fa1fdd9ad<br>    x16 = 0x0000007fa3621fe8   x17 = 0x0000007fa36115cc<br>    x18 = 0x00000000ffffffff   x19 = 0x0000007fa4e40a00<br>    x20 = 0x0000007fa48abc30   x21 = 0x0000007fa4e40a00<br>    x22 = 0x0000007fd9612abc   x23 = 0x0000007fa37b5db9<br>    x24 = 0x0000000000000004   x25 = 0x34da636a884ffff8<br>    x26 = 0x0000007fa4e40a98   x27 = 0x34da636a884ffff8<br>    x28 = 0x0000000000000001    fp = 0x0000007fd96127f0<br>     lr = 0x0000007fa3611604    sp = 0x0000007fd96127d0<br>     pc = 0x0000007fa36115e0<br>    Found by: given as instruction pointer in context<br> 1  libcrash-lib.so + 0x600<br>     fp = 0x0000007fd96128d8    lr = 0x0000007fa38658d4<br>     sp = 0x0000007fd9612800    pc = 0x0000007fa3611604<br>3.按照文档利用 addr2line 来反解符号时，直接照抄老师的命令行，屡屡失败，没有结合上面生成的 log 文件信息，最后一点点排查尝试，成功输出信息<br>.&#47;aarch64-linux-android-addr2line -f -C -e &#47;Users&#47;xiniu&#47;workspace&#47;Android&#47;greektime&#47;Chapter01-master&#47;sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;arm64-v8a&#47;libcrash-lib.so 0x5e0<br>Crash()<br>&#47;Users&#47;xiniu&#47;workspace&#47;Android&#47;greektime&#47;Chapter01-master&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>实施过程中差点多次放弃，希望自己坚持住，慢慢来。","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472057,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576683528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139906,"user_name":"Tracyliu","can_delete":false,"product_type":"c1","uid":1034513,"ip_address":"","ucode":"29F242C232B85B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c9/11/bb1a4368.jpg","comment_is_top":false,"comment_ctime":1570764357,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1570764357","product_id":100021101,"comment_content":"mac os 10.16<br>在省城crashlog.txt 的时候会报如下错误，但是不影响log的生成，只是很费解。通过评论顺利完成作业 但是如下错误依旧没有理解。<br><br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;vendor&#47;lib64&#47;egl&#47;libGLESv2_adreno.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libvixl-arm.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libart-compiler.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libopenjdk.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libjavacore.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libmediandk.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libmedia_jni.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libcamera2ndk.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libmtp.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libandroid.so could not be stored<br>2019-10-11 11:24:01: basic_code_modules.cc:70: ERROR: Module &#47;system&#47;lib64&#47;libart.so could not be stored<br><br>","like_count":0,"discussions":[{"author":{"id":1992461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/67/0d/ffa5cd9b.jpg","nickname":"oldjii","note":"","ucode":"70EC36B322C522","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269345,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589897156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137441,"user_name":"Geek_ZYH","can_delete":false,"product_type":"c1","uid":1666441,"ip_address":"","ucode":"D03D98BB125242","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/GHsPhPo6Asysxu8sZ8d8ric0PDicKaCot1eFxkLRsJAG0DyHABqsNYRpdfqUM5eMcOMVo0kVUY4HibpC9QuZYicFXQ/132","comment_is_top":false,"comment_ctime":1569741956,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569741956","product_id":100021101,"comment_content":"花了大半天的时间完成了练习，主要遇到两个问题，第一个是解析生成的dmp文件，通过其他的同学的方法将breakpad源码编译后成功解析成txt文件，第二个问题就是对解析后的txt文件进行crash定位查找，虽然在一些低级问题上浪费了点时间，不过最后还是完成了。","like_count":0},{"had_liked":false,"id":134889,"user_name":"潇涧","can_delete":false,"product_type":"c1","uid":1081538,"ip_address":"","ucode":"BB629037998096","user_header":"https://static001.geekbang.org/account/avatar/00/10/80/c2/83ee26a8.jpg","comment_is_top":false,"comment_ctime":1568947241,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568947241","product_id":100021101,"comment_content":"打卡完成，总结下<br>1.macOS 10.14 下使用sample中的 minidump_stackwalk 时会提示找不到 「__ZTTNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEE」<br><br>这个工具可以在AS安装目录下找到，例如 &#47;Applications&#47;Android\\ Studio.app&#47;Contents&#47;bin&#47;lldb&#47;bin&#47;minidump_stackwalk<br>或者去编译breakpad源码，在src&#47;processor中可以找到minidump_stackwalk<br><br>2.生成crash日志之后可以得到错误信息：CPU: arm64，0x5dc<br><br>如果是arm64的so使用 $NDKHOME&#47;toolchains&#47;aarch64-linux-android-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;aarch64-linux-android-addr2line<br><br>如果是arm的so使用 $NDKHOME&#47;toolchains&#47;arm-linux-androideabi-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;arm-linux-androideabi-addr2line<br><br>3.命令addr2line的参数so的位置是sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;armeabi-v7a&#47;libcrash-lib.so<br><br>输出结果：<br>$NDK_HOME&#47;toolchains&#47;aarch64-linux-android-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;aarch64-linux-android-addr2line -e sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;arm64-v8a&#47;libcrash-lib.so  0x5e0<br>&#47;path&#47;to&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>","like_count":0},{"had_liked":false,"id":134047,"user_name":"developerYk","can_delete":false,"product_type":"c1","uid":1329692,"ip_address":"","ucode":"C1DB93A44EE85C","user_header":"https://static001.geekbang.org/account/avatar/00/14/4a/1c/0d92f617.jpg","comment_is_top":false,"comment_ctime":1568728740,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1568728740","product_id":100021101,"comment_content":"老师，你好 请问下 为什么我的 xxx.dump  转出来的 xx.txt 文件大小为 0 啊？谢谢！","like_count":0,"discussions":[{"author":{"id":1329692,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4a/1c/0d92f617.jpg","nickname":"developerYk","note":"","ucode":"C1DB93A44EE85C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14888,"discussion_content":"已经解决了。是我编译有问题 我把编译及使用记录下来了，感兴趣的可以看看 https://juejin.im/post/5d811f82518825446d0d15e1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568787138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132368,"user_name":"小文","can_delete":false,"product_type":"c1","uid":1653362,"ip_address":"","ucode":"1497D0FEE8EDA6","user_header":"https://static001.geekbang.org/account/avatar/00/19/3a/72/7a312269.jpg","comment_is_top":false,"comment_ctime":1568100918,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568100918","product_id":100021101,"comment_content":"一开始跟着流程正常crash成功了，dmp文件也成功获取并拉到本地，在编译breakPad的时候卡住了，主要是看着 Breakpad在Github上面的说明，直接看不懂了（=-=），兜兜转转在专栏评论中看到一个评论@答案（开发环境Windows的）解决了问题，感谢老师和各位同学优质的分享 ","like_count":0},{"had_liked":false,"id":131951,"user_name":"薯条","can_delete":false,"product_type":"c1","uid":1334064,"ip_address":"","ucode":"08E591FC62563A","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/30/83104f0f.jpg","comment_is_top":false,"comment_ctime":1567991431,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567991431","product_id":100021101,"comment_content":"像大佬学习，决心按照教程，刻苦学习，动手实践","like_count":0},{"had_liked":false,"id":124017,"user_name":"Mr.J","can_delete":false,"product_type":"c1","uid":1267172,"ip_address":"","ucode":"372D8C614F6C3D","user_header":"https://static001.geekbang.org/account/avatar/00/13/55/e4/7061abd5.jpg","comment_is_top":false,"comment_ctime":1565791895,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565791895","product_id":100021101,"comment_content":"请问breakpad-build这个库在哪儿下载的，我再google的github上下载breakpad编译安装完了，没找到这个库呢","like_count":0},{"had_liked":false,"id":123732,"user_name":"大光","can_delete":false,"product_type":"c1","uid":1063278,"ip_address":"","ucode":"E0208CAE87C606","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/6e/1799b541.jpg","comment_is_top":false,"comment_ctime":1565748352,"is_pvip":false,"replies":[{"id":"62020","content":"其实对于这个数字的大小并不是非常纠结，核心还是追踪这个数字的变化。","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1576676845,"ip_address":"","comment_id":123732,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565748352","product_id":100021101,"comment_content":"张绍文 你好<br><br>通过排除法进行 ANR 或者异常率的计算应该会非常不准吧, “比如用户从系统的任务管理器中划掉” 当前 <br> Android 用户的使用习惯中这应该是非常寻常的操作. 这样统计到的结果应该是大部分用户都触发了异常退出, 异常率肯定不准确吧","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462791,"discussion_content":"其实对于这个数字的大小并不是非常纠结，核心还是追踪这个数字的变化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576676845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115076,"user_name":"黑色毛衣","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1563467846,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563467846","product_id":100021101,"comment_content":"我是直接用真机器调试的，没有遇到其他的那个奇葩问题， 不知道是不是幸运呢。。。<br>1、下载了源码工程，导入了 AS 提示要装 CMake，然后就装了；<br>2、直接编译安装成功，App 的界面如此简单，只有一个  button；<br>3、点击 button，crash 发生了，应用退出；<br>4、sdcard 的 crashDump 目录下有 .dmp 文件；<br>5、我是直接用 AS（Mac 环境）安装目录下的 minidump_stackwalk 对 .dump 进行处理：<br>6、结果：<br>Operating system: Android<br>                  0.0.0 Linux 3.18.70-g520f6eb #1 SMP PREEMPT Mon Nov 20 18:52:55 UTC 2017 aarch64<br>CPU: arm64<br>     4 CPUs<br><br>Crash reason:  SIGSEGV<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x650<br>     x0 = 0x00000077300cc1c0    x1 = 0x0000007ff2f23a14<br>     x2 = 0x0000007ff2f23aa0    x3 = 0x000000772fc57668<br>     x4 = 0x0000007ff2f23ca0    x5 = 0x00000077b2160a58<br>     x6 = 0x0000007ff2f23890    x7 = 0x00000077b1207a08<br>     x8 = 0x0000000000000000    x9 = 0x0000000000000001<br>    x10 = 0x0000000000430000   x11 = 0x000000772fff57a8<br>    x12 = 0x00000077b469ed70   x13 = 0xa998234505dbecb7<br>    x14 = 0x00000077b4675000   x15 = 0xffffffffffffffff<br>    x16 = 0x0000007719c6efe8   x17 = 0x0000007719c5e63c<br>    x18 = 0x0000000000000000   x19 = 0x00000077300bea00<br>    x20 = 0x0000000000000000   x21 = 0x00000077300bea00<br>    x22 = 0x0000007ff2f23cdc   x23 = 0x00000077b1210415<br>    x24 = 0x0000000000000004   x25 = 0x00000077b4d50a40<br>    x26 = 0x00000077300beaa0   x27 = 0x0000000000000001<br>    x28 = 0x0000007ff2f23a10    fp = 0x0000007ff2f239e0<br>     lr = 0x0000007719c5e674    sp = 0x0000007ff2f239c0<br>     pc = 0x0000007719c5e650<br>    Found by: given as instruction pointer in context<br> 1  libcrash-lib.so + 0x670<br>     fp = 0x0000007ff2f23a10    lr = 0x000000772ff17bf4<br>     sp = 0x0000007ff2f239f0    pc = 0x0000007719c5e674<br>    Found by: previous frame&#39;s frame pointer<br> 2  0x772ff17bf0<br>     fp = 0x13c80c3000000001    lr = 0x00000077b4d50a40<br>     sp = 0x0000007ff2f23a20    pc = 0x000000772ff17bf4<br>    Found by: previous frame&#39;s frame pointer<br>   .... .... ...","like_count":0},{"had_liked":false,"id":112079,"user_name":"airfly","can_delete":false,"product_type":"c1","uid":1170478,"ip_address":"","ucode":"79E4C4E08A846C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLI6icTKbDkttGvNaMrMKdu5PsZwiagtdjn6NTWAlJPHj4cJrUTW4GuicZKFZnX8eJ2Iz319aHLymLibQ/132","comment_is_top":false,"comment_ctime":1562664981,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562664981","product_id":100021101,"comment_content":"求解信号的 发送和注册有什么区别","like_count":0},{"had_liked":false,"id":105409,"user_name":"大白菜","can_delete":false,"product_type":"c1","uid":1296962,"ip_address":"","ucode":"923B403EA84F40","user_header":"https://static001.geekbang.org/account/avatar/00/13/ca/42/6e0026ad.jpg","comment_is_top":false,"comment_ctime":1560994427,"is_pvip":false,"replies":[{"id":"62041","content":"native crash他们都是直接复写，没有源码的情况下，很难同时共存几套","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1576678689,"ip_address":"","comment_id":105409,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560994427","product_id":100021101,"comment_content":"咨询一个问题哈，我使用注册breakpad后，发现和腾讯bugly 或者说三方sdk有冲突。我处理完错误，没有把错误抛给系统，导致其他sdk,无法捕捉native crash ，感觉和Java crash类似，但是不太了解怎么继续把错误抛给其他sdk","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454671,"discussion_content":"native crash他们都是直接复写，没有源码的情况下，很难同时共存几套","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576678689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104830,"user_name":"风炫灬梦想","can_delete":false,"product_type":"c1","uid":1338249,"ip_address":"","ucode":"3A4735E9F04679","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/lQAcCTVoe0L9qKjwibB4U6ib5jyRl31n9ErOuOF1MgHghC1cibtLSqyug4ibMGowMD9HCHAZzfwic3FNZU1wtTcUwWA/132","comment_is_top":false,"comment_ctime":1560849395,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560849395","product_id":100021101,"comment_content":"生成的crashLog.txt文件怎么去分析呢？","like_count":0},{"had_liked":false,"id":101594,"user_name":"小熊猫","can_delete":false,"product_type":"c1","uid":1257442,"ip_address":"","ucode":"7549BA17FFBAD4","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/e2/3640e491.jpg","comment_is_top":false,"comment_ctime":1559877591,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1559877591","product_id":100021101,"comment_content":"我的博客里有非常详细的Windows下完成的课后作业，大家可以看看<br>https:&#47;&#47;pandashy.com&#47;windows-xia-shi-xian-android-kai-fa-gao-shou-ke-beng-kui-you-hua-shang-ke-hou-zuo-ye.html","like_count":0,"discussions":[{"author":{"id":1666988,"avatar":"https://static001.geekbang.org/account/avatar/00/19/6f/ac/7d3ca7a4.jpg","nickname":"kiss","note":"","ucode":"FB82014C34FC61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40376,"discussion_content":"非常感谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572178971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99104,"user_name":"咕咕咕","can_delete":false,"product_type":"c1","uid":1388479,"ip_address":"","ucode":"5D35932F7118EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/2f/bf/85b957fc.jpg","comment_is_top":false,"comment_ctime":1559142985,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559142985","product_id":100021101,"comment_content":"遇到几个问题，经过下面同学的回答，以及google成功完成了sample，下面说说我遇到的问题，给之后的同学一些参考（mac系统）：<br>1：一来就出现问题提示缺少mipsel-linux-android-4.9可以使用 ln -sf命令将其链接到aarch64-linux-android-4.9就行。然后编译之后又提示缺少mips64el-linux-android-4.9同理<br>2：运行sample里的minidump_stackwalk报错，这个是根据下面答案同学的回答解决的 as目录bin\\lldb\\bin里面自带有，使用就行。<br>最后我是用find命令在项目目录下找的对应的*.<br>so的然后再用aarch64-linux-android-addr2line，最后解析成功。","like_count":0},{"had_liked":false,"id":97477,"user_name":"bywuu","can_delete":false,"product_type":"c1","uid":1078675,"ip_address":"","ucode":"2EDDB7E70CABB9","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/93/8135f895.jpg","comment_is_top":false,"comment_ctime":1558679958,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558679958","product_id":100021101,"comment_content":"我做了快10年的移动开发，从J2ME开始就在做，今天学这个课，正赶上AS更新，我又重新配置IDE，我用的是WIN10，然后照着评论一点一点做，发现这第一课门槛就不低。首先，翻墙倒是难不倒我，而且我发现也不用编译breakpad，这还要感谢评论里面的同学。其次，模拟器出不来结果。。。最后，还是用真机出来的结果，然后，怎么导出来又比较费劲，因为我的手机不给权限，不能直接拖出来，不，实际上根本就看不到下层目录，没办法，手动把dump文件发送到邮箱里，再通过163邮箱导到电脑中，然后运行Android SDK目录下面的工具，出来一堆错。。。再次感谢评论同学，这些错误不影响最终生成crash文件（😰），然后，再用NDK目录下的addr2line程序解析so文件（参数C居然区分大小写。。。），总之，终于是出了结果，全是坑。<br>最后吐槽一下libcrash-lib这个文件的位置。。。居然是那么莫名其妙的一个位置，我都是新建一个libs文件夹，在最显眼的位置，看了这个breakpads的文件目录，我很头疼。","like_count":0},{"had_liked":false,"id":95181,"user_name":"你好，未来","can_delete":false,"product_type":"c1","uid":1126804,"ip_address":"","ucode":"272E363B96587E","user_header":"https://static001.geekbang.org/account/avatar/00/11/31/94/522e0cff.jpg","comment_is_top":false,"comment_ctime":1557979105,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557979105","product_id":100021101,"comment_content":"可以的，第一章就干货满满，学习了。","like_count":0},{"had_liked":false,"id":92388,"user_name":"jacky","can_delete":false,"product_type":"c1","uid":1183026,"ip_address":"","ucode":"5BF759FA201761","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/32/3ab2277e.jpg","comment_is_top":false,"comment_ctime":1557244434,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1557244434","product_id":100021101,"comment_content":"我按照课程实践，遇到如下问题最后的结果如下：<br>-&gt; % aarch64-linux-android-addr2line -f -C -e &#47;Users&#47;yangjianfei&#47;myWidget&#47;android&#47;geek&#47;Chapter01&#47;breakpad-build&#47;build&#47;intermediates&#47;transforms&#47;stripDebugSymbol&#47;debug&#47;0&#47;lib&#47;arm64-v8a&#47;libbreakpad-core.so 0x5f0<br>??<br>??:0<br>并没有得到想要的 crash信息<br>请问这个是什么原因呢？","like_count":0,"discussions":[{"author":{"id":2896934,"avatar":"","nickname":"Geek_36419e","note":"","ucode":"5F49FCD7CD5603","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551815,"discussion_content":"我刚开始也是这个错 ，原因是so文件选的不是我手机cpu架构对应的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645147322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90134,"user_name":"一点一点～","can_delete":false,"product_type":"c1","uid":1509680,"ip_address":"","ucode":"2C0CCF0DA98CA0","user_header":"https://static001.geekbang.org/account/avatar/00/17/09/30/d0a998f4.jpg","comment_is_top":false,"comment_ctime":1556423386,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556423386","product_id":100021101,"comment_content":"你好,我调试是用的arm cpu的环境.<br>切换到ndk aarch64-linux-android 目录下 提示找不到aarch64-linux-android 这个命令,不知道怎么回事,使用arm-linux-androideabi-addr2line -f -C -e libcrash-lib.so 0x600却能找到命令，但是提示arm-linux-androideabi-addr2line: libcrash-lib.so: File format not recognized<br><br>","like_count":0},{"had_liked":false,"id":87717,"user_name":"小苏","can_delete":false,"product_type":"c1","uid":1502122,"ip_address":"","ucode":"F28C22A1AFCE6A","user_header":"https://static001.geekbang.org/account/avatar/00/16/eb/aa/357d0442.jpg","comment_is_top":false,"comment_ctime":1555668804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555668804","product_id":100021101,"comment_content":"前后花了30分钟左右吧(ubuntu 64位 16.04)。遇到的问题都是评论的同学遇到的。<br>1.不生成dump文件问题<br>解决方案:sample中的build.gradle中修改为:<br>ndk{<br>   abiFilters &quot;armeabi-v7a&quot;<br>}<br>2.缺少src&#47;third_party&#47;lss&#47;linux_syscall_support.h文件<br>解决办法:从android工程里copy一份就行了<br>再次感谢评论的同学","like_count":0},{"had_liked":false,"id":87647,"user_name":"YI🎐","can_delete":false,"product_type":"c1","uid":1004429,"ip_address":"","ucode":"EC473E92A07373","user_header":"https://static001.geekbang.org/account/avatar/00/0f/53/8d/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1555648715,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555648715","product_id":100021101,"comment_content":"使用SDK自带的minidump_stackwalk就可以在将dmp转成txt了","like_count":0},{"had_liked":false,"id":83038,"user_name":"百岁无忧","can_delete":false,"product_type":"c1","uid":1453823,"ip_address":"","ucode":"5283111F21CE40","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/ff/9467da86.jpg","comment_is_top":false,"comment_ctime":1554379834,"is_pvip":false,"replies":[{"id":"30904","content":"建议是装个Ubuntu虚拟机来进行操作","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1555301433,"ip_address":"","comment_id":83038,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554379834","product_id":100021101,"comment_content":"windows下怎么把dmp转成txt啊,老师","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445830,"discussion_content":"建议是装个Ubuntu虚拟机来进行操作","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555301433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81749,"user_name":"eyeandroid","can_delete":false,"product_type":"c1","uid":1136395,"ip_address":"","ucode":"F6BC4961628A87","user_header":"https://static001.geekbang.org/account/avatar/00/11/57/0b/8b2465d6.jpg","comment_is_top":false,"comment_ctime":1554025692,"is_pvip":false,"replies":[{"id":"31104","content":"一. 获取logcat<br>logcat日志流程是这样的，应用层 --&gt; liblog.so --&gt; logd，底层使用ring buffer来存储数据。<br>获取的方式有以下三种：<br>   1. 通过logcat命令获取。<br>   优点：非常简单，兼容性好。<br>   缺点：整个链路比较长，可控性差，失败率高，特别是堆破坏或者堆内存不足时，基本会失败。<br>   2. hook liblog.so实现。通过hook liblog.so 中__android_log_buf_write 方法，将内容重定向到自己的buffer中。<br>   优点：简单，兼容性相对还好。<br>   缺点：要一直打开。<br>   3. 自定义获取代码。通过移植底层获取logcat的实现，通过socket直接跟logd交互。<br>   优点：比较灵活，预先分配好资源，成功率也比较高。<br>   缺点：实现非常复杂","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555397133,"ip_address":"","comment_id":81749,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554025692","product_id":100021101,"comment_content":"请教下老师，HC有办法让App收集系统日志吗？有时候需要系统日志协助分析崩溃原因","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445327,"discussion_content":"一. 获取logcat\nlogcat日志流程是这样的，应用层 --&amp;gt; liblog.so --&amp;gt; logd，底层使用ring buffer来存储数据。\n获取的方式有以下三种：\n   1. 通过logcat命令获取。\n   优点：非常简单，兼容性好。\n   缺点：整个链路比较长，可控性差，失败率高，特别是堆破坏或者堆内存不足时，基本会失败。\n   2. hook liblog.so实现。通过hook liblog.so 中__android_log_buf_write 方法，将内容重定向到自己的buffer中。\n   优点：简单，兼容性相对还好。\n   缺点：要一直打开。\n   3. 自定义获取代码。通过移植底层获取logcat的实现，通过socket直接跟logd交互。\n   优点：比较灵活，预先分配好资源，成功率也比较高。\n   缺点：实现非常复杂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555397133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80556,"user_name":"C","can_delete":false,"product_type":"c1","uid":1340719,"ip_address":"","ucode":"B744B3D83E05A6","user_header":"https://static001.geekbang.org/account/avatar/00/14/75/2f/fc65a0e1.jpg","comment_is_top":false,"comment_ctime":1553681254,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553681254","product_id":100021101,"comment_content":"当时第一次看看不懂，现在回头看，耐心试了试，查看了留言里大家的结果，最后自己也找出来了bug，贴一下最终的结果是  <br>Crash()<br>F:\\Chapter01\\sample\\src\\main\\cpp&#47;crash.cpp:10 <br><br>找到项目里的c文件定位出了这一块<br>void Crash() {<br>    volatile int *a = (int *) (NULL);<br>    *a = 1;<br>}<br><br>感谢这位同学的博文https:&#47;&#47;www.jianshu.com&#47;p&#47;0bfe7800bdef   ","like_count":0},{"had_liked":false,"id":76413,"user_name":"窝头儿","can_delete":false,"product_type":"c1","uid":1124907,"ip_address":"","ucode":"21825CEABD6D14","user_header":"https://static001.geekbang.org/account/avatar/00/11/2a/2b/23795cf3.jpg","comment_is_top":false,"comment_ctime":1552607719,"is_pvip":false,"replies":[{"id":"28191","content":"就是每次启动都把flag置1，后面启动成功就把flag置0。如果下次启动发现flag是1，那就是启动异常","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1552916915,"ip_address":"","comment_id":76413,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552607719","product_id":100021101,"comment_content":"不太懂标记具体怎么操作，可以具体一点吗","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443295,"discussion_content":"就是每次启动都把flag置1，后面启动成功就把flag置0。如果下次启动发现flag是1，那就是启动异常","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552916915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75875,"user_name":"CathyChen","can_delete":false,"product_type":"c1","uid":1329694,"ip_address":"","ucode":"DCCCA97188B494","user_header":"https://static001.geekbang.org/account/avatar/00/14/4a/1e/2cbc8d78.jpg","comment_is_top":false,"comment_ctime":1552486607,"is_pvip":false,"replies":[{"id":"28193","content":"加油","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1552916987,"ip_address":"","comment_id":75875,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552486607","product_id":100021101,"comment_content":"反复这么多次阅读，在张老师、孙学委的文档和评论区同学的帮助下，终于完成了这门课的作业，\\(≧▽≦)&#47;激动 fighting ... ... ","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443071,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552916987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73882,"user_name":"Shanks-王冲","can_delete":false,"product_type":"c1","uid":1042983,"ip_address":"","ucode":"C4B90A17850E20","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ea/27/a3737d61.jpg","comment_is_top":false,"comment_ctime":1552023974,"is_pvip":false,"replies":[{"id":"31105","content":"对的","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1555397192,"ip_address":"","comment_id":73882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552023974","product_id":100021101,"comment_content":"```bash<br>$ cd ~&#47;AndroidStudioProjects&#47;AndriodAdvanceWithGeektime&#47;Chapter01&#47; &amp;&amp; .&#47;aarch64-linux-android-addr2line -f -C -e ~&#47;AndroidStudioProjects&#47;AndriodAdvanceWithGeektime&#47;Chapter01&#47;sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;arm64-v8a&#47;libcrash-lib.so 0x600<br>## output:<br>Crash()<br>&#47;home&#47;chong&#47;AndroidStudioProjects&#47;AndriodAdvanceWithGeektime&#47;Chapter01&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>```<br>得到上面这个东东, 对吗?","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442321,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555397192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73720,"user_name":"tobenull","can_delete":false,"product_type":"c1","uid":1449537,"ip_address":"","ucode":"472AB9FFC57D7B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIfBdXj1VRkSujQxvEeoeTNFthEXagJDACica7ubabSTmLqCbC3vaLlOmhG8OTY2FjhZia7MPwuQ1uA/132","comment_is_top":false,"comment_ctime":1551964081,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1551964081","product_id":100021101,"comment_content":"1. 下载Chapter01 demo，运行复现crash；<br>2. 下载breakpad按照README.md编译得到minidump_stackwalk（不过我编译的这个文件在.&#47;src&#47;processor目录下，没找到.&#47;tools&#47;mac&#47;，使用find命令搜索到的）；<br>3. 从手机导出 *.dmp 文件；<br>4. 使用minidump_stackwalk将*.dmp转换为txt文件（.&#47;minidump_stackwalk de215cfb-b66f-4771-3590069f-333b71e0.dmp &gt; 1.txt）；<br>5. 查看txt文件，找到崩溃地址 0x5be（0  libcrash-lib.so + 0x5be）；<br>6. 使用ndk工具还原崩溃方法（{$HOME}&#47;ndk&#47;toolchains&#47;arm-linux-androideabi-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;arm-linux-androideabi-addr2line -f -C -e libcrash-lib.so 0x5be）<br>7. 还原结果：Crash()<br><br>以上记录一下操作步骤，供同学、自己以后参考","like_count":0},{"had_liked":false,"id":70761,"user_name":"Neil","can_delete":false,"product_type":"c1","uid":1206345,"ip_address":"","ucode":"909A2103DFEE1B","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/49/418a9486.jpg","comment_is_top":false,"comment_ctime":1551176804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551176804","product_id":100021101,"comment_content":"终于做完了，<br>1.遇到的问题有：在网易mumu模拟器上dump文件一直不出来，用真机可以<br>2.minidump一定要自己编译","like_count":0},{"had_liked":false,"id":70712,"user_name":"Neil","can_delete":false,"product_type":"c1","uid":1206345,"ip_address":"","ucode":"909A2103DFEE1B","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/49/418a9486.jpg","comment_is_top":false,"comment_ctime":1551168538,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551168538","product_id":100021101,"comment_content":"ERROR: Could not find method cppFlags() for arguments [-std=c++11] on object of type com.android.build.gradle.internal.dsl.CmakeOptions.<br><br><br>","like_count":0},{"had_liked":false,"id":70711,"user_name":"Neil","can_delete":false,"product_type":"c1","uid":1206345,"ip_address":"","ucode":"909A2103DFEE1B","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/49/418a9486.jpg","comment_is_top":false,"comment_ctime":1551168384,"is_pvip":false,"replies":[{"id":"31070","content":"推荐看看后面课程的Sample解析","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555395499,"ip_address":"","comment_id":70711,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551168384","product_id":100021101,"comment_content":"模拟器上生成了crashDump，还是没有找到下面的文件","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440788,"discussion_content":"推荐看看后面课程的Sample解析","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555395499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70125,"user_name":"yongxiang","can_delete":false,"product_type":"c1","uid":1082351,"ip_address":"","ucode":"16D826814D4C4B","user_header":"https://static001.geekbang.org/account/avatar/00/10/83/ef/445e1421.jpg","comment_is_top":false,"comment_ctime":1551004545,"is_pvip":false,"discussion_count":0,"race_medal":3,"score":"1551004545","product_id":100021101,"comment_content":"一、按照github上步骤说明，完成任务：<br>1、在模拟器上生成 dmp 文件<br>2、使用minidump_stackwalk 生成堆栈信息<br>3、使用addr2line定位出错的代码行号。<br><br>二、关于minidump_stackwalk：<br>1、参照下面其他同学的评论，在Android Studio 安装sdk的地方找到了此文件（mac环境）~&#47;Library&#47;Android&#47;sdk&#47;lldb&#47;3.1&#47;bin&#47;minidump_stackwalk，可以使用。<br>2、自行编译，mac环境遇到报错；<br>dyld: Library not loaded: &#47;usr&#47;local&#47;opt&#47;readline&#47;lib&#47;libreadline.7.dylib<br>  Referenced from: &#47;usr&#47;local&#47;bin&#47;gawk<br>  Reason: image not found<br>.&#47;config.status: line 989: 92821 Done(141)               eval sed \\&quot;\\$ac_sed_extra\\&quot; &quot;$ac_file_inputs&quot;<br>     92822 Abort trap: 6           | $AWK -f &quot;$ac_tmp&#47;subs.awk&quot; &gt; $ac_tmp&#47;out<br><br>根据提示是gawk 依赖的 readline 损坏，重新安装就可以：<br><br>brew uninstall gawk<br>brew uninstall readline<br>brew install readline<br>brew install gawk<br>","like_count":0},{"had_liked":false,"id":69444,"user_name":"草裡菌","can_delete":false,"product_type":"c1","uid":1241514,"ip_address":"","ucode":"E11C630ABA4370","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/aa/c29def94.jpg","comment_is_top":false,"comment_ctime":1550747647,"is_pvip":false,"replies":[{"id":"31064","content":"知难而进，方能进步","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555395294,"ip_address":"","comment_id":69444,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550747647","product_id":100021101,"comment_content":"Windows环境。<br>成功拿到了crash的dmp文件。<br>尝试了一下午，还是跪在了make上。<br>好难啊。","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440125,"discussion_content":"知难而进，方能进步","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555395294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69133,"user_name":"克里斯","can_delete":false,"product_type":"c1","uid":1181844,"ip_address":"","ucode":"00B755C10AC1C3","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/94/2c22bd4e.jpg","comment_is_top":false,"comment_ctime":1550667981,"is_pvip":true,"replies":[{"id":"24556","content":"maps文件","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1550677972,"ip_address":"","comment_id":69133,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550667981","product_id":100021101,"comment_content":"pc值是程序加载到内存中的绝对地址，绝对地址不能直接使用，因为每次程序运行创建的内存肯定都不是固定区域的内存，所以绝对地址肯定每次运行都不一致。我们需要拿到崩溃代码相对于当前库的相对偏移地址，这样才能使用 addr2line 分析出是哪一行代码。通过dladdr()可以获得共享库加载到内存的起始地址，和pc值相减就可以获得相对偏移地址，并且可以获得共享库的名字<br>libc.so\t0xead1bd64 +0x49d64<br>r0 = 0x00000000 r1 = 0x0000119c r2 = 0x00000006 r3 = 0x00000008 r4 = 0xc5343978 r5 = 0x00000006 r6 = 0xc5343920 r7 = 0x0000010c r8 = 0xc5343204 r9 = 0xeac71e78 r10 = 0x00000800 r12 = 0x00000000 fp = 0xce3fa458 sp = 0xc5343198 lr = 0xead19507 pc = 0xead1bd64<br>Found by:given as instruction pointer in context<br><br>addr2line -e libc.so 相对地址<br>这里的相对地址如何获取呢？大神<br>￼<br>","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439965,"discussion_content":"maps文件","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550677972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68660,"user_name":"怪咖先森","can_delete":false,"product_type":"c1","uid":1330596,"ip_address":"","ucode":"40ED77D81424B5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLvdd6F97h9pXjna8WQUdpCFgQecao9K9eCDHB6shaO16zbu5mddLK7YWQTiaurf9DFGZplpoB6syg/132","comment_is_top":false,"comment_ctime":1550569607,"is_pvip":false,"replies":[{"id":"31061","content":"可以看看后面的Sample解析","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555395142,"ip_address":"","comment_id":68660,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550569607","product_id":100021101,"comment_content":"解析的 crashLog.txt 时候遇到错误:<br><br>`york@ubuntu:~&#47;AndroidStudioProjects&#47;Chapter01&#47;tools&#47;mac$ aarch64-linux-android-addr2line -f -C -e &#47;home&#47;york&#47;AndroidStudioProjects&#47;Chapter01&#47;sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;armeabi-v7a&#47;libcrash-lib.so 0x600<br>??<br>??:0` <br><br>Google 没有找到相关的信息，大佬们能指导一下吗？<br><br>","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439787,"discussion_content":"可以看看后面的Sample解析","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555395142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67336,"user_name":"Andrew","can_delete":false,"product_type":"c1","uid":1331322,"ip_address":"","ucode":"BA3BAB0E9F34F3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLRpzegJobDydk3U8RkdPyskTurhTFOkLP0Ib3jqXp9iaYPbIH826NQqwQJmEX5bXlCUzAp1zMSx1A/132","comment_is_top":false,"comment_ctime":1550131879,"is_pvip":false,"replies":[{"id":"30696","content":"赞","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555137619,"ip_address":"","comment_id":67336,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550131879","product_id":100021101,"comment_content":"linux环境下minidump_stackwalk编译需要git clone工程，而不是直接下载zip解压，不然会编译失败。缺失linux_syscall_support.h头文件，可以直接git clone https:&#47;&#47;chromium.googlesource.com&#47;linux-syscall-support 然后在src&#47;third_party&#47;lss&#47;中添加即可<br><br>教程写得很赞，最后完成作业。<br><br>&#39;&#47;home&#47;xx&#47;Android&#47;Sdk&#47;ndk-bundle&#47;toolchains&#47;arm-linux-androideabi-4.9&#47;prebuilt&#47;linux-x86_64&#47;bin&#47;arm-linux-androideabi-addr2line&#39; -f -C -e &#39;&#47;media&#47;xx&#47;work&#47;project&#47;android study class&#47;Chapter01-master&#47;sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;armeabi-v7a&#47;libcrash-lib.so&#39; 0xed4<br>Crash()<br>&#47;media&#47;xx&#47;work&#47;project&#47;android study class&#47;Chapter01-master&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10<br>","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439147,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555137619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66717,"user_name":"海边的曼彻斯特","can_delete":false,"product_type":"c1","uid":1357934,"ip_address":"","ucode":"3CA98B79774F8D","user_header":"https://static001.geekbang.org/account/avatar/00/14/b8/6e/a17dd290.jpg","comment_is_top":false,"comment_ctime":1549986083,"is_pvip":false,"replies":[{"id":"23637","content":"一个flag又不是一个bit，当然可以区分很多种类型。按位来与","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1550029684,"ip_address":"","comment_id":66717,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1549986083","product_id":100021101,"comment_content":"一个flag如何区分三种异常退出类型？有点没明白。","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438877,"discussion_content":"一个flag又不是一个bit，当然可以区分很多种类型。按位来与","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550029684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65930,"user_name":"红色物质长方体固体转移","can_delete":false,"product_type":"c1","uid":1397664,"ip_address":"","ucode":"296EB9021F3140","user_header":"https://static001.geekbang.org/account/avatar/00/15/53/a0/8c26f345.jpg","comment_is_top":false,"comment_ctime":1549782182,"is_pvip":false,"replies":[{"id":"30694","content":"👍，实践出真知","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1555137582,"ip_address":"","comment_id":65930,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1549782182","product_id":100021101,"comment_content":"经过比较痛苦的经历 还是成功了  留下步骤<br> mac os 10.14 <br> 通过as 3.2 非常顺利的运行了apk 使用虚拟级是android N 版本 <br>遇到问题 无法找到生成文件dmp  加入 在breakpad-build 的  build 文件中的的android-&gt;defaultConfigde-&gt;externalNativeBuild中加入demo 的补充说明部分。就行了 在打开as的Device File Export 中我没有在storage 和sdcard 中找到文件 最后是在self 中找到的primary 中找到的carshDump中找到的。有电脑升级了最新的系统 所以 tool 的 工具不在适合我了 这个点其实很简单 其实也不需要你去翻墙如果是Mac电脑 直接在demo 的那个breakpad 的github 直接下载下来 直接可以.&#47;config  完成之后 在直接make 就行了速度非常快 最后直接 把 breakpad -&gt;src-&gt;processor-&gt;minidump_stackwalk  这个文件拷贝到你的demo 工程中替换就行了 最后直接在在终端执行 .&#47;minidump_stackwalk cash.dmp &gt;Log.txt   会吧数据输出到你log.txt 中了<br>下面是内容：<br><br>Operating system: Android<br>                  0.0.0 Linux 4.4.124+ #1 SMP PREEMPT Sun Nov 4 14:31:25 UTC 2018 i686<br>CPU: x86<br>     GenuineIntel family 6 model 94 stepping 3<br>     4 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x515<br>    eip = 0xd02f5515   esp = 0xfffc88e8   ebp = 0xfffc88f8   ebx = 0xd02f6fe4<br>    esi = 0xd0774663   edi = 0xfffc8afc   eax = 0x00000000   ecx = 0x3569f152<br>    edx = 0xfffc8910   efl = 0x00210296<br>    Found by: given as instruction pointer in context<br> 1  libcrash-lib.so + 0x535<br>    eip = 0xd02f5535   esp = 0xfffc8900   ebp = 0xfffc8908<br>    Found by: previous frame&#39;s frame pointer<br> 2  libart.so + 0x5f6b98<br>    eip = 0xe8004b98   esp = 0xfffc8910   ebp = 0xfffc8930<br>    Found by: previous frame&#39;s frame pointer<br><br>","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438645,"discussion_content":"👍，实践出真知","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555137582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64835,"user_name":"zhaofangming","can_delete":false,"product_type":"c1","uid":1397043,"ip_address":"","ucode":"B36365A07C1FEF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/GbUBW2HD4zMsbPypdwEtALibyBiccibmptjsuviaZLCORlZ26Eqpz3BKpeic3GLxdnPEAkPkEOWdJF8ZgccMUiaqdicJQ/132","comment_is_top":false,"comment_ctime":1548921866,"is_pvip":false,"replies":[{"id":"23120","content":"需要补充背后的知识，我们可以先把前两章放一放，后面再回头来看","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1549103191,"ip_address":"","comment_id":64835,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548921866","product_id":100021101,"comment_content":"看完了，把demo跑起来了，但是感觉还是一知半解。经常出现看了别人讲的技术，在实践中还是无法提高。","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438199,"discussion_content":"需要补充背后的知识，我们可以先把前两章放一放，后面再回头来看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549103191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63207,"user_name":"Swing","can_delete":false,"product_type":"c1","uid":1330065,"ip_address":"","ucode":"55FCA9ECEFBBEB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","comment_is_top":false,"comment_ctime":1548299279,"is_pvip":false,"replies":[{"id":"23105","content":"一步一步慢慢来吧","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1549102277,"ip_address":"","comment_id":63207,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548299279","product_id":100021101,"comment_content":"心塞……没有c c++基础，看不懂上面的，去年为了anr看了很多，但是到了framework就有一些搞不清楚了，下面的c++更玩不转了…<br>从零开始，c++ 学到能支撑android开发需要多少知识，多少时间呢……","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437502,"discussion_content":"一步一步慢慢来吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549102277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60880,"user_name":"书虫","can_delete":false,"product_type":"c1","uid":1083490,"ip_address":"","ucode":"28341D162D10D2","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/62/34fd1293.jpg","comment_is_top":false,"comment_ctime":1547566871,"is_pvip":false,"replies":[{"id":"23097","content":"👍🏻","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1549101929,"ip_address":"","comment_id":60880,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547566871","product_id":100021101,"comment_content":"本想在win7下编译breakpad,结果搭建编译环境折腾了大半天没成功，最后在虚拟机中unbuntu编译breakpad.<br>遇到坑有：<br>\t1.breakpad 源码被墙，开启vpn，设置git httproxy,但是window上开启vpn,在虚拟机unbuntu中 设置github httproxy,clone失败，只好先win7上下载源码，再共享到unbuntu上<br>\t2.breakpad编译文档 cd src 让人误解，（还是只有我这样），以为是源码工程的src目录（恰好源码中有src目录），而实际上是指源码的根目录<br>\t3.third_party&#47;ssl&#47;linux_syscall_support.h 缺失问题<br><br>解析输出结果：\t<br>Crash()<br>F:\\developer_workspace\\android__workspace\\AndroidAdvanceWithGeektime\\Chapter01\\sample\\src\\main\\cpp&#47;crash.cpp:10","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436654,"discussion_content":"👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549101929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60466,"user_name":"PP","can_delete":false,"product_type":"c1","uid":1187449,"ip_address":"","ucode":"402B6A4316DFBB","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/79/54a1635c.jpg","comment_is_top":false,"comment_ctime":1547475574,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1547475574","product_id":100021101,"comment_content":"看到 readme 中写到<br>『生成的 crash信息，如果授予Sdcard权限会优先存放在&#47;sdcard&#47;crashDump下，便于我们做进一步的分析。反之会放到目录 &#47;data&#47;data&#47;com.dodola.breakpad&#47;files&#47;crashDump』。<br><br>但是在模拟器上运行后，&#47;sdcard&#47;crashDump这个目录存在但是没有文件。后来折腾了半天配置，无意中看到logcat日志发现保存地址是在&#47;storage&#47;emulated&#47;0&#47;crashDump下。记录一下避免其他人踩坑。<br>","like_count":0},{"had_liked":false,"id":57743,"user_name":"Mr.J","can_delete":false,"product_type":"c1","uid":1267172,"ip_address":"","ucode":"372D8C614F6C3D","user_header":"https://static001.geekbang.org/account/avatar/00/13/55/e4/7061abd5.jpg","comment_is_top":false,"comment_ctime":1546878863,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546878863","product_id":100021101,"comment_content":"已经过去这么久了，不知道老师还能看到评论不，我没有直接把github上的demo拉倒工程中去跑，自己看着github敲了一遍，但是编译的时候报错：<br>E&#47;AndroidRuntime: FATAL EXCEPTION: main<br>    Process: com.example.administrator.geektimedemo, PID: 9804<br>    java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;base.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_dependencies_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_0_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_1_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_2_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_3_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_4_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_5_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_6_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_7_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_8_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_9_apk.apk&quot;],nativeLibraryDirectories=[&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;lib&#47;x86, &#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;base.apk!&#47;lib&#47;x86, &#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_dependencies_apk.apk!&#47;lib&#47;x86,  ...&#47;data&#47;app&#47;com.example.administrator.geektimedemo-2&#47;split_lib_slice_9_apk.apk!&#47;lib&#47;x86, &#47;system&#47;lib, &#47;vendor&#47;lib]]] couldn&#39;t find &quot;libcrash.so&quot;<br>        at java.lang.Runtime.loadLibrary0(Runtime.java:972)<br>        at java.lang.System.loadLibrary(System.java:1530)<br>        at com.example.administrator.geektimedemo.MainActivity.&lt;clinit&gt;(MainActivity.java:23)<br>        ...<br>表示以前没有接触过JNI开发，这个怎么办","like_count":0},{"had_liked":false,"id":56453,"user_name":"Mr.J","can_delete":false,"product_type":"c1","uid":1267172,"ip_address":"","ucode":"372D8C614F6C3D","user_header":"https://static001.geekbang.org/account/avatar/00/13/55/e4/7061abd5.jpg","comment_is_top":false,"comment_ctime":1546448345,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546448345","product_id":100021101,"comment_content":"在平常的开发中，也许是公司业务方面方面也有个人方面，很少这样收集奔溃情况，一般线上出现问题都是直接反馈到开发中，所以这块很少关注（感觉就是类似于微信这种大众应用，用户量多，公司追求用户体验来优化自己的产品时会这么做，小公司的一些小项目很少这样），看了老师讲的课，我会一步一步的去把这些内容动手实践一下，因为不懂所以才强行让自己去实践，才能有所收获，文章已经是第二次阅读了，第一次一脸懵逼的进来，一脸懵逼的出去，第二次阅读明显会感觉好很多","like_count":0},{"had_liked":false,"id":54782,"user_name":"羽","can_delete":false,"product_type":"c1","uid":1333168,"ip_address":"","ucode":"3BE2A6EBF305D4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIICoUUZlgrZPzV6ewHOhgzbMwK80WzRcRwYK5uw5J0o2CIzBzs4zypHmQVUb5szuYmDyicgIU862g/132","comment_is_top":false,"comment_ctime":1545962260,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545962260","product_id":100021101,"comment_content":"操作系统：win7+64，由于下载depot-tools需要翻墙，最后下载MinGW 64版本，得到src&#47;processor&#47;minidump_stackwalk.exe ,解析dump文件得到堆栈日志，使用addr2line解析符号，成功","like_count":0},{"had_liked":false,"id":54581,"user_name":"vina.chiong","can_delete":false,"product_type":"c1","uid":1009705,"ip_address":"","ucode":"55A26D000324B0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/68/29/0961c7f2.jpg","comment_is_top":false,"comment_ctime":1545905478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545905478","product_id":100021101,"comment_content":"遇到的状况：<br>拉取dmp文件后，使用minidump-stackwalk 读取信息，报错<br>```<br>dyld: Symbol not found: __ZTTNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEE<br>  Referenced from: &#47;Users&#47;vinachiong&#47;Documents&#47;04.Workspace&#47;git&#47;Chapter01&#47;tools&#47;mac&#47;.&#47;minidump_stackwalk<br>  Expected in: &#47;usr&#47;lib&#47;libstdc++.6.dylib<br> in &#47;Users&#47;vinachiong&#47;Documents&#47;04.Workspace&#47;git&#47;Chapter01&#47;tools&#47;mac&#47;.&#47;minidump_stackwalk<br>Abort trap: 6<br>```<br>一开始google类似问题，以为是gcc版本问题，4.2.1，更新到5.x，6.x也不行。（在更新安装gcc过程中也有接触到新的体验）。<br>回头查看其它同学的评论和github上的说明，才发现是提供的minidump-stackwalk程序依赖的库在不同设备上有差异导致。<br>老老实实地checkout `breakPad`的github镜像，并按照相关步骤编译出可用的minidump-stackwalk 程序即可。<br><br>感悟：<br>在「做作业」这个场景之下，驱动我去阅读了解、理解相关知识：<br>- NDK官方文档<br>- C++基础入门<br>- AS common tool - dumpsys 工具的相关选项说明及动手感受，用作与BreakPad对比<br>- GUN GCC官网<br>- 阅读BreakPad的Doc，快速对BreakPad的三大组件轮廓有一定的印象<br>- 尝试阅读BreakPad源码，对C++、NDK等方面的知识作融汇<br>- 对于Github的镜像、Google Source的Repos的印象有所改观，之前研究Android Gradle Plugin尝试clone GS上源码，太痛苦，最后改用gradle的 gradleApi()。<br>","like_count":0},{"had_liked":false,"id":52718,"user_name":"OzoraTsubasa","can_delete":false,"product_type":"c1","uid":1298651,"ip_address":"","ucode":"A29805845F58BA","user_header":"https://static001.geekbang.org/account/avatar/00/13/d0/db/8b8173d0.jpg","comment_is_top":false,"comment_ctime":1545487088,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545487088","product_id":100021101,"comment_content":"交作业啦<br><br>第一步：运行博主提供的Demo 成功运行到真机上并成功Crash(必须注释掉build.gradle文件中的 abiFilters &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;, &quot;x86&quot;)这句话非常产生空内容的文件。<br>第二步：拉取.dmp文件<br>第三步：通过运行minidump_stackwalk工具来获得Nativie的错误信息，运行minidump_stackwalk工具报错，按照博主提供的思路，自己编译breakpad源码项目产生工具，注意按照breakpad源码提供的进入src目录下载执行.&#47;configure &amp;&amp; make 这两个命令是有问题的，直接在根目录执行两个命令没问题，最终成功获得错误信息如下：<br>Operating system: Android<br>                  0.0.0 Linux 3.10.61-12451430 #1 SMP PREEMPT Wed Aug 1 11:13:24 KST 2018 aarch64<br>CPU: arm64<br>     8 CPUs<br>GPU: UNKNOWN<br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x600<br>     x0 = 0x000000778fc41000    x1 = 0x0000007fe8180454<br>     x2 = 0x0000000000000000    x3 = 0x000000778fcc7a00<br>     x4 = 0x0000007fe81808c8    x5 = 0x000000778e6dbfcd<br>第四部：运行aarch64-linux-android-addr2line -f -C -e sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;armeabi-v7a&#47;libcrash-lib.so 0x600<br>Crash()<br>&#47;Users&#47;fenghuajie&#47;Downloads&#47;Chapter01-master&#47;sample&#47;src&#47;main&#47;cpp&#47;crash.cpp:10，成功打印报错信息。","like_count":0},{"had_liked":false,"id":52452,"user_name":"LLyu","can_delete":false,"product_type":"c1","uid":1331143,"ip_address":"","ucode":"28D192FA93ED2E","user_header":"https://static001.geekbang.org/account/avatar/00/14/4f/c7/715e2d7e.jpg","comment_is_top":false,"comment_ctime":1545384493,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545384493","product_id":100021101,"comment_content":"在其他留言的帮助下，终于屏幕上打印出了<br>Crash()<br>D:\\AsDemoProject\\Chapter01\\sample\\src\\main\\cpp&#47;crash.cpp:10<br>主要在编译minidump_stackwalk工具时出现了困难，最后还是通过使用Linux环境+从Github上clone Breakpad的办法成功编译。<br>解决问题的过程中收获不少😊","like_count":0},{"had_liked":false,"id":52002,"user_name":"久九","can_delete":false,"product_type":"c1","uid":1328885,"ip_address":"","ucode":"ED9FE1E66B164B","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/f5/9612c4d3.jpg","comment_is_top":false,"comment_ctime":1545291863,"is_pvip":false,"replies":[{"id":"19025","content":"crashlog需要解析后查看。主要的内容是maps数据和crash堆栈","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1545368565,"ip_address":"","comment_id":52002,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545291863","product_id":100021101,"comment_content":"通过看文字和留言，成功的的获取到了crashLog.txt。不过crashLog中的信息一点都不了解。","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433693,"discussion_content":"crashlog需要解析后查看。主要的内容是maps数据和crash堆栈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545368565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":51160,"user_name":"霸哥的哥哥","can_delete":false,"product_type":"c1","uid":1332247,"ip_address":"","ucode":"545FEA0746DF5E","user_header":"https://static001.geekbang.org/account/avatar/00/14/54/17/6fddc64b.jpg","comment_is_top":false,"comment_ctime":1545123064,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545123064","product_id":100021101,"comment_content":"虽然看不懂，但是觉得很厉害呢！","like_count":0},{"had_liked":false,"id":50910,"user_name":"振之","can_delete":false,"product_type":"c1","uid":1334599,"ip_address":"","ucode":"3C41248B26568E","user_header":"https://static001.geekbang.org/account/avatar/00/14/5d/47/9139084a.jpg","comment_is_top":false,"comment_ctime":1545064375,"is_pvip":false,"replies":[{"id":"18314","content":"通过一个文件flag","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1545091953,"ip_address":"","comment_id":50910,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545064375","product_id":100021101,"comment_content":"怎么监控被系统杀死的情形？没看明白","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433170,"discussion_content":"通过一个文件flag","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545091953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50726,"user_name":"taotaomami","can_delete":false,"product_type":"c1","uid":1348698,"ip_address":"","ucode":"F2044AD8722045","user_header":"","comment_is_top":false,"comment_ctime":1545035950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545035950","product_id":100021101,"comment_content":"Hi 有个问题想请教一下，App发生NativeError的时候，出错地址是映射到APK文件本身，而不是像常见的so库上面，这种情况应该怎么分析呢？谢谢~","like_count":0},{"had_liked":false,"id":50048,"user_name":"大豆","can_delete":false,"product_type":"c1","uid":1350130,"ip_address":"","ucode":"BC78EF2336DBD0","user_header":"https://static001.geekbang.org/account/avatar/00/14/99/f2/c74d24d7.jpg","comment_is_top":false,"comment_ctime":1544850606,"is_pvip":false,"replies":[{"id":"18221","content":"这个不会有多行的","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1545050008,"ip_address":"","comment_id":50048,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544850606","product_id":100021101,"comment_content":"编译breakpad（我用的ndk版本是r12b）及生成crash文件一切顺利，就是在解析dmp文件时有点不知所措了，主要是不知道该如何解析，也不知道minidump_stackwalk、dump_syms工具这两个工具如何生成。最后也在学委的文章下解析成功了，但在这期间也是踩了如下几个坑的。<br>1、我在虚拟机上clone lss时，直接超时，于是直接下载去下载lss源码包<br>2、lss里的文件必须在src&#47;third_party&#47;lss目录下，否则编译不过<br>3、当我执行如下命令时<br>.&#47;minidump_stackwalk 812ea175-7886-4781-1ad7eaaa-cb7f9c25.dmp libcrash-lib.so.sym &gt; dump.txt<br>生成了一个无符号的日志记录，如下：<br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x5a0<br> 1  libcrash-lib.so + 0x5c0<br>执行如下命令时<br>.&#47;minidump_stackwalk 812ea175-7886-4781-1ad7eaaa-cb7f9c25.dmp .&#47;Symbol &gt; dump.txt<br>就可以定位到哪一行代码出错了，如下：<br>Thread 0 (crashed)<br> 0  libcrash-lib.so!Crash() [crash.cpp : 10 + 0x0]<br> 1  libcrash-lib.so!Java_com_dodola_breakpad_MainActivity_crash [crash.cpp : 16 + 0x0]<br>那么xxxx.so.sym文件里的如下编码<br>MODULE Linux arm64 42B54981675BE10B50AFDBD6F4A2EB6A0 libcrash-lib.so<br>会有多行吗？<br><br>","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432858,"discussion_content":"这个不会有多行的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545050008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49151,"user_name":"放肆得微笑","can_delete":false,"product_type":"c1","uid":1114067,"ip_address":"","ucode":"3BDA9AF904DA1A","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/d3/f062f222.jpg","comment_is_top":false,"comment_ctime":1544611694,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1544611694","product_id":100021101,"comment_content":"经过几个坑，终于搞定了<br>环境 mac as3.2.1 <br>1. 终端需要代理设置<br>2. 需要将crash文件拉到本地，我以为和adb 一样的操作(&gt;﹏&lt;)<br>3. ndk需要指定对象64位目录下的工具<br><br>总结：<br>1 要认真阅读文档，按照步骤操作，根据以前经验容易被坑<br>2 正在找能对应的问题勤加练习，不然学了不用就白学了","like_count":0},{"had_liked":false,"id":48717,"user_name":"山鬼","can_delete":false,"product_type":"c1","uid":1344110,"ip_address":"","ucode":"8A6AA48BB8D510","user_header":"https://static001.geekbang.org/account/avatar/00/14/82/6e/f552d036.jpg","comment_is_top":false,"comment_ctime":1544521426,"is_pvip":false,"replies":[{"id":"17489","content":"so加固又是一个非常大的话题了，它想得到你的调用栈，其实也不用引发崩溃，动态调试就可以。","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1544524231,"ip_address":"","comment_id":48717,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544521426","product_id":100021101,"comment_content":"老师关于native崩溃捕获我有一个问题。自己也会做一些native开发，而且都会把一些关键的业务实现放到so中。如果别人通过hook我的程序，在某个函数内引发一个崩溃，并通过这种方式或者日志捕获这个崩溃，整个函数调用链就会被人抓到，这种情况有什么防护措施吗？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432325,"discussion_content":"so加固又是一个非常大的话题了，它想得到你的调用栈，其实也不用引发崩溃，动态调试就可以。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544524231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48696,"user_name":"Mayer","can_delete":false,"product_type":"c1","uid":1331148,"ip_address":"","ucode":"A2F567E547D7A6","user_header":"https://static001.geekbang.org/account/avatar/00/14/4f/cc/a6e85331.jpg","comment_is_top":false,"comment_ctime":1544517292,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544517292","product_id":100021101,"comment_content":"window系统下用python3编译会报MSVSNew.py的编码错误，改完会报easy_xml：TypeError: &#39;&lt;&#39; not supported between instances of &#39;MSVSProject&#39; and &#39;MSVSProject&#39;. 有谁知道不用python2怎么编译成功？","like_count":0},{"had_liked":false,"id":48358,"user_name":"Marnie","can_delete":false,"product_type":"c1","uid":1001912,"ip_address":"","ucode":"ECF9B22574F868","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/b8/fb19aa6a.jpg","comment_is_top":false,"comment_ctime":1544427913,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544427913","product_id":100021101,"comment_content":"换了几个手机 dmp 文件就是没有，没办法最后使用了模拟器。<br>其次，需要一定c++语法基础。<br>最后，cmake编译也需要看一下。<br><br>整个程序最后跑下来我用了挺长时间，主要是之前知识好久不用了得重新看，也花了一些时间看breakpad的文档了解原理。<br><br><br>","like_count":0},{"had_liked":false,"id":48342,"user_name":"小八个","can_delete":false,"product_type":"c1","uid":1331348,"ip_address":"","ucode":"7C7660BD453612","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTE5VnMeVoBjXpQ4FUL6ZhLVDqxA9FATBea4beibWqhYJDUl9YDgYvYrxib4fiapEcsrDibjPPac4bBQ/132","comment_is_top":false,"comment_ctime":1544425094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544425094","product_id":100021101,"comment_content":"看到评论有人说在手机上没有生成dmp文件，是因为作者在simple的gradle文件中<br>ndk {<br>abiFilters &quot;armeabi-v7a&quot;&#47;&#47;, &quot;arm64-v8a&quot;, &quot;x86&quot;<br>}<br>注释掉了v8a的部分，只要把注释取消就好了，有没有人遇到把注释去掉之后，程序不崩溃的情况？？","like_count":0},{"had_liked":false,"id":48340,"user_name":"咖啡不加糖","can_delete":false,"product_type":"c1","uid":1332936,"ip_address":"","ucode":"A410A5E2065A91","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Ee3rJFn8tPxKFPzRkIjQ0Df4yjhNKibHbfUCn25P0yYZZaQu4TQCDpHkVgZTVTXjaVLgVu2L1jQXBvib2vAMyorg/132","comment_is_top":false,"comment_ctime":1544424854,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544424854","product_id":100021101,"comment_content":"加了一个多星期的班后，发现落后4节课了，趁着现在比较闲得抓紧时间追上来了。<br>刚才下载张老师的demo来看了看，项目倒是跑起来了，也生成了crash文件，但是在解析这一步卡住了。<br>看网上说可以用WinDbg打开，但是在打开的时候报错了，提示it may be corrupt or in a format not understood by the debugger。<br>先记录下来，先跟上课程，后面再补这一块，再用Breakpad自己试着编译一个环境来试试。","like_count":0},{"had_liked":false,"id":48127,"user_name":"learn","can_delete":false,"product_type":"c1","uid":1275304,"ip_address":"","ucode":"FC0C464426D558","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/9rpAwtJfuJL84ia8jOsWtdicicAmZ1XL1bv0K4bg0paxuEmL5BIT1exTDMibmyPbq15NFuTMZIHc1O2GghytUBIiavA/132","comment_is_top":false,"comment_ctime":1544364879,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544364879","product_id":100021101,"comment_content":"windows上安装breakpad要安装depot_tools，有没有人知道这个怎么安装，我git clone 报443错误了","like_count":0},{"had_liked":false,"id":47848,"user_name":"MrsLEO","can_delete":false,"product_type":"c1","uid":1331358,"ip_address":"","ucode":"6535EAAD1C6A7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/9e/f8d9c6cb.jpg","comment_is_top":false,"comment_ctime":1544236034,"is_pvip":false,"replies":[{"id":"17030","content":"appinfo就可以拿到apk路径，你可以看看facebook的开源库soloader","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1544236532,"ip_address":"","comment_id":47848,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544236034","product_id":100021101,"comment_content":"唉 这个极客时间评论功能真是不人性化。你开始说你们们万分之几的so崩溃率，然后通过重新提取apk的so来加载.我的意思是这so是从哪里的apk提取.系统的data&#47;app&#47;包名&#47;xxx.apk吗？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431907,"discussion_content":"appinfo就可以拿到apk路径，你可以看看facebook的开源库soloader","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544236532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47714,"user_name":"MrsLEO","can_delete":false,"product_type":"c1","uid":1331358,"ip_address":"","ucode":"6535EAAD1C6A7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/9e/f8d9c6cb.jpg","comment_is_top":false,"comment_ctime":1544185842,"is_pvip":false,"replies":[{"id":"17018","content":"apk文件指的是什么？系统安装完也会有apk文件啊","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1544196668,"ip_address":"","comment_id":47714,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544185842","product_id":100021101,"comment_content":"那这样的话如何保证apk文件一定存在呢？很多软件安装后都删除安装包了呀！","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431865,"discussion_content":"apk文件指的是什么？系统安装完也会有apk文件啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544196668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47653,"user_name":"忘返","can_delete":false,"product_type":"c1","uid":1340870,"ip_address":"","ucode":"35C805E4D2B084","user_header":"https://static001.geekbang.org/account/avatar/00/14/75/c6/d4106483.jpg","comment_is_top":false,"comment_ctime":1544172615,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544172615","product_id":100021101,"comment_content":"又学习到了一项新技能native 层的异常捕获，对Breadpad的使用和使用过程中遇到的坑还需要多多学习","like_count":0},{"had_liked":false,"id":47538,"user_name":"lee","can_delete":false,"product_type":"c1","uid":1183991,"ip_address":"","ucode":"96BD0F38A1AA61","user_header":"https://static001.geekbang.org/account/avatar/00/12/10/f7/96302fe8.jpg","comment_is_top":false,"comment_ctime":1544152415,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544152415","product_id":100021101,"comment_content":"做了一个验证：<br>使用各平台下的addr2line （ aarch64-linux-android-4.9 ，arm-linux-androideabi-4.9 ，x86_64-4.9，x86-4.9） 对各平台的so 解地址， 64 位的工具解任何so 都可以，只是地址不同可能解不到，但不会报错，32位的工具解 64位的so库会报 文件格式错误，是不是有结论只与位数有关？","like_count":0},{"had_liked":false,"id":47286,"user_name":"lee","can_delete":false,"product_type":"c1","uid":1183991,"ip_address":"","ucode":"96BD0F38A1AA61","user_header":"https://static001.geekbang.org/account/avatar/00/12/10/f7/96302fe8.jpg","comment_is_top":false,"comment_ctime":1544100370,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544100370","product_id":100021101,"comment_content":"Ubuntu下是编译breakpad最方便的：<br>1.获取breakpad代码<br>git clone https:&#47;&#47;chromium.googlesource.com&#47;breakpad&#47;breakpad<br><br>2:直接make,会缺少的一个头文件linux_syscall_support.h <br>git clone https:&#47;&#47;chromium.googlesource.com&#47;linux-syscall-support<br><br>3：.&#47;configure &amp;&amp; make<br><br>其它的就按read me 来了，不会有什么大问题了","like_count":0},{"had_liked":false,"id":47162,"user_name":"MrsLEO","can_delete":false,"product_type":"c1","uid":1331358,"ip_address":"","ucode":"6535EAAD1C6A7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/9e/f8d9c6cb.jpg","comment_is_top":false,"comment_ctime":1544065515,"is_pvip":false,"replies":[{"id":"16879","content":"这个可能性很多，有可能是代码问题，有可能是拷贝的时候出问题了","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1544107315,"ip_address":"","comment_id":47162,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1544065515","product_id":100021101,"comment_content":"张工 你好，请教你个问题我们发现线上有些UnsatisfiedLinkError.目前我们应用只支持armv7a .线上反馈机型也是arm平台的 目前看Android7出现概率稍微大点 请问这是什么原因该怎么定位呢","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431684,"discussion_content":"这个可能性很多，有可能是代码问题，有可能是拷贝的时候出问题了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544107315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1920102,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLrbyvyBdlQfKzkUiblaQVKXOqNVibXYp8SMZWLgyeicicoYm7IicvJRxJ7ZHG9czcNaqo1HiclonNRP7OA/132","nickname":"Geek_850e4f","note":"","ucode":"29B044F2D932ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342654,"discussion_content":"Relinker","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610766078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47115,"user_name":"Senble","can_delete":false,"product_type":"c1","uid":1330328,"ip_address":"","ucode":"98A8DC9FF625FD","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/98/2e916c7e.jpg","comment_is_top":false,"comment_ctime":1544059853,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544059853","product_id":100021101,"comment_content":"你好，我记得之前有部分国产手机都不能fork进城，请问文章里面通过fork进程收集异常信息怎么做到的？","like_count":0},{"had_liked":false,"id":47054,"user_name":"Stefan","can_delete":false,"product_type":"c1","uid":1331264,"ip_address":"","ucode":"68ADFEEA3A5C18","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/40/292d0a3f.jpg","comment_is_top":false,"comment_ctime":1544026739,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544026739","product_id":100021101,"comment_content":"在做符号解析时命令行提示File format not recognized<br><br>crash日志<br>Operating system: Android<br>                  0.0.0 Linux 4.4.78-perf-g92b7329 #1 SMP PREEMPT Tue Sep 25 23:43:55 CST 2018 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x600<br><br>命令行<br>$NDK_HOME&#47;toolchains&#47;arm-linux-androideabi-4.9&#47;prebuilt&#47;darwin-x86_64&#47;bin&#47;arm-linux-androideabi-addr2line -f -C -e Chapter01&#47;sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;arm64-v8a&#47;libcrash-lib.so 0x600","like_count":0},{"had_liked":false,"id":46858,"user_name":"Find","can_delete":false,"product_type":"c1","uid":1329967,"ip_address":"","ucode":"3815471A854AC9","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/2f/ea949f1f.jpg","comment_is_top":false,"comment_ctime":1543992430,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543992430","product_id":100021101,"comment_content":"12-05 14:07:02.320 3463-3463&#47;com.dodola.breakpad D&#47;dodoodla_crrrrrash: ==========init handlers_installed==========<br>12-05 14:07:02.651 3463-3463&#47;com.dodola.breakpad D&#47;dodoodla_crash: ===============crrrrash================<br>    Dump path: &#47;storage&#47;emulated&#47;0&#47;crashDump&#47;4a00027c-72e7-456f-220dfc84-ec30dcac.dmp<br>成功运行了，这是打印出的log，手机里面也找到了xx.dmp，是需要反编译这个文件吗，是用arm-linux-androideabi-addr2line来打开运行吗，但是点击这个arm-linux-androideabi-addr2line一闪而过，求教什么原因。。","like_count":0},{"had_liked":false,"id":46715,"user_name":"ChinaStyle","can_delete":false,"product_type":"c1","uid":1333437,"ip_address":"","ucode":"C12D840CBC5B41","user_header":"https://static001.geekbang.org/account/avatar/00/14/58/bd/081b671e.jpg","comment_is_top":false,"comment_ctime":1543973446,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543973446","product_id":100021101,"comment_content":"作业完成。我是Windows平台，自己从https:&#47;&#47;github.com&#47;google&#47;breakpad获取了breakpad源码，在Ubuntu虚拟机编译了可用的minidump_stackwalk程序。顺便把demo中的地址异常改成了除0异常，验证也ok。<br>dump文件：<br>Operating system: Android<br>                  0.0.0 Linux 3.10.0+ #256 SMP PREEMPT Fri May 19 11:58:12 PDT 2017 i686<br>CPU: x86<br>     GenuineIntel family 6 model 31 stepping 1<br>     2 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGFPE &#47; FPE_INTDIV<br>Crash address: 0xac6de521<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x521<br> <br>测试结果：<br>Crash()<br>D:\\GeekTime\\Chapter01-master\\sample\\src\\main\\cpp&#47;crash.cpp:12<br><br>真是对绍文老师这个课相见恨晚啊。回想上家公司，native层出了不计其数的崩溃，虽然当时也会用addr2line分析，但是全靠开发工具的logcat抓崩溃log，方法和效率很低下。而且旨在开发和测试环节有用，对线上版本的native崩溃根本没有办法。<br>从这一讲和扩展阅读的文章，真是又学到不少。也让我更加坚定，虽然觉得自己略微有点偏底层的技巧和经验，终究还是太肤浅，但是在这方面要下更多功夫才行啊。","like_count":0},{"had_liked":false,"id":46600,"user_name":"信仰年轻","can_delete":false,"product_type":"c1","uid":1329011,"ip_address":"","ucode":"B2BD881D25FCDD","user_header":"https://static001.geekbang.org/account/avatar/00/14/47/73/63a3cb41.jpg","comment_is_top":false,"comment_ctime":1543945138,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543945138","product_id":100021101,"comment_content":"Operating system: Android<br>                  0.0.0 Linux 4.1.18-g9aa64f8 #1 SMP PREEMPT Thu Jun 8 05:22:43 CST 2017 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libc.so + 0x1b4f8<br>     x0 = 0x0000000000000000    x1 = 0x0000000000000000<br>     x2 = 0x8f3d0e4b3d0afea2    x3 = 0x000000741a94db9e<br>     x4 = 0x000000741a9febf0    x5 = 0x0000000000000002","like_count":0},{"had_liked":false,"id":46571,"user_name":"信仰年轻","can_delete":false,"product_type":"c1","uid":1329011,"ip_address":"","ucode":"B2BD881D25FCDD","user_header":"https://static001.geekbang.org/account/avatar/00/14/47/73/63a3cb41.jpg","comment_is_top":false,"comment_ctime":1543937944,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543937944","product_id":100021101,"comment_content":"生成了dmp文件，在解析中<br>demo中breakpad-build需要修改build.gradle，在defaultConfig领域中注释掉<br>  &#47;*  ndk {<br>            abiFilters &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;, &quot;x86&quot;<br>        }*&#47;<br>新增：<br>        externalNativeBuild {<br>            cmake {<br>                cppFlags &quot;&quot;<br>                abiFilters &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;, &quot;x86&quot;<br>            }<br>        }     &#47;&#47;如果要生成指定的平台，打release包即可，直接build的话只有本机型架构的so库输出","like_count":0},{"had_liked":false,"id":46434,"user_name":"红日","can_delete":false,"product_type":"c1","uid":1242344,"ip_address":"","ucode":"B116DFD74BC765","user_header":"https://static001.geekbang.org/account/avatar/00/12/f4/e8/b7c16152.jpg","comment_is_top":false,"comment_ctime":1543925329,"is_pvip":false,"replies":[{"id":"16636","content":"gp规定是不行的，只是目前gp还不是那么严格","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543935555,"ip_address":"","comment_id":46434,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543925329","product_id":100021101,"comment_content":"请问海外版的应用，加了热修复功能能上googleplay吗？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431459,"discussion_content":"gp规定是不行的，只是目前gp还不是那么严格","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543935555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46414,"user_name":"王宝忠","can_delete":false,"product_type":"c1","uid":1331151,"ip_address":"","ucode":"B889B2AD80A240","user_header":"https://static001.geekbang.org/account/avatar/00/14/4f/cf/60a99d9f.jpg","comment_is_top":false,"comment_ctime":1543918122,"is_pvip":false,"replies":[{"id":"16689","content":"尽管拦截了主线程，到了catch块，也无法继续走下去","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543979604,"ip_address":"","comment_id":46414,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543918122","product_id":100021101,"comment_content":"在线程池直接拦截所有的java异常，对于android主线程可以拦截吗？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431453,"discussion_content":"尽管拦截了主线程，到了catch块，也无法继续走下去","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543979604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46407,"user_name":"王宝忠","can_delete":false,"product_type":"c1","uid":1331151,"ip_address":"","ucode":"B889B2AD80A240","user_header":"https://static001.geekbang.org/account/avatar/00/14/4f/cf/60a99d9f.jpg","comment_is_top":false,"comment_ctime":1543917221,"is_pvip":false,"replies":[{"id":"16633","content":"有部分同学在写代码的时候，习惯将所有的代码全部做上异常处理静默掉，虽然会在一定程度减少crash率，但是可能会造成业务逻辑的中断或者错乱等，这不是一个很好的习惯","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1543934857,"ip_address":"","comment_id":46407,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543917221","product_id":100021101,"comment_content":"&quot;程序员 B 对所有线程、任务都封装了一层 try catch...“，什么意思，是检查每个易发生异常的代码快都加上try catch，还是有什么办法统一try catch？<br>","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431448,"discussion_content":"有部分同学在写代码的时候，习惯将所有的代码全部做上异常处理静默掉，虽然会在一定程度减少crash率，但是可能会造成业务逻辑的中断或者错乱等，这不是一个很好的习惯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543934857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46371,"user_name":"树叶","can_delete":false,"product_type":"c1","uid":1328581,"ip_address":"","ucode":"2FDA92407D2890","user_header":"https://static001.geekbang.org/account/avatar/00/14/45/c5/e15d23d8.jpg","comment_is_top":false,"comment_ctime":1543909919,"is_pvip":false,"replies":[{"id":"16578","content":"评论区交流哈","user_name":"编辑回复","user_name_real":"郭蕾","uid":"1000473","ctime":1543911410,"ip_address":"","comment_id":46371,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1543909919","product_id":100021101,"comment_content":"没有提供Windows转换日志的工具吗？  我觉得可以创建一个学习交流群，方便交流。","like_count":0,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431432,"discussion_content":"评论区交流哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543911410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46348,"user_name":"LAY ...℡","can_delete":false,"product_type":"c1","uid":1331081,"ip_address":"","ucode":"7FFB789F37822E","user_header":"https://static001.geekbang.org/account/avatar/00/14/4f/89/26f4873f.jpg","comment_is_top":false,"comment_ctime":1543905372,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543905372","product_id":100021101,"comment_content":"老师你好，现在成功生成了dump文件，请问在window查看呢，发现不能直接使用minidump_stackwalker","like_count":0},{"had_liked":false,"id":46301,"user_name":"ForzaJuve","can_delete":false,"product_type":"c1","uid":1047302,"ip_address":"","ucode":"E090D83AE78EE6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/06/0e6b6365.jpg","comment_is_top":false,"comment_ctime":1543895542,"is_pvip":false,"replies":[{"id":"16627","content":"这个问题同学尝试clean项目重新编译看看，主要看一下编译出来的apk包里是否包含libbreakpad-core.so","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1543933449,"ip_address":"","comment_id":46301,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543895542","product_id":100021101,"comment_content":"小米mix,mac os环境没折腾出来，只有sdcard&#47;crashDump空目录，不知道是不是这个异常的问题<br>11428-11428&#47;com.dodola.breakpad E&#47;AndroidRuntime: FATAL EXCEPTION: main<br>    Process: com.dodola.breakpad, PID: 11428<br>    java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file &quot;&#47;data&#47;app&#47;com.dodola.breakpad-1&#47;base.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.dodola.breakpad-1&#47;split_lib_dependencies_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.dodola.breakpad-1&#47;split_lib_slice_0_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.dodola.breakpad-1&#47;split_lib_slice_1_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.dodola.breakpad-1&#47;split_lib_slice_2_apk.apk&quot;, zip file &quot;&#47;data&#47;app&#47;com.dodola.breakpad-1&#47;split_lib_slice_3_apk.apk&quot;, zip file &quot;&quot;&#47;data&#47;app&#47;com.dodola.breakpad-1&#47;split_lib_slice_9_apk.apk&quot;],nativeLibraryDirectories=[&#47;data&#47;app&#47;com.dodola.breakpad-1&#47;lib&#47;arm, &#47;data&#47;app&#47;com.dodola.breakpad-1&#47;base.apk!&#47;lib&#47;armeabi-v7a, &#47;data&#47;app&#47;com.dodola.breakpad-1&#47;split_lib_dependencies_apk.apk!&#47;lib&#47;armeabi-v7a, &#47;data&#47;app&#47;com.dodola.breakpad-1&#47;split_lib_slice_8_apk.apk!&#47;lib&#47;armeabi-v7a, &#47;data&#47;app&#47;com.dodola.breakpad-1&#47;split_lib_slice_9_apk.apk!&#47;lib&#47;armeabi-v7a, &#47;system&#47;lib, &#47;vendor&#47;lib]]] couldn&#39;t find &quot;libbreakpad-core.so&quot;<br>        at java.lang.Runtime.loadLibrary0(Runtime.java:972)<br>        at java.lang.System.loadLibrary(System.java:1530)<br>        at com.sample.breakpad.BreakpadInit.&lt;clinit&gt;(BreakpadInit.java:6)","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431416,"discussion_content":"这个问题同学尝试clean项目重新编译看看，主要看一下编译出来的apk包里是否包含libbreakpad-core.so","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543933449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46295,"user_name":"双子座的马克思","can_delete":false,"product_type":"c1","uid":1150663,"ip_address":"","ucode":"4D43FB644E9870","user_header":"https://static001.geekbang.org/account/avatar/00/11/8e/c7/6d08d502.jpg","comment_is_top":false,"comment_ctime":1543894774,"is_pvip":false,"replies":[{"id":"16624","content":"赞赞，在ndk对lldb和cmake支持日益完善后，c++的开发环境已经和java一样好用","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1543933358,"ip_address":"","comment_id":46295,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543894774","product_id":100021101,"comment_content":"Android studio 3.2安装并配置后通过new project创建了一个c++项目，编译时第一次出现read time out，try again后相应依赖安装成功，第一个c++项目创建并运行成功。之后导入Chpater01项目，编译并运行成功 :)","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431413,"discussion_content":"赞赞，在ndk对lldb和cmake支持日益完善后，c++的开发环境已经和java一样好用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543933358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46291,"user_name":"Geek_7f1791","can_delete":false,"product_type":"c1","uid":1108917,"ip_address":"","ucode":"4FB20D37187F56","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/xGQNpcibUgWgFvqibs22F4FziafVqT8YHMuyBJ9cm2XwzwhEHB1cLm3Zl4derXZAOhMT3ic8vMxfOXZbJYiaaV642Vg/132","comment_is_top":false,"comment_ctime":1543893789,"is_pvip":false,"replies":[{"id":"16622","content":"这个是因为缺少必要的动态链接库导致的，这个是我们考虑不周，建议同学去获取一份breakpad源码编译来获得工具","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1543933258,"ip_address":"","comment_id":46291,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543893789","product_id":100021101,"comment_content":"dyld: Symbol not found: __ZTTNSt7__cxx1118basic_stringstreamIcSt11char_traitsIcESaIcEEE<br>  Referenced from: &#47;Users&#47;Macbook&#47;Documents&#47;workspace&#47;Chapter01&#47;.&#47;tools&#47;mac&#47;minidump_stackwalk (which was built for Mac OS X 10.13)<br>  Expected in: &#47;usr&#47;lib&#47;libstdc++.6.0.9.dylib<br> in &#47;Users&#47;Macbook&#47;Documents&#47;workspace&#47;Chapter01&#47;.&#47;tools&#47;mac&#47;minidump_stackwalk<br>Abort trap: 6<br><br>crashLog.txt内容为空,请问mac下如何解决该问题","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431410,"discussion_content":"这个是因为缺少必要的动态链接库导致的，这个是我们考虑不周，建议同学去获取一份breakpad源码编译来获得工具","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543933258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46284,"user_name":"周迷奇","can_delete":false,"product_type":"c1","uid":1330150,"ip_address":"","ucode":"78200625BEC1EA","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/e6/48d112a0.jpg","comment_is_top":false,"comment_ctime":1543892999,"is_pvip":false,"replies":[{"id":"16620","content":"这个抱歉，因为环境不同所以导致出现这个问题，建议同学尝试一下编译源码来获取工具","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1543933167,"ip_address":"","comment_id":46284,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543892999","product_id":100021101,"comment_content":"卡在日志文件解析上，在同事Mac上也找不到minidump_stackwalk命令和相关引用，尝试自己编译breakpad，正在学习NDK，不是很熟练，正好练习实践一下，看了代码结构和官网介绍，决定从processor&#47;minidump_stackwalk.cc入手开干，希望能倒腾成功，加油！","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431405,"discussion_content":"这个抱歉，因为环境不同所以导致出现这个问题，建议同学尝试一下编译源码来获取工具","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543933167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46228,"user_name":"渡口畏成年","can_delete":false,"product_type":"c1","uid":1329552,"ip_address":"","ucode":"B76E3C96EECE1E","user_header":"https://static001.geekbang.org/account/avatar/00/14/49/90/e72f09c9.jpg","comment_is_top":false,"comment_ctime":1543886828,"is_pvip":false,"replies":[{"id":"16572","content":"后面的几章会讲到","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543903329,"ip_address":"","comment_id":46228,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543886828","product_id":100021101,"comment_content":"张老师，现在开发的项目中有很多内存溢出的崩溃，经常无法复现，能不能提供一些解决思路和方法？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431388,"discussion_content":"后面的几章会讲到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543903329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46218,"user_name":"汤姆猫","can_delete":false,"product_type":"c1","uid":1328701,"ip_address":"","ucode":"ABCC58277F05C5","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/3d/647829f9.jpg","comment_is_top":false,"comment_ctime":1543885775,"is_pvip":false,"replies":[{"id":"16614","content":"可以在github的issues里描述一下机型和系统版本，ndk版本等信息，然后我们看看原因","user_name":"作者回复","user_name_real":"孙鹏飞","uid":"1171070","ctime":1543932440,"ip_address":"","comment_id":46218,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543885775","product_id":100021101,"comment_content":"点击奔溃后，在手机文件里，只有空目录，没有对应的.txt奔溃日志","like_count":0,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"孙鹏飞","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431382,"discussion_content":"可以在github的issues里描述一下机型和系统版本，ndk版本等信息，然后我们看看原因","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543932440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46146,"user_name":"信仰年轻","can_delete":false,"product_type":"c1","uid":1329011,"ip_address":"","ucode":"B2BD881D25FCDD","user_header":"https://static001.geekbang.org/account/avatar/00/14/47/73/63a3cb41.jpg","comment_is_top":false,"comment_ctime":1543853753,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543853753","product_id":100021101,"comment_content":"花了两个小时看这个文章，准备开始明天开始运行项目。 现在是午夜12:14分，老师提到的东西都好新好厉害。。。膜拜膜拜。。。感谢！明天再看一遍。。","like_count":0},{"had_liked":false,"id":46126,"user_name":"Sleeper","can_delete":false,"product_type":"c1","uid":1330420,"ip_address":"","ucode":"EBA09B99783C9A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QYmrFUZicNHxDoOZvdPLvDa1icicINVAkZwg4vQEjCxQtvPdicTm4UOFRNXgbrO95SYVkEl20gb5mvh36ZTdBlpjZw/132","comment_is_top":false,"comment_ctime":1543850835,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543850835","product_id":100021101,"comment_content":"linux下breakpad编译问题：<br>编译时可能会遇到third_party&#47;lss&#47;linux_syscall_support.h找不到问题，<br>使用git下载git clone https:&#47;&#47;chromium.googlesource.com&#47;linux-syscall-support（需要翻墙推荐使用Shadowskcks，终端使用代理例：export ALL_PROXY=socks5:&#47;&#47;127.0.0.1:1081）<br>下载后的内容复制到src&#47;third_party&#47;lss 目录下后按照官方文档安装","like_count":0},{"had_liked":false,"id":46102,"user_name":"一苇渡寒江","can_delete":false,"product_type":"c1","uid":1328952,"ip_address":"","ucode":"55A4A7F550EEA3","user_header":"https://static001.geekbang.org/account/avatar/00/14/47/38/86dc163d.jpg","comment_is_top":false,"comment_ctime":1543846860,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543846860","product_id":100021101,"comment_content":"张老师，拿到native崩溃的日志很多时候还是无法着手解决呀。平时都是做应用层，写java的，看到native一堆信号日志，无从下手啊。能不能给普及些相关知识或者案例也行","like_count":0},{"had_liked":false,"id":46074,"user_name":"张曦","can_delete":false,"product_type":"c1","uid":1334417,"ip_address":"","ucode":"65BD84DA17B2E3","user_header":"https://static001.geekbang.org/account/avatar/00/14/5c/91/22b90232.jpg","comment_is_top":false,"comment_ctime":1543842038,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543842038","product_id":100021101,"comment_content":"D:\\ASPro\\GeekTime\\Chapter01-master\\tools\\mac&gt;minidump_stackwalk C:\\Users\\Adminis<br>trator\\Desktop\\log\\be8d5866-1e36-4cba-fc6dea8d-6bf1c7e9.dmp &gt;crashLog.txt<br>&#39;minidump_stackwalk&#39; 不是内部或外部命令，也不是可运行的程序<br>或批处理文件。<br>老师这样的方式对吗？","like_count":0},{"had_liked":false,"id":46045,"user_name":"刘佳旭","can_delete":false,"product_type":"c1","uid":1266844,"ip_address":"","ucode":"6E188C9BBB6E13","user_header":"https://static001.geekbang.org/account/avatar/00/13/54/9c/b83c52be.jpg","comment_is_top":false,"comment_ctime":1543838556,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1543838556","product_id":100021101,"comment_content":"Android平台Native代码的崩溃捕获机制及实现 基本没太看懂...看来有好多知识需要补充....","like_count":0},{"had_liked":false,"id":46033,"user_name":"张曦","can_delete":false,"product_type":"c1","uid":1334417,"ip_address":"","ucode":"65BD84DA17B2E3","user_header":"https://static001.geekbang.org/account/avatar/00/14/5c/91/22b90232.jpg","comment_is_top":false,"comment_ctime":1543837069,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543837069","product_id":100021101,"comment_content":"老师能讲讲你的demo 中的目录结构吗，我想了解一下这个demo从一个简单的工程怎么到最后的demo 的步骤","like_count":0},{"had_liked":false,"id":45968,"user_name":"双子座的马克思","can_delete":false,"product_type":"c1","uid":1150663,"ip_address":"","ucode":"4D43FB644E9870","user_header":"https://static001.geekbang.org/account/avatar/00/11/8e/c7/6d08d502.jpg","comment_is_top":false,"comment_ctime":1543826268,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543826268","product_id":100021101,"comment_content":"Android studio 2.3.3 和 3.0.1 引入时项目编译报错，正在下载 3.2，完成后试一下。<br>Native 不大懂，得一点点来","like_count":0},{"had_liked":false,"id":45958,"user_name":"timmy.tan","can_delete":false,"product_type":"c1","uid":1126673,"ip_address":"","ucode":"E213EBD220D1FA","user_header":"https://static001.geekbang.org/account/avatar/00/11/31/11/5c19e958.jpg","comment_is_top":false,"comment_ctime":1543825197,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543825197","product_id":100021101,"comment_content":"1.crashLog.txt 生成处的文件<br>Operating system: Android<br>                  0.0.0 Linux 4.4.78-perf-g9fdd128 #1 SMP PREEMPT Fri Oct 19 20:07:28 CST 2018 aarch64<br>CPU: arm64<br>     8 CPUs<br><br>GPU: UNKNOWN<br><br>Crash reason:  SIGSEGV &#47;SEGV_MAPERR<br>Crash address: 0x0<br>Process uptime: not available<br><br>Thread 0 (crashed)<br> 0  libcrash-lib.so + 0x5e0<br><br>2.执行.&#47;arm-linux-androideabi-addr2line -f -C -e Chapter01&#47;sample&#47;build&#47;intermediates&#47;transforms&#47;mergeJniLibs&#47;debug&#47;0&#47;lib&#47;arm64-v8a&#47;libcrash-lib.so 0x5dc<br><br>得到的是File format not recognized<br><br>3.sample  的 build.gradle配置（我使用的真机，需要配置arm64-v8）<br>       ndk {<br>            abiFilters &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;,<br>        }<br>找了好久没有找到问题，开发系统是ubuntu 16.04 ，麻烦告知下问题分析流程，谢谢<br>","like_count":0},{"had_liked":false,"id":45918,"user_name":"董晓航","can_delete":false,"product_type":"c1","uid":1335115,"ip_address":"","ucode":"577973133E5489","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/4b/48cd13e5.jpg","comment_is_top":false,"comment_ctime":1543818101,"is_pvip":false,"replies":[{"id":"16495","content":"Low memory killer只是其中一种原因，异常退出中只有重启或者anr可以有一些特征可以判别出来","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543847964,"ip_address":"","comment_id":45918,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543818101","product_id":100021101,"comment_content":"标记为怎么判断是low memory kill呢？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431268,"discussion_content":"Low memory killer只是其中一种原因，异常退出中只有重启或者anr可以有一些特征可以判别出来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543847964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45917,"user_name":"旧草","can_delete":false,"product_type":"c1","uid":1213156,"ip_address":"","ucode":"A44D4179BBDC9C","user_header":"https://static001.geekbang.org/account/avatar/00/12/82/e4/c456fa79.jpg","comment_is_top":false,"comment_ctime":1543817785,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1543817785","product_id":100021101,"comment_content":"老师您好，我第一次使用ndk编译，系统环境为win10，gcc使用mingw，打包过程中在run tasks阶段提示无法找到标准库，如 error &#39;::abs&#39; has not been declared，搜索了半天也没找到有效的解决方案。extnativebuild已经加到defaultconfig下面。求帮助，谢谢","like_count":0},{"had_liked":false,"id":45853,"user_name":"汤姆猫","can_delete":false,"product_type":"c1","uid":1328701,"ip_address":"","ucode":"ABCC58277F05C5","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/3d/647829f9.jpg","comment_is_top":false,"comment_ctime":1543803530,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543803530","product_id":100021101,"comment_content":"breakpad-build这块没看懂😭","like_count":0},{"had_liked":false,"id":45730,"user_name":"牵手约定","can_delete":false,"product_type":"c1","uid":1249461,"ip_address":"","ucode":"01AF328FDDD38C","user_header":"https://static001.geekbang.org/account/avatar/00/13/10/b5/0813608c.jpg","comment_is_top":false,"comment_ctime":1543761602,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543761602","product_id":100021101,"comment_content":"项目导入好慢，好着急","like_count":0},{"had_liked":false,"id":45721,"user_name":"qh","can_delete":false,"product_type":"c1","uid":1137959,"ip_address":"","ucode":"0C0A3C32B061CE","user_header":"https://static001.geekbang.org/account/avatar/00/11/5d/27/a8fb15bf.jpg","comment_is_top":false,"comment_ctime":1543759687,"is_pvip":false,"replies":[{"id":"16489","content":"1. 文件句柄泄露指的是我们的代码一直持有着，例如没有调用close<br>2.可以看看参考文档和源码，里面直接调用syscall的方法，没有申请堆资源","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543847484,"ip_address":"","comment_id":45721,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543759687","product_id":100021101,"comment_content":"有两点没怎么明白：<br>一个是文件句柄泄露，是不是和内存泄露差不多，因为句柄个数有限，某些文件实际被删除了或者不可能用了，但是其句柄没有被系统回收。泄露的到一定程度。新创建文件时申请句柄就会不够用，从而创建文件失败？<br>第二个是堆内存耗尽导致生成日志失败，解决办法是Linux Syscall Support。Linux Syscall Support能说的详细一点吗，它怎么在堆内存资源耗尽的情况下，生成日志的。<br>","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431173,"discussion_content":"1. 文件句柄泄露指的是我们的代码一直持有着，例如没有调用close\n2.可以看看参考文档和源码，里面直接调用syscall的方法，没有申请堆资源","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543847484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45667,"user_name":"瑞","can_delete":false,"product_type":"c1","uid":1334600,"ip_address":"","ucode":"1C5945FD2D05C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/5d/48/03abbbd1.jpg","comment_is_top":false,"comment_ctime":1543742076,"is_pvip":false,"replies":[{"id":"16363","content":"基本没什么影响","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543802071,"ip_address":"","comment_id":45667,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543742076","product_id":100021101,"comment_content":"目前项目中的成员好像已经习惯了到处try catch，我很不建议这样做，我想问下，到处try catch会影响性能吗，即使没有捕获到这个异常","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431146,"discussion_content":"基本没什么影响","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543802071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45634,"user_name":"以马内利","can_delete":false,"product_type":"c1","uid":1136553,"ip_address":"","ucode":"AD2C97445B525E","user_header":"https://static001.geekbang.org/account/avatar/00/11/57/a9/1ee1ed9f.jpg","comment_is_top":false,"comment_ctime":1543730878,"is_pvip":false,"replies":[{"id":"16488","content":"赞","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543847370,"ip_address":"","comment_id":45634,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543730878","product_id":100021101,"comment_content":"项目里面集成 bugly ，但是平时对 Native 异常接触的比较少，老师分享的链接🔗 也在努力的看，作业已完成。<br>","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431133,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543847370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45577,"user_name":"清风逐浪","can_delete":false,"product_type":"c1","uid":1024639,"ip_address":"","ucode":"84B3ECF19BA958","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a2/7f/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1543695419,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543695419","product_id":100021101,"comment_content":"真好，受益良多","like_count":0},{"had_liked":false,"id":45498,"user_name":"Juinn","can_delete":false,"product_type":"c1","uid":1334226,"ip_address":"","ucode":"257796850A6CD9","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/d2/34a8c79c.jpg","comment_is_top":false,"comment_ctime":1543655451,"is_pvip":false,"replies":[{"id":"16203","content":"因为手上暂时没有linux，后面补充上去哈","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543663407,"ip_address":"","comment_id":45498,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543655451","product_id":100021101,"comment_content":"还要编译出ubuntu的minidump_stackwalk 程序... ...","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431066,"discussion_content":"因为手上暂时没有linux，后面补充上去哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543663407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45491,"user_name":"莫吉托~Android","can_delete":false,"product_type":"c1","uid":1335884,"ip_address":"","ucode":"A6637885649179","user_header":"https://static001.geekbang.org/account/avatar/00/14/62/4c/0acabb22.jpg","comment_is_top":false,"comment_ctime":1543654085,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543654085","product_id":100021101,"comment_content":"get","like_count":0},{"had_liked":false,"id":45478,"user_name":"李剑清","can_delete":false,"product_type":"c1","uid":1330798,"ip_address":"","ucode":"3E2CD643CC5643","user_header":"https://static001.geekbang.org/account/avatar/00/14/4e/6e/58d4d170.jpg","comment_is_top":false,"comment_ctime":1543651415,"is_pvip":false,"replies":[{"id":"16196","content":"在大型项目一般会在1～2M，主要是minidump文件保留了很多比较高级的特性<br><br>目前我们项目只用了breakpad的机制，并没有使用minidump格式","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543655608,"ip_address":"","comment_id":45478,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543651415","product_id":100021101,"comment_content":"demo中生成的minidump文件有500k，不适合在实际项目中使用，有什么办法可以减少dump文件大小吗？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431056,"discussion_content":"在大型项目一般会在1～2M，主要是minidump文件保留了很多比较高级的特性\n\n目前我们项目只用了breakpad的机制，并没有使用minidump格式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543655608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45468,"user_name":"messishow","can_delete":false,"product_type":"c1","uid":1333962,"ip_address":"","ucode":"FC89FCC39495EA","user_header":"https://static001.geekbang.org/account/avatar/00/14/5a/ca/5d85bc5d.jpg","comment_is_top":false,"comment_ctime":1543649323,"is_pvip":false,"replies":[{"id":"16193","content":"检查工具有几种，一种是正在写代码时的提示，这个可以写stduio插件，一种是编译期的，类似infer coverity。<br><br>这些我们后面也会讲到","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543655499,"ip_address":"","comment_id":45468,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543649323","product_id":100021101,"comment_content":"由于我司单周发版的缘故，灰度已成为只用来验证各业务线是否有问题的阶段，一旦某业务线灰度crash超标，直接回滚某业务线版本，所以我想的是如何尽可能的在编译期发现问题，请问张老师，对于一些常见的crash问题，比如这些数组越界、空对象引用等的风险，除了lint之外，还有哪些比较好用的静态代码检查工具？或者如何较好的防范这类风险？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431050,"discussion_content":"检查工具有几种，一种是正在写代码时的提示，这个可以写stduio插件，一种是编译期的，类似infer coverity。\n\n这些我们后面也会讲到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543655499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45419,"user_name":"Mr King","can_delete":false,"product_type":"c1","uid":1024151,"ip_address":"","ucode":"F0084F824F74C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/97/7b9f4b52.jpg","comment_is_top":false,"comment_ctime":1543636174,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543636174","product_id":100021101,"comment_content":"bugtags统计的崩溃率算是业内可以的吧？","like_count":0},{"had_liked":false,"id":45415,"user_name":"MrsLEO","can_delete":false,"product_type":"c1","uid":1331358,"ip_address":"","ucode":"6535EAAD1C6A7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/9e/f8d9c6cb.jpg","comment_is_top":false,"comment_ctime":1543635257,"is_pvip":false,"replies":[{"id":"16187","content":"无法监听，但是用户从任务栏挂掉属于后台异常，我们会更关注前台异常。<br><br>对于后台异常也有那么一些参考意义，对同一个应用来说，用户从任务栏挂掉的概率是一样得。所以后台异常率也会稳定在某一个值，假设某一个版本后台异常率暴涨了，我们也要进一步去排查原因","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543655116,"ip_address":"","comment_id":45415,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543635257","product_id":100021101,"comment_content":"还是没明白，怎么监听是不是用户从任务栏滑掉应用这种场景？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431026,"discussion_content":"无法监听，但是用户从任务栏挂掉属于后台异常，我们会更关注前台异常。\n\n对于后台异常也有那么一些参考意义，对同一个应用来说，用户从任务栏挂掉的概率是一样得。所以后台异常率也会稳定在某一个值，假设某一个版本后台异常率暴涨了，我们也要进一步去排查原因","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543655116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45368,"user_name":"Ankhetsin","can_delete":false,"product_type":"c1","uid":1028469,"ip_address":"","ucode":"3CA233D08D4A72","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b1/75/60a71bbd.jpg","comment_is_top":false,"comment_ctime":1543620599,"is_pvip":false,"replies":[{"id":"16199","content":"具体的含义是？能详细描述一下问题吗？","user_name":"作者回复","user_name_real":"张绍文","uid":"1009577","ctime":1543655665,"ip_address":"","comment_id":45368,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543620599","product_id":100021101,"comment_content":"如何自己做某类崩溃，测试失败的场景应对？","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"张绍文","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431001,"discussion_content":"具体的含义是？能详细描述一下问题吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543655665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}