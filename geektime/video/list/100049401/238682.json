{"id":238682,"title":"36 | 实战演练（六）：集成 ELK Stack 日志套件","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-servicemesh\">https://gitee.com/geektime-geekbang/geektime-servicemesh</a></p>","comments":[{"had_liked":false,"id":251881,"user_name":"Ω ٩(ˊᗜˋ*)و","can_delete":false,"product_type":"c3","uid":1466561,"ip_address":"","ucode":"C6574C35685444","user_header":"https://static001.geekbang.org/account/avatar/00/16/60/c1/5ca216ba.jpg","comment_is_top":false,"comment_ctime":1601948829,"is_pvip":false,"replies":[{"id":92161,"content":"可以集中式管理，daemonset方式","user_name":"作者回复","user_name_real":"马若飞","uid":1046394,"ctime":1602230734,"ip_address":"","comment_id":251881,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"filebeat作为每个pod的一个容器？","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"马若飞","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506646,"discussion_content":"可以集中式管理，daemonset方式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602230734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230671,"user_name":"空空如也","can_delete":false,"product_type":"c3","uid":1194238,"ip_address":"","ucode":"342F3A2C8A3C11","user_header":"https://static001.geekbang.org/account/avatar/00/12/38/fe/988bf0d9.jpg","comment_is_top":false,"comment_ctime":1593445214,"is_pvip":false,"replies":[{"id":85340,"content":"索引要根据需求，分开肯定更清醒，我们的系统每个微服务都有自己的索引，对应建立各自的dashboard，毕竟自己的服务要看什么数据还得自己说了算。","user_name":"作者回复","user_name_real":"马若飞","uid":1046394,"ctime":1593574727,"ip_address":"","comment_id":230671,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"我们用的es和kibana是7.3.2版本。\n目前日志收集后，在kibana查看时他们还是觉得不好用，比如每一个系统有一个系统id，我要查询某个系统的日志可能会这么写\nserviceId : oms-service  。在考虑是不是不同的系统建立不同的索引格式。 这样大家用的时候直接选择对应系统的index模式就好了，比如oms-* 就匹配oms-20200629,oms-20200630这几天的日志。\n还有这个列的设置，我是保存了一个常用列的视图，每次查询前要打开之前保存的视图，才会展示我想要的多个列。这个操作不知道能不能默认设置。","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"马若飞","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499987,"discussion_content":"索引要根据需求，分开肯定更清醒，我们的系统每个微服务都有自己的索引，对应建立各自的dashboard，毕竟自己的服务要看什么数据还得自己说了算。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593574727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343332,"user_name":"Geek_e63d9e","can_delete":false,"product_type":"c3","uid":2982173,"ip_address":"","ucode":"6B148801B2A100","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/nN4uel4ia1n8oQW2LryIKT5B5w2kEBQz818IPsBwRoFfib0f24ks36r4jVBp4sXvoelYPe08MxhicDXeOy1N1EN2w/132","comment_is_top":false,"comment_ctime":1650784332,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"我感觉可以用fluentdbit + fluentd + loki 针对istio-proxy 这个容器的日志进行收集 不用收集所有容器的","like_count":0}]}