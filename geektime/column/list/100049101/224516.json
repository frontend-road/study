{"id":224516,"title":"06 |  数据模型无法复用，归根结底还是设计问题","content":"<p>你好，我是郭忆。</p><p>上一节课，我带你了解了数据中台如何管理指标，如果我们把指标比喻成一棵树上的果实，那模型就是这棵大树的躯干，想让果实结得好，必须让树干变得粗壮。</p><p>先来看一幕真实的场景。</p><p>大多数公司的分析师会结合业务做一些数据分析（需要用到大量的数据），通过报表的方式服务于业务部门的运营。但是在数据中台构建之前，分析师经常发现自己没有可以复用的数据，不得不使用原始数据进行清洗、加工、计算指标。</p><p>由于他们大多是非技术专业出身，写的SQL 质量比较差，我甚至见过5层以上的嵌套。这种SQL 对资源消耗非常大，会造成队列阻塞，影响其他数仓任务，会引起数据开发的不满。数据开发会要求收回分析师的原始数据读取权限，分析师又会抱怨数仓数据不完善，要啥没啥，一个需求经常要等一周甚至半个月。分析师与数据开发的矛盾从此开始。</p><p>这个矛盾的根源在于数据模型无法复用，数据开发是烟囱式的，每次遇到新的需求，都从原始数据重新计算，自然耗时。而要解决这个矛盾，就要搞清楚我们的数据模型应该设计成什么样子。</p><h2>什么才是一个好的数据模型设计？</h2><p>来看一组数据，这两个表格是基于元数据中心提供的血缘信息，分别对大数据平台上运行的任务和分析查询（Ad-hoc）进行的统计。</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/19/2b/19c8925b0107dc7ad298d9bb62971d2b.jpg?wh=1142*550\" alt=\"\" title=\"表1 离线调度任务/表统计\"></p><p><img src=\"https://static001.geekbang.org/resource/image/37/d3/371cfb2754297d211d9cd5b2af48fdd3.jpg?wh=1142*732\" alt=\"\" title=\"表2 一周内Ad-hoc 查询统计\"></p><p>下图是数仓分层架构图，方便你回忆数据模型分层的设计架构：</p><p><img src=\"https://static001.geekbang.org/resource/image/91/d5/9199d1545ecf90454882f01868f68ed5.jpg?wh=1142*726\" alt=\"\"></p><p>我们首先来看表1。表1中有2547张未识别分层的表，占总表6049的40%，它们基本没办法复用。 重点是在已识别分层的读表任务中，ODS：DWD：DWS：ADS的读取任务分别是1072：545：187：433，直接读取ODS 层任务占这四层任务总和的47.9%，这说明有大量任务都是基于原始数据加工，中间模型复用性很差。</p><p>我们再来看看表2，在已识别的分层的查询中，ODS：DWD：DWS：ADS的命中的查询分别是892：1008：152：305，有37.8%的查询直接命中ODS层原始数据，说明DWD、DWS、ADS层数据建设缺失严重。尤其是ADS和DWS，查询越底层的表，就会导致查询扫描的数据量会越大，查询时间会越长，查询的资源消耗也越大，使用数据的人满意度会低。</p><p>最后，我们进一步对ODS层被读取的704张表进行分解，发现有382张表的下游产出是DWS，ADS，尤其是ADS达到了323张表，占ODS层表的比例45.8%，说明有大量ODS层表被进行物理深加工。</p><p><strong>通过上面的分析，我们似乎已经找到了一个理想的数仓模型设计应该具备的因素，那就是“数据模型可复用，完善且规范”。</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/d6/b3/d6b10b27dfa4e4cff5a2ca496bd1fbb3.jpg?wh=1142*392\" alt=\"\"></p><h3>如何衡量完善度</h3><p><strong>DWD 层完善度：</strong>衡量DWD层是否完善，最好看ODS层有多少表被DWS/ADS/DM层引用。因为DWD以上的层引用的越多，就说明越多的任务是基于原始数据进行深度聚合计算的，明细数据没有积累，无法被复用，数据清洗、格式化、集成存在重复开发。因此，我提出用跨层引用率指标衡量DWD的完善度。</p><blockquote>\n<p>跨层引用率：ODS层直接被DWS/ADS/DM层引用的表，占所有ODS层表（仅统计活跃表）比例。</p>\n</blockquote><p>跨层引用率越低越好，在数据中台模型设计规范中，我们要求不允许出现跨层引用，ODS层数据只能被DWD 引用。</p><p><strong>DWS/ADS/DM 层完善度：</strong>考核汇总数据的完善度，我认为主要看汇总数据能直接满足多少查询需求（也就是用汇总层数据的查询比例衡量）。如果汇总数据无法满足需求，使用数据的人就必须使用明细数据，甚至是原始数据。</p><blockquote>\n<p>汇总数据查询比例：DWS/ADS/DM层的查询占所有查询的比例。</p>\n</blockquote><p>你要明确的是，这个跟跨层引用率不同，汇总查询比例不可能做到100%，但值越高，说明上层的数据建设越完善，对于使用数据的人来说，查询速度和成本会减少，用起来会更爽。</p><h3>如何衡量复用度</h3><p>数据中台模型设计的核心是追求模型的复用和共享，通过元数据中心的数据血缘图，我们可以看到，一个比较差的模型设计，自下而上是一条线。而一个理想的模型设计，它应该是交织的发散型结构。</p><p><img src=\"https://static001.geekbang.org/resource/image/e4/97/e4038beaead8be1db13aa1c7299c2a97.jpg?wh=1142*417\" alt=\"\"></p><p>我提出用模型引用系数作为指标，衡量数据中台模型设计的复用度。引用系数越高，说明数仓的复用性越好。</p><blockquote>\n<p>模型引用系数：一个模型被读取，直接产出下游模型的平均数量。</p>\n</blockquote><p>比如一张DWD层表被5张DWS 层表引用，这张DWD层表的引用系数就是5，如果把所有DWD层表（有下游表的）引用系数取平均值，则为DWD层表平均模型引用系数，一般低于2比较差，3以上相对比较好（经验值）。</p><h3>如何衡量规范度</h3><p>表1中，超过40%的表都没有分层信息，在模型设计层面，这显然是不规范的。除了看这个表有没有分层，还要看它有没有归属到主题域（例如交易域）如果没有归属主题域，就很难找到这张表，也无法复用。</p><p>其次，你要看表的命名。拿stock这个命名为例，当你看到这个表时，知道它是哪个主题域、业务过程？是全量数据的表，还是每天的增量数据？总的来说，通过这个表名获取的信息太有限了。一个规范的表命名应该包括主题域、分层、表是全量快照，还是增量等信息。</p><p>除此之外，如果在表A中用户ID的命名是UserID，在表B中用户ID 命名是ID，就会对使用者造成困扰，这到底是不是一个东西。所以我们要求相同的字段在不同的模型中，它的命名必须是一致的。</p><p><strong>讲了这么多，你要如何吸收经验呢？在这里，我给你几点建议。</strong></p><ul>\n<li>你可以拿着这些指标去评估一下，自己的数仓现状如何。</li>\n<li>然后制订一些针对性的改进计划，比如把这些不规范命名的表消灭掉，把主题域覆盖的表比例提高到90%以上。</li>\n<li>在尝试完一段时间的模型重构和优化后，再拿着这些指标去测一测是不是真的变好了。我见过很多数据开发在向上级汇报工作时，喜欢用重构了多少模型说明工作成果，很多老大会想，这些重构到底对数据建设有多少帮助？有没有一些量化的指标可以衡量？<strong>我想有上面的知识，你可以应对这个问题了。</strong></li>\n</ul><p>现在你知道什么是好的数仓设计了，可目前已经存在了大量烟囱式开发，具体怎么做才能让它变成一个数据中台呢？</p><h2>如何从烟囱式的小数仓到共享的数据中台</h2><p>建设数据中台本质就是构建企业的公共数据层，把原先分散的、烟囱式的、杂乱的小数仓，合并成一个可共享、可复用的数据中台（我在<a href=\"https://time.geekbang.org/column/article/220290\">03讲</a>提到过，建议你回顾一下）。结合我在网易的实践经验，我给你几点建议。</p><p><strong>第一，接管ODS层，控制源头。</strong></p><p>ODS是业务数据进入数据中台的第一站，是所有数据加工的源头，控制住源头，才能从根本上防止一个重复的数据体系的出现。</p><p>数据中台团队必须明确职责，全面接管ODS 层数据，从业务系统的源数据库权限入手，确保数据从业务系统产生后进入数据仓库时，只能在数据中台保持一份。这个可以跟业务系统数据库管理者达成一致，只有中台团队的账号才能同步数据。</p><p>ODS层表的数据必须和数据源的表结构、表记录数一致，高度无损，对于ODS 层表的命名采用ODS_业务系统数据库名_业务系统数据库表名方式，比如ods_warehous_stock，warehous是业务系统数据库名，stock是该库下面的表名。</p><p><strong>第二，划分主题域，构建总线矩阵。</strong></p><p>主题域是业务过程的抽象集合。可能这么讲，稍微有点儿抽象，但其实业务过程就是企业经营过程中一个个不可拆分的行为事件，比如仓储管理里面有入库、出库、发货、签收，都是业务过程，抽象出来的主题域就是仓储域。</p><p><img src=\"https://static001.geekbang.org/resource/image/17/cc/1724055dd6eb3911cee9084d9a674ecc.jpg?wh=1142*718\" alt=\"\" title=\"表3 电商业务的主题域划分\"></p><p>主题域划分要尽量涵盖所有业务需求，保持相对稳定性，还具备一定的扩展性（新加入一个主题域，不影响已经划分的主题域的表）。</p><p>主题域划分好以后，就要开始构建总线矩阵，明确每个主题域下的业务过程有哪些分析维度，举个例子：</p><p><img src=\"https://static001.geekbang.org/resource/image/34/ec/348e85b3a97e90345df4bce09cbf5aec.jpg?wh=1142*381\" alt=\"\" title=\"表4 交易域的总线矩阵\"></p><p><strong>第三，构建一致性维度。</strong></p><p>售后团队的投诉工单数量有针对地区的分析维度，而配送团队的配送延迟也有针对地区的分析维度，你想分析因为配送延迟导致的投诉增加，但是两个地区的分析维度包含内容不一致，最终会导致一些地区没办法分析。所以我们构建全局一致性的维表，确保维表只存一份。</p><p><strong>维度统一的最大的难题在于维度属性（如果维度是商品，那么商品类别、商品品牌、商品尺寸等商品的属性，我们称为维度属性）的整合。</strong>是不是所有维度属性都要整合到一个大的维表中，也不见得，我给你几个建议。</p><ul>\n<li>\n<p>公共维度属性与特有维度属性拆成两个维表。在自营平台中，通常也会有一些第三方的商家入驻，但是数量很少。大部分商品其实都没有店铺的属性，这种情况，就不建议将店铺和商品的其他维度属性，比如商品类别、品牌设计成一个维表。</p>\n</li>\n<li>\n<p>产出时间相差较大的维度属性拆分单独的维表，比如有些维度属性产出时间在凌晨2点，有些维度属性产出时间在凌晨6点，那2点和6点的就可以拆成两个维表，确保核心维表尽早产出。</p>\n</li>\n<li>\n<p>出于维表稳定性产出的考虑，你可以将更新频繁的和变化缓慢的进行拆分，访问频繁的和访问较少的维表进行拆分。</p>\n</li>\n</ul><p>对于维表的规范化命名，建议你用“DIM_主题域_描述_分表规则”方式。<strong>分表你可以这样理解：</strong>一个表存储几千亿行记录实在是太大了，所以需要把一个表切割成很多小的分区，每天或者每周，随着任务被调度，会生成一个分区。我提供给你一个常见的分区规则（这个规则你在用的时候，查阅就可以了）。</p><p><img src=\"https://static001.geekbang.org/resource/image/ff/b9/ff40520c4716d28ca0d220a997f819b9.jpg?wh=1142*419\" alt=\"\"></p><p><strong>第四，事实表整合。</strong></p><p>我觉得事实表整合遵循的最基本的一个原则是，统计粒度必须保持一致，不同统计粒度的数据不能出现在同一个事实表中。来看一个例子：</p><p><img src=\"https://static001.geekbang.org/resource/image/78/97/789d5b5f83405eba77e8cdbb6b1ce997.jpg?wh=1142*393\" alt=\"\"></p><p>在数据中台构建前，供应链部门、仓储部门和市场部门都有一些重复的事实表，我们需要将这些重复的内容进行去除，按照交易域和仓储域，主题域的方式进行整合。</p><p><img src=\"https://static001.geekbang.org/resource/image/cb/55/cb15353c0724c59ab0b24b64057cb055.jpg?wh=1142*772\" alt=\"\"></p><p>对于仓储部门和供应链部门都有的库存明细表，因为仓储部门的统计粒度是商品加仓库，而供应链部门的只有商品，所以原则上两个表是不能合并，而是应该独立存在。</p><p><img src=\"https://static001.geekbang.org/resource/image/fe/5b/fe81e5b9a4f290563b850d73022a865b.jpg?wh=1142*596\" alt=\"\"></p><p>对于市场部门和供应链部门的两张下单明细表，因为统计粒度都是订单级别，都归属于交易域下的下单业务过程，所以可以合并为一张事实表。</p><p>除此之外，还应该考虑将不全的数据补齐。对于ODS 层直接被引用产出DWS/ADS/DM层的任务，通过血缘，找到任务清单，逐个进行拆解。没有ODS对应的DWD的，应该生成DWD表，对于已经存在的，应该迁移任务，使用DWD层表。</p><p><img src=\"https://static001.geekbang.org/resource/image/c3/c5/c3f514d99386ad2731f4d50d8b3ed8c5.jpg?wh=1142*692\" alt=\"\"></p><p>DWD/DWS/ADS/DM的命名规则适合采用“[层次][主题][子主题][内容描述][分表规则]”的命名方式。</p><p><strong>第五，模型开发。</strong></p><p>模型设计完成后，就进入模型开发阶段，我想提几个你需要注意的点：</p><ol>\n<li>所有任务都必须严格配置任务依赖，如果没有配置任务依赖，会导致前一个任务没有正常产出数据的情况下，后一个任务被调度起来，基于错误的数据空跑，浪费资源，同时增加了排查故障的复杂度；</li>\n<li>任务中创建的临时表，在任务结束前应该删除，如果不删除，会发现有大量的临时表存在，占用空间；</li>\n<li>任务名称最好跟表名一致，方便查找和关联；</li>\n<li>生命周期的管理，对于ODS和DWD，一般尽可能保留所有历史数据，对于<br>\nDWS/ADS/DM 需要设置生命周期，7～30天不等；</li>\n<li>DWD 层表宜采用压缩的方式存储，可用lzo压缩。</li>\n</ol><p><strong>第六，应用迁移。</strong></p><p>最后一步就是应用的迁移，这个过程的核心是要注意数据的比对，确保数据的完全一致，然后进行应用迁移，删除老的数据表。</p><p>总的来说，建设数据中台不是一口气就能吃成一个胖子，它的建设往往是滚雪球的方式，随着一个个应用的迁移，中台的数据也越来越丰满，发挥的价值也越来越大。</p><h2>数仓建模工具EasyDesign</h2><p>当然了，这些步骤的实现，离不开一个好用的工具作为支撑，为了规范化数据模型的设计，我们研发了EasyDesign的模型设计产品，让这些流程实现系统化管理。而我希望你了解如何去设计这个工具，或者在选用工具的时候应该考虑有哪些功能。</p><p><img src=\"https://static001.geekbang.org/resource/image/74/b5/74c84414f5e004cbc1351c6e77d1e0b5.jpg?wh=1142*683\" alt=\"\"></p><p>EasyDesign 构建于元数据中心之上，通过API调用元数据中心的数据血缘接口，结合数仓模型设计的指标，给出了模型设计度量。</p><p><img src=\"https://static001.geekbang.org/resource/image/64/04/6493f76676d8d40beb8a84c2554d0a04.jpg?wh=1142*665\" alt=\"\"></p><p>EasyDesign按照主题域、业务过程、分层的方式管理所有的模型。</p><p><img src=\"https://static001.geekbang.org/resource/image/50/bc/50849628d758e95666ee5d3cce9ed7bc.jpg?wh=1142*667\" alt=\"\"></p><p>它还提供了维度、度量和字段基础字典的管理，同时具备模型设计审批流程的控制。</p><h2>课堂总结</h2><p>本节课，我结合自己的经验，带你了解了数据中台的模型设计。从确立设计目标，到通过一系列步骤，将一个个分散的、杂乱的、烟囱式的小数仓逐步规整到一个可复用、可共享的数据中台，最后通过产品化的方式实现系统化的管理。在最后，我想再强调几个点：</p><ul>\n<li>完善度、复用度和规范度构成了衡量数据中台模型设计的度量体系，可以帮助你评估数仓设计的好坏。</li>\n<li>维度设计是维度建模的灵魂，也是数据中台模型设计的基础，维度设计的核心是构建一致性维度。</li>\n<li>事实表的统计粒度必须保持一致，不同统计粒度的数据不能出现在同一个事实表中。</li>\n</ul><p>你要知道，数据中台的构建往往需要花费半年甚至一年以上的时间，但是数据中台建成后，对研发效率的提升效果非常明显，在网易电商业务中，中台构建后相比构建前，数据需求的平均交付时间从一周缩短到3天内，需求响应速度的提升，为企业运营效果提升提供了数据支撑。我相信通过数据中台的构建，你所在企业的数据研发效率也会得到大幅度的提升。</p><p><img src=\"https://static001.geekbang.org/resource/image/05/4b/056037d1806f48243643a3689a89e14b.jpg?wh=1142*750\" alt=\"\"></p><h2>思考时间</h2><p>在数据中台实际实施落地的过程中，数据团队不但要建设公共数据层，形成数据中台，还要承担着巨大的新需求的压力。而且，往往需求的优先级都高于建设公共数据层的优先级，导致中台建设的进度难以保障。 对这个问题，你有什么解决方法呢？</p><p>最好，感谢你的阅读，如果这节课让你有所收获，也欢迎你将它分享给更多的朋友。</p>","comments":[{"had_liked":false,"id":206825,"user_name":"大尾巴老猫","can_delete":false,"product_type":"c1","uid":1260089,"ip_address":"","ucode":"246AB375244773","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/39/72d81605.jpg","comment_is_top":false,"comment_ctime":1586941741,"is_pvip":true,"replies":[{"id":"77308","content":"不错，总结的挺好的，其实我只想再补充一点，就是为了保障数据中台的推进速度，可以尝试成立专人团队，这些人的目标明确就是中台构建，模型的重构和整合，指标的梳理。这些人不接业务需求，这样可以避免日常业务需求对数据团队的中台建设的干扰。否则的话，数据中台的建设进度，经常会受到业务需求压力的干扰，而且如果没有明确的KPI，或者KPI权重不够大，中台建设的动力也会不足。<br><br>感谢你的阅读，总结的很棒！","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587001923,"ip_address":"","comment_id":206825,"utype":1}],"discussion_count":1,"race_medal":0,"score":"121846026029","product_id":100049101,"comment_content":"1、先满足需求（活下去），再研发公共数据层（构建美好未来）。<br>2、获得高层领导的支持，以获得更多的研发资源。<br>3、在满足业务需求的过程中，根据业务需求不断对公共数据层进行迭代和优化。<br>4、随着时间的推移 ，越来越多的日常业务需求可以用公共数据层（中台来完成）。<br>5、日常业务需求开发和公共数据层构建是相互促进的循环。","like_count":29,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491916,"discussion_content":"不错，总结的挺好的，其实我只想再补充一点，就是为了保障数据中台的推进速度，可以尝试成立专人团队，这些人的目标明确就是中台构建，模型的重构和整合，指标的梳理。这些人不接业务需求，这样可以避免日常业务需求对数据团队的中台建设的干扰。否则的话，数据中台的建设进度，经常会受到业务需求压力的干扰，而且如果没有明确的KPI，或者KPI权重不够大，中台建设的动力也会不足。\n\n感谢你的阅读，总结的很棒！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587001923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209934,"user_name":"夏天松","can_delete":false,"product_type":"c1","uid":1072831,"ip_address":"","ucode":"71ECF16A1D4923","user_header":"https://static001.geekbang.org/account/avatar/00/10/5e/bf/3989408a.jpg","comment_is_top":false,"comment_ctime":1587637738,"is_pvip":false,"replies":[{"id":"78970","content":"你好，关于每一层的表的命名规范，我在文章中都有提到。<br><br>ODS: ODS_ 业务系统数据库名 _ 业务系统数据库表名<br>DWD&#47;DWS&#47;ADS&#47;DM 的命名规则适合采用“[层次][主题][子主题][内容描述][分表规则]”的命名方式。<br>DIM:DIM_ 主题域 _ 描述 _ 分表规则<br><br>指标命名规范中，对于原子指标，指标名称适合用“动作 + 度量”的命名方式（比如注册用户数、购买用户数），标识的命名用英文简写或者汉语拼音缩写比较好。对于派生指标，指标名称应该严格遵循“时间周期 + 统计粒度 + 修饰词 + 原子指标”的命名方式，标识命名要用“修饰词 _ 原子指标 _ 时间周期”的方式。<br><br>感谢你的阅读~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588156729,"ip_address":"","comment_id":209934,"utype":1}],"discussion_count":1,"race_medal":0,"score":"87486983658","product_id":100049101,"comment_content":"老师，能否有一个比较全的各层的表命名及维度表命名、指标命名规范？","like_count":21,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492898,"discussion_content":"你好，关于每一层的表的命名规范，我在文章中都有提到。\n\nODS: ODS_ 业务系统数据库名 _ 业务系统数据库表名\nDWD/DWS/ADS/DM 的命名规则适合采用“[层次][主题][子主题][内容描述][分表规则]”的命名方式。\nDIM:DIM_ 主题域 _ 描述 _ 分表规则\n\n指标命名规范中，对于原子指标，指标名称适合用“动作 + 度量”的命名方式（比如注册用户数、购买用户数），标识的命名用英文简写或者汉语拼音缩写比较好。对于派生指标，指标名称应该严格遵循“时间周期 + 统计粒度 + 修饰词 + 原子指标”的命名方式，标识命名要用“修饰词 _ 原子指标 _ 时间周期”的方式。\n\n感谢你的阅读~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588156729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209428,"user_name":"毛聪","can_delete":false,"product_type":"c1","uid":1950404,"ip_address":"","ucode":"7119424A7A4E68","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJHUiaEqkvVd7ByrjHznN9mPqPskLUtUHdliaxq7MVDicEoWQqOB9f8w2BIdhn5AP5QGiaAhXcRdrIZ7w/132","comment_is_top":false,"comment_ctime":1587548160,"is_pvip":false,"replies":[{"id":"78987","content":"你好，你问的问题，我估计很多人都有这样的疑问。<br><br>dws 并不是说一定要通过ads ，dws 也可以被应用直接访问的。在我们的数据中台建设中，一般只有一个应用专属的表，不能被其他应用使用的，才归入ads，如果可以被多个应用共享的，我们还是归入dws。<br><br>感谢你的阅读，也感谢你提的好问题，欢迎继续提问~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588159526,"ip_address":"","comment_id":209428,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53127155712","product_id":100049101,"comment_content":"郭老师好，我想问个模型分层的问题，我计算的一个指标从dwd层到dws层后就可以直接给到应用层了，那这个汇总表到底算是dws层的表还是ads层的表？","like_count":12,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492796,"discussion_content":"你好，你问的问题，我估计很多人都有这样的疑问。\n\ndws 并不是说一定要通过ads ，dws 也可以被应用直接访问的。在我们的数据中台建设中，一般只有一个应用专属的表，不能被其他应用使用的，才归入ads，如果可以被多个应用共享的，我们还是归入dws。\n\n感谢你的阅读，也感谢你提的好问题，欢迎继续提问~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588159526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206656,"user_name":"麻婆豆腐","can_delete":false,"product_type":"c1","uid":1731885,"ip_address":"","ucode":"F371FE05D081D6","user_header":"https://static001.geekbang.org/account/avatar/00/1a/6d/2d/de41f9cf.jpg","comment_is_top":false,"comment_ctime":1586914366,"is_pvip":true,"replies":[{"id":"77358","content":"你好，可以基于数据血缘来实现，一个表的产出任务以及它的下游引用任务，数据血缘都是有的。<br><br>对于分析查询，目前我们有两个平台，一个是网易有数，类似tableau，一个是自助分析平台，就是执行SQL的，我们把这两个平台的日志执行信息会拿出来进行离线的分析和统计，然后去看每个query查询了哪些表。<br><br>如果你是tableau，可能没这么方便，不过可以试试从impala入手，impala侧日志中是有SQL信息，可以抓出来分析统计。对于spark和hive，可以基于数据血缘来实现。<br><br>感谢你的阅读~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587006933,"ip_address":"","comment_id":206656,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40241620030","product_id":100049101,"comment_content":"郭老师好，请教一个小白的问题，运行任务和分析查询的统计是怎么统计的呢？我们现在的平台有用hive直接查的，有tableau连impala查询的，还有spark定时任务，各种各样的，怎么才能统计出像您这样的表格呢。也想做下自己的模型指标分析。十分感谢！","like_count":9,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491856,"discussion_content":"你好，可以基于数据血缘来实现，一个表的产出任务以及它的下游引用任务，数据血缘都是有的。\n\n对于分析查询，目前我们有两个平台，一个是网易有数，类似tableau，一个是自助分析平台，就是执行SQL的，我们把这两个平台的日志执行信息会拿出来进行离线的分析和统计，然后去看每个query查询了哪些表。\n\n如果你是tableau，可能没这么方便，不过可以试试从impala入手，impala侧日志中是有SQL信息，可以抓出来分析统计。对于spark和hive，可以基于数据血缘来实现。\n\n感谢你的阅读~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587006933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1596908,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5d/ec/3c78de6e.jpg","nickname":"蒋良俊","note":"","ucode":"E1FA95BE36D110","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233806,"discussion_content":"Statistics for Hive can be numbers of rows of tables or partitions and the histograms of interesting columns. Statistics are used by the cost functions of the query optimizer to generate query plans for the purpose of query optimization.\n\nIf your cluster has Impala then you can use the Impala implementation to compute statistics. The Impala implementation to compute table statistics is available in CDH 5.0.0 or higher and in Impala version 1.2.2 or higher. The Impala implementation of COMPUTE STATS requires no setup steps and is preferred over the Hive implementation. See Overview of Table Statistics. If you are running an older version of Impala, you can collect statistics on a Hive table by running the following command from a Beeline client connected to HiveServer2:\nsource: https://docs.cloudera.com/documentation/enterprise/5-9-x/topics/cm_mc_hive_table_stats.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586946207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207269,"user_name":"泡泡鱼大王","can_delete":false,"product_type":"c1","uid":1943518,"ip_address":"","ucode":"6D40AAE7158114","user_header":"https://static001.geekbang.org/account/avatar/00/1d/a7/de/0de6992d.jpg","comment_is_top":false,"comment_ctime":1587040015,"is_pvip":false,"replies":[{"id":"77734","content":"说的好，中台对数据开发的要求真的是挺高的，当然，也需要一些好用的工具产品来降低他们的工作量和复杂度，一个优秀的PM当然也是必须的。<br><br>我一直强调一个观点，不要用技术的思维看待数据中台，要用管理的思维，数据中台它是一个系统性的工程，对整个数据建设是一次革命！<br><br>感谢你的阅读，期待与你在留言区再次相遇，也期待你继续发表你的观点，很棒！","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587306014,"ip_address":"","comment_id":207269,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31651811087","product_id":100049101,"comment_content":"首先高优先级需求一定是先开发。<br>我觉得压缩空间在中台项目本身，<br>1.尽早搭建共享数仓部分。<br>措施：<br>技术上把各个小数仓的元信息和数据模型 通过自动化采集到同一个数据库中，进行分析，提炼指标。分析复用率。<br>业务上拉上各个部门核心BA，进行指标砍伐和提炼。<br>优先共享数仓产出，同时也应该按照优先级顺序。 高优先级的共享数据仓尽快产出，这样能用上，大家都会觉得中台的重要性。<br>2.中台开发过程挑选技术能手和业务能手快速完成迭代。<br>3.中台结束应该由业务方发起验收，减少建模的链路提高易用性是核心，这样才能让人人都用上中台。<br>4.后期运维需要建立强大监控环节，自顶向下监控资源，减少成本开销。<br>总结：技术上按照数仓设计就可以，中台的难点是对人员的业务和技术能力要求极高，同时需要一个优秀的PM。<br><br><br>","like_count":7,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492063,"discussion_content":"说的好，中台对数据开发的要求真的是挺高的，当然，也需要一些好用的工具产品来降低他们的工作量和复杂度，一个优秀的PM当然也是必须的。\n\n我一直强调一个观点，不要用技术的思维看待数据中台，要用管理的思维，数据中台它是一个系统性的工程，对整个数据建设是一次革命！\n\n感谢你的阅读，期待与你在留言区再次相遇，也期待你继续发表你的观点，很棒！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587306014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219548,"user_name":"Weehua","can_delete":false,"product_type":"c1","uid":1170152,"ip_address":"","ucode":"91C0C2699D4EE4","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/e8/d49dfa94.jpg","comment_is_top":false,"comment_ctime":1590040081,"is_pvip":false,"replies":[{"id":"81101","content":"感谢你的认可，也非常开心，我们的这些经验能够对你有所帮助。我真心觉得，数据建设，真的是磨刀不误砍柴工，工具能力的建设，可以起到事半功倍的效果，做任何一项工作，都要想着怎么让这项工作能够有积累，堆人往往能够解决一些前期的问题，但是不是长久的方案。<br><br>","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1590063178,"ip_address":"","comment_id":219548,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27359843857","product_id":100049101,"comment_content":"郭老师这篇文章非常非常棒！和我们的工作内容非常match。我们刚开始也是被各个业务的报表需求压的喘不过来气，曾经一度全体人员全部做报表。这个过程中，我和高层沟通，建立了数据平台组，引入了相关人才，花了3个月的时间把调度平台，API平台搞了起来，现在想想这些就是中台的组建。马上大大提高了开发效率和稳定性。后续形成良性循环，平台建设不断完善，开发效率和质量逐步提高。但数仓怎么衡量好坏一直是高层的关注点，这篇文章给了我们很大启发，其中ods的查询使用占比确实是一个很好的指标，其他指标我会引入团队，加强数仓的建设。结合前面的几篇文章，虽然我们没有做中台这件事，但是组织架构和工作内容已经在隐形的做中台了。最后，再次感谢郭老师的文章，非常赞！","like_count":6,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495849,"discussion_content":"感谢你的认可，也非常开心，我们的这些经验能够对你有所帮助。我真心觉得，数据建设，真的是磨刀不误砍柴工，工具能力的建设，可以起到事半功倍的效果，做任何一项工作，都要想着怎么让这项工作能够有积累，堆人往往能够解决一些前期的问题，但是不是长久的方案。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590063178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219472,"user_name":"louShang","can_delete":false,"product_type":"c1","uid":1011654,"ip_address":"","ucode":"881541DAB49E5C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6f/c6/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1590029336,"is_pvip":false,"replies":[{"id":"81538","content":"你好，<br><br>维度建模只是模型设计的一种方法，当然你也可以选择其他的模型构建方法，之所以选择维度建模，是因为其是从业务需求场景出发，能够适应业务场景的快速变化。举个例子，在零售场景中，门店是一个维度，可以基于门店，分析销售额，原材料，如果又有一个新的场景，那维度本身还是门店。<br><br>维度建模还有一个好处，就是通过一致性维度，可以进行关联分析。比如门店的销售额和门店维度下的商品数量，可以做关联的分析。维度的管理很重要，核心是建立一致性维表。<br><br>指标的可分析维度的设计很重要，直接关系到后续模型的设计，需要哪些维度。所以在指标系统里面，必须有指标的可分析维度项。 提出指标需求的业务，需要先梳理出，你要的这个指标，需要哪些可分析维度，然后在模型设计阶段，需要把这些指标和可分析维度固化到模型中。<br><br>感谢你的提问~ 希望我们的交流可以帮助解决你的疑惑~祝好~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1590410478,"ip_address":"","comment_id":219472,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18769898520","product_id":100049101,"comment_content":"为什么要维度建模,  为什么要管理维度  ?  没有看到维度建模和管理维度的好处 <br>在管理好数仓的业务线、主题域 、业务过程之后, 可以直接开展指标的建设和管理, 维度看起来更像一个辅助指标建设的一个可选项, 是否维度是有管理的, 貌似并不重要 , 在创建原子指标的时候, 只要能选取到事实明细表的维度就可以?  ","like_count":4,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495819,"discussion_content":"你好，\n\n维度建模只是模型设计的一种方法，当然你也可以选择其他的模型构建方法，之所以选择维度建模，是因为其是从业务需求场景出发，能够适应业务场景的快速变化。举个例子，在零售场景中，门店是一个维度，可以基于门店，分析销售额，原材料，如果又有一个新的场景，那维度本身还是门店。\n\n维度建模还有一个好处，就是通过一致性维度，可以进行关联分析。比如门店的销售额和门店维度下的商品数量，可以做关联的分析。维度的管理很重要，核心是建立一致性维表。\n\n指标的可分析维度的设计很重要，直接关系到后续模型的设计，需要哪些维度。所以在指标系统里面，必须有指标的可分析维度项。 提出指标需求的业务，需要先梳理出，你要的这个指标，需要哪些可分析维度，然后在模型设计阶段，需要把这些指标和可分析维度固化到模型中。\n\n感谢你的提问~ 希望我们的交流可以帮助解决你的疑惑~祝好~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590410478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211219,"user_name":"你好","can_delete":false,"product_type":"c1","uid":1945987,"ip_address":"","ucode":"F6ED43EF5FD164","user_header":"https://static001.geekbang.org/account/avatar/00/1d/b1/83/c6dd1322.jpg","comment_is_top":false,"comment_ctime":1587916402,"is_pvip":false,"replies":[{"id":"78866","content":"你好， 有一些压缩算法是支持split的，例如lzo，对于大文件来说比较合适，在保证压缩效率的前提下，有着相对稳定的压缩比。<br><br>我在第8讲中，会重点介绍通过数据压缩，优化存储成本的问题。欢迎你继续阅读~<br><br>感谢你的阅读，我们下一次再见~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588072207,"ip_address":"","comment_id":211219,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18767785586","product_id":100049101,"comment_content":"老师，hive中数据压缩和分片是对立的，两者怎么进行实际使用？","like_count":4,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493222,"discussion_content":"你好， 有一些压缩算法是支持split的，例如lzo，对于大文件来说比较合适，在保证压缩效率的前提下，有着相对稳定的压缩比。\n\n我在第8讲中，会重点介绍通过数据压缩，优化存储成本的问题。欢迎你继续阅读~\n\n感谢你的阅读，我们下一次再见~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588072207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206768,"user_name":"北野豪横","can_delete":false,"product_type":"c1","uid":1915698,"ip_address":"","ucode":"275229F4B048D0","user_header":"https://static001.geekbang.org/account/avatar/00/1d/3b/32/3d0cc333.jpg","comment_is_top":false,"comment_ctime":1586931342,"is_pvip":false,"replies":[{"id":"77748","content":"首先，感谢你的认可。看到对你的实际工作有所帮助和启发，我感到很高兴。<br><br>你说的非常正确，业务和数据中台之间本来就要相互反馈，业务人员经常去查一些明细表，那我们中台就要考虑，是不是需要完善汇总层的模型。<br><br>你说数据中台对从业人员要求高，我也非常赞同，数据中台从业务中来，最终必须要回到业务。数据中台团队独立于业务，但是绝对不能脱离业务。我在第13讲中，会详细的介绍，感谢你在留言区发表的想法，非常棒！<br><br>期待与你再次相遇~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587307308,"ip_address":"","comment_id":206768,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14471833230","product_id":100049101,"comment_content":"目前在做一个全新的领域，警务中台系统，跟原本的电商模式有着很大差别，本来一头雾水的项目，读了老师的课有点云开见月明的意思，提出一点个人的感想，不论是模型，还是输出的指标，个人感觉越来越多的应该从底层业务出发，自底向上来驱动整个业务中台，这里需要模型与业务与数据的多项循环反馈机制才能逐渐完善整个中台，如何将指标模块化，如何让各种模型即产中中间层结果，又产出直接结果，形成真正的积木式中台，让一线最懂业务的业务人员能够尽情发挥，搭建出自己想要的结果，形成逐层累积。<br>2.同时还要考虑这些模块和指标以及管理真的是我提了一个醒，目前是自己负责一个中台项目的指标模型建设，业务是自己，模型是自己，指标也是自己，但是当个多人参与进来要如果管理是我要学习的地方。<br>3.最后感慨一下，数据中台对从业人员的要求真的是高，要懂数据，懂运营，懂业务，懂模型，还要兼顾公司内过个部门的协同和沟通，不过也显示除了，未来人才的趋势就是全方位的人才才能真正立足于未来互联网。","like_count":3,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491896,"discussion_content":"首先，感谢你的认可。看到对你的实际工作有所帮助和启发，我感到很高兴。\n\n你说的非常正确，业务和数据中台之间本来就要相互反馈，业务人员经常去查一些明细表，那我们中台就要考虑，是不是需要完善汇总层的模型。\n\n你说数据中台对从业人员要求高，我也非常赞同，数据中台从业务中来，最终必须要回到业务。数据中台团队独立于业务，但是绝对不能脱离业务。我在第13讲中，会详细的介绍，感谢你在留言区发表的想法，非常棒！\n\n期待与你再次相遇~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587307308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2014938,"avatar":"","nickname":"Geek_28542a","note":"","ucode":"2537C0842F6990","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273642,"discussion_content":"哇，我也在做这方面的内容，可以留个联系方式交流下吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590483400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214915,"user_name":"bwq","can_delete":false,"product_type":"c1","uid":1374721,"ip_address":"","ucode":"5CB4A98D9C9F7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/fa/01/f7a2e56c.jpg","comment_is_top":false,"comment_ctime":1588847458,"is_pvip":false,"replies":[{"id":"80230","content":"你好，我来回到一下你的两个问题：<br>1. 原始数据在hdfs上追加写，然后定期Merge刷新的，所以这种不能做到upsert，实时更新。对于离线数据处理来说，这样就够了。<br>2. dim表根据时间分区，是存在dim表变化的情况，比如每日有一个商品快照分区。<br><br>","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1589372974,"ip_address":"","comment_id":214915,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10178782050","product_id":100049101,"comment_content":"老师,<br>想问几个问题:<br>1<br>dim商品表, 如果商品属性发生变动, 比如价格更改了, 要更改dim商品表吗 ? 那这个更改要如何处理 ?<br>我理解在大数据体系中是不能 update 记录的.<br>还是在 dwd 表插入一条变更记录 ? 那如何体现商品的最新价格 ?<br>2<br>dim表为什么要根据时间分区分表 ?<br>比如在 ads 层, 在 join 某个 dim商品表获取商品属性时, 我觉得是不会关心商品分区时间的.","like_count":2,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494241,"discussion_content":"你好，我来回到一下你的两个问题：\n1. 原始数据在hdfs上追加写，然后定期Merge刷新的，所以这种不能做到upsert，实时更新。对于离线数据处理来说，这样就够了。\n2. dim表根据时间分区，是存在dim表变化的情况，比如每日有一个商品快照分区。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589372974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208257,"user_name":"小桥流水","can_delete":false,"product_type":"c1","uid":1011273,"ip_address":"","ucode":"C1582AE2FB5299","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/49/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1587309384,"is_pvip":true,"replies":[{"id":"78151","content":"非常高兴可以帮助到你~<br><br>感谢你的阅读，期待与你再次相遇~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587523402,"ip_address":"","comment_id":208257,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10177243976","product_id":100049101,"comment_content":"领导安排落地数仓分层定义及可实在落地 可度量 在这找到答案了<br>1、明确每层都有哪些表<br>2、通过分析执行sql知道 哪些表的使用情况 计算出 使用率<br>3、指标体系建设明确了业务指标和表的关系<br>4，血缘关系分析 明确了表之间的关系<br>5、表的采集知道表的属性<br>6、数据特征标签明确表使用的热度<br>7、数据地图，利于业务it 可视化查询了解数据资产","like_count":2,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492389,"discussion_content":"非常高兴可以帮助到你~\n\n感谢你的阅读，期待与你再次相遇~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587523402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207093,"user_name":"臧洪友","can_delete":false,"product_type":"c1","uid":1197645,"ip_address":"","ucode":"99D232D545135C","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/4d/3baeb97a.jpg","comment_is_top":false,"comment_ctime":1587005724,"is_pvip":false,"replies":[{"id":"77740","content":"你好，我来回到一下你的问题。<br><br>维表和事实表，可以通过ID关联，构建星型模型，甚至维度本身也可以构建有层次关系的星座模型。<br><br>在数据中台的集市层，或者汇总层，为了方便使用者使用，我们会做一些维度退化的设计，降低Join的次数，因为通过id关联，必须就会是涉及到join，join操作对计算引擎的性能要求比较高，所以会把一些常用的维度属性退化到事实表中，这个还是主要取决于业务场景和需求。<br><br>感谢你的阅读，期待与你再次相遇~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587307015,"ip_address":"","comment_id":207093,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10176940316","product_id":100049101,"comment_content":"郭老师,刚接触数据中台,提的问题可能还比较初级,维表是一个基于的事实表的维表吗?他们之间是什么关系?需要ID关联吗?还是放到一张大的宽表中?多谢了!","like_count":2,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492008,"discussion_content":"你好，我来回到一下你的问题。\n\n维表和事实表，可以通过ID关联，构建星型模型，甚至维度本身也可以构建有层次关系的星座模型。\n\n在数据中台的集市层，或者汇总层，为了方便使用者使用，我们会做一些维度退化的设计，降低Join的次数，因为通过id关联，必须就会是涉及到join，join操作对计算引擎的性能要求比较高，所以会把一些常用的维度属性退化到事实表中，这个还是主要取决于业务场景和需求。\n\n感谢你的阅读，期待与你再次相遇~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587307015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206647,"user_name":"JohnT3e","can_delete":false,"product_type":"c1","uid":1063982,"ip_address":"","ucode":"CF4AAAC933529C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLdWHFCr66TzHS2CpCkiaRaDIk3tU5sKPry16Q7ic0mZZdy8LOCYc38wOmyv5RZico7icBVeaPX8X2jcw/132","comment_is_top":false,"comment_ctime":1586913228,"is_pvip":false,"replies":[{"id":"77359","content":"谢谢你的鼓励，期望能够对你后续的工作有所帮助和启发~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587006952,"ip_address":"","comment_id":206647,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10176847820","product_id":100049101,"comment_content":"目前公司数据中台建设已有一年有余，今天的内容有很多共鸣之处，收获颇多。","like_count":2,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491852,"discussion_content":"谢谢你的鼓励，期望能够对你后续的工作有所帮助和启发~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587006952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241257,"user_name":"追梦","can_delete":false,"product_type":"c1","uid":1183831,"ip_address":"","ucode":"54C6E76E8FE033","user_header":"https://static001.geekbang.org/account/avatar/00/12/10/57/1adfd4f7.jpg","comment_is_top":false,"comment_ctime":1597226486,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5892193782","product_id":100049101,"comment_content":"郭老师，ods层和dwd层 基本上都是全范围数据。这个保存周期的区别是什么样的呢？另一个问题，请问每一层都采取什么存贮介质和存储方式呢","like_count":1,"discussions":[{"author":{"id":1008421,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/63/25/72877cfe.jpg","nickname":"大熊喵","note":"","ucode":"3189226C12BBD1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558768,"discussion_content":"ods肯定要常删啊，你保存它干嘛，明细有dwd就够了，而且即使你要用ods做数据质量，也不需要保存太久","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648457419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234063,"user_name":"风轻云淡","can_delete":false,"product_type":"c1","uid":1495190,"ip_address":"","ucode":"95C3FC7D3DACCF","user_header":"https://static001.geekbang.org/account/avatar/00/16/d0/96/c8cb7862.jpg","comment_is_top":false,"comment_ctime":1594569339,"is_pvip":false,"replies":[{"id":"87126","content":"你好~ 一般原始数据和明细数据，是要求永久保留或者长期保留的，但是上层数据，一般要求是要设置生命周期的，不需要永久保留~因为可以根据明细汇聚回算回来。<br><br>感谢你的提问~祝好~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1595248075,"ip_address":"","comment_id":234063,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5889536635","product_id":100049101,"comment_content":"数据仓库中数据的存储周期不是五年甚至更久吗？怎么DWS&#47;ADS&#47;DM 生命周期可以设置为7~30天？","like_count":1,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501262,"discussion_content":"你好~ 一般原始数据和明细数据，是要求永久保留或者长期保留的，但是上层数据，一般要求是要设置生命周期的，不需要永久保留~因为可以根据明细汇聚回算回来。\n\n感谢你的提问~祝好~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595248075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227223,"user_name":"Geek_4347e9","can_delete":false,"product_type":"c1","uid":1128143,"ip_address":"","ucode":"873E571624A6ED","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqA0VGdeiaHtTN86Kaia28oukUawfiapXQfD0AzbcqN6LYOkS2Bw1WoMsk5crl5f1vug8JFiaibwYhEIwA/132","comment_is_top":false,"comment_ctime":1592317609,"is_pvip":false,"replies":[{"id":"87138","content":"你好，按库来存放当然是一个方案，如果你的工具能力足够强的话，也可以支持对表打标签的方式，只要方便进行搜索就可以。主题域，我们也是通过对表打标签的方式实现管理的~<br><br>感谢你的提问~祝好~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1595249313,"ip_address":"","comment_id":227223,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5887284905","product_id":100049101,"comment_content":"郭总，您好。在数据仓库中。数据库要怎么创建？<br>1.按照每层的数据是放到一个独立的database中，比如ods，创建一个ods的库，dw创建一个dw的库。所有主题的数据，ods层的都放到ods库中，dw层的都放到dw库 。<br>2.按照主题来划分database。不同分层的按照主题放到主题划分的database中。<br>3.或者其他的方式？","like_count":1,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498540,"discussion_content":"你好，按库来存放当然是一个方案，如果你的工具能力足够强的话，也可以支持对表打标签的方式，只要方便进行搜索就可以。主题域，我们也是通过对表打标签的方式实现管理的~\n\n感谢你的提问~祝好~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595249313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224071,"user_name":"熊禹-DerekX","can_delete":false,"product_type":"c1","uid":1963814,"ip_address":"","ucode":"EC73D0D2085DF2","user_header":"https://static001.geekbang.org/account/avatar/00/1d/f7/26/d8783249.jpg","comment_is_top":false,"comment_ctime":1591265626,"is_pvip":false,"replies":[{"id":"83576","content":"其实我说的模型，就是表的概念。<br><br>ODS、DWD是模型的分层。","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1592224006,"ip_address":"","comment_id":224071,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5886232922","product_id":100049101,"comment_content":"郭老师所说的模型到底是什么？模型是ODS、DWD等的分层设计，还是可共享、可复用的公共服务层，还是建模工具中的建模方法？有点抽象，麻烦郭老师解答😊","like_count":1,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497354,"discussion_content":"其实我说的模型，就是表的概念。\n\nODS、DWD是模型的分层。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592224006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1352737,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a4/21/fda2ae09.jpg","nickname":"唐永军","note":"","ucode":"F4879648F85B8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301300,"discussion_content":"同问，我一直也搞不明白。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598486409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219315,"user_name":"keke","can_delete":false,"product_type":"c1","uid":1077379,"ip_address":"","ucode":"BE28B8110DF861","user_header":"https://static001.geekbang.org/account/avatar/00/10/70/83/36ab65ec.jpg","comment_is_top":false,"comment_ctime":1589987973,"is_pvip":true,"replies":[{"id":"81542","content":"不错呦~ 想的很远。<br><br>单独划出一个小团队，确实是可以确保数据中台推进的一个行之有效的方法。我们也是如此。数据中台的构建，可以先从 1~2个小场景入手，采取滚雪球的方式渐进式进行。","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1590410655,"ip_address":"","comment_id":219315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5884955269","product_id":100049101,"comment_content":"单独划出一个小团队专心开发数据中台，当然如果是过于耀眼的话可以把这个小团队培养成企业的创新业务部门，以后不仅是数据中台，技术中台、内容中台、产品中台等都搞一搞，也可以慢慢对外输出中台化的解决方案，能够实现从自负盈亏到逐渐盈利，搭上2B的顺风车～～","like_count":1,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495762,"discussion_content":"不错呦~ 想的很远。\n\n单独划出一个小团队，确实是可以确保数据中台推进的一个行之有效的方法。我们也是如此。数据中台的构建，可以先从 1~2个小场景入手，采取滚雪球的方式渐进式进行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590410655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215865,"user_name":"唐永军","can_delete":false,"product_type":"c1","uid":1352737,"ip_address":"","ucode":"F4879648F85B8B","user_header":"https://static001.geekbang.org/account/avatar/00/14/a4/21/fda2ae09.jpg","comment_is_top":false,"comment_ctime":1589122370,"is_pvip":false,"replies":[{"id":"79990","content":"这个不能一概而论，与团队资源投入，技术水平，业务的配合程度都有关系，一般来说，在资源到位，技术水平满足，组织关系合作比较顺畅情况下，半年可以看到初步成果，可以在几个业务场景落地，一年时间左右基本可以形成中台规模和效应。","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1589209618,"ip_address":"","comment_id":215865,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5884089666","product_id":100049101,"comment_content":"郭老师，问个问题了，一般数据中台大约得几个月就差不多可以成型了。","like_count":1,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494588,"discussion_content":"这个不能一概而论，与团队资源投入，技术水平，业务的配合程度都有关系，一般来说，在资源到位，技术水平满足，组织关系合作比较顺畅情况下，半年可以看到初步成果，可以在几个业务场景落地，一年时间左右基本可以形成中台规模和效应。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589209618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212755,"user_name":"bwq","can_delete":false,"product_type":"c1","uid":1374721,"ip_address":"","ucode":"5CB4A98D9C9F7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/fa/01/f7a2e56c.jpg","comment_is_top":false,"comment_ctime":1588207081,"is_pvip":false,"replies":[{"id":"79052","content":"ADS 数据应用层，DM是数据集市层。数据应用层主要是给数据产品对接的，DM主要是给分析师做一些探索式分析的。使用对象不一样。<br><br>DWS&#47;ADS&#47;DM 生命周期可以设置为7~30天，根据数据的需求决定。如果删除后，又有需要，可以采取数据备份的方式，选择某个备份，恢复备份文件就可以了。<br><br>感谢你的阅读~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588240503,"ip_address":"","comment_id":212755,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5883174377","product_id":100049101,"comment_content":"老师, 我想问几个问题:<br>1 ADS 和 DM 有什么区别 ? 还是他们其实是一回事 ?<br>2 您说 DWS&#47;ADS&#47;DM 的生命周期一般为7~30天, 这些表的生命周期怎样的 ? 生命周期结束以后是将表删去吗 ? 删去以后如果又有需要又如何恢复呢 ?<br>谢谢老师的分享!","like_count":1,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493600,"discussion_content":"ADS 数据应用层，DM是数据集市层。数据应用层主要是给数据产品对接的，DM主要是给分析师做一些探索式分析的。使用对象不一样。\n\nDWS/ADS/DM 生命周期可以设置为7~30天，根据数据的需求决定。如果删除后，又有需要，可以采取数据备份的方式，选择某个备份，恢复备份文件就可以了。\n\n感谢你的阅读~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588240503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207404,"user_name":"北山木易","can_delete":false,"product_type":"c1","uid":1351465,"ip_address":"","ucode":"56D895DA974E94","user_header":"https://static001.geekbang.org/account/avatar/00/14/9f/29/788d7fac.jpg","comment_is_top":false,"comment_ctime":1587083488,"is_pvip":false,"replies":[{"id":"77731","content":"你好， 首先要感谢你的认可和鼓励。<br><br>我来谈谈你的问题。在数据中台中，用户维表必须要统一，不同业务系统用户不统一，在构建数据中台统一用户维表时，需要由中台部门来解决，可以使用ID-Mapping技术，打通不同系统之间的账号，建立统一的用户维表。<br><br>感谢你的阅读，期待与你再次相遇~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587305738,"ip_address":"","comment_id":207404,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5882050784","product_id":100049101,"comment_content":"郭老师，您好，非常感谢这么精彩的分享。<br>有个问题请教，关于“一致性维度”的，业务场景如下：企业X有A和B两个系统，都有客户表（数据有部分交集（根据一定规则例如名称相同判断的），没有统一的客户中心），数据中台中客户维度是否只有一个？客户表的维度歧义处理是否是数据中台的职责？","like_count":1,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492112,"discussion_content":"你好， 首先要感谢你的认可和鼓励。\n\n我来谈谈你的问题。在数据中台中，用户维表必须要统一，不同业务系统用户不统一，在构建数据中台统一用户维表时，需要由中台部门来解决，可以使用ID-Mapping技术，打通不同系统之间的账号，建立统一的用户维表。\n\n感谢你的阅读，期待与你再次相遇~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587305738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206798,"user_name":"Geek_9319","can_delete":false,"product_type":"c1","uid":1535449,"ip_address":"","ucode":"90C84C0048D73F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELtsib7NQO2NaEubNbfbAqh8FQDibTuUon1QNHvbV1vD1Vo9vO8wymibTria6nIO3hakJNfrY1okseuRQ/132","comment_is_top":false,"comment_ctime":1586937009,"is_pvip":false,"replies":[{"id":"77743","content":"你好，我来回到一下你的问题。<br><br>在业务系统中，可能会存在用户表不一致的情况，那如果到数据中台来，我们就必须要构建统一的用户维表，不能存在多个用户维表，那这就导致我们没办法做一致性上卷，基于公共维度，实现多个事实的关联查询分析了。<br><br>所以在数据中台中，我们必须要统一维度，构建一致性维表。<br><br>感谢你的阅读，期待与你再次相遇~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587307130,"ip_address":"","comment_id":206798,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5881904305","product_id":100049101,"comment_content":"一致性维度能否详细解释下，有点不太理解","like_count":1,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491908,"discussion_content":"你好，我来回到一下你的问题。\n\n在业务系统中，可能会存在用户表不一致的情况，那如果到数据中台来，我们就必须要构建统一的用户维表，不能存在多个用户维表，那这就导致我们没办法做一致性上卷，基于公共维度，实现多个事实的关联查询分析了。\n\n所以在数据中台中，我们必须要统一维度，构建一致性维表。\n\n感谢你的阅读，期待与你再次相遇~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587307130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354484,"user_name":"研发数据链协同","can_delete":false,"product_type":"c1","uid":3003757,"ip_address":"浙江","ucode":"986D9E1A79AF02","user_header":"","comment_is_top":false,"comment_ctime":1660457534,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660457534","product_id":100049101,"comment_content":"咨询下在数据已经入湖的情况下  数据建模建维度需要跟源系统的业务和逻辑沟通吗","like_count":0},{"had_liked":false,"id":351575,"user_name":"Lorry","can_delete":false,"product_type":"c1","uid":1066409,"ip_address":"","ucode":"BD4754D0F1D786","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","comment_is_top":false,"comment_ctime":1657953385,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657953385","product_id":100049101,"comment_content":"请问文中统计各个表命中次数是怎么统计出来的，有开源组件可以直接统计出来吗？谢谢","like_count":0},{"had_liked":false,"id":345533,"user_name":"Gilbert","can_delete":false,"product_type":"c1","uid":1010196,"ip_address":"","ucode":"80CA9F00455251","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/14/2c6b2a55.jpg","comment_is_top":false,"comment_ctime":1652361462,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652361462","product_id":100049101,"comment_content":"还是没太看懂数据指标和数据模型的关系，是现有指标，然后根据指标设计模型吗？","like_count":0},{"had_liked":false,"id":345153,"user_name":"nick","can_delete":false,"product_type":"c1","uid":1061843,"ip_address":"","ucode":"91263882076AC0","user_header":"https://static001.geekbang.org/account/avatar/00/10/33/d3/30a89b21.jpg","comment_is_top":false,"comment_ctime":1652080352,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1652080352","product_id":100049101,"comment_content":"老师，请教下关于文章中说的总线矩阵的建立这个工作如何开展？像银行主题域主要是参考FS-LDM 模型与 BDWM模型，银行业务本身就是非常复杂的，很难有人能把整个业务按照划分的主题域去抽象和拆解业务过程和可分析维度，有什么好的建议吗，网易是否也有基于金融领域的大数据解决方案，能否说说是怎么做的，谢谢","like_count":0},{"had_liked":false,"id":340923,"user_name":"小峰哥","can_delete":false,"product_type":"c1","uid":1062574,"ip_address":"","ucode":"0290A2AB0659F2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/g8T8l8PmyD2QcsUGoNDE6eCPicfyqH1gboDvny3fMKGgW5HkibA3Gx6E4Pib9B2uwQTYkFuGNvhfql0Jrehibiby3kQ/132","comment_is_top":false,"comment_ctime":1649231031,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649231031","product_id":100049101,"comment_content":"老师，既然要构建一致性纬度，为啥纬度表的命名还要有主题域","like_count":0},{"had_liked":false,"id":319534,"user_name":"摇之","can_delete":false,"product_type":"c1","uid":1315219,"ip_address":"","ucode":"2ABACFC898DECD","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/93/b2ebef19.jpg","comment_is_top":false,"comment_ctime":1635843764,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635843764","product_id":100049101,"comment_content":"数仓数据流向总原则：1.禁止逆向调用；2.避免同层调用；3.优先使用公共层；4.避免跨层调用","like_count":0},{"had_liked":false,"id":317321,"user_name":"Juha","can_delete":false,"product_type":"c1","uid":1347609,"ip_address":"","ucode":"5B9301CC960D84","user_header":"https://static001.geekbang.org/account/avatar/00/14/90/19/b3403815.jpg","comment_is_top":false,"comment_ctime":1634740528,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1634740528","product_id":100049101,"comment_content":"hello，郭老师，还有一个问题，就是关于怎么去区分事实表和维度表的问题，例如会员表，对于订单系统来说，会员只是一个维度，但是对于CRM系统来说，他们可能要统计会员的增量，那这样的话，是事实表和维度表共享呢还是说基于ods表分别做一个会员维度表和会员事实表呢","like_count":0,"discussions":[{"author":{"id":1297565,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cc/9d/2f81bae1.jpg","nickname":"王 +","note":"","ucode":"954F91CCCBF140","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583643,"discussion_content":"一个域的事实在其他域可能就是维度，一致性维度个人理解就是抛开事实的度量部分，仅保留可以作为限定条件的部分。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660267407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317057,"user_name":"Juha","can_delete":false,"product_type":"c1","uid":1347609,"ip_address":"","ucode":"5B9301CC960D84","user_header":"https://static001.geekbang.org/account/avatar/00/14/90/19/b3403815.jpg","comment_is_top":false,"comment_ctime":1634653191,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1634653191","product_id":100049101,"comment_content":"hello郭老师，想问个问题，就是事实表分为明细事实表、周期快照事实表和累积快照事实表，这三种类型的事实表都是在dwd层出的嘛，还是说后面两个快照表是从dws出的呀，希望老师能够回复！","like_count":0},{"had_liked":false,"id":311449,"user_name":"摇之","can_delete":false,"product_type":"c1","uid":1315219,"ip_address":"","ucode":"2ABACFC898DECD","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/93/b2ebef19.jpg","comment_is_top":false,"comment_ctime":1631240409,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631240409","product_id":100049101,"comment_content":"老师，实时数据和离线数据如何划分域？二者能放在同一个域吗？","like_count":0},{"had_liked":false,"id":309456,"user_name":"Fruit","can_delete":false,"product_type":"c1","uid":1326390,"ip_address":"","ucode":"41E0966C47D894","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/36/6b86bd08.jpg","comment_is_top":false,"comment_ctime":1630144015,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630144015","product_id":100049101,"comment_content":"表1不太理解为什么读写数量会不一致，会有只读的表或者只写的表吗","like_count":0},{"had_liked":false,"id":309161,"user_name":"lee","can_delete":false,"product_type":"c1","uid":2744445,"ip_address":"","ucode":"1CF109B5153A1D","user_header":"https://static001.geekbang.org/account/avatar/00/29/e0/7d/b6484bca.jpg","comment_is_top":false,"comment_ctime":1629964627,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629964627","product_id":100049101,"comment_content":"老师，您的文章写的真好，例子很丰富，受益匪浅。<br><br>针对这一篇，我发现知乎上有人搬运您的文章，且未注明出处（可耻呀，居然还是信息流的推荐）。<br><br>建设数仓的血泪教训！(建议收藏) - 大数据峰哥的文章 - 知乎<br>https:&#47;&#47;zhuanlan.zhihu.com&#47;p&#47;401982516","like_count":0},{"had_liked":false,"id":295796,"user_name":"郑江慧","can_delete":false,"product_type":"c1","uid":2498552,"ip_address":"","ucode":"B6C9BE460BBB60","user_header":"https://static001.geekbang.org/account/avatar/00/26/1f/f8/64952749.jpg","comment_is_top":false,"comment_ctime":1622600625,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622600625","product_id":100049101,"comment_content":"没想到在这儿又遇见您啦。有幸能获得和您的面试机会，虽然没能通过，但感觉在聊的过程当中也意识到自己存在的不足。非常感谢您最后给我的建议，我后续会对研发场景做更多深入的挖掘分析，把产品做深做透！<br>目前希望能把您的课程消化吸收，为后续的工作储备经验。如有机会，还希望能加入您的团队！<br>祝好呀~","like_count":0},{"had_liked":false,"id":293128,"user_name":"fish","can_delete":false,"product_type":"c1","uid":1096768,"ip_address":"","ucode":"B5FC04A69E0E64","user_header":"https://static001.geekbang.org/account/avatar/00/10/bc/40/12086a85.jpg","comment_is_top":false,"comment_ctime":1621232608,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621232608","product_id":100049101,"comment_content":"整套下来对于维护平台同学都很高的要求，而在大厂中，其实我们业务线很多，业务线之间没有交集。有几个问题<br><br>1.  那么每个业务线都去培训这样的数据专家是否可行<br>2. 各个业务线的特殊需求又如何去维护统一，统一肯定是不可能的，应该是一定业务量的统一。<br><br>针对某一个业务线来讲，这套方案的可落地性很强，但是像内部几百业务线，感觉落地太难。不知道老师对于这方面有什么建议呢？<br><br>现在内部也是按这套方法论在搭建数据治理平台，作为一个对这方面不太理解熟悉的，感觉是被我用残了。 ","like_count":0},{"had_liked":false,"id":277939,"user_name":"Geek_d54869","can_delete":false,"product_type":"c1","uid":1953765,"ip_address":"","ucode":"CF55462EF65B9E","user_header":"","comment_is_top":false,"comment_ctime":1612677498,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612677498","product_id":100049101,"comment_content":"关于事实表整合，第一个例子，两个部门统计粒度不同，是否可以只保留细粒度的表，细粒度的在汇总层构建即可？","like_count":0},{"had_liked":false,"id":276456,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1611933374,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611933374","product_id":100049101,"comment_content":"老师，有比较成熟的算法来帮助设计这些中间层表吗？比如需要设计哪些表，每一张表的每一个字段的定义呢","like_count":0},{"had_liked":false,"id":270261,"user_name":"江龙","can_delete":false,"product_type":"c1","uid":1033442,"ip_address":"","ucode":"1865E545060CC9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/e2/3de4371d.jpg","comment_is_top":false,"comment_ctime":1609038230,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1609038230","product_id":100049101,"comment_content":"有个疑问：dws有个日表，是可以直接从ods中某个表中统计的(是张大表，字段完全符合需求)。还需要先从ods完全复制一张明细表到dwd吗？如果需要那这不是浪费资源？如果不需要那这里的跨层引用该如何处理？","like_count":0},{"had_liked":false,"id":266842,"user_name":"Wayne","can_delete":false,"product_type":"c1","uid":1256734,"ip_address":"","ucode":"0337F94DD6FBF1","user_header":"https://static001.geekbang.org/account/avatar/00/13/2d/1e/cc6ae8ea.jpg","comment_is_top":false,"comment_ctime":1607502994,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607502994","product_id":100049101,"comment_content":"有个问题想问下郭老师，广告行业的主题如何划分，查了谷歌，百度，对这个的信息很少，想找下思路","like_count":0},{"had_liked":false,"id":253194,"user_name":"魂斗罗丶","can_delete":false,"product_type":"c1","uid":1396945,"ip_address":"","ucode":"6BEA5CD3CCC2B7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epaH1gHotWQukHnF2QtT2oK9hGvyLfSaKSzuC9XKH5aSWZj2KNrxYGJeNeVzIeAibzypibsmeicppGvA/132","comment_is_top":false,"comment_ctime":1602646170,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602646170","product_id":100049101,"comment_content":"请问一下：不同主题分析场景，使用的事实表都是当前的主题的事实表，但是可能会出现使用同一个维度表，像这种会在不同主题下服用的维度表该如何命名呢？？？<br>课程很好，赞赞赞！！！","like_count":0},{"had_liked":false,"id":252649,"user_name":"Geek_c49bb1","can_delete":false,"product_type":"c1","uid":1993985,"ip_address":"","ucode":"A3176DA1CE2EB2","user_header":"http://thirdwx.qlogo.cn/mmopen/uqaRIfRCAhKYfTfXoeratHFInOEagsvcY646aY5vVdJvnxUOfgLMibE9ql6jltSmyoe3v0He1lxeOHX078McvMsqLNb79ourp/132","comment_is_top":false,"comment_ctime":1602419792,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602419792","product_id":100049101,"comment_content":"郭老师，还要一个问题：就是你那个维度是指 一个表还是一个字段啊？ 总感觉 这样做是不是 需要做两次同样的事情，一个是建立模型表，一次是把模型表对应的维度或者度量 建立好 之后 在进行关联，好像比直接用数仓还麻烦一些，不知道这样理解是否正确？ ","like_count":0},{"had_liked":false,"id":252641,"user_name":"Geek_c49bb1","can_delete":false,"product_type":"c1","uid":1993985,"ip_address":"","ucode":"A3176DA1CE2EB2","user_header":"http://thirdwx.qlogo.cn/mmopen/uqaRIfRCAhKYfTfXoeratHFInOEagsvcY646aY5vVdJvnxUOfgLMibE9ql6jltSmyoe3v0He1lxeOHX078McvMsqLNb79ourp/132","comment_is_top":false,"comment_ctime":1602415023,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602415023","product_id":100049101,"comment_content":"郭老师，感谢您的分享，收获很多。<br>有一个问题请教一下您，就是 您的这个模型设计 是不是需要 手动的一个个把需要的维度，度量，基础字段 一个个的输入进去？ 输入进去之后，然后再把 需要的表模型去手动建立?   ","like_count":0},{"had_liked":false,"id":244212,"user_name":"电光火石","can_delete":false,"product_type":"c1","uid":1013160,"ip_address":"","ucode":"3AD33BB4AA940F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg","comment_is_top":false,"comment_ctime":1598430432,"is_pvip":false,"replies":[{"id":"91838","content":"HI，你好，<br>1. ETL都是在Hive体系内做的，所以dws&#47;ads的数据，也是基于hadoop体系内生成的，所以hive上当然会有ads&#47;dws的数据，然后再同步一份到HBase或者DB上，目的是提高查询的性能。<br><br>2. hive 不适合ad-hoc查询， 目前网易，ad-hoc 用impala， etl走spark比较多。<br><br>3. EasyDesign主要功能不是计算完善度和复用度，核心功能主要是进行模型设计，建表的审批发布流程管理。完善度、复用度只是模型设计的度量体系，是个抓手，引导模型设计人员，追求模型的复用和共享，面向数据中台的方式设计模型。<br><br>感谢你的提问~祝好~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1601380848,"ip_address":"","comment_id":244212,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598430432","product_id":100049101,"comment_content":"老师好，正好在做数据中台的规划和设计，关于数仓分层有几个问题请教一下：<br>1. 看完第9、10节，我们的数据通过数据服务提供出去，一般提供出去的都是dws&#47;ads层的数据；现在我们的数仓数据都是在hive上面，这些数据同步到mysql&#47;hbase上，那hive上面还需要有dws&#47;ads层的数据吗？是直接把这些数据建立在mysql&#47;hbase上面？还是先建立在hive上，再同步出去？<br>2. 数仓上面的hive数据访问会比较慢，除了系统的访问（通过数据服务），不知道如果报表或者adhoc的查询，老师那边是通过什么提供服务的？<br>3. 数仓建模工具 EasyDesign大部分数据来自元数据中心，所以EasyDesign核心功能其实是计算完善度和复用度的是吗？因为维表的相关元数据在元数据中心也有，那么是不是和指标一样，将相关数据作为标签下沉到元数据中心？<br>非常感谢！","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504522,"discussion_content":"HI，你好，\n1. ETL都是在Hive体系内做的，所以dws/ads的数据，也是基于hadoop体系内生成的，所以hive上当然会有ads/dws的数据，然后再同步一份到HBase或者DB上，目的是提高查询的性能。\n\n2. hive 不适合ad-hoc查询， 目前网易，ad-hoc 用impala， etl走spark比较多。\n\n3. EasyDesign主要功能不是计算完善度和复用度，核心功能主要是进行模型设计，建表的审批发布流程管理。完善度、复用度只是模型设计的度量体系，是个抓手，引导模型设计人员，追求模型的复用和共享，面向数据中台的方式设计模型。\n\n感谢你的提问~祝好~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601380848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237671,"user_name":"ScoField_Lin","can_delete":false,"product_type":"c1","uid":1098799,"ip_address":"","ucode":"C16AA0937AC84F","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/2f/400f65e4.jpg","comment_is_top":false,"comment_ctime":1595921457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595921457","product_id":100049101,"comment_content":"郭老师，想请教个问题，因为模型的设计一般要涉及到评审及公共性的评估，开发周期相对敏捷开发的报表或者接口是要长一些的，请问网易有没有做到模型表的开发满足业务要求的上线进度，又是如何做到的呢","like_count":0},{"had_liked":false,"id":227523,"user_name":"没什么大不了","can_delete":false,"product_type":"c1","uid":2004169,"ip_address":"","ucode":"0215F9B7D51016","user_header":"https://static001.geekbang.org/account/avatar/00/1e/94/c9/68e08b35.jpg","comment_is_top":false,"comment_ctime":1592400649,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592400649","product_id":100049101,"comment_content":"我有两个问题想咨询一下:1、说到跨层引用，我想说的是同层引用是好还是不好呢？有一些的确是需要同层引用的，比如车辆需求的明细数据落到dwd层，这个是经过逻辑处理的，然后算车辆装载明细的时候，需要拿车辆需求明细的数据去关联取得到具体到每票运单在每个车辆需求上的明细数据，需要拿到车辆需求上的一些基础信息，这样我能直接同层引用这个车辆需求明细信息吗？<br>2、讲到评估模型的好坏，用下游引用模型的平均数来确定，那有一个问题，就是这个模型涉及的业务比较窄，可能用这块相关业务的人本身就不多，那怎么去衡量我做的这个模型是否是好还是坏呢？比如员工基础明细信息，实际业务中用这个数据的人可能比较少，那这能说明我做的这个员工基础信息模型是不好吗？<br>我司现在考核模型的好坏也遇到这个问题","like_count":0},{"had_liked":false,"id":226026,"user_name":"Geek_dde3ac","can_delete":false,"product_type":"c1","uid":1103055,"ip_address":"","ucode":"6D560A17ADC249","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/cf/e82cd26b.jpg","comment_is_top":false,"comment_ctime":1591930867,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591930867","product_id":100049101,"comment_content":"郭老师，我们现在正在做数据中台的开发。目前遇到履约域数据模型设计的问题，对于履约域会有很多个时间节点， 会关注各个时间间的耗时等指标。本来是想做成累积快照事实表，以完结时间为分区， 未完结的放在一个大分区中。但这样在统计中间状态节点时，那么报表数据是不稳定的。后来又考虑了使用createtime做分区，任何节点完成时间是今天的都拉进来，但是这样表使用起来比较困难。不知道有什么其他好的办法呢？","like_count":0},{"had_liked":false,"id":221672,"user_name":"左哼哼右哼哼","can_delete":false,"product_type":"c1","uid":1228026,"ip_address":"","ucode":"4E11DF1D271213","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/fa/7e861b62.jpg","comment_is_top":false,"comment_ctime":1590562890,"is_pvip":false,"replies":[{"id":"83585","content":"ODS 到DWD需要做数据清洗么？ 是否存在一些脏数据？ 考虑到后续数据清洗的问题，建议还是隔开一层比较好。","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1592224869,"ip_address":"","comment_id":221672,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590562890","product_id":100049101,"comment_content":"老师好，请教一个问题，如果 DWD的表结构和 ODS的表结构一致 而且粒度还一样 ，是否有必要再建立DWD的表，如果建立数据是不是就重复存放了；","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496535,"discussion_content":"ODS 到DWD需要做数据清洗么？ 是否存在一些脏数据？ 考虑到后续数据清洗的问题，建议还是隔开一层比较好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592224869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216739,"user_name":"weiyunhao","can_delete":false,"product_type":"c1","uid":1788210,"ip_address":"","ucode":"75AEC913A1BD5D","user_header":"https://static001.geekbang.org/account/avatar/00/1b/49/32/e6616646.jpg","comment_is_top":false,"comment_ctime":1589334922,"is_pvip":false,"replies":[{"id":"80235","content":"你好，主题域可以参考用户域、教学域、考试域、课程域等等。<br><br>如果一个表归属到多个主题域，可以关联到多个主题域下。<br><br>我再多说一句，主题域一方面是根据业务过程刻画的，例如教学、考试、课后等等，另外一方面也可以吧一些维度对象作为特定的域，比如课程、学员等。<br><br>","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1589374343,"ip_address":"","comment_id":216739,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589334922","product_id":100049101,"comment_content":"郭老师，您好。学生现在是在教育行业这边工作，有如下疑问，想请教您一下，1、主题域，课程、内容、课程包（包含N个课程）该如何界定主题域？2、我们这边都是学员信息、用户信息、助教、班主任信息，该如何界定主题域？3、dwd和dws这块，我看了都是单主题的方式，那么多主题整合这块应该归结到哪一类？<br>","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494930,"discussion_content":"你好，主题域可以参考用户域、教学域、考试域、课程域等等。\n\n如果一个表归属到多个主题域，可以关联到多个主题域下。\n\n我再多说一句，主题域一方面是根据业务过程刻画的，例如教学、考试、课后等等，另外一方面也可以吧一些维度对象作为特定的域，比如课程、学员等。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589374343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213223,"user_name":"Sandflass","can_delete":false,"product_type":"c1","uid":1917246,"ip_address":"","ucode":"7B75396EEC92B5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCVPh0bcCMJAwtxBx0cCLlkqB9NckSp3I0LYSTlRezuRV0gpXGB0BCZbFDpvLbhBbzsk8cHvczZ7g/132","comment_is_top":false,"comment_ctime":1588335625,"is_pvip":false,"replies":[{"id":"79988","content":"你好，Daliy Dump的简称，每日全量快照。","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1589208950,"ip_address":"","comment_id":213223,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1588335625","product_id":100049101,"comment_content":"老师，分表策略中di可以理解为day increase，请问下dd是什么的英文缩写呢？","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493715,"discussion_content":"你好，Daliy Dump的简称，每日全量快照。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589208950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1917246,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCVPh0bcCMJAwtxBx0cCLlkqB9NckSp3I0LYSTlRezuRV0gpXGB0BCZbFDpvLbhBbzsk8cHvczZ7g/132","nickname":"Sandflass","note":"","ucode":"7B75396EEC92B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":264103,"discussion_content":"知道了，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589289398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1917246,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCVPh0bcCMJAwtxBx0cCLlkqB9NckSp3I0LYSTlRezuRV0gpXGB0BCZbFDpvLbhBbzsk8cHvczZ7g/132","nickname":"Sandflass","note":"","ucode":"7B75396EEC92B5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273348,"discussion_content":"嗯啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590451385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":264103,"ip_address":""},"score":273348,"extra":""}]}]},{"had_liked":false,"id":212898,"user_name":"小庄","can_delete":false,"product_type":"c1","uid":1967029,"ip_address":"","ucode":"89707939D3BEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1e/03/b5/8226ada6.jpg","comment_is_top":false,"comment_ctime":1588235084,"is_pvip":false,"replies":[{"id":"79781","content":"你好，你的意思是根据数据的内容去拆表嘛？ <br><br>我觉得，如果考虑到性能因素，是可以这么做的，拆分成两个表，但是这么做，如果要进行不同前台业务之间的横向分析的时候，就会增加复杂度。所以要平衡好。<br><br>","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1589014884,"ip_address":"","comment_id":212898,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588235084","product_id":100049101,"comment_content":"您好郭老师！请教一个关于模型设计中明细事实是否可以拆分的问题，如果一个业务前台业务的业务事实对应有后台多个业务方，而某些业务方的分析需求是比较频繁的，如果公用一个事实表的话，就需要根据某些属性筛选出相对应的业务方的数据再进行计算。在分析需求比较频繁的情况下，是否有必要在明细事实层将不同业务方对应的事实拆分存储？或者使用主从的模式？","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493642,"discussion_content":"你好，你的意思是根据数据的内容去拆表嘛？ \n\n我觉得，如果考虑到性能因素，是可以这么做的，拆分成两个表，但是这么做，如果要进行不同前台业务之间的横向分析的时候，就会增加复杂度。所以要平衡好。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589014884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211039,"user_name":"dmgoo","can_delete":false,"product_type":"c1","uid":1057726,"ip_address":"","ucode":"33E3C0AB58AEF9","user_header":"","comment_is_top":false,"comment_ctime":1587885689,"is_pvip":true,"replies":[{"id":"78985","content":"你好，事实表是归属在某个主题域下的。维表也可以关联到某个主题域下。<br><br>一个主题，可以包含多张维表。不是一个主题包含一个宽表，一个主题域下可以有很多表，每个表中有指标、维度、度量，对于DWD就是度量，对于DWD是指标。<br><br>感谢你的阅读~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588159178,"ip_address":"","comment_id":211039,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587885689","product_id":100049101,"comment_content":"收获颇多，干货很多，有个问题，主题域和主题与维表和事实表的关系是什么？一个主题对应一个维表还是多个维表，还是一个主题对应一个宽表，包含维表和度量，指标","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493177,"discussion_content":"你好，事实表是归属在某个主题域下的。维表也可以关联到某个主题域下。\n\n一个主题，可以包含多张维表。不是一个主题包含一个宽表，一个主题域下可以有很多表，每个表中有指标、维度、度量，对于DWD就是度量，对于DWD是指标。\n\n感谢你的阅读~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588159178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210619,"user_name":"你好","can_delete":false,"product_type":"c1","uid":1945987,"ip_address":"","ucode":"F6ED43EF5FD164","user_header":"https://static001.geekbang.org/account/avatar/00/1d/b1/83/c6dd1322.jpg","comment_is_top":false,"comment_ctime":1587797119,"is_pvip":false,"replies":[{"id":"78441","content":"ODS层的数据应该要压缩，工具接进来的时候，可以选择格式，一般用parquet。<br><br>对于dwd也建议进行压缩。至于dws、ads以及dm，考虑到查询性能，同时汇总后数据量相对比较小，不建议压缩。<br><br>感谢你的阅读，期望对你所有帮助，能够解决你的问题。再次留言区再会~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587827066,"ip_address":"","comment_id":210619,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587797119","product_id":100049101,"comment_content":"老师说到压缩存储，ods，dwd，dws，层都分别怎么处理，尤其ods层数据量全保留应该压缩吗？而且一般数据进来到第一层都是工具接进来的，应该文本格式的吧","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493065,"discussion_content":"ODS层的数据应该要压缩，工具接进来的时候，可以选择格式，一般用parquet。\n\n对于dwd也建议进行压缩。至于dws、ads以及dm，考虑到查询性能，同时汇总后数据量相对比较小，不建议压缩。\n\n感谢你的阅读，期望对你所有帮助，能够解决你的问题。再次留言区再会~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587827066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210079,"user_name":"大鱼","can_delete":false,"product_type":"c1","uid":1020811,"ip_address":"","ucode":"1144A0E7EE3B8B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/8b/35fa42aa.jpg","comment_is_top":false,"comment_ctime":1587673753,"is_pvip":false,"replies":[{"id":"78972","content":"你好， “一个查询条件可以作为一个维表”没太听明白。维表和查询条件没有必然关系。反而很多情况下，是根据指标查一些维度，比如消费金额大于100元的用户。<br><br>维度的概念，相较于度量来说，它是度量的环境，比如时间、地域、用户、商品都是维度。<br><br>感谢你的阅读，期待下一次再见~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588157108,"ip_address":"","comment_id":210079,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1587673753","product_id":100049101,"comment_content":"我可以这么理解吗？一个查询条件可以做为一个维表？","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492937,"discussion_content":"你好， “一个查询条件可以作为一个维表”没太听明白。维表和查询条件没有必然关系。反而很多情况下，是根据指标查一些维度，比如消费金额大于100元的用户。\n\n维度的概念，相较于度量来说，它是度量的环境，比如时间、地域、用户、商品都是维度。\n\n感谢你的阅读，期待下一次再见~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588157108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1945987,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/b1/83/c6dd1322.jpg","nickname":"你好","note":"","ucode":"F6ED43EF5FD164","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":247114,"discussion_content":"你可以理解为group by的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587798194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209677,"user_name":"3.3","can_delete":false,"product_type":"c1","uid":1942298,"ip_address":"","ucode":"A898DF2903FDD8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/a3/1a/fb12f634.jpg","comment_is_top":false,"comment_ctime":1587600443,"is_pvip":false,"replies":[{"id":"78976","content":"你好，这个没有绝对的好与不好。<br><br>一般是在DW层，会考虑范式建模多一点，但是也会存在退化的设计，比如一些常用维度会退化到事实表中，显然违反了第三范式。在汇总层以上，更多的是采用反范式的设计，减少表之间的join，提高表的易用性和查询性能。这个也没有绝对的，在我们做自助取数的集市层表设计中，也不完全是宽表，也采用了一些星型模型的设计。<br><br>感谢你的阅读~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588157763,"ip_address":"","comment_id":209677,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1587600443","product_id":100049101,"comment_content":"请教，在主题域这一层，老师认为是范式建模好，还是范式模式？现在很多银行传统数仓的主题层都是三范式建模。","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492851,"discussion_content":"你好，这个没有绝对的好与不好。\n\n一般是在DW层，会考虑范式建模多一点，但是也会存在退化的设计，比如一些常用维度会退化到事实表中，显然违反了第三范式。在汇总层以上，更多的是采用反范式的设计，减少表之间的join，提高表的易用性和查询性能。这个也没有绝对的，在我们做自助取数的集市层表设计中，也不完全是宽表，也采用了一些星型模型的设计。\n\n感谢你的阅读~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588157763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1941802,"avatar":"","nickname":"异想的大黑猫","note":"","ucode":"5CFF763404E803","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267068,"discussion_content":"角度不同，老师是从分析师角度看中台的，我一个开发角度上来说有些奇怪，正在适应中","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589597096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209628,"user_name":"小崔","can_delete":false,"product_type":"c1","uid":1104958,"ip_address":"","ucode":"4E537416787752","user_header":"https://static001.geekbang.org/account/avatar/00/10/dc/3e/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1587571459,"is_pvip":false,"replies":[{"id":"78977","content":"你好， 维表不是一张大宽表，这个理解有问题。维表也会存在层次的，所以才有星座模型的设计。<br><br>维表的主要作用，是可以根据维度去分析事实过程。DWD 表中，一般会关联一些常用的维度，但是大部分都还在维表中。<br><br>感谢你的阅读，期待下一次再见~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588157912,"ip_address":"","comment_id":209628,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587571459","product_id":100049101,"comment_content":"对于维表一直有疑惑。请问维表是否就是一张大宽表，作用是根据id和具体记录关联起来，在生成DWD表记录时补全记录缺失的维度值？麻烦老师解答。","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492844,"discussion_content":"你好， 维表不是一张大宽表，这个理解有问题。维表也会存在层次的，所以才有星座模型的设计。\n\n维表的主要作用，是可以根据维度去分析事实过程。DWD 表中，一般会关联一些常用的维度，但是大部分都还在维表中。\n\n感谢你的阅读，期待下一次再见~","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588157912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207530,"user_name":"rageeeee","can_delete":false,"product_type":"c1","uid":1623230,"ip_address":"","ucode":"9167DE4557A4CE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJxPgjpuaIxibDFHTbOf36MZic0o2jjn29OTjL8YgGXicwhaBaomoFpV2pQPmeFiaBCiaUUVcdDhNZURtA/132","comment_is_top":false,"comment_ctime":1587102976,"is_pvip":false,"replies":[{"id":"77735","content":"不一定哦，维表不一定是变化不大的，例如用户维表，相比事实表，确实变化算小的，但是并不是说维表是不变化的。每天还有有很多新增注册用户的！<br><br>感谢你的阅读，期待与你再次相遇~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587306085,"ip_address":"","comment_id":207530,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587102976","product_id":100049101,"comment_content":"老师，维度表的分表策略这个没有看懂，我理解维度表的数据应该是变化不大的，为什么还分那么多区，您能详细的再解释一下吗？","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492159,"discussion_content":"不一定哦，维表不一定是变化不大的，例如用户维表，相比事实表，确实变化算小的，但是并不是说维表是不变化的。每天还有有很多新增注册用户的！\n\n感谢你的阅读，期待与你再次相遇~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587306085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207293,"user_name":"幸福时光","can_delete":false,"product_type":"c1","uid":1002341,"ip_address":"","ucode":"0479E9A5F11C73","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/65/bd254a02.jpg","comment_is_top":false,"comment_ctime":1587043213,"is_pvip":false,"replies":[{"id":"77733","content":"感谢你鼓励和认可，希望对你有所帮助，这些经验也确实是我们在过去一年中沉淀和总结下来的，比较有实践指导意义。<br><br>如果后续你有什么问题，可以直接在留言区与我交流。再次感谢你的阅读，下次见~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587305873,"ip_address":"","comment_id":207293,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587043213","product_id":100049101,"comment_content":"非常具有实战的指导意义，感谢老师分享👍","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492075,"discussion_content":"感谢你鼓励和认可，希望对你有所帮助，这些经验也确实是我们在过去一年中沉淀和总结下来的，比较有实践指导意义。\n\n如果后续你有什么问题，可以直接在留言区与我交流。再次感谢你的阅读，下次见~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587305873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206974,"user_name":"aof","can_delete":false,"product_type":"c1","uid":1062864,"ip_address":"","ucode":"5815D63C4926BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg","comment_is_top":false,"comment_ctime":1586966276,"is_pvip":false,"replies":[{"id":"77307","content":"感谢你的阅读，也谢谢你的鼓励。","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587001215,"ip_address":"","comment_id":206974,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586966276","product_id":100049101,"comment_content":"老师文章里面说的每一点都有比较明确的实施意义！赞！","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491965,"discussion_content":"感谢你的阅读，也谢谢你的鼓励。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587001215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206631,"user_name":"吴科🍀","can_delete":false,"product_type":"c1","uid":1112547,"ip_address":"","ucode":"8F2C317887A323","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/e3/2529c7dd.jpg","comment_is_top":false,"comment_ctime":1586912101,"is_pvip":false,"replies":[{"id":"77770","content":"你好，管住ODS，就掌握了主动权。<br><br>为了保证数据中台的推进速度，我反而建议成立独立的中台重构小团队，否则很容易受到业务需求的挤压。<br><br>至于维度建模的方法，后续我可以拿个案例与你来具体分享。<br><br>感谢你的阅读~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587308513,"ip_address":"","comment_id":206631,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586912101","product_id":100049101,"comment_content":"任何情况下，都是以业务需求为主。数仓模型的优化，在完成需求的情况下，一步步优化。<br>老师，说的回收ods层数据，太对了，避免重复计算，模型重复建设。<br>维度建模方面，老师能详细讲解个案例吗，我们现在建模还不规范，想参考一下。","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491844,"discussion_content":"你好，管住ODS，就掌握了主动权。\n\n为了保证数据中台的推进速度，我反而建议成立独立的中台重构小团队，否则很容易受到业务需求的挤压。\n\n至于维度建模的方法，后续我可以拿个案例与你来具体分享。\n\n感谢你的阅读~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587308513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206581,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1586898494,"is_pvip":false,"replies":[{"id":"77349","content":"蓓蓓，我12年做网易分布式数据库项目的时候，就是我们项目的PM啦。数据中台是一项系统性的工作，自然项目管理也是不可或缺的一部分。<br><br>感谢你的阅读~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1587005453,"ip_address":"","comment_id":206581,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586898494","product_id":100049101,"comment_content":"这种解决方案其实是项目管理的事情，雷蓓蓓老师的《项目管理实战20讲》学完之后觉得所谓的安排已经一切从容多了；如何去合理安排每个项目的时间和工作完成度。。。相关的策略是关键。<br>换个方式去讲吧。我手上既有数据系统架构和代码优化的工作，同时还有运维系统优化的工作；如何合理去安排其实是我每天早上或者每个周期会去规划的事情，合理规划好自己有限的时间和精力-一切都不是真正的问题；只有紧急情况出现时才会出现如何处理事情优先级的问题。<br>谢谢老师今天的分享，期待后续的分享。","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491831,"discussion_content":"蓓蓓，我12年做网易分布式数据库项目的时候，就是我们项目的PM啦。数据中台是一项系统性的工作，自然项目管理也是不可或缺的一部分。\n\n感谢你的阅读~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587005453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}