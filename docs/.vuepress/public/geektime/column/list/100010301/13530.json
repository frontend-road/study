{"id":13530,"title":"14 | Javaè™šæ‹Ÿæœºæ˜¯æ€ä¹ˆå®ç°synchronizedçš„ï¼Ÿ","content":"<p>åœ¨Javaç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨synchronizedå…³é”®å­—æ¥å¯¹ç¨‹åºè¿›è¡ŒåŠ é”ã€‚å®ƒæ—¢å¯ä»¥ç”¨æ¥å£°æ˜ä¸€ä¸ªsynchronizedä»£ç å—ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ ‡è®°é™æ€æ–¹æ³•æˆ–è€…å®ä¾‹æ–¹æ³•ã€‚</p>\n<p>å½“å£°æ˜synchronizedä»£ç å—æ—¶ï¼Œç¼–è¯‘è€Œæˆçš„å­—èŠ‚ç å°†åŒ…å«monitorenterå’ŒmonitorexitæŒ‡ä»¤ã€‚è¿™ä¸¤ç§æŒ‡ä»¤å‡ä¼šæ¶ˆè€—æ“ä½œæ•°æ ˆä¸Šçš„ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å…ƒç´ ï¼ˆä¹Ÿå°±æ˜¯synchronizedå…³é”®å­—æ‹¬å·é‡Œçš„å¼•ç”¨ï¼‰ï¼Œä½œä¸ºæ‰€è¦åŠ é”è§£é”çš„é”å¯¹è±¡ã€‚</p>\n<pre><code>  public void foo(Object lock) {\n    synchronized (lock) {\n      lock.hashCode();\n    }\n  }\n  // ä¸Šé¢çš„Javaä»£ç å°†ç¼–è¯‘ä¸ºä¸‹é¢çš„å­—èŠ‚ç \n  public void foo(java.lang.Object);\n    Code:\n       0: aload_1\n       1: dup\n       2: astore_2\n       3: monitorenter\n       4: aload_1\n       5: invokevirtual java/lang/Object.hashCode:()I\n       8: pop\n       9: aload_2\n      10: monitorexit\n      11: goto          19\n      14: astore_3\n      15: aload_2\n      16: monitorexit\n      17: aload_3\n      18: athrow\n      19: return\n    Exception table:\n       from    to  target type\n           4    11    14   any\n          14    17    14   any\n\n</code></pre>\n<p>æˆ‘åœ¨æ–‡ç¨¿ä¸­è´´äº†ä¸€æ®µåŒ…å«synchronizedä»£ç å—çš„Javaä»£ç ï¼Œä»¥åŠå®ƒæ‰€ç¼–è¯‘è€Œæˆçš„å­—èŠ‚ç ã€‚ä½ å¯èƒ½ä¼šç•™æ„åˆ°ï¼Œä¸Šé¢çš„å­—èŠ‚ç ä¸­åŒ…å«ä¸€ä¸ªmonitorenteræŒ‡ä»¤ä»¥åŠå¤šä¸ªmonitorexitæŒ‡ä»¤ã€‚è¿™æ˜¯å› ä¸ºJavaè™šæ‹Ÿæœºéœ€è¦ç¡®ä¿æ‰€è·å¾—çš„é”åœ¨æ­£å¸¸æ‰§è¡Œè·¯å¾„ï¼Œä»¥åŠå¼‚å¸¸æ‰§è¡Œè·¯å¾„ä¸Šéƒ½èƒ½å¤Ÿè¢«è§£é”ã€‚</p>\n<p><span class=\"reference\">ä½ å¯ä»¥æ ¹æ®æˆ‘åœ¨ä»‹ç»å¼‚å¸¸å¤„ç†æ—¶ä»‹ç»è¿‡çš„çŸ¥è¯†ï¼Œå¯¹ç…§å­—èŠ‚ç å’Œå¼‚å¸¸å¤„ç†è¡¨æ¥æ„é€ æ‰€æœ‰å¯èƒ½çš„æ‰§è¡Œè·¯å¾„ï¼Œçœ‹çœ‹åœ¨æ‰§è¡Œäº†monitorenteræŒ‡ä»¤ä¹‹åï¼Œæ˜¯å¦éƒ½æœ‰æ‰§è¡ŒmonitorexitæŒ‡ä»¤ã€‚</span></p>\n<p>å½“ç”¨synchronizedæ ‡è®°æ–¹æ³•æ—¶ï¼Œä½ ä¼šçœ‹åˆ°å­—èŠ‚ç ä¸­æ–¹æ³•çš„è®¿é—®æ ‡è®°åŒ…æ‹¬ACC_SYNCHRONIZEDã€‚è¯¥æ ‡è®°è¡¨ç¤ºåœ¨è¿›å…¥è¯¥æ–¹æ³•æ—¶ï¼ŒJavaè™šæ‹Ÿæœºéœ€è¦è¿›è¡Œmonitorenteræ“ä½œã€‚è€Œåœ¨é€€å‡ºè¯¥æ–¹æ³•æ—¶ï¼Œä¸ç®¡æ˜¯æ­£å¸¸è¿”å›ï¼Œè¿˜æ˜¯å‘è°ƒç”¨è€…æŠ›å¼‚å¸¸ï¼ŒJavaè™šæ‹Ÿæœºå‡éœ€è¦è¿›è¡Œmonitorexitæ“ä½œã€‚</p><!-- [[[read_end]]] -->\n<pre><code>  public synchronized void foo(Object lock) {\n    lock.hashCode();\n  }\n  // ä¸Šé¢çš„Javaä»£ç å°†ç¼–è¯‘ä¸ºä¸‹é¢çš„å­—èŠ‚ç \n  public synchronized void foo(java.lang.Object);\n    descriptor: (Ljava/lang/Object;)V\n    flags: (0x0021) ACC_PUBLIC, ACC_SYNCHRONIZED\n    Code:\n      stack=1, locals=2, args_size=2\n         0: aload_1\n         1: invokevirtual java/lang/Object.hashCode:()I\n         4: pop\n         5: return\n</code></pre>\n<p>è¿™é‡Œmonitorenterå’Œmonitorexitæ“ä½œæ‰€å¯¹åº”çš„é”å¯¹è±¡æ˜¯éšå¼çš„ã€‚å¯¹äºå®ä¾‹æ–¹æ³•æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ“ä½œå¯¹åº”çš„é”å¯¹è±¡æ˜¯thisï¼›å¯¹äºé™æ€æ–¹æ³•æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ“ä½œå¯¹åº”çš„é”å¯¹è±¡åˆ™æ˜¯æ‰€åœ¨ç±»çš„Classå®ä¾‹ã€‚</p>\n<p>å…³äºmonitorenterå’Œmonitorexitçš„ä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡åœ°ç†è§£ä¸ºæ¯ä¸ªé”å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªé”è®¡æ•°å™¨å’Œä¸€ä¸ªæŒ‡å‘æŒæœ‰è¯¥é”çš„çº¿ç¨‹çš„æŒ‡é’ˆã€‚</p>\n<p>å½“æ‰§è¡Œmonitorenteræ—¶ï¼Œå¦‚æœç›®æ ‡é”å¯¹è±¡çš„è®¡æ•°å™¨ä¸º0ï¼Œé‚£ä¹ˆè¯´æ˜å®ƒæ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹æ‰€æŒæœ‰ã€‚åœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼ŒJavaè™šæ‹Ÿæœºä¼šå°†è¯¥é”å¯¹è±¡çš„æŒæœ‰çº¿ç¨‹è®¾ç½®ä¸ºå½“å‰çº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…¶è®¡æ•°å™¨åŠ 1ã€‚</p>\n<p>åœ¨ç›®æ ‡é”å¯¹è±¡çš„è®¡æ•°å™¨ä¸ä¸º0çš„æƒ…å†µä¸‹ï¼Œå¦‚æœé”å¯¹è±¡çš„æŒæœ‰çº¿ç¨‹æ˜¯å½“å‰çº¿ç¨‹ï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºå¯ä»¥å°†å…¶è®¡æ•°å™¨åŠ 1ï¼Œå¦åˆ™éœ€è¦ç­‰å¾…ï¼Œç›´è‡³æŒæœ‰çº¿ç¨‹é‡Šæ”¾è¯¥é”ã€‚</p>\n<p>å½“æ‰§è¡Œmonitorexitæ—¶ï¼ŒJavaè™šæ‹Ÿæœºåˆ™éœ€å°†é”å¯¹è±¡çš„è®¡æ•°å™¨å‡1ã€‚å½“è®¡æ•°å™¨å‡ä¸º0æ—¶ï¼Œé‚£ä¾¿ä»£è¡¨è¯¥é”å·²ç»è¢«é‡Šæ”¾æ‰äº†ã€‚</p>\n<p>ä¹‹æ‰€ä»¥é‡‡ç”¨è¿™ç§è®¡æ•°å™¨çš„æ–¹å¼ï¼Œæ˜¯ä¸ºäº†å…è®¸åŒä¸€ä¸ªçº¿ç¨‹é‡å¤è·å–åŒä¸€æŠŠé”ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä¸€ä¸ªJavaç±»ä¸­æ‹¥æœ‰å¤šä¸ªsynchronizedæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™äº›æ–¹æ³•ä¹‹é—´çš„ç›¸äº’è°ƒç”¨ï¼Œä¸ç®¡æ˜¯ç›´æ¥çš„è¿˜æ˜¯é—´æ¥çš„ï¼Œéƒ½ä¼šæ¶‰åŠå¯¹åŒä¸€æŠŠé”çš„é‡å¤åŠ é”æ“ä½œã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡è¿™ä¹ˆä¸€ä¸ªå¯é‡å…¥çš„ç‰¹æ€§ï¼Œæ¥é¿å…ç¼–ç¨‹é‡Œçš„éšå¼çº¦æŸã€‚</p>\n<p>è¯´å®ŒæŠ½è±¡çš„é”ç®—æ³•ï¼Œä¸‹é¢æˆ‘ä»¬ä¾¿æ¥ä»‹ç»HotSpotè™šæ‹Ÿæœºä¸­å…·ä½“çš„é”å®ç°ã€‚</p>\n<h2>é‡é‡çº§é”</h2>\n<p>é‡é‡çº§é”æ˜¯Javaè™šæ‹Ÿæœºä¸­æœ€ä¸ºåŸºç¡€çš„é”å®ç°ã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼ŒJavaè™šæ‹Ÿæœºä¼šé˜»å¡åŠ é”å¤±è´¥çš„çº¿ç¨‹ï¼Œå¹¶ä¸”åœ¨ç›®æ ‡é”è¢«é‡Šæ”¾çš„æ—¶å€™ï¼Œå”¤é†’è¿™äº›çº¿ç¨‹ã€‚</p>\n<p>Javaçº¿ç¨‹çš„é˜»å¡ä»¥åŠå”¤é†’ï¼Œéƒ½æ˜¯ä¾é æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºç¬¦åˆposixæ¥å£çš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚macOSå’Œç»å¤§éƒ¨åˆ†çš„Linuxï¼‰ï¼Œä¸Šè¿°æ“ä½œæ˜¯é€šè¿‡pthreadçš„äº’æ–¥é”ï¼ˆmutexï¼‰æ¥å®ç°çš„ã€‚æ­¤å¤–ï¼Œè¿™äº›æ“ä½œå°†æ¶‰åŠç³»ç»Ÿè°ƒç”¨ï¼Œéœ€è¦ä»æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·æ€åˆ‡æ¢è‡³å†…æ ¸æ€ï¼Œå…¶å¼€é”€éå¸¸ä¹‹å¤§ã€‚</p>\n<p>ä¸ºäº†å°½é‡é¿å…æ˜‚è´µçš„çº¿ç¨‹é˜»å¡ã€å”¤é†’æ“ä½œï¼ŒJavaè™šæ‹Ÿæœºä¼šåœ¨çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ä¹‹å‰ï¼Œä»¥åŠè¢«å”¤é†’åç«äº‰ä¸åˆ°é”çš„æƒ…å†µä¸‹ï¼Œè¿›å…¥è‡ªæ—‹çŠ¶æ€ï¼Œåœ¨å¤„ç†å™¨ä¸Šç©ºè·‘å¹¶ä¸”è½®è¯¢é”æ˜¯å¦è¢«é‡Šæ”¾ã€‚å¦‚æœæ­¤æ—¶é”æ°å¥½è¢«é‡Šæ”¾äº†ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹ä¾¿æ— é¡»è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯ç›´æ¥è·å¾—è¿™æŠŠé”ã€‚</p>\n<p>ä¸çº¿ç¨‹é˜»å¡ç›¸æ¯”ï¼Œè‡ªæ—‹çŠ¶æ€å¯èƒ½ä¼šæµªè´¹å¤§é‡çš„å¤„ç†å™¨èµ„æºã€‚è¿™æ˜¯å› ä¸ºå½“å‰çº¿ç¨‹ä»å¤„äºè¿è¡ŒçŠ¶å†µï¼Œåªä¸è¿‡è·‘çš„æ˜¯æ— ç”¨æŒ‡ä»¤ã€‚å®ƒæœŸæœ›åœ¨è¿è¡Œæ— ç”¨æŒ‡ä»¤çš„è¿‡ç¨‹ä¸­ï¼Œé”èƒ½å¤Ÿè¢«é‡Šæ”¾å‡ºæ¥ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥ç”¨ç­‰çº¢ç»¿ç¯ä½œä¸ºä¾‹å­ã€‚Javaçº¿ç¨‹çš„é˜»å¡ç›¸å½“äºç†„ç«åœè½¦ï¼Œè€Œè‡ªæ—‹çŠ¶æ€ç›¸å½“äºæ€ é€Ÿåœè½¦ã€‚å¦‚æœçº¢ç¯çš„ç­‰å¾…æ—¶é—´éå¸¸é•¿ï¼Œé‚£ä¹ˆç†„ç«åœè½¦ç›¸å¯¹çœæ²¹ä¸€äº›ï¼›å¦‚æœçº¢ç¯çš„ç­‰å¾…æ—¶é—´éå¸¸çŸ­ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬åœ¨synchronizedä»£ç å—é‡Œåªåšäº†ä¸€ä¸ªæ•´å‹åŠ æ³•ï¼Œé‚£ä¹ˆåœ¨çŸ­æ—¶é—´å†…é”è‚¯å®šä¼šè¢«é‡Šæ”¾å‡ºæ¥ï¼Œå› æ­¤æ€ é€Ÿåœè½¦æ›´åŠ åˆé€‚ã€‚</p>\n<p>ç„¶è€Œï¼Œå¯¹äºJavaè™šæ‹Ÿæœºæ¥è¯´ï¼Œå®ƒå¹¶ä¸èƒ½çœ‹åˆ°çº¢ç¯çš„å‰©ä½™æ—¶é—´ï¼Œä¹Ÿå°±æ²¡åŠæ³•æ ¹æ®ç­‰å¾…æ—¶é—´çš„é•¿çŸ­æ¥é€‰æ‹©è‡ªæ—‹è¿˜æ˜¯é˜»å¡ã€‚Javaè™šæ‹Ÿæœºç»™å‡ºçš„æ–¹æ¡ˆæ˜¯è‡ªé€‚åº”è‡ªæ—‹ï¼Œæ ¹æ®ä»¥å¾€è‡ªæ—‹ç­‰å¾…æ—¶æ˜¯å¦èƒ½å¤Ÿè·å¾—é”ï¼Œæ¥åŠ¨æ€è°ƒæ•´è‡ªæ—‹çš„æ—¶é—´ï¼ˆå¾ªç¯æ•°ç›®ï¼‰ã€‚</p>\n<p>å°±æˆ‘ä»¬çš„ä¾‹å­æ¥è¯´ï¼Œå¦‚æœä¹‹å‰ä¸ç†„ç«ç­‰åˆ°äº†ç»¿ç¯ï¼Œé‚£ä¹ˆè¿™æ¬¡ä¸ç†„ç«çš„æ—¶é—´å°±é•¿ä¸€ç‚¹ï¼›å¦‚æœä¹‹å‰ä¸ç†„ç«æ²¡ç­‰åˆ°ç»¿ç¯ï¼Œé‚£ä¹ˆè¿™æ¬¡ä¸ç†„ç«çš„æ—¶é—´å°±çŸ­ä¸€ç‚¹ã€‚</p>\n<p>è‡ªæ—‹çŠ¶æ€è¿˜å¸¦æ¥å¦å¤–ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œé‚£ä¾¿æ˜¯ä¸å…¬å¹³çš„é”æœºåˆ¶ã€‚å¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹ï¼Œå¹¶æ²¡æœ‰åŠæ³•ç«‹åˆ»ç«äº‰è¢«é‡Šæ”¾çš„é”ã€‚ç„¶è€Œï¼Œå¤„äºè‡ªæ—‹çŠ¶æ€çš„çº¿ç¨‹ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½ä¼˜å…ˆè·å¾—è¿™æŠŠé”ã€‚</p>\n<h2>è½»é‡çº§é”</h2>\n<p>ä½ å¯èƒ½è§åˆ°è¿‡æ·±å¤œçš„åå­—è·¯å£ï¼Œå››ä¸ªæ–¹å‘éƒ½é—ªé»„ç¯çš„æƒ…å†µã€‚ç”±äºæ·±å¤œåå­—è·¯å£çš„è½¦è¾†æ¥å¾€å¯èƒ½æ¯”è¾ƒå°‘ï¼Œå¦‚æœè¿˜è®¾ç½®çº¢ç»¿ç¯äº¤æ›¿ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å‡ºç°å››ä¸ªæ–¹å‘ä»…æœ‰ä¸€è¾†è½¦åœ¨ç­‰çº¢ç¯çš„æƒ…å†µã€‚</p>\n<p>å› æ­¤ï¼Œçº¢ç»¿ç¯å¯èƒ½è¢«è®¾ç½®ä¸ºé—ªé»„ç¯çš„æƒ…å†µï¼Œä»£è¡¨è½¦è¾†å¯ä»¥è‡ªç”±é€šè¿‡ï¼Œä½†æ˜¯å¸æœºéœ€è¦æ³¨æ„è§‚å¯Ÿï¼ˆä¸ªäººç†è§£ï¼Œå®é™…æ„ä¹‰è¯·å’¨è¯¢äº¤è­¦éƒ¨é—¨ï¼‰ã€‚</p>\n<p>Javaè™šæ‹Ÿæœºä¹Ÿå­˜åœ¨ç€ç±»ä¼¼çš„æƒ…å½¢ï¼šå¤šä¸ªçº¿ç¨‹åœ¨ä¸åŒçš„æ—¶é—´æ®µè¯·æ±‚åŒä¸€æŠŠé”ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰é”ç«äº‰ã€‚é’ˆå¯¹è¿™ç§æƒ…å½¢ï¼ŒJavaè™šæ‹Ÿæœºé‡‡ç”¨äº†è½»é‡çº§é”ï¼Œæ¥é¿å…é‡é‡çº§é”çš„é˜»å¡ä»¥åŠå”¤é†’ã€‚</p>\n<p>åœ¨ä»‹ç»è½»é‡çº§é”çš„åŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹Javaè™šæ‹Ÿæœºæ˜¯æ€ä¹ˆåŒºåˆ†è½»é‡çº§é”å’Œé‡é‡çº§é”çš„ã€‚</p>\n<p>ï¼ˆä½ å¯ä»¥å‚ç…§<a href=\"https://wiki.openjdk.java.net/display/HotSpot/Synchronization\">HotSpot Wiki</a>é‡Œè¿™å¼ å›¾é˜…è¯»ã€‚ï¼‰</p>\n<p>åœ¨å¯¹è±¡å†…å­˜å¸ƒå±€é‚£ä¸€ç¯‡ä¸­æˆ‘æ›¾ç»ä»‹ç»äº†å¯¹è±¡å¤´ä¸­çš„æ ‡è®°å­—æ®µï¼ˆmark wordï¼‰ã€‚å®ƒçš„æœ€åä¸¤ä½ä¾¿è¢«ç”¨æ¥è¡¨ç¤ºè¯¥å¯¹è±¡çš„é”çŠ¶æ€ã€‚å…¶ä¸­ï¼Œ00ä»£è¡¨è½»é‡çº§é”ï¼Œ01ä»£è¡¨æ— é”ï¼ˆæˆ–åå‘é”ï¼‰ï¼Œ10ä»£è¡¨é‡é‡çº§é”ï¼Œ11åˆ™è·Ÿåƒåœ¾å›æ”¶ç®—æ³•çš„æ ‡è®°æœ‰å…³ã€‚</p>\n<p>å½“è¿›è¡ŒåŠ é”æ“ä½œæ—¶ï¼ŒJavaè™šæ‹Ÿæœºä¼šåˆ¤æ–­æ˜¯å¦å·²ç»æ˜¯é‡é‡çº§é”ã€‚å¦‚æœä¸æ˜¯ï¼Œå®ƒä¼šåœ¨å½“å‰çº¿ç¨‹çš„å½“å‰æ ˆæ¡¢ä¸­åˆ’å‡ºä¸€å—ç©ºé—´ï¼Œä½œä¸ºè¯¥é”çš„é”è®°å½•ï¼Œå¹¶ä¸”å°†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µå¤åˆ¶åˆ°è¯¥é”è®°å½•ä¸­ã€‚</p>\n<p>ç„¶åï¼ŒJavaè™šæ‹Ÿæœºä¼šå°è¯•ç”¨CASï¼ˆcompare-and-swapï¼‰æ“ä½œæ›¿æ¢é”å¯¹è±¡çš„æ ‡è®°å­—æ®µã€‚è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼ŒCASæ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œå®ƒä¼šæ¯”è¾ƒç›®æ ‡åœ°å€çš„å€¼æ˜¯å¦å’ŒæœŸæœ›å€¼ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™æ›¿æ¢ä¸ºä¸€ä¸ªæ–°çš„å€¼ã€‚</p>\n<p>å‡è®¾å½“å‰é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¸ºXâ€¦XYZï¼ŒJavaè™šæ‹Ÿæœºä¼šæ¯”è¾ƒè¯¥å­—æ®µæ˜¯å¦ä¸ºXâ€¦X01ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ›¿æ¢ä¸ºåˆšæ‰åˆ†é…çš„é”è®°å½•çš„åœ°å€ã€‚ç”±äºå†…å­˜å¯¹é½çš„ç¼˜æ•…ï¼Œå®ƒçš„æœ€åä¸¤ä½ä¸º00ã€‚æ­¤æ—¶ï¼Œè¯¥çº¿ç¨‹å·²æˆåŠŸè·å¾—è¿™æŠŠé”ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œäº†ã€‚</p>\n<p>å¦‚æœä¸æ˜¯Xâ€¦X01ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ã€‚ç¬¬ä¸€ï¼Œè¯¥çº¿ç¨‹é‡å¤è·å–åŒä¸€æŠŠé”ã€‚æ­¤æ—¶ï¼ŒJavaè™šæ‹Ÿæœºä¼šå°†é”è®°å½•æ¸…é›¶ï¼Œä»¥ä»£è¡¨è¯¥é”è¢«é‡å¤è·å–ã€‚ç¬¬äºŒï¼Œå…¶ä»–çº¿ç¨‹æŒæœ‰è¯¥é”ã€‚æ­¤æ—¶ï¼ŒJavaè™šæ‹Ÿæœºä¼šå°†è¿™æŠŠé”è†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œå¹¶ä¸”é˜»å¡å½“å‰çº¿ç¨‹ã€‚</p>\n<p>å½“è¿›è¡Œè§£é”æ“ä½œæ—¶ï¼Œå¦‚æœå½“å‰é”è®°å½•ï¼ˆä½ å¯ä»¥å°†ä¸€ä¸ªçº¿ç¨‹çš„æ‰€æœ‰é”è®°å½•æƒ³è±¡æˆä¸€ä¸ªæ ˆç»“æ„ï¼Œæ¯æ¬¡åŠ é”å‹å…¥ä¸€æ¡é”è®°å½•ï¼Œè§£é”å¼¹å‡ºä¸€æ¡é”è®°å½•ï¼Œå½“å‰é”è®°å½•æŒ‡çš„ä¾¿æ˜¯æ ˆé¡¶çš„é”è®°å½•ï¼‰çš„å€¼ä¸º0ï¼Œåˆ™ä»£è¡¨é‡å¤è¿›å…¥åŒä¸€æŠŠé”ï¼Œç›´æ¥è¿”å›å³å¯ã€‚</p>\n<p>å¦åˆ™ï¼ŒJavaè™šæ‹Ÿæœºä¼šå°è¯•ç”¨CASæ“ä½œï¼Œæ¯”è¾ƒé”å¯¹è±¡çš„æ ‡è®°å­—æ®µçš„å€¼æ˜¯å¦ä¸ºå½“å‰é”è®°å½•çš„åœ°å€ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ›¿æ¢ä¸ºé”è®°å½•ä¸­çš„å€¼ï¼Œä¹Ÿå°±æ˜¯é”å¯¹è±¡åŸæœ¬çš„æ ‡è®°å­—æ®µã€‚æ­¤æ—¶ï¼Œè¯¥çº¿ç¨‹å·²ç»æˆåŠŸé‡Šæ”¾è¿™æŠŠé”ã€‚</p>\n<p>å¦‚æœä¸æ˜¯ï¼Œåˆ™æ„å‘³ç€è¿™æŠŠé”å·²ç»è¢«è†¨èƒ€ä¸ºé‡é‡çº§é”ã€‚æ­¤æ—¶ï¼ŒJavaè™šæ‹Ÿæœºä¼šè¿›å…¥é‡é‡çº§é”çš„é‡Šæ”¾è¿‡ç¨‹ï¼Œå”¤é†’å› ç«äº‰è¯¥é”è€Œè¢«é˜»å¡äº†çš„çº¿ç¨‹ã€‚</p>\n<h2>åå‘é”</h2>\n<p>å¦‚æœè¯´è½»é‡çº§é”é’ˆå¯¹çš„æƒ…å†µå¾ˆä¹è§‚ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„åå‘é”é’ˆå¯¹çš„æƒ…å†µåˆ™æ›´åŠ ä¹è§‚ï¼šä»å§‹è‡³ç»ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚æŸä¸€æŠŠé”ã€‚</p>\n<p>è¿™å°±å¥½æ¯”ä½ åœ¨ç§å®¶åº„å›­é‡Œè£…äº†ä¸ªçº¢ç»¿ç¯ï¼Œå¹¶ä¸”åº„å›­é‡Œåªæœ‰ä½ åœ¨å¼€è½¦ã€‚åå‘é”çš„åšæ³•ä¾¿æ˜¯åœ¨çº¢ç»¿ç¯å¤„è¯†åˆ«æ¥è½¦çš„è½¦ç‰Œå·ã€‚å¦‚æœåŒ¹é…åˆ°ä½ çš„è½¦ç‰Œå·ï¼Œé‚£ä¹ˆç›´æ¥äº®ç»¿ç¯ã€‚</p>\n<p>å…·ä½“æ¥è¯´ï¼Œåœ¨çº¿ç¨‹è¿›è¡ŒåŠ é”æ—¶ï¼Œå¦‚æœè¯¥é”å¯¹è±¡æ”¯æŒåå‘é”ï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºä¼šé€šè¿‡CASæ“ä½œï¼Œå°†å½“å‰çº¿ç¨‹çš„åœ°å€è®°å½•åœ¨é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¹‹ä¸­ï¼Œå¹¶ä¸”å°†æ ‡è®°å­—æ®µçš„æœ€åä¸‰ä½è®¾ç½®ä¸º101ã€‚</p>\n<p>åœ¨æ¥ä¸‹æ¥çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯å½“æœ‰çº¿ç¨‹è¯·æ±‚è¿™æŠŠé”ï¼ŒJavaè™šæ‹Ÿæœºåªéœ€åˆ¤æ–­é”å¯¹è±¡æ ‡è®°å­—æ®µä¸­ï¼šæœ€åä¸‰ä½æ˜¯å¦ä¸º101ï¼Œæ˜¯å¦åŒ…å«å½“å‰çº¿ç¨‹çš„åœ°å€ï¼Œä»¥åŠepochå€¼æ˜¯å¦å’Œé”å¯¹è±¡çš„ç±»çš„epochå€¼ç›¸åŒã€‚å¦‚æœéƒ½æ»¡è¶³ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹æŒæœ‰è¯¥åå‘é”ï¼Œå¯ä»¥ç›´æ¥è¿”å›ã€‚</p>\n<p>è¿™é‡Œçš„epochå€¼æ˜¯ä¸€ä¸ªä»€ä¹ˆæ¦‚å¿µå‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬å…ˆä»åå‘é”çš„æ’¤é”€è®²èµ·ã€‚å½“è¯·æ±‚åŠ é”çš„çº¿ç¨‹å’Œé”å¯¹è±¡æ ‡è®°å­—æ®µä¿æŒçš„çº¿ç¨‹åœ°å€ä¸åŒ¹é…æ—¶ï¼ˆè€Œä¸”epochå€¼ç›¸ç­‰ï¼Œå¦‚è‹¥ä¸ç­‰ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å¯ä»¥å°†è¯¥é”é‡åå‘è‡³è‡ªå·±ï¼‰ï¼ŒJavaè™šæ‹Ÿæœºéœ€è¦æ’¤é”€è¯¥åå‘é”ã€‚è¿™ä¸ªæ’¤é”€è¿‡ç¨‹éå¸¸éº»çƒ¦ï¼Œå®ƒè¦æ±‚æŒæœ‰åå‘é”çš„çº¿ç¨‹åˆ°è¾¾å®‰å…¨ç‚¹ï¼Œå†å°†åå‘é”æ›¿æ¢æˆè½»é‡çº§é”ã€‚</p>\n<p>å¦‚æœæŸä¸€ç±»é”å¯¹è±¡çš„æ€»æ’¤é”€æ•°è¶…è¿‡äº†ä¸€ä¸ªé˜ˆå€¼ï¼ˆå¯¹åº”Javaè™šæ‹Ÿæœºå‚æ•°-XX:BiasedLockingBulkRebiasThresholdï¼Œé»˜è®¤ä¸º20ï¼‰ï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºä¼šå®£å¸ƒè¿™ä¸ªç±»çš„åå‘é”å¤±æ•ˆã€‚</p>\n<p>å…·ä½“çš„åšæ³•ä¾¿æ˜¯åœ¨æ¯ä¸ªç±»ä¸­ç»´æŠ¤ä¸€ä¸ªepochå€¼ï¼Œä½ å¯ä»¥ç†è§£ä¸ºç¬¬å‡ ä»£åå‘é”ã€‚å½“è®¾ç½®åå‘é”æ—¶ï¼ŒJavaè™šæ‹Ÿæœºéœ€è¦å°†è¯¥epochå€¼å¤åˆ¶åˆ°é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¸­ã€‚</p>\n<p>åœ¨å®£å¸ƒæŸä¸ªç±»çš„åå‘é”å¤±æ•ˆæ—¶ï¼ŒJavaè™šæ‹Ÿæœºå®åˆ™å°†è¯¥ç±»çš„epochå€¼åŠ 1ï¼Œè¡¨ç¤ºä¹‹å‰é‚£ä¸€ä»£çš„åå‘é”å·²ç»å¤±æ•ˆã€‚è€Œæ–°è®¾ç½®çš„åå‘é”åˆ™éœ€è¦å¤åˆ¶æ–°çš„epochå€¼ã€‚</p>\n<p>ä¸ºäº†ä¿è¯å½“å‰æŒæœ‰åå‘é”å¹¶ä¸”å·²åŠ é”çš„çº¿ç¨‹ä¸è‡³äºå› æ­¤ä¸¢é”ï¼ŒJavaè™šæ‹Ÿæœºéœ€è¦éå†æ‰€æœ‰çº¿ç¨‹çš„Javaæ ˆï¼Œæ‰¾å‡ºè¯¥ç±»å·²åŠ é”çš„å®ä¾‹ï¼Œå¹¶ä¸”å°†å®ƒä»¬æ ‡è®°å­—æ®µä¸­çš„epochå€¼åŠ 1ã€‚è¯¥æ“ä½œéœ€è¦æ‰€æœ‰çº¿ç¨‹å¤„äºå®‰å…¨ç‚¹çŠ¶æ€ã€‚</p>\n<p>å¦‚æœæ€»æ’¤é”€æ•°è¶…è¿‡å¦ä¸€ä¸ªé˜ˆå€¼ï¼ˆå¯¹åº”Javaè™šæ‹Ÿæœºå‚æ•° -XX:BiasedLockingBulkRevokeThresholdï¼Œé»˜è®¤å€¼ä¸º40ï¼‰ï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºä¼šè®¤ä¸ºè¿™ä¸ªç±»å·²ç»ä¸å†é€‚åˆåå‘é”ã€‚æ­¤æ—¶ï¼ŒJavaè™šæ‹Ÿæœºä¼šæ’¤é”€è¯¥ç±»å®ä¾‹çš„åå‘é”ï¼Œå¹¶ä¸”åœ¨ä¹‹åçš„åŠ é”è¿‡ç¨‹ä¸­ç›´æ¥ä¸ºè¯¥ç±»å®ä¾‹è®¾ç½®è½»é‡çº§é”ã€‚</p>\n<h2>æ€»ç»“ä¸å®è·µ</h2>\n<p>ä»Šå¤©æˆ‘ä»‹ç»äº†Javaè™šæ‹Ÿæœºä¸­synchronizedå…³é”®å­—çš„å®ç°ï¼ŒæŒ‰ç…§ä»£ä»·ç”±é«˜è‡³ä½å¯åˆ†ä¸ºé‡é‡çº§é”ã€è½»é‡çº§é”å’Œåå‘é”ä¸‰ç§ã€‚</p>\n<p>é‡é‡çº§é”ä¼šé˜»å¡ã€å”¤é†’è¯·æ±‚åŠ é”çš„çº¿ç¨‹ã€‚å®ƒé’ˆå¯¹çš„æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶ç«äº‰åŒä¸€æŠŠé”çš„æƒ…å†µã€‚Javaè™šæ‹Ÿæœºé‡‡å–äº†è‡ªé€‚åº”è‡ªæ—‹ï¼Œæ¥é¿å…çº¿ç¨‹åœ¨é¢å¯¹éå¸¸å°çš„synchronizedä»£ç å—æ—¶ï¼Œä»ä¼šè¢«é˜»å¡ã€å”¤é†’çš„æƒ…å†µã€‚</p>\n<p>è½»é‡çº§é”é‡‡ç”¨CASæ“ä½œï¼Œå°†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µæ›¿æ¢ä¸ºä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å½“å‰çº¿ç¨‹æ ˆä¸Šçš„ä¸€å—ç©ºé—´ï¼Œå­˜å‚¨ç€é”å¯¹è±¡åŸæœ¬çš„æ ‡è®°å­—æ®µã€‚å®ƒé’ˆå¯¹çš„æ˜¯å¤šä¸ªçº¿ç¨‹åœ¨ä¸åŒæ—¶é—´æ®µç”³è¯·åŒä¸€æŠŠé”çš„æƒ…å†µã€‚</p>\n<p>åå‘é”åªä¼šåœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶é‡‡ç”¨CASæ“ä½œï¼Œåœ¨é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¸­è®°å½•ä¸‹å½“å‰çº¿ç¨‹çš„åœ°å€ã€‚åœ¨ä¹‹åçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŒæœ‰è¯¥åå‘é”çš„çº¿ç¨‹çš„åŠ é”æ“ä½œå°†ç›´æ¥è¿”å›ã€‚å®ƒé’ˆå¯¹çš„æ˜¯é”ä»…ä¼šè¢«åŒä¸€çº¿ç¨‹æŒæœ‰çš„æƒ…å†µã€‚</p>\n<p>ä»Šå¤©çš„å®è·µç¯èŠ‚ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸ªåŠé—´ä¼ é—»ï¼šè°ƒç”¨Object.hashCode()ä¼šå…³é—­è¯¥å¯¹è±¡çš„åå‘é”[1]ã€‚</p>\n<p>ä½ å¯ä»¥é‡‡ç”¨å‚æ•°-XX:+PrintBiasedLockingStatisticsæ¥æ‰“å°å„ç±»é”çš„ä¸ªæ•°ã€‚ç”±äºC2ä½¿ç”¨çš„æ˜¯å¦å¤–ä¸€ä¸ªå‚æ•°-XX:+PrintPreciseBiasedLockingStatisticsï¼Œå› æ­¤ä½ å¯ä»¥é™åˆ¶Javaè™šæ‹Ÿæœºä»…ä½¿ç”¨C1æ¥å³æ—¶ç¼–è¯‘ï¼ˆå¯¹åº”å‚æ•°-XX:TieredStopAtLevel=1ï¼‰ã€‚</p>\n<ol>\n<li>é€šè¿‡å‚æ•°-XX:+UseBiasedLockingï¼Œæ¯”è¾ƒå¼€å…³åå‘é”æ—¶çš„è¾“å‡ºç»“æœã€‚</li>\n<li>åœ¨mainæ–¹æ³•çš„å¾ªç¯å‰æ·»åŠ lock.hashCodeè°ƒç”¨ï¼Œå¹¶æŸ¥çœ‹è¾“å‡ºç»“æœã€‚</li>\n<li>åœ¨Lockç±»ä¸­å¤å†™hashCodeæ–¹æ³•ï¼Œå¹¶æŸ¥çœ‹è¾“å‡ºç»“æœã€‚</li>\n<li>åœ¨mainæ–¹æ³•çš„å¾ªç¯å‰æ·»åŠ System.identityHashCodeè°ƒç”¨ï¼Œå¹¶æŸ¥çœ‹è¾“å‡ºç»“æœã€‚</li>\n</ol>\n<pre><code>// Run with -XX:+UnlockDiagnosticVMOptions -XX:+PrintBiasedLockingStatistics -XX:TieredStopAtLevel=1\npublic class SynchronizedTest {\n\n  static Lock lock = new Lock();\n  static int counter = 0;\n\n  public static void foo() {\n    synchronized (lock) {\n      counter++;\n    }\n  }\n\n  public static void main(String[] args) throws InterruptedException {\n    // lock.hashCode(); // Step 2\n    // System.identityHashCode(lock); // Step 4\n    for (int i = 0; i &lt; 1_000_000; i++) {\n      foo();\n    }\n  }\n\n  static class Lock {\n    // @Override public int hashCode() { return 0; } // Step 3\n  }\n}\n</code></pre>\n<p>[1] <a href=\"https://blogs.oracle.com/dave/biased-locking-in-hotspot\">https://blogs.oracle.com/dave/biased-locking-in-hotspot</a></p>\n<p></p>\n","neighbors":{"left":{"article_title":"13 | Javaå†…å­˜æ¨¡å‹","id":13484},"right":{"article_title":"15 | Javaè¯­æ³•ç³–ä¸Javaç¼–è¯‘å™¨","id":13781}},"comments":[{"had_liked":false,"id":22585,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1535806920,"is_pvip":false,"replies":[{"id":"8204","content":"å¤šè°¢å»ºè®®ï¼<br><br>æœ¬æ–‡çš„è®²è§£æµç¨‹æ˜¯ä»é€šç”¨é”ç®—æ³•åˆ°é’ˆå¯¹ç‰¹æ®Šæƒ…å†µçš„é”ç®—æ³•æ¥çš„ã€‚ä¸€å¼€å§‹monitorenteræ˜¯ç”¨é‡å‹é”çš„ï¼Œç„¶åä¸ºäº†é’ˆå¯¹æ²¡æœ‰ç«äº‰é”çš„æƒ…å†µæœ‰äº†è½»å‹é”ï¼Œå†ç„¶åä¸ºäº†é’ˆå¯¹åªæœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰æŸä¸ªé”çš„æƒ…å†µæœ‰äº†åå‘é”ã€‚","user_name":"ä½œè€…å›å¤","comment_id":22585,"uid":"1176688","ip_address":"","utype":1,"ctime":1535967191,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":4,"race_medal":0,"score":"121794891208","product_id":100010301,"comment_content":"æ©ï¼Œä»Šå¤©æ‰è¡¥ä¸Šå°ç»“ï¼Œå› ä¸ºå¬ä¸æ˜ç™½äº†ï¼Œåæ¥åå¤å¬ä»¥åŠè¡¥ä¸Šé”çš„ç›¸å…³çŸ¥è¯†æ‰æœ‰ç‚¹æ˜ç™½ã€‚<br>æˆ‘è®¤ä¸ºé›¨è¿ªç¡®å®åº”è¯¥è¡¥ä¸Šç‚¹å›¾ï¼Œè¿™æ ·æ‰æ›´å®¹æ˜“ç†è§£ï¼Œå¦åˆ™ç¡®å®æŠ½è±¡ï¼Œå¦å¤–ï¼Œæˆ‘è§‰å¾—è®²è§£çš„æ¬¡åºæœ‰ç‚¹å°é—®é¢˜ã€‚<br>å¦‚æœè¿™æ ·è®²å°±æ›´å®¹æ˜“ç†è§£äº†ï¼ˆä¸ªäººè§è§£ï¼‰<br>1:è®²è§£ä¸€ä¸‹é”çš„æœ¬è´¨ï¼Œé”åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿé”çš„ç‰¹ç‚¹å®¹æ˜“ç†è§£ï¼Œæ¯•ç«Ÿéƒ½è§è¿‡æ‘¸è¿‡ç”¨è¿‡<br><br>2:è®²è§£ä¸€ä¸‹é”çš„åˆ†ç±»å’Œç‰¹ç‚¹ï¼Œä»€ä¹ˆè¡¨é”ã€è¡Œé”ã€è‡ªæ—‹é”ã€å¯é‡ç”¨é”ã€è½»é‡é”ã€é‡é‡é”ã€é˜»å¡é”ã€çº¿ç¨‹é”ã€è¿›ç¨‹é”ã€åˆ†å¸ƒå¼é”ã€åå‘é”ç­‰ç­‰å§ï¼éƒ½æ˜¯ç«™åœ¨ä¸åŒçš„è§’åº¦æˆ–å±‚çº§æ ¹æ®é”çš„ç‰¹ç‚¹ï¼Œä¸ºäº†å¥½åŒºåˆ†ç»™é”èµ·çš„åå­—<br><br>3:è®²è§£ä¸€ä¸‹JVMä¸­çš„å„ç§é”ï¼Œè®²è§£ä¸€ä¸‹ä»–ä»¬çš„ç‰¹ç‚¹å’Œå®ç°ï¼Œç„¶åè®²è§£ä¸€ä¸‹å’±ä»¬æœ¬èŠ‚çš„ä¸»è§’æ˜¯å±äºå“ªä¸€ç§æˆ–å“ªå‡ ç§é”<br><br>4:æˆ‘çš„ç†è§£ï¼Œé”çš„æœ¬è´¨-åœ¨ç¨‹åºä¸–ç•Œé‡Œæ˜¯ä¸€ç§ä¿è¯èµ„æºæ­£ç¡®ç«äº‰çš„æœºåˆ¶ï¼Œå¦‚æœæ²¡æœ‰å¯¹åŒä¸€èµ„æºç«äº‰ä¹Ÿå°±æ²¡æœ‰äº†é”å­˜åœ¨çš„æ„ä¹‰ï¼Œåœ¨è®¡ç®—ä¸–ç•Œä¸­èµ„æºå¼•èµ·ç«äº‰çš„æ ¸å¿ƒåŸºæœ¬æ˜¯ç©ºé—´ï¼Œæœ‰å…¶æ˜¯è®¡ç®—æœºçš„å†…å­˜ç©ºé—´ï¼Œå½“ç„¶æ•°æ®è‚¯å®šä¹Ÿæ˜¯ä¸€ç§å¼•èµ·æ¿€çƒˆç«äº‰çš„èµ„æºï¼Œä¸è¿‡å¾€å¾€ä¼šä½“ç°åˆ°ç©ºé—´ä¸Šå»ï¼Œå› ä¸ºè®¡ç®—æœºä¸­çš„æ•°æ®å¿…å®šå­˜äºæŸç©ºé—´åœ°å€ä¹‹ä¸­çš„<br><br>5:æ„Ÿè§‰æ˜ç™½å¯é‡ç”¨é”çš„å®ç°åŸç†äº†ï¼Œè¿™ä¸ªä¹Ÿæ˜¯é›¨è¿ªè®²çš„æœ€ç»†è‡´çš„ä¸€ç§å®ç°æ–¹å¼ï¼Œæ©ï¼Œéå¸¸æ„Ÿè°¢ğŸ™","like_count":29,"discussions":[{"author":{"id":1166966,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ce/76/a344ccad.jpg","nickname":"æ”¾ç¾Šçš„æ‘é•¿","note":"","ucode":"AF948FCE8079B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337276,"discussion_content":"ä½œè€…æ˜¯ç«™åœ¨ç ”ç©¶äººå‘˜çš„è§’åº¦ï¼Œä¸€æ­¥æ­¥çš„ä»é‡é‡çº§çš„é”å‘å±•åˆ°ç°åœ¨çš„è½»é‡çº§çš„é”å’Œåå‘é”ï¼Œå¤–é¢çš„è®ºå›çš„æ–‡ç« éƒ½æ˜¯å¼Ÿå¼Ÿï¼Œè¿™æ‰æ˜¯ä¸€ä¸ªæŠ€æœ¯å‘å±•åº”è¯¥æœ‰çš„æµç¨‹","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1608860379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423175,"discussion_content":"å¤šè°¢å»ºè®®ï¼\n\næœ¬æ–‡çš„è®²è§£æµç¨‹æ˜¯ä»é€šç”¨é”ç®—æ³•åˆ°é’ˆå¯¹ç‰¹æ®Šæƒ…å†µçš„é”ç®—æ³•æ¥çš„ã€‚ä¸€å¼€å§‹monitorenteræ˜¯ç”¨é‡å‹é”çš„ï¼Œç„¶åä¸ºäº†é’ˆå¯¹æ²¡æœ‰ç«äº‰é”çš„æƒ…å†µæœ‰äº†è½»å‹é”ï¼Œå†ç„¶åä¸ºäº†é’ˆå¯¹åªæœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰æŸä¸ªé”çš„æƒ…å†µæœ‰äº†åå‘é”ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1535967191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048366,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ff/2e/ca3960b0.jpg","nickname":"åœ¨é‡","note":"","ucode":"A700B41D34F58C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261953,"discussion_content":"è¿™å—å†…å®¹çœ‹å¤šäº†åå†å›æ¥çœ‹ï¼Œæ„Ÿè§‰è®²å¾—æ²¡å¤´æ²¡å°¾ç¾ç­‹æ²¡éª¨ï¼Œå“ã€‚ã€‚ã€‚ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589028115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1297630,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","nickname":"å‰‘å…«","note":"","ucode":"0A09F41DB8A4E7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282748,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592062555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21044,"user_name":"çˆªå“‡å¤œæœªçœ ","can_delete":false,"product_type":"c1","uid":1006025,"ip_address":"","ucode":"BBEB80EB670770","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/c9/f44cb7f3.jpg","comment_is_top":false,"comment_ctime":1534898066,"is_pvip":false,"replies":[{"id":"7427","content":"ä¸å¥½æ„æ€å“ˆï¼Œå› ä¸ºç½‘ä¸Šæœ‰å¾ˆå¤šå›¾ï¼Œå¿˜äº†æ”¾ä¸ªé“¾æ¥äº†ã€‚<br><br>ä½ å¯ä»¥å‚è€ƒwiki.openjdk.java.net&#47;display&#47;HotSpot&#47;Synchronizationä¸­çš„å›¾ã€‚","user_name":"ä½œè€…å›å¤","comment_id":21044,"uid":"1176688","ip_address":"","utype":1,"ctime":1534931605,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"96024178578","product_id":100010301,"comment_content":"å¤ªæŠ½è±¡äº†ï¼Œè€å¸ˆèƒ½ç”»ç‚¹å„¿å›¾å—â€¦â€¦","like_count":22,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422510,"discussion_content":"ä¸å¥½æ„æ€å“ˆï¼Œå› ä¸ºç½‘ä¸Šæœ‰å¾ˆå¤šå›¾ï¼Œå¿˜äº†æ”¾ä¸ªé“¾æ¥äº†ã€‚\n\nä½ å¯ä»¥å‚è€ƒwiki.openjdk.java.net/display/HotSpot/Synchronizationä¸­çš„å›¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534931605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":41528,"user_name":"QlDoors","can_delete":false,"product_type":"c1","uid":1005911,"ip_address":"","ucode":"394F3E6CE39392","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/57/449e76fb.jpg","comment_is_top":false,"comment_ctime":1542801590,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"83147180214","product_id":100010301,"comment_content":"ç»ƒä¹ è¯•äº†æ— æ•°éï¼Œéƒ½æ²¡æœ‰åå‘é”ï¼Œåæ¥ä¸Šç½‘æŸ¥æ‰å‘ç°éœ€è¦åŠ -XX:BiasedLockingStartupDelay=0ã€‚<br><br>http:&#47;&#47;zhizus.com&#47;2018-09-03-%E5%81%8F%E5%90%91%E9%94%81.html<br><br>æ³¨æ„ï¼šHotspotè™šæ‹Ÿæœºåœ¨å¼€æœºå¯åŠ¨åæœ‰ä¸ªå»¶è¿Ÿï¼ˆ4sï¼‰ï¼Œç»è¿‡å»¶è¿Ÿåæ‰ä¼šå¯¹æ¯ä¸ªåˆ›å»ºçš„å¯¹è±¡å¼€å¯åå‘é”ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸‹é¢çš„å‚æ•°æ¥ä¿®æ”¹è¿™ä¸ªå»¶è¿Ÿï¼Œæˆ–è€…ç›´æ¥sleepä¸€æ®µæ—¶é—´-XX:BiasedLockingStartupDelay=0","like_count":20,"discussions":[{"author":{"id":1179184,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/30/c9b568c3.jpg","nickname":"NullPointer","note":"","ucode":"83B7DA926A0411","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297048,"discussion_content":"åˆšå¯åŠ¨JVMå†…éƒ¨æœ‰å¾ˆå¤šçº¿ç¨‹è·‘ï¼Œæ‰€ä»¥å¼€å§‹å¹¶æ²¡æœ‰ä½¿ç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596760120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21221,"user_name":"è°¢é˜³","can_delete":false,"product_type":"c1","uid":1019623,"ip_address":"","ucode":"A9ABD36885E7AA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/e7/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1534983429,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"78844394757","product_id":100010301,"comment_content":"å¦‚æœä¸æ˜¯ Xâ€¦X01ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ã€‚ç¬¬ä¸€ï¼Œè¯¥çº¿ç¨‹é‡å¤è·å–åŒä¸€æŠŠé”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†é”è®°å½•æ¸…é›¶ï¼Œä»¥ä»£è¡¨è¯¥é”è¢«é‡å¤è·å–ã€‚ç¬¬äºŒï¼Œå…¶ä»–çº¿ç¨‹æŒæœ‰è¯¥é”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†è¿™æŠŠé”è†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œå¹¶ä¸”é˜»å¡å½“å‰çº¿ç¨‹ã€‚<br><br>è€å¸ˆè¿™æ®µä¸å¤ªæ˜ç™½ã€‚1 é”è®°å½•æ¸…é›¶æ€ä¹ˆç†è§£ï¼Ÿæ”¹å˜é”å¯¹è±¡çš„æ ‡è®°å­—æ®µå—ï¼Ÿ2 é”è†¨èƒ€çš„æ—¶å€™å…¶ä»–çº¿ç¨‹è¿˜æŒæœ‰é”å¯¹è±¡å§ï¼Œè¿™ä¸ªæ—¶å€™è†¨èƒ€ä¼šå…·ä½“åšä»€ä¹ˆæ“ä½œï¼Ÿå¦‚æœæ“ä½œäº†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¼šå½±å“ç¨åé‡Šæ”¾é”çš„caså—","like_count":18,"discussions":[{"author":{"id":1508990,"avatar":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","nickname":"è¥¿é—¨å¹ç‰›","note":"","ucode":"E5D3624DDE1E83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291161,"discussion_content":"å…¶å®ä¸æ˜¯æ¸…0ï¼Œè€Œæ˜¯æŠŠ0å…¥æ ˆï¼Œ0å°±ä»£è¡¨æ˜¯é‡å¤çš„è¿›å…¥ä¸€æŠŠé”ï¼Œè¿™æ ·è§£é”çš„æ—¶å€™ï¼Œå¥½åˆ¤æ–­ï¼Œç›´æ¥å¼¹å‡º0å°±å¯","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1594720922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1128491,"avatar":"https://static001.geekbang.org/account/avatar/00/11/38/2b/9db9406b.jpg","nickname":"æ˜Ÿå¤œ","note":"","ucode":"3B46C09D994CEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310044,"discussion_content":"åº”è¯¥å°±æ˜¯ä¸€ç§æ ‡è¯†ä½æˆ–è€…è¯´çš„é”çŠ¶æ€00ï¼Œæ¯•ç«Ÿæ­¤æ—¶åªæœ‰ä¸¤ç§çŠ¶æ€ï¼Œä¸€ç§ä¸ºå½“å‰çº¿ç¨‹æŒæœ‰åˆ™ç»§ç»­ä¿æŒè½»é‡çº§é”ï¼Œå¦ä¸€ç§ä¸æ˜¯å½“å‰çº¿ç¨‹åˆ™è†¨èƒ€ä¸ºé‡é‡çº§é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601567900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21738,"user_name":"Shine","can_delete":false,"product_type":"c1","uid":1022568,"ip_address":"","ucode":"C8C617B87C63C7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9a/68/92caeed6.jpg","comment_is_top":false,"comment_ctime":1535290311,"is_pvip":false,"replies":[{"id":"8014","content":"å¯¹çš„ï¼èµ","user_name":"ä½œè€…å›å¤","comment_id":21738,"uid":"1176688","ip_address":"","utype":1,"ctime":1535620835,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":2,"race_medal":0,"score":"65959799751","product_id":100010301,"comment_content":"â€œå½“è¿›è¡Œè§£é”æ“ä½œæ—¶ï¼Œå¦‚æœå½“å‰é”è®°å½•ï¼ˆä½ å¯ä»¥å°†ä¸€ä¸ªçº¿ç¨‹çš„æ‰€æœ‰é”è®°å½•æƒ³è±¡æˆä¸€ä¸ªæ ˆç»“æ„ï¼Œæ¯æ¬¡åŠ é”å‹å…¥ä¸€æ¡é”è®°å½•ï¼Œè§£é”å¼¹å‡ºä¸€æ¡é”è®°å½•ï¼Œå½“å‰é”è®°å½•æŒ‡çš„ä¾¿æ˜¯æ ˆé¡¶çš„é”è®°å½•ï¼‰çš„å€¼ä¸º 0ï¼Œåˆ™ä»£è¡¨é‡å¤è¿›å…¥åŒä¸€æŠŠé”ï¼Œç›´æ¥è¿”å›å³å¯ã€‚â€<br>è¿™ç§æƒ…å†µä¹Ÿéœ€è¦å¼¹å‡ºå½“å‰é”è®°å½•çš„å§ï¼Ÿ ä¸ç„¶é”è®°å½•ä¸€ç›´æ˜¯0ä¸å˜äº†ã€‚ å¦‚æœæ˜¯æˆ‘è¿™æ ·ç†è§£çš„è¯ï¼Œé‡å¤è·å–åŒä¸€æŠŠé”çš„è¯ï¼Œä¸æ˜¯ç®€å•åœ°æ¸…é›¶ï¼Œè€Œåº”è¯¥æ˜¯æŠŠ0ä½œä¸ºä¸€æ¡æ–°çš„é”è®°å½•å‹å…¥æ ˆé¡¶ã€‚<br>ä¸çŸ¥é“æˆ‘è¿™æ ·ç†è§£å¯¹ä¸ï¼Ÿè¯·è€å¸ˆæŒ‡ç‚¹","like_count":16,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422835,"discussion_content":"å¯¹çš„ï¼èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535620835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261360,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/30/23f6b413.jpg","nickname":"äº”åä¹ç§’","note":"","ucode":"1F34F62193CFF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":264653,"discussion_content":"è¿˜æ˜¯æ²¡æ‡‚ï¼Œå¦‚æœçº¿ç¨‹æŒæœ‰å¤šæŠŠé”å‘¢ï¼Ÿä¸ºä»€ä¹ˆæ˜¯æ ˆé¡¶çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589341261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234355,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1594652763,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"53134260315","product_id":100010301,"comment_content":"å¬äº†Næ¬¡ï¼Œä»”ç»†è¯»äº†ä¸€éï¼Œè¿˜æ˜¯ä¸å¤Ÿã€‚æœ‰åŒæ ·æƒ…å†µçš„ï¼Œèµèµ·","like_count":12},{"had_liked":false,"id":21071,"user_name":"NEOğŸ‹","can_delete":false,"product_type":"c1","uid":1166817,"ip_address":"","ucode":"802C34758A5185","user_header":"https://static001.geekbang.org/account/avatar/00/11/cd/e1/368f872c.jpg","comment_is_top":false,"comment_ctime":1534901436,"is_pvip":false,"replies":[{"id":"7416","content":"å“ˆï¼Œè¿™ä¸ªå±äºåº”ç”¨ç¨‹åºçš„é—®é¢˜ï¼ŒJVMåªæ˜¯è§‚å¯Ÿåˆ°è¿™ç§æƒ…å†µï¼Œå¹¶å°è¯•åšå‡ºä¼˜åŒ–ã€‚<br><br>æœ‰ä¸€ç§å¯èƒ½ï¼Œå°±æ˜¯å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹é¢‘ç¹åŠ é”ï¼Œåé¢æ¢æˆå¦å¤–çš„çº¿ç¨‹ï¼Œè¿™æ ·å‰é¢é‚£æ®µæ—¶é—´å¯ä»¥ç”¨åå‘é”ã€‚","user_name":"ä½œè€…å›å¤","comment_id":21071,"uid":"1176688","ip_address":"","utype":1,"ctime":1534929002,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"48779541692","product_id":100010301,"comment_content":"è€å¸ˆå…³äºåå‘é”æœ‰ä¸ªç–‘é—® â€œå®ƒé’ˆå¯¹çš„æ˜¯é”ä»…ä¼šè¢«åŒä¸€çº¿ç¨‹æŒæœ‰çš„æƒ…å†µã€‚â€ å¦‚æœåªæœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é” è¿˜æœ‰å¿…è¦åŠ é”å—ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422519,"discussion_content":"å“ˆï¼Œè¿™ä¸ªå±äºåº”ç”¨ç¨‹åºçš„é—®é¢˜ï¼ŒJVMåªæ˜¯è§‚å¯Ÿåˆ°è¿™ç§æƒ…å†µï¼Œå¹¶å°è¯•åšå‡ºä¼˜åŒ–ã€‚\n\næœ‰ä¸€ç§å¯èƒ½ï¼Œå°±æ˜¯å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹é¢‘ç¹åŠ é”ï¼Œåé¢æ¢æˆå¦å¤–çš„çº¿ç¨‹ï¼Œè¿™æ ·å‰é¢é‚£æ®µæ—¶é—´å¯ä»¥ç”¨åå‘é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534929002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":33690,"user_name":"Geek_987169","can_delete":false,"product_type":"c1","uid":1180853,"ip_address":"","ucode":"4B2955A044805D","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/b5/8bc4790b.jpg","comment_is_top":false,"comment_ctime":1539854266,"is_pvip":false,"replies":[{"id":"12757","content":"1. å•å‘ä¸å¯é€† é’ˆå¯¹ä¸€ä¸ªå¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚<br><br>epoch+1å‘ç”Ÿåœ¨å¤šæ¬¡åŒä¸€ç±»å‹çš„å®ä¾‹çš„åå‘é”æ’¤é”€ä¹‹åï¼Œå­˜æ”¾åœ¨ç±»å‹(Class)é‚£é‡Œçš„ã€‚<br><br>2. å½“é¢‘ç¹æ£€æµ‹åˆ°æŸä¸ªç±»çš„å®ä¾‹å‡ºç°æ’¤é”€åå‘é”çš„ï¼Œå°±ä»£è¡¨è¿™ä¸ªç±»ä¸é€‚åˆç”¨æ¥æåå‘é”ã€‚","user_name":"ä½œè€…å›å¤","comment_id":33690,"uid":"1176688","ip_address":"","utype":1,"ctime":1540821406,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"31604625338","product_id":100010301,"comment_content":"è€å¸ˆè¯·æ•™ä¸ªé—®é¢˜ï¼š<br>1ï¼šé”ä»åå‘ä¸€ç›´åˆ°é‡é‡çº§çš„è¿‡ç¨‹æ˜¯&quot;å•å‘ä¸å¯é€†&quot;çš„ï¼Œè¿™ä¸ª&quot;å•å‘ä¸å¯é€†&quot;æ˜¯é™åˆ¶åœ¨å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œè¿˜æ˜¯åœ¨å¯¹è±¡åˆ°è¾¾äº†æŸä¸ªçŠ¶æ€åå†æ¬¡æœ‰çº¿ç¨‹ä½¿ç”¨å…¶ä½œä¸ºé”å¯¹è±¡è¿˜ä¼šç»§ç»­é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Ÿä»æ¯æ’¤é”€ä¸€æ¬¡å¯¹è±¡çš„epochå€¼å°±ä¼š+1ï¼Œè€Œè¿™ä¸ª+1ä»£è¡¨çš„å°±æ˜¯åå‘é”å‡çº§ä¸ºè½»é‡çº§é”ï¼Œè€Œæ¯ä¸ªå¯¹è±¡åˆç»´æŠ¤äº†ä¸€ä¸ªepochå€¼ä»£è¡¨å¯¹è±¡æ’¤é”€æ¬¡æ•°ï¼ˆåå‘é”-&gt;è½»é‡çº§é”æ¬¡æ•°ï¼‰ï¼Œæ˜¯ä¸æ˜¯å°±ä»£è¡¨è¿™ä¸ªé”å‡çº§çš„è¿‡ç¨‹ä¼šåœ¨ä¸åŒçš„æ—¶é—´æ®µé‡å¤å‘ç”Ÿnè¯ï¼Ÿ<br>2ï¼šä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸€ä¸ªæœ€å¤§çš„æ’¤é”€æ¬¡æ•°ï¼ˆepochå€¼ï¼‰ï¼Œæ„ä¹‰åœ¨å“ªé‡Œï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427029,"discussion_content":"1. å•å‘ä¸å¯é€† é’ˆå¯¹ä¸€ä¸ªå¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚\n\nepoch+1å‘ç”Ÿåœ¨å¤šæ¬¡åŒä¸€ç±»å‹çš„å®ä¾‹çš„åå‘é”æ’¤é”€ä¹‹åï¼Œå­˜æ”¾åœ¨ç±»å‹(Class)é‚£é‡Œçš„ã€‚\n\n2. å½“é¢‘ç¹æ£€æµ‹åˆ°æŸä¸ªç±»çš„å®ä¾‹å‡ºç°æ’¤é”€åå‘é”çš„ï¼Œå°±ä»£è¡¨è¿™ä¸ªç±»ä¸é€‚åˆç”¨æ¥æåå‘é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540821406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21176,"user_name":"è´¾æ™ºæ–‡","can_delete":false,"product_type":"c1","uid":1100235,"ip_address":"","ucode":"600CF0AB215D1A","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/cb/7b6802cc.jpg","comment_is_top":false,"comment_ctime":1534951584,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27304755360","product_id":100010301,"comment_content":"æ–‡ä¸­è¯´è½»é‡çº§é”å› ä¸ºå†…å­˜å¯¹é½æ‰€ä»¥æ ‡è¯†ä½æ˜¯00ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆé‡é‡çº§é”çš„æ—¶å€™ï¼Œå­˜å‚¨å†…å®¹ä¹Ÿæ˜¯æŒ‡é’ˆï¼Œå´æ²¡æœ‰å†…å­˜å¯¹é½å‘¢ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1768152,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/fa/d8/7c2b6c0b.jpg","nickname":"é—²äºº","note":"","ucode":"9A8F33260A44E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135354,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯:é‡é‡çº§é”ä¹Ÿæ˜¯å¯¹é½çš„ï¼Œåªæ˜¯æŠŠlockå çš„ä¸¤ä½æ”¹ä¸ºäº†10ï¼Œè½»é‡çº§é”æ²¡åšå˜æ›´ä¸º00,èŠ‚çœäº†cpuæ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579088174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57985,"user_name":"ç¬¬9æ ¹çƒŸ","can_delete":false,"product_type":"c1","uid":1117723,"ip_address":"","ucode":"7EBDF6E695855A","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/1b/1902d6fa.jpg","comment_is_top":false,"comment_ctime":1546956693,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23021793173","product_id":100010301,"comment_content":"è¿™è¾¹éªŒè¯äº†Object.hashCode() ä¸ä¼šå…³é—­è¯¥å¯¹è±¡çš„åå‘é”ã€‚ã€‚ä¸çŸ¥é“æœ€åç­”æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿå“ªé‡Œæœ‰å…¨ç¯‡çš„è¯¾åä½œä¸šçš„ç­”æ¡ˆï¼Ÿ","like_count":4},{"had_liked":false,"id":156734,"user_name":"æœ¨å¿ƒ","can_delete":false,"product_type":"c1","uid":1043293,"ip_address":"","ucode":"538A3B9B214BF7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/eb/5d/2467ad6c.jpg","comment_is_top":false,"comment_ctime":1574944007,"is_pvip":false,"replies":[{"id":"60615","content":"è‡ªæ—‹æœ¬è´¨æ˜¯ç©ºè½¬cpuç­‰å¾…ï¼Œåªæœ‰åœ¨åˆ«äººæ‹¿ç€é”ï¼Œè‡ªå·±è¯·æ±‚é”çš„æƒ…å†µä¸‹å‘ç”Ÿã€‚åå‘é”æ— éœ€æ­¤æ­¥éª¤ï¼Œæ ˆé”åˆ«äººæ²¡æœ‰æŒæœ‰é”ï¼Œä¹Ÿä¸éœ€è¦è‡ªæ—‹","user_name":"ä½œè€…å›å¤","comment_id":156734,"uid":"1176688","ip_address":"","utype":1,"ctime":1575365885,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":6,"race_medal":0,"score":"18754813191","product_id":100010301,"comment_content":"å¾ˆå¤šæ–‡ç« è¯´ è‡ªæ—‹ æ˜¯åœ¨è½»é‡çº§é”ä¸­å‘ç”Ÿçš„ ã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹<br>ä½†æ˜¯åœ¨è¿™é‡Œ è‡ªæ—‹ æ˜¯åœ¨é‡é‡çº§é”ä¸­<br>è¿™ä¸ªæ€ä¹ˆè§£é‡Šå‘¢?<br>https:&#47;&#47;www.aimoon.site&#47;blog&#47;2018&#47;05&#47;21&#47;biased-locking&#47;<br>","like_count":4,"discussions":[{"author":{"id":1397031,"avatar":"https://static001.geekbang.org/account/avatar/00/15/51/27/f0dd6f19.jpg","nickname":"è€ç™½","note":"","ucode":"39881175152D49","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93380,"discussion_content":"çœ‹äº†ä¸‹æºç æ›´æ–°ä¸€ä¸‹ï¼Œé‡é‡çº§é”è·å–è¿‡ç¨‹ä¸­ä¹Ÿæœ‰è‡ªæ—‹æ“ä½œï¼Œé™ä½ç³»ç»Ÿè°ƒç”¨å¼•èµ·çš„å¼€é”€ã€‚","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1576924264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476216,"discussion_content":"è‡ªæ—‹æœ¬è´¨æ˜¯ç©ºè½¬cpuç­‰å¾…ï¼Œåªæœ‰åœ¨åˆ«äººæ‹¿ç€é”ï¼Œè‡ªå·±è¯·æ±‚é”çš„æƒ…å†µä¸‹å‘ç”Ÿã€‚åå‘é”æ— éœ€æ­¤æ­¥éª¤ï¼Œæ ˆé”åˆ«äººæ²¡æœ‰æŒæœ‰é”ï¼Œä¹Ÿä¸éœ€è¦è‡ªæ—‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575365885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1818343,"avatar":"","nickname":"åˆ˜åŒé’","note":"","ucode":"84B62DF8BC61FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278761,"discussion_content":"mark,  è¿™ç‚¹æˆ‘ä¹Ÿæœ‰ç–‘é—®ï¼Œç°åœ¨ä¸æ¸…æ¥šè‡ªæ—‹åˆ°åº•å‘ç”Ÿåœ¨å“ªé‡Œäº†ğŸ˜‚ğŸ˜‚ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591232910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043293,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/eb/5d/2467ad6c.jpg","nickname":"æœ¨å¿ƒ","note":"","ucode":"538A3B9B214BF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70549,"discussion_content":"åå‘é”æ˜¯ä¸éœ€è¦çš„ï¼Œä½†æ˜¯è½»é‡çº§é”å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575366884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1397031,"avatar":"https://static001.geekbang.org/account/avatar/00/15/51/27/f0dd6f19.jpg","nickname":"è€ç™½","note":"","ucode":"39881175152D49","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1043293,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/eb/5d/2467ad6c.jpg","nickname":"æœ¨å¿ƒ","note":"","ucode":"538A3B9B214BF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93212,"discussion_content":"synchronized é‡Œé¢çš„è‡ªæ—‹å°±æ˜¯åœ¨è½»é‡çº§é”è·å–è¿‡ç¨‹ä¸­ï¼Œåå‘å’Œé‡é‡çº§æ²¡æœ‰ã€‚é‡é‡çº§é”æ˜¯ç›´æ¥ç”¨äº†åº•å±‚çš„mutexäº†ï¼Œåˆ¤æ–­æ˜¯é‡é‡çº§é”åå°±å»ç³»ç»Ÿè°ƒç”¨åŠ é”ï¼Œä¼šé˜»å¡ã€‚è½»é‡çº§é”å¼•å…¥è‡ªæ—‹æ˜¯å› ä¸ºå°½é‡ä¸è®©çº¿ç¨‹è¿›å…¥ç³»ç»Ÿè°ƒç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576914770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70549,"ip_address":""},"score":93212,"extra":""},{"author":{"id":1397031,"avatar":"https://static001.geekbang.org/account/avatar/00/15/51/27/f0dd6f19.jpg","nickname":"è€ç™½","note":"","ucode":"39881175152D49","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1043293,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/eb/5d/2467ad6c.jpg","nickname":"æœ¨å¿ƒ","note":"","ucode":"538A3B9B214BF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93213,"discussion_content":"è€Œåå‘é”æ£€æŸ¥ä¸€æ¬¡å¤±è´¥åå°±è¦æ£€æµ‹æ˜¯å¦éœ€è¦å‡çº§ä¸ºè½»é‡çº§é”äº†ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰è‡ªæ—‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576914816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":70549,"ip_address":""},"score":93213,"extra":""}]}]},{"had_liked":false,"id":21164,"user_name":"å”¯ä¸€","can_delete":false,"product_type":"c1","uid":1191310,"ip_address":"","ucode":"FB9145E02E976B","user_header":"https://static001.geekbang.org/account/avatar/00/12/2d/8e/f9a22b2e.jpg","comment_is_top":false,"comment_ctime":1534946396,"is_pvip":false,"replies":[{"id":"7621","content":"è¿™ä¸ªè¯´æ³•æœ‰ç‚¹æ­§ä¹‰ã€‚<br><br>æŒ‰æˆ‘çš„ç†è§£ï¼Œä½ åº”è¯¥åœ¨é—®æ˜¯å¦ä¸ºå½“å‰çº¿ç¨‹è·å¾—è¿™æŠŠé”ï¼Ÿé‚£ä¹ˆç­”æ¡ˆæ˜¯å¯¹çš„ï¼Œä¸€ç›´æ˜¯å½“å‰çº¿ç¨‹è·å¾—è¿™æŠŠé”ã€‚<br><br>å¦å¤–ï¼Œé”æ˜¯åŠ åœ¨ç›®æ ‡é”å¯¹è±¡ä¸Šçš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":21164,"uid":"1176688","ip_address":"","utype":1,"ctime":1535117285,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"18714815580","product_id":100010301,"comment_content":"è€å¸ˆï¼Œé—®ä¸€ä¸‹åŠ é”å®é™…ä¸Šéƒ½æ˜¯åŠ åœ¨å½“å‰çº¿ç¨‹å—","like_count":4,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422559,"discussion_content":"è¿™ä¸ªè¯´æ³•æœ‰ç‚¹æ­§ä¹‰ã€‚\n\næŒ‰æˆ‘çš„ç†è§£ï¼Œä½ åº”è¯¥åœ¨é—®æ˜¯å¦ä¸ºå½“å‰çº¿ç¨‹è·å¾—è¿™æŠŠé”ï¼Ÿé‚£ä¹ˆç­”æ¡ˆæ˜¯å¯¹çš„ï¼Œä¸€ç›´æ˜¯å½“å‰çº¿ç¨‹è·å¾—è¿™æŠŠé”ã€‚\n\nå¦å¤–ï¼Œé”æ˜¯åŠ åœ¨ç›®æ ‡é”å¯¹è±¡ä¸Šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535117285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21036,"user_name":"ä½•yuan","can_delete":false,"product_type":"c1","uid":1117873,"ip_address":"","ucode":"9515496270D013","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/b1/aab3759b.jpg","comment_is_top":false,"comment_ctime":1534896469,"is_pvip":false,"replies":[{"id":"7418","content":"é»˜è®¤æƒ…å†µä¸‹æ˜¯çš„ã€‚ä»¥å‰æœ‰ä¸ªå»¶ç¼“æ¯«ç§’æ•°-XX:BiasedLockingStartupDelayï¼Œä¸€å¼€å§‹ç”¨è½»é‡çº§é”ï¼Œåœ¨å¯åŠ¨å››ç§’ä¹‹åæ‰å¼€å§‹ç”¨åå‘é”ã€‚æˆ‘è®°å¾—Java 9è¿˜æ˜¯10é»˜è®¤å€¼æ”¹ä¸º0äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":21036,"uid":"1176688","ip_address":"","utype":1,"ctime":1534929953,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":2,"race_medal":0,"score":"18714765653","product_id":100010301,"comment_content":"ä¸€ç›´è®¤ä¸ºsynchronizedæ˜¯é‡é‡é”ï¼Œæ˜¯å¦ä¹Ÿä¸ä¸€å®šï¼Ÿjvmå¤„ç†çš„æ—¶å€™æ˜¯å…ˆå°†å½“åå‘é”å¤„ç†ï¼Œç„¶åæ…¢æ…¢è†¨èƒ€ä¸ºé‡é‡çº§é”çš„æ˜¯å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422507,"discussion_content":"é»˜è®¤æƒ…å†µä¸‹æ˜¯çš„ã€‚ä»¥å‰æœ‰ä¸ªå»¶ç¼“æ¯«ç§’æ•°-XX:BiasedLockingStartupDelayï¼Œä¸€å¼€å§‹ç”¨è½»é‡çº§é”ï¼Œåœ¨å¯åŠ¨å››ç§’ä¹‹åæ‰å¼€å§‹ç”¨åå‘é”ã€‚æˆ‘è®°å¾—Java 9è¿˜æ˜¯10é»˜è®¤å€¼æ”¹ä¸º0äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534929953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1064902,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3f/c6/c2bf55bd.jpg","nickname":"devilyaos","note":"","ucode":"5FE075608F03F7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":238878,"discussion_content":"mark...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587258104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70639,"user_name":"åŠ è½½ä¸­â€¦â€¦","can_delete":false,"product_type":"c1","uid":1366948,"ip_address":"","ucode":"3E59A0A0784D0A","user_header":"https://static001.geekbang.org/account/avatar/00/14/db/a4/191be6ad.jpg","comment_is_top":false,"comment_ctime":1551151485,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14436053373","product_id":100010301,"comment_content":"æ‚¨å¥½ï¼Œæ–‡ç« å†™çš„æŒºå¥½ï¼Œè¯»å®Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸‹ï¼š<br>å½“t1çº¿ç¨‹è·å–äº†æŸä¸ªå¯¹è±¡é”ï¼ˆlock1ï¼‰çš„åå‘é”ï¼Œè¿˜æ²¡æ‰§è¡Œå®Œçš„æ—¶å€™ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹t2ä¹Ÿå°è¯•è·å–è¿™ä¸ªå¯¹è±¡é”(lock1)ï¼Œæˆ‘çœ‹æ–‡ç« ä¸Šè¯´éœ€è¦æ’¤é”€åå‘é”ï¼Œç­‰åˆ°è¾¾å®‰å…¨ç‚¹çš„æ—¶å€™ï¼Œå†å°†åå‘é”æ›¿æ¢æˆè½»é‡çº§é”ã€‚<br>æˆ‘æœ‰ä¸ªé—®é¢˜ï¼šä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ç«äº‰åŒä¸€æŠŠé”çš„æƒ…å†µï¼Œè½»é‡çº§é”ä¹Ÿè§£å†³ä¸äº†å§ï¼Œåªèƒ½ç”¨é‡é‡çº§é”è§£å†³å§ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦æ›¿æ¢æˆè½»é‡çº§é”å‘¢ï¼Ÿ","like_count":3},{"had_liked":false,"id":24590,"user_name":"Leon Wong","can_delete":false,"product_type":"c1","uid":1073650,"ip_address":"","ucode":"B49B327367CF9E","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/f2/ca989d6f.jpg","comment_is_top":false,"comment_ctime":1537157169,"is_pvip":false,"replies":[{"id":"9027","content":"æˆ‘å°è±¡ä¸­ä¸ä¼šè‡ªæ—‹ï¼Œç›´æ¥è†¨èƒ€ã€‚<br><br>è½»é‡çº§é”çš„å‡è®¾æ˜¯ï¼Œä¸åŒçº¿ç¨‹æ‹¿åŒä¸€æŠŠé”çš„æ—¶é—´æ²¡æœ‰overlapã€‚ä¸€æ—¦æœ‰äº†overlapï¼Œå³éœ€è¦ç«äº‰é”çš„æƒ…å†µï¼Œé‚£ä¹ˆå‡è®¾å¤±æ•ˆï¼Œéœ€è¦è†¨èƒ€ä¸ºé‡é‡é”ã€‚<br><br>å¦‚æœä¹è§‚ç‚¹çš„è¯ï¼ŒçŒœæµ‹åªæœ‰è¿™ä¸€æ¬¡å‡è®¾å¤±æ•ˆï¼Œé‚£ä¹Ÿå¯ä»¥è‡ªæ—‹ä¸€ä¼šå†è†¨èƒ€ã€‚ä¸è¿‡æˆ‘è®°å¾—æ²¡æœ‰è¿™ä¹ˆä¹è§‚ã€‚<br><br>ä½ å¯ä»¥è‡ªå·±è¯»hotspotçš„æºä»£ç ï¼Œshare&#47;runtime&#47;synchronizer.cpp ObjectSynchronizer:fast_enter","user_name":"ä½œè€…å›å¤","comment_id":24590,"uid":"1176688","ip_address":"","utype":1,"ctime":1537177142,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":3,"race_medal":0,"score":"14422059057","product_id":100010301,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ¬è¯¾ç¨‹åœ¨ä»‹ç»è½»é‡çº§é”çš„æ—¶å€™ï¼Œæ²¡æåŠè½»é‡çº§é”åœ¨å…¶ä»–çº¿ç¨‹å ç”¨æ”¹é”çš„çš„æ—¶å€™ï¼Œæ˜¯å¦ä¼šè¿›å…¥è‡ªæ—‹çŠ¶æ€ï¼Œæˆ‘å…ˆå‰çš„ç†è§£æ˜¯ï¼Œè½»é‡çº§é”åœ¨è¢«å…¶ä»–çº¿ç¨‹å ç”¨çš„æ—¶å€™ï¼Œä¼šè¿›å…¥çŸ­æš‚çš„è‡ªæ—‹çŠ¶æ€ï¼Œå½“è‡ªæ—‹è¾¾åˆ°ä¸€å®šçš„é˜ˆå€¼åï¼Œè†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œé˜»å¡å½“å‰çº¿ç¨‹ï¼Œä¸çŸ¥é“æˆ‘è¿™ä¹ˆç†è§£æ˜¯å¦æ­£ç¡®ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424047,"discussion_content":"æˆ‘å°è±¡ä¸­ä¸ä¼šè‡ªæ—‹ï¼Œç›´æ¥è†¨èƒ€ã€‚\n\nè½»é‡çº§é”çš„å‡è®¾æ˜¯ï¼Œä¸åŒçº¿ç¨‹æ‹¿åŒä¸€æŠŠé”çš„æ—¶é—´æ²¡æœ‰overlapã€‚ä¸€æ—¦æœ‰äº†overlapï¼Œå³éœ€è¦ç«äº‰é”çš„æƒ…å†µï¼Œé‚£ä¹ˆå‡è®¾å¤±æ•ˆï¼Œéœ€è¦è†¨èƒ€ä¸ºé‡é‡é”ã€‚\n\nå¦‚æœä¹è§‚ç‚¹çš„è¯ï¼ŒçŒœæµ‹åªæœ‰è¿™ä¸€æ¬¡å‡è®¾å¤±æ•ˆï¼Œé‚£ä¹Ÿå¯ä»¥è‡ªæ—‹ä¸€ä¼šå†è†¨èƒ€ã€‚ä¸è¿‡æˆ‘è®°å¾—æ²¡æœ‰è¿™ä¹ˆä¹è§‚ã€‚\n\nä½ å¯ä»¥è‡ªå·±è¯»hotspotçš„æºä»£ç ï¼Œshare/runtime/synchronizer.cpp ObjectSynchronizer:fast_enter","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537177142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1818343,"avatar":"","nickname":"åˆ˜åŒé’","note":"","ucode":"84B62DF8BC61FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278781,"discussion_content":"è¿™ä¸ªåšä¸»å‡†å¤‡å·¥ä½œä¸å¤Ÿå•Šã€‚ã€‚ã€‚å›ç­”é—®é¢˜å„ç§&#34;å°è±¡ä¸­&#34;&#34;æˆ‘æ„Ÿè§‰&#34;çš„ğŸ˜‚ğŸ˜‚ğŸ˜‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591233725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383587,"discussion_content":"8çš„ç‰ˆæœ¬æ˜¯ä¸ä¼šè‡ªæ—‹çš„ï¼Œè½»é‡é”å°±æ˜¯è½»é‡é”å½“æ ‡å¿—ä½ä»åå‘å–æ¶ˆæˆ–è€…è¯´æ‘˜é™¤ é‚£ä¹ˆå°±è¦å°†å…¶è†¨èƒ€ä¸ºè½»é‡çº§é”ã€‚\nè€Œè½»é‡çº§é”å®é™…ä¸Šæ˜¯casç«äº‰ åšä¸ªæ ‡è®°ä½è€Œå·²ï¼Œå¦‚æœæ­¤æ—¶è¿˜æœ‰ç«äº‰é‚£ä¹ˆå°±ä¼šè†¨èƒ€ã€‚å†è†¨èƒ€ååšç”¨æˆ·æ€è‡ªæ—‹ã€‚ä»£ç ï¼šObjectMonitor::TrySpin_VaryDuration (Thread * Self) \nå¦å¤–ä¸€è¯´çš„æ˜¯JDK11åšäº†é‡å†™ JDK18åšäº†åå‘é”æ‘˜é™¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626171082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21076,"user_name":"è´¾æ™ºæ–‡","can_delete":false,"product_type":"c1","uid":1100235,"ip_address":"","ucode":"600CF0AB215D1A","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/cb/7b6802cc.jpg","comment_is_top":false,"comment_ctime":1534902733,"is_pvip":false,"replies":[{"id":"7425","content":"è¿™é‡Œå¯èƒ½æ²¡å†™æ¸…æ¥šã€‚æˆ‘æŒ‡çš„æ˜¯æ ‡è®°å­—æ®µçš„bitsæ˜¯å¦ä¸ºX..X01ï¼Œå…¶ä¸­X..Xæ˜¯ä»åŸæœ¬çš„æ ‡è®°å­—æ®µæ‹·è¿‡æ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":21076,"uid":"1176688","ip_address":"","utype":1,"ctime":1534931179,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"14419804621","product_id":100010301,"comment_content":"å‡è®¾å½“å‰é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¸º Xâ€¦XYZï¼ŒJava è™šæ‹Ÿæœºä¼šæ¯”è¾ƒè¯¥å­—æ®µæ˜¯å¦ä¸º Xâ€¦X01ã€‚   è€å¸ˆè¯·é—®è¿™ä¸ªxâ€¦â€¦x01æ˜¯ä»€ä¹ˆï¼Œæ ¹æ®ä»€ä¹ˆæ¥çš„å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422523,"discussion_content":"è¿™é‡Œå¯èƒ½æ²¡å†™æ¸…æ¥šã€‚æˆ‘æŒ‡çš„æ˜¯æ ‡è®°å­—æ®µçš„bitsæ˜¯å¦ä¸ºX..X01ï¼Œå…¶ä¸­X..Xæ˜¯ä»åŸæœ¬çš„æ ‡è®°å­—æ®µæ‹·è¿‡æ¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534931179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83793,"user_name":"ã‚ã€ä»Šç”Ÿç»æ‹ä¸¶","can_delete":false,"product_type":"c1","uid":1107054,"ip_address":"","ucode":"6F64B4BD0ED847","user_header":"https://static001.geekbang.org/account/avatar/00/10/e4/6e/ef9aece4.jpg","comment_is_top":false,"comment_ctime":1554716432,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"10144651024","product_id":100010301,"comment_content":"é›¨è¿ªè€å¸ˆï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼šå‡è®¾çº¿ç¨‹AåŠ é”ï¼ŒCASå°†é”å¯¹è±¡å¯¹è±¡å¤´æ›¿æ¢æˆæŒ‡å‘çº¿ç¨‹Açš„Lock Recordçš„åœ°å€ï¼Œåœ¨è¿™é‡Œï¼ŒåŸå€¼ï¼šå¯¹è±¡mark wordä¸­çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯hashcodeï¼ŒæœŸæœ›å€¼ï¼šæœ¬çº¿ç¨‹Lock Recordåœ°å€ï¼Œå¯¹è±¡ï¼šé”å¯¹è±¡ï¼Œåœ¨æ›¿æ¢æˆåŠŸåæˆ‘ä»¬è¯´çº¿ç¨‹Aè·å¾—äº†é”ï¼ŒOKï¼Œçº¿ç¨‹Aå¼€å§‹æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼Œåœ¨å®ƒæ‰§è¡Œå®Œä¹‹å‰ï¼Œçº¿ç¨‹Bæ¥è·å–é”ï¼Œå‘ç°å±äºè½»é‡çº§é”æ ‡å¿—ï¼Œäºæ˜¯CASæ›¿æ¢mark wordï¼Œæ­¤æ—¶CASçš„åŸå€¼ä»ç„¶ä¸ºä¸ºé”å¯¹è±¡çš„mark wordå§ï¼Œè€Œæ­¤æ—¶é”å¯¹è±¡mark wordä¸­è®°å½•çš„ä¸å†æ˜¯hashcodeè€Œæ˜¯æŒ‡å‘çº¿ç¨‹Açš„Lock Recordçš„åœ°å€ï¼Œä½†æ˜¯å¯¹äºCASå®ƒç®¡ä½ å¯¹è±¡å¤´å­˜çš„æ˜¯ä»€ä¹ˆï¼Œç°åœ¨è·å–åˆ°ä»€ä¹ˆï¼Œä»€ä¹ˆå°±æ˜¯åŸå€¼ï¼Œäºæ˜¯ï¼šåŸå€¼ï¼šå¯¹è±¡å¤´ä¸­æŒ‡å‘çº¿ç¨‹Aä¸­LRçš„åœ°å€ï¼ŒæœŸæœ›å€¼ï¼šçº¿ç¨‹Bä¸­LRï¼ˆç›®å‰å¯¹ä»–æ¥è¯´ï¼Œæ˜¯å°†é”å¯¹è±¡ä¸­æŒ‡å‘çº¿ç¨‹Aä¸­LRçš„åœ°å€å­˜å…¥æœ¬çº¿ç¨‹LRï¼‰çš„åœ°å€ï¼Œç›®æ ‡å¯¹è±¡ï¼šé”å¯¹è±¡ï¼Œæ€ä¹ˆä¼šCASä¸æˆåŠŸï¼Ÿäºæ˜¯ç°åœ¨çº¿ç¨‹Bä¹Ÿè·å–åˆ°é”ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šåœ¨æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼æˆ‘è§‰å¾—æˆ‘ç†è§£çš„å“ªå—ä¸å¯¹ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1191290,"avatar":"https://static001.geekbang.org/account/avatar/00/12/2d/7a/6d5157d9.jpg","nickname":"æ—‹è½¬è·³è·ƒä¿ºé—­ç€çœ¼","note":"","ucode":"F92B7246A9CDBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2765,"discussion_content":"æˆ‘è¿™æœ‰åŒæ ·çš„ç–‘é—®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563927657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397031,"avatar":"https://static001.geekbang.org/account/avatar/00/15/51/27/f0dd6f19.jpg","nickname":"è€ç™½","note":"","ucode":"39881175152D49","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93379,"discussion_content":"çœ‹äº†æºç ï¼Œè½»é‡é”è·å–è¿‡ç¨‹æœ‰ï¼šTHREAD->is_lock_owned((address)mark->locker())è¿™ä¹ˆä¸ªè¿‡ç¨‹ï¼Œä¼šæ£€æŸ¥lock record çš„åœ°å€æ˜¯ä¸æ˜¯æœ¬çº¿ç¨‹æ ˆç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576924215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2351949,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e3/4d/8a26dbb2.jpg","nickname":"æ«ä¸­æµªå­","note":"","ucode":"860BEA32059B37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1397031,"avatar":"https://static001.geekbang.org/account/avatar/00/15/51/27/f0dd6f19.jpg","nickname":"è€ç™½","note":"","ucode":"39881175152D49","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":372656,"discussion_content":"ä¸å¯¹å§ï¼Œè¿™ä¸ªæ˜¯åˆ¤æ–­æ˜¯å¦æ˜¯é”é‡å…¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620401119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":93379,"ip_address":""},"score":372656,"extra":""}]}]},{"had_liked":false,"id":21445,"user_name":"javaadu","can_delete":false,"product_type":"c1","uid":1000519,"ip_address":"","ucode":"8C0B140F1C8992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg","comment_is_top":false,"comment_ctime":1535085193,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10125019785","product_id":100010301,"comment_content":"ä½ å¥½ï¼Œä¾‹å­è¿è¡Œäº†ï¼Œæ²¡çœ‹å‡ºå•¥ä¸åŒï¼Œåªæœ‰â€œfast path lock entriesâ€è¿™ä¸ªå¯¹åº”çš„æ•°å€¼ä¸åŒï¼Œslow path lock entriesä¸€ç›´æ˜¯2ï¼Œå…¶ä»–çš„éƒ½æ˜¯0ã€‚<br><br>å»ºè®®ä½œè€…ç»™å‡ºè‡ªå·±çš„å®éªŒæˆªå›¾ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹æ¯”","like_count":2},{"had_liked":false,"id":21121,"user_name":"(^o^)","can_delete":false,"product_type":"c1","uid":1142842,"ip_address":"","ucode":"AAD9EC32A590E2","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/3a/6b82e940.jpg","comment_is_top":false,"comment_ctime":1534928969,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10124863561","product_id":100010301,"comment_content":"SynchronizedæŸä¸ªå¯¹è±¡æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡çš„é”å…ˆæ˜¯åå‘é”ï¼Œåæ ¹æ®å…·ä½“ç«äº‰æƒ…å†µå…ˆå‡çº§ä¸ºè½»é‡çº§é”å†å‡çº§ä¸ºé‡é‡çº§é”å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366078,"discussion_content":"æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617955025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21097,"user_name":"æ—QC","can_delete":false,"product_type":"c1","uid":1180579,"ip_address":"","ucode":"7F2A36543505DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/a3/fa04ae05.jpg","comment_is_top":false,"comment_ctime":1534912415,"is_pvip":false,"replies":[{"id":"7424","content":"æ²¡æœ‰ï¼Œæ–¹æ³•æœ‰ACC_SYNCHRONIZEDæ ‡å¿—ç¬¦","user_name":"ä½œè€…å›å¤","comment_id":21097,"uid":"1176688","ip_address":"","utype":1,"ctime":1534931063,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"10124847007","product_id":100010301,"comment_content":"å½“å£°æ˜ synchronized ä»£ç å—æ—¶ï¼Œç¼–è¯‘è€Œæˆçš„å­—èŠ‚ç å°†åŒ…å« monitorenter å’Œ monitorexit æŒ‡ä»¤ã€‚ï½ï½è€å¸ˆï¼Œæ ‡è®°åœ¨æ–¹æ³•ä¸Šä¹Ÿæœ‰è¿™ä¸¤ä¸ªæŒ‡ä»¤å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422533,"discussion_content":"æ²¡æœ‰ï¼Œæ–¹æ³•æœ‰ACC_SYNCHRONIZEDæ ‡å¿—ç¬¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534931063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132390,"user_name":"nidafg","can_delete":false,"product_type":"c1","uid":1146092,"ip_address":"","ucode":"2D57A65FAD46CF","user_header":"https://static001.geekbang.org/account/avatar/00/11/7c/ec/c5a414dd.jpg","comment_is_top":false,"comment_ctime":1568105718,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5863073014","product_id":100010301,"comment_content":"æ„Ÿè§‰è€å¸ˆè®²çš„å¾ˆå­¦é™¢æ´¾ï¼Œå¦‚æœèƒ½æœ‰å›¾æ–‡æˆ–è€…æ›´å¤šæ¯”å–»å°±å¥½äº†","like_count":1},{"had_liked":false,"id":33609,"user_name":"Geek_987169","can_delete":false,"product_type":"c1","uid":1180853,"ip_address":"","ucode":"4B2955A044805D","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/b5/8bc4790b.jpg","comment_is_top":false,"comment_ctime":1539834520,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5834801816","product_id":100010301,"comment_content":"é‡å¤è·å–åŒä¸€æŠŠé”ï¼Œé”è®°å½•æ¸…é›¶æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå¦‚æœå°†é”è®°å½•ç†è§£ä¸ºæ ˆç»“æ„ï¼Œé‚£ä¹ˆå¦‚æœä¸€ä¸ªçº¿ç¨‹é‡å¤è·å–åŒä¸€æŠŠé”è¿™ä¸ªæ­¤æ—¶é”è®°å½•æœ‰å‡ æ¡ï¼Œæ˜¯ä»€ä¹ˆç»“æ„å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":21151,"user_name":"Scott","can_delete":false,"product_type":"c1","uid":1014800,"ip_address":"","ucode":"7E57FDCB5E5D49","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","comment_is_top":false,"comment_ctime":1534940941,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5829908237","product_id":100010301,"comment_content":"è¯·æ•™ä¸€ä¸‹ï¼Œä¸æ˜¯å¾ˆæ˜ç™½epochçš„ä½œç”¨ï¼Œåå‘é”é»˜è®¤è¢«æ’¤é”€20æ¬¡ä½¿åå‘é”å¤±æ•ˆæ‰æ›´æ–°è¿™ä¸ªå­—æ®µï¼Œæ²¡æœ‰æƒ³æ˜ç™½epochçš„å¿…è¦æ€§","like_count":1,"discussions":[{"author":{"id":1785016,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3c/b8/9489387c.jpg","nickname":"é±¼ä¸¸ç²—é¢","note":"","ucode":"B2F3F75B0D1422","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284743,"discussion_content":"epochæ˜¯ç”¨æ¥æ ‡è®°è¿™ä¸ªé”å¯¹è±¡çš„ç±»æ˜¯å¦è¿˜é€‚åˆåå‘é”ç”¨çš„ï¼Œepochçš„å€¼å­˜åœ¨classé‡Œï¼Œè€Œé”å¯¹è±¡é‡Œçš„epochåªæ˜¯ä¸€ä»½æ‹·è´\næ¯æ¬¡æ›´æ–°classé‡Œçš„epochæ—¶ï¼Œè¿˜ä¼šæ£€æŸ¥æŒæœ‰è¯¥ç±»è‡ªæ—‹é”çš„çº¿ç¨‹çš„æ ˆï¼Œå¹¶ä¸”æ›´æ–°é”å¯¹è±¡çš„epochå€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šä¿è¯é”å¯¹è±¡é‡Œçš„epochæ—¶æœ€æ–°çš„ï¼Œå¦‚æœä¸æ˜¯æœ€æ–°çš„é‚£ä¹ˆå¯ä»¥è¢«ä¸‹ä¸€ä¸ªæ¥åŠ é”çš„çº¿ç¨‹é‡åå‘ï¼›\nå¦‚æœepochå€¼è¿‡å¤§è¯´æ˜è¿™ä¸ªç±»çš„å¯¹è±¡éƒ½ä¸é€‚åˆåå‘é”äº†ï¼Œä¼šç›´æ¥ä¸Šè½»é‡çº§é”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592623922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1261360,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/30/23f6b413.jpg","nickname":"äº”åä¹ç§’","note":"","ucode":"1F34F62193CFF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785016,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3c/b8/9489387c.jpg","nickname":"é±¼ä¸¸ç²—é¢","note":"","ucode":"B2F3F75B0D1422","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320686,"discussion_content":"å…³äºepochå€¼æˆ‘è¿˜æ˜¯æœ‰äº›ä¸å¤ªæ˜ç™½ï¼Œå¦‚æœæ¯æ¬¡æ›´æ–°classé‡Œçš„epochæ—¶ï¼Œéƒ½ä¼šæ›´æ–°æ ˆä¸­é”å¯¹è±¡çš„epochï¼Œè¿™ä¹ˆæ“ä½œæ˜¯JVMåšçš„ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è®¤ä¸ºè‚¯å®šæ˜¯ä¸ä¼šå¤±è´¥çš„ï¼Œä¸ç„¶è¿™å°±æ˜¯JVMçš„ä¸€ä¸ªbugäº†ï¼Œå¦‚æœåªæ˜¯ä¸ºäº†è®°å½•æ’¤é”€æ¬¡æ•°ï¼Œç›´æ¥åœ¨classç†è®°å½•æ¬¡æ•°å°±å¯ä»¥äº†ï¼Œå†å¼•å…¥epochçš„æ„ä¹‰ï¼Œç¡®å®æ²¡æœ‰æƒ³æ˜ç™½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604452550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":284743,"ip_address":""},"score":320686,"extra":""}]},{"author":{"id":1785016,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3c/b8/9489387c.jpg","nickname":"é±¼ä¸¸ç²—é¢","note":"","ucode":"B2F3F75B0D1422","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284746,"discussion_content":"è¯´é”™äº†ä¸æ˜¯epochå€¼è¿‡å¤§ï¼Œè€Œæ˜¯æ’¤é”€æ¬¡æ•°è¿‡å¤šæ—¶è¡¨ç¤ºè¿™ä¸ªç±»çš„å¯¹è±¡éƒ½ä¸é€‚åˆåå‘é”äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592624087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21123,"user_name":"(^o^)","can_delete":false,"product_type":"c1","uid":1142842,"ip_address":"","ucode":"AAD9EC32A590E2","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/3a/6b82e940.jpg","comment_is_top":false,"comment_ctime":1534929245,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5829896541","product_id":100010301,"comment_content":"â€œå¦åˆ™ï¼ŒJava è™šæ‹Ÿæœºä¼šå°è¯•ç”¨ CAS æ“ä½œï¼Œæ¯”è¾ƒé”å¯¹è±¡çš„æ ‡è®°å­—æ®µçš„å€¼æ˜¯å¦ä¸ºå½“å‰é”è®°å½•çš„åœ°å€ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ›¿æ¢ä¸ºé”è®°å½•ä¸­çš„å€¼ï¼Œä¹Ÿå°±æ˜¯é”å¯¹è±¡åŸæœ¬çš„æ ‡è®°å­—æ®µã€‚æ­¤æ—¶ï¼Œè¯¥çº¿ç¨‹å·²ç»æˆåŠŸé‡Šæ”¾è¿™æŠŠé”ã€‚<br><br>å¦‚æœä¸æ˜¯ï¼Œåˆ™æ„å‘³ç€è¿™æŠŠé”å·²ç»è¢«è†¨èƒ€ä¸ºé‡é‡çº§é”ã€‚â€å‡çº§ä¸ºé‡é‡çº§é”çš„è¿‡ç¨‹ï¼Œä¼šæ”¹å˜é”å¯¹è±¡çš„ä»€ä¹ˆä¿¡æ¯å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":350992,"user_name":"å°é³„é±¼","can_delete":false,"product_type":"c1","uid":1178888,"ip_address":"","ucode":"9C30CAFB41A263","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/08/c039f840.jpg","comment_is_top":false,"comment_ctime":1657441722,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657441722","product_id":100010301,"comment_content":"CASå¤±è´¥ï¼Œæ„å‘³ç€åŸæ¥çš„å€¼å‘ç”Ÿæ”¹å˜äº†ã€‚ä¾‹å¦‚ï¼Œé¢„æœŸæ˜¯01ï¼ŒCASå¤±è´¥äº†ï¼Œåˆ™è¡¨ç¤ºè¯¥å€¼è¢«ä¿®æ”¹äº†ï¼Œä¸ä¸º01äº†","like_count":0},{"had_liked":false,"id":350986,"user_name":"å°é³„é±¼","can_delete":false,"product_type":"c1","uid":1178888,"ip_address":"","ucode":"9C30CAFB41A263","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/08/c039f840.jpg","comment_is_top":false,"comment_ctime":1657439394,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657439394","product_id":100010301,"comment_content":"ä¸ªäººè§‰å¾—æœ‰ä¸€ç‚¹ï¼šå¼ºè¡Œç¿»è¯‘æœ€ä¸ºè‡´å‘½ã€‚ä¸€ä¸ªâ€œæ ‡è®°å­—æ®µâ€ç¡¬ç”Ÿç”Ÿé˜»ç¢æˆ‘å¯¹æ–‡ç« çš„ç†è§£ã€‚çœ‹äº†Néï¼Œå‚è€ƒäº†å…¶ä»–åšå®¢ï¼Œç¿»æ‰¾äº†ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ï¼Œæ‰çŸ¥é“åŸæ¥å°±æ˜¯MarkWordã€‚ã€‚ã€‚å†…å®¹æ€»ä½“çš„ç¼–æ’ï¼Œçœ‹èµ·æ¥è·Ÿä¹¦é‡Œå·®åˆ«ä¸å¤§ã€‚ä½†æ˜¯åœ¨æ¯ä¸ªå°çš„çŸ¥è¯†ç‚¹ä¸Šæ„Ÿè§‰ç›¸å¯¹æ··ä¹±ã€‚ä¸”å¯¹äºæ²¡æœ‰ä¸€äº›æ¦‚å¿µæ€§çš„æœ¯è¯­å¯¹äºæ²¡æœ‰ç›¸å…³çŸ¥è¯†çš„åŒå­¦å®¹æ˜“é€ æˆç†è§£å›°éš¾","like_count":0},{"had_liked":false,"id":348000,"user_name":"æ‡µé€¼çŒ´","can_delete":false,"product_type":"c1","uid":1204947,"ip_address":"","ucode":"BDC748A96AC316","user_header":"https://static001.geekbang.org/account/avatar/00/12/62/d3/663de972.jpg","comment_is_top":false,"comment_ctime":1654657505,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654657505","product_id":100010301,"comment_content":"å¼•ç”¨çš„æ–‡ç« å¤±æ•ˆäº†ã€‚ã€‚","like_count":0},{"had_liked":false,"id":347457,"user_name":"å¤§æ’æ³¡é¥­","can_delete":false,"product_type":"c1","uid":3013303,"ip_address":"","ucode":"30B882AAB67CC5","user_header":"https://static001.geekbang.org/account/avatar/00/2d/fa/b7/0342db08.jpg","comment_is_top":false,"comment_ctime":1654053868,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654053868","product_id":100010301,"comment_content":"æ¯”JCIPéš¾æ‡‚ï¼Œçœ‹åˆ°å¤§å®¶éƒ½ä¸å¤ªçœ‹å¾—æ‡‚ï¼Œæˆ‘å°±ä¸ç„¦è™‘äº†å“ˆå“ˆã€‚<br>è¦æ˜¯å’ŒReentrantLock å¯¹æ¯”èµ·æ¥è®²å°±å¥½äº†ï¼ŒJCIPé‡Œåšäº†å¯¹æ¯”å’Œé¢„æµ‹ï¼Œä½†æ˜¯æ²¡æœ‰è®²å®ç°ã€‚","like_count":0},{"had_liked":false,"id":346377,"user_name":"ç¨‹æµ©ä¹¾","can_delete":false,"product_type":"c1","uid":2996782,"ip_address":"","ucode":"A41850498D5828","user_header":"https://static001.geekbang.org/account/avatar/00/2d/ba/2e/08585f22.jpg","comment_is_top":false,"comment_ctime":1653067491,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653067491","product_id":100010301,"comment_content":"æˆ‘çš„ç†è§£ï¼šSynchronizedé”ä¼˜åŒ–æ—¶æœ‰ä¸‰ç§çŠ¶æ€ï¼š<br>1.åå‘é”(æ— é”ï¼Œä¹è§‚åœ°è®¤ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹)ï¼Œå…·ä½“å®ç°ï¼š<br>ï¼ˆ1ï¼‰æ¯ä¸ªç±»çš„æ ‡è®°å¤´ä¸­éƒ½æœ‰ä¸ªepochå€¼(ä»£è¡¨ç¬¬å‡ ä»£åå‘é”)ï¼Œåˆæ¬¡åŠ é”æ—¶å°†é”å¯¹è±¡ç±»ä¸­çš„epochå€¼å¤åˆ¶åˆ°åˆ›å»ºçš„é”å¯¹è±¡ä¸­ï¼Œå¹¶å°†æœ¬çº¿ç¨‹åœ°å€å†™å…¥é”å¯¹è±¡æ ‡è®°å­—æ®µï¼Œä¸”è®¾ç½®æ ‡è®°å­—æ®µæœ€åä¸‰ä½ä¸º101(åå‘é”)ã€‚<br>ï¼ˆ2ï¼‰å½“æ–°çº¿ç¨‹åŠ é”æ—¶ï¼Œè‹¥é”å¯¹è±¡æ ‡è®°å­—æ®µçš„çº¿ç¨‹åœ°å€éæœ¬çº¿ç¨‹ï¼Œä¸”epochå€¼ç›¸ç­‰ï¼Œä¼šå¯¼è‡´åå‘é”æ’¤é”€ï¼Œä¾¿å‡çº§è¯¥é”å¯¹è±¡ä¸ºè½»é‡çº§é”ã€‚è‹¥epochå€¼ä¸ç­‰ï¼Œå¯ç›´æ¥ä½¿é”å¯¹è±¡åå‘è‡ªå·±(å†™å…¥æœ¬çº¿ç¨‹åœ°å€)ã€‚<br>ï¼ˆ3ï¼‰è‹¥è¯¥ç±»é”å¯¹è±¡çš„æ€»æ’¤é”€æ¬¡æ•°è¶…è¿‡20æ¬¡(JVMå‚æ•°-XX:BiasedLockingBulkRebiasThreshold)ï¼Œå°±ä¼šä½¿åå‘é”å¤±æ•ˆï¼Œä¼šå°†é”å¯¹è±¡ç±»çš„epochå€¼åŠ 1ï¼Œå¹¶åœ¨å®‰å…¨ç‚¹æ—¶èµ‹å€¼åˆ°å…¶ä¸‹æ‰€æœ‰çš„é”å¯¹è±¡ä¸­ã€‚<br>ï¼ˆ4ï¼‰è‹¥è¯¥ç±»é”å¯¹è±¡çš„æ€»æ’¤é”€æ¬¡æ•°è¶…è¿‡40æ¬¡(JVMå‚æ•°-XX:BiasedLockingBulkRevokeThreshold)ï¼Œå°±ä¼šè®¤ä¸ºè¯¥ç±»é”å¯¹è±¡å·²ç»ä¸å†é€‚åˆåå‘é”ï¼Œä¼šæ’¤é”€æ‰è¯¥ç±»å®ä¾‹çš„åå‘é”ï¼Œå¹¶åœ¨ä¸‹æ¬¡åŠ é”æ—¶ç›´æ¥ä½¿ç”¨è½»é‡çº§é”ã€‚<br><br>2.è½»é‡çº§é”(ä¹è§‚åœ°è®¤ä¸ºå¤šä¸ªçº¿ç¨‹ä¸ä¼šåŒæ—¶æ‰§è¡Œ)ï¼Œå…·ä½“å®ç°ï¼š<br>ï¼ˆ1ï¼‰åŠ é”æ—¶ï¼Œåœ¨å½“å‰çº¿ç¨‹çš„å½“å‰æ ˆå¸§ä¸­åˆ’å‡ºä¸€å—ç©ºé—´ä½œä¸ºçº¿ç¨‹é”è®°å½•ï¼Œå°†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µ(01ç»“å°¾çš„åå‘é”)å¤åˆ¶åˆ°çº¿ç¨‹é”è®°å½•ä¸­ï¼Œå¹¶æŠŠçº¿ç¨‹é”è®°å½•åœ°å€é€šè¿‡CASæ“ä½œèµ‹å€¼åˆ°é”å¯¹è±¡çš„æ ‡è®°å­—æ®µå†…ï¼Œç”±äºå†…å­˜å¯¹é½çš„ç¼˜æ•…ï¼Œé”å¯¹è±¡çš„æ ‡è®°å­—æ®µå°†ä¼šä»¥00(è½»é‡çº§é”)æ ‡è®°æ¥ç»“å°¾ã€‚<br>ï¼ˆ2ï¼‰å½“æ–°çº¿ç¨‹åŠ é”æ—¶ï¼Œè‹¥é”å¯¹è±¡æ ‡è®°å­—æ®µå†…çš„çº¿ç¨‹åœ°å€æ˜¯æŒ‡å‘è‡ªå·±ï¼Œä¾¿ä¼šå°†å½“å‰æ ˆå¸§çš„é”è®°å½•æ¸…é›¶ï¼Œä»¥ä»£è¡¨è¯¥é”è¢«é‡å¤è·å–ï¼›è‹¥ä¸æ˜¯æŒ‡å‘è‡ªå·±ï¼Œä¾¿ç›´æ¥ä¼šè†¨èƒ€ä¸ºé‡é‡çº§é”ã€‚<br>ï¼ˆ3ï¼‰è§£é”æ—¶ï¼Œè‹¥å½“å‰æ ˆå¸§çš„é”è®°å½•ä¸º0(ä»£è¡¨é‡å¤è·å–é”)ï¼Œå°±ä¼šç›´æ¥è¿”å›ï¼›è‹¥ä¸æ˜¯0ï¼Œä¾¿ä¼šå°†å½“å‰æ ˆå¸§çš„é”è®°å½•(01ç»“å°¾çš„åå‘é”çŠ¶æ€)é€šè¿‡CASæ“ä½œèµ‹å€¼åˆ°é”å¯¹è±¡ä¸­ã€‚(ä¸€ä¸ªçº¿ç¨‹çš„æ‰€æœ‰é”è®°å½•æ˜¯æ ˆç»“æ„ï¼ŒåŠ é”æ—¶å‹å…¥ä¸€æ¡é”è®°å½•ï¼Œè§£é”æ—¶å¼¹å‡ºä¸€æ¡é”è®°å½•)<br><br>3.é‡é‡çº§é”(å¤šä¸ªçº¿ç¨‹ä¼šåŒæ—¶æ‰§è¡Œ)ï¼Œå…·ä½“å®ç°ï¼š<br>ï¼ˆ1ï¼‰ä¾é æ“ä½œç³»ç»Ÿæ¥å¯¹Javaçº¿ç¨‹è¿›è¡Œé˜»å¡å’Œå”¤é†’ï¼Œæ¶‰åŠç³»ç»Ÿè°ƒç”¨ï¼Œéœ€ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œå¼€é”€éå¸¸å¤§ã€‚<br>ï¼ˆ2ï¼‰ä¸ºé¿å…æ˜‚è´µçš„é˜»å¡å’Œå”¤é†’ï¼Œåœ¨é˜»å¡å‰ä¼šè¿›å…¥çŸ­æš‚çš„è‡ªé€‚åº”è‡ªæ—‹æ¥é¿å…éå¸¸çŸ­çš„åŠ é”ä»£ç å—(åœ¨å¤„ç†å™¨ä¸Šç©ºè·‘å¹¶ä¸”è½®è¯¢é”æ˜¯å¦è¢«é‡Šæ”¾)ï¼Œè‡ªé€‚åº”è‡ªæ—‹ä¼šæ ¹æ®ä»¥å¾€çš„è‡ªæ—‹æ—¶èƒ½å¦è·å¾—é”ï¼Œæ¥åŠ¨æ€è°ƒæ•´è‡ªæ—‹çš„æ—¶é—´(æ•°ç›®)ã€‚(è‡ªé€‚åº”è‡ªæ—‹æ˜¯ä¸å…¬å¹³çš„é”ç«äº‰ï¼Œä¸åˆ©äºå·²é˜»å¡çš„çº¿ç¨‹è·å¾—é”)","like_count":0},{"had_liked":false,"id":320834,"user_name":"Eric","can_delete":false,"product_type":"c1","uid":1575571,"ip_address":"","ucode":"7EB511C384BD7B","user_header":"https://static001.geekbang.org/account/avatar/00/18/0a/93/a189ec16.jpg","comment_is_top":false,"comment_ctime":1636526541,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636526541","product_id":100010301,"comment_content":"https:&#47;&#47;tech.meituan.com&#47;2018&#47;11&#47;15&#47;java-lock.html","like_count":1},{"had_liked":false,"id":316040,"user_name":"æ¼‚æ³Šè€…åŠå…¶å½±å­","can_delete":false,"product_type":"c1","uid":1119979,"ip_address":"","ucode":"13FE760FE8B111","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/eb/30864e40.jpg","comment_is_top":false,"comment_ctime":1634114444,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634114444","product_id":100010301,"comment_content":"é—®ä¸ªé—®é¢˜ï¼šæ‰€ä»¥è½»é‡çº§é”çš„å¯¹è±¡å¤´ä¿¡æ¯å­˜å‚¨çš„æ˜¯æŒæœ‰é”çš„çº¿ç¨‹åˆ›å»ºçš„é”è®°å½•(Lock Record)çš„æŒ‡é’ˆå—ï¼Ÿç„¶åJVMæ˜¯é€šè¿‡é”è®°å½•æŒ‡é’ˆæ¥åˆ¤æ–­æŒæœ‰è½»é‡çº§é”çš„çº¿ç¨‹çš„ï¼Œè¿™æ ·ç†è§£å¤šå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":308749,"user_name":"ppyh","can_delete":false,"product_type":"c1","uid":1351148,"ip_address":"","ucode":"14022ADEC9B53F","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/ec/235b74c0.jpg","comment_is_top":false,"comment_ctime":1629781275,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629781275","product_id":100010301,"comment_content":"æˆ‘è®¤ä¸ºepochå€¼çš„æ„ä¹‰åœ¨äºå½“è·å–åå‘é”çš„çº¿ç¨‹å‘ç°epochçš„å€¼ä¸ç›¸ç­‰æ—¶ï¼Œå¯ä»¥ç›´æ¥é‡æ–°åå‘åˆ°è‡ªå·±ï¼Œä¸éœ€è¦å†æ’¤é”€åå‘ï¼Œä¸éœ€è¦æ’¤é”€åå‘çš„è¿‡ç¨‹èµ°ä»¥ä¸‹é€»è¾‘ï¼š<br>      ä½¿ä¹‹å‰æŒæœ‰é”çš„çº¿ç¨‹åˆ°è¾¾å®‰å…¨ç‚¹ï¼Œå†å»åˆ¤æ–­æ˜¯å¦é€€å‡ºåŒæ­¥å—ï¼Œè¿™æ ·å¼€é”€æ¯”è¾ƒå¤§ã€‚<br>å› ä¸ºè€å¸ˆæ²¡æœ‰è®²åˆ¤æ–­æ˜¯å¦å·²ç»é€€å‡ºåŒæ­¥å—çš„é€»è¾‘ï¼Œå¯èƒ½å¤§å®¶æ¯”è¾ƒæ‡µã€‚https:&#47;&#47;www.zhihu.com&#47;question&#47;57774162çœ‹ä¸€ä¸‹è¿™å¼ å›¾å°±çŸ¥é“äº†","like_count":0},{"had_liked":false,"id":308745,"user_name":"ppyh","can_delete":false,"product_type":"c1","uid":1351148,"ip_address":"","ucode":"14022ADEC9B53F","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/ec/235b74c0.jpg","comment_is_top":false,"comment_ctime":1629780281,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629780281","product_id":100010301,"comment_content":"è€å¸ˆ æœ‰ä¸ªç–‘é—®ï¼Œæˆ‘ä»¬å…ˆä»åå‘é”çš„æ’¤é”€è®²èµ·ã€‚å½“è¯·æ±‚åŠ é”çš„çº¿ç¨‹å’Œé”å¯¹è±¡æ ‡è®°å­—æ®µä¿æŒçš„çº¿ç¨‹åœ°å€ä¸åŒ¹é…æ—¶ï¼ˆè€Œä¸” epoch å€¼ç›¸ç­‰ï¼Œå¦‚è‹¥ä¸ç­‰ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å¯ä»¥å°†è¯¥é”é‡åå‘è‡³è‡ªå·±ï¼‰ï¼ŒJava è™šæ‹Ÿæœºéœ€è¦æ’¤é”€è¯¥åå‘é”ã€‚è¿™ä¸ªæ’¤é”€è¿‡ç¨‹éå¸¸éº»çƒ¦ï¼Œå®ƒè¦æ±‚æŒæœ‰åå‘é”çš„çº¿ç¨‹åˆ°è¾¾å®‰å…¨ç‚¹ï¼Œå†å°†åå‘é”æ›¿æ¢æˆè½»é‡çº§é”ã€‚<br><br><br>è¿™å¥è¯æ›¿æ¢æˆè½»é‡çº§é”çš„æ„æ€åº”è¯¥æ˜¯è¯·æ±‚åŠ é”çš„çº¿ç¨‹å·²è½»é‡çº§é”çš„æ–¹å¼å»è·å–é”å§ï¼Œå¯¹äºåŸæ¥æŒæœ‰åå‘é”çš„çº¿ç¨‹ä¸æ­¢éœ€è¦ç­‰å¾…åˆ°å®‰å…¨ç‚¹ï¼Œè€Œä¸”è¿˜éœ€è¦èµ°å‡ºäº†é‡Šæ”¾é”çš„ä»£ç å—ã€‚","like_count":0},{"had_liked":false,"id":305151,"user_name":"zhmacn","can_delete":false,"product_type":"c1","uid":2561868,"ip_address":"","ucode":"91FA8535808CA0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJrZ9ic5vHOVfzqcA3Y454gicI2z7L1Ujp5hzFr9CbfTu6goHE7fUlbl3QjpEvXJj5qlvRAVcGRomw/132","comment_is_top":false,"comment_ctime":1627863691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627863691","product_id":100010301,"comment_content":"å°±æˆ‘ä»¬çš„ä¾‹å­æ¥è¯´ï¼Œå¦‚æœä¹‹å‰ä¸ç†„ç«ç­‰åˆ°äº†ç»¿ç¯ï¼Œé‚£ä¹ˆè¿™æ¬¡ä¸ç†„ç«çš„æ—¶é—´å°±é•¿ä¸€ç‚¹ï¼›å¦‚æœä¹‹å‰ä¸ç†„ç«æ²¡ç­‰åˆ°ç»¿ç¯ï¼Œé‚£ä¹ˆè¿™æ¬¡ä¸ç†„ç«çš„æ—¶é—´å°±çŸ­ä¸€ç‚¹ã€‚<br><br>è€å¸ˆï¼Œè¿™ä¸ªè‡ªæ—‹ç­‰å¾…æ—¶é•¿è‡ªé€‚åº”è°ƒæ•´çš„é€»è¾‘ä¹Ÿä¼šè¢«åœ¨JITç¼–è¯‘åœ¨æœºå™¨ç ä¸­å—","like_count":0},{"had_liked":false,"id":302342,"user_name":"å‡¯æ–‡å°çŒª","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1626171093,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626171093","product_id":100010301,"comment_content":"8çš„ç‰ˆæœ¬æ˜¯ä¸ä¼šè‡ªæ—‹çš„ï¼Œè½»é‡é”å°±æ˜¯è½»é‡é”å½“æ ‡å¿—ä½ä»åå‘å–æ¶ˆæˆ–è€…è¯´æ‘˜é™¤ é‚£ä¹ˆå°±è¦å°†å…¶è†¨èƒ€ä¸ºè½»é‡çº§é”ã€‚<br>è€Œè½»é‡çº§é”å®é™…ä¸Šæ˜¯casç«äº‰ åšä¸ªæ ‡è®°ä½è€Œå·²ï¼Œå¦‚æœæ­¤æ—¶è¿˜æœ‰ç«äº‰é‚£ä¹ˆå°±ä¼šè†¨èƒ€ã€‚å†è†¨èƒ€ååšç”¨æˆ·æ€è‡ªæ—‹ã€‚ä»£ç ï¼šObjectMonitor::TrySpin_VaryDuration (Thread * Self)<br>å¦å¤–ä¸€è¯´çš„æ˜¯JDK11åšäº†é‡å†™ JDK18åšäº†åå‘é”æ‘˜é™¤","like_count":0},{"had_liked":false,"id":287448,"user_name":"ä¸‹ä¸ªç›®æ ‡45k","can_delete":false,"product_type":"c1","uid":1066508,"ip_address":"","ucode":"193BA8C3AA9A61","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","comment_is_top":false,"comment_ctime":1617955123,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617955123","product_id":100010301,"comment_content":"ä¸¾ä¸ªä¾‹å­<br>1. åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œåªæ˜¯è®¾ç½®ä¸€ä¸‹æ ‡å¿—ä½ï¼ˆcasè®¾ç½®ï¼‰ï¼Œå‘Šè¯‰åˆ«äººæˆ‘å·²ç»åœ¨é‡Œé¢äº†<br>2.ä¸¤ä¸ªçº¿ç¨‹æ—¶ï¼Œé‚£å°±å¼€å§‹é€šè¿‡casæŠ¢<br>3.ä¸‰ä¸ªä»¥ä¸Šçº¿ç¨‹æ—¶ï¼Œé‚£å°±å¼€å§‹çœŸæ­£ä¸ŠæŠŠé”ï¼Œå¤§å®¶éƒ½æ’é˜Ÿå§","like_count":0},{"had_liked":false,"id":286286,"user_name":"xzy","can_delete":false,"product_type":"c1","uid":1002095,"ip_address":"","ucode":"1A44368083A19E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/6f/e36b3908.jpg","comment_is_top":false,"comment_ctime":1617240146,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617240146","product_id":100010301,"comment_content":"å½“ä¸€ä¸ªå¯¹è±¡å·²ç»è®¡ç®—è¿‡identity hash codeï¼Œå®ƒå°±æ— æ³•è¿›å…¥åå‘é”çŠ¶æ€","like_count":0},{"had_liked":false,"id":285277,"user_name":"Codesman","can_delete":false,"product_type":"c1","uid":1172087,"ip_address":"","ucode":"6B058C26D303F0","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/77/6ff9d70c.jpg","comment_is_top":false,"comment_ctime":1616721509,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1616721509","product_id":100010301,"comment_content":"é”å‡çº§çš„è¿‡ç¨‹æ˜¯é€æ­¥å‡çº§çš„ï¼Œä¸ºä»€ä¹ˆè¦å€’è¿‡æ¥è®²ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":280877,"user_name":"å¯’ä¸‰çŸ³","can_delete":false,"product_type":"c1","uid":1376404,"ip_address":"","ucode":"A25BD34DE8610B","user_header":"https://static001.geekbang.org/account/avatar/00/15/00/94/91bd7001.jpg","comment_is_top":false,"comment_ctime":1614434140,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614434140","product_id":100010301,"comment_content":"ç«äº‰åå‘é”å¤±è´¥çš„çº¿ç¨‹ä¼šè¢«é˜»å¡è¿˜æ˜¯è‡ªæ—‹è¿˜æ˜¯å…¶ä»–","like_count":0},{"had_liked":false,"id":251018,"user_name":"æ˜“æ°´å¯’","can_delete":false,"product_type":"c1","uid":1238961,"ip_address":"","ucode":"F5D8127ED4754E","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","comment_is_top":false,"comment_ctime":1601308673,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601308673","product_id":100010301,"comment_content":"jdk8æµ‹è¯•ç»“æœä¸ºï¼Œé”å¯¹è±¡æœªé‡å†™hashCodeæ–¹æ³•ï¼Œè°ƒç”¨çš„è¯ï¼Œåå‘é”ä¸ç”Ÿæ•ˆï¼Œé‡å†™çš„è¯ï¼Œåå‘é”ä¸å—å½±å“ã€‚è°ƒç”¨System. identityCodeæ–¹æ³•ï¼Œåå‘é”å¤±æ•ˆ","like_count":0},{"had_liked":false,"id":243700,"user_name":"longslee","can_delete":false,"product_type":"c1","uid":1465986,"ip_address":"","ucode":"C24E32E5B1B6F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","comment_is_top":false,"comment_ctime":1598252574,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598252574","product_id":100010301,"comment_content":"æ„Ÿè°¢åœ¨è€å¸ˆè¿™å„¿ç»ˆäºçœ‹æ‡‚äº†3ç§é”çš„åœºæ™¯ï¼Œä»¥å‰åœ¨å„ä¸ªç³»ç»Ÿæ€§ä¹¦ä¸Šçœ‹åˆ°çš„éƒ½æ˜¯å…·ä½“çš„ç®—æ³•å¤šï¼Œä¸æ€ä¹ˆæ˜ç™½åº”ç”¨åœºæ™¯ã€‚","like_count":0},{"had_liked":false,"id":234621,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1594736192,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1594736192","product_id":100010301,"comment_content":"å¯¹epochçš„ç†è§£ï¼šepochç”¨æ¥è¡¨æ˜åå‘é”çš„åˆæ³•æ€§<br>å› ä¸ºåå‘é”çš„æ’¤é”€å¼€é”€å¾ˆå¤§ï¼Œåå‘å‡ æ¬¡éœ€è¦æ’¤é”€å‡ æ¬¡ï¼Œå½“ä¸€ä¸ªé”å¯¹è±¡è¢«æ’¤é”€æ•°è¶…è¿‡ä¸€å®šçš„é˜ˆå€¼ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¯¥åå‘é”æ’¤é”€å¤±è´¥ï¼Œå…¶å®å°±æ˜¯æŠŠæ’¤é”€çš„è¿‡ç¨‹ç›´æ¥ä»¥å¤±è´¥å¼ºåˆ¶ç»“æŸæ¥ä»£æ›¿åå‘é”çš„æ’¤é”€ï¼Œå› ä¸ºå®Œå…¨æ’¤é”€ç¡®å®å¼€é”€å¾ˆå¤§ã€‚è¿™ä¸ªæ—¶å€™è™½ç„¶æ’¤é”€å¤±è´¥ï¼Œä½†æ˜¯é”å¯¹è±¡å¤´ä¸­çš„æ ‡è®°å­—æ®µè¿˜åŒ…å«æŒ‡å‘è¯¥çº¿ç¨‹çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹è±¡å¤´ä¸­çš„åå‘é”çŠ¶æ€å¤±æ•ˆäº†ï¼Œè¿™ä¸ªæ—¶å€™ç”¨å¦ä¸€ç§æ–¹å¼æ¥åˆ¤æ–­åå‘é”æ˜¯å¦æœ‰æ•ˆã€‚<br>é‚£å°±æ˜¯é€šè¿‡æ¯”è¾ƒepochå€¼æ¥åˆ¤æ–­åå‘é”æ˜¯å¦å¤±æ•ˆï¼Œå› ä¸ºåå‘é”æ’¤é”€å¤±è´¥æ—¶ï¼Œæ‰€æœ‰ç±»ä¸­çš„epochå€¼åŠ 1ï¼Œè¿™æ—¶å€™å’Œé”å¯¹è±¡å¤´ä¸­çš„epochå€¼å°±ä¸ä¸€æ ·ï¼Œå°±è®¤ä¸ºå¯¹è±¡å¤´ä¸­çš„åå‘é”æ ‡è®°æ˜¯å¤±æ•ˆçš„ï¼Œå¦‚æœæ­¤æ—¶ï¼Œåˆ«çš„çº¿ç¨‹æ¥è·å–åå‘é”ï¼Œåˆ¤æ–­é”å¯¹è±¡å¤´ä¸­è™½ç„¶ä¸åŒ…å«æŒ‡å‘è‡ªå·±çº¿ç¨‹çš„å¼•ç”¨ï¼Œä½†æ˜¯å› ä¸ºepochå€¼ä¸åŒï¼Œé‚£å°±è®¤ä¸ºæ­¤æ—¶çš„é”å¯¹è±¡ä¸­çš„åå‘é”æ˜¯å¤±æ•ˆçš„ï¼Œå¯ä»¥é‡æ–°è·å–åå‘é”ï¼Œè¿™æ—¶å€™åªéœ€è¦å°†é”å¯¹è±¡å¤´ä¸­çš„è®°å½•åœ°å€æŒ‡å‘è¯¥çº¿ç¨‹ï¼Œå¹¶å°†ç±»ä¸­çš„epochä¹Ÿå¤åˆ¶åˆ°å¯¹è±¡å¤´ä¸­ã€‚è¿™æ—¶å€™æ–°çš„åå‘é”å°±ç”Ÿæ•ˆäº†ã€‚<br>æ‰€ä»¥ï¼Œæ¯æ¬¡åå‘é”å¤±æ•ˆï¼Œjvm éƒ½éœ€è¦éå†æ‰€æœ‰çº¿ç¨‹çš„ Java æ ˆï¼Œæ‰¾å‡ºè¯¥ç±»å·²åŠ é”çš„å®ä¾‹ï¼Œå¹¶ä¸”å°†å®ƒä»¬æ ‡è®°å­—æ®µä¸­çš„ epoch å€¼åŠ  1ã€‚è¯¥æ“ä½œéœ€è¦æ‰€æœ‰çº¿ç¨‹å¤„äºå®‰å…¨ç‚¹çŠ¶æ€ã€‚åå‘é”å‡çº§è½»é‡çº§é”çš„æ¡ä»¶ï¼Œå¿…é¡»æ˜¯åå‘é”æ’¤é”€å¤±è´¥çš„æ€»æ¬¡æ•°è¶…è¿‡è®¾ç½®çš„æŸä¸ªé˜€å€¼ï¼Œæ‰ä¼šå‡çº§ä¸ºè½»é‡çº§é”ã€‚<br>è¿™ç§è®¾è®¡æ€æƒ³çœŸçš„å¾ˆå·§å¦™ï¼Œç”¨epochå°±æŠŠåå‘é”çš„æ’¤é”€å¸¦æ¥çš„å¼€é”€ç»™èŠ‚çœäº†ï¼Œåå‘é”çš„å‡ºç°æ˜¯ä¸ºäº†èŠ‚çº¦çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„å¼€é”€ï¼Œä½†æ˜¯åå‘é”çš„æ’¤é”€ï¼Œåˆå¸¦æ¥æ–°çš„å¼€é”€ï¼Œè¿™æ—¶å€™ï¼Œepochçš„å‡ºç°åˆç«Ÿå¯èƒ½é¿å…äº†åå‘é”æ’¤é”€å¸¦æ¥çš„å¼€é”€ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ã€‚","like_count":0,"discussions":[{"author":{"id":1238961,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","nickname":"æ˜“æ°´å¯’","note":"","ucode":"F5D8127ED4754E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309508,"discussion_content":"å®é™…æµ‹è¯•åå‘ç°ï¼Œä½ çš„è¯´æ³•æœ‰ç‚¹é—®é¢˜ã€‚åœ¨æœªè¾¾åˆ°åå‘é”æ’¤é”€æ¬¡æ•°çš„é˜€å€¼æ—¶ï¼ŒæœªæŒæœ‰åå‘é”çš„çº¿ç¨‹æ¥è·å–åå‘é”ï¼Œå¿…ç„¶å¤±è´¥ï¼Œå°±ä¼šå‘ç”Ÿé”å‡çº§ï¼Œå˜ä¸ºè½»é‡çº§é”ï¼Œä¸”æ­¤åéƒ½ä¼šæ˜¯ä»è½»é‡çº§å¼€å§‹ï¼ˆé’ˆå¯¹çš„æ˜¯è¯¥ç±»å‹çš„åŒä¸€ä¸ªé”å¯¹è±¡ï¼‰ï¼Œç›´åˆ°è¯¥ç±»å‹çš„é”æ’¤é”€æ¬¡æ•°è¾¾åˆ°é˜€å€¼ï¼ˆæ¶‰åŠå¤šä¸ªé”å¯¹è±¡ï¼‰ï¼Œåå‘é”ä¼šå¤±æ•ˆï¼Œæ­¤æ—¶æ‰ä¼šå»æ›´æ–°epochï¼Œè¿‡ç¨‹å¦‚ä½ æ‰€è¯´ã€‚åå‘é”é’ˆå¯¹çš„åœºæ™¯å°±æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šè·å–é”ï¼Œä¸€æ—¦å‡ºç°ç«äº‰å°±ä¸å†ä½¿ç”¨åå‘é”ï¼Œå› ä¸ºæ’¤é”€åå‘é”æ˜¯éœ€è¦ç­‰å¾…æŒæœ‰åå‘é”çš„çº¿ç¨‹åˆ°è¾¾å®‰å…¨ç‚¹ï¼Œè¿™ä¸ªå¼€é”€è¿˜æ˜¯æœ‰çš„ã€‚åœ¨æœªæ›´æ–°epochå‰ï¼Œä¸ä¼šå‡ºç°åå‘é”çš„é‡åå‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601308503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2012721,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b6/31/c801c289.jpg","nickname":"æ¸…è’¸ç»“å°¾é±¼","note":"","ucode":"371AA2E17DB89C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304797,"discussion_content":"ä½ å¥½ï¼Œæˆ‘å¯¹åå‘é”è¿˜æœ‰æœ‰ç‚¹ç–‘æƒ‘ã€‚ä½ è¯´çš„åå‡ æ¬¡æ’¤é”€å‡ æ¬¡ï¼Œæˆ‘çš„ç–‘é—®æ˜¯ä»€ä¹ˆæƒ…å†µä¸‹ä¼šåå‡ æ¬¡å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599664139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1508990,"avatar":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","nickname":"è¥¿é—¨å¹ç‰›","note":"","ucode":"E5D3624DDE1E83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2012721,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b6/31/c801c289.jpg","nickname":"æ¸…è’¸ç»“å°¾é±¼","note":"","ucode":"371AA2E17DB89C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304892,"discussion_content":"ç±»ä¼¼é‡å…¥é”ï¼Œé‡å…¥æ¬¡æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599707270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":304797,"ip_address":""},"score":304892,"extra":""}]}]},{"had_liked":false,"id":234568,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1594721736,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594721736","product_id":100010301,"comment_content":"è¿™ç¯‡æ–‡ç« ï¼Œè™½ç„¶ä¸å¥½ç†è§£ï¼Œä½†æ˜¯è®²çš„å¾ˆç»†ï¼Œæ‰€æœ‰çš„ç‚¹éƒ½æ¶‰åŠäº†ï¼Œå¦‚æœå¯¹javaçš„é”ï¼Œæ²¡æœ‰ä¸€å®šçš„åŸºç¡€ï¼›äº†è§£ï¼Œå¾ˆéš¾è¯»æ‡‚ï¼Œå¿…é¡»ç»†æ‰£è€å¸ˆçš„æ¯ä¸€å¥è¯ï¼Œè¯´æ²¡å›¾çš„ï¼Œè‡ªå·±å¯ä»¥å»ç½‘ä¸Šæ‰¾å›¾ï¼Œjavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ï¼Œè¿™æœ¬ä¹¦å¯¹åå‘ï¼Œè½»é‡ï¼Œé‡é‡é”çš„ä»‹ç»ï¼Œè™½ç„¶æœ‰å›¾ï¼Œä½†æ˜¯æ„Ÿè§‰æ²¡æœ‰è€å¸ˆè¿™ç¯‡æ–‡ç« ä»‹ç»çš„å¥½ï¼Œä¸€å®šè¦å¤šè¯»ï¼Œå¤šæƒ³ï¼Œæ²¡å›¾å¯ä»¥æ ¹æ®è€å¸ˆçš„æ€è·¯ç”»å›¾ï¼Œæ”¶è´§æ»¡æ»¡å•Š","like_count":0},{"had_liked":false,"id":229973,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1593229330,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593229330","product_id":100010301,"comment_content":"ä¸€ç›´ä¸æ˜ç™½ä¸€ä¸ªé—®é¢˜ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé”ä¸ä»…ä¸å­˜åœ¨ç«äº‰ï¼Œè€Œä¸”æ€»æ˜¯ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—ï¼Œæ‰€ä»¥åœ¨1.6ä¸ºäº†è®©çº¿ç¨‹è·å–é”çš„ä»£ä»·æ›´ä½å¼•å…¥åå‘é”ï¼›ä½†æ˜¯ï¼Œåœ¨æ²¡æœ‰åå‘é”ä¹‹å‰ï¼Œä¸ºä»€ä¹ˆå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé”ä¸ä»…ä¸å­˜åœ¨ç«äº‰ï¼Œè€Œä¸”æ€»æ˜¯ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—ï¼Ÿæ±‚è€å¸ˆè§£ç­”","like_count":0},{"had_liked":false,"id":226397,"user_name":"å‰‘å…«","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1592062514,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1592062514","product_id":100010301,"comment_content":"synchronizedé”<br>ç›®çš„ï¼šä¿è¯å¯è§æ€§ï¼ŒåŸå­æ€§ï¼Œæœ‰åºæ€§<br>é”åˆ†ç±»ï¼š<br>æ— é”ï¼Œåå‘é”ï¼Œè½»é‡çº§é”ï¼Œé‡é‡çº§é”<br>javaå¯¹è±¡å¤´æœ‰ä¸ªæ ‡è®°æ ‡è®°æ˜¯åå‘é”ï¼Œè½»é‡çº§é”ç­‰çŠ¶æ€<br>å½“æœ‰çº¿ç¨‹è¿›å…¥syncronizedåŒºå—æ—¶ï¼Œè¿™æ—¶å¦‚æœå½“å‰æ— é”ä¸”åå‘é”å¼€å…³æ˜¯å¼€çš„åˆ™è¿›å…¥åˆ°åå‘é”ï¼Œä¼šå°†å¯¹è±¡å¤´çš„é”æ ‡è®°ä¸ºåå‘é”åŠå¯¹åº”çš„é”å¼•ç”¨ä¸ºå½“å‰çº¿ç¨‹idã€‚","like_count":0},{"had_liked":false,"id":226082,"user_name":"YU","can_delete":false,"product_type":"c1","uid":1274464,"ip_address":"","ucode":"4EE45D6FC2862F","user_header":"https://static001.geekbang.org/account/avatar/00/13/72/60/288023be.jpg","comment_is_top":false,"comment_ctime":1591948406,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591948406","product_id":100010301,"comment_content":"è°ƒç”¨hashcodeåº”è¯¥ä¸æ˜¯å…³é—­åå‘é”ï¼Œåº”è¯¥æ˜¯æœ‰å¯èƒ½å¯¼è‡´é”å‡çº§ï¼Œå› ä¸ºæ— é”æƒ…å†µä¸‹mark wordä¸­çš„hashcodeå°±æ˜¯å¯¹è±¡è°ƒç”¨hashcodeæ–¹æ³•æ‰ä¼šç”Ÿæˆè®¾ç½®è¿›å»ã€‚å› æ­¤å¦‚æœå½“å‰å¯¹è±¡æ˜¯åå‘é”æƒ…å†µä¸‹ï¼Œåå‘é”æ²¡æœ‰ä½ç½®å­˜å‚¨hashcodeï¼Œå› æ­¤éœ€è¦å‡çº§æˆ–è€…æ— åå‘ã€‚ä¸çŸ¥é“æè¿°çš„å¯¹ä¸å¯¹ï¼Œè¿˜è¯·è€å¸ˆæŒ‡æ•™","like_count":0},{"had_liked":false,"id":223387,"user_name":"è‚–æŸæŸ","can_delete":false,"product_type":"c1","uid":1136927,"ip_address":"","ucode":"A1D06FAD40FB33","user_header":"https://static001.geekbang.org/account/avatar/00/11/59/1f/a3679b09.jpg","comment_is_top":false,"comment_ctime":1591079429,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591079429","product_id":100010301,"comment_content":"&quot;å…·ä½“çš„åšæ³•ä¾¿æ˜¯åœ¨æ¯ä¸ªç±»ä¸­ç»´æŠ¤ä¸€ä¸ª epoch å€¼ï¼Œä½ å¯ä»¥ç†è§£ä¸ºç¬¬å‡ ä»£åå‘é”ã€‚å½“è®¾ç½®åå‘é”æ—¶ï¼ŒJava è™šæ‹Ÿæœºéœ€è¦å°†è¯¥ epoch å€¼å¤åˆ¶åˆ°é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¸­ã€‚&quot;<br>æ¯ä¸ªç±»æ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Ÿæ‰€æœ‰çš„ç±»ï¼ŸSynchronizationå¯ä»¥åŠ åœ¨æ–¹æ³•ä¸Šï¼Œä¹Ÿå¯ä»¥åŠ åœ¨ä»£ç å—ï¼Œè¿˜å¯ä»¥åŠ åœ¨ç±»ä¸Šï¼Œåªclassä¸Šç»´æŠ¤è¿™ä¸ªepocå€¼ï¼Œæ˜¯æ€ä¹ˆç»´æŠ¤çš„å‘¢ï¼Ÿ<br><br><br>&quot;æ–°è®¾ç½®çš„åå‘é”åˆ™éœ€è¦å¤åˆ¶æ–°çš„ epoch å€¼ã€‚ä¸ºäº†ä¿è¯å½“å‰æŒæœ‰åå‘é”å¹¶ä¸”å·²åŠ é”çš„çº¿ç¨‹ä¸è‡³äºå› æ­¤ä¸¢é”ï¼ŒJava è™šæ‹Ÿæœºéœ€è¦éå†æ‰€æœ‰çº¿ç¨‹çš„ Java æ ˆï¼Œæ‰¾å‡ºè¯¥ç±»å·²åŠ é”çš„å®ä¾‹ï¼Œå¹¶ä¸”å°†å®ƒä»¬æ ‡è®°å­—æ®µä¸­çš„ epoch å€¼åŠ  1&quot;<br>Açº¿ç¨‹æ–°è®¾ç½®åå‘é”å¤åˆ¶åˆ°epochå€¼åˆ°å¯¹è±¡ï¼Œè¿™ä¸ªé”ä¸å°±æ˜¯Açº¿ç¨‹ç‹¬æœ‰äº†å—ï¼Œä¸ºä»€ä¹ˆjavaè™šæ‹Ÿæœºè¿˜æœ‰éå†å…¶ä»–æ‰€æœ‰çš„çº¿ç¨‹æ ˆï¼Œä¿è¯è¯¥ç±»å·²åŠ é”çš„å®ä¾‹çš„é”ç»§ç»­æœ‰æ•ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":203871,"user_name":"æœ‰ç±³","can_delete":false,"product_type":"c1","uid":1005042,"ip_address":"","ucode":"C9A10B7A67BC12","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/f2/ba68d931.jpg","comment_is_top":false,"comment_ctime":1586278468,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586278468","product_id":100010301,"comment_content":"å—¯è®°ä¸€ä¸‹ç›¸å…³çŸ¥è¯†ç‚¹ï¼šå¯é‡å…¥é”ã€å…¬å¹³é”ã€è‡ªæ—‹é”ã€ä¹è§‚é”ã€åå‘é”ã€‚<br>CASæ˜¯å®ç°ä¹è§‚é”çš„ä¸€ç§æ–¹å¼ï¼Œå¹³æ—¶å¼€å‘å¤„ç†é«˜å¹¶å‘çš„åœºæ™¯ï¼Œä¹Ÿä¼šä½¿ç”¨CASã€‚å…·ä½“è¯´å°±æ˜¯update table set status=1 where id=1 and status=0;è¿”å›1å°±æ˜¯æ‹¿åˆ°é”å•¦~~~","like_count":0},{"had_liked":false,"id":200194,"user_name":"Sundnd","can_delete":false,"product_type":"c1","uid":1131316,"ip_address":"","ucode":"BA60F74AD42F9A","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/34/5684e180.jpg","comment_is_top":false,"comment_ctime":1585555712,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585555712","product_id":100010301,"comment_content":"&gt;Java çº¿ç¨‹çš„é˜»å¡ä»¥åŠå”¤é†’ï¼Œéƒ½æ˜¯ä¾é æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºç¬¦åˆ posix æ¥å£çš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚ macOS å’Œç»å¤§éƒ¨åˆ†çš„ Linuxï¼‰ï¼Œä¸Šè¿°æ“ä½œæ˜¯é€šè¿‡ pthread çš„äº’æ–¥é”ï¼ˆmutexï¼‰æ¥å®ç°çš„ã€‚æ­¤å¤–ï¼Œè¿™äº›æ“ä½œå°†æ¶‰åŠç³»ç»Ÿè°ƒç”¨ï¼Œéœ€è¦ä»æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·æ€åˆ‡æ¢è‡³å†…æ ¸æ€ï¼Œå…¶å¼€é”€éå¸¸ä¹‹å¤§ã€‚<br><br>çœŸçš„æ˜¯ä½¿ç”¨å†…æ ¸æä¾›çš„äº’æ–¥é”å—ï¼Ÿ å†…ç½®é”å’Œreentranglockéƒ½æ˜¯ç›´æ¥ä½¿ç”¨ç¡¬ä»¶æŒ‡ä»¤æ¯”è¾ƒäº¤äº’å’Œè‡ªå·±æ„å»ºåŒæ­¥é˜Ÿåˆ—å®ç°çš„å§?  <br><br>å¦å¤–å°±æ˜¯è°ƒç”¨å†…æ ¸å¯èƒ½ç‰¹æƒçº§åˆ‡æ¢é™„å¸¦çš„æ“ä½œï¼Œå¼€é”€ä¹‹å¤§æ— æ³•ç†è§£ã€‚<br><br>æœ€åå°±æ˜¯é‡é‡çº§è¿™ä¸ªè¯ï¼Œè¿™ä¸ªåªæ˜¯å’Œè‡ªå·±çš„åå‘å’Œè½»é‡æ¯”å§?  æ’å®ƒé”çš„å®ç°æˆ‘ç†è§£éƒ½ä¸€ä¸ªå¥—è·¯ï¼Œè‡³å°‘å’Œreentranglockä¸ä¼šæœ‰ä»€ä¹ˆå·®å¼‚ã€‚<br><br>ä»¥ä¸Šï¼Œé›¨è¿ªåŒå­¦çœ‹åˆ°å¸®å¿™è§£ç­”ä¸‹ã€‚è¿™æ˜¯æˆ‘æœ€è¿‘çš„ç†è§£ï¼Œä¸å¯¹è¿˜è¯·å¸®å¿™çº æ­£ï¼Œè°¢è°¢ã€‚<br><br>","like_count":0,"discussions":[{"author":{"id":1131316,"avatar":"https://static001.geekbang.org/account/avatar/00/11/43/34/5684e180.jpg","nickname":"Sundnd","note":"","ucode":"BA60F74AD42F9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217417,"discussion_content":"æ‰‹æœºç å­—ï¼Œå•è¯æ‰“é”™ï¼ŒReentrantLock ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585556476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188903,"user_name":"é™å¿ƒ","can_delete":false,"product_type":"c1","uid":1335457,"ip_address":"","ucode":"EB264FA6519FDA","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/a1/8f003697.jpg","comment_is_top":false,"comment_ctime":1584432469,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1584432469","product_id":100010301,"comment_content":"è¯·é—®è€å¸ˆï¼š<br>1ã€ç¬¬ä¸€ä¸ªçº¿ç¨‹åˆšå¯åŠ¨æ—¶ï¼Œæ‹¿åˆ°çš„é”æ˜¯å“ªç§é”ï¼Ÿåå‘é”ï¼Œè½»é‡çº§é”ï¼Œè¿˜æ˜¯é‡é‡çº§é”ï¼Ÿ<br>2ã€åå‘é”å’Œæ— é”æ˜¯åŒä¸€ä¸ªæ¦‚å¿µå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":184056,"user_name":"å®¶åº†","can_delete":false,"product_type":"c1","uid":1184982,"ip_address":"","ucode":"D77A489C78EF0D","user_header":"https://static001.geekbang.org/account/avatar/00/12/14/d6/e79204be.jpg","comment_is_top":false,"comment_ctime":1583213813,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583213813","product_id":100010301,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘è¿™è¾¹æœ‰ä¸¤ä¸ªé—®é¢˜ã€‚1ã€è®¾ç½®åå‘é”åï¼ŒhashCodeå­˜æ”¾åœ¨é‚£é‡Œã€‚2ã€é‡é‡çº§é”é‡Šæ”¾åæ˜¯ç›´æ¥å˜æˆæ— é”çŠ¶æ€å—ï¼Ÿè¿˜æ˜¯è¯¥é”å°±ä¸€ç›´æ˜¯é‡é‡çº§é”ã€‚","like_count":0},{"had_liked":false,"id":178364,"user_name":"å¤§ä¿Šstan","can_delete":false,"product_type":"c1","uid":1125370,"ip_address":"","ucode":"BD0CB5FC790DDB","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/fa/1cde88d4.jpg","comment_is_top":false,"comment_ctime":1581669770,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581669770","product_id":100010301,"comment_content":"è¿™ç¯‡æ–‡ç« ä¸æ‡‚å¾—å¯ä»¥çœ‹çœ‹javaæ€§èƒ½è°ƒä¼˜å®æˆ˜çš„ç¬¬12ç« èŠ‚è®²çš„æ¸…æ¥šä¸€äº›ã€‚","like_count":0},{"had_liked":false,"id":165253,"user_name":"é»‘è‰²æ¯›è¡£","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1577189197,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577189197","product_id":100010301,"comment_content":"å¦‚æœä¸æ˜¯ Xâ€¦X01ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ã€‚ç¬¬ä¸€ï¼Œè¯¥çº¿ç¨‹é‡å¤è·å–åŒä¸€æŠŠé”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†é”è®°å½•æ¸…é›¶ï¼Œä»¥ä»£è¡¨è¯¥é”è¢«é‡å¤è·å–ã€‚ç¬¬äºŒï¼Œå…¶ä»–çº¿ç¨‹æŒæœ‰è¯¥é”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†è¿™æŠŠé”è†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œå¹¶ä¸”é˜»å¡å½“å‰çº¿ç¨‹ã€‚<br><br><br>è¿™ä¸ªä¸ºå•¥é˜»å¡å½“å‰çº¿ç¨‹å‘¢ï¼Ÿä¸åº”è¯¥æ˜¯å…¶ä»–çº¿ç¨‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":165182,"user_name":"çŒ«çš„è„šæ­¥å£°","can_delete":false,"product_type":"c1","uid":1103789,"ip_address":"","ucode":"D708841347B9DB","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/ad/434d320e.jpg","comment_is_top":false,"comment_ctime":1577176653,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1577176653","product_id":100010301,"comment_content":"ä¸çŸ¥é“è€å¸ˆè¿˜çœ‹ä¸çœ‹å•Šï¼Ÿæˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œåœ¨åå‘é”æ’¤é”€çš„è¿‡ç¨‹ä¸­â€œepoch â€å­—æ®µæˆ‘ä»ç½‘ä¸Šæ‰¾çš„Mack Wordç»“æ„å›¾æ¥çœ‹ï¼Œå®ƒåªæœ‰2ä¸ªbitï¼Œä½†æ ¹æ®æ‚¨çš„æ–‡ç« ç±»ä¸­çš„â€œepoch â€æœ‰å¯èƒ½è¾¾åˆ°20å’Œ40ï¼Œè¯·é—®æ˜¯æ€ä¹ˆåˆ¤æ–­ä»–ä»¬æ˜¯å¦ç›¸ç­‰çš„å‘¢ï¼ŸåŸæ–‡â€œæœ€åä¸‰ä½æ˜¯å¦ä¸º 101ï¼Œæ˜¯å¦åŒ…å«å½“å‰çº¿ç¨‹çš„åœ°å€ï¼Œä»¥åŠ epoch å€¼æ˜¯å¦å’Œé”å¯¹è±¡çš„ç±»çš„ epoch å€¼ç›¸åŒâ€","like_count":0,"discussions":[{"author":{"id":1338767,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/8f/ce03dd1a.jpg","nickname":"seng man","note":"","ucode":"72E536B99DEF03","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366437,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618061821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162609,"user_name":"ç –ç“¦å·¥","can_delete":false,"product_type":"c1","uid":1021194,"ip_address":"","ucode":"A0AAF93973D6A8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/95/0a/817c4356.jpg","comment_is_top":false,"comment_ctime":1576564740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576564740","product_id":100010301,"comment_content":"éšå¼çº¦æŸï¼Œè¿™æ˜¯å€¼å¾—ä»€ä¹ˆæƒ…å†µï¼Œèƒ½å¤§æ¦‚è¯´æ˜ä¸€ä¸‹å—ï¼Ÿ ååˆ†æ„Ÿè°¢ï¼ï¼","like_count":0},{"had_liked":false,"id":151307,"user_name":"é•¿è„–å­æ ‘","can_delete":false,"product_type":"c1","uid":1182802,"ip_address":"","ucode":"D9090EF67EEB1B","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/52/f25c3636.jpg","comment_is_top":false,"comment_ctime":1573698011,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1573698011","product_id":100010301,"comment_content":"å…³äº monitorenter &#47; monitorexit ä¸¤ç§æŒ‡ä»¤å‡ä¼šæ¶ˆè€—æ“ä½œæ•°æ ˆä¸Šçš„ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å…ƒç´   æˆ‘è§£é‡Šä¸‹<br>è¿™ä¸¤ä¸ªæŒ‡ä»¤åœ¨æ‰§è¡Œå‰å‡éœ€è¦å°†é”çš„å¯¹è±¡å¼•ç”¨æ¨è‡³æ ˆé¡¶<br>é¡ºä¾¿åˆ†äº«ä¸‹æœ¬èŠ‚çš„æ€ç»´å¯¼å›¾å“ˆå“ˆ<br>https:&#47;&#47;www.processon.com&#47;view&#47;link&#47;5dccb8a1e4b071befcc7edb7","like_count":0},{"had_liked":false,"id":138628,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1570376947,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570376947","product_id":100010301,"comment_content":"è€å¸ˆå¥½æœ‰ä¸ªé—®é¢˜ã€‚è°ƒç”¨notify allæ—¶ã€‚é”è¿˜æ˜¯è¢«è°ƒç”¨çº¿ç¨‹æŒæœ‰ç€çš„ï¼Œåªæœ‰å‡ºäº†ä¸´ç•ŒåŒºæ‰ä¼šé‡Šæ”¾é”ã€‚è¢«å”¤é†’çš„é‚£äº›çº¿ç¨‹ä¼šä»ç­‰å¾…é˜Ÿåˆ—è¿›å…¥é”æ± é˜Ÿåˆ—ã€‚åœ¨notify all å’Œå‡ºä¸´ç•ŒåŒºè¿™æ®µæ—¶é—´å†…ï¼Œè¢«å”¤é†’çš„çº¿ç¨‹ï¼Œä¼šå»ç«äº‰é”ä¹ˆ?è¿˜æ˜¯åªæœ‰é™¤äº†ä¸´ç•ŒåŒºé‡Šæ”¾é”åæ‰ä¼šè§¦å‘é”ç«äº‰ã€‚æˆ‘çœ‹æœ‰æœ¬ä¹¦ä¸Šè¯´notify allå†™åœ¨ä¸´ç•ŒåŒºæœ«å°¾ï¼Œå¯å‡å°‘é”ç«äº‰ã€‚","like_count":0},{"had_liked":false,"id":134835,"user_name":"ç å†œKevinäº®","can_delete":false,"product_type":"c1","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1568941144,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568941144","product_id":100010301,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¦‚ä½•åˆ†æä»€ä¹ˆæƒ…å†µä¸‹æ˜¯å“ªç§é”ï¼Ÿä»¥åŠå¦‚ä½•éªŒè¯åˆ†æç»“è®ºå‘¢","like_count":0},{"had_liked":false,"id":131037,"user_name":"rong","can_delete":false,"product_type":"c1","uid":1128740,"ip_address":"","ucode":"637A27C532D817","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/24/ab14f6cf.jpg","comment_is_top":false,"comment_ctime":1567606346,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567606346","product_id":100010301,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜ä¸æ˜ç™½ï¼Œå°±æ˜¯é”ä»£ç å—çš„æ—¶å€™ï¼Œåªæœ‰ä¸€ä¸ªmonitorenteræŒ‡ä»¤ï¼Œé‚£æ€ä¹ˆçŸ¥é“è¿™ä¸ªé”ç»‘å®šçš„æ˜¯å“ªä¸ªå¯¹è±¡å‘¢ï¼Ÿæ¯”å¦‚æˆ‘è‡ªå®šä¹‰äº†Personç±»ï¼Œä»–çš„å®ä¾‹personï¼Œ@synchronizedï¼ˆpersonï¼‰ï¼Œæˆ‘çœ‹åˆ°å­—èŠ‚ç ä¸­åªæœ‰monitorenterï¼Œæ²¡çœ‹åˆ°ä»–å’Œpersonå¯¹è±¡çš„ç»‘å®šå…³ç³»å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":128048,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1566824676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566824676","product_id":100010301,"comment_content":"å»ºè®®å…ˆè®²è§£ä¸€ä¸‹mark wordçš„ç»“æ„ï¼Œç„¶åå¾ˆå¤šé—®é¢˜å°±æ¸…æ™°äº†ã€‚","like_count":0},{"had_liked":false,"id":97727,"user_name":"é©¬ä¸Šåˆ°","can_delete":false,"product_type":"c1","uid":1147414,"ip_address":"","ucode":"9FAA3E39B653BE","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/16/937c6906.jpg","comment_is_top":false,"comment_ctime":1558756717,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558756717","product_id":100010301,"comment_content":"è¿ªè¿ªè€å¸ˆçœŸæ£’","like_count":0},{"had_liked":false,"id":84608,"user_name":"æäº®äº®","can_delete":false,"product_type":"c1","uid":1116508,"ip_address":"","ucode":"290907F930B261","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","comment_is_top":false,"comment_ctime":1554884815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554884815","product_id":100010301,"comment_content":"ä¸€ä¸ªæ’¤é”€é˜€å€¼ä¸º40ï¼Œä¸€ä¸ªæ’¤é”€é˜€å€¼ä¸º20 ï¼Œ20è¿™ä¸ªè¡¨ç¤ºè¶…è¿‡è¿™ä¸ªæ¬¡æ•°é‚£ä¸ªè¿™ä¸ªåå‘é”å°±æ¢ä»£äº†ã€‚epochçš„å€¼åŠ 1ï¼Œå¦‚æœæ’¤é”€æ¬¡æ•°è¶…è¿‡40å°±è¯æ˜è¿™ä¸ªç±»ä¸é€‚åˆä½¿ç”¨åå‘é”ã€‚ç…§è¿™ä¸ªæ•°æ®æ¥è®²æ˜¯ä¸æ˜¯æ„å‘³ç€å·®ä¸å¤šæ¢2ä»£å°±è¡¨ç¤ºè¯¥ç±»ä¸é€‚åˆåå‘é”äº†ï¼Œä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸ï¼Ÿ","like_count":0},{"had_liked":false,"id":73521,"user_name":"ç‹è‚–æ­¦","can_delete":false,"product_type":"c1","uid":1282385,"ip_address":"","ucode":"561AF05284EBE2","user_header":"https://static001.geekbang.org/account/avatar/00/13/91/51/234f9a73.jpg","comment_is_top":false,"comment_ctime":1551919719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551919719","product_id":100010301,"comment_content":"â€œå½“è¿›è¡ŒåŠ é”æ“ä½œæ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šåˆ¤æ–­æ˜¯å¦å·²ç»æ˜¯é‡é‡çº§é”ã€‚å¦‚æœä¸æ˜¯ï¼Œå®ƒä¼šåœ¨å½“å‰çº¿ç¨‹çš„å½“å‰æ ˆæ¡¢ä¸­åˆ’å‡ºä¸€å—ç©ºé—´ï¼Œä½œä¸ºè¯¥é”çš„é”è®°å½•ï¼Œå¹¶ä¸”å°†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µå¤åˆ¶åˆ°è¯¥é”è®°å½•ä¸­ã€‚â€<br>æœ‰ä¸ªç–‘é—®éº»çƒ¦è€å¸ˆå¸®è§£ç­”ä¸€ä¸‹ï¼šæ ˆå¸§ä¸æ˜¯ä¸€éè¿ç»­çš„ç©ºé—´å—ï¼Ÿå¤§å°ä¸æ˜¯å›ºå®šçš„å—ï¼Ÿåˆ’å‡ºçš„ç©ºé—´æ˜¯ä»å“ªé‡Œåˆ†é…å‡ºæ¥çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":67672,"user_name":"LINEZH","can_delete":false,"product_type":"c1","uid":1182000,"ip_address":"","ucode":"094B2E673AC570","user_header":"https://static001.geekbang.org/account/avatar/00/12/09/30/ff83622b.jpg","comment_is_top":false,"comment_ctime":1550220897,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550220897","product_id":100010301,"comment_content":"æœ‰ä¸€ä¸ªç–‘é—®, JVMæ˜¯å¦‚ä½•é€‰æ‹©ä½¿ç”¨é‡é‡é”&#47;è½»é‡é”&#47;è‡ªæ—‹é”å‘¢? æ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™æ ¹æ®é”å’Œçº¿ç¨‹çš„æƒ…å†µå†³å®šå—, èƒ½ä¸èƒ½è¯´çš„å…·ä½“ä¸€ç‚¹?","like_count":0},{"had_liked":false,"id":57248,"user_name":"fangxuan","can_delete":false,"product_type":"c1","uid":1073369,"ip_address":"","ucode":"3870F2BF5679A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/d9/829ac53b.jpg","comment_is_top":false,"comment_ctime":1546698039,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1546698039","product_id":100010301,"comment_content":"å•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œå¼€å¯åå‘é”å’Œä¸å¼€å¯åå‘é”ï¼Œæ€§èƒ½ä¸Šæœ‰ä»€ä¹ˆå·®åˆ«å—ï¼Ÿå·®åˆ«åœ¨å“ªå„¿ï¼Ÿ","like_count":0},{"had_liked":false,"id":54594,"user_name":"yihang","can_delete":false,"product_type":"c1","uid":1012361,"ip_address":"","ucode":"A5506F085D1793","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/89/1a83120a.jpg","comment_is_top":false,"comment_ctime":1545908933,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545908933","product_id":100010301,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æ˜¯è¿™å‡ å¤©æ‰å¼€å§‹å­¦ä¹ è¿™ä¸ªä¸“æ ã€‚æœ‰è¿™ä¹ˆå‡ ä¸ªé—®é¢˜ï¼Œè§‰å¾—è¯»å®Œæ–‡ç« ä¹Ÿæœªèƒ½æ‰¾åˆ°ç­”æ¡ˆï¼Œè¯·è€å¸ˆè§£ç­”ï¼š<br>1ï¼‰ å¦‚æœè½»é‡çº§é”å·²ç»å‘ç°æœ‰ç«äº‰ï¼Œè†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œé‚£ä¹ˆä¹‹å‰æ‹¥æœ‰é”çš„çº¿ç¨‹ï¼Œè§£é”æ—¶ä¼šå”¤é†’è¯¥å¯¹è±¡ä¸Šçš„é˜»å¡çº¿ç¨‹ã€‚è¿™å¥è¯æˆ‘ç†è§£äº†ï¼Œä½†è¿™æ—¶å¯¹è±¡ä¸Šçš„Mark Word è¿˜æ˜¯é‡é‡çº§é”çš„æŒ‡é’ˆï¼ˆçŠ¶æ€10ï¼‰å—ï¼Ÿç›´åˆ°æœ€åä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾äº†é”ï¼Œå¯¹è±¡ä¸Šçš„Mark Word ä»ç„¶ä¿æŒçŠ¶æ€ 10 è¿˜æ˜¯ä¼šæ¢å¤åˆ°æ— é”çš„çŠ¶æ€ï¼ˆ01ï¼‰ï¼Ÿè¿˜æ˜¯ä»è¿™å¾€åå°±å§‹ç»ˆä¿æŒé‡é‡çº§é”çš„çŠ¶æ€äº†ï¼Ÿ<br><br>2ï¼‰åå‘é”ä¸­çš„ Rebias å’Œ revoke bias åº”è¯¥æ˜¯ä¸åŒçš„æ¦‚å¿µå§ï¼Œå­—é¢æ„æ€ï¼Œåè€…åº”è¯¥æ˜¯æ’¤é”€åå‘ï¼Œè€Œå‰è€…ä¼¼ä¹æ˜¯é‡ç”¨åå‘ã€‚ã€å¦‚æœæŸä¸€ç±»é”å¯¹è±¡çš„æ€»æ’¤é”€æ•°è¶…è¿‡äº†ä¸€ä¸ªé˜ˆå€¼ï¼ˆå¯¹åº” Java è™šæ‹Ÿæœºå‚æ•° -XX:BiasedLockingBulkRebiasThresholdï¼Œé»˜è®¤ä¸º 20ï¼‰ï¼Œé‚£ä¹ˆ Java è™šæ‹Ÿæœºä¼šå®£å¸ƒè¿™ä¸ªç±»çš„åå‘é”å¤±æ•ˆã€‚ã€‘è¯´å®è¯è¿™å¥è¯çœŸæ²¡çœ‹æ‡‚ï¼Œä»€ä¹ˆå«ã€è¿™ä¸ªç±»çš„åå‘é”å¤±æ•ˆã€‘ï¼Œæ„Ÿè§‰è¿™ä¸ªå‚æ•°æ˜¯ä¸ºäº†ä¼˜åŒ–åå‘é”ï¼Œèƒ½å¤Ÿè®©åå‘é”å¾—ä»¥é‡ç”¨<br>æˆ‘åœ¨ stackoverflowä¸Šæ‰¾äº†ä¸€ç¯‡è§£é‡Šï¼š<br>subsequent bulk rebias is possible if and only if number of revokes more than BiasedLockingBulkRebiasThreshold and less than BiasedLockingBulkRevokeThreshold and the latest revoke was not later than BiasedLockingDecayTime, where all escaped variables are JVM properties.<br>ä¸çŸ¥é“ä»–è¯´çš„æ˜¯å¦åœ¨ç†ï¼Ÿè¯·æŒ‡æ•™ï¼Œåœ°å€ï¼šhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;46312817&#47;does-java-ever-rebias-an-individual-lock<br>","like_count":0},{"had_liked":false,"id":54365,"user_name":"shawn","can_delete":false,"product_type":"c1","uid":1010221,"ip_address":"","ucode":"8F6A8C7920996E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/2d/ec4ed8ce.jpg","comment_is_top":false,"comment_ctime":1545835491,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545835491","product_id":100010301,"comment_content":"è€å¸ˆå¯¹äºè½»é‡çº§é”å¯ä»¥è¿™æ ·ç†è§£ä¹ˆï¼Ÿå¦‚ä¸‹ï¼š â€œè½»é‡çº§é”ï¼Œbçº¿ç¨‹åœ¨é”ç«äº‰æ—¶ï¼Œå‘ç°é”å·²ç»è¢«açº¿ç¨‹å ç”¨ï¼Œåˆ™bçº¿ç¨‹ä¸è¿›å…¥å†…æ ¸æ€ï¼Œè®©bçº¿ç¨‹è‡ªæ—‹ï¼Œæ‰§è¡Œç©ºå¾ªç¯ï¼Œç­‰å¾…açº¿ç¨‹é‡Šæ”¾é”ã€‚å¦‚æœï¼Œå®Œæˆè‡ªæ—‹ç­–ç•¥è¿˜æ˜¯å‘ç°açº¿ç¨‹æ²¡æœ‰é‡Šæ”¾é”ï¼Œæˆ–è€…è®©cçº¿ç¨‹å ç”¨äº†ã€‚åˆ™bçº¿ç¨‹è¯•å›¾å°†è½»é‡çº§é”å‡çº§ä¸ºé‡é‡çº§é”ã€‚â€","like_count":0},{"had_liked":false,"id":26167,"user_name":"æ›´è¿œçš„ä»¥å","can_delete":false,"product_type":"c1","uid":1059973,"ip_address":"","ucode":"213F4A12AEE895","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/85/fc2a568b.jpg","comment_is_top":false,"comment_ctime":1537509602,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537509602","product_id":100010301,"comment_content":"è¿™ç¯‡æ–‡ç« çš„æ¯”å–»ä¸¾å¾—å¾ˆæ£’ã€‚å¸®åŠ©ç†è§£ã€‚","like_count":0},{"had_liked":false,"id":23406,"user_name":"å¿—è¿œ","can_delete":false,"product_type":"c1","uid":1108762,"ip_address":"","ucode":"11015D14034130","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/1a/579c941e.jpg","comment_is_top":false,"comment_ctime":1536331478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536331478","product_id":100010301,"comment_content":"å¦‚æœä¸æ˜¯ï¼Œå®ƒä¼šåœ¨å½“å‰çº¿ç¨‹çš„å½“å‰æ ˆæ¡¢ä¸­åˆ’å‡ºä¸€å—ç©ºé—´ï¼Œä½œä¸ºè¯¥é”çš„é”è®°å½•ï¼Œå¹¶ä¸”å°†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µå¤åˆ¶åˆ°è¯¥é”è®°å½•ä¸­ã€‚è¯·é—®é”è®°å½•æ˜¯ä¸€å—æ ˆç©ºé—´å—ï¼Ÿé”è®°å½•åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿæ ‡è®°å­—æ®µå¤åˆ¶åˆ°ç©ºé—´ä¸­å—ï¼Ÿè€å¸ˆï¼Œæä¸ªå»ºè®®ï¼Œæ„Ÿè§‰è¿˜æœ‰æ–‡ç« å¾ˆå¤šçš„ä»£è¯ï¼ŒçŠ¶è¯­ä¹‹ç±»ï¼Œç¼ºå¦è¶³å¤Ÿçš„å®šè¯­æ¥ä¸°å¯Œæè¿°ã€‚","like_count":0},{"had_liked":false,"id":22081,"user_name":"licht","can_delete":false,"product_type":"c1","uid":1064030,"ip_address":"","ucode":"467270E57A7BF8","user_header":"https://static001.geekbang.org/account/avatar/00/10/3c/5e/6a26a8c4.jpg","comment_is_top":false,"comment_ctime":1535472862,"is_pvip":false,"replies":[{"id":"8013","content":"å†…å­˜å±éšœç›¸å½“äºå®šä¹‰äº†ä¸€ä¸ªç¦æ­¢é‡æ’åºçš„è§„åˆ™ï¼Œç„¶åå³æ—¶ç¼–è¯‘å™¨å’ŒCPUéœ€è¦éµå®ˆè¿™ä¸ªè§„åˆ™ã€‚","user_name":"ä½œè€…å›å¤","comment_id":22081,"uid":"1176688","ip_address":"","utype":1,"ctime":1535620751,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"1535472862","product_id":100010301,"comment_content":"2-2:å†…å­˜å±éšœï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå®ƒæ€ä¹ˆå°±èƒ½ç¦æ­¢é‡æ’åºå•¦ï¼Ÿè¿˜æœ‰æœ‰å…¶å¼•ç”³å‡ºçš„å„ç§å±è”½æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿä¹Ÿæ²¡å®Œå…¨æ˜ç™½ã€‚  å› ä¸ºä¸æ˜ç™½å†…å­˜å±éšœï¼Œå¯¹äºç©ºæŒ‡ä»¤çš„å†…å­˜å±éšœå¾ˆè¿·æƒ‘ï¼Ÿå¸Œæœ›è€å¸ˆå¸®å¿™è§£ç­”ä¸€ä¸‹ï¼Œè°¢è°¢äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422992,"discussion_content":"å†…å­˜å±éšœç›¸å½“äºå®šä¹‰äº†ä¸€ä¸ªç¦æ­¢é‡æ’åºçš„è§„åˆ™ï¼Œç„¶åå³æ—¶ç¼–è¯‘å™¨å’ŒCPUéœ€è¦éµå®ˆè¿™ä¸ªè§„åˆ™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535620751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21614,"user_name":"æ°¸çƒæ˜Ÿå…‰","can_delete":false,"product_type":"c1","uid":1119617,"ip_address":"","ucode":"D26A9097F9D24C","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/81/2c31cf79.jpg","comment_is_top":false,"comment_ctime":1535196525,"is_pvip":false,"replies":[{"id":"7903","content":"å‰é¢è¿™å¥æ˜¯å†™æ ˆä¸Šé”è®°å½•ä¸­çš„displaced mark wordï¼Œåé¢è¿™å¥æ˜¯CAS é”å¯¹è±¡çš„mark word","user_name":"ä½œè€…å›å¤","comment_id":21614,"uid":"1176688","ip_address":"","utype":1,"ctime":1535465465,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"1535196525","product_id":100010301,"comment_content":"â€œå‡è®¾å½“å‰é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¸º Xâ€¦XYZï¼ŒJava è™šæ‹Ÿæœºä¼šæ¯”è¾ƒè¯¥å­—æ®µæ˜¯å¦ä¸º Xâ€¦X01ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ›¿æ¢ä¸ºåˆšæ‰åˆ†é…çš„é”è®°å½•çš„åœ°å€ã€‚  â€<br>è¿™ä¸ªæè¿°ä¸Šé¢çš„ â€œåŠ é”æ“ä½œæ—¶ï¼Œå¦‚æœä¸æ˜¯é‡é‡çº§é”ï¼Œåˆ™åœ¨æ ˆä¸Šåˆ†é…ä¸€ä¸ªç©ºé—´å­˜å‚¨é”è®°å½•ï¼Œå¹¶å°†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µå¤åˆ¶åˆ°æ ˆè®°å½•ä¸­â€ çŸ›ç›¾å•Šï¼Œè¿˜æ˜¯æˆ‘æ²¡æœ‰çœ‹æ‡‚ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422766,"discussion_content":"å‰é¢è¿™å¥æ˜¯å†™æ ˆä¸Šé”è®°å½•ä¸­çš„displaced mark wordï¼Œåé¢è¿™å¥æ˜¯CAS é”å¯¹è±¡çš„mark word","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535465465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21476,"user_name":"é¡ºå­","can_delete":false,"product_type":"c1","uid":1089301,"ip_address":"","ucode":"0EA7710EC71814","user_header":"https://static001.geekbang.org/account/avatar/00/10/9f/15/05d3ade0.jpg","comment_is_top":false,"comment_ctime":1535105366,"is_pvip":false,"replies":[{"id":"7623","content":"åœ¨64ä½Javaè™šæ‹Ÿæœºé‡Œï¼Œåœ°å€éƒ½æ˜¯64ä½ï¼Œè€Œä¸”éƒ½æœ‰å†…å­˜å¯¹é½ï¼Œä¹Ÿå°±æ˜¯æœ€åå‡ ä½æ˜¯0ã€‚markwordé‡Œçš„æœ€åä¸¤ä½æ˜¯ç”¨ æŒ‰ä½æˆ– æ“ä½œå¹¶è¿›å»çš„ã€‚<br><br>(é“¾æ¥çš„å›¾å¯¹åº”çš„åº”è¯¥æ˜¯32ä½è™šæ‹Ÿæœºï¼Œæ‰€ä»¥åœ°å€æ˜¯32ä½)","user_name":"ä½œè€…å›å¤","comment_id":21476,"uid":"1176688","ip_address":"","utype":1,"ctime":1535117700,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"1535105366","product_id":100010301,"comment_content":"å¯¹äºè½»é‡çº§é”ï¼Œmarkwordæœ¬è´¨æ˜¯ä¸€ä¸ª32ä½çš„bitï¼Œæ— é”æƒ…å†µä¸‹ï¼Œæœ«å°¾æ˜¯01<br>åŠ é”è¿‡ç¨‹åªæ˜¯é€šè¿‡CASæŠŠè¿™32ä½çš„bitæ›¿æ¢ä¸ºlockrecordçš„åœ°å€ï¼Œç”±äºlockrecordåœ°å€åªæœ‰30ä½ï¼Œæ‰€ä»¥æœ«å°¾è¡¥é½32åï¼Œæœ«å°¾æ˜¯00<br>ä¸çŸ¥é“ç†è§£æ˜¯å¦æ­£ç¡®<br><br>ç„¶åæœ‰ä¸€ä¸ªç–‘é—®ï¼Œå‡çº§ä¸ºé‡é‡çº§é”çš„æ—¶å€™ï¼Œ10æ˜¯ä»€ä¹ˆæ—¶å€™ä¿®æ”¹çš„?çœ‹åˆ°çš„æ–‡æ¡£éƒ½åªè¯´æŠŠæŒ‡é’ˆä¿®æ”¹ä¸ºmutexï¼Œæ²¡æåˆ°10æ˜¯æ€ä¹ˆæ¥çš„ï¼Œæ˜¯mutex30ä½åœ°å€åŠ ä¸Š10åCASæ›¿æ¢è¿›å»çš„å—","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422693,"discussion_content":"åœ¨64ä½Javaè™šæ‹Ÿæœºé‡Œï¼Œåœ°å€éƒ½æ˜¯64ä½ï¼Œè€Œä¸”éƒ½æœ‰å†…å­˜å¯¹é½ï¼Œä¹Ÿå°±æ˜¯æœ€åå‡ ä½æ˜¯0ã€‚markwordé‡Œçš„æœ€åä¸¤ä½æ˜¯ç”¨ æŒ‰ä½æˆ– æ“ä½œå¹¶è¿›å»çš„ã€‚\n\n(é“¾æ¥çš„å›¾å¯¹åº”çš„åº”è¯¥æ˜¯32ä½è™šæ‹Ÿæœºï¼Œæ‰€ä»¥åœ°å€æ˜¯32ä½)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535117700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21468,"user_name":"æ¢¦æƒ³å¯åŠ¨çš„èœ—ç‰›","can_delete":false,"product_type":"c1","uid":1111602,"ip_address":"","ucode":"781F2A6DA6FEB3","user_header":"https://static001.geekbang.org/account/avatar/00/10/f6/32/358f9411.jpg","comment_is_top":false,"comment_ctime":1535100399,"is_pvip":false,"replies":[{"id":"7619","content":"éƒ½å¯ä»¥çš„ã€‚åœ¨Graalé‡Œæ˜¯å…ˆå¤åˆ¶å†CASçš„ï¼Œå¯ä»¥å‡å°‘ä¸€äº›ä¸´ç•ŒåŒºé‡Œçš„ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","comment_id":21468,"uid":"1176688","ip_address":"","utype":1,"ctime":1535116860,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"1535100399","product_id":100010301,"comment_content":"è½»é‡çº§é”åº”è¯¥æ˜¯å…ˆé€šè¿‡casæ›¿æ¢é”çš„æ ‡è®°å­—æ®µï¼Œç„¶åå†æŠŠæ ‡è®°å­—æ®µå¤åˆ¶åˆ°æ ˆä¸­å¯¹åº”çš„é”è®°å½•ä¸­æŠŠï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422691,"discussion_content":"éƒ½å¯ä»¥çš„ã€‚åœ¨Graalé‡Œæ˜¯å…ˆå¤åˆ¶å†CASçš„ï¼Œå¯ä»¥å‡å°‘ä¸€äº›ä¸´ç•ŒåŒºé‡Œçš„ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535116860,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21106,"user_name":"javaadu","can_delete":false,"product_type":"c1","uid":1000519,"ip_address":"","ucode":"8C0B140F1C8992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg","comment_is_top":false,"comment_ctime":1534919149,"is_pvip":true,"replies":[{"id":"7415","content":"å‰å‡ ç¯‡çš„invokedynamic(ä¸‹)æœ‰è®²","user_name":"ä½œè€…å›å¤","comment_id":21106,"uid":"1176688","ip_address":"","utype":1,"ctime":1534928794,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"1534919149","product_id":100010301,"comment_content":"æƒ³çœ‹ä¸‹jvmæ˜¯æ€ä¹ˆå®ç°streamå’Œlambdaè¡¨è¾¾å¼çš„","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422539,"discussion_content":"å‰å‡ ç¯‡çš„invokedynamic(ä¸‹)æœ‰è®²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534928794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21077,"user_name":"è´¾æ™ºæ–‡","can_delete":false,"product_type":"c1","uid":1100235,"ip_address":"","ucode":"600CF0AB215D1A","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/cb/7b6802cc.jpg","comment_is_top":false,"comment_ctime":1534902789,"is_pvip":false,"replies":[{"id":"7426","content":"çœ‹æ ‡è®°å­—æ®µæ‰€æŒ‡å‘çš„è½»é‡çº§é”é”çºªå½•æ˜¯å¦åœ¨è‡ªå·±æ ˆä¸Šã€‚","user_name":"ä½œè€…å›å¤","comment_id":21077,"uid":"1176688","ip_address":"","utype":1,"ctime":1534931321,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"1534902789","product_id":100010301,"comment_content":"æœä¸æ˜¯ Xâ€¦X01ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ã€‚ç¬¬ä¸€ï¼Œè¯¥çº¿ç¨‹é‡å¤è·å–åŒä¸€æŠŠé”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†é”è®°å½•æ¸…é›¶ï¼Œä»¥ä»£è¡¨è¯¥é”è¢«é‡å¤è·å–ã€‚ç¬¬äºŒï¼Œå…¶ä»–çº¿ç¨‹æŒæœ‰è¯¥é”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†è¿™æŠŠé”è†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œå¹¶ä¸”é˜»å¡å½“å‰çº¿ç¨‹ã€‚<br>è¿™ä¸¤ä¸ªæƒ…å†µæ€ä¹ˆåŒºåˆ†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422524,"discussion_content":"çœ‹æ ‡è®°å­—æ®µæ‰€æŒ‡å‘çš„è½»é‡çº§é”é”çºªå½•æ˜¯å¦åœ¨è‡ªå·±æ ˆä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534931321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}