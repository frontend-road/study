{"id":108197,"title":"12 | Dubbo、Spring Cloud和Kubernetes该如何选型（下）","content":"","comments":[{"had_liked":false,"id":117002,"user_name":"Onvertex","can_delete":false,"product_type":"c3","uid":1474561,"ip_address":"","ucode":"8C1681C854C97C","user_header":"https://static001.geekbang.org/account/avatar/00/16/80/01/bbd34bfb.jpg","comment_is_top":false,"comment_ctime":1563953353,"is_pvip":false,"replies":[{"id":42831,"content":"个人建议，如果用k8s的话，用SpringBoot就可以了，因为k8s内置支持服务发现，没必要再引入Eureka&#47;Ribbon那套，当然Zuul还是可以用的，当作k8s中的一种网关服务，类似我Staffjoy项目中的Fraday的做法。\n\n当然，如果你硬要把SpringCloud和K8s结合起来用，也不是不可以，只不过K8s就退化成一个只是用于部署微服务的发布平台，它的微服务能力就用不了。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1563973558,"ip_address":"","comment_id":117002,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，我想问一下 springcloud 全家桶+ docker + k8s  用docker+k8s 用来实现自动化云部署  可以吗  ","like_count":5,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459773,"discussion_content":"个人建议，如果用k8s的话，用SpringBoot就可以了，因为k8s内置支持服务发现，没必要再引入Eureka/Ribbon那套，当然Zuul还是可以用的，当作k8s中的一种网关服务，类似我Staffjoy项目中的Fraday的做法。\n\n当然，如果你硬要把SpringCloud和K8s结合起来用，也不是不可以，只不过K8s就退化成一个只是用于部署微服务的发布平台，它的微服务能力就用不了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563973558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1942402,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/a3/82/8bafdbd9.jpg","nickname":"Hunter","note":"","ucode":"10D84449D83AC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":260054,"discussion_content":"k8s下，服务的熔断限流降级怎么做？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588844616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1343480,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL23Wicb0gO9RIYCXOiajnCf92RDd0MOOGuFxx4ZKQpDDlMgLbZecMDdnfCEIPQkbebgBuic2SXfm0Gw/132","nickname":"江流","note":"","ucode":"D1FDC0777BF88B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288529,"discussion_content":"我觉得servicemesh更好，只是现在还不成熟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593775758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210776,"user_name":"光","can_delete":false,"product_type":"c3","uid":1284618,"ip_address":"","ucode":"BDA7F41566E4FE","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/0a/6c74e932.jpg","comment_is_top":false,"comment_ctime":1587824124,"is_pvip":false,"replies":[{"id":78520,"content":"历史演进原因，虽然现在有特斯拉，但是还是加油的汽车很多，骑自行车的也不少。新技术不是一下普及，老技术也不是马上退出历史舞台。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1587905854,"ip_address":"","comment_id":210776,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"比较疑问得是，比如像阿里云他们自己应该也是K8S 容器化方式，那么为什么还会用类似于dubbo HSF 这样得解决方案呢。","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493106,"discussion_content":"历史演进原因，虽然现在有特斯拉，但是还是加油的汽车很多，骑自行车的也不少。新技术不是一下普及，老技术也不是马上退出历史舞台。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587905854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118276,"user_name":"Mr.Edge","can_delete":false,"product_type":"c3","uid":1049045,"ip_address":"","ucode":"39BDF39E8E2719","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/d5/ce2bbdb7.jpg","comment_is_top":false,"comment_ctime":1564307519,"is_pvip":false,"replies":[{"id":43320,"content":"dubbo是all in one，基本上要用全用，当然也不是绝对。spring cloud是组件化的，里头的组件zuul&#47;eureka&#47;ribbon&#47;hystrix&#47;config&#47;sleuth，可以选用，或者替换。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564320707,"ip_address":"","comment_id":118276,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"视频里有点疑惑 应该是dubbo更像组装机吧 而spring cloud 是全家桶 更像品牌机","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460340,"discussion_content":"dubbo是all in one，基本上要用全用，当然也不是绝对。spring cloud是组件化的，里头的组件zuul/eureka/ribbon/hystrix/config/sleuth，可以选用，或者替换。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564320707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114375,"user_name":"王静","can_delete":false,"product_type":"c3","uid":1601048,"ip_address":"","ucode":"A0DDDC9BF2E9BA","user_header":"https://static001.geekbang.org/account/avatar/00/18/6e/18/ce0fc4b7.jpg","comment_is_top":false,"comment_ctime":1563286165,"is_pvip":false,"replies":[{"id":41846,"content":"SpringBoot简单可以理解为是开发单个微服务或者Web应用的框架，SpringCloud则是微服务开发全家桶，可以搭建一套微服务基础架构，包括Zuul网关，Eureka&#47;Ribbon, Config，OAuth2，Hystrix，Sleuth等等。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1563364862,"ip_address":"","comment_id":114375,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，spring cloud和spring boot是啥关系或者是啥区别啊","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458631,"discussion_content":"SpringBoot简单可以理解为是开发单个微服务或者Web应用的框架，SpringCloud则是微服务开发全家桶，可以搭建一套微服务基础架构，包括Zuul网关，Eureka/Ribbon, Config，OAuth2，Hystrix，Sleuth等等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563364862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2296844,"avatar":"","nickname":"云","note":"","ucode":"F7E4BEEBCFE1DB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331676,"discussion_content":"Spring Boot相比于Spring 而言就是一个脚手架，也就是让开发者开发应用更方便而已","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606925491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156287,"user_name":"Geek_973117","can_delete":false,"product_type":"c3","uid":1599362,"ip_address":"","ucode":"E9DA8A251BC22E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Ir8CaJMYTULOZiavNbS1Y3PmaaUuBqeLKZBdonb7micYRhuObUeN9hicuVCVYfEPhvZiccGTyYFibZZaPqnqAHr9NHw/132","comment_is_top":false,"comment_ctime":1574850012,"is_pvip":false,"replies":[{"id":60040,"content":"php做前端web页面合适，后台服务可以用java，性能更好。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1574856600,"ip_address":"","comment_id":156287,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"我听这个课程就是为了找到一个既可以用php又可以用java的微服务技术。。老师讲得很不错。。。不过，好舒服框架  听到这里我笑惨了","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476056,"discussion_content":"php做前端web页面合适，后台服务可以用java，性能更好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574856600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1599362,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Ir8CaJMYTULOZiavNbS1Y3PmaaUuBqeLKZBdonb7micYRhuObUeN9hicuVCVYfEPhvZiccGTyYFibZZaPqnqAHr9NHw/132","nickname":"Geek_973117","note":"","ucode":"E9DA8A251BC22E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63149,"discussion_content":"这个是的，我就是做了很多年的php，最近才转过来做java。php在为服务商很弱一直我的心头不舒服的地方，所以我想了解一下有没有php的解决方案。不过接触了java之后也感觉到了java的魅力，的确做后端java优势更大","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574867246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158694,"user_name":"dingjh","can_delete":false,"product_type":"c3","uid":1029434,"ip_address":"","ucode":"DD810B184838CF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b5/3a/60554bae.jpg","comment_is_top":false,"comment_ctime":1575435436,"is_pvip":false,"replies":[{"id":60748,"content":"1. Dubbo一般只做内部RPC服务，如果要暴露到外网，建议增加BFF层转换成HTT&#47;REST服务，BFF层定义看第4章。\n2. 请继续看第4章《可编程网关设计和实践》，有解释通用的服务分层方案。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1575463347,"ip_address":"","comment_id":158694,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师好，目前学习视频过程中，我有两个问题直接在这里一起提问：\n一、请问如果用Spring cloud 有zuul做网关层，那么如果非Spring全家桶，比如用Dubbo这样的rpc分布式框架，网关该怎么做呢？\n二、请问微服务设计过程中，垂直划分为基础服务层（实体的CURD），业务服务层（需求的实现逻辑层），网关层（Client调用的API）可以吗？你视频种提到的基础服务是这个意思吗？\n\n谢谢！","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476815,"discussion_content":"1. Dubbo一般只做内部RPC服务，如果要暴露到外网，建议增加BFF层转换成HTT/REST服务，BFF层定义看第4章。\n2. 请继续看第4章《可编程网关设计和实践》，有解释通用的服务分层方案。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575463347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125120,"user_name":"JerryMen","can_delete":false,"product_type":"c3","uid":1508783,"ip_address":"","ucode":"4C8EB4A26E6441","user_header":"https://static001.geekbang.org/account/avatar/00/17/05/af/57a300fb.jpg","comment_is_top":false,"comment_ctime":1566094015,"is_pvip":false,"replies":[{"id":45976,"content":"可以持续关注，因为里头有很多阿里全新开发的组件 （Sentinel&#47;Seata&#47;Nacos等)，把坑踩平完全落地，我估计还需要不少时间。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566134259,"ip_address":"","comment_id":125120,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"阿里开源了，spring cloud alibaba 组件，可以装进spring cloud 体系","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463442,"discussion_content":"可以持续关注，因为里头有很多阿里全新开发的组件 （Sentinel/Seata/Nacos等)，把坑踩平完全落地，我估计还需要不少时间。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566134259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123977,"user_name":"死者苏生","can_delete":false,"product_type":"c3","uid":1029285,"ip_address":"","ucode":"830E0483DE52A6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/a5/396268e5.jpg","comment_is_top":false,"comment_ctime":1565786975,"is_pvip":false,"replies":[{"id":45461,"content":"servicemesh投入大门槛高，属于曲高和寡的高端武器，目前还在早期，成熟度还远远没有到普及阶段。不过有些公司在试水，可以关注。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1565789542,"ip_address":"","comment_id":123977,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"波波老师，service mesh最近又沉寂了吗","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462933,"discussion_content":"servicemesh投入大门槛高，属于曲高和寡的高端武器，目前还在早期，成熟度还远远没有到普及阶段。不过有些公司在试水，可以关注。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565789542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117932,"user_name":"天天向上","can_delete":false,"product_type":"c3","uid":1031113,"ip_address":"","ucode":"5948D359734193","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/c9/37924ad4.jpg","comment_is_top":false,"comment_ctime":1564195355,"is_pvip":false,"replies":[{"id":43222,"content":"你好，你的具体问题是？","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564223937,"ip_address":"","comment_id":117932,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"Gateway不考虑吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460187,"discussion_content":"你好，你的具体问题是？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564223937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1031113,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bb/c9/37924ad4.jpg","nickname":"天天向上","note":"","ucode":"5948D359734193","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3178,"discussion_content":"不好意思\n\n我想问的是\n\nspring cloud gateway这种网关组件不考虑讲一讲吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564278141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356743,"user_name":"Sam.张朝","can_delete":false,"product_type":"c3","uid":1132448,"ip_address":"上海","ucode":"FB20554D94B250","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/a0/f12115b7.jpg","comment_is_top":false,"comment_ctime":1662546408,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"k8s 里的网关，都有哪些实现方案，各有什么优劣呢？","like_count":0},{"had_liked":false,"id":187969,"user_name":"钱","can_delete":false,"product_type":"c3","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1584285383,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"尽量不用混搭，保持体系一致性。这个建议很中肯，明天看看新公司用的啥!","like_count":0},{"had_liked":false,"id":114226,"user_name":"iLeGeND","can_delete":false,"product_type":"c3","uid":1055475,"ip_address":"","ucode":"4055A628A6E97C","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/f3/41d5ba7d.jpg","comment_is_top":false,"comment_ctime":1563256220,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"dubbo+spring boot挺好","like_count":0}]}