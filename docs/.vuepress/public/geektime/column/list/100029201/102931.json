{"id":102931,"title":"11 | æ— æ¶ˆæ¯ä¸¢å¤±é…ç½®æ€ä¹ˆå®ç°ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å¤•ã€‚ä»Šå¤©æˆ‘è¦å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼šå¦‚ä½•é…ç½®Kafkaæ— æ¶ˆæ¯ä¸¢å¤±ã€‚</p><p>ä¸€ç›´ä»¥æ¥ï¼Œå¾ˆå¤šäººå¯¹äºKafkaä¸¢å¤±æ¶ˆæ¯è¿™ä»¶äº‹æƒ…éƒ½æœ‰ç€è‡ªå·±çš„ç†è§£ï¼Œå› è€Œä¹Ÿå°±æœ‰ç€è‡ªå·±çš„è§£å†³ä¹‹é“ã€‚åœ¨è®¨è®ºå…·ä½“çš„åº”å¯¹æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘è§‰å¾—æˆ‘ä»¬é¦–å…ˆè¦æ˜ç¡®ï¼Œåœ¨Kafkaçš„ä¸–ç•Œé‡Œä»€ä¹ˆæ‰ç®—æ˜¯æ¶ˆæ¯ä¸¢å¤±ï¼Œæˆ–è€…è¯´Kafkaåœ¨ä»€ä¹ˆæƒ…å†µä¸‹èƒ½ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚è¿™ç‚¹éå¸¸å…³é”®ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å®¹æ˜“æ··æ·†è´£ä»»çš„è¾¹ç•Œï¼Œå¦‚æœæä¸æ¸…æ¥šäº‹æƒ…ç”±è°è´Ÿè´£ï¼Œè‡ªç„¶ä¹Ÿå°±ä¸çŸ¥é“ç”±è°æ¥å‡ºè§£å†³æ–¹æ¡ˆäº†ã€‚</p><p>é‚£Kafkaåˆ°åº•åœ¨ä»€ä¹ˆæƒ…å†µä¸‹æ‰èƒ½ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±å‘¢ï¼Ÿ</p><p><strong>ä¸€å¥è¯æ¦‚æ‹¬ï¼ŒKafkaåªå¯¹â€œå·²æäº¤â€çš„æ¶ˆæ¯ï¼ˆcommitted messageï¼‰åšæœ‰é™åº¦çš„æŒä¹…åŒ–ä¿è¯ã€‚</strong></p><p>è¿™å¥è¯é‡Œé¢æœ‰ä¸¤ä¸ªæ ¸å¿ƒè¦ç´ ï¼Œæˆ‘ä»¬ä¸€ä¸€æ¥çœ‹ã€‚</p><p>ç¬¬ä¸€ä¸ªæ ¸å¿ƒè¦ç´ æ˜¯â€œ<strong>å·²æäº¤çš„æ¶ˆæ¯</strong>â€ã€‚ä»€ä¹ˆæ˜¯å·²æäº¤çš„æ¶ˆæ¯ï¼Ÿå½“Kafkaçš„è‹¥å¹²ä¸ªBrokeræˆåŠŸåœ°æ¥æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯å¹¶å†™å…¥åˆ°æ—¥å¿—æ–‡ä»¶åï¼Œå®ƒä»¬ä¼šå‘Šè¯‰ç”Ÿäº§è€…ç¨‹åºè¿™æ¡æ¶ˆæ¯å·²æˆåŠŸæäº¤ã€‚æ­¤æ—¶ï¼Œè¿™æ¡æ¶ˆæ¯åœ¨Kafkaçœ‹æ¥å°±æ­£å¼å˜ä¸ºâ€œå·²æäº¤â€æ¶ˆæ¯äº†ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆæ˜¯è‹¥å¹²ä¸ªBrokerå‘¢ï¼Ÿè¿™å–å†³äºä½ å¯¹â€œå·²æäº¤â€çš„å®šä¹‰ã€‚ä½ å¯ä»¥é€‰æ‹©åªè¦æœ‰ä¸€ä¸ªBrokeræˆåŠŸä¿å­˜è¯¥æ¶ˆæ¯å°±ç®—æ˜¯å·²æäº¤ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»¤æ‰€æœ‰Brokeréƒ½æˆåŠŸä¿å­˜è¯¥æ¶ˆæ¯æ‰ç®—æ˜¯å·²æäº¤ã€‚ä¸è®ºå“ªç§æƒ…å†µï¼ŒKafkaåªå¯¹å·²æäº¤çš„æ¶ˆæ¯åšæŒä¹…åŒ–ä¿è¯è¿™ä»¶äº‹æƒ…æ˜¯ä¸å˜çš„ã€‚</p><!-- [[[read_end]]] --><p>ç¬¬äºŒä¸ªæ ¸å¿ƒè¦ç´ å°±æ˜¯â€œ<strong>æœ‰é™åº¦çš„æŒä¹…åŒ–ä¿è¯</strong>â€ï¼Œä¹Ÿå°±æ˜¯è¯´Kafkaä¸å¯èƒ½ä¿è¯åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½åšåˆ°ä¸ä¸¢å¤±æ¶ˆæ¯ã€‚ä¸¾ä¸ªæç«¯ç‚¹çš„ä¾‹å­ï¼Œå¦‚æœåœ°çƒéƒ½ä¸å­˜åœ¨äº†ï¼ŒKafkaè¿˜èƒ½ä¿å­˜ä»»ä½•æ¶ˆæ¯å—ï¼Ÿæ˜¾ç„¶ä¸èƒ½ï¼å€˜è‹¥è¿™ç§æƒ…å†µä¸‹ä½ ä¾ç„¶è¿˜æƒ³è¦Kafkaä¸ä¸¢æ¶ˆæ¯ï¼Œé‚£ä¹ˆåªèƒ½åœ¨åˆ«çš„æ˜Ÿçƒéƒ¨ç½²Kafka BrokeræœåŠ¡å™¨äº†ã€‚</p><p>ç°åœ¨ä½ åº”è¯¥èƒ½å¤Ÿç¨å¾®ä½“ä¼šå‡ºè¿™é‡Œçš„â€œæœ‰é™åº¦â€çš„å«ä¹‰äº†å§ï¼Œå…¶å®å°±æ˜¯è¯´Kafkaä¸ä¸¢æ¶ˆæ¯æ˜¯æœ‰å‰ææ¡ä»¶çš„ã€‚å‡å¦‚ä½ çš„æ¶ˆæ¯ä¿å­˜åœ¨Nä¸ªKafka Brokerä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªå‰ææ¡ä»¶å°±æ˜¯è¿™Nä¸ªBrokerä¸­è‡³å°‘æœ‰1ä¸ªå­˜æ´»ã€‚åªè¦è¿™ä¸ªæ¡ä»¶æˆç«‹ï¼ŒKafkaå°±èƒ½ä¿è¯ä½ çš„è¿™æ¡æ¶ˆæ¯æ°¸è¿œä¸ä¼šä¸¢å¤±ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼ŒKafkaæ˜¯èƒ½åšåˆ°ä¸ä¸¢å¤±æ¶ˆæ¯çš„ï¼Œåªä¸è¿‡è¿™äº›æ¶ˆæ¯å¿…é¡»æ˜¯å·²æäº¤çš„æ¶ˆæ¯ï¼Œè€Œä¸”è¿˜è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ã€‚å½“ç„¶ï¼Œè¯´æ˜è¿™ä»¶äº‹å¹¶ä¸æ˜¯è¦ä¸ºKafkaæ¨å¸è´£ä»»ï¼Œè€Œæ˜¯ä¸ºäº†åœ¨å‡ºç°è¯¥ç±»é—®é¢˜æ—¶æˆ‘ä»¬èƒ½å¤Ÿæ˜ç¡®è´£ä»»è¾¹ç•Œã€‚</p><h2><strong>â€œæ¶ˆæ¯ä¸¢å¤±â€æ¡ˆä¾‹</strong></h2><p>å¥½äº†ï¼Œç†è§£äº†Kafkaæ˜¯æ€æ ·åšåˆ°ä¸ä¸¢å¤±æ¶ˆæ¯çš„ï¼Œé‚£æ¥ä¸‹æ¥æˆ‘å¸¦ä½ å¤ç›˜ä¸€ä¸‹é‚£äº›å¸¸è§çš„â€œKafkaæ¶ˆæ¯ä¸¢å¤±â€æ¡ˆä¾‹ã€‚æ³¨æ„ï¼Œè¿™é‡Œå¯æ˜¯å¸¦å¼•å·çš„æ¶ˆæ¯ä¸¢å¤±å“¦ï¼Œå…¶å®æœ‰äº›æ—¶å€™æˆ‘ä»¬åªæ˜¯å†¤æ‰äº†Kafkaè€Œå·²ã€‚</p><p><strong>æ¡ˆä¾‹1ï¼šç”Ÿäº§è€…ç¨‹åºä¸¢å¤±æ•°æ®</strong></p><p>Producerç¨‹åºä¸¢å¤±æ¶ˆæ¯ï¼Œè¿™åº”è¯¥ç®—æ˜¯è¢«æŠ±æ€¨æœ€å¤šçš„æ•°æ®ä¸¢å¤±åœºæ™¯äº†ã€‚æˆ‘æ¥æè¿°ä¸€ä¸ªåœºæ™¯ï¼šä½ å†™äº†ä¸€ä¸ªProduceråº”ç”¨å‘Kafkaå‘é€æ¶ˆæ¯ï¼Œæœ€åå‘ç°Kafkaæ²¡æœ‰ä¿å­˜ï¼Œäºæ˜¯å¤§éª‚ï¼šâ€œKafkaçœŸçƒ‚ï¼Œæ¶ˆæ¯å‘é€å±…ç„¶éƒ½èƒ½ä¸¢å¤±ï¼Œè€Œä¸”è¿˜ä¸å‘Šè¯‰æˆ‘ï¼Ÿï¼â€å¦‚æœä½ æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼Œé‚£ä¹ˆè¯·å…ˆæ¶ˆæ¶ˆæ°”ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹å¯èƒ½çš„åŸå› ã€‚</p><p>ç›®å‰Kafka Produceræ˜¯å¼‚æ­¥å‘é€æ¶ˆæ¯çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ è°ƒç”¨çš„æ˜¯producer.send(msg)è¿™ä¸ªAPIï¼Œé‚£ä¹ˆå®ƒé€šå¸¸ä¼šç«‹å³è¿”å›ï¼Œä½†æ­¤æ—¶ä½ ä¸èƒ½è®¤ä¸ºæ¶ˆæ¯å‘é€å·²æˆåŠŸå®Œæˆã€‚</p><p>è¿™ç§å‘é€æ–¹å¼æœ‰ä¸ªæœ‰è¶£çš„åå­—ï¼Œå«â€œfire and forgetâ€ï¼Œç¿»è¯‘ä¸€ä¸‹å°±æ˜¯â€œå‘å°„åä¸ç®¡â€ã€‚è¿™ä¸ªæœ¯è¯­åŸæœ¬å±äºå¯¼å¼¹åˆ¶å¯¼é¢†åŸŸï¼Œåæ¥è¢«å€Ÿé‰´åˆ°è®¡ç®—æœºé¢†åŸŸä¸­ï¼Œå®ƒçš„æ„æ€æ˜¯ï¼Œæ‰§è¡Œå®Œä¸€ä¸ªæ“ä½œåä¸å»ç®¡å®ƒçš„ç»“æœæ˜¯å¦æˆåŠŸã€‚è°ƒç”¨producer.send(msg)å°±å±äºå…¸å‹çš„â€œfire and forgetâ€ï¼Œå› æ­¤å¦‚æœå‡ºç°æ¶ˆæ¯ä¸¢å¤±ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•çŸ¥æ™“çš„ã€‚è¿™ä¸ªå‘é€æ–¹å¼æŒºä¸é è°±å§ï¼Œä¸è¿‡æœ‰äº›å…¬å¸çœŸçš„å°±æ˜¯åœ¨ä½¿ç”¨è¿™ä¸ªAPIå‘é€æ¶ˆæ¯ã€‚</p><p>å¦‚æœç”¨è¿™ä¸ªæ–¹å¼ï¼Œå¯èƒ½ä¼šæœ‰å“ªäº›å› ç´ å¯¼è‡´æ¶ˆæ¯æ²¡æœ‰å‘é€æˆåŠŸå‘¢ï¼Ÿå…¶å®åŸå› æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ç½‘ç»œæŠ–åŠ¨ï¼Œå¯¼è‡´æ¶ˆæ¯å‹æ ¹å°±æ²¡æœ‰å‘é€åˆ°Brokerç«¯ï¼›æˆ–è€…æ¶ˆæ¯æœ¬èº«ä¸åˆæ ¼å¯¼è‡´Brokeræ‹’ç»æ¥æ”¶ï¼ˆæ¯”å¦‚æ¶ˆæ¯å¤ªå¤§äº†ï¼Œè¶…è¿‡äº†Brokerçš„æ‰¿å—èƒ½åŠ›ï¼‰ç­‰ã€‚è¿™ä¹ˆæ¥çœ‹ï¼Œè®©Kafkaâ€œèƒŒé”…â€å°±æœ‰ç‚¹å†¤æ‰å®ƒäº†ã€‚å°±åƒå‰é¢è¯´è¿‡çš„ï¼ŒKafkaä¸è®¤ä¸ºæ¶ˆæ¯æ˜¯å·²æäº¤çš„ï¼Œå› æ­¤ä¹Ÿå°±æ²¡æœ‰Kafkaä¸¢å¤±æ¶ˆæ¯è¿™ä¸€è¯´äº†ã€‚</p><p>ä¸è¿‡ï¼Œå°±ç®—ä¸æ˜¯Kafkaçš„â€œé”…â€ï¼Œæˆ‘ä»¬ä¹Ÿè¦è§£å†³è¿™ä¸ªé—®é¢˜å§ã€‚å®é™…ä¸Šï¼Œè§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•éå¸¸ç®€å•ï¼š<strong>Produceræ°¸è¿œè¦ä½¿ç”¨å¸¦æœ‰å›è°ƒé€šçŸ¥çš„å‘é€APIï¼Œä¹Ÿå°±æ˜¯è¯´ä¸è¦ä½¿ç”¨producer.send(msg)ï¼Œè€Œè¦ä½¿ç”¨producer.send(msg, callback)</strong>ã€‚ä¸è¦å°ç§è¿™é‡Œçš„callbackï¼ˆå›è°ƒï¼‰ï¼Œå®ƒèƒ½å‡†ç¡®åœ°å‘Šè¯‰ä½ æ¶ˆæ¯æ˜¯å¦çœŸçš„æäº¤æˆåŠŸäº†ã€‚ä¸€æ—¦å‡ºç°æ¶ˆæ¯æäº¤å¤±è´¥çš„æƒ…å†µï¼Œä½ å°±å¯ä»¥æœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œå¤„ç†ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæ˜¯å› ä¸ºé‚£äº›ç¬æ—¶é”™è¯¯ï¼Œé‚£ä¹ˆä»…ä»…è®©Produceré‡è¯•å°±å¯ä»¥äº†ï¼›å¦‚æœæ˜¯æ¶ˆæ¯ä¸åˆæ ¼é€ æˆçš„ï¼Œé‚£ä¹ˆå¯ä»¥è°ƒæ•´æ¶ˆæ¯æ ¼å¼åå†æ¬¡å‘é€ã€‚æ€»ä¹‹ï¼Œå¤„ç†å‘é€å¤±è´¥çš„è´£ä»»åœ¨Producerç«¯è€ŒéBrokerç«¯ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œå‘é€å¤±è´¥çœŸçš„æ²¡å¯èƒ½æ˜¯ç”±Brokerç«¯çš„é—®é¢˜é€ æˆçš„å—ï¼Ÿå½“ç„¶å¯èƒ½ï¼å¦‚æœä½ æ‰€æœ‰çš„Brokeréƒ½å®•æœºäº†ï¼Œé‚£ä¹ˆæ— è®ºProducerç«¯æ€ä¹ˆé‡è¯•éƒ½ä¼šå¤±è´¥çš„ï¼Œæ­¤æ—¶ä½ è¦åšçš„æ˜¯èµ¶å¿«å¤„ç†Brokerç«¯çš„é—®é¢˜ã€‚ä½†ä¹‹å‰è¯´çš„æ ¸å¿ƒè®ºæ®åœ¨è¿™é‡Œä¾ç„¶æ˜¯æˆç«‹çš„ï¼šKafkaä¾ç„¶ä¸è®¤ä¸ºè¿™æ¡æ¶ˆæ¯å±äºå·²æäº¤æ¶ˆæ¯ï¼Œæ•…å¯¹å®ƒä¸åšä»»ä½•æŒä¹…åŒ–ä¿è¯ã€‚</p><p><strong>æ¡ˆä¾‹2ï¼šæ¶ˆè´¹è€…ç¨‹åºä¸¢å¤±æ•°æ®</strong></p><p>Consumerç«¯ä¸¢å¤±æ•°æ®ä¸»è¦ä½“ç°åœ¨Consumerç«¯è¦æ¶ˆè´¹çš„æ¶ˆæ¯ä¸è§äº†ã€‚Consumerç¨‹åºæœ‰ä¸ªâ€œä½ç§»â€çš„æ¦‚å¿µï¼Œè¡¨ç¤ºçš„æ˜¯è¿™ä¸ªConsumerå½“å‰æ¶ˆè´¹åˆ°çš„Topicåˆ†åŒºçš„ä½ç½®ã€‚ä¸‹é¢è¿™å¼ å›¾æ¥è‡ªäºå®˜ç½‘ï¼Œå®ƒæ¸…æ™°åœ°å±•ç¤ºäº†Consumerç«¯çš„ä½ç§»æ•°æ®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0c/37/0c97bed3b6350d73a9403d9448290d37.png?wh=2041*1243\" alt=\"\"></p><p>æ¯”å¦‚å¯¹äºConsumer Aè€Œè¨€ï¼Œå®ƒå½“å‰çš„ä½ç§»å€¼å°±æ˜¯9ï¼›Consumer Bçš„ä½ç§»å€¼æ˜¯11ã€‚</p><p>è¿™é‡Œçš„â€œä½ç§»â€ç±»ä¼¼äºæˆ‘ä»¬çœ‹ä¹¦æ—¶ä½¿ç”¨çš„ä¹¦ç­¾ï¼Œå®ƒä¼šæ ‡è®°æˆ‘ä»¬å½“å‰é˜…è¯»äº†å¤šå°‘é¡µï¼Œä¸‹æ¬¡ç¿»ä¹¦çš„æ—¶å€™æˆ‘ä»¬èƒ½ç›´æ¥è·³åˆ°ä¹¦ç­¾é¡µç»§ç»­é˜…è¯»ã€‚</p><p>æ­£ç¡®ä½¿ç”¨ä¹¦ç­¾æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼šç¬¬ä¸€æ­¥æ˜¯è¯»ä¹¦ï¼Œç¬¬äºŒæ­¥æ˜¯æ›´æ–°ä¹¦ç­¾é¡µã€‚å¦‚æœè¿™ä¸¤æ­¥çš„é¡ºåºé¢ å€’äº†ï¼Œå°±å¯èƒ½å‡ºç°è¿™æ ·çš„åœºæ™¯ï¼šå½“å‰çš„ä¹¦ç­¾é¡µæ˜¯ç¬¬90é¡µï¼Œæˆ‘å…ˆå°†ä¹¦ç­¾æ”¾åˆ°ç¬¬100é¡µä¸Šï¼Œä¹‹åå¼€å§‹è¯»ä¹¦ã€‚å½“é˜…è¯»åˆ°ç¬¬95é¡µæ—¶ï¼Œæˆ‘ä¸´æ—¶æœ‰äº‹ä¸­æ­¢äº†é˜…è¯»ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå½“æˆ‘ä¸‹æ¬¡ç›´æ¥è·³åˆ°ä¹¦ç­¾é¡µé˜…è¯»æ—¶ï¼Œæˆ‘å°±ä¸¢å¤±äº†ç¬¬96ï½99é¡µçš„å†…å®¹ï¼Œå³è¿™äº›æ¶ˆæ¯å°±ä¸¢å¤±äº†ã€‚</p><p>åŒç†ï¼ŒKafkaä¸­Consumerç«¯çš„æ¶ˆæ¯ä¸¢å¤±å°±æ˜¯è¿™ä¹ˆä¸€å›äº‹ã€‚è¦å¯¹æŠ—è¿™ç§æ¶ˆæ¯ä¸¢å¤±ï¼ŒåŠæ³•å¾ˆç®€å•ï¼š<strong>ç»´æŒå…ˆæ¶ˆè´¹æ¶ˆæ¯ï¼ˆé˜…è¯»ï¼‰ï¼Œå†æ›´æ–°ä½ç§»ï¼ˆä¹¦ç­¾ï¼‰çš„é¡ºåº</strong>å³å¯ã€‚è¿™æ ·å°±èƒ½æœ€å¤§é™åº¦åœ°ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚</p><p>å½“ç„¶ï¼Œè¿™ç§å¤„ç†æ–¹å¼å¯èƒ½å¸¦æ¥çš„é—®é¢˜æ˜¯æ¶ˆæ¯çš„é‡å¤å¤„ç†ï¼Œç±»ä¼¼äºåŒä¸€é¡µä¹¦è¢«è¯»äº†å¾ˆå¤šéï¼Œä½†è¿™ä¸å±äºæ¶ˆæ¯ä¸¢å¤±çš„æƒ…å½¢ã€‚åœ¨ä¸“æ åé¢çš„å†…å®¹ä¸­ï¼Œæˆ‘ä¼šè·Ÿä½ åˆ†äº«å¦‚ä½•åº”å¯¹é‡å¤æ¶ˆè´¹çš„é—®é¢˜ã€‚</p><p>é™¤äº†ä¸Šé¢æ‰€è¯´çš„åœºæ™¯ï¼Œå…¶å®è¿˜å­˜åœ¨ä¸€ç§æ¯”è¾ƒéšè”½çš„æ¶ˆæ¯ä¸¢å¤±åœºæ™¯ã€‚</p><p>æˆ‘ä»¬ä¾ç„¶ä»¥çœ‹ä¹¦ä¸ºä¾‹ã€‚å‡è®¾ä½ èŠ±é’±ä»ç½‘ä¸Šç§Ÿå€Ÿäº†ä¸€æœ¬å…±æœ‰10ç« å†…å®¹çš„ç”µå­ä¹¦ï¼Œè¯¥ç”µå­ä¹¦çš„æœ‰æ•ˆé˜…è¯»æ—¶é—´æ˜¯1å¤©ï¼Œè¿‡æœŸåè¯¥ç”µå­ä¹¦å°±æ— æ³•æ‰“å¼€ï¼Œä½†å¦‚æœåœ¨1å¤©ä¹‹å†…ä½ å®Œæˆé˜…è¯»å°±é€€è¿˜ç§Ÿé‡‘ã€‚</p><p>ä¸ºäº†åŠ å¿«é˜…è¯»é€Ÿåº¦ï¼Œä½ æŠŠä¹¦ä¸­çš„10ä¸ªç« èŠ‚åˆ†åˆ«å§”æ‰˜ç»™ä½ çš„10ä¸ªæœ‹å‹ï¼Œè¯·ä»–ä»¬å¸®ä½ é˜…è¯»ï¼Œå¹¶æ‹œæ‰˜ä»–ä»¬å‘Šè¯‰ä½ ä¸»æ—¨å¤§æ„ã€‚å½“ç”µå­ä¹¦ä¸´è¿‘è¿‡æœŸæ—¶ï¼Œè¿™10ä¸ªäººå‘Šè¯‰ä½ è¯´ä»–ä»¬è¯»å®Œäº†è‡ªå·±æ‰€è´Ÿè´£çš„é‚£ä¸ªç« èŠ‚çš„å†…å®¹ï¼Œäºæ˜¯ä½ æ”¾å¿ƒåœ°æŠŠè¯¥ä¹¦è¿˜äº†å›å»ã€‚ä¸æ–™ï¼Œåœ¨è¿™10ä¸ªäººå‘ä½ æè¿°ä¸»æ—¨å¤§æ„æ—¶ï¼Œä½ çªç„¶å‘ç°æœ‰ä¸€ä¸ªäººå¯¹ä½ æ’’äº†è°ï¼Œä»–å¹¶æ²¡æœ‰çœ‹å®Œä»–è´Ÿè´£çš„é‚£ä¸ªç« èŠ‚ã€‚é‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œä½ æ— æ³•çŸ¥é“é‚£ä¸€ç« çš„å†…å®¹äº†ã€‚</p><p>å¯¹äºKafkaè€Œè¨€ï¼Œè¿™å°±å¥½æ¯”Consumerç¨‹åºä»Kafkaè·å–åˆ°æ¶ˆæ¯åå¼€å¯äº†å¤šä¸ªçº¿ç¨‹å¼‚æ­¥å¤„ç†æ¶ˆæ¯ï¼Œè€ŒConsumerç¨‹åºè‡ªåŠ¨åœ°å‘å‰æ›´æ–°ä½ç§»ã€‚å‡å¦‚å…¶ä¸­æŸä¸ªçº¿ç¨‹è¿è¡Œå¤±è´¥äº†ï¼Œå®ƒè´Ÿè´£çš„æ¶ˆæ¯æ²¡æœ‰è¢«æˆåŠŸå¤„ç†ï¼Œä½†ä½ç§»å·²ç»è¢«æ›´æ–°äº†ï¼Œå› æ­¤è¿™æ¡æ¶ˆæ¯å¯¹äºConsumerè€Œè¨€å®é™…ä¸Šæ˜¯ä¸¢å¤±äº†ã€‚</p><p>è¿™é‡Œçš„å…³é”®åœ¨äºConsumerè‡ªåŠ¨æäº¤ä½ç§»ï¼Œä¸ä½ æ²¡æœ‰ç¡®è®¤ä¹¦ç±å†…å®¹è¢«å…¨éƒ¨è¯»å®Œå°±å°†ä¹¦å½’è¿˜ç±»ä¼¼ï¼Œä½ æ²¡æœ‰çœŸæ­£åœ°ç¡®è®¤æ¶ˆæ¯æ˜¯å¦çœŸçš„è¢«æ¶ˆè´¹å°±â€œç›²ç›®â€åœ°æ›´æ–°äº†ä½ç§»ã€‚</p><p>è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼š<strong>å¦‚æœæ˜¯å¤šçº¿ç¨‹å¼‚æ­¥å¤„ç†æ¶ˆè´¹æ¶ˆæ¯ï¼ŒConsumerç¨‹åºä¸è¦å¼€å¯è‡ªåŠ¨æäº¤ä½ç§»ï¼Œè€Œæ˜¯è¦åº”ç”¨ç¨‹åºæ‰‹åŠ¨æäº¤ä½ç§»</strong>ã€‚åœ¨è¿™é‡Œæˆ‘è¦æé†’ä½ ä¸€ä¸‹ï¼Œå•ä¸ªConsumerç¨‹åºä½¿ç”¨å¤šçº¿ç¨‹æ¥æ¶ˆè´¹æ¶ˆæ¯è¯´èµ·æ¥å®¹æ˜“ï¼Œå†™æˆä»£ç å´å¼‚å¸¸å›°éš¾ï¼Œå› ä¸ºä½ å¾ˆéš¾æ­£ç¡®åœ°å¤„ç†ä½ç§»çš„æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è¯´é¿å…æ— æ¶ˆè´¹æ¶ˆæ¯ä¸¢å¤±å¾ˆç®€å•ï¼Œä½†ææ˜“å‡ºç°æ¶ˆæ¯è¢«æ¶ˆè´¹äº†å¤šæ¬¡çš„æƒ…å†µã€‚</p><h2><strong>æœ€ä½³å®è·µ</strong></h2><p>çœ‹å®Œè¿™ä¸¤ä¸ªæ¡ˆä¾‹ä¹‹åï¼Œæˆ‘æ¥åˆ†äº«ä¸€ä¸‹Kafkaæ— æ¶ˆæ¯ä¸¢å¤±çš„é…ç½®ï¼Œæ¯ä¸€ä¸ªå…¶å®éƒ½èƒ½å¯¹åº”ä¸Šé¢æåˆ°çš„é—®é¢˜ã€‚</p><ol>\n<li>\n<p>ä¸è¦ä½¿ç”¨producer.send(msg)ï¼Œè€Œè¦ä½¿ç”¨producer.send(msg, callback)ã€‚è®°ä½ï¼Œä¸€å®šè¦ä½¿ç”¨å¸¦æœ‰å›è°ƒé€šçŸ¥çš„sendæ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>è®¾ç½®acks = allã€‚acksæ˜¯Producerçš„ä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨äº†ä½ å¯¹â€œå·²æäº¤â€æ¶ˆæ¯çš„å®šä¹‰ã€‚å¦‚æœè®¾ç½®æˆallï¼Œåˆ™è¡¨æ˜æ‰€æœ‰å‰¯æœ¬Brokeréƒ½è¦æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯æ‰ç®—æ˜¯â€œå·²æäº¤â€ã€‚è¿™æ˜¯æœ€é«˜ç­‰çº§çš„â€œå·²æäº¤â€å®šä¹‰ã€‚</p>\n</li>\n<li>\n<p>è®¾ç½®retriesä¸ºä¸€ä¸ªè¾ƒå¤§çš„å€¼ã€‚è¿™é‡Œçš„retriesåŒæ ·æ˜¯Producerçš„å‚æ•°ï¼Œå¯¹åº”å‰é¢æåˆ°çš„Producerè‡ªåŠ¨é‡è¯•ã€‚å½“å‡ºç°ç½‘ç»œçš„ç¬æ—¶æŠ–åŠ¨æ—¶ï¼Œæ¶ˆæ¯å‘é€å¯èƒ½ä¼šå¤±è´¥ï¼Œæ­¤æ—¶é…ç½®äº†retries &gt; 0çš„Producerèƒ½å¤Ÿè‡ªåŠ¨é‡è¯•æ¶ˆæ¯å‘é€ï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±ã€‚</p>\n</li>\n<li>\n<p>è®¾ç½®unclean.leader.election.enable = falseã€‚è¿™æ˜¯Brokerç«¯çš„å‚æ•°ï¼Œå®ƒæ§åˆ¶çš„æ˜¯å“ªäº›Brokeræœ‰èµ„æ ¼ç«é€‰åˆ†åŒºçš„Leaderã€‚å¦‚æœä¸€ä¸ªBrokerè½ååŸå…ˆçš„Leaderå¤ªå¤šï¼Œé‚£ä¹ˆå®ƒä¸€æ—¦æˆä¸ºæ–°çš„Leaderï¼Œå¿…ç„¶ä¼šé€ æˆæ¶ˆæ¯çš„ä¸¢å¤±ã€‚æ•…ä¸€èˆ¬éƒ½è¦å°†è¯¥å‚æ•°è®¾ç½®æˆfalseï¼Œå³ä¸å…è®¸è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚</p>\n</li>\n<li>\n<p>è®¾ç½®replication.factor &gt;= 3ã€‚è¿™ä¹Ÿæ˜¯Brokerç«¯çš„å‚æ•°ã€‚å…¶å®è¿™é‡Œæƒ³è¡¨è¿°çš„æ˜¯ï¼Œæœ€å¥½å°†æ¶ˆæ¯å¤šä¿å­˜å‡ ä»½ï¼Œæ¯•ç«Ÿç›®å‰é˜²æ­¢æ¶ˆæ¯ä¸¢å¤±çš„ä¸»è¦æœºåˆ¶å°±æ˜¯å†—ä½™ã€‚</p>\n</li>\n<li>\n<p>è®¾ç½®min.insync.replicas &gt; 1ã€‚è¿™ä¾ç„¶æ˜¯Brokerç«¯å‚æ•°ï¼Œæ§åˆ¶çš„æ˜¯æ¶ˆæ¯è‡³å°‘è¦è¢«å†™å…¥åˆ°å¤šå°‘ä¸ªå‰¯æœ¬æ‰ç®—æ˜¯â€œå·²æäº¤â€ã€‚è®¾ç½®æˆå¤§äº1å¯ä»¥æå‡æ¶ˆæ¯æŒä¹…æ€§ã€‚åœ¨å®é™…ç¯å¢ƒä¸­åƒä¸‡ä¸è¦ä½¿ç”¨é»˜è®¤å€¼1ã€‚</p>\n</li>\n<li>\n<p>ç¡®ä¿replication.factor &gt; min.insync.replicasã€‚å¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œé‚£ä¹ˆåªè¦æœ‰ä¸€ä¸ªå‰¯æœ¬æŒ‚æœºï¼Œæ•´ä¸ªåˆ†åŒºå°±æ— æ³•æ­£å¸¸å·¥ä½œäº†ã€‚æˆ‘ä»¬ä¸ä»…è¦æ”¹å–„æ¶ˆæ¯çš„æŒä¹…æ€§ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œè¿˜è¦åœ¨ä¸é™ä½å¯ç”¨æ€§çš„åŸºç¡€ä¸Šå®Œæˆã€‚æ¨èè®¾ç½®æˆreplication.factor = min.insync.replicas + 1ã€‚</p>\n</li>\n<li>\n<p>ç¡®ä¿æ¶ˆæ¯æ¶ˆè´¹å®Œæˆå†æäº¤ã€‚Consumerç«¯æœ‰ä¸ªå‚æ•°enable.auto.commitï¼Œæœ€å¥½æŠŠå®ƒè®¾ç½®æˆfalseï¼Œå¹¶é‡‡ç”¨æ‰‹åŠ¨æäº¤ä½ç§»çš„æ–¹å¼ã€‚å°±åƒå‰é¢è¯´çš„ï¼Œè¿™å¯¹äºå•Consumerå¤šçº¿ç¨‹å¤„ç†çš„åœºæ™¯è€Œè¨€æ˜¯è‡³å…³é‡è¦çš„ã€‚</p>\n</li>\n</ol><h2><strong>å°ç»“</strong></h2><p>ä»Šå¤©ï¼Œæˆ‘ä»¬è®¨è®ºäº†Kafkaæ— æ¶ˆæ¯ä¸¢å¤±çš„æ–¹æ–¹é¢é¢ã€‚æˆ‘ä»¬å…ˆä»ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸¢å¤±å¼€å§‹è¯´èµ·ï¼Œæ˜ç¡®äº†KafkaæŒä¹…åŒ–ä¿è¯çš„è´£ä»»è¾¹ç•Œï¼Œéšåä»¥è¿™ä¸ªè§„åˆ™ä¸ºæ ‡å°ºè¡¡é‡äº†ä¸€äº›å¸¸è§çš„æ•°æ®ä¸¢å¤±åœºæ™¯ï¼Œæœ€åé€šè¿‡åˆ†æè¿™äº›åœºæ™¯ï¼Œæˆ‘ç»™å‡ºäº†Kafkaæ— æ¶ˆæ¯ä¸¢å¤±çš„â€œæœ€ä½³å®è·µâ€ã€‚æ€»ç»“èµ·æ¥ï¼Œæˆ‘å¸Œæœ›ä½ ä»Šå¤©èƒ½æœ‰ä¸¤ä¸ªæ”¶è·ï¼š</p><ul>\n<li>æ˜ç¡®KafkaæŒä¹…åŒ–ä¿è¯çš„å«ä¹‰å’Œé™å®šæ¡ä»¶ã€‚</li>\n<li>ç†Ÿç»ƒé…ç½®Kafkaæ— æ¶ˆæ¯ä¸¢å¤±å‚æ•°ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/3f/5a/3fc09aa33dc1022e867df4930054ce5a.jpg?wh=2069*2560\" alt=\"\"></p><h2><strong>å¼€æ”¾è®¨è®º</strong></h2><p>å…¶å®ï¼ŒKafkaè¿˜æœ‰ä¸€ç§ç‰¹åˆ«éšç§˜çš„æ¶ˆæ¯ä¸¢å¤±åœºæ™¯ï¼šå¢åŠ ä¸»é¢˜åˆ†åŒºã€‚å½“å¢åŠ ä¸»é¢˜åˆ†åŒºåï¼Œåœ¨æŸæ®µâ€œä¸å‡‘å·§â€çš„æ—¶é—´é—´éš”åï¼ŒProducerå…ˆäºConsumeræ„ŸçŸ¥åˆ°æ–°å¢åŠ çš„åˆ†åŒºï¼Œè€ŒConsumerè®¾ç½®çš„æ˜¯â€œä»æœ€æ–°ä½ç§»å¤„â€å¼€å§‹è¯»å–æ¶ˆæ¯ï¼Œå› æ­¤åœ¨Consumeræ„ŸçŸ¥åˆ°æ–°åˆ†åŒºå‰ï¼ŒProducerå‘é€çš„è¿™äº›æ¶ˆæ¯å°±å…¨éƒ¨â€œä¸¢å¤±â€äº†ï¼Œæˆ–è€…è¯´Consumeræ— æ³•è¯»å–åˆ°è¿™äº›æ¶ˆæ¯ã€‚ä¸¥æ ¼æ¥è¯´è¿™æ˜¯Kafkaè®¾è®¡ä¸Šçš„ä¸€ä¸ªå°ç¼ºé™·ï¼Œä½ æœ‰ä»€ä¹ˆè§£å†³çš„åŠæ³•å—ï¼Ÿ</p><p>æ¬¢è¿å†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"10 | ç”Ÿäº§è€…å‹ç¼©ç®—æ³•é¢é¢è§‚","id":102132},"right":{"article_title":"12 | å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ä¸å¸¸è§ä½†æ˜¯å¾ˆé«˜çº§çš„åŠŸèƒ½ï¼Ÿ","id":103397}},"comments":[{"had_liked":false,"id":107619,"user_name":"é˜³æ˜","can_delete":false,"product_type":"c1","uid":1052818,"ip_address":"","ucode":"BA0F5AF0E5A27A","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/92/760f0964.jpg","comment_is_top":false,"comment_ctime":1561565588,"is_pvip":true,"replies":[{"id":"38933","content":"å…¶å®ä¸å†²çªã€‚å¦‚æœISRä¸­åªæœ‰1ä¸ªå‰¯æœ¬äº†ï¼Œacks=allä¹Ÿå°±ç›¸å½“äºacks=1äº†ï¼Œå¼•å…¥min.insync.replicasçš„ç›®çš„å°±æ˜¯ä¸ºäº†åšä¸€ä¸ªä¸‹é™çš„é™åˆ¶ï¼šä¸èƒ½åªæ»¡è¶³äºISRå…¨éƒ¨å†™å…¥ï¼Œè¿˜è¦ä¿è¯ISRä¸­çš„å†™å…¥ä¸ªæ•°ä¸å°‘äºmin.insync.replicasã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561596091,"ip_address":"","comment_id":107619,"utype":1}],"discussion_count":25,"race_medal":0,"score":"375223720340","product_id":100029201,"comment_content":"æ€»ç»“é‡Œçš„çš„ç¬¬äºŒæ¡ack=allå’Œç¬¬å…­æ¡çš„è¯´æ˜æ˜¯ä¸æ˜¯æœ‰å†²çª","like_count":88,"discussions":[{"author":{"id":1003253,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4e/f5/abb7bfe3.jpg","nickname":"ç‹å¿—å¼º","note":"","ucode":"40AEF8FD41C7A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373101,"discussion_content":"ç®€å•è§£é‡Šï¼šreplication.refactoræ˜¯å‰¯æœ¬replicaæ€»æ•°ï¼Œ min.insync.replicasæ˜¯è¦æ±‚ç¡®ä¿è‡³å°‘æœ‰å¤šå°‘ä¸ªreplicaå‰¯æœ¬å†™å…¥åæ‰ç®—æ˜¯æäº¤æˆåŠŸï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¸ªç¡¬æŒ‡æ ‡ï¼›acks=allæ˜¯ä¸ªåŠ¨æ€æŒ‡æ ‡ï¼Œç¡®ä¿å½“å‰èƒ½æ­£å¸¸å·¥ä½œçš„replicaå‰¯æœ¬éƒ½å†™å…¥åæ‰ç®—æ˜¯æäº¤æˆåŠŸã€‚ä¸¾ä¸ªä¾‹å­ï¼šæ¯”å¦‚ï¼Œæ­¤æ—¶å‰¯æœ¬æ€»æ•°3ï¼Œå³replication.refactor = 3ï¼Œè®¾ç½®min.insync.replicas=2ï¼Œacks=allï¼Œé‚£å¦‚æœæ‰€æœ‰å‰¯æœ¬éƒ½æ­£å¸¸å·¥ä½œï¼Œæ¶ˆæ¯è¦éƒ½å†™å…¥ä¸‰ä¸ªå‰¯æœ¬ï¼Œæ‰ç®—æäº¤æˆåŠŸï¼Œæ­¤æ—¶è¿™ä¸ªmin.insync.replicas=2ä¸‹é™å€¼ä¸èµ·ä½œç”¨ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªå‰¯æœ¬å› ä¸ºæŸäº›åŸå› æŒ‚äº†ï¼Œæ­¤æ—¶acks=allçš„åŠ¨æ€çº¦æŸå°±æ˜¯å†™å…¥ä¸¤ä¸ªå‰¯æœ¬å³å¯ï¼Œè§¦è¾¾äº†min.insync.replicas=2è¿™ä¸ªä¸‹é™çº¦æŸã€‚å¦‚æœä¸‰ä¸ªå‰¯æœ¬æŒ‚äº†ä¸¤ä¸ªï¼Œæ­¤æ—¶ack=allçš„çº¦æŸå°±å˜æˆäº†1ä¸ªå‰¯æœ¬ï¼Œä½†æ˜¯å› ä¸ºæœ‰min.insync.replicas=2è¿™ä¸ªä¸‹é™çº¦æŸï¼Œå†™å…¥å°±ä¼šä¸æˆåŠŸã€‚","likes_number":68,"is_delete":false,"is_hidden":false,"ctime":1620614145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1690729,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/WAb1u6cvzNK8HbarnCZVlUickibPicNbBS4D42dzKt7q6osgsiczy6nicS8ypqOUPrp7fSJich7iclDqceej74RJAYiaGg/132","nickname":"Geek_435016","note":"","ucode":"43929D4E7D8205","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":105908,"discussion_content":"å¯ä»¥çœ‹çœ‹kafkaæƒå¨æŒ‡å—é‡Œçš„è§£é‡Šï¼Œç”Ÿäº§è€…æŒ‡å®šack=all, æ˜¯è¦æ±‚åŒæ­¥å‰¯æœ¬ï¼ˆmin.insync.replicasæŒ‡å®šçš„å°±æ˜¯æœ€å°åŒæ­¥å‰¯æœ¬ä¸ªæ•°ï¼‰ï¼Œè€Œä¸æ˜¯åˆ†åŒºçš„æ‰€æœ‰å‰¯æœ¬ï¼ˆreplication.factoræŒ‡å®šçš„æ˜¯å‰¯æœ¬æ•°ç›®ï¼‰ï¼Œéƒ½æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œæ‰ç®—æˆåŠŸã€‚å»ºè®®è€å¸ˆåœ¨æ–‡ç« ä¸­å¢åŠ å¯¹åŒæ­¥å‰¯æœ¬çš„è®²è§£ã€‚","likes_number":27,"is_delete":false,"is_hidden":false,"ctime":1577498777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1486895,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b0/2f/e2096905.jpg","nickname":"é©¬æˆ","note":"","ucode":"664F2BAA2E0F0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1690729,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/WAb1u6cvzNK8HbarnCZVlUickibPicNbBS4D42dzKt7q6osgsiczy6nicS8ypqOUPrp7fSJich7iclDqceej74RJAYiaGg/132","nickname":"Geek_435016","note":"","ucode":"43929D4E7D8205","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":243074,"discussion_content":"çœ‹å®Œä½ çš„è§£é‡Šæ‰ç†è§£ä¸ºä»€ä¹ˆreplication.factor>min.insync.replicas","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587519057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":105908,"ip_address":""},"score":243074,"extra":""},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1486895,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b0/2f/e2096905.jpg","nickname":"é©¬æˆ","note":"","ucode":"664F2BAA2E0F0B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":302530,"discussion_content":"replication.factor>min.insync.replicasæ˜¯å› ä¸ºå¦‚æœç­‰äºçš„è¯åªè¦æœ‰ä¸€ä¸ªå‰¯æœ¬å®•æœºï¼Œå°±æ°¸è¿œæ— æ³•è¾¾åˆ°ack=allçš„è¦æ±‚ï¼Œä»è€Œæ°¸è¿œæ— æ³•callback success","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1598946266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":243074,"ip_address":""},"score":302530,"extra":""},{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":366675,"discussion_content":"å¯¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618149763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302530,"ip_address":""},"score":366675,"extra":""}]},{"author":{"id":1729855,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKeA6Awf2hRPJlRa4ZWo6fq3EQRlNowxjkJ48aicsHiapyCtgBy5e6t3DEiadMY92c46wwlrOibOcoNCw/132","nickname":"æ¥ç„•æ˜","note":"","ucode":"C9A71D22FAB7A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344165,"discussion_content":"acks\nThe number of acknowledgments the producer requires the leader to have received before considering a request complete. This controls the durability of records that are sent. The following settings are allowed:\n\nacks=0 If set to zero then the producer will not wait for any acknowledgment from the server at all. The record will be immediately added to the socket buffer and considered sent. No guarantee can be made that the server has received the record in this case, and the retries configuration will not take effect (as the client won&#39;t generally know of any failures). The offset given back for each record will always be set to -1.\nacks=1 This will mean the leader will write the record to its local log but will respond without awaiting full acknowledgement from all followers. In this case should the leader fail immediately after acknowledging the record but before the followers have replicated it then the record will be lost.\nacks=all This means the leader will wait for the full set of in-sync replicas to acknowledge the record. This guarantees that the record will not be lost as long as at least one in-sync replica remains alive. This is the strongest available guarantee. This is equivalent to the acks=-1 setting.\nType:\tstring\nDefault:\t1\nValid Values:\t[all, -1, 0, 1]\nImportance:\thigh\n\nacks = 0/1/all æ˜¯æŒ‡ æ¥æ”¶/è½ç›˜/ISRåŒæ­¥ï¼Œä¸‰ä¸ªæ­¥éª¤ï¼Œè€Œä¸æ˜¯æŒ‡å‰¯æœ¬æ•°é‡ï¼Œä½ ä¸èƒ½è®¾ç½®acks = 5çš„ã€‚","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1611308358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1729855,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKeA6Awf2hRPJlRa4ZWo6fq3EQRlNowxjkJ48aicsHiapyCtgBy5e6t3DEiadMY92c46wwlrOibOcoNCw/132","nickname":"æ¥ç„•æ˜","note":"","ucode":"C9A71D22FAB7A4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366671,"discussion_content":"çœ‹çœ‹ï¼Œè¿™æ‰æ˜¯ä¸“ä¸šçš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1618148954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":344165,"ip_address":""},"score":366671,"extra":""},{"author":{"id":2649276,"avatar":"https://static001.geekbang.org/account/avatar/00/28/6c/bc/f751786b.jpg","nickname":"Leo","note":"","ucode":"CEBAD9CDCFC2A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1729855,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKeA6Awf2hRPJlRa4ZWo6fq3EQRlNowxjkJ48aicsHiapyCtgBy5e6t3DEiadMY92c46wwlrOibOcoNCw/132","nickname":"æ¥ç„•æ˜","note":"","ucode":"C9A71D22FAB7A4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390789,"discussion_content":"æˆ‘ä¹Ÿè¿™ä¹ˆè§‰å¾—ï¼Œå°¤å…¶ acks = all æŒ‡çš„åº”è¯¥æ˜¯åœ¨ISRé›†å†…æ‰€æœ‰çš„å‰¯æœ¬å…¨éƒ¨å†™å…¥æˆåŠŸæ‰ç®—æˆåŠŸï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„å‰¯æœ¬ï¼Œè¿™æœ‰ä¸ªå‰æä¸€å®šè¦æ˜¯ISRé›†å†…çš„å‰¯æœ¬ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630047325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":344165,"ip_address":""},"score":390789,"extra":""}]},{"author":{"id":1260856,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3d/38/d5d51797.jpg","nickname":"å°šå¯ä¸º(Kewei Shang)","note":"","ucode":"19B6922A995959","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21204,"discussion_content":"å¦‚æœreplication.refactor=3, min.insync.replicas=2, acks=all,é‚£ä¹ˆåœ¨producerå‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œå³ä½¿æœ‰ä¸€ä¸ªbrokeræŒ‚äº†ï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œåªè¦æ¶ˆæ¯æäº¤åˆ°2ä¸ªå‰¯æœ¬ï¼ˆåŒ…æ‹¬leaderï¼‰ï¼Œleaderå°±å›å¤produceræ¶ˆæ¯æäº¤okäº†ã€‚å¦‚æœä¸¤ä¸ªfollower brokerséƒ½æŒ‚äº†ï¼Œleaderå°±å›å¤NOT_ENOUGH_REPLICASå¼‚å¸¸ã€‚","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1569450717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1103208,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","nickname":"å½’é›¶","note":"","ucode":"C99B8E93009A46","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1260856,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3d/38/d5d51797.jpg","nickname":"å°šå¯ä¸º(Kewei Shang)","note":"","ucode":"19B6922A995959","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333859,"discussion_content":"çœ‹äº†ä»¥åç¬é—´æ˜ç™½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607654497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":21204,"ip_address":""},"score":333859,"extra":""}]},{"author":{"id":1054963,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/f3/cd07e64c.jpg","nickname":"lujg","note":"","ucode":"6CCCD89A29B06D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":179748,"discussion_content":"å®˜æ–¹æ–‡æ¡£ä¸­çš„è§£é‡Šï¼šacks=all This means the leader will wait for the full set of in-sync replicas to acknowledge the record. This guarantees that the record will not be lost as long as at least one in-sync replica remains alive. This is the strongest available guarantee. This is equivalent to the acks=-1 setting.\nmin.insync.replicas: When a producer sets acks to &#34;all&#34; (or &#34;-1&#34;), this configuration specifies the minimum number of replicas that must acknowledge a write for the write to be considered successful. If this minimum cannot be met, then the producer will raise an exception (either NotEnoughReplicas or NotEnoughReplicasAfterAppend).\nä¹Ÿå°±æ˜¯è¯´å¯¹äºä¸¤ä¸ªåŒæ—¶é…ç½®çš„è¯ï¼Œbrokeræ”¶åˆ° min.insync.replicas-1 ä¸ªfollowerçš„ackä»¥åå°±è®¤ä¸ºæ»¡è¶³äº† acks=allçš„æ¡ä»¶ï¼Œå°±å¯ä»¥ç»™producerå›å¤ackæ¶ˆæ¯äº†","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1582250233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1361746,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","nickname":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","note":"","ucode":"5F97037585F857","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1054963,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/f3/cd07e64c.jpg","nickname":"lujg","note":"","ucode":"6CCCD89A29B06D","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":267838,"discussion_content":"ä¸å¯¹ï¼Œå¦‚æœack=allï¼Œä¸”ISRåŒæ­¥å‰¯æœ¬æ˜¯10ä¸ªï¼Œmin.insync.replicas=5ï¼Œé‚£ä¹ˆbrokerè¿˜æ˜¯éœ€è¦åŒæ­¥ç»™å…¶ä»–10ä¸ªå‰¯æœ¬æ‰ä¼šè¿”å›æˆåŠŸï¼Œè¿™ä¸ªmin.insync.replicas=5ä»£è¡¨çš„æ˜¯ï¼Œæ•´ä¸ªISRåŒæ­¥å‰¯æœ¬è‡³å°‘è¦æœ‰5ä¸ªï¼Œä¸ç„¶producerå°±ä¼šæŠ¥é”™ã€‚","likes_number":23,"is_delete":false,"is_hidden":false,"ctime":1589698776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":179748,"ip_address":""},"score":267838,"extra":""}]},{"author":{"id":1090470,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a3/a6/cd893765.jpg","nickname":"christagger","note":"","ucode":"B65542DA54831E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66581,"discussion_content":"ä¸ªäººç†è§£æ˜¯ack=allæ˜¯æŒ‡ISRå‰¯æœ¬ä¸­çš„æ‰€æœ‰å‰¯æœ¬ä¸ªæ•°ï¼Œè€Œä¸æ˜¯æŒ‡replication.factoræŒ‡å®šçš„å‰¯æœ¬ä¸ªæ•°ï¼Œæ„Ÿè§‰åªæœ‰è¿™æ ·ç†è§£æ‰èƒ½è¯´å¾—é€š","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1575087496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1090470,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a3/a6/cd893765.jpg","nickname":"christagger","note":"","ucode":"B65542DA54831E","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":302534,"discussion_content":"ISRåªæ˜¯å»æ‰ARä¸­é‚£äº›è½åå¤ªå¤šå‰©ä¸‹çš„ï¼Œä½œä¸ºleaderçš„å€™é€‰äººï¼›ack=all æŒ‡çš„æ˜¯min.insync.replicasè¦æ±‚æ»¡è¶³æŒ‡å®šä¸ªæ•°çš„å‰¯æœ¬åŒæ­¥æˆåŠŸåæ‰ç®—æ¶ˆæ¯commitæˆåŠŸï¼Œæˆ‘è§‰å¾—è¿™ä¸¤ä¸ªæ¦‚å¿µå®Œå…¨æ²¡å…³ç³»ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598946756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":66581,"ip_address":""},"score":302534,"extra":""},{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1090470,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a3/a6/cd893765.jpg","nickname":"christagger","note":"","ucode":"B65542DA54831E","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":389661,"discussion_content":"ä½œä¸ºKafkaé‡åº¦ç”¨æˆ·å‘Šè¯‰ä½ ï¼Œä½ çš„ç†è§£æ˜¯å¯¹çš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1629369696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":66581,"ip_address":""},"score":389661,"extra":""},{"author":{"id":2649276,"avatar":"https://static001.geekbang.org/account/avatar/00/28/6c/bc/f751786b.jpg","nickname":"Leo","note":"","ucode":"CEBAD9CDCFC2A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1090470,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a3/a6/cd893765.jpg","nickname":"christagger","note":"","ucode":"B65542DA54831E","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":390791,"discussion_content":"æ²¡é”™ï¼Œack=all/-1æŒ‡çš„æ˜¯ISRé›†ä¸­çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„å‰¯æœ¬ï¼›æ–‡ç« ä¸­è¡¨è¿°çš„ä¸æ¸…æ¥šï¼Œè¿™ç‚¹ä¸å¥½ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630047873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":66581,"ip_address":""},"score":390791,"extra":""}]},{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455589,"discussion_content":"å…¶å®ä¸å†²çªã€‚å¦‚æœISRä¸­åªæœ‰1ä¸ªå‰¯æœ¬äº†ï¼Œacks=allä¹Ÿå°±ç›¸å½“äºacks=1äº†ï¼Œå¼•å…¥min.insync.replicasçš„ç›®çš„å°±æ˜¯ä¸ºäº†åšä¸€ä¸ªä¸‹é™çš„é™åˆ¶ï¼šä¸èƒ½åªæ»¡è¶³äºISRå…¨éƒ¨å†™å…¥ï¼Œè¿˜è¦ä¿è¯ISRä¸­çš„å†™å…¥ä¸ªæ•°ä¸å°‘äºmin.insync.replicasã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1561596091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008348,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","nickname":"moooofly","note":"","ucode":"4A20795C281B6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198020,"discussion_content":"æˆ‘è§‰å¾—é—®é¢˜çš„å…³é”®æ˜¯ï¼Œ&#34;acks=all&#34; çš„ä¸»è¯­æ˜¯ leader ï¼Œè€Œ &#34;min.insync.replicas&#34; çš„ä¸»è¯­æ˜¯ producer","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583462991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1008348,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","nickname":"moooofly","note":"","ucode":"4A20795C281B6F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389659,"discussion_content":"é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629369563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":198020,"ip_address":""},"score":389659,"extra":""}]},{"author":{"id":1493286,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoCl6Nxf9oW9sDOoibA7p8lKf0jqjPeDszqI4e7iavicQHtbtyibHIhLibyXYAaT02l7GRQvM9BJUxh6yQ/132","nickname":"æ˜€æºª","note":"","ucode":"BFAF31542BC24A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20129,"discussion_content":"æ—¢ç„¶ISRå…¨éƒ¨å†™å…¥äº† é‚£è¿˜å»æ»¡è¶³ä»€ä¹ˆä¸ªæ•° ä¸æ˜¯æŒºçŸ›ç›¾ä¹ˆ è¯·è€å¸ˆè®²æ¸…æ¥šä¸€äº› æœ‰ç‚¹ä¸æ˜ç™½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569282201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1398177,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/980yvj8VpgQPndXvibiaomic6JWWyqu12lmOnnIsdtXgukNiaY14dxV9zic9RcibkvMcLPr9WuCYic8EJAhCmDRlNk3ibg/132","nickname":"æˆ‘åªæ˜¯ä¸ªå­©å­","note":"","ucode":"216FE41B898AAE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1493286,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoCl6Nxf9oW9sDOoibA7p8lKf0jqjPeDszqI4e7iavicQHtbtyibHIhLibyXYAaT02l7GRQvM9BJUxh6yQ/132","nickname":"æ˜€æºª","note":"","ucode":"BFAF31542BC24A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36532,"discussion_content":"acks=allæ˜¯ç¡®è®¤ä¸€ä¸ªåˆ†åŒºçš„æ‰€æœ‰å‰¯æœ¬éƒ½æ”¶åˆ°æ¶ˆæ¯ï¼Œmin.insync.replicasæ˜¯ä¿è¯å‰¯æœ¬çš„æ•°é‡ä¸‹é™","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1571390002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":20129,"ip_address":""},"score":36532,"extra":""},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1493286,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoCl6Nxf9oW9sDOoibA7p8lKf0jqjPeDszqI4e7iavicQHtbtyibHIhLibyXYAaT02l7GRQvM9BJUxh6yQ/132","nickname":"æ˜€æºª","note":"","ucode":"BFAF31542BC24A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302540,"discussion_content":"followerä»leaderæ‹‰å–æ•°æ®æ˜¯ä¸»åŠ¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æ»¡è¶³min.insync.replicasè¦æ±‚çš„å‰¯æœ¬ä¸ªæ•°åŒæ­¥æˆåŠŸï¼Œå°±å¯ä»¥å›å¤producerè¿™æ¡æ¶ˆæ¯å‘é€æˆåŠŸäº†ï¼Œè€Œä½ followeræ²¡æ‹‰å–å®Œçš„ç»§ç»­æ‹‰å–å¹¶ä¸å½±å“è¿™ä¸ªè¿‡ç¨‹ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598947699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":20129,"ip_address":""},"score":302540,"extra":""}]},{"author":{"id":1579066,"avatar":"https://static001.geekbang.org/account/avatar/00/18/18/3a/b407889c.jpg","nickname":"Geek_817ea4","note":"","ucode":"D1194D33C4DC11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":905,"discussion_content":"æˆ‘è§‰å¾—å¿…é¡»é…åˆrequest.required.acks=-1/allä½¿ç”¨ï¼Œä¸ç„¶è¿™ä¸ªå‚æ•°ä¸ç”Ÿæ•ˆï¼Œå˜å¾—æ¯«æ— æ„ä¹‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562145901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110789,"user_name":"ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾","can_delete":false,"product_type":"c1","uid":1044175,"ip_address":"","ucode":"89545632BDA56E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOBwR7MCVqwZbPA5RQ2mjUjd571jUXUcBCE7lY5vSMibWn8D5S4PzDZMaAhRPdnRBqYbVOBTJibhJg/132","comment_is_top":false,"comment_ctime":1562335456,"is_pvip":false,"discussion_count":9,"race_medal":0,"score":"229195602144","product_id":100029201,"comment_content":"æ–°å»ºåˆ†åŒºä¸¢å¤±æ˜¯å› ä¸ºæ²¡æœ‰offsetå°±ä»lastestå¼€å§‹è¯»å–ï¼Œå¯ä»¥æ”¹æˆæ²¡æœ‰offsetçš„æ—¶å€™ä»ealiestè¯»å–åº”è¯¥å°±å¯ä»¥äº†","like_count":53,"discussions":[{"author":{"id":2059131,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/6b/7b/727c1741.jpg","nickname":"é™ˆå¼º","note":"","ucode":"EF836A811D844A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370915,"discussion_content":"é‚£å½“æ¶ˆè´¹è€…æ„ŸçŸ¥åˆ°æ–°çš„åˆ†åŒºå­˜åœ¨åï¼Œå¦‚ä½•çŸ¥é“å½“å‰åˆ†åŒºæ˜¯æ–°å»ºçš„åˆ†åŒºï¼Œè¿˜æ˜¯åŸæ¥å®•æœºå†æ¢å¤è¿‡æ¥çš„åˆ†åŒºå‘¢ï¼Ÿå¦‚æœè®¾ç½®ä¸ºealiesté‚£ä¹ˆå¯¹äºå®•æœºæ¢å¤è¿‡æ¥çš„åˆ†åŒºæ¥è¯´ï¼Œå°±ä¼šé‡å¤æ¶ˆè´¹å¤§é‡æ¶ˆæ¯","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1619579549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2059131,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/6b/7b/727c1741.jpg","nickname":"é™ˆå¼º","note":"","ucode":"EF836A811D844A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543943,"discussion_content":"å¯¹ï¼Œæ‰€ä»¥æœ€çµæ´»çš„åœ°æ–¹ä¹Ÿæ˜¯æœ€éº»çƒ¦çš„åœ°æ–¹ï¼Œæˆ‘æŠŠä»å“ªé‡Œæ¶ˆè´¹æ”¾åœ¨é…ç½®ä¸­ï¼Œæ¯æ¬¡æ”¹å®Œé…ç½®è¿˜è¦æ”¹å›å»ï¼Œå°±æ€•æœåŠ¡å®•æœºäº†ä»é”™è¯¯çš„åœ°æ–¹å¼€å§‹è¯»","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1641365506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":370915,"ip_address":""},"score":543943,"extra":""},{"author":{"id":2223167,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/mQddXC7nRiaKHTwdficicTB3bH0q5ic5UoSab51Omic7eyLBz0SNcvbLpQnNib7zP1yJFm7xxx4ia81iahfibRVnbTwHmhw/132","nickname":"æµ®çŸ³æ²‰æœ¨","note":"","ucode":"D585768321B84A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2059131,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/6b/7b/727c1741.jpg","nickname":"é™ˆå¼º","note":"","ucode":"EF836A811D844A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574997,"discussion_content":"é‡ç‚¹åœ¨äºæäº¤çš„ä½ç§»è®°å½•ä¿å­˜åœ¨å“ªæœ‰æ— æŒä¹…åŒ–ï¼Œå¦‚æœä½ç§»é‡æ²¡ä¸¢ï¼Œç”¨earlistä¹Ÿä¸ä¼šå¯¼è‡´é‡å¤æ¶ˆè´¹å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654515067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":370915,"ip_address":""},"score":574997,"extra":""}]},{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"é™Œå…®","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363123,"discussion_content":"mark","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617113944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2817448,"avatar":"","nickname":"Geek_f3ab76","note":"","ucode":"7720A9A91E1CF0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579071,"discussion_content":"ä½†æ˜¯è¦æ¶ˆæ¯æ¶ˆè´¹çš„å¹‚ç­‰æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657164094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1813614,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ac/6e/c13d131c.jpg","nickname":"å¥¹å¾®ç¬‘çš„è„¸y","note":"","ucode":"E3B559B10B4A70","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573617,"discussion_content":"è¿™ä¸ªæ˜¯consumerè®¾ç½®çš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653550347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2860851,"avatar":"","nickname":"Geek_e78fa5","note":"","ucode":"713677ED3B5745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539484,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639727933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1997465,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/7a/99/4ac1d891.jpg","nickname":"çŒ´å­èƒ–èƒ–","note":"","ucode":"EFFE195C126E00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383128,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625916399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49426,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573578352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108680,"user_name":"æ›¹ä¼Ÿé›„","can_delete":false,"product_type":"c1","uid":1400754,"ip_address":"","ucode":"9740E426C0742C","user_header":"https://static001.geekbang.org/account/avatar/00/15/5f/b2/c4780c10.jpg","comment_is_top":false,"comment_ctime":1561853984,"is_pvip":false,"replies":[{"id":"39435","content":"å†™è¿‡ä¸€ä¸¤ç¯‡ï¼Œhttps:&#47;&#47;www.cnblogs.com&#47;huxi2b&#47;p&#47;7089854.htmlï¼Œ<br><br>ä½†æ€»è§‰å¾—ä¸å¤ªå®Œç¾ã€‚å¦‚æœä½ æƒ³æ·±å…¥äº†è§£çš„è¯ï¼Œæ¨èè¯»ä¸€ä¸‹Flink Kafka Connectorçš„æºç ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561946475,"ip_address":"","comment_id":108680,"utype":1}],"discussion_count":2,"race_medal":0,"score":"113231003680","product_id":100029201,"comment_content":"å•ä¸ª Consumer ç¨‹åºä½¿ç”¨å¤šçº¿ç¨‹æ¥æ¶ˆè´¹æ¶ˆæ¯è¯´èµ·æ¥å®¹æ˜“ï¼Œå†™æˆä»£ç å´å¼‚å¸¸å›°éš¾ï¼Œå› ä¸ºä½ å¾ˆéš¾æ­£ç¡®åœ°å¤„ç†ä½ç§»çš„æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è¯´é¿å…æ— æ¶ˆè´¹æ¶ˆæ¯ä¸¢å¤±å¾ˆç®€å•ï¼Œä½†ææ˜“å‡ºç°æ¶ˆæ¯è¢«æ¶ˆè´¹äº†å¤šæ¬¡çš„æƒ…å†µã€‚<br>å…³äºè¿™ä¸ªé—®é¢˜ï¼Œè€å¸ˆèƒ½å¦æä¾›ä¸ªjavaä»£ç çš„æœ€ä½³å®è·µ?  è°¢è°¢!","like_count":26,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456077,"discussion_content":"å†™è¿‡ä¸€ä¸¤ç¯‡ï¼Œhttps://www.cnblogs.com/huxi2b/p/7089854.htmlï¼Œ\n\nä½†æ€»è§‰å¾—ä¸å¤ªå®Œç¾ã€‚å¦‚æœä½ æƒ³æ·±å…¥äº†è§£çš„è¯ï¼Œæ¨èè¯»ä¸€ä¸‹Flink Kafka Connectorçš„æºç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048314,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fe/fa/2a046821.jpg","nickname":"äººé—´å››æœˆå¤©","note":"","ucode":"11BE219C23EEBC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405286,"discussion_content":"çœ‹äº†ä¸‹åšå®¢é‡Œé¢çš„èƒ¡è€å¸ˆè¯´çš„é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é‡‡ç”¨hdfsé‡Œé¢çš„å†™edit logçš„è®¾è®¡æ€è·¯ï¼ŒæŠŠoffsetåšæˆé¡ºåºæäº¤ï¼Œå”¯ä¸€è¦è€ƒè™‘çš„é£é™©å°±æ˜¯å½“ä¸­é—´æŸä¸ªçº¿ç¨‹æäº¤å¤±è´¥çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¼šäº§ç”Ÿç©ºè½¬çš„æ¶ˆè€—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634549120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170141,"user_name":"é™ˆå›½æ—","can_delete":false,"product_type":"c1","uid":1438037,"ip_address":"","ucode":"83D12F3E79F197","user_header":"https://static001.geekbang.org/account/avatar/00/15/f1/55/8ac4f169.jpg","comment_is_top":false,"comment_ctime":1578537638,"is_pvip":false,"replies":[{"id":"66077","content":"ä¸ç”Ÿæ•ˆï¼Œmin.insync.replicasåªæœ‰åœ¨acks=-1æ—¶æ‰ç”Ÿæ•ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1578619212,"ip_address":"","comment_id":170141,"utype":1}],"discussion_count":3,"race_medal":0,"score":"100362785446","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œack=1çš„æ—¶å€™ï¼Œmin.insync.replicasè¿˜ä¼šç”Ÿæ•ˆå—ï¼Ÿæˆ–è€…è¯´è¿˜æœ‰å¿…è¦å—ï¼Œæ„Ÿè°¢ ğŸ¤","like_count":23,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480856,"discussion_content":"ä¸ç”Ÿæ•ˆï¼Œmin.insync.replicasåªæœ‰åœ¨acks=-1æ—¶æ‰ç”Ÿæ•ˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578619212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2109853,"avatar":"","nickname":"beifengzhishen001","note":"","ucode":"77D42B7DD9E754","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362685,"discussion_content":"å¥½é—®é¢˜ï¼Œæˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ï¼Œå¦‚æœä¸»éœ€è¦ä¸»å‰¯æœ¬å†™å…¥æˆåŠŸï¼Œç¡®å®æ²¡å¿…è¦å†åœ¨æ„æœ‰å¤šå°‘ä¸ªä»å‰¯æœ¬å†™å…¥æˆåŠŸäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617010406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2275396,"avatar":"","nickname":"13549804879","note":"","ucode":"303DFF7082E504","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373074,"discussion_content":"å¦‚æœä¸»éœ€è¦ä¸»å‰¯æœ¬å†™å…¥æˆåŠŸ --- ä¸‡ä¸€è¯¥broker ç‚¸äº†ã€‚æ€ä¹ˆåŠ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620608149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107638,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1561589675,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"96050870187","product_id":100029201,"comment_content":"consumeræ”¹ç”¨&quot;ä»æœ€æ—©ä½ç½®&quot;è¯»è§£å†³æ–°åŠ åˆ†åŒºé€ æˆçš„é—®é¢˜","like_count":22,"discussions":[{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389663,"discussion_content":"æŸäº›æ—¶å€™ä¼šå‡ºç°ä¸¥é‡çš„é‡å¤æ¶ˆè´¹ï¼Œå®é™…æƒ…å†µå‡ ä¹éƒ½ä¼šä»æœ€æ–°ä½ç½®å¼€å§‹æ¶ˆè´¹ï¼Œè€å¸ˆè¯´çš„é‚£ç§æƒ…å†µï¼Œå±äºæ‰¯æ·¡æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629369846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543945,"discussion_content":"ä¸å¥½è¯´ï¼ŒæŸäº›æŒ‡æ ‡éœ€è¦é€šè¿‡kafkaçš„æ¶ˆæ¯æ¥ç®—ï¼Œå¦‚æœä¸¢äº†é‚£æŒ‡æ ‡å°±ä¸å‡†äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641365641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":389663,"ip_address":""},"score":543945,"extra":""}]}]},{"had_liked":false,"id":107806,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1561613512,"is_pvip":false,"replies":[{"id":"39132","content":"å¦‚æœä½ é…ç½®äº†auto.offset.reset=latestå°±ä¼šè¿™æ ·çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561680865,"ip_address":"","comment_id":107806,"utype":1}],"discussion_count":2,"race_medal":0,"score":"83165992136","product_id":100029201,"comment_content":"æœ€åä¸€ä¸ªé—®é¢˜ï¼Œéš¾é“æ–°å¢åˆ†åŒºä¹‹åï¼Œproducerå…ˆæ„ŸçŸ¥å¹¶å‘é€æ•°æ®ï¼Œæ¶ˆè´¹è€…åæ„ŸçŸ¥ï¼Œæ¶ˆè´¹è€…çš„offsetä¼šå®šä½åˆ°æ–°åˆ†åŒºçš„æœ€åä¸€æ¡æ¶ˆæ¯ï¼Ÿæ¶ˆè´¹è€…æ²¡æœ‰æäº¤offsetæ€ä¹ˆä¼šä»æœ€åä¸€æ¡å¼€å§‹çš„å‘¢ï¼Ÿ","like_count":19,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455681,"discussion_content":"å¦‚æœä½ é…ç½®äº†auto.offset.reset=latestå°±ä¼šè¿™æ ·çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561680865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2860851,"avatar":"","nickname":"Geek_e78fa5","note":"","ucode":"713677ED3B5745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539485,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639728153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120373,"user_name":"ban","can_delete":false,"product_type":"c1","uid":1034204,"ip_address":"","ucode":"E523CE97E48266","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","comment_is_top":false,"comment_ctime":1564847344,"is_pvip":false,"replies":[{"id":"44246","content":"min.insync.replicasæ˜¯ä¿è¯ä¸‹é™çš„ã€‚acks=allçš„å«ä¹‰æ˜¯producerä¼šç­‰ISRä¸­æ‰€æœ‰å‰¯æœ¬éƒ½å†™å…¥æˆåŠŸæ‰è¿”å›ï¼Œä½†å¦‚æœä¸è®¾ç½®min.insync.replicas = 5ï¼Œé»˜è®¤æ˜¯1ï¼Œé‚£ä¹ˆå‡è®¾ISRä¸­åªæœ‰1ä¸ªå‰¯æœ¬ï¼Œåªè¦å†™å…¥è¿™ä¸ªå‰¯æœ¬æˆåŠŸproducerä¹Ÿç®—å…¶æ­£å¸¸å†™å…¥ï¼Œå› æ­¤min.insync.replicasä¿è¯çš„å†™å…¥å‰¯æœ¬çš„ä¸‹é™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564965888,"ip_address":"","comment_id":120373,"utype":1}],"discussion_count":7,"race_medal":0,"score":"74579291376","product_id":100029201,"comment_content":"è€å¸ˆï¼Œ<br>å¦‚æœæˆ‘æœ‰10ä¸ªå‰¯æœ¬ï¼Œisr=10ï¼Œç„¶åæˆ‘é…ç½®ack=allï¼Œmin.insync.replicas=5ï¼Œ<br>è¿™æ—¶å€™è¿™ä¸¤ä¸ªå‚æ•°ä»¥è°ä¸ºå‡†ï¼Œç”Ÿäº§ä¸€ä¸ªæ¶ˆæ¯ï¼Œå¿…é¡»æ˜¯å…¨éƒ¨å‰¯æœ¬éƒ½åŒæ­¥æ‰ç®—æäº¤ï¼Œè¿˜æ˜¯åªè¦5ä¸ªå‰¯æœ¬æ‰ç®—æäº¤ï¼Ÿ","like_count":17,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461304,"discussion_content":"min.insync.replicasæ˜¯ä¿è¯ä¸‹é™çš„ã€‚acks=allçš„å«ä¹‰æ˜¯producerä¼šç­‰ISRä¸­æ‰€æœ‰å‰¯æœ¬éƒ½å†™å…¥æˆåŠŸæ‰è¿”å›ï¼Œä½†å¦‚æœä¸è®¾ç½®min.insync.replicas = 5ï¼Œé»˜è®¤æ˜¯1ï¼Œé‚£ä¹ˆå‡è®¾ISRä¸­åªæœ‰1ä¸ªå‰¯æœ¬ï¼Œåªè¦å†™å…¥è¿™ä¸ªå‰¯æœ¬æˆåŠŸproducerä¹Ÿç®—å…¶æ­£å¸¸å†™å…¥ï¼Œå› æ­¤min.insync.replicasä¿è¯çš„å†™å…¥å‰¯æœ¬çš„ä¸‹é™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564965888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1361746,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","nickname":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","note":"","ucode":"5F97037585F857","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267835,"discussion_content":"è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆåº”è¯¥æ˜¯ å¿…é¡»æ˜¯å…¨éƒ¨å‰¯æœ¬éƒ½åŒæ­¥æ‰ç®—æäº¤ä¸”ISRå‰¯æœ¬æ•°æœ€å°‘è¦æœ‰5ä¸ª","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1589698503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2109853,"avatar":"","nickname":"beifengzhishen001","note":"","ucode":"77D42B7DD9E754","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362686,"discussion_content":"æŒ‰ç…§&amp;&amp;æ“ä½œæ¥çœ‹å¾…è¿™ä¸¤ä¸ªå‚æ•°ï¼Œéƒ½éœ€è¦æ»¡è¶³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617010485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1270262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","nickname":"wang","note":"","ucode":"C1A3BCACCB188E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258132,"discussion_content":"æ‰€ä»¥min.insync.replicas åœ¨ack=all çš„æƒ…å†µä¸‹ï¼Œ å…¶å®ä½œç”¨ä¸å¤§ï¼Œä¸»è¦è¿˜æ˜¯å–å†³äºisr çš„å‚æ•°å€¼ï¼Œæ˜¯è¿™æ ·çš„è«ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588651146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1270262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","nickname":"wang","note":"","ucode":"C1A3BCACCB188E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265436,"discussion_content":"è¯´åäº†å§.ä¸è®¾ç½®ä¸‹é™çš„è¯,ack=allå¥½åƒæ²¡ä»€ä¹ˆç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589386318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":258132,"ip_address":""},"score":265436,"extra":""},{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1270262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","nickname":"wang","note":"","ucode":"C1A3BCACCB188E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301448,"discussion_content":"ä¸æ˜¯å§ï¼Œisræ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œisré…ç½®çš„10ä¹Ÿæœ‰å¯èƒ½å˜æˆ1çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598529770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":258132,"ip_address":""},"score":301448,"extra":""},{"author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/e24e181e.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1270262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","nickname":"wang","note":"","ucode":"C1A3BCACCB188E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348074,"discussion_content":"æˆ‘ç†è§£åº”è¯¥æ˜¯è¿™æ ·ï¼Œé»˜è®¤å…¨éƒ¨çš„ 10 ä¸ªå‰¯æœ¬éƒ½æ­£å¸¸æ—¶ï¼Œè¦ 10 ä¸ªï¼Œä½†æ˜¯å¦‚æœå…¶ä¸­æœ‰éƒ¨åˆ†ä¸æ­£å¸¸ï¼Œè‡³å°‘éœ€è¦ä¿è¯æœ‰ 5 ä¸ªï¼Œæ‰èƒ½è®¤ä¸ºæ˜¯æäº¤æˆåŠŸã€‚","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1612422370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":258132,"ip_address":""},"score":348074,"extra":""}]}]},{"had_liked":false,"id":153671,"user_name":"redis","can_delete":false,"product_type":"c1","uid":1066278,"ip_address":"","ucode":"91C54605384F51","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/26/f54c9888.jpg","comment_is_top":false,"comment_ctime":1574295929,"is_pvip":false,"replies":[{"id":"59161","content":"å…¶å®ï¼Œæœ‰å¯èƒ½åœ¨è½ç›˜ä¹‹å‰å°±è¢«æ¶ˆè´¹äº†ã€‚èƒ½å¦è¢«æ¶ˆè´¹ä¸æ˜¯çœ‹æ˜¯å¦flushåˆ°ç£ç›˜ï¼Œè€Œæ˜¯çœ‹leaderå‰¯æœ¬çš„é«˜æ°´ä½æ˜¯å¦è¶Šè¿‡äº†è¯¥æ¡æ¶ˆæ¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1574383833,"ip_address":"","comment_id":153671,"utype":1}],"discussion_count":6,"race_medal":0,"score":"61703838073","product_id":100029201,"comment_content":"ä½ å¥½èƒ¡è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹ kafkaæ˜¯åœ¨è½åœ°åˆ·ç›˜ä¹‹åï¼ŒåŒæ­¥å‰¯æœ¬æˆåŠŸåï¼Œæ‰èƒ½ä¼šè¢«æ¶ˆè´¹å—ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475243,"discussion_content":"å…¶å®ï¼Œæœ‰å¯èƒ½åœ¨è½ç›˜ä¹‹å‰å°±è¢«æ¶ˆè´¹äº†ã€‚èƒ½å¦è¢«æ¶ˆè´¹ä¸æ˜¯çœ‹æ˜¯å¦flushåˆ°ç£ç›˜ï¼Œè€Œæ˜¯çœ‹leaderå‰¯æœ¬çš„é«˜æ°´ä½æ˜¯å¦è¶Šè¿‡äº†è¯¥æ¡æ¶ˆæ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574383833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066278,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/26/f54c9888.jpg","nickname":"redis","note":"","ucode":"91C54605384F51","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55571,"discussion_content":"é‚£å¦‚æœæ­¤æ—¶åˆ·ç›˜å¤±è´¥ï¼Œæ¶ˆæ¯æ¶ˆè´¹äº†ï¼Œæ•°æ®ä¸¢å¤±äº†ï¼Ÿè¿™ç§æƒ…å†µkafkaæœ‰å®¹é”™å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574384787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1066278,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/26/f54c9888.jpg","nickname":"redis","note":"","ucode":"91C54605384F51","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301447,"discussion_content":"é å‰¯æœ¬å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598529610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":55571,"ip_address":""},"score":301447,"extra":""},{"author":{"id":1116807,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0a/87/56b07589.jpg","nickname":"nearzk","note":"","ucode":"CDEA6841E5F54C","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1066278,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/26/f54c9888.jpg","nickname":"redis","note":"","ucode":"91C54605384F51","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355020,"discussion_content":"å‚è€ƒKIP-101 ï¼šhttps://cwiki.apache.org/confluence/display/KAFKA/KIP-101+-+Alter+Replication+Protocol+to+use+Leader+Epoch+rather+than+High+Watermark+for+Truncation#KIP101AlterReplicationProtocoltouseLeaderEpochratherthanHighWatermarkforTruncation-LeaderEpoch","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615375666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":55571,"ip_address":""},"score":355020,"extra":""}]},{"author":{"id":2860851,"avatar":"","nickname":"Geek_e78fa5","note":"","ucode":"713677ED3B5745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539486,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639728251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1051563,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0b/ab/0e2857e5.jpg","nickname":"Codingå°å…ˆ","note":"","ucode":"965B1CC757E026","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329007,"discussion_content":"HW é«˜æ°´ä½å†³å®šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606296614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107856,"user_name":"æ°¸å…‰","can_delete":false,"product_type":"c1","uid":1102702,"ip_address":"","ucode":"0C54531ABED1B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/6e/281b85aa.jpg","comment_is_top":false,"comment_ctime":1561623884,"is_pvip":false,"replies":[{"id":"39128","content":"acks=allè¡¨ç¤ºæ¶ˆæ¯è¦å†™å…¥æ‰€æœ‰ISRå‰¯æœ¬ï¼Œä½†æ²¡è¦æ±‚ISRå‰¯æœ¬æœ‰å¤šå°‘ä¸ªã€‚min.insync.replicasåšäº†è¿™æ ·çš„ä¿è¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561680670,"ip_address":"","comment_id":107856,"utype":1}],"discussion_count":6,"race_medal":0,"score":"57396198732","product_id":100029201,"comment_content":"çœ‹äº†è¯„è®ºåŒºå›ç­”è¿˜æ˜¯ä¸å¤ªç†è§£ï¼Œç¬¬äºŒæ¡ack=allä¸ç¬¬å…­æ¡min.insync.replicas æ€æ ·åè°ƒå·¥ä½œçš„ï¼Œæ€»æ„Ÿè§‰æ˜¯æœ‰å†²çªçš„ã€‚<br>é—®é¢˜æ˜¯ï¼š<br>ç¬¬äºŒæ¡çš„â€œå·²æäº¤â€å’Œç¬¬å…­æ¡çš„â€œå·²æäº¤â€æ˜¯åŒä¸€ä¸ªæ„æ€å—ï¼Ÿå¦‚æœæ˜¯åŒä¸€ä¸ªæ„æ€ï¼Œé‚£å®šä¹‰ä¸ºä»€ä¹ˆä¸ä¸€æ ·å‘€ï¼Ÿ<br><br>","like_count":13,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455708,"discussion_content":"acks=allè¡¨ç¤ºæ¶ˆæ¯è¦å†™å…¥æ‰€æœ‰ISRå‰¯æœ¬ï¼Œä½†æ²¡è¦æ±‚ISRå‰¯æœ¬æœ‰å¤šå°‘ä¸ªã€‚min.insync.replicasåšäº†è¿™æ ·çš„ä¿è¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561680670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445399,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0e/17/e16e679f.jpg","nickname":"guoyinbo2019","note":"","ucode":"19D86CB3E42839","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528,"discussion_content":"åŒé—®ï¼Œä¸ªäººç†è§£ï¼šæ„Ÿè§‰ack=all çš„å«ä¹‰æ˜¯åŠ¨æ€çš„ï¼Œå½“å‰¯æœ¬æ•°=3æ—¶ï¼Œack=allåˆ™éœ€è¦3ä¸ªå‰¯æœ¬åŒæ­¥åæ‰ç®—â€œå·²æäº¤â€ï¼Œå½“æœ‰ä¸€ä¸ªå‰¯æœ¬æŒ‚æœºæ—¶å€™ï¼Œæ­¤æ—¶ack=allåˆ™éœ€è¦2ä¸ªå‰¯æœ¬åŒæ­¥åå°±è®¤ä¸ºâ€œå·²æäº¤â€ã€‚è€Œmin.insync.replicaså«ä¹‰æ˜¯ä¸å˜çš„ï¼Œä¸€æ—¦æŒ‡å®šmin.insync.replicas=1ï¼Œåˆ™æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œéƒ½éœ€è¦ä¿è¯ISRä¸­è‡³å°‘1ä¸ªå‰¯æœ¬åŒæ­¥åï¼Œæ‰ç®—â€œå·²æäº¤â€ã€‚çº¯å±ä¸ªäººç†è§£ï¼Œè¿˜è¯·èƒ¡è€å¸ˆæŒ‡æ­£ã€‚","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1561641927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1579066,"avatar":"https://static001.geekbang.org/account/avatar/00/18/18/3a/b407889c.jpg","nickname":"Geek_817ea4","note":"","ucode":"D1194D33C4DC11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":913,"discussion_content":"ack=allï¼Œæ˜¯è¦å†™å…¥isrä¸­å…¨éƒ¨å‰¯æœ¬ï¼Œè€Œmin.insync.replicasæ˜¯isrä¸­å¿…é¡»å­˜åœ¨å¤šå°‘ä¸ªå‰¯æœ¬ï¼Œåªæœ‰ack=allæ—¶å€™ï¼Œmin.insync.replicasæ‰èµ·ä½œç”¨ï¼Œä¸ç„¶ack=1æ—¶å€™ï¼Œå°±ç›¸å½“äºmin.insync.replicas=1ã€‚åˆ—å¦‚æˆ‘è®¾ç½®10ä¸ªå‰¯æœ¬ï¼Œä½†æ˜¯æˆ‘isråªæœ‰5ä¸ªï¼Œack=allå°±æ˜¯5ä¸ªè¦å…¨éƒ¨å†™å…¥ï¼Œè€Œä¸æ˜¯10ä¸ªï¼Œmin.insync.replicasè®¾ç½®8ï¼Œä½†æ˜¯æˆ‘isråªæœ‰5ä¸ªï¼Œå°±ä¼šæŠ¥é”™","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562147448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1025067,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a4/2b/3ba9f64b.jpg","nickname":"Devin","note":"","ucode":"7BDCD517BD8DD2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4483,"discussion_content":"ä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹ï¼Œç¡®ä¿ acks=all ï¼ˆ1ï¼‰ å’Œ replication.factor > min.insync.replicas  ï¼ˆ2ï¼‰ çš„ç›®çš„æ˜¯åŒä¸€ä¸ªï¼Œä½† 2 æ˜¯â€œæœ€ä¿é™©æ‰‹æ®µâ€ï¼Œ1å’Œ2ä¸èƒ½è¯´æ˜¯â€œå†²çªâ€ï¼Œåº”è¯¥è¯´é…ç½®äº†2ï¼Œ1ä¸é…ç½®ä¹Ÿå¯ä»¥è¾¾åˆ°ç›®çš„ã€‚ä½†1å’Œ2éƒ½é…ç½®åˆä¸ä¼šç´¯æ­»ï¼Œä¸‡ä¸€ä»¥åæ”¹é…ç½®äº†å‘¢ï¼Œéƒ½é…ç½®ä¹Ÿç®—æ˜¯ä¸ªâ€œåŒé‡ä¿é™©â€å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565456031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":1025067,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a4/2b/3ba9f64b.jpg","nickname":"Devin","note":"","ucode":"7BDCD517BD8DD2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":170171,"discussion_content":"è¿™ä¸¤ä¸ªé…ç½®æ˜¯æ­é…ä½¿ç”¨ï¼Œæ¯”å¦‚è¯´æœ‰5ä¸ªå‰¯æœ¬ï¼Œreplication.factor é…ç½®ä¸º 4ã€‚åœ¨æœªé…ç½® acks çš„å‰æä¸‹ï¼Œå†™å…¥ 4 ä¸ªå‰¯æœ¬å³å¯ï¼›ä½†å¦‚æœé…ç½®äº† allï¼Œå³ 5 ä¸ªå‰¯æœ¬éƒ½è¦æäº¤å®Œæˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581673524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4483,"ip_address":""},"score":170171,"extra":""}]},{"author":{"id":1273993,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/wonzX0yIia5NFoB0TZPdIPqVicIuSvzMtowownIkO9VwYpkPWJP2tpEcv5RXMn0ayuEGkAp2GBualL5sFQs0ibQJQ/132","nickname":"gogogo","note":"","ucode":"D7B7A9AA2D4CE5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1024,"discussion_content":"allçš„è¯­ä¹‰æ˜¯è¦æ±‚æ‰€æœ‰å½“å‰å­˜æ´»çš„å‰¯æœ¬brokerå·²æäº¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562245069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154984,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1574608978,"is_pvip":false,"replies":[{"id":"59505","content":"ä½¿ç”¨å¹‚ç­‰producer","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1574644219,"ip_address":"","comment_id":154984,"utype":1}],"discussion_count":6,"race_medal":0,"score":"48819249234","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆ è¿˜æœ‰ä¸€ç§æ¶ˆæ¯é‡å¤çš„æƒ…å†µå¸Œæœ›å¸®å¿™åˆ†æä¸‹ã€‚producerå‘é€æ¶ˆæ¯åï¼ŒbrokeræˆåŠŸå†™å…¥æ¶ˆæ¯äº†ï¼Œä½†æ˜¯ackå› ä¸ºç½‘ç»œé—®é¢˜æ²¡æœ‰åˆ°è¾¾producerï¼Œç”Ÿäº§è€…å¯èƒ½ä¼šé‡è¯•å‘é€è¿™æ¡æ¶ˆæ¯ã€‚<br>è¿™ç§é—®é¢˜å¦‚ä½•é¿å…é‡å¤æ¶ˆè´¹å‘¢","like_count":11,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475629,"discussion_content":"ä½¿ç”¨å¹‚ç­‰producer","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574644219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":543946,"discussion_content":"å¹‚ç­‰produceræ˜¯è‡ªå·±å†™å¹‚ç­‰é€»è¾‘å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641365797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":475629,"ip_address":""},"score":543946,"extra":""}]},{"author":{"id":1116807,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0a/87/56b07589.jpg","nickname":"nearzk","note":"","ucode":"CDEA6841E5F54C","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":354997,"discussion_content":"å¹‚ç­‰ï¼Œå°±æ˜¯å¯¹åŒä¸€æ¡æ¶ˆæ¯ï¼Œæ— è®ºproducerå‘é€å¤šå°‘æ¬¡ï¼Œéƒ½æ˜¯ä¸€æ ·çš„æ•ˆæœã€‚ä¸€æ—¦å†™å…¥ä¸€æ¬¡ï¼Œç¬¬Næ¬¡é‡å¤å†™å…¥ï¼Œéƒ½ä¸ä¼šåœ¨brokeräº§ç”Ÿæ–°çš„message","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1615374124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1158349,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ac/cd/fda6374f.jpg","nickname":"Louis","note":"","ucode":"BC667839F17937","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540443,"discussion_content":"åº”è¯¥æ˜¯å¹‚ç­‰consumerå§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640057863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1316926,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/3e/f8632713.jpg","nickname":"EveryDayIsNew","note":"","ucode":"776B81EF6830FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341657,"discussion_content":"ç”Ÿäº§è€…æ‰€åœ¨æœºå™¨é‡å¯äº†å‘¢ï¼Œä¸€èˆ¬å‘é€ï¼Œç”Ÿäº§è€…æ˜¯è¦ä¿è¯ä¸€å®šå‘æˆåŠŸçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610497934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1116807,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0a/87/56b07589.jpg","nickname":"nearzk","note":"","ucode":"CDEA6841E5F54C","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1316926,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/3e/f8632713.jpg","nickname":"EveryDayIsNew","note":"","ucode":"776B81EF6830FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355000,"discussion_content":"kafkaæœ‰é™åº¦çš„ä¿è¯æ¶ˆæ¯æŒä¹…åŒ–æˆåŠŸï¼Œé™åº¦ä¹‹ä¸€å°±æ˜¯å¿…é¡»æ˜¯å·²æäº¤çš„æ¶ˆæ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615374224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":341657,"ip_address":""},"score":355000,"extra":""}]}]},{"had_liked":false,"id":110162,"user_name":"Andy","can_delete":false,"product_type":"c1","uid":1515145,"ip_address":"","ucode":"0EF2D58B46D7C3","user_header":"https://static001.geekbang.org/account/avatar/00/17/1e/89/25b12054.jpg","comment_is_top":false,"comment_ctime":1562202911,"is_pvip":false,"replies":[{"id":"39925","content":"In-Sync Replicasï¼Œè¿™æ˜¯ä¸€ä¸ªå‰¯æœ¬é›†åˆï¼Œé‡Œé¢çš„æ‰€æœ‰å‰¯æœ¬éƒ½æ˜¯å’ŒLeaderå‰¯æœ¬ä¿æŒåŒæ­¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562203636,"ip_address":"","comment_id":110162,"utype":1}],"discussion_count":2,"race_medal":0,"score":"44511875871","product_id":100029201,"comment_content":"ç•™è¨€ä¸­ISRæ˜¯ä»€ä¹ˆï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456753,"discussion_content":"In-Sync Replicasï¼Œè¿™æ˜¯ä¸€ä¸ªå‰¯æœ¬é›†åˆï¼Œé‡Œé¢çš„æ‰€æœ‰å‰¯æœ¬éƒ½æ˜¯å’ŒLeaderå‰¯æœ¬ä¿æŒåŒæ­¥çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562203636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366684,"discussion_content":"æˆ‘ä¹Ÿæ˜¯çœ‹çš„ä¸€è„¸æ‡µé€¼ï¼Œä¸çŸ¥é“å¤§å®¶åœ¨è¯´ä»€ä¹ˆï¼Œæ„Ÿè§‰è‡ªå·±ä¸å¤§å®¶ä¸¢å¤±äº†æ¶ˆæ¯åŒæ­¥ã€‚ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618150418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146703,"user_name":"æµªè¿¹äººç”Ÿ","can_delete":false,"product_type":"c1","uid":1058409,"ip_address":"","ucode":"5BA475C8687503","user_header":"https://static001.geekbang.org/account/avatar/00/10/26/69/51d5e6bd.jpg","comment_is_top":false,"comment_ctime":1572612225,"is_pvip":false,"replies":[{"id":"56781","content":"åœ¨ç”Ÿäº§è€…æœåŠ¡å™¨ä¸Šç”Ÿæˆçš„ã€‚ä¸ªäººæ„Ÿè§‰ä¸å¯ä»¥ï¼Œæ¯•ç«Ÿæ¯ä¸ªproduceræœåŠ¡å™¨ä¸Šçš„æ—¶é’Ÿä¸æ˜¯å®æ—¶åŒæ­¥çš„ã€‚äº‹å®ä¸Šï¼Œç”¨æ—¶é’Ÿæ¥ä¿è¯åŒæ­¥æ€§æ˜¯ä¸€ä»¶éå¸¸ä¸é è°±çš„äº‹æƒ…","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1572769359,"ip_address":"","comment_id":146703,"utype":1}],"discussion_count":3,"race_medal":0,"score":"40227317889","product_id":100029201,"comment_content":"è¯·é—®æ¶ˆæ¯çš„createTimestamp æ˜¯åœ¨ç”Ÿäº§è€…æœåŠ¡å™¨ä¸Šç”Ÿæˆçš„ï¼Œè¿˜æ˜¯åœ¨è¿›å…¥ä¸åŒpartition åç”Ÿæˆçš„ï¼Ÿæˆ‘èƒ½ä¸èƒ½æ ¹æ®è¿™ä¸ªæ—¶é—´æˆ³æ¥åˆ¤æ–­ä¸åŒåˆ†åŒºçš„æ¶ˆæ¯åŸå§‹å…¨å±€é¡ºåºï¼Ÿè°¢è°¢ğŸ™","like_count":9,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472985,"discussion_content":"åœ¨ç”Ÿäº§è€…æœåŠ¡å™¨ä¸Šç”Ÿæˆçš„ã€‚ä¸ªäººæ„Ÿè§‰ä¸å¯ä»¥ï¼Œæ¯•ç«Ÿæ¯ä¸ªproduceræœåŠ¡å™¨ä¸Šçš„æ—¶é’Ÿä¸æ˜¯å®æ—¶åŒæ­¥çš„ã€‚äº‹å®ä¸Šï¼Œç”¨æ—¶é’Ÿæ¥ä¿è¯åŒæ­¥æ€§æ˜¯ä¸€ä»¶éå¸¸ä¸é è°±çš„äº‹æƒ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572769359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2860851,"avatar":"","nickname":"Geek_e78fa5","note":"","ucode":"713677ED3B5745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539487,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639728286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1032345,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c0/99/259a412f.jpg","nickname":"Geeker","note":"","ucode":"9937127DE96D78","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386279,"discussion_content":"å¦‚æœç”Ÿäº§è€…æœåŠ¡å™¨åªæœ‰ä¸€ä¸ªé‚£æˆ–è®¸å¯ä»¥ï¼Œä½†ä¸€èˆ¬ç°åœ¨éƒ½æ˜¯å¤šå®ä¾‹éƒ¨ç½²ï¼Œè€Œä¸”ä¹Ÿå¯èƒ½å­˜åœ¨å¤šä¸ªä¸åŒçš„åº”ç”¨å……å½“ç”Ÿäº§è€…çš„æƒ…å†µã€‚\nè¿™ä¹ˆç†è§£æ²¡é”™å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627492932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237759,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1595944554,"is_pvip":false,"replies":[{"id":"87881","content":"æˆ‘è§‰å¾—æ˜¯å¾ˆå¥½çš„åŠæ³•ã€‚å€¼å¾—ä¸€è¯•ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1596005173,"ip_address":"","comment_id":237759,"utype":1}],"discussion_count":3,"race_medal":0,"score":"35955682922","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘é’ˆå¯¹æ‚¨çš„æé—®æ€è€ƒå¹¶æŸ¥é˜…äº†ä¸€ä¸‹ç›¸å…³èµ„æ–™ï¼Œè¯´ä¸€ä¸‹æˆ‘çš„æ€è€ƒå“ˆï¼š<br><br>æˆ‘ä»¬å‡è®¾æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªproduceråªåœ¨è¿™ä¸ªconsumeræ„ŸçŸ¥åˆ°ä¹‹å‰ï¼Œæ–°çš„partitionåˆ†åŒºåªå†™äº†é‚£ä¹ˆå‡ æ¡è®°å½•ï¼Œä¸ä¼šå†æœ‰å…¶ä»–producerå†™æ•°æ®åˆ°è¿™ä¸ªæ–°çš„partitionä¸­ã€‚<br><br>æ–°å¢partitionçš„æƒ…å†µï¼Œrebalanceæ—¶ç”±äºæˆ‘ä»¬é»˜è®¤offset.auto.reset=lastestï¼Œå› æ­¤åœ¨ä½¿ç”¨äº†è¿™ä¸ªé»˜è®¤é…ç½®ä¹‹ä¸‹ï¼Œproducerè¾ƒconsumerå…ˆæ„ŸçŸ¥åˆ°æ–°çš„partitionå°†æ•°æ®å‘é€åˆ°æ–°çš„partitionï¼Œè€Œconsumerä¹‹åæ‰æ„ŸçŸ¥åˆ°è¿™ä¸ªconsumerï¼Œæ­¤æ—¶ç”±äºè¿™ä¸ªæ–°çš„partitionçš„offsetæ˜¯ç¬¬ä¸€æ¬¡æ¶ˆè´¹ï¼Œæ²¡æœ‰å·²æäº¤çš„offsetï¼Œæ‰€ä»¥ä½¿ç”¨latestä»æœ€æ–°çš„ä½ç§»å¼€å§‹è¯»å–ï¼Œä¹Ÿå°±æ˜¯producerå†™å…¥æ¶ˆæ¯offset + 1çš„é‚£ä¸ªä½ç½®å¼€å§‹è¯»å–ï¼Œå› æ­¤ä¹Ÿå°±è¯»å–ä¸åˆ°æ•°æ®ã€‚<br><br>latestï¼šæœ‰æäº¤ä½ç§»å°±ä»æäº¤ä½ç§»å¼€å§‹å¤„ç†ï¼Œæ²¡æœ‰æäº¤ä½ç§»å°±ä»æœ€æ–°çš„ä½ç§»å¼€å§‹å¤„ç†ã€‚<br><br>earlist: æœ‰æäº¤ä½ç§»å°±ä»æäº¤ä½ç§»å¼€å§‹å¤„ç†ï¼Œæ²¡æœ‰æäº¤ä½ç§»å°±ä»æœ€æ—©çš„ä½ç§»å¼€å§‹å¤„ç†ã€‚<br><br>current: ä»å½“å‰çš„æäº¤ä½ç§»å¼€å§‹å¤„ç†ã€‚<br><br>å› æ­¤ï¼Œç¢°åˆ°ä¸Šè¿°æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨seekToBeginä»è¿™ä¸ªæ–°åˆ†åŒºçš„å¼€å§‹ä½ç½®è¯»å³å¯ã€‚<br><br>æˆ‘èƒ½æƒ³åˆ°çš„åŠæ³•æ˜¯ï¼Œå®ç°ä¸€ä¸ªConsumerRebalanceListenerï¼Œé‡å†™onPartitionsAssignedæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œæˆ‘ä»¬æ¯æ¬¡éƒ½ä»è‡ªå·±ç»´æŠ¤çš„æ•°æ®åº“ç³»ç»Ÿé‡Œå–offsetï¼Œèƒ½å–åˆ°è¯´æ˜è¿™ä¸ªpartitionæ˜¯ä¹‹å‰å°±å­˜åœ¨çš„ï¼ŒæŒ‰å·²æœ‰çš„offsetç»§ç»­æ¶ˆè´¹å°±å¯ä»¥äº†ï¼Œæ²¡æœ‰å–åˆ°çš„è®°å½•è¡¨ç¤ºæ˜¯æ–°å¢çš„partitionï¼Œé‚£ä¹ˆå°±ä»0å¼€å§‹æ¶ˆè´¹å¹¶ä¸”ä¿å­˜å½“å‰offsetåˆ°æ•°æ®åº“ã€‚ä¸è®ºæ˜¯ä¸æ˜¯æ–°çš„ï¼Œéƒ½å¯ä»¥seekåˆ°æŒ‡å®šçš„ä½ç½®ï¼Œåªæ˜¯æˆ‘ä»¬æœ‰æ²¡æœ‰ç»´æŠ¤åˆ°è¿™ä¸ªpartitionçš„offsetè®°å½•çš„åŒºåˆ«ã€‚ä¹Ÿå°±ä¸ç”¨é’ˆå¯¹è¿™ä¸ªæ–°åˆ†åŒºæŒ‡å®šoffset.auto.rset=earlistäº†å§ï¼Ÿ<br><br>å¸Œæœ›å¾—åˆ°èƒ¡è€å¸ˆçš„äº¤æµå“ˆ~","like_count":8,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502528,"discussion_content":"æˆ‘è§‰å¾—æ˜¯å¾ˆå¥½çš„åŠæ³•ã€‚å€¼å¾—ä¸€è¯•ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596005173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1702117,"avatar":"https://static001.geekbang.org/account/avatar/00/19/f8/e5/119d5c15.jpg","nickname":"å±±æµ·","note":"","ucode":"77FA9967E58FA3","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346621,"discussion_content":"æœ¬è´¨ä¸Šæ„Ÿè§‰è¿™ä¸ªå’Œå¯¹æŒ‡å®šåˆ†åŒºè®¾ç½®offset.auto.reset=earlist æ²¡æœ‰åŒºåˆ«ï¼Œ æˆ‘ä»¬å‡è®¾è®¾ç½®offset.auto.rset=latestæ˜¯ä¸ºäº†é¿å…æ¶ˆè´¹ä¹‹å‰kafkaå·²æœ‰çš„æ•°æ®ã€‚ ä½†æ˜¯å½“æ¶ˆè´¹è€…ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œå»æŸ¥è¯¢æ•°æ®åº“ï¼Œå‘ç°æ²¡æœ‰offsetï¼Œ ç„¶åä»0å¼€å§‹ï¼Œå˜ç›¸çš„å°±ç­‰äºå®ç°äº†offset.auto.reset=earlist ã€‚ è¿™æ ·ä¸å¦‚ç›´æ¥è®¾ç½®offset.auto.reset=earlist æ›´åŠ ç®€å•ç›´æ¥, äº¦æˆ–è€…è®¾ç½®offsetä»æŸä¸ªæ—¶é—´æˆ³è¿›è¡Œæ¶ˆè´¹ï¼Œ å°†æ—¶é—´æˆ³è®¾ç½®æˆå¯åŠ¨æ—¶ã€‚ ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1612008166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543947,"discussion_content":"å…¶å®ä¸æ­¢æ˜¯è¿™rebalenceè¿™ç§æƒ…å†µï¼Œå¾ˆå¤šåœºæ™¯æˆ‘éƒ½è€ƒè™‘è¿‡è¦ä¸è¦è®°å½•offsetã€‚å¦‚æœè¦è®°å½•offsetè¯´æ˜æ¯æ¬¡æäº¤offsetä¹‹å‰å°±è¦è®°å½•ä¸€æ¬¡ï¼Œè¿™å°±æ˜¯æ¶‰åŠåˆ°å¯èƒ½éœ€è¦ä¸¤é˜¶æ®µæäº¤äº†ã€‚å¦å¤–å°±æ˜¯é«˜å³°æœŸæ—¶ï¼Œè®°å½•offsetç»å¯¹æ˜¯æ— å½¢ä¸­åˆæ‹–æ…¢äº†å½“å‰è¿™æ‰¹æ•°æ®çš„å¤„ç†é€Ÿåº¦çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641366306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182050,"user_name":"æ¯›æ¯›é¸¦","can_delete":false,"product_type":"c1","uid":1633938,"ip_address":"","ucode":"DDC7AD57882A3F","user_header":"https://static001.geekbang.org/account/avatar/00/18/ee/92/18884647.jpg","comment_is_top":false,"comment_ctime":1582700121,"is_pvip":false,"replies":[{"id":"70487","content":"æ²¡æœ‰è¯´ä¸å¯ä»¥ç›¸ç­‰ã€‚å¦‚æœéƒ½æ˜¯2ï¼ŒæŒ‚æ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œproducerä¹Ÿå°±æ— æ³•å†™å…¥äº†ï¼Œå› ä¸ºä¸æ»¡è¶³min.insync.replicasçš„è¦æ±‚äº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1582707556,"ip_address":"","comment_id":182050,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31647471193","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œç¬¬ä¸ƒæ¡æ²¡å¤ªç†è§£å•Šï¼Œ replication.factor å’Œ min.insync.replicasä¸ºä»€ä¹ˆä¸èƒ½ç›¸ç­‰å‘¢ï¼Œå‡å¦‚éƒ½æ˜¯2ï¼Œä¸å¯ä»¥å—ï¼ŒæŒ‚æ‰ä¸€ä¸ªå‰¯æœ¬è¿˜æœ‰ä¸€ä¸ªå‰¯æœ¬å¯ç”¨å•Šã€‚","like_count":7,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485208,"discussion_content":"æ²¡æœ‰è¯´ä¸å¯ä»¥ç›¸ç­‰ã€‚å¦‚æœéƒ½æ˜¯2ï¼ŒæŒ‚æ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œproducerä¹Ÿå°±æ— æ³•å†™å…¥äº†ï¼Œå› ä¸ºä¸æ»¡è¶³min.insync.replicasçš„è¦æ±‚äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582707556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1126482,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/52/7880dcf0.jpg","nickname":"é˜¿æ¯…","note":"","ucode":"5B006F905A1FDE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337530,"discussion_content":"çœ‹åˆ°å¤§ä½¬çš„è¿™æ¡è¯„è®ºï¼Œæ‰æ‡‚äº†replication.factor å’Œ min.insync.replicasä¸ºä»€ä¹ˆä¸èƒ½ç›¸ç­‰å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608964096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134844,"user_name":"äº‘å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1010459,"ip_address":"","ucode":"4475AF1598FBFD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/1b/4b397b80.jpg","comment_is_top":false,"comment_ctime":1568942140,"is_pvip":false,"replies":[{"id":"51729","content":"å—¯ï¼Œæ˜¯çš„ã€‚å½“ç„¶å¦‚æœä¸€ç›´ä¸æˆåŠŸï¼Œæœ€ç»ˆproducerè¯·æ±‚ä¼šè¶…æ—¶","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1568943799,"ip_address":"","comment_id":134844,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31633713212","product_id":100029201,"comment_content":"acks=allè¡¨ç¤ºæ¶ˆæ¯è¦å†™å…¥æ‰€æœ‰ISRå‰¯æœ¬ï¼Œä½†æ²¡è¦æ±‚ISRå‰¯æœ¬æœ‰å¤šå°‘ä¸ªã€‚min.insync.replicasåšäº†è¿™æ ·çš„ä¿è¯<br><br>å¦‚æœmin.insync.replicasçš„å‚æ•°è®¾ç½®æ¯”å®é™…çš„isrå‰¯æœ¬å¤šï¼Œproducerçš„æ¶ˆæ¯å¿…é¡»é˜»å¡ç­‰brokerçš„isræ•°é‡è¾¾åˆ°min.insync.replicasæ‰æäº¤æˆåŠŸå—","like_count":7,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467921,"discussion_content":"å—¯ï¼Œæ˜¯çš„ã€‚å½“ç„¶å¦‚æœä¸€ç›´ä¸æˆåŠŸï¼Œæœ€ç»ˆproducerè¯·æ±‚ä¼šè¶…æ—¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568943799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108337,"user_name":"å¿«è·‘","can_delete":false,"product_type":"c1","uid":1564645,"ip_address":"","ucode":"90ED7E6D40C58E","user_header":"https://static001.geekbang.org/account/avatar/00/17/df/e5/65e37812.jpg","comment_is_top":false,"comment_ctime":1561722432,"is_pvip":false,"replies":[{"id":"39448","content":"1. ä¸æ˜¯ã€‚å¦‚æœé…ç½®äº†retriesï¼Œå³ä½¿è°ƒç”¨send(msg)ä¹Ÿæ˜¯ä¼šé‡è¯•çš„ã€‚è¿™æ˜¯Kafka producerè‡ªå·±å®ç°çš„æœºåˆ¶ï¼Œä¸éœ€è¦ç”¨æˆ·å¹²é¢„<br>2. Brokerå‘é€responseç»™producerï¼Œé‡Œé¢ä¼šä¿å­˜errorä¿¡æ¯ä»¥åŠé‚£ä¸ª(äº›)batchå‡ºé”™äº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561947553,"ip_address":"","comment_id":108337,"utype":1}],"discussion_count":5,"race_medal":0,"score":"31626493504","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚ä»”ç»†é˜…è¯»æ–‡ç¨¿åï¼Œä»æœ‰ä¸€äº›å›°æƒ‘<br>1ã€å¦‚æœåªç”¨ send()æ–¹æ³•ï¼ˆfire and forgetï¼‰ï¼Œ  å³ä½¿é…ç½®retriesï¼Œproducerä¹Ÿæ˜¯ä¸çŸ¥é“æ¶ˆæ¯çŠ¶æ€ï¼Œæ˜¯ä¸ä¼šé‡è¯•çš„ã€‚æ‰€ä»¥è¯´é…ç½®retriesï¼Œè¦æ­é…send(msg, callback)ï¼Œè¿™ä¹ˆç†è§£æ­£ç¡®ä¹ˆï¼Ÿ<br>2ã€é…ç½®äº†retries,   produceræ˜¯æ€ä¹ˆçŸ¥é“å“ªæ¡æ¶ˆæ¯å‘é€å¤±è´¥äº†ï¼Œç„¶åé‡è¯•","like_count":7,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455922,"discussion_content":"1. ä¸æ˜¯ã€‚å¦‚æœé…ç½®äº†retriesï¼Œå³ä½¿è°ƒç”¨send(msg)ä¹Ÿæ˜¯ä¼šé‡è¯•çš„ã€‚è¿™æ˜¯Kafka producerè‡ªå·±å®ç°çš„æœºåˆ¶ï¼Œä¸éœ€è¦ç”¨æˆ·å¹²é¢„\n2. Brokerå‘é€responseç»™producerï¼Œé‡Œé¢ä¼šä¿å­˜errorä¿¡æ¯ä»¥åŠé‚£ä¸ª(äº›)batchå‡ºé”™äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561947553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1282575,"avatar":"https://static001.geekbang.org/account/avatar/00/13/92/0f/cff30522.jpg","nickname":"æ±Ÿæ¹–å¤œé›¨","note":"","ucode":"C64913C7000899","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67548,"discussion_content":"é…ç½®äº†retries,å²‚ä¸æ˜¯æ¶ˆæ¯ä¼šæœ‰é‡å¤ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575131491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2037282,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erpYAcOqrNNxmMuKsd6Dh69BzxiaXjJRh6IMnQlxOqBFiae1EMic32Wv6aFESWytliaL7uniaZ4DgNUwxg/132","nickname":"é»„åº","note":"","ucode":"C8C2749E2DE72B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394125,"discussion_content":"è¿™é‡Œçš„é€»è¾‘åº”è¯¥æ˜¯ï¼Œå¦‚æœä¸ä½¿ç”¨callbackï¼Œbrokerå¤„ç†å¤±è´¥åä¼šå°†errorä¿¡æ¯ä»¥åŠbatchä¿¡æ¯ç»™åˆ°producerï¼Œproducerä¹Ÿæ˜¯æ‰§è¡Œretriesï¼Œä½†æ˜¯æœ€ç»ˆç»“æœä¸å¯æ§ã€‚å¦‚æœå¢åŠ äº†callbackåˆ™å¯ä»¥åœ¨ä¸šåŠ¡ä¾§è¿›è¡Œä¸€å®šçš„å…œåº•æ–¹æ¡ˆï¼Œæ¯”å¦‚è¯´brokerä¸å¯ç”¨ï¼Œåˆ™å¯ä»¥å°†æ•°æ®åœ¨æœ¬åœ°è¿›è¡Œå¤„ç†ã€‚æˆ–è€…å¤šæ¬¡é‡è¯•å¤±è´¥ï¼Œä¹Ÿè¿›è¡Œæœ¬åœ°å¤„ç†ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631753934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1011062,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6d/76/a80ca784.jpg","nickname":"wushuang5112","note":"","ucode":"D1F2AF2CD7D837","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49125,"discussion_content":"å¦‚æœè°ƒç”¨äº†callbackæ˜¯ä¸æ˜¯å°±ä¸ç”¨è®¾ç½®retriesäº†ï¼Œé»˜è®¤æœ‰å›è°ƒæ˜¯ä¸æ˜¯å°±é»˜è®¤ä¼šretriesæ¶ˆæ¯äº†ï¼Ÿ\nå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆretriesä¸ºå¤šå°‘åˆé€‚ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573558490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111899,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/5b/d2e7c2c4.jpg","nickname":"æ—¶éšæ—¶ç°","note":"","ucode":"DA4D622FF84920","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7997,"discussion_content":"æœ‰ä¸ªç–‘é—®ï¼š1ã€è°ƒç”¨äº†send(msg)ï¼Œproducerå¦‚ä½•åˆ¤æ–­ä½•æ—¶è¿›è¡Œretryï¼Œè¿™ä¸ªè§¦å‘åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567751085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108112,"user_name":"nightmare","can_delete":false,"product_type":"c1","uid":1056314,"ip_address":"","ucode":"EF2E51C2122A86","user_header":"https://static001.geekbang.org/account/avatar/00/10/1e/3a/5b21c01c.jpg","comment_is_top":false,"comment_ctime":1561683360,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31626454432","product_id":100029201,"comment_content":"å¤šçº¿ç¨‹æ¶ˆè´¹è¿™ä¹ˆç¡®ä¿æ‰‹åŠ¨æäº¤offsetç®¡ç†ä¸ä¼šä¸¢å¤±å‘¢ï¼ŒæœŸå¾…è€å¸ˆç»™ä¸€ä¸ªæ¶ˆè´¹ç«¯æœ€ä½³å®è·µ","like_count":7},{"had_liked":false,"id":107909,"user_name":"Geek_986289","can_delete":false,"product_type":"c1","uid":1182717,"ip_address":"","ucode":"503FE134FCC109","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtYGLkKnh186Ynyx3bPvOMI7ViaWia2l8DD8eomDkE6AKNwW7l1a00CiaaiaiapibZY5JlQlxqQEQuSYFg/132","comment_is_top":false,"comment_ctime":1561632311,"is_pvip":false,"replies":[{"id":"39125","content":"å°±æˆ‘ç¢°åˆ°çš„å®é™…åœºæ™¯ï¼Œå½±å“è¿˜æ˜¯å¾ˆå¤§çš„ã€‚acks=allæ—¶ï¼Œå¤§éƒ¨åˆ†çš„è¯·æ±‚å¤„ç†å»¶æ—¶éƒ½èŠ±åœ¨äº†followeråŒæ­¥ä¸Šã€‚<br><br>æ˜¯çš„ï¼Œacks=allè¡¨æ˜æ‰€æœ‰ISRä¸­çš„å‰¯æœ¬éƒ½è¦åŒæ­¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561680579,"ip_address":"","comment_id":107909,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27331436087","product_id":100029201,"comment_content":"è®¾ç½® acks = allã€‚è¡¨æ˜æ‰€æœ‰å‰¯æœ¬ Broker éƒ½è¦æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯æ‰ç®—æ˜¯â€œå·²æäº¤â€ã€‚å¦‚æœæ‰€æœ‰çš„Brokeréƒ½è¦æ”¶åˆ°æ¶ˆæ¯æ‰èƒ½ç®—ä½œå·²æäº¤ï¼Œä¼šä¸ä¼šå¯¹ç³»ç»Ÿçš„ååé‡å½±å“å¾ˆå¤§ï¼Ÿå¦å¤–è¿™é‡Œçš„å‰¯æœ¬æŒ‡çš„æ˜¯ä¸æ˜¯ä»…ä»…æ˜¯ISR?","like_count":6,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455740,"discussion_content":"å°±æˆ‘ç¢°åˆ°çš„å®é™…åœºæ™¯ï¼Œå½±å“è¿˜æ˜¯å¾ˆå¤§çš„ã€‚acks=allæ—¶ï¼Œå¤§éƒ¨åˆ†çš„è¯·æ±‚å¤„ç†å»¶æ—¶éƒ½èŠ±åœ¨äº†followeråŒæ­¥ä¸Šã€‚\n\næ˜¯çš„ï¼Œacks=allè¡¨æ˜æ‰€æœ‰ISRä¸­çš„å‰¯æœ¬éƒ½è¦åŒæ­¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561680579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107722,"user_name":"AA","can_delete":false,"product_type":"c1","uid":1103583,"ip_address":"","ucode":"CADCB958D6DA1B","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/df/1e4ecd94.jpg","comment_is_top":false,"comment_ctime":1561599916,"is_pvip":false,"replies":[{"id":"39139","content":"åªè¦ä½ç§»æ²¡æœ‰è¶Šç•Œä»¥åŠæœ‰æäº¤çš„ä½ç§»ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå‡ºç°è¿™ç§åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561681226,"ip_address":"","comment_id":107722,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27331403692","product_id":100029201,"comment_content":"å¦‚æœconsumeræ”¹ç”¨&quot;ä»æœ€æ—©ä½ç½®&quot;è¯»è§£å†³æ–°åŠ åˆ†åŒºé€ æˆçš„é—®é¢˜ï¼Œé‚£ä¼šä¸ä¼šå¯¼è‡´æ—§çš„åˆ†åŒºé‡Œçš„å·²è¢«æ¶ˆè´¹è¿‡çš„æ¶ˆæ¯é‡æ–°å…¨éƒ¨è¢«æ¶ˆè´¹ä¸€æ¬¡","like_count":6,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455638,"discussion_content":"åªè¦ä½ç§»æ²¡æœ‰è¶Šç•Œä»¥åŠæœ‰æäº¤çš„ä½ç§»ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå‡ºç°è¿™ç§åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561681226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073027,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/83/bb728e53.jpg","nickname":"Douglas","note":"","ucode":"CFDE3D76B9DAE6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332420,"discussion_content":"æ¯ä¸ªæ¶ˆè´¹è€…éœ€è¦è‡ªå·±è®°å½•æ¶ˆè´¹çš„ä½ç½®ä¹ˆï¼Œæ¯”å¦‚è®°å½•åˆ°redis,é¿å…æ¶ˆè´¹è€…é‡å¯åä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹æ¶ˆè´¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607185638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1104245,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d9/75/3598e0de.jpg","nickname":"Icedmaze","note":"","ucode":"DC05117685CAB5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468,"discussion_content":"ä¸ä¼šï¼Œå¯¹äºå·²ç»æœ‰æ¶ˆè´¹ä½ç§»çš„åˆ†åŒºï¼Œä¼˜å…ˆæ ¹æ®è®°å½•çš„æ¶ˆè´¹ä½ç§»æ¥ï¼Œåªæœ‰æ‰¾ä¸åˆ°æ¶ˆè´¹ä½ç§»çš„æ—¶å€™æ‰ä¼šæ ¹æ®æ¶ˆè´¹ç­–ç•¥é€‰æ‹©æ˜¯ä»â€œæœ€æ—©ä½ç§»æ¶ˆè´¹â€è¿˜æ˜¯â€œæœ€æ–°ä½ç§»æ¶ˆè´¹â€\nä¸ªäººç†è§£æ˜¯è¿™æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561604652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107643,"user_name":"æ˜ç¿¼","can_delete":false,"product_type":"c1","uid":1068361,"ip_address":"","ucode":"E77F86BEB3D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","comment_is_top":false,"comment_ctime":1561591518,"is_pvip":false,"replies":[{"id":"38943","content":"å—¯å—¯ï¼Œæ˜¯çš„ã€‚æœ¬æ¥å°±æ˜¯ä¸ºäº†æ›´å¼ºçš„æ¶ˆæ¯æŒä¹…åŒ–ä¿è¯ï¼Œåªèƒ½ç‰ºç‰²ä¸€ç‚¹é«˜å¯ç”¨æ€§äº†~~","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561596946,"ip_address":"","comment_id":107643,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27331395294","product_id":100029201,"comment_content":"è¿™ä¸ªé—®é¢˜æˆ‘æƒ³ä¸ªåŠæ³•å°±æ˜¯ç¨‹åºåœæ­¢å†å¢åŠ åˆ†åŒºï¼Œå¦‚æœä¸èƒ½åœæ­¢é‚£å°±æ‰¾ä¸ªé€šçŸ¥æœºåˆ¶äº†ã€‚è¯·æ•™ä¸€ä¸ªé—®é¢˜min.insync.replicasè¿™ä¸ªå‚æ•°å¦‚æœè®¾ç½®æˆ3ï¼Œå‡è®¾å‰¯æœ¬æ•°è®¾ç½®ä¸º4ï¼Œé‚£å²‚ä¸æ˜¯åªæ”¯æŒä¸€å°brokeråæ‰çš„æƒ…å†µï¼Ÿæœ¬æ¥æ”¯æŒä¸‰å°åæ‰çš„ï¼Œè€å¸ˆæˆ‘ç†è§£çš„å¯¹ä¸å¯¹","like_count":6,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455602,"discussion_content":"å—¯å—¯ï¼Œæ˜¯çš„ã€‚æœ¬æ¥å°±æ˜¯ä¸ºäº†æ›´å¼ºçš„æ¶ˆæ¯æŒä¹…åŒ–ä¿è¯ï¼Œåªèƒ½ç‰ºç‰²ä¸€ç‚¹é«˜å¯ç”¨æ€§äº†~~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561596946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49424,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573578157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542987,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","nickname":"è¡Œåˆ™å°†è‡³","note":"","ucode":"DB972F2DF059C4","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3374,"discussion_content":"è¿™ç§æ–¹å¼åº”è¯¥æ˜¯æ”¯æŒåæ‰2å°å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564447092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203905,"user_name":"å’¸æ·¡ä¸€é¦–è¯—","can_delete":false,"product_type":"c1","uid":1435869,"ip_address":"","ucode":"FEE5A9B5139BF1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLl9nj9b6RydKADq82ZwOad0fQcvXWyQKk5U5RFC2kzHGI4GjIQsIZvHsEm7mFELgMiaGx3lGq9vag/132","comment_is_top":false,"comment_ctime":1586304215,"is_pvip":false,"replies":[{"id":"76533","content":"æ˜¯çš„ã€‚min.insync.replicas=2ï¼Œè€ŒISR size = 1ä¸”acks=allï¼Œé‚£ä¹ˆproducerè‚¯å®šæ— æ³•ç”Ÿäº§ä»»ä½•æ¶ˆæ¯ç»™è¿™ä¸ªåˆ†åŒºäº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1586482067,"ip_address":"","comment_id":203905,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23061140695","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå¥½ï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœacks=allï¼Œmin.insync.replicas=2ï¼Œå¦‚æœæŒç»­é«˜ååé‡å¯¼è‡´ISRä¸­åªå‰©ä¸‹leaderï¼Œé‚£ä¹ˆç”±äºmin.insync.replicas=2è®¾ç½®äº†æœ€å°‘éœ€è¦å†™å…¥2ä¸ªå‰¯æœ¬ï¼Œæ­¤æ—¶æ˜¯ä¸æ˜¯è¯¥åˆ†åŒºå°±å†™ä¸è¿›å»äº†ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490997,"discussion_content":"æ˜¯çš„ã€‚min.insync.replicas=2ï¼Œè€ŒISR size = 1ä¸”acks=allï¼Œé‚£ä¹ˆproducerè‚¯å®šæ— æ³•ç”Ÿäº§ä»»ä½•æ¶ˆæ¯ç»™è¿™ä¸ªåˆ†åŒºäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586482067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366690,"discussion_content":"å…¶ä»–ä¸å˜ï¼Œåªä¿®æ”¹asks=1ï¼Œè¿™æ ·è¿˜æ˜¯å†™ä¸è¿›å»å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618151200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152214,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1031695,"ip_address":"","ucode":"4F8B9F5ABA2D52","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/0f/82db5e65.jpg","comment_is_top":false,"comment_ctime":1573916902,"is_pvip":false,"replies":[{"id":"58589","content":"callbackå¯ä»¥å¤„ç†æ¶ˆæ¯å‘é€ä¹‹åçš„é€»è¾‘ï¼Œä¸ä¸€å®šå°±æ˜¯å¤±è´¥çš„é€»è¾‘ã€‚retriesæ˜¯é¢„é˜²é‚£ç§ç¬æ—¶é”™è¯¯çš„ï¼Œæ¯”å¦‚ç½‘ç»œæŠ–åŠ¨è¿™ç§é—®é¢˜ï¼Œè®©Kafkaè‡ªåŠ¨é‡è¯•ä¸€ä¸‹ä¼šæ¯”è¾ƒæ–¹ä¾¿ä¸æ˜¯å—","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1574039151,"ip_address":"","comment_id":152214,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23048753382","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ï¼šretries å’Œ sendé‡Œé¢çš„callbackï¼Œæ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿå› ä¸ºæœ‰è¯´retriesæ˜¯kafkaè‡ªåŠ¨é‡è¯•çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆè¿˜è¦callbackå¹²å—ï¼Œcallbackçš„æ„ä¹‰åœ¨å“ªé‡Œå‘¢ï¼Ÿ å¦‚æœä¸€å®šè¦åšæŒç”¨send(callback)apiï¼Œé‚£ä¹ˆretriesæ˜¯ç”¨æ¥å¹²å—çš„å‘¢ï¼Ÿ è¿™ä¸¤è€…ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè°¢è°¢ã€‚","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474751,"discussion_content":"callbackå¯ä»¥å¤„ç†æ¶ˆæ¯å‘é€ä¹‹åçš„é€»è¾‘ï¼Œä¸ä¸€å®šå°±æ˜¯å¤±è´¥çš„é€»è¾‘ã€‚retriesæ˜¯é¢„é˜²é‚£ç§ç¬æ—¶é”™è¯¯çš„ï¼Œæ¯”å¦‚ç½‘ç»œæŠ–åŠ¨è¿™ç§é—®é¢˜ï¼Œè®©Kafkaè‡ªåŠ¨é‡è¯•ä¸€ä¸‹ä¼šæ¯”è¾ƒæ–¹ä¾¿ä¸æ˜¯å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574039151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113601,"user_name":"æ°é”…ä¸æ˜¯é”…","can_delete":false,"product_type":"c1","uid":1595192,"ip_address":"","ucode":"62D045F6A0680E","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/38/e5b8b766.jpg","comment_is_top":false,"comment_ctime":1563091778,"is_pvip":false,"replies":[{"id":"41415","content":"é€šå¸¸æƒ…å†µä¸‹èƒ½å¤Ÿä¿éšœæ¯ä¸ªconsumeræ¶ˆè´¹ä¸€ä¸ªåˆ†åŒºã€‚å¦‚æœæ¶ˆè´¹æ…¢ï¼Œéœ€è¦çœ‹åˆ°åº•æ˜¯å“ªé‡Œæ…¢ï¼Ÿæ˜¯Kafkaç»™ä½ æ¶ˆæ¯çš„é€Ÿåº¦æ…¢è¿˜æ˜¯ä½ è‡ªå·±å¤„ç†æ¶ˆæ¯çš„é€Ÿåº¦æ…¢ã€‚å¯ä»¥é€‚å½“å¢åŠ max.poll.interval.msçœ‹çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563156592,"ip_address":"","comment_id":113601,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23037928258","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸ªé—®é¢˜ï¼Œå‡å¦‚ä¸€ä¸ªtopicæœ‰3ä¸ªpartion ï¼Œæˆ‘æœ‰ä¸‰ä¸ªæ¶ˆè´¹ç«¯å»æ¶ˆè´¹topicï¼Œè¿™ä¸‰ä¸ªæ¶ˆè´¹ç«¯ï¼Œæ˜¯æ€ä¹ˆå»å¯¹åº”ä¸‰ä¸ªpartion?æ›¾ç»åœ¨çº¿ä¸Šé‡åˆ°è¿‡æ¶ˆè´¹å¤ªæ…¢ï¼Œå¯¼è‡´æ¶ˆæ¯é‡æ–°å‡è¡¡ï¼Œé‡å¤æ¶ˆè´¹äº†ï¼Œæœ‰å¥½çš„è§£å†³æ–¹æ³•å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458300,"discussion_content":"é€šå¸¸æƒ…å†µä¸‹èƒ½å¤Ÿä¿éšœæ¯ä¸ªconsumeræ¶ˆè´¹ä¸€ä¸ªåˆ†åŒºã€‚å¦‚æœæ¶ˆè´¹æ…¢ï¼Œéœ€è¦çœ‹åˆ°åº•æ˜¯å“ªé‡Œæ…¢ï¼Ÿæ˜¯Kafkaç»™ä½ æ¶ˆæ¯çš„é€Ÿåº¦æ…¢è¿˜æ˜¯ä½ è‡ªå·±å¤„ç†æ¶ˆæ¯çš„é€Ÿåº¦æ…¢ã€‚å¯ä»¥é€‚å½“å¢åŠ max.poll.interval.msçœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563156592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136731,"user_name":"wei.li","can_delete":false,"product_type":"c1","uid":1105002,"ip_address":"","ucode":"0FD34DB6CF7F4F","user_header":"https://static001.geekbang.org/account/avatar/00/10/dc/6a/85ab92ae.jpg","comment_is_top":false,"comment_ctime":1569500370,"is_pvip":false,"replies":[{"id":"52501","content":"åœ¨producerç«¯æ˜¯è¿™æ ·çš„ï¼Œåœ¨consumerç«¯æ˜¯é€šè¿‡æ§åˆ¶æ¶ˆè´¹æ•°æ®å’Œæäº¤ä½ç§»çš„æ—¶æœºæ¥å®ç°","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1569548145,"ip_address":"","comment_id":136731,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18749369554","product_id":100029201,"comment_content":"è‡³å°‘ä¸€æ¬¡&#47;è‡³å¤šä¸€æ¬¡çš„è¯­ä¹‰æ˜¯é€šè¿‡ackå¯retireså‚æ•°é…ç½®å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468778,"discussion_content":"åœ¨producerç«¯æ˜¯è¿™æ ·çš„ï¼Œåœ¨consumerç«¯æ˜¯é€šè¿‡æ§åˆ¶æ¶ˆè´¹æ•°æ®å’Œæäº¤ä½ç§»çš„æ—¶æœºæ¥å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569548145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108681,"user_name":"æ›¹ä¼Ÿé›„","can_delete":false,"product_type":"c1","uid":1400754,"ip_address":"","ucode":"9740E426C0742C","user_header":"https://static001.geekbang.org/account/avatar/00/15/5f/b2/c4780c10.jpg","comment_is_top":false,"comment_ctime":1561854350,"is_pvip":false,"replies":[{"id":"39433","content":"ä½ å¯ä»¥é€‰æ‹©å°†offsetä¿å­˜åœ¨å¤–éƒ¨æŒä¹…åŒ–è®¾å¤‡ä¸­ï¼Œä¸è¿‡æ›´å¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨consumer APIä¿å­˜åœ¨Kafkaé‡Œé¢ã€‚å¸¸è§çš„APIåŒ…æ‹¬commitSyncå’ŒcommitAsync","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561946422,"ip_address":"","comment_id":108681,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18741723534","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ã€‚å…³äºoffsetï¼Œæœ‰å¿…è¦å¤–éƒ¨æŒä¹…åŒ–è®°å½•å—ï¼Ÿ å‡ºé—®é¢˜åæŸ¥å‡ºæ¥ç»§ç»­æ¶ˆè´¹ã€‚ä½ è¯´çš„æ›´æ–°offsetæ˜¯æ€ä¹ˆå¤„ç†? æ˜¯ç›´æ¥è°ƒç”¨å®ƒçš„apiæ›´æ–°å—ï¼Ÿ è°¢è°¢","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456078,"discussion_content":"ä½ å¯ä»¥é€‰æ‹©å°†offsetä¿å­˜åœ¨å¤–éƒ¨æŒä¹…åŒ–è®¾å¤‡ä¸­ï¼Œä¸è¿‡æ›´å¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨consumer APIä¿å­˜åœ¨Kafkaé‡Œé¢ã€‚å¸¸è§çš„APIåŒ…æ‹¬commitSyncå’ŒcommitAsync","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108103,"user_name":"Alan","can_delete":false,"product_type":"c1","uid":1119761,"ip_address":"","ucode":"F263C5A01A6377","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/11/45e7b64e.jpg","comment_is_top":false,"comment_ctime":1561682572,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18741551756","product_id":100029201,"comment_content":"1 å¤–éƒ¨æŒä¹…åŒ–æ¯ä¸ªtopicçš„æ¯ä¸ªæ¶ˆè´¹è€…ç»„çš„æ¯ä¸ªpatitionçš„offsetã€‚<br><br>2 ç¨‹åºé‡å¯æ—¶ç»§ç»­ä¸Šä¸€æ¬¡çš„offset<br><br>3 ç›‘æ§æ¯ä¸ªpartitionçš„offsetï¼Œæ¯æ¬¡çš„from offsetå’Œto offsetæ˜¯ä¸æ˜¯çº¿æ€§è¿ç»­çš„æ¶ˆè´¹<br><br>4 å…è®¸é‡å¤æ¶ˆè´¹ï¼Œåœ¨æ¶ˆè´¹ç«¯å»é‡","like_count":4},{"had_liked":false,"id":107999,"user_name":"å¿«è·‘","can_delete":false,"product_type":"c1","uid":1564645,"ip_address":"","ucode":"90ED7E6D40C58E","user_header":"https://static001.geekbang.org/account/avatar/00/17/df/e5/65e37812.jpg","comment_is_top":false,"comment_ctime":1561645686,"is_pvip":false,"replies":[{"id":"39120","content":"å¯ä»¥ã€‚retriesæ˜¯producerè‡ªåŠ¨å¸®ä½ é‡è¯•ã€‚callbackä¸­ä½ å¯ä»¥åšä¸€äº›å¤„ç†ä¹‹åå†é‡è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561680162,"ip_address":"","comment_id":107999,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18741514870","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼<br>producer.send(msg, callback)ä¸­callbackä¸»è¦ç”¨æ¥åšä»€ä¹ˆï¼Ÿå¯ä»¥ç”¨æ¥é‡æ–°å‘é€æ•°æ®ä¹ˆï¼Ÿå¦‚æœå¯ä»¥çš„è¯ï¼Œè·Ÿproducerçš„é…ç½®retriesæ˜¯ä¸æ˜¯åŠŸèƒ½é‡å¤äº†","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455779,"discussion_content":"å¯ä»¥ã€‚retriesæ˜¯producerè‡ªåŠ¨å¸®ä½ é‡è¯•ã€‚callbackä¸­ä½ å¯ä»¥åšä¸€äº›å¤„ç†ä¹‹åå†é‡è¯•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561680162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107980,"user_name":"z.l","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/d35ab9a1.jpg","comment_is_top":false,"comment_ctime":1561643409,"is_pvip":false,"replies":[{"id":"39121","content":"ä¸å†²çªã€‚å¯¹äºå¯é‡è¯•çš„é”™è¯¯ï¼Œretriesæ‰ä¼šè§¦å‘ï¼Œå¦åˆ™ç›´æ¥ è¿›å…¥åˆ°callback","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561680225,"ip_address":"","comment_id":107980,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18741512593","product_id":100029201,"comment_content":"åœ¨â€œproducer.send(msg, callback)çš„callbackæ–¹æ³•ä¸­é‡è¯•ï¼Œå’Œè®¾ç½®retrieså‚æ•°é‡è¯•ï¼Œä¼šä¸ä¼šå†²çªï¼Ÿ2ä¸ªéƒ½è®¾ç½®ä»¥å“ªä¸ªä¸ºå‡†ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455772,"discussion_content":"ä¸å†²çªã€‚å¯¹äºå¯é‡è¯•çš„é”™è¯¯ï¼Œretriesæ‰ä¼šè§¦å‘ï¼Œå¦åˆ™ç›´æ¥ è¿›å…¥åˆ°callback","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561680225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112600,"user_name":"Jason_é¹","can_delete":false,"product_type":"c1","uid":1179329,"ip_address":"","ucode":"4A3DCAAC531724","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/c1/6c99fff4.jpg","comment_is_top":false,"comment_ctime":1562768842,"is_pvip":false,"replies":[{"id":"40975","content":"1. ä¸å¯ä»¥<br>2. ä¸ä¼šä¸¢å¤±ï¼Œä½†å¯èƒ½ä¼šé‡å¤æ¶ˆè´¹","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562803971,"ip_address":"","comment_id":112600,"utype":1}],"discussion_count":5,"race_medal":0,"score":"14447670730","product_id":100029201,"comment_content":"æœ‰ä¸¤ä¸ªé—®é¢˜<br>1ã€acks=all åˆ†åŒºå‰¯æœ¬çš„ä¸ªæ•°ä¸º3ï¼Œproducerå°†æ¶ˆæ¯å‘é€ç»™Leaderåˆ†åŒºåï¼Œä¸¤ä¸ªFolloweråˆ†åŒºè¿˜æœªåŒæ­¥ï¼Œæˆ–è€…ç”±äºç½‘ç»œå»¶æ—¶é—®é¢˜è¿Ÿè¿Ÿæ²¡æœ‰åŒæ­¥ï¼Œè¿™æ—¶æ¶ˆæ¯è€…æ˜¯å¦å¯ä»¥æ¶ˆè´¹Leaderåˆ†åŒºä¸Šçš„è¿™æ¡æ¶ˆæ¯ï¼Œå¦‚æœå¯ä»¥è¯ï¼Œå°±ä¼šå‡ºç°producerå› ä¸ºè¶…æ—¶æ²¡æœ‰æ¥æ”¶åˆ°ackï¼Œè¿›è¡Œé‡å‘æ¶ˆæ¯ï¼Œé‚£æ¶ˆè´¹è€…å°±ä¼šå‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å†µ<br><br>2ã€æˆ‘ä»¬æ­£å¸¸çš„çº¿ä¸Šç¯å¢ƒï¼Œå¯¹äºåŒä¸€ä¸ªä¸»é¢˜æœ‰å¤šå°æ¶ˆè´¹è€…æœºå™¨ï¼Œæ¯”å¦‚å¯¹äºä¸»é¢˜T1ï¼Œç°åœ¨çš„æƒ…å†µæ˜¯æ¶ˆè´¹è€…C1æ¶ˆè´¹çš„åˆ†åŒºæ˜¯P1ï¼Œæ¶ˆè´¹è€…C2æ¶ˆè´¹çš„åˆ†åŒºæ˜¯P2ï¼ŒP1ï¼ŒP2æ˜¯ä¸»é¢˜T1çš„ä¸¤ä¸ªåˆ†åŒºï¼Œè¿™æ—¶å€™çº¿ä¸Šçš„å‘ç‰ˆï¼Œæ¶ˆè´¹è€…C1å’ŒC2éƒ½ä¼šè¿›è¡Œé‡å¯ï¼Œé‡å¯åå¦‚æœC1å˜æˆæ¶ˆè´¹åˆ†åŒºP2ï¼ŒC2å˜æˆæ¶ˆè´¹åˆ†åŒºP1ï¼Œoffsetæ˜¯è®°å½•åœ¨æ¶ˆè´¹ç«¯ï¼Œé‚£ä¼šä¸ä¼šç…§æˆæ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457813,"discussion_content":"1. ä¸å¯ä»¥\n2. ä¸ä¼šä¸¢å¤±ï¼Œä½†å¯èƒ½ä¼šé‡å¤æ¶ˆè´¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562803971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328673,"discussion_content":"å°±ç®—é‡å¯ åŸæ¶ˆè´¹è€…ä¹Ÿä¼šå»æ¶ˆè´¹åŸåˆ†åŒºå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606208181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005098,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/2a/82f4252c.jpg","nickname":"Liliya","note":"","ucode":"386569F3A0BA38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312325,"discussion_content":"æ˜¯ä»¥æ¶ˆè´¹ç»„ï¼ˆgroupï¼‰æ¥ç®¡ç†æ¶ˆè´¹çš„ï¼Œæ¯ä¸ªæ¶ˆè´¹ç»„ä¼šè®°å½•topicå„åˆ†åŒºçš„offsetï¼Œé‡å¯æ¶ˆè´¹ç»„æ¶ˆè´¹è¿›ç¨‹ä¸ä¼šå½±å“offsetï¼Œæ‰€ä»¥ä¸ä¼šé€ æˆæ¶ˆæ¯ä¸¢å¤±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602664771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043558,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/66/0eab4211.jpg","nickname":"Ryan","note":"","ucode":"96D4716E5E6C66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25276,"discussion_content":"å¦‚æœc1å’Œc2éƒ½æ˜¯æ‰‹åŠ¨æäº¤offsetçš„ï¼Œä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570495600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1043558,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/66/0eab4211.jpg","nickname":"Ryan","note":"","ucode":"96D4716E5E6C66","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543952,"discussion_content":"ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œé¡¶å¤šé‡å¤æ¶ˆè´¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641366811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":25276,"ip_address":""},"score":543952,"extra":""}]}]},{"had_liked":false,"id":107762,"user_name":"ç©ºçŸ¥","can_delete":false,"product_type":"c1","uid":1013283,"ip_address":"","ucode":"C448E98238DD36","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/23/31e5e984.jpg","comment_is_top":false,"comment_ctime":1561604207,"is_pvip":false,"replies":[{"id":"39134","content":"æ˜¯å› ä¸ºä¸æ»¡è¶³min.insync.replicasçš„è¦æ±‚äº†ã€‚æ¯”å¦‚è¯¥å‚æ•°=2ï¼Œå½“å‰ISRä¸­åªå‰©1ä¸ªå‰¯æœ¬äº†ï¼Œé‚£ä¹ˆproducerå°±æ²¡æ³•ç”Ÿäº§æ–°çš„æ¶ˆæ¯äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561680978,"ip_address":"","comment_id":107762,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14446506095","product_id":100029201,"comment_content":"è€å¸ˆé—®ä¸‹ <br>ç¬¬7æ¡ ä¸€ä¸ªå‰¯æœ¬æŒ‚æ‰ æ•´ä¸ªåˆ†åŒºä¸èƒ½ç”¨äº† æ˜¯å› ä¸ºæ¯æ¬¡éƒ½å¿…é¡»ä¿è¯å¯ç”¨å‰¯æœ¬ä¸ªæ•° å¿…é¡»è·Ÿæäº¤æ—¶å€™ä¸€è‡´ æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨,åˆæ²¡æœ‰å†—ä½™å‰¯æœ¬å¯¼è‡´çš„å˜›?","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455662,"discussion_content":"æ˜¯å› ä¸ºä¸æ»¡è¶³min.insync.replicasçš„è¦æ±‚äº†ã€‚æ¯”å¦‚è¯¥å‚æ•°=2ï¼Œå½“å‰ISRä¸­åªå‰©1ä¸ªå‰¯æœ¬äº†ï¼Œé‚£ä¹ˆproducerå°±æ²¡æ³•ç”Ÿäº§æ–°çš„æ¶ˆæ¯äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561680978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1161209,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b7/f9/a8f26b10.jpg","nickname":"jacke","note":"","ucode":"05F355E1FF88C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":861,"discussion_content":"é—®ä¸‹,å¦‚æœè¿™ç§æƒ…å†µä¸‹request.required.acksè®¾ç½®ä¸º1,æ¶ˆæ¯èƒ½åˆ°è¾¾ISRå‰©ä¸‹çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œ producerå¯ä»¥æ­£å¸¸å‘é€å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562125511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107631,"user_name":"AA","can_delete":false,"product_type":"c1","uid":1103583,"ip_address":"","ucode":"CADCB958D6DA1B","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/df/1e4ecd94.jpg","comment_is_top":false,"comment_ctime":1561573138,"is_pvip":false,"replies":[{"id":"38931","content":"æ–°å¢åŠ äº†åˆ†åŒºä¹‹åconsumerå’Œproducerä¸ä¼šç«‹å³æ„ŸçŸ¥ï¼Œé€šå¸¸å¯èƒ½ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚å¦‚æœproducerå…ˆæ„ŸçŸ¥åˆ°äº†å¹¶å‘æ–°åˆ†åŒºå‘é€æ¶ˆæ¯ï¼Œé‚£ä¹ˆconsumeråæ„ŸçŸ¥åˆ°ä¹‹åç›´æ¥ä»æœ€æ–°ä½ç§»å¼€å§‹è¯»å–æ¶ˆæ¯ï¼Œé‚£ä¹ˆä¹‹å‰å‘é€çš„æ¶ˆæ¯å°±ä¸ä¼šè¢«æ¶ˆè´¹äº†ã€‚ ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561595902,"ip_address":"","comment_id":107631,"utype":1}],"discussion_count":7,"race_medal":0,"score":"14446475026","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæœ€åä¸€æ®µæ–°å¢åˆ†åŒºå¯¼è‡´æ¶ˆæ¯å…¨éƒ¨ä¸¢å¤±ï¼Œè¿™ä¸ªä¸æ˜¯å¾ˆæ˜ç™½","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455594,"discussion_content":"æ–°å¢åŠ äº†åˆ†åŒºä¹‹åconsumerå’Œproducerä¸ä¼šç«‹å³æ„ŸçŸ¥ï¼Œé€šå¸¸å¯èƒ½ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚å¦‚æœproducerå…ˆæ„ŸçŸ¥åˆ°äº†å¹¶å‘æ–°åˆ†åŒºå‘é€æ¶ˆæ¯ï¼Œé‚£ä¹ˆconsumeråæ„ŸçŸ¥åˆ°ä¹‹åç›´æ¥ä»æœ€æ–°ä½ç§»å¼€å§‹è¯»å–æ¶ˆæ¯ï¼Œé‚£ä¹ˆä¹‹å‰å‘é€çš„æ¶ˆæ¯å°±ä¸ä¼šè¢«æ¶ˆè´¹äº†ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561595902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003624,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/68/7a8aa1e1.jpg","nickname":"saup007","note":"","ucode":"5BE1CA2E482E96","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290895,"discussion_content":"å¦‚æœ consumer é»˜è®¤æ˜¯ earliest è¿™ç§åœºæ™¯å°±ä¸ä¼šä¸¢äº†å§ï¼Œå¦‚æœæ˜¯latestä¼šä¸¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594634282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4802,"discussion_content":"æœ‰åŒæ ·çš„ç–‘æƒ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565745976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1137879,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5c/d7/e4673fde.jpg","nickname":"October","note":"","ucode":"CEDA78F4A5F8B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459,"discussion_content":"è¿˜æ˜¯ä¸ç†è§£ã€‚consumerä½ç§»çš„æäº¤ä¸æ˜¯æ¯ä¸ªåˆ†åŒºçš„ä½ç§»å•ç‹¬æäº¤å—ï¼Ÿåœ¨æœªæ„ŸçŸ¥åˆ°æ–°çš„åˆ†åŒºä¹‹å‰ï¼Œconsumerå¯¹äºæ–°å¢åŠ çš„åˆ†åŒºçš„æ¶ˆè´¹ä½ç§»ä¸åº”è¯¥æ˜¯0å—ã€‚å½“æ„ŸçŸ¥åˆ°æ–°å¢åŠ çš„åˆ†åŒºï¼Œå°±ä¼šä»0å¼€å§‹æ¶ˆè´¹ï¼Œä¸ºä»€ä¹ˆä¼šé€ æˆæ•°æ®ä¸¢å¤±ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1561602022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1154101,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","nickname":"ä½ å¥½æ—…è¡Œè€…","note":"","ucode":"5C72A428DC28F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1137879,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5c/d7/e4673fde.jpg","nickname":"October","note":"","ucode":"CEDA78F4A5F8B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466,"discussion_content":"é™„è®®ï¼Œæˆ‘ä¹Ÿä¸æ˜¯å¾ˆç†è§£ä¸ºä»€ä¹ˆä¸æ˜¯ä»0å¼€å§‹æ‹‰å–æ¶ˆæ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561602723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":459,"ip_address":""},"score":466,"extra":""},{"author":{"id":1109449,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/c9/57d571a3.jpg","nickname":"å‡¯","note":"","ucode":"E3F5993C2FDCB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1137879,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5c/d7/e4673fde.jpg","nickname":"October","note":"","ucode":"CEDA78F4A5F8B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494,"discussion_content":"ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºæœ‰å¯èƒ½æ¶ˆè´¹çš„èµ·ç‚¹é»˜è®¤ä½¿ç”¨çš„æ˜¯largest","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561620136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":459,"ip_address":""},"score":494,"extra":""},{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1137879,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5c/d7/e4673fde.jpg","nickname":"October","note":"","ucode":"CEDA78F4A5F8B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301453,"discussion_content":"æ–°åˆ†åŒºä¸æ˜¯0ï¼Œè€Œæ˜¯ç”±é…ç½®auto.offset.resetå†³å®šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598530450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":459,"ip_address":""},"score":301453,"extra":""}]}]},{"had_liked":false,"id":296493,"user_name":"éæ´²é»‘çŒ´å­","can_delete":false,"product_type":"c1","uid":2639724,"ip_address":"","ucode":"F5FEAC07D562E0","user_header":"https://static001.geekbang.org/account/avatar/00/28/47/6c/78184d19.jpg","comment_is_top":false,"comment_ctime":1623003569,"is_pvip":true,"replies":[{"id":"107772","content":"â€œconsumerè‡ªå·±å»ºä¸€ä¸ªé˜Ÿåˆ—ç„¶åå¤šçº¿ç¨‹æ¥æ¶ˆè´¹â€ â€”â€” è¿™ä¸ªç»å¯¹æ˜¯å¯è¡Œçš„æ–¹æ¡ˆã€‚äº‹å®ä¸Šï¼ŒKafka consumerä»æœªè¦æ±‚ä½¿ç”¨è€…ä¸èƒ½ä½¿ç”¨å¤šçº¿ç¨‹æ¥å¤„ç†pollå›æ¥çš„æ¶ˆæ¯ã€‚éš¾ä»¥å¤„ç†ä½ç§»æäº¤ä¸ä»£è¡¨ä¸èƒ½æ­£ç¡®å¤„ç†ã€‚<br>1ã€å•ä¸ªConsumeræ‰€è´Ÿæ‹…çš„æ¶ˆæ¯å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ<br>--- ä½¿ç”¨å¤šä¸ªconsumeræˆ–å¤šä¸ªçº¿ç¨‹<br>2ã€çœ‹çœ‹è¿™ä¸ªå¸–å­ï¼šhttps:&#47;&#47;www.cnblogs.com&#47;huxi2b&#47;p&#47;13668061.html","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1623120025,"ip_address":"","comment_id":296493,"utype":1}],"discussion_count":0,"race_medal":5,"score":"10212938161","product_id":100029201,"comment_content":"æç¥è€å¸ˆèŠæ¶ˆæ¯é˜Ÿåˆ—çš„è®²åº§é‡Œè¯´ä¸å¯ä»¥consumerè‡ªå·±å»ºä¸€ä¸ªé˜Ÿåˆ—ç„¶åå¤šçº¿ç¨‹æ¥æ¶ˆè´¹ï¼Œå› ä¸ºé‚£æ ·ä¸€æ—¦å®•æœºå°±ä¼šä¸¢å¤±é˜Ÿåˆ—é‡Œçš„æ¶ˆæ¯ã€‚è¿™æ ·çº¿ç¨‹æ± ä¼¼ä¹ä¹Ÿå°±ä¸èƒ½ç”¨äº†ï¼Œå› ä¸ºå¥¹é‡Œé¢å°±æœ‰ä¸€ä¸ªLinkedBlockingQueueã€‚è¯·é—®èƒ¡è€å¸ˆä¸¤ä¸ªé—®é¢˜ï¼š <br>1. å•ä¸ªConsumeræ‰€è´Ÿæ‹…çš„æ¶ˆæ¯å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ<br>2. æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è®©å¤šçº¿ç¨‹å¤„ç†å•ä¸ªConsumerçš„é€»è¾‘å’Œä»£ç å˜å¾—ç®€å•ä¼˜é›…äº›ï¼Ÿæˆ‘èƒ½æƒ³åˆ°çš„æ˜¯å¤„ç†é€»è¾‘ä¿è¯å¹‚ç­‰ï¼Œé¿å…é‡å¤æ¶ˆè´¹äº§ç”Ÿçš„å½±å“ã€‚<br>è°¢è°¢ğŸ™","like_count":2},{"had_liked":false,"id":205036,"user_name":"æå…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1237614,"ip_address":"","ucode":"D9039715F7D290","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/6e/0a300829.jpg","comment_is_top":false,"comment_ctime":1586512485,"is_pvip":false,"replies":[{"id":"76727","content":"1. Java FileChannelçš„transferToæ–¹æ³•åº•å±‚è°ƒç”¨sendfileï¼Œå®ç°Zero Copyã€‚è¯¦ç»†ä¿¡æ¯ä½ å¯ä»¥æŸ¥çœ‹è¿™ä¸ªjdk ticketï¼šhttps:&#47;&#47;bugs.openjdk.java.net&#47;browse&#47;JDK-4474736<br>2. æ˜¯çš„ï¼Œä½ è¯´çš„è¿™ç§æƒ…å†µæ˜¯ä¼šå‡ºç°æ¶ˆæ¯ä¸¢å¤±ï¼Œæ‰€ä»¥Kafkaä¿è¯ä¸ä¸¢æ¶ˆæ¯æ˜¯æœ‰æ¡ä»¶çš„ï¼Œå³ISRä¸­è‡³å°‘æœ‰ä¸€ä¸ªå‰¯æœ¬åŒæ­¥äº†è¯¥æ¶ˆæ¯ä¸”å­˜æ´»ã€‚ä¸å¯èƒ½æ— æ¡ä»¶åœ°ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1586609988,"ip_address":"","comment_id":205036,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10176447077","product_id":100029201,"comment_content":"èƒ¡å“¥ï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š<br>1:kafkaè¿˜ä½¿ç”¨äº†sendfileæŠ€æœ¯ï¼Œèƒ½ç®€å•ä»‹ç»ä¸‹å—ï¼Ÿ<br>2:acks=allï¼Œåªæ˜¯ä¿è¯æ¶ˆæ¯è¢«å­˜å‚¨åˆ°æ‰€æœ‰brokerçš„pagecacheä¸­å°±è®¤ä¸ºæ¶ˆæ¯æˆåŠŸï¼Œå¦‚æœå†æ­¤æ—¶é—´ç‚¹ï¼Œæ‰€æœ‰brokerå…¨éƒ¨å¼‚å¸¸åœæœºï¼Œé‚£ä¹ˆpagecacheä¸­çš„æ¶ˆæ¯å°±ä¸ä¼šè¢«å¼‚æ­¥æ‹‰å–åˆ°ç£ç›˜ï¼Œå½“é‡å¯ä¹‹åï¼Œæ¶ˆæ¯å°±ä¸¢å¤±äº†ã€‚è¿™ç§æƒ…å†µå¦‚ä½•è€ƒè™‘å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491360,"discussion_content":"1. Java FileChannelçš„transferToæ–¹æ³•åº•å±‚è°ƒç”¨sendfileï¼Œå®ç°Zero Copyã€‚è¯¦ç»†ä¿¡æ¯ä½ å¯ä»¥æŸ¥çœ‹è¿™ä¸ªjdk ticketï¼šhttps://bugs.openjdk.java.net/browse/JDK-4474736\n2. æ˜¯çš„ï¼Œä½ è¯´çš„è¿™ç§æƒ…å†µæ˜¯ä¼šå‡ºç°æ¶ˆæ¯ä¸¢å¤±ï¼Œæ‰€ä»¥Kafkaä¿è¯ä¸ä¸¢æ¶ˆæ¯æ˜¯æœ‰æ¡ä»¶çš„ï¼Œå³ISRä¸­è‡³å°‘æœ‰ä¸€ä¸ªå‰¯æœ¬åŒæ­¥äº†è¯¥æ¶ˆæ¯ä¸”å­˜æ´»ã€‚ä¸å¯èƒ½æ— æ¡ä»¶åœ°ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586609988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173861,"user_name":"yic","can_delete":false,"product_type":"c1","uid":1201577,"ip_address":"","ucode":"C8DC471B7C28B8","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/a9/5282a560.jpg","comment_is_top":false,"comment_ctime":1579744373,"is_pvip":false,"replies":[{"id":"67907","content":"åº”è¯¥æ˜¯ä¸€ç§ä¸é”™çš„æ€è·¯ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1580368455,"ip_address":"","comment_id":173861,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10169678965","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œè¯¾åé¢˜ï¼š<br>åœ¨æ¶ˆè´¹è€…ç«¯ç®¡ç†æ¯ä¸ªpartitionçš„offsetæ˜¯å¦å¯ä»¥è§£å†³ï¼Ÿå¦‚æœæ¶ˆè´¹è€…æ˜¯é›†ç¾¤å½¢å¼ï¼Œé‚£å¯ä»¥å…¬å…±ç¼“å­˜ç»Ÿä¸€å­˜å‚¨æ¯ä¸ªpartitionçš„offsetã€‚ç¼“å­˜ä¸­æ²¡æœ‰partitionçš„offsetè®°å½•ï¼Œåˆ™ä»æœ€æ–°æ¶ˆæ¯å¤„å¼€å§‹è¯»æ¶ˆæ¯ã€‚","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482221,"discussion_content":"åº”è¯¥æ˜¯ä¸€ç§ä¸é”™çš„æ€è·¯ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580368455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201577,"avatar":"https://static001.geekbang.org/account/avatar/00/12/55/a9/5282a560.jpg","nickname":"yic","note":"","ucode":"C8DC471B7C28B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":172388,"discussion_content":"å—¯å—¯ï¼Œæ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581777401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171839,"discussion_content":"ä¸¥æ ¼æ„ä¹‰ä¸Šåº”è¯¥å«é›†ä¸­å­˜å‚¨ï¼Œè¿™éƒ¨åˆ†æ•°æ®æ˜¯éœ€è¦è¿›è¡ŒæŒä¹…åŒ–çš„ä¸”ä¸èƒ½ä¸¢å¤±ï¼Œå½“ç„¶ä¸ºäº†æé«˜å“åº”é€Ÿåº¦å¯ä»¥å¼•å…¥ç¼“å­˜æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581752286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120784,"user_name":"DC","can_delete":false,"product_type":"c1","uid":1250344,"ip_address":"","ucode":"EC0E7E86056FA6","user_header":"https://static001.geekbang.org/account/avatar/00/13/14/28/9e3edef0.jpg","comment_is_top":false,"comment_ctime":1564995416,"is_pvip":false,"replies":[{"id":"44458","content":"å¯ä»¥è®¾ç½®topicçº§åˆ«çš„å‚æ•°æ¥è¦†ç›–å…¨å±€å‚æ•°","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565051099,"ip_address":"","comment_id":120784,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10154930008","product_id":100029201,"comment_content":"ä»¥å‰åœ¨callbacké‡Œåšè¿‡å¯¹Kafkaçš„ç†”æ–­é€»è¾‘ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨æ¢å¤ç†”æ–­ï¼Œé˜²æ­¢Kafkaé›†ç¾¤é—®é¢˜å½±å“åº”ç”¨<br>æœ‰ä¸€ä¸ªç–‘é—®ï¼šå°±æ˜¯çœ‹åˆ°è¿™é‡Œå‘ç°ä¼šå¯¹kafkaé›†ç¾¤éƒ½ä¼šæœ‰ä¸€ä»½è‡ªå·±çš„brokeré…ç½®ï¼Œå¦‚æœæˆ‘ä¸åŒä¸šåŠ¡æ¯”å¦‚æ—¥å¿—ä¸šåŠ¡å’Œè®¢å•ä¸šåŠ¡å¯èƒ½å¯¹Kafkaé›†ç¾¤çš„é…ç½®éœ€æ±‚ä¸ä¸€æ ·ï¼Œæ˜¯æ¨èéƒ¨ç½²ä¸¤å°Kafkaé›†ç¾¤å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461478,"discussion_content":"å¯ä»¥è®¾ç½®topicçº§åˆ«çš„å‚æ•°æ¥è¦†ç›–å…¨å±€å‚æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565051099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109985,"user_name":"Geek_817ea4","can_delete":false,"product_type":"c1","uid":1579066,"ip_address":"","ucode":"D1194D33C4DC11","user_header":"https://static001.geekbang.org/account/avatar/00/18/18/3a/b407889c.jpg","comment_is_top":false,"comment_ctime":1562145760,"is_pvip":false,"replies":[{"id":"39908","content":"ä¸æ˜¯çš„ã€‚å¦‚ä½ æ‰€è¯´replication.factor = 3ï¼Œisrå­˜åœ¨ä¸€ä¸ªlå’Œ2ä¸ªfã€‚å¦‚æœä¸€ä¸ªfè¢«è¸¢å‡ºï¼Œæ­¤æ—¶ISRå‰¯æœ¬æ•°å˜æˆ2ï¼Œå³ä½¿æ˜¯acks=allçš„producerä¾ç„¶å¯ä»¥æ­£å¸¸å†™å…¥æ¶ˆæ¯ï¼Œå› ä¸º2ä¾ç„¶å¤§äºmin.insync.replicas(1)ã€‚ä½†å¦‚æœå†æŒ‚ä¸€ä¸ªå‰¯æœ¬ï¼ŒISRå‰¯æœ¬å°±å˜ä¸º1äº† ï¼Œä¸å¤§äºmin.insync.replicasäº†ï¼Œæ­¤æ—¶producerä¸èƒ½å†™å…¥æ•°æ®ã€‚<br><br>min.insync.replicaså’Œacks=allç»“åˆä½¿ç”¨æ¥æ ‡è¯†æ˜¯å¦èƒ½å†™å…¥æ¶ˆæ¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562202046,"ip_address":"","comment_id":109985,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10152080352","product_id":100029201,"comment_content":"min.insync.replicas=1,æ˜¯æŒ‡é»˜è®¤isrä¸­åªè¦å­˜åœ¨ä¸€ä¸ªleaderå‰¯æœ¬å³å¯å—ï¼Ÿè¿™ä¸ªå‚æ•°æ˜¯æŒ‡isrä¸­å‰¯æœ¬æ•°å§ï¼Œè€Œä¸æ˜¯å†™å…¥æ•°æ®ï¼Œæ¯”å¦‚æˆ‘è®¾ç½®è¿™ä¸ªå‚æ•°3ï¼Œisrå­˜åœ¨ä¸€ä¸ªlå’Œ2ä¸ªfï¼Œå¦‚æœä¸€ä¸ªfè¢«è¸¢å‡ºisrå°±ä¼šæŠ¥é”™ï¼Œè€Œä¸æ˜¯å†™å…¥æ•°æ®ã€‚","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456669,"discussion_content":"ä¸æ˜¯çš„ã€‚å¦‚ä½ æ‰€è¯´replication.factor = 3ï¼Œisrå­˜åœ¨ä¸€ä¸ªlå’Œ2ä¸ªfã€‚å¦‚æœä¸€ä¸ªfè¢«è¸¢å‡ºï¼Œæ­¤æ—¶ISRå‰¯æœ¬æ•°å˜æˆ2ï¼Œå³ä½¿æ˜¯acks=allçš„producerä¾ç„¶å¯ä»¥æ­£å¸¸å†™å…¥æ¶ˆæ¯ï¼Œå› ä¸º2ä¾ç„¶å¤§äºmin.insync.replicas(1)ã€‚ä½†å¦‚æœå†æŒ‚ä¸€ä¸ªå‰¯æœ¬ï¼ŒISRå‰¯æœ¬å°±å˜ä¸º1äº† ï¼Œä¸å¤§äºmin.insync.replicasäº†ï¼Œæ­¤æ—¶producerä¸èƒ½å†™å…¥æ•°æ®ã€‚\n\nmin.insync.replicaså’Œacks=allç»“åˆä½¿ç”¨æ¥æ ‡è¯†æ˜¯å¦èƒ½å†™å…¥æ¶ˆæ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562202046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108998,"user_name":"Geek_Sue","can_delete":false,"product_type":"c1","uid":1580774,"ip_address":"","ucode":"B2C9400D72BB1D","user_header":"","comment_is_top":false,"comment_ctime":1561945533,"is_pvip":false,"replies":[{"id":"39453","content":"Kafka Streamsåå°å°±æ˜¯å¤šçº¿ç¨‹çš„å¤„ç†æœºåˆ¶ï¼ˆStream Thread)ï¼Œè€Œä¸”Kafka Streamsçš„ç¡®æ˜¯æ¨èæ–¹æ¡ˆä¹‹ä¸€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561948099,"ip_address":"","comment_id":108998,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10151880125","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œæ‚¨å¥½ï¼Œä¸çŸ¥é“æ‚¨åé¢æœ‰æ²¡æœ‰è®¡åˆ’é’ˆå¯¹å•Consumerå¤šçº¿ç¨‹å¤„ç†çš„æ–¹å¼è¿›è¡Œè¯¦ç»†è¯´æ˜ï¼Ÿæˆ‘è¿™è¾¹å·¥ä½œä¸­æ°å¥½æœ‰è¿™æ ·çš„åœºæ™¯ï¼Œç°åœ¨æ˜¯åˆ©ç”¨kafka streamæ¥å¤„ç†çš„ï¼Œæ²¡æœ‰åˆ©ç”¨åˆ°å¤šçº¿ç¨‹ã€‚","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456202,"discussion_content":"Kafka Streamsåå°å°±æ˜¯å¤šçº¿ç¨‹çš„å¤„ç†æœºåˆ¶ï¼ˆStream Thread)ï¼Œè€Œä¸”Kafka Streamsçš„ç¡®æ˜¯æ¨èæ–¹æ¡ˆä¹‹ä¸€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561948099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1580774,"avatar":"","nickname":"Geek_Sue","note":"","ucode":"B2C9400D72BB1D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":679,"discussion_content":"èƒ¡è€å¸ˆï¼Œæ‚¨è¯´çš„Stream Threadæ˜¯ä¸æ˜¯æŒ‡StreamsConfig.NUM_STREAM_THREADS_CONFIGè¿™ä¸ªå‚æ•°ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561954510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108172,"user_name":"ä½ å¥½æ—…è¡Œè€…","can_delete":false,"product_type":"c1","uid":1154101,"ip_address":"","ucode":"5C72A428DC28F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","comment_is_top":false,"comment_ctime":1561690412,"is_pvip":false,"replies":[{"id":"39452","content":"å¦ç‡æ¥è¯´ï¼Œæˆ‘æ˜¯å¸Œæœ›å¤§å®¶ä¸€èµ·è®¨è®ºï¼Œè€Œä¸”è¿™ä¸ªæ²¡æœ‰ç»å¯¹çš„è§£å†³æ–¹æ¡ˆã€‚èƒ½æƒ³åˆ°çš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯è®©consumerç«¯ç¼“å­˜è®¢é˜…ä¿¡æ¯ï¼Œå¦‚æœå‘ç°æ–°çš„è®¢é˜…åˆ†åŒºå‡ºç°ï¼Œæ‰‹åŠ¨è°ƒæ•´ä½ç§»åˆ°æœ€å¼€å§‹å¤„æ‰§è¡Œï¼ˆæ¯”å¦‚consumer.seekToBeginningï¼‰ ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561948011,"ip_address":"","comment_id":108172,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151625004","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼æŠ±æ­‰æˆ‘ä¹‹å‰è¡¨è¿°çš„ä¸å¤Ÿæ¸…æ¥šï¼Œè¯·é—®è€å¸ˆå¯ä»¥è´´å‡ºå®˜æ–¹ç¤¾åŒºå¯¹å¢åŠ ä¸»é¢˜åˆ†åŒºä»¥åConsumeræ— æ³•è¯»å–åˆ°éƒ¨åˆ†æ–°æ¶ˆæ¯è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆå—ï¼Œå°±æ˜¯æ‚¨åœ¨æœ€åçš„å¼€æ”¾è®¨è®ºé‡Œæå‡ºçš„è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ ä¸€ä¸‹ï¼Œè°¢è°¢è€å¸ˆï¼","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455854,"discussion_content":"å¦ç‡æ¥è¯´ï¼Œæˆ‘æ˜¯å¸Œæœ›å¤§å®¶ä¸€èµ·è®¨è®ºï¼Œè€Œä¸”è¿™ä¸ªæ²¡æœ‰ç»å¯¹çš„è§£å†³æ–¹æ¡ˆã€‚èƒ½æƒ³åˆ°çš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯è®©consumerç«¯ç¼“å­˜è®¢é˜…ä¿¡æ¯ï¼Œå¦‚æœå‘ç°æ–°çš„è®¢é˜…åˆ†åŒºå‡ºç°ï¼Œæ‰‹åŠ¨è°ƒæ•´ä½ç§»åˆ°æœ€å¼€å§‹å¤„æ‰§è¡Œï¼ˆæ¯”å¦‚consumer.seekToBeginningï¼‰ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561948011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108021,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1561648329,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10151582921","product_id":100029201,"comment_content":"ä¸çŸ¥é“æ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·ï¼Œç”Ÿäº§è€…æ„ŸçŸ¥åˆ°äº†æœ‰æ–°åˆ†åŒºåŠ å…¥ç«‹å³é€šçŸ¥brokeç«¯ä¸‹çš„æ¶ˆè´¹è€…ä¸èƒ½æ¶ˆè´¹æ¶ˆæ¯ï¼Œç›´åˆ°æ¶ˆè´¹ç«¯éƒ½æ„Ÿåº”åˆ°äº†åŠ å…¥çš„æ–°åˆ†åŒºä¹‹åï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ‰ç»§ç»­å·¥ä½œ","like_count":2},{"had_liked":false,"id":312018,"user_name":"æœ€æ‘‡æ‘†çš„é±¼","can_delete":false,"product_type":"c1","uid":1255574,"ip_address":"","ucode":"DA19F4C4224719","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqgVXa8DyW0YsrdYtPNMOdGH6hfdwfjwyBPRyoc9yuS4Ml18l0kApOoOKwYkF6NlDPYpX1bVEWomw/132","comment_is_top":false,"comment_ctime":1631594362,"is_pvip":true,"replies":[{"id":"114443","content":"ä¼šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1634004721,"ip_address":"","comment_id":312018,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5926561658","product_id":100029201,"comment_content":"retriesä¼šä¸ä¼šæ”¹å˜æ¶ˆæ¯çš„é¡ºåºå‘¢ï¼Ÿå¦‚æœç¬¬ä¸€æ¡æ¶ˆæ¯å¤±è´¥ï¼Œç¬¬äºŒæ¡æ¶ˆæ¯æˆåŠŸï¼Œå†é‡å‘ç¬¬ä¸€æ¡æ¶ˆæ¯æˆåŠŸã€‚è¿™æ ·ç¬¬äºŒæ¡æ¶ˆæ¯å°±åœ¨ç¬¬ä¸€æ¡æ¶ˆæ¯çš„å‰é¢äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526832,"discussion_content":"ä¼šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634004721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221054,"user_name":"å¼ æ´‹","can_delete":false,"product_type":"c1","uid":1182914,"ip_address":"","ucode":"549BE5DEEF8417","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/c2/bad34a50.jpg","comment_is_top":false,"comment_ctime":1590393365,"is_pvip":true,"replies":[{"id":"81554","content":" replication.factoræ˜¯åˆ†åŒºä¸‹çš„å‰¯æœ¬æ•°ã€‚min.insync.replicasæ˜¯æŒ‡æ¶ˆæ¯å¿…é¡»è¢«å†™å…¥åˆ°ISRçš„è¿™ä¹ˆå¤šä¸ªå‰¯æœ¬æ‰ç®—æˆåŠŸã€‚å¦‚æœreplication.factor = min.insync.replicasï¼Œè¯´æ˜Kafkaè¦æ±‚æ¶ˆæ¯è¦è¢«å†™å…¥åˆ°æ‰€æœ‰å‰¯æœ¬ä¸­æ‰ç®—æˆåŠŸã€‚è‡ªç„¶å¦‚æœæŒ‚äº†ä¸€ä¸ªå‰¯æœ¬ï¼Œåˆ†åŒºå°±æ²¡æ³•æˆåŠŸå†™å…¥æ¶ˆæ¯äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1590417857,"ip_address":"","comment_id":221054,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5885360661","product_id":100029201,"comment_content":"è€å¸ˆè¿™ä¸ªå‚æ•°çš„å«ä¹‰è¿˜æ˜¯æ²¡å¤ªæ˜ç™½ replication.factor &gt;= 3 æ˜¯æ¶ˆæ¯å†™å…¥çš„å‰¯æœ¬æ•°é‡å—ï¼Œè¿˜æ˜¯åœ¨æ¯ä¸ªå‰¯æœ¬ä¸Šä¿å­˜çš„ä»½æ•°ï¼ˆæˆ‘ç°åœ¨çš„ç†è§£æ˜¯è¿™ç§å«ä¹‰ï¼‰ï¼Œä½†æ˜¯ è¿™ä¸ªå‚æ•°çš„é…ç½®  replication.factor &gt; min.insync.replicasã€‚å¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œé‚£ä¹ˆåªè¦æœ‰ä¸€ä¸ªå‰¯æœ¬æŒ‚æœºï¼Œæ•´ä¸ªåˆ†åŒºå°±æ— æ³•æ­£å¸¸å·¥ä½œäº†ã€‚æ²¡æƒ³å¤ªæ˜ç™½ä¸ºä»€ä¹ˆ é…ç½®ç›¸ç­‰å°±æ— æ³•å·¥ä½œäº†ã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496312,"discussion_content":" replication.factoræ˜¯åˆ†åŒºä¸‹çš„å‰¯æœ¬æ•°ã€‚min.insync.replicasæ˜¯æŒ‡æ¶ˆæ¯å¿…é¡»è¢«å†™å…¥åˆ°ISRçš„è¿™ä¹ˆå¤šä¸ªå‰¯æœ¬æ‰ç®—æˆåŠŸã€‚å¦‚æœreplication.factor = min.insync.replicasï¼Œè¯´æ˜Kafkaè¦æ±‚æ¶ˆæ¯è¦è¢«å†™å…¥åˆ°æ‰€æœ‰å‰¯æœ¬ä¸­æ‰ç®—æˆåŠŸã€‚è‡ªç„¶å¦‚æœæŒ‚äº†ä¸€ä¸ªå‰¯æœ¬ï¼Œåˆ†åŒºå°±æ²¡æ³•æˆåŠŸå†™å…¥æ¶ˆæ¯äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590417857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328894,"discussion_content":"æ‰€ä»¥ä½¿ç”¨kafkaéœ€è¦å¼ºå¤§çš„è¿ç»´å›¢é˜Ÿæ”¯æ’‘ï¼Œå‚æ•°å¤ªå¤š ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606268673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217108,"user_name":"Treagzhao","can_delete":false,"product_type":"c1","uid":1109643,"ip_address":"","ucode":"906C3A7F33040C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqKurYDna034zK0ibDIWicybibQhiaM6afgla2zVFqBrAemLgCh3WoibjACnic5ibiaYMd29tMB26cjaGaPoA/132","comment_is_top":false,"comment_ctime":1589421235,"is_pvip":false,"replies":[{"id":"80317","content":"è¿™ä¹ˆçœ‹æ¥ï¼Œæ˜¯ä»¥ç”Ÿäº§è€…ä¸ºå‡†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1589458549,"ip_address":"","comment_id":217108,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5884388531","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜æƒ³ä¸æ˜ç™½ã€‚ackå‚æ•°æ˜¯è®¾ç½®åœ¨ç”Ÿäº§è€…ä¸Šçš„ï¼Œä¸åŒçš„ç”Ÿäº§è€…å¯ä»¥æœ‰ä¸åŒçš„å‚æ•°å€¼ï¼Œé‚£æ˜¯ä¸æ˜¯åŒä¸€ä¸ªä¸»é¢˜ä¸åŒçš„ç”Ÿäº§è€…&quot;å·²æäº¤&quot;çš„å®šä¹‰æ˜¯ä¸ä¸€æ ·çš„ï¼Ÿè¿™ä¸ªå®šä¹‰æ˜¯ä»¥ç”Ÿäº§è€…ä¸ºå‡†çš„ï¼Ÿè¿˜æ˜¯ä»¥æœåŠ¡å™¨è®¾ç½®ä¸ºå‡†çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495039,"discussion_content":"è¿™ä¹ˆçœ‹æ¥ï¼Œæ˜¯ä»¥ç”Ÿäº§è€…ä¸ºå‡†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589458549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210507,"user_name":"æ¸Šè™¹","can_delete":false,"product_type":"c1","uid":1197459,"ip_address":"","ucode":"A041AD241B8E3F","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/93/6ad60b12.jpg","comment_is_top":false,"comment_ctime":1587781063,"is_pvip":false,"replies":[{"id":"78459","content":"å¯¹äºæ¶ˆè´¹è€…è€Œè¨€ï¼Œå°±æ˜¯å…ˆæ¶ˆè´¹ç„¶åå†æäº¤ä½ç§»","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1587866050,"ip_address":"","comment_id":210507,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5882748359","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸‹ã€‚ç»´æŒå…ˆæ¶ˆè´¹æ¶ˆæ¯ï¼ˆé˜…è¯»ï¼‰ï¼Œå†æ›´æ–°ä½ç§»ï¼ˆä¹¦ç­¾ï¼‰çš„é¡ºåºã€‚æ˜¯å¦‚ä½•åšçš„","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493039,"discussion_content":"å¯¹äºæ¶ˆè´¹è€…è€Œè¨€ï¼Œå°±æ˜¯å…ˆæ¶ˆè´¹ç„¶åå†æäº¤ä½ç§»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587866050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201050,"user_name":"Geek_9d0e04","can_delete":false,"product_type":"c1","uid":1902220,"ip_address":"","ucode":"F5560CE5BDB125","user_header":"","comment_is_top":false,"comment_ctime":1585709629,"is_pvip":false,"replies":[{"id":"75362","content":"å†™åˆ°page cacheä¸­","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1585792265,"ip_address":"","comment_id":201050,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880676925","product_id":100029201,"comment_content":"brokerä¸ŠæˆåŠŸä¿å­˜è¯¥æ¶ˆæ¯ï¼Œæ˜¯æŒ‡æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œè¿˜æ˜¯åªæ˜¯å†™åˆ°page cacheä¸­ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490225,"discussion_content":"å†™åˆ°page cacheä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585792265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180791,"user_name":"Phil","can_delete":false,"product_type":"c1","uid":1617421,"ip_address":"","ucode":"CBD45271013B2A","user_header":"https://static001.geekbang.org/account/avatar/00/18/ae/0d/3e89877b.jpg","comment_is_top":false,"comment_ctime":1582389451,"is_pvip":false,"replies":[{"id":"70212","content":"æ˜¯å¯èƒ½çš„ï¼Œæ‰€ä»¥æœ‰max.in.flight.requests.per.connectionè¿™ä¸ªå‚æ•°ï¼Œ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1582455476,"ip_address":"","comment_id":180791,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5877356747","product_id":100029201,"comment_content":"å¼‚æ­¥å‘é€æ¶ˆæ¯ï¼Œå¦‚æœretryï¼Œæ˜¯å¦ä¼šé€ æˆæ¶ˆæ¯ä¹±åºï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484792,"discussion_content":"æ˜¯å¯èƒ½çš„ï¼Œæ‰€ä»¥æœ‰max.in.flight.requests.per.connectionè¿™ä¸ªå‚æ•°ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582455476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173144,"user_name":"ezekiel","can_delete":false,"product_type":"c1","uid":1158795,"ip_address":"","ucode":"AB4AB6FA8612D8","user_header":"https://static001.geekbang.org/account/avatar/00/11/ae/8b/43ce01ca.jpg","comment_is_top":false,"comment_ctime":1579436699,"is_pvip":false,"replies":[{"id":"67159","content":"è¿™ä¸ªéœ€æ±‚å¤ªå¤ªå®½æ³›äº†ã€‚ã€‚ã€‚ã€‚æ¯ä¸ªç”Ÿäº§ç¯å¢ƒçš„éœ€æ±‚éƒ½å¯èƒ½ä¸åŒã€‚å¦‚æœå¯»æ‰¾å…±æ€§çš„ä»£ç ï¼Œå¯ä»¥å»Kafkaçš„Javadocä¸Šçœ‹çœ‹ç¤ºä¾‹ä»£ç ï¼š<br>https:&#47;&#47;kafka.apache.org&#47;23&#47;javadoc&#47;index.html?org&#47;apache&#47;kafka&#47;clients&#47;consumer&#47;KafkaConsumer.html<br>å’Œ<br>https:&#47;&#47;kafka.apache.org&#47;23&#47;javadoc&#47;org&#47;apache&#47;kafka&#47;clients&#47;producer&#47;KafkaProducer.html","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1579482493,"ip_address":"","comment_id":173144,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5874403995","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼<br><br>æ˜¯å¦å¯ä»¥ç»™ä¸€ä»½åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„kafkaç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…demoï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481971,"discussion_content":"è¿™ä¸ªéœ€æ±‚å¤ªå¤ªå®½æ³›äº†ã€‚ã€‚ã€‚ã€‚æ¯ä¸ªç”Ÿäº§ç¯å¢ƒçš„éœ€æ±‚éƒ½å¯èƒ½ä¸åŒã€‚å¦‚æœå¯»æ‰¾å…±æ€§çš„ä»£ç ï¼Œå¯ä»¥å»Kafkaçš„Javadocä¸Šçœ‹çœ‹ç¤ºä¾‹ä»£ç ï¼š\nhttps://kafka.apache.org/23/javadoc/index.html?org/apache/kafka/clients/consumer/KafkaConsumer.html\nå’Œ\nhttps://kafka.apache.org/23/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579482493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160552,"user_name":"jfwwlong","can_delete":false,"product_type":"c1","uid":1351597,"ip_address":"","ucode":"215753DB23A02A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJM2Y17W5mKU1icTg4OTKd3xYMhANenFDsYewjBlzWMujIh3vA2Yj9yG8ibr6WQMqUjjTgeNicXTp9kw/132","comment_is_top":false,"comment_ctime":1575973337,"is_pvip":true,"replies":[{"id":"61311","content":"future.get()ç›¸å½“äºåŒæ­¥å‘é€äº†ï¼Œä½¿ç”¨callbackå®ç°çš„æ˜¯å¼‚æ­¥å‘é€ã€‚åˆ°åº•ä½¿ç”¨å“ªä¸ªå–å†³äºä½ çš„é€‰æ‹©äº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1576025302,"ip_address":"","comment_id":160552,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870940633","product_id":100029201,"comment_content":"å¯ä»¥ç”¨sendé‡Œçš„future.getæ¥ä»£æ›¿callbackå—","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477414,"discussion_content":"future.get()ç›¸å½“äºåŒæ­¥å‘é€äº†ï¼Œä½¿ç”¨callbackå®ç°çš„æ˜¯å¼‚æ­¥å‘é€ã€‚åˆ°åº•ä½¿ç”¨å“ªä¸ªå–å†³äºä½ çš„é€‰æ‹©äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576025302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157246,"user_name":"æ°æ´›ç‰¹","can_delete":false,"product_type":"c1","uid":1098146,"ip_address":"","ucode":"46D0574654F8AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqEacia8yO1dR5Tal9B7w8PzTRrViajlAvDph96OqcuBGe29icbXOibhibGmaBcO7BfpVia0Y8ksZwsuAYQ/132","comment_is_top":false,"comment_ctime":1575096604,"is_pvip":false,"replies":[{"id":"60321","content":"é€šå¸¸åœ¨Callbackä¸­åªéœ€è¦å¤„ç†ä¸¥é‡é”™è¯¯å°±å¯ä»¥äº†ã€‚å›è°ƒçš„å¤„ç†é€»è¾‘ä»¥å…·ä½“åœºæ™¯è€Œå®šï¼Œæ²¡æœ‰ç‰¹å®šæœ‰æ„ä¹‰çš„ç¤ºä¾‹ä»£ç ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1575112626,"ip_address":"","comment_id":157246,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870063900","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè¯·é—®å¦‚æœé…ç½®äº† retries&gt;0ï¼Œè¿˜éœ€è¦åœ¨å¸¦å›è°ƒçš„callbacké‡Œæ˜¾ç¤ºå¤„ç†å¯é‡è¯•å¼‚å¸¸å—ï¼Ÿè¿˜æ˜¯åªéœ€å¤„ç†ä¸å¯é‡è¯•å¼‚å¸¸å°±å¯ä»¥äº†ï¼Ÿæœ‰å›è°ƒçš„ç¤ºä¾‹ä»£ç å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476373,"discussion_content":"é€šå¸¸åœ¨Callbackä¸­åªéœ€è¦å¤„ç†ä¸¥é‡é”™è¯¯å°±å¯ä»¥äº†ã€‚å›è°ƒçš„å¤„ç†é€»è¾‘ä»¥å…·ä½“åœºæ™¯è€Œå®šï¼Œæ²¡æœ‰ç‰¹å®šæœ‰æ„ä¹‰çš„ç¤ºä¾‹ä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575112626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145450,"user_name":"æ³¨å®šéå‡¡","can_delete":false,"product_type":"c1","uid":1113597,"ip_address":"","ucode":"80673056E131B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","comment_is_top":false,"comment_ctime":1572274818,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5867242114","product_id":100029201,"comment_content":"1ï¼šä»€ä¹ˆæ˜¯ä¸ä¸¢å¤±<br>Kafkaåªå¯¹â€œå·²æäº¤â€çš„æ¶ˆæ¯ï¼ˆcommitted messageï¼‰åšæœ‰é™åº¦æŒä¹…åŒ–ä¿è¯ã€‚<br>        Aï¼šâ€œå·²æäº¤â€çš„å®šä¹‰ï¼šKafkaçš„è‹¥å¹²ä¸ªï¼ˆå¯è‡ªå®šä¹‰é…ç½®ä¸ºä¸€ä¸ªæˆ–å…¨éƒ¨ï¼‰BrokeræˆåŠŸæ¥æ”¶åˆ°ï¼Œå¹¶å†™å…¥æ—¥å¿—åå³ä¸ºä»¥æˆåŠŸæäº¤ã€‚<br>       Bï¼šæœ‰é™åº¦çš„æŒä¹…åŒ–ä¿è¯ï¼škafkaçš„æ¶ˆæ¯ä¸ä¸¢å¤±çš„å‰ææ˜¯Nä¸ªBrokerä¸­è‡³å°‘æœ‰ä¸€ä¸ªå­˜æ´»ã€‚<br><br>2ï¼šæ¶ˆæ¯ä¸¢å¤±åœºæ™¯<br>\tAï¼šç”Ÿäº§è€…ä¸¢å¤±æ¶ˆæ¯ï¼š<br>\t\tï¼ˆ1ï¼‰ï¼šKafka Produceræ˜¯å¼‚æ­¥å‘é€æ¶ˆæ¯ï¼Œä½¿ç”¨producer.send(msg)å‘é€æ¶ˆæ¯ï¼Œå¯ä»¥ç«‹å³å¾—åˆ°å“åº”ï¼Œä½†ä¸èƒ½ç¡®å®šæ˜¯å¦çœŸçš„å‘é€æˆåŠŸã€‚<br>\t\tï¼ˆ2ï¼‰ï¼šç½‘ç»œæŠ–åŠ¨ï¼Œæ¶ˆæ¯æœ¬èº«ä¸åˆæ ¼éƒ½ä¼šå¯¼è‡´Brokeræ— æ³•æ­£å¸¸æ¥æ”¶æ¶ˆæ¯<br>\tè§£å†³ï¼šä½¿ç”¨å¸¦æœ‰å›è°ƒçš„producer.send(msgï¼Œcallback)ï¼Œå›è°ƒå¯ä»¥å‡†ç¡®çš„å‘Šè¯‰æˆ‘ä»¬æ¶ˆæ¯æ˜¯å¦çœŸçš„å‘é€æˆåŠŸã€‚<br>\t<br>\tBï¼šæ¶ˆè´¹è€…ä¸¢å¤±æ¶ˆæ¯ï¼š<br>\t\tï¼ˆ1ï¼‰Consumerç«¯çš„ä½ç§»æ•°æ®å‡ºç°å¼‚å¸¸ï¼Œå¯¼è‡´æ¶ˆæ¯è¢«ç•¥è¿‡<br>è§£å†³ï¼šå…ˆæ¶ˆè´¹æ¶ˆæ¯ï¼Œåœ¨æ›´æ–°ä½ç§»è®°å½•ï¼ˆè¿™ä¸ªå¯èƒ½ä¼šå¯¼è‡´é‡å¤æ¶ˆè´¹é—®é¢˜ï¼‰<br>\t\tï¼ˆ2ï¼‰å¤šä¸ªConsumerå®ä¾‹åŒæ—¶æ¶ˆè´¹ï¼Œä½†éƒ¨åˆ†å®ä¾‹æ¶ˆè´¹å¤±è´¥ï¼ŒåŸå› æ˜¯æ¯ä¸ªç¡®è®¤æ¶ˆæ¯æ˜¯å¦æˆåŠŸæ¶ˆè´¹ï¼Œä½ç§»æ•°æ®å°±å·²ç»è¢«æ›´æ–°ã€‚<br>\t\t\tè§£å†³ï¼šå¦‚æœæ˜¯å¤šçº¿ç¨‹å¼‚æ­¥å¤„ç†æ¶ˆè´¹æ¶ˆæ¯ï¼Œconsumerï¼Œç¨‹åºå°±ä¸è¦å¼€å¯è‡ªåŠ¨æäº¤ä½ç§»ï¼Œè®©åº”ç”¨ç¨‹åºæ‰‹åŠ¨æäº¤ã€‚<br><br>3ï¼šæœ€ä½³å®è·µ<br>\tAï¼šä½¿ç”¨å¸¦å›è°ƒé€šçŸ¥çš„æ–¹æ³•ï¼Œå‘é€æ¶ˆæ¯<br>\tBï¼šProducerç«¯è®¾ç½®ç›¸å…³å‚æ•°ï¼š<br>ï¼ˆ1ï¼‰è®¾ç½®acks=allï¼Œè¡¨ç¤ºæ‰€æœ‰å‰¯æœ¬Brokeréƒ½è¦æ¥æ”¶åˆ°è¯¥æ¶ˆæ¯ï¼Œæ‰ç®—æäº¤æˆåŠŸã€‚<br>ï¼ˆ2ï¼‰è®¾ç½®retries&gt;0ï¼Œè¡¨ç¤ºProducerèƒ½å¤Ÿè‡ªåŠ¨é‡è¯•æ¶ˆæ¯å‘é€ï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±ã€‚<br>\tCï¼šBrokerç«¯è®¾ç½®ç›¸å…³å‚æ•°ï¼š<br>\t\tï¼ˆ1ï¼‰ï¼šè®¾ç½®unclean.leader.election.enable = falseï¼Œæ§åˆ¶Brokeræœ‰èµ„æ ¼ç«é€‰åˆ†åŒºçš„leaderï¼Œç¦æ­¢è½ååŸLeaderçš„å¤ªå¤šBrokerå‚åŠ ç«é€‰ï¼Œé¿å…æˆä¸ºæ–°çš„Leaderï¼Œé€ æˆæ¶ˆæ¯ä¸¢å¤±ã€‚<br>\t\tï¼ˆ2ï¼‰ï¼šè®¾ç½® replication.factor &gt;=3ï¼Œè¡¨ç¤ºå°†æ¶ˆæ¯å¤šå¤‡ä»½å‡ ä»½ã€‚<br>\t\tï¼ˆ3ï¼‰ï¼šè®¾ç½® min.insync.replicas &gt;1ï¼Œæ§åˆ¶æ¶ˆæ¯è‡³å°‘è¦è¢«å†™å…¥åˆ°å¤šå°‘ä¸ªå‰¯æœ¬æ‰ç®—æ˜¯â€œå·²æäº¤â€ã€‚è¿™ä¸ªè®¾ç½®æˆå¤§äº1å¯ä»¥æå‡æ¶ˆæ¯æŒä¹…æ€§ã€‚ç”Ÿäº§ç¯å¢ƒä¸å¯ä»¥è®¾ç½®ä¸ºé»˜è®¤å€¼1ã€‚<br>\t\tï¼ˆ4ï¼‰ï¼šè®¾ç½®replication.factor = min.insync.replicas + 1ï¼Œ ç¡®ä¿replication.factor&gt;min.insync.replicasï¼Œè‹¥ä¸¤è€…ç›¸ç­‰ï¼Œé‚£ä¹ˆåªè¦æœ‰ä¸€ä¸ªå‰¯æœ¬æŒ‚æœºï¼Œæ•´ä¸ªåˆ†åŒºéƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚<br>\tDï¼šConsumerç«¯è®¾ç½®ç›¸å…³å‚æ•°ï¼š<br>\t\tï¼ˆ1ï¼‰è®¾ç½®enable.auto.commit=falseï¼Œè¡¨ç¤ºå…³é—­è‡ªåŠ¨æäº¤ï¼Œä½¿ç”¨æ‰‹åŠ¨æäº¤ä½ç§»æ–¹å¼ã€‚<br>","like_count":1},{"had_liked":false,"id":145066,"user_name":"Geek_9577e8","can_delete":false,"product_type":"c1","uid":1643916,"ip_address":"","ucode":"6888DAD84BA992","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLqHftpcZg7icWktaUiaCXSc0e8OwcjPqiatIhxJ77JclUH22qrjxYqZcJ46f7wtoqEIYSx3UJ26OZ4g/132","comment_is_top":false,"comment_ctime":1572178373,"is_pvip":false,"replies":[{"id":"55955","content":"<br>â€œæ¯ä¸ªç”Ÿäº§ç¯å¢ƒæœºå™¨éƒ½å¯¹åº”ä¸€ä¸ªconsumerâ€ â€”â€”ä¸ä¸€å®šå•Š<br><br>åœ¨æ¶ˆè´¹è€…ç»„æœºåˆ¶ä¸‹ï¼Œæ¶ˆè´¹è€…å®ä¾‹çš„æ•°é‡æœ€å¥½ä¸è¦è¶…è¿‡åˆ†åŒºæ•°ï¼Œå¦åˆ™ä¼šæœ‰æ¶ˆè´¹è€…å®ä¾‹æ¶ˆè´¹ä¸åˆ°åˆ†åŒºï¼Œä½†ä¸ä¼šå‡ºç°å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ä¸€ä¸ªåˆ†åŒºçš„æƒ…å†µã€‚<br><br>è¿™é‡Œçš„å®ä¾‹å¯ä»¥ä½äºä¸åŒçš„çº¿ç¨‹ã€è¿›ç¨‹ç”šè‡³æ˜¯ä¸åŒçš„æœºå™¨ä¸Šã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1572224976,"ip_address":"","comment_id":145066,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867145669","product_id":100029201,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸‹ã€‚æˆ‘ä»¬å…¬å¸kafkaä¸€èˆ¬è¿™ä¹ˆä½¿ç”¨ï¼Œæˆ‘ç”³è¯·ä¸€ä¸ªtopicå’Œä¸€ä¸ªconsumergroupï¼Œå†™å¥½consumerä»£ç ç„¶åå‘åˆ°ç”Ÿäº§ç¯å¢ƒæœºå™¨é›†ç¾¤ä¸­ã€‚æˆ‘ç†è§£æ¯ä¸ªç”Ÿäº§ç¯å¢ƒæœºå™¨éƒ½å¯¹åº”ä¸€ä¸ªconsumerï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ç”Ÿäº§ç¯å¢ƒæ¶ˆè´¹è€…æœºå™¨æ•°é‡æ˜¯ä¸æ˜¯ä¸èƒ½è¶…è¿‡partitionæ•°é‡ï¼Œå¦åˆ™ä¼šå‡ºç°å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ä¸€ä¸ªpartitionçš„æƒ…å†µï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472229,"discussion_content":"\nâ€œæ¯ä¸ªç”Ÿäº§ç¯å¢ƒæœºå™¨éƒ½å¯¹åº”ä¸€ä¸ªconsumerâ€ â€”â€”ä¸ä¸€å®šå•Š\n\nåœ¨æ¶ˆè´¹è€…ç»„æœºåˆ¶ä¸‹ï¼Œæ¶ˆè´¹è€…å®ä¾‹çš„æ•°é‡æœ€å¥½ä¸è¦è¶…è¿‡åˆ†åŒºæ•°ï¼Œå¦åˆ™ä¼šæœ‰æ¶ˆè´¹è€…å®ä¾‹æ¶ˆè´¹ä¸åˆ°åˆ†åŒºï¼Œä½†ä¸ä¼šå‡ºç°å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ä¸€ä¸ªåˆ†åŒºçš„æƒ…å†µã€‚\n\nè¿™é‡Œçš„å®ä¾‹å¯ä»¥ä½äºä¸åŒçš„çº¿ç¨‹ã€è¿›ç¨‹ç”šè‡³æ˜¯ä¸åŒçš„æœºå™¨ä¸Šã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572224976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134922,"user_name":"miwucc","can_delete":false,"product_type":"c1","uid":1326429,"ip_address":"","ucode":"7935BD907119AE","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/5d/ac666969.jpg","comment_is_top":false,"comment_ctime":1568955025,"is_pvip":false,"replies":[{"id":"51957","content":"1. æ²¡æœ‰æ”¶åˆ°acksï¼Œproducerä¼šé‡è¯•ï¼Œå¯¼è‡´é‡å¤å‘é€è€Œä¸æ˜¯ä¸¢å¤±æ¶ˆæ¯<br>2. ç¬¬äºŒä¸ªé—®é¢˜å¯¹brokerè€Œè¨€ä¸æ˜¯ä¸¢å¤±æ¶ˆæ¯åœºæ™¯ï¼Œå› ä¸ºéƒ½æ²¡æœ‰å‘é€åˆ°brokerç«¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1569201414,"ip_address":"","comment_id":134922,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5863922321","product_id":100029201,"comment_content":"è¿™ä¸ªä¸ä¸¢å¤±æ¶ˆæ¯çš„æ–¹æ³•è¿˜æœ‰ä¸¤ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼š<br>1.ç½‘ç»œé—®é¢˜å¯¼è‡´å®¢æˆ·ç«¯æ²¡æœ‰æ”¶åˆ°ackæ¶ˆæ¯<br>2.å‘é€ç«¯åœ¨ç¼“å­˜ä¸­çš„æ¶ˆæ¯è¿˜æ²¡å‘å‡ºå»çš„æ—¶å€™è¿›ç¨‹è¢«æ€æ‰äº†<br>è¦è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜æ˜¯ä¸æ˜¯å¿…é¡»è‡ªå·±å®ç°å‘é€æ¶ˆæ¯æŒä¹…åŒ–ï¼Ÿæ²¡æ”¶åˆ°ackå°±é‡å‘ï¼Ÿ<br>ä½†æ˜¯å¦‚æœæ˜¯å¼‚æ­¥é‡å‘çš„è¯åˆä¼šå¼•èµ·æ¶ˆæ¯é¡ºåºé—®é¢˜ã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467957,"discussion_content":"1. æ²¡æœ‰æ”¶åˆ°acksï¼Œproducerä¼šé‡è¯•ï¼Œå¯¼è‡´é‡å¤å‘é€è€Œä¸æ˜¯ä¸¢å¤±æ¶ˆæ¯\n2. ç¬¬äºŒä¸ªé—®é¢˜å¯¹brokerè€Œè¨€ä¸æ˜¯ä¸¢å¤±æ¶ˆæ¯åœºæ™¯ï¼Œå› ä¸ºéƒ½æ²¡æœ‰å‘é€åˆ°brokerç«¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569201414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129693,"user_name":"Geek_b809ff","can_delete":false,"product_type":"c1","uid":1288329,"ip_address":"","ucode":"F3F17E99F3AA0B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoPY23R9RRSfBeTJUlyc612VlodjAaWWBNiay9tPydkrd6b9NA8GNibdibnFibTsx94ItHE4jvQwprNzA/132","comment_is_top":false,"comment_ctime":1567221531,"is_pvip":false,"replies":[{"id":"48515","content":"1. ä¸æ˜¯ï¼Œæ˜¯å› ä¸ºæ¯ä¸ªçº¿ç¨‹æ— æ³•é¡¾å¿Œå…¶ä»–çº¿ç¨‹çš„æ¶ˆè´¹è¿›åº¦<br>2. å•çº¿ç¨‹ä¸ä¼šçš„ï¼Œæ¯•ç«Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹å˜›ã€‚<br>3. è‡ªåŠ¨æäº¤ç®€å•æ–¹ä¾¿ï¼Œè¿˜èƒ½å¤Ÿè‡ªåŠ¨é‡è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1567386172,"ip_address":"","comment_id":129693,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862188827","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå…³äºå¤šçº¿ç¨‹æ¶ˆè´¹çš„é—®é¢˜æˆ‘ä¸€ç›´ä¸å¤ªæ˜ç™½<br>1ã€ä¸ºä»€ä¹ˆè‡ªåŠ¨æäº¤ä¼šå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼Œæ˜¯å› ä¸ºè‡ªåŠ¨æäº¤ä¸ç®¡æ¶ˆè´¹è€…ç«¯æœ‰æ²¡æœ‰å®Œå…¨æ¶ˆè´¹æˆåŠŸéƒ½ä¼šæäº¤offsetå—ï¼Ÿ<br>2ã€å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆå•çº¿ç¨‹çš„è‡ªåŠ¨æäº¤ä¹Ÿä¼šå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±å§ï¼Œä¸€æ ·çš„é“ç†ï¼Œå¦‚æœæ¶ˆè´¹è€…ç«¯å› ä¸ºä¸šåŠ¡å¼‚å¸¸æ¶ˆè´¹å¤±è´¥äº†ï¼Œå®ƒä¹ŸæŠŠoffsetä¸Šä¼ äº†ã€‚<br>3ã€å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œè‡ªåŠ¨æäº¤è¿˜æœ‰ä»€ä¹ˆä¸šåŠ¡ä»·å€¼å‘¢ï¼Ÿ<br>æ±‚è€å¸ˆè§£æƒ‘ï¼Œè°¢è°¢","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465606,"discussion_content":"1. ä¸æ˜¯ï¼Œæ˜¯å› ä¸ºæ¯ä¸ªçº¿ç¨‹æ— æ³•é¡¾å¿Œå…¶ä»–çº¿ç¨‹çš„æ¶ˆè´¹è¿›åº¦\n2. å•çº¿ç¨‹ä¸ä¼šçš„ï¼Œæ¯•ç«Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹å˜›ã€‚\n3. è‡ªåŠ¨æäº¤ç®€å•æ–¹ä¾¿ï¼Œè¿˜èƒ½å¤Ÿè‡ªåŠ¨é‡è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567386172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127529,"user_name":"å®‰é™","can_delete":false,"product_type":"c1","uid":1212634,"ip_address":"","ucode":"7C4DB6D81A48EB","user_header":"https://static001.geekbang.org/account/avatar/00/12/80/da/9c0c458c.jpg","comment_is_top":false,"comment_ctime":1566735154,"is_pvip":false,"replies":[{"id":"47264","content":"è‡ªåŠ¨æäº¤æœ‰å…¶åº”ç”¨çš„åœºæ™¯ã€‚å¦‚æœä½ å¹¶ä¸åœ¨ä¹æ¶ˆæ¯é‡å¤çš„è¯ï¼Œä½¿ç”¨è‡ªåŠ¨æäº¤æ˜¯å¾ˆçœäº‹çš„åšæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566780996,"ip_address":"","comment_id":127529,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5861702450","product_id":100029201,"comment_content":"é—®ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆå¼ºè°ƒåªæœ‰åœ¨å¤šçº¿ç¨‹æ¶ˆè´¹çš„æ—¶å€™è¦å°†è‡ªåŠ¨æäº¤æ”¹æˆæ‰‹åŠ¨æäº¤ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£æ¶ˆè´¹ç¨‹åºå…¶å®éƒ½åº”è¯¥å°†è‡ªåŠ¨æäº¤æ”¹æˆæ‰‹åŠ¨æäº¤ï¼Œè¿™è¾¹æœ‰ä»€ä¹ˆè€ƒè™‘å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464536,"discussion_content":"è‡ªåŠ¨æäº¤æœ‰å…¶åº”ç”¨çš„åœºæ™¯ã€‚å¦‚æœä½ å¹¶ä¸åœ¨ä¹æ¶ˆæ¯é‡å¤çš„è¯ï¼Œä½¿ç”¨è‡ªåŠ¨æäº¤æ˜¯å¾ˆçœäº‹çš„åšæ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566780996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127330,"user_name":"çŸ¥è¡Œåˆä¸€","can_delete":false,"product_type":"c1","uid":1090784,"ip_address":"","ucode":"563C4A71D80DA1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJwQvLGE4dMsF4JU0svW3DtGbodpjskbY65FdwF13JdtBYZfgL2IXHlHrdejWzHdjT0RibEIfib4QYA/132","comment_is_top":false,"comment_ctime":1566656360,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5861623656","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè¯¾åé—®é¢˜ä¼šå‡ºä¸€èŠ‚è¯¾ç»Ÿä¸€è§£ç­”å—","like_count":1,"discussions":[{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49427,"discussion_content":"å³å¯æ—¶é—´ä¸“æ åŸºæœ¬ä¸ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573578377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123711,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1565746075,"is_pvip":false,"replies":[{"id":"45641","content":"æœ€æ–°ä½ç§»å°±æ˜¯1äº†ï¼Œå› ä¸ºæ­¤æ—¶åˆ†åŒº1çš„æœ€æ–°ä½ç§»å·²ç»å˜æ›´ä¸º1äº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565876516,"ip_address":"","comment_id":123711,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5860713371","product_id":100029201,"comment_content":"å½“å¢åŠ ä¸»é¢˜åˆ†åŒºåï¼Œåœ¨æŸæ®µâ€œä¸å‡‘å·§â€çš„æ—¶é—´é—´éš”åï¼ŒProducer å…ˆäº Consumer æ„ŸçŸ¥åˆ°æ–°å¢åŠ çš„åˆ†åŒºï¼Œè€Œ Consumer è®¾ç½®çš„æ˜¯â€œä»æœ€æ–°ä½ç§»å¤„â€å¼€å§‹è¯»å–æ¶ˆæ¯ï¼Œå› æ­¤åœ¨ Consumer æ„ŸçŸ¥åˆ°æ–°åˆ†åŒºå‰ï¼ŒProducer å‘é€çš„è¿™äº›æ¶ˆæ¯å°±å…¨éƒ¨â€œä¸¢å¤±â€äº†ï¼Œæˆ–è€…è¯´ Consumer æ— æ³•è¯»å–åˆ°è¿™äº›æ¶ˆæ¯ã€‚<br>è¿™æ®µæè¿°æ²¡å¤ªæ˜ç™½ï¼Œå‡å¦‚ç°åœ¨åªæœ‰ä¸€ä¸ªåˆ†åŒº0ï¼Œæ–°å¢äº†ä¸€ä¸ªåˆ†åŒº1ï¼Œå¹¶ä¸”producerå…ˆæ„ŸçŸ¥ä¸”å‘è¿™ä¸ªåˆ†åŒºå†™å…¥äº†ä¸€ä¸ªæ¶ˆæ¯ï¼Œåœ¨åˆ†åŒºçš„å¼€å§‹ä½ç½®0ï¼Œconsumeréšåä¹Ÿæ„ŸçŸ¥åˆ°äº†ï¼Œä»æœ€æ–°ä½ç§»å¤„å¼€å§‹è¯»ï¼Œè¿™ä¸ªæœ€æ–°ä½ç§»å¤„æŒ‡å“ªé‡Œï¼Ÿconsumerä¸æ˜¯ä»åˆ†åŒº1çš„ä½ç½®0æ¶ˆè´¹æ¶ˆæ¯çš„å˜›ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462782,"discussion_content":"æœ€æ–°ä½ç§»å°±æ˜¯1äº†ï¼Œå› ä¸ºæ­¤æ—¶åˆ†åŒº1çš„æœ€æ–°ä½ç§»å·²ç»å˜æ›´ä¸º1äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565876516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49428,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573578659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5031,"discussion_content":"å¤šè°¢è€å¸ˆçš„ç­”ç–‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565881793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116824,"user_name":"ç‡•ç¾½é˜³","can_delete":false,"product_type":"c1","uid":1015063,"ip_address":"","ucode":"AF9430187F66EE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/17/179b24f4.jpg","comment_is_top":false,"comment_ctime":1563929898,"is_pvip":false,"replies":[{"id":"42900","content":"æ— æ³•çŸ¥é“äº†ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564015802,"ip_address":"","comment_id":116824,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858897194","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œproducerå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œbrokeræ­£å¸¸commitï¼Œä½†æ˜¯ç”±äºproduceræŒ‚äº†ï¼Œproduceræ²¡æ”¶åˆ°å“åº”ã€‚produceré‡æ–°å¯åŠ¨åï¼Œå¦‚ä½•çŸ¥é“ä¸Šæ¬¡æ¶ˆæ¯çš„å‘é€ç»“æœ?","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459697,"discussion_content":"æ— æ³•çŸ¥é“äº†ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564015802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114997,"user_name":"é‡æ€§åŠ›é‡","can_delete":false,"product_type":"c1","uid":1578718,"ip_address":"","ucode":"B6C152FA332B14","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/diaGeaLuw3oTAcyFMnkiaVur33RXdUZL8z1LtfHibIyh4r629YSexJQz5JXYjBH7v9rwHH7ham5CzqDZF75QnGIwg/132","comment_is_top":false,"comment_ctime":1563446603,"is_pvip":false,"replies":[{"id":"41997","content":"å‘é€å¤±è´¥åä¼šæ‹‰å–æœ€æ–°çš„å…ƒæ•°æ®ï¼Œç„¶åè·çŸ¥æ–°çš„leader","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563458849,"ip_address":"","comment_id":114997,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858413899","product_id":100029201,"comment_content":"producerå®ä¾‹åŒ–çš„æ—¶å€™éœ€è¦æŒ‡å®šæ‰€æœ‰topicç›¸å…³çš„leader brokerçš„IPï¼Œé‚£ä¹ˆå‘ç”Ÿé‡æ–°é€‰ä¸»ï¼Œproducerå¦‚ä½•çŸ¥é“æ–°ä¸»çš„IPå¹¶è¿›è¡Œè·¯ç”±å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458921,"discussion_content":"å‘é€å¤±è´¥åä¼šæ‹‰å–æœ€æ–°çš„å…ƒæ•°æ®ï¼Œç„¶åè·çŸ¥æ–°çš„leader","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563458849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113055,"user_name":"å¤–æ˜Ÿäºº","can_delete":false,"product_type":"c1","uid":1132861,"ip_address":"","ucode":"D8469B13F2AB37","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/3d/4ac37cc2.jpg","comment_is_top":false,"comment_ctime":1562892361,"is_pvip":false,"replies":[{"id":"41137","content":"1. å¯ä»¥è®¾ç½®æˆ2ï¼Œåªæ˜¯ä»»ä½•å‰¯æœ¬å°±ä¸èƒ½æŒ‚äº†ï¼Œå¦åˆ™å°±ä¸èƒ½ç”¨äº†<br>2. æ„Ÿè§‰æ˜¯flinkå¯¹kafka leaderå˜æ›´æ²¡æœ‰ç”Ÿæ•ˆå¯¼è‡´çš„ï¼Œå’Œkafkaå…³ç³»ä¸å¤§","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562893974,"ip_address":"","comment_id":113055,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857859657","product_id":100029201,"comment_content":"ä½ å¥½ï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜è¯·æ•™ä¸‹æ‚¨ã€‚<br>1. æˆ‘ä»¬ç”Ÿäº§ä¸Šæœ‰çš„topicçš„replicaæ˜¯2ï¼Œé‚£min.insync.replicaæ˜¯ä¸æ˜¯å°±ä¸é€‚åˆè®¾ç½®ä¸º2äº†ï¼Ÿ<br>2. æˆ‘ä»¬åœ¨ç”¨flinkä¸¤é˜¶æ®µæäº¤æ—¶ï¼Œå‘ç°ï¼Œåœ¨é‡å¯brokeræ—¶ï¼Œä»»åŠ¡ä¼šæŠ¥é”™ï¼šthe server is not the leader for that topic-partitionï¼Œè¯·é—®ä¸‹æ˜¯ä¸ºä»€ä¹ˆå•Šï¼Ÿæˆ‘çœ‹é€»è¾‘å¼€å§‹äº‹åŠ¡retriesä¼šè®¾ç½®ä¸ºint.maxï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯ç‰ˆæœ¬æ˜¯011","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458037,"discussion_content":"1. å¯ä»¥è®¾ç½®æˆ2ï¼Œåªæ˜¯ä»»ä½•å‰¯æœ¬å°±ä¸èƒ½æŒ‚äº†ï¼Œå¦åˆ™å°±ä¸èƒ½ç”¨äº†\n2. æ„Ÿè§‰æ˜¯flinkå¯¹kafka leaderå˜æ›´æ²¡æœ‰ç”Ÿæ•ˆå¯¼è‡´çš„ï¼Œå’Œkafkaå…³ç³»ä¸å¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562893974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109301,"user_name":"ç‹å¿—æ°","can_delete":false,"product_type":"c1","uid":1074791,"ip_address":"","ucode":"DAC170C33EDDCF","user_header":"https://static001.geekbang.org/account/avatar/00/10/66/67/85709c6b.jpg","comment_is_top":false,"comment_ctime":1561994864,"is_pvip":false,"replies":[{"id":"39590","content":"å—¯å—¯ï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ç¡®å»¶æ—¶ä¼šå¢åŠ å¾ˆå¤šï¼Œä¸»è¦æ˜¯followerå¼‚æ­¥æ‹‰å–éœ€è¦èŠ±è´¹å¾ˆé•¿çš„æ—¶é—´","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562028007,"ip_address":"","comment_id":109301,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856962160","product_id":100029201,"comment_content":"acks=allï¼Œé‚£æ€§èƒ½ä¸æ˜¯ä¸‹é™å¾ˆå‰å®³äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456344,"discussion_content":"å—¯å—¯ï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ç¡®å»¶æ—¶ä¼šå¢åŠ å¾ˆå¤šï¼Œä¸»è¦æ˜¯followerå¼‚æ­¥æ‹‰å–éœ€è¦èŠ±è´¹å¾ˆé•¿çš„æ—¶é—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562028007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107968,"user_name":"guoyinbo2019","can_delete":false,"product_type":"c1","uid":1445399,"ip_address":"","ucode":"19D86CB3E42839","user_header":"https://static001.geekbang.org/account/avatar/00/16/0e/17/e16e679f.jpg","comment_is_top":false,"comment_ctime":1561642283,"is_pvip":false,"replies":[{"id":"39123","content":"1ã€replication.factorç”¨äºç¡®å®šå‰¯æœ¬æ•°ã€‚è¯¥å‚æ•°æœ¬èº«ä¸ä¼šå‡å°‘ã€‚#ISR  &lt; replication.factoræ—¶ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ï¼Œåªè¦#ISR &gt;= min.insync.replicaså³å¯ã€‚<br>2ã€min.insync.replicasé™å®šäº†æœ€å°‘è¦å†™å…¥ISRå‰¯æœ¬çš„ä¸ªæ•°ï¼Œå®ƒ å’Œacks=allä¸çŸ›ç›¾ã€‚<br>3ã€å—¯å—¯ï¼Œå·®ä¸å¤šã€‚å…³é”®æ˜¯è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬åˆ°åº•åº”è¯¥æäº¤å“ªä¸ªä½ç§»åˆé€‚ï¼Ÿæäº¤1ï¼Œé‚£ä¹ˆoffset=2çš„æ¶ˆæ¯æœ‰å¯èƒ½é‡è¯•ï¼›æäº¤2ï¼Œé‚£ä¹ˆoffset=1çš„æ¶ˆæ¯å¯èƒ½ä¸¢å¤±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561680443,"ip_address":"","comment_id":107968,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5856609579","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œæˆ‘æœ‰ä»¥ä¸‹ä¸¤ä¸ªç–‘é—®<br>ä¸€ã€å…³äºæœ€ä½³å®è·µ<br>2ã€è®¾ç½®ack=allï¼Œè¿™é‡Œçš„allæŒ‡çš„ä»»ä¸€æ—¶åˆ»ä¸‹æ‰€æœ‰å­˜æ´»çš„follower ä¹ˆ?æ¯”å¦‚å¼€å§‹follower=3ï¼Œå½“æœ‰ä¸€å°å‰¯æœ¬æŒ‚æ‰æ˜¯ï¼Œack=allæ„å‘³ç€follower=2<br>5ã€  replication.factor &gt;= 3ï¼Œè®¾ç½®å‰¯æœ¬ä¸ªæ•°å§ï¼Œå¦‚æœç”±äºå‰¯æœ¬æ‰€åœ¨brokeræŒ‚äº†ï¼Œè¿™ä¸ªå‚æ•°æ£€æµ‹ä¼šè‡ªåŠ¨å‡å°‘ä¹ˆï¼Ÿ<br>ä¾‹å¦‚ï¼šè®¾ç½®replication.factor = 3ï¼Œæœ‰3å°brokerï¼Œè‹¥æœ‰ä¸€å°brokeræŒ‚äº†ï¼Œkafkaä¼šå¦‚ä½•å¤„ç†ï¼Œä¼šæŒ‰ç…§replication.factor = 2è¿›è¡ŒåŒæ­¥æ•°æ®ä¹ˆï¼Œ è¿˜æ˜¯å½“å‘ç°å‰¯æœ¬æ•°&lt; replication.factorçš„æ—¶å€™å°±ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œ è¿˜æ˜¯å…¶ä»–ä»€ä¹ˆç­–ç•¥å‘¢ï¼Ÿ<br>6ã€min.insync.replicas &gt; 1 è¿™ä¸ªä¼šå’Œä¸Šé¢å‚æ•°çŸ›ç›¾ä¹ˆ<br>ä»¥ä¸Šå‡ ä¸ª å‚æ•°éƒ½å‚ä¸çš„â€œå·²æäº¤â€çš„å®šä¹‰ï¼Œå½“å‚æ•°ä¸èƒ½å…¨éƒ¨æ»¡è¶³çš„æ—¶å€™ï¼Œè¿™ä¸ªâ€œå·²æäº¤â€æ˜¯æ€ä¹ˆå®šä¹‰çš„å‘¢ï¼Œ<br>å„å‚æ•°åœ¨â€œå·²æäº¤â€å®šä¹‰ä¸­æ˜¯å¦æœ‰ä¼˜å…ˆçº§å‘¢ï¼Œå¦‚æœ‰ï¼Œä¼˜å…ˆçº§æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>äºŒã€å…³äºå•consumerï¼Œå¤šçº¿ç¨‹æ¶ˆè´¹é—®é¢˜<br>å¯¹äºè€å¸ˆè¯´çš„â€œé¿å…æ— æ¶ˆè´¹æ¶ˆæ¯ä¸¢å¤±å¾ˆç®€å•ï¼Œä½†ææ˜“å‡ºç°æ¶ˆæ¯è¢«æ¶ˆè´¹äº†å¤šæ¬¡çš„æƒ…å†µã€‚â€æœ‰äº›ä¸ç†è§£<br>æˆ‘è®¤ä¸ºå•consumerï¼Œå¤šçº¿ç¨‹æ¶ˆè´¹æ—¶å€™å®¹æ˜“äº§ç”Ÿæ¶ˆæ¯ä¸¢å¤±<br>ä¾‹å¦‚ä¸€ä¸ªconsumer2ä¸ªçº¿ç¨‹ï¼Œthread1æ¶ˆè´¹offset=1 æ¶ˆæ¯ï¼Œthread2æ¶ˆè´¹offset=2 æ¶ˆæ¯ï¼Œthread2å¾ˆå¿«å¤„ç†å®Œäº†æ¶ˆæ¯å¹¶æˆåŠŸæäº¤äº†offset, ä½†æ˜¯thread1ç”±äºæŸç§åŸå› å¤„ç†å¤±è´¥äº†ï¼Œæ­¤æ—¶offset=1 çš„æ¶ˆæ¯å¯¹äºconsumeræ¥è¯´å°±ä¸¢äº†ã€‚<br>ä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹ï¼Œè¿˜è¯·è€å¸ˆè§£ç­”ã€‚<br>","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455765,"discussion_content":"1ã€replication.factorç”¨äºç¡®å®šå‰¯æœ¬æ•°ã€‚è¯¥å‚æ•°æœ¬èº«ä¸ä¼šå‡å°‘ã€‚#ISR  &amp;lt; replication.factoræ—¶ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ï¼Œåªè¦#ISR &amp;gt;= min.insync.replicaså³å¯ã€‚\n2ã€min.insync.replicasé™å®šäº†æœ€å°‘è¦å†™å…¥ISRå‰¯æœ¬çš„ä¸ªæ•°ï¼Œå®ƒ å’Œacks=allä¸çŸ›ç›¾ã€‚\n3ã€å—¯å—¯ï¼Œå·®ä¸å¤šã€‚å…³é”®æ˜¯è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬åˆ°åº•åº”è¯¥æäº¤å“ªä¸ªä½ç§»åˆé€‚ï¼Ÿæäº¤1ï¼Œé‚£ä¹ˆoffset=2çš„æ¶ˆæ¯æœ‰å¯èƒ½é‡è¯•ï¼›æäº¤2ï¼Œé‚£ä¹ˆoffset=1çš„æ¶ˆæ¯å¯èƒ½ä¸¢å¤±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561680443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328907,"discussion_content":"è€å¸ˆ ç¬¬ä¸‰ä¸ªå›ç­” å°±æ˜¯ å…¶å®å¤šçº¿ç¨‹æ¶ˆè´¹ offsetæ ¹æœ¬ä¸å›ºå®šï¼Œå¯èƒ½å‡ºç°ä¸¢å¤±å’Œé‡å¤æ¶ˆè´¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606269721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107744,"user_name":"Icedmaze","can_delete":false,"product_type":"c1","uid":1104245,"ip_address":"","ucode":"DC05117685CAB5","user_header":"https://static001.geekbang.org/account/avatar/00/10/d9/75/3598e0de.jpg","comment_is_top":false,"comment_ctime":1561602849,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5856570145","product_id":100029201,"comment_content":"ç›®å‰æƒ³åˆ°çš„æ–¹æ³•æœ‰ä¸¤ç§<br>ä¸€ç§æ˜¯åœ¨æ¶ˆè´¹ç«¯åˆå§‹åŒ–çš„æ—¶å€™é…ç½®â€œä»æ–°ä½ç§»å¤„å¼€å§‹æ¶ˆè´¹â€ï¼Œå½“å„ä¸ªåˆ†åŒºè®°å½•äº†ä½ç§»ä¿¡æ¯åï¼Œå†å°†é…ç½®æ”¹ä¸ºâ€œä»æœ€æ—©ä½ç§»å¤„å¼€å§‹æ¶ˆè´¹â€ç­–ç•¥ï¼Œåˆ©ç”¨å·²äº§ç”Ÿäº†æ ‡å¿—ä½çš„åˆ†åŒºä¸å—æ¶ˆè´¹ç­–ç•¥å½±å“çš„ç‰¹æ€§ï¼Œä¿è¯åœ¨ä¹‹åçš„ä¸šåŠ¡ä¸­ï¼Œæ–°å¢åˆ†åŒºéƒ½ä¸ä¼šäº§ç”Ÿâ€œä¸¢å¤±â€é—®é¢˜ã€‚<br>ç¬¬äºŒç§æ–¹æ³•æ˜¯å½“æ–°å¢åˆ†åŒºåï¼Œåˆ©ç”¨æ¶ˆè´¹ç«¯ä¼šäº§ç”Ÿrebalanceäº‹ä»¶çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨rebalanceçš„æ—¶å€™åˆ¤æ–­è¯¥åˆ†åŒºæœ‰æ— æ¶ˆè´¹ä½ç§»ï¼Œå¦‚æœæ— ä½ç§»ä½ï¼Œåˆ™å¼ºåˆ¶å°†ä½ç§»ä½è®¾ç½®ä¸º0ä»å¤´å¼€å§‹æ¶ˆè´¹ã€‚ï¼ˆè¯¥æ–¹æ³•çº¯å±çŒœæµ‹ï¼‰","like_count":1,"discussions":[{"author":{"id":1104245,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d9/75/3598e0de.jpg","nickname":"Icedmaze","note":"","ucode":"DC05117685CAB5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469,"discussion_content":"è¿˜æœ‰è¯„è®ºä¸­æåˆ°çš„æ–°å¢åˆ†åŒºçš„çš„æ—¶å€™ï¼Œæš‚åœæ¶ˆè´¹ç«¯çš„æ–¹æ³•ï¼Œä¸ªäººè®¤ä¸ºå¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå› ä¸ºæœ¬è´¨ä¸Šè¿™ä¼šå¯¼è‡´æ¯æ¬¡æ–°å¢ä¸€ä¸ªåˆ†åŒºï¼Œéƒ½éœ€è¦å¯¹æ¶ˆè´¹ç«¯è¿›è¡Œæš‚åœæ“ä½œï¼Œå¦‚æœè¯¥ä¸»é¢˜æœ‰è®¸å¤šæ¶ˆè´¹è€…çš„è¯ï¼Œæ¯æ¬¡æ–°å¢åˆ†åŒºéƒ½ä¼šå¾ˆå®¹æ˜“å‡ºç°é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561605004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107662,"user_name":"é»‘å´½","can_delete":false,"product_type":"c1","uid":1024159,"ip_address":"","ucode":"F31A4102EE4DA8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/9f/71345740.jpg","comment_is_top":false,"comment_ctime":1561594654,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856561950","product_id":100029201,"comment_content":"å¥½é—®é¢˜.å¾ˆå¤šäººæ²¡æœ‰æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯ä»æœ€è€æ¶ˆè´¹è€…ï¼Œå¦å¤–å¯ä»¥rebalanceæ—¶å€™åšã€‚ç”±ä»æœ€è€æ¶ˆè´¹åœ¨é¦–æ¬¡å¯åŠ¨å¯èƒ½å¯¼è‡´pagecache in&#47;outå¢å¤šï¼Œååä¸‹é™ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©åœ¨rebalanceæ—¶å€™åš","like_count":1},{"had_liked":false,"id":107656,"user_name":"å¤è›°","can_delete":false,"product_type":"c1","uid":1285244,"ip_address":"","ucode":"48C1616B27A99F","user_header":"https://static001.geekbang.org/account/avatar/00/13/9c/7c/c92f8a53.jpg","comment_is_top":false,"comment_ctime":1561594043,"is_pvip":false,"replies":[{"id":"38928","content":"å®ƒä»¬éƒ½æ˜¯å¸®åŠ©æå‡æ¶ˆæ¯æŒä¹…åŒ–ç¨‹åº¦ç”¨çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561595741,"ip_address":"","comment_id":107656,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856561339","product_id":100029201,"comment_content":"è€å¸ˆï¼Œackæ˜¯ä¸æ˜¯é’ˆå¯¹çš„brokerçº§åˆ«ï¼Œè€Œmin.insync.replica é’ˆå¯¹çš„æ˜¯åˆ†åŒºä¸‹çš„å‰¯æœ¬ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455609,"discussion_content":"å®ƒä»¬éƒ½æ˜¯å¸®åŠ©æå‡æ¶ˆæ¯æŒä¹…åŒ–ç¨‹åº¦ç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561595741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107651,"user_name":"ç‰å‰‘å†°é”‹","can_delete":false,"product_type":"c1","uid":1214202,"ip_address":"","ucode":"8EA56A71BA5B22","user_header":"https://static001.geekbang.org/account/avatar/00/12/86/fa/4bcd7365.jpg","comment_is_top":false,"comment_ctime":1561593284,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856560580","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œé’ˆå¯¹producerä¸ºfilebeatæœ‰ä»€ä¹ˆæ˜¯å»ºè®®é…ç½®çš„å—ï¼Ÿæˆ‘ä»¬ç”Ÿäº§å¥½åƒæ²¡æœ‰é…ç½®è¿™æ–¹é¢çš„å‚æ•°","like_count":1},{"had_liked":false,"id":357836,"user_name":"tuyu","can_delete":false,"product_type":"c1","uid":1448863,"ip_address":"æµ™æ±Ÿ","ucode":"B235325B541408","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/BIRpwViaN51yynIeFonD7QRlwDCVtKibrG956NTxzEqibOZZVjhMMgibOPmd3VicfYxpknZsic1oJq8KicZvXkmmiajuQg/132","comment_is_top":false,"comment_ctime":1663670267,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663670267","product_id":100029201,"comment_content":"&quot;å‡å¦‚ä½ çš„æ¶ˆæ¯ä¿å­˜åœ¨ N ä¸ª Kafka Broker ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªå‰ææ¡ä»¶å°±æ˜¯è¿™ N ä¸ª Broker ä¸­è‡³å°‘æœ‰ 1 ä¸ªå­˜æ´»ã€‚åªè¦è¿™ä¸ªæ¡ä»¶æˆç«‹ï¼ŒKafka å°±èƒ½ä¿è¯ä½ çš„è¿™æ¡æ¶ˆæ¯æ°¸è¿œä¸ä¼šä¸¢å¤±&quot;, å¦‚æœæ˜¯leaderæŒ‚äº†, é‚£å²‚ä¸æ˜¯è¦ä¸¢å¤±, åªæœ‰ä¸€ä¸ªfollowerå­˜æ´»","like_count":0},{"had_liked":false,"id":346746,"user_name":"æœ‰ç‚¹æ€€æ—§","can_delete":false,"product_type":"c1","uid":2727663,"ip_address":"","ucode":"C774EEF86D181B","user_header":"https://static001.geekbang.org/account/avatar/00/29/9e/ef/b5c9f52e.jpg","comment_is_top":false,"comment_ctime":1653395072,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653395072","product_id":100029201,"comment_content":"è€å¸ˆæœ‰æ²¡æœ‰åˆ©ç”¨pythonæ¥å®ç°åˆ©ç”¨kafkaçš„å­¦ä¹ èµ„æ–™","like_count":0},{"had_liked":false,"id":344724,"user_name":"å°èœé¸Ÿ","can_delete":false,"product_type":"c1","uid":1256026,"ip_address":"","ucode":"3210C8528E1912","user_header":"https://static001.geekbang.org/account/avatar/00/13/2a/5a/da723ac4.jpg","comment_is_top":false,"comment_ctime":1651739145,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1651739145","product_id":100029201,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œçœ‹æ–‡ç« è¯´åˆ°çš„æ¶ˆæ¯ä¸¢å¤±ä¸»è¦è¿˜æ˜¯â€œä½¿ç”¨å§¿åŠ¿â€ä¸å¯¹çš„åŸå› å¯¼è‡´çš„ï¼Œä½†ä»brokerè½ç›˜æœºåˆ¶çœ‹ï¼Œå†™å…¥pagecache,ç³»ç»Ÿåˆ·ç›˜ä»¥å‰ï¼Œå¦‚æœå‡ºç°å®•æœºï¼Œä¸ä¹Ÿä¼šé€ æˆæ¶ˆæ¯ä¸¢å¤±ä¹ˆ","like_count":0},{"had_liked":false,"id":339809,"user_name":"i_chase","can_delete":false,"product_type":"c1","uid":1795511,"ip_address":"","ucode":"09C41C863F4EA3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/b7/058276dc.jpg","comment_is_top":false,"comment_ctime":1648397120,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648397120","product_id":100029201,"comment_content":"æœ€åçš„æ€è€ƒé¢˜æœ‰ç­”æ¡ˆå—","like_count":0},{"had_liked":false,"id":339460,"user_name":"å¤å¤©","can_delete":false,"product_type":"c1","uid":2542376,"ip_address":"","ucode":"5F224DDAC94DFF","user_header":"https://static001.geekbang.org/account/avatar/00/26/cb/28/21a8a29e.jpg","comment_is_top":false,"comment_ctime":1648112820,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648112820","product_id":100029201,"comment_content":"acks<br>The number of acknowledgments the producer requires the leader to have received before considering a request complete. This controls the durability of records that are sent. The following settings are allowed:<br><br>acks=0 If set to zero then the producer will not wait for any acknowledgment from the server at all. The record will be immediately added to the socket buffer and considered sent. No guarantee can be made that the server has received the record in this case, and the retries configuration will not take effect (as the client won&#39;t generally know of any failures). The offset given back for each record will always be set to -1.<br>acks=1 This will mean the leader will write the record to its local log but will respond without awaiting full acknowledgement from all followers. In this case should the leader fail immediately after acknowledging the record but before the followers have replicated it then the record will be lost.<br>acks=all This means the leader will wait for the full set of in-sync replicas to acknowledge the record. This guarantees that the record will not be lost as long as at least one in-sync replica remains alive. This is the strongest available guarantee. This is equivalent to the acks=-1 setting.<br><br>acks 0 è¡¨ç¤º producer ä¸ç­‰å¾…ç¡®è®¤ã€‚å†™åˆ°ç¼“å†²åŒºå°±è¿”å›ã€‚<br><br>acks 1 è¡¨ç¤º partion leader è½ç›˜åè¿”å›<br><br>acks allï¼ˆ-1ï¼‰ è¡¨ç¤º partion leader è½ç›˜ + followers åŒæ­¥åè¿”å›","like_count":0},{"had_liked":false,"id":336581,"user_name":"ç‹å¤§å–µ","can_delete":false,"product_type":"c1","uid":1109528,"ip_address":"","ucode":"C14AAE3ED964DE","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/18/65e89d9c.jpg","comment_is_top":false,"comment_ctime":1646224401,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646224401","product_id":100029201,"comment_content":"consumeråœ¨è¿›è¡Œåˆ†åŒºrebalanceæ—¶ï¼Œå¦‚æœæ˜¯æ–°å¢åˆ†åŒºï¼Œå…ˆå»è·å–offsetå€¼ï¼Œå¦‚æœæ²¡æœ‰å°±ä»æœ€æ—©çš„å¼€å§‹æ¶ˆè´¹ã€‚<br>","like_count":0},{"had_liked":false,"id":327028,"user_name":"æ¾é¼ é±¼","can_delete":false,"product_type":"c1","uid":1815185,"ip_address":"","ucode":"C0E87CCF71DB44","user_header":"","comment_is_top":false,"comment_ctime":1639854705,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1639854705","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå½“producerå› ä¸ºç½‘ç»œæŠ–åŠ¨retryæŸä¸€æ¡æ¶ˆæ¯çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æ¶ˆæ¯çš„é¡ºåºå°±æ²¡åŠæ³•ä¿è¯äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":325440,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1638957209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638957209","product_id":100029201,"comment_content":"è®¾ç½® acks = all<br>ä½¿ç”¨ producer.send(msg, callback)","like_count":0},{"had_liked":false,"id":325427,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1638955521,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638955521","product_id":100029201,"comment_content":"Kafka åªå¯¹â€œå·²æäº¤â€çš„æ¶ˆæ¯ï¼ˆcommitted messageï¼‰åšæœ‰é™åº¦çš„æŒä¹…åŒ–ä¿è¯ã€‚","like_count":0},{"had_liked":false,"id":324408,"user_name":"ç‹¬å­¤ä¹å‰‘","can_delete":false,"product_type":"c1","uid":2230909,"ip_address":"","ucode":"6C1253E2B8C1D4","user_header":"https://static001.geekbang.org/account/avatar/00/22/0a/7d/ac715471.jpg","comment_is_top":false,"comment_ctime":1638418574,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638418574","product_id":100029201,"comment_content":"æ¶ˆæ¯æ— ä¸¢å¤±.é…ç½®(ç”Ÿäº§è€…&amp;æ¶ˆè´¹è€…&amp;æœåŠ¡ç«¯).å…³é”®ç‚¹æ€»ç»“ä¸ºä¸€å¥è¯ï¼šå‘é€+æ¥æ”¶+å†™å…¥+å†—ä½™+ä¸è¦è‡ªåŠ¨æäº¤â€œæ¶ˆè´¹ä½ç§»â€","like_count":0},{"had_liked":false,"id":321446,"user_name":"Geek_f9d469","can_delete":false,"product_type":"c1","uid":2842794,"ip_address":"","ucode":"0A14D20CB927F6","user_header":"","comment_is_top":false,"comment_ctime":1636880704,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636880704","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼š<br>é—®é¢˜èƒŒæ™¯ï¼šæœ‰ä¸€ä¸ª topic å¼€äº†ä¸‰ä¸ªåˆ†åŒºï¼Œæœ‰ä¸¤ä¸ªæ¶ˆè´¹ç»„ g1 å’Œ g2ï¼Œæ¯ä¸ªæ¶ˆè´¹ç»„æœ‰ä¸‰ä¸ª KafkaConsumerï¼Œæœ€å¼€å§‹å¯åŠ¨æ¶ˆè´¹ç»„ g1 æ¶ˆè´¹ï¼Œoffset è®¾ç½®æˆ earliestã€‚æ¶ˆè´¹ä¸€æ®µæ—¶é—´åï¼Œå¼€å¯äº†æ¶ˆè´¹ç»„ g2ï¼Œoffset è®¾ç½®æˆ <br> lastestã€‚æ¶ˆè´¹ç»„ g1 å’Œ g2 å…±åŒæ¶ˆè´¹äº†ä¸€æ®µæ—¶é—´åï¼Œ æŠŠæ¶ˆè´¹ç»„ g1 å…³é—­ï¼Œå‰©ä¸‹ g2 åœ¨æ¶ˆè´¹ï¼Œä½†æ­¤æ—¶å‡ºç°äº†æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µã€‚<br>è¯·æ•™ä¸‹è€å¸ˆï¼Œè¿™ä¸ªæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„æ¶ˆæ¯ä¸¢å¤±çš„ï¼Œæ€»æ„Ÿè§‰è¿™ç§æ€è·¯ä¸ä¼šå‡ºç°æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µã€‚ ","like_count":0},{"had_liked":false,"id":320896,"user_name":"ğŸ‘€","can_delete":false,"product_type":"c1","uid":1979938,"ip_address":"","ucode":"6CE9845298DC4D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/36/22/c0b183ab.jpg","comment_is_top":false,"comment_ctime":1636546536,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636546536","product_id":100029201,"comment_content":"Kafka æ¶ˆè´¹è€…æ˜¯å¤„ç†å®Œæ¶ˆæ¯æ‰æäº¤ä½ç§»å§ï¼Œæ‰€ä»¥è‡ªåŠ¨æäº¤ä¸ä¼šå‡ºç°ä¸¢æ¶ˆæ¯","like_count":0},{"had_liked":false,"id":317728,"user_name":"KWğŸ’¤","can_delete":false,"product_type":"c1","uid":1109389,"ip_address":"","ucode":"290DD7016F4EE0","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/8d/377c106a.jpg","comment_is_top":false,"comment_ctime":1634905228,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634905228","product_id":100029201,"comment_content":"æœ€åé‚£ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡é…ç½®è®©producerå…ˆä¸å‘æ¶ˆæ¯åˆ°æ–°å¢çš„åˆ†åŒºï¼Œå¾…comsumeræ„Ÿåº”åˆ°äº†æ–°åˆ†åŒºï¼Œå†æ”¾å¼€producerã€‚ä¸ç„¶åªèƒ½zkè®°å½•æ¯ä¸ªconsumer groupæ¶ˆè´¹çš„æ¶ˆæ¯ä½ç§»é‡ã€‚ä½†å…¶å®è¿™æ˜¯ä¸ªä¸šåŠ¡é—®é¢˜ï¼Œä½ å¾ˆéš¾è¯´æ¸…æ¥šæ­£ç¡®æ€§ï¼Œå‡å¦‚æˆ‘ç°åœ¨æ–°åŠ ä¸€ä¸ªconsumer groupï¼Œè¿™ä¸ªæ–°ä¸šåŠ¡æ˜¯å¸Œæœ›å¤„ç†ä»2021å¹´12æœˆ12æ—¥12æ—¶12åˆ†å¼€å§‹çš„æ–°æ•°æ®çš„ï¼Œä½ ä»11åˆ†å¼€å§‹éƒ¨ç½²æ¶ˆè´¹ç«¯åº”ç”¨ï¼Œé¢„è®¡11åˆ†30ç§’å¯åŠ¨å®Œæˆï¼Œ11åˆ†30ç§’åˆ°12åˆ†è¿™æ®µæ•°æ®é€šè¿‡æ¶ˆæ¯ä¸šåŠ¡æ—¶é—´æˆ³è¿‡æ»¤æ‰ï¼Œä½†å®é™…å¯åŠ¨å®Œæˆå´æ˜¯13åˆ†äº†ï¼Œé‚£12-13åˆ†çš„æ•°æ®ä½ æ€ä¹ˆè·å–ï¼Œè¿™ä¸ªåç§»é‡å¾ˆéš¾ç¡®å®š","like_count":0},{"had_liked":false,"id":309325,"user_name":"Leo","can_delete":false,"product_type":"c1","uid":2649276,"ip_address":"","ucode":"CEBAD9CDCFC2A3","user_header":"https://static001.geekbang.org/account/avatar/00/28/6c/bc/f751786b.jpg","comment_is_top":false,"comment_ctime":1630048436,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630048436","product_id":100029201,"comment_content":"1. ack=all&#47;-1æŒ‡çš„æ˜¯ISRé›†ä¸­çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„å‰¯æœ¬ï¼›åªè¦è®©ISRé›†ä¸­çš„å‰¯æœ¬å…¨éƒ¨å†™å…¥å°±ç®—æˆåŠŸï¼Œæ³¨æ„ä¸æ˜¯æ‰€æœ‰å‰¯æœ¬ï¼Œè¿™ç‚¹æ–‡ç« ä¸­è¡¨è¿°çš„ä¸å¤Ÿæ¸…æ¥šï¼› <br>2. ä¸€å®šè¦è®© replication.factorï¼ˆæ‰€æœ‰å‰¯æœ¬æ•°é‡ï¼‰ &gt; min.insync.replicasï¼ˆISRé›†ä¸­æœ€å°æ•°é‡ï¼‰æ˜¯å› ä¸ºï¼šå¦‚æœè¿™ä¸¤æ•°ç›¸ç­‰ï¼Œé‚£ä¹ˆå½“ack = allæ—¶ï¼Œæœ‰ä¸€ä¸ªå‰¯æœ¬å®•æœºäº†ï¼Œä»è€Œè¾¾ä¸åˆ°min.insync.replicasçš„æ•°é‡å°±æ°¸è¿œä¸ä¼šcall back success;<br>3. ä¸€èˆ¬æ¥è¯´min.insync.replicas &gt;= 2çš„ï¼Œå› ä¸ºISRé›†ä¸­è‹¥åªæœ‰ä¸€ä¸ªå‰¯æœ¬é‚£ä¹ˆå°±æ— æ³•ç»„æˆLeader-Follow,ä¸€å°å‰¯æœ¬è‹¥å†™å…¥åå®•æœºäº†é‚£ä¹ˆæ•°æ®ä¸¢å¤±ï¼Œå°±ä¸æ˜¯é«˜å¯ç”¨äº†ï¼›","like_count":0},{"had_liked":false,"id":305039,"user_name":"Geek6784","can_delete":false,"product_type":"c1","uid":2131762,"ip_address":"","ucode":"89F7946E503F45","user_header":"","comment_is_top":false,"comment_ctime":1627787662,"is_pvip":false,"replies":[{"id":"112541","content":"å—¯å—¯ï¼Œæ˜¯çš„ï¼Œå› ä¸ºæœ¬æ¥ä¹Ÿä¸æ˜¯è¦è¯´è¿™ä¸¤ä»¶äº‹","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1630810948,"ip_address":"","comment_id":305039,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1627787662","product_id":100029201,"comment_content":"è¿™é‡Œè¯´çš„å¤ªæµ…äº†ã€‚å¼‚æ­¥å‘é€çš„åŸç†å’Œå®ç°æ˜¯å¦‚ä½• é«˜ä½æ°´ä½ä¹Ÿæ²¡è¯´","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524257,"discussion_content":"å—¯å—¯ï¼Œæ˜¯çš„ï¼Œå› ä¸ºæœ¬æ¥ä¹Ÿä¸æ˜¯è¦è¯´è¿™ä¸¤ä»¶äº‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630810948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304288,"user_name":"tofree p","can_delete":false,"product_type":"c1","uid":1406870,"ip_address":"","ucode":"87803554C253EA","user_header":"https://static001.geekbang.org/account/avatar/00/15/77/96/20eac387.jpg","comment_is_top":false,"comment_ctime":1627316005,"is_pvip":false,"replies":[{"id":"110338","content":"max.in.flight.requests.per.connection = 1<br>","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1627784626,"ip_address":"","comment_id":304288,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1627316005","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯kafkaæœ‰æ‰¹é‡å‘é€åŠŸèƒ½ï¼Œå¦‚æœack=1ï¼Œåœ¨æ‰¹é‡å‘é€ä¸­å¦‚æœå‘ç”Ÿäº†é”™è¯¯ï¼Œå¯¼è‡´æŸä¸€æ¡æ¶ˆæ¯é‡æ–°å‘é€ï¼Œè¿™æ ·çš„è¯æ¶ˆæ¯çš„é¡ºåºä¹±äº†ï¼Œæœ‰æ²¡æœ‰åŠæ³•èƒ½ç”¨æ‰¹é‡å‘é€å¹¶ä¸”ä¿è¯æ¶ˆæ¯ä¸ä¹±å‘¢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524002,"discussion_content":"max.in.flight.requests.per.connection = 1\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627784626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302466,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1626232183,"is_pvip":true,"replies":[{"id":"110336","content":"é’ˆå¯¹çš„æ˜¯å¤šä¸ªå‰¯æœ¬èƒ½å¤Ÿå¢åŠ é«˜å¯ç”¨è¿™ä»¶äº‹","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1627784500,"ip_address":"","comment_id":302466,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626232183","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ€»ç»“ä¸­56ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œ6é’ˆå¯¹çš„æ˜¯ISRï¼Œé‚£5å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523317,"discussion_content":"é’ˆå¯¹çš„æ˜¯å¤šä¸ªå‰¯æœ¬èƒ½å¤Ÿå¢åŠ é«˜å¯ç”¨è¿™ä»¶äº‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627784500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299453,"user_name":"æ²ç´«æµå…‰","can_delete":false,"product_type":"c1","uid":1950907,"ip_address":"","ucode":"ECD078ADAF0711","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6REjFuP7zicRdA4sm4w8H046bgNpCQ6odSJLxDV3FicRaxDzQTk2fviaGnKFAGUcFQcOZ5WANqEZDQ/132","comment_is_top":false,"comment_ctime":1624631328,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1624631328","product_id":100029201,"comment_content":"å…³äºacks = all å’Œ min.insync.replicas çš„é—®é¢˜<br>å®é™…å‰¯æœ¬ï¼ˆISRï¼‰ &gt; min.insync.replicasï¼Œacks = allèµ·ä½œç”¨<br>å®é™…å‰¯æœ¬ (ISR) &lt; min.insync.replicasï¼Œmin.insync.replicas èµ·ä½œç”¨","like_count":0},{"had_liked":false,"id":289788,"user_name":"liian2019","can_delete":false,"product_type":"c1","uid":1503741,"ip_address":"","ucode":"22F639944F0EA0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epvjpicXzEv02d9ztRzIWIicbejyFTTtRA5K6oYmdicq9HQgGfRn3DLytTHQ6CHspb0TibqFkMibhBXj2g/132","comment_is_top":false,"comment_ctime":1619174809,"is_pvip":true,"replies":[{"id":"105283","content":"æ²¡æœ‰æäº¤ä½ç§»ï¼›ä½ç§»æ•°æ®è¢«åˆ é™¤","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1619599814,"ip_address":"","comment_id":289788,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619174809","product_id":100029201,"comment_content":"æƒ³è¯·æ•™ä¸€ä¸‹ï¼ŒæŸä¸ªpartition çš„consumer offset è‡ªåŠ¨é‡ç½®ä¸º0äº†ï¼Œå¯èƒ½ä¼šæ˜¯å“ªäº›æ–¹é¢çš„åŸå› ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519019,"discussion_content":"æ²¡æœ‰æäº¤ä½ç§»ï¼›ä½ç§»æ•°æ®è¢«åˆ é™¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619599814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285803,"user_name":"beifengzhishen001","can_delete":false,"product_type":"c1","uid":2109853,"ip_address":"","ucode":"77D42B7DD9E754","user_header":"","comment_is_top":false,"comment_ctime":1617016825,"is_pvip":false,"replies":[{"id":"104161","content":"â€œè¯¥æ–¹æ³•è¿”å›æ„å‘³ç€produceråªåšäº†ä¸€æ¬¡å†™æ“ä½œï¼Œå¯èƒ½æˆåŠŸä¹Ÿå¯èƒ½å¤±è´¥ï¼Œå¦‚æœå¤±è´¥ä¹Ÿä¼šç«‹åˆ»è¿”å›sendæ–¹æ³•ï¼Œproducerä¼šåœ¨éšåé™é»˜åœ°å°è¯•é‡ä¼ ï¼ˆè¿™æ ·ä¼¼ä¹å°±åç¦»äº†å®¢æˆ·ç«¯å†™ç¨‹åºçš„ä¸»é€»è¾‘äº†ï¼Œæ„Ÿè§‰åº”è¯¥ä¸æ˜¯åä¸€ç§å¤„ç†ï¼‰â€  --- ç›®å‰çš„è®¾è®¡æ›´åŠ è´´åˆä½ çš„è¿™ç§è¯´æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1617671269,"ip_address":"","comment_id":285803,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617016825","product_id":100029201,"comment_content":"ã€ç›®å‰ Kafka Producer æ˜¯å¼‚æ­¥å‘é€æ¶ˆæ¯çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ è°ƒç”¨çš„æ˜¯ producer.send(msg) è¿™ä¸ª APIï¼Œé‚£ä¹ˆå®ƒé€šå¸¸ä¼šç«‹å³è¿”å›ï¼Œä½†æ­¤æ—¶ä½ ä¸èƒ½è®¤ä¸ºæ¶ˆæ¯å‘é€å·²æˆåŠŸå®Œæˆã€‚ã€‘<br>è¿™é‡Œæˆ‘æœ‰ä¸ªç–‘æƒ‘ï¼Œå½“send(msg)è¿”å›æ—¶ï¼Œæ˜¯å¦æ„å‘³ç€å³ä½¿ä¸­é—´å‘ç”Ÿäº†å¤±è´¥ï¼Œproducerä¹Ÿå·²ç»æŒ‰ç…§é‡è¯•å‚æ•°çš„é…ç½®åšäº†é‡å†™çš„æ“ä½œï¼Œåªæ˜¯producerå¹¶ä¸çŸ¥é“é‡è¯•åæœ€ç»ˆæœ‰æ²¡æœ‰å†™å…¥æˆåŠŸï¼Ÿè¿˜æ˜¯è¯´ï¼Œè¯¥æ–¹æ³•è¿”å›æ„å‘³ç€produceråªåšäº†ä¸€æ¬¡å†™æ“ä½œï¼Œå¯èƒ½æˆåŠŸä¹Ÿå¯èƒ½å¤±è´¥ï¼Œå¦‚æœå¤±è´¥ä¹Ÿä¼šç«‹åˆ»è¿”å›sendæ–¹æ³•ï¼Œproducerä¼šåœ¨éšåé™é»˜åœ°å°è¯•é‡ä¼ ï¼ˆè¿™æ ·ä¼¼ä¹å°±åç¦»äº†å®¢æˆ·ç«¯å†™ç¨‹åºçš„ä¸»é€»è¾‘äº†ï¼Œæ„Ÿè§‰åº”è¯¥ä¸æ˜¯åä¸€ç§å¤„ç†ï¼‰ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517786,"discussion_content":"â€œè¯¥æ–¹æ³•è¿”å›æ„å‘³ç€produceråªåšäº†ä¸€æ¬¡å†™æ“ä½œï¼Œå¯èƒ½æˆåŠŸä¹Ÿå¯èƒ½å¤±è´¥ï¼Œå¦‚æœå¤±è´¥ä¹Ÿä¼šç«‹åˆ»è¿”å›sendæ–¹æ³•ï¼Œproducerä¼šåœ¨éšåé™é»˜åœ°å°è¯•é‡ä¼ ï¼ˆè¿™æ ·ä¼¼ä¹å°±åç¦»äº†å®¢æˆ·ç«¯å†™ç¨‹åºçš„ä¸»é€»è¾‘äº†ï¼Œæ„Ÿè§‰åº”è¯¥ä¸æ˜¯åä¸€ç§å¤„ç†ï¼‰â€  --- ç›®å‰çš„è®¾è®¡æ›´åŠ è´´åˆä½ çš„è¿™ç§è¯´æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617671269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285002,"user_name":"é¸£å·±","can_delete":false,"product_type":"c1","uid":2313382,"ip_address":"","ucode":"4FC0C37457F21A","user_header":"https://static001.geekbang.org/account/avatar/00/23/4c/a6/e6f1d773.jpg","comment_is_top":false,"comment_ctime":1616574659,"is_pvip":false,"replies":[{"id":"103530","content":"ä»æœ€æ—©æ¶ˆè´¹æ˜¯æ¯”è¾ƒå®‰å…¨å’Œä¿å®ˆçš„åšæ³•","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1616721445,"ip_address":"","comment_id":285002,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616574659","product_id":100029201,"comment_content":"å½“å¢åŠ ä¸»é¢˜åˆ†åŒºåï¼Œåœ¨æŸæ®µâ€œä¸å‡‘å·§â€çš„æ—¶é—´é—´éš”åï¼ŒProducer å…ˆäº Consumer æ„ŸçŸ¥åˆ°æ–°å¢åŠ çš„åˆ†åŒºï¼Œè€Œ Consumer è®¾ç½®çš„æ˜¯â€œä»æœ€æ–°ä½ç§»å¤„â€å¼€å§‹è¯»å–æ¶ˆæ¯ï¼Œå› æ­¤åœ¨ Consumer æ„ŸçŸ¥åˆ°æ–°åˆ†åŒºå‰ï¼ŒProducer å‘é€çš„è¿™äº›æ¶ˆæ¯å°±å…¨éƒ¨â€œä¸¢å¤±â€äº†ï¼Œæˆ–è€…è¯´ Consumer æ— æ³•è¯»å–åˆ°è¿™äº›æ¶ˆæ¯ï¼Ÿ<br><br>1ï¼‰ä»æœ€æ—©æ¶ˆè´¹ï¼›<br>2ï¼‰å‡å¦‚ç°åœ¨ä¸‰ä¸ªåˆ†åŒºï¼Œåˆ†åˆ«æœ‰ä¸‰ä¸ªæ¶ˆè´¹è€…åˆ†é…åˆ°æ¯ä¸ªåˆ†åŒºï¼›æˆ‘è¦å¢åŠ 2ä¸ªåˆ†åŒºï¼›å¯ä¸å¯ä»¥æå‰å¤šå¯åŠ¨ä¸¤ä¸ªç©ºé—²æ¶ˆè´¹è€…ç­‰å¾…æ¶ˆè´¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517548,"discussion_content":"ä»æœ€æ—©æ¶ˆè´¹æ˜¯æ¯”è¾ƒå®‰å…¨å’Œä¿å®ˆçš„åšæ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616721445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284241,"user_name":"çŒªå¤§å¼º","can_delete":false,"product_type":"c1","uid":1542577,"ip_address":"","ucode":"2DD393D247798C","user_header":"https://static001.geekbang.org/account/avatar/00/17/89/b1/9f9cfc19.jpg","comment_is_top":false,"comment_ctime":1616133311,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616133311","product_id":100029201,"comment_content":"è¿˜æœªflushåˆ°ç£ç›˜å°±è¿”å›è¿˜æ˜¯flushåˆ°ç£ç›˜æ‰è¿”å›ï¼Œå¦‚æœflushåˆ°ç£ç›˜æ‰è¿”å›ï¼Œæ˜æ˜¾æ€§èƒ½æœ‰é—®é¢˜","like_count":0},{"had_liked":false,"id":281586,"user_name":"æ²ˆæ°","can_delete":false,"product_type":"c1","uid":1330032,"ip_address":"","ucode":"17E314B07844F4","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/70/33137826.jpg","comment_is_top":false,"comment_ctime":1614820488,"is_pvip":false,"replies":[{"id":"102224","content":"åé¢åˆå†™äº†ä¸€ç¯‡ï¼Œå¯ä»¥çœ‹ä¸‹ï¼šhttps:&#47;&#47;www.cnblogs.com&#47;huxi2b&#47;p&#47;13668061.html","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1614821620,"ip_address":"","comment_id":281586,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1614820488","product_id":100029201,"comment_content":"å•åº”ç”¨å¤šçº¿ç¨‹æäº¤çš„åœºæ™¯ä½¿ç”¨åº”è¯¥æŒºå¤šçš„å§ï¼Œæœ‰æ²¡æœ‰æœ€ä½³å®è·µå•Š","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516446,"discussion_content":"åé¢åˆå†™äº†ä¸€ç¯‡ï¼Œå¯ä»¥çœ‹ä¸‹ï¼šhttps://www.cnblogs.com/huxi2b/p/13668061.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614821620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269655,"user_name":"Geek_c1529b","can_delete":false,"product_type":"c1","uid":2109369,"ip_address":"","ucode":"499C770AA15ADA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo2nk9s8GOOf9YRlp25PIiaLjib3X6XwY7AnTibHDc0AibZlmtWKaYtlSkQsmicclf5mNGyYZcXEOFhGhQ/132","comment_is_top":false,"comment_ctime":1608728752,"is_pvip":false,"replies":[{"id":"97801","content":"ä½ æŠŠè¶…æ—¶æ—¶é—´è®¾ç½®æˆäº†0äº†å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1608772671,"ip_address":"","comment_id":269655,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1608728752","product_id":100029201,"comment_content":"ç”Ÿäº§è€…ä¼šæœ‰â€œfailed to update metadata after 0 msâ€å¼‚å¸¸ï¼Œè¯·é—®å¯èƒ½ä¼šæ˜¯ä»€ä¹ˆåŸå› å‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512346,"discussion_content":"ä½ æŠŠè¶…æ—¶æ—¶é—´è®¾ç½®æˆäº†0äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608772671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266917,"user_name":"é—ªé—ªç”µç”µ","can_delete":false,"product_type":"c1","uid":1140876,"ip_address":"","ucode":"FA5520FA98F739","user_header":"https://static001.geekbang.org/account/avatar/00/11/68/8c/b1f277a5.jpg","comment_is_top":false,"comment_ctime":1607525034,"is_pvip":true,"replies":[{"id":"96917","content":"ä¸»è¦æ˜¯å“ªæ–¹é¢çš„æ€§èƒ½ä¸‹é™å‘¢ï¼Ÿèƒ½æ¬§æœè¯¦ç»†è¯´è¯´","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1607561983,"ip_address":"","comment_id":266917,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607525034","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼è¯·æ•™ä¸‹ï¼Œæˆ‘æœ‰ä¸ªå•æœºç‰ˆkafkaç¯å¢ƒåœ¨å®é™…è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œæ€§èƒ½æ˜æ˜¾é™ä½ï¼Œé‡å¯kafkaè¿›ç¨‹ä¹‹ååˆèƒ½æ˜æ˜¾æå‡æ€§èƒ½ï¼Œè¿™é‡Œçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ å±äºé‚£ä¸ªç« èŠ‚çš„çŸ¥è¯†ç‚¹ï¼Ÿå¸Œæœ›èƒ½æç‚¹ä¸‹ã€‚æ„Ÿè°¢ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511444,"discussion_content":"ä¸»è¦æ˜¯å“ªæ–¹é¢çš„æ€§èƒ½ä¸‹é™å‘¢ï¼Ÿèƒ½æ¬§æœè¯¦ç»†è¯´è¯´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607561983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263014,"user_name":"é‚£ä¹ˆä¸¶ç¥ç§˜ç¾ä¸½","can_delete":false,"product_type":"c1","uid":1388334,"ip_address":"","ucode":"58B6F2182E946B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLhxLmNxIbicllknrM46np5h2jpTZt1COP6X3aica1cbgsge5woIJP70HG3hMFyBmTRHn3zj9jXrdPg/132","comment_is_top":false,"comment_ctime":1605948084,"is_pvip":false,"replies":[{"id":"96053","content":"1. æ˜¯çš„<br>2. â€œLeaderæ˜¯æŒ‡é¢†å¯¼è€…å‰¯æœ¬çš„é‚£ä¸ªBrokerå—ï¼Ÿâ€ -- æ˜¯çš„ã€‚â€œæ˜¯æŒ‡ä¸€ä¸ªBrokerä¸Šçš„è¿½éšè€…å‰¯æœ¬è½åé¢†å¯¼è€…å‰¯æœ¬å¤ªå¤šå—â€ -- æ˜¯çš„<br>3. åˆ†åŒºä¸æ˜¯ä¸ºäº†é«˜å¯ç”¨ï¼Œå‰¯æœ¬æœºåˆ¶æ‰æ˜¯ã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ªåˆ†åŒºä¼šæœ‰å¤šä¸ªå‰¯æœ¬ï¼Œæ¯ä¸ªå‰¯æœ¬ä¿å­˜ç›¸åŒçš„å†…å®¹ã€‚è¿½éšè€…å‰¯æœ¬ä¼šè¢«åŠ¨åœ°åŒæ­¥leaderå‰¯æœ¬ä¸­çš„æ•°æ®","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1606699565,"ip_address":"","comment_id":263014,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605948084","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸‰ä¸ªé—®é¢˜ï¼š<br>1ï¼šå½“ Kafka çš„è‹¥å¹²ä¸ª Broker æˆåŠŸåœ°æ¥æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯å¹¶å†™å…¥åˆ°æ—¥å¿—æ–‡ä»¶åï¼Œå®ƒä»¬ä¼šå‘Šè¯‰ç”Ÿäº§è€…ç¨‹åºè¿™æ¡æ¶ˆæ¯å·²æˆåŠŸæäº¤-è¿™é‡Œé¢æåˆ°çš„å¤šä¸ªBrokeræˆåŠŸæ¥æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯ï¼Œæ˜¯æŒ‡ï¼Œå…¶ä¸­ä¸€ä¸ªBrokeræ˜¯é¢†å¯¼è€…å‰¯æœ¬ï¼Œå‰©ä¸‹çš„Brokeræ˜¯è¿½éšè€…å‰¯æœ¬å—ï¼Ÿ<br>2ï¼šè¿™æ˜¯ Broker ç«¯çš„å‚æ•°ï¼Œå®ƒæ§åˆ¶çš„æ˜¯å“ªäº› Broker æœ‰èµ„æ ¼ç«é€‰åˆ†åŒºçš„ Leaderã€‚å¦‚æœä¸€ä¸ª Broker è½ååŸå…ˆçš„ Leader å¤ªå¤šï¼Œé‚£ä¹ˆå®ƒä¸€æ—¦æˆä¸ºæ–°çš„ Leaderï¼Œå¿…ç„¶ä¼šé€ æˆæ¶ˆæ¯çš„ä¸¢å¤±-Leaderæ˜¯æŒ‡é¢†å¯¼è€…å‰¯æœ¬çš„é‚£ä¸ªBrokerå—ï¼Ÿè¿™é‡Œçš„è½åå¤ªå¤šï¼Œæ˜¯æŒ‡ä¸€ä¸ªBrokerä¸Šçš„è¿½éšè€…å‰¯æœ¬è½åé¢†å¯¼è€…å‰¯æœ¬å¤ªå¤šå—ï¼Ÿ<br>3ï¼šæˆ‘å¯¹åˆ†åŒºå’Œå‰¯æœ¬çš„ç†è§£æ˜¯è¿™æ ·çš„-ç±»æ¯”Redisçš„Clusterï¼Œæ‰€æœ‰çš„æ•°æ®æ ¹æ®ä¸€å®šè§„åˆ™è¢«å­˜æ”¾åœ¨ä¸åŒçš„å®ä¾‹ä¸Šï¼Œä¸ºäº†ä¿è¯æ¯ä¸ªå®ä¾‹çš„é«˜å¯ç”¨ï¼Œæ¯ä¸ªå®ä¾‹ä¼šé…ä¸€ä¸ªä»åº“ã€‚å¯¹äºKafkaï¼Œæ•°æ®å­˜æ”¾åœ¨ä¸ç”¨çš„åˆ†åŒºä¸Šï¼Œä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œåˆ†åŒºå­˜æ”¾äºä¸åŒçš„Brokerä¸Šï¼Œæ¯ä¸ªåˆ†åŒºçš„æ•°æ®åœ¨é…ç½®è‡³å°‘ä¸€ä¸ªè¿½éšè€…å‰¯æœ¬ã€‚ä¸è¿‡ï¼Œæˆ‘çœ‹è€å¸ˆ02ç« æœ€åçš„å›¾ï¼Œæ¯ä¸ªåˆ†åŒºçš„è¿½éšè€…å‰¯æœ¬ä¼šå¤ç”¨å…¶ä»–çš„Broker","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510070,"discussion_content":"1. æ˜¯çš„\n2. â€œLeaderæ˜¯æŒ‡é¢†å¯¼è€…å‰¯æœ¬çš„é‚£ä¸ªBrokerå—ï¼Ÿâ€ -- æ˜¯çš„ã€‚â€œæ˜¯æŒ‡ä¸€ä¸ªBrokerä¸Šçš„è¿½éšè€…å‰¯æœ¬è½åé¢†å¯¼è€…å‰¯æœ¬å¤ªå¤šå—â€ -- æ˜¯çš„\n3. åˆ†åŒºä¸æ˜¯ä¸ºäº†é«˜å¯ç”¨ï¼Œå‰¯æœ¬æœºåˆ¶æ‰æ˜¯ã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ªåˆ†åŒºä¼šæœ‰å¤šä¸ªå‰¯æœ¬ï¼Œæ¯ä¸ªå‰¯æœ¬ä¿å­˜ç›¸åŒçš„å†…å®¹ã€‚è¿½éšè€…å‰¯æœ¬ä¼šè¢«åŠ¨åœ°åŒæ­¥leaderå‰¯æœ¬ä¸­çš„æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606699565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259042,"user_name":"æ…ç‹¬æ˜å¼º","can_delete":false,"product_type":"c1","uid":1965699,"ip_address":"","ucode":"DC2F7F2C0C8F60","user_header":"https://static001.geekbang.org/account/avatar/00/1d/fe/83/df562574.jpg","comment_is_top":false,"comment_ctime":1604622897,"is_pvip":false,"replies":[{"id":"94220","content":"å—¯å—¯ï¼Œå®é™…åœºæ™¯è¿˜æ˜¯ä»¥æµ‹è¯•ç»“æœä¸ºå‡†ï¼šï¼‰<br>","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1604625266,"ip_address":"","comment_id":259042,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604622897","product_id":100029201,"comment_content":"å¯¹äºè€å¸ˆæœ€åçš„ä¸€ä¸ªéšç§˜ä¸¢æ¶ˆæ¯åœºæ™¯ï¼Œè¿˜éœ€è¦è‡ªå·±å»çœ‹èµ„æ–™å»éªŒè¯ã€‚å¦‚æœæŒ‰ä¸Šè¿°åœºæ™¯ï¼Œé‚£ä¹ˆå°±å‡ºç°æ–°çš„topicä¸Šçº¿æ—¶ï¼Œæ¶ˆè´¹è€…æ²¡å¯åŠ¨ï¼Œè¿™æ®µæ—¶é—´çš„æ¶ˆæ¯ä¸ä¼šç§¯å‹ï¼Œç›´æ¥å°±ä¸¢äº†ã€‚æ²¡æœ‰æ¶ˆè´¹è¿›åº¦å°±åº”è¯¥ä»å¤´å¼€å§‹æ¶ˆè´¹(ç£ç›˜ç°å­˜æœ‰æ¶ˆæ¯çš„ç¬¬ä¸€æ¡æ¶ˆæ¯å¼€å§‹)ã€‚  å¦‚æœçœŸæœ‰è¿™ç§åœºæ™¯ï¼Œå…ˆå¯åŠ¨consumeræœåŠ¡å™¨ï¼Œå†ä¸Šçº¿produceræœåŠ¡æ¥è§„é¿è¿™ç§æƒ…å†µã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508823,"discussion_content":"å—¯å—¯ï¼Œå®é™…åœºæ™¯è¿˜æ˜¯ä»¥æµ‹è¯•ç»“æœä¸ºå‡†ï¼šï¼‰\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604625266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250993,"user_name":"timmy21","can_delete":false,"product_type":"c1","uid":1174860,"ip_address":"","ucode":"9D6DED247B1F38","user_header":"https://static001.geekbang.org/account/avatar/00/11/ed/4c/8674b6ad.jpg","comment_is_top":false,"comment_ctime":1601300747,"is_pvip":false,"replies":[{"id":"91821","content":"æäº¤çš„ä½ç§»ä¼šè¿‡æœŸã€‚ä¸€æ—¦è¢«æ¸…ç†ï¼Œä»å“ªé‡Œæ¶ˆè´¹å–å†³äºauto.offset.resetå‚æ•°å€¼","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1601343230,"ip_address":"","comment_id":250993,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1601300747","product_id":100029201,"comment_content":"å¦‚æœé•¿æ—¶é—´ä¸æ¶ˆè´¹ï¼Œæäº¤çš„ä½ç§»ä¼šè¿‡æœŸå—ï¼Ÿæˆ–è€…æäº¤çš„ä½ç§»çš„æ•°æ®è¢«æ¸…ç†äº†ï¼Œä¸‹æ¬¡å¯åŠ¨é‡æ–°æ¶ˆè´¹æ—¶ä»ä»€ä¹ˆä½ç§»å¼€å§‹æ¶ˆè´¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506358,"discussion_content":"æäº¤çš„ä½ç§»ä¼šè¿‡æœŸã€‚ä¸€æ—¦è¢«æ¸…ç†ï¼Œä»å“ªé‡Œæ¶ˆè´¹å–å†³äºauto.offset.resetå‚æ•°å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601343230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245451,"user_name":"æ¯è«åœ","can_delete":false,"product_type":"c1","uid":1759325,"ip_address":"","ucode":"4FA1D5CBBEF702","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","comment_is_top":false,"comment_ctime":1598947796,"is_pvip":true,"replies":[{"id":"90398","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1599096259,"ip_address":"","comment_id":245451,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598947796","product_id":100029201,"comment_content":"min.insync.replicasæ˜¯åŒ…æ‹¬Leaderåœ¨å†…çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504883,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599096259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244394,"user_name":"nestle","can_delete":false,"product_type":"c1","uid":1762252,"ip_address":"","ucode":"469800BED81B54","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","comment_is_top":false,"comment_ctime":1598503448,"is_pvip":false,"replies":[{"id":"90150","content":"æœ‰å…³ç³»ã€‚acks=1çš„è¯ï¼Œæ¶ˆæ¯åªè¦å†™å…¥leaderå‰¯æœ¬å°±ç®—æ˜¯å·²æäº¤ã€‚å¦‚æœç­‰äº-1æˆ–allï¼Œé‚£ä¹ˆå¿…é¡»è¦å†™å…¥ISRæ‰€æœ‰å‰¯æœ¬æ‰ç®—æ˜¯å·²æäº¤","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1598836747,"ip_address":"","comment_id":244394,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598503448","product_id":100029201,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼Œæ¶ˆæ¯å·²æäº¤çš„å®šä¹‰åº”è¯¥æ˜¯æ˜ç¡®çš„ï¼Œå°±æ˜¯æ‰€æœ‰ISRå†™æˆåŠŸï¼Œæ˜¯ä¸æ˜¯è·Ÿacksæ²¡å¤ªå¤šå…³ç³»å‘¢ï¼Ÿacksé…ç½®åº”è¯¥æ˜¯å®šä¹‰äº†Producerå‘é€æˆåŠŸçš„æ ‡å‡†å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504572,"discussion_content":"æœ‰å…³ç³»ã€‚acks=1çš„è¯ï¼Œæ¶ˆæ¯åªè¦å†™å…¥leaderå‰¯æœ¬å°±ç®—æ˜¯å·²æäº¤ã€‚å¦‚æœç­‰äº-1æˆ–allï¼Œé‚£ä¹ˆå¿…é¡»è¦å†™å…¥ISRæ‰€æœ‰å‰¯æœ¬æ‰ç®—æ˜¯å·²æäº¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598836747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242989,"user_name":"å•æœ‹è£","can_delete":false,"product_type":"c1","uid":1272662,"ip_address":"","ucode":"8AD121BEDD9675","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/56/37a4cea7.jpg","comment_is_top":false,"comment_ctime":1597912409,"is_pvip":false,"replies":[{"id":"89603","content":"å—¯ï¼Œå¯è¡Œçš„ã€‚å…¶å®å°±æ˜¯çœ‹producerå’Œconsumeræ€ä¹ˆåè°ƒäº†ã€‚å…³é”®æ˜¯ä¸è¦ä¸¢å¤±æ•°æ®ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1597971509,"ip_address":"","comment_id":242989,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597912409","product_id":100029201,"comment_content":"å¼€å‘è®¨è®ºï¼šå¦‚æœæˆ‘æ˜¯è®¾è®¡è€…ï¼Œæˆ‘ä¼šæ¯”å¯¹ä¸‹â€œæ–°å»ºâ€topicæ—¶ï¼ŒProduceræ„ŸçŸ¥ï¼ˆçœ‹ä½œå†™å…¥ï¼‰æ—¶é—´æˆ³ï¼Œä»¥åŠæ„ŸçŸ¥è¯¥topicçš„æ—¶é—´æˆ³ï¼Œå¦‚æœå‰è€…å°äºåè€…ï¼Œå°±é‡å¤´è¯»ï¼›å¦åˆ™ï¼Œå°±ä»â€œæœ€æ–°ä½ç½®å¤„â€è¯»ã€‚è¿™æ ·è®¾è®¡çš„åŸå› æ—¶ï¼Œproducerã€consumerä¸ä¼šç›¸äº’é€šä¿¡ï¼Œè¦æ˜¯å€ŸåŠ©å¼•æ“æ¥åè°ƒä¼šéº»çƒ¦ï¼›æ‰€ä»¥ï¼Œç›´æ¥åœ¨æ¶ˆè´¹ç«¯å¤„ç†ï¼Œä¼šæ›´æœ‰æ•ˆäº›ï¼Œèƒ¡è€å¸ˆè§‰å¾—å‘¢ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504149,"discussion_content":"å—¯ï¼Œå¯è¡Œçš„ã€‚å…¶å®å°±æ˜¯çœ‹producerå’Œconsumeræ€ä¹ˆåè°ƒäº†ã€‚å…³é”®æ˜¯ä¸è¦ä¸¢å¤±æ•°æ®ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597971509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242647,"user_name":"88591","can_delete":false,"product_type":"c1","uid":1254656,"ip_address":"","ucode":"04CE3E46455185","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/00/3afbab43.jpg","comment_is_top":false,"comment_ctime":1597803835,"is_pvip":false,"replies":[{"id":"89546","content":"å†™å…¥page cacheå³ç®—æˆåŠŸã€‚Kafkaæ— æ³•å¾—çŸ¥OSä½•æ—¶è½ç›˜","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1597885523,"ip_address":"","comment_id":242647,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597803835","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå†™å…¥æ—¥å¿—æˆåŠŸï¼Œæ˜¯ç®—å†™å…¥page cache æˆåŠŸï¼Œè¿˜æ˜¯æ•°æ®è½ç›˜æˆåŠŸã€‚å› ä¸ºæ•°æ®å­˜ç›˜å¯èƒ½æ˜¯å¼‚æ­¥çš„","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504061,"discussion_content":"å†™å…¥page cacheå³ç®—æˆåŠŸã€‚Kafkaæ— æ³•å¾—çŸ¥OSä½•æ—¶è½ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597885523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234574,"user_name":"è§å—å±±","can_delete":false,"product_type":"c1","uid":1118111,"ip_address":"","ucode":"6A8BB82B7573CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","comment_is_top":false,"comment_ctime":1594724293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594724293","product_id":100029201,"comment_content":"request. required. acks=allæ—¶è¡¨ç¤ºçš„æ˜¯isrä¸­æ‰€æœ‰å‰¯æœ¬éƒ½æ”¶åˆ°æ¶ˆæ¯ï¼Œisræ˜¯ä¿è¯followerå’Œfollowerçš„æ•°æ®ä¸€è‡´æ€§çš„ã€‚å¯èƒ½æœ¬èº«æœ‰10ä¸ªå‰¯æœ¬ï¼Œä½†æ˜¯isrä¸­æ˜¯5ä¸ªï¼Œacks=allå°±æ„å‘³ç€è¿™5ä¸ªå‰¯æœ¬éƒ½æ”¶åˆ°æ¶ˆæ¯ã€‚<br>min. in sync. replicas=nåˆ™è¡¨ç¤ºçš„æ˜¯æœ€å°åŒæ­¥å‰¯æœ¬çƒï¼Œåªæœ‰åœ¨acks=allæ—¶ç”Ÿæ•ˆï¼Œæ­¤æ—¶min. in sync. replicas=6æ—¶ï¼Œå®ƒå¿…é¡»åŒæ­¥6ä¸ªæ‰è¡Œï¼Œä¸ä¼šåªåŒæ­¥isrä¸­æ•°æ®å°±è¿”å›ç»“æœçš„","like_count":0},{"had_liked":false,"id":227494,"user_name":"æ­£æ˜¯é‚£æœµç«ç‘°","can_delete":false,"product_type":"c1","uid":1048261,"ip_address":"","ucode":"73D630B654573F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","comment_is_top":false,"comment_ctime":1592392534,"is_pvip":false,"replies":[{"id":"83831","content":"å—¯ï¼Œæ‰€ä»¥Kafkaè¿˜æä¾›äº†è½¯ä»¶æœºåˆ¶æ¥ä¿è¯é«˜å¯é æ€§ï¼Œæ¯”å¦‚å¤šå‰¯æœ¬æœºåˆ¶","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1592403090,"ip_address":"","comment_id":227494,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592392534","product_id":100029201,"comment_content":"kafkaæ¶ˆæ¯çš„å·²æäº¤ï¼Œä¹Ÿåªæ˜¯å†™å…¥pagecacheï¼Œå¹¶æ²¡æœ‰åˆ·ç›˜ï¼Œå¦‚æœåœ¨æ²¡æœ‰åˆ·ç›˜ä¹‹å‰brokeræŒ‚äº†ï¼Œä¸ä¹Ÿä¸¢æ¶ˆæ¯äº†ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498665,"discussion_content":"å—¯ï¼Œæ‰€ä»¥Kafkaè¿˜æä¾›äº†è½¯ä»¶æœºåˆ¶æ¥ä¿è¯é«˜å¯é æ€§ï¼Œæ¯”å¦‚å¤šå‰¯æœ¬æœºåˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592403090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216686,"user_name":"è¡Œåˆ™å°†è‡³","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1589328904,"is_pvip":false,"replies":[{"id":"80174","content":"ä¸€ç§ç®€å•çš„æ€è·¯æ˜¯åœ¨consumerç«¯è®°å½•è®¢é˜…çš„åˆ†åŒºï¼Œã€‚å¦‚æœæ¶ˆè´¹æ—¶ç¢°åˆ°äº†æ–°çš„åˆ†åŒºï¼Œé‚£ä¹ˆè°¨æ…åœ°å¯¹å¾…å®ƒï¼Œæ¯”å¦‚æŠŠå®ƒè°ƒæ•´åˆ°æœ€å¼€å§‹çš„ä½ç§»å¤„å¼€å§‹æ¶ˆè´¹","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1589332069,"ip_address":"","comment_id":216686,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1589328904","product_id":100029201,"comment_content":"æµè§ˆäº†ä¸€éç•™è¨€ï¼Œæ²¡æœ‰å‘ç°è¯¾åé¢˜çš„ç­”æ¡ˆï¼Œè€å¸ˆèƒ½ä¸èƒ½ç»™å‡ºä¸€ä¸ªè§£ç­”ã€‚åº”è¯¥ä¸æ˜¯ç®€å•çš„é…ç½®æˆearilstå§","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494912,"discussion_content":"ä¸€ç§ç®€å•çš„æ€è·¯æ˜¯åœ¨consumerç«¯è®°å½•è®¢é˜…çš„åˆ†åŒºï¼Œã€‚å¦‚æœæ¶ˆè´¹æ—¶ç¢°åˆ°äº†æ–°çš„åˆ†åŒºï¼Œé‚£ä¹ˆè°¨æ…åœ°å¯¹å¾…å®ƒï¼Œæ¯”å¦‚æŠŠå®ƒè°ƒæ•´åˆ°æœ€å¼€å§‹çš„ä½ç§»å¤„å¼€å§‹æ¶ˆè´¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589332069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152383,"user_name":"sun","can_delete":false,"product_type":"c1","uid":1062757,"ip_address":"","ucode":"98F10FD0D881DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/37/65/e8af4917.jpg","comment_is_top":false,"comment_ctime":1573987551,"is_pvip":false,"replies":[{"id":"58588","content":"åœ¨è¿™å°brokerä¸Šæ¶ˆæ¯çš„ç¡®ç®—ä¸¢å¤±äº†ï¼Œä¸è¿‡Kafkaåœ¨è½¯ä»¶å±‚é¢æä¾›äº†å‰¯æœ¬æœºåˆ¶å¯ä»¥é¢„é˜²è¿™ç§æƒ…å†µ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1574039103,"ip_address":"","comment_id":152383,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573987551","product_id":100029201,"comment_content":"brokerå·²ç»å†™åˆ°é¡µç¼“å­˜ï¼Œæ­¤æ—¶å¦‚æœbrokeræŒ‚äº†ï¼Œæ¶ˆæ¯ç®—ä¸¢å¤±å—ï¼Ÿè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474800,"discussion_content":"åœ¨è¿™å°brokerä¸Šæ¶ˆæ¯çš„ç¡®ç®—ä¸¢å¤±äº†ï¼Œä¸è¿‡Kafkaåœ¨è½¯ä»¶å±‚é¢æä¾›äº†å‰¯æœ¬æœºåˆ¶å¯ä»¥é¢„é˜²è¿™ç§æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574039103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146175,"user_name":"æœ±ä¸œæ—­","can_delete":false,"product_type":"c1","uid":1242338,"ip_address":"","ucode":"C48DD620A63868","user_header":"https://static001.geekbang.org/account/avatar/00/12/f4/e2/dbc4a5f2.jpg","comment_is_top":false,"comment_ctime":1572447559,"is_pvip":false,"replies":[{"id":"56437","content":"å¦‚æœmax.in.flight.requests.per.connectionè®¾ç½®æˆå¤§äº0çš„æ•°ï¼Œé‚£ä¹ˆçš„ç¡®æœ‰å¯èƒ½çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1572482912,"ip_address":"","comment_id":146175,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1572447559","product_id":100029201,"comment_content":"æ‚¨å¥½ï¼Œèƒ¡å¤•è€å¸ˆï¼Œretriesæ˜¯å¦ä¼šå¯¼è‡´æ¶ˆæ¯ä¹±åºå‘¢?","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472738,"discussion_content":"å¦‚æœmax.in.flight.requests.per.connectionè®¾ç½®æˆå¤§äº0çš„æ•°ï¼Œé‚£ä¹ˆçš„ç¡®æœ‰å¯èƒ½çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572482912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1156148,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a4/34/0ab08db6.jpg","nickname":"swift","note":"","ucode":"B243DCD10B04F0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229662,"discussion_content":"åº”è¯¥æ˜¯å¤§äº1å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586679254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136048,"user_name":"è’™å¼€å¼º","can_delete":false,"product_type":"c1","uid":1317706,"ip_address":"","ucode":"61B3183781B9F7","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/4a/f9df2d06.jpg","comment_is_top":false,"comment_ctime":1569335830,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1569335830","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œkafkaçš„leaderå‰¯æœ¬ä¸Followerå‰¯æœ¬ä¹‹é—´ï¼Œå¦‚æœleaderæŒ‚äº†ï¼Œfollowerå‰¯æœ¬ä¸leaderå‰¯æœ¬è½ä¸‹çš„æ•°æ®ä¸æ˜¯å¤ªå¤§ï¼Œè¿™ä¸ªæ—¶å€™åˆ‡æ¢followerå‰¯æœ¬é€‰ä¸¾ä¸ºleaderï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæœ‰æ¶ˆæ¯ä¸¢å¤±ï¼Œè¿™ä¹ˆçœ‹æ¥kafkaä¸èƒ½ä¿è¯ç™¾åˆ†ä¹‹ç™¾çš„ä¸ä¸¢æ•°æ®ã€‚","like_count":0,"discussions":[{"author":{"id":1317706,"avatar":"https://static001.geekbang.org/account/avatar/00/14/1b/4a/f9df2d06.jpg","nickname":"è’™å¼€å¼º","note":"","ucode":"61B3183781B9F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200152,"discussion_content":"æœ‰å‚æ•°è®¾ç½®ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583661746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171847,"discussion_content":"å¦‚æœæœ‰è¿™ç§éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘åœ¨å†™å…¥æ—¶ä¿è¯é™¤äº† leader å†™å…¥ä¹‹å¤–ï¼Œæœ‰ follower å‰¯æœ¬ä¹Ÿå†™å…¥æˆåŠŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581752564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135539,"user_name":"miwucc","can_delete":false,"product_type":"c1","uid":1326429,"ip_address":"","ucode":"7935BD907119AE","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/5d/ac666969.jpg","comment_is_top":false,"comment_ctime":1569206651,"is_pvip":false,"replies":[{"id":"51991","content":"å–å†³äºä½ é…ç½®çš„retriesï¼Œå¦‚æœå°±æ˜¯3ï¼Œé‚£ä¹ˆproducerä¼šè¢«æ˜¾å¼å‘ŠçŸ¥å‘é€å¤±è´¥ï¼Œä½ å¯ä»¥åœ¨å›è°ƒä¸­å¤„ç†å¤±è´¥é€»è¾‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1569230267,"ip_address":"","comment_id":135539,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1569206651","product_id":100029201,"comment_content":"å‘é€ç«¯çš„æ¶ˆæ¯æŒä¹…åŒ–å¦‚ä½•å¤„ç†ï¼Ÿæ¯”å¦‚æˆ‘å‘çš„æ—¶å€™è¿ç»­é‡è¯•3æ¬¡éƒ½é”™ï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªæ¶ˆæ¯è¿˜ä¸èƒ½æŠ›å¼ƒï¼Œæˆ–è€…æ˜¯è¿™ä¸ªæ—¶å€™å‘é€ç«¯è¢«é‡å¯äº†","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468239,"discussion_content":"å–å†³äºä½ é…ç½®çš„retriesï¼Œå¦‚æœå°±æ˜¯3ï¼Œé‚£ä¹ˆproducerä¼šè¢«æ˜¾å¼å‘ŠçŸ¥å‘é€å¤±è´¥ï¼Œä½ å¯ä»¥åœ¨å›è°ƒä¸­å¤„ç†å¤±è´¥é€»è¾‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569230267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","nickname":"èš‚èšå†…æ¨+v","note":"","ucode":"24B10AEE54B3FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":83316,"discussion_content":"æˆ‘ç†è§£ä½ çš„æ„æ€æ˜¯ï¼ŒProducerè¿˜æœªå°†æ¶ˆæ¯å‘é€å‡ºå»ï¼Œå³è¿˜æœªè°ƒç”¨producer.send(msg, callback)è¿™ä¸ªAPIçš„æ—¶å€™ï¼Œçªç„¶é‡å¯ï¼Œé‚£ä¹ˆè¿™æ¡æœªå‘é€çš„æ¶ˆæ¯å°±å¯èƒ½ä¼šä¸¢å¤±ã€‚è§£å†³åŠæ³•å°±æ˜¯åœ¨å‘é€ä¹‹å‰å…ˆå°†æ¶ˆæ¯æŒä¹…åŒ–ï¼Œå–å†³äºæ¶ˆæ¯çš„é‡è¦ç¨‹åº¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576421689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135538,"user_name":"miwucc","can_delete":false,"product_type":"c1","uid":1326429,"ip_address":"","ucode":"7935BD907119AE","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/5d/ac666969.jpg","comment_is_top":false,"comment_ctime":1569206557,"is_pvip":false,"replies":[{"id":"51992","content":"ä¸ç¡®å®š100%ç†è§£äº†ä½ çš„æŒä¹…åŒ–çš„æ„æ€ã€‚é€šå¸¸æˆ‘ä»¬æŒ‡æ¶ˆæ¯ä¿å­˜åœ¨äº†brokerç«¯è¿™ä»¶äº‹æƒ…ä¸ºæŒä¹…åŒ–ã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œä½ æœ€å¥½è®¾ç½®acks=allå°±å¥½äº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1569230339,"ip_address":"","comment_id":135538,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569206557","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæ¶ˆæ¯å‘é€æ²¡æœ‰æŒä¹…åŒ–ï¼Œæ¯”å¦‚å‘é€çš„æ—¶å€™é‡å¯äº†ï¼Œæ€åŠä¿è¯å‘é€çš„æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿåªèƒ½è‡ªå·±åšæŒä¹…åŒ–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468238,"discussion_content":"ä¸ç¡®å®š100%ç†è§£äº†ä½ çš„æŒä¹…åŒ–çš„æ„æ€ã€‚é€šå¸¸æˆ‘ä»¬æŒ‡æ¶ˆæ¯ä¿å­˜åœ¨äº†brokerç«¯è¿™ä»¶äº‹æƒ…ä¸ºæŒä¹…åŒ–ã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œä½ æœ€å¥½è®¾ç½®acks=allå°±å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569230339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134836,"user_name":"äº‘å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1010459,"ip_address":"","ucode":"4475AF1598FBFD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/1b/4b397b80.jpg","comment_is_top":false,"comment_ctime":1568941192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568941192","product_id":100029201,"comment_content":"å·²æäº¤ä½†æ˜¯ä¼šä¸¢å¤±çš„æƒ…å†µï¼Œåº”è¯¥è¿˜æœ‰å‰é¢ç« èŠ‚æåˆ°çš„page cacheæœªåŒæ­¥åˆ°ç£ç›˜å‰å®•æœºçš„æƒ…å†µå§ï¼Ÿè€Œè¿™ç§æƒ…å†µä¸å±äºkafkaåº”ç”¨çš„ç¼ºé™·","like_count":0},{"had_liked":false,"id":133547,"user_name":"miwucc","can_delete":false,"product_type":"c1","uid":1326429,"ip_address":"","ucode":"7935BD907119AE","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/5d/ac666969.jpg","comment_is_top":false,"comment_ctime":1568602359,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1568602359","product_id":100029201,"comment_content":"retriesåœ¨å¼€å¯batchæäº¤çš„æ—¶å€™ä¼šå¯¼è‡´å‘é€é¡ºåºé”™ä¹±","like_count":0,"discussions":[{"author":{"id":1011062,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6d/76/a80ca784.jpg","nickname":"wushuang5112","note":"","ucode":"D1F2AF2CD7D837","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49137,"discussion_content":"ç»™å‡ºå…·ä½“çš„åœºæ™¯å’Œä»£ç å•Šï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573559284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133538,"user_name":"è‹±è€€","can_delete":false,"product_type":"c1","uid":1113425,"ip_address":"","ucode":"5E886F004BF6C2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/51/7f75a232.jpg","comment_is_top":false,"comment_ctime":1568599418,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1568599418","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆæ‚¨å¥½ï¼Œå¯¹äºæ‚¨åœ¨&quot;æœ€ä½³å®è·µ&quot;å°èŠ‚ç¬¬4ç‚¹æåˆ°çš„â€œå¦‚æœä¸€ä¸ª Broker è½ååŸå…ˆçš„ Leader å¤ªå¤šï¼Œé‚£ä¹ˆå®ƒä¸€æ—¦æˆä¸ºæ–°çš„ Leaderï¼Œå¿…ç„¶ä¼šé€ æˆæ¶ˆæ¯çš„ä¸¢å¤±â€å­˜åœ¨ç–‘é—®ã€‚æˆ‘ç†è§£åˆ†åŒºä¸­çš„æ•°æ®å‰¯æœ¬ä¹‹é—´æ˜¯é€šè¿‡å…±è¯†ç®—æ³•æ¥ä¿è¯ä¸€è‡´æ€§çš„ï¼Œå¯¹å¸¸è§çš„ä¸¤ç§å…±è¯†ç®—æ³•Raftå’ŒPaxosï¼ˆä¸çŸ¥é“kafkaä½¿ç”¨çš„æ˜¯å“ªä¸€ç§ï¼‰ï¼Œéƒ½ä¸ä¼šå‡ºç°ä¸Šè¿°çš„é—®é¢˜ã€‚å¯¹Raftè€Œè¨€ï¼Œleader electionæ—¶ä¼šé€‰æ‹©log indexæœ€é•¿çš„followerä½œä¸ºæ–°çš„leaderï¼Œé¡¾ä¸å­˜åœ¨ä¸Šè¿°é—®é¢˜ï¼›Paxosè€Œè¨€ï¼Œå¯¹äºè¢«å¤šæ•°æ´¾commitçš„æ—¥å¿—&#47;å®ä¾‹ï¼Œåœ¨æ–°leaderé€‰ä¸¾çš„proposeé˜¶æ®µä¼šè¿›è¡Œæ—¥å¿—å›æ”¾ï¼Œå®ƒä¼šè¯¢é—®å…¶ä»–èŠ‚ç‚¹å¹¶é€‰æ‹©å·²è¢«å¤šæ•°æ´¾committedçš„æ—¥å¿—é‡æ–°æ‰§è¡Œç®—æ³•ï¼Œå› æ­¤å³ä½¿æ–°çš„leaderçš„æ—¥å¿—è½åå¾ˆå¤šï¼Œä½†ä¹Ÿä¸ä¼šå­˜åœ¨æ—¥å¿—ä¸¢å¤±çš„é—®é¢˜ï¼Œåªæ˜¯æ—¥å¿—å›æ”¾çš„æ—¶é—´ä¼šæ›´é•¿è€Œå·²ã€‚ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘ç†è§£çš„å±‚é¢æˆ–è€…è§’åº¦è·Ÿè€å¸ˆæ‚¨ä¸ä¸€è‡´ï¼Œæ‰ä¼šå¯¼è‡´è¿™æ ·çš„ç–‘æƒ‘ï¼Œå¸Œæœ›è€å¸ˆç­”ç–‘ã€‚","like_count":0},{"had_liked":false,"id":124725,"user_name":"willmeng","can_delete":false,"product_type":"c1","uid":1157065,"ip_address":"","ucode":"37367A728ABF88","user_header":"https://static001.geekbang.org/account/avatar/00/11/a7/c9/67bd5906.jpg","comment_is_top":false,"comment_ctime":1565952595,"is_pvip":false,"replies":[{"id":"45824","content":"å†…éƒ¨ä¸»é¢˜__consumer_offsetsçš„replication factorï¼ˆrfï¼‰ä¸å¤Ÿï¼Œæˆ–è€…è¯´ï¼Œè¿™ä¸ªä¸»é¢˜çš„rfå€¼å°äºoffsets.topic.replication.factorå€¼","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566020805,"ip_address":"","comment_id":124725,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565952595","product_id":100029201,"comment_content":"èƒ¡å¤§ï¼Œæ‚¨å¥½ã€‚ brokerä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒKafkaç‰ˆæœ¬ï¼škafka_2.12-2.3.0ã€‚æˆ‘é…ç½®äº†#replication.factor=3ï¼Œ#min.insync.replicas=2ï¼Œåˆ›å»ºtopicçš„æ—¶å€™èƒ½æˆåŠŸï¼Œç”¨å‘½ä»¤ä»å†™å…¥æ¶ˆæ¯ä¹ŸæˆåŠŸã€‚ä½†æ˜¯æ¶ˆè´¹çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚<br>kafka_2.12-2.3.0]# [2019-08-16 18:32:41,201] INFO [GroupCoordinator 1]: Member consumer-1-6524b252-55f4-4fe8-8fe9-7ab05de683b1 in group console-consumer-18018 has failed, removing it from the group (kafka.coordinator.group.GroupCoordinator)<br>[2019-08-16 18:32:41,202] INFO [GroupCoordinator 1]: Group console-consumer-18018 with generation 44 is now empty (__consumer_offsets-29) (kafka.coordinator.group.GroupCoordinator)<br>[2019-08-16 18:32:41,203] ERROR [ReplicaManager broker=1] Error processing append operation on partition __consumer_offsets-29 (kafka.server.ReplicaManager)<br>org.apache.kafka.common.errors.NotEnoughReplicasException: The size of the current ISR Set(1) is insufficient to satisfy the min.isr requirement of 2 for partition __consumer_offsets-29<br>[2019-08-16 18:32:41,203] WARN [GroupCoordinator 1]: Failed to write empty metadata for group console-consumer-18018: The coordinator is not available. (kafka.coordinator.group.GroupCoordinator)<br>åˆ›å»ºtopicçš„å‚æ•°æ˜¯--replication-factor 3 --partitions 3 <br>åªè¦æ³¨é‡Šäº†è¿™ä¸¤ä¸ªé…ç½®å°±ä¸€åˆ‡æ­£å¸¸ã€‚éº»çƒ¦ç»™æç¤ºä¸€ä¸‹é—®é¢˜ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463297,"discussion_content":"å†…éƒ¨ä¸»é¢˜__consumer_offsetsçš„replication factorï¼ˆrfï¼‰ä¸å¤Ÿï¼Œæˆ–è€…è¯´ï¼Œè¿™ä¸ªä¸»é¢˜çš„rfå€¼å°äºoffsets.topic.replication.factorå€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566020805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1157065,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a7/c9/67bd5906.jpg","nickname":"willmeng","note":"","ucode":"37367A728ABF88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5232,"discussion_content":"å¤šè°¢ï¼Œå¤šè°¢ï¼Œé—®é¢˜è§£å†³äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566099318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117704,"user_name":"ç¿¡å†·ç¿ ","can_delete":false,"product_type":"c1","uid":1326971,"ip_address":"","ucode":"42FFE0F7501D56","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIcmZIPiaKWfMosmDmkejiac8TDhJKz3cygJ2pRJIBHmoeUCNUssSmjETAV9dyozW6c0y8TibNCXqd8Q/132","comment_is_top":false,"comment_ctime":1564114385,"is_pvip":false,"replies":[{"id":"43219","content":"åªå¯¹å¯é‡è¯•å¼‚å¸¸è¿›è¡Œé‡è¯•ã€‚<br>æ˜¯çš„ï¼Œæ”¶ä¸åˆ°responseè‡ªç„¶ä¼šé‡è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564216394,"ip_address":"","comment_id":117704,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564114385","product_id":100029201,"comment_content":"è¯·é—®ä¸‹è®¾ç½®äº†ack=allï¼Œ retireså‚æ•°å¯ä»¥æ§åˆ¶å“ªäº›æƒ…å†µä¸‹çš„å¤±è´¥ï¼Œ è®¾ç½®äº†retiresè¿˜æœ‰å¿…è¦å†åœ¨procduer.sendçš„å›è°ƒé‡Œå†æ¬¡å›å¿†å¤±è´¥é‡è¯•å—<br>è¿˜æœ‰å¦‚æœborkerçš„ackå“åº”ä¸¢å¤±æ‰äº†ï¼Œ å®¢æˆ·ç«¯æ˜¯æ€ä¹ˆåšé‡è¯•çš„ï¼Œ è¶…è¿‡ä¸€å®šæ—¶é—´æ”¶ä¸åˆ°ackå°±é‡æ–°å‘é€å—","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460089,"discussion_content":"åªå¯¹å¯é‡è¯•å¼‚å¸¸è¿›è¡Œé‡è¯•ã€‚\næ˜¯çš„ï¼Œæ”¶ä¸åˆ°responseè‡ªç„¶ä¼šé‡è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564216394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117415,"user_name":"ç™¾è¶Šå¹³æ°‘","can_delete":false,"product_type":"c1","uid":1194846,"ip_address":"","ucode":"1F26D94EC757D6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epc3H0jvwelJoMUbPdcXDibTkdnjlytYW9KiaNoUG8XHxtoWkkia6kfTLLHrEmMGQkFVZuqY1QBvz8jg/132","comment_is_top":false,"comment_ctime":1564043028,"is_pvip":false,"replies":[{"id":"43010","content":"éƒ½æ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564061982,"ip_address":"","comment_id":117415,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564043028","product_id":100029201,"comment_content":"æ˜¯ä¸æ˜¯é˜Ÿåˆ—å’Œä¸»é¢˜ï¼ˆå‘å¸ƒ&#47;è®¢é˜…ï¼‰ï¼Œconsumerå¯¹äºoffsetçš„è®°å½•æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459956,"discussion_content":"éƒ½æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564061982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115445,"user_name":"æ˜“æ°´å¯’","can_delete":false,"product_type":"c1","uid":1238961,"ip_address":"","ucode":"F5D8127ED4754E","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","comment_is_top":false,"comment_ctime":1563589963,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563589963","product_id":100029201,"comment_content":"min.insync.replicas &gt; 1è¿™ä¸ªå’Œproducerçš„å‚æ•°ack=allï¼Œæ˜¯ä¸æ˜¯åªè¦æœ‰min.insync.replicasè¿™äº›ä¸ªå‰¯æœ¬åŒæ­¥äº†æ•°æ®ï¼Œå°±æ˜¯allè¯­ä¹‰äº†","like_count":0},{"had_liked":false,"id":112677,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1562805758,"is_pvip":false,"replies":[{"id":"41136","content":"Brokerç«¯ä¸Šçš„å†…éƒ¨ä¸»é¢˜ä¿å­˜äº†æ¯ä¸ªconsumerçš„ä¿¡æ¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562893391,"ip_address":"","comment_id":112677,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562805758","product_id":100029201,"comment_content":"ä»æœ€æ—©ä½ç½®å¼€å§‹æ¶ˆè´¹ï¼Œå¦‚æœconsumeræŒ‚äº†é‡å¯åå°±æ¶ˆè´¹ä¹‹å‰æ•°æ®äº†ï¼Œbrokeræ˜¯å¦‚ä½•æ ‡ç¤ºæ¯ä¸ªconsumerçš„å‘¢ï¼Ÿk8sç¯å¢ƒä¸‹å¦‚æœä¸æ§åˆ¶ç»‘å®šï¼Œé‚£ä¹ˆå¯åŠ¨åå°±åœ¨æ–°èŠ‚ç‚¹äº† ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457851,"discussion_content":"Brokerç«¯ä¸Šçš„å†…éƒ¨ä¸»é¢˜ä¿å­˜äº†æ¯ä¸ªconsumerçš„ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562893391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111690,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1562584647,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562584647","product_id":100029201,"comment_content":"æˆ‘éƒ½æ˜¯ä½¿ç”¨è‡ªåŠ¨æäº¤çš„ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":111402,"user_name":"æ›¹ä¼Ÿé›„","can_delete":false,"product_type":"c1","uid":1400754,"ip_address":"","ucode":"9740E426C0742C","user_header":"https://static001.geekbang.org/account/avatar/00/15/5f/b2/c4780c10.jpg","comment_is_top":false,"comment_ctime":1562552490,"is_pvip":false,"replies":[{"id":"40694","content":"ä½¿ç”¨seeké‡æ–°æ¶ˆè´¹","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562636733,"ip_address":"","comment_id":111402,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562552490","product_id":100029201,"comment_content":"è€å¸ˆï¼Œåœ¨è¯·æ•™ä¸ªé—®é¢˜ï¼Œå› kafkaä¸æ”¯æŒæ¶ˆè´¹é‡è¯•æœºåˆ¶ï¼Œå¦‚æœåœ¨æ¶ˆè´¹æ—¶å¤„ç†æ¶ˆæ¯å¤±è´¥ï¼ˆä¾‹å¦‚æ•°æ®åº“çº¦æŸå¤±è´¥æˆ–æ¶ˆæ¯æ ¼å¼æ— æ•ˆï¼‰ï¼Œå¦‚ä½•è®¾è®¡ä¸€ä¸ªå¯ä»¥é‡è¯•çš„æ¶ˆè´¹æœºåˆ¶ï¼Ÿ è°¢è°¢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457336,"discussion_content":"ä½¿ç”¨seeké‡æ–°æ¶ˆè´¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562636733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110692,"user_name":"JasonK","can_delete":false,"product_type":"c1","uid":1184135,"ip_address":"","ucode":"14BB7522FAECE7","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/87/43744994.jpg","comment_is_top":false,"comment_ctime":1562315505,"is_pvip":false,"replies":[{"id":"40300","content":"å—¯å—¯ï¼Œå›½å†…å¯èƒ½è®¿é—®ä¸äº†http:&#47;&#47;archive.apache.org&#47;dist&#47;kafka&#47;<br><br>æœ‰çš„å…¬å¸åº”è¯¥æ˜¯ä¹°äº†åˆæ³•çš„VPNå¯ä»¥è®¿é—®ï¼Œé—®é—®å§ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562370928,"ip_address":"","comment_id":110692,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1562315505","product_id":100029201,"comment_content":"ä½ å¥½ï¼Œèƒ¡è€å¸ˆï¼Œhttp:&#47;&#47;kafka.apache.org å®˜ç½‘ä¸Šçš„kafkaçš„å†å²ç‰ˆæœ¬éƒ½ä¸‹è½½ä¸äº†ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å˜›","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457011,"discussion_content":"å—¯å—¯ï¼Œå›½å†…å¯èƒ½è®¿é—®ä¸äº†http://archive.apache.org/dist/kafka/\n\næœ‰çš„å…¬å¸åº”è¯¥æ˜¯ä¹°äº†åˆæ³•çš„VPNå¯ä»¥è®¿é—®ï¼Œé—®é—®å§ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562370928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1587619,"avatar":"https://static001.geekbang.org/account/avatar/00/18/39/a3/6ab4b32a.jpg","nickname":"DouDi","note":"","ucode":"33AA45A0F00287","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1184,"discussion_content":"è¯·ç§»æ­¥åˆ°ï¼š https://archive.apache.org/dist/kafka/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562345804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110419,"user_name":"æ›¹ä¼Ÿé›„","can_delete":false,"product_type":"c1","uid":1400754,"ip_address":"","ucode":"9740E426C0742C","user_header":"https://static001.geekbang.org/account/avatar/00/15/5f/b2/c4780c10.jpg","comment_is_top":false,"comment_ctime":1562252666,"is_pvip":false,"replies":[{"id":"40156","content":"è¦çœ‹æ€ä¹ˆä¸ªå¤±è´¥äº†ã€‚æ¯”å¦‚fail-fastå—ï¼Ÿå¦‚æœæ˜¯ï¼Œconsumeré‡å¯å›æ¥çš„ç¡®ä¼šä»ä¸Šæ¬¡æäº¤å¤„ç»§ç»­æ¶ˆè´¹ï¼›å¦‚æœä¸æ˜¯ï¼Œæ¯”å¦‚ä½ ä»…ä»…æ˜¯è®°å½•äº†ä¸€ä¸ªlogï¼Œé‚£ä¹ˆconsumerå°±æ­£å¸¸å¾€ä¸‹æ¶ˆè´¹äº†ã€‚<br><br>è¿˜æ˜¯è¦çœ‹ä½ æ‰“ç®—æ€ä¹ˆå¤„ç†å¤±è´¥","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562287427,"ip_address":"","comment_id":110419,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562252666","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ï¼Œ å¼€å¯æ‰‹åŠ¨æäº¤offsetåœºæ™¯ï¼Œå¦‚æœä¸šåŠ¡å¤„ç†å¤±è´¥äº†ï¼ˆè¿™æ—¶æ²¡æœ‰æäº¤offsetï¼‰ï¼Œç»ˆæ­¢æ“ä½œã€‚ä¸‹æ¬¡è¿˜ä¼šç»§ç»­æ¶ˆè´¹è¿™æ¡è®°å½•å—ï¼Ÿauto.offset.reset=eailyï¼Œ å¦‚æœä¼šï¼Œæ¶ˆè´¹è¿˜æ˜¯å¤„ç†å¤±è´¥ï¼ˆè¿™æ—¶æ²¡æœ‰æäº¤offsetï¼‰ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å°±æ­»å¾ªç¯äº†ï¼Œè¿˜æ˜¯è¯´kafkaæœ‰æœºåˆ¶ï¼Œä¸€æ¡è®°å½•æœ€å¤šæ¶ˆè´¹å‡ æ¬¡?  ç±»ä¼¼è¿™ç§åœºæ™¯ï¼Œè€å¸ˆæœ‰ä»€ä¹ˆå¥½çš„å»ºè®®å—ï¼Ÿ è°¢è°¢!","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456872,"discussion_content":"è¦çœ‹æ€ä¹ˆä¸ªå¤±è´¥äº†ã€‚æ¯”å¦‚fail-fastå—ï¼Ÿå¦‚æœæ˜¯ï¼Œconsumeré‡å¯å›æ¥çš„ç¡®ä¼šä»ä¸Šæ¬¡æäº¤å¤„ç»§ç»­æ¶ˆè´¹ï¼›å¦‚æœä¸æ˜¯ï¼Œæ¯”å¦‚ä½ ä»…ä»…æ˜¯è®°å½•äº†ä¸€ä¸ªlogï¼Œé‚£ä¹ˆconsumerå°±æ­£å¸¸å¾€ä¸‹æ¶ˆè´¹äº†ã€‚\n\nè¿˜æ˜¯è¦çœ‹ä½ æ‰“ç®—æ€ä¹ˆå¤„ç†å¤±è´¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562287427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109884,"user_name":"jacke","can_delete":false,"product_type":"c1","uid":1161209,"ip_address":"","ucode":"05F355E1FF88C5","user_header":"https://static001.geekbang.org/account/avatar/00/11/b7/f9/a8f26b10.jpg","comment_is_top":false,"comment_ctime":1562124683,"is_pvip":false,"replies":[{"id":"39912","content":"acksåªèƒ½æ˜¯1æˆ–-1æˆ–0ï¼Œä¸èƒ½æŒ‡å®šä»»æ„ä¸ªæ•°ã€‚<br>â€œä¸€æ¡æ¶ˆæ¯æäº¤æˆåŠŸåœ¨brokerç«¯å’Œproducerç«¯åº”è¯¥ä¸€è‡´çš„å§ï¼Ÿâ€ ---- ä¸å¤ªæ˜ç™½ä»€ä¹ˆæ„æ€ ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562202294,"ip_address":"","comment_id":109884,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562124683","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆ,å…³äºé…ç½®å‚æ•°çš„ä¸€äº›ç–‘é—®.<br>æˆ‘çš„ç†è§£:replication.factoræ˜¯ä¸æ˜¯brokerç«¯å¤‡ä»½çš„ä¸ªæ•°,min.insync.replicaè¡¨ç¤ºbrokerè¦è¾¾åˆ°â€œå·²æäº¤â€æœ€å°‘éœ€è¦å†™å…¥çš„å¤‡ä»½çš„ä¸ªæ•°.å°±æ˜¯åœ¨brokerç«¯:<br>ä¸€æ¡æ¶ˆæ¯å†™å…¥çš„ä¸ªæ•°&gt;=min.insync.replicaçš„ä¸ªæ•°å°±è§†ä¸ºâ€œå·²æäº¤â€ ä¹Ÿå°±æ˜¯åœ¨ prodcer.send(msg, callback) é‡Œé¢çš„callbackå›å¤æäº¤çš„ä¿¡æ¯æˆåŠŸ ç–‘é—®ï¼šcallback é‡Œé¢æç¤ºçš„â€œæäº¤æˆåŠŸ&quot;æ˜¯è¿™æ ·æ„æ€å—?<br>acksæ˜¯producerçš„å‚æ•°ï¼š<br>è¡¨ç¤ºä¸€æ¡æ¶ˆæ¯å‘ç»™brokerä¹‹åæœ‰å¤šå°‘ä¸ªå›å¤æ‰æ˜¯producerç«¯è§†ä¸ºâ€œå·²æäº¤â€ ç–‘é—®ï¼šæ˜¯è¿™æ ·çš„å—ï¼Ÿ<br>ä¸‹é¢æœ‰å‡ ä¸ªé…ç½®ç»„åˆçš„ä¾‹å­<br>replication.factor(broker) min.insync.replica(broker) acks(producer)<br> 5                      4               \t\t\t\tall <br> 5                      4               \t\t\t\t 1<br> 5\t                    5                                3<br> 5                      4                                5 <br>èƒ¡è€å¸ˆèƒ½è¯´ä¸‹ä¸Šé¢é…ç½®æƒ…å†µä¸‹ï¼Œprodcer.send(msg, callback) callbackå¯¹æäº¤æˆåŠŸçš„æ„ä¹‰å—ï¼Ÿ<br>ä¸€æ¡æ¶ˆæ¯æäº¤æˆåŠŸåœ¨brokerç«¯å’Œproducerç«¯åº”è¯¥ä¸€è‡´çš„å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456623,"discussion_content":"acksåªèƒ½æ˜¯1æˆ–-1æˆ–0ï¼Œä¸èƒ½æŒ‡å®šä»»æ„ä¸ªæ•°ã€‚\nâ€œä¸€æ¡æ¶ˆæ¯æäº¤æˆåŠŸåœ¨brokerç«¯å’Œproducerç«¯åº”è¯¥ä¸€è‡´çš„å§ï¼Ÿâ€ ---- ä¸å¤ªæ˜ç™½ä»€ä¹ˆæ„æ€ ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562202294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109113,"user_name":"ç‡ƒçƒ§çš„Mè±†","can_delete":false,"product_type":"c1","uid":1355000,"ip_address":"","ucode":"BEDA9FC8852F5D","user_header":"https://static001.geekbang.org/account/avatar/00/14/ac/f8/a56b7475.jpg","comment_is_top":false,"comment_ctime":1561964416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561964416","product_id":100029201,"comment_content":"æœ€ä½³å®è·µ 5 è¿™ä¸ª replication.factor æ˜¯ topic çº§åˆ«çš„å‚æ•°æ˜¯å¯ä»¥åœ¨åˆ›å»º topic çš„æ—¶å€™å¸¦ä¸Šçš„ã€‚<br>æœ€ä½³å®è·µ 4 è¿™ä¸ª unclean.leader.election.enable åº”è¯¥æ‰æ˜¯ broker çº§åˆ«çš„å‚æ•°ï¼Ÿ","like_count":0},{"had_liked":false,"id":109107,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1031113,"ip_address":"","ucode":"5948D359734193","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/c9/37924ad4.jpg","comment_is_top":false,"comment_ctime":1561963003,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561963003","product_id":100029201,"comment_content":"å…¶å® auto.offset.resetè¿™ä¸ªé…ç½®ä¹Ÿå¾ˆé‡è¦ å¯¹äºä¸è‡ªåŠ¨æäº¤ï¼Œä¸”å¿˜è®°æ‰‹åŠ¨æäº¤çš„åœºæ™¯æ¥è¯´ ä¹Ÿæ˜¯ä¸ªå›°æƒ‘çš„å› ç´ ","like_count":0},{"had_liked":false,"id":109026,"user_name":"Geek_jacky","can_delete":false,"product_type":"c1","uid":1564542,"ip_address":"","ucode":"F6ABD94A03BE7B","user_header":"","comment_is_top":false,"comment_ctime":1561950580,"is_pvip":false,"replies":[{"id":"39536","content":"ä½ å¯ä»¥è®¾ç½®max.poll.records =  10ï¼Œæ¶ˆè´¹å®Œäº†ä¹‹åå†æäº¤ä½ç§»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561982640,"ip_address":"","comment_id":109026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561950580","product_id":100029201,"comment_content":"ä½ å¥½ï¼Œèƒ¡è€å¸ˆï¼Œæˆ‘æƒ³æ¯æ¬¡éš”10æ¡è®°å½•è¿›å»æ¶ˆè´¹ä¸€æ¬¡ï¼Œå¦‚æœåªæœ‰1ä¸ªpartitionæ€ä¹ˆåšï¼Œå¦‚æœæœ‰å¤šä¸ªpartitionåº”è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿä¸ªäººè®¤ä¸ºå¯ä»¥æ‰‹åŠ¨åœ¨offsetä¸Šè¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå¤šä¸ªpartitionä¸­çš„æ•°æ®ä¹Ÿåªèƒ½ä¿è¯æ¯ä¸ªpartitionä¸­çš„æ¶ˆæ¯é—´éš”ä¸º10æ¡ï¼Œæ€»æ„Ÿè§‰æŒºç¬¨çš„ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–çš„åŠæ³•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456217,"discussion_content":"ä½ å¯ä»¥è®¾ç½®max.poll.records =  10ï¼Œæ¶ˆè´¹å®Œäº†ä¹‹åå†æäº¤ä½ç§»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561982640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108547,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1561798200,"is_pvip":false,"replies":[{"id":"39440","content":"åœæ­¢brokerçš„å‘½ä»¤æ˜¯kafka-server-stopï¼Œä½ è¯´çš„æƒ…å†µçš„ç¡®ä¼šå‘ç”Ÿï¼Œå¥½åœ¨Kafkaæä¾›äº†å‰¯æœ¬æœºåˆ¶åœ¨è½¯ä»¶å±‚é¢ä¸Šä¿è¯æ¶ˆæ¯æŒä¹…æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561946652,"ip_address":"","comment_id":108547,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561798200","product_id":100029201,"comment_content":"æˆ‘è¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼Œbrokeræ¥æ”¶åˆ°æ¶ˆæ¯ç›´æ¥äº¤ç»™æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜äº†ï¼Œç„¶åProducerä»¥ä¸ºæ˜¯æäº¤æˆåŠŸäº†ï¼Œè¿™ä¸ªæ—¶å€™çªç„¶æ–­ç”µï¼Œé‚£åœ¨è™šæ‹Ÿå†…å­˜é‡Œçš„æ¶ˆæ¯ä¸å°±ä¸¢äº†å—ï¼Ÿä¸ç®¡é…ç½®ä»€ä¹ˆå‚æ•°ï¼Œä¹Ÿæ˜¯æ²¡æ³•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±çš„å‘€ï¼Œå¦‚æœç”¨kill -9 æ€æ‰brokerçš„è¿›ç¨‹ï¼Œæ˜¯ä¸æ˜¯è™šæ‹Ÿå†…å­˜é‡Œçš„æ¶ˆæ¯ä¹Ÿå°±ä¸æŒä¹…åŒ–åˆ°ç£ç›˜äº†ï¼Ÿæ­£ç¡®åœæ­¢brokerè€Œåˆä¸ä¼šä¸¢å¤±æ¶ˆæ¯çš„å‘½ä»¤æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456036,"discussion_content":"åœæ­¢brokerçš„å‘½ä»¤æ˜¯kafka-server-stopï¼Œä½ è¯´çš„æƒ…å†µçš„ç¡®ä¼šå‘ç”Ÿï¼Œå¥½åœ¨Kafkaæä¾›äº†å‰¯æœ¬æœºåˆ¶åœ¨è½¯ä»¶å±‚é¢ä¸Šä¿è¯æ¶ˆæ¯æŒä¹…æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108072,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1143372,"ip_address":"","ucode":"335960F683C23C","user_header":"https://static001.geekbang.org/account/avatar/00/11/72/4c/4d636a23.jpg","comment_is_top":false,"comment_ctime":1561679938,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561679938","product_id":100029201,"comment_content":"å¦‚æœæ˜¯å¤šçº¿ç¨‹å¼‚æ­¥å¤„ç†æ¶ˆè´¹æ¶ˆæ¯ï¼ŒConsumer ç¨‹åºä¸è¦å¼€å¯è‡ªåŠ¨æäº¤ä½ç§»ï¼Œè€Œæ˜¯è¦åº”ç”¨ç¨‹åºæ‰‹åŠ¨æäº¤ä½ç§»ï¼Œè¿™é‡Œçš„æ‰‹åŠ¨æäº¤ä½ç§»æ˜¯ä»€ä¹ˆæ„æ€å•Šï¼Œä¸å¤ªæ˜ç™½ï¼Ÿ","like_count":0},{"had_liked":false,"id":107992,"user_name":"z.l","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/d35ab9a1.jpg","comment_is_top":false,"comment_ctime":1561644877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561644877","product_id":100029201,"comment_content":"å¦å¤–æƒ³è¯·æ•™ä¸‹ï¼Œå•ä¸ª Consumer ç¨‹åºä½¿ç”¨å¤šçº¿ç¨‹æ¥æ¶ˆè´¹æ¶ˆæ¯çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥æ€æ ·è‡ªåŠ¨æäº¤offestï¼Ÿä»¥javaå®¢æˆ·ç«¯ä¸ºä¾‹ï¼Œæˆ‘æŠŠæ¶ˆæ¯æ”¾åˆ°ä¸€ä¸ªçº¿ç¨‹æ± ä¸­å¼‚æ­¥å¤„ç†ï¼Œæ­¤æ—¶consumerä¹Ÿä¸çŸ¥é“çº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œå¦‚æœç”¨future+åŒæ­¥æäº¤åˆä¼šé˜»å¡consumerçº¿ç¨‹ã€‚æ‰€ä»¥æ˜¯ä¸æ˜¯ç”¨å¤šconsumerçº¿ç¨‹åŒæ­¥æ¶ˆè´¹+åŒæ­¥æäº¤çš„æ–¹å¼æ¯”è¾ƒåˆç†ï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":107894,"user_name":"Xiao","can_delete":false,"product_type":"c1","uid":1179212,"ip_address":"","ucode":"71FFCCEEDE09E1","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/4c/46eb517a.jpg","comment_is_top":false,"comment_ctime":1561630748,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1561630748","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œbrokeråœ¨æŒä¹…åŒ–çš„æ—¶å€™ç†è®ºä¸Šä¹Ÿå­˜åœ¨æ•°æ®ä¸¢å¤±çš„æƒ…å†µå§ã€‚","like_count":0,"discussions":[{"author":{"id":1008348,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","nickname":"moooofly","note":"","ucode":"4A20795C281B6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202291,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583892166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107832,"user_name":"æŒ¯è¶…","can_delete":false,"product_type":"c1","uid":1103529,"ip_address":"","ucode":"D55B896810DBBF","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/a9/ffd70fdc.jpg","comment_is_top":false,"comment_ctime":1561619459,"is_pvip":false,"replies":[{"id":"39129","content":"å—¯å—¯ï¼Œä½†ä»ç”¨æˆ·çš„è§’åº¦è€Œè¨€ï¼Œæˆ‘åœ¨produceræ— å®•æœºçš„æƒ…å½¢ä¸‹å¢åŠ äº†åˆ†åŒºï¼Œproduceræ­£å¸¸ç”Ÿäº§çš„æ¶ˆæ¯ä¸åº”è¯¥ä¸èƒ½è¢«æ¶ˆè´¹ï¼Œå¯¹å§ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561680723,"ip_address":"","comment_id":107832,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1561619459","product_id":100029201,"comment_content":"è®¾ç½®ä»æœ€æ–° offset å¤„å¼€å§‹æ¶ˆè´¹ï¼Œå®é™…ä¸Šé»˜è®¤å°±æ¥å—å…è®¸ä¸¢å¤±ä¸€éƒ¨åˆ†æ¶ˆæ¯ï¼Œè¿™åº”è¯¥ä¸ç®—æ˜¯ç¼ºé™·","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455693,"discussion_content":"å—¯å—¯ï¼Œä½†ä»ç”¨æˆ·çš„è§’åº¦è€Œè¨€ï¼Œæˆ‘åœ¨produceræ— å®•æœºçš„æƒ…å½¢ä¸‹å¢åŠ äº†åˆ†åŒºï¼Œproduceræ­£å¸¸ç”Ÿäº§çš„æ¶ˆæ¯ä¸åº”è¯¥ä¸èƒ½è¢«æ¶ˆè´¹ï¼Œå¯¹å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561680723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103529,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d6/a9/ffd70fdc.jpg","nickname":"æŒ¯è¶…","note":"","ucode":"D55B896810DBBF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601,"discussion_content":"ä»è¿™ä¸ªè§’åº¦å»ç†è§£ä¹Ÿæ˜¯åˆæƒ…åˆç†çš„ï¼Œå¯¹äºæ–°å¢çš„åˆ†åŒºï¼Œoffset topic ä¸­æ²¡æœ‰è®°å½•å½“å‰æ¶ˆè´¹è€…æ‰€å± group å¯¹äºè¯¥åˆ†åŒºçš„æ¶ˆè´¹è®°å½•ï¼Œæ˜¯å¦èƒ½å¤ŸåŸºäºè¿™ä¸€ç‰¹å¾å¢åŠ ä¸€ä¸ªé…ç½®ï¼Œåœ¨é‡åˆ°è¿™ç§åœºæ™¯æ—¶å³ä½¿æ¶ˆè´¹è€…æŒ‡å®šä» latest ä½ç½®å¼€å§‹æ¶ˆè´¹ä¹Ÿæ— æ•ˆã€‚æ–°å¢çš„åˆ†åŒºåˆ°æ¶ˆè´¹è€…é€šè¿‡ rebalance æ„ŸçŸ¥æœŸé—´çš„æ—¶é—´é—´éš”è¾ƒå°ï¼Œæ‰€ä»¥æ¶ˆæ¯é‡ä¹Ÿä¸ä¼šå¾ˆå¤§ï¼Œå³ä½¿è®¾ç½®ä» earliest å¼€å§‹æ¶ˆè´¹ï¼Œå †ç§¯ä¹Ÿä¸ä¼šå¾ˆä¸¥é‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561778639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107820,"user_name":"å¼ åº†","can_delete":false,"product_type":"c1","uid":1050284,"ip_address":"","ucode":"17AE1E23B83304","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/ac/604de2e8.jpg","comment_is_top":false,"comment_ctime":1561617387,"is_pvip":false,"replies":[{"id":"39131","content":"è‡ªåŠ¨æäº¤ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚ä¸»è¦æ˜¯é’ˆå¯¹æ‰‹åŠ¨æäº¤å“¦ã€‚è€Œä¸”è¿™é‡Œçš„æ¶ˆè´¹å…¶å®æŒ‡çš„æ˜¯ä½ æ‰§è¡ŒçœŸæ­£çš„æ¶ˆæ¯å¤„ç†é€»è¾‘ï¼Œè€Œä¸æ˜¯æŒ‡ä»kafkaä¸­è·å–æ¶ˆæ¯ã€‚<br><br>Kafkaé»˜è®¤æä¾›è‡³å°‘ä¸€æ¬¡è¯­ä¹‰ã€‚è®¾æƒ³å¦‚æœä½ æƒ³å®ç°æœ€å¤šä¸€æ¬¡å¤„ç†è¯­ä¹‰æ€ä¹ˆåšï¼Ÿå°±æ˜¯è¦å…ˆæäº¤ä½ç§»ï¼Œå†å¤„ç†æ¶ˆæ¯ã€‚å¯¹å§ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561680836,"ip_address":"","comment_id":107820,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561617387","product_id":100029201,"comment_content":"èƒ¡å¤•å¤§æ‹¿ æ‚¨å¥½ï¼Œå…³äºæ¶ˆè´¹è€…æ•°æ®ä¸¢å¤±çš„ç¬¬ä¸€ç§æƒ…å†µï¼Œæˆ‘ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œåœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¯»ä¹¦å’Œæ›´æ–°ä¹¦ç­¾çš„é¡ºåºæ˜¯é¢ å€’çš„å•Šï¼Ÿæˆ‘ç†è§£çš„å¦‚æœè®¾ç½®ä¸ºè‡ªåŠ¨æäº¤äº†ï¼Œå°±æ˜¯å®šæ—¶é—´éš”çš„ä½ç§»æäº¤ï¼Œåœ¨è¿™ä¸ªé—´éš”æ—¶é—´é‡Œé¢ï¼Œå¦‚æœæ­£åœ¨æ¶ˆè´¹æ•°æ®ï¼Œæ­¤æ—¶å®•æœºäº†ï¼Œè¿˜æ²¡æœ‰æäº¤ä½ç§»ï¼Œå¦‚æœé‡å¯äº†ï¼Œå¯èƒ½ä¼šå‡ºç°é‡å¤æ¶ˆè´¹ã€‚ä¸ç†è§£æ¶ˆæ¯ä¸¢å¤±çš„åœºæ™¯æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿæ‚¨èƒ½è¯¦ç»†è§£é‡Šä¸€ä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455687,"discussion_content":"è‡ªåŠ¨æäº¤ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚ä¸»è¦æ˜¯é’ˆå¯¹æ‰‹åŠ¨æäº¤å“¦ã€‚è€Œä¸”è¿™é‡Œçš„æ¶ˆè´¹å…¶å®æŒ‡çš„æ˜¯ä½ æ‰§è¡ŒçœŸæ­£çš„æ¶ˆæ¯å¤„ç†é€»è¾‘ï¼Œè€Œä¸æ˜¯æŒ‡ä»kafkaä¸­è·å–æ¶ˆæ¯ã€‚\n\nKafkaé»˜è®¤æä¾›è‡³å°‘ä¸€æ¬¡è¯­ä¹‰ã€‚è®¾æƒ³å¦‚æœä½ æƒ³å®ç°æœ€å¤šä¸€æ¬¡å¤„ç†è¯­ä¹‰æ€ä¹ˆåšï¼Ÿå°±æ˜¯è¦å…ˆæäº¤ä½ç§»ï¼Œå†å¤„ç†æ¶ˆæ¯ã€‚å¯¹å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561680836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107742,"user_name":"ä½ å¥½æ—…è¡Œè€…","can_delete":false,"product_type":"c1","uid":1154101,"ip_address":"","ucode":"5C72A428DC28F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","comment_is_top":false,"comment_ctime":1561602597,"is_pvip":false,"replies":[{"id":"39136","content":"å“ªä¸ªé—®é¢˜ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561681092,"ip_address":"","comment_id":107742,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561602597","product_id":100029201,"comment_content":"è€å¸ˆå¯ä»¥è´´å‡ºå®˜æ–¹ç¤¾åŒºå¯¹è¿™ä¸ªé—®é¢˜çš„è§£ç­”å—ï¼Œæˆ‘æƒ³æ›´æ·±å…¥åœ°äº†è§£ä¸€ä¸‹è¿™ä¸ªé—®é¢˜","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455649,"discussion_content":"å“ªä¸ªé—®é¢˜ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561681092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107737,"user_name":"åˆšå­","can_delete":false,"product_type":"c1","uid":1017080,"ip_address":"","ucode":"7B55EC80A7A4A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/f8/c22d32b4.jpg","comment_is_top":false,"comment_ctime":1561601681,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561601681","product_id":100029201,"comment_content":"brokerçš„é…ç½®ã€producerå’Œconsumerçš„é…ç½®å¦‚æ­¤å¤šå’Œå¤æ‚ï¼Œä¸å®¹æ˜“è®°å¿†ã€‚éœ€è¦åæœŸæ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œç›¸åº”è°ƒæ•´ï¼Œæ˜¯å¦æœ‰æ¨¡ç‰ˆçš„é…ç½®å‚æ•°æˆ–è€…è‡ªæ„Ÿåº”çš„åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘å’Œè¿ç»´å¿«é€Ÿæ­£ç¡®çš„ä½¿ç”¨Kafka","like_count":0},{"had_liked":false,"id":107720,"user_name":"13761642169","can_delete":false,"product_type":"c1","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1561599525,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561599525","product_id":100029201,"comment_content":"å¦‚æœæ¶ˆæ¯æ˜¯éšæœºå‘é€ï¼Œå¯¹äºæ¶ˆè´¹è€…æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨æš‚åœæ¶ˆè´¹ï¼Œæ–°åˆ†åŒºæœ‰æ¶ˆæ¯è¿›æ¥å’Œæ¶ˆè´¹å®ä¾‹æ³¨å†Œæ–°åˆ†åŒºå®Œæˆï¼Œå¯ç”¨æ¶ˆè´¹ã€‚è¿™æ˜¯æˆ‘è®¤ä¸ºçš„æƒ³æ³•","like_count":0},{"had_liked":false,"id":107719,"user_name":"AA","can_delete":false,"product_type":"c1","uid":1103583,"ip_address":"","ucode":"CADCB958D6DA1B","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/df/1e4ecd94.jpg","comment_is_top":false,"comment_ctime":1561599433,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561599433","product_id":100029201,"comment_content":"æ”¹ç”¨&quot;ä»æœ€æ—©ä½ç½®&quot;è¯»ï¼Œåˆä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜","like_count":0},{"had_liked":false,"id":107713,"user_name":"13761642169","can_delete":false,"product_type":"c1","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1561598724,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561598724","product_id":100029201,"comment_content":"å…¶å®å¾ˆå¥½è§£å†³ï¼Œåœ¨å‘é€ç«¯ç”¨åˆ†åŒºhashä¸€ä¸ªåˆ†åŒºkeyï¼ŒæŒ‡å®šåˆ†åŒºå‘é€ï¼Œå¢åŠ åˆ†åŒºä¹‹åï¼Œåœ¨ç¡®ä¿kafkaæ¶ˆè´¹è€…å®ä¾‹æ³¨å†Œä¸Šæ–°åˆ†åŒºåï¼Œå°†å‘é€ç«¯é‡å¯ã€‚","like_count":0},{"had_liked":false,"id":107710,"user_name":"åˆ˜æœ‹","can_delete":false,"product_type":"c1","uid":1075141,"ip_address":"","ucode":"7B7B8E4776C22E","user_header":"https://static001.geekbang.org/account/avatar/00/10/67/c5/63b09189.jpg","comment_is_top":false,"comment_ctime":1561598644,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561598644","product_id":100029201,"comment_content":"æ€è€ƒè®¨è®º:<br>åœ¨ä¸šåŠ¡åœºæ™¯å…è®¸æš‚åœçš„çš„æƒ…å†µä¸‹,åœ¨å¢åŠ ä¸»é¢˜åˆ†åŒºå‰,å…ˆæš‚åœProducerç«¯çš„å†™å…¥;ç„¶åå¢åŠ ä¸»é¢˜åˆ†åŒº;å…¶æ¬¡é‡å¯æˆ–ç­‰å¾…Consumerç«¯;æœ€åå¯åŠ¨Producerç«¯.<br><br>åœ¨ä¸šåŠ¡åœºæ™¯ä¸å…æš‚åœçš„æƒ…å†µä¸‹,éœ€è¦æœ‰ä¸ªåœ°æ–¹(redis&#47;zookeeper)ç¼“å­˜ä¸€ä¸ªé…ç½®ä¿¡æ¯.é‡Œé¢åˆ†åˆ«è®°å½•Producerç«¯å’ŒConsumerç«¯ ä¸»é¢˜åˆ†åŒºä¿¡æ¯.<br><br>æ¯”å¦‚ï¼ŒProducer topic_partitions: M ,Consumper topic_partitions: N<br><br>Producerç«¯æ¯æ¬¡æ¶ˆè´¹æ¶ˆæ¯å‰,<br>é¦–å…ˆ,ä¼šåˆ¤æ–­Topicçš„åˆ†åŒºæ•°,å¦‚æœæœ‰å˜æ›´,ä¼šåŠæ—¶æ›´æ–° Producer topic_partitions: M<br>å…¶æ¬¡,ä¼šåˆ¤æ–­  M æ˜¯å¦ç­‰äº N.<br>å¦‚æœ M = N,åˆ™å†™å…¥æ•°æ®;<br>å¦‚æœ M &gt; N,åˆ™å¾ªç¯ç­‰å¾…,ä¸å†™å…¥æ•°æ®;<br>å¦‚æœ M &lt; N,åˆ™ä¼šæ›´æ–°é…ç½®æ–‡ä»¶(Producer topic_partitions:N),ç„¶åå†™å…¥æ•°æ®<br><br>Consumperç«¯æ¯æ¬¡æ¶ˆè´¹æ¶ˆæ¯å‰,ä¼šåˆ¤æ–­Topicçš„åˆ†åŒºæ•°,å¦‚æœæœ‰å˜æ›´,ä¼šåŠæ—¶æ›´æ–° Consumper topic_partitions: N<br><br>ç¼ºç‚¹,å¯èƒ½ä¼šå¢åŠ ä¸€å®šçš„æ£€æµ‹æ—¶é•¿.æ˜¯å¦å¢åŠ æ­¤æ£€æµ‹æ­¥éª¤åä¼šå½±å“åˆ°ä¸šåŠ¡æäº¤&#47;æ¶ˆè´¹éœ€è¦æ ¹æ®ä¸šåŠ¡ç‰¹æ€§è¿›è¡Œå‹æµ‹æ£€éªŒ.","like_count":0},{"had_liked":false,"id":107701,"user_name":"dream","can_delete":false,"product_type":"c1","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1561597669,"is_pvip":false,"replies":[{"id":"39141","content":"æ˜¯çš„ã€‚å®é™…åœºæ™¯ä¸­éå¸¸æ˜æ˜¾ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561681246,"ip_address":"","comment_id":107701,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1561597669","product_id":100029201,"comment_content":"brokerç«¯çš„asks=allè™½ç„¶ä¿è¯äº†æ— æ¶ˆæ¯ä¸¢å¤±çš„å®ç°ï¼Œä½†æ˜¯ä¼šä½¿brokerå“åº”producerçš„æ—¶é—´å˜é•¿å§...","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455629,"discussion_content":"æ˜¯çš„ã€‚å®é™…åœºæ™¯ä¸­éå¸¸æ˜æ˜¾ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561681246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445399,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0e/17/e16e679f.jpg","nickname":"guoyinbo2019","note":"","ucode":"19D86CB3E42839","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524,"discussion_content":"æˆ‘è®¤ä¸ºä¼šçš„ï¼Œæ¯•ç«ŸåŒæ­¥æ•°æ®æ˜¯éœ€è¦æ—¶é—´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561641293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107675,"user_name":"é£ä¸­èŠ±","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1561595588,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561595588","product_id":100029201,"comment_content":"åˆšæ”¶åˆ°æ¨é€å°±è¿™ä¹ˆå¤šç•™è¨€å•¦ï¼å‰å®³äº†æˆ‘çš„å“¥ä»¬","like_count":0},{"had_liked":false,"id":107668,"user_name":"æ¨ä¿Š","can_delete":false,"product_type":"c1","uid":1158214,"ip_address":"","ucode":"3CAE634618D924","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/46/7e24bad6.jpg","comment_is_top":false,"comment_ctime":1561594936,"is_pvip":true,"replies":[{"id":"38927","content":"ä¹Ÿå¯ä»¥çš„ï¼Œflume kafka sinkä¹Ÿæœ‰å¯¹åº”çš„å‚æ•°è®¾ç½®æ–¹æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561595610,"ip_address":"","comment_id":107668,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561594936","product_id":100029201,"comment_content":"å¦‚æœæ˜¯flumeç»„ä»¶å¯¹æ¥kafkaï¼Œproducerç«¯å‚æ•°åº”è¯¥è®¾ç½®ä¸äº†è¿™ä¹ˆå…¨å§","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455618,"discussion_content":"ä¹Ÿå¯ä»¥çš„ï¼Œflume kafka sinkä¹Ÿæœ‰å¯¹åº”çš„å‚æ•°è®¾ç½®æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561595610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107658,"user_name":"miniå¸Œ","can_delete":false,"product_type":"c1","uid":1043539,"ip_address":"","ucode":"54DFFE0CE0C7EF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/53/dcec6fdc.jpg","comment_is_top":false,"comment_ctime":1561594127,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1561594127","product_id":100029201,"comment_content":"æ˜¯å¦å¯ä»¥æ¯æ¬¡å¾€å‰è¯»ä¸€æ¬¡ï¼Œæœ€æ–°ä½ç§»-1ï¼Œçœ‹æ˜¯å¦æ¶ˆè´¹è¿‡äº†","like_count":0},{"had_liked":false,"id":107655,"user_name":"ï¼¼ï¼ˆï¼ï¼ï¼‰ï¼æœªæ¥çš„é¦–å¸­æ¶æ„å¸ˆ","can_delete":false,"product_type":"c1","uid":1410456,"ip_address":"","ucode":"706558518C9318","user_header":"https://static001.geekbang.org/account/avatar/00/15/85/98/5469f1db.jpg","comment_is_top":false,"comment_ctime":1561593961,"is_pvip":false,"replies":[{"id":"38930","content":"å¯èƒ½çš„ã€‚acks=allè¡¨ç¤ºè¦ç­‰å¾…ISRä¸­çš„å‰¯æœ¬å…¨éƒ¨å†™å…¥æˆåŠŸï¼ŒéISRçš„å‰¯æœ¬ä¾ç„¶å¯èƒ½è½åleader","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561595781,"ip_address":"","comment_id":107655,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561593961","product_id":100029201,"comment_content":"è®¾ç½®æˆack=allï¼Œè¿˜ä¼šå‡ºç°ç¬¬å››æ¡çš„åœºæ™¯å—ï¼Ÿæ¶ˆæ¯è¿˜ä¼šè½åï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455608,"discussion_content":"å¯èƒ½çš„ã€‚acks=allè¡¨ç¤ºè¦ç­‰å¾…ISRä¸­çš„å‰¯æœ¬å…¨éƒ¨å†™å…¥æˆåŠŸï¼ŒéISRçš„å‰¯æœ¬ä¾ç„¶å¯èƒ½è½åleader","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561595781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107636,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1561588814,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561588814","product_id":100029201,"comment_content":"å¢åŠ æ–°çš„åˆ†åŒºçš„æ—¶å€™è®©æ¶ˆè´¹çš„ç»™ç”Ÿäº§è€…å‘ä¸€ä¸ªç¡®è®¤ï¼Œç”Ÿäº§è€…æ”¶åˆ°ç¡®è®¤ä¹‹åæ‰ä¼šå‘æ–°çš„åˆ†åŒºé‡Œé¢å†™æ•°æ®ã€‚","like_count":0}]}