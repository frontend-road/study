{"id":82321,"title":"38 | æ¡ˆä¾‹ç¯‡ï¼šæ€ä¹ˆä½¿ç”¨ tcpdump å’Œ Wireshark åˆ†æç½‘ç»œæµé‡ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬å­¦ä¹ äº† DNS æ€§èƒ½é—®é¢˜çš„åˆ†æå’Œä¼˜åŒ–æ–¹æ³•ã€‚ç®€å•å›é¡¾ä¸€ä¸‹ï¼ŒDNS å¯ä»¥æä¾›åŸŸåå’Œ IP åœ°å€çš„æ˜ å°„å…³ç³»ï¼Œä¹Ÿæ˜¯ä¸€ç§å¸¸ç”¨çš„å…¨å±€è´Ÿè½½å‡è¡¡ï¼ˆGSLBï¼‰å®ç°æ–¹æ³•ã€‚</p><p>é€šå¸¸ï¼Œéœ€è¦æš´éœ²åˆ°å…¬ç½‘çš„æœåŠ¡ï¼Œéƒ½ä¼šç»‘å®šä¸€ä¸ªåŸŸåï¼Œæ—¢æ–¹ä¾¿äº†äººä»¬è®°å¿†ï¼Œä¹Ÿé¿å…äº†åå°æœåŠ¡ IP åœ°å€çš„å˜æ›´å½±å“åˆ°ç”¨æˆ·ã€‚</p><p>ä¸è¿‡è¦æ³¨æ„ï¼ŒDNS è§£æå—åˆ°å„ç§ç½‘ç»œçŠ¶å†µçš„å½±å“ï¼Œæ€§èƒ½å¯èƒ½ä¸ç¨³å®šã€‚æ¯”å¦‚å…¬ç½‘å»¶è¿Ÿå¢å¤§ï¼Œç¼“å­˜è¿‡æœŸå¯¼è‡´è¦é‡æ–°å»ä¸Šæ¸¸æœåŠ¡å™¨è¯·æ±‚ï¼Œæˆ–è€…æµé‡é«˜å³°æ—¶ DNS æœåŠ¡å™¨æ€§èƒ½ä¸è¶³ç­‰ï¼Œéƒ½ä¼šå¯¼è‡´ DNS å“åº”çš„å»¶è¿Ÿå¢å¤§ã€‚</p><p>æ­¤æ—¶ï¼Œå¯ä»¥å€ŸåŠ© nslookup æˆ–è€… dig çš„è°ƒè¯•åŠŸèƒ½ï¼Œåˆ†æ DNS çš„è§£æè¿‡ç¨‹ï¼Œå†é…åˆ ping ç­‰å·¥å…·è°ƒè¯• DNS æœåŠ¡å™¨çš„å»¶è¿Ÿï¼Œä»è€Œå®šä½å‡ºæ€§èƒ½ç“¶é¢ˆã€‚é€šå¸¸ï¼Œä½ å¯ä»¥ç”¨ç¼“å­˜ã€é¢„å–ã€HTTPDNS ç­‰æ–¹æ³•ï¼Œä¼˜åŒ– DNS çš„æ€§èƒ½ã€‚</p><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬ç”¨åˆ°çš„pingï¼Œæ˜¯ä¸€ä¸ªæœ€å¸¸ç”¨çš„æµ‹è¯•æœåŠ¡å»¶è¿Ÿçš„å·¥å…·ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œping å¯ä»¥å¸®æˆ‘ä»¬å®šä½å‡ºå»¶è¿Ÿé—®é¢˜ï¼Œä¸è¿‡æœ‰æ—¶å€™ï¼Œ ping æœ¬èº«ä¹Ÿä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚è¿™æ—¶ï¼Œå°±éœ€è¦æˆ‘ä»¬æŠ“å–ping å‘½ä»¤æ‰§è¡Œæ—¶æ”¶å‘çš„ç½‘ç»œåŒ…ï¼Œç„¶ååˆ†æè¿™äº›ç½‘ç»œåŒ…ï¼Œè¿›è€Œæ‰¾å‡ºé—®é¢˜æ ¹æºã€‚</p><p>tcpdump å’Œ Wireshark å°±æ˜¯æœ€å¸¸ç”¨çš„ç½‘ç»œæŠ“åŒ…å’Œåˆ†æå·¥å…·ï¼Œæ›´æ˜¯åˆ†æç½‘ç»œæ€§èƒ½å¿…ä¸å¯å°‘çš„åˆ©å™¨ã€‚</p><!-- [[[read_end]]] --><ul>\n<li>\n<p>tcpdump ä»…æ”¯æŒå‘½ä»¤è¡Œæ ¼å¼ä½¿ç”¨ï¼Œå¸¸ç”¨åœ¨æœåŠ¡å™¨ä¸­æŠ“å–å’Œåˆ†æç½‘ç»œåŒ…ã€‚</p>\n</li>\n<li>\n<p>Wireshark é™¤äº†å¯ä»¥æŠ“åŒ…å¤–ï¼Œè¿˜æä¾›äº†å¼ºå¤§çš„å›¾å½¢ç•Œé¢å’Œæ±‡æ€»åˆ†æå·¥å…·ï¼Œåœ¨åˆ†æå¤æ‚çš„ç½‘ç»œæƒ…æ™¯æ—¶ï¼Œå°¤ä¸ºç®€å•å’Œå®ç”¨ã€‚</p>\n</li>\n</ul><p>å› è€Œï¼Œåœ¨å®é™…åˆ†æç½‘ç»œæ€§èƒ½æ—¶ï¼Œå…ˆç”¨ tcpdump æŠ“åŒ…ï¼Œåç”¨ Wireshark åˆ†æï¼Œä¹Ÿæ˜¯ä¸€ç§å¸¸ç”¨çš„æ–¹æ³•ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘å°±å¸¦ä½ ä¸€èµ·çœ‹çœ‹ï¼Œæ€ä¹ˆä½¿ç”¨ tcpdump å’Œ Wireshark ï¼Œæ¥åˆ†æç½‘ç»œçš„æ€§èƒ½é—®é¢˜ã€‚</p><h2>æ¡ˆä¾‹å‡†å¤‡</h2><p>æœ¬æ¬¡æ¡ˆä¾‹è¿˜æ˜¯åŸºäº Ubuntu 18.04ï¼ŒåŒæ ·é€‚ç”¨äºå…¶ä»–çš„ Linux ç³»ç»Ÿã€‚æˆ‘ä½¿ç”¨çš„æ¡ˆä¾‹ç¯å¢ƒæ˜¯è¿™æ ·çš„ï¼š</p><ul>\n<li>\n<p>æœºå™¨é…ç½®ï¼š2 CPUï¼Œ8GB å†…å­˜ã€‚</p>\n</li>\n<li>\n<p>é¢„å…ˆå®‰è£… tcpdumpã€Wireshark ç­‰å·¥å…·ï¼Œå¦‚ï¼š</p>\n</li>\n</ul><pre><code># Ubuntu\napt-get install tcpdump wireshark\n\n# CentOS\nyum install -y tcpdump wireshark\n</code></pre><p>ç”±äº Wireshark çš„å›¾å½¢ç•Œé¢ï¼Œå¹¶ä¸èƒ½é€šè¿‡ SSH ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘æ¨èä½ åœ¨æœ¬åœ°æœºå™¨ï¼ˆæ¯”å¦‚ Windowsï¼‰ä¸­å®‰è£…ã€‚ä½ å¯ä»¥åˆ° <a href=\"https://www.wireshark.org/\">https://www.wireshark.org/</a> ä¸‹è½½å¹¶å®‰è£… Wiresharkã€‚</p><blockquote>\n<p>è·Ÿä»¥å‰ä¸€æ ·ï¼Œæ¡ˆä¾‹ä¸­æ‰€æœ‰å‘½ä»¤ï¼Œéƒ½é»˜è®¤ä»¥ root ç”¨æˆ·ï¼ˆåœ¨Windowsä¸­ï¼Œè¿è¡ŒWiresharkæ—¶é™¤å¤–ï¼‰è¿è¡Œã€‚å¦‚æœä½ æ˜¯ç”¨æ™®é€šç”¨æˆ·èº«ä»½ç™»é™†ç³»ç»Ÿï¼Œè¯·è¿è¡Œ sudo su root å‘½ä»¤åˆ‡æ¢åˆ° root ç”¨æˆ·ã€‚</p>\n</blockquote><h2>å†æ¢ ping</h2><p>å‰é¢è®²è¿‡ï¼Œping æ˜¯ä¸€ç§æœ€å¸¸ç”¨çš„ç½‘ç»œå·¥å…·ï¼Œå¸¸ç”¨æ¥æ¢æµ‹ç½‘ç»œä¸»æœºä¹‹é—´çš„è¿é€šæ€§ä»¥åŠå»¶è¿Ÿã€‚å…³äº ping çš„åŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘åœ¨å‰é¢çš„ <a href=\"https://time.geekbang.org/column/article/81057\">Linuxç½‘ç»œåŸºç¡€ç¯‡</a>  å·²ç»ç®€å•ä»‹ç»è¿‡ï¼Œè€Œ DNS ç¼“æ…¢çš„æ¡ˆä¾‹ä¸­ï¼Œä¹Ÿå¤šæ¬¡ç”¨åˆ°äº† ping æµ‹è¯• DNS æœåŠ¡å™¨çš„å»¶è¿Ÿï¼ˆRTTï¼‰ã€‚</p><p>ä¸è¿‡ï¼Œè™½ç„¶ ping æ¯”è¾ƒç®€å•ï¼Œä½†æœ‰æ—¶å€™ä½ ä¼šå‘ç°ï¼Œping å·¥å…·æœ¬èº«ä¹Ÿå¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œæ¯”å¦‚è¿è¡Œç¼“æ…¢ï¼Œä½†å®é™…ç½‘ç»œå»¶è¿Ÿå´å¹¶ä¸å¤§çš„æƒ…å†µã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼ŒSSH ç™»å½•åˆ°æ¡ˆä¾‹æœºå™¨ä¸­ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ¥æµ‹è¯•æ¡ˆä¾‹æœºå™¨ä¸æå®¢é‚¦ç§‘æŠ€å®˜ç½‘çš„è¿é€šæ€§å’Œå»¶è¿Ÿã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™ä¸ªè¾“å‡ºï¼š</p><pre><code># ping 3 æ¬¡ï¼ˆé»˜è®¤æ¯æ¬¡å‘é€é—´éš”1ç§’ï¼‰\n# å‡è®¾DNSæœåŠ¡å™¨è¿˜æ˜¯ä¸Šä¸€æœŸé…ç½®çš„114.114.114.114\n$ ping -c3 geektime.org\nPING geektime.org (35.190.27.188) 56(84) bytes of data.\n64 bytes from 35.190.27.188 (35.190.27.188): icmp_seq=1 ttl=43 time=36.8 ms\n64 bytes from 35.190.27.188 (35.190.27.188): icmp_seq=2 ttl=43 time=31.1 ms\n64 bytes from 35.190.27.188 (35.190.27.188): icmp_seq=3 ttl=43 time=31.2 ms\n\n--- geektime.org ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 11049ms\nrtt min/avg/max/mdev = 31.146/33.074/36.809/2.649 ms\n</code></pre><p>ping çš„è¾“å‡ºç•Œé¢ï¼Œ  <a href=\"https://time.geekbang.org/column/article/81057\">Linuxç½‘ç»œåŸºç¡€ç¯‡</a> ä¸­æˆ‘ä»¬å·²ç»å­¦è¿‡ï¼Œä½ å¯ä»¥å…ˆå¤ä¹ ä¸€ä¸‹ï¼Œè‡ªå·±è§£è¯»å¹¶ä¸”åˆ†æè¿™æ¬¡çš„è¾“å‡ºã€‚</p><p>ä¸è¿‡è¦æ³¨æ„ï¼Œå‡å¦‚ä½ è¿è¡Œæ—¶å‘ç° ping å¾ˆå¿«å°±ç»“æŸäº†ï¼Œé‚£å°±æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå†é‡è¯•ä¸€ä¸‹ã€‚è‡³äºè¿™æ¡å‘½ä»¤çš„å«ä¹‰ï¼Œç¨åæˆ‘ä»¬å†åšè§£é‡Šã€‚</p><pre><code># ç¦æ­¢æ¥æ”¶ä»DNSæœåŠ¡å™¨å‘é€è¿‡æ¥å¹¶åŒ…å«googleusercontentçš„åŒ…\n$ iptables -I INPUT -p udp --sport 53 -m string --string googleusercontent --algo bm -j DROP\n</code></pre><p>æ ¹æ® ping çš„è¾“å‡ºï¼Œä½ å¯ä»¥å‘ç°ï¼Œgeektime.org è§£æåçš„ IP åœ°å€æ˜¯ 35.190.27.188ï¼Œè€Œåä¸‰æ¬¡ ping è¯·æ±‚éƒ½å¾—åˆ°äº†å“åº”ï¼Œå»¶è¿Ÿï¼ˆRTTï¼‰éƒ½æ˜¯ 30ms å¤šä¸€ç‚¹ã€‚</p><p>ä½†æ±‡æ€»çš„åœ°æ–¹ï¼Œå°±æœ‰ç‚¹å„¿æ„æ€äº†ã€‚3æ¬¡å‘é€ï¼Œæ”¶åˆ°3æ¬¡å“åº”ï¼Œæ²¡æœ‰ä¸¢åŒ…ï¼Œä½†ä¸‰æ¬¡å‘é€å’Œæ¥å—çš„æ€»æ—¶é—´å±…ç„¶è¶…è¿‡äº† 11sï¼ˆ11049msï¼‰ï¼Œè¿™å°±æœ‰äº›ä¸å¯æ€è®®äº†å§ã€‚</p><p>ä¼šæƒ³èµ·ä¸Šä¸€èŠ‚çš„ DNS è§£æé—®é¢˜ï¼Œä½ å¯èƒ½ä¼šæ€€ç–‘ï¼Œè¿™å¯èƒ½æ˜¯ DNS è§£æç¼“æ…¢çš„é—®é¢˜ã€‚ä½†åˆ°åº•æ˜¯ä¸æ˜¯å‘¢ï¼Ÿ</p><p>å†å›å»çœ‹ ping çš„è¾“å‡ºï¼Œä¸‰æ¬¡ ping è¯·æ±‚ä¸­ï¼Œç”¨çš„éƒ½æ˜¯ IP åœ°å€ï¼Œè¯´æ˜ ping åªéœ€è¦åœ¨æœ€å¼€å§‹è¿è¡Œæ—¶ï¼Œè§£æä¸€æ¬¡å¾—åˆ° IPï¼Œåé¢å°±å¯ä»¥åªç”¨ IPäº†ã€‚</p><p>æˆ‘ä»¬å†ç”¨ nslookup è¯•è¯•ã€‚åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä¸‹é¢çš„ nslookup å‘½ä»¤ï¼Œæ³¨æ„ï¼Œè¿™æ¬¡æˆ‘ä»¬åŒæ ·åŠ äº† time å‘½ä»¤ï¼Œè¾“å‡º nslookup çš„æ‰§è¡Œæ—¶é—´ï¼š</p><pre><code>$ time nslookup geektime.org\nServer:\t\t114.114.114.114\nAddress:\t114.114.114.114#53\n\nNon-authoritative answer:\nName:\tgeektime.org\nAddress: 35.190.27.188\n\n\nreal\t0m0.044s\nuser\t0m0.006s\nsys\t0m0.003s\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŸŸåè§£æè¿˜æ˜¯å¾ˆå¿«çš„ï¼Œåªéœ€è¦ 44msï¼Œæ˜¾ç„¶æ¯” 11s çŸ­äº†å¾ˆå¤šã€‚</p><p>åˆ°è¿™é‡Œï¼Œå†å¾€åè¯¥æ€ä¹ˆåˆ†æå‘¢ï¼Ÿå…¶å®ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨ tcpdump æŠ“åŒ…ï¼ŒæŸ¥çœ‹ ping åœ¨æ”¶å‘å“ªäº›ç½‘ç»œåŒ…ã€‚</p><p>æˆ‘ä»¬å†æ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯ï¼ˆç»ˆç«¯äºŒï¼‰ï¼ŒSSH ç™»å½•æ¡ˆä¾‹æœºå™¨åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>$ tcpdump -nn udp port 53 or host 35.190.27.188\n</code></pre><p>å½“ç„¶ï¼Œä½ å¯ä»¥ç›´æ¥ç”¨ tcpdump ä¸åŠ ä»»ä½•å‚æ•°æ¥æŠ“åŒ…ï¼Œä½†é‚£æ ·çš„è¯ï¼Œå°±å¯èƒ½æŠ“å–åˆ°å¾ˆå¤šä¸ç›¸å¹²çš„åŒ…ã€‚ç”±äºæˆ‘ä»¬å·²ç»æ‰§è¡Œè¿‡ ping å‘½ä»¤ï¼ŒçŸ¥é“äº† geekbang.org çš„ IP åœ°å€æ˜¯35.190.27.188ï¼Œä¹ŸçŸ¥é“ ping å‘½ä»¤ä¼šæ‰§è¡Œ DNS æŸ¥è¯¢ã€‚æ‰€ä»¥ï¼Œä¸Šé¢è¿™æ¡å‘½ä»¤ï¼Œå°±æ˜¯åŸºäºè¿™ä¸ªè§„åˆ™è¿›è¡Œè¿‡æ»¤ã€‚</p><p>æˆ‘æ¥å…·ä½“è§£é‡Šä¸€ä¸‹è¿™æ¡å‘½ä»¤ã€‚</p><ul>\n<li>\n<p>-nn ï¼Œè¡¨ç¤ºä¸è§£ææŠ“åŒ…ä¸­çš„åŸŸåï¼ˆå³ä¸åå‘è§£æï¼‰ã€åè®®ä»¥åŠç«¯å£å·ã€‚</p>\n</li>\n<li>\n<p>udp port 53 ï¼Œè¡¨ç¤ºåªæ˜¾ç¤º UDPåè®®çš„ç«¯å£å·ï¼ˆåŒ…æ‹¬æºç«¯å£å’Œç›®çš„ç«¯å£ï¼‰ä¸º53çš„åŒ…ã€‚</p>\n</li>\n<li>\n<p>host 35.190.27.188 ï¼Œè¡¨ç¤ºåªæ˜¾ç¤º IP åœ°å€ï¼ˆåŒ…æ‹¬æºåœ°å€å’Œç›®çš„åœ°å€ï¼‰ä¸º35.190.27.188çš„åŒ…ã€‚</p>\n</li>\n<li>\n<p>è¿™ä¸¤ä¸ªè¿‡æ»¤æ¡ä»¶ä¸­é—´çš„â€œ or â€ï¼Œè¡¨ç¤ºæˆ–çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ»¡è¶³ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶ä¸­çš„ä»»ä¸€ä¸ªï¼Œå°±å¯ä»¥å±•ç¤ºå‡ºæ¥ã€‚</p>\n</li>\n</ul><p>æ¥ä¸‹æ¥ï¼Œå›åˆ°ç»ˆç«¯ä¸€ï¼Œæ‰§è¡Œç›¸åŒçš„ ping å‘½ä»¤ï¼š</p><pre><code>$ ping -c3 geektime.org\n...\n--- geektime.org ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 11095ms\nrtt min/avg/max/mdev = 81.473/81.572/81.757/0.130 ms\n</code></pre><p>å‘½ä»¤ç»“æŸåï¼Œå†å›åˆ°ç»ˆç«¯äºŒä¸­ï¼ŒæŸ¥çœ‹ tcpdump çš„è¾“å‡ºï¼š</p><pre><code>tcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes\n14:02:31.100564 IP 172.16.3.4.56669 &gt; 114.114.114.114.53: 36909+ A? geektime.org. (30)\n14:02:31.507699 IP 114.114.114.114.53 &gt; 172.16.3.4.56669: 36909 1/0/0 A 35.190.27.188 (46)\n14:02:31.508164 IP 172.16.3.4 &gt; 35.190.27.188: ICMP echo request, id 4356, seq 1, length 64\n14:02:31.539667 IP 35.190.27.188 &gt; 172.16.3.4: ICMP echo reply, id 4356, seq 1, length 64\n14:02:31.539995 IP 172.16.3.4.60254 &gt; 114.114.114.114.53: 49932+ PTR? 188.27.190.35.in-addr.arpa. (44)\n14:02:36.545104 IP 172.16.3.4.60254 &gt; 114.114.114.114.53: 49932+ PTR? 188.27.190.35.in-addr.arpa. (44)\n14:02:41.551284 IP 172.16.3.4 &gt; 35.190.27.188: ICMP echo request, id 4356, seq 2, length 64\n14:02:41.582363 IP 35.190.27.188 &gt; 172.16.3.4: ICMP echo reply, id 4356, seq 2, length 64\n14:02:42.552506 IP 172.16.3.4 &gt; 35.190.27.188: ICMP echo request, id 4356, seq 3, length 64\n14:02:42.583646 IP 35.190.27.188 &gt; 172.16.3.4: ICMP echo reply, id 4356, seq 3, length 64\n</code></pre><p>è¿™æ¬¡è¾“å‡ºä¸­ï¼Œå‰ä¸¤è¡Œï¼Œè¡¨ç¤º tcpdump çš„é€‰é¡¹ä»¥åŠæ¥å£çš„åŸºæœ¬ä¿¡æ¯ï¼›ä»ç¬¬ä¸‰è¡Œå¼€å§‹ï¼Œå°±æ˜¯æŠ“å–åˆ°çš„ç½‘ç»œåŒ…çš„è¾“å‡ºã€‚è¿™äº›è¾“å‡ºçš„æ ¼å¼ï¼Œéƒ½æ˜¯ <code>æ—¶é—´æˆ³ åè®® æºåœ°å€.æºç«¯å£ &gt; ç›®çš„åœ°å€.ç›®çš„ç«¯å£ ç½‘ç»œåŒ…è¯¦ç»†ä¿¡æ¯</code>ï¼ˆè¿™æ˜¯æœ€åŸºæœ¬çš„æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡é€‰é¡¹å¢åŠ å…¶ä»–å­—æ®µï¼‰ã€‚</p><p>å‰é¢çš„å­—æ®µï¼Œéƒ½æ¯”è¾ƒå¥½ç†è§£ã€‚ä½†ç½‘ç»œåŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼Œæœ¬èº«æ ¹æ®åè®®çš„ä¸åŒè€Œä¸åŒã€‚æ‰€ä»¥ï¼Œè¦ç†è§£è¿™äº›ç½‘ç»œåŒ…çš„è¯¦ç»†å«ä¹‰ï¼Œå°±è¦å¯¹å¸¸ç”¨ç½‘ç»œåè®®çš„åŸºæœ¬æ ¼å¼ä»¥åŠäº¤äº’åŸç†ï¼Œæœ‰åŸºæœ¬çš„äº†è§£ã€‚</p><p>å½“ç„¶ï¼Œå®é™…ä¸Šï¼Œè¿™äº›å†…å®¹éƒ½ä¼šè®°å½•åœ¨ IETFï¼ˆ äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼‰å‘å¸ƒçš„ <a href=\"https://tools.ietf.org/rfc/index\">RFC</a>ï¼ˆè¯·æ±‚æ„è§ç¨¿ï¼‰ä¸­ã€‚</p><p>æ¯”å¦‚ï¼Œç¬¬ä¸€æ¡å°±è¡¨ç¤ºï¼Œä»æœ¬åœ° IP å‘é€åˆ° 114.114.114.114 çš„ A è®°å½•æŸ¥è¯¢è¯·æ±‚ï¼Œå®ƒçš„æŠ¥æ–‡æ ¼å¼è®°å½•åœ¨ RFC1035 ä¸­ï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"https://www.ietf.org/rfc/rfc1035.txt\">è¿™é‡Œ</a>æŸ¥çœ‹ã€‚åœ¨è¿™ä¸ª tcpdump çš„è¾“å‡ºä¸­ï¼Œ</p><ul>\n<li>\n<p>36909+ è¡¨ç¤ºæŸ¥è¯¢æ ‡è¯†å€¼ï¼Œå®ƒä¹Ÿä¼šå‡ºç°åœ¨å“åº”ä¸­ï¼ŒåŠ å·è¡¨ç¤ºå¯ç”¨é€’å½’æŸ¥è¯¢ã€‚</p>\n</li>\n<li>\n<p>A? è¡¨ç¤ºæŸ¥è¯¢ A è®°å½•ã€‚</p>\n</li>\n<li>\n<p>geektime.org. è¡¨ç¤ºå¾…æŸ¥è¯¢çš„åŸŸåã€‚</p>\n</li>\n<li>\n<p>30 è¡¨ç¤ºæŠ¥æ–‡é•¿åº¦ã€‚</p>\n</li>\n</ul><p>æ¥ä¸‹æ¥çš„ä¸€æ¡ï¼Œåˆ™æ˜¯ä» 114.114.114.114 å‘é€å›æ¥çš„ DNS å“åº”â€”â€”åŸŸå geektime.org. çš„ A è®°å½•å€¼ä¸º 35.190.27.188ã€‚</p><p>ç¬¬ä¸‰æ¡å’Œç¬¬å››æ¡ï¼Œæ˜¯ ICMP echo request å’Œ ICMP echo replyï¼Œå“åº”åŒ…çš„æ—¶é—´æˆ³ 14:02:31.539667ï¼Œå‡å»è¯·æ±‚åŒ…çš„æ—¶é—´æˆ³ 14:02:31.508164 ï¼Œå°±å¯ä»¥å¾—åˆ°ï¼Œè¿™æ¬¡ ICMP æ‰€ç”¨æ—¶é—´ä¸º 30msã€‚è¿™çœ‹èµ·æ¥å¹¶æ²¡æœ‰é—®é¢˜ã€‚</p><p>ä½†éšåçš„ä¸¤æ¡åå‘åœ°å€è§£æ PTR è¯·æ±‚ï¼Œå°±æ¯”è¾ƒå¯ç–‘äº†ã€‚å› ä¸ºæˆ‘ä»¬åªçœ‹åˆ°äº†è¯·æ±‚åŒ…ï¼Œå´æ²¡æœ‰åº”ç­”åŒ…ã€‚ä»”ç»†è§‚å¯Ÿå®ƒä»¬çš„æ—¶é—´ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸¤æ¡è®°å½•éƒ½æ˜¯å‘å‡ºå 5s æ‰å‡ºç°ä¸‹ä¸€ä¸ªç½‘ç»œåŒ…ï¼Œä¸¤æ¡ PTR è®°å½•å°±æ¶ˆè€—äº† 10sã€‚</p><p>å†å¾€ä¸‹çœ‹ï¼Œæœ€åçš„å››ä¸ªåŒ…ï¼Œåˆ™æ˜¯ä¸¤æ¬¡æ­£å¸¸çš„ ICMP è¯·æ±‚å’Œå“åº”ï¼Œæ ¹æ®æ—¶é—´æˆ³è®¡ç®—å…¶å»¶è¿Ÿï¼Œä¹Ÿæ˜¯ 30msã€‚</p><p>åˆ°è¿™é‡Œï¼Œå…¶å®æˆ‘ä»¬ä¹Ÿå°±æ‰¾åˆ°äº† ping ç¼“æ…¢çš„æ ¹æºï¼Œæ­£æ˜¯ä¸¤æ¬¡ PTR è¯·æ±‚æ²¡æœ‰å¾—åˆ°å“åº”è€Œè¶…æ—¶å¯¼è‡´çš„ã€‚PTR åå‘åœ°å€è§£æçš„ç›®çš„ï¼Œæ˜¯ä» IP åœ°å€åæŸ¥å‡ºåŸŸåï¼Œä½†äº‹å®ä¸Šï¼Œå¹¶éæ‰€æœ‰IP åœ°å€éƒ½ä¼šå®šä¹‰ PTR è®°å½•ï¼Œæ‰€ä»¥ PTR æŸ¥è¯¢å¾ˆå¯èƒ½ä¼šå¤±è´¥ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨ä½ ä½¿ç”¨ ping æ—¶ï¼Œå¦‚æœå‘ç°ç»“æœä¸­çš„å»¶è¿Ÿå¹¶ä¸å¤§ï¼Œè€Œ ping å‘½ä»¤æœ¬èº«å´å¾ˆæ…¢ï¼Œä¸è¦æ…Œï¼Œæœ‰å¯èƒ½æ˜¯èƒŒåçš„ PTR åœ¨æé¬¼ã€‚</p><p>çŸ¥é“é—®é¢˜åï¼Œè§£å†³èµ·æ¥å°±æ¯”è¾ƒç®€å•äº†ï¼Œåªè¦ç¦æ­¢ PTR å°±å¯ä»¥ã€‚è¿˜æ˜¯è€è·¯å­ï¼Œæ‰§è¡Œ man ping å‘½ä»¤ï¼ŒæŸ¥è¯¢ä½¿ç”¨æ‰‹å†Œï¼Œå°±å¯ä»¥æ‰¾å‡ºç›¸åº”çš„æ–¹æ³•ï¼Œå³åŠ ä¸Š -n é€‰é¡¹ç¦æ­¢åç§°è§£æã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code>$ ping -n -c3 geektime.org\nPING geektime.org (35.190.27.188) 56(84) bytes of data.\n64 bytes from 35.190.27.188: icmp_seq=1 ttl=43 time=33.5 ms\n64 bytes from 35.190.27.188: icmp_seq=2 ttl=43 time=39.0 ms\n64 bytes from 35.190.27.188: icmp_seq=3 ttl=43 time=32.8 ms\n\n--- geektime.org ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2002ms\nrtt min/avg/max/mdev = 32.879/35.160/39.030/2.755 ms\n</code></pre><p>ä½ å¯ä»¥å‘ç°ï¼Œç°åœ¨åªéœ€è¦ 2s å°±å¯ä»¥ç»“æŸï¼Œæ¯”åˆšæ‰çš„ 11s å¯æ˜¯å¿«å¤šäº†ã€‚</p><p>åˆ°è¿™é‡Œï¼Œ æˆ‘å°±å¸¦ä½ ä¸€èµ·ä½¿ç”¨ tcpdump ï¼Œè§£å†³äº†ä¸€ä¸ªæœ€å¸¸è§çš„ ping å·¥ä½œç¼“æ…¢çš„é—®é¢˜ã€‚</p><p>æ¡ˆä¾‹æœ€åï¼Œå¦‚æœä½ åœ¨å¼€å§‹æ—¶ï¼Œæ‰§è¡Œäº† iptables å‘½ä»¤ï¼Œé‚£ä¹Ÿä¸è¦å¿˜äº†åˆ æ‰å®ƒï¼š</p><pre><code>$ iptables -D INPUT -p udp --sport 53 -m string --string googleusercontent --algo bm -j DROP\n</code></pre><p>ä¸è¿‡ï¼Œåˆ é™¤åä½ è‚¯å®šè¿˜æœ‰ç–‘é—®ï¼Œæ˜æ˜æˆ‘ä»¬çš„æ¡ˆä¾‹è·Ÿ Google æ²¡å•¥å…³ç³»ï¼Œä¸ºä»€ä¹ˆè¦æ ¹æ® googleusercontent ï¼Œè¿™ä¸ªæ¯«ä¸ç›¸å…³çš„å­—ç¬¦ä¸²æ¥è¿‡æ»¤åŒ…å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œå¦‚æœæ¢ä¸€ä¸ª DNS æœåŠ¡å™¨ï¼Œå°±å¯ä»¥ç”¨ PTR åæŸ¥åˆ° 35.190.27.188 æ‰€å¯¹åº”çš„åŸŸåï¼š</p><pre><code> $ nslookup -type=PTR 35.190.27.188 8.8.8.8\nServer:\t8.8.8.8\nAddress:\t8.8.8.8#53\nNon-authoritative answer:\n188.27.190.35.in-addr.arpa\tname = 188.27.190.35.bc.googleusercontent.com.\nAuthoritative answers can be found from:\n</code></pre><p>ä½ çœ‹ï¼Œè™½ç„¶æŸ¥åˆ°äº† PTR è®°å½•ï¼Œä½†ç»“æœå¹¶é geekbang.orgï¼Œè€Œæ˜¯ 188.27.190.35.bc.googleusercontent.comã€‚å…¶å®ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œæ¡ˆä¾‹å¼€å§‹æ—¶å°†åŒ…å« googleusercontent çš„ä¸¢å¼ƒåï¼Œping å°±æ…¢äº†ã€‚å› ä¸º iptables ï¼Œå®é™…ä¸Šæ˜¯æŠŠ PTR å“åº”ç»™ä¸¢äº†ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ PTR è¯·æ±‚è¶…æ—¶ã€‚</p><p>tcpdump å¯ä»¥è¯´æ˜¯ç½‘ç»œæ€§èƒ½åˆ†ææœ€æœ‰æ•ˆçš„åˆ©å™¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å†å¸¦ä½ ä¸€èµ·çœ‹çœ‹ tcpdump çš„æ›´å¤šä½¿ç”¨æ–¹æ³•ã€‚</p><h2>tcpdump</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œtcpdump ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€ä¸ªç½‘ç»œåˆ†æå·¥å…·ã€‚å®ƒåŸºäº <a href=\"https://www.tcpdump.org/\">libpcap</a>  ï¼Œåˆ©ç”¨å†…æ ¸ä¸­çš„ AF_PACKET å¥—æ¥å­—ï¼ŒæŠ“å–ç½‘ç»œæ¥å£ä¸­ä¼ è¾“çš„ç½‘ç»œåŒ…ï¼›å¹¶æä¾›äº†å¼ºå¤§çš„è¿‡æ»¤è§„åˆ™ï¼Œå¸®ä½ ä»å¤§é‡çš„ç½‘ç»œåŒ…ä¸­ï¼ŒæŒ‘å‡ºæœ€æƒ³å…³æ³¨çš„ä¿¡æ¯ã€‚</p><p>tcpdump ä¸ºä½ å±•ç¤ºäº†æ¯ä¸ªç½‘ç»œåŒ…çš„è¯¦ç»†ç»†èŠ‚ï¼Œè¿™å°±è¦æ±‚ï¼Œåœ¨ä½¿ç”¨å‰ï¼Œä½ å¿…é¡»è¦å¯¹ç½‘ç»œåè®®æœ‰åŸºæœ¬äº†è§£ã€‚è€Œè¦äº†è§£ç½‘ç»œåè®®çš„è¯¦ç»†è®¾è®¡å’Œå®ç°ç»†èŠ‚ï¼Œ <a href=\"https://www.rfc-editor.org/rfc-index.html\">RFC</a> å½“ç„¶æ˜¯æœ€æƒå¨çš„èµ„æ–™ã€‚</p><p>ä¸è¿‡ï¼ŒRFC çš„å†…å®¹ï¼Œå¯¹åˆå­¦è€…æ¥è¯´å¯èƒ½å¹¶ä¸å‹å¥½ã€‚å¦‚æœä½ å¯¹ç½‘ç»œåè®®è¿˜ä¸å¤ªäº†è§£ï¼Œæ¨èä½ å»å­¦ã€ŠTCP/IPè¯¦è§£ã€‹ï¼Œç‰¹åˆ«æ˜¯ç¬¬ä¸€å·çš„ TCP/IP åè®®æ—ã€‚è¿™æ˜¯æ¯ä¸ªç¨‹åºå‘˜éƒ½è¦æŒæ¡çš„æ ¸å¿ƒåŸºç¡€çŸ¥è¯†ã€‚</p><p>å†å›åˆ° tcpdumpå·¥å…·æœ¬èº«ï¼Œå®ƒçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä¹Ÿå°±æ˜¯ <strong>tcpdump [é€‰é¡¹] [è¿‡æ»¤è¡¨è¾¾å¼]</strong>ã€‚å½“ç„¶ï¼Œé€‰é¡¹å’Œè¡¨è¾¾å¼çš„å¤–é¢éƒ½åŠ äº†ä¸­æ‹¬å·ï¼Œè¡¨æ˜å®ƒä»¬éƒ½æ˜¯å¯é€‰çš„ã€‚</p><blockquote>\n<p>æç¤ºï¼šåœ¨ Linux å·¥å…·ä¸­ï¼Œå¦‚æœä½ åœ¨æ–‡æ¡£ä¸­çœ‹åˆ°ï¼Œé€‰é¡¹æ”¾åœ¨ä¸­æ‹¬å·é‡Œï¼Œå°±è¯´æ˜è¿™æ˜¯ä¸€ä¸ªå¯é€‰é€‰é¡¹ã€‚è¿™æ—¶å€™å°±è¦ç•™æ„ä¸€ä¸‹ï¼Œè¿™äº›é€‰é¡¹æ˜¯ä¸æ˜¯æœ‰é»˜è®¤å€¼ã€‚</p>\n</blockquote><p>æŸ¥çœ‹ tcpdump çš„ <a href=\"https://www.tcpdump.org/manpages/tcpdump.1.html\">æ‰‹å†Œ</a>  ï¼Œä»¥åŠ pcap-filter çš„<a href=\"https://www.tcpdump.org/manpages/pcap-filter.7.html\">æ‰‹å†Œ</a>ï¼Œä½ ä¼šå‘ç°ï¼Œtcpdump æä¾›äº†å¤§é‡çš„é€‰é¡¹ä»¥åŠå„å¼å„æ ·çš„è¿‡æ»¤è¡¨è¾¾å¼ã€‚ä¸è¿‡ä¸è¦æ‹…å¿ƒï¼Œåªéœ€è¦æŒæ¡ä¸€äº›å¸¸ç”¨é€‰é¡¹å’Œè¿‡æ»¤è¡¨è¾¾å¼ï¼Œå°±å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†åœºæ™¯çš„éœ€è¦äº†ã€‚</p><p>ä¸ºäº†å¸®ä½ æ›´å¿«ä¸Šæ‰‹ tcpdump çš„ä½¿ç”¨ï¼Œæˆ‘åœ¨è¿™é‡Œä¹Ÿå¸®ä½ æ•´ç†äº†ä¸€äº›æœ€å¸¸è§çš„ç”¨æ³•ï¼Œå¹¶ä¸”ç»˜åˆ¶æˆäº†è¡¨æ ¼ï¼Œä½ å¯ä»¥å‚è€ƒä½¿ç”¨ã€‚</p><p>é¦–å…ˆï¼Œæ¥çœ‹ä¸€ä¸‹å¸¸ç”¨çš„å‡ ä¸ªé€‰é¡¹ã€‚åœ¨ä¸Šé¢çš„ping æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ç”¨è¿‡  <strong>-nn</strong> é€‰é¡¹ï¼Œè¡¨ç¤ºä¸ç”¨å¯¹ IP åœ°å€å’Œç«¯å£å·è¿›è¡Œåç§°è§£æã€‚å…¶ä»–å¸¸ç”¨é€‰é¡¹ï¼Œæˆ‘ç”¨ä¸‹é¢è¿™å¼ è¡¨æ ¼æ¥è§£é‡Šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/85/ff/859d3b5c0071335429620a3fcdde4fff.png?wh=1655*994\" alt=\"\"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹å¸¸ç”¨çš„è¿‡æ»¤è¡¨è¾¾å¼ã€‚åˆšåˆšç”¨è¿‡çš„æ˜¯  udp port 53 or host 35.190.27.188 ï¼Œè¡¨ç¤ºæŠ“å– DNS åè®®çš„è¯·æ±‚å’Œå“åº”åŒ…ï¼Œä»¥åŠæºåœ°å€æˆ–ç›®çš„åœ°å€ä¸º 35.190.27.188 çš„åŒ…ã€‚</p><p>å…¶ä»–å¸¸ç”¨çš„è¿‡æ»¤é€‰é¡¹ï¼Œæˆ‘ä¹Ÿæ•´ç†æˆäº†ä¸‹é¢è¿™ä¸ªè¡¨æ ¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/48/b3/4870a28c032bdd2a26561604ae2f7cb3.png?wh=1660*1129\" alt=\"\"></p><p>æœ€åï¼Œå†æ¬¡å¼ºè°ƒ tcpdump çš„è¾“å‡ºæ ¼å¼ï¼Œæˆ‘åœ¨å‰é¢å·²ç»ä»‹ç»äº†å®ƒçš„åŸºæœ¬æ ¼å¼ï¼š</p><pre><code>æ—¶é—´æˆ³ åè®® æºåœ°å€.æºç«¯å£ &gt; ç›®çš„åœ°å€.ç›®çš„ç«¯å£ ç½‘ç»œåŒ…è¯¦ç»†ä¿¡æ¯\n</code></pre><p>å…¶ä¸­ï¼Œç½‘ç»œåŒ…çš„è¯¦ç»†ä¿¡æ¯å–å†³äºåè®®ï¼Œä¸åŒåè®®å±•ç¤ºçš„æ ¼å¼ä¹Ÿä¸åŒã€‚æ‰€ä»¥ï¼Œæ›´è¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•ï¼Œè¿˜æ˜¯éœ€è¦ä½ å»æŸ¥è¯¢ tcpdump çš„ <a href=\"https://www.tcpdump.org/manpages/tcpdump.1.html\">man</a> æ‰‹å†Œï¼ˆæ‰§è¡Œ man tcpdump ä¹Ÿå¯ä»¥å¾—åˆ°ï¼‰ã€‚</p><p>ä¸è¿‡ï¼Œè®²äº†è¿™ä¹ˆå¤šï¼Œä½ åº”è¯¥ä¹Ÿå‘ç°äº†ã€‚tcpdump è™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œå¯æ˜¯è¾“å‡ºæ ¼å¼å´å¹¶ä¸ç›´è§‚ã€‚ç‰¹åˆ«æ˜¯ï¼Œå½“ç³»ç»Ÿä¸­ç½‘ç»œåŒ…æ•°æ¯”è¾ƒå¤šï¼ˆæ¯”å¦‚PPS è¶…è¿‡å‡ åƒï¼‰çš„æ—¶å€™ï¼Œä½ æƒ³ä» tcpdump æŠ“å–çš„ç½‘ç»œåŒ…ä¸­åˆ†æé—®é¢˜ï¼Œå®åœ¨ä¸å®¹æ˜“ã€‚</p><p>å¯¹æ¯”ä¹‹ä¸‹ï¼ŒWireshark åˆ™é€šè¿‡å›¾å½¢ç•Œé¢ï¼Œä»¥åŠä¸€ç³»åˆ—çš„æ±‡æ€»åˆ†æå·¥å…·ï¼Œæä¾›äº†æ›´å‹å¥½çš„ä½¿ç”¨ç•Œé¢ï¼Œè®©ä½ å¯ä»¥ç”¨æ›´å¿«çš„é€Ÿåº¦ï¼Œæ‘†å¹³ç½‘ç»œæ€§èƒ½é—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¯¦ç»†æ¥çœ‹çœ‹å®ƒã€‚</p><h2>Wireshark</h2><p>Wireshark ä¹Ÿæ˜¯æœ€æµè¡Œçš„ä¸€ä¸ªç½‘ç»œåˆ†æå·¥å…·ï¼Œå®ƒæœ€å¤§çš„å¥½å¤„å°±æ˜¯æä¾›äº†è·¨å¹³å°çš„å›¾å½¢ç•Œé¢ã€‚è·Ÿ tcpdump ç±»ä¼¼ï¼ŒWireshark ä¹Ÿæä¾›äº†å¼ºå¤§çš„è¿‡æ»¤è§„åˆ™è¡¨è¾¾å¼ï¼ŒåŒæ—¶ï¼Œè¿˜å†…ç½®äº†ä¸€ç³»åˆ—çš„æ±‡æ€»åˆ†æå·¥å…·ã€‚</p><p>æ¯”å¦‚ï¼Œæ‹¿åˆšåˆšçš„ ping æ¡ˆä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŠŠæŠ“å–çš„ç½‘ç»œåŒ…ä¿å­˜åˆ° ping.pcap æ–‡ä»¶ä¸­ï¼š</p><pre><code>$ tcpdump -nn udp port 53 or host 35.190.27.188 -w ping.pcap\n</code></pre><p>æ¥ç€ï¼ŒæŠŠå®ƒæ‹·è´åˆ°ä½ å®‰è£…æœ‰ Wireshark çš„æœºå™¨ä¸­ï¼Œæ¯”å¦‚ä½ å¯ä»¥ç”¨ scp æŠŠå®ƒæ‹·è´åˆ°æœ¬åœ°æ¥ï¼š</p><pre><code>$ scp host-ip/path/ping.pcap .\n</code></pre><p>ç„¶åï¼Œå†ç”¨ Wireshark æ‰“å¼€å®ƒã€‚æ‰“å¼€åï¼Œä½ å°±å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™ä¸ªç•Œé¢ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6b/2c/6b854703dcfcccf64c0a69adecf2f42c.png?wh=2316*400\" alt=\"\"></p><p>ä» Wireshark çš„ç•Œé¢é‡Œï¼Œä½ å¯ä»¥å‘ç°ï¼Œå®ƒä¸ä»…ä»¥æ›´è§„æ•´çš„æ ¼å¼ï¼Œå±•ç¤ºäº†å„ä¸ªç½‘ç»œåŒ…çš„å¤´éƒ¨ä¿¡æ¯ï¼›è¿˜ç”¨äº†ä¸åŒé¢œè‰²ï¼Œå±•ç¤º DNS å’Œ ICMP è¿™ä¸¤ç§ä¸åŒçš„åè®®ã€‚ä½ ä¹Ÿå¯ä»¥ä¸€çœ¼çœ‹å‡ºï¼Œä¸­é—´çš„ä¸¤æ¡ PTR æŸ¥è¯¢å¹¶æ²¡æœ‰å“åº”åŒ…ã€‚</p><p>æ¥ç€ï¼Œåœ¨ç½‘ç»œåŒ…åˆ—è¡¨ä¸­é€‰æ‹©æŸä¸€ä¸ªç½‘ç»œåŒ…åï¼Œåœ¨å…¶ä¸‹æ–¹çš„ç½‘ç»œåŒ…è¯¦æƒ…ä¸­ï¼Œä½ è¿˜å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªåŒ…åœ¨åè®®æ ˆå„å±‚çš„è¯¦ç»†ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œä»¥ç¼–å·ä¸º 5 çš„ PTR åŒ…ä¸ºä¾‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/59/25/59781a5dc7b1b9234643991365bfc925.png?wh=2230*864\" alt=\"\"></p><p>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒIP å±‚ï¼ˆInternet Protocolï¼‰çš„æºåœ°å€å’Œç›®çš„åœ°å€ã€ä¼ è¾“å±‚çš„ UDP åè®®ï¼ˆUser Datagram Protocolï¼‰ã€åº”ç”¨å±‚çš„ DNS åè®®ï¼ˆDomain Name Systemï¼‰çš„æ¦‚è¦ä¿¡æ¯ã€‚</p><p>ç»§ç»­ç‚¹å‡»æ¯å±‚å·¦è¾¹çš„ç®­å¤´ï¼Œå°±å¯ä»¥çœ‹åˆ°è¯¥å±‚åè®®å¤´çš„æ‰€æœ‰ä¿¡æ¯ã€‚æ¯”å¦‚ç‚¹å‡» DNS åï¼Œå°±å¯ä»¥çœ‹åˆ° Transaction IDã€Flagsã€Queries ç­‰ DNS åè®®å„ä¸ªå­—æ®µçš„æ•°å€¼ä»¥åŠå«ä¹‰ã€‚</p><p>å½“ç„¶ï¼ŒWireshark çš„åŠŸèƒ½è¿œä¸æ­¢å¦‚æ­¤ã€‚æ¥ä¸‹æ¥æˆ‘å†å¸¦ä½ ä¸€èµ·ï¼Œçœ‹ä¸€ä¸ª HTTP çš„ä¾‹å­ï¼Œå¹¶ç†è§£ TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„å·¥ä½œåŸç†ã€‚</p><p>è¿™ä¸ªæ¡ˆä¾‹æˆ‘ä»¬å°†è¦è®¿é—®çš„æ˜¯ <a href=\"http://example.com/\">http://example.com/</a> ã€‚è¿›å…¥ç»ˆç«¯ä¸€ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œé¦–å…ˆæŸ¥å‡º example.com çš„ IPã€‚ç„¶åï¼Œæ‰§è¡Œ tcpdump å‘½ä»¤ï¼Œè¿‡æ»¤å¾—åˆ°çš„ IP åœ°å€ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° web.pcap ä¸­ã€‚</p><pre><code>$ dig +short example.com\n93.184.216.34\n$ tcpdump -nn host 93.184.216.34 -w web.pcap\n</code></pre><blockquote>\n<p>å®é™…ä¸Šï¼Œä½ å¯ä»¥åœ¨ host è¡¨è¾¾å¼ä¸­ï¼Œç›´æ¥ä½¿ç”¨åŸŸåï¼Œå³ <strong>tcpdump -nn host example.com -w web.pcap</strong>ã€‚</p>\n</blockquote><p>æ¥ä¸‹æ¥ï¼Œåˆ‡æ¢åˆ°ç»ˆç«¯äºŒï¼Œæ‰§è¡Œä¸‹é¢çš„ curl å‘½ä»¤ï¼Œè®¿é—® <a href=\"http://example.com\">http://example.com</a>ï¼š</p><pre><code>$ curl http://example.com\n</code></pre><p>æœ€åï¼Œå†å›åˆ°ç»ˆç«¯ä¸€ï¼ŒæŒ‰ä¸‹ Ctrl+C åœæ­¢ tcpdumpï¼Œå¹¶æŠŠå¾—åˆ°çš„ web.pcap æ‹·è´å‡ºæ¥ã€‚</p><p>ä½¿ç”¨ Wireshark æ‰“å¼€ web.pcap åï¼Œä½ å°±å¯ä»¥åœ¨ Wireshark ä¸­ï¼Œçœ‹åˆ°å¦‚ä¸‹çš„ç•Œé¢ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/07/9d/07bcdba5b563ebae36f5b5b453aacd9d.png?wh=2360*398\" alt=\"\"></p><p>ç”±äº HTTP åŸºäº TCP ï¼Œæ‰€ä»¥ä½ æœ€å…ˆçœ‹åˆ°çš„ä¸‰ä¸ªåŒ…ï¼Œåˆ†åˆ«æ˜¯ TCP ä¸‰æ¬¡æ¡æ‰‹çš„åŒ…ã€‚æ¥ä¸‹æ¥ï¼Œä¸­é—´çš„æ‰æ˜¯ HTTP è¯·æ±‚å’Œå“åº”åŒ…ï¼Œè€Œæœ€åçš„ä¸‰ä¸ªåŒ…ï¼Œåˆ™æ˜¯ TCP è¿æ¥æ–­å¼€æ—¶çš„ä¸‰æ¬¡æŒ¥æ‰‹åŒ…ã€‚</p><p>ä»èœå•æ ä¸­ï¼Œç‚¹å‡» Statistics -&gt; Flow Graphï¼Œç„¶åï¼Œåœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­çš„ Flow type é€‰æ‹© TCP Flowsï¼Œä½ å¯ä»¥æ›´æ¸…æ™°çš„çœ‹åˆ°ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­ TCP æµçš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/4e/bb/4ec784752fdbc0cc5ead036a6419cbbb.png?wh=1526*596\" alt=\"\"></p><p>è¿™å…¶å®è·Ÿå„ç§æ•™ç¨‹ä¸Šè®²åˆ°çš„ï¼ŒTCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹å¾ˆç±»ä¼¼ï¼Œä½œä¸ºå¯¹æ¯”ï¼Œ ä½ é€šå¸¸çœ‹åˆ°çš„ TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„æµç¨‹ï¼ŒåŸºæœ¬æ˜¯è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/52/e8/5230fb678fcd3ca6b55d4644881811e8.png?wh=875*976\" alt=\"\"></p><p>(å›¾ç‰‡æ¥è‡ª<a href=\"https://coolshell.cn/articles/11564.html\">é…·å£³</a>)</p><p>ä¸è¿‡ï¼Œå¯¹æ¯”è¿™ä¸¤å¼ å›¾ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™é‡ŒæŠ“åˆ°çš„åŒ…è·Ÿä¸Šé¢çš„å››æ¬¡æŒ¥æ‰‹ï¼Œå¹¶ä¸å®Œå…¨ä¸€æ ·ï¼Œå®é™…æŒ¥æ‰‹è¿‡ç¨‹åªæœ‰ä¸‰ä¸ªåŒ…ï¼Œè€Œä¸æ˜¯å››ä¸ªã€‚</p><p>å…¶å®ï¼Œä¹‹æ‰€ä»¥æœ‰ä¸‰ä¸ªåŒ…ï¼Œæ˜¯å› ä¸ºæœåŠ¡å™¨ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ FIN åï¼ŒæœåŠ¡å™¨ç«¯åŒæ—¶ä¹Ÿè¦å…³é—­è¿æ¥ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠ ACK å’Œ FIN åˆå¹¶åˆ°ä¸€èµ·å‘é€ï¼ŒèŠ‚çœäº†ä¸€ä¸ªåŒ…ï¼Œå˜æˆäº†â€œä¸‰æ¬¡æŒ¥æ‰‹â€ã€‚</p><p>è€Œé€šå¸¸æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ FIN åï¼Œå¾ˆå¯èƒ½è¿˜æ²¡å‘é€å®Œæ•°æ®ï¼Œæ‰€ä»¥å°±ä¼šå…ˆå›å¤å®¢æˆ·ç«¯ä¸€ä¸ª ACK åŒ…ã€‚ç¨ç­‰ä¸€ä¼šå„¿ï¼Œå®Œæˆæ‰€æœ‰æ•°æ®åŒ…çš„å‘é€åï¼Œæ‰ä¼šå‘é€ FIN åŒ…ã€‚è¿™ä¹Ÿå°±æ˜¯å››æ¬¡æŒ¥æ‰‹äº†ã€‚</p><p>æŠ“åŒ…åï¼Œ Wireshark ä¸­å°±ä¼šæ˜¾ç¤ºä¸‹é¢è¿™ä¸ªç•Œé¢ï¼ˆåŸå§‹ç½‘ç»œåŒ…æ¥è‡ª Wireshark TCP 4-times close ç¤ºä¾‹ï¼Œä½ å¯ä»¥ç‚¹å‡» <a href=\"https://wiki.wireshark.org/TCP%204-times%20close\">è¿™é‡Œ</a> ä¸‹è½½ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0e/99/0ecb6d11e5e7725107c0291c45aa7e99.png?wh=1898*186\" alt=\"\"></p><p>å½“ç„¶ï¼ŒWireshark çš„ä½¿ç”¨æ–¹æ³•ç»ä¸åªæœ‰è¿™äº›ï¼Œæ›´å¤šçš„ä½¿ç”¨æ–¹æ³•ï¼ŒåŒæ ·å¯ä»¥å‚è€ƒ <a href=\"https://www.wireshark.org/docs/\">å®˜æ–¹æ–‡æ¡£</a> ä»¥åŠ <a href=\"https://wiki.wireshark.org/\">WIKI</a>ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦äº† tcpdump å’Œ Wireshark çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶é€šè¿‡å‡ ä¸ªæ¡ˆä¾‹ï¼Œå­¦ä¼šäº†å¦‚ä½•è¿ç”¨è¿™ä¸¤ä¸ªå·¥å…·æ¥åˆ†æç½‘ç»œçš„æ”¶å‘è¿‡ç¨‹ï¼Œå¹¶æ‰¾å‡ºæ½œåœ¨çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>å½“ä½ å‘ç°é’ˆå¯¹ç›¸åŒçš„ç½‘ç»œæœåŠ¡ï¼Œä½¿ç”¨ IP åœ°å€å¿«è€Œæ¢æˆåŸŸåå´æ…¢å¾ˆå¤šæ—¶ï¼Œå°±è¦æƒ³åˆ°ï¼Œæœ‰å¯èƒ½æ˜¯ DNS åœ¨æ£é¬¼ã€‚DNS çš„è§£æï¼Œä¸ä»…åŒ…æ‹¬ä»åŸŸåè§£æå‡º IP åœ°å€çš„ A è®°å½•è¯·æ±‚ï¼Œè¿˜åŒ…æ‹¬æ€§èƒ½å·¥å…·å¸®ä½ ï¼Œâ€œèªæ˜â€åœ°ä» IP åœ°å€åæŸ¥åŸŸåçš„ PTR è¯·æ±‚ã€‚</p><p>å®é™…ä¸Šï¼Œ<strong>æ ¹æ® IP åœ°å€åæŸ¥åŸŸåã€æ ¹æ®ç«¯å£å·åæŸ¥åè®®åç§°ï¼Œæ˜¯å¾ˆå¤šç½‘ç»œå·¥å…·é»˜è®¤çš„è¡Œä¸ºï¼Œè€Œè¿™å¾€å¾€ä¼šå¯¼è‡´æ€§èƒ½å·¥å…·çš„å·¥ä½œç¼“æ…¢</strong>ã€‚æ‰€ä»¥ï¼Œé€šå¸¸ï¼Œç½‘ç»œæ€§èƒ½å·¥å…·éƒ½ä¼šæä¾›ä¸€ä¸ªé€‰é¡¹ï¼ˆæ¯”å¦‚ -n æˆ–è€… -nnï¼‰ï¼Œæ¥ç¦æ­¢åç§°è§£æã€‚</p><p>åœ¨å·¥ä½œä¸­ï¼Œå½“ä½ ç¢°åˆ°ç½‘ç»œæ€§èƒ½é—®é¢˜æ—¶ï¼Œä¸è¦å¿˜è®°tcpdump å’Œ Wireshark è¿™ä¸¤ä¸ªå¤§æ€å™¨ã€‚ä½ å¯ä»¥ç”¨å®ƒä»¬æŠ“å–å®é™…ä¼ è¾“çš„ç½‘ç»œåŒ…ï¼Œå†æ’æŸ¥æ˜¯å¦æœ‰æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ã€‚</p><h2>æ€è€ƒ</h2><p>æœ€åï¼Œæˆ‘æƒ³è¯·ä½ æ¥èŠä¸€èŠï¼Œä½ æ˜¯å¦‚ä½•ä½¿ç”¨ tcpdump å’Œ Wireshark çš„ã€‚ä½ ç”¨ tcpdump æˆ–è€… Wireshark è§£å†³è¿‡å“ªäº›ç½‘ç»œé—®é¢˜å‘¢ï¼Ÿä½ åˆæ˜¯å¦‚ä½•æ’æŸ¥ã€åˆ†æå¹¶è§£å†³çš„å‘¢ï¼Ÿä½ å¯ä»¥ç»“åˆä»Šå¤©å­¦åˆ°çš„ç½‘ç»œçŸ¥è¯†ï¼Œæ€»ç»“è‡ªå·±çš„æ€è·¯ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p>","neighbors":{"left":{"article_title":"37 | æ¡ˆä¾‹ç¯‡ï¼šDNS è§£ææ—¶å¿«æ—¶æ…¢ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ","id":81850},"right":{"article_title":"39 | æ¡ˆä¾‹ç¯‡ï¼šæ€ä¹ˆç¼“è§£ DDoS æ”»å‡»å¸¦æ¥çš„æ€§èƒ½ä¸‹é™é—®é¢˜ï¼Ÿ","id":82573}},"comments":[{"had_liked":false,"id":68157,"user_name":"1+1","can_delete":false,"product_type":"c1","uid":1242204,"ip_address":"","ucode":"5497CCAE58281C","user_header":"https://static001.geekbang.org/account/avatar/00/12/f4/5c/e0a56bbf.jpg","comment_is_top":false,"comment_ctime":1550450909,"is_pvip":false,"replies":[{"id":"24372","content":"ğŸ‘ è¿™ä¸¤æœ¬ä¹¦éƒ½ä¸é”™","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550570148,"ip_address":"","comment_id":68157,"utype":1}],"discussion_count":3,"race_medal":0,"score":"233478684893","product_id":100020901,"comment_content":"wiresharkçš„ä½¿ç”¨æ¨èé˜…è¯»æ—æ²›æ»¡çš„ã€ŠWiresharkç½‘ç»œåˆ†æå°±è¿™ä¹ˆç®€å•ã€‹å’Œã€ŠWiresharkç½‘ç»œåˆ†æçš„è‰ºæœ¯ã€‹","like_count":55,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439541,"discussion_content":"ğŸ‘ è¿™ä¸¤æœ¬ä¹¦éƒ½ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550570148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2116919,"avatar":"","nickname":"Geek_77a14f","note":"","ucode":"EB71258E219A6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338450,"discussion_content":"ä½ å¥½ï¼Œæƒ³é—®ä¸€ä¸‹æ˜¯éœ€è¦2æœ¬éƒ½è¦ä¹°ï¼Œè¿˜æ˜¯éœ€è¦ä¹°å…¶ä¸­ä¸€æœ¬å‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609293526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2057462,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/64/f6/b2de64bb.jpg","nickname":"å€”å¼ºçš„éŸ­èœ","note":"","ucode":"D99AB658AE1778","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2116919,"avatar":"","nickname":"Geek_77a14f","note":"","ucode":"EB71258E219A6D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341355,"discussion_content":"ä¸ªäººè§‰å¾—ç¬¬ä¸€æœ¬æ›´å¥½ä¸€äº›","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1610385853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338450,"ip_address":""},"score":341355,"extra":""}]}]},{"had_liked":false,"id":85610,"user_name":"xierongfei","can_delete":false,"product_type":"c1","uid":1298910,"ip_address":"","ucode":"2B4F061FA93A76","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/mnBC29lF1RibHdwkZdPdGM9QRAl7Y7Aicad8vpmIEialjia93IEVSAHibkKdwHwfZr6qedVHiafKUD8Yk1v2eiaibj8l0w/132","comment_is_top":false,"comment_ctime":1555141035,"is_pvip":true,"replies":[{"id":"31289","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1555500966,"ip_address":"","comment_id":85610,"utype":1}],"discussion_count":3,"race_medal":0,"score":"121814225323","product_id":100020901,"comment_content":"ä¹‹å‰å…¬å¸ä¸€ä¸ªå†…éƒ¨åº”ç”¨å‡ºç°é¡µé¢å¡é¡¿ï¼Œè€Œä¸”æ¯æ¬¡éƒ½æ˜¯1-2ç”¨æˆ·åé¦ˆï¼ˆéšæœºï¼‰ï¼Œæ’å‡ºäº†åº”ç”¨æœ¬èº«ï¼ŒæœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯ç½‘ç»œé—®é¢˜åï¼Œç„¶åè®©itåœ¨ç”¨æˆ·ç«¯æŠ“åŒ…ä¼ ç»™æˆ‘ï¼Œç„¶åç”¨Wiresharkåˆ†æåï¼Œå‘ç°æœ‰å¤§é‡è™šå‡é‡ä¼ ï¼Œåé¢åˆ†æåå‘ç°ï¼Œæ˜¯ç”¨æˆ·éƒ½åœ¨ä¸€ä¸ªNatç½‘ç»œåé¢ï¼Œéƒ¨åˆ†ç”¨æˆ·æ—¶é—´ä¸ä¸€è‡´ï¼ŒåŒæ—¶æˆ‘ä»¬æœåŠ¡å™¨å¼€å¯äº†tcpå¿«é€Ÿå›æ”¶ï¼Œå¯¼è‡´è¿æ¥è¢«å›æ”¶äº†ã€‚åé¢å…³é—­tcpå¿«é€Ÿå›æ”¶åè§£å†³ã€‚ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ç”¨å·¥å…·åˆ†æè¿™ç§æ¯”è¾ƒå¤æ‚çš„é—®é¢˜ã€‚","like_count":29,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446735,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555500966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"è§‚å¼ˆé“äºº","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60724,"discussion_content":"æ‚¨å¥½ï¼Œè¯·é—®å¦‚ä½•å…³é—­tcpå¿«é€Ÿå›æ”¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574749260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1662117,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7zuDYFIutbSPc4eEtcMhdNBTI1FRR7q0xrGh2X1QdiaNxvAV31HcRUsjPWLaaWftqgwTnVoiaica8Nw/132","nickname":"èƒœè¾‰ï¼ˆå¤§Vï¼‰","note":"","ucode":"3C13BFCD82D4EC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"è§‚å¼ˆé“äºº","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399813,"discussion_content":"æ–°çš„linuxå†…æ ¸å·²ç»å»æ‰äº†tw_recycleé€‰é¡¹ æ‰€ä»¥è¿™ä¸ªé—®é¢˜åº”è¯¥æ˜¯ä¸ä¼šå†æœ‰äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1633068372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":60724,"ip_address":""},"score":399813,"extra":""}]}]},{"had_liked":false,"id":68165,"user_name":"æ—¥æ‹±ä¸€å’","can_delete":false,"product_type":"c1","uid":1056944,"ip_address":"","ucode":"3BDFD6F473862C","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/b0/0a1551c4.jpg","comment_is_top":false,"comment_ctime":1550452202,"is_pvip":false,"replies":[{"id":"24373","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550570156,"ip_address":"","comment_id":68165,"utype":1}],"discussion_count":1,"race_medal":0,"score":"70269928938","product_id":100020901,"comment_content":"æ—æ²›æ»¡çš„ä¹¦éƒ½çœ‹è¿‡ï¼Œç¡®å®å†™çš„ç›¸å½“å¥½ï¼Œéƒ½æ˜¯æ¡ˆä¾‹é©±åŠ¨ã€‚<br>æŠŠåè®®è®²çš„ç”ŸåŠ¨æœ‰è¶£å°±æ•°ä»–ã€‚","like_count":16,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439543,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550570156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73432,"user_name":"bzadhere","can_delete":false,"product_type":"c1","uid":1045920,"ip_address":"","ucode":"8A3CC56EF76A65","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/a0/c342c50e.jpg","comment_is_top":false,"comment_ctime":1551883041,"is_pvip":false,"replies":[{"id":"26762","content":"è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551886051,"ip_address":"","comment_id":73432,"utype":1}],"discussion_count":2,"race_medal":0,"score":"57386457889","product_id":100020901,"comment_content":"&quot;å¦‚æœçœ‹äº†è¿™ä¸ªä½ è¿˜æ˜¯ä¸ä¼šç”¨Wiresharkï¼Œé‚£å°±æ¥æ‰¾æˆ‘å§&quot; ----è¿™æ˜¯åœ¨ç½‘ä¸Šå¯ä»¥æ‰¾åˆ°æœ€ç‰›é€¼çš„èµ„æ–™<br><br>https:&#47;&#47;www.dell.com&#47;community&#47;%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E8%AE%A8%E8%AE%BA%E5%8C%BA&#47;%E5%A6%82%E6%9E%9C%E7%9C%8B%E4%BA%86%E8%BF%99%E4%B8%AA%E4%BD%A0%E8%BF%98%E6%98%AF%E4%B8%8D%E4%BC%9A%E7%94%A8Wireshark-%E9%82%A3%E5%B0%B1%E6%9D%A5%E6%89%BE%E6%88%91%E5%90%A7-8%E6%9C%886%E6%97%A5%E5%AE%8C%E7%BB%93&#47;td-p&#47;7007033","like_count":14,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442084,"discussion_content":"è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551886051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1434831,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/cf/906f47c9.jpg","nickname":"å«ç« ","note":"","ucode":"A7CA116D5275C9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355564,"discussion_content":"å¤§ä½¬ï¼Œè¿™ä¸ªä¸‹è¾¹çš„åˆ†é¡µæ‰“ä¸å¼€å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615452640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68650,"user_name":"è‚–é£ç å­—","can_delete":false,"product_type":"c1","uid":1000696,"ip_address":"","ucode":"53D821F2F0F1DA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/f8/6fdb50ab.jpg","comment_is_top":false,"comment_ctime":1550567274,"is_pvip":false,"replies":[{"id":"24383","content":"ğŸ‘ è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550570656,"ip_address":"","comment_id":68650,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44500240234","product_id":100020901,"comment_content":"tcpdumpæŠ“åŒ…å¯ä»¥ç”¨æ¥å¤„ç†ä¸€äº›ç–‘éš¾é—®é¢˜çš„ã€‚ å¦‚å—åˆ°äº†ä»€ä¹ˆç±»å‹çš„æ”»å‡»ï¼Œæ‰§è¡Œäº†mysqlçš„ä»€ä¹ˆå‘½ä»¤ï¼Œæ¥æ”¶ä»¥åŠå‘é€å‡ºå»äº†ä»€ä¹ˆæ•°æ®åŒ…é€šé€šéƒ½å¯ä»¥ã€‚åƒå…¥ä¾µæ£€æµ‹å¦‚snortå·¥å…·ä¹‹ç±»çš„åº”è¯¥ä¹Ÿæ˜¯å¯¹æ•°æ®åŒ…è¿›è¡ŒæŠ“åŒ…åˆ†æçš„ï¼Œå¾ˆå®ç”¨ï¼Œå¾ˆå¼ºå¤§ã€‚","like_count":11,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439778,"discussion_content":"ğŸ‘ è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550570656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72913,"user_name":"ç§‘å­¦Jia","can_delete":false,"product_type":"c1","uid":1080409,"ip_address":"","ucode":"95430413F82A69","user_header":"https://static001.geekbang.org/account/avatar/00/10/7c/59/26b1e65a.jpg","comment_is_top":false,"comment_ctime":1551754213,"is_pvip":false,"replies":[{"id":"26743","content":"å—¯ï¼Œè¯ä¹¦è§£å¯†æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ MitMï¼ˆMan-in-the-middleï¼‰æ–¹æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551883379,"ip_address":"","comment_id":72913,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35911492581","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªæ¡ˆä¾‹å†™çš„æå…¶ç”ŸåŠ¨:D, å°±æ˜¯é—®ä¸€å¥ï¼Œç°åœ¨æˆ‘ä»¬çš„é¡¹ç›®éƒ½æ˜¯httpsï¼Œé‚£ä¹ˆå¦‚æœæŠ“åŒ…httpsï¼Œtcpdumpæˆ–è€…wiresharkæ˜¯å¦å¯ä»¥è§£å¯†ï¼Ÿå› ä¸ºæˆ‘çœ‹åˆ°wiresharkè§£å¯†éœ€è¦private keyï¼Œä½†æ˜¯private keyæ¶‰åŠå®‰å…¨é—®é¢˜ï¼Œè‚¯å®šéƒ½æ‹¿ä¸åˆ°ï¼Œé‚£ä¹ˆä½ ä»¬é‡åˆ°æŠ“åŒ…httpsåè§£ææ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441824,"discussion_content":"å—¯ï¼Œè¯ä¹¦è§£å¯†æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ MitMï¼ˆMan-in-the-middleï¼‰æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551883379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1318448,"avatar":"","nickname":"zzyalbert","note":"","ucode":"A6E3691ADCAECA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4237,"discussion_content":"å¯ä»¥ç”¨æµè§ˆå™¨ä¿å­˜private keyï¼Œchromeã€firefoxéƒ½æ”¯æŒ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1565245367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69308,"user_name":"æ½˜æ”¿å®‡","can_delete":false,"product_type":"c1","uid":1254758,"ip_address":"","ucode":"9A6658EE862D95","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/66/4835d92e.jpg","comment_is_top":false,"comment_ctime":1550714828,"is_pvip":true,"replies":[{"id":"24841","content":"ä¸åªæ˜¯pingï¼Œå¤§éƒ¨åˆ†è¾“å‡ºä¸­åŒ…å«åå­—çš„å·¥å…·éƒ½æ”¯æŒåå‘è§£æï¼Œè¿™æ˜¯ä¸ºäº†æ›´ç›´è§‚å±•ç¤ºç»“æœï¼ˆæ¯•ç«Ÿæˆ‘ä»¬ç†Ÿæ‚‰çš„éƒ½æ˜¯åŸŸåè€Œä¸æ˜¯IPï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550849625,"ip_address":"","comment_id":69308,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23025551308","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œä¸ºä»€ä¹ˆpingå‘½ä»¤ä½¿ç”¨PTRä¿¡æ¯ï¼Œpingä¸€ä¸ªåŸŸåçš„æ—¶å€™ï¼Œç›´æ¥dnsæŸ¥è¯¢å¾—åˆ°Aè®°å½•ipåœ°å€ï¼Œç„¶åpingè¿™ä¸ªipå°±è¡Œå•Šï¼Œä¸ºä»€ä¹ˆä½¿ç”¨åå‘è§£æï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440053,"discussion_content":"ä¸åªæ˜¯pingï¼Œå¤§éƒ¨åˆ†è¾“å‡ºä¸­åŒ…å«åå­—çš„å·¥å…·éƒ½æ”¯æŒåå‘è§£æï¼Œè¿™æ˜¯ä¸ºäº†æ›´ç›´è§‚å±•ç¤ºç»“æœï¼ˆæ¯•ç«Ÿæˆ‘ä»¬ç†Ÿæ‚‰çš„éƒ½æ˜¯åŸŸåè€Œä¸æ˜¯IPï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550849625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68149,"user_name":"æ˜ç¿¼","can_delete":false,"product_type":"c1","uid":1068361,"ip_address":"","ucode":"E77F86BEB3D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","comment_is_top":false,"comment_ctime":1550449194,"is_pvip":false,"replies":[{"id":"24371","content":"ğŸ‘ æ²¡æœ‰å›¾å½¢ç•Œé¢çš„æ—¶å€™ï¼Œtsharkä¹Ÿæ˜¯ä¸ªé€‰æ‹©","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550570115,"ip_address":"","comment_id":68149,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23025285674","product_id":100020901,"comment_content":"è€å¸ˆwiresharkæœ‰ä¸ªå‘½ä»¤è¡Œç‰ˆæœ¬tsharkï¼Œwiresharkæ˜¯é€šè¿‡ä¸€ä¸ªå«dumpçš„è¿›ç¨‹æŠ“åŒ…ç®¡é“æ–¹å¼å‘é€ç»™tsharkè§£æçš„ï¼Œä¸è¿‡tsharkçš„å‘½ä»¤é¡¹æœ‰ç‚¹å¤šï¼Œä¸æ˜¯å¤ªå¥½ç”¨","like_count":6,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439538,"discussion_content":"ğŸ‘ æ²¡æœ‰å›¾å½¢ç•Œé¢çš„æ—¶å€™ï¼Œtsharkä¹Ÿæ˜¯ä¸ªé€‰æ‹©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550570115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1269873,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/71/895ee6cf.jpg","nickname":"åˆ†æ¸…äº‘æ·¡","note":"","ucode":"7045AE6BF72D31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126996,"discussion_content":"tcpdump/tshark/wireshark åº•å±‚éƒ½æ˜¯è°ƒosçš„pcapåº“æ¥æŠ“åŒ…çš„ã€‚çœŸæ­£çš„é«˜æ‰‹å°±å¾—ä¼šç”¨tshark, å› ä¸ºç•Œé¢ä¸Šåˆ†æèµ·æ¥ä¸å¤Ÿçµæ´»ï¼Œç»™ä½ çœ‹å‡ ä¸ªtsharkå±Œçˆ†çš„æ¡ˆä¾‹ï¼š https://plantegg.github.io/2019/06/21/%E5%B0%B1%E6%98%AF%E8%A6%81%E4%BD%A0%E6%87%82%E6%8A%93%E5%8C%85--WireShark%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%89%88tshark/","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1578557688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73566,"user_name":"kissingers","can_delete":false,"product_type":"c1","uid":1135299,"ip_address":"","ucode":"615151808CF628","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKzqiaZnBw2myRWY802u48Rw3W2zDtKoFQ6vN63m4FdyjibM21FfaOYe8MbMpemUdxXJeQH6fRdVbZA/132","comment_is_top":false,"comment_ctime":1551926875,"is_pvip":false,"replies":[{"id":"27321","content":"ä¼˜åŒ–æ–¹æ³•é‡Œé¢æœ‰æåˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1552347961,"ip_address":"","comment_id":73566,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18731796059","product_id":100020901,"comment_content":"æ—æ²›æ»¡çš„ä¹¦ä¸é”™ï¼ŒEMC å¤§ç‰›å€¼å¾—æ¨èã€‚<br>Fiddlerï¼Œå·¥å…·ä¹Ÿäº†è§£è¿‡ï¼Œå¾®è½¯çš„äººå†™çš„ï¼Œæ”¯æŒhttps ï¼ˆman in middleï¼‰ï¼Œèƒ½ä¿®æ”¹è¯·æ±‚å’Œå“åº”æ•°æ®åŒ…ã€‚<br>å¦å¤–è€å¸ˆèƒ½è®²è®²ï¼šlinux ä¸»æœºä¸Šæ€ä¹ˆæé«˜æ•°æ®è½¬å‘æ€§èƒ½å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442159,"discussion_content":"ä¼˜åŒ–æ–¹æ³•é‡Œé¢æœ‰æåˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552347961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199958,"user_name":"hellojd_gk","can_delete":false,"product_type":"c1","uid":1679543,"ip_address":"","ucode":"319AF4C1AD568D","user_header":"https://static001.geekbang.org/account/avatar/00/19/a0/b7/1327ae60.jpg","comment_is_top":false,"comment_ctime":1585522445,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14470424333","product_id":100020901,"comment_content":"å¦‚æœæ¢ä¸€ä¸ª DNS æœåŠ¡å™¨ï¼Œå°±å¯ä»¥ç”¨ PTR åæŸ¥åˆ° 35.190.27.188 æ‰€å¯¹åº”çš„åŸŸåï¼Œåˆ°æœ€åä¹Ÿæ²¡è®²åˆ°ä¸ºä»€ä¹ˆæ˜¯googleaccountåŸŸåã€‚","like_count":3,"discussions":[{"author":{"id":1284474,"avatar":"https://static001.geekbang.org/account/avatar/00/13/99/7a/558666a5.jpg","nickname":"AceslupK","note":"","ucode":"048F84D019CBBB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393308,"discussion_content":"æ„æ€åº”è¯¥æ˜¯ï¼Œå¦‚æœæ¢ç”¨åˆ«çš„åŸŸååœ°å€ï¼Œåè§£å‡ºæ¥çš„ä¸ä¸€å®šæ˜¯googleusercontentã€‚ä½†ä¸ºäº†æ¼”ç¤ºPTRå“åº”è¶…æ—¶ï¼Œæå‰æŸ¥è¯¢çŸ¥é“åå‘è§£æå‡ºâ€œ188.27.190.35.bc.googleusercontent.com.â€æ•…æ„åšçš„é…ç½®ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631349624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79211,"user_name":"Griffin","can_delete":false,"product_type":"c1","uid":1087329,"ip_address":"","ucode":"CF766B92A65261","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/61/34a0da09.jpg","comment_is_top":false,"comment_ctime":1553402849,"is_pvip":false,"replies":[{"id":"29054","content":"å—¯å—¯ï¼Œè°¢è°¢è¡¥å……","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1553526760,"ip_address":"","comment_id":79211,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10143337441","product_id":100020901,"comment_content":"Webçš„é—®é¢˜æ¨è MITMå•Š","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444400,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è¡¥å……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553526760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69586,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1550794821,"is_pvip":false,"replies":[{"id":"25328","content":"å—¯å—¯ï¼Œfiddlerä¸»è¦ç”¨äºHTTP","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551193184,"ip_address":"","comment_id":69586,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10140729413","product_id":100020901,"comment_content":"æ‰“å¡day40<br>ä½¿ç”¨å§¿åŠ¿è·Ÿè€å¸ˆçš„ä¸€æ ·ï¼Œéƒ½æ˜¯tcpdumpæŠ“åŒ…åï¼Œæ‹¿åˆ°å›¾å½¢ç•Œé¢åˆ†æï¼Œå¦‚æœæ˜¯webé—®é¢˜ï¼Œè¿˜ä¼šç”¨ä¸‹fiddleræ¥åˆ†æ","like_count":3,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440177,"discussion_content":"å—¯å—¯ï¼Œfiddlerä¸»è¦ç”¨äºHTTP","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551193184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334479,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1082187,"ip_address":"","ucode":"FC323371453C97","user_header":"https://static001.geekbang.org/account/avatar/00/10/83/4b/0e96fcae.jpg","comment_is_top":false,"comment_ctime":1644974657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5939941953","product_id":100020901,"comment_content":"å®è·µçš„æ—¶å€™å‡ºç°äº†ä»¥ä¸‹é”™è¯¯ï¼Œä¹Ÿæ²¡æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œæœ‰æœ‹å‹é‡åˆ°è¿‡å—<br><br>é…ç½®ï¼š<br>è…¾è®¯äº‘ OSï¼šubuntu18.04 <br>CPUï¼š2 <br>Memï¼š4G<br>Bandwidthï¼š8Mbps<br><br>resolv.conf<br>nameserver 114.114.114.114<br>options edns0<br><br>root@VM-4-13-ubuntu:&#47;home&#47;ubuntu# nslookup -type=PTR 39.106.233.176 8.8.8.8<br>Server:         8.8.8.8<br>Address:        8.8.8.8#53<br><br>** server can&#39;t find 176.233.106.39.in-addr.arpa: NXDOMAIN","like_count":2},{"had_liked":false,"id":133301,"user_name":"å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1120350,"ip_address":"","ucode":"8186E8CF7D39BE","user_header":"https://static001.geekbang.org/account/avatar/00/11/18/5e/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1568507655,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5863474951","product_id":100020901,"comment_content":"è€å¸ˆ å¯¹çº¿ä¸ŠæœåŠ¡è¿›è¡Œtcpdumpä¼šå½±å“æ€§èƒ½å—","like_count":1,"discussions":[{"author":{"id":2068721,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/90/f1/7f2b5e16.jpg","nickname":"CHN-Lee-ç‰ç±³","note":"","ucode":"0A53080F38F229","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377263,"discussion_content":"ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622563060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68192,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1550455374,"is_pvip":false,"replies":[{"id":"24374","content":"å—¯ å¤æ‚çš„åœºæ™¯è¿˜æ˜¯ç”¨Wiresharkæ›´æ–¹ä¾¿äº›","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550570202,"ip_address":"","comment_id":68192,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5845422670","product_id":100020901,"comment_content":"[D38æ‰“å¡]<br>ä»¥å‰éƒ½æ˜¯åœ¨windowsä¸Šç”¨Wireshark,æƒ³ä¸åˆ°linuxä¸‹ä¹Ÿæœ‰Wireshark.<br>ä¸è¿‡å¹³å¸¸ç»´æŠ¤çš„linuxåªèƒ½ç”¨ç»ˆç«¯ç™»å½•,åœ¨ç»ˆç«¯ä¸­è¿˜æ˜¯ç”¨tcpdump.<br><br>ä»Šå¤©çœ‹äº†ä¸“æ ,æ‰å‘ç°,å¯ä»¥ç”¨tcpdumpæŠ“åŒ…,ç„¶åç”¨Wiresharkæ¥å±•ç¤º.è¿™ä¸ªå‰å®³äº†.<br>","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439556,"discussion_content":"å—¯ å¤æ‚çš„åœºæ™¯è¿˜æ˜¯ç”¨Wiresharkæ›´æ–¹ä¾¿äº›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1550570202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342779,"user_name":"ä¸«å¤´","can_delete":false,"product_type":"c1","uid":1170944,"ip_address":"","ucode":"A17BCC0D1C014D","user_header":"https://static001.geekbang.org/account/avatar/00/11/de/00/c646dc88.jpg","comment_is_top":false,"comment_ctime":1650460054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650460054","product_id":100020901,"comment_content":"æ€ä¹ˆå®‰è£…tcpdump","like_count":0},{"had_liked":false,"id":328645,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1640826644,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640826644","product_id":100020901,"comment_content":"æˆ‘ä»¬éƒ¨é—¨ç°åœ¨ä½¿ç”¨iPvS å’Œ envoy ä½œåˆ†å¸ƒå¼è´Ÿè½½å‡è¡¡ï¼Œæœ‰äººè¯´è¿™ç§æƒ…å†µç”¨log åˆ†æå°±å¯ä»¥äº†ï¼Œæ²¡æœ‰å¿…è¦ä½¿ç”¨tcpdump, ä¹Ÿæœ‰äººè¯´éœ€è¦ä½¿ç”¨tcpdump,  ä¸ºä»€ä¹ˆæ”¯æŒç±»ä¼¼Netscalar nstrace çš„èƒ½åŠ›ï¼Œéœ€è¦æ”¹åŠ¨envoy æºä»£ç ï¼ŒåŠ è½½è‡ªå®šä¹‰çš„kernel module , è¿˜è¦æš‚å­˜key â€¦ ä¸çŸ¥é“å…„å¼Ÿå…¬å¸æœ‰è¿™æ ·çš„éœ€æ±‚å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":305123,"user_name":"å¿†æ°´å¯’","can_delete":false,"product_type":"c1","uid":1147453,"ip_address":"","ucode":"E3F86BD8AA8903","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","comment_is_top":false,"comment_ctime":1627830050,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627830050","product_id":100020901,"comment_content":"åˆ†æè¿‡å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚é«˜å³°æœŸçš„æ—¶å€™ï¼Œç½‘ç»œæ–­è¿ã€‚<br><br>https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;XS3Jnn3Xl4_12gzg0zrSTA","like_count":1},{"had_liked":false,"id":304831,"user_name":"ghostwritten","can_delete":false,"product_type":"c1","uid":1308196,"ip_address":"","ucode":"AE512F2E24A1A0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f6/24/5a9277f1.jpg","comment_is_top":false,"comment_ctime":1627633554,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627633554","product_id":100020901,"comment_content":"ping -c3 geektime.org<br>ping -n -c3 geektime.org<br>iptables -I INPUT -p udp --sport 53 -m string --string googleusercontent --algo bm -j DROP<br>iptables -D INPUT -p udp --sport 53 -m string --string googleusercontent --algo bm -j DROP<br>time nslookup geektime.org<br> nslookup -type=PTR 35.190.27.188 8.8.8.8<br>tcpdump -nn udp port 53 or host 35.190.27.188<br>tcpdump -nn udp port 53 or host 35.190.27.188 -w ping.pcap<br>dig +short example.com<br>tcpdump -nn host 93.184.216.34 -w web.pcap","like_count":0},{"had_liked":false,"id":288433,"user_name":"è°¨å…®è°¨å…®","can_delete":false,"product_type":"c1","uid":1376885,"ip_address":"","ucode":"55712DD3852169","user_header":"https://static001.geekbang.org/account/avatar/00/15/02/75/2839c0bb.jpg","comment_is_top":false,"comment_ctime":1618468004,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618468004","product_id":100020901,"comment_content":"ä¸ºä»€ä¹ˆpingåŸŸåå‡ºç°ptrå‘¢","like_count":0},{"had_liked":false,"id":258941,"user_name":"å‡¯","can_delete":false,"product_type":"c1","uid":1405256,"ip_address":"","ucode":"60DB11CF72C7B0","user_header":"https://static001.geekbang.org/account/avatar/00/15/71/48/44df7f4e.jpg","comment_is_top":false,"comment_ctime":1604585318,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604585318","product_id":100020901,"comment_content":"æ¯èŠ‚è¯¾éƒ½å—ç›ŠåŒªæµ…","like_count":0},{"had_liked":false,"id":248098,"user_name":"æ¬§é˜³æ´²","can_delete":false,"product_type":"c1","uid":1986708,"ip_address":"","ucode":"94606A6315F2BA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKT9Tk01eiaQ9aAhszthzGm6lwruRWPXia1YYFozctrdRvKg0Usp8NbwuKBApwD0D6Fty2tib3RdtFJg/132","comment_is_top":false,"comment_ctime":1600008606,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600008606","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸€ä¸‹ï¼š<br>æŠ“åŒ…å¹¶æ²¡çœ‹åˆ° googleusercontent çš„å­—æ ·ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²åœ¨å“ªé‡Œå‘¢ï¼Ÿ<br>PTRçš„åŒ…å€’æ˜¯çœ‹åˆ°äº†in-addr.arpaçš„å­—æ ·ï¼Œiptableså‘½ä»¤ç”¨in-addr.arpaä»£æ›¿googleusercontentåº”è¯¥ä¹Ÿå¯ä»¥å§<br>","like_count":0},{"had_liked":false,"id":237620,"user_name":"åŒ—çº¬8â„ƒ","can_delete":false,"product_type":"c1","uid":1433189,"ip_address":"","ucode":"4999F2E037C93C","user_header":"https://static001.geekbang.org/account/avatar/00/15/de/65/51147fb6.jpg","comment_is_top":false,"comment_ctime":1595903175,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595903175","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè®²httpæ”¹æˆhttps æ˜¯æˆ‘ä»¬æ–‡ç« ä¸­æåˆ°çš„åŠ äº†åŸŸåä¹ˆã€‚ æˆ‘ä»¬httpæ”¹æˆäº†httpsæµé‡å°±å´©äº†ï¼Œç¬¬ä¸€æ¬¡é“¾æ¥è¦15sï¼Œ","like_count":0},{"had_liked":false,"id":232055,"user_name":"æ–¹æœ¨æœ¨","can_delete":false,"product_type":"c1","uid":1045634,"ip_address":"","ucode":"44E0C9318DF794","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/82/466ecee2.jpg","comment_is_top":false,"comment_ctime":1593845404,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1593845404","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä¸‰æ¬¡æŒ¥æ‰‹çš„ç¤ºä¾‹å›¾ä¸­ï¼Œä¸ºä»€ä¹ˆ8å·åŒ…ï¼Œä¼šåŒæ—¶æœ‰finå’Œackæ ‡å¿—ï¼Œ7å·åŒ…å·²ç»æœ‰ack","like_count":0,"discussions":[{"author":{"id":1318941,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/1d/0c1a184c.jpg","nickname":"ç½—è¾‘æ€ç»´","note":"","ucode":"D257A06EDE928E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364140,"discussion_content":"ä»7å·å’Œ8å·åŒ…ç›¸åŒçš„seqå·å¯ä»¥çœ‹å‡ºè¿™ä¸¤ä¸ªåŒ…éƒ½æ˜¯172.16.3.4å‘ç»™93.184.216.34çš„ACKåŒ…ï¼Œåªæ˜¯è¢«åˆ†æ®µäº†ï¼Œåˆšå¥½172.16.3.4ä¹Ÿè¦å‘é€FINåŒ…ï¼Œå°±ç›´æ¥åˆå¹¶åœ¨8å·åŒ…äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617372750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202943,"user_name":"æ€€æ£æ¢¦æƒ³çš„å­¦æ¸£","can_delete":false,"product_type":"c1","uid":1916685,"ip_address":"","ucode":"2349B9F4F6FDE3","user_header":"https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg","comment_is_top":false,"comment_ctime":1586090690,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1586090690","product_id":100020901,"comment_content":"tcpdumpè¿™ä¸ªç¡®å®å¾ˆå¥½ç”¨ã€‚","like_count":0},{"had_liked":false,"id":135742,"user_name":"kissingers","can_delete":false,"product_type":"c1","uid":1135299,"ip_address":"","ucode":"615151808CF628","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKzqiaZnBw2myRWY802u48Rw3W2zDtKoFQ6vN63m4FdyjibM21FfaOYe8MbMpemUdxXJeQH6fRdVbZA/132","comment_is_top":false,"comment_ctime":1569251268,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1569251268","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæœ‰æ²¡æœ‰ç¢°åˆ°è¿‡tcpdump æŠ“åŒ…æœ¬èº«å°±ä¸¢åŒ…ï¼Œå³tcpdump æœ¬èº«ä¸¢åŒ…äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1662117,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7zuDYFIutbSPc4eEtcMhdNBTI1FRR7q0xrGh2X1QdiaNxvAV31HcRUsjPWLaaWftqgwTnVoiaica8Nw/132","nickname":"èƒœè¾‰ï¼ˆå¤§Vï¼‰","note":"","ucode":"3C13BFCD82D4EC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399816,"discussion_content":"ä¼šçš„ å…·ä½“çœ‹æœåŠ¡å™¨æ˜¯å¦ç¹å¿™ å¿™å°±æœ‰å¯èƒ½æ²¡æŠ“åˆ°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1633068854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131854,"user_name":"wking","can_delete":false,"product_type":"c1","uid":1294634,"ip_address":"","ucode":"47D52E4280D1E6","user_header":"https://static001.geekbang.org/account/avatar/00/13/c1/2a/e7102065.jpg","comment_is_top":false,"comment_ctime":1567937912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567937912","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæœ‰æ²¡æœ‰å·¥å…·æŠ“å–æŒ‡å®šæŸä¸ªurlè¯·æ±‚tcpåŒ…ï¼Ÿ","like_count":0},{"had_liked":false,"id":88689,"user_name":"Boy-struggle","can_delete":false,"product_type":"c1","uid":1402286,"ip_address":"","ucode":"94113E2837DC29","user_header":"https://static001.geekbang.org/account/avatar/00/15/65/ae/9727318e.jpg","comment_is_top":false,"comment_ctime":1555982911,"is_pvip":false,"replies":[{"id":"31954","content":"tcpdumpæŠ“åŒ…çœ‹çœ‹ï¼Ÿå¯ä»¥å…ˆè¯•è¯•å®¢æˆ·ç«¯æŠ“åŒ…ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰çº¿ç´¢å°±ä¸¤ç«¯æŠ“åŒ…å¯¹æ¯”çœ‹çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1556113461,"ip_address":"","comment_id":88689,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555982911","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæœ€è¿‘æˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªå…³äºvsftpé—®é¢˜ï¼Œå®¢æˆ·ç«¯è¿”å›é”™è¯¯ç ä¸º28ï¼Œå®˜æ–¹è§£é‡Šæ˜¯æ•°æ®è¿æ¥è¶…æ—¶ï¼Œåˆ°ä¸æ¸…æ¥šåˆ°åº•æ˜¯ä»å®¢æˆ·ç«¯åˆ†æè¿˜æ˜¯æœåŠ¡ç«¯åˆ†æï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯è¢«åŠ¨æ¨¡å¼vsftp","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447864,"discussion_content":"tcpdumpæŠ“åŒ…çœ‹çœ‹ï¼Ÿå¯ä»¥å…ˆè¯•è¯•å®¢æˆ·ç«¯æŠ“åŒ…ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰çº¿ç´¢å°±ä¸¤ç«¯æŠ“åŒ…å¯¹æ¯”çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556113461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84657,"user_name":"å¤§åç‹ç‹¸","can_delete":false,"product_type":"c1","uid":1325678,"ip_address":"","ucode":"5044F89A505C5B","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/6e/e39e90ca.jpg","comment_is_top":false,"comment_ctime":1554890892,"is_pvip":false,"replies":[{"id":"30637","content":"æ–‡ä¸­æœ‰è®²åˆ°çš„ï¼Œåœ¨å››æ¬¡æŒ¥æ‰‹çš„å›¾åé¢","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1555076102,"ip_address":"","comment_id":84657,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554890892","product_id":100020901,"comment_content":"ç”±äºTCPè¿æ¥æ˜¯å…¨åŒå·¥çš„ï¼Œå› æ­¤æ¯ä¸ªæ–¹å‘éƒ½å¿…é¡»å•ç‹¬è¿›è¡Œå…³é—­ã€‚è¿™åŸåˆ™æ˜¯å½“ä¸€æ–¹å®Œæˆå®ƒçš„æ•°æ®å‘é€ä»»åŠ¡åå°±èƒ½å‘é€ä¸€ä¸ªFINæ¥ç»ˆæ­¢è¿™ä¸ªæ–¹å‘çš„è¿æ¥ã€‚æ”¶åˆ°ä¸€ä¸ª FINåªæ„å‘³ç€è¿™ä¸€æ–¹å‘ä¸Šæ²¡æœ‰æ•°æ®æµåŠ¨ï¼Œä¸€ä¸ªTCPè¿æ¥åœ¨æ”¶åˆ°ä¸€ä¸ªFINåä»èƒ½å‘é€æ•°æ®ã€‚é¦–å…ˆè¿›è¡Œå…³é—­çš„ä¸€æ–¹å°†æ‰§è¡Œä¸»åŠ¨å…³é—­ï¼Œè€Œå¦ä¸€æ–¹æ‰§è¡Œè¢«åŠ¨å…³é—­ã€‚<br>ï¼ˆ1ï¼‰ TCPå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­å®¢æˆ·åˆ°æœåŠ¡å™¨çš„æ•°æ®ä¼ é€ã€‚<br>ï¼ˆ2ï¼‰ æœåŠ¡å™¨æ”¶åˆ°è¿™ä¸ªFINï¼Œå®ƒå‘å›ä¸€ä¸ªACKï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°çš„åºå·åŠ 1ã€‚å’ŒSYNä¸€æ ·ï¼Œä¸€ä¸ªFINå°†å ç”¨ä¸€ä¸ªåºå·ã€‚<br>ï¼ˆ3ï¼‰ æœåŠ¡å™¨å…³é—­å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå‘é€ä¸€ä¸ªFINç»™å®¢æˆ·ç«¯ã€‚<br>ï¼ˆ4ï¼‰ å®¢æˆ·ç«¯å‘å›ACKæŠ¥æ–‡ç¡®è®¤ï¼Œå¹¶å°†ç¡®è®¤åºå·è®¾ç½®ä¸ºæ”¶åˆ°åºå·åŠ 1ã€‚<br><br><br>è€å¸ˆè¿™ä¸ªæ˜¯ç™¾åº¦ç™¾ç§‘çš„ã€‚è¯·é—®ç¬¬ä¸€ä¸ªæŠ“åŒ…çš„æ—¶å€™æœ‰FIN æ²¡è¯´æœ‰ACK ï¼Œä½†æ˜¯ä¸Šå›¾ä¸­ACK=y+1; è€Œä½ çš„ï¼ˆWireshark TCP 4-times close ç¤ºä¾‹ è¿™å¥è¯çš„è¿æ¥çš„å›¾ç‰‡ï¼Œä¹Ÿæ˜¯æ²¡æœ‰ACKçš„ ã€‚ä½†æ˜¯å¹³å¸¸æŠ“åŒ…ç¡®å®ä¼šçœ‹åˆ°ACKã€‚ã€‚ã€‚é‚£è€å¸ˆ åˆ°åº•å¸¦ä¸å¸¦ACKï¼Œç¬¬ä¸€æ¬¡FINçš„æ—¶å€™?ï¼‰","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446416,"discussion_content":"æ–‡ä¸­æœ‰è®²åˆ°çš„ï¼Œåœ¨å››æ¬¡æŒ¥æ‰‹çš„å›¾åé¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555076102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82562,"user_name":"DigDeeply","can_delete":false,"product_type":"c1","uid":1239008,"ip_address":"","ucode":"113F4D755A1FEC","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/e0/33521e13.jpg","comment_is_top":false,"comment_ctime":1554252428,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554252428","product_id":100020901,"comment_content":"å·¥å…·å¾ˆç”¨æ³•ç®€å•ï¼Œæœ€é‡è¦çš„æ˜¯è¦äº†è§£TCPç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œå¦åˆ™èƒ½æŠ“åˆ°åŒ…ï¼Œä¹Ÿçœ‹ä¸å‡ºé—®é¢˜å’ŒåŸå› æ¥ã€‚<br>æ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ï¼Œå¾ˆå—ç›Šï¼Œéœ€è¦å†å·©å›ºä¸‹åŸºç¡€çŸ¥è¯†ã€‚","like_count":0},{"had_liked":false,"id":82340,"user_name":"å¦‚æœ","can_delete":false,"product_type":"c1","uid":1320638,"ip_address":"","ucode":"138A3EEEE50850","user_header":"","comment_is_top":false,"comment_ctime":1554187731,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554187731","product_id":100020901,"comment_content":"DAY38ï¼Œæ‰“å¡","like_count":0},{"had_liked":false,"id":79168,"user_name":"Griffin","can_delete":false,"product_type":"c1","uid":1087329,"ip_address":"","ucode":"CF766B92A65261","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/61/34a0da09.jpg","comment_is_top":false,"comment_ctime":1553394879,"is_pvip":false,"replies":[{"id":"29347","content":"åº”è¯¥æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼Œæ¯”å¦‚https:&#47;&#47;linux.die.net&#47;man&#47;8&#47;tcpdump è¿™å„¿å°±æœ‰","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1553699228,"ip_address":"","comment_id":79168,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553394879","product_id":100020901,"comment_content":"è€å¸ˆé—®ä¸ªé—®é¢˜ï¼Œæˆ‘man tcpdumpæœç´¢-nnæ²¡æ‰¾åˆ°ç»“æœï¼Œåªæœ‰-nçš„ä»‹ç»ã€‚æˆ‘æœç´¢äº†ä¸‹å‘ç°åœ¨linuxquestions.orgä¸Šæœ‰äººé—®ï¼Œå¹¶ä¸”å›ç­”è€…ä¹Ÿæ˜¯ç”¨çš„manï¼Œç»“æœæœ‰-nå’Œ-nnçš„ä»‹ç»ã€‚æ˜¯æˆ‘çš„manç‰ˆæœ¬ä¸å¯¹ä¹ˆï¼Ÿç³»ç»Ÿç‰ˆæœ¬æ˜¯18.04.1","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444381,"discussion_content":"åº”è¯¥æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼Œæ¯”å¦‚https://linux.die.net/man/8/tcpdump è¿™å„¿å°±æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553699228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79088,"user_name":"Maxwell","can_delete":false,"product_type":"c1","uid":1086275,"ip_address":"","ucode":"720A00AD472616","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/43/0e84492d.jpg","comment_is_top":false,"comment_ctime":1553349125,"is_pvip":false,"replies":[{"id":"29063","content":"æ˜¯ä¸æ˜¯æŠ“çš„åŒ…æ¯”è¾ƒå¤§ï¼ŸWiresharkè§£æéœ€è¦ä¸€å®šçš„æ—¶é—´ï¼Œç¨å¾®ç­‰ç­‰åº”è¯¥å¯ä»¥æ¢å¤","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1553527056,"ip_address":"","comment_id":79088,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553349125","product_id":100020901,"comment_content":"ubantuä¸‹ç”¨tcpdumpæŠ“åŒ…åï¼Œä¸‹è½½åˆ°æœ¬åœ°ï¼Œwindowsç‰ˆçš„wiresharkæ‰“å¼€æŠ“åŒ…æ–‡ä»¶ï¼Œä¸€ç›´æœªå“åº”ï¼Œæ˜¯å’‹å›äº‹å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444351,"discussion_content":"æ˜¯ä¸æ˜¯æŠ“çš„åŒ…æ¯”è¾ƒå¤§ï¼ŸWiresharkè§£æéœ€è¦ä¸€å®šçš„æ—¶é—´ï¼Œç¨å¾®ç­‰ç­‰åº”è¯¥å¯ä»¥æ¢å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553527056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}