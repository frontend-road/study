{"id":237060,"title":"28 | å®‰å…¨å…œåº•ï¼šæ¶‰åŠé’±æ—¶ï¼Œå¿…é¡»è€ƒè™‘é˜²åˆ·ã€é™é‡å’Œé˜²é‡","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™”ã€‚ä»Šå¤©ï¼Œæˆ‘è¦å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼Œä»»ä½•æ¶‰åŠé’±çš„ä»£ç å¿…é¡»è¦è€ƒè™‘é˜²åˆ·ã€é™é‡å’Œé˜²é‡ï¼Œè¦åšå¥½å®‰å…¨å…œåº•ã€‚</p><p>æ¶‰åŠé’±çš„ä»£ç ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç±»ã€‚</p><p>ç¬¬ä¸€ï¼Œä»£ç æœ¬èº«æ¶‰åŠæœ‰å¿ä½¿ç”¨çš„ä¸‰æ–¹æœåŠ¡ã€‚å¦‚æœå› ä¸ºä»£ç æœ¬èº«ç¼ºå°‘æˆæƒã€ç”¨é‡æ§åˆ¶è€Œè¢«åˆ©ç”¨å¯¼è‡´å¤§é‡è°ƒç”¨ï¼ŒåŠ¿å¿…ä¼šæ¶ˆè€—å¤§é‡çš„é’±ï¼Œç»™å…¬å¸é€ æˆæŸå¤±ã€‚æœ‰äº›ä¸‰æ–¹æœåŠ¡å¯èƒ½é‡‡ç”¨åä»˜æ¬¾æ–¹å¼çš„ç»“ç®—ï¼Œå‡ºç°é—®é¢˜åå¦‚æœæ²¡åŠæ—¶å‘ç°ï¼Œä¸‹ä¸ªæœˆç»“ç®—æ—¶å°±ä¼šæ”¶åˆ°ä¸€ç¬”æ•°é¢å·¨å¤§çš„è´¦å•ã€‚</p><p>ç¬¬äºŒï¼Œä»£ç æ¶‰åŠè™šæ‹Ÿèµ„äº§çš„å‘æ”¾ï¼Œæ¯”å¦‚ç§¯åˆ†ã€ä¼˜æƒ åˆ¸ç­‰ã€‚è™½ç„¶è¯´è™šæ‹Ÿèµ„äº§ä¸ç›´æ¥å¯¹åº”è´§å¸ï¼Œä½†ä¸€èˆ¬å¯ä»¥åœ¨å¹³å°å…‘æ¢å…·æœ‰çœŸå®ä»·å€¼çš„èµ„äº§ã€‚æ¯”å¦‚ï¼Œä¼˜æƒ åˆ¸å¯ä»¥åœ¨ä¸‹å•æ—¶ä½¿ç”¨ï¼Œç§¯åˆ†å¯ä»¥å…‘æ¢ç§¯åˆ†å•†åŸçš„å•†å“ã€‚æ‰€ä»¥ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œè™šæ‹Ÿèµ„äº§å°±æ˜¯å…·æœ‰ä¸€å®šä»·å€¼çš„é’±ï¼Œä½†å› ä¸ºä¸ç›´æ¥æ¶‰åŠé’±å’Œå¤–éƒ¨èµ„é‡‘é€šé“ï¼Œæ‰€ä»¥å®¹æ˜“äº§ç”Ÿéšæ„æ€§å‘æ”¾è€Œå¯¼è‡´æ¼æ´ã€‚</p><p>ç¬¬ä¸‰ï¼Œä»£ç æ¶‰åŠçœŸå®é’±çš„è¿›å‡ºã€‚æ¯”å¦‚ï¼Œå¯¹ç”¨æˆ·æ‰£æ¬¾ï¼Œå¦‚æœå‡ºç°éæ­£å¸¸çš„å¤šæ¬¡é‡å¤æ‰£æ¬¾ï¼Œå°åˆ™ç”¨æˆ·æŠ•è¯‰ã€ç”¨æˆ·æµå¤±ï¼Œå¤§åˆ™è¢«ç›¸å…³ç®¡ç†æœºæ„è¦æ±‚åœä¸šæ•´æ”¹ï¼Œå½±å“ä¸šåŠ¡ã€‚åˆæ¯”å¦‚ï¼Œç»™ç”¨æˆ·å‘æ”¾è¿”ç°çš„ä»˜æ¬¾åŠŸèƒ½ï¼Œå¦‚æœå‡ºç°æ¼æ´é€ æˆé‡å¤ä»˜æ¬¾ï¼Œæ¶‰åŠBç«¯çš„å¯èƒ½è¿˜å¥½ï¼Œä½†æ¶‰åŠCç«¯ç”¨æˆ·çš„é‡å¤ä»˜æ¬¾å¯èƒ½æ°¸è¿œæ— æ³•è¿½å›ã€‚</p><p>å‰æ®µæ—¶é—´æ‹¼å¤šå¤šä¸€å¤œä¹‹é—´è¢«åˆ·äº†å¤§é‡100å…ƒæ— é—¨æ§›ä¼˜æƒ åˆ¸çš„äº‹æƒ…ï¼Œå°±æ˜¯é™é‡å’Œé˜²åˆ·å‡ºäº†é—®é¢˜ã€‚</p><!-- [[[read_end]]] --><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸‰ä¸ªä¾‹å­ï¼Œå’Œä½ è¯´æ˜å¦‚ä½•åœ¨ä»£ç å±‚é¢åšå¥½å®‰å…¨å…œåº•ã€‚</p><h2>å¼€æ”¾å¹³å°èµ„æºçš„ä½¿ç”¨éœ€è¦è€ƒè™‘é˜²åˆ·</h2><p>æˆ‘ä»¥çœŸå®é‡åˆ°çš„çŸ­ä¿¡æœåŠ¡è¢«åˆ·æ¡ˆä¾‹ï¼Œå’Œä½ è¯´è¯´é˜²åˆ·ã€‚</p><p>æœ‰æ¬¡çŸ­ä¿¡è´¦å•æœˆç»“æ—¶å‘ç°ï¼Œä¹‹å‰æ¯ä¸ªæœˆæ˜¯å‡ åƒå…ƒçš„çŸ­ä¿¡è´¹ç”¨ï¼Œè¿™ä¸ªæœˆçªç„¶å˜ä¸ºäº†å‡ ä¸‡å…ƒã€‚æŸ¥æ•°æ®åº“è®°å½•å‘ç°ï¼Œä¹‹å‰æ˜¯æ¯å¤©å‘é€å‡ åƒæ¡çŸ­ä¿¡éªŒè¯ç ï¼Œä»æŸå¤©å¼€å§‹çªç„¶å˜ä¸ºäº†æ¯å¤©å‡ ä¸‡æ¡ï¼Œä½†æ³¨å†Œç”¨æˆ·æ•°å¹¶æ²¡æœ‰æ¿€å¢ã€‚æ˜¾ç„¶ï¼Œè¿™æ˜¯çŸ­ä¿¡æ¥å£è¢«åˆ·äº†ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒçŸ­ä¿¡éªŒè¯ç æœåŠ¡å±äºå¼€æ”¾æ€§æœåŠ¡ï¼Œç”±ç”¨æˆ·ä¾§è§¦å‘ï¼Œä¸”å› ä¸ºæ˜¯æ³¨å†ŒéªŒè¯ç æ‰€ä»¥ä¸éœ€è¦ç™»å½•å°±å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœæˆ‘ä»¬çš„å‘çŸ­ä¿¡æ¥å£åƒè¿™æ ·æ²¡æœ‰ä»»ä½•é˜²åˆ·çš„é˜²æŠ¤ï¼Œç›´æ¥è°ƒç”¨ä¸‰æ–¹çŸ­ä¿¡é€šé“ï¼Œå°±ç›¸å½“äºâ€œè£¸å¥”â€ï¼Œå¾ˆå®¹æ˜“è¢«çŸ­ä¿¡è½°ç‚¸å¹³å°åˆ©ç”¨ï¼š</p><pre><code>@GetMapping(&quot;wrong&quot;)\npublic void wrong() {\n    sendSMSCaptcha(&quot;13600000000&quot;);\n}\n\nprivate void sendSMSCaptcha(String mobile) {\n\t//è°ƒç”¨çŸ­ä¿¡é€šé“\n}\n</code></pre><p>å¯¹äºçŸ­ä¿¡éªŒè¯ç è¿™ç§å¼€æ”¾æ¥å£ï¼Œç¨‹åºé€»è¾‘å†…éœ€è¦æœ‰é˜²åˆ·é€»è¾‘ã€‚å¥½çš„é˜²åˆ·é€»è¾‘æ˜¯ï¼Œå¯¹æ­£å¸¸ä½¿ç”¨çš„ç”¨æˆ·æ¯«æ— å½±å“ï¼Œåªæœ‰ç–‘ä¼¼å¼‚å¸¸ä½¿ç”¨çš„ç”¨æˆ·æ‰ä¼šæ„Ÿå—åˆ°ã€‚å¯¹äºçŸ­ä¿¡éªŒè¯ç ï¼Œæœ‰å¦‚ä¸‹4ç§å¯è¡Œçš„æ–¹å¼æ¥é˜²åˆ·ã€‚</p><p>ç¬¬ä¸€ç§æ–¹å¼ï¼Œ<strong>åªæœ‰å›ºå®šçš„è¯·æ±‚å¤´æ‰èƒ½å‘é€éªŒè¯ç ã€‚</strong></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬é€šè¿‡è¯·æ±‚å¤´ä¸­ç½‘é¡µæˆ–Appå®¢æˆ·ç«¯ä¼ ç»™æœåŠ¡ç«¯çš„ä¸€äº›é¢å¤–å‚æ•°ï¼Œæ¥åˆ¤æ–­è¯·æ±‚æ˜¯ä¸æ˜¯Appå‘èµ·çš„ã€‚å…¶å®ï¼Œè¿™ç§æ–¹å¼â€œé˜²å›å­ä¸é˜²å°äººâ€ã€‚</p><p>æ¯”å¦‚ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æµè§ˆå™¨æˆ–æ‰‹æœºå‹å·ã€è®¾å¤‡åˆ†è¾¨ç‡è¯·æ±‚å¤´ã€‚å¯¹äºé‚£äº›ä½¿ç”¨çˆ¬è™«æ¥æŠ“å–çŸ­ä¿¡æ¥å£åœ°å€çš„ç¨‹åºæ¥è¯´ï¼Œå¾€å¾€åªèƒ½æŠ“å–åˆ°URLï¼Œè€Œéš¾ä»¥åˆ†æå‡ºè¯·æ±‚å‘é€çŸ­ä¿¡è¿˜éœ€è¦çš„é¢å¤–è¯·æ±‚å¤´ï¼Œå¯ä»¥çœ‹ä½œç¬¬ä¸€é“åŸºæœ¬é˜²å¾¡ã€‚</p><p>ç¬¬äºŒç§æ–¹å¼ï¼Œ<strong>åªæœ‰å…ˆåˆ°è¿‡æ³¨å†Œé¡µé¢æ‰èƒ½å‘é€éªŒè¯ç ã€‚</strong></p><p>å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œä¸ç®¡æ˜¯é€šè¿‡Appæ³¨å†Œè¿˜æ˜¯H5é¡µé¢æ³¨å†Œï¼Œä¸€å®šæ˜¯å…ˆè¿›å…¥æ³¨å†Œé¡µé¢æ‰èƒ½çœ‹åˆ°å‘é€éªŒè¯ç æŒ‰é’®ï¼Œå†ç‚¹å‡»å‘é€ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢æˆ–ç•Œé¢æ‰“å¼€æ—¶è¯·æ±‚å›ºå®šçš„å‰ç½®æ¥å£ï¼Œä¸ºè¿™ä¸ªè®¾å¤‡å¼€å¯å…è®¸å‘é€éªŒè¯ç çš„çª—å£ï¼Œä¹‹åçš„è¯·æ±‚å‘é€éªŒè¯ç æ‰æ˜¯æœ‰æ•ˆè¯·æ±‚ã€‚</p><p>è¿™ç§æ–¹å¼å¯ä»¥é˜²å¾¡ç›´æ¥ç»•å¼€å›ºå®šæµç¨‹ï¼Œé€šè¿‡æ¥å£ç›´æ¥è°ƒç”¨çš„å‘é€éªŒè¯ç è¯·æ±‚ï¼Œå¹¶ä¸ä¼šå¹²æ‰°æ™®é€šç”¨æˆ·ã€‚</p><p>ç¬¬ä¸‰ç§æ–¹å¼ï¼Œ<strong>æ§åˆ¶ç›¸åŒæ‰‹æœºå·çš„å‘é€æ¬¡æ•°å’Œå‘é€é¢‘æ¬¡ã€‚</strong></p><p>é™¤éæ˜¯çŸ­ä¿¡æ— æ³•æ”¶åˆ°ï¼Œå¦åˆ™ç”¨æˆ·ä¸å¤ªä¼šè¯·æ±‚äº†éªŒè¯ç åä¸å®Œæˆæ³¨å†Œæµç¨‹ï¼Œå†é‡æ–°è¯·æ±‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶åŒä¸€æ‰‹æœºå·æ¯å¤©çš„æœ€å¤§è¯·æ±‚æ¬¡æ•°ã€‚éªŒè¯ç çš„åˆ°è¾¾éœ€è¦æ—¶é—´ï¼Œå¤ªçŸ­çš„å‘é€é—´éš”æ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥æ§åˆ¶å‘é€çš„æœ€çŸ­é—´éš”ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶ç›¸åŒæ‰‹æœºå·ä¸€å¤©åªèƒ½å‘é€10æ¬¡éªŒè¯ç ï¼Œæœ€çŸ­å‘é€é—´éš”1åˆ†é’Ÿã€‚</p><p>ç¬¬å››ç§æ–¹å¼ï¼Œ<strong>å¢åŠ å‰ç½®å›¾å½¢éªŒè¯ç ã€‚</strong></p><p>çŸ­ä¿¡è½°ç‚¸å¹³å°ä¸€èˆ¬ä¼šæ”¶é›†å¾ˆå¤šå…è´¹çŸ­ä¿¡æ¥å£ï¼Œä¸€ä¸ªæ¥å£åªä¼šç»™ä¸€ä¸ªç”¨æˆ·å‘ä¸€æ¬¡çŸ­ä¿¡ï¼Œæ‰€ä»¥æ§åˆ¶ç›¸åŒæ‰‹æœºå·å‘é€æ¬¡æ•°å’Œé—´éš”çš„æ–¹å¼ä¸å¤Ÿæœ‰æ•ˆã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å¯¹ç”¨æˆ·ä½“éªŒç¨å¾®æœ‰å½±å“ï¼Œä½†ä¹Ÿæ˜¯æœ€æœ‰æ•ˆçš„æ–¹å¼ä½œä¸ºä¿åº•ï¼Œå³å°†å¼¹å‡ºå›¾å½¢éªŒè¯ç ä½œä¸ºå‰ç½®ã€‚</p><p>é™¤äº†å›¾å½¢éªŒè¯ç ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æ›´å‹å¥½çš„äººæœºéªŒè¯æ‰‹æ®µï¼ˆæ¯”å¦‚æ»‘åŠ¨ã€ç‚¹å‡»éªŒè¯ç ç­‰ï¼‰ï¼Œç”šè‡³æ˜¯å¼•å…¥æ¯”è¾ƒæ–°æ½®çš„æ— æ„ŸçŸ¥éªŒè¯ç æ–¹æ¡ˆï¼ˆæ¯”å¦‚ï¼Œé€šè¿‡åˆ¤æ–­ç”¨æˆ·è¾“å…¥æ‰‹æœºå·çš„æ‰“å­—èŠ‚å¥ï¼Œæ¥åˆ¤æ–­æ˜¯ç”¨æˆ·è¿˜æ˜¯æœºå™¨ï¼‰ï¼Œæ¥æ”¹å–„ç”¨æˆ·ä½“éªŒã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è€ƒè™‘åœ¨ç›‘æµ‹åˆ°å¼‚å¸¸çš„æƒ…å†µä¸‹å†å¼¹å‡ºäººæœºæ£€æµ‹ã€‚æ¯”å¦‚ï¼ŒçŸ­æ—¶é—´å†…å¤§é‡ç›¸åŒè¿œç«¯IPå‘é€éªŒè¯ç çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘äººæœºæ£€æµ‹ã€‚</p><p>æ€»ä¹‹ï¼Œæˆ‘ä»¬è¦ç¡®ä¿ï¼Œåªæœ‰æ­£å¸¸ç”¨æˆ·ç»è¿‡æ­£å¸¸çš„æµç¨‹æ‰èƒ½ä½¿ç”¨å¼€æ”¾å¹³å°èµ„æºï¼Œå¹¶ä¸”èµ„æºçš„ç”¨é‡åœ¨ä¸šåŠ¡éœ€æ±‚åˆç†èŒƒå›´å†…ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦è€ƒè™‘åšå¥½çŸ­ä¿¡å‘é€é‡çš„å®æ—¶ç›‘æ§ï¼Œé‡åˆ°å‘é€é‡æ¿€å¢è¦åŠæ—¶æŠ¥è­¦ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹çœ‹é™é‡çš„é—®é¢˜ã€‚</p><h2>è™šæ‹Ÿèµ„äº§å¹¶ä¸èƒ½å‡­ç©ºäº§ç”Ÿæ— é™ä½¿ç”¨</h2><p>è™šæ‹Ÿèµ„äº§è™½ç„¶æ˜¯å¹³å°æ–¹è‡ªå·±ç”Ÿäº§å’Œæ§åˆ¶ï¼Œä½†å¦‚æœç”Ÿäº§å‡ºæ¥å¯ä»¥ç«‹å³ä½¿ç”¨å°±æœ‰ç«‹å³å˜ç°çš„å¯èƒ½æ€§ã€‚æ¯”å¦‚ï¼Œå› ä¸ºå¹³å°Bugæœ‰å¤§é‡ç”¨æˆ·é¢†å–é«˜é¢ä¼˜æƒ åˆ¸ï¼Œå¹¶ç«‹å³ä¸‹å•ä½¿ç”¨ã€‚</p><p>åœ¨å•†å®¶çœ‹æ¥ï¼Œè¿™å¾ˆå¯èƒ½åªæ˜¯ä¸€ä¸ªç”¨æˆ·æ”¯ä»˜çš„è®¢å•ï¼Œå¹¶ä¸ä¼šæ„ŸçŸ¥åˆ°ç”¨æˆ·ä½¿ç”¨å¹³å°æ–¹ä¼˜æƒ åˆ¸çš„æƒ…å†µï¼›åŒæ—¶ï¼Œå› ä¸ºå¹³å°å’Œå•†å®¶æ˜¯äº‹åç»“ç®—çš„ï¼Œæ‰€ä»¥ä¼šé©¬ä¸Šå®‰æ’å‘è´§ã€‚è€Œå‘è´§ååŸºæœ¬å°±ä¸å¯é€†äº†ï¼Œä¸€å¤œä¹‹é—´é€ æˆäº†å¤§é‡èµ„é‡‘æŸå¤±ã€‚</p><p>æˆ‘ä»¬ä»ä»£ç å±‚é¢æ¨¡æ‹Ÿä¸€ä¸ªä¼˜æƒ åˆ¸è¢«åˆ·çš„ä¾‹å­ã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªCouponCenterç±»è´Ÿè´£ä¼˜æƒ åˆ¸çš„äº§ç”Ÿå’Œå‘æ”¾ã€‚å¦‚ä¸‹æ˜¯é”™è¯¯åšæ³•ï¼Œåªè¦è°ƒç”¨æ–¹éœ€è¦ï¼Œå°±å¯ä»¥å‡­ç©ºäº§ç”Ÿæ— é™çš„ä¼˜æƒ åˆ¸ï¼š</p><pre><code>@Slf4j\npublic class CouponCenter {\n    //ç”¨äºç»Ÿè®¡å‘äº†å¤šå°‘ä¼˜æƒ åˆ¸\n    AtomicInteger totalSent = new AtomicInteger(0);\n    public void sendCoupon(Coupon coupon) {\n        if (coupon != null)\n            totalSent.incrementAndGet();\n    }\n\n    public int getTotalSentCoupon() {\n        return totalSent.get();\n    }\n\n    //æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œæ¥å¤šå°‘è¯·æ±‚ç”Ÿæˆå¤šå°‘ä¼˜æƒ åˆ¸\n    public Coupon generateCouponWrong(long userId, BigDecimal amount)              {\n        return new Coupon(userId, amount);\n    }\n}\n</code></pre><p>è¿™æ ·ä¸€æ¥ï¼Œä½¿ç”¨CouponCenterçš„generateCouponWrongæ–¹æ³•ï¼Œæƒ³å‘å¤šå°‘ä¼˜æƒ åˆ¸å°±å¯ä»¥å‘å¤šå°‘ï¼š</p><pre><code>@GetMapping(&quot;wrong&quot;)\npublic int wrong() {\n    CouponCenter couponCenter = new CouponCenter();\n    //å‘é€10000ä¸ªä¼˜æƒ åˆ¸\n    IntStream.rangeClosed(1, 10000).forEach(i -&gt; {\n        Coupon coupon = couponCenter.generateCouponWrong(1L, new BigDecimal(&quot;100&quot;));\n        couponCenter.sendCoupon(coupon);\n    });\n    return couponCenter.getTotalSentCoupon();\n}\n</code></pre><p><strong>æ›´åˆé€‚çš„åšæ³•æ˜¯ï¼ŒæŠŠä¼˜æƒ åˆ¸çœ‹ä½œä¸€ç§èµ„æºï¼Œå…¶ç”Ÿäº§ä¸æ˜¯å‡­ç©ºçš„ï¼Œè€Œæ˜¯éœ€è¦äº‹å…ˆç”³è¯·</strong>ï¼Œç†ç”±æ˜¯ï¼š</p><ul>\n<li>è™šæ‹Ÿèµ„äº§å¦‚æœæœ€ç»ˆå¯ä»¥å¯¹åº”åˆ°çœŸå®é‡‘é’±ä¸Šçš„ä¼˜æƒ ï¼Œé‚£ä¹ˆï¼Œèƒ½å‘å¤šå°‘å–å†³äºè¿è¥å’Œè´¢åŠ¡çš„æ ¸ç®—ï¼Œåº”è¯¥æ˜¯æœ‰è®¡åˆ’ã€æœ‰ä¸Šé™çš„ã€‚å¼•è¨€æåˆ°çš„æ— é—¨æ§›ä¼˜æƒ åˆ¸ï¼Œéœ€è¦ç‰¹åˆ«å°å¿ƒã€‚æœ‰é—¨æ§›ä¼˜æƒ åˆ¸çš„å¤§é‡ä½¿ç”¨è‡³å°‘ä¼šå¸¦æ¥å¤§é‡çœŸå®çš„æ¶ˆè´¹ï¼Œè€Œä½¿ç”¨æ— é—¨æ§›ä¼˜æƒ åˆ¸ä¸‹çš„è®¢å•ï¼Œå¯èƒ½ç”¨æˆ·ä¸€åˆ†é’±éƒ½æ²¡æœ‰æ”¯ä»˜ã€‚</li>\n<li>å³ä½¿è™šæ‹Ÿèµ„äº§ä¸å€¼é’±ï¼Œå¤§é‡ä¸åˆå¸¸è§„çš„è™šæ‹Ÿèµ„äº§æµå…¥å¸‚åœºï¼Œä¹Ÿä¼šå†²å®è™šæ‹Ÿèµ„äº§çš„ç»æµä½“ç³»ï¼Œé€ æˆè™šæ‹Ÿè´§å¸çš„æé€Ÿè´¬å€¼ã€‚æœ‰é‡çš„æ§åˆ¶æ‰æœ‰ä»·å€¼ã€‚</li>\n<li>èµ„äº§çš„ç”³è¯·éœ€è¦ç†ç”±ï¼Œç”šè‡³éœ€è¦èµ°æµç¨‹ï¼Œè¿™æ ·æ‰å¯ä»¥è¿½æº¯æ˜¯ä»€ä¹ˆæ´»åŠ¨éœ€è¦ã€è°æå‡ºçš„ç”³è¯·ï¼Œç¨‹åºä¾æ®ç”³è¯·æ‰¹æ¬¡æ¥å‘æ”¾ã€‚</li>\n</ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ€è·¯æ”¹è¿›ä¸€ä¸‹ç¨‹åºã€‚</p><p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªCouponBatchç±»ï¼Œè¦äº§ç”Ÿä¼˜æƒ åˆ¸å¿…é¡»å…ˆå‘è¿è¥ç”³è¯·ä¼˜æƒ åˆ¸æ‰¹æ¬¡ï¼Œæ‰¹æ¬¡ä¸­åŒ…å«äº†å›ºå®šå¼ æ•°çš„ä¼˜æƒ åˆ¸ã€ç”³è¯·åŸå› ç­‰ä¿¡æ¯ï¼š</p><pre><code>//ä¼˜æƒ åˆ¸æ‰¹æ¬¡\n@Data\npublic class CouponBatch {\n    private long id;\n    private AtomicInteger totalCount;\n    private AtomicInteger remainCount;\n    private BigDecimal amount;\n    private String reason;\n}\n</code></pre><p>åœ¨ä¸šåŠ¡éœ€è¦å‘æ”¾ä¼˜æƒ åˆ¸çš„æ—¶å€™ï¼Œå…ˆç”³è¯·æ‰¹æ¬¡ï¼Œç„¶åå†é€šè¿‡æ‰¹æ¬¡å‘æ”¾ä¼˜æƒ åˆ¸ï¼š</p><pre><code>@GetMapping(&quot;right&quot;)\npublic int right() {\n    CouponCenter couponCenter = new CouponCenter();\n    //ç”³è¯·æ‰¹æ¬¡    \n    CouponBatch couponBatch = couponCenter.generateCouponBatch();\n    IntStream.rangeClosed(1, 10000).forEach(i -&gt; {\n        Coupon coupon = couponCenter.generateCouponRight(1L, couponBatch);\n        //å‘æ”¾ä¼˜æƒ åˆ¸\n        couponCenter.sendCoupon(coupon);\n    });\n    return couponCenter.getTotalSentCoupon();\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒgenerateCouponBatchæ–¹æ³•ç”³è¯·æ‰¹æ¬¡æ—¶ï¼Œè®¾å®šäº†è¿™ä¸ªæ‰¹æ¬¡åŒ…å«100å¼ ä¼˜æƒ åˆ¸ã€‚åœ¨é€šè¿‡generateCouponRightæ–¹æ³•å‘æ”¾ä¼˜æƒ åˆ¸æ—¶ï¼Œæ¯å‘ä¸€æ¬¡éƒ½ä¼šä»æ‰¹æ¬¡ä¸­æ‰£é™¤ä¸€å¼ ä¼˜æƒ åˆ¸ï¼Œå‘å®Œäº†å°±æ²¡æœ‰äº†ï¼š</p><pre><code>public Coupon generateCouponRight(long userId, CouponBatch couponBatch) {\n    if (couponBatch.getRemainCount().decrementAndGet() &gt;= 0) {\n        return new Coupon(userId, couponBatch.getAmount());\n    } else {\n        log.info(&quot;ä¼˜æƒ åˆ¸æ‰¹æ¬¡ {} å‰©ä½™ä¼˜æƒ åˆ¸ä¸è¶³&quot;, couponBatch.getId());\n        return null;\n    }\n}\n\n\npublic CouponBatch generateCouponBatch() {\n    CouponBatch couponBatch = new CouponBatch();\n    couponBatch.setAmount(new BigDecimal(&quot;100&quot;));\n    couponBatch.setId(1L);\n    couponBatch.setTotalCount(new AtomicInteger(100));\n    couponBatch.setRemainCount(couponBatch.getTotalCount());\n    couponBatch.setReason(&quot;XXXæ´»åŠ¨&quot;);\n    return couponBatch;\n}\n</code></pre><p>è¿™æ ·æ”¹è¿›åçš„ç¨‹åºï¼Œä¸€ä¸ªæ‰¹æ¬¡æœ€å¤šåªèƒ½å‘æ”¾100å¼ ä¼˜æƒ åˆ¸ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/c9/cb/c971894532afd5f5150a6ab2fc0833cb.png?wh=976*230\" alt=\"\"></p><p>å› ä¸ºæ˜¯Demoï¼Œæ‰€ä»¥æˆ‘ä»¬åªæ˜¯å‡­ç©ºnewå‡ºæ¥ä¸€ä¸ªCouponã€‚åœ¨çœŸå®çš„ç”Ÿäº§çº§ä»£ç ä¸­ï¼Œä¸€å®šæ˜¯æ ¹æ®CouponBatchåœ¨æ•°æ®åº“ä¸­æ’å…¥ä¸€å®šé‡çš„Couponè®°å½•ï¼Œæ¯ä¸€ä¸ªä¼˜æƒ åˆ¸éƒ½æœ‰å”¯ä¸€çš„IDï¼Œå¯è·Ÿè¸ªã€å¯æ³¨é”€ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å†çœ‹çœ‹é˜²é‡ã€‚</p><h2>é’±çš„è¿›å‡ºä¸€å®šè¦å’Œè®¢å•æŒ‚é’©å¹¶ä¸”å®ç°å¹‚ç­‰</h2><p>æ¶‰åŠé’±çš„è¿›å‡ºï¼Œéœ€è¦åšå¥½ä»¥ä¸‹ä¸¤ç‚¹ã€‚</p><p>ç¬¬ä¸€ï¼Œ<strong>ä»»ä½•èµ„é‡‘æ“ä½œéƒ½éœ€è¦åœ¨å¹³å°ä¾§ç”Ÿæˆä¸šåŠ¡å±æ€§çš„è®¢å•ï¼Œå¯ä»¥æ˜¯ä¼˜æƒ åˆ¸å‘æ”¾è®¢å•ï¼Œå¯ä»¥æ˜¯è¿”ç°è®¢å•ï¼Œä¹Ÿå¯ä»¥æ˜¯å€Ÿæ¬¾è®¢å•ï¼Œä¸€å®šæ˜¯å…ˆæœ‰è®¢å•å†å»åšèµ„é‡‘æ“ä½œ</strong>ã€‚åŒæ—¶ï¼Œè®¢å•çš„äº§ç”Ÿéœ€è¦æœ‰ä¸šåŠ¡å±æ€§ã€‚ä¸šåŠ¡å±æ€§æ˜¯æŒ‡ï¼Œè®¢å•ä¸æ˜¯å‡­ç©ºäº§ç”Ÿçš„ï¼Œå¦åˆ™å°±æ²¡æœ‰æ§åˆ¶çš„æ„ä¹‰ã€‚æ¯”å¦‚ï¼Œè¿”ç°å‘æ”¾è®¢å•å¿…é¡»å…³è”åˆ°åŸå…ˆçš„å•†å“è®¢å•äº§ç”Ÿï¼›å†æ¯”å¦‚ï¼Œå€Ÿæ¬¾è®¢å•å¿…é¡»å…³è”åˆ°åŒä¸€ä¸ªå€Ÿæ¬¾åˆåŒäº§ç”Ÿã€‚</p><p>ç¬¬äºŒï¼Œ<strong>ä¸€å®šè¦åšå¥½é˜²é‡ï¼Œä¹Ÿå°±æ˜¯å®ç°å¹‚ç­‰å¤„ç†ï¼Œå¹¶ä¸”å¹‚ç­‰å¤„ç†å¿…é¡»æ˜¯å…¨é“¾è·¯çš„</strong>ã€‚è¿™é‡Œçš„å…¨é“¾è·¯æ˜¯æŒ‡ï¼Œä»å‰åˆ°åéƒ½éœ€è¦æœ‰ç›¸åŒçš„ä¸šåŠ¡è®¢å•å·æ¥è´¯ç©¿ï¼Œå®ç°æœ€ç»ˆçš„æ”¯ä»˜é˜²é‡ã€‚</p><p>å…³äºè¿™ä¸¤ç‚¹ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ç¤ºä¾‹ï¼š</p><pre><code>//é”™è¯¯ï¼šæ¯æ¬¡ä½¿ç”¨UUIDä½œä¸ºè®¢å•å·\n@GetMapping(&quot;wrong&quot;)\npublic void wrong(@RequestParam(&quot;orderId&quot;) String orderId) {\n    PayChannel.pay(UUID.randomUUID().toString(), &quot;123&quot;, new BigDecimal(&quot;100&quot;));\n}\n\n//æ­£ç¡®ï¼šä½¿ç”¨ç›¸åŒçš„ä¸šåŠ¡è®¢å•å·\n@GetMapping(&quot;right&quot;)\npublic void right(@RequestParam(&quot;orderId&quot;) String orderId) {\n    PayChannel.pay(orderId, &quot;123&quot;, new BigDecimal(&quot;100&quot;));\n}\n//ä¸‰æ–¹æ”¯ä»˜é€šé“\npublic class PayChannel {\n    public static void pay(String orderId, String account, BigDecimal amount) {\n        ...\n    }\n}\n</code></pre><p>å¯¹äºæ”¯ä»˜æ“ä½œï¼Œæˆ‘ä»¬ä¸€å®šæ˜¯è°ƒç”¨ä¸‰æ–¹æ”¯ä»˜å…¬å¸çš„æ¥å£æˆ–é“¶è¡Œæ¥å£è¿›è¡Œå¤„ç†çš„ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œè¿™äº›æ¥å£éƒ½ä¼šæœ‰å•†æˆ·è®¢å•å·çš„æ¦‚å¿µï¼Œå¯¹äºç›¸åŒçš„å•†æˆ·è®¢å•å·ï¼Œæ— æ³•è¿›è¡Œé‡å¤çš„èµ„é‡‘å¤„ç†ï¼Œæ‰€ä»¥ä¸‰æ–¹å…¬å¸çš„æ¥å£å¯ä»¥å®ç°å”¯ä¸€è®¢å•å·çš„å¹‚ç­‰å¤„ç†ã€‚</p><p>ä½†æ˜¯ï¼Œä¸šåŠ¡ç³»ç»Ÿåœ¨å®ç°èµ„é‡‘æ“ä½œæ—¶å®¹æ˜“çŠ¯çš„é”™æ˜¯ï¼Œæ²¡æœ‰è‡ªå§‹è‡³ç»ˆåœ°ä½¿ç”¨ä¸€ä¸ªè®¢å•å·ä½œä¸ºå•†æˆ·è®¢å•å·ï¼Œé€ä¼ ç»™ä¸‰æ–¹æ”¯ä»˜æ¥å£ã€‚å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ï¼Œæ¯”è¾ƒå¤§çš„äº’è”ç½‘å…¬å¸ä¸€èˆ¬ä¼šæŠŠæ”¯ä»˜ç‹¬ç«‹ä¸€ä¸ªéƒ¨é—¨ã€‚æ”¯ä»˜éƒ¨é—¨å¯èƒ½ä¼šé’ˆå¯¹æ”¯ä»˜åšèšåˆæ“ä½œï¼Œå†…éƒ¨ä¼šç»´æŠ¤ä¸€ä¸ªæ”¯ä»˜è®¢å•å·ï¼Œç„¶åä½¿ç”¨æ”¯ä»˜è®¢å•å·å’Œä¸‰æ–¹æ”¯ä»˜æ¥å£äº¤äº’ã€‚æœ€ç»ˆè™½ç„¶å•†å“è®¢å•æ˜¯ä¸€ä¸ªï¼Œä½†æ”¯ä»˜è®¢å•æ˜¯å¤šä¸ªï¼Œç›¸åŒçš„å•†å“è®¢å•å› ä¸ºäº§ç”Ÿå¤šä¸ªæ”¯ä»˜è®¢å•å¯¼è‡´å¤šæ¬¡æ”¯ä»˜ã€‚</p><p>å¦‚æœè¯´ï¼Œæ”¯ä»˜å‡ºç°äº†é‡å¤æ‰£æ¬¾ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ç”¨æˆ·è¿›è¡Œé€€æ¬¾æ“ä½œï¼Œä½†ç»™ç”¨æˆ·ä»˜æ¬¾çš„æ“ä½œä¸€æ—¦å‡ºç°é‡å¤ä»˜æ¬¾ï¼Œå°±å¾ˆéš¾æŠŠé’±è¿½å›æ¥äº†ï¼Œæ‰€ä»¥æ›´è¦å°å¿ƒã€‚</p><p>è¿™ï¼Œå°±æ˜¯å…¨é“¾è·¯çš„æ„ä¹‰ï¼Œä»ä¸€å¼€å§‹å°±éœ€è¦å…ˆæœ‰ä¸šåŠ¡è®¢å•äº§ç”Ÿï¼Œç„¶åä½¿ç”¨ç›¸åŒçš„ä¸šåŠ¡è®¢å•å·ä¸€ç›´è´¯ç©¿åˆ°æœ€åçš„èµ„é‡‘é€šè·¯ï¼Œæ‰èƒ½çœŸæ­£é¿å…é‡å¤èµ„é‡‘æ“ä½œã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>ä»Šå¤©ï¼Œæˆ‘ä»å®‰å…¨å…œåº•èŠèµ·ï¼Œå’Œä½ åˆ†äº«äº†æ¶‰åŠé’±çš„ä¸šåŠ¡æœ€éœ€è¦åšçš„ä¸‰æ–¹é¢å·¥ä½œï¼Œé˜²åˆ·ã€é™é‡å’Œé˜²é‡ã€‚</p><p>ç¬¬ä¸€ï¼Œä½¿ç”¨å¼€æ”¾çš„ã€é¢å‘ç”¨æˆ·çš„å¹³å°èµ„æºè¦è€ƒè™‘é˜²åˆ·ï¼Œä¸»è¦åŒ…æ‹¬æ­£å¸¸ä½¿ç”¨æµç¨‹è¯†åˆ«ã€äººæœºè¯†åˆ«ã€å•äººé™é‡å’Œå…¨å±€é™é‡ç­‰æ‰‹æ®µã€‚</p><p>ç¬¬äºŒï¼Œè™šæ‹Ÿèµ„äº§ä¸èƒ½å‡­ç©ºäº§ç”Ÿï¼Œä¸€å®šæ˜¯å…ˆæœ‰å‘æ”¾è®¡åˆ’ã€ç”³è¯·æ‰¹æ¬¡ï¼Œç„¶åé€šè¿‡æ‰¹æ¬¡æ¥ç”Ÿäº§èµ„äº§ã€‚è¿™æ ·æ‰èƒ½è¾¾åˆ°é™é‡ã€æœ‰å®¡è®¡ã€èƒ½è¿½æº¯çš„ç›®çš„ã€‚</p><p>ç¬¬ä¸‰ï¼ŒçœŸå®é’±çš„è¿›å‡ºæ“ä½œè¦é¢å¤–å°å¿ƒï¼Œåšå¥½é˜²é‡å¤„ç†ã€‚ä¸èƒ½å‡­ç©ºå»æ“ä½œç”¨æˆ·çš„è´¦æˆ·ï¼Œæ¯æ¬¡æ“ä½œä»¥çœŸå®çš„è®¢å•ä½œä¸ºä¾æ®ï¼Œé€šè¿‡ä¸šåŠ¡è®¢å•å·å®ç°å…¨é“¾è·¯çš„å¹‚ç­‰æ§åˆ¶ã€‚</p><p>å¦‚æœç¨‹åºé€»è¾‘æ¶‰åŠæœ‰ä»·å€¼çš„èµ„æºæˆ–æ˜¯çœŸå®çš„é’±ï¼Œæˆ‘ä»¬å¿…é¡»æœ‰æ•¬ç•ä¹‹å¿ƒã€‚ç¨‹åºä¸Šçº¿åï¼Œäººæ˜¯æœ‰ä¼‘æ¯æ—¶é—´çš„ï¼Œä½†ç¨‹åºæ˜¯ä¸€ç›´è¿è¡Œç€çš„ï¼Œå¦‚æœäº§ç”Ÿå®‰å…¨æ¼æ´ï¼Œå°±å¾ˆå¯èƒ½åœ¨ä¸€å¤œä¹‹é—´çˆ†å‘ï¼Œè¢«å¤§é‡äººåˆ©ç”¨å¯¼è‡´å¤§é‡çš„é‡‘é’±æŸå¤±ã€‚</p><p>é™¤äº†åœ¨æµç¨‹ä¸Šåšå¥½é˜²åˆ·ã€é™é‡å’Œé˜²é‡æ§åˆ¶ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšå¥½ä¸‰æ–¹å¹³å°è°ƒç”¨é‡ã€è™šæ‹Ÿèµ„äº§ä½¿ç”¨é‡ã€äº¤æ˜“é‡ã€äº¤æ˜“é‡‘é¢ç­‰é‡è¦æ•°æ®çš„ç›‘æ§æŠ¥è­¦ï¼Œè¿™æ ·å³ä½¿å‡ºç°é—®é¢˜ä¹Ÿèƒ½ç¬¬ä¸€æ—¶é—´å‘ç°ã€‚</p><p>ä»Šå¤©ç”¨åˆ°çš„ä»£ç ï¼Œæˆ‘éƒ½æ”¾åœ¨äº†GitHubä¸Šï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"https://github.com/JosephZhu1983/java-common-mistakes\">è¿™ä¸ªé“¾æ¥</a>æŸ¥çœ‹ã€‚</p><h2>æ€è€ƒä¸è®¨è®º</h2><ol>\n<li>é˜²é‡ã€é˜²åˆ·éƒ½æ˜¯äº‹å‰æ‰‹æ®µï¼Œå¦‚æœæˆ‘ä»¬çš„ç³»ç»Ÿæ­£åœ¨è¢«æ”»å‡»æˆ–åˆ©ç”¨ï¼Œä½ æœ‰ä»€ä¹ˆåŠæ³•åŠæ—¶å‘ç°é—®é¢˜å—ï¼Ÿ</li>\n<li>ä»»ä½•ä¸‰æ–¹èµ„æºçš„ä½¿ç”¨ä¸€èˆ¬éƒ½ä¼šå®šæœŸå¯¹è´¦ï¼Œå¦‚æœåœ¨å¯¹è´¦ä¸­å‘ç°æˆ‘ä»¬ç³»ç»Ÿè®°å½•çš„è°ƒç”¨é‡ä½äºå¯¹æ–¹ç³»ç»Ÿè®°å½•çš„ä½¿ç”¨é‡ï¼Œä½ è§‰å¾—ä¸€èˆ¬æ˜¯ä»€ä¹ˆé—®é¢˜å¼•èµ·çš„å‘¢ï¼Ÿ</li>\n</ol><p>æœ‰å…³å®‰å…¨å…œåº•ï¼Œä½ è¿˜æœ‰ä»€ä¹ˆå¿ƒå¾—å—ï¼Ÿæˆ‘æ˜¯æœ±æ™”ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºä¸æˆ‘ç•™è¨€åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ï¼Œä¸€èµ·äº¤æµã€‚</p>","neighbors":{"left":{"article_title":"27 | æ•°æ®æºå¤´ï¼šä»»ä½•å®¢æˆ·ç«¯çš„ä¸œè¥¿éƒ½ä¸å¯ä¿¡ä»»","id":235700},"right":{"article_title":"29 | æ•°æ®å’Œä»£ç ï¼šæ•°æ®å°±æ˜¯æ•°æ®ï¼Œä»£ç å°±æ˜¯ä»£ç ","id":237139}},"comments":[{"had_liked":false,"id":219360,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1590017312,"is_pvip":false,"replies":[{"id":"81045","content":"é—®é¢˜äºŒï¼Œä¹‹å‰é‡åˆ°çš„æƒ…å†µæ˜¯ï¼Œåœ¨äº‹åŠ¡å†…è°ƒç”¨å¤–éƒ¨æ¥å£ï¼Œè°ƒç”¨è¶…æ—¶åäº‹åŠ¡å›æ»šæœ¬åœ°å°±æ²¡æœ‰ç•™ä¸‹æ•°æ®ï¼Œå¯¹è´¦çš„æ—¶å€™è¦å¯¹ä¸¤è¾¹ï¼Œä¸ç®¡å“ªæ–¹æ•°æ®ç¼ºå¤±éƒ½å¯èƒ½æ˜¯å› ä¸ºæœ‰bugéœ€è¦é‡è§†","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1590025067,"ip_address":"","comment_id":219360,"utype":1}],"discussion_count":4,"race_medal":1,"score":"87489363232","product_id":100047701,"comment_content":"1.å¯¹äºé˜²é‡ï¼Œé˜²åˆ·ã€‚å¯ä»¥é€šè¿‡æ•°æ®ç›‘æ§æ¥å®ç°ç±»ä¼¼ç†”æ–­æœºåˆ¶ï¼Œæ¯”å¦‚æ•°æ®ç›‘æ§æŸä¸ªåŠŸèƒ½åœ¨è¢«åˆ·ï¼Œè§¦å‘æŠ¥è­¦ï¼ŒåŒæ—¶ç†”æ–­ï¼Œæš‚æ—¶æŠŠè¯¥åŠŸèƒ½ç¦æ‰ï¼Œå‡å°‘æŸå¤±ã€‚<br>2.æƒ³åˆ°ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬ç³»ç»Ÿå¯¹äºç¬¬ä¸‰æ–¹è°ƒç”¨è¿”å›å€¼å¤„ç†ä¸å½“ï¼Œå¯¼è‡´æœ‰é‡å¤è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç³»ç»Ÿé˜²é‡æ²¡æœ‰åšå¥½ã€‚","like_count":21,"discussions":[{"author":{"id":1079495,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","nickname":"æ–°ä¸–ç•Œ","note":"","ucode":"4473DC1505F158","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549681,"discussion_content":"æ˜¯çš„ï¼ŒåŸåˆ™æ˜¯äº‹åŠ¡å†…æ˜¯ä¸å…è®¸è°ƒç”¨httpçš„ï¼Œä¸€ä¸ªhttpè¯·æ±‚200æ¯«ç§’ï¼Œäº‹åŠ¡å¤„ç†ä¸€æ¡ç®€å•sql 1-2æ¯«ç±³ï¼Œä¸æ˜¯ä¸€ä¸ªé‡çº§ï¼Œç›´æ¥è°ƒç”¨ä¼šæ‹–æ…¢æ•°æ®åº“","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1644204521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495783,"discussion_content":"é—®é¢˜äºŒï¼Œä¹‹å‰é‡åˆ°çš„æƒ…å†µæ˜¯ï¼Œåœ¨äº‹åŠ¡å†…è°ƒç”¨å¤–éƒ¨æ¥å£ï¼Œè°ƒç”¨è¶…æ—¶åäº‹åŠ¡å›æ»šæœ¬åœ°å°±æ²¡æœ‰ç•™ä¸‹æ•°æ®ï¼Œå¯¹è´¦çš„æ—¶å€™è¦å¯¹ä¸¤è¾¹ï¼Œä¸ç®¡å“ªæ–¹æ•°æ®ç¼ºå¤±éƒ½å¯èƒ½æ˜¯å› ä¸ºæœ‰bugéœ€è¦é‡è§†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590025067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1162714,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bd/da/3d76ea74.jpg","nickname":"çœ‹ä¸åˆ°deé¢œè‰²","note":"","ucode":"88348CCAE81931","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286591,"discussion_content":"è¿™ç§åœºæ™¯ä¸‹æŠŠè°ƒç”¨å¤–éƒ¨æ¥å£æ”¾åˆ°äº‹åŠ¡å†…å¤„ç†æ˜¯å¦åˆé€‚å‘¢ï¼Ÿæœ‰æ²¡æœ‰åˆ«çš„æªæ–½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593238275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2378309,"avatar":"https://static001.geekbang.org/account/avatar/00/24/4a/45/e048531a.jpg","nickname":"è¿ªç±³ä¹Œæ ¼æ–¯","note":"","ucode":"1D4393746DCBCE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374271,"discussion_content":"ä¹‹å‰é‡åˆ°çš„æƒ…å†µå°±æ˜¯, å¯¹è´¦å‘ç°å¯¹æ–¹è®°å½•çš„apiè¯·æ±‚æ¬¡æ•°æ˜æ˜¾é«˜äºæœ¬åœ°è®°å½•æ¬¡æ•°, ç¡®å®æ˜¯å› ä¸ºapiè°ƒç”¨æŠ¥é”™å¯¼è‡´çš„äº‹åŠ¡å›æ»š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621088745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220970,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1590369240,"is_pvip":false,"replies":[{"id":"81473","content":"åˆ†æçš„ä¸é”™","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1590370751,"ip_address":"","comment_id":220970,"utype":1}],"discussion_count":2,"race_medal":0,"score":"61719911384","product_id":100047701,"comment_content":"å®‰å…¨å…œåº• çš„é—®é¢˜ï¼Œæˆ‘çš„ç†è§£æ˜¯åˆ†çº§åˆ«ã€‚<br>æˆ‘çš„åˆæ­¥åˆ†çº§æ˜¯ 1ï¼Œæ— é™é¢æ¶‰åŠé’±çš„é—®é¢˜ï¼ˆç±»ä¼¼äºé€€æ¬¾ï¼‰ï¼Œ2ï¼Œé™é¢è®¾è®¡é’±çš„é—®é¢˜ï¼ˆä¸ºç”¨æˆ·æä¾›çš„çº¢åŒ…å¥–åŠ±ç­‰ï¼Œè¿™éƒ¨åˆ†é’±é€šå¸¸æœ‰é™é¢ï¼‰ 3ï¼Œæ— é—¨æ§›è™šæ‹Ÿè´§å¸ï¼ˆæ— é—¨æ§›ä¼˜æƒ åˆ¸ï¼Œæ— é—¨æ§›ç§¯åˆ†ç­‰ï¼Œå› ä¸ºè¿™éƒ¨åˆ†åŸºæœ¬ä¸è´§å¸å¯ä»¥ç­‰å€¼ï¼Œä½†æ˜¯ç”±äºå­˜åœ¨å¯ä»¥è¿½å›çš„æœºä¼šï¼Œæ‰€ä»¥å°šå­˜ä¸€äº›å®¹é”™ï¼‰ 4ï¼Œæœ‰é—¨æ§›è™šæ‹Ÿè´§å¸ï¼ˆè¿™éƒ¨åˆ†ï¼ŒåŸºæœ¬ä¸Šï¼Œå› ä¸ºå…¶ç›®çš„å°±æ˜¯ä¿ƒé”€ï¼Œå¹¶ä¸ä¼šå¸¦æ¥å®è´¨ä¸Šçš„ç»æµæŸå¤±ï¼Œæ‰€ä»¥å°±å¹¶æ²¡æœ‰é‚£ä¹ˆæ•æ„Ÿäº†ï¼‰<br><br>åˆ†çº§ä¹‹åï¼Œå†è¿›ä¸€æ­¥åˆ’åˆ†å¤„ç†çš„çº§åˆ«ã€‚å› ä¸ºäººåŠ›å’Œæ—¶é—´éƒ½æ˜¯æœ‰é™çš„ï¼Œå¾ˆéš¾å°†æ‰€æœ‰çš„å®‰å…¨å…œåº•éƒ½æ§åˆ¶çš„é‚£ä¹ˆå®Œç¾ï¼Œé‚£å°±ä¼˜å…ˆä¿è¯ä¸€äº›æŸå¤±å½±å“å¯èƒ½è¾ƒå¤§çš„ä¸šåŠ¡ä¸Šã€‚<br><br>æƒé‡æ›´é«˜çš„ä¸šåŠ¡ï¼Œå¯ä»¥äºˆä»¥æ›´ä¸¥è°¨çš„æµ‹è¯•ï¼Œä»¥åŠé™„åŠ çš„äººå·¥å®¡æ ¸æœºåˆ¶ï¼Œæ›´é¢‘ç¹çš„ç›‘æ§ç­‰ã€‚ç›¸å¯¹æƒé‡è¾ƒä½çš„ï¼Œå°±å¯èƒ½é‡è§†ç¨‹åº¦ä¸é‚£ä¹ˆé«˜ï¼Œä»…ä¿ç•™è¾ƒä½é™åº¦çš„å…œåº•ã€‚","like_count":15,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496283,"discussion_content":"åˆ†æçš„ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590370751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2378309,"avatar":"https://static001.geekbang.org/account/avatar/00/24/4a/45/e048531a.jpg","nickname":"è¿ªç±³ä¹Œæ ¼æ–¯","note":"","ucode":"1D4393746DCBCE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374272,"discussion_content":"è€å“¥å¯¹åˆ†çº§çš„æ€æƒ³è¯´çš„å¾ˆåˆ°ä½, ç¡®å®çœŸæ­£ç”Ÿäº§ç¯å¢ƒä¸‹ä¸å¯èƒ½ä¸€è§†åŒä»,å¿…é¡»åˆ†æ¸…æ¥šçº§åˆ«.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621088824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220968,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1590368723,"is_pvip":false,"replies":[{"id":"81478","content":"æ‰€æœ‰æ¶‰åŠåˆ°ä¸‰æ–¹æœåŠ¡çš„äº¤äº’ï¼Œæˆ‘å»ºè®®requestå’Œresponseå…¨éƒ¨è®°å½•åˆ°ï¼ˆNOSQLï¼‰æ•°æ®åº“ä¸­","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1590373584,"ip_address":"","comment_id":220968,"utype":1}],"discussion_count":2,"race_medal":0,"score":"44540041683","product_id":100047701,"comment_content":"å¯¹äºï¼Œæˆ‘æ–¹è°ƒç”¨è®°å½•å’Œå¯¹æ–¹è°ƒç”¨è®°å½•ä¸ç¬¦ï¼Œä¸ªäººè®¤çŸ¥ï¼Œå‡è®¾ï¼Œå¯¹æ–¹ç³»ç»Ÿè®°å½•æ˜¯æ­£ç¡®çš„ã€‚<br>æˆ‘çŒœæµ‹çš„ç‚¹ï¼šæˆ‘è°ƒç”¨å¯¹æ–¹ï¼Œå¯¹æ–¹å­˜äº†ï¼Œæˆ‘æ²¡å­˜ã€‚æˆ–è€…è¯·æ±‚é‡å‘äº†ï¼Œä½†æ˜¯æˆ‘æ–¹ä»…ä¿å­˜äº†ä¸€æ¬¡ã€‚<br>é¦–å…ˆéœ€è¦é€šè¿‡æ—¥å¿—æ¥çœ‹ã€‚è°ƒç”¨å‰æ—¥å¿—ï¼Œè°ƒç”¨åç»“æœæ—¥å¿—ï¼Œä»¥åŠé‡å‘æ—¥å¿—ã€‚ç»¼åˆæ¥çœ‹è‡ªå·±è¯·æ±‚æ˜¯å¦å­˜åœ¨é—®é¢˜ã€‚<br>ç”šè‡³ï¼Œä¸­é—´éƒ¨åˆ†æ—¶å€™ï¼Œå·±æ–¹çš„æœåŠ¡å™¨æŒ‚æ‰äº†ï¼Œä¹Ÿä¼šå½¢æˆè®°å½•ä¸ä¸€è‡´çš„é—®é¢˜ã€‚<br>ä¸ªäººæ€è·¯ï¼Œä»¥æ—¥å¿—ä¸ºåˆ‡å…¥ç‚¹è§£å†³é—®é¢˜ã€‚","like_count":11,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496281,"discussion_content":"æ‰€æœ‰æ¶‰åŠåˆ°ä¸‰æ–¹æœåŠ¡çš„äº¤äº’ï¼Œæˆ‘å»ºè®®requestå’Œresponseå…¨éƒ¨è®°å½•åˆ°ï¼ˆNOSQLï¼‰æ•°æ®åº“ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590373584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2015438,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/c0/ce/eb1b4ae1.jpg","nickname":"å¯åœˆå¯ä¸¶","note":"","ucode":"EB527E176EDE91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":583407,"discussion_content":"è¿™é‡Œçš„Nosqlç”¨ESå¥½è¿˜æ˜¯mongoå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660103529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":496281,"ip_address":"å¹¿ä¸œ"},"score":583407,"extra":""}]}]},{"had_liked":false,"id":244655,"user_name":"2019","can_delete":false,"product_type":"c1","uid":1025580,"ip_address":"","ucode":"6514258263FC00","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/2c/b73b9dfe.jpg","comment_is_top":false,"comment_ctime":1598605416,"is_pvip":false,"replies":[{"id":"90025","content":"æ²¡é”™ï¼Œå…ˆè½åœ°ï¼Œå†è°ƒä¸‰æ–¹","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1598611073,"ip_address":"","comment_id":244655,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27368409192","product_id":100047701,"comment_content":"è°ƒç”¨ç¬¬ä¸‰æ–¹æœåŠ¡è¿›è¡Œæ”¯ä»˜é‡‘å¸ï¼Œæˆ‘ä»¬çš„åšæ³•æ˜¯ä¸ç®¡æ”¯ä»˜æˆä¸æˆåŠŸéƒ½æŠŠæ•°æ®æ”¾å…¥æœ¬æ–¹æ•°æ®åº“ï¼Œåªä¸è¿‡å¢åŠ ä¸€ä¸ªçŠ¶æ€å­—æ®µæ¥åˆ¤æ–­æ˜¯å¦æ”¯ä»˜æˆåŠŸã€‚å¦‚æœæ”¯ä»˜æˆåŠŸä¸€å®šæ˜¯æ¥å£ä¸‰æ–¹è¿”å›æˆåŠŸï¼Œå¦‚æœå¤±è´¥æœ‰å¯èƒ½ä¸‰æ–¹æœåŠ¡æœ‰é—®é¢˜æˆ–è€…ç½‘ç»œé—®é¢˜ã€‚æ”¯ä»˜å¤±è´¥çš„æƒ…å†µï¼Œç»™ç”¨æˆ·å‹å¥½æç¤ºï¼Œè®©ç”¨æˆ·å†æ¬¡æ”¯ä»˜ï¼Œç”±äºä¸‰æ–¹æ”¯ä»˜æ˜¯å¹‚ç­‰çš„ï¼Œç”¨ä¸Šæ¬¡è°ƒç”¨çš„ä¸šåŠ¡å·ç›´æ¥æ”¯ä»˜ï¼Œæ”¯ä»˜æˆåŠŸå°±ä¿®æ”¹çŠ¶æ€ã€‚è¿™æ ·ä¸¤æ–¹è¿›è¡Œå¯¹è´¦ä¸ä¼šäº§ç”Ÿé‡å¤å…¥è´¦çš„æƒ…å†µã€‚","like_count":7,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504656,"discussion_content":"æ²¡é”™ï¼Œå…ˆè½åœ°ï¼Œå†è°ƒä¸‰æ–¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598611073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219373,"user_name":"å¤§èƒ–å­å‘€ã€","can_delete":false,"product_type":"c1","uid":1258251,"ip_address":"","ucode":"4BADF8096254BE","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/0b/fd18c8ab.jpg","comment_is_top":false,"comment_ctime":1590020187,"is_pvip":false,"replies":[{"id":"81044","content":"é—®é¢˜ä¸€ï¼Œçš„ç¡®ç›‘æ§æ˜¯è¾ƒå¥½çš„æ‰‹æ®µï¼Œå…³é”®åœ¨äºæŠ¥è­¦é˜ˆå€¼æ€ä¹ˆè®¾ç½®ï¼Œæˆ‘è§‰å¾—å¯ä»¥å¯¹æ¯”æ˜¨å¤©åŒæ—¶ï¼Œä¸Šå‘¨åŒæ—¶çš„é‡ï¼Œå‘ç°å·®å¼‚è¾¾åˆ°ä¸€å®šç™¾åˆ†æ¯”æŠ¥è­¦ã€‚æ­¤å¤–ï¼Œå¯¹äºæ´»åŠ¨å¯ä»¥ç”³è¯·å•ç‹¬çš„æ´»åŠ¨ç›‘æ§æ ‡ç­¾ï¼Œå•ç‹¬å‘ˆç°æ›²çº¿ï¼Œåšå¥½é‡çš„é¢„ä¼°ï¼Œè¶…é‡æŠ¥è­¦ï¼Œæœ‰çš„æ—¶å€™å¤§ç›˜å¾ˆå¤§çš„è¯æ´»åŠ¨ç»™æ•´ä¸ªå¤§ç›˜å¸¦æ¥çš„å˜åŒ–ä¸æ˜æ˜¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1590024883,"ip_address":"","comment_id":219373,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18769889371","product_id":100047701,"comment_content":"æœ€è¿‘æ­£å¥½è¦åšå°ç¨‹åºå‘æ”¾çº¢åŒ…çš„åŠŸèƒ½ï¼Œå­¦ä¹ äº†ï¼Œåé¢å®æ–½çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„ã€‚<br><br>ç¬¬ä¸€æ¬¡å›ç­”ä¸‹é—®é¢˜ï¼Œç»éªŒä¸è¶³ï¼Œæœ‰é”™è¯¯ä¹‹å¤„è¿˜è¯·æŒ‡å‡ºã€‚<br><br>é—®é¢˜ä¸€ï¼šå¦‚æœç³»ç»Ÿæ­£åœ¨è¢«æ”»å‡»çš„è¯ï¼Œåº”è¯¥ä¼šå‡ºç°å‡ ç§å¼‚å¸¸æƒ…å†µï¼Œæ¯”å¦‚çŸ­æ—¶é—´å†…ä¼šæœ‰å¤§é‡èµ„é‡‘æµå‡ºï¼ˆæ¶‰åŠé‡‘é¢å®æ—¶æ‰£é™¤çš„ï¼‰ã€åŒä¸€ä¸ªç”¨æˆ·çŸ­æ—¶é—´å†…æœ‰å¤§é‡çš„æ•°æ®é‡å¤ï¼Œç­‰ç­‰ã€‚ç³»ç»Ÿå¯ä»¥æ ¹æ®å…·ä½“ä¸šåŠ¡æƒ…å†µï¼Œé’ˆå¯¹å¯èƒ½å‡ºç°çš„å¼‚å¸¸æƒ…å†µè¿›è¡Œç›‘æ§ï¼Œå¦‚æœå‡ºç°çš„è¯åŠæ—¶é¢„è­¦ã€‚<br><br>é—®é¢˜äºŒï¼šå¯èƒ½æ˜¯å› ä¸ºè°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£æˆåŠŸäº†ï¼Œä½†æ˜¯å­˜å…¥è‡ªå·±ç³»ç»Ÿæ•°æ®åº“å‡ºç°é”™è¯¯ï¼Œæ²¡æœ‰åŠæ—¶å‘ç°å¤„ç†ï¼Œé€ æˆäº†æ•°æ®ä¸¢å¤±ï¼Œæœ‰å¯èƒ½å°±ä¼šå¯¼è‡´è¿™ç§æƒ…å†µã€‚","like_count":5,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495786,"discussion_content":"é—®é¢˜ä¸€ï¼Œçš„ç¡®ç›‘æ§æ˜¯è¾ƒå¥½çš„æ‰‹æ®µï¼Œå…³é”®åœ¨äºæŠ¥è­¦é˜ˆå€¼æ€ä¹ˆè®¾ç½®ï¼Œæˆ‘è§‰å¾—å¯ä»¥å¯¹æ¯”æ˜¨å¤©åŒæ—¶ï¼Œä¸Šå‘¨åŒæ—¶çš„é‡ï¼Œå‘ç°å·®å¼‚è¾¾åˆ°ä¸€å®šç™¾åˆ†æ¯”æŠ¥è­¦ã€‚æ­¤å¤–ï¼Œå¯¹äºæ´»åŠ¨å¯ä»¥ç”³è¯·å•ç‹¬çš„æ´»åŠ¨ç›‘æ§æ ‡ç­¾ï¼Œå•ç‹¬å‘ˆç°æ›²çº¿ï¼Œåšå¥½é‡çš„é¢„ä¼°ï¼Œè¶…é‡æŠ¥è­¦ï¼Œæœ‰çš„æ—¶å€™å¤§ç›˜å¾ˆå¤§çš„è¯æ´»åŠ¨ç»™æ•´ä¸ªå¤§ç›˜å¸¦æ¥çš„å˜åŒ–ä¸æ˜æ˜¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590024883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269161,"user_name":"éƒ‘æ€é›¨","can_delete":false,"product_type":"c1","uid":1474579,"ip_address":"","ucode":"F1F4B08FC94E7D","user_header":"https://static001.geekbang.org/account/avatar/00/16/80/13/df2a0ced.jpg","comment_is_top":false,"comment_ctime":1608542072,"is_pvip":false,"replies":[{"id":"97624","content":"å®‰å…¨æ–¹é¢è®¾è®¡ä¸Šçš„ç¡®å¯ä»¥è€ƒè™‘å¾ˆå¤šï¼šåŒå‘å¯¹è´¦ã€å¤šæ­¥æµç¨‹æ•´ä½“è€ƒè™‘å®‰å…¨æ ¡éªŒã€å…œåº•ç­–ç•¥ã€é˜²æ­¢å¤–éƒ¨çŒœæµ‹ä¸šåŠ¡é€»è¾‘ã€ä¸ä½†åœ¨å†…éƒ¨æ ¡éªŒé€šè¿‡å¤–éƒ¨å†å®ç°ä¸€å¥—ä¸šåŠ¡é€»è¾‘å®ç°æ ¡éªŒã€è®¾å®šä¸šåŠ¡ç­–ç•¥å¸¸è¯†ä½œä¸ºåº•çº¿","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1608549768,"ip_address":"","comment_id":269161,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5903509368","product_id":100047701,"comment_content":"è¯´åˆ°å®‰å…¨æ‰‹æ®µï¼Œæœ€å…ˆæƒ³åˆ°çš„æ˜¯æ ¡éªŒ+å¯¹è´¦ã€‚<br><br>æ ¡éªŒè¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ å¯¹ä¸šåŠ¡caseçš„ç©·ä¸¾ï¼Œåœ¨ä¸šåŠ¡æµç¨‹æ¯”è¾ƒå¤æ‚çš„æƒ…å†µï¼Œéœ€è¦å¤šè€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œæ¯”å¦‚ä¸¤æ¡æŒ‡ä»¤å…±åŒå†³å®šä¸€ä¸ªè¡Œä¸ºï¼Œé‚£ä¹ˆä¸¤æ¡æŒ‡ä»¤çš„å…ˆåé¡ºåºã€ä¸¤æ¡æŒ‡ä»¤åŒæ—¶åˆ°è¾¾çš„æ ¡éªŒæœ‰å¾ˆå¤§çš„å·®å¼‚ã€‚<br><br>è€Œå¯¹è´¦æ›´å¤šçš„æ˜¯åŠæ—¶å‘ç°é—®é¢˜ï¼ŒåŠæ—¶æ­¢æŸã€‚å…¬å¸å†…éƒ¨å¯ä»¥åšå‡†å®æ—¶å¯¹è´¦ï¼Œä¸å¤–éƒ¨å¹³å°æœ‰å¯¹æ¥æ—¶ï¼Œåªèƒ½åšæˆT+1çš„ï¼Œå®æ—¶æ€§å·®ï¼Œå‘ç°é—®é¢˜ä¹Ÿå°±æ›´æ™šã€‚<br><br>ä¸¾2ä¸ªä¾‹å­ï¼š<br>ç”¨æˆ·æç°æ—¶éœ€è¦ä¼ é€’ token å’Œ è´¦æˆ·IDï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥åšä¸€ä¸ª token å’Œ è´¦æˆ·IDå…³ç³»çš„æ ¡éªŒï¼Œçœ‹çœ‹tokenå¯¹åº”çš„User å’Œ è´¦æˆ·ID æ˜¯å¦èƒ½å¯¹åº”ä¸Šï¼Œé˜²æ­¢æ”»å‡»è€…ç”¨ä¸€ä¸ªtoken æç°å¤šä¸ªè´¦æˆ·çš„ä½™é¢ã€‚æ¯•ç«Ÿè·å–å¤šä¸ªtokenæ¯”è·å–å¤šä¸ªè´¦æˆ·IDè¦å›°éš¾å¾ˆå¤šã€‚ï¼ˆè¿™ä¸ªä¾‹å­æ˜¯ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè´¦æˆ·çš„è®¾è®¡ï¼‰<br><br>è´¦æˆ·å‡ºé‡‘çš„å®‰å…¨æ€§ï¼šå¯ä»¥é€šè¿‡è®¾è®¡æ¥è§„é¿é—®é¢˜ï¼Œæ¯”å¦‚ è®¾è®¡ å†»ç»“ã€è§£å†» ç­‰åŠŸèƒ½ã€‚","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512170,"discussion_content":"å®‰å…¨æ–¹é¢è®¾è®¡ä¸Šçš„ç¡®å¯ä»¥è€ƒè™‘å¾ˆå¤šï¼šåŒå‘å¯¹è´¦ã€å¤šæ­¥æµç¨‹æ•´ä½“è€ƒè™‘å®‰å…¨æ ¡éªŒã€å…œåº•ç­–ç•¥ã€é˜²æ­¢å¤–éƒ¨çŒœæµ‹ä¸šåŠ¡é€»è¾‘ã€ä¸ä½†åœ¨å†…éƒ¨æ ¡éªŒé€šè¿‡å¤–éƒ¨å†å®ç°ä¸€å¥—ä¸šåŠ¡é€»è¾‘å®ç°æ ¡éªŒã€è®¾å®šä¸šåŠ¡ç­–ç•¥å¸¸è¯†ä½œä¸ºåº•çº¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608549768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222242,"user_name":"ççœ¼çœ‹ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1206388,"ip_address":"","ucode":"F94CF34BC5B2AC","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/74/461b202d.jpg","comment_is_top":false,"comment_ctime":1590724288,"is_pvip":false,"replies":[{"id":"81969","content":"å…¶å®å¹‚ç­‰è€ƒè™‘2æ–¹é¢ï¼š<br>1ã€å¹‚ç­‰ä¾æ®ï¼Œå¯ä»¥æ˜¯æ¯æ¬¡äº¤äº’ç”Ÿæˆçš„tokenï¼Œå¯ä»¥æ˜¯å®¢æˆ·ç«¯çš„åºåˆ—å·ï¼Œå¯ä»¥æ˜¯æœ‰æ„ä¹‰çš„ä¸šåŠ¡è®¢å•å·<br>2ã€æ ¹æ®å¹‚ç­‰ä¾æ®è¿›è¡Œé˜²é‡å¤„ç†ï¼š<br>1ï¼‰é™åˆ¶ï¼šæ¯”å¦‚é”æ–¹å¼ã€çŠ¶æ€æœºæ§åˆ¶<br>2ï¼‰å»é‡æ–¹å¼","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1590744140,"ip_address":"","comment_id":222242,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590724288","product_id":100047701,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸‹ï¼Œå…¨é“¾è·¯å¹‚ç­‰å¤„ç†çš„è¯ï¼Œå¦‚æœæ˜¯webè¯·æ±‚ï¼Œé™¤äº†å‰ç«¯é˜²æŠ–çš„è¯ï¼Œåç«¯å¯ä»¥å¦‚ä½•å¤„ç†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496725,"discussion_content":"å…¶å®å¹‚ç­‰è€ƒè™‘2æ–¹é¢ï¼š\n1ã€å¹‚ç­‰ä¾æ®ï¼Œå¯ä»¥æ˜¯æ¯æ¬¡äº¤äº’ç”Ÿæˆçš„tokenï¼Œå¯ä»¥æ˜¯å®¢æˆ·ç«¯çš„åºåˆ—å·ï¼Œå¯ä»¥æ˜¯æœ‰æ„ä¹‰çš„ä¸šåŠ¡è®¢å•å·\n2ã€æ ¹æ®å¹‚ç­‰ä¾æ®è¿›è¡Œé˜²é‡å¤„ç†ï¼š\n1ï¼‰é™åˆ¶ï¼šæ¯”å¦‚é”æ–¹å¼ã€çŠ¶æ€æœºæ§åˆ¶\n2ï¼‰å»é‡æ–¹å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590744140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}