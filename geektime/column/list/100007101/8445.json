{"id":8445,"title":"第7讲 | ICMP与ping：投石问路的侦察兵","content":"<p>无论是在宿舍，还是在办公室，或者运维一个数据中心，我们常常会遇到网络不通的问题。那台机器明明就在那里，你甚至都可以通过机器的终端连上去看。它看着好好的，可是就是连不上去，究竟是哪里出了问题呢？</p><h2>ICMP协议的格式</h2><p>一般情况下，你会想到ping一下。那你知道ping是如何工作的吗？</p><p>ping是基于ICMP协议工作的。<strong>ICMP</strong>全称<strong>Internet Control Message Protocol</strong>，就是<strong>互联网控制报文协议</strong>。这里面的关键词是“控制”，那具体是怎么控制的呢？</p><p>网络包在异常复杂的网络环境中传输时，常常会遇到各种各样的问题。当遇到问题的时候，总不能“死个不明不白”，要传出消息来，报告情况，这样才可以调整传输策略。这就相当于我们经常看到的电视剧里，古代行军的时候，为将为帅者需要通过侦察兵、哨探或传令兵等人肉的方式来掌握情况，控制整个战局。</p><p>ICMP报文是封装在IP包里面的。因为传输指令的时候，肯定需要源地址和目标地址。它本身非常简单。因为作为侦查兵，要轻装上阵，不能携带大量的包袱。</p><p><img src=\"https://static001.geekbang.org/resource/image/20/e2/201589bb205c5b00ad42e0081aa46fe2.jpg?wh=3043*1243\" alt=\"\"></p><p>ICMP报文有很多的类型，不同的类型有不同的代码。<strong>最常用的类型是主动请求为8，主动请求的应答为0</strong>。</p><h2>查询报文类型</h2><p>我们经常在电视剧里听到这样的话：主帅说，来人哪！前方战事如何，快去派人打探，一有情况，立即通报！</p><!-- [[[read_end]]] --><p>这种是主帅发起的，主动查看敌情，对应ICMP的<strong>查询报文类型</strong>。例如，常用的<strong>ping就是查询报文，是一种主动请求，并且获得主动应答的ICMP协议。</strong>所以，ping发的包也是符合ICMP协议格式的，只不过它在后面增加了自己的格式。</p><p>对ping的主动请求，进行网络抓包，称为<strong>ICMP ECHO REQUEST。<strong>同理主动请求的回复，称为</strong>ICMP ECHO REPLY</strong>。比起原生的ICMP，这里面多了两个字段，一个是<strong>标识符</strong>。这个很好理解，你派出去两队侦查兵，一队是侦查战况的，一队是去查找水源的，要有个标识才能区分。另一个是<strong>序号</strong>，你派出去的侦查兵，都要编个号。如果派出去10个，回来10个，就说明前方战况不错；如果派出去10个，回来2个，说明情况可能不妙。</p><p>在选项数据中，ping还会存放发送请求的时间值，来计算往返时间，说明路程的长短。</p><h2>差错报文类型</h2><p>当然也有另外一种方式，就是差错报文。</p><p>主帅骑马走着走着，突然来了一匹快马，上面的小兵气喘吁吁的：报告主公，不好啦！张将军遭遇埋伏，全军覆没啦！这种是异常情况发起的，来报告发生了不好的事情，对应ICMP的<strong>差错报文类型</strong>。</p><p>我举几个ICMP差错报文的例子：<strong>终点不可达为3，源抑制为4，超时为11，重定向为5</strong>。这些都是什么意思呢？我给你具体解释一下。</p><p><strong>第一种是终点不可达</strong>。小兵：报告主公，您让把粮草送到张将军那里，结果没有送到。</p><p>如果你是主公，你肯定会问，为啥送不到？具体的原因在代码中表示就是，网络不可达代码为0，主机不可达代码为1，协议不可达代码为2，端口不可达代码为3，需要进行分片但设置了不分片位代码为4。</p><p>具体的场景就像这样：</p><ul>\n<li>网络不可达：主公，找不到地方呀？</li>\n<li>主机不可达：主公，找到地方没这个人呀？</li>\n<li>协议不可达：主公，找到地方，找到人，口号没对上，人家天王盖地虎，我说12345！</li>\n<li>端口不可达：主公，找到地方，找到人，对了口号，事儿没对上，我去送粮草，人家说他们在等救兵。</li>\n<li>需要进行分片但设置了不分片位：主公，走到一半，山路狭窄，想换小车，但是您的将令，严禁换小车，就没办法送到了。</li>\n</ul><p><strong>第二种是源站抑制</strong>，也就是让源站放慢发送速度。小兵：报告主公，您粮草送的太多了吃不完。</p><p><strong>第三种是时间超时</strong>，也就是超过网络包的生存时间还是没到。小兵：报告主公，送粮草的人，自己把粮草吃完了，还没找到地方，已经饿死啦。</p><p><strong>第四种是路由重定向</strong>，也就是让下次发给另一个路由器。小兵：报告主公，上次送粮草的人本来只要走一站地铁，非得从五环绕，下次别这样了啊。</p><p>差错报文的结构相对复杂一些。除了前面还是IP，ICMP的前8字节不变，后面则跟上出错的那个IP包的IP头和IP正文的前8个字节。</p><p>而且这类侦查兵特别恪尽职守，不但自己返回来报信，还把一部分遗物也带回来。</p><ul>\n<li>侦察兵：报告主公，张将军已经战死沙场，这是张将军的印信和佩剑。</li>\n<li>主公：神马？张将军是怎么死的（可以查看ICMP的前8字节）？没错，这是张将军的剑，是他的剑（IP数据包的头及正文前8字节）。</li>\n</ul><h2>ping：查询报文类型的使用</h2><p>接下来，我们重点来看ping的发送和接收过程。</p><p><img src=\"https://static001.geekbang.org/resource/image/57/21/57a77fb89bc4a5653842276c70c0d621.jpg?wh=4463*2786\" alt=\"\"></p><p>假定主机A的IP地址是192.168.1.1，主机B的IP地址是192.168.1.2，它们都在同一个子网。那当你在主机A上运行“ping 192.168.1.2”后，会发生什么呢?</p><p>ping命令执行的时候，源主机首先会构建一个ICMP请求数据包，ICMP数据包内包含多个字段。最重要的是两个，第一个是<strong>类型字段</strong>，对于请求数据包而言该字段为 8；另外一个是<strong>顺序号</strong>，主要用于区分连续ping的时候发出的多个数据包。每发出一个请求数据包，顺序号会自动加1。为了能够计算往返时间RTT，它会在报文的数据部分插入发送时间。</p><p>然后，由ICMP协议将这个数据包连同地址192.168.1.2一起交给IP层。IP层将以192.168.1.2作为目的地址，本机IP地址作为源地址，加上一些其他控制信息，构建一个IP数据包。</p><p>接下来，需要加入MAC头。如果在本节ARP映射表中查找出IP地址192.168.1.2所对应的MAC地址，则可以直接使用；如果没有，则需要发送ARP协议查询MAC地址，获得MAC地址后，由数据链路层构建一个数据帧，目的地址是IP层传过来的MAC地址，源地址则是本机的MAC地址；还要附加上一些控制信息，依据以太网的介质访问规则，将它们传送出去。</p><p>主机B收到这个数据帧后，先检查它的目的MAC地址，并和本机的MAC地址对比，如符合，则接收，否则就丢弃。接收后检查该数据帧，将IP数据包从帧中提取出来，交给本机的IP层。同样，IP层检查后，将有用的信息提取后交给ICMP协议。</p><p>主机B会构建一个 ICMP 应答包，应答数据包的类型字段为 0，顺序号为接收到的请求数据包中的顺序号，然后再发送出去给主机A。</p><p>在规定的时候间内，源主机如果没有接到 ICMP 的应答包，则说明目标主机不可达；如果接收到了 ICMP 应答包，则说明目标主机可达。此时，源主机会检查，用当前时刻减去该数据包最初从源主机上发出的时刻，就是 ICMP 数据包的时间延迟。</p><p>当然这只是最简单的，同一个局域网里面的情况。如果跨网段的话，还会涉及网关的转发、路由器的转发等等。但是对于ICMP的头来讲，是没什么影响的。会影响的是根据目标IP地址，选择路由的下一跳，还有每经过一个路由器到达一个新的局域网，需要换MAC头里面的MAC地址。这个过程后面几节会详细描述，这里暂时不多说。</p><p>如果在自己的可控范围之内，当遇到网络不通的问题的时候，除了直接ping目标的IP地址之外，还应该有一个清晰的网络拓扑图。并且从理论上来讲，应该要清楚地知道一个网络包从源地址到目标地址都需要经过哪些设备，然后逐个ping中间的这些设备或者机器。如果可能的话，在这些关键点，通过tcpdump -i eth0 icmp，查看包有没有到达某个点，回复的包到达了哪个点，可以更加容易推断出错的位置。</p><p>经常会遇到一个问题，如果不在我们的控制范围内，很多中间设备都是禁止ping的，但是ping不通不代表网络不通。这个时候就要使用telnet，通过其他协议来测试网络是否通，这个就不在本篇的讲述范围了。</p><p>说了这么多，你应该可以看出ping这个程序是使用了ICMP里面的ECHO REQUEST和ECHO REPLY类型的。</p><h2>Traceroute：差错报文类型的使用</h2><p>那其他的类型呢？是不是只有真正遇到错误的时候，才能收到呢？那也不是，有一个程序Traceroute，是个“大骗子”。它会使用ICMP的规则，故意制造一些能够产生错误的场景。</p><p>所以，<strong>Traceroute的第一个作用就是故意设置特殊的TTL，来追踪去往目的地时沿途经过的路由器</strong>。Traceroute的参数指向某个目的IP地址，它会发送一个UDP的数据包。将TTL设置成1，也就是说一旦遇到一个路由器或者一个关卡，就表示它“牺牲”了。</p><p>如果中间的路由器不止一个，当然碰到第一个就“牺牲”。于是，返回一个ICMP包，也就是网络差错包，类型是时间超时。那大军前行就带一顿饭，试一试走多远会被饿死，然后找个哨探回来报告，那我就知道大军只带一顿饭能走多远了。</p><p>接下来，将TTL设置为2。第一关过了，第二关就“牺牲”了，那我就知道第二关有多远。如此反复，直到到达目的主机。这样，Traceroute就拿到了所有的路由器IP。当然，有的路由器压根不会回这个ICMP。这也是Traceroute一个公网的地址，看不到中间路由的原因。</p><p>怎么知道UDP有没有到达目的主机呢？Traceroute程序会发送一份UDP数据报给目的主机，但它会选择一个不可能的值作为UDP端口号（大于30000）。当该数据报到达时，将使目的主机的 UDP模块产生一份“端口不可达”错误ICMP报文。如果数据报没有到达，则可能是超时。</p><p>这就相当于故意派人去西天如来那里去请一本《道德经》，结果人家信佛不信道，消息就会被打出来。被打的消息传回来，你就知道西天是能够到达的。为什么不去取《心经》呢？因为UDP是无连接的。也就是说这人一派出去，你就得不到任何音信。你无法区别到底是半路走丢了，还是真的信佛遁入空门了，只有让人家打出来，你才会得到消息。</p><p><strong>Traceroute还有一个作用是故意设置不分片，从而确定路径的MTU。</strong>要做的工作首先是发送分组，并设置“不分片”标志。发送的第一个分组的长度正好与出口MTU相等。如果中间遇到窄的关口会被卡住，会发送ICMP网络差错包，类型为“需要进行分片但设置了不分片位”。其实，这是人家故意的好吧，每次收到ICMP“不能分片”差错时就减小分组的长度，直到到达目标主机。</p><h2>小结</h2><p>好了，这一节内容差不多了，我来总结一下：</p><ul>\n<li>ICMP相当于网络世界的侦察兵。我讲了两种类型的ICMP报文，一种是主动探查的查询报文，一种异常报告的差错报文；</li>\n<li>ping使用查询报文，Traceroute使用差错报文。</li>\n</ul><p>最后，给你留两个思考题吧。</p><ol>\n<li>当发送的报文出问题的时候，会发送一个ICMP的差错报文来报告错误，但是如果ICMP的差错报文也出问题了呢？</li>\n<li>这一节只说了一个局域网互相ping的情况。如果跨路由器、跨网关的过程会是什么样的呢？</li>\n</ol><p>欢迎你留言和我讨论。趣谈网络协议，我们下期见！</p>","comments":[{"had_liked":false,"id":11248,"user_name":"^_^","can_delete":false,"product_type":"c1","uid":1122575,"ip_address":"","ucode":"30E994A1627EB1","user_header":"https://static001.geekbang.org/account/avatar/00/11/21/0f/b61dc67e.jpg","comment_is_top":false,"comment_ctime":1527994546,"is_pvip":false,"discussion_count":15,"race_medal":0,"score":"1311493019826","product_id":100007101,"comment_content":"一点个人感觉:老师的比喻有点太用力了，不如简单通俗的讲解原理.<br>另外错别字和语句通顺程度是会影响理解的，前几期有时也有这个感觉。<br>专业水平老师还是很牛的，学到很多知识。","like_count":306,"discussions":[{"author":{"id":1116188,"avatar":"https://static001.geekbang.org/account/avatar/00/11/08/1c/ef15e661.jpg","nickname":" 臣馟飞扬","note":"","ucode":"F2F882B7678055","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78141,"discussion_content":"百度了一下原理很简单，搞这么多比喻反而不好理解了。。。\nTraceroute程序的设计是利用ICMP及IP header的TTL（Time To Live）栏位（field）。首先，traceroute送出一个TTL是1的IP datagram（其实，每次送出的为3个40字节的包，包括源地址，目的地址和包发出的时间标签）到目的地，当路径上的第一个路由器（router）收到这个datagram时，它将TTL减1。此时，TTL变为0了，所以该路由器会将此datagram丢掉，并送回一个「ICMP time exceeded」消息（包括发IP包的源地址，IP包的所有内容及路由器的IP地址），traceroute 收到这个消息后，便知道这个路由器存在于这个路径上，接着traceroute 再送出另一个TTL是2 的datagram，发现第2 个路由器...... traceroute 每次将送出的datagram的TTL 加1来发现另一个路由器，这个重复的动作一直持续到某个datagram 抵达目的地。当datagram到达目的地后，该主机并不会送回ICMP time exceeded消息，因为它已是目的地了，那么traceroute如何得知目的地到达了呢？\n\nTraceroute在送出UDP datagrams到目的地时，它所选择送达的port number 是一个一般应用程序都不会用的号码（30000 以上），所以当此UDP datagram 到达目的地后该主机会送回一个「ICMP port unreachable」的消息，而当traceroute 收到这个消息时，便知道目的地已经到达了。所以traceroute 在Server端也是没有所谓的Daemon 程式。\n\nTraceroute提取发 ICMP TTL到期消息设备的IP地址并作域名解析。每次 ，Traceroute都打印出一系列数据,包括所经过的路由设备的域名及 IP地址,三个包每次来回所花时间。","likes_number":40,"is_delete":false,"is_hidden":false,"ctime":1575980528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1359202,"avatar":"https://static001.geekbang.org/account/avatar/00/14/bd/62/283e24ab.jpg","nickname":"雨后的夜","note":"","ucode":"0E8C183AEB02EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":45652,"discussion_content":"我觉得这一节的比喻挺形象的，每个人对比喻的理解方式不太同，觉得比喻不好就当个乐趣呗，关键作者是为了将枯燥的知识讲的有趣味，这课程的标题就是“趣谈”啊！","likes_number":31,"is_delete":false,"is_hidden":false,"ctime":1573053452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1045025,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f2/21/00600713.jpg","nickname":"小侠","note":"","ucode":"A35A61061E41B2","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276627,"discussion_content":"我觉得比喻很形象，技术描述本来很生硬，需要这样活泼的方式","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1590919725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103208,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","nickname":"归零","note":"","ucode":"C99B8E93009A46","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":131133,"discussion_content":"太用力了，为了比喻而比喻","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1578828879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1028395,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b1/2b/79b81df8.jpg","nickname":"iamcxc","note":"","ucode":"C519F51552DC12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265737,"discussion_content":"你们对这些相关知识可能比较熟悉，所以才觉得比喻貌似多余。但对于初学者来说，我觉得比喻的非常通俗形象！","likes_number":20,"is_delete":false,"is_hidden":false,"ctime":1589432620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1429598,"avatar":"https://static001.geekbang.org/account/avatar/00/15/d0/5e/4098f123.jpg","nickname":"周三不加班","note":"","ucode":"22C9329A797E7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367149,"discussion_content":"确实有些比喻过度。。","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1618277695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1915385,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","nickname":"King-ZJ","note":"","ucode":"7448A4BBB5A118","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210618,"discussion_content":"这一节讲了一些平常工具的使用，虽然感觉这些工具是非常熟悉，但仔细一问怎么用，除了这么用还能怎么用这些问题时，真的是一问就打鼓，一用就糊涂，还是得多看多学多用。通过阅读作者的讲解，察觉了生活中一些习以为常的细节，觉得很多理所当然，其实里面有很多学问是自己没有深入探究。","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1584756234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241121,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/21/7168f973.jpg","nickname":"JStFs","note":"","ucode":"636E85653555DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4361,"discussion_content":"和我感觉一样，老师比喻稍用力，但有趣程度增加了。文本更偏口语，这个应该和老师是自己读的原因有关，自己读就偏向于自己的说话习惯，个人感觉文案确实可以有更书面一点的空间，最近快把《网络是怎么连接的》看完了，再回头听老师的课就很容易了，查漏补缺","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1565336412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1106343,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e1/a7/86ea68a0.jpg","nickname":"baoxin","note":"","ucode":"9CAE39985EF676","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1241121,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/21/7168f973.jpg","nickname":"JStFs","note":"","ucode":"636E85653555DD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5197,"discussion_content":"也是先看完这本，再到这里来的，老师水平高，但比喻太多，容易掩饰技术本身的逻辑","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1566040806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4361,"ip_address":""},"score":5197,"extra":""},{"author":{"id":1136529,"avatar":"https://static001.geekbang.org/account/avatar/00/11/57/91/3a082914.jpg","nickname":"葡萄有点酸","note":"","ucode":"51C3CE1E685D8E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1241121,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/21/7168f973.jpg","nickname":"JStFs","note":"","ucode":"636E85653555DD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7435,"discussion_content":"这是一本好书 我就是看了你的评论后 看完了《网络是怎么连接的》现在重新看老师的教程 轻松多了","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1567510738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4361,"ip_address":""},"score":7435,"extra":""}]},{"author":{"id":1017387,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/86/2b/f82a7d5a.jpg","nickname":"文若","note":"","ucode":"3D3045975ED2DB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390867,"discussion_content":"同感 实在受不了这个趣谈 听着贼别扭","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1630109847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1481979,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/fb/7fe6df5b.jpg","nickname":"陈卧虫","note":"","ucode":"44BB84712436AB","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579309,"discussion_content":"我觉得挺好的，因为你懂所以觉得没必要，这是知识的诅咒","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1657338108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1137046,"avatar":"https://static001.geekbang.org/account/avatar/00/11/59/96/11671504.jpg","nickname":"蔡箐菁","note":"","ucode":"550B54F2550718","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371427,"discussion_content":"同感..","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619767680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1983034,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/42/3a/bca96a7f.jpg","nickname":"人什么人","note":"","ucode":"052538EFD0B1D6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574638,"discussion_content":"我觉得比喻很到位啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654215134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1707355,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0d/5b/02cbb203.jpg","nickname":"noscallion","note":"","ucode":"64382827ABFEA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408315,"discussion_content":"我觉得挺好的啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635224902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28969,"user_name":"Marnie","can_delete":false,"product_type":"c1","uid":1001912,"ip_address":"","ucode":"ECF9B22574F868","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/b8/fb19aa6a.jpg","comment_is_top":false,"comment_ctime":1538210841,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"714502781977","product_id":100007101,"comment_content":"TTL的作用没有讲清楚，特此记录一下。<br>TTL是网络包里的一个值，它告诉路由器包在网络中太长时间是否需要被丢弃。TTL最初的设想是，设置超时时间，超过此范围则被丢弃。每个路由器要将TTL减一，TTL通常表示被丢弃前经过的路由器的个数。当TTL变为0时，该路由器丢弃该包，并发送一个ICMP包给最初的发送者。 tranceroute差错报文会使用","like_count":166,"discussions":[{"author":{"id":1075033,"avatar":"https://static001.geekbang.org/account/avatar/00/10/67/59/017b5726.jpg","nickname":"猫切切切切切","note":"","ucode":"F350BA1B7FFDC4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261101,"discussion_content":"TTL相当于血槽，网络包每次遭遇路由器都要被砍一刀掉一格血，血槽空了网络包也就死了，砍最后一刀的路由器可能还会收尸送回去","likes_number":34,"is_delete":false,"is_hidden":false,"ctime":1588940561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":1075033,"avatar":"https://static001.geekbang.org/account/avatar/00/10/67/59/017b5726.jpg","nickname":"猫切切切切切","note":"","ucode":"F350BA1B7FFDC4","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":269252,"discussion_content":"血槽太贴切了，哈哈哈哈哈哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589886767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":261101,"ip_address":""},"score":269252,"extra":""}]},{"author":{"id":1248472,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK8o3aJz4NdqOCWvTjIPGmRWHt5xicwKGGGRd5icCoiauvvtnEtST0ljsuM23wiaYbZLknASvXmmqfg1w/132","nickname":"茅延安","note":"","ucode":"317626CFFBC81C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585906,"discussion_content":"最关键的一句没有补充：TTL是IP层（IPV4）Header的一个属性。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661906881,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"吉林"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2536820,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","nickname":"友","note":"","ucode":"972A4333A8B101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369690,"discussion_content":"是不是也是在 icmp这一层 默认ttl多少 还是说正常请求没有ttl","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619137729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1493668,"avatar":"https://static001.geekbang.org/account/avatar/00/16/ca/a4/788e5442.jpg","nickname":"雨后车驶来","note":"","ucode":"28A59A2B539877","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2536820,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","nickname":"友","note":"","ucode":"972A4333A8B101","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535422,"discussion_content":"一、TTL的默认值是多少?\n不同的操作系统，它的TTL值是不相同的。这里和大家谈谈一些常用的操作系统的默认TTL值，默认情况下，Linux系统的TTL值为64或255，Windows NT/2000/XP系统的TTL值为128，Windows 98系统的TTL值为32，UNIX主机的TTL值为255。域名的dns解析默认的TTL值一般是60。\n二、操作系统的TTL最大值：\nTTL最大值为255，如UNIX操作系统的TT值初始默认TTL值就是225。不同的系统最大值也是有所不同，对于实验室环境所使用操作系统默认的TTL 最大值是128，所以要视情况而定。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638437391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":369690,"ip_address":""},"score":535422,"extra":""},{"author":{"id":2536820,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","nickname":"友","note":"","ucode":"972A4333A8B101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1493668,"avatar":"https://static001.geekbang.org/account/avatar/00/16/ca/a4/788e5442.jpg","nickname":"雨后车驶来","note":"","ucode":"28A59A2B539877","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535425,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638437520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":535422,"ip_address":""},"score":535425,"extra":""}]},{"author":{"id":2536820,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg","nickname":"友","note":"","ucode":"972A4333A8B101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369689,"discussion_content":"那么在正常是网络请求中 有ttl吗 在哪一层 ip层吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619137695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23899,"user_name":"knull","can_delete":false,"product_type":"c1","uid":1043484,"ip_address":"","ucode":"3BFECF3D29F40C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","comment_is_top":false,"comment_ctime":1536715608,"is_pvip":false,"replies":[{"id":"8733","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1536718880,"ip_address":"","comment_id":23899,"utype":1}],"discussion_count":5,"race_medal":0,"score":"585652267864","product_id":100007101,"comment_content":"许多人问：tracerouter发udp，为啥出错回icmp？<br>正常情况下，协议栈能正常走到udp，当然正常返回udp。<br>但是，你主机不可达，是ip层的（还没到udp）。ip层，当然只知道回icmp。报文分片错误也是同理。<br>","like_count":136,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423773,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536718880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248472,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK8o3aJz4NdqOCWvTjIPGmRWHt5xicwKGGGRd5icCoiauvvtnEtST0ljsuM23wiaYbZLknASvXmmqfg1w/132","nickname":"茅延安","note":"","ucode":"317626CFFBC81C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585908,"discussion_content":"IP层的差错，都回ICMP？这说明ICMP只是IP的附属","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661907231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"吉林"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573759,"discussion_content":"补充关键点：\nICMP 报文是封装在 IP 包里面的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653631734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573758,"discussion_content":"这样的话，tracerouter直接发icmp数据包有什么问题？为什么还要发udp包？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653631605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1926057,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/63/a9/abed781e.jpg","nickname":"李維道","note":"","ucode":"9A16ECAB2522E3","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547473,"discussion_content":"棒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642688373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24531,"user_name":"简","can_delete":false,"product_type":"c1","uid":1229332,"ip_address":"","ucode":"568BDA58B63801","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/14/bfd5e94e.jpg","comment_is_top":false,"comment_ctime":1537111372,"is_pvip":false,"discussion_count":11,"race_medal":0,"score":"559882859852","product_id":100007101,"comment_content":"老师我觉得跟多人说你比喻太抽象，我觉得他们底子太差，需要恶补。我觉得你比喻真好！我原来把一本网络基础书看完了，所以一说就懂，你这么说我觉得我六脉打通了","like_count":131,"discussions":[{"author":{"id":1024137,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/89/abb7bfe3.jpg","nickname":"xiu","note":"","ucode":"5B8F6E06D156F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55116,"discussion_content":"这都能杠。。","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1574341458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1116188,"avatar":"https://static001.geekbang.org/account/avatar/00/11/08/1c/ef15e661.jpg","nickname":" 臣馟飞扬","note":"","ucode":"F2F882B7678055","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1024137,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/89/abb7bfe3.jpg","nickname":"xiu","note":"","ucode":"5B8F6E06D156F0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78131,"discussion_content":"哈哈，杠精无处不秀","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575979806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":55116,"ip_address":""},"score":78131,"extra":""}]},{"author":{"id":1675475,"avatar":"https://static001.geekbang.org/account/avatar/00/19/90/d3/ab5db902.jpg","nickname":"Chiron","note":"","ucode":"76BBD1F32A35D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":132620,"discussion_content":"牛皮死你了","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1578920518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1079634,"avatar":"https://static001.geekbang.org/account/avatar/00/10/79/52/af632a6c.jpg","nickname":"陈熹荣","note":"","ucode":"B07C83A8020DC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40509,"discussion_content":"没基础根本没法看，比喻的越来越乱，都想退了","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1572227128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1634681,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoxgWxeetICvoiadIicia5IoA0ITcQeHc1uc2CxQgvlic9GVW9eibaIbRbHso3bdHdnzmGiapdqENMiack7Q/132","nickname":"Valarchie","note":"","ucode":"D56EF3006B3124","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363104,"discussion_content":"个人感觉像在看闲书。。但是如果没网络基础的同学看的话，的确会云里雾里，比较吃力","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1617112604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168452,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/44/0ec958f4.jpg","nickname":"Eleven","note":"","ucode":"FB4A0C8CA732BE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53943,"discussion_content":"这应该是老师自己的学习记忆方式吧，你可以试着自己多联想","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574239124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1347740,"avatar":"https://static001.geekbang.org/account/avatar/00/14/90/9c/53d0f906.jpg","nickname":"黄豆豆","note":"","ucode":"5D47A4E3BAD3D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":51,"discussion_content":"好厉害的样子","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561019008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1674298,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK6JnM4HA6sk0j6HFaA0RMRmQzEXOQqsMjHOnU8Z8D8qiccOn7sYbdyMu8ic4heq7JhGWlcV1Mq5Ntw/132","nickname":"Aloe","note":"","ucode":"B3852A416623EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307454,"discussion_content":"哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600655872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1031970,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bf/22/26530e66.jpg","nickname":"趁早","note":"","ucode":"949FB3AA250D80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306801,"discussion_content":"迷之自信","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600393343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241121,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/21/7168f973.jpg","nickname":"JStFs","note":"","ucode":"636E85653555DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4362,"discussion_content":"是不是《网络是怎么连接的》？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565336553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1259218,"avatar":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","nickname":"发条橙子 。","note":"","ucode":"ED076F4534FFED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1241121,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/21/7168f973.jpg","nickname":"JStFs","note":"","ucode":"636E85653555DD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267717,"discussion_content":"学校发的 《计算机网络》 就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589680550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4362,"ip_address":""},"score":267717,"extra":""}]}]},{"had_liked":false,"id":11078,"user_name":"盖","can_delete":false,"product_type":"c1","uid":1103426,"ip_address":"","ucode":"C1A5D9ED23CAA6","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/42/bafec9b7.jpg","comment_is_top":false,"comment_ctime":1527823492,"is_pvip":false,"replies":[{"id":"3517","content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527836207,"ip_address":"","comment_id":11078,"utype":1}],"discussion_count":5,"race_medal":0,"score":"478269193348","product_id":100007101,"comment_content":"好像不发ICMP差错报文的一种情况就是ICMP 的差错报文出错，其它还有目的地址为广播时或者源地址不唯一时也不发差错报文。<br><br>前面评论问udp为什么返回ICMP报文的，ICMP一般认为属于网络层的，和IP同一层，是管理和控制IP的一种协议，而UDP和TCP是传输层，所以UDP出错可以返回ICMP差错报文","like_count":111,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418707,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527836207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573760,"discussion_content":"补充关键点：\nICMP 报文是封装在 IP 包里面的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653631746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2194764,"avatar":"","nickname":"K菌无惨","note":"","ucode":"97A532D588FD49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333049,"discussion_content":"soga","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607421460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1638731,"avatar":"https://static001.geekbang.org/account/avatar/00/19/01/4b/a276c1d0.jpg","nickname":"儘管如此世界依然美麗","note":"","ucode":"B831CF4CF2561A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":246056,"discussion_content":"所以说这个ICMP差错报文是网络层重新发出去的吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587722545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2194764,"avatar":"","nickname":"K菌无惨","note":"","ucode":"97A532D588FD49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1638731,"avatar":"https://static001.geekbang.org/account/avatar/00/19/01/4b/a276c1d0.jpg","nickname":"儘管如此世界依然美麗","note":"","ucode":"B831CF4CF2561A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333050,"discussion_content":"个人理解是在UDP包的下层 -- IP层使用ICMP协议 当数据到达目标主机时会返回ICMP的差错报文","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607421592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":246056,"ip_address":""},"score":333050,"extra":""}]}]},{"had_liked":false,"id":160587,"user_name":" 臣馟飞扬","can_delete":false,"product_type":"c1","uid":1116188,"ip_address":"","ucode":"F2F882B7678055","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/1c/ef15e661.jpg","comment_is_top":false,"comment_ctime":1575980461,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"289338789293","product_id":100007101,"comment_content":"百度一下traceroute的原理也很简单啊，看了比喻反而更乱了，希望不是为了比喻而比喻：<br>Traceroute程序的设计是利用ICMP及IP header的TTL（Time To Live）栏位（field）。首先，traceroute送出一个TTL是1的IP datagram（其实，每次送出的为3个40字节的包，包括源地址，目的地址和包发出的时间标签）到目的地，当路径上的第一个路由器（router）收到这个datagram时，它将TTL减1。此时，TTL变为0了，所以该路由器会将此datagram丢掉，并送回一个「ICMP time exceeded」消息（包括发IP包的源地址，IP包的所有内容及路由器的IP地址），traceroute 收到这个消息后，便知道这个路由器存在于这个路径上，接着traceroute 再送出另一个TTL是2 的datagram，发现第2 个路由器...... traceroute 每次将送出的datagram的TTL 加1来发现另一个路由器，这个重复的动作一直持续到某个datagram 抵达目的地。当datagram到达目的地后，该主机并不会送回ICMP time exceeded消息，因为它已是目的地了，那么traceroute如何得知目的地到达了呢？<br><br>Traceroute在送出UDP datagrams到目的地时，它所选择送达的port number 是一个一般应用程序都不会用的号码（30000 以上），所以当此UDP datagram 到达目的地后该主机会送回一个「ICMP port unreachable」的消息，而当traceroute 收到这个消息时，便知道目的地已经到达了。所以traceroute 在Server端也是没有所谓的Daemon 程式。<br><br>Traceroute提取发 ICMP TTL到期消息设备的IP地址并作域名解析。每次 ，Traceroute都打印出一系列数据,包括所经过的路由设备的域名及 IP地址,三个包每次来回所花时间。","like_count":67,"discussions":[{"author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343098,"discussion_content":"那traceroute 送出的datagram的TTL每遇到一个路由器就会减1嘛","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610943166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1913231,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIgiarK8ic7vY1RuR65ESnibhR5D6ic4rCf6DW9PBS4UCHcEZjibZWwGeicU82EllIic5nBcia0B0x0TcsVdQ/132","nickname":"程辉","note":"","ucode":"E9B49C5DDA84CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571375,"discussion_content":"不错，不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652188452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2194764,"avatar":"","nickname":"K菌无惨","note":"","ucode":"97A532D588FD49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308199,"discussion_content":"确实更好理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600868708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11148,"user_name":"秦俊山","can_delete":false,"product_type":"c1","uid":1101079,"ip_address":"","ucode":"42B5B221E0B8CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/cd/17/59d4d531.jpg","comment_is_top":false,"comment_ctime":1527900785,"is_pvip":false,"discussion_count":13,"race_medal":0,"score":"284995742321","product_id":100007101,"comment_content":"非计算机专业出身的，听得一脸懵逼。","like_count":67,"discussions":[{"author":{"id":1103208,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","nickname":"归零","note":"","ucode":"C99B8E93009A46","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":131134,"discussion_content":"多读几遍吧，这课唉，有点垮，四不像","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1578828938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2221237,"avatar":"https://static001.geekbang.org/account/avatar/00/21/e4/b5/5f827868.jpg","nickname":"schweigendes 胡有德","note":"","ucode":"18E97095072C68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369885,"discussion_content":"确实讲的乱，不是你一个人, 很多人其实知道了再听，和什么不知道听, 其实感觉完全不一样. 我也是查了很多资料才懂了一点，很多比喻干扰我的思路","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619187540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2221237,"avatar":"https://static001.geekbang.org/account/avatar/00/21/e4/b5/5f827868.jpg","nickname":"schweigendes 胡有德","note":"","ucode":"18E97095072C68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369883,"discussion_content":"确实讲的乱，不是你一个人, 很多人其实知道了再听，和什么不知道听, 其实感觉完全不一样. 我也是查了很多资料才懂了一点，很多比喻干扰我的思路","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619187538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2004538,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/96/3a/e06f8367.jpg","nickname":"胡小涵","note":"","ucode":"2E750C65EC282C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352033,"discussion_content":"我也是非科班转行的，我觉得老师说的还是挺生动实际的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614580238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387096,"discussion_content":"反复看，以及建议先有点其他方面的底子","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627981088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2628926,"avatar":"https://static001.geekbang.org/account/avatar/00/28/1d/3e/e2c6e678.jpg","nickname":"一途","note":"","ucode":"AF732FFB7AF22A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378017,"discussion_content":"底子差结合百度查呗 大方向和主要逻辑能讲的简单易懂已经很好了 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623019702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2221237,"avatar":"https://static001.geekbang.org/account/avatar/00/21/e4/b5/5f827868.jpg","nickname":"schweigendes 胡有德","note":"","ucode":"18E97095072C68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369884,"discussion_content":"确实讲的乱，不是你一个人, 很多人其实知道了再听，和什么不知道听, 其实感觉完全不一样. 我也是查了很多资料才懂了一点，很多比喻干扰我的思路","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619187539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2221237,"avatar":"https://static001.geekbang.org/account/avatar/00/21/e4/b5/5f827868.jpg","nickname":"schweigendes 胡有德","note":"","ucode":"18E97095072C68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369882,"discussion_content":"确实讲的乱，不是你一个人, 很多人其实知道了再听，和什么不知道听, 其实感觉完全不一样. 我也是查了很多资料才懂了一点，很多比喻干扰我的思路","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619187537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1116188,"avatar":"https://static001.geekbang.org/account/avatar/00/11/08/1c/ef15e661.jpg","nickname":" 臣馟飞扬","note":"","ucode":"F2F882B7678055","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78133,"discussion_content":"有些评论的人你们在秀什么优越感啊，很有意思吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575979855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1214439,"avatar":"https://static001.geekbang.org/account/avatar/00/12/87/e7/043f9dda.jpg","nickname":".","note":"","ucode":"62FA36529ABF0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6548,"discussion_content":"都讲得这么白话和形象了还懵逼～WC","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566965814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1024137,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/89/abb7bfe3.jpg","nickname":"xiu","note":"","ucode":"5B8F6E06D156F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1214439,"avatar":"https://static001.geekbang.org/account/avatar/00/12/87/e7/043f9dda.jpg","nickname":".","note":"","ucode":"62FA36529ABF0E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55119,"discussion_content":"这都能杠。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574341570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6548,"ip_address":""},"score":55119,"extra":""}]},{"author":{"id":1459980,"avatar":"https://static001.geekbang.org/account/avatar/00/16/47/0c/f2f0245e.jpg","nickname":"🐶","note":"","ucode":"D9E46DDB64BA77","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2033,"discussion_content":"老师比喻这么好了，还懵逼，多看几次呗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563191319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1347740,"avatar":"https://static001.geekbang.org/account/avatar/00/14/90/9c/53d0f906.jpg","nickname":"黄豆豆","note":"","ucode":"5D47A4E3BAD3D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":50,"discussion_content":"一脸懵逼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561018973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11054,"user_name":"手撕油条","can_delete":false,"product_type":"c1","uid":1004046,"ip_address":"","ucode":"78DE76233E3A27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/0e/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1527814649,"is_pvip":false,"replies":[{"id":"3548","content":"谢谢","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527850521,"ip_address":"","comment_id":11054,"utype":1}],"discussion_count":1,"race_medal":0,"score":"246340950521","product_id":100007101,"comment_content":"越听越想听，一周三更听不爽","like_count":57,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418693,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527850521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":13931,"user_name":"张张张 💭","can_delete":false,"product_type":"c1","uid":1132934,"ip_address":"","ucode":"91240B99999C68","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/86/554cc50e.jpg","comment_is_top":false,"comment_ctime":1530069980,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"177623729116","product_id":100007101,"comment_content":"看了这么多，我觉得可以先说原理性描述，然后再比喻，这样可以对比着理解，这样应该更好些","like_count":42},{"had_liked":false,"id":12827,"user_name":"番茄尼玛","can_delete":false,"product_type":"c1","uid":1134873,"ip_address":"","ucode":"74AFE4F06D708F","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/19/86f30954.jpg","comment_is_top":false,"comment_ctime":1529055935,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"169032780479","product_id":100007101,"comment_content":"同觉得比喻有些用力过猛了，希望老师能在比喻之后再用技术语言解释一下。比如这篇文章中，终点不可达的几个场景，我就没想通网络不可达和主机不可达有什么区别，还有协议不可达和端口不可达有什么区别","like_count":39,"discussions":[{"author":{"id":1181486,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/2e/878d3c92.jpg","nickname":"木木","note":"","ucode":"E82C58AF2604ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3443,"discussion_content":"比喻是其次，主机不可达就是IP连不上；协议不可达，例如别人的防火墙禁用了tcp协议，你非要去连，那肯定连不上；端口不可达，别人主机上没有8088端口的进程，你也要去连，那就是端口不可达。","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1564481057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241121,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/21/7168f973.jpg","nickname":"JStFs","note":"","ucode":"636E85653555DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4363,"discussion_content":"个人理解：网络不可达和主机不可达，你想想ip不是分为网络号和主机号吗？如果根本找不到离你最近的那个路由器，或者离你最近的路由器中的路由表中匹配不到你的接收方ip的网络号，那应该都是网络不可达，如果找到最后一个路由器了，但路由器发送ARP后找不到你这和主机，那应该是主机不可达，接下来就是番茄尼玛同学说的协议不可达，再就是端口不可达，一层层到达应用层","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1565337095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1214303,"avatar":"https://static001.geekbang.org/account/avatar/00/12/87/5f/6bf8b74a.jpg","nickname":"Kepler","note":"","ucode":"0C9CA3DB8B3CF0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":11810,"discussion_content":"网路不可达就是指路不同，哪个主机都到不了；\n主机不可以只是路是通的，但这个主机找不到，其他主机都能找打，为什么呢？好奇怪！","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568434319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2325145,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKkF14X58pdmTgBWwWzxVicJ0LQjNXiceL3xSj73eC4AZheyIPtf8tyqTicbP4VXia1TmDlm9rlCNCuDQ/132","nickname":"Geek_c2c8d1","note":"","ucode":"60B48691C86D6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387338,"discussion_content":"网络是路径，协议是规定，主机是人，端口是要做的事情","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628129845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":35360,"user_name":"Leon📷","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1540524291,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"143274445059","product_id":100007101,"comment_content":"老师，最好能够抓包截图给大家看，有图有真相，可惜留言不能发图片，不然我就把ping 和traceroute的包细节发出来给大家看看，哈哈","like_count":33,"discussions":[{"author":{"id":1093115,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ad/fb/6d4d6919.jpg","nickname":"Mr. Maopy","note":"","ucode":"EE772E15A69BCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6744,"discussion_content":"可以发图片链接","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567079520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2591874,"avatar":"","nickname":"Geek_5aec96","note":"","ucode":"45345D53041E42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1093115,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ad/fb/6d4d6919.jpg","nickname":"Mr. Maopy","note":"","ucode":"EE772E15A69BCF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390440,"discussion_content":"是的 可以发链接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629843348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6744,"ip_address":""},"score":390440,"extra":""}]}]},{"had_liked":false,"id":45712,"user_name":"川云","can_delete":false,"product_type":"c1","uid":1265438,"ip_address":"","ucode":"3D56399A7C5BDF","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/1e/e2b7a9ba.jpg","comment_is_top":false,"comment_ctime":1543756352,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"100328004160","product_id":100007101,"comment_content":"我觉得比喻很好，方便理解，聪明的人才愿意打比方","like_count":24},{"had_liked":false,"id":82364,"user_name":"大坏狐狸","can_delete":false,"product_type":"c1","uid":1325678,"ip_address":"","ucode":"5044F89A505C5B","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/6e/e39e90ca.jpg","comment_is_top":false,"comment_ctime":1554193873,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"78863605201","product_id":100007101,"comment_content":"1.对于携带ICMP差错报文的数据报，不再产生ICMP差错报文。 <br>  如果主机A发送了一个ICMP的数据报文给主机B，数据在传输过程中经过其中一个路由器出现错误，由于该路由器已经接收到一个ICMP数据报文，所以不会再产生一个ICMP差错报文。<br><br>2.对于分片的数据报，如果不是第一个分片，则不产生ICMP差错报文 <br>  对于主机A发送了一个分片的数据，如果路由设备或主机接收到的分片数据不是第一个分片数据，不会产生ICMP差错报文。<br><br>3.对于具有多播地址的数据报，不产生ICMP差错报文 <br>  如果一个ip地址是一个广播地址的话，不会产生ICMP差错报文。<br><br>4.对于具有特殊地址如（127.0.0.0或0.0.0.0）的数据报，不产生ICMP差错报文<br>","like_count":18,"discussions":[{"author":{"id":1033719,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c5/f7/0d7c1488.jpg","nickname":"希望","note":"","ucode":"5B367909AF5840","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":209902,"discussion_content":"很详细","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584687250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16873,"user_name":"YXsong","can_delete":false,"product_type":"c1","uid":1019942,"ip_address":"","ucode":"A2F4C2233C2354","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/26/6a37f007.jpg","comment_is_top":false,"comment_ctime":1532269428,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"74546713460","product_id":100007101,"comment_content":"没基础的小白听的云里雾里呀，好难🤯","like_count":17},{"had_liked":false,"id":11139,"user_name":"weineel","can_delete":false,"product_type":"c1","uid":1049741,"ip_address":"","ucode":"6DC6EF4F256A53","user_header":"https://static001.geekbang.org/account/avatar/00/10/04/8d/005c2ff3.jpg","comment_is_top":false,"comment_ctime":1527896778,"is_pvip":true,"replies":[{"id":"3569","content":"不是每一层都有接口的，tcp ip协议栈在内核里面，内核的最外层是系统调用，所以你看起来就只能调用socket了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527934457,"ip_address":"","comment_id":11139,"utype":1}],"discussion_count":2,"race_medal":2,"score":"74542340810","product_id":100007101,"comment_content":"老师您好，以我的经验使用tcp&#47;udp协议可以用scoket api编程，但是文中提到ping程序使用了ip协议，那ping程序的实现是不是用到了其他网络编程接口？<br><br>换句话说，每一层的协议都有相应的api可以调用吗？有的话又是什么呢？<br><br>但又感觉我们写的程序一般是应用层用socket就行了…","like_count":18,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418729,"discussion_content":"不是每一层都有接口的，tcp ip协议栈在内核里面，内核的最外层是系统调用，所以你看起来就只能调用socket了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1527934457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583365,"discussion_content":"好像 python 里有个库就可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660054368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28962,"user_name":"Marnie","can_delete":false,"product_type":"c1","uid":1001912,"ip_address":"","ucode":"ECF9B22574F868","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/b8/fb19aa6a.jpg","comment_is_top":false,"comment_ctime":1538209040,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"70257685776","product_id":100007101,"comment_content":"差错报文就是故意找茬，制造错误让别人打回去。","like_count":16},{"had_liked":false,"id":12875,"user_name":"hunterlodge","can_delete":false,"product_type":"c1","uid":1069755,"ip_address":"","ucode":"5B83A79E784161","user_header":"https://static001.geekbang.org/account/avatar/00/10/52/bb/225e70a6.jpg","comment_is_top":false,"comment_ctime":1529108118,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"65953617558","product_id":100007101,"comment_content":"差错报文中的端口不可达是指什么端口呢？为什么ICMP协议会有端口概念呢？","like_count":15,"discussions":[{"author":{"id":3203785,"avatar":"","nickname":"Geek_79141f","note":"","ucode":"770F5AA2425F31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591396,"discussion_content":"这里发送的是测试的UDP报文，让服务器返回对应的差错报文，端口是UDP报文中的端口","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666582646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"陕西"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2462141,"avatar":"https://static001.geekbang.org/account/avatar/00/25/91/bd/057ea625.jpg","nickname":"Geek_K","note":"","ucode":"F784DFE8572E02","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356487,"discussion_content":"这里的端口指的应该是UDP的端口","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615608677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84197,"user_name":"xfan","can_delete":false,"product_type":"c1","uid":1315147,"ip_address":"","ucode":"48ED8D498D7F56","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/4b/fa64f061.jpg","comment_is_top":false,"comment_ctime":1554801465,"is_pvip":false,"replies":[{"id":"49773","content":"网络不可达也是到达了某个地方，发现走不下去了，到哪里哪里返回，一般是某个路由器","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567700802,"ip_address":"","comment_id":84197,"utype":1}],"discussion_count":2,"race_medal":0,"score":"61684343609","product_id":100007101,"comment_content":"如果网络不可达，是谁回复的差错报文呢，是网关吗","like_count":14,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446277,"discussion_content":"网络不可达也是到达了某个地方，发现走不下去了，到哪里哪里返回，一般是某个路由器","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567700802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1616728,"avatar":"https://static001.geekbang.org/account/avatar/00/18/ab/58/ae036dfc.jpg","nickname":"月成FUN","note":"","ucode":"75EE9B951D73CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7116,"discussion_content":"由数据报文到达的最后一站路由器或主机来发送。比如路由器无法为报文找到路由，就会返回一个差错报文","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567390499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11355,"user_name":"Marnie","can_delete":false,"product_type":"c1","uid":1001912,"ip_address":"","ucode":"ECF9B22574F868","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/b8/fb19aa6a.jpg","comment_is_top":false,"comment_ctime":1528083676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"61657625820","product_id":100007101,"comment_content":"感觉查询报文就像编程中的正常流程，差错报文相当于测试程序。","like_count":14},{"had_liked":false,"id":11072,"user_name":"Trust me ҉҉҉҉҉҉҉❀","can_delete":false,"product_type":"c1","uid":1112913,"ip_address":"","ucode":"B576CBDE262A40","user_header":"https://static001.geekbang.org/account/avatar/00/10/fb/51/870a6fcb.jpg","comment_is_top":false,"comment_ctime":1527821709,"is_pvip":false,"replies":[{"id":"3544","content":"没有服务端，全部在制造错误","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527847833,"ip_address":"","comment_id":11072,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48772461965","product_id":100007101,"comment_content":"tracerouter发送的包是什么程序给的响应？  是目标主机的traceroute程序？还是ICMP","like_count":11,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418705,"discussion_content":"没有服务端，全部在制造错误","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527847833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225546,"user_name":"西门吹牛","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1591782182,"is_pvip":false,"replies":[{"id":"83159","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1591839187,"ip_address":"","comment_id":225546,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35951520550","product_id":100007101,"comment_content":"ICMP是第三层网络层的协议<br>计算几网络教材是这么描述的：为了更有效转发ip数据报和提高转发的机会，ICMP允许主机或者路由器报告差错情况和提供有关异常情况的报告，用于传输出错报告控制信息；<br>简单的道理放到教材中就晦涩难懂了。<br>其实可以理解为，ICMP报文可以在主机和路由器之间传输，但传输的不是用户数据，而是网络通不通、主机是否可达、路由是否可用等网络本身的消息，所以可以比作侦察兵，用来侦察在ip层报文传输过程中遇到的异常情况，并能汇报信息，有了异常信息，就可以控制异常，达到更有效的传输效率；控制这种报文，用的是差错报文类型；<br>另外一种是查询报文类行，可以理解为用来测试俩个主机间的连接是否有效，报文多久能到达；<br>总之，通过ICMP协议，可以对ip层报文的传输做到把控","like_count":8,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497889,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591839187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":13699,"user_name":"橙子","can_delete":false,"product_type":"c1","uid":1136095,"ip_address":"","ucode":"A8FB641D82980A","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/df/f517304b.jpg","comment_is_top":false,"comment_ctime":1529935527,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35889673895","product_id":100007101,"comment_content":"听了三遍，看了五遍，我决定先查一下这些缩写啥意思😳","like_count":8},{"had_liked":false,"id":165144,"user_name":"一一","can_delete":false,"product_type":"c1","uid":1252756,"ip_address":"","ucode":"8F15F87CEDB019","user_header":"https://static001.geekbang.org/account/avatar/00/13/1d/94/80b8a9f4.jpg","comment_is_top":false,"comment_ctime":1577171322,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31641942394","product_id":100007101,"comment_content":"我是通过Windows命令行路由追踪新浪网的，一共跳了8次。注：Linux平台命令traceroute，与Windows有所区别。<br>C:\\&gt;tracert www.sina.com.cn<br><br>通过最多 30 个跃点跟踪<br>到 spool.grid.sinaedge.com [112.13.174.126] 的路由:<br><br>  1     1 ms    &lt;1 毫秒    1 ms  192.168.0.1<br>  2     5 ms     4 ms     4 ms  112.17.101.254<br>  3     5 ms     *        *     111.0.78.165<br>  4     *        *        6 ms  211.138.119.229<br>  5     7 ms     6 ms     6 ms  218.205.58.186<br>  6     8 ms     8 ms     7 ms  218.205.86.30<br>  7     *        *        *     请求超时。<br>  8     5 ms     5 ms     5 ms  112.13.174.126<br><br>跟踪完成。","like_count":7},{"had_liked":false,"id":53418,"user_name":"caohuan","can_delete":false,"product_type":"c1","uid":1256428,"ip_address":"","ucode":"4B092E33F3DF1E","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/ec/af6d0b10.jpg","comment_is_top":false,"comment_ctime":1545640528,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27315444304","product_id":100007101,"comment_content":"本篇所得：ICMP为侦察兵，全程为 Internet control message protocol 互联网控制报文协议，它在网络出现问题的时候 返回（回传）错误包，ICMP包括1.主动探查的 查询报文 2.异常报告的差错报文，查询报文 一般用 ping，差错报文 用Traceroute 请求，差错报文 包括1）终点不可达 2）源站拟制 3）时间超时 4）路由重向。<br><br>回答老师的问题 1.如果ICMP差错报文出错，怎么处理，觉得 可以1）多发几次 看回来的错误是否一样，不一样 可能就是ICMP差错报文有异常 2）改变发生的内容 或者 减少发送的内容，查看 差错报文 是否一样。<br>2.跨网关、跨路由，怎么处理ping主动查询 ，1）老师 在本篇专栏 提到 在进入 新的路由时 会换Mac头里面的Mac地址2）为防止 中间设备 禁止 ping，可用 telnet协议 查找网络问题。<br>太懂网络，所以才来学习，有不对之处，期待老师的指正。","like_count":6},{"had_liked":false,"id":11046,"user_name":"anthann","can_delete":false,"product_type":"c1","uid":1134566,"ip_address":"","ucode":"0A969823D131F9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erWTj858HXwXsTOiaxEaYJIRoJMibK14lhspfATACO5G6VrjdBianAnT6hZjqBweo3CPk4O1XlUQ5I8g/132","comment_is_top":false,"comment_ctime":1527814002,"is_pvip":false,"replies":[{"id":"3501","content":"所以是侦查兵啊，错误了就会发","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527826740,"ip_address":"","comment_id":11046,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27297617778","product_id":100007101,"comment_content":"Traceroute发送的是udp包，为什么也能收到icmp响应呢？","like_count":6,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418689,"discussion_content":"所以是侦查兵啊，错误了就会发","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527826740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11030,"user_name":"约书亚","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1527811009,"is_pvip":false,"replies":[{"id":"3545","content":"是的，差错包不会在发差错包","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527847891,"ip_address":"","comment_id":11030,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27297614785","product_id":100007101,"comment_content":"差错包也出问题是不是就拉到了，看上层是不是定时重发的协议了？<br>","like_count":6,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418682,"discussion_content":"是的，差错包不会在发差错包","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527847891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129309,"user_name":"多襄丸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1567084984,"is_pvip":false,"replies":[{"id":"48743","content":"icmp是网络层，ping是应用","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567493245,"ip_address":"","comment_id":129309,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23041921464","product_id":100007101,"comment_content":"[小白评论] 看评论说 icmp也属于网络层啊？ 我还以为icmp属于应用层呢","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465393,"discussion_content":"icmp是网络层，ping是应用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567493245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619597,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6OV33jHia3U9LYlZEx2HrpsELeh3KMlqFiaKpSAaaZeBttXRAVvDXUgcufpqJ60bJWGYGNpT7752w/132","nickname":"dog_brother","note":"","ucode":"9F64D3C6D815FB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361010,"discussion_content":"恍然大悟，ping是应用层；那么traceroute是传输层？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616579112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1619597,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6OV33jHia3U9LYlZEx2HrpsELeh3KMlqFiaKpSAaaZeBttXRAVvDXUgcufpqJ60bJWGYGNpT7752w/132","nickname":"dog_brother","note":"","ucode":"9F64D3C6D815FB","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":531129,"discussion_content":"命令本身来说是属于应用层","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637237635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":361010,"ip_address":""},"score":531129,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":11026,"user_name":"啊路","can_delete":false,"product_type":"c1","uid":1137534,"ip_address":"","ucode":"FC638B78F488A5","user_header":"","comment_is_top":false,"comment_ctime":1527809645,"is_pvip":false,"replies":[{"id":"3555","content":"不好意思，写错了，响应","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527867617,"ip_address":"","comment_id":11026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23002646125","product_id":100007101,"comment_content":"ICMP报文图片最后一个字段是相应还是响应，相应怎么理解","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418679,"discussion_content":"不好意思，写错了，响应","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527867617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157289,"user_name":"饭粒","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1575103316,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18754972500","product_id":100007101,"comment_content":"Linux 下 man 了下 traceroute。<br>traceroute 默认是发送的 UDP 探测包，当然也有选项 -I 发送 ICMP 探测包或 -T 发送TCP 探测包，都跟据返回的差错报文 ICMP TIME_EXCEEDED 响应来判断是否可以达到目标地址，如果最终可达应该就没有 TIME_EXCEEDED 响应了，就不用增加 TTL 重发探测包。<br>测试使用 traceroute www.baidu.com 一直不可达目标服务器（应该是服务器不提供 UDP 服务？）。使用 traceroute -I www.baidu.com，traceroute -T www.baidu.com 经过 12 跳后就达到了目标服务器。","like_count":4,"discussions":[{"author":{"id":1287774,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/5e/b05254a6.jpg","nickname":"Mhy","note":"","ucode":"DE19BCAD1F856E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265780,"discussion_content":"这么说可以使用icmp协议对百度服务器恶意发包？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589437964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89352,"user_name":"n0thing","can_delete":false,"product_type":"c1","uid":1197977,"ip_address":"","ucode":"9B44E34712C535","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/99/aefe1b12.jpg","comment_is_top":false,"comment_ctime":1556157748,"is_pvip":false,"replies":[{"id":"32020","content":"没有传输层，可以有下层没上层","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1556194331,"ip_address":"","comment_id":89352,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18736026932","product_id":100007101,"comment_content":"买了很久，最近才静下心来学习，有个疑问:在客户端ping直观上是一个应用程序，理解应该位于应用层，使用icmp协议属于网络层，那ping的过程经过传输层时干了些啥？还是说ping的过程就没传输层啥事？","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448100,"discussion_content":"没有传输层，可以有下层没上层","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556194331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11045,"user_name":"anthann","can_delete":false,"product_type":"c1","uid":1134566,"ip_address":"","ucode":"0A969823D131F9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erWTj858HXwXsTOiaxEaYJIRoJMibK14lhspfATACO5G6VrjdBianAnT6hZjqBweo3CPk4O1XlUQ5I8g/132","comment_is_top":false,"comment_ctime":1527813962,"is_pvip":false,"replies":[{"id":"3549","content":"出错了就能了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527850532,"ip_address":"","comment_id":11045,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18707683146","product_id":100007101,"comment_content":"ptraceroute用了udp包，为什么也能收到返回的icmp包呢？","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418688,"discussion_content":"出错了就能了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527850532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120307,"user_name":"一个工匠","can_delete":false,"product_type":"c1","uid":1038449,"ip_address":"","ucode":"2168BA6F926074","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/71/d6f79534.jpg","comment_is_top":false,"comment_ctime":1564824552,"is_pvip":true,"replies":[{"id":"46366","content":"是的，没有端口号的事情","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566297185,"ip_address":"","comment_id":120307,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14449726440","product_id":100007101,"comment_content":"ping属于应用层协议，封包后直接传递到ICMP网络层，在这个过程中，是没有传输层事情的。那么端口号是如何确定的呢？没有端口号这个数据包能够发出去吗？","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461280,"discussion_content":"是的，没有端口号的事情","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566297185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248472,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK8o3aJz4NdqOCWvTjIPGmRWHt5xicwKGGGRd5icCoiauvvtnEtST0ljsuM23wiaYbZLknASvXmmqfg1w/132","nickname":"茅延安","note":"","ucode":"317626CFFBC81C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585925,"discussion_content":"服务器端可以打开/关闭ICMP协议。IP通信不依赖端口，端口是抽象出来给应用进程用的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661910336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"吉林"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2354779,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ee/5b/42e178ad.jpg","nickname":"念雅","note":"","ucode":"9B460B5CBCB0D2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361691,"discussion_content":"ping流程走到数据链路层，后面是哪些层在交流啊，懵了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616731115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76511,"user_name":"Null","can_delete":false,"product_type":"c1","uid":1382587,"ip_address":"","ucode":"A7D4DF2A43C7D8","user_header":"https://static001.geekbang.org/account/avatar/00/15/18/bb/9299fab1.jpg","comment_is_top":false,"comment_ctime":1552620936,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14437522824","product_id":100007101,"comment_content":"补充说明下：ICMP是（Internet Control Message Protocol）Internet控制报文协议。它是TCP&#47;IP协议簇的一个子协议，用于在IP主机、路由器之间传递控制消息。控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。这些控制消息虽然并不传输用户数据，但是对于用户数据的传递起着重要的作用。","like_count":3},{"had_liked":false,"id":30303,"user_name":"loveluckystar","can_delete":false,"product_type":"c1","uid":1097877,"ip_address":"","ucode":"370C38AF0E9A43","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/95/6f0aad03.jpg","comment_is_top":false,"comment_ctime":1538785932,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14423687820","product_id":100007101,"comment_content":"ICMP在发送时需要通过IP层进行封装然后发出去，那ICMP为啥算是网络层的协议，而不是像TCP一样算是传输层的协议呢？","like_count":3,"discussions":[{"author":{"id":1541386,"avatar":"https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg","nickname":"N_H","note":"","ucode":"109B67557AB3CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557,"discussion_content":"我也有这个疑问，ICMP为什么是网络层的协议，不是传输层的协议。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561704470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2412331,"avatar":"https://static001.geekbang.org/account/avatar/00/24/cf/2b/65537d50.jpg","nickname":"爻忄","note":"","ucode":"C42ABF24BB5920","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1541386,"avatar":"https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg","nickname":"N_H","note":"","ucode":"109B67557AB3CE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374953,"discussion_content":"ICMP全称 Internet Control Management Protocol，属于IP层的控制/管理，所以是网络层（IP）","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1621418124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":557,"ip_address":""},"score":374953,"extra":""}]}]},{"had_liked":false,"id":29712,"user_name":"正直D令狐勇","can_delete":false,"product_type":"c1","uid":1079581,"ip_address":"","ucode":"8FFE3489C1C04C","user_header":"https://static001.geekbang.org/account/avatar/00/10/79/1d/375d28c0.jpg","comment_is_top":false,"comment_ctime":1538497453,"is_pvip":false,"replies":[{"id":"10702","content":"会的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1538528115,"ip_address":"","comment_id":29712,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14423399341","product_id":100007101,"comment_content":"icmp的差错报文，最终会反馈在socket的api返回的错误代码中吧","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425695,"discussion_content":"会的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538528115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23689,"user_name":"我爱探索","can_delete":false,"product_type":"c1","uid":1202924,"ip_address":"","ucode":"CEBD4F996747B5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3IrblACSCxr7ianvicQXRexScIaZ1zXVQYc1eLUlia6WkhPNKPzMoIJRgfVHe1BHskfTx8E9FCmicYGCeZic6HrGbRA/132","comment_is_top":false,"comment_ctime":1536589048,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14421490936","product_id":100007101,"comment_content":"不能下载成文本真是最大的遗憾","like_count":3},{"had_liked":false,"id":12876,"user_name":"hunterlodge","can_delete":false,"product_type":"c1","uid":1069755,"ip_address":"","ucode":"5B83A79E784161","user_header":"https://static001.geekbang.org/account/avatar/00/10/52/bb/225e70a6.jpg","comment_is_top":false,"comment_ctime":1529108443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14414010331","product_id":100007101,"comment_content":"如果不在我们的控制范围内，很多中间设备都是禁止 ping 的，但是 ping 不通不代表网络不通<br><br>请问这种禁止是如何做到的呢？禁止ICMP协议吗？禁止的目的是出于安全吗？如果是的话，不禁会有什么样的安全风险呢？","like_count":3},{"had_liked":false,"id":11949,"user_name":"wangql","can_delete":false,"product_type":"c1","uid":1089247,"ip_address":"","ucode":"0D6D8D48EC91DE","user_header":"https://static001.geekbang.org/account/avatar/00/10/9e/df/822ab962.jpg","comment_is_top":false,"comment_ctime":1528454639,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14413356527","product_id":100007101,"comment_content":"@大唐江山 不通的原因极可能是桥接的网卡设备对应有问题 默认是auto，但是笔记本一般都有两个或以上网卡，桥接对应出错了就不通了。可以在虚拟网络编辑选项里手工调整","like_count":3},{"had_liked":false,"id":11126,"user_name":"大唐江山","can_delete":false,"product_type":"c1","uid":1130437,"ip_address":"","ucode":"3A169A6540FC38","user_header":"https://static001.geekbang.org/account/avatar/00/11/3f/c5/58787480.jpg","comment_is_top":false,"comment_ctime":1527866068,"is_pvip":false,"replies":[{"id":"3572","content":"windows防火墙？还有有时候虚拟化软件建的那个桥也会出问题，可以尝试重新建那个桥","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527934768,"ip_address":"","comment_id":11126,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14412767956","product_id":100007101,"comment_content":"穿插一个话题:我在虚拟机上配置桥接，系统是ubuntu，同一网段设置好了，完成后ubuntu能上网，但是ping宿主机不能通ping通。360也卸载了还是不成功。望大佬在后面稍微点拨一下小生，不胜感激，若是之后再添加这么一个内容那就再好不过了。","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418725,"discussion_content":"windows防火墙？还有有时候虚拟化软件建的那个桥也会出问题，可以尝试重新建那个桥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527934768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247083,"user_name":"Q罗","can_delete":false,"product_type":"c1","uid":1792098,"ip_address":"","ucode":"E797378F4DA1F4","user_header":"https://static001.geekbang.org/account/avatar/00/1b/58/62/346dd248.jpg","comment_is_top":false,"comment_ctime":1599581268,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10189515860","product_id":100007101,"comment_content":"比喻太好了，虽然原来这块啥都不懂，听起来也好轻松。赞赞赞！","like_count":2},{"had_liked":false,"id":37144,"user_name":"熊能","can_delete":false,"product_type":"c1","uid":1135024,"ip_address":"","ucode":"1019EA97062AC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/b0/d32c895d.jpg","comment_is_top":false,"comment_ctime":1541467457,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10131402049","product_id":100007101,"comment_content":"张将军应该是张飞、他要哭了","like_count":2},{"had_liked":false,"id":12049,"user_name":"项峥","can_delete":false,"product_type":"c1","uid":1130179,"ip_address":"","ucode":"51C4DED79972C9","user_header":"https://static001.geekbang.org/account/avatar/00/11/3e/c3/02108c68.jpg","comment_is_top":false,"comment_ctime":1528536109,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10118470701","product_id":100007101,"comment_content":"粮草送的太多了吃不完笑尿","like_count":2},{"had_liked":false,"id":11068,"user_name":"Smallfly","can_delete":false,"product_type":"c1","uid":1013841,"ip_address":"","ucode":"D388D5E0249A69","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/51/4790e13e.jpg","comment_is_top":false,"comment_ctime":1527817855,"is_pvip":false,"replies":[{"id":"3518","content":"那不是，知道了mac就不是广播了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527836250,"ip_address":"","comment_id":11068,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10117752447","product_id":100007101,"comment_content":"老师你好，从 IP 地址到获得 Mac 地址是通过 APR 协议广播，那知道 Mac 地址后发送数据包到目的地也是通过广播的形式发出去，Mac 匹配的设备给予回应吗？如果这样那岂不是只要发数据设备都要广播，设备很多不会造成干扰吗？","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418702,"discussion_content":"那不是，知道了mac就不是广播了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527836250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11065,"user_name":"fsj","can_delete":false,"product_type":"c1","uid":1017571,"ip_address":"","ucode":"5DA2B549C9B5FE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/86/e3/28d1330a.jpg","comment_is_top":false,"comment_ctime":1527816694,"is_pvip":false,"replies":[{"id":"3546","content":"沙发好","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527850498,"ip_address":"","comment_id":11065,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10117751286","product_id":100007101,"comment_content":"抢个沙发","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418699,"discussion_content":"沙发好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527850498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174812,"user_name":"Direction","can_delete":false,"product_type":"c1","uid":1731977,"ip_address":"","ucode":"298D5109EA28EE","user_header":"https://static001.geekbang.org/account/avatar/00/1a/6d/89/14031273.jpg","comment_is_top":false,"comment_ctime":1580395904,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5875363200","product_id":100007101,"comment_content":"ping的sequence number（BE）最大为0xFFFF，超过这个以后ping会怎么样？自动结束吗？","like_count":1},{"had_liked":false,"id":148718,"user_name":"雨后的夜","can_delete":false,"product_type":"c1","uid":1359202,"ip_address":"","ucode":"0E8C183AEB02EF","user_header":"https://static001.geekbang.org/account/avatar/00/14/bd/62/283e24ab.jpg","comment_is_top":false,"comment_ctime":1573053756,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5868021052","product_id":100007101,"comment_content":"我觉得作者的比喻挺恰当的，有些同学觉得比喻反而更费解可能是因为每个人对比喻的理解方式不一样，个人觉得不需要纠结比喻本身。看看这个课程的标题是“趣谈”，能把枯燥的技术知识讲的生动有趣，这已经是非常好了！","like_count":1},{"had_liked":false,"id":112657,"user_name":"侯清风","can_delete":false,"product_type":"c1","uid":1600204,"ip_address":"","ucode":"0C1BBCFCBB74C2","user_header":"https://static001.geekbang.org/account/avatar/00/18/6a/cc/4b599797.jpg","comment_is_top":false,"comment_ctime":1562803235,"is_pvip":false,"replies":[{"id":"46696","content":"过瘾就多看","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566380919,"ip_address":"","comment_id":112657,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857770531","product_id":100007101,"comment_content":"看的很过瘾","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457842,"discussion_content":"过瘾就多看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566380919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47277,"user_name":"HelloBug","can_delete":false,"product_type":"c1","uid":1249598,"ip_address":"","ucode":"E61A4AD5C2F724","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/3e/925aa996.jpg","comment_is_top":false,"comment_ctime":1544098400,"is_pvip":true,"replies":[{"id":"16885","content":"不是最后一跳，是到了某个路由器，发现在路由表中找不到匹配的项了，就是网络不可达","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1544108220,"ip_address":"","comment_id":47277,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839065696","product_id":100007101,"comment_content":"老师，你好~如果是ping同一个子网内的一台主机，是哪个主机应答不可达呢？如果是跨网段呢？最后一跳的路由器来应答网络不可达吗？那其他的不可达呢？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431724,"discussion_content":"不是最后一跳，是到了某个路由器，发现在路由表中找不到匹配的项了，就是网络不可达","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544108220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29215,"user_name":"天宇","can_delete":false,"product_type":"c1","uid":1042921,"ip_address":"","ucode":"AEB18EEBC7707F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e9/e9/31b68852.jpg","comment_is_top":false,"comment_ctime":1538291052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5833258348","product_id":100007101,"comment_content":"讲的虽然通俗，但是还是需要基础，非专业出身，网络方面的知识学了不少，这么一看更加贯通了","like_count":1},{"had_liked":false,"id":11146,"user_name":"9527","can_delete":false,"product_type":"c1","uid":1063642,"ip_address":"","ucode":"23D255058D98BF","user_header":"https://static001.geekbang.org/account/avatar/00/10/3a/da/4c4cc7f8.jpg","comment_is_top":false,"comment_ctime":1527900334,"is_pvip":false,"replies":[{"id":"3568","content":"需要知道里面重要的字段，但不需要精确的记住，毕竟可以查的嘛，关键是原理","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527934350,"ip_address":"","comment_id":11146,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5822867630","product_id":100007101,"comment_content":"刘老师，想问一下，这些协议的格式需要掌握吗","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418731,"discussion_content":"需要知道里面重要的字段，但不需要精确的记住，毕竟可以查的嘛，关键是原理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527934350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357928,"user_name":"青储","can_delete":false,"product_type":"c1","uid":3094706,"ip_address":"广东","ucode":"C52BBD98B68501","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIaexL1b8o76RqM4F2PZhWYGxsic2EuFSWWh5IhibqfdjcDzJbhlcag1z0rECfUo0vZREbMyiaW7P8XA/132","comment_is_top":false,"comment_ctime":1663751909,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663751909","product_id":100007101,"comment_content":"&quot;会影响的是根据目标 IP 地址，选择路由的下一跳，还有每经过一个路由器到达一个新的局域网，需要换 MAC 头里面的 MAC 地址。&quot;<br>如果经过了NAT转换,ICMP又工作在IP层,IP进程转换了怎么发出ICMP协议?","like_count":0},{"had_liked":false,"id":356351,"user_name":"小杰","can_delete":false,"product_type":"c1","uid":2853200,"ip_address":"浙江","ucode":"BBDF8E9F348F65","user_header":"https://static001.geekbang.org/account/avatar/00/2b/89/50/aee9fdab.jpg","comment_is_top":false,"comment_ctime":1662189693,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662189693","product_id":100007101,"comment_content":"1、设置预期的报错信息，与实际的报错信息作对比，看是否是同种类型。2、这个老师其实已经给了答案，跨网断主要还是涉及目标mac地址的问题。","like_count":0},{"had_liked":false,"id":356035,"user_name":"Vikee","can_delete":false,"product_type":"c1","uid":2034285,"ip_address":"北京","ucode":"17BF7DAD4F7E37","user_header":"https://static001.geekbang.org/account/avatar/00/1f/0a/6d/f9016796.jpg","comment_is_top":false,"comment_ctime":1661930136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661930136","product_id":100007101,"comment_content":"我觉得这篇内容的比喻还是很生动的。","like_count":0},{"had_liked":false,"id":351706,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1658111935,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1658111935","product_id":100007101,"comment_content":"icmp遇到nat设备后，是怎么保障包可以回来的？","like_count":0},{"had_liked":false,"id":351666,"user_name":"水泥中的鱼","can_delete":false,"product_type":"c1","uid":1303754,"ip_address":"","ucode":"DA9E04DFEDFBF4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eophIicGiahpgQpdqgE25g6EELv9ZU0KKZc8K0Ie7TibjFZS91AxUx5ZWeFCC0eODOwwO3GvicvC2u8JA/132","comment_is_top":false,"comment_ctime":1658067876,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1658067876","product_id":100007101,"comment_content":"以前白学了，哈哈，重新学一遍","like_count":0},{"had_liked":false,"id":348084,"user_name":"先生","can_delete":false,"product_type":"c1","uid":2637643,"ip_address":"","ucode":"85B89FAF2519BC","user_header":"","comment_is_top":false,"comment_ctime":1654732734,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654732734","product_id":100007101,"comment_content":"可以进行死亡之ping进行攻击吧？","like_count":0},{"had_liked":false,"id":339574,"user_name":"暮雨","can_delete":false,"product_type":"c1","uid":2226178,"ip_address":"","ucode":"0335738604AFA3","user_header":"https://static001.geekbang.org/account/avatar/00/21/f8/02/d01c387e.jpg","comment_is_top":false,"comment_ctime":1648198863,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648198863","product_id":100007101,"comment_content":"其实学习这这几个协议相关的，最好就是安装个wireshark，用下几个命令ping、traceroute（windows上是TRACERT.exe，linux上没有可以安装下sudo apt install traceroute），抓包看下，再结合老师的讲解，理解起来会更具体","like_count":0},{"had_liked":false,"id":333871,"user_name":"阳树","can_delete":false,"product_type":"c1","uid":2743628,"ip_address":"","ucode":"859A4A82B48C74","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/u8g8UoUaBZTGpDgAQKDwLxS2ibE0GfAPED5r0Dnm4RsT22HcWRNE79RFeF9bUP3xQfKa9jiaGUzw0icxK836NvicQQ/132","comment_is_top":false,"comment_ctime":1644568087,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644568087","product_id":100007101,"comment_content":"ICMP有专门的应用情景吗<br>","like_count":0},{"had_liked":false,"id":327098,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1194572,"ip_address":"","ucode":"FBFAE23E8E48B7","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/4c/b6200773.jpg","comment_is_top":false,"comment_ctime":1639914737,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639914737","product_id":100007101,"comment_content":"比喻很有趣啊，而且一开始设计这些的人灵感也是来源于生活啊。搞不好真是行军打仗，通讯最开始也是用于军事的吧","like_count":0},{"had_liked":false,"id":321269,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1636730457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636730457","product_id":100007101,"comment_content":"ping的过程：<br>主机a想要ping主机b。他会先封装一个。icmp的8类型的报文。然后加上目的ip地址和自己的ip地址。然后加上自己的mac地址和目的的mac地址。mac地址的获取，如果是arp映射表中，能够拿到则直接去拿。否则会以通过arp协议来获取目的地址的mac，封装的包发送给主机b。主机b底层收到后会逐层解包到达的上层，然后自己封装一个类型为0的报文作为应答，然后按照类似的方式把这个包传递给主机a。","like_count":0},{"had_liked":false,"id":320794,"user_name":"听说少年","can_delete":false,"product_type":"c1","uid":1139839,"ip_address":"","ucode":"0CA7F9DBAB9379","user_header":"https://static001.geekbang.org/account/avatar/00/11/64/7f/4bd8dbe6.jpg","comment_is_top":false,"comment_ctime":1636512538,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636512538","product_id":100007101,"comment_content":"我还是喜欢直接听原理 我自己去理解比喻.... 老师的这比喻好难受啊啊啊啊啊啊","like_count":0},{"had_liked":false,"id":319084,"user_name":"御舟","can_delete":false,"product_type":"c1","uid":2736158,"ip_address":"","ucode":"2A736AB5639D5A","user_header":"https://static001.geekbang.org/account/avatar/00/29/c0/1e/21d0f9dd.jpg","comment_is_top":false,"comment_ctime":1635572199,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1635572199","product_id":100007101,"comment_content":"老师的比喻很好不过是有点用力了","like_count":0},{"had_liked":false,"id":317910,"user_name":"xd","can_delete":false,"product_type":"c1","uid":1153827,"ip_address":"","ucode":"5EF3584A6AF928","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/23/442f149d.jpg","comment_is_top":false,"comment_ctime":1635048314,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635048314","product_id":100007101,"comment_content":"traceroute公网ip,中间有的路由器不会返回,那么源怎么设置后续的TTL? 不是正好被不返回icmp的路由器消耗完了TTL么","like_count":0},{"had_liked":false,"id":317468,"user_name":"蓝笨笨咱们走","can_delete":false,"product_type":"c1","uid":1962433,"ip_address":"","ucode":"F0EFF69A04876E","user_header":"https://static001.geekbang.org/account/avatar/00/1d/f1/c1/bcc5e771.jpg","comment_is_top":false,"comment_ctime":1634805357,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634805357","product_id":100007101,"comment_content":"这门课我认为很好，当然我还是认为这个课适合有基础的。对于有基础的同学，这个课会在关键点点拨你，让你的真气更上一级。此外，能够学习老司机的理解套路和思维模式，这很酷。","like_count":0},{"had_liked":false,"id":300510,"user_name":"菽绣","can_delete":false,"product_type":"c1","uid":1755477,"ip_address":"","ucode":"60955E14C39C6B","user_header":"https://static001.geekbang.org/account/avatar/00/1a/c9/55/0e627a31.jpg","comment_is_top":false,"comment_ctime":1625201596,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625201596","product_id":100007101,"comment_content":"差错报文出错那发送方也会收到一个差错报文吧","like_count":0},{"had_liked":false,"id":299498,"user_name":"Geek_5baa01","can_delete":false,"product_type":"c1","uid":2470693,"ip_address":"","ucode":"EE194170C4B30E","user_header":"","comment_is_top":false,"comment_ctime":1624681155,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624681155","product_id":100007101,"comment_content":"MTU 是什么？","like_count":0},{"had_liked":false,"id":290817,"user_name":"蔡箐菁","can_delete":false,"product_type":"c1","uid":1137046,"ip_address":"","ucode":"550B54F2550718","user_header":"https://static001.geekbang.org/account/avatar/00/11/59/96/11671504.jpg","comment_is_top":false,"comment_ctime":1619768287,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619768287","product_id":100007101,"comment_content":"可以边看文章边查阅文档，https:&#47;&#47;tools.ietf.org&#47;html&#47;rfc792#ref-1","like_count":0},{"had_liked":false,"id":290002,"user_name":"Gabriel","can_delete":false,"product_type":"c1","uid":1437358,"ip_address":"","ucode":"714772A93E93DC","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/ae/855b7e6e.jpg","comment_is_top":false,"comment_ctime":1619317026,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619317026","product_id":100007101,"comment_content":"这节我主要学到几个知识点<br>1：什么事ICMP？<br>答：ICMP（internet control message protocol）internet控制报文协议。它是TCP&#47;IP协议簇的一个子协议，用于在IP主机、路由器之间传递控制消息。控制消息是指网路不通、主机是否可达、路由是否可用等网络本身的消息。这些控制消息虽然不传输用户数据，但是对用用户数据的传递起着重要作用。<br><br>2：如果利用ICMP协议实现网路功能？<br>a：ping 目标ip或者域名（不带端口），用来测试网络可达性<br>b：tracert，用来显示到达目的主机的路径<br><br>原来，有时候接口报错，504，或是请求时间太长。刚刚开始都不知道怎么排错，首先去看代码，然后自己在本地请求接口，然后就是说代码没有问题呀，怎么会出现这个问题呢？<br>其实，在服务器端的报错，不要一开始就检查就想自己代码的问题。既然是服务端的报错，那么就先去排查，网路是否通，如果网络不同，请求不到答，这样去解决网络的问题。<br>如果网路是通的，这时候去看自己的nnginx进程是否正常，查看access日志和error日志。<br>如果nginx没有问题，那么就去看php是否异常，查看php进程，在查询phperror，<br>最后再去看框架自带的错误日志。<br><br>学习这门课程，让我懂得该怎么去更好排查错误。","like_count":0},{"had_liked":false,"id":285308,"user_name":"念雅","can_delete":false,"product_type":"c1","uid":2354779,"ip_address":"","ucode":"9B460B5CBCB0D2","user_header":"https://static001.geekbang.org/account/avatar/00/23/ee/5b/42e178ad.jpg","comment_is_top":false,"comment_ctime":1616730681,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1616730681","product_id":100007101,"comment_content":"有点不明白，ICMP是网络层，IP也是网络层，为什么要提出来一个IP层呢？为什么不说成网络层","like_count":0},{"had_liked":false,"id":284929,"user_name":"V万能的小黑V","can_delete":false,"product_type":"c1","uid":2436694,"ip_address":"","ucode":"262051F1B7847A","user_header":"https://static001.geekbang.org/account/avatar/00/25/2e/56/6f38de90.jpg","comment_is_top":false,"comment_ctime":1616549336,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616549336","product_id":100007101,"comment_content":"讲得很好，清晰易懂","like_count":0},{"had_liked":false,"id":284023,"user_name":"Wangyf","can_delete":false,"product_type":"c1","uid":2226219,"ip_address":"","ucode":"349068A07CB1D4","user_header":"https://static001.geekbang.org/account/avatar/00/21/f8/2b/339660f1.jpg","comment_is_top":false,"comment_ctime":1616038836,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1616038836","product_id":100007101,"comment_content":"看了别的同学的留言，差错报文出错了，就不发差错报文了，那.....法什么报文呢？是什么都不返回，等着发出 ICMP 报文的主机超时吗？","like_count":0},{"had_liked":false,"id":282405,"user_name":"Bigonepiece","can_delete":false,"product_type":"c1","uid":1474798,"ip_address":"","ucode":"EB85C3A422AE3A","user_header":"https://static001.geekbang.org/account/avatar/00/16/80/ee/6d2d66e8.jpg","comment_is_top":false,"comment_ctime":1615215885,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615215885","product_id":100007101,"comment_content":"课程中的图是啥软件画的？windows系统有没有画图软件推荐，谢谢老师。","like_count":0},{"had_liked":false,"id":276198,"user_name":"Wheat","can_delete":false,"product_type":"c1","uid":1260141,"ip_address":"","ucode":"7D99EA149B6DE8","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/6d/910b2445.jpg","comment_is_top":false,"comment_ctime":1611828329,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611828329","product_id":100007101,"comment_content":"话锋一转就到了网络层，讲完了我都不知道是在讲网络层，查了ICMP协议才知道属于网络层，那网络层能总结一下是干啥的吗","like_count":0},{"had_liked":false,"id":258790,"user_name":"gerald","can_delete":false,"product_type":"c1","uid":1020595,"ip_address":"","ucode":"40CA437CA23DA4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELib1YribQ4f3KLgjaTCLVPr9LSzmOvWNzib8dnHlWvwffg4RuJYs0HRYLiaDBRiaTSP0v0hia2QjggWmgA/132","comment_is_top":false,"comment_ctime":1604557891,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1604557891","product_id":100007101,"comment_content":"比喻的地方全部跳过后，真正讲解技术的文字没几行，根本没解释清楚","like_count":0},{"had_liked":false,"id":258788,"user_name":"gerald","can_delete":false,"product_type":"c1","uid":1020595,"ip_address":"","ucode":"40CA437CA23DA4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELib1YribQ4f3KLgjaTCLVPr9LSzmOvWNzib8dnHlWvwffg4RuJYs0HRYLiaDBRiaTSP0v0hia2QjggWmgA/132","comment_is_top":false,"comment_ctime":1604557820,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1604557820","product_id":100007101,"comment_content":"太刻意了，简单的一个协议讲的冗余复杂，为了有趣而有趣","like_count":0},{"had_liked":false,"id":254821,"user_name":"陈德伟","can_delete":false,"product_type":"c1","uid":1106323,"ip_address":"","ucode":"5250CCF3937854","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/93/365ba71d.jpg","comment_is_top":false,"comment_ctime":1603194299,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603194299","product_id":100007101,"comment_content":"1，traceroute默认是 UDP，很多网络设备都禁止udp，tcp得加-I选项<br>2，traceroute需要root权限<br>3，tracepath不需要root权限，但好像只能udp<br>4，mtr也能做侦测","like_count":0},{"had_liked":false,"id":254052,"user_name":"Bob Ji","can_delete":false,"product_type":"c1","uid":1319731,"ip_address":"","ucode":"C4C36B2D0CA71F","user_header":"https://static001.geekbang.org/account/avatar/00/14/23/33/b20d8878.jpg","comment_is_top":false,"comment_ctime":1603031785,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603031785","product_id":100007101,"comment_content":"刘老师，您好<br>ping应该是工作在应用层吧，那它直接使用网络层的ICMP协议，岂不是没有经过传输层？<br>始终牢记一个原则：只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层。<br>那是有矛盾了吗","like_count":0},{"had_liked":false,"id":247643,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","comment_is_top":false,"comment_ctime":1599785276,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599785276","product_id":100007101,"comment_content":"这一节对ICMP的差错报文主动使用来探测网络情况有了一个新的认知，赞👍","like_count":0},{"had_liked":false,"id":240879,"user_name":"正平","can_delete":false,"product_type":"c1","uid":1067023,"ip_address":"","ucode":"5FFA55B8762561","user_header":"https://static001.geekbang.org/account/avatar/00/10/48/0f/6d6cc6c3.jpg","comment_is_top":false,"comment_ctime":1597109335,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597109335","product_id":100007101,"comment_content":"这比喻有意思","like_count":0},{"had_liked":false,"id":225200,"user_name":"Siri","can_delete":false,"product_type":"c1","uid":1074834,"ip_address":"","ucode":"40CCD539F19D4C","user_header":"https://static001.geekbang.org/account/avatar/00/10/66/92/f1f83d8b.jpg","comment_is_top":false,"comment_ctime":1591682215,"is_pvip":true,"replies":[{"id":"83016","content":"mac不是全局唯一，ip和mac也不是一一绑定，有时候响应arp，但是我的ip不是这个，而且中转一下，可以去看lvs的dr模式","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1591754333,"ip_address":"","comment_id":225200,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591682215","product_id":100007101,"comment_content":"有一个疑问，既然到达目标地址后是先检查mac地址再检查ip地址<br>但是mac地址不已经是唯一的了么，mac地址一致的情况下为什么还要检查IP地址<br>","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497772,"discussion_content":"mac不是全局唯一，ip和mac也不是一一绑定，有时候响应arp，但是我的ip不是这个，而且中转一下，可以去看lvs的dr模式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591754333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218475,"user_name":"Mabel.Chen","can_delete":false,"product_type":"c1","uid":1788740,"ip_address":"","ucode":"94FF1F1460705B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/4b/44/4d139207.jpg","comment_is_top":false,"comment_ctime":1589806982,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589806982","product_id":100007101,"comment_content":"弱弱地问一下老师，老师讲的这些都是自己学习和经验的积累，那么要想学到这些知识，我想单单是学习老师的课程也还是远远不够的，如果可以的话，希望老师能指导一下还有哪些必备学习资源。","like_count":0},{"had_liked":false,"id":210281,"user_name":"吃瓜胖子😂","can_delete":false,"product_type":"c1","uid":1325243,"ip_address":"","ucode":"174240CB0097A6","user_header":"https://static001.geekbang.org/account/avatar/00/14/38/bb/e3bf1040.jpg","comment_is_top":false,"comment_ctime":1587713046,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587713046","product_id":100007101,"comment_content":"对端服务器禁ping，如何确认到对端服务器的网络质量&#47;是否有丢包?","like_count":0},{"had_liked":false,"id":209771,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1587611700,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587611700","product_id":100007101,"comment_content":"对于TTL,并非常见的超时时间,而是每次到了一个中转站,都会进行减一,是这样吗","like_count":0},{"had_liked":false,"id":193387,"user_name":"Geek_f0bd6b","can_delete":false,"product_type":"c1","uid":1905495,"ip_address":"","ucode":"54C2BD14F77F72","user_header":"","comment_is_top":false,"comment_ctime":1584891501,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584891501","product_id":100007101,"comment_content":"学习了，差错报文，就是告诉发送方前方有异常","like_count":0},{"had_liked":false,"id":192324,"user_name":"宋健","can_delete":false,"product_type":"c1","uid":1283082,"ip_address":"","ucode":"7DD1CAB40440C3","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/0a/7f7c9b25.jpg","comment_is_top":false,"comment_ctime":1584846679,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584846679","product_id":100007101,"comment_content":"想请问老师，windows下的tracer的icmp数据类型跟ping是一样的吗？我尝试linux下tracerout百度，结果每一跳都是星星；而在Windows下tracert百度，发现能追踪到路由，是不是他们的icmp的数据类型不同？如果不同，tracert又是什么类型呢？","like_count":0},{"had_liked":false,"id":187765,"user_name":"ricepot100","can_delete":false,"product_type":"c1","uid":1900967,"ip_address":"","ucode":"318CBC10964946","user_header":"","comment_is_top":false,"comment_ctime":1584235568,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584235568","product_id":100007101,"comment_content":"ICMP 报文是封装在 IP 包里面的。这句话怎么理解？是指icmp是ip上层的协议吗？为什么没有mac头？","like_count":0},{"had_liked":false,"id":187763,"user_name":"Geek_f7658e","can_delete":false,"product_type":"c1","uid":1898597,"ip_address":"","ucode":"108AA63DEF6A2C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/LWicoUend7QOH6pyXGJyJicAzm5T4TUD8TaicSCHVPJp7sbIicpeArcicZiaMGcQ7uUDWjGZYgVnUqNGFFDVe9h0EV4w/132","comment_is_top":false,"comment_ctime":1584235460,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584235460","product_id":100007101,"comment_content":"第一次看的模糊，第二次看懂了，老师的文章是总领知识的，有些细节需要初学者打磨下","like_count":0},{"had_liked":false,"id":181165,"user_name":"子杨","can_delete":false,"product_type":"c1","uid":1236803,"ip_address":"","ucode":"EA7555EEE6DECE","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/43/1aa8708a.jpg","comment_is_top":false,"comment_ctime":1582509953,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582509953","product_id":100007101,"comment_content":"这里面想了解一下，traceroute 发 UDP 包是干嘛的？ping 为什么不需要 UDP 呢？","like_count":0},{"had_liked":false,"id":171520,"user_name":"YU","can_delete":false,"product_type":"c1","uid":1274464,"ip_address":"","ucode":"4EE45D6FC2862F","user_header":"https://static001.geekbang.org/account/avatar/00/13/72/60/288023be.jpg","comment_is_top":false,"comment_ctime":1578961008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578961008","product_id":100007101,"comment_content":"建议先看一遍图解tcp&#47;ip之后，再来看这些内容。图解top&#47;ip不厚，讲的也还不错。","like_count":0},{"had_liked":false,"id":167608,"user_name":"麻花","can_delete":false,"product_type":"c1","uid":1019736,"ip_address":"","ucode":"67721A5F0C9EC7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/58/08e4d923.jpg","comment_is_top":false,"comment_ctime":1577875709,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577875709","product_id":100007101,"comment_content":"有一点不明白， “它会选择一个不可能的值作为 UDP 端口号（大于 30000）” 这里大于30000也不是不可能的端口号，只能说是一个不常用的端口号吧","like_count":0},{"had_liked":false,"id":166860,"user_name":"Geek_wongk","can_delete":false,"product_type":"c1","uid":1797799,"ip_address":"","ucode":"FB91178B1059F0","user_header":"","comment_is_top":false,"comment_ctime":1577617271,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577617271","product_id":100007101,"comment_content":"感觉有点吃力的可以先找一本网络书看看，补补基础再来看。老师的水平很高，基础越扎实收获越多。","like_count":0},{"had_liked":false,"id":166183,"user_name":"暮雨","can_delete":false,"product_type":"c1","uid":1176426,"ip_address":"","ucode":"4B7F4932446EF7","user_header":"https://static001.geekbang.org/account/avatar/00/11/f3/6a/6d82e7a3.jpg","comment_is_top":false,"comment_ctime":1577411845,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577411845","product_id":100007101,"comment_content":"traceroute的每次路由路径会一样么","like_count":0},{"had_liked":false,"id":151027,"user_name":"teddytyy","can_delete":false,"product_type":"c1","uid":1268738,"ip_address":"","ucode":"E1569D81A4154E","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/02/e7af1750.jpg","comment_is_top":false,"comment_ctime":1573644488,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573644488","product_id":100007101,"comment_content":"时间超时的比喻笑死我了","like_count":0},{"had_liked":false,"id":144971,"user_name":"宋不肥","can_delete":false,"product_type":"c1","uid":1240126,"ip_address":"","ucode":"32B34AF579C91C","user_header":"https://static001.geekbang.org/account/avatar/00/12/ec/3e/885ec1d2.jpg","comment_is_top":false,"comment_ctime":1572145147,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572145147","product_id":100007101,"comment_content":"非科班，控制出身，网络方面0基础。研一上课，导研二终于有时间来看了，每一节看的都很辛苦，第一遍都听得头晕，但看了两三遍就慢慢能看懂了，到第四遍左右就会发现老师的行文逻辑确实很清晰nice，对应着在看计算机的那本教材，本科选修的时候看不懂，现在对应的部分，对着书和老师的课看就感觉理解的还挺透彻的（自我感觉），确实有用。感谢老师","like_count":0},{"had_liked":false,"id":134458,"user_name":"阿阳","can_delete":false,"product_type":"c1","uid":1165817,"ip_address":"","ucode":"20A35FB86B1C5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c9/f9/39492855.jpg","comment_is_top":false,"comment_ctime":1568850785,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568850785","product_id":100007101,"comment_content":"仔细反复的看到这一节，真心佩服老师对于网络知识讲解的安排顺序。网络知识关联性太强，稍微安排顺序有些问题就可能讲不通。看到这种讲解顺序，真是用心良苦，理论联系实际，打通了我的很多困惑的点。赞！","like_count":0},{"had_liked":false,"id":130799,"user_name":"胡永","can_delete":false,"product_type":"c1","uid":1200543,"ip_address":"","ucode":"6C8BA1E0BED9C0","user_header":"https://static001.geekbang.org/account/avatar/00/12/51/9f/1840385e.jpg","comment_is_top":false,"comment_ctime":1567554536,"is_pvip":false,"replies":[{"id":"48995","content":"主要讲原理，适配音频","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567576127,"ip_address":"","comment_id":130799,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567554536","product_id":100007101,"comment_content":"老师的比喻挺好的，如果配合上终端的操作图示就更好了","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466134,"discussion_content":"主要讲原理，适配音频","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567576127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113869,"user_name":"叶叶","can_delete":false,"product_type":"c1","uid":1605135,"ip_address":"","ucode":"C0FA9CBD74E64E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/RVgoywqdiaoTDV66lVJwED3jtAf1OuAal6K1QeWLoeqNbbQPicRz6XhJU1vShUJ50eHLGvXc22ZVX9hnG5ZNKARw/132","comment_is_top":false,"comment_ctime":1563175951,"is_pvip":false,"replies":[{"id":"46621","content":"仔细品读，其实还好啦","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566367988,"ip_address":"","comment_id":113869,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563175951","product_id":100007101,"comment_content":"比较适合对计算机网络有所了解的人食用。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458415,"discussion_content":"仔细品读，其实还好啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566367988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112968,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1562856904,"is_pvip":false,"replies":[{"id":"46684","content":"图中画的也是这样的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566379964,"ip_address":"","comment_id":112968,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562856904","product_id":100007101,"comment_content":"老师，ping那个图右半部分不是从下往上？按理不应该先经过MAC层再到IP层再ICMP响应回来？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457985,"discussion_content":"图中画的也是这样的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566379964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111851,"user_name":"天然","can_delete":false,"product_type":"c1","uid":1435982,"ip_address":"","ucode":"0F12BD470A8104","user_header":"https://static001.geekbang.org/account/avatar/00/15/e9/4e/22c73926.jpg","comment_is_top":false,"comment_ctime":1562631526,"is_pvip":false,"replies":[{"id":"46730","content":"想听就多听，加油","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566387281,"ip_address":"","comment_id":111851,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562631526","product_id":100007101,"comment_content":"老师讲的蛮好，以前觉得网络太枯燥，听您的越听越想听","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457470,"discussion_content":"想听就多听，加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566387281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106345,"user_name":"若星","can_delete":false,"product_type":"c1","uid":1247442,"ip_address":"","ucode":"D92DC0D777724E","user_header":"https://static001.geekbang.org/account/avatar/00/13/08/d2/83bdc5dd.jpg","comment_is_top":false,"comment_ctime":1561275550,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561275550","product_id":100007101,"comment_content":"有种还在练习扎马步，老师在讲武功秘籍的赶脚😭","like_count":0},{"had_liked":false,"id":105878,"user_name":"FF","can_delete":false,"product_type":"c1","uid":1133758,"ip_address":"","ucode":"89DB3329AAEAB2","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/be/25919d4b.jpg","comment_is_top":false,"comment_ctime":1561098159,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561098159","product_id":100007101,"comment_content":"一环扣一环的","like_count":0},{"had_liked":false,"id":98439,"user_name":"Aaaaaaaaaaayou","can_delete":false,"product_type":"c1","uid":1073601,"ip_address":"","ucode":"67BA315B87587D","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/c1/93031a2a.jpg","comment_is_top":false,"comment_ctime":1559004786,"is_pvip":false,"replies":[{"id":"35378","content":"错了才发icmp","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1559100359,"ip_address":"","comment_id":98439,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559004786","product_id":100007101,"comment_content":"Traceroute 的参数指向某个目的 IP 地址，它会发送一个 UDP 的数据包。  这里为什么要发一个udp的包？不应该是icmp的包吗？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451688,"discussion_content":"错了才发icmp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559100359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94649,"user_name":"Leedom","can_delete":false,"product_type":"c1","uid":1301344,"ip_address":"","ucode":"BC1240F2364DAD","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/60/17c224f6.jpg","comment_is_top":false,"comment_ctime":1557878927,"is_pvip":false,"replies":[{"id":"49352","content":"加油，offer多多","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567650760,"ip_address":"","comment_id":94649,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557878927","product_id":100007101,"comment_content":"觉得老师讲的挺好的，在校上这门课就一直期末背书，背知识点，而现在貌似更清晰的来理解，希望秋招也能拿网易offer，offer++","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450155,"discussion_content":"加油，offer多多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567650760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93705,"user_name":"Carlos","can_delete":false,"product_type":"c1","uid":1143912,"ip_address":"","ucode":"687CD9CA3E7C9B","user_header":"https://static001.geekbang.org/account/avatar/00/11/74/68/3725546b.jpg","comment_is_top":false,"comment_ctime":1557564321,"is_pvip":false,"replies":[{"id":"49391","content":"发现通路不通的时候，需要通过他们来探路","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567654237,"ip_address":"","comment_id":93705,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557564321","product_id":100007101,"comment_content":"老师，这篇文章读了好几遍，总算基本搞清楚ping和traceroute的原理了，但是我还是不知道这俩命令的具体应用场景是什么？我现在理解ping就是看目标主机是否可达，并且了解下延时是多少。traceroute是看下从客户端到达目标主机经过了哪些路由，以及所用的时间。还是没搞清楚什么情况下要使用它。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449736,"discussion_content":"发现通路不通的时候，需要通过他们来探路","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567654237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91549,"user_name":"Geek_f8cd05","can_delete":false,"product_type":"c1","uid":1507657,"ip_address":"","ucode":"FEBE700704F0B0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/VF22kbprrVk1gTYnEaSvVyvJPaG249icNkvBtVSwWZPkR0gIVf0ObOiaAib1mCUyia8zEJXcicqzgYibtYFJfWKVVcKA/132","comment_is_top":false,"comment_ctime":1557053027,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1557053027","product_id":100007101,"comment_content":"老师讲的诙谐幽默，通俗易懂，👍","like_count":0},{"had_liked":false,"id":90992,"user_name":"xiaoq","can_delete":false,"product_type":"c1","uid":1024599,"ip_address":"","ucode":"77CC98C70F8A29","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a2/57/219503c1.jpg","comment_is_top":false,"comment_ctime":1556773159,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556773159","product_id":100007101,"comment_content":"windows 下 使用 tracert，抓包发现其发出的并不是 udp， 而是 icmp 。","like_count":0},{"had_liked":false,"id":87361,"user_name":"Geek_199a85","can_delete":false,"product_type":"c1","uid":1504139,"ip_address":"","ucode":"EE4BA34EE7F4F8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKTSHrQdAdDps1pv2DfXwACaYjKPq212jsiaGle8I7VYRsnMVYicsh8uUicGD3Tm99dibWQLmDjibzdU7g/132","comment_is_top":false,"comment_ctime":1555576080,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555576080","product_id":100007101,"comment_content":"通过tracerote 来跟踪 包经过的路由器的时候，为什么中间又几个是 timeout，但是最后包还是能送到目的IP<br>通过最多 30 个跃点跟踪到 xx.xx.xx.xx  的路由<br><br>  1     2 ms     2 ms     2 ms  10.134.28.1<br>  2     *        *        *     请求超时。<br>  3     *        *        *     请求超时。<br>  4    38 ms    38 ms    38 ms  xx.xx.xx.xx<br><br>类似这样","like_count":0},{"had_liked":false,"id":85864,"user_name":"Nyng","can_delete":false,"product_type":"c1","uid":1477652,"ip_address":"","ucode":"E003F256ACDC47","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/14/ac32cb06.jpg","comment_is_top":false,"comment_ctime":1555264101,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555264101","product_id":100007101,"comment_content":"比喻太精彩了太栩栩如生了！一看到这些比喻我就精神一振会心一笑，同时感觉知识也融会贯通了，真像上面有人说的打通了任督二脉。","like_count":0},{"had_liked":false,"id":85229,"user_name":"灯盖","can_delete":false,"product_type":"c1","uid":1482839,"ip_address":"","ucode":"0F8455A593D60C","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/57/3a729755.jpg","comment_is_top":false,"comment_ctime":1555023245,"is_pvip":false,"replies":[{"id":"49727","content":"那就再来一遍","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698664,"ip_address":"","comment_id":85229,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1555023245","product_id":100007101,"comment_content":"一半一半，一半懂一半不懂，还得再来一遍","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446599,"discussion_content":"那就再来一遍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82540,"user_name":"allwmh","can_delete":false,"product_type":"c1","uid":1031572,"ip_address":"","ucode":"8B596EEFE9083A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bd/94/d4499319.jpg","comment_is_top":false,"comment_ctime":1554250232,"is_pvip":false,"replies":[{"id":"50021","content":"是的。icmp是网络层的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567789711,"ip_address":"","comment_id":82540,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554250232","product_id":100007101,"comment_content":"1.tracerouter收到的icmp的包都是路由器返回的吗？<br>2.如果是tcp发送的一个包到某个不存在的ip地址的时候，是否也是能收到路由器发回的icmp包呢？<br>3.如果2能收到，意思是不是说icmp的一部分能力其实也能理解为ip层的一种网络处理方式呢？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445630,"discussion_content":"是的。icmp是网络层的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567789711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81737,"user_name":"少盐","can_delete":false,"product_type":"c1","uid":1305743,"ip_address":"","ucode":"BCC7E264B75702","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/8f/8299495a.jpg","comment_is_top":false,"comment_ctime":1554022550,"is_pvip":false,"replies":[{"id":"50074","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567791555,"ip_address":"","comment_id":81737,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554022550","product_id":100007101,"comment_content":"Icmp是协议吗，作为侦察兵属于层级，traceroute 故意发送错误信息，如果能收到回复说明道路是通的","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445322,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567791555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81546,"user_name":"愤怒的一口","can_delete":false,"product_type":"c1","uid":1457637,"ip_address":"","ucode":"A64CE73FEDDEC6","user_header":"https://static001.geekbang.org/account/avatar/00/16/3d/e5/a2176e73.jpg","comment_is_top":false,"comment_ctime":1553939975,"is_pvip":false,"replies":[{"id":"50085","content":"后面icmp不再讲了。可以试一下","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567791761,"ip_address":"","comment_id":81546,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553939975","product_id":100007101,"comment_content":"看到这里觉得老师写的确实是好啊！！！前面都讲解的非常到位。但是这一章的Traceroute  这块 有点蒙，不知道后面还没有讲解，先继续再看两章再回来看一下。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445247,"discussion_content":"后面icmp不再讲了。可以试一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567791761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80236,"user_name":"唐宋元明清","can_delete":false,"product_type":"c1","uid":1113010,"ip_address":"","ucode":"EC2CCDAAF8B465","user_header":"https://static001.geekbang.org/account/avatar/00/10/fb/b2/b1c23254.jpg","comment_is_top":false,"comment_ctime":1553643669,"is_pvip":true,"replies":[{"id":"50172","content":"好，赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567825630,"ip_address":"","comment_id":80236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553643669","product_id":100007101,"comment_content":"听不懂或者感觉太困难的请把大学的计算机网络原理仔细看一遍","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444792,"discussion_content":"好，赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567825630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79828,"user_name":"小mango.Melody","can_delete":false,"product_type":"c1","uid":1115236,"ip_address":"","ucode":"FBA17FD06E96AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/64/d387f3f5.jpg","comment_is_top":false,"comment_ctime":1553562078,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553562078","product_id":100007101,"comment_content":"老师这个段子手属性太强了","like_count":0},{"had_liked":false,"id":79533,"user_name":"且听疯吟","can_delete":false,"product_type":"c1","uid":1159459,"ip_address":"","ucode":"B010B16E5465F4","user_header":"https://static001.geekbang.org/account/avatar/00/11/b1/23/5df1f341.jpg","comment_is_top":false,"comment_ctime":1553505667,"is_pvip":false,"replies":[{"id":"50223","content":"对的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567827177,"ip_address":"","comment_id":79533,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553505667","product_id":100007101,"comment_content":"ping的过程如果跨路由或者网关的的话就会比较复杂。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444531,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567827177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78750,"user_name":"大坏狐狸","can_delete":false,"product_type":"c1","uid":1325678,"ip_address":"","ucode":"5044F89A505C5B","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/6e/e39e90ca.jpg","comment_is_top":false,"comment_ctime":1553229610,"is_pvip":false,"replies":[{"id":"50229","content":"哈哈，大乘佛法","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567827335,"ip_address":"","comment_id":78750,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553229610","product_id":100007101,"comment_content":"一看到西游记，我就乐。为什么我买这个课程，就是因为看到刘老师的，趣谈网络协议的一篇文章，讲的就是大乘佛法。哈哈，来取取经。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444221,"discussion_content":"哈哈，大乘佛法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567827335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78376,"user_name":"桂城老托尼","can_delete":false,"product_type":"c1","uid":1306032,"ip_address":"","ucode":"139E4B8EE88B79","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcxSpNMqwqyicMvdOSr9ic0p1ABiauHnv7g7YQVSJuoHPoQbYDu3YzdpgmSAk2KricUBQ5yibWBWIq75w/132","comment_is_top":false,"comment_ctime":1553134373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553134373","product_id":100007101,"comment_content":"听老师讲课，需要对比着书上的原理动手实践","like_count":0},{"had_liked":false,"id":77808,"user_name":"蜉蝣","can_delete":false,"product_type":"c1","uid":1229070,"ip_address":"","ucode":"77CF92496855D4","user_header":"https://static001.geekbang.org/account/avatar/00/12/c1/0e/2b987d54.jpg","comment_is_top":false,"comment_ctime":1553003211,"is_pvip":false,"replies":[{"id":"50234","content":"谢谢","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567827447,"ip_address":"","comment_id":77808,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553003211","product_id":100007101,"comment_content":"以为：与其说老师比喻太用力，不如说自己的抽象能力、知识提炼能力太差。这就像是语文课上学了一篇大师的文章，语文老师说，你们来把文章讲了什么总结一下，结果下面人一个个目瞪口呆。——请多从自身找原因。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443861,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567827447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75355,"user_name":"云计算小菜鸟","can_delete":false,"product_type":"c1","uid":1146734,"ip_address":"","ucode":"D32CA551ACCF56","user_header":"https://static001.geekbang.org/account/avatar/00/11/7f/6e/863e4b2a.jpg","comment_is_top":false,"comment_ctime":1552382699,"is_pvip":false,"replies":[{"id":"50257","content":"中间设备，找不到下一跳，就返回","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567828185,"ip_address":"","comment_id":75355,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552382699","product_id":100007101,"comment_content":"初学者问一个问题:每种种类的icmp差错报文都是什么设备返回的？比如如果是网络不可达类型的，具体是哪一个设备返回的这个错误报文呢？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442871,"discussion_content":"中间设备，找不到下一跳，就返回","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567828185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72904,"user_name":"senekis","can_delete":false,"product_type":"c1","uid":1446025,"ip_address":"","ucode":"CD88681F0278FD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erTlRJ6skf7iawAeqNfIT1PPgjD7swUdRIRkX1iczjj97GNrxnsnn3QuOhkVbCLgFYAm7sMZficNTSbA/132","comment_is_top":false,"comment_ctime":1551753206,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1551753206","product_id":100007101,"comment_content":"老师比喻的很好，以前没有理解好的命令和协议有了更进一步的认识，以前都是死记硬背的，帮助很大，谢谢老师","like_count":0},{"had_liked":false,"id":67856,"user_name":"卡萨布兰卡","can_delete":false,"product_type":"c1","uid":1137379,"ip_address":"","ucode":"0A4C8E99BA6E83","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/e3/dec478ac.jpg","comment_is_top":false,"comment_ctime":1550301186,"is_pvip":false,"replies":[{"id":"25982","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1551440795,"ip_address":"","comment_id":67856,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550301186","product_id":100007101,"comment_content":"mac层只会获取mac头，不会去获取ip头的吧，ip头是要ip层去获取的吧","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439402,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551440795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":59592,"user_name":"...","can_delete":false,"product_type":"c1","uid":1142098,"ip_address":"","ucode":"9D73E00133C236","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/52/404912c3.jpg","comment_is_top":false,"comment_ctime":1547390197,"is_pvip":false,"replies":[{"id":"25786","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1551422900,"ip_address":"","comment_id":59592,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547390197","product_id":100007101,"comment_content":"老师 traceroute如果是主机不可达会返回icmp吗","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436364,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551422900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58252,"user_name":"herongwei","can_delete":false,"product_type":"c1","uid":1153928,"ip_address":"","ucode":"E4158BF7AD2E70","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/88/34c171f1.jpg","comment_is_top":false,"comment_ctime":1547019119,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547019119","product_id":100007101,"comment_content":"ICMP 差错报文的例子，老师举的例子真是太生动形象了，科班出身的人真是看的得劲啊，哈哈哈","like_count":0},{"had_liked":false,"id":57767,"user_name":"古夜","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1546907152,"is_pvip":false,"replies":[{"id":"25773","content":"网络协议，自顶向下方法","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1551422121,"ip_address":"","comment_id":57767,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546907152","product_id":100007101,"comment_content":"首先我觉得老师的必须没问题，但那是针对有底子的人来说。对于没接触过网络协议的人靠比喻对他们没有一个清晰的认识。老师能推荐一本协议的书吗，能和课程配套看最好，这样很多问题就迎刃而解了。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435749,"discussion_content":"网络协议，自顶向下方法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551422121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49945,"user_name":"young","can_delete":false,"product_type":"c1","uid":1020180,"ip_address":"","ucode":"7DD0E833D5E0C9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/14/946c2aa6.jpg","comment_is_top":false,"comment_ctime":1544796118,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544796118","product_id":100007101,"comment_content":"哪些不同情况下的差错报文都是谁回的呢？","like_count":0},{"had_liked":false,"id":47421,"user_name":"艾子晴👟💓（Veronica Cheng）","can_delete":false,"product_type":"c1","uid":1274404,"ip_address":"","ucode":"9D09480A56D66F","user_header":"https://static001.geekbang.org/account/avatar/00/13/72/24/4640fd72.jpg","comment_is_top":false,"comment_ctime":1544143392,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544143392","product_id":100007101,"comment_content":"同样非计算机专业 我觉得比喻得很好 听不懂的人 自己查查 或者再听一听 或者留言具体的问题呗","like_count":0},{"had_liked":false,"id":45676,"user_name":"Untitled","can_delete":false,"product_type":"c1","uid":1039464,"ip_address":"","ucode":"8DD6ABA3E81A2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","comment_is_top":false,"comment_ctime":1543745003,"is_pvip":false,"replies":[{"id":"16451","content":"不用纠结层，实践中用不到，如果考试，教材说哪层就是哪层","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1543839844,"ip_address":"","comment_id":45676,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1543745003","product_id":100007101,"comment_content":"老师，有个概念比较吃力。ICMP属于几层协议呢，如果属于网络层协议，其又怎么能故意设置端口不可达、协议不可达等差错报文呢？，属于哪一层协议，是通过什么规则来判断的？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431151,"discussion_content":"不用纠结层，实践中用不到，如果考试，教材说哪层就是哪层","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543839844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43733,"user_name":"joy","can_delete":false,"product_type":"c1","uid":1089856,"ip_address":"","ucode":"FE925809143BDD","user_header":"https://static001.geekbang.org/account/avatar/00/10/a1/40/3f328ef5.jpg","comment_is_top":false,"comment_ctime":1543285226,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543285226","product_id":100007101,"comment_content":"老师，第一个图中的请求与“相应”应该是响应","like_count":0},{"had_liked":false,"id":42475,"user_name":"Ada","can_delete":false,"product_type":"c1","uid":1227248,"ip_address":"","ucode":"FFF580C333DC04","user_header":"https://static001.geekbang.org/account/avatar/00/12/b9/f0/cf8e01e5.jpg","comment_is_top":false,"comment_ctime":1542960038,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542960038","product_id":100007101,"comment_content":"老师讲的很清晰，比喻特别适合无基础的，自己用心听，不懂的百度再问老师，可以理解的80%，还是学习到很多。就是我的语音听一会儿就自动停了，过了一会儿就又开始自己播放了，就是这么设置的，还是有问题呀","like_count":0},{"had_liked":false,"id":41658,"user_name":"周曙光爱学习","can_delete":false,"product_type":"c1","uid":1022920,"ip_address":"","ucode":"98EAB6EBAB34B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/c8/665100a3.jpg","comment_is_top":false,"comment_ctime":1542815180,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1542815180","product_id":100007101,"comment_content":"光看或者光听肯定是有些枯燥且不易懂的，用wireshark抓个包对照文字看的话那么就一目了然了","like_count":0,"discussions":[{"author":{"id":1635932,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKSEVQdSoW2SwDic2U3uIibsa1bH3qSSzCvYTN5xHC5ppGDS2DBxL1KcbuxZ6Ez6kyOGj1F4toiaiazBA/132","nickname":"PeiHongbing","note":"","ucode":"F115AD8740B0DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288717,"discussion_content":"求指导","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593848401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37582,"user_name":"扬～","can_delete":false,"product_type":"c1","uid":1208163,"ip_address":"","ucode":"6FA7D8FE188341","user_header":"https://static001.geekbang.org/account/avatar/00/12/6f/63/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1541644527,"is_pvip":false,"replies":[{"id":"13569","content":"发送的是udp","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1541693546,"ip_address":"","comment_id":37582,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1541644527","product_id":100007101,"comment_content":"ICMP协议不经过传输层，那如何知道端口不可达呢？  <br>traceroute的通过不断增加TTL来获知到目的地经过的路由器信息，但是每个数据包的路径都是根据当时的网络环境动态确定的路由路径，所以TTL为5走的路径可能与TTL为3走的不一样。那么我们最终得到的不同TTL走到的最远节点，但是这些节点连接起来可能不能到达最终的主机啊，所以得到这样的意义何在呢","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428410,"discussion_content":"发送的是udp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541693546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":35439,"user_name":"小羊","can_delete":false,"product_type":"c1","uid":1181968,"ip_address":"","ucode":"AD3EDB239E3EE3","user_header":"https://static001.geekbang.org/account/avatar/00/12/09/10/10026ba8.jpg","comment_is_top":false,"comment_ctime":1540566848,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1540566848","product_id":100007101,"comment_content":"tracerouter 设置不分片，但是mtu的check在mac层，mac层已经报错了，为什么还会返回icmp（ip）层","like_count":0},{"had_liked":false,"id":31506,"user_name":"搬铁少年ai","can_delete":false,"product_type":"c1","uid":1031045,"ip_address":"","ucode":"01D4A830A088D7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/85/191eea69.jpg","comment_is_top":false,"comment_ctime":1539220647,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539220647","product_id":100007101,"comment_content":"我到觉得比喻很好，听完会心一笑。当然，我对基本的力量知识已经有所掌握理解，这可能是一个原因","like_count":0},{"had_liked":false,"id":28803,"user_name":"小先生","can_delete":false,"product_type":"c1","uid":1055214,"ip_address":"","ucode":"E5F2052E0323C0","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/ee/e395a35e.jpg","comment_is_top":false,"comment_ctime":1538147185,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538147185","product_id":100007101,"comment_content":"ICMP一般认为属于网络层的，和IP同一层，是管理和控制IP的一种协议，而UDP和TCP是传输层，所以UDP出错可以返回ICMP差错报文","like_count":0},{"had_liked":false,"id":27710,"user_name":"dovefi","can_delete":false,"product_type":"c1","uid":1007670,"ip_address":"","ucode":"9F8C59F095B187","user_header":"https://static001.geekbang.org/account/avatar/00/0f/60/36/1848c2b7.jpg","comment_is_top":false,"comment_ctime":1537931678,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537931678","product_id":100007101,"comment_content":"ICMP协议本身有太多种代码了，每一种代码一个编号，所以很容易混乱，即使过了一遍《tcp&#47;ip协议》卷一原理清晰，但是对于记住代码还是很费劲","like_count":0},{"had_liked":false,"id":25670,"user_name":"马若飞","can_delete":false,"product_type":"c1","uid":1046394,"ip_address":"","ucode":"3D0327329A10AE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","comment_is_top":false,"comment_ctime":1537407324,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537407324","product_id":100007101,"comment_content":"张将军真可怜","like_count":0},{"had_liked":false,"id":25165,"user_name":"王佳","can_delete":false,"product_type":"c1","uid":1177382,"ip_address":"","ucode":"C447B807ED4CDA","user_header":"https://static001.geekbang.org/account/avatar/00/11/f7/26/0e254010.jpg","comment_is_top":false,"comment_ctime":1537259851,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1537259851","product_id":100007101,"comment_content":"老师，你好。我想问一下为什么对具有多播地址的数据报，都不发送ICMP差错报告报文<br>对具有特殊地址（例如127.0.0.0或0.0.0.0）的数据报，都不发送ICMP差错报告报文。<br>等等这些不发送ICMP差错报文的情况，为什么不发送ICMP差错报文<br>","like_count":0},{"had_liked":false,"id":24529,"user_name":"简","can_delete":false,"product_type":"c1","uid":1229332,"ip_address":"","ucode":"568BDA58B63801","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/14/bfd5e94e.jpg","comment_is_top":false,"comment_ctime":1537110642,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537110642","product_id":100007101,"comment_content":"老师这些我都知道，但你一讲我就感觉学的知识活了","like_count":0},{"had_liked":false,"id":24526,"user_name":"简","can_delete":false,"product_type":"c1","uid":1229332,"ip_address":"","ucode":"568BDA58B63801","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/14/bfd5e94e.jpg","comment_is_top":false,"comment_ctime":1537109666,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537109666","product_id":100007101,"comment_content":"作者你知道你要成就多少给技术高手不？简直爱死你了","like_count":0},{"had_liked":false,"id":24489,"user_name":"朝闻道","can_delete":false,"product_type":"c1","uid":1203260,"ip_address":"","ucode":"F7F2120A660285","user_header":"","comment_is_top":false,"comment_ctime":1537077695,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537077695","product_id":100007101,"comment_content":"有些ip地址mtr不通，ping可以通，请问这是为什么？","like_count":0},{"had_liked":false,"id":24042,"user_name":"Tom","can_delete":false,"product_type":"c1","uid":1109832,"ip_address":"","ucode":"00EEDE4CB11776","user_header":"","comment_is_top":false,"comment_ctime":1536770268,"is_pvip":false,"replies":[{"id":"8800","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1536799233,"ip_address":"","comment_id":24042,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536770268","product_id":100007101,"comment_content":"ICMP报文类型有多种，最常用的是查询报文类型是主动请求的，还有一种差错报文类型不用主动请求的；Traceroute发udp包的过程并没有主动发送ICMP请求报文，是路上碰到的路由器觉得有问题返回的ICMP差错报文。是这么理解吗？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423818,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536799233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22935,"user_name":"土拨鼠","can_delete":false,"product_type":"c1","uid":1131456,"ip_address":"","ucode":"303EA0EBB10D86","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/c0/037ee041.jpg","comment_is_top":false,"comment_ctime":1536052571,"is_pvip":false,"replies":[{"id":"8297","content":"谁用谁知道，哈哈","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1536083240,"ip_address":"","comment_id":22935,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536052571","product_id":100007101,"comment_content":"听了都说好","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423330,"discussion_content":"谁用谁知道，哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536083240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20865,"user_name":"冰封飞飞","can_delete":false,"product_type":"c1","uid":1167803,"ip_address":"","ucode":"D9675F479A746F","user_header":"https://static001.geekbang.org/account/avatar/00/11/d1/bb/617fbffa.jpg","comment_is_top":false,"comment_ctime":1534779274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1534779274","product_id":100007101,"comment_content":"1.icmp报文有校验和，如果出错，校验失败会丢包<br>2.icmp也是有ip头的，在公网上面转发和正常ip报文应该一样","like_count":0},{"had_liked":false,"id":20182,"user_name":"Cola","can_delete":false,"product_type":"c1","uid":1048859,"ip_address":"","ucode":"67A27A8DEF42E2","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/1b/24db90c7.jpg","comment_is_top":false,"comment_ctime":1534299434,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1534299434","product_id":100007101,"comment_content":"纠正一下对上一条留言，icmp应该没有纠错机制的，出错了只能等待超时。","like_count":0},{"had_liked":false,"id":20178,"user_name":"Cola","can_delete":false,"product_type":"c1","uid":1048859,"ip_address":"","ucode":"67A27A8DEF42E2","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/1b/24db90c7.jpg","comment_is_top":false,"comment_ctime":1534298561,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1534298561","product_id":100007101,"comment_content":"对于问题二，ping的过程应该是这样的 1. 查看这个ip是不是在同一网段 2.发现不在同一网段，找到设置到本机网关的ip 3.通过arp协议拿到网关mac地址并发包到网关 4.网关解包，发现目的ip是在a口出，转发该包 5后续流程相同<br>对于问题一，差错报文自己出错是不是有自己的重试机制，如果多次重试无效就超时？","like_count":0},{"had_liked":false,"id":19199,"user_name":"慢熊胖胖跑","can_delete":false,"product_type":"c1","uid":1065065,"ip_address":"","ucode":"58523B53D45C7F","user_header":"https://static001.geekbang.org/account/avatar/00/10/40/69/f86a1526.jpg","comment_is_top":false,"comment_ctime":1533705182,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1533705182","product_id":100007101,"comment_content":"ping包的顺序字段有些不理解，我ping一次不是就一个包吗？那里来的顺序？","like_count":0,"discussions":[{"author":{"id":1076899,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6e/a3/bec136c0.jpg","nickname":"cxzm","note":"","ucode":"E94ACEF9D507A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1088,"discussion_content":"ping不主动结束 会一直执行的  win是默认4次","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562315335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18017,"user_name":"fantast","can_delete":false,"product_type":"c1","uid":1160759,"ip_address":"","ucode":"08EB075505D615","user_header":"https://static001.geekbang.org/account/avatar/00/11/b6/37/7dfbf5a5.jpg","comment_is_top":false,"comment_ctime":1533087485,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1533087485","product_id":100007101,"comment_content":"我想问，发送一个icmp请求，无论出错还是请求成功，是由谁回应呢，即谁发送查询结果或查询报错报文呢？","like_count":0},{"had_liked":false,"id":17825,"user_name":"SimonKoh","can_delete":false,"product_type":"c1","uid":1115932,"ip_address":"","ucode":"94A91BA4C69FD1","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/1c/a255e6ac.jpg","comment_is_top":false,"comment_ctime":1532969410,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532969410","product_id":100007101,"comment_content":"太赞了！ 这个比喻能感觉到老师下了好大的功夫，谢谢老师😁","like_count":0},{"had_liked":false,"id":16316,"user_name":"杨领well","can_delete":false,"product_type":"c1","uid":1145650,"ip_address":"","ucode":"3974A03855168C","user_header":"https://static001.geekbang.org/account/avatar/00/11/7b/32/60089a62.jpg","comment_is_top":false,"comment_ctime":1531879180,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531879180","product_id":100007101,"comment_content":"以这个专栏为提纲，在看《TCPIP详解卷一》相关内容前，先对大概内容有个全局的了解。这是我现在的学习方式。","like_count":0},{"had_liked":false,"id":14858,"user_name":"张君华","can_delete":false,"product_type":"c1","uid":1079384,"ip_address":"","ucode":"CAD49325AB4C04","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/58/84f38396.jpg","comment_is_top":false,"comment_ctime":1530707224,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530707224","product_id":100007101,"comment_content":"文中描述TTL的递增获取网络设备信息，TTL和跳数有什么区别？","like_count":0},{"had_liked":false,"id":13415,"user_name":"-Nao剧-","can_delete":false,"product_type":"c1","uid":1154700,"ip_address":"","ucode":"3B537EE81A416D","user_header":"https://static001.geekbang.org/account/avatar/00/11/9e/8c/27b04935.jpg","comment_is_top":false,"comment_ctime":1529598335,"is_pvip":false,"replies":[{"id":"4521","content":"可以有下层没上层，不可以有上层没下层","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1529682502,"ip_address":"","comment_id":13415,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1529598335","product_id":100007101,"comment_content":"老师你好～有两个问题请教下：<br>1、icmp协议是属于哪一层的协议？<br>2、之前有说过一个网络包必须是完整的，那icmp的包是否也有应用层传输层的数据呢？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419641,"discussion_content":"可以有下层没上层，不可以有上层没下层","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1529682502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":13208,"user_name":"超","can_delete":false,"product_type":"c1","uid":1131107,"ip_address":"","ucode":"B20F7A2370792C","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/63/a08003a6.jpg","comment_is_top":false,"comment_ctime":1529455684,"is_pvip":false,"replies":[{"id":"4444","content":"ip里面有的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1529472296,"ip_address":"","comment_id":13208,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1529455684","product_id":100007101,"comment_content":"Transroute 发送udp包，设置ttl为1  udp头里没有头ttl，具体怎么发送跟设置呢？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419576,"discussion_content":"ip里面有的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1529472296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11557,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1528199782,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528199782","product_id":100007101,"comment_content":"“tracerouter发送的包是什么程序给的响应？ 是目标主机的traceroute程序？还是ICMP”，我觉得应该是目标主机的内核机制响应的，这么理解对不对","like_count":0},{"had_liked":false,"id":11349,"user_name":"Cloud","can_delete":false,"product_type":"c1","uid":1147061,"ip_address":"","ucode":"86B1C459EC9F82","user_header":"https://static001.geekbang.org/account/avatar/00/11/80/b5/f59d92f1.jpg","comment_is_top":false,"comment_ctime":1528080494,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528080494","product_id":100007101,"comment_content":"云计算新人期待后续课程😁","like_count":0},{"had_liked":false,"id":11189,"user_name":"Smallfly","can_delete":false,"product_type":"c1","uid":1013841,"ip_address":"","ucode":"D388D5E0249A69","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/51/4790e13e.jpg","comment_is_top":false,"comment_ctime":1527915573,"is_pvip":false,"replies":[{"id":"3566","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527934216,"ip_address":"","comment_id":11189,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1527915573","product_id":100007101,"comment_content":"前面有一篇文章写道“你就可以靠吼了，大声喊身份证 XXXX 的是哪位？我听到了，我就会站起来说，是我啊。”<br><br>这里把 Mac 地址比喻成身份证的例子，不是在广播么……","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418746,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527934216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11164,"user_name":"katsueiki","can_delete":false,"product_type":"c1","uid":1016400,"ip_address":"","ucode":"0B4DF961583A83","user_header":"https://static001.geekbang.org/account/avatar/00/0f/82/50/d70af165.jpg","comment_is_top":false,"comment_ctime":1527905830,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1527905830","product_id":100007101,"comment_content":"icmp是三层协议吧，请问icmp和普通的ip协议有什么区别？","like_count":0},{"had_liked":false,"id":11145,"user_name":"9527","can_delete":false,"product_type":"c1","uid":1063642,"ip_address":"","ucode":"23D255058D98BF","user_header":"https://static001.geekbang.org/account/avatar/00/10/3a/da/4c4cc7f8.jpg","comment_is_top":false,"comment_ctime":1527900295,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1527900295","product_id":100007101,"comment_content":"刘老师，想问一下，这些协议的格式需要都掌握吗？","like_count":0},{"had_liked":false,"id":11128,"user_name":"天空白云","can_delete":false,"product_type":"c1","uid":1138104,"ip_address":"","ucode":"BC073B70F5D981","user_header":"https://static001.geekbang.org/account/avatar/00/11/5d/b8/740c9b30.jpg","comment_is_top":false,"comment_ctime":1527867093,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1527867093","product_id":100007101,"comment_content":"请教下老师，apm 方面，首包时间精准定义是什么？有人说是网络请求发完算起，到第一个返回到数据包。 另外有说是dns，建立连接也算起来了。有点迷糊了。老师辛苦了！","like_count":0}]}