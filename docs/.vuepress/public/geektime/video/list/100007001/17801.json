{"id":17801,"title":"92 | Hystrix 主要配置项","content":"无","comments":[{"had_liked":false,"id":267099,"user_name":"Daniel","can_delete":false,"product_type":"c3","uid":1441541,"ip_address":"","ucode":"E588A4446722FB","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/05/626f46bf.jpg","comment_is_top":false,"comment_ctime":1607596319,"is_pvip":false,"replies":[{"id":97204,"content":"你这个服务是很慢的吗？如果是很慢(超过5秒相应)，那么缺省的信号量限制，或者线程池大小限制会起作用，默认都是10个，超过10个会拒绝。\n参考：\nhttps:&#47;&#47;github.com&#47;Netflix&#47;Hystrix&#47;wiki&#47;Configuration#execution.isolation.semaphore.maxConcurrentRequests\nhttps:&#47;&#47;github.com&#47;Netflix&#47;Hystrix&#47;wiki&#47;Configuration#coreSize\n\n建议换一个能快速响应的普通服务做测试，如果没有类似问题，那么可以排除法定位为是具体服务响应慢的问题。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1607867378,"ip_address":"","comment_id":267099,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，5s内调用接口超过10次以上，只有10次成功请求了，其余的请求全部熔断（测试调用27次接口，17次是熔断的；测试调用45次接口，35次请求是熔断的）。可能是什么原因","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511505,"discussion_content":"你这个服务是很慢的吗？如果是很慢(超过5秒相应)，那么缺省的信号量限制，或者线程池大小限制会起作用，默认都是10个，超过10个会拒绝。\n参考：\nhttps://github.com/Netflix/Hystrix/wiki/Configuration#execution.isolation.semaphore.maxConcurrentRequests\nhttps://github.com/Netflix/Hystrix/wiki/Configuration#coreSize\n\n建议换一个能快速响应的普通服务做测试，如果没有类似问题，那么可以排除法定位为是具体服务响应慢的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607867378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542987,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/15ab499a.jpg","nickname":"风轻扬","note":"","ucode":"DB972F2DF059C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611083,"discussion_content":"应该就是老师说的这个原因","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679922115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77170,"user_name":"Geek_0quh3e","can_delete":false,"product_type":"c3","uid":1226196,"ip_address":"","ucode":"0629888E7A5E16","user_header":"https://static001.geekbang.org/account/avatar/00/12/b5/d4/e58e39f0.jpg","comment_is_top":false,"comment_ctime":1552875054,"is_pvip":false,"replies":[{"id":28373,"content":"你好，hystrix采用滚筒式统计(rolling buckets stats)，默认10秒钟滚动窗口，默认1秒钟一个桶，每一秒的数据都记录在当前桶中，下一秒创建新桶，移除最老一个桶，计算时根据这个10个桶里头数据进行汇总计算。后面第11部分有解释。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1552995211,"ip_address":"","comment_id":77170,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师，10s窗口指的是什么？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443618,"discussion_content":"你好，hystrix采用滚筒式统计(rolling buckets stats)，默认10秒钟滚动窗口，默认1秒钟一个桶，每一秒的数据都记录在当前桶中，下一秒创建新桶，移除最老一个桶，计算时根据这个10个桶里头数据进行汇总计算。后面第11部分有解释。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552995211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28059,"user_name":"大卫","can_delete":false,"product_type":"c3","uid":1019127,"ip_address":"","ucode":"D861709E483793","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/f7/a4de6f64.jpg","comment_is_top":false,"comment_ctime":1538002286,"is_pvip":false,"replies":[{"id":10670,"content":"默认按10秒钟滚动，一秒钟一个桶；20请求阈值是另外一个概念，两者不直接相关。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1538479555,"ip_address":"","comment_id":28059,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师，最后一个图中的10秒钟，是默认的么，是跟bucket和默认的20请求阈值有关吧，每个bucket是一秒","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425129,"discussion_content":"默认按10秒钟滚动，一秒钟一个桶；20请求阈值是另外一个概念，两者不直接相关。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538479555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}