{"id":129754,"title":"28 | 如何在原生应用中混编Flutter工程？","content":"<p>你好，我是陈航。今天，我来和你聊聊如何在原生应用中接入Flutter。</p><p>在前面两篇文章中，我与你分享了如何在Dart层引入Android/iOS平台特定的能力，来提升App的功能体验。</p><p>使用Flutter从头开始写一个App，是一件轻松惬意的事情。但，对于成熟产品来说，完全摒弃原有App的历史沉淀，而全面转向Flutter并不现实。用Flutter去统一iOS/Android技术栈，把它作为已有原生App的扩展能力，通过逐步试验有序推进从而提升终端开发效率，可能才是现阶段Flutter最具吸引力的地方。</p><p>那么，Flutter工程与原生工程该如何组织管理？不同平台的Flutter工程打包构建产物该如何抽取封装？封装后的产物该如何引入原生工程？原生工程又该如何使用封装后的Flutter能力？</p><p>这些问题使得在已有原生App中接入Flutter看似并不是一件容易的事情。那接下来，我就和你介绍下如何在原生App中以最自然的方式接入Flutter。</p><h2>准备工作</h2><p>既然是要在原生应用中混编Flutter，相信你一定已经准备好原生应用工程来实施今天的改造了。如果你还没有准备好也没关系，我会以一个最小化的示例和你演示这个改造过程。</p><!-- [[[read_end]]] --><p>首先，我们分别用Xcode与Android Studio快速建立一个只有首页的基本工程，工程名分别为iOSDemo与AndroidDemo。</p><p>这时，Android工程就已经准备好了；而对于iOS工程来说，由于基本工程并不支持以组件化的方式管理项目，因此我们还需要多做一步，将其改造成使用CocoaPods管理的工程，也就是要在iOSDemo根目录下创建一个只有基本信息的Podfile文件：</p><pre><code>use_frameworks!\nplatform :ios, '8.0'\ntarget 'iOSDemo' do\n#todo\nend\n</code></pre><p>然后，在命令行输入pod install后，会自动生成一个iOSDemo.xcworkspace文件，这时我们就完成了iOS工程改造。</p><h2>Flutter混编方案介绍</h2><p>如果你想要在已有的原生App里嵌入一些Flutter页面，有两个办法：</p><ul>\n<li>将原生工程作为Flutter工程的子工程，由Flutter统一管理。这种模式，就是统一管理模式。</li>\n<li>将Flutter工程作为原生工程共用的子模块，维持原有的原生工程管理方式不变。这种模式，就是三端分离模式。</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/43/e3/43959076df5aadeb751dff0d7b1134e3.png?wh=1304*326\" alt=\"\"></p><center><span class=\"reference\">图1 Flutter混编工程管理方式</span></center><p>由于Flutter早期提供的混编方式能力及相关资料有限，国内较早使用Flutter混合开发的团队大多使用的是统一管理模式。但是，随着功能迭代的深入，这种方案的弊端也随之显露，不仅三端（Android、iOS、Flutter）代码耦合严重，相关工具链耗时也随之大幅增长，导致开发效率降低。</p><p>所以，后续使用Flutter混合开发的团队陆续按照三端代码分离的模式来进行依赖治理，实现了Flutter工程的轻量级接入。</p><p>除了可以轻量级接入，三端代码分离模式把Flutter模块作为原生工程的子模块，还可以快速实现Flutter功能的“热插拔”，降低原生工程的改造成本。而Flutter工程通过Android Studio进行管理，无需打开原生工程，可直接进行Dart代码和原生代码的开发调试。</p><p><strong>三端工程分离模式的关键是抽离Flutter工程，将不同平台的构建产物依照标准组件化的形式进行管理</strong>，即Android使用aar、iOS使用pod。换句话说，接下来介绍的混编方案会将Flutter模块打包成aar和pod，这样原生工程就可以像引用其他第三方原生组件库那样快速接入Flutter了。</p><p>听起来是不是很兴奋？接下来，我们就开始正式采用三端分离模式来接入Flutter模块吧。</p><h2>集成Flutter</h2><p>我曾在前面的文章中提到，Flutter的工程结构比较特殊，包括Flutter工程和原生工程的目录（即iOS和Android两个目录）。在这种情况下，原生工程就会依赖于Flutter相关的库和资源，从而无法脱离父目录进行独立构建和运行。</p><p>原生工程对Flutter的依赖主要分为两部分：</p><ul>\n<li>Flutter库和引擎，也就是Flutter的Framework库和引擎库；</li>\n<li>Flutter工程，也就是我们自己实现的Flutter模块功能，主要包括Flutter工程lib目录下的Dart代码实现的这部分功能。</li>\n</ul><p>在已经有原生工程的情况下，我们需要在同级目录创建Flutter模块，构建iOS和Android各自的Flutter依赖库。这也很好实现，Flutter就为我们提供了这样的命令。我们只需要在原生项目的同级目录下，执行Flutter命令创建名为flutter_library的模块即可：</p><pre><code>Flutter create -t module flutter_library\n</code></pre><p>这里的Flutter模块，也是Flutter工程，我们用Android Studio打开它，其目录如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/61/89/61d3530bcf7a23e1708c536b53ced789.png?wh=872*1268\" alt=\"\"></p><center><span class=\"reference\">图2 Flutter模块工程结构</span></center><p>可以看到，和传统的Flutter工程相比，Flutter模块工程也有内嵌的Android工程与iOS工程，因此我们可以像普通工程一样使用Android Studio进行开发调试。</p><p>仔细查看可以发现，<strong>Flutter模块有一个细微的变化</strong>：Android工程下多了一个Flutter目录，这个目录下的build.gradle配置就是我们构建aar的打包配置。这就是模块工程既能像Flutter传统工程一样使用Android Studio开发调试，又能打包构建aar与pod的秘密。</p><p>实际上，iOS工程的目录结构也有细微变化，但这个差异并不影响打包构建，因此我就不再展开了。</p><p>然后，我们打开main.dart文件，将其逻辑更新为以下代码逻辑，即一个写着“Hello from Flutter”的全屏红色的Flutter Widget：</p><pre><code>import 'package:flutter/material.dart';\nimport 'dart:ui';\n\nvoid main() =&gt; runApp(_widgetForRoute(window.defaultRouteName));//独立运行传入默认路由\n\nWidget _widgetForRoute(String route) {\n  switch (route) {\n    default:\n      return MaterialApp(\n        home: Scaffold(\n          backgroundColor: const Color(0xFFD63031),//ARGB红色\n          body: Center(\n            child: Text(\n              'Hello from Flutter', //显示的文字\n              textDirection: TextDirection.ltr,\n              style: TextStyle(\n                fontSize: 20.0,\n                color: Colors.blue,\n              ),\n            ),\n          ),\n        ),\n      );\n  }\n}\n</code></pre><p>注意：我们创建的Widget实际上是包在一个switch-case语句中的。这是因为封装的Flutter模块一般会有多个页面级Widget，原生App代码则会通过传入路由标识字符串，告诉Flutter究竟应该返回何种Widget。为了简化案例，在这里我们忽略标识字符串，统一返回一个MaterialApp。</p><p>接下来，我们要做的事情就是把这段代码编译打包，构建出对应的Android和iOS依赖库，实现原生工程的接入。</p><p>现在，我们首先来看看Android工程如何接入。</p><h3>Android模块集成</h3><p>之前我们提到原生工程对Flutter的依赖主要分为两部分，对应到Android平台，这两部分分别是：</p><ul>\n<li>Flutter库和引擎，也就是icudtl.dat、libFlutter.so，还有一些class文件。这些文件都封装在Flutter.jar中。</li>\n<li>Flutter工程产物，主要包括应用程序数据段isolate_snapshot_data、应用程序指令段isolate_snapshot_instr、虚拟机数据段vm_snapshot_data、虚拟机指令段vm_snapshot_instr、资源文件Flutter_assets。</li>\n</ul><p>搞清楚Flutter工程的Android编译产物之后，我们对Android的Flutter依赖抽取步骤如下：</p><p>首先在Flutter_library的根目录下，执行aar打包构建命令：</p><pre><code>Flutter build apk --debug\n</code></pre><p>这条命令的作用是编译工程产物，并将Flutter.jar和工程产物编译结果封装成一个aar。你很快就会想到，如果是构建release产物，只需要把debug换成release就可以了。</p><p><strong>其次</strong>，打包构建的flutter-debug.aar位于.android/Flutter/build/outputs/aar/目录下，我们把它拷贝到原生Android工程AndroidDemo的app/libs目录下，并在App的打包配置build.gradle中添加对它的依赖:</p><pre><code>...\nrepositories {\n    flatDir {\n        dirs 'libs'   // aar目录\n    }\n}\nandroid {\n    ...\n    compileOptions {\n        sourceCompatibility 1.8 //Java 1.8\n        targetCompatibility 1.8 //Java 1.8\n    }\n    ...\n}\n\ndependencies {\n    ...\n    implementation(name: 'flutter-debug', ext: 'aar')//Flutter模块aar\n    ...\n}\n</code></pre><p>Sync一下，Flutter模块就被添加到了Android项目中。</p><p>再次，我们试着改一下MainActivity.java的代码，把它的contentView改成Flutter的widget：</p><pre><code>protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    View FlutterView = Flutter.createView(this, getLifecycle(), &quot;defaultRoute&quot;); //传入路由标识符\n    setContentView(FlutterView);//用FlutterView替代Activity的ContentView\n}\n</code></pre><p>最后点击运行，可以看到一个写着“Hello from Flutter”的全屏红色的Flutter Widget就展示出来了。至此，我们完成了Android工程的接入。</p><p><img src=\"https://static001.geekbang.org/resource/image/36/5b/3648bb9b0ec126fe07963d5e4cbede5b.png?wh=1440*2560\" alt=\"\"></p><center><span class=\"reference\">图3 Android工程接入示例</span></center><h3>iOS模块集成</h3><p>iOS工程接入的情况要稍微复杂一些。在iOS平台，原生工程对Flutter的依赖分别是：</p><ul>\n<li>Flutter库和引擎，即Flutter.framework；</li>\n<li>Flutter工程的产物，即App.framework。</li>\n</ul><p>iOS平台的Flutter模块抽取，实际上就是通过打包命令生成这两个产物，并将它们封装成一个pod供原生工程引用。</p><p>类似地，首先我们在Flutter_library的根目录下，执行iOS打包构建命令：</p><pre><code>Flutter build ios --debug\n</code></pre><p>这条命令的作用是编译Flutter工程生成两个产物：Flutter.framework和App.framework。同样，把debug换成release就可以构建release产物（当然，你还需要处理一下签名问题）。</p><p><strong>其次</strong>，在iOSDemo的根目录下创建一个名为FlutterEngine的目录，并把这两个framework文件拷贝进去。iOS的模块化产物工作要比Android多一个步骤，因为我们需要把这两个产物手动封装成pod。因此，我们还需要在该目录下创建FlutterEngine.podspec，即Flutter模块的组件定义：</p><pre><code>Pod::Spec.new do |s|\n  s.name             = 'FlutterEngine'\n  s.version          = '0.1.0'\n  s.summary          = 'XXXXXXX'\n  s.description      = &lt;&lt;-DESC\nTODO: Add long description of the pod here.\n                       DESC\n  s.homepage         = 'https://github.com/xx/FlutterEngine'\n  s.license          = { :type =&gt; 'MIT', :file =&gt; 'LICENSE' }\n  s.author           = { 'chenhang' =&gt; 'hangisnice@gmail.com' }\n  s.source       = { :git =&gt; &quot;&quot;, :tag =&gt; &quot;#{s.version}&quot; }\n  s.ios.deployment_target = '8.0'\n  s.ios.vendored_frameworks = 'App.framework', 'Flutter.framework'\nend\n</code></pre><p>pod lib lint一下，Flutter模块组件就已经做好了。趁热打铁，我们再修改Podfile文件把它集成到iOSDemo工程中：</p><pre><code>...\ntarget 'iOSDemo' do\n    pod 'FlutterEngine', :path =&gt; './'\nend\n</code></pre><p>pod install一下，Flutter模块就集成进iOS原生工程中了。</p><p>再次，我们试着修改一下AppDelegate.m的代码，把window的rootViewController改成FlutterViewController：</p><pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions\n\n{\n    self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n    FlutterViewController *vc = [[FlutterViewController alloc]init];\n    [vc setInitialRoute:@&quot;defaultRoute&quot;]; //路由标识符\n    self.window.rootViewController = vc;\n    [self.window makeKeyAndVisible];\n    return YES;\n}\n</code></pre><p>最后点击运行，一个写着“Hello from Flutter”的全屏红色的Flutter Widget也展示出来了。至此，iOS工程的接入我们也顺利搞定了。</p><p><img src=\"https://static001.geekbang.org/resource/image/a5/42/a511d31edbbbf2949763af49453ac642.png?wh=828*1792\" alt=\"\"></p><center><span class=\"reference\">图4 iOS工程接入示例</span></center><h2>总结</h2><p>通过分离Android、iOS和Flutter三端工程，抽离Flutter库和引擎及工程代码为组件库，以Android和iOS平台最常见的aar和pod形式接入原生工程，我们就可以低成本地接入Flutter模块，愉快地使用Flutter扩展原生App的边界了。</p><p>但，我们还可以做得更好。</p><p>如果每次通过构建Flutter模块工程，都是手动搬运Flutter编译产物，那很容易就会因为工程管理混乱导致Flutter组件库被覆盖，从而引发难以排查的Bug。而要解决此类问题的话，我们可以引入CI自动构建框架，把Flutter编译产物构建自动化，原生工程通过接入不同版本的构建产物，实现更优雅的三端分离模式。</p><p>而关于自动化构建，我会在后面的文章中和你详细介绍，这里就不再赘述了。</p><p>接下来，我们简单回顾一下今天的内容。</p><p>原生工程混编Flutter的方式有两种。一种是，将Flutter工程内嵌Android和iOS工程，由Flutter统一管理的集中模式；另一种是，将Flutter工程作为原生工程共用的子模块，由原生工程各自管理的三端工程分离模式。目前，业界采用的基本都是第二种方式。</p><p>而对于三端工程分离模式最主要的则是抽离Flutter工程，将不同平台的构建产物依照标准组件化的形式进行管理，即：针对Android平台打包构建生成aar，通过build.gradle进行依赖管理；针对iOS平台打包构建生成framework，将其封装成独立的pod，并通过podfile进行依赖管理。</p><p>我把今天分享所涉及到的知识点打包到了GitHub（<a href=\"https://github.com/cyndibaby905/28_module_page\">flutter_module_page</a>、<a href=\"https://github.com/cyndibaby905/28_iOSDemo\">iOS_demo</a>、<a href=\"https://github.com/cyndibaby905/28_AndroidDemo\">Android_Demo</a>）中，你可以下载下来，反复运行几次，加深理解与记忆。</p><h2>思考题</h2><p>最后，我给你下留一个思考题吧。</p><p>对于有资源依赖的Flutter模块工程而言，其打包构建的产物，以及抽离Flutter组件库的过程会有什么不同吗？</p><p>欢迎你在评论区给我留言分享你的观点，我会在下一篇文章中等待你！感谢你的收听，也欢迎你把这篇文章分享给更多的朋友一起阅读。</p><p></p>","neighbors":{"left":{"article_title":"27 | 如何在Dart层兼容Android/iOS平台特定实现？（二）","id":128510},"right":{"article_title":"29 | 混合开发，该用何种方案管理导航栈？","id":131234}},"comments":[{"had_liked":false,"id":215217,"user_name":"只是丶很孤单","can_delete":false,"product_type":"c1","uid":1369877,"ip_address":"","ucode":"362155C96A4509","user_header":"https://static001.geekbang.org/account/avatar/00/14/e7/15/8d699a19.jpg","comment_is_top":false,"comment_ctime":1588931094,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"53128538646","product_id":100031001,"comment_content":"flutter更新有点快，老师那个方法不行了，最新的在这里: https:&#47;&#47;flutter.dev&#47;docs&#47;development&#47;add-to-app&#47;android&#47;project-setup","like_count":13,"discussions":[{"author":{"id":1603717,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIBC94guaFqiaSlFhyibfo6kySHPqJCfQKzzz8JwumEMGiaVDfXJTbFAMK4vS6t9UJib4S8icmtsd7NAsg/132","nickname":"Geek_d7ea11","note":"","ucode":"0FEF691CF21C79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348157,"discussion_content":"中文  https://flutter.cn/docs/development/add-to-app","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1612443607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1441900,"avatar":"https://static001.geekbang.org/account/avatar/00/16/00/6c/fd4d6399.jpg","nickname":"Dev","note":"","ucode":"D065E2FC4D6A6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1603717,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIBC94guaFqiaSlFhyibfo6kySHPqJCfQKzzz8JwumEMGiaVDfXJTbFAMK4vS6t9UJib4S8icmtsd7NAsg/132","nickname":"Geek_d7ea11","note":"","ucode":"0FEF691CF21C79","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359537,"discussion_content":"牛b","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616223081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":348157,"ip_address":""},"score":359537,"extra":""}]},{"author":{"id":1442156,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6ADlY3IFt3Rs1aVDyrTO2BiaV8wiabypPwbXhbPcyqicCvnTV9lUYHULVqUab7ww4taX5QbmFyatLQ/132","nickname":"Geek_cc0a3b","note":"","ucode":"8D6C16AC4A9ED0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370957,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619592341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133599,"user_name":"Geek_a9f943","can_delete":false,"product_type":"c1","uid":1595468,"ip_address":"","ucode":"2F231425A03298","user_header":"","comment_is_top":false,"comment_ctime":1568618582,"is_pvip":false,"replies":[{"id":"51331","content":"Flutter的插件机制只是一层弱依赖，Flutter module并不会关心这堆代码的运行时来源，所以打包并不会顺藤摸瓜携带Native的依赖库。Native的依赖库是需要原生工程去管理的，所以如果你的Flutter module依赖的原生插件有其他的底层依赖库，请依次找到他们，并在原生Android工程中的build.gradle、iOS工程中的Podfile里把原生插件所依赖的原生库也声明为依赖","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1568654510,"ip_address":"","comment_id":133599,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18748487766","product_id":100031001,"comment_content":"如果在flutter中添加了第三方依赖，打包时就会报错，所以这种方式本质上还是不适用于混合开发。最理想的状态是将flutter作为一个单独的项目，然后把最终产物提供给android，ios，这样原生的开发人员也不需要安装flutter运行环境。这一节可以当作是混合开发的预习，希望老师后续能把混合开发讲的更彻底一些，毕竟这才是flutter存在的主要目的","like_count":4,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467442,"discussion_content":"Flutter的插件机制只是一层弱依赖，Flutter module并不会关心这堆代码的运行时来源，所以打包并不会顺藤摸瓜携带Native的依赖库。Native的依赖库是需要原生工程去管理的，所以如果你的Flutter module依赖的原生插件有其他的底层依赖库，请依次找到他们，并在原生Android工程中的build.gradle、iOS工程中的Podfile里把原生插件所依赖的原生库也声明为依赖","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568654510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1587950,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoicsoEaPbJHSlpOF9A3FsrkmTTf7XM24eOM63sic3iakqibYrqCgCU73NOFdtrkjKwWhqDF8JXoDucuQ/132","nickname":"Geek_754a78","note":"","ucode":"795DE0720A1131","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":18215,"discussion_content":"@Geek_a9f943 闲鱼就是这样做的，原生开发人员对flutter透明。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569032787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158185,"user_name":"千の星","can_delete":false,"product_type":"c1","uid":1174472,"ip_address":"","ucode":"6B0634C811A1FC","user_header":"https://static001.geekbang.org/account/avatar/00/11/eb/c8/773ff168.jpg","comment_is_top":false,"comment_ctime":1575344071,"is_pvip":false,"replies":[{"id":"61951","content":"参考下这个issue下的解决方案：https:&#47;&#47;github.com&#47;flutter&#47;flutter&#47;issues&#47;25147<br>1.flutter clean<br>2.cd .android<br>3.&#47;gradlew clean<br>4.&#47;gradlew assembleRelease","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1576665499,"ip_address":"","comment_id":158185,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14460245959","product_id":100031001,"comment_content":"老师，按照您的混编方法，再 flutter build apk --release，之后生产的aar&#47;assets&#47;flutter_assets&#47;,里面缺少isolate_snapshot_data，isolate_snapshot_instr，vm_snapshot_data，vm_snapshot_instr。aar拷贝到公司nativeapp运行到flutter就会报错：Abort message: &#39;[FATAL:flutter&#47;shell&#47;common&#47;shell.cc(218)] Check failed: vm. Must be able to initialize the VM.。请问是缺少什么环节<br>或者配置吗","like_count":3,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476658,"discussion_content":"参考下这个issue下的解决方案：https://github.com/flutter/flutter/issues/25147\n1.flutter clean\n2.cd .android\n3./gradlew clean\n4./gradlew assembleRelease","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576665499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1174472,"avatar":"https://static001.geekbang.org/account/avatar/00/11/eb/c8/773ff168.jpg","nickname":"千の星","note":"","ucode":"6B0634C811A1FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70673,"discussion_content":"cd $FLUTTER_ROOT/bin/cache/artifacts/engine\nfor arch in android-arm android-arm-profile android-arm-release; do\n  pushd $arch\n  cp flutter.jar flutter-armeabi-v7a.jar # 备份\n  unzip flutter.jar lib/armeabi-v7a/libflutter.so\n  mv lib/armeabi-v7a lib/armeabi\n  zip -d flutter.jar lib/armeabi-v7a/libflutter.so\n  zip flutter.jar lib/armeabi/libflutter.so\n  popd\ndone\n\n我是搞了这个v5的兼容之后出这个问题的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575375952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180754,"user_name":"Geek_JOJO","can_delete":false,"product_type":"c1","uid":1754326,"ip_address":"","ucode":"945C38ECF443B4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/c4/d6/73656a64.jpg","comment_is_top":false,"comment_ctime":1582381383,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"10172315975","product_id":100031001,"comment_content":"老师，按步骤在Android原生项目中集成Flutter的构建产物aar,gradle成功编译，但是MainActivity中测试时，找不到Flutter这个类","like_count":2,"discussions":[{"author":{"id":1081403,"avatar":"https://static001.geekbang.org/account/avatar/00/10/80/3b/b723dc6c.jpg","nickname":"杨涛","note":"","ucode":"9BE1C70ABDFB4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":240656,"discussion_content":"原因是Flutter升级到1.12后就io.flutter.facade这个包废弃了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587381093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1341714,"avatar":"https://static001.geekbang.org/account/avatar/00/14/79/12/0406407d.jpg","nickname":"Chanson","note":"","ucode":"7E14DDE564E604","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1081403,"avatar":"https://static001.geekbang.org/account/avatar/00/10/80/3b/b723dc6c.jpg","nickname":"杨涛","note":"","ucode":"9BE1C70ABDFB4A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251121,"discussion_content":"请问 目前应该怎么用呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588067358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":240656,"ip_address":""},"score":251121,"extra":""}]},{"author":{"id":1911871,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/rRCSdTPyqWdJkIdySLkRpKDkg6oXhGibbCsMVEBVumXZbWGHNW1dwVjAeazeTOukiauJxH9mB8dQM681Kbe7kVRA/132","nickname":"王文亮","note":"","ucode":"109317BB185796","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225687,"discussion_content":"原生工程应该需要单独引入flutter库得 看看纯flutter工程如何引入就行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586392582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1081403,"avatar":"https://static001.geekbang.org/account/avatar/00/10/80/3b/b723dc6c.jpg","nickname":"杨涛","note":"","ucode":"9BE1C70ABDFB4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220621,"discussion_content":"我也是找不到Flutter类，而且flutter-debug.aar 只有9M多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585908041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1174528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ec/00/0577b38d.jpg","nickname":"xfhy","note":"","ucode":"5C369C9F2FEC38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198437,"discussion_content":"我也是,,,同学你解决了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583504494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1992461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/67/0d/ffa5cd9b.jpg","nickname":"oldjii","note":"","ucode":"70EC36B322C522","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1174528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ec/00/0577b38d.jpg","nickname":"xfhy","note":"","ucode":"5C369C9F2FEC38","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553292,"discussion_content":"你好 请问这个怎么解决的 我按照官网来也是不行的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645821747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":198437,"ip_address":""},"score":553292,"extra":""}]}]},{"had_liked":false,"id":132350,"user_name":"颜为晨","can_delete":false,"product_type":"c1","uid":1596031,"ip_address":"","ucode":"8109E7B392684D","user_header":"https://static001.geekbang.org/account/avatar/00/18/5a/7f/c50d520e.jpg","comment_is_top":false,"comment_ctime":1568096385,"is_pvip":false,"replies":[{"id":"51765","content":"iOS 15MB左右，安卓5MB左右","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1568961792,"ip_address":"","comment_id":132350,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10158030977","product_id":100031001,"comment_content":"包体积最少会增加多少呢？","like_count":2,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466893,"discussion_content":"iOS 15MB左右，安卓5MB左右","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568961792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238148,"user_name":"超越杨超越","can_delete":false,"product_type":"c1","uid":1028887,"ip_address":"","ucode":"BB390B4B7E19D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b3/17/9f6d67dc.jpg","comment_is_top":false,"comment_ctime":1596080955,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5891048251","product_id":100031001,"comment_content":"感谢陈老师的课程。如果flutter工程和原生工程的相对路径可以确定的话，比如iOS中就可以直接指定pod path到flutter工程里边，如flutter_demo&#47;ios&#47;Flutter。flutter工程中已经配置好了podspec，以及一些xcconfig文件，所以iOS原生嵌入flutter还是挺方便的。","like_count":1},{"had_liked":false,"id":186644,"user_name":"Geek_473879","can_delete":false,"product_type":"c1","uid":1843920,"ip_address":"","ucode":"D7F4C74F6D0030","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7h2t7ZmOZEpzazicoHF0ricTvaObicQCYZpolMz38tnPzcV1KywglcTibf6yPY0JLc4PWA3LtapgJKg/132","comment_is_top":false,"comment_ctime":1583894576,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878861872","product_id":100031001,"comment_content":"老师用你给的demo，打包aar，还是缺少flutter.jar包，是我这边配置有什么问题吗<br>","like_count":1},{"had_liked":false,"id":186338,"user_name":"Geek_473879","can_delete":false,"product_type":"c1","uid":1843920,"ip_address":"","ucode":"D7F4C74F6D0030","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7h2t7ZmOZEpzazicoHF0ricTvaObicQCYZpolMz38tnPzcV1KywglcTibf6yPY0JLc4PWA3LtapgJKg/132","comment_is_top":false,"comment_ctime":1583827537,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5878794833","product_id":100031001,"comment_content":"老师我编译出来的arr 是没有flutter.jar包的，为什么","like_count":1,"discussions":[{"author":{"id":1345506,"avatar":"https://static001.geekbang.org/account/avatar/00/14/87/e2/7ba15ce7.jpg","nickname":"清聚思然","note":"","ucode":"6F8EA2893CA8A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549765,"discussion_content":"这个问题解决了吗\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644230083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1454598,"avatar":"https://static001.geekbang.org/account/avatar/00/16/32/06/8c262c85.jpg","nickname":"般若","note":"","ucode":"B9DA39DC2C0C76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262559,"discussion_content":"你的后来解决了吗  我的也是打成aar后  引入到android 项目里就没有flutter的东西","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589112107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180824,"user_name":"Geek_JOJO","can_delete":false,"product_type":"c1","uid":1754326,"ip_address":"","ucode":"945C38ECF443B4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/c4/d6/73656a64.jpg","comment_is_top":false,"comment_ctime":1582422906,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5877390202","product_id":100031001,"comment_content":"老师，为啥我用命令打出来的产物不对呢，跟您的aar不一样，我的没有jni的资源文件，所以一直找不到Flutter的类库文件，是为啥呀<br>","like_count":1,"discussions":[{"author":{"id":1754326,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/c4/d6/73656a64.jpg","nickname":"Geek_JOJO","note":"","ucode":"945C38ECF443B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202969,"discussion_content":"还没有呢，好像是因为flutter默认支持的cpu架构的原因","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583978009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1843920,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7h2t7ZmOZEpzazicoHF0ricTvaObicQCYZpolMz38tnPzcV1KywglcTibf6yPY0JLc4PWA3LtapgJKg/132","nickname":"Geek_473879","note":"","ucode":"D7F4C74F6D0030","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202337,"discussion_content":"我也是，你的找到问题了嘛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583898460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130973,"user_name":"矮个子先生😝","can_delete":false,"product_type":"c1","uid":1147205,"ip_address":"","ucode":"2242A457B0E10D","user_header":"https://static001.geekbang.org/account/avatar/00/11/81/45/9aa91b75.jpg","comment_is_top":false,"comment_ctime":1567586842,"is_pvip":false,"replies":[{"id":"49519","content":"赞","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1567678291,"ip_address":"","comment_id":130973,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862554138","product_id":100031001,"comment_content":"对于flutter module的测试,可以手动添加入口,以IDEA为例,add configurations-&gt; + -&gt;flutter -&gt;<br>name随便取个标识,Dart entrypoint指明入口dart文件,比如main.dart,其他不用管,这样可以边编写flutter时边看效果了","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466223,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567678291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129737,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1567235475,"is_pvip":false,"replies":[{"id":"48895","content":"三端工程分别管理，一个工程一个仓库","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1567509998,"ip_address":"","comment_id":129737,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5862202771","product_id":100031001,"comment_content":"老师，三端分离的话，是要建三个git仓库吗？还是有什么其它的方式管理？","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465621,"discussion_content":"三端工程分别管理，一个工程一个仓库","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567509998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1595313,"avatar":"https://static001.geekbang.org/account/avatar/00/18/57/b1/72b5ddcc.jpg","nickname":"右卿文","note":"","ucode":"1B28B49E94F4C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7269,"discussion_content":"三个仓库分别管理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567442804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357493,"user_name":"Geek_Rafe","can_delete":false,"product_type":"c1","uid":1694552,"ip_address":"上海","ucode":"DF77C1786D7C49","user_header":"","comment_is_top":false,"comment_ctime":1663310401,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663310401","product_id":100031001,"comment_content":"老师，有空更新一下教程吧，变化太多了，对新来的同学很不好","like_count":0},{"had_liked":false,"id":308208,"user_name":"风吹裤裤的海量","can_delete":false,"product_type":"c1","uid":2733699,"ip_address":"","ucode":"A5E3EC6A596827","user_header":"https://static001.geekbang.org/account/avatar/00/29/b6/83/944b035c.jpg","comment_is_top":false,"comment_ctime":1629451264,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629451264","product_id":100031001,"comment_content":"原生应用中混编，分离 Android、iOS 和 Flutter 三端，我觉得使用flutter_boost好一点，https:&#47;&#47;github.com&#47;alibaba&#47;flutter_boost","like_count":0},{"had_liked":false,"id":292739,"user_name":"钱洋彪","can_delete":false,"product_type":"c1","uid":1044793,"ip_address":"","ucode":"84FBB0E48FD885","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f1/39/768503ad.jpg","comment_is_top":false,"comment_ctime":1620957206,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620957206","product_id":100031001,"comment_content":"flutter clean 之后，直接 flutter build ios 会报错，原因是因为生成的.ios里工程的证书配置不对，目前我是采用flutter pub get + xcodeproj修改证书 + flutter build ios解决的，请问老师有更好的方式解决吗？","like_count":0},{"had_liked":false,"id":291554,"user_name":"Geek_cc0a3b","can_delete":false,"product_type":"c1","uid":1442156,"ip_address":"","ucode":"8D6C16AC4A9ED0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6ADlY3IFt3Rs1aVDyrTO2BiaV8wiabypPwbXhbPcyqicCvnTV9lUYHULVqUab7ww4taX5QbmFyatLQ/132","comment_is_top":false,"comment_ctime":1620359196,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620359196","product_id":100031001,"comment_content":"三端分离的架构怎么debug呢：比如原生通过MethodChannel调用了Flutter，怎么从原生层debug到Flutter层","like_count":0},{"had_liked":false,"id":257917,"user_name":"尘凉","can_delete":false,"product_type":"c1","uid":1136669,"ip_address":"","ucode":"6DB31565F60F26","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/1d/f2ea994b.jpg","comment_is_top":false,"comment_ctime":1604212658,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604212658","product_id":100031001,"comment_content":"setting.gradle中配置了evaluate(new File(地址))之后，一直报错：Illegal class name &quot;&quot; in class file ，老师知道怎么回事吗？搜了半天也找不到原因","like_count":0},{"had_liked":false,"id":221621,"user_name":"ldd","can_delete":false,"product_type":"c1","uid":1208157,"ip_address":"","ucode":"E8344FAFFE5CF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/6f/5d/f0a19f09.jpg","comment_is_top":false,"comment_ctime":1590550702,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590550702","product_id":100031001,"comment_content":"老师，iOS 按照 flutter module 的方式集成的时候，每次 flutter clean 后，执行 flutter build ios --rebug 都会报“签名失败”的错误，需要手动修改下 .ios 目录下的 iOS 项目签名配置，有没有其他什么配置可以设置，每次手动改很麻烦，跪求老师帮忙！","like_count":0},{"had_liked":false,"id":217704,"user_name":"。。。。。。","can_delete":false,"product_type":"c1","uid":1386333,"ip_address":"","ucode":"5E3CDC50A6F780","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/MxIKVrOfvGrWibezibHJ376rHJOAtiaVyKtX9j5hZNdY9z1GH6tPJdgu66oE1fuBvc3Jnz9dhwd046xBXQYjia0H2g/132","comment_is_top":false,"comment_ctime":1589593287,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589593287","product_id":100031001,"comment_content":"看了您上面, 是在mainActivity初始化flutter引擎，创建试图的，但是这里会有个一瞬黑屏的问题，想问一下，能不能在mainActivity之前就将flutter引擎初始化好了，在调用的时候直接基于引擎去渲染试图？ 如果可以的话，具体要怎么去做呢？一直有点闹不太懂它引擎初始化的相关步骤","like_count":0},{"had_liked":false,"id":194255,"user_name":"STAR","can_delete":false,"product_type":"c1","uid":1625796,"ip_address":"","ucode":"226F027B46149B","user_header":"https://static001.geekbang.org/account/avatar/00/18/ce/c4/3f3138d6.jpg","comment_is_top":false,"comment_ctime":1585042139,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585042139","product_id":100031001,"comment_content":"老师，假如我有ABC三个不相关的模块采用flutter开发，是用ABC三个仓库分别管理ABC，还是一个仓库管理ABC。假如是前者，那么ABC三个模块可以达成一个包吗 ","like_count":0},{"had_liked":false,"id":191013,"user_name":"STAR","can_delete":false,"product_type":"c1","uid":1625796,"ip_address":"","ucode":"226F027B46149B","user_header":"https://static001.geekbang.org/account/avatar/00/18/ce/c4/3f3138d6.jpg","comment_is_top":false,"comment_ctime":1584717521,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1584717521","product_id":100031001,"comment_content":"老项目引入flutter，三端分离的方式。假如老项目中有ABC三个不相关的模块或者页面替换成flutter实现，那么是要建ABC三个flutter仓库，还是建一个fultter仓库包含ABC三个模块。假如是前者，那么三个仓库可以打包成一个aar吗？谢谢！","like_count":0,"discussions":[{"author":{"id":1012240,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/72/10/abb7bfe3.jpg","nickname":"裴冬冬","note":"","ucode":"24116A466B611E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277026,"discussion_content":"你可以按照不同的业务，每一个业务创建一个插件，然后用一个module去把这些插件组合起来去打包","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590983862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1454404,"avatar":"https://static001.geekbang.org/account/avatar/00/16/31/44/a4def3e6.jpg","nickname":"Peter-袁俊晓","note":"","ucode":"B7A4D3A1B93FAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":231753,"discussion_content":"建一个仓库吧。flutter的main.dart中你可以设置路由。根据初始化的参数决定返回那个页面。flutter只有一个入口。你需要根据自己需求来设置参数和路由。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586828075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181451,"user_name":"飞","can_delete":false,"product_type":"c1","uid":1705688,"ip_address":"","ucode":"8A28843B0DC090","user_header":"https://static001.geekbang.org/account/avatar/00/1a/06/d8/955a17a7.jpg","comment_is_top":false,"comment_ctime":1582542757,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1582542757","product_id":100031001,"comment_content":"老师，我使用module方式将flutter release模式编译build出的App.frameWork和Flutter.frameWork，集成到工程里面，项目增加了100多M，这个有缩小的空间吗？","like_count":0,"discussions":[{"author":{"id":1454404,"avatar":"https://static001.geekbang.org/account/avatar/00/16/31/44/a4def3e6.jpg","nickname":"Peter-袁俊晓","note":"","ucode":"B7A4D3A1B93FAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":231757,"discussion_content":"我也遇到这个问题。release包贼大。不知道哪里出问题了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586828150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180298,"user_name":"高思阳","can_delete":false,"product_type":"c1","uid":1454594,"ip_address":"","ucode":"EEB4C5254AFAEB","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/02/edcdc9e3.jpg","comment_is_top":false,"comment_ctime":1582252658,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582252658","product_id":100031001,"comment_content":"老师，请问下，我现在在flutter项目中想直接显示iOS原生的一个uiviewcontroller，不使用push之类的操作，该怎么做呢","like_count":0},{"had_liked":false,"id":176140,"user_name":"陈建","can_delete":false,"product_type":"c1","uid":1260516,"ip_address":"","ucode":"043757594B644D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTILKa6xiaBU7ymqcYFEdK7KOMtcJiaLO3SwmibIkkS2RqcIibJCMBtnNfSSjnaJN2t5anoZic8Qhj4bcXw/132","comment_is_top":false,"comment_ctime":1580970259,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580970259","product_id":100031001,"comment_content":"Flutter build ios --debug 之前需要对flutter 项目ios做什么配置吗 <br> ","like_count":0},{"had_liked":false,"id":159470,"user_name":"啥玩意儿啊","can_delete":false,"product_type":"c1","uid":1307782,"ip_address":"","ucode":"A2B384C22D28D7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLDYJY1Eibric4sxmtzgTbdWOspnqZ7dRUOBtKbghf2KUELG4CfP6p66q1TD8T0ico9mAvvfcwJU5V4ibw/132","comment_is_top":false,"comment_ctime":1575631834,"is_pvip":false,"replies":[{"id":"61952","content":"试试<br>flutter clean<br>flutter build ios --release","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1576665662,"ip_address":"","comment_id":159470,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1575631834","product_id":100031001,"comment_content":"老师,ios启动后白屏<br>Engine run configuration was invalid.<br>Could not launch engine with configuration.<br>是打包环节出现问题了吗","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477070,"discussion_content":"试试\nflutter clean\nflutter build ios --release","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576665662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1206573,"avatar":"","nickname":"Geek_5352e8","note":"","ucode":"F2E493DBC70189","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276613,"discussion_content":"ios release 打包后 体积增大了一倍多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590915313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159071,"user_name":"八面玲珑","can_delete":false,"product_type":"c1","uid":1022422,"ip_address":"","ucode":"B2AD9AD095BF76","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/d6/5edc9af1.jpg","comment_is_top":false,"comment_ctime":1575531861,"is_pvip":false,"replies":[{"id":"60924","content":"你需要在runner工程里设置一下iOS开发证书","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1575620230,"ip_address":"","comment_id":159071,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575531861","product_id":100031001,"comment_content":"老师，iOS 构建报这个错怎么处理呀<br>BUILD TARGET Runner OF PROJECT Runner WITH CONFIGURATION Debug ===<br>    Code Signing Error: No profiles for &#39;com.****.***&#39; were<br>    found:  Xcode couldn&#39;t find any iOS App Development provisioning profiles<br>    matching &#39;com.lvdingtao.blackHoleModule&#39;. Automatic signing is disabled and<br>    unable to generate a profile. To enable automatic signing, pass<br>    -allowProvisioningUpdates to xcodebuild.","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476937,"discussion_content":"你需要在runner工程里设置一下iOS开发证书","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575620230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156124,"user_name":"17岁码农想当架构师","can_delete":false,"product_type":"c1","uid":1111556,"ip_address":"","ucode":"E2A5FACDF502CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/f6/04/ada1734e.jpg","comment_is_top":false,"comment_ctime":1574821935,"is_pvip":false,"replies":[{"id":"59961","content":"你换成release再试一次","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574830368,"ip_address":"","comment_id":156124,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574821935","product_id":100031001,"comment_content":"为什么从安卓原生工程进入flutter页面时先是黑屏一会儿，然后才出来页面？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475996,"discussion_content":"你换成release再试一次","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574830368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153876,"user_name":"谭鹏","can_delete":false,"product_type":"c1","uid":1142009,"ip_address":"","ucode":"4A8120C4AA6F2F","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/f9/af80b4da.jpg","comment_is_top":false,"comment_ctime":1574323853,"is_pvip":false,"replies":[{"id":"59814","content":"打开我给的demo链接里.travis.yml文件，参考里面before_deploy写的脚本执行步骤排查原因","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574756567,"ip_address":"","comment_id":153876,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574323853","product_id":100031001,"comment_content":"Flutter.framework里面 没有headers 文件夹    clean了好多遍  ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475304,"discussion_content":"打开我给的demo链接里.travis.yml文件，参考里面before_deploy写的脚本执行步骤排查原因","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574756567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153362,"user_name":"谭鹏","can_delete":false,"product_type":"c1","uid":1142009,"ip_address":"","ucode":"4A8120C4AA6F2F","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/f9/af80b4da.jpg","comment_is_top":false,"comment_ctime":1574223038,"is_pvip":false,"replies":[{"id":"59813","content":"打开我给的demo链接里.travis.yml文件，参考里面before_deploy写的脚本执行步骤排查原因","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574756560,"ip_address":"","comment_id":153362,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1574223038","product_id":100031001,"comment_content":"Flutter build ios 后 没有发现app 和 flutter framework","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475138,"discussion_content":"打开我给的demo链接里.travis.yml文件，参考里面before_deploy写的脚本执行步骤排查原因","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574756560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1456964,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","nickname":"菜头","note":"","ucode":"C5E95519F9EA21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53965,"discussion_content":"在隐藏文件夹 .iOS 目录下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574242496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153361,"user_name":"谭鹏","can_delete":false,"product_type":"c1","uid":1142009,"ip_address":"","ucode":"4A8120C4AA6F2F","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/f9/af80b4da.jpg","comment_is_top":false,"comment_ctime":1574222550,"is_pvip":false,"replies":[{"id":"59810","content":"module工程的根目录","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574756357,"ip_address":"","comment_id":153361,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574222550","product_id":100031001,"comment_content":"Flutter_library 是什么目录","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475137,"discussion_content":"module工程的根目录","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574756357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152718,"user_name":"蜥蜴1214","can_delete":false,"product_type":"c1","uid":1673879,"ip_address":"","ucode":"1CD2B3A41F3D01","user_header":"https://static001.geekbang.org/account/avatar/00/19/8a/97/7ab3a22c.jpg","comment_is_top":false,"comment_ctime":1574068979,"is_pvip":true,"replies":[{"id":"58664","content":"clean一下试试","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574072534,"ip_address":"","comment_id":152718,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574068979","product_id":100031001,"comment_content":"老师，我flutter项目通过<br>Flutter build apk --debug打包后。aar只有9.7m。添加到安卓项目后运行，会报错误: 无法访问FlutterView<br>找不到io.flutter.view.FlutterView的类文件。","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474911,"discussion_content":"clean一下试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574072534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148686,"user_name":"Geek_0ea3e4","can_delete":false,"product_type":"c1","uid":1457603,"ip_address":"","ucode":"74400F6C2545E5","user_header":"","comment_is_top":false,"comment_ctime":1573049196,"is_pvip":false,"replies":[{"id":"58783","content":"你需要build一次","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574137516,"ip_address":"","comment_id":148686,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573049196","product_id":100031001,"comment_content":"我执行Flutter create -t module flutter_library  为什么没有生产那么多文件？bogon:Documents liudongdong$ Flutter create -t module flutter_library<br>Creating project flutter_library...<br>  flutter_library&#47;test&#47;widget_test.dart (created)<br>  flutter_library&#47;flutter_library.iml (created)<br>  flutter_library&#47;.gitignore (created)<br>  flutter_library&#47;.metadata (created)<br>  flutter_library&#47;pubspec.yaml (created)<br>  flutter_library&#47;README.md (created)<br>  flutter_library&#47;lib&#47;main.dart (created)<br>  flutter_library&#47;flutter_library_android.iml (created)<br>  flutter_library&#47;.idea&#47;libraries&#47;Flutter_for_Android.xml (created)<br>  flutter_library&#47;.idea&#47;libraries&#47;Dart_SDK.xml (created)<br>  flutter_library&#47;.idea&#47;modules.xml (created)<br>  flutter_library&#47;.idea&#47;workspace.xml (created)<br>Running &quot;flutter pub get&quot; in flutter_library...                    14.5s","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473575,"discussion_content":"你需要build一次","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574137516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146043,"user_name":"AmazingYu","can_delete":false,"product_type":"c1","uid":1005587,"ip_address":"","ucode":"7608037021CC1C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/13/2afd6bdb.jpg","comment_is_top":false,"comment_ctime":1572423126,"is_pvip":false,"replies":[{"id":"57765","content":"如果你说的是插件工程，flutter有模版工程支持，可以参考31节分享","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1573467142,"ip_address":"","comment_id":146043,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572423126","product_id":100031001,"comment_content":"三端分离后，Flutter 工程怎么依赖 iOS 原生工程呢？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472685,"discussion_content":"如果你说的是插件工程，flutter有模版工程支持，可以参考31节分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573467142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145725,"user_name":"zzz","can_delete":false,"product_type":"c1","uid":1041455,"ip_address":"","ucode":"352964E5D793DA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e4/2f/fb01f76d.jpg","comment_is_top":false,"comment_ctime":1572352985,"is_pvip":false,"replies":[{"id":"58819","content":"不需要，flutter内建的iOS工程模版默认已经设置好了","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574154665,"ip_address":"","comment_id":145725,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572352985","product_id":100031001,"comment_content":"请问下 Flutter build ios --debug 出来的包，是没有X86_64架构的，是需要在打一个Flutter build ios --debug --simulator的包，然后把所有的plungin以及App.framework 自己来lipo合并下么？ 同样 使用Flutter build ios --release 中Flutter.framework 中又包含了X86_64架构，也需要手动的lipo删除么？ 这两个问题是需要我们自己来使用lipo操作 还是系统提供了什么支持？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472547,"discussion_content":"不需要，flutter内建的iOS工程模版默认已经设置好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574154665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143859,"user_name":"zjhuang","can_delete":false,"product_type":"c1","uid":1095110,"ip_address":"","ucode":"A20B57E4F5F6F9","user_header":"https://static001.geekbang.org/account/avatar/00/10/b5/c6/d39d31b0.jpg","comment_is_top":false,"comment_ctime":1571800147,"is_pvip":false,"replies":[{"id":"58631","content":"如果你不用pod&#47;aar，那git submodule也可以","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574051649,"ip_address":"","comment_id":143859,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571800147","product_id":100031001,"comment_content":"如何将Flutter Module抽离出原有工程的Git仓库，将Flutter Module放到另一个Git仓库（目的是Android、iOS共用 Flutter 的lib）。即如何将 Flutter Module 的Git 仓库放在原工程的Git目录下？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471728,"discussion_content":"如果你不用pod/aar，那git submodule也可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574051649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143144,"user_name":"汉之风云","can_delete":false,"product_type":"c1","uid":1126167,"ip_address":"","ucode":"7EE61D7804D348","user_header":"https://static001.geekbang.org/account/avatar/00/11/2f/17/fdc5d955.jpg","comment_is_top":false,"comment_ctime":1571638360,"is_pvip":false,"replies":[{"id":"58623","content":"去libs目录下找找","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574051138,"ip_address":"","comment_id":143144,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571638360","product_id":100031001,"comment_content":"老师，为啥打出来的debug aar包里面没有Flutter.jar呢","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471398,"discussion_content":"去libs目录下找找","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574051138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143125,"user_name":"大土豆","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1571634789,"is_pvip":true,"replies":[{"id":"57720","content":"这种也是可以的。只是原生工程和flutter工程之间耦合较重，对原有的原生打包流程有一定的侵入性，小团队没问题","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1573451800,"ip_address":"","comment_id":143125,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571634789","product_id":100031001,"comment_content":"老师，发现了一种依赖源码的方式，不用打包aar再引用这么麻烦了，非常适合小团队开发。https:&#47;&#47;github.com&#47;flutter&#47;flutter&#47;wiki&#47;Add-Flutter-to-existing-apps，官方出的依赖flutter module源码的方式，直接run就可以的，今天实测了一下，没有问题","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471392,"discussion_content":"这种也是可以的。只是原生工程和flutter工程之间耦合较重，对原有的原生打包流程有一定的侵入性，小团队没问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573451800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141821,"user_name":"菜头","can_delete":false,"product_type":"c1","uid":1456964,"ip_address":"","ucode":"C5E95519F9EA21","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","comment_is_top":false,"comment_ctime":1571231181,"is_pvip":false,"replies":[{"id":"54831","content":"clean一下再试试；或者换成release试试","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1571290204,"ip_address":"","comment_id":141821,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571231181","product_id":100031001,"comment_content":"flutter build ios --debug <br>生成的 Flutter.framework 没有 Header 文件夹<br>请问这个问题有遇到过吗","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470898,"discussion_content":"clean一下再试试；或者换成release试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571290204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141820,"user_name":"菜头","can_delete":false,"product_type":"c1","uid":1456964,"ip_address":"","ucode":"C5E95519F9EA21","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","comment_is_top":false,"comment_ctime":1571231021,"is_pvip":false,"replies":[{"id":"54830","content":"clean一下再试试；或者换成release试试","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1571290201,"ip_address":"","comment_id":141820,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1571231021","product_id":100031001,"comment_content":"flutter build ios --debug<br>打出来的 Flutter.framework 没有 Header 文件夹","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470897,"discussion_content":"clean一下再试试；或者换成release试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571290201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1456964,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","nickname":"菜头","note":"","ucode":"C5E95519F9EA21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":35671,"discussion_content":"在隐藏文件夹 .ios 中的 Runner project 中","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571297146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141181,"user_name":"大土豆","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1571127944,"is_pvip":true,"replies":[{"id":"54850","content":"这种问题有两种解决办法：<br>1.本地调试期使用debug，提交到仓库换成release；<br>2.把aar&#47;pod以版本的方式发布到私有Maven&#47;Cocoapod，以组件名+版本的方式在工程中引用，不直接管理打包构建产物。","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1571291504,"ip_address":"","comment_id":141181,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571127944","product_id":100031001,"comment_content":"老师，有个问题，如果每次flutter的代码都要导出成aar，放到libs下面给native工程依赖的话，调试是不是太麻烦了，而且，flutter debug模式下打出来的aar都是很大的，这个aar到底要不要纳入Git或者SVN管理？我感觉正常的流程（虽然现在IDE不支持，没法实现）应该是像Android中C&#47;C++和Java混合编译（NDK）的模式一样，每次run的时候，编译一堆东西到build底下，我们管理的都是代码。","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470691,"discussion_content":"这种问题有两种解决办法：\n1.本地调试期使用debug，提交到仓库换成release；\n2.把aar/pod以版本的方式发布到私有Maven/Cocoapod，以组件名+版本的方式在工程中引用，不直接管理打包构建产物。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571291504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141166,"user_name":"和小胖","can_delete":false,"product_type":"c1","uid":1180727,"ip_address":"","ucode":"406BD7AB987EBF","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg","comment_is_top":false,"comment_ctime":1571127482,"is_pvip":false,"replies":[{"id":"54851","content":"Debug模式下引擎初始化需要花费比较多的时间，换成release就好了","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1571291539,"ip_address":"","comment_id":141166,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571127482","product_id":100031001,"comment_content":"发现个问题，在有些 Android 手机上用这种方式在 Android 工程里面引用 flutter 页面，加载的时候会先黑屏然后才能加载成功 flutter 页面，老师这是为什么呢？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470689,"discussion_content":"Debug模式下引擎初始化需要花费比较多的时间，换成release就好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571291539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140272,"user_name":"大土豆","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1570868209,"is_pvip":true,"replies":[{"id":"54226","content":"debug是会大一些，换成release就只有几MB了","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1570872088,"ip_address":"","comment_id":140272,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1570868209","product_id":100031001,"comment_content":"我新建了一个Flutter module，Flutter build apk --debug之后的aar有快50M。。。","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470326,"discussion_content":"debug是会大一些，换成release就只有几MB了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570872088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121636,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","nickname":"大土豆","note":"","ucode":"67445DC3EC9DB0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30946,"discussion_content":"这个是正常的吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570871615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140183,"user_name":"周斌","can_delete":false,"product_type":"c1","uid":1594875,"ip_address":"","ucode":"645A663769F9C1","user_header":"https://static001.geekbang.org/account/avatar/00/18/55/fb/95e360b5.jpg","comment_is_top":false,"comment_ctime":1570844980,"is_pvip":false,"replies":[{"id":"54847","content":"设置contentView的时候把flutterView的边距大小调整到你期望的就可以了","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1571290933,"ip_address":"","comment_id":140183,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570844980","product_id":100031001,"comment_content":"老师您好，请问如何在原生的activity中只引用一个可以控制大小和形状的container呢","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470285,"discussion_content":"设置contentView的时候把flutterView的边距大小调整到你期望的就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571290933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137395,"user_name":"柯昌合","can_delete":false,"product_type":"c1","uid":1330199,"ip_address":"","ucode":"1073A88D0CFF0F","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/17/3cc47076.jpg","comment_is_top":false,"comment_ctime":1569728999,"is_pvip":false,"replies":[{"id":"53519","content":"不支持，如果需要支持的话，建议自己编译Engine","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1570517529,"ip_address":"","comment_id":137395,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569728999","product_id":100031001,"comment_content":"老师，flutter支持armv5 架构的cpu吗","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469068,"discussion_content":"不支持，如果需要支持的话，建议自己编译Engine","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570517529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136716,"user_name":"zzz","can_delete":false,"product_type":"c1","uid":1041455,"ip_address":"","ucode":"352964E5D793DA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e4/2f/fb01f76d.jpg","comment_is_top":false,"comment_ctime":1569497112,"is_pvip":false,"replies":[{"id":"53514","content":"flutter build ios 这个命令可以理解成是1.打包前的前置处理；2.Flutter原生产物依赖生成；3.iOS构建产物生成<br>xcode_backend.sh这个脚本只是做了1和2，3还是需要走Xcode的工具链完成的。<br>关于如何处理签名问题，可以参考第42篇分享的内容","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1570516607,"ip_address":"","comment_id":136716,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569497112","product_id":100031001,"comment_content":"您好，请问老师在上述的讲解中，iOS打包使用了build iOS --debug这个命令，请问下这个的命令可以简单的理解为执行 xcode_backend.sh + 签名这两个功能么？如果想和公司内部的CI流程协同的话，有些时候是不能直接获取到证书的，这种时候是不是只能使用xcode_backend.sh来生成framework，这两种方式生成的有什么区别呢？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468770,"discussion_content":"flutter build ios 这个命令可以理解成是1.打包前的前置处理；2.Flutter原生产物依赖生成；3.iOS构建产物生成\nxcode_backend.sh这个脚本只是做了1和2，3还是需要走Xcode的工具链完成的。\n关于如何处理签名问题，可以参考第42篇分享的内容","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570516607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136596,"user_name":"Lhh","can_delete":false,"product_type":"c1","uid":1126244,"ip_address":"","ucode":"8469B5FE5E5843","user_header":"https://static001.geekbang.org/account/avatar/00/11/2f/64/d88cd94b.jpg","comment_is_top":false,"comment_ctime":1569478734,"is_pvip":false,"replies":[{"id":"53512","content":"你的访问路径不对，具体可以参考第42节的内容","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1570516131,"ip_address":"","comment_id":136596,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569478734","product_id":100031001,"comment_content":"老师 执行Flutter build apk --debug后得到的是apk而不是aar 是需要对build.gradle进行修改吗","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468716,"discussion_content":"你的访问路径不对，具体可以参考第42节的内容","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570516131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134255,"user_name":"CarlXu","can_delete":false,"product_type":"c1","uid":1585713,"ip_address":"","ucode":"6A5DF4459907C2","user_header":"https://static001.geekbang.org/account/avatar/00/18/32/31/449513a1.jpg","comment_is_top":false,"comment_ctime":1568784477,"is_pvip":false,"replies":[{"id":"52442","content":"可以起一个原生demo工程把flutter模块工程包起来。demo功能很简单，主要是给flutter模块提供数据。另外跨页面的数据交换尽量通过url去解决吧，或者通过公用的总线","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1569500587,"ip_address":"","comment_id":134255,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568784477","product_id":100031001,"comment_content":"在开发阶段，开发调试的时候如何让原生页面的数据和flutter模块页面数据进行传递呢？如果每次都要打包好再pod进入原生项目调试，效率会非常低了","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467677,"discussion_content":"可以起一个原生demo工程把flutter模块工程包起来。demo功能很简单，主要是给flutter模块提供数据。另外跨页面的数据交换尽量通过url去解决吧，或者通过公用的总线","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569500587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132355,"user_name":"颜为晨","can_delete":false,"product_type":"c1","uid":1596031,"ip_address":"","ucode":"8109E7B392684D","user_header":"https://static001.geekbang.org/account/avatar/00/18/5a/7f/c50d520e.jpg","comment_is_top":false,"comment_ctime":1568097349,"is_pvip":false,"replies":[{"id":"51766","content":"是的","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1568962242,"ip_address":"","comment_id":132355,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568097349","product_id":100031001,"comment_content":"“Flutter create -t module Flutter_library”，flutter_library 应该是小写","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466896,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568962242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130980,"user_name":"矮个子先生😝","can_delete":false,"product_type":"c1","uid":1147205,"ip_address":"","ucode":"2242A457B0E10D","user_header":"https://static001.geekbang.org/account/avatar/00/11/81/45/9aa91b75.jpg","comment_is_top":false,"comment_ctime":1567588579,"is_pvip":false,"replies":[{"id":"49521","content":"一般是内存OOM了","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1567678791,"ip_address":"","comment_id":130980,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567588579","product_id":100031001,"comment_content":"- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event {<br>    FlutterViewController *vc = [[FlutterViewController alloc] init];<br>    [vc setInitialRoute:@&quot;custome&quot;]; &#47;&#47; 路由标识符<br>    <br>    FlutterViewController *vc2 = [[FlutterViewController alloc] init];<br>    [vc2 setInitialRoute:@&quot;custome2&quot;]; &#47;&#47; 路由标识符<br>    [self.navigationController pushViewController:vc animated:YES];<br>}<br>老师,为什么在创建vc2之后,但是没有使用,运行直接崩溃,不创建vc2,只创建vc则不会有问题.","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466227,"discussion_content":"一般是内存OOM了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567678791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130939,"user_name":"矮个子先生😝","can_delete":false,"product_type":"c1","uid":1147205,"ip_address":"","ucode":"2242A457B0E10D","user_header":"https://static001.geekbang.org/account/avatar/00/11/81/45/9aa91b75.jpg","comment_is_top":false,"comment_ctime":1567580676,"is_pvip":false,"replies":[{"id":"51763","content":"第42篇分享会专门介绍。其实flutter app的打包构建比较简单，只要处理好签名问题就可以了。module类似，iOS稍微复杂一些，需要把两个framework提炼成pod的组织结构，可以通过模板工程替换的方式搞定。","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1568961703,"ip_address":"","comment_id":130939,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567580676","product_id":100031001,"comment_content":"先自己用脚本写了部分CI功能,看看和老师后面讲的有哪些需要改进的、未做的<br><br>#f flutter_library库,p 存放依赖库的pod文件夹  d编译模式 debug release v:flutter pod version<br>#.&#47;build.sh -v x -f x -p -d x<br>#支持写死文件路径,或者通过参数传递路径<br># .&#47;user.sh -f flutter_library -p NativeEmbedFlutterDemo&#47;FlutterEngine -v 1.1.1 -d debug -i YES<br><br>SCRIPT_PATH=$(cd &quot;$(dirname &quot;$0&quot;)&quot;; pwd) #脚本路径<br><br>fpath=&quot;flutter_library&quot;<br>ppath=&quot;NativeEmbedFlutterDemo&#47;FlutterEngine&quot;<br>debug=&quot;debug&quot;<br>version=&#39;0.0.1&#39;<br>#是否执行pod install,在更新完flutter文件之后,除了第一次需要install,其他时候都不需要<br>install=&quot;YES&quot;<br>echo &quot;${fpath}&quot;<br>while getopts &quot;:f:p:d:v:i:&quot; opt<br>do<br>    case $opt in<br>        f)<br>        fpath=&quot;$OPTARG&quot;<br>        ;;<br>        p)<br>        ppath=&quot;$OPTARG&quot;<br>        ;;<br>        d)<br>        # 大写转小写<br>        debug=$(echo &quot;$OPTARG&quot; | tr &#39;A-Z&#39; &#39;a-z&#39;)<br>        ;;<br>        v)<br>        version=&quot;$OPTARG&quot;<br>        ;;<br>        i)<br>        install=&quot;$OPTARG&quot;<br>        ;;<br>        ?)<br>        echo &quot;未知参数&quot;<br>        exit 1;;<br>    esac<br>done<br><br>if [[ $debug == debug ]]<br>then<br>debug=&quot;flutter build ios --${debug}&quot;<br>else<br>#默认为release模式<br>debug=&quot;flutter build ios&quot;<br>fi<br>echo &quot;$debug&quot;<br><br>#echo &quot;$SCRIPT_PATH&quot;<br>if [[ $fpath != *$SCRIPT_PATH* ]]<br>then<br>    fpath=&quot;${SCRIPT_PATH}&#47;${fpath}&quot;<br>fi<br>echo &quot;${fpath}&quot;<br><br>if [[ $ppath != *$SCRIPT_PATH* ]]<br>then<br>ppath=&quot;${SCRIPT_PATH}&#47;${ppath}&quot;<br>fi<br>echo &quot;${ppath}&quot;<br><br>cd &quot;${fpath}&quot;<br>#执行字符串命令 打包flutter组件<br>${debug}<br><br>#build的两个flutter产物<br>buildPath=&quot;${fpath}&#47;.ios&#47;Flutter&quot;<br>fappPath=&quot;${buildPath}&#47;App.framework&quot;<br>#echo &quot;fappPath=${fappPath}&quot;<br>fflutterPath=&quot;${buildPath}&#47;engine&#47;Flutter.framework&quot;<br><br>#先删掉旧的,直接覆盖存在问题<br>if [ -d &quot;${ppath}&#47;App.framework&quot; ]<br>then<br>rm -rf &quot;${ppath}&#47;App.framework&quot;<br>fi<br><br>if [ -d &quot;${ppath}&#47;Flutter.framework&quot; ]<br>then<br>rm -rf &quot;${ppath}&#47;Flutter.framework&quot;<br>fi<br><br>#拷贝文件 目录拷贝 -R<br>cp -R -f &quot;${fappPath}&quot; &quot;${ppath}&quot;<br>cp -R -f &quot;${fflutterPath}&quot; &quot;${ppath}&quot;<br><br>cd &quot;${ppath}&quot;<br><br><br>#是否执行install<br>if [[ $(echo &quot;$install&quot; | tr &#39;A-Z&#39; &#39;a-z&#39;) == y* ]]<br>then<br>pod lib lint --no-clean<br>pod install<br>fi","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466203,"discussion_content":"第42篇分享会专门介绍。其实flutter app的打包构建比较简单，只要处理好签名问题就可以了。module类似，iOS稍微复杂一些，需要把两个framework提炼成pod的组织结构，可以通过模板工程替换的方式搞定。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568961703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130406,"user_name":"右卿文","can_delete":false,"product_type":"c1","uid":1595313,"ip_address":"","ucode":"1B28B49E94F4C7","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/b1/72b5ddcc.jpg","comment_is_top":false,"comment_ctime":1567442748,"is_pvip":false,"replies":[{"id":"48897","content":"赞","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1567510199,"ip_address":"","comment_id":130406,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1567442748","product_id":100031001,"comment_content":"现在的项目也用的三端分离模式，flutter_boost作为衔接，使用原生通道方法传值，之前遇到的种种坑，也一一解决了，官方文档真的很重要，也有中文翻译，推荐阅读，一堂课的知识量毕竟有限，多学多看多思索，希望大家快速掌握flutter","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465942,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567510199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1040071,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/de/c7/26485903.jpg","nickname":"Yolo七夜","note":"","ucode":"7CB74C0A1DF785","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7924,"discussion_content":"有个问题需要咨询下，我用的也是flutter-boost，但是打出来的产物不支持模拟器，想问下你那边是否有遇到过呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567731813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130121,"user_name":"一方","can_delete":false,"product_type":"c1","uid":1423565,"ip_address":"","ucode":"62BDA6EC1B06BE","user_header":"https://static001.geekbang.org/account/avatar/00/15/b8/cd/8fc50d3e.jpg","comment_is_top":false,"comment_ctime":1567387796,"is_pvip":false,"replies":[{"id":"48558","content":"很赞，插件的写法我们还没讲到，所以今天主要是讲纯flutter module的打包集成。别急，最后两章我们会专门介绍使用插件的app整体架构和打包集成方案","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1567400123,"ip_address":"","comment_id":130121,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567387796","product_id":100031001,"comment_content":"老师 在实际开发中flutter工程肯定会依赖三方库或者一些plugin 这种情况下 你所述的这种打包方式 三方库和plugin是打不进去的  你所述的这种打包方式只适合于没有依赖三方和plugin 纯原生开发的  关于三方依赖库打包可以了解下fat-aar","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465819,"discussion_content":"很赞，插件的写法我们还没讲到，所以今天主要是讲纯flutter module的打包集成。别急，最后两章我们会专门介绍使用插件的app整体架构和打包集成方案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567400123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129983,"user_name":"化身孤岛的鯨","can_delete":false,"product_type":"c1","uid":1599689,"ip_address":"","ucode":"A09011E320A6C8","user_header":"https://static001.geekbang.org/account/avatar/00/18/68/c9/d7662913.jpg","comment_is_top":false,"comment_ctime":1567347210,"is_pvip":false,"replies":[{"id":"48893","content":"是的。把flutter的构建产物（aar和framework）发布到组件推广平台，以版本的形式去依赖体验更好","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1567509959,"ip_address":"","comment_id":129983,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567347210","product_id":100031001,"comment_content":"三端分离的话，我觉得flutter端应该是单独作为一个项目存在的，所以应该是自己单独的仓库。最后提供给ios端或者是android端的最终交付，可以放在自己的私有maven仓库，比如像as中依赖自定义插件那样","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465750,"discussion_content":"是的。把flutter的构建产物（aar和framework）发布到组件推广平台，以版本的形式去依赖体验更好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567509959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}