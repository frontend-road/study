{"id":431904,"title":"03 | å†…å­˜å¸ƒå±€ï¼šåº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å®‰æ’æ•°æ®çš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æµ·çº³ã€‚</p><p>åœ¨å‰è¾¹çš„è¯¾ç¨‹é‡Œï¼Œæˆ‘ä»¬å­¦ä¹ äº†è®¡ç®—æœºç‰©ç†åœ°å€å’Œè™šæ‹Ÿåœ°å€çš„æ¦‚å¿µã€‚æœ‰äº†è™šæ‹Ÿåœ°å€ä¹‹åï¼Œè¿è¡Œåœ¨ç³»ç»Ÿé‡Œçš„ç”¨æˆ·è¿›ç¨‹çœ‹åˆ°çš„åœ°å€ç©ºé—´èŒƒå›´ï¼Œéƒ½æ˜¯è™šæ‹Ÿåœ°å€ç©ºé—´èŒƒå›´ï¼ˆ32ä½è®¡ç®—æœºçš„åœ°å€èŒƒå›´æ˜¯4Gï¼›64ä½è®¡ç®—æœºçš„åœ°å€èŒƒå›´æ˜¯256Tï¼‰ã€‚è¿™æ ·çš„è¯ï¼Œå°±ä¸ç”¨å†æ‹…å¿ƒå†…å­˜åœ°å€ä¸å¤Ÿç”¨ï¼Œä»¥åŠä¸å…¶ä»–è¿›ç¨‹ä¹‹é—´äº§ç”Ÿå†…å­˜åœ°å€å†²çªçš„é—®é¢˜äº†ã€‚</p><p>å‰é¢å‡ èŠ‚è¯¾ï¼Œæˆ‘ä»¬å…³æ³¨çš„æ˜¯å¦‚ä½•è§£å†³è¿›ç¨‹ä¹‹é—´çš„å†²çªï¼Œä»è¿™èŠ‚è¯¾èµ·ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹è¿›ç¨‹å†…éƒ¨çš„è™šæ‹Ÿå†…å­˜å¸ƒå±€ï¼Œæˆ–è€…è¯´å•ä¸€è¿›ç¨‹æ˜¯å¦‚ä½•å®‰æ’è‡ªå·±çš„å„ç§æ•°æ®çš„ã€‚</p><p>å­¦ä¹ äº†è¿™èŠ‚è¯¾ï¼Œä½ å°†ç†è§£å…¨å±€å˜é‡å’Œstaticå˜é‡åœ¨å†…å­˜ä¸­çš„ä½ç½®ä»¥åŠåˆå§‹åŒ–æ—¶æœºï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œä½ è¿˜å°†æ˜ç™½åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡å’Œåœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡æœ‰ä»€ä¹ˆä¸åŒç­‰é—®é¢˜ã€‚è¿™äº›é—®é¢˜çš„æ ¸å¿ƒéƒ½å¯ä»¥å½’ç»“åˆ°â€œå†…å­˜æ˜¯å¦‚ä½•å¸ƒå±€çš„â€è¿™ä¸ªé—®é¢˜ä¸Šï¼Œæ‰€ä»¥åªæœ‰æ·±åˆ»åœ°æŒæ¡äº†å†…å­˜å¸ƒå±€çš„çŸ¥è¯†ï¼Œä½ æ‰èƒ½åšåˆ°ä»¥ä¸å˜åº”ä¸‡å˜ï¼Œé¢å¯¹å„ç§å…·ä½“é—®é¢˜æ‰æœ‰äº†åˆ†æçš„æ–¹å‘å’Œæ€è·¯ï¼Œè¿›è€Œï¼Œä½ æ‰èƒ½å†™å‡ºæ›´åŠ â€œå†…å­˜å®‰å…¨â€çš„ä»£ç ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œå¯¹äºä¸€ä¸ªå…¸å‹çš„è¿›ç¨‹æ¥è¯´ï¼Œå®ƒçš„å†…å­˜ç©ºé—´æ˜¯ç”±å“ªäº›éƒ¨åˆ†ç»„æˆçš„ï¼Ÿæ¯ä¸ªéƒ¨åˆ†åˆè¢«å®‰ç½®åœ¨ç©ºé—´çš„ä»€ä¹ˆä½ç½®ï¼Ÿ</p><h3>æŠ½è±¡å†…å­˜å¸ƒå±€</h3><p>æˆ‘ä»¬çŸ¥é“ï¼ŒCPUè¿è¡Œä¸€ä¸ªç¨‹åºï¼Œå®è´¨å°±æ˜¯åœ¨é¡ºåºæ‰§è¡Œè¯¥ç¨‹åºçš„æœºå™¨ç ã€‚ä¸€ä¸ªç¨‹åºçš„æœºå™¨ç ä¼šè¢«ç»„ç»‡åˆ°åŒä¸€ä¸ªåœ°æ–¹ï¼Œè¿™ä¸ªåœ°æ–¹å°±æ˜¯<strong>ä»£ç æ®µ</strong>ã€‚</p><!-- [[[read_end]]] --><p>å¦å¤–ï¼Œç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¿…ç„¶è¦æ“ä½œæ•°æ®ã€‚è¿™å…¶ä¸­ï¼Œå¯¹äºæœ‰åˆå€¼çš„å˜é‡ï¼Œå®ƒçš„åˆå§‹å€¼ä¼šå­˜æ”¾åœ¨ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œè€Œä¸”ï¼Œè¿™äº›æ•°æ®éƒ¨åˆ†ä¹Ÿä¼šè¢«è£…è½½åˆ°å†…å­˜ä¸­ï¼Œå³ç¨‹åºçš„<strong>æ•°æ®æ®µ</strong>ã€‚æ•°æ®æ®µå­˜æ”¾çš„æ˜¯ç¨‹åºä¸­å·²ç»åˆå§‹åŒ–ä¸”ä¸ä¸º0çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚</p><p>å¯¹äºæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼Œå› ä¸ºç¼–è¯‘å™¨çŸ¥é“å®ƒä»¬çš„åˆå§‹å€¼éƒ½æ˜¯0ï¼Œå› æ­¤ä¾¿ä¸éœ€è¦å†åœ¨ç¨‹åºçš„äºŒè¿›åˆ¶æ˜ åƒä¸­å­˜æ”¾è¿™ä¹ˆå¤š0äº†ï¼Œåªéœ€è¦è®°å½•ä»–ä»¬çš„å¤§å°å³å¯ï¼Œè¿™ä¾¿æ˜¯<strong>BSSæ®µ</strong>ã€‚BSSæ®µè¿™ä¸ªç¼©å†™åå­—æ˜¯Block Started by Symbolï¼Œä½†å¾ˆå¤šäººå¯èƒ½æ›´å–œæ¬¢æŠŠå®ƒè®°ä½œBetter Save Spaceçš„ç¼©å†™ã€‚</p><p>æ•°æ®æ®µå’ŒBSSæ®µé‡Œå­˜æ”¾çš„æ•°æ®ä¹Ÿåªèƒ½æ˜¯éƒ¨åˆ†æ•°æ®ï¼Œä¸»è¦æ˜¯å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼Œä½†ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä»ç„¶éœ€è¦è®°å½•å¤§é‡çš„ä¸´æ—¶å˜é‡ï¼Œä»¥åŠè¿è¡Œæ—¶ç”Ÿæˆçš„å˜é‡ï¼Œè¿™é‡Œå°±éœ€è¦æ–°çš„å†…å­˜åŒºåŸŸäº†ï¼Œå³ç¨‹åºçš„<strong>å †ç©ºé—´</strong>è·Ÿ<strong>æ ˆç©ºé—´</strong>ã€‚ä¸ä»£ç æ®µä»¥åŠæ•°æ®æ®µä¸åŒçš„æ˜¯ï¼Œå †å’Œæ ˆå¹¶ä¸æ˜¯ä»ç£ç›˜ä¸­åŠ è½½ï¼Œå®ƒä»¬éƒ½æ˜¯ç”±ç¨‹åºåœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ç”³è¯·ï¼Œåœ¨ç¨‹åºè¿è¡Œç»“æŸåé‡Šæ”¾ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œä¸€ä¸ªç¨‹åºæƒ³è¦è¿è¡Œèµ·æ¥æ‰€éœ€è¦çš„å‡ å—åŸºæœ¬å†…å­˜åŒºåŸŸï¼šä»£ç æ®µã€æ•°æ®æ®µã€BSSæ®µã€å †ç©ºé—´å’Œæ ˆç©ºé—´ã€‚ä¸‹é¢å°±æ˜¯å†…å­˜å¸ƒå±€çš„ç¤ºæ„å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/fc/c0/fcb6231d9cc3841643e4b84462e5b3c0.jpg?wh=2284x1980\" alt=\"\"></p><p>è¿™æ˜¯ç¨‹åºè¿è¡Œèµ·æ¥æ‰€éœ€è¦çš„æœ€å°åŠŸèƒ½é›†ï¼Œå¦‚æœä½ å°è¯•å»çœ‹Linux 0.11çš„å†…æ ¸ä»£ç çš„è¯ï¼Œä¼šå‘ç°å®ƒæ‰€æ”¯æŒçš„a.outæ–‡ä»¶æ ¼å¼å’Œå†…å­˜å¸ƒå±€å°±æ˜¯ä¸Šè¾¹çš„æ ·å­ã€‚</p><p>é™¤äº†ä¸Šé¢æ‰€è®²çš„åŸºæœ¬å†…å­˜åŒºåŸŸå¤–ï¼Œç°ä»£åº”ç”¨ç¨‹åºä¸­è¿˜ä¼šåŒ…å«å…¶ä»–çš„ä¸€äº›å†…å­˜åŒºåŸŸï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç±»ï¼š</p><ul>\n<li><strong>å­˜æ”¾åŠ è½½çš„å…±äº«åº“çš„å†…å­˜ç©ºé—´</strong>ï¼šå¦‚æœä¸€ä¸ªè¿›ç¨‹ä¾èµ–å…±äº«åº“ï¼Œé‚£å¯¹åº”çš„ï¼Œè¯¥å…±äº«åº“çš„ä»£ç æ®µã€æ•°æ®æ®µã€BSSæ®µä¹Ÿéœ€è¦è¢«åŠ è½½åˆ°è¿™ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ã€‚</li>\n<li><strong>å…±äº«å†…å­˜æ®µ</strong>ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ˜ å°„ä¸€å—åŒ¿ååŒºåŸŸä½œä¸ºå…±äº«å†…å­˜ï¼Œç”¨æ¥è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ã€‚</li>\n<li><strong>å†…å­˜æ˜ å°„æ–‡ä»¶</strong>ï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ç£ç›˜çš„æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œç”¨æ¥è¿›è¡Œæ–‡ä»¶ç¼–è¾‘æˆ–è€…æ˜¯ç±»ä¼¼å…±äº«å†…å­˜çš„æ–¹å¼è¿›è¡Œè¿›ç¨‹é€šä¿¡ã€‚</li>\n</ul><p>è¿™æ ·æˆ‘ä»¬å°±åˆæ­¥äº†è§£äº†ä¸€ä¸ªè¿›ç¨‹å†…å­˜ä¸­éœ€è¦å“ªäº›åŒºåŸŸã€‚</p><p>åœ¨ä¸Šé¢çš„è®¨è®ºä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åŒºåˆ†ç£ç›˜çš„ç¨‹åºæ®µ(Section)ï¼Œä»¥åŠå†…å­˜ç¨‹åºæ®µ(Segment)çš„æ¦‚å¿µï¼Œè¿™ä¸¤ä¸ªè¯åœ¨å›½å†…å¾€å¾€éƒ½è¢«ç¿»è¯‘æˆâ€œæ®µâ€ï¼Œå¯¼è‡´å¤§å¤šæ•°åŒå­¦ä¼šæ··æ·†å®ƒä»¬ã€‚è¿™é‡Œæˆ‘æ¥ç»™ä½ åšä¸€ä¸ªåŒºåˆ†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/bc/c9/bca1533a0af7ee8476yy12f4b04083c9.jpg?wh=2284x1319\" alt=\"\"></p><p>ä¸Šå›¾ä»ä¸¤ä¸ªè§†è§’å±•ç¤ºäº†åº”ç”¨ç¨‹åºçš„åˆ†å¸ƒï¼Œå·¦è¾¹æ˜¯ç¨‹åºåœ¨ç£ç›˜ä¸­çš„æ–‡ä»¶å¸ƒå±€ç»“æ„ï¼Œå³è¾¹æ˜¯ç¨‹åºåŠ è½½åˆ°å†…å­˜ä¸­çš„å†…å­˜å¸ƒå±€ç»“æ„ã€‚</p><p>å¯¹äºç£ç›˜çš„ç¨‹åºï¼Œæ¯ä¸€ä¸ªå•å…ƒç»“æ„ç§°ä¸ºSectionã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡readelf -Sçš„é€‰é¡¹ï¼Œæ¥æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æ‰€æœ‰çš„Sectionä¿¡æ¯ã€‚å¯¹äºå³è¾¹çš„å†…å­˜é•œåƒï¼Œæ¯ä¸€ä¸ªå•å…ƒç»“æ„ç§°ä¸ºSegmentã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡readelf -lçš„é€‰é¡¹ï¼Œæ¥æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åçš„Segmentå¸ƒå±€ä¿¡æ¯ã€‚</p><p>åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå¾€å¾€å¤šä¸ªSectionä¼šå¯¹åº”ä¸€ä¸ªSegmentï¼Œä¾‹å¦‚.textã€.rodataç­‰ä¸€äº›åªè¯»çš„Sectionï¼Œä¼šè¢«æ˜ å°„åˆ°å†…å­˜çš„ä¸€ä¸ªåªè¯»/æ‰§è¡Œçš„Segmenté‡Œï¼›è€Œ.dataã€.bssç­‰ä¸€äº›å¯è¯»å†™çš„Sectionï¼Œåˆ™ä¼šè¢«æ˜ å°„åˆ°å†…å­˜çš„ä¸€ä¸ªå…·æœ‰è¯»å†™æƒé™çš„Segmenté‡Œã€‚å¹¶ä¸”å¯¹äºç£ç›˜äºŒè¿›åˆ¶ä¸­ä¸€äº›è¾…åŠ©ä¿¡æ¯çš„Sectionï¼Œä¾‹å¦‚.symtabã€.strtabç­‰ï¼Œä¸éœ€è¦åœ¨å†…å­˜ä¸­è¿›è¡Œæ˜ å°„ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œ<strong>Sectionä¸»è¦æ˜¯æŒ‡åœ¨ç£ç›˜ä¸­çš„ç¨‹åºæ®µï¼Œè€ŒSegmentåˆ™ç”¨æ¥æŒ‡ä»£å†…å­˜ä¸­çš„ç¨‹åºæ®µï¼ŒSegmentæ˜¯å°†å…·æœ‰ç›¸åŒæƒé™å±æ€§çš„Sectioné›†åˆåœ¨ä¸€èµ·ï¼Œç³»ç»Ÿä¸ºå®ƒä»¬åˆ†é…çš„ä¸€å—å†…å­˜ç©ºé—´ã€‚</strong></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å…·ä½“çœ‹ä¸‹Linuxç³»ç»Ÿä¸‹å†…å­˜å¸ƒå±€æ˜¯æ€æ ·çš„ã€‚</p><h3>IA-32æœºå™¨ä¸Šçš„Linuxè¿›ç¨‹å†…å­˜å¸ƒå±€</h3><p>åœ¨32ä½æœºå™¨ä¸Šï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½å…·æœ‰4GBçš„å¯»å€èƒ½åŠ›ã€‚Linuxç³»ç»Ÿä¼šé»˜è®¤å°†é«˜åœ°å€çš„1GBç©ºé—´åˆ†é…ç»™å†…æ ¸ï¼Œå‰©ä½™çš„ä½3GBæ˜¯ç”¨æˆ·å¯ä»¥ä½¿ç”¨çš„ç”¨æˆ·ç©ºé—´ã€‚ä¸‹å›¾æ˜¯32ä½æœºå™¨ä¸ŠLinuxè¿›ç¨‹çš„ä¸€ä¸ªå…¸å‹çš„å†…å­˜å¸ƒå±€ã€‚åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>cat /proc/pid/maps</code>æ¥æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„å®é™…è™šæ‹Ÿå†…å­˜å¸ƒå±€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/61/b2/61ee74faa861797b34397ed837a027b2.jpg?wh=2284x1808\" alt=\"\"></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬ä»ä½åœ°å€åˆ°é«˜åœ°å€ï¼Œä¾æ¬¡æ¥è§£é‡Šä¸‹å›¾ä¸­çš„å¸ƒå±€æƒ…å†µã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å‘ç°åœ¨32ä½Linuxç³»ç»Ÿä¸‹ï¼Œä»0åœ°å€å¼€å§‹çš„å†…å­˜åŒºåŸŸå¹¶ä¸æ˜¯ç›´æ¥å°±æ˜¯ä»£ç æ®µåŒºåŸŸï¼Œè€Œæ˜¯ä¸€æ®µä¸å¯è®¿é—®çš„ä¿ç•™åŒºã€‚è¿™æ˜¯å› ä¸ºåœ¨å¤§å¤šæ•°çš„ç³»ç»Ÿé‡Œï¼Œæˆ‘ä»¬è®¤ä¸ºæ¯”è¾ƒå°æ•°å€¼çš„åœ°å€ä¸æ˜¯ä¸€ä¸ªåˆæ³•åœ°å€ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨Cçš„ä»£ç é‡Œä¼šå°†æ— æ•ˆçš„æŒ‡é’ˆèµ‹å€¼ä¸ºNULLã€‚å› æ­¤ï¼Œè¿™é‡Œä¼šå‡ºç°ä¸€æ®µä¸å¯è®¿é—®çš„å†…å­˜ä¿ç•™åŒºï¼Œé˜²æ­¢ç¨‹åºå› ä¸ºå‡ºç°bugï¼Œå¯¼è‡´è¯»æˆ–å†™äº†ä¸€äº›å°å†…å­˜åœ°å€çš„æ•°æ®ï¼Œè€Œä½¿å¾—ç¨‹åºè·‘é£ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä»£ç æ®µä»0x08048000çš„ä½ç½®å¼€å§‹æ’å¸ƒï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸Šåœ°å€éœ€è¦gccç¼–è¯‘çš„æ—¶å€™ä¸å¼€å¯pieçš„é€‰é¡¹ï¼‰ã€‚å°±åƒæˆ‘ä»¬å‰é¢æåˆ°çš„ï¼Œä»£ç æ®µã€æ•°æ®æ®µéƒ½æ˜¯ä»å¯æ‰§è¡Œæ–‡ä»¶æ˜ åƒä¸­è£…è½½åˆ°å†…å­˜ä¸­ï¼›BSSæ®µåˆ™æ˜¯æ ¹æ®BSSæ®µæ‰€éœ€çš„å¤§å°ï¼Œåœ¨åŠ è½½æ—¶ç”Ÿæˆä¸€æ®µ0å¡«å……çš„å†…å­˜ç©ºé—´ã€‚</p><p>ç´§æ¥ç€ï¼Œæ’åœ¨BSSæ®µåè¾¹çš„å°±æ˜¯å †ç©ºé—´äº†ã€‚åœ¨å›¾ä¸­ï¼Œå †çš„ç©ºé—´é‡Œæœ‰ä¸€ä¸ªå‘ä¸Šçš„ç®­å¤´ï¼Œè¿™é‡Œæ ‡æ˜äº†å †åœ°å€ç©ºé—´çš„å¢é•¿æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æ¯æ¬¡åœ¨è¿›ç¨‹å‘å†…æ ¸ç”³è¯·æ–°çš„å †åœ°å€æ—¶å€™ï¼Œå…¶åœ°å€çš„å€¼æ˜¯åœ¨å¢å¤§çš„</strong>ã€‚ä¸ä¹‹å¯¹åº”çš„æ˜¯æ ˆç©ºé—´ï¼Œæœ‰ä¸€ä¸ªå‘ä¸‹çš„ç®­å¤´ï¼Œè¯´æ˜æ ˆå¢é•¿çš„æ–¹å‘æ˜¯å‘ä½åœ°å€æ–¹å‘å¢é•¿ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æ¯æ¬¡è¿›ç¨‹ç”³è¯·æ–°çš„æ ˆåœ°å€æ—¶ï¼Œå…¶åœ°å€å€¼æ˜¯åœ¨å‡å°‘çš„</strong>ã€‚</p><p>å¯¹æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡å †å’Œæ ˆåˆ†åˆ«ç”±ä¸¤ä¸ªæŒ‡é’ˆæ§åˆ¶ï¼Œå †æŒ‡é’ˆæŒ‡æ˜äº†å½“å‰å †ç©ºé—´çš„è¾¹ç•Œï¼Œæ ˆæŒ‡é’ˆæŒ‡æ˜äº†å½“å‰æ ˆç©ºé—´çš„è¾¹ç•Œã€‚å½“å †ç”³è¯·æ–°çš„å†…å­˜ç©ºé—´æ—¶ï¼Œåªéœ€è¦å°†å †æŒ‡é’ˆå¢åŠ å¯¹åº”çš„å¤§å°ï¼Œå›æ”¶åœ°å€æ—¶å‡å°‘å¯¹åº”çš„å¤§å°å³å¯ã€‚è€Œæ ˆçš„ç”³è¯·åˆšå¥½ç›¸åã€‚è¿™å…¶å®å°±æ˜¯å†…æ ¸å¯¹å †è·Ÿæ ˆä½¿ç”¨çš„æœ€æ ¹æœ¬çš„æ–¹å¼ï¼Œå…¶ä¸­ï¼Œå †çš„æŒ‡é’ˆå«åšâ€œProgram breakâ€ï¼Œæ ˆçš„æŒ‡é’ˆå«åšâ€œStack pointerâ€ï¼Œä¹Ÿå°±æ˜¯x86æ¶æ„ä¸‹çš„spå¯„å­˜å™¨ã€‚æˆ‘ä»¬åœ¨åç»­çš„è¯¾ç¨‹ä¸­ä¼šåˆ†åˆ«å±•å¼€å †ç©ºé—´è·Ÿæ ˆç©ºé—´çš„å®ç°åŸç†ã€‚</p><p>ç»§ç»­å¾€ä¸‹çœ‹ï¼Œå°±åˆ°äº†å†…å­˜æ˜ å°„åŒºåŸŸï¼Œè¿™é‡Œæœ€å¸¸è§çš„å°±æ˜¯ç¨‹åºæ‰€ä¾èµ–çš„å…±äº«åº“ï¼Œä¾‹å¦‚libc.soã€‚å…±äº«åº“çš„ä»£ç æ®µã€æ•°æ®æ®µã€BSSæ®µéƒ½ä¼šè¢«è£…è½½åˆ°è¿™é‡Œã€‚</p><p>è¿™é‡Œæˆ‘è¦è¯´æ˜ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¸Šè¿°çš„å¸ƒå±€åˆ†æéƒ½æ˜¯åŸºäºLinuxç³»ç»Ÿä¸‹å…³é—­äº†è¿›ç¨‹åœ°å€éšæœºåŒ–çš„é€‰é¡¹ã€‚å¦‚æœæ‰“å¼€è¿›ç¨‹åœ°å€éšæœºåŒ–çš„æ¨¡å¼ï¼Œå…¶ä¸­çš„å †ç©ºé—´ã€æ ˆç©ºé—´å’Œå…±äº«åº“æ˜ å°„çš„åœ°å€ï¼Œåœ¨æ¯æ¬¡ç¨‹åºè¿è¡Œä¸‹éƒ½ä¼šä¸ä¸€æ ·ã€‚è¿™æ˜¯å› ä¸ºå†…æ ¸åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹è¿™äº›åŒºåŸŸçš„èµ·å§‹åœ°å€å¢åŠ ä¸€äº›éšæœºçš„åç§»å€¼ï¼Œè¿™èƒ½å¢åŠ ç¼“å†²åŒºæº¢å‡ºçš„éš¾åº¦ã€‚</p><p>å¯¹äºè¿™ä¸ªè¿›ç¨‹åœ°å€éšæœºåŒ–é€‰é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code> sudo sysctl -w kernel.randomize_va_space=val</code>çš„å‘½ä»¤æ¥è®¾ç½®ã€‚å…¶ä¸­ï¼Œval=0è¡¨ç¤ºå…³é—­å†…å­˜åœ°å€éšæœºåŒ–ï¼›val=1è¡¨ç¤ºä½¿å¾—mmapçš„åŸºåœ°å€ã€æ ˆåœ°å€å’ŒVDSOçš„åœ°å€éšæœºåŒ–ï¼›val=2åˆ™æ˜¯åœ¨1çš„åŸºç¡€ä¸Šå¢åŠ å †åœ°å€çš„éšæœºåŒ–ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹32ä½æœºå™¨ä¸‹Linuxè¿›ç¨‹çš„å†…å­˜å¸ƒå±€æœ‰äº†ä¸€ä¸ªæ¸…æ™°çš„è®¤çŸ¥ã€‚å¯¹äº64ä½ç³»ç»Ÿè€Œè¨€ï¼Œå®ƒçš„åŸºæœ¬æ¡†æ¶ä¸32ä½æ¶æ„æ˜¯ä¸€è‡´çš„ï¼Œä½†åœ¨ä¸€äº›ç»†èŠ‚ä¸Šï¼Œè¿˜æ˜¯æœ‰æ‰€ä¸åŒã€‚</p><h3>Intel 64æœºå™¨ä¸Šçš„Linuxè¿›ç¨‹å†…å­˜å¸ƒå±€</h3><p>64ä½ç³»ç»Ÿç†è®ºçš„å¯»å€èŒƒå›´æ˜¯2^64ï¼Œä¹Ÿå°±æ˜¯16EBã€‚ä½†æ˜¯ï¼Œä»ç›®å‰æ¥çœ‹ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿå’Œåº”ç”¨å¾€å¾€ç”¨ä¸åˆ°è¿™ä¹ˆåºå¤§çš„åœ°å€ç©ºé—´ã€‚å› æ­¤ï¼Œåœ¨ç›®å‰çš„Intel 64æ¶æ„é‡Œå®šä¹‰äº†canonical addressçš„æ¦‚å¿µï¼Œå³åœ¨64ä½çš„æ¨¡å¼ä¸‹ï¼Œå¦‚æœåœ°å€ä½63åˆ°åœ°å€çš„æœ€é«˜æœ‰æ•ˆä½è¢«è®¾ç½®ä¸ºå…¨ 1 æˆ–å…¨é›¶ï¼Œé‚£ä¹ˆè¯¥åœ°å€è¢«è®¤ä¸ºæ˜¯canonical formã€‚ç›®å‰ï¼ŒIntel 64å¤„ç†å™¨å¾€å¾€æ”¯æŒ48ä½çš„è™šæ‹Ÿåœ°å€ï¼Œè¿™æ„å‘³ç€canonical addresså¿…é¡»å°†ç¬¬ 63 ä½åˆ°ç¬¬ 48 ä½è®¾ç½®ä¸ºé›¶æˆ–ä¸€ï¼ˆè¿™å–å†³äºç¬¬ 47 ä½æ˜¯é›¶è¿˜æ˜¯ä¸€ï¼‰ã€‚</p><p>æ‰€ä»¥ï¼Œç›®å‰çš„64ç³»ç»Ÿä¸‹çš„å¯»å€ç©ºé—´æ˜¯2^48ï¼Œå³256TBã€‚è€Œä¸”æ ¹æ®canonical addressçš„åˆ’åˆ†ï¼Œåœ°å€ç©ºé—´å¤©ç„¶åœ°è¢«åˆ†å‰²æˆä¸¤ä¸ªåŒºé—´ï¼Œåˆ†åˆ«æ˜¯0x0 - 0x00007fffffffffffå’Œ0xffff800000000000 - 0xffffffffffffffffã€‚è¿™æ ·å°±ç›´æ¥å°†ä½128Tçš„ç©ºé—´åˆ’åˆ†ä¸ºç”¨æˆ·ç©ºé—´ï¼Œé«˜128Tåˆ’åˆ†ä¸ºå†…æ ¸ç©ºé—´ã€‚ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†Intel 64æœºå™¨ä¸Šçš„Linuxè¿›ç¨‹å†…å­˜å¸ƒå±€ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/12/1c/1258dabe44e33c66c0f423d8d24a8f1c.jpg?wh=2284x1578\" alt=\"\"></p><p>ä»å›¾ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´ä¹‹é—´æœ‰ä¸€ä¸ªå·¨å¤§çš„å†…å­˜ç©ºæ´ã€‚è¿™å—ç©ºé—´ä¹‹æ‰€ä»¥ç”¨æ›´æ·±é¢œè‰²æ¥åŒºåˆ†ï¼Œæ˜¯å› ä¸ºè¿™å—ç©ºé—´çš„ä¸å¯è®¿é—®æ˜¯ç”±CPUæ¥ä¿è¯çš„ï¼ˆè¿™é‡Œçš„åœ°å€éƒ½ä¸æ»¡è¶³Intel 64çš„Canonical formï¼‰ã€‚</p><p>å¯¹äº64ä½çš„ç¨‹åºï¼Œä½ åœ¨æŸ¥çœ‹/proc/pid/mapsçš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‘ç°ä»£ç æ®µè·Ÿæ•°æ®æ®µçš„ä¸­é—´è¿˜æœ‰ä¸€æ®µä¸å¯ä»¥è¯»å†™çš„ä¿æŠ¤æ®µï¼Œå®ƒçš„ä½œç”¨ä¹Ÿæ˜¯é˜²æ­¢ç¨‹åºåœ¨è¯»å†™æ•°æ®æ®µçš„æ—¶å€™è¶Šç•Œè®¿é—®åˆ°ä»£ç æ®µï¼Œè¿™ä¸ªä¿æŠ¤æ®µå¯ä»¥è®©è¶Šç•Œè®¿é—®è¡Œä¸ºç›´æ¥å´©æºƒï¼Œé˜²æ­¢å®ƒç»§ç»­å¾€ä¸‹è¿è¡Œã€‚</p><p>åœ¨æ‰€æœ‰çš„å†…å­˜åŒºåŸŸä¸­ï¼Œç¨‹åºå‘˜æ‰“äº¤é“æœ€å¤šã€æ¥è§¦æœ€å¹¿æ³›çš„å°±æ˜¯å †ç©ºé—´ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥é‡ç‚¹å…³æ³¨æ“ä½œç³»ç»Ÿæ‰€æä¾›çš„ï¼Œç”¨äºç®¡ç†å †çš„ç³»ç»Ÿè°ƒç”¨æ˜¯æ€æ ·çš„ã€‚è¿™é‡Œæˆ‘ä¼šå…ˆç»™ä½ è®²å¦‚ä½•é€šè¿‡ç³»ç»Ÿè°ƒç”¨ç”³è¯·å †ç©ºé—´ï¼Œå…³äºå †ç©ºé—´æ›´ç²¾ç»†çš„ç®¡ç†ï¼Œæˆ‘ä»¬å°†åœ¨ç¬¬9èŠ‚è¯¾ä»‹ç»ã€‚</p><h3>ç”³è¯·å †ç©ºé—´</h3><p>å…¶å®ï¼Œä¸ç®¡æ˜¯32ä½ç³»ç»Ÿè¿˜æ˜¯64ä½ç³»ç»Ÿï¼Œå†…æ ¸éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªå˜é‡brkï¼ŒæŒ‡å‘å †çš„é¡¶éƒ¨ï¼Œæ‰€ä»¥ï¼Œ<strong>brkçš„ä½ç½®å®é™…ä¸Šå°±å†³å®šäº†å †çš„å¤§å°</strong>ã€‚Linuxç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªé‡è¦çš„ç³»ç»Ÿè°ƒç”¨æ¥ä¿®æ”¹å †çš„å¤§å°ï¼Œåˆ†åˆ«æ˜¯sbrkå’Œmmapã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ è¿™ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹sbrkã€‚</p><h4>sbrk</h4><p>sbrkå‡½æ•°çš„å¤´æ–‡ä»¶å’ŒåŸå‹å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code>#include &lt;unistd.h&gt;\n\nvoid* sbrk(intptr_t incr);\n</code></pre><p><strong>sbrké€šè¿‡ç»™å†…æ ¸çš„brkå˜é‡å¢åŠ incrï¼Œæ¥æ”¹å˜å †çš„å¤§å°ï¼Œincrå¯ä»¥ä¸ºè´Ÿæ•°</strong>ã€‚å½“incrä¸ºæ­£æ•°æ—¶ï¼Œå †å¢å¤§ï¼Œå½“incrä¸ºè´Ÿæ•°æ—¶ï¼Œå †å‡å°ã€‚å¦‚æœsbrkå‡½æ•°æ‰§è¡ŒæˆåŠŸï¼Œé‚£è¿”å›å€¼å°±æ˜¯brkçš„æ—§å€¼ï¼›å¦‚æœå¤±è´¥ï¼Œå°±ä¼šè¿”å›-1ï¼ŒåŒæ—¶ä¼šæŠŠerrnoè®¾ç½®ä¸ºENOMEMã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘ç›´æ¥ä½¿ç”¨sbrkæ¥ç”³è¯·å †å†…å­˜ï¼Œè€Œæ˜¯ä½¿ç”¨Cè¯­è¨€æä¾›çš„mallocå‡½æ•°è¿›è¡Œå †å†…å­˜çš„åˆ†é…ï¼Œç„¶åç”¨freeè¿›è¡Œå†…å­˜é‡Šæ”¾ã€‚å…³äºmallocå’Œfreeçš„å…·ä½“å®ç°ï¼Œæˆ‘ä»¬å°†åœ¨ç¬¬8èŠ‚è¯¾è¿›è¡Œè¯¦ç»†è®²è§£ã€‚è¿™é‡Œä½ è¦æ³¨æ„çš„æ˜¯ï¼Œmallocå’Œfreeå‡½æ•°ä¸æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œè€Œæ˜¯Cè¯­è¨€çš„è¿è¡Œæ—¶åº“ã€‚Linuxä¸Šçš„ä¸»æµè¿è¡Œæ—¶åº“æ˜¯glibcï¼Œå…¶ä»–å½±å“åŠ›æ¯”è¾ƒå¤§çš„è¿è¡Œæ—¶åº“è¿˜æœ‰muslç­‰ã€‚Cè¯­è¨€çš„è¿è¡Œæ—¶åº“å¤šæ˜¯ä»¥åŠ¨æ€é“¾æ¥åº“çš„æ–¹å¼å®ç°çš„ï¼Œå…³äºåŠ¨æ€é“¾æ¥åº“çš„ç›¸å…³çŸ¥è¯†ï¼Œæˆ‘ä»¬ä¼šåœ¨ç¬¬7èŠ‚è¯¾åŠ ä»¥ä»‹ç»ã€‚</p><p>åœ¨Cè¯­è¨€çš„è¿è¡Œæ—¶åº“é‡Œï¼Œmallocå‘ç¨‹åºæä¾›åˆ†é…ä¸€å°å—å†…å­˜çš„åŠŸèƒ½ï¼Œå½“è¿è¡Œæ—¶åº“çš„å†…å­˜åˆ†é…å®Œä¹‹åï¼Œå®ƒä¼šä½¿ç”¨sbrkæ–¹æ³•å‘æ“ä½œç³»ç»Ÿå†ç”³è¯·ä¸€å—å¤§çš„å†…å­˜ã€‚æˆ‘ä»¬å¯ä»¥å°†Cè¯­è¨€çš„è¿è¡Œæ—¶åº“ç±»æ¯”ä¸ºé›¶å”®å•†ï¼Œå®ƒä»æ“ä½œç³»ç»Ÿé‚£é‡Œæ‰¹å‘ä¸€å—æ¯”è¾ƒå¤§çš„å†…å­˜ï¼Œç„¶åå†é€šè¿‡é›¶å”®çš„æ–¹å¼ä¸€ç‚¹ç‚¹åœ°æä¾›ç»™ç¨‹åºå‘˜ä½¿ç”¨ã€‚</p><h4>mmap</h4><p>å¦ä¸€ä¸ªå¯ä»¥ç”³è¯·å †å†…å­˜çš„ç³»ç»Ÿè°ƒç”¨æ˜¯mmapï¼Œå®ƒæ˜¯æœ€é‡è¦çš„å†…å­˜ç®¡ç†æ¥å£ã€‚mmapçš„å¤´æ–‡ä»¶å’ŒåŸå‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>  #include &lt;unistd.h&gt;\n    #include &lt;sys/mman.h&gt;\n\nvoid* mmap(void* addr, size_t length, int prot, int flags, int fd, off_t offset);\n</code></pre><p>æˆ‘æ¥è§£é‡Šä¸€ä¸‹ä¸Šè¿°ä»£ç ä¸­çš„å„ä¸ªå˜é‡çš„æ„ä¹‰ï¼š</p><ul>\n<li>addrä»£è¡¨è¯¥åŒºåŸŸçš„èµ·å§‹åœ°å€ï¼›</li>\n<li>lengthä»£è¡¨è¯¥åŒºåŸŸé•¿åº¦ï¼›</li>\n<li>protæè¿°äº†è¿™å—æ–°çš„å†…å­˜åŒºåŸŸçš„è®¿é—®æƒé™ï¼›</li>\n<li>flagsæè¿°äº†è¯¥åŒºåŸŸçš„ç±»å‹ï¼›</li>\n<li>fd ä»£è¡¨æ–‡ä»¶æè¿°ç¬¦ï¼›</li>\n<li>offset ä»£è¡¨æ–‡ä»¶å†…çš„åç§»å€¼ã€‚</li>\n</ul><p>mmapçš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ ¹æ®å‚æ•°çš„ä¸åŒï¼Œå®ƒå¯ä»¥ç”¨äºåˆ›å»ºå…±äº«å†…å­˜ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæ–‡ä»¶æ˜ å°„åŒºåŸŸç”¨äºæå‡IOæ•ˆç‡ï¼Œè¿˜å¯ä»¥ç”¨æ¥ç”³è¯·å †å†…å­˜ã€‚å†³å®šå®ƒçš„åŠŸèƒ½çš„ï¼Œä¸»è¦æ˜¯prot, flagså’Œfdè¿™ä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹çœ‹ã€‚</p><p>prot çš„å€¼å¯ä»¥æ˜¯ä»¥ä¸‹å››ä¸ªå¸¸é‡çš„ç»„åˆï¼š</p><ul>\n<li>PROT_EXECï¼Œè¡¨ç¤ºè¿™å—å†…å­˜åŒºåŸŸæœ‰å¯æ‰§è¡Œæƒé™ï¼Œæ„å‘³ç€è¿™éƒ¨åˆ†å†…å­˜å¯ä»¥çœ‹æˆæ˜¯ä»£ç æ®µï¼Œå®ƒé‡Œé¢å­˜å‚¨çš„å¾€å¾€æ˜¯CPUå¯ä»¥æ‰§è¡Œçš„æœºå™¨ç ã€‚</li>\n<li>PROT_READï¼Œè¡¨ç¤ºè¿™å—å†…å­˜åŒºåŸŸå¯è¯»ã€‚</li>\n<li>PROT_WRITEï¼Œè¡¨ç¤ºè¿™å—å†…å­˜åŒºåŸŸå¯å†™ã€‚</li>\n<li>PROT_NONEï¼Œè¡¨ç¤ºè¿™å—å†…å­˜åŒºåŸŸçš„é¡µé¢ä¸èƒ½è¢«è®¿é—®ã€‚</li>\n</ul><p>è€Œflagsçš„å€¼å¯å–çš„å¸¸é‡æ¯”è¾ƒå¤šï¼Œä½ å¯ä»¥é€šè¿‡ man mmapæŸ¥çœ‹ï¼Œè¿™é‡Œæˆ‘åªåˆ—ä¸¾ä¸€ä¸‹æœ€é‡è¦çš„å››ç§å¯å–å€¼å¸¸é‡ï¼š</p><ul>\n<li><strong>MAP_SHARED</strong>ï¼šåˆ›å»ºä¸€ä¸ªå…±äº«æ˜ å°„çš„åŒºåŸŸï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥é€šè¿‡å…±äº«æ˜ å°„çš„æ–¹å¼ï¼Œæ¥å…±äº«åŒä¸€ä¸ªæ–‡ä»¶ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸€ä¸ªè¿›ç¨‹å¯¹è¯¥æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿå¯ä»¥è§‚å¯Ÿåˆ°ï¼Œè¿™å°±å®ç°äº†æ•°æ®çš„é€šè®¯ã€‚</li>\n<li><strong>MAP_PRIVATE</strong>ï¼šåˆ›å»ºä¸€ä¸ªç§æœ‰çš„æ˜ å°„åŒºåŸŸï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥ä½¿ç”¨ç§æœ‰æ˜ å°„çš„æ–¹å¼ï¼Œæ¥æ˜ å°„åŒä¸€ä¸ªæ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šä¸ºå®ƒåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å‰¯æœ¬ï¼Œè¿™æ ·å®ƒå¯¹æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå…¶ä»–è¿›ç¨‹å°±çœ‹ä¸åˆ°äº†ï¼Œä»è€Œè¾¾åˆ°æ˜ å°„åŒºåŸŸç§æœ‰çš„ç›®çš„ã€‚</li>\n<li><strong>MAP_ANONYMOUS</strong>ï¼šåˆ›å»ºä¸€ä¸ªåŒ¿åæ˜ å°„ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å…³è”æ–‡ä»¶ã€‚ä½¿ç”¨è¿™ä¸ªé€‰é¡¹æ—¶ï¼Œfdå‚æ•°å¿…é¡»ä¸ºç©ºã€‚</li>\n<li><strong>MAP_FIXED</strong>ï¼šä¸€èˆ¬æ¥è¯´ï¼Œaddrå‚æ•°åªæ˜¯å»ºè®®æ“ä½œç³»ç»Ÿå°½é‡ä»¥addrä¸ºèµ·å§‹åœ°å€è¿›è¡Œå†…å­˜æ˜ å°„ï¼Œä½†å¦‚æœæ“ä½œç³»ç»Ÿåˆ¤æ–­addrä½œä¸ºèµ·å§‹åœ°å€ä¸èƒ½æ»¡è¶³é•¿åº¦æˆ–è€…æƒé™è¦æ±‚æ—¶ï¼Œå°±ä¼šå¦å¤–å†æ‰¾å…¶ä»–é€‚åˆçš„åŒºåŸŸè¿›è¡Œæ˜ å°„ã€‚å¦‚æœflagsçš„å€¼å–æ˜¯MAP_FIXEDçš„è¯ï¼Œå°±ä¸å†æŠŠaddrçœ‹æˆæ˜¯å»ºè®®äº†ï¼Œè€Œæ˜¯å°†å…¶è§†ä¸ºå¼ºåˆ¶è¦æ±‚ã€‚å¦‚æœä¸èƒ½æˆåŠŸæ˜ å°„ï¼Œå°±ä¼šè¿”å›ç©ºæŒ‡é’ˆã€‚</li>\n</ul><p>é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨ç§æœ‰åŒ¿åæ˜ å°„æ¥è¿›è¡Œå †å†…å­˜çš„åˆ†é…ï¼Œå…·ä½“çš„åŸç†æˆ‘ä»¬ä¼šåœ¨ç¬¬9èŠ‚è¯¾è¯¦ç»†åˆ†æã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹å‚æ•°fdã€‚å½“å‚æ•°fdä¸ä¸º0æ—¶ï¼Œmmapæ˜ å°„çš„å†…å­˜åŒºåŸŸå°†ä¼šå’Œæ–‡ä»¶å…³è”ï¼Œå¦‚æœfdä¸º0ï¼Œå°±æ²¡æœ‰å¯¹åº”çš„ç›¸å…³æ–‡ä»¶ï¼Œæ­¤æ—¶å°±æ˜¯åŒ¿åæ˜ å°„ï¼Œflagsçš„å–å€¼å¿…é¡»ä¸ºMAP_ANONYMOUSã€‚</p><p>æ˜ç™½äº†mmapåŠå…¶å„å‚æ•°çš„å«ä¹‰åï¼Œä½ è‚¯å®šæƒ³çŸ¥é“ä»€ä¹ˆåœºæ™¯ä¸‹æ‰ä¼šä½¿ç”¨mmapï¼Œæˆ‘ä»¬åˆè¯¥æ€ä¹ˆä½¿ç”¨å®ƒã€‚</p><h4>mmapçš„å…¶ä»–åº”ç”¨åœºæ™¯</h4><p>mmapè¿™ä¸ªç³»ç»Ÿè°ƒç”¨çš„èƒ½åŠ›éå¸¸å¼ºå¤§ï¼Œæˆ‘ä»¬åœ¨åé¢è¿˜ä¼šç»å¸¸é‡åˆ°å®ƒã€‚åœ¨è¿™èŠ‚è¯¾é‡Œï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹å®ƒæœ€å¸¸è§çš„ç”¨æ³•ã€‚</p><p>æ ¹æ®æ˜ å°„çš„ç±»å‹ï¼Œmmapæœ‰å››ç§æœ€å¸¸ç”¨çš„ç»„åˆï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/98/93/98fcb5aa607b8be9ffa037e9f7eea593.jpg?wh=2284x1285\" alt=\"\"></p><p>å…¶ä¸­ï¼Œç§æœ‰åŒ¿åæ˜ å°„å¸¸ç”¨äºåˆ†é…å†…å­˜ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šæ–‡è®²çš„ç”³è¯·å †å†…å­˜ï¼Œå…·ä½“åŸç†æˆ‘ä»¬ä¼šåœ¨ç¬¬9èŠ‚è¯¾è®²è§£ã€‚è€Œç§æœ‰æ–‡ä»¶æ˜ å°„å¸¸ç”¨äºåŠ è½½åŠ¨æ€åº“ï¼Œå®ƒçš„åŸç†æˆ‘ä»¬ä¼šåœ¨ç¬¬7èŠ‚è¯¾å’Œç¬¬8èŠ‚è¯¾è¿›è¡Œåˆ†æã€‚</p><p>è¿™é‡Œæˆ‘ä»¬é‡ç‚¹çœ‹çœ‹å…±äº«åŒ¿åæ˜ å°„ã€‚æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥äº†è§£ä¸€ä¸‹mmapæ˜¯å¦‚ä½•ç”¨äºçˆ¶å­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡çš„ï¼Œå…¶ä»–çš„ä¾‹å­æˆ‘ä¼šåœ¨åé¢çš„ç« èŠ‚é™†ç»­ç»™ä½ ä»‹ç»ã€‚å®ƒçš„ç”¨æ³•ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>#include &lt;sys/mman.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main() {\n    pid_t pid;\n\n    char* shm = (char*)mmap(0, 4096, PROT_READ | PROT_WRITE,\n        MAP_SHARED | MAP_ANONYMOUS, -1, 0);\n\n    if (!(pid = fork())){\n        sleep(1);\n        printf(&quot;child got a message: %s\\n&quot;, shm);\n        sprintf(shm, &quot;%s&quot;, &quot;hello, father.&quot;);\n        exit(0);\n    }\n  \n    sprintf(shm, &quot;%s&quot;, &quot;hello, my child&quot;);\n    sleep(2);\n    printf(&quot;parent got a message: %s\\n&quot;, shm);\n\n    return 0;\n}\n</code></pre><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å…ˆæ˜¯ç”¨mmapæ–¹æ³•åˆ›å»ºäº†ä¸€å—å…±äº«å†…å­˜åŒºåŸŸï¼Œå‘½åä¸º shmï¼ˆç¬¬9è¡Œä»£ç ï¼‰ï¼Œæ¥ç€ï¼Œåˆé€šè¿‡forkè¿™ä¸ªç³»ç»Ÿè°ƒç”¨åˆ›å»ºäº†å­è¿›ç¨‹ã€‚ä»ç¬¬13è¡Œåˆ°ç¬¬16è¡Œä»£ç æ˜¯å­è¿›ç¨‹çš„æ‰§è¡Œé€»è¾‘ï¼Œå…·ä½“æ¥è®²ï¼Œå­è¿›ç¨‹ä¼‘çœ ä¸€ç§’åï¼Œä»shmä¸­å–å‡ºä¸€è¡Œå­—ç¬¦å¹¶æ‰“å°å‡ºæ¥ï¼Œç„¶ååˆå‘å…±äº«å†…å­˜ä¸­å†™å…¥äº†ä¸€è¡Œæ¶ˆæ¯ï¼ˆç¬¬15è¡Œï¼‰ã€‚</p><p>åœ¨å­è¿›ç¨‹çš„æ‰§è¡Œé€»è¾‘ä¹‹åï¼Œæ˜¯çˆ¶è¿›ç¨‹çš„æ‰§è¡Œé€»è¾‘ï¼ˆç¬¬19è¡Œä»¥åï¼‰ï¼šçˆ¶è¿›ç¨‹å…ˆå†™å…¥ä¸€è¡Œæ¶ˆæ¯ï¼Œç„¶åä¼‘çœ ä¸¤ç§’ï¼Œç­‰å¾…å­è¿›ç¨‹å®Œæˆè¯»å–æ¶ˆæ¯å’Œå‘æ¶ˆæ¯çš„è¿‡ç¨‹å¹¶é€€å‡ºåï¼Œçˆ¶è¿›ç¨‹å†ä»å…±äº«å†…å­˜ä¸­å–å‡ºå­è¿›ç¨‹å‘è¿‡æ¥çš„æ¶ˆæ¯ã€‚</p><p>è¿™å°±æ˜¯å…±äº«åŒ¿åæ˜ å°„åœ¨çˆ¶å­è¿›ç¨‹é—´é€šä¿¡çš„è¿ç”¨ã€‚æˆ‘ä»¬ä½¿ç”¨gccç¼–è¯‘è¿è¡Œä¸Šé¢çš„ä¾‹å­ï¼Œå¯ä»¥å¾—åˆ°è¿™æ ·çš„ç»“æœï¼š</p><pre><code>$ gcc -o mm mmap_shm.c\n$ ./mm\nchild got a message: hello, my child\nparent got a message: hello, father.\n</code></pre><p>æˆ‘æƒ³è¯·ä½ ç»“åˆæˆ‘åˆšæ‰çš„è®²è§£ï¼Œæ¥åˆ†æä¸€ä¸‹è¿™ä¸ªç¨‹åºè¿è¡Œçš„ç»“æœï¼Œè¿™æ ·ä½ å°±ç†è§£çš„æ›´é€å½»äº†ã€‚</p><p>å…³äºå…±äº«åŒ¿åæ˜ å°„ï¼Œæˆ‘ä»¬å°±è®²åˆ°è¿™é‡Œï¼Œè‡³äºmmapçš„å¦ä¸€ä¸ªç»„åˆå…±äº«æ–‡ä»¶æ˜ å°„ã€‚å®ƒçš„ä½œç”¨å…¶å®å’Œå…±äº«åŒ¿åæ˜ å°„ç›¸ä¼¼ï¼Œä¹Ÿå¯ä»¥ç”¨äºè¿›ç¨‹é—´é€šè®¯ã€‚ä¸åŒçš„æ˜¯ï¼Œå…±äº«æ–‡ä»¶æ˜ å°„æ˜¯é€šè¿‡æ–‡ä»¶åæ¥åˆ›å»ºå…±äº«å†…å­˜åŒºåŸŸçš„ï¼Œè¿™å°±è®©æ²¡æœ‰çˆ¶å­å…³ç³»çš„è¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç›¸åŒçš„æ–‡ä»¶åˆ›å»ºå…±äº«å†…å­˜åŒºåŸŸï¼Œä»è€Œå¯ä»¥ä½¿ç”¨å…±äº«å†…å­˜è¿›è¡Œè¿›ç¨‹é—´é€šè®¯ã€‚æ›´å…·ä½“çš„åŸç†åˆ†ææˆ‘æ”¾åœ¨äº†ç¬¬10ç« ã€‚</p><h3>æ€»ç»“</h3><p>å¥½ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬å°±è®²åˆ°è¿™é‡Œï¼Œç°åœ¨æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ã€‚</p><p>åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ä»æŠ½è±¡åˆ°å…·ä½“é€æ­¥äº†è§£äº†ç¨‹åºè¿è¡Œæ—¶çš„å†…å­˜å¸ƒå±€æ¨¡å‹ã€‚æˆ‘ä»¬äº†è§£åˆ°ï¼Œ<strong>ä¸€ä¸ªè¿›ç¨‹çš„å†…å­˜å¯ä»¥åˆ†ä¸ºå†…æ ¸åŒºåŸŸå’Œç”¨æˆ·åŒºåŸŸ</strong>ã€‚å†…æ ¸åŒºåŸŸæ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç»´æŠ¤çš„ï¼Œæˆ‘ä»¬é€šå¸¸å¹¶ä¸å…³å¿ƒè¿™ä¸€å—å†…å­˜æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚</p><p>ç¨‹åºå‘˜æœ€å…³å¿ƒçš„æ˜¯ç”¨æˆ·ç©ºé—´ï¼Œç”¨æˆ·ç©ºé—´å¤§è‡´å¯ä»¥åˆ†ä¸ºæ ˆã€å †ã€bssæ®µã€æ•°æ®æ®µå’Œä»£ç æ®µï¼š</p><ul>\n<li><strong>ä»£ç æ®µ</strong>ä¿å­˜çš„æ˜¯ç¨‹åºçš„æœºå™¨æŒ‡ä»¤ï¼Œè¿™ä¸€æ®µåŒºåŸŸçš„å†…å­˜å¾€å¾€æ˜¯å¯è¯»å¯æ‰§è¡Œï¼Œä½†ä¸å¯å†™ï¼›</li>\n<li><strong>æ•°æ®æ®µ</strong>ä¿å­˜çš„æ˜¯ç¨‹åºçš„é™æ€å˜é‡å’Œå…¨å±€å˜é‡ï¼›</li>\n<li><strong>bssæ®µ</strong>ç”¨äºæ— åˆå€¼çš„å˜é‡åŒºåŸŸï¼›</li>\n<li><strong>å †</strong>æ˜¯ç¨‹åºå‘˜å¯ä»¥è‡ªç”±ç”³è¯·çš„ç©ºé—´ï¼Œå½“æˆ‘ä»¬åœ¨å†™ç¨‹åºæ—¶è¦ä¿å­˜æ•°æ®ï¼Œä¼˜å…ˆä¼šé€‰æ‹©å †ï¼›</li>\n<li><strong>æ ˆ</strong>æ˜¯å‡½æ•°æ‰§è¡Œæ—¶çš„æ´»è·ƒè®°å½•ï¼Œè¿™å°†æ˜¯æˆ‘ä»¬ä¸‹ä¸€èŠ‚è¯¾è¦é‡ç‚¹åˆ†æçš„å†…å®¹ã€‚</li>\n</ul><p>è¿™5ä¸ªå†…å­˜åŒºåŸŸé€šå¸¸æ˜¯ç”±é«˜åœ°å€å‘ä½åœ°å€é¡ºåºæ’åˆ—çš„ã€‚ä½†è¿™å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œä»¥åæˆ‘ä»¬ä¼šçœ‹åˆ°å„ç§åä¾‹ï¼Œæ¯”å¦‚ä»£ç æ®µçš„ä½ç½®å®Œå…¨å¯ä»¥æ¯”å †çš„ä½ç½®è¿˜è¦é«˜ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬ä»¥Linuxä¸ºä¾‹ï¼Œåˆ†åˆ«ç ”ç©¶äº†IA-32æ¶æ„å’ŒIntel64æ¶æ„ä¸Šçš„å†…å­˜å¸ƒå±€ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªæ®µéƒ½æ˜¯æŒ‰ç…§ä¸Šè¿°åŠŸèƒ½è¿›è¡Œåˆ’åˆ†çš„ï¼ŒåŒºåˆ«åœ¨äº64æ¶æ„ä¸­åœ°å€ç©ºé—´æ›´å¤§ï¼Œè€Œä¸”å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´æ˜¯ä¸è¿ç»­çš„ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åˆæ­¥å­¦ä¹ äº†ä¸¤ä¸ªç”¨äºå †ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨sbrkå’Œmmapã€‚å…¶ä¸­ï¼Œmmapçš„ç”¨æ³•éå¸¸å¤æ‚ï¼Œæ ¹æ®è°ƒç”¨æ—¶ä¼ çš„å‚æ•°ï¼Œå®ƒæœ‰4ç§å¸¸è§çš„ç”¨æ³•ï¼Œåˆ†åˆ«æ˜¯ç§æœ‰åŒ¿åæ˜ å°„ã€ç§æœ‰æ–‡ä»¶æ˜ å°„ã€å…±äº«åŒ¿åæ˜ å°„å’Œå…±äº«æ–‡ä»¶æ˜ å°„ã€‚å…¶ä¸­ï¼Œå…±äº«åŒ¿åæ˜ å°„æ˜¯æˆ‘ä»¬è¿™èŠ‚è¯¾çš„é‡ç‚¹ï¼Œå®ƒå¯ä»¥ç”¨äºçˆ¶å­è¿›ç¨‹ä¹‹é—´çš„é€šè®¯ã€‚å…³äºmmapçš„å…¶ä»–åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢çš„è¯¾ç¨‹é€æ¸å±•å¼€ã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä¼šç»™ä½ è¯¦ç»†ä»‹ç»å†…å­˜å¸ƒå±€ä¸­çš„å †è·Ÿæ ˆï¼Œè¿™ä¸¤å—ä¹Ÿæ˜¯æˆ‘ä»¬å¼€å‘äººå‘˜æœ€å¸¸æ‰“äº¤é“çš„å†…å­˜åŒºåŸŸï¼Œè®©ä½ å¯¹ç¨‹åºè¿è¡Œæ—¶çš„ç¯å¢ƒå’Œå†…å­˜çŠ¶æ€æœ‰ä¸€ä¸ªæ›´æ·±å…¥çš„ç†è§£ã€‚</p><h3>æ€è€ƒé¢˜</h3><p>åœ¨è¿™èŠ‚è¯¾çš„æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ã€‚</p><p>ä¸€å—å†…å­˜åŒºåŸŸçš„æƒé™ä¸€èˆ¬åŒ…æ‹¬å¯è¯»ï¼Œå¯å†™ï¼Œå¯æ‰§è¡Œä¸‰ç±»ï¼Œè¯·ä½ æ€è€ƒä¸€ä¸‹ï¼Œä»£ç æ®µåº”è¯¥è¢«æˆäºˆæ€ä¹ˆæ ·çš„æƒé™å‘¢ï¼Ÿæ•°æ®æ®µå’Œå †åˆè¯¥è¢«æˆäºˆæ€æ ·çš„æƒé™å‘¢ï¼Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµä½ çš„æƒ³æ³•ï¼Œæˆ‘åœ¨ç•™è¨€åŒºç­‰ä½ ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/65/df/658ed22f6d65bc0aac3297139c9bb9df.jpg?wh=2733x1659\" alt=\"\"></p><p>å¥½å•¦ï¼Œè¿™èŠ‚è¯¾åˆ°è¿™å°±ç»“æŸå•¦ã€‚æ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šå¯¹è®¡ç®—æœºå†…å­˜æ„Ÿå…´è¶£çš„æœ‹å‹ã€‚æˆ‘æ˜¯æµ·çº³ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","comments":[{"had_liked":false,"id":319538,"user_name":"Ãªï½—Ä›ï½","can_delete":false,"product_type":"c1","uid":1066707,"ip_address":"","ucode":"5000233111BEFA","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/d3/e25d104a.jpg","comment_is_top":false,"comment_ctime":1635844059,"is_pvip":true,"replies":[{"id":"115868","content":"å¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼šï¼‰æˆ‘ä»¬è¯¾é‡Œä¹Ÿä»‹ç»äº†mmapçš„å‡ ä¸ªä½œç”¨ã€‚å…¶ä¸­ç§æœ‰åŒ¿åæ˜ å°„ç”¨äºåˆ†é…ç©ºé—´ï¼Œè¿™æ ·åˆ†é…çš„ç©ºé—´è¿˜æ˜¯ä»æ˜ å°„åŒºåŸŸé‡Œåˆ†é…çš„ï¼Œä½†æ˜¯ä»åŠŸèƒ½ä¸Šè¯´å‘¢ï¼Œå®ƒå’Œä½¿ç”¨sbrkæ‰€å¾—åˆ°çš„å†…å­˜åŒºåŸŸåˆæ˜¯ç›¸åŒçš„ã€‚æ‰€ä»¥è¿™ä¸€éƒ¨åˆ†å†…å­˜æˆ‘ä»¬è¿˜æ˜¯å€¾å‘äºç§°å‘¼å®ƒä¸ºå †ã€‚ä½†ä½ è¦çŸ¥é“çš„æ˜¯ï¼Œå…¶å®ä¸¥æ ¼æ¥è¯´ï¼Œè¿™æ˜¯ä»æ–‡ä»¶æ˜ å°„åŒºâ€œå·â€æ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635925054,"ip_address":"","comment_id":319538,"utype":1}],"discussion_count":3,"race_medal":0,"score":"35995582427","product_id":100094901,"comment_content":"è€å¸ˆï¼Œæ–‡ç« é‡Œè¯´mmapä¹Ÿå¯ä»¥ä¿®æ”¹å †å¤§å°ï¼Œé‚£æ˜ å°„çš„åŒºåŸŸä¸ºå•¥ä¸å±äºå †å‘¢ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529663,"discussion_content":"å¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼šï¼‰æˆ‘ä»¬è¯¾é‡Œä¹Ÿä»‹ç»äº†mmapçš„å‡ ä¸ªä½œç”¨ã€‚å…¶ä¸­ç§æœ‰åŒ¿åæ˜ å°„ç”¨äºåˆ†é…ç©ºé—´ï¼Œè¿™æ ·åˆ†é…çš„ç©ºé—´è¿˜æ˜¯ä»æ˜ å°„åŒºåŸŸé‡Œåˆ†é…çš„ï¼Œä½†æ˜¯ä»åŠŸèƒ½ä¸Šè¯´å‘¢ï¼Œå®ƒå’Œä½¿ç”¨sbrkæ‰€å¾—åˆ°çš„å†…å­˜åŒºåŸŸåˆæ˜¯ç›¸åŒçš„ã€‚æ‰€ä»¥è¿™ä¸€éƒ¨åˆ†å†…å­˜æˆ‘ä»¬è¿˜æ˜¯å€¾å‘äºç§°å‘¼å®ƒä¸ºå †ã€‚ä½†ä½ è¦çŸ¥é“çš„æ˜¯ï¼Œå…¶å®ä¸¥æ ¼æ¥è¯´ï¼Œè¿™æ˜¯ä»æ–‡ä»¶æ˜ å°„åŒºâ€œå·â€æ¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635925054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026921,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/69/5f1f0d1c.jpg","nickname":"æ”¯ç¦»ä¹¦","note":"","ucode":"AD2570AC5EF7BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531362,"discussion_content":"ä¸¥æ ¼æ¥è¯´ï¼Œå †çš„å¤§å°åªæœ‰é€šè¿‡sbrkä¸€ç§ç³»ç»Ÿè°ƒç”¨æ–¹å¼æ¥è°ƒæ•´ï¼Œmmapæ“ä½œçš„éƒ½æ˜¯æ˜ å°„åŒºçš„å†…å­˜å§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1637292722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":1,"child_discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1026921,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/69/5f1f0d1c.jpg","nickname":"æ”¯ç¦»ä¹¦","note":"","ucode":"AD2570AC5EF7BB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532308,"discussion_content":"ä¸¥æ ¼æ„ä¹‰ä¸Šæ˜¯è¿™æ ·çš„ã€‚æ‰€ä»¥æˆ‘ç”¨äº†â€œå·â€è¿™ä¸ªè¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637572116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":531362,"ip_address":""},"score":532308,"extra":"{\"user_type\":2}"}]}]},{"had_liked":false,"id":322010,"user_name":"å¤§è„‘å£³","can_delete":false,"product_type":"c1","uid":1049447,"ip_address":"","ucode":"224E362AD55DBD","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/67/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1637135797,"is_pvip":true,"replies":[{"id":"117046","content":"ä¸æ˜¯ã€‚JVMæŠŠå¾ˆå¤šä¸œè¥¿éƒ½æ‰˜ç®¡äº†ã€‚å®ƒå’Œlinuxè¿›ç¨‹å¸ƒå±€å¾ˆä¸ç›¸åŒã€‚ä½†æ˜¯JVMä»ç„¶æœ‰å¾ˆå¤šè®¾è®¡æ·±å—ä¼ ç»Ÿçš„è¿›ç¨‹å†…å­˜ä½¿ç”¨çš„å½±å“ã€‚å…ˆå­¦å¥½Linuxè¿›ç¨‹å¸ƒå±€å§ã€‚JVMæˆ‘ä»¬æ…¢æ…¢è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1360512","ctime":1637325630,"ip_address":"","comment_id":322010,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18817004981","product_id":100094901,"comment_content":"æ‚¨è¿™é‡Œæ‰€æè¿°çš„linuxè¿›ç¨‹çš„å†…å­˜å¸ƒå±€ï¼Œå’ŒJVMçš„å†…å­˜å¸ƒå±€æ˜¯ä¸€ä¸ªç»´åº¦å—ï¼ŸJVMå†…éƒ¨çš„å †æ ˆå’Œlinxuç³»ç»Ÿçš„å †æ ˆæ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„å…³ç³»ï¼Ÿè¯·è€å¸ˆæŒ‡æ•™","like_count":4,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531504,"discussion_content":"ä¸æ˜¯ã€‚JVMæŠŠå¾ˆå¤šä¸œè¥¿éƒ½æ‰˜ç®¡äº†ã€‚å®ƒå’Œlinuxè¿›ç¨‹å¸ƒå±€å¾ˆä¸ç›¸åŒã€‚ä½†æ˜¯JVMä»ç„¶æœ‰å¾ˆå¤šè®¾è®¡æ·±å—ä¼ ç»Ÿçš„è¿›ç¨‹å†…å­˜ä½¿ç”¨çš„å½±å“ã€‚å…ˆå­¦å¥½Linuxè¿›ç¨‹å¸ƒå±€å§ã€‚JVMæˆ‘ä»¬æ…¢æ…¢è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637325630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319508,"user_name":"Jack","can_delete":false,"product_type":"c1","uid":1297112,"ip_address":"","ucode":"F3863DAEF449D5","user_header":"https://static001.geekbang.org/account/avatar/00/13/ca/d8/b109ed85.jpg","comment_is_top":false,"comment_ctime":1635838746,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14520740634","product_id":100094901,"comment_content":"å†™å¾—å¤ªå¥½äº†ï¼Œè€å¸ˆå¿«ç‚¹æ›´æ–°","like_count":3},{"had_liked":false,"id":318948,"user_name":"æ…¢åŠ¨ä½œ","can_delete":false,"product_type":"c1","uid":1133945,"ip_address":"","ucode":"62C944F4A4D8AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/79/803537db.jpg","comment_is_top":false,"comment_ctime":1635488611,"is_pvip":true,"replies":[{"id":"115618","content":"bssæ®µåœ¨ç£ç›˜ä¸Šçš„æ—¶å€™ï¼Œåªè®°å½•äº†å¤§å°ï¼Œæ¯”å¦‚100å­—èŠ‚ï¼Œåœ¨ç£ç›˜ä¸Šä¸éœ€è¦çœŸçš„ä¿ç•™100å­—èŠ‚ï¼Œåªè¦è®°ä¸‹æ¥å°±è¡Œäº†ã€‚åŠ è½½è¿›å†…å­˜çš„æ—¶å€™è¦å…ˆä¸ºä»–åˆ†é…100å­—èŠ‚ï¼Œç„¶åè¿™100å­—èŠ‚å†å’Œdataæ®µåˆå¹¶åˆ°ä¸€èµ·ï¼Œæˆä¸ºå†…å­˜é‡Œçš„data segmentã€‚å¸¦æœ‰åˆå§‹å€¼çš„å˜é‡ï¼Œæ˜¯æ”¾åˆ°data sectionçš„ã€‚è¿™ä¸ªæ–‡ç« é‡Œé¢æœ‰çš„ã€‚å†ä»”ç»†çœ‹ä¸€ä¸‹ï½","user_name":"ä½œè€…å›å¤","user_name_real":"æ°¦é’ é”¶","uid":"1360512","ctime":1635555512,"ip_address":"","comment_id":318948,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14520390499","product_id":100094901,"comment_content":"ä»æ‰§è¡Œè§†è§’é‚£å¼ å›¾ï¼Œä»£ç æ®µæ˜¯å¯è¯»å¯æ‰§è¡Œï¼Œæ•°æ®æ®µæ˜¯å¯è¯»å¯å†™ï¼ŒæŠŠé“¾æ¥å™¨è§†è§’çš„.bsså¯¹åº”ä¸ºæ•°æ®æ®µäº†ï¼Œåé¢çš„å›¾åˆæŠŠbsså•ç‹¬åˆ—å‡ºæ¥ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿbsså­˜äº†æœªåˆå§‹åŒ–çš„æ•°æ®ï¼Œåªæœ‰å¤§å°ï¼Œé‚£åˆå§‹åŒ–åæ•°æ®æ”¾å“ªé‡Œï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529440,"discussion_content":"bssæ®µåœ¨ç£ç›˜ä¸Šçš„æ—¶å€™ï¼Œåªè®°å½•äº†å¤§å°ï¼Œæ¯”å¦‚100å­—èŠ‚ï¼Œåœ¨ç£ç›˜ä¸Šä¸éœ€è¦çœŸçš„ä¿ç•™100å­—èŠ‚ï¼Œåªè¦è®°ä¸‹æ¥å°±è¡Œäº†ã€‚åŠ è½½è¿›å†…å­˜çš„æ—¶å€™è¦å…ˆä¸ºä»–åˆ†é…100å­—èŠ‚ï¼Œç„¶åè¿™100å­—èŠ‚å†å’Œdataæ®µåˆå¹¶åˆ°ä¸€èµ·ï¼Œæˆä¸ºå†…å­˜é‡Œçš„data segmentã€‚å¸¦æœ‰åˆå§‹å€¼çš„å˜é‡ï¼Œæ˜¯æ”¾åˆ°data sectionçš„ã€‚è¿™ä¸ªæ–‡ç« é‡Œé¢æœ‰çš„ã€‚å†ä»”ç»†çœ‹ä¸€ä¸‹ï½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635555512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133945,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4d/79/803537db.jpg","nickname":"æ…¢åŠ¨ä½œ","note":"","ucode":"62C944F4A4D8AC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409997,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œçœ‹å¾—ä¸ä»”ç»†ï¼Œç°åœ¨æ‰¾åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635566718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320386,"user_name":"å§‘å°„ä»™äºº","can_delete":false,"product_type":"c1","uid":1008517,"ip_address":"","ucode":"3EFC1F3E592165","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/85/1dc41622.jpg","comment_is_top":false,"comment_ctime":1636288054,"is_pvip":false,"replies":[{"id":"116175","content":"æ˜¯å·¥ä½œåœ¨ä¸åŒå±‚æ¬¡ä¸Šçš„ã€‚mmapå…¶å®åªè´Ÿè´£å°†æ–‡ä»¶ä¸å†…å­˜é¡µå¯¹åº”èµ·æ¥ã€‚è‡³äºè¿™ä¸ªé¡µæ˜¯ç¼ºé¡µçŠ¶æ€ï¼Œè¿˜æ˜¯åœ¨Cacheé‡Œï¼Œæˆ–è€…åœ¨swapåŒºåŸŸï¼Œéƒ½æ˜¯æ“ä½œç³»ç»Ÿå…³å¿ƒçš„ï¼Œmmapä¸éœ€è¦çŸ¥é“è¿™äº›çš„ã€‚æœ‰å¾ˆå¤šå¼€æºç»„ä»¶ä½¿ç”¨mmapæ¥åŠ é€ŸIOï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„æŠ€å·§ã€‚æ›´å¸¸è§çš„æ˜¯é©±åŠ¨å¼€å‘é‡Œä½¿ç”¨è¿™ä¸ªæŠ€å·§ã€‚å› ä¸ºè¿™éƒ¨åˆ†çš„èµ„æ–™æ¯”è¾ƒå¤šäº†ï¼Œè€Œä¸”å’Œæˆ‘ä»¬è¿™ä¸ªä¸“æ çš„ä¸»é¢˜å…³è”åº¦ä¹Ÿä¸æ˜¯é‚£ä¹ˆå¼ºï¼Œæ‰€ä»¥æˆ‘å°±æ²¡å†™è¿™éƒ¨åˆ†å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1636340521,"ip_address":"","comment_id":320386,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10226222646","product_id":100094901,"comment_content":"è€å¸ˆï¼Œmmapå’ŒPage Cacheçš„ä½¿ç”¨æœ‰å…³ç³»å—ï¼ŸåƒRocketMQä¸­å†™æ–‡ä»¶ä½¿ç”¨çš„å†…å­˜æ˜ å°„æ–‡ä»¶ã€‚","like_count":2,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529975,"discussion_content":"æ˜¯å·¥ä½œåœ¨ä¸åŒå±‚æ¬¡ä¸Šçš„ã€‚mmapå…¶å®åªè´Ÿè´£å°†æ–‡ä»¶ä¸å†…å­˜é¡µå¯¹åº”èµ·æ¥ã€‚è‡³äºè¿™ä¸ªé¡µæ˜¯ç¼ºé¡µçŠ¶æ€ï¼Œè¿˜æ˜¯åœ¨Cacheé‡Œï¼Œæˆ–è€…åœ¨swapåŒºåŸŸï¼Œéƒ½æ˜¯æ“ä½œç³»ç»Ÿå…³å¿ƒçš„ï¼Œmmapä¸éœ€è¦çŸ¥é“è¿™äº›çš„ã€‚æœ‰å¾ˆå¤šå¼€æºç»„ä»¶ä½¿ç”¨mmapæ¥åŠ é€ŸIOï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„æŠ€å·§ã€‚æ›´å¸¸è§çš„æ˜¯é©±åŠ¨å¼€å‘é‡Œä½¿ç”¨è¿™ä¸ªæŠ€å·§ã€‚å› ä¸ºè¿™éƒ¨åˆ†çš„èµ„æ–™æ¯”è¾ƒå¤šäº†ï¼Œè€Œä¸”å’Œæˆ‘ä»¬è¿™ä¸ªä¸“æ çš„ä¸»é¢˜å…³è”åº¦ä¹Ÿä¸æ˜¯é‚£ä¹ˆå¼ºï¼Œæ‰€ä»¥æˆ‘å°±æ²¡å†™è¿™éƒ¨åˆ†å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636340521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319624,"user_name":"æˆ‘æ˜¯å†…å­˜","can_delete":false,"product_type":"c1","uid":1711838,"ip_address":"","ucode":"3D763D4F434D50","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1e/de/cdee1780.jpg","comment_is_top":false,"comment_ctime":1635868286,"is_pvip":false,"replies":[{"id":"115855","content":"1. ä¸è¡Œçš„å“¦ï¼Œè¿™ä¸ªæ˜¯linuxå†…æ ¸æºç å†™æ­»çš„ï¼Œè¦æ”¹å°±å¾—æ”¹linuxçš„æºä»£ç å†é‡æ–°ç¼–è¯‘ã€‚2. ä½ çš„æ¯”å–»å¾ˆç›´è§‚ï¼Œéå¸¸å¥½ï¼Œé¡µè¡¨å°±æ˜¯ç®¡æˆ·å£çš„ï¼Œæ²¡åœ¨é¡µè¡¨é‡Œæ³¨å†Œçš„ï¼Œå°±æ˜¯é»‘æˆ·ï¼ŒğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635921115,"ip_address":"","comment_id":319624,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10225802878","product_id":100094901,"comment_content":"è¯·é—®ä¸‹ï¼š<br>1.IA-32çš„å†…å­˜å¸ƒå±€ä¸­kernelå 1Gï¼Œç”¨æˆ·ç©ºé—´å 3Gï¼Œè¿™ä¸ªæ¯”ä¾‹æ˜¯å¯ä»¥éšæ„è°ƒæ•´çš„å—?<br>2.64bitçš„å†…å­˜å¸ƒå±€ä¸­ï¼Œæ·±è‰²çš„ç©ºæ´éƒ¨åˆ†æ˜¯è¡¨ç¤ºå®ƒå ç€åœ°æ–¹ï¼Œä½†æ˜¯æ²¡æŠŠå®ƒå æ®çš„ç©ºé—´æ·»åŠ åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´é‡Œé¢å§ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªé»‘æˆ·ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529693,"discussion_content":"1. ä¸è¡Œçš„å“¦ï¼Œè¿™ä¸ªæ˜¯linuxå†…æ ¸æºç å†™æ­»çš„ï¼Œè¦æ”¹å°±å¾—æ”¹linuxçš„æºä»£ç å†é‡æ–°ç¼–è¯‘ã€‚2. ä½ çš„æ¯”å–»å¾ˆç›´è§‚ï¼Œéå¸¸å¥½ï¼Œé¡µè¡¨å°±æ˜¯ç®¡æˆ·å£çš„ï¼Œæ²¡åœ¨é¡µè¡¨é‡Œæ³¨å†Œçš„ï¼Œå°±æ˜¯é»‘æˆ·ï¼ŒğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635921115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1711838,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/1e/de/cdee1780.jpg","nickname":"æˆ‘æ˜¯å†…å­˜","note":"","ucode":"3D763D4F434D50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412207,"discussion_content":"å°±è¯´å¦‚æœå®šåˆ¶å‰ªè£çš„è¯ï¼Œ3:1è¿™ä¸ªæ¯”ä¾‹æ˜¯å¯ä»¥æ”¹çš„æ˜¯å§ï¼Œæ”¹å®Œåå¼•ç”¨åˆ°è¿™ä¸ªæ¯”ä¾‹å€¼çš„åœ°æ–¹ä¹Ÿä¼šæœ‰ç›¸åº”çš„æ›´æ–°ã€‚ä¸æ˜¯è¯´å¾ˆå¤šåº”ç”¨ç”¨ä¸åˆ°3Gé‚£ä¹ˆå¤§çš„è™šæ‹Ÿç©ºé—´å˜›ï¼Œé‚£ç»™kernelå¤šåˆ†é…ä¸€äº›æ˜¯ä¸æ˜¯èƒ½æé«˜ä¸€äº›æ€§èƒ½ï¼Ÿæ¯”å¦‚å‡å°‘é¡µäº¤æ¢å•¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636103366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318899,"user_name":"é€è¿‡å¿«é€’çš„ç å†œ","can_delete":false,"product_type":"c1","uid":1587666,"ip_address":"","ucode":"66EA81B3BADC73","user_header":"https://static001.geekbang.org/account/avatar/00/18/39/d2/845c0e39.jpg","comment_is_top":false,"comment_ctime":1635476115,"is_pvip":false,"replies":[{"id":"115616","content":"å¾ˆå…¨é¢ï¼æ€è€ƒå¾—å¾ˆæ·±å…¥ï¼éå¸¸å¥½","user_name":"ä½œè€…å›å¤","user_name_real":"æ°¦é’ é”¶","uid":"1360512","ctime":1635553826,"ip_address":"","comment_id":318899,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10225410707","product_id":100094901,"comment_content":"æˆ‘è¯´ä¸‹æˆ‘çš„çŒœæƒ³ï¼Œä»£ç æ®µï¼Œå¯è¯»å¯æ‰§è¡Œï¼Œæ•°æ®æ®µï¼šå¯è¯»å¯å†™ã€‚è‡³äºå †ï¼šè¿™ä¸ªæˆ‘çŒœæƒ³æ‰€åœ¨ï¼Œå¦‚æœå•ä»æˆ‘ä»¬å†™ä¸€ä¸ªHello Worldç¨‹åºçš„æ—¶å€™ï¼Œå †çœ‹èµ·æ¥æœ‰è¯»å†™æƒé™å°±è¡Œã€‚ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬æœ‰å®æ—¶ç¼–è¯‘æŠ€æœ¯ï¼Œå°±ä»æˆ‘çŸ¥é“çš„Javaæ¥è¯´ï¼Œæœ‰jitã€‚è™½ç„¶æˆ‘ä»æ¥æ²¡æ¥è§¦è¿‡è¿™ä¸ªå¤§ç¥ï¼Œä½†æ˜¯å®ƒæœ¬è´¨ä¸Šæ— éå°±æ˜¯æŠŠä¸€ä¸ªåŠ¨æ€å­—ç¬¦ç©¿å®æ—¶ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œå­—èŠ‚ç ã€‚ç”±äºé€šå¸¸å­—ç¬¦ä¸²æ˜¯åœ¨å †ä¸­çš„ï¼Œæ‰€ä»¥ç¼–è¯‘æˆçš„å¯æ‰§è¡Œå­—èŠ‚ç æ˜¯å­˜åœ¨å †é‡Œé¢çš„ã€‚æ‰€ä»¥æˆ‘çŒœæƒ³ï¼Œå †é‡Œé¢è‚¯å®šæ˜¯æœ‰æ‰§è¡Œæƒé™çš„ã€‚è¿™ä¸ªæŠ€æœ¯åƒJavaå¯ä»¥è¿›è¡Œå­—èŠ‚ç æŠ€æœ¯è¿›è¡ŒåŠ¨æ€ä»£ç†ï¼Œå¤§å¤§å¢åŠ äº†ç¨‹åºçš„çµæ´»æ€§ï¼Œä½†æ˜¯ï¼Œä¹Ÿè®©ç¨‹åºæœ‰äº†è¢«æ”»å‡»çš„å¯èƒ½æ€§ï¼Œæ¯”å¦‚å¾ˆå¤šååºåˆ—åŒ–æŠ€æœ¯æ¯”å¦‚é˜¿é‡Œå·´å·´çš„fastjsonçš„bugåº”è¯¥å’Œå³æ—¶ç¼–è¯‘æ˜¯æœ‰å…³ç³»çš„ã€‚<br>è€å¸ˆæˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¹‹å‰åœ¨åˆ«çš„ä¸“æ é‡Œçœ‹çš„å†…å®¹ï¼Œè¯´Linuxè¿›ç¨‹å’Œçº¿ç¨‹æ˜¯åœ¨å†…æ ¸é‡Œé¢æ˜¯ä¸€æ ·çš„æ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆè¿›ç¨‹çš„å­è¿›ç¨‹å’Œçº¿ç¨‹åº”è¯¥ä¹Ÿæ˜¯å¯åŒºåˆ†çš„æŠŠï¼Œè‡³å°‘è¿›ç¨‹ä¹‹å‰ï¼Œå†…å­˜é™¤äº†å…±äº«å†…å­˜ï¼Œå½¼æ­¤ä¹‹é—´æ˜¯ä¸èƒ½é€šè®¯çš„å§ï¼Œä½†æ˜¯çº¿ç¨‹æ˜¯æ— æ¡ä»¶ä½¿ç”¨è¿›ç¨‹çš„å†…å­˜æƒé™å§ã€‚å†…æ ¸è¿˜æ˜¯èƒ½å¤ŸåŒºåˆ†è¿™ä¸ªä»»åŠ¡æ˜¯è¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹çš„å§","like_count":3,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529419,"discussion_content":"å¾ˆå…¨é¢ï¼æ€è€ƒå¾—å¾ˆæ·±å…¥ï¼éå¸¸å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635553826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330136,"user_name":"=","can_delete":false,"product_type":"c1","uid":2600127,"ip_address":"","ucode":"104232A8292220","user_header":"https://static001.geekbang.org/account/avatar/00/27/ac/bf/f549183e.jpg","comment_is_top":false,"comment_ctime":1641810073,"is_pvip":false,"replies":[{"id":"120891","content":"å †ä¸€èˆ¬ä¹Ÿæ˜¯å¯å†™å¯è¯»ï¼Œè¦è®©ä»–å¯æ‰§è¡Œï¼Œå¾—ç”¨mmapæˆ–è€…mprotectæ¥å£ä¸»åŠ¨å»ä¿®æ”¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1360512","ctime":1642385543,"ip_address":"","comment_id":330136,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5936777369","product_id":100094901,"comment_content":"ä»£ç æ®µï¼šå¯è¯»å¯æ‰§è¡Œ<br>æ•°æ®æ®µï¼šå¯è¯»å¯å†™<br>å †ï¼šå¯è¯»å¯å†™å¯æ‰§è¡Œ","like_count":1,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546661,"discussion_content":"å †ä¸€èˆ¬ä¹Ÿæ˜¯å¯å†™å¯è¯»ï¼Œè¦è®©ä»–å¯æ‰§è¡Œï¼Œå¾—ç”¨mmapæˆ–è€…mprotectæ¥å£ä¸»åŠ¨å»ä¿®æ”¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642385543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326119,"user_name":"åšå®šçš„æŠ¢æ‰‹","can_delete":false,"product_type":"c1","uid":2831233,"ip_address":"","ucode":"E5A5EC6196C518","user_header":"https://static001.geekbang.org/account/avatar/00/2b/33/81/3693f4d9.jpg","comment_is_top":false,"comment_ctime":1639386276,"is_pvip":false,"replies":[{"id":"118507","content":"å¥½çš„ã€‚è¿™ä¸ªé—®é¢˜æ¯”è¾ƒå¤æ‚ï¼Œæ”¾åœ¨è¯„è®ºé‡Œç¯‡å¹…å¤ªé•¿äº†ã€‚æˆ‘å‡†å¤‡åœ¨æœ€åå¼€ä¸€ä¸ªä¸“é¢˜æ–‡ç« ä¸“é—¨è®²ä¸€ä¸‹ï¼Œå°±ä¸åœ¨è¿™é‡Œå›ç­”äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1360512","ctime":1639488515,"ip_address":"","comment_id":326119,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5934353572","product_id":100094901,"comment_content":"æ‰“å¼€éšæœºåŒ–çš„æ¨¡å¼ï¼Œä¼šè®©å†…æ ¸åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹è¿™äº›åŒºåŸŸçš„èµ·å§‹åœ°å€å¢åŠ ä¸€äº›éšæœºçš„åç§»å€¼ï¼Œè¿™èƒ½å¢åŠ ç¼“å†²åŒºæº¢å‡ºçš„éš¾åº¦ã€‚<br>è¿™ä¸ªåœ°æ–¹ä¸å¤ªæ˜ç™½ï¼Œä¸ºä»€ä¹ˆå¢åŠ éšæœºä¾¿å®œå€¼ä¹‹åä¼šå¢åŠ ç¼“å†²åŒºæº¢å‡ºçš„éš¾åº¦ã€‚å¸Œæœ›è€å¸ˆèƒ½æŠ½ç©ºè§£ç­”ä¸€ä¸‹ã€‚<br><br>ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹å…³äºéšæœºåŒ–çš„ä½œç”¨ï¼Œä¸€èˆ¬æ€§çš„å›ç­”éƒ½æ˜¯è¯´ï¼Œæé«˜ç¨‹åºçš„å®‰å…¨é˜²æ­¢æ”»å‡»ã€‚","like_count":1,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538698,"discussion_content":"å¥½çš„ã€‚è¿™ä¸ªé—®é¢˜æ¯”è¾ƒå¤æ‚ï¼Œæ”¾åœ¨è¯„è®ºé‡Œç¯‡å¹…å¤ªé•¿äº†ã€‚æˆ‘å‡†å¤‡åœ¨æœ€åå¼€ä¸€ä¸ªä¸“é¢˜æ–‡ç« ä¸“é—¨è®²ä¸€ä¸‹ï¼Œå°±ä¸åœ¨è¿™é‡Œå›ç­”äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639488515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358955,"user_name":"muzigef","can_delete":false,"product_type":"c1","uid":1670664,"ip_address":"åŒ—äº¬","ucode":"BB65A61733D1D4","user_header":"https://static001.geekbang.org/account/avatar/00/19/7e/08/a50945c3.jpg","comment_is_top":false,"comment_ctime":1665064221,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665064221","product_id":100094901,"comment_content":"ä»£ç æ®µè·Ÿæ•°æ®æ®µçš„ä¸­é—´æœ‰ä¿æŠ¤æ®µï¼Œä½†æ˜¯è¿™ 5 ä¸ªå†…å­˜åŒºåŸŸä¹±åºä¹‹åï¼Œä¿æŠ¤æ®µå°±å¤±å»ä½œç”¨äº†ï¼Œç³»ç»Ÿå¦‚ä½•ä¿éšœä»£ç æ®µçš„å®‰å…¨å‘¢","like_count":0},{"had_liked":false,"id":357448,"user_name":"zssdhr","can_delete":false,"product_type":"c1","uid":1010602,"ip_address":"åŒ—äº¬","ucode":"2DFE1F017A46EB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/aa/ec09c4b4.jpg","comment_is_top":false,"comment_ctime":1663259451,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663259451","product_id":100094901,"comment_content":"è€å¸ˆï¼Œä½¿ç”¨ mmap å…±äº«å†…å­˜ï¼Œè¿›ç¨‹ A ä¿®æ”¹çš„å†…å®¹æ˜¯ä¸æ˜¯éœ€è¦åˆ·æ–°åˆ°ç£ç›˜å è¿›ç¨‹ B æ‰èƒ½çœ‹è§ï¼Ÿè¿™ç§å…±äº«å†…å­˜çš„é€Ÿåº¦ä¼šä¸ä¼šæ¯” System V çš„ shm å…±äº«å†…å­˜æ–¹å¼ï¼ˆå°†å¤šä¸ªè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´æ˜ å°„åˆ°åŒä¸€å—ç‰©ç†å†…å­˜ï¼‰æ…¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":340092,"user_name":"VenFox","can_delete":false,"product_type":"c1","uid":1002112,"ip_address":"","ucode":"11F08AD5685505","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/80/52e9e50e.jpg","comment_is_top":false,"comment_ctime":1648601630,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648601630","product_id":100094901,"comment_content":"æˆ‘ä»¬é€šå¸¸åœ¨ C çš„ä»£ç é‡Œä¼šå°†æ— æ•ˆçš„æŒ‡é’ˆèµ‹å€¼ä¸º NULLã€‚å› æ­¤ï¼Œè¿™é‡Œä¼šå‡ºç°ä¸€æ®µä¸å¯è®¿é—®çš„å†…å­˜ä¿ç•™åŒºï¼Œé˜²æ­¢ç¨‹åºå› ä¸ºå‡ºç° bugï¼Œå¯¼è‡´è¯»æˆ–å†™äº†ä¸€äº›å°å†…å­˜åœ°å€çš„æ•°æ®ï¼Œè€Œä½¿å¾—ç¨‹åºè·‘é£ã€‚<br>è€å¸ˆï¼Œè¿™æ®µè¯çœ‹ä¸å¤ªæ‡‚ï¼Œè®¾ä¸ºnullè·Ÿè¯»å†™å°å†…å­˜åœ°å€æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ","like_count":0},{"had_liked":false,"id":334199,"user_name":"ä½³ä¼¦","can_delete":false,"product_type":"c1","uid":1064508,"ip_address":"","ucode":"3AE8098B5BE716","user_header":"https://static001.geekbang.org/account/avatar/00/10/3e/3c/fc3ad983.jpg","comment_is_top":false,"comment_ctime":1644808206,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644808206","product_id":100094901,"comment_content":"ä»€ä¹ˆæ—¶å€™ä½¿ç”¨brkåˆ†é…ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨mmapå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":329195,"user_name":"ç‰™é½¿å¤©å¤©æ™’å¤ªé˜³","can_delete":false,"product_type":"c1","uid":2817633,"ip_address":"","ucode":"319289611BE05B","user_header":"https://static001.geekbang.org/account/avatar/00/2a/fe/61/2ee87c68.jpg","comment_is_top":false,"comment_ctime":1641204005,"is_pvip":false,"replies":[{"id":"120113","content":"æ²¡å…³ç³»ï¼Œå…ˆç»§ç»­å¾€ä¸‹çœ‹ã€‚æ¦‚å¿µç¡®å®å°±æ˜¯è¿™æ ·ï¼Œä¸€å¼€å§‹æœ‰ç‚¹æ¯ç‡¥ã€‚åŠ¨æ‰‹å®è·µæœ€å¥½çš„è«è¿‡äºè‡ªå·±å†™ä¸€ä¸ªtoyæ“ä½œç³»ç»Ÿå’Œä¸€ä¸ªå°è¯­è¨€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1360512","ctime":1641536037,"ip_address":"","comment_id":329195,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641204005","product_id":100094901,"comment_content":"è€å¸ˆï¼Œæ„Ÿè§‰çœ‹äº†ä¸€å †æ¦‚å¿µï¼Œä½†æ˜¯æ²¡æœ‰å…·ä½“çš„äº†è§£ï¼Œèƒ½å¦æç‚¹å®è·µå‘¢ã€‚","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544474,"discussion_content":"æ²¡å…³ç³»ï¼Œå…ˆç»§ç»­å¾€ä¸‹çœ‹ã€‚æ¦‚å¿µç¡®å®å°±æ˜¯è¿™æ ·ï¼Œä¸€å¼€å§‹æœ‰ç‚¹æ¯ç‡¥ã€‚åŠ¨æ‰‹å®è·µæœ€å¥½çš„è«è¿‡äºè‡ªå·±å†™ä¸€ä¸ªtoyæ“ä½œç³»ç»Ÿå’Œä¸€ä¸ªå°è¯­è¨€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641536037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329194,"user_name":"ç‰™é½¿å¤©å¤©æ™’å¤ªé˜³","can_delete":false,"product_type":"c1","uid":2817633,"ip_address":"","ucode":"319289611BE05B","user_header":"https://static001.geekbang.org/account/avatar/00/2a/fe/61/2ee87c68.jpg","comment_is_top":false,"comment_ctime":1641203898,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641203898","product_id":100094901,"comment_content":"ä»å›¾ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´ä¹‹é—´æœ‰ä¸€ä¸ªå·¨å¤§çš„å†…å­˜ç©ºæ´ã€‚è¿™å—ç©ºé—´ä¹‹æ‰€ä»¥ç”¨æ›´æ·±é¢œè‰²æ¥åŒºåˆ†ï¼Œæ˜¯å› ä¸ºè¿™å—ç©ºé—´çš„ä¸å¯è®¿é—®æ˜¯ç”± CPU æ¥ä¿è¯çš„ï¼ˆè¿™é‡Œçš„åœ°å€éƒ½ä¸æ»¡è¶³ Intel 64 çš„ Canonical formï¼‰ã€‚<br>==================<br>è¿™æ®µè¯æ²¡æ‡‚","like_count":0},{"had_liked":false,"id":327182,"user_name":"WAè‡ªåŠ¨æœº","can_delete":false,"product_type":"c1","uid":2172274,"ip_address":"","ucode":"9328FF7AFC503A","user_header":"https://static001.geekbang.org/account/avatar/00/21/25/72/3d0af192.jpg","comment_is_top":false,"comment_ctime":1639969752,"is_pvip":false,"replies":[{"id":"119044","content":"ç»§ç»­å‘åçœ‹ï¼Œå­¦ä¹ å®Œç¬¬åè¯¾å¯ä»¥è‡ªå·±å†æ€è€ƒä¸€ä¸‹ã€‚å¦‚æœè¿˜æ˜¯æ²¡èƒ½è§£ç­”ä½ çš„ç–‘é—®ï¼Œå¯ä»¥åŠ å…¥å¾®ä¿¡ç¾¤ç»§ç»­æé—®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1360512","ctime":1640016917,"ip_address":"","comment_id":327182,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1639969752","product_id":100094901,"comment_content":"è€å¸ˆï¼Œå‰é¢çš„æ–‡ç« æåˆ°è¿‡ï¼šé€šè¿‡è™šæ‹Ÿå†…å­˜ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹çš„é¡µè¡¨ã€‚ç”¨forkåˆ›å»ºçˆ¶å­è¿›ç¨‹åº”è¯¥éƒ½æ˜¯æœ‰è‡ªå·±ç‹¬ç«‹çš„é¡µè¡¨å•Šï¼Œä»–ä»¬æ˜¯æ€ä¹ˆåšåˆ°å…±äº«å†…å­˜çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540324,"discussion_content":"ç»§ç»­å‘åçœ‹ï¼Œå­¦ä¹ å®Œç¬¬åè¯¾å¯ä»¥è‡ªå·±å†æ€è€ƒä¸€ä¸‹ã€‚å¦‚æœè¿˜æ˜¯æ²¡èƒ½è§£ç­”ä½ çš„ç–‘é—®ï¼Œå¯ä»¥åŠ å…¥å¾®ä¿¡ç¾¤ç»§ç»­æé—®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640016917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1016777,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","nickname":"thomas","note":"","ucode":"9AB945308F1B50","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":541296,"discussion_content":"éº»çƒ¦ç»™ä¸‹å¾®ä¿¡ç¾¤å·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640325008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":540324,"ip_address":""},"score":541296,"extra":""}]},{"author":{"id":1135912,"avatar":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","nickname":"é»‘è‰²æ¯›è¡£","note":"","ucode":"FF7E235F91BA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546243,"discussion_content":"æ˜ å°„åˆ°åŒä¸€å—ç‰©ç†å†…å­˜å°±è¡Œäº†ï½ï½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642252153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324673,"user_name":"Casper","can_delete":false,"product_type":"c1","uid":1022129,"ip_address":"","ucode":"69282EB175B48E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","comment_is_top":false,"comment_ctime":1638536637,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1638536637","product_id":100094901,"comment_content":"è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œåœ¨32ä½æœºå™¨ä¸Š, æˆ‘å®‰è£…äº†4Gçš„ç‰©ç†å†…å­˜ï¼Œå†…æ ¸ä¼šå æ®3G~4Gçš„è™šæ‹Ÿç©ºé—´åœ°å€ï¼Œæ­¤æ—¶å†…æ ¸çš„å®é™…åŠ è½½åœ°å€æ˜¯3G~4Gä¹‹é—´çš„æŸä¸ªä½ç½®ä¸Šå—? <br>å¦‚æœ32ä½åªå®‰è£…äº†2Gå†…å­˜, æ­¤æ—¶å†…æ ¸å æ®çš„å†…å­˜ä¼šåŠ è½½åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢?","like_count":0,"discussions":[{"author":{"id":2839104,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/52/40/1fe5be2b.jpg","nickname":"è”é€š","note":"","ucode":"EAA1331CFAFDA3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551051,"discussion_content":"ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜ä¹‹é—´çš„æ˜ å°„ä¸æ˜¯æŒ‰ç…§åœ°å€ä¸€ä¸€å¯¹åº”çš„ï¼Œè™šæ‹Ÿå†…å­˜åˆ’åˆ†çš„å„ç§åŒºåŸŸæ˜¯é€»è¾‘ä¸Šçš„æ¦‚å¿µï¼ŒåŒæ—¶é€šè¿‡å¯¹é¡µçš„æƒé™æ§åˆ¶è¾¾åˆ°ä¸åŒçš„è®¿é—®æƒé™ï¼Œä¸æ˜¯ç‰©ç†ä¸Šçš„æ¦‚å¿µ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644889248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323497,"user_name":"é¾å°‘Â²â°Â¹â¹","can_delete":false,"product_type":"c1","uid":1493902,"ip_address":"","ucode":"04C30390DFEC2F","user_header":"https://static001.geekbang.org/account/avatar/00/16/cb/8e/a1e9b721.jpg","comment_is_top":false,"comment_ctime":1637933534,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637933534","product_id":100094901,"comment_content":"1 â€œè¿™ 5 ä¸ªå†…å­˜åŒºåŸŸé€šå¸¸æ˜¯ç”±é«˜åœ°å€å‘ä½åœ°å€é¡ºåºæ’åˆ—çš„â€ï¼Œè¿™å¥è¯æ˜¯ä¸æ˜¯å†™åäº†ï¼Œåº”è¯¥æ˜¯â€œè¿™ 5 ä¸ªå†…å­˜åŒºåŸŸé€šå¸¸æ˜¯ç”±ä½åœ°å€å‘é«˜åœ°å€é¡ºåºæ’åˆ—çš„â€ï¼›<br>2 brkæ˜¯ä»€ä¹ˆç¼©å†™å‘¢ï¼Ÿ<br>3 elfæ–‡ä»¶çš„å…¶ä»–æè¿°sectionåˆåˆ†åˆ«æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿ<br>4 Linuxå†…å­˜ç©ºé—´ä¸ºä»€ä¹ˆå’Œè¿›ç¨‹çš„è™šæ‹Ÿç©ºé—´å…±ç”¨ä¸€ä¸ªè™šæ‹Ÿå†…å­˜ç©ºé—´å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":322295,"user_name":"æ”¯ç¦»ä¹¦","can_delete":false,"product_type":"c1","uid":1026921,"ip_address":"","ucode":"AD2570AC5EF7BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ab/69/5f1f0d1c.jpg","comment_is_top":false,"comment_ctime":1637292234,"is_pvip":false,"replies":[{"id":"117041","content":"è¿™é‡Œåªé™å¯ä»¥ç›´æ¥è¿è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ä¾‹å¦‚windowsä¸Šçš„exeæ–‡ä»¶ï¼Œlinuxä¸Šçš„elfæ–‡ä»¶å“ˆã€‚Javaä¸­æ˜¯å¦å¤–ä¸€å›äº‹ï¼Œå®ƒæ˜¯ç”±JVMæ‰˜ç®¡çš„ã€‚æˆ‘ä»¬åé¢å†è°ˆå“ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1360512","ctime":1637324841,"ip_address":"","comment_id":322295,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637292234","product_id":100094901,"comment_content":"è¯·æ•™è€å¸ˆï¼Œæ•°æ®æ®µå’ŒBSSæ®µå­˜å‚¨çš„å†…å®¹ä¼šå˜åŒ–å—ï¼Ÿåœ¨javaä¸­ï¼Œä»–ä»¬åªå­˜å‚¨åŸºç¡€ç±»å‹çš„æ•°æ®å—ï¼Ÿå¦‚æœæ˜¯newä¸€ä¸ªobjectä¸å°±è·‘å †é‡Œäº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531493,"discussion_content":"è¿™é‡Œåªé™å¯ä»¥ç›´æ¥è¿è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ä¾‹å¦‚windowsä¸Šçš„exeæ–‡ä»¶ï¼Œlinuxä¸Šçš„elfæ–‡ä»¶å“ˆã€‚Javaä¸­æ˜¯å¦å¤–ä¸€å›äº‹ï¼Œå®ƒæ˜¯ç”±JVMæ‰˜ç®¡çš„ã€‚æˆ‘ä»¬åé¢å†è°ˆå“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637324841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321845,"user_name":".","can_delete":false,"product_type":"c1","uid":1335848,"ip_address":"","ucode":"C0541289C44AF8","user_header":"https://static001.geekbang.org/account/avatar/00/14/62/28/0356880b.jpg","comment_is_top":false,"comment_ctime":1637064266,"is_pvip":false,"replies":[{"id":"117055","content":"åœ°å€éšæœºæ˜¯ç”±ä¸¤è€…ä¸€èµ·å†³å®šçš„ï¼šæ“ä½œç³»ç»Ÿçš„åŠ è½½å™¨ç”Ÿæˆéšæœºåœ°å€ï¼Œç¼–è¯‘å™¨ä¿è¯äº§ç”Ÿçš„ä»£ç æ˜¯åœ°å€æ— å…³ä»£ç ã€‚ç¬¬äºŒä¸ªé—®é¢˜ï¼šæ˜¯çš„ï¼Œè¿™æ˜¯å‰æã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1360512","ctime":1637326568,"ip_address":"","comment_id":321845,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637064266","product_id":100094901,"comment_content":"ä¸å¤§ç†è§£éšæœºåœ°å€æ˜¯ç”±å†…æ ¸æ§åˆ¶è¿˜æ˜¯gccçš„pieæ§åˆ¶ï¼Ÿ<br>æ˜¯ä¸æ˜¯åªæœ‰å¯ç”¨gccçš„pieå†…æ ¸æ‰ä¼šå¯¹ç¨‹åºä½¿ç”¨éšæœºåœ°å€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531516,"discussion_content":"åœ°å€éšæœºæ˜¯ç”±ä¸¤è€…ä¸€èµ·å†³å®šçš„ï¼šæ“ä½œç³»ç»Ÿçš„åŠ è½½å™¨ç”Ÿæˆéšæœºåœ°å€ï¼Œç¼–è¯‘å™¨ä¿è¯äº§ç”Ÿçš„ä»£ç æ˜¯åœ°å€æ— å…³ä»£ç ã€‚ç¬¬äºŒä¸ªé—®é¢˜ï¼šæ˜¯çš„ï¼Œè¿™æ˜¯å‰æã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637326568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321052,"user_name":"é€†ç«¥","can_delete":false,"product_type":"c1","uid":2693687,"ip_address":"","ucode":"C45F16951E01B6","user_header":"https://static001.geekbang.org/account/avatar/00/29/1a/37/5a5d88ea.jpg","comment_is_top":false,"comment_ctime":1636635469,"is_pvip":false,"replies":[{"id":"116617","content":"ç¡®å®ã€‚æ­£å¦‚å¼€ç¯‡æ‰€è¯´ï¼Œè¿™é—¨è¯¾æ˜¯ä»å¾ˆå¤šé—¨è¯¾ä¸­ï¼ŒæŠŠå®ƒä»¬é‡Œé¢ä¸å†…å­˜ç®¡ç†ç›¸å…³çš„éƒ¨é—¨å‚ç›´åœ°æ€»ç»“å‡ºæ¥çš„ã€‚å¦‚æœä¾èµ–äº†å…¶ä»–æ¨¡å—ï¼Œæˆ‘å°½é‡æ¨¡ç³Šå¤„ç†çš„ã€‚ä½ å¯ä»¥çœ‹çœ‹å¼€ç¯‡è¯é‡Œæåˆ°çš„è¯¾ã€‚å¦‚æœæ¨èä¹¦çš„è¯ï¼Œæœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾çš„ã€Šè®¡ç®—æœºç»„æˆã€‹ï¼Œã€Šè®¡ç®—æœºä½“ç³»ç»“æ„ã€‹ï¼Œã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ç­‰ä¹¦éƒ½æ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1636698311,"ip_address":"","comment_id":321052,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636635469","product_id":100094901,"comment_content":"å¬äº†è€å¸ˆçš„3èŠ‚è¯¾ï¼Œå¾ˆå¸¦åŠ²å„¿ã€‚ä½†æ„Ÿè§‰åªæœ‰è®¡ç®—æœºç»„æˆåŸç†å’Œæ“ä½œç³»ç»Ÿ2å—å„¿çš„åŸºç¡€ï¼Œç†è§£èµ·æ¥ä¸å¤Ÿè¿è´¯ã€‚è€å¸ˆèƒ½ä»â€œå…¥é—¨æ‰“åŸºç¡€â€å’Œâ€œè¿›é˜¶â€çš„è§’åº¦ï¼Œæ¨èäº›ä¹¦æˆ–è€…ç»™å‡ºä¸€ä¸ªæœ¬è¯¾ç¨‹ç›¸å…³çš„çŸ¥è¯†ä½“ç³»ï¼Œè¿™æ ·å­¦èµ·æ¥ä¼šæ›´å¥½","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530201,"discussion_content":"ç¡®å®ã€‚æ­£å¦‚å¼€ç¯‡æ‰€è¯´ï¼Œè¿™é—¨è¯¾æ˜¯ä»å¾ˆå¤šé—¨è¯¾ä¸­ï¼ŒæŠŠå®ƒä»¬é‡Œé¢ä¸å†…å­˜ç®¡ç†ç›¸å…³çš„éƒ¨é—¨å‚ç›´åœ°æ€»ç»“å‡ºæ¥çš„ã€‚å¦‚æœä¾èµ–äº†å…¶ä»–æ¨¡å—ï¼Œæˆ‘å°½é‡æ¨¡ç³Šå¤„ç†çš„ã€‚ä½ å¯ä»¥çœ‹çœ‹å¼€ç¯‡è¯é‡Œæåˆ°çš„è¯¾ã€‚å¦‚æœæ¨èä¹¦çš„è¯ï¼Œæœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾çš„ã€Šè®¡ç®—æœºç»„æˆã€‹ï¼Œã€Šè®¡ç®—æœºä½“ç³»ç»“æ„ã€‹ï¼Œã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ç­‰ä¹¦éƒ½æ˜¯å¯ä»¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636698311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320689,"user_name":"Geek_27eb54","can_delete":false,"product_type":"c1","uid":2715118,"ip_address":"","ucode":"7D1EE10A61C7C0","user_header":"","comment_is_top":false,"comment_ctime":1636452472,"is_pvip":false,"replies":[{"id":"116320","content":"è¿™ç§å†™è¿›ä»£ç æ®µçš„åç§»éƒ½æ˜¯ç¼–è¯‘æ—¶å°±å†³å®šäº†çš„ã€‚æ‰€ä»¥ä¸ä¼šå‡ºç°â€œå°äºâ€çš„æƒ…å†µã€‚å› ä¸ºè¿™äº›åœ°å€éƒ½æ˜¯ç¼–è¯‘å™¨æ ¹æ®åœ°å€çš„æƒ…å†µç®—å‡ºæ¥çš„ã€‚è‡³äºä½ é—®çš„å…¶ä»–çš„ï¼Œæ˜¯ä¸æ˜¯æ•°æ®æ®µï¼Œåªå‡­ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä¹Ÿæ²¡åŠæ³•åˆ¤æ–­çš„ã€‚ä½ è¦ç»“åˆC++æºä»£ç å»çœ‹ã€‚gccæ‰“å¼€-gé€‰é¡¹ï¼Œç„¶åå†ç”¨objdumpæŸ¥çœ‹å¯æ‰§è¡Œç¨‹åºå°±èƒ½çœ‹åˆ°äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1636507409,"ip_address":"","comment_id":320689,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636452472","product_id":100094901,"comment_content":"åœ¨åŠ è½½åŠ¨æ€é“¾æ¥åº“æ—¶ï¼Œé€šå¸¸æœ‰3æ®µå†…å­˜å€¼å¾—å…³æ³¨ï¼Œå…¶ä¸­å‰ä¸¤æ®µæ˜¯å¯è¯»å¯æ‰§è¡Œçš„ï¼Œé€šè¿‡åˆ†ææ˜¯ä»£ç çš„ï¼Œå¯ä»¥é€šè¿‡readelfçœ‹åˆ°è¦åŠ è½½çš„ä¸¤æ®µï¼Œè¿˜æœ‰ä¸€æ®µæ˜¯å¯è¯»å¯å†™çš„ï¼Œè¿™å—æ˜¯æ•°æ®æ®µä¹ˆï¼Ÿï¼Ÿï¼Ÿæˆ‘åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ç»å¸¸å‘ç°è¿™æ ·çš„ä¸€éƒ¨åˆ†ç¨‹åº:<br>    ```<br>    add $0x4f196,%ebx<br>    mov 0x4a04(%ebx),%eax<br>    addl $0x1,0x10(%eax)<br>  ```<br>é¦–å…ˆï¼Œebxä¸­å­˜æ”¾çš„æ˜¯å½“å‰çš„ipæŒ‡é’ˆï¼Œé€šè¿‡åŠ ä¸Šä¸€å®šçš„åç§»æŒ‡å‘äº†ç¬¬ä¸‰ä¸ªå¯è¯»å¯å†™çš„æ®µçš„åŸºå€ï¼ŒåŸºå€+0x4a04åçš„æ•°æ®ï¼Œå°±æ˜¯åŠ¨æ€åº“ä¸­çš„æ•°æ®æ®µæ•°æ®ä¹ˆï¼Ÿ0x4a04æ˜¯å¦æ˜¯ç¼–è¯‘æ—¶å°±è®¡ç®—å¥½çš„ï¼Ÿæ˜¯å¦ä¼šå­˜åœ¨è¿™ä¸ªæ®µåˆ†é…çš„ç©ºé—´å°äºåŸºå€+0x4a04çš„æƒ…å†µï¼Ÿå¦‚æœå­˜åœ¨ç¨‹åºåˆæ˜¯å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µå‘¢ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530084,"discussion_content":"è¿™ç§å†™è¿›ä»£ç æ®µçš„åç§»éƒ½æ˜¯ç¼–è¯‘æ—¶å°±å†³å®šäº†çš„ã€‚æ‰€ä»¥ä¸ä¼šå‡ºç°â€œå°äºâ€çš„æƒ…å†µã€‚å› ä¸ºè¿™äº›åœ°å€éƒ½æ˜¯ç¼–è¯‘å™¨æ ¹æ®åœ°å€çš„æƒ…å†µç®—å‡ºæ¥çš„ã€‚è‡³äºä½ é—®çš„å…¶ä»–çš„ï¼Œæ˜¯ä¸æ˜¯æ•°æ®æ®µï¼Œåªå‡­ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä¹Ÿæ²¡åŠæ³•åˆ¤æ–­çš„ã€‚ä½ è¦ç»“åˆC++æºä»£ç å»çœ‹ã€‚gccæ‰“å¼€-gé€‰é¡¹ï¼Œç„¶åå†ç”¨objdumpæŸ¥çœ‹å¯æ‰§è¡Œç¨‹åºå°±èƒ½çœ‹åˆ°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636507409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319462,"user_name":"æŸ’","can_delete":false,"product_type":"c1","uid":2419502,"ip_address":"","ucode":"D41241629321A1","user_header":"https://static001.geekbang.org/account/avatar/00/24/eb/2e/90fea784.jpg","comment_is_top":false,"comment_ctime":1635821046,"is_pvip":false,"replies":[{"id":"115851","content":"linuxå†…æ ¸ä»£ç é‡Œçš„å£°æ˜å°±æ˜¯addrã€‚å½¢å‚å°±æ˜¯ä¸ªåå­—è€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635920554,"ip_address":"","comment_id":319462,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635821046","product_id":100094901,"comment_content":"void* mmap(void* addr, size_t length, int prot, int flags, int fd, off_t offset);<br>ç¬¬ä¸€ä¸ªå½¢å‚åæ˜¯startï¼Œè€Œä¸æ˜¯addrï¼Œ å½¢å‚å  è§åçŸ¥æ„ã€‚","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529643,"discussion_content":"linuxå†…æ ¸ä»£ç é‡Œçš„å£°æ˜å°±æ˜¯addrã€‚å½¢å‚å°±æ˜¯ä¸ªåå­—è€Œå·²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635920554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319358,"user_name":"éµ¼","can_delete":false,"product_type":"c1","uid":1101766,"ip_address":"","ucode":"F6561743835F7E","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/c6/6a2d0a5e.jpg","comment_is_top":false,"comment_ctime":1635758279,"is_pvip":false,"replies":[{"id":"115807","content":"ç¬¬ä¸€ä¸ªé—®é¢˜å’Œç¬¬äºŒä¸ªé—®é¢˜ç¡®å®å°±æ˜¯ä¸€å›äº‹ã€‚ä»£ç æ®µåœ¨åŠ è½½è¿›å†…å­˜æ—¶ï¼Œå®ƒçš„å¤§å°å°±å·²ç»å›ºå®šäº†ï¼Œç³»ç»Ÿä¸ºå®ƒåˆ†é…åˆé€‚å¤§å°çš„è™šæ‹Ÿå†…å­˜ã€‚å †çš„æœ€å¤§å¤§å°ä¹Ÿä¼šå—åˆ°é™åˆ¶çš„ã€‚å¦‚æœä¸å¤Ÿç”¨äº†ï¼Œè¿™å°±æ˜¯out of memoryå’¯ï¼Œåˆ†é…ä¸å‡ºæ–°çš„å†…å­˜ï¼Œä½ è¿™æ—¶å†è°ƒç”¨åˆ†é…å†…å­˜çš„å‡½æ•°ï¼Œå°±ä¼šå¾—åˆ°NULLæŒ‡é’ˆæˆ–è€…Errnoï¼Œå…·ä½“è¦çœ‹è¿™ä¸ªå‡½æ•°æ˜¯æ€ä¹ˆè§„å®šçš„ã€‚<br>æœ€åä¸€ä¸ªé—®é¢˜ï¼Œbssæ®µæ˜¯å’Œæ•°æ®æ®µé åœ¨ä¸€èµ·çš„ï¼Œå› ä¸ºå®ƒä»¬çš„è¯»å†™æƒé™æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒä¹‹å¤„ä»…ä»…æ˜¯bssæ®µå…¨0å¡«å……ï¼Œæ‰€ä»¥åœ¨ç£ç›˜æ–‡ä»¶ä¸­åªè®°å½•å¤§å°ï¼Œä¸éœ€è¦çœŸçš„å¼„ä¸€ä¸ªå…¨0çš„sectionã€‚æ‰€ä»¥å®ƒä¸æ˜¯å †ä¹Ÿä¸æ˜¯æ ˆï¼Œä¹Ÿå°±ä¸èƒ½åŠ¨æ€åˆ†é…æˆ–è€…å˜åŒ–å¤§å°ã€‚bsså°±æ˜¯data segmentã€‚ä½ å¯ä»¥æ€è€ƒä¸€ä¸‹å…¨å±€å£°æ˜ä¸€ä¸ªæ•°ç»„å’Œåœ¨å‡½æ•°å†…éƒ¨å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œä»¥åŠåŠ¨æ€mallocä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸‰ä¸ªæ•°ç»„åˆ†åˆ«åœ¨å“ªé‡Œã€‚è¿˜å¯ä»¥è‡ªå·±åŠ¨æ‰‹è¯•ä¸€ä¸‹ï¼ŒéªŒè¯ä¸€ä¸‹è‡ªå·±çš„çŒœæƒ³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æµ·çº³","uid":"1360512","ctime":1635834650,"ip_address":"","comment_id":319358,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1635758279","product_id":100094901,"comment_content":"è€å¸ˆï¼Œæœ‰3ä¸ªé—®é¢˜ã€‚<br>1.ä»£ç æ®µæ˜¯è¿ç»­çš„è™šæ‹Ÿå†…å­˜ç©ºé—´å—ï¼Ÿæ“ä½œç³»ç»Ÿæ˜¯æŒ‰é¡µåˆ’åˆ†çš„ï¼Œæ¯æ¬¡åŠ è½½ä¸€é¡µçš„æ•°æ®ï¼Œå¦‚æœä»£ç æ®µè¶…è¿‡ 4kï¼Œæ“ä½œç³»ç»Ÿä¼šå‡ºå‘ç¼ºé¡µå¼‚å¸¸ï¼Œç„¶åå†åŠ è½½è‡³å†…å­˜ ã€‚æ­¤æ—¶é‡æ–°åŠ è½½çš„ä»£ç æ®µæ˜¯é‡æ–°åˆ†é…åœ¨å…¶å®ƒä½ç½®è¿˜æ˜¯è¯´è¿›ç¨‹å¯åŠ¨çš„æ—¶å€™ä¼š å›ºå®šä¸€ä¸ªå¤§çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ä½œä¸ºä»£ç æ®µï¼Ÿæ„Ÿè§‰å³ä½¿åˆ†äº†ä¸€ä¸ªå¤§çš„è™šæ‹Ÿç©ºé—´åœ°å€æ®µï¼Œæ˜¯ä¸æ˜¯ä¹Ÿæœ‰ç”¨å°½çš„æ—¶å€™ï¼Ÿè¿˜æ˜¯è¯´æ“ä½œç³»ç»Ÿåœ¨åŠ è½½è¿›ç¨‹çš„æ—¶å€™å·²ç»çŸ¥é“ä»£ç æ®µçš„èŒƒå›´äº†ï¼ˆè¿›ç¨‹çš„å¤§å°ï¼‰ï¼Œæ‰€ä»¥åˆ†é…è™šæ‹Ÿå†…å­˜ç©ºé—´ çš„æ—¶å€™ å…¶å®å·²ç»ç¡®å®šä»£ç æ®µèŒƒå›´äº†ã€‚é‚£æ•°æ®æ®µçš„èŒƒå›´æ€ä¹ˆç¡®å®šå‘¢ï¼Ÿ<br>2.å…¶å®ä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå †çš„å¤§å°ï¼Œä¸ä¹±åºè¿˜èƒ½ç†è§£ï¼Œé¡ºåºä¹±çš„è¯ï¼Œå¦‚æœä»£ç æ®µåœ¨å †çš„é«˜ä½ä¸Šé¢ï¼Œé‚£å †çš„å¤§å°ä¸æ˜¯ç¡®å®šäº†å—ï¼Ÿå¦‚æœå †ä¸å¤Ÿæ€ä¹ˆåŠï¼Ÿè™šæ‹Ÿç©ºé—´ä¸è¿ç»­çš„å †ï¼Œbrkå¦‚ä½•ç¡®å®šï¼Œæœ‰å¤šä¸ªbrkå—ï¼Ÿ<br>3.bssæ˜¯æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œstaticå˜é‡ï¼Œè®°å½•çš„æ˜¯é•¿åº¦ã€‚è¿™ä¸ªæˆ‘æƒ³äº†æƒ³ï¼Œåº”è¯¥å°±æ˜¯ä¸ºäº†å‡å°‘å†…å­˜ç©ºé—´ï¼Œæ¯”å¦‚åˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦æ¯”è¾ƒå¤§çš„æ•°ç»„ï¼Œå¦‚æœç›´æ¥åœ¨dataæ•°æ®æ®µåˆ†é…ï¼Œä¼šå ç”¨å¾ˆå¤§å†…å­˜ï¼Œå…¶å®è¿˜éƒ½æ˜¯0ï¼Œæ‰€ä»¥bssè‡³è®°å½•äº†å˜é‡åå­—å’Œé•¿åº¦ã€‚é‚£å¦‚æœåç»­ç¨‹åºå †è¿™ä¸ªæ•°ç»„è¿›è¡Œäº†èµ‹å€¼æ“ä½œï¼Œå› ä¸ºåªæœ‰é•¿åº¦å’Œåç§°ï¼Œæ‰€ä»¥æ˜¯ç›´æ¥åˆ†é… åœ¨å †æˆ–è€…æ ˆä¸­çš„è¿˜æ˜¯æ•°æ®æ®µä¸­ï¼Ÿbssçš„æ•°æ®ä¼šæœ‰ä»€ä¹ˆå˜åŒ–å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529607,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜å’Œç¬¬äºŒä¸ªé—®é¢˜ç¡®å®å°±æ˜¯ä¸€å›äº‹ã€‚ä»£ç æ®µåœ¨åŠ è½½è¿›å†…å­˜æ—¶ï¼Œå®ƒçš„å¤§å°å°±å·²ç»å›ºå®šäº†ï¼Œç³»ç»Ÿä¸ºå®ƒåˆ†é…åˆé€‚å¤§å°çš„è™šæ‹Ÿå†…å­˜ã€‚å †çš„æœ€å¤§å¤§å°ä¹Ÿä¼šå—åˆ°é™åˆ¶çš„ã€‚å¦‚æœä¸å¤Ÿç”¨äº†ï¼Œè¿™å°±æ˜¯out of memoryå’¯ï¼Œåˆ†é…ä¸å‡ºæ–°çš„å†…å­˜ï¼Œä½ è¿™æ—¶å†è°ƒç”¨åˆ†é…å†…å­˜çš„å‡½æ•°ï¼Œå°±ä¼šå¾—åˆ°NULLæŒ‡é’ˆæˆ–è€…Errnoï¼Œå…·ä½“è¦çœ‹è¿™ä¸ªå‡½æ•°æ˜¯æ€ä¹ˆè§„å®šçš„ã€‚\næœ€åä¸€ä¸ªé—®é¢˜ï¼Œbssæ®µæ˜¯å’Œæ•°æ®æ®µé åœ¨ä¸€èµ·çš„ï¼Œå› ä¸ºå®ƒä»¬çš„è¯»å†™æƒé™æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒä¹‹å¤„ä»…ä»…æ˜¯bssæ®µå…¨0å¡«å……ï¼Œæ‰€ä»¥åœ¨ç£ç›˜æ–‡ä»¶ä¸­åªè®°å½•å¤§å°ï¼Œä¸éœ€è¦çœŸçš„å¼„ä¸€ä¸ªå…¨0çš„sectionã€‚æ‰€ä»¥å®ƒä¸æ˜¯å †ä¹Ÿä¸æ˜¯æ ˆï¼Œä¹Ÿå°±ä¸èƒ½åŠ¨æ€åˆ†é…æˆ–è€…å˜åŒ–å¤§å°ã€‚bsså°±æ˜¯data segmentã€‚ä½ å¯ä»¥æ€è€ƒä¸€ä¸‹å…¨å±€å£°æ˜ä¸€ä¸ªæ•°ç»„å’Œåœ¨å‡½æ•°å†…éƒ¨å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œä»¥åŠåŠ¨æ€mallocä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸‰ä¸ªæ•°ç»„åˆ†åˆ«åœ¨å“ªé‡Œã€‚è¿˜å¯ä»¥è‡ªå·±åŠ¨æ‰‹è¯•ä¸€ä¸‹ï¼ŒéªŒè¯ä¸€ä¸‹è‡ªå·±çš„çŒœæƒ³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635834650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413742,"discussion_content":"å…¨å±€å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨ç£ç›˜ä¸Šbssåªè®°å½•äº†ä»–çš„é•¿åº¦å¤§å°ï¼Œåˆ°å†…å­˜ä¸­å°±æŒ‰è®°å½•çš„å¤§å°åˆ†é…å†…å­˜åˆå¹¶åˆ°æ•°æ®æ®µå¹¶åˆå§‹åŒ–ä¸º0ï¼›\nåœ¨å‡½æ•°ä¸­å£°æ˜æ•°ç»„ï¼Œå‡½æ•°æ²¡è¢«è°ƒç”¨å‰åœ¨å†…å­˜ä¸­æ ¹æœ¬å°±æ²¡å®ƒï¼Œè°ƒç”¨ååœ¨æ ˆé‡Œåˆ†é…ï¼Œè°ƒç”¨åï¼Œè¢«OSå›æ”¶ã€‚\nmallocä¸€ä¸ªæ•°ç»„ï¼Œå®ƒæ˜¯åœ¨å †é‡Œï¼Œç”±ç”¨æˆ·ç”³è¯·å’Œè°ƒç”¨freeé‡Šæ”¾ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1636552944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318984,"user_name":"é¦™æ¸¯ç”µå½±åŠè¾¹å¤©","can_delete":false,"product_type":"c1","uid":1356897,"ip_address":"","ucode":"7FF04E52C41E17","user_header":"https://static001.geekbang.org/account/avatar/00/14/b4/61/77fbebe7.jpg","comment_is_top":false,"comment_ctime":1635497679,"is_pvip":false,"replies":[{"id":"115649","content":"ç¬¬4ç¯‡é©¬ä¸Šå°±è¦æ›´æ–°å•¦ï¼Œä½ å€¼å¾—æ‹¥æœ‰ï½","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_989457","uid":"2767338","ctime":1635589012,"ip_address":"","comment_id":318984,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635497679","product_id":100094901,"comment_content":"ç¬¬8ï¼Œ9ï¼Œ10ç« å¿«ç‚¹ä¸Šå•Šï¼ŒæœŸå¾…ã€‚å¦å¤–ï¼Œè€å¸ˆè®²çš„å¤ªå¿«äº†ï¼Œç†è§£è·Ÿä¸ä¸Šï¼Œå¼å¼","like_count":0,"discussions":[{"author":{"id":2767338,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/39/ea/6466ec81.jpg","nickname":"å°å¯çˆ±æ˜¯æˆ‘","note":"","ucode":"7465CBCBC67EEF","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529451,"discussion_content":"ç¬¬4ç¯‡é©¬ä¸Šå°±è¦æ›´æ–°å•¦ï¼Œä½ å€¼å¾—æ‹¥æœ‰ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635589012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318902,"user_name":"å¤§è±†","can_delete":false,"product_type":"c1","uid":1350130,"ip_address":"","ucode":"BC78EF2336DBD0","user_header":"https://static001.geekbang.org/account/avatar/00/14/99/f2/c74d24d7.jpg","comment_is_top":false,"comment_ctime":1635476805,"is_pvip":false,"replies":[{"id":"115617","content":"1. ä»”ç»†çœ‹å›¾å“¦ã€‚mmapåŒºåŸŸåœ¨brkä¸Šé¢çš„ï¼Œè€Œä¸”ä¸€èˆ¬ç¦»å¾—è¿˜æ¯”è¾ƒè¿œï¼Œè¿™æ˜¯ä¸ºäº†brkå®ç°èµ·æ¥æ›´æ–¹ä¾¿ã€‚å®é™…ä¸Šï¼Œsbrkæ¯ä¸€æ¬¡éƒ½è¦æ£€æŸ¥brkæŒ‡é’ˆæ˜¯å¦ä¸mmapåŒºåŸŸé‡å ã€‚å¦‚æœæœ‰é‡å å°±è°ƒç”¨å¤±è´¥äº†ã€‚<br>2. è™šæ‹Ÿæœºæ‰˜ç®¡çš„è¯­è¨€ï¼Œå®ƒçš„é€‰æ‹©éå¸¸å¤šã€‚å…·ä½“æˆ‘åœ¨åä¸€èŠ‚ä¼šä»‹ç»ã€‚æ‹¿javaä¸¾ä¾‹ï¼Œå®ƒå¯ä»¥é€‰æ‹©ä½¿ç”¨è¿›ç¨‹æ ˆï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ¨¡æ‹Ÿæ ˆï¼Œè¿™éƒ½å¯ä»¥ã€‚<br>3. å­—èŠ‚ç ä¸€èˆ¬æ˜¯æ”¾åœ¨å †é‡Œçš„ï¼Œå› ä¸ºæ˜¯è¿è¡Œæ—¶åˆ†é…çš„ç©ºé—´","user_name":"ä½œè€…å›å¤","user_name_real":"æ°¦é’ é”¶","uid":"1360512","ctime":1635555299,"ip_address":"","comment_id":318902,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635476805","product_id":100094901,"comment_content":"1ã€é€šè¿‡mmapæ¥åˆ›å»ºä¸€å—åŒºåŸŸï¼Œé‚£ä¹ˆè¿™å—åŒºåŸŸæ˜¯ä»brkçš„ä½ç½®å¼€å§‹å—ï¼Ÿè¿˜æ˜¯æ‰¾åˆ°ä¸€å—æ»¡è¶³å¤§å°çš„ç©ºé—²åŒºåŸŸå³å¯ã€‚<br>2ã€åƒJavaã€dartè¿™ç±»é«˜çº§è¯­è¨€ï¼Œå…¶è™šæ‹Ÿæœºä¸­çš„å †ã€æ ˆç­‰åŒºåŸŸçš„å†…å­˜åˆ†é…éƒ½æ˜¯åœ¨è¿›ç¨‹çš„å †ä¸­å§ã€‚<br>3ã€åƒå­—èŠ‚ç è¿™äº›å†…å®¹åº”è¯¥æ˜¯åŠ è½½åœ¨è¿›ç¨‹çš„å †ä¸­å§ã€‚","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529421,"discussion_content":"1. ä»”ç»†çœ‹å›¾å“¦ã€‚mmapåŒºåŸŸåœ¨brkä¸Šé¢çš„ï¼Œè€Œä¸”ä¸€èˆ¬ç¦»å¾—è¿˜æ¯”è¾ƒè¿œï¼Œè¿™æ˜¯ä¸ºäº†brkå®ç°èµ·æ¥æ›´æ–¹ä¾¿ã€‚å®é™…ä¸Šï¼Œsbrkæ¯ä¸€æ¬¡éƒ½è¦æ£€æŸ¥brkæŒ‡é’ˆæ˜¯å¦ä¸mmapåŒºåŸŸé‡å ã€‚å¦‚æœæœ‰é‡å å°±è°ƒç”¨å¤±è´¥äº†ã€‚\n2. è™šæ‹Ÿæœºæ‰˜ç®¡çš„è¯­è¨€ï¼Œå®ƒçš„é€‰æ‹©éå¸¸å¤šã€‚å…·ä½“æˆ‘åœ¨åä¸€èŠ‚ä¼šä»‹ç»ã€‚æ‹¿javaä¸¾ä¾‹ï¼Œå®ƒå¯ä»¥é€‰æ‹©ä½¿ç”¨è¿›ç¨‹æ ˆï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ¨¡æ‹Ÿæ ˆï¼Œè¿™éƒ½å¯ä»¥ã€‚\n3. å­—èŠ‚ç ä¸€èˆ¬æ˜¯æ”¾åœ¨å †é‡Œçš„ï¼Œå› ä¸ºæ˜¯è¿è¡Œæ—¶åˆ†é…çš„ç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635555299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318826,"user_name":"ç‰§é‡","can_delete":false,"product_type":"c1","uid":1372185,"ip_address":"","ucode":"8F3B90C4462DE0","user_header":"https://static001.geekbang.org/account/avatar/00/14/f0/19/9d754804.jpg","comment_is_top":false,"comment_ctime":1635440570,"is_pvip":false,"replies":[{"id":"115599","content":"æ­£ç¡®äº†ä¸€åŠï¼Œä½†ä¸å®Œå…¨ã€‚<br>ä»£ç æ®µåªå¯æ‰§è¡Œå—ï¼Ÿæ•°æ®æ®µé‡Œæ˜¯å…¨å±€å˜é‡å“¦ï¼Œåªå¯è¯»å—ï¼Ÿå†æƒ³æƒ³ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ°¦é’ é”¶","uid":"1360512","ctime":1635475449,"ip_address":"","comment_id":318826,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1635440570","product_id":100094901,"comment_content":"ä»£ç æ®µï¼šå¯æ‰§è¡Œã€‚æ•°æ®æ®µï¼šå¯è¯»ã€‚å †ï¼šå¯è¯»å¯å†™","like_count":0,"discussions":[{"author":{"id":1360512,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c2/80/6ebf32e8.jpg","nickname":"æµ·çº³","note":"","ucode":"AB9F7ADB1428D2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529390,"discussion_content":"æ­£ç¡®äº†ä¸€åŠï¼Œä½†ä¸å®Œå…¨ã€‚\nä»£ç æ®µåªå¯æ‰§è¡Œå—ï¼Ÿæ•°æ®æ®µé‡Œæ˜¯å…¨å±€å˜é‡å“¦ï¼Œåªå¯è¯»å—ï¼Ÿå†æƒ³æƒ³ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635475449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413739,"discussion_content":"ä»£ç æ®µï¼šåªè¯»ï¼ˆä¸ºäº†ä¿æŠ¤ï¼‰ã€å¯æ‰§è¡Œã€‚æ•°æ®æ®µï¼šå¯è¯»å¯å†™ä¸å¯æ‰§è¡Œï¼ˆä¹Ÿæ˜¯ä¸ºäº†å®‰å…¨ï¼‰ã€‚å †ï¼šå¯è¯»å¯å†™ï¼Œå¯æ‰§è¡Œï¼ˆä¸ºäº†çµæ´»ï¼‰ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1636552292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2419502,"avatar":"https://static001.geekbang.org/account/avatar/00/24/eb/2e/90fea784.jpg","nickname":"æŸ’","note":"","ucode":"D41241629321A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410675,"discussion_content":"æ•°æ®æ®µå½“ç„¶å¯è¯»å¯å†™å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635756627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}