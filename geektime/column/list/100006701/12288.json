{"id":12288,"title":"ç¬¬36è®² | è°ˆè°ˆMySQLæ”¯æŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä»¥åŠæ‚²è§‚é”å’Œä¹è§‚é”çš„åŸç†å’Œåº”ç”¨åœºæ™¯ï¼Ÿ","content":"<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå°¤å…¶æ˜¯ä¸šåŠ¡å¼€å‘ï¼Œå°‘ä¸äº†åˆ©ç”¨Javaå¯¹æ•°æ®åº“è¿›è¡ŒåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ç­‰æ•°æ®æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯Javaå·¥ç¨‹å¸ˆçš„å¿…å¤‡æŠ€èƒ½ä¹‹ä¸€ã€‚åšå¥½æ•°æ®æ“ä½œï¼Œä¸ä»…ä»…éœ€è¦å¯¹Javaè¯­è¨€ç›¸å…³æ¡†æ¶çš„æŒæ¡ï¼Œæ›´éœ€è¦å¯¹å„ç§æ•°æ®åº“è‡ªèº«ä½“ç³»ç»“æ„çš„ç†è§£ã€‚ä»Šå¤©è¿™ä¸€è®²ï¼Œä½œä¸ºè¡¥å……Javaé¢è¯•è€ƒå¯ŸçŸ¥è¯†ç‚¹çš„å®Œæ•´æ€§ï¼Œå…³äºæ•°æ®åº“çš„åº”ç”¨å’Œç»†èŠ‚è¿˜éœ€è¦åœ¨å®è·µä¸­æ·±å…¥å­¦ä¹ ã€‚</p>\n<p>ä»Šå¤©æˆ‘è¦é—®ä½ çš„é—®é¢˜æ˜¯ï¼Œ<span class=\"orange\">è°ˆè°ˆMySQLæ”¯æŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä»¥åŠæ‚²è§‚é”å’Œä¹è§‚é”çš„åŸç†å’Œåº”ç”¨åœºæ™¯ï¼Ÿ</span></p>\n<h2>å…¸å‹å›ç­”</h2>\n<p>æ‰€è°“éš”ç¦»çº§åˆ«ï¼ˆ<a href=\"https://en.wikipedia.org/wiki/Isolation_(database_systems)#Isolation_levels\">Isolation Level</a>ï¼‰ï¼Œå°±æ˜¯åœ¨æ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œä¸ºä¿è¯å¹¶å‘æ•°æ®è¯»å†™çš„æ­£ç¡®æ€§è€Œæå‡ºçš„å®šä¹‰ï¼Œå®ƒå¹¶ä¸æ˜¯MySQLä¸“æœ‰çš„æ¦‚å¿µï¼Œè€Œæ˜¯æºäº<a href=\"https://en.wikipedia.org/wiki/American_National_Standards_Institute\">ANSI</a>/<a href=\"https://en.wikipedia.org/wiki/International_Organization_for_Standardization\">ISO</a>åˆ¶å®šçš„<a href=\"https://en.wikipedia.org/wiki/SQL-92\">SQL-92</a>æ ‡å‡†ã€‚</p>\n<p>æ¯ç§å…³ç³»å‹æ•°æ®åº“éƒ½æä¾›äº†å„è‡ªç‰¹è‰²çš„éš”ç¦»çº§åˆ«å®ç°ï¼Œè™½ç„¶åœ¨é€šå¸¸çš„<a href=\"https://en.wikipedia.org/wiki/Isolation_(database_systems)#Isolation_levels\">å®šä¹‰</a>ä¸­æ˜¯ä»¥é”ä¸ºå®ç°å•å…ƒï¼Œä½†å®é™…çš„å®ç°åƒå·®ä¸‡åˆ«ã€‚ä»¥æœ€å¸¸è§çš„MySQL InnoDBå¼•æ“ä¸ºä¾‹ï¼Œå®ƒæ˜¯åŸºäº <a href=\"https://dev.mysql.com/doc/refman/8.0/en/innodb-multi-versioning.html\">MVCC</a>ï¼ˆMulti-Versioning Concurrency Controlï¼‰å’Œé”çš„å¤åˆå®ç°ï¼ŒæŒ‰ç…§éš”ç¦»ç¨‹åº¦ä»ä½åˆ°é«˜ï¼ŒMySQLäº‹åŠ¡éš”ç¦»çº§åˆ«åˆ†ä¸ºå››ä¸ªä¸åŒå±‚æ¬¡ï¼š</p>\n<ul>\n<li>\n<p>è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ï¼Œå°±æ˜¯ä¸€ä¸ªäº‹åŠ¡èƒ½å¤Ÿçœ‹åˆ°å…¶ä»–äº‹åŠ¡å°šæœªæäº¤çš„ä¿®æ”¹ï¼Œè¿™æ˜¯æœ€ä½çš„éš”ç¦»æ°´å¹³ï¼Œå…è®¸<a href=\"https://en.wikipedia.org/wiki/Isolation_(database_systems)#Dirty_reads\">è„è¯»</a>å‡ºç°ã€‚</p>\n</li>\n<li>\n<p>è¯»å·²æäº¤ï¼ˆRead committedï¼‰ï¼Œäº‹åŠ¡èƒ½å¤Ÿçœ‹åˆ°çš„æ•°æ®éƒ½æ˜¯å…¶ä»–äº‹åŠ¡å·²ç»æäº¤çš„ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯ä¿è¯ä¸ä¼šçœ‹åˆ°ä»»ä½•ä¸­é—´æ€§çŠ¶æ€ï¼Œå½“ç„¶è„è¯»ä¹Ÿä¸ä¼šå‡ºç°ã€‚è¯»å·²æäº¤ä»ç„¶æ˜¯æ¯”è¾ƒä½çº§åˆ«çš„éš”ç¦»ï¼Œå¹¶ä¸ä¿è¯å†æ¬¡è¯»å–æ—¶èƒ½å¤Ÿè·å–åŒæ ·çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å…è®¸å…¶ä»–äº‹åŠ¡å¹¶å‘ä¿®æ”¹æ•°æ®ï¼Œå…è®¸ä¸å¯é‡å¤è¯»å’Œå¹»è±¡è¯»ï¼ˆPhantom Readï¼‰å‡ºç°ã€‚</p>\n</li>\n<li>\n<p>å¯é‡å¤è¯»ï¼ˆRepeatable readsï¼‰ï¼Œä¿è¯åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯MySQL InnoDBå¼•æ“çš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼Œä½†æ˜¯å’Œä¸€äº›å…¶ä»–æ•°æ®åº“å®ç°ä¸åŒçš„æ˜¯ï¼Œå¯ä»¥ç®€å•è®¤ä¸ºMySQLåœ¨å¯é‡å¤è¯»çº§åˆ«ä¸ä¼šå‡ºç°å¹»è±¡è¯»ã€‚</p>\n</li>\n<li>\n<p>ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ï¼Œå¹¶å‘äº‹åŠ¡ä¹‹é—´æ˜¯ä¸²è¡ŒåŒ–çš„ï¼Œé€šå¸¸æ„å‘³ç€è¯»å–éœ€è¦è·å–å…±äº«è¯»é”ï¼Œæ›´æ–°éœ€è¦è·å–æ’ä»–å†™é”ï¼Œå¦‚æœSQLä½¿ç”¨WHEREè¯­å¥ï¼Œè¿˜ä¼šè·å–åŒºé—´é”ï¼ˆMySQLä»¥GAPé”å½¢å¼å®ç°ï¼Œå¯é‡å¤è¯»çº§åˆ«ä¸­é»˜è®¤ä¹Ÿä¼šä½¿ç”¨ï¼‰ï¼Œè¿™æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«ã€‚</p>\n</li>\n</ul><!-- [[[read_end]]] -->\n<p>è‡³äºæ‚²è§‚é”å’Œä¹è§‚é”ï¼Œä¹Ÿå¹¶ä¸æ˜¯MySQLæˆ–è€…æ•°æ®åº“ä¸­ç‹¬æœ‰çš„æ¦‚å¿µï¼Œè€Œæ˜¯å¹¶å‘ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä¸»è¦åŒºåˆ«åœ¨äºï¼Œæ“ä½œå…±äº«æ•°æ®æ—¶ï¼Œâ€œæ‚²è§‚é”â€å³è®¤ä¸ºæ•°æ®å‡ºç°å†²çªçš„å¯èƒ½æ€§æ›´å¤§ï¼Œè€Œâ€œä¹è§‚é”â€åˆ™æ˜¯è®¤ä¸ºå¤§éƒ¨åˆ†æƒ…å†µä¸ä¼šå‡ºç°å†²çªï¼Œè¿›è€Œå†³å®šæ˜¯å¦é‡‡å–æ’ä»–æ€§æªæ–½ã€‚</p>\n<p>åæ˜ åˆ°MySQLæ•°æ®åº“åº”ç”¨å¼€å‘ä¸­ï¼Œæ‚²è§‚é”ä¸€èˆ¬å°±æ˜¯åˆ©ç”¨ç±»ä¼¼SELECT â€¦ FOR UPDATEè¿™æ ·çš„è¯­å¥ï¼Œå¯¹æ•°æ®åŠ é”ï¼Œé¿å…å…¶ä»–äº‹åŠ¡æ„å¤–ä¿®æ”¹æ•°æ®ã€‚ä¹è§‚é”åˆ™ä¸Javaå¹¶å‘åŒ…ä¸­çš„AtomicFieldUpdaterç±»ä¼¼ï¼Œä¹Ÿæ˜¯åˆ©ç”¨CASæœºåˆ¶ï¼Œå¹¶ä¸ä¼šå¯¹æ•°æ®åŠ é”ï¼Œè€Œæ˜¯é€šè¿‡å¯¹æ¯”æ•°æ®çš„æ—¶é—´æˆ³æˆ–è€…ç‰ˆæœ¬å·ï¼Œæ¥å®ç°ä¹è§‚é”éœ€è¦çš„ç‰ˆæœ¬åˆ¤æ–­ã€‚</p>\n<p>æˆ‘è®¤ä¸ºå‰é¢æåˆ°çš„MVCCï¼Œå…¶æœ¬è´¨å°±å¯ä»¥çœ‹ä½œæ˜¯ç§ä¹è§‚é”æœºåˆ¶ï¼Œè€Œæ’ä»–æ€§çš„è¯»å†™é”ã€åŒé˜¶æ®µé”ç­‰åˆ™æ˜¯æ‚²è§‚é”çš„å®ç°ã€‚</p>\n<p>æœ‰å…³å®ƒä»¬çš„åº”ç”¨åœºæ™¯ï¼Œä½ å¯ä»¥æ„å»ºä¸€ä¸‹ç®€åŒ–çš„ç«è½¦ä½™ç¥¨æŸ¥è¯¢å’Œè´­ç¥¨ç³»ç»Ÿã€‚åŒæ—¶æŸ¥è¯¢çš„äººå¯èƒ½å¾ˆå¤šï¼Œè™½ç„¶å…·ä½“åº§ä½ç¥¨åªèƒ½æ˜¯å–ç»™ä¸€ä¸ªäººï¼Œä½†ä½™ç¥¨å¯èƒ½å¾ˆå¤šï¼Œè€Œä¸”ä¹Ÿå¹¶ä¸èƒ½é¢„æµ‹å“ªä¸ªæŸ¥è¯¢è€…ä¼šè´­ç¥¨ï¼Œè¿™ä¸ªæ—¶å€™å°±æ›´é€‚åˆç”¨ä¹è§‚é”ã€‚</p>\n<h2>è€ƒç‚¹åˆ†æ</h2>\n<p>ä»Šå¤©çš„é—®é¢˜æ¥æºäºå®é™…é¢è¯•ï¼Œè¿™ä¸¤éƒ¨åˆ†é—®é¢˜åæ˜ äº†é¢è¯•å®˜è¯•å›¾è€ƒå¯Ÿé¢è¯•è€…åœ¨æ—¥å¸¸åº”ç”¨å¼€å‘ä¸­ï¼Œæ˜¯å¦å­¦ä¹ æˆ–è€…æ€è€ƒè¿‡æ•°æ®åº“å†…éƒ¨çš„æœºåˆ¶ï¼Œæ˜¯å¦äº†è§£å¹¶å‘ç›¸å…³çš„åŸºç¡€æ¦‚å¿µå’Œå®è·µã€‚</p>\n<p>æˆ‘ä»æ™®é€šæ•°æ®åº“åº”ç”¨å¼€å‘è€…çš„è§’åº¦ï¼Œæä¾›äº†ä¸€ä¸ªç›¸å¯¹ç®€åŒ–çš„ç­”æ¡ˆï¼Œé¢è¯•å®˜å¾ˆæœ‰å¯èƒ½è¿›ä¸€æ­¥ä»å®ä¾‹çš„è§’åº¦å±•å¼€ï¼Œä¾‹å¦‚è®¾è®¡ä¸€ä¸ªå…¸å‹åœºæ™¯é‡ç°è„è¯»ã€å¹»è±¡è¯»ï¼Œæˆ–è€…ä»æ•°æ®åº“è®¾è®¡çš„è§’åº¦ï¼Œå¯ä»¥ç”¨å“ªäº›æ‰‹æ®µé¿å…ç±»ä¼¼æƒ…å†µã€‚æˆ‘å»ºè®®ä½ åœ¨å‡†å¤‡é¢è¯•æ—¶ï¼Œå¯ä»¥åœ¨å…¸å‹çš„æ•°æ®åº“ä¸Šè¯•éªŒä¸€ä¸‹ï¼ŒéªŒè¯è‡ªå·±çš„è§‚ç‚¹ã€‚</p>\n<p>å…¶ä»–å¯ä»¥è€ƒå¯Ÿçš„ç‚¹ä¹Ÿæœ‰å¾ˆå¤šï¼Œåœ¨å‡†å¤‡è¿™ä¸ªé—®é¢˜æ—¶ä½ ä¹Ÿå¯ä»¥å¯¹æ¯”Javaè¯­è¨€çš„å¹¶å‘æœºåˆ¶ï¼Œè¿›è¡Œæ·±å…¥ç†è§£ï¼Œä¾‹å¦‚ï¼Œéšç€éš”ç¦»çº§åˆ«ä»ä½åˆ°é«˜ï¼Œç«äº‰æ€§ï¼ˆContentionï¼‰é€æ¸å¢å¼ºï¼Œéšä¹‹è€Œæ¥çš„ä»£ä»·åŒæ ·æ˜¯æ€§èƒ½å’Œæ‰©å±•æ€§çš„ä¸‹é™ã€‚</p>\n<p>æ•°æ®åº“è¡ç”Ÿå‡ºå¾ˆå¤šä¸åŒçš„èŒè´£æ–¹å‘ï¼š</p>\n<ul>\n<li>\n<p>æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå•ç‹¬çš„ä¸“ä¸šé¢†åŸŸã€‚</p>\n</li>\n<li>\n<p>æ•°æ®åº“åº”ç”¨å·¥ç¨‹å¸ˆï¼Œå¾ˆå¤šä¸šåŠ¡å¼€å‘è€…å°±æ˜¯è¿™ç§å®šä½ï¼Œç»¼åˆåˆ©ç”¨æ•°æ®åº“å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ç­‰æŠ€èƒ½ï¼Œå¼€å‘ä¸šåŠ¡åº”ç”¨ã€‚</p>\n</li>\n<li>\n<p>æ•°æ®åº“å·¥ç¨‹å¸ˆï¼Œæ›´åŠ ä¾§é‡äºå¼€å‘æ•°æ®åº“ã€æ•°æ®åº“ä¸­é—´ä»¶ç­‰åŸºç¡€è½¯ä»¶ã€‚</p>\n</li>\n</ul>\n<p>åé¢ä¸¤è€…ä¸Javaå¼€å‘æ›´åŠ ç›¸å…³ï¼Œä½†æ˜¯éœ€è¦çš„çŸ¥è¯†å’ŒæŠ€èƒ½æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥é¢è¯•çš„è€ƒå¯Ÿè§’åº¦ä¹Ÿæœ‰åŒºåˆ«ï¼Œä»Šå¤©æˆ‘ä¼šåˆ†æä¸‹å¯¹ç›¸å…³çŸ¥è¯†å­¦ä¹ å’Œå‡†å¤‡é¢è¯•çš„çœ‹æ³•ã€‚</p>\n<p>å¦å¤–ï¼Œåœ¨æ•°æ®åº“ç›¸å…³é¢†åŸŸï¼ŒJavaå·¥ç¨‹å¸ˆæœ€å¸¸æ¥è§¦åˆ°çš„å°±æ˜¯O/R Mappingæ¡†æ¶æˆ–è€…ç±»ä¼¼çš„æ•°æ®åº“äº¤äº’ç±»åº“ï¼Œæˆ‘ä¼šé€‰å–æœ€å¹¿æ³›ä½¿ç”¨çš„æ¡†æ¶è¿›è¡Œå¯¹æ¯”å’Œåˆ†æã€‚</p>\n<h2>çŸ¥è¯†æ‰©å±•</h2>\n<p>é¦–å…ˆï¼Œæˆ‘æ¥è°ˆè°ˆå¯¹æ•°æ®åº“ç›¸å…³é¢†åŸŸå­¦ä¹ çš„çœ‹æ³•ï¼Œä»æœ€å¹¿æ³›çš„åº”ç”¨å¼€å‘è€…è§’åº¦ï¼Œè‡³å°‘éœ€è¦æŒæ¡ï¼š</p>\n<ul>\n<li>\n<p>æ•°æ®åº“è®¾è®¡åŸºç¡€ï¼ŒåŒ…æ‹¬æ•°æ®åº“è®¾è®¡ä¸­çš„å‡ ä¸ªåŸºæœ¬èŒƒå¼ï¼Œå„ç§æ•°æ®åº“çš„åŸºç¡€æ¦‚å¿µï¼Œä¾‹å¦‚è¡¨ã€è§†å›¾ã€ç´¢å¼•ã€å¤–é”®ã€åºåˆ—å·ç”Ÿæˆå™¨ç­‰ï¼Œæ¸…æ¥šå¦‚ä½•å°†ç°å®ä¸­ä¸šåŠ¡å®ä½“å’Œå…¶ä¾èµ–å…³ç³»æ˜ å°„åˆ°æ•°æ®åº“ç»“æ„ä¸­ï¼ŒæŒæ¡å…¸å‹å®ä½“æ•°æ®åº”è¯¥ä½¿ç”¨ä»€ä¹ˆæ ·çš„æ•°æ®åº“æ•°æ®ç±»å‹ç­‰ã€‚</p>\n</li>\n<li>\n<p>æ¯ç§æ•°æ®åº“çš„è®¾è®¡å’Œå®ç°å¤šå°‘ä¼šå­˜åœ¨å·®å¼‚ï¼Œæ‰€ä»¥è‡³å°‘è¦ç²¾é€šä½ ä½¿ç”¨è¿‡çš„æ•°æ®åº“çš„è®¾è®¡è¦ç‚¹ã€‚æˆ‘ä»Šå¤©å¼€ç¯‡è°ˆåˆ°çš„MySQLäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå°±åŒºåˆ«äºå…¶ä»–æ•°æ®åº“ï¼Œè¿›ä¸€æ­¥äº†è§£MVCCã€Lockingç­‰æœºåˆ¶å¯¹äºå¤„ç†è¿›é˜¶é—®é¢˜éå¸¸æœ‰å¸®åŠ©ï¼›è¿˜éœ€è¦äº†è§£ï¼Œä¸åŒç´¢å¼•ç±»å‹çš„ä½¿ç”¨ï¼Œç”šè‡³æ˜¯åº•å±‚æ•°æ®ç»“æ„å’Œç®—æ³•ç­‰ã€‚</p>\n</li>\n<li>\n<p>å¸¸è§çš„SQLè¯­å¥ï¼ŒæŒæ¡åŸºç¡€çš„SQLè°ƒä¼˜æŠ€å·§ï¼Œè‡³å°‘è¦äº†è§£åŸºæœ¬æ€è·¯æ˜¯æ€æ ·çš„ï¼Œä¾‹å¦‚SQLæ€æ ·å†™æ‰èƒ½æ›´å¥½åˆ©ç”¨ç´¢å¼•ã€çŸ¥é“å¦‚ä½•åˆ†æ<a href=\"https://dev.mysql.com/doc/workbench/en/wb-performance-explain.html\">SQLæ‰§è¡Œè®¡åˆ’</a>ç­‰ã€‚</p>\n</li>\n<li>\n<p>æ›´è¿›ä¸€æ­¥ï¼Œè‡³å°‘éœ€è¦äº†è§£é’ˆå¯¹é«˜å¹¶å‘ç­‰ç‰¹å®šåœºæ™¯ä¸­çš„è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚è¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨ï¼Œæˆ–è€…å¦‚ä½•åˆ©ç”¨ç¼“å­˜æœºåˆ¶ç­‰ï¼Œç›®å‰çš„æ•°æ®å­˜å‚¨ä¹Ÿè¿œä¸æ­¢ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“äº†ã€‚</p>\n</li>\n</ul>\n<p><img src=\"https://static001.geekbang.org/resource/image/ae/9d/ae0959aafa30d1530ad4bdf7b1a8a19d.png?wh=891*532\" alt=\"\" /></p>\n<p>ä¸Šé¢çš„ç¤ºæ„å›¾ç®€å•æ€»ç»“äº†æˆ‘å¯¹æ•°æ®åº“é¢†åŸŸçš„ç†è§£ï¼Œå¸Œæœ›å¯ä»¥ç»™ä½ è¿›è¡Œå‡†å¤‡æ—¶æä¾›ä¸ªå€Ÿé‰´ã€‚å½“ç„¶åœ¨å‡†å¤‡é¢è¯•æ—¶å¹¶ä¸æ˜¯ä¸€å‘³æ‰¾ä¸€å †ä¹¦é—·å¤´è‹¦è¯»ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®ä»å®é™…å·¥ä½œä¸­ä½¿ç”¨çš„æ•°æ®åº“å‡ºå‘ï¼Œä¾§é‡äºç»“åˆå®è·µï¼Œå®Œå–„å’Œæ·±åŒ–è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ã€‚</p>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜æ˜¯å›åˆ°Javaæœ¬èº«ï¼Œç›®å‰æœ€ä¸ºé€šç”¨çš„Javaå’Œæ•°æ®åº“äº¤äº’æŠ€æœ¯å°±æ˜¯JDBCï¼Œæœ€å¸¸è§çš„å¼€æºæ¡†æ¶åŸºæœ¬éƒ½æ˜¯æ„å»ºåœ¨JDBCä¹‹ä¸Šï¼ŒåŒ…æ‹¬æˆ‘ä»¬ç†Ÿæ‚‰çš„<a href=\"https://www.tutorialspoint.com/jpa/jpa_introduction.htm\">JPA</a>/<a href=\"https://en.wikipedia.org/wiki/Hibernate_(framework)\">Hibernate</a>ã€<a href=\"http://www.mybatis.org/mybatis-3/\">MyBatis</a>ã€Spring JDBC Templateç­‰ï¼Œå„è‡ªéƒ½æœ‰ç‹¬ç‰¹çš„è®¾è®¡ç‰¹ç‚¹ã€‚</p>\n<p>Hibernateæ˜¯æœ€è´Ÿç››åçš„O/R Mappingæ¡†æ¶ä¹‹ä¸€ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªJPA Providerã€‚é¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä»¥å¯¹è±¡ä¸ºä¸­å¿ƒçš„ï¼Œå…¶å¼ºé¡¹æ›´ä½“ç°åœ¨æ•°æ®åº“åˆ°Javaå¯¹è±¡çš„æ˜ å°„ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨Javaå¯¹è±¡å±‚é¢ä½“ç°å¤–é”®çº¦æŸç­‰ç›¸å¯¹å¤æ‚çš„å…³ç³»ï¼Œæä¾›äº†å¼ºå¤§çš„æŒä¹…åŒ–åŠŸèƒ½ã€‚å†…éƒ¨å¤§é‡ä½¿ç”¨äº†<a href=\"https://en.wikipedia.org/wiki/Lazy_loading\">Lazy-load</a>ç­‰æŠ€æœ¯æé«˜æ•ˆç‡ã€‚å¹¶ä¸”ï¼Œä¸ºäº†å±è”½æ•°æ®åº“çš„å·®å¼‚ï¼Œé™ä½ç»´æŠ¤å¼€é”€ï¼ŒHibernateæä¾›äº†ç±»SQLçš„HQLï¼Œå¯ä»¥è‡ªåŠ¨ç”ŸæˆæŸç§æ•°æ®åº“ç‰¹å®šçš„SQLè¯­å¥ã€‚</p>\n<p>Hibernateåº”ç”¨éå¸¸å¹¿æ³›ï¼Œä½†æ˜¯è¿‡åº¦å¼ºè°ƒæŒä¹…åŒ–å’Œéš”ç¦»æ•°æ®åº“åº•å±‚ç»†èŠ‚ï¼Œä¹Ÿå¯¼è‡´äº†å¾ˆå¤šå¼Šç«¯ï¼Œä¾‹å¦‚HQLéœ€è¦é¢å¤–çš„å­¦ä¹ ï¼Œæœªå¿…æ¯”æ·±å…¥å­¦ä¹ SQLè¯­è¨€æ›´é«˜æ•ˆï¼›å‡å¼±ç¨‹åºå‘˜å¯¹SQLçš„ç›´æ¥æ§åˆ¶ï¼Œè¿˜å¯èƒ½å¯¼è‡´å…¶ä»–ä»£ä»·ï¼Œæœ¬æ¥ä¸€å¥SQLçš„äº‹æƒ…ï¼Œå¯èƒ½è¢«Hibernateç”Ÿæˆå‡ æ¡ï¼Œéšè—çš„å†…éƒ¨ç»†èŠ‚ä¹Ÿé˜»ç¢äº†è¿›ä¸€æ­¥çš„ä¼˜åŒ–ã€‚</p>\n<p>è€ŒMyBatisè™½ç„¶ä»ç„¶æä¾›äº†ä¸€äº›æ˜ å°„çš„åŠŸèƒ½ï¼Œä½†æ›´åŠ ä»¥SQLä¸ºä¸­å¿ƒï¼Œå¼€å‘è€…å¯ä»¥ä¾§é‡äºSQLå’Œå­˜å‚¨è¿‡ç¨‹ï¼Œéå¸¸ç®€å•ã€ç›´æ¥ã€‚å¦‚æœæˆ‘ä»¬çš„åº”ç”¨éœ€è¦å¤§é‡é«˜æ€§èƒ½çš„æˆ–è€…å¤æ‚çš„SELECTè¯­å¥ç­‰ï¼Œâ€œåŠè‡ªåŠ¨â€çš„MyBatiså°±ä¼šæ¯”Hibernateæ›´åŠ å®ç”¨ã€‚</p>\n<p>è€ŒSpring JDBC Templateä¹Ÿæ˜¯æ›´åŠ æ¥è¿‘äºSQLå±‚é¢ï¼ŒSpringæœ¬èº«ä¹Ÿå¯ä»¥é›†æˆHibernateç­‰O/R Mappingæ¡†æ¶ã€‚</p>\n<p>å…³äºè¿™äº›å…·ä½“å¼€æºæ¡†æ¶çš„å­¦ä¹ ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š</p>\n<ul>\n<li>\n<p>ä»æ•´ä½“ä¸ŠæŠŠæ¡ä¸»æµæ¡†æ¶çš„æ¶æ„å’Œè®¾è®¡ç†å¿µï¼ŒæŒæ¡ä¸»è¦æµç¨‹ï¼Œä¾‹å¦‚SQLè§£æç”Ÿæˆã€SQLæ‰§è¡Œåˆ°ç»“æœæ˜ å°„ç­‰å¤„ç†è¿‡ç¨‹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>\n</li>\n<li>\n<p>æŒæ¡æ˜ å°„ç­‰éƒ¨åˆ†çš„ç»†èŠ‚å®šä¹‰å’ŒåŸç†ï¼Œæ ¹æ®æˆ‘åœ¨å‡†å¤‡ä¸“æ æ—¶æ•´ç†çš„é¢è¯•é¢˜ç›®ï¼Œå‘ç°å¾ˆå¤šé¢˜ç›®éƒ½æ˜¯åå‘äºæ˜ å°„å®šä¹‰çš„ç»†èŠ‚ã€‚</p>\n</li>\n<li>\n<p>å¦å¤–ï¼Œå¯¹æ¯”ä¸åŒæ¡†æ¶çš„è®¾è®¡å’Œå®ç°ï¼Œæ—¢æœ‰åˆ©äºä½ åŠ æ·±ç†è§£ï¼Œä¹Ÿæ˜¯é¢è¯•è€ƒå¯Ÿçš„çƒ­ç‚¹æ–¹å‘ä¹‹ä¸€ã€‚</p>\n</li>\n</ul>\n<p>ä»Šå¤©æˆ‘ä»æ•°æ®åº“åº”ç”¨å¼€å‘è€…çš„è§’åº¦ï¼Œåˆ†æäº†MySQLæ•°æ®åº“çš„éƒ¨åˆ†å†…éƒ¨æœºåˆ¶ï¼Œå¹¶ä¸”è¡¥å……äº†æˆ‘å¯¹æ•°æ®åº“ç›¸å…³é¢è¯•å‡†å¤‡å’ŒçŸ¥è¯†å­¦ä¹ çš„å»ºè®®ï¼Œæœ€åå¯¹ä¸»æµO/R Mappingç­‰æ¡†æ¶è¿›è¡Œäº†ç®€å•çš„å¯¹æ¯”ã€‚</p>\n<h2>ä¸€è¯¾ä¸€ç»ƒ</h2>\n<p>å…³äºä»Šå¤©æˆ‘ä»¬è®¨è®ºçš„é¢˜ç›®ä½ åšåˆ°å¿ƒä¸­æœ‰æ•°äº†å—ï¼Ÿ ä»Šå¤©çš„æ€è€ƒé¢˜æ˜¯ï¼Œä»æ¶æ„è®¾è®¡çš„è§’åº¦ï¼Œå¯ä»¥å°†MyBatisåˆ†ä¸ºå“ªå‡ å±‚ï¼Ÿæ¯å±‚éƒ½æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ</p>\n<p>è¯·ä½ åœ¨ç•™è¨€åŒºå†™å†™ä½ å¯¹è¿™ä¸ªé—®é¢˜çš„æ€è€ƒï¼Œæˆ‘ä¼šé€‰å‡ºç»è¿‡è®¤çœŸæ€è€ƒçš„ç•™è¨€ï¼Œé€ç»™ä½ ä¸€ä»½å­¦ä¹ å¥–åŠ±ç¤¼åˆ¸ï¼Œæ¬¢è¿ä½ ä¸æˆ‘ä¸€èµ·è®¨è®ºã€‚</p>\n<p>ä½ çš„æœ‹å‹æ˜¯ä¸æ˜¯ä¹Ÿåœ¨å‡†å¤‡é¢è¯•å‘¢ï¼Ÿä½ å¯ä»¥â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„é¢˜ç›®åˆ†äº«ç»™å¥½å‹ï¼Œæˆ–è®¸ä½ èƒ½å¸®åˆ°ä»–ã€‚</p>\n<p></p>\n","comments":[{"had_liked":false,"id":17838,"user_name":"lizishushu","can_delete":false,"product_type":"c1","uid":1188495,"ip_address":"","ucode":"9D257E731BCFDF","user_header":"https://static001.geekbang.org/account/avatar/00/12/22/8f/00468236.jpg","comment_is_top":false,"comment_ctime":1532995173,"is_pvip":false,"replies":[{"id":"6315","content":"è¿™æ˜¯æ¯”è¾ƒæ­£å¼çš„è§‚ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1533141623,"ip_address":"","comment_id":17838,"utype":1}],"discussion_count":2,"race_medal":0,"score":"452504561253","product_id":100006701,"comment_content":"mybatisæ¶æ„è‡ªä¸‹è€Œä¸Šåˆ†ä¸ºåŸºç¡€æ”¯æ’‘å±‚ã€æ•°æ®å¤„ç†å±‚ã€APIæ¥å£å±‚è¿™ä¸‰å±‚ã€‚<br><br>åŸºç¡€æ”¯æ’‘å±‚ï¼Œä¸»è¦æ˜¯ç”¨æ¥åšè¿æ¥ç®¡ç†ã€äº‹åŠ¡ç®¡ç†ã€é…ç½®åŠ è½½ã€ç¼“å­˜ç®¡ç†ç­‰æœ€åŸºç¡€ç»„ä»¶ï¼Œä¸ºä¸Šå±‚æä¾›æœ€åŸºç¡€çš„æ”¯æ’‘ã€‚<br>æ•°æ®å¤„ç†å±‚ï¼Œä¸»è¦æ˜¯ç”¨æ¥åšå‚æ•°æ˜ å°„ã€sqlè§£æã€sqlæ‰§è¡Œã€ç»“æœæ˜ å°„ç­‰å¤„ç†ï¼Œå¯ä»¥ç†è§£ä¸ºè¯·æ±‚åˆ°è¾¾ï¼Œå®Œæˆä¸€æ¬¡æ•°æ®åº“æ“ä½œçš„æµç¨‹ã€‚<br>APIæ¥å£å±‚ï¼Œä¸»è¦å¯¹å¤–æä¾›APIï¼Œæä¾›è¯¸å¦‚æ•°æ®çš„å¢åˆ æ”¹æŸ¥ã€è·å–é…ç½®ç­‰æ¥å£ã€‚","like_count":106,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421297,"discussion_content":"è¿™æ˜¯æ¯”è¾ƒæ­£å¼çš„è§‚ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533141623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042644,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e8/d4/a0c2569d.jpg","nickname":"éª‘ç™½é©¬çš„èœé¸Ÿ","note":"","ucode":"6BD69C742B3AE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540575,"discussion_content":"è¯´å¾—å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640085344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42820,"user_name":"ä¸€é¦–æ­Œä¸€ç§å¿ƒæƒ…ä¸€æ®µè·¯","can_delete":false,"product_type":"c1","uid":1233287,"ip_address":"","ucode":"2A485D5BA15B13","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/87/b8308152.jpg","comment_is_top":false,"comment_ctime":1543051534,"is_pvip":false,"replies":[{"id":"15439","content":"å‡ºå»é¢è¯•åƒä¸‡åˆ«è¿™ä¹ˆè¯´","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1543194223,"ip_address":"","comment_id":42820,"utype":1}],"discussion_count":9,"race_medal":0,"score":"211996449038","product_id":100006701,"comment_content":"æ‚²è§‚é”å’Œä¹è§‚é”åœ¨å“ªå„¿ç”¨çš„.......å¹³æ—¶å†™sqlæ²¡æ¥è§¦è¿‡å•Š","like_count":50,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430208,"discussion_content":"å‡ºå»é¢è¯•åƒä¸‡åˆ«è¿™ä¹ˆè¯´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543194223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1923990,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/5b/96/57d4970d.jpg","nickname":"é­ç‰ä¼š Gabby","note":"","ucode":"4D6D8FB1895B53","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551088,"discussion_content":"æˆ‘ä¹Ÿæ˜¯å•Šï¼Œè‡ªå·±ä»æ¥æ²¡æœ‰ä¸»åŠ¨ä½¿ç”¨è¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644894449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2259479,"avatar":"","nickname":"å‚»å’ªå’Œå‚»è›‹","note":"","ucode":"A3E775EA972D50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316155,"discussion_content":"jpaä¸­ä¼šæœ‰versionæ³¨è§£ä½¿ç”¨ï¼Œå…¶å®å°±æ˜¯ä¹è§‚é”çš„ä½¿ç”¨ã€‚sqlå¤§æ¦‚æ˜¯è¿™æ ·çš„update table set  a=a,v=v+1 where id = id and v=version","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603367695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1876212,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a0/f4/7e122a67.jpg","nickname":"ä¹‹æ¸Š","note":"","ucode":"02B9299DBB4881","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302110,"discussion_content":"æ‚²è§‚é”å…¶å®ç”¨å¾—å¾ˆå°‘ã€‚ä½†æ˜¯ä¹è§‚é”è¿˜æ˜¯ç»å¸¸ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯æ•°æ®åº“æ¯”å¦‚æ›´æ–°åº“å­˜çš„æ—¶å€™ä½¿ç”¨ç‰ˆæœ¬å·æ¥æ›´æ–°åº“å­˜ã€‚hibernateä¸Šå°±æ˜¯å¯¹åº”äº†å®ä½“ä½¿ç”¨äº† @version æ³¨è§£ï¼Œå°±æ˜¯ä½¿ç”¨äº†ä¹è§‚é”äº† ã€‚ è¿˜æœ‰ä¸€äº›å•ä½“é¡¹ç›®çš„ç§’æ€ä¹Ÿä¼šç”¨åˆ°ä¹è§‚é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598792494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1537341,"avatar":"https://static001.geekbang.org/account/avatar/00/17/75/3d/71ad2330.jpg","nickname":"åœ¨è·¯ä¸Š","note":"","ucode":"C68778C04D61DF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1876212,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a0/f4/7e122a67.jpg","nickname":"ä¹‹æ¸Š","note":"","ucode":"02B9299DBB4881","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332343,"discussion_content":"å¹¶å‘ä¿®æ”¹æ•°æ®åº“æ•°é‡æ—¶ä¼šåŠ ä¸ªç‰ˆæœ¬å·ï¼Œç”¨ä¹è§‚é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607161010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302110,"ip_address":""},"score":332343,"extra":""},{"author":{"id":2806171,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/z4hFFGreQKeXzVG5eiaFuuUBgW6nnc3Y8AOdFFo97SUh8jYI7DmicJuBHNF3RiaN2byhwbVHwibicTQCk7s08Wia1EUA/132","nickname":"Geek_c3a0c0","note":"","ucode":"23980979632633","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1876212,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a0/f4/7e122a67.jpg","nickname":"ä¹‹æ¸Š","note":"","ucode":"02B9299DBB4881","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556041,"discussion_content":"æ¯æ¬¡insert updateéƒ½æ˜¯æ‚²è§‚é”å‘¢ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647178041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302110,"ip_address":""},"score":556041,"extra":""}]},{"author":{"id":2052476,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qq6oLfOTgKzjiculoUDicdv7WoY1iabPfOTumibWeInVP2Mnod9XVPrNSClvIiaLbvtDlIjRnWUNaXcYwREGzlcaDog/132","nickname":"Geek_åœ¨ä¸‹èŸ‘è‚ç‹","note":"","ucode":"E1F5BBB5BC5962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291606,"discussion_content":"å› ä¸ºæ¡†æ¶å·²ç»å¸®ä½ åšäº†ã€‚ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594887394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1054201,"avatar":"https://static001.geekbang.org/account/avatar/00/10/15/f9/0b14785a.jpg","nickname":"ä¸‰ä¸‰","note":"","ucode":"4A76933C29BDA1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233572,"discussion_content":"æ•°æ®åº“ç»™ä½ å¤„ç†çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586931971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018620,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","nickname":"ipofss","note":"","ucode":"DE3061C9259F9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388,"discussion_content":"æˆ‘ä¹Ÿåªæ˜¯å¬è¿‡ï¼Œäº†è§£ï¼Œå®é™…é¡¹ç›®ä¸­æˆ‘ä¹Ÿæ²¡ç”¨è¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561523180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19805,"user_name":"ä»»é¹æ–Œ","can_delete":false,"product_type":"c1","uid":1104086,"ip_address":"","ucode":"34319B05EA6E74","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/d6/47da34bf.jpg","comment_is_top":false,"comment_ctime":1534082263,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"61663624407","product_id":100006701,"comment_content":"å¯¹äºmysqlå››ä¸ªéš”ç¦»çº§åˆ«ä¸­çš„ä¸å¯é‡å¤è¯»çš„æœ€åä¸€å¥ä¸æ˜¯å¾ˆç†è§£ã€‚ä¸å¯é‡å¤è¯»åº”è¯¥æ˜¯ä¸èƒ½é¿å…å¹»è¯»ï¼Œä¸ºä»€ä¹ˆè¯´æ˜¯ä¸äº§ç”Ÿå¹»è¯»å‘¢ï¼Ÿ","like_count":13,"discussions":[{"author":{"id":2676330,"avatar":"https://static001.geekbang.org/account/avatar/00/28/d6/6a/1d844a27.jpg","nickname":"å†²å†²å†²","note":"","ucode":"4DA7596B5AFD51","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388295,"discussion_content":"innoDBå¼•æ“åœ¨å¯é‡å¤è¯»çš„æƒ…å†µä¸‹é»˜è®¤å¼€å¯é—´éš™é”ï¼Œé—´éš™é”è§£å†³äº†è¿™ä¸ªé—®é¢˜","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1628685420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315800,"discussion_content":"éš”å£ ä¸å¥‡å¤§ä½¬mysql 45è®²   å­¦å®Œäº†å°±çŸ¥é“äº†ã€‚ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1603328130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"é™Œå…®","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352859,"discussion_content":"äº†è§£ä¸€ä¸‹MVCCå°±çŸ¥é“äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614871511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1563245,"avatar":"https://static001.geekbang.org/account/avatar/00/17/da/6d/7c8fdb14.jpg","nickname":"å—¯ã€‚","note":"","ucode":"30FC6EF9A01070","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291828,"discussion_content":"ä½¿ç”¨çš„æ˜¯Next-Key-Lockç®—æ³•ï¼Œå®ƒæ˜¯row-lockè¡Œé”å’ŒGAP-locké—´éš™é”çš„ç»“åˆï¼Œä¼šé”ä½å½“å‰è¡Œä»¥åŠé—´éš™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594963434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1178101,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f9/f5/5aecc3cb.jpg","nickname":"ç»™æˆ‘ä¸€ç§’æ¯åä¸–ç•Œ","note":"","ucode":"310B851553363D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115807,"discussion_content":"mvcc+è¡Œé”å’ŒGAPé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578036733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1605158,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7e/26/946f58e2.jpg","nickname":"Scarecrow","note":"","ucode":"76D783B5B32DE1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60835,"discussion_content":"mysql å¢åŠ äº†é—´éš™é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574759219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37583,"user_name":"æ–‡å½¦","can_delete":false,"product_type":"c1","uid":1087351,"ip_address":"","ucode":"157C65813AF7E8","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/77/dac7d3b3.jpg","comment_is_top":false,"comment_ctime":1541644742,"is_pvip":false,"replies":[{"id":"13668","content":"è¿˜æ˜¯æ˜ç¡®ç›®çš„+å®è·µï¼Œä¸ä¸€å®šéè¦éƒ½çœ‹jdkæºç ï¼ŒåˆæœŸæ˜ç™½å¹¶æŒæ¡é€šç”¨åŸåˆ™æ›´é«˜æ•ˆï¼Œæ¯”å¦‚ å† å®çš„ ã€Šé˜¿é‡ŒJavaæ‰‹å†Œã€‹æˆ–è€…ç»å…¸ä¹¦ç±ï¼Œå¹¶ä¸”è¾¾åˆ°æ°´å¹³è¿˜æ˜¯è¦æœ‰ä»£ç é‡","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1541906098,"ip_address":"","comment_id":37583,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53081252294","product_id":100006701,"comment_content":"æ™“å³°è€å¸ˆã€‚æœ€è¿‘æ„Ÿè§‰åŸºç¡€æœ‰ç‚¹å·®ï¼Œå¼€å§‹çœ‹jdkçš„æºç ï¼Œä¸»è¦æ˜¯ç»“åˆapiæ¥çœ‹ã€‚ä½†æ˜¯æ„Ÿè§‰äº‹å€åŠŸåŠï¼Œæœ‰ä»€ä¹ˆå¥½çš„å»ºè®®å—ï¼Ÿ","like_count":13,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428411,"discussion_content":"è¿˜æ˜¯æ˜ç¡®ç›®çš„+å®è·µï¼Œä¸ä¸€å®šéè¦éƒ½çœ‹jdkæºç ï¼ŒåˆæœŸæ˜ç™½å¹¶æŒæ¡é€šç”¨åŸåˆ™æ›´é«˜æ•ˆï¼Œæ¯”å¦‚ å† å®çš„ ã€Šé˜¿é‡ŒJavaæ‰‹å†Œã€‹æˆ–è€…ç»å…¸ä¹¦ç±ï¼Œå¹¶ä¸”è¾¾åˆ°æ°´å¹³è¿˜æ˜¯è¦æœ‰ä»£ç é‡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1541906098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19672,"user_name":"clz1341521","can_delete":false,"product_type":"c1","uid":1179557,"ip_address":"","ucode":"3BDB4AB454C918","user_header":"https://static001.geekbang.org/account/avatar/00/11/ff/a5/eccc7653.jpg","comment_is_top":false,"comment_ctime":1533957413,"is_pvip":false,"replies":[{"id":"6847","content":"ä¸é”™","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1533993814,"ip_address":"","comment_id":19672,"utype":1}],"discussion_count":2,"race_medal":0,"score":"48778597669","product_id":100006701,"comment_content":"mysql inndbé»˜è®¤å¯é‡å¤è¯»çº§åˆ«ï¼Œä¸ä¼šå‡ºç°å¹»è¯»ã€‚<br>mybatisæ¶æ„è‡ªä¸‹è€Œä¸Šåˆ†ä¸ºåŸºç¡€æ”¯æ’‘å±‚ã€æ•°æ®å¤„ç†å±‚ã€APIæ¥å£å±‚è¿™ä¸‰å±‚ã€‚<br><br>åŸºç¡€æ”¯æ’‘å±‚ï¼Œä¸»è¦æ˜¯ç”¨æ¥åšè¿æ¥ç®¡ç†ã€äº‹åŠ¡ç®¡ç†ã€é…ç½®åŠ è½½ã€ç¼“å­˜ç®¡ç†ç­‰æœ€åŸºç¡€ç»„ä»¶ï¼Œä¸ºä¸Šå±‚æä¾›æœ€åŸºç¡€çš„æ”¯æ’‘ã€‚<br>æ•°æ®å¤„ç†å±‚ï¼Œä¸»è¦æ˜¯ç”¨æ¥åšå‚æ•°æ˜ å°„ã€sqlè§£æã€sqlæ‰§è¡Œã€ç»“æœæ˜ å°„ç­‰å¤„ç†ï¼Œå¯ä»¥ç†è§£ä¸ºè¯·æ±‚åˆ°è¾¾ï¼Œå®Œæˆä¸€æ¬¡æ•°æ®åº“æ“ä½œçš„æµç¨‹ã€‚<br>APIæ¥å£å±‚ï¼Œä¸»è¦å¯¹å¤–æä¾›APIï¼Œæä¾›è¯¸å¦‚æ•°æ®çš„å¢åˆ æ”¹æŸ¥ã€è·å–é…ç½®ç­‰æ¥å£ã€‚","like_count":12,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421936,"discussion_content":"ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533993814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1956589,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoyNOEic1I3QM2hyFYU3t7OrzicJK6woJQDiaKhq0alwt3twdriba944GsBibe2tuN99242o1HicV4VIcsg/132","nickname":"Geek_1b58fa","note":"","ucode":"0D0F983B8E2109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327445,"discussion_content":"mysqlå¯é‡å¤è¯»çº§åˆ«è¯»æ“ä½œä¸ä¼šå‡ºç°å¹»è¯»ï¼Œä½†æ˜¯å†™æ“ä½œè¿˜æ˜¯ä¼šå‡ºç°å¹»è¯»å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605838947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17868,"user_name":"L.B.Q.Y","can_delete":false,"product_type":"c1","uid":1069325,"ip_address":"","ucode":"5567989D1CDBBE","user_header":"https://static001.geekbang.org/account/avatar/00/10/51/0d/14d9364a.jpg","comment_is_top":false,"comment_ctime":1533000074,"is_pvip":false,"replies":[{"id":"6223","content":"ä»æŠ€æœ¯è§’åº¦å®ç°ï¼Œmysqç”¨mvccåšäº†snapshotï¼Œå¦‚æœæ˜¯locking readæ–‡æ¡£æ˜ç¡®æŒ‡å‡ºäº†ä¼šåšåŒºé—´é”å®š","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1533054327,"ip_address":"","comment_id":17868,"utype":1}],"discussion_count":2,"race_medal":0,"score":"44482673034","product_id":100006701,"comment_content":"mysqlï¼ˆinnodbï¼‰çš„å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¸ºä»€ä¹ˆå¯ä»¥è®¤ä¸ºä¸ä¼šå‡ºç°å¹»åƒè¯»å‘¢?","like_count":10,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421309,"discussion_content":"ä»æŠ€æœ¯è§’åº¦å®ç°ï¼Œmysqç”¨mvccåšäº†snapshotï¼Œå¦‚æœæ˜¯locking readæ–‡æ¡£æ˜ç¡®æŒ‡å‡ºäº†ä¼šåšåŒºé—´é”å®š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533054327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136329,"avatar":"https://static001.geekbang.org/account/avatar/00/11/56/c9/7b3cd3e0.jpg","nickname":"é©¬æŒ¯","note":"","ucode":"94234F533219C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42036,"discussion_content":"å¹»è¯»åœºæ™¯ï¼šäº‹åŠ¡1å’Œ2 select .. id=3éƒ½æŸ¥ä¸åˆ°ï¼Œäº‹åŠ¡2æ’å…¥ id=3ä¸”æäº¤ï¼Œåœ¨å¯é‡å¤è¯»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡1select .. id=3ä»ç„¶æŸ¥ä¸åˆ°ï¼Œä½†æ˜¯ inset id=3å¤±è´¥ï¼›æ‰€ä»¥ä¼šå‡ºç°å¹»è¯»çš„ï¼Œå› ä¸ºmvccçš„æ›´æ–°æ˜¯ä¸ªä¾‹å¤–ï¼Œä¼šåœ¨æœ€æ–°æäº¤å†…å®¹åŸºç¡€ä¹‹ä¸Šæ›´æ–°","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1572574983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66528,"user_name":"é¥­ç²’","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1549953352,"is_pvip":false,"replies":[{"id":"24411","content":"å—¯å‘¢","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1550593546,"ip_address":"","comment_id":66528,"utype":1}],"discussion_count":5,"race_medal":0,"score":"27319757128","product_id":100006701,"comment_content":"SQLæ ‡å‡†çš„éš”ç¦»çº§åˆ«å¯é‡å¤è¯»è¿˜æ˜¯æœ‰å¹»è¯»é—®é¢˜çš„ã€‚ InnoDB å’Œ XtraDBå­˜å‚¨å¼•æ“ é€šè¿‡å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆ MVCCï¼Œ Multiversion Concurrency Controlï¼‰ è§£å†³äº†å¹»è¯»çš„é—®é¢˜ã€‚","like_count":6,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438823,"discussion_content":"å—¯å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550593546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1126538,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","nickname":"ä¸šä½™è‰","note":"","ucode":"99BDC1E629049D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291396,"discussion_content":"åœ¨RRçš„éš”ç¦»çº§åˆ«ä¸‹ï¼ŒInnodbä½¿ç”¨MVVCå’Œnext-key locksè§£å†³å¹»è¯»ï¼ŒMVVCè§£å†³çš„æ˜¯æ™®é€šè¯»ï¼ˆå¿«ç…§è¯»ï¼‰çš„å¹»è¯»ï¼Œnext-key locksè§£å†³çš„æ˜¯å½“å‰è¯»æƒ…å†µä¸‹çš„å¹»è¯»ã€‚https://mp.weixin.qq.com/s/TcGavX_tYdnJTv9NJn6srw","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1594803885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2052476,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qq6oLfOTgKzjiculoUDicdv7WoY1iabPfOTumibWeInVP2Mnod9XVPrNSClvIiaLbvtDlIjRnWUNaXcYwREGzlcaDog/132","nickname":"Geek_åœ¨ä¸‹èŸ‘è‚ç‹","note":"","ucode":"E1F5BBB5BC5962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1126538,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","nickname":"ä¸šä½™è‰","note":"","ucode":"99BDC1E629049D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336621,"discussion_content":"çœŸç‰›å•Šã€‚æˆ‘æ‹æ¸…æ¥šäº†ã€‚åŸæ¥rrçš„æ—¶å€™ï¼Œå¿«ç…§è¯»æ˜¯ç”¨mvccè§£å†³å¹»è¯»çš„ã€‚ä¸€ç›´ä»¥ä¸ºåªæœ‰å½“å‰è¯»æ‰éœ€è¦è§£å†³å¹»è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608636087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":291396,"ip_address":""},"score":336621,"extra":""}]},{"author":{"id":1029186,"avatar":"","nickname":"å”å”","note":"","ucode":"52876E04BB3A9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215165,"discussion_content":"Mvccé€šè¿‡å¿«ç…§è§£å†³ä¸å¯é‡å¤è¯»é—®é¢˜ï¼Œgapé”è§£å†³å¹»è¯»ã€‚æ˜¯è¿™æ ·å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585295278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1640364,"avatar":"","nickname":"å¼ å¤©æ˜","note":"","ucode":"58D38329D7B883","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7517,"discussion_content":"ç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567525278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17854,"user_name":"éƒå›½æ¢","can_delete":false,"product_type":"c1","uid":1120673,"ip_address":"","ucode":"83B62E1072D096","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/a1/d25786fc.jpg","comment_is_top":false,"comment_ctime":1532997756,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23007834236","product_id":100006701,"comment_content":"ä¹è§‚é” æ‚²è§‚é” è„è¯» å¹»è¯» ä¸å¯é‡å¤è¯» CAS MVCC éš”ç¦»çº§åˆ« é”é˜Ÿåˆ— 2PC TCC","like_count":5},{"had_liked":false,"id":17876,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1533001454,"is_pvip":true,"replies":[{"id":"6222","content":"è¿™æœ€å¥½é—®MyBatisä½œè€…ï¼ŒæŠ±æ­‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1533053761,"ip_address":"","comment_id":17876,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18712870638","product_id":100006701,"comment_content":"è¯´åˆ°mybatis,å°±æƒ³èµ·äº†åˆ†é¡µï¼Œç°åœ¨ç»å¤§å¤šåˆ†é¡µéƒ½ç”¨åˆ°äº†pagehelperæ’ä»¶ï¼Œæˆ‘æƒ³é—®ä¸‹è€å¸ˆä¸ºå•¥mybatisæ²¡æœ‰è®¾è®¡ä¸€ä¸ªå¥½ç”¨çš„åˆ†é¡µäº†ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421312,"discussion_content":"è¿™æœ€å¥½é—®MyBatisä½œè€…ï¼ŒæŠ±æ­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533053761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1326012,"avatar":"https://static001.geekbang.org/account/avatar/00/14/3b/bc/68a0b861.jpg","nickname":"yida","note":"","ucode":"B609AEC8DDBAC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7767,"discussion_content":"æœ‰å¯èƒ½mybatisä½œè€…è®¤ä¸ºå·²ç»æœ‰ä¸€ä¸ªå¾ˆå¥½ç”¨çš„pagehelperäº†ï¼Œæ‰€ä»¥å°±æ²¡å¼€å‘ï¼Œä¸é‡å¤é€ è½®å­å˜›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567667205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17865,"user_name":"anji","can_delete":false,"product_type":"c1","uid":1155421,"ip_address":"","ucode":"9F66A6D2BEF9A8","user_header":"https://static001.geekbang.org/account/avatar/00/11/a1/5d/6f754b1f.jpg","comment_is_top":false,"comment_ctime":1532999769,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18712868953","product_id":100006701,"comment_content":"0.sqlå·¥å‚-ä¸»è¦è®¾å®šæ•°æ®åº“è¿æ¥ä¿¡æ¯<br>1.æ¥å£å±‚-ä¸»è¦æœ‰mapperæ¥å£ç”¨äºå¯¹å¤–æä¾›å…·ä½“çš„sqlæ‰§è¡Œæ–¹æ³•<br>2.xmlæ–‡ä»¶-æœ‰å…·ä½“çš„sqlå®ç°è¯­å¥ï¼Œä»¥åŠæ•°æ®åº“å­—æ®µå¯¹åº”javaç±»å­—æ®µçš„æ˜ å°„å…³ç³»ï¼Œæ¯ä¸ªmapperå¯¹åº”æ¯ä¸ªæ•°æ®åº“è¡¨<br>","like_count":4},{"had_liked":false,"id":21107,"user_name":"old_snail","can_delete":false,"product_type":"c1","uid":1005140,"ip_address":"","ucode":"3FA9B51633120A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/54/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1534919721,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14419821609","product_id":100006701,"comment_content":"æ¨è€å¸ˆ æ‚¨å¥½ï¼Œå…³äºâ€œå¯ä»¥ç®€å•è®¤ä¸ºMySQLåœ¨å¯é‡å¤è¯»çº§åˆ«ä¸ä¼šå‡ºç°å¹»è±¡è¯»â€æ²¡èƒ½ç†è§£ï¼Œä¸ªäººè®¤ä¸ºæ­£æ˜¯å› ä¸ºå¯é‡å¤è¯»ï¼Œå³æ¯ä¸ªäº‹åŠ¡ä¿å­˜äº†å¿«ç…§ï¼Œæ‰å¯¼è‡´äº†å¹»è¯»çš„ç°è±¡ã€‚æƒ³è¦è§£å†³å¹»è¯»ï¼Œåªèƒ½åŠ å…±äº«é”æˆ–è€…æ’å®ƒé”å§ã€‚ å¯èƒ½æ˜¯å› ä¸ºçŸ¥è¯†æµ…å¯¼è‡´æ— æ³•ç†è§£ï¼Œè¿˜æœ›æ–¹ä¾¿çš„è¯ï¼Œæ‚¨èƒ½ç‚¹æ‹¨ä¸€ä¸‹ï¼Œæ„Ÿè°¢","like_count":3,"discussions":[{"author":{"id":1126538,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","nickname":"ä¸šä½™è‰","note":"","ucode":"99BDC1E629049D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291398,"discussion_content":"RR å’Œ RC æ˜¯ä¸ä¸€æ ·çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594804129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18115,"user_name":"Allen","can_delete":false,"product_type":"c1","uid":1162307,"ip_address":"","ucode":"0E0D44ABB35DBB","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/43/11acdc02.jpg","comment_is_top":false,"comment_ctime":1533138299,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14418040187","product_id":100006701,"comment_content":"è¯·é—®ä»€ä¹ˆæ—¶å€™å¯ä»¥ç»†è¯´ä¸€å“ˆORMæ˜ å°„ğŸ˜‹","like_count":3},{"had_liked":false,"id":252966,"user_name":"sunnyrqw","can_delete":false,"product_type":"c1","uid":1000971,"ip_address":"","ucode":"249AD5F48C1159","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/0b/c57f4f43.jpg","comment_is_top":false,"comment_ctime":1602550404,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5897517700","product_id":100006701,"comment_content":"è¯„è®ºæœ‰è¯´æ‚²è§‚é”å’Œä¹è§‚é”åœ¨å“ªé‡Œç”¨ï¼Œè¯´ä¸‹æˆ‘çš„ç†è§£<br>æ‚²è§‚é”å’Œä¹è§‚é”æ˜¯æ¦‚å¿µï¼Œå¦‚ä¸“æ è¯´çš„<br>æ‚²è§‚é”æ˜¯å®Œå…¨æ’ä»–æ€§çš„ï¼Œæˆ‘åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä½ ä¸èƒ½åŠ¨ï¼Œå…·ä½“å®ç° javaçš„synchronizedã€ReentrantLock<br>ä¹è§‚é”å°±æ˜¯æˆ‘åœ¨æ‰§è¡Œçš„æ—¶å€™ä¸é™åˆ¶ä½ çš„æ“ä½œï¼Œé€šè¿‡å¯¹æ¯”å‰åçš„å€¼çœ‹æœ‰æ²¡äººæ“ä½œï¼Œæ²¡äººæ“ä½œå°±æ›´æ–°ï¼Œæœ‰äººæ“ä½œå°±é‡æ¥ä¸€æ¬¡ï¼Œå…·ä½“å®ç°æ˜¯java cas","like_count":1},{"had_liked":false,"id":56180,"user_name":"å°ç¬¨è›‹","can_delete":false,"product_type":"c1","uid":1118331,"ip_address":"","ucode":"7065FB157C4B70","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/7b/eed9d6d6.jpg","comment_is_top":false,"comment_ctime":1546400430,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5841367726","product_id":100006701,"comment_content":"sqlæ–¹é¢æˆ‘ä»¬ä»æ¥æ²¡æœ‰ä½¿ç”¨è¿‡æ‚²è§‚é”ï¼Œä¸€ç›´éƒ½æ˜¯ç”¨çš„ä¹è§‚é”ï¼Œæ€ä¹ˆåŠï¼Ÿ","like_count":1},{"had_liked":false,"id":21267,"user_name":"Dream","can_delete":false,"product_type":"c1","uid":1112973,"ip_address":"","ucode":"30A99690C14762","user_header":"https://static001.geekbang.org/account/avatar/00/10/fb/8d/6c3cccc7.jpg","comment_is_top":false,"comment_ctime":1534987916,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5829955212","product_id":100006701,"comment_content":"MVCCåˆ°åº•æœ‰æ²¡æœ‰åŠ é”ï¼Ÿå¦‚ä½•åº”ç”¨çš„ï¼Ÿ","like_count":1},{"had_liked":false,"id":217754,"user_name":"æé£","can_delete":false,"product_type":"c1","uid":1555180,"ip_address":"","ucode":"930458850AA05B","user_header":"https://static001.geekbang.org/account/avatar/00/17/ba/ec/2b1c6afc.jpg","comment_is_top":false,"comment_ctime":1589602403,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589602403","product_id":100006701,"comment_content":"æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ä¸­çš„å¹¶å‘æ§åˆ¶çš„ä»»åŠ¡æ˜¯ç¡®ä¿åœ¨å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜å–æ•°æ®åº“ä¸­åŒä¸€æ•°æ®æ—¶ä¸ç ´åäº‹åŠ¡çš„éš”ç¦»æ€§å’Œç»Ÿä¸€æ€§ä»¥åŠæ•°æ®åº“çš„ç»Ÿä¸€æ€§ã€‚<br><br>ä¹è§‚å¹¶å‘æ§åˆ¶(ä¹è§‚é”)å’Œæ‚²è§‚å¹¶å‘æ§åˆ¶ï¼ˆæ‚²è§‚é”ï¼‰æ˜¯å¹¶å‘æ§åˆ¶ä¸»è¦é‡‡ç”¨çš„æŠ€æœ¯æ‰‹æ®µã€‚<br><br>æ— è®ºæ˜¯æ‚²è§‚é”è¿˜æ˜¯ä¹è§‚é”ï¼Œéƒ½æ˜¯äººä»¬å®šä¹‰å‡ºæ¥çš„æ¦‚å¿µï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§æ€æƒ³ã€‚å…¶å®ä¸ä»…ä»…æ˜¯å…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿä¸­æœ‰ä¹è§‚é”å’Œæ‚²è§‚é”çš„æ¦‚å¿µï¼Œåƒmemcacheã€hibernateã€tairç­‰éƒ½æœ‰ç±»ä¼¼çš„æ¦‚å¿µã€‚<br><br>é’ˆå¯¹äºä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œåº”è¯¥é€‰ç”¨ä¸åŒçš„å¹¶å‘æ§åˆ¶æ–¹å¼ã€‚æ‰€ä»¥ï¼Œä¸è¦æŠŠä¹è§‚å¹¶å‘æ§åˆ¶å’Œæ‚²è§‚å¹¶å‘æ§åˆ¶ç‹­ä¹‰çš„ç†è§£ä¸ºDBMSä¸­çš„æ¦‚å¿µï¼Œæ›´ä¸è¦æŠŠä»–ä»¬å’Œæ•°æ®ä¸­æä¾›çš„é”æœºåˆ¶ï¼ˆè¡Œé”ã€è¡¨é”ã€æ’ä»–é”ã€å…±äº«é”ï¼‰æ··ä¸ºä¸€è°ˆã€‚å…¶å®ï¼Œåœ¨DBMSä¸­ï¼Œæ‚²è§‚é”æ­£æ˜¯åˆ©ç”¨æ•°æ®åº“æœ¬èº«æä¾›çš„é”æœºåˆ¶æ¥å®ç°çš„ã€‚<br><br>å½“æˆ‘ä»¬è¦å¯¹ä¸€ä¸ªæ•°æ®åº“ä¸­çš„ä¸€æ¡æ•°æ®è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œä¸ºäº†é¿å…åŒæ—¶è¢«å…¶ä»–äººä¿®æ”¹ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯ç›´æ¥å¯¹è¯¥æ•°æ®è¿›è¡ŒåŠ é”ä»¥é˜²æ­¢å¹¶å‘ã€‚<br><br>è¿™ç§å€ŸåŠ©æ•°æ®åº“é”æœºåˆ¶åœ¨ä¿®æ”¹æ•°æ®ä¹‹å‰å…ˆé”å®šï¼Œå†ä¿®æ”¹çš„æ–¹å¼è¢«ç§°ä¹‹ä¸ºæ‚²è§‚å¹¶å‘æ§åˆ¶ï¼ˆåˆåâ€œæ‚²è§‚é”â€ï¼ŒPessimistic Concurrency Controlï¼Œç¼©å†™â€œPCCâ€ï¼‰ã€‚<br><br>åœ¨å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿé‡Œï¼Œæ‚²è§‚å¹¶å‘æ§åˆ¶ï¼ˆåˆåâ€œæ‚²è§‚é”â€ï¼ŒPessimistic Concurrency Controlï¼Œç¼©å†™â€œPCCâ€ï¼‰æ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶çš„æ–¹æ³•ã€‚å®ƒå¯ä»¥é˜»æ­¢ä¸€ä¸ªäº‹åŠ¡ä»¥å½±å“å…¶ä»–ç”¨æˆ·çš„æ–¹å¼æ¥ä¿®æ”¹æ•°æ®ã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œçš„æ“ä½œéƒ½æŸè¡Œæ•°æ®åº”ç”¨äº†é”ï¼Œé‚£åªæœ‰å½“è¿™ä¸ªäº‹åŠ¡æŠŠé”é‡Šæ”¾ï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½å¤Ÿæ‰§è¡Œä¸è¯¥é”å†²çªçš„æ“ä½œã€‚<br>æ‚²è§‚å¹¶å‘æ§åˆ¶ä¸»è¦ç”¨äºæ•°æ®äº‰ç”¨æ¿€çƒˆçš„ç¯å¢ƒï¼Œä»¥åŠå‘ç”Ÿå¹¶å‘å†²çªæ—¶ä½¿ç”¨é”ä¿æŠ¤æ•°æ®çš„æˆæœ¬è¦ä½äºå›æ»šäº‹åŠ¡çš„æˆæœ¬çš„ç¯å¢ƒä¸­ã€‚<br><br>æ‚²è§‚é”ï¼Œæ­£å¦‚å…¶åï¼Œå®ƒæŒ‡çš„æ˜¯å¯¹æ•°æ®è¢«å¤–ç•Œï¼ˆåŒ…æ‹¬æœ¬ç³»ç»Ÿå½“å‰çš„å…¶ä»–äº‹åŠ¡ï¼Œä»¥åŠæ¥è‡ªå¤–éƒ¨ç³»ç»Ÿçš„äº‹åŠ¡å¤„ç†ï¼‰ä¿®æ”¹æŒä¿å®ˆæ€åº¦(æ‚²è§‚)ï¼Œå› æ­¤ï¼Œåœ¨æ•´ä¸ªæ•°æ®å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå°†æ•°æ®å¤„äºé”å®šçŠ¶æ€ã€‚ æ‚²è§‚é”çš„å®ç°ï¼Œå¾€å¾€ä¾é æ•°æ®åº“æä¾›çš„é”æœºåˆ¶ ï¼ˆä¹Ÿåªæœ‰æ•°æ®åº“å±‚æä¾›çš„é”æœºåˆ¶æ‰èƒ½çœŸæ­£ä¿è¯æ•°æ®è®¿é—®çš„æ’ä»–æ€§ï¼Œå¦åˆ™ï¼Œå³ä½¿åœ¨æœ¬ç³»ç»Ÿä¸­å®ç°äº†åŠ é”æœºåˆ¶ï¼Œä¹Ÿæ— æ³•ä¿è¯å¤–éƒ¨ç³»ç»Ÿä¸ä¼šä¿®æ”¹æ•°æ®ï¼‰<br><br>åœ¨æ•°æ®åº“ä¸­ï¼Œæ‚²è§‚é”çš„æµç¨‹å¦‚ä¸‹ï¼š<br>åœ¨å¯¹ä»»æ„è®°å½•è¿›è¡Œä¿®æ”¹å‰ï¼Œå…ˆå°è¯•ä¸ºè¯¥è®°å½•åŠ ä¸Šæ’ä»–é”ï¼ˆexclusive lockingï¼‰ã€‚<br>å¦‚æœåŠ é”å¤±è´¥ï¼Œè¯´æ˜è¯¥è®°å½•æ­£åœ¨è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆå½“å‰æŸ¥è¯¢å¯èƒ½è¦ç­‰å¾…æˆ–è€…æŠ›å‡ºå¼‚å¸¸ã€‚ å…·ä½“å“åº”æ–¹å¼ç”±å¼€å‘è€…æ ¹æ®å®é™…éœ€è¦å†³å®šã€‚<br>å¦‚æœæˆåŠŸåŠ é”ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹è®°å½•åšä¿®æ”¹ï¼Œäº‹åŠ¡å®Œæˆåå°±ä¼šè§£é”äº†ã€‚<br>å…¶é—´å¦‚æœæœ‰å…¶ä»–å¯¹è¯¥è®°å½•åšä¿®æ”¹æˆ–åŠ æ’ä»–é”çš„æ“ä½œï¼Œéƒ½ä¼šç­‰å¾…æˆ‘ä»¬è§£é”æˆ–ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚","like_count":0},{"had_liked":false,"id":175274,"user_name":"rike","can_delete":false,"product_type":"c1","uid":1583833,"ip_address":"","ucode":"920AAD0BD9245C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","comment_is_top":false,"comment_ctime":1580637803,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580637803","product_id":100006701,"comment_content":"è¿™ä¸ªæ•°æ®åº“çš„éš”ç¦»çº§åˆ«ä¸ªäººè®¤ä¸ºæ˜¯åœç•™åœ¨ç†è®ºçš„å±‚æ¬¡ä¸Šï¼Œæˆ‘åœ¨å­¦ä¹ ä¸“æ ã€ŠSQLå¿…çŸ¥å¿…ä¼šã€‹ä¸­ï¼Œåšè¿‡å®éªŒï¼ŒæŒ‰ç…§ä¾‹å­ä¸­æ‰§è¡Œçš„å®é™…ç»“æœè·Ÿéš”ç¦»çº§åˆ«çš„å®šä¹‰ä¸ä¸€æ ·ï¼Œä¸æ¸…æ¥šè¿™æ˜¯åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹æ‰ä¼šå‡ºç°è¿™äº›é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":173369,"user_name":"å°šæœ‰æ™º","can_delete":false,"product_type":"c1","uid":1590683,"ip_address":"","ucode":"CE6D2BA3C36944","user_header":"https://static001.geekbang.org/account/avatar/00/18/45/9b/b11a2421.jpg","comment_is_top":false,"comment_ctime":1579512835,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1579512835","product_id":100006701,"comment_content":"äº²æµ‹åï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæ²¡ææ‡‚ï¼Œå¸Œæœ›è€å¸ˆæŒ‡ç‚¹ä¸€ä¸‹ï¼ˆè‡ªåŠ¨æäº¤ä¿®æ”¹æˆäº†æ‰‹åŠ¨æäº¤ï¼‰ï¼š<br>start transactionï¼›<br>select * from  user where status = 0 and id = 1;<br>update user set status = 1 where id =1;<br>select * from user where status = 0 and id =1;<br>å¹¶æœªcommitï¼Œç¬¬ä¸€ä¸ªselectèƒ½æŸ¥è¯¢åˆ°æ•°æ®ï¼Œç¬¬äºŒä¸ªselect ä¸èƒ½æŸ¥è¯¢åˆ°æ•°æ®ï¼Œæˆ‘çš„ç†è§£æ˜¯äº‹åŠ¡æ²¡æœ‰æäº¤çš„æ—¶å€™ï¼Œç¬¬äºŒä¸ªselectä¹Ÿèƒ½æŸ¥è¯¢åˆ°æ•°æ®ï¼Œä¸æ¸…æ¥šè¿™ä¸ªæ˜¯æ€ä¹ˆå›äº‹ï¼Œisolation level è®¾ç½®ä¸ºread committed å’Œ repeatable read éƒ½æœ‰è¿™ä¸ªé—®é¢˜ï¼Œæœ›è§£ç­”ï¼<br>","like_count":1,"discussions":[{"author":{"id":1298594,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/G2hKWVwthOFMChTia10NqpDn1ib6ibibtIHsEN8lbdApwrenOqmicAWBkCTb9zFeuPSXFrKpruwJqEhfZHk99scYS1Q/132","nickname":"ææ™Ÿ","note":"","ucode":"5E3F8A1CD8CC67","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":182826,"discussion_content":"äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸­æ‰€æè¿°çš„è¯»ä¸åˆ°æœªæäº¤çš„æ•°æ®ï¼ŒæŒ‡çš„å½“å‰äº‹åŠ¡å¯¹å¦ä¸€ä¸ªäº‹åŠ¡ï¼Œè€Œä½ è¿™ä¸ªupdateå’Œç¬¬äºŒä¸ªselectæ˜¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œupdateä¿®æ”¹åçš„å€¼è‚¯å®šæ˜¯å¯ä»¥è¢«selectå¾—åˆ°çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1582459081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179028,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","nickname":"å’¸é±¼","note":"","ucode":"5E79636DE48155","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286854,"discussion_content":"åŒä¸€ä¸ªäº‹åŠ¡é‡Œé¢ï¼Œå‰é¢æ‰§è¡Œçš„DMLæ“ä½œï¼Œåé¢è‚¯å®šæ˜¯å¯ä»¥æŸ¥è¯¢åˆ°çš„ï¼Œè¿™å«å½“å‰è¯»ï¼Œæ ¹æ®MVCCçš„å®ç°æ¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593310538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":34434,"user_name":"äº’è”ç½‘è”ç»œå‘˜","can_delete":false,"product_type":"c1","uid":1186667,"ip_address":"","ucode":"CCF63EBE5C6E99","user_header":"https://static001.geekbang.org/account/avatar/00/12/1b/6b/4a6b774c.jpg","comment_is_top":false,"comment_ctime":1540171249,"is_pvip":false,"replies":[{"id":"12421","content":"å¤§å®¶ç†è§£çš„èŒƒå›´å¯èƒ½æœ‰äº›åŒºåˆ«ï¼Œä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªç®€å•çš„æµ‹è¯•ç”¨ä¾‹å¹¶è¯•éªŒä¸€ä¸‹å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1540311040,"ip_address":"","comment_id":34434,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1540171249","product_id":100006701,"comment_content":"è€å¸ˆæ˜¯ä¸æ˜¯å†™é”™äº†ï¼Œåœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸­ï¼ŒåŸºäºé”çš„å¹¶å‘æ§åˆ¶ DBMSå®ç°ä¿æŒè¯»å–å’Œå†™å…¥é”å®šï¼ˆåœ¨é€‰å®šæ•°æ®ä¸Šè·å–ï¼‰ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸã€‚ä½†æ˜¯ï¼Œrange-locksæ²¡æœ‰è¢«ç®¡ç† ï¼Œå› æ­¤å¯èƒ½ä¼šå‘ç”Ÿå¹»åƒè¯»å–ã€‚<br><br>äº‹ç‰©çš„éš”ç¦»çº§åˆ«å¢å¼ºåˆ†åˆ«è§£å†³ç”±è„è¯»ã€ä¸å¯é‡å¤è¯»å†åˆ°å¹»è¯»ï¼Œåªæœ‰ä¸²è¡ŒåŒ–èƒ½è§£å†³ä¸‰è€…ï¼Œä½†æ˜¯æŸå¤±äº†æ•ˆç‡ã€‚","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427208,"discussion_content":"å¤§å®¶ç†è§£çš„èŒƒå›´å¯èƒ½æœ‰äº›åŒºåˆ«ï¼Œä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªç®€å•çš„æµ‹è¯•ç”¨ä¾‹å¹¶è¯•éªŒä¸€ä¸‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540311040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18016,"user_name":"kitten","can_delete":false,"product_type":"c1","uid":1027789,"ip_address":"","ucode":"E451DE087CB7CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/cd/3bffed26.jpg","comment_is_top":false,"comment_ctime":1533086878,"is_pvip":true,"replies":[{"id":"6313","content":"æ˜¯ æœ‰ï¼Œå¦ä¸€ä¸ªå›å¤é‡Œæåˆ°äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1533141231,"ip_address":"","comment_id":18016,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1533086878","product_id":100006701,"comment_content":"mysqlï¼Œå¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«ï¼Œä¹Ÿåœ¨æœ‰gapé—´éš™é”å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421360,"discussion_content":"æ˜¯ æœ‰ï¼Œå¦ä¸€ä¸ªå›å¤é‡Œæåˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533141231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17981,"user_name":"åˆåŒå’å•æ˜¯ä¸€å¹´å•Š","can_delete":false,"product_type":"c1","uid":1000015,"ip_address":"","ucode":"E067320E537DEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/4f/ff1ac464.jpg","comment_is_top":false,"comment_ctime":1533081729,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1533081729","product_id":100006701,"comment_content":"ä¸åŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«åˆ†åˆ«æ€ä¹ˆå®ç°äº‹åŠ¡æœºåˆ¶ä¸€æ ·å—","like_count":0}]}