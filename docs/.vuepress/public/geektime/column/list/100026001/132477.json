{"id":132477,"title":"54 | ç†è§£Disruptorï¼ˆä¸Šï¼‰ï¼šå¸¦ä½ ä½“ä¼šCPUé«˜é€Ÿç¼“å­˜çš„é£é©°ç”µæ£","content":"<p>åšæŒåˆ°åº•å°±æ˜¯èƒœåˆ©ï¼Œç»ˆäºæˆ‘ä»¬ä¸€èµ·æ¥åˆ°äº†ä¸“æ çš„æœ€åä¸€ä¸ªä¸»é¢˜ã€‚è®©æˆ‘ä¸€èµ·å¸¦ä½ æ¥çœ‹ä¸€çœ‹ï¼ŒCPUåˆ°åº•èƒ½æœ‰å¤šå¿«ã€‚åœ¨æ¥ä¸‹æ¥çš„ä¸¤è®²é‡Œï¼Œæˆ‘ä¼šå¸¦ä½ ä¸€èµ·æ¥çœ‹ä¸€ä¸ªå¼€æºé¡¹ç›®Disruptorã€‚çœ‹çœ‹æˆ‘ä»¬æ€ä¹ˆåˆ©ç”¨CPUå’Œé«˜é€Ÿç¼“å­˜çš„ç¡¬ä»¶ç‰¹æ€§ï¼Œæ¥è®¾è®¡ä¸€ä¸ªå¯¹äºæ€§èƒ½æœ‰æé™è¿½æ±‚çš„ç³»ç»Ÿã€‚</p><p>ä¸çŸ¥é“ä½ è¿˜è®°ä¸è®°å¾—ï¼Œåœ¨<a href=\"https://time.geekbang.org/column/article/107477\">ç¬¬37è®²</a>é‡Œï¼Œä¸ºäº†ä¼˜åŒ–4æ¯«ç§’ä¸“é—¨é“ºè®¾å…‰çº¤çš„æ•…äº‹ã€‚å®é™…ä¸Šï¼Œæœ€åœ¨æ„æé™æ€§èƒ½çš„å¹¶ä¸æ˜¯äº’è”ç½‘å…¬å¸ï¼Œè€Œæ˜¯é«˜é¢‘äº¤æ˜“å…¬å¸ã€‚æˆ‘ä»¬ä»Šå¤©è®²è§£çš„Disruptorå°±æ˜¯ç”±ä¸€å®¶ä¸“é—¨åšé«˜é¢‘äº¤æ˜“çš„å…¬å¸LMAXå¼€æºå‡ºæ¥çš„ã€‚</p><p>æœ‰æ„æ€çš„æ˜¯ï¼ŒDisruptorçš„å¼€å‘è¯­è¨€ï¼Œå¹¶ä¸æ˜¯å¾ˆå¤šäººå¿ƒç›®ä¸­æœ€å®¹æ˜“åšåˆ°æ€§èƒ½æé™çš„C/C++ï¼Œè€Œæ˜¯æ€§èƒ½å—é™äºJVMçš„Javaã€‚è¿™åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹å‘¢ï¼Ÿé‚£é€šè¿‡è¿™ä¸€è®²ï¼Œä½ å°±èƒ½ä½“ä¼šåˆ°ï¼Œå…¶å®åªè¦é€šæ™“ç¡¬ä»¶å±‚é¢çš„åŸç†ï¼Œå³ä½¿æ˜¯åƒJavaè¿™æ ·çš„é«˜çº§è¯­è¨€ï¼Œä¹Ÿèƒ½å¤ŸæŠŠCPUçš„æ€§èƒ½å‘æŒ¥åˆ°æé™ã€‚</p><h2>Padding Cache Lineï¼Œä½“éªŒé«˜é€Ÿç¼“å­˜çš„å¨åŠ›</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Disruptoré‡Œé¢ä¸€æ®µç¥å¥‡çš„ä»£ç ã€‚è¿™æ®µä»£ç é‡Œï¼ŒDisruptoråœ¨RingBufferPadè¿™ä¸ªç±»é‡Œé¢å®šä¹‰äº†p1ï¼Œp2ä¸€ç›´åˆ°p7 è¿™æ ·7ä¸ªlongç±»å‹çš„å˜é‡ã€‚</p><pre><code>abstract class RingBufferPad\n{\n    protected long p1, p2, p3, p4, p5, p6, p7;\n}\n</code></pre><p>æˆ‘åœ¨çœ‹åˆ°è¿™æ®µä»£ç çš„ç¬¬ä¸€ååº”æ˜¯ï¼Œå˜é‡åå–å¾—ä¸è§„èŒƒï¼Œp1-p7è¿™æ ·çš„å˜é‡åæ²¡æœ‰æ˜ç¡®çš„æ„ä¹‰å•Šã€‚ä¸è¿‡ï¼Œå½“æˆ‘æ·±å…¥äº†è§£äº†Disruptorçš„è®¾è®¡å’Œæºä»£ç ï¼Œæ‰å‘ç°è¿™äº›å˜é‡åå–å¾—æ°å¦‚å…¶åˆ†ã€‚å› ä¸ºè¿™äº›å˜é‡å°±æ˜¯æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œåªæ˜¯å¸®åŠ©æˆ‘ä»¬è¿›è¡Œ<strong>ç¼“å­˜è¡Œå¡«å……</strong>ï¼ˆPadding Cache Lineï¼‰ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå°½å¯èƒ½åœ°ç”¨ä¸ŠCPUé«˜é€Ÿç¼“å­˜ï¼ˆCPU Cacheï¼‰ã€‚é‚£ä¹ˆç¼“å­˜è¡Œå¡«å……è¿™ä¸ªé»‘ç§‘æŠ€åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚</p><!-- [[[read_end]]] --><p>ä¸çŸ¥é“ä½ è¿˜è®°ä¸è®°å¾—ï¼Œæˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/107422\">35è®²</a>é‡Œé¢çš„è¿™ä¸ªè¡¨æ ¼ã€‚å¦‚æœè®¿é—®å†…ç½®åœ¨CPUé‡Œçš„L1 Cacheæˆ–è€…L2 Cacheï¼Œè®¿é—®å»¶æ—¶æ˜¯å†…å­˜çš„1/15ä¹ƒè‡³1/100ã€‚è€Œå†…å­˜çš„è®¿é—®é€Ÿåº¦ï¼Œå…¶å®æ˜¯è¿œè¿œæ…¢äºCPUçš„ã€‚æƒ³è¦è¿½æ±‚æé™æ€§èƒ½ï¼Œéœ€è¦æˆ‘ä»¬å°½å¯èƒ½åœ°å¤šä»CPU Cacheé‡Œé¢æ‹¿æ•°æ®ï¼Œè€Œä¸æ˜¯ä»å†…å­˜é‡Œé¢æ‹¿æ•°æ®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d3/a6/d39b0f2b3962d646133d450541fb75a6.png?wh=1142*588\" alt=\"\"></p><p>CPU Cacheè£…è½½å†…å­˜é‡Œé¢çš„æ•°æ®ï¼Œä¸æ˜¯ä¸€ä¸ªä¸€ä¸ªå­—æ®µåŠ è½½çš„ï¼Œè€Œæ˜¯åŠ è½½ä¸€æ•´ä¸ªç¼“å­˜è¡Œã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªé•¿åº¦ä¸º64çš„longç±»å‹çš„æ•°ç»„ã€‚é‚£ä¹ˆæ•°æ®ä»å†…å­˜åŠ è½½åˆ°CPU Cacheé‡Œé¢çš„æ—¶å€™ï¼Œä¸æ˜¯ä¸€ä¸ªä¸€ä¸ªæ•°ç»„å…ƒç´ åŠ è½½çš„ï¼Œè€Œæ˜¯ä¸€æ¬¡æ€§åŠ è½½å›ºå®šé•¿åº¦çš„ä¸€ä¸ªç¼“å­˜è¡Œã€‚</p><p>æˆ‘ä»¬ç°åœ¨çš„64ä½Intel CPUçš„è®¡ç®—æœºï¼Œç¼“å­˜è¡Œé€šå¸¸æ˜¯64ä¸ªå­—èŠ‚ï¼ˆBytesï¼‰ã€‚ä¸€ä¸ªlongç±»å‹çš„æ•°æ®éœ€è¦8ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€ä¸‹å­ä¼šåŠ è½½8ä¸ªlongç±»å‹çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ¬¡åŠ è½½æ•°ç»„é‡Œé¢è¿ç»­çš„8ä¸ªæ•°å€¼ã€‚è¿™æ ·çš„åŠ è½½æ–¹å¼ä½¿å¾—æˆ‘ä»¬éå†æ•°ç»„å…ƒç´ çš„æ—¶å€™ä¼šå¾ˆå¿«ã€‚å› ä¸ºåé¢è¿ç»­7æ¬¡çš„æ•°æ®è®¿é—®éƒ½ä¼šå‘½ä¸­ç¼“å­˜ï¼Œä¸éœ€è¦é‡æ–°ä»å†…å­˜é‡Œé¢å»è¯»å–æ•°æ®ã€‚è¿™ä¸ªæ€§èƒ½å±‚é¢çš„å¥½å¤„ï¼Œæˆ‘åœ¨ç¬¬37è®²çš„ç¬¬ä¸€ä¸ªä¾‹å­é‡Œé¢ä¸ºä½ æ¼”ç¤ºè¿‡ï¼Œå°è±¡ä¸æ·±çš„è¯ï¼Œå¯ä»¥è¿”å›å»çœ‹çœ‹ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨æˆ‘ä»¬ä¸ä½¿ç”¨æ•°ç»„ï¼Œè€Œæ˜¯ä½¿ç”¨å•ç‹¬çš„å˜é‡çš„æ—¶å€™ï¼Œè¿™é‡Œå°±ä¼šå‡ºç°é—®é¢˜äº†ã€‚åœ¨Disruptorçš„RingBufferï¼ˆç¯å½¢ç¼“å†²åŒºï¼‰çš„ä»£ç é‡Œé¢ï¼Œå®šä¹‰äº†ä¸€ä¸ªRingBufferFieldsç±»ï¼Œé‡Œé¢æœ‰indexMaskå’Œå…¶ä»–å‡ ä¸ªå˜é‡ï¼Œç”¨æ¥å­˜æ”¾RingBufferçš„å†…éƒ¨çŠ¶æ€ä¿¡æ¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/23/f6/23adbbc656243ce85fdb8c7fab42ecf6.jpeg?wh=2278*1996\" alt=\"\"></p><p>CPUåœ¨åŠ è½½æ•°æ®çš„æ—¶å€™ï¼Œè‡ªç„¶ä¹Ÿä¼šæŠŠè¿™ä¸ªæ•°æ®ä»å†…å­˜åŠ è½½åˆ°é«˜é€Ÿç¼“å­˜é‡Œé¢æ¥ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œé«˜é€Ÿç¼“å­˜é‡Œé¢é™¤äº†è¿™ä¸ªæ•°æ®ï¼Œè¿˜ä¼šåŠ è½½è¿™ä¸ªæ•°æ®å‰åå®šä¹‰çš„å…¶ä»–å˜é‡ã€‚è¿™ä¸ªæ—¶å€™ï¼Œé—®é¢˜å°±æ¥äº†ã€‚Disruptoræ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹çš„æœåŠ¡å™¨æ¡†æ¶ï¼Œåœ¨è¿™ä¸ªæ•°æ®å‰åå®šä¹‰çš„å…¶ä»–å˜é‡ï¼Œå¯èƒ½ä¼šè¢«å¤šä¸ªä¸åŒçš„çº¿ç¨‹å»æ›´æ–°æ•°æ®ã€è¯»å–æ•°æ®ã€‚è¿™äº›å†™å…¥ä»¥åŠè¯»å–çš„è¯·æ±‚ï¼Œä¼šæ¥è‡ªäºä¸åŒçš„ CPU Coreã€‚äºæ˜¯ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„åŒæ­¥æ›´æ–°ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æŠŠCPU Cacheé‡Œé¢çš„æ•°æ®ï¼Œé‡æ–°å†™å›åˆ°å†…å­˜é‡Œé¢å»æˆ–è€…é‡æ–°ä»å†…å­˜é‡Œé¢åŠ è½½æ•°æ®ã€‚</p><p>è€Œæˆ‘ä»¬åˆšåˆšè¯´è¿‡ï¼Œè¿™äº›CPU Cacheçš„å†™å›å’ŒåŠ è½½ï¼Œéƒ½ä¸æ˜¯ä»¥ä¸€ä¸ªå˜é‡ä½œä¸ºå•ä½çš„ã€‚è¿™äº›åŠ¨ä½œéƒ½æ˜¯ä»¥æ•´ä¸ªCache Lineä½œä¸ºå•ä½çš„ã€‚æ‰€ä»¥ï¼Œå½“INITIAL_CURSOR_VALUE å‰åçš„é‚£äº›å˜é‡è¢«å†™å›åˆ°å†…å­˜çš„æ—¶å€™ï¼Œè¿™ä¸ªå­—æ®µè‡ªå·±ä¹Ÿå†™å›åˆ°äº†å†…å­˜ï¼Œè¿™ä¸ªå¸¸é‡çš„ç¼“å­˜ä¹Ÿå°±å¤±æ•ˆäº†ã€‚å½“æˆ‘ä»¬è¦å†æ¬¡è¯»å–è¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œè¦å†é‡æ–°ä»å†…å­˜è¯»å–ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œè¯»å–é€Ÿåº¦å¤§å¤§å˜æ…¢äº†ã€‚</p><pre><code>......\n\nabstract class RingBufferPad\n{\n    protected long p1, p2, p3, p4, p5, p6, p7;\n}\n\t\n\nabstract class RingBufferFields&lt;E&gt; extends RingBufferPad\n{\n    ......    \n    private final long indexMask;\n\tprivate final Object[] entries;\n\tprotected final int bufferSize;\n\tprotected final Sequencer sequencer;\n    ......    \n}\n\npublic final class RingBuffer&lt;E&gt; extends RingBufferFields&lt;E&gt; implements Cursored, EventSequencer&lt;E&gt;, EventSink&lt;E&gt;\n{\n    ......    \n    protected long p1, p2, p3, p4, p5, p6, p7;\n    ......\n}\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/93/b1/9330b8fb1e8de3f62d34c6f85f268db1.jpeg?wh=2776*1249\" alt=\"\"></p><p>é¢ä¸´è¿™æ ·ä¸€ä¸ªæƒ…å†µï¼ŒDisruptoré‡Œå‘æ˜äº†ä¸€ä¸ªç¥å¥‡çš„ä»£ç æŠ€å·§ï¼Œè¿™ä¸ªæŠ€å·§å°±æ˜¯ç¼“å­˜è¡Œå¡«å……ã€‚Disruptor åœ¨ RingBufferFieldsé‡Œé¢å®šä¹‰çš„å˜é‡çš„å‰åï¼Œåˆ†åˆ«å®šä¹‰äº†7ä¸ªlongç±»å‹çš„å˜é‡ã€‚å‰é¢çš„7ä¸ªæ¥è‡ªç»§æ‰¿çš„ RingBufferPad ç±»ï¼Œåé¢çš„7ä¸ªåˆ™æ˜¯ç›´æ¥å®šä¹‰åœ¨ RingBuffer ç±»é‡Œé¢ã€‚è¿™14ä¸ªå˜é‡æ²¡æœ‰ä»»ä½•å®é™…çš„ç”¨é€”ã€‚æˆ‘ä»¬æ—¢ä¸ä¼šå»è¯»ä»–ä»¬ï¼Œä¹Ÿä¸ä¼šå»å†™ä»–ä»¬ã€‚</p><p>è€ŒRingBufferFieldsé‡Œé¢å®šä¹‰çš„è¿™äº›å˜é‡éƒ½æ˜¯finalçš„ï¼Œç¬¬ä¸€æ¬¡å†™å…¥ä¹‹åä¸ä¼šå†è¿›è¡Œä¿®æ”¹ã€‚æ‰€ä»¥ï¼Œä¸€æ—¦å®ƒè¢«åŠ è½½åˆ°CPU Cacheä¹‹åï¼Œåªè¦è¢«é¢‘ç¹åœ°è¯»å–è®¿é—®ï¼Œå°±ä¸ä¼šå†è¢«æ¢å‡ºCacheäº†ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå¯¹äºè¿™ä¸ªå€¼çš„è¯»å–é€Ÿåº¦ï¼Œä¼šæ˜¯ä¸€ç›´æ˜¯CPU Cacheçš„è®¿é—®é€Ÿåº¦ï¼Œè€Œä¸æ˜¯å†…å­˜çš„è®¿é—®é€Ÿåº¦ã€‚</p><h2>ä½¿ç”¨RingBufferï¼Œåˆ©ç”¨ç¼“å­˜å’Œåˆ†æ”¯é¢„æµ‹</h2><p>å…¶å®è¿™ä¸ªåˆ©ç”¨CPU Cacheçš„æ€§èƒ½çš„æ€è·¯ï¼Œè´¯ç©¿äº†æ•´ä¸ªDisruptorã€‚Disruptoræ•´ä¸ªæ¡†æ¶ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªé«˜é€Ÿçš„<a href=\"https://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem\">ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</a>ï¼ˆProducer-Consumerï¼‰ä¸‹çš„é˜Ÿåˆ—ã€‚ç”Ÿäº§è€…ä¸åœåœ°å¾€é˜Ÿåˆ—é‡Œé¢ç”Ÿäº§æ–°çš„éœ€è¦å¤„ç†çš„ä»»åŠ¡ï¼Œè€Œæ¶ˆè´¹è€…ä¸åœåœ°ä»é˜Ÿåˆ—é‡Œé¢å¤„ç†æ‰è¿™äº›ä»»åŠ¡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/65/56/659082942118e7c69eb3807b00f5f556.jpeg?wh=2566*2356\" alt=\"\"></p><p>å¦‚æœä½ ç†Ÿæ‚‰ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œé‚£ä½ åº”è¯¥éå¸¸æ¸…æ¥šï¼Œå¦‚æœè¦å®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæœ€åˆé€‚çš„æ•°æ®ç»“æ„åº”è¯¥æ˜¯é“¾è¡¨ã€‚æˆ‘ä»¬åªè¦ç»´æŠ¤å¥½é“¾è¡¨çš„å¤´å’Œå°¾ï¼Œå°±èƒ½å¾ˆå®¹æ˜“å®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚ç”Ÿäº§è€…åªè¦ä¸æ–­åœ°å¾€é“¾è¡¨çš„å°¾éƒ¨ä¸æ–­æ’å…¥æ–°çš„èŠ‚ç‚¹ï¼Œè€Œæ¶ˆè´¹è€…åªéœ€è¦ä¸æ–­ä»å¤´éƒ¨å–å‡ºæœ€è€çš„èŠ‚ç‚¹è¿›è¡Œå¤„ç†å°±å¥½äº†ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ã€‚å®é™…ä¸Šï¼ŒJavaè‡ªå·±çš„åŸºç¡€åº“é‡Œé¢å°±æœ‰LinkedBlockingQueueè¿™æ ·çš„é˜Ÿåˆ—åº“ï¼Œå¯ä»¥ç›´æ¥ç”¨åœ¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ä¸Šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/45/0e/45d4c7c8b0cb1f056684199e39660f0e.jpeg?wh=1894*3151\" alt=\"\"></p><p>ä¸è¿‡ï¼ŒDisruptoré‡Œé¢å¹¶æ²¡æœ‰ç”¨LinkedBlockingQueueï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸€ä¸ªRingBufferè¿™æ ·çš„æ•°æ®ç»“æ„ï¼Œè¿™ä¸ªRingBufferçš„åº•å±‚å®ç°åˆ™æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„æ•°ç»„ã€‚æ¯”èµ·é“¾è¡¨å½¢å¼çš„å®ç°ï¼Œæ•°ç»„çš„æ•°æ®åœ¨å†…å­˜é‡Œé¢ä¼šå­˜åœ¨ç©ºé—´å±€éƒ¨æ€§ã€‚</p><p>å°±åƒä¸Šé¢æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œæ•°ç»„çš„è¿ç»­å¤šä¸ªå…ƒç´ ä¼šä¸€å¹¶åŠ è½½åˆ°CPU Cacheé‡Œé¢æ¥ï¼Œæ‰€ä»¥è®¿é—®éå†çš„é€Ÿåº¦ä¼šæ›´å¿«ã€‚è€Œé“¾è¡¨é‡Œé¢å„ä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œå¤šåŠä¸ä¼šå‡ºç°åœ¨ç›¸é‚»çš„å†…å­˜ç©ºé—´ï¼Œè‡ªç„¶ä¹Ÿå°±äº«å—ä¸åˆ°æ•´ä¸ªCache LineåŠ è½½åæ•°æ®è¿ç»­ä»é«˜é€Ÿç¼“å­˜é‡Œé¢è¢«è®¿é—®åˆ°çš„ä¼˜åŠ¿ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæ•°æ®çš„éå†è®¿é—®è¿˜æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œå°±æ˜¯CPUå±‚é¢çš„åˆ†æ”¯é¢„æµ‹ä¼šå¾ˆå‡†ç¡®ã€‚è¿™å¯ä»¥ä½¿å¾—æˆ‘ä»¬æ›´æœ‰æ•ˆåœ°åˆ©ç”¨äº†CPUé‡Œé¢çš„å¤šçº§æµæ°´çº¿ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±ä¼šè·‘å¾—æ›´å¿«ã€‚è¿™ä¸€éƒ¨åˆ†çš„åŸç†å¦‚æœä½ å·²ç»ä¸å¤ªè®°å¾—äº†ï¼Œå¯ä»¥å›è¿‡å¤´å»å¤ä¹ ä¸€ä¸‹<a href=\"https://time.geekbang.org/column/article/102166\">ç¬¬25è®²</a>å…³äºåˆ†æ”¯é¢„æµ‹çš„å†…å®¹ã€‚</p><h2>æ€»ç»“å»¶ä¼¸</h2><p>å¥½äº†ï¼Œä¸çŸ¥é“è®²å®Œè¿™äº›ï¼Œä½ æœ‰æ²¡æœ‰ä½“ä¼šåˆ°Disruptorè¿™ä¸ªæ¡†æ¶çš„ç¥å¥‡ä¹‹å¤„å‘¢ï¼Ÿ</p><p>CPUä»å†…å­˜åŠ è½½æ•°æ®åˆ°CPU Cacheé‡Œé¢çš„æ—¶å€™ï¼Œä¸æ˜¯ä¸€ä¸ªå˜é‡ä¸€ä¸ªå˜é‡åŠ è½½çš„ï¼Œè€Œæ˜¯åŠ è½½å›ºå®šé•¿åº¦çš„Cache Lineã€‚å¦‚æœæ˜¯åŠ è½½æ•°ç»„é‡Œé¢çš„æ•°æ®ï¼Œé‚£ä¹ˆCPUå°±ä¼šåŠ è½½åˆ°æ•°ç»„é‡Œé¢è¿ç»­çš„å¤šä¸ªæ•°æ®ã€‚æ‰€ä»¥ï¼Œæ•°ç»„çš„éå†å¾ˆå®¹æ˜“äº«å—åˆ°CPU Cacheé‚£é£é©°ç”µæ£çš„é€Ÿåº¦å¸¦æ¥çš„çº¢åˆ©ã€‚</p><p>å¯¹äºç±»é‡Œé¢å®šä¹‰çš„å•ç‹¬çš„å˜é‡ï¼Œå°±ä¸å®¹æ˜“äº«å—åˆ°CPU Cacheçº¢åˆ©äº†ã€‚å› ä¸ºè¿™äº›å­—æ®µè™½ç„¶åœ¨å†…å­˜å±‚é¢ä¼šåˆ†é…åˆ°ä¸€èµ·ï¼Œä½†æ˜¯å®é™…åº”ç”¨çš„æ—¶å€™å¾€å¾€æ²¡æœ‰ä»€ä¹ˆå…³è”ã€‚äºæ˜¯ï¼Œå°±ä¼šå‡ºç°å¤šä¸ªCPU Coreè®¿é—®çš„æƒ…å†µä¸‹ï¼Œæ•°æ®é¢‘ç¹åœ¨CPU Cacheå’Œå†…å­˜é‡Œé¢æ¥æ¥å›å›çš„æƒ…å†µã€‚è€ŒDisruptorå¾ˆå–å·§åœ°åœ¨éœ€è¦é¢‘ç¹é«˜é€Ÿè®¿é—®çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯RingBufferFieldsé‡Œé¢çš„indexMaskè¿™äº›å­—æ®µå‰åï¼Œå„å®šä¹‰äº†7ä¸ªæ²¡æœ‰ä»»ä½•ä½œç”¨å’Œè¯»å†™è¯·æ±‚çš„longç±»å‹çš„å˜é‡ã€‚</p><p>è¿™æ ·ï¼Œæ— è®ºåœ¨å†…å­˜çš„ä»€ä¹ˆä½ç½®ä¸Šï¼Œè¿™äº›å˜é‡æ‰€åœ¨çš„Cache Lineéƒ½ä¸ä¼šæœ‰ä»»ä½•å†™æ›´æ–°çš„è¯·æ±‚ã€‚æˆ‘ä»¬å°±å¯ä»¥å§‹ç»ˆåœ¨Cache Lineé‡Œé¢è¯»åˆ°å®ƒçš„å€¼ï¼Œè€Œä¸éœ€è¦ä»å†…å­˜é‡Œé¢å»è¯»å–æ•°æ®ï¼Œä¹Ÿå°±å¤§å¤§åŠ é€Ÿäº†Disruptorçš„æ€§èƒ½ã€‚</p><p>è¿™æ ·çš„æ€è·¯ï¼Œå…¶å®æ¸—é€åœ¨Disruptorè¿™ä¸ªå¼€æºæ¡†æ¶çš„æ–¹æ–¹é¢é¢ã€‚ä½œä¸ºä¸€ä¸ªç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼ŒDisruptorå¹¶æ²¡æœ‰é€‰æ‹©ä½¿ç”¨é“¾è¡¨æ¥å®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè€Œæ˜¯ä½¿ç”¨äº†RingBufferã€‚RingBufferåº•å±‚çš„æ•°æ®ç»“æ„åˆ™æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„æ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„ä¸ä»…è®©æˆ‘ä»¬æ›´å®¹æ˜“ç”¨å¥½CPU Cacheï¼Œå¯¹CPUæ‰§è¡Œè¿‡ç¨‹ä¸­çš„åˆ†æ”¯é¢„æµ‹ä¹Ÿéå¸¸æœ‰åˆ©ã€‚æ›´å‡†ç¡®çš„åˆ†æ”¯é¢„æµ‹ï¼Œå¯ä»¥ä½¿å¾—æˆ‘ä»¬æ›´å¥½åœ°åˆ©ç”¨å¥½CPUçš„æµæ°´çº¿ï¼Œè®©ä»£ç è·‘å¾—æ›´å¿«ã€‚</p><h2>æ¨èé˜…è¯»</h2><p>ä»Šå¤©è®²çš„æ˜¯Disruptorï¼Œæ¨èçš„é˜…è¯»å†…å®¹è‡ªç„¶æ˜¯Disruptorçš„å®˜æ–¹æ–‡æ¡£ã€‚ä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ŒDisruptoråœ¨è‡ªå·±<a href=\"https://github.com/LMAX-Exchange/disruptor/wiki/Introduction\">GitHub</a>ä¸Šæœ‰å¾ˆè¯¦ç»†çš„è®¾è®¡æ–‡æ¡£ï¼Œæ¨èä½ å¥½å¥½é˜…è¯»ä¸€ä¸‹ã€‚</p><p>è¿™é‡Œé¢ä¸ä»…åŒ…å«äº†æ€ä¹ˆç”¨å¥½Disruptorï¼Œä¹ŸåŒ…å«äº†æ•´ä¸ªDisruptoræ¡†æ¶çš„è®¾è®¡æ€è·¯ï¼Œæ˜¯ä¸€ä»½å¾ˆå¥½çš„é˜…è¯»å­¦ä¹ ææ–™ã€‚å¦å¤–ï¼ŒDisruptorçš„å®˜æ–¹æ–‡æ¡£é‡Œï¼Œè¿˜æœ‰å¾ˆå¤šæ–‡ç« ã€æ¼”è®²ï¼Œè¯¦ç»†ä»‹ç»äº†è¿™ä¸ªæ¡†æ¶ï¼Œå¾ˆå€¼å¾—æ·±å…¥å»çœ‹ä¸€çœ‹ã€‚Disruptorçš„æºä»£ç å…¶å®å¹¶ä¸å¤æ‚ï¼Œå¾ˆé€‚åˆç”¨æ¥å­¦ä¹ æ€ä¹ˆé˜…è¯»å¼€æºæ¡†æ¶ä»£ç ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>ä»Šå¤©æˆ‘ä»¬è®²è§£äº†ç¼“å­˜è¡Œå¡«å……ï¼Œä½ å¯ä»¥è¯•è¯•ä¿®æ”¹Disruptorçš„ä»£ç ï¼Œçœ‹çœ‹åœ¨æ²¡æœ‰ç¼“å­˜è¡Œå¡«å……å’Œæœ‰ç¼“å­˜è¡Œå¡«å……çš„æƒ…å†µä¸‹çš„æ€§èƒ½å·®å¼‚ã€‚ä½ ä¹Ÿå¯ä»¥å°è¯•ç›´æ¥ä¿®æ”¹Disruptorçš„æºç å’Œ<a href=\"https://github.com/LMAX-Exchange/disruptor/blob/master/src/perftest/java/com/lmax/disruptor/immutable/CustomPerformanceTest.java\">æ€§èƒ½æµ‹è¯•ä»£ç </a>ï¼Œçœ‹çœ‹è¿è¡Œçš„ç»“æœæ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p><p>æ¬¢è¿ä½ æŠŠä½ çš„æµ‹è¯•ç»“æœå†™åœ¨ç•™è¨€åŒºï¼Œå’Œå¤§å®¶ä¸€èµ·è®¨è®ºã€åˆ†äº«ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":132036,"user_name":"å°æµ·æµ·","can_delete":false,"product_type":"c1","uid":1158040,"ip_address":"","ucode":"C2FB9B6BCB4631","user_header":"https://static001.geekbang.org/account/avatar/00/11/ab/98/6f29f4f2.jpg","comment_is_top":false,"comment_ctime":1568010624,"is_pvip":false,"replies":[{"id":"51029","content":"æˆ‘å›å¤´é‡æ–°çœ‹äº†ä¸€ä¸‹ä»£ç ï¼Œæˆ‘è§‰å¾—ä½ è¯´çš„æ˜¯å¯¹çš„ï¼ŒPaddingå¯¹åº”çš„æ˜¯RingBufferFieldsé‡Œé¢çš„å­—æ®µï¼Œè€Œä¸åº”è¯¥æ˜¯INITIAL_CURSOR_VALUEï¼Œæˆ‘å»è®¢æ­£ä¸€ä¸‹ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568443662,"ip_address":"","comment_id":132036,"utype":1}],"discussion_count":4,"race_medal":0,"score":"177661669760","product_id":100026001,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘æƒ‘çš„åœ°æ–¹ï¼šæ–‡ä¸­è®²äº†RingBufferç±»åˆ©ç”¨ç¼“å­˜è¡Œå¡«å……æ¥è§£å†³INITIAL_CURSOR_VALUEä¼ªå…±äº«çš„é—®é¢˜ï¼Œä½†æ˜¯æˆ‘è®°å¾—Javaå¯¹è±¡å†…å­˜å¸ƒå±€æ˜¯ï¼šå®ä¾‹å˜é‡æ”¾åœ¨å †åŒºï¼Œé™æ€å˜é‡å±äºç±»ï¼Œæ”¾åœ¨æ–¹æ³•åŒºï¼Œè€Œå †åŒºå’Œæ–¹æ³•åŒºåœ¨å†…å­˜é‡Œè‚¯å®šæ˜¯éš”ç¦»å¼€çš„ï¼Œä½†æ˜¯RingBufferçš„å‰åå¡«å……å­—æ®µéƒ½æ˜¯å®ä¾‹å­—æ®µï¼Œè€ŒINITIAL_CURSOR_VALUEæ˜¯é™æ€å¸¸é‡ï¼Œæ‰€ä»¥å®é™…è¿è¡Œä¸­ä»–ä»¬è‚¯å®šä¸æ˜¯ç´§å¯†æ’åˆ—åœ¨ä¸€èµ·çš„ï¼Œé‚£ä¹ˆå°±è§£å†³ä¸äº†ä¼ªå…±äº«çš„é—®é¢˜äº†ï¼Œå†µä¸”RingBufferçš„å­ç±»RingBufferFieldsè¿˜æœ‰å…¶ä»–å®ä¾‹å­—æ®µï¼Œå¦‚ï¼šindexMaskã€entriesã€bufferSizeã€sequencerï¼Œè¿™äº›å­—æ®µéƒ½æ˜¯finalä¿®é¥°çš„ï¼Œå³å¯¹è±¡æ„å»ºåä¸ä¼šå†ä¿®æ”¹ï¼Œæ‰€ä»¥æˆ‘ç†è§£å‰åçš„ç¼“å­˜è¡Œå¡«å……å®ˆæŠ¤çš„åº”è¯¥æ˜¯è¿™å‡ ä¸ªå­—æ®µï¼Œè€Œä¸”ä»å­ç±»RingBufferFieldsçš„å‘½åä¹Ÿå¯ä»¥çœ‹å‡ºå‰é¢é‚£å‡ ä¸ªå­—æ®µæ‰æ˜¯æƒ³è¦ç¼“å­˜çš„å­—æ®µã€‚å¸Œæœ›å¾—åˆ°è€å¸ˆçš„å›å¤ï¼Œå¦å¤–è¯¾ç¨‹å¿«ç»“æŸäº†ï¼Œä¸€è·¯è·Ÿä¸‹æ¥æ”¶è·å¾ˆå¤§ï¼Œæˆ‘å‡†å¤‡è¿™æ®µæ—¶é—´äºŒåˆ·æ¥å·©å›ºä¸‹^_^","like_count":42,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466729,"discussion_content":"æˆ‘å›å¤´é‡æ–°çœ‹äº†ä¸€ä¸‹ä»£ç ï¼Œæˆ‘è§‰å¾—ä½ è¯´çš„æ˜¯å¯¹çš„ï¼ŒPaddingå¯¹åº”çš„æ˜¯RingBufferFieldsé‡Œé¢çš„å­—æ®µï¼Œè€Œä¸åº”è¯¥æ˜¯INITIAL_CURSOR_VALUEï¼Œæˆ‘å»è®¢æ­£ä¸€ä¸‹ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568443662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1995082,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0eGJygV4lh6PJuotKrz1jsZcOdNiaHnUC3y5A2O3yudUQLkzOE8758icDoXlvgpytQ50ibSIc9nJmg/132","nickname":"ä½™å·","note":"","ucode":"B0819C42A82371","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321762,"discussion_content":"æ³¨æ„ä¸€ä¸‹ç±»æ˜¯abstractã€‚çˆ¶å­ç±»å±æ€§åŸç†ã€‚padçˆ¶ç±»å¡«å……å±æ€§åœ¨å‰ï¼Œfieldçˆ¶ç±»çš„å±æ€§è¢«ä¿æŠ¤åœ¨ä¸­é—´ï¼Œringbufferå­ç±»å¡«å……å±æ€§åœ¨æœ€åã€‚è¿™æ ·å°±æœç»è¢«å…¶ä»–cache lineå½±å“ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604629748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228290,"avatar":"https://static001.geekbang.org/account/avatar/00/12/be/02/43202976.jpg","nickname":"w ğŸ","note":"","ucode":"F2386C971EC58B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39393,"discussion_content":"RingBufferé‡Œä¹Ÿæœ‰p1~p7ï¼Œæ˜¯ä¿æŠ¤è°å‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571921326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1350677,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9c/15/719f1f44.jpg","nickname":"ç­‰é£æ¥","note":"","ucode":"5B7FF74A51F534","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":28954,"discussion_content":"ä»…finalä¿®é¥°ï¼Œ ä¼šåœ¨æ–¹æ³•åŒºå—ï¼Œ ä¸éœ€è¦staticä¿®é¥°å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570719294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169236,"user_name":"å±±é—´ç«¹","can_delete":false,"product_type":"c1","uid":1696212,"ip_address":"","ucode":"FA7F16EF01D659","user_header":"https://static001.geekbang.org/account/avatar/00/19/e1/d4/1b5ac51e.jpg","comment_is_top":false,"comment_ctime":1578299183,"is_pvip":false,"replies":[{"id":"68090","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1580632696,"ip_address":"","comment_id":169236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"151902154543","product_id":100026001,"comment_content":"åœ¨java8ä¸­ï¼Œjvmå›¢é˜Ÿæå‡ºäº†@Contendedæ³¨è§£æ¥è¿›è¡Œæ”¯æŒï¼Œåœ¨ä½ éœ€è¦é¿å…â€œfalse sharingâ€çš„å­—æ®µä¸Šæ ‡è®°æ³¨è§£ï¼Œè¿™å¯ä»¥æš—ç¤ºè™šæ‹Ÿæœºâ€œè¿™ä¸ªå­—æ®µå¯ä»¥åˆ†ç¦»åˆ°ä¸åŒçš„cache lineä¸­â€ï¼Œè¿™æ˜¯JEP 142çš„ç›®æ ‡ã€‚","like_count":36,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480474,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580632696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131495,"user_name":"D","can_delete":false,"product_type":"c1","uid":1027596,"ip_address":"","ucode":"5BB4D16FE39BFF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/0c/f39f847a.jpg","comment_is_top":false,"comment_ctime":1567767786,"is_pvip":false,"replies":[{"id":"51052","content":"æ²¡é”™ï¼Œçœ‹æ¥ä½ è¯»çš„æ—¶å€™å¾ˆä»”ç»†åœ°æ€è€ƒè¿‡ã€‚<br><br>å½“æˆ‘ä»¬çš„å¯¹äºæ•°æ®ä¿®æ”¹ï¼Œä¿®æ”¹äº†cacheä¹‹åï¼Œè¿™ä¸ªæ•°æ®å¦‚æœè¦åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œé‚£ä¹ˆå°±ä¼šéœ€è¦é€šè¿‡MSEIåè®®æ¥åœ¨å„ä¸ªCPU Coreçš„Cacheé‡Œé¢ä¿æŒæ•°æ®åŒæ­¥ã€‚<br><br>é‚£ä¹ˆæ˜¯å¦éœ€è¦åŒæ­¥ä¸»å†…å­˜ï¼Œä¼šå¼•å‘å¦å¤–ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå°±æ˜¯Memory Barrier&#47;Fenceï¼Œè¿™éƒ¨åˆ†çŸ¥è¯†ç‚¹å…¶å®è¿˜å¯ä»¥å•ç‹¬æ‹¿æ¥è¯´ä¸¤è®²ã€‚ä½ å¯ä»¥å…ˆå»æœç´¢ä¸Šé¢çš„å…³é”®è¯ï¼Œäº†è§£ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568449765,"ip_address":"","comment_id":131495,"utype":1}],"discussion_count":2,"race_medal":0,"score":"91762081002","product_id":100026001,"comment_content":"è¿™ä¸ªæ˜¯ä¸æ˜¯å’Œå‰é¢è®²çš„mseiæœ‰ä¸€å®šå…³ç³»å•Šï¼Œè¯·å¾è€å¸ˆç‚¹æ‹¨","like_count":22,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466485,"discussion_content":"æ²¡é”™ï¼Œçœ‹æ¥ä½ è¯»çš„æ—¶å€™å¾ˆä»”ç»†åœ°æ€è€ƒè¿‡ã€‚\n\nå½“æˆ‘ä»¬çš„å¯¹äºæ•°æ®ä¿®æ”¹ï¼Œä¿®æ”¹äº†cacheä¹‹åï¼Œè¿™ä¸ªæ•°æ®å¦‚æœè¦åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œé‚£ä¹ˆå°±ä¼šéœ€è¦é€šè¿‡MSEIåè®®æ¥åœ¨å„ä¸ªCPU Coreçš„Cacheé‡Œé¢ä¿æŒæ•°æ®åŒæ­¥ã€‚\n\né‚£ä¹ˆæ˜¯å¦éœ€è¦åŒæ­¥ä¸»å†…å­˜ï¼Œä¼šå¼•å‘å¦å¤–ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå°±æ˜¯Memory Barrier/Fenceï¼Œè¿™éƒ¨åˆ†çŸ¥è¯†ç‚¹å…¶å®è¿˜å¯ä»¥å•ç‹¬æ‹¿æ¥è¯´ä¸¤è®²ã€‚ä½ å¯ä»¥å…ˆå»æœç´¢ä¸Šé¢çš„å…³é”®è¯ï¼Œäº†è§£ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568449765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1411096,"avatar":"https://static001.geekbang.org/account/avatar/00/15/88/18/9744d5ec.jpg","nickname":"å°è¶…äºº","note":"","ucode":"0D8A433F3E3737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400993,"discussion_content":"è¿™ç§‘æŠ€ä¹Ÿå¤ªé»‘äº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633516059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174851,"user_name":"-_-|||","can_delete":false,"product_type":"c1","uid":1328142,"ip_address":"","ucode":"94B21594658BF9","user_header":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","comment_is_top":false,"comment_ctime":1580436063,"is_pvip":false,"replies":[{"id":"68026","content":"-_-_aaa åŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼ŒindexMaskæ˜¯ä¸€ä¸ªç¬¬ä¸€æ¬¡å†™å…¥ä¹‹åå°±ä¸å˜åŠ¨çš„å˜é‡äº†ã€‚ä½ å¯ä»¥çœ‹åˆ°åœ¨ä»£ç é‡Œé¢è¿™æ˜¯ä¸€ä¸ªJavaçš„finalå˜é‡ã€‚<br><br>å‰å7ä¸ªå°±æ˜¯å› ä¸º8ä¸ªlongæ­£å¥½64byteï¼Œè¿™æ ·cache lineæ— è®ºåœ¨å“ªä¸ªä½ç½®è¢«åŠ è½½ï¼Œè¿™64ä¸ªbyteåœ¨ç¬¬ä¸€æ¬¡åŠ è½½åˆ°cache lineä¹‹åå°±ä¸å†éœ€è¦æ›´æ–°äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1580615446,"ip_address":"","comment_id":174851,"utype":1}],"discussion_count":5,"race_medal":1,"score":"74594880095","product_id":100026001,"comment_content":"â€œè€Œ Disruptor å¾ˆå–å·§åœ°åœ¨éœ€è¦é¢‘ç¹é«˜é€Ÿè®¿é—®çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯ RingBufferFields é‡Œé¢çš„ indexMask è¿™äº›å­—æ®µå‰åï¼Œå„å®šä¹‰äº† 7 ä¸ªæ²¡æœ‰ä»»ä½•ä½œç”¨å’Œè¯»å†™è¯·æ±‚çš„ long ç±»å‹çš„å˜é‡ã€‚â€ä¸ºä»€ä¹ˆå‰åå„7ä¸ªï¼Œcache line å°±æ²¡æœ‰å†™çš„è¯·æ±‚ï¼Œå°±æ˜¯å› ä¸º8ä¸ªlongæ­£å¥½64byteå—ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰å†™çš„å‘¢ï¼Ÿ","like_count":18,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482546,"discussion_content":"-_-_aaa åŒå­¦ï¼Œ\n\nä½ å¥½ï¼ŒindexMaskæ˜¯ä¸€ä¸ªç¬¬ä¸€æ¬¡å†™å…¥ä¹‹åå°±ä¸å˜åŠ¨çš„å˜é‡äº†ã€‚ä½ å¯ä»¥çœ‹åˆ°åœ¨ä»£ç é‡Œé¢è¿™æ˜¯ä¸€ä¸ªJavaçš„finalå˜é‡ã€‚\n\nå‰å7ä¸ªå°±æ˜¯å› ä¸º8ä¸ªlongæ­£å¥½64byteï¼Œè¿™æ ·cache lineæ— è®ºåœ¨å“ªä¸ªä½ç½®è¢«åŠ è½½ï¼Œè¿™64ä¸ªbyteåœ¨ç¬¬ä¸€æ¬¡åŠ è½½åˆ°cache lineä¹‹åå°±ä¸å†éœ€è¦æ›´æ–°äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580615446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000060,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","nickname":"ğŸ„½ğŸ„¸ğŸ…‡ğŸ…„ğŸ…‚","note":"","ucode":"853763C229A5AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276628,"discussion_content":"è€å¸ˆçš„ç¬¬äºŒæ®µè¯ï¼Œå¦‚åŒé†é†çŒé¡¶å•Šï¼æˆ‘ä¸€ä¸‹å­æ˜ç™½äº†ä¸ºå•¥æ˜¯å‰å7ä¸ªlongäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590920233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391541,"discussion_content":"æˆ‘è¿™ä¹ˆç†è§£ä¸çŸ¥é“å¯¹ä¸å¯¹ï¼Œå¦‚æœæ˜¯å‰é¢åªæœ‰6ä¸ªï¼Œé‚£å‰é¢ç¬¬7ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œå°±å¯èƒ½ä¼šå¯¼è‡´æˆ‘ä»¬è¦ä¿æŠ¤çš„ fields é‡Œé¢ä¸ªç¬¬ä¸€ä¸ªæ•°æ®ä½œä¸ºåŒä¸€ä¸ªcache lineçš„æ•°æ®åŒæ­¥ä¸»å†…å­˜ï¼Œå¯¼è‡´å†æ¬¡è¯»å–è¿™ç¬¬ä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦å†ä»å†…å­˜é‡Œé¢è¯»å–ï¼Œå°±è¾¾ä¸åˆ°æˆ‘ä»¬æƒ³è¦ä½¿ç”¨é«˜é€Ÿç¼“å­˜æå‡é€Ÿåº¦çš„ç›®çš„äº†ã€‚\nè€å¸ˆåŸæ–‡æ˜¯è¿™ä¸€æ®µåœ¨è¯´è¿™ä¸ªï¼šâ€œCPU åœ¨åŠ è½½æ•°æ®çš„æ—¶å€™ï¼Œè‡ªç„¶ä¹Ÿä¼šæŠŠè¿™ä¸ªæ•°æ®ä»å†…å­˜åŠ è½½åˆ°é«˜é€Ÿç¼“å­˜é‡Œé¢æ¥ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œé«˜é€Ÿç¼“å­˜é‡Œé¢é™¤äº†è¿™ä¸ªæ•°æ®ï¼Œè¿˜ä¼šåŠ è½½è¿™ä¸ªæ•°æ®å‰åå®šä¹‰çš„å…¶ä»–å˜é‡ã€‚è¿™ä¸ªæ—¶å€™ï¼Œé—®é¢˜å°±æ¥äº†ã€‚Disruptor æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹çš„æœåŠ¡å™¨æ¡†æ¶ï¼Œåœ¨è¿™ä¸ªæ•°æ®å‰åå®šä¹‰çš„å…¶ä»–å˜é‡ï¼Œå¯èƒ½ä¼šè¢«å¤šä¸ªä¸åŒçš„çº¿ç¨‹å»æ›´æ–°æ•°æ®ã€è¯»å–æ•°æ®ã€‚è¿™äº›å†™å…¥ä»¥åŠè¯»å–çš„è¯·æ±‚ï¼Œä¼šæ¥è‡ªäºä¸åŒçš„ CPU Coreã€‚äºæ˜¯ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„åŒæ­¥æ›´æ–°ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æŠŠ CPU Cache é‡Œé¢çš„æ•°æ®ï¼Œé‡æ–°å†™å›åˆ°å†…å­˜é‡Œé¢å»æˆ–è€…é‡æ–°ä»å†…å­˜é‡Œé¢åŠ è½½æ•°æ®ã€‚è€Œæˆ‘ä»¬åˆšåˆšè¯´è¿‡ï¼Œè¿™äº› CPU Cache çš„å†™å›å’ŒåŠ è½½ï¼Œéƒ½ä¸æ˜¯ä»¥ä¸€ä¸ªå˜é‡ä½œä¸ºå•ä½çš„ã€‚è¿™äº›åŠ¨ä½œéƒ½æ˜¯ä»¥æ•´ä¸ª Cache Line ä½œä¸ºå•ä½çš„ã€‚æ‰€ä»¥ï¼Œå½“ INITIAL_CURSOR_VALUE ï¼ˆè¿™é‡Œçš„INITIAL_CURSOR_VALUE å¯èƒ½æœ‰ç‚¹é—®é¢˜ï¼Œæˆ‘ç†è§£å®ƒæŒ‡çš„å¯ä»¥æ˜¯æˆ‘ä»¬å®šä¹‰RingBufferFieldsçš„ç¬¬ä¸€ä¸ªå­—æ®µå¯¹åº”çš„finalå˜é‡indexMaskï¼‰å‰åçš„é‚£äº›å˜é‡è¢«å†™å›åˆ°å†…å­˜çš„æ—¶å€™ï¼Œè¿™ä¸ªå­—æ®µè‡ªå·±ä¹Ÿå†™å›åˆ°äº†å†…å­˜ï¼Œè¿™ä¸ªå¸¸é‡çš„ç¼“å­˜ä¹Ÿå°±å¤±æ•ˆäº†ã€‚å½“æˆ‘ä»¬è¦å†æ¬¡è¯»å–è¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œè¦å†é‡æ–°ä»å†…å­˜è¯»å–ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œè¯»å–é€Ÿåº¦å¤§å¤§å˜æ…¢äº†ã€‚â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630502990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2023574,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/FXUzj6S2tq6iabBMGM6Z1DJTrGaroYECkD8Cictv4Xya0PvyqLicoNsk2KUEpaxoAC3iaPCxsUjgG9JslJk15iaK8icQ/132","nickname":"å­™ç«‹","note":"","ucode":"7AB3E34DEA6D6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376185,"discussion_content":"ç©ºé—´æ¢æ—¶é—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622006463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1560680,"avatar":"https://static001.geekbang.org/account/avatar/00/17/d0/68/75786df4.jpg","nickname":"ã€‚","note":"","ucode":"10DD3A46CAC658","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324790,"discussion_content":"è¿™æ ·è¯´çš„è¯ï¼Œæ˜¯ä¼šå‡ºç°ä»å‰æˆ–è€…ä»ååŠ è½½çš„æƒ…å†µï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Œæ˜¯å› ä¸ºç¼–è¯‘é˜¶æ®µé‡æ’åºå¯¼è‡´ä¹ˆï¼Ÿè¿˜æ˜¯è¯´å†…å­˜åŠ è½½çš„æ—¶å€™æœ‰ä»€ä¹ˆä¸ä¸€æ ·çš„ä¸œè¥¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605170702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131323,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1567720260,"is_pvip":false,"replies":[{"id":"51123","content":"æç‚¹è°ˆä¸ä¸Šï¼Œå¯¹äºèŠ¯ç‰‡å’Œç¡¬ä»¶æˆ‘è¿ä»ä¸šè€…éƒ½è¿˜ç®—ä¸ä¸Šã€‚<br><br>ä¸è¿‡è¿‡å»å‡ å¹´çš„ç¹è£ä¸»è¦æ˜¯æ¥è‡ªäºIntel CPUçš„æé™æ€§èƒ½æå‡å·²ç»åˆ°å¤´äº†ã€‚æ‰€ä»¥åè€Œå¤§å®¶å›å¤´å»æ‰¾å…¶ä»–çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨ä½“ç³»ç»“æ„å±‚é¢åˆæœ‰äº†å¾ˆå¤šæ–°çš„æœºä¼šã€‚<br><br>æˆ‘è§‰å¾—å¤§å®¶éƒ½å¯ä»¥å»è¯»ä¸€è¯» David Patterson è€çˆ·çˆ·çš„ &lt;è®¡ç®—æœºä½“ç³»ç»“æ„æ–°é»„é‡‘æ—¶ä»£ï¼šå†å²ã€æŒ‘æˆ˜å’Œæœºé‡&gt; è¿™ä¸ªè®¿è°ˆ<br><br>https:&#47;&#47;www.bilibili.com&#47;video&#47;av46710093&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568537047,"ip_address":"","comment_id":131323,"utype":1}],"discussion_count":2,"race_medal":0,"score":"65992229700","product_id":100026001,"comment_content":"    è€å¸ˆä»Šå¤©è¯´çš„è¿™ä¸ªä¸œè¥¿å…¶å®å°±æ˜¯MQï¼šåªä¸è¿‡ç°åœ¨çš„MQåŸºæœ¬ä¸Šæ˜¯åœ¨å……åˆ†åˆ©ç”¨å†…å­˜&#47;ç¼“å­˜ï¼Œè€Œdisruptorå…¶å®æ˜¯åœ¨åˆ©ç”¨CPU cacheã€‚åˆ˜è¶…è€å¸ˆæœ‰ä¸€ç‚¹ç¡®å®æ²¡æœ‰è¯´é”™â€œè®¡ç®—æœºç»„æˆåŸç†å’Œæ“ä½œç³»ç»Ÿç›¸è¾…ç›¸æˆâ€ï¼šå­¦åˆ°ä»Šå¤©å»ç›¸äº’ç»“åˆç¡®å®å‘ç°è¿™ç§æ”¶ç›Šè¿œæ¯”å•ç‹¬å­¦ä¹ å¥½ã€‚<br>      æ‰©å±•çš„é—®è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼šç°åœ¨æ‰€è°“çš„æ™ºèƒ½èŠ¯ç‰‡æˆ–è€…è¯´å‰ç«¯æ—¶é—´æå‡ºçš„æ™ºèƒ½èŠ¯ç‰‡ï¼Œä¼šå¯¹åç»­äº§ç”Ÿé©å‘½æ€§å½±å“ä¹ˆï¼Ÿæ¯•ç«Ÿç¡¬ä»¶çš„i5åˆ°ç°åœ¨å·®ä¸å¤šåå¤šå¹´äº†å…¶å®è¿›æ­¥ä¸å¤§ï¼Œè¿™åä½™å¹´æœ€å¤§çš„å˜åŒ–è«è¿‡äºå†…å­˜å®¹é‡çš„æš´æ¶¨é€ å°±äº†nosqlã€MQçš„å…´èµ·ï¼Œå¦‚æœè¯´å°†æ¥cacheçš„å˜åŒ–æ˜¯å§åŒæ ·å¯èƒ½æ—©å°±ç±»ä¼¼äºè€å¸ˆä»Šå¤©æ‰€è¯´çš„Disruptorè¿™ç§åŸºäºCPU CacheæŠ€æœ¯çš„å…´èµ·ã€‚<br>        ä»Šå¹´åä¸ºçš„AI CPUã€è€ç¾é‚£è¾¹çš„äº‘è®¡ç®—CPUä¼¼ä¹å®éªŒå®¤æµ‹è¯•å·²ç»é€šè¿‡äº†ï¼šæ¯•ç«Ÿä»å¥”è…¾4ä¹‹ååˆ°ç°åœ¨è¿‘20å¹´äº†ï¼Œè€å¸ˆä»Šå¤©æ‰€è¯´çš„åˆåˆšå¥½ç¬¦åˆç°åœ¨å…³é”®ç¡¬ä»¶CPUçš„é©æ–°æ—¶æœŸï¼Ÿè€å¸ˆå¯¹æ­¤æ˜¯å¦‚ä½•çœ‹å¾…ï¼Ÿå¸Œæœ›è€å¸ˆèƒ½æç‚¹ã€‚","like_count":16,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466388,"discussion_content":"æç‚¹è°ˆä¸ä¸Šï¼Œå¯¹äºèŠ¯ç‰‡å’Œç¡¬ä»¶æˆ‘è¿ä»ä¸šè€…éƒ½è¿˜ç®—ä¸ä¸Šã€‚\n\nä¸è¿‡è¿‡å»å‡ å¹´çš„ç¹è£ä¸»è¦æ˜¯æ¥è‡ªäºIntel CPUçš„æé™æ€§èƒ½æå‡å·²ç»åˆ°å¤´äº†ã€‚æ‰€ä»¥åè€Œå¤§å®¶å›å¤´å»æ‰¾å…¶ä»–çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨ä½“ç³»ç»“æ„å±‚é¢åˆæœ‰äº†å¾ˆå¤šæ–°çš„æœºä¼šã€‚\n\næˆ‘è§‰å¾—å¤§å®¶éƒ½å¯ä»¥å»è¯»ä¸€è¯» David Patterson è€çˆ·çˆ·çš„ &amp;lt;è®¡ç®—æœºä½“ç³»ç»“æ„æ–°é»„é‡‘æ—¶ä»£ï¼šå†å²ã€æŒ‘æˆ˜å’Œæœºé‡&amp;gt; è¿™ä¸ªè®¿è°ˆ\n\nhttps://www.bilibili.com/video/av46710093/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568537047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8356,"discussion_content":"AI  cpuæ˜¯å•¥ï¼Ÿåå¤„ç†å™¨å—ï¼Œå…¶å®åå¤„ç†å™¨è¿œæ²¡æœ‰é€šç”¨å¤„ç†å™¨å¤æ‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567939011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131425,"user_name":"Scott","can_delete":false,"product_type":"c1","uid":1014800,"ip_address":"","ucode":"7E57FDCB5E5D49","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","comment_is_top":false,"comment_ctime":1567748907,"is_pvip":false,"replies":[{"id":"51050","content":"æ˜¯çš„ï¼Œç¯‡å¹…æœ‰é™ï¼Œæ‰€ä»¥æ²¡æœ‰å¤ªå…·ä½“è§£é‡ŠFalse Sharingå’ŒMemory Fenceï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€åˆ†æè¿™ä¸¤éƒ¨åˆ†çŸ¥è¯†ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568449556,"ip_address":"","comment_id":131425,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48812389163","product_id":100026001,"comment_content":"æœ€å¥½è¯´æ˜ä¸€ä¸‹ï¼Œè¿™ç§å¡«å……cache lineçš„æ‰‹æ³•æ˜¯ä¸ºäº†é˜²æ­¢False Sharing","like_count":11,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466445,"discussion_content":"æ˜¯çš„ï¼Œç¯‡å¹…æœ‰é™ï¼Œæ‰€ä»¥æ²¡æœ‰å¤ªå…·ä½“è§£é‡ŠFalse Sharingå’ŒMemory Fenceï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€åˆ†æè¿™ä¸¤éƒ¨åˆ†çŸ¥è¯†ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568449556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131857,"user_name":"æ˜“å„¿æ˜“","can_delete":false,"product_type":"c1","uid":1242864,"ip_address":"","ucode":"B15D1031CA841E","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqLcWH3mSPmhjrs1aGL4b3TqI7xDqWWibM4nYFrRlp0z7FNSWaJz0mqovrgIA7ibmrPt8zRScSfRaqQ/132","comment_is_top":false,"comment_ctime":1567938817,"is_pvip":false,"replies":[{"id":"51119","content":"è°¢è°¢æ”¯æŒã€‚Disruptoråœ¨2011å¹´å¼€æºçš„æ—¶å€™å…¶å®æ˜¯è®©å¾ˆå¤šJavaå¼€å‘åŒå­¦ä»¬æ„Ÿåˆ°æƒŠè‰³çš„ï¼Œæ˜¯å¾ˆå€¼å¾—ä»”ç»†ç ”è¯»çš„ä¸€ä»½ä»£ç ","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568536603,"ip_address":"","comment_id":131857,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23042775297","product_id":100026001,"comment_content":"ç»å…¸çš„ä¸œè¥¿æ€»æ˜¯å®¹æ˜“è¢«é¢‘ç¹å¼•ç”¨ï¼Œdisruptorè®°å¾—æ²¡é”™åº”è¯¥æ˜¯åœ¨javaå¹¶å‘å®æˆ˜ä¸“æ é‡Œè¢«ç‹å®ä»¤è€å¸ˆè®²è¿‡ï¼Œä»Šå¤©åˆä¸€æ¬¡å­¦ä¹ ï¼ŒåŠ æ·±äº†å°è±¡â€¦â€¦æ‹ä¸ªåŒå“é©¬å±ï¼šä¸¤ä½è€å¸ˆéƒ½æœ‰å¾ˆé«˜çš„æ°´å‡†ï¼Œæ·±å…¥æµ…å‡ºï¼","like_count":5,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466647,"discussion_content":"è°¢è°¢æ”¯æŒã€‚Disruptoråœ¨2011å¹´å¼€æºçš„æ—¶å€™å…¶å®æ˜¯è®©å¾ˆå¤šJavaå¼€å‘åŒå­¦ä»¬æ„Ÿåˆ°æƒŠè‰³çš„ï¼Œæ˜¯å¾ˆå€¼å¾—ä»”ç»†ç ”è¯»çš„ä¸€ä»½ä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568536603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139750,"user_name":"ç­‰é£æ¥","can_delete":false,"product_type":"c1","uid":1350677,"ip_address":"","ucode":"5B7FF74A51F534","user_header":"https://static001.geekbang.org/account/avatar/00/14/9c/15/719f1f44.jpg","comment_is_top":false,"comment_ctime":1570717582,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14455619470","product_id":100026001,"comment_content":"è€å¸ˆï¼Œ æˆ‘å¯¹äºå‰å7ä¸ªlongæœ‰ç‚¹ç–‘æƒ‘ï¼Œ æˆ‘å¤§æ¦‚çŸ¥é“æ˜¯ä¸ºäº†é˜²æ­¢è¢«æ¢å‡ºï¼Œ ä½†å°±æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆå¯ä»¥ğŸ˜‚ï¼Œ å¯ä»¥ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹å—","like_count":3,"discussions":[{"author":{"id":1377529,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ia5olchDzerJDeAzoY4XZrEOmqhjDJrO6ZfQU8CjWmkxwhtM6fwc16nq7Jpqr4t9ILlDSQjKHcogBpXiaIuW4IIA/132","nickname":"ä¸€å›","note":"","ucode":"DF21D6074DA06F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534812,"discussion_content":"å­—æ®µéƒ½æ˜¯finalçš„ï¼Œä¸ä¼šè¢«æ”¹åŠ¨ã€‚å‡å¦‚å­—æ®µæ˜¯a,bï¼Œé‚£ä¹ˆç¼“å­˜è¡Œé‡Œé¢å¯èƒ½æ˜¯p2,p3,p4,p5,p6,p7,a,bï¼Œéƒ½ä¸å¯æ”¹åŠ¨ï¼Œæ‰€ä»¥å°±ä¸ä¼šå¾€ä¸»å†…å­˜æ›´æ–°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638282492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2023574,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/FXUzj6S2tq6iabBMGM6Z1DJTrGaroYECkD8Cictv4Xya0PvyqLicoNsk2KUEpaxoAC3iaPCxsUjgG9JslJk15iaK8icQ/132","nickname":"å­™ç«‹","note":"","ucode":"7AB3E34DEA6D6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376184,"discussion_content":"64ä¸ªå­—èŠ‚åŠ è½½åï¼Œæ²¡æœ‰ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸éœ€è¦æ¢å‡º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622006393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259097,"user_name":"ä½™å·","can_delete":false,"product_type":"c1","uid":1995082,"ip_address":"","ucode":"B0819C42A82371","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI0eGJygV4lh6PJuotKrz1jsZcOdNiaHnUC3y5A2O3yudUQLkzOE8758icDoXlvgpytQ50ibSIc9nJmg/132","comment_is_top":false,"comment_ctime":1604630156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10194564748","product_id":100026001,"comment_content":"æ³¨æ„ä¸€ä¸‹ç±»æ˜¯abstractã€‚çˆ¶å­ç±»å±æ€§åŸç†ã€‚padçˆ¶ç±»å¡«å……å±æ€§åœ¨å‰ï¼Œfieldçˆ¶ç±»çš„å±æ€§è¢«ä¿æŠ¤åœ¨ä¸­é—´ï¼Œringbufferå­ç±»å¡«å……å±æ€§åœ¨æœ€åã€‚è¿™æ ·å°±æœç»è¢«å…¶ä»–cache lineå½±å“ã€‚","like_count":1},{"had_liked":false,"id":318622,"user_name":"jssfy","can_delete":false,"product_type":"c1","uid":1137238,"ip_address":"","ucode":"F16353CFE607B7","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg","comment_is_top":false,"comment_ctime":1635352777,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5930320073","product_id":100026001,"comment_content":"è¿™ä¸€ç³»åˆ—æ–‡ç« å¤ªèµäº†ï¼Œè¿™å‡ å¤©ä¸€æœ‰ç©ºå°±çœ‹ï¼Œå®Œå…¨åœä¸ä¸‹æ¥ï¼çœŸå®åœºæ™¯ä»£ç é…åˆåŸç†ï¼Œç‰¹åˆ«æ˜¯å„ä¸ªæ–‡æœ«æ¨èçš„é˜…è¯»ï¼ŒçœŸæ‰€è°“æˆä¹‹ä»¥æ¸”ã€‚","like_count":2},{"had_liked":false,"id":174850,"user_name":"-_-|||","can_delete":false,"product_type":"c1","uid":1328142,"ip_address":"","ucode":"94B21594658BF9","user_header":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","comment_is_top":false,"comment_ctime":1580435362,"is_pvip":false,"replies":[{"id":"68028","content":"-_-_aaaåŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼Œ64ä½æ˜¯å†…å­˜å¯»å€ç©ºé—´ï¼Œé€šå¸¸ä¹Ÿæ˜¯æ•°æ®é€šè·¯çš„å­—é•¿ï¼ˆword sizeï¼‰<br>è¿™ä¸ªå’Œç¼“å­˜è¡Œä¹‹é—´æ²¡æœ‰å¯¹åº”å…³ç³»ã€‚<br>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠç¼“å­˜è¡Œè®¾è®¡æˆ 16ä¸ªwordï¼Œä¹Ÿå°±æ˜¯128 Bytesï¼Œä½†æ˜¯å¹¶ä¸ä¼šå«ä»–128ä½è®¡ç®—æœºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1580615749,"ip_address":"","comment_id":174850,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5875402658","product_id":100026001,"comment_content":"â€œæˆ‘ä»¬ç°åœ¨çš„ 64 ä½ Intel CPU çš„è®¡ç®—æœºï¼Œç¼“å­˜è¡Œé€šå¸¸æ˜¯ 64 ä¸ªå­—èŠ‚ï¼ˆBytesï¼‰â€ï¼Œ64ä½ä¸ºä»€ä¹ˆä¸æ˜¯64bitè€Œæ˜¯è®¾è®¡æˆ64Byteçš„ç¼“å­˜è¡Œï¼Œæ„Ÿè§‰åº”è¯¥å«64æ¯”ç‰¹intel CPUçš„è®¡ç®—æœºã€‚","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482545,"discussion_content":"-_-_aaaåŒå­¦ï¼Œ\n\nä½ å¥½ï¼Œ64ä½æ˜¯å†…å­˜å¯»å€ç©ºé—´ï¼Œé€šå¸¸ä¹Ÿæ˜¯æ•°æ®é€šè·¯çš„å­—é•¿ï¼ˆword sizeï¼‰\nè¿™ä¸ªå’Œç¼“å­˜è¡Œä¹‹é—´æ²¡æœ‰å¯¹åº”å…³ç³»ã€‚\næˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠç¼“å­˜è¡Œè®¾è®¡æˆ 16ä¸ªwordï¼Œä¹Ÿå°±æ˜¯128 Bytesï¼Œä½†æ˜¯å¹¶ä¸ä¼šå«ä»–128ä½è®¡ç®—æœºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580615749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146645,"user_name":"æ›¾ç»ç˜¦è¿‡","can_delete":false,"product_type":"c1","uid":1240106,"ip_address":"","ucode":"57C32575A1C1FD","user_header":"https://static001.geekbang.org/account/avatar/00/12/ec/2a/b11d5ad8.jpg","comment_is_top":false,"comment_ctime":1572592143,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5867559439","product_id":100026001,"comment_content":"èµï¼Œä¹‹å‰è¿˜ä»¥ è®¡ç®—æœºç»„æˆåŸç†ä¸»è¦æ˜¯æ¶æ„å¸ˆ é€‰æ‹©æŠ€æœ¯ ç¡¬ä»¶ çš„æ—¶å€™ä½¿ç”¨çš„ï¼ŒåŸæ¥åœ¨ä»£ç å±‚é¢ä¹Ÿå¯ä»¥è¿™æ ·ä½¿ç”¨ã€‚ä¸è¿‡è™½ç„¶èƒ½çœ‹æ‡‚ä»–ä»£ç çš„æ„æ€ï¼Œä½†æ˜¯è¿˜ä¸ä¸å¤ªç†è§£ä»–æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæ€ä¹ˆå†™å¯ä»¥åšåˆ°è¿™æ ·çš„ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶ä¸€ä¸‹","like_count":1},{"had_liked":false,"id":131649,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1567835371,"is_pvip":false,"replies":[{"id":"51121","content":"è°¢è°¢æ”¯æŒ","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568536717,"ip_address":"","comment_id":131649,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862802667","product_id":100026001,"comment_content":"è€å¸ˆè®²å¾—å®åœ¨æ˜¯å¤ªå¥½äº†ã€‚","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466558,"discussion_content":"è°¢è°¢æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568536717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351803,"user_name":"Geek_e9a05e","can_delete":false,"product_type":"c1","uid":2835263,"ip_address":"","ucode":"32E1804CE6364D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/zUZMSvia9ByR2YbkeB9T4oymlzDCEsxUb4xPUNo39xgehdF0uqtWBRz5avLI3U5vS0XWVEKNWDpFtFib6s9v5kNA/132","comment_is_top":false,"comment_ctime":1658201507,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1658201507","product_id":100026001,"comment_content":"è¯·æ•™ä¸€ä¸‹å¤§å®¶ï¼Œè€å¸ˆæ–‡ä¸­è¯´äº†æ•°ç»„å½¢å¼çš„æ•°æ®è¿›è¡Œéå†è®¿é—®æ—¶ï¼Œä¼šå¢åŠ åˆ†æ”¯é¢„æµ‹çš„å‡†ç¡®æ€§ï¼Œæˆ‘ä¸å¤ªç†è§£ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":330078,"user_name":"Eden Ma","can_delete":false,"product_type":"c1","uid":1457408,"ip_address":"","ucode":"755312F0D154F9","user_header":"https://static001.geekbang.org/account/avatar/00/16/3d/00/7daa7403.jpg","comment_is_top":false,"comment_ctime":1641789125,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641789125","product_id":100026001,"comment_content":"æœ‰æ„æ€ ","like_count":0},{"had_liked":false,"id":318242,"user_name":"Honer","can_delete":false,"product_type":"c1","uid":1795410,"ip_address":"","ucode":"1617B19D043E11","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/52/a662d972.jpg","comment_is_top":false,"comment_ctime":1635213820,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635213820","product_id":100026001,"comment_content":"è¿™ä¸ªç¼“å†²è¡Œå¡«å……è®©æˆ‘æƒ³èµ·äº†å†…å­˜å¯¹é½","like_count":0},{"had_liked":false,"id":281648,"user_name":"èµµæºğŸ˜ˆ","can_delete":false,"product_type":"c1","uid":1609114,"ip_address":"","ucode":"3D438CC59126F2","user_header":"https://static001.geekbang.org/account/avatar/00/18/8d/9a/61db513f.jpg","comment_is_top":false,"comment_ctime":1614839437,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614839437","product_id":100026001,"comment_content":"ä¸€ç›´æœ‰ä¸ªé—®é¢˜æƒ³é—®è€å¸ˆï¼šè€å¸ˆçš„è¡¨æ ¼ä¸­L1 cache å’ŒL2 cacheä»·æ ¼ä¸€æ ·ï¼Œä½†æ˜¯L2æ›´æ…¢ï¼Œé‚£ä¸ºä»€ä¹ˆä¸å»æ‰L2 cacheå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1939316,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/97/74/a933d664.jpg","nickname":"èœæˆ","note":"","ucode":"C3488A2BB44359","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378782,"discussion_content":"ä¼°è®¡å¤§å°ä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623400309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253809,"user_name":"InvisibleDes","can_delete":false,"product_type":"c1","uid":1566802,"ip_address":"","ucode":"56908581681771","user_header":"https://static001.geekbang.org/account/avatar/00/17/e8/52/931888d7.jpg","comment_is_top":false,"comment_ctime":1602904348,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1602904348","product_id":100026001,"comment_content":"å¯¹åˆ†æ”¯é¢„æµ‹çš„æ‰§è¡Œå¾ˆæœ‰åˆ©ï¼Œè¿™ä¸€ç‚¹æ²¡æœ‰çœ‹æ‡‚","like_count":1},{"had_liked":false,"id":246437,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1599344292,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1599344292","product_id":100026001,"comment_content":"è€å¸ˆï¼Œç°åœ¨åªè¯»å˜é‡ä½¿ç”¨åœ°è¶Šæ¥è¶Šå¤šï¼Œä¸ºä»€ä¹ˆCPUæ²¡æœ‰æä¾›ç‰¹å®šçš„æŒ‡ä»¤æ¥ä¼˜åŒ–åªè¯»å˜é‡çš„é«˜é€Ÿç¼“å­˜ï¼ˆè‡³å°‘ç»™å¼€å‘äººå‘˜ä¸€ä¸ªé€‰æ‹©ï¼Œè®©è¿™äº›å˜é‡å°½é‡å­˜åœ¨é«˜é€Ÿç¼“å­˜è€Œä¸è°ƒå‡ºï¼‰ã€‚ä¸ç„¶ä¹Ÿä¸ä¼šé€¼å¾—Disruptoré‡‡ç”¨éå¸¸ä»¤äººè´¹è§£çš„å¡«å……æ–¹æ³•ï¼Œè®©å­—æ®µå¸¸é©»åœ¨ç¼“å­˜ä¸­ã€‚","like_count":0,"discussions":[{"author":{"id":1934606,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/85/0e/ad39a252.jpg","nickname":"è¥¿å¡å°”","note":"","ucode":"F1AA53B3B405E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340447,"discussion_content":"ä¸æ˜¯å¸¸é©»ï¼Œè€Œæ˜¯ç›¸äº’å½±å“ã€‚JD8ä¹‹åå°±æœ‰æä¾›åŸç”Ÿæ³¨è§£æ¥å®ç°è¿™æ ·çš„æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610008307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144634,"user_name":"æ‹“å±±","can_delete":false,"product_type":"c1","uid":1545647,"ip_address":"","ucode":"11FE9CF3821898","user_header":"https://static001.geekbang.org/account/avatar/00/17/95/af/b7f8dc43.jpg","comment_is_top":false,"comment_ctime":1571986656,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571986656","product_id":100026001,"comment_content":"è¿™ä¸ªå¡«å……æ€è·¯ é—»æ‰€æœªé—»ã€‚<br>å®åœ¨è„‘æ´å¤§å¼€ï¼Œèµï¼","like_count":0},{"had_liked":false,"id":133417,"user_name":"æ´»çš„æ½‡æ´’","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1568557247,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1568557247","product_id":100026001,"comment_content":"ä»è¯¥ä¸“æ çš„æ¯ä¸€è®²çš„æ¯ä¸€ä¸ªä¸»é¢˜å¼€å§‹ã€å¤¯å®åŸºç¡€ï¼šæˆ‘ä»¬æœªæ¥ç”Ÿæ´»çš„å¯èƒ½æ€§å°±æ˜¯é è¿™äº›ç‚¹ç‚¹æ»´æ»´ä¸²è”èµ·æ¥çš„<br><br>day54 ç¬”è®° ï¼šhttps:&#47;&#47;www.cnblogs.com&#47;luoahong&#47;p&#47;11518304.html","like_count":0,"discussions":[{"author":{"id":1131687,"avatar":"https://static001.geekbang.org/account/avatar/00/11/44/a7/171c1e86.jpg","nickname":"å•¦å•¦å•¦","note":"","ucode":"6B12EC90A62525","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347469,"discussion_content":"ä½ è¿™åŸå°ä¸åŠ¨çš„ç…§æ¬å•Š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612238047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1147453,"avatar":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","nickname":"å¿†æ°´å¯’","note":"","ucode":"E3F86BD8AA8903","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312290,"discussion_content":"ä½ è¿™åŸå°ä¸åŠ¨çš„ç…§æ¬å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602653805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136927,"avatar":"https://static001.geekbang.org/account/avatar/00/11/59/1f/a3679b09.jpg","nickname":"è‚–æŸæŸ","note":"","ucode":"A1D06FAD40FB33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":209830,"discussion_content":"ä½ è¿™åŸå°ä¸åŠ¨çš„ç…§æ¬å•Š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584679148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}