{"id":449795,"title":"02｜YUV & RGB：原来图像是这么丰富多彩的","content":"<p>你好，我是李江。今天我们一起来聊一聊图像的颜色空间。</p><p>图像的颜色空间是图像和视频技术里面的一个非常重要的知识点，在图像处理、视频编码等技术中你会经常遇到这个概念。</p><p>而至于它为什么重要，其实也很好理解。在现实世界中，我们的眼睛每天看到的颜色是千变万化的。为了能够更方便地表示和处理这些颜色，不同应用领域就建立了多种不同的颜色空间，主要包括RGB 、YUV、CMYK 、 HSI等（后面两种和这门课程没有关系，因此这里我们不再介绍）。</p><p>在视频技术中，我们经常碰到的颜色空间有两种：RGB和YUV，接下来我们就逐一看一看。</p><h2>RGB</h2><p>RGB相对比较简单。顾名思义，它就是指图像的每一个像素都有R、G、B三个值。RGB是我们平常遇到最多的一种图像颜色空间，比如摄像头采集的原始图像就是RGB图像，且显示器显示的图像也是RGB图像。</p><p>一般来说，<strong>我们的RGB图像，每一个像素都是分别存储R、G、B三个值，且三个值依次排列存储</strong>。比如对于一张8bit位深的RGB图，每个值占用一个字节。但是，需要注意的是RGB图像像素中R、G、B三个值并不一定是按R、G、B顺序排列的，也有可能是B、G、R顺序排列。</p><p>比如OpenCV就经常使用BGR的排列方式来存储图像。所以在存储和读取RGB图像的时候需要稍微注意一下。RGB和BGR的存储方式如下图所示：</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/1b/98/1b4d7c24133df818b0187fdf56898a98.jpeg?wh=1920x1080\" alt=\"\"></p><p>虽然RGB比较简单，同时在图像处理的时候也经常会用到。但是在视频领域，我们更多地是使用YUV颜色空间来表示图像的。这是因为R、G、B三个颜色是有相关性的，所以不太方便做图像压缩编码。那YUV究竟是怎么表示图像的呢？它又是如何存储在内存当中的呢？我们接下来就来揭开它的“面纱”。</p><h2>YUV</h2><p>YUV跟RGB类似，也是一种颜色空间，但其种类会更多更复杂些，所以接下来我们会花大量的篇幅去讲解它。</p><p>YUV最早主要是用于电视系统与模拟视频领域。现在视频领域基本都是使用YUV颜色空间。</p><p>跟RGB图像中R、G、B三个通道都跟色彩信息相关这种特点不同，<strong>YUV图像将亮度信息Y与色彩信息U、V分离开来。Y表示亮度，是图像的总体轮廓，称之为Y分量。U、V表示色度，主要描绘图像的色彩等信息，分别称为U分量和V分量</strong>。这样一张图像如果没有了色度信息U、V，只剩下亮度Y，则依旧是一张图像，只不过是一张黑白图像。这种特点有什么好处呢？</p><p>在以前，世界上只有黑白电视机，每一帧电视画面都是黑白的，没有色彩信息。当然黑白电视机也不支持显示彩色图像。后来随着技术的发展，出现了彩色电视机，每一帧画面都是有颜色信息的，那当然我们可以使用RGB、YUV等颜色空间来表示一帧图像。</p><p>但是考虑到兼容老的黑白电视机，如果使用RGB表示图像，那么黑白电视机就没办法播放。这是因为R、G、B三个通道都是彩色的，而Y、U、V就可以。因为黑白电视机可以使用Y分量，Y分量就是黑白图像，而且包含了图像的总体轮廓信息，只是没有色彩信息而已。</p><p>好了，讲了YUV的起源之后，我们来讲讲YUV颜色空间最重要的知识点，那就是YUV的类型和存储方式。</p><p><strong>YUV主要分为YUV 4:4:4、YUV 4:2:2、YUV 4:2:0这几种常用的类型</strong>。其中最常用的又是YUV 4:2:0。这三种类型的YUV主要的区别就是U、V分量像素点的个数和采集方式。</p><p>YUV 4:4:4就是每一个Y就对应一个U和一个V；而YUV 4:2:2则是每两个Y共用一个U、一个V；YUV 4:2:0则是每四个Y共用一个U、V。我们可以通过图片来清晰地看一下三种YUV类型的区别。具体如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/00/ce/00d9109af3b89dbc5ecf1a81230f7bce.jpeg?wh=1920x1080\" alt=\"\"><img src=\"https://static001.geekbang.org/resource/image/f1/a4/f17b300f8c1yyae6eda99f1f746acea4.jpeg?wh=1920x1080\" alt=\"\"><img src=\"https://static001.geekbang.org/resource/image/f7/01/f745382857eefca91c1cb7151c439701.jpeg?wh=1920x1080\" alt=\"\"></p><p>总的来说：</p><ol>\n<li>YUV&nbsp;4:4:4，每一个Y对应一组UV。</li>\n<li>YUV&nbsp;4:2:2，每两个Y共用一组UV。</li>\n<li>YUV&nbsp;4:2:0，每四个Y共用一组UV。</li>\n</ol><p>YUV 4:4:4这种类型非常简单，所以存储的方式也非常简单。</p><p>那YUV 4:2:2和YUV 4:2:0这种共用U、V分量的情况，应该在内存中怎么存储呢？下面我就来为你介绍一下。</p><p><strong>YUV存储方式主要分为两大类：Planar和Packed两种</strong>。Planar格式的YUV是先连续存储所有像素点的Y，然后接着存储所有像素点的U，之后再存储所有像素点的V，也可以是先连续存储所有像素点的Y，然后接着存储所有像素点的V，之后再存储所有像素点的U。Packed格式的YUV是先存储完所有像素的Y，然后U、V连续的交错存储。</p><p>下面我们就来看看每一种YUV类型的存储方式是怎么样的。</p><ol>\n<li>YUV 4:4:4</li>\n</ol><p>这种类型的YUV非常简单，因为每一个Y对应一个U、一个V，所以存储的方式也非常简单。例如，4 x 2像素的YUV 4:4:4存储图如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/04/53/0428a59eb7702e4feb9bafd80ac83553.jpeg?wh=1920x1080\" alt=\"\"></p><p>可以看到，YUV 4:4:4和RGB图像存储之后的大小是一样的。如果是8bit图像，就是每一个像素点需要占用3个字节。</p><ol start=\"2\">\n<li>YUV 4:2:2</li>\n</ol><p>这种类型的YUV稍微复杂些，每左右两个像素的Y共用一个U和一个V。存储方式主要有以下４种类型。</p><ul>\n<li>YU16（或者称为I422、YUV422P）</li>\n</ul><p>该类型是Planar格式，先存储完Y，再存储U，之后存储V。例如，4 x 2像素的YU16存储图如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/9f/45/9fb26028da7201cdbc7dd7f8dd83b145.jpeg?wh=1912x756\" alt=\"\"></p><ul>\n<li>YV16（YUV422P）</li>\n</ul><p>该类型也是Planar格式，先存储完Y，再存储V，之后存储U。例如，4 x 2像素的YV16存储图如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/6b/1e/6b1a9be5614b35bf7c96fe64ed98bc1e.jpeg?wh=1915x775\" alt=\"\"></p><ul>\n<li>NV16（YUV422SP）</li>\n</ul><p>这种类型是Packed格式，先存储完Y，之后U、V连续交错存储。例如，4 x 2像素的NV16存储图如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/79/aa/79d68992f9c21eff13d118ccabc145aa.jpeg?wh=1914x761\" alt=\"\"></p><ul>\n<li>NV61（YUV422SP）</li>\n</ul><p>这种也是Packed格式，与NV16不同，这种格式是先存储完Y，之后V、U连续交错存储。例如，4 x 2像素的NV61存储图如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/2f/44/2f06f11d9c9dd7a49d268e325b846944.jpeg?wh=1912x755\" alt=\"\"></p><p>可以看到，4 x 2像素的YUV 4:2:2只需要16个字节，而RGB图像则需要24个字节<strong>。</strong>也就是说，如果是8bit图像，那么RGB每一个像素需要3个字节，而YUV 4:2:2只需要2个字节。</p><ol start=\"3\">\n<li>YUV 4:2:0</li>\n</ol><p>这是最常见也是最常用的YUV类型。通常视频压缩都是YUV 4:2:0格式的。它是每上、下、左、右4个像素点共用一个U和一个V。存储方式主要分为以下４种。</p><ul>\n<li>YU12（I420、YUV420P）</li>\n</ul><p>这种类型是Planar格式，先存储完Y，再存储U，之后存储V。例如，4 x 4像素的YU12存储图如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/76/16/766ce511056bf5dd3399198398b80016.jpeg?wh=1920x1080\" alt=\"\"></p><ul>\n<li>YV12（YUV420P）</li>\n</ul><p>该类型也是Planar格式，先存储完Y，再存储V，之后存储U。例如，4 x 4像素的YＶ12存储图如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/88/71/880114b51649cbea783ee0be883fc971.jpeg?wh=1920x1080\" alt=\"\"></p><ul>\n<li>NV12（YUV420SP）</li>\n</ul><p>这种类型是Packed格式，先存储完Y，之后U、V连续交错存储。例如，4 x 4像素的NV12存储图如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/62/45/62689d6a46003ced023b9838ca0a0845.jpeg?wh=1920x1080\" alt=\"\"></p><ul>\n<li>NV21（YUV420SP）</li>\n</ul><p>这种也是Packed格式，与NV12不同，这种格式是先存储完Y，之后V、U连续交错存储。例如，4 x 4像素的NV21存储图如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/9e/bd/9ed80ef848c52123fb41413abfa26ebd.jpeg?wh=1920x1080\" alt=\"\"></p><p>可以看到，4 x 4像素的YUV 4:2:0只需要24个字节相比RGB图像需要48个字节，存储的大小少了一半。也就是说，如果是8bit图像，RGB每一个像素需要3个字节。而YUV 4:2:0只需要1.5个字节。</p><p>好了，以上就是YUV颜色空间的主要类型和存储方式。这里我用表格给你总结了一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/e7/88/e7a9fcb9f5800eab1fb0a9ed19066588.jpeg?wh=1920x1080\" alt=\"\"></p><h2>RGB和YUV之间的转换</h2><p>我们刚才说到，一般来说，采集到的原始图像、给显示器渲染的最终图像都是RGB图像，但是视频编码一般用的是YUV图像。那么这中间一定少不了两者的相互转换。那RGB如何转到YUV呢？YUV又如何转到RGB呢？</p><p>在讲转换之前，我们先了解Color Range这个东西。对于一个8bit的RGB图像，它的每一个R、G、B分量的取值按理说就是0~255的。但是真的是这样的吗？其实不是的。这里就涉及到Color Range这个概念。Color Range分为两种，一种是Full Range，一种是Limited Range。<strong>Full Range的R、G、B取值范围都是0～255。而Limited Range的R、G、B取值范围是16～235。</strong></p><p>了解了Color Range之后，我们怎么规范YUV和RGB之间的互转呢？其实这也是有标准的，目前的标准主要是BT601和BT709（其实还有BT2020，我们这里不展开讲）。简单来讲，<strong>BT709和BT601定义了一个RGB和YUV互转的标准规范</strong>。只有我们都按照标准来做事，那么不同厂家生产出来的产品才能对接上。BT601是标清的标准，而BT709是高清的标准。</p><p>下面我们来看看这两种标准分别在Full Range和Limited Range下的RGB和YUV之间的转换公式吧。具体如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/19/72/19da3510c564b590f92cf969be01d872.jpeg?wh=1920x1080\" alt=\"\"></p><p>从上图我们可以看到每种标准下不同Color Range的转换公式是不同的。所以<strong>在做RGB往YUV转换的时候我们需要知道是使用的哪个标准的哪种Range做的转换</strong>，并告知对方。这样对方使用同样的标准和Range才可以正确的将YUV转换到RGB。</p><p>如果是系统采集出来给到用户的图像就是YUV的话，你也需要获取这个YUV的存储格式、转换标准和Color Range。这样才能保证正确地处理YUV和RGB之间的转换。</p><p>好了，这就是关于RGB和YUV颜色空间的一些知识。在最后我需要再一次强调一下前一节课中讲到的Stride。</p><p><strong>在处理YUV图像的存储和读取的时候，也是有Stride这个概念的。事实上，YUV出问题的情况更多。</strong>在这里举一个例子，比如说一张1283x720的图像，一个Y分量存储按16字节对齐的话应该是每行占用1296个字节，所以每读取一行像素的Y应该是1296个字节，具体如下图所示。千万不要认为是1283个字节，不然就会出现“花屏”。这里一定要注意。</p><p><img src=\"https://static001.geekbang.org/resource/image/80/57/808b8310bb6dfbabfc3d6fbc2ce88057.jpeg?wh=1920x1080\" alt=\"\"></p><h2>小结</h2><p>今天的知识点到这里就讲完了。总结一下，这节课我们主要讲了图像的颜色空间。图像的颜色空间主要有RGB和YUV两种。其中RGB图像每一个像素有R、G、B三个值。而YUV图像有３种类型，其分类如下：</p><ol>\n<li>YUV 4:4:4，一个Y对应一个U和一个V；</li>\n<li>YUV 4:2:2，左右两个Y对应一个U和一个V；</li>\n<li>YUV 4:2:0，上下左右四个Y对应一个U和一个V。</li>\n</ol><p>同时，YUV在存储的时候也有两种大类：一种是Planar格式；一种是Packed格式。其中Planar格式又分为先存U还是先存V两种。而Packed格式是UV交错存储且分为U在前还是V在前两种。</p><p>在图像采集的时候我们一般得到的原始图像是RGB图像，并且渲染的时候最终也是用RGB图像，而在编/解码时用的却是YUV图像。因此，我们需要在RGB和YUV之间互转。转换的标准有两种：一种是BT601；一种是BT709。</p><p>另外，在转换过程中我们还涉及到Color Range这个概念。Full Range的R、G、B三个值的范围都是0～255。而Limited Range的取值范围是16～235。在做转换的时候我们需要选择正确的标准和Color Range。</p><p>最后，我再一次提出了Stride这个概念。在读取YUV图像一行像素的时候一定要区分Width和Stride的区别。Width是原始图像的宽，而Stride是对齐之后的一行像素使用的字节大小。这个一定要注意，千万不要弄错了。</p><h2>思考题</h2><p>通过这节课的学习，现在你知道我们为什么编码的时候使用YUV图像而不使用RGB图像了吗？</p><p>好了，这节课到这里就结束了，欢迎留言和我分享你的思考和疑惑，你也可以把今天所学分享给身边的朋友，邀请他加入探讨，共同进步。</p>","comments":[{"had_liked":false,"id":324291,"user_name":"yg","can_delete":false,"product_type":"c1","uid":1136892,"ip_address":"","ucode":"0CFC91CA3F93EB","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/fc/c3be5d8b.jpg","comment_is_top":false,"comment_ctime":1638359222,"is_pvip":true,"replies":[{"id":"117726","content":"相关性是指一幅图像在RGB格式的时候，将R、G、B三个通道分离开来当作图像来看的话，\bR、G、B三张图像内容几乎是一样的，只是颜色不同而已。具有相关性，如果拿来编码的话，三张图像同等重要，而且轮廓还差不多，但颜色又不同，因此不好编码。而YUV不同，YUV中只有Y是图像的大体轮廓，没有颜色信息。U、V是颜色信息。三张图像相互独立。并且人眼对于色彩信息相比图像的轮廓信息不敏感些。我们可以缩小U、V的大小，比如YUV420中U、V只有Y的1&#47;4大小，本身就相比于RGB图像小了一半。然后我们编码的时候Y、U、V相关性很小，可以独立编码，也很方便。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638423717,"ip_address":"","comment_id":324291,"utype":1}],"discussion_count":1,"race_medal":0,"score":"109012541622","product_id":100098901,"comment_content":"这是因为 R、G、B 三个颜色是有相关性的，所以不太方便做图像压缩编码。 <br>老师，您这里说的rgb是有相关性的，这个相关性怎么理解呢？","like_count":25,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535383,"discussion_content":"相关性是指一幅图像在RGB格式的时候，将R、G、B三个通道分离开来当作图像来看的话，\bR、G、B三张图像内容几乎是一样的，只是颜色不同而已。具有相关性，如果拿来编码的话，三张图像同等重要，而且轮廓还差不多，但颜色又不同，因此不好编码。而YUV不同，YUV中只有Y是图像的大体轮廓，没有颜色信息。U、V是颜色信息。三张图像相互独立。并且人眼对于色彩信息相比图像的轮廓信息不敏感些。我们可以缩小U、V的大小，比如YUV420中U、V只有Y的1/4大小，本身就相比于RGB图像小了一半。然后我们编码的时候Y、U、V相关性很小，可以独立编码，也很方便。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638423717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323072,"user_name":"ForwardsHao","can_delete":false,"product_type":"c1","uid":2328798,"ip_address":"","ucode":"AFB29B5B9F0C22","user_header":"https://static001.geekbang.org/account/avatar/00/23/88/de/04784f86.jpg","comment_is_top":false,"comment_ctime":1637719767,"is_pvip":false,"replies":[{"id":"117293","content":"1、limitied range在电影里面会经常用到。作用貌似是拍摄暗场景还有对“吊威亚”等情况的时候好处理一些。<br>2、需要知道有limited range和full range之分，因为不同的range的RGB在和YUV互转的时候公式会不一样。当然有的时候大家都不管，直接转，画面其实能正常显示的，只是颜色跟最原始的颜色会有区别。一般要不就是比原始画面更亮，要不就是更暗。我们当然希望能够完全还原最原始的图像喽。所以最好还是注意一下。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637817147,"ip_address":"","comment_id":323072,"utype":1}],"discussion_count":3,"race_medal":0,"score":"35997458135","product_id":100098901,"comment_content":"江哥，那Limited Range的作用是什么，为什么一定要知道这个值，是需要做放缩吗？<br>假如做RGB和YUV的转换的时候，原来的色彩空间是limited，那么转换后以及最后恢复为原RGB的时候也是limited的值，那知道这个range的作用是啥。","like_count":9,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533214,"discussion_content":"1、limitied range在电影里面会经常用到。作用貌似是拍摄暗场景还有对“吊威亚”等情况的时候好处理一些。\n2、需要知道有limited range和full range之分，因为不同的range的RGB在和YUV互转的时候公式会不一样。当然有的时候大家都不管，直接转，画面其实能正常显示的，只是颜色跟最原始的颜色会有区别。一般要不就是比原始画面更亮，要不就是更暗。我们当然希望能够完全还原最原始的图像喽。所以最好还是注意一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637817147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533215,"discussion_content":"可以参考这个链接了解一下。\nhttps://www.benq.com/en-us/knowledge-center/knowledge/full-rgb-vs-limited-rgb-is-there-a-difference.html","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637817375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2328798,"avatar":"https://static001.geekbang.org/account/avatar/00/23/88/de/04784f86.jpg","nickname":"ForwardsHao","note":"","ucode":"AFB29B5B9F0C22","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":533348,"discussion_content":"好的，谢谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637842739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533215,"ip_address":""},"score":533348,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":323804,"user_name":"阿金🥭","can_delete":false,"product_type":"c1","uid":2829963,"ip_address":"","ucode":"F166FFD786E0D8","user_header":"https://static001.geekbang.org/account/avatar/00/2b/2e/8b/e53e1b98.jpg","comment_is_top":false,"comment_ctime":1638169194,"is_pvip":false,"replies":[{"id":"117594","content":"会有失真的。只是人眼对于色度信息相对不敏感一些，这点失真可以接受。带来的好处是YUV420相比YUV444减少了一半的大小，这个收益对应这个付出是很明显的。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638270483,"ip_address":"","comment_id":323804,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31702940266","product_id":100098901,"comment_content":"感觉对U和V的介绍有点少，不利于理解为什么可以用422或420的采样来保证图片不失真","like_count":8,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534752,"discussion_content":"会有失真的。只是人眼对于色度信息相对不敏感一些，这点失真可以接受。带来的好处是YUV420相比YUV444减少了一半的大小，这个收益对应这个付出是很明显的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638270483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2853514,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/8a/8a/2aa0e992.jpg","nickname":"weekend","note":"","ucode":"03EEAFC78B76B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541195,"discussion_content":"会有失真，只是利用了人眼对色度信息不敏感的特点，人眼基本看不出来颜色有差异。但其实是失真了的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640275466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323743,"user_name":"杨益祥","can_delete":false,"product_type":"c1","uid":2853051,"ip_address":"","ucode":"ED9C5EC44371EC","user_header":"https://static001.geekbang.org/account/avatar/00/2b/88/bb/8dfc4628.jpg","comment_is_top":false,"comment_ctime":1638148952,"is_pvip":false,"replies":[{"id":"117592","content":"nv是UV交错排列的，nv12中1在前代表U放在前，nv21中1在后代表U放在后。yv是先放完V再放U，yu先放U再放V的。可以这样记忆。其实可以不用记住的。要记住这几类有什么区别就可以了。用到的时候再查查笔记就可以了。我一般重点学习思想，细节都是查看资料，或看代码。因为脑袋装不下这么多东西。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638270196,"ip_address":"","comment_id":323743,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23112985432","product_id":100098901,"comment_content":"请问江哥，nv21&#47;nv12以及yu12&#47;yv12怎样记住，这几个概念总是混淆了，每次用的时候都要翻出笔记看一下😂","like_count":5,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534750,"discussion_content":"nv是UV交错排列的，nv12中1在前代表U放在前，nv21中1在后代表U放在后。yv是先放完V再放U，yu先放U再放V的。可以这样记忆。其实可以不用记住的。要记住这几类有什么区别就可以了。用到的时候再查查笔记就可以了。我一般重点学习思想，细节都是查看资料，或看代码。因为脑袋装不下这么多东西。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638270196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323054,"user_name":"西钾钾","can_delete":false,"product_type":"c1","uid":1097722,"ip_address":"","ucode":"0EE77083636ED9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJV27QOK57cdpdh3E4hbArCOlccdtjCyWooF9fhjeSKAMo9SN1v9RODkrZUZD4RejjbdsqU2FIeMA/132","comment_is_top":false,"comment_ctime":1637716752,"is_pvip":false,"replies":[{"id":"117264","content":"YUV一般会使用整型的。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637731291,"ip_address":"","comment_id":323054,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14522618640","product_id":100098901,"comment_content":"YUV比RGB更适合的原因：<br>1、大部分的YUV格式数据量小<br>2、YUV将亮度(Y分量)和彩色分量分开，人眼对Y分量比较敏感，在做压缩时可以将UV分量压缩的多些，Y分量压缩的少些。<br><br><br>老师，还有一个问题YUV是浮点类型的，RGB是整型的，他们两个直接相互转换应该会导致图像不清晰吧。","like_count":3,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532911,"discussion_content":"YUV一般会使用整型的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637731291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323050,"user_name":"ShawnL","can_delete":false,"product_type":"c1","uid":1017051,"ip_address":"","ucode":"45E24DF69F9E80","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/db/ef93601d.jpg","comment_is_top":false,"comment_ctime":1637716041,"is_pvip":false,"replies":[{"id":"117263","content":"色度会有损失的。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637731147,"ip_address":"","comment_id":323050,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14522617929","product_id":100098901,"comment_content":"YUV编码的时候使用的空间小，便于传输。那问题来了，使用422或者420的话，图像相对于原来的RGB会有损失么？","like_count":3,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532909,"discussion_content":"色度会有损失的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637731147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323037,"user_name":"琥 珀","can_delete":false,"product_type":"c1","uid":2412628,"ip_address":"","ucode":"B06A9CFA0A0269","user_header":"https://static001.geekbang.org/account/avatar/00/24/d0/54/9230c283.jpg","comment_is_top":false,"comment_ctime":1637714982,"is_pvip":false,"replies":[{"id":"117262","content":"有的，花屏的原因有好几个，我们会在之后有一节课专门讲花屏卡顿问题。可以关注一下。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637731081,"ip_address":"","comment_id":323037,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14522616870","product_id":100098901,"comment_content":"请问，花屏除了Stride，还有别的可能原因吗？","like_count":3,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532907,"discussion_content":"有的，花屏的原因有好几个，我们会在之后有一节课专门讲花屏卡顿问题。可以关注一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637731081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183164,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0d/bc/8eee64de.jpg","nickname":"leil","note":"","ucode":"E0888169FC912D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533669,"discussion_content":"丢失一些参考帧也会","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1637930635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323120,"user_name":"余健辉","can_delete":false,"product_type":"c1","uid":1694237,"ip_address":"","ucode":"2150C89CF66ADC","user_header":"https://wx.qlogo.cn/mmopen/vi_32/yBBhL9I6vian2PMOo7xnibKp8EibiaCrqfXibk5YOQSfzyjfZPGnUqHy1x1ibVIVYddMnibFJlpJibutAicXsZibwqskFoibw/132","comment_is_top":false,"comment_ctime":1637735879,"is_pvip":false,"replies":[{"id":"117288","content":"其实视频和图像主要的研究工作会有一些区别。如果在视频技术里面结合AI技术的话，视频前处理和美颜特效这些会涉及一些AI技术，现在编码器其实也有一些AI技术引入。这两个方向都还不错。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637816390,"ip_address":"","comment_id":323120,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10227670471","product_id":100098901,"comment_content":"我现在是计算机研一学生，最近开始接触视频技术这方面的知识，想请问下江哥视频技术里有什么好的研究方向，然后是结合AI技术的","like_count":2,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533208,"discussion_content":"其实视频和图像主要的研究工作会有一些区别。如果在视频技术里面结合AI技术的话，视频前处理和美颜特效这些会涉及一些AI技术，现在编码器其实也有一些AI技术引入。这两个方向都还不错。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637816390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351389,"user_name":"李杰","can_delete":false,"product_type":"c1","uid":1019166,"ip_address":"","ucode":"8FCEBB886EA90B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/1e/fa135b14.jpg","comment_is_top":false,"comment_ctime":1657766328,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5952733624","product_id":100098901,"comment_content":"江哥，YUV 4:2:0 为啥不命名为 YUV 4:1:1 感觉更容易理解，只是好奇","like_count":1,"discussions":[{"author":{"id":1123263,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/bf/071dbb60.jpg","nickname":"Nodreame","note":"","ucode":"E2CF7D8B1341E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581034,"discussion_content":"yuv411 是在一行上以 4:1:1 的比例抽取色度，yuv420 是以一行 4:2:0 &amp; 下一行 4:0:2 来抽取的","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1658467658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324770,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1638612089,"is_pvip":true,"replies":[{"id":"119353","content":"是的","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1640313053,"ip_address":"","comment_id":324770,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5933579385","product_id":100098901,"comment_content":"很多图像处理算法灰度图就能跑，yuv的话只要读y分量就可以，rgb的话要全部读出来还要转换","like_count":1,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541265,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640313053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359553,"user_name":"未来","can_delete":false,"product_type":"c1","uid":1835815,"ip_address":"天津","ucode":"1E104497DAA1C0","user_header":"https://static001.geekbang.org/account/avatar/00/1c/03/27/3a179672.jpg","comment_is_top":false,"comment_ctime":1665642631,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1665642631","product_id":100098901,"comment_content":"YU16（或者称为 I422、YUV422P）<br>YV16（YUV422P）<br>老师，讲解中有几组这样的格式命名不太理解，YU16和YV16都可以称作YUV422P，那如果有人跟我说YUV422P我是不是应该跟他确认一下是YU16还是YV16？这个称呼如果不确认好，在解码的时候是否会有问题？","like_count":0},{"had_liked":false,"id":356356,"user_name":"Geek_80bfb8","can_delete":false,"product_type":"c1","uid":2912203,"ip_address":"浙江","ucode":"E6DE6F210D2603","user_header":"","comment_is_top":false,"comment_ctime":1662196395,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662196395","product_id":100098901,"comment_content":"江哥：花屏是什么意思，为什么读数据错了会花屏","like_count":0},{"had_liked":false,"id":343841,"user_name":"轩😊","can_delete":false,"product_type":"c1","uid":1645428,"ip_address":"","ucode":"11204328985862","user_header":"https://static001.geekbang.org/account/avatar/00/19/1b/74/9943957c.jpg","comment_is_top":false,"comment_ctime":1651074172,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651074172","product_id":100098901,"comment_content":"老师，如果 YUV 4:2:0 在存储某些分辩率图像时，不能刚好做到 4个Y分量 对应 1组 U,V分量 这种情况时怎么处理？    是剩下不足的4个Y分量对应一组UV?","like_count":0},{"had_liked":false,"id":341249,"user_name":"Han","can_delete":false,"product_type":"c1","uid":1122349,"ip_address":"","ucode":"280808D4F641AA","user_header":"https://static001.geekbang.org/account/avatar/00/11/20/2d/dfa5bec8.jpg","comment_is_top":false,"comment_ctime":1649478163,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649478163","product_id":100098901,"comment_content":"老师，怎么感觉yuv里面的y分量的个数就代表了像素个数？每个像素一定有一个y，然后和其他y共享uv，是这样吧？","like_count":0},{"had_liked":false,"id":340582,"user_name":"A君","can_delete":false,"product_type":"c1","uid":1940105,"ip_address":"","ucode":"FE96F089C2312C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","comment_is_top":false,"comment_ctime":1648953827,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648953827","product_id":100098901,"comment_content":"YUV相比RGB占用的内存更小，在4：2：0格式下，4个y可以共用一对uv。在做两种格式的转换时，需要明确使用哪个标准BT601或BT701，以及是哪种range。","like_count":0},{"had_liked":false,"id":334784,"user_name":"易水南风","can_delete":false,"product_type":"c1","uid":1123818,"ip_address":"","ucode":"A2A0F18228A5D0","user_header":"https://static001.geekbang.org/account/avatar/00/11/25/ea/ec869117.jpg","comment_is_top":false,"comment_ctime":1645110221,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645110221","product_id":100098901,"comment_content":"老师，“U、V 表示色度”，能麻烦讲下具体怎么表示么，比如U和V的区别，好像表示和亮度的偏移量是么？","like_count":0},{"had_liked":false,"id":332399,"user_name":"志","can_delete":false,"product_type":"c1","uid":2855229,"ip_address":"","ucode":"4778B6A35F8A68","user_header":"https://static001.geekbang.org/account/avatar/00/2b/91/3d/0a639c56.jpg","comment_is_top":false,"comment_ctime":1643204667,"is_pvip":false,"replies":[{"id":"122384","content":"一般视频不太用这个颜色空间，主要是在图像调色里面用吧。所以就不展开了。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1645355601,"ip_address":"","comment_id":332399,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1643204667","product_id":100098901,"comment_content":"为啥不说下cmyk？因为只在图像处理中用得多？","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552224,"discussion_content":"一般视频不太用这个颜色空间，主要是在图像调色里面用吧。所以就不展开了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645355601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2196200,"avatar":"https://static001.geekbang.org/account/avatar/00/21/82/e8/3c0c767a.jpg","nickname":"LJT","note":"","ucode":"1BDF8CF4E9F452","race_medal":3,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571194,"discussion_content":"CMYK一般用在印刷业务，如果你是出版社的美编，会经常用。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1652107290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327000,"user_name":"功夫熊猫","can_delete":false,"product_type":"c1","uid":1186214,"ip_address":"","ucode":"B74213050A0804","user_header":"https://static001.geekbang.org/account/avatar/00/12/19/a6/4529cdfa.jpg","comment_is_top":false,"comment_ctime":1639825457,"is_pvip":false,"replies":[{"id":"119382","content":"其实是每一个像素的RGB转换成一个Y，每上下左右四个像素的RGB转换成一个U，一个V。是四个Y共用一个UV。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1640353348,"ip_address":"","comment_id":327000,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639825457","product_id":100098901,"comment_content":"老师您好，我这里有个小问题没想明白。在RGB转YUV的公式里面，每个像素的R,G,B值都会转换为对应的Y,U,V值，那yuv420这种他是如何做到四个像素点共用一个Y分量的呢，按我的理解应该每个像素点会转换出4个Y分量。谢谢老师","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541386,"discussion_content":"其实是每一个像素的RGB转换成一个Y，每上下左右四个像素的RGB转换成一个U，一个V。是四个Y共用一个UV。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640353348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325140,"user_name":"轩😊","can_delete":false,"product_type":"c1","uid":1645428,"ip_address":"","ucode":"11204328985862","user_header":"https://static001.geekbang.org/account/avatar/00/19/1b/74/9943957c.jpg","comment_is_top":false,"comment_ctime":1638841265,"is_pvip":false,"replies":[{"id":"119342","content":"是的","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1640311748,"ip_address":"","comment_id":325140,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1638841265","product_id":100098901,"comment_content":"如果是 5*2像素的图片， 那YUV4:2:0 占用的16个字节吗？ 10 像素里前面的8个Y 对应两对U,V  剩下2个Y虽然不足4个 ，但也得用一对UV描述色彩，对吧？ 因此在5*2像素下，YUV4:2:0每个像素占用 16&#47;10 = 1.6个字节。我这么理解没错吧？江哥","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541248,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640311748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1393001,"avatar":"https://static001.geekbang.org/account/avatar/00/15/41/69/6eb1efd7.jpg","nickname":"赵吉","note":"","ucode":"13A9565C36C9B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538153,"discussion_content":"15字节吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639356445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325104,"user_name":"Geek_eba446","can_delete":false,"product_type":"c1","uid":2859990,"ip_address":"","ucode":"9B9B1E2A5C3049","user_header":"","comment_is_top":false,"comment_ctime":1638809774,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638809774","product_id":100098901,"comment_content":"请问例子中，y分量为1283(奇数)列的话，uv分量应该怎么计算实例长度及stride","like_count":0},{"had_liked":false,"id":324758,"user_name":"Abcd","can_delete":false,"product_type":"c1","uid":1796908,"ip_address":"","ucode":"274C7487FDDC21","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6b/2c/b27eefc5.jpg","comment_is_top":false,"comment_ctime":1638605157,"is_pvip":false,"replies":[{"id":"117923","content":"我好像从来没有遇到过这种YUV格式的。是水平上4个Y共用一个UV吧。应该也差不多吧。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638786019,"ip_address":"","comment_id":324758,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638605157","product_id":100098901,"comment_content":"老师忘记讲YUV411了","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536445,"discussion_content":"我好像从来没有遇到过这种YUV格式的。是水平上4个Y共用一个UV吧。应该也差不多吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638786019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324418,"user_name":"huozhu0603","can_delete":false,"product_type":"c1","uid":1513401,"ip_address":"","ucode":"704A923AF6ED91","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKicQ5Jyv6xKyINPhC4ZLqgSBV3k54sW0Rk3XCczNWibCAO9om893fmKkEybvPzXckqZ6akewhTwUXw/132","comment_is_top":false,"comment_ctime":1638426064,"is_pvip":false,"replies":[{"id":"119350","content":"opengl的着色器可以转。网上应该会有实现","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1640312891,"ip_address":"","comment_id":324418,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1638426064","product_id":100098901,"comment_content":"请问大佬rgb像素格式倒转yuv有走gpu的好法子吗，ffmpeg啥的那cpu大循环看着难受啊","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541262,"discussion_content":"opengl的着色器可以转。网上应该会有实现","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640312891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2808543,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/da/df/78cbd08b.jpg","nickname":"YSZ","note":"","ucode":"DBD0CEC27F533C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539274,"discussion_content":"可以考虑启用neon 加速运算","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639654234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323676,"user_name":"七号叽","can_delete":false,"product_type":"c1","uid":1235812,"ip_address":"","ucode":"0CB7E5C3297511","user_header":"https://static001.geekbang.org/account/avatar/00/12/db/64/f9628492.jpg","comment_is_top":false,"comment_ctime":1638089030,"is_pvip":false,"replies":[{"id":"117514","content":"会影响画面的颜色，如果标准弄错了最后得到的像素值会稍微有一些差异，这样颜色就会稍微有一些不一样，最好是RGB-&gt;YUV和YUV-&gt;RGB使用同样的标准。对清晰度不会有影响。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638158146,"ip_address":"","comment_id":323676,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638089030","product_id":100098901,"comment_content":"BT601 和 BT709 不同标准会影响什么吗？比如视频的清晰度会受到影响吗？","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534305,"discussion_content":"会影响画面的颜色，如果标准弄错了最后得到的像素值会稍微有一些差异，这样颜色就会稍微有一些不一样，最好是RGB-&gt;YUV和YUV-&gt;RGB使用同样的标准。对清晰度不会有影响。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638158146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323581,"user_name":"Simon","can_delete":false,"product_type":"c1","uid":1914504,"ip_address":"","ucode":"A8A2E3E57BD029","user_header":"https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg","comment_is_top":false,"comment_ctime":1638001526,"is_pvip":true,"replies":[{"id":"117515","content":"《视频解密》这本书里面有推导过程，我印象中。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638158301,"ip_address":"","comment_id":323581,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1638001526","product_id":100098901,"comment_content":"装换公式是怎么推导出来的","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534309,"discussion_content":"《视频解密》这本书里面有推导过程，我印象中。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638158301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1521661,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIbQJvvPGOykVpBjjE9gA2tDg18eBrLHkIOH9ga9NuNKN4U977VE2PlIzzQ4VJMgE0CJvHTx3Ssicw/132","nickname":"Geek_c32e72","note":"","ucode":"539295D69DE77E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534294,"discussion_content":"这些系数是感性调出来的？还是有颜色理论推导啊？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638156781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323369,"user_name":"魏新勇","can_delete":false,"product_type":"c1","uid":1334142,"ip_address":"","ucode":"D1A35C82EC73FC","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/7e/b6b6a741.jpg","comment_is_top":false,"comment_ctime":1637856842,"is_pvip":false,"replies":[{"id":"117422","content":"编码的时候是YUV420的话解码之后就是YUV420，编码的时候是YUV422的话解码之后就是YUV422，同一个图像转成YUV422保留的UV更多所以理论上是要更好一些。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638006511,"ip_address":"","comment_id":323369,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637856842","product_id":100098901,"comment_content":"摄像头解码出来的422或者420，在转成RGB显示的情况，二者有区别吗？有衡量方法吗？理论来说422出的图UV多些，应该更好。","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533882,"discussion_content":"编码的时候是YUV420的话解码之后就是YUV420，编码的时候是YUV422的话解码之后就是YUV422，同一个图像转成YUV422保留的UV更多所以理论上是要更好一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638006511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323206,"user_name":"西格玛","can_delete":false,"product_type":"c1","uid":2616564,"ip_address":"","ucode":"95DE1B8A8ACD8F","user_header":"https://static001.geekbang.org/account/avatar/00/27/ec/f4/3c569056.jpg","comment_is_top":false,"comment_ctime":1637761593,"is_pvip":false,"replies":[{"id":"117291","content":"是的。如果你不跳过就会出问题了。花屏问题后面有一节专门的课程讲解。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637816786,"ip_address":"","comment_id":323206,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1637761593","product_id":100098901,"comment_content":"正如上面例子说的，1283，stride后是1296，我读取到1283后，每次都跳过13个字节不就不花了吗？<br>花屏问题希望多讲讲，比较有意思","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533212,"discussion_content":"是的。如果你不跳过就会出问题了。花屏问题后面有一节专门的课程讲解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637816786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323184,"user_name":"yu","can_delete":false,"product_type":"c1","uid":1138645,"ip_address":"","ucode":"56856DCC0C8387","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/d5/2fec2911.jpg","comment_is_top":false,"comment_ctime":1637754394,"is_pvip":false,"replies":[{"id":"117290","content":"不是的。只是说对应的RGB和YUV的转换需要选择对的标准。不要BT709的YUV用BT601的转换公式就可以。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637816732,"ip_address":"","comment_id":323184,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637754394","product_id":100098901,"comment_content":"请问老师，为什么BT601和BT709转换系数不同，就会影响清晰度呢，一个是标清、一个即使高清","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533211,"discussion_content":"不是的。只是说对应的RGB和YUV的转换需要选择对的标准。不要BT709的YUV用BT601的转换公式就可以。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637816732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323008,"user_name":"DK","can_delete":false,"product_type":"c1","uid":1123993,"ip_address":"","ucode":"36ABC236DB59FD","user_header":"https://static001.geekbang.org/account/avatar/00/11/26/99/cf6e1335.jpg","comment_is_top":false,"comment_ctime":1637685908,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637685908","product_id":100098901,"comment_content":"能想到的点<br>1.兼容黑白电视或设备<br>2.压缩率高(减少UV比例)<br>3.传输减少数据传输，理由同二","like_count":0}]}