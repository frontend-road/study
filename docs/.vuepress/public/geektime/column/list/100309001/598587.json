{"id":598587,"title":"05ï½œå…±è¯†Raftï¼šå¦‚ä½•ä¿è¯å¤šæœºæˆ¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾é•¿é¾™ã€‚</p><p><a href=\"https://time.geekbang.org/column/article/598570\">ä¸ŠèŠ‚è¯¾</a>æˆ‘ä»¬è®²äº†å¦‚ä½•é€šè¿‡Otterå®ç°åŒåŸåŒæ´»æœºæˆ¿çš„æ•°æ®åº“åŒæ­¥ï¼Œä½†æ˜¯<strong>è¿™ç§æ–¹å¼å¹¶ä¸èƒ½ä¿è¯åŒæœºæˆ¿æ•°æ®åŒä¸»çš„äº‹åŠ¡å¼ºä¸€è‡´æ€§</strong>ã€‚</p><p>å¦‚æœæœºæˆ¿Aå¯¹æŸä¸€æ¡æ•°æ®åšäº†æ›´æ”¹ï¼ŒBæœºæˆ¿åŒæ—¶ä¿®æ”¹ï¼ŒOtterä¼šç”¨åˆå¹¶é€»è¾‘å¯¹å†²çªçš„æ•°æ®è¡Œæˆ–å­—æ®µåšåˆå¹¶ã€‚ä¸ºäº†é¿å…ç±»ä¼¼é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨ä¸ŠèŠ‚è¯¾å¯¹å®¢æˆ·ç«¯åšäº†è¦æ±‚ï¼šç”¨æˆ·å®¢æˆ·ç«¯åœ¨ä¸€æ®µæ—¶é—´å†…åªèƒ½è®¿é—®ä¸€ä¸ªæœºæˆ¿ã€‚</p><p>ä½†å¦‚æœä¸šåŠ¡å¯¹â€œäº‹åŠ¡+å¼ºä¸€è‡´â€çš„è¦æ±‚æé«˜ï¼Œæ¯”å¦‚åº“å­˜ä¸å…è®¸è¶…å–ï¼Œé‚£æˆ‘ä»¬é€šå¸¸åªæœ‰ä¸¤ç§é€‰æ‹©ï¼šä¸€ç§æ˜¯å°†æœåŠ¡åšæˆæœ¬åœ°æœåŠ¡ï¼Œä½†è¿™ä¸ªæ–¹å¼å¹¶ä¸é€‚åˆæ‰€æœ‰ä¸šåŠ¡ï¼›å¦ä¸€ç§æ˜¯é‡‡ç”¨å¤šæœºæˆ¿ï¼Œä½†éœ€è¦ç”¨åˆ†å¸ƒå¼å¼ºä¸€è‡´ç®—æ³•ä¿è¯å¤šä¸ªå‰¯æœ¬çš„ä¸€è‡´æ€§ã€‚</p><p>åœ¨è¡Œä¸šé‡Œï¼Œæœ€çŸ¥åçš„åˆ†å¸ƒå¼å¼ºä¸€è‡´ç®—æ³•è¦å±Paxosï¼Œä½†å®ƒçš„åŸç†è¿‡äºæŠ½è±¡ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ç»è¿‡å¤šæ¬¡ä¿®æ”¹ä¼šå’ŒåŸè®¾è®¡äº§ç”Ÿå¾ˆå¤§åç¦»ï¼Œè¿™è®©å¾ˆå¤šäººä¸ç¡®å®šè‡ªå·±çš„ä¿®æ”¹æ˜¯ä¸æ˜¯åˆç†çš„ã€‚è€Œä¸”ï¼Œå¾ˆå¤šäººéœ€è¦ä¸€åˆ°ä¸¤å¹´çš„å®è·µç»éªŒæ‰èƒ½å½»åº•æŒæ¡è¿™ä¸ªç®—æ³•ã€‚</p><p>éšç€æˆ‘ä»¬å¯¹åˆ†å¸ƒå¼å¤šå‰¯æœ¬åŒæ­¥çš„éœ€æ±‚å¢å¤šï¼Œè¿‡äºç¬¼ç»Ÿçš„Paxoså·²ç»ä¸èƒ½æ»¡è¶³å¸‚åœºéœ€è¦ï¼Œäºæ˜¯ï¼ŒRaftç®—æ³•è¯ç”Ÿäº†ã€‚</p><p>ç›¸æ¯”Paxosï¼ŒRaftä¸ä»…æ›´å®¹æ˜“ç†è§£ï¼Œè¿˜èƒ½ä¿è¯æ•°æ®æ“ä½œçš„é¡ºåºï¼Œå› æ­¤åœ¨åˆ†å¸ƒå¼æ•°æ®æœåŠ¡ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œåƒetcdã€Kafkaè¿™äº›çŸ¥åçš„åŸºç¡€ç»„ä»¶éƒ½æ˜¯ç”¨Raftç®—æ³•å®ç°çš„ã€‚</p><!-- [[[read_end]]] --><p>é‚£ä»Šå¤©è¿™èŠ‚è¯¾æˆ‘ä»¬å°±æ¥æ¢å¯»ä¸€ä¸‹Raftçš„å®ç°åŸç†ï¼Œå¯ä»¥è¯´äº†è§£äº†Raftï¼Œå°±ç›¸å½“äºäº†è§£äº†åˆ†å¸ƒå¼å¼ºä¸€è‡´æ€§æ•°æ®æœåŠ¡çš„åŠå£æ±Ÿå±±ã€‚å‡ ä¹æ‰€æœ‰å…³äºå¤šä¸ªæ•°æ®æœåŠ¡èŠ‚ç‚¹çš„é€‰ä¸¾ã€æ•°æ®æ›´æ–°å’ŒåŒæ­¥éƒ½æ˜¯é‡‡ç”¨ç±»ä¼¼çš„æ–¹å¼å®ç°çš„ï¼Œåªæ˜¯é’ˆå¯¹ä¸åŒçš„åœºæ™¯å’Œåº”ç”¨åšäº†ä¸€äº›è°ƒæ•´ã€‚</p><h2>å¦‚ä½•é€‰ä¸¾Leaderï¼Ÿ</h2><p>ä¸ºäº†å¸®ä½ å¿«é€Ÿç†Ÿæ‚‰Raftçš„å®ç°åŸç†ï¼Œä¸‹é¢æˆ‘ä¼šåŸºäº <a href=\"https://raft.github.io/\">Raftå®˜æ–¹çš„ä¾‹å­</a>ï¼Œå¯¹Raftè¿›è¡Œè®²è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/af/23/af3c573401c2c82a3fa4ffac6bff3a23.jpg?wh=1920x1234\" alt=\"å›¾ç‰‡\" title=\"RaftæœåŠ¡çŠ¶æ€è§’è‰²ã€è°ƒç”¨å…³ç³»ã€æ—¥å¿—\"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯åŠ¨äº”ä¸ªRaftåˆ†å¸ƒå¼æ•°æ®æœåŠ¡ï¼šS1ã€S2ã€S3ã€S4ã€S5ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä»¥ä¸‹ä¸‰ç§çŠ¶æ€ï¼š</p><ul>\n<li>Leaderï¼šè´Ÿè´£æ•°æ®ä¿®æ”¹ï¼Œä¸»åŠ¨åŒæ­¥ä¿®æ”¹å˜æ›´ç»™Followerï¼›</li>\n<li>Followerï¼šæ¥æ”¶Leaderæ¨é€çš„å˜æ›´æ•°æ®ï¼›</li>\n<li>Candidateï¼šé›†ç¾¤ä¸­å¦‚æœæ²¡æœ‰Leaderï¼Œé‚£ä¹ˆè¿›å…¥é€‰ä¸¾æ¨¡å¼ã€‚</li>\n</ul><p>å¦‚æœé›†ç¾¤ä¸­çš„FollowerèŠ‚ç‚¹åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°Leaderçš„å¿ƒè·³ï¼Œé‚£å°±ä»£è¡¨LeaderæŸåï¼Œé›†ç¾¤æ— æ³•æ›´æ–°æ•°æ®ã€‚è¿™æ—¶å€™Followerä¼šè¿›å…¥é€‰ä¸¾æ¨¡å¼ï¼Œåœ¨å¤šä¸ªFollowerä¸­é€‰å‡ºä¸€ä¸ªLeaderï¼Œä¿è¯ä¸€ç»„æœåŠ¡ä¸­ä¸€ç›´å­˜åœ¨ä¸€ä¸ªLeaderï¼ŒåŒæ—¶ç¡®ä¿æ•°æ®ä¿®æ”¹æ‹¥æœ‰å”¯ä¸€çš„å†³ç­–è¿›ç¨‹ã€‚</p><p>é‚£LeaderæœåŠ¡æ˜¯å¦‚ä½•é€‰ä¸¾å‡ºæ¥çš„å‘¢ï¼Ÿè¿›å…¥é€‰ä¸¾æ¨¡å¼åï¼Œè¿™5ä¸ªæœåŠ¡ä¼šéšæœºç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚ç­‰å¾…æ—¶é—´ä¸€åˆ°ï¼Œå½“å‰æœåŠ¡å…ˆæŠ•è‡ªå·±ä¸€ç¥¨ï¼Œå¹¶å¯¹å½“å‰çš„ä»»æœŸâ€œtermâ€åŠ  1 ï¼ˆä¸Šå›¾ä¸­term:4å°±ä»£è¡¨ç¬¬å››ä»»Leaderï¼‰ï¼Œç„¶åå¯¹å…¶ä»–æœåŠ¡å‘é€RequestVote RPCï¼ˆå³è¯·æ±‚æŠ•ç¥¨ï¼‰è¿›è¡Œæ‹‰ç¥¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d9/23/d9d670acc44806bdca7320d05c610423.jpg?wh=1920x1234\" alt=\"å›¾ç‰‡\" title=\"S1å¤±å»è”ç³»ï¼ŒS5æœ€å…ˆè¶…æ—¶å‘èµ·é€‰ä¸¾\"></p><p>æ”¶åˆ°æŠ•ç¥¨ç”³è¯·çš„æœåŠ¡ï¼Œå¹¶ä¸”<strong>ç”³è¯·æœåŠ¡ï¼ˆå³â€œå‘é€æŠ•ç¥¨ç”³è¯·çš„æœåŠ¡â€ï¼‰çš„ä»»æœŸå’ŒåŒæ­¥è¿›åº¦éƒ½æ¯”å®ƒè¶…å‰æˆ–ç›¸åŒ</strong>ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæŠ•ç”³è¯·æœåŠ¡ä¸€ç¥¨ï¼Œå¹¶æŠŠå½“å‰çš„ä»»æœŸæ›´æ–°æˆæœ€æ–°çš„ä»»æœŸã€‚åŒæ—¶ï¼Œè¿™ä¸ªæ”¶åˆ°æŠ•ç¥¨ç”³è¯·çš„æœåŠ¡ä¸å†å‘èµ·æŠ•ç¥¨ï¼Œä¼šç­‰å¾…å…¶ä»–æœåŠ¡é‚€è¯·ã€‚</p><p>æ³¨æ„ï¼Œæ¯ä¸ªæœåŠ¡åœ¨åŒä¸€ä»»æœŸå†…åªæŠ•ç¥¨ä¸€æ¬¡ã€‚å¦‚æœæ‰€æœ‰æœåŠ¡éƒ½æ²¡æœ‰è·å–åˆ°å¤šæ•°ç¥¨ï¼ˆä¸‰åˆ†ä¹‹äºŒä»¥ä¸ŠæœåŠ¡èŠ‚ç‚¹çš„æŠ•ç¥¨ï¼‰ï¼Œå°±ä¼šç­‰å½“å‰é€‰ä¸¾è¶…æ—¶åï¼Œå¯¹ä»»æœŸåŠ 1ï¼Œå†æ¬¡è¿›è¡Œé€‰ä¸¾ã€‚æœ€ç»ˆï¼Œè·å–å¤šæ•°ç¥¨ä¸”æœ€å…ˆç»“æŸé€‰ä¸¾å€’è®¡æ—¶çš„æœåŠ¡ä¼šè¢«é€‰ä¸ºLeaderã€‚</p><p>è¢«é€‰ä¸ºLeaderçš„æœåŠ¡ä¼šå‘å¸ƒå¹¿æ’­é€šçŸ¥å…¶ä»–æœåŠ¡ï¼Œå¹¶å‘å…¶ä»–æœåŠ¡åŒæ­¥æ–°çš„ä»»æœŸå’Œå…¶è¿›åº¦æƒ…å†µã€‚åŒæ—¶ï¼Œæ–°ä»»Leaderä¼šåœ¨ä»»èŒæœŸé—´å‘¨æœŸæ€§å‘é€å¿ƒè·³ï¼Œä¿è¯å„ä¸ªå­æœåŠ¡ï¼ˆFollwerï¼‰ä¸ä¼šå› ä¸ºè¶…æ—¶è€Œåˆ‡æ¢åˆ°é€‰ä¸¾æ¨¡å¼ã€‚åœ¨é€‰ä¸¾æœŸé—´ï¼Œè‹¥æœ‰æœåŠ¡æ”¶åˆ°ä¸Šä¸€ä»»Leaderçš„å¿ƒè·³ï¼Œåˆ™ä¼šæ‹’ç»ï¼ˆå¦‚ä¸‹å›¾S1ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7f/08/7f9bf2d92f806e0007ee1e6542212308.jpg?wh=1920x1234\" alt=\"å›¾ç‰‡\" title=\"æŠ•ç¥¨ç»“æœè¿”å›\"></p><p>é€‰ä¸¾ç»“æŸåï¼Œæ‰€æœ‰æœåŠ¡éƒ½è¿›å…¥æ•°æ®åŒæ­¥çŠ¶æ€ã€‚</p><h2>å¦‚ä½•ä¿è¯å¤šå‰¯æœ¬å†™ä¸€è‡´ï¼Ÿ</h2><p>åœ¨æ•°æ®åŒæ­¥æœŸé—´ï¼ŒFollowerä¼šä¸Leaderçš„æ—¥å¿—å®Œå…¨ä¿æŒä¸€è‡´ã€‚ä¸éš¾çœ‹å‡ºï¼ŒRaftç®—æ³•é‡‡ç”¨çš„ä¹Ÿæ˜¯ä¸»ä»æ–¹å¼åŒæ­¥ï¼Œåªä¸è¿‡Leaderä¸æ˜¯å›ºå®šçš„æœåŠ¡ï¼Œè€Œæ˜¯è¢«é€‰ä¸¾å‡ºæ¥çš„ã€‚</p><p>è¿™æ ·å½“ä¸ªåˆ«èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶ï¼Œæ˜¯ä¸ä¼šå½±å“æ•´ä½“æœåŠ¡çš„ã€‚ä¸è¿‡ï¼Œè¿™ç§æœºåˆ¶ä¹Ÿæœ‰ç¼ºç‚¹ï¼šå¦‚æœLeaderå¤±è”ï¼Œé‚£ä¹ˆæ•´ä½“æœåŠ¡ä¼šæœ‰ä¸€æ®µæ—¶é—´å¿™äºé€‰ä¸¾ï¼Œè€Œæ— æ³•æä¾›æ•°æ®æœåŠ¡ã€‚</p><p>é€šå¸¸æ¥è¯´ï¼Œå®¢æˆ·ç«¯çš„æ•°æ®ä¿®æ”¹è¯·æ±‚éƒ½ä¼šå‘é€åˆ°LeaderèŠ‚ç‚¹ï¼ˆå¦‚ä¸‹å›¾S1ï¼‰è¿›è¡Œç»Ÿä¸€å†³ç­–ï¼Œå¦‚æœå®¢æˆ·ç«¯è¯·æ±‚å‘é€åˆ°äº†Followerï¼ŒFollowerå°±ä¼šå°†è¯·æ±‚é‡å®šå‘åˆ°Leaderã€‚é‚£ä¹ˆï¼ŒRaftæ˜¯æ€ä¹ˆå®ç°åŒåˆ†åŒºæ•°æ®å¤‡ä»½å‰¯æœ¬çš„å¼ºä¸€è‡´æ€§å‘¢ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/5b/b866385e2b4ba21515302bcb1836ab5b.jpg?wh=1920x1234\" alt=\"å›¾ç‰‡\" title=\"å¤šå‰¯æœ¬åŒæ­¥\"><br>\nå…·ä½“æ¥è®²ï¼ŒLeaderæˆåŠŸä¿®æ”¹æ•°æ®åï¼Œä¼šäº§ç”Ÿå¯¹åº”çš„æ—¥å¿—ï¼Œç„¶åLeaderä¼šç»™æ‰€æœ‰Followerå‘é€å•æ¡æ—¥å¿—åŒæ­¥ä¿¡æ¯ã€‚åªè¦å¤§å¤šæ•°Followerè¿”å›åŒæ­¥æˆåŠŸï¼ŒLeaderå°±ä¼šå¯¹é¢„æäº¤çš„æ—¥å¿—è¿›è¡Œcommitï¼Œå¹¶å‘å®¢æˆ·ç«¯è¿”å›ä¿®æ”¹æˆåŠŸã€‚</p><p>æ¥ç€ï¼ŒLeaderåœ¨ä¸‹ä¸€æ¬¡å¿ƒè·³æ—¶ï¼ˆæ¶ˆæ¯ä¸­leader commitå­—æ®µï¼‰ï¼Œä¼šæŠŠå½“å‰æœ€æ–°commitçš„Log indexï¼ˆæ—¥å¿—è¿›åº¦ï¼‰å‘ŠçŸ¥ç»™å„FollowerèŠ‚ç‚¹ï¼Œç„¶åå„FolloweræŒ‰ç…§è¿™ä¸ªindexè¿›åº¦å¯¹å¤–æä¾›æ•°æ®ï¼Œæœªè¢«Leaderæœ€ç»ˆcommitçš„æ•°æ®åˆ™ä¸ä¼šè½åœ°å¯¹å¤–å±•ç¤ºã€‚</p><p>å¦‚æœåœ¨æ•°æ®åŒæ­¥æœŸé—´ï¼Œå®¢æˆ·ç«¯è¿˜æœ‰å…¶ä»–çš„æ•°æ®ä¿®æ”¹è¯·æ±‚å‘åˆ°Leaderï¼Œé‚£ä¹ˆè¿™äº›è¯·æ±‚ä¼šæ’é˜Ÿï¼Œå› ä¸ºè¿™æ—¶å€™çš„Leaderåœ¨é˜»å¡ç­‰å¾…å…¶ä»–èŠ‚ç‚¹å›åº”ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/14/a4/140fa27a525163918956514db3d863a4.jpg?wh=1920x1234\" alt=\"å›¾ç‰‡\" title=\"é€šè¿‡æ—¥å¿—åŒæ­¥ï¼ŒåŒæ—¶åŒæ­¥Followerç›®å‰Leader çš„commit index\"></p><p>ä¸è¿‡ï¼Œè¿™ç§é˜»å¡ç­‰å¾…çš„è®¾è®¡ä¹Ÿè®©Raftç®—æ³•å¯¹ç½‘ç»œæ€§èƒ½çš„ä¾èµ–å¾ˆå¤§ï¼Œå› ä¸ºæ¯æ¬¡ä¿®æ”¹éƒ½è¦å¹¶å‘è¯·æ±‚å¤šä¸ªèŠ‚ç‚¹ï¼Œç­‰å¾…å¤§éƒ¨åˆ†èŠ‚ç‚¹æˆåŠŸåŒæ­¥çš„ç»“æœã€‚</p><p>æœ€æƒ¨çš„æƒ…å†µæ˜¯ï¼Œè¿”å›çš„RTTä¼šæŒ‰ç…§æœ€æ…¢çš„ç½‘ç»œæœåŠ¡å“åº”è€—æ—¶ï¼ˆâ€œä¸¤åœ°ä¸‰ä¸­å¿ƒâ€çš„ä¸€æ¬¡åŒæ­¥æ—¶é—´ä¸º100mså·¦å³ï¼‰ï¼Œå†åŠ ä¸Šä¸»èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªï¼Œä¸€ç»„Raftçš„æœåŠ¡æ€§èƒ½æ˜¯æœ‰ä¸Šé™çš„ã€‚å¯¹æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘æ•°æ®é‡å¹¶å¯¹æ•°æ®åšåˆ‡ç‰‡ï¼Œæé«˜æ•´ä½“é›†ç¾¤çš„æ•°æ®ä¿®æ”¹æ€§èƒ½ã€‚</p><p>è¯·ä½ æ³¨æ„ï¼Œå½“å¤§å¤šæ•°Followerä¸LeaderåŒæ­¥çš„æ—¥å¿—è¿›åº¦å·®å¼‚è¿‡å¤§æ—¶ï¼Œæ•°æ®å˜æ›´è¯·æ±‚ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°ä¸€åŠä»¥ä¸Šçš„Followerä¸Leaderçš„è¿›åº¦ä¸€è‡´ï¼Œæ‰ä¼šè¿”å›å˜æ›´æˆåŠŸã€‚å½“ç„¶ï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒå°‘è§ã€‚</p><h2>æœåŠ¡ä¹‹é—´å¦‚ä½•åŒæ­¥æ—¥å¿—è¿›åº¦ï¼Ÿ</h2><p>è®²åˆ°è¿™æˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼Œåœ¨Raftçš„æ•°æ®åŒæ­¥æœºåˆ¶ä¸­ï¼Œæ—¥å¿—å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ã€‚åœ¨åŒæ­¥æ•°æ®æ—¶ï¼ŒRafté‡‡ç”¨çš„æ—¥å¿—æ˜¯ä¸€ä¸ªæœ‰é¡ºåºçš„æŒ‡ä»¤æ—¥å¿—WALï¼ˆWrite Ahead Logï¼‰ï¼Œç±»ä¼¼MySQLçš„binlogã€‚è¯¥æ—¥å¿—ä¸­è®°å½•ç€æ¯æ¬¡ä¿®æ”¹æ•°æ®çš„æŒ‡ä»¤å’Œä¿®æ”¹ä»»æœŸï¼Œå¹¶é€šè¿‡Log Indexæ ‡æ³¨äº†å½“å‰æ˜¯ç¬¬å‡ æ¡æ—¥å¿—ï¼Œä»¥æ­¤ä½œä¸ºåŒæ­¥è¿›åº¦çš„ä¾æ®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8d/51/8dea5b9b5a3a62e94a43dc5632ac6e51.jpg?wh=1920x1234\" alt=\"å›¾ç‰‡\" title=\"æ—¥å¿—æ ¼å¼\"></p><p>å…¶ä¸­ï¼ŒLeaderçš„æ—¥å¿—æ°¸è¿œä¸ä¼šåˆ é™¤ï¼Œæ‰€æœ‰çš„Followeréƒ½ä¼šä¿æŒå’ŒLeader <strong>å®Œå…¨ä¸€è‡´ï¼Œå¦‚æœå­˜åœ¨å·®å¼‚ä¹Ÿä¼šè¢«å¼ºåˆ¶è¦†ç›–</strong>ã€‚åŒæ—¶ï¼Œæ¯ä¸ªæ—¥å¿—éƒ½æœ‰â€œå†™å…¥â€å’Œâ€œcommitâ€ä¸¤ä¸ªé˜¶æ®µï¼Œåœ¨é€‰ä¸¾æ—¶ï¼Œæ¯ä¸ªæœåŠ¡ä¼šæ ¹æ®è¿˜æœªcommitçš„Log Indexè¿›åº¦ï¼Œä¼˜å…ˆé€‰æ‹©åŒæ­¥è¿›åº¦æœ€å¤§çš„èŠ‚ç‚¹ï¼Œä»¥æ­¤ä¿è¯é€‰ä¸¾å‡ºçš„Leaderæ‹¥æœ‰æœ€æ–°æœ€å…¨çš„æ•°æ®ã€‚</p><p>Leaderåœ¨ä»»æœŸå†…å‘å„èŠ‚ç‚¹å‘é€åŒæ­¥è¯·æ±‚ï¼Œå…¶å®å°±æ˜¯æŒ‰é¡ºåºå‘å„èŠ‚ç‚¹æ¨é€ä¸€æ¡æ¡æ—¥å¿—ã€‚å¦‚æœLeaderåŒæ­¥çš„è¿›åº¦æ¯”Followerè¶…å‰ï¼ŒFollowerå°±ä¼šæ‹’ç»æœ¬æ¬¡åŒæ­¥ã€‚</p><p>Leaderæ”¶åˆ°æ‹’ç»åï¼Œä¼šä»åå¾€å‰ä¸€æ¡æ¡æ‰¾å‡ºæ—¥å¿—ä¸­è¿˜æœªåŒæ­¥çš„éƒ¨åˆ†æˆ–è€…æœ‰å·®å¼‚çš„éƒ¨åˆ†ï¼Œç„¶åå¼€å§‹ä¸€ä¸ªä¸ªå¾€åè¦†ç›–å®ç°åŒæ­¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ed/7b/ed2e78bb1634eda6454ea21f73bb3b7b.jpg?wh=1920x1234\" alt=\"å›¾ç‰‡\" title=\"ç¬¬ä¸€é˜¶æ®µæ‰¾åˆ°å…±åŒè¿›åº¦ç‚¹ï¼Œç¬¬äºŒé˜¶æ®µè¦†ç›–+è¿½åŠ åŒæ­¥è¿›åº¦\"></p><p>Leaderå’ŒFollowerçš„æ—¥å¿—åŒæ­¥è¿›åº¦æ˜¯é€šè¿‡æ—¥å¿—indexæ¥ç¡®è®¤çš„ã€‚Leaderå¯¹æ—¥å¿—å†…å®¹å’Œé¡ºåºæœ‰ç»å¯¹çš„å†³ç­–æƒï¼Œå½“å®ƒå‘ç°è‡ªå·±çš„æ—¥å¿—å’ŒFollowerçš„æ—¥å¿—æœ‰å·®å¼‚æ—¶ï¼Œä¸ºäº†ç¡®ä¿å¤šä¸ªå‰¯æœ¬çš„æ•°æ®æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œå®ƒä¼šå¼ºåˆ¶è¦†ç›–Followerçš„æ—¥å¿—ã€‚</p><p>é‚£ä¹ˆLeaderæ˜¯æ€ä¹ˆè¯†åˆ«å‡ºFollowerçš„æ—¥å¿—ä¸è‡ªå·±çš„æ—¥å¿—æœ‰æ²¡æœ‰å·®å¼‚å‘¢ï¼Ÿå®é™…ä¸Šï¼ŒLeaderç»™FolloweråŒæ­¥æ—¥å¿—çš„æ—¶å€™ï¼Œä¼šåŒæ—¶å¸¦ä¸ŠLeaderä¸Šä¸€æ¡æ—¥å¿—çš„ä»»æœŸå’Œç´¢å¼•å·ï¼Œä¸Followerå½“å‰çš„åŒæ­¥è¿›åº¦è¿›è¡Œå¯¹æ¯”ã€‚</p><p>å¯¹æ¯”åˆ†ä¸ºä¸¤ä¸ªæ–¹é¢ï¼šä¸€æ–¹é¢æ˜¯å¯¹æ¯”Leaderå’ŒFollowerå½“å‰æ—¥å¿—ä¸­çš„indexã€å¤šæ¡æ“ä½œæ—¥å¿—å’Œä»»æœŸï¼›å¦ä¸€æ–¹é¢æ˜¯å¯¹æ¯”Leaderå’ŒFollowerä¸Šä¸€æ¡æ—¥å¿—çš„indexå’Œä»»æœŸã€‚</p><p>å¦‚æœæœ‰ä»»æ„ä¸€ä¸ªä¸åŒï¼Œé‚£ä¹ˆLeaderå°±è®¤ä¸ºFollowerçš„æ—¥å¿—ä¸è‡ªå·±çš„æ—¥å¿—ä¸ä¸€è‡´ï¼Œè¿™æ—¶å€™<strong>Leaderä¼šä¸€æ¡æ¡å€’åºå¾€å›å¯¹æ¯”ï¼Œ</strong>ç›´åˆ°æ‰¾åˆ°æ—¥å¿—å†…å®¹å’Œä»»æœŸå®Œå…¨ä¸€è‡´çš„indexï¼Œç„¶åä»è¿™ä¸ªindexå¼€å§‹æ­£åºå‘ä¸‹è¦†ç›–ã€‚åŒæ—¶ï¼Œåœ¨æ—¥å¿—æ•°æ®åŒæ­¥æœŸé—´ï¼ŒLeaderåªä¼šcommitå…¶æ‰€åœ¨ä»»æœŸå†…çš„æ•°æ®ï¼Œ<strong>è¿‡å¾€ä»»æœŸçš„æ•°æ®å®Œå…¨é æ—¥å¿—åŒæ­¥å€’åºè¿½å›</strong>ã€‚</p><p>ä½ åº”è¯¥å·²ç»å‘ç°äº†ï¼Œè¿™æ ·ä¸€æ¡æ¡æ¨é€åŒæ­¥æœ‰äº›ç¼“æ…¢ï¼Œæ•ˆç‡ä¸é«˜ï¼Œè¿™å¯¼è‡´Raftå¯¹æ–°å¯åŠ¨çš„æœåŠ¡ä¸æ˜¯å¾ˆå‹å¥½ã€‚æ‰€ä»¥Leaderä¼šå®šæœŸæ‰“å¿«ç…§ï¼Œé€šè¿‡å¿«ç…§åˆå¹¶ä¹‹å‰ä¿®æ”¹æ—¥å¿—çš„è®°å½•ï¼Œæ¥é™ä½ä¿®æ”¹æ—¥å¿—çš„å¤§å°ã€‚è€ŒåŒæ­¥è¿›åº¦å·®è·è¿‡å¤§çš„Followerä¼šä»Leaderæœ€æ–°çš„å¿«ç…§ä¸­æ¢å¤æ•°æ®ï¼ŒæŒ‰å¿«ç…§æœ€åçš„indexè¿½èµ¶è¿›åº¦ã€‚</p><h2>å¦‚ä½•ä¿è¯è¯»å–æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Ÿ</h2><p>é€šè¿‡å‰é¢çš„è®²è§£ï¼Œæˆ‘ä»¬çŸ¥é“äº†Leaderå’ŒFollowerä¹‹é—´æ˜¯å¦‚ä½•åšåˆ°æ•°æ®åŒæ­¥çš„ï¼Œé‚£ä»Followerçš„è§’åº¦æ¥çœ‹ï¼Œå®ƒåˆæ˜¯æ€ä¹ˆä¿è¯è‡ªå·±å¯¹å¤–æä¾›çš„æ•°æ®æ˜¯æœ€æ–°çš„å‘¢ï¼Ÿ</p><p>è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼Œå°±æ˜¯Followeråœ¨æ”¶åˆ°æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œä¼šé¡ºä¾¿é—®ä¸€ä¸‹Leaderå½“å‰æœ€æ–°commitçš„log indexæ˜¯ä»€ä¹ˆã€‚å¦‚æœè¿™ä¸ªlog indexå¤§äºå½“å‰FolloweråŒæ­¥çš„è¿›åº¦ï¼Œå°±è¯´æ˜Followerçš„æœ¬åœ°æ•°æ®ä¸æ˜¯æœ€æ–°çš„ï¼Œè¿™æ—¶å€™Followerå°±ä¼šä»Leaderè·å–æœ€æ–°çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å¯è§ï¼Œä¿è¯æ•°æ®å¼ºä¸€è‡´æ€§çš„ä»£ä»·å¾ˆå¤§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/99/8eb7510yyb5585977746b9fcd4dbf199.jpg?wh=3330x2141\" alt=\"\" title=\"Followerä¿æŒä¸Leaderè¿›åº¦ä¸€è‡´çš„æ–¹å¼ï¼Œä¿è¯è¯»åˆ°çš„æ•°æ®å’ŒLeaderå¼ºä¸€è‡´\"></p><p>ä½ å¯èƒ½ä¼šå¥½å¥‡ï¼šå¦‚ä½•åœ¨ä¸šåŠ¡ä½¿ç”¨æ—¶ä¿è¯è¯»å–æ•°æ®çš„å¼ºä¸€è‡´æ€§å‘¢ï¼Ÿå…¶å®æˆ‘ä»¬ä¹‹å‰è¯´çš„RaftåŒæ­¥ç­‰å¾…Leader commit log indexçš„æœºåˆ¶ï¼Œå·²ç»ç¡®ä¿äº†è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬åªéœ€è¦å‘Leaderæ­£å¸¸æäº¤æ•°æ®ä¿®æ”¹çš„æ“ä½œï¼ŒFollowerè¯»å–æ—¶æ‹¿åˆ°çš„å°±ä¸€å®šæ˜¯æœ€æ–°çš„æ•°æ®ã€‚</p><h2>æ€»ç»“</h2><p>å¾ˆå¤šäººéƒ½è¯´Raftæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•ï¼Œä½†å®é™…ä¸ŠRaftç®—æ³•æ˜¯ä¸€ä¸ªå…±è¯†ç®—æ³•ï¼ˆå¤šä¸ªèŠ‚ç‚¹è¾¾æˆå…±è¯†ï¼‰ï¼Œå®ƒé€šè¿‡ä»»æœŸæœºåˆ¶ã€éšæœºæ—¶é—´å’ŒæŠ•ç¥¨é€‰ä¸¾æœºåˆ¶ï¼Œå®ç°äº†æœåŠ¡åŠ¨æ€æ‰©å®¹åŠæœåŠ¡çš„é«˜å¯ç”¨ã€‚</p><p>é€šè¿‡Rafté‡‡ç”¨å¼ºåˆ¶é¡ºåºçš„æ—¥å¿—åŒæ­¥å®ç°å¤šå‰¯æœ¬çš„æ•°æ®å¼ºä¸€è‡´åŒæ­¥ï¼Œå¦‚æœæˆ‘ä»¬ç”¨Raftç®—æ³•å®ç°ç”¨æˆ·çš„æ•°æ®å­˜å‚¨å±‚ï¼Œé‚£ä¹ˆæ•°æ®çš„å­˜å‚¨å’Œå¢åˆ æ”¹æŸ¥ï¼Œéƒ½ä¼šå…·æœ‰è·¨æœºæˆ¿çš„æ•°æ®å¼ºä¸€è‡´æ€§ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸šåŠ¡å±‚å°±æ— éœ€å…³å¿ƒä¸€è‡´æ€§é—®é¢˜ï¼Œå¯¹æ•°æ®ç›´æ¥æ“ä½œï¼Œå³å¯è½»æ¾å®ç°å¤šæœºæˆ¿çš„å¼ºä¸€è‡´åŒæ­¥ã€‚</p><p>ç”±äºè¿™ç§æ–¹å¼çš„åŒæ­¥ä»£ä»·å’Œå»¶è¿Ÿéƒ½æ¯”è¾ƒå¤§ï¼Œå»ºè®®ä½ å°½é‡åœ¨æ•°æ®é‡å’Œä¿®æ”¹é‡éƒ½æ¯”è¾ƒå°çš„åœºæ™¯å†…ä½¿ç”¨ï¼Œè¡Œä¸šé‡Œä¹Ÿæœ‰å¾ˆå¤šé’ˆå¯¹ä¸åŒåœºæ™¯è®¾è®¡çš„åº“å¯ä»¥é€‰æ‹©ï¼Œå¦‚ï¼šparallel-raftã€multi-paxosã€SOFAJRaftç­‰ï¼Œæ›´å¤šè¯·å‚è€ƒRaftçš„<a href=\"https://raft.github.io/\">åº•éƒ¨å¼€æºåˆ—è¡¨</a>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/65/93/65fd6d4d751c7c888468dc7623724a93.jpg?wh=1920x1234\" alt=\"å›¾ç‰‡\"></p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œè¯·ä½ æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆRafté›†ç¾¤æˆå‘˜å¢å‡éœ€è¦ç‰¹æ®Šå»åšï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p>","neighbors":{"left":{"article_title":"04ï½œåŒåŸåŒæ´»ï¼šå¦‚ä½•å®ç°æœºæˆ¿ä¹‹é—´çš„æ•°æ®åŒæ­¥ï¼Ÿ","id":598570},"right":{"article_title":"06ï½œé¢†åŸŸæ‹†åˆ†ï¼šå¦‚ä½•åˆç†åœ°æ‹†åˆ†ç³»ç»Ÿï¼Ÿ","id":599857}},"comments":[{"had_liked":false,"id":365092,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"åŒ—äº¬","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1672102098,"is_pvip":false,"replies":[{"id":132984,"content":"ä»æŸä¸ªè§’åº¦æ¥è¯´ï¼Œè¿™å’Œæˆ‘ä»¬çš„éœ€æ±‚æœ‰å¾ˆå¤§å…³ç³»ã€‚ç”¨æˆ·é‡å¤§çš„æœåŠ¡ä¸šåŠ¡å¯¹æ€§èƒ½è¦æ±‚é«˜ï¼Œä¸ç®¡å¤šå¤§çš„å…¬å¸æŠ•å…¥ç¡¬ä»¶éƒ½æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥åŸºæœ¬èƒ½çœ‹åˆ°çš„éƒ½æ˜¯æœ€ç»ˆä¸€è‡´æ˜¯ä¸»æµï¼ˆå¸¸è§çš„è¯»å¤šå†™å°‘æœåŠ¡æ˜¯ä¸»æµï¼‰ã€‚è€Œåˆ†å¸ƒå¼ä¸€è‡´æ€§å¦‚æœä¸è€ƒè™‘æ€§èƒ½æ˜¯èƒ½åšåˆ°çš„ï¼Œåªæ˜¯ä¸å€¼å¾—ï¼Œå› ä¸ºè¿˜è¦è€ƒè™‘é«˜å¯ç”¨ç­‰äº‹å®œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1672206848,"ip_address":"åŒ—äº¬","comment_id":365092,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"æ–‡ä¸­çš„è¿™ä¸€æ®µï¼Œå¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„è§£é‡Šï¼š\nâ€œè¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼Œå°±æ˜¯ Follower åœ¨æ”¶åˆ°æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œä¼šé¡ºä¾¿é—®ä¸€ä¸‹ Leader å½“å‰æœ€æ–° commit çš„ log index æ˜¯ä»€ä¹ˆã€‚â€\n\nè¿™é‡Œæ˜¯ä¸æ˜¯æ„å‘³ç€æ¯æ¬¡å¯¹ä»èŠ‚ç‚¹çš„æŸ¥è¯¢ï¼Œä¸€å®šä¼šä¼´éšå¯¹ä¸»èŠ‚ç‚¹çš„æŸ¥è¯¢ï¼Ÿè¿™ä¹ˆæ¥çœ‹çš„è¯ï¼Œæ€§èƒ½å²‚ä¸æ˜¯ä¼šå¾ˆå·®ï¼Ÿä¸å•å•æ˜¯è¦æ±‚ä¿®æ”¹é‡å°ï¼ŒæŸ¥è¯¢é‡å¤šäº†ä¸»èŠ‚ç‚¹æ˜¯å¦ä¹Ÿå®¹æ˜“æ‰¿å—ä¸ä½ï¼Ÿ\n\nå¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¤§ä½¬è¯´ï¼Œç°åœ¨çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§éƒ½æ˜¯æ‰¯çš„ï¼Œæˆ‘ä»¬è¿½æ±‚çš„åªèƒ½æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚è¿™æ ·è¯´æœ‰é“ç†å—ï¼Ÿæˆ‘ä»¬æ˜¯å¦è¿˜åº”è¯¥è¿½æ±‚åˆ†å¸ƒå¼æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Ÿ\n","like_count":4,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597749,"discussion_content":"ä»æŸä¸ªè§’åº¦æ¥è¯´ï¼Œè¿™å’Œæˆ‘ä»¬çš„éœ€æ±‚æœ‰å¾ˆå¤§å…³ç³»ã€‚ç”¨æˆ·é‡å¤§çš„æœåŠ¡ä¸šåŠ¡å¯¹æ€§èƒ½è¦æ±‚é«˜ï¼Œä¸ç®¡å¤šå¤§çš„å…¬å¸æŠ•å…¥ç¡¬ä»¶éƒ½æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥åŸºæœ¬èƒ½çœ‹åˆ°çš„éƒ½æ˜¯æœ€ç»ˆä¸€è‡´æ˜¯ä¸»æµï¼ˆå¸¸è§çš„è¯»å¤šå†™å°‘æœåŠ¡æ˜¯ä¸»æµï¼‰ã€‚è€Œåˆ†å¸ƒå¼ä¸€è‡´æ€§å¦‚æœä¸è€ƒè™‘æ€§èƒ½æ˜¯èƒ½åšåˆ°çš„ï¼Œåªæ˜¯ä¸å€¼å¾—ï¼Œå› ä¸ºè¿˜è¦è€ƒè™‘é«˜å¯ç”¨ç­‰äº‹å®œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672206848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1795357,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/65/1d/34ac9c2b.jpg","nickname":"ç‹ä¸œ","note":"","ucode":"EF149E179D568E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597757,"discussion_content":"å¦‚æœè¯»å†™éƒ½ä»Leaderè¯» é‚£ä¹ˆå¯ä»¥è®¤ä¸ºæ˜¯å¼ºä¸€è‡´æ€§ï¼Œå¦‚æœè¯»å¯ä»¥åœ¨ä»»æ„èŠ‚ç‚¹å¼€å§‹,é‚£ä¹ˆåªèƒ½æ˜¯æœ€ç»ˆä¸€è‡´æ€§ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672211585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1274117,"avatar":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","nickname":"ğŸ‘½","note":"","ucode":"D313AF941B412D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1795357,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/65/1d/34ac9c2b.jpg","nickname":"ç‹ä¸œ","note":"","ucode":"EF149E179D568E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597769,"discussion_content":"â€œè¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼Œå°±æ˜¯ Follower åœ¨æ”¶åˆ°æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œä¼šé¡ºä¾¿é—®ä¸€ä¸‹ Leader å½“å‰æœ€æ–° commit çš„ log index æ˜¯ä»€ä¹ˆã€‚â€\n\næ–‡ä¸­è¿™ä¸ªæè¿°æ¥çœ‹ï¼Œè¿™ä¸ªæ˜¯å¦ç®—å¼ºä¸€è‡´æ€§å‘¢ï¼Ÿè™½ç„¶æ²¡æœ‰ç›´æ¥ä»leaderè¯»æ•°æ®ï¼Œä½†æ˜¯ä»leaderè¯»äº†å½“å‰æ•°æ®çš„ç‰ˆæœ¬å·ã€‚\n\nå¦å¤–ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£æˆ‘seataä¹‹ç±»çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ä¹Ÿæ˜¯æœ€ç»ˆä¸€è‡´æ€§ï¼Ÿå› ä¸ºåœ¨å¤„ç†äº‹åŠ¡çš„æ—¶å€™ï¼Œä¼¼ä¹å¹¶æ— æ³•ä¿è¯æ¯ä¸ªèŠ‚ç‚¹è¯»å–æ•°æ®çš„ä¸€è‡´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672218154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":597757,"ip_address":"å¹¿ä¸œ","group_id":0},"score":597769,"extra":""},{"author":{"id":1795357,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/65/1d/34ac9c2b.jpg","nickname":"ç‹ä¸œ","note":"","ucode":"EF149E179D568E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1274117,"avatar":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","nickname":"ğŸ‘½","note":"","ucode":"D313AF941B412D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597796,"discussion_content":"æ–‡ä¸­è¿™ä¸ªæŠ€å·§ï¼Œä¹Ÿæ˜¯è¯»ä¸»å±äºå¼ºä¸€è‡´æ€§ï¼Œseataæœ‰xaå¯ä»¥å¼ºä¸€è‡´æ€§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1672230057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":597769,"ip_address":"è¾½å®","group_id":0},"score":597796,"extra":""}]}]},{"had_liked":false,"id":361443,"user_name":"HappyHasson","can_delete":false,"product_type":"c1","uid":2911084,"ip_address":"åŒ—äº¬","ucode":"B84CC43E349CFA","user_header":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","comment_is_top":false,"comment_ctime":1667522862,"is_pvip":false,"replies":[{"id":131464,"content":"ä½ å¥½ï¼ŒHappyHassonï¼Œå¾ˆé«˜å…´å†æ¬¡æ”¶åˆ°ä½ çš„ç•™è¨€\nç¬¬ä¸€ä¸ªé—®é¢˜ï¼šç½‘ç»œæŠ–åŠ¨å¼•èµ·çš„ä¸‹çº¿ä¹Ÿä¼šå½±å“æ•°æ®çš„åŒæ­¥ï¼Œæ‰€ä»¥ä»æŸä¸ªè§’åº¦æ¥è¯´ä»–å·²ç»ä¸æ˜¯åŒæ­¥æ›´æ–°çš„èŠ‚ç‚¹äº†ï¼Œå¦‚æœæ˜¯ä¸‹çº¿çš„æ˜¯leaderé‚£ä¹ˆä¼šå¯¼è‡´æ›´æ–°æ•°æ®å¡ä½ç­‰å¾…å…¶ä»–followerå›é¦ˆï¼Œè¿™å¾ˆå½±å“æœåŠ¡ç¨³å®šã€‚ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯ä¸€åŠï¼Œä½†æ˜¯ä»ä»¥å¾€ç»éªŒæ¥çœ‹ï¼Œä¸€åŠå®¹æ˜“å‡ºç°è„‘è£‚ï¼Œä¸ºäº†å‡å°‘é¿å…è¿™ä¸ªé—®é¢˜çš„æ¦‚ç‡ï¼Œæ‰€ä»¥æ˜¯ä¸‰åˆ†ä¹‹äºŒï¼Œå½“ç„¶ç¼ºç‚¹æ˜¯å¤§è§„æ¨¡æ‰çº¿ä¼šå¡ä½æœåŠ¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1667528377,"ip_address":"åŒ—äº¬","comment_id":361443,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"æœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œ\nä¸€ï¼Œè¿™é‡Œæ²¡æœ‰ä¸»è§‚ä¸‹çº¿å’Œå®¢è§‚ä¸‹çº¿çš„åŒºåˆ†å—ï¼Œå°±æ˜¯å½“ä¸€ä¸ªfolloweræ£€æµ‹åˆ°leaderä¸‹çº¿ï¼Œä½†æ˜¯ä¸ä¸€å®šçœŸçš„ä¸‹çº¿äº†ï¼Œè€Œä¸”ç½‘ç»œæŠ–åŠ¨å¼•èµ·çš„ \n\näºŒï¼Œæˆ‘çœ‹åˆ°çš„ç†è®ºéƒ½æ˜¯è¯´æŠ•ç¥¨è¿‡åŠæ•°å°±é€‰ä¸¾æˆåŠŸäº†ï¼Œè¿™é‡Œè¯´æ˜¯ä¸‰åˆ†ä¹‹äºŒï¼Œä¸ºä»€ä¹ˆ","like_count":3,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592605,"discussion_content":"ä½ å¥½ï¼ŒHappyHassonï¼Œå¾ˆé«˜å…´å†æ¬¡æ”¶åˆ°ä½ çš„ç•™è¨€\nç¬¬ä¸€ä¸ªé—®é¢˜ï¼šç½‘ç»œæŠ–åŠ¨å¼•èµ·çš„ä¸‹çº¿ä¹Ÿä¼šå½±å“æ•°æ®çš„åŒæ­¥ï¼Œæ‰€ä»¥ä»æŸä¸ªè§’åº¦æ¥è¯´ä»–å·²ç»ä¸æ˜¯åŒæ­¥æ›´æ–°çš„èŠ‚ç‚¹äº†ï¼Œå¦‚æœæ˜¯ä¸‹çº¿çš„æ˜¯leaderé‚£ä¹ˆä¼šå¯¼è‡´æ›´æ–°æ•°æ®å¡ä½ç­‰å¾…å…¶ä»–followerå›é¦ˆï¼Œè¿™å¾ˆå½±å“æœåŠ¡ç¨³å®šã€‚ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯ä¸€åŠï¼Œä½†æ˜¯ä»ä»¥å¾€ç»éªŒæ¥çœ‹ï¼Œä¸€åŠå®¹æ˜“å‡ºç°è„‘è£‚ï¼Œä¸ºäº†å‡å°‘é¿å…è¿™ä¸ªé—®é¢˜çš„æ¦‚ç‡ï¼Œæ‰€ä»¥æ˜¯ä¸‰åˆ†ä¹‹äºŒï¼Œå½“ç„¶ç¼ºç‚¹æ˜¯å¤§è§„æ¨¡æ‰çº¿ä¼šå¡ä½æœåŠ¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667528377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365613,"user_name":"æ¢…å­é»„æ—¶é›¨","can_delete":false,"product_type":"c1","uid":1015938,"ip_address":"åŒ—äº¬","ucode":"9F788D09C2E9E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/82/3c21b30c.jpg","comment_is_top":false,"comment_ctime":1672825437,"is_pvip":false,"replies":[{"id":133180,"content":"ç‚¹èµ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1672886923,"ip_address":"åŒ—äº¬","comment_id":365613,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"æœç´¢äº†ä¸‹ï¼Œä¸»è¦æ˜¯å­˜åœ¨è„‘è£‚çš„é—®é¢˜ï¼Œå°±æ˜¯åœ¨å¢å‡é›†ç¾¤æˆå‘˜åï¼Œåˆ°åº•æœ‰å“ªäº›æˆå‘˜ï¼Œæ–°è€èŠ‚ç‚¹çœ‹åˆ°çš„ç»“æœä¼šä¸ä¸€æ ·ï¼Œä»è€Œåˆ°å¯¼è‡´leaderé€‰ä¸¾å‡ºé”™ã€‚","like_count":2,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598515,"discussion_content":"ç‚¹èµ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1672886923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363559,"user_name":"Layne","can_delete":false,"product_type":"c1","uid":1479934,"ip_address":"åŒ—äº¬","ucode":"1FEAACD900AB39","user_header":"https://static001.geekbang.org/account/avatar/00/16/94/fe/5fbf1bdc.jpg","comment_is_top":false,"comment_ctime":1669809763,"is_pvip":true,"replies":[{"id":132131,"content":"ä½ å¥½ï¼ŒLayneï¼Œä¸€èˆ¬æ¥è¯´ä¸»ä»åŒæ­¥ï¼Œéƒ½æ˜¯ä»ä¸»åº“å¤åˆ¶å˜æ›´è¿‡ç¨‹åˆ°ä»åº“æ‰§è¡Œï¼Œæ‰€ä»¥çœ‹ä»åº“åŒæ­¥çŠ¶æ€çš„é”™è¯¯åŸå› å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1669814385,"ip_address":"åŒ—äº¬","comment_id":363559,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"è€å¸ˆï¼Œä¸»ä»ä¹‹é—´é€šä¿¡ä¸ä¸Šçš„æ—¶å€™ï¼Œæ€ä¹ˆç¡®å®šæ˜¯ä¸»è¿˜æ˜¯ä»å‡ºé—®é¢˜äº†å‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸‹ä¸»ä»åˆ†åˆ«ä¼šåšäº›å•¥æ“ä½œå‘€ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595194,"discussion_content":"ä½ å¥½ï¼ŒLayneï¼Œä¸€èˆ¬æ¥è¯´ä¸»ä»åŒæ­¥ï¼Œéƒ½æ˜¯ä»ä¸»åº“å¤åˆ¶å˜æ›´è¿‡ç¨‹åˆ°ä»åº“æ‰§è¡Œï¼Œæ‰€ä»¥çœ‹ä»åº“åŒæ­¥çŠ¶æ€çš„é”™è¯¯åŸå› å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669814385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":2314165,"avatar":"https://static001.geekbang.org/account/avatar/00/23/4f/b5/bd6140a5.jpg","nickname":"ARM","note":"","ucode":"788FD0DBD39B94","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":599125,"discussion_content":"redisé›†ç¾¤ä¸­æ˜¯ä»èŠ‚ç‚¹æ¥æ”¶ä¸åˆ°ä¸»èŠ‚ç‚¹çš„å¿ƒè·³ï¼Œè¿›è€Œå‘å…¶ä»–èŠ‚ç‚¹å‘èµ·ä¸»èŠ‚ç‚¹æ˜¯å¦æ•…éšœçš„è¯·æ±‚ï¼Œå¤šæ•°èŠ‚ç‚¹è¿”å›ä¸»èŠ‚ç‚¹æ•…éšœåˆ™ä¼šå‘èµ·é€‰ä¸¾ï¼Œå¦åˆ™å°±ä¸å‘èµ·é€‰ä¸¾ã€‚è¿™é‡Œæ˜¯ä¸»ä»æ¶æ„åº”è¯¥æ˜¯è¦ä¾èµ–æ•°æ®åº“çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673344091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":595194,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":599125,"extra":""},{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2314165,"avatar":"https://static001.geekbang.org/account/avatar/00/23/4f/b5/bd6140a5.jpg","nickname":"ARM","note":"","ucode":"788FD0DBD39B94","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599532,"discussion_content":"ä¸ä¸€å®šï½åˆ†å¸ƒå¼æ•°æ®æœåŠ¡ä¸­ï¼Œæ•°æ®æœåŠ¡åŸºæœ¬éƒ½æ˜¯ä¸»ä»æ¨¡å¼çš„åˆ†ç‰‡å‰¯æœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673577018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599125,"ip_address":"åŒ—äº¬","group_id":0},"score":599532,"extra":""}]}]},{"had_liked":false,"id":362024,"user_name":"Geek_499240","can_delete":false,"product_type":"c1","uid":2276485,"ip_address":"åŒ—äº¬","ucode":"77C1E75753A9D7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLFTXb42lNxJQAZOmDicxP5iaOsUTkj1vtH9P53Mo0u7jlvUwrpJ54noOGPEEgLozZCbuIavB99bJtw/132","comment_is_top":false,"comment_ctime":1668070484,"is_pvip":false,"replies":[{"id":131685,"content":"ä½ å¥½ï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„æé—®ï¼Œä½ é—®åˆ°äº†ä¸€ä¸ªé¢å¤–çš„çŸ¥è¯†ç‚¹ï¼Œè¿™é‡Œæ–°é€‰ä¸¾å‡ºæ¥çš„leaderåœ¨é€‰ä¸¾æˆåŠŸåä¼šç«‹åˆ»å†™ä¸€ä¸ªno-opæ—¥å¿—ï¼Œè¿™ä¸ªæ“ä½œä¼šæŠŠä¹‹å‰æ²¡æœ‰commitçš„éƒ½æäº¤ã€‚è¿™ä¹ˆåšæ˜¯å› ä¸ºä¸æƒ³è®©æ–°leaderæäº¤å‰ä»»çš„å†…å®¹ï¼Œä¼šäº§ç”Ÿæ•°æ®å†²çªç­‰é—®é¢˜ã€‚no-opæ˜¯ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå¯ä»¥æŸ¥ä¸€æŸ¥","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1668074835,"ip_address":"åŒ—äº¬","comment_id":362024,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"å¦‚æœleaderæ”¶åˆ°äº†ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶æŠŠæ—¥å¿—åŒæ­¥åˆ°äº†å¤§éƒ¨åˆ†çš„followerä¸Šï¼Œå¦‚æœleader è¿˜æ²¡æ¥å¾—åŠcommitå°±å¥”æºƒäº†ï¼Œé‚£ä¹ˆæ–°é€‰ä¸¾å‡ºæ¥çš„leaderä¼šcommitè¿™æ¡æ¶ˆæ¯å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2276485,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLFTXb42lNxJQAZOmDicxP5iaOsUTkj1vtH9P53Mo0u7jlvUwrpJ54noOGPEEgLozZCbuIavB99bJtw/132","nickname":"Geek_499240","note":"","ucode":"77C1E75753A9D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593671,"discussion_content":"no-opä¼šæŠŠä¹‹å‰æ²¡æœ‰commitçš„éƒ½æäº¤ï¼Œä»å®¢æˆ·ç«¯è§†è§’æ¥çœ‹ï¼Œç›¸å½“äºä¹‹å‰å†™å¤±è´¥çš„æ“ä½œåˆå˜æˆåŠŸäº†ï¼Œæ˜¯ä¸æ˜¯ä¸ç¬¦åˆä¸€è‡´æ€§çš„åŸåˆ™ï¼Ÿæ¯”å¦‚å®¢æˆ·ç«¯å‘äº†ä¸ªè¯·æ±‚set x = 1ï¼Œç„¶åleaderåœ¨åŒæ­¥åˆ°å¤§éƒ¨åˆ†followeråcrashäº†ï¼Œè¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯ä»¥ä¸ºå†™å¤±è´¥äº†ã€‚ä½†æ˜¯rafté‡æ–°é€‰ä¸¾çš„leaderåˆæŠŠset x=1è¿™æ¡è®°å½•commitäº†ï¼Œç„¶åå®¢æˆ·ç«¯æŸ¥è¯¢xï¼Œå‘ç°xå˜æˆäº†1ã€‚ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1668429723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2276485,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLFTXb42lNxJQAZOmDicxP5iaOsUTkj1vtH9P53Mo0u7jlvUwrpJ54noOGPEEgLozZCbuIavB99bJtw/132","nickname":"Geek_499240","note":"","ucode":"77C1E75753A9D7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593945,"discussion_content":"åŒæ—¶è¿™ä¸ªé—®é¢˜ç‰µæ‰¯åˆ° å¹½çµå¤ç° è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªåœ¨ç®—æ³•è¡¥ä¸ä¸­æœ‰ä¿®å¤","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1668666624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":593671,"ip_address":"åŒ—äº¬","group_id":0},"score":593945,"extra":""}]},{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593310,"discussion_content":"ä½ å¥½ï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„æé—®ï¼Œä½ é—®åˆ°äº†ä¸€ä¸ªé¢å¤–çš„çŸ¥è¯†ç‚¹ï¼Œè¿™é‡Œæ–°é€‰ä¸¾å‡ºæ¥çš„leaderåœ¨é€‰ä¸¾æˆåŠŸåä¼šç«‹åˆ»å†™ä¸€ä¸ªno-opæ—¥å¿—ï¼Œè¿™ä¸ªæ“ä½œä¼šæŠŠä¹‹å‰æ²¡æœ‰commitçš„éƒ½æäº¤ã€‚è¿™ä¹ˆåšæ˜¯å› ä¸ºä¸æƒ³è®©æ–°leaderæäº¤å‰ä»»çš„å†…å®¹ï¼Œä¼šäº§ç”Ÿæ•°æ®å†²çªç­‰é—®é¢˜ã€‚no-opæ˜¯ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå¯ä»¥æŸ¥ä¸€æŸ¥","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1668074836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361449,"user_name":"HappyHasson","can_delete":false,"product_type":"c1","uid":2911084,"ip_address":"åŒ—äº¬","ucode":"B84CC43E349CFA","user_header":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","comment_is_top":false,"comment_ctime":1667524985,"is_pvip":false,"replies":[{"id":131463,"content":"ä½ å¥½ï¼ŒHappyHassonï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„ç•™è¨€ï¼Œæ˜¯çš„ï¼è¿™ä¸ªæœºåˆ¶æ˜¯ä¸ºäº†ä¿è¯ï¼Œæ‹¥æœ‰æœ€æ–°è¿›åº¦çš„leaderèƒ½å¤Ÿè¢«é€‰ä¸­ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æŸå¤±ï¼Œå› ä¸ºleaderæ˜¯å¯ä»¥å¼ºåˆ¶å…¶ä»–followerå’Œä»–ä¸€è‡´çš„ï¼Œè¿™å°±å¯¼è‡´å¦‚æœleaderè¿›åº¦ä¸å¦‚å…¶ä»–followerä¼šå¼ºåˆ¶è¦†ç›–ä¸¢å¤±æ‰è¿™ä¸ªå·®å¼‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1667528187,"ip_address":"åŒ—äº¬","comment_id":361449,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"æ”¶åˆ°æŠ•ç¥¨ç”³è¯·çš„æœåŠ¡ï¼Œå¹¶ä¸”ç”³è¯·æœåŠ¡ï¼ˆå³â€œå‘é€æŠ•ç¥¨ç”³è¯·çš„æœåŠ¡â€ï¼‰çš„ä»»æœŸå’ŒåŒæ­¥è¿›åº¦éƒ½æ¯”å®ƒè¶…å‰æˆ–ç›¸åŒï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæŠ•ç”³è¯·æœåŠ¡ä¸€ç¥¨ \n\nåŸæ–‡ä¸­è¿™å¥è¯æ„æ€æ˜¯ï¼Œå¦‚æœä¸€ä¸ªfolloweræ”¶åˆ°äº†è‡ªèæŠ•ç¥¨è¯·æ±‚ï¼Œä»»æœŸæ¯”è‡ªå·±å¤§ä½†æ˜¯åŒæ­¥è¿›åº¦æ²¡æœ‰è‡ªå·±å¤§ï¼Œè¿™æ—¶å€™ä¼šæ‹’ç»æŠ•ç¥¨ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592604,"discussion_content":"ä½ å¥½ï¼ŒHappyHassonï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„ç•™è¨€ï¼Œæ˜¯çš„ï¼è¿™ä¸ªæœºåˆ¶æ˜¯ä¸ºäº†ä¿è¯ï¼Œæ‹¥æœ‰æœ€æ–°è¿›åº¦çš„leaderèƒ½å¤Ÿè¢«é€‰ä¸­ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æŸå¤±ï¼Œå› ä¸ºleaderæ˜¯å¯ä»¥å¼ºåˆ¶å…¶ä»–followerå’Œä»–ä¸€è‡´çš„ï¼Œè¿™å°±å¯¼è‡´å¦‚æœleaderè¿›åº¦ä¸å¦‚å…¶ä»–followerä¼šå¼ºåˆ¶è¦†ç›–ä¸¢å¤±æ‰è¿™ä¸ªå·®å¼‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667528187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2911084,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","nickname":"HappyHasson","note":"","ucode":"B84CC43E349CFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592659,"discussion_content":"æˆ‘è§‰å¾—è¿™ä¹ˆåšä¼šæœ‰ä¸€ä¸ªé—®é¢˜ \næ¯ä¸ªfollowerçš„åŒæ­¥logè¿›åº¦ä¸ä¸€æ ·ï¼Œè€Œä¸”å‘èµ·æŠ•ç¥¨è¯·æ±‚ä¹Ÿæ˜¯éšæœºçš„ï¼Œè°å…ˆå‘ç°leaderæŒ‚äº†è°å…ˆå‘èµ·ï¼Œæ‰€ä»¥ç½‘ç»œæ²¡é‚£ä¹ˆå¥½çš„æƒ…å†µä¸‹ï¼Œå¹³å‡ä¸‹æ¥å¯èƒ½æ˜¯ å¤šè½®æŠ•ç¥¨æ‰èƒ½é€‰ä¸»æˆåŠŸï¼Œè¿™æ ·ä¸ä¼šå¾ˆæ…¢å— ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667564725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2911084,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","nickname":"HappyHasson","note":"","ucode":"B84CC43E349CFA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593920,"discussion_content":"å®é™…æ•ˆæœç¡®å®ä¼šå¾ˆæ…¢ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668657283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":592659,"ip_address":"åŒ—äº¬","group_id":0},"score":593920,"extra":""}]}]},{"had_liked":false,"id":378806,"user_name":"è´ºå­","can_delete":false,"product_type":"c1","uid":2076283,"ip_address":"åŒ—äº¬","ucode":"A64DC9D9CF7CCD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","comment_is_top":false,"comment_ctime":1690801686,"is_pvip":false,"replies":[{"id":138037,"content":"ä½ å¥½ï¼Œè´ºå­ï¼Œè¿™é‡Œé¢æœ‰å‡ ç‚¹ï¼šé¦–å…ˆï¼Œåœ¨ Raft ç®—æ³•ä¸­ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼ŒFollower åœ¨æ”¶åˆ°æŸ¥è¯¢è¯·æ±‚æ—¶ä¼šè¯¢é—® Leader å½“å‰æœ€æ–°çš„ commit çš„ log indexã€‚å¦‚æœè¿™ä¸ª log index å¤§äº Follower åŒæ­¥çš„è¿›åº¦ï¼Œè¯´æ˜ Follower çš„æœ¬åœ°æ•°æ®ä¸æ˜¯æœ€æ–°çš„ã€‚è¿™æ—¶å€™ Follower ä¼šä» Leader è·å–æœ€æ–°çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¿™å°±æ˜¯å‰é¢æåˆ°çš„å¦‚æœæƒ³è¦æœ€æ–°çš„æ•°æ®ã€‚\n\næ›´è¿›ä¸€æ­¥æé«˜æ€§èƒ½ä¸Šæ¥è®²ï¼ŒRaft ç®—æ³•ä¹Ÿå¯ä»¥é‡‡ç”¨äº†ç­‰å¾… Leader commit log index çš„æœºåˆ¶æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚Follower åœ¨å¤„ç†è¯»å–è¯·æ±‚æ—¶ï¼Œä¼šç­‰å¾… Leader æäº¤çš„æ—¥å¿—è¾¾åˆ°ä¸€å®šçš„è¿›åº¦åæ‰è¿”å›æ•°æ®ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿è¯»å–çš„æ•°æ®æ˜¯å·²ç»æäº¤å¹¶è¢«å¤§å¤šæ•°èŠ‚ç‚¹æ¥å—çš„æ•°æ®ï¼Œä»è€Œå®ç°å¼ºä¸€è‡´æ€§ã€‚\n\nå¯ä»¥è¯´Raft ç®—æ³•é€šè¿‡ä¸¤ç§æ–¹å¼æ¥ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼šFollower ä¸»åŠ¨å‘ Leader æŸ¥è¯¢æœ€æ–°çš„ commit log indexï¼Œä»¥åŠç­‰å¾… Leader çš„ commit log index è¾¾åˆ°ä¸€å®šè¿›åº¦åæ‰è¿”å›æ•°æ®ã€‚è¿™äº›æœºåˆ¶ç¡®ä¿äº†æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥ä¸€å®šçš„ä»£ä»·å’Œå»¶è¿Ÿã€‚\n\nå¦å¤–å…³äº TiDB çš„æ”¯æŒ index readï¼Œè¿™æ˜¯å› ä¸º TiDB åœ¨ Raft ç®—æ³•çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–å’Œæ”¹è¿›ï¼Œä»¥æé«˜è¯»å–æ€§èƒ½å’Œå¹¶å‘æ€§ã€‚è¿™ä¸ Raft ç®—æ³•æœ¬èº«ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æœºåˆ¶æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1690881889,"ip_address":"åŒ—äº¬","comment_id":378806,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼Œå°±æ˜¯ Follower åœ¨æ”¶åˆ°æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œä¼šé¡ºä¾¿é—®ä¸€ä¸‹ Leader å½“å‰æœ€æ–° commit çš„ log index æ˜¯ä»€ä¹ˆã€‚å¦‚æœè¿™ä¸ª log index å¤§äºå½“å‰ Follower åŒæ­¥çš„è¿›åº¦ï¼Œå°±è¯´æ˜ Follower çš„æœ¬åœ°æ•°æ®ä¸æ˜¯æœ€æ–°çš„ï¼Œè¿™æ—¶å€™ Follower å°±ä¼šä» Leader è·å–æœ€æ–°çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å¯è§ï¼Œä¿è¯æ•°æ®å¼ºä¸€è‡´æ€§çš„ä»£ä»·å¾ˆå¤§ã€‚è¿™é‡Œå’Œåé¢çš„æ„Ÿè§‰çŸ›ç›¾å‘€ï¼åˆ°åº•raftæ˜¯ä»€ä¹ˆæœºåˆ¶å‘€ï¼Œåé¢è¯´wait indexï¼tidbå°±æ˜¯æ”¯æŒindx readï¼Œç±»ä¼¼","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624732,"discussion_content":"ä½ å¥½ï¼Œè´ºå­ï¼Œè¿™é‡Œé¢æœ‰å‡ ç‚¹ï¼šé¦–å…ˆï¼Œåœ¨ Raft ç®—æ³•ä¸­ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼ŒFollower åœ¨æ”¶åˆ°æŸ¥è¯¢è¯·æ±‚æ—¶ä¼šè¯¢é—® Leader å½“å‰æœ€æ–°çš„ commit çš„ log indexã€‚å¦‚æœè¿™ä¸ª log index å¤§äº Follower åŒæ­¥çš„è¿›åº¦ï¼Œè¯´æ˜ Follower çš„æœ¬åœ°æ•°æ®ä¸æ˜¯æœ€æ–°çš„ã€‚è¿™æ—¶å€™ Follower ä¼šä» Leader è·å–æœ€æ–°çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¿™å°±æ˜¯å‰é¢æåˆ°çš„å¦‚æœæƒ³è¦æœ€æ–°çš„æ•°æ®ã€‚\n\næ›´è¿›ä¸€æ­¥æé«˜æ€§èƒ½ä¸Šæ¥è®²ï¼ŒRaft ç®—æ³•ä¹Ÿå¯ä»¥é‡‡ç”¨äº†ç­‰å¾… Leader commit log index çš„æœºåˆ¶æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚Follower åœ¨å¤„ç†è¯»å–è¯·æ±‚æ—¶ï¼Œä¼šç­‰å¾… Leader æäº¤çš„æ—¥å¿—è¾¾åˆ°ä¸€å®šçš„è¿›åº¦åæ‰è¿”å›æ•°æ®ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿è¯»å–çš„æ•°æ®æ˜¯å·²ç»æäº¤å¹¶è¢«å¤§å¤šæ•°èŠ‚ç‚¹æ¥å—çš„æ•°æ®ï¼Œä»è€Œå®ç°å¼ºä¸€è‡´æ€§ã€‚\n\nå¯ä»¥è¯´Raft ç®—æ³•é€šè¿‡ä¸¤ç§æ–¹å¼æ¥ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼šFollower ä¸»åŠ¨å‘ Leader æŸ¥è¯¢æœ€æ–°çš„ commit log indexï¼Œä»¥åŠç­‰å¾… Leader çš„ commit log index è¾¾åˆ°ä¸€å®šè¿›åº¦åæ‰è¿”å›æ•°æ®ã€‚è¿™äº›æœºåˆ¶ç¡®ä¿äº†æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥ä¸€å®šçš„ä»£ä»·å’Œå»¶è¿Ÿã€‚\n\nå¦å¤–å…³äº TiDB çš„æ”¯æŒ index readï¼Œè¿™æ˜¯å› ä¸º TiDB åœ¨ Raft ç®—æ³•çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–å’Œæ”¹è¿›ï¼Œä»¥æé«˜è¯»å–æ€§èƒ½å’Œå¹¶å‘æ€§ã€‚è¿™ä¸ Raft ç®—æ³•æœ¬èº«ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æœºåˆ¶æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690881890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362448,"user_name":"å¥•","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"åŒ—äº¬","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1668524453,"is_pvip":false,"replies":[{"id":131884,"content":"ä½ å¥½ï¼Œä¸€æ­¥ï¼ŒFolloweråªä¼šæ”¶åˆ°leaderçš„å¿ƒè·³ï¼ŒåŒæ—¶ä¸€åŠæ˜¯æŒ‡leaderè‡ªå·±ç»Ÿè®¡æœ‰ä¸€åŠFolloweræ¶ˆå¤±å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1668758588,"ip_address":"åŒ—äº¬","comment_id":362448,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"å¦‚æœé›†ç¾¤ä¸­çš„ Follower èŠ‚ç‚¹åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ° Leader çš„å¿ƒè·³\n----------\nè¿™é‡Œæ˜¯ä¸æ˜¯æœ‰æ•°é‡çš„é™åˆ¶ï¼Œæ¯”å¦‚è¯´è‡³å°‘ä¸€åŠçš„ Follow èŠ‚ç‚¹ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594067,"discussion_content":"ä½ å¥½ï¼Œä¸€æ­¥ï¼ŒFolloweråªä¼šæ”¶åˆ°leaderçš„å¿ƒè·³ï¼ŒåŒæ—¶ä¸€åŠæ˜¯æŒ‡leaderè‡ªå·±ç»Ÿè®¡æœ‰ä¸€åŠFolloweræ¶ˆå¤±å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668758588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"å¥•","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":594080,"discussion_content":"ä¸€ä¸ªFollowerèŠ‚ç‚¹æ”¶ä¸åˆ°å¿ƒè·³å°±å¼€å§‹é€‰ä¸¾ï¼Œå¦‚æœåªæ˜¯è¿™ä¸ªfollowerå½“æ—¶çš„ç½‘ç»œæœ‰é—®é¢˜å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668761228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":594067,"ip_address":"å¹¿ä¸œ","group_id":0},"score":594080,"extra":""},{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"å¥•","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599533,"discussion_content":"é‚£ä¹ˆä»–å¾—ä¸åˆ°åˆ«äººçš„æŠ•ç¥¨ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673577121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":594080,"ip_address":"åŒ—äº¬","group_id":0},"score":599533,"extra":""}]}]},{"had_liked":false,"id":362342,"user_name":"åƒé”¤ç™¾ç‚¼é¢†æ‚Ÿä¹‹æé™","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"åŒ—äº¬","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1668426307,"is_pvip":false,"replies":[{"id":131826,"content":"ä½ å¥½ï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„ç•™è¨€ï¼Œè¿˜æœ‰ä¸€äº›ä½†æ˜¯æ²¡æœ‰ä»–å¤æ‚ï¼Œæ¯”å¦‚gossip","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1668557591,"ip_address":"åŒ—äº¬","comment_id":362342,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"å¯ä»¥è¯´äº†è§£äº† Raftï¼Œå°±ç›¸å½“äºäº†è§£äº†åˆ†å¸ƒå¼å¼ºä¸€è‡´æ€§æ•°æ®æœåŠ¡çš„åŠå£æ±Ÿå±±ã€‚å¦ä¸€åŠæ˜¯ZABå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593805,"discussion_content":"ä½ å¥½ï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„ç•™è¨€ï¼Œè¿˜æœ‰ä¸€äº›ä½†æ˜¯æ²¡æœ‰ä»–å¤æ‚ï¼Œæ¯”å¦‚gossip","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668557591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362137,"user_name":"Mr.Tree","can_delete":false,"product_type":"c1","uid":2704444,"ip_address":"åŒ—äº¬","ucode":"84712B0436EC6F","user_header":"https://static001.geekbang.org/account/avatar/00/29/44/3c/8bb9e8b4.jpg","comment_is_top":false,"comment_ctime":1668209200,"is_pvip":false,"replies":[{"id":131726,"content":"ä½ å¥½ï¼ŒMr.Treeï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„ç–‘é—®ï¼Œäº‹å®ä¸Šå¤§éƒ¨åˆ†äº¤æ˜“ç³»ç»Ÿä¸ºäº†ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´éƒ½æ˜¯ç”¨æœ¬åœ°ä¸»åº“å»åšçš„ï¼Œå½“è¿›è¡Œäº¤æ˜“çš„æ—¶å€™è·¨åŒºåŸŸé€šè®¯åˆ°æ ¸å¿ƒæœºæˆ¿å»åšäº¤æ˜“ã€‚ä½ çš„å¼€æˆ·è¡Œå†³å®šäº†ä½ çš„æ•°æ®åœ¨å“ªé‡Œåšå†³ç­–ï¼Œåœ¨ä¸‹ä¸€èŠ‚è¯¾ä½ ä¼šçœ‹åˆ°Raftç®—æ³•ï¼Œè¿™é‡Œä¼šå¯¹è¿™ä¸ªç–‘é—®æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1668223983,"ip_address":"åŒ—äº¬","comment_id":362137,"utype":1}],"discussion_count":0,"race_medal":0,"score":2,"product_id":100309001,"comment_content":"å¯¹äºRaftä¿è¯æ•°æ®è¯»å–çš„å¼ºä¸€è‡´æ€§ï¼Œfollowerçš„è¯»å–éƒ½ä¼šå‘leaderå‘é€ä¸€ä¸ªç‰ˆæœ¬ç¡®è®¤è¯·æ±‚ï¼Œå¦‚æœæ˜¯é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œleaderçš„å‹åŠ›å²‚ä¸æ˜¯ä¼šå¾ˆå¤§ï¼Œä¼šä¸ä¼šæŠŠå®ƒæ‰“å´©ï¼Œæˆ–è€…å®¢æˆ·ç«¯å‡ºç°å»¶è¿Ÿï¼Œå¯¹äºè¿™ç§ä¸»ä»ç»“æ„ç³»ç»Ÿï¼›å‡ºç°å†™å†²çªæ˜¯å¦‚ä½•å¤„ç†å‘¢ï¼Ÿæƒ³åˆ°ä¸€ä¸ªåœºæ™¯ï¼šå¼ ä¸‰äººåœ¨å›½å¤–ï¼Œé“¶è¡Œè´¦æˆ·é‡Œå­˜æœ‰1wï¼Œé€šè¿‡æ‰‹æœºé“¶è¡ŒAPPè½¬å¸ç»™æå››8kï¼Œäºæ­¤åŒæ—¶ï¼Œå¼ ä¸‰åª³å¦‡åœ¨å›½å†…é€šè¿‡ATMæœºæŸ¥è¯¢è´¦æˆ·1wï¼Œæƒ³è¦å–5kï¼Œè¿™ç§åŒæ—¶å‘ç”Ÿï¼Œå¯¹äºè¿™ç§å¼ºä¸€è‡´æ€§è¦æ±‚ç³»ç»Ÿä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ","like_count":1},{"had_liked":false,"id":362004,"user_name":"OAuth","can_delete":false,"product_type":"c1","uid":1234664,"ip_address":"åŒ—äº¬","ucode":"691F528EB533B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/e8/50b58ed8.jpg","comment_is_top":false,"comment_ctime":1668063376,"is_pvip":false,"replies":[{"id":131827,"content":"ä½ å¥½ï¼Œoauthï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„æ€è€ƒï¼ŒåŒæ—¶è¿™ä¸ªèŠ‚ç‚¹ä¸èƒ½å‚åŠ ç«é€‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1668557630,"ip_address":"åŒ—äº¬","comment_id":362004,"utype":1}],"discussion_count":1,"race_medal":1,"score":3,"product_id":100309001,"comment_content":"å•èŠ‚ç‚¹å˜æ›´ï¼Œä¸€æ¬¡å˜æ›´ä¸€ä¸ªèŠ‚ç‚¹","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593806,"discussion_content":"ä½ å¥½ï¼Œoauthï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„æ€è€ƒï¼ŒåŒæ—¶è¿™ä¸ªèŠ‚ç‚¹ä¸èƒ½å‚åŠ ç«é€‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668557630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361664,"user_name":"èŠ±èŠ±å¤§è„¸çŒ«","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"åŒ—äº¬","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1667745769,"is_pvip":true,"replies":[{"id":131885,"content":"ä½ å¥½ï¼ŒèŠ±èŠ±å¤§è„¸çŒ«ï¼Œæœ‰è¿™æ–¹é¢çš„åŸå› ï¼ŒåŒæ—¶å¦‚æœåŠ çš„èŠ‚ç‚¹è¿‡å¤šä¹Ÿä¼šé€ æˆé€‰ä¸¾å‡ºç°é—®é¢˜ï½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1668758624,"ip_address":"åŒ—äº¬","comment_id":361664,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100309001,"comment_content":"æ€è€ƒé¢˜ä¸­å¢åŠ èŠ‚ç‚¹å› ä¸ºéœ€è¦åŒæ­¥çš„æ•°æ®é‡ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ ç‰¹æ®Šå»åšï¼Œä»¥é˜²å½±å“é›†ç¾¤å¯¹å¤–æä¾›çš„æœåŠ¡ç¨³å®šæ€§ã€‚å‡å°‘èŠ‚ç‚¹éœ€è¦ç‰¹æ®Šå¤„ç†æ˜¯ä¸æ˜¯æ€•ç”±äºè„‘è£‚å¯¼è‡´çš„é€‰ä¸¾å¼‚å¸¸ï¼Œç›´æ¥å¯¼è‡´æœåŠ¡å¯¹å¤–ä¸å¯ç”¨ï¼Œä¸çŸ¥é“è¿™ä¹ˆç†è§£å¯¹ä¸å¯¹ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594069,"discussion_content":"ä½ å¥½ï¼ŒèŠ±èŠ±å¤§è„¸çŒ«ï¼Œæœ‰è¿™æ–¹é¢çš„åŸå› ï¼ŒåŒæ—¶å¦‚æœåŠ çš„èŠ‚ç‚¹è¿‡å¤šä¹Ÿä¼šé€ æˆé€‰ä¸¾å‡ºç°é—®é¢˜ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668758624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361567,"user_name":"boydenyol","can_delete":false,"product_type":"c1","uid":2019755,"ip_address":"åŒ—äº¬","ucode":"869678C332F755","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d1/ab/6e925b26.jpg","comment_is_top":false,"comment_ctime":1667637512,"is_pvip":false,"replies":[{"id":131557,"content":"ä½ å¥½ï¼Œboydenyolï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„æ€è€ƒï¼Œç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯æ‰€æœ‰followeréƒ½ä¼šæ‹’ç»ï¼Œå› ä¸ºleaderå¤±è”æœ¬èº«ä¹Ÿæ˜¯ä»£è¡¨å®ƒä¸æ˜¯å¾ˆç¨³å®šï¼Œä½œä¸ºleaderå¯èƒ½å­˜åœ¨éšæ‚£ã€‚å¦å¤–ï¼Œä¸èƒ½ç»§ç»­åšleaderï¼Œå› ä¸ºæ— æ³•ç¡®è®¤åˆ«äººåœ¨è¿™ä¸ªæœŸé—´å·²ç»å¹¿æ’­è‡ªå·±æ˜¯leaderäº†ï¼Œä¼šå‡ºç°è„‘è£‚ï¼Œæ‰€ä»¥ç®€å•ç²—æš´ä¸€äº›","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1667792519,"ip_address":"åŒ—äº¬","comment_id":361567,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100309001,"comment_content":"ä½ å¥½ï¼Œè€å¸ˆï¼è¯·é—®ï¼Œæ–‡ä¸­æåˆ° â€œåœ¨é€‰ä¸¾æœŸé—´ï¼Œè‹¥æœ‰æœåŠ¡æ”¶åˆ°ä¸Šä¸€ä»» Leader çš„å¿ƒè·³ï¼Œåˆ™ä¼šæ‹’ç»â€ ï¼Œè¿™ä»£è¡¨æ‰€æœ‰çš„Followeréƒ½ä¼šæ‹’ç»å—ï¼Ÿ å¦‚æœä¸Šä¸€ä»»Leaderä»…ä»…æ˜¯å› ä¸ºç½‘ç»œé˜»å¡å¯¼è‡´å¿ƒè·³å¼‚å¸¸ï¼ŒåŒæ—¶åœ¨é€‰ä¸¾Leaderå®Œæˆä¹‹å‰æ­£å¸¸äº†ï¼Œæ˜¯å¦è¿˜èƒ½å†åšLeaderï¼Œæ¯•ç«ŸLeaderçš„æ•°æ®æ˜¯æœ€æ–°çš„ï¼Œè¿˜æ˜¯å¿…é¡»å¾—é€‰ä¸¾å…¶å®ƒLeaderï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592878,"discussion_content":"ä½ å¥½ï¼Œboydenyolï¼Œå¾ˆé«˜å…´æ”¶åˆ°ä½ çš„æ€è€ƒï¼Œç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯æ‰€æœ‰followeréƒ½ä¼šæ‹’ç»ï¼Œå› ä¸ºleaderå¤±è”æœ¬èº«ä¹Ÿæ˜¯ä»£è¡¨å®ƒä¸æ˜¯å¾ˆç¨³å®šï¼Œä½œä¸ºleaderå¯èƒ½å­˜åœ¨éšæ‚£ã€‚å¦å¤–ï¼Œä¸èƒ½ç»§ç»­åšleaderï¼Œå› ä¸ºæ— æ³•ç¡®è®¤åˆ«äººåœ¨è¿™ä¸ªæœŸé—´å·²ç»å¹¿æ’­è‡ªå·±æ˜¯leaderäº†ï¼Œä¼šå‡ºç°è„‘è£‚ï¼Œæ‰€ä»¥ç®€å•ç²—æš´ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667792519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361294,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"åŒ—äº¬","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1667388823,"is_pvip":false,"replies":[{"id":131409,"content":"ä½ å¥½ï¼Œpeterï¼Œè¿™é‡Œæ˜¯æŒ‡ä¿®æ”¹æ•°æ®æŒ‡ä»¤ï¼Œä»£è¡¨ç»™aè®¾ç½®ä»–çš„å€¼æ˜¯7","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1667405829,"ip_address":"åŒ—äº¬","comment_id":361294,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100309001,"comment_content":"è¯·é—®ï¼šcmd:a&lt;7ï¼Œè¿™é‡Œçš„ a &lt; -7æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592442,"discussion_content":"ä½ å¥½ï¼Œpeterï¼Œè¿™é‡Œæ˜¯æŒ‡ä¿®æ”¹æ•°æ®æŒ‡ä»¤ï¼Œä»£è¡¨ç»™aè®¾ç½®ä»–çš„å€¼æ˜¯7","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667405829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388153,"user_name":"é»„å ƒå¥","can_delete":false,"product_type":"c1","uid":2037522,"ip_address":"å¹¿ä¸œ","ucode":"B4AD5250A41B3A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/YbUxEV3741vKZAiasOXggWucQbmicJwIjg3HDE58oyibYXbSop9QQFqZ7X6OhynDoo6rDHwzK8njSeJjN9hx3pJXg/132","comment_is_top":false,"comment_ctime":1709520486,"is_pvip":false,"replies":[{"id":141317,"content":"ä½ å¥½ï¼Œè¿™æ ·å¯ä»¥æ£€æµ‹å…¶ä»–èŠ‚ç‚¹å¥åº·æƒ…å†µå’ŒåŒæ­¥æƒ…å†µï¼Œä»¥åŠé˜²æ­¢è„‘è£‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1709532995,"ip_address":"åŒ—äº¬","comment_id":388153,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100309001,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼å¦‚æœæ‰€æœ‰æœåŠ¡éƒ½æ²¡æœ‰è·å–åˆ°å¤šæ•°ç¥¨ï¼ˆä¸‰åˆ†ä¹‹äºŒä»¥ä¸ŠæœåŠ¡èŠ‚ç‚¹çš„æŠ•ç¥¨ï¼‰  ï¼Œ ä¸æ˜¯è¿‡åŠä»¥ä¸Šå°±å¯ä»¥äº†å—ï¼Ÿ   å¦‚æœæ˜¯9ä¸ªå‰¯æœ¬æœåŠ¡ï¼Œ5ä¸ªå‰¯æœ¬æœåŠ¡è¾¾æˆä¸€è‡´å°±å¯ä»¥äº†ï¼Œä¸ç”¨6ä¸ªæœåŠ¡è¾¾æˆä¸€è‡´\n                         ","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638382,"discussion_content":"ä½ å¥½ï¼Œè¿™æ ·å¯ä»¥æ£€æµ‹å…¶ä»–èŠ‚ç‚¹å¥åº·æƒ…å†µå’ŒåŒæ­¥æƒ…å†µï¼Œä»¥åŠé˜²æ­¢è„‘è£‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709532995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386507,"user_name":"å¾®ç¬‘çš„èƒ¡åœ†åœ†","can_delete":false,"product_type":"c1","uid":3583637,"ip_address":"åŒ—äº¬","ucode":"E28FABD51FAFD0","user_header":"https://static001.geekbang.org/account/avatar/00/36/ae/95/4a0b0e97.jpg","comment_is_top":false,"comment_ctime":1704982622,"is_pvip":false,"replies":[{"id":140893,"content":"ä½ å¥½ï¼Œæ„Ÿè°¢åˆ†äº«ï½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1705023867,"ip_address":"åŒ—äº¬","comment_id":386507,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100309001,"comment_content":"å¯ä»¥æ¨èæœ‰æ—¶é—´æˆ–è€…æœ‰ç²¾åŠ›çš„å¯ä»¥å®Œæˆ6.824ä¸­çš„raftå®ç° https:&#47;&#47;pdos.csail.mit.edu&#47;6.824&#47;labs&#47;lab-raft.html","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635649,"discussion_content":"ä½ å¥½ï¼Œæ„Ÿè°¢åˆ†äº«ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705023867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385585,"user_name":"Geek_595be5","can_delete":false,"product_type":"c1","uid":3242942,"ip_address":"æ–°åŠ å¡","ucode":"5C29AC709897C0","user_header":"https://static001.geekbang.org/account/avatar/00/31/7b/be/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1702952631,"is_pvip":false,"replies":[{"id":140539,"content":"ä½ å¥½ï¼Œæ²¡é”™ï¼Œkafkaåœ¨å¾ˆæ—©ä¹‹å‰å°±æä¾›äº†å¾ˆå¥½çš„åˆ†å¸ƒå¼æ‰©å±•èƒ½åŠ›ï¼Œåœ¨ç°åœ¨ä¹Ÿæ˜¯ä¸å¯å¤šå¾—çš„é«˜ååå¯åŠ¨æ€æ‰©å®¹çš„æ ¸å¿ƒåŸºç¡€æœåŠ¡","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1703035710,"ip_address":"åŒ—äº¬","comment_id":385585,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100309001,"comment_content":"æˆ‘ä¹‹å‰çœ‹åˆ°çš„æ˜¯kafkaç”¨çš„æ˜¯zookeeperï¼Œzookeeperæ˜¯åŸºäºzabåè®®çš„ï¼Œè€Œä¸”zabåè®®æ—©äºraft","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634129,"discussion_content":"ä½ å¥½ï¼Œæ²¡é”™ï¼Œkafkaåœ¨å¾ˆæ—©ä¹‹å‰å°±æä¾›äº†å¾ˆå¥½çš„åˆ†å¸ƒå¼æ‰©å±•èƒ½åŠ›ï¼Œåœ¨ç°åœ¨ä¹Ÿæ˜¯ä¸å¯å¤šå¾—çš„é«˜ååå¯åŠ¨æ€æ‰©å®¹çš„æ ¸å¿ƒåŸºç¡€æœåŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703035710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378805,"user_name":"è´ºå­","can_delete":false,"product_type":"c1","uid":2076283,"ip_address":"åŒ—äº¬","ucode":"A64DC9D9CF7CCD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","comment_is_top":false,"comment_ctime":1690801556,"is_pvip":false,"replies":[{"id":138038,"content":"ä½ å¥½ï¼Œè´ºå­ï¼Œå…ˆç½—åˆ—ä¸€ä¸‹ï¼Œå¯¹äºè¯»å–æ•°æ®çš„å¼ºä¸€è‡´æ€§çš„ä¿è¯ï¼ŒRaftç®—æ³•ç¡®ä¿äº†åœ¨æ•°æ®åŒæ­¥æœŸé—´ï¼ŒFollowerèŠ‚ç‚¹ä¼šä¸LeaderèŠ‚ç‚¹ä¿æŒåŒæ­¥ï¼Œä»¥ç¡®ä¿Followeræä¾›çš„æ•°æ®æ˜¯æœ€æ–°çš„ã€‚å½“Followeræ”¶åˆ°æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œå®ƒä¼šå‘Leaderè¯¢é—®å½“å‰æœ€æ–°commitçš„log indexã€‚å¦‚æœè¿™ä¸ªlog indexå¤§äºFollowerå½“å‰åŒæ­¥çš„è¿›åº¦ï¼Œè¯´æ˜Followerçš„æœ¬åœ°æ•°æ®ä¸æ˜¯æœ€æ–°çš„ï¼Œæ­¤æ—¶Followerä¼šä»Leaderè·å–æœ€æ–°çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚\n\nè¿™ç§æœºåˆ¶ç¡®ä¿äº†åœ¨ä¸šåŠ¡ä½¿ç”¨æ—¶è¯»å–æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚åªè¦å‘Leaderæ­£å¸¸æäº¤æ•°æ®ä¿®æ”¹çš„æ“ä½œï¼ŒFolloweråœ¨è¯»å–æ—¶å°±èƒ½è·å–åˆ°æœ€æ–°çš„æ•°æ®ã€‚é€šè¿‡Raftçš„åŒæ­¥ç­‰å¾…Leader commit log indexçš„æœºåˆ¶ï¼Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚\n\nä»¥ä¸Šæè¿°ä¸ä¹‹å‰æåˆ°çš„å†…å®¹å¹¶ä¸çŸ›ç›¾ã€‚ä¹‹å‰çš„æè¿°æ˜¯å…³äºæ•°æ®åŒæ­¥çš„æœºåˆ¶ï¼Œè€Œè¿™é‡Œçš„æè¿°æ˜¯å…³äºå¦‚ä½•ä¿è¯åœ¨ä¸šåŠ¡ä½¿ç”¨æ—¶è¯»å–æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚é€šè¿‡Leaderçš„æ—¥å¿—åŒæ­¥å’ŒFollowerçš„æ•°æ®æŸ¥è¯¢ï¼Œå¯ä»¥ä¿è¯è¯»å–æ•°æ®çš„ä¸€è‡´æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1690881983,"ip_address":"åŒ—äº¬","comment_id":378805,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100309001,"comment_content":"ä½ å¯èƒ½ä¼šå¥½å¥‡ï¼šå¦‚ä½•åœ¨ä¸šåŠ¡ä½¿ç”¨æ—¶ä¿è¯è¯»å–æ•°æ®çš„å¼ºä¸€è‡´æ€§å‘¢ï¼Ÿå…¶å®æˆ‘ä»¬ä¹‹å‰è¯´çš„ Raft åŒæ­¥ç­‰å¾… Leader commit log index çš„æœºåˆ¶ï¼Œå·²ç»ç¡®ä¿äº†è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬åªéœ€è¦å‘ Leader æ­£å¸¸æäº¤æ•°æ®ä¿®æ”¹çš„æ“ä½œï¼ŒFollower è¯»å–æ—¶æ‹¿åˆ°çš„å°±ä¸€å®šæ˜¯æœ€æ–°çš„æ•°æ®ã€‚\nè¿™é‡Œçš„æè¿°å’Œå‰é¢çš„æè¿°ä¸çŸ›ç›¾å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624733,"discussion_content":"ä½ å¥½ï¼Œè´ºå­ï¼Œå…ˆç½—åˆ—ä¸€ä¸‹ï¼Œå¯¹äºè¯»å–æ•°æ®çš„å¼ºä¸€è‡´æ€§çš„ä¿è¯ï¼ŒRaftç®—æ³•ç¡®ä¿äº†åœ¨æ•°æ®åŒæ­¥æœŸé—´ï¼ŒFollowerèŠ‚ç‚¹ä¼šä¸LeaderèŠ‚ç‚¹ä¿æŒåŒæ­¥ï¼Œä»¥ç¡®ä¿Followeræä¾›çš„æ•°æ®æ˜¯æœ€æ–°çš„ã€‚å½“Followeræ”¶åˆ°æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œå®ƒä¼šå‘Leaderè¯¢é—®å½“å‰æœ€æ–°commitçš„log indexã€‚å¦‚æœè¿™ä¸ªlog indexå¤§äºFollowerå½“å‰åŒæ­¥çš„è¿›åº¦ï¼Œè¯´æ˜Followerçš„æœ¬åœ°æ•°æ®ä¸æ˜¯æœ€æ–°çš„ï¼Œæ­¤æ—¶Followerä¼šä»Leaderè·å–æœ€æ–°çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚\n\nè¿™ç§æœºåˆ¶ç¡®ä¿äº†åœ¨ä¸šåŠ¡ä½¿ç”¨æ—¶è¯»å–æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚åªè¦å‘Leaderæ­£å¸¸æäº¤æ•°æ®ä¿®æ”¹çš„æ“ä½œï¼ŒFolloweråœ¨è¯»å–æ—¶å°±èƒ½è·å–åˆ°æœ€æ–°çš„æ•°æ®ã€‚é€šè¿‡Raftçš„åŒæ­¥ç­‰å¾…Leader commit log indexçš„æœºåˆ¶ï¼Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚\n\nä»¥ä¸Šæè¿°ä¸ä¹‹å‰æåˆ°çš„å†…å®¹å¹¶ä¸çŸ›ç›¾ã€‚ä¹‹å‰çš„æè¿°æ˜¯å…³äºæ•°æ®åŒæ­¥çš„æœºåˆ¶ï¼Œè€Œè¿™é‡Œçš„æè¿°æ˜¯å…³äºå¦‚ä½•ä¿è¯åœ¨ä¸šåŠ¡ä½¿ç”¨æ—¶è¯»å–æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚é€šè¿‡Leaderçš„æ—¥å¿—åŒæ­¥å’ŒFollowerçš„æ•°æ®æŸ¥è¯¢ï¼Œå¯ä»¥ä¿è¯è¯»å–æ•°æ®çš„ä¸€è‡´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690881983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":377683,"user_name":"OM","can_delete":false,"product_type":"c1","uid":1302746,"ip_address":"æµ™æ±Ÿ","ucode":"E33C66A70802A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoWfXendN7czHpsyaWKLPK6Na9P5czquJ7Wdre4TibZQ5SQib88edyuib3LpCVFkp0gII2wyvvR8tEIA/132","comment_is_top":false,"comment_ctime":1689033580,"is_pvip":false,"replies":[{"id":137649,"content":"ä½ å¥½ï¼Œæˆ‘ç†è§£ä»–çš„æ„æ€æ˜¯ä»–ä»¬çš„æœåŠ¡å·²ç»èƒ½å¤Ÿæˆä¸ºè¡Œä¸šæ ‡å‡†å‚è€ƒï¼Œç›®å‰ä¸»è¦æ˜¯raftå’Œpaxosä¸¤ç§æ–¹å¼ï¼Œå…¶ä¸­éƒ½å¼€å§‹æ”¯æŒåˆ†å—å¼ºä¸€è‡´","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1689051690,"ip_address":"åŒ—äº¬","comment_id":377683,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100309001,"comment_content":"è€å¸ˆï¼Œç°åœ¨å›½äº§æ•°æ®åº“å¦‚å¸‚é¢ä¸Šçš„oceanbaseæ•°æ®åº“é‡‡ç”¨çš„æ˜¯paxoså®ç°åˆ†å¸ƒå¼ï¼Œè¯´å·¥ä¸šæ ‡å‡†ï¼Œä¸å¤ªæ˜ç™½paxosæ ‡å‡†åŒºåˆ†ã€‚","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":623121,"discussion_content":"ä½ å¥½ï¼Œæˆ‘ç†è§£ä»–çš„æ„æ€æ˜¯ä»–ä»¬çš„æœåŠ¡å·²ç»èƒ½å¤Ÿæˆä¸ºè¡Œä¸šæ ‡å‡†å‚è€ƒï¼Œç›®å‰ä¸»è¦æ˜¯raftå’Œpaxosä¸¤ç§æ–¹å¼ï¼Œå…¶ä¸­éƒ½å¼€å§‹æ”¯æŒåˆ†å—å¼ºä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1689051690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369335,"user_name":"å®‹æ¯…","can_delete":false,"product_type":"c1","uid":2025872,"ip_address":"ä¸­å›½é¦™æ¸¯","ucode":"1A377E7C7671FE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epqMYnEEVK1D6Veh3VvPjHAb1sZg8AHtWkSUJIEEMFF2hVm9LN1fuqdXaiczyctaib6XicjhyvH8ymug/132","comment_is_top":false,"comment_ctime":1677418779,"is_pvip":false,"replies":[{"id":134648,"content":"é™¤æ­¤ä¹‹å¤–è¿˜æœ‰è„‘è£‚ç­‰é—®é¢˜ï½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1677560914,"ip_address":"åŒ—äº¬","comment_id":369335,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100309001,"comment_content":"q:ä¸ºä»€ä¹ˆ Raft é›†ç¾¤æˆå‘˜å¢å‡éœ€è¦ç‰¹æ®Šå»åšï¼Ÿ\na: ä¼šè§¦å‘é€‰ä¸¾ï¼Œè§¦å‘é€‰ä¸¾çš„é€»è¾‘æ˜¯ï¼Œå½“å‰é›†ç¾¤å­˜åœ¨leaderäº†é‚£ä¹ˆå¢åŠ èŠ‚ç‚¹å°±æ²¡å…³ç³»ï¼Œä½†æ˜¯å‡å°‘çš„æ—¶å€™å¦‚æœåˆšå¥½å¹²æ‰äº†ledaerï¼Œå°±ä¼šè§¦å‘é€‰ä¸¾å¯¼è‡´æœåŠ¡ä¸å¯ç”¨ï¼Œä¸”å¦‚æœæ˜¯åˆšå¥½ä»…å­˜2ä¸ªèŠ‚ç‚¹ï¼Œè¿˜ä¼šè§¦å‘é€‰ä¸¾ç­‰å¾…ï¼ˆå› ä¸ºéƒ½ä¸æ˜¯å¤§å¤šæ•°ï¼‰ã€‚","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607024,"discussion_content":"é™¤æ­¤ä¹‹å¤–è¿˜æœ‰è„‘è£‚ç­‰é—®é¢˜ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677560915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366088,"user_name":"è‹¥æ°´æ¸…è¡î","can_delete":false,"product_type":"c1","uid":1099296,"ip_address":"åŒ—äº¬","ucode":"175C014E3B985D","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/20/124ae6d4.jpg","comment_is_top":false,"comment_ctime":1673397580,"is_pvip":false,"replies":[{"id":133446,"content":"ä½ å¥½ï¼Œè‹¥æ°´æ¸…è¡ï¼Œè¿™ä¸ªæ²¡æ¯›ç—…ï¼Œé‚£ä¹ˆä»–å¦‚ä½•é¿å…çš„ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1004527,"ctime":1673504975,"ip_address":"åŒ—äº¬","comment_id":366088,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100309001,"comment_content":"ä¸ºä»€ä¹ˆ Raft é›†ç¾¤æˆå‘˜å¢å‡éœ€è¦ç‰¹æ®Šå»åšï¼Ÿ\nä¸»è¦è¿˜æ˜¯ä¸ºäº†é¿å…é›†ç¾¤è„‘è£‚ç°è±¡ï¼Œå¦‚æœæ˜¯ä¸‰èŠ‚ç‚¹çš„é›†ç¾¤ï¼Œå‰©ä½™é€‰ä¸¾çš„èŠ‚ç‚¹å¿…é¡»è¶…è¿‡åŠæ•°ï¼Œä¹Ÿå°±æ˜¯åªèƒ½å®•æœºä¸€å°ï¼Œè¿™ä¹Ÿæ˜¯é›†ç¾¤èŠ‚ç‚¹æ•°é‡å¿…é¡»æ˜¯å¥‡æ•°çš„åŸå› ã€‚Raft é›†ç¾¤æˆå‘˜å¢å‡éƒ½éœ€è¦è€ƒè™‘é›†ç¾¤èŠ‚ç‚¹æ•°é‡ï¼Œé¿å…å‡ºç°å­˜æ´»èŠ‚ç‚¹æ•°é‡ä¸è¶…è¿‡é›†ç¾¤èŠ‚ç‚¹æ•°é‡ä¸€åŠçš„æƒ…å†µã€‚\n","like_count":0,"discussions":[{"author":{"id":1004527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg","nickname":"thinkpc","note":"","ucode":"0EBF75B8707584","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599407,"discussion_content":"ä½ å¥½ï¼Œè‹¥æ°´æ¸…è¡ï¼Œè¿™ä¸ªæ²¡æ¯›ç—…ï¼Œé‚£ä¹ˆä»–å¦‚ä½•é¿å…çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673504975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}