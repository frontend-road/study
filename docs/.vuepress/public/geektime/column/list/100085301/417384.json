{"id":417384,"title":"10ï½œç”Ÿå‘½å‘¨æœŸï¼šä½ åˆ›å»ºçš„å€¼ç©¶ç«Ÿèƒ½æ´»å¤šä¹…ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆå¤©ã€‚</p><p>ä¹‹å‰æåˆ°è¿‡ï¼Œåœ¨ä»»ä½•è¯­è¨€é‡Œï¼Œæ ˆä¸Šçš„å€¼éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒå’Œå¸§çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œè€Œ Rustï¼Œè¿›ä¸€æ­¥æ˜ç¡®è¿™ä¸ªæ¦‚å¿µï¼Œå¹¶ä¸”ä¸ºå †ä¸Šçš„å†…å­˜ä¹Ÿå¼•å…¥äº†ç”Ÿå‘½å‘¨æœŸã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å…¶å®ƒè¯­è¨€ä¸­ï¼Œå †å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸ç¡®å®šçš„ï¼Œæˆ–è€…æ˜¯æœªå®šä¹‰çš„ã€‚å› æ­¤ï¼Œè¦ä¹ˆå¼€å‘è€…æ‰‹å·¥ç»´æŠ¤ï¼Œè¦ä¹ˆè¯­è¨€åœ¨è¿è¡Œæ—¶åšé¢å¤–çš„æ£€æŸ¥ã€‚è€Œåœ¨ Rust ä¸­ï¼Œé™¤éæ˜¾å¼åœ°åš Box::leak() / Box::into_raw() / ManualDrop ç­‰åŠ¨ä½œï¼Œ<strong>ä¸€èˆ¬æ¥è¯´ï¼Œå †å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¼šé»˜è®¤å’Œå…¶æ ˆå†…å­˜çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåœ¨ä¸€èµ·</strong>ã€‚</p><p>æ‰€ä»¥åœ¨è¿™ç§é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨æ¯ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸä¸­ï¼Œç¼–è¯‘å™¨å°±å¯ä»¥å¯¹æ¯”å€¼å’Œå…¶å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¥ç¡®ä¿â€œå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸è¶…å‡ºå€¼çš„ç”Ÿå‘½å‘¨æœŸâ€ã€‚</p><p>é‚£ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼ŒRust ç¼–è¯‘å™¨æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„å‘¢ï¼Ÿ</p><h2>å€¼çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>åœ¨è¿›ä¸€æ­¥è®¨è®ºä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç»™å€¼å¯èƒ½çš„ç”Ÿå‘½å‘¨æœŸä¸‹ä¸ªå®šä¹‰ã€‚</p><p>å¦‚æœä¸€ä¸ªå€¼çš„ç”Ÿå‘½å‘¨æœŸ<strong>è´¯ç©¿æ•´ä¸ªè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç§°è¿™ç§ç”Ÿå‘½å‘¨æœŸä¸º<strong>é™æ€ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚</p><p>å½“å€¼æ‹¥æœ‰é™æ€ç”Ÿå‘½å‘¨æœŸï¼Œå…¶å¼•ç”¨ä¹Ÿå…·æœ‰é™æ€ç”Ÿå‘½å‘¨æœŸã€‚æˆ‘ä»¬åœ¨è¡¨è¿°è¿™ç§å¼•ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ <code>'static</code> æ¥è¡¨ç¤ºã€‚æ¯”å¦‚ï¼š <code>&amp;'static str</code>  ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªå…·æœ‰é™æ€ç”Ÿå‘½å‘¨æœŸçš„å­—ç¬¦ä¸²å¼•ç”¨ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆstring literalï¼‰ç­‰ï¼Œéƒ½æ‹¥æœ‰é™æ€ç”Ÿå‘½å‘¨æœŸã€‚æˆ‘ä»¬ä¸Šæ–‡ä¸­æåˆ°çš„å †å†…å­˜ï¼Œå¦‚æœä½¿ç”¨äº† <code>Box::leak</code> åï¼Œä¹Ÿå…·æœ‰é™æ€ç”Ÿå‘½å‘¨æœŸã€‚</p><!-- [[[read_end]]] --><p>å¦‚æœä¸€ä¸ªå€¼æ˜¯<strong>åœ¨æŸä¸ªä½œç”¨åŸŸä¸­å®šä¹‰çš„</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒè¢«åˆ›å»ºåœ¨æ ˆä¸Šæˆ–è€…å †ä¸Šï¼Œé‚£ä¹ˆå…¶<strong>ç”Ÿå‘½å‘¨æœŸæ˜¯åŠ¨æ€çš„</strong>ã€‚</p><p>å½“è¿™ä¸ªå€¼çš„ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œå€¼çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿéšä¹‹ç»“æŸã€‚å¯¹äºåŠ¨æ€ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬çº¦å®šç”¨ <code>'a</code> ã€<code>'b</code> æˆ–è€…  <code>'hello</code> è¿™æ ·çš„å°å†™å­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²æ¥è¡¨è¿°ã€‚ <code>'</code> åé¢å…·ä½“æ˜¯ä»€ä¹ˆåå­—ä¸é‡è¦ï¼Œå®ƒä»£è¡¨æŸä¸€æ®µåŠ¨æ€çš„ç”Ÿå‘½å‘¨æœŸï¼Œå…¶ä¸­ï¼Œ <code>&amp;'a str</code> å’Œ <code>&amp;'b str</code> è¡¨ç¤ºè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½ä¸ä¸€è‡´ã€‚</p><p>æˆ‘ä»¬é€šè¿‡å›¾æ€»ç»“ä¸€ä¸‹ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/8f/7d/8fdc22d8ef77ecfab5d317f169a0827d.jpg?wh=2312x1394\" alt=\"\"></p><ul>\n<li>åˆ†é…åœ¨å †å’Œæ ˆä¸Šçš„å†…å­˜æœ‰å…¶å„è‡ªçš„ä½œç”¨åŸŸï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸæ˜¯åŠ¨æ€çš„ã€‚</li>\n<li>å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å­—ç¬¦ä¸²å­—é¢é‡ã€ä»£ç ç­‰å†…å®¹ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè¢«ç¼–è¯‘åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ BSS/Data/RoData/Text æ®µï¼Œç„¶ååœ¨åŠ è½½æ—¶ï¼Œè£…å…¥å†…å­˜ã€‚å› è€Œï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸå’Œè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œæ‰€ä»¥æ˜¯é™æ€çš„ã€‚</li>\n<li>æ‰€ä»¥ï¼Œå‡½æ•°æŒ‡é’ˆçš„ç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯é™æ€çš„ï¼Œå› ä¸ºå‡½æ•°åœ¨ Text æ®µä¸­ï¼Œåªè¦è¿›ç¨‹æ´»ç€ï¼Œå…¶å†…å­˜ä¸€ç›´å­˜åœ¨ã€‚</li>\n</ul><p>æ˜ç™½äº†è¿™äº›åŸºæœ¬æ¦‚å¿µåï¼Œæˆ‘ä»¬æ¥çœ‹å¯¹äºå€¼å’Œå¼•ç”¨ï¼Œç¼–è¯‘å™¨æ˜¯å¦‚ä½•è¯†åˆ«å…¶ç”Ÿå‘½å‘¨æœŸçš„ã€‚</p><h2>ç¼–è¯‘å™¨å¦‚ä½•è¯†åˆ«ç”Ÿå‘½å‘¨æœŸ</h2><p>æˆ‘ä»¬å…ˆä»ä¸¤ä¸ªæœ€åŸºæœ¬æœ€ç®€å•çš„ä¾‹å­å¼€å§‹ã€‚</p><p>å·¦å›¾çš„<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=59e63cc46902389788bc3183e03351b9\">ä¾‹1 </a>ï¼Œx å¼•ç”¨äº†åœ¨å†…å±‚ä½œç”¨åŸŸä¸­åˆ›å»ºå‡ºæ¥çš„å˜é‡ yã€‚ç”±äºï¼Œå˜é‡ä»å¼€å§‹å®šä¹‰åˆ°å…¶ä½œç”¨åŸŸç»“æŸçš„è¿™æ®µæ—¶é—´ï¼Œæ˜¯å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥ x çš„ç”Ÿå‘½å‘¨æœŸ 'a å¤§äº y çš„ç”Ÿå‘½å‘¨æœŸ 'bï¼Œå½“ x å¼•ç”¨ y æ—¶ï¼Œç¼–è¯‘å™¨æŠ¥é”™ã€‚</p><p>å³å›¾<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=aa0282076b5beece953aab685d175430\">ä¾‹ 2</a> ä¸­ï¼Œy å’Œ x å¤„åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹ï¼Œ x å¼•ç”¨äº† yï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° x çš„ç”Ÿå‘½å‘¨æœŸ 'a å’Œ y çš„ç”Ÿå‘½å‘¨æœŸ 'b å‡ ä¹åŒæ—¶ç»“æŸï¼Œæˆ–è€…è¯´ 'a å°äºç­‰äº 'bï¼Œæ‰€ä»¥ï¼Œx å¼•ç”¨ y æ˜¯å¯è¡Œçš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/77/ee/77e63343dceb8ddb87460e482db1c9ee.jpg?wh=4231x1431\" alt=\"\"></p><p>è¿™ä¸¤ä¸ªå°ä¾‹å­å¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬å†çœ‹ä¸ªç¨å¾®å¤æ‚ä¸€äº›çš„ã€‚</p><p>ç¤ºä¾‹ä»£ç åœ¨ main() å‡½æ•°é‡Œåˆ›å»ºäº†ä¸¤ä¸ª Stringï¼Œç„¶åå°†å…¶ä¼ å…¥ max() å‡½æ•°æ¯”è¾ƒå¤§å°ã€‚max() å‡½æ•°æ¥å—ä¸¤ä¸ªå­—ç¬¦ä¸²å¼•ç”¨ï¼Œè¿”å›å…¶ä¸­è¾ƒå¤§çš„é‚£ä¸ªå­—ç¬¦ä¸²çš„å¼•ç”¨ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=4a4267725a2c0ed1e58318352ed1774b\">ç¤ºä¾‹ä»£ç </a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">fn main() {\n    let s1 = String::from(\"Lindsey\");\n    let s2 = String::from(\"Rosie\");\n\n    let result = max(&amp;s1, &amp;s2);\n\n    println!(\"bigger one: {}\", result);\n}\n\nfn max(s1: &amp;str, s2: &amp;str) -&gt; &amp;str {\n    if s1 &gt; s2 {\n        s1\n    } else {\n        s2\n    }\n}\n</code></pre><p>è¿™æ®µä»£ç æ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡çš„ï¼Œå®ƒä¼šæŠ¥é”™ â€œmissing lifetime specifierâ€ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ max() å‡½æ•°æ—¶ï¼Œæ— æ³•åˆ¤æ–­ s1ã€s2 å’Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚</p><p>ä½ æ˜¯ä¸æ˜¯å¾ˆç–‘æƒ‘ï¼Œç«™åœ¨æˆ‘ä»¬å¼€å‘è€…çš„è§’åº¦ï¼Œè¿™ä¸ªä»£ç ç†è§£èµ·æ¥éå¸¸ç›´è§‚ï¼Œåœ¨ main() å‡½æ•°é‡Œ s1 å’Œ s2 ä¸¤ä¸ªå€¼ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œå®ƒä»¬çš„å¼•ç”¨ä¼ ç»™ max() å‡½æ•°ä¹‹åï¼Œæ— è®ºè°çš„è¢«è¿”å›ï¼Œç”Ÿå‘½å‘¨æœŸéƒ½ä¸ä¼šè¶…è¿‡ s1 æˆ– s2ã€‚æ‰€ä»¥è¿™åº”è¯¥æ˜¯ä¸€æ®µæ­£ç¡®çš„ä»£ç å•Šï¼Ÿ</p><p>ä¸ºä»€ä¹ˆç¼–è¯‘å™¨æŠ¥é”™äº†ï¼Œä¸å…è®¸å®ƒç¼–è¯‘é€šè¿‡å‘¢ï¼Ÿæˆ‘ä»¬æŠŠè¿™æ®µä»£ç ç¨å¾®æ‰©å±•ä¸€ä¸‹ï¼Œä½ å°±èƒ½æ˜ç™½ç¼–è¯‘å™¨çš„å›°æƒ‘äº†ã€‚</p><p>åœ¨åˆšæ‰çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•° get_max()ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å¼•ç”¨ï¼Œç„¶åå’Œ â€œCynthiaâ€ è¿™ä¸ªå­—ç¬¦ä¸²å­—é¢é‡æ¯”è¾ƒå¤§å°ã€‚ä¹‹å‰æˆ‘ä»¬æåˆ°ï¼Œ<strong>å­—ç¬¦ä¸²å­—é¢é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯é™æ€çš„ï¼Œè€Œ s1 æ˜¯åŠ¨æ€çš„ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸæ˜¾ç„¶ä¸ä¸€è‡´</strong>ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=7b265ea1b5358cf8a60b0d94e5c1131f\">ä»£ç </a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">fn main() {\n    let s1 = String::from(\"Lindsey\");\n    let s2 = String::from(\"Rosie\");\n\n    let result = max(&amp;s1, &amp;s2);\n\n    println!(\"bigger one: {}\", result);\n\n    let result = get_max(&amp;s1);\n    println!(\"bigger one: {}\", result);\n}\n\nfn get_max(s1: &amp;str) -&gt; &amp;str {\n    max(s1, \"Cynthia\")\n}\n\nfn max(s1: &amp;str, s2: &amp;str) -&gt; &amp;str {\n    if s1 &gt; s2 {\n        s1\n    } else {\n        s2\n    }\n}\n</code></pre><p>å½“å‡ºç°äº†å¤šä¸ªå‚æ•°ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½ä¸ä¸€è‡´æ—¶ï¼Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸå°±ä¸å¥½ç¡®å®šäº†ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æŸä¸ªå‡½æ•°æ—¶ï¼Œå¹¶ä¸çŸ¥é“è¿™ä¸ªå‡½æ•°å°†æ¥æœ‰è°è°ƒç”¨ã€æ€ä¹ˆè°ƒç”¨ï¼Œæ‰€ä»¥ï¼Œ<strong>å‡½æ•°æœ¬èº«æºå¸¦çš„ä¿¡æ¯ï¼Œå°±æ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨çš„å…¨éƒ¨ä¿¡æ¯</strong>ã€‚</p><p>æ ¹æ®è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å†çœ‹ç¤ºä¾‹ä»£ç ï¼Œåœ¨ç¼–è¯‘ max() å‡½æ•°æ—¶ï¼Œå‚æ•° s1 å’Œ s2 çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆå…³ç³»ã€è¿”å›å€¼å’Œå‚æ•°çš„ç”Ÿå‘½å‘¨æœŸåˆæœ‰ä»€ä¹ˆå…³ç³»ï¼Œç¼–è¯‘å™¨æ˜¯æ— æ³•ç¡®å®šçš„ã€‚</p><p>æ­¤æ—¶ï¼Œå°±éœ€è¦æˆ‘ä»¬åœ¨å‡½æ•°ç­¾åä¸­æä¾›ç”Ÿå‘½å‘¨æœŸçš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ï¼ˆlifetime specifierï¼‰ã€‚åœ¨ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨æ—¶ï¼Œä½¿ç”¨çš„å‚æ•°å«ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼ˆlifetime parameterï¼‰ã€‚é€šè¿‡ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ï¼Œæˆ‘ä»¬å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›å¼•ç”¨é—´ç”Ÿå‘½å‘¨æœŸçš„çº¦æŸã€‚</p><p>ç”Ÿå‘½å‘¨æœŸå‚æ•°çš„æè¿°æ–¹å¼å’Œæ³›å‹å‚æ•°ä¸€è‡´ï¼Œä¸è¿‡åªä½¿ç”¨å°å†™å­—æ¯ã€‚è¿™é‡Œï¼Œä¸¤ä¸ªå…¥å‚ s1ã€ s2ï¼Œä»¥åŠè¿”å›å€¼éƒ½ç”¨  <code>'a</code> æ¥çº¦æŸã€‚<strong>ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œæè¿°çš„æ˜¯å‚æ•°å’Œå‚æ•°ä¹‹é—´ã€å‚æ•°å’Œè¿”å›å€¼ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶ä¸æ”¹å˜åŸæœ‰çš„ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚</p><p>åœ¨æˆ‘ä»¬æ·»åŠ äº†ç”Ÿå‘½å‘¨æœŸå‚æ•°åï¼Œs1 å’Œ s2 çš„ç”Ÿå‘½å‘¨æœŸåªè¦å¤§äºç­‰äºï¼ˆoutliveï¼‰ <code>'a</code>ï¼Œå°±ç¬¦åˆå‚æ•°çš„çº¦æŸï¼Œè€Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸåŒç†ï¼Œä¹Ÿéœ€è¦å¤§äºç­‰äº  <code>'a</code> ã€‚</p><p>åœ¨ä½ è¿è¡Œä¸Šè¿°ç¤ºä¾‹ä»£ç çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å·²ç»æç¤ºä½ ï¼Œå¯ä»¥è¿™ä¹ˆä¿®æ”¹ max() å‡½æ•°ï¼š</p><pre><code class=\"language-rust\">fn max&lt;'a&gt;(s1: &amp;'a str, s2: &amp;'a str) -&gt; &amp;'a str {\n    if s1 &gt; s2 {\n        s1\n    } else {\n        s2\n    }\n}\n</code></pre><p>å½“ main() å‡½æ•°è°ƒç”¨ max() å‡½æ•°æ—¶ï¼Œs1 å’Œ s2 æœ‰ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> ï¼Œæ‰€ä»¥å®ƒæ»¡è¶³  <code>(s1: &amp;'a str, s2: &amp;'a str)</code> çš„çº¦æŸã€‚å½“ get_max() å‡½æ•°è°ƒç”¨ max() æ—¶ï¼Œâ€œCynthiaâ€ æ˜¯é™æ€ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒå¤§äº s1 çš„ç”Ÿå‘½å‘¨æœŸ<code>'a</code> ï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥æ»¡è¶³ max() çš„çº¦æŸéœ€æ±‚ã€‚</p><h2>ä½ çš„å¼•ç”¨éœ€è¦é¢å¤–æ ‡æ³¨å—</h2><p>å­¦åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šæœ‰å›°æƒ‘äº†ï¼šä¸ºä»€ä¹ˆæˆ‘ä¹‹å‰å†™çš„ä»£ç ï¼Œå¾ˆå¤šå‡½æ•°çš„å‚æ•°æˆ–è€…è¿”å›å€¼éƒ½ä½¿ç”¨äº†å¼•ç”¨ï¼Œç¼–è¯‘å™¨å´æ²¡æœ‰æç¤ºæˆ‘è¦é¢å¤–æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸå‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨å¸Œæœ›å°½å¯èƒ½å‡è½»å¼€å‘è€…çš„è´Ÿæ‹…ï¼Œå…¶å®æ‰€æœ‰ä½¿ç”¨äº†å¼•ç”¨çš„å‡½æ•°ï¼Œéƒ½éœ€è¦ç”Ÿå‘½å‘¨æœŸçš„æ ‡æ³¨ï¼Œåªä¸è¿‡ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åšè¿™ä»¶äº‹ï¼Œçœå´äº†å¼€å‘è€…çš„éº»çƒ¦ã€‚</p><p>æ¯”å¦‚è¿™ä¸ªä¾‹å­ï¼Œfirst() å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å¼•ç”¨ï¼Œæ‰¾åˆ°å…¶ä¸­çš„ç¬¬ä¸€ä¸ªå•è¯å¹¶è¿”å›ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=bc4cbb73469c683dc3fee03c44eb8e65\">ä»£ç </a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">fn main() {\n    let s1 = \"Hello world\";\n\n    println!(\"first word of s1: {}\", first(&amp;s1));\n}\n\nfn first(s: &amp;str) -&gt; &amp;str {\n    let trimmed = s.trim();\n    match trimmed.find(' ') {\n        None =&gt; \"\",\n        Some(pos) =&gt; &amp;trimmed[..pos],\n    }\n}\n</code></pre><p>è™½ç„¶æˆ‘ä»¬æ²¡æœ‰åšä»»ä½•ç”Ÿå‘½å‘¨æœŸçš„æ ‡æ³¨ï¼Œä½†ç¼–è¯‘å™¨ä¼šé€šè¿‡ä¸€äº›ç®€å•çš„è§„åˆ™ä¸ºå‡½æ•°è‡ªåŠ¨æ·»åŠ æ ‡æ³¨ï¼š</p><ol>\n<li>æ‰€æœ‰å¼•ç”¨ç±»å‹çš„å‚æ•°éƒ½æœ‰ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸ  <code>'a</code> ã€<code>'b</code> ç­‰ã€‚</li>\n<li>å¦‚æœåªæœ‰ä¸€ä¸ªå¼•ç”¨å‹è¾“å…¥ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¼šèµ‹ç»™æ‰€æœ‰è¾“å‡ºã€‚</li>\n<li>å¦‚æœæœ‰å¤šä¸ªå¼•ç”¨ç±»å‹çš„å‚æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯ selfï¼Œé‚£ä¹ˆå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¼šèµ‹ç»™æ‰€æœ‰è¾“å‡ºã€‚</li>\n</ol><p>è§„åˆ™ 3 é€‚ç”¨äº trait æˆ–è€…è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬å…ˆæ”¾åœ¨ä¸€è¾¹ï¼Œä»¥åé‡åˆ°ä¼šå†è¯¦ç»†è®²çš„ã€‚ä¾‹å­ä¸­çš„ first() å‡½æ•°é€šè¿‡è§„åˆ™ 1 å’Œ 2ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªå¸¦ç”Ÿå‘½å‘¨æœŸçš„ç‰ˆæœ¬ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=5886937147cd5485533185415451431b\">ä»£ç </a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">fn first&lt;'a&gt;(s: &amp;'a str) -&gt; &amp;'a str {\n    let trimmed = s.trim();\n    match trimmed.find(' ') {\n        None =&gt; \"\",\n        Some(pos) =&gt; &amp;trimmed[..pos],\n    }\n}\n</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰å¼•ç”¨éƒ½èƒ½æ­£å¸¸æ ‡æ³¨ï¼Œæ²¡æœ‰å†²çªã€‚é‚£ä¹ˆå¯¹æ¯”ä¹‹å‰è¿”å›è¾ƒå¤§å­—ç¬¦ä¸²çš„ç¤ºä¾‹ä»£ç ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=4a4267725a2c0ed1e58318352ed1774b\">ç¤ºä¾‹ä»£ç </a>ï¼‰ï¼Œ max() å‡½æ•°ä¸ºä»€ä¹ˆç¼–è¯‘å™¨æ— æ³•å¤„ç†å‘¢ï¼Ÿ</p><p>æŒ‰ç…§è§„åˆ™ 1ï¼Œ æˆ‘ä»¬å¯ä»¥å¯¹max() å‡½æ•°çš„å‚æ•° s1 å’Œ s2 åˆ†åˆ«æ ‡æ³¨<code>'a</code> å’Œ<code>'b</code> ï¼Œä½†æ˜¯<strong>è¿”å›å€¼å¦‚ä½•æ ‡æ³¨ï¼Ÿæ˜¯ <code>'a</code> è¿˜æ˜¯<code>'b</code> å‘¢ï¼Ÿè¿™é‡Œçš„å†²çªï¼Œç¼–è¯‘å™¨æ— èƒ½ä¸ºåŠ›</strong>ã€‚</p><pre><code class=\"language-rust\">fn max&lt;'a, 'b&gt;(s1: &amp;'a str, s2: &amp;'b str) -&gt; &amp;'??? str\n</code></pre><p>æ‰€ä»¥ï¼Œåªæœ‰æˆ‘ä»¬æ˜ç™½äº†ä»£ç é€»è¾‘ï¼Œæ‰èƒ½æ­£ç¡®æ ‡æ³¨å‚æ•°å’Œè¿”å›å€¼çš„çº¦æŸå…³ç³»ï¼Œé¡ºåˆ©ç¼–è¯‘é€šè¿‡ã€‚</p><h3>å¼•ç”¨æ ‡æ³¨å°ç»ƒä¹ </h3><p>å¥½ï¼ŒRustçš„ç”Ÿå‘½å‘¨æœŸè¿™ä¸ªçŸ¥è¯†ç‚¹æˆ‘ä»¬å°±è®²å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å°è¯•å†™ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²å‡½æ•°strtok()ï¼Œå³æ—¶ç»ƒä¹ ä¸€ä¸‹ï¼Œå¦‚ä½•åŠ å¼•ç”¨æ ‡æ³¨ã€‚</p><p>ç›¸ä¿¡æœ‰è¿‡ C/C++ ç»éªŒçš„å¼€å‘è€…éƒ½æ¥è§¦è¿‡è¿™ä¸ªstrtok()å‡½æ•°ï¼Œå®ƒä¼šæŠŠå­—ç¬¦ä¸²æŒ‰ç…§åˆ†éš”ç¬¦ï¼ˆdelimiterï¼‰åˆ‡å‡ºä¸€ä¸ª token å¹¶è¿”å›ï¼Œç„¶åå°†ä¼ å…¥çš„å­—ç¬¦ä¸²å¼•ç”¨æŒ‡å‘åç»­çš„ tokenã€‚</p><p>ç”¨ Rust å®ç°å¹¶ä¸å›°éš¾ï¼Œç”±äºä¼ å…¥çš„ s éœ€è¦å¯å˜çš„å¼•ç”¨ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²å¼•ç”¨çš„å¯å˜å¼•ç”¨  <code>&amp;mut &amp;str</code>ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=bdf78a5b2573da5791040c05ff0e8c42\">ç»ƒä¹ ä»£ç </a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">pub fn strtok(s: &amp;mut &amp;str, delimiter: char) -&gt; &amp;str {\n    if let Some(i) = s.find(delimiter) {\n        let prefix = &amp;s[..i];\n        // ç”±äº delimiter å¯ä»¥æ˜¯ utf8ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è·å¾—å…¶ utf8 é•¿åº¦ï¼Œ\n        // ç›´æ¥ä½¿ç”¨ len è¿”å›çš„æ˜¯å­—èŠ‚é•¿åº¦ï¼Œä¼šæœ‰é—®é¢˜\n        let suffix = &amp;s[(i + delimiter.len_utf8())..];\n        *s = suffix;\n        prefix\n    } else { // å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›æ•´ä¸ªå­—ç¬¦ä¸²ï¼ŒæŠŠåŸå­—ç¬¦ä¸²æŒ‡é’ˆ s æŒ‡å‘ç©ºä¸²\n        let prefix = *s;\n        *s = \"\";\n        prefix\n    }\n}\n\nfn main() {\n    let s = \"hello world\".to_owned();\n    let mut s1 = s.as_str();\n    let hello = strtok(&amp;mut s1, ' ');\n    println!(\"hello is: {}, s1: {}, s: {}\", hello, s1, s);\n}\n</code></pre><p>å½“æˆ‘ä»¬å°è¯•è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œä¼šé‡åˆ°ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„ç¼–è¯‘é”™è¯¯ã€‚ç±»ä¼¼åˆšæ‰è®²çš„ç¤ºä¾‹ä»£ç ï¼Œæ˜¯å› ä¸ºæŒ‰ç…§ç¼–è¯‘å™¨çš„è§„åˆ™ï¼Œ <code>&amp;mut &amp;str</code> æ·»åŠ ç”Ÿå‘½å‘¨æœŸåå˜æˆ  <code>&amp;'b mut &amp;'a str</code>ï¼Œè¿™å°†å¯¼è‡´è¿”å›çš„  <code>'&amp;str</code> æ— æ³•é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ€è€ƒä¸€ä¸‹ï¼šè¿”å›å€¼å’Œè°çš„ç”Ÿå‘½å‘¨æœŸæœ‰å…³ï¼Ÿæ˜¯æŒ‡å‘å­—ç¬¦ä¸²å¼•ç”¨çš„å¯å˜å¼•ç”¨ &amp;mut ï¼Œè¿˜æ˜¯å­—ç¬¦ä¸²å¼•ç”¨ &amp;str æœ¬èº«ï¼Ÿ</p><p>æ˜¾ç„¶æ˜¯åè€…ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º strtok æ·»åŠ ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ï¼š</p><pre><code class=\"language-rust\">pub fn strtok&lt;'b, 'a&gt;(s: &amp;'b mut &amp;'a str, delimiter: char) -&gt; &amp;'a str {...}\n</code></pre><p>å› ä¸ºè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸè·Ÿå­—ç¬¦ä¸²å¼•ç”¨æœ‰å…³ï¼Œæˆ‘ä»¬åªä¸ºè¿™éƒ¨åˆ†çš„çº¦æŸæ·»åŠ æ ‡æ³¨å°±å¯ä»¥äº†ï¼Œå‰©ä¸‹çš„æ ‡æ³¨äº¤ç»™ç¼–è¯‘å™¨è‡ªåŠ¨æ·»åŠ ï¼Œæ‰€ä»¥ä»£ç ä¹Ÿå¯ä»¥ç®€åŒ–æˆå¦‚ä¸‹è¿™æ ·ï¼Œè®©ç¼–è¯‘å™¨å°†å…¶æ‰©å±•æˆä¸Šé¢çš„å½¢å¼ï¼š</p><pre><code class=\"language-rust\">pub fn strtok&lt;'a&gt;(s: &amp;mut &amp;'a str, delimiter: char) -&gt; &amp;'a str {...}\n</code></pre><p>æœ€ç»ˆï¼Œæ­£å¸¸å·¥ä½œçš„ä»£ç å¦‚ä¸‹ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=543082912a7b0c3f7a8c458bb7a45bb8\">ç»ƒä¹ ä»£ç _æ”¹</a>ï¼‰ï¼Œå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼š</p><pre><code class=\"language-rust\">pub fn strtok&lt;'a&gt;(s: &amp;mut &amp;'a str, delimiter: char) -&gt; &amp;'a str {\n    if let Some(i) = s.find(delimiter) {\n        let prefix = &amp;s[..i];\n        let suffix = &amp;s[(i + delimiter.len_utf8())..];\n        *s = suffix;\n        prefix\n    } else {\n        let prefix = *s;\n        *s = \"\";\n        prefix\n    }\n}\n\nfn main() {\n    let s = \"hello world\".to_owned();\n    let mut s1 = s.as_str();\n    let hello = strtok(&amp;mut s1, ' ');\n    println!(\"hello is: {}, s1: {}, s: {}\", hello, s1, s);\n}\n</code></pre><p>ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¿™ä¸ªå‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸå…³ç³»ï¼Œæˆ‘å°†æ¯ä¸ªå †ä¸Šå’Œæ ˆä¸Šå˜é‡çš„å…³ç³»ç”»äº†ä¸ªå›¾ä¾›ä½ å‚è€ƒã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/97/83/97a6byy90566585499eabf4feda14783.jpg?wh=4151x2997\" alt=\"\"></p><p>è¿™é‡Œè·Ÿä½ åˆ†äº«ä¸€ä¸ªå°æŠ€å·§ï¼šå¦‚æœä½ è§‰å¾—æŸæ®µä»£ç ç†è§£æˆ–è€…åˆ†æèµ·æ¥å¾ˆå›°éš¾ï¼Œä¹Ÿå¯ä»¥ç”»ç±»ä¼¼çš„å›¾ï¼Œä»æœ€åŸºç¡€çš„æ•°æ®åœ¨å †å’Œæ ˆä¸Šçš„å…³ç³»å¼€å§‹æƒ³ï¼Œå°±å¾ˆå®¹æ˜“å˜æ¸…è„‰ç»œã€‚</p><p>åœ¨å¤„ç†ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ä¸€å®šè§„åˆ™è‡ªåŠ¨æ·»åŠ ç”Ÿå‘½å‘¨æœŸçš„æ ‡æ³¨ã€‚ç„¶è€Œï¼Œå½“è‡ªåŠ¨æ ‡æ³¨äº§ç”Ÿå†²çªæ—¶ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹å·¥æ ‡æ³¨ã€‚</p><p><strong>ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨çš„ç›®çš„æ˜¯ï¼Œåœ¨å‚æ•°å’Œè¿”å›å€¼ä¹‹é—´å»ºç«‹è”ç³»æˆ–è€…çº¦æŸ</strong>ã€‚è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼ å…¥çš„å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸéœ€è¦å¤§äºç­‰äºï¼ˆoutliveï¼‰æ ‡æ³¨çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>å½“æ¯ä¸ªå‡½æ•°éƒ½æ·»åŠ å¥½ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨åï¼Œç¼–è¯‘å™¨ï¼Œå°±å¯ä»¥ä»å‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡ä¸­åˆ†æå‡ºï¼Œåœ¨ä¼ å‚æ—¶ï¼Œå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯å¦å’Œå‡½æ•°ç­¾åä¸­è¦æ±‚çš„ç”Ÿå‘½å‘¨æœŸåŒ¹é…ã€‚å¦‚æœä¸åŒ¹é…ï¼Œå°±è¿èƒŒäº†â€œå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…å‡ºå€¼çš„ç”Ÿå‘½å‘¨æœŸâ€ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚</p><p>å¦‚æœä½ ææ‡‚äº†å‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ï¼Œé‚£ä¹ˆæ•°æ®ç»“æ„çš„ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ä¹Ÿæ˜¯ç±»ä¼¼ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼ŒEmployee çš„ name å’Œ title æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²å¼•ç”¨ï¼ŒEmployee çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½å¤§äºå®ƒä»¬ï¼Œå¦åˆ™ä¼šè®¿é—®å¤±æ•ˆçš„å†…å­˜ï¼Œå› è€Œæˆ‘ä»¬éœ€è¦å¦¥å–„æ ‡æ³¨ï¼š</p><pre><code class=\"language-rust\">struct Employee&lt;'a, 'b&gt; {\n  name: &amp;'a str,\n  title: &amp;'b str,\n  age: u8,\n}\n</code></pre><p>ä½¿ç”¨æ•°æ®ç»“æ„æ—¶ï¼Œæ•°æ®ç»“æ„è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸï¼Œéœ€è¦å°äºç­‰äºå…¶å†…éƒ¨å­—æ®µçš„æ‰€æœ‰å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬ä»‹ç»äº†é™æ€ç”Ÿå‘½å‘¨æœŸå’ŒåŠ¨æ€ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œä»¥åŠç¼–è¯‘å™¨å¦‚ä½•è¯†åˆ«å€¼å’Œå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/8f/7d/8fdc22d8ef77ecfab5d317f169a0827d.jpg?wh=2312x1394\" alt=\"\"><br>\næ ¹æ®æ‰€æœ‰æƒè§„åˆ™ï¼Œå€¼çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥ç¡®è®¤ï¼Œå®ƒå¯ä»¥ä¸€ç›´å­˜æ´»åˆ°æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸï¼›è€Œå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…è¿‡å€¼çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹ï¼Œè¿™æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ç„¶è€Œï¼Œ<strong>å½“å‘ç”Ÿå‡½æ•°è°ƒç”¨æ—¶ï¼Œç¼–è¯‘å™¨éœ€è¦é€šè¿‡å‡½æ•°çš„ç­¾åæ¥ç¡®å®šï¼Œå‚æ•°å’Œè¿”å›å€¼ä¹‹é—´ç”Ÿå‘½å‘¨æœŸçš„çº¦æŸ</strong>ã€‚</p><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡ä¸­çš„è§„åˆ™ï¼Œè‡ªåŠ¨æ·»åŠ ç”Ÿå‘½å‘¨æœŸçš„çº¦æŸã€‚å¦‚æœæ— æ³•è‡ªåŠ¨æ·»åŠ ï¼Œåˆ™éœ€è¦å¼€å‘è€…æ‰‹å·¥æ¥æ·»åŠ çº¦æŸã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬åªéœ€è¦ç¡®å®šå¥½è¿”å›å€¼å’Œå“ªä¸ªå‚æ•°çš„ç”Ÿå‘½å‘¨æœŸç›¸å…³å°±å¯ä»¥äº†ã€‚è€Œå¯¹äºæ•°æ®ç»“æ„ï¼Œå½“å†…éƒ¨æœ‰å¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå¼•ç”¨æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸã€‚</p><h2>æ€è€ƒé¢˜</h2><ol>\n<li>å¦‚æœæˆ‘ä»¬æŠŠ strtok() å‡½æ•°çš„ç­¾åå†™æˆè¿™æ ·ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆå®ƒä¼šå‘ç”Ÿè¿™ä¸ªé—®é¢˜ï¼Ÿä½ å¯ä»¥è¯•ç€ç¼–è¯‘ä¸€ä¸‹çœ‹çœ‹ã€‚</li>\n</ol><pre><code class=\"language-rust\">pub fn strtok&lt;'a&gt;(s: &amp;'a mut &amp;str, delimiter: char) -&gt; &amp;'a str {...}\n</code></pre><ol start=\"2\">\n<li>å›é¡¾<a href=\"https://time.geekbang.org/column/article/414478\">ç¬¬ 6 è®²SQLæŸ¥è¯¢å·¥å…·</a>çš„ä»£ç ï¼Œç°åœ¨ï¼Œçœ‹çœ‹ä½ æ˜¯ä¸æ˜¯å¯¹ä»£ç ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨æœ‰äº†æ›´æ·±ç†è§£ï¼Ÿ</li>\n</ol><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä½ å·²ç»æ‰“å¡ Rust å­¦ä¹ 10æ¬¡å•¦ï¼</p><p>å¦‚æœä½ è§‰å¾—æœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ åˆ†äº«ç»™ä½ èº«è¾¹çš„æœ‹å‹ï¼Œé‚€ä»–ä¸€èµ·è®¨è®ºã€‚åšæŒå­¦ä¹ ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p><h2>å‚è€ƒèµ„æ–™</h2><ol>\n<li>æ ˆä¸Šçš„å†…å­˜ä¸å¿…ç‰¹æ„é‡Šæ”¾ï¼Œé¡¶å¤šæ˜¯ç¼–è¯‘æ—¶ç¼–è¯‘å™¨ä¸å†å…è®¸è¯¥å˜é‡è¢«è®¿é—®ã€‚å› ä¸ºæ ˆä¸Šçš„å†…å­˜ä¼šéšç€æ ˆå¸§çš„ç»“æŸè€Œç»“æŸã€‚å¦‚æœä½ æœ‰ç‚¹æ¨¡ç³Šï¼Œå¯ä»¥å†çœ‹çœ‹<a href=\"https://time.geekbang.org/column/article/408409\">å‰ç½®çŸ¥è¯†</a>ï¼Œæ¸©ä¹ ä¸€ä¸‹æ ˆå’Œå †ã€‚</li>\n<li>Rust çš„ I/O å®‰å…¨æ€§ç›®å‰æ˜¯ â€œalmost safetyâ€ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯å®Œå…¨å®‰å…¨ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹è¿™ä¸ª <a href=\"https://github.com/rust-lang/rfcs/blob/master/text/3128-io-safety.md\">RFC</a>ã€‚</li>\n<li>æ›´å¤š<a href=\"https://doc.rust-lang.org/std/boxed/struct.Box.html#method.leak\">å…³äº Box::leak çš„ä¿¡æ¯</a>ã€‚</li>\n<li><a href=\"https://doc.rust-lang.org/src/alloc/sync.rs.html#303-312\">ArcInner çš„ç»“æ„</a>ã€‚</li>\n<li>Rust çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¸€ç›´åœ¨è¿›åŒ–ï¼Œè¿›åŒ–æ–¹å‘æ˜¯åœ¨å¸¸è§çš„åœºæ™¯ä¸‹ï¼Œå°½é‡é¿å…å› ä¸ºç”Ÿå‘½å‘¨æœŸçš„å¤„ç†ï¼Œä»£ç ä¸å¾—ä¸æ¢æˆä¸é‚£ä¹ˆå®¹æ˜“é˜…è¯»çš„å†™ä½œæ–¹å¼ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</li>\n</ol><pre><code class=\"language-rust\">use std::collections::HashMap;\n\nfn main() {\n    let mut map = HashMap::new();\n    map.insert(\"hello\", \"world\");\n    let key = \"hello1\";\n\n    // æŒ‰ç…§ä¹‹å‰çš„è¯´æ³•ï¼Œè¿™æ®µä»£ç æ— æ³•ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºåŒä¸€ä¸ª scope ä¸‹ä¸èƒ½æœ‰ä¸¤ä¸ªå¯å˜å¼•ç”¨\n    // ä½†å› ä¸º RFC2094 non-lexical lifetimesï¼ŒRust ç¼–è¯‘å™¨å¯ä»¥å¤„ç†è¿™ä¸ªåœºæ™¯ï¼Œ\n    // å› ä¸ºå½“ None æ—¶ï¼Œmap.get_mut() çš„å¼•ç”¨å®é™…å·²ç»ç»“æŸ\n    match map.get_mut(key) /* &lt;----- å¯å˜å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ° match ç»“æœ */ {\n        Some(v) =&gt; do_something(v),\n        None =&gt; {\n            map.insert(key, \"tyr\"); // &lt;--- è¿™é‡Œåˆè·å¾—äº†ä¸€ä¸ªå¯å˜å¼•ç”¨\n        }\n    }\n}\n\nfn do_something(_v: &amp;mut &amp;str) {\n    todo!()\n}\n</code></pre><p>å¦‚æœä½ å¯¹æ­¤æ„Ÿå…´è¶£ï¼Œæƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥å‚çœ‹ï¼š<a href=\"https://rust-lang.github.io/rfcs/2094-nll.html\">RFC2094 - Non-lexical lifetimes</a>ã€‚æˆ‘ä»¬åœ¨å¹³æ—¶å†™ä»£ç æ—¶ï¼Œå¯ä»¥å°±åƒè¿™æ®µä»£ç è¿™æ ·å…ˆæŒ‰ç…§æ­£å¸¸çš„æ–¹å¼å»å†™ï¼Œå¦‚æœç¼–è¯‘å™¨æŠ±æ€¨ï¼Œå†åˆ†æå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¢ä¸ªå†™æ³•ã€‚æ­¤å¤–ï¼Œéšæ—¶ä¿æŒä½ çš„ Rust ç‰ˆæœ¬æ˜¯æœ€æ–°çš„ï¼Œä¹Ÿæœ‰åŠ©äºè®©ä½ çš„ä»£ç æ€»æ˜¯å¯ä»¥ä½¿ç”¨æœ€ç®€å•çš„æ–¹å¼æ’°å†™ã€‚</p>","comments":[{"had_liked":false,"id":312048,"user_name":"è®°äº‹æœ¬","can_delete":false,"product_type":"c1","uid":1401568,"ip_address":"","ucode":"FA942636EE0CC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","comment_is_top":true,"comment_ctime":1631606209,"is_pvip":false,"replies":[{"id":"113089","content":"&amp;str ä¸æ˜¯é™æ€åŒºåŸŸå†…å­˜çš„æŒ‡é’ˆã€‚&amp;str æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œä¸€ä¸ªå¸¦æœ‰é•¿åº¦çš„èƒ–æŒ‡é’ˆï¼ŒæŒ‡å‘å­—ç¬¦ä¸²å®é™…çš„ä½ç½®ã€‚å®ƒå¯ä»¥æŒ‡å‘ &quot;hello world&quot;ï¼Œæ­¤æ—¶æŒ‡é’ˆæŒ‡åˆ°äº† RODATA&#47;STRING section é‡Œ &quot;hello&quot; çš„åœ°å€ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ &#39;staticï¼›ä¹Ÿå¯ä»¥æŒ‡å‘ &quot;hello world&quot;.to_string()ï¼Œæ­¤æ—¶æŒ‡é’ˆæŒ‡å‘äº†è¿™ä¸ªå­—ç¬¦ä¸²çš„å †åœ°å€ï¼Œç”Ÿå‘½å‘¨æœŸæ˜¯ &#39;aã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631635573,"ip_address":"","comment_id":312048,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233721157958001e+18","product_id":100085301,"comment_content":"&amp;str æ˜¯é™æ€åŒºåŸŸå†…å­˜çš„ä¸€ä¸ªæŒ‡é’ˆ<br>String æ˜¯æŠŠå­—ç¬¦åˆ†é…åœ¨å †ä¸Šï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡as_strä»¥æŒ‡é’ˆå½¢å¼è¿”å›ï¼Œå°±æ˜¯&amp;strç±»å‹äº†ï¼Œæ•°æ®ç±»å‹ç›¸åŒï¼Œåˆ†é…çš„åŒºåŸŸä¸åŒï¼Œç”Ÿå‘½å‘¨æœŸä¸åŒ,è¿™æ ·è¯´æ³•å¯¹å—ï¼Ÿ","like_count":19,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526841,"discussion_content":"&amp;amp;str ä¸æ˜¯é™æ€åŒºåŸŸå†…å­˜çš„æŒ‡é’ˆã€‚&amp;amp;str æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œä¸€ä¸ªå¸¦æœ‰é•¿åº¦çš„èƒ–æŒ‡é’ˆï¼ŒæŒ‡å‘å­—ç¬¦ä¸²å®é™…çš„ä½ç½®ã€‚å®ƒå¯ä»¥æŒ‡å‘ &amp;quot;hello world&amp;quot;ï¼Œæ­¤æ—¶æŒ‡é’ˆæŒ‡åˆ°äº† RODATA/STRING section é‡Œ &amp;quot;hello&amp;quot; çš„åœ°å€ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ &amp;#39;staticï¼›ä¹Ÿå¯ä»¥æŒ‡å‘ &amp;quot;hello world&amp;quot;.to_string()ï¼Œæ­¤æ—¶æŒ‡é’ˆæŒ‡å‘äº†è¿™ä¸ªå­—ç¬¦ä¸²çš„å †åœ°å€ï¼Œç”Ÿå‘½å‘¨æœŸæ˜¯ &amp;#39;aã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1631635573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315926,"user_name":"dotfiles","can_delete":false,"product_type":"c1","uid":1217723,"ip_address":"","ucode":"F915599EC2F6E5","user_header":"https://static001.geekbang.org/account/avatar/00/12/94/bb/1c8384a0.jpg","comment_is_top":false,"comment_ctime":1634049631,"is_pvip":false,"replies":[{"id":"115284","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1635132473,"ip_address":"","comment_id":315926,"utype":1}],"discussion_count":2,"race_medal":0,"score":"66058559071","product_id":100085301,"comment_content":"1. &amp;stræ˜¯ä¸€ä¸ªåœ¨æ ˆä¸Šåˆ†é…çš„èƒ–æŒ‡é’ˆ,è€Œä¸”å®ç°äº†copy trait<br>```<br>let a = &quot;hello&quot;;<br>let b = a;<br>println!(&quot;a: {}, b: {}&quot;, a, b);<br>println!(&quot;&amp;a: {:p}, &amp;b: {:p}&quot;, &amp;a, &amp;b); <br>```<br>è¾“å‡ºå¦‚ä¸‹:<br>```<br>a: hello, b: hello<br>&amp;a: 0x7ffe7f4f3788, &amp;b: 0x7ffe7f4f3798<br>```<br>é¦–å…ˆ,aèµ‹ç»™bä¹‹å,aä¾ç„¶å¯ä»¥è¯»å–.å› æ­¤æ²¡æœ‰è½¬ç§»æ‰€æœ‰æƒ,è¿›ä¸€æ­¥åœ°,aå…¶å®æ˜¯strçš„ä¸€ä¸ªä¸å¯å˜å¼•ç”¨.strçš„ä¸å¯å˜å¼•ç”¨å…è®¸æœ‰å¤šä»½.è¿™äº›ä¸å¯å˜å¼•ç”¨éœ€è¦æ»¡è¶³å…¶ç”Ÿå‘½å‘¨æœŸå°äºstrå³å¯.<br>ç„¶å,&amp;aå’Œ&amp;bä¹‹é—´åœ¨64ä½ç³»ç»Ÿä¸Š,ç›¸å·®16ä¸ªå­—èŠ‚.åˆšå¥½æ˜¯ä¸€ä¸ªptrå’Œä¸€ä¸ªsizeçš„å¤§å°.<br><br>2. æ€è€ƒé¢˜ä¸€<br>ç›´æ¥è¿è¡Œä»£ç ,åœ¨ç¼–è¯‘å™¨çš„æç¤ºä¸‹,å°±ä¼šæ·»åŠ æ ‡æ³¨å¦‚ä¸‹:<br>```<br>pub fn strtok&lt;&#39;a&gt;(s: &amp;&#39;a mut &amp;str, delimiter: char) -&gt; &amp;&#39;a str {...}<br>```<br>å†è¿è¡Œ,å°±ä¼šæç¤ºs1,åŒæ—¶å­˜åœ¨å¯å˜å’Œä¸å¯å˜å¼•ç”¨. ä¸€å¼€å§‹æ²¡æƒ³æ˜ç™½,åŸæ¥æ˜¯s1çš„å¯å˜å¼•ç”¨çš„å‘¨æœŸå’Œè¿”å›å€¼ç»‘å®šäº†.åœ¨helloä½¿ç”¨ç»“æŸå‰,ç¼–è¯‘å™¨è®¤ä¸ºs1çš„å¯å˜å¼•ç”¨ä¸€ç›´å­˜åœ¨.<br>é‚£ä¹ˆæ ¹æ®è¿™ä¸ªç†è§£,å…¶å®è¿™æ ·æ ‡æ³¨ä¹Ÿå¯ä»¥.åªè¦æŠŠæ‰“å°æ‹†å¼€å°±è¡Œäº†.<br>```<br>fn main() {<br>    ...<br>    println!(&quot;hello is: {}, s: {}&quot;, hello, s);<br>    println!(&quot;s1: {}&quot;, s1);<br>}<br>```<br>è¿è¡Œä¸€ä¸‹,æœç„¶å¯ä»¥é€šè¿‡.<br><br>3. å¯¹äºç”Ÿå‘½å‘¨æœŸæ£€æŸ¥çš„ä¸€ç‚¹æ€è€ƒ<br>åœ¨å«æœ‰å¼•ç”¨çš„å‡½æ•°è°ƒç”¨ä¸­,ç¼–è¯‘å™¨ä¼šå°è¯•æ ¹æ®è§„åˆ™è¿›è¡Œè¡¥é½,å¦‚æœæ— æ³•è‡ªåŠ¨è¡¥é½,å°±ä¼šè¦æ±‚å¼€å‘è€…è¿›è¡Œæ ‡æ³¨.<br>å¼€å‘è€…æ ‡æ³¨çš„ç”Ÿå‘½å‘¨æœŸä¼šåœ¨ä¸¤ä¸ªåœ°æ–¹ç”Ÿæ•ˆ,ä¸€æ˜¯å‡½æ•°çš„å®ç°ä¸­,ä¼šå»æ ¡éªŒæ ‡æ³¨çš„æ­£ç¡®æ€§, å¦ä¸€ä¸ªæ˜¯åœ¨å‡½æ•°çš„è°ƒç”¨ç‚¹ä¹Ÿä¼šæ ¹æ®å‡½æ•°å£°æ˜ä¸­çš„æ ‡æ³¨,å¯¹å…¥å‚å’Œè¿”å›å€¼è¿›è¡Œæ£€æŸ¥.<br>é‚£ä¹ˆå‡½æ•°å£°æ˜ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨,å…¶å®å°±æ˜¯åŒæ—¶çº¦æŸå®ç°æ–¹å’Œè°ƒç”¨æ–¹çš„çº¦å®š.åœ¨æ ‡æ³¨çš„çº¦æŸå…³ç³»ä¸­,å¦‚æœæ£€æŸ¥å‘ç°è°ƒç”¨æ–¹å’Œå®ç°æ–¹éƒ½æ»¡è¶³çº¦æŸ,åˆ™ç¼–è¯‘é€šè¿‡.","like_count":16,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528205,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635132473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202697,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5a/09/afa3e112.jpg","nickname":"æ¸…é£å¾æ¥","note":"","ucode":"2AAA5B8DE30DF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547198,"discussion_content":"&amp;str å®ç°äº†Copy Traitï¼Œä»æ–‡æ¡£ä¸­ä»€ä¹ˆä½ç½®å¯ä»¥çœ‹åˆ°ï¼Œæ‰¾äº†åŠå¤©æ²¡æ‰¾åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642577294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311812,"user_name":"Marvichov","can_delete":false,"product_type":"c1","uid":1111835,"ip_address":"","ucode":"7482099415C41C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/1b/db7a0edc.jpg","comment_is_top":false,"comment_ctime":1631487765,"is_pvip":false,"replies":[{"id":"113024","content":"1. å¥½é—®é¢˜ã€‚è¿˜æ˜¯è¦ä»ç”Ÿå‘½å‘¨æœŸä¸­å‚æ•°å’Œè¿”å›å€¼çš„å…³ç³»æ¥çœ‹ï¼Œå› ä¸ºç°åœ¨æˆ‘ä»¬æŠŠå¯¹å­—ç¬¦ä¸²çš„å¯å˜å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸå’Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸå…³è”èµ·æ¥äº†ï¼Œhello å¾—åˆ°äº† strtok çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ä»ç¼–è¯‘å™¨çœ‹æ¥ï¼Œ&amp;mut s1 çš„ç”Ÿå‘½å‘¨æœŸå¹¶æ²¡æœ‰ç»“æŸï¼Œæ‰€ä»¥å‘ç”Ÿäº† &amp;mut å’Œ &amp; åŒæ—¶å­˜åœ¨çš„å±€é¢ã€‚<br>2. ğŸ‘<br>3. èµ<br>4. æˆ‘è§‰å¾—è¿™æ˜¯ä¸ªç¿»è¯‘é£æ ¼é—®é¢˜ï¼Œä»å­—é¢æ„æ€ä¸Šçœ‹ç”Ÿå‘½æœŸæ›´å¥½ï¼Œä½†å¤§å®¶æœ€æƒ¯ç”¨çš„è¯´æ³•å·²ç»çº¦å®šä¿—ç§°ï¼Œè€Œä¸”ä¸å…‰ Rustï¼Œå…¶å®ƒè¯­è¨€åœ¨è°ˆåˆ° lifetime æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆæ¯”å¦‚ reactï¼‰ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸæ›´å¥½ã€‚å®ƒèµ·ç æ¯”ç¦å°”æ‘©æ–¯çš„è¯‘åè¦å¥½å§ lolã€‚<br>5. ä¸ä¼šã€‚ç”Ÿå‘½å‘¨æœŸåœ¨å•ä½“åŒ–ä¹‹å‰å°±ä¼šè¢«å¤„ç†æ‰ã€‚å®ƒæ›´å¤šä»¥ç¼–è¯‘å™¨çš„é”™è¯¯å‘ˆç°å‡ºæ¥ã€‚å¯¹ç¼–è¯‘å™¨æ¥è¯´ï¼Œåªè¦æ»¡è¶³çº¦æŸï¼Œæ›´é•¿çš„ç”Ÿå‘½å‘¨æœŸçš„å˜é‡ä¹Ÿå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼ˆæ¯”å¦‚ &amp;&#39;static str è‡³äº &amp;&#39;a strï¼‰ã€‚å¦‚æœç”Ÿå‘½å‘¨æœŸåšå•ä½“åŒ–ï¼Œä¸‹é¢çš„ä»£ç å°±å¯ä»¥ç¼–è¯‘ï¼Œç„¶è€Œä¸è¡Œï¼š<br><br>```rust<br>trait Print {<br>    fn print(self);<br>}<br><br>&#47;&#47; ç”Ÿå‘½å‘¨æœŸæ— æ³•åƒæ³›å‹é‚£æ ·æœ‰å¤šä¸ªå®ç°<br>&#47;&#47; impl&lt;&#39;a&gt; Print for &amp;&#39;a str {<br>&#47;&#47;     fn print(self) {<br>&#47;&#47;         println!(&quot;Arbitrary str: {}&quot;, self);<br>&#47;&#47;     }<br>&#47;&#47; }<br><br>impl Print for &amp;&#39;static str {<br>    fn print(self) {<br>        println!(&quot;&#39;static str: {}&quot;, self);<br>    }<br>}<br><br>&#47;&#47; ä¹Ÿæ— æ³•å•ä½“åŒ–<br>fn print_str&lt;&#39;a&gt;(s: &amp;&#39;a str) {<br>    s.print()<br>}<br><br>fn main() {<br>    let s = &quot;hello, world!&quot;;<br>    s.print();<br>    print_str(s);<br>}<br>```<br>playground: https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=b767ef1a9d9e265252c1ad29d31176b0","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631545156,"ip_address":"","comment_id":311812,"utype":1}],"discussion_count":3,"race_medal":0,"score":"53171095317","product_id":100085301,"comment_content":"<br>1. å…¥å‚ s: &amp;&#39;a mut &amp;str å˜æˆäº† &amp;&#39;a mut &amp;&#39;a str; å› ä¸ºouter ref must outlive inter ref; ç›¸å½“äºæŠŠmutable borrowçš„lifetime extendæˆäº†&amp;strçš„lifetime;  å¾ˆå¥‡æ€ª, å°±ç®—å¦‚æ­¤, å…¥å‚`s` åœ¨å‡½æ•°callç»“æŸä¹‹åå°±end its life; ä¸ºå•¥è¿˜èƒ½extend it lifeåˆ°å‡½æ•°invocationåå‘¢? å¸Œæœ›è€å¸ˆè§£ç­”ä¸€ä¸‹<br><br>```<br>17 | let hello = strtok(&amp;mut s1, &#39; &#39;);<br>   | ------- mutable borrow occurs here<br>18 | println!(&quot;hello is: {}, s1: {}, s: {}&quot;, hello, s1, s);<br>   | -----------------------------------------------^^-----<br>   | | |<br>   | | immutable borrow occurs here<br>```<br><br>https:&#47;&#47;doc.rust-lang.org&#47;nomicon&#47;lifetime-elision.html; <br>```<br>pub fn strtok&lt;&#39;a&gt;(s: &amp;&#39;a mut &amp;str, delimiter: char) -&gt; &amp;&#39;a str {<br>```<br>æœ¬ä»¥ä¸ºoutput paramä¼šè¢«elide; çœ‹æ¥æœ‰æ˜¾ç¤ºæ ‡æ³¨, ç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨elide<br><br>2. åœ¨å®è·µä¸­æ…¢æ…¢æœ‰æ‰€é¢†æ‚Ÿ: https:&#47;&#47;doc.rust-lang.org&#47;book&#47;ch10-03-lifetime-syntax.html#lifetime-annotations-in-function-signatures<br>&gt; One lifetime annotation by itself doesnâ€™t have much meaning, because the annotations are meant to tell Rust how generic lifetime parameters of multiple references relate to each other. <br><br>3. æ­»çµä¹¦æ¯”the bookè®²å¾—å¥½: https:&#47;&#47;doc.rust-lang.org&#47;nomicon&#47;lifetimes.html; ä»ç¼–è¯‘å™¨çš„è§’åº¦å»minimize the scope of a borrowèƒ½æ›´å¥½ç†è§£lifetime<br><br><br>4. ä»¥å‰çœ‹åˆ°æœ‰äººè¯„è®º, è¯´lifetimeç¿»è¯‘æˆç”Ÿå‘½**å‘¨**æœŸå¾ˆè¯¯å¯¼å¤§å®¶: æ­»äº†å°±æ­»äº†, ä¸ä¼šå‘¨è€Œå¤å§‹åœ°å¤æ´»; æ›´å¥½çš„ç¿»è¯‘æ˜¯ç”Ÿå‘½æœŸ. æˆ‘è¡¨ç¤ºèµåŒ; ä¸çŸ¥è€å¸ˆå¦‚ä½•çœ‹?<br><br>5. lifetimeæ˜¯æ³›å‹çš„ä¸€éƒ¨åˆ†; å¯¹ä¸åŒçš„&#39;a, æ˜¯ä¸æ˜¯strtok&lt;&#39;a&gt;éƒ½è¦ç”Ÿæˆä¸åŒçš„å•ä½“åŒ–å‘¢? ç¼–è¯‘ç”Ÿæˆåçš„ä»£ç , è¿˜æœ‰&#39;açš„ä¿¡æ¯å—?","like_count":13,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526752,"discussion_content":"1. å¥½é—®é¢˜ã€‚è¿˜æ˜¯è¦ä»ç”Ÿå‘½å‘¨æœŸä¸­å‚æ•°å’Œè¿”å›å€¼çš„å…³ç³»æ¥çœ‹ï¼Œå› ä¸ºç°åœ¨æˆ‘ä»¬æŠŠå¯¹å­—ç¬¦ä¸²çš„å¯å˜å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸå’Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸå…³è”èµ·æ¥äº†ï¼Œhello å¾—åˆ°äº† strtok çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ä»ç¼–è¯‘å™¨çœ‹æ¥ï¼Œ&amp;amp;mut s1 çš„ç”Ÿå‘½å‘¨æœŸå¹¶æ²¡æœ‰ç»“æŸï¼Œæ‰€ä»¥å‘ç”Ÿäº† &amp;amp;mut å’Œ &amp;amp; åŒæ—¶å­˜åœ¨çš„å±€é¢ã€‚\n2. ğŸ‘\n3. èµ\n4. æˆ‘è§‰å¾—è¿™æ˜¯ä¸ªç¿»è¯‘é£æ ¼é—®é¢˜ï¼Œä»å­—é¢æ„æ€ä¸Šçœ‹ç”Ÿå‘½æœŸæ›´å¥½ï¼Œä½†å¤§å®¶æœ€æƒ¯ç”¨çš„è¯´æ³•å·²ç»çº¦å®šä¿—ç§°ï¼Œè€Œä¸”ä¸å…‰ Rustï¼Œå…¶å®ƒè¯­è¨€åœ¨è°ˆåˆ° lifetime æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆæ¯”å¦‚ reactï¼‰ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸæ›´å¥½ã€‚å®ƒèµ·ç æ¯”ç¦å°”æ‘©æ–¯çš„è¯‘åè¦å¥½å§ lolã€‚\n5. ä¸ä¼šã€‚ç”Ÿå‘½å‘¨æœŸåœ¨å•ä½“åŒ–ä¹‹å‰å°±ä¼šè¢«å¤„ç†æ‰ã€‚å®ƒæ›´å¤šä»¥ç¼–è¯‘å™¨çš„é”™è¯¯å‘ˆç°å‡ºæ¥ã€‚å¯¹ç¼–è¯‘å™¨æ¥è¯´ï¼Œåªè¦æ»¡è¶³çº¦æŸï¼Œæ›´é•¿çš„ç”Ÿå‘½å‘¨æœŸçš„å˜é‡ä¹Ÿå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼ˆæ¯”å¦‚ &amp;amp;&amp;#39;static str è‡³äº &amp;amp;&amp;#39;a strï¼‰ã€‚å¦‚æœç”Ÿå‘½å‘¨æœŸåšå•ä½“åŒ–ï¼Œä¸‹é¢çš„ä»£ç å°±å¯ä»¥ç¼–è¯‘ï¼Œç„¶è€Œä¸è¡Œï¼š\n\n```rust\ntrait Print {\n    fn print(self);\n}\n\n// ç”Ÿå‘½å‘¨æœŸæ— æ³•åƒæ³›å‹é‚£æ ·æœ‰å¤šä¸ªå®ç°\n// impl&amp;lt;&amp;#39;a&amp;gt; Print for &amp;amp;&amp;#39;a str {\n//     fn print(self) {\n//         println!(&amp;quot;Arbitrary str: {}&amp;quot;, self);\n//     }\n// }\n\nimpl Print for &amp;amp;&amp;#39;static str {\n    fn print(self) {\n        println!(&amp;quot;&amp;#39;static str: {}&amp;quot;, self);\n    }\n}\n\n// ä¹Ÿæ— æ³•å•ä½“åŒ–\nfn print_str&amp;lt;&amp;#39;a&amp;gt;(s: &amp;amp;&amp;#39;a str) {\n    s.print()\n}\n\nfn main() {\n    let s = &amp;quot;hello, world!&amp;quot;;\n    s.print();\n    print_str(s);\n}\n```\nplayground: https://play.rust-lang.org/?version=stable&amp;amp;mode=debug&amp;amp;edition=2018&amp;amp;gist=b767ef1a9d9e265252c1ad29d31176b0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631545156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111835,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/1b/db7a0edc.jpg","nickname":"Marvichov","note":"","ucode":"7482099415C41C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393771,"discussion_content":"æ„Ÿè§‰æœ€å¥½çš„åŠæ³•å°±æ˜¯çœ‹, ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸcontextä¸‹, æœ‰æ²¡æœ‰ç”Ÿæˆå¤šä»½ print_strçš„ä»£ç ; ç„¶è€Œ, ç›®å‰æˆ‘è¿˜ä¸çŸ¥é“æ€ä¹ˆåš T_T","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631590355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111835,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/1b/db7a0edc.jpg","nickname":"Marvichov","note":"","ucode":"7482099415C41C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393767,"discussion_content":"æ„Ÿè°¢è€å¸ˆè§£ç­”!\n\n> hello å¾—åˆ°äº† strtok çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ä»ç¼–è¯‘å™¨çœ‹æ¥ï¼Œ&amp;mut s1 çš„ç”Ÿå‘½å‘¨æœŸå¹¶æ²¡æœ‰ç»“æŸï¼Œæ‰€ä»¥å‘ç”Ÿäº† &amp;mut å’Œ &amp; åŒæ—¶å­˜åœ¨çš„å±€é¢ã€‚\n\nç›¸å½“äºæŠŠ**äººä¸º**å»¶é•¿äº†å…¥å‚çš„å‘¨æœŸ? ç›¸å½“äºåœ¨strtokä¹‹å¤–åŠ äº†ä¸ªtmp?\n\n```\nfn main() {\n    let s = &#34;hello world&#34;.to_owned();\n    let mut s1 = s.as_str();\n    let tmp = &amp;mut s1; // äººä¸ºå»¶é•¿\n    let hello = strtok(tmp, &#39; &#39;);\n    println!(&#34;hello is: {}, s1: {}, s: {}&#34;, hello, s1, s);\n}\n```\n\n5. è€å¸ˆçš„é‚£ä¸ªæœ‰ç‚¹åƒcppé‡Œé¢çš„specialization.\n\nå›å®¶åˆæƒ³äº†ä¸€æƒ³, æ”¹åŠ¨äº†ä¸€ä¸‹ä»£ç , å¯¹&#39;aåŠ ä¸ªboundå°±èƒ½ç¼–è¯‘äº†\n\n```\n// è¯·é—®: è¿™ç®—å•ä½“åŒ–æˆåŠŸäº†å—?\nfn print_str<&#39;a>(s: &amp;&#39;a str) where &#39;a: &#39;static {\n    s.print()\n}\n```\n\nhttps://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=e2b842e42dcd8648994f9072cb836838","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631589777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311901,"user_name":"äºšä¼¦ç¢è¯­","can_delete":false,"product_type":"c1","uid":1014505,"ip_address":"","ucode":"F32E5E1B63CC90","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/e9/da5c0203.jpg","comment_is_top":false,"comment_ctime":1631526413,"is_pvip":false,"replies":[{"id":"113018","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631543023,"ip_address":"","comment_id":311901,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40286232077","product_id":100085301,"comment_content":"ä¼šå‘ç”Ÿæ‰€æœ‰æƒçš„å†²çªï¼Œä¸æ»¡è¶³ä¸€ä¸ªå€¼å¯ä»¥æœ‰å”¯ä¸€ä¸€ä¸ªæ´»è·ƒçš„å¯å˜å¼•ç”¨ã€‚å¯å˜å¼•ç”¨ï¼ˆå†™ï¼‰å’Œåªè¯»å¼•ç”¨ï¼ˆè¯»ï¼‰æ˜¯äº’æ–¥çš„å…³ç³»ã€‚ <br>åŸå› æ˜¯å› ä¸ºè®©  s1çš„mutå¼•ç”¨å’Œåªè¯»å¼•ç”¨æœ‰ä¸€æ ·çš„scopeï¼Œå°±ä¼šè¿åä¸Šè¿°çš„è§„åˆ™ï¼Œ&amp;mut &amp;&#39;a stråˆ™æ˜¯s1çš„å¯å˜å¼•ç”¨çš„scopeåªåœ¨strtokå†…ã€‚æ‰€ä»¥ä¸è¿æ³•ä¸Šè¾¹çš„è§„åˆ™","like_count":10,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526787,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631543023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321283,"user_name":"Ignis","can_delete":false,"product_type":"c1","uid":2837051,"ip_address":"","ucode":"94A55C81E2F86C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEL7ibAFViaJqhTRquzLKhS0SebmHON4RKeaL9I9R9wKHWt6ehcu0QtN8icvmPicU8wvDYIZiaaxqGWSxlw/132","comment_is_top":false,"comment_ctime":1636736698,"is_pvip":false,"replies":[{"id":"118933","content":"å¯¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639853812,"ip_address":"","comment_id":321283,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18816605882","product_id":100085301,"comment_content":"æŒ‰ç…§æœ¬èŠ‚çš„è§£é‡Šï¼Œç¼–è¯‘å™¨ä¼šç»™æ¯ä¸€ä¸ªå¼•ç”¨å‚æ•°éƒ½ç”Ÿæˆlifetimeæ ‡è®°ï¼Œé‚£ä¹ˆstrtokè¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œå¦‚æœæˆ‘ä»¬æ ‡è®°äº†ä¸€éƒ¨åˆ†ï¼Œç¼–è¯‘å™¨æ˜¯ä¸æ˜¯ä¼šè‡ªåŠ¨æŠŠçœç•¥çš„æ ‡è®°è¡¥ä¸Šï¼Œä¹Ÿå°±æ˜¯è¿™æ ·ï¼š<br><br>pub fn strtok&lt;&#39;a&gt;(s: &amp;mut &amp;&#39;a str, delimiter: char) -&gt; &amp;&#39;a str<br>==&gt;<br>pub fn strtok&lt;&#39;a, &#39;b&gt;(s: &amp;&#39;b mut &amp;&#39;a str, delimiter: char) -&gt; &amp;&#39;a str<br><br>æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ ‡è®°æ”¹ä¸ºï¼š<br>pub fn strtok&lt;&#39;a&gt;(s: &amp;&#39;a mut &amp;str, delimiter: char) -&gt; &amp;&#39;a str<br>ç¼–è¯‘å™¨ä¼šå¤„ç†æˆï¼š<br>pub fn strtok&lt;&#39;a, &#39;b&gt;(s: &amp;&#39;a mut &amp;&#39;b str, delimiter: char) -&gt; &amp;&#39;a str<br><br>è¿™ç§æƒ…å†µä¸‹s1çš„ç”Ÿå‘½å‘¨æœŸè¢«så‚æ•°ä¼ é€’åˆ°è¿”å›å€¼åˆ°helloï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šæç¤ºs1æœ‰å¯å˜å¼•ç”¨ã€‚<br><br>ä¸çŸ¥é“è¿™ä¹ˆç†è§£å¯¹ä¸å¯¹<br>","like_count":5,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539894,"discussion_content":"å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639853812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314523,"user_name":"Geek_1b11b3","can_delete":false,"product_type":"c1","uid":2768844,"ip_address":"","ucode":"6D3AD8EAD46DC4","user_header":"","comment_is_top":false,"comment_ctime":1633173165,"is_pvip":false,"replies":[{"id":"113969","content":"ä¸€ä¸ªå¼•ç”¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸ","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1633320109,"ip_address":"","comment_id":314523,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18813042349","product_id":100085301,"comment_content":"é™ˆè€å¸ˆä½ å¥½ï¼š<br> â€&amp;mut &amp;str æ·»åŠ ç”Ÿå‘½å‘¨æœŸåå˜æˆ  &amp;&#39;b mut &amp;&#39;a strâ€œï¼Œä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ ‡æ³¨æˆè¿™æ ·ï¼Ÿä¸æ˜¯ä¸€ä¸ªå‚æ•°ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527709,"discussion_content":"ä¸€ä¸ªå¼•ç”¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633320109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312206,"user_name":"Arthur","can_delete":false,"product_type":"c1","uid":1784009,"ip_address":"","ucode":"1C064405490769","user_header":"https://static001.geekbang.org/account/avatar/00/1b/38/c9/63ea8fe6.jpg","comment_is_top":false,"comment_ctime":1631682830,"is_pvip":true,"replies":[{"id":"113167","content":"1. æ­£ç¡®ï¼<br>2. å¥½é—®é¢˜ï¼Œç†è®ºä¸Šå¯ä»¥ï¼Œä½†ç¼–è¯‘å™¨ç›®å‰æ²¡æœ‰åšè¿™æ ·çš„äº‹æƒ…ï¼Œä¸»è¦æ˜¯ä»£ç å¯è¯»æ€§çš„æ‹…å¿§ã€‚å¯ä»¥çœ‹ï¼šhttps:&#47;&#47;github.com&#47;rust-lang&#47;rfcs&#47;blob&#47;master&#47;text&#47;0141-lifetime-elision.md#lifetime-elision-in-structsã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631759693,"ip_address":"","comment_id":312206,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18811552014","product_id":100085301,"comment_content":"1. <br>- ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ä¸º`pub fn strtok&lt;&#39;a&gt;(s: &amp;&#39;a mut &amp;str, delimiter: char) -&gt; &amp;&#39;a str `<br>- é”™è¯¯ä¿¡æ¯ä¸º<br>```<br>error[E0502]: cannot borrow `s1` as immutable because it is also borrowed as mutable<br>  --&gt; src&#47;main.rs:18:52<br>   |<br>17 |     let hello = strtok(&amp;mut s1, &#39; &#39;);<br>   |                        ------- mutable borrow occurs here<br>18 |     println!(&quot;hello is: {}, s1: {}, s: {}&quot;, hello, s1, s);<br>   |     -----------------------------------------------^^-----<br>   |     |                                              |<br>   |     |                                              immutable borrow occurs here<br>   |     mutable borrow later used here<br><br>error: aborting due to previous error<br>```<br>- åŸå› æ˜¯ï¼Œåœ¨è¿™æ ·æ‰‹å·¥æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸä»¥åï¼Œå¯å˜å¼•ç”¨s1çš„å£°æ˜å‘¨æœŸå°±å’Œè¿”å›å€¼helloä¸€æ ·äº†ï¼Œéƒ½å­˜æ´»äºmainå‡½æ•°ä½œç”¨åŸŸä¸­ã€‚ä½†æ˜¯åŒæ—¶s1åœ¨mainå‡½æ•°çš„ä½œç”¨åŸŸä¸­ï¼Œåœ¨18è¡Œåˆä½œä¸ºåªè¯»å¼•ç”¨åœ¨printlnï¼ä¸­ä½¿ç”¨ã€‚è¿èƒŒè§„åˆ™ï¼šåœ¨ä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œæ´»è·ƒçš„å¯å˜å¼•ç”¨ï¼ˆå†™ï¼‰å’Œåªè¯»å¼•ç”¨ï¼ˆè¯»ï¼‰æ˜¯äº’æ–¥çš„ï¼Œä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚å› æ­¤ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚<br><br>2. åœ¨06è®²ä¸­ï¼Œ<br>```rust<br>struct UrlFetcher&lt;&#39;a&gt;(pub(crate) &amp;&#39;a str);<br>```<br>è¿™ä¸ªstructåªæœ‰ä¸€ä¸ªæˆå‘˜ï¼Œä¸ºä»€ä¹ˆä¹Ÿéœ€è¦æ‰‹åŠ¨æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸå‘¢ï¼Ÿç¼–è¯‘å™¨ä¸èƒ½åƒä¸ºåªæœ‰ä¸€ä¸ªå¼•ç”¨å‚æ•°çš„å‡½æ•°é‚£æ ·è‡ªåŠ¨ç”Ÿæˆç”Ÿå‘½å‘¨æœŸçš„æ ‡è®°å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526895,"discussion_content":"1. æ­£ç¡®ï¼\n2. å¥½é—®é¢˜ï¼Œç†è®ºä¸Šå¯ä»¥ï¼Œä½†ç¼–è¯‘å™¨ç›®å‰æ²¡æœ‰åšè¿™æ ·çš„äº‹æƒ…ï¼Œä¸»è¦æ˜¯ä»£ç å¯è¯»æ€§çš„æ‹…å¿§ã€‚å¯ä»¥çœ‹ï¼šhttps://github.com/rust-lang/rfcs/blob/master/text/0141-lifetime-elision.md#lifetime-elision-in-structsã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631759693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311923,"user_name":"å‘¨çƒ¨","can_delete":false,"product_type":"c1","uid":1355560,"ip_address":"","ucode":"6DAE79E4966CEF","user_header":"https://static001.geekbang.org/account/avatar/00/14/af/28/cc69ea4b.jpg","comment_is_top":false,"comment_ctime":1631531403,"is_pvip":false,"replies":[{"id":"113017","content":"å¯¹ï¼<br><br>çš„ç¡®ï¼Œåœ¨ä¸æ˜¯ç‰¹åˆ«ç†è§£ &amp;mut &amp;str åœ¨å†…å­˜ä¸­çš„æ„ä¹‰æ—¶å®¹æ˜“å‡ºé”™ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²å¼•ç”¨çš„å¯å˜æŒ‡é’ˆã€‚è¿™æ ·ï¼Œè¿”å›å€¼å’Œè°äº§ç”Ÿçº¦æŸå°±ä¸€ç›®äº†ç„¶äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631543004,"ip_address":"","comment_id":311923,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10221465995","product_id":100085301,"comment_content":"1. é”™è¯¯æ˜¯ cannot borrow `s1` as immutable because it is also borrowed as mutableã€‚æ„Ÿè§‰åº”è¯¥æ˜¯è¿™æ ·å†™ï¼Œå°±å˜æˆäº†å¯å˜å€Ÿç”¨&amp;mutçš„ç”Ÿå‘½å‘¨æœŸå’Œè¿”å›å€¼helloçš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·äº†ï¼Œæ‰€ä»¥è¿™ä¸ªå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸåœ¨å‡½æ•°ç»“æŸåä»æ²¡æœ‰ç»“æŸï¼Œæ‰€ä»¥äº§ç”Ÿäº†ä½œç”¨åŸŸå†²çªã€‚æˆ‘ä¹‹å‰åŠ ç”Ÿå‘½å‘¨æœŸçš„æ—¶å€™ç¬¬ä¸€ç›´è§‰ä¹Ÿæ˜¯åŠ åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œæ„Ÿè§‰çœŸçš„å¾ˆå®¹æ˜“å‡ºé”™ã€‚","like_count":3,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526800,"discussion_content":"å¯¹ï¼\n\nçš„ç¡®ï¼Œåœ¨ä¸æ˜¯ç‰¹åˆ«ç†è§£ &amp;amp;mut &amp;amp;str åœ¨å†…å­˜ä¸­çš„æ„ä¹‰æ—¶å®¹æ˜“å‡ºé”™ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²å¼•ç”¨çš„å¯å˜æŒ‡é’ˆã€‚è¿™æ ·ï¼Œè¿”å›å€¼å’Œè°äº§ç”Ÿçº¦æŸå°±ä¸€ç›®äº†ç„¶äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631543004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1037669,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d5/65/1c9f1530.jpg","nickname":"NorthWind","note":"","ucode":"459ADF3B0945E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576229,"discussion_content":"äºŒçº§æŒ‡é’ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655362697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1403021,"avatar":"https://static001.geekbang.org/account/avatar/00/15/68/8d/55c14209.jpg","nickname":"éº“æ¹–","note":"","ucode":"9FDBA9928B7E20","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393697,"discussion_content":"ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œæè¿°çš„æ˜¯å‚æ•°å’Œå‚æ•°ä¹‹é—´ã€å‚æ•°å’Œè¿”å›å€¼ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶ä¸æ”¹å˜åŸæœ‰çš„ç”Ÿå‘½å‘¨æœŸã€‚ çœ‹èµ·æ¥&amp;&#39;a mut &amp;stræ”¹å˜äº†&amp;mut s1çš„ç”Ÿå‘½å‘¨æœŸäº†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631548669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311810,"user_name":"CR","can_delete":false,"product_type":"c1","uid":2186767,"ip_address":"","ucode":"CE78F51366077F","user_header":"https://static001.geekbang.org/account/avatar/00/21/5e/0f/1a204ef7.jpg","comment_is_top":false,"comment_ctime":1631486832,"is_pvip":false,"replies":[{"id":"112986","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631514534,"ip_address":"","comment_id":311810,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10221421424","product_id":100085301,"comment_content":"æƒ³æˆä¸ºä»Šå¤©ç¬¬ä¸€ä¸ªæ‰“å¡çš„ç”·å­© LOLğŸ¤£","like_count":2,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526750,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631514534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332563,"user_name":"æœ½æœ¨","can_delete":false,"product_type":"c1","uid":1063200,"ip_address":"","ucode":"0374F0DD04AAE9","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/20/508ad0bd.jpg","comment_is_top":false,"comment_ctime":1643342677,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5938309973","product_id":100085301,"comment_content":"struct çš„å­—æ®µä¸ºä»€ä¹ˆéœ€è¦æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸå‘¢ï¼Ÿ<br>å‡½æ•°éœ€è¦æ ‡æ³¨æ˜¯å› ä¸ºè¾“å‡ºå’Œè¾“å…¥çš„å¼•ç”¨å…³ç³»ä¸ç¡®å®šï¼Œéœ€è¦äººä¸ºæ ‡æ³¨ï¼Œå¯ struct å’Œå®ƒå­—æ®µçš„ä¾èµ–å…³ç³»æ˜¯ç¡®å®šçš„ï¼Œstruct å½“ç„¶ä¾èµ–æ¯ä¸ªå­—æ®µï¼Œå­—æ®µçš„å£°æ˜å‘¨æœŸä¸å¾—å°äº struct æœ¬èº«ï¼Œè¿™ä¸éœ€è¦æ ‡æ³¨ä¹ŸçŸ¥é“å§ï¼Ÿä¸ºä½•è¿˜éœ€è¦æ ‡æ³¨å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":326890,"user_name":"äººä¸–é—´","can_delete":false,"product_type":"c1","uid":1060729,"ip_address":"","ucode":"9957BE83041C27","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/79/7ea1c622.jpg","comment_is_top":false,"comment_ctime":1639734247,"is_pvip":false,"replies":[{"id":"118941","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639855056,"ip_address":"","comment_id":326890,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5934701543","product_id":100085301,"comment_content":"å¯¹äº &amp;mut &amp;&#39;a str, æˆ‘ç†è§£ç±»ä¼¼ä¸‹é¢çš„è¿‡ç¨‹ï¼š<br><br>```<br>fn main() {<br>    let s = &quot;hello world&quot;.to_owned();<br>    let mut s1 = s.as_str();<br>    let hello: &amp;str;<br>    {<br>        let ss = &amp;mut s1;<br>        hello = &amp;ss[..];  &#47;&#47; hello çš„ lifetime ä¸ s1 ä¸€è‡´, s1 çš„å¯å˜å€Ÿç”¨ ss åªå­˜åœ¨ èŠ±æ‹¬å·çš„ä½œç”¨åŸŸå†…<br>    }<br>    println!(&quot;s1={:?}&quot;, s1);<br>    println!(&quot;hello={:?}&quot;, hello);<br>}<br>```<br><br>å¯¹äº &amp;&#39;a mut &amp;str ï¼š<br><br>```<br>fn main() {<br>    let s = &quot;hello world&quot;.to_owned();<br>    let mut s1 = s.as_str();<br>    let hello: &amp;mut &amp;str;<br>    {<br>        let ss = &amp;mut s1;<br>        hello = ss;  &#47;&#47;  s1 å¯å˜å¼•ç”¨ ss ç»‘å®šåˆ° hello ä¸­äº†<br>    }<br>    println!(&quot;s1={:?}&quot;, s1);         &#47;&#47; s1 ä¸å¯å˜å€Ÿç”¨<br>    println!(&quot;hello={:?}&quot;, hello);   &#47;&#47; æ´»è·ƒçš„ s1 çš„å¯å˜å€Ÿç”¨<br>    &#47;&#47; println!(&quot;s1={:?}&quot;, s1);      &#47;&#47; è°ƒæ¢ æ‰“å° s1ï¼Œä¸æŠ¥é”™ ï¼Œs1 çš„æ´»è·ƒçš„å¯å˜å€Ÿç”¨åœ¨ s1 çš„ä¸å¯å˜å€Ÿç”¨ä¹‹é—´ã€‚<br>}<br><br>```","like_count":2,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539904,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639855056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314620,"user_name":"pk","can_delete":false,"product_type":"c1","uid":1008808,"ip_address":"","ucode":"6A768EFD23EFC4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/64/a8/ad627315.jpg","comment_is_top":false,"comment_ctime":1633263009,"is_pvip":true,"replies":[{"id":"113966","content":"è¿™æ ·å¹¶ä¸ç†æƒ³ã€‚å› ä¸º strtok å¹¶ä¸æƒ³æ”¹å˜åŸæœ‰çš„å­—ç¬¦ä¸²ï¼Œåªæ˜¯æ”¹å˜æŒ‡å‘è¿™ä¸ªå­—ç¬¦ä¸²çš„å¯å˜å¼•ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1633319845,"ip_address":"","comment_id":314620,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5928230305","product_id":100085301,"comment_content":"strtok å¯ä»¥ä½¿ç”¨ &amp;mut str åšç¬¬ä¸€ä¸ªå‚æ•°è€Œä¸æ˜¯ &amp;mut &amp;str å—ï¼Ÿfn strtok(s: &amp;mut str, delimiter: char) -&gt; &amp;str","like_count":2,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527740,"discussion_content":"è¿™æ ·å¹¶ä¸ç†æƒ³ã€‚å› ä¸º strtok å¹¶ä¸æƒ³æ”¹å˜åŸæœ‰çš„å­—ç¬¦ä¸²ï¼Œåªæ˜¯æ”¹å˜æŒ‡å‘è¿™ä¸ªå­—ç¬¦ä¸²çš„å¯å˜å¼•ç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1633319845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313688,"user_name":"Roy Liang","can_delete":false,"product_type":"c1","uid":1098898,"ip_address":"","ucode":"1DF5FC831A35DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/92/338b5609.jpg","comment_is_top":false,"comment_ctime":1632621598,"is_pvip":false,"replies":[{"id":"113730","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1632797553,"ip_address":"","comment_id":313688,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5927588894","product_id":100085301,"comment_content":"ä»å‰é¢æ–‡ç« å­¦ä¼šmatchä»£æ›¿ifä¼šæ›´ç®€æ´ï¼Œè°¢è°¢è€å¸ˆ<br>```rust<br>fn max&lt;&#39;a&gt;(s1: &amp;&#39;a str, s2: &amp;&#39;a str) -&gt; &amp;&#39;a str {<br>    match s1 &gt; s2 { <br>        true =&gt; s1,<br>        false =&gt; s2,<br>    }<br>}<br>```","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527439,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632797553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1390032,"avatar":"https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg","nickname":"é˜¿æˆ","note":"","ucode":"CEC3CD65FB9333","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409199,"discussion_content":"if s1 > s2 { s1 } else { s2 }\næˆ‘æ„Ÿè§‰è¿™æ ·æ›´ç®€æ´å‘¢â€¦â€¦","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635391202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312842,"user_name":"è€è£´","can_delete":false,"product_type":"c1","uid":1253872,"ip_address":"","ucode":"18932DC556A719","user_header":"https://static001.geekbang.org/account/avatar/00/13/21/f0/51c493cc.jpg","comment_is_top":false,"comment_ctime":1632052700,"is_pvip":false,"replies":[{"id":"113370","content":"&#39;a ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ³›åŒ–çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¡¨ç¤ºæˆ‘æ”¯æŒä»»ä½•é•¿åº¦çš„ç”Ÿå‘½å‘¨æœŸã€‚æ¯”å¦‚ï¼š<br><br>fn max&lt;&#39;a, &#39;b: &#39;a&gt;(s1: &amp;&#39;a str, s2: &amp;&#39;b str) -&gt; &amp;&#39;a str {}<br><br>è¡¨æ˜ &#39;a å’Œ &#39;b å¯èƒ½æ˜¯ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œ&#39;b ç”Ÿå‘½å‘¨æœŸå¤§äºç­‰äº &#39;aã€‚è¿”å›å€¼éœ€è¦æ»¡è¶³ &#39;a çš„ç”Ÿå‘½å‘¨æœŸã€‚æ•´ä¸ªå‡½æ•°ç›¸å½“äºåœ¨è¯´ï¼Œç»™å®šä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸè¦å¤§äºè¿™ä¸¤ä¸ªå‚æ•°ä¸­å°çš„é‚£ä¸ªã€‚<br><br>æ‰€ä»¥å‡½æ•°å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€ç§çº¦æŸï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼ã€‚å®ƒæœ¬èº«å°±å¯ä»¥éšç€ä¼ å…¥çš„ç”Ÿå‘½å‘¨æœŸè€Œè‡ªé€‚åº”ï¼Œåªè¦å®ƒä»¬æ»¡è¶³çº¦æŸå°±å¯ä»¥ã€‚ä½ å¯ä»¥å¥½å¥½ç†è§£ä¸€ä¸‹ä¸‹é¢çš„ä»£ç ï¼š<br><br>```rust<br>fn max&lt;&#39;a, &#39;b: &#39;a&gt;(s1: &amp;&#39;a str, s2: &amp;&#39;b str) -&gt; &amp;&#39;a str {<br>    s1<br>}<br><br>fn main() {<br>    let s1 = String::from(&quot;hello&quot;);<br>    let s2 = String::from(&quot;world&quot;);<br>    &#47;&#47; é™æ€<br>    let s3 = &quot;hello&quot;;<br>    let s4 = &quot;world&quot;;<br>    max(&amp;s1, &amp;s2);<br>    max(&amp;s1, s3);<br>    max(s3, s4);<br>    max(&amp;s1, s3);<br>    <br>    &#47;&#47; è¿™é‡Œ s3 æ˜¯ &#39;staticï¼Œs1 æ˜¯ &#39;bï¼Œs3 ä¼ å…¥åä¼šé™çº§æˆ &#39;aï¼Œå®ƒä¾æ—§æ»¡è¶³ &#39;b: &#39;a çš„çº¦æŸ<br>    max(s3, &amp;s1);<br>}<br>```<br><br>playground: https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=0080b95b36db1674b5d4d4c29793b1ab","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1632155252,"ip_address":"","comment_id":312842,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5927019996","product_id":100085301,"comment_content":"ç”¨å…¶ä»–è¯­è¨€å†™å‡½æ•°ä¹Ÿä¼šé‡åˆ°ç”Ÿå‘½å‘¨æœŸçš„äº‹ï¼Œæ¯”å¦‚æŸæŸå¼•ç”¨å·²ç»å¤±æ•ˆè¿˜æ˜¯æœªåˆå§‹åŒ–ä»€ä¹ˆï¼Œæ ‡å‡ºæ¥å°±æ¸…æ¥šäº†ï¼Œä½†æ˜¯æœ‰æ²¡è¿™ç§æƒ…å†µï¼ŒæŸä¸ªå‡½æ•°çš„å‚æ•°ç”Ÿå‘½å‘¨æœŸæ˜¯å˜åŒ–çš„ï¼Œå¯èƒ½æ˜¯&lt;&#39;a,&#39;a&gt;ä¹Ÿå¯èƒ½æ˜¯&lt;&#39;a,&#39;b&gt;,è¿™æ ·çš„è¯å‡½æ•°è¦å®ç°2éå—","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527135,"discussion_content":"&amp;#39;a ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ³›åŒ–çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¡¨ç¤ºæˆ‘æ”¯æŒä»»ä½•é•¿åº¦çš„ç”Ÿå‘½å‘¨æœŸã€‚æ¯”å¦‚ï¼š\n\nfn max&amp;lt;&amp;#39;a, &amp;#39;b: &amp;#39;a&amp;gt;(s1: &amp;amp;&amp;#39;a str, s2: &amp;amp;&amp;#39;b str) -&amp;gt; &amp;amp;&amp;#39;a str {}\n\nè¡¨æ˜ &amp;#39;a å’Œ &amp;#39;b å¯èƒ½æ˜¯ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œ&amp;#39;b ç”Ÿå‘½å‘¨æœŸå¤§äºç­‰äº &amp;#39;aã€‚è¿”å›å€¼éœ€è¦æ»¡è¶³ &amp;#39;a çš„ç”Ÿå‘½å‘¨æœŸã€‚æ•´ä¸ªå‡½æ•°ç›¸å½“äºåœ¨è¯´ï¼Œç»™å®šä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸè¦å¤§äºè¿™ä¸¤ä¸ªå‚æ•°ä¸­å°çš„é‚£ä¸ªã€‚\n\næ‰€ä»¥å‡½æ•°å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€ç§çº¦æŸï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼ã€‚å®ƒæœ¬èº«å°±å¯ä»¥éšç€ä¼ å…¥çš„ç”Ÿå‘½å‘¨æœŸè€Œè‡ªé€‚åº”ï¼Œåªè¦å®ƒä»¬æ»¡è¶³çº¦æŸå°±å¯ä»¥ã€‚ä½ å¯ä»¥å¥½å¥½ç†è§£ä¸€ä¸‹ä¸‹é¢çš„ä»£ç ï¼š\n\n```rust\nfn max&amp;lt;&amp;#39;a, &amp;#39;b: &amp;#39;a&amp;gt;(s1: &amp;amp;&amp;#39;a str, s2: &amp;amp;&amp;#39;b str) -&amp;gt; &amp;amp;&amp;#39;a str {\n    s1\n}\n\nfn main() {\n    let s1 = String::from(&amp;quot;hello&amp;quot;);\n    let s2 = String::from(&amp;quot;world&amp;quot;);\n    // é™æ€\n    let s3 = &amp;quot;hello&amp;quot;;\n    let s4 = &amp;quot;world&amp;quot;;\n    max(&amp;amp;s1, &amp;amp;s2);\n    max(&amp;amp;s1, s3);\n    max(s3, s4);\n    max(&amp;amp;s1, s3);\n    \n    // è¿™é‡Œ s3 æ˜¯ &amp;#39;staticï¼Œs1 æ˜¯ &amp;#39;bï¼Œs3 ä¼ å…¥åä¼šé™çº§æˆ &amp;#39;aï¼Œå®ƒä¾æ—§æ»¡è¶³ &amp;#39;b: &amp;#39;a çš„çº¦æŸ\n    max(s3, &amp;amp;s1);\n}\n```\n\nplayground: https://play.rust-lang.org/?version=stable&amp;amp;mode=debug&amp;amp;edition=2018&amp;amp;gist=0080b95b36db1674b5d4d4c29793b1ab","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632155252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312462,"user_name":"æ ¸æ¡ƒ","can_delete":false,"product_type":"c1","uid":1385204,"ip_address":"","ucode":"7AB05270CBCCCB","user_header":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","comment_is_top":false,"comment_ctime":1631808097,"is_pvip":false,"replies":[{"id":"113220","content":"å¯¹äº 1ï¼Œä½ å¯ä»¥å†çœ‹çœ‹æˆ‘æ–‡ä¸­ç”»çš„å›¾ï¼Œå¥½å¥½æ„Ÿå—ä¸€ä¸‹ &amp;mut &amp;str è¡¨ç¤ºä»€ä¹ˆã€‚&amp;str æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œ&amp;mut &amp;str æ˜¯æŒ‡å‘è¿™ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡çš„ä¸€ä¸ªå¯å˜çš„å¼•ç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬çš„é—®é¢˜æ˜¯ï¼šè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸç©¶ç«Ÿåº”è¯¥æ˜¯å’Œå­—ç¬¦ä¸²åˆ‡ç‰‡æœ‰å…³ï¼Ÿè¿˜æ˜¯è·Ÿå¯¹è¿™ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡çš„å¯å˜å¼•ç”¨æœ‰å…³ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631844588,"ip_address":"","comment_id":312462,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5926775393","product_id":100085301,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¿™é‡Œæœ‰ä¸€äº›å°ç–‘æƒ‘æ²¡æœ‰ææ‡‚ã€‚<br>1.&amp;mut &amp;str æ·»åŠ ç”Ÿå‘½å‘¨æœŸåå˜æˆ  &amp;&#39;b mut &amp;&#39;a strï¼Œè¿™å°†å¯¼è‡´è¿”å›çš„  &#39;&amp;str æ— æ³•é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ç”Ÿå‘½å‘¨æœŸã€‚<br>   è¿™å¥è¯é‡Œé¢,ä¸ºä»€ä¹ˆmutå‰é¢è¿˜ä¼šéœ€è¦æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸçš„ï¼Œè¿™ä¸æ˜¯å˜é‡å§ï¼Œå› ä¸ºåœ¨æˆ‘æ•…ä¸ªäººç†è§£ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³é”®è¯å’Œç¬¦å·,ä¸ºä»€ä¹ˆä¼šéœ€è¦ç”Ÿå‘½å‘¨æœŸæ ‡è®°ï¼Ÿ<br>   <br>2. <br>pub fn strtok&lt;&#39;b, &#39;a&gt;(s: &amp;&#39;b mut &amp;&#39;a str, delimiter: char) -&gt; &amp;&#39;a str {...}<br>   è¿™ä¸ªé‡Œé¢ï¼Œé¦–å…ˆ&lt;&gt;ä¸­çš„è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ ç„¶åè¿™é‡Œæœ€åçš„ -&gt; &amp;&#39;a strè¡¨ç¤ºè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸæ˜¯&#39;aï¼Œå’Œå…¥å‚çš„strç›¸åŒå—ï¼Ÿ<br> å™¢ï¼Œåˆšåˆšæ‰‹å¿«å¼„é”™äº†ä¸€æ¡ç•™è¨€ï¼Œæ²¡æœ‰å†™å®Œï¼Œè¯·å¿½ç•¥ï¼Œå¤šè°¢äº†","like_count":2,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526971,"discussion_content":"å¯¹äº 1ï¼Œä½ å¯ä»¥å†çœ‹çœ‹æˆ‘æ–‡ä¸­ç”»çš„å›¾ï¼Œå¥½å¥½æ„Ÿå—ä¸€ä¸‹ &amp;amp;mut &amp;amp;str è¡¨ç¤ºä»€ä¹ˆã€‚&amp;amp;str æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œ&amp;amp;mut &amp;amp;str æ˜¯æŒ‡å‘è¿™ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡çš„ä¸€ä¸ªå¯å˜çš„å¼•ç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬çš„é—®é¢˜æ˜¯ï¼šè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸç©¶ç«Ÿåº”è¯¥æ˜¯å’Œå­—ç¬¦ä¸²åˆ‡ç‰‡æœ‰å…³ï¼Ÿè¿˜æ˜¯è·Ÿå¯¹è¿™ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡çš„å¯å˜å¼•ç”¨æœ‰å…³ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631844588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311844,"user_name":"èŠ¥æœ«å°é¾™","can_delete":false,"product_type":"c1","uid":1176417,"ip_address":"","ucode":"387D01880867AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/f3/61/8f7fca5b.jpg","comment_is_top":false,"comment_ctime":1631502557,"is_pvip":false,"replies":[{"id":"112984","content":"å½“ Rust ç¼–è¯‘å™¨ä¸èƒ½æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸéœ€è¦å¼€å‘è€…è¿›è¡Œæ ‡æ³¨æ—¶ï¼Œä¸€å®šæ˜¯ç¼–è¯‘å™¨æ— æ³•ä»å·²çŸ¥çš„é€»è¾‘ä¸­æ‰¾åˆ°å‚æ•°å’Œè¿”å›å€¼ä¹‹é—´çš„å…³ç³»ã€‚æ‰€ä»¥æˆ‘ä»¬è¦è¯´æ˜è¿™ç§å…³ç³»ã€‚<br><br>æˆ‘ä»¬å¯ä»¥è¯´ s1, s2 ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œè¿”å›å€¼å’Œä»–ä»¬çš„ä¸€è‡´ã€‚è¿™æ˜¯æˆ‘æ–‡ä¸­ä»£ç çš„è¡¨è¿°ã€‚<br><br>ä¹Ÿå¯ä»¥è¯´ s1, s2 ç”Ÿå‘½å‘¨æœŸä¸ä¸€è‡´ï¼Œæˆ‘ä»¬è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ¯”è¾ƒå°çš„é‚£ä¸ªã€‚è¿™æ˜¯è¿™æ®µä»£ç çš„è¡¨è¿°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631514372,"ip_address":"","comment_id":311844,"utype":1}],"discussion_count":7,"race_medal":0,"score":"5926469853","product_id":100085301,"comment_content":"é™ˆè€å¸ˆæ‚¨å¥½ï¼<br>fn max&lt;&#39;a,&#39;b:&#39;a&gt;(s1:&amp;&#39;a str, s2:&amp;&#39;b str) -&gt;&amp;&#39;a str {<br>    if s1 &gt; s2 {<br>        s1<br>    } else {<br>        s2<br>    }<br>}<br>æˆ‘è®°å¾—æ±‰ä¸œè€å¸ˆçš„è¯¾ä¸­è®²è¿‡ï¼Œmaxè¿™æ ·ä¹Ÿèƒ½ç¼–è¯‘è¿‡å» ä½†æ˜¯æ²¡æœ‰æ˜ç™½å•¥æ„æ€ã€‚æ‚¨èƒ½è¯¦ç»†çš„è¯´ä¸€ä¸‹å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526769,"discussion_content":"å½“ Rust ç¼–è¯‘å™¨ä¸èƒ½æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸéœ€è¦å¼€å‘è€…è¿›è¡Œæ ‡æ³¨æ—¶ï¼Œä¸€å®šæ˜¯ç¼–è¯‘å™¨æ— æ³•ä»å·²çŸ¥çš„é€»è¾‘ä¸­æ‰¾åˆ°å‚æ•°å’Œè¿”å›å€¼ä¹‹é—´çš„å…³ç³»ã€‚æ‰€ä»¥æˆ‘ä»¬è¦è¯´æ˜è¿™ç§å…³ç³»ã€‚\n\næˆ‘ä»¬å¯ä»¥è¯´ s1, s2 ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œè¿”å›å€¼å’Œä»–ä»¬çš„ä¸€è‡´ã€‚è¿™æ˜¯æˆ‘æ–‡ä¸­ä»£ç çš„è¡¨è¿°ã€‚\n\nä¹Ÿå¯ä»¥è¯´ s1, s2 ç”Ÿå‘½å‘¨æœŸä¸ä¸€è‡´ï¼Œæˆ‘ä»¬è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ¯”è¾ƒå°çš„é‚£ä¸ªã€‚è¿™æ˜¯è¿™æ®µä»£ç çš„è¡¨è¿°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631514372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":2755534,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/0b/ce/f0c520d1.jpg","nickname":"é¹…å¸®é€®","note":"","ucode":"A6DB1BEFDA5D9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":532810,"discussion_content":"è€å¸ˆï¼Œè¯·é—®è¿™é‡Œa&#39;ä¸åº”è¯¥æ˜¯ç”Ÿå‘½å‘¨æœŸè¾ƒå¤§çš„å—ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯è¿”å›b&#39;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637713108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":526769,"ip_address":""},"score":532810,"extra":"{\"user_type\":1}"},{"author":{"id":2660581,"avatar":"https://static001.geekbang.org/account/avatar/00/28/98/e5/a716040e.jpg","nickname":"...zzZ","note":"","ucode":"953A50D833CA58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2755534,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/0b/ce/f0c520d1.jpg","nickname":"é¹…å¸®é€®","note":"","ucode":"A6DB1BEFDA5D9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550083,"discussion_content":"&#39;b: &#39;aè¡¨ç¤ºä¸º:  &#39;bé•¿äº&#39;aã€‚å‚è€ƒçŸ¥ä¹å¤§ç¥ï¼šhttps://www.zhihu.com/question/435470652","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644378124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532810,"ip_address":""},"score":550083,"extra":""}]},{"author":{"id":2741015,"avatar":"https://static001.geekbang.org/account/avatar/00/29/d3/17/22c36063.jpg","nickname":"f","note":"","ucode":"D37A8E76DB782C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393630,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ï¼Œå‡½æ•°å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸ºäº†å‡½æ•°è¿”å›å€¼è€Œæä¾›çš„ï¼Œæˆ–è€…è¯´ï¼Œæ˜¯è¦ä¿è¯å‡½æ•°å‚æ•°éƒ½è¿˜æ´»ç€çš„æ—¶å€™æ‰èƒ½å»ä½¿ç”¨è¿”å›å€¼(æ˜¾ç„¶æ˜¯ä»¥çŸ­å‘½çš„å‚æ•°ä¸ºåŸºå‡†çš„)ï¼Œå¦åˆ™è¿”å›å€¼æœ‰å¯èƒ½å°±å¼•ç”¨äº†å·²ç»æ­»æ‰çš„å‚æ•°ã€‚\nå†å¦ä¸€æ–¹é¢ï¼Œå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸè°é•¿è°çŸ­ï¼Œæ˜¯ç¼–è¯‘å™¨æ ¹æ®è°ƒç”¨å‡½æ•°æ—¶çš„ç¯å¢ƒæ¥åˆ¤æ–­çš„ï¼Œä¸æ˜¯æ ¹æ®å‡½æ•°æœ¬èº«æ¥åˆ¤æ–­ï¼Œæ‰€ä»¥ä¹¦ä¸­éƒ½è¯´ç”Ÿå‘½å‘¨æœŸåªæ˜¯ç”¨æ¥æ ‡æ³¨ï¼Œè€Œä¸å½±å“å®é™…çš„ç”Ÿå­˜å‘¨æœŸçš„é•¿çŸ­ã€‚\n\næ¯”å¦‚ï¼šä¸‹é¢è¿™æ®µä»£ç æ˜¯æ²¡é”™çš„ã€‚\n```rust\n// ä»å‡½æ•°æœ¬èº«ï¼Œæ— ä»åˆ¤æ–­s1 s2å’Œè¿”å›å€¼è°æ´»çš„ä¹…\n// ä½†å°†ä»–ä»¬å…¨éƒ¨æ ‡ä¸º&#39;aï¼Œç»™ç¼–è¯‘å™¨æäº†ä¸ªé†’ï¼š\n// s1ã€s2è°é•¿è°çŸ­éƒ½å¯ä»¥ï¼Œä½†å¿…é¡»åœ¨å®ƒä»¬éƒ½æ´»ç€çš„æ—¶å€™æ‰èƒ½ä½¿ç”¨è¿”å›å€¼\n// å¦‚æœç¼–è¯‘å™¨å‘ç°è°ƒç”¨å‡½æ•°çš„åœ°æ–¹(ç¯å¢ƒ)ï¼Œå‡ºç°äº†æŸä¸ªå‚æ•°å·²ç»æ­»äº†ï¼Œä½†è¿˜åœ¨\n// ä½¿ç”¨è¿”å›å€¼çš„æƒ…å†µï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™\nfn max<&#39;a>(s1: &amp;&#39;a str, s2: &amp;&#39;a str) -> &amp;&#39;a str {\n  if s1 > s2 {\n    s1\n  } else {\n    s2\n  }\n}\nfn main() {\n  let s1 = &#34;hello&#34;.to_string();\n  let res;\n  {\n    let s2 = &#34;world&#34;.to_string();\n    res = max(&amp;s1, &amp;s2);\n    println!(&#34;res is: {}&#34;, res);\n  }  // å‚æ•°s2æ­»äº†ï¼Œä½†åé¢ä¸å†ä½¿ç”¨è¿”å›å€¼äº†ï¼Œå› æ­¤ç¼–è¯‘é€šè¿‡\n}\n```\nä½†å¦‚æœæŠŠprintlné‚£è¡Œç§»åˆ°å¤§æ‹¬å·å¤–é¢ï¼Œå°±ä¼šæŠ¥é”™ï¼š\n```rust\n  {\n    let s2 = &#34;world&#34;.to_string();\n    res = max(&amp;s1, &amp;s2);\n  }  // å‚æ•°s2æ­»äº†ï¼Œä½†åé¢è¿˜åœ¨ä½¿ç”¨è¿”å›å€¼ï¼Œå› æ­¤ç¼–è¯‘æŠ¥é”™\n    println!(&#34;res is: {}&#34;, res);\n```\nåŒç†ï¼Œå¦‚æœæ˜¯`fn max<&#39;a,&#39;b:&#39;a>(s1:&amp;&#39;a str, s2:&amp;&#39;b str) ->&amp;&#39;a str`ï¼Œç¼–è¯‘å™¨æ ¹æ®`&#39;b: &#39;a`çš„æç¤ºå»åˆ¤æ–­ï¼Œåœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œå‚æ•°s2çš„ç”Ÿå‘½å‘¨æœŸåº”å½“è¦æ¯”s1æ›´é•¿ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½¿ç”¨å‡½æ•°è¿”å›å€¼çš„è¿‡ç¨‹ä¸­ï¼Œåªè¦s2è¿˜æ´»ç€ï¼Œs1å¿…é¡»ä¹Ÿæ´»ç€ï¼Œå¦åˆ™ç¼–è¯‘å™¨å°±ä¼šå‘ç°æœ¬è¯¥æ´»æ›´ä¹…çš„s2æ¯”s1è¿˜æ­»å¾—æ—©ï¼Œç„¶åå°±æŠ¥é”™ã€‚\n\nä½†æ˜¯ï¼ŒåŸºæœ¬ç›®æ ‡ä»ç„¶æ˜¯ä¿è¯è¿”å›å€¼çš„æœ‰æ•ˆæ€§ï¼Œè¿˜åœ¨ä½¿ç”¨è¿”å›å€¼çš„æ—¶å€™ï¼Œå¼•ç”¨å‹å‚æ•°éƒ½å¾—æ´»ç€ï¼Œä¸å†ä½¿ç”¨è¿”å›å€¼çš„æ—¶å€™ï¼Œæ— è®ºå‚æ•°çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å¦‚ä½•æ ‡æ³¨çš„ï¼Œå‚æ•°è°å…ˆæ­»è°åæ­»éƒ½æ— æ‰€è°“ï¼Œæ ‡æ³¨åªæ˜¯ä¸ªç»™ç¼–è¯‘å™¨çš„æé†’ã€‚\n\nä¸ªäººç†è§£ï¼Œä¹Ÿè®¸ä¸å¯¹ï¼Œå¦‚æœä¸å¯¹ï¼Œè¯·æŒ‡å‡ºã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631523536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2741015,"avatar":"https://static001.geekbang.org/account/avatar/00/29/d3/17/22c36063.jpg","nickname":"f","note":"","ucode":"D37A8E76DB782C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393671,"discussion_content":"éå¸¸æ­£ç¡®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631541492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":393630,"ip_address":""},"score":393671,"extra":""},{"author":{"id":1390032,"avatar":"https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg","nickname":"é˜¿æˆ","note":"","ucode":"CEC3CD65FB9333","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2741015,"avatar":"https://static001.geekbang.org/account/avatar/00/29/d3/17/22c36063.jpg","nickname":"f","note":"","ucode":"D37A8E76DB782C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409205,"discussion_content":"â€œåªè¦s2è¿˜æ´»ç€ï¼Œs1å¿…é¡»ä¹Ÿæ´»ç€â€ è¿™é‡Œå†™åäº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635391765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":393630,"ip_address":""},"score":409205,"extra":""}]},{"author":{"id":1078927,"avatar":"","nickname":"linuxfish","note":"","ucode":"557F21A1CC7EAD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399456,"discussion_content":"æä¾›ä¸€ä¸ªä¿¡æ¯ï¼Œ&#39;long: &#39;short is read &#34;&#39;long outlives &#39;short&#34;. è¿™ä¸ªè¯­æ³•åœ¨å®˜æ–¹æ–‡æ¡£ä¸­å¹¶æœªæåˆ°ï¼Œåªåœ¨RFCä¸­æœ‰æåŠ\n\nå‚è€ƒï¼šhttps://stackoverflow.com/questions/30768063/does-a-b-a-mean-that-the-lifetime-b-must-outlive-the-lifetime-a","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632970708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348740,"user_name":"NorthWind","can_delete":false,"product_type":"c1","uid":1037669,"ip_address":"","ucode":"459ADF3B0945E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d5/65/1c9f1530.jpg","comment_is_top":false,"comment_ctime":1655362113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655362113","product_id":100085301,"comment_content":"let mut map = HashMap::new(); map.insert(&quot;hello&quot;, &quot;world&quot;); let key = &quot;hello1&quot;; è¿™é‡Œçš„ &quot;hello&quot; å’Œ &quot;world&quot; æ˜¯é™æ€ç”Ÿå‘½å‘¨æœŸä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":345479,"user_name":"å¤ªå—å–¬ Serendipity!","can_delete":false,"product_type":"c1","uid":2648083,"ip_address":"","ucode":"F1DA88F7E8B2F3","user_header":"https://static001.geekbang.org/account/avatar/00/28/68/13/452e9331.jpg","comment_is_top":false,"comment_ctime":1652320444,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1652320444","product_id":100085301,"comment_content":"è«‹æ•™ä¸‹ç‚ºå•¥ delimiter ä¸éœ€è¦æ¨™è¨»ç”Ÿå‘½é€±æœŸï¼Ÿ<br>èˆ‰ä¾‹ä¾†èªªæˆ‘æŠŠ strtok çš„ç°½åæ”¹æˆ<br>pub fn strtok&lt;&#39;a, &#39;c&gt;(s: &amp;mut &amp;&#39;a str, delimiter: &#39;c char) <br>ç„¶å¾Œç·¨è­¯å™¨å°±ä¸é«˜èˆˆäº†","like_count":0,"discussions":[{"author":{"id":1062808,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIf1t1D3ictrpgeFuIukNLUdicibnibk7GCO4KAv63ffNYbZPPibeTkhcKPpV7XCYpmaGGKsDKN2Miaephg/132","nickname":"è„‘æ´å¤ªå¤§è¡¥ä¸ä¸Š","note":"","ucode":"ABB5BA9AE6D50A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583451,"discussion_content":"delimiter æ˜¯ä¸ª char ç±»å‹å•Šï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯ä» strtok å‡½æ•°è°ƒç”¨å¼€å§‹åˆ°ç»“æŸã€‚å‡½æ•°ä¼ å‚çš„æ—¶å€™è¿™ä¸ª char çš„å€¼æ˜¯å¤åˆ¶åˆ° strtok çš„è°ƒç”¨æ ˆä¸Šçš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1660122689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2399151,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM4HYljRtQ3ZRtTW2RMEiaeTkMnh1RNGU4ECeQBqeAX9l2g2d5hggwOp7aEiachXqB93FXZia0icoFUqMA/132","nickname":"Geek_703667","note":"","ucode":"61C9355CE91C08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572811,"discussion_content":"ã€Œé€šè¿‡ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ï¼Œæˆ‘ä»¬å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›*å¼•ç”¨*é—´ç”Ÿå‘½å‘¨æœŸçš„çº¦æŸã€‚ã€delimiterä¸æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œå¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç¡®å®šçš„ï¼Œå°±æ˜¯åœ¨å‡½æ•°ç»“æŸçš„æ—¶å€™ç»“æŸã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1652968605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343169,"user_name":"ç»ä¸–çå¥‡","can_delete":false,"product_type":"c1","uid":2975176,"ip_address":"","ucode":"0140AC5A80C0E6","user_header":"https://static001.geekbang.org/account/avatar/00/2d/65/c8/c7ebcf38.jpg","comment_is_top":false,"comment_ctime":1650688406,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650688406","product_id":100085301,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼š https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=6027ba5bae514e563ff257100bedfd23<br><br>åœ¨ä¸ä¿®æ”¹Scheme, Filter ç­‰å®ç°çš„æƒ…å†µä¸‹ï¼ŒPolicy éœ€è¦æ€æ ·æ”¹å‘¢ã€‚<br><br>å¯¹rustçš„ç”Ÿå‘½å‘¨æœŸäº†è§£ä¸å¤Ÿæ·±ï¼Œè¯•äº†å¤šç§æ–¹å¼éƒ½ä¸è¡Œ","like_count":0},{"had_liked":false,"id":342377,"user_name":"GE","can_delete":false,"product_type":"c1","uid":2773127,"ip_address":"","ucode":"A916BA2792FC0F","user_header":"https://static001.geekbang.org/account/avatar/00/2a/50/87/a6637d48.jpg","comment_is_top":false,"comment_ctime":1650223009,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650223009","product_id":100085301,"comment_content":"1. å°†&amp;mutæ ‡è®°ä¸º&#39;aä¹‹å åªè¦è¿”å›å€¼helloæ²¡æœ‰å‡ºä½œç”¨åŸŸ &amp;mutå°±ä¼šå­˜åœ¨ å› ä¸ºä¼šæœ‰â€œåŒæ—¶â€å­˜åœ¨mutable ref &amp; immutable refçš„æƒ…å†µ å¦‚æœåªæ˜¯ä¸ºäº†ç»•å¼€æ£€æŸ¥ å¯ä»¥ç¨åŠ ä¿®æ”¹<br>```<br>fn main() {<br>    let s = &quot;hello world&quot;.to_owned();<br>    let mut s1 = s.as_str();<br>    {<br>        let hello = strtok(&amp;mut s1, &#39; &#39;);<br>        println!(&quot;hello is: {}&quot;, hello);<br>    }<br>    println!(&quot;s1: {}, s: {}&quot;, s1, s);<br>}<br>```","like_count":0},{"had_liked":false,"id":336575,"user_name":"xiaojunzhou","can_delete":false,"product_type":"c1","uid":1276024,"ip_address":"","ucode":"C155FA9BB89318","user_header":"https://static001.geekbang.org/account/avatar/00/13/78/78/681a3e06.jpg","comment_is_top":false,"comment_ctime":1646220616,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646220616","product_id":100085301,"comment_content":"æ€è€ƒé¢˜ 1<br>å‡ºç°äº†ä»¥ä¸‹é—®é¢˜ï¼š<br>error[E0502]: cannot borrow `s1` as immutable because it is also borrowed as mutable<br>  --&gt; src&#47;main.rs:91:52<br>   |<br>90 |     let hello = strtok(&amp;mut s1, &#39; &#39;);<br>   |                        ------- mutable borrow occurs here<br>91 |     println!(&quot;hello is: {}, s1: {}, s: {}&quot;, hello, s1, s);<br>   |     -----------------------------------------------^^----<br>   |     |                                              |<br>   |     |                                              immutable borrow occurs here<br>   |     mutable borrow later used here<br>çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªä½œç”¨åŸŸåŒæ—¶å‡ºç°å¯å˜å¼•ç”¨å’Œä¸å¯å˜å¼•ç”¨","like_count":0},{"had_liked":false,"id":334482,"user_name":"è®¸ä¸‰å¤š","can_delete":false,"product_type":"c1","uid":1108269,"ip_address":"","ucode":"A9BECD56EEBD2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/2d/dfa58b90.jpg","comment_is_top":false,"comment_ctime":1644974759,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1644974759","product_id":100085301,"comment_content":"let s = &quot;Hello world&quot;.to_owned();<br>let mut s1 = s.as_str(); &#47;&#47; ------ è¿™åœ°æ–¹s1æ˜¯ä¸ªå€¼å•Š<br>let hello = strtok(&amp;mut s1, &#39; &#39;); &#47;&#47; ----- è¿™åœ°æ–¹å…¥å‚æ˜¯ä¸ªå¯å˜å¼•ç”¨<br>println!(&quot;Hello is {}, s1: {}, s: {}&quot;, hello, s1, s); &#47;&#47; ----- helloä¿æŒäº†s1çš„å¯å˜å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†s1ä¸æ˜¯ä¸ªå€¼å—ï¼Œæ€ä¹ˆå°±æˆäº†ä¸å¯å˜å¼•ç”¨ï¼Ÿï¼Ÿ<br><br>è°èƒ½è§£ç­”ä¸€ä¸‹ã€‚<br><br><br>","like_count":0,"discussions":[{"author":{"id":2905523,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIDqHQQByGiaXcAk94MdDn3ftupZLXyR6bAKibxOzMxy5h3uBwZ7QiaCiaIfbCMK0cIQfGNax8iawoiaQAg/132","nickname":"nuan","note":"","ucode":"55FF98EB85404D","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555606,"discussion_content":"pub fn as_str(&amp;self) -&gt; &amp;str","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646990308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2056396,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyJPx4r7mYedM4545Dw4tscPLBQoB7zUbf0RD0sfMyAlZgS1m05u953BYukYBvTHUZnUe7E8Ou8w/132","nickname":"Griffenliu","note":"","ucode":"0A5BFC80B3C0A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579101,"discussion_content":"s1çš„ç±»å‹æ˜¯&amp;str","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657175794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2399151,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM4HYljRtQ3ZRtTW2RMEiaeTkMnh1RNGU4ECeQBqeAX9l2g2d5hggwOp7aEiachXqB93FXZia0icoFUqMA/132","nickname":"Geek_703667","note":"","ucode":"61C9355CE91C08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572814,"discussion_content":"printå®ä¼šå€Ÿç”¨s1. å®å±•å¼€ï¼ˆcargo expandï¼‰åï¼Œä¼šå‘ç°printlnè¯­å¥å˜æˆç±»ä¼¼äº\n```rust\n        ::std::io::_print(::core::fmt::Arguments::new_v1(\n            &amp;[&#34;&#34;, &#34;\\n&#34;],\n            &amp;[::core::fmt::ArgumentV1::new_display(&amp;s)],\n        ));\n```\nçš„ä¸œè¥¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652971324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331662,"user_name":"ç‹å½¦éœ–","can_delete":false,"product_type":"c1","uid":2868952,"ip_address":"","ucode":"F9BFDD0C3657AB","user_header":"https://static001.geekbang.org/account/avatar/00/2b/c6/d8/672f1838.jpg","comment_is_top":false,"comment_ctime":1642691185,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642691185","product_id":100085301,"comment_content":"fn main() {<br>let s = &quot;hello world&quot;.to_owned(); <br>let mut s1 = s.as_str(); <br>let hello = strtok(&amp;mut s1, &#39; &#39;); <br>println!(&quot;hello is: {}, s1: {}, s: {}&quot;, hello, s1, s);}<br>è€å¸ˆï¼Œè¿™é‡Œè¿™ä¸¤ä¸ªmutæˆ‘ä¸æ˜¯å¾ˆç†è§£ï¼Œs1å·²ç»æ˜¯mutäº†ï¼Œä¸ºä»€ä¹ˆä¼ å…¥å‚æ•°è¿˜éœ€è¦å†æ ‡è¯†ä¸€è¾¹mutå‘¢ï¼Ÿ<br>éº»çƒ¦è€å¸ˆç»™æˆ‘è®²è§£ä¸€ä¸‹ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":319130,"user_name":"ä¸‰å¶è™«tlb","can_delete":false,"product_type":"c1","uid":1010499,"ip_address":"","ucode":"A8236974932E6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/43/b6bcab56.jpg","comment_is_top":false,"comment_ctime":1635602811,"is_pvip":false,"replies":[{"id":"116393","content":"å› ä¸º Rust ç¼–è¯‘å™¨è¦ä¿è¯ä»£ç çš„æ­£ç¡®æ€§ï¼Œé˜²æ­¢ä¸€ä¸ªå‡½æ•°æ„å¤–å¾—åˆ°æ‚¬ç©ºæŒ‡é’ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1636556744,"ip_address":"","comment_id":319130,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635602811","product_id":100085301,"comment_content":"æ²¡çœ‹æ˜ç™½ï¼šâ€œmissing lifetime specifierâ€ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘ max() å‡½æ•°æ—¶ï¼Œæ— æ³•åˆ¤æ–­ s1ã€s2 å’Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸã€‚<br>ä¸ºä»€ä¹ˆè¦åˆ¤æ–­ s1ã€s2 å’Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ<br><br>fn main() {<br>    let s1 = String::from(&quot;Lindsey&quot;);<br>    let s2 = String::from(&quot;Rosie&quot;);<br><br>    let result = max(&amp;s1, &amp;s2);<br><br>    println!(&quot;bigger one: {}&quot;, result);<br>}<br><br>fn max(s1: &amp;str, s2: &amp;str) -&gt; &amp;str {<br>    if s1 &gt; s2 {<br>        s1<br>    } else {<br>        s2<br>    }<br>}","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529511,"discussion_content":"å› ä¸º Rust ç¼–è¯‘å™¨è¦ä¿è¯ä»£ç çš„æ­£ç¡®æ€§ï¼Œé˜²æ­¢ä¸€ä¸ªå‡½æ•°æ„å¤–å¾—åˆ°æ‚¬ç©ºæŒ‡é’ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636556744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318128,"user_name":"å½­äºšä¼¦","can_delete":false,"product_type":"c1","uid":2425378,"ip_address":"","ucode":"77A32C73A23F72","user_header":"https://static001.geekbang.org/account/avatar/00/25/02/22/19585900.jpg","comment_is_top":false,"comment_ctime":1635157585,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1635157585","product_id":100085301,"comment_content":"æœ€åä¸€æ®µ, é¢å‘ç¼–è¯‘å™¨ç¼–ç¨‹è¯­è¨€å®é”¤äº†~  :)","like_count":0},{"had_liked":false,"id":314959,"user_name":"ç¡é†’å¤´å‘æ€»æ˜¯ç¿˜ç€ğŸš€","can_delete":false,"product_type":"c1","uid":1624221,"ip_address":"","ucode":"A9EDD9E4F5CB6F","user_header":"https://static001.geekbang.org/account/avatar/00/18/c8/9d/d2dafa92.jpg","comment_is_top":false,"comment_ctime":1633612044,"is_pvip":false,"replies":[{"id":"114166","content":"ä½¿ç”¨å¼•ç”¨çš„ç›®çš„å°±æ˜¯ä¸ºäº†é¿å…é¢å¤–çš„åˆ†é…å’Œå¤åˆ¶ã€‚æ‰€ä»¥ä½¿ç”¨å¼•ç”¨è€Œä¸æ˜¯ clone å¯ä»¥æå‡æ€§èƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1633813265,"ip_address":"","comment_id":314959,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1633612044","product_id":100085301,"comment_content":"æŠŠå„ä¸ªå˜é‡çš„åœ°å€æ‰“å°å‡ºæ¥çœ‹åˆ° â€œhello worldâ€ å§‹ç»ˆéƒ½æ²¡æœ‰å˜åŒ–ï¼Œä¹Ÿæ²¡æœ‰åˆ›å»ºæ–°çš„å †ç©ºé—´æ¥å­˜å‚¨åˆ†å‰²åçš„å­—ç¬¦ä¸²ï¼Œå˜åŒ–çš„éƒ½åªæ˜¯æŒ‡é’ˆæ‰€æŒ‡å‘çš„ä½ç½®ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ˜¯ä¸ºäº†æœ‰æ›´é«˜æ•ˆçš„æ€§èƒ½å—ï¼Ÿ<br><br>s:0x7ffeef108800 s value:0x7fae8f405cc0<br>mut s1:0x7ffeef108818 mut s1 value: 0x7fae8f405cc0<br>s:0x7ffeef108450 s value: 0x7ffeef108818<br>prefix:0x7ffeef108478 prefix value: 0x7fae8f405cc0<br>suffix:0x7ffeef108490 suffix value: 0x7fae8f405cc6<br>hello:0x7ffeef108908 hello value: 0x7fae8f405cc0<br>s:0x7ffeef108800 s value:0x7fae8f405cc0<br>mut s1:0x7ffeef108818 mut s1 value: 0x7fae8f405cc6<br>hello is: hello, s1: world, s: hello world","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527839,"discussion_content":"ä½¿ç”¨å¼•ç”¨çš„ç›®çš„å°±æ˜¯ä¸ºäº†é¿å…é¢å¤–çš„åˆ†é…å’Œå¤åˆ¶ã€‚æ‰€ä»¥ä½¿ç”¨å¼•ç”¨è€Œä¸æ˜¯ clone å¯ä»¥æå‡æ€§èƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633813265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312152,"user_name":"è®°äº‹æœ¬","can_delete":false,"product_type":"c1","uid":1401568,"ip_address":"","ucode":"FA942636EE0CC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","comment_is_top":false,"comment_ctime":1631667254,"is_pvip":false,"replies":[{"id":"113127","content":"ä¸ç”¨åŠ  returnã€‚è¿™é‡Œæ²¡æœ‰æå‰è¿”å›ï¼Œ if {} else {} æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¡¨è¾¾å¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631671280,"ip_address":"","comment_id":312152,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631667254","product_id":100085301,"comment_content":"<br>fn max&lt;&#39;a&gt;(s1: &amp;&#39;a str, s2: &amp;&#39;a str) -&gt; &amp;&#39;a str {<br>    if s1 &gt; s2 {<br>   return     s1<br>    } else {<br>        s2<br>    }<br>}<br><br><br>s1 å˜é‡æå‰è¿”å›çš„è¯ï¼Œéœ€è¦åŠ return","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526882,"discussion_content":"ä¸ç”¨åŠ  returnã€‚è¿™é‡Œæ²¡æœ‰æå‰è¿”å›ï¼Œ if {} else {} æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¡¨è¾¾å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631671280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312140,"user_name":"springXu","can_delete":false,"product_type":"c1","uid":2064750,"ip_address":"","ucode":"F5DB0B963C894F","user_header":"","comment_is_top":false,"comment_ctime":1631644437,"is_pvip":true,"replies":[{"id":"113124","content":"æ²¡æœ‰ã€‚ä½ å¯ä»¥æŠŠæ‰€æœ‰å‡½æ•°æ¥å£é‡Œæ²¡æœ‰æ ‡æ³¨çš„å¼•ç”¨å½“åš &#39;a æ ‡æ³¨ï¼Œæ–¹æ³•é‡Œæ²¡æœ‰æ ‡æ³¨çš„å¼•ç”¨çœ‹æˆ &amp;&#39;a selfï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ &amp;&#39;aã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631671015,"ip_address":"","comment_id":312140,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631644437","product_id":100085301,"comment_content":"è¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨å¸Œæœ›å°½å¯èƒ½å‡è½»å¼€å‘è€…çš„è´Ÿæ‹…ï¼Œå…¶å®æ‰€æœ‰ä½¿ç”¨äº†å¼•ç”¨çš„å‡½æ•°ï¼Œéƒ½éœ€è¦ç”Ÿå‘½å‘¨æœŸçš„æ ‡æ³¨ï¼Œåªä¸è¿‡ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åšè¿™ä»¶äº‹ï¼Œçœå´äº†å¼€å‘è€…çš„éº»çƒ¦ã€‚ <br><br>è¿™ä¸ªç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ æ ‡æ³¨ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæ’ä»¶æˆ–è€…æ–¹æ³•è¿™ä¸ªè‡ªåŠ¨èƒ½å˜æˆæ˜¾å¼çš„æ·»åŠ ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526875,"discussion_content":"æ²¡æœ‰ã€‚ä½ å¯ä»¥æŠŠæ‰€æœ‰å‡½æ•°æ¥å£é‡Œæ²¡æœ‰æ ‡æ³¨çš„å¼•ç”¨å½“åš &amp;#39;a æ ‡æ³¨ï¼Œæ–¹æ³•é‡Œæ²¡æœ‰æ ‡æ³¨çš„å¼•ç”¨çœ‹æˆ &amp;amp;&amp;#39;a selfï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ &amp;amp;&amp;#39;aã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631671015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312130,"user_name":"Tyler","can_delete":false,"product_type":"c1","uid":1209108,"ip_address":"","ucode":"6C94C462D69EC6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL8Rzicd8f8GlIiaLQ6bYKPdhFJ3tvXw96rMicPv4s2rXEanYKjKdEewjCUAnwfJiaN53WyexhYLu1bbQ/132","comment_is_top":false,"comment_ctime":1631632368,"is_pvip":false,"replies":[{"id":"113125","content":"1. &lt;&#39;a&gt; ç±»ä¼¼äºä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œå®ƒæ˜¯è¯´è¿™ä¸ªå‡½æ•°æœ‰å‡ ä¸ªç±»å‹å‚æ•°ã€‚æ¯”å¦‚ï¼š<br><br>```rust<br>fn process&lt;&#39;a, &#39;b, T1, T1&gt;(s1: &amp;&#39;a T1, s2: &amp;&#39;b T2) {...}<br>```<br><br>è¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‚æ•° &#39;a&#47;&#39;bï¼Œä¸¤ä¸ªç±»å‹å‚æ•° T1&#47;T2ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631671219,"ip_address":"","comment_id":312130,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631632368","product_id":100085301,"comment_content":"1ã€ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ä¸€ä¸ªç–‘é—®ï¼Œæ–‡ä¸­è¯´ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨æ˜¯è¡¨æ˜ï¼Œå‚æ•°ä¸å‚æ•°ä¹‹å‰ï¼Œå‚æ•°ä¸è¿”å›å€¼ ä¹‹é—´çš„å…³ç³»ï¼Œé‚£ä¹ˆå‡½æ•°åä¸å‚æ•°åˆ—è¡¨ä¸­é—´é‚£ä¸ª &lt;&#39;a&gt; å°±æ˜¯ä¸‹é¢ä»£ç ä¸­ç¬¬ä¸€ä¸ª&lt;&#39;a&gt; å³: strtok&lt;&#39;a&gt; æ˜¯ä»£è¡¨çš„ä»€ä¹ˆï¼Ÿ æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ ä¸å‚æ•°çš„æ ‡æ³¨ï¼Œè¿”å›å€¼çš„æ ‡æ³¨æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ<br><br>```rust<br>pub fn strtok&lt;&#39;a&gt;(s: &amp;mut &amp;&#39;a str, delimiter: char) -&gt; &amp;&#39;a str {}  <br>```<br><br>2ã€æ€è€ƒé¢˜1:  ç¼–è¯‘ä¼šæŠ¥s1 å¯å˜å€Ÿç”¨å’Œä¸å¯å˜å€Ÿç”¨åŒæ—¶å­˜åœ¨ã€‚ ç”±äºæ ‡æ³¨åœ¨&amp;&#39;a mut è¿™å°±çº¦æŸäº†è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸç­‰äºæˆ–å°äºè¦æ¯”&amp;&#39;a mutç”Ÿå‘½å‘¨æœŸï¼Œè¿™å°±å¯¼è‡´äº†å¯å˜å¼•ç”¨çš„å­˜åœ¨ã€‚è€Œæ­£ç¡®æ ‡æ³¨åœ¨&amp;mut &amp;&#39;a str, è¿™å°±çº¦æŸè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸç­‰äºæˆ–å°&amp;strçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ­¤æ—¶å¯å˜å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸåœ¨å‡½æ•°ç»“æŸåå°±ä¼šç»“æŸï¼Œåœ¨println!å˜é‡çš„æ˜¯ä¸å¯å˜å¼•ç”¨ï¼Œå°±ä¸ä¼šæœ‰å†²çªäº†ã€‚ ä¸çŸ¥é“è¿™æ ·ç†è§£å¯¹ä¸å¯¹ã€‚","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526873,"discussion_content":"1. &amp;lt;&amp;#39;a&amp;gt; ç±»ä¼¼äºä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œå®ƒæ˜¯è¯´è¿™ä¸ªå‡½æ•°æœ‰å‡ ä¸ªç±»å‹å‚æ•°ã€‚æ¯”å¦‚ï¼š\n\n```rust\nfn process&amp;lt;&amp;#39;a, &amp;#39;b, T1, T1&amp;gt;(s1: &amp;amp;&amp;#39;a T1, s2: &amp;amp;&amp;#39;b T2) {...}\n```\n\nè¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‚æ•° &amp;#39;a/&amp;#39;bï¼Œä¸¤ä¸ªç±»å‹å‚æ•° T1/T2ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631671219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312039,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1631601072,"is_pvip":false,"replies":[{"id":"113090","content":"åœ¨æ²¡æœ‰ NLL ä¹‹å‰ï¼Œæ˜¯é”™è¯¯çš„ã€‚NLL ä¼˜åŒ–äº†è¿™ç±»é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631635613,"ip_address":"","comment_id":312039,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1631601072","product_id":100085301,"comment_content":"å‚è€ƒèµ„æ–™ 5 æœ‰ç‚¹ç–‘æƒ‘äº†ï¼ŒRFC2094 - Non-lexical lifetimes é‡Œé¢å±•ç¤ºè¯´åœ¨ None arm é‡Œé¢æ‰§è¡Œ map.insert æ˜¯é”™è¯¯çš„","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526838,"discussion_content":"åœ¨æ²¡æœ‰ NLL ä¹‹å‰ï¼Œæ˜¯é”™è¯¯çš„ã€‚NLL ä¼˜åŒ–äº†è¿™ç±»é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631635613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312031,"user_name":"æœ‰é“­","can_delete":false,"product_type":"c1","uid":1046302,"ip_address":"","ucode":"2C7CB36CA5C04C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3XbCueYYVWTiclv8T5tFpwiblOxLphvSZxL4ujMdqVMibZnOiaFK2C5nKRGv407iaAsrI0CDICYVQJtiaITzkjfjbvrQ/132","comment_is_top":false,"comment_ctime":1631599191,"is_pvip":false,"replies":[{"id":"113073","content":"å¯ä»¥ï¼Œä½ å¯ä»¥ç”¨ä»»ä½•ä½ è§‰å¾—å®¹æ˜“æ˜ç™½çš„å°å†™å­—æ¯ç”šè‡³å•è¯ï¼Œæ¯”å¦‚ &#39;helloã€‚å°±è·Ÿæ³›å‹çš„ T ä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ç”¨ Vec&lt;T&gt;ï¼Œç”¨ Vec&lt;MyGenericType&gt;ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªåç§°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631601820,"ip_address":"","comment_id":312031,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1631599191","product_id":100085301,"comment_content":"çœ‹äº†å‡ éï¼Œè¿˜æ˜¯æœªèƒ½ç†è§£ï¼Œç”Ÿå‘½å‘¨æœŸå‚æ•°ä¸­çš„è¿™ä¸ª a å•Š b å•Šï¼Œæ˜¯æ€ä¹ˆæ¥çš„ï¼Œä¸€å®šè¦ä»aå¼€å§‹å—ï¼Ÿæˆ‘æ ‡ä¸¤ä¸ªbä¸Šå»è¡Œä¸è¡Œï¼Œæœ‰ä¸ªä¾‹å­é‡Œæ˜¯ä¸€ä¸ªaå’Œä¸€ä¸ªbï¼Œé‚£å˜æˆä¸€ä¸ªbå’Œä¸€ä¸ªcè¡Œå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526834,"discussion_content":"å¯ä»¥ï¼Œä½ å¯ä»¥ç”¨ä»»ä½•ä½ è§‰å¾—å®¹æ˜“æ˜ç™½çš„å°å†™å­—æ¯ç”šè‡³å•è¯ï¼Œæ¯”å¦‚ &amp;#39;helloã€‚å°±è·Ÿæ³›å‹çš„ T ä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ç”¨ Vec&amp;lt;T&amp;gt;ï¼Œç”¨ Vec&amp;lt;MyGenericType&amp;gt;ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªåç§°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631601820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2056396,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyJPx4r7mYedM4545Dw4tscPLBQoB7zUbf0RD0sfMyAlZgS1m05u953BYukYBvTHUZnUe7E8Ou8w/132","nickname":"Griffenliu","note":"","ucode":"0A5BFC80B3C0A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394623,"discussion_content":"æˆ‘ä¸ªäººè§‰å¾—å§,ç”Ÿå‘½å‘¨æœŸå‚æ•°æ˜¯ç”¨æ¥æ ‡æ³¨å‡½æ•°é‡Œé¢å‚æ•°å’Œè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸå“ªäº›æ˜¯ä¸€æ ·çš„,å“ªäº›æ˜¯ä¸åŒçš„,è‡³äºå®ƒä»¬åˆ°åº•æ´»å¤šä¹…,æ ¹æ®å®é™…ä»£ç ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼çš„å§.æ»¡è¶³è§„åˆ™å°±è®©ä½ é€šè¿‡,ä¸æ»¡è¶³å°±è®©ä½ ä¿®æ”¹.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631958637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311863,"user_name":"ç ç”Ÿç¬”è°ˆ","can_delete":false,"product_type":"c1","uid":1229329,"ip_address":"","ucode":"EBAD30BEE4E17D","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/11/323358ed.jpg","comment_is_top":false,"comment_ctime":1631514510,"is_pvip":false,"replies":[{"id":"113010","content":"æ©å­¦ä¹ éå¸¸ç»†è‡´å‘€ï¼Œæ£’ğŸ‘ä¹‹å‰æœ‰ä¸ªåŒå­¦ä¹Ÿåé¦ˆäº†è¿™ä¸ªé—®é¢˜ï¼Œå·²ç»ä¿®æ”¹è¿‡æ¥å•¦","user_name":"ç¼–è¾‘å›å¤","user_name_real":"å¶å¦‚èŠŠ","uid":"2547771","ctime":1631519961,"ip_address":"","comment_id":311863,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1631514510","product_id":100085301,"comment_content":"è€å¸ˆè¿™å¥è¯å¯èƒ½ç¬”è¯¯äº†ï¼šâ€œEmployee çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½å°äºå®ƒä»¬â€ï¼Œ<br>åº”è¯¥æ˜¯â€Employee çš„ç”Ÿå‘½å‘¨æœŸéœ€è¦å°äºå®ƒä»¬â€œå§ï¼Œå› ä¸ºæ–‡ä¸­çš„ä¸‹ä¸€å¥è¯è¯´çš„æ˜¯ï¼š<br>â€œä½¿ç”¨æ•°æ®ç»“æ„æ—¶ï¼Œæ•°æ®ç»“æ„è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸï¼Œéœ€è¦å°äºç­‰äºå…¶å†…éƒ¨å­—æ®µçš„æ‰€æœ‰å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚â€","like_count":0,"discussions":[{"author":{"id":2547771,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e0/3b/8ec916b2.jpg","nickname":"å¤šå°‘","note":"","ucode":"0A6EF7AA6E4BB7","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526776,"discussion_content":"æ©å­¦ä¹ éå¸¸ç»†è‡´å‘€ï¼Œæ£’ğŸ‘ä¹‹å‰æœ‰ä¸ªåŒå­¦ä¹Ÿåé¦ˆäº†è¿™ä¸ªé—®é¢˜ï¼Œå·²ç»ä¿®æ”¹è¿‡æ¥å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631519961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]}]}