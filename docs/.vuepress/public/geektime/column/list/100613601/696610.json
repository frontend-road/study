{"id":696610,"title":"08ï½œåå°„æœºåˆ¶ï¼šç»™ä½ ä¸€æŠŠæ‰“å¼€JVMåé—¨çš„é’¥åŒ™","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åº·æ¨ï¼Œä»Šå¤©æˆ‘ä»¬æ¥èŠèŠJVMä¸­çš„åå°„æœºåˆ¶ã€‚</p><p>åœ¨æœ‰åå°„ä¹‹å‰ï¼ŒJVMå¯¹æˆ‘ä»¬æ¥è¯´å°±åƒæ˜¯ä¸€ä¸ªé»‘ç›’ã€‚æˆ‘ä»¬ä¸å®ƒçš„äº¤äº’ï¼Œä»…ä»…æ˜¯åœ¨ç¼–è¯‘æœŸä¹‹å‰ï¼Œæˆ‘ä»¬éµç…§Javaè¯­æ³•å†™äº†ä¸€æ®µç¨‹åºï¼Œä¹‹åJVMå¦‚ä½•ç¼–è¯‘ï¼Œè¿è¡ŒæœŸå¦‚ä½•æ‰§è¡Œæˆ‘ä»¬ä¸å¾—è€ŒçŸ¥ï¼Œä¹Ÿå’Œæˆ‘ä»¬æ— å…³ã€‚è¿™å°±åƒæˆ‘ä»¬è¿›å…¥ä¸€å®¶é¥­åº— ï¼ŒæœåŠ¡å‘˜é€’ç»™æˆ‘ä»¬ä¸€ä»½èœå•ï¼Œæˆ‘ä»¬èƒ½åšçš„å°±æ˜¯ç…§ç€èœå•å»ç‚¹èœï¼Œå¯¹äºæ™®é€šçš„æ¶ˆè´¹è€…ï¼Œä¸€ä»½ç²¾ç¾èœå•å·²ç»è¶³å¤Ÿäº†ã€‚</p><p>å°±åƒä¸‹é¢è¿™æ®µä»£ç  ï¼Œæˆ‘ä»¬ä¸éœ€è¦åšä»»ä½•äº‹æƒ…ï¼Œæ„é€ å™¨ä¸ç”¨ä¼ å…¥ä»»ä½•å‚æ•°ï¼Œå°±èƒ½å¾—åˆ°ä¸€ä»½è˜¸é…±å°é»„ç“œã€‚</p><pre><code class=\"language-java\">// è˜¸é…±å°é»„ç“œ\npublic class DippedSauceCucumbers {\n&nbsp;&nbsp;&nbsp; private String&nbsp; mainIngredient = \"é»„ç“œ\";\n&nbsp;&nbsp;&nbsp; private String &nbsp;dippingSauce = \"è±†ç“£é…±\";\n&nbsp;&nbsp;&nbsp; private String &nbsp;menu =\"\";\n&nbsp;\n&nbsp;&nbsp;&nbsp; public DippedSauceCucumbers() {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; setMenu();\n&nbsp;&nbsp;&nbsp; }\n&nbsp; &nbsp; // è®¾ç½®èœå•\n&nbsp;&nbsp;&nbsp; private void&nbsp; setMenu() {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; menu = \"è˜¸é…±å°é»„ç“œ{\" +\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"mainIngredient='\" + mainIngredient + '\\'' +\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \", dippingSauce='\" + dippingSauce + '\\'' +\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '}';\n&nbsp;&nbsp;&nbsp; }\n&nbsp; &nbsp; // æ‰“å°èœå•\n&nbsp;&nbsp;&nbsp; public void printMenu(){\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.printf(menu);\n&nbsp;&nbsp;&nbsp; }\n&nbsp;&nbsp;&nbsp; public static void main(String[] args) throws&nbsp; Exception {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DippedSauceCucumbers dippedSauceCucumbers = new DippedSauceCucumbers();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dippedSauceCucumbers.printMenu();\n&nbsp;&nbsp;&nbsp; }\n}\n</code></pre><!-- [[[read_end]]] --><p>è¿è¡Œä¸Šé¢çš„ä»£ç è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š</p><pre><code class=\"language-java\">è˜¸é…±å°é»„ç“œ{mainIngredient='é»„ç“œ', dippingSauce='è±†ç“£é…±â€™}\n</code></pre><p>ä½†å¦‚æœä½ å¸Œæœ›èœå•ä¸­çš„è˜¸é…±å°é»„ç“œä¸æ˜¯è±†ç“£é…±ï¼Œè€Œæ˜¯æ²™æ‹‰é…±ï¼Œé€šå¸¸æƒ…å†µä¸‹å¾ˆéš¾å¾—åˆ°æ»¡è¶³ã€‚å°±åƒä¸Šé¢çš„DippedSauceCucumbersç±» ï¼Œå…¶ä¸­çš„dippingSauceå­—æ®µï¼Œä¹Ÿå°±æ˜¯é…±æ–™çš„å±æ€§ï¼Œæ²¡æœ‰æä¾›ç»™æˆ‘ä»¬ä»»ä½•æ”¹å˜çš„å…¥å£ã€‚<br>\nä½†æ˜¯ï¼Œå‡å¦‚ä½ è·å¾—äº†è¿›å…¥åå¨çš„æƒåˆ©ï¼Œæƒ…å†µå°±å®Œå…¨ä¸ä¸€æ ·äº†ï¼Œä½ å¯ä»¥åŸºäºå¨æˆ¿å·²æœ‰çš„æ‰€æœ‰é£Ÿæå’Œè®¾æ–½æŒ‰éœ€å®šåˆ¶ã€‚</p><p>è€Œå¦‚æœä½ è¿›ä¸€æ­¥å¾—åˆ°è®¸å¯ï¼Œèƒ½å¤ŸåŸºäºå¨æˆ¿å·²æœ‰çš„èƒ½åŠ›ï¼Œæ‰“é€ å±äºè‡ªå·±çš„èœå•ï¼Œå¹¶æä¾›å¤–å–çš„æœåŠ¡ï¼Œé‚£å°±ç›¸å½“äºä½ æ‹¥æœ‰äº†ä¸€ä¸ªå±äºè‡ªå·±çš„å¨æˆ¿ï¼Œè€Œä¸”æ˜¯åœ¨ç°æœ‰çš„å¨æˆ¿çš„è®¾æ–½å’Œèƒ½åŠ›åŸºç¡€ä¹‹ä¸Šçš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/68/5f/6811af7dea9c89bcbe8ab1bcf5643b5f.png?wh=1920x1094\" alt=\"å›¾ç‰‡\"></p><p>å…¶å®è¿™å°±æ˜¯æˆ‘ä»¬å¼€ç¯‡è¯é‡Œè¯´çš„ä½¿ç”¨JVMçš„ä¸‰å±‚å¢ƒç•Œã€‚æˆ‘ä»¬ç†Ÿæ‚‰çš„ Spring æ¡†æ¶å°±æ˜¯å›¾ä¸­çš„ç¬¬ä¸‰å±‚å¢ƒç•Œï¼Œå®ƒå°±æ˜¯åŸºäºJVMè¿™ä¸ªæœºå™¨çš„èƒ½åŠ›æ‰“é€ çš„ä¸€ä¸ªå…¨æ–°çš„æœºå™¨ã€‚è€Œç†è®ºä¸Šä½ ä¹Ÿå¯ä»¥ç»§ç»­åŸºäºSpringæä¾›çš„èƒ½åŠ›ï¼Œæ‰“é€ ä¸“æ³¨äºæŸä¸ªç‰¹å®šé¢†åŸŸçš„å›¾çµæœºã€‚</p><p>å½“ç„¶ï¼Œåœ¨æ­¤ä¹‹å‰ä½ éœ€è¦ç†Ÿç»ƒæŒæ¡JVMçš„åå°„æœºåˆ¶ï¼Œå› ä¸ºä¸ç®¡æ˜¯ä½¿ç”¨JVMçš„ç¬¬äºŒå±‚å¢ƒç•Œè¿˜æ˜¯ç¬¬ä¸‰å±‚å¢ƒç•Œï¼Œéƒ½ç¦»ä¸å¼€ä»Šå¤©çš„ä¸»è§’ï¼š åå°„æœºåˆ¶ã€‚</p><h2>åå°„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>åå°„ï¼ˆReflectionï¼‰æ˜¯JVMæä¾›çš„è¿è¡Œæ—¶æœºåˆ¶ ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨<strong>è¿è¡ŒæœŸ</strong>å€ŸåŠ©&nbsp;Reflection API åŠ¨æ€åŠ è½½ç±»æˆ–è·å–ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯ï¼ŒåŠ¨æ€åˆ›å»ºå¯¹è±¡å¹¶è°ƒç”¨å…¶å±æ€§ï¼Œå³ä½¿å¯¹è±¡ç±»å‹åœ¨ç¼–è¯‘æœŸè¿˜æ˜¯æœªçŸ¥çš„ã€‚è€Œæˆ‘ä»¬é€šå¸¸å†™çš„ç¨‹åºï¼Œå¯¹è±¡çš„ç±»å‹æ˜¯åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šä¸‹æ¥çš„ã€‚å°±åƒä¸Šé¢è¯´åˆ°çš„é¥­åº—çš„èœå•ï¼Œæ¯é“èœå“æ˜¯å›ºå®šçš„ï¼Œæ— æ³•å˜æ›´ã€‚</p><p>è€Œåå°„èµ‹äºˆäº†æˆ‘ä»¬åŠ¨æ€åˆ›å»ºèœå“å’Œè°ƒæ•´èœå“çš„èƒ½åŠ›ã€‚æ‰€ä»¥è¯´ï¼Œè™½ç„¶Javaæ˜¯ä¸€ç§é™æ€è¯­è¨€ï¼Œä½†æ˜¯<strong>åå°„æœºåˆ¶çš„å­˜åœ¨ä½¿Javaä¹Ÿå…·æœ‰äº†åŠ¨æ€æ€§</strong>ï¼Œå…·å¤‡äº†è¿è¡Œæ—¶è‡ªæˆ‘è®¤çŸ¥çš„èƒ½åŠ›ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨è¿è¡Œæ—¶è§‚å¯Ÿç”šè‡³ä¿®æ”¹JVMçš„è¡Œä¸ºã€‚å°±åƒè¿›å…¥é¥­åº—çš„åå¨ï¼Œå¯ä»¥è§‚å¯Ÿç”šè‡³è°ƒæ•´æˆ‘ä»¬çš„èœå“ã€‚</p><p>JVMçš„åå°„æœºåˆ¶ä¸»è¦ä¸ºæˆ‘ä»¬æä¾›äº†å…«ç§èƒ½åŠ›ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/39/97/39115c4b5b36ae66951f56052d1aca97.png?wh=1920x1214\" alt=\"å›¾ç‰‡\"></p><h2>åå°„çš„å®ç°åŸç†</h2><p>åå°„æœºåˆ¶çš„å®ç°ä¾èµ–äºæˆ‘ä»¬å‰ä¸¤èŠ‚è¯¾è®²è¿‡çš„ç±»åŠ è½½æœºåˆ¶ï¼Œæˆ‘ä»¬çŸ¥é“ç±»åŠ è½½çš„ç»“æœï¼Œé™¤äº†æŠŠç±»çš„.class&nbsp;æ–‡ä»¶ä¸­çš„äºŒè¿›åˆ¶æ•°æ®è¯»å…¥å†…å­˜ï¼Œå¹¶æ”¾åˆ°è¿è¡Œæ—¶æ•°æ®åŒºçš„æ–¹æ³•åŒºï¼ŒJVMè¿˜ä¸ºæˆ‘ä»¬åœ¨å †ä¸Šåˆ›å»ºäº†ä¸€ä¸ªjava.lang.Class&nbsp;å¯¹è±¡ï¼Œç”¨æ¥å°è£…ç±»åœ¨æ–¹æ³•åŒºå†…çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å‘æˆ‘ä»¬æä¾›äº†è®¿é—®æ–¹æ³•åŒºå†…çš„æ•°æ®ç»“æ„çš„æ¥å£ã€‚</p><p>è¿™ä¸ªClasså¯¹è±¡å°±æ˜¯åå°„æœºåˆ¶çš„æ ¸å¿ƒï¼Œå®ƒå°±åƒæ‰“å¼€JVMè¿™ä¸ªå¨æˆ¿çš„é’¥åŒ™ï¼Œèµ‹äºˆäº†æˆ‘ä»¬æ‰“é€ ä¸“å±äºè‡ªå·±çš„èœå“çš„èƒ½åŠ›ã€‚æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆé…·ï¼Œé‚£æˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ›´å¥½åœ°åˆ©ç”¨è¿™ç§èƒ½åŠ›å‘¢ï¼Ÿ</p><h2>åå°„API</h2><p>è¿™ç§åŠ¨æ€çš„èƒ½åŠ›æ˜¯åå°„çš„APIæä¾›ç»™æˆ‘ä»¬çš„ã€‚é™¤äº†java.lang.Classç±»ï¼Œåå°„APIä¸»è¦é›†ä¸­åœ¨java.lang.reflectåŒ…ä¸­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/75/ae/75ab73d599f94c9f57481593545f59ae.png?wh=1920x1042\" alt=\"å›¾ç‰‡\"></p><p><img src=\"https://static001.geekbang.org/resource/image/1d/41/1dbe246e0a292bae6cddae3d650ace41.jpg?wh=2512x1316\" alt=\"\"></p><h2><strong>åå°„æ‰§è¡Œæ­¥éª¤</strong></h2><p>æœ‰äº†ä¸Šè¿°API ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ä¸‹é¢çš„æ­¥éª¤å®Œæˆåå°„æœºåˆ¶çš„è°ƒç”¨ã€‚</p><ol>\n<li>æˆ‘ä»¬éœ€è¦å…ˆè·å–æƒ³è¦æ“ä½œçš„ç±»çš„ Class å¯¹è±¡ã€‚</li>\n<li>é€šè¿‡è°ƒç”¨ Class ç±»ä¸­çš„æ–¹æ³•ï¼Œè·å¾—æˆ‘ä»¬éœ€è¦çš„Methodã€Fieldç±»å¯¹è±¡ã€‚</li>\n<li>å€ŸåŠ©åå°„APIï¼Œæ“ä½œè¿™äº›å¯¹è±¡ï¼Œå®Œæˆå®šåˆ¶ã€‚</li>\n</ol><p>ç°åœ¨ï¼ŒæŒæ¡äº†åå°„çš„åŠ›é‡ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥æ‰“é€ æ²™æ‹‰é…±ç‰ˆçš„è˜¸é…±å°é»„ç“œã€‚</p><pre><code class=\"language-java\">// æ²™æ‹‰é…±ç‰ˆæœ¬çš„è˜¸é…±å°é»„ç“œ\npublic static&nbsp; DippedSauceCucumbers&nbsp; createCustomizedFood() throws Exception{\n&nbsp;\n&nbsp; &nbsp; //ç¬¬ä¸€æ­¥ï¼šè·å–Classå¯¹è±¡ï¼Œå°±åƒæ‹¿åˆ°äº†è¿›å…¥é¥­åº—åå¨çš„é’¥åŒ™\n&nbsp;&nbsp;&nbsp; Class dippedSauceCucumbersClass = DippedSauceCucumbers.class;\n&nbsp;\n&nbsp; &nbsp; //ç¬¬äºŒæ­¥ï¼šç”¨åå°„çš„æ–¹å¼ç”Ÿäº§ä¸€ä¸ªDippedSauceCucumberså¯¹è±¡ï¼Œå°±åƒæˆ‘ä»¬å»åå¨è‡ªå·±åšäº†ä¸€ä»½è˜¸é…±å°é»„ç“œ\n&nbsp;&nbsp;&nbsp; Object dippedSauceCucumbers = dippedSauceCucumbersClass.newInstance();\n&nbsp;\n&nbsp; &nbsp; //ç¬¬ä¸‰æ­¥ï¼šå› ä¸ºå·²ç»èº«åœ¨å¨æˆ¿ï¼Œæˆ‘ä»¬å¯ä»¥éšæ„è°ƒæ¢æˆæˆ‘ä»¬å–œæ¬¢çš„é…±æ–™ï¼Œå°å°çš„èœå•å·²ç»ä¸èƒ½çº¦æŸæˆ‘ä»¬ä¸°å¯Œçš„æƒ³è±¡åŠ›äº† ^_^\n&nbsp;&nbsp;&nbsp; Field dippingSauceField = dippedSauceCucumbersClass.getDeclaredField(\"dippingSauce\");\n&nbsp;&nbsp;&nbsp; dippingSauceField.setAccessible(true);\n&nbsp;&nbsp;&nbsp; dippingSauceField.set(dippedSauceCucumbers,\"æ²™æ‹‰é…±\");\n&nbsp;\n&nbsp; &nbsp; //ç¬¬å››æ­¥ï¼šåŸºäºæˆ‘ä»¬è°ƒæ¢çš„é…±æ–™ï¼Œé‡æ–°ç”Ÿæˆæ²™æ‹‰é…±ç‰ˆæœ¬çš„è˜¸é…±å°é»„ç“œçš„èœå•\n&nbsp;&nbsp;&nbsp; Method setMenuMethod = dippedSauceCucumbersClass.getDeclaredMethod(\"setMenu\");\n&nbsp;&nbsp;&nbsp; setMenuMethod.setAccessible(true);\n&nbsp;&nbsp;&nbsp; setMenuMethod.invoke(dippedSauceCucumbers);\n&nbsp;\n&nbsp;&nbsp;&nbsp; return&nbsp; (DippedSauceCucumbers)dippedSauceCucumbers;\n}\n&nbsp;\npublic static void main(String[] args) throws&nbsp; Exception {\n&nbsp;&nbsp;&nbsp; DippedSauceCucumbers dippedSauceCucumbers =&nbsp; DippedSauceCucumbers.createCustomizedFood();\n&nbsp;&nbsp;&nbsp; dippedSauceCucumbers.printMenu();\n}\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code class=\"language-java\">è˜¸é…±å°é»„ç“œ{mainIngredient='é»„ç“œ', dippingSauce='æ²™æ‹‰é…±â€™}&nbsp;\n</code></pre><p>å€ŸåŠ©åå°„ï¼Œæˆ‘ä»¬ç»ˆäºå¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„æ²™æ‹‰é…±ç‰ˆæœ¬çš„è˜¸é…±å°é»„ç“œã€‚æ—¢ç„¶åå°„è¿™ä¹ˆå¼ºå¤§ï¼Œå®ƒè¿˜å…·å¤‡å“ªäº›èƒ½åŠ›å‘¢ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·æ·±æŒ–ä¸€ä¸‹ã€‚</p><h2>åå°„APIè¯¦è§£</h2><h3>Java.lang.Class</h3><p>é¦–å…ˆæˆ‘ä»¬æ¥äº†è§£ä¸‹Java.lang.Classï¼Œä½œä¸ºåå°„æœºåˆ¶çš„æ ¸å¿ƒï¼Œå®ƒä¹Ÿæ˜¯æˆ‘ä»¬ä½¿ç”¨åå°„æœºåˆ¶çš„å…¥å£ï¼Œå°±åƒæˆ‘ä»¬è¿›å…¥é¥­åº—åå¨çš„é‚£æŠŠé’¥åŒ™ã€‚</p><h4>è·å–Classå¯¹è±¡</h4><p>è·å¾—è¿™æŠŠé’¥åŒ™çš„æ–¹å¼æœ‰3ç§ã€‚</p><ol>\n<li>Class.forName</li>\n</ol><p>ä½¿ç”¨ Class ç±»çš„é™æ€æ–¹æ³• forName(String className)ï¼Œè¿™ç§æ–¹æ³•éœ€è¦ä¼ å…¥ç±»çš„å…¨é™å®šåï¼Œå¯ä»¥åŠ¨æ€åŠ è½½ç±»ï¼Œå¹¶è§¦å‘é™æ€ä»£ç å—çš„æ‰§è¡Œï¼Œä¸€èˆ¬ç”¨äºåŠ è½½é©±åŠ¨å’Œæ¡†æ¶çš„åº•å±‚æ“ä½œã€‚ä½†æ˜¯å› ä¸ºè¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºClassNotFoundExceptionå¼‚å¸¸ï¼Œæ‰€ä»¥ä½ éœ€è¦å¤„ç†è¿™ç§å¯èƒ½æ€§ï¼Œçœ‹ä¸€ä¸‹æˆ‘ç»™å‡ºçš„ç¤ºä¾‹ä»£ç ã€‚</p><pre><code class=\"language-java\">try {\n&nbsp;&nbsp;&nbsp; Class clazz = Class.forName(\"com.restaurant.DippedSauceCucumbers\");\n&nbsp;&nbsp;&nbsp; System.out.println(\"Full name of DippedSauceCucumbers class is: \" + clazz.getName());\n} catch(ClassNotFoundException e) {\n&nbsp;&nbsp;&nbsp; e.printStackTrace();\n}\n</code></pre><ol start=\"2\">\n<li>.classè¯­æ³•</li>\n</ol><p>å¯¹äºä»»ä½•ç±»å‹çš„.classéƒ½å¯ä»¥è·å–å¯¹åº”çš„Classå¯¹è±¡ã€‚è¿™æ˜¯æœ€ç›´æ¥ã€æœ€ç®€å•çš„æ–¹å¼ï¼Œä¸éœ€è¦å¤„ç†å¼‚å¸¸ï¼Œä½†å¼Šç«¯ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯å¿…é¡»åœ¨ç¼–è¯‘æœŸå°±çŸ¥é“å…·ä½“çš„ç±»ï¼Œç±»ä¼¼äºå¨æˆ¿é‡Œæœ¬å¯ä»¥æä¾›100é“èœï¼Œä½†æ˜¯èœå•ä¸Šåªæ˜¯å†™äº†10é“èœï¼Œè€Œä½ åªèƒ½æ“ä½œè¿™èœå•ä¸Šé¢çš„10é“èœï¼ŒåŠ¨æ€æ€§å¤§æ‰“æŠ˜æ‰£ã€‚</p><pre><code class=\"language-java\">Class clazz = DippedSauceCucumbers.class;\nSystem.out.println(\"Simple name of DippedSauceCucumbers class is: \" + clazz.getSimpleName());&nbsp;\n</code></pre><ol start=\"3\">\n<li>Objectç±»çš„æ–¹æ³•&nbsp;getClass()</li>\n</ol><p>è¿™ä¸ªæ–¹æ³•æ˜¯è¢«æ‰€æœ‰Obectå­ç±»ç»§æ‰¿çš„ï¼Œé€šè¿‡getClass() æ–¹æ³•å°±å¯ä»¥è·å–Classå¯¹è±¡ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½ç»§æ‰¿äº†Objectçš„è¿™ä¸ªæ–¹æ³•ã€‚</p><pre><code class=\"language-java\">DippedSauceCucumbers&nbsp; dippedSauceCucumbers= new DippedSauceCucumbers();\nClass clazz = dippedSauceCucumbers.getClass();\nSystem.out.println(\"Type of&nbsp; object is: \" + clazz.getSimpleName());&nbsp;\n</code></pre><p>è¿™ç§æ–¹æ³•ä¸éœ€è¦ç±»çš„å®Œå…¨é™å®šåï¼Œåªéœ€è¦è·å–å¯¹è±¡å®ä¾‹çš„ç±»å‹ã€‚ä½†æ˜¯ï¼Œä½ éœ€è¦ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰å®ä¾‹çš„æƒ…å†µä¸‹è¿™ç§æ–¹æ³•å°±æ²¡åŠæ³•ä½¿ç”¨äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b5/52/b5e8b30dc56ae5a23e7d311784e73f52.png?wh=1920x622\" alt=\"å›¾ç‰‡\"></p><h3>Constructorç±»</h3><p>æ‹¥æœ‰äº†Classå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å€Ÿæ­¤è¿›ä¸€æ­¥è·å–ä¸€ä¸ªç±»çš„Constructorã€Methodã€Filedç­‰ä¿¡æ¯ï¼Œä»¥æ„é€ å™¨ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡4ç§æ–¹æ³•è·å¾—ã€‚</p><ol>\n<li>ä½¿ç”¨Classç±»çš„getConstructoræ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›æŒ‡å®šå‚æ•°ç±»å‹çš„publicæ„é€ å‡½æ•°ï¼Œå®‰å…¨æ€§è¾ƒé«˜ï¼Œä½†æ˜¯æ— æ³•è·å–åˆ°privateå’Œprotectedçš„æ„é€ å‡½æ•°ã€‚</li>\n<li>ä½¿ç”¨Classç±»çš„getConstructorsæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ç±»ä¸­çš„æ‰€æœ‰publicæ„é€ å‡½æ•°ï¼Œä½¿ç”¨èµ·æ¥ç®€å•ä¾¿æ·ï¼Œä½†æ˜¯æ— æ³•è·å–åˆ°épublicçš„æ„é€ å‡½æ•°ã€‚</li>\n<li>ä½¿ç”¨Classç±»çš„getDeclaredConstructoræ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›æŒ‡å®šå‚æ•°ç±»å‹çš„æ‰€æœ‰æ„é€ å‡½æ•°ï¼Œä¸ä»…é™äºpublicæ„é€ å‡½æ•°ã€‚è¿™ç§æ–¹å¼å¯ä»¥è·å–æ‰€æœ‰å£°æ˜çš„æ„é€ å‡½æ•°ï¼ŒåŒ…æ‹¬publicã€protectedã€defaultä»¥åŠprivateã€‚ä½†æ˜¯ä½¿ç”¨ä¸å½“å¯èƒ½ä¼šè®¿é—®åˆ°æœ¬ä¸åº”è¯¥è¢«è®¿é—®åˆ°çš„æ„é€ å‡½æ•°ï¼Œå¯¼è‡´å®‰å…¨é—®é¢˜ã€‚</li>\n<li>ä½¿ç”¨Classç±»çš„getDeclaredConstructorsæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ç±»ä¸­çš„æ‰€æœ‰æ„é€ å‡½æ•°ï¼ŒåŒ…æ‹¬épublicçš„ã€‚è¿™ç§æ–¹å¼å¯ä»¥è·å–åˆ°æ‰€æœ‰å£°æ˜çš„æ„é€ å‡½æ•°ï¼ŒåŒ…æ‹¬publicã€protectedã€defaultä»¥åŠprivateï¼Œæ˜¯æœ€å…¨é¢çš„è·å–æ„é€ å‡½æ•°çš„æ–¹æ³•ã€‚ä½†æ˜¯ä½¿ç”¨ä¸å½“å¯èƒ½ä¼šè®¿é—®åˆ°æœ¬ä¸åº”è¯¥è¢«è®¿é—®åˆ°çš„æ„é€ å‡½æ•°ï¼Œå¯¼è‡´å®‰å…¨é—®é¢˜ã€‚</li>\n</ol><p>æˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ã€‚</p><pre><code class=\"language-java\">Class clazz = DippedSauceCucumbers.class;\n// è·å–publicçš„ã€æ— å‚çš„æ„é€ å‡½æ•°\nConstructor constructor1 = clazz.getConstructor();\n// è·å–æ‰€æœ‰çš„publicæ„é€ å‡½æ•°\nConstructor[] constructors1 = clazz.getConstructors();\n// è·å–æ‰€æœ‰çš„æ„é€ å‡½æ•°ï¼ŒåŒ…æ‹¬épublicçš„\nConstructor[] constructors2 = clazz.getDeclaredConstructors();\n</code></pre><p>Methodã€Filed ç­‰æ–¹å¼çš„APIä½¿ç”¨å’Œè¿™ä¸ªå·®ä¸å¤šï¼Œæœ‰å…´è¶£çš„è¯ä½ å¯ä»¥å‚ç…§åå°„APIå°è¯•ä½¿ç”¨ã€‚</p><h2>åå°„åº”ç”¨åœºæ™¯</h2><p>åå°„æœºåˆ¶æœ‰éå¸¸ä¸°å¯Œçš„åº”ç”¨åœºæ™¯ï¼ŒæŒ‰ç…§æˆ‘ä»¬åœ¨å‰é¢æåˆ°çš„ä½¿ç”¨JVMçš„ä¸‰å±‚å¢ƒç•Œï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹åå°„æœºåˆ¶æ˜¯æ€ä¹ˆåŠ©åŠ›æˆ‘ä»¬åœ¨ç¬¬äºŒå±‚å’Œç¬¬ä¸‰å±‚å¢ƒç•Œä¸Šä½¿ç”¨JVMçš„ã€‚</p><h3>ç¬¬äºŒå±‚å¢ƒç•Œï¼šè¿è¡Œæ—¶åŠ¨æ€æ‰©å±•JVMçš„æä¾›èƒ½åŠ›</h3><h4>åŠ¨æ€åˆ›å»ºå¯¹è±¡</h4><p>å½“éœ€è¦åŸºäºè¿è¡Œæ—¶çš„æ¡ä»¶åˆ›å»ºä¸åŒç±»å‹çš„å¯¹è±¡æ—¶ï¼Œåå°„æœºåˆ¶æ˜¯å¿…éœ€çš„ã€‚</p><p>åˆ›å»ºå¯¹è±¡æœ‰ä¸¤ç§æ–¹æ³•ã€‚</p><ol>\n<li>ä½¿ç”¨ Class å¯¹è±¡çš„ newInstance()æ–¹æ³•æ¥åˆ›å»ºè¯¥ Class å¯¹è±¡å¯¹åº”ç±»çš„å®ä¾‹ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•è¦æ±‚è¯¥Class å¯¹è±¡å¯¹åº”çš„ç±»æœ‰é»˜è®¤çš„ç©ºæ„é€ å™¨ã€‚</li>\n<li>å…ˆä½¿ç”¨ Class å¯¹è±¡è·å–æŒ‡å®šçš„ Constructor å¯¹è±¡ï¼Œå†è°ƒç”¨ Constructor å¯¹è±¡çš„ newInstance()æ–¹æ³•æ¥åˆ›å»º Class å¯¹è±¡å¯¹åº”ç±»çš„å®ä¾‹ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•å¯ä»¥é€‰å®šæ„é€ æ–¹æ³•åˆ›å»ºå®ä¾‹ã€‚</li>\n</ol><pre><code class=\"language-java\">//è·å– DippedSauceCucumbers ç±»çš„ Class å¯¹è±¡\nClass clazz=Class.forName(\"com.restaurant.DippedSauceCucumbers\");\n//ä½¿ç”¨.newInstane æ–¹æ³•åˆ›å»ºå¯¹è±¡\nDippedSauceCucumbers dippedSauceCucumbers_1=(DippedSauceCucumbers) clazz.newInstance();\n//è·å–æ„é€ æ–¹æ³•å¹¶åˆ›å»ºå¯¹è±¡\nConstructor c=clazz.getDeclaredConstructor();\n//åˆ›å»ºå¯¹è±¡å¹¶è®¾ç½®å±æ€§\nDippedSauceCucumbers dippedSauceCucumbers_2=(DippedSauceCucumbers) c.newInstance();\n</code></pre><h4>é€šè¿‡åå°„åŠ¨æ€åˆ›å»ºå’Œè®¿é—®æ•°ç»„</h4><pre><code class=\"language-java\">Class&lt;?&gt;&nbsp;&nbsp; DippedSauceCucumbersCls=Class.forName(\"com.restaurant.DippedSauceCucumbers\");\nObject array= Array.newInstance(DippedSauceCucumbersCls, 5);\nArray.set(array, 4, new DippedSauceCucumbers());\nSystem.out.println(Array.get(array, 4));\n</code></pre><p>ä»£ç ä¸­Array.newInstance(DippedSauceCucumbersCls, 5);è¡¨ç¤ºåˆ›å»ºä¸€ä¸ª<strong>DippedSauceCucumbers</strong>ç±»å‹å¤§å°ä¸º5çš„æ•°ç»„ã€‚</p><h3>ç¬¬ä¸‰å±‚å¢ƒç•Œï¼šåŸºäºJVMæä¾›çš„èƒ½åŠ›æ‰“é€ ä¸€ä¸ªå®šåˆ¶çš„å›¾çµæœº</h3><p>å…¶å®æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„Springæ¡†æ¶ ï¼Œæ­£æ˜¯å€ŸåŠ©åå°„æœºåˆ¶ï¼Œå®ç°äº†æˆ‘ä»¬è¯´çš„ä½¿ç”¨JVMçš„ç¬¬ä¸‰å±‚å¢ƒç•Œã€‚Springå°è£…äº†JVMåº•å±‚çš„èƒ½åŠ›ï¼Œé€šè¿‡Beanå¯¹å¤–æä¾›æœåŠ¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨Javaçš„Objectï¼Œè¿™é‡Œçš„Beanå°±åƒæˆ‘ä»¬å°è£…äº†é¥­åº—åå¨çš„èƒ½åŠ›æ‰“é€ çš„æ–°èœå•ã€‚</p><p>è€Œè¿™ä¸€åˆ‡éƒ½ç¦»ä¸å¼€åå°„æœºåˆ¶çš„æ”¯æŒï¼Œä¸ç®¡æ˜¯ä¾èµ–æ³¨å…¥è¿˜æ˜¯AOPç¼–ç¨‹ï¼Œéƒ½ä½¿ç”¨åˆ°äº†åå°„æœºåˆ¶ã€‚æ¯”å¦‚åœ¨ä¾èµ–æ³¨å…¥æ—¶ï¼ŒSpringä¼šé€šè¿‡åå°„è°ƒç”¨Beançš„setteræ–¹æ³•æˆ–è€…æ„é€ å™¨æ¥å®ç°ä¾èµ–å…³ç³»çš„æ³¨å…¥ï¼›åœ¨AOPç¼–ç¨‹ä¸­ï¼ŒSpringåˆ™æ˜¯é€šè¿‡åå°„è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œå¹¶åœ¨è°ƒç”¨ä¹‹å‰æˆ–ä¹‹åæ·»åŠ å¢å¼ºå¤„ç†ï¼Œä»è€Œå®ç°é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿ä½ çœ‹æ¸…å…¶ä¸­çš„æœ¬è´¨ï¼Œæˆ‘æŠŠåå°„åœ¨Springä¸­çš„åº”ç”¨è¿‡ç¨‹æŠ½è±¡æˆäº†3ä¸ªæ­¥éª¤ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šSpringé€šè¿‡åå°„çš„æ–¹å¼åˆ›å»ºBeanå®ä¾‹ã€‚åœ¨Springä¸­ï¼Œå¯¹äºé…ç½®çš„Beanï¼Œå…¶åˆ›å»ºå·¥ä½œæ˜¯ç”±BeanFactoryå®Œæˆçš„ã€‚åœ¨AbstractBeanFactoryç±»çš„doCreateBeanæ–¹æ³•ä¸­ï¼Œè°ƒç”¨createBeanInstanceæ–¹æ³•åˆ›å»ºBeanå®ä¾‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä½¿ç”¨äº†åå°„æŠ€æœ¯ã€‚</p><pre><code class=\"language-java\">protected Object createBeanInstance(String beanName, RootBeanDefinition mbd, @Nullable Object[] args) {\n// ç¡®å®šæ„é€ å™¨\nConstructor&lt;?&gt; constructorToUse;\n...\n// å®ä¾‹åŒ–bean\nreturn getInstantiationStrategy().instantiate(mbd, beanName, this.beanFactory, constructorToUse, args);\n}\n</code></pre><p>ç¬¬äºŒæ­¥ï¼šSpringé€šè¿‡åå°„è®¾ç½®å±æ€§å€¼ã€‚åœ¨BeanPostProcessoråç½®å¤„ç†å™¨ä¸­ï¼ŒSpringä¼šè¯»å–å±æ€§é…ç½®ï¼Œä½¿ç”¨åå°„è°ƒç”¨setæ–¹æ³•ä¸ºBeançš„å±æ€§è®¾ç½®å€¼ã€‚</p><pre><code class=\"language-java\">public class AutowiredAnnotationBeanPostProcessor extends InjectionMetadata.InjectedElement {\n@Override\n&nbsp;&nbsp;&nbsp; protected void inject(Object bean, @Nullable String beanName, @Nullable PropertyValues pvs) throws Throwable {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Field field = (Field) this.member;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Object value;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReflectionUtils.makeAccessible(field);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; field.set(bean, value);\n&nbsp;&nbsp;&nbsp; }\n}\n</code></pre><p>ç¬¬ä¸‰æ­¥ï¼šSpringé€šè¿‡åå°„è°ƒç”¨Beançš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ï¼Œå¦‚init-methodå’Œdestroy-methodã€‚</p><p>ä¸‹é¢æ˜¯å¦‚ä½•é€šè¿‡@Beanæ³¨è§£å‘Springæ³¨å†Œä¸€ä¸ªBeanç¤ºä¾‹ï¼Œè¿™ä¹Ÿæ˜¯å¦ä¸€ä¸ªé‡è¦çš„ä½¿ç”¨åå°„çš„åœ°æ–¹ã€‚</p><pre><code class=\"language-java\">@Configuration\npublic class AppConfig {\n&nbsp;&nbsp;&nbsp; @Bean\n&nbsp;&nbsp;&nbsp; public MyBean myBean() {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MyBean myBean = new MyBean();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myBean.setName(\"Test Bean\");\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myBean.setAge(25);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return myBean;\n&nbsp;&nbsp;&nbsp; }\n}\n</code></pre><p>ä»¥ä¸Š@Beanæ³¨è§£çš„æ–¹æ³•è¿”å›ä¸€ä¸ªMyBeançš„å®ä¾‹ï¼ŒSpringä¼šä½¿ç”¨åå°„è°ƒç”¨è¿™ä¸ªæ–¹æ³•è·å–è¯¥å®ä¾‹ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªå®ä¾‹æ³¨å†Œåˆ°Spring IoCå®¹å™¨ä¸­ã€‚å½“å…¶ä»–åœ°æ–¹éœ€è¦ä½¿ç”¨è¿™ä¸ªBeançš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡@Autowiredæ³¨è§£æ¥è¿›è¡Œæ³¨å…¥ã€‚</p><p>åœ¨å®é™…ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼ŒSpringæ¡†æ¶çš„åå°„æ“ä½œç›¸å½“å¹¿æ³›å’Œå¤æ‚ï¼Œä½†æ˜¯åŸºæœ¬åŸç†éƒ½æ˜¯Javaçš„åå°„æœºåˆ¶ï¼Œé€šè¿‡è·å–ç±»çš„Classå¯¹è±¡ï¼Œç„¶ååˆ›å»ºå®ä¾‹ï¼Œè®¾ç½®å±æ€§å’Œè°ƒç”¨æ–¹æ³•ã€‚å…¶å®ä¸ä»…ä»…æ˜¯Springï¼Œä½œä¸ºåŠè‡ªåŠ¨ORMæ¡†æ¶çš„ä»£è¡¨ï¼ŒMyBatisä¹Ÿæ˜¯é€šè¿‡åå°„æ¥å®Œæˆç»“æœé›†çš„æ˜ å°„çš„ï¼Œé€šè¿‡åå°„è·å–ç±»çš„å…ƒä¿¡æ¯ï¼Œå¹¶æ ¹æ®å…ƒä¿¡æ¯æ˜ å°„æˆå¯¹åº”çš„Javaå¯¹è±¡ã€‚</p><p>æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„å¤§å¤šæ•°æ¡†æ¶ï¼ŒèƒŒåéƒ½æœ‰åå°„çš„èº«å½±ã€‚æ‰€ä»¥å­¦ä¹ å¥½åå°„æœºåˆ¶ï¼Œå¯¹æˆ‘ä»¬æŒæ¡è¿™äº›æ¡†æ¶ï¼Œç”šè‡³æ‰“é€ è‡ªå·±çš„æ¡†æ¶éƒ½å¤§æœ‰è£¨ç›Šã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>ä»Šå¤©çš„è¿™èŠ‚è¯¾åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œä¸çŸ¥é“ä½ æ˜¯å¦æƒŠè¯§äºåå°„æœºåˆ¶çš„é­…åŠ›ï¼Œå®ƒå°±åƒJVMä¸ºæˆ‘ä»¬æ‰“å¼€çš„ä¸€ä¸ªåé—¨ï¼Œä¸ä»…è®©æˆ‘ä»¬èƒ½ä¸€çª¥ç©¶ç«Ÿï¼Œè¿˜èƒ½å¾—å…¶é—¨è€Œå…¥ï¼Œä¸€è¯•èº«æ‰‹ã€‚</p><p>ä½†ä»»ä½•äº‹æœ‰ä¸€åˆ©å¿…æœ‰ä¸€å¼Šï¼Œåå°„å¸¦æ¥ä¾¿åˆ©æ€§çš„åŒæ—¶ï¼Œä¼šç ´åç±»çš„å°è£…æ€§ã€æŸè€—æ€§èƒ½ï¼Œè¿‡åº¦ä½¿ç”¨è¿˜ä¼šä½¿ä»£ç å˜å¾—æ›´åŠ å¤æ‚ï¼Œé™ä½å¯ç»´æŠ¤æ€§ï¼Œè¿™å°±æ³¨å®šäº†æˆ‘ä»¬ä½¿ç”¨åå°„æœºåˆ¶çš„æ—¶å€™è¦æ›´åŠ å°å¿ƒã€ä¸¥æ ¼é™åˆ¶ã€‚å°±åƒé¡¾å®¢ä»¬éƒ½èƒ½éšæ„è¿›å…¥é¥­åº—åå¨ï¼Œè‡ªå·±åŠ¨æ‰‹ï¼Œå¯¹å¤–å‘å¸ƒèœå•ï¼Œé‚£ä¹ˆé£Ÿå“çš„å®‰å…¨ã€è´¨é‡çš„ä¿éšœå¿…ç„¶ä¼šæˆä¸ºä¸€ä¸ªå¤§é—®é¢˜ã€‚</p><p>ä½†æ˜¯æ— æ³•å¦è®¤ï¼Œåå°„æœºåˆ¶ç»™Javaè¿™ä¸ªé™æ€è¯­è¨€å¸¦æ¥äº†è¯­è¨€çš„åŠ¨æ€æ€§ã€‚å€ŸåŠ©åå°„APIï¼Œç¨‹åºå¯ä»¥åœ¨è¿è¡Œæ—¶å–å¾—ä»»ä½•ä¸€ä¸ªå·²çŸ¥åç§°çš„ç±»çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®ƒçš„æ„é€ æ–¹æ³•ã€å£°æ˜çš„å­—æ®µå’Œå®šä¹‰çš„æ–¹æ³•ç­‰ã€‚</p><p>åå°„å°±åƒå®ƒçš„è‹±æ–‡åŒä¹‰è¯reflection ä¸€æ ·ï¼Œå¦‚åŒè¿è¡Œæ—¶ä¸­Javaç±»åœ¨æ°´ä¸­çš„å€’å½±ã€‚é€šè¿‡äº†è§£è¿è¡Œæ—¶Javaç±»çš„å†…éƒ¨ç»“æ„ï¼Œèµ‹äºˆäº†æˆ‘ä»¬ä¸è¿è¡Œä¸­çš„Javaç±»è¿›è¡Œäº¤äº’çš„èƒ½åŠ›ï¼Œä½¿æˆ‘ä»¬ä¸ä»…èƒ½é€šè¿‡åå°„æœºåˆ¶åŠ¨æ€åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿˜å¯ä»¥åŠ¨æ€è°ƒç”¨ä¸€ä¸ªè¿è¡Œä¸­çš„å¯¹è±¡çš„æ–¹æ³•ç­‰ã€‚è¿™ç§ä¸æºç çº§è°ƒç”¨ç­‰æ•ˆçš„æ–¹å¼ï¼Œæå¤§åœ°æå‡äº†Javaç¨‹åºåœ¨è¿è¡Œæ€çš„çµæ´»æ€§ã€‚</p><p>æ‰€ä»¥ç†Ÿç»ƒæŒæ¡åå°„æœºåˆ¶ï¼Œå»é¢†æ‚ŸJDKæºç è¿˜æœ‰å¼€æºæ¡†æ¶ä¸­åå°„æœºåˆ¶çš„é‚£äº›å·§å¦™åº”ç”¨ï¼Œä¸€å®šä¼šæå‡æˆ‘ä»¬çš„ç¼–ç èƒ½åŠ›ï¼Œå¹¶å¸®åŠ©æˆ‘ä»¬æ—©æ—¥æ‰“é€ å‡ºå±äºè‡ªå·±çš„æ¡†æ¶ï¼Œå®ç°å¯¹JVMä½¿ç”¨çš„ç¬¬ä¸‰å±‚å¢ƒç•Œã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å­¦è€Œä¸æ€åˆ™ç½”ï¼Œå­¦å®Œè¿™èŠ‚è¯¾ä¹‹åï¼Œæˆ‘ç»™ä½ ç•™ä¸¤ä¸ªé—®é¢˜ã€‚</p><ol>\n<li>è·å–ä¸€ä¸ªclasså¯¹è±¡ä¸åŒæ–¹å¼çš„å·®å¼‚ç‚¹åœ¨å“ªå„¿ï¼Ÿ</li>\n<li>å¦‚ä½•é€šè¿‡åå°„æœºåˆ¶è·å–æŸä¸ªç±»ä»¥åŠå®ƒç»§æ‰¿çš„ç±»çš„æ‰€æœ‰å…¬æœ‰å­—æ®µï¼Ÿ</li>\n</ol><p>å¸Œæœ›ä½ è®¤çœŸæ€è€ƒï¼Œç„¶åæŠŠæ€è€ƒåçš„ç»“æœåˆ†äº«åˆ°è¯„è®ºåŒºï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºï¼Œå¦‚æœæœ‰æ”¶è·çš„è¯ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾çš„å†…å®¹åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p><h2>ğŸ’¡ç‚¹äº®ä½ çš„çŸ¥è¯†æ¡†æ¶å›¾</h2><p><img src=\"https://static001.geekbang.org/resource/image/44/8d/440862d95dfd38fc2fd32acfca2edf8d.jpg?wh=10117x7256\" alt=\"å›¾ç‰‡\"></p>","comments":[{"had_liked":false,"id":380715,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"å®‰å¾½","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1694050224,"is_pvip":false,"replies":[{"id":139133,"content":"å½“æˆ‘ä»¬è¯´è·å– Class å¯¹è±¡çš„ä¸‰ç§æ–¹å¼åŠ¨æ€æ€§ä¸æ–­é™ä½ï¼Œä¸»è¦æ˜¯æŒ‡åœ¨ç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸå¯¹ç±»çš„ä¾èµ–åº¦å’Œè€¦åˆç¨‹åº¦ï¼šClass.forNameæ–¹å¼æ˜¯æœ€å…·åŠ¨æ€æ€§çš„ï¼Œå› ä¸ºè¿™ç§æ–¹å¼æ—¢å¯ä»¥åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡ŒæœŸé€šè¿‡åŠ¨æ€æ‹¼æ¥ç±»åå­—æ¥è·å–ï¼Œå…·æœ‰å¾ˆé«˜çš„çµæ´»æ€§ã€‚ä½†æ˜¯å› ä¸ºå…¶æ˜¯è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ï¼Œæ‰€ä»¥å¦‚æœç±»åœ¨ç¼–è¯‘æœŸä¸å­˜åœ¨ï¼Œè¿è¡ŒæœŸåŠ è½½çš„æ—¶å€™å°±ä¼šå‡ºç°ClassNotFoundExceptionã€‚å¯¹è±¡çš„.getClassæ–¹å¼å…¶æ¬¡ï¼Œè¿™ç§æ–¹å¼éœ€è¦æœ‰å®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ä¸€èˆ¬æ˜¯å·²ç»æ˜ç¡®äº†å…·ä½“çš„ç±»ï¼Œè¿˜èƒ½ä¿è¯è¯¥ç±»ä¸€å®šå­˜åœ¨ã€‚æ‰€æœ‰çš„æ–¹å¼æ‹¿åˆ°çš„Classå¯¹è±¡æœ¬è´¨ä¸Šéƒ½ä¸€æ ·ï¼Œéƒ½å¯ä»¥ç”¨æ¥è·å–ç±»çš„ä¿¡æ¯æˆ–è€…è¿›è¡Œåå°„æ“ä½œç­‰ã€‚ä¸»è¦è€ƒè™‘çš„æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™æœ‰ç€ä¸åŒçš„ä¾¿æ·ç¨‹åº¦ï¼Œä»¥åŠå„è‡ªé€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œæ‰€ä»¥å°±æœ‰äº†åŠ¨æ€æ€§çš„åˆ’åˆ†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696515257,"ip_address":"åŒ—äº¬","comment_id":380715,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è·å– Class å¯¹è±¡çš„ä¸‰ç§æ–¹å¼ï¼Œå…¶åŠ¨æ€æ€§ä¸æ–­é™ä½ï¼Œæ²¡å¤ªç†è§£ã€‚æ—¢ç„¶æ‹¿åˆ°äº† Class å¯¹è±¡è¿™æŠŠé’¥åŒ™ï¼Œä¸ç®¡å“ªç§æ–¹å¼æ‹¿åˆ°ï¼Œå…¶æœ¬è´¨ä¸éƒ½ä¸€æ ·å—ï¼Œåé¢æƒ³æ€ä¹ˆç©å°±æ€ä¹ˆç©ã€‚æˆ‘æ˜¯ä¸æ˜¯è§’åº¦ç†è§£é”™äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629017,"discussion_content":"å½“æˆ‘ä»¬è¯´è·å– Class å¯¹è±¡çš„ä¸‰ç§æ–¹å¼åŠ¨æ€æ€§ä¸æ–­é™ä½ï¼Œä¸»è¦æ˜¯æŒ‡åœ¨ç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸå¯¹ç±»çš„ä¾èµ–åº¦å’Œè€¦åˆç¨‹åº¦ï¼šClass.forNameæ–¹å¼æ˜¯æœ€å…·åŠ¨æ€æ€§çš„ï¼Œå› ä¸ºè¿™ç§æ–¹å¼æ—¢å¯ä»¥åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡ŒæœŸé€šè¿‡åŠ¨æ€æ‹¼æ¥ç±»åå­—æ¥è·å–ï¼Œå…·æœ‰å¾ˆé«˜çš„çµæ´»æ€§ã€‚ä½†æ˜¯å› ä¸ºå…¶æ˜¯è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ï¼Œæ‰€ä»¥å¦‚æœç±»åœ¨ç¼–è¯‘æœŸä¸å­˜åœ¨ï¼Œè¿è¡ŒæœŸåŠ è½½çš„æ—¶å€™å°±ä¼šå‡ºç°ClassNotFoundExceptionã€‚å¯¹è±¡çš„.getClassæ–¹å¼å…¶æ¬¡ï¼Œè¿™ç§æ–¹å¼éœ€è¦æœ‰å®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ä¸€èˆ¬æ˜¯å·²ç»æ˜ç¡®äº†å…·ä½“çš„ç±»ï¼Œè¿˜èƒ½ä¿è¯è¯¥ç±»ä¸€å®šå­˜åœ¨ã€‚æ‰€æœ‰çš„æ–¹å¼æ‹¿åˆ°çš„Classå¯¹è±¡æœ¬è´¨ä¸Šéƒ½ä¸€æ ·ï¼Œéƒ½å¯ä»¥ç”¨æ¥è·å–ç±»çš„ä¿¡æ¯æˆ–è€…è¿›è¡Œåå°„æ“ä½œç­‰ã€‚ä¸»è¦è€ƒè™‘çš„æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™æœ‰ç€ä¸åŒçš„ä¾¿æ·ç¨‹åº¦ï¼Œä»¥åŠå„è‡ªé€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œæ‰€ä»¥å°±æœ‰äº†åŠ¨æ€æ€§çš„åˆ’åˆ†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696515257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1444698,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0b/5a/453ad411.jpg","nickname":"C.","note":"","ucode":"5AE269220EFD73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627437,"discussion_content":"ä»–è¯´çš„æ˜¯åœºæ™¯ä¸å¤ªä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694148945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1052859,"avatar":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","nickname":"Demon.Lee","note":"","ucode":"7F0E5493A8E345","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1444698,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0b/5a/453ad411.jpg","nickname":"C.","note":"","ucode":"5AE269220EFD73","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627707,"discussion_content":"è¬è¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694469038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":627437,"ip_address":"å®‰å¾½","group_id":0},"score":627707,"extra":""}]}]},{"had_liked":false,"id":381729,"user_name":"ç™½ä¸åƒ","can_delete":false,"product_type":"c1","uid":1033578,"ip_address":"æ¹–åŒ—","ucode":"F019914D8819C2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/6a/7f858f1f.jpg","comment_is_top":false,"comment_ctime":1695751851,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":1,"score":2,"product_id":100613601,"comment_content":"æ·±åº¦å·®ç‚¹æ„æ€","like_count":3},{"had_liked":false,"id":380674,"user_name":"^_^","can_delete":false,"product_type":"c1","uid":1682012,"ip_address":"åŒ—äº¬","ucode":"05E7C6F1DD6E77","user_header":"https://static001.geekbang.org/account/avatar/00/19/aa/5c/d2c1c7ce.jpg","comment_is_top":false,"comment_ctime":1693981471,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"1ï¼Œè·å–ä¸€ä¸ª class å¯¹è±¡ä¸åŒæ–¹å¼çš„å·®å¼‚ç‚¹\n    1ï¼‰ï¼Œ å¯¹è±¡çš„getClass()æ–¹æ³•è·å–çš„Classå¯¹è±¡æ˜¯é’ˆå¯¹å…·ä½“çš„å¯¹è±¡çš„ï¼Œè€Œ.classè¯­æ³•å’ŒClass.forName()æ–¹æ³•è·å–çš„Classå¯¹è±¡æ˜¯é’ˆå¯¹ç±»æœ¬èº«çš„ã€‚\n    2ï¼‰ï¼Œä½¿ç”¨å¯¹è±¡çš„getClass()æ–¹æ³•è·å–çš„Classå¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–çš„ï¼Œè€Œä½¿ç”¨.classè¯­æ³•å’ŒClass.forName()æ–¹æ³•è·å–çš„Classå¯¹è±¡æ˜¯åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šçš„ã€‚\n    3ï¼‰ï¼Œä½¿ç”¨.classè¯­æ³•å’ŒClass.forName()æ–¹æ³•è·å–çš„Classå¯¹è±¡å¯ä»¥åœ¨æ²¡æœ‰å®ä¾‹åŒ–å¯¹è±¡çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œè€Œå¯¹è±¡çš„getClass()æ–¹æ³•éœ€è¦æœ‰ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡æ‰èƒ½è°ƒç”¨ã€‚\n2,å¦‚ä½•é€šè¿‡åå°„æœºåˆ¶è·å–æŸä¸ªç±»ä»¥åŠå®ƒç»§æ‰¿çš„ç±»çš„æ‰€æœ‰å…¬æœ‰å­—æ®µ\npublic class MyClass {\n    public int publicField;\n    private int privateField;\n    protected int protectedField;\n\n    public static void main(String[] args) {\n        try {\n            &#47;&#47; è·å–ç±»çš„Classå¯¹è±¡\n            Class&lt;?&gt; clazz = MyClass.class;\n\n            &#47;&#47; è·å–ç±»çš„æ‰€æœ‰å…¬æœ‰å­—æ®µ\n            Field[] fields = clazz.getFields();\n\n            &#47;&#47; éå†å­—æ®µæ•°ç»„å¹¶å¤„ç†å­—æ®µ\n            for (Field field : fields) {\n                &#47;&#47; è¾“å‡ºå­—æ®µçš„åç§°å’Œç±»å‹\n                System.out.println(&quot;Field name: &quot; + field.getName());\n                System.out.println(&quot;Field type: &quot; + field.getType());\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}","like_count":2},{"had_liked":false,"id":380782,"user_name":"C.","can_delete":false,"product_type":"c1","uid":1444698,"ip_address":"æ±Ÿè‹","ucode":"5AE269220EFD73","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/5a/453ad411.jpg","comment_is_top":false,"comment_ctime":1694148907,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šClass.forNameé™æ€æ–¹æ³•ä¸€èˆ¬ç”¨äºåŠ è½½é©±åŠ¨æˆ–è€…åˆ¤æ–­ç±»æ˜¯å¦å­˜åœ¨çš„æƒ…å†µï¼Œ.classå¿…é¡»äº‹å…ˆçŸ¥é“æœ‰è¿™ä¸ªç±»ï¼Œobject.getClasså¿…é¡»è¦æœ‰ç±»å®ä¾‹å¯¹è±¡ã€‚\nç¬¬äºŒä¸ªé—®é¢˜ï¼šclazz.getFields();&#47;&#47;è·å–å½“å‰ç±»åŠå…¶çˆ¶ç±»çš„æ‰€æœ‰å…¬æœ‰å­—æ®µã€‚clazz.getDeclaredFields();&#47;&#47;å–ç§æœ‰å­—æ®µæˆ–å—ä¿æŠ¤çš„å­—æ®µå’Œå…¬å…±å­—æ®µã€‚\n","like_count":0},{"had_liked":false,"id":380701,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"æ²³å—","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1694008752,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"Q1ï¼šæœ€ç®€å•ç¨‹åºï¼Œåªæ˜¯æ‰“å°ä¸€ä¸ªâ€œhelloâ€å­—ç¬¦ä¸²ï¼›æ­¤ç¨‹åºçš„è¿è¡Œï¼Œä¼šæœ‰å“ªäº›ç±»åŠ è½½å™¨å‚ä¸ï¼Ÿ ä»¥åŠåŠ è½½é¡ºåºï¼Ÿ\nQ2ï¼šJAVAçš„â€œåŠ¨æ€æ€§â€ï¼Œé™¤äº†åå°„ï¼Œè¿˜æœ‰å…¶ä»–çš„å—ï¼Ÿ","like_count":0}]}