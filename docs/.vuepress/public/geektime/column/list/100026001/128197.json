{"id":128197,"title":"51 | åˆ†å¸ƒå¼è®¡ç®—ï¼šå¦‚æœæ‰€æœ‰äººçš„å¤§è„‘éƒ½è”ç½‘ä¼šæ€æ ·ï¼Ÿ","content":"<p>ä»Šå¤©æ˜¯åŸç†ç¯‡çš„æœ€åä¸€ç¯‡ã€‚è¿‡å»50è®²ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹äº†æŠ½è±¡æ¦‚å¿µä¸Šçš„è®¡ç®—æœºæŒ‡ä»¤ï¼Œçœ‹äº†è¿™äº›æŒ‡ä»¤æ€ä¹ˆæ‹†è§£æˆä¸€ä¸ªä¸ªç®€å•çš„ç”µè·¯ï¼Œä»¥åŠCPUæ˜¯æ€ä¹ˆé€šè¿‡ä¸€ä¸ªä¸€ä¸ªçš„ç”µè·¯ç»„æˆçš„ã€‚æˆ‘ä»¬è¿˜ä¸€èµ·çœ‹äº†é«˜é€Ÿç¼“å­˜ã€å†…å­˜ã€SSDç¡¬ç›˜å’Œæœºæ¢°ç¡¬ç›˜ï¼Œä»¥åŠè¿™äº›ç»„ä»¶åˆæ˜¯æ€ä¹ˆé€šè¿‡æ€»çº¿å’ŒCPUè¿åœ¨ä¸€èµ·ç›¸äº’é€šä¿¡çš„ã€‚</p><p>æŠŠè®¡ç®—æœºè¿™ä¸€ç³»åˆ—ç»„ä»¶ç»„åˆèµ·æ¥ï¼Œæˆ‘ä»¬å°±æ‹¿åˆ°äº†ä¸€å°å®Œæ•´çš„è®¡ç®—æœºã€‚ç°åœ¨æˆ‘ä»¬æ¯å¤©åœ¨ç”¨çš„ä¸ªäººPCã€æ™ºèƒ½æ‰‹æœºï¼Œä¹ƒè‡³äº‘ä¸Šçš„æœåŠ¡å™¨ï¼Œéƒ½æ˜¯è¿™æ ·ä¸€å°è®¡ç®—æœºã€‚</p><p>ä½†æ˜¯ï¼Œä¸€å°è®¡ç®—æœºåœ¨æ•°æ®ä¸­å¿ƒé‡Œæ˜¯ä¸å¤Ÿçš„ã€‚å› ä¸ºå¦‚æœåªæœ‰ä¸€å°è®¡ç®—æœºï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚ç¬¬ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼Œå«ä½œ<strong>å‚ç›´æ‰©å±•å’Œæ°´å¹³æ‰©å±•çš„é€‰æ‹©é—®é¢˜</strong>ï¼Œç¬¬äºŒé—®é¢˜å«ä½œ<strong>å¦‚ä½•ä¿æŒé«˜å¯ç”¨æ€§</strong>ï¼ˆHigh Availabilityï¼‰ï¼Œç¬¬ä¸‰ä¸ªé—®é¢˜å«ä½œ<strong>ä¸€è‡´æ€§é—®é¢˜</strong>ï¼ˆConsistencyï¼‰ã€‚</p><p>å›´ç»•è¿™ä¸‰ä¸ªé—®é¢˜ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è®²çš„ä¸»é¢˜ï¼Œåˆ†å¸ƒå¼è®¡ç®—ã€‚å½“ç„¶ï¼ŒçŸ­çŸ­çš„ä¸€è®²è‚¯å®šè®²ä¸å®Œè¿™ä¹ˆå¤§ä¸€ä¸ªä¸»é¢˜ã€‚åˆ†å¸ƒå¼è®¡ç®—æ‹¿å‡ºæ¥å•å¼€ä¸€é—¨ä¸“æ ä¹Ÿç»°ç»°æœ‰ä½™ã€‚æˆ‘ä»¬ä»Šå¤©è¿™ä¸€è®²çš„ç›®æ ‡ï¼Œæ˜¯è®©ä½ èƒ½ç†è§£æ°´å¹³æ‰©å±•ã€é«˜å¯ç”¨æ€§è¿™ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿå¸¦æ¥çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šç•™åœ¨æˆ‘ä»¬çš„å®æˆ˜ç¯‡é‡Œé¢ï¼Œå†ç”¨æ¡ˆä¾‹æ¥ä¸ºå¤§å®¶åˆ†æã€‚</p><h2>ä»ç¡¬ä»¶å‡çº§åˆ°æ°´å¹³æ‰©å±•</h2><p>ä»æŠ€æœ¯å¼€å‘çš„è§’åº¦æ¥è®²ï¼Œæƒ³è¦åœ¨2019å¹´åˆ›ä¸šçœŸçš„å¾ˆå¹¸ç¦ã€‚åªè¦åœ¨AWSæˆ–è€…é˜¿é‡Œäº‘è¿™æ ·çš„äº‘æœåŠ¡ä¸Šæ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œä¸€ä¸ªæœˆèŠ±ä¸Šä¸€ä¸¤ç™¾å—é’±ï¼Œä½ å°±å¯ä»¥æœ‰ä¸€å°åœ¨æ•°æ®ä¸­å¿ƒé‡Œé¢çš„æœåŠ¡å™¨äº†ã€‚è€Œä¸”è¿™å°æœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥æä¾›ç»™ä¸–ç•Œå„å›½äººæ°‘è®¿é—®ã€‚å¦‚æœä½ æƒ³è¦åšæµ·å¤–å¸‚åœºï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªæœåŠ¡å™¨æ”¾åœ¨ç¾å›½ã€æ¬§æ´²ã€ä¸œå—äºšï¼Œä»»ä½•ä¸€ä¸ªä½ æƒ³è¦å»çš„å¸‚åœºçš„æ•°æ®ä¸­å¿ƒé‡Œï¼Œç„¶åæŠŠè‡ªå·±çš„ç½‘ç«™éƒ¨ç½²åœ¨è¿™å°æœåŠ¡å™¨é‡Œé¢å°±å¯ä»¥äº†ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/1d/6e/1d1cb606a2ee8261c45f99686fb7946e.png?wh=2176*1142\" alt=\"\"></p><center><span class=\"reference\">ç°åœ¨åœ¨äº‘æœåŠ¡å•†è´­ä¹°æœåŠ¡å™¨çš„æˆæœ¬å’Œæ–¹ä¾¿ç¨‹åº¦éƒ½å·²ç»å¾ˆé«˜äº†</span></center><p>å½“ç„¶ï¼Œè¿™å°æœåŠ¡å™¨å°±æ˜¯æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/107183\">ç¬¬34è®²</a>é‡Œè¯´çš„è™šæ‹Ÿæœºã€‚ä¸è¿‡å› ä¸ºåªæ˜¯ä¸ªä¸šä½™æ—¶é—´çš„å°é¡¹ç›®ï¼Œä¸€å¼€å§‹è¿™å°æœåŠ¡å™¨çš„é…ç½®ä¹Ÿä¸ä¼šå¤ªé«˜ã€‚æˆ‘ä»¥æˆ‘ç°åœ¨å…¬å¸æ‰€ç”¨çš„Google Cloudä¸ºä¾‹ã€‚æœ€ä½çš„é…ç½®å·®ä¸å¤šæ˜¯1ä¸ªCPUæ ¸å¿ƒã€3.75Gå†…å­˜ä»¥åŠä¸€å—10Gçš„SSDç³»ç»Ÿç›˜ã€‚è¿™æ ·ä¸€å°æœåŠ¡å™¨æ¯ä¸ªæœˆçš„ä»·æ ¼å·®ä¸å¤šæ˜¯28ç¾å…ƒã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œä½ çš„ç½‘ç«™å¾ˆå—å¤§å®¶æ¬¢è¿ï¼Œè®¿é—®é‡ä¹Ÿä¸Šæ¥äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè¿™å°å•æ ¸å¿ƒçš„æœåŠ¡å™¨çš„æ€§èƒ½æœ‰ç‚¹ä¸å¤Ÿç”¨äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ éœ€è¦å‡çº§ä½ çš„æœåŠ¡å™¨ã€‚äºæ˜¯ï¼Œä½ å°±ä¼šé¢ä¸´ä¸¤ä¸ªé€‰æ‹©ã€‚</p><p>ç¬¬ä¸€ä¸ªé€‰æ‹©æ˜¯å‡çº§ç°åœ¨è¿™å°æœåŠ¡å™¨çš„ç¡¬ä»¶ï¼Œå˜æˆ2ä¸ªCPUæ ¸å¿ƒã€7.5Gå†…å­˜ã€‚è¿™æ ·çš„é€‰æ‹©æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>å‚ç›´æ‰©å±•</strong>ï¼ˆScale Upï¼‰ã€‚ç¬¬äºŒä¸ªé€‰æ‹©åˆ™æ˜¯æˆ‘ä»¬å†ç§Ÿç”¨ä¸€å°å’Œä¹‹å‰ä¸€æ ·çš„æœåŠ¡å™¨ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬æœ‰äº†2å°1ä¸ªCPUæ ¸å¿ƒã€3.75Gå†…å­˜çš„æœåŠ¡å™¨ã€‚è¿™æ ·çš„é€‰æ‹©æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>æ°´å¹³æ‰©å±•</strong>ï¼ˆScale Outï¼‰ã€‚</p><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œè¿™ä¸¤ä¸ªé€‰æ‹©ï¼Œä»æˆæœ¬ä¸Šçœ‹èµ·æ¥æ²¡æœ‰ä»€ä¹ˆå·®å¼‚ã€‚2æ ¸å¿ƒã€7.5Gå†…å­˜çš„æœåŠ¡å™¨ï¼Œæˆæœ¬æ˜¯56.61ç¾å…ƒï¼Œè€Œ2å°1æ ¸å¿ƒã€3.75Gå†…å­˜çš„æœåŠ¡å™¨ä»·æ ¼ï¼Œæˆæœ¬æ˜¯57ç¾å…ƒï¼Œè¿™ä¹‹é—´çš„ä»·æ ¼å·®å¼‚ä¸åˆ°1%ã€‚</p><p>ä¸è¿‡ï¼Œå‚ç›´æ‰©å±•å’Œæ°´å¹³æ‰©å±•çœ‹ä¼¼æ˜¯ä¸¤ä¸ªä¸åŒçš„é€‰æ‹©ï¼Œä½†æ˜¯éšç€æµé‡ä¸æ–­å¢é•¿ã€‚åˆ°æœ€åï¼Œåªä¼šå˜æˆä¸€ä¸ªé€‰æ‹©ã€‚é‚£å°±æ˜¯æ—¢ä¼šå‚ç›´æ‰©å±•ï¼Œåˆä¼šæ°´å¹³æ‰©å±•ï¼Œå¹¶ä¸”æœ€ç»ˆä¾é æ°´å¹³æ‰©å±•ï¼Œæ¥æ”¯æ’‘Googleã€Facebookã€é˜¿é‡Œã€è…¾è®¯è¿™æ ·ä½“é‡çš„äº’è”ç½‘æœåŠ¡ã€‚</p><p>å‚ç›´æ‰©å±•èƒŒåçš„é€»è¾‘å’Œä¼˜åŠ¿éƒ½å¾ˆç®€å•ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå‚ç›´æ‰©å±•é€šå¸¸ä¸éœ€è¦æˆ‘ä»¬å»æ”¹é€ ç¨‹åºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬<strong>æ²¡æœ‰ç ”å‘æˆæœ¬</strong>ã€‚é‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬æœ€ç»ˆè¿˜æ˜¯è¦ç”¨æ°´å¹³æ‰©å±•å‘¢ï¼Ÿä½ å¯ä»¥å…ˆè‡ªå·±æƒ³ä¸€æƒ³ã€‚</p><p>åŸå› å…¶å®å¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åŠæ³•ä¸åœåœ°å»åšå‚ç›´æ‰©å±•ã€‚æˆ‘ä»¬åœ¨Google Cloudä¸Šç°åœ¨èƒ½å¤Ÿä¹°åˆ°çš„æ€§èƒ½æœ€å¥½çš„æœåŠ¡å™¨ï¼Œæ˜¯96ä¸ªCPUæ ¸å¿ƒã€1.4TBçš„å†…å­˜ã€‚å¦‚æœæˆ‘ä»¬çš„è®¿é—®é‡é€æ¸å¢å¤§ï¼Œä¸€å°96æ ¸å¿ƒçš„æœåŠ¡å™¨ä¹Ÿæ”¯æ’‘ä¸äº†äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ²¡æœ‰åŠæ³•å†å»åšå‚ç›´æ‰©å±•äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸é‡‡ç”¨æ°´å¹³æ‰©å±•çš„æ–¹æ¡ˆäº†ã€‚</p><p>96ä¸ªCPUæ ¸å¿ƒçœ‹èµ·æ¥æ˜¯ä¸ªå¾ˆå¼ºå¤§çš„æœåŠ¡å™¨ï¼Œä½†æ˜¯ä½ ç®—ä¸€ç®—å°±çŸ¥é“ï¼Œå…¶å®å®ƒçš„è®¡ç®—èµ„æºå¹¶æ²¡æœ‰å¤šå¤§ã€‚ä½ ç°åœ¨å¤šåŠåœ¨ç”¨ä¸€å°4æ ¸å¿ƒï¼Œæˆ–è€…è‡³å°‘ä¹Ÿæ˜¯2æ ¸å¿ƒçš„CPUã€‚96ä¸ªCPUä¹Ÿå°±æ˜¯30ï½50å°æ—¥å¸¸ä½¿ç”¨çš„å¼€å‘æœºçš„è®¡ç®—æ€§èƒ½ã€‚è€Œæˆ‘ä»¬ä»Šå¤©åœ¨äº’è”ç½‘ä¸Šé‡åˆ°çš„é—®é¢˜ï¼Œæ˜¯æ¯å¤©æ•°äº¿çš„è®¿é—®é‡ï¼Œé 30ï½50å°ä¸ªäººç”µè„‘çš„è®¡ç®—èƒ½åŠ›æƒ³è¦æ”¯æ’‘è¿™æ ·çš„è®¡ç®—éœ€æ±‚ï¼Œå¯è°“æ˜¯å¤©æ–¹å¤œè°­äº†ã€‚</p><p>ç„¶è€Œï¼Œä¸€æ—¦å¼€å§‹é‡‡ç”¨æ°´å¹³æ‰©å±•ï¼Œæˆ‘ä»¬å°±ä¼šé¢ä¸´åœ¨è½¯ä»¶å±‚é¢æ”¹é€ çš„é—®é¢˜äº†ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦å¼€å§‹è¿›è¡Œ<strong>åˆ†å¸ƒå¼è®¡ç®—</strong>äº†ã€‚æˆ‘ä»¬éœ€è¦å¼•å…¥<strong>è´Ÿè½½å‡è¡¡</strong>ï¼ˆLoad Balancerï¼‰è¿™æ ·çš„ç»„ä»¶ï¼Œæ¥è¿›è¡Œæµé‡åˆ†é…ã€‚æˆ‘ä»¬éœ€è¦æ‹†åˆ†åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨ï¼Œæ¥è¿›è¡Œå‚ç›´åŠŸèƒ½çš„åˆ‡åˆ†ã€‚æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸åŒçš„åº”ç”¨ä¹‹é—´é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¥è¿›è¡Œå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/03/91/034fdb2fcf4a371d1eeb331e86fa4491.jpeg?wh=2521*1357\" alt=\"\"></p><p>æ‰€æœ‰è¿™äº›è½¯ä»¶å±‚é¢çš„æ”¹é€ ï¼Œå…¶å®éƒ½æ˜¯åœ¨åšåˆ†å¸ƒå¼è®¡ç®—çš„ä¸€ä¸ªæ ¸å¿ƒå·¥ä½œï¼Œå°±æ˜¯é€šè¿‡æ¶ˆæ¯ä¼ é€’ï¼ˆMessage Passingï¼‰è€Œä¸æ˜¯å…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰çš„æ–¹å¼ï¼Œè®©å¤šå°ä¸åŒçš„è®¡ç®—æœºåä½œèµ·æ¥å…±åŒå®Œæˆä»»åŠ¡ã€‚</p><p>è€Œå› ä¸ºæˆ‘ä»¬æœ€ç»ˆå¿…ç„¶è¦è¿›è¡Œæ°´å¹³æ‰©å±•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿè®¾è®¡çš„æ—©æœŸå°±åŸºäºæ¶ˆæ¯ä¼ é€’è€Œéå…±äº«å†…å­˜æ¥è®¾è®¡ç³»ç»Ÿã€‚å³ä½¿è¿™äº›æ¶ˆæ¯åªæ˜¯åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šè¿›è¡Œä¼ é€’ã€‚</p><p>äº‹å®ä¸Šï¼Œæœ‰ä¸å°‘å¢é•¿è¿…çŒ›çš„å…¬å¸ï¼Œæ—©æœŸæ²¡æœ‰å‡†å¤‡å¥½é€šè¿‡æ°´å¹³æ‰©å±•æ¥æ”¯æ’‘è®¿é—®é‡çš„æƒ…å†µï¼Œè€Œä¸€å‘³é€šè¿‡æå‡ç¡¬ä»¶é…ç½®Scale Upï¼Œæ¥æ”¯æ’‘æ›´å¤§çš„è®¿é—®é‡ï¼Œæœ€ç»ˆå½±å“äº†å…¬å¸çš„å­˜äº¡ã€‚æœ€å…¸å‹çš„ä¾‹å­ï¼Œå°±æ˜¯è´¥åœ¨Facebookæ‰‹ä¸‹çš„<a href=\"https://en.wikipedia.org/wiki/Myspace\">MySpace</a>ã€‚</p><h2>ç†è§£é«˜å¯ç”¨æ€§å’Œå•ç‚¹æ•…éšœ</h2><p>å°½ç®¡åœ¨1ä¸ªCPUæ ¸å¿ƒçš„æœåŠ¡å™¨æ”¯æ’‘ä¸äº†æˆ‘ä»¬çš„è®¿é—®é‡çš„æ—¶å€™ï¼Œé€‰æ‹©å‚ç›´æ‰©å±•æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„åŠæ³•ã€‚ä¸è¿‡å¦‚æœæ˜¯æˆ‘çš„è¯ï¼Œç¬¬ä¸€æ¬¡æ‰©å±•æˆ‘ä¼šé€‰æ‹©æ°´å¹³æ‰©å±•ã€‚</p><p>é€‰æ‹©æ°´å¹³æ‰©å±•çš„ä¸€ä¸ªå¾ˆå¥½çš„ç†ç”±ï¼Œè‡ªç„¶æ˜¯å¯ä»¥â€œå¼ºè¿«â€ä»å¼€å‘çš„è§’åº¦ï¼Œå°½æ—©åœ°è®©ç³»ç»Ÿèƒ½å¤Ÿæ”¯æŒæ°´å¹³æ‰©å±•ï¼Œé¿å…åœ¨çœŸçš„æµé‡å¿«é€Ÿå¢é•¿çš„æ—¶å€™ï¼Œå‚ç›´æ‰©å±•çš„è§£å†³æ–¹æ¡ˆè·Ÿä¸ä¸Šè¶Ÿã€‚ä¸è¿‡ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªæ›´é‡è¦çš„ç†ç”±ï¼Œé‚£å°±æ˜¯ç³»ç»Ÿçš„å¯ç”¨æ€§é—®é¢˜ã€‚</p><p>ä¸Šé¢çš„1æ ¸å˜2æ ¸çš„å‚ç›´æ‰©å±•çš„æ–¹å¼ï¼Œæ‰©å±•å®Œä¹‹åï¼Œæˆ‘ä»¬è¿˜æ˜¯åªæœ‰1å°æœåŠ¡å™¨ã€‚å¦‚æœè¿™å°æœåŠ¡å™¨å‡ºç°äº†ä¸€ç‚¹ç¡¬ä»¶æ•…éšœï¼Œæ¯”å¦‚ï¼ŒCPUåäº†ï¼Œé‚£æˆ‘ä»¬çš„æ•´ä¸ªç³»ç»Ÿå°±åäº†ï¼Œå°±<strong>ä¸å¯ç”¨</strong>äº†ã€‚</p><p>å¦‚æœé‡‡ç”¨äº†æ°´å¹³æ‰©å±•ï¼Œå³ä¾¿æœ‰ä¸€å°æœåŠ¡å™¨çš„CPUåäº†ï¼Œæˆ‘ä»¬è¿˜æœ‰å¦å¤–ä¸€å°æœåŠ¡å™¨ä»ç„¶èƒ½å¤Ÿæä¾›æœåŠ¡ã€‚è´Ÿè½½å‡è¡¡èƒ½å¤Ÿé€šè¿‡å¥åº·æ£€æµ‹ï¼ˆHealth Checkï¼‰å‘ç°åæ‰çš„æœåŠ¡å™¨æ²¡æœ‰å“åº”äº†ï¼Œå°±å¯ä»¥è‡ªåŠ¨æŠŠæ‰€æœ‰çš„æµé‡åˆ‡æ¢åˆ°ç¬¬2å°æœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªæ“ä½œå°±å«ä½œ<strong>æ•…éšœè½¬ç§»</strong>ï¼ˆFailoverï¼‰ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä»ç„¶æ˜¯<strong>å¯ç”¨</strong>çš„ã€‚</p><p>ç³»ç»Ÿçš„<strong>å¯ç”¨æ€§</strong>ï¼ˆAvaiabilityï¼‰æŒ‡çš„å°±æ˜¯ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿå¯ä»¥æ­£å¸¸æœåŠ¡çš„æ—¶é—´å æ¯”ã€‚æ— è®ºæ˜¯å› ä¸ºè½¯ç¡¬ä»¶æ•…éšœï¼Œè¿˜æ˜¯éœ€è¦å¯¹ç³»ç»Ÿè¿›è¡Œåœæœºå‡çº§ï¼Œéƒ½ä¼šè®©æˆ‘ä»¬æŸå¤±ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚å¯ç”¨æ€§é€šå¸¸æ˜¯ç”¨ä¸€ä¸ªç™¾åˆ†æ¯”çš„æ•°å­—æ¥è¡¨ç¤ºï¼Œæ¯”å¦‚99.99%ã€‚æˆ‘ä»¬è¯´ï¼Œç³»ç»Ÿæ¯ä¸ªæœˆçš„å¯ç”¨æ€§è¦ä¿éšœåœ¨99.99%ï¼Œä¹Ÿå°±æ˜¯æ„å‘³ç€ä¸€ä¸ªæœˆé‡Œï¼Œä½ çš„æœåŠ¡å®•æœºçš„æ—¶é—´ä¸èƒ½è¶…è¿‡4.32åˆ†é’Ÿã€‚</p><p>æœ‰äº›ç³»ç»Ÿå¯ç”¨æ€§çš„æŸå¤±ï¼Œæ˜¯åœ¨æˆ‘ä»¬è®¡åˆ’å†…çš„ã€‚æ¯”å¦‚ä¸Šé¢è¯´çš„åœæœºå‡çº§ï¼Œè¿™ä¸ªå°±æ˜¯æ‰€è°“çš„è®¡åˆ’å†…åœæœºæ—¶é—´ï¼ˆScheduled Downtimeï¼‰ã€‚æœ‰äº›ç³»ç»Ÿå¯ç”¨æ€§çš„æŸå¤±ï¼Œæ˜¯åœ¨æˆ‘ä»¬è®¡åˆ’å¤–çš„ï¼Œæ¯”å¦‚ä¸€å°æœåŠ¡å™¨çš„ç¡¬ç›˜å¿½ç„¶åäº†ï¼Œè¿™ä¸ªå°±æ˜¯æ‰€è°“çš„è®¡åˆ’å¤–åœæœºæ—¶é—´ï¼ˆUnscheduled Downtimeï¼‰ã€‚</p><p>æˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯ä¸€å®šä¸å¯èƒ½åšåˆ°100%å¯ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯è®¡åˆ’å¤–çš„åœæœºæ—¶é—´ã€‚ä»ç®€å•çš„ç¡¬ä»¶æŸåï¼Œåˆ°æœºæˆ¿åœç”µã€å…‰ç¼†è¢«æŒ–æ–­ï¼Œä¹ƒè‡³äºå„ç§è‡ªç„¶ç¾å®³ï¼Œæ¯”å¦‚åœ°éœ‡ã€æ´ªæ°´ã€æµ·å•¸ï¼Œéƒ½æœ‰å¯èƒ½ä½¿å¾—æˆ‘ä»¬çš„ç³»ç»Ÿä¸å¯ç”¨ã€‚ä½œä¸ºä¸€ä¸ªå·¥ç¨‹å¸ˆå’Œæ¶æ„å¸ˆï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°½å¯èƒ½ä½æˆæœ¬åœ°æé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p><p>å’±ä»¬çš„ä¸“æ æ˜¯è¦è®²è®¡ç®—æœºç»„æˆåŸç†ï¼Œé‚£æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€çœ‹ç¡¬ä»¶æœåŠ¡å™¨çš„å¯ç”¨æ€§ã€‚</p><p>ç°åœ¨çš„æœåŠ¡å™¨çš„å¯ç”¨æ€§éƒ½å·²ç»å¾ˆä¸é”™äº†ï¼Œé€šå¸¸éƒ½èƒ½ä¿éšœ99.99%çš„å¯ç”¨æ€§äº†ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå°å°çš„ä¸‰å°æœåŠ¡å™¨ç»„æˆçš„å°ç³»ç»Ÿï¼Œä¸€å°éƒ¨ç½²äº†Nginxæ¥ä½œä¸ºè´Ÿè½½å‡è¡¡å’Œåå‘ä»£ç†ï¼Œä¸€å°è·‘äº†PHP-FPMä½œä¸ºWebåº”ç”¨æœåŠ¡å™¨ï¼Œä¸€å°ç”¨æ¥ä½œä¸ºMySQLæ•°æ®åº“æœåŠ¡å™¨ã€‚æ¯å°æœåŠ¡å™¨çš„å¯ç”¨æ€§éƒ½æ˜¯99.99%ã€‚é‚£ä¹ˆæˆ‘ä»¬æ•´ä¸ªç³»ç»Ÿçš„å¯ç”¨æ€§æ˜¯å¤šå°‘å‘¢ï¼Ÿä½ å¯ä»¥å…ˆæƒ³ä¸€æƒ³ã€‚</p><p>ç­”æ¡ˆæ˜¯99.99%  Ã— 99.99%  Ã— 99.99% = 99.97%ã€‚åœ¨è¿™ä¸ªç³»ç»Ÿå½“ä¸­ï¼Œè¿™ä¸ªæ•°å­—çœ‹èµ·æ¥ä¼¼ä¹æ²¡æœ‰é‚£ä¹ˆå¤§åŒºåˆ«ã€‚ä¸è¿‡åè¿‡æ¥çœ‹ï¼Œæˆ‘ä»¬æ˜¯ä»æŸå¤±äº†0.01%çš„å¯ç”¨æ€§ï¼Œå˜æˆäº†æŸå¤±0.03%çš„å¯ç”¨æ€§ï¼Œä¸å¯ç”¨çš„æ—¶é—´å˜æˆäº†åŸæ¥çš„3å€ã€‚</p><p>å¦‚æœæˆ‘ä»¬æœ‰1000å°æœåŠ¡å™¨ï¼Œé‚£ä¹ˆæ•´ä¸ªçš„å¯ç”¨æ€§ï¼Œå°±ä¼šå˜æˆ 99.99% ^ 1000 = 90.5%ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„æœåŠ¡ä¸€å¹´é‡Œæœ‰è¶…è¿‡ä¸€ä¸ªæœˆæ˜¯ä¸å¯ç”¨çš„ã€‚è¿™å¯æ€ä¹ˆåŠå‘€ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/e9/35/e9ef478712d744d07c82c54534564335.jpeg?wh=1666*3433\" alt=\"\"></p><p>æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹åŸå› ã€‚ä¹‹æ‰€ä»¥ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºåœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œä»»ä½•ä¸€å°æœåŠ¡å™¨å‡ºé”™äº†ï¼Œæ•´ä¸ªç³»ç»Ÿå°±æ²¡æ³•ç”¨äº†ã€‚è¿™ä¸ªé—®é¢˜å°±å«ä½œ<strong>å•ç‚¹æ•…éšœé—®é¢˜</strong>ï¼ˆSingle Point of Failureï¼ŒSPOFï¼‰ã€‚æˆ‘ä»¬è¿™é‡Œçš„è¿™ä¸ªå‡è®¾ç‰¹åˆ«ç³Ÿç³•ã€‚æˆ‘ä»¬å‡è®¾è¿™1000å°æœåŠ¡å™¨ï¼Œæ¯ä¸€ä¸ªéƒ½å­˜åœ¨å•ç‚¹æ•…éšœé—®é¢˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„æœåŠ¡ä¹Ÿå°±ç‰¹åˆ«è„†å¼±ï¼Œéšä¾¿å“ªå°å‡ºç°ç‚¹é£å¹è‰åŠ¨ï¼Œæ•´ä¸ªæœåŠ¡å°±æŒ‚äº†ã€‚</p><p>è¦è§£å†³å•ç‚¹æ•…éšœé—®é¢˜ï¼Œç¬¬ä¸€ç‚¹å°±æ˜¯è¦ç§»é™¤å•ç‚¹ã€‚å…¶å®ç§»é™¤å•ç‚¹æœ€å…¸å‹çš„åœºæ™¯ï¼Œåœ¨æˆ‘ä»¬æ°´å¹³æ‰©å±•åº”ç”¨æœåŠ¡å™¨çš„æ—¶å€™å°±å·²ç»çœ‹åˆ°äº†ï¼Œé‚£å°±æ˜¯è®©ä¸¤å°æœåŠ¡å™¨æä¾›ç›¸åŒçš„åŠŸèƒ½ï¼Œç„¶åé€šè¿‡è´Ÿè½½å‡è¡¡æŠŠæµé‡åˆ†å‘åˆ°ä¸¤å°ä¸åŒçš„æœåŠ¡å™¨å»ã€‚å³ä½¿ä¸€å°æœåŠ¡å™¨æŒ‚äº†ï¼Œè¿˜æœ‰ä¸€å°æœåŠ¡å™¨å¯ä»¥æ­£å¸¸æä¾›æœåŠ¡ã€‚</p><p>ä¸è¿‡å…‰ç”¨ä¸¤å°æœåŠ¡å™¨æ˜¯ä¸å¤Ÿçš„ï¼Œå•ç‚¹æ•…éšœå…¶å®åœ¨æ•°æ®ä¸­å¿ƒé‡Œé¢æ— å¤„ä¸åœ¨ã€‚æˆ‘ä»¬ç°åœ¨ç”¨çš„æ˜¯äº‘ä¸Šçš„ä¸¤å°è™šæ‹Ÿæœºã€‚å¦‚æœè¿™ä¸¤å°è™šæ‹Ÿæœºæ˜¯æ‰˜ç®¡åœ¨åŒä¸€å°ç‰©ç†æœºä¸Šçš„ï¼Œé‚£è¿™å°ç‰©ç†æœºæœ¬èº«åˆæˆä¸ºäº†ä¸€ä¸ªå•ç‚¹ã€‚é‚£æˆ‘ä»¬å°±éœ€è¦æŠŠè¿™ä¸¤å°è™šæ‹Ÿæœºåˆ†åˆ°ä¸¤å°ä¸åŒçš„ç‰©ç†æœºä¸Šã€‚</p><p>ä¸è¿‡è¿™ä¸ªè¿˜æ˜¯ä¸å¤Ÿã€‚å¦‚æœè¿™ä¸¤å°ç‰©ç†æœºåœ¨åŒä¸€ä¸ªæœºæ¶ï¼ˆRackï¼‰ä¸Šï¼Œé‚£æœºæ¶ä¸Šçš„äº¤æ¢æœºï¼ˆSwitchï¼‰å°±æˆäº†ä¸€ä¸ªå•ç‚¹ã€‚å³ä½¿æ”¾åˆ°ä¸åŒçš„æœºæ¶ä¸Šï¼Œè¿˜æ˜¯æœ‰å¯èƒ½å‡ºç°æ•´ä¸ªæ•°æ®ä¸­å¿ƒé­é‡æ„å¤–æ•…éšœçš„æƒ…å†µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ab/a4/ab09e9a2b9670d61c2391906189694a4.jpeg?wh=2446*2026\" alt=\"\"></p><p>å»å¹´æˆ‘è‡ªå·±å°±é‡åˆ°è¿‡ï¼Œéƒ¨ç½²åœ¨Azureä¸Šçš„æœåŠ¡æ‰€åœ¨çš„æ•°æ®ä¸­å¿ƒï¼Œå› ä¸ºæ•£çƒ­é—®é¢˜è§¦å‘äº†æ•´ä¸ªæ•°æ®ä¸­å¿ƒæ‰€æœ‰æœåŠ¡å™¨è¢«å…³é—­çš„é—®é¢˜ã€‚é¢å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±éœ€è¦è®¾è®¡è¿›è¡Œ<strong>å¼‚åœ°å¤šæ´»</strong>çš„ç³»ç»Ÿè®¾è®¡å’Œéƒ¨ç½²ã€‚æ‰€ä»¥ï¼Œåœ¨ç°ä»£çš„äº‘æœåŠ¡ï¼Œä½ åœ¨ä¹°æœåŠ¡å™¨çš„æ—¶å€™å¯ä»¥é€‰æ‹©æœåŠ¡å™¨çš„areaï¼ˆåœ°åŒºï¼‰å’Œzoneï¼ˆåŒºåŸŸï¼‰ï¼Œè€Œè¦ä¸è¦æŠŠæœåŠ¡å™¨æ”¾åœ¨ä¸åŒçš„åœ°åŒºæˆ–è€…åŒºåŸŸé‡Œï¼Œä¹Ÿæ˜¯é¿å…å•ç‚¹æ•…éšœçš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚</p><p>åªæ˜¯èƒ½å¤Ÿå»é™¤å•ç‚¹ï¼Œå…¶å®æˆ‘ä»¬çš„å¯ç”¨æ€§é—®é¢˜è¿˜æ²¡æœ‰è§£å†³ã€‚æ¯”å¦‚ï¼Œä¸Šé¢æˆ‘ä»¬ç”¨è´Ÿè½½å‡è¡¡æŠŠæµé‡å‡åŒ€åœ°åˆ†å‘åˆ°2å°æœåŠ¡å™¨ä¸Šï¼Œå½“ä¸€å°åº”ç”¨æœåŠ¡å™¨æŒ‚æ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç¡®è¿˜æœ‰ä¸€å°æœåŠ¡å™¨åœ¨æä¾›æœåŠ¡ã€‚ä½†æ˜¯è´Ÿè½½å‡è¡¡ä¼šæŠŠä¸€åŠçš„æµé‡å‘åˆ°å·²ç»æŒ‚æ‰çš„æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™åªèƒ½ç®—ä½œä¸€åŠå¯ç”¨ã€‚</p><p>æƒ³è¦è®©æ•´ä¸ªæœåŠ¡å®Œå…¨å¯ç”¨ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸€å¥—æ•…éšœè½¬ç§»ï¼ˆFailoverï¼‰æœºåˆ¶ã€‚æƒ³è¦è¿›è¡Œæ•…éšœè½¬ç§»ï¼Œå°±é¦–å…ˆè¦èƒ½å‘ç°æ•…éšœã€‚</p><p>ä»¥æˆ‘ä»¬è¿™é‡Œçš„PHP-FPMçš„Webåº”ç”¨ä¸ºä¾‹ï¼Œè´Ÿè½½å‡è¡¡é€šå¸¸ä¼šå®šæ—¶å»è¯·æ±‚ä¸€ä¸ªWebåº”ç”¨æä¾›çš„å¥åº·æ£€æµ‹ï¼ˆHealth Checkï¼‰çš„åœ°å€ã€‚è¿™ä¸ªæ—¶é—´é—´éš”å¯èƒ½æ˜¯5ç§’é’Ÿï¼Œå¦‚æœè¿ç»­2ï½3æ¬¡å‘ç°å¥åº·æ£€æµ‹å¤±è´¥ï¼Œè´Ÿè½½å‡è¡¡å°±ä¼šè‡ªåŠ¨å°†è¿™å°æœåŠ¡å™¨çš„æµé‡åˆ‡æ¢åˆ°å…¶ä»–æœåŠ¡å™¨ä¸Šã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å°±è‡ªåŠ¨åœ°äº§ç”Ÿäº†ä¸€æ¬¡æ•…éšœè½¬ç§»ã€‚æ•…éšœè½¬ç§»çš„è‡ªåŠ¨åŒ–åœ¨å¤§å‹ç³»ç»Ÿé‡Œæ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºæœåŠ¡å™¨è¶Šå¤šï¼Œå‡ºç°æ•…éšœåŸºæœ¬å°±æ˜¯ä¸ªå¿…ç„¶å‘ç”Ÿçš„äº‹æƒ…ã€‚è€Œè‡ªåŠ¨åŒ–çš„æ•…éšœè½¬ç§»æ—¢èƒ½å¤Ÿå‡å°‘è¿ç»´çš„äººæ‰‹éœ€æ±‚ï¼Œä¹Ÿèƒ½å¤Ÿç¼©çŸ­ä»æ•…éšœå‘ç°åˆ°é—®é¢˜è§£å†³çš„æ—¶é—´å‘¨æœŸï¼Œæé«˜å¯ç”¨æ€§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/09/02/0907c25d6f2fd80401ee3d9bf5d17802.png?wh=1072*1248\" alt=\"\"></p><center><span class=\"reference\">æˆ‘ä»¬åœ¨Webåº”ç”¨ä¸Šè®¾ç½®äº†ä¸€ä¸ªHeartbeatæ¥å£ï¼Œæ¯20ç§’æ£€æŸ¥ä¸€æ¬¡ï¼Œå‡ºç°é—®é¢˜çš„æ—¶å€™å¯ä»¥è¿›è¡Œæ•…éšœè½¬ç§»åˆ‡æ¢</span></center><p>é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬ç®—ä¸€ç®—ï¼Œé€šè¿‡æ°´å¹³æ‰©å±•ç›¸åŒåŠŸèƒ½çš„æœåŠ¡å™¨æ¥å»æ‰å•ç‚¹æ•…éšœï¼Œå¹¶ä¸”é€šè¿‡å¥åº·æ£€æŸ¥æœºåˆ¶æ¥è§¦å‘è‡ªåŠ¨çš„æ•…éšœè½¬ç§»ï¼Œè¿™æ ·çš„å¯ç”¨æ€§ä¼šå˜æˆå¤šå°‘å‘¢ï¼Ÿä½ å¯ä»¥æ‹¿å‡ºçº¸å’Œç¬”æ¥è¯•ä¸€ä¸‹ã€‚</p><p>ä¸çŸ¥é“ä½ æƒ³æ˜ç™½åº”è¯¥æ€ä¹ˆç®—äº†æ²¡æœ‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å…¶å®åªè¦æœ‰ä»»ä½•ä¸€å°æœåŠ¡å™¨èƒ½å¤Ÿæ­£å¸¸è¿è½¬ï¼Œå°±èƒ½æ­£å¸¸æä¾›æœåŠ¡ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬çš„å¯ç”¨æ€§å°±æ˜¯ï¼š</p><center>100% - (100% - 99.99%) Ã— (100% - 99.99%) = 99.999999%</center><p>å¯ä»¥çœ‹å‡ºï¼Œä¸èƒ½æä¾›æœåŠ¡çš„æ—¶é—´å°±å‡å°‘åˆ°äº†åŸæ¥çš„ä¸‡åˆ†ä¹‹ä¸€ã€‚</p><p>å½“ç„¶ï¼Œåœ¨å®é™…æƒ…å†µä¸­ï¼Œå¯ç”¨æ€§æ²¡æ³•åšåˆ°é‚£ä¹ˆç†æƒ³çš„åœ°æ­¥ã€‚å…‰ä»ç¡¬ä»¶çš„è§’åº¦ï¼Œä»æœåŠ¡å™¨åˆ°äº¤æ¢æœºï¼Œä»ç½‘çº¿è¿æ¥åˆ°æœºæˆ¿ç”µåŠ›ï¼Œä»æœºæˆ¿çš„æ•´ä½“æ•£çƒ­åˆ°å¤–éƒ¨çš„å…‰çº¤çº¿è·¯ç­‰ç­‰ï¼Œå¯èƒ½å‡ºç°é—®é¢˜çš„åœ°æ–¹å¤ªå¤šäº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦ä»æ•´ä¸ªç³»ç»Ÿå±‚é¢ï¼Œå»è®¾è®¡ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ã€‚</p><h2>æ€»ç»“å»¶ä¼¸</h2><p>è®²åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å·²ç»å¾ˆæ¸…æ¥šï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ°´å¹³æ‰©å±•äº†ã€‚å¯¹äºæ€ä¹ˆå»è®¾è®¡æ•´ä¸ªç¡¬ä»¶çš„éƒ¨ç½²ï¼Œæ¥ä¿éšœé«˜å¯ç”¨æ€§ï¼Œä½ åº”è¯¥ä¹Ÿæœ‰äº†ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†ã€‚è¿™ä¸¤ç‚¹ä¹Ÿæ˜¯åˆ†å¸ƒå¼è®¡ç®—åœ¨å®è·µä¸­éå¸¸é‡è¦çš„åº”ç”¨åœºæ™¯ã€‚</p><p>ä¸è¿‡ï¼Œå…‰æœ‰è¿™ä¸¤ç‚¹è¿˜æ˜¯ä¸å¤Ÿçš„ã€‚ä¸€æ—¦ç³»ç»Ÿé‡Œé¢æœ‰äº†å¾ˆå¤šå°æœåŠ¡å™¨ã€‚ç‰¹åˆ«æ˜¯ï¼Œä¸ºäº†ä¿éšœå¯ç”¨æ€§ï¼Œå¯¹äºåŒæ ·åŠŸèƒ½çš„ã€æœ‰çŠ¶æ€çš„æ•°æ®åº“è¿›è¡Œäº†æ°´å¹³çš„æ‰©å±•ï¼Œæˆ‘ä»¬å°±ä¼šé¢ä¸´ä¸€ä¸ªæ–°çš„æŒ‘æˆ˜ï¼Œé‚£å°±æ˜¯åˆ†åŒºä¸€è‡´æ€§é—®é¢˜ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªé—®é¢˜æ›´å¤šçš„æ˜¯ä¸€ä¸ªè½¯ä»¶è®¾è®¡é—®é¢˜ï¼Œæˆ‘æŠŠå®ƒç•™åœ¨åé¢çš„å®æˆ˜ç¯‡å†è¿›è¡Œè®²è§£ã€‚</p><p>æˆ‘ä»¬ä¸‹é¢æ¥å›é¡¾ä¸€ä¸‹è¿™ä¸€è®²çš„å†…å®¹ã€‚æˆ‘ä»¬è®²äº†é€šè¿‡å‡çº§ç¡¬ä»¶è§„æ ¼æ¥æå‡æœåŠ¡èƒ½åŠ›çš„å‚ç›´æ‰©å±•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¢åŠ æœåŠ¡å™¨æ•°é‡æ¥æå‡æœåŠ¡èƒ½åŠ›ã€‚ä¸è¿‡å½’æ ¹åˆ°åº•ï¼Œæˆ‘ä»¬ä¸€å®šè¦èµ°ä¸Šæ°´å¹³æ‰©å±•çš„è·¯å¾„ã€‚</p><p>ä¸€æ–¹é¢æ˜¯å› ä¸ºå‚ç›´æ‰©å±•ä¸å¯æŒç»­ï¼›å¦ä¸€æ–¹é¢ï¼Œåˆ™æ˜¯åªæœ‰æ°´å¹³æ‰©å±•æ‰èƒ½ä¿éšœé«˜å¯ç”¨æ€§ã€‚è€Œé€šè¿‡æ°´å¹³æ‰©å±•ä¿éšœé«˜å¯ç”¨æ€§ï¼Œåˆ™éœ€è¦æˆ‘ä»¬åšä¸‰ä»¶äº‹æƒ…ã€‚ç¬¬ä¸€ä¸ªæ˜¯ç†è§£å¯ç”¨æ€§æ˜¯æ€ä¹ˆè®¡ç®—çš„ã€‚æœåŠ¡å™¨ç¡¬ä»¶çš„æŸååªæ˜¯å¯èƒ½å¯¼è‡´å¯ç”¨æ€§æŸå¤±çš„å› ç´ ä¹‹ä¸€ï¼Œæœºæˆ¿å†…çš„ç”µåŠ›ã€æ•£çƒ­ã€äº¤æ¢æœºã€ç½‘ç»œçº¿è·¯ï¼Œéƒ½æœ‰å¯èƒ½å¯¼è‡´å¯ç”¨æ€§æŸå¤±ã€‚è€Œå¤–éƒ¨çš„å…‰ç¼†ã€è‡ªç„¶ç¾å®³ï¼Œä¹Ÿéƒ½æœ‰å¯èƒ½é€ æˆæˆ‘ä»¬æ•´ä¸ªç³»ç»Ÿçš„ä¸å¯ç”¨ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨åˆ†æè®¾è®¡ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å°½å¯èƒ½åœ°æ’é™¤å•ç‚¹æ•…éšœã€‚è¿›ä¸€æ­¥åœ°ï¼Œå¯¹äºç¡¬ä»¶çš„æ•…éšœï¼Œæˆ‘ä»¬è¿˜è¦æœ‰è‡ªåŠ¨åŒ–çš„æ•…éšœè½¬ç§»ç­–ç•¥ã€‚åœ¨è¿™äº›ç­–ç•¥éƒ½é½å…¨ä¹‹åï¼Œæˆ‘ä»¬æ‰èƒ½çœŸçš„é•¿èˆ’ä¸€å£æ°”ï¼Œåœ¨æµ·é‡çš„è´Ÿè½½å’Œæµé‡ä¸‹å®‰å¿ƒç¡ä¸ªå¥½è§‰ã€‚</p><h2>æ¨èé˜…è¯»</h2><p>ä»Šå¤©çš„æ¨èé˜…è¯»ï¼Œä¸æ˜¯è¯»ä¸€ç¯‡å…·ä½“çš„æ–‡ç« ï¼Œæˆ‘æ¨èä½ å¯ä»¥å¸¸å¸¸å»æµè§ˆä¸€ä¸‹<a href=\"http://highscalability.com/\">http://highscalability.com/</a>è¿™ä¸ªç½‘ç«™ï¼Œé‡Œé¢æœ‰ä¸å°‘æœ‰ä»·å€¼çš„ã€è®²è§£æ€ä¹ˆåšåˆ°é«˜æ‰©å±•æ€§çš„å°æ–‡ç« ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>ä½ å¯ä»¥æƒ³ä¸€æƒ³ï¼Œä½ ç°åœ¨åœ¨å­¦ä¹ å’Œå·¥ä½œä¸­å¼€å‘çš„ç³»ç»Ÿï¼Œæ˜¯å¦è€ƒè™‘åˆ°é«˜å¯ç”¨æ€§å‘¢ï¼Ÿä½ èƒ½æ‰¾æ‰¾è¿™äº›ç³»ç»Ÿä¸­ï¼Œä½ ä»¬åšäº†å“ªäº›é«˜å¯ç”¨æ€§çš„ç¡¬ä»¶å±‚é¢çš„è®¾è®¡ï¼Œæ˜¯å¦è¿˜å­˜åœ¨å“ªäº›å•ç‚¹æ•…éšœï¼Œä»¥åŠåšäº†å“ªäº›æ•…éšœè½¬ç§»çš„æªæ–½æ¥ä¿æŒå¯ç”¨æ€§å—ï¼Ÿ</p><p>ä½ å¯ä»¥å†™åœ¨ç•™è¨€åŒºï¼Œå’Œå¤§å®¶ä¸€èµ·åˆ†äº«ä¸€ä¸‹å®é™…çš„åº”ç”¨ç»éªŒï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹å…¶ä»–åŒå­¦çš„å·¥ä½œä¸­åšäº†ä»€ä¹ˆæ ·çš„è®¾è®¡å’Œç›¸å…³å·¥ä½œï¼Œå’Œå¤§å®¶ä¸€èµ·äº¤æµã€åˆ†äº«ã€‚</p><p></p>","neighbors":{"left":{"article_title":"50 | æ•°æ®å®Œæ•´æ€§ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•è¿˜åŸçŠ¯ç½ªç°åœºï¼Ÿ","id":123407},"right":{"article_title":"52 | è®¾è®¡å¤§å‹DMPç³»ç»Ÿï¼ˆä¸Šï¼‰ï¼šMongoDBå¹¶ä¸æ˜¯ä»€ä¹ˆçµä¸¹å¦™è¯","id":130507}},"comments":[{"had_liked":false,"id":133421,"user_name":"æ´»çš„æ½‡æ´’","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1568558024,"is_pvip":false,"replies":[{"id":"52631","content":"å¾ˆå¥½çš„æ¯”å–»å•Š","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1569657580,"ip_address":"","comment_id":133421,"utype":1}],"discussion_count":3,"race_medal":0,"score":"130417576904","product_id":100026001,"comment_content":"è¿™ä¸€è®²è®²çš„ä¸œè¥¿éƒ½æ˜¯æˆ‘å·¥ä½œä¸­ç”¨å¾—ï¼Œä½†æ˜¯è®©æˆ‘ç»™æ¯”äººè®²æˆ‘æ— æ³•è¾¾åˆ°è€å¸ˆè¿™æ ·çš„æ¸…æ™°ï¼Œä¸‹é¢åˆ†äº«ä¸€ä¸‹å…³äºè´Ÿè½½å‡è¡¡çš„å½¢è±¡æ¯”å–»â€œ<br>ã€ä»€ä¹ˆæ˜¯è´Ÿè½½å‡è¡¡ï¼Ÿ<br><br>ã€€ã€€ä½ ä¸Šç­çš„æ—¶å€™æœ‰ç»ç†ã€ç»ç†è‡ªå·±ä¸å¹²æ´»ï¼Œä¸€æœ‰æ´»å°±åˆ†ç»™ä¸‹é¢çš„äºº<br><br>2ã€ä»€ä¹ˆæ˜¯è´Ÿè½½ï¼Ÿ<br><br>ã€€ã€€å°±æ˜¯æ¯ä¸ªå¹²æ´»çš„èŒå‘˜<br><br>3ã€ä»€ä¹ˆæ˜¯å‡è¡¡ï¼Ÿ<br><br>ã€€ã€€ä»–ä»¬ä¸èƒ½è®©ï¼šæœ‰çš„äººå¤ªå¿™æœ‰çš„å¤ªé—²<br><br>4ã€ä»€ä¹ˆæ˜¯æœ€å°è¿æ¥æ•°ï¼Ÿ<br><br>ã€€ã€€æœ‰çš„æ´»ï¼š5ä¸ª5åˆ†é’Ÿå¹²å®Œï¼Œæœ‰çš„æ´»1ä¸ªæ´»éœ€è¦1å¤©æ‰èƒ½å¹²å®Œ<br>ã€€ã€€åˆ«çœ‹äººå®¶ï¼Œé‚£æ´»å¹²äº†ä¸€å¤©ï¼Œäººå®¶æ‹¿æ´»å°±æ˜¯éœ€è¦å¹²ä¸€å¤©ã€‚<br><br>5ã€ä»€ä¹ˆæ˜¯åŠ æƒè½®è¯¢ï¼Ÿ<br><br>ã€€ã€€å¹´è½»ï¼šå¹²æ´»å¹²çš„å¿«é‚£çš„å·¥èµ„é«˜<br>ã€€ã€€å²æ•°å¤§çš„ï¼šå¹²æ´»å¹²çš„å°‘ï¼Œå·¥èµ„ä¹Ÿä½<br>ã€€ã€€ç”·çš„å’Œå¥³çš„æŒ‰ç…§ä¸åŒçš„æƒé‡åˆ†é…<br><br>6ã€å“ˆå¸Œçš„ç®—æ³•çš„åŸç†ï¼Ÿ<br><br>ã€€ã€€ä½ åœ¨è¶…å¸‚çš„å¹²æ´»æ´—å‘æ°´éƒ½æ˜¯ä½ å¹²<br>ã€€ã€€æ¯æ¬¡æ¥æ´»ç»ç†å°±ä¼šæŠŠæ´»åˆ†é…ç»™ä½ å› ä¸ºä½ æœ‰ç»éªŒ<br>ã€€ã€€æ‘†å¹²è´§çš„å°±æ‘†ä¸äº†æ´—å‘æ°´<br><br>7ã€è´Ÿè½½å‡è¡¡ç®—æ³•çš„åˆ†ç±»ï¼Ÿ<br><br>ã€€ã€€é™æ€ç®—æ³•ï¼šä¸éœ€è¦çœ‹ä½ å¹²ä»€ä¹ˆ<br>ã€€ã€€åŠ¨æ€ç®—æ³•ï¼šä¸åœçš„çœ‹æ¯ä¸ªäººéƒ½åœ¨å¹²ä»€ä¹ˆ<br><br>8ã€è´Ÿè½½å‡è¡¡æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„è®¾å¤‡ï¼Ÿ<br><br>ã€€ã€€ç»ç†å°±æ˜¯å•ç‚¹æ•…éšœï¼Œç»ç†ç”Ÿç—…äº†ï¼Ÿç»ç†ä¼‘å‡äº†å’‹åŠ,è¿™äº›æ´»å’‹åŠ?<br>ã€€ã€€è¦æ˜¯é™æ€ç®—æ³•è°éƒ½èƒ½åˆ†æ´»<br>ã€€ã€€è¦æ˜¯åŠ¨æ€å°±éœ€è¦å†æ‹›ä¸€ä¸ªå‰¯ç»ç†<br>â€","like_count":31,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467384,"discussion_content":"å¾ˆå¥½çš„æ¯”å–»å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569657580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1270780,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8AdNibZHbZriaqLQZrNPcX8hVOpY91o0ELl7eOq7qy3aTibjia10ymIsKUKW6Ucs9SuXBDWlg6sjahw/132","nickname":"é€†èˆŸ","note":"","ucode":"B303B4B8E10E0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278267,"discussion_content":"æ‚¨å¥½ï¼Œå…³äºæœ€å°è¿æ¥æ•°è·Ÿ å¹²æ´»æ—¶é—´çš„è”ç³»æˆ‘æ²¡æ˜ç™½ï¼Œæ‚¨èƒ½å†è§£é‡Šä¸‹å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591166542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2178037,"avatar":"https://static001.geekbang.org/account/avatar/00/21/3b/f5/4931260b.jpg","nickname":"å†°å‡‰çš„å’–å•¡","note":"","ucode":"611D948FBE4EF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357771,"discussion_content":"è¿™æ¯”å–»çœŸç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615863986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128812,"user_name":"å¹»æœˆå‰‘","can_delete":false,"product_type":"c1","uid":1120906,"ip_address":"","ucode":"44F7B62F5CB4E9","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/8a/ae50ecbb.jpg","comment_is_top":false,"comment_ctime":1566966967,"is_pvip":false,"replies":[{"id":"51174","content":"å¹»æœˆå‰‘åŒå­¦ä½ å¥½ï¼Œ<br><br>èƒ½ç»™å¤§å®¶è¡¥å……ä¸€ç‚¹ä¹‹å‰æ²¡æœ‰æƒ³åˆ°çš„é—®é¢˜æ˜¯å†å¥½ä¸è¿‡äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568551935,"ip_address":"","comment_id":128812,"utype":1}],"discussion_count":1,"race_medal":0,"score":"70286443703","product_id":100026001,"comment_content":"åŸæ¥è¿˜æœ‰ä¿æŒå¯ç”¨æ€§çš„åŸå› ï¼Œä»¥å‰ä¸€ç›´åªè§‰å¾—åˆ†å¸ƒå¼æ˜¯ç”¨æ¥å¢åŠ æ€§èƒ½çš„","like_count":17,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465115,"discussion_content":"å¹»æœˆå‰‘åŒå­¦ä½ å¥½ï¼Œ\n\nèƒ½ç»™å¤§å®¶è¡¥å……ä¸€ç‚¹ä¹‹å‰æ²¡æœ‰æƒ³åˆ°çš„é—®é¢˜æ˜¯å†å¥½ä¸è¿‡äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568551935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128875,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1566979228,"is_pvip":false,"replies":[{"id":"51187","content":"leslieåŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼Œæ˜¯çš„ï¼Œå…¶å®è®¡ç®—æœºç§‘å­¦çš„å„ä¸ªå­¦ç§‘ä¹‹é—´æ˜¯æœ‰å¾ˆç´§å¯†çš„è”ç³»çš„ï¼Œå¤§éƒ½æ˜¯åœ¨è®¾è®¡å’Œåˆ¶é€ è®¡ç®—æœºçš„å®è·µè¿‡ç¨‹ä¸­æŠ½è±¡å‡ºæ¥çš„ã€‚<br><br>å­¦ä¸œè¥¿ä¹Ÿæ˜¯ä¸€æ ·ï¼Œåªçœ‹ä¸€ä¸ªä¸»é¢˜å¾€å¾€å®¹æ˜“ç¼ºé‚£ä¹ˆä¸€ä¸¤ä¸ªç»†èŠ‚ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568554916,"ip_address":"","comment_id":128875,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31631750300","product_id":100026001,"comment_content":"\tä»Šå¤©çš„è¯¾ç¨‹æåˆ°ä¸€å—ä¸œè¥¿æ˜¯æˆ‘ä¸€ç›´åœ¨æ€è€ƒçš„ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼›ç³»ç»Ÿå½“ä¸‹ç”¨äº†å¤§é‡çš„äº‘æœåŠ¡å™¨ï¼Œå„å¤§äº‘å‚å•†å…¶å®éƒ½åšäº†å„ç§HAï¼›<br>è‡³äºäº‘å‚å•†çš„HAç›¸ä¿¡è€å¸ˆåº”å½“éå¸¸äº†è§£è¿™å—ç­–ç•¥ï¼Œæˆ‘å°±ä¸å¤šåšåˆ†äº«ï¼›è°ˆä¸€ä¸‹è‡ªå·±å¯¹äºè¿™èŠ‚è¯¾çš„æ”¶è·å’Œç†è§£ä¾›æ¢è®¨å§ã€‚<br>\tå…³äºè´Ÿè½½å‡è¡¡å’Œæ¶ˆæ¯é˜Ÿåˆ—ï¼šå…¶å®æ˜¯æˆ‘ç›®å‰ä¸€ç›´å›°æƒ‘çš„ä¸¤å—çŸ¥è¯†<br>\t1ï¼‰è´Ÿè½½å‡è¡¡ï¼šä¹‹å‰è®¸è€å¸ˆçš„æ¶æ„è¯¾é‡Œé¢æœ‰ä»æ¶æ„å±‚è§£é‡Šè¿‡ï¼Œå¯æ˜¯æˆ‘è§‰å¾—è€å¸ˆæ¢äº†è§’åº¦å»è®²è§£-ä»ç¡¬ä»¶å±‚å’Œç¡¬ä»¶å®ç°æ¨¡å¼è¡¥å……äº†è®¸è€å¸ˆçš„è¯¾ç¨‹ï¼›ä¸¤ä½è€å¸ˆçš„è¯¾ç¨‹å…¶å®ç»“åˆèµ·æ¥å°±å®Œå…¨è§£é‡Šæ¸…æ¥šäº†è¿™å—ï¼›<br>\t2ï¼‰æ¶ˆæ¯é˜Ÿåˆ—ï¼šå…¶å®ç‰µæ¶‰çš„çŸ¥è¯†ä¼—å¤šï¼šç°å®å·¥ä½œä¸­çš„MQç”¨çš„ä¸å¤ªåˆé€‚ï¼Œå› ä¸ºæ•°æ®åº“å‹åŠ›è¿™å—åˆ†æ‹…çš„ä¸å¤ªå¥½ï¼›<br>\té€šè¿‡å¯¹æ•°æ®åº“æ€§èƒ½åšäº†ä¸€ç³»åˆ—ä¼˜åŒ–çŸ­æœŸå†…æš‚æ— æ˜æ˜¾å‹åŠ›ï¼Œè·å¾—äº†ä¸€æ®µç¼“å†²æ—¶é—´ï¼›æ•…è€Œå­¦ä¹ äº†ã€Šæ¶ˆæ¯é˜Ÿåˆ—é«˜æ‰‹ã€‹è¿™é—¨è¯¾ï¼Œå­¦ä¹ ä¸­å‘ç°äº†éƒ¨åˆ†é—®é¢˜å…¶å®æºè‡ªæ“ä½œç³»ç»Ÿä¸ºæ­¤è¿˜ç‰¹æ„åœ¨åˆ˜è€å¸ˆæåŠæ¶ˆæ¯é˜Ÿåˆ—çš„è¯¾ç¨‹å’¨è¯¢äº†ï¼Œä½†æ˜¯æ€»è§‰å¾—æœ‰äº›åœ°æ–¹è¿˜æ˜¯ä¸å¤ªæ˜ç™½ï¼Œä»Šå¤©è€å¸ˆçš„è¯¾ç¨‹ä¸­åˆšå¥½æœ‰åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—-å¯¹äºç³»ç»Ÿå±‚çš„é—®é¢˜åˆåšäº†è¡¥å……ï¼Œç»“åˆä»Šå¤©è€å¸ˆçš„è¯¾å¤§è‡´ä¸Šå¯ä»¥æ¶ˆæ¯é˜Ÿåˆ—çš„é—®é¢˜ã€‚å¯èƒ½å°±åƒåˆ˜è€å¸ˆçš„è¯¾ç¨‹æ‰€è¯´ï¼š&quot;æ“ä½œç³»ç»Ÿå’Œè®¡ç®—æœºç»„æˆç›¸è¾…ç›¸æˆ&quot;ç›¸äº’ç†è§£å’Œæ˜ç™½æ‰èƒ½çœŸæ­£æŠŠæ¡å¥½ã€‚<br>      è°¢è°¢è€å¸ˆçš„åˆ†äº«å’Œä¼ æˆï¼šç›¸è¾…ç›¸æˆçš„æ¢ä¸ªè§’åº¦å»å­¦ä¹ æ„Ÿæ‚Ÿæ‰èƒ½æ˜ç™½å’Œç†è§£è¯¾ç¨‹ã€‚","like_count":8,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465149,"discussion_content":"leslieåŒå­¦ï¼Œ\n\nä½ å¥½ï¼Œæ˜¯çš„ï¼Œå…¶å®è®¡ç®—æœºç§‘å­¦çš„å„ä¸ªå­¦ç§‘ä¹‹é—´æ˜¯æœ‰å¾ˆç´§å¯†çš„è”ç³»çš„ï¼Œå¤§éƒ½æ˜¯åœ¨è®¾è®¡å’Œåˆ¶é€ è®¡ç®—æœºçš„å®è·µè¿‡ç¨‹ä¸­æŠ½è±¡å‡ºæ¥çš„ã€‚\n\nå­¦ä¸œè¥¿ä¹Ÿæ˜¯ä¸€æ ·ï¼Œåªçœ‹ä¸€ä¸ªä¸»é¢˜å¾€å¾€å®¹æ˜“ç¼ºé‚£ä¹ˆä¸€ä¸¤ä¸ªç»†èŠ‚ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568554916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1210699,"avatar":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","nickname":"-W.LI-","note":"","ucode":"3556786538664F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6647,"discussion_content":"å¤§ä½¬æ²¡çœ‹è§æ€»ç»“å•Šã€‚ã€‚ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567007616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128757,"user_name":"pebble","can_delete":false,"product_type":"c1","uid":1022021,"ip_address":"","ucode":"871930CB227C68","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/45/318ba48a.jpg","comment_is_top":false,"comment_ctime":1566957504,"is_pvip":false,"replies":[{"id":"51175","content":"pebbleåŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ç‰©ç†Uã€‚ä½†æ˜¯ä½ çŸ¥é“ï¼Œäº‘æœåŠ¡å•†éƒ½ä¼šè¶…å–æ¥ä¿éšœè‡ªå·±èƒ½æœ‰åˆ©æ¶¦â€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568551974,"ip_address":"","comment_id":128757,"utype":1}],"discussion_count":5,"race_medal":0,"score":"23041793984","product_id":100026001,"comment_content":"æœ‰ä¸ªé—®é¢˜ä¸€ç›´ä¸æ˜ç™½ï¼Œäº‘ä¸Šçš„cpuï¼Œæ˜¯å¤šçº¿ç¨‹åçš„ï¼Œè¿˜æ˜¯ä¸€ä¸ªç‰©ç†u","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465089,"discussion_content":"pebbleåŒå­¦ï¼Œ\n\nä½ å¥½ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ç‰©ç†Uã€‚ä½†æ˜¯ä½ çŸ¥é“ï¼Œäº‘æœåŠ¡å•†éƒ½ä¼šè¶…å–æ¥ä¿éšœè‡ªå·±èƒ½æœ‰åˆ©æ¶¦â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568551974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014800,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","nickname":"Scott","note":"","ucode":"7E57FDCB5E5D49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6556,"discussion_content":"ä¸€èˆ¬éƒ½æ˜¯ç‰©ç†æœºåŠ cgroupéš”ç¦»","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566969961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391491,"discussion_content":"äº‘æœåŠ¡å•†è¶…å–æ˜¯ä»€ä¹ˆæ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630484043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1593681,"avatar":"https://static001.geekbang.org/account/avatar/00/18/51/51/381876ab.jpg","nickname":"æ–‡åº·","note":"","ucode":"E1952B9DFB5DF4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550579,"discussion_content":"ä¸€é±¼å¤šåƒæ˜ç™½ä¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644596529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":391491,"ip_address":""},"score":550579,"extra":""},{"author":{"id":1649662,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","nickname":"pdf","note":"","ucode":"A44250955878BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570022,"discussion_content":"æœåŠ¡å™¨è´­ä¹°çš„æ—¶å€™å¯ä»¥é€‰æ‹©ç‹¬äº«æˆ–è€…å…±äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651638447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":391491,"ip_address":""},"score":570022,"extra":""}]}]},{"had_liked":false,"id":128664,"user_name":"æ´»çš„æ½‡æ´’","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1566944553,"is_pvip":false,"replies":[{"id":"51181","content":"ğŸ‘ å¯ä»¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹ä½ ä»¬çš„èŠ‚ç‚¹åˆ†é…ç­–ç•¥æ˜¯æ€ä¹ˆæ ·çš„ã€‚æ˜¯å‡ºäºä»€ä¹ˆè€ƒè™‘è¿™ä¹ˆæ¥åˆ†é…çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568552427,"ip_address":"","comment_id":128664,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23041781033","product_id":100026001,"comment_content":"ç»ˆäºè®²åˆ°äº†å’Œæˆ‘å·¥ä½œä¸­ä¸€æ ·çš„åœºæ™¯<br>1ã€é¦–å…ˆæ˜¯Nginxåå‘ä»£ç†çš„é«˜å¯ç”¨é›†ç¾¤<br>2ã€MySQLçš„ä¸€ä¸»å¤šä»ï¼Œä¸»ä»å¤åˆ¶<br>3ã€openstakå†åˆ›å»ºè™šæ‹Ÿæœºæ—¶ä¼šæŠŠç›¸åŒæœåŠ¡çš„è™šæ‹Ÿæœºåˆ†æ•£åˆ°ä¸åŒçš„å®¿ä¸»æœºä¸Š<br>4ã€å¾®æœåŠ¡çš„æ³¨å†Œä¸­å¿ƒé›†ç¾¤<br>5ã€å¾®æœåŠ¡æ°´å¹³æ‰©å±•çš„å¤šä¸ªèŠ‚ç‚¹<br>","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465047,"discussion_content":"ğŸ‘ å¯ä»¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹ä½ ä»¬çš„èŠ‚ç‚¹åˆ†é…ç­–ç•¥æ˜¯æ€ä¹ˆæ ·çš„ã€‚æ˜¯å‡ºäºä»€ä¹ˆè€ƒè™‘è¿™ä¹ˆæ¥åˆ†é…çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568552427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161512,"user_name":"88591","can_delete":false,"product_type":"c1","uid":1254656,"ip_address":"","ucode":"04CE3E46455185","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/00/3afbab43.jpg","comment_is_top":false,"comment_ctime":1576220436,"is_pvip":false,"replies":[{"id":"68667","content":"ğŸ™è°¢è°¢æ”¯æŒ","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1581239231,"ip_address":"","comment_id":161512,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14461122324","product_id":100026001,"comment_content":"ä»¥å‰çœ‹è¿‡coursera ä¸Šé¢çš„ã€Šç»„æˆåŸç†ã€‹ï¼Œè§‰å¾—è®²çš„å¾ˆå¥½äº†ã€‚æ²¡æƒ³åˆ°è€å¸ˆç”¨ç»“åˆå®è·µçš„ä¸€äº›æ¡ˆä¾‹æ¥è®²è§£ï¼Œè®©çŸ¥è¯†ç†è§£æ›´æ·±åˆ»äº†ã€‚è¿™ä¸ªä¸“æ å®šçš„éå¸¸å€¼ã€‚","like_count":4,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477742,"discussion_content":"ğŸ™è°¢è°¢æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581239231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141425,"user_name":"ç§‹å¤©","can_delete":false,"product_type":"c1","uid":1057056,"ip_address":"","ucode":"A7E1D953EF7E17","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","comment_is_top":false,"comment_ctime":1571151250,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5866118546","product_id":100026001,"comment_content":"è€Œé€šè¿‡æ°´å¹³æ‰©å±•ä¿éšœé«˜å¯ç”¨æ€§ï¼Œåˆ™éœ€è¦æˆ‘ä»¬åšä¸‰ä»¶äº‹æƒ…ã€‚ç¬¬ä¸€ä¸ªæ˜¯ç†...<br>","like_count":1},{"had_liked":false,"id":293113,"user_name":"å¥‹æ–—","can_delete":false,"product_type":"c1","uid":2047392,"ip_address":"","ucode":"C84C2D030ACA51","user_header":"https://static001.geekbang.org/account/avatar/00/1f/3d/a0/acf6b165.jpg","comment_is_top":false,"comment_ctime":1621223273,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621223273","product_id":100026001,"comment_content":"æ„Ÿè§‰é«˜å¯ç”¨æ‰æ˜¯è¡¡é‡ä¸€ä¸ªç³»ç»Ÿæœ€é‡è¦çš„æŒ‡æ ‡","like_count":0},{"had_liked":false,"id":284275,"user_name":"Kung","can_delete":false,"product_type":"c1","uid":1086261,"ip_address":"","ucode":"862B39B7263447","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/35/0cfb5732.jpg","comment_is_top":false,"comment_ctime":1616147130,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1616147130","product_id":100026001,"comment_content":"åˆ†å¸ƒå¼è®¡ç®—è®²çš„æŒºå®¹æ˜“ç†è§£çš„ï¼Œä½†æ˜¯è·Ÿæ ‡é¢˜ã€å¦‚æœæ‰€æœ‰äººçš„å¤§è„‘éƒ½è”ç½‘ä¼šæ€æ ·ï¼Ÿã€‘ä¸ºå•¥å¯¹åº”ä¸ä¸Šäº†","like_count":0,"discussions":[{"author":{"id":1855112,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIYj6Zv3ibicLebxo7lsPMEwpBynHkYp8pLc3FcltUfmOBSRxpmicEwIAgP9OvSKnGGdaxwsZ7yiciaSsQ/132","nickname":"å†¯ç£Š","note":"","ucode":"4FFB8B984269FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376179,"discussion_content":"è¿™ä¸å°±å¯¹åº”äº†åˆ†å¸ƒå¼è®¡ç®—å—ï¼Œå¤§è„‘å°±æ˜¯ä¸€å°è®¡ç®—æœº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622004827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176560,"user_name":"Geek_24abc6","can_delete":false,"product_type":"c1","uid":1649859,"ip_address":"","ucode":"88CD214232C6BC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/CqF8eiaanNteyu2U7FibYicjnw99VXZST61vvMpQKSd5iaLNW6EicLeFYyDOKJmg9rNx6KW90DwpPMKNxiben6fQeZjA/132","comment_is_top":false,"comment_ctime":1581087314,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581087314","product_id":100026001,"comment_content":"è¯´å¾—æŒºå¥½","like_count":0},{"had_liked":false,"id":161509,"user_name":"88591","can_delete":false,"product_type":"c1","uid":1254656,"ip_address":"","ucode":"04CE3E46455185","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/00/3afbab43.jpg","comment_is_top":false,"comment_ctime":1576219954,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576219954","product_id":100026001,"comment_content":"åŸæ¥å¯ç”¨æ€§ä¹Ÿæ˜¯å¾ˆå¤æ‚ã€‚","like_count":0},{"had_liked":false,"id":138512,"user_name":"å‘¨æ¶›","can_delete":false,"product_type":"c1","uid":1678373,"ip_address":"","ucode":"6C57B041F1F66C","user_header":"https://static001.geekbang.org/account/avatar/00/19/9c/25/2d97b0a7.jpg","comment_is_top":false,"comment_ctime":1570286384,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570286384","product_id":100026001,"comment_content":"è¿™ç« è®²çš„å®åœ¨å¤ªå¥½äº†ï¼Œç”¨æµ…æ˜¾çš„é“ç†è®²å¤æ‚çš„åŸç†ï¼Œéå¸¸å¸Œæœ›åœ¨è¿™é‡Œä¸æ–­æé«˜ã€‚æœ€ç»ˆè¾¾åˆ°å®é™…æ“ä½œçš„å¢ƒç•Œã€‚","like_count":0},{"had_liked":false,"id":129700,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1567222651,"is_pvip":true,"replies":[{"id":"51157","content":"å…¶å®é«˜å¯ç”¨çš„æŒ‘æˆ˜å¾ˆå¤šï¼Œæ¯æ¬¡æ•…éšœéƒ½ä¼šè®©ä½ å‘ç°æ¼è€ƒè™‘çš„SPOFçš„èŠ‚ç‚¹ï¼Œä»¥åŠæ²¡æœ‰è€ƒè™‘å‘¨åˆ°çš„FailOverç­–ç•¥","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568547856,"ip_address":"","comment_id":129700,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567222651","product_id":100026001,"comment_content":"ä»¥å‰ä¸Šä¸€ä¸ªh5ï¼Œè½¯ä»¶æœåŠ¡éƒ½æ˜¯ç‹¬ç«‹çš„å¹¶ä¸”éƒ½æ˜¯éƒ¨ç½²åˆ°å‡ å°æœºå™¨ï¼Œæ•°æ®åº“æ˜¯haï¼Œå°±è§‰å¾—å®ç°äº†é«˜å¯ç”¨ã€‚<br>ç°åœ¨è½¯ä»¶æ˜¯å¾®æœåŠ¡åŒ–ï¼Œéƒ¨ç½²æ˜¯dockerï¼‹k8sï¼Œæ•°æ®ä¸­å¿ƒæ˜¯å¼‚åœ°ã€‚ä¸€è‡´æ€§åªèƒ½æ ¹æ®ä¸šåŠ¡åœºæ™¯case by case","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465608,"discussion_content":"å…¶å®é«˜å¯ç”¨çš„æŒ‘æˆ˜å¾ˆå¤šï¼Œæ¯æ¬¡æ•…éšœéƒ½ä¼šè®©ä½ å‘ç°æ¼è€ƒè™‘çš„SPOFçš„èŠ‚ç‚¹ï¼Œä»¥åŠæ²¡æœ‰è€ƒè™‘å‘¨åˆ°çš„FailOverç­–ç•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568547856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128841,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566972967,"is_pvip":false,"replies":[{"id":"51170","content":"ğŸ‘ å¾ˆæ£’ï¼Œç”¨å¥½k8såšè‡ªåŠ¨æ‰©å±•ä¸å®¹æ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568551260,"ip_address":"","comment_id":128841,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566972967","product_id":100026001,"comment_content":"æˆ‘ä»¬çš„ç³»ç»Ÿå°±æ˜¯æœ€ç®€å•çš„LEMPæ¶æ„ï¼Œèƒ½è¿‡nginxå°†æµé‡åˆ†å‘åˆ°ä¸åŒçš„PHPæœåŠ¡å™¨ï¼ŒPHPé€šè¿‡è¿æ¥è¯»å†™åˆ†ç¦»çš„MYSQLå®ŒæˆæœåŠ¡ã€‚åæœŸå‡†å¤‡è¿å…¥Kubernetes,åˆ©ç”¨äº‘åŸç”Ÿçš„ä¾¿åˆ©æ€§å’Œé«˜æ‰©å±•æ€§ï¼Œæ›´å¥½çš„æå‡å¯ç”¨æ€§ï¼Œä¸åˆ†é¡µå¼è®¡ç®—ã€‚","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465129,"discussion_content":"ğŸ‘ å¾ˆæ£’ï¼Œç”¨å¥½k8såšè‡ªåŠ¨æ‰©å±•ä¸å®¹æ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568551260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}