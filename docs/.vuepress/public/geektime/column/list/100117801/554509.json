{"id":554509,"title":"12｜QEMU：支持RISC-V的QEMU如何构建？","content":"<p>你好，我是LMOS。</p><p>工欲善其事，必先利其器。作为开发者，学习过程中我们尤其要重视动手实践，不断巩固和验证自己学到的知识点。而动手实践的前提，就是要建立一个开发环境，这个环境具体包括编译环境、执行环境，以及各种常用的工具软件。</p><p>我会用两节课带你动手搭好环境，今天这节课咱们先热个身，搞清楚什么是主环境，还有怎么基于它生成交叉编译工具。</p><p>代码你可以从<a href=\"https://gitee.com/lmos/Geek-time-computer-foundation/tree/master/lesson12~13\">这里</a>下载。</p><h2>主环境</h2><p>主环境，有时也叫作HOST环境，也就是我们使用的计算机环境，即使用什么样的操作系统、什么架构的计算机作为开发环境。</p><p>比方说我们经常用PC机作为开发机使用，它实际就是一个基于x86架构（或其他架构）的硬件平台，再加上Windows或者Linux等操作系统共同组成的开发环境。</p><p>普通用户的电脑上经常安装的操作系统是Windows，因为界面友好方便、操作简单且娱乐影音、游戏办公等应用软件也是不胜枚举。</p><p>Windows对普通用户来说的确非常友好。但是作为软件开发者，对于志存高远、想要精研技术的我们而言，更喜欢用的是Linux系统。</p><p>它虽然没有漂亮的GUI，却暴露了更多的计算机底层接口，也生产了更多的开发工具和各种各样的工具软件。比如大名鼎鼎的编译器GCC、声名远扬的编辑器EMACS、VIM，还有自动化的脚本工具shell、make等。这些工具对开发者非常友好，配合使用可以让我们的工作事半功倍，后面你会逐渐体会到这点。</p><!-- [[[read_end]]] --><p>当然Linux只是一个内核，我们不能直接使用，还需要各种工具、库和桌面GUI，把这些和Linux打包在一起发行，这就构成了我们常说的Linux发行版。</p><p>我最喜欢的Linux发行版是Deepin和Ubuntu。为了统一，我建议你使用Deepin最新版，你也可以使用Ubuntu，它们是差不多的。只是操作界面稍有不同。我先给你展示下我的Deepin，如下图，刚装上它的时候，我就觉得它颇为惊艳。</p><p><img src=\"https://static001.geekbang.org/resource/image/78/28/782c1d620430ba46b584b0cdbd86dc28.jpg?wh=1920x1089\" alt=\"图片\"></p><p>这里最基础的安装我就不讲了，因为安装Deepin十分简单，无论是虚拟机还是在物理机上安装，我相信你通过互联网都可以自行解决，搞不定也可以看看<a href=\"https://www.deepin.org/zh/installation/\">这里</a>。</p><p>这两种方式我也替你对比过，虚拟机中的Linux较物理机上的Linux性能稍差一点，但并不影响我们实验操作和结果。</p><h2>为什么需要交叉编译</h2><p>虽然主环境搞定了，但现在我们还不能直接跑代码。为什么呢？</p><p>先回想一下，平时我们正常开发软件需要什么？我猜，哪怕你不能抢答，也会知道个大概：需要电脑（PC）、特定的操作系统（比如Windows或Linux等），在这个操作系统上还能运行相应的编辑器和编译器。编辑器用来编写源代码，而编译器用来把源代码编译成可执行程序。</p><p>似乎不需要更多东西了，毕竟我们日常开发的软件，宿主平台和目标平台是相同的。如果我们把限制条件变一变，情况就不同了。如果我们想尝试在RISC-V平台上跑程序，要怎么办呢？</p><p>你或许会说，这简单，买一台RISC-V的机器不就行了。可是先不说购买硬件的经济成本，实际上，很多RISC-V平台硬件资源（如内存、SD卡容量）有限，不足以运行复杂的编译器软件，有的甚至没有操作系统，更别说在上面运行编译器或者编辑器软件了。</p><p>面对这样的困境，就要用到<strong>交叉编译</strong>了。什么是交叉编译呢？简单来说，就是在一个硬件平台上，生成另一个硬件平台的可执行程序。</p><p>举个例子，我们在x86平台上编译生成ARM平台的可执行程序；再比如说，之后的课里我们将在x86平台上，生成RISC-V的可执行程序。这些都属于交叉编译，在这个过程中编译生成可执行程序的平台，称为宿主机或者主机；执行特定程序的平台（如ARM或者RISC-V平台），称为目标机。</p><p>我特意准备了图解，为你展示在x86平台上，交叉编译生成RISC-V平台可执行程序的过程，你可以仔细看看：</p><p><img src=\"https://static001.geekbang.org/resource/image/a5/55/a5fb7d81fa49da02bfeee45c35aef255.jpg?wh=1920x1183\" alt=\"图片\"></p><h2>如何构建RISC-V交叉编译器</h2><p>前面说了交叉编译的本质就是生成其他平台体系上的可执行程序，这个体系又不同于我们宿主平台。我们的目的很简单，就是要<strong>在x86平台上编写源代码，然后编译出RISC-V平台的可执行程序，最后放在RISC-V平台上去运行</strong>。</p><p>因此，我们需要用宿主机编译器A，编译出一个编译器B，这个编译器B是本地平台上的可执行程序。</p><p>说得再具体点，你可以把编译器B看作是<strong> x86 Linux上的一个应用</strong>。但它的特殊之处就是，能根据源代码生成RISC-V平台上的可执行程序。补充一句，这里的编译器A和B都是C语言编译器。</p><p>下面我们开始构造编译器B。编译器B不仅仅是C语言编译器，还有很多额外的程序。比如RISC-V平台上使用的二进制文件分析（objcopy）、反汇编（objdump）、elf结构分析工具（readelf）、静态库归档（ar）、汇编器（as）、链接器（ld）、GDB、C语言库（Newlib、Glib、Multlib）等。</p><p>为了简单、便于区分，我们把这些对应于RISC-V平台的编译器相关的软件，统称为<strong> RISC-V工具链</strong>。</p><p>构建RISC-V工具链的主要步骤如下：</p><p>1.安装依赖工具：在宿主平台上安装编译器A，以及相应的工具和库。<br>\n2.下载RISC-V工具链的源代码；<br>\n3.配置RISC-V工具链；<br>\n4.编译RISC-V工具链，并安装在宿主平台上。</p><h3>第一步：安装依赖工具</h3><p>我们先从第一步开始，编译器A主要是宿主平台上的GCC，工具主要是Make、Git、Autoconf、Automake、CURL、Python3、Bison、Flex等。这里GCC主要在build-essential包中，我们只要在Linux终端中输入如下指令就可以了：</p><pre><code class=\"language-plain\">sudo apt-get install git autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf patchutils bc libexpat-dev libglib2.0-dev ninja-build zlib1g-dev pkg-config libboost-all-dev libtool libssl-dev libpixman-1-dev libpython-dev virtualenv libmount-dev libsdl2-dev\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/77/79/778c6aea3fa8c112c732fc3d7b653f79.jpg?wh=1910x1154\" alt=\"图片\"></p><p>如果不出意外，这些工具和库会通过网络由Linux的apt包管理器，全自动地给你安装完毕。</p><h3>第二步：下载工具链源代码</h3><p>接着进入第二步下载RISC-V工具链源代码。通常来说，我们只要用Git克隆一个riscv-gnu-toolchain仓库即可，其它的由riscv-gnu-toolchain仓库中的仓库子模块自动处理。</p><h4>手动配置环节</h4><p>由于众所周知的网络原因，你可能连riscv-gnu-toolchain仓库都下载不下来，更别说自动下载仓库子模块了。为了照顾卡壳的人，我把手动处理的情况也顺便讲一下，能够直接自动安装的同学可以跳过这部分，直接翻到7条指令之后的最终截图对一下结果就行。</p><p>子模块如下：</p><pre><code class=\"language-plain\">riscv-qemu（虚拟机）\nriscv-newlib (用嵌入式的轻量级C库)\nriscv-binutils(包含一些二进制工具集合，如objcopy等)\nriscv-gdb(用于调试代码的调试器)\nriscv-dejagnu(用于测试其它程序的框架)\nriscv-glibc(GNU的C库)\nriscv-gcc (C语言编译器)\n</code></pre><p>这些子模块我们需要手动从Gitee网站上下载。下载前，我们先在终端上输入后面的指令，建立一个目录，并切换到该目录中：</p><pre><code class=\"language-plain\">mkdir RISCV_TOOLS\ncd RISCV_TOOLS\n</code></pre><p>把RISC-V工具链的源代码手动下载好，步骤稍微多了一些，我在后面分步骤列出，方便你跟上节奏。</p><p>其实也就是7条指令的事儿，并不复杂。先统一说明下，<strong>后面这些命令都是切换到riscv-gnu-toolchain目录的终端下</strong>，输入我给你列出的指令即可。</p><p>1.开始下载riscv-gnu-toolchain，命令如下：</p><pre><code class=\"language-plain\">git clone https://gitee.com/mirrors/riscv-gnu-toolchain\ncd riscv-gnu-toolchain\n</code></pre><p>2.下载RISC-V平台的C语言编译器源代码仓库，输入如下指令：</p><pre><code class=\"language-plain\">git clone -b riscv-gcc-10.2.0 https://gitee.com/mirrors/riscv-gcc\n</code></pre><p>3.下载测试框架源代码仓库，即riscv-dejagnu。输入如下指令：</p><pre><code class=\"language-plain\">git clone https://gitee.com/mirrors/riscv-dejagnu\n</code></pre><p>4.下载GNU的C库源代码仓库，也就是riscv-glibc，输入如下指令：</p><pre><code class=\"language-plain\">git clone -b riscv-glibc-2.29 https://gitee.com/mirrors/riscv-glibc\n</code></pre><p>5.下载用于嵌入式的轻量级C库源代码仓库，即riscv-newlib。输入如下指令：</p><pre><code class=\"language-plain\">git clone https://gitee.com/mirrors/riscv-newlib\n</code></pre><p>6.下载二进制工具集合源代码仓库riscv-binutils，输入如下指令：</p><pre><code class=\"language-plain\">git clone -b riscv-binutils-2.35 https://gitee.com/mirrors/riscv-binutils-gdb riscv-binutils\n</code></pre><p>7.最后，下载GDB软件调试器源代码仓库riscv-gdb，输入如下指令：</p><pre><code class=\"language-plain\">git clone -b fsf-gdb-10.1-with-sim https://gitee.com/mirrors/riscv-binutils-gdb riscv-gdb\n</code></pre><p>好，现在所有的RISC-V工具链的源代码，我们已经下载完了。我们一起来同步一下，确保你我的riscv-gnu-toolchain目录下的目录和文件，完全一致。</p><p>在riscv-gnu-toolchain目录的终端下输入ls指令，你应该得到和后面这张图一样的结果。</p><p><img src=\"https://static001.geekbang.org/resource/image/e8/34/e8307c6cabf00a3fccc4a0e0a93b3034.jpg?wh=1910x1154\" alt=\"图片\"></p><h3>第三步：配置工具链</h3><p>在我们用宿主编译器编译所有的RISC-V工具链的源代码之前，还有最重要的一步，那就是配置RISC-V工具链的功能。</p><p>RISC-V工具链有很多配置选项，不同的配置操作会生成具有特定功能的RISC-V工具链。此外，配置操作还有一个功能，就是检查编译RISC-V工具链所依赖的工具和库。检查通过，就会生成相应的配置选项文件，还有用于编译操作的Makefile文件。</p><p>下面我们开始配置操作。为了不污染源代码目录，我们可以在riscv-gnu-toolchain目录下建立一个build目录，用于存放编译RISC-V工具链所产生的文件。还是在切换到riscv-gnu-toolchain目录的终端下，输入如下指令：</p><pre><code class=\"language-plain\">mkdir build  #建立build目录\n#配置操作，终端一定要切换到build目录下再执行如下指令\n../configure --prefix=/opt/riscv/gcc --enable-multilib --target=riscv64-multlib-elf\n</code></pre><p>我给你解释一下指令里的关键内容。</p><p>–prefix表示RISC-V的工具链的安装目录，我们一起约定为“/opt/riscv/gcc”这个目录。</p><p>–enable-multilib表示使用multlib库，使用该库编译出的RISC-V工具链，既可以生成RISCV32的可执行程序，也可以生成RISCV64的可执行程序，而默认的Newlib库则不行，它只能生成RISCV（32/64）其中之一的可执行程序。</p><p>–target表示生成的RISC-V工具链中，软件名称的前缀是riscv64-multlib-elf-xxxx。若配置操作执行成功了，build目录中会出现如下所示的文件：</p><p><img src=\"https://static001.geekbang.org/resource/image/86/5e/86a3b65f445394f1e8be61e3470e9f5e.jpg?wh=1920x1271\" alt=\"图片\"></p><h3>第四步：编译工具链</h3><p>最后我们来完成第四步，编译RISC-V工具链。只要配置操作成功了，就已经成功了90%。其实编译操作是简单且高度自动化的，我们只要在切换到build目录的终端下，输入如下指令即可：</p><pre><code class=\"language-plain\">sudo make -j8\n</code></pre><p>这个指令在编译完成后会自动安装到“/opt/riscv/gcc”目录，由于要操作“/opt/riscv/gcc”目录需要超级管理员权限，所以我们要记得加上sudo。</p><p>另外，如果你的宿主机的CPU有n个核心，就在make 后面加-j（n*2），这样才能使用多线程加速编译。</p><p>好了，一通操作猛如虎，现在最重要的事情是等待计算机“搬砖”了。你不妨播放音乐，泡上一杯新鲜的热茶，一边听歌，一边喝茶……估计要喝很多杯茶，才会编译完成。最最重要的是这期间不能断电，否则几个小时就白费了。</p><p>如果终端中不出现任何错误，就说明编译成功了。我们在终端中切换到“/opt/riscv/gcc/bin”目录下，执行如下指令：</p><pre><code class=\"language-plain\">riscv64-unknown-elf-gcc -v\n</code></pre><p>上述指令执行以后，会输出riscv64-unknown-elf-gcc的版本信息，这证明RISC-V工具链构建成功了。如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/d6/be/d62cf1b12d532aea1643118ea117febe.jpg?wh=1920x1271\" alt=\"图片\"></p><p>到这里，我们环境已经成功了一半，有了交叉编译器，并且这种交叉编译器能生成32位的RISC-V平台的可执行程序，也能生成64位的RISC-V平台的可执行程序。</p><p>你可能会好奇，成功了一半，那另一半呢？这需要我们接着干另一件事。什么事呢？容我先在这里卖个关子，下节课再揭秘。</p><h2>重点回顾</h2><p>通过这节课的学习，我们成功构建了RISC-V工具链，这样就能在X86平台上生成RISC-V平台的可执行程序了。下面让我们一起回顾一下，这节课中都做了些什么。</p><p>我们首先约定了宿主环境，需要用到Ubuntu或者Deepin的Linux发行版，无论你是将它们安装在物理PC上，还是安装在虚拟机上。</p><p>然后我们了解了什么是交叉编译。为了方便后面课程学习动手实践，我们要在x86平台的宿主机上编译生成RISC-V平台的可执行程序。</p><p>明确了目标，我们一起动手开始构建了一个RISC-V交叉编译器。你会发现其中不只是C/C++编译器，还有很多处理二进制可执行程序的工具，我们把这些统称为RISC-V工具链。</p><h2>思考题</h2><p>请你说一说交叉编译的过程？</p><p>期待你再留言区分享自己的实验笔记，或者与我交流讨论。也推荐你把这节课分享给更多朋友，我们一起玩转交叉编译。</p>","neighbors":{"left":{"article_title":"用户故事｜我是怎样学习Verilog的？","id":601261},"right":{"article_title":"13｜小试牛刀：跑通RISC-V平台的Hello World程序","id":555771}},"comments":[{"had_liked":false,"id":355189,"user_name":"Vic","can_delete":false,"product_type":"c1","uid":1898294,"ip_address":"湖北","ucode":"234BBDADBEF8C0","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f7/36/ccf3b5d1.jpg","comment_is_top":true,"comment_ctime":1661161062,"is_pvip":true,"replies":[{"id":129448,"content":"66666","user_name":"作者回复","user_name_real":"编辑","uid":1345199,"ctime":1661677895,"ip_address":"湖北","comment_id":355189,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"host使用的是Ubuntu 20.04 Desktop, 在Windows 11的笔记本, 用Virtualbox 6.1 搭建的虚机 (cpu 2 cores, 40GB 存储，4GB内存) ，按照老师的教程，以下是我的实验笔记： \n1. 在我的环境就只有一个libpython-dev 报错，因为有提示换成libpython2-dev，不碍事，而且不同的os，不同的版本，可能不会有这个问题，可以先用老师的命令。\nsudo apt-get install git autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf patchutils bc libexpat-dev libglib2.0-dev ninja-build zlib1g-dev pkg-config libboost-all-dev libtool libssl-dev libpixman-1-dev libpython2-dev virtualenv libmount-dev libsdl2-dev\n2. mkdir RISCV_TOOLS; cd RISCV_TOOLS\n3.\ngit clone https:&#47;&#47;gitee.com&#47;mirrors&#47;riscv-gnu-toolchain\ncd riscv-gnu-toolchain\n4.\nmkdir build \ncd build\n..&#47;configure --prefix=&#47;opt&#47;riscv&#47;gcc --enable-multilib --target=riscv64-multlib-elf\n5. 因为我的host环境是建在2cpu core的虚机上\nsudo make -j 2 \n6. 大约3个多小时，终于完成了。\n7. cd &#47;opt&#47;riscv&#47;gcc&#47;bin\n.&#47;riscv64-unknown-elf-gcc -v\n8. 结果输出：\nUsing built-in specs.\nCOLLECT_GCC=.&#47;riscv64-unknown-elf-gcc\nCOLLECT_LTO_WRAPPER=&#47;opt&#47;riscv&#47;gcc&#47;libexec&#47;gcc&#47;riscv64-unknown-elf&#47;12.1.0&#47;lto-wrapper\nTarget: riscv64-unknown-elf\nConfigured with: &#47;home&#47;vic&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;gcc&#47;configure --target=riscv64-unknown-elf --prefix=&#47;opt&#47;riscv&#47;gcc --disable-shared --disable-threads --enable-languages=c,c++ --with-pkgversion= --with-system-zlib --enable-tls --with-newlib --with-sysroot=&#47;opt&#47;riscv&#47;gcc&#47;riscv64-unknown-elf --with-native-system-header-dir=&#47;include --disable-libmudflap --disable-libssp --disable-libquadmath --disable-libgomp --disable-nls --disable-tm-clone-registry --src=&#47;home&#47;vic&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;gcc --enable-multilib --with-abi=lp64d --with-arch=rv64imafdc --with-tune=rocket --with-isa-spec=2.2 &#39;CFLAGS_FOR_TARGET=-Os   -mcmodel=medlow&#39; &#39;CXXFLAGS_FOR_TARGET=-Os   -mcmodel=medlow&#39;\nThread model: single\nSupported LTO compression algorithms: zlib\ngcc version 12.1.0 () \n9. 收工。\n","like_count":5,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585568,"discussion_content":"66666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661677895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2942567,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/e6/67/2a717a78.jpg","nickname":"咻咻咻","note":"","ucode":"D0F8BE3299CC94","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592004,"discussion_content":"我用的是清华大学镜像的 ubuntu 20.04.5 win10 使用安装命令后有两个错误 一个是要求我将 libexpat-dev改为 libexpat1-dev，另一个是无法找到 libpython。\nlibpython 的问题，可能是镜像站的问题，我昨天报错，今天起来跑了一遍原本的安装指令，反而没有这个错误了。\nps：下载时间是真的长呀。。。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1667026739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2649028,"avatar":"https://static001.geekbang.org/account/avatar/00/28/6b/c4/2343b1cb.jpg","nickname":"手滑的小熊猫","note":"","ucode":"B7C8B38888AB8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585263,"discussion_content":"我用的是WSL2 on win11,老师的软件安装命令会提示libpython-dev不存在，按照Vic的软件安装命令可以成功。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661426220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"辽宁","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355661,"user_name":"光华路小霸王","can_delete":false,"product_type":"c1","uid":1582623,"ip_address":"湖北","ucode":"80EB89CAAAB193","user_header":"https://static001.geekbang.org/account/avatar/00/18/26/1f/1af5d4ed.jpg","comment_is_top":false,"comment_ctime":1661607175,"is_pvip":false,"replies":[{"id":129433,"content":"哈哈 成功了 吧","user_name":"作者回复","user_name_real":"编辑","uid":1345199,"ctime":1661677084,"ip_address":"湖北","comment_id":355661,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"编译中会卡在 \nCloning into &#39;&#47;home&#47;qing&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;gcc&#39;...\n还是会去下载仓库，应该是我们下载的文件夹名称不是默认的，查看 README.md 文件，在最后说明了如何指定子模块的路径，在配置环节添加配置之后，戴尔笔记本双核  i5-4200U CPU @ 1.60GHz 编译，编译完成四十多分钟，系统使用  Debian 4.19.181-1 \n\n..&#47;configure --prefix=&#47;opt&#47;riscv&#47;gcc \\\n--enable-multilib \\\n--target=riscv64-multlib-elf \\\n--with-gcc-src=&#47;home&#47;name&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;riscv-gcc \\\n--with-binutils-src=&#47;home&#47;name&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;riscv-binutils \\\n--with-newlib-src=&#47;home&#47;name&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;riscv-newlib \\\n--with-glibc-src=&#47;home&#47;name&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;riscv-glibc \\\n--with-gdb-src=&#47;home&#47;name&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;riscv-gdb\n","like_count":5,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585552,"discussion_content":"哈哈 成功了 吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661677084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2041584,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/26/f0/282135d1.jpg","nickname":"王吉","note":"","ucode":"3C5FBB9C4B918A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620845,"discussion_content":"实测有效，另外建议参考README.md文件的最新sudo install安装命令","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686612417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1582623,"avatar":"https://static001.geekbang.org/account/avatar/00/18/26/1f/1af5d4ed.jpg","nickname":"光华路小霸王","note":"","ucode":"80EB89CAAAB193","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585675,"discussion_content":"成功了😉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661760728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361237,"user_name":"筱琲","can_delete":false,"product_type":"c1","uid":1736095,"ip_address":"湖北","ucode":"0896BD7CD8026C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/7d/9f/53dd1d94.jpg","comment_is_top":false,"comment_ctime":1667355783,"is_pvip":false,"replies":[{"id":131762,"content":"哈哈 你在虚拟机中弄的吗","user_name":"作者回复","user_name_real":"编辑","uid":1345199,"ctime":1668311805,"ip_address":"湖北","comment_id":361237,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"用虚拟机的需要注意下，CPU核数，内存，磁盘，都要尽可能大一些，我设置的是4核&#47;8G&#47;100G，这样才能一路通关。不然要么卡死要么到最后提示空间不足，你连系统都启动不了。","like_count":1,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593537,"discussion_content":"哈哈 你在虚拟机中弄的吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668311806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2990888,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/fqv1BIE5n9xEPibXKxdUUW4PMwoPu7IBLmcUibQ5GaxgOZq2NFFkfjHg2TxyVHP1cQQnzfDGAoibiaeKmE9eqkRYRA/132","nickname":"G不来也不去","note":"","ucode":"CA161B4E5DDF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599038,"discussion_content":"空间不足之后才看到这个评论，，，/捂脸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673281577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江西","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356158,"user_name":"bubble","can_delete":false,"product_type":"c1","uid":1008527,"ip_address":"湖北","ucode":"E1046CC31341D9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/8f/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1662018043,"is_pvip":false,"replies":[{"id":129733,"content":"可能是网络问题","user_name":"作者回复","user_name_real":"编辑","uid":1345199,"ctime":1662255891,"ip_address":"湖北","comment_id":356158,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"mkdir -p stamps&#47; &amp;&amp; touch stamps&#47;build-gdb-newlib 卡住一直不动了。\n riscv-gnu-toolchain git:(master) ✗ ps -aux | grep make\nroot      580153  0.1  0.0  19764  4876 pts&#47;1    S+   15:36   0:00 sudo make -j8\nroot      580156  0.0  0.0  19764   748 pts&#47;2    Ss   15:36   0:00 sudo make -j8\nroot      580157  0.0  0.0  11792  2356 pts&#47;2    S+   15:36   0:00 make -j8\nparalle+  621310  0.0  0.0  12120  1844 pts&#47;3    S+   15:38   0:00 grep --color=auto --exclude-dir=.bzr --exclude-dir=CVS --exclude-dir=.git --exclude-dir=.hg --exclude-dir=.svn --exclude-dir=.idea --exclude-dir=.tox make","like_count":1,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586478,"discussion_content":"可能是网络问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662255891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2653196,"avatar":"","nickname":"Geek_d47998","note":"","ucode":"F1B1E43C39BBEE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587243,"discussion_content":"我用deepin的时候也是卡在这一步，后来换成Ubuntu20，根据上面那位兄弟的做法换成libpython2-dev就行了，环境虚拟机virtualbox6.1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662902653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395012,"user_name":"吴卫","can_delete":false,"product_type":"c1","uid":3967949,"ip_address":"江苏","ucode":"B876D82A99226A","user_header":"https://static001.geekbang.org/account/avatar/00/3c/8b/cd/942512cf.jpg","comment_is_top":false,"comment_ctime":1729085333,"is_pvip":false,"replies":[{"id":143476,"content":"第二步下载源代码那里，2、4、6、7条代码命令有具体版本号啊～","user_name":"编辑回复","user_name_real":"编辑","uid":1501385,"ctime":1729504928,"ip_address":"北京","comment_id":395012,"utype":2}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"你好，请问你当时使用的riscv-gnu-toolchain是什么版本的？我刚订了你的课程，由于riscv-gnu-toolchain版本更新，所以按照当前的课程指导装不起来。\n","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652713,"discussion_content":"第二步下载源代码那里，2、4、6、7条代码命令有具体版本号啊～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1729504928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366165,"user_name":"gzh4869","can_delete":false,"product_type":"c1","uid":2109213,"ip_address":"黑龙江","ucode":"C7472DB064C3B4","user_header":"https://static001.geekbang.org/account/avatar/00/20/2f/1d/7793e233.jpg","comment_is_top":false,"comment_ctime":1673430630,"is_pvip":false,"replies":[{"id":138734,"content":"试一试～","user_name":"编辑回复","user_name_real":"编辑","uid":1501385,"ctime":1694484814,"ip_address":"北京","comment_id":366165,"utype":2}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"直接sudo apt install gcc-riscv64-unknown-elf 是不是也行","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627728,"discussion_content":"试一试～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694484814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363845,"user_name":"Geekysl17","can_delete":false,"product_type":"c1","uid":2936290,"ip_address":"湖北","ucode":"11F076DEC99B39","user_header":"https://static001.geekbang.org/account/avatar/00/2c/cd/e2/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1670246522,"is_pvip":false,"replies":[{"id":132438,"content":"是不是 网络问题 ","user_name":"作者回复","user_name_real":"编辑","uid":1345199,"ctime":1670897263,"ip_address":"湖北","comment_id":363845,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"请问我在ubuntu20上运行sudo make -j8后为什么出现下面的问题啊，怎么解决呢？\nSubmodule &#39;gcc&#39; (https:&#47;&#47;gcc.gnu.org&#47;git&#47;gcc.git) registered for path &#39;gcc&#39;\nSubmodule &#39;binutils&#39; (https:&#47;&#47;sourceware.org&#47;git&#47;binutils-gdb.git) registered for path &#39;binutils&#39;\nCloning into &#39;&#47;home&#47;ysl&#47;code&#47;OS&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;gcc&#39;...\nSubmodule &#39;newlib&#39; (https:&#47;&#47;sourceware.org&#47;git&#47;newlib-cygwin.git) registered for path &#39;newlib&#39;\nCloning into &#39;&#47;home&#47;ysl&#47;code&#47;OS&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;binutils&#39;...\nCloning into &#39;&#47;home&#47;ysl&#47;code&#47;OS&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;newlib&#39;...\nSubmodule &#39;gdb&#39; (https:&#47;&#47;sourceware.org&#47;git&#47;binutils-gdb.git) registered for path &#39;gdb&#39;\nCloning into &#39;&#47;home&#47;ysl&#47;code&#47;OS&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;gdb&#39;...\nfatal: unable to access &#39;https:&#47;&#47;sourceware.org&#47;git&#47;binutils-gdb.git&#47;&#39;: gnutls_handshake() failed: Error in the pull function.\nfatal: clone of &#39;https:&#47;&#47;sourceware.org&#47;git&#47;binutils-gdb.git&#39; into submodule path &#39;&#47;home&#47;ysl&#47;code&#47;OS&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;binutils&#39; failed\nFailed to clone &#39;binutils&#39;. Retry scheduled\n","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596319,"discussion_content":"是不是 网络问题 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670897263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363194,"user_name":"miraclezhb","can_delete":false,"product_type":"c1","uid":3030196,"ip_address":"湖北","ucode":"E75CCA4A710588","user_header":"https://static001.geekbang.org/account/avatar/00/2e/3c/b4/ca6a958b.jpg","comment_is_top":false,"comment_ctime":1669347843,"is_pvip":false,"replies":[{"id":132464,"content":"安装 库 \nsudo apt-get install git autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf patchutils bc libexpat-dev libglib2.0-dev ninja-build zlib1g-dev pkg-config libboost-all-dev libtool libssl-dev libpixman-1-dev libpython-dev virtualenv libmount-dev libsdl2-dev","user_name":"作者回复","user_name_real":"编辑","uid":1345199,"ctime":1670923009,"ip_address":"湖北","comment_id":363194,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"&#47;home&#47;miraclezhb&#47;projects&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;riscv-gdb&#47;gdb&#47;ada-exp.y: In function ‘int ada_parse(parser_state*)’:\n&#47;home&#47;miraclezhb&#47;projects&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;riscv-gdb&#47;gdb&#47;ada-exp.y:736:15: error: ‘yyin’ was not declared in this scope; did you mean ‘yyrline’?\n  736 |   lexer_init (yyin);  &#47;* (Re-)initialize lexer.  *&#47;\n      |               ^~~~\n      |               yyrline\n&#47;home&#47;miraclezhb&#47;projects&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;riscv-gdb&#47;gdb&#47;ada-exp.y:736:3: error: ‘lexer_init’ was not declared in this scope; did you mean ‘pex_init’?\n  736 |   lexer_init (yyin);  &#47;* (Re-)initialize lexer.  *&#47;\n      |   ^~~~~~~~~~\n      |   pex_init\n\n老师我在编译时一直报这个错误，这个该怎么处理啊？","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596376,"discussion_content":"安装 库 \nsudo apt-get install git autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf patchutils bc libexpat-dev libglib2.0-dev ninja-build zlib1g-dev pkg-config libboost-all-dev libtool libssl-dev libpixman-1-dev libpython-dev virtualenv libmount-dev libsdl2-dev","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670923009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356254,"user_name":"bubble","can_delete":false,"product_type":"c1","uid":1008527,"ip_address":"湖北","ucode":"E1046CC31341D9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/8f/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1662089975,"is_pvip":false,"replies":[{"id":129731,"content":"M1可能不行，我没有试过","user_name":"作者回复","user_name_real":"编辑","uid":1345199,"ctime":1662255860,"ip_address":"湖北","comment_id":356254,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"老师我在M1的环境下用虚拟机折腾，一直编译不过去，我可以用其他环境吗？比如直接在M1的环境下学习","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586476,"discussion_content":"M1可能不行，我没有试过","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662255860,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1071509,"avatar":"https://static001.geekbang.org/account/avatar/00/10/59/95/a164fa5c.jpg","nickname":"soddygo","note":"","ucode":"E1D4D272C95804","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620808,"discussion_content":"m1 Mac下，当前文中的环境，今天可以安装成功，按照官方的步骤来搞的，参考版本：gcc version 12.2.0 (GCC)    ，文档参考官方：参考官方步骤：https://github.com/riscv-collab/riscv-gnu-toolchain\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1686558204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1109522,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ee/12/77ddaeb8.jpg","nickname":"Yabo","note":"","ucode":"D193B6AB9686D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586657,"discussion_content":"M1 下 virtual box 不能用，虚拟机也没法用了，有其他办法吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662426290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"河南","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356081,"user_name":"肖水平","can_delete":false,"product_type":"c1","uid":2312202,"ip_address":"湖北","ucode":"BA5B49AEDF84C7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7mF1Zdh16zKFDsIjV6movCe1vArG6icbr9Bd537NDg7dA6y24LhdC3ypvzqJBW18oGcDeC2yTwDsw/132","comment_is_top":false,"comment_ctime":1661953699,"is_pvip":false,"replies":[{"id":129735,"content":"这是成功了","user_name":"作者回复","user_name_real":"编辑","uid":1345199,"ctime":1662255974,"ip_address":"湖北","comment_id":356081,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100117801,"comment_content":"sean@sean-VirtualBox:&#47;opt&#47;riscv&#47;gcc&#47;bin$ .&#47;riscv64-minicpu-elf-gcc -v\nUsing built-in specs.\nCOLLECT_GCC=.&#47;riscv64-minicpu-elf-gcc\nCOLLECT_LTO_WRAPPER=&#47;opt&#47;riscv&#47;gcc&#47;libexec&#47;gcc&#47;riscv64-minicpu-elf&#47;10.2.0&#47;lto-wrapper\nTarget: riscv64-minicpu-elf\nConfigured with: &#47;home&#47;sean&#47;risc-v&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;riscv-gcc&#47;configure --target=riscv64-minicpu-elf --prefix=&#47;opt&#47;riscv&#47;gcc --disable-shared --disable-threads --enable-languages=c,c++ --with-pkgversion=gca312387ab1 --with-system-zlib --enable-tls --with-newlib --with-sysroot=&#47;opt&#47;riscv&#47;gcc&#47;riscv64-minicpu-elf --with-native-system-header-dir=&#47;include --disable-libmudflap --disable-libssp --disable-libquadmath --disable-libgomp --disable-nls --disable-tm-clone-registry --src=&#47;home&#47;sean&#47;risc-v&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;riscv-gcc --enable-multilib --with-abi=lp64d --with-arch=rv64imafdc --with-tune=rocket --with-isa-spec=2.2 &#39;CFLAGS_FOR_TARGET=-Os   -mcmodel=medlow&#39; &#39;CXXFLAGS_FOR_TARGET=-Os   -mcmodel=medlow&#39;\nThread model: single\nSupported LTO compression algorithms: zlib\ngcc version 10.2.0 (gca312387ab1) \n","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586480,"discussion_content":"这是成功了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662255974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":2312202,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7mF1Zdh16zKFDsIjV6movCe1vArG6icbr9Bd537NDg7dA6y24LhdC3ypvzqJBW18oGcDeC2yTwDsw/132","nickname":"肖水平","note":"","ucode":"BA5B49AEDF84C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":586495,"discussion_content":"成功了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662257884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":586480,"ip_address":"上海","group_id":0},"score":586495,"extra":""},{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":2312202,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7mF1Zdh16zKFDsIjV6movCe1vArG6icbr9Bd537NDg7dA6y24LhdC3ypvzqJBW18oGcDeC2yTwDsw/132","nickname":"肖水平","note":"","ucode":"BA5B49AEDF84C7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586573,"discussion_content":"6666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662347873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":586495,"ip_address":"","group_id":0},"score":586573,"extra":""}]}]},{"had_liked":false,"id":355217,"user_name":"Abcd","can_delete":false,"product_type":"c1","uid":1796908,"ip_address":"湖北","ucode":"274C7487FDDC21","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6b/2c/b27eefc5.jpg","comment_is_top":false,"comment_ctime":1661179828,"is_pvip":false,"replies":[{"id":129446,"content":"嗯 嗯 ","user_name":"作者回复","user_name_real":"编辑","uid":1345199,"ctime":1661677830,"ip_address":"湖北","comment_id":355217,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"以前玩ARM的时候我记得有crosstool_ng?","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585566,"discussion_content":"嗯 嗯 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661677830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355191,"user_name":"bubble","can_delete":false,"product_type":"c1","uid":1008527,"ip_address":"北京","ucode":"E1046CC31341D9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/8f/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1661161960,"is_pvip":false,"replies":[{"id":129255,"content":"对呀～两节课拿下环境搭建","user_name":"编辑回复","user_name_real":"编辑","uid":1501385,"ctime":1661243776,"ip_address":"北京","comment_id":355191,"utype":2}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"开始构建工作环境了呗","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584944,"discussion_content":"对呀～两节课拿下环境搭建","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661243776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396126,"user_name":"LooMou","can_delete":false,"product_type":"c1","uid":2810138,"ip_address":"广东","ucode":"1D09D60A7C69E6","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e1/1a/3c287e37.jpg","comment_is_top":false,"comment_ctime":1733202773,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"window的wsl\nDistributor ID: Ubuntu\nDescription:    Ubuntu 20.04.6 LTS\nRelease:        20.04\nCodename:       focal\n\n我直接 clone github，也可以用 gitee\ngit clone https:&#47;&#47;github.com&#47;riscv&#47;riscv-gnu-toolchain \n我切换到了 2024.04.12-nightly\ngit checkout f133b29\n不用 clone 其他仓库了，直接按步骤继续，编译成功","like_count":0},{"had_liked":false,"id":378636,"user_name":"Hideinsecret","can_delete":false,"product_type":"c1","uid":1510470,"ip_address":"广东","ucode":"EFBAB4E423F054","user_header":"https://static001.geekbang.org/account/avatar/00/17/0c/46/898e0a18.jpg","comment_is_top":false,"comment_ctime":1690517871,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"riscv-binutils-2.35 启动提示链接失败，升级至2.38重新编译后解决问题","like_count":0},{"had_liked":false,"id":372632,"user_name":"。。。","can_delete":false,"product_type":"c1","uid":3598692,"ip_address":"浙江","ucode":"7785608AEF5646","user_header":"https://static001.geekbang.org/account/avatar/00/36/e9/64/4c721f25.jpg","comment_is_top":false,"comment_ctime":1681369952,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"make[2]: Leaving directory &#39;&#47;home&#47;len&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;build-gdb-newlib&#39;\nmake[1]: *** [Makefile:1000: all] Error 2\nmake[1]: Leaving directory &#39;&#47;home&#47;len&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;build-gdb-newlib&#39;\nmake: *** [Makefile:549: stamps&#47;build-gdb-newlib] Error 2\n请问老师这是为什么呢","like_count":0},{"had_liked":false,"id":365729,"user_name":"gzh4869","can_delete":false,"product_type":"c1","uid":2109213,"ip_address":"黑龙江","ucode":"C7472DB064C3B4","user_header":"https://static001.geekbang.org/account/avatar/00/20/2f/1d/7793e233.jpg","comment_is_top":false,"comment_ctime":1672932838,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"我在执行sudo make -j8命令的时候出现这个错误是为啥啊，有大佬能解答下不\nmake: *** No rule to make target &#39;&#47;root&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;gcc&#39;, needed by &#39;stamps&#47;build-gcc-newlib-stage2&#39;.  Stop.\n","like_count":0},{"had_liked":false,"id":365298,"user_name":"l6v3～風","can_delete":false,"product_type":"c1","uid":3249010,"ip_address":"广东","ucode":"09F901782D400A","user_header":"https://static001.geekbang.org/account/avatar/00/31/93/72/5e297fdb.jpg","comment_is_top":false,"comment_ctime":1672329128,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"编译工具链出现以下错误如何解决：\nfatal: unable to access &#39;https:&#47;&#47;sourceware.org&#47;git&#47;binutils-gdb.git&#47;&#39;: server certificate verification failed. CAfile: &#47;etc&#47;ssl&#47;certs&#47;ca-certificates.crt CRLfile: none\nfatal: 无法克隆 &#39;https:&#47;&#47;sourceware.org&#47;git&#47;binutils-gdb.git&#39; 到子模组路径 &#39;binutils&#39;\nMakefile:282: recipe for target &#39;&#47;home&#47;patrick&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;binutils&#47;.git&#39; failed\nmake: *** [&#47;home&#47;patrick&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;binutils&#47;.git] Error 128\nmake: *** 正在等待未完成的任务....\nfatal: unable to access &#39;https:&#47;&#47;sourceware.org&#47;git&#47;newlib-cygwin.git&#47;&#39;: server certificate verification failed. CAfile: &#47;etc&#47;ssl&#47;certs&#47;ca-certificates.crt CRLfile: none\nfatal: 无法克隆 &#39;https:&#47;&#47;sourceware.org&#47;git&#47;newlib-cygwin.git&#39; 到子模组路径 &#39;newlib&#39;\nMakefile:282: recipe for target &#39;&#47;home&#47;patrick&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;newlib&#47;.git&#39; failed\nmake: *** [&#47;home&#47;patrick&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;newlib&#47;.git] Error 128\nfatal: unable to access &#39;https:&#47;&#47;gcc.gnu.org&#47;git&#47;gcc.git&#47;&#39;: server certificate verification failed. CAfile: &#47;etc&#47;ssl&#47;certs&#47;ca-certificates.crt CRLfile: none\nfatal: 无法克隆 &#39;https:&#47;&#47;gcc.gnu.org&#47;git&#47;gcc.git&#39; 到子模组路径 &#39;gcc&#39;\nMakefile:282: recipe for target &#39;&#47;home&#47;patrick&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;gcc&#47;.git&#39; failed\nmake: *** [&#47;home&#47;patrick&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;gcc&#47;.git] Error 128\nfatal: unable to access &#39;https:&#47;&#47;sourceware.org&#47;git&#47;binutils-gdb.git&#47;&#39;: server certificate verification failed. CAfile: &#47;etc&#47;ssl&#47;certs&#47;ca-certificates.crt CRLfile: none\nfatal: 无法克隆 &#39;https:&#47;&#47;sourceware.org&#47;git&#47;binutils-gdb.git&#39; 到子模组路径 &#39;gdb&#39;\nMakefile:282: recipe for target &#39;&#47;home&#47;patrick&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;gdb&#47;.git&#39; failed\nmake: *** [&#47;home&#47;patrick&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;gdb&#47;.git] Error 128\n","like_count":0,"discussions":[{"author":{"id":3692310,"avatar":"https://static001.geekbang.org/account/avatar/00/38/57/16/49361638.jpg","nickname":"小彭立志手写系统","note":"","ucode":"A6E53130320293","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627610,"discussion_content":"网络问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694336569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖南","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365295,"user_name":"l6v3～風","can_delete":false,"product_type":"c1","uid":3249010,"ip_address":"广东","ucode":"09F901782D400A","user_header":"https://static001.geekbang.org/account/avatar/00/31/93/72/5e297fdb.jpg","comment_is_top":false,"comment_ctime":1672326182,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100117801,"comment_content":"第四步编译工具链sudo make -j8显示make: *** No rule to make target &#39;&#47;home&#47;patrick&#47;RISCV_TOOLS&#47;riscv-gnu-toolchain&#47;build&#47;..&#47;gcc&#39;, needed by &#39;stamps&#47;build-gcc-newlib-stage2&#39;","like_count":0,"discussions":[{"author":{"id":2109213,"avatar":"https://static001.geekbang.org/account/avatar/00/20/2f/1d/7793e233.jpg","nickname":"gzh4869","note":"","ucode":"C7472DB064C3B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598602,"discussion_content":"我也是这个问题，老哥解决了么\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672932947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"黑龙江","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1102860,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d4/0c/4decd1aa.jpg","nickname":"氢原子","note":"","ucode":"13F32E1229C0D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2109213,"avatar":"https://static001.geekbang.org/account/avatar/00/20/2f/1d/7793e233.jpg","nickname":"gzh4869","note":"","ucode":"C7472DB064C3B4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628509,"discussion_content":"楼上给出解决方案了，指定仓库目录就行了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695389026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":598602,"ip_address":"中国台湾","group_id":0},"score":628509,"extra":""}]}]}]}