{"id":717796,"title":"06 | Function Callingï¼šè®©GPTå­¦ä¼šä½¿ç”¨å·¥å…·","content":"<p>ç”±äºopenai 11æœˆ6æ—¥å‘å¸ƒçš„æ–°çš„API  v1.0.0, ä¸å…¼å®¹ä»¥å‰çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥è¯¾ç¨‹ä»£ç ä¼šåšä¸€å®šçš„æ›´æ–°ã€‚è€å¸ˆå·²ç»æ›´æ–°äº†éƒ¨åˆ†ç« èŠ‚çš„å…¸å‹ä»£ç ï¼Œ<br>\né“¾æ¥å¦‚ä¸‹ï¼ˆä¸¤ä¸ªé“¾æ¥éƒ½å¯ä»¥ï¼Œå›½å†…ç”¨æˆ·æ¨èç¬¬äºŒä¸ªï¼‰ï¼š</p><p><a href=\"https://github.com/chaocai2001/gpt_in_practice_v1\">https://github.com/chaocai2001/gpt_in_practice_v1</a></p><p><a href=\"https://gitee.com/chao-superman/llm_in_practice_v1\">https://gitee.com/chao-superman/llm_in_practice_v1</a></p><p>å…¶ä»–éƒ¨åˆ†å­¦å‘˜å¯ä»¥å‚è€ƒä¿®æ”¹ã€‚è€å¸ˆä¹Ÿä¼šåœ¨è¿‘æœŸé™†ç»­æ›´æ–°ä»£ç ã€‚</p>","comments":[{"had_liked":false,"id":382658,"user_name":"Revive","can_delete":false,"product_type":"c3","uid":3733027,"ip_address":"æ¹–å—","ucode":"AE9B0E531D5571","user_header":"https://static001.geekbang.org/account/avatar/00/38/f6/23/10ccfe80.jpg","comment_is_top":false,"comment_ctime":1697765525,"is_pvip":false,"replies":[{"id":139375,"content":"å¯¹çš„ï¼Œç”±GPTæ¥åˆ¤æ–­ï¼Œæ˜¯æ ¹æ®è¦è§£å†³çš„é—®é¢˜åŠæ–¹æ³•çš„æè¿°æ¥å†³å®šçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1008262,"ctime":1697774329,"ip_address":"åŒ—äº¬","comment_id":382658,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"è€å¸ˆï¼Œè¯·é—®åœ¨è¾“å…¥é—®é¢˜å‘èµ·è¯·æ±‚åï¼Œâ€åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨æ–¹æ³•â€œè¿™ä¸€æ­¥éª¤æ˜¯ç”±gptæ¥åˆ¤æ–­å—ï¼Œå®ƒæ˜¯åŸºäºä»€ä¹ˆä¿¡æ¯æ¥åˆ¤æ–­çš„ï¼Œåˆæ˜¯æ ¹æ®ä»€ä¹ˆæ¶ˆæ¯æ¥åˆ¤æ–­ä½¿ç”¨å“ªä¸€ä¸ªæ–¹æ³•ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629898,"discussion_content":"å¯¹çš„ï¼Œç”±GPTæ¥åˆ¤æ–­ï¼Œæ˜¯æ ¹æ®è¦è§£å†³çš„é—®é¢˜åŠæ–¹æ³•çš„æè¿°æ¥å†³å®šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697774329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008312,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/b8/0e1b655e.jpg","nickname":"fireshort","note":"","ucode":"10550CA9C6C730","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629910,"discussion_content":"è§†é¢‘ä¸­çš„ä¾‹å­æ²¡ä½“ç°å‡ºgptçš„åˆ¤æ–­ï¼Œè§†é¢‘ä¸­çš„ä¾‹å­gptè‚¯å®šè¦è°ƒç”¨é‚£ä¸ªå‡½æ•°æ¥æŸ¥è¯¢é›†ç¾¤çš„çŠ¶æ€çš„ï¼Œé‚£è¿˜ä¸å¦‚ä¸€å¼€å§‹å°±è°ƒç”¨å‡½æ•°è·å–ç»“æœï¼Œç„¶åè®©gptç»™å»ºè®®ï¼Ÿ\n\nè”¡è€å¸ˆèƒ½ä¸¾å…¶ä»–çš„ä¾‹å­æ¥è®©gptåˆ¤æ–­æ˜¯å¦è¦è°ƒç”¨å‡½æ•°å—ï¼Ÿå°±æ˜¯å¯èƒ½è¦ã€å¯èƒ½ä¸è¦è°ƒç”¨å‡½æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697788837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382617,"user_name":"æˆ‘çš„åº·åº·","can_delete":false,"product_type":"c3","uid":1501436,"ip_address":"å±±ä¸œ","ucode":"E7E2C969A91F8C","user_header":"https://static001.geekbang.org/account/avatar/00/16/e8/fc/4d84560f.jpg","comment_is_top":false,"comment_ctime":1697683542,"is_pvip":false,"replies":[{"id":139345,"content":"è°¢è°¢ä½ çš„è®¤å¯ğŸ™","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1008262,"ctime":1697693165,"ip_address":"åŒ—äº¬","comment_id":382617,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"æ„Ÿè°¢è€å¸ˆè”¡è€å¸ˆ å—åˆ°çš„å¯å‘å¾ˆå¤§","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629826,"discussion_content":"è°¢è°¢ä½ çš„è®¤å¯ğŸ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697693165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385843,"user_name":"Geek_2a62e6","can_delete":false,"product_type":"c3","uid":2984983,"ip_address":"å¹¿ä¸œ","ucode":"5FE561C0AF2DF0","user_header":"","comment_is_top":false,"comment_ctime":1703497955,"is_pvip":false,"replies":[{"id":140636,"content":"æˆ‘æš‚æ—¶è¿˜æ²¡æœ‰ç”¨è¿‡ç™¾åº¦çš„æ¨¡å‹ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æ¨¡å‹æˆ–è€…apiä¸Šæ”¯æŒçš„å·®å¼‚ï¼Œå¯ä»¥è¯¢é—®ä¸€ä¸‹ç™¾åº¦çš„æ”¯æŒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1008262,"ctime":1703634561,"ip_address":"åŒ—äº¬","comment_id":385843,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"è®¾ç½®äº†func call  ï¼Œå¤§æ¨¡å‹ä¸€ç›´éƒ½ä¸è°ƒç”¨ï¼Œæ˜¯æ¨¡å‹çš„é—®é¢˜å—ï¼Ÿ æˆ‘ç”¨çš„æ˜¯ç™¾åº¦çš„å¤§æ¨¡å‹erniebot","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634538,"discussion_content":"æˆ‘æš‚æ—¶è¿˜æ²¡æœ‰ç”¨è¿‡ç™¾åº¦çš„æ¨¡å‹ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æ¨¡å‹æˆ–è€…apiä¸Šæ”¯æŒçš„å·®å¼‚ï¼Œå¯ä»¥è¯¢é—®ä¸€ä¸‹ç™¾åº¦çš„æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703634561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384715,"user_name":"é˜¿æ¯…","can_delete":false,"product_type":"c3","uid":1126482,"ip_address":"åŒ—äº¬","ucode":"5B006F905A1FDE","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/52/7880dcf0.jpg","comment_is_top":false,"comment_ctime":1701390200,"is_pvip":false,"replies":[{"id":140297,"content":"è°¢è°¢ä½ çš„è®¤å¯ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1008262,"ctime":1701400296,"ip_address":"åŒ—äº¬","comment_id":384715,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œæ›´æ·±å…¥äº†è§£GPTï¼","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632824,"discussion_content":"è°¢è°¢ä½ çš„è®¤å¯ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1701400297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386859,"user_name":"åˆ˜ç¨¹","can_delete":false,"product_type":"c3","uid":1061398,"ip_address":"ç¾å›½","ucode":"04E72146C6E68D","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/16/ea9c3cb2.jpg","comment_is_top":false,"comment_ctime":1705726853,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"1. æŠŠä¹‹å‰ä¸€èŠ‚è¯¾å­¦ä¹ çš„æœç´¢æ–¹æ³•copyè¿‡æ¥\n2. funcsé‡Œå¢åŠ search_by_googleçš„å‡½æ•°å®šä¹‰\n3.åœ¨run_conversationä¸­çš„responseé‡Œçš„functionså¢åŠ ä¸€ä¸‹å†…å®¹\n{\n                &quot;name&quot;:&quot;search_by_google&quot;,\n                &quot;description&quot;:&quot;Search keyword, worlds, or sentence on the Google search engine to get resrult&quot;,\n                &quot;parameters&quot;:{\n                    &quot;type&quot;:&quot;object&quot;,\n                    &quot;properties&quot;:{\n                        &quot;question&quot;:{\n                            &quot;type&quot;:&quot;string&quot;,\n                            &quot;description&quot;:&quot;the name of the cluster&quot;,\n                        },\n                    },\n                    &quot;required&quot;:[&quot;question&quot;],\n                }\n            }\nè¿™æ ·åŸºäºè€å¸ˆè¯¾å ‚çš„ä¾‹å­å°±å¯ä»¥æ‰©å±•æ”¯æŒä»googleæœç´¢å†…å®¹ã€‚\nprint(run(&quot;å¸®æˆ‘æŸ¥ä¸€ä¸‹å¯å£å¯ä¹æ˜¯ä»€ä¹ˆæ—¶å€™æˆç«‹çš„&quot;)) &#47;&#47;æ‰§è¡Œè¯¥å¥å­\n\nä¸‹é¢å¾—åˆ°ç»“æœ\n========\n-----message------\nChatCompletionMessage(content=None, role=&#39;assistant&#39;, function_call=FunctionCall(arguments=&#39;{\\n  &quot;question&quot;: &quot;å¯å£å¯ä¹æˆç«‹æ—¶é—´&quot;\\n}&#39;, name=&#39;search_by_google&#39;), tool_calls=None)\n-----message------\n{&#39;question&#39;: &#39;å¯å£å¯ä¹æˆç«‹æ—¶é—´&#39;}\n-----message------\nChatCompletionMessage(content=&#39;å¯å£å¯ä¹æ˜¯åœ¨1892å¹´æˆç«‹çš„ã€‚&#39;, role=&#39;assistant&#39;, function_call=None, tool_calls=None)\n-----message------\nå¯å£å¯ä¹æ˜¯åœ¨1892å¹´æˆç«‹çš„ã€‚\n\nè¿™ä¸ªä¾‹å­çœŸçš„æ˜¯éœ‡æƒŠäº†ã€‚å¯¹äºå…¬å¸å†…éƒ¨çš„ç®¡ç†ç³»ç»Ÿï¼Œå¯ä»¥åˆ©ç”¨è¿™ç§æ¨¡å¼å¼€å‘ä¸€å¥—è‡ªç„¶è¯­è¨€çš„äº¤äº’è½¯ä»¶ã€‚ æ„Ÿè°¢è€å¸ˆ","like_count":0}]}