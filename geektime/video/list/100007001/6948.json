{"id":6948,"title":"08 |【实验】授权码模式授权服务器","content":"无","comments":[{"had_liked":false,"id":7772,"user_name":"johnhuhu","can_delete":false,"product_type":"c3","uid":1002835,"ip_address":"","ucode":"AD4DD9448543F0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/53/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1525709831,"is_pvip":false,"replies":[{"id":2753,"content":"嗯，理解了OAuth2的原理，还有spring security oauth2的基本用法，就能进行生产级研发和布署。企业生产做法很复杂，而且有些做法也不是通用标准做法，各家玩法五花八门，OAuth2则是业界沉淀下来的标准规范。课程后继有部分生产级微服安全架构和实践相关内容，还会介绍一些生产级的开源产品。另外后继作者还会推出一些授权认证相关的生产级实践的文章，会给你更新。谢谢你的反馈🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526652975,"ip_address":"","comment_id":7772,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，lab太简单了吧，重复说生产环境不这样做，那我花时间上实战课有什么用呢，只是辅助理解概念的demo，希望老师后期上些真正的实战课程，而不是概念demo演示课程。","like_count":49,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417475,"discussion_content":"嗯，理解了OAuth2的原理，还有spring security oauth2的基本用法，就能进行生产级研发和布署。企业生产做法很复杂，而且有些做法也不是通用标准做法，各家玩法五花八门，OAuth2则是业界沉淀下来的标准规范。课程后继有部分生产级微服安全架构和实践相关内容，还会介绍一些生产级的开源产品。另外后继作者还会推出一些授权认证相关的生产级实践的文章，会给你更新。谢谢你的反馈🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526652975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1108958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/de/b0cfc4a6.jpg","nickname":"干脆面君","note":"","ucode":"2E220B400D4F96","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43064,"discussion_content":"众口难调。😃😃😃😃","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572849452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1133837,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/fIuMtI2aZwsVrBccWt9vuicgRM6Pt98XjHMMVjYKrbN9mFY9HhTUqVotDkysUeJ9FuMfw3JQRgNvJL6P6u5XkbA/132","nickname":"Geek_i7ojfm","note":"","ucode":"BCF8C43F9039E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/de/b0cfc4a6.jpg","nickname":"干脆面君","note":"","ucode":"2E220B400D4F96","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278164,"discussion_content":"这是真到简单，看csdn文章也一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591157896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":43064,"ip_address":"","group_id":0},"score":278164,"extra":""}]}]},{"had_liked":false,"id":8396,"user_name":"远芳墨","can_delete":false,"product_type":"c3","uid":1059912,"ip_address":"","ucode":"12879A8BD01650","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/48/8439fa5d.jpg","comment_is_top":false,"comment_ctime":1526176388,"is_pvip":false,"replies":[{"id":2752,"content":"嗯，理解了OAuth2的原理，还有spring security oauth2的基本用法，就能进行生产级研发和布署。企业生产做法很复杂，而且有些做法也不是通用标准做法，各家玩法五花八门，OAuth2则是业界沉淀下来的标准规范。课程后继有部分生产级微服安全架构和实践相关内容，还会介绍一些生产级的开源产品。另外后继作者还会推出一些授权认证相关的生产级实践的文章，会给你更新。谢谢你的反馈🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526652919,"ip_address":"","comment_id":8396,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"希望老师能讲解真实的生产环境的做法，我们需要您生产环境的经验，这样才能让我们觉得这个课程是值得学习的","like_count":14,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417696,"discussion_content":"嗯，理解了OAuth2的原理，还有spring security oauth2的基本用法，就能进行生产级研发和布署。企业生产做法很复杂，而且有些做法也不是通用标准做法，各家玩法五花八门，OAuth2则是业界沉淀下来的标准规范。课程后继有部分生产级微服安全架构和实践相关内容，还会介绍一些生产级的开源产品。另外后继作者还会推出一些授权认证相关的生产级实践的文章，会给你更新。谢谢你的反馈🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526652919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8948,"user_name":"Oditto","can_delete":false,"product_type":"c3","uid":1094078,"ip_address":"","ucode":"7B509A0E0B2579","user_header":"https://static001.geekbang.org/account/avatar/00/10/b1/be/cb4dae49.jpg","comment_is_top":false,"comment_ctime":1526533704,"is_pvip":false,"replies":[{"id":2747,"content":"嗯，本课是先基于spring cloud oauth，用简单实验讲解原理，课程后面会介绍一些生产级开源产品，有其它语言的。当然你的建议很好，我后面准备推出如何从零构建授权服务器的文章，会给你更新。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526651299,"ip_address":"","comment_id":8948,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"开发后台不是用Java的怎么整？ 如果是实验不应该根据原理从零开始搭建吗？或者就讲生产实践经验。 现在这样的实验模拟就是针对作者写的代码的一个文档说明，真没啥收获。","like_count":7,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417916,"discussion_content":"嗯，本课是先基于spring cloud oauth，用简单实验讲解原理，课程后面会介绍一些生产级开源产品，有其它语言的。当然你的建议很好，我后面准备推出如何从零构建授权服务器的文章，会给你更新。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526651299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087348,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/74/49d150d7.jpg","nickname":"发光如星","note":"","ucode":"1176C2EB6CC401","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4109,"discussion_content":"真没看到架构师波波老师所谓的原理在哪呢，每节课只是念完代码就完了，代码也不细讲，生产不适用的地方也不说举个例子生产怎么用，说后边讲，那你实验纯粹为了实验？？？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1565140162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9347,"user_name":"马里奥的马里奥","can_delete":false,"product_type":"c3","uid":1048423,"ip_address":"","ucode":"6848D9E82B58E3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ff/67/6ffe3a52.jpg","comment_is_top":false,"comment_ctime":1526806220,"is_pvip":false,"replies":[{"id":2849,"content":"谢谢建议，问题1已经反馈极客时间，问题2中demo主要考虑一些入门级学习者，后继在综合案例部分还会增加实战内容，另外还会陆续推出实战文章。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526912569,"ip_address":"","comment_id":9347,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"有两个建议\n1.老师的讲解速度稍微缓慢一点\n2.老师可以直接分享和线上环境直接有关的知识，如果只是demo，也很难去理解实际中应用场景","like_count":4,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418039,"discussion_content":"谢谢建议，问题1已经反馈极客时间，问题2中demo主要考虑一些入门级学习者，后继在综合案例部分还会增加实战内容，另外还会陆续推出实战文章。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526912569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24434,"user_name":"大维","can_delete":false,"product_type":"c3","uid":1129620,"ip_address":"","ucode":"5FEAF1F0B48876","user_header":"https://static001.geekbang.org/account/avatar/00/11/3c/94/932231c2.jpg","comment_is_top":false,"comment_ctime":1537000486,"is_pvip":false,"replies":[{"id":9643,"content":"在这个实验中，授权服务器和资源服务器住在一起，授权服务器使用内存模式，那么资源服务器也是使用内存去比对校验令牌的。如果两者不住在一起，使用数据库存储，那么资源服务器可以去数据库比对校验令牌，也可以通过授权服务器提供的校验端点比对校验令牌。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1537680633,"ip_address":"","comment_id":24434,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"请问资源服务器是如何验证tocken的？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423982,"discussion_content":"在这个实验中，授权服务器和资源服务器住在一起，授权服务器使用内存模式，那么资源服务器也是使用内存去比对校验令牌的。如果两者不住在一起，使用数据库存储，那么资源服务器可以去数据库比对校验令牌，也可以通过授权服务器提供的校验端点比对校验令牌。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537680633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205707,"user_name":"Geek_b10fc2","can_delete":false,"product_type":"c3","uid":1961785,"ip_address":"","ucode":"D033C850CF4B8A","user_header":"","comment_is_top":false,"comment_ctime":1586705208,"is_pvip":false,"replies":[{"id":76948,"content":"请参考网上案例或官方文档(注意使用spring security 5版本)：\n\nhttps:&#47;&#47;www.devglan.com&#47;spring-security&#47;spring-security-oauth2-user-registration\n\nhttps:&#47;&#47;docs.spring.io&#47;spring-security&#47;site&#47;docs&#47;5.0.7.RELEASE&#47;reference&#47;html&#47;oauth2login-advanced.html#oauth2login-advanced-login-page\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1586778178,"ip_address":"","comment_id":205707,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"想问下OAuth的认证登录页面   怎么实现自定义呢？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491565,"discussion_content":"请参考网上案例或官方文档(注意使用spring security 5版本)：\n\nhttps://www.devglan.com/spring-security/spring-security-oauth2-user-registration\n\nhttps://docs.spring.io/spring-security/site/docs/5.0.7.RELEASE/reference/html/oauth2login-advanced.html#oauth2login-advanced-login-page\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586778178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":198690,"user_name":"　　　　　　　鸟人","can_delete":false,"product_type":"c3","uid":1035165,"ip_address":"","ucode":"E504B22F336035","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/9d/2bc85843.jpg","comment_is_top":false,"comment_ctime":1585464121,"is_pvip":false,"replies":[{"id":75275,"content":"实验是让你理解原理的，理解了原理之后，实际生产应用你要根据场景判断具体使用哪种模式，同时还要考虑很多生产环节需求(性能&#47;高可用&#47;安全等)。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585750737,"ip_address":"","comment_id":198690,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"请问老师能说说到底生产与实验 有什么区别 那些不能像实验那样做的呢？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489742,"discussion_content":"实验是让你理解原理的，理解了原理之后，实际生产应用你要根据场景判断具体使用哪种模式，同时还要考虑很多生产环节需求(性能/高可用/安全等)。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585750737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194145,"user_name":"周达","can_delete":false,"product_type":"c3","uid":1885619,"ip_address":"","ucode":"44E2B397631DB4","user_header":"","comment_is_top":false,"comment_ctime":1585030903,"is_pvip":false,"replies":[{"id":74055,"content":"https:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6749#section-4.4\n根据RFC6749，4种授权模式中，授权码模式和用户名&#47;密码模式都是可以支持refresh token的，但这两种模式也需要用户先认证以后才能拿到acess token和可选的refresh token。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585059552,"ip_address":"","comment_id":194145,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"请问不希望出现登录认证，但又希望支持refresh token，应该哪种鉴权模式","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488769,"discussion_content":"https://tools.ietf.org/html/rfc6749#section-4.4\n根据RFC6749，4种授权模式中，授权码模式和用户名/密码模式都是可以支持refresh token的，但这两种模式也需要用户先认证以后才能拿到acess token和可选的refresh token。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585059552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":12154,"user_name":"zhaoni","can_delete":false,"product_type":"c3","uid":1052158,"ip_address":"","ucode":"F317ECD6380984","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqT1ykjFve5LCsFvegqLb8MKrf6ASApsOgm8nRb5icDE7MgzKbia0zUQkxe44tKvpCwQ65QuHo4NVoQ/132","comment_is_top":false,"comment_ctime":1528624172,"is_pvip":false,"replies":[{"id":3998,"content":"机器对机器，使用客户端凭证模式，不经过登陆验页，客户端直接通过提供clientid+secret获取令牌","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1528644449,"ip_address":"","comment_id":12154,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"spring securtity默认有个登陆验证页面，但如果这个请求授权码的是从服务器端直接发起，不希望有这个登陆验证，波波，请问是在哪里配置？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419139,"discussion_content":"机器对机器，使用客户端凭证模式，不经过登陆验页，客户端直接通过提供clientid+secret获取令牌","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528644449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282300,"user_name":"肖立智","can_delete":false,"product_type":"c3","uid":2277773,"ip_address":"","ucode":"9DAF54CB38DB72","user_header":"","comment_is_top":false,"comment_ctime":1615190747,"is_pvip":false,"replies":[{"id":102737,"content":"可以关注我的B站空间：\nhttps:&#47;&#47;space.bilibili.com&#47;518029478\n今年应该会补充相关实战内容。\n\n你也可以提前参考这项目：\nhttps:&#47;&#47;github.com&#47;BookmarksDev&#47;bookmarks.dev\n一个前后分离项目，认证授权基于OAuth2，采用keycloak服务器实现。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1615642508,"ip_address":"","comment_id":282300,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，前面很多人反应说demo太简单了，您作出的解释是后续有实战的相关内容，我搜了您的名字并没有找到其他相关的spring security OAuth2的生产教程呢。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516692,"discussion_content":"可以关注我的B站空间：\nhttps://space.bilibili.com/518029478\n今年应该会补充相关实战内容。\n\n你也可以提前参考这项目：\nhttps://github.com/BookmarksDev/bookmarks.dev\n一个前后分离项目，认证授权基于OAuth2，采用keycloak服务器实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615642508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280833,"user_name":"Chandler","can_delete":false,"product_type":"c3","uid":1440896,"ip_address":"","ucode":"A6D97CFF01FF70","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/80/4d1369bc.jpg","comment_is_top":false,"comment_ctime":1614413567,"is_pvip":false,"replies":[{"id":102211,"content":"先理解基本原理和流程，然后在生产实践中根据不同的业务场景灵活应用。场景千差万别，原理是根本。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1614786706,"ip_address":"","comment_id":280833,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"谢谢老师分享！我觉得挺好的，先从demo入手把原理和流程讲清楚。至于生产的实现方式或者生产的问题，大家各有不同。总要发挥点各家开发团队的自主性，什么都拿来主义，还有啥意思","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516221,"discussion_content":"先理解基本原理和流程，然后在生产实践中根据不同的业务场景灵活应用。场景千差万别，原理是根本。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614786706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192063,"user_name":"陈培建","can_delete":false,"product_type":"c3","uid":1006797,"ip_address":"","ucode":"9600E97F1F41FD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/cd/e272d793.jpg","comment_is_top":false,"comment_ctime":1584835637,"is_pvip":false,"replies":[{"id":74355,"content":"我在本地再做了这个实验，没有问题，这个实验很多学员做过，都是可以通过的。你那边有可能是环境问题，建议换一台机器尝试一下。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585232244,"ip_address":"","comment_id":192063,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"http:&#47;&#47;localhost:8080&#47;oauth&#47;authorize?client_id=clientapp\u001aredirect_uri=http:&#47;&#47;localhost:9001&#47;callback\u001aresponse_type=code\u001ascope=read_userinfo \n上面url登陆成功后没有出现授权页面,状态码是401","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488318,"discussion_content":"我在本地再做了这个实验，没有问题，这个实验很多学员做过，都是可以通过的。你那边有可能是环境问题，建议换一台机器尝试一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585232244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389237,"discussion_content":"应该是 Auth 那块没设置吧：Basic Auth，然后用户名和密码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629188089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171644,"user_name":"Jackson","can_delete":false,"product_type":"c3","uid":1597194,"ip_address":"","ucode":"B4EDD34D58E814","user_header":"https://static001.geekbang.org/account/avatar/00/18/5f/0a/705afc35.jpg","comment_is_top":false,"comment_ctime":1578985786,"is_pvip":false,"replies":[{"id":66593,"content":"这个错误是说：redirect_uri只适用于简化和授权码模式，如果你用用户名&#47;密码模式，则不需要redirect_uri。\n\n关于oauth2的协议参数需求，可以看官方RFC6749文档：https:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6749#section-4\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1579004889,"ip_address":"","comment_id":171644,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"请问，几种模式下，在统一认证中心都需要配置.redirectUris吗？如何不配置这个也可以呢？\n@Override\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n        clients.inMemory()\n                .withClient(&quot;admin-web&quot;)\n                .secret(passwordEncoder.encode(&quot;admin-web-123&quot;))\n                .accessTokenValiditySeconds(3600)\n                .refreshTokenValiditySeconds(864000)&#47;&#47;配置刷新token的有效期\n                .autoApprove(true) &#47;&#47;自动授权配置\n                .scopes(&quot;all&quot;)&#47;&#47;配置申请的权限范围\n                .authorizedGrantTypes(&quot;password&quot;, &quot;refresh_token&quot;)&#47;&#47;配置授权模式：密码模式\n                &#47;&#47;.redirectUris(&quot;http:&#47;&#47;localhost:2001&#47;login&quot;)&#47;&#47;授权码模式开启后必须指定\n                .and()\n                .withClient(&quot;order-service&quot;)\n                .secret(passwordEncoder.encode(&quot;order-service-123&quot;))\n                .accessTokenValiditySeconds(3600)\n                .refreshTokenValiditySeconds(864000)&#47;&#47;配置刷新token的有效期\n                .autoApprove(true) &#47;&#47;自动授权配置\n                .scopes(&quot;all&quot;)\n                &#47;&#47;.authorizedGrantTypes(&quot;authorization_code&quot;, &quot;password&quot;, &quot;refresh_token&quot;)&#47;&#47;配置授权模式：authorization_code授权码模式、密码模式\n                .authorizedGrantTypes(&quot;password&quot;, &quot;refresh_token&quot;)&#47;&#47;配置授权模式：密码模式\n                &#47;&#47;.redirectUris(&quot;http:&#47;&#47;localhost:2003&#47;login&quot;)&#47;&#47;授权码模式开启后必须指定\n                ;\n    }\n\n我的配置是这样的，但是一旦注释掉&#47;&#47;redirectUris这行，则会报错:\nerror=&quot;invalid_grant&quot;, error_description=&quot;A redirect_uri can only be used by implicit or authorization_code grant types.&quot;","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481450,"discussion_content":"这个错误是说：redirect_uri只适用于简化和授权码模式，如果你用用户名/密码模式，则不需要redirect_uri。\n\n关于oauth2的协议参数需求，可以看官方RFC6749文档：https://tools.ietf.org/html/rfc6749#section-4\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579004889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131471,"user_name":"Geek_ae71f1","can_delete":false,"product_type":"c3","uid":1654538,"ip_address":"","ucode":"CF2E64150F8917","user_header":"","comment_is_top":false,"comment_ctime":1567759896,"is_pvip":false,"replies":[{"id":49883,"content":"获取令牌操作需要带上正确的clientId&#47;secret，使用http用户名密法方式认证，\ncurl -X POST --user clientapp:112233 ...\n\n请确认，而且和服务器端设置匹配一致。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1567774547,"ip_address":"","comment_id":131471,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"老师好，我用的是授权码模式，获取授权code成功，按照步骤在postman用code换取token报错，{&quot;timestamp&quot;:1567759824315,&quot;status&quot;:401,&quot;error&quot;:&quot;Unauthorized&quot;,&quot;message&quot;:&quot;Bad credentials&quot;,&quot;path&quot;:&quot;&#47;oauth2&#47;token&quot;}，操作都是按照说明来的","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466470,"discussion_content":"获取令牌操作需要带上正确的clientId/secret，使用http用户名密法方式认证，\ncurl -X POST --user clientapp:112233 ...\n\n请确认，而且和服务器端设置匹配一致。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567774547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116822,"user_name":"乐凡","can_delete":false,"product_type":"c3","uid":1239260,"ip_address":"","ucode":"918C9997EB6537","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/dc/32e78f02.jpg","comment_is_top":false,"comment_ctime":1563929776,"is_pvip":false,"replies":[{"id":42825,"content":"这个错误提示你请求传过去的redirect uri和服务器端配置的uri不一致，看看是否配置错了。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1563973276,"ip_address":"","comment_id":116822,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"老师好，为什么我这边按照你的步骤调用最后返回的是\n{\n    &quot;error&quot;: &quot;invalid_grant&quot;,\n    &quot;error_description&quot;: &quot;Redirect URI mismatch.&quot;\n}，","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459696,"discussion_content":"这个错误提示你请求传过去的redirect uri和服务器端配置的uri不一致，看看是否配置错了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563973276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101208,"user_name":"Alpha","can_delete":false,"product_type":"c3","uid":1001861,"ip_address":"","ucode":"60CA15A25EC796","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/85/3f161d95.jpg","comment_is_top":false,"comment_ctime":1559741509,"is_pvip":false,"replies":[{"id":36635,"content":"提示用户认证没有成功，获取授权码前必须经过用户认证的，你看看这步是否正确，用户名密码配置是否有误，输入是否正确。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1559913922,"ip_address":"","comment_id":101208,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"自己尝试试验，第一步访问`&#47;oauth&#47;authorize`端点报错 InsufficientAuthenticationException；搜了一圈还是没能解决，有人遇到过类似情况吗？（spring boot版本 2.1.5.RELEASE）\n```\norg.springframework.security.authentication.InsufficientAuthenticationException: User must be authenticated with Spring Security before authorization can be completed.\n\tat org.springframework.security.oauth2.provider.endpoint.AuthorizationEndpoint.authorize(AuthorizationEndpoint.java:143) ~[spring-security-oauth2-2.3.4.RELEASE.jar:na]\n```","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452852,"discussion_content":"提示用户认证没有成功，获取授权码前必须经过用户认证的，你看看这步是否正确，用户名密码配置是否有误，输入是否正确。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559913922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2401860,"avatar":"https://static001.geekbang.org/account/avatar/00/24/a6/44/7b9a883a.jpg","nickname":"天空.","note":"","ucode":"A3D659BC34C6F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531113,"discussion_content":"需要配置这个\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityServer extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n                .antMatchers(&#34;/oauth/**&#34;).permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .formLogin().and()\n                .httpBasic();\n    }\n}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637233032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440896,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fc/80/4d1369bc.jpg","nickname":"Chandler","note":"","ucode":"A6D97CFF01FF70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219370,"discussion_content":"我也遇到同样的问题，原代码的版本下不下来，升级了spring boot parent 到2.1.4.RELEASE 升级 spring-security-oauth2 到2.0.14.RELEASE就报这个错误了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585752831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99477,"user_name":"七步","can_delete":false,"product_type":"c3","uid":1139113,"ip_address":"","ucode":"F7ECEB9250B7CB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/W2O5VwL8wN6VIGPGCHIBIFuzhwG3Jic5Y90E049bLmxst9L67fhIDUNVlRpVqBfAG3Ykn2Rzl8EFiczWv0IVcLVw/132","comment_is_top":false,"comment_ctime":1559226405,"is_pvip":false,"replies":[{"id":36218,"content":"谢谢你的好心支持！赞一个！","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1559571947,"ip_address":"","comment_id":99477,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"github代码太难下了，我转移到gitee上了，大家可以下载\nhttps:&#47;&#47;gitee.com&#47;poet&#47;oauth2lab","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452128,"discussion_content":"谢谢你的好心支持！赞一个！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559571947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94877,"user_name":"follow","can_delete":false,"product_type":"c3","uid":1509136,"ip_address":"","ucode":"5CB49510077AFD","user_header":"https://static001.geekbang.org/account/avatar/00/17/07/10/7ff147b5.jpg","comment_is_top":false,"comment_ctime":1557914704,"is_pvip":false,"replies":[{"id":34038,"content":"你好，第一次是optional可选，第二次是required必须，spring security oauth2只是RFC6749规范的实现，具体以RFC6749官方文档为准，参考4.1.1节：https:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6749#section-4.1.1","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1558009044,"ip_address":"","comment_id":94877,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"波波老师您好，因为之前一直对几个redict_url参数有疑惑，我使用spring boot 2.1.4进行了实验。\n实验发现 &#47;oauth&#47;authorize 端点并不需要传入redict_url参数，此时的回调地址调用的是在客户端信息数据源中配置的redirectUri。而只有拿着授权码去&#47;oauth&#47;token端点去请求token时才需要该参数，此时该参数用于和数据源中配置的客户端的redirectUri进行匹配。不知在老师使用的boot版本中该参数是必须的吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450241,"discussion_content":"你好，第一次是optional可选，第二次是required必须，spring security oauth2只是RFC6749规范的实现，具体以RFC6749官方文档为准，参考4.1.1节：https://tools.ietf.org/html/rfc6749#section-4.1.1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558009044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73167,"user_name":"正是那朵玫瑰","can_delete":false,"product_type":"c3","uid":1048261,"ip_address":"","ucode":"73D630B654573F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","comment_is_top":false,"comment_ctime":1551834868,"is_pvip":false,"replies":[{"id":27276,"content":"因为这个授权码最终是要通过客户应用(一般是WebApp)去和授权服务器交互，才能最终获得令牌，注意这里不是通过浏览器直接和授权服务器交互，而是必须通过客户应用，因为只有客户应用它能存储clientid才有资格，浏览器只是中介实现一个302跳转","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1552307701,"ip_address":"","comment_id":73167,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"一直没有明白为什么一定要设置回调接口呢，同步调用拿到授权码不就可以？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441944,"discussion_content":"因为这个授权码最终是要通过客户应用(一般是WebApp)去和授权服务器交互，才能最终获得令牌，注意这里不是通过浏览器直接和授权服务器交互，而是必须通过客户应用，因为只有客户应用它能存储clientid才有资格，浏览器只是中介实现一个302跳转","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552307701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63439,"user_name":"yien","can_delete":false,"product_type":"c3","uid":1345013,"ip_address":"","ucode":"37CC1AFAC8B0BC","user_header":"https://static001.geekbang.org/account/avatar/00/14/85/f5/10275c0a.jpg","comment_is_top":false,"comment_ctime":1548374889,"is_pvip":false,"replies":[{"id":22552,"content":"你好，谢谢你的建议！本次课程专注微服务八大核心组件，以模块化方式讲解，突出架构原理和实践。我后续还会推出微服务架构生产实践案例，不仅有微服务应用的架构和设计，同时结合k8s部署实践，敬请关注。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1548506419,"ip_address":"","comment_id":63439,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100007001,"comment_content":"老师，多讲讲生产环境的实际运用，如果各家五花八门的话，可以挑一些中小型企业的一般做法，这样学习起来才敢在自己的项目中使用。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437586,"discussion_content":"你好，谢谢你的建议！本次课程专注微服务八大核心组件，以模块化方式讲解，突出架构原理和实践。我后续还会推出微服务架构生产实践案例，不仅有微服务应用的架构和设计，同时结合k8s部署实践，敬请关注。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548506419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":51171,"user_name":"搬砖盖楼","can_delete":false,"product_type":"c3","uid":1142254,"ip_address":"","ucode":"3923BFB10859EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/0m2KibVBciadnFRiaGDkedgYvltC75pc0DtpyZfagkVpPMuuic2oj8xKG7oOtcHaGrgH8sm4EadNAk7JTticNmuia2ug/132","comment_is_top":false,"comment_ctime":1545125280,"is_pvip":false,"replies":[{"id":18444,"content":"zuul网关可以做集中令牌校验，可通过filter实现，具体可参考课程最后一个模块综合案例部分，网关集中验令牌之后，可向后传递用户信息（例如通过http header），下游服务可直接获取用户信息，不必再去集中验令牌","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1545135274,"ip_address":"","comment_id":51171,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"老师可不可以讲解一下怎么将zuul网关配置为资源服务器，然后调用链下游的微服务就不必配置为资源服务器了吧","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433323,"discussion_content":"zuul网关可以做集中令牌校验，可通过filter实现，具体可参考课程最后一个模块综合案例部分，网关集中验令牌之后，可向后传递用户信息（例如通过http header），下游服务可直接获取用户信息，不必再去集中验令牌","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545135274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49191,"user_name":"L.","can_delete":false,"product_type":"c3","uid":1181647,"ip_address":"","ucode":"46A2F679C094E8","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/cf/b0d6fe74.jpg","comment_is_top":false,"comment_ctime":1544619986,"is_pvip":false,"replies":[{"id":17795,"content":"一般令牌需走https，且令牌可根据安全场景需求设定有效期，也可吊销，除普通令牌，另还有更安全的PoP（proof of possession）令牌，能验证拥有者身体，可用在安全严格场景。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1544705423,"ip_address":"","comment_id":49191,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"老师，获取的Token万一通过抓包的方式或者别的方式获取到了，岂不是没有安全性了？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432520,"discussion_content":"一般令牌需走https，且令牌可根据安全场景需求设定有效期，也可吊销，除普通令牌，另还有更安全的PoP（proof of possession）令牌，能验证拥有者身体，可用在安全严格场景。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544705423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48998,"user_name":"王盛武","can_delete":false,"product_type":"c3","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1544586595,"is_pvip":false,"replies":[{"id":17797,"content":"oauth有官方规范定义（rfc6749），规范中定义的端点是http(s)的，建议遵循规范保持互操作性。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1544705769,"ip_address":"","comment_id":48998,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"dubbo的二进制协议做 oauth的授权服务器，  需要把oauth的http通信协议改成二进制协议嚒？   授权服务器单独部署的情况；","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432455,"discussion_content":"oauth有官方规范定义（rfc6749），规范中定义的端点是http(s)的，建议遵循规范保持互操作性。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544705769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47850,"user_name":"Tony🐑","can_delete":false,"product_type":"c3","uid":1108084,"ip_address":"","ucode":"B53491FA20D340","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/74/ceb084a2.jpg","comment_is_top":false,"comment_ctime":1544236387,"is_pvip":false,"replies":[{"id":17304,"content":"不跳转的可考虑采用用户名密码模式，我课程的最后一个模块《综合案例分析》会讲这种模式实现（12月马上上线），可留意，如还有疑问，可加我微信（bulldog2015）沟通。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1544443238,"ip_address":"","comment_id":47850,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"老师，你好，我想做一个类型微信公众平台那样的，api开放鉴权。我可以怎么做？就是不希望跳转到那个登陆页，希望一个appId+appsecret就完成授权，然后换取accessToken。有没有相关的博客或者资料推荐？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431909,"discussion_content":"不跳转的可考虑采用用户名密码模式，我课程的最后一个模块《综合案例分析》会讲这种模式实现（12月马上上线），可留意，如还有疑问，可加我微信（bulldog2015）沟通。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544443238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":41243,"user_name":"Eric","can_delete":false,"product_type":"c3","uid":1053498,"ip_address":"","ucode":"59752A51A382A6","user_header":"https://static001.geekbang.org/account/avatar/00/10/13/3a/b0454322.jpg","comment_is_top":false,"comment_ctime":1542762131,"is_pvip":false,"replies":[{"id":15259,"content":"spring security oauth2的确被封装过于复杂，很多学员反应无法完全理解这些oauth2流程，所以下个模块我会讲解如何实现一个oauth2授权认证服务器，包括代码剖析，帮助大家理清这些流程及实现方式，请关注下个第八模块视频课程。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1542984853,"ip_address":"","comment_id":41243,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"老师您好，针对授权码模式 spring应该是帮我们封装了 login功能，授权以及授权信息生成功能，还有授权后的页面跳转功能，这一部分的细节能简单说一下嘛，比如 接收到code请求后会重定向到login，login成功后继续处理code请求，这几步是如何串起来的","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429743,"discussion_content":"spring security oauth2的确被封装过于复杂，很多学员反应无法完全理解这些oauth2流程，所以下个模块我会讲解如何实现一个oauth2授权认证服务器，包括代码剖析，帮助大家理清这些流程及实现方式，请关注下个第八模块视频课程。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542984853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":40391,"user_name":"wusiyu","can_delete":false,"product_type":"c3","uid":1258654,"ip_address":"","ucode":"6D721885A11433","user_header":"","comment_is_top":false,"comment_ctime":1542613687,"is_pvip":false,"replies":[{"id":15798,"content":"这个是oauth2规范的获取授权码端点","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1543406452,"ip_address":"","comment_id":40391,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"http:&#47;&#47;localhost:8080&#47;oauth&#47;authorize?  为什么这个IP地址后面带的是&#47;oauth&#47;authorize这个呢？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429505,"discussion_content":"这个是oauth2规范的获取授权码端点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543406452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37351,"user_name":"咖啡","can_delete":false,"product_type":"c3","uid":1117154,"ip_address":"","ucode":"36848998D7EB8E","user_header":"https://static001.geekbang.org/account/avatar/00/11/0b/e2/e83c52bd.jpg","comment_is_top":false,"comment_ctime":1541554085,"is_pvip":false,"replies":[{"id":13563,"content":"你好，通过描述，我没有完全理解你的问题，建议加我微信：bulldog2015，通用微信进一步交流","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1541684363,"ip_address":"","comment_id":37351,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"波波老师，您好:\n我开发过程有遇到这个一个场景： 微服务用户的登录模块是前后端分离开发。服务端没有用session。\n现在需要开放当前用户，oauth2授权code模式。##\n当第三方client发起获取oauthcode 请求时候， 服务端如何判断把当前用户与authcode 关联起来？\n服务器端，如何把当前用户与accesstoken关联起来？（是否添加cookie来实现?）\n期待老师的指导。\n","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428303,"discussion_content":"你好，通过描述，我没有完全理解你的问题，建议加我微信：bulldog2015，通用微信进一步交流","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541684363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":30406,"user_name":"sdliang","can_delete":false,"product_type":"c3","uid":1232228,"ip_address":"","ucode":"63FE1878E3FDDE","user_header":"https://static001.geekbang.org/account/avatar/00/12/cd/64/ed091686.jpg","comment_is_top":false,"comment_ctime":1538829438,"is_pvip":false,"replies":[{"id":11398,"content":"你好，本实验使用的spring boot版本是1.5.10，请使用该版本实验。spring boot 2.0较新，oauth安全机制有变化，在理解原理基础上，可参考官方文档再实现类似实验。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1539267171,"ip_address":"","comment_id":30406,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"老师, 我用spring boot 2 的版本, 参考你的讲解, 写了个demo, 但是访问http:&#47;&#47;localhost:8080&#47;oauth&#47;authorize?client_id=clientDemo&amp;redirect_uri=http:&#47;&#47;localhost:8081&#47;oauth&#47;callback&amp;response_type=code&amp;scope=read_userinfo 无法跳转到登陆界面, 错误信息:\norg.springframework.security.authentication.InsufficientAuthenticationException: User must be authenticated with Spring Security before authorization can be completed.\n    at org.springframework.security.oauth2.provider.endpoint.AuthorizationEndpoint.authorize(AuthorizationEndpoint.java:138) ~[spring-security-oauth2-2.0.10.RELEASE.jar:na]\n也是提示需要登陆? 但是登陆界面跳不出来, 是不是还要少了失败登陆的设置?","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425983,"discussion_content":"你好，本实验使用的spring boot版本是1.5.10，请使用该版本实验。spring boot 2.0较新，oauth安全机制有变化，在理解原理基础上，可参考官方文档再实现类似实验。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539267171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16996,"user_name":"Neil","can_delete":false,"product_type":"c3","uid":1070295,"ip_address":"","ucode":"2D5037F4E7C46C","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/d7/5138549f.jpg","comment_is_top":false,"comment_ctime":1532362288,"is_pvip":false,"replies":[{"id":5932,"content":"这个实验只依赖java&#47;springboot，和操作系统mac应该没有关系，你确认下java8运行环境正确安装，还有具体报什么错？","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1532424527,"ip_address":"","comment_id":16996,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"老师，Mac上没跑起来，需要做额外的配置吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421000,"discussion_content":"这个实验只依赖java/springboot，和操作系统mac应该没有关系，你确认下java8运行环境正确安装，还有具体报什么错？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532424527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":12231,"user_name":"kitten","can_delete":false,"product_type":"c3","uid":1027789,"ip_address":"","ucode":"E451DE087CB7CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/cd/3bffed26.jpg","comment_is_top":false,"comment_ctime":1528705474,"is_pvip":true,"replies":[{"id":4136,"content":"如果是id token，一般在受保护资源端或网关发回auth server的令牌校验端点去校验是否过期。jwt token可在受保护资源端自校验是否过期。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1528906487,"ip_address":"","comment_id":12231,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100007001,"comment_content":"老师，请问下，获取到access token可以访问受保护资源，是在受保护资源判断access token过期时间吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419170,"discussion_content":"如果是id token，一般在受保护资源端或网关发回auth server的令牌校验端点去校验是否过期。jwt token可在受保护资源端自校验是否过期。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528906487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":12178,"user_name":"kitten","can_delete":false,"product_type":"c3","uid":1027789,"ip_address":"","ucode":"E451DE087CB7CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/cd/3bffed26.jpg","comment_is_top":false,"comment_ctime":1528643002,"is_pvip":true,"replies":[{"id":4315,"content":"postman是支持Authorization TYPE可选Bearer Token，你仔细找一下","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1529243154,"ip_address":"","comment_id":12178,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007001,"comment_content":"老师 post man 为啥没有 bearer token 这个类型","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419145,"discussion_content":"postman是支持Authorization TYPE可选Bearer Token，你仔细找一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1529243154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":12155,"user_name":"zhaoni","can_delete":false,"product_type":"c3","uid":1052158,"ip_address":"","ucode":"F317ECD6380984","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqT1ykjFve5LCsFvegqLb8MKrf6ASApsOgm8nRb5icDE7MgzKbia0zUQkxe44tKvpCwQ65QuHo4NVoQ/132","comment_is_top":false,"comment_ctime":1528624437,"is_pvip":false,"replies":[{"id":3997,"content":"不用用户名密码登录，生成的令牌和哪个用户关联呢？不关联资源owner，资源API如何校验授权情况？","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1528644205,"ip_address":"","comment_id":12155,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007001,"comment_content":"授权码模式，spring securty 默认有个用户名密码登陆验证，可否不需要用界面的方式验证，能否用静默验证，或者不验证，只根据client id直接给予授权码？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419140,"discussion_content":"不用用户名密码登录，生成的令牌和哪个用户关联呢？不关联资源owner，资源API如何校验授权情况？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528644205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11021,"user_name":"Coder Cat","can_delete":false,"product_type":"c3","uid":1136920,"ip_address":"","ucode":"AF0291604CCB11","user_header":"https://static001.geekbang.org/account/avatar/00/11/59/18/87898f15.jpg","comment_is_top":false,"comment_ctime":1527806642,"is_pvip":false,"replies":[{"id":3659,"content":"用户名密码模式，app获取用户名密码之后直接向授权服务器发请求获取token","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1528129470,"ip_address":"","comment_id":11021,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007001,"comment_content":"资源所有者凭据模式一般是第一方app本地直接请求 授权服务器拿访问令牌还是app 请求app 服务器，app 服务器再去拿访问令牌呢。如果是同一个服务器呢，感觉这点像登陆认证了。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418677,"discussion_content":"用户名密码模式，app获取用户名密码之后直接向授权服务器发请求获取token","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528129470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9672,"user_name":"Sam_Deep_Thinking","can_delete":false,"product_type":"c3","uid":1001152,"ip_address":"","ucode":"8E4EF6F24B821B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/c0/106d98e7.jpg","comment_is_top":false,"comment_ctime":1527033948,"is_pvip":false,"replies":[{"id":3050,"content":"谢谢建议🌹demo是考虑入门级用户。后面会增加实现oauth2服务器的文章+案例","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1527162873,"ip_address":"","comment_id":9672,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007001,"comment_content":"我也是有同样疑问的，极客时间，极客时间，不是demo时间。当然老师原理讲的不错。ppt也不错。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418158,"discussion_content":"谢谢建议🌹demo是考虑入门级用户。后面会增加实现oauth2服务器的文章+案例","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527162873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8859,"user_name":"小文同学","can_delete":false,"product_type":"c3","uid":1001893,"ip_address":"","ucode":"48F2AEB989C12A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","comment_is_top":false,"comment_ctime":1526486133,"is_pvip":false,"replies":[{"id":2748,"content":"谢谢支持🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526651331,"ip_address":"","comment_id":8859,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100007001,"comment_content":"感谢老师的讲解，这些基础知识和概念让我更容易理解一些企业开放平台的Api了","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417874,"discussion_content":"谢谢支持🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526651331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390968,"user_name":"吴佳璐","can_delete":false,"product_type":"c3","uid":1365378,"ip_address":"北京","ucode":"CF933E6DD63C2E","user_header":"https://static001.geekbang.org/account/avatar/00/14/d5/82/0bc6c7bb.jpg","comment_is_top":false,"comment_ctime":1716904266,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100007001,"comment_content":"您好 老师  github打不开 换链接了吗","like_count":0},{"had_liked":false,"id":333078,"user_name":"on","can_delete":false,"product_type":"c3","uid":2869085,"ip_address":"","ucode":"D0B59D9F0FC209","user_header":"https://static001.geekbang.org/account/avatar/00/2b/c7/5d/40bdba38.jpg","comment_is_top":false,"comment_ctime":1644049138,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100007001,"comment_content":"授权服务器的回调地址为什么会是在启动的时候配置的呢？每个第三方应用回调地址都不一样，这个不应该是通过参数给到的么？","like_count":0}]}