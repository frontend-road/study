{"id":126109,"title":"36 | ä½ åº”è¯¥æ€ä¹ˆç›‘æ§Kafkaï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å¤•ã€‚ä»Šå¤©æˆ‘è¦å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼šå¦‚ä½•ç›‘æ§Kafkaã€‚</p><p>ç›‘æ§Kafkaï¼Œå†æ¥éƒ½æ˜¯ä¸ªè€å¤§éš¾çš„é—®é¢˜ã€‚æ— è®ºæ˜¯åœ¨æˆ‘ç»´æŠ¤çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œè¿˜æ˜¯Kafka QQç¾¤é‡Œé¢ï¼Œå¤§å®¶é—®å¾—æœ€å¤šçš„é—®é¢˜ï¼Œä¸€å®šæ˜¯Kafkaçš„ç›‘æ§ã€‚å¤§å®¶æé—®çš„å†…å®¹çœ‹ä¼¼äº”èŠ±å…«é—¨ï¼Œä½†çœŸæ­£æƒ³äº†è§£çš„ï¼Œå…¶å®éƒ½æ˜¯ç›‘æ§è¿™ç‚¹äº‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘åº”è¯¥ç›‘æ§ä»€ä¹ˆï¼Œæ€ä¹ˆç›‘æ§ã€‚é‚£ä¹ˆä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥è¯¦ç»†èŠèŠè¿™ä»¶äº‹ã€‚</p><p>æˆ‘ä¸ªäººè®¤ä¸ºï¼Œå’Œå¤´ç–¼åŒ»å¤´ã€è„šç–¼åŒ»è„šçš„é—®é¢˜ç±»ä¼¼ï¼Œåœ¨ç›‘æ§Kafkaæ—¶ï¼Œå¦‚æœæˆ‘ä»¬åªç›‘æ§Brokerçš„è¯ï¼Œå°±éš¾å…ä»¥åæ¦‚å…¨ã€‚å•ä¸ªBrokerå¯åŠ¨çš„è¿›ç¨‹è™½ç„¶å±äºKafkaåº”ç”¨ï¼Œä½†å®ƒä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šçš„Javaè¿›ç¨‹ï¼Œæ›´æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿè¿›ç¨‹ã€‚å› æ­¤ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦ä»Kafkaä¸»æœºã€JVMå’ŒKafkaé›†ç¾¤æœ¬èº«è¿™ä¸‰ä¸ªç»´åº¦è¿›è¡Œç›‘æ§ã€‚</p><h2>ä¸»æœºç›‘æ§</h2><p>ä¸»æœºçº§åˆ«çš„ç›‘æ§ï¼Œå¾€å¾€æ˜¯æ­ç¤ºçº¿ä¸Šé—®é¢˜çš„ç¬¬ä¸€æ­¥ã€‚<strong>æ‰€è°“ä¸»æœºç›‘æ§ï¼ŒæŒ‡çš„æ˜¯ç›‘æ§Kafkaé›†ç¾¤Brokeræ‰€åœ¨çš„èŠ‚ç‚¹æœºå™¨çš„æ€§èƒ½</strong>ã€‚é€šå¸¸æ¥è¯´ï¼Œä¸€å°ä¸»æœºä¸Šè¿è¡Œç€å„ç§å„æ ·çš„åº”ç”¨è¿›ç¨‹ï¼Œè¿™äº›è¿›ç¨‹å…±åŒä½¿ç”¨ä¸»æœºä¸Šçš„æ‰€æœ‰ç¡¬ä»¶èµ„æºï¼Œæ¯”å¦‚CPUã€å†…å­˜æˆ–ç£ç›˜ç­‰ã€‚</p><p>å¸¸è§çš„ä¸»æœºç›‘æ§æŒ‡æ ‡åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ç§ï¼š</p><ul>\n<li>æœºå™¨è´Ÿè½½ï¼ˆLoadï¼‰</li>\n<li>CPUä½¿ç”¨ç‡</li>\n<li>å†…å­˜ä½¿ç”¨ç‡ï¼ŒåŒ…æ‹¬ç©ºé—²å†…å­˜ï¼ˆFree Memoryï¼‰å’Œå·²ä½¿ç”¨å†…å­˜ï¼ˆUsed Memoryï¼‰</li>\n<li>ç£ç›˜I/Oä½¿ç”¨ç‡ï¼ŒåŒ…æ‹¬è¯»ä½¿ç”¨ç‡å’Œå†™ä½¿ç”¨ç‡</li>\n<li>ç½‘ç»œI/Oä½¿ç”¨ç‡</li>\n<li>TCPè¿æ¥æ•°</li>\n<li>æ‰“å¼€æ–‡ä»¶æ•°</li>\n<li>inodeä½¿ç”¨æƒ…å†µ</li>\n</ul><!-- [[[read_end]]] --><p>è€ƒè™‘åˆ°æˆ‘ä»¬å¹¶ä¸æ˜¯è¦ç³»ç»Ÿåœ°å­¦ä¹ è°ƒä¼˜ä¸ç›‘æ§ä¸»æœºæ€§èƒ½ï¼Œå› æ­¤æˆ‘å¹¶ä¸æ‰“ç®—å¯¹ä¸Šé¢çš„æ¯ä¸€ä¸ªæŒ‡æ ‡éƒ½è¿›è¡Œè¯¦ç»†è§£é‡Šï¼Œæˆ‘é‡ç‚¹åˆ†äº«ä¸€ä¸‹æœºå™¨è´Ÿè½½å’ŒCPUä½¿ç”¨ç‡çš„ç›‘æ§æ–¹æ³•ã€‚æˆ‘ä¼šä»¥Linuxå¹³å°ä¸ºä¾‹æ¥è¿›è¡Œè¯´æ˜ï¼Œå…¶ä»–å¹³å°åº”è¯¥ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€å¼ å›¾ç‰‡ã€‚æˆ‘åœ¨Kafkaé›†ç¾¤çš„æŸå°Brokeræ‰€åœ¨çš„ä¸»æœºä¸Šè¿è¡Œtopå‘½ä»¤ï¼Œè¾“å‡ºçš„å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/00/e0/00f0ead463b17e667d09b6cea4e42de0.png?wh=1950*1546\" alt=\"\"></p><p>åœ¨å›¾ç‰‡çš„å³ä¸Šè§’ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°load averageçš„3ä¸ªå€¼ï¼š4.85ï¼Œ2.76å’Œ1.26ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨è¿‡å»1åˆ†é’Ÿã€è¿‡å»5åˆ†é’Ÿå’Œè¿‡å»15åˆ†é’Ÿçš„Loadå¹³å‡å€¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘çš„ä¸»æœºæ€»å…±æœ‰4ä¸ªCPUæ ¸ï¼Œä½†Loadå€¼å´è¾¾åˆ°äº†4.85ï¼Œè¿™å°±è¯´æ˜ï¼Œä¸€å®šæœ‰è¿›ç¨‹æš‚æ—¶â€œæŠ¢ä¸åˆ°â€ä»»ä½•CPUèµ„æºã€‚åŒæ—¶ï¼ŒLoadå€¼ä¸€ç›´åœ¨å¢åŠ ï¼Œä¹Ÿè¯´æ˜è¿™å°ä¸»æœºä¸Šçš„è´Ÿè½½è¶Šæ¥è¶Šå¤§ã€‚</p><p>ä¸¾è¿™ä¸ªä¾‹å­ï¼Œå…¶å®æˆ‘çœŸæ­£æƒ³è¯´çš„æ˜¯CPUä½¿ç”¨ç‡ã€‚å¾ˆå¤šäººæŠŠtopå‘½ä»¤ä¸­â€œ%CPUâ€åˆ—çš„è¾“å‡ºå€¼å½“ä½œCPUä½¿ç”¨ç‡ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸Šé¢è¿™å¼ å›¾ä¸­ï¼ŒPIDä¸º2637çš„Javaè¿›ç¨‹æ˜¯Brokerè¿›ç¨‹ï¼Œå®ƒå¯¹åº”çš„â€œ%CPUâ€çš„å€¼æ˜¯102.3ã€‚ä½ ä¸è¦è®¤ä¸ºè¿™æ˜¯CPUçš„çœŸå®ä½¿ç”¨ç‡ï¼Œè¿™åˆ—å€¼çš„çœŸå®å«ä¹‰æ˜¯è¿›ç¨‹ä½¿ç”¨çš„æ‰€æœ‰CPUçš„å¹³å‡ä½¿ç”¨ç‡ï¼Œåªæ˜¯topå‘½ä»¤åœ¨æ˜¾ç¤ºçš„æ—¶å€™è½¬æ¢æˆäº†å•ä¸ªCPUã€‚å› æ­¤ï¼Œå¦‚æœæ˜¯åœ¨å¤šæ ¸çš„ä¸»æœºä¸Šï¼Œè¿™ä¸ªå€¼å°±å¯èƒ½ä¼šè¶…è¿‡100ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘çš„ä¸»æœºæœ‰4ä¸ªCPUæ ¸ï¼Œæ€»CPUä½¿ç”¨ç‡æ˜¯102.3ï¼Œé‚£ä¹ˆï¼Œå¹³å‡æ¯ä¸ªCPUçš„ä½¿ç”¨ç‡å¤§è‡´æ˜¯25%ã€‚</p><h2>JVMç›‘æ§</h2><p>é™¤äº†ä¸»æœºç›‘æ§ä¹‹å¤–ï¼Œå¦ä¸€ä¸ªé‡è¦çš„ç›‘æ§ç»´åº¦å°±æ˜¯JVMç›‘æ§ã€‚Kafka Brokerè¿›ç¨‹æ˜¯ä¸€ä¸ªæ™®é€šçš„Javaè¿›ç¨‹ï¼Œæ‰€æœ‰å…³äºJVMçš„ç›‘æ§æ‰‹æ®µåœ¨è¿™é‡Œéƒ½æ˜¯é€‚ç”¨çš„ã€‚</p><p>ç›‘æ§JVMè¿›ç¨‹ä¸»è¦æ˜¯ä¸ºäº†è®©ä½ å…¨é¢åœ°äº†è§£ä½ çš„åº”ç”¨ç¨‹åºï¼ˆKnow Your Applicationï¼‰ã€‚å…·ä½“åˆ°Kafkaè€Œè¨€ï¼Œå°±æ˜¯å…¨é¢äº†è§£Brokerè¿›ç¨‹ã€‚æ¯”å¦‚ï¼ŒBrokerè¿›ç¨‹çš„å †å¤§å°ï¼ˆHeapSizeï¼‰æ˜¯å¤šå°‘ã€å„è‡ªçš„æ–°ç”Ÿä»£å’Œè€å¹´ä»£æ˜¯å¤šå¤§ï¼Ÿç”¨çš„æ˜¯ä»€ä¹ˆGCå›æ”¶å™¨ï¼Ÿè¿™äº›ç›‘æ§æŒ‡æ ‡å’Œé…ç½®å‚æ•°æ—æ—æ€»æ€»ï¼Œé€šå¸¸ä½ éƒ½ä¸å¿…å…¨éƒ¨é‡ç‚¹å…³æ³¨ï¼Œä½†ä½ è‡³å°‘è¦ææ¸…æ¥šBrokerç«¯JVMè¿›ç¨‹çš„Minor GCå’ŒFull GCçš„å‘ç”Ÿé¢‘ç‡å’Œæ—¶é•¿ã€æ´»è·ƒå¯¹è±¡çš„æ€»å¤§å°å’ŒJVMä¸Šåº”ç”¨çº¿ç¨‹çš„å¤§è‡´æ€»æ•°ï¼Œå› ä¸ºè¿™äº›æ•°æ®éƒ½æ˜¯ä½ æ—¥åè°ƒä¼˜Kafka Brokerçš„é‡è¦ä¾æ®ã€‚</p><p>æˆ‘ä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚å‡è®¾ä¸€å°ä¸»æœºä¸Šè¿è¡Œçš„Brokerè¿›ç¨‹åœ¨ç»å†äº†ä¸€æ¬¡Full GCä¹‹åï¼Œå †ä¸Šå­˜æ´»çš„æ´»è·ƒå¯¹è±¡å¤§å°æ˜¯700MBï¼Œé‚£ä¹ˆåœ¨å®é™…åœºæ™¯ä¸­ï¼Œä½ å‡ ä¹å¯ä»¥å®‰å…¨åœ°å°†è€å¹´ä»£å †å¤§å°è®¾ç½®æˆè¯¥æ•°å€¼çš„1.5å€æˆ–2å€ï¼Œå³å¤§çº¦1.4GBã€‚ä¸è¦å°çœ‹700MBè¿™ä¸ªæ•°å­—ï¼Œå®ƒæ˜¯æˆ‘ä»¬è®¾å®šBrokerå †å¤§å°çš„é‡è¦ä¾æ®ï¼</p><p>å¾ˆå¤šäººä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šæˆ‘åº”è¯¥æ€ä¹ˆè®¾ç½®Brokerç«¯çš„å †å¤§å°å‘¢ï¼Ÿå…¶å®ï¼Œè¿™å°±æ˜¯æœ€åˆç†çš„è¯„ä¼°æ–¹æ³•ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ çš„Brokeråœ¨Full GCä¹‹åå­˜æ´»äº†700MBçš„æ•°æ®ï¼Œè€Œä½ è®¾ç½®äº†å †å¤§å°ä¸º16GBï¼Œè¿™æ ·åˆç†å—ï¼Ÿå¯¹ä¸€ä¸ª16GBå¤§çš„å †æ‰§è¡Œä¸€æ¬¡GCè¦èŠ±å¤šé•¿æ—¶é—´å•Šï¼Ÿï¼</p><p>å› æ­¤ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ã€‚è¦åšåˆ°JVMè¿›ç¨‹ç›‘æ§ï¼Œæœ‰3ä¸ªæŒ‡æ ‡éœ€è¦ä½ æ—¶åˆ»å…³æ³¨ï¼š</p><ol>\n<li>Full GCå‘ç”Ÿé¢‘ç‡å’Œæ—¶é•¿ã€‚è¿™ä¸ªæŒ‡æ ‡å¸®åŠ©ä½ è¯„ä¼°Full GCå¯¹Brokerè¿›ç¨‹çš„å½±å“ã€‚é•¿æ—¶é—´çš„åœé¡¿ä¼šä»¤Brokerç«¯æŠ›å‡ºå„ç§è¶…æ—¶å¼‚å¸¸ã€‚</li>\n<li>æ´»è·ƒå¯¹è±¡å¤§å°ã€‚è¿™ä¸ªæŒ‡æ ‡æ˜¯ä½ è®¾å®šå †å¤§å°çš„é‡è¦ä¾æ®ï¼ŒåŒæ—¶å®ƒè¿˜èƒ½å¸®åŠ©ä½ ç»†ç²’åº¦åœ°è°ƒä¼˜JVMå„ä¸ªä»£çš„å †å¤§å°ã€‚</li>\n<li>åº”ç”¨çº¿ç¨‹æ€»æ•°ã€‚è¿™ä¸ªæŒ‡æ ‡å¸®åŠ©ä½ äº†è§£Brokerè¿›ç¨‹å¯¹CPUçš„ä½¿ç”¨æƒ…å†µã€‚</li>\n</ol><p>æ€»ä¹‹ï¼Œä½ å¯¹Brokerè¿›ç¨‹äº†è§£å¾—è¶Šé€å½»ï¼Œä½ æ‰€åšçš„JVMè°ƒä¼˜å°±è¶Šæœ‰æ•ˆæœã€‚</p><p>è°ˆåˆ°å…·ä½“çš„ç›‘æ§ï¼Œå‰ä¸¤ä¸ªéƒ½å¯ä»¥é€šè¿‡GCæ—¥å¿—æ¥æŸ¥çœ‹ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„è¿™æ®µGCæ—¥å¿—å°±è¯´æ˜äº†GCåå †ä¸Šçš„å­˜æ´»å¯¹è±¡å¤§å°ã€‚</p><blockquote>\n<p>2019-07-30T09:13:03.809+0800: 552.982: [GC cleanup 827M-&gt;645M(1024M), 0.0019078 secs]</p>\n</blockquote><p>è¿™ä¸ªBroker JVMè¿›ç¨‹é»˜è®¤ä½¿ç”¨äº†G1çš„GCç®—æ³•ï¼Œå½“cleanupæ­¥éª¤ç»“æŸåï¼Œå †ä¸Šæ´»è·ƒå¯¹è±¡å¤§å°ä»827MBç¼©å‡æˆ645MBã€‚å¦å¤–ï¼Œä½ å¯ä»¥æ ¹æ®å‰é¢çš„æ—¶é—´æˆ³æ¥è®¡ç®—æ¯æ¬¡GCçš„é—´éš”å’Œé¢‘ç‡ã€‚</p><p>è‡ª0.9.0.0ç‰ˆæœ¬èµ·ï¼Œç¤¾åŒºå°†é»˜è®¤çš„GCæ”¶é›†å™¨è®¾ç½®ä¸ºG1ï¼Œè€ŒG1ä¸­çš„Full GCæ˜¯ç”±å•çº¿ç¨‹æ‰§è¡Œçš„ï¼Œé€Ÿåº¦éå¸¸æ…¢ã€‚å› æ­¤ï¼Œ<strong>ä½ ä¸€å®šè¦ç›‘æ§ä½ çš„Broker GCæ—¥å¿—ï¼Œå³ä»¥kafkaServer-gc.logå¼€å¤´çš„æ–‡ä»¶</strong>ã€‚æ³¨æ„ä¸è¦å‡ºç°Full GCçš„å­—æ ·ã€‚ä¸€æ—¦ä½ å‘ç°Brokerè¿›ç¨‹é¢‘ç¹Full GCï¼Œå¯ä»¥å¼€å¯G1çš„-XX:+PrintAdaptiveSizePolicyå¼€å…³ï¼Œè®©JVMå‘Šè¯‰ä½ åˆ°åº•æ˜¯è°å¼•å‘äº†Full GCã€‚</p><h2>é›†ç¾¤ç›‘æ§</h2><p>è¯´å®Œäº†ä¸»æœºå’ŒJVMç›‘æ§ï¼Œç°åœ¨æˆ‘æ¥ç»™å‡ºç›‘æ§Kafkaé›†ç¾¤çš„å‡ ä¸ªæ–¹æ³•ã€‚</p><p><strong>1.æŸ¥çœ‹Brokerè¿›ç¨‹æ˜¯å¦å¯åŠ¨ï¼Œç«¯å£æ˜¯å¦å»ºç«‹ã€‚</strong></p><p>åƒä¸‡ä¸è¦å°çœ‹è¿™ä¸€ç‚¹ã€‚åœ¨å¾ˆå¤šå®¹å™¨åŒ–çš„Kafkaç¯å¢ƒä¸­ï¼Œæ¯”å¦‚ä½¿ç”¨Dockerå¯åŠ¨Kafka Brokeræ—¶ï¼Œå®¹å™¨è™½ç„¶æˆåŠŸå¯åŠ¨äº†ï¼Œä½†æ˜¯é‡Œé¢çš„ç½‘ç»œè®¾ç½®å¦‚æœé…ç½®æœ‰è¯¯ï¼Œå°±å¯èƒ½ä¼šå‡ºç°è¿›ç¨‹å·²ç»å¯åŠ¨ä½†ç«¯å£æœªæˆåŠŸå»ºç«‹ç›‘å¬çš„æƒ…å½¢ã€‚å› æ­¤ï¼Œä½ ä¸€å®šè¦åŒæ—¶æ£€æŸ¥è¿™ä¸¤ç‚¹ï¼Œç¡®ä¿æœåŠ¡æ­£å¸¸è¿è¡Œã€‚</p><p><strong>2.æŸ¥çœ‹Brokerç«¯å…³é”®æ—¥å¿—ã€‚</strong></p><p>è¿™é‡Œçš„å…³é”®æ—¥å¿—ï¼Œä¸»è¦æ¶‰åŠBrokerç«¯æœåŠ¡å™¨æ—¥å¿—server.logï¼Œæ§åˆ¶å™¨æ—¥å¿—controller.logä»¥åŠä¸»é¢˜åˆ†åŒºçŠ¶æ€å˜æ›´æ—¥å¿—state-change.logã€‚å…¶ä¸­ï¼Œserver.logæ˜¯æœ€é‡è¦çš„ï¼Œä½ æœ€å¥½æ—¶åˆ»å¯¹å®ƒä¿æŒå…³æ³¨ã€‚å¾ˆå¤šBrokerç«¯çš„ä¸¥é‡é”™è¯¯éƒ½ä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è¢«å±•ç¤ºå‡ºæ¥ã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„Kafkaé›†ç¾¤å‡ºç°äº†æ•…éšœï¼Œä½ è¦ç¬¬ä¸€æ—¶é—´å»æŸ¥çœ‹å¯¹åº”çš„server.logï¼Œå¯»æ‰¾å’Œå®šä½æ•…éšœåŸå› ã€‚</p><p><strong>3.æŸ¥çœ‹Brokerç«¯å…³é”®çº¿ç¨‹çš„è¿è¡ŒçŠ¶æ€ã€‚</strong></p><p>è¿™äº›å…³é”®çº¿ç¨‹çš„æ„å¤–æŒ‚æ‰ï¼Œå¾€å¾€æ— å£°æ— æ¯ï¼Œä½†æ˜¯å´å½±å“å·¨å¤§ã€‚æ¯”æ–¹è¯´ï¼ŒBrokeråå°æœ‰ä¸ªä¸“å±çš„çº¿ç¨‹æ‰§è¡ŒLog Compactionæ“ä½œï¼Œç”±äºæºä»£ç çš„Bugï¼Œè¿™ä¸ªçº¿ç¨‹æœ‰æ—¶ä¼šæ— ç¼˜æ— æ•…åœ°â€œæ­»æ‰â€ï¼Œç¤¾åŒºä¸­å¾ˆå¤šJiraéƒ½æ›¾æŠ¥å‡ºè¿‡è¿™ä¸ªé—®é¢˜ã€‚å½“è¿™ä¸ªçº¿ç¨‹æŒ‚æ‰ä¹‹åï¼Œä½œä¸ºç”¨æˆ·çš„ä½ ä¸ä¼šå¾—åˆ°ä»»ä½•é€šçŸ¥ï¼ŒKafkaé›†ç¾¤ä¾ç„¶ä¼šæ­£å¸¸è¿è½¬ï¼Œåªæ˜¯æ‰€æœ‰çš„Compactionæ“ä½œéƒ½ä¸èƒ½ç»§ç»­äº†ï¼Œè¿™ä¼šå¯¼è‡´Kafkaå†…éƒ¨çš„ä½ç§»ä¸»é¢˜æ‰€å ç”¨çš„ç£ç›˜ç©ºé—´è¶Šæ¥è¶Šå¤§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å¯¹è¿™äº›å…³é”®çº¿ç¨‹çš„çŠ¶æ€è¿›è¡Œç›‘æ§ã€‚</p><p>å¯æ˜¯ï¼Œä¸€ä¸ªKafka Brokerè¿›ç¨‹ä¼šå¯åŠ¨åå‡ ä¸ªç”šè‡³æ˜¯å‡ åä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å¯¹æ¯ä¸ªçº¿ç¨‹éƒ½åšåˆ°å®æ—¶ç›‘æ§ã€‚æ‰€ä»¥ï¼Œæˆ‘è·Ÿä½ åˆ†äº«ä¸€ä¸‹æˆ‘è®¤ä¸ºæœ€é‡è¦çš„ä¸¤ç±»çº¿ç¨‹ã€‚åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç›‘æ§è¿™ä¸¤ç±»çº¿ç¨‹çš„è¿è¡Œæƒ…å†µæ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p><ul>\n<li>Log Compactionçº¿ç¨‹ï¼Œè¿™ç±»çº¿ç¨‹æ˜¯ä»¥kafka-log-cleaner-threadå¼€å¤´çš„ã€‚å°±åƒå‰é¢æåˆ°çš„ï¼Œæ­¤çº¿ç¨‹æ˜¯åšæ—¥å¿—Compactionçš„ã€‚ä¸€æ—¦å®ƒæŒ‚æ‰äº†ï¼Œæ‰€æœ‰Compactionæ“ä½œéƒ½ä¼šä¸­æ–­ï¼Œä½†ç”¨æˆ·å¯¹æ­¤é€šå¸¸æ˜¯æ— æ„ŸçŸ¥çš„ã€‚</li>\n<li>å‰¯æœ¬æ‹‰å–æ¶ˆæ¯çš„çº¿ç¨‹ï¼Œé€šå¸¸ä»¥ReplicaFetcherThreadå¼€å¤´ã€‚è¿™ç±»çº¿ç¨‹æ‰§è¡ŒFollowerå‰¯æœ¬å‘Leaderå‰¯æœ¬æ‹‰å–æ¶ˆæ¯çš„é€»è¾‘ã€‚å¦‚æœå®ƒä»¬æŒ‚æ‰äº†ï¼Œç³»ç»Ÿä¼šè¡¨ç°ä¸ºå¯¹åº”çš„Followerå‰¯æœ¬ä¸å†ä»Leaderå‰¯æœ¬æ‹‰å–æ¶ˆæ¯ï¼Œå› è€ŒFollowerå‰¯æœ¬çš„Lagä¼šè¶Šæ¥è¶Šå¤§ã€‚</li>\n</ul><p>ä¸è®ºä½ æ˜¯ä½¿ç”¨jstackå‘½ä»¤ï¼Œè¿˜æ˜¯å…¶ä»–çš„ç›‘æ§æ¡†æ¶ï¼Œæˆ‘å»ºè®®ä½ æ—¶åˆ»å…³æ³¨Brokerè¿›ç¨‹ä¸­è¿™ä¸¤ç±»çº¿ç¨‹çš„è¿è¡ŒçŠ¶æ€ã€‚ä¸€æ—¦å‘ç°å®ƒä»¬çŠ¶æ€æœ‰å˜ï¼Œå°±ç«‹å³æŸ¥çœ‹å¯¹åº”çš„Kafkaæ—¥å¿—ï¼Œå®šä½åŸå› ï¼Œå› ä¸ºè¿™é€šå¸¸éƒ½é¢„ç¤ºä¼šå‘ç”Ÿè¾ƒä¸ºä¸¥é‡çš„é”™è¯¯ã€‚</p><p><strong>4.æŸ¥çœ‹Brokerç«¯çš„å…³é”®JMXæŒ‡æ ‡ã€‚</strong></p><p>Kafkaæä¾›äº†è¶…å¤šçš„JMXæŒ‡æ ‡ä¾›ç”¨æˆ·å®æ—¶ç›‘æµ‹ï¼Œæˆ‘æ¥ä»‹ç»å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„Brokerç«¯JMXæŒ‡æ ‡ï¼š</p><ul>\n<li>BytesIn/BytesOutï¼šå³Brokerç«¯æ¯ç§’å…¥ç«™å’Œå‡ºç«™å­—èŠ‚æ•°ã€‚ä½ è¦ç¡®ä¿è¿™ç»„å€¼ä¸è¦æ¥è¿‘ä½ çš„ç½‘ç»œå¸¦å®½ï¼Œå¦åˆ™è¿™é€šå¸¸éƒ½è¡¨ç¤ºç½‘å¡å·²è¢«â€œæ‰“æ»¡â€ï¼Œå¾ˆå®¹æ˜“å‡ºç°ç½‘ç»œä¸¢åŒ…çš„æƒ…å½¢ã€‚</li>\n<li>NetworkProcessorAvgIdlePercentï¼šå³ç½‘ç»œçº¿ç¨‹æ± çº¿ç¨‹å¹³å‡çš„ç©ºé—²æ¯”ä¾‹ã€‚é€šå¸¸æ¥è¯´ï¼Œä½ åº”è¯¥ç¡®ä¿è¿™ä¸ªJMXå€¼é•¿æœŸå¤§äº30%ã€‚å¦‚æœå°äºè¿™ä¸ªå€¼ï¼Œå°±è¡¨æ˜ä½ çš„ç½‘ç»œçº¿ç¨‹æ± éå¸¸ç¹å¿™ï¼Œä½ éœ€è¦é€šè¿‡å¢åŠ ç½‘ç»œçº¿ç¨‹æ•°æˆ–å°†è´Ÿè½½è½¬ç§»ç»™å…¶ä»–æœåŠ¡å™¨çš„æ–¹å¼ï¼Œæ¥ç»™è¯¥Brokerå‡è´Ÿã€‚</li>\n<li>RequestHandlerAvgIdlePercentï¼šå³I/Oçº¿ç¨‹æ± çº¿ç¨‹å¹³å‡çš„ç©ºé—²æ¯”ä¾‹ã€‚åŒæ ·åœ°ï¼Œå¦‚æœè¯¥å€¼é•¿æœŸå°äº30%ï¼Œä½ éœ€è¦è°ƒæ•´I/Oçº¿ç¨‹æ± çš„æ•°é‡ï¼Œæˆ–è€…å‡å°‘Brokerç«¯çš„è´Ÿè½½ã€‚</li>\n<li>UnderReplicatedPartitionsï¼šå³æœªå……åˆ†å¤‡ä»½çš„åˆ†åŒºæ•°ã€‚æ‰€è°“æœªå……åˆ†å¤‡ä»½ï¼Œæ˜¯æŒ‡å¹¶éæ‰€æœ‰çš„Followerå‰¯æœ¬éƒ½å’ŒLeaderå‰¯æœ¬ä¿æŒåŒæ­¥ã€‚ä¸€æ—¦å‡ºç°äº†è¿™ç§æƒ…å†µï¼Œé€šå¸¸éƒ½è¡¨æ˜è¯¥åˆ†åŒºæœ‰å¯èƒ½ä¼šå‡ºç°æ•°æ®ä¸¢å¤±ã€‚å› æ­¤ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„JMXæŒ‡æ ‡ã€‚</li>\n<li>ISRShrink/ISRExpandï¼šå³ISRæ”¶ç¼©å’Œæ‰©å®¹çš„é¢‘æ¬¡æŒ‡æ ‡ã€‚å¦‚æœä½ çš„ç¯å¢ƒä¸­å‡ºç°ISRä¸­å‰¯æœ¬é¢‘ç¹è¿›å‡ºçš„æƒ…å½¢ï¼Œé‚£ä¹ˆè¿™ç»„å€¼ä¸€å®šæ˜¯å¾ˆé«˜çš„ã€‚è¿™æ—¶ï¼Œä½ è¦è¯Šæ–­ä¸‹å‰¯æœ¬é¢‘ç¹è¿›å‡ºISRçš„åŸå› ï¼Œå¹¶é‡‡å–é€‚å½“çš„æªæ–½ã€‚</li>\n<li>ActiveControllerCountï¼šå³å½“å‰å¤„äºæ¿€æ´»çŠ¶æ€çš„æ§åˆ¶å™¨çš„æ•°é‡ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒControlleræ‰€åœ¨Brokerä¸Šçš„è¿™ä¸ªJMXæŒ‡æ ‡å€¼åº”è¯¥æ˜¯1ï¼Œå…¶ä»–Brokerä¸Šçš„è¿™ä¸ªå€¼æ˜¯0ã€‚å¦‚æœä½ å‘ç°å­˜åœ¨å¤šå°Brokerä¸Šè¯¥å€¼éƒ½æ˜¯1çš„æƒ…å†µï¼Œä¸€å®šè¦èµ¶å¿«å¤„ç†ï¼Œå¤„ç†æ–¹å¼ä¸»è¦æ˜¯æŸ¥çœ‹ç½‘ç»œè¿é€šæ€§ã€‚è¿™ç§æƒ…å†µé€šå¸¸è¡¨æ˜é›†ç¾¤å‡ºç°äº†è„‘è£‚ã€‚è„‘è£‚é—®é¢˜æ˜¯éå¸¸ä¸¥é‡çš„åˆ†å¸ƒå¼æ•…éšœï¼ŒKafkaç›®å‰ä¾æ‰˜ZooKeeperæ¥é˜²æ­¢è„‘è£‚ã€‚ä½†ä¸€æ—¦å‡ºç°è„‘è£‚ï¼ŒKafkaæ˜¯æ— æ³•ä¿è¯æ­£å¸¸å·¥ä½œçš„ã€‚</li>\n</ul><p>å…¶å®ï¼ŒBrokerç«¯è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šJMXæŒ‡æ ‡ï¼Œé™¤äº†ä¸Šé¢è¿™äº›é‡è¦æŒ‡æ ‡ï¼Œä½ è¿˜å¯ä»¥æ ¹æ®è‡ªå·±ä¸šåŠ¡çš„éœ€è¦ï¼Œå»å®˜ç½‘æŸ¥çœ‹å…¶ä»–JMXæŒ‡æ ‡ï¼ŒæŠŠå®ƒä»¬é›†æˆè¿›ä½ çš„ç›‘æ§æ¡†æ¶ã€‚</p><p><strong>5.ç›‘æ§Kafkaå®¢æˆ·ç«¯ã€‚</strong></p><p>å®¢æˆ·ç«¯ç¨‹åºçš„æ€§èƒ½åŒæ ·éœ€è¦æˆ‘ä»¬å¯†åˆ‡å…³æ³¨ã€‚ä¸ç®¡æ˜¯ç”Ÿäº§è€…è¿˜æ˜¯æ¶ˆè´¹è€…ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å…³å¿ƒçš„æ˜¯å®¢æˆ·ç«¯æ‰€åœ¨çš„æœºå™¨ä¸Kafka Brokeræœºå™¨ä¹‹é—´çš„<strong>ç½‘ç»œå¾€è¿”æ—¶å»¶</strong>ï¼ˆRound-Trip Timeï¼ŒRTTï¼‰ã€‚é€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯ä½ è¦åœ¨å®¢æˆ·ç«¯æœºå™¨ä¸Špingä¸€ä¸‹Brokerä¸»æœºIPï¼Œçœ‹çœ‹RTTæ˜¯å¤šå°‘ã€‚</p><p>æˆ‘æ›¾ç»æœåŠ¡è¿‡ä¸€ä¸ªå®¢æˆ·ï¼Œä»–çš„Kafkaç”Ÿäº§è€…TPSç‰¹åˆ«ä½ã€‚æˆ‘ç™»åˆ°æœºå™¨ä¸Šä¸€çœ‹ï¼Œå‘ç°RTTæ˜¯1ç§’ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ— è®ºä½ æ€ä¹ˆè°ƒä¼˜Kafkaå‚æ•°ï¼Œæ•ˆæœéƒ½ä¸ä¼šå¤ªæ˜æ˜¾ï¼Œé™ä½ç½‘ç»œæ—¶å»¶åè€Œæ˜¯æœ€ç›´æ¥æœ‰æ•ˆçš„åŠæ³•ã€‚</p><p>é™¤äº†RTTï¼Œå®¢æˆ·ç«¯ç¨‹åºä¹Ÿæœ‰éå¸¸å…³é”®çš„çº¿ç¨‹éœ€è¦ä½ æ—¶åˆ»å…³æ³¨ã€‚å¯¹äºç”Ÿäº§è€…è€Œè¨€ï¼Œæœ‰ä¸€ä¸ªä»¥kafka-producer-network-threadå¼€å¤´çš„çº¿ç¨‹æ˜¯ä½ è¦å®æ—¶ç›‘æ§çš„ã€‚å®ƒæ˜¯è´Ÿè´£å®é™…æ¶ˆæ¯å‘é€çš„çº¿ç¨‹ã€‚ä¸€æ—¦å®ƒæŒ‚æ‰äº†ï¼ŒProducerå°†æ— æ³•æ­£å¸¸å·¥ä½œï¼Œä½†ä½ çš„Producerè¿›ç¨‹ä¸ä¼šè‡ªåŠ¨æŒ‚æ‰ï¼Œå› æ­¤ä½ æœ‰å¯èƒ½æ„ŸçŸ¥ä¸åˆ°ã€‚å¯¹äºæ¶ˆè´¹è€…è€Œè¨€ï¼Œå¿ƒè·³çº¿ç¨‹äº‹å…³Rebalanceï¼Œä¹Ÿæ˜¯å¿…é¡»è¦ç›‘æ§çš„ä¸€ä¸ªçº¿ç¨‹ã€‚å®ƒçš„åå­—ä»¥kafka-coordinator-heartbeat-threadå¼€å¤´ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œå®¢æˆ·ç«¯æœ‰ä¸€äº›å¾ˆé‡è¦çš„JMXæŒ‡æ ‡ï¼Œå¯ä»¥å®æ—¶å‘Šè¯‰ä½ å®ƒä»¬çš„è¿è¡Œæƒ…å†µã€‚</p><p>ä»Producerè§’åº¦ï¼Œä½ éœ€è¦å…³æ³¨çš„JMXæŒ‡æ ‡æ˜¯request-latencyï¼Œå³æ¶ˆæ¯ç”Ÿäº§è¯·æ±‚çš„å»¶æ—¶ã€‚è¿™ä¸ªJMXæœ€ç›´æ¥åœ°è¡¨å¾äº†Producerç¨‹åºçš„TPSï¼›è€Œä»Consumerè§’åº¦æ¥è¯´ï¼Œrecords-lagå’Œrecords-leadæ˜¯ä¸¤ä¸ªé‡è¦çš„JMXæŒ‡æ ‡ã€‚æˆ‘ä»¬åœ¨ä¸“æ <a href=\"https://time.geekbang.org/column/article/109238\">ç¬¬22è®²</a>è§£é‡Šè¿‡è¿™ä¸¤ä¸ªæŒ‡æ ‡çš„å«ä¹‰ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†èµ˜è¿°äº†ã€‚æ€»ä¹‹ï¼Œå®ƒä»¬ç›´æ¥åæ˜ äº†Consumerçš„æ¶ˆè´¹è¿›åº¦ã€‚å¦‚æœä½ ä½¿ç”¨äº†Consumer Groupï¼Œé‚£ä¹ˆæœ‰ä¸¤ä¸ªé¢å¤–çš„JMXæŒ‡æ ‡éœ€è¦ä½ å…³æ³¨ä¸‹ï¼Œä¸€ä¸ªæ˜¯join rateï¼Œå¦ä¸€ä¸ªæ˜¯sync rateã€‚å®ƒä»¬è¯´æ˜äº†Rebalanceçš„é¢‘ç¹ç¨‹åº¦ã€‚å¦‚æœåœ¨ä½ çš„ç¯å¢ƒä¸­ï¼Œå®ƒä»¬çš„å€¼å¾ˆé«˜ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ€è€ƒä¸‹Rebalanceé¢‘ç¹å‘ç”Ÿçš„åŸå› äº†ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œæˆ‘ä»¬æ¥å°ç»“ä¸€ä¸‹ã€‚ä»Šå¤©ï¼Œæˆ‘ä»‹ç»äº†ç›‘æ§Kafkaçš„æ–¹æ–¹é¢é¢ã€‚é™¤äº†ç›‘æ§Kafkaé›†ç¾¤ï¼Œæˆ‘è¿˜æ¨èä½ ä»ä¸»æœºå’ŒJVMçš„ç»´åº¦è¿›è¡Œç›‘æ§ã€‚å¯¹ä¸»æœºçš„ç›‘æ§ï¼Œå¾€å¾€æ˜¯æˆ‘ä»¬å®šä½å’Œå‘ç°é—®é¢˜çš„ç¬¬ä¸€æ­¥ã€‚JVMç›‘æ§åŒæ ·é‡è¦ã€‚è¦çŸ¥é“ï¼Œå¾ˆå¤šJavaè¿›ç¨‹ç¢°åˆ°çš„æ€§èƒ½é—®é¢˜æ˜¯æ— æ³•é€šè¿‡è°ƒæ•´Kafkaå‚æ•°æ˜¯è§£å†³çš„ã€‚æœ€åï¼Œæˆ‘ç½—åˆ—äº†ä¸€äº›æ¯”è¾ƒé‡è¦çš„Kafka JMXæŒ‡æ ‡ã€‚åœ¨ä¸‹ä¸€è®²ä¸­ï¼Œæˆ‘ä¼šä¸“é—¨ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨å„ç§å·¥å…·æ¥æŸ¥çœ‹è¿™äº›JMXæŒ‡æ ‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/28/93/28e6d8c2459b5d123f443173ac122c93.jpg?wh=2069*2560\" alt=\"\"></p><h2>å¼€æ”¾è®¨è®º</h2><p>è¯·åˆ†äº«ä¸€ä¸‹ä½ åœ¨ç›‘æ§Kafkaæ–¹é¢çš„å¿ƒå¾—ï¼Œä»¥åŠä½ çš„è¿ç»´æŠ€å·§ã€‚</p><p>æ¬¢è¿å†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"35 | è·¨é›†ç¾¤å¤‡ä»½è§£å†³æ–¹æ¡ˆMirrorMaker","id":120991},"right":{"article_title":"37 | ä¸»æµçš„Kafkaç›‘æ§æ¡†æ¶","id":127192}},"comments":[{"had_liked":false,"id":130843,"user_name":"æˆ‘å·²ç»è®¾ç½®äº†æ˜µç§°","can_delete":false,"product_type":"c1","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1567558998,"is_pvip":false,"replies":[{"id":"49120","content":"æ— è®ºæ˜¯Brokerç«¯è¿˜æ˜¯Clientsç«¯å¯åŠ¨å‰è¦å…ˆè®¾ç½®JMX_PORTï¼Œç„¶åä½¿ç”¨ä»»ä½•èƒ½å¤Ÿè¿æ¥JMX MBean Serverçš„å·¥å…·æˆ–æ¡†æ¶è¿æ¥ï¼ˆå¦‚JConsoleï¼‰å°±èƒ½çœ‹åˆ°äº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1567595827,"ip_address":"","comment_id":130843,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57402133846","product_id":100029201,"comment_content":"è¦æ€ä¹ˆçœ‹åˆ°JMXæŒ‡æ ‡å‘¢ï¼Œèƒ½å¦è®²ä¸‹","like_count":14,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466150,"discussion_content":"æ— è®ºæ˜¯Brokerç«¯è¿˜æ˜¯Clientsç«¯å¯åŠ¨å‰è¦å…ˆè®¾ç½®JMX_PORTï¼Œç„¶åä½¿ç”¨ä»»ä½•èƒ½å¤Ÿè¿æ¥JMX MBean Serverçš„å·¥å…·æˆ–æ¡†æ¶è¿æ¥ï¼ˆå¦‚JConsoleï¼‰å°±èƒ½çœ‹åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567595827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127299,"user_name":"r","can_delete":false,"product_type":"c1","uid":1408176,"ip_address":"","ucode":"34B6905DC23B3B","user_header":"https://static001.geekbang.org/account/avatar/00/15/7c/b0/0ee17e1b.jpg","comment_is_top":false,"comment_ctime":1566640539,"is_pvip":false,"replies":[{"id":"47282","content":"æ ¹æ®ç¤¾åŒºçš„æŠ¥å‘Šï¼ŒKafka 1.1.0ä¹‹åå¯ä»¥æ”¯æŒå•é›†ç¾¤20ä¸‡ä¸ªåˆ†åŒºã€‚å’Œé›†ç¾¤è§„æ¨¡ä¸èƒ½è¯´æ²¡æœ‰å…³ç³»ï¼Œä½†å…¶å®å’Œé›†ç¾¤æ€»çš„ç‰©ç†ç¡¬ä»¶èµ„æºæœ‰å¾ˆå¤§å…³ç³»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566781953,"ip_address":"","comment_id":127299,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27336444315","product_id":100029201,"comment_content":"è€å¸ˆæ€»ç»“çš„çœŸå¥½ã€‚æˆ‘æœ‰ä¸ªç–‘é—®ï¼Œæ²¡æ‰¾åˆ°ç›¸å…³èµ„æ–™åšæ”¯æ’‘ã€‚å°±æ˜¯ä¸€å¥—kafkaé›†ç¾¤ï¼Œæœ€å¤šèƒ½å®¹çº³å¤šå°‘ä¸ªtopic-partitionï¼Œè¿™ä¸ªæ˜¯é›†ç¾¤è§„æ¨¡æœ‰å…³å—ï¼Œ","like_count":7,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464424,"discussion_content":"æ ¹æ®ç¤¾åŒºçš„æŠ¥å‘Šï¼ŒKafka 1.1.0ä¹‹åå¯ä»¥æ”¯æŒå•é›†ç¾¤20ä¸‡ä¸ªåˆ†åŒºã€‚å’Œé›†ç¾¤è§„æ¨¡ä¸èƒ½è¯´æ²¡æœ‰å…³ç³»ï¼Œä½†å…¶å®å’Œé›†ç¾¤æ€»çš„ç‰©ç†ç¡¬ä»¶èµ„æºæœ‰å¾ˆå¤§å…³ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566781953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135799,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1569282880,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18749152064","product_id":100029201,"comment_content":"æ„Ÿè§‰ç¦»å¼€å¹³å°è‡ªå·±çœŸçš„ä»€ä¹ˆéƒ½ä¸æ˜¯ï¼Œå…¬å¸å†…éƒ¨çš„ç›‘æ§æŒºå…¨çš„ï¼Œå•æœºçš„CPU&#47;ç¡¬ç›˜&#47;å†…å­˜&#47;ç½‘ç»œ&#47;jvmç­‰éƒ½æœ‰ï¼Œä¹Ÿæœ‰é’ˆå¯¹æ–¹æ³•çº§åˆ«çš„æ€§èƒ½&#47;å¯ç”¨ç‡&#47;è°ƒç”¨æ¬¡æ•°ï¼Œé’ˆå¯¹MQæœ‰æµå…¥&#47;æµå‡º&#47;ç§¯å‹ç­‰ï¼Œè¿™é‡Œçš„æ¯ä¸ªç›‘æ§å·¥å…·éƒ½æœ‰ä¸“é—¨çš„å›¢é˜Ÿæ¥è´Ÿè´£ï¼Œåˆ†å·¥æ¯”è¾ƒç»†ï¼Œç°åœ¨æƒ³ä¸€æƒ³ä¸šåŠ¡å¼€å‘ï¼Œå¦‚æœå¯¹ä¸šåŠ¡ä¸ç²¾é€šçœŸæ˜¯æ²¡æœ‰ä»€ä¹ˆå­˜åœ¨æ„Ÿå’Œä»·å€¼çš„ã€‚<br>æ„Ÿè§‰ç›‘æ§æœ€å¤§çš„ç—›ç‚¹æ˜¯æ€ä¹ˆè·å–åˆ°å¯¹åº”çš„ç›‘æ§ä¿¡æ¯ï¼Œåªè¦èƒ½è·å–ç›‘æ§ä¿¡æ¯ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ€ä¹ˆèšåˆå’Œæ±‡æ€»å±•ç¤ºçš„é—®é¢˜äº†ã€‚","like_count":5,"discussions":[{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544934,"discussion_content":"æ˜¯çš„ï¼Œä¸šåŠ¡éƒ¨é—¨åŸºæœ¬éƒ½æ²¡æœ‰åº•å±‚åŸºç¡€æƒé™ï¼Œä½ æƒ³åšçš„éƒ½æ˜¯åˆ«äººå¯ä»¥åšçš„äº‹ï¼Œåˆ«äººä¸ä¼šæŠŠé¥­ç¢—é€ç»™ä½ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641786514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127543,"user_name":"ykkk88","can_delete":false,"product_type":"c1","uid":1068585,"ip_address":"","ucode":"A1BCFC2F0D1022","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/29/1be3dd40.jpg","comment_is_top":false,"comment_ctime":1566739118,"is_pvip":false,"replies":[{"id":"47263","content":"æˆ‘è§‰å¾—Kafka Managerå°±æŒºä¸é”™çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566780221,"ip_address":"","comment_id":127543,"utype":1}],"discussion_count":2,"race_medal":2,"score":"14451641006","product_id":100029201,"comment_content":"æœ‰ä»€ä¹ˆå¥½çš„å¼€æºçš„ç›‘æ§å·¥å…·ä¹ˆ ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464542,"discussion_content":"æˆ‘è§‰å¾—Kafka Managerå°±æŒºä¸é”™çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566780221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008176,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/30/a8df1a4e.jpg","nickname":"å¼ äº®","note":"","ucode":"06868525059967","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349593,"discussion_content":"https://github.com/didi/Logi-KafkaManager  å¼ºçƒˆæ¨èä½“éªŒä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613358013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127221,"user_name":"wxr","can_delete":false,"product_type":"c1","uid":1415450,"ip_address":"","ucode":"1DA03A580B25CD","user_header":"https://static001.geekbang.org/account/avatar/00/15/99/1a/53ed3004.jpg","comment_is_top":false,"comment_ctime":1566614131,"is_pvip":false,"replies":[{"id":"47283","content":"è¿™ä¸ªå–å†³äºä½ å¯¹æ¶ˆè´¹å»¶æ—¶çš„å®šä¹‰ã€‚ä»Kafkaçš„è§’åº¦ï¼Œå½“pollæ–¹æ³•è¿”å›åï¼Œæ¶ˆæ¯å·²ç»ç®—æ˜¯è¢«æ¶ˆè´¹äº†ï¼Œä½†é€šå¸¸æˆ‘ä»¬è·å–åˆ°æ¶ˆæ¯åè¿˜è¦å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œå¦‚æœä½ è®¤ä¸ºå¤„ç†å®Œæˆåæ‰ç®—æ˜¯æ¶ˆè´¹å°±è¦åŠ ä¸Šè¿™éƒ¨åˆ†çš„æ—¶é—´ï¼Œä½†å¤„ç†é€»è¾‘ã€å·¥å…·ã€æ–¹æ³•éƒ½ä¸å°½ç›¸åŒï¼Œå› æ­¤ä½ éœ€è¦è‡ªå·±æ¥ç›‘æ§æ¶ˆæ¯å¤„ç†çš„æ€»æ—¶é—´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566782052,"ip_address":"","comment_id":127221,"utype":1}],"discussion_count":6,"race_medal":0,"score":"14451516019","product_id":100029201,"comment_content":"æ€æ ·æ¯”è¾ƒå¥½çš„ç›‘æ§æ¶ˆè´¹å»¶æ—¶å‘¢","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464383,"discussion_content":"è¿™ä¸ªå–å†³äºä½ å¯¹æ¶ˆè´¹å»¶æ—¶çš„å®šä¹‰ã€‚ä»Kafkaçš„è§’åº¦ï¼Œå½“pollæ–¹æ³•è¿”å›åï¼Œæ¶ˆæ¯å·²ç»ç®—æ˜¯è¢«æ¶ˆè´¹äº†ï¼Œä½†é€šå¸¸æˆ‘ä»¬è·å–åˆ°æ¶ˆæ¯åè¿˜è¦å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œå¦‚æœä½ è®¤ä¸ºå¤„ç†å®Œæˆåæ‰ç®—æ˜¯æ¶ˆè´¹å°±è¦åŠ ä¸Šè¿™éƒ¨åˆ†çš„æ—¶é—´ï¼Œä½†å¤„ç†é€»è¾‘ã€å·¥å…·ã€æ–¹æ³•éƒ½ä¸å°½ç›¸åŒï¼Œå› æ­¤ä½ éœ€è¦è‡ªå·±æ¥ç›‘æ§æ¶ˆæ¯å¤„ç†çš„æ€»æ—¶é—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566782052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1097577,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bf/69/dbfd10f7.jpg","nickname":"è¿½å…‰è€…","note":"","ucode":"B45B3C214219BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6595,"discussion_content":"å¤§ç¥ï¼Œè¯·é—®ä¸ºä»€ä¹ˆæˆ‘ç”¨ Metricbeat ç›‘æ§ kafka çš„æ—¶å€™å¯åŠ¨ kafka æ¨¡å—ä¼šæç¤ºï¼škafka/log.go:53 Connected to broker at 10.162.3.90:9092 (unregistered)ï¼Œæ²¡æœ‰é‡‡é›†åˆ°çš„ kafka çš„æ•°æ®ï¼ˆè¿™å¥—é›†ç¾¤ä¹Ÿæ²¡æœ‰å¼€å¯å®‰å…¨è®¤è¯å‘€ï¼‰ï¼Œä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶ï¼š\ngrep -vE &#34;^\\s*#|^$&#34; modules.d/kafka.yml\n- module: kafka\n  metricsets:\n    - partition\n    - consumergroup\n  period: 10s\n  hosts: [&#34;10.162.3.90:9092&#34;]\n  client_id: xl\n  retries: 3\n  backoff: 250ms\nè¿˜æœ›ä¸åèµæ•™ï¼Œä¸‡åˆ†æ„Ÿæ¿€ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566986629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1588517,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJerY3WgO21tbWvSCZPicA8iboGxXIawtNk8hcQcicPLPVETgHkpe7GcUYN2DMKiaQial0p8Hk49TPEHEA/132","nickname":"Planet","note":"","ucode":"B76C2DDE853C42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6053,"discussion_content":"metricbeatå¯ä»¥ç›‘æ§kafkaæ¶ˆè´¹å»¶æ—¶","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566640669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1097577,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bf/69/dbfd10f7.jpg","nickname":"è¿½å…‰è€…","note":"","ucode":"B45B3C214219BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1588517,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJerY3WgO21tbWvSCZPicA8iboGxXIawtNk8hcQcicPLPVETgHkpe7GcUYN2DMKiaQial0p8Hk49TPEHEA/132","nickname":"Planet","note":"","ucode":"B76C2DDE853C42","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6663,"discussion_content":"å¤§ç¥ï¼Œè¯·é—®ä¸ºä»€ä¹ˆæˆ‘ç”¨ Metricbeat ç›‘æ§ kafka çš„æ—¶å€™å¯åŠ¨ kafka æ¨¡å—ä¼šæç¤ºï¼škafka/log.go:53 Connected to broker at 10.162.3.90:9092 (unregistered)ï¼Œæ²¡æœ‰é‡‡é›†åˆ°çš„ kafka çš„æ•°æ®ï¼ˆè¿™å¥—é›†ç¾¤ä¹Ÿæ²¡æœ‰å¼€å¯å®‰å…¨è®¤è¯å‘€ï¼‰ï¼Œä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶ï¼š\ngrep -vE &#34;^\\s*#|^$&#34; modules.d/kafka.yml\n- module: kafka\n  metricsets:\n    - partition\n    - consumergroup\n  period: 10s\n  hosts: [&#34;10.162.3.90:9092&#34;]\n  client_id: xl\n  retries: 3\n  backoff: 250ms\nè¿˜æœ›ä¸åèµæ•™ï¼Œä¸‡åˆ†æ„Ÿæ¿€ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567041708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6053,"ip_address":""},"score":6663,"extra":""},{"author":{"id":1588517,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJerY3WgO21tbWvSCZPicA8iboGxXIawtNk8hcQcicPLPVETgHkpe7GcUYN2DMKiaQial0p8Hk49TPEHEA/132","nickname":"Planet","note":"","ucode":"B76C2DDE853C42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1097577,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bf/69/dbfd10f7.jpg","nickname":"è¿½å…‰è€…","note":"","ucode":"B45B3C214219BB","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":7087,"discussion_content":"çœ‹ä¸‹kafkaå¼€å¯jmxæ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567347223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6663,"ip_address":""},"score":7087,"extra":""}]},{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544935,"discussion_content":"burrowç®—æ˜¯æ¯”è¾ƒå¥½çš„ç›‘æ§lagçš„å·¥å…·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641786550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187716,"user_name":"å¿«è·‘","can_delete":false,"product_type":"c1","uid":1564645,"ip_address":"","ucode":"90ED7E6D40C58E","user_header":"https://static001.geekbang.org/account/avatar/00/17/df/e5/65e37812.jpg","comment_is_top":false,"comment_ctime":1584198535,"is_pvip":false,"replies":[{"id":"72594","content":"æ— æ³•çœ‹å‡ºã€‚ä¸è¿‡ä½ å¯ä»¥ç›‘æ§ä¸€ä¸‹brokerçš„ç£ç›˜IOï¼Œå¯¹äºé‚£äº›åŒæ­¥çš„consumerè€Œè¨€ï¼Œç£ç›˜IOè¯»åº”è¯¥å¾ˆå°‘æ‰å¯¹","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1584320949,"ip_address":"","comment_id":187716,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10174133127","product_id":100029201,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸‹<br>ä»ç›‘æ§ä¸Šèƒ½çœ‹åˆ°è¯»å–kafkaæ•°æ®æ˜¯ä»é¡µç¼“å­˜è¿˜æ˜¯ç£ç›˜ä¹ˆï¼Œå¯¹åº”çš„æŒ‡æ ‡æœ‰å“ªäº›ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487209,"discussion_content":"æ— æ³•çœ‹å‡ºã€‚ä¸è¿‡ä½ å¯ä»¥ç›‘æ§ä¸€ä¸‹brokerçš„ç£ç›˜IOï¼Œå¯¹äºé‚£äº›åŒæ­¥çš„consumerè€Œè¨€ï¼Œç£ç›˜IOè¯»åº”è¯¥å¾ˆå°‘æ‰å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584320949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149223,"user_name":"frenco","can_delete":false,"product_type":"c1","uid":1718244,"ip_address":"","ucode":"CF894D1CC77252","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/W1qXe7yEB8C9fsossNLH59OrNBrEhxnibaMNfKro6YtKyL3thNN3AMyGyme2el0IgzwGpiaycFwwSvKLINITjhzA/132","comment_is_top":false,"comment_ctime":1573176682,"is_pvip":false,"replies":[{"id":"57423","content":"é‚£å°±å•å°å¤šbrokerå§ï¼Œä¸è¿‡ç½‘å¡æœ€å¥½ä¸‡å…†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1573211892,"ip_address":"","comment_id":149223,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10163111274","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œ è¯·æ•™ä¸ªé—®é¢˜ï¼š    æŒ‰æ‚¨ä¹‹å‰æœ‰ä¸ªæ¨èçš„é…ç½®kafkaå†…å­˜çš„è¯´æ³•ï¼Œä¸€èˆ¬å †å†…å­˜é…ç½®6Gå°±å¥½äº†ã€‚ é‚£æ–°ç”Ÿä»£å’Œè€å¹´ä»£é»˜è®¤2ï¼š1  åˆ†é…ã€‚      å¦‚æœåªéœ€è¦6Gçš„å†…å­˜ï¼Œ  æˆ‘ä»¬ç”Ÿäº§çš„æœºå™¨ä¸€èˆ¬éƒ½æ˜¯64Gä»¥ä¸Šå†…å­˜ï¼Œ é‚£æœºå™¨æ˜¯ä¸æ˜¯æœ‰å¾ˆå¤§æµªè´¹å‘¢ã€‚","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473783,"discussion_content":"é‚£å°±å•å°å¤šbrokerå§ï¼Œä¸è¿‡ç½‘å¡æœ€å¥½ä¸‡å…†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573211892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1094898,"avatar":"https://static001.geekbang.org/account/avatar/00/10/b4/f2/b71d1a44.jpg","nickname":"ç‹å®‡","note":"","ucode":"989FF6DCBAC63A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324672,"discussion_content":"kafkaå †å†…å­˜ä½¿ç”¨å¾ˆå°ï¼Œå¤§é‡çš„å†…å­˜éƒ½æ˜¯ç»™æ“ä½œç³»ç»Ÿç¼“å­˜ä½¿ç”¨ï¼Œå……åˆ†åˆ©ç”¨é¡µç¼“å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605150739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133851,"user_name":"Geek_72a3d3","can_delete":false,"product_type":"c1","uid":1622277,"ip_address":"","ucode":"586CCB1F0374A4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIFrA5ztRGqQTFYIMoBVFgvlhH8GZOCj0K6QLhddcACsugr3BABZdWdSrNobhAWcuEb1W1vS2yicDg/132","comment_is_top":false,"comment_ctime":1568684173,"is_pvip":false,"replies":[{"id":"51424","content":"3ä¸ªå€¼çš„æ’åºæ˜¯è¿‡å»1åˆ†é’Ÿï¼Œ5åˆ†é’Ÿå’Œ15åˆ†é’Ÿï¼Œå› æ­¤è¡¨æ˜loadè¶Šæ¥è¶Šå¤§","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1568767908,"ip_address":"","comment_id":133851,"utype":1}],"discussion_count":4,"race_medal":0,"score":"10158618765","product_id":100029201,"comment_content":"â€œåŒæ—¶ï¼ŒLoad å€¼ä¸€ç›´åœ¨å¢åŠ ï¼Œä¹Ÿè¯´æ˜è¿™å°ä¸»æœºä¸Šçš„è´Ÿè½½è¶Šæ¥è¶Šå¤§ã€‚â€<br>è€å¸ˆï¼Œæ‚¨å¥½ï¼ŒLoadå€¼å¥½åƒæ˜¯è¶Šæ¥è¶Šå°ã€‚ï¼Ÿï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467532,"discussion_content":"3ä¸ªå€¼çš„æ’åºæ˜¯è¿‡å»1åˆ†é’Ÿï¼Œ5åˆ†é’Ÿå’Œ15åˆ†é’Ÿï¼Œå› æ­¤è¡¨æ˜loadè¶Šæ¥è¶Šå¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568767908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"è°¢å°è·¯","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310191,"discussion_content":"æ²¡æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601685162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIFrA5ztRGqQTFYIMoBVFgvlhH8GZOCj0K6QLhddcACsugr3BABZdWdSrNobhAWcuEb1W1vS2yicDg/132","nickname":"Geek_72a3d3","note":"","ucode":"586CCB1F0374A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14514,"discussion_content":"æ‡‚äº†ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568768818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1009000,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/68/93c05ab0.jpg","nickname":"laugh","note":"","ucode":"1CB29054325D1D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1622277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIFrA5ztRGqQTFYIMoBVFgvlhH8GZOCj0K6QLhddcACsugr3BABZdWdSrNobhAWcuEb1W1vS2yicDg/132","nickname":"Geek_72a3d3","note":"","ucode":"586CCB1F0374A4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282637,"discussion_content":"ğŸ˜†æˆ‘ä¹Ÿæ‡‚äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592034672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":14514,"ip_address":""},"score":282637,"extra":""}]}]},{"had_liked":false,"id":129284,"user_name":"è°¦å¯»","can_delete":false,"product_type":"c1","uid":1033639,"ip_address":"","ucode":"07160FAFAD08F7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/a7/e32dcfe7.jpg","comment_is_top":false,"comment_ctime":1567078801,"is_pvip":false,"replies":[{"id":"48161","content":"å¦‚æœgroupä¸ä½¿ç”¨äº†ï¼Œå®ƒçš„çŠ¶æ€å°±æ˜¯nonactiveäº†ï¼Œä¸€æ®µæ—¶é—´ä¹‹åKafkaä¼šè‡ªåŠ¨åˆ é™¤çš„å®ƒæ•°æ®ã€‚å¦‚æœåˆ¤æ–­çŠ¶æ€çš„è¯ï¼Œæ–°ä¸€ç‚¹ç‰ˆæœ¬çš„Kafkaå¯ä»¥ä½¿ç”¨kafka-consumer-groups --describe --group *** æ¥æŸ¥çœ‹groupçŠ¶æ€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1567125568,"ip_address":"","comment_id":129284,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10157013393","product_id":100029201,"comment_content":"è¯·æ•™ä¸‹è€å¸ˆï¼Œæˆ‘ä»¬æœ€è¿‘é‡åˆ°ä¸€ä¸ªç›‘æ§é—®é¢˜ï¼Œç›‘æ§å„ä¸ªtopicçš„æ¶ˆæ¯å †ç§¯ï¼Œå‘ç°å¦‚æœä¸šåŠ¡æ–¹ç”±äºæœåŠ¡ä¸‹çº¿ï¼Œä¸ä½¿ç”¨æŸä¸ªconsume groupäº†ï¼Œç»“æœè¿™ä¸ªgroupçš„æ¶ˆæ¯å †ç§¯ä¼šä¸€ç›´å¢åŠ ï¼Œè¿ç»´å°±ä¼šæ”¶åˆ°ç›‘æ§å‘Šè­¦ï¼Œä½†æ˜¯è¿ç»´å¹¶ä¸å¥½åˆ¤æ–­å“ªä¸ªgroupå·²ç»ä¸ä½¿ç”¨äº†ï¼Œè¿™ä¸ªèƒ½æœ‰ä»€ä¹ˆè‡ªåŠ¨åŒ–çš„æ‰‹æ®µå—","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465382,"discussion_content":"å¦‚æœgroupä¸ä½¿ç”¨äº†ï¼Œå®ƒçš„çŠ¶æ€å°±æ˜¯nonactiveäº†ï¼Œä¸€æ®µæ—¶é—´ä¹‹åKafkaä¼šè‡ªåŠ¨åˆ é™¤çš„å®ƒæ•°æ®ã€‚å¦‚æœåˆ¤æ–­çŠ¶æ€çš„è¯ï¼Œæ–°ä¸€ç‚¹ç‰ˆæœ¬çš„Kafkaå¯ä»¥ä½¿ç”¨kafka-consumer-groups --describe --group *** æ¥æŸ¥çœ‹groupçŠ¶æ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567125568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544940,"discussion_content":"æŒ‰è€å¸ˆçš„è¯å°±æ˜¯æ—§ç‰ˆæœ¬çš„Kafkaæ²¡æ³•åˆ¤å®šäº†æ˜¯å—ï¼Ÿé‚£åªèƒ½çœ‹lagå¤§åˆ°æŸä¸ªç¨‹åº¦äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641786670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127201,"user_name":"å¤–æ˜Ÿäºº","can_delete":false,"product_type":"c1","uid":1132861,"ip_address":"","ucode":"D8469B13F2AB37","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/3d/4ac37cc2.jpg","comment_is_top":false,"comment_ctime":1566609673,"is_pvip":false,"replies":[{"id":"47287","content":"å¦‚æœæ€§èƒ½okayè€Œä»…ä»…æ˜¯ä½ è§‰å¾—ä¸å¤ªå¥½ï¼Œé‚£ä¹ˆæˆ‘è®¤ä¸ºå…ˆä¸ç”¨æ‹†åˆ†ã€‚å•ä¸ªtopicæœ€å¤šèƒ½æœ‰å¤šå°‘partitionæ²¡æœ‰å®šæ•°ï¼Œä¸»è¦è¿˜æ˜¯çœ‹åº•å±‚ç‰©ç†èµ„æºã€‚å½“ç„¶åˆ†åŒºæ•°è¿‡å¤šï¼Œä½¿å¾—brokerä¸Šå¹³å‡åˆ†åŒºæ•°å¢åŠ çš„ç¡®ä¼šé™ä½Kafkaçš„TPSã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566782190,"ip_address":"","comment_id":127201,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10156544265","product_id":100029201,"comment_content":"ä½ å¥½ï¼Œå•ä¸ªtopicå¯ä»¥æ”¯æ’‘çš„æœ€å¤špartitionä¸ªæ•°å¤šå°‘å•Šï¼Ÿæˆ‘ä»¬ç”Ÿäº§ä¸Šæœ‰ä¸ªtopicè¶…çº§å¤§ï¼Œå äº†æ•´ä¸ªé›†ç¾¤çš„ä¸€åŠä»¥ä¸Šçš„æµé‡ï¼Œè¿™ç§æƒ…å†µæ˜¯éœ€è¦æ‹†åˆ†å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464373,"discussion_content":"å¦‚æœæ€§èƒ½okayè€Œä»…ä»…æ˜¯ä½ è§‰å¾—ä¸å¤ªå¥½ï¼Œé‚£ä¹ˆæˆ‘è®¤ä¸ºå…ˆä¸ç”¨æ‹†åˆ†ã€‚å•ä¸ªtopicæœ€å¤šèƒ½æœ‰å¤šå°‘partitionæ²¡æœ‰å®šæ•°ï¼Œä¸»è¦è¿˜æ˜¯çœ‹åº•å±‚ç‰©ç†èµ„æºã€‚å½“ç„¶åˆ†åŒºæ•°è¿‡å¤šï¼Œä½¿å¾—brokerä¸Šå¹³å‡åˆ†åŒºæ•°å¢åŠ çš„ç¡®ä¼šé™ä½Kafkaçš„TPSã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566782190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263360,"user_name":"å¤æ—¥","can_delete":false,"product_type":"c1","uid":1214167,"ip_address":"","ucode":"A5DBEB3E437728","user_header":"https://static001.geekbang.org/account/avatar/00/12/86/d7/33d628b1.jpg","comment_is_top":false,"comment_ctime":1606115439,"is_pvip":false,"replies":[{"id":"95857","content":"é€šå¸¸ttlè¶…è¿‡500mså°±è¦å…³æ³¨ä¸‹äº†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1606441134,"ip_address":"","comment_id":263360,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5901082735","product_id":100029201,"comment_content":"ttlä¸€èˆ¬å¤šå°‘ä»¥å†…æ¯”è¾ƒæ­£å¸¸ï¼Œæ¯”å¦‚åœ¨è€ƒè™‘åœ¨åŒæ´»ä¸­å¿ƒæ­å»ºä¸€å¥—kafkaé›†ç¾¤çš„æ—¶å€™ï¼Œæ€ä¹ˆåˆ¤æ–­ä¸ä¼šç”±äºèŠ‚ç‚¹ä¹‹é—´çš„ä¼ è¾“å»¶æ—¶å¯¼è‡´kafkaæ€§èƒ½ä¸é«˜ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510162,"discussion_content":"é€šå¸¸ttlè¶…è¿‡500mså°±è¦å…³æ³¨ä¸‹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606441134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222123,"user_name":"èƒ¡å°ç¦¾","can_delete":false,"product_type":"c1","uid":1132315,"ip_address":"","ucode":"1C23B7492C0C9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","comment_is_top":false,"comment_ctime":1590680493,"is_pvip":false,"replies":[{"id":"81991","content":"ç›®å‰Kafkaçš„consumer groupå®Œå…¨ä¸ä½¿ç”¨ZooKeeperæ¥ä¿å­˜å…ƒæ•°æ®äº†ï¼Œå› æ­¤æ— è®ºä»»ä½•çŠ¶æ€çš„groupåœ¨ZKä¸Šéƒ½æ²¡æœ‰èŠ‚ç‚¹äº†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1590750264,"ip_address":"","comment_id":222123,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5885647789","product_id":100029201,"comment_content":"â€œå¦‚æœgroupä¸ä½¿ç”¨äº†ï¼Œå®ƒçš„çŠ¶æ€å°±æ˜¯nonactiveäº†â€<br><br>è¿™ä¸ªnonactive åœ¨ZKä¸Šæ˜¯ä¸æ˜¯æœ‰èŠ‚ç‚¹ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496675,"discussion_content":"ç›®å‰Kafkaçš„consumer groupå®Œå…¨ä¸ä½¿ç”¨ZooKeeperæ¥ä¿å­˜å…ƒæ•°æ®äº†ï¼Œå› æ­¤æ— è®ºä»»ä½•çŠ¶æ€çš„groupåœ¨ZKä¸Šéƒ½æ²¡æœ‰èŠ‚ç‚¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590750264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129435,"user_name":"è¿½å…‰è€…","can_delete":false,"product_type":"c1","uid":1097577,"ip_address":"","ucode":"B45B3C214219BB","user_header":"https://static001.geekbang.org/account/avatar/00/10/bf/69/dbfd10f7.jpg","comment_is_top":false,"comment_ctime":1567128862,"is_pvip":true,"replies":[{"id":"48225","content":"è¿™é‡Œéƒ½æ˜¯IINFOæ—¥å¿—çœ‹ä¸å‡ºæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæœ‰å…¶ä»–æ—¥å¿—å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1567133397,"ip_address":"","comment_id":129435,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5862096158","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæƒ³è¯·æ•™ä¸€ä¸ªå…³äº Â Metricbeat é‡‡é›† kafka æ•°æ®çš„é—®é¢˜ï¼š<br>é…ç½®å¥½ modules.d&#47;kafka.yml å¯åŠ¨ metricbeat é‡‡é›†ä¸åˆ°æ•°æ®ï¼Œæç¤ºä¿¡æ¯ï¼š<br>2019-08-29T16:13:33.827+0800    INFO    kafka&#47;log.go:53 kafka message: Successful SASL handshake<br>2019-08-29T16:13:33.828+0800    INFO    kafka&#47;log.go:53 SASL authentication successful with broker 10.162.7.2:9092:4 - [0 0 0 0]<br>2019-08-29T16:13:33.828+0800    INFO    kafka&#47;log.go:53 Connected to broker at 10.162.7.2:9092 (unregistered)<br>2019-08-29T16:13:33.832+0800    INFO    kafka&#47;log.go:53 Closed connection to broker 10.162.7.2:9092<br>system çš„å¯ä»¥é‡‡é›†åˆ°ï¼Œè¯·é—®è¿™æ˜¯ä»€ä¹ˆåŸå› å‘€<br>é…ç½®æ–‡ä»¶ï¼š<br>- module: kafka<br>metricsets:<br>- partition<br>- consumergroup<br>period: 10s<br>hosts: [&quot;10.162.3.90:9092&quot;]<br>client_id: xl<br>retries: 3<br>backoff: 250ms<br>topics: []<br>username: &quot;admin&quot;<br>password: &quot;admin&quot;","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465468,"discussion_content":"è¿™é‡Œéƒ½æ˜¯IINFOæ—¥å¿—çœ‹ä¸å‡ºæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæœ‰å…¶ä»–æ—¥å¿—å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567133397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170970,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erJFlHhylrbLANtehiaX50wgVa2Z1ibQAdLpgyW4gCpEyOKEI9bPNZZBiabrP2oCleZWc2KKyKADz8tg/132","nickname":"é˜¿ä¸½","note":"","ucode":"C01D32E7165302","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203421,"discussion_content":"çœ‹çœ‹ç³»ç»Ÿæ—¥å¿—/var/log/messagesï¼Œå¦‚æœmetricbeatä½¿ç”¨rpmæˆ–yumå®‰è£…çš„è¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584027533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1097577,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bf/69/dbfd10f7.jpg","nickname":"è¿½å…‰è€…","note":"","ucode":"B45B3C214219BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6842,"discussion_content":"æ²¡æœ‰ï¼Œéƒ½æ˜¯ INFO Connected to broker at 10.162.7.2:9092 (unregistered) æœªæ³¨å†Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567136419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322533,"user_name":"ahu0605","can_delete":false,"product_type":"c1","uid":1057150,"ip_address":"","ucode":"352BF972A369A7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI34ZlT6HSOtJBeTvTvfNLfYECDdJXnHCMj2BHdrRaqRLnZiafnxmKQ2aXoQkW1RLQOyt0tlyzEWIA/132","comment_is_top":false,"comment_ctime":1637471549,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637471549","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œæ‚¨å¯¹kafkaéƒ¨ç½²k8sä¸­æœ‰ä»€ä¹ˆå»ºè®®å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":278806,"user_name":"å¼ äº®","can_delete":false,"product_type":"c1","uid":1008176,"ip_address":"","ucode":"06868525059967","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/30/a8df1a4e.jpg","comment_is_top":false,"comment_ctime":1613357898,"is_pvip":false,"replies":[{"id":"101514","content":"æˆ‘è§‰å¾—å¯è¡Œï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1613780725,"ip_address":"","comment_id":278806,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1613357898","product_id":100029201,"comment_content":"Kafkaç›‘æ§æ˜¯ä¸€ä¸ªéå¸¸ä¸“ä¸šå’Œä½“ç³»åŒ–çš„äº‹æƒ…ï¼ŒElasticearchåŸºæœ¬å°†ç³»ç»ŸæŒ‡æ ‡ã€JVMæŒ‡æ ‡ä½œä¸ºMetricä¸ŠæŠ¥å‡ºæ¥è‡ªé—­ç¯éå¸¸æ–¹ä¾¿å®ç”¨ï¼Œåœ¨å¼€æºLogi-KafkaManagerçš„æ—¶å€™ï¼Œæˆ‘ä¸€ç›´è®¡åˆ’å°†è¿™äº›æŒ‡æ ‡é€šè¿‡JMXç›´æ¥æš´éœ²å‡ºæ¥ï¼Œä½ æ€ä¹ˆçœ‹ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515508,"discussion_content":"æˆ‘è§‰å¾—å¯è¡Œï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613780725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278035,"user_name":"ä½ ä¸ºå•¥é‚£ä¹ˆç‰›","can_delete":false,"product_type":"c1","uid":1503506,"ip_address":"","ucode":"1ABC604A54A8F6","user_header":"https://static001.geekbang.org/account/avatar/00/16/f1/12/7dac30d6.jpg","comment_is_top":false,"comment_ctime":1612711590,"is_pvip":false,"replies":[{"id":"101014","content":"è¿‡å¥–äº†~","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1612833141,"ip_address":"","comment_id":278035,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612711590","product_id":100029201,"comment_content":"è¿™åº”è¯¥æ˜¯æœ€æœ‰æ°´å¹³çš„ä¸€ç¯‡æ–‡ç« äº†ï¼Œç»éªŒå€¼è¶…é«˜","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515260,"discussion_content":"è¿‡å¥–äº†~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612833141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273241,"user_name":"è°è°","can_delete":false,"product_type":"c1","uid":1203114,"ip_address":"","ucode":"9651913B7B7ECC","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/aa/777d7f88.jpg","comment_is_top":false,"comment_ctime":1610505671,"is_pvip":false,"replies":[{"id":"99089","content":"è¿™ä¸¤ä¸ªæ¦‚å¿µæ²¡æœ‰ç›´æ¥çš„å…³è”å§","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1610620767,"ip_address":"","comment_id":273241,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1610505671","product_id":100029201,"comment_content":"è€å¸ˆï¼Œtpsä¸æ˜¯åº”è¯¥åŒ…æ‹¬ttlï¼Ÿä»å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯å¤„ç†å®Œæˆè¿”å›ï¼Œæ–‡ä¸­ä¸ºä»€ä¹ˆè¯´tpså°è€Œttlå¤§å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513535,"discussion_content":"è¿™ä¸¤ä¸ªæ¦‚å¿µæ²¡æœ‰ç›´æ¥çš„å…³è”å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610620767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164672,"user_name":"Rosy","can_delete":false,"product_type":"c1","uid":1757800,"ip_address":"","ucode":"74B015C848EA39","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d2/68/2149f518.jpg","comment_is_top":false,"comment_ctime":1577070184,"is_pvip":true,"replies":[{"id":"62875","content":"èƒ½è¯¦ç»†è§£é‡Šä¸‹â€åˆ æ‰brokerâ€çš„å«ä¹‰å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1577149279,"ip_address":"","comment_id":164672,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577070184","product_id":100029201,"comment_content":"kafkaä¼šé¢‘ç¹åœ°åˆ æ‰brokerï¼Œå¯¼è‡´é¢‘ç¹åœ°åˆ‡æ¢leaderï¼Œè¿™æ˜¯ä»€ä¹ˆæƒ…å†µå‘¢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478858,"discussion_content":"èƒ½è¯¦ç»†è§£é‡Šä¸‹â€åˆ æ‰brokerâ€çš„å«ä¹‰å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577149279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157233,"user_name":"é£ä¸­èŠ±","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1575092235,"is_pvip":false,"replies":[{"id":"60317","content":"å¤§æ•°æ®KafkaæŠ€æœ¯åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1575112329,"ip_address":"","comment_id":157233,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575092235","product_id":100029201,"comment_content":"è€å¸ˆä½ çš„å…¬ä¼—å·æ€ä¹ˆæ‰¾åˆ°å‘¢","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476370,"discussion_content":"å¤§æ•°æ®KafkaæŠ€æœ¯åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575112329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147180,"user_name":"çš‡ç”«","can_delete":false,"product_type":"c1","uid":1200408,"ip_address":"","ucode":"1624C5283C68DC","user_header":"https://static001.geekbang.org/account/avatar/00/12/51/18/0b0c105b.jpg","comment_is_top":false,"comment_ctime":1572833331,"is_pvip":false,"replies":[{"id":"56941","content":"ä¸å¤ªæ¸…æ¥škafka manager APIæ˜¯æ€ä¹ˆå®ç°çš„ã€‚ä½ å¯ä»¥ç”¨ä¸‹jmxtoolå·¥å…·å»å®æ—¶ç›‘æ§ä¸‹Kafkaæä¾›çš„JMXï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å»¶è¿Ÿå‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1572915887,"ip_address":"","comment_id":147180,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572833331","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæœ€è¿‘é‡åˆ°ä¸€ä¸ªå®è·µé—®é¢˜ï¼Œé€šè¿‡è°ƒç”¨kafka manageæä¾›çš„apiè·å–topicçš„æµå…¥æ¶ˆæ¯æ•°é‡ï¼Œæœ‰æ—¶å€™æœ‰å»¶æ—¶ï¼Œåœ¨ç”Ÿäº§è€…æµé‡æ¿€å¢çš„æƒ…å†µä¸‹ï¼Œapiä¸èƒ½åŠæ—¶è¿”å›æ¶ˆæ¯æµå…¥æ•°é‡ï¼Œæƒ³é—®ä¸‹è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Œæœ‰å•¥è§£å†³åŠæ³•å—ï¼Ÿè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473182,"discussion_content":"ä¸å¤ªæ¸…æ¥škafka manager APIæ˜¯æ€ä¹ˆå®ç°çš„ã€‚ä½ å¯ä»¥ç”¨ä¸‹jmxtoolå·¥å…·å»å®æ—¶ç›‘æ§ä¸‹Kafkaæä¾›çš„JMXï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å»¶è¿Ÿå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572915887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128130,"user_name":"13761642169","can_delete":false,"product_type":"c1","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1566834212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566834212","product_id":100029201,"comment_content":"ç¡®å®å¾ˆç»å…¸","like_count":0},{"had_liked":false,"id":127340,"user_name":"ä¸°å¯Œ","can_delete":false,"product_type":"c1","uid":1017611,"ip_address":"","ucode":"8FF798DC1418C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/0b/6a4cf978.jpg","comment_is_top":false,"comment_ctime":1566657892,"is_pvip":false,"replies":[{"id":"47281","content":"ä¸ç¡®å®šæ‚¨æŒ‡çš„æ”¯æŒæ˜¯ä»€ä¹ˆæ„æ€ã€‚Kafkaæœ‰å¼€æºçš„Connectç»„ä»¶æ¥æ”¶SNMP trapsï¼Œä½†å¦‚æœæ˜¯æŒ‡Kafkaçš„è¯·æ±‚åè®®çš„è¯ï¼Œé‚£ä¹ˆKafkaæ˜¯è‡ªå·±è®¾è®¡çš„ä¸€å¥—äºŒè¿›åˆ¶åè®®ï¼Œåº•å±‚ç”¨TCPã€‚æ²¡æœ‰ç”¨åˆ°SNMP","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566781851,"ip_address":"","comment_id":127340,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1566657892","product_id":100029201,"comment_content":"è¯·é—®è€å¸ˆï¼Œkafkaæ”¯æŒsnmpå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464450,"discussion_content":"ä¸ç¡®å®šæ‚¨æŒ‡çš„æ”¯æŒæ˜¯ä»€ä¹ˆæ„æ€ã€‚Kafkaæœ‰å¼€æºçš„Connectç»„ä»¶æ¥æ”¶SNMP trapsï¼Œä½†å¦‚æœæ˜¯æŒ‡Kafkaçš„è¯·æ±‚åè®®çš„è¯ï¼Œé‚£ä¹ˆKafkaæ˜¯è‡ªå·±è®¾è®¡çš„ä¸€å¥—äºŒè¿›åˆ¶åè®®ï¼Œåº•å±‚ç”¨TCPã€‚æ²¡æœ‰ç”¨åˆ°SNMP","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566781851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1017611,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/87/0b/6a4cf978.jpg","nickname":"ä¸°å¯Œ","note":"","ucode":"8FF798DC1418C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6202,"discussion_content":"ä¸»è¦è¿˜æ˜¯æŒ‡ç›‘æ§å±‚é¢ã€‚å¾ˆå¤šè½¯ç¡¬ä»¶ç³»ç»Ÿéƒ½æœ‰å…¬å…±å’Œç§æœ‰çš„mibåº“ï¼Œé€šè¿‡snmpåè®®å°±èƒ½è·å–ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼Œæ‰€ä»¥æƒ³é—®é—®è€å¸ˆkafkaæ˜¯å¦ä¹Ÿæœ‰è¿™æ ·çš„æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566784570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127274,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566630293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566630293","product_id":100029201,"comment_content":"è€å¸ˆæ€»ç»“å¾—å¾ˆå¥½ï¼Œè·Ÿç€è€å¸ˆä¸€èµ·ç²¾è¿›ã€‚","like_count":0}]}