{"id":307421,"title":"36 | Redisæ”¯æ’‘ç§’æ€åœºæ™¯çš„å…³é”®æŠ€æœ¯å’Œå®è·µéƒ½æœ‰å“ªäº›ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å¾·é’§ã€‚</p><p>ç§’æ€æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„æ´»åŠ¨åœºæ™¯ï¼Œæ¯”å¦‚ï¼Œåœ¨åŒ11ã€618ç­‰ç”µå•†ä¿ƒé”€æ´»åŠ¨ä¸­ï¼Œéƒ½ä¼šæœ‰ç§’æ€åœºæ™¯ã€‚ç§’æ€åœºæ™¯çš„ä¸šåŠ¡ç‰¹ç‚¹æ˜¯<strong>é™æ—¶é™é‡</strong>ï¼Œä¸šåŠ¡ç³»ç»Ÿè¦å¤„ç†ç¬æ—¶çš„å¤§é‡é«˜å¹¶å‘è¯·æ±‚ï¼Œè€ŒRediså°±ç»å¸¸è¢«ç”¨æ¥æ”¯æ’‘ç§’æ€æ´»åŠ¨ã€‚</p><p>ä¸è¿‡ï¼Œç§’æ€åœºæ™¯åŒ…å«äº†å¤šä¸ªç¯èŠ‚ï¼Œå¯ä»¥åˆ†æˆç§’æ€å‰ã€ç§’æ€ä¸­å’Œç§’æ€åä¸‰ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µçš„è¯·æ±‚å¤„ç†éœ€æ±‚å¹¶ä¸ç›¸åŒï¼ŒRediså¹¶ä¸èƒ½æ”¯æ’‘ç§’æ€åœºæ™¯çš„æ¯ä¸€ä¸ªç¯èŠ‚ã€‚</p><p>é‚£ä¹ˆï¼ŒRediså…·ä½“æ˜¯åœ¨ç§’æ€åœºæ™¯çš„å“ªä¸ªç¯èŠ‚èµ·åˆ°æ”¯æ’‘ä½œç”¨çš„å‘¢ï¼Ÿåˆæ˜¯å¦‚ä½•æ”¯æŒçš„å‘¢ï¼Ÿæ¸…æ¥šäº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ‰èƒ½çŸ¥é“åœ¨ç§’æ€åœºæ™¯ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨Redisæ¥æ”¯æ’‘é«˜å¹¶å‘å‹åŠ›ï¼Œå¹¶ä¸”åšå¥½ç§’æ€åœºæ™¯çš„åº”å¯¹æ–¹æ¡ˆã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹ç§’æ€åœºæ™¯çš„è´Ÿè½½ç‰¹å¾ã€‚</p><h2>ç§’æ€åœºæ™¯çš„è´Ÿè½½ç‰¹å¾å¯¹æ”¯æ’‘ç³»ç»Ÿçš„è¦æ±‚</h2><p>ç§’æ€æ´»åŠ¨å”®å–çš„å•†å“é€šå¸¸ä»·æ ¼éå¸¸ä¼˜æƒ ï¼Œä¼šå¸å¼•å¤§é‡ç”¨æˆ·è¿›è¡ŒæŠ¢è´­ã€‚ä½†æ˜¯ï¼Œå•†å“åº“å­˜é‡å´è¿œè¿œå°äºè´­ä¹°è¯¥å•†å“çš„ç”¨æˆ·æ•°ï¼Œè€Œä¸”ä¼šé™å®šç”¨æˆ·åªèƒ½åœ¨ä¸€å®šçš„æ—¶é—´æ®µå†…è´­ä¹°ã€‚è¿™å°±ç»™ç§’æ€ç³»ç»Ÿå¸¦æ¥ä¸¤ä¸ªæ˜æ˜¾çš„è´Ÿè½½ç‰¹å¾ï¼Œç›¸åº”çš„ï¼Œä¹Ÿå¯¹æ”¯æ’‘ç³»ç»Ÿæå‡ºäº†è¦æ±‚ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªç‰¹å¾æ˜¯ç¬æ—¶å¹¶å‘è®¿é—®é‡éå¸¸é«˜</strong>ã€‚</p><p>ä¸€èˆ¬æ•°æ®åº“æ¯ç§’åªèƒ½æ”¯æ’‘åƒçº§åˆ«çš„å¹¶å‘è¯·æ±‚ï¼Œè€ŒRedisçš„å¹¶å‘å¤„ç†èƒ½åŠ›ï¼ˆæ¯ç§’å¤„ç†è¯·æ±‚æ•°ï¼‰èƒ½è¾¾åˆ°ä¸‡çº§åˆ«ï¼Œç”šè‡³æ›´é«˜ã€‚æ‰€ä»¥ï¼Œ<strong>å½“æœ‰å¤§é‡å¹¶å‘è¯·æ±‚æ¶Œå…¥ç§’æ€ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨Rediså…ˆæ‹¦æˆªå¤§éƒ¨åˆ†è¯·æ±‚ï¼Œé¿å…å¤§é‡è¯·æ±‚ç›´æ¥å‘é€ç»™æ•°æ®åº“ï¼ŒæŠŠæ•°æ®åº“å‹å®</strong>ã€‚</p><!-- [[[read_end]]] --><p><strong>ç¬¬äºŒä¸ªç‰¹å¾æ˜¯è¯»å¤šå†™å°‘ï¼Œè€Œä¸”è¯»æ“ä½œæ˜¯ç®€å•çš„æŸ¥è¯¢æ“ä½œ</strong>ã€‚</p><p>åœ¨ç§’æ€åœºæ™¯ä¸‹ï¼Œç”¨æˆ·éœ€è¦å…ˆæŸ¥éªŒå•†å“æ˜¯å¦è¿˜æœ‰åº“å­˜ï¼ˆä¹Ÿå°±æ˜¯æ ¹æ®å•†å“IDæŸ¥è¯¢è¯¥å•†å“çš„åº“å­˜è¿˜æœ‰å¤šå°‘ï¼‰ï¼Œåªæœ‰åº“å­˜æœ‰ä½™é‡æ—¶ï¼Œç§’æ€ç³»ç»Ÿæ‰èƒ½è¿›è¡Œåº“å­˜æ‰£å‡å’Œä¸‹å•æ“ä½œã€‚</p><p>åº“å­˜æŸ¥éªŒæ“ä½œæ˜¯å…¸å‹çš„é”®å€¼å¯¹æŸ¥è¯¢ï¼Œè€ŒRediså¯¹é”®å€¼å¯¹æŸ¥è¯¢çš„é«˜æ•ˆæ”¯æŒï¼Œæ­£å¥½å’Œè¿™ä¸ªæ“ä½œçš„è¦æ±‚ç›¸åŒ¹é…ã€‚</p><p>ä¸è¿‡ï¼Œç§’æ€æ´»åŠ¨ä¸­åªæœ‰å°‘éƒ¨åˆ†ç”¨æˆ·èƒ½æˆåŠŸä¸‹å•ï¼Œæ‰€ä»¥ï¼Œå•†å“åº“å­˜æŸ¥è¯¢æ“ä½œï¼ˆè¯»æ“ä½œï¼‰è¦è¿œå¤šäºåº“å­˜æ‰£å‡å’Œä¸‹å•æ“ä½œï¼ˆå†™æ“ä½œï¼‰ã€‚</p><p>å½“ç„¶ï¼Œå®é™…ç§’æ€åœºæ™¯é€šå¸¸æœ‰å¤šä¸ªç¯èŠ‚ï¼Œåˆšæ‰ä»‹ç»çš„ç”¨æˆ·æŸ¥éªŒåº“å­˜åªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªç¯èŠ‚ã€‚é‚£ä¹ˆï¼ŒRediså…·ä½“å¯ä»¥åœ¨æ•´ä¸ªç§’æ€åœºæ™¯ä¸­å“ªäº›ç¯èŠ‚å‘æŒ¥ä½œç”¨å‘¢ï¼Ÿè¿™å°±è¦è¯´åˆ°ç§’æ€æ´»åŠ¨çš„æ•´ä½“æµç¨‹äº†ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹ã€‚</p><h2>Rediså¯ä»¥åœ¨ç§’æ€åœºæ™¯çš„å“ªäº›ç¯èŠ‚å‘æŒ¥ä½œç”¨ï¼Ÿ</h2><p>æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥æŠŠç§’æ€æ´»åŠ¨åˆ†æˆä¸‰ä¸ªé˜¶æ®µã€‚åœ¨æ¯ä¸€ä¸ªé˜¶æ®µï¼ŒRedisæ‰€å‘æŒ¥çš„ä½œç”¨ä¹Ÿä¸ä¸€æ ·ã€‚</p><p>ç¬¬ä¸€é˜¶æ®µæ˜¯ç§’æ€æ´»åŠ¨å‰ã€‚</p><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œç”¨æˆ·ä¼šä¸æ–­åˆ·æ–°å•†å“è¯¦æƒ…é¡µï¼Œè¿™ä¼šå¯¼è‡´è¯¦æƒ…é¡µçš„ç¬æ—¶è¯·æ±‚é‡å‰§å¢ã€‚è¿™ä¸ªé˜¶æ®µçš„åº”å¯¹æ–¹æ¡ˆï¼Œä¸€èˆ¬æ˜¯å°½é‡<strong>æŠŠå•†å“è¯¦æƒ…é¡µçš„é¡µé¢å…ƒç´ é™æ€åŒ–ï¼Œç„¶åä½¿ç”¨CDNæˆ–æ˜¯æµè§ˆå™¨æŠŠè¿™äº›é™æ€åŒ–çš„å…ƒç´ ç¼“å­˜èµ·æ¥</strong>ã€‚è¿™æ ·ä¸€æ¥ï¼Œç§’æ€å‰çš„å¤§é‡è¯·æ±‚å¯ä»¥ç›´æ¥ç”±CDNæˆ–æ˜¯æµè§ˆå™¨ç¼“å­˜æœåŠ¡ï¼Œä¸ä¼šåˆ°è¾¾æœåŠ¡å™¨ç«¯äº†ï¼Œè¿™å°±å‡è½»äº†æœåŠ¡å™¨ç«¯çš„å‹åŠ›ã€‚</p><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæœ‰CDNå’Œæµè§ˆå™¨ç¼“å­˜æœåŠ¡è¯·æ±‚å°±è¶³å¤Ÿäº†ï¼Œæˆ‘ä»¬è¿˜ä¸éœ€è¦ä½¿ç”¨Redisã€‚</p><p>ç¬¬äºŒé˜¶æ®µæ˜¯ç§’æ€æ´»åŠ¨å¼€å§‹ã€‚</p><p>æ­¤æ—¶ï¼Œå¤§é‡ç”¨æˆ·ç‚¹å‡»å•†å“è¯¦æƒ…é¡µä¸Šçš„ç§’æ€æŒ‰é’®ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„å¹¶å‘è¯·æ±‚æŸ¥è¯¢åº“å­˜ã€‚ä¸€æ—¦æŸä¸ªè¯·æ±‚æŸ¥è¯¢åˆ°æœ‰åº“å­˜ï¼Œç´§æ¥ç€ç³»ç»Ÿå°±ä¼šè¿›è¡Œåº“å­˜æ‰£å‡ã€‚ç„¶åï¼Œç³»ç»Ÿä¼šç”Ÿæˆå®é™…è®¢å•ï¼Œå¹¶è¿›è¡Œåç»­å¤„ç†ï¼Œä¾‹å¦‚è®¢å•æ”¯ä»˜å’Œç‰©æµæœåŠ¡ã€‚å¦‚æœè¯·æ±‚æŸ¥ä¸åˆ°åº“å­˜ï¼Œå°±ä¼šè¿”å›ã€‚ç”¨æˆ·é€šå¸¸ä¼šç»§ç»­ç‚¹å‡»ç§’æ€æŒ‰é’®ï¼Œç»§ç»­æŸ¥è¯¢åº“å­˜ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œè¿™ä¸ªé˜¶æ®µçš„æ“ä½œå°±æ˜¯ä¸‰ä¸ªï¼šåº“å­˜æŸ¥éªŒã€åº“å­˜æ‰£å‡å’Œè®¢å•å¤„ç†ã€‚å› ä¸ºæ¯ä¸ªç§’æ€è¯·æ±‚éƒ½ä¼šæŸ¥è¯¢åº“å­˜ï¼Œè€Œè¯·æ±‚åªæœ‰æŸ¥åˆ°æœ‰åº“å­˜ä½™é‡åï¼Œåç»­çš„åº“å­˜æ‰£å‡å’Œè®¢å•å¤„ç†æ‰ä¼šè¢«æ‰§è¡Œã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªé˜¶æ®µä¸­æœ€å¤§çš„å¹¶å‘å‹åŠ›éƒ½åœ¨åº“å­˜æŸ¥éªŒæ“ä½œä¸Šã€‚</p><p>ä¸ºäº†æ”¯æ’‘å¤§é‡é«˜å¹¶å‘çš„åº“å­˜æŸ¥éªŒè¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªç¯èŠ‚ä½¿ç”¨Redisä¿å­˜åº“å­˜é‡ï¼Œè¿™æ ·ä¸€æ¥ï¼Œè¯·æ±‚å¯ä»¥ç›´æ¥ä»Redisä¸­è¯»å–åº“å­˜å¹¶è¿›è¡ŒæŸ¥éªŒã€‚</p><p>é‚£ä¹ˆï¼Œåº“å­˜æ‰£å‡å’Œè®¢å•å¤„ç†æ˜¯å¦éƒ½å¯ä»¥äº¤ç»™åç«¯çš„æ•°æ®åº“æ¥æ‰§è¡Œå‘¢?</p><p>å…¶å®ï¼Œè®¢å•å¤„ç†å¯ä»¥åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œï¼Œä½†åº“å­˜æ‰£å‡æ“ä½œï¼Œä¸èƒ½äº¤ç»™åç«¯æ•°æ®åº“å¤„ç†ã€‚</p><p>åœ¨æ•°æ®åº“ä¸­å¤„ç†è®¢å•çš„åŸå› æ¯”è¾ƒç®€å•ï¼Œæˆ‘å…ˆè¯´ä¸‹ã€‚</p><p>è®¢å•å¤„ç†ä¼šæ¶‰åŠæ”¯ä»˜ã€å•†å“å‡ºåº“ã€ç‰©æµç­‰å¤šä¸ªå…³è”æ“ä½œï¼Œè¿™äº›æ“ä½œæœ¬èº«æ¶‰åŠæ•°æ®åº“ä¸­çš„å¤šå¼ æ•°æ®è¡¨ï¼Œè¦ä¿è¯å¤„ç†çš„äº‹åŠ¡æ€§ï¼Œéœ€è¦åœ¨æ•°æ®åº“ä¸­å®Œæˆã€‚è€Œä¸”ï¼Œè®¢å•å¤„ç†æ—¶çš„è¯·æ±‚å‹åŠ›å·²ç»ä¸å¤§äº†ï¼Œæ•°æ®åº“å¯ä»¥æ”¯æ’‘è¿™äº›è®¢å•å¤„ç†è¯·æ±‚ã€‚</p><p>é‚£ä¸ºå•¥åº“å­˜æ‰£å‡æ“ä½œä¸èƒ½åœ¨æ•°æ®åº“æ‰§è¡Œå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œä¸€æ—¦è¯·æ±‚æŸ¥åˆ°æœ‰åº“å­˜ï¼Œå°±æ„å‘³ç€å‘é€è¯¥è¯·æ±‚çš„ç”¨æˆ·è·å¾—äº†å•†å“çš„è´­ä¹°èµ„æ ¼ï¼Œç”¨æˆ·å°±ä¼šä¸‹å•äº†ã€‚åŒæ—¶ï¼Œå•†å“çš„åº“å­˜ä½™é‡ä¹Ÿéœ€è¦å‡å°‘ä¸€ä¸ªã€‚å¦‚æœæˆ‘ä»¬æŠŠåº“å­˜æ‰£å‡çš„æ“ä½œæ”¾åˆ°æ•°æ®åº“æ‰§è¡Œï¼Œä¼šå¸¦æ¥ä¸¤ä¸ªé—®é¢˜ã€‚</p><ol>\n<li><strong>é¢å¤–çš„å¼€é”€</strong>ã€‚Redisä¸­ä¿å­˜äº†åº“å­˜é‡ï¼Œè€Œåº“å­˜é‡çš„æœ€æ–°å€¼åˆæ˜¯æ•°æ®åº“åœ¨ç»´æŠ¤ï¼Œæ‰€ä»¥æ•°æ®åº“æ›´æ–°åï¼Œè¿˜éœ€è¦å’ŒRedisè¿›è¡ŒåŒæ­¥ï¼Œè¿™ä¸ªè¿‡ç¨‹å¢åŠ äº†é¢å¤–çš„æ“ä½œé€»è¾‘ï¼Œä¹Ÿå¸¦æ¥äº†é¢å¤–çš„å¼€é”€ã€‚</li>\n<li><strong>ä¸‹å•é‡è¶…è¿‡å®é™…åº“å­˜é‡ï¼Œå‡ºç°è¶…å”®</strong>ã€‚ç”±äºæ•°æ®åº“çš„å¤„ç†é€Ÿåº¦è¾ƒæ…¢ï¼Œä¸èƒ½åŠæ—¶æ›´æ–°åº“å­˜ä½™é‡ï¼Œè¿™å°±ä¼šå¯¼è‡´å¤§é‡åº“å­˜æŸ¥éªŒçš„è¯·æ±‚è¯»å–åˆ°æ—§çš„åº“å­˜å€¼ï¼Œå¹¶è¿›è¡Œä¸‹å•ã€‚æ­¤æ—¶ï¼Œå°±ä¼šå‡ºç°ä¸‹å•æ•°é‡å¤§äºå®é™…çš„åº“å­˜é‡ï¼Œå¯¼è‡´å‡ºç°è¶…å”®ï¼Œè¿™å°±ä¸ç¬¦åˆä¸šåŠ¡å±‚çš„è¦æ±‚äº†ã€‚</li>\n</ol><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±éœ€è¦ç›´æ¥åœ¨Redisä¸­è¿›è¡Œåº“å­˜æ‰£å‡ã€‚å…·ä½“çš„æ“ä½œæ˜¯ï¼Œå½“åº“å­˜æŸ¥éªŒå®Œæˆåï¼Œä¸€æ—¦åº“å­˜æœ‰ä½™é‡ï¼Œæˆ‘ä»¬å°±ç«‹å³åœ¨Redisä¸­æ‰£å‡åº“å­˜ã€‚è€Œä¸”ï¼Œä¸ºäº†é¿å…è¯·æ±‚æŸ¥è¯¢åˆ°æ—§çš„åº“å­˜å€¼ï¼Œåº“å­˜æŸ¥éªŒå’Œåº“å­˜æ‰£å‡è¿™ä¸¤ä¸ªæ“ä½œéœ€è¦ä¿è¯åŸå­æ€§ã€‚</p><p>ç¬¬ä¸‰é˜¶æ®µå°±æ˜¯ç§’æ€æ´»åŠ¨ç»“æŸåã€‚</p><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå¯èƒ½è¿˜ä¼šæœ‰éƒ¨åˆ†ç”¨æˆ·åˆ·æ–°å•†å“è¯¦æƒ…é¡µï¼Œå°è¯•ç­‰å¾…æœ‰å…¶ä»–ç”¨æˆ·é€€å•ã€‚è€Œå·²ç»æˆåŠŸä¸‹å•çš„ç”¨æˆ·ä¼šåˆ·æ–°è®¢å•è¯¦æƒ…ï¼Œè·Ÿè¸ªè®¢å•çš„è¿›å±•ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªé˜¶æ®µä¸­çš„ç”¨æˆ·è¯·æ±‚é‡å·²ç»ä¸‹é™å¾ˆå¤šäº†ï¼ŒæœåŠ¡å™¨ç«¯ä¸€èˆ¬éƒ½èƒ½æ”¯æ’‘ï¼Œæˆ‘ä»¬å°±ä¸é‡ç‚¹è®¨è®ºäº†ã€‚</p><p>å¥½äº†ï¼Œæˆ‘ä»¬å…ˆæ¥æ€»ç»“ä¸‹ç§’æ€åœºæ™¯å¯¹Redisçš„éœ€æ±‚ã€‚</p><p>ç§’æ€åœºæ™¯åˆ†æˆç§’æ€å‰ã€ç§’æ€ä¸­å’Œç§’æ€åä¸‰ä¸ªé˜¶æ®µã€‚ç§’æ€å¼€å§‹å‰åï¼Œé«˜å¹¶å‘å‹åŠ›æ²¡æœ‰é‚£ä¹ˆå¤§ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨Redisï¼Œä½†åœ¨ç§’æ€è¿›è¡Œä¸­ï¼Œéœ€è¦æŸ¥éªŒå’Œæ‰£å‡å•†å“åº“å­˜ï¼Œåº“å­˜æŸ¥éªŒé¢ä¸´å¤§é‡çš„é«˜å¹¶å‘è¯·æ±‚ï¼Œè€Œåº“å­˜æ‰£å‡åˆéœ€è¦å’Œåº“å­˜æŸ¥éªŒä¸€èµ·æ‰§è¡Œï¼Œä»¥ä¿è¯åŸå­æ€§ã€‚è¿™å°±æ˜¯ç§’æ€å¯¹Redisçš„éœ€æ±‚ã€‚</p><p>ä¸‹å›¾æ˜¾ç¤ºäº†åœ¨ç§’æ€åœºæ™¯ä¸­éœ€è¦Rediså‚ä¸çš„ä¸¤ä¸ªç¯èŠ‚ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/7c/1b/7c3e5def912d7c8c45bca00f955d751b.jpg?wh=2176*1582\" alt=\"\"></p><p>äº†è§£éœ€æ±‚åï¼Œæˆ‘ä»¬ä½¿ç”¨Redisæ¥æ”¯æ’‘ç§’æ€åœºæ™¯çš„æ–¹æ³•å°±æ¯”è¾ƒæ¸…æ™°äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å‘ä½ ä»‹ç»ä¸¤ç§æ–¹æ³•ã€‚</p><h2>Redisçš„å“ªäº›æ–¹æ³•å¯ä»¥æ”¯æ’‘ç§’æ€åœºæ™¯ï¼Ÿ</h2><p>ç§’æ€åœºæ™¯å¯¹Redisæ“ä½œçš„æ ¹æœ¬è¦æ±‚æœ‰ä¸¤ä¸ªã€‚</p><ol>\n<li><strong>æ”¯æŒé«˜å¹¶å‘</strong><strong>ã€‚</strong>è¿™ä¸ªå¾ˆç®€å•ï¼ŒRedisæœ¬èº«é«˜é€Ÿå¤„ç†è¯·æ±‚çš„ç‰¹æ€§å°±å¯ä»¥æ”¯æŒé«˜å¹¶å‘ã€‚è€Œä¸”ï¼Œå¦‚æœæœ‰å¤šä¸ªç§’æ€å•†å“ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ‡ç‰‡é›†ç¾¤ï¼Œç”¨ä¸åŒçš„å®ä¾‹ä¿å­˜ä¸åŒå•†å“çš„åº“å­˜ï¼Œè¿™æ ·å°±é¿å…ï¼Œä½¿ç”¨å•ä¸ªå®ä¾‹å¯¼è‡´æ‰€æœ‰çš„ç§’æ€è¯·æ±‚éƒ½é›†ä¸­åœ¨ä¸€ä¸ªå®ä¾‹ä¸Šçš„é—®é¢˜äº†ã€‚ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä½¿ç”¨åˆ‡ç‰‡é›†ç¾¤æ—¶ï¼Œæˆ‘ä»¬è¦å…ˆç”¨CRCç®—æ³•è®¡ç®—ä¸åŒç§’æ€å•†å“keyå¯¹åº”çš„Slotï¼Œç„¶åï¼Œæˆ‘ä»¬åœ¨åˆ†é…Slotå’Œå®ä¾‹å¯¹åº”å…³ç³»æ—¶ï¼Œæ‰èƒ½æŠŠä¸åŒç§’æ€å•†å“å¯¹åº”çš„Slotåˆ†é…åˆ°ä¸åŒå®ä¾‹ä¸Šä¿å­˜ã€‚</li>\n<li><strong>ä¿è¯åº“å­˜æŸ¥éªŒå’Œåº“å­˜æ‰£å‡åŸå­æ€§æ‰§è¡Œ</strong>ã€‚é’ˆå¯¹è¿™æ¡è¦æ±‚ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Redisçš„åŸå­æ“ä½œæˆ–æ˜¯åˆ†å¸ƒå¼é”è¿™ä¸¤ä¸ªåŠŸèƒ½ç‰¹æ€§æ¥æ”¯æ’‘äº†ã€‚</li>\n</ol><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹Redisæ˜¯å¦‚ä½•åŸºäºåŸå­æ“ä½œæ¥æ”¯æ’‘ç§’æ€åœºæ™¯çš„ã€‚</p><h3>åŸºäºåŸå­æ“ä½œæ”¯æ’‘ç§’æ€åœºæ™¯</h3><p>åœ¨ç§’æ€åœºæ™¯ä¸­ï¼Œä¸€ä¸ªå•†å“çš„åº“å­˜å¯¹åº”äº†ä¸¤ä¸ªä¿¡æ¯ï¼Œåˆ†åˆ«æ˜¯æ€»åº“å­˜é‡å’Œå·²ç§’æ€é‡ã€‚è¿™ç§æ•°æ®æ¨¡å‹æ­£å¥½æ˜¯ä¸€ä¸ªkeyï¼ˆå•†å“IDï¼‰å¯¹åº”äº†ä¸¤ä¸ªå±æ€§ï¼ˆæ€»åº“å­˜é‡å’Œå·²ç§’æ€é‡ï¼‰ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªHashç±»å‹çš„é”®å€¼å¯¹æ¥ä¿å­˜åº“å­˜çš„è¿™ä¸¤ä¸ªä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>key: itemID\nvalue: {total: N, ordered: M}\n</code></pre><p>å…¶ä¸­ï¼ŒitemIDæ˜¯å•†å“çš„ç¼–å·ï¼Œtotalæ˜¯æ€»åº“å­˜é‡ï¼Œorderedæ˜¯å·²ç§’æ€é‡ã€‚</p><p>å› ä¸ºåº“å­˜æŸ¥éªŒå’Œåº“å­˜æ‰£å‡è¿™ä¸¤ä¸ªæ“ä½œè¦ä¿è¯ä¸€èµ·æ‰§è¡Œï¼Œ<strong>ä¸€ä¸ªç›´æ¥çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨Redisçš„åŸå­æ“ä½œ</strong>ã€‚</p><p>æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/299806\">ç¬¬29è®²</a>ä¸­å­¦ä¹ è¿‡ï¼ŒåŸå­æ“ä½œå¯ä»¥æ˜¯Redisè‡ªèº«æä¾›çš„åŸå­å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥æ˜¯Luaè„šæœ¬ã€‚å› ä¸ºåº“å­˜æŸ¥éªŒå’Œåº“å­˜æ‰£å‡æ˜¯ä¸¤ä¸ªæ“ä½œï¼Œæ— æ³•ç”¨ä¸€æ¡å‘½ä»¤æ¥å®Œæˆï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨Luaè„šæœ¬åŸå­æ€§åœ°æ‰§è¡Œè¿™ä¸¤ä¸ªæ“ä½œã€‚</p><p>é‚£æ€ä¹ˆåœ¨Luaè„šæœ¬ä¸­å®ç°è¿™ä¸¤ä¸ªæ“ä½œå‘¢ï¼Ÿæˆ‘ç»™ä½ æä¾›ä¸€æ®µLuaè„šæœ¬å†™çš„ä¼ªä»£ç ï¼Œå®ƒæ˜¾ç¤ºäº†è¿™ä¸¤ä¸ªæ“ä½œçš„å®ç°ã€‚</p><pre><code>#è·å–å•†å“åº“å­˜ä¿¡æ¯            \nlocal counts = redis.call(&quot;HMGET&quot;, KEYS[1], &quot;total&quot;, &quot;ordered&quot;);\n#å°†æ€»åº“å­˜è½¬æ¢ä¸ºæ•°å€¼\nlocal total = tonumber(counts[1])\n#å°†å·²è¢«ç§’æ€çš„åº“å­˜è½¬æ¢ä¸ºæ•°å€¼\nlocal ordered = tonumber(counts[2])  \n#å¦‚æœå½“å‰è¯·æ±‚çš„åº“å­˜é‡åŠ ä¸Šå·²è¢«ç§’æ€çš„åº“å­˜é‡ä»ç„¶å°äºæ€»åº“å­˜é‡ï¼Œå°±å¯ä»¥æ›´æ–°åº“å­˜         \nif ordered + k &lt;= total then\n    #æ›´æ–°å·²ç§’æ€çš„åº“å­˜é‡\n    redis.call(&quot;HINCRBY&quot;,KEYS[1],&quot;ordered&quot;,k)                              return k;  \nend               \nreturn 0\n</code></pre><p>æœ‰äº†Luaè„šæœ¬åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Rediså®¢æˆ·ç«¯ï¼Œä½¿ç”¨EVALå‘½ä»¤æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬äº†ã€‚</p><p>æœ€åï¼Œå®¢æˆ·ç«¯ä¼šæ ¹æ®è„šæœ¬çš„è¿”å›å€¼ï¼Œæ¥ç¡®å®šç§’æ€æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥äº†ã€‚å¦‚æœè¿”å›å€¼æ˜¯kï¼Œå°±æ˜¯æˆåŠŸäº†ï¼›å¦‚æœæ˜¯0ï¼Œå°±æ˜¯å¤±è´¥ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨åŸå­æ€§çš„Luaè„šæœ¬æ¥å®ç°åº“å­˜æŸ¥éªŒå’Œåº“å­˜æ‰£å‡ã€‚å…¶å®ï¼Œè¦æƒ³ä¿è¯åº“å­˜æŸ¥éªŒå’Œæ‰£å‡è¿™ä¸¤ä¸ªæ“ä½œçš„åŸå­æ€§ï¼Œæˆ‘ä»¬è¿˜æœ‰å¦ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯<strong>ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥ä¿è¯å¤šä¸ªå®¢æˆ·ç«¯èƒ½äº’æ–¥æ‰§è¡Œè¿™ä¸¤ä¸ªæ“ä½œ</strong>ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥æ”¯æ’‘ç§’æ€åœºæ™¯ã€‚</p><h3>åŸºäºåˆ†å¸ƒå¼é”æ¥æ”¯æ’‘ç§’æ€åœºæ™¯</h3><p><strong>ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥æ”¯æ’‘ç§’æ€åœºæ™¯çš„å…·ä½“åšæ³•æ˜¯ï¼Œå…ˆè®©å®¢æˆ·ç«¯å‘Redisç”³è¯·åˆ†å¸ƒå¼é”ï¼Œåªæœ‰æ‹¿åˆ°é”çš„å®¢æˆ·ç«¯æ‰èƒ½æ‰§è¡Œåº“å­˜æŸ¥éªŒå’Œåº“å­˜æ‰£å‡</strong>ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¤§é‡çš„ç§’æ€è¯·æ±‚å°±ä¼šåœ¨äº‰å¤ºåˆ†å¸ƒå¼é”æ—¶è¢«è¿‡æ»¤æ‰ã€‚è€Œä¸”ï¼Œåº“å­˜æŸ¥éªŒå’Œæ‰£å‡ä¹Ÿä¸ç”¨ä½¿ç”¨åŸå­æ“ä½œäº†ï¼Œå› ä¸ºå¤šä¸ªå¹¶å‘å®¢æˆ·ç«¯åªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½å¤Ÿæ‹¿åˆ°é”ï¼Œå·²ç»ä¿è¯äº†å®¢æˆ·ç«¯å¹¶å‘è®¿é—®çš„äº’æ–¥æ€§ã€‚</p><p>ä½ å¯ä»¥çœ‹ä¸‹ä¸‹é¢çš„ä¼ªä»£ç ï¼Œå®ƒæ˜¾ç¤ºäº†ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥æ‰§è¡Œåº“å­˜æŸ¥éªŒå’Œæ‰£å‡çš„è¿‡ç¨‹ã€‚</p><pre><code>//ä½¿ç”¨å•†å“IDä½œä¸ºkey\nkey = itemID\n//ä½¿ç”¨å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†ä½œä¸ºvalue\nval = clientUniqueID\n//ç”³è¯·åˆ†å¸ƒå¼é”ï¼ŒTimeoutæ˜¯è¶…æ—¶æ—¶é—´\nlock =acquireLock(key, val, Timeout)\n//å½“æ‹¿åˆ°é”åï¼Œæ‰èƒ½è¿›è¡Œåº“å­˜æŸ¥éªŒå’Œæ‰£å‡\nif(lock == True) {\n   //åº“å­˜æŸ¥éªŒå’Œæ‰£å‡\n   availStock = DECR(key, k)\n   //åº“å­˜å·²ç»æ‰£å‡å®Œäº†ï¼Œé‡Šæ”¾é”ï¼Œè¿”å›ç§’æ€å¤±è´¥\n   if (availStock &lt; 0) {\n      releaseLock(key, val)\n      return error\n   }\n   //åº“å­˜æ‰£å‡æˆåŠŸï¼Œé‡Šæ”¾é”\n   else{\n     releaseLock(key, val)\n     //è®¢å•å¤„ç†\n   }\n}\n//æ²¡æœ‰æ‹¿åˆ°é”ï¼Œç›´æ¥è¿”å›\nelse\n   return\n</code></pre><p>éœ€è¦æé†’ä½ çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨åˆ†å¸ƒå¼é”æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦å…ˆå‘Redisè¯·æ±‚é”ï¼Œåªæœ‰è¯·æ±‚åˆ°äº†é”ï¼Œæ‰èƒ½è¿›è¡Œåº“å­˜æŸ¥éªŒç­‰æ“ä½œï¼Œè¿™æ ·ä¸€æ¥ï¼Œå®¢æˆ·ç«¯åœ¨äº‰æŠ¢åˆ†å¸ƒå¼é”æ—¶ï¼Œå¤§éƒ¨åˆ†ç§’æ€è¯·æ±‚æœ¬èº«å°±ä¼šå› ä¸ºæŠ¢ä¸åˆ°é”è€Œè¢«æ‹¦æˆªã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ç»™ä½ ä¸€ä¸ªå°å»ºè®®ï¼Œ<strong>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡é›†ç¾¤ä¸­çš„ä¸åŒå®ä¾‹æ¥åˆ†åˆ«ä¿å­˜åˆ†å¸ƒå¼é”å’Œå•†å“åº“å­˜ä¿¡æ¯</strong>ã€‚ä½¿ç”¨è¿™ç§ä¿å­˜æ–¹å¼åï¼Œç§’æ€è¯·æ±‚ä¼šé¦–å…ˆè®¿é—®ä¿å­˜åˆ†å¸ƒå¼é”çš„å®ä¾‹ã€‚å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰æ‹¿åˆ°é”ï¼Œè¿™äº›å®¢æˆ·ç«¯å°±ä¸ä¼šæŸ¥è¯¢å•†å“åº“å­˜ï¼Œè¿™å°±å¯ä»¥å‡è½»ä¿å­˜åº“å­˜ä¿¡æ¯çš„å®ä¾‹çš„å‹åŠ›äº†ã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Redisåœ¨ç§’æ€åœºæ™¯ä¸­çš„å…·ä½“åº”ç”¨ã€‚ç§’æ€åœºæ™¯æœ‰2ä¸ªè´Ÿè½½ç‰¹å¾ï¼Œåˆ†åˆ«æ˜¯ç¬æ—¶é«˜å¹¶å‘è¯·æ±‚å’Œè¯»å¤šå†™å°‘ã€‚Redisè‰¯å¥½çš„é«˜å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œä»¥åŠé«˜æ•ˆçš„é”®å€¼å¯¹è¯»å†™ç‰¹æ€§ï¼Œæ­£å¥½å¯ä»¥æ»¡è¶³ç§’æ€åœºæ™¯çš„éœ€æ±‚ã€‚</p><p>åœ¨ç§’æ€åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‰ç«¯CDNå’Œæµè§ˆå™¨ç¼“å­˜æ‹¦æˆªå¤§é‡ç§’æ€å‰çš„è¯·æ±‚ã€‚åœ¨å®é™…ç§’æ€æ´»åŠ¨è¿›è¡Œæ—¶ï¼Œåº“å­˜æŸ¥éªŒå’Œåº“å­˜æ‰£å‡æ˜¯æ‰¿å—å·¨å¤§å¹¶å‘è¯·æ±‚å‹åŠ›çš„ä¸¤ä¸ªæ“ä½œï¼ŒåŒæ—¶ï¼Œè¿™ä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œéœ€è¦ä¿è¯åŸå­æ€§ã€‚Redisçš„åŸå­æ“ä½œã€åˆ†å¸ƒå¼é”è¿™ä¸¤ä¸ªåŠŸèƒ½ç‰¹æ€§å¯ä»¥æœ‰æ•ˆåœ°æ¥æ”¯æ’‘ç§’æ€åœºæ™¯çš„éœ€æ±‚ã€‚</p><p>å½“ç„¶ï¼Œå¯¹äºç§’æ€åœºæ™¯æ¥è¯´ï¼Œåªç”¨Redisæ˜¯ä¸å¤Ÿçš„ã€‚ç§’æ€ç³»ç»Ÿæ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§å·¥ç¨‹ï¼ŒRediså®ç°äº†å¯¹åº“å­˜æŸ¥éªŒå’Œæ‰£å‡è¿™ä¸ªç¯èŠ‚çš„æ”¯æ’‘ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰4ä¸ªç¯èŠ‚éœ€è¦æˆ‘ä»¬å¤„ç†å¥½ã€‚</p><ol>\n<li><strong>å‰ç«¯é™æ€é¡µé¢çš„è®¾è®¡</strong>ã€‚ç§’æ€é¡µé¢ä¸Šèƒ½é™æ€åŒ–å¤„ç†çš„é¡µé¢å…ƒç´ ï¼Œæˆ‘ä»¬éƒ½è¦å°½é‡é™æ€åŒ–ï¼Œè¿™æ ·å¯ä»¥å……åˆ†åˆ©ç”¨CDNæˆ–æµè§ˆå™¨ç¼“å­˜æœåŠ¡ç§’æ€å¼€å§‹å‰çš„è¯·æ±‚ã€‚</li>\n<li><strong>è¯·æ±‚æ‹¦æˆªå’Œæµæ§</strong>ã€‚åœ¨ç§’æ€ç³»ç»Ÿçš„æ¥å…¥å±‚ï¼Œå¯¹æ¶æ„è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼Œé¿å…å¯¹ç³»ç»Ÿçš„æ¶æ„æ”»å‡»ï¼Œä¾‹å¦‚ä½¿ç”¨é»‘åå•ç¦æ­¢æ¶æ„IPè¿›è¡Œè®¿é—®ã€‚å¦‚æœRediså®ä¾‹çš„è®¿é—®å‹åŠ›è¿‡å¤§ï¼Œä¸ºäº†é¿å…å®ä¾‹å´©æºƒï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨æ¥å…¥å±‚è¿›è¡Œé™æµï¼Œæ§åˆ¶è¿›å…¥ç§’æ€ç³»ç»Ÿçš„è¯·æ±‚æ•°é‡ã€‚</li>\n<li><strong>åº“å­˜ä¿¡æ¯è¿‡æœŸæ—¶é—´å¤„ç†</strong>ã€‚Redisä¸­ä¿å­˜çš„åº“å­˜ä¿¡æ¯å…¶å®æ˜¯æ•°æ®åº“çš„ç¼“å­˜ï¼Œä¸ºäº†é¿å…ç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Œæˆ‘ä»¬ä¸è¦ç»™åº“å­˜ä¿¡æ¯è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</li>\n<li><strong>æ•°æ®åº“è®¢å•å¼‚å¸¸å¤„ç†</strong>ã€‚å¦‚æœæ•°æ®åº“æ²¡èƒ½æˆåŠŸå¤„ç†è®¢å•ï¼Œå¯ä»¥å¢åŠ è®¢å•é‡è¯•åŠŸèƒ½ï¼Œä¿è¯è®¢å•æœ€ç»ˆèƒ½è¢«æˆåŠŸå¤„ç†ã€‚</li>\n</ol><p>æœ€åï¼Œæˆ‘ä¹Ÿå†ç»™ä½ ä¸€ä¸ªå°å»ºè®®ï¼šç§’æ€æ´»åŠ¨å¸¦æ¥çš„è¯·æ±‚æµé‡å·¨å¤§ï¼Œæˆ‘ä»¬éœ€è¦æŠŠç§’æ€å•†å“çš„åº“å­˜ä¿¡æ¯ç”¨å•ç‹¬çš„å®ä¾‹ä¿å­˜ï¼Œè€Œä¸è¦å’Œæ—¥å¸¸ä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®ä¿å­˜åœ¨åŒä¸€ä¸ªå®ä¾‹ä¸Šï¼Œè¿™æ ·å¯ä»¥é¿å…å¹²æ‰°ä¸šåŠ¡ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚</p><h2>æ¯è¯¾ä¸€é—®</h2><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ç»™ä½ æä¸ªå°é—®é¢˜ï¼Œå‡è®¾ä¸€ä¸ªå•†å“çš„åº“å­˜é‡æ˜¯800ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåŒ…å«äº†4ä¸ªå®ä¾‹çš„åˆ‡ç‰‡é›†ç¾¤æ¥æœåŠ¡ç§’æ€è¯·æ±‚ã€‚æˆ‘ä»¬è®©æ¯ä¸ªå®ä¾‹å„è‡ªç»´æŠ¤åº“å­˜é‡200ï¼Œç„¶åï¼Œå®¢æˆ·ç«¯çš„ç§’æ€è¯·æ±‚å¯ä»¥åˆ†å‘åˆ°ä¸åŒçš„å®ä¾‹ä¸Šè¿›è¡Œå¤„ç†ï¼Œä½ è§‰å¾—è¿™æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•å—ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµè®¨è®ºã€‚å¦‚æœä½ è§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿ä½ åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":261107,"user_name":"Kaito","can_delete":false,"product_type":"c1","uid":1020042,"ip_address":"","ucode":"79775FA35A95F2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","comment_is_top":false,"comment_ctime":1605198824,"is_pvip":true,"discussion_count":22,"race_medal":0,"score":"809059050472","product_id":100056701,"comment_content":"ä½¿ç”¨å¤šä¸ªå®ä¾‹çš„åˆ‡ç‰‡é›†ç¾¤æ¥åˆ†æ‹…ç§’æ€è¯·æ±‚ï¼Œæ˜¯å¦æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Ÿ<br><br>ä½¿ç”¨åˆ‡ç‰‡é›†ç¾¤åˆ†æ‹…ç§’æ€è¯·æ±‚ï¼Œå¯ä»¥é™ä½æ¯ä¸ªå®ä¾‹çš„è¯·æ±‚å‹åŠ›ï¼Œå‰ææ˜¯ç§’æ€è¯·æ±‚å¯ä»¥å¹³å‡æ‰“åˆ°æ¯ä¸ªå®ä¾‹ä¸Šï¼Œå¦åˆ™ä¼šå‡ºç°ç§’æ€è¯·æ±‚å€¾æ–œçš„æƒ…å†µï¼Œåè€Œä¼šå¢åŠ æŸä¸ªå®ä¾‹çš„å‹åŠ›ï¼Œè€Œä¸”ä¼šå¯¼è‡´å•†å“æ²¡æœ‰å…¨éƒ¨å–å‡ºçš„æƒ…å†µã€‚<br><br>ä½†ç”¨åˆ‡ç‰‡é›†ç¾¤åˆ†åˆ«å­˜å‚¨åº“å­˜ä¿¡æ¯ï¼Œç¼ºç‚¹æ˜¯å¦‚æœéœ€è¦å‘ç”¨æˆ·å±•ç¤ºå‰©ä½™åº“å­˜ï¼Œè¦åˆ†åˆ«æŸ¥è¯¢å¤šä¸ªåˆ‡ç‰‡ï¼Œæœ€åèšåˆç»“æœåè¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®ä¸å±•ç¤ºå‰©ä½™åº“å­˜ä¿¡æ¯ï¼Œç›´æ¥é’ˆå¯¹ç§’æ€è¯·æ±‚è¿”å›æ˜¯å¦ç§’æ€æˆåŠŸå³å¯ã€‚<br><br>ç§’æ€ç³»ç»Ÿæœ€é‡è¦çš„æ˜¯ï¼ŒæŠŠå¤§éƒ¨åˆ†è¯·æ±‚æ‹¦æˆªåœ¨æœ€å‰é¢ï¼Œåªè®©å¾ˆå°‘è¯·æ±‚èƒ½å¤ŸçœŸæ­£è¿›å…¥åˆ°åç«¯ç³»ç»Ÿï¼Œé™ä½åç«¯æœåŠ¡çš„å‹åŠ›ï¼Œå¸¸è§çš„æ–¹æ¡ˆåŒ…æ‹¬ï¼šé¡µé¢é™æ€åŒ–ï¼ˆæ¨é€åˆ°CDNï¼‰ã€ç½‘å…³æ¶æ„è¯·æ±‚æ‹¦æˆªã€è¯·æ±‚åˆ†æ®µæ”¾è¡Œã€ç¼“å­˜æ ¡éªŒå’Œæ‰£å‡åº“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†è®¢å•ã€‚<br><br>å¦å¤–ï¼Œä¸ºäº†ä¸å½±å“å…¶ä»–ä¸šåŠ¡ç³»ç»Ÿï¼Œç§’æ€ç³»ç»Ÿæœ€å¥½å’Œä¸šåŠ¡ç³»ç»Ÿéš”ç¦»ï¼Œä¸»è¦åŒ…æ‹¬åº”ç”¨éš”ç¦»ã€éƒ¨ç½²éš”ç¦»ã€æ•°æ®å­˜å‚¨éš”ç¦»ã€‚","like_count":189,"discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338185,"discussion_content":"æˆ‘è§‰å¾—å…¶å®å¯ä»¥æ¢ä¸ªæ€è·¯ï¼Œredis åšä¸€ä¸ªé™æµ æˆ–è€…æ¡¶ä»¤ç‰Œï¼Œå…è®¸é€šè¿‡æˆ–è€… æŠ¢é“ä»¤ç‰Œçš„ è¿›å…¥ db æ“ä½œåº“å­˜çš„æ“ä½œï¼ŒdbæˆåŠŸä»¥å æ‰ä¼š è®¤ä¸ºæˆåŠŸã€‚æˆ–è€…  ä¸æ˜¯db  è€Œæ˜¯å‘é€mqæ¶ˆæ¯ï¼Œå…¶ä»–æœåŠ¡æ¶ˆè´¹ åšåº“å­˜åˆ å‡ ä¸‹å• æ“ä½œï¼ŒæˆåŠŸï¼Œåæ¨åˆ°å¯¹åº”å‰ç«¯æ¶ˆæ¯è¯´æŠ¢åˆ°äº†ã€‚ã€‚è€Œä¸æ˜¯ç§’æ€å•çº¯çš„ä¾èµ–ç¼“å­˜ã€‚æœ¬èº« å¦‚æœä»¥db ä½œä¸ºåº•å±‚æ ¡éªŒæ‰‹æ®µï¼Œèƒ½åˆ°dbçš„å¹¶å‘åŸºæœ¬æ²¡æœ‰ï¼Œå°±æ˜¯ç§’æ€çš„å•†å“æ•°é‡ï¼Œæœ€å¤š1.1 1.2å€è€Œå·²ï¼ŒåŸºæœ¬å¯ä»¥è®¤ä¸ºæ²¡æœ‰å¹¶å‘ã€‚","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1609209923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":7,"child_discussions":[{"author":{"id":1253597,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/dd/82d8eff2.jpg","nickname":"Mine","note":"","ucode":"85C3A3117FD9CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351218,"discussion_content":" ä½ è¿™ä¸ªæ€è·¯è¿˜ä¸å¦‚ç›´æ¥ç”¨redisç¼“å­˜åº“å­˜è¿›è¡Œæ‰£å‡ï¼ˆå…¶å®ä¹Ÿå¯ä»¥çœ‹æˆé™æµäº†ï¼Œåº“å­˜æ‰£å‡å®Œå°±æ‹’ç»è¯·æ±‚è¿”å›æç¤ºä¿¡æ¯ï¼‰ã€‚ä½ ç°åœ¨çš„åšæ³•ï¼Œmqå¼‚æ­¥å¤„ç†åï¼Œè®¢å•ï¼Œåº“å­˜æ‰£å‡éƒ½åœ¨ä¸‹æ¸¸æ“ä½œï¼Œä¸Šæ¸¸æ— æ³•æ„ŸçŸ¥è®¢å•åº“å­˜æ•°ï¼Œå¯¼è‡´å¾ˆå¤šæ— ç”¨çš„æ¶ˆæ¯ï¼ˆåº“å­˜æ²¡äº†ï¼Œæ— æ³•ä¸‹å•ï¼‰å †ç§¯è‡³mqã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1614178684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338185,"ip_address":""},"score":351218,"extra":""},{"author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352043,"discussion_content":"ä½ è¿™ä¹Ÿå°±æ˜¯å°é…’é‡æ—¶å€™ï¼Œè·‘è·‘è¿˜å¯ä»¥æ»¡è¶³ä¸šåŠ¡åŠŸèƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614581838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338185,"ip_address":""},"score":352043,"extra":""},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1253597,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/dd/82d8eff2.jpg","nickname":"Mine","note":"","ucode":"85C3A3117FD9CB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":354394,"discussion_content":"å› ä¸ºä½ ç›´æ¥åšæ‰£å‡æ˜¯éœ€è¦è€ƒè™‘ä¸Šè¿°çš„å¹¶å‘é—®é¢˜ï¼Œè€Œå¹¶å‘é‡æµé‡æ¡¶æœ¬èº«åªéœ€è¦è€ƒè™‘æ”¾ä¸æ”¾è¡Œçš„é—®é¢˜ï¼Œè€ƒè™‘çš„é—®é¢˜æœ¬èº«å°±ä¸ä¸€æ ·å§ï¼Ÿå†ä¸€ä¸ªæœ¬èº«åˆ°ä¸‹æ¸¸çš„é‡çº§éå¸¸å°ï¼ŒåŸºæœ¬åªæœ‰å®é™…åº“å­˜é‡çº§çš„1.å‡ å€ï¼Œä¸‹æ¸¸æœåŠ¡ä¼šå¡é¡¿å—ï¼Ÿåªè¦æ¶ˆè´¹å¤Ÿå¿«ï¼Œå¯ä»¥åè¿‡æ¥ä¸»åŠ¨é€šçŸ¥å‰ç«¯ç§’æ€å®Œäº†ã€‚è¿™æ ·é©±åŠ¨æ˜¯ç”±æœ€ç»ˆçš„è®¢å•ç­‰ä¸‹æ¸¸é©±åŠ¨çš„åè€Œæ›´å®‰å…¨ï¼Œä¹Ÿä¸ç”¨è€ƒè™‘å¹¶å‘å¯¼è‡´çš„å–å¤šäº†ä¹°å°‘çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615285936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351218,"ip_address":""},"score":354394,"extra":""}]},{"author":{"id":1361159,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","nickname":"æ¶›å“¥å“¥","note":"","ucode":"329A1384E3AB5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337088,"discussion_content":"è¿™æ ·å…¶å®ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ã€‚å°±æ˜¯æ¯”å¦‚ A B C D å››å°æœºå™¨ï¼Œæ¯å°æœºå™¨ä¸ªå­˜200çš„é‡ï¼Œä½†æ˜¯åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼ŒAæœºå™¨çš„æ•°é‡æ¶ˆè€—çš„æ¯”è¾ƒå¿«ï¼Œå¾ˆå¿«å°±å®Œäº†ï¼›Bæœºå™¨çš„æ•°é‡æ¶ˆè€—çš„æ¯”è¾ƒæ…¢ï¼Œè¿˜æœ‰å‰©ä½™ã€‚é‚£ä¹ˆä¸€ä¸ªç”¨æˆ·ç»è¿‡hashä¹‹åå¦‚æœåªèƒ½è¯·æ±‚åˆ°Aæœºå™¨ï¼Œé‚£è¿™æ ·å°±å¯¹è¿™ä¸ªç”¨æˆ·ä¸å…¬å¹³ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1608794077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1361159,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","nickname":"æ¶›å“¥å“¥","note":"","ucode":"329A1384E3AB5E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352044,"discussion_content":"ä½ åªè€ƒè™‘æ‰£å‡ï¼Œä¸è€ƒè™‘é‡Šæ”¾ä¸‹å•å¤±è´¥åŠ åº“å­˜äº†å—ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614581901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":337088,"ip_address":""},"score":352044,"extra":""}]},{"author":{"id":1107786,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e7/4a/4dfb565a.jpg","nickname":"å‡Œéœ„","note":"","ucode":"19C4BFB0298276","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379130,"discussion_content":"ä¸“æ çš„è€å¸ˆçœ‹æ¥å·¥ä¸šçº§ç³»ç»Ÿåšçš„å°‘äº†ï¼Œå¾ˆå¤šä¼˜æƒ åˆ¸ç§’æ€å¯ä»¥è¿™ä¹ˆå®ç°ï¼Œæ”¾åˆ°ä¸åŒçš„å®ä¾‹æ‰“æ•£å¤„ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623718211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352041,"discussion_content":"å…„å¼Ÿï¼Œæ‹¼å¤šå¤šï¼Œç¾å›¢ï¼Œæ©™å¿ƒé‚£ç§åŠ¨ä¸åŠ¨ä¸‡äººçš„å›¢è´­æ´»åŠ¨ã€‚ä½ è¯•è¯•æ•°æ®åº“æ‰£åº“å­˜ã€‚\n\nredisæ‰£åº“å­˜+äº‹åŠ¡æ¶ˆæ¯å‘é€æˆåŠŸã€‚æˆ‘ç†è§£å°±æ˜¯ç§’æ€ç³»ç»Ÿè®¾è®¡é‡Œé¢çš„æ‰€è¯´çš„æ•°æ®éš”ç¦»çš„å®ç°ã€‚åˆ°è¿™æ­¥å·²ç»è®¤ä¸ºåº“å­˜æ‰£å‡è¿™ä¸ªåŸå­ä¸šåŠ¡å¤„ç†å®Œäº†ã€‚\nåç»­çš„è½åº“ä»¥åŠå…¶ä»–çš„å¼‚å¸¸å¤„ç†å’Œç§’æ€æ— å…³äº†ï¼Œäº‹åŠ¡æ¶ˆæ¯å°±è¦åšåˆ°ä¿è¯å¿…é¡»æˆåŠŸã€‚æœ€åå®åœ¨æ²¡æœ‰åŠæ³•æˆåŠŸæ—¶å€™ï¼Œå°±åªèƒ½å›æ»šåº“å­˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614581719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1602239,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyobcyicicCQoldZofsS36xrjA2R2hk2F89pu1hCqwjlRaRG4xKkgCicZibEVdOwpfN5rWjEchrsxicSQ/132","nickname":"Geek_e8d55e","note":"","ucode":"5F13626B0E1E45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338462,"discussion_content":"å„ä½å¤§ä½¬ï¼Œå¦‚æœrediså®•æœºçš„æƒ…å†µåº”è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿå¦‚æœä½¿ç”¨ä¸»ä»çš„è¯ï¼Œä¸»ä»ä¸€è‡´æ€§æ„Ÿè§‰æ²¡æ³•ä¿è¯å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609295765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1602239,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyobcyicicCQoldZofsS36xrjA2R2hk2F89pu1hCqwjlRaRG4xKkgCicZibEVdOwpfN5rWjEchrsxicSQ/132","nickname":"Geek_e8d55e","note":"","ucode":"5F13626B0E1E45","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338673,"discussion_content":"ä¸»ä»æœ¬èº«ä¸ä¿è¯å¼ºä¸€è‡´ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609336029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338462,"ip_address":""},"score":338673,"extra":""},{"author":{"id":1879262,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/ac/de/68f35320.jpg","nickname":"å°æ¥å­","note":"","ucode":"4EDAF31E43B211","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":350224,"discussion_content":"é‚£MySQLå‘¢?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613750765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338673,"ip_address":""},"score":350224,"extra":""}]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338186,"discussion_content":"æ‰€ä»¥ä¸ºå•¥éè¦çº ç»“ä¸€å®šè¦åœ¨redisåš  åº“å­˜ç±»æ“ä½œæ¥ï¼Ÿ ä½ åº“å­˜åˆ å‡å®Œäº†ï¼Œè¿˜éœ€è¦è®¢å• ç±»æ“ä½œæ¥ï¼Œåˆæ˜¯2éƒ¨åŠ¨ä½œï¼Œæœ€åç»§ç»­åˆ†å¸ƒå¼çš„åŠ¨ä½œã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609209995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1079898,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7a/5a/4dfb21f7.jpg","nickname":"æ¯•æˆåŠŸ Antony","note":"","ucode":"32219043046F62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327355,"discussion_content":"è¿™ç§åˆ†æ•£çš„åç«¯èŠ‚ç‚¹ï¼Œå‰©ä½™åº“å­˜æ€»æ•°ä¸æ˜¾ç¤ºä¹Ÿæ˜¯ä¸šåŠ¡ä¸Šä¸å¤ªèƒ½æ¥å—çš„ï¼Œä½†æ˜¯æœ‰ç‚¹å»¶è¿Ÿå€’æ˜¯å¯ä»¥ã€‚\n\næ‰€ä»¥å¯ä»¥åšä¸ª1ç§’1æ¬¡çš„å®šæ—¶ä»»åŠ¡ç»Ÿè®¡ä¸€ä¸‹å„èŠ‚ç‚¹çš„å‰©ä½™æ€»å’Œï¼ŒæŠŠç»“æœç¼“å­˜èµ·æ¥ç»™å‰ç«¯è¯»å–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605799910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1079898,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7a/5a/4dfb21f7.jpg","nickname":"æ¯•æˆåŠŸ Antony","note":"","ucode":"32219043046F62","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352046,"discussion_content":"è¿™ä¸ªä¸æ˜¯ä¸€ç‚¹ç‚¹å»¶è¿Ÿçš„é—®é¢˜ã€‚åˆ†ç‰‡è¶Šå¤šï¼Œä¼šå¯¼è‡´æ¥å£rtè€—æ—¶è¶Šæ¥è¶Šå¤§ã€‚å¤§é…’é‡æ—¶å€™ä¼šç³»ç»Ÿä¸ç¨³å®š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614581992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327355,"ip_address":""},"score":352046,"extra":""},{"author":{"id":1079898,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7a/5a/4dfb21f7.jpg","nickname":"æ¯•æˆåŠŸ Antony","note":"","ucode":"32219043046F62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":354833,"discussion_content":"ä¸€ä¸ªçº¿ç¨‹è¯»å–æ•°æ®åˆ°ç¼“å­˜ï¼Œå‰ç«¯æŸ¥è¯¢ç›´æ¥è¯»ç¼“å­˜ã€‚åˆ†ç‰‡æ•°æ®ä¸è®ºå¦‚ä½•åœ¨ä¸šåŠ¡ä¸Šéƒ½ä¸å¯èƒ½å®æ—¶æ‰«æå…¨éƒ¨åˆ†è¡¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615347420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352046,"ip_address":""},"score":354833,"extra":""}]},{"author":{"id":1079898,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7a/5a/4dfb21f7.jpg","nickname":"æ¯•æˆåŠŸ Antony","note":"","ucode":"32219043046F62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327354,"discussion_content":"è¯·æ±‚å¹³å‡åˆ†æµåˆ°åç«¯è¿™ä¸ªæ€è·¯ä¸èµ·å…³é”®ä½œç”¨ï¼Œå› ä¸ºç”¨æˆ·ä¹°ä¸ä¹°çš„è¡Œä¸ºä¸å¯æ§ï¼Œå¯èƒ½ä»…ä¸‹å•ä¸æ”¯ä»˜ã€‚\n\nç§’æ€åœºæ™¯å¯ä»¥ç²—æš´ä¸€ç‚¹ï¼Œä¾èµ–ç”¨æˆ·çš„é‡è¯•ï¼ŒçŸ­æ—¶é—´æŠ¢è´­å®Œå¹¶ä¸èƒ½æ˜æ˜¾æ„ŸçŸ¥åˆ°å·®å¼‚ã€‚\n\nå¦‚æœå•†å“å–ä¸å¿«ï¼Œé‡åˆ°æœ‰èŠ‚ç‚¹å”®ç½„å¯ä»¥è®©åˆ†æµè½®è®­é‡è¯•ï¼Œè™½ç„¶è¿™ç§ä¼šè®©ä¸€æ¬¡è¯·æ±‚çš„å¤„ç†æ‰©æ•£ï¼Œä½†å”®ç½„åŸºæœ¬éƒ½æ˜¯è¯»å¤šï¼Œä¹Ÿç®—æ˜¯åº¦è¿‡äº†å†™é«˜å³°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605799709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1079898,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7a/5a/4dfb21f7.jpg","nickname":"æ¯•æˆåŠŸ Antony","note":"","ucode":"32219043046F62","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352047,"discussion_content":"ç”¨åˆ°åˆ†ç‰‡æ—¶å€™ï¼Œå·²ç»è¯´æ˜æ˜¯å•èŠ‚ç‚¹çš„ä¸Šé™äº†ã€‚å¦‚æœç”¨è½®è®­æ–¹å¼æ¥ï¼Œæ±‡æ€»æ•°æ®ã€‚æ— ç•çš„å¢åŠ redisçš„å‹åŠ›å’Œç³»ç»Ÿå“åº”æ—¶é—´ã€‚\n\næç«¯çš„ä¾‹å­ã€‚1000åº“å­˜ï¼Œåšäº†20ä¸ªåˆ†ç‰‡ï¼Œå¹¶å‰©ä½™1ä¸ªåº“å­˜ï¼Œæ°å¥½éœ€è¦è½®è®­20æ¬¡ã€‚è¿™ä¸ªæ—¶å€™rtè€—æ—¶å¯èƒ½ä¸åªæ˜¯å¢åŠ 20ä¸ªäº†ã€‚\n\nåˆ†ç‰‡é›†ç¾¤ã€‚æˆ‘ä»¬åº”è¯¥é¿å…è¿™æ ·çš„mergeè¡Œä¸ºçš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1614582353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327354,"ip_address":""},"score":352047,"extra":""}]},{"author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325433,"discussion_content":"éš”å£è®²åˆ†å¸ƒå¼ç¼“å­˜çš„è§†é¢‘è¯¾è¯´çš„å°±æ˜¯è¿™ç§æ¯ä¸ªå®ä¾‹æ”¾ç½®éƒ¨åˆ†åº“å­˜æ¥åˆ†æµï¼Œç„¶åè¯·æ±‚æŸ¥æ‰€æœ‰å®ä¾‹ç›´åˆ°èƒ½æˆåŠŸæ‰£åº“å­˜æˆ–è€…å…¨éƒ¨æ²¡æœ‰åº“å­˜ã€‚æƒ³é—®ä¸‹ç­é•¿ä½ å¯¹ç”¨æ•°æ®åº“ä»£æ›¿redisè§£å†³åº“å­˜çƒ­ç‚¹æ›´æ–°é—®é¢˜æœ‰äº†è§£å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605316622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261421,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1605330130,"is_pvip":false,"discussion_count":36,"race_medal":0,"score":"91799643346","product_id":100056701,"comment_content":"è€å¸ˆå¥½ï¼Œæƒ³é—®ä¸‹ï¼Œç”¨redisæ‰£åº“å­˜ç›´æ¥ç”¨HINCRBYå·²ç§’æ€åº“å­˜é‡ï¼Œåˆ¤æ–­è¿”å›å€¼&gt;=æ€»åº“å­˜å°±æ˜¯æ²¡åº“å­˜ï¼Œå°äºæ€»åº“å­˜å°±æ˜¯æ‰£å‡åº“å­˜æˆåŠŸå¯ä»¥è´­ä¹°ï¼Œè¿™æ ·åˆ¤æ–­æœ‰ä»€ä¹ˆé—®é¢˜ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦å¼•å…¥luaè„šæœ¬æ¥å¢åŠ å¤æ‚åº¦å‘¢ï¼Ÿ","like_count":22,"discussions":[{"author":{"id":1240624,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ee/30/cfdd1b86.jpg","nickname":"åˆ˜æµ©","note":"","ucode":"81F5D6E62751C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329431,"discussion_content":"å¦‚æœ100äººåŒæ—¶ç«äº‰ï¼Œä¼šé€ æˆHINCRBYå·²ç»æ“ä½œäº†100æ¬¡ï¼Œè™½ç„¶åªæœ‰ä¸€ä¸ªäººèƒ½æ‹¿åˆ°ï¼Œä½†æ˜¯ç¡®å®æ‰§è¡Œäº†ï¼Œå®é™…æ•°æ®å·²ç»è¶…å‡ºäº†ã€‚è¿™æ—¶å€™å¦‚æœæœ‰äººå–æ¶ˆè®¢å•ï¼Œæ•°æ®è¿˜å¾—è¿˜å›å»ï¼Œè¿™æ—¶å€™ä½ ä¸å¥½åŠå•¦","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1606382872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1287774,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/5e/b05254a6.jpg","nickname":"Mhy","note":"","ucode":"DE19BCAD1F856E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1240624,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ee/30/cfdd1b86.jpg","nickname":"åˆ˜æµ©","note":"","ucode":"81F5D6E62751C6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541330,"discussion_content":"åŒæ—¶100ä¸ªäººç«äº‰ï¼Œå‡å¦‚redisåº“å­˜ä¸º99ï¼Œé‚£ä¹ˆä¸€å®šä¼šæœ‰ä¸€ä¸ªäººæ˜¯100ï¼Œå…¶ä½™99ä¸ªäººæ˜¯å¤§äº100çš„ï¼Œåªè¦æœ‰çº¿ç¨‹æ‹¿åˆ°çš„æ•°æ®å¤§äº100ï¼Œé‚£ä¹ˆå°±ä¸è¿›è¡Œä¸‹å•æ“ä½œï¼Œå°†åº“å­˜è¿›è¡Œå›è¡¥ï¼ˆHINCRBY -1ï¼‰ï¼Œé‚£ä¹ˆæœ€ååº“å­˜çš„å€¼ä¸€å®šä¹Ÿæ˜¯100ï¼Œä¸å¤šä¼šä¹Ÿä¸ä¼šå°‘ï¼Œå¦‚æœè¯´ç”¨luaçš„å¥½å¤„é‚£å°±æ˜¯åªè¦æœ‰çº¿ç¨‹å‘ç°åº“å­˜å·²ç»å˜æˆ100äº†ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå‡ºç°æš‚æ—¶101çš„æƒ…å†µï¼Œè¿HINCRBYçš„æ“ä½œéƒ½çœå»äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640333251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":329431,"ip_address":""},"score":541330,"extra":""}]},{"author":{"id":1144333,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/0d/781aa509.jpg","nickname":"è·¯é£æ¡‘","note":"","ucode":"2EA3B61395FBA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327184,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ï¼šç›´æ¥ä½¿ç”¨HINCRBYï¼Œé€šè¿‡è¿”å›å€¼åˆ¤æ–­æ˜¯å¦æœ‰åº“å­˜ï¼Œå¦‚æœç§’æ€çš„åœºæ™¯ä¸é™åˆ¶ç”¨æˆ·çš„ç§’æ€æ•°é‡æˆ–è€…ç”¨æˆ·çš„ç§’æ€æ•°é‡å¯ä»¥å¤§äº1ï¼Œä¼šå‡ºç°å®é™…æœ‰åº“å­˜ä½†æ˜¯ä¸èƒ½ä¸‹å•çš„é—®é¢˜ï¼Œä¸¾ä¾‹æ¥è¯´æ˜¯å¦‚æœåº“å­˜æ˜¯8ï¼Œå½“å‰å‰©ä½™åº“å­˜7ï¼ŒAç”¨æˆ·è¦ä¸‹å•2ä¸ªï¼Œé€šè¿‡HINCRBYå‘½ä»¤å°†å·²ç§’æ€é‡å˜ä¸º9ï¼Œå‘ç°è¶…è¿‡åº“å­˜ä¸‹å•å¤±è´¥ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™ä¸æ¢å¤å·²ç§’æ€é‡ï¼Œå…¶ä»–ç”¨æˆ·å°±ä¸èƒ½ä¸‹å•æˆåŠŸäº†ã€‚å¦‚æœåœ¨æ¢å¤å·²ç§’æ€é‡ï¼Œè¿™å‰åä¸¤ä¸ªæ“ä½œåˆä¼šæœ‰åŸå­æ€§é—®é¢˜ã€‚è¿˜æœ‰å°±æ˜¯æ„Ÿè§‰å¦‚æœä½¿ç”¨è¿™ç§æ–¹å¼åœ¨ç§’æ€ç»“æŸåï¼ŒæŸ¥çœ‹åº“å­˜é‡ç›´æ¥é€šè¿‡redisçš„æ•°æ®è·å–çš„è¯åº“å­˜é‡è®¡ç®—ä¹‹åæ˜¯è´Ÿæ•°ï¼Œè¿˜æœ‰é€šè¿‡æŸ¥è¯¢å®é™…è®¢å•æ‰èƒ½çŸ¥é“æœ‰æ²¡æœ‰è¶…å–å§ã€‚","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1605761838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1144333,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/0d/781aa509.jpg","nickname":"è·¯é£æ¡‘","note":"","ucode":"2EA3B61395FBA7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352049,"discussion_content":"è´Ÿæ•°ï¼Œåšå›æ»šå°±å¥½äº†ï¼Œä¹ŸåŒ…åœ¨åŸå­æ“ä½œé‡Œé¢ã€‚ä¸å½±å“ä¸‹ä¸€ä¸ªäººè´­ä¹°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614582693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327184,"ip_address":""},"score":352049,"extra":""}]},{"author":{"id":2542376,"avatar":"https://static001.geekbang.org/account/avatar/00/26/cb/28/21a8a29e.jpg","nickname":"å¤å¤©","note":"","ucode":"5F224DDAC94DFF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370626,"discussion_content":"è¿™ä¸ªæ€è·¯å®Œå…¨æ»¡è¶³éœ€æ±‚ã€‚æˆ‘ä»¬è¿™æ ·åšè¿‡ã€‚å¤§å®¶å…³å¿ƒçš„æ¢å¤åº“å­˜é—®é¢˜ã€‚åº“å­˜ 100ã€‚å®Œå…¨å¯ä»¥æ”¾ 200 ä¸ªäººè¿›æ¥ã€‚æœ‰æ•°æ®ä¿è¯æœ€ç»ˆä¸ä¼šè¶…å–ã€‚è‡³äº lua è„šæœ¬ã€‚æ€§èƒ½è‚¯å®šæ˜¯å·®äºç›´æ¥ incr/decr çš„","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1619486187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1069583,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ8BIG7fdqVH3xs2o7yDGpbr9FuT93FVN98CC4cYdojcJamJrPS6q8ObOFQwDgbxygiaYaWnuMk0cw/132","nickname":"Kkkoko","note":"","ucode":"C36729C4659F60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2542376,"avatar":"https://static001.geekbang.org/account/avatar/00/26/cb/28/21a8a29e.jpg","nickname":"å¤å¤©","note":"","ucode":"5F224DDAC94DFF","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":376889,"discussion_content":"æˆ‘è§‰å¾—ä¹Ÿæ˜¯ï¼Œç§’æ€åœºæ™¯çš„ç”¨æˆ·ç¬é—´è¿›æ¥çš„é‡ï¼Œè‚¯å®šæ˜¯è¿œè¿œå¤§äºåº“å­˜çš„ã€‚æˆ‘å°±æ”¾ä¸€å°éƒ¨åˆ†äººè¿›æ¥ï¼Œæ…¢æ…¢å¤„ç†å°±OKäº†ã€‚ å…¶ä»–çš„å…¶å®éƒ½æ˜¯ç‚®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622391918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":370626,"ip_address":""},"score":376889,"extra":""}]},{"author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332388,"discussion_content":"ç›´æ¥ç”¨hincrbyé£é™©å¾ˆå¤§ï¼Œä½†éƒ½æ˜¯å‡ºåœ¨è¾¹é™…æ¡ä»¶ä¸Šï¼Œæ‰€ä»¥åœ¨å‰é“å…³å¡çš„åˆ¤æ–­å°±è‡³å…³é‡è¦ã€‚ä½†å¦‚æœç”¨luaè„šæœ¬ï¼Œå°±èƒ½æŠŠå‰é“å…³å¡çš„åˆ¤æ–­å’Œæ˜¯å¦å¯ä»¥æ‰£å‡åº“å­˜å°è£…æˆä¸€ä¸ªåŸå­æ“ä½œï¼Œæé«˜ç³»ç»Ÿå¯é æ€§ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1607177756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043475,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","nickname":"neohope","note":"","ucode":"C0268F6E7E2B6E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351137,"discussion_content":"åœ¨è°ƒç”¨hincrbyå‰ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦è¿˜æœ‰åº“å­˜ï¼Œæ— æ³•æ­£ç¡®å¤„ç†å¹¶å‘ã€‚æ“ä½œæ­¥éª¤ç®€åŒ–ä¸ºï¼š\n1ã€æŸ¥è¯¢ï¼Œ2ã€åˆ¤æ–­åº“å­˜å¤§äº0ï¼Œ3ã€è°ƒç”¨hincrbyä¿®æ”¹åº“å­˜\nå°±æ˜¯åœ¨1ä¸3ä¹‹é—´ï¼Œæ— æ³•é˜»æ­¢å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿›å…¥è¿™ä¸ªåŒºé—´ï¼Œä¹Ÿå°±æ— æ³•é˜»æ­¢è¶…å–ã€‚\nç”¨Luaçš„è¯ï¼Œæ•´ä¸ªè„šæœ¬æ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œå®Œæ¯•çš„ï¼Œé¿å…äº†è¿™ä¸ªé—®é¢˜ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1614162059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":2542376,"avatar":"https://static001.geekbang.org/account/avatar/00/26/cb/28/21a8a29e.jpg","nickname":"å¤å¤©","note":"","ucode":"5F224DDAC94DFF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1043475,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","nickname":"neohope","note":"","ucode":"C0268F6E7E2B6E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370619,"discussion_content":"ä¸ºä½•è¦åˆ†å¼€æ­¥éª¤ 1 å’Œ 3 å‘¢ï¼Œincr/decr æœ¬èº«å°±æœ‰è¿”å›å€¼ã€‚è¯·æ±‚è¿›æ¥ç›´æ¥ incrã€‚æ£€æŸ¥è¿”å›å€¼å°±å¥½äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619485818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351137,"ip_address":""},"score":370619,"extra":""},{"author":{"id":2107466,"avatar":"https://static001.geekbang.org/account/avatar/00/20/28/4a/36d07533.jpg","nickname":"crossover  of   AI","note":"","ucode":"8EE3289947808F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2542376,"avatar":"https://static001.geekbang.org/account/avatar/00/26/cb/28/21a8a29e.jpg","nickname":"å¤å¤©","note":"","ucode":"5F224DDAC94DFF","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":554891,"discussion_content":"è‡ªå·±åšä¸ªå®éªŒå°±å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646652999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":370619,"ip_address":""},"score":554891,"extra":""},{"author":{"id":2542376,"avatar":"https://static001.geekbang.org/account/avatar/00/26/cb/28/21a8a29e.jpg","nickname":"å¤å¤©","note":"","ucode":"5F224DDAC94DFF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2107466,"avatar":"https://static001.geekbang.org/account/avatar/00/20/28/4a/36d07533.jpg","nickname":"crossover  of   AI","note":"","ucode":"8EE3289947808F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555003,"discussion_content":"ä½ æ€ä¹ˆçŸ¥é“æˆ‘æ²¡åšè¿‡ï¼Œæˆ‘æ„æ€æ²¡å¿…è¦ç”¨ lua è„šæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646716009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":554891,"ip_address":""},"score":555003,"extra":""}]},{"author":{"id":1112311,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/f7/2ef31d06.jpg","nickname":"ç­é¾™å›","note":"","ucode":"99832A9896FCC9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340175,"discussion_content":"å…¸å‹çš„i++å¹¶å‘é—®é¢˜å•Š","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1609922124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1112311,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/f7/2ef31d06.jpg","nickname":"ç­é¾™å›","note":"","ucode":"99832A9896FCC9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340295,"discussion_content":"redisè‡ªå¢æ“ä½œæ˜¯åŸå­çš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1609945490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340175,"ip_address":""},"score":340295,"extra":""},{"author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352048,"discussion_content":"intç±»å‹æ•°å­—ï¼Œèµ‹å€¼ä¹Ÿæ˜¯åŸå­ã€‚ç»†å“","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614582529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340295,"ip_address":""},"score":352048,"extra":""},{"author":{"id":1792875,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic46Vr5WCsSYuqgQGvgEBnicylYPcgl0Tn57RF8InuxMZDvvt0pFiaIJjJTsOvC1Ed5ZLA/132","nickname":"é›¨æ½‡","note":"","ucode":"735B7E796E84EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1112311,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/f7/2ef31d06.jpg","nickname":"ç­é¾™å›","note":"","ucode":"99832A9896FCC9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387351,"discussion_content":"ä¸å­˜åœ¨ï¼Œincrå’Œdecréƒ½æ˜¯åŸå­æ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628131760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340175,"ip_address":""},"score":387351,"extra":""}]},{"author":{"id":1565219,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJSlGOyeng3NGwI3fff0PEicP83RL3rGnhghKRU3Md4WXCG6gxjXsicRtcfbQwnKUBJ68I8ibRVpq6Lw/132","nickname":"Geek_é©¬å®˜äºº","note":"","ucode":"A5D8EA65195413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547553,"discussion_content":"æˆ‘è§‰å¾—æ²¡é—®é¢˜ï¼Œincræœ¬æ¥å°±æ˜¯redisä¿è¯åŸå­æ€§çš„å‘½ä»¤ï¼Œè€Œä¸”è¿˜ä¼šè¿”å›æ“ä½œåæœ€æ–°çš„å€¼ï¼Œå®Œå…¨å¯ä»¥ä¿è¯åº“å­˜çš„å‡å°‘å¯é ï¼Œå”¯ä¸€è®¨è®ºçš„ç‚¹å°±åœ¨äºincrä¼šä¸€ç›´è‡ªå¢æˆ–è‡ªå‡ï¼ˆçœ‹ä½ è®¾è®¡æ˜¯0åˆ°100è¿˜æ˜¯100åˆ°0ï¼‰ï¼Œå¦‚æœè¯·æ±‚é‡å¤§ï¼Œé€€è´§æˆ–è€…å–æ¶ˆè®¢å•å›æ»šäº†1ä¸ªä¹Ÿå›ä¸åˆ°å¯ç§’æ€çš„çŠ¶æ€ï¼Œè¿™ä¸ªå®Œå…¨å¯ä»¥ç”¨ä¸šåŠ¡å»é¿å…ï¼Œä¸€æ®µæ—¶é—´åï¼Œé€šè¿‡è¡¥è´§çš„æ–¹å¼å†æ¬¡ç»Ÿä¸€ä¸Šæ¶å¤„ç†ï¼Œè„šæœ¬çš„å¥½å¤„å°±æ˜¯å¯ä»¥å†™é€»è¾‘ï¼Œæ•ˆç‡ç•¥ä½ï¼Œä¸»è¦çœ‹è„šæœ¬å¤æ‚åº¦ï¼Œincrå°±æ˜¯redisåŸç”Ÿå‘½ä»¤ï¼Œç®€å•ï¼Œæ•ˆç‡é«˜ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå¦‚æœå¯¹é€€è´§è¡¥è´§è¿™ç§åŠæ—¶æ€§ä¸æ•æ„Ÿï¼Œæˆ‘è§‰å¾—incrä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642747302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1102291,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d1/d3/827cdfd5.jpg","nickname":"Kai","note":"","ucode":"BE6985A02BEA7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360686,"discussion_content":"æˆ‘çš„è§£æ³•ï¼šç”¨Stringæ•°æ®ç»“æ„å­˜å‚¨åº“å­˜ï¼Œé’ˆå¯¹ç”¨æˆ·æŠ¢åˆ°ä¸€ä¸ªï¼Œå°±incr(key, -1)ï¼Œå½“è¿”å›å€¼å°äº0æ—¶ï¼Œè¿”å›å·²å”®ç½„ã€‚é’ˆå¯¹è¿è¥äººå‘˜åŠ åº“å­˜ï¼Œå°±increase(key, 1ï¼‰ã€‚ç†ç”±ï¼šincræ˜¯åŸå­æ“ä½œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1616505292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2086960,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d8/30/840b64fa.jpg","nickname":"Frankæœ¨é£","note":"","ucode":"8DAA325F19E00E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327131,"discussion_content":"æ²¡çœ‹å‡ºæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ„Ÿè§‰åº”è¯¥ä¹Ÿå¯ä»¥çš„ã€‚ä¸è¿‡ç§’æ€ä¸€èˆ¬è¿˜æ˜¯æ¶ˆæ¯é˜Ÿåˆ—åˆ°æ•°æ®åº“ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605752699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":2342029,"avatar":"","nickname":"Geek_f6a7c7","note":"","ucode":"3927E94C25A552","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2086960,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d8/30/840b64fa.jpg","nickname":"Frankæœ¨é£","note":"","ucode":"8DAA325F19E00E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332066,"discussion_content":"æœ‰é—®é¢˜çš„ï¼Œå¦‚æœincrbyæ•°é‡æ²¡æœ‰è¶…è¿‡æ€»åº“å­˜æ•°è¿˜æ˜¯å¯ä»¥ï¼Œè¶…è¿‡äº†æ€»åº“å­˜æ•°å°±æœ‰é—®é¢˜ã€‚å‡è®¾æ€»åº“å­˜æ˜¯100ï¼Œincrbyåˆ°äº†101ï¼Œè¶…è¿‡æ€»åº“å­˜æ•°è‚¯å®šæ˜¯æ²¡æ³•ä¸‹å•ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æœ‰äººé€€å•ï¼Œåº“å­˜æ•°å›æ»šè¿˜æ˜¯100ï¼Œè¿˜æ˜¯æ²¡æ³•ä¸‹å•ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åœ¨incrbyè¶…è¿‡äº†100çš„æ—¶å€™ä»£ç ä¸­æ‰‹åŠ¨å›æ»šåº“å­˜æ•°ï¼Œä½†æ˜¯è¿™ä¸ªæ‰‹åŠ¨å›æ»šåˆæ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œå›æ»šä¹‹å‰åˆæœ‰äººæŠ¢è´­ä¸‹å•incrbyåˆ°102äº†ï¼Œè¿™å°±é™·å…¥é«˜å¹¶å‘æŸçŸ­æ—¶é—´å†…incybyçš„æ•°é‡è¶…è¿‡æ€»åº“å­˜æ•°çš„åƒµå±€","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1607053939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327131,"ip_address":""},"score":332066,"extra":""},{"author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2342029,"avatar":"","nickname":"Geek_f6a7c7","note":"","ucode":"3927E94C25A552","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352050,"discussion_content":"101åšåŸå­å›æ»šï¼Œå°±å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614582770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":332066,"ip_address":""},"score":352050,"extra":""},{"author":{"id":2542376,"avatar":"https://static001.geekbang.org/account/avatar/00/26/cb/28/21a8a29e.jpg","nickname":"å¤å¤©","note":"","ucode":"5F224DDAC94DFF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2342029,"avatar":"","nickname":"Geek_f6a7c7","note":"","ucode":"3927E94C25A552","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370622,"discussion_content":"å¾ˆç®€å•å˜›ï¼Œæˆ‘ä»¬æ¢ä¸ªæ€è·¯ã€‚å¯ä»¥ç•¥å¾®å¤šæ”¾è¿›æ¥ä¸€äº›äººã€‚è¿˜æœ‰ db å±‚æ¥ä¿è¯æ•°é‡ã€‚å…¶æ¬¡ï¼Œç§’æ€åœºæ™¯ï¼ŒåŸºæœ¬ä¸å¯èƒ½æœ‰äººé€€å•ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619486012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":332066,"ip_address":""},"score":370622,"extra":""}]},{"author":{"id":1943690,"avatar":"","nickname":"Geek_1b42a9","note":"","ucode":"79AF29855A53D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376653,"discussion_content":"è€å¸ˆç»™çš„é€šç”¨çš„å§ã€‚è¦æ˜¯åƒä½ è¿™ä¹ˆä¸ªæ–¹å¼æå‡ºç–‘é—®çš„å°±æ›´å¤šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622257537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1295609,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJRFRX8kNzNet7FibNvtavbVpAwK09AhIhrib9k762qWtH6mre8ickP7hM5mgZC4ytr8NnmIfmAhxMSQ/132","nickname":"è€å¤§ä¸å°","note":"","ucode":"35BCDD3CB13467","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372287,"discussion_content":"æ²¡æœ‰äººè®¤ä¸ºincrä¹‹åçš„æ¯”è¾ƒæ“ä½œå­˜åœ¨é—®é¢˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620271368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1792875,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic46Vr5WCsSYuqgQGvgEBnicylYPcgl0Tn57RF8InuxMZDvvt0pFiaIJjJTsOvC1Ed5ZLA/132","nickname":"é›¨æ½‡","note":"","ucode":"735B7E796E84EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1295609,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJRFRX8kNzNet7FibNvtavbVpAwK09AhIhrib9k762qWtH6mre8ickP7hM5mgZC4ytr8NnmIfmAhxMSQ/132","nickname":"è€å¤§ä¸å°","note":"","ucode":"35BCDD3CB13467","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387348,"discussion_content":"ä¸ªäººè®¤ä¸ºä¸å­˜åœ¨ï¼Œä¸ç®¡æ˜¯incrè¿˜æ˜¯decrï¼Œè¿”å›ç»™ä½ çš„éƒ½æ˜¯RedisæœåŠ¡ç«¯å¤„ç†åçš„æ•°æ®ï¼Œå…¶ä»–äººæ“ä½œçš„æ—¶å€™ï¼Œéƒ½æ˜¯åŸºäºRedisæœåŠ¡å™¨ä¸­æœ€æ–°çš„å€¼æ“ä½œï¼Œæ‰€ä»¥æ²¡æœ‰é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628131680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":372287,"ip_address":""},"score":387348,"extra":""}]},{"author":{"id":1023101,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/7d/774e07f9.jpg","nickname":"studyçš„ç¨‹åºå‘˜","note":"","ucode":"E5AE9037D24429","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371794,"discussion_content":"qpsè¶³å¤Ÿå¤§ï¼Œè¿‡ä¸€ä¼šå°±æ˜¯ä¸€ä¸ªbigkey","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619969358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1801058,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7b/62/ec94cee4.jpg","nickname":"å½­æ–‡è¾¾","note":"","ucode":"8DCC27EC5AF263","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1023101,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/7d/774e07f9.jpg","nickname":"studyçš„ç¨‹åºå‘˜","note":"","ucode":"E5AE9037D24429","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399199,"discussion_content":"è·Ÿbigkeyæœ‰ä»€ä¹ˆå…³ç³»ï¼Œä¸ç®¡æ€ä¹ˆæ“ä½œéƒ½ä¸ä¼šæ˜¯bigkey","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1632920735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":371794,"ip_address":""},"score":399199,"extra":""},{"author":{"id":2224520,"avatar":"https://static001.geekbang.org/account/avatar/00/21/f1/88/cca5335f.jpg","nickname":"ç¥æ¸…æ°”çˆ½æµ·æ³¢ä¸œ","note":"","ucode":"E5F45675DC059F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1023101,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/7d/774e07f9.jpg","nickname":"studyçš„ç¨‹åºå‘˜","note":"","ucode":"E5AE9037D24429","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551274,"discussion_content":"bigkeyä¸æ˜¯è¿™ä¸ªæ„æ€å§ğŸ˜‚ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644972254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":371794,"ip_address":""},"score":551274,"extra":""}]},{"author":{"id":1765097,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzCZibunMDooyZ86JRibGasxZFbq8HT4WzHAPQIiaBneWnwkb6CaSkesMwAvZpxFGib2ibVA9DVP9LbhQ/132","nickname":"Geek_b43b32","note":"","ucode":"5DD112591702BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371404,"discussion_content":"æˆ‘è§‰å¾—å¯ä»¥ï¼Œåœ¨é€€è´§æ—¶åšåŸå­æ“ä½œå°±å¯ä»¥äº†ï¼Œåˆ¤æ–­æ˜¯å¦å°äº0ï¼Œå°äºå°±è®¾ç½®ä¸º1ï¼Œå¦åˆ™incrï¼Œæ¯•ç«Ÿé€€è´§ä¸å±äºé«˜å¹¶å‘æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619757193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2351949,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e3/4d/8a26dbb2.jpg","nickname":"æ«ä¸­æµªå­","note":"","ucode":"860BEA32059B37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358342,"discussion_content":"å•†å®¶åé¢å†è¡¥åº“å­˜æ€ä¹ˆåŠ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615968666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1145554,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg","nickname":"Sch0ng","note":"","ucode":"73F6113931B1AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2351949,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e3/4d/8a26dbb2.jpg","nickname":"æ«ä¸­æµªå­","note":"","ucode":"860BEA32059B37","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386483,"discussion_content":"1. å¢åŠ åº“å­˜çš„luaè„šæœ¬ï¼›2.åˆ†å¸ƒå¼äº’æ–¥é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627609943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":358342,"ip_address":""},"score":386483,"extra":""}]},{"author":{"id":2252928,"avatar":"","nickname":"Geek_653096","note":"","ucode":"949B213B3A4E33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326201,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ é¿å…å¼•å…¥è„æ•°æ®å§ï¼Œredisä¸­çš„åº“å­˜ æœ€ç»ˆè¿˜æ˜¯å¾—åŒæ­¥åˆ°æ•°æ®åº“ä¸Šçš„ã€‚æ¯”å¦‚å®šæ—¶åŒæ­¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605541374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2252928,"avatar":"","nickname":"Geek_653096","note":"","ucode":"949B213B3A4E33","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340176,"discussion_content":"ä¸ä¼šå®šæ—¶å§ ,ä¸€èˆ¬å¼‚æ­¥æ›´æ–°db ,ç”¨æ¶ˆæ¯é˜Ÿåˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609922333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326201,"ip_address":""},"score":340176,"extra":""}]}]},{"had_liked":false,"id":266411,"user_name":"æ–°ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1079495,"ip_address":"","ucode":"4473DC1505F158","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","comment_is_top":false,"comment_ctime":1607328603,"is_pvip":false,"replies":[{"id":"97925","content":"é«˜è€ƒçš„æ¯”å–»å¾ˆå½¢è±¡ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608995008,"ip_address":"","comment_id":266411,"utype":1}],"discussion_count":3,"race_medal":0,"score":"83211707227","product_id":100056701,"comment_content":"ä¸€èˆ¬ç§’æ€åœºæ™¯ ç”¨redis æ‰£å‡åº“å­˜ï¼Œä¸å»ä¿è¯åŸå­æ€§ï¼Œæ‰£å‡åæœ‰å¯èƒ½è¶…å–ï¼Œå†ç”¨æ•°æ®åº“å»ä¿è¯æœ€ç»ˆä¸è¶…å–ï¼Œå› ä¸ºè¶…å–çš„ä¸ä¼šå¤šï¼Œèƒ½å¤Ÿæ‰“åˆ°mysqlçš„æ“ä½œå°±æ˜¯è¶…å–+å®é™…åº“å­˜ï¼Œæ‰€ä»¥mysqlå‹åŠ›ä¹Ÿä¼šæ¯”è¾ƒå°‘<br><br>è¯¾åä¹ é¢˜ï¼š  redisçš„ 800ä¸ªåº“å­˜ï¼Œåˆ†å¸ƒåˆ°4ä¸ªserverä¸Šï¼Œæ‰“åˆ°å“ªä¸ªserverä¸Šï¼Œå–å†³äºkeyï¼Œå¦‚æœkeyåˆ†å¸ƒä¸å‡åŒ€ï¼Œä¼šå¯¼è‡´ ä¸€å®šçš„ä¸å…¬å¹³ï¼Œå°±åƒé«˜è€ƒä¸€æ ·ï¼Œæœ‰çš„åœ°æ–¹è€ƒç”Ÿå¤šï¼Œæœ‰çš„åœ°æ–¹è€ƒç”Ÿå°‘ï¼Œè™½ç„¶åœ¨æ¯ä¸ªçœä¸­å½•å–åé¢ä¸€æ ·ï¼Œä½†æ˜¯ä¹Ÿä¸å…¬å¹³","like_count":20,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511255,"discussion_content":"é«˜è€ƒçš„æ¯”å–»å¾ˆå½¢è±¡ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608995008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1792875,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic46Vr5WCsSYuqgQGvgEBnicylYPcgl0Tn57RF8InuxMZDvvt0pFiaIJjJTsOvC1Ed5ZLA/132","nickname":"é›¨æ½‡","note":"","ucode":"735B7E796E84EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387352,"discussion_content":"Redisä½¿ç”¨incræˆ–decræ–¹å¼åˆ¤æ–­æ˜¯å¦å–å®Œï¼Œä¸ºå•¥è¿˜è¦æ•°æ®åº“ä¿è¯æœ€ç»ˆä¸è¶…å–å‘¢ï¼Ÿä¸æ˜¯å¾ˆç†è§£è¿™ä¸ªåˆ†æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628131910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1792875,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic46Vr5WCsSYuqgQGvgEBnicylYPcgl0Tn57RF8InuxMZDvvt0pFiaIJjJTsOvC1Ed5ZLA/132","nickname":"é›¨æ½‡","note":"","ucode":"735B7E796E84EF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578403,"discussion_content":"ä»–æ²¡è¯´ç”¨incr","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656699368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":387352,"ip_address":""},"score":578403,"extra":""}]}]},{"had_liked":false,"id":265866,"user_name":"Geek_f6a7c7","can_delete":false,"product_type":"c1","uid":2342029,"ip_address":"","ucode":"3927E94C25A552","user_header":"","comment_is_top":false,"comment_ctime":1607055019,"is_pvip":false,"replies":[{"id":"97929","content":"åˆ†æçš„ä¸é”™ã€‚ä½¿ç”¨åˆ‡ç‰‡åï¼Œå¤„ç†é€»è¾‘è¦è€ƒè™‘åˆ†å¸ƒå¼çš„æ•°æ®æƒ…å†µäº†ï¼Œå˜å¾—å¤æ‚äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608997149,"ip_address":"","comment_id":265866,"utype":1}],"discussion_count":2,"race_medal":0,"score":"53146662571","product_id":100056701,"comment_content":"ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ¡ˆï¼Œä¸€ä¸ªå•†å“åº“å­˜æ•°åˆ‡ç‰‡ä¸åŒå®ä¾‹å­˜å‚¨çš„ç¡®å¯ä»¥å‡å°‘å•ä¸ªå®ä¾‹çš„å‹åŠ›ï¼Œä½†æ˜¯åœ¨ä¸šåŠ¡ä¸Šå¯è¡Œæ€§æœ‰å¾…å•†æ¦·ï¼Œå¦‚æœå½“å‰åˆ‡ç‰‡å®ä¾‹æ²¡æœ‰åº“å­˜ï¼Œæ˜¯ä¸æ˜¯è¦å†è¯·æ±‚åˆ«çš„åˆ‡ç‰‡å®ä¾‹ï¼Ÿç‰¹åˆ«æ˜¯åº“å­˜æ•°éƒ½è¢«æŠ¢è´­å®Œæˆåï¼Œåé¢çš„è¯·æ±‚æ˜¯ä¸æ˜¯éƒ½è¦è¯·æ±‚4ä¸ªåˆ‡ç‰‡èŠ‚ç‚¹åšåº“å­˜æ•°çš„èšåˆæ‰çŸ¥é“åˆæ²¡äººé€€è´§ï¼Œåšåº“å­˜æ•°çš„èšåˆï¼Ÿ","like_count":12,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511076,"discussion_content":"åˆ†æçš„ä¸é”™ã€‚ä½¿ç”¨åˆ‡ç‰‡åï¼Œå¤„ç†é€»è¾‘è¦è€ƒè™‘åˆ†å¸ƒå¼çš„æ•°æ®æƒ…å†µäº†ï¼Œå˜å¾—å¤æ‚äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608997149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2250114,"avatar":"https://static001.geekbang.org/account/avatar/00/22/55/82/985411a8.jpg","nickname":"xyx","note":"","ucode":"1AECC9DDAC3D11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349508,"discussion_content":"å•å°redis 6.0+dpdk 30wæŸ¥è¯¢åº”è¯¥æ²¡é—®é¢˜â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613275971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267744,"user_name":"Geek_0879b1","can_delete":false,"product_type":"c1","uid":2354491,"ip_address":"","ucode":"57B3D7C6281DDD","user_header":"","comment_is_top":false,"comment_ctime":1607911783,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"31672682855","product_id":100056701,"comment_content":"è€å¸ˆï¼Œç§’æ€è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸è®ºRedisé‡‡ç”¨RDBè¿˜æ˜¯AOFçš„æ–¹å¼æ¥æŒä¹…åŒ–ï¼Œéƒ½æœ‰å¯èƒ½å¯¼è‡´åº“å­˜æ•°æ®çš„ä¸¢å¤±ã€‚è€Œå¦‚æœä¸é‡‡ç”¨æŒä¹…åŒ–çš„æ–¹å¼ï¼Œæ•°æ®ä¸¢å¤±çš„é£é™©æ›´å¤§ã€‚æ­¤æ—¶å¦‚æœredisä¸­çš„åº“å­˜æ•°æ®ä¸¢å¤±ï¼Œå¹¶ä¸”åº“å­˜æ•°æ®æ²¡æœ‰åŒæ­¥åˆ°å…³ç³»å‹æ•°æ®åº“ï¼Œè¿™ç§ä¸¢å¤±çš„é£é™©è¯¥å¦‚ä½•åº”å¯¹ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":2105175,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/40ab8h1zbSUZmzxARyicDuXECYwtQNDd9jxAbys5LMnVLJMmibTCHd1icrRZMnMSvTJ27UdITA0439hAaVIxcOkGQ/132","nickname":"Geek_72b9a7","note":"","ucode":"4C26B79F9F15A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391329,"discussion_content":"è®¢å•ä¿¡æ¯å‘ä¸€ä»½åˆ°é˜Ÿåˆ—ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630402147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1210265,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Gswh7ibY4tubXhp0BXOmV2pXZ3XsXic1d942ZMAEgWrRSF99bDskOTsG1g172ibORXxSCWTn9HWUX5vSSUVWU5I4A/132","nickname":"å¥”å¥”å¥”è·‘","note":"","ucode":"F86EC205DCAACE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352421,"discussion_content":"ç¼“å­˜ä¸éœ€è¦åšæŒä¹…åŒ–ï¼ŒæŒä¹…åŒ–åœ¨DBé‡Œã€‚æ•°æ®ä¸¢äº†å°±å›æº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614733334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2250114,"avatar":"https://static001.geekbang.org/account/avatar/00/22/55/82/985411a8.jpg","nickname":"xyx","note":"","ucode":"1AECC9DDAC3D11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349507,"discussion_content":"ä¸Špikaâ€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613275878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622754,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c2/e2/c131e9d6.jpg","nickname":"ç¯æ— ç„°","note":"","ucode":"3FD28BBE1CDBD7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348281,"discussion_content":"Redis å¹¶ä¸èƒ½ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œè¿™æ„å‘³è¿™åœ¨å®é™…ä¸­é›†ç¾¤åœ¨ç‰¹å®šçš„æ¡ä»¶ä¸‹å¯èƒ½ä¼šä¸¢å¤±å†™æ“ä½œã€‚æˆ‘çš„æƒ³æ³•æ˜¯ appendfsync always å’Œ ä½¿ç”¨å•ä¾‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612497487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2060546,"avatar":"","nickname":"é©¬å²³","note":"","ucode":"D2CB7AFF1EB753","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345177,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611675997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1108924,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/bc/6ccac4bb.jpg","nickname":"æ­¦æ–‡æ–‡æ­¦","note":"","ucode":"5288366646A15B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2060546,"avatar":"","nickname":"é©¬å²³","note":"","ucode":"D2CB7AFF1EB753","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566489,"discussion_content":"è€å¸ˆä¹Ÿæ²¡æ‹›ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650703730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":345177,"ip_address":""},"score":566489,"extra":""}]}]},{"had_liked":false,"id":261161,"user_name":"èŠ±è½®å›","can_delete":false,"product_type":"c1","uid":1044639,"ip_address":"","ucode":"A4F27CC1C38D3B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f0/9f/6689d26e.jpg","comment_is_top":false,"comment_ctime":1605231819,"is_pvip":true,"replies":[{"id":"98057","content":"è¯·æ±‚åˆ†ç‰‡çš„å‡è¡¡åº¦ä¼šæ¯”è¾ƒéš¾æ§åˆ¶ï¼Œå¦å¤–ï¼Œå¦‚æœæŒ‰ç…§åˆ†åº“é¡ºåºæ‰£çš„è¯ï¼Œé‚£ä¹ˆè®¾è®¡å››ä¸ªåˆ†ç‰‡æœŸæœ›è¾¾åˆ°çš„æ”¯æŒå¹¶å‘æ‰£å‡åº“å­˜çš„ç›®æ ‡å°±è¾¾ä¸åˆ°äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1609114123,"ip_address":"","comment_id":261161,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31670002891","product_id":100056701,"comment_content":"è®¾è®¡ä¸Šæ˜¯å¯è¡Œçš„ï¼Œå°†ç§’æ€è¯·æ±‚ä¹Ÿè¿›è¡Œåˆ†ç‰‡ï¼Œåº“å­˜çš„æ ¡éªŒå¯ä»¥æŒ‰ç…§åˆ†åº“é¡ºåºæ‰£ã€‚","like_count":7,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509397,"discussion_content":"è¯·æ±‚åˆ†ç‰‡çš„å‡è¡¡åº¦ä¼šæ¯”è¾ƒéš¾æ§åˆ¶ï¼Œå¦å¤–ï¼Œå¦‚æœæŒ‰ç…§åˆ†åº“é¡ºåºæ‰£çš„è¯ï¼Œé‚£ä¹ˆè®¾è®¡å››ä¸ªåˆ†ç‰‡æœŸæœ›è¾¾åˆ°çš„æ”¯æŒå¹¶å‘æ‰£å‡åº“å­˜çš„ç›®æ ‡å°±è¾¾ä¸åˆ°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609114123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277105,"user_name":"é©¬å¬","can_delete":false,"product_type":"c1","uid":1430132,"ip_address":"","ucode":"93D83CB5FAE5AD","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/74/7861f504.jpg","comment_is_top":false,"comment_ctime":1612260404,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"27382064180","product_id":100056701,"comment_content":"ä¸ºå•¥åº“å­˜æ‰£å‡ä¸èƒ½å†æ•°æ®åº“æ‰§è¡Œå‘¢ï¼Ÿ<br>é™¤äº†æ–‡ä¸­æåˆ°çš„é¢å¤–å¼€é”€å’Œå¯èƒ½å¯¼è‡´è¶…å”®ï¼Œå¦å¤–å¦‚æœæ•°æ®åº“æ˜¯ MySQLï¼Œåˆ™å¯èƒ½å¯¼è‡´ MySQL çš„æ­»é”æ£€æµ‹ï¼Œå¯¼è‡´æ¶ˆè€—å¤§é‡çš„ CPU èµ„æºã€‚å…·ä½“å¯ä»¥å‚è€ƒã€ŠMySQLå®æˆ˜45 è®²ã€‹07 èŠ‚ ï¼šè¡Œé”åŠŸè¿‡","like_count":6,"discussions":[{"author":{"id":1622022,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJia6zEsh2u119zJicmq7wApvnricZEKiawaZicice1cOzujWdFicFwPtavlHiaVpCNgCpxBtdl7ynd3y0wkQ/132","nickname":"james_xu","note":"","ucode":"12E50291F5BA89","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363986,"discussion_content":"èµï¼åˆšåˆå»å›é¡¾äº†è¿™éƒ¨åˆ†ï¼Œå‘ç°å¾ˆå¤šéƒ½å¿˜è®°äº†~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617341721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262727,"user_name":"æ›¾è½¼éºŸ","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1605833696,"is_pvip":false,"replies":[{"id":"98073","content":"è¿™é‡Œçš„å…³é”®æŠ€æœ¯æŒ‘æˆ˜å°±æ˜¯ï¼šè¯·æ±‚åˆ†å‘è§„åˆ™å’Œåº“å­˜åˆ†å¸ƒå¼æŸ¥è¯¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1609116509,"ip_address":"","comment_id":262727,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18785702880","product_id":100056701,"comment_content":"æˆ‘ä¸ªäººè®¤ä¸ºè¿™ä¸ªæ–¹å¼ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºå•ä¸ªskuåˆ†å¼€åï¼Œéœ€è¦å¯¹ç”¨æˆ·çš„è¯·æ±‚åšè·¯ç”±åˆ¤æ–­ï¼Œå‡å¦‚ä¸€ä¸ªç”¨æˆ·è¯·æ±‚æœ¬èº«å°±å‘å‡ºäº†ä¸¤æ¡ï¼ŒæŒ‰ç…§éšæœºè·¯ç”±çš„æ–¹å¼ï¼Œä»–æœ‰å¯èƒ½åœ¨ä¸¤ä¸ªåˆ‡ç‰‡ä¸­æŠ¢åˆ°å•†å“ã€‚å‡å¦‚è·¯ç”±è§„åˆ™æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆä¼šå‡ºç°skuè¿˜æœ‰åº“å­˜ï¼Œä½†æ˜¯ç”¨æˆ·å°±æ˜¯æŠ¢ä¸åˆ°çš„æƒ…å†µ","like_count":4,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509945,"discussion_content":"è¿™é‡Œçš„å…³é”®æŠ€æœ¯æŒ‘æˆ˜å°±æ˜¯ï¼šè¯·æ±‚åˆ†å‘è§„åˆ™å’Œåº“å­˜åˆ†å¸ƒå¼æŸ¥è¯¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609116509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261620,"user_name":"Geek_9a0c9f","can_delete":false,"product_type":"c1","uid":2159835,"ip_address":"","ucode":"2A6078F740881F","user_header":"","comment_is_top":false,"comment_ctime":1605447104,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18785316288","product_id":100056701,"comment_content":"è€å¸ˆé—®ä¸‹ï¼Œæœ€åçš„è®¢å•å¤„ç†æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Œåº“å­˜æ‰£å®ŒæˆåŠŸæ“ä½œï¼Œæ¥ç€è¿›è¡Œä¸‹å•æ“ä½œï¼Œä¸‹å•æ“ä½œæ˜¯ç›´æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œä¹ˆï¼Ÿè¿˜æ˜¯å°†è¡Œä¸ºæ‰“å…¥kafkaä¹‹ç±»çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç„¶åæ…¢æ…¢çš„å»æ¶ˆè´¹å¤„ç†è®¢å•","like_count":4},{"had_liked":false,"id":272433,"user_name":"ç‹äº‘æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1837246,"ip_address":"","ucode":"03236FFDC09E89","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoSMRiaMtAcqQz7oNzcNg0M2vEic2sByibGib0l9z2g5Niafo7caLhqJtACRfCCT1sdAKQQM40BHEWsdOg/132","comment_is_top":false,"comment_ctime":1610089126,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14494991014","product_id":100056701,"comment_content":"ä½¿ç”¨å¤šä¸ªå®ä¾‹çš„åˆ‡ç‰‡é›†ç¾¤æ¥åˆ†æ‹…ç§’æ€è¯·æ±‚ï¼Œæ˜¯å¦æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Ÿ<br>ä¸å¤ªè¡Œï¼Œéš¾åº¦å¾ˆå¤§ï¼Œç¬¬ä¸€ä¸ªæ˜¯æµé‡éœ€è¦å‡è¡¡åˆ†é…åˆ°æ¯ä¸ªå®ä¾‹ï¼Œç¬¬äºŒä¸ªæ˜¯å¦‚æœè¯´ä¸€ä¸ªè®¢å•éœ€è¦æ‰£å‡å¤šä¸ªåº“å­˜ï¼Œè€Œå•ä¸ªå®ä¾‹åº“å­˜å‰©ä½™ä¸å¤Ÿï¼Œå¯¼è‡´æ‰£å‡åº“å­˜å¤±è´¥ï¼Œä½†å…¶å®æ€»åº“å­˜æ˜¯å¤Ÿçš„ã€‚æ¯”å¦‚æ¯ä¸ªå®ä¾‹è¿˜å‰©1ä»¶åº“å­˜ï¼Œä¸€ä¸ªè®¢å•åŒæ—¶ç§’æ€4ä»¶ï¼Œè¿™ä¸‹å°±ä¼šæ‰£å‡å¤±è´¥ï¼Œå®é™…ä¸Šåº“å­˜æ˜¯å¤Ÿçš„","like_count":3},{"had_liked":false,"id":265668,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1606976530,"is_pvip":false,"replies":[{"id":"97931","content":"å…³é”®æ˜¯è¿™ä¸ªå‡è®¾ä¸ä¸€å®šèƒ½å®é™…åšåˆ°ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608997442,"ip_address":"","comment_id":265668,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14491878418","product_id":100056701,"comment_content":"å¦‚æœç§’æ€è¯·æ±‚èƒ½å¤Ÿæ¯”è¾ƒå‡åŒ€çš„åˆ†åˆ«æ‰“åˆ°4ä¸ªå®ä¾‹ä¸Šæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚<br>è¿™ä¸ªæ—¶å€™ä¸è¿”å›å‰©ä½™åº“å­˜ï¼Œä¸åšèšåˆï¼Œèƒ½å¤§å¹…åº¦æé«˜é€Ÿåº¦ã€‚","like_count":3,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511009,"discussion_content":"å…³é”®æ˜¯è¿™ä¸ªå‡è®¾ä¸ä¸€å®šèƒ½å®é™…åšåˆ°ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608997442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066752,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","nickname":"piboye","note":"","ucode":"7CFD8712857A85","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551958,"discussion_content":"hash(uid+cnt), è¿™æ ·æ˜¯ä¸æ˜¯å°±å¯ä»¥åšåˆ°å…¬å¹³å‘¢ï¼Œ ç”¨æˆ·å¤šæ¬¡é‡è¯•ä¼šåˆ°ä¸åŒçš„å®ä¾‹ä¸Šï¼Œ å¦‚æœç”¨å®åœ¨ä¸è¡Œï¼ŒHWR hash å¯ä»¥æ¯”è¾ƒå…¬å¹³çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645189431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293681,"user_name":"JAVAåˆçº§å¼€å‘å·¥ç¨‹å¸ˆ","can_delete":false,"product_type":"c1","uid":1876716,"ip_address":"","ucode":"F78E2F30751AC2","user_header":"http://thirdwx.qlogo.cn/mmopen/KFgDEHIEpnTUibfcckj33D1LVj9VapfrK3Yq2Gj00wnLt4nkWS7HvYy5NxvmnQcQpaysuBHVrB9MILWZ9hibUNasicPNtueYoNM/132","comment_is_top":false,"comment_ctime":1621490188,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10211424780","product_id":100056701,"comment_content":"å…³äºç§’æ€åœºæ™¯æœ‰å‡ ä¸ªé—®é¢˜<br>1ã€rediså¹¶ä¸ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ å‘ç”Ÿä¸»å¤‡åˆ‡æ¢æœ‰å¯èƒ½ä¼šé€ æˆè¶…å–è¿™ç§æƒ…å†µæ€ä¹ˆå¤„ç†<br>2ã€ç§’æ€å¦‚ä½•å¤„ç†å¤§åº“å­˜åœºæ™¯ å¦‚æœä¸€ä¸ªå•†å“åº“å­˜å¯¹åº”redisä¸€ä¸ªkey  è¿™ä¸ªkeyå¯èƒ½åŒæ—¶æ‰¿å—æ•°åä¸‡çš„qps è¿™ç§æƒ…å†µredisä¹Ÿæ˜¯æ‰›ä¸ä½çš„","like_count":2,"discussions":[{"author":{"id":3071902,"avatar":"","nickname":"Geek_e4114f","note":"","ucode":"265D8ADE220A72","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585510,"discussion_content":"è¶…å–å¯ä»¥ç”±æ•°æ®åº“å…œåº•å•Šï¼Œé‡è¦çš„æ˜¯è®©redisæŒ¡æ‰å¤§éƒ¨åˆ†è¯·æ±‚æµé‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661614529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261288,"user_name":"Geek_f00f74","can_delete":false,"product_type":"c1","uid":2179830,"ip_address":"","ucode":"7A0E89CB0AF499","user_header":"","comment_is_top":false,"comment_ctime":1605259045,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"10195193637","product_id":100056701,"comment_content":"å®é™…ç”Ÿäº§ä¸­èƒ½ç”¨Redisåšåº“å­˜æ ¡éªŒå’Œæ‰£å‡å—ï¼Ÿå¦‚æœRediså®•æœºå¦‚ä½•ä¿è¯Redisåº“å­˜å’Œæ•°æ®åº“åº“å­˜ä¸€è‡´ï¼Ÿå¦‚æœå‘ç”Ÿä¸»ä»åˆ‡æ¢å¯¼è‡´åº“å­˜æ›´æ–°ä¸¢å¤±å‘¢ï¼Ÿ<br>ä½¿ç”¨åˆ†å¸ƒå¼é”çš„è¯å°±æ˜¯ä¸²è¡ŒåŒ–äº†ï¼Œè¿™ä¸ªæ€§èƒ½å¤ªå·®äº†å§ã€‚","like_count":2,"discussions":[{"author":{"id":1313079,"avatar":"https://static001.geekbang.org/account/avatar/00/14/09/37/5101847e.jpg","nickname":"ç‡•å­å","note":"","ucode":"78763F8BE2550F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338742,"discussion_content":"å®é™…ä¸ä¼šè¿™æ ·åšï¼Œè€å¸ˆæœ‰äº›è¯¾ç¨‹è¿˜æ˜¯åç†è®ºï¼Œæ²¡å®é™…ç”Ÿäº§ç»éªŒ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1609349851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1022757,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9b/25/abb7bfe3.jpg","nickname":"æ·¡æ·¡çš„å¿§ä¼¤","note":"","ucode":"D4911BEB2F8434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1313079,"avatar":"https://static001.geekbang.org/account/avatar/00/14/09/37/5101847e.jpg","nickname":"ç‡•å­å","note":"","ucode":"78763F8BE2550F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352055,"discussion_content":"ä¸ç”¨redisï¼Œè¿˜æœ‰ä»€ä¹ˆè§£å†³åŠæ³•ä¿è¯ï¼Ÿrediså®•æœºæ—¶å€™ï¼Œå…¶å®ç§’æ€ä¹Ÿæ— æ³•å†ç»§ç»­å…¶å®ï¼Œç§’åˆ‡ä¸»å¤‡ï¼Œä¹Ÿéš¾ä»¥æŠµæ¶ˆå¯¹æ­£åœ¨è¿›è¡Œçš„ç§’æ€æ´»åŠ¨äº†ã€‚\n\nä½†æ˜¯å‡ºé—®é¢˜æ—¶å€™ï¼Œä¿è¯é‡å¯æœåŠ¡å‰åï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ•°æ®ä¸€è‡´æ€§å°±å¾ˆé‡è¦äº†ã€‚ä¸ªäººç†è§£ã€‚\n\nä¸ºäº†ä¿è¯ç³»ç»Ÿä¾æ—§å¯¹å¤–æ˜¯å¯ç”¨ï¼Œæ¯”å¦‚å¯ä»¥åŠ å¤§é™æµï¼Œç”¨æ•°æ®åº“æŠ—ä¸€ä¸‹ã€‚åªæ˜¯ç”¨æˆ·ä½“éªŒå·®äº†ã€‚\n\nrediså®•æœºçš„é—®é¢˜ï¼Œå°±æ˜¯å¦å¤–ä¸€ä¸ªçº¬åº¦çš„é—®é¢˜è¦æ€è€ƒçš„ã€‚ä¸èƒ½æŒ‡æœ›ä¸€ä¸ªredisï¼Œè§£å†³æ‰€æœ‰çš„é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614583604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338742,"ip_address":""},"score":352055,"extra":""},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1313079,"avatar":"https://static001.geekbang.org/account/avatar/00/14/09/37/5101847e.jpg","nickname":"ç‡•å­å","note":"","ucode":"78763F8BE2550F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387145,"discussion_content":"æ˜¯å•Šï¼Œå®é™…ç”Ÿäº§æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿåœ¨ Redis å‰é¢åŠ ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚æœ Redis å®•æœºï¼Œç›´æ¥èµ°æ•°æ®åº“ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628004098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338742,"ip_address":""},"score":387145,"extra":""}]},{"author":{"id":2060546,"avatar":"","nickname":"é©¬å²³","note":"","ucode":"D2CB7AFF1EB753","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345176,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°ç›¸åŒé—®é¢˜ï¼Œredisæ‰£å‡åº“å­˜æ˜¯å¯ä»¥æ”¯æ’‘é«˜å¹¶å‘ï¼Œä½†redoså®•æœºååº”å¦‚ä½•å¤„ç†ï¼Ÿé¦–å…ˆï¼Œæ•°æ®åº“ä¿æŒå’Œredisåº“å­˜ä¸€è‡´æ˜¯ä¸ç°å®ï¼Œå¦‚æœèƒ½ä¿æŒä¸€è‡´å°±æ²¡å¿…è¦ç”¨redisäº†ã€‚å¦‚æœæ•°æ®åº“å¼‚æ­¥ä¿æŒå’Œredisé¢åº¦ä¸€è‡´ï¼Œé‚£ä¹ˆrediså®•æœºæ—¶ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿå¦‚æœç­‰æ•°æ®ä¸€è‡´åœ¨å¯¹å¤–æä¾›æœåŠ¡å°±ä¼šå½±å“åœ¨é€”äº¤æ˜“ï¼Œå¦‚æœä¸ç­‰ä¸€è‡´å°±æä¾›æœåŠ¡ï¼Œå°±å¯èƒ½å‡ºç°è¶…å–ã€‚æœ‰æ²¡æœ‰å¤§ç¥è§£å†³è¿‡ç±»ä¼¼çš„å®é™…é—®é¢˜ï¼Ÿï¼Ÿï¼Ÿè°¢è°¢ğŸ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611675889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1287774,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a6/5e/b05254a6.jpg","nickname":"Mhy","note":"","ucode":"DE19BCAD1F856E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2060546,"avatar":"","nickname":"é©¬å²³","note":"","ucode":"D2CB7AFF1EB753","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541281,"discussion_content":"å¦‚æœåªç”¨redisåšåº“å­˜å‡æ‰£ï¼Œrediså®•æœºäº†ï¼Œé‚£ç§’æ€å°±å¯ä»¥åœæ­¢äº†ï¼Œå¯ä»¥æ¢ä¸ªæ€è·¯ï¼Œå¦‚æœmysqlå‡ºé—®é¢˜äº†ï¼Œæ€ä¹ˆä¿è¯ç§’æ€æ­£å¸¸ï¼Œç­”æ¡ˆæ˜¯æ ¹æœ¬æ— æ³•ä¿è¯ï¼Œèƒ½åšçš„å°±æ˜¯å°½å¿«æ¢å¤mysql/redisä»è€Œå‡å°‘å¯¹ç”¨æˆ·çš„å½±å“ï¼Œå¦‚æœæ˜¯å› ä¸ºæµé‡é—®é¢˜å¯¼è‡´redis/mysqlå®•æœºï¼Œé‚£å°±æ˜¯å‹æµ‹æ²¡æœ‰åšå¥½ï¼Œè¿™æ˜¯è¦é¿å…çš„é—®é¢˜ï¼Œæ‰€ä»¥ç§’æ€çš„å…³é”®ä»æ¥éƒ½æ˜¯å‰Šå³°å‡æµï¼Œé˜²æ­¢è¿‡å¤šçš„æµé‡è¿›å…¥åˆ°å½“å‰ç³»ç»Ÿï¼Œä»å‰ç«¯åˆ°ç½‘å…³åˆ°å…·ä½“çš„åº“å­˜æœåŠ¡ï¼Œéƒ½è¦åšå¥½ç†”æ–­é™çº§é™æµç­–ç•¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640316945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":345176,"ip_address":""},"score":541281,"extra":""}]}]},{"had_liked":false,"id":342554,"user_name":"Breeze","can_delete":false,"product_type":"c1","uid":2962899,"ip_address":"","ucode":"8B6711F5B9D112","user_header":"https://static001.geekbang.org/account/avatar/00/2d/35/d3/8de43dd5.jpg","comment_is_top":false,"comment_ctime":1650339799,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5945307095","product_id":100056701,"comment_content":"ä½¿ç”¨å¤šä¸ªå®ä¾‹çš„åˆ‡ç‰‡é›†ç¾¤æ¥åˆ†æ‹…ç§’æ€è¯·æ±‚ï¼Œæ˜¯å¦æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•?<br>å¦‚æœå¹¶å‘é‡ä¸å¤§ï¼Œæˆ–è€…æå‰åšäº†é™æµç­–ç•¥ï¼Œé‚£ä¹ˆä½¿ç”¨å¤šä¸ªå®ä¾‹åˆ‡ç‰‡æ¥åˆ†æ‹…å‹åŠ›å°±æ²¡æœ‰å¤ªå¤§å¿…è¦æ€§äº†ï¼Œä¸»ä»é›†ç¾¤å°±è¶³å¤Ÿåº”å¯¹äº†ã€‚<br>å¦‚æœå¹¶å‘é‡éå¸¸å¤§ï¼Œæ¯”å¦‚10w+è¯·æ±‚ï¼Œé‚£ä¹ˆæ­¤æ—¶é€šè¿‡å¤šå®ä¾‹æ¥åˆ†æ‹…ç§’æ€è¯·æ±‚æ˜¯åˆç†çš„ï¼Œå› ä¸ºå¹¶å‘é‡è¶³å¤Ÿå¤§ï¼Œ800åº“å­˜ç†è®ºä¸Šåœ¨æçŸ­çš„æ—¶é—´å†…ä¼šå‡ºç°åº“å­˜ä¸å‡åŒ€çš„ç°è±¡ï¼Œä½†æ˜¯å¾ˆå¿«æ•´ä¸ªåº“å­˜å°±éƒ½è¢«æ¶ˆåŒ–æ‰ï¼Œæ‰€ä»¥è¿™ä¸ªå½±å“æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚<br>æ‰€ä»¥æ•´ä¸ªæ–¹æ¡ˆå–å†³ç§’æ€çš„å¹¶å‘é‡å’Œç§’æ€æ•´ä¸ªè¿‡ç¨‹æ—¶é•¿ï¼Œå¦‚æœå¹¶å‘é‡å¾ˆå¤§ï¼Œç§’æ€è¿‡ç¨‹å¾ˆçŸ­ï¼ˆåº“å­˜ä¸å¤§ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ¡ˆæ˜¯å¯è¡Œçš„ã€‚","like_count":1},{"had_liked":false,"id":293750,"user_name":"æ‚Ÿç©ºèŠæ¶æ„","can_delete":false,"product_type":"c1","uid":1123163,"ip_address":"","ucode":"C2F482A0CF8AF1","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/5b/983408b9.jpg","comment_is_top":false,"comment_ctime":1621520396,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5916487692","product_id":100056701,"comment_content":"å®¢æˆ·ç«¯çš„ç§’æ€è¯·æ±‚å¯ä»¥åˆ†å‘åˆ°ä¸åŒçš„å®ä¾‹ä¸Šè¿›è¡Œå¤„ç†ï¼Œä½ è§‰å¾—è¿™æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•å—ï¼Ÿ<br><br>ä½¿ç”¨åˆ‡ç‰‡é›†ç¾¤ä¼šå°†é—®é¢˜å¤æ‚åŒ–ï¼š<br>1.å¦‚æœåˆ†ç‰‡çš„å¤„ç†èƒ½åŠ›ä¸æ˜¯å‡è¡¡çš„ï¼Œå¯èƒ½å‡ºç°æŸä¸ªåˆ†ç‰‡çš„å•†å“åœ¨ç§’æ€æ´»åŠ¨ç»“æŸåæœªå–å®Œã€‚<br>2.å‰ç«¯æŸ¥è¯¢æ€»åº“å­˜æ—¶ï¼Œåç«¯éœ€è¦æŸ¥å¤šä¸ªåˆ†ç‰‡çš„åº“å­˜ï¼Œç„¶åè¿›è¡Œåˆå¹¶ï¼Œå¢åŠ äº†ç½‘ç»œäº¤äº’ã€‚<br>3.å½“å‡ºç°ä¸€ä¸ªè®¢å•è´­ä¹°å¤šä»¶å•†å“æ—¶ï¼Œå•†å“åº“å­˜è¢«åˆ†æ‘Šåˆ°å¤šä¸ªåˆ†ç‰‡ï¼Œéœ€è¦ç”¨é”å ç”¨åˆ†ç‰‡èµ„æºï¼Œå¤šä¸ªåˆ†ç‰‡æ‰£å‡åº“å­˜æˆåŠŸåï¼Œæ‰ä¼šé‡Šæ”¾åˆ†ç‰‡èµ„æºï¼Œå½±å“æ€§èƒ½ã€‚","like_count":1},{"had_liked":false,"id":265607,"user_name":"zenk","can_delete":false,"product_type":"c1","uid":1013669,"ip_address":"","ucode":"B235D5EBCF49BC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/77/a5/c5ae871d.jpg","comment_is_top":false,"comment_ctime":1606960748,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5901928044","product_id":100056701,"comment_content":"å¤šä¸ªå®ä¾‹ï¼Œéœ€è¦å®¢æˆ·æ®µåšè´Ÿè½½å‡è¡¡ï¼Œè¿™æ˜¯é¢å¤–çš„å¤æ‚åº¦<br><br>æŸ¥è¯¢<br><br>æŸ¥è¯¢çš„æ—¶å€™éœ€è¦æŸ¥è¯¢æ¯ä¸ªç»“ç‚¹ï¼Œå› æ­¤é›†ç¾¤å¹¶æ²¡å‡å°‘æ¯ä¸ªèŠ‚ç‚¹çš„è¯·æ±‚é‡<br><br>æ‰£åº“å­˜<br><br>æ‰£åº“å­˜çš„æ—¶å€™ï¼Œè€ƒè™‘åˆ°é«˜å¹¶å‘çš„æ—¶å€™å¾ˆå®¹æ˜“ç»™æ¯ä¸ªå®ä¾‹åˆ†é…åˆ°200ä¸ªå¹¶å‘è¯·æ±‚ï¼Œå› æ­¤åªæœ‰è¿™äº›è¯·æ±‚ä¼šåˆ†æ•£åœ¨å„ä¸ªèŠ‚ç‚¹<br><br>å¦‚æœä¸å‘½ä¸­ï¼Œéœ€è¦è¯·æ±‚å…¶ä»–æ¯ä¸ªèŠ‚ç‚¹ï¼Œè€Œè¿™äº›è¯·æ±‚é‡æ›´å¤§ï¼Œå› æ­¤æ•´ä½“è€Œè¨€æ‰£åº“å­˜ä¹Ÿæ²¡æœ‰é™ä½èŠ‚ç‚¹çš„å‹åŠ›<br><br>å•æœºæƒ…å†µä¸‹ï¼Œå‡è®¾ä¸€æ¬¡æ‰£åº“å­˜æ“ä½œæ˜¯10usï¼ˆé‡çº§ä¸ç¡®å®šï¼‰ï¼Œ800æ¬¡å°±æ˜¯8msï¼Œ200æ¬¡æ˜¯2ms<br><br>å¯é æ€§<br>é›†ç¾¤é«˜ï¼Œä¸€ä¸ªæŒ‚äº†å…¶ä»–èŠ‚ç‚¹è¿˜èƒ½å¤„ç†<br><br>ç»“è®º<br>é›†ç¾¤åœ¨å‘½ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™å¯ç¼“è§£èŠ‚ç‚¹å‹åŠ›ï¼Œä½†æ˜¯å¢åŠ å®¢æˆ·ç«¯å¤æ‚åº¦<br><br>å¯é æ€§ï¼Œç§’æ€é›†ä¸­åœ¨å¾ˆçŸ­æ—¶é—´ï¼Œå‡å°‘æ•…éšœæ¦‚ç‡<br><br>æ‰£åº“å­˜å·®6mså¯ä»¥æ¥å—<br><br>æ‰€ä»¥ï¼Œé›†ç¾¤å¥½å¤„ä¸æ˜æ˜¾","like_count":1},{"had_liked":false,"id":261330,"user_name":"æ¨é€¸æ—","can_delete":false,"product_type":"c1","uid":1167233,"ip_address":"","ucode":"4BF3CF3E2F1AC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/cf/81/96f656ef.jpg","comment_is_top":false,"comment_ctime":1605273298,"is_pvip":false,"discussion_count":9,"race_medal":0,"score":"5900240594","product_id":100056701,"comment_content":"æœ‰ç§’æ€åœºæ™¯ï¼Œé‚£è€å¸ˆï¼Œåœ¨ Redis ä¸­ï¼Œå½“ä¸€ä¸ª Key çš„ QPS è¾¾åˆ° 100ä¸‡æ—¶ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1316926,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/3e/f8632713.jpg","nickname":"EveryDayIsNew","note":"","ucode":"776B81EF6830FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389757,"discussion_content":"è€å¸ˆå‰é¢è®²çš„ï¼Œè¯»çš„è¯å¯ä»¥ç”¨æ–°ç‰ˆæœ¬çš„æœ¬åœ°ç¼“å­˜ï¼Œqpsè‚¯å®šæ¯”Redisæœ¬èº«æå‡ ä¸ªæ•°é‡çº§ï¼Œå¦å¤–å¾ˆå¤šå¤§å…¬å¸ä¹Ÿä¼šé’ˆå¯¹çƒ­keyçš„è¯»åšä¸€äº›å¤„ç†ï¼Œä¸€ç§ç±»ä¼¼æœ¬åœ°ç¼“å­˜æ–¹æ¡ˆï¼Œå¦ä¸€ç§æ˜¯åœ¨åˆ‡ç‰‡é›†ç¾¤æ¨¡å¼ä¸‹ç„¶åå¤šä¸ªå‡ ä¸ªæ•£åˆ—çš„keyåˆ°å…¶ä»–åˆ†ç‰‡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629424231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2116689,"avatar":"https://static001.geekbang.org/account/avatar/00/20/4c/51/61003d76.jpg","nickname":"ä¸Šå­¦å¨é¾™007","note":"","ucode":"B24D8A2E7D01F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331070,"discussion_content":"é‡‡ç”¨ä¸»ä»é›†ç¾¤ï¼Œè®©ä»åº“æ¥åˆ†æ‹…ä¸€éƒ¨åˆ†çš„qpsæ˜¯ä¸æ˜¯å¯ä»¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606781898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592126,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/3e/98447d59.jpg","nickname":"å¤±è¯¯è¿‡äºº","note":"","ucode":"418A6DC9759628","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325953,"discussion_content":"å…ˆé™æµï¼Œè¶…è¿‡é˜ˆå€¼çš„ç›´æ¥è¿”å›ç§’æ€å¤±è´¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605489443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1167233,"avatar":"https://static001.geekbang.org/account/avatar/00/11/cf/81/96f656ef.jpg","nickname":"æ¨é€¸æ—","note":"","ucode":"4BF3CF3E2F1AC7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1592126,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/3e/98447d59.jpg","nickname":"å¤±è¯¯è¿‡äºº","note":"","ucode":"418A6DC9759628","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326001,"discussion_content":"ä¸æ˜¯ï¼Œæˆ‘æ²¡è¯´æ¸…æ¥šï¼Œä¸èƒ½é™æµã€‚ä¸€ä¸ª Key çš„ QPS 100wï¼Œè¿™æ˜¯ä¸ª Zoom çš„é¢è¯•é¢˜ï¼Œè¦æ­£å¸¸è¿”å›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605497173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":325953,"ip_address":""},"score":326001,"extra":""},{"author":{"id":1592126,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/3e/98447d59.jpg","nickname":"å¤±è¯¯è¿‡äºº","note":"","ucode":"418A6DC9759628","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1167233,"avatar":"https://static001.geekbang.org/account/avatar/00/11/cf/81/96f656ef.jpg","nickname":"æ¨é€¸æ—","note":"","ucode":"4BF3CF3E2F1AC7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326046,"discussion_content":"å¯ä»¥æœ¬åœ°å…ˆèšåˆï¼Œå†å†™redis","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605507273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326001,"ip_address":""},"score":326046,"extra":""},{"author":{"id":1167233,"avatar":"https://static001.geekbang.org/account/avatar/00/11/cf/81/96f656ef.jpg","nickname":"æ¨é€¸æ—","note":"","ucode":"4BF3CF3E2F1AC7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1592126,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/3e/98447d59.jpg","nickname":"å¤±è¯¯è¿‡äºº","note":"","ucode":"418A6DC9759628","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328072,"discussion_content":"ä¸æ˜¯è¿™ä¸ªæ„æ€ï¼Œå°±æ˜¯å•çº¯çš„ä¸€ä¸ª Key QPS 100w å’Œèšåˆä»€ä¹ˆå…³ç³»ã€‚æˆ‘çœ‹åˆ«äººç­”çš„ï¼ŒæŠŠå€¼æ”¾ Nginx é‡Œé¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606048796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326046,"ip_address":""},"score":328072,"extra":""}]},{"author":{"id":1675882,"avatar":"https://static001.geekbang.org/account/avatar/00/19/92/6a/dd37a054.jpg","nickname":"å¼ y .","note":"","ucode":"85918469492F4C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413351,"discussion_content":"ä¸€èˆ¬ä¼šæœ‰æœ¬åœ°ç¼“å­˜ RedisåšäºŒçº§ç¼“å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636453666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583740,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2a/7c/0d6a87c4.jpg","nickname":"dandy","note":"","ucode":"5EE976FCBD9215","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392314,"discussion_content":"çœ‹è¿™ä¸ªkeyæ˜¯åªæ˜¯æŸ¥è¯¢è¿˜æ˜¯éœ€è¦ä¿®æ”¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630943155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349964,"user_name":"kobe","can_delete":false,"product_type":"c1","uid":1165831,"ip_address":"","ucode":"AB8B599F3D5521","user_header":"https://static001.geekbang.org/account/avatar/00/11/ca/07/22dd76bf.jpg","comment_is_top":false,"comment_ctime":1656473526,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656473526","product_id":100056701,"comment_content":"é‚£æ€ä¹ˆåœ¨ Lua è„šæœ¬ä¸­å®ç°è¿™ä¸¤ä¸ªæ“ä½œå‘¢ï¼Ÿæˆ‘ç»™ä½ æä¾›ä¸€æ®µ Lua è„šæœ¬å†™çš„ä¼ªä»£ç ï¼Œå®ƒæ˜¾ç¤ºäº†è¿™ä¸¤ä¸ªæ“ä½œçš„å®ç°ã€‚#è·å–å•†å“åº“å­˜ä¿¡æ¯            local counts = redis.call(&quot;HMGET&quot;, KEYS[1], &quot;total&quot;, &quot;ordered&quot;);#å°†æ€»åº“å­˜è½¬æ¢ä¸ºæ•°å€¼local total = tonumber(counts[1])#å°†å·²è¢«ç§’æ€çš„åº“å­˜è½¬æ¢ä¸ºæ•°å€¼local ordered = tonumber(counts[2])  #å¦‚æœå½“å‰è¯·æ±‚çš„åº“å­˜é‡åŠ ä¸Šå·²è¢«ç§’æ€çš„åº“å­˜é‡ä»ç„¶å°äºæ€»åº“å­˜é‡ï¼Œå°±å¯ä»¥æ›´æ–°åº“å­˜         if ordered + k &lt;= total then    #æ›´æ–°å·²ç§’æ€çš„åº“å­˜é‡    redis.call(&quot;HINCRBY&quot;,KEYS[1],&quot;ordered&quot;,k)                              return k;  end               return 0æœ‰äº† Lua è„šæœ¬åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ Redis å®¢æˆ·ç«¯ï¼Œä½¿ç”¨ EVAL å‘½ä»¤æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬äº†ã€‚æœ€åï¼Œå®¢æˆ·ç«¯ä¼šæ ¹æ®è„šæœ¬çš„è¿”å›å€¼ï¼Œæ¥ç¡®å®šç§’æ€æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥äº†ã€‚å¦‚æœè¿”å›å€¼æ˜¯ kï¼Œå°±æ˜¯æˆåŠŸäº†ï¼›å¦‚æœæ˜¯ 0ï¼Œå°±æ˜¯å¤±è´¥ã€‚<br>è¿™é‡Œhincrbyå‘½ä»¤çš„è¿”å›å€¼åº”è¯¥æ˜¯orderedçš„æ–°å€¼ï¼Œè€Œä¸æ˜¯è¿™ä¸ªå¢é‡kå§","like_count":0},{"had_liked":false,"id":344700,"user_name":"Seajunnn","can_delete":false,"product_type":"c1","uid":2459179,"ip_address":"","ucode":"41B2BA6D056F85","user_header":"https://static001.geekbang.org/account/avatar/00/25/86/2b/7f9b94d8.jpg","comment_is_top":false,"comment_ctime":1651730375,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651730375","product_id":100056701,"comment_content":"åŸºäºRedisåŸå­æ“ä½œå’Œ åŸºäºåˆ†å¸ƒå¼é” è¿™ä¸¤ç§æ–¹æ¡ˆ å„æœ‰ä»€ä¹ˆä¼˜åŠ£å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":342268,"user_name":"é˜¿æ˜•","can_delete":false,"product_type":"c1","uid":1012906,"ip_address":"","ucode":"F3AD093B68E074","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/aa/178a6797.jpg","comment_is_top":false,"comment_ctime":1650165226,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650165226","product_id":100056701,"comment_content":"åˆ‡ç‰‡çš„ç›®çš„æ˜¯åˆ†éš”æ•°æ®ï¼Œæ‰€ä»¥æ²¡å¿…è¦","like_count":0},{"had_liked":false,"id":313703,"user_name":"èŠ±å„¿å°‘å¹´","can_delete":false,"product_type":"c1","uid":1318540,"ip_address":"","ucode":"CFE4F64243673B","user_header":"https://static001.geekbang.org/account/avatar/00/14/1e/8c/450fe5cb.jpg","comment_is_top":false,"comment_ctime":1632624169,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632624169","product_id":100056701,"comment_content":"ä½¿ç”¨å¤šä¸ªå®ä¾‹çš„åˆ‡ç‰‡é›†ç¾¤æ¥åˆ†æ‹…ç§’æ€è¯·æ±‚ï¼Œæ˜¯å¦æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Ÿ<br><br>æˆ‘è§‰å¾—æ˜¯ä¸€ä¸ªå¯è¡Œçš„æ–¹å¼ï¼Œå‡å°‘å•å°å®ä¾‹çš„å‹åŠ›ï¼›<br>ä¸¾ä¸ªä¾‹å­ï¼šäº¬ä¸œåœ¨ä¸‹å•çš„æ—¶å€™ä¼šæ˜¾ç¤ºåŒºåŸŸæ˜¯å¦æœ‰è´§ï¼Œè€Œä¸æ˜¯å…¨å›½çš„åº“å­˜æƒ…å†µï¼Œæ­¤æ—¶åŒºåŸŸå¯è®¤ä¸ºæ˜¯åº“å­˜çš„ä¸€éƒ¨åˆ†ï¼ŒåŒºåŸŸæ— è´§ä¹Ÿå¯ä»¥ä¸‹å•ï¼Œç„¶åä»åˆ«çš„åŒºåŸŸæ‰£å‡ï¼Œå¦‚æœèƒ½æ‰£å‡æˆåŠŸï¼Œåˆ™ä¸‹å•æˆåŠŸï¼Œå¦åˆ™è®¤ä¸ºä¸‹å•å¤±è´¥ã€‚","like_count":0},{"had_liked":false,"id":310243,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1630566987,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630566987","product_id":100056701,"comment_content":"è¿™ä¼šé€ æˆä¸€äº›æ„å¤–çš„æ“ä½œ,æ¯”å¦‚é•¿è¿æ¥å¯¼è‡´çš„è¯·æ±‚çš„éƒ½æ˜¯ä¸€ä¸ªå®ä¾‹,ä¸å»ºè®®è¿™ä¹ˆåš","like_count":0},{"had_liked":false,"id":304808,"user_name":"ä¹äº‹ä¸ä¹","can_delete":false,"product_type":"c1","uid":1609962,"ip_address":"","ucode":"A01121068CD244","user_header":"https://static001.geekbang.org/account/avatar/00/18/90/ea/67f2ef29.jpg","comment_is_top":false,"comment_ctime":1627625205,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627625205","product_id":100056701,"comment_content":"èƒ½å¦æŠŠåº“å­˜ç›´æ¥å­˜å‚¨åœ¨redisä¸­ï¼Œç›´æ¥åœ¨redis å®Œæˆåº“å­˜ä¿¡æ¯çš„å˜åŠ¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":298792,"user_name":"Foreverâ™ï¸","can_delete":false,"product_type":"c1","uid":2302130,"ip_address":"","ucode":"688D1E8BCD0E2C","user_header":"https://static001.geekbang.org/account/avatar/00/23/20/b2/32eef1b6.jpg","comment_is_top":false,"comment_ctime":1624327018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624327018","product_id":100056701,"comment_content":"è¯·é—®ç§’æ€åœºæ™¯ï¼Œå®¢æˆ·ç«¯åœ¨ç‚¹å‡»ç§’æ€æŒ‰é’®åï¼Œå¦‚ä½•æ¥æ”¶åˆ°æœåŠ¡å™¨ç«¯å·²ç»ç§’æ€æˆåŠŸçš„å“åº”å‘¢","like_count":0},{"had_liked":false,"id":291492,"user_name":"Tom","can_delete":false,"product_type":"c1","uid":1908926,"ip_address":"","ucode":"0BA98E780BB34C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/20/be/bf6a570f.jpg","comment_is_top":false,"comment_ctime":1620307054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620307054","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œè¯·é—®é‡‡ç”¨åˆ†å¸ƒå¼é”çš„æ–¹å¼ï¼Œé‚£å¦‚ä½•è§£å†³ç§’æ€åœºæ™¯ä¸‹çš„ç”¨æˆ·ç­‰å¾…é—®é¢˜ï¼Œé€ æˆç”¨æˆ·ä½“éªŒä¸å¥½çš„ç°çŠ¶ï¼Ÿ","like_count":0},{"had_liked":false,"id":287681,"user_name":"winter","can_delete":false,"product_type":"c1","uid":1323233,"ip_address":"","ucode":"04D4DE4A60C4C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLBywibUar2Q8TmCy6ZrNQk9qia7sQgosBYInmygZI118vzrWu4CfUQnbOefvP82c8Inhb6xVqymhvYw/132","comment_is_top":false,"comment_ctime":1618107879,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1618107879","product_id":100056701,"comment_content":"ç§’æ€å¯¹ç³»ç»Ÿçš„è¦æ±‚<br>  ç§’æ€åœºæ™¯ï¼šé™æ—¶é™é‡<br>  ç§’æ€ç‰¹å¾ï¼š<br>    å¹¶å‘è®¿é—®é‡å¤§<br>    è¯»å¤šå†™å°‘<br>  ç§’æ€ç¯èŠ‚ï¼š<br>    ç§’æ€å‰ï¼šç”¨æˆ·åˆ·æ–°å•†å“è¯¦æƒ…é¡µï¼Œé€šè¿‡cdnç¼“å­˜é™æ€èµ„æºæˆ–è€…æˆ–è€…æµè§ˆå™¨ç¼“å­˜<br>    ç§’æ€ä¸­ï¼š<br>      ç”¨æˆ·ç‚¹å‡»å•†å“è¯¦æƒ…ï¼ŒæŸ¥è¯¢åº“å­˜<br>      ç„¶ååº“å­˜å‡æ‰£ï¼Œ<br>      ç”Ÿæˆè®¢å•<br>    ç§’æ€åï¼š<br>      æµé‡å·²ç»å¾ˆä½ï¼Œä¸åœ¨è®¨è®º<br>  æ³¨æ„çš„é—®é¢˜<br>    redis ç”¨äºåº“å­˜æŸ¥è¯¢ï¼Œåº“å­˜å‡æ‰£ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªæ“ä½œå¿…é¡»æ˜¯åŸå­æ€§æ“ä½œ<br>    mysql ç”¨äºè®¢å•å¤„ç†<br>    è¿™æ ·è®¾è®¡çš„ç›®çš„<br>        å‡å°‘é¢å¤–çš„å¼€é”€ï¼Œrediså·²ç»åšäº†â€œæŸ¥å’Œå‡â€çš„æ“ä½œ<br>        é¿å…å‡ºç°è¶…å”®ï¼Œmysql æ€§èƒ½æ¯”è¾ƒæ…¢ï¼Œ<br><br>Redis é‚£äº›æ–¹æ³•æ”¯æŒç§’æ€åœºæ™¯<br>  è¦æ±‚<br>    æ”¯æŒé«˜å¹¶å‘ï¼ˆé€šè¿‡åˆ‡ç‰‡é›†ç¾¤ï¼Œå°†ä¸åŒå•†å“ä¿å­˜åœ¨ä¸åŒå®ä¾‹ä¸Šï¼‰<br>    æŸ¥å’Œå‡ï¼Œéœ€è¦åŸå­æ€§æ“ä½œï¼ˆé€šè¿‡redisåŸå­æ€§æ“ä½œï¼Œä»¥åŠåˆ†å¸ƒå¼é”æ¥æ”¯æŒï¼‰<br>  å…¶ä»–ç¯èŠ‚ä¸»è¦ä¼˜åŒ–<br>    å‰ç«¯é™æ€é¡µé¢è®¾ç½®ï¼šèµ°cdnå’Œç¼“å­˜<br>    è¯·æ±‚æ‹¦æˆªå’Œæµæ§ï¼šéæ³•è¯·æ±‚<br>    åº“å­˜ä¿¡æ¯è¿‡æœŸï¼šé¿å…ç¼“å­˜å‡»ç©¿<br>    æ•°æ®åº“è®¢å•å¼‚å¸¸ï¼šå¢åŠ é‡è¯•åŠŸèƒ½<br><br>ç¼“å­˜é›ªå´©<br>  å¤§é‡çš„å¯ä»¥å¤±æ•ˆï¼š1ï¼‰éšæœºè¿‡æœŸï¼Œé¿å…å¤§é¢ç§¯å¤±æ•ˆ 2ï¼‰æ°¸ä¸è¿‡æœŸ<br>ç¼“å­˜ç©¿é€<br>  redis å’Œ mysql éƒ½ä¸å­˜åœ¨ å¤§é‡çš„è¯·æ±‚è½åˆ°æ•°æ®åº“ 1ï¼‰è®¾ç½®ç©ºå€¼ 2ï¼‰å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå°†æ•°æ®åº“å­˜åœ¨çš„keyæå‰åŠ å…¥<br>ç¼“å­˜å‡»ç©¿  æ•°æ®è¿‡æœŸé‚£ä¸€æ—¶åˆ»ï¼Œå¤§é‡çš„è¯·æ±‚è½åˆ°æ•°æ®ä¸Š 1ï¼‰åŠ é”æ›´æ–°è®¿é—®<br>å‚è€ƒï¼šhttps:&#47;&#47;www.jianshu.com&#47;p&#47;b57d0773ee96<br> ","like_count":0},{"had_liked":false,"id":286582,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1617410217,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1617410217","product_id":100056701,"comment_content":"ç§’æ€çš„è´Ÿè½½ç‰¹å¾æ˜¯ç¬æ—¶å¹¶å‘è®¿é—®é‡å¤§ã€è¯»å¤šå†™å°‘ã€‚<br><br>ç§’æ€å‰ï¼Œä½¿ç”¨ CDN å’Œæµè§ˆå™¨ç¼“å­˜æœåŠ¡ï¼Œä¸éœ€è¦ Redisï¼›<br><br>ç§’æ€ä¸­ï¼ŒæŸ¥è¯¢åº“å­˜å¹¶å‘å‹åŠ›å¤§ï¼Œå¯ä»¥ä½¿ç”¨ Redis ä¿å­˜åº“å­˜å¹¶è¿›è¡Œåº“å­˜æ‰£å‡ï¼Œåå°æ•°æ®åº“å¤„ç†è®¢å•æ“ä½œï¼›<br><br>ç§’æ€åï¼Œå¹¶å‘é‡ä¸‹é™ï¼Œä¸éœ€è¦ Redisã€‚<br><br>ä½¿ç”¨ Hash æ•°æ®ç±»å‹ï¼Œç›´æ¥ä¿å­˜æ€»åº“å­˜é‡å’Œå·²ç§’æ€é‡ï¼Œè¿™ä¸ªæ¯”è¾ƒèªæ˜ï¼Œæˆ‘ä¸€å¼€å§‹ä»¥ä¸ºåªä¿å­˜å·²ç§’æ€é‡å³å¯ã€‚<br><br>ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ–¹æ¡ˆæ˜æ˜¾æ›´é«˜ä¸€ç­¹ã€‚<br><br>å¯¹äºè¯¾åé¢˜ï¼Œæˆ‘è§‰å¾—æŠŠ 800 ä¸ªåº“å­˜åˆ†åˆ° 4 ä¸ª Redis ä¸Šä¸ç®—æ˜¯ä¸€ä¸ªå¥½æ–¹æ¡ˆï¼Œå› ä¸ºå¯èƒ½ä¼šå¯¼è‡´æœ‰çš„ Redis å®ä¾‹ä¸Šåº“å­˜æ²¡æœ‰äº†ï¼Œè€Œå…¶ä»–çš„è¿˜æœ‰ã€‚ä¸€ä¸ªå•†å“ï¼Œ800 åº“å­˜ï¼Œå•ä¸ªçš„ Redis åº”è¯¥å°±èƒ½å¤Ÿåº”ä»˜äº†å§ã€‚<br><br>çœ‹äº†è¯¾åç•™è¨€ï¼Œåˆ†åº“å­˜ä¸»è¦çš„é—®é¢˜ä¸€ä¸ªæ˜¯å¯èƒ½æ•°æ®å€¾æ–œï¼Œå¦å¤–å°±æ˜¯å¯¹äºè®¡ç®—å‰©ä½™åº“å­˜ä¸å‹å¥½ã€‚<br><br>å¦‚æœé‡‡ç”¨ Codis é›†ç¾¤æ–¹æ¡ˆï¼Œé‚£ä¹ˆåœ¨ç§’æ€å¹¶å‘æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œcodis proxy æ˜¯å¦ä¹Ÿéœ€è¦æ‰©å®¹ï¼Ÿ<br><br>å¦å¤–ï¼Œå‡ºé—¨å³è½¬ï¼Œéš”å£è¿˜æœ‰ä¸€ä¸ªã€Šå¦‚ä½•è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿã€‹çš„ä¸“æ ã€‚","like_count":0},{"had_liked":false,"id":286057,"user_name":"heyman","can_delete":false,"product_type":"c1","uid":1173894,"ip_address":"","ucode":"92EF9EF1B1B1B3","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/86/d34800a4.jpg","comment_is_top":false,"comment_ctime":1617127771,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1617127771","product_id":100056701,"comment_content":"æ‰£åº“å­˜æˆåŠŸåï¼Œç”¨æˆ·è¿›ç¨‹æŒ‚äº†ï¼Œå¯¼è‡´ä¸‹å•å¤±è´¥ã€‚è¿™ç§æƒ…å†µæ€ä¹ˆåŠï¼Ÿå®ƒä»¬ä¸æ˜¯åŸå­æ“ä½œå‘€","like_count":0,"discussions":[{"author":{"id":2689921,"avatar":"","nickname":"Jack","note":"","ucode":"5002A8A4C22ABC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575216,"discussion_content":"æ¶ˆæ¯é˜Ÿåˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654669126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282574,"user_name":"Sleepless","can_delete":false,"product_type":"c1","uid":2035762,"ip_address":"","ucode":"F96607B4583928","user_header":"https://static001.geekbang.org/account/avatar/00/1f/10/32/92b9f66f.jpg","comment_is_top":false,"comment_ctime":1615304826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615304826","product_id":100056701,"comment_content":"ä½¿ç”¨å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†ä½œä¸ºvalue<br>val = clientUniqueID&#47;&#47;ç”³è¯·åˆ†å¸ƒå¼é”ï¼ŒTimeoutæ˜¯è¶…æ—¶æ—¶é—´<br>lock =acquireLock(key, val, Timeout)ï¼Œ<br>åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæ€ä¹ˆæ˜¯æ ¹æ®å®¢æˆ·ç«¯å”¯ä¸€è¡¨ç¤ºåšä¸ºvalueæ¥è·å–é”å‘¢ï¼Œè¿™æ˜¯ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨çš„api?","like_count":0},{"had_liked":false,"id":280176,"user_name":"é£ç™½","can_delete":false,"product_type":"c1","uid":1926642,"ip_address":"","ucode":"2586407256F3B3","user_header":"https://static001.geekbang.org/account/avatar/00/1d/65/f2/24e48aae.jpg","comment_is_top":false,"comment_ctime":1614125573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614125573","product_id":100056701,"comment_content":"ä½¿ç”¨å¤šä¸ªå®ä¾‹çš„åˆ‡ç‰‡é›†ç¾¤æ¥åˆ†æ‹…ç§’æ€è¯·æ±‚ï¼Œæ˜¯å¦æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Ÿ<br>ç­”ï¼š1.è¯·æ±‚Aã€Bæœ‰æ—¶é—´é¡ºåºã€‚å¦‚æœAè¯·æ±‚æŸ¥è¯¢åˆ‡ç‰‡1ï¼Œå‘ç°åº“å­˜ä¸è¶³ï¼Œä¸‹å•å¤±è´¥ã€‚åç»­çš„è¯·æ±‚BæŸ¥è¯¢åˆ‡ç‰‡2ï¼Œå‘ç°è¿˜æœ‰åº“å­˜ï¼Œä¸‹å•æˆåŠŸã€‚è¿™ç§ä¸šåŠ¡å®ç°æ˜¯æœ‰é—®é¢˜çš„ã€‚<br>2. KaitoåŒå­¦æåˆ°çš„åº“å­˜æ€»ä½™é‡çš„æƒ…å†µã€‚<br>","like_count":0},{"had_liked":false,"id":277852,"user_name":"Geek_1e8830","can_delete":false,"product_type":"c1","uid":1506574,"ip_address":"","ucode":"CD84A5AAAE6872","user_header":"","comment_is_top":false,"comment_ctime":1612621579,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1612621579","product_id":100056701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œé—®ä¸€ä¸‹ç§’æ€åœºæ™¯æ˜¯å¦å¯ä»¥ä½¿ç”¨Listæ¥æ“ä½œï¼Œæ¥ä¸€ä¸ªè¯·æ±‚å°±LPOPä¸€ä¸‹ï¼Œç›´åˆ°listä¸­çš„å…ƒç´ popå®Œä¸ºæ­¢ï¼Œå¯ä»¥ä¸ä½¿ç”¨luaè„šæœ¬æ¥ä¿è¯åŸå­æ€§ï¼Œå¹¶ä¸”å¦‚æœæœ‰äººæŠ¢åˆ°èµ„æ ¼æ”¾å¼ƒè¿˜å¯ä»¥æŠŠè¿™ä¸ªåé¢åˆPUSHåˆ°listä¸­å»ã€‚","like_count":0,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358612,"discussion_content":"è¿™ä¸ªæ˜¯é™æµï¼Œæ¥å…¥å±‚çš„äº‹æƒ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615997634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277602,"user_name":"æ³Š","can_delete":false,"product_type":"c1","uid":1557092,"ip_address":"","ucode":"3E9275288F1B0D","user_header":"https://static001.geekbang.org/account/avatar/00/17/c2/64/5cd6efa0.jpg","comment_is_top":false,"comment_ctime":1612488717,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612488717","product_id":100056701,"comment_content":"800ä¸ªåº“å­˜å¹³å‡åˆ†å¸ƒåˆ°å››ä¸ªå®ä¾‹ä¸­é‚£ä¹ˆkeyå°±ä¸å¯ä»¥ç”¨å•†å“idäº†å§ï¼Œé›†ç¾¤åˆ†ç‰‡æ˜¯æ ¹æ®keyè¿›è¡Œhashçš„ï¼Œå¦‚æœè¿˜ç”¨å•†å“idçš„è¯ä¸ä¼šåˆ†åˆ°ä¸åŒå®ä¾‹ä¸Šã€‚é‚£ä¹ˆè¿™ä¸ªkeyåº”è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿå•†å“id+éšæœºæ•°å—ï¼Ÿå¸Œæœ›æœ‰å¤§ä½¬è§£ç­”ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":277523,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1612442835,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612442835","product_id":100056701,"comment_content":"ç§’æ€åœºæ™¯å…³é”®åœ¨è¦ä¸è¦å®æ—¶çš„çœ‹åˆ°åº“å­˜æƒ…å†µï¼Œè¦æ˜¯å…è®¸ç§’æ€ä¸€å¼€å§‹å°±çœ‹ä¸åˆ°åº“å­˜äº†ï¼Œé‚£æœ‰ä¸€ä¸‡ç§æ–¹æ³•...","like_count":0},{"had_liked":false,"id":275642,"user_name":"Geek_a499e7","can_delete":false,"product_type":"c1","uid":2297362,"ip_address":"","ucode":"5BF5B3248E4C64","user_header":"","comment_is_top":false,"comment_ctime":1611630055,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1611630055","product_id":100056701,"comment_content":"æ‰€ä»¥ï¼Œæˆ‘ç»™ä½ ä¸€ä¸ªå°å»ºè®®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡é›†ç¾¤ä¸­çš„ä¸åŒå®ä¾‹æ¥åˆ†åˆ«ä¿å­˜åˆ†å¸ƒå¼é”å’Œå•†å“åº“å­˜ä¿¡æ¯ã€‚ä½¿ç”¨è¿™ç§ä¿å­˜æ–¹å¼åï¼Œç§’æ€è¯·æ±‚ä¼šé¦–å…ˆè®¿é—®ä¿å­˜åˆ†å¸ƒå¼é”çš„å®ä¾‹<br><br>è¯·é—®è€å¸ˆï¼š<br>åˆ†å¸ƒå¼é” ä¸æ˜¯ä¿å­˜åœ¨ é›†ç¾¤é‡Œè¶…è¿‡ä¸€åŠçš„å®ä¾‹å—ï¼Ÿä¸ºä»€ä¹ˆå¯ä»¥æŒ‡å®šå®ä¾‹ä¿å­˜åˆ†å¸ƒå¼é”ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2094925,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/f7/4d/09554c96.jpg","nickname":"iron bo","note":"","ucode":"4BFB1331637AA3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371888,"discussion_content":"ä½ è¯´çš„æ˜¯ä¸»ä»é›†ç¾¤ï¼Œè¿™é‡Œæ˜¯åˆ‡ç‰‡é›†ç¾¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620041012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268500,"user_name":"Anthony","can_delete":false,"product_type":"c1","uid":1309908,"ip_address":"","ucode":"9E0C98A9123365","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/d4/743d3f02.jpg","comment_is_top":false,"comment_ctime":1608218830,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608218830","product_id":100056701,"comment_content":"è§‰å¾—æ²¡å¿…è¦ï¼Œredisæœ¬èº«ä½œä¸ºé«˜æ€§èƒ½ï¼Œç§’æ€æœåŠ¡å‹åŠ›ä¸€èˆ¬ä¹Ÿä¸åœ¨redisä¸Šï¼Œå¦‚æœæ˜¯redisæœ‰å‹åŠ›ï¼Œå¯ä»¥ç”¨redisä¸»ä»ï¼Œä½†æ˜¯è¿™æ—¶å€™è¦è€ƒè™‘ä¸»ä»å»¶è¿Ÿï¼Œä¹Ÿæ¯”åˆ†ç‰‡è¦å¥½ï¼Œåˆ†ç‰‡çš„è¯ï¼Œå¦‚æœè¦ç»Ÿè®¡æ¬¡æ•°ï¼Œåè€Œæ›´å¤æ‚","like_count":0},{"had_liked":false,"id":267539,"user_name":"ç«¥è°£","can_delete":false,"product_type":"c1","uid":1452007,"ip_address":"","ucode":"2417DC46DF959A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/M3iaJULcXSjCNya7UibVzgF0fq1H2fobO1ic7ibDzfGbic6DR6CbkUnfJo8ibbPjQRMHRbE1L8c2bTh2PhiczpE5SbPibw/132","comment_is_top":false,"comment_ctime":1607802006,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1607802006","product_id":100056701,"comment_content":"å¦‚æœåœ¨Redisä¸­æ‰£å‡åº“å­˜ï¼ŒæˆåŠŸåå†å‡mysqlåº“å­˜ï¼Œè¿™æ ·ä¼šæœ‰é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340177,"discussion_content":"æœ¬èº«å°±æ˜¯è¿™æ ·å•Š , redisç®¡ç†æ‰€æœ‰åº“å­˜æ“ä½œ,å¼‚æ­¥åŒ–æ›´æ–°db,ä¿è¯æœ€ç»ˆä¸€è‡´æ€§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1609922429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1312184,"avatar":"https://static001.geekbang.org/account/avatar/00/14/05/b8/8d468842.jpg","nickname":"JulyRemember","note":"","ucode":"9E3D5D60D82999","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337780,"discussion_content":"æ™®é€šåœºæ™¯éƒ½å¾ˆéš¾ä¿è¯Redisæ•°æ®å’ŒMySQLæ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œæ•°æ®ä¸€è‡´æ€§å¼ºä¿è¯å¼€é”€æŒºå¤§çš„ï¼Œç§’æ€è¿™ç§é«˜å¹¶å‘æƒ…å†µæ›´ä¸ä¼šåšè¿™ç§ä¿è¯äº†ï¼Œå¾ˆå®¹æ˜“å‡ºç°æ•°æ®ä¸å¯¹è¶…å–çš„æƒ…å†µçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609075197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266552,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1607392301,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1607392301","product_id":100056701,"comment_content":"ç§’æ€åŠ åˆ†å¸ƒå¼é”æ˜¯å¦ä¼šæœ‰æ€§èƒ½é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340178,"discussion_content":"ä¸ä¼š, å¼€å§‹å°±ä¼šè¿›è¡Œä¸€é“åº“å­˜æ ¡éªŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609922491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264996,"user_name":"Reborn 2.0","can_delete":false,"product_type":"c1","uid":1977474,"ip_address":"","ucode":"BA506E7455D91C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/2c/82/98e2b82a.jpg","comment_is_top":false,"comment_ctime":1606730054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606730054","product_id":100056701,"comment_content":"æƒ³èµ·ä¹‹å‰åšçš„redisè®°åˆ†, æ¯ä¸ªç”¨æˆ·çš„åˆ†æ•°ç›¸åŠ , æœ€åå’Œredisçš„æ€»åˆ†ä¸ç­‰. è¿™å°±æ˜¯åŸå­æ€§æ²¡æœ‰ä¿è¯. <br>åšå¥½äº†è‡ªå·±è®¤ä¸ºçš„åŸå­æ€§, è¿˜åº”è¯¥åšå®šæ—¶ä»»åŠ¡æŠŠä¸¤ä¸ªåˆ†æ•°ä¿è¯æœ€ç»ˆä¸€è‡´æ€§. <br>è¿™ä¸ªç§’æ€å°±æ˜¯æŒ‰ç…§redisæ˜¯æ•°æ®åº“æ¥çš„, æˆ‘æƒ³ä¸ºäº†ä¿è¯DR, åœ¨é¡¹ç›®é‡å¯çš„æ—¶å€™, è¿˜è¦æœ‰ä»»åŠ¡å»ç»Ÿè®¡è®¢å•æ•°å’Œé…ç½®åº“å­˜, æ‰èƒ½æ¢å¤redisä¸­çš„åº“å­˜.","like_count":0},{"had_liked":false,"id":263221,"user_name":"yyl","can_delete":false,"product_type":"c1","uid":1170843,"ip_address":"","ucode":"1741DACDFCA9AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","comment_is_top":false,"comment_ctime":1606050359,"is_pvip":false,"replies":[{"id":"97933","content":"è¿™æ˜¯ä¸ªå…³é”®å› ç´ ã€‚<br><br>è€Œä¸”å¦‚æœæŸä¸ªå®ä¾‹ä¸Šçš„åº“å­˜æ‰£é™¤å®Œäº†ï¼Œå¹¶ä¸ä»£è¡¨æ‰€æœ‰åº“å­˜éƒ½æ‰£å®Œäº†ï¼Œè¿™æ—¶è¦æƒ³åˆ¤æ–­æ˜¯å¦è¿˜æœ‰åº“å­˜ï¼Œå°±è¦å»å…¶ä»–å®ä¾‹æŸ¥è¯¢ï¼Œé€»è¾‘å°±å¤æ‚äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608997887,"ip_address":"","comment_id":263221,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606050359","product_id":100056701,"comment_content":"å°†800ä¸ªå•†å“å‡åˆ†è‡³4ä¸ªå®ä¾‹ï¼Œå¹¶ä¸èƒ½ä¿è¯å®¢æˆ·ç«¯è¯·æ±‚è¢«å‡åˆ†è‡³ä¸åŒçš„å®ä¾‹ï¼›æ¯•ç«Ÿç”¨æˆ·çš„è¡Œä¸ºæ˜¯æ— æ³•é¢„æµ‹çš„ï¼Œæœ‰å¯èƒ½å‡ºç°æŸä¸ªå®ä¾‹çš„è¯·æ±‚é‡æ¯”è¾ƒå¤§","like_count":0,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510124,"discussion_content":"è¿™æ˜¯ä¸ªå…³é”®å› ç´ ã€‚\n\nè€Œä¸”å¦‚æœæŸä¸ªå®ä¾‹ä¸Šçš„åº“å­˜æ‰£é™¤å®Œäº†ï¼Œå¹¶ä¸ä»£è¡¨æ‰€æœ‰åº“å­˜éƒ½æ‰£å®Œäº†ï¼Œè¿™æ—¶è¦æƒ³åˆ¤æ–­æ˜¯å¦è¿˜æœ‰åº“å­˜ï¼Œå°±è¦å»å…¶ä»–å®ä¾‹æŸ¥è¯¢ï¼Œé€»è¾‘å°±å¤æ‚äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608997887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261680,"user_name":"@%åˆ%@","can_delete":false,"product_type":"c1","uid":1053509,"ip_address":"","ucode":"2B8A6134675ED7","user_header":"https://static001.geekbang.org/account/avatar/00/10/13/45/16c60da2.jpg","comment_is_top":false,"comment_ctime":1605488538,"is_pvip":true,"replies":[{"id":"97934","content":"è¿™ç§æƒ…å†µä¸‹ä½™é‡æŸ¥è¯¢çš„é€»è¾‘å°±æ¯”è¾ƒå¤æ‚äº†ï¼Œä¼šå¢åŠ æŸ¥è¯¢è¯·æ±‚çš„åˆ†å‘å¤æ‚åº¦ï¼Œåè€Œå¯èƒ½ä¼šå¾—ä¸å¿å¤±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608998474,"ip_address":"","comment_id":261680,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605488538","product_id":100056701,"comment_content":"æˆ‘è§‰å¾—ï¼Œæ˜¯å¯è¡Œçš„ï¼Œä¸»è¦è¦è€ƒè™‘æœ€åçš„ä½™é‡æ€ä¹ˆå¤„ç†ï¼Œ0ï½2ä¸ªåˆ†ç‰‡ä¸Šæœ‰ä½™é‡ï¼Œè€Œ3å·åˆ†ç‰‡ä¸Šæœ‰ä½™é‡ï¼Œè¿™æ ·æ€ä¹ˆå¤„ç†ï¼Œè¿˜æœ‰ï¼Œå°±æ˜¯æœ€åçš„ç”¨ä½™é‡è¶³å¤Ÿï¼Œè€Œæ¯ä¸ªåˆ†ç‰‡çš„ä½™é‡ä¸å¤Ÿï¼Œè¿™ä¸ªåˆæ€ä¹ˆå»å¤„ç†ï¼Œæˆ‘è§‰å¾—è¿™äº›å¤„ç†å¥½äº†ï¼Œåˆ†ç‰‡å­˜å‚¨å¯ä»¥è€ƒè™‘ä½¿ç”¨ã€‚","like_count":0,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509563,"discussion_content":"è¿™ç§æƒ…å†µä¸‹ä½™é‡æŸ¥è¯¢çš„é€»è¾‘å°±æ¯”è¾ƒå¤æ‚äº†ï¼Œä¼šå¢åŠ æŸ¥è¯¢è¯·æ±‚çš„åˆ†å‘å¤æ‚åº¦ï¼Œåè€Œå¯èƒ½ä¼šå¾—ä¸å¿å¤±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608998474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261381,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1605315706,"is_pvip":false,"discussion_count":9,"race_medal":0,"score":"1605315706","product_id":100056701,"comment_content":"è€å¸ˆå¥½ï¼Œåº“å­˜çš„çƒ­ç‚¹æ›´æ–°é—®é¢˜æˆ‘çœ‹éš”å£è®²ç§’æ€çš„è¯¾ç¨‹è¯´çš„æ˜¯åœ¨å¤æ‚æƒ…å†µä¸‹è¿˜æ˜¯ç”¨dbæ¥åšï¼Œå¹¶æ²¡æœ‰ç›´æ¥åœ¨ç¼“å­˜é‡Œé¢åšæ‰£å‡ã€‚è¿˜æœ‰åç«¯å­˜å‚¨è¯¾ç¨‹è®²çš„é˜²æ­¢é‡å¤è®¢å•ä¹Ÿæ˜¯ç›´æ¥å†™dbï¼Œç”¨å”¯ä¸€ç´¢å¼•æ¥æ ¡éªŒè€Œä¸æ˜¯å…ˆåŠ ä¸€ä¸ªåˆ†å¸ƒå¼é”æ¥æ‹’ç»é‡å¤çš„è¯·æ±‚ï¼Œé‚£ä½è€å¸ˆè¯´çš„æ„æ€æ˜¯å®ç°ä¸€ä¸ªåˆ†å¸ƒå¼é”çš„å¤æ‚åº¦æ¯”ç›´æ¥ç”¨æ•°æ®åº“çº¦æŸæ¥è§£å†³é«˜ï¼Œæ‰€ä»¥ä¸ç”¨redisã€‚æˆ‘è§‰å¾—è¿™ä¸¤ä¸ªé—®é¢˜éƒ½é¢ è¦†äº†æˆ‘ä»¥å¾€çš„ç†è§£ï¼Œæˆ‘è§‰å¾—éƒ½æ˜¯ç”¨redisçš„åœºæ™¯ä½†å®é™…å¹¶æ²¡æœ‰ç”¨ï¼Œæƒ³é—®ä¸‹è€å¸ˆæ˜¯æ€ä¹ˆçœ‹è¿™ä¸¤ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿèƒ½å¦è®²ä¸€ä¸‹ä»€ä¹ˆåœºæ™¯ä¸‹åè€Œç”¨redisæ›´éš¾å®ç°ä¸å¦‚ç”¨æ•°æ®åº“æ¥æŠ—ã€‚","like_count":0,"discussions":[{"author":{"id":1564002,"avatar":"https://static001.geekbang.org/account/avatar/00/17/dd/62/824e5e16.jpg","nickname":"æ²å¡µ","note":"","ucode":"4AD780EF50882B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330346,"discussion_content":"å½“redisä¸æ˜¯ä½ é¡¹ç›®å¿…é¡»çš„ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå°±æ˜¯è¿˜ä¸å¦‚ç”¨æ•°æ®åº“æ¥æ‰›çš„æ—¶å€™ã€‚\nMySQL åœ¨ä¸‰å¤§ä¸»æµæ•°æ®åº“é‡Œé¢æ€§èƒ½ä¸æ˜¯æœ€å¥½çš„é‚£ä¸ªï¼Œä½†ä¾ç„¶å¯ä»¥å¾ˆå¥½åº”ä»˜å¾ˆå¤šåœºæ™¯ã€‚\nå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬é¡¹ç›®å¼•å…¥ä¸€ä¸ªä¸­é—´ä»¶çº¯ç²¹æ˜¯å› ä¸ºä¹¦çœ‹å¤šäº†ï¼Œä¸ºäº†ç”¨è€Œç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606574125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1564002,"avatar":"https://static001.geekbang.org/account/avatar/00/17/dd/62/824e5e16.jpg","nickname":"æ²å¡µ","note":"","ucode":"4AD780EF50882B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330726,"discussion_content":"redisç°åœ¨ä¹Ÿä¸æ˜¯ä»€ä¹ˆé«˜é—¨æ§›çš„æŠ€æœ¯ï¼Œåº”ç”¨åœºæ™¯éšå¤„å¯è§ã€‚è€Œä¸”æ·˜å®ç§’æ€ç”¨dbæŠ—ï¼Œå› ä¸ºåšäº†å¾ˆå¤šè®¾è®¡å’Œä¼˜åŒ–ï¼Œæ¯”å¦‚ä¿®æ”¹äº†mysqlçš„å†…æ ¸æ”¯æŒæ’é˜Ÿï¼Œä¸ä»£è¡¨æ™®é€šçš„mysqlå°±å¯ä»¥æ‰›å¾—ä½ã€‚å¾ˆå¤šåœºæ™¯ä¸‹ç”¨rediséƒ½æ¯”ç”¨dbè¦ç®€å•é«˜æ•ˆï¼Œå¹¶ä¸æ˜¯ä»€ä¹ˆä¸ºäº†ç”¨è€Œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606698465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":330346,"ip_address":""},"score":330726,"extra":""},{"author":{"id":1564002,"avatar":"https://static001.geekbang.org/account/avatar/00/17/dd/62/824e5e16.jpg","nickname":"æ²å¡µ","note":"","ucode":"4AD780EF50882B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330979,"discussion_content":"æˆ‘å¹¶æ²¡æœ‰å¦è®¤rediså„ç§å¥½å¤„ã€‚\nmysqlèƒ½ä¸èƒ½æ‰›å–å†³äºä¸šåŠ¡åœºæ™¯éœ€æ±‚ã€‚\nåŠ å¤šä¸€ä¸ªç»„ä»¶å°±è¦ç»´æŠ¤å¤šä¸€ä¸ªç»„ä»¶ï¼Œå“ªæ€•è¿™ä¸ªç»„ä»¶å¾ˆå®¹æ˜“ä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606742825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":330726,"ip_address":""},"score":330979,"extra":""}]},{"author":{"id":2252928,"avatar":"","nickname":"Geek_653096","note":"","ucode":"949B213B3A4E33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326197,"discussion_content":"æˆ‘è§‰å¾—èƒ½ç”¨å”¯ä¸€ç´¢å¼•çš„æƒ…å†µä¸‹å°½é‡ç”¨å”¯ä¸€ç´¢å¼•ï¼Œredisè¿˜æ˜¯å¯èƒ½ä¼šå®•æœºçš„ã€‚å¦å¤–æˆ‘è§‰å¾—éš”å£ç§’æ€ä¸Šè¯´åº“å­˜ä¸šåŠ¡å•ä¸€çš„æƒ…å†µä¸‹åœ¨redisä¸Šå¯ä»¥ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå•†å“çš„åº“å­˜å¯èƒ½æœ‰æ€»åº“å­˜çš„æ¦‚å¿µä¸å»ºè®®ä½¿ç”¨(æ¯”å¦‚ çº¢é‹å­15åŒï¼Œè“é‹å­15åŒã€‚æ€»åº“å­˜20åŒï¼Œä¸¤ç§é‹å­å”®å–ä¸èƒ½è¶…è¿‡æ€»åº“å­˜ä¹Ÿä¸èƒ½è¶…è¿‡å•ä¸ªåº“å­˜)","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605541045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2252928,"avatar":"","nickname":"Geek_653096","note":"","ucode":"949B213B3A4E33","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326255,"discussion_content":"\nredisæ˜¯æœ‰å¯èƒ½å®•æœºçš„ï¼Œä½†æ˜¯ä¸€ä¸ªå¤§å‚è‚¯å®šä¼šæœ‰å„ç§é«˜å¯ç”¨æ–¹æ¡ˆæ¥è§£å†³ã€‚æˆ‘æ˜¯è§‰å¾—ä¸€ä¸ªåˆ†å¸ƒå¼é”å¯ä»¥è§£å†³çš„ï¼Œå¹¶ä¸”å¯ä»¥æ‰›ä½æ›´å¤šæµé‡ï¼Œæ¯”å¦‚æœ‰æ¶æ„æ”»å‡»ä¸‹é‡å¤è®¢å•ï¼Œè‚¯å®šå‰ç½®ç³»ç»Ÿå°±æ‹¦æ‰äº†ä¸æ˜¯ç­‰æœ€åå…¥åº“ç”¨å”¯ä¸€ç´¢å¼•æ¥é˜²æ­¢ã€‚å¦å¤–éš”å£mysqlè¯¾ç¨‹è€å¸ˆä¹Ÿè¯´äº†ï¼Œåœ¨ä¸šåŠ¡èƒ½ä¿è¯æ•°æ®ä¸ä¼šé‡å¤çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆä½¿ç”¨éå”¯ä¸€ç´¢å¼•ï¼Œâ€œç”±äºå”¯ä¸€ç´¢å¼•ç”¨ä¸ä¸Š change buffer çš„ä¼˜åŒ–æœºåˆ¶ï¼Œå› æ­¤å¦‚æœä¸šåŠ¡å¯ä»¥æ¥å—ï¼Œä»æ€§èƒ½è§’åº¦å‡ºå‘æˆ‘å»ºè®®ä½ ä¼˜å…ˆè€ƒè™‘éå”¯ä¸€ç´¢å¼•ã€‚â€ä¼˜åŒ–ç³»ç»Ÿçš„ä¸€ä¸ªæ€è·¯ä¸å°±æ˜¯å°½å¯èƒ½å°‘çš„è®©æµé‡åˆ°æ•°æ®åº“å±‚å—ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1605572491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326197,"ip_address":""},"score":326255,"extra":""},{"author":{"id":2252928,"avatar":"","nickname":"Geek_653096","note":"","ucode":"949B213B3A4E33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326815,"discussion_content":"æ˜¯çš„ ä½ è¯´çš„æ²¡é”™ï¼Œåªèƒ½è¯´å¦‚æœèƒ½ä¿è¯rediså¯ç”¨åº¦å¾ˆé«˜çš„æƒ…å†µä¸‹ä½¿ç”¨é”æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ¡ˆã€‚å”¯ä¸€ç´¢å¼•å¸¦æ¥çš„æ˜¯æ€§èƒ½ä¸Šçš„æŸè€—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605682418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326255,"ip_address":""},"score":326815,"extra":""},{"author":{"id":1100648,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cb/68/d8a4f907.jpg","nickname":"æ¥šå¤©è¡Œ","note":"","ucode":"B4DD986060ECD4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329401,"discussion_content":"åˆ†å¸ƒå¼é”å¯ä»¥ç”¨æ¥æŒ¡æ‰åŒä¸€ç™»å½•ç”¨æˆ·çš„è¯·æ±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606379152,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326255,"ip_address":""},"score":329401,"extra":""}]},{"author":{"id":1100648,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cb/68/d8a4f907.jpg","nickname":"æ¥šå¤©è¡Œ","note":"","ucode":"B4DD986060ECD4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329400,"discussion_content":"è€å¸ˆè®²çš„è¿™ä¸ªä¾‹å­ï¼Œæ²¡åŒ…å«é™è´­ï¼Œåªæ˜¯è®²äº†æ‰£å‡åº“å­˜ã€‚å¦‚æœä¸€ä¸ªç”¨æˆ·é™åˆ¶äº†è´­ä¹°æ•°é‡ï¼Œå°±ä¸èƒ½è¿™ä¹ˆç©äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606379110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2252928,"avatar":"","nickname":"Geek_653096","note":"","ucode":"949B213B3A4E33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326824,"discussion_content":"ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ redisä¿è¯çš„æ˜¯APï¼Œè¿˜æ˜¯è¾ƒéš¾ä¿è¯ä¸€è‡´æ€§ã€‚ä¸€æ—¦å‘ç”Ÿä¸»ä»åˆ‡æ¢ï¼Œå°±å®¹æ˜“é”å¤±æ•ˆï¼Œä½¿ç”¨çº¢é”çš„è¯åˆéœ€è¦ä¿è¯æœåŠ¡å™¨æ—¶é—´çš„å¼ºä¸€è‡´æ€§ã€‚è¿˜æ˜¯æ¯”è¾ƒéš¾ç»´æŠ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605683303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261146,"user_name":"test","can_delete":false,"product_type":"c1","uid":1065849,"ip_address":"","ucode":"9A4973E591DD12","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","comment_is_top":false,"comment_ctime":1605229429,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605229429","product_id":100056701,"comment_content":"ç”¨åˆ†ç‰‡é›†ç¾¤ä¿å­˜å››ä¸ªåˆ†åº“å­˜ï¼ŒæŸ¥è¯¢åº“å­˜çš„æ—¶å€™éœ€è¦å››ä¸ªå®ä¾‹æŸ¥è¯¢åæ±‡æ€»è¿”å›ï¼Œæ‰£å‡åº“å­˜çš„æ—¶å€™åªæ‰£å‡ä¸€ä¸ªå®ä¾‹ï¼Œæœ‰å¯èƒ½é‚£ä¸ªå®ä¾‹åº“å­˜ä¸ºç©ºã€‚è€Œä¸”è¦ä¿è¯ä¸Šæ¸¸æµé‡åˆ†å‘å‡åŒ€ï¼ˆä¸èƒ½ç”¨è½®è¯¢ï¼Œåªèƒ½ç”¨hashï¼‰ã€‚é—®é¢˜å¤æ‚åŒ–äº†ï¼Œè¿˜ä¸å¦‚ç”¨ä¸€ä¸ªå®ä¾‹ã€‚","like_count":0},{"had_liked":false,"id":261138,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1605227171,"is_pvip":false,"replies":[{"id":"98056","content":"æŸ¥è¯¢é€»è¾‘ä¼šå˜å¾—æ¯”è¾ƒå¤æ‚äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1609113953,"ip_address":"","comment_id":261138,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605227171","product_id":100056701,"comment_content":"æ¯ä¸ªå®ä¾‹200ä¸ªåº“å­˜ï¼Œå½“æŸä¸ªè¯·æ±‚åœ¨æŸä¸ªå®ä¾‹ä¸ŠæŸ¥è¯¢ä¸åˆ°åº“å­˜æ—¶ï¼Œå¹¶ä¸æ˜¯åº“å­˜çœŸçš„ä¸º0äº†ï¼Œè¿˜éœ€è¦å»å…¶å®ƒå®ä¾‹æŸ¥è¯¢ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªç¼ºç‚¹ã€‚<br><br>å¥½å¤„æ—¶å¯ä»¥æ‰¿å—æ›´å¤§çš„æµé‡ã€‚","like_count":0,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509386,"discussion_content":"æŸ¥è¯¢é€»è¾‘ä¼šå˜å¾—æ¯”è¾ƒå¤æ‚äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609113953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}