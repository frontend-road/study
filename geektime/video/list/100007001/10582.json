{"id":10582,"title":"54 | Zuul网关过滤器管理工具(Code Review)","content":"无","comments":[{"had_liked":false,"id":24777,"user_name":"AllenBai","can_delete":false,"product_type":"c3","uid":1125001,"ip_address":"","ucode":"D4A4453E078C53","user_header":"https://static001.geekbang.org/account/avatar/00/11/2a/89/c377ef2c.jpg","comment_is_top":false,"comment_ctime":1537192963,"is_pvip":false,"replies":[{"id":9634,"content":"以前旷工开矿下矿洞前，先会放一只金丝雀进去探是否有有毒气体，看金丝雀能否活下来，金丝雀发布由此得名。zuul网关上的金丝雀机制，filter上线前先让一个做金丝雀，有问题及时发现，没有问题再发全量。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1537676209,"ip_address":"","comment_id":24777,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"金丝雀是指什么","like_count":5,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424108,"discussion_content":"以前旷工开矿下矿洞前，先会放一只金丝雀进去探是否有有毒气体，看金丝雀能否活下来，金丝雀发布由此得名。zuul网关上的金丝雀机制，filter上线前先让一个做金丝雀，有问题及时发现，没有问题再发全量。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537676209,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28133,"user_name":"路加 | Luke","can_delete":false,"product_type":"c3","uid":1086064,"ip_address":"","ucode":"EE38A4CAF6F617","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/70/0c1233ce.jpg","comment_is_top":false,"comment_ctime":1538011358,"is_pvip":false,"replies":[{"id":10668,"content":"接口治理的范畴很广，接口规范，依赖关系，路由限流，监控和安全等，目前没有成熟通用现成方案，需要企业定制。阿里dubbo是治理集成较好的开源框架，但只能用于dubbo框架。servicemesh其实是一种服务治理框架，但还不成熟，可以关注。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1538479038,"ip_address":"","comment_id":28133,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"如果做接口的治理中心，有没有现成的组件或框架可以使用？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425153,"discussion_content":"接口治理的范畴很广，接口规范，依赖关系，路由限流，监控和安全等，目前没有成熟通用现成方案，需要企业定制。阿里dubbo是治理集成较好的开源框架，但只能用于dubbo框架。servicemesh其实是一种服务治理框架，但还不成熟，可以关注。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538479038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24566,"user_name":"正是那朵玫瑰","can_delete":false,"product_type":"c3","uid":1048261,"ip_address":"","ucode":"73D630B654573F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","comment_is_top":false,"comment_ctime":1537145456,"is_pvip":false,"replies":[{"id":9637,"content":"一个地方操作，比如filter集中存在数据库中，所有zuul节点定期去拉（节点有本地缓存和比对机制），集群通过最终一致生效。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1537677962,"ip_address":"","comment_id":24566,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"zuul节点是集群部署的，通过filter管理工具管理的话，要进行filter的操作时是对每一个zuul节点都要操作一遍还是在一个公共的地方操作后，所有的zuul节点都生效？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424037,"discussion_content":"一个地方操作，比如filter集中存在数据库中，所有zuul节点定期去拉（节点有本地缓存和比对机制），集群通过最终一致生效。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537677962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24061,"user_name":"路加 | Luke","can_delete":false,"product_type":"c3","uid":1086064,"ip_address":"","ucode":"EE38A4CAF6F617","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/70/0c1233ce.jpg","comment_is_top":false,"comment_ctime":1536797555,"is_pvip":false,"replies":[{"id":9648,"content":"答复，1）服务之间调用可以走集中网关，这个是集中代理模式，也可以不走，常见采用客户端软路由模式，这个是架构选择问题，具体可以关注我的第六模块课程（服务注册发现架构和实践）。2)接口权限管控，如果是采用的集中代理模式，就可以在网关上集中做。也可以在客户端做，或者服务器端做。个人建议网关集中做，比较容易集中治理，但是要关注性能和单点问题。不管做在哪里，都需要一个服务接口治理中心，相关权限数据定期拉到客户端，网关，或者服务端(filter)。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1537682147,"ip_address":"","comment_id":24061,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师，我有两个问题：\n1. 业务服务之间的调用会走网关吗？\n2. 业务服务之间的接口权限管理怎么管？比如A服务的有10个接口，只能给B服务开发5个访问权限，另外5个B服务不能访问，这个管理是在哪里？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423824,"discussion_content":"答复，1）服务之间调用可以走集中网关，这个是集中代理模式，也可以不走，常见采用客户端软路由模式，这个是架构选择问题，具体可以关注我的第六模块课程（服务注册发现架构和实践）。2)接口权限管控，如果是采用的集中代理模式，就可以在网关上集中做。也可以在客户端做，或者服务器端做。个人建议网关集中做，比较容易集中治理，但是要关注性能和单点问题。不管做在哪里，都需要一个服务接口治理中心，相关权限数据定期拉到客户端，网关，或者服务端(filter)。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537682147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}