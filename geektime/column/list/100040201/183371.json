{"id":183371,"title":"17 | è®¾è®¡æ¨¡å¼åº”ç”¨ï¼šç¼–ç¨‹æ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼","content":"<p>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¼€å‘åº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯ä»å¤´å¼€å‘çš„ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ç”¨Javaå¼€å‘ä¸€ä¸ªWebåº”ç”¨ï¼Œå¹¶ä¸éœ€è¦è‡ªå·±å†™ä»£ç ç›‘å¬HTTP 80ç«¯å£ï¼›ä¸éœ€è¦å¤„ç†ç½‘ç»œä¼ è¾“çš„äºŒè¿›åˆ¶HTTPæ•°æ®åŒ…ï¼ˆå‚è€ƒ<a href=\"https://time.geekbang.org/column/article/169545\">ç¬¬4ç¯‡ç½‘ç»œç¼–ç¨‹åŸç†</a>ï¼‰ï¼›ä¸éœ€è¦äº²è‡ªä¸ºæ¯ä¸ªç”¨æˆ·è¯·æ±‚åˆ†é…ä¸€ä¸ªå¤„ç†çº¿ç¨‹ï¼ˆå‚è€ƒ<a href=\"https://time.geekbang.org/column/article/166581\">01ç¯‡</a><a href=\"https://time.geekbang.org/column/article/166581\">æ“ä½œç³»ç»ŸåŸç†</a>ï¼‰ï¼Œè€Œæ˜¯ç›´æ¥ç¼–å†™ä¸€ä¸ªServletï¼Œå¾—åˆ°ä¸€ä¸ªHttpRequestå¯¹è±¡è¿›è¡Œå¤„ç†å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬ç”šè‡³ä¸éœ€è¦ä»è¿™ä¸ªHttpRequestå¯¹è±¡ä¸­è·å–è¯·æ±‚å‚æ•°ï¼Œé€šè¿‡Controllerå°±å¯ä»¥ç›´æ¥å¾—åˆ°ä¸€ä¸ªç”±è¯·æ±‚å‚æ•°æ„é€ çš„å¯¹è±¡ã€‚</p><p>æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™ï¼Œåªéœ€è¦å…³æ³¨è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å°±å¯ä»¥äº†ã€‚é‚£äº›é€šç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç›‘å¬HTTPç«¯å£ï¼Œä»HTTPè¯·æ±‚ä¸­æ„é€ å‚æ•°å¯¹è±¡ï¼Œæ˜¯ç”±ä¸€äº›é€šç”¨çš„æ¡†æ¶æ¥å®Œæˆçš„ï¼Œæ¯”å¦‚Tomcatæˆ–è€…Springè¿™äº›ã€‚</p><h2>ä»€ä¹ˆæ˜¯æ¡†æ¶</h2><p><strong>æ¡†æ¶æ˜¯å¯¹æŸä¸€ç±»æ¶æ„æ–¹æ¡ˆå¯å¤ç”¨çš„è®¾è®¡ä¸å®ç°</strong>ã€‚æ‰€æœ‰çš„Webåº”ç”¨éƒ½éœ€è¦ç›‘å¬HTTPç«¯å£ï¼Œä¹Ÿéœ€è¦å¤„ç†è¯·æ±‚å‚æ•°ï¼Œè¿™äº›åŠŸèƒ½ä¸åº”è¯¥åœ¨æ¯ä¸ªWebåº”ç”¨ä¸­éƒ½è¢«é‡å¤å¼€å‘ï¼Œè€Œæ˜¯åº”è¯¥ä»¥é€šç”¨ç»„ä»¶çš„å½¢å¼è¢«å¤ç”¨ã€‚</p><p>ä½†å¹¶ä¸æ˜¯æ‰€æœ‰å¯è¢«å¤ç”¨çš„ç»„ä»¶éƒ½è¢«ç§°ä½œæ¡†æ¶ï¼Œæ¡†æ¶é€šå¸¸è§„å®šäº†ä¸€ä¸ªè½¯ä»¶çš„ä¸»ä½“ç»“æ„ï¼Œå¯ä»¥æ”¯æ’‘èµ·è½¯ä»¶çš„æ•´ä½“æˆ–è€…å±€éƒ¨çš„æ¶æ„å½¢å¼ã€‚æ¯”å¦‚è¯´ï¼ŒTomcatå®Œæˆäº†Webåº”ç”¨è¯·æ±‚å“åº”çš„ä¸»ä½“æµç¨‹ï¼Œæˆ‘ä»¬åªéœ€è¦å¼€å‘Servletï¼Œå®Œæˆè¯·æ±‚å¤„ç†é€»è¾‘ï¼Œæ„é€ å“åº”å¯¹è±¡å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥Tomcatæ˜¯ä¸€ä¸ªæ¡†æ¶ã€‚</p><!-- [[[read_end]]] --><p>è¿˜æœ‰ä¸€ç±»å¯å¤ç”¨çš„ç»„ä»¶ä¸æ§åˆ¶è½¯ä»¶çš„ä¸»ä½“æµç¨‹ï¼Œä¹Ÿä¸æ”¯æ’‘è½¯ä»¶çš„æ•´ä½“æ¶æ„ï¼Œæ¯”å¦‚Log4Jæä¾›äº†ä¸€ä¸ªå¯å¤ç”¨çš„æ—¥å¿—è¾“å‡ºåŠŸèƒ½ï¼Œä½†æ˜¯ï¼Œæ—¥å¿—è¾“å‡ºåŠŸèƒ½ä¸æ˜¯è½¯ä»¶çš„ä¸»ä½“ç»“æ„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¸ç§°Log4Jä¸ºæ¡†æ¶ï¼Œè€Œç§°å…¶ä¸ºå·¥å…·ã€‚</p><p>ä¸€èˆ¬è¯´æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¡†æ¶ç¼–ç¨‹çš„æ—¶å€™ï¼Œéœ€è¦éµå¾ªæ¡†æ¶çš„è§„èŒƒç¼–å†™ä»£ç ã€‚æ¯”å¦‚Tomcatã€Springã€Mybatisã€Junitç­‰ï¼Œè¿™äº›<strong>æ¡†æ¶ä¼šè°ƒç”¨æˆ‘ä»¬ç¼–å†™çš„ä»£ç ï¼Œè€Œæˆ‘ä»¬ç¼–å†™çš„ä»£ç åˆ™ä¼šè°ƒç”¨å·¥å…·</strong>å®ŒæˆæŸäº›ç‰¹å®šçš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¾“å‡ºæ—¥å¿—ï¼Œè¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç­‰ã€‚</p><p>æˆ‘åœ¨è¿™é‡Œå¼ºè°ƒæ¡†æ¶ä¸å·¥å…·çš„ä¸åŒï¼Œå¹¶ä¸æ˜¯åœ¨å’¬æ–‡åš¼å­—ã€‚æˆ‘è§è¿‡ä¸€äº›æœ‰è¿›å–å¿ƒçš„å·¥ç¨‹å¸ˆå®£ç§°è‡ªå·±è®¾è®¡å¼€å‘äº†ä¸€ä¸ªæ–°æ¡†æ¶ï¼Œä½†æ˜¯è¿™ä¸ªæ¡†æ¶å¹¶æ²¡æœ‰æä¾›ä¸€äº›æ¶æ„æ€§çš„è§„èŒƒï¼Œä¹Ÿæ²¡æœ‰æ”¯æ’‘è½¯ä»¶çš„ä¸»ä½“ç»“æ„ï¼Œä»…ä»…åªæ˜¯æä¾›äº†ä¸€äº›åŠŸèƒ½æ¥å£ä¾›å¼€å‘è€…è°ƒç”¨ï¼Œå®é™…ä¸Šï¼Œè¿™è·Ÿæˆ‘ä»¬å¯¹æ¡†æ¶çš„æœŸå¾…ç›¸å»ç”šè¿œã€‚</p><p>æ ¹æ®æˆ‘ä»¬ä¸Šé¢å¯¹æ¡†æ¶çš„æè¿°ï¼Œå½“ä½ è®¾è®¡ä¸€ä¸ªæ¡†æ¶çš„æ—¶å€™ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨è®¾è®¡ä¸€ç±»è½¯ä»¶çš„é€šç”¨æ¶æ„ï¼Œå¹¶é€šè¿‡ä»£ç çš„æ–¹å¼å®ç°å‡ºæ¥ã€‚å¦‚æœä»…ä»…æ˜¯æä¾›åŠŸèƒ½æ¥å£ä¾›ç¨‹åºè°ƒç”¨ï¼Œæ˜¯æ— æ³•æ”¯æ’‘èµ·è½¯ä»¶çš„æ¶æ„çš„ï¼Œä¹Ÿæ— æ³•è§„èŒƒè½¯ä»¶çš„ç»“æ„ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è®¾è®¡ã€å¼€å‘ä¸€ä¸ªç¼–ç¨‹æ¡†æ¶ï¼Ÿ</p><p>æˆ‘åœ¨å‰é¢è®²è¿‡å¼€é—­åŸåˆ™ã€‚æ¡†æ¶åº”è¯¥æ»¡è¶³<strong>å¼€é—­åŸåˆ™</strong>ï¼Œå³é¢å¯¹ä¸åŒåº”ç”¨åœºæ™¯ï¼Œæ¡†æ¶æœ¬èº«æ˜¯ä¸éœ€è¦ä¿®æ”¹çš„ï¼Œéœ€è¦å¯¹ä¿®æ”¹å…³é—­ã€‚ä½†æ˜¯å„ç§åº”ç”¨åŠŸèƒ½å´æ˜¯å¯ä»¥æ‰©å±•çš„ï¼Œå³å¯¹æ‰©å±•å¼€æ”¾ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥åœ¨æ¡†æ¶çš„åŸºç¡€ä¸Šæ‰©å±•å‡ºå„ç§ä¸šåŠ¡åŠŸèƒ½ã€‚</p><p>åŒæ—¶æ¡†æ¶è¿˜åº”è¯¥æ»¡è¶³<strong>ä¾èµ–å€’ç½®åŸåˆ™</strong>ï¼Œå³æ¡†æ¶ä¸åº”è¯¥ä¾èµ–åº”ç”¨ç¨‹åºï¼Œå› ä¸ºå¼€å‘æ¡†æ¶çš„æ—¶å€™ï¼Œåº”ç”¨ç¨‹åºè¿˜æ²¡æœ‰å‘¢ã€‚åº”ç”¨ç¨‹åºä¹Ÿä¸åº”è¯¥ä¾èµ–æ¡†æ¶ï¼Œè¿™æ ·åº”ç”¨ç¨‹åºå¯ä»¥çµæ´»æ›´æ¢æ¡†æ¶ã€‚æ¡†æ¶å’Œåº”ç”¨ç¨‹åºåº”è¯¥éƒ½ä¾èµ–æŠ½è±¡ï¼Œæ¯”å¦‚Tomcatæä¾›çš„ç¼–ç¨‹æ¥å£å°±æ˜¯Servletï¼Œåº”ç”¨ç¨‹åºåªéœ€è¦å®ç°Servletæ¥å£ï¼Œå°±å¯ä»¥åœ¨Tomcatæ¡†æ¶ä¸‹è¿è¡Œï¼Œä¸éœ€è¦ä¾èµ–Tomcatï¼Œå¯ä»¥éšæ—¶åˆ‡æ¢åˆ°Jettyç­‰å…¶ä»–Webå®¹å™¨ã€‚</p><p>è¦çŸ¥é“ï¼Œè™½ç„¶è®¾è®¡åŸåˆ™å¯ä»¥æŒ‡å¯¼æ¡†æ¶å¼€å‘ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç»™å‡ºå…·ä½“çš„è®¾è®¡æ–¹æ³•ã€‚äº‹å®ä¸Šï¼Œæ¡†æ¶æ­£æ˜¯åˆ©ç”¨å„ç§è®¾è®¡æ¨¡å¼å¼€å‘å‡ºæ¥çš„ã€‚ç¼–ç¨‹æ¡†æ¶ä¸åº”ç”¨ç¨‹åºã€è®¾è®¡æ¨¡å¼ã€è®¾è®¡åŸåˆ™ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/96/b5/96e96e791bce902d6e398e0809eee5b5.png?wh=308*408\" alt=\"\"></p><p>é¢å‘å¯¹è±¡çš„è®¾è®¡ç›®æ ‡æ˜¯ä½è€¦åˆã€é«˜å†…èšã€‚ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œäººä»¬æå‡ºäº†ä¸€äº›è®¾è®¡åŸåˆ™ï¼Œä¸»è¦æœ‰å¼€é—­åŸåˆ™ã€ä¾èµ–å€’ç½®åŸåˆ™ã€é‡Œæ°æ›¿æ¢åŸåˆ™ã€å•ä¸€èŒè´£åŸåˆ™ã€æ¥å£éš”ç¦»åŸåˆ™ã€‚åœ¨è¿™äº›åŸåˆ™ä¹‹ä¸Šï¼Œäººä»¬æ€»ç»“äº†è‹¥å¹²è®¾è®¡æ¨¡å¼ï¼Œæœ€è‘—åçš„å°±æ˜¯GoF23ç§è®¾è®¡æ¨¡å¼ï¼Œè¿˜æœ‰Webå¼€å‘åŒå­¦éå¸¸ç†Ÿæ‚‰çš„MVCæ¨¡å¼ç­‰ç­‰ã€‚ä¾ç…§è¿™äº›è®¾è®¡æ¨¡å¼ï¼Œäººä»¬å¼€å‘äº†å„ç§ç¼–ç¨‹æ¡†æ¶ã€‚ä½¿ç”¨è¿™äº›ç¼–ç¨‹æ¡†æ¶ï¼Œå¼€å‘è€…å¯ä»¥ç®€å•ã€å¿«é€Ÿåœ°å¼€å‘å„ç§åº”ç”¨ç¨‹åºã€‚</p><h2>Webå®¹å™¨ä¸­çš„è®¾è®¡æ¨¡å¼</h2><p>å‰é¢æˆ‘ä»¬ä¸€å†æåˆ°Tomcatæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œé‚£ä¹ˆTomcatä¸å…¶ä»–åŒç±»çš„Webå®¹å™¨æ˜¯ç”¨ä»€ä¹ˆè®¾è®¡æ¨¡å¼å®ç°çš„ï¼Ÿä»£ç å¦‚ä½•è¢«Webå®¹å™¨æ‰§è¡Œï¼Ÿç¨‹åºä¸­çš„è¯·æ±‚å¯¹è±¡HttpServletRequestæ˜¯ä»å“ªé‡Œæ¥çš„ï¼Ÿ</p><p>Webå®¹å™¨ä¸»è¦ä½¿ç”¨äº†<strong>ç­–ç•¥æ¨¡å¼</strong>ï¼Œå¤šä¸ªç­–ç•¥å®ç°åŒä¸€ä¸ªç­–ç•¥æ¥å£ã€‚ç¼–ç¨‹çš„æ—¶å€™Tomcatä¾èµ–ç­–ç•¥æ¥å£ï¼Œè€Œåœ¨è¿è¡ŒæœŸæ ¹æ®ä¸åŒä¸Šä¸‹æ–‡ï¼ŒTomcatè£…è½½ä¸åŒçš„ç­–ç•¥å®ç°ã€‚</p><p>è¿™é‡Œçš„ç­–ç•¥æ¥å£å°±æ˜¯Servletæ¥å£ï¼Œè€Œæˆ‘ä»¬å¼€å‘çš„ä»£ç å°±æ˜¯å®ç°è¿™ä¸ªServletæ¥å£ï¼Œå¤„ç†HTTPè¯·æ±‚ã€‚J2EEè§„èŒƒå®šä¹‰äº†Servletæ¥å£ï¼Œæ¥å£ä¸­ä¸»è¦æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š</p><pre><code>public interface Servlet {\n    public void init(ServletConfig config) throws ServletException;\n    public void service(ServletRequest req, ServletResponse res)\n            throws ServletException, IOException;\n    public void destroy();\n}\n\n</code></pre><p>Webå®¹å™¨Containeråœ¨è£…è½½æˆ‘ä»¬å¼€å‘çš„Servletå…·ä½“ç±»çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªç±»çš„initæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚å½“æœ‰HTTPè¯·æ±‚åˆ°è¾¾å®¹å™¨çš„æ—¶å€™ï¼Œå®¹å™¨ä¼šå¯¹HTTPè¯·æ±‚ä¸­çš„äºŒè¿›åˆ¶ç¼–ç è¿›è¡Œååºåˆ—åŒ–ï¼Œå°è£…æˆServletRequestå¯¹è±¡ï¼Œç„¶åè°ƒç”¨Servletçš„serviceæ–¹æ³•è¿›è¡Œå¤„ç†ã€‚å½“å®¹å™¨å…³é—­çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨destroyæ–¹æ³•åšå–„åå¤„ç†ã€‚</p><p>å½“æˆ‘ä»¬å¼€å‘Webåº”ç”¨çš„æ—¶å€™ï¼Œåªéœ€è¦å®ç°è¿™ä¸ªServletæ¥å£ï¼Œå¼€å‘è‡ªå·±çš„Servletå°±å¯ä»¥äº†ï¼Œå®¹å™¨ä¼šç›‘å¬HTTPç«¯å£ï¼Œå¹¶å°†æ”¶åˆ°çš„HTTPæ•°æ®åŒ…å°è£…æˆServletRequestå¯¹è±¡ï¼Œè°ƒç”¨æˆ‘ä»¬çš„Servletä»£ç ã€‚ä»£ç åªéœ€è¦ä»ServletRequestä¸­è·å–è¯·æ±‚æ•°æ®è¿›è¡Œå¤„ç†è®¡ç®—å°±å¯ä»¥äº†ï¼Œå¤„ç†ç»“æœå¯ä»¥é€šè¿‡ServletResponseè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>è¿™é‡ŒTomcatå°±æ˜¯ç­–ç•¥æ¨¡å¼ä¸­çš„Clientç¨‹åºï¼ŒServletæ¥å£æ˜¯ç­–ç•¥æ¥å£ã€‚æˆ‘ä»¬è‡ªå·±å¼€å‘çš„å…·ä½“Servletç±»å°±æ˜¯ç­–ç•¥çš„å®ç°ã€‚é€šè¿‡ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼ŒTomcatè¿™æ ·çš„Webå®¹å™¨å¯ä»¥è°ƒç”¨å„ç§Servletåº”ç”¨ç¨‹åºä»£ç ï¼Œè€Œå„ç§Servletåº”ç”¨ç¨‹åºä»£ç ä¹Ÿå¯ä»¥è¿è¡Œåœ¨Jettyç­‰å…¶ä»–çš„Webå®¹å™¨é‡Œï¼Œåªè¦è¿™äº›Webå®¹å™¨éƒ½æ”¯æŒServletæ¥å£å°±å¯ä»¥äº†ã€‚</p><p>Webå®¹å™¨å®Œæˆäº†HTTPè¯·æ±‚å¤„ç†çš„ä¸»è¦æµç¨‹ï¼ŒæŒ‡å®šäº†Servletæ¥å£è§„èŒƒï¼Œå®ç°äº†Webå¼€å‘çš„ä¸»è¦æ¶æ„ï¼Œå¼€å‘è€…åªè¦åœ¨è¿™ä¸ªæ¶æ„ä¸‹å¼€å‘å…·ä½“Servletå°±å¯ä»¥äº†ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ç§°Tomcatã€Jettyè¿™ç±»Webå®¹å™¨ä¸ºæ¡†æ¶ã€‚</p><p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¼€å‘å…·ä½“çš„Servletåº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šç›´æ¥å®ç°Servletæ¥å£ï¼Œè€Œæ˜¯ç»§æ‰¿HttpServletç±»ï¼ŒHttpServletç±»å®ç°äº†Servletæ¥å£ã€‚HttpServletè¿˜ç”¨åˆ°äº†<strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>ï¼Œæ‰€è°“æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå°±æ˜¯åœ¨çˆ¶ç±»ä¸­ç”¨æŠ½è±¡æ–¹æ³•å®šä¹‰è®¡ç®—çš„éª¨æ¶å’Œè¿‡ç¨‹ï¼Œè€ŒæŠ½è±¡æ–¹æ³•çš„å®ç°åˆ™ç•™åœ¨å­ç±»ä¸­ã€‚</p><p>è¿™é‡Œï¼Œçˆ¶ç±»æ˜¯HttpServletï¼ŒHttpServleté€šè¿‡ç»§æ‰¿GenericServletå®ç°äº†Servletæ¥å£ï¼Œå¹¶åœ¨è‡ªå·±çš„serviceæ–¹æ³•ä¸­ï¼Œé’ˆå¯¹ä¸åŒçš„HTTPè¯·æ±‚ç±»å‹è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼ŒHttpServletçš„serviceæ–¹æ³•å°±æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ã€‚</p><pre><code>    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException\n    {\n        String method = req.getMethod();\n        if (method.equals(METHOD_GET)) {\n                doGet(req, resp);\n        } else if (method.equals(METHOD_HEAD)) {\n            long lastModified = getLastModified(req);\n            maybeSetLastModified(resp, lastModified);\n            doHead(req, resp);\n        } else if ...\n</code></pre><p>ç”±äºHTTPè¯·æ±‚æœ‰getã€postç­‰7ç§è¯·æ±‚ç±»å‹ï¼Œä¸ºäº†ä¾¿äºç¼–ç¨‹ï¼ŒHttpServletæä¾›äº†è¿™7ç§HTTPè¯·æ±‚ç±»å‹å¯¹åº”çš„æ‰§è¡Œæ–¹æ³•doGetã€doPostç­‰ç­‰ã€‚serviceæ¨¡æ¿æ–¹æ³•ä¼šåˆ¤æ–­HTTPè¯·æ±‚ç±»å‹ï¼Œæ ¹æ®ä¸åŒè¯·æ±‚ç±»å‹ï¼Œæ‰§è¡Œä¸åŒæ–¹æ³•ã€‚å¼€å‘è€…åªéœ€è¦ç»§æ‰¿HttpServletï¼Œé‡å†™doGetã€doPostç­‰å¯¹åº”çš„HTTPè¯·æ±‚ç±»å‹æ–¹æ³•å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦è‡ªå·±åˆ¤æ–­HTTPè¯·æ±‚ç±»å‹ã€‚Servletç›¸å…³çš„ç±»å…³ç³»å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/39/18/39dcdacf774021ef38bd33f06f21a018.jpg?wh=402*394\" alt=\"\"></p><h2>JUnitä¸­çš„è®¾è®¡æ¨¡å¼</h2><p>JUnitæ˜¯ä¸€ä¸ªJavaå•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œå¼€å‘è€…åªéœ€è¦ç»§æ‰¿JUnitçš„TestCaseï¼Œå¼€å‘è‡ªå·±çš„æµ‹è¯•ç”¨ä¾‹ç±»ï¼Œé€šè¿‡JUnitæ¡†æ¶æ‰§è¡Œæµ‹è¯•ï¼Œå°±å¾—åˆ°æµ‹è¯•ç»“æœã€‚</p><p>å¼€å‘æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š</p><pre><code>public class MyTest extends TestCase {\n   protected void setUp(){\n     ...\n   }\n   public void testSome(){\n     ...\n   }\n   protected void tearDown(){\n     ...\n   }\n}\n</code></pre><p>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç»§æ‰¿TestCaseï¼Œåœ¨setUpæ–¹æ³•é‡Œåšä¸€äº›æµ‹è¯•åˆå§‹åŒ–çš„å·¥ä½œï¼Œæ¯”å¦‚è£…è½½æµ‹è¯•æ•°æ®ä»€ä¹ˆçš„ï¼›ç„¶åç¼–å†™å¤šä¸ªä»¥testä¸ºå‰ç¼€çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å°±æ˜¯æµ‹è¯•ç”¨ä¾‹æ–¹æ³•ï¼›è¿˜æœ‰ä¸€ä¸ªtearDownæ–¹æ³•ï¼Œåœ¨æµ‹è¯•ç»“æŸåï¼Œè¿›è¡Œä¸€äº›æ”¶å°¾çš„å·¥ä½œï¼Œæ¯”å¦‚åˆ é™¤æ•°æ®åº“ä¸­çš„æµ‹è¯•æ•°æ®ç­‰ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å†™çš„è¿™äº›æµ‹è¯•ç”¨ä¾‹å¦‚ä½•è¢«JUnitæ‰§è¡Œå‘¢ï¼Ÿå¦‚ä½•ä¿è¯æµ‹è¯•ç”¨ä¾‹ä¸­è¿™å‡ ä¸ªæ–¹æ³•çš„æ‰§è¡Œé¡ºåºå‘¢ï¼ŸJUnitåœ¨è¿™é‡Œä¹Ÿä½¿ç”¨äº†<strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>ï¼Œæµ‹è¯•ç”¨ä¾‹çš„æ–¹æ³•æ‰§è¡Œé¡ºåºè¢«å›ºå®šåœ¨JUnitæ¡†æ¶çš„æ¨¡æ¿æ–¹æ³•é‡Œã€‚å¦‚ä¸‹ï¼š</p><pre><code>public void runBare() throws Throwable {\n        setUp();\n        try{\n                runTest();\n        }\n        finally {\n                tearDown();\n        }\n}\n</code></pre><p>runBareæ˜¯TestCaseåŸºç±»é‡Œçš„æ–¹æ³•ï¼Œæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œæ—¶å®é™…ä¸Šåªæ‰§è¡ŒrunBareæ¨¡æ¿æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œï¼Œå…ˆæ‰§è¡ŒsetUpæ–¹æ³•ï¼Œç„¶åæ‰§è¡Œå„ç§testå‰ç¼€çš„æ–¹æ³•ï¼Œæœ€åæ‰§è¡ŒtearDownæ–¹æ³•ã€‚ä¿è¯æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½è¿›è¡Œåˆå§‹åŒ–åŠå¿…è¦çš„æ”¶å°¾ã€‚è€Œæˆ‘ä»¬çš„æµ‹è¯•ç±»åªéœ€è¦ç»§æ‰¿TestCaseåŸºç±»ï¼Œå®ç°setUpã€tearDownä»¥åŠå…¶ä»–æµ‹è¯•æ–¹æ³•å°±å¯ä»¥äº†ã€‚</p><p>æ­¤å¤–ï¼Œä¸€ä¸ªè½¯ä»¶çš„æµ‹è¯•ç”¨ä¾‹ä¼šæœ‰å¾ˆå¤šï¼Œä½ å¯èƒ½å¸Œæœ›æ‰§è¡Œå…¨éƒ¨è¿™äº›ç”¨ä¾‹ï¼Œä¹Ÿå¯èƒ½å¸Œæœ›æ‰§è¡Œä¸€éƒ¨åˆ†ç”¨ä¾‹ï¼ŒJUnitæä¾›äº†ä¸€ä¸ªæµ‹è¯•å¥—ä»¶TestSuitç®¡ç†ã€ç»„ç»‡æµ‹è¯•ç”¨ä¾‹ã€‚</p><pre><code>public static Test suite() {\n  TestSuite suite = new TestSuite(&quot;all&quot;);\n  suite.addTest(MyTest.class);//åŠ å…¥ä¸€ä¸ªTestCase\n  suite.addTest(otherTestSuite);//åŠ å…¥ä¸€ä¸ªTestSuite\n  return suite;\n}\n</code></pre><p>TestSuiteå¯ä»¥é€šè¿‡addTestæ–¹æ³•å°†å¤šä¸ªTestCaseç±»åŠ å…¥ä¸€ä¸ªæµ‹è¯•å¥—ä»¶suiteï¼Œè¿˜å¯ä»¥å°†å¦ä¸€ä¸ªTestSuiteåŠ å…¥è¿™ä¸ªæµ‹è¯•å¥—ä»¶ã€‚å½“æ‰§è¡Œè¿™ä¸ªTestSuiteçš„æ—¶å€™ï¼ŒåŠ å…¥çš„æµ‹è¯•ç±»TestCaseä¼šè¢«æ‰§è¡Œï¼ŒåŠ å…¥çš„å…¶ä»–æµ‹è¯•å¥—ä»¶TestSuiteé‡Œé¢çš„æµ‹è¯•ç±»ä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œå¦‚æœå…¶ä»–çš„æµ‹è¯•å¥—ä»¶é‡ŒåŒ…å«äº†å¦å¤–ä¸€äº›æµ‹è¯•å¥—ä»¶ï¼Œä¹Ÿéƒ½ä¼šè¢«æ‰§è¡Œã€‚</p><p>è¿™ä¹Ÿå°±æ„å‘³ç€TestSuiteæ˜¯å¯ä»¥é€’å½’çš„ï¼Œäº‹å®ä¸Šï¼ŒTestSuiteæ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„ç»“æ„ï¼Œå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/51/8ef639e90053669e2a72a7319ce71a51.png?wh=898*574\" alt=\"\"></p><p>å½“æˆ‘ä»¬ä»æ ‘çš„æ ¹èŠ‚ç‚¹éå†æ ‘ï¼Œå°±å¯ä»¥æ‰§è¡Œæ‰€æœ‰è¿™äº›æµ‹è¯•ç”¨ä¾‹ã€‚ä¼ ç»Ÿä¸Šè¿›è¡Œæ ‘çš„éå†éœ€è¦é€’å½’ç¼–ç¨‹çš„ï¼Œè€Œä½¿ç”¨<strong>ç»„åˆæ¨¡å¼</strong>ï¼Œæ— éœ€é€’å½’ä¹Ÿå¯ä»¥éå†æ ‘ã€‚</p><p>é¦–å…ˆï¼ŒTestSuiteå’ŒTestCaseéƒ½å®ç°äº†æ¥å£Testï¼š</p><pre><code>public interface Test {\n\tpublic abstract void run(TestResult result);\n}\n</code></pre><p>å½“æˆ‘ä»¬è°ƒç”¨TestSuiteçš„addTestæ–¹æ³•æ—¶ï¼ŒTestSuiteä¼šå°†è¾“å…¥çš„å¯¹è±¡æ”¾å…¥ä¸€ä¸ªæ•°ç»„ï¼š</p><pre><code>private Vector&lt;Test&gt; fTests= new Vector&lt;Test&gt;(10); \n\n\npublic void addTest(Test test) {\n\tfTests.add(test);\n}\n</code></pre><p>ç”±äºTestCaseå’ŒTestSuiteéƒ½å®ç°äº†Testæ¥å£ï¼Œæ‰€ä»¥addTestçš„æ—¶å€™ï¼Œæ—¢å¯ä»¥ä¼ å…¥TestCaseï¼Œä¹Ÿå¯ä»¥ä¼ å…¥TestSuiteã€‚æ‰§è¡ŒTestSuiteçš„runæ–¹æ³•æ—¶ï¼Œä¼šå–å‡ºè¿™ä¸ªæ•°ç»„çš„æ¯ä¸ªå¯¹è±¡ï¼Œåˆ†åˆ«æ‰§è¡Œä»–ä»¬çš„runæ–¹æ³•ï¼š</p><pre><code>public void run(TestResult result) {\n\tfor (Test each : fTests) {\n\t\ttest.run(result);\n\t}\n}\n</code></pre><p>å¦‚æœè¿™ä¸ªtestå¯¹è±¡æ˜¯TestCaseï¼Œå°±æ‰§è¡Œæµ‹è¯•ï¼›å¦‚æœè¿™ä¸ªtestå¯¹è±¡æ˜¯ä¸€ä¸ªTestSuiteï¼Œé‚£ä¹ˆå°±ä¼šç»§ç»­è°ƒç”¨è¿™ä¸ªTestSuiteå¯¹è±¡çš„runæ–¹æ³•ï¼Œéå†æ‰§è¡Œæ•°ç»„çš„æ¯ä¸ªTestçš„runæ–¹æ³•ï¼Œä»è€Œå®ç°äº†æ ‘çš„é€’å½’éå†ã€‚</p><h2>å°ç»“</h2><p>äººä»¬å¯¹æ¶æ„å¸ˆçš„å·¥ä½œæœ‰ä¸€ç§å¸¸è§çš„è¯¯è§£ï¼Œè®¤ä¸ºæ¶æ„å¸ˆåšæ¶æ„è®¾è®¡å°±å¯ä»¥äº†ï¼Œæ¶æ„å¸ˆä¸éœ€è¦å†™ä»£ç ã€‚äº‹å®ä¸Šï¼Œæ¶æ„å¸ˆå¦‚æœåªæ˜¯ç”»ç”»æ¶æ„å›¾ï¼Œå†™å†™è®¾è®¡æ–‡æ¡£ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯è‡ªå·±çš„æ¶æ„è®¾è®¡èƒ½è¢«æ•´ä¸ªå¼€å‘å›¢é˜Ÿéµå®ˆã€è½åˆ°å®å¤„ï¼Ÿ</p><p>æ¶æ„å¸ˆåº”è¯¥é€šè¿‡ä»£ç è½å®è‡ªå·±çš„æ¶æ„è®¾è®¡ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¼€å‘ç¼–ç¨‹æ¡†æ¶ï¼Œçº¦å®šè½¯ä»¶å¼€å‘çš„è§„èŒƒã€‚å¼€å‘å›¢é˜Ÿä¾ç…§æ¡†æ¶çš„æ¥å£å¼€å‘ç¨‹åºï¼Œæœ€ç»ˆè¢«æ¡†æ¶è°ƒç”¨æ‰§è¡Œã€‚æ¶æ„å¸ˆä¸éœ€è¦æ‹¿ç€æ¶æ„å›¾ä¸€éä¸€éè®²è½¯ä»¶æ¶æ„æ˜¯ä»€ä¹ˆï¼Œåªéœ€è¦åŸºäºæ¡†æ¶å†™ä¸ªDemoï¼Œå¤§å®¶å°±éƒ½æ¸…æ¥šæ¶æ„æ˜¯ä»€ä¹ˆäº†ï¼Œè‡ªå·±åº”è¯¥å¦‚ä½•åšäº†ã€‚</p><p>æ‰€ä»¥æ¯ä¸ªæƒ³æˆä¸ºæ¶æ„å¸ˆçš„ç¨‹åºå‘˜éƒ½åº”è¯¥å­¦ä¹ å¦‚ä½•å¼€å‘æ¡†æ¶ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>åœ¨Tomcatå’ŒJUnitä¸­ï¼Œè¿˜ä½¿ç”¨äº†å…¶ä»–ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œåœ¨å“ªäº›åœ°æ–¹ä½¿ç”¨ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Œè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿä½ äº†è§£å—ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„æ€è€ƒï¼Œæˆ‘ä¼šå’Œä½ ä¸€èµ·äº¤æµï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p>","comments":[{"had_liked":false,"id":168299,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1578043533,"is_pvip":false,"replies":[{"id":"65457","content":"å¥½é—®é¢˜ï¼Œæ˜¾ç„¶æ˜¯è¿åå¼€é—­åŸåˆ™çš„ã€‚ä½†æ˜¯è¿™é‡Œå¦‚æœç”¨ç­–ç•¥æ¨¡å¼æ¶ˆé™¤è¿™äº›if elseï¼Œå¯èƒ½ä¼šå¯¼è‡´å¼€å‘è€…éœ€è¦ç»§æ‰¿ä¸åŒçš„ç±»å¤„ç†ä¸åŒçš„HTTPè¯·æ±‚ï¼Œæé«˜å¼€å‘è€…çš„å­¦ä¹ å’Œä½¿ç”¨æˆæœ¬ã€‚<br><br>æ˜¯å¦è¦éµå¾ªåŸåˆ™ï¼Œè¦çœ‹å…·ä½“åœºæ™¯è¿›è¡Œæƒè¡¡ã€‚HTTPåè®®ä¸­çš„è¯·æ±‚æ–¹æ³•è¯ç”Ÿä»¥æ¥éƒ½æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œæ‰€ä»¥å†™æ­»ä¹Ÿæ˜¯ä¸€ä¸ªåŠæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ææ™ºæ…§","uid":"1007349","ctime":1578199198,"ip_address":"","comment_id":168299,"utype":1}],"discussion_count":6,"race_medal":0,"score":"143311964301","product_id":100040201,"comment_content":"serviceé‡Œæ–¹æ³•ä¸åœçš„if&#47;else ä¸è¿å å¼€é—­åŸåˆ™?","like_count":34,"discussions":[{"author":{"id":1019069,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8c/bd/4895b166.jpg","nickname":"Chelizi","note":"","ucode":"B90CFDB5F7B900","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":236479,"discussion_content":"å¯¹äºç¨³å®šä¸å˜çš„ä¸œè¥¿ç”¨ if/else åè€Œæ›´æ¸…æ™°æ˜“æ‡‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1587097596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168540,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/9c/030e80d3.jpg","nickname":"javaå°éœ¸ç‹","note":"","ucode":"7094BCD9F25E1E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578124,"discussion_content":"æˆ‘çš„ç†è§£è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯ç»´æŠ¤ å¯æ‰©å±• å¯è¯»æ€§ å¯é‡ç”¨ï¼Œå½“æ²¡æœ‰ä»¥ä¸Šé—®é¢˜çš„æ—¶å€™ï¼Œå°±æ²¡æœ‰ä½¿ç”¨çš„å¿…è¦ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1656523268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":154976,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™æ ·è®¤ä¸ºçš„ï¼Œhttpæ–¹æ³•ä¹Ÿå°±é‚£å‡ ç§ï¼Œå¯ä»¥ç›´æ¥å†™å‡ºæ¥ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šå†ä¿®æ”¹çš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1580205538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480185,"discussion_content":"å¥½é—®é¢˜ï¼Œæ˜¾ç„¶æ˜¯è¿åå¼€é—­åŸåˆ™çš„ã€‚ä½†æ˜¯è¿™é‡Œå¦‚æœç”¨ç­–ç•¥æ¨¡å¼æ¶ˆé™¤è¿™äº›if elseï¼Œå¯èƒ½ä¼šå¯¼è‡´å¼€å‘è€…éœ€è¦ç»§æ‰¿ä¸åŒçš„ç±»å¤„ç†ä¸åŒçš„HTTPè¯·æ±‚ï¼Œæé«˜å¼€å‘è€…çš„å­¦ä¹ å’Œä½¿ç”¨æˆæœ¬ã€‚\n\næ˜¯å¦è¦éµå¾ªåŸåˆ™ï¼Œè¦çœ‹å…·ä½“åœºæ™¯è¿›è¡Œæƒè¡¡ã€‚HTTPåè®®ä¸­çš„è¯·æ±‚æ–¹æ³•è¯ç”Ÿä»¥æ¥éƒ½æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œæ‰€ä»¥å†™æ­»ä¹Ÿæ˜¯ä¸€ä¸ªåŠæ³•ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1578199198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2063114,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/7b/0a/b65e1fae.jpg","nickname":"ä¸è¦æŒ‘æˆ˜è‡ªå·±çš„æ™ºå•†","note":"","ucode":"4910FF07C35DC5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540662,"discussion_content":"æ—¢ç„¶ä¸å˜ï¼Œå°±å¤§èƒ†å†™æ­»ã€‚ä»¥åæ”¹çš„é£é™©å°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640127666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142025,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6d/09/ffeabc27.jpg","nickname":"ä»»é‘«","note":"","ucode":"9803EB15B634C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378612,"discussion_content":"JDK å’Œ ä¸€äº›è‘—åçš„æ¡†æ¶ä¸­ if-else è¿˜ä¸å°‘å‘¢ï¼Œè¿™ç§åˆ†å¯¸å°±çœ‹ä¸ªäººçš„æŠŠæ¡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623304229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167122,"user_name":"Zend","can_delete":false,"product_type":"c1","uid":1053921,"ip_address":"","ucode":"80EBB0B6772E27","user_header":"https://static001.geekbang.org/account/avatar/00/10/14/e1/ee5705a2.jpg","comment_is_top":false,"comment_ctime":1577695885,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35937434253","product_id":100040201,"comment_content":"ä»€ä¹ˆæ˜¯æ¡†æ¶<br>æ¡†æ¶å¼å¯¹æŸä¸€ç±»æ¶æ„æ–¹æ¡ˆå¯å¤ç”¨è®¾è®¡ä¸å®ç°<br>Tomcatæ˜¯æ¡†æ¶ï¼Œå®ƒå®Œæˆäº†Webåº”ç”¨è¯·æ±‚å“åº”çš„ä¸»ä½“æµç¨‹ã€‚<br>æ¡†æ¶åº”ç”¨æ»¡è¶³ä¾èµ–å€’ç½®åŸåˆ™<br><br>Webå®¹å™¨ä¸­çš„è®¾è®¡æ¨¡å¼<br>1.ç­–ç•¥æ¨¡å¼<br>ç­–ç•¥æ¥å£ï¼šJ2EEè§„èŒƒå®šä¹‰çš„Servletæ¥å£<br>ç­–ç•¥å®ç°ï¼šæˆ‘ä»¬çœ‹å¼€å‘çš„Servletå…·ä½“ç±»<br>Clientç¨‹åºï¼šTomcat<br>2.æ¨¡æ¿æ–¹æ³•æ¨¡å¼<br>2.1 çˆ¶ç±»ä¸­æŠ½è±¡æ–¹æ³•å®šä¹‰è®¡ç®—çš„éª¨æ¶å’Œè¿‡ç¨‹ï¼ŒæŠ½è±¡æ–¹æ³•çš„å®ç°ç•™åœ¨å­ç±»ã€‚<br>2.2 HttpServlet extends GenericServlet implements Servlert<br>2.3 HttpServletä¸­çš„serviceæ–¹æ³• é’ˆå¯¹ä¸åŒçš„HTTPè¯·æ±‚ç±»å‹è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œ<br>serviceæ–¹æ³•å°±æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ã€‚<br><br>JUnitä¸­çš„è®¾è®¡æ¨¡å¼<br>1.æ¨¡æ¿æ–¹æ³•æ¨¡å¼ æµ‹è¯•ç”¨ä¾‹çš„æ–¹æ³•æ‰§è¡Œé¡ºåºå›ºå®šåœ¨æ¨¡æ¿æ–¹æ³•TestCase.runBare<br>2.æµ‹è¯•å¥—ä»¶TestSuite é‡‡ç”¨ç»„åˆæ¨¡å¼<br>2.1 TestSuite.addTest(TestCase test)<br>2.1 TestSuite.addTest(TestSuite test)","like_count":8},{"had_liked":false,"id":167020,"user_name":"å”äºŒæ¯›","can_delete":false,"product_type":"c1","uid":1597884,"ip_address":"","ucode":"7C16F45165F4BA","user_header":"https://static001.geekbang.org/account/avatar/00/18/61/bc/a656bee7.jpg","comment_is_top":false,"comment_ctime":1577670908,"is_pvip":false,"discussion_count":9,"race_medal":0,"score":"31642441980","product_id":100040201,"comment_content":"æˆ‘æœ‰ä¸ªç–‘æƒ‘ï¼Œé¢è¯•ç»™å‡ºè¿™æ ·ç®€å•çš„ç­”æ¡ˆï¼Œææ€•æ˜¯è¿‡ä¸äº†å…³å§ï¼Ÿ å¸Œæœ›è€å¸ˆçˆ†ç‚¹çœŸæ­£çš„å¹²è´§å‡ºæ¥!","like_count":7,"discussions":[{"author":{"id":1069307,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/fb/872e2cf1.jpg","nickname":"ç§¦å‡¯","note":"","ucode":"523228E55CE480","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":109415,"discussion_content":"æˆ‘è§‰å¾—è€å¸ˆèƒ½æŠŠæ¡†æ¶å’Œæ¨¡å¼è¿™æ ·æŠ½è±¡ã€éš¾æ‡‚çš„æ¦‚å¿µç”¨ç®€å•çš„è¯­è¨€æè¿°å‡ºæ¥å°±å¾ˆå€¼å¾—æˆ‘ä»¬å­¦ä¹ äº†ï¼Œè€å¸ˆåº”è¯¥æ›´å¤šçš„æƒ³ä¼ è¾¾ä¸€ç§æ¡†æ¶æ˜¯å¦‚ä½•å·§å¦™åˆ©ç”¨è®¾è®¡åŸåˆ™å’Œæ¨¡å¼è§£å†³é—®é¢˜çš„æ€æƒ³ï¼Œå¦‚æœèƒ½å¤Ÿç†è§£è¿™ç§æ€æƒ³ï¼Œé‚£ä¹ˆå°±èƒ½å¤Ÿé€šè¿‡è‡ªå·±é˜…è¯»æºç æˆ–è€…å°†è®¾è®¡åŸåˆ™å’Œæ¨¡å¼åº”ç”¨åˆ°è‡ªå·±é¡¹ç›®ä¸­æå‡å¯¹è®¾è®¡åŸåˆ™å’Œæ¨¡å¼çš„ç†è§£ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577692599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":6,"child_discussions":[{"author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"è§‚å¼ˆé“äºº","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1069307,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/fb/872e2cf1.jpg","nickname":"ç§¦å‡¯","note":"","ucode":"523228E55CE480","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":112671,"discussion_content":"æ™ºæ…§è€å¸ˆçš„å†™ä½œé£æ ¼å°±æ˜¯ä¸å¤Ÿå¹²ï¼Œå¤ªå¹²çš„æ„Ÿè§‰æä¸å‡ºæ¥ï¼Œæ¯•ç«Ÿæ˜¯è·¨ä¸“ä¸šçš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577878031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":109415,"ip_address":""},"score":112671,"extra":""},{"author":{"id":1019069,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8c/bd/4895b166.jpg","nickname":"Chelizi","note":"","ucode":"B90CFDB5F7B900","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"è§‚å¼ˆé“äºº","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":236484,"discussion_content":"ä¸è¦éšä¾¿æ‰“æ ‡ç­¾","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587097738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":112671,"ip_address":""},"score":236484,"extra":""},{"author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"è§‚å¼ˆé“äºº","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1019069,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8c/bd/4895b166.jpg","nickname":"Chelizi","note":"","ucode":"B90CFDB5F7B900","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":236535,"discussion_content":"å“¦å“¦ï¼ŒåŸæ¥æ˜¯æ™ºæ…§çš„â€œæ­»å¿ ç²‰â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587100880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":236484,"ip_address":""},"score":236535,"extra":""}]},{"author":{"id":1020525,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","nickname":"escray","note":"","ucode":"1F4204930E47C4","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308709,"discussion_content":"å…¶å®æˆ‘è§‰çš„é¢è¯•çš„æ—¶å€™å¦‚æœèƒ½è¯´å‡ºè¿™äº›å†…å®¹ï¼Œåº”è¯¥å·²ç»è¶³å¤Ÿç”¨äº†ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªä¸“æ é¢å‘çš„åº”è¯¥æ˜¯ 5 å¹´å·¦å³ç»éªŒçš„æŠ€æœ¯äººå‘˜ã€‚\n\nå¦‚æœä¸€å®šè¦å¹²è´§ï¼Œæˆ‘è§‰çš„åªèƒ½æ’¸ä»£ç äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601040164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1597884,"avatar":"https://static001.geekbang.org/account/avatar/00/18/61/bc/a656bee7.jpg","nickname":"å”äºŒæ¯›","note":"","ucode":"7C16F45165F4BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":110777,"discussion_content":"ç†è§£äº†ï¼Œè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577756357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169142,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1578279971,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23053116451","product_id":100040201,"comment_content":"æ¡†æ¶å’Œå·¥å…·ï¼šåº”ç”¨æ¡†æ¶æ˜¯åœ¨åšå®Œå½¢å¡«ç©ºï¼Œåº”ç”¨å·¥å…·æ˜¯åœ¨åšé€‰æ‹©å¡«ç©ºé¢˜ã€‚æ¡†æ¶æŠŠé—®é¢˜å·²ç»ç®€åŒ–äº†ï¼ŒæŠŠå¤§éƒ¨åˆ†éƒ½å¡«ä¸Šäº†ï¼Œåªç•™æœ‰ä¸€äº›æ— æ³•é¢„å¡«å†™çš„çš„åœ°æ–¹ä»¥æ¥å£æˆ–è€…ç±»çš„å½¢å¼æš´éœ²å‡ºæ¥ï¼Œè®©å¼€å‘è€…å¡«ä¸Šã€‚å·¥å…·æä¾›äº†å…·ä½“å‡½æ•°ï¼Œè®©å¼€å‘è€…è°ƒç”¨ï¼Œå·¥å…·çš„è‡ªç”±åº¦ä½“ç°åœ¨å‡½æ•°å‚æ•°ä¸Šã€‚Cè¯­è¨€å†™çš„hello worldç¨‹åºï¼Œä½¿ç”¨mainå‡½æ•°æ˜¯åº”ç”¨æ¡†æ¶ï¼Œè¿™ä¸ªç”±ç³»ç»Ÿè°ƒç”¨ï¼Œæ‰“å°hello worldï¼Œåˆ™æ˜¯åº”ç”¨å·¥å…·ï¼Œå…·ä½“å°±æ˜¯è¾“å‡ºå‡½æ•°å’Œå‚æ•°ã€‚<br>æ¡†æ¶å’Œå·¥å…·ä¸»è¦æ˜¯åº”ç”¨åœºæ™¯ä¸åŒï¼Œä¸€èˆ¬è€Œè¨€ï¼Œå·¥å…·ç›¸å¯¹ç‚¹ï¼Œèƒ½è§£å†³é—®é¢˜ï¼Œè°ƒç”¨æ–¹ä¾¿çš„å·¥å…·å°±æ˜¯å¥½å·¥å…·ã€‚æ¡†æ¶è¦è€ƒè™‘æ–¹æ–¹é¢é¢ï¼Œä¸€æ–¹é¢è¦æœ‰è¶³å¤Ÿçš„è‡ªç”±åº¦ï¼Œè¿™æ ·çš„æ¡†æ¶åŠŸèƒ½æ‰å¼ºå¤§ï¼Œæ¡†æ¶è¿˜è¦ç®€å•æ˜“ç”¨ï¼Œè¿™æ ·æ‰ä½“ç°æ¡†æ¶çš„ä»·å€¼ï¼Œè¿™ä¸¤é¡¹æ¨åˆ°æè‡´ä¸€å®šä¼šçŸ›ç›¾ï¼Œåˆ°æ—¶å€™å¦‚ä½•å–èˆç¡®æ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚","like_count":5},{"had_liked":false,"id":250374,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1601041123,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"18780910307","product_id":100040201,"comment_content":"ä»¥å‰æ²¡æœ‰ä»ç¼–ç¨‹æ¡†æ¶çš„è§’åº¦ç¢ç£¨è¿‡è®¾è®¡æ¨¡å¼ï¼Œæ‰€ä»¥çœ‹äº†ä¸€ä¸‹æ„Ÿè§‰è¿˜æ˜¯æŒºæœ‰å¯å‘çš„ã€‚<br><br>å¯¹äºæ–‡æœ«çš„æ€è€ƒé¢˜ï¼Œæˆ‘æœ‰ç‚¹æ€€ç–‘ Tomcat å’Œ JUnit è¿™æ ·æˆç†Ÿçš„æ¡†æ¶ï¼Œä¼šä¸ä¼šæŠŠ 23 ä¸­è®¾è®¡æ¨¡å¼éƒ½ç”¨è¿‡ä¸€éï¼Ÿè€Œä¸”é‚£äº›å¤§å¸ˆä¹Ÿä¸è¿‡æ˜¯å¿ƒä¸­æ— å‰‘ã€é¡ºæ‰‹ä¸ºä¹‹ã€‚<br><br>å¯èƒ½åè¿‡æ¥ï¼Œè€ƒè™‘ä¸€ä¸‹æœ‰å“ªäº›æ¨¡å¼æ²¡æœ‰ä½¿ç”¨åœ¨ Tomcat å’Œ JUnit ä¸­ä¼šå®¹æ˜“ä¸€äº›ã€‚<br><br>åœ¨ç½‘ç»œä¸Šæœäº†ä¸€ä¸‹ï¼Œæœ‰è®¸ä»¤æ³¢ 2010 å¹´å†™çš„ã€ŠTomcat è®¾è®¡æ¨¡å¼åˆ†æã€‹å’Œåœ£éª‘å£«wind å†™çš„ã€ŠJUnitä¸­çš„è®¾è®¡æ¨¡å¼ã€‹ã€‚<br><br>ç•™è¨€é‡Œé¢æœ‰äººè¯´ä¸“æ çš„å†…å®¹ä¸å¤Ÿâ€œå¹²è´§â€ï¼Œå…¶å®æˆ‘è§‰çš„ä¸ä¸“æ çš„å®šä½æœ‰å…³ï¼Œç»™æˆ‘çš„æ„Ÿè§‰ï¼Œä¸“æ é¢å‘çš„åº”è¯¥æ˜¯ 5 å¹´å·¦å³ç»éªŒçš„æŠ€æœ¯äººå‘˜ã€‚<br><br>çš„ç¡®å¾ˆå¤šå†…å®¹æ˜¯ç‚¹åˆ°ä¸ºæ­¢çš„ï¼Œä½†æ˜¯æˆ‘è§‰çš„ï¼Œå¦‚æœæƒ³è¦å¹²è´§ï¼ŒæŒ‰å›¾ç´¢éª¥ï¼Œåœ¨ç½‘ç»œä¸Šåº”è¯¥å¯ä»¥æ‰¾åˆ°ä¸å°‘ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œææ™ºæ…§è€å¸ˆç»™å‡ºçš„ä¸€äº›ä¾‹å­è¿˜æ˜¯æŒºæœ‰å¯å‘çš„ã€‚","like_count":4},{"had_liked":false,"id":167038,"user_name":"Keep-Moving","can_delete":false,"product_type":"c1","uid":1182631,"ip_address":"","ucode":"76F33C06E07A27","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/a7/6ef32187.jpg","comment_is_top":false,"comment_ctime":1577676109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14462577997","product_id":100040201,"comment_content":"ä¸å†™ä»£ç çš„æ¶æ„å¸ˆä¸æ˜¯å¥½å¸æœº","like_count":3},{"had_liked":false,"id":210166,"user_name":"hz","can_delete":false,"product_type":"c1","uid":1944260,"ip_address":"","ucode":"51708FA35B3F49","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/05nEWFAM4iaVR6Vk9R7lJyT2RLeXuE2mBPBjpn0uXxmwL9C8DnN8lITsmfbBAVvPicp2zvtnhQn5XiaGmSbKdA5Nw/132","comment_is_top":false,"comment_ctime":1587693459,"is_pvip":false,"replies":[{"id":"78346","content":"å¿ƒå¡ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ææ™ºæ…§","uid":"1007349","ctime":1587699115,"ip_address":"","comment_id":210166,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10177628051","product_id":100040201,"comment_content":"æˆ‘éƒ½æ²¡è§è¿‡è¦å†™ä»£ç çš„æ¶æ„å¸ˆ~","like_count":2,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492960,"discussion_content":"å¿ƒå¡ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587699115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205853,"user_name":"cola","can_delete":false,"product_type":"c1","uid":1592162,"ip_address":"","ucode":"82447678A484E1","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/62/3c83b4c1.jpg","comment_is_top":false,"comment_ctime":1586747192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5881714488","product_id":100040201,"comment_content":"å†™çš„å¾ˆä¸é”™","like_count":1},{"had_liked":false,"id":350049,"user_name":"javaå°éœ¸ç‹","can_delete":false,"product_type":"c1","uid":1168540,"ip_address":"","ucode":"7094BCD9F25E1E","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/9c/030e80d3.jpg","comment_is_top":false,"comment_ctime":1656523362,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656523362","product_id":100040201,"comment_content":"éœ€è¦å†ç¿»ç¿»springçš„è®¾è®¡æ¨¡å¼äº†ğŸ˜½","like_count":0},{"had_liked":false,"id":290252,"user_name":"gesanri","can_delete":false,"product_type":"c1","uid":1121174,"ip_address":"","ucode":"AE3B97DC3ED668","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELtOO0HKrj5SI5JSlmwiaCvaF6GLiaTmf5NX88OZaO3HymTAGTeIoicBUjqzmMF6sF5raPFjuqLFibrrw/132","comment_is_top":false,"comment_ctime":1619449073,"is_pvip":false,"replies":[{"id":"105226","content":"ä¸€èˆ¬é€’å½’æ˜¯æŒ‡å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç»„åˆæ¨¡å¼çš„è°ƒç”¨å¹¶ä¸æ˜¯å‡½æ•°è‡ªèº«ï¼šè™½ç„¶éƒ½æ˜¯runï¼Œä½†æ˜¯ç”±äºå¤šæ€çš„å®ç°ä¸åŒï¼Œrunçš„å‡½æ•°ä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚<br>è¿˜æœ‰ï¼Œé€’å½’å‡½æ•°æœ‰ä¸ªæ˜æ˜¾çš„ç‰¹å¾ï¼Œå°±æ˜¯ä¸€å®šéœ€è¦ä¸€ä¸ªé€€å‡ºæ¡ä»¶ï¼›è€Œç»„åˆæ¨¡å¼ä¸éœ€è¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ææ™ºæ…§","uid":"1007349","ctime":1619493697,"ip_address":"","comment_id":290252,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1619449073","product_id":100040201,"comment_content":"ä½¿ç”¨ç»„åˆæ¨¡å¼ï¼Œæ— éœ€é€’å½’ä¹Ÿèƒ½éå†æ ‘è¿™å¥è¯è¯¥æ€ä¹ˆç†è§£ï¼Ÿå°±è¿™ä¸ªä¸¾çš„junitä¾‹å­ï¼Œæˆ‘ç†è§£ç»„åˆæ¨¡å¼ä¾ç„¶æ˜¯ç”¨çš„é€’å½’ï¼Œé€’å½’è°ƒç”¨runæ–¹æ³•","like_count":0,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519148,"discussion_content":"ä¸€èˆ¬é€’å½’æ˜¯æŒ‡å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç»„åˆæ¨¡å¼çš„è°ƒç”¨å¹¶ä¸æ˜¯å‡½æ•°è‡ªèº«ï¼šè™½ç„¶éƒ½æ˜¯runï¼Œä½†æ˜¯ç”±äºå¤šæ€çš„å®ç°ä¸åŒï¼Œrunçš„å‡½æ•°ä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚\nè¿˜æœ‰ï¼Œé€’å½’å‡½æ•°æœ‰ä¸ªæ˜æ˜¾çš„ç‰¹å¾ï¼Œå°±æ˜¯ä¸€å®šéœ€è¦ä¸€ä¸ªé€€å‡ºæ¡ä»¶ï¼›è€Œç»„åˆæ¨¡å¼ä¸éœ€è¦ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619493697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1518310,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2a/e6/c788257f.jpg","nickname":"geek_arong2048","note":"","ucode":"AB575BE100E4A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385273,"discussion_content":"ç›¸å½“äºç”¨çš„è¿­ä»£çš„æ–¹å¼è¿›è¡Œéå†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626962245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}