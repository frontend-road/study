{"id":18046,"title":"22 | HotSpotè™šæ‹Ÿæœºçš„intrinsic","content":"<p>å‰ä¸ä¹…ï¼Œæœ‰åŒå­¦é—®æˆ‘ï¼Œ<code>String.indexOf</code>æ–¹æ³•å’Œè‡ªå·±å®ç°çš„<code>indexOf</code>æ–¹æ³•åœ¨å­—èŠ‚ç å±‚é¢ä¸Šå·®ä¸å¤šï¼Œä¸ºä»€ä¹ˆæ‰§è¡Œæ•ˆç‡å´æœ‰å¤©å£¤ä¹‹åˆ«å‘¢ï¼Ÿä»Šå¤©æˆ‘ä»¬å°±æ¥çœ‹ä¸€çœ‹ã€‚</p>\n<pre><code>public int indexOf(String str) {\n    if (coder() == str.coder()) {\n        return isLatin1() ? StringLatin1.indexOf(value, str.value)\n                          : StringUTF16.indexOf(value, str.value);\n    }\n    if (coder() == LATIN1) {  // str.coder == UTF16\n        return -1;\n    }\n    return StringUTF16.indexOfLatin1(value, str.value);\n}\n</code></pre>\n<p>ä¸ºäº†è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥è¯»ä¸€ä¸‹<code>String.indexOf</code>æ–¹æ³•çš„æºä»£ç ï¼ˆä¸Šé¢çš„ä»£ç æˆªå–è‡ªJava 10.0.2ï¼‰ã€‚</p>\n<blockquote>\n<p>åœ¨Java 9ä¹‹å‰ï¼Œå­—ç¬¦ä¸²æ˜¯ç”¨charæ•°ç»„æ¥å­˜å‚¨çš„ï¼Œä¸»è¦ä¸ºäº†æ”¯æŒéè‹±æ–‡å­—ç¬¦ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°Javaç¨‹åºä¸­çš„å­—ç¬¦ä¸²éƒ½æ˜¯ç”±Latin1å­—ç¬¦ç»„æˆçš„ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå­—ç¬¦ä»…éœ€å æ®ä¸€ä¸ªå­—èŠ‚ï¼Œè€Œä½¿ç”¨charæ•°ç»„çš„å­˜å‚¨æ–¹å¼å°†æå¤§åœ°æµªè´¹å†…å­˜ç©ºé—´ã€‚</p>\n<p>Java 9å¼•å…¥äº†Compact Strings[1]çš„æ¦‚å¿µï¼Œå½“å­—ç¬¦ä¸²ä»…åŒ…å«Latin1å­—ç¬¦æ—¶ï¼Œä½¿ç”¨ä¸€ä¸ªå­—èŠ‚ä»£è¡¨ä¸€ä¸ªå­—ç¬¦çš„ç¼–ç æ ¼å¼ï¼Œä½¿å¾—å†…å­˜ä½¿ç”¨æ•ˆç‡å¤§å¤§æé«˜ã€‚</p>\n</blockquote>\n<p>å‡è®¾æˆ‘ä»¬è°ƒç”¨<code>String.indexOf</code>æ–¹æ³•çš„è°ƒç”¨è€…ä»¥åŠå‚æ•°å‡ä¸ºåªåŒ…å«Latin1å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•çš„å…³é”®åœ¨äºå¯¹<code>StringLatin1.indexOf</code>æ–¹æ³•çš„è°ƒç”¨ã€‚</p>\n<p>ä¸‹é¢æˆ‘åˆ—ä¸¾äº†<code>StringLatin1.indexOf</code>æ–¹æ³•çš„æºä»£ç ã€‚ä½ ä¼šå‘ç°ï¼Œå®ƒå¹¶æ²¡æœ‰ä½¿ç”¨ç‰¹åˆ«é«˜æ˜çš„ç®—æ³•ï¼Œå”¯ä¸€å€¼å¾—æ³¨æ„çš„ä¾¿æ˜¯æ–¹æ³•å£°æ˜å‰çš„<code>@HotSpotIntrinsicCandidate</code>æ³¨è§£ã€‚</p><!-- [[[read_end]]] -->\n<pre><code>@HotSpotIntrinsicCandidate\npublic static int indexOf(byte[] value, byte[] str) {\n    if (str.length == 0) {\n        return 0;\n    }\n    if (value.length == 0) {\n        return -1;\n    }\n    return indexOf(value, value.length, str, str.length, 0);\n}\n\n@HotSpotIntrinsicCandidate\npublic static int indexOf(byte[] value, int valueCount, byte[] str, int strCount, int fromIndex) {\n    byte first = str[0];\n    int max = (valueCount - strCount);\n    for (int i = fromIndex; i &lt;= max; i++) {\n        // Look for first character.\n        if (value[i] != first) {\n            while (++i &lt;= max &amp;&amp; value[i] != first);\n        }\n        // Found first character, now look at the rest of value\n        if (i &lt;= max) {\n            int j = i + 1;\n            int end = j + strCount - 1;\n            for (int k = 1; j &lt; end &amp;&amp; value[j] == str[k]; j++, k++);\n            if (j == end) {\n                // Found whole string.\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n</code></pre>\n<p>åœ¨HotSpotè™šæ‹Ÿæœºä¸­ï¼Œæ‰€æœ‰è¢«è¯¥æ³¨è§£æ ‡æ³¨çš„æ–¹æ³•éƒ½æ˜¯HotSpot intrinsicã€‚å¯¹è¿™äº›æ–¹æ³•çš„è°ƒç”¨ï¼Œä¼šè¢«HotSpotè™šæ‹Ÿæœºæ›¿æ¢æˆé«˜æ•ˆçš„æŒ‡ä»¤åºåˆ—ã€‚è€ŒåŸæœ¬çš„æ–¹æ³•å®ç°åˆ™ä¼šè¢«å¿½ç•¥æ‰ã€‚</p>\n<p>æ¢å¥è¯è¯´ï¼ŒHotSpotè™šæ‹Ÿæœºå°†ä¸ºæ ‡æ³¨äº†<code>@HotSpotIntrinsicCandidate</code>æ³¨è§£çš„æ–¹æ³•é¢å¤–ç»´æŠ¤ä¸€å¥—é«˜æ•ˆå®ç°ã€‚å¦‚æœJavaæ ¸å¿ƒç±»åº“çš„å¼€å‘è€…æ›´æ”¹äº†åŸæœ¬çš„å®ç°ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºä¸­çš„é«˜æ•ˆå®ç°ä¹Ÿéœ€è¦è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ï¼Œä»¥ä¿è¯ç¨‹åºè¯­ä¹‰ä¸€è‡´ã€‚</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶ä»–è™šæ‹Ÿæœºæœªå¿…ç»´æŠ¤äº†è¿™äº›intrinsicçš„é«˜æ•ˆå®ç°ï¼Œå®ƒä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨åŸæœ¬çš„è¾ƒä¸ºä½æ•ˆçš„JDKä»£ç ã€‚åŒæ ·ï¼Œä¸åŒç‰ˆæœ¬çš„HotSpotè™šæ‹Ÿæœºæ‰€å®ç°çš„intrinsicæ•°é‡ä¹Ÿå¤§ä¸ç›¸åŒã€‚é€šå¸¸è¶Šæ–°ç‰ˆæœ¬çš„Javaï¼Œå…¶intrinsicæ•°é‡è¶Šå¤šã€‚</p>\n<p>ä½ æˆ–è®¸ä¼šäº§ç”Ÿè¿™ä¹ˆä¸€ä¸ªç–‘é—®ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨æºä»£ç ä¸­ä½¿ç”¨è¿™äº›é«˜æ•ˆå®ç°å‘¢ï¼Ÿ</p>\n<p>è¿™æ˜¯å› ä¸ºé«˜æ•ˆå®ç°é€šå¸¸ä¾èµ–äºå…·ä½“çš„CPUæŒ‡ä»¤ï¼Œè€Œè¿™äº›CPUæŒ‡ä»¤ä¸å¥½åœ¨Javaæºç¨‹åºä¸­è¡¨è¾¾ã€‚å†è€…ï¼Œæ¢äº†ä¸€ä¸ªä½“ç³»æ¶æ„ï¼Œè¯´ä¸å®šå°±æ²¡æœ‰å¯¹åº”çš„CPUæŒ‡ä»¤ï¼Œä¹Ÿå°±æ— æ³•è¿›è¡Œintrinsicä¼˜åŒ–äº†ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬ä¾¿æ¥çœ‹å‡ ä¸ªå…·ä½“çš„ä¾‹å­ã€‚</p>\n<h2>intrinsicä¸CPUæŒ‡ä»¤</h2>\n<p>åœ¨æ–‡ç« å¼€å¤´çš„ä¾‹å­ä¸­ï¼Œ<code>StringLatin1.indexOf</code>æ–¹æ³•å°†åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆbyteæ•°ç»„ï¼‰ä¸­æŸ¥æ‰¾å¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆbyteæ•°ç»„ï¼‰ï¼Œå¹¶ä¸”è¿”å›å‘½ä¸­æ—¶çš„ç´¢å¼•å€¼ï¼Œæˆ–è€…-1ï¼ˆæœªå‘½ä¸­ï¼‰ã€‚</p>\n<p>â€œæ°å·§â€çš„æ˜¯ï¼ŒX86_64ä½“ç³»æ¶æ„çš„SSE4.2æŒ‡ä»¤é›†å°±åŒ…å«ä¸€æ¡æŒ‡ä»¤PCMPESTRIï¼Œè®©å®ƒèƒ½å¤Ÿåœ¨16å­—èŠ‚ä»¥ä¸‹çš„å­—ç¬¦ä¸²ä¸­ï¼ŒæŸ¥æ‰¾å¦ä¸€ä¸ª16å­—èŠ‚ä»¥ä¸‹çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è¿”å›å‘½ä¸­æ—¶çš„ç´¢å¼•å€¼ã€‚</p>\n<p>å› æ­¤ï¼ŒHotSpotè™šæ‹Ÿæœºä¾¿å›´ç»•ç€è¿™ä¸€æŒ‡ä»¤ï¼Œå¼€å‘å‡ºX86_64ä½“ç³»æ¶æ„ä¸Šçš„é«˜æ•ˆå®ç°ï¼Œå¹¶æ›¿æ¢åŸæœ¬å¯¹<code>StringLatin1.indexOf</code>æ–¹æ³•çš„è°ƒç”¨ã€‚</p>\n<p>å¦å¤–ä¸€ä¸ªä¾‹å­åˆ™æ˜¯æ•´æ•°åŠ æ³•çš„æº¢å‡ºå¤„ç†ã€‚ä¸€èˆ¬æˆ‘ä»¬åœ¨åšæ•´æ•°åŠ æ³•æ—¶ï¼Œéœ€è¦è€ƒè™‘ç»“æœæ˜¯å¦ä¼šæº¢å‡ºï¼Œå¹¶ä¸”åœ¨æº¢å‡ºçš„æƒ…å†µä¸‹ä½œå‡ºç›¸åº”çš„å¤„ç†ï¼Œä»¥ä¿è¯ç¨‹åºçš„æ­£ç¡®æ€§ã€‚</p>\n<p>Javaæ ¸å¿ƒç±»åº“æä¾›äº†ä¸€ä¸ª<code>Math.addExact</code>æ–¹æ³•ã€‚å®ƒå°†æ¥æ”¶ä¸¤ä¸ªintå€¼ï¼ˆæˆ–longå€¼ï¼‰ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›è¿™ä¸¤ä¸ªintå€¼çš„å’Œã€‚å½“è¿™ä¸¤ä¸ªintå€¼ä¹‹å’Œæº¢å‡ºæ—¶ï¼Œè¯¥æ–¹æ³•å°†æŠ›å‡º<code>ArithmeticException</code>å¼‚å¸¸ã€‚</p>\n<pre><code>@HotSpotIntrinsicCandidate\npublic static int addExact(int x, int y) {\n    int r = x + y;\n    // HD 2-12 Overflow iff both arguments have the opposite sign of the result\n    if (((x ^ r) &amp; (y ^ r)) &lt; 0) {\n        throw new ArithmeticException(&quot;integer overflow&quot;);\n    }\n    return r;\n}\n</code></pre>\n<p>åœ¨Javaå±‚é¢åˆ¤æ–­intå€¼ä¹‹å’Œæ˜¯å¦æº¢å‡ºæ¯”è¾ƒè´¹äº‹ã€‚æˆ‘ä»¬éœ€è¦åˆ†åˆ«æ¯”è¾ƒä¸¤ä¸ªintå€¼ä¸å®ƒä»¬çš„å’Œçš„ç¬¦å·æ˜¯å¦ä¸åŒã€‚å¦‚æœéƒ½ä¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿è®¤ä¸ºè¿™ä¸¤ä¸ªintå€¼ä¹‹å’Œæº¢å‡ºã€‚å¯¹åº”çš„å®ç°ä¾¿æ˜¯ä¸¤ä¸ªå¼‚æˆ–æ“ä½œï¼Œä¸€ä¸ªä¸æ“ä½œï¼Œä»¥åŠä¸€ä¸ªæ¯”è¾ƒæ“ä½œã€‚</p>\n<p>åœ¨X86_64ä½“ç³»æ¶æ„ä¸­ï¼Œå¤§éƒ¨åˆ†è®¡ç®—æŒ‡ä»¤éƒ½ä¼šæ›´æ–°çŠ¶æ€å¯„å­˜å™¨ï¼ˆFLAGS registerï¼‰ï¼Œå…¶ä¸­å°±æœ‰è¡¨ç¤ºæŒ‡ä»¤ç»“æœæ˜¯å¦æº¢å‡ºçš„æº¢å‡ºæ ‡è¯†ä½ï¼ˆoverflow flagï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€åœ¨åŠ æ³•æŒ‡ä»¤ä¹‹åæ¯”è¾ƒæº¢å‡ºæ ‡å¿—ä½ï¼Œä¾¿å¯ä»¥çŸ¥é“intå€¼ä¹‹å’Œæ˜¯å¦æº¢å‡ºäº†ã€‚å¯¹åº”çš„ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code>public static int addExact(int x, int y) {\n    int r = x + y;\n    jo LABEL_OVERFLOW; // jump if overflow flag set\n    return r;\n    LABEL_OVERFLOW:\n      throw new ArithmeticException(&quot;integer overflow&quot;);\n      // or deoptimize\n}\n</code></pre>\n<p>æœ€åä¸€ä¸ªä¾‹å­åˆ™æ˜¯<code>Integer.bitCount</code>æ–¹æ³•ï¼Œå®ƒå°†ç»Ÿè®¡æ‰€è¾“å…¥çš„intå€¼çš„äºŒè¿›åˆ¶å½¢å¼ä¸­æœ‰å¤šå°‘ä¸ª1ã€‚</p>\n<pre><code>@HotSpotIntrinsicCandidate\npublic static int bitCount(int i) {\n    // HD, Figure 5-2\n    i = i - ((i &gt;&gt;&gt; 1) &amp; 0x55555555);\n    i = (i &amp; 0x33333333) + ((i &gt;&gt;&gt; 2) &amp; 0x33333333);\n    i = (i + (i &gt;&gt;&gt; 4)) &amp; 0x0f0f0f0f;\n    i = i + (i &gt;&gt;&gt; 8);\n    i = i + (i &gt;&gt;&gt; 16);\n    return i &amp; 0x3f;\n}\n</code></pre>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>Integer.bitCount</code>æ–¹æ³•çš„å®ç°è¿˜æ˜¯å¾ˆå·§å¦™çš„ï¼Œä½†æ˜¯å®ƒéœ€è¦çš„è®¡ç®—æ­¥éª¤ä¹Ÿæ¯”è¾ƒå¤šã€‚åœ¨X86_64ä½“ç³»æ¶æ„ä¸­ï¼Œæˆ‘ä»¬ä»…éœ€è¦ä¸€æ¡æŒ‡ä»¤<code>popcnt</code>ï¼Œä¾¿å¯ä»¥ç›´æ¥ç»Ÿè®¡å‡ºintå€¼ä¸­1çš„ä¸ªæ•°ã€‚</p>\n<h2>intrinsicä¸æ–¹æ³•å†…è”</h2>\n<p>HotSpotè™šæ‹Ÿæœºä¸­ï¼Œintrinsicçš„å®ç°æ–¹å¼åˆ†ä¸ºä¸¤ç§ã€‚</p>\n<p>ä¸€ç§æ˜¯ç‹¬ç«‹çš„æ¡©ç¨‹åºã€‚å®ƒæ—¢å¯ä»¥è¢«è§£é‡Šæ‰§è¡Œå™¨åˆ©ç”¨ï¼Œç›´æ¥æ›¿æ¢å¯¹åŸæ–¹æ³•çš„è°ƒç”¨ï¼›ä¹Ÿå¯ä»¥è¢«å³æ—¶ç¼–è¯‘å™¨æ‰€åˆ©ç”¨ï¼Œå®ƒæŠŠä»£è¡¨å¯¹åŸæ–¹æ³•çš„è°ƒç”¨çš„IRèŠ‚ç‚¹ï¼Œæ›¿æ¢ä¸ºå¯¹è¿™äº›æ¡©ç¨‹åºçš„è°ƒç”¨çš„IRèŠ‚ç‚¹ã€‚ä»¥è¿™ç§å½¢å¼å®ç°çš„intrinsicæ¯”è¾ƒå°‘ï¼Œä¸»è¦åŒ…æ‹¬<code>Math</code>ç±»ä¸­çš„ä¸€äº›æ–¹æ³•ã€‚</p>\n<p>å¦ä¸€ç§åˆ™æ˜¯ç‰¹æ®Šçš„ç¼–è¯‘å™¨IRèŠ‚ç‚¹ã€‚æ˜¾ç„¶ï¼Œè¿™ç§å®ç°æ–¹å¼ä»…èƒ½å¤Ÿè¢«å³æ—¶ç¼–è¯‘å™¨æ‰€åˆ©ç”¨ã€‚</p>\n<p>åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå³æ—¶ç¼–è¯‘å™¨ä¼šå°†å¯¹åŸæ–¹æ³•çš„è°ƒç”¨çš„IRèŠ‚ç‚¹ï¼Œæ›¿æ¢æˆç‰¹æ®Šçš„IRèŠ‚ç‚¹ï¼Œå¹¶å‚ä¸æ¥ä¸‹æ¥çš„ä¼˜åŒ–è¿‡ç¨‹ã€‚æœ€ç»ˆï¼Œå³æ—¶ç¼–è¯‘å™¨çš„åç«¯å°†æ ¹æ®è¿™äº›ç‰¹æ®Šçš„IRèŠ‚ç‚¹ï¼Œç”ŸæˆæŒ‡å®šçš„CPUæŒ‡ä»¤ã€‚å¤§éƒ¨åˆ†çš„intrinsicéƒ½æ˜¯é€šè¿‡è¿™ç§æ–¹å¼å®ç°çš„ã€‚</p>\n<p>è¿™ä¸ªæ›¿æ¢è¿‡ç¨‹æ˜¯åœ¨æ–¹æ³•å†…è”æ—¶è¿›è¡Œçš„ã€‚å½“å³æ—¶ç¼–è¯‘å™¨ç¢°åˆ°æ–¹æ³•è°ƒç”¨èŠ‚ç‚¹æ—¶ï¼Œå®ƒå°†æŸ¥è¯¢ç›®æ ‡æ–¹æ³•æ˜¯ä¸æ˜¯intrinsicã€‚</p>\n<p>å¦‚æœæ˜¯ï¼Œåˆ™æ’å…¥ç›¸åº”çš„ç‰¹æ®ŠIRèŠ‚ç‚¹ï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ™è¿›è¡ŒåŸæœ¬çš„å†…è”å·¥ä½œã€‚ï¼ˆå³åˆ¤æ–­æ˜¯å¦éœ€è¦å†…è”ç›®æ ‡æ–¹æ³•çš„æ–¹æ³•ä½“ï¼Œå¹¶åœ¨éœ€è¦å†…è”çš„æƒ…å†µä¸‹ï¼Œå°†ç›®æ ‡æ–¹æ³•çš„IRå›¾çº³å…¥å½“å‰çš„ç¼–è¯‘èŒƒå›´ä¹‹ä¸­ã€‚ï¼‰</p>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ–¹æ³•è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•æ˜¯intrinsicï¼Œé‚£ä¹ˆå³æ—¶ç¼–è¯‘å™¨ä¼šç›´æ¥å¿½ç•¥åŸç›®æ ‡æ–¹æ³•çš„å­—èŠ‚ç ï¼Œç”šè‡³æ ¹æœ¬ä¸åœ¨ä¹åŸç›®æ ‡æ–¹æ³•æ˜¯å¦æœ‰å­—èŠ‚ç ã€‚å³ä¾¿æ˜¯nativeæ–¹æ³•ï¼Œåªè¦å®ƒè¢«æ ‡è®°ä¸ºintrinsicï¼Œå³æ—¶ç¼–è¯‘å™¨ä¾¿èƒ½å¤Ÿå°†ä¹‹&quot;å†…è”&quot;è¿›æ¥ï¼Œå¹¶æ’å…¥ç‰¹æ®Šçš„IRèŠ‚ç‚¹ã€‚</p>\n<p>äº‹å®ä¸Šï¼Œä¸å°‘è¢«æ ‡è®°ä¸ºintrinsicçš„æ–¹æ³•éƒ½æ˜¯nativeæ–¹æ³•ã€‚åŸæœ¬å¯¹è¿™äº›nativeæ–¹æ³•çš„è°ƒç”¨éœ€è¦ç»è¿‡JNIï¼ˆJava Native Interfaceï¼‰ï¼Œå…¶æ€§èƒ½å¼€é”€ååˆ†å·¨å¤§ã€‚ä½†æ˜¯ï¼Œç»è¿‡å³æ—¶ç¼–è¯‘å™¨çš„intrinsicä¼˜åŒ–ä¹‹åï¼Œè¿™éƒ¨åˆ†JNIå¼€é”€ä¾¿ç›´æ¥æ¶ˆå¤±ä¸è§ï¼Œå¹¶ä¸”æœ€ç»ˆçš„ç»“æœä¹Ÿååˆ†é«˜æ•ˆã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>Thread.currentThread</code>æ–¹æ³•æ¥è·å–å½“å‰çº¿ç¨‹ã€‚è¿™æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªHotSpot intrinsicã€‚åœ¨X86_64ä½“ç³»æ¶æ„ä¸­ï¼ŒR13å¯„å­˜å™¨å­˜æ”¾ç€å½“å‰çº¿ç¨‹çš„æŒ‡é’ˆã€‚å› æ­¤ï¼Œå¯¹è¯¥æ–¹æ³•çš„è°ƒç”¨å°†è¢«å³æ—¶ç¼–è¯‘å™¨æ›¿æ¢ä¸ºä¸€ä¸ªç‰¹æ®ŠIRèŠ‚ç‚¹ï¼Œå¹¶æœ€ç»ˆç”Ÿæˆè¯»å–R13å¯„å­˜å™¨æŒ‡ä»¤ã€‚</p>\n<h2>å·²æœ‰intrinsicç®€ä»‹</h2>\n<p>æœ€æ–°ç‰ˆæœ¬çš„HotSpotè™šæ‹Ÿæœºå®šä¹‰äº†ä¸‰ç™¾å¤šä¸ªintrinsicã€‚</p>\n<p>åœ¨è¿™ä¸‰ç™¾å¤šä¸ªintrinsicä¸­ï¼Œæœ‰ä¸‰æˆä»¥ä¸Šæ˜¯<code>Unsafe</code>ç±»çš„æ–¹æ³•ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥ä½¿ç”¨<code>Unsafe</code>ç±»çš„æ–¹æ³•ï¼Œè€Œæ˜¯é€šè¿‡<code>java.util.concurrent</code>åŒ…æ¥é—´æ¥ä½¿ç”¨ã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼Œ<code>Unsafe</code>ç±»ä¸­ç»å¸¸ä¼šè¢«ç”¨åˆ°çš„ä¾¿æ˜¯<code>compareAndSwap</code>æ–¹æ³•ï¼ˆJava 9+æ›´åä¸º<code>compareAndSet</code>æˆ–<code>compareAndExchange</code>æ–¹æ³•ï¼‰ã€‚åœ¨X86_64ä½“ç³»æ¶æ„ä¸­ï¼Œå¯¹è¿™äº›æ–¹æ³•çš„è°ƒç”¨å°†è¢«æ›¿æ¢ä¸º<code>lock cmpxchg</code>æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯åŸå­æ€§æ›´æ–°æŒ‡ä»¤ã€‚</p>\n<p>é™¤äº†<code>Unsafe</code>ç±»çš„æ–¹æ³•ä¹‹å¤–ï¼ŒHotSpotè™šæ‹Ÿæœºä¸­çš„intrinsicè¿˜åŒ…æ‹¬ä¸‹é¢çš„å‡ ç§ã€‚</p>\n<ol>\n<li><code>StringBuilder</code>å’Œ<code>StringBuffer</code>ç±»çš„æ–¹æ³•ã€‚HotSpotè™šæ‹Ÿæœºå°†ä¼˜åŒ–åˆ©ç”¨è¿™äº›æ–¹æ³•æ„é€ å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œä»¥å°½é‡å‡å°‘éœ€è¦å¤åˆ¶å†…å­˜çš„æƒ…å†µã€‚</li>\n<li><code>String</code>ç±»ã€<code>StringLatin1</code>ç±»ã€<code>StringUTF16</code>ç±»å’Œ<code>Arrays</code>ç±»çš„æ–¹æ³•ã€‚HotSpotè™šæ‹Ÿæœºå°†ä½¿ç”¨SIMDæŒ‡ä»¤ï¼ˆsingle instruction multiple dataï¼Œå³ç”¨ä¸€æ¡æŒ‡ä»¤å¤„ç†å¤šä¸ªæ•°æ®ï¼‰å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œä¼˜åŒ–ã€‚<br />\nä¸¾ä¸ªä¾‹å­ï¼Œ<code>Arrays.equals(byte[], byte[])</code>æ–¹æ³•åŸæœ¬æ˜¯é€ä¸ªå­—èŠ‚æ¯”è¾ƒï¼Œåœ¨ä½¿ç”¨äº†SIMDæŒ‡ä»¤ä¹‹åï¼Œå¯ä»¥æ”¾å…¥16å­—èŠ‚çš„XMMå¯„å­˜å™¨ä¸­ï¼ˆç”šè‡³æ˜¯64å­—èŠ‚çš„ZMMå¯„å­˜å™¨ä¸­ï¼‰æ‰¹é‡æ¯”è¾ƒã€‚</li>\n<li>åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»ã€<code>Object</code>ç±»ã€<code>Math</code>ç±»ã€<code>System</code>ç±»ä¸­å„ä¸ªåŠŸèƒ½æ€§æ–¹æ³•ï¼Œåå°„APIã€<code>MethodHandle</code>ç±»ä¸­ä¸è°ƒç”¨æœºåˆ¶ç›¸å…³çš„æ–¹æ³•ï¼Œå‹ç¼©ã€åŠ å¯†ç›¸å…³æ–¹æ³•ã€‚è¿™éƒ¨åˆ†intrinsicåˆ™æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†å±•å¼€äº†ã€‚å¦‚æœä½ æœ‰æ„Ÿå…´è¶£çš„ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥é˜…èµ„æ–™ï¼Œæˆ–è€…åœ¨æ–‡æœ«ç•™è¨€ã€‚</li>\n</ol>\n<p>å¦‚æœä½ æƒ³çŸ¥é“HotSpotè™šæ‹Ÿæœºå®šä¹‰çš„æ‰€æœ‰intrinsicï¼Œé‚£ä¹ˆä½ å¯ä»¥ç›´æ¥æŸ¥é˜…OpenJDKä»£ç [2]ã€‚ï¼ˆè¯¥é“¾æ¥æ˜¯Java 12çš„intrinsicåˆ—è¡¨ã€‚Java 8çš„intrinsicåˆ—è¡¨å¯ä»¥æŸ¥é˜…è¿™ä¸€é“¾æ¥[3]ã€‚ï¼‰</p>\n<h2>æ€»ç»“ä¸å®è·µ</h2>\n<p>ä»Šå¤©æˆ‘ä»‹ç»äº†HotSpotè™šæ‹Ÿæœºä¸­çš„intrinsicã€‚</p>\n<p>HotSpotè™šæ‹Ÿæœºå°†å¯¹æ ‡æ³¨äº†<code>@HotSpotIntrinsicCandidate</code>æ³¨è§£çš„æ–¹æ³•çš„è°ƒç”¨ï¼Œæ›¿æ¢ä¸ºç›´æ¥ä½¿ç”¨åŸºäºç‰¹å®šCPUæŒ‡ä»¤çš„é«˜æ•ˆå®ç°ã€‚è¿™äº›æ–¹æ³•æˆ‘ä»¬ä¾¿ç§°ä¹‹ä¸ºintrinsicã€‚</p>\n<p>å…·ä½“æ¥è¯´ï¼Œintrinsicçš„å®ç°æœ‰ä¸¤ç§ã€‚ä¸€æ˜¯ä¸å¤§å¸¸è§çš„æ¡©ç¨‹åºï¼Œå¯ä»¥åœ¨è§£é‡Šæ‰§è¡Œæˆ–è€…å³æ—¶ç¼–è¯‘ç”Ÿæˆçš„ä»£ç ä¸­ä½¿ç”¨ã€‚äºŒæ˜¯ç‰¹æ®Šçš„IRèŠ‚ç‚¹ã€‚å³æ—¶ç¼–è¯‘å™¨å°†åœ¨æ–¹æ³•å†…è”è¿‡ç¨‹ä¸­ï¼Œå°†å¯¹intrinsicçš„è°ƒç”¨æ›¿æ¢ä¸ºè¿™äº›ç‰¹æ®Šçš„IRèŠ‚ç‚¹ï¼Œå¹¶æœ€ç»ˆç”ŸæˆæŒ‡å®šçš„CPUæŒ‡ä»¤ã€‚</p>\n<p>HotSpotè™šæ‹Ÿæœºå®šä¹‰äº†ä¸‰ç™¾å¤šä¸ªintrinsicã€‚å…¶ä¸­æ¯”è¾ƒç‰¹æ®Šçš„æœ‰<code>Unsafe</code>ç±»çš„æ–¹æ³•ï¼ŒåŸºæœ¬ä¸Šä½¿ç”¨java.util.concurrentåŒ…ä¾¿ä¼šé—´æ¥ä½¿ç”¨åˆ°<code>Unsafe</code>ç±»çš„intrinsicã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ<code>String</code>ç±»å’Œ<code>Arrays</code>ç±»ä¸­çš„intrinsicä¹Ÿæ¯”è¾ƒç‰¹æ®Šã€‚å³æ—¶ç¼–è¯‘å™¨å°†ä¸ºä¹‹ç”Ÿæˆéå¸¸é«˜æ•ˆçš„SIMDæŒ‡ä»¤ã€‚</p>\n<p>ä»Šå¤©çš„å®è·µç¯èŠ‚ï¼Œä½ å¯ä»¥ä½“éªŒä¸€ä¸‹<code>Integer.bitCount</code> intrinsicå¸¦æ¥çš„æ€§èƒ½æå‡ã€‚</p>\n<pre><code>// time java Foo\npublic class Foo {\n  public static int bitCount(int i) {\n    // HD, Figure 5-2\n    i = i - ((i &gt;&gt;&gt; 1) &amp; 0x55555555);\n    i = (i &amp; 0x33333333) + ((i &gt;&gt;&gt; 2) &amp; 0x33333333);\n    i = (i + (i &gt;&gt;&gt; 4)) &amp; 0x0f0f0f0f;\n    i = i + (i &gt;&gt;&gt; 8);\n    i = i + (i &gt;&gt;&gt; 16);\n    return i &amp; 0x3f;\n  }\n  public static void main(String[] args) {\n    int sum = 0;\n    for (int i = Integer.MIN_VALUE; i &lt; Integer.MAX_VALUE; i++) {\n      sum += bitCount(i); // In a second run, replace with Integer.bitCount\n    }\n    System.out.println(sum);\n  }\n}\n</code></pre>\n<p>[1] <a href=\"http://openjdk.java.net/jeps/254\">http://openjdk.java.net/jeps/254</a><br />\n[2] <a href=\"http://hg.openjdk.java.net/jdk/hs/file/46dc568d6804/src/hotspot/share/classfile/vmSymbols.hpp#l727\">http://hg.openjdk.java.net/jdk/hs/file/46dc568d6804/src/hotspot/share/classfile/vmSymbols.hpp#l727</a><br />\n[3] <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/2af8917ffbee/src/share/vm/classfile/vmSymbols.hpp#l647\">http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/2af8917ffbee/src/share/vm/classfile/vmSymbols.hpp#l647</a></p>\n<p></p>\n","comments":[{"had_liked":false,"id":23672,"user_name":"^_^","can_delete":false,"product_type":"c1","uid":1126043,"ip_address":"","ucode":"F6168A4333D940","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/9b/84370b68.jpg","comment_is_top":false,"comment_ctime":1536582697,"is_pvip":false,"replies":[{"id":"8722","content":"å¤šè°¢æ”¯æŒï¼","user_name":"ä½œè€…å›å¤","comment_id":23672,"uid":"1176688","ip_address":"","utype":1,"ctime":1536680114,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"74551026729","product_id":100010301,"comment_content":"æˆ‘ä¸ªäººè§‰å¾—è€å¸ˆè®²çš„éå¸¸å¥½ï¼Œè¿™äº›ä¸œè¥¿æ›´åƒæ˜¯è®²è§£ä¸€ä¸ªç³»ç»Ÿä¼¼çš„ï¼Œè®©æˆ‘ä»¬æ›´æ‡‚ä»–ä»¬çš„è¿è¡Œæœºåˆ¶ï¼Œæ¨ç®—å‡ºæˆ‘ä»¬ç³»ç»Ÿæ¯ä¸ªç±»ã€æ–¹æ³•å’Œå±æ€§åœ¨jvmä¸Šçš„è¿ä½œæ¨¡å¼ã€‚è¿™è¯¾ç¨‹çœŸçš„å¯¹äºæˆ‘ä»¬javaå¼€å‘çš„çœŸçš„æ˜¯å¤ªæœ‰å¸®åŠ©äº†ï¼Œä¸æƒ³æŸæŸäº›è¯¾ç¨‹å ç€å®è·µç»éªŒçš„åä¹‰æ··ã€‚æ„Ÿè°¢è€å¸ˆè¾›è‹¦å•¦ï¼","like_count":17,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423671,"discussion_content":"å¤šè°¢æ”¯æŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536680114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144720,"user_name":"éšå¿ƒè€Œè‡³","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1572009165,"is_pvip":false,"replies":[{"id":"66456","content":"å¯¹çš„ï¼Œè®¸å¤šintrinsics éƒ½ä¼šä¾èµ–ç‰¹æ®Šçš„CPUæŒ‡ä»¤æ¥ä¼˜åŒ–æ‰§è¡Œæ•ˆç‡çš„ã€‚<br><br>è¯´ä¸ªè¶£é—»ï¼ŒIntelæ›¾ç»å‘OpenJDKæäº¤äº†ä¸€å¤§å †æµ®ç‚¹æ•°ç®—æ³•ä½œä¸ºjava.lang.Mathä¸­éƒ¨åˆ†æ–¹æ³•çš„intrinsicï¼Œæ¯”å¦‚sin cosè¿™äº›ï¼Œé™¤äº†ä»–ä»¬æ²¡äººçœ‹çš„æ‡‚ã€‚ç»“æœåœ¨æŸäº›æƒ…å†µä¸‹ç®—å‡ºæ¥çš„ç»“æœæ˜¯é”™çš„ã€‚ã€‚åæ¥ä»–ä»¬åˆæäº¤äº†ä¸€å †æ›´æ­£è¿‡çš„å¤©ä¹¦ä»£ç ï¼Œå¸Œæœ›æ˜¯å¯¹çš„å§ï¼Œå“ˆå“ˆ","user_name":"ä½œè€…å›å¤","comment_id":144720,"uid":"1176688","ip_address":"","utype":1,"ctime":1578930665,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":2,"race_medal":0,"score":"57406584013","product_id":100010301,"comment_content":"èµï¼Œä¹‹å‰å­¦ä¹ äº†æ·±å…¥ç†è§£è®¡ç®—æœºåŸç†è¿™é—¨è¯¾ï¼Œå†è”ç³»è¿™ä¸€èŠ‚å°±çŸ¥é“intrinsicæƒ³åšä»€ä¹ˆäº†ã€‚<br>JVM è‡ªèº«ä¸æ˜¯è·¨å¹³å°çš„ï¼ŒWindowsï¼ŒLinuxéƒ½æœ‰å„è‡ªçš„å®‰è£…åŒ…ï¼Œä¹Ÿå°±æ˜¯JVMå¸®æˆ‘ä»¬åšäº†ä¸åŒæ“ä½œç³»ç»ŸåŠåº•å±‚ä½“ç³»ç»“æ„çš„å…¼å®¹ï¼›ä½†æ˜¯é’ˆå¯¹æ¯ä¸€ä¸ªå…·ä½“çš„CPUï¼Œå…¶è‡ªèº«æä¾›çš„æŒ‡ä»¤ï¼Œå¯„å­˜å™¨ï¼Œä»¥åŠSIMDç­‰ä¼˜åŒ–æœºåˆ¶å¹¶æ²¡æœ‰å¾—åˆ°åˆ©ç”¨ï¼Œè€Œintrinsicçš„äº§ç”Ÿæ­£æ˜¯ä¸ºäº†åˆ©ç”¨è¿™äº›ã€‚<br>ä¸ªäººç†è§£ï¼Œæœ‰ä¸å¯¹ä¹‹å¤„ï¼Œè¯·è€å¸ˆå’Œå„ä½åŒå­¦æŒ‡å‡ºã€‚","like_count":13,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472083,"discussion_content":"å¯¹çš„ï¼Œè®¸å¤šintrinsics éƒ½ä¼šä¾èµ–ç‰¹æ®Šçš„CPUæŒ‡ä»¤æ¥ä¼˜åŒ–æ‰§è¡Œæ•ˆç‡çš„ã€‚\n\nè¯´ä¸ªè¶£é—»ï¼ŒIntelæ›¾ç»å‘OpenJDKæäº¤äº†ä¸€å¤§å †æµ®ç‚¹æ•°ç®—æ³•ä½œä¸ºjava.lang.Mathä¸­éƒ¨åˆ†æ–¹æ³•çš„intrinsicï¼Œæ¯”å¦‚sin cosè¿™äº›ï¼Œé™¤äº†ä»–ä»¬æ²¡äººçœ‹çš„æ‡‚ã€‚ç»“æœåœ¨æŸäº›æƒ…å†µä¸‹ç®—å‡ºæ¥çš„ç»“æœæ˜¯é”™çš„ã€‚ã€‚åæ¥ä»–ä»¬åˆæäº¤äº†ä¸€å †æ›´æ­£è¿‡çš„å¤©ä¹¦ä»£ç ï¼Œå¸Œæœ›æ˜¯å¯¹çš„å§ï¼Œå“ˆå“ˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578930665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362712,"discussion_content":"è¿™å°±å›åˆ°äº†æœ¬æº åˆšå­¦çš„æ—¶å€™è€æœ‰äººé—®ï¼šä½ è¯´è¯´çœ‹Javaä¸ºä»€ä¹ˆèƒ½è·¨å¹³å°ï¼Ÿå­¦äº†è¿™ä¸ªç¯‡ç« ç»“åˆç¼–è¯‘åŸç†å’ŒX86æ‰‹å†Œ çœŸçš„æ˜¯å¦‚è™æ·»ç¿¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617017263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24094,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1536801682,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"44486474642","product_id":100010301,"comment_content":"å—¯ï¼ŒJVMçš„é‡è¦æ€§è‡ªä¸å¿…è¨€ï¼Œå­¦å¥½æ˜¯è¿›é˜¶çš„å°é˜¶ï¼Œå¦åˆ™å°±æ˜¯å±éšœã€‚ä¸çŸ¥é“è¿è¡ŒåŸç†å’Œæœºåˆ¶ï¼Œæ€ä¹ˆç†è§£OOMï¼Ÿæ€ä¹ˆä¼˜åŒ–æ€§èƒ½ï¼Ÿæ€ä¹ˆåˆ†æå’Œå®šä½ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ï¼Ÿ<br><br>è€å¸ˆè®²çš„ç›¸å½“å¥½äº†ï¼Œåªæ˜¯çŸ¥è¯†å‚¨å¤‡ä¸å¤Ÿçš„è¯ï¼Œå­¦ä¹ æ›²çº¿æ˜¯æ¯”è¾ƒé™¡å³­çš„ï¼Œæ¯”å¦‚IRå›¾ï¼Œé‚£ä¸ªæ˜¯ç¬¬ä¸€æ¬¡å¬ï¼Œæ¥é¾™å»è„‰éƒ½ä¸æ¸…æ¥šè‡ªç„¶ä¼šæ‡µé€¼ã€‚è¿˜å¥½å¤§éƒ¨åˆ†éƒ½èƒ½å¬æ˜ç™½å’Œå¸æ”¶ï¼Œåªæ˜¯ä»¥åé¢è¯•èƒ½åˆ¤æ–­å‡ºé¢è¯•å®˜çš„æ°´å¹³ã€‚<br><br>æ‡‚JVMæˆ‘æ„Ÿè§‰å°±å¥½åƒäº†è§£åœ°çƒæ˜¯åœ†çš„ä»¥åŠå›´ç»•å¤ªé˜³å…¬è½¬ä¸€æ ·ï¼Œå¥½åƒå¹³æ—¶ç”Ÿæ´»ä¸Šä¹Ÿæ²¡ä»€ä¹ˆç”¨ï¼Œä¸è¿‡å¦‚æœæƒ³è¦å¾æœæ˜Ÿè¾°å¤§æµ·ï¼Œä»¥åŠè¿·å¤±æ–¹å‘æ—¶è¿˜æ˜¯æŒºæœ‰ç”¨çš„ã€‚<br><br>å—¯ï¼Œæ€»ä¹‹ï¼Œè€å¸ˆè®²çš„éå¸¸å¥½ï¼Œæ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªä¸“æ çš„å…¥é—¨æ•™ç¨‹ï¼Œå·²ç»å¦‚æ­¤æ·±å…¥äº†ï¼Œç›¸å½“æœ‰ç”¨ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»˜è´¹äº†ç¬¬ä¸€ä¸ªä¸“æ ï¼Œç”±äºè€å¸ˆè®²çš„å¥½ï¼Œæˆ‘åœ¨æå®¢æ—¶é—´åˆè®¢é˜…çš„å¥½å¤šï¼Œç°åœ¨å·²çœ‹ä¸è¿‡æ¥äº†ï¼Œä¸è¿‡è¿™ä¸ªä¸“æ æˆ‘ä¸€ç›´æ²¡æ–­ï¼Œæ¯å¤©å¿…å¬å¿…çœ‹ï¼Œæ„Ÿè§‰å­¦åˆ°ä¸å°‘çŸ¥è¯†ã€‚<br><br>å—¯ï¼Œä»Šå¤©è®²è§£çš„ intrinsic ï¼Œæˆ‘æ„Ÿè§‰ä¹Ÿå¬æ˜ç™½äº†ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š<br>1:intrinsic-å¯è®¤ä¸ºä¹Ÿæ˜¯ä¸€ç§hotspotè™šæ‹Ÿæœºï¼Œä¸ºæé«˜JVMæ€§èƒ½çš„ä¼˜åŒ–æœºåˆ¶æˆ–æŠ€å·§<br><br>2:ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥å’ŒJavaä»£ç ç»“åˆ<br><br>3:æœ¬è´¨ä¸Šé€‚é…å‡ºå¯¹åº”ç³»ç»Ÿä½“ç³»æ¶æ„ï¼Œç„¶åç›´æ¥ä½¿ç”¨å’Œç³»ç»Ÿä½“ç³»æ¶æ„å¼ºå…³è”çš„é«˜æ•ˆæŒ‡ä»¤æ¥æ‰§è¡Œå¯¹åº”çš„åŠŸèƒ½<br><br>4:é’ˆå¯¹ä¸åŒçš„ç±»å…·ä½“çš„é«˜æ•ˆæŒ‡ä»¤äº¦ä¸åŒ<br><br>ç–‘é—®â“<br>1:intrinsic æ˜¯åªæœ‰hotspotè™šæ‹Ÿæœºæ”¯æŒå—ï¼Ÿ<br><br>2:ç³»ç»Ÿçš„ä½“ç³»æ¶æ„é€‚é…æ˜¯å”¯ä¸€çš„å—ï¼Ÿä¸»è¦æ˜¯x86_64ï¼ŸæŒ‰ç…§è¿™ä¸ªæ€è·¯æ˜¯ä¸æ˜¯å¯ä»¥æœ‰å¤šä¸ªç±»ä¼¼çš„æ³¨è§†ï¼Œé’ˆå¯¹å¤šç§çš„ç³»ç»Ÿä½“ç³»æ¶æ„æ¥ä¼˜åŒ–å‘¢ï¼Ÿæ¯•ç«Ÿè®¡ç®—æœºç³»ç»Ÿçš„ä½“ç³»æ¶æ„æ˜¯æœ‰é™çš„","like_count":10,"discussions":[{"author":{"id":1017297,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYfcUOVhf3vhEBUNGHgtIcw8ujMZnkabicLzzjn3xwdeeic2PJSe7ibJgMx2UjF0d7L4B4gsRpaqe2A/132","nickname":"éƒ­å°èœ","note":"","ucode":"C4044C80BB331B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":136656,"discussion_content":"ä¸ºä»€ä¹ˆè€å¸ˆä½ ä¸å›ç­”ä»–","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579155588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2060756,"avatar":"","nickname":"åœ¨ä¸‹èŸ‘è‚ç‹","note":"","ucode":"E66A65A327095A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1017297,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYfcUOVhf3vhEBUNGHgtIcw8ujMZnkabicLzzjn3xwdeeic2PJSe7ibJgMx2UjF0d7L4B4gsRpaqe2A/132","nickname":"éƒ­å°èœ","note":"","ucode":"C4044C80BB331B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":302870,"discussion_content":"å› ä¸ºè€å¸ˆæ€•è¢«åˆ¤æ–­å‡ºæ°´å¹³ğŸ˜ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599053004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":136656,"ip_address":""},"score":302870,"extra":""}]},{"author":{"id":1508990,"avatar":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","nickname":"è¥¿é—¨å¹ç‰›","note":"","ucode":"E5D3624DDE1E83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292584,"discussion_content":"intrinsic åªæ˜¯ä¸€ç§æŠŠä»£ç çš„å…·ä½“å®ç°ï¼Œæ›¿æ¢æˆä¸€ç§é«˜æ•ˆçš„cpuæŒ‡ä»¤ã€‚æ‰€ä»¥ä¸æ­¢hotspotå®ç°ï¼Œå…¶ä»–çš„è™šæ‹Ÿæœºä¹Ÿå¯ä»¥æœ‰ï¼Œæœ‰æ²¡æœ‰å…·ä½“å®ç°ï¼Œé‚£å°±çœ‹å®ƒæœ‰æ²¡æœ‰å»åšï¼Œåæ­£æ˜¯èƒ½åšçš„ã€‚\nç›®å‰çœ‹ï¼Œåº”è¯¥åªé€‚é…x86_64æ¶æ„ï¼Œä¸åŒçš„æ¶æ„å¯¹åº”çš„cpuæŒ‡ä»¤é›†æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¦‚æœéƒ½é€‚é…ï¼Œé‚£ä¹ˆå°±è¦æ±‚è¯¥æ³¨è§£ï¼Œèƒ½åœ¨ä¸åŒçš„æ¶æ„ä¸‹ï¼Œèƒ½æ›¿æ¢æˆå…·ä½“å¹³å°çš„å¯¹åº”çš„cpuæŒ‡ä»¤ã€‚è¿™å°±æˆæœ¬å°±é«˜äº†ã€‚åªåœ¨x86_64æ¶æ„ä¸‹è¯¥æ³¨è§£ç”Ÿæ•ˆï¼Œæ¢æˆå…¶ä»–æ¶æ„ï¼Œå°±ç”¨åŸä»£ç æ‰§è¡Œï¼Œå¦‚æœæŠŠæ‰€æœ‰æ¶æ„éƒ½é€‚é…äº†ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰åŸä»£ç å­˜åœ¨çš„å¿…è¦äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595257575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1297630,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","nickname":"å‰‘å…«","note":"","ucode":"0A09F41DB8A4E7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282948,"discussion_content":"ç†è§£æ˜¯åº•å±‚JVMç‰¹å®šå¹³å°çš„å®ç°éœ€è¦æ ¹æ®å…·ä½“çš„ç¡¬ä»¶æ¶æ„åšé€‚é…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592126245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1303813,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e5/05/fc769d45.jpg","nickname":"Geek_zhw","note":"","ucode":"AABE15F9895613","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274389,"discussion_content":"æ¼æ´å¤ªå¤šï¼Œä¸æ‰“å‡»å­¦å‘˜çš„æ€è€ƒç§¯ææ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590578756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23641,"user_name":"Geek_09d838","can_delete":false,"product_type":"c1","uid":1097482,"ip_address":"","ucode":"D191FA46223F83","user_header":"https://static001.geekbang.org/account/avatar/00/10/bf/0a/98e116e0.jpg","comment_is_top":false,"comment_ctime":1536564600,"is_pvip":false,"replies":[{"id":"8609","content":"å—¯å—¯ï¼<br>æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œåœ¨è¿™ä¸ªä¸“æ ä¸­ä»‹ç»JVMå„ä¸ªç»„ä»¶çš„è®¾è®¡ä¸å®ç°ã€‚ä¹‹åå½“å¼€å‘äººå‘˜åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œèƒ½å¤Ÿè”æƒ³åˆ°å…·ä½“æ˜¯å“ªä¸ªç»„ä»¶å¯èƒ½å‡ºäº†é—®é¢˜ï¼Œä»è€Œé’ˆå¯¹æ€§åœ°å»åšè°ƒä¼˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":23641,"uid":"1176688","ip_address":"","utype":1,"ctime":1536579633,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"27306368376","product_id":100010301,"comment_content":"æˆ‘è§‰å¾—æœ‰äº›åŠŸèƒ½ä½ è¦å…ˆçŸ¥é“ï¼Œå†å»è€ƒè™‘èƒ½å¦ä¼šç”¨åˆ°è¿™äº›åŠŸèƒ½ã€‚","like_count":6,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423655,"discussion_content":"å—¯å—¯ï¼\næˆ‘çš„æƒ³æ³•æ˜¯ï¼Œåœ¨è¿™ä¸ªä¸“æ ä¸­ä»‹ç»JVMå„ä¸ªç»„ä»¶çš„è®¾è®¡ä¸å®ç°ã€‚ä¹‹åå½“å¼€å‘äººå‘˜åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œèƒ½å¤Ÿè”æƒ³åˆ°å…·ä½“æ˜¯å“ªä¸ªç»„ä»¶å¯èƒ½å‡ºäº†é—®é¢˜ï¼Œä»è€Œé’ˆå¯¹æ€§åœ°å»åšè°ƒä¼˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536579633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23670,"user_name":"Scott","can_delete":false,"product_type":"c1","uid":1014800,"ip_address":"","ucode":"7E57FDCB5E5D49","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","comment_is_top":false,"comment_ctime":1536581254,"is_pvip":false,"replies":[{"id":"8721","content":"è°¢è°¢æ”¯æŒï¼","user_name":"ä½œè€…å›å¤","comment_id":23670,"uid":"1176688","ip_address":"","utype":1,"ctime":1536680103,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"23011417734","product_id":100010301,"comment_content":"æˆ‘è¿˜æ˜¯çœ‹å¾—è›®è¿‡ç˜¾çš„ï¼Œå‘¨ä¸€ä¸‰äº”æ—©ä¸Šèµ·æ¥ç¬¬ä¸€ä»¶äº‹å°±æ˜¯çœ‹æ›´æ–°ï¼Œçš„ç¡®å¯èƒ½ä¸æ˜¯å¾ˆå®ç”¨ï¼Œä½†æ˜¯å¯¹äºå¯¹è™šæ‹Ÿæœºæ„Ÿå…´è¶£çš„åŒå­¦æ¥è®²ï¼Œæ˜¯æ»¡è¶³äº†å¥½å¥‡å¿ƒ","like_count":5,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423670,"discussion_content":"è°¢è°¢æ”¯æŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536680103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23691,"user_name":"Len","can_delete":false,"product_type":"c1","uid":1022767,"ip_address":"","ucode":"53C623CE17973F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/2f/b7a3625e.jpg","comment_is_top":false,"comment_ctime":1536589948,"is_pvip":true,"replies":[{"id":"8723","content":"å¤šè°¢æ”¯æŒï¼","user_name":"ä½œè€…å›å¤","comment_id":23691,"uid":"1176688","ip_address":"","utype":1,"ctime":1536680125,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"14421491836","product_id":100010301,"comment_content":"æˆ‘è§‰å¾—è€å¸ˆè®²çš„éå¸¸å¥½ï¼Œå°¤å…¶æ˜¯ä¸Šä¸¤è®²è®²æ–¹æ³•å†…è”ï¼Œç»“åˆè€å¸ˆè®²çš„ï¼Œåœ¨è¯¾åæˆ‘åˆæ¶è¡¥äº†ä¸€ä¸‹ IR æ–¹é¢çš„çŸ¥è¯†ï¼Œæ”¶è·å¾ˆå¤§ã€‚<br>å°½ç®¡ç›®å‰æˆ‘çš„å·¥ä½œä¸ä¼šç›´æ¥ç”¨åˆ°è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œä½†æˆ‘ç›¸ä¿¡è¿™äº›åº•å±‚æœºåˆ¶ã€åŸç†æ€§çš„çŸ¥è¯†ç‚¹ï¼Œå¯¹æˆé•¿ä¸ºä¸€åä¼˜ç§€çš„å·¥ç¨‹å¸ˆæ˜¯å¿…å¤‡çš„ã€‚","like_count":3,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423680,"discussion_content":"å¤šè°¢æ”¯æŒï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536680125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23627,"user_name":"ahern88","can_delete":false,"product_type":"c1","uid":1006971,"ip_address":"","ucode":"8CD8436265D550","user_header":"","comment_is_top":false,"comment_ctime":1536552637,"is_pvip":false,"replies":[{"id":"8598","content":"å¤šè°¢å»ºè®®ï¼<br><br>JVMå¯¹ç”¨æˆ·æ¥è¯´æ˜¯é€æ˜çš„ï¼Œå¯è°ƒä¼˜çš„å‚æ•°ä¹Ÿåœ¨é€æ¸å‡å°‘ï¼Œæ€»ä½“æœç€è‡ªé€‚é…å‰è¿›ã€‚æ‰€ä»¥æŠŠæœ¬ä¸“æ å½“æˆå·¥å…·ä¹¦æ¥çœ‹çš„è¯ï¼Œç¡®å®æ²¡æœ‰å¤šå°‘å®ç”¨æ€§ã€‚<br><br>ä¸è¿‡å°±ç®—æ˜¯è‡ªé€‚é…çš„è™šæ‹Ÿæœºï¼Œä¹Ÿæœ‰è¦†ç›–ä¸åˆ°çš„åœºæ™¯ã€‚ä¸“æ å‰é¢è¿™ä¸¤éƒ¨åˆ†ï¼Œæ­£æ˜¯åœ¨ä»‹ç»JVMå„ä¸ªæ¨¡å—çš„è®¾è®¡ä¸å®ç°ï¼Œä»¥ä¾¿å¼€å‘äººå‘˜åœ¨å‘ç°æ€§èƒ½é—®é¢˜æ—¶èƒ½å¤Ÿè”æƒ³åˆ°å¯èƒ½å‡ºé—®é¢˜çš„å…·ä½“æ¨¡å—ã€‚<br><br>æ¥ä¸‹æ¥çš„ç¬¬ä¸‰éƒ¨åˆ†ä¼šä»‹ç»ä¸€äº›æ€§èƒ½ç›‘æ§åˆ†æå·¥å…·ï¼Œå¸Œæœ›ä¼šå¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚","user_name":"ä½œè€…å›å¤","comment_id":23627,"uid":"1176688","ip_address":"","utype":1,"ctime":1536578518,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":3,"race_medal":0,"score":"14421454525","product_id":100010301,"comment_content":"æˆ‘è§‰å¾—è¿™ä»½è™šæ‹Ÿæœºæ•™ç¨‹å†™çš„çŸ¥è¯†æœ‰ç‚¹åï¼Œä¸å¤Ÿå®ç”¨ï¼Œå¤§å®¶è§‰å¾—å‘¢","like_count":3,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423646,"discussion_content":"å¤šè°¢å»ºè®®ï¼\n\nJVMå¯¹ç”¨æˆ·æ¥è¯´æ˜¯é€æ˜çš„ï¼Œå¯è°ƒä¼˜çš„å‚æ•°ä¹Ÿåœ¨é€æ¸å‡å°‘ï¼Œæ€»ä½“æœç€è‡ªé€‚é…å‰è¿›ã€‚æ‰€ä»¥æŠŠæœ¬ä¸“æ å½“æˆå·¥å…·ä¹¦æ¥çœ‹çš„è¯ï¼Œç¡®å®æ²¡æœ‰å¤šå°‘å®ç”¨æ€§ã€‚\n\nä¸è¿‡å°±ç®—æ˜¯è‡ªé€‚é…çš„è™šæ‹Ÿæœºï¼Œä¹Ÿæœ‰è¦†ç›–ä¸åˆ°çš„åœºæ™¯ã€‚ä¸“æ å‰é¢è¿™ä¸¤éƒ¨åˆ†ï¼Œæ­£æ˜¯åœ¨ä»‹ç»JVMå„ä¸ªæ¨¡å—çš„è®¾è®¡ä¸å®ç°ï¼Œä»¥ä¾¿å¼€å‘äººå‘˜åœ¨å‘ç°æ€§èƒ½é—®é¢˜æ—¶èƒ½å¤Ÿè”æƒ³åˆ°å¯èƒ½å‡ºé—®é¢˜çš„å…·ä½“æ¨¡å—ã€‚\n\næ¥ä¸‹æ¥çš„ç¬¬ä¸‰éƒ¨åˆ†ä¼šä»‹ç»ä¸€äº›æ€§èƒ½ç›‘æ§åˆ†æå·¥å…·ï¼Œå¸Œæœ›ä¼šå¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536578518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1360093,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEIsgI4ub1VOKWtVOfouAzSqx8Yt8ibQEsAnwNJsJHmuJzzpQqG79HullvYwpic8hgiclgON2GwXSjw/132","nickname":"cv0cv0","note":"","ucode":"93FF9277F03FD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555196,"discussion_content":"è¿™ä¸€ç¯‡æˆ‘è§‰å¾—è®²çš„æ˜¯æœ€å¥½çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646808167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362714,"discussion_content":"æˆ‘ä¸ªäººè§‰å¾—å¸®åŠ©è¿˜æ˜¯å¾ˆå¤§çš„ æ¯ä¸ªäººçš„ç»å†å’Œæ‰€å¤„å·¥ä½œç¯å¢ƒä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617017346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165277,"user_name":"é¥­ç²’","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1577192383,"is_pvip":false,"replies":[{"id":"65539","content":"å…¶ä»–æ¶æ„æ²¡æœ‰çš„è¯å°±æ²¿ç”¨Javaå®ç°ã€‚å¦x86_64å’Œamd64æ˜¯åŒä¸€ä¸ªæ¶æ„","user_name":"ä½œè€…å›å¤","comment_id":165277,"uid":"1176688","ip_address":"","utype":1,"ctime":1578265542,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":2,"race_medal":0,"score":"10167126975","product_id":100010301,"comment_content":"æ–‡ä¸­è¯´ @HotSpotIntrinsicCandidate å¦‚æœä¸æ˜¯ HotSpot çš„è™šæ‹Ÿæœºå°±é€€åŒ–ä½¿ç”¨ JDK æºç çš„æ–¹å¼ã€‚ä½†å¦‚æœæŸä¸ª @HotSpotIntrinsicCandidate æ³¨è§£çš„æ–¹æ³• X86_64 æœ‰æŒ‡ä»¤å¯ä»¥ä¼˜åŒ–ï¼Œä½†å…¶ä»–æ¶æ„ä½“ç³»æ¯”å¦‚ AMD64 æ²¡æœ‰ç›¸åº”çš„æŒ‡ä»¤æˆ–è€…æŒ‡ä»¤ä¸åŒè¿™ä¸ªè¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479103,"discussion_content":"å…¶ä»–æ¶æ„æ²¡æœ‰çš„è¯å°±æ²¿ç”¨Javaå®ç°ã€‚å¦x86_64å’Œamd64æ˜¯åŒä¸€ä¸ªæ¶æ„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578265542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153455,"avatar":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","nickname":"é¥­ç²’","note":"","ucode":"4C3220B0D43997","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121358,"discussion_content":"æ„Ÿè°¢è€å¸ˆç­”å¤ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578317709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28284,"user_name":"ç™½ä¸‰å²","can_delete":false,"product_type":"c1","uid":1109892,"ip_address":"","ucode":"39594C357FEA1B","user_header":"https://static001.geekbang.org/account/avatar/00/10/ef/84/a0ffbd8b.jpg","comment_is_top":false,"comment_ctime":1538042184,"is_pvip":false,"replies":[{"id":"10305","content":"Java8å·²ç»æœ‰ä¸€äº›intrinsicï¼Œä½†ä¸å¤šã€‚<br><br>è¿™ä¸ªæ³¨è§£åº”è¯¥æ˜¯Java 9å¼•å…¥çš„ï¼Œå®ƒçš„æ„æ€å…¶å®æ˜¯ç”¨æ¥æé†’JDKå¼€å‘äººå‘˜æ³¨æ„è™šæ‹Ÿæœºé‡Œæœ‰å¯¹åº”çš„intrinsicï¼Œæ”¹åŠ¨çš„è¯éœ€è¦é€šçŸ¥æˆ‘ä»¬","user_name":"ä½œè€…å›å¤","comment_id":28284,"uid":"1176688","ip_address":"","utype":1,"ctime":1538117322,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"10127976776","product_id":100010301,"comment_content":"æˆ‘çœ‹äº†ä¸‹java8ä¸­æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªæ³¨è§£ã€‚è°ƒç”¨ä»æºç å¤åˆ¶å‡ºæ¥çš„æ–¹æ³•å’Œç›´æ¥è°ƒç”¨æºç çš„æ–¹æ³•æ²¡æœ‰æ€§èƒ½ä¸Šçš„å·®åˆ«ã€‚æ˜¯java8æ²¡æœ‰åŠ å…¥è¿™ç§ä¼˜åŒ–å—","like_count":2,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425213,"discussion_content":"Java8å·²ç»æœ‰ä¸€äº›intrinsicï¼Œä½†ä¸å¤šã€‚\n\nè¿™ä¸ªæ³¨è§£åº”è¯¥æ˜¯Java 9å¼•å…¥çš„ï¼Œå®ƒçš„æ„æ€å…¶å®æ˜¯ç”¨æ¥æé†’JDKå¼€å‘äººå‘˜æ³¨æ„è™šæ‹Ÿæœºé‡Œæœ‰å¯¹åº”çš„intrinsicï¼Œæ”¹åŠ¨çš„è¯éœ€è¦é€šçŸ¥æˆ‘ä»¬","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1538117322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23853,"user_name":"bradsun","can_delete":false,"product_type":"c1","uid":1024227,"ip_address":"","ucode":"E0C8E80B18F320","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/e3/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1536707886,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10126642478","product_id":100010301,"comment_content":"ä¸å¥½æ„æ€ï¼Œæ˜¨å¤©æ²¡å†™æ¸…æ¥šã€‚å°±æ˜¯intrinsicï¼Œåªæœ‰å°‘éƒ¨åˆ†å¯ä»¥ç›´æ¥è¢«è§£é‡Šå™¨åº”ç”¨ï¼Œè€Œå¤§éƒ¨åˆ†åªèƒ½è¢«ç¼–è¯‘å™¨åº”ç”¨ã€‚ä¸ºä»€ä¹ˆä¸éƒ½å¯ä»¥è¢«è§£é‡Šå™¨è°ƒç”¨ï¼Œè¿™æ ·è§£é‡Šæ‰§è¡Œçš„æ—¶å€™ä¸ä¼šæ›´é«˜æ•ˆå—","like_count":2},{"had_liked":false,"id":353350,"user_name":"é’é˜³","can_delete":false,"product_type":"c1","uid":2139807,"ip_address":"åŒ—äº¬","ucode":"3591D366BAB0B9","user_header":"https://static001.geekbang.org/account/avatar/00/20/a6/9f/3c60fffd.jpg","comment_is_top":false,"comment_ctime":1659397671,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1659397671","product_id":100010301,"comment_content":"intrinsicå°±æ˜¯æœ‰äº›åŠŸèƒ½ç¡¬ä»¶å·²ç»å®ç°äº†ï¼Œä¸ç”¨è½¯ä»¶ç¼–ç¨‹çš„æ–¹å¼å®ç°äº†","like_count":0},{"had_liked":false,"id":308972,"user_name":"å®‹ä¸–é€š","can_delete":false,"product_type":"c1","uid":1245468,"ip_address":"","ucode":"C7AA3F0E6930F3","user_header":"https://static001.geekbang.org/account/avatar/00/13/01/1c/d638d46e.jpg","comment_is_top":false,"comment_ctime":1629877073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629877073","product_id":100010301,"comment_content":"æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨","like_count":0},{"had_liked":false,"id":254385,"user_name":"Geek_03a866","can_delete":false,"product_type":"c1","uid":2129795,"ip_address":"","ucode":"204DC1D0C5F2FC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/hQ01GRPRFNTfBWX1Gmz0cqXZxbyJqHmORNJuE8yIqCbg1fXjvaWOGoatVo3Pbib5ZHCEqYFhSHhCVA8zr2Q2WuA/132","comment_is_top":false,"comment_ctime":1603109304,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603109304","product_id":100010301,"comment_content":"å°†ç¼–ç ã€å³æ—¶ç¼–è¯‘å™¨ã€cpuæŒ‡ä»¤ä½“ç³»æ¶æ„ã€å¹¶å‘unsafeã€natuve jni  ä¹‹é—´çš„è¿‡æ¸¡è®²æ·±å…¥å’Œæ¸…æ¥šäº†ï¼Œæ°´å¹³çœŸé«˜","like_count":0},{"had_liked":false,"id":240472,"user_name":"å…°èŠ³æ—","can_delete":false,"product_type":"c1","uid":1754409,"ip_address":"","ucode":"D3C652D22B5D50","user_header":"https://static001.geekbang.org/account/avatar/00/1a/c5/29/4848464f.jpg","comment_is_top":false,"comment_ctime":1596941031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596941031","product_id":100010301,"comment_content":"å‰å®³ï¼Œå—æ•™","like_count":0},{"had_liked":false,"id":239360,"user_name":"é äººå“å»èµ¢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1596511104,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596511104","product_id":100010301,"comment_content":"è¿™ç¯‡å¤§æ¦‚è®²çš„å°±æ˜¯è¯´ï¼Œæœ‰å¾ˆå¤š@HotSpotIntrinsicCandidateæ³¨è§£çš„æ–¹æ³•ã€‚æˆ‘ä»¬å«ä»–intrinsicï¼Œè¿™äº›æ–¹æ³•ç‰¹åˆ«ä¹‹å¤„å°±æ˜¯åŸºäºCPUå•¥çš„æŒ‡ä»¤é«˜æ•ˆè¿è¡Œã€‚<br>è¿™æ—¶å€™å°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¼šä¸ä¼šæ¢ä¸ªæ„æ¶çš„ç¡¬ä»¶æˆ–è€…è¯´ä¸æ”¯æŒå¯¹åº”çš„æŒ‡ä»¤é›†ï¼Œè¿™äº›ä¸œè¥¿å°±ç©ä¸è½¬äº†ï¼Œæœ‰æ—¶å€™é‡åˆ°ä¸€äº›éœ€æ±‚æ¯”å¦‚è¯´æ‰“å°ï¼Œæœ‰çš„æœºå™¨æ‰“å°æ ‡ç­¾ä¸æ”¯æŒé‡å®šä½ï¼Œæ‰“ç€æ‰“ç€å°±ä¼šå‡ºç°åå·®ï¼Œæœ‰å¯¹åº”çš„æŒ‡ä»¤ä½†æ˜¯ç¡¬ä»¶ä¸æ”¯æŒã€‚","like_count":0},{"had_liked":false,"id":238059,"user_name":"Kevinâš¡ï¸Zhou","can_delete":false,"product_type":"c1","uid":1440772,"ip_address":"","ucode":"C0FC2673705212","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/04/d83a555e.jpg","comment_is_top":false,"comment_ctime":1596039466,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596039466","product_id":100010301,"comment_content":"è¿™é—¨è¯¾æˆ‘è§‰å¾—å¯ä»¥å…ˆå›«å›µåæ£çš„çœ‹è¿‡å», ä»¥åå¼€å‘ä¸­é‡åˆ°äº†å…·ä½“çš„ç–‘é—®åœ¨æ¥å›é¡¾, å¯¹äºç»éªŒä¸æ˜¯å¾ˆé•¿çš„å·¥ç¨‹å¸ˆæ¥è¯´, æƒ³ä¸€æ¬¡æ€§å…¨éƒ¨åƒé€æ˜¯å¾ˆéš¾å¾—","like_count":0},{"had_liked":false,"id":236809,"user_name":"ä¼æ˜¥æ—","can_delete":false,"product_type":"c1","uid":1926470,"ip_address":"","ucode":"BE9DF93A9AC958","user_header":"","comment_is_top":false,"comment_ctime":1595554940,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595554940","product_id":100010301,"comment_content":"è€å¸ˆå¥½ï¼Œæ–‡ä¸­æåˆ°ç»å¤§éƒ¨åˆ†intrinsicæ–¹æ³•éƒ½æ˜¯åœ¨åŠæ—¶ç¼–è¯‘çš„æ—¶å€™è¢«æ›¿æ¢çš„ï¼Œé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€å¦‚æœæ²¡æœ‰è§¦å‘åŠæ—¶ç¼–è¯‘çš„è¯ï¼Œintrinsicæ–¹æ³•çš„é«˜æ•ˆå®ç°å°±ä½“ç°ä¸äº†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":226511,"user_name":"å‰‘å…«","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1592126084,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1592126084","product_id":100010301,"comment_content":"intrinsicï¼Œå°±æ˜¯åˆ©ç”¨CPUåº•å±‚æŒ‡ä»¤é«˜æ•ˆå®Œæˆç›®æ ‡äº‹æƒ…ã€‚<br>å¦‚ï¼šStringçš„indexOf<br>å¯ä»¥åˆ©ç”¨CPUæŒ‡ä»¤ç›´æ¥å°†byteæ•°ç»„å­˜å…¥åº•å±‚å¯„å­˜å™¨ç”±CPUæŒ‡ä»¤è¿›è¡Œæ¯”è¾ƒå¹¶è¿”å›ç›¸åº”çš„indexã€‚","like_count":0},{"had_liked":false,"id":198829,"user_name":"å°é™ˆ","can_delete":false,"product_type":"c1","uid":1009385,"ip_address":"","ucode":"A03A299310AD18","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/e9/814d057a.jpg","comment_is_top":false,"comment_ctime":1585469840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585469840","product_id":100010301,"comment_content":"è¿™èŠ‚ä¸é”™ï¼Œè®²äº†å¾ˆå¤šåº•å±‚çŸ¥è¯†","like_count":0},{"had_liked":false,"id":137597,"user_name":"NullPointer","can_delete":false,"product_type":"c1","uid":1179184,"ip_address":"","ucode":"83B7DA926A0411","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/30/c9b568c3.jpg","comment_is_top":false,"comment_ctime":1569804266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569804266","product_id":100010301,"comment_content":"è¿™äº›ä¸œè¥¿å¬ç€æŒºè¿‡ç˜¾çš„ï¼Œè™½ç„¶å¤§éƒ¨åˆ†æ—¶é—´ç”¨ä¸ä¸Šã€‚ä½†æ˜¯ç†è§£åŸç†ï¼Œåœ¨ä½ æŸ¥æ‰¾ç–‘éš¾é—®é¢˜çš„æ—¶å€™å´æ˜¯æœ‰å¥‡æ•ˆ","like_count":0},{"had_liked":false,"id":65803,"user_name":"é›ªäºº","can_delete":false,"product_type":"c1","uid":1257781,"ip_address":"","ucode":"55B39082C5D1F0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ABjAPveWxOuBs3ibbCaBicX7OSibic3prycYG9vOicGHMEv8Vws5o3epykBSFHkbysnaKeMqQaJufINNUncGhmAEomg/132","comment_is_top":false,"comment_ctime":1549669330,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1549669330","product_id":100010301,"comment_content":"è¿™äº›ä¸œè¥¿ï¼Œå°½ç®¡ç°åœ¨å¯èƒ½çœ‹èµ·æ¥ä¸ä¼šéƒ½æ‡‚ï¼Œä½†ç•™ç€ä»¥åæ— è®ºä»€ä¹ˆæ—¶å€™å†çœ‹ï¼Œéƒ½ä¼šæœ‰æˆ–å¤šæˆ–å°‘çš„æ”¶è·ï¼Œè€Œè¿™ä¸ªæ”¶è·ï¼Œå¯¹ä»¥åçš„å‰è¿›ä¹‹è·¯ï¼Œæ˜¯æœ‰éå¸¸å¤§çš„å¸®åŠ©ï¼Œæ„Ÿè°¢è€å¸ˆï¼Œå¸Œæœ›è€å¸ˆæœ‰ç©ºèƒ½å†å‡ºä¸€ä»½ä¸“æ å§","like_count":0},{"had_liked":false,"id":26593,"user_name":"JZ","can_delete":false,"product_type":"c1","uid":1004986,"ip_address":"","ucode":"869A0DB3AC7A0F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/ba/d738255c.jpg","comment_is_top":false,"comment_ctime":1537690187,"is_pvip":false,"replies":[{"id":"9727","content":"è®°å¾—æ˜¯9ä¹‹åæ‰å¤§é‡åŠ å…¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘é›¨è¿ª","uid":"1176688","ctime":1537779704,"ip_address":"","comment_id":26593,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537690187","product_id":100010301,"comment_content":"Java8ä¸­å¹¶æ²¡æœ‰çœ‹åˆ°ç›¸åº”çš„æ³¨è§£ï¼Œå¦‚Stringç±»çš„indexOfæ–¹æ³•ï¼ŒJava8ä¸­æ²¡æœ‰ç±»ä¼¼çš„ä¼˜åŒ–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424682,"discussion_content":"è®°å¾—æ˜¯9ä¹‹åæ‰å¤§é‡åŠ å…¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537779704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23901,"user_name":"å››é˜¿å“¥","can_delete":false,"product_type":"c1","uid":1104580,"ip_address":"","ucode":"3296E89174D370","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/c4/270db3ad.jpg","comment_is_top":false,"comment_ctime":1536715787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536715787","product_id":100010301,"comment_content":"ç¬¬ä¸‰éƒ¨åˆ†ï¼Œåˆ©ç”¨å·¥å…·è¿›è¡Œè°ƒä¼˜ï¼Œéå¸¸æœŸå¾…ï¼Œå…¶å®åƒPrintCompileè¿™ç±»å‚æ•°ä¹Ÿæ˜¯ååˆ†å®ç”¨çš„","like_count":0},{"had_liked":false,"id":23798,"user_name":"bradsun","can_delete":false,"product_type":"c1","uid":1024227,"ip_address":"","ucode":"E0C8E80B18F320","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/e3/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1536663091,"is_pvip":false,"replies":[{"id":"8724","content":"ä¸å¥½æ„æ€æ²¡æ˜ç™½ä½ çš„é—®é¢˜ã€‚ä»€ä¹ˆæ˜¯ç‹¬ç«‹çš„ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘é›¨è¿ª","uid":"1176688","ctime":1536680249,"ip_address":"","comment_id":23798,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536663091","product_id":100010301,"comment_content":"è¿™ä¸ªä¸ºä»€ä¹ˆä¸éƒ½æ˜¯ç‹¬ç«‹çš„å½¢å¼ã€‚è€Œä¸”åªæœ‰å°‘éƒ¨åˆ†æ˜¯ç‹¬ç«‹çš„ã€‚è°¢è°¢","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423732,"discussion_content":"ä¸å¥½æ„æ€æ²¡æ˜ç™½ä½ çš„é—®é¢˜ã€‚ä»€ä¹ˆæ˜¯ç‹¬ç«‹çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536680249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}