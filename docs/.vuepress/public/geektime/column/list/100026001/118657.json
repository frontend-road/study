{"id":118657,"title":"48 | DMAï¼šä¸ºä»€ä¹ˆKafkaè¿™ä¹ˆå¿«ï¼Ÿ","content":"<p>è¿‡å»å‡ å¹´é‡Œï¼Œæ•´ä¸ªè®¡ç®—æœºäº§ä¸šç•Œï¼Œéƒ½åœ¨å°è¯•ä¸åœåœ°æå‡I/Oè®¾å¤‡çš„é€Ÿåº¦ã€‚æŠŠHDDç¡¬ç›˜æ¢æˆSSDç¡¬ç›˜ï¼Œæˆ‘ä»¬ä»ç„¶è§‰å¾—ä¸å¤Ÿå¿«ï¼›ç”¨PCI Expressæ¥å£çš„SSDç¡¬ç›˜æ›¿ä»£SATAæ¥å£çš„SSDç¡¬ç›˜ï¼Œæˆ‘ä»¬è¿˜æ˜¯è§‰å¾—ä¸å¤Ÿå¿«ï¼Œæ‰€ä»¥ï¼Œç°åœ¨å°±æœ‰äº†å‚²è…¾ï¼ˆOptaneï¼‰è¿™æ ·çš„æŠ€æœ¯ã€‚</p><p>ä½†æ˜¯ï¼Œæ— è®ºI/Oé€Ÿåº¦å¦‚ä½•æå‡ï¼Œæ¯”èµ·CPUï¼Œæ€»è¿˜æ˜¯å¤ªæ…¢ã€‚SSDç¡¬ç›˜çš„IOPSå¯ä»¥åˆ°2ä¸‡ã€4ä¸‡ï¼Œä½†æ˜¯æˆ‘ä»¬CPUçš„ä¸»é¢‘æœ‰2GHzä»¥ä¸Šï¼Œä¹Ÿå°±æ„å‘³ç€æ¯ç§’ä¼šæœ‰20äº¿æ¬¡çš„æ“ä½œã€‚</p><p>å¦‚æœæˆ‘ä»¬å¯¹äºI/Oçš„æ“ä½œï¼Œéƒ½æ˜¯ç”±CPUå‘å‡ºå¯¹åº”çš„æŒ‡ä»¤ï¼Œç„¶åç­‰å¾…I/Oè®¾å¤‡å®Œæˆæ“ä½œä¹‹åè¿”å›ï¼Œé‚£CPUæœ‰å¤§é‡çš„æ—¶é—´å…¶å®éƒ½æ˜¯åœ¨ç­‰å¾…I/Oè®¾å¤‡å®Œæˆæ“ä½œã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ä¸ªCPUçš„ç­‰å¾…ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œå…¶å®å¹¶æ²¡æœ‰å¤ªå¤šçš„å®é™…æ„ä¹‰ã€‚æˆ‘ä»¬å¯¹äºI/Oè®¾å¤‡çš„å¤§é‡æ“ä½œï¼Œå…¶å®éƒ½åªæ˜¯æŠŠå†…å­˜é‡Œé¢çš„æ•°æ®ï¼Œä¼ è¾“åˆ°I/Oè®¾å¤‡è€Œå·²ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…¶å®CPUåªæ˜¯åœ¨å‚»ç­‰è€Œå·²ã€‚ç‰¹åˆ«æ˜¯å½“ä¼ è¾“çš„æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œæ¯”å¦‚è¿›è¡Œå¤§æ–‡ä»¶å¤åˆ¶ï¼Œå¦‚æœæ‰€æœ‰æ•°æ®éƒ½è¦ç»è¿‡CPUï¼Œå®åœ¨æ˜¯æœ‰ç‚¹å„¿å¤ªæµªè´¹æ—¶é—´äº†ã€‚</p><p>å› æ­¤ï¼Œè®¡ç®—æœºå·¥ç¨‹å¸ˆä»¬ï¼Œå°±å‘æ˜äº†DMAæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯<strong>ç›´æ¥å†…å­˜è®¿é—®</strong>ï¼ˆDirect Memory Accessï¼‰æŠ€æœ¯ï¼Œæ¥å‡å°‘CPUç­‰å¾…çš„æ—¶é—´ã€‚</p><h2>ç†è§£DMAï¼Œä¸€ä¸ªåå¤„ç†å™¨</h2><!-- [[[read_end]]] --><p>å…¶å®DMAæŠ€æœ¯å¾ˆå®¹æ˜“ç†è§£ï¼Œæœ¬è´¨ä¸Šï¼ŒDMAæŠ€æœ¯å°±æ˜¯æˆ‘ä»¬åœ¨ä¸»æ¿ä¸Šæ”¾ä¸€å—ç‹¬ç«‹çš„èŠ¯ç‰‡ã€‚åœ¨è¿›è¡Œå†…å­˜å’ŒI/Oè®¾å¤‡çš„æ•°æ®ä¼ è¾“çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å†é€šè¿‡CPUæ¥æ§åˆ¶æ•°æ®ä¼ è¾“ï¼Œè€Œç›´æ¥é€šè¿‡<strong>DMAæ§åˆ¶å™¨</strong>ï¼ˆDMA Controllerï¼Œç®€ç§°DMACï¼‰ã€‚è¿™å—èŠ¯ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ª<strong>åå¤„ç†å™¨</strong>ï¼ˆCo-Processorï¼‰ã€‚</p><p><strong>DMACæœ€æœ‰ä»·å€¼çš„åœ°æ–¹ä½“ç°åœ¨ï¼Œå½“æˆ‘ä»¬è¦ä¼ è¾“çš„æ•°æ®ç‰¹åˆ«å¤§ã€é€Ÿåº¦ç‰¹åˆ«å¿«ï¼Œæˆ–è€…ä¼ è¾“çš„æ•°æ®ç‰¹åˆ«å°ã€é€Ÿåº¦ç‰¹åˆ«æ…¢çš„æ—¶å€™ã€‚</strong></p><p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ç”¨åƒå…†ç½‘å¡æˆ–è€…ç¡¬ç›˜ä¼ è¾“å¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœéƒ½ç”¨CPUæ¥æ¬è¿çš„è¯ï¼Œè‚¯å®šå¿™ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©DMACã€‚è€Œå½“æ•°æ®ä¼ è¾“å¾ˆæ…¢çš„æ—¶å€™ï¼ŒDMACå¯ä»¥ç­‰æ•°æ®åˆ°é½äº†ï¼Œå†å‘é€ä¿¡å·ï¼Œç»™åˆ°CPUå»å¤„ç†ï¼Œè€Œä¸æ˜¯è®©CPUåœ¨é‚£é‡Œå¿™ç­‰å¾…ã€‚</p><p>å¥½äº†ï¼Œç°åœ¨ä½ åº”è¯¥æ˜ç™½DMACçš„ä»·å€¼ï¼ŒçŸ¥é“äº†å®ƒé€‚åˆç”¨åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ã€‚é‚£æˆ‘ä»¬ç°åœ¨å›è¿‡å¤´æ¥çœ‹ã€‚æˆ‘ä»¬ä¸Šé¢è¯´ï¼ŒDMACæ˜¯ä¸€å—â€œåå¤„ç†å™¨èŠ¯ç‰‡â€ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æ³¨æ„ï¼Œè¿™é‡Œé¢çš„â€œåâ€å­—ã€‚DMACæ˜¯åœ¨â€œååŠ©â€CPUï¼Œå®Œæˆå¯¹åº”çš„æ•°æ®ä¼ è¾“å·¥ä½œã€‚åœ¨DMACæ§åˆ¶æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦CPUçš„ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒDMACå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„I/Oè®¾å¤‡ï¼Œå®ƒå’ŒCPUä»¥åŠå…¶ä»–I/Oè®¾å¤‡ä¸€æ ·ï¼Œé€šè¿‡è¿æ¥åˆ°æ€»çº¿æ¥è¿›è¡Œå®é™…çš„æ•°æ®ä¼ è¾“ã€‚æ€»çº¿ä¸Šçš„è®¾å¤‡å‘¢ï¼Œå…¶å®æœ‰ä¸¤ç§ç±»å‹ã€‚ä¸€ç§æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>ä¸»è®¾å¤‡</strong>ï¼ˆMasterï¼‰ï¼Œå¦å¤–ä¸€ç§ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>ä»è®¾å¤‡</strong>ï¼ˆSlaveï¼‰ã€‚</p><p>æƒ³è¦ä¸»åŠ¨å‘èµ·æ•°æ®ä¼ è¾“ï¼Œå¿…é¡»è¦æ˜¯ä¸€ä¸ªä¸»è®¾å¤‡æ‰å¯ä»¥ï¼ŒCPUå°±æ˜¯ä¸»è®¾å¤‡ã€‚è€Œæˆ‘ä»¬ä»è®¾å¤‡ï¼ˆæ¯”å¦‚ç¡¬ç›˜ï¼‰åªèƒ½æ¥å—æ•°æ®ä¼ è¾“ã€‚æ‰€ä»¥ï¼Œå¦‚æœé€šè¿‡CPUæ¥ä¼ è¾“æ•°æ®ï¼Œè¦ä¹ˆæ˜¯CPUä»I/Oè®¾å¤‡è¯»æ•°æ®ï¼Œè¦ä¹ˆæ˜¯CPUå‘I/Oè®¾å¤‡å†™æ•°æ®ã€‚</p><p>è¿™ä¸ªæ—¶å€™ä½ å¯èƒ½è¦é—®äº†ï¼Œé‚£æˆ‘ä»¬çš„I/Oè®¾å¤‡ä¸èƒ½å‘ä¸»è®¾å¤‡å‘èµ·è¯·æ±‚ä¹ˆï¼Ÿå¯ä»¥æ˜¯å¯ä»¥ï¼Œä¸è¿‡è¿™ä¸ªå‘é€çš„ä¸æ˜¯æ•°æ®å†…å®¹ï¼Œè€Œæ˜¯æ§åˆ¶ä¿¡å·ã€‚I/Oè®¾å¤‡å¯ä»¥å‘Šè¯‰CPUï¼Œæˆ‘è¿™é‡Œæœ‰æ•°æ®è¦ä¼ è¾“ç»™ä½ ï¼Œä½†æ˜¯å®é™…æ•°æ®æ˜¯CPUæ‹‰èµ°çš„ï¼Œè€Œä¸æ˜¯I/Oè®¾å¤‡æ¨ç»™CPUçš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/99/bc/9998b67238044aad60d2aa0735b98ebc.jpeg?wh=2269*1513\" alt=\"\"></p><p>ä¸è¿‡ï¼ŒDMACå°±å¾ˆæœ‰æ„æ€äº†ï¼Œå®ƒæ—¢æ˜¯ä¸€ä¸ªä¸»è®¾å¤‡ï¼Œåˆæ˜¯ä¸€ä¸ªä»è®¾å¤‡ã€‚å¯¹äºCPUæ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªä»è®¾å¤‡ï¼›å¯¹äºç¡¬ç›˜è¿™æ ·çš„IOè®¾å¤‡æ¥è¯´å‘¢ï¼Œå®ƒåˆå˜æˆäº†ä¸€ä¸ªä¸»è®¾å¤‡ã€‚é‚£ä½¿ç”¨DMACè¿›è¡Œæ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“çœ‹çœ‹ã€‚</p><p>1.é¦–å…ˆï¼ŒCPUè¿˜æ˜¯ä½œä¸ºä¸€ä¸ªä¸»è®¾å¤‡ï¼Œå‘DMACè®¾å¤‡å‘èµ·è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚ï¼Œå…¶å®å°±æ˜¯åœ¨DMACé‡Œé¢ä¿®æ”¹é…ç½®å¯„å­˜å™¨ã€‚</p><p>2.CPUä¿®æ”¹DMACçš„é…ç½®çš„æ—¶å€™ï¼Œä¼šå‘Šè¯‰DMACè¿™æ ·å‡ ä¸ªä¿¡æ¯ï¼š</p><ul>\n<li>é¦–å…ˆæ˜¯<strong>æºåœ°å€çš„åˆå§‹å€¼ä»¥åŠä¼ è¾“æ—¶å€™çš„åœ°å€å¢å‡æ–¹å¼</strong>ã€‚<br>\næ‰€è°“æºåœ°å€ï¼Œå°±æ˜¯æ•°æ®è¦ä»å“ªé‡Œä¼ è¾“è¿‡æ¥ã€‚å¦‚æœæˆ‘ä»¬è¦ä»å†…å­˜é‡Œé¢å†™å…¥æ•°æ®åˆ°ç¡¬ç›˜ä¸Šï¼Œé‚£ä¹ˆå°±æ˜¯è¦è¯»å–çš„æ•°æ®åœ¨å†…å­˜é‡Œé¢çš„åœ°å€ã€‚å¦‚æœæ˜¯ä»ç¡¬ç›˜è¯»å–æ•°æ®åˆ°å†…å­˜é‡Œï¼Œé‚£å°±æ˜¯ç¡¬ç›˜çš„I/Oæ¥å£çš„åœ°å€ã€‚<br>\næˆ‘ä»¬è®²è¿‡æ€»çº¿çš„æ—¶å€™è¯´è¿‡ï¼ŒI/Oçš„åœ°å€å¯ä»¥æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç«¯å£åœ°å€ã€‚è€Œåœ°å€çš„å¢å‡æ–¹å¼å°±æ˜¯è¯´ï¼Œæ•°æ®æ˜¯ä»å¤§çš„åœ°å€å‘å°çš„åœ°å€ä¼ è¾“ï¼Œè¿˜æ˜¯ä»å°çš„åœ°å€å¾€å¤§çš„åœ°å€ä¼ è¾“ã€‚</li>\n<li>å…¶æ¬¡æ˜¯<strong>ç›®æ ‡åœ°å€åˆå§‹å€¼å’Œä¼ è¾“æ—¶å€™çš„åœ°å€å¢å‡æ–¹å¼</strong>ã€‚ç›®æ ‡åœ°å€è‡ªç„¶å°±æ˜¯å’Œæºåœ°å€å¯¹åº”çš„è®¾å¤‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ•°æ®ä¼ è¾“çš„ç›®çš„åœ°ã€‚</li>\n<li>ç¬¬ä¸‰ä¸ªè‡ªç„¶æ˜¯<strong>è¦ä¼ è¾“çš„æ•°æ®é•¿åº¦</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸€å…±è¦ä¼ è¾“å¤šå°‘æ•°æ®ã€‚</li>\n</ul><p>3.è®¾ç½®å®Œè¿™äº›ä¿¡æ¯ä¹‹åï¼ŒDMACå°±ä¼šå˜æˆä¸€ä¸ªç©ºé—²çš„çŠ¶æ€ï¼ˆIdleï¼‰ã€‚</p><p>4.å¦‚æœæˆ‘ä»¬è¦ä»ç¡¬ç›˜ä¸Šå¾€å†…å­˜é‡Œé¢åŠ è½½æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç¡¬ç›˜å°±ä¼šå‘DMACå‘èµ·ä¸€ä¸ªæ•°æ®ä¼ è¾“è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚å¹¶ä¸æ˜¯é€šè¿‡æ€»çº¿ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªé¢å¤–çš„è¿çº¿ã€‚</p><p>5.ç„¶åï¼Œæˆ‘ä»¬çš„DMACéœ€è¦å†é€šè¿‡ä¸€ä¸ªé¢å¤–çš„è¿çº¿å“åº”è¿™ä¸ªç”³è¯·ã€‚</p><p>6.äºæ˜¯ï¼ŒDMACè¿™ä¸ªèŠ¯ç‰‡ï¼Œå°±å‘ç¡¬ç›˜çš„æ¥å£å‘èµ·è¦æ€»çº¿è¯»çš„ä¼ è¾“è¯·æ±‚ã€‚æ•°æ®å°±ä»ç¡¬ç›˜é‡Œé¢ï¼Œè¯»åˆ°äº†DMACçš„æ§åˆ¶å™¨é‡Œé¢ã€‚</p><p>7.ç„¶åï¼ŒDMACå†å‘æˆ‘ä»¬çš„å†…å­˜å‘èµ·æ€»çº¿å†™çš„æ•°æ®ä¼ è¾“è¯·æ±‚ï¼ŒæŠŠæ•°æ®å†™å…¥åˆ°å†…å­˜é‡Œé¢ã€‚</p><p>8.DMACä¼šåå¤è¿›è¡Œä¸Šé¢ç¬¬6ã€7æ­¥çš„æ“ä½œï¼Œç›´åˆ°DMACçš„å¯„å­˜å™¨é‡Œé¢è®¾ç½®çš„æ•°æ®é•¿åº¦ä¼ è¾“å®Œæˆã€‚</p><p>9.æ•°æ®ä¼ è¾“å®Œæˆä¹‹åï¼ŒDMACé‡æ–°å›åˆ°ç¬¬3æ­¥çš„ç©ºé—²çŠ¶æ€ã€‚</p><p>æ‰€ä»¥ï¼Œæ•´ä¸ªæ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸æ˜¯é€šè¿‡CPUæ¥æ¬è¿æ•°æ®ï¼Œè€Œæ˜¯ç”±DMACè¿™ä¸ªèŠ¯ç‰‡æ¥æ¬è¿æ•°æ®ã€‚ä½†æ˜¯CPUåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚å› ä¸ºä¼ è¾“ä»€ä¹ˆæ•°æ®ï¼Œä»å“ªé‡Œä¼ è¾“åˆ°å“ªé‡Œï¼Œå…¶å®è¿˜æ˜¯ç”±CPUæ¥è®¾ç½®çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼ŒDMACè¢«å«ä½œâ€œåå¤„ç†å™¨â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c9/8e/c9ed34b47b0cd33867c581772d8eff8e.jpeg?wh=1456*1336\" alt=\"\"></p><center><span class=\"reference\">ç°åœ¨çš„å¤–è®¾é‡Œé¢ï¼Œå¾ˆå¤šéƒ½å†…ç½®äº†DMAC</span></center><p>æœ€æ—©ï¼Œè®¡ç®—æœºé‡Œæ˜¯æ²¡æœ‰DMACçš„ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ˜¯ç”±CPUæ¥æ¬è¿çš„ã€‚éšç€äººä»¬å¯¹äºæ•°æ®ä¼ è¾“çš„éœ€æ±‚è¶Šæ¥è¶Šå¤šï¼Œå…ˆæ˜¯å‡ºç°äº†ä¸»æ¿ä¸Šç‹¬ç«‹çš„DMACæ§åˆ¶å™¨ã€‚åˆ°äº†ä»Šå¤©ï¼Œå„ç§I/Oè®¾å¤‡è¶Šæ¥è¶Šå¤šï¼Œæ•°æ®ä¼ è¾“çš„éœ€æ±‚è¶Šæ¥è¶Šå¤æ‚ï¼Œä½¿ç”¨çš„åœºæ™¯å„ä¸ç›¸åŒã€‚åŠ ä¹‹æ˜¾ç¤ºå™¨ã€ç½‘å¡ã€ç¡¬ç›˜å¯¹äºæ•°æ®ä¼ è¾“çš„éœ€æ±‚éƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å„ä¸ªè®¾å¤‡é‡Œé¢éƒ½æœ‰è‡ªå·±çš„DMACèŠ¯ç‰‡äº†ã€‚</p><h2>ä¸ºä»€ä¹ˆé‚£ä¹ˆå¿«ï¼Ÿä¸€èµ·æ¥çœ‹Kafkaçš„å®ç°åŸç†</h2><p>äº†è§£äº†DMACæ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Œé‚£ä½ å¯èƒ½è¦é—®äº†ï¼Œè¿™å’Œæˆ‘ä»¬å®é™…è¿›è¡Œç¨‹åºå¼€å‘æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿæœ‰ä»€ä¹ˆAPIï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨ä¸€ä¸‹ï¼Œå°±èƒ½åŠ é€Ÿæ•°æ®ä¼ è¾“ï¼Œå‡å°‘CPUå ç”¨å—ï¼Ÿ</p><p>ä½ è¿˜åˆ«è¯´ï¼Œè¿‡å»å‡ å¹´çš„å¤§æ•°æ®æµªæ½®é‡Œé¢ï¼Œè¿˜çœŸæœ‰ä¸€ä¸ªå¼€æºé¡¹ç›®å¾ˆå¥½åœ°åˆ©ç”¨äº†DMAçš„æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œé€šè¿‡DMAçš„æ–¹å¼å®ç°äº†éå¸¸å¤§çš„æ€§èƒ½æå‡ã€‚è¿™ä¸ªé¡¹ç›®å°±æ˜¯<strong>Kafka</strong>ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹çœ‹å®ƒç©¶ç«Ÿæ˜¯æ€ä¹ˆåˆ©ç”¨DMAçš„ã€‚</p><p>Kafkaæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†å®æ—¶æ•°æ®çš„ç®¡é“ï¼Œæˆ‘ä»¬å¸¸å¸¸ç”¨å®ƒæ¥åšä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ–è€…ç”¨æ¥æ”¶é›†å’Œè½åœ°æµ·é‡çš„æ—¥å¿—ã€‚ä½œä¸ºä¸€ä¸ªå¤„ç†å®æ—¶æ•°æ®å’Œæ—¥å¿—çš„ç®¡é“ï¼Œç“¶é¢ˆè‡ªç„¶ä¹Ÿåœ¨I/Oå±‚é¢ã€‚</p><p>Kafkaé‡Œé¢ä¼šæœ‰ä¸¤ç§å¸¸è§çš„æµ·é‡æ•°æ®ä¼ è¾“çš„æƒ…å†µã€‚ä¸€ç§æ˜¯ä»ç½‘ç»œä¸­æ¥æ”¶ä¸Šæ¸¸çš„æ•°æ®ï¼Œç„¶åéœ€è¦è½åœ°åˆ°æœ¬åœ°çš„ç£ç›˜ä¸Šï¼Œç¡®ä¿æ•°æ®ä¸ä¸¢å¤±ã€‚å¦ä¸€ç§æƒ…å†µå‘¢ï¼Œåˆ™æ˜¯ä»æœ¬åœ°ç£ç›˜ä¸Šè¯»å–å‡ºæ¥ï¼Œé€šè¿‡ç½‘ç»œå‘é€å‡ºå»ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹åä¸€ç§æƒ…å†µï¼Œä»ç£ç›˜è¯»æ•°æ®å‘é€åˆ°ç½‘ç»œä¸Šå»ã€‚å¦‚æœæˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼Œæœ€ç›´è§‚çš„åŠæ³•ï¼Œè‡ªç„¶æ˜¯ç”¨ä¸€ä¸ªæ–‡ä»¶è¯»æ“ä½œï¼Œä»ç£ç›˜ä¸ŠæŠŠæ•°æ®è¯»åˆ°å†…å­˜é‡Œé¢æ¥ï¼Œç„¶åå†ç”¨ä¸€ä¸ªSocketï¼ŒæŠŠè¿™äº›æ•°æ®å‘é€åˆ°ç½‘ç»œä¸Šå»ã€‚</p><pre><code>File.read(fileDesc, buf, len);\nSocket.send(socket, buf, len);\n</code></pre><center><a href=\"https://developer.ibm.com/articles/j-zerocopy/\">ä»£ç æ¥æº</a></center><center><span class=\"reference\">è¿™æ®µä¼ªä»£ç ï¼Œæ¥è‡ªIBM Developer Worksä¸Šå…³äºZero Copyçš„æ–‡ç« </span></center><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ•°æ®ä¸€å…±å‘ç”Ÿäº†å››æ¬¡ä¼ è¾“çš„è¿‡ç¨‹ã€‚å…¶ä¸­ä¸¤æ¬¡æ˜¯DMAçš„ä¼ è¾“ï¼Œå¦å¤–ä¸¤æ¬¡ï¼Œåˆ™æ˜¯é€šè¿‡CPUæ§åˆ¶çš„ä¼ è¾“ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“çœ‹çœ‹è¿™ä¸ªè¿‡ç¨‹ã€‚</p><p>ç¬¬ä¸€æ¬¡ä¼ è¾“ï¼Œæ˜¯ä»ç¡¬ç›˜ä¸Šï¼Œè¯»åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„ç¼“å†²åŒºé‡Œã€‚è¿™ä¸ªä¼ è¾“æ˜¯é€šè¿‡DMAæ¬è¿çš„ã€‚</p><p>ç¬¬äºŒæ¬¡ä¼ è¾“ï¼Œéœ€è¦ä»å†…æ ¸ç¼“å†²åŒºé‡Œé¢çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°æˆ‘ä»¬åº”ç”¨åˆ†é…çš„å†…å­˜é‡Œé¢ã€‚è¿™ä¸ªä¼ è¾“æ˜¯é€šè¿‡CPUæ¬è¿çš„ã€‚</p><p>ç¬¬ä¸‰æ¬¡ä¼ è¾“ï¼Œè¦ä»æˆ‘ä»¬åº”ç”¨çš„å†…å­˜é‡Œé¢ï¼Œå†å†™åˆ°æ“ä½œç³»ç»Ÿçš„Socketçš„ç¼“å†²åŒºé‡Œé¢å»ã€‚è¿™ä¸ªä¼ è¾“ï¼Œè¿˜æ˜¯ç”±CPUæ¬è¿çš„ã€‚</p><p>æœ€åä¸€æ¬¡ä¼ è¾“ï¼Œéœ€è¦å†ä»Socketçš„ç¼“å†²åŒºé‡Œé¢ï¼Œå†™åˆ°ç½‘å¡çš„ç¼“å†²åŒºé‡Œé¢å»ã€‚è¿™ä¸ªä¼ è¾“åˆæ˜¯é€šè¿‡DMAæ¬è¿çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e0/d5/e0e85505e793e804e3b396fc50871cd5.jpg?wh=2376*1653\" alt=\"\"></p><p>è¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥å›è¿‡å¤´çœ‹çœ‹è¿™ä¸ªè¿‡ç¨‹ã€‚æˆ‘ä»¬åªæ˜¯è¦â€œæ¬è¿â€ä¸€ä»½æ•°æ®ï¼Œç»“æœå´æ•´æ•´æ¬è¿äº†å››æ¬¡ã€‚è€Œä¸”è¿™é‡Œé¢ï¼Œä»å†…æ ¸çš„è¯»ç¼“å†²åŒºä¼ è¾“åˆ°åº”ç”¨çš„å†…å­˜é‡Œï¼Œå†ä»åº”ç”¨çš„å†…å­˜é‡Œä¼ è¾“åˆ°Socketçš„ç¼“å†²åŒºé‡Œï¼Œå…¶å®éƒ½æ˜¯æŠŠåŒä¸€ä»½æ•°æ®åœ¨å†…å­˜é‡Œé¢æ¬è¿æ¥æ¬è¿å»ï¼Œç‰¹åˆ«æ²¡æœ‰æ•ˆç‡ã€‚</p><p>åƒKafkaè¿™æ ·çš„åº”ç”¨åœºæ™¯ï¼Œå…¶å®å¤§éƒ¨åˆ†æœ€ç»ˆåˆ©ç”¨åˆ°çš„ç¡¬ä»¶èµ„æºï¼Œå…¶å®åˆéƒ½æ˜¯åœ¨å¹²è¿™ä¸ªæ¬è¿æ•°æ®çš„äº‹å„¿ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±éœ€è¦å°½å¯èƒ½åœ°å‡å°‘æ•°æ®æ¬è¿çš„éœ€æ±‚ã€‚</p><p>äº‹å®ä¸Šï¼ŒKafkaåšçš„äº‹æƒ…å°±æ˜¯ï¼ŒæŠŠè¿™ä¸ªæ•°æ®æ¬è¿çš„æ¬¡æ•°ï¼Œä»ä¸Šé¢çš„å››æ¬¡ï¼Œå˜æˆäº†ä¸¤æ¬¡ï¼Œå¹¶ä¸”åªæœ‰DMAæ¥è¿›è¡Œæ•°æ®æ¬è¿ï¼Œè€Œä¸éœ€è¦CPUã€‚</p><pre><code>@Override\npublic long transferFrom(FileChannel fileChannel, long position, long count) throws IOException {\n    return fileChannel.transferTo(position, count, socketChannel);\n}\n</code></pre><center><span class=\"reference\">å¦‚æœä½ å±‚å±‚è¿½è¸ªKafkaçš„ä»£ç ï¼Œä½ ä¼šå‘ç°ï¼Œæœ€ç»ˆå®ƒè°ƒç”¨äº†Java  NIOåº“é‡Œçš„transferToæ–¹æ³•</span></center><p>Kafkaçš„ä»£ç è°ƒç”¨äº†Java NIOåº“ï¼Œå…·ä½“æ˜¯FileChannelé‡Œé¢çš„transferToæ–¹æ³•ã€‚æˆ‘ä»¬çš„æ•°æ®å¹¶æ²¡æœ‰è¯»åˆ°ä¸­é—´çš„åº”ç”¨å†…å­˜é‡Œé¢ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡Channelï¼Œå†™å…¥åˆ°å¯¹åº”çš„ç½‘ç»œè®¾å¤‡é‡Œã€‚å¹¶ä¸”ï¼Œå¯¹äºSocketçš„æ“ä½œï¼Œä¹Ÿä¸æ˜¯å†™å…¥åˆ°Socketçš„Bufferé‡Œé¢ï¼Œè€Œæ˜¯ç›´æ¥æ ¹æ®æè¿°ç¬¦ï¼ˆDescriptorï¼‰å†™å…¥åˆ°ç½‘å¡çš„ç¼“å†²åŒºé‡Œé¢ã€‚äºæ˜¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¹‹ä¸­ï¼Œæˆ‘ä»¬åªè¿›è¡Œäº†ä¸¤æ¬¡æ•°æ®ä¼ è¾“ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/59/ab/596042d111ad9b871045d970a10464ab.jpg?wh=2116*1578\" alt=\"\"></p><p>ç¬¬ä¸€æ¬¡ï¼Œæ˜¯é€šè¿‡DMAï¼Œä»ç¡¬ç›˜ç›´æ¥è¯»åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„è¯»ç¼“å†²åŒºé‡Œé¢ã€‚ç¬¬äºŒæ¬¡ï¼Œåˆ™æ˜¯æ ¹æ®Socketçš„æè¿°ç¬¦ä¿¡æ¯ï¼Œç›´æ¥ä»è¯»ç¼“å†²åŒºé‡Œé¢ï¼Œå†™å…¥åˆ°ç½‘å¡çš„ç¼“å†²åŒºé‡Œé¢ã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬åŒä¸€ä»½æ•°æ®ä¼ è¾“çš„æ¬¡æ•°ä»å››æ¬¡å˜æˆäº†ä¸¤æ¬¡ï¼Œå¹¶ä¸”æ²¡æœ‰é€šè¿‡CPUæ¥è¿›è¡Œæ•°æ®æ¬è¿ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é€šè¿‡DMAæ¥è¿›è¡Œä¼ è¾“çš„ã€‚</p><p>åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢ï¼Œæˆ‘ä»¬æ²¡æœ‰åœ¨å†…å­˜å±‚é¢å»â€œå¤åˆ¶ï¼ˆCopyï¼‰â€æ•°æ®ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸º<strong>é›¶æ‹·è´</strong>ï¼ˆZero-Copyï¼‰ã€‚</p><p>IBM Developer Worksé‡Œé¢æœ‰ä¸€ç¯‡æ–‡ç« ï¼Œä¸“é—¨å†™è¿‡ç¨‹åºæ¥æµ‹è¯•è¿‡ï¼Œåœ¨åŒæ ·çš„ç¡¬ä»¶ä¸‹ï¼Œä½¿ç”¨é›¶æ‹·è´èƒ½å¤Ÿå¸¦æ¥çš„æ€§èƒ½æå‡ã€‚æˆ‘åœ¨è¿™é‡Œæ”¾ä¸Šè¿™ç¯‡æ–‡ç« <a href=\"https://developer.ibm.com/articles/j-zerocopy/\">é“¾æ¥</a>ã€‚åœ¨è¿™ç¯‡æ–‡ç« æœ€åï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºä¼ è¾“æ•°æ®é‡çš„å¤§å°ï¼Œä¼ è¾“åŒæ ·çš„æ•°æ®ï¼Œä½¿ç”¨äº†é›¶æ‹·è´èƒ½å¤Ÿç¼©çŸ­65%çš„æ—¶é—´ï¼Œå¤§å¹…åº¦æå‡äº†æœºå™¨ä¼ è¾“æ•°æ®çš„ååé‡ã€‚æƒ³è¦æ·±å…¥äº†è§£é›¶æ‹·è´ï¼Œå»ºè®®ä½ å¯ä»¥ä»”ç»†è¯»ä¸€è¯»è¿™ç¯‡æ–‡ç« ã€‚</p><h2>æ€»ç»“å»¶ä¼¸</h2><p>è®²åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å¯¹DMAçš„åŸç†ã€ä½œç”¨å’Œæ•ˆæœéƒ½æœ‰æ‰€ç†è§£äº†ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å›é¡¾æ€»ç»“ä¸€ä¸‹ã€‚</p><p>å¦‚æœæˆ‘ä»¬å§‹ç»ˆè®©CPUæ¥è¿›è¡Œå„ç§æ•°æ®ä¼ è¾“å·¥ä½œï¼Œä¼šç‰¹åˆ«æµªè´¹ã€‚ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬çš„æ•°æ®ä¼ è¾“å·¥ä½œç”¨ä¸åˆ°å¤šå°‘CPUæ ¸å¿ƒçš„â€œè®¡ç®—â€åŠŸèƒ½ã€‚å¦ä¸€æ–¹é¢ï¼ŒCPUçš„è¿è½¬é€Ÿåº¦ä¹Ÿæ¯”I/Oæ“ä½œè¦å¿«å¾ˆå¤šã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿç»™CPUâ€œå‡è´Ÿâ€ã€‚</p><p>äºæ˜¯ï¼Œå·¥ç¨‹å¸ˆä»¬å°±åœ¨ä¸»æ¿ä¸Šæ”¾ä¸Šäº†DMACè¿™æ ·ä¸€ä¸ªåå¤„ç†å™¨èŠ¯ç‰‡ã€‚é€šè¿‡è¿™ä¸ªèŠ¯ç‰‡ï¼ŒCPUåªéœ€è¦å‘Šè¯‰DMACï¼Œæˆ‘ä»¬è¦ä¼ è¾“ä»€ä¹ˆæ•°æ®ï¼Œä»å“ªé‡Œæ¥ï¼Œåˆ°å“ªé‡Œå»ï¼Œå°±å¯ä»¥æ”¾å¿ƒç¦»å¼€äº†ã€‚åç»­çš„å®é™…æ•°æ®ä¼ è¾“å·¥ä½œï¼Œéƒ½ä¼šç”±DMACæ¥å®Œæˆã€‚éšç€ç°ä»£è®¡ç®—æœºå„ç§å¤–è®¾ç¡¬ä»¶è¶Šæ¥è¶Šå¤šï¼Œå…‰ä¸€ä¸ªé€šç”¨çš„DMACèŠ¯ç‰‡ä¸å¤Ÿäº†ï¼Œæˆ‘ä»¬åœ¨å„ä¸ªå¤–è®¾ä¸Šéƒ½åŠ ä¸Šäº†DMACèŠ¯ç‰‡ï¼Œä½¿å¾—CPUå¾ˆå°‘å†éœ€è¦å…³å¿ƒæ•°æ®ä¼ è¾“çš„å·¥ä½œäº†ã€‚</p><p>åœ¨æˆ‘ä»¬å®é™…çš„ç³»ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­ï¼Œåˆ©ç”¨å¥½DMAçš„æ•°æ®ä¼ è¾“æœºåˆ¶ï¼Œä¹Ÿå¯ä»¥å¤§å¹…æå‡I/Oçš„ååç‡ã€‚æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯Kafkaã€‚</p><p>ä¼ ç»Ÿåœ°ä»ç¡¬ç›˜è¯»å–æ•°æ®ï¼Œç„¶åå†é€šè¿‡ç½‘å¡å‘å¤–å‘é€ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œå››æ¬¡æ•°æ®ä¼ è¾“ï¼Œå…¶ä¸­æœ‰ä¸¤æ¬¡æ˜¯å‘ç”Ÿåœ¨å†…å­˜é‡Œçš„ç¼“å†²åŒºå’Œå¯¹åº”çš„ç¡¬ä»¶è®¾å¤‡ä¹‹é—´ï¼Œæˆ‘ä»¬æ²¡æ³•èŠ‚çœæ‰ã€‚ä½†æ˜¯è¿˜æœ‰ä¸¤æ¬¡ï¼Œå®Œå…¨æ˜¯é€šè¿‡CPUåœ¨å†…å­˜é‡Œé¢è¿›è¡Œæ•°æ®å¤åˆ¶ã€‚</p><p>åœ¨Kafkaé‡Œï¼Œé€šè¿‡Javaçš„NIOé‡Œé¢FileChannelçš„transferToæ–¹æ³•è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨æŠŠæ•°æ®å¤åˆ¶åˆ°æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„å†…å­˜é‡Œé¢ã€‚é€šè¿‡DMAçš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®ä»å†…å­˜ç¼“å†²åŒºç›´æ¥å†™åˆ°ç½‘å¡çš„ç¼“å†²åŒºé‡Œé¢ã€‚åœ¨ä½¿ç”¨äº†è¿™æ ·çš„é›¶æ‹·è´çš„æ–¹æ³•ä¹‹åå‘¢ï¼Œæˆ‘ä»¬ä¼ è¾“åŒæ ·æ•°æ®çš„æ—¶é—´ï¼Œå¯ä»¥ç¼©å‡ä¸ºåŸæ¥çš„1/3ï¼Œç›¸å½“äºæå‡äº†3å€çš„ååç‡ã€‚</p><p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼ŒKafkaæ˜¯ç›®å‰å®æ—¶æ•°æ®ä¼ è¾“ç®¡é“çš„æ ‡å‡†è§£å†³æ–¹æ¡ˆã€‚</p><h2>æ¨èé˜…è¯»</h2><p>å­¦å®Œäº†è¿™ä¸€è®²ä¹‹åï¼Œæˆ‘æ¨èä½ é˜…è¯»ä¸€ä¸‹Kafkaçš„è®ºæ–‡ï¼Œ<a href=\"http://notes.stephenholiday.com/Kafka.pdf\">Kakfa:a Distrubted Messaging System for Log Processing</a>ã€‚Kafkaçš„è®ºæ–‡å…¶å®éå¸¸ç®€å•æ˜“æ‡‚ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è®©ä½ äº†è§£ç³»ç»Ÿã€æ—¥å¿—ã€åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…¥é—¨ææ–™ã€‚</p><p>å¦‚æœä½ æƒ³è¦è¿›ä¸€æ­¥å»äº†è§£Kafkaï¼Œä¹Ÿå¯ä»¥è®¢é˜…æå®¢æ—¶é—´çš„ä¸“æ â€œ<a href=\"https://time.geekbang.org/column/intro/191\">Kafkaæ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜</a>â€ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>ä½ å¯ä»¥è‡ªå·±å°è¯•å†™ä¸€æ®µä½¿ç”¨é›¶æ‹·è´å’Œä¸ä½¿ç”¨é›¶æ‹·è´ä¼ è¾“æ•°æ®çš„ä»£ç ï¼Œç„¶åçœ‹ä¸€çœ‹ä¸¤è€…ä¹‹é—´çš„æ€§èƒ½å·®å¼‚ã€‚ä½ å¯ä»¥çœ‹çœ‹ï¼Œé›¶æ‹·è´èƒ½å¤Ÿå¸¦æ¥å¤šå°‘ååé‡æå‡ã€‚</p><p>æ¬¢è¿ä½ æŠŠä½ è¿è¡Œç¨‹åºçš„ç»“æœå†™åœ¨ç•™è¨€åŒºï¼Œå’Œå¤§å®¶ä¸€èµ·è®¨è®ºã€åˆ†äº«ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªé—®é¢˜åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œä¸€èµ·è¯•ä¸€è¯•ï¼Œçœ‹çœ‹DMAå’Œé›¶æ‹·è´ï¼Œæ˜¯å¦çœŸçš„å¯ä»¥å¤§å¹…åº¦æå‡æ€§èƒ½ã€‚</p><p></p>","neighbors":{"left":{"article_title":"47 | SSDç¡¬ç›˜ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•å®Œæˆæ€§èƒ½ä¼˜åŒ–çš„KPIï¼Ÿ","id":118191},"right":{"article_title":"49 | æ•°æ®å®Œæ•´æ€§ï¼ˆä¸Šï¼‰ï¼šç¡¬ä»¶åäº†æ€ä¹ˆåŠï¼Ÿ","id":119901}},"comments":[{"had_liked":false,"id":138020,"user_name":"ç„°ç«","can_delete":false,"product_type":"c1","uid":1244606,"ip_address":"","ucode":"D3353B386DE3B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/fd/be/079c78c7.jpg","comment_is_top":false,"comment_ctime":1569984361,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"289332793193","product_id":100026001,"comment_content":"DMACï¼šæˆ‘ä»¬ä¸åŠ å·¥æ•°æ®ï¼Œåªæ˜¯æ•°æ®çš„æ¬è¿å·¥","like_count":68,"discussions":[{"author":{"id":2413071,"avatar":"https://static001.geekbang.org/account/avatar/00/24/d2/0f/8f14c85b.jpg","nickname":"çº¢è–¯æ¿æ —","note":"","ucode":"236BE91291A575","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351304,"discussion_content":"CPUæ˜¯è€æ¿ï¼ŒDMAæ˜¯å‘˜å·¥ï¼Œä¸èƒ½è®©æ¬è¿æ•°æ®çš„æ´»å½±å“äº†è€æ¿çš„æ€è€ƒ[ç‹—å¤´]","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1614235779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1637933,"avatar":"https://static001.geekbang.org/account/avatar/00/18/fe/2d/e23fc6ee.jpg","nickname":"æ·±æ°´è“","note":"","ucode":"3E3B195DE54DE1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195695,"discussion_content":"è¿™ä¸ªå¿…è¦å¾ˆæ£’å¾ˆå–œæ¬¢ã€‚å…¶å®DMACä¹Ÿæ˜¯å¯ä»¥åŠ å·¥æ•°æ®çš„ï¼Œä¾‹å¦‚æ•°æ®çš„æ‹¼æ¥ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1583298926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125949,"user_name":"å…è´¹çš„äºº","can_delete":false,"product_type":"c1","uid":1032106,"ip_address":"","ucode":"2B12D8ED63C564","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/aa/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1566280248,"is_pvip":false,"replies":[{"id":"52657","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1569661647,"ip_address":"","comment_id":125949,"utype":1}],"discussion_count":1,"race_medal":0,"score":"134710266424","product_id":100026001,"comment_content":"ä»kafkaè®ºæ–‡é‡Œæ‘˜çš„ï¼š<br>In addition we optimize the network access for consumers. Kafka<br>is a multi-subscriber system and a single message may be<br>consumed multiple times by different consumer applications. A<br>typical approach to sending bytes from a local file to a remote<br>socket involves the following steps: (1) read data from the storage<br>media to the page cache in an OS, (2) copy data in the page cache<br>to an application buffer, (3) copy application buffer to another<br>kernel buffer, (4) send the kernel buffer to the socket. This<br>includes 4 data copying and 2 system calls. On Linux and other<br>Unix operating systems, there exists a sendfile API [5] that can<br>directly transfer bytes from a file channel to a socket channel.<br>This typically avoids 2 of the copies and 1 system call introduced<br>in steps (2) and (3). Kafka exploits the sendfile API to efficiently<br>deliver bytes in a log segment file from a broker to a consumer.","like_count":32,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463762,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569661647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235228,"user_name":"Hellboy1989","can_delete":false,"product_type":"c1","uid":1510970,"ip_address":"","ucode":"5843AF09CDA063","user_header":"https://static001.geekbang.org/account/avatar/00/17/0e/3a/a84da865.jpg","comment_is_top":false,"comment_ctime":1594947583,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"96084228095","product_id":100026001,"comment_content":"kafkadé‚£ä¹ˆå¿«ï¼Œé›¶æ‹·è´æ˜¯å…¶ä¸­ä¸€é¢ï¼Œä»–çš„ç¡¬ç›˜é¡ºåºè¯»å†™ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„åŸå› ã€‚","like_count":23,"discussions":[{"author":{"id":1165671,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c9/67/0f74bf61.jpg","nickname":"æ˜µç§°è¿˜æ²¡æƒ³å¥½ã€‚","note":"","ucode":"21E6001F29951B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577544,"discussion_content":"è¿˜æœ‰ æ¶ˆæ¯æ‰¹å¤„ç†ã€äºŒåˆ†æŸ¥æ‰¾ï¼ˆ*.index -&gt; *.logï¼‰ã€Page Cacheç­‰ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656170146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125826,"user_name":"yhh","can_delete":false,"product_type":"c1","uid":1105102,"ip_address":"","ucode":"B566981788B6A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/dc/ce/a144dea1.jpg","comment_is_top":false,"comment_ctime":1566262896,"is_pvip":false,"replies":[{"id":"52656","content":"yhhåŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼Œé‚£å°±ä¸èƒ½äº†ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•°æ®å¤åˆ¶åˆ°å†…å­˜é‡Œé¢æ¥ï¼Œåœ¨ç”¨æˆ·æ€ç”¨ç¨‹åºè¿›è¡Œå¤„ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1569661603,"ip_address":"","comment_id":125826,"utype":1}],"discussion_count":5,"race_medal":0,"score":"87465608816","product_id":100026001,"comment_content":"å¦‚æœæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºéœ€è¦å¯¹æ•°æ®åšè¿›ä¸€æ­¥çš„åŠ å·¥ï¼Œé‚£è¿˜èƒ½ä½¿ç”¨é›¶æ‹·è´å—","like_count":21,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463706,"discussion_content":"yhhåŒå­¦ï¼Œ\n\nä½ å¥½ï¼Œé‚£å°±ä¸èƒ½äº†ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•°æ®å¤åˆ¶åˆ°å†…å­˜é‡Œé¢æ¥ï¼Œåœ¨ç”¨æˆ·æ€ç”¨ç¨‹åºè¿›è¡Œå¤„ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569661603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1500391,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e4/e7/31944ee7.jpg","nickname":"åƒå†›ä¸‡é©¬ä¸‡é©¬@","note":"","ucode":"0BDAD22123435A","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375991,"discussion_content":"nonono,åº”è¯¥è¿™æ ·é—® &#34;å¦‚æœæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºéœ€è¦å¯¹æ•°æ®åšè¿›ä¸€æ­¥çš„åŠ å·¥ï¼Œé‚£è¿˜èƒ½ä½¿ç”¨é›¶æ‹·è´æ¦‚å¿µä¸‹çš„æŠ€æœ¯æ–¹æ¡ˆæ¯”å¦‚: mmap+file  or sendfile()  or sendfile+DMA Scatter/Gather å—?&#34;","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621919009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1269827,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/43/1690d87e.jpg","nickname":"å±±ä¸˜","note":"","ucode":"28B3B82D1242E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553533,"discussion_content":"å†…æ ¸æ€å¼€å‘ä¹Ÿå¯ä»¥çš„å˜›ï¼Œä¸ä¸€å®šéœ€è¦ç”¨æˆ·æ€ç¨‹åºæ‰èƒ½ä¿®æ”¹å†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645953646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1939316,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/97/74/a933d664.jpg","nickname":"èœæˆ","note":"","ucode":"C3488A2BB44359","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1269827,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/43/1690d87e.jpg","nickname":"å±±ä¸˜","note":"","ucode":"28B3B82D1242E3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577336,"discussion_content":"å†…æ ¸ä¸åº”è¯¥å»å¤„ç†ä¸Šå±‚çš„å…·ä½“äº‹åŠ¡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1656040520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":553533,"ip_address":""},"score":577336,"extra":""}]},{"author":{"id":1014800,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","nickname":"Scott","note":"","ucode":"7E57FDCB5E5D49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5832,"discussion_content":"ä¸èƒ½ï¼Œå› ä¸ºé‚£æ ·å¿…é¡»è¦åˆ°ç”¨æˆ·ç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566476721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133579,"user_name":"soimage","can_delete":false,"product_type":"c1","uid":1011400,"ip_address":"","ucode":"82FC2D560616D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/c8/ed2926b5.jpg","comment_is_top":false,"comment_ctime":1568613586,"is_pvip":false,"replies":[{"id":"52627","content":"soimageï¼Œ<br><br>è¿™æ ·è¯´ä¹Ÿå¯¹ï¼Œä¸è¿‡ç å®Œä¹‹åæ•°æ®ä¼ è¾“å…¶å®éƒ½æ˜¯DMAçš„è¿‡ç¨‹äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1569657093,"ip_address":"","comment_id":133579,"utype":1}],"discussion_count":3,"race_medal":0,"score":"70288090322","product_id":100026001,"comment_content":"çœ‹åˆ°æœ€åï¼Œä¹Ÿæ²¡çœ‹å‡ºkafkaå¿«è·Ÿdmaæœ‰å…³ç³»ï¼Œå€’æ˜¯è·Ÿzero-copyå…³ç³»å¤§ä¸€äº›ï¼Œé€šè¿‡ç æ‰ä¸¤æ¬¡å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´çš„æ•°æ®æ‹·è´ï¼Œä»¥åŠå†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åˆ‡æ¢æˆæœ¬æ¥ä¼˜åŒ–","like_count":17,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467433,"discussion_content":"soimageï¼Œ\n\nè¿™æ ·è¯´ä¹Ÿå¯¹ï¼Œä¸è¿‡ç å®Œä¹‹åæ•°æ®ä¼ è¾“å…¶å®éƒ½æ˜¯DMAçš„è¿‡ç¨‹äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569657093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105854,"avatar":"https://static001.geekbang.org/account/avatar/00/10/df/be/c6f8953f.jpg","nickname":"ä¸‡äº‹å±‹","note":"","ucode":"57C08B85373B0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39031,"discussion_content":"ä¸æ˜¯è¦èµ°tcpå—ï¼Œæ˜¯æ‹·è´åˆ°tcpç¼“å†²åŒºå—ï¼Ÿtcpç¼“å†²åŒºå’Œç½‘å¡ç¼“å†²åŒºå•¥åŒºåˆ«ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1571880689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1096652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bb/cc/fac12364.jpg","nickname":"xxx","note":"","ucode":"E79CEA70430449","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1105854,"avatar":"https://static001.geekbang.org/account/avatar/00/10/df/be/c6f8953f.jpg","nickname":"ä¸‡äº‹å±‹","note":"","ucode":"57C08B85373B0D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577632,"discussion_content":"TCPçš„ç¼“å†²åŒºè¿˜æ˜¯åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­ï¼Œè€Œç½‘å¡ç¼“å†²åŒºåœ¨ç½‘å¡è®¾å¤‡ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656245761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":39031,"ip_address":""},"score":577632,"extra":""}]}]},{"had_liked":false,"id":185632,"user_name":"linker","can_delete":false,"product_type":"c1","uid":1803259,"ip_address":"","ucode":"6C5799F2FC2C82","user_header":"https://static001.geekbang.org/account/avatar/00/1b/83/fb/621adceb.jpg","comment_is_top":false,"comment_ctime":1583650338,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57418225186","product_id":100026001,"comment_content":"å…¶å®åº•å±‚è¿˜æ˜¯è°ƒç”¨äº†linuxçš„ç³»ç»Ÿè°ƒç”¨sendfileè¿™ä¸ªå‡½æ•°","like_count":14},{"had_liked":false,"id":227156,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1592300893,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35952039261","product_id":100026001,"comment_content":"é¢è¯•è¢«é—®åˆ°ä¸ºä»€ä¹ˆkafkaè¿™ä¹ˆå¿«ï¼Œè¿™ç¯‡æ–‡ç« è‡³å°‘å¯ä»¥ä½œä¸ºåŸå› ä¹‹ä¸€ã€‚å¯æƒœä»Šå¤©æ‰çœ‹åˆ°","like_count":9},{"had_liked":false,"id":160910,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1576059441,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35935797809","product_id":100026001,"comment_content":"ä»¥å‰åªçŸ¥é“kafkaé€šè¿‡é›¶æ‹·è´æŠ€æœ¯æé«˜äº†ååé‡ï¼Œä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Ÿè¿™ä¸‹è€å¸ˆé€šè¿‡ç¡¬ä»¶çŸ¥è¯†ä½“ç³»ç†è§£äº†ç›¸å…³æŠ€æœ¯åŸç†ï¼Œç®€ç›´å¤ªæ£’äº†","like_count":8},{"had_liked":false,"id":142144,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1571300020,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35931038388","product_id":100026001,"comment_content":"  å› ä¸ºcpuæ¯”è¾ƒå¿«ï¼Œè€Œioæ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥åœ¨å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œä¸»æ¿æˆ–è€…å¤–éƒ¨è®¾å¤‡ä¸Šæ·»åŠ äº†DMAè¿™ä¸ªioè¯»å–æ“ä½œçš„åå¤„ç†å™¨ã€‚<br> kafaka æ˜¯åˆ©ç”¨dmaçš„ç¡¬ä»¶æ¡ä»¶ï¼Œå‡å°‘ï¼Œcpuå¯¹äºæ•°æ®çš„æ¬è¿æ¬¡æ•°ï¼Œå› ä¸ºkafukaåœ¨å¤„ç†å®æ—¶æ¶ˆæ¯æ–¹é¢æ¯”è¾ƒå¿«ã€‚","like_count":9,"discussions":[{"author":{"id":1940105,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","nickname":"Aå›","note":"","ucode":"FE96F089C2312C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292786,"discussion_content":"å°†å†…æ ¸æ€å†…å­˜æ˜ å°„åˆ°ç”¨æˆ·æ€ï¼Œå°±å®ç°äº†æ•°æ®åœ¨ä¸¤æ€é—´åˆ‡æ¢çš„é›¶æ‹·è´ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1595331362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125948,"user_name":"æ–æ³¢é‚£å¥‘","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1566280208,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"35926018576","product_id":100026001,"comment_content":"è€å¸ˆ æˆ‘æƒ³é—®ä¸€ä¸‹ å¯¹äºä¼ ç»Ÿçš„å››æ­¥è¯»å–æ–‡ä»¶ç„¶åç½‘ç»œå‘é€é‡Œ æ“ä½œç³»ç»Ÿçš„å†…æ ¸ç¼“å†²åŒºæ˜¯ä¸æ˜¯ä¹Ÿåœ¨å†…å­˜çš„æŸä¸€ä¸ªåœ°æ–¹ï¼ˆåªæ˜¯ç”¨æˆ·è®¿é—®ä¸åˆ°ï¼‰ç„¶åç¬¬äºŒæ­¥ å¤åˆ¶åˆ°åº”ç”¨ç¨‹åºå†…å­˜ä¸­ äº‹å®ä¸Šå°±æ˜¯ä»å†…å­˜çš„æŸä¸€ä¸ªåœ°æ–¹å¤åˆ¶åˆ°å†…å­˜å¦ä¸€ä¸ªåœ°æ–¹ ç„¶ååº”ç”¨ç¨‹åºå°±å¯ä»¥æ“ä½œäº†","like_count":8,"discussions":[{"author":{"id":1014800,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","nickname":"Scott","note":"","ucode":"7E57FDCB5E5D49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6801,"discussion_content":"æ˜¯çš„ï¼Œkernel buffer","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1567126921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1268264,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5a/28/732d3f2f.jpg","nickname":"GEEKBANG_6638780","note":"","ucode":"952194E56FD8C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284136,"discussion_content":"è¿™é‡Œé¢å…¶å®å°±æ˜¯è®¾è®¡äº†ç³»ç»Ÿè°ƒç”¨ï¼Œå†…æ ¸æ€åˆ°ç”¨æˆ·æ€çš„åˆ‡æ¢","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1592451456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243901,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fa/fd/ec24cba7.jpg","nickname":"fcbçš„é±¼","note":"","ucode":"88667EBF09CEC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":163482,"discussion_content":"æ˜¯çš„ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸çš„ç¼“å†²åŒºç”¨æˆ·è®¿é—®ä¸åˆ°ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1581081346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141924,"user_name":"ç å†œKevinäº®","can_delete":false,"product_type":"c1","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1571270680,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27341074456","product_id":100026001,"comment_content":"è¯·é—®è€å¸ˆï¼Œæˆ‘æ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·ç†è§£ï¼Œjavaçš„fileChannelçš„apiéƒ½æ˜¯åŸºäºDMACçš„å®ç°ï¼Ÿ","like_count":6},{"had_liked":false,"id":138032,"user_name":"å‰ç«¯è¥¿ç“œå“¥","can_delete":false,"product_type":"c1","uid":1248576,"ip_address":"","ucode":"150130C34CD1C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","comment_is_top":false,"comment_ctime":1569987205,"is_pvip":false,"replies":[{"id":"53158","content":"FstaråŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼Œæˆ‘ä¸æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨çš„ä¸“å®¶ï¼Œæ‰€ä»¥å…¶ä»–WebæœåŠ¡å™¨æˆ‘ä¸å¤ªæ¸…æ¥šã€‚ä¸è¿‡Nginxçš„ç¡®æ˜¯å¯ä»¥é€šè¿‡é…ç½®sendfileçš„å¼€å…³on&#47;offæ¥æ§åˆ¶æ˜¯ä¸æ˜¯zero copyçš„","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1570084754,"ip_address":"","comment_id":138032,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23044823685","product_id":100026001,"comment_content":"æˆ‘è®°å¾— Nginx çš„é™æ€æœåŠ¡å™¨è²Œä¼¼ä¹Ÿæ˜¯é›¶æ‹·è´ã€‚å¸‚é¢ä¸Šå¸¸è§çš„webæœåŠ¡å™¨çš„é™æ€æœåŠ¡å™¨åº”è¯¥éƒ½å®ç°äº†é›¶æ‹·è´å§ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469357,"discussion_content":"FstaråŒå­¦ï¼Œ\n\nä½ å¥½ï¼Œæˆ‘ä¸æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨çš„ä¸“å®¶ï¼Œæ‰€ä»¥å…¶ä»–WebæœåŠ¡å™¨æˆ‘ä¸å¤ªæ¸…æ¥šã€‚ä¸è¿‡Nginxçš„ç¡®æ˜¯å¯ä»¥é€šè¿‡é…ç½®sendfileçš„å¼€å…³on/offæ¥æ§åˆ¶æ˜¯ä¸æ˜¯zero copyçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570084754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125394,"user_name":"coder","can_delete":false,"product_type":"c1","uid":1399673,"ip_address":"","ucode":"929E3FFD14EFC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/5b/79/d55044ac.jpg","comment_is_top":false,"comment_ctime":1566178646,"is_pvip":false,"replies":[{"id":"52659","content":"coderåŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼Œè¶…ç®—é‡Œé¢çš„rDMAæˆ‘è¿˜çœŸæ²¡æœ‰äº†è§£è¿‡ã€‚ç­‰æˆ‘æŠ½ç©ºå…ˆè‡ªå·±å­¦ä¹ ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1569661696,"ip_address":"","comment_id":125394,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23041015126","product_id":100026001,"comment_content":" è¶…ç®—é‡Œé¢æ ¸ä¸æ ¸ä¹‹é—´çš„æ•°æ®æ‹·è´ï¼Œä¸€èˆ¬ä¼šé€šè¿‡åŸºäºIBæ€»çº¿çš„RDMAæ¥å®Œæˆï¼Œå¯ä»¥é¿å…è¿‡cpuå†…æ ¸çš„å¼€é”€ï¼Œå¸Œæœ›å¾è€å¸ˆèƒ½è®²ä¸€ä¸‹rDMA","like_count":5,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463561,"discussion_content":"coderåŒå­¦ï¼Œ\n\nä½ å¥½ï¼Œè¶…ç®—é‡Œé¢çš„rDMAæˆ‘è¿˜çœŸæ²¡æœ‰äº†è§£è¿‡ã€‚ç­‰æˆ‘æŠ½ç©ºå…ˆè‡ªå·±å­¦ä¹ ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569661696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273077,"user_name":"åƒé¥­ç¡è§‰æ‰“é…±æ²¹","can_delete":false,"product_type":"c1","uid":1071668,"ip_address":"","ucode":"95EC98C2B5045B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5a/34/4cbadca6.jpg","comment_is_top":false,"comment_ctime":1610432615,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18790301799","product_id":100026001,"comment_content":"è€å¸ˆï¼Œçœ‹å®Œåå¯¹DMACè¿›è¡Œæ•°æ®ä¼ è¾“æµç¨‹æœ‰ç–‘é—®ï¼š1ã€ä¸ºä»€ä¹ˆéœ€è¦åˆšå¼€å§‹çš„ç¬¬3æ­¥  2ã€ç¬¬4çš„å‘èµ·ä¸ºä»€ä¹ˆæ˜¯ç¡¬ç›˜å‘èµ·çš„ï¼Œè€Œä¸æ˜¯DMAC ï¼Ÿ","like_count":5},{"had_liked":false,"id":127900,"user_name":"æ´»çš„æ½‡æ´’","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1566806877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14451708765","product_id":100026001,"comment_content":"ä»å»å¹´ä¸€ç›´åœ¨åœ¨ç”¨elk+kafka ä½œä¸ºæ—¥å¿—ç³»ç»Ÿï¼Œä¹‹æ‰€ä»¥é€‰æ‹©kafkaæ˜¯å› ä¸ºçŸ¥é“ä»–å¿«ï¼Œä½†æ˜¯å…·ä½“æ€ä¹ˆå¿«ï¼Ÿä¸ºä»€ä¹ˆå¿«åªæœ‰å­¦å®Œè¿™ç¯‡ä½ ä¼šè§‰å¾—ä¸€ä¸‹é€šé€äº†<br>day 48å¤©ç¬”è®°ï¼šhttps:&#47;&#47;www.cnblogs.com&#47;luoahong&#47;p&#47;11412797.html","like_count":3},{"had_liked":false,"id":125645,"user_name":"å¤§æ˜","can_delete":false,"product_type":"c1","uid":1179422,"ip_address":"","ucode":"EE63B3F69F93BD","user_header":"https://static001.geekbang.org/account/avatar/00/11/ff/1e/2a40a5ca.jpg","comment_is_top":false,"comment_ctime":1566220015,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14451121903","product_id":100026001,"comment_content":"å“ˆå“ˆå“ˆå“ˆ","like_count":3},{"had_liked":false,"id":130813,"user_name":"çºµæ¨ªå››æµ·1949","can_delete":false,"product_type":"c1","uid":1152862,"ip_address":"","ucode":"C53B9D0973A4FD","user_header":"https://static001.geekbang.org/account/avatar/00/11/97/5e/3a9928eb.jpg","comment_is_top":false,"comment_ctime":1567556559,"is_pvip":false,"replies":[{"id":"51133","content":"çœ‹è¿™ä¸ªç¨‹åºæ€ä¹ˆå†™å•Šï¼Œå¯ä»¥èµ°DMAä¹Ÿå¯ä»¥ä¸èµ°DMAã€‚<br><br>ä¸èµ°DMAå°±æ˜¯è¦é€šè¿‡user spaceåœ¨å†…å­˜é‡Œé¢å¤åˆ¶ä¸­è½¬ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568539088,"ip_address":"","comment_id":130813,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10157491151","product_id":100026001,"comment_content":"ä»Cç›˜å¤åˆ¶æ•°æ®åˆ°Dç›˜æ˜¯æ€ä¹ˆä¸ªè¿‡ç¨‹å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466142,"discussion_content":"çœ‹è¿™ä¸ªç¨‹åºæ€ä¹ˆå†™å•Šï¼Œå¯ä»¥èµ°DMAä¹Ÿå¯ä»¥ä¸èµ°DMAã€‚\n\nä¸èµ°DMAå°±æ˜¯è¦é€šè¿‡user spaceåœ¨å†…å­˜é‡Œé¢å¤åˆ¶ä¸­è½¬ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568539088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1152862,"avatar":"https://static001.geekbang.org/account/avatar/00/11/97/5e/3a9928eb.jpg","nickname":"çºµæ¨ªå››æµ·1949","note":"","ucode":"C53B9D0973A4FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196798,"discussion_content":"å¤šè°¢è€å¸ˆè§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583373802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125507,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566196823,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10156131415","product_id":100026001,"comment_content":"è€å¸ˆè®²å¾—å¥½å•Šï¼Œä¹‹å‰ä¸€ç›´ä¸æ˜¯å¾ˆç†è§£DMAæ˜¯ä»€ä¹ˆåŸç†ï¼Œåˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œè¿™ç¯‡æ–‡ç« ï¼Œæ·±å…¥æµ…å‡ºï¼Œæ„Ÿè°¢è€å¸ˆã€‚","like_count":2,"discussions":[{"author":{"id":1446025,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erTlRJ6skf7iawAeqNfIT1PPgjD7swUdRIRkX1iczjj97GNrxnsnn3QuOhkVbCLgFYAm7sMZficNTSbA/132","nickname":"senekis","note":"","ucode":"CD88681F0278FD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5413,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œç»ˆäºå¯¹é›¶æ‹·è´æŠ€æœ¯çš„åº•å±‚æœ‰äº†ä¸€å®šçš„è®¤è¯†ï¼Œä¹‹å‰å›°æƒ‘äº†å¾ˆä¹…çš„é—®é¢˜ï¼Œç»ˆäºåˆè§£å†³äº†ä¸€ä¸ªã€‚åœ¨ä½é™¢çš„ç—…åºŠä¸Šçœ‹å®Œäº†è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›ä»Šå¤©çš„æ£€æŸ¥ä¹‹åä¸ç”¨å»æ‰‹æœ¯ï¼Œèƒ½å¤Ÿæ—©ç‚¹å›åˆ°å·¥ä½œå²—ä½ä¸Šç»§ç»­ç¼–ç¨‹å•Šï¼","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1566248254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125360,"user_name":"çº¢æ³¥å°ç«ç‚‰","can_delete":false,"product_type":"c1","uid":1237681,"ip_address":"","ucode":"40D2BDEAFA65AC","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/b1/f2ac07ab.jpg","comment_is_top":false,"comment_ctime":1566174153,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10156108745","product_id":100026001,"comment_content":"å¯¹DMACçš„é•¿åº¦é…ç½®æ—¶æœºæœ‰ä¸ªç–‘é—®ï¼Œä¸€ä¸ªDMACä¸‹é¢å¯ä»¥æŒ‚å¤šä¸ªè®¾å¤‡å§ï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œä¸åŒè®¾å¤‡çš„bufferé•¿åº¦æ˜¯ä¸åŒçš„ï¼ŒDMACçš„é•¿åº¦é…ç½®åšä¸åˆ°é€šç”¨å•Šï¼Œéš¾é“æ˜¯åœ¨æ¯æ¬¡ä¼ è¾“å‰éƒ½éœ€è¦é…ç½®ä¸€æ¬¡ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1081379,"avatar":"https://static001.geekbang.org/account/avatar/00/10/80/23/33555b32.jpg","nickname":"å¤©æ¶¯æµ·è§’","note":"","ucode":"B35E85576982ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583560,"discussion_content":"ç°åœ¨æ¯ä¸ªè®¾å¤‡éƒ½æœ‰è‡ªå·±çš„dmaèŠ¯ç‰‡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660206331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188710,"avatar":"https://static001.geekbang.org/account/avatar/00/12/23/66/413c0bb5.jpg","nickname":"LDxy","note":"","ucode":"956432CE7B7761","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5388,"discussion_content":"æ¯æ¬¡éƒ½è¦é…ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566220694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125316,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1566145550,"is_pvip":false,"replies":[{"id":"52660","content":"å®‰æ’åŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼ŒLinux Kernelé‡Œæœ‰sendfileå‡½æ•°æ¥å®ç°é›¶æ‹·è´","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1569661748,"ip_address":"","comment_id":125316,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10156080142","product_id":100026001,"comment_content":"Cè¯­è¨€å¯ä»¥ç›´æ¥è°ƒLinuxç³»ç»Ÿapiå®ç°é›¶æ‹·è´å—ï¼Ÿæœ‰å“ªäº›apiï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463524,"discussion_content":"å®‰æ’åŒå­¦ï¼Œ\n\nä½ å¥½ï¼ŒLinux Kernelé‡Œæœ‰sendfileå‡½æ•°æ¥å®ç°é›¶æ‹·è´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569661748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014800,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","nickname":"Scott","note":"","ucode":"7E57FDCB5E5D49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6802,"discussion_content":"è¿˜æœ‰ä¸€ä¸ªtransfer","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567126983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1068361,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","nickname":"æ˜ç¿¼","note":"","ucode":"E77F86BEB3D5C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5317,"discussion_content":"æœ‰çš„æˆ‘è®°å¾—æ˜¯sendfileä½ å¯ä»¥å»æŸ¥æŸ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566175879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259018,"user_name":"å§œå§œ","can_delete":false,"product_type":"c1","uid":1120332,"ip_address":"","ucode":"1DAD620C8E9F31","user_header":"https://static001.geekbang.org/account/avatar/00/11/18/4c/e12f3b41.jpg","comment_is_top":false,"comment_ctime":1604617463,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5899584759","product_id":100026001,"comment_content":"å¦‚æœç”¨mmapå†…å­˜æ˜ å°„åˆ°æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å®ç°é¢†æ‹·è´ï¼Œè¿™ç§æ–¹å¼ä¼šä½¿ç”¨åˆ°DMACå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1131165,"avatar":"https://static001.geekbang.org/account/avatar/00/11/42/9d/c36b7ef7.jpg","nickname":"é¡¾éª¨","note":"","ucode":"3F6BA592AB7723","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409252,"discussion_content":"mmapè¿˜æ˜¯ä¼šç»å† DMA æŠŠæ•°æ®ä¼ è¾“åˆ° kernel bufferï¼Œç„¶å kernel buffer å’Œåº”ç”¨å…±äº«è¿™ä¸ª bufferï¼Œç„¶åå† sendï¼Œä¹Ÿä¼šæ¶‰åŠ DMA","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635403141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176529,"user_name":"fcbçš„é±¼","can_delete":false,"product_type":"c1","uid":1243901,"ip_address":"","ucode":"88667EBF09CEC0","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/fd/ec24cba7.jpg","comment_is_top":false,"comment_ctime":1581081503,"is_pvip":false,"replies":[{"id":"68633","content":"fcbçš„é±¼åŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼Œæˆ‘è§‰å¾—ä½ åœ¨è¿™é‡ŒæŠŠè½¯ä»¶å’Œç¡¬ä»¶çš„å„ä¸ªæ¦‚å¿µæ··åœ¨ä¸€èµ·äº†ã€‚<br><br>1. CPUæ˜¯ç¡¬ä»¶ï¼Œæ“ä½œç³»ç»Ÿæ˜¯è½¯ä»¶ã€‚å†…å­˜ä¹Ÿæ˜¯ç¡¬ä»¶ï¼Œæ•°æ®éƒ½æ˜¯åŠ è½½åˆ°å†…å­˜é‡Œé¢çš„ã€‚<br>2. â€œæ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„æ•°æ®â€å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿä¹Ÿæ˜¯å­˜æ”¾åœ¨å†…å­˜é‡Œå‘€ã€‚<br>3. DMACä¹Ÿæ˜¯ä¸€ä¸ªç¡¬ä»¶ï¼Œæˆ‘ä»¬è¿™é‡Œå†™çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç›´æ¥ä»ç¡¬ç›˜è¯»æ•°æ®åˆ°å†…å­˜å‘€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1581219959,"ip_address":"","comment_id":176529,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5876048799","product_id":100026001,"comment_content":"cpuå¤„ç†çš„æ˜¯ç”¨æˆ·å†…å­˜ä¸­çš„æ•°æ®,è®¿é—®ä¸åˆ°æ“ä½œç³»ç»Ÿä¸­çš„æ•°æ®ã€‚DMAå¤„ç†çš„æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„æ•°æ®ï¼Œè®¿é—®ä¸åˆ°ç”¨æˆ·å†…å­˜ã€‚å¯ä»¥è¿™ä¹Ÿç†è§£å§ï¼Ÿè¦ä¸ç„¶ä¸ºå•¥ä¸è®©DMACç›´æ¥å°†æ•°æ®ä»ç¡¬ç›˜è¯»åˆ°ç”¨æˆ·çš„å†…å­˜å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483131,"discussion_content":"fcbçš„é±¼åŒå­¦ï¼Œ\n\nä½ å¥½ï¼Œæˆ‘è§‰å¾—ä½ åœ¨è¿™é‡ŒæŠŠè½¯ä»¶å’Œç¡¬ä»¶çš„å„ä¸ªæ¦‚å¿µæ··åœ¨ä¸€èµ·äº†ã€‚\n\n1. CPUæ˜¯ç¡¬ä»¶ï¼Œæ“ä½œç³»ç»Ÿæ˜¯è½¯ä»¶ã€‚å†…å­˜ä¹Ÿæ˜¯ç¡¬ä»¶ï¼Œæ•°æ®éƒ½æ˜¯åŠ è½½åˆ°å†…å­˜é‡Œé¢çš„ã€‚\n2. â€œæ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„æ•°æ®â€å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿä¹Ÿæ˜¯å­˜æ”¾åœ¨å†…å­˜é‡Œå‘€ã€‚\n3. DMACä¹Ÿæ˜¯ä¸€ä¸ªç¡¬ä»¶ï¼Œæˆ‘ä»¬è¿™é‡Œå†™çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç›´æ¥ä»ç¡¬ç›˜è¯»æ•°æ®åˆ°å†…å­˜å‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581219959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1466048,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5e/c0/45711276.jpg","nickname":"John","note":"","ucode":"A869A7692DA370","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":226068,"discussion_content":"é¦–å…ˆæ˜ç™½2ä¸ªçŸ¥è¯†ï¼š\n1.åœ¨ç³»ç»Ÿæ‰§è¡ŒæŒ‡ä»¤çš„æ—¶å€™æœ‰2ç§çŠ¶æ€ï¼Œä¸€ä¸ªæ˜¯æ ¸å¿ƒæ€ã€ä¸€ä¸ªæ˜¯ç”¨æˆ·æ€ï¼Œè¿™ä¸¤ä¸ªæ€æ˜¯æƒé™ä¸Šçš„å·®åˆ«\n2.åº”ç”¨ç¨‹åºæ— æ³•è¯»å–å†…æ ¸åœ°å€ç©ºé—´çš„æ•°æ®ã€‚\nç”¨ä¸€æ¬¡IOä¸¾ä¸ªä¾‹å­\n1ã€appå‘èµ·read ä»ç”¨æˆ·æ€åˆ‡æ¢æ ¸å¿ƒæ€\n2ã€DMA Copyåˆ°å†…æ ¸ä¸­\n3ã€å†æ¬¡åˆ‡æ¢å†…æ ¸copyåˆ°App\n4ã€Appå†æ¬¡å‘èµ·write åˆè¦åˆ‡æ¢å›æ ¸å¿ƒæ€\né›¶æ‹·è´å°±æ˜¯é€šè¿‡DMAï¼Œé¿å…äº†æ•°æ®æ¥å›Copyï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†å¤šæ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ‰€ä»¥é›¶æ‹·è´ä¹Ÿå«å†…æ ¸æ—è·¯æŠ€æœ¯","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1586418586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243901,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fa/fd/ec24cba7.jpg","nickname":"fcbçš„é±¼","note":"","ucode":"88667EBF09CEC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164908,"discussion_content":"é¢ï¼Œå¤šè°¢å›å¤ã€‚å®é™…ä¸Šæˆ‘è€ƒè™‘çš„æ˜¯åœ¨4æ­¥æ¬è¿æ³•ä¸­ä¸ºä»€ä¹ˆä¸è®©DMACç›´æ¥å†™åˆ°å†…å­˜é‡Œè¾¹è€Œä¸ç»è¿‡cpuçš„2æ¬¡æ‹·è´ï¼Œä»”ç»†æƒ³äº†ä¸‹æ‰æ˜ç™½å› ä¸ºcpuæ˜¯æ•´ä¸ªå¤„ç†ä¸­å¿ƒï¼Œå¿…é¡»ç”±ä»–æ¥ç®¡ç†æ•´ä¸ªæ¬è¿æ­¥éª¤ï¼Œæ‰€ä»¥çœç•¥ä¸äº†ã€‚å¦‚æœä¼ è¾“çš„æ•°æ®åœ¨å†…å­˜ä¸­ä¸åšä»»ä½•åŠ å·¥,é‚£ä¹ˆå°±é€‰ç”¨2æ¬¡æ¬è¿æ³•ï¼Œå¯ä»¥æå¤§çš„æå‡æ•ˆç‡ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581236641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127107,"user_name":"è¢­","can_delete":false,"product_type":"c1","uid":1077573,"ip_address":"","ucode":"D5B8609CDFB145","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/45/126cd913.jpg","comment_is_top":false,"comment_ctime":1566555920,"is_pvip":false,"replies":[{"id":"51183","content":"è¢­åŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼Œä»€ä¹ˆå«åšâ€œç¨‹åºåˆ°ç½‘å¡â€å‘¢ï¼Ÿå…¶å®ä»ç¡¬ä»¶çš„è§’åº¦ï¼Œåªæœ‰å†…å­˜ã€ç¡¬ç›˜ã€ç½‘å¡è¿™äº›è®¾å¤‡å¹¶æ²¡æœ‰â€œç¨‹åºâ€è¿™ä¸ªä¸œè¥¿ã€‚<br><br>éœ€è¦æŠŠè½¯ä»¶ä»£ç å’Œç¡¬ä»¶è®¾å¤‡åˆ†ç¦»å¼€æ¥æƒ³è¿™ä¸ªé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568552825,"ip_address":"","comment_id":127107,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5861523216","product_id":100026001,"comment_content":"å¦‚æœä¸æ˜¯ç”±ç¡¬ç›˜è€Œæ˜¯è¦ä»ç¨‹åºåˆ°ç½‘å¡ï¼Œå¯ä»¥çœç•¥socket bufferè¿™ä¸€æ­¥å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464324,"discussion_content":"è¢­åŒå­¦ï¼Œ\n\nä½ å¥½ï¼Œä»€ä¹ˆå«åšâ€œç¨‹åºåˆ°ç½‘å¡â€å‘¢ï¼Ÿå…¶å®ä»ç¡¬ä»¶çš„è§’åº¦ï¼Œåªæœ‰å†…å­˜ã€ç¡¬ç›˜ã€ç½‘å¡è¿™äº›è®¾å¤‡å¹¶æ²¡æœ‰â€œç¨‹åºâ€è¿™ä¸ªä¸œè¥¿ã€‚\n\néœ€è¦æŠŠè½¯ä»¶ä»£ç å’Œç¡¬ä»¶è®¾å¤‡åˆ†ç¦»å¼€æ¥æƒ³è¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568552825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"è§‚å¼ˆé“äºº","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":136903,"discussion_content":"ä»–é—®çš„æ˜¯ä»å†…å­˜ç›´æ¥åˆ°ç½‘å¡ï¼Œä¸ç»è¿‡docker buffet","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579171400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349583,"user_name":"xianbin.yang","can_delete":false,"product_type":"c1","uid":2151575,"ip_address":"","ucode":"A9D26D0D649932","user_header":"https://static001.geekbang.org/account/avatar/00/20/d4/97/2f01be06.jpg","comment_is_top":false,"comment_ctime":1656116675,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656116675","product_id":100026001,"comment_content":"1.5Gçš„æ–‡ä»¶ï¼Œä»ç¡¬ç›˜åˆ°ç¡¬ç›˜ï¼Œ nioæ˜¯10æ¯«ç§’ï¼Œioæ˜¯10ç§’","like_count":0},{"had_liked":false,"id":336710,"user_name":"Sudouble","can_delete":false,"product_type":"c1","uid":1365574,"ip_address":"","ucode":"B369B09DAF8D20","user_header":"https://static001.geekbang.org/account/avatar/00/14/d6/46/5eb5261b.jpg","comment_is_top":false,"comment_ctime":1646305218,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646305218","product_id":100026001,"comment_content":"çœ‹äº†è€å¸ˆè¿™ä¹ˆå¤šç¯‡æ–‡ç« ï¼Œå°è±¡æœ€æ·±çš„è¿˜æ˜¯åŒ–ç¹ä¸ºç®€çš„æ°´å¹³ï¼Œä¸€ä¸‹ç‚¹ç ´äº†é—®é¢˜çš„æ ¸å¿ƒã€‚æ¯”å¦‚kafkaæ•°æ®ä¼ é€’æ•ˆç‡å¦‚æ­¤é«˜çš„åŸå› æ˜¯è°ƒç”¨çš„æ˜¯sendfileã€‚<br>å½“ä¸šåŠ¡é‡åˆ°äº†ä¸€ä¸ªé‡çº§ï¼Œéœ€è¦è¿›è¡Œå„ç§ä¼˜åŒ–å’Œæ”¹è¿›ï¼Œè¿™ä¸ªè¿‡ç¨‹å¾ˆéš¾å¾—ï¼Œä½†ä¹Ÿæ˜¯èƒ½è®©äººæˆé•¿æœ€å¿«çš„åœ°æ–¹ã€‚","like_count":0},{"had_liked":false,"id":333632,"user_name":"å°è¢","can_delete":false,"product_type":"c1","uid":1811495,"ip_address":"","ucode":"3F5D8721F577D9","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a4/27/15e75982.jpg","comment_is_top":false,"comment_ctime":1644455723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644455723","product_id":100026001,"comment_content":"https:&#47;&#47;www.jianshu.com&#47;p&#47;fad3339e3448","like_count":0},{"had_liked":false,"id":331303,"user_name":"é¹ä¼Ÿåˆ˜","can_delete":false,"product_type":"c1","uid":1813243,"ip_address":"","ucode":"CE6E9DAEDDCC12","user_header":"https://static001.geekbang.org/account/avatar/00/1b/aa/fb/c4e781aa.jpg","comment_is_top":false,"comment_ctime":1642541272,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642541272","product_id":100026001,"comment_content":"ååé‡æå‡ä¸‰å€ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿè¯´æ˜cpuåªæœ‰å°éƒ¨åˆ†æ—¶é—´åœ¨å¹²æ•°æ®æ¬è¿çš„æ´»ğŸ˜‚ï¼Ÿç„¶åå•ä»æ•°æ®ä¼ è¾“é€Ÿåº¦çœ‹ï¼Œç¬¬ä¸€æ¬¡å¤åˆ¶-ä»ç¡¬ç›˜åˆ°ç¼“å­˜ï¼Œä»¥åŠç¬¬å››æ¬¡å¤åˆ¶-ä»ç¼“å­˜åˆ°ç½‘ç»œè®¾å¤‡çš„ä¼ è¾“é€Ÿåº¦ï¼Œåº”è¯¥ä¹Ÿæ¯”ç¬¬äºŒæ¬¡å’Œç¬¬ä¸‰æ¬¡å¤åˆ¶-ç¼“å­˜ä¹‹é—´å¤åˆ¶çš„é€Ÿåº¦æ…¢å¾ˆå¤šï¼Ÿ","like_count":0},{"had_liked":false,"id":318772,"user_name":"czw","can_delete":false,"product_type":"c1","uid":2198248,"ip_address":"","ucode":"2A458E3AC8A951","user_header":"https://static001.geekbang.org/account/avatar/00/21/8a/e8/d53b0231.jpg","comment_is_top":false,"comment_ctime":1635419245,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635419245","product_id":100026001,"comment_content":"å†…å­˜ç¼“å­˜åŒºæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":0},{"had_liked":false,"id":318721,"user_name":"é¡¾éª¨","can_delete":false,"product_type":"c1","uid":1131165,"ip_address":"","ucode":"3F6BA592AB7723","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/9d/c36b7ef7.jpg","comment_is_top":false,"comment_ctime":1635402908,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1635402908","product_id":100026001,"comment_content":"ä¼ ç»Ÿçš„ sendfile ç»å†çš„è¿‡ç¨‹ï¼šç¡¬ç›˜ -ã€‹kernel buffer -ã€‹socket buffer -ã€‹ NIC<br><br>åªæœ‰ç½‘å¡æ”¯æŒ scatter-gather æ‰æ˜¯æ–‡ä¸­æ‰€æè¿°çš„è¿‡ç¨‹ï¼šç¡¬ç›˜ -ã€‹kernel buffer -ã€‹NIC<br><br>è€Œä¸” Linux kernel 2.6.33 ç‰ˆæœ¬ä¹‹åå¼•å…¥äº†æ–°çš„ç³»ç»Ÿè°ƒç”¨ spliceï¼Œä¸€ç§è½¯ä»¶å®ç°çš„é›¶æ‹·è´æŠ€æœ¯","like_count":1},{"had_liked":false,"id":315323,"user_name":"Geek_ee3685","can_delete":false,"product_type":"c1","uid":2750366,"ip_address":"","ucode":"2E0D5A064F5619","user_header":"","comment_is_top":false,"comment_ctime":1633832645,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633832645","product_id":100026001,"comment_content":"è€å¸ˆ ç”¨socketæ•°æ®ä¼ è¾“ ä¸ºä»€ä¹ˆä¼šæœ‰2 3ä¸¤æ­¥ ä»å†…æ ¸ç¼“å†²åŒºç›´æ¥åˆ° socketçš„ç¼“å†²åŒº ä¸ºä»€ä¹ˆè¿˜è¦ä»å†…å­˜é‡Œå†åˆ° buffer é‡Œï¼Ÿ","like_count":0},{"had_liked":false,"id":315320,"user_name":"Geek_ee3685","can_delete":false,"product_type":"c1","uid":2750366,"ip_address":"","ucode":"2E0D5A064F5619","user_header":"","comment_is_top":false,"comment_ctime":1633830368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633830368","product_id":100026001,"comment_content":"è€å¸ˆ åœ°å€å¢å‡æ–¹å¼æ˜¯å€’ç€è¯»æ•°æ®å’Œæ­£ç€è¯»æ•°æ®çš„æ„æ€å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":314182,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1194572,"ip_address":"","ucode":"FBFAE23E8E48B7","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/4c/b6200773.jpg","comment_is_top":false,"comment_ctime":1632888592,"is_pvip":false,"replies":[{"id":"113929","content":"ä¸æ˜¯ï¼Œæ˜¯æ€»çº¿äº¤ç»™äº†DMAæ§åˆ¶å™¨ï¼Œä¸éœ€è¦CPUå‚ä¸ã€‚åœ°å€ç©ºé—´è¿˜æ˜¯éœ€è¦çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633166095,"ip_address":"","comment_id":314182,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632888592","product_id":100026001,"comment_content":"&gt;ç¬¬ä¸€æ¬¡ï¼Œæ˜¯é€šè¿‡ DMAï¼Œä»ç¡¬ç›˜ç›´æ¥è¯»åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„è¯»ç¼“å†²åŒºé‡Œé¢ã€‚ç¬¬äºŒæ¬¡ï¼Œåˆ™æ˜¯æ ¹æ® Socket çš„æè¿°ç¬¦ä¿¡æ¯ï¼Œç›´æ¥ä»è¯»ç¼“å†²åŒºé‡Œé¢ï¼Œå†™å…¥åˆ°ç½‘å¡çš„ç¼“å†²åŒºé‡Œé¢ã€‚<br><br>è¿™ä¸ªå®ç°è¿‡ç¨‹æ˜¯ç¡¬ç›˜å‘DMACå‘å‡ºæ§åˆ¶ä¿¡å·ï¼Œç”±DMACæ‹‰å–æ•°æ®ï¼Œç„¶ååˆå› ä¸ºç›®æ ‡åœ°å€æ˜¯ç½‘å¡ï¼Œåœ°å€å›ºå®šï¼Ÿæ‰€ä»¥ä¸ç”¨ç»è¿‡å¯»å€çš„è¿‡ç¨‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527602,"discussion_content":"ä¸æ˜¯ï¼Œæ˜¯æ€»çº¿äº¤ç»™äº†DMAæ§åˆ¶å™¨ï¼Œä¸éœ€è¦CPUå‚ä¸ã€‚åœ°å€ç©ºé—´è¿˜æ˜¯éœ€è¦çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633166095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310033,"user_name":"Geek_337e21","can_delete":false,"product_type":"c1","uid":2274627,"ip_address":"","ucode":"D51F99290C30C8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyNezT33TyZdPI8DtRe7LzV9geutjMkaNNByOkyMXhNQVia5CJE54lWrBpicftq7jdo8bCcXhokjUQ/132","comment_is_top":false,"comment_ctime":1630462766,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630462766","product_id":100026001,"comment_content":"ä¸ºä»€ä¹ˆä¸ç›´æ¥ä»ç£ç›˜åˆ°ç½‘å¡ç¼“å†²åŒºï¼Ÿ","like_count":0},{"had_liked":false,"id":305880,"user_name":"Geek_e08c40","can_delete":false,"product_type":"c1","uid":2666373,"ip_address":"","ucode":"8B4A3AC18EFD93","user_header":"","comment_is_top":false,"comment_ctime":1628217427,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628217427","product_id":100026001,"comment_content":"å¯¹äº Socket çš„æ“ä½œï¼Œä¹Ÿä¸æ˜¯å†™å…¥åˆ° Socket çš„ Buffer é‡Œé¢ï¼Œè€Œæ˜¯ç›´æ¥æ ¹æ®æè¿°ç¬¦ï¼ˆDescriptorï¼‰å†™å…¥åˆ°ç½‘å¡çš„ç¼“å†²åŒºé‡Œé¢<br><br>è¿™å—èƒ½è¯¦ç»†è®²ä¸€ä¸‹å— å¯¹äºå‘é€æ•°æ®å¦‚æœä¸å†™å…¥åˆ°socketçš„bufferé‡Œé¢çš„è¯,åˆæ˜¯æ€ä¹ˆå†™å…¥åˆ°nic bufferå‘¢","like_count":0},{"had_liked":false,"id":300153,"user_name":"xiaoxlm","can_delete":false,"product_type":"c1","uid":2400819,"ip_address":"","ucode":"9F4DF8000C6749","user_header":"","comment_is_top":false,"comment_ctime":1625022241,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625022241","product_id":100026001,"comment_content":"è¿™ç« ç»“åˆè¿™ç¯‡æ–‡ç« çœ‹ï¼Œæ›´ç¾å‘³<br>https:&#47;&#47;zhuanlan.zhihu.com&#47;p&#47;357820303","like_count":0},{"had_liked":false,"id":297135,"user_name":"è½ç»£","can_delete":false,"product_type":"c1","uid":1755477,"ip_address":"","ucode":"60955E14C39C6B","user_header":"https://static001.geekbang.org/account/avatar/00/1a/c9/55/0e627a31.jpg","comment_is_top":false,"comment_ctime":1623322433,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623322433","product_id":100026001,"comment_content":"æ˜ç™½äº†ï¼Œæ‰€ä»¥kafkaçš„å †å†…å­˜è¦è®¾å°","like_count":0},{"had_liked":false,"id":270994,"user_name":"é±¼","can_delete":false,"product_type":"c1","uid":1487584,"ip_address":"","ucode":"89EC9CE3AD0281","user_header":"https://static001.geekbang.org/account/avatar/00/16/b2/e0/d856f5a4.jpg","comment_is_top":false,"comment_ctime":1609340682,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609340682","product_id":100026001,"comment_content":"Kafkaé™¤äº†é€šè¿‡JavaNIOçš„transferToåˆ©ç”¨sendfileé›¶æ‹·è´æŠ€æœ¯ï¼ˆæ¶‰åŠDMAï¼‰,åœ¨Brokerä¸­æ•°æ®è½ç›˜æ—¶å€™è¿˜é€šè¿‡Javaçš„MappedByteBufferå®è·µäº†å¦å¤–ä¸€ç§é›¶æ‹·è´æŠ€æœ¯--Memory Mapped File,åŠ å¿«æ•°æ®çš„å†™å…¥ï¼Œ","like_count":0},{"had_liked":false,"id":267574,"user_name":"BlingBling","can_delete":false,"product_type":"c1","uid":2059896,"ip_address":"","ucode":"E6EFCFE55B3672","user_header":"https://static001.geekbang.org/account/avatar/00/1f/6e/78/e7045b49.jpg","comment_is_top":false,"comment_ctime":1607831970,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1607831970","product_id":100026001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®ä¸€ä¸‹cpuå’Œgpuä¹‹é—´å¯ä»¥å®ç°zero copyå—ï¼Ÿåœ¨å®é™…é¡¹ç›®ä¸­é‡åˆ°ç›¸å…³çš„éœ€æ±‚åœºæ™¯ï¼Œå¸Œæœ›è€å¸ˆæä¾›ä¸€äº›æ€è·¯å’Œæ–¹å‘ï¼Œè°¢è°¢ğŸ™","like_count":0},{"had_liked":false,"id":249169,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1810189,"ip_address":"","ucode":"75F613D58909DB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZHw73tgCqGKhvticUWGRz4icgicu4hFWfKtacoFJeItH7maNuNUmjnEgDTJvOibwUWgGV0p6guNPibMVWDV4BUmEmlA/132","comment_is_top":false,"comment_ctime":1600491474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600491474","product_id":100026001,"comment_content":"â€œç¬¬äºŒæ¬¡ä¼ è¾“ï¼Œéœ€è¦ä»å†…æ ¸ç¼“å†²åŒºé‡Œé¢çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°æˆ‘ä»¬åº”ç”¨åˆ†é…çš„å†…å­˜é‡Œé¢ã€‚è¿™ä¸ªä¼ è¾“æ˜¯é€šè¿‡ CPU æ¬è¿çš„ã€‚â€é‚£æ„æ€æ˜¯è¯´ç£ç›˜ä¸­çš„ä¸€ä»½æ•°æ®åœ¨å†…å­˜ä¸­ä¼šæœ‰copyå¤šä¸€ä»½ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä»½å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":235933,"user_name":"nero","can_delete":false,"product_type":"c1","uid":1078793,"ip_address":"","ucode":"038100ACA14B29","user_header":"https://static001.geekbang.org/account/avatar/00/10/76/09/cf7513c8.jpg","comment_is_top":false,"comment_ctime":1595250571,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1595250571","product_id":100026001,"comment_content":"DMAæ­¥éª¤å“ªé‡Œï¼ŒCPUä¸ä»…ä»…åƒDMAå‘å‡ºäº†ä¿®æ”¹æŒ‡ä»¤ï¼Œè€Œä¸”ã€‚ä¹Ÿä¼šåƒé€šä¿¡çš„ioè®¾å¤‡å‘å‡ºè¯·æ±‚ã€‚è¿™æ ·æ‰ä¼šæœ‰ç¬¬å››æ­¥å§ï¼Ÿè¦ä¸ç„¶ç¡¬ç›˜è‡ªå·±ä¸ä¼šå‘å‡ºæ¥DMAè¯·æ±‚ã€‚<br>ç„¶åè¿˜æœ‰ä¸€ä¸ªæ€»çº¿çš„æ§åˆ¶æƒï¼Œæ˜¯ä¸æ˜¯è€å¸ˆæ²¡è¯´å•Š ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.åŸƒå…‹æ–¯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376020,"discussion_content":"è€å¸ˆè¿™é‡Œè®²çš„ä¸æ˜¯å¾ˆæ˜ç™½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621929355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203215,"user_name":"re","can_delete":false,"product_type":"c1","uid":1275541,"ip_address":"","ucode":"AA565C2B6EA105","user_header":"https://static001.geekbang.org/account/avatar/00/13/76/95/86a5c281.jpg","comment_is_top":false,"comment_ctime":1586157280,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1586157280","product_id":100026001,"comment_content":"æ–‡ç« é‡Œæåˆ°äº†ioæ¬è¿æœŸé—´ cpué—²ç½® æ²¡æœ‰çœ‹å‡ºæ¥dmaå¿«åœ¨å“ª æ±‚è§£æƒ‘","like_count":0,"discussions":[{"author":{"id":2274627,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyNezT33TyZdPI8DtRe7LzV9geutjMkaNNByOkyMXhNQVia5CJE54lWrBpicftq7jdo8bCcXhokjUQ/132","nickname":"Geek_337e21","note":"","ucode":"D51F99290C30C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391436,"discussion_content":"åŸå…ˆæ•°æ®éœ€è¦ç»è¿‡cpuï¼Œç°åœ¨æ•°æ®ä¸éœ€è¦ç»è¿‡cpuè€Œæ˜¯cpuå‘Šè¯‰dmcç›®çš„åœ°å€å’Œæºåœ°å€ï¼Œå¤§å°ï¼Œå°±å¯ä»¥ä¸ç®¡äº†ï¼Œå®é™…çš„æ•°æ®ä¼ è¾“ç”±dmcæ‰§è¡Œï¼Œæ­¤æ—¶cpuå¯ä»¥ç”¨æ¥åšå…¶ä»–äº‹ï¼Œè€Œä¸æ˜¯é‡å¤çš„ä»å†…å­˜ä¸­è¯»åˆ°å¯„å­˜å™¨ï¼Œå†ä»å¯„å­˜å™¨å†™åˆ°å†…å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630463357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161347,"user_name":"æˆä¸ºç¥ç¦","can_delete":false,"product_type":"c1","uid":1315665,"ip_address":"","ucode":"8C48D080E9A6A8","user_header":"https://static001.geekbang.org/account/avatar/00/14/13/51/99c88021.jpg","comment_is_top":false,"comment_ctime":1576196457,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1576196457","product_id":100026001,"comment_content":"è€å¸ˆå¥½ï¼Œå¦‚æœCPUå·²ç»åœ¨æ­¥éª¤1å’Œ2æˆåŠŸè®¾ç½®äº†DMACä»ç¡¬ç›˜è¯»ï¼Œå†™å…¥å†…å­˜ï¼Œä¸ºä½•è¿˜éœ€è¦ç¬¬4æ­¥ç¡¬ç›˜â€œä¸»åŠ¨â€å‘èµ·è¯·æ±‚å‘¢ï¼Ÿæ„Ÿè§‰DMACå·²ç»æ‹¥æœ‰ä¸€åˆ‡éœ€è¦çš„ä¿¡æ¯å»â€œä¸»åŠ¨çš„â€å®Œæˆè¿™æ¬¡æ“ä½œäº†ã€‚","like_count":0,"discussions":[{"author":{"id":1007294,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/be/9ea55f46.jpg","nickname":"feihui","note":"","ucode":"13F1D4A82BC650","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126988,"discussion_content":"æœ‰ä¸ªé¢„å¤„ç†é˜¶æ®µï¼šæµ‹è¯•è®¾å¤‡çŠ¶æ€ï¼›å‘DMAæ§åˆ¶å™¨çš„è®¾å¤‡åœ°å€å¯„å­˜å™¨ä¸­é€å…¥è®¾å¤‡å·ï¼Œå¹¶å¯åŠ¨è®¾å¤‡ï¼›å‘ä¸»å­˜åœ°å€è®¡æ•°å™¨ä¸­é€å…¥æ¬²äº¤æ¢æ•°æ®çš„ä¸»å­˜èµ·å§‹åœ°å€ï¼›å‘å­—è®¡æ•°å™¨ä¸­é€å…¥æ¬²äº¤æ¢çš„æ•°æ®ä¸ªæ•°ã€‚å¤–éƒ¨è®¾å¤‡å‡†å¤‡å¥½å‘é€çš„æ•°æ®ï¼ˆè¾“å…¥ï¼‰æˆ–ä¸Šæ¬¡æ¥æ”¶çš„æ•°æ®å·²å¤„ç†å®Œæ¯•ï¼ˆè¾“å‡ºï¼‰æ—¶ï¼Œå°†é€šçŸ¥DMAæ§åˆ¶å™¨å‘å‡ºDMAè¯·æ±‚ï¼Œç”³è¯·ä¸»å­˜æ€»çº¿ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578557003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1122034,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1e/f2/453d5f88.jpg","nickname":"seker","note":"","ucode":"9B705F91355873","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1007294,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/be/9ea55f46.jpg","nickname":"feihui","note":"","ucode":"13F1D4A82BC650","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":297971,"discussion_content":"ä½ å¥½ï¼ŒåŸºäºç»™å‡ºçš„è¿™äº›ä¿¡æ¯ã€‚åœ¨æ–‡ä¸­ç¬¬4æ­¥ï¼Œä¸ºä»€ä¹ˆDMACä¸æ˜¯â€œä¸»åŠ¨â€å‘èµ·è¯·æ±‚ï¼Œæˆ‘çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼š\n\nCPUä¿®æ”¹DMACé…ç½®å®Œæˆåï¼ŒDMACä¼šå˜æˆä¸€ä¸ªç©ºé—²çŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…ç¡¬ç›˜ç»™å‡ºçš„ä¼ è¾“è¯·æ±‚ã€‚\n\nè¿™ä¸ªæ—¶å€™DMACå¹¶ä¸çŸ¥é“å¤–éƒ¨è®¾å¤‡æ˜¯å¦å·²å‡†å¤‡å¥½è¦å‘é€çš„æ•°æ®ï¼Œè€ŒDMACå¹¶ä¸éœ€è¦å»éªŒè¯è¿™äº›æ•°æ®ï¼Œåªéœ€è¦æŠŠæ•°æ®ä»ç¡¬ç›˜è¯»åˆ°DMACæ§åˆ¶å™¨é‡Œé¢ï¼Œç›´åˆ°DMACå¯„å­˜å™¨é‡Œé¢è®¾ç½®çš„æ•°æ®é•¿åº¦ä¼ è¾“å®Œæˆã€‚\n\nå› æ­¤ï¼ŒDMACå¹¶ä¸ä¼šâ€œä¸»åŠ¨â€å‘èµ·ä¼ è¾“è¯·æ±‚ï¼Œè€Œæ˜¯â€œè¢«åŠ¨â€ç­‰å¾…ä¼ è¾“è¯·æ±‚ã€‚\n\nå¦‚æˆ‘ç†è§£æœ‰é—®é¢˜å¯ä»¥å†æ¢è®¨ä¸‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597127046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":126988,"ip_address":""},"score":297971,"extra":""}]}]},{"had_liked":false,"id":141022,"user_name":"David","can_delete":false,"product_type":"c1","uid":1023472,"ip_address":"","ucode":"1C76747719CD3B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9d/f0/6c34b90f.jpg","comment_is_top":false,"comment_ctime":1571103560,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571103560","product_id":100026001,"comment_content":"ğŸ‘","like_count":0},{"had_liked":false,"id":140612,"user_name":"skye","can_delete":false,"product_type":"c1","uid":1027840,"ip_address":"","ucode":"C55C9F52C78A00","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","comment_is_top":false,"comment_ctime":1571016205,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571016205","product_id":100026001,"comment_content":"è€å¸ˆï¼ŒDMACæ¬è¿æ•°æ®çš„æ—¶å€™ï¼ŒCPUåœ¨å¹²å˜›ï¼Ÿä¸æ˜¯ç­‰å¾…å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1022247,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","nickname":"é˜¿å¡ç‰›","note":"","ucode":"0BC43A904C3199","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":44047,"discussion_content":"ä¸ç”¨ç­‰å¾…ï¼Œå¯ä»¥åšå…¶å®ƒäº‹æƒ…ï¼Œç­‰DMAæ‹·è´å®Œæˆåé€šçŸ¥CPUï¼ŒCPUå†å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572925517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138720,"user_name":"å°å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1055214,"ip_address":"","ucode":"E5F2052E0323C0","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/ee/e395a35e.jpg","comment_is_top":false,"comment_ctime":1570432996,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1570432996","product_id":100026001,"comment_content":"è¯·é—®è€å¸ˆï¼Œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ï¼ŒI&#47;O è®¾å¤‡ä¼šä¸»è®¾å¤‡å‘èµ·è¯·æ±‚ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1061803,"avatar":"https://static001.geekbang.org/account/avatar/00/10/33/ab/d8ba4242.jpg","nickname":"å“’å“’å“’","note":"","ucode":"9378AD329F8AE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382473,"discussion_content":"æˆ‘ä»¬å¸¸ç”¨çš„é¼ æ ‡é”®ç›˜çš„è¾“å…¥å°±æ˜¯ä¸»åŠ¨å‘èµ·è¯·æ±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625586372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125788,"user_name":"gigglesun","can_delete":false,"product_type":"c1","uid":1012912,"ip_address":"","ucode":"7AE6C7DCE06063","user_header":"","comment_is_top":false,"comment_ctime":1566260742,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"1566260742","product_id":100026001,"comment_content":"&quot;4. å¦‚æœæˆ‘ä»¬è¦ä»ç¡¬ç›˜ä¸Šå¾€å†…å­˜é‡Œé¢åŠ è½½æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç¡¬ç›˜å°±ä¼šå‘ DMAC å‘èµ·ä¸€ä¸ªæ•°æ®ä¼ è¾“è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚å¹¶ä¸æ˜¯é€šè¿‡æ€»çº¿ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªé¢å¤–çš„è¿çº¿ã€‚&quot;è¿™ä¸ªåœ°æ–¹ä¸å¤ªæ˜ç™½ï¼Œç¡¬ç›˜æ€ä¹ˆèƒ½å‘èµ·æ•°æ®ä¼ è¾“è¯·æ±‚ï¼Œæˆ‘çš„ç†è§£ç¡¬ç›˜å°±æ˜¯å•ä¸€çš„å­˜å‚¨è®¾å¤‡ï¼Œæ²¡æœ‰é€»è¾‘å¤„ç†èƒ½åŠ›ã€‚è¯·è€å¸ˆæŒ‡ç‚¹~","like_count":0,"discussions":[{"author":{"id":2274627,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyNezT33TyZdPI8DtRe7LzV9geutjMkaNNByOkyMXhNQVia5CJE54lWrBpicftq7jdo8bCcXhokjUQ/132","nickname":"Geek_337e21","note":"","ucode":"D51F99290C30C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391440,"discussion_content":"é¦–å…ˆ CPU é€šè¿‡è®¾ç½® DMA æ§åˆ¶å™¨çš„å¯„å­˜å™¨å¯¹å®ƒè¿›è¡Œç¼–ç¨‹ï¼Œæ‰€ä»¥ DMA æ§åˆ¶å™¨çŸ¥é“å°†ä»€ä¹ˆæ•°æ®ä¼ é€åˆ°ä»€ä¹ˆåœ°æ–¹ã€‚DMA æ§åˆ¶å™¨è¿˜è¦å‘ç£ç›˜æ§åˆ¶å™¨å‘å‡ºä¸€ä¸ªå‘½ä»¤ï¼Œé€šçŸ¥å®ƒä»ç£ç›˜è¯»æ•°æ®åˆ°å…¶å†…éƒ¨çš„ç¼“å†²åŒºå¹¶æ£€éªŒæ ¡éªŒå’Œã€‚å½“æœ‰æ•ˆæ•°æ®ä½äºç£ç›˜æ§åˆ¶å™¨çš„ç¼“å†²åŒºä¸­æ—¶ï¼ŒDMA å°±å¯ä»¥å¼€å§‹äº†ã€‚\n\nDMA æ§åˆ¶å™¨é€šè¿‡åœ¨æ€»çº¿ä¸Šå‘å‡ºä¸€ä¸ªè¯»è¯·æ±‚åˆ°ç£ç›˜æ§åˆ¶å™¨è€Œå‘èµ· DMA ä¼ é€ï¼Œè¿™æ˜¯ç¬¬äºŒæ­¥ã€‚è¿™ä¸ªè¯»è¯·æ±‚å°±åƒå…¶ä»–è¯»è¯·æ±‚ä¸€æ ·ï¼Œç£ç›˜æ§åˆ¶å™¨å¹¶ä¸çŸ¥é“æˆ–è€…å¹¶ä¸å…³å¿ƒå®ƒæ˜¯æ¥è‡ª CPU è¿˜æ˜¯æ¥è‡ª DMA æ§åˆ¶å™¨ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¦å†™çš„å†…å­˜åœ°å€åœ¨æ€»çº¿çš„åœ°å€çº¿ä¸Šï¼Œæ‰€ä»¥å½“ç£ç›˜æ§åˆ¶å™¨å»åŒ¹é…ä¸‹ä¸€ä¸ªå­—æ—¶ï¼Œå®ƒçŸ¥é“å°†è¯¥å­—å†™åˆ°ä»€ä¹ˆåœ°æ–¹ã€‚å†™åˆ°å†…å­˜å°±æ˜¯å¦å¤–ä¸€ä¸ªæ€»çº¿å¾ªç¯äº†ï¼Œè¿™æ˜¯ç¬¬ä¸‰æ­¥ã€‚å½“å†™æ“ä½œå®Œæˆæ—¶ï¼Œç£ç›˜æ§åˆ¶å™¨åœ¨æ€»çº¿ä¸Šå‘å‡ºä¸€ä¸ªåº”ç­”ä¿¡å·åˆ° DMA æ§åˆ¶å™¨ï¼Œè¿™æ˜¯ç¬¬å››æ­¥ã€‚\n\nç„¶åï¼ŒDMA æ§åˆ¶å™¨ä¼šå¢åŠ å†…å­˜åœ°å€å¹¶å‡å°‘å­—èŠ‚æ•°é‡ã€‚å¦‚æœå­—èŠ‚æ•°é‡ä»ç„¶å¤§äº 0 ï¼Œå°±ä¼šå¾ªç¯æ­¥éª¤ 2 - æ­¥éª¤ 4 ï¼Œç›´åˆ°å­—èŠ‚è®¡æ•°å˜ä¸º 0 ã€‚æ­¤æ—¶ï¼ŒDMA æ§åˆ¶å™¨ä¼šæ‰“æ–­ CPU å¹¶å‘Šè¯‰å®ƒä¼ è¾“å·²ç»å®Œæˆäº†ã€‚æ“ä½œç³»ç»Ÿå¼€å§‹è¿è¡Œæ—¶ï¼Œå®ƒä¸ä¼šæŠŠç£ç›˜å—æ‹·è´åˆ°å†…å­˜ä¸­ï¼Œå› ä¸ºå®ƒå·²ç»åœ¨å†…å­˜ä¸­äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1630464636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2274627,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyNezT33TyZdPI8DtRe7LzV9geutjMkaNNByOkyMXhNQVia5CJE54lWrBpicftq7jdo8bCcXhokjUQ/132","nickname":"Geek_337e21","note":"","ucode":"D51F99290C30C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391442,"discussion_content":"ä¹Ÿå°±æ˜¯è¯´ï¼ŒDMAéœ€è¦ç­‰å¾…ç£ç›˜å‘å‡ºæ•°æ®ï¼ˆæ§åˆ¶ç”µè·¯å’Œæ¥å£ï¼‰å·²ç»å‡†å¤‡å¥½çš„çš„ä¿¡æ¯ï¼Œæ‰å¯ä»¥å¼€å§‹è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630465138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/39/1be8b56c.jpg","nickname":"snzhaoch","note":"","ucode":"033111124D15DC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7059,"discussion_content":"ä¸­æ–­ä¿¡å·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567328969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.åŸƒå…‹æ–¯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1121593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/39/1be8b56c.jpg","nickname":"snzhaoch","note":"","ucode":"033111124D15DC","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":376022,"discussion_content":"æ„Ÿè§‰å¹¶ä¸æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621929454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7059,"ip_address":""},"score":376022,"extra":""}]}]}]}