{"id":101888,"title":"43 | å‰–æä½¿ App å…·æœ‰åŠ¨æ€åŒ–å’Œçƒ­æ›´æ–°èƒ½åŠ›çš„æ–¹æ¡ˆ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æˆ´é“­ã€‚ä»Šå¤©ï¼Œæˆ‘æ¥å’Œä½ èŠèŠiOSå¼€å‘ä¸­çš„åŠ¨æ€åŒ–å’Œçƒ­æ›´æ–°æ–¹æ¡ˆã€‚</p><p>çƒ­æ›´æ–°èƒ½åŠ›çš„åˆè¡·æ˜¯ï¼Œèƒ½å¤ŸåŠæ—¶ä¿®å¤çº¿ä¸Šé—®é¢˜ï¼Œå‡å°‘Bug å¯¹ç”¨æˆ·çš„ä¼¤å®³ã€‚è€ŒåŠ¨æ€åŒ–çš„ç›®çš„ï¼Œé™¤äº†ä¿®å¤çº¿ä¸Šé—®é¢˜å¤–ï¼Œè¿˜è¦èƒ½å¤Ÿçµæ´»æ›´æ–°App ç‰ˆæœ¬ã€‚</p><p>è¦å®ç°åŠ¨æ€åŒ–ï¼Œå°±éœ€è¦å…·å¤‡åœ¨è¿è¡Œæ—¶åŠ¨æ€æ‰§è¡Œç¨‹åºçš„èƒ½åŠ›ã€‚åŒæ—¶ï¼Œå®ç°äº†åŠ¨æ€åŒ–ï¼Œä¹Ÿå°±å…·å¤‡äº†çƒ­æ›´æ–°èƒ½åŠ›ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå®ç°åŠ¨æ€åŒ–çš„æ–¹æ¡ˆæœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ JavaScriptCore è§£é‡Šå™¨æ–¹æ¡ˆã€ä»£ç è½¬è¯‘æ–¹æ¡ˆã€è‡ªå»ºè§£é‡Šå™¨æ–¹æ¡ˆã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±å’Œä½ è¯¦ç»†è¯´è¯´è¿™ä¸‰ç§æ–¹æ¡ˆã€‚</p><h2>JavaScriptCore è§£é‡Šå™¨æ–¹æ¡ˆ</h2><p>iOS ç³»ç»Ÿå†…ç½®çš„JavaScriptCoreï¼Œæ˜¯èƒ½å¤Ÿåœ¨ App è¿è¡Œè¿‡ç¨‹ä¸­è§£é‡Šæ‰§è¡Œè„šæœ¬çš„è§£é‡Šå™¨ã€‚</p><p>JavaScriptCore æä¾›äº†æ˜“ç”¨çš„åŸç”Ÿè¯­è¨€æ¥å£ï¼Œé…åˆ iOS è¿è¡Œæ—¶æä¾›çš„æ–¹æ³•æ›¿æ¢èƒ½åŠ›ï¼Œå‡ºç°äº†ä½¿ç”¨ JavaScript è¯­è¨€ä¿®å¤çº¿ä¸Šé—®é¢˜çš„ <a href=\"https://github.com/bang590/JSPatch\">JSPatch</a>ï¼Œä»¥åŠæŠŠ JavaScriptCore ä½œä¸ºå‰ç«¯å’ŒåŸç”Ÿæ¡¥æ¢çš„ <a href=\"https://github.com/facebook/react-native\">React Native</a> å’Œ <a href=\"https://github.com/apache/incubator-weex\">Weex</a>å¼€å‘æ¡†æ¶ã€‚è¿™äº›åº“ï¼Œè®© App å…·æœ‰äº†åŠ¨æ€åŒ–èƒ½åŠ›ã€‚</p><p>ä½†æ˜¯ï¼Œå¯¹äºåŸç”Ÿå¼€å‘è€…æ¥è¯´ï¼Œåªèƒ½è§£é‡Šæ‰§è¡Œ JavaScript è¯­è¨€çš„è§£é‡Šå™¨ JSPatchã€React Native ç­‰ï¼Œæˆ‘ä»¬ç”¨èµ·æ¥ä¸æ˜¯å¾ˆé¡ºæ‰‹ï¼Œè¿˜æ˜¯æ›´å–œæ¬¢ç”¨åŸç”Ÿè¯­è¨€æ¥å¼€å‘ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰åŠæ³•èƒ½å¤Ÿè§£å†³è¯­è¨€æ ˆçš„é—®é¢˜å‘¢ï¼Ÿ</p><!-- [[[read_end]]] --><h2>ä»£ç è½¬è¯‘æ–¹æ¡ˆ</h2><p>DynamicCocoa æ–¹æ¡ˆå°† Objective-C è½¬æ¢æˆ JavaScript ä»£ç ï¼Œç„¶åä¸‹å‘åŠ¨æ€æ‰§è¡Œã€‚è¿™æ ·ä¸€æ¥ï¼ŒåŸç”Ÿå¼€å‘è€…åªè¦ä½¿ç”¨åŸç”Ÿè¯­è¨€å»å¼€å‘è°ƒè¯•å³å¯ï¼Œé¿å…äº†ä½¿ç”¨ JavaScript å¼€å‘ä¸ç•…çš„é—®é¢˜ï¼Œä¹Ÿå°±è§£å†³äº†è¯­è¨€æ ˆçš„é—®é¢˜ã€‚</p><p>å½“ç„¶ï¼Œè¯­è¨€ä¹‹é—´çš„è½¬è¯‘è¿‡ç¨‹éœ€è¦è§£å†³è¯­è¨€å·®å¼‚çš„é—®é¢˜ï¼Œæ¯”å¦‚ Objective-C æ˜¯å¼ºç±»å‹ï¼Œè€Œ JavaScript æ˜¯å¼±ç±»å‹ï¼Œè¿™ä¸¤ç§è¯­è¨€é—´çš„å·®å¼‚ç‚¹å°±å¾ˆå¤šã€‚ä½†ï¼Œå¥½åœ¨ JavaScriptCore è§£é‡Šæ‰§è¡Œå®Œåï¼Œè¿˜ä¼šå¯¹åº”åˆ°åŸç”Ÿä»£ç ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åšå¥½å„ç§æƒ…å†µçš„è§„åˆ™åŒ¹é…ï¼Œå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ‰‹æ®µä¸Šï¼Œè¯­è¨€è½¬è¯‘å¯ä»¥ä½¿ç”¨ç°æœ‰çš„æˆç†Ÿå·¥å…·ï¼Œæ¯”å¦‚ç±» C è¯­è¨€çš„è½¬è¯‘ï¼Œå¯ä»¥ä½¿ç”¨LLVM å¥—ä»¶ä¸­ Clang æä¾›çš„LibToolingï¼Œé€šè¿‡é‡è½½ HandleTranslationUnit() å‡½æ•°ï¼Œä½¿ç”¨ RecursiveASTVistor æ¥éå† ASTï¼Œè·å–ä»£ç çš„å®Œæ•´ä¿¡æ¯ï¼Œç„¶åè½¬æ¢æˆæ–°è¯­è¨€çš„ä»£ç ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘æ— æ³•ç©·å°½ä¸¤ç§ç¼–ç¨‹è¯­è¨€é—´çš„è½¬è¯‘ï¼Œä½†æ˜¯<strong>å¦‚æœä½ æƒ³è¦å¿«é€Ÿäº†è§£è½¬è¯‘è¿‡ç¨‹çš„è¯ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯çœ‹ä¸€ä¸ªå®ç°çš„é›å½¢ã€‚</strong></p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¥å‰ç”¨ Swift å†™è¿‡ä¸€ä¸ª Lisp è¯­è¨€åˆ° C è¯­è¨€è½¬è¯‘çš„é›å½¢ã€‚ä½ å¯ä»¥ç‚¹å‡»<a href=\"https://github.com/ming1016/study/tree/master/LispToC\">è¿™ä¸ªé“¾æ¥</a>ï¼ŒæŸ¥çœ‹å…·ä½“çš„ä»£ç ã€‚é€šè¿‡è¿™ä¸ªä»£ç ï¼Œä½ èƒ½å¤Ÿäº†è§£åˆ°å®Œæˆè½¬è¯‘ä¾æ¬¡éœ€è¦ç”¨åˆ°è¯æ³•åˆ†æå™¨ã€è¯­æ³•åˆ†æå™¨ã€éå†å™¨ã€è½¬æ¢å™¨å’Œä»£ç ç”Ÿæˆå™¨ã€‚å®ƒä»¬çš„å®ç°åˆ†åˆ«å¯¹åº” LispToC é‡Œçš„ JTokenizer.swifã€JParser.swiftã€JTraverser.swiftã€JTransformer.swiftå’ŒCodeGenerator.swiftã€‚</p><p>å†æ¯”å¦‚ï¼Œä½ å¯ä»¥æŸ¥çœ‹<a href=\"https://github.com/LuizZak/SwiftRewriter\">SwiftRewriteé¡¹ç›®</a>çš„å®Œæ•´è½¬è¯‘å®ç°ã€‚SwiftRewriter ä½¿ç”¨ Swift å¼€å‘ï¼Œå¯ä»¥å®Œæˆ Objective-C åˆ° Swift çš„è½¬æ¢ã€‚</p><h2>è‡ªå»ºè§£é‡Šå™¨æ–¹æ¡ˆ</h2><p>å¯ä»¥å‘ç°ï¼Œæˆ‘åœ¨å‰é¢æåˆ°çš„JSPatchã€React Nativeç­‰åº“ï¼Œåˆ°æœ€åèƒ½å¤Ÿå…·æœ‰åŠ¨æ€æ€§ï¼Œç”¨çš„éƒ½æ˜¯ç³»ç»Ÿå†…ç½®çš„ JavaScriptCore æ¥è§£é‡Šæ‰§è¡Œ JavaScript è¯­è¨€ã€‚</p><p>è™½ç„¶ç›´æ¥ä½¿ç”¨å†…ç½®çš„ JavaScriptCore éå¸¸æ–¹ä¾¿ï¼Œä½†å´é™åˆ¶äº†å¯¹æ€§èƒ½çš„ä¼˜åŒ–ã€‚æ¯”å¦‚ï¼Œç³»ç»Ÿé™åˆ¶äº†ç¬¬ä¸‰æ–¹ App å¯¹ JavaScriptCore JITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰çš„ä½¿ç”¨ã€‚å†æ¯”å¦‚ï¼Œç”±äº JavaScript ä½¿ç”¨çš„æ˜¯å¼±ç±»å‹ï¼Œè€Œç±»å‹æ¨æ–­åªèƒ½åœ¨ LLInt è¿™ä¸€å±‚è¿›è¡Œï¼Œæ— æ³•å¾—åˆ°è¶³å¤Ÿçš„ä¼˜åŒ–ã€‚</p><p>å†åŠ ä¸Š JSContext å¤šçº¿ç¨‹çš„å¤„ç†ä¹Ÿæ²¡æœ‰åŸç”Ÿå¤šçº¿ç¨‹å¤„ç†å¾—é«˜æ•ˆã€é¢‘ç¹çš„ JavaScriptCore å’ŒåŸç”Ÿé—´çš„åˆ‡æ¢ã€å†…å­˜ç®¡ç†æ–¹å¼ä¸ä¸€è‡´å¸¦æ¥çš„é£é™©ã€çº¿ç¨‹ç®¡ç†ä¸ä¸€è‡´çš„é£é™©ã€æ¶ˆæ¯è½¬å‘æ—¶çš„è§£æè½¬æ¢æ•ˆç‡ä½ä¸‹ç­‰ç­‰åŸå› ï¼Œä½¿å¾—JavaScriptCore ä½œä¸ºè§£é‡Šå™¨çš„æ–¹æ¡ˆï¼Œå§‹ç»ˆæ— æ³•æ¯”æ‹ŸåŸç”Ÿã€‚</p><p><strong>è™½ç„¶é€šè¿‡å¼•å…¥å‰ç«¯æŠ€æœ¯æ ˆå’Œåˆ©ç”¨è½¬è¯‘æŠ€æœ¯èƒ½å¤Ÿæ»¡è¶³å¤§éƒ¨åˆ†åŠ¨æ€åŒ–å’Œçƒ­ä¿®å¤çš„éœ€æ±‚ï¼Œä½†ä¸€äº›å¯¹æ€§èƒ½è¦æ±‚é«˜çš„å›¢é˜Ÿï¼Œè¿˜æ˜¯ä¼šè€ƒè™‘ä½¿ç”¨æ€§èƒ½æ›´å¥½çš„è§£é‡Šå™¨ã€‚</strong></p><p>å¦‚æœæƒ³è¦ä¸ä¾èµ–ç³»ç»Ÿè§£é‡Šå™¨å®ç°åŠ¨æ€åŒ–å’Œçƒ­ä¿®å¤ï¼Œæˆ‘ä»¬å¯ä»¥é›†æˆä¸€ä¸ªæ–°çš„è§£é‡Šå™¨ï¼Œæ¯•ç«Ÿè§£é‡Šå™¨ä¹Ÿæ˜¯ç”¨ä»£ç å†™å‡ºæ¥çš„ï¼Œä½¿ç”¨å¼€æºè§£é‡Šå™¨ç”šè‡³æ˜¯è‡ªå·±ç¼–å†™è§£é‡Šå™¨ï¼Œä¹Ÿä¸æ˜¯ä¸å¯ä»¥ã€‚</p><p>å› æ­¤ï¼Œè…¾è®¯å…¬å¸æ›¾å…¬å¸ƒçš„ OCSæ–¹æ¡ˆï¼Œè‡ªå·±å®ç°äº†ä¸€ä¸ªè™šæ‹Ÿå™¨ OCSVM ä½œä¸ºè§£é‡Šå™¨ï¼Œç”¨æ¥è§£é‡Šæ‰§è¡Œè‡ªå®šä¹‰çš„å­—èŠ‚ç æŒ‡ä»¤é›†è¯­è¨€ OCScriptï¼ŒåŒæ—¶æä¾›äº†å°† Objective-C è½¬æˆ OCScript åŸºäº LLVM å®šåˆ¶çš„ç¼–è¯‘å™¨ OCSã€‚</p><p>è…¾è®¯å…¬å¸è‡ªç ”ä¸€ä¸ªè§£é‡Šå™¨çš„å¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥æœ€å¤§ç¨‹åº¦åœ°æé«˜åŠ¨æ€åŒ–çš„æ‰§è¡Œæ•ˆç‡ï¼Œèƒ½å¤Ÿè§£é‡Šæ‰§è¡Œé’ˆå¯¹ iOS è¿è¡Œæ—¶ç‰¹æ€§å®šåˆ¶çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚è¿™å¥—å®šåˆ¶çš„æŒ‡ä»¤ï¼Œä¸å…‰æœ‰åŸºæœ¬è¿ç®—æŒ‡ä»¤ï¼Œè¿˜æœ‰å†…å­˜æ“ä½œã€åœ°å€è·³è½¬ã€å¼ºç±»å‹è½¬æ¢æŒ‡ä»¤ã€‚</p><p>OCSVM è§£é‡Šæ‰§è¡Œ OCScript æŒ‡ä»¤ï¼Œèƒ½å¤Ÿè¾¾åˆ°å’ŒåŸç”Ÿåª²ç¾çš„ç¨³å®šå’Œé«˜æ€§èƒ½ï¼Œå®Œæˆè¿è¡Œæ—¶ App çš„å†…å­˜ç®¡ç†ã€è§£é‡Šæ‰§è¡Œã€çº¿ç¨‹ç®¡ç†ç­‰å„ç§ä»»åŠ¡ã€‚OCS æ²¡æœ‰å¼€æºï¼Œæ‰€ä»¥ä½ æ— æ³•ç›´æ¥åœ¨å·¥ç¨‹ä¸­ä½¿ç”¨ OCS æ–¹æ¡ˆï¼Œä½†æ˜¯æœ‰äº›å…¬å¸è‡ªå·±å†…éƒ¨çš„åŠ¨æ€åŒ–æ–¹æ¡ˆå…¶å®å°±æ˜¯å‚è€ƒäº†è¿™ä¸ªæ–¹æ¡ˆã€‚è¿™äº›æ–¹æ¡ˆéƒ½æ²¡æœ‰å¼€æºï¼Œå®ç°çš„éš¾åº¦ä¹Ÿæ¯”è¾ƒå¤§ã€‚</p><p>å› æ­¤ï¼Œä½ æƒ³è¦åœ¨å·¥ç¨‹ä¸­ä½¿ç”¨é«˜æ•ˆçš„è§£é‡Šå™¨ï¼Œæœ€å¥½çš„æ–¹æ¡ˆå°±æ˜¯ï¼Œå…ˆæ‰¾æ‰¾çœ‹æœ‰æ²¡æœ‰å…¶ä»–çš„å¼€æºè§£é‡Šå™¨èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ã€‚</p><p><strong>è¿™æ—¶ï¼Œå¦‚æœä½ ä»”ç»†æ€è€ƒï¼Œä¸€å®šä¼šæƒ³åˆ° LLVM</strong>ã€‚LLVM ä½œä¸ºæ ‡å‡†çš„ iOS ç¼–è¯‘å™¨å¥—ä»¶ï¼Œå¯¹ iOS å¼€å‘è¯­è¨€çš„è§£ææ˜¯æœ€æ ‡å‡†ã€æœ€å…¨é¢çš„ã€‚é‚£ä¹ˆï¼ŒLLVM å¥—ä»¶é‡Œé¢éš¾é“å°±æ²¡æœ‰æä¾›ä¸€ä¸ªè§£é‡Šå™¨ç”¨æ¥åŠ¨æ€è§£é‡Šæ‰§è¡Œå—ï¼Ÿ</p><p>æŒ‰ç†è¯´ï¼ŒLLVMæ¥å®ç°è¿™ä¸ªåŠŸèƒ½æ˜¯æœ€åˆé€‚ä¸è¿‡äº†ã€‚å…¶å® LLVM é‡Œæ˜¯æœ‰è§£é‡Šå™¨çš„ã€‚</p><p>åªä¸è¿‡ï¼ŒExecutionEngine é‡Œçš„ Interpreterï¼Œæ˜¯ä¸“é—¨ç”¨æ¥è§£é‡Š LLVM IR çš„ï¼Œç¼ºå°‘å¯¹ Objective-C è¯­æ³•ç‰¹æ€§çš„æ”¯æŒï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥ä½¿ç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒExecutionEngine é‡Œè¿˜æœ‰ä¸ª MCJITï¼Œå¯ä»¥é€šè¿‡ JIT æ¥å®ç°åŠ¨æ€åŒ–ï¼Œä½†å› ä¸ºiOS ç³»ç»Ÿçš„é™åˆ¶ä¹Ÿæ— æ³•ä½¿ç”¨ã€‚</p><p>å…¶å®ï¼ŒLLVM ä¹‹æ‰€ä»¥æ²¡æœ‰ä¸“é—¨é’ˆå¯¹ iOS åšè§£é‡Šå™¨ï¼Œæ˜¯å› ä¸º iOS åŠ¨æ€åŒ–åœ¨ LLVM æ‰€æœ‰å·¥ä½œä¸­çš„ä¼˜å…ˆçº§å¹¶ä¸é«˜ã€‚</p><p>ä¸è¿‡ï¼Œå¥½åœ¨ <strong>GitHub ä¸Šæœ‰ä¸€ä¸ªåŸºäº LLVM çš„ C++ è§£é‡Šå™¨</strong> <a href=\"https://github.com/root-project/cling\"><strong>Cling</strong></a><strong>ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å­¦ä¹ æ€æ ·é€šè¿‡æ‰©å±• LLVM æ¥è‡ªåˆ¶è§£é‡Šå™¨ã€‚</strong></p><p>è§£é‡Šå™¨åˆ†ä¸ºè§£é‡Šæ‰§è¡Œ AST å’Œè§£é‡Šæ‰§è¡Œå­—èŠ‚ç ä¸¤ç§ï¼Œå…¶ä¸­Cling å±äºå‰è€…ï¼Œè€Œ LLVM è‡ªå¸¦è§£é‡Šå™¨å±äºåè€…ã€‚</p><p>ä»æ•ˆç‡ä¸Šæ¥è¯´ï¼Œè§£é‡Šæ‰§è¡Œå­—èŠ‚ç çš„æ–¹æ¡ˆä¼šæ›´å¥½ä¸€äº›ï¼Œå› ä¸ºå­—èŠ‚ç å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œä¼˜åŒ–ï¼Œæ‰€ä»¥ä½¿ç”¨ LLVM IR è¿™ç§å­—èŠ‚ç ï¼Œå¯ä»¥è®©ä½ æ— éœ€æ‹…å¿ƒç±»ä¼¼å¯„å­˜å™¨ä½¿ç”¨æ•ˆç‡ï¼Œä»¥åŠä¸æ–­é‡å¤è®¡ç®—ç›¸åŒå€¼çš„é—®é¢˜ã€‚LLVM é€šè¿‡ä¼˜åŒ–å™¨å¯ä»¥æé«˜æ•ˆç‡ï¼Œç”Ÿæˆç´§å‡‘çš„ IRã€‚è€Œè¿™äº›ä¼˜åŒ–éƒ½åœ¨ç¼–è¯‘æ—¶å®Œæˆï¼Œä¹Ÿå°±æé«˜äº†è¿è¡Œæ—¶çš„è§£é‡Šæ•ˆç‡ã€‚</p><p>é‚£ä¹ˆï¼ŒLLVM æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p><p>LLVM IR æ˜¯ SSAï¼ˆStatic Single-Assignmentï¼Œé™æ€å•èµ‹å€¼ï¼‰ å½¢å¼çš„ï¼ŒLLVM IR é€šè¿‡ mem2reg Pass èƒ½å¤Ÿè¯†åˆ« alloca æ¨¡å¼ï¼Œå°†å±€éƒ¨å˜é‡å˜æˆ SSA valueï¼Œè¿™æ ·å°±ä¸å†éœ€è¦ allocaã€loadã€store äº†ã€‚</p><p>SSA ä¸»è¦è§£å†³çš„æ˜¯ï¼Œå¤šç§æ•°æ®æµåˆ†ææ—¶ç§ç±»å¤šã€éš¾ä»¥ç»´æŠ¤çš„é—®é¢˜ã€‚å®ƒå¯ä»¥æä¾›ä¸€ç§é€šç”¨åˆ†ææ–¹æ³•ï¼ŒæŠŠæ•°æ®æµå’Œæ§åˆ¶æµéƒ½å†™åœ¨ LLVM IR é‡Œã€‚æ¯”å¦‚ï¼ŒLLVM IR åœ¨å¾ªç¯ä½“å¤–ç”Ÿæˆä¸€ä¸ª phi æŒ‡ä»¤ï¼Œå…¶ä¸­æ¯ä¸ªå€¼ä»…åˆ†é…ä¸€æ¬¡ï¼Œå¹¶ä¸”ç”¨ç‰¹æ®Šçš„ phi èŠ‚ç‚¹åˆå¹¶å¤šä¸ªå¯èƒ½çš„å€¼ï¼ŒLLVM çš„ mem2reg ä¼ é€’å°†æˆ‘ä»¬åˆå§‹å †æ ˆä½¿ç”¨çš„ä»£ç ï¼Œè½¬æˆå¸¦æœ‰è™šæ‹Ÿå¯„å­˜å™¨çš„ SSAã€‚è¿™æ · ï¼ŒLLVM å°±èƒ½å¤Ÿæ›´å®¹æ˜“åœ°åˆ†æå’Œä¼˜åŒ– IR äº†ã€‚</p><p>LLVM åªæ˜¯é™æ€è®¡ç®—0å’Œ1åœ°å€ï¼Œå¹¶ä¸”åªç”¨0å’Œ1å¤„ç†è™šæ‹Ÿå¯„å­˜å™¨ã€‚åœ¨é«˜çº§ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä¸€ä¸ªå‡½æ•°å¯èƒ½å°±ä¼šæœ‰å‡ åä¸ªå˜é‡è¦è·Ÿè¸ªï¼Œè™šæ‹Ÿå¯„å­˜å™¨è®¡ç®—é‡å¤§åï¼Œå¦‚ä½•æœ‰æ•ˆä½¿ç”¨è™šæ‹Ÿå¯„å­˜å™¨å°±æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ã€‚SSA å½¢å¼çš„ LLVM IR çš„ emitter ä¸ç”¨æ‹…å¿ƒè™šæ‹Ÿå¯„å­˜å™¨çš„ä½¿ç”¨æ•ˆç‡ï¼Œæ‰€æœ‰å˜é‡éƒ½ä¼šåˆ†é…åˆ°å †æ ˆé‡Œï¼Œç”± LLVM å»ä¼˜åŒ–ã€‚</p><p>å…¶å®ï¼Œæˆ‘å’Œä½ åˆ†äº«çš„OCS å’Œ Cling è§£é‡Šå™¨ï¼Œéƒ½æ˜¯åŸºäº LLVM æ‰©å±•å®ç°çš„ã€‚é‚£ä¹ˆï¼Œ<strong>å¦‚æœæˆ‘ä»¬ä¸ç”¨ LLVM çš„è¯ï¼Œåº”è¯¥æ€ä¹ˆå†™è§£é‡Šå™¨å‘¢ï¼Ÿ</strong></p><p>è¦äº†è§£å¦‚ä½•å†™è§£é‡Šå™¨ï¼Œå°±è¦å…ˆäº†è§£è§£é‡Šå™¨çš„å·¥ä½œæµç¨‹ã€‚</p><p>è§£é‡Šå™¨é¦–å…ˆå°†ä»£ç ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼Œç„¶åæ‰§è¡Œå­—èŠ‚ç ï¼Œå¯¹äºä½¿ç”¨é¢‘æ¬¡å¤šçš„ä»£ç æ‰ä¼šä½¿ç”¨ JIT ç”Ÿæˆæœºå™¨ä»£ç æ‰§è¡Œã€‚å› æ­¤ï¼Œè§£é‡Šå™¨ç¼–è¯‘çš„æœ€åˆç›®æ ‡ä¸æ˜¯å¯æ‰§è¡Œçš„æœºå™¨ä»£ç ï¼Œè€Œæ˜¯ä¸“é—¨ç”¨åœ¨è§£é‡Šå™¨é‡Œè§£é‡Šæ‰§è¡Œçš„å­—èŠ‚ç ã€‚</p><p>å› ä¸ºç¼–è¯‘å™¨ç¼–è¯‘çš„æœºå™¨ä»£ç æ˜¯ä¸“é—¨åœ¨ç¼–è¯‘æ—¶ä¼˜åŒ–è¿‡çš„ï¼Œæ‰€ä»¥è§£é‡Šå™¨çš„ä¼˜åŒ–å°±éœ€è¦æ¨è¿Ÿåˆ°è¿è¡Œæ—¶å†åšã€‚è¿™æ—¶ï¼Œå°±éœ€è¦Tracing JITæ¥è·Ÿè¸ªæœ€çƒ­çš„å¾ªç¯ä¼˜åŒ–ï¼Œæ¯”å¦‚ç›¸åŒçš„å¾ªç¯è°ƒç”¨è¶…è¿‡ä¸€ç™¾ä¸‡æ¬¡ï¼Œå¾ªç¯å°±ä¼šç¼–è¯‘æˆä¼˜åŒ–çš„æœºå™¨ä»£ç ã€‚æµè§ˆå™¨çš„å¼•æ“ï¼Œæ¯”å¦‚ JavaScriptCoreã€V8ï¼Œéƒ½æ˜¯åŸºäºå­—èŠ‚ç è§£é‡Šå™¨åŠ ä¸Š Tracing JIT æ¥è§£é‡Šæ‰§è¡Œ JavaScript ä»£ç çš„ã€‚</p><p>å…¶å®ï¼Œ<strong>JIT æŠ€æœ¯å°±æ˜¯åœ¨ App è¿è¡Œæ—¶åˆ›å»ºæœºå™¨ä»£ç ï¼ŒåŒæ—¶æ‰§è¡Œè¿™äº›æœºå™¨ä»£ç </strong>ã€‚ç¼–è¯‘è¿‡ç¨‹ï¼Œå°†é«˜çº§è¯­è¨€è½¬æ¢æˆæ±‡ç¼–è¯­è¨€ï¼ŒAssemblerï¼ˆæ±‡ç¼–å™¨ï¼‰ ä¼šå°†æ±‡ç¼–è¯­è¨€è½¬æ¢æˆå®é™…çš„æœºå™¨ä»£ç ã€‚</p><p>ä»…åŸºäºå­—èŠ‚ç çš„è§£é‡Šå™¨çš„å®ç°ï¼Œæˆ‘ä»¬åªéœ€è¦åšå¥½è§£æå·¥ä½œï¼Œç„¶åä¼˜åŒ–å­—èŠ‚ç å’Œè§£é‡Šå­—èŠ‚ç çš„æ•ˆç‡ï¼Œå¯¹åº”ä¸ŠåŸç”Ÿçš„åŸºæœ¬æ–¹æ³•æ‰§è¡Œï¼Œæˆ–è€…æ–¹æ³•æ›¿æ¢å°±å¯ä»¥å®ç°åŠ¨æ€åŒ–äº†ã€‚</p><p>ä½†æ˜¯ï¼Œè‡ªå·±å®ç° JIT å°±éš¾å¤šäº†ï¼Œä¸€æ–¹é¢ç¼–å†™ä»£ç å’Œç»´æŠ¤ä»£ç çš„æˆæœ¬éƒ½å¾ˆé«˜ï¼Œå¦ä¸€æ–¹é¢è¿˜éœ€è¦æ”¯æŒå¤š CPU æ¶æ„ï¼Œå¦‚æœæ­è½½ iOS ç³»ç»Ÿçš„ç¡¬ä»¶ CPU æ¶æ„æœ‰äº†æ›´æ–°è¿˜è¦å†å»å®ç°æ”¯æŒã€‚æ‰€ä»¥ï¼ŒJIT çš„æ ‡ç­¾å’Œè·³è½¬éƒ½ä¸å¯¹å¤–æä¾›è°ƒç”¨ã€‚</p><p>é‚£å¦‚æœè¦æƒ³å®ç°ä¸€ä¸ªè‡ªåˆ¶ JIT çš„è¯ï¼Œåº”è¯¥å¦‚ä½•å…¥æ‰‹å‘¢ï¼Ÿ</p><p>ç”¨ C++ åº“å®ç°çš„ JIT <a href=\"https://github.com/asmjit/asmjit\">AsmJit</a>ï¼Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ JIT å’Œ AOT çš„ Assemblerï¼Œå¯ä»¥ç”Ÿæˆæ”¯æŒæ•´ä¸ªx86å’Œx64æ¶æ„æŒ‡ä»¤é›†ï¼ˆä» MMX åˆ° AVX512ï¼‰çš„æœºå™¨ä»£ç ã€‚AsmJitçš„ä½“ç§¯å¾ˆå°ï¼Œåœ¨300KB ä»¥å†…ï¼Œå¹¶ä¸”æ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œéå¸¸é€‚åˆç”¨æ¥å®ç°è‡ªå·±çš„ JITã€‚ä½¿ç”¨ AsmJit åº“åï¼Œæˆ‘ä»¬å†è‡ªå·±åŠ¨æ‰‹å»ä¸ºå­—èŠ‚ç ç¼–å†™ JIT èƒ½åŠ›çš„è§£é‡Šå™¨ï¼Œå°±æ›´å®¹æ˜“äº†ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘è·Ÿä½ åˆ†äº«äº†ä½¿ App å…·æœ‰åŠ¨æ€åŒ–å’Œçƒ­æ›´æ–°èƒ½åŠ›çš„æ–¹æ¡ˆï¼Œå…¶ä¸­åŒ…å«äº†ç›®å‰å¤§å¤šæ•°é¡¹ç›®åœ¨ä½¿ç”¨çš„ JavaScriptCore è§£é‡Šå™¨æ–¹æ¡ˆã€‚</p><p>ä½†ç”±äº JavaScriptCore æ–¹æ¡ˆæ›´é€‚åˆå‰ç«¯å¼€å‘è€…ï¼Œäºæ˜¯å‡ºç°äº†å¯¹åŸç”Ÿå¼€å‘è€…æ›´å‹å¥½çš„ä»£ç è½¬è¯‘æ–¹æ¡ˆï¼Œä»£ç è½¬è¯‘æœ€ç»ˆè§£é‡Šæ‰§è¡Œè¿˜æ˜¯ JavaScriptCoreï¼Œåœ¨æ•ˆç‡ä¸Šä¼šå—åˆ°ç§ç§é™åˆ¶ã€‚ä¸ºäº†æ›´å¥½çš„æ€§èƒ½ï¼Œä¾¿æœ‰äº†åœ¨ App å†…é›†æˆè‡ªå»ºè§£é‡Šå™¨çš„æ–¹æ¡ˆã€‚</p><p>æˆ‘è§‰å¾—çƒ­æ›´æ–°ç”¨å“ªç§æ–¹æ¡ˆé—®é¢˜éƒ½ä¸å¤§ï¼Œæ¯•ç«Ÿåªæ˜¯ä¿®å¤ä»£ç ã€‚ä½†æ˜¯ï¼ŒåŠ¨æ€åŒ–æ–¹æ¡ˆçš„é€‰æ‹©ï¼Œå°±è¦æ›´æ…é‡äº›äº†ï¼Œæ¯•ç«Ÿæ•´ä¸ªä¸šåŠ¡éƒ½è¦ç”¨ã€‚</p><p>åŠ¨æ€åŒ–æ–¹æ¡ˆçš„é€‰æ‹©ä¸»è¦ç”±å›¢é˜Ÿäººå‘˜è‡ªèº«æƒ…å†µå†³å®šï¼Œæ¯”å¦‚åŸç”Ÿå¼€å‘è€…å±…å¤šæ—¶å¯ä»¥é€‰æ‹©ä»£ç è½¬è¯‘æˆ–è‡ªå»ºè§£é‡Šå™¨æ–¹æ¡ˆï¼›å‰ç«¯å¼€å‘è€…å±…å¤šæˆ–è€…åŸç”Ÿå¼€å‘è€…æœ‰æ„è½¬å‘å‰ç«¯å¼€å‘æ—¶ï¼Œå¯ä»¥é€‰æ‹© JavaScriptCore æ–¹æ¡ˆã€‚</p><p>å¦å¤–ï¼ŒåŠ¨æ€åŒ–æ–¹æ¡ˆæœ¬èº«ï¼Œå¯¹å¤§å›¢é˜Ÿçš„æ„ä¹‰ä¼šæ›´åŠ æ˜æ˜¾ã€‚å› ä¸ºå¤§å›¢é˜Ÿä¸€èˆ¬ä¼šæ ¹æ®ä¸šåŠ¡åˆ†æˆè‹¥å¹²å°å›¢é˜Ÿï¼Œç”±è¿™äº›ä¸åŒå›¢é˜Ÿç»„æˆçš„è¶…çº§å¤§ App æ¯æ¬¡å‘ç‰ˆï¼Œéƒ½ä¼šç›¸äº’æ£è‚˜ï¼Œè€ŒåŠ¨æ€åŒ–å°±èƒ½å¤Ÿè§£å†³ä¸åŒå›¢é˜Ÿçµæ´»å‘ç‰ˆçš„é—®é¢˜ï¼Œè®©å„ä¸ªå°å›¢é˜ŸæŒ‰ç…§è‡ªå·±çš„èŠ‚å¥æ¥è¿­ä»£ä¸šåŠ¡ã€‚</p><h2>è¯¾åä½œä¸š</h2><p>å¦‚æœä½ è´Ÿè´£çš„ App å‡ºç°äº†çº¿ä¸Šé—®é¢˜ï¼Œä½ æ˜¯é‡‡ç”¨ä»€ä¹ˆæ–¹æ¡ˆæ¥ä¿®å¤è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿ</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","neighbors":{"left":{"article_title":"42 | iOSåŸç”Ÿã€å¤§å‰ç«¯å’ŒFlutteråˆ†åˆ«æ˜¯æ€ä¹ˆæ¸²æŸ“çš„ï¼Ÿ","id":101639},"right":{"article_title":"ç”¨æˆ·æ•…äº‹ | æˆ‘æ˜¯å¦‚ä½•å­¦ä¹ è¿™ä¸ªä¸“æ çš„ï¼Ÿ","id":99265}},"comments":[{"had_liked":false,"id":105385,"user_name":"Jeffrey","can_delete":false,"product_type":"c1","uid":1453745,"ip_address":"","ucode":"1CA6A788EA9B74","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/b1/85bbfa6b.jpg","comment_is_top":false,"comment_ctime":1560991530,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"143294912298","product_id":100024501,"comment_content":"å¹äº†2å¹´äº† éƒ½æ²¡æœ‰è§è¿‡DynamicCocoaé•¿å•¥æ · ä»€ä¹ˆæ—¶å€™å‡†å¤‡å¼€æº","like_count":34,"discussions":[{"author":{"id":1208706,"avatar":"https://static001.geekbang.org/account/avatar/00/12/71/82/f6d60f44.jpg","nickname":"ç½‘è¯¾å°åŠ©æ‰‹","note":"","ucode":"5AC4BF838541F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423,"discussion_content":"è¿™ä¸ªåº“å·²ç»ä¸ä¼šå¼€æºäº†. åœ¨æ»´æ»´å†…éƒ¨éƒ½æ˜¯é—­æºçš„. åªæœ‰æ ¸å¿ƒå¼€å‘è€…æœ‰è®¿é—®æƒé™. ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561543335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109456,"user_name":"æ–¹é‡‘å³°","can_delete":false,"product_type":"c1","uid":1079265,"ip_address":"","ucode":"1130BF377F588E","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/e1/fa7fd9f3.jpg","comment_is_top":false,"comment_ctime":1562035708,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"57396610556","product_id":100024501,"comment_content":"æˆ‘ä»¬ä¹‹å‰çš„çƒ­æ›´æ–°æ–¹æ¡ˆæ˜¯:å°†ä¸‹å‘çš„åŸç”Ÿä»£ç ï¼Œé€šè¿‡è‡ªå·±å®ç°çš„ä»£ç è§£æå¼•æ“ï¼Œå°†ä»£ç è½¬æ¢ä¸ºASTæ ‘ï¼Œç„¶åå­˜å‚¨åœ¨ç›¸å…³çš„æ¨¡å‹é‡Œé¢ï¼Œåœ¨é€šè¿‡ä¸€ä¸ªä¸Šä¸‹æ–‡æ³¨å…¥åˆ°runtimeé‡Œé¢ï¼Œå½“runtimeå›è°ƒåˆ°å½“å‰å‡½æ•°çš„æ—¶å€™ï¼Œä¸Šä¸‹æ–‡ä»å­˜å‚¨çš„ç›¸å…³æ¨¡å‹å–å‡ºå„ä¸ªå‚æ•°ï¼Œç„¶åæ”¾åˆ°å½“å‰å †æ ˆé‡Œé¢å»æ‰§è¡Œç›¸å…³çš„é€»è¾‘ï¼Œæ‰§è¡Œé—®ä¹‹åï¼Œåœ¨è¿”å›ä¹‹å‰è°ƒç”¨çš„åœ°æ–¹ï¼Œè¿™é‡Œè·Ÿè…¾è®¯çš„OCSæœ‰ç‚¹åƒ.","like_count":14,"discussions":[{"author":{"id":1015911,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/67/abb7bfe3.jpg","nickname":"æ¶‚æµ·ç”Ÿ","note":"","ucode":"E3DA62CF9A7745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384925,"discussion_content":"ç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626795318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129823,"user_name":"æ—¶å…‰å¿µä½ ","can_delete":false,"product_type":"c1","uid":1051653,"ip_address":"","ucode":"1F19ECFBE58280","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/05/3e2b8688.jpg","comment_is_top":false,"comment_ctime":1567269978,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27337073754","product_id":100024501,"comment_content":"https:&#47;&#47;github.com&#47;YPLiang19&#47;Mango, ä¸çŸ¥é“æ˜¯å“ªä½å¤§ç¥å†™çš„è¯­æ³•ç±»ä¼¼OCçš„DSL,æ”¯æŒçƒ­æ›´æ–°.","like_count":6},{"had_liked":false,"id":106005,"user_name":"å†¯é€‰åˆš","can_delete":false,"product_type":"c1","uid":1018444,"ip_address":"","ucode":"A186F31A730F04","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/4c/d976b42c.jpg","comment_is_top":false,"comment_ctime":1561124768,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27330928544","product_id":100024501,"comment_content":"ç°åœ¨ä½¿ç”¨jspatchä¼šè¢«è‹¹æœå‰§æ‹’ä¹ˆ","like_count":6},{"had_liked":false,"id":105434,"user_name":"Du","can_delete":false,"product_type":"c1","uid":1176351,"ip_address":"","ucode":"DDBCB33F849EA3","user_header":"https://static001.geekbang.org/account/avatar/00/11/f3/1f/17acfe43.jpg","comment_is_top":false,"comment_ctime":1560999362,"is_pvip":false,"replies":[{"id":"38159","content":"æ˜¯çš„ï¼Œå‘¨å…­å°±æ›´æ–°ç»“æŸè¯­äº†ã€‚ä½†ç»“æŸåï¼Œè€å¸ˆä¹Ÿä¼šç»§ç»­å…³æ³¨ä¸“æ ï¼Œå¯èƒ½ä¼šå†å†™äº›åŠ é¤æ–‡ç« ï¼Œæ¬¢è¿ä½ ç»§ç»­å…³æ³¨å“¦","user_name":"ç¼–è¾‘å›å¤","comment_id":105434,"uid":"1059377","ip_address":"","utype":2,"ctime":1561000549,"user_name_real":"è´¾é™"}],"discussion_count":2,"race_medal":0,"score":"23035835842","product_id":100024501,"comment_content":"æ˜¯ä¸æ˜¯ç»“è¯¾äº† ? ","like_count":5,"discussions":[{"author":{"id":1059377,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2a/31/9edbf8a6.jpg","nickname":"è´¾é™","note":"","ucode":"081E70CC01F6B8","race_medal":0,"user_type":8,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454683,"discussion_content":"æ˜¯çš„ï¼Œå‘¨å…­å°±æ›´æ–°ç»“æŸè¯­äº†ã€‚ä½†ç»“æŸåï¼Œè€å¸ˆä¹Ÿä¼šç»§ç»­å…³æ³¨ä¸“æ ï¼Œå¯èƒ½ä¼šå†å†™äº›åŠ é¤æ–‡ç« ï¼Œæ¬¢è¿ä½ ç»§ç»­å…³æ³¨å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561000549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048531,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ff/d3/f249eefe.jpg","nickname":"iHTC","note":"","ucode":"22065449F54F40","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316474,"discussion_content":"åŠ é¤è¿˜ä¼šæœ‰å—ğŸ¤¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603416175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106008,"user_name":"Given","can_delete":false,"product_type":"c1","uid":1390325,"ip_address":"","ucode":"62F16F7480B9DB","user_header":"https://static001.geekbang.org/account/avatar/00/15/36/f5/ad3270be.jpg","comment_is_top":false,"comment_ctime":1561125666,"is_pvip":false,"replies":[{"id":"38596","content":"å¯ä»¥å…³æ³¨æˆ‘å¾®åšï¼ˆ@æˆ´é“­ï¼‰å’Œåšå®¢ï¼ˆhttps:&#47;&#47;ming1016.github.ioï¼‰ ","user_name":"ä½œè€…å›å¤","comment_id":106008,"uid":"1140280","ip_address":"","utype":1,"ctime":1561386897,"user_name_real":"æˆ´é“­"}],"discussion_count":1,"race_medal":0,"score":"14446027554","product_id":100024501,"comment_content":"è€å¸ˆï¼Œç»“æŸè¯¾ç¨‹äº†ä»¥åæ€ä¹ˆé€šè¿‡å…¶ä»–æ–¹å¼è”ç³»ä½ ï¼Œç»§ç»­å‘ä½ å­¦ä¹ ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454911,"discussion_content":"å¯ä»¥å…³æ³¨æˆ‘å¾®åšï¼ˆ@æˆ´é“­ï¼‰å’Œåšå®¢ï¼ˆhttps://ming1016.github.ioï¼‰ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561386897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109053,"user_name":"Dean","can_delete":false,"product_type":"c1","uid":1196306,"ip_address":"","ucode":"44825123FA0439","user_header":"https://static001.geekbang.org/account/avatar/00/12/41/12/bf0af337.jpg","comment_is_top":false,"comment_ctime":1561952880,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10151887472","product_id":100024501,"comment_content":"Daynamic cocoasdkä¸ä¼šå¼€æºäº†ï¼Œåªæ˜¯æ»´æ»´è‡ªå·±å†…éƒ¨åœ¨ç”¨ï¼Œå¦‚æœå¼€æºï¼Œè¢«å¹¿æ³›åº”ç”¨å¯èƒ½ä¼šè¢«è‹¹æœç›¯ä¸Šï¼Œè€Œå¯¼è‡´æ»´æ»´éƒ½ä¸èƒ½ç”¨äº†","like_count":3},{"had_liked":false,"id":107577,"user_name":"å“å°åœŸ","can_delete":false,"product_type":"c1","uid":1017192,"ip_address":"","ucode":"A9EF6BD4D9E961","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ermPNNQAxibOtBseXNLLpnSHica0qGkvyxrgxbAfDT8Y0LuS9yBqjzXksKQW35F3916HcTg9QcxfcOg/132","comment_is_top":false,"comment_ctime":1561559642,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5856526938","product_id":100024501,"comment_content":"â€œåªä¸è¿‡ï¼ŒExecutionEngine é‡Œçš„ Interpreterï¼Œæ˜¯ä¸“é—¨ç”¨æ¥è§£é‡Š LLVM IR çš„ï¼Œç¼ºå°‘å¯¹ Objective-C è¯­æ³•ç‰¹æ€§çš„æ”¯æŒï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥ä½¿ç”¨ã€‚â€<br>â€”â€”â€”â€”â€”â€”â€”-<br>æ²¡å¤ªæ‡‚ã€‚å¯¹äºåŠ¨æ€åŒ–æ–¹æ¡ˆæ¥è¯´ï¼Œä¸ºå•¥éå¾—è¦ç›´æ¥è§£é‡Šocå‘¢ï¼ŒæŠŠocç¼–è¯‘æˆirï¼Œå°†irä¸‹å‘ç»™llvmè§£é‡Šå™¨lliæ‰§è¡Œä¸å°±å¤Ÿäº†å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1785940,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/rWMGIQG1z13nekorr9I4PY1w7rlskssf949IQ24SvIewpM7mmZoH2QEZ2aKHu5tkmicGQ7KTGrN9vFYhrDsdp9w/132","nickname":"Geek_9dbcb4","note":"","ucode":"BB92D5E844A743","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":249933,"discussion_content":"å¯è¡Œå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587977206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298645,"user_name":"15827525622","can_delete":false,"product_type":"c1","uid":1238069,"ip_address":"","ucode":"9BADB5EDDA3F47","user_header":"https://static001.geekbang.org/account/avatar/00/12/e4/35/bf5dfd8a.jpg","comment_is_top":false,"comment_ctime":1624247100,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624247100","product_id":100024501,"comment_content":"è€å¸ˆ,é—®ä¸‹swiftä¸€èˆ¬ä½¿ç”¨ä»€ä¹ˆæ–¹å¼çƒ­ä¿®å¤å•Š","like_count":0},{"had_liked":false,"id":117288,"user_name":"Link","can_delete":false,"product_type":"c1","uid":1454525,"ip_address":"","ucode":"64849EF2B97975","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/bd/62c945b4.jpg","comment_is_top":false,"comment_ctime":1564018986,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564018986","product_id":100024501,"comment_content":"objcå’‹æ˜¯å¼ºç±»å‹è¯­è¨€äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1243460,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/44/1a5e5992.jpg","nickname":"Tracy.li","note":"","ucode":"0338DEC133CC9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337563,"discussion_content":"éš¾é“æ˜¯å¼±ç±»å‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608975894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107275,"user_name":"Geek_è‡ªæ¥ä¹Ÿå¤§äºº","can_delete":false,"product_type":"c1","uid":1453215,"ip_address":"","ucode":"BA0E3BFCE5D167","user_header":"https://static001.geekbang.org/account/avatar/00/16/2c/9f/265106fb.jpg","comment_is_top":false,"comment_ctime":1561510948,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1561510948","product_id":100024501,"comment_content":"DynamicCocoaä¹Ÿæ˜¯è½¬æˆjsï¼Ÿæˆ‘çœ‹ä¸æ˜¯ï¼Œå¦‚æœéƒ½æ˜¯è½¬æˆjsé€šè¿‡ç³»ç»Ÿè‡ªå¸¦çš„jsè§£æå™¨ï¼Œé‚£å’Œjspatchæ²¡å•¥åŒºåˆ«ï¼","like_count":0,"discussions":[{"author":{"id":1142857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDRQTxdiaJGEEOyooK3YsDWvms01Dq2eJzBIKRH6JibpEhxnMSXS0Y4kicO9kTrbJibZDaQ8sxJBxoWQ/132","nickname":"passion","note":"","ucode":"3E54D3153FC5BE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287681,"discussion_content":"é€šè¿‡DynamicCocoaæŠŠOCè½¬æ¢ä¸ºJSï¼Œå¯¹åŸç”Ÿå¼€å‘è€…æ¯”è¾ƒå‹å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593509221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107222,"user_name":"æŠ›åˆ°é“¶æ²³","can_delete":false,"product_type":"c1","uid":1472719,"ip_address":"","ucode":"9F23F71BA20D88","user_header":"https://static001.geekbang.org/account/avatar/00/16/78/cf/f333b86f.jpg","comment_is_top":false,"comment_ctime":1561492407,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561492407","product_id":100024501,"comment_content":"ä¾ç¨€è®°å¾—å­™æºå½“æ—¶å…¬å¸ƒçš„å¼€æºè®¡åˆ’ï¼Œå¯æƒœè¢«è‹¹æœæ‰“æ–­äº†","like_count":1},{"had_liked":false,"id":107088,"user_name":"AI","can_delete":false,"product_type":"c1","uid":1455931,"ip_address":"","ucode":"B6ED130A0304F4","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/3b/fe0492b9.jpg","comment_is_top":false,"comment_ctime":1561456869,"is_pvip":false,"replies":[{"id":"38771","content":"å¾ˆå¤šéƒ½æ˜¯è‡ªå»º","user_name":"ä½œè€…å›å¤","comment_id":107088,"uid":"1140280","ip_address":"","utype":1,"ctime":1561472612,"user_name_real":"æˆ´é“­"}],"discussion_count":1,"race_medal":0,"score":"1561456869","product_id":100024501,"comment_content":"æˆ‘æƒ³é—®ä¸‹ä½œè€…ï¼Œç°åœ¨çš„çƒ­æ›´æ–°æ–¹æ¡ˆéƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Œswifté€‰æ‹©çš„åˆæ˜¯ä»€ä¹ˆå‘¢","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455361,"discussion_content":"å¾ˆå¤šéƒ½æ˜¯è‡ªå»º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561472612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106051,"user_name":"æ™¯è¿ª","can_delete":false,"product_type":"c1","uid":1456564,"ip_address":"","ucode":"9176C843E49BE2","user_header":"https://static001.geekbang.org/account/avatar/00/16/39/b4/b0cb712a.jpg","comment_is_top":false,"comment_ctime":1561156441,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561156441","product_id":100024501,"comment_content":"DynamicCocoa å•¥æ—¶å€™å¼€æºå‘€ï¼Œç­‰äº†å¥½ä¹…","like_count":0},{"had_liked":false,"id":106004,"user_name":"æ¯›æˆæ–¹","can_delete":false,"product_type":"c1","uid":1459289,"ip_address":"","ucode":"DFBF3D464D8D7C","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/59/9cc7d8cd.jpg","comment_is_top":false,"comment_ctime":1561124114,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561124114","product_id":100024501,"comment_content":"ä¸çŸ¥ä¸è§‰å¿«ç»“æŸäº† æŒç»­å­¦ä¹  æé«˜äº†æŠ€æœ¯è®¤çŸ¥ å¤§å¹²ä¸€åœº è“å²›ç‚¹ä¸ªèµ","like_count":1}]}