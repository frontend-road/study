{"id":69862,"title":"06 | å…¨å±€é”å’Œè¡¨é” ï¼šç»™è¡¨åŠ ä¸ªå­—æ®µæ€ä¹ˆæœ‰è¿™ä¹ˆå¤šé˜»ç¢ï¼Ÿ","content":"<p>ä»Šå¤©æˆ‘è¦è·Ÿä½ èŠèŠMySQLçš„é”ã€‚æ•°æ®åº“é”è®¾è®¡çš„åˆè¡·æ˜¯å¤„ç†å¹¶å‘é—®é¢˜ã€‚ä½œä¸ºå¤šç”¨æˆ·å…±äº«çš„èµ„æºï¼Œå½“å‡ºç°å¹¶å‘è®¿é—®çš„æ—¶å€™ï¼Œæ•°æ®åº“éœ€è¦åˆç†åœ°æ§åˆ¶èµ„æºçš„è®¿é—®è§„åˆ™ã€‚è€Œé”å°±æ˜¯ç”¨æ¥å®ç°è¿™äº›è®¿é—®è§„åˆ™çš„é‡è¦æ•°æ®ç»“æ„ã€‚</p><p><strong>æ ¹æ®åŠ é”çš„èŒƒå›´ï¼ŒMySQLé‡Œé¢çš„é”å¤§è‡´å¯ä»¥åˆ†æˆå…¨å±€é”ã€è¡¨çº§é”å’Œè¡Œé”ä¸‰ç±»</strong>ã€‚ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä¼šå’Œä½ åˆ†äº«å…¨å±€é”å’Œè¡¨çº§é”ã€‚è€Œå…³äºè¡Œé”çš„å†…å®¹ï¼Œæˆ‘ä¼šç•™ç€åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­å†å’Œä½ è¯¦ç»†ä»‹ç»ã€‚</p><p>è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œé”çš„è®¾è®¡æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¸¤ç¯‡æ–‡ç« ä¸ä¼šæ¶‰åŠé”çš„å…·ä½“å®ç°ç»†èŠ‚ï¼Œä¸»è¦ä»‹ç»çš„æ˜¯ç¢°åˆ°é”æ—¶çš„ç°è±¡å’Œå…¶èƒŒåçš„åŸç†ã€‚</p><h1>å…¨å±€é”</h1><p>é¡¾åæ€ä¹‰ï¼Œå…¨å±€é”å°±æ˜¯å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ã€‚MySQLæä¾›äº†ä¸€ä¸ªåŠ å…¨å±€è¯»é”çš„æ–¹æ³•ï¼Œå‘½ä»¤æ˜¯ Flush tables with read lock (FTWRL)ã€‚å½“ä½ éœ€è¦è®©æ•´ä¸ªåº“å¤„äºåªè¯»çŠ¶æ€çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œä¹‹åå…¶ä»–çº¿ç¨‹çš„ä»¥ä¸‹è¯­å¥ä¼šè¢«é˜»å¡ï¼šæ•°æ®æ›´æ–°è¯­å¥ï¼ˆæ•°æ®çš„å¢åˆ æ”¹ï¼‰ã€æ•°æ®å®šä¹‰è¯­å¥ï¼ˆåŒ…æ‹¬å»ºè¡¨ã€ä¿®æ”¹è¡¨ç»“æ„ç­‰ï¼‰å’Œæ›´æ–°ç±»äº‹åŠ¡çš„æäº¤è¯­å¥ã€‚</p><p><strong>å…¨å±€é”çš„å…¸å‹ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œåšå…¨åº“é€»è¾‘å¤‡ä»½ã€‚</strong>ä¹Ÿå°±æ˜¯æŠŠæ•´åº“æ¯ä¸ªè¡¨éƒ½selectå‡ºæ¥å­˜æˆæ–‡æœ¬ã€‚</p><p>ä»¥å‰æœ‰ä¸€ç§åšæ³•ï¼Œæ˜¯é€šè¿‡FTWRLç¡®ä¿ä¸ä¼šæœ‰å…¶ä»–çº¿ç¨‹å¯¹æ•°æ®åº“åšæ›´æ–°ï¼Œç„¶åå¯¹æ•´ä¸ªåº“åšå¤‡ä»½ã€‚æ³¨æ„ï¼Œåœ¨å¤‡ä»½è¿‡ç¨‹ä¸­æ•´ä¸ªåº“å®Œå…¨å¤„äºåªè¯»çŠ¶æ€ã€‚</p><!-- [[[read_end]]] --><p>ä½†æ˜¯è®©æ•´åº“éƒ½åªè¯»ï¼Œå¬ä¸Šå»å°±å¾ˆå±é™©ï¼š</p><ul>\n<li>å¦‚æœä½ åœ¨ä¸»åº“ä¸Šå¤‡ä»½ï¼Œé‚£ä¹ˆåœ¨å¤‡ä»½æœŸé—´éƒ½ä¸èƒ½æ‰§è¡Œæ›´æ–°ï¼Œä¸šåŠ¡åŸºæœ¬ä¸Šå°±å¾—åœæ‘†ï¼›</li>\n<li>å¦‚æœä½ åœ¨ä»åº“ä¸Šå¤‡ä»½ï¼Œé‚£ä¹ˆå¤‡ä»½æœŸé—´ä»åº“ä¸èƒ½æ‰§è¡Œä¸»åº“åŒæ­¥è¿‡æ¥çš„binlogï¼Œä¼šå¯¼è‡´ä¸»ä»å»¶è¿Ÿã€‚</li>\n</ul><p>çœ‹æ¥åŠ å…¨å±€é”ä¸å¤ªå¥½ã€‚ä½†æ˜¯ç»†æƒ³ä¸€ä¸‹ï¼Œå¤‡ä»½ä¸ºä»€ä¹ˆè¦åŠ é”å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸åŠ é”ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p><p>å‡è®¾ä½ ç°åœ¨è¦ç»´æŠ¤â€œæå®¢æ—¶é—´â€çš„è´­ä¹°ç³»ç»Ÿï¼Œå…³æ³¨çš„æ˜¯ç”¨æˆ·è´¦æˆ·ä½™é¢è¡¨å’Œç”¨æˆ·è¯¾ç¨‹è¡¨ã€‚</p><p>ç°åœ¨å‘èµ·ä¸€ä¸ªé€»è¾‘å¤‡ä»½ã€‚å‡è®¾å¤‡ä»½æœŸé—´ï¼Œæœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œä»–è´­ä¹°äº†ä¸€é—¨è¯¾ç¨‹ï¼Œä¸šåŠ¡é€»è¾‘é‡Œå°±è¦æ‰£æ‰ä»–çš„ä½™é¢ï¼Œç„¶åå¾€å·²è´­è¯¾ç¨‹é‡Œé¢åŠ ä¸Šä¸€é—¨è¯¾ã€‚</p><p>å¦‚æœæ—¶é—´é¡ºåºä¸Šæ˜¯å…ˆå¤‡ä»½è´¦æˆ·ä½™é¢è¡¨(u_account)ï¼Œç„¶åç”¨æˆ·è´­ä¹°ï¼Œç„¶åå¤‡ä»½ç”¨æˆ·è¯¾ç¨‹è¡¨(u_course)ï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿä½ å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/cb/cd/cbfd4a0bbb1210792064bcea4e49b0cd.png?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾1 ä¸šåŠ¡å’Œå¤‡ä»½çŠ¶æ€å›¾</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå¤‡ä»½ç»“æœé‡Œï¼Œç”¨æˆ·Açš„æ•°æ®çŠ¶æ€æ˜¯â€œè´¦æˆ·ä½™é¢æ²¡æ‰£ï¼Œä½†æ˜¯ç”¨æˆ·è¯¾ç¨‹è¡¨é‡Œé¢å·²ç»å¤šäº†ä¸€é—¨è¯¾â€ã€‚å¦‚æœåé¢ç”¨è¿™ä¸ªå¤‡ä»½æ¥æ¢å¤æ•°æ®çš„è¯ï¼Œç”¨æˆ·Aå°±å‘ç°ï¼Œè‡ªå·±èµšäº†ã€‚</p><p>ä½œä¸ºç”¨æˆ·å¯åˆ«è§‰å¾—è¿™æ ·å¯çœŸå¥½å•Šï¼Œä½ å¯ä»¥è¯•æƒ³ä¸€ä¸‹ï¼šå¦‚æœå¤‡ä»½è¡¨çš„é¡ºåºåè¿‡æ¥ï¼Œå…ˆå¤‡ä»½ç”¨æˆ·è¯¾ç¨‹è¡¨å†å¤‡ä»½è´¦æˆ·ä½™é¢è¡¨ï¼Œåˆå¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆç»“æœï¼Ÿ</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åŠ é”çš„è¯ï¼Œå¤‡ä»½ç³»ç»Ÿå¤‡ä»½çš„å¾—åˆ°çš„åº“ä¸æ˜¯ä¸€ä¸ªé€»è¾‘æ—¶é—´ç‚¹ï¼Œè¿™ä¸ªè§†å›¾æ˜¯é€»è¾‘ä¸ä¸€è‡´çš„ã€‚</p><p>è¯´åˆ°è§†å›¾ä½ è‚¯å®šæƒ³èµ·æ¥äº†ï¼Œæˆ‘ä»¬åœ¨å‰é¢è®²äº‹åŠ¡éš”ç¦»çš„æ—¶å€™ï¼Œå…¶å®æ˜¯æœ‰ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿæ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾çš„ï¼Œå¯¹å§ï¼Ÿ</p><p>æ˜¯çš„ï¼Œå°±æ˜¯åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šå¦‚æœä½ å¯¹äº‹åŠ¡éš”ç¦»çº§åˆ«çš„æ¦‚å¿µä¸æ˜¯å¾ˆæ¸…æ™°çš„è¯ï¼Œå¯ä»¥å†å›é¡¾ä¸€ä¸‹ç¬¬3ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/68963\">ã€Šäº‹åŠ¡éš”ç¦»ï¼šä¸ºä»€ä¹ˆä½ æ”¹äº†æˆ‘è¿˜çœ‹ä¸è§ï¼Ÿã€‹</a>ä¸­çš„ç›¸å…³å†…å®¹ã€‚</p>\n</blockquote><p>å®˜æ–¹è‡ªå¸¦çš„é€»è¾‘å¤‡ä»½å·¥å…·æ˜¯mysqldumpã€‚å½“mysqldumpä½¿ç”¨å‚æ•°â€“single-transactionçš„æ—¶å€™ï¼Œå¯¼æ•°æ®ä¹‹å‰å°±ä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œæ¥ç¡®ä¿æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ã€‚è€Œç”±äºMVCCçš„æ”¯æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°çš„ã€‚</p><p>ä½ ä¸€å®šåœ¨ç–‘æƒ‘ï¼Œæœ‰äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦FTWRLå‘¢ï¼Ÿ<strong>ä¸€è‡´æ€§è¯»æ˜¯å¥½ï¼Œä½†å‰ææ˜¯å¼•æ“è¦æ”¯æŒè¿™ä¸ªéš”ç¦»çº§åˆ«ã€‚</strong>æ¯”å¦‚ï¼Œå¯¹äºMyISAMè¿™ç§ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼Œå¦‚æœå¤‡ä»½è¿‡ç¨‹ä¸­æœ‰æ›´æ–°ï¼Œæ€»æ˜¯åªèƒ½å–åˆ°æœ€æ–°çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±ç ´åäº†å¤‡ä»½çš„ä¸€è‡´æ€§ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨FTWRLå‘½ä»¤äº†ã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>single-transactionæ–¹æ³•åªé€‚ç”¨äºæ‰€æœ‰çš„è¡¨ä½¿ç”¨äº‹åŠ¡å¼•æ“çš„åº“ã€‚</strong>å¦‚æœæœ‰çš„è¡¨ä½¿ç”¨äº†ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼Œé‚£ä¹ˆå¤‡ä»½å°±åªèƒ½é€šè¿‡FTWRLæ–¹æ³•ã€‚è¿™å¾€å¾€æ˜¯DBAè¦æ±‚ä¸šåŠ¡å¼€å‘äººå‘˜ä½¿ç”¨InnoDBæ›¿ä»£MyISAMçš„åŸå› ä¹‹ä¸€ã€‚</p><p>ä½ ä¹Ÿè®¸ä¼šé—®ï¼Œ<strong>æ—¢ç„¶è¦å…¨åº“åªè¯»ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨set global readonly=trueçš„æ–¹å¼å‘¢</strong>ï¼Ÿç¡®å®readonlyæ–¹å¼ä¹Ÿå¯ä»¥è®©å…¨åº“è¿›å…¥åªè¯»çŠ¶æ€ï¼Œä½†æˆ‘è¿˜æ˜¯ä¼šå»ºè®®ä½ ç”¨FTWRLæ–¹å¼ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š</p><ul>\n<li>ä¸€æ˜¯ï¼Œåœ¨æœ‰äº›ç³»ç»Ÿä¸­ï¼Œreadonlyçš„å€¼ä¼šè¢«ç”¨æ¥åšå…¶ä»–é€»è¾‘ï¼Œæ¯”å¦‚ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªåº“æ˜¯ä¸»åº“è¿˜æ˜¯å¤‡åº“ã€‚å› æ­¤ï¼Œä¿®æ”¹globalå˜é‡çš„æ–¹å¼å½±å“é¢æ›´å¤§ï¼Œæˆ‘ä¸å»ºè®®ä½ ä½¿ç”¨ã€‚</li>\n<li>äºŒæ˜¯ï¼Œåœ¨å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸Šæœ‰å·®å¼‚ã€‚å¦‚æœæ‰§è¡ŒFTWRLå‘½ä»¤ä¹‹åç”±äºå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸æ–­å¼€ï¼Œé‚£ä¹ˆMySQLä¼šè‡ªåŠ¨é‡Šæ”¾è¿™ä¸ªå…¨å±€é”ï¼Œæ•´ä¸ªåº“å›åˆ°å¯ä»¥æ­£å¸¸æ›´æ–°çš„çŠ¶æ€ã€‚è€Œå°†æ•´ä¸ªåº“è®¾ç½®ä¸ºreadonlyä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æ•°æ®åº“å°±ä¼šä¸€ç›´ä¿æŒreadonlyçŠ¶æ€ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ•´ä¸ªåº“é•¿æ—¶é—´å¤„äºä¸å¯å†™çŠ¶æ€ï¼Œé£é™©è¾ƒé«˜ã€‚</li>\n</ul><p>ä¸šåŠ¡çš„æ›´æ–°ä¸åªæ˜¯å¢åˆ æ”¹æ•°æ®ï¼ˆDML)ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯åŠ å­—æ®µç­‰ä¿®æ”¹è¡¨ç»“æ„çš„æ“ä½œï¼ˆDDLï¼‰ã€‚ä¸è®ºæ˜¯å“ªç§æ–¹æ³•ï¼Œä¸€ä¸ªåº“è¢«å…¨å±€é”ä¸Šä»¥åï¼Œä½ è¦å¯¹é‡Œé¢ä»»ä½•ä¸€ä¸ªè¡¨åšåŠ å­—æ®µæ“ä½œï¼Œéƒ½æ˜¯ä¼šè¢«é”ä½çš„ã€‚</p><p>ä½†æ˜¯ï¼Œå³ä½¿æ²¡æœ‰è¢«å…¨å±€é”ä½ï¼ŒåŠ å­—æ®µä¹Ÿä¸æ˜¯å°±èƒ½ä¸€å¸†é£é¡ºçš„ï¼Œå› ä¸ºä½ è¿˜ä¼šç¢°åˆ°æ¥ä¸‹æ¥æˆ‘ä»¬è¦ä»‹ç»çš„è¡¨çº§é”ã€‚</p><h1>è¡¨çº§é”</h1><p>MySQLé‡Œé¢è¡¨çº§åˆ«çš„é”æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯è¡¨é”ï¼Œä¸€ç§æ˜¯å…ƒæ•°æ®é”ï¼ˆmeta data lockï¼ŒMDL)ã€‚</p><p><strong>è¡¨é”çš„è¯­æ³•æ˜¯ lock tables â€¦ read/writeã€‚</strong>ä¸FTWRLç±»ä¼¼ï¼Œå¯ä»¥ç”¨unlock tablesä¸»åŠ¨é‡Šæ”¾é”ï¼Œä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯æ–­å¼€çš„æ—¶å€™è‡ªåŠ¨é‡Šæ”¾ã€‚éœ€è¦æ³¨æ„ï¼Œlock tablesè¯­æ³•é™¤äº†ä¼šé™åˆ¶åˆ«çš„çº¿ç¨‹çš„è¯»å†™å¤–ï¼Œä¹Ÿé™å®šäº†æœ¬çº¿ç¨‹æ¥ä¸‹æ¥çš„æ“ä½œå¯¹è±¡ã€‚</p><p>ä¸¾ä¸ªä¾‹å­, å¦‚æœåœ¨æŸä¸ªçº¿ç¨‹Aä¸­æ‰§è¡Œlock tables t1 read, t2 write; è¿™ä¸ªè¯­å¥ï¼Œåˆ™å…¶ä»–çº¿ç¨‹å†™t1ã€è¯»å†™t2çš„è¯­å¥éƒ½ä¼šè¢«é˜»å¡ã€‚åŒæ—¶ï¼Œçº¿ç¨‹Aåœ¨æ‰§è¡Œunlock tablesä¹‹å‰ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œè¯»t1ã€è¯»å†™t2çš„æ“ä½œã€‚è¿å†™t1éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨ã€‚</p><p>åœ¨è¿˜æ²¡æœ‰å‡ºç°æ›´ç»†ç²’åº¦çš„é”çš„æ—¶å€™ï¼Œè¡¨é”æ˜¯æœ€å¸¸ç”¨çš„å¤„ç†å¹¶å‘çš„æ–¹å¼ã€‚è€Œå¯¹äºInnoDBè¿™ç§æ”¯æŒè¡Œé”çš„å¼•æ“ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨lock tableså‘½ä»¤æ¥æ§åˆ¶å¹¶å‘ï¼Œæ¯•ç«Ÿé”ä½æ•´ä¸ªè¡¨çš„å½±å“é¢è¿˜æ˜¯å¤ªå¤§ã€‚</p><p><strong>å¦ä¸€ç±»è¡¨çº§çš„é”æ˜¯MDLï¼ˆmetadata lock)ã€‚</strong>MDLä¸éœ€è¦æ˜¾å¼ä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€ä¸ªè¡¨çš„æ—¶å€™ä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚MDLçš„ä½œç”¨æ˜¯ï¼Œä¿è¯è¯»å†™çš„æ­£ç¡®æ€§ã€‚ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä¸€ä¸ªæŸ¥è¯¢æ­£åœ¨éå†ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®ï¼Œè€Œæ‰§è¡ŒæœŸé—´å¦ä¸€ä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªè¡¨ç»“æ„åšå˜æ›´ï¼Œåˆ äº†ä¸€åˆ—ï¼Œé‚£ä¹ˆæŸ¥è¯¢çº¿ç¨‹æ‹¿åˆ°çš„ç»“æœè·Ÿè¡¨ç»“æ„å¯¹ä¸ä¸Šï¼Œè‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚</p><p>å› æ­¤ï¼Œåœ¨MySQL 5.5ç‰ˆæœ¬ä¸­å¼•å…¥äº†MDLï¼Œå½“å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLè¯»é”ï¼›å½“è¦å¯¹è¡¨åšç»“æ„å˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLå†™é”ã€‚</p><ul>\n<li>\n<p>è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥ã€‚</p>\n</li>\n<li>\n<p>è¯»å†™é”ä¹‹é—´ã€å†™é”ä¹‹é—´æ˜¯äº’æ–¥çš„ï¼Œç”¨æ¥ä¿è¯å˜æ›´è¡¨ç»“æ„æ“ä½œçš„å®‰å…¨æ€§ã€‚å› æ­¤ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹è¦åŒæ—¶ç»™ä¸€ä¸ªè¡¨åŠ å­—æ®µï¼Œå…¶ä¸­ä¸€ä¸ªè¦ç­‰å¦ä¸€ä¸ªæ‰§è¡Œå®Œæ‰èƒ½å¼€å§‹æ‰§è¡Œã€‚</p>\n</li>\n</ul><p>è™½ç„¶MDLé”æ˜¯ç³»ç»Ÿé»˜è®¤ä¼šåŠ çš„ï¼Œä½†å´æ˜¯ä½ ä¸èƒ½å¿½ç•¥çš„ä¸€ä¸ªæœºåˆ¶ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ç»å¸¸çœ‹åˆ°æœ‰äººæ‰åˆ°è¿™ä¸ªå‘é‡Œï¼šç»™ä¸€ä¸ªå°è¡¨åŠ ä¸ªå­—æ®µï¼Œå¯¼è‡´æ•´ä¸ªåº“æŒ‚äº†ã€‚</p><p>ä½ è‚¯å®šçŸ¥é“ï¼Œç»™ä¸€ä¸ªè¡¨åŠ å­—æ®µï¼Œæˆ–è€…ä¿®æ”¹å­—æ®µï¼Œæˆ–è€…åŠ ç´¢å¼•ï¼Œéœ€è¦æ‰«æå…¨è¡¨çš„æ•°æ®ã€‚åœ¨å¯¹å¤§è¡¨æ“ä½œçš„æ—¶å€™ï¼Œä½ è‚¯å®šä¼šç‰¹åˆ«å°å¿ƒï¼Œä»¥å…å¯¹çº¿ä¸ŠæœåŠ¡é€ æˆå½±å“ã€‚è€Œå®é™…ä¸Šï¼Œå³ä½¿æ˜¯å°è¡¨ï¼Œæ“ä½œä¸æ…ä¹Ÿä¼šå‡ºé—®é¢˜ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸‹é¢çš„æ“ä½œåºåˆ—ï¼Œå‡è®¾è¡¨tæ˜¯ä¸€ä¸ªå°è¡¨ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šè¿™é‡Œçš„å®éªŒç¯å¢ƒæ˜¯MySQL 5.6ã€‚</p>\n</blockquote><p><img src=\"https://static001.geekbang.org/resource/image/7c/ce/7cf6a3bf90d72d1f0fc156ececdfb0ce.jpg?wh=1142*856\" alt=\"\"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°session Aå…ˆå¯åŠ¨ï¼Œè¿™æ—¶å€™ä¼šå¯¹è¡¨tåŠ ä¸€ä¸ªMDLè¯»é”ã€‚ç”±äºsession Béœ€è¦çš„ä¹Ÿæ˜¯MDLè¯»é”ï¼Œå› æ­¤å¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚</p><p>ä¹‹åsession Cä¼šè¢«blockedï¼Œæ˜¯å› ä¸ºsession Açš„MDLè¯»é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œè€Œsession Céœ€è¦MDLå†™é”ï¼Œå› æ­¤åªèƒ½è¢«é˜»å¡ã€‚</p><p>å¦‚æœåªæœ‰session Cè‡ªå·±è¢«é˜»å¡è¿˜æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯ä¹‹åæ‰€æœ‰è¦åœ¨è¡¨tä¸Šæ–°ç”³è¯·MDLè¯»é”çš„è¯·æ±‚ä¹Ÿä¼šè¢«session Cé˜»å¡ã€‚å‰é¢æˆ‘ä»¬è¯´äº†ï¼Œæ‰€æœ‰å¯¹è¡¨çš„å¢åˆ æ”¹æŸ¥æ“ä½œéƒ½éœ€è¦å…ˆç”³è¯·MDLè¯»é”ï¼Œå°±éƒ½è¢«é”ä½ï¼Œç­‰äºè¿™ä¸ªè¡¨ç°åœ¨å®Œå…¨ä¸å¯è¯»å†™äº†ã€‚</p><p>å¦‚æœæŸä¸ªè¡¨ä¸Šçš„æŸ¥è¯¢è¯­å¥é¢‘ç¹ï¼Œè€Œä¸”å®¢æˆ·ç«¯æœ‰é‡è¯•æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´è¶…æ—¶åä¼šå†èµ·ä¸€ä¸ªæ–°sessionå†è¯·æ±‚çš„è¯ï¼Œè¿™ä¸ªåº“çš„çº¿ç¨‹å¾ˆå¿«å°±ä¼šçˆ†æ»¡ã€‚</p><p>ä½ ç°åœ¨åº”è¯¥çŸ¥é“äº†ï¼Œäº‹åŠ¡ä¸­çš„MDLé”ï¼Œåœ¨è¯­å¥æ‰§è¡Œå¼€å§‹æ—¶ç”³è¯·ï¼Œä½†æ˜¯è¯­å¥ç»“æŸåå¹¶ä¸ä¼šé©¬ä¸Šé‡Šæ”¾ï¼Œè€Œä¼šç­‰åˆ°æ•´ä¸ªäº‹åŠ¡æäº¤åå†é‡Šæ”¾ã€‚</p><p>åŸºäºä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸ªé—®é¢˜ï¼Œ<strong>å¦‚ä½•å®‰å…¨åœ°ç»™å°è¡¨åŠ å­—æ®µï¼Ÿ</strong></p><p>é¦–å…ˆæˆ‘ä»¬è¦è§£å†³é•¿äº‹åŠ¡ï¼Œäº‹åŠ¡ä¸æäº¤ï¼Œå°±ä¼šä¸€ç›´å ç€MDLé”ã€‚åœ¨MySQLçš„information_schema åº“çš„ innodb_trx è¡¨ä¸­ï¼Œä½ å¯ä»¥æŸ¥åˆ°å½“å‰æ‰§è¡Œä¸­çš„äº‹åŠ¡ã€‚å¦‚æœä½ è¦åšDDLå˜æ›´çš„è¡¨åˆšå¥½æœ‰é•¿äº‹åŠ¡åœ¨æ‰§è¡Œï¼Œè¦è€ƒè™‘å…ˆæš‚åœDDLï¼Œæˆ–è€…killæ‰è¿™ä¸ªé•¿äº‹åŠ¡ã€‚</p><p>ä½†è€ƒè™‘ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ã€‚å¦‚æœä½ è¦å˜æ›´çš„è¡¨æ˜¯ä¸€ä¸ªçƒ­ç‚¹è¡¨ï¼Œè™½ç„¶æ•°æ®é‡ä¸å¤§ï¼Œä½†æ˜¯ä¸Šé¢çš„è¯·æ±‚å¾ˆé¢‘ç¹ï¼Œè€Œä½ ä¸å¾—ä¸åŠ ä¸ªå­—æ®µï¼Œä½ è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>è¿™æ—¶å€™killå¯èƒ½æœªå¿…ç®¡ç”¨ï¼Œå› ä¸ºæ–°çš„è¯·æ±‚é©¬ä¸Šå°±æ¥äº†ã€‚æ¯”è¾ƒç†æƒ³çš„æœºåˆ¶æ˜¯ï¼Œåœ¨alter tableè¯­å¥é‡Œé¢è®¾å®šç­‰å¾…æ—¶é—´ï¼Œå¦‚æœåœ¨è¿™ä¸ªæŒ‡å®šçš„ç­‰å¾…æ—¶é—´é‡Œé¢èƒ½å¤Ÿæ‹¿åˆ°MDLå†™é”æœ€å¥½ï¼Œæ‹¿ä¸åˆ°ä¹Ÿä¸è¦é˜»å¡åé¢çš„ä¸šåŠ¡è¯­å¥ï¼Œå…ˆæ”¾å¼ƒã€‚ä¹‹åå¼€å‘äººå‘˜æˆ–è€…DBAå†é€šè¿‡é‡è¯•å‘½ä»¤é‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚</p><p>MariaDBå·²ç»åˆå¹¶äº†AliSQLçš„è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå¼€æºåˆ†æ”¯ç›®å‰éƒ½æ”¯æŒDDL NOWAIT/WAIT nè¿™ä¸ªè¯­æ³•ã€‚</p><pre><code>ALTER TABLE tbl_name NOWAIT add column ...\nALTER TABLE tbl_name WAIT N add column ... \n</code></pre><h1>å°ç»“</h1><p>ä»Šå¤©ï¼Œæˆ‘è·Ÿä½ ä»‹ç»äº†MySQLçš„å…¨å±€é”å’Œè¡¨çº§é”ã€‚</p><p>å…¨å±€é”ä¸»è¦ç”¨åœ¨é€»è¾‘å¤‡ä»½è¿‡ç¨‹ä¸­ã€‚å¯¹äºå…¨éƒ¨æ˜¯InnoDBå¼•æ“çš„åº“ï¼Œæˆ‘å»ºè®®ä½ é€‰æ‹©ä½¿ç”¨â€“single-transactionå‚æ•°ï¼Œå¯¹åº”ç”¨ä¼šæ›´å‹å¥½ã€‚</p><p>è¡¨é”ä¸€èˆ¬æ˜¯åœ¨æ•°æ®åº“å¼•æ“ä¸æ”¯æŒè¡Œé”çš„æ—¶å€™æ‰ä¼šè¢«ç”¨åˆ°çš„ã€‚å¦‚æœä½ å‘ç°ä½ çš„åº”ç”¨ç¨‹åºé‡Œæœ‰lock tablesè¿™æ ·çš„è¯­å¥ï¼Œä½ éœ€è¦è¿½æŸ¥ä¸€ä¸‹ï¼Œæ¯”è¾ƒå¯èƒ½çš„æƒ…å†µæ˜¯ï¼š</p><ul>\n<li>è¦ä¹ˆæ˜¯ä½ çš„ç³»ç»Ÿç°åœ¨è¿˜åœ¨ç”¨MyISAMè¿™ç±»ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼Œé‚£è¦å®‰æ’å‡çº§æ¢å¼•æ“ï¼›</li>\n<li>è¦ä¹ˆæ˜¯ä½ çš„å¼•æ“å‡çº§äº†ï¼Œä½†æ˜¯ä»£ç è¿˜æ²¡å‡çº§ã€‚æˆ‘è§è¿‡è¿™æ ·çš„æƒ…å†µï¼Œæœ€åä¸šåŠ¡å¼€å‘å°±æ˜¯æŠŠlock tables å’Œ unlock tables æ”¹æˆ begin å’Œ commitï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚</li>\n</ul><p>MDLä¼šç›´åˆ°äº‹åŠ¡æäº¤æ‰é‡Šæ”¾ï¼Œåœ¨åšè¡¨ç»“æ„å˜æ›´çš„æ—¶å€™ï¼Œä½ ä¸€å®šè¦å°å¿ƒä¸è¦å¯¼è‡´é”ä½çº¿ä¸ŠæŸ¥è¯¢å’Œæ›´æ–°ã€‚</p><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸€ä¸ªé—®é¢˜å§ã€‚å¤‡ä»½ä¸€èˆ¬éƒ½ä¼šåœ¨å¤‡åº“ä¸Šæ‰§è¡Œï¼Œä½ åœ¨ç”¨â€“single-transactionæ–¹æ³•åšé€»è¾‘å¤‡ä»½çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸»åº“ä¸Šçš„ä¸€ä¸ªå°è¡¨åšäº†ä¸€ä¸ªDDLï¼Œæ¯”å¦‚ç»™ä¸€ä¸ªè¡¨ä¸ŠåŠ äº†ä¸€åˆ—ã€‚è¿™æ—¶å€™ï¼Œä»å¤‡åº“ä¸Šä¼šçœ‹åˆ°ä»€ä¹ˆç°è±¡å‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„æ€è€ƒå’Œè§‚ç‚¹å†™åœ¨ç•™è¨€åŒºé‡Œï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾å’Œä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p>è¯´æ˜ï¼šè¿™ç¯‡æ–‡ç« æ²¡æœ‰ä»‹ç»åˆ°ç‰©ç†å¤‡ä»½ï¼Œç‰©ç†å¤‡ä»½ä¼šæœ‰ä¸€ç¯‡å•ç‹¬çš„æ–‡ç« ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>ä¸ŠæœŸçš„é—®é¢˜æ˜¯å…³äºå¯¹è”åˆä¸»é”®ç´¢å¼•å’ŒInnoDBç´¢å¼•ç»„ç»‡è¡¨çš„ç†è§£ã€‚</p><p>æˆ‘ç›´æ¥è´´@è€æ¨åŒå¿— çš„å›å¤ç•¥ä½œä¿®æ”¹å¦‚ä¸‹ï¼ˆæˆ‘ä¿®æ”¹çš„éƒ¨åˆ†ç”¨<span class=\"orange\">æ©™è‰²</span>æ ‡å‡ºï¼‰ï¼š</p><p>è¡¨è®°å½•<br>\nâ€“a--|â€“b--|â€“c--|â€“d--<br>\n1 2 3 d<br>\n1 3 2 d<br>\n1 4 3 d<br>\n2 1 3 d<br>\n2 2 2 d<br>\n2 3 4 d<br>\nä¸»é”® aï¼Œbçš„èšç°‡ç´¢å¼•ç»„ç»‡é¡ºåºç›¸å½“äº order by a,b ï¼Œä¹Ÿå°±æ˜¯å…ˆæŒ‰aæ’åºï¼Œå†æŒ‰bæ’åºï¼Œcæ— åºã€‚</p><p>ç´¢å¼• ca çš„ç»„ç»‡æ˜¯å…ˆæŒ‰cæ’åºï¼Œå†æŒ‰aæ’åºï¼ŒåŒæ—¶è®°å½•ä¸»é”®<br>\nâ€“c--|â€“a--|â€“ä¸»é”®éƒ¨åˆ†<span class=\"orange\">b</span>-- <span class=\"orange\">ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œä¸æ˜¯abï¼Œè€Œæ˜¯åªæœ‰bï¼‰</span><br>\n2 1 3<br>\n2 2 2<br>\n3 1 2<br>\n3 1 4<br>\n3 2 1<br>\n4 2 3<br>\n<span class=\"orange\">è¿™ä¸ªè·Ÿç´¢å¼•cçš„æ•°æ®æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</span></p><p>ç´¢å¼• cb çš„ç»„ç»‡æ˜¯å…ˆæŒ‰cæ’åºï¼Œåœ¨æŒ‰bæ’åºï¼ŒåŒæ—¶è®°å½•ä¸»é”®<br>\nâ€“c--|â€“b--|â€“ä¸»é”®éƒ¨åˆ†<span class=\"orange\">a</span>-- <span class=\"orange\">ï¼ˆåŒä¸Šï¼‰</span><br>\n2 2 2<br>\n2 3 1<br>\n3 1 2<br>\n3 2 1<br>\n3 4 1<br>\n4 3 2</p><p>æ‰€ä»¥ï¼Œç»“è®ºæ˜¯caå¯ä»¥å»æ‰ï¼Œcbéœ€è¦ä¿ç•™ã€‚</p><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµï¼š</p><blockquote>\n<p>@æµªé‡Œç™½æ¡ å¸®å¤§å®¶æ€»ç»“äº†å¤ä¹ è¦ç‚¹ï¼›<br>\n@çº¦ä¹¦äºš çš„é—®é¢˜é‡Œæåˆ°äº†MRRä¼˜åŒ–ï¼›<br>\n@HwangZHen ç•™è¨€è¨€ç®€æ„èµ…ã€‚</p>\n</blockquote><p></p>","comments":[{"had_liked":false,"id":43212,"user_name":"echoï¼¿é™ˆ","can_delete":false,"product_type":"c1","uid":1080794,"ip_address":"","ucode":"EFAEADA8A05906","user_header":"https://static001.geekbang.org/account/avatar/00/10/7d/da/780f149e.jpg","comment_is_top":true,"comment_ctime":1543196286,"is_pvip":false,"replies":[{"id":"15460","content":"Online DDLçš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br>1. æ‹¿MDLå†™é”<br>2. é™çº§æˆMDLè¯»é”<br>3. çœŸæ­£åšDDL<br>4. å‡çº§æˆMDLå†™é”<br>5. é‡Šæ”¾MDLé”<br><br>1ã€2ã€4ã€5å¦‚æœæ²¡æœ‰é”å†²çªï¼Œæ‰§è¡Œæ—¶é—´éå¸¸çŸ­ã€‚ç¬¬3æ­¥å ç”¨äº†DDLç»å¤§éƒ¨åˆ†æ—¶é—´ï¼Œè¿™æœŸé—´è¿™ä¸ªè¡¨å¯ä»¥æ­£å¸¸è¯»å†™æ•°æ®ï¼Œæ˜¯å› æ­¤ç§°ä¸ºâ€œonline â€<br><br>æˆ‘ä»¬æ–‡ä¸­çš„ä¾‹å­ï¼Œæ˜¯åœ¨ç¬¬ä¸€æ­¥å°±å µä½äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543197207,"ip_address":"","comment_id":43212,"utype":1}],"discussion_count":65,"race_medal":0,"score":"9.2233740570325996e+18","product_id":100020801,"comment_content":"mysql 5.6ä¸æ˜¯æ”¯æŒonline ddläº†å—ï¼Ÿä¹Ÿå°±æ˜¯å¯¹è¡¨æ“ä½œå¢åŠ å­—æ®µç­‰åŠŸèƒ½ï¼Œå®é™…ä¸Šä¸ä¼šé˜»å¡è¯»å†™ï¼Ÿ","like_count":471,"discussions":[{"author":{"id":1134694,"avatar":"https://static001.geekbang.org/account/avatar/00/11/50/66/047ee060.jpg","nickname":"Return12321","note":"","ucode":"F7A3C5ED02E1D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321813,"discussion_content":"ç±»ä¼¼binlogå’Œredologçš„ä¸¤é˜¶æ®µè¿‡ç¨‹ã€‚åº”è¯¥æ˜¯å…ˆè·å–å†™é”(æ­¤æ—¶è·å–åˆ°æ—§è¡¨ç»“æ„)ï¼Œæ¥ç€prepareï¼Œé™çº§ä¸ºè¯»é”(å…¶ä»–sessionå¯è·å–æ—§è¡¨ç»“æ„çš„è¯»é”)ï¼ŒDDLæ‰§è¡Œ(æ—¶é—´æœ€é•¿)ï¼Œæ‰§è¡Œå®Œå‡çº§ä¸ºå†™é”ï¼Œæäº¤æ›´æ”¹(è¡¨å˜ä¸ºæ–°è¡¨ç»“æ„)ï¼Œæœ€åé‡Šæ”¾å†™é”","likes_number":24,"is_delete":false,"is_hidden":false,"ctime":1604636072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":17,"child_discussions":[{"author":{"id":2399421,"avatar":"https://static001.geekbang.org/account/avatar/00/24/9c/bd/6da43bdb.jpg","nickname":"åˆ˜å‰‘","note":"","ucode":"7B2CFD70541ADB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1134694,"avatar":"https://static001.geekbang.org/account/avatar/00/11/50/66/047ee060.jpg","nickname":"Return12321","note":"","ucode":"F7A3C5ED02E1D9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340605,"discussion_content":"æ‚¨å¥½ï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ï½\nå¼€å¤´è·å–æ—§è¡¨ç»“æ„åªèƒ½ç”¨å†™é”è·å–å—ï¼Œè¯»é”ä¸è¡Œå—ï¼Œè¿˜æ˜¯å› ä¸ºè·å–ç»“æ„éœ€è¦æ—¶é—´ï¼Ÿæ€•è·å–å‰å…¶ä»–çº¿ç¨‹ç”¨è¯»é”æ›´æ”¹å†…å®¹ï¼Ÿè¿™æ ·ä¹Ÿä¸å¯¹å•Šã€‚ã€‚ã€‚\nèƒ½å¦å¸®å¿™è§£å†³ä¸‹æ–°æ‰‹çš„ç–‘æƒ‘ï¼Œæ„Ÿè°¢æ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610076226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":321813,"ip_address":""},"score":340605,"extra":""},{"author":{"id":1314800,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/f0/37feaa1d.jpg","nickname":"é©¬æ—","note":"","ucode":"38AA3E2EB1CC5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2399421,"avatar":"https://static001.geekbang.org/account/avatar/00/24/9c/bd/6da43bdb.jpg","nickname":"åˆ˜å‰‘","note":"","ucode":"7B2CFD70541ADB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341018,"discussion_content":"æˆ‘è§‰å¾—ç¬¬ä¸€ä¸ªå†™é”æ˜¯å¯ä»¥é˜²æ­¢å¹¶å‘çš„è¡¨ç»“æ„å˜æ›´ï¼Œé¦–å…ˆè·å–å†™é”å¯ä»¥é˜²æ­¢ä¸¤ä¸ªsessionåŒæ—¶åšè¡¨ç»“æ„çš„å˜æ›´","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1610263539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340605,"ip_address":""},"score":341018,"extra":""},{"author":{"id":2399421,"avatar":"https://static001.geekbang.org/account/avatar/00/24/9c/bd/6da43bdb.jpg","nickname":"åˆ˜å‰‘","note":"","ucode":"7B2CFD70541ADB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1314800,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/f0/37feaa1d.jpg","nickname":"é©¬æ—","note":"","ucode":"38AA3E2EB1CC5F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341065,"discussion_content":"å—¯å—¯ï¼Œä½†æ˜¯è·å¾—è¯»é”ä¹‹åä¸ºå•¥è¿˜è¦é™ä¸ºè¯»é”å‘¢","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1610282746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":341018,"ip_address":""},"score":341065,"extra":""}]},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385672,"discussion_content":"1ã€æ‹¿MDLå†™é” ï¼š              å½“Aã€Bçº¿ç¨‹éƒ½æ¥åšDDLçš„æ—¶å€™ï¼Œå¦‚Aæ‹¿åˆ°äº†DDLå†™é”ï¼ŒBå°±é˜»å¡ï¼Œå…¶å®ƒè¯»æ•°æ®çš„çº¿ç¨‹é˜»å¡ï¼Œè¯¥æ­¥æ‰§è¡Œæ—¶é—´çŸ­\n\n2ã€DDLæ‰§è¡Œå‡†å¤‡ï¼š             å½“Aã€Bçº¿ç¨‹éƒ½æ¥åšDDLçš„æ—¶å€™ï¼Œå¦‚Aæ‹¿åˆ°äº†DDLå†™é”ï¼ŒBä»»ç„¶é˜»å¡ï¼Œå…¶å®ƒè¯»æ•°æ®çš„çº¿ç¨‹é˜»å¡ï¼Œè¯¥æ­¥æ‰§è¡Œæ—¶é—´çŸ­\n\n3ã€é™çº§æˆMDLè¯»é” ï¼š          å½“Aã€Bçº¿ç¨‹éƒ½æ¥åšDDLçš„æ—¶å€™ï¼Œå¦‚Aæ‹¿åˆ°äº†DDLå†™é”ï¼ŒBä»»ç„¶é˜»å¡ï¼Œå…¶å®ƒè¯»æ•°æ®çš„çº¿ç¨‹å¯ä»¥è¯»å–æ•°æ®ï¼Œè¯¥æ­¥æ‰§è¡Œæ—¶é—´çŸ­\n\n4ã€DDLæ ¸å¿ƒæ‰§è¡Œï¼šï¼ˆè€—æ—¶æœ€å¤šçš„ï¼‰ å½“Aã€Bçº¿ç¨‹éƒ½æ¥åšDDLçš„æ—¶å€™ï¼Œå¦‚Aæ‹¿åˆ°äº†DDLå†™é”ï¼ŒBä»»ç„¶é˜»å¡ï¼Œå…¶å®ƒè¯»æ•°æ®çš„çº¿ç¨‹å¯ä»¥è¯»å–æ•°æ®ï¼ˆå…³é”®æ˜¯å…¶å®ƒçº¿ç¨‹å¯ä»¥è¯»å–æ•°æ®ï¼‰\nï¼Œè¯¥æ­¥æ‰§è¡Œæ—¶é—´é•¿ï¼Œæ‰€ä»¥å·ç§°åœ¨çº¿DDLï¼Œå› ä¸ºå½±å“ä¸šåŠ¡çº¿ç¨‹è¯»å–æ•°æ®çš„æ—¶é—´å¾ˆçŸ­\n\n5ã€å‡çº§æˆMDLå†™é”:            å½“Aã€Bçº¿ç¨‹éƒ½æ¥åšDDLçš„æ—¶å€™ï¼Œå¦‚Aæ‹¿åˆ°äº†DDLå†™é”ï¼ŒBä»»ç„¶é˜»å¡ï¼Œï¼Œå…¶å®ƒè¯»æ•°æ®çš„çº¿ç¨‹é˜»å¡ï¼Œè¯¥æ­¥æ‰§è¡Œæ—¶é—´çŸ­\n\n6ã€DDLæœ€ç»ˆæäº¤  ï¼š            å½“Aã€Bçº¿ç¨‹éƒ½æ¥åšDDLçš„æ—¶å€™ï¼Œå¦‚Aæ‹¿åˆ°äº†DDLå†™é”ï¼ŒBä»»ç„¶é˜»å¡ï¼Œï¼Œå…¶å®ƒè¯»æ•°æ®çš„çº¿ç¨‹é˜»å¡ï¼Œè¯¥æ­¥æ‰§è¡Œæ—¶é—´çŸ­\n\n7ã€é‡Šæ”¾MDLé” ï¼š               å½“Aã€Bçº¿ç¨‹éƒ½æ¥åšDDLçš„æ—¶å€™ï¼Œå¦‚Aé‡Šæ”¾å†™é”ï¼ŒBæ‹¿åˆ°DDLé”ï¼Œï¼Œå…¶å®ƒè¯»æ•°æ®çš„çº¿ç¨‹é˜»å¡ï¼Œè¯¥æ­¥æ‰§è¡Œæ—¶é—´çŸ­ï¼Œç»§ç»­å¾ªç¯ä¸Šé¢ä¸ªçš„æ­¥éª¤","likes_number":17,"is_delete":false,"is_hidden":false,"ctime":1627202368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390717,"discussion_content":"ç¬¬4æ­¥çš„é™ä¸ºè¯»é”æ—¶ï¼Œå…¶å®ƒçº¿ç¨‹ä¹Ÿå¯ä»¥è¿›è¡Œå†™æ“ä½œçš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629986757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":385672,"ip_address":""},"score":390717,"extra":""},{"author":{"id":1519256,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2e/98/8bdaad97.jpg","nickname":"ææ¾æ—","note":"","ucode":"5E74D5701F353E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404906,"discussion_content":"æˆ‘æƒ³é—®çš„é—®é¢˜ ä¹Ÿæ˜¯åœ¨è¿™ä¸€æ­¥ ã€‚å…¶ä»–çº¿ç¨‹ä¸ºä»€ä¹ˆè¿˜èƒ½è¿›è¡Œå†™æ“ä½œå‘¢ï¼Œä¸æ˜¯è¯»å†™äº’æ–¥å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634456121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":390717,"ip_address":""},"score":404906,"extra":""},{"author":{"id":1018062,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIY450o5aBcZpB1O6Bg3fo3s8Q3Xiag2icHqGXwBUMECnkct38mw2xxzAx0DQ403VCSeBib4NULEHhyQ/132","nickname":"ç‘å…¸","note":"","ucode":"888977EA4A354F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408577,"discussion_content":"æ­¥éª¤5è¯»é”ï¼Œå¦‚æœé‡åˆ°è¯·æ±‚é‡å¤§æ—¶ï¼Œä¹Ÿä¼šé˜»å¡å¾ˆä¹…å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635264109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":385672,"ip_address":""},"score":408577,"extra":""}]},{"author":{"id":1610139,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJt18m6r8LJW4QBvQNJ6zXJLKlo58BKSPLR9z5VHU8AlcTUIYSkc72ghnGnb3ecn3pBkGYLxmsr2Q/132","nickname":"å…‰å½±æµ®æ²‰","note":"","ucode":"116BD920D7340E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392788,"discussion_content":"æˆ‘ç†è§£ä¸ºå†™é”å¯ä»¥é™çº§ä¸ºè¯»é”ä¹Ÿå¯ä»¥å†å‡çº§ä¸ºå†™é”ï¼Œè€Œä¸€ä¸ªè¯»é”ä¸èƒ½ç›´æ¥å‡çº§ä¸ºå†™é”ï¼›\n\nå¦‚æœå¯ä»¥å…ˆè¯»é”åœ¨å‡çº§å†™é”çš„è¯ï¼Œå°±ä¼šåŒæ—¶å­˜åœ¨å¤šä¸ªè¦å‡çº§ä¸ºå†™é”çš„DDLå…ˆä»¥è¯»é”å»è·å–ï¼Œè€Œå½“ä¸€ä¸ªè¯»é”è¦å‡çº§ä¸ºå†™é”çš„æ—¶å€™ï¼Œå¿…é¡»ç­‰æ‰€æœ‰è¯»é”éƒ½æ‰§è¡Œå®Œé€€å‡ºï¼Œä½†æ˜¯å…¶ä»–è¦å‡çº§ä¸ºå†™é”çš„è¯»é”ä¼šä¸€ç›´ä¸é€€å‡ºï¼›\n\næ‰€ä»¥ä¸€ä¸ªDDLå¿…é¡»å…ˆä»¥å†™é”çš„æ–¹å¼å»è·å–ï¼Œæ‰èƒ½ä¿è¯åŒæ—¶åªæœ‰ä¸€ä¸ªDDLï¼Œå› ä¸ºè¦è·å–åˆ°å†™é”å¿…é¡»ç­‰æ‰€æœ‰è¯»é”éƒ½é€€å‡ºï¼ˆå…¶ä¸­åŒ…æ‹¬å·²ç»é™çº§ä¸ºè¯»é”çš„å†™é”ï¼‰","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1631120660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1329566,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/IcDlyK6DaBrssVGlmosXnahdJ4bwCesjXa98iaapSDozBiagZTqSCok6iaktu2wOibvpNv9Pd6nfwMg7N7KTSTzYRw/132","nickname":"æ…¢æ…¢å¢","note":"","ucode":"853D399100D83B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1610139,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJt18m6r8LJW4QBvQNJ6zXJLKlo58BKSPLR9z5VHU8AlcTUIYSkc72ghnGnb3ecn3pBkGYLxmsr2Q/132","nickname":"å…‰å½±æµ®æ²‰","note":"","ucode":"116BD920D7340E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566529,"discussion_content":"è¿™ä¸ªçŒœæµ‹æ¯”è¾ƒåˆç†ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯è¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650709672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":392788,"ip_address":""},"score":566529,"extra":""},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1610139,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJt18m6r8LJW4QBvQNJ6zXJLKlo58BKSPLR9z5VHU8AlcTUIYSkc72ghnGnb3ecn3pBkGYLxmsr2Q/132","nickname":"å…‰å½±æµ®æ²‰","note":"","ucode":"116BD920D7340E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575734,"discussion_content":"å¯¹, é¿å…æ­»é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655082316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":392788,"ip_address":""},"score":575734,"extra":""},{"author":{"id":3159277,"avatar":"https://static001.geekbang.org/account/avatar/00/30/34/ed/4d2011ea.jpg","nickname":"å­œå­œä¸å€¦","note":"","ucode":"B9017DC9ACF9C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1329566,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/IcDlyK6DaBrssVGlmosXnahdJ4bwCesjXa98iaapSDozBiagZTqSCok6iaktu2wOibvpNv9Pd6nfwMg7N7KTSTzYRw/132","nickname":"æ…¢æ…¢å¢","note":"","ucode":"853D399100D83B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585244,"discussion_content":"å°±æ˜¯è¿™æ ·çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661417586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":566529,"ip_address":"åŒ—äº¬"},"score":585244,"extra":""}]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430324,"discussion_content":"Online DDLçš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š\n1. æ‹¿MDLå†™é”\n2. é™çº§æˆMDLè¯»é”\n3. çœŸæ­£åšDDL\n4. å‡çº§æˆMDLå†™é”\n5. é‡Šæ”¾MDLé”\n\n1ã€2ã€4ã€5å¦‚æœæ²¡æœ‰é”å†²çªï¼Œæ‰§è¡Œæ—¶é—´éå¸¸çŸ­ã€‚ç¬¬3æ­¥å ç”¨äº†DDLç»å¤§éƒ¨åˆ†æ—¶é—´ï¼Œè¿™æœŸé—´è¿™ä¸ªè¡¨å¯ä»¥æ­£å¸¸è¯»å†™æ•°æ®ï¼Œæ˜¯å› æ­¤ç§°ä¸ºâ€œonline â€\n\næˆ‘ä»¬æ–‡ä¸­çš„ä¾‹å­ï¼Œæ˜¯åœ¨ç¬¬ä¸€æ­¥å°±å µä½äº†","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1543197207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":5,"child_discussions":[{"author":{"id":1510177,"avatar":"https://static001.geekbang.org/account/avatar/00/17/0b/21/f1aea35b.jpg","nickname":"let_me_go","note":"","ucode":"A5936F5C5E3D65","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":557256,"discussion_content":"ä»å†™é”é™çº§ä¸ºè¯»é”ï¼Œè¿™æ ·åœ¨åšddlçš„æ—¶å€™ä¸é˜»ç¢dmlçš„è¯»æ“ä½œï¼Œåšå®Œddlä»¥åä¸ºä»€ä¹ˆè¦å‡çº§æˆå†™é”å†é‡Šæ”¾é”å‘¢ï¼Ÿæˆ‘æ˜¯è¿™ä¹ˆçŒœæƒ³çš„ï¼Œä¸çŸ¥é“å¯¹ä¸ï¼šæ‹¿åˆ°äº†å†™é”ï¼Œå³ä¾¿é™çº§ä¸ºè¯»é”ï¼Œå®ƒæœ¬è´¨ä¹Ÿè¿˜æ˜¯å†™é”ï¼Œæ‰€ä»¥é™çº§å®Œä»¥åå¿…é¡»è¦å‡çº§å›å»æ‰èƒ½é‡Šæ”¾å†™é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647742007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":430324,"ip_address":""},"score":557256,"extra":""},{"author":{"id":2873900,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/da/2c/cdd92f3f.jpg","nickname":"wÃ¡ng","note":"","ucode":"9BFEA73AD7680D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1510177,"avatar":"https://static001.geekbang.org/account/avatar/00/17/0b/21/f1aea35b.jpg","nickname":"let_me_go","note":"","ucode":"A5936F5C5E3D65","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558177,"discussion_content":"å®Œå…¨ä¸å¯¹ã€‚ä½ è¦çŸ¥é“ç¬¬ä¸‰æ­¥ä¸­çœŸæ­£åšDDLæ—¶ï¼Œä¸æ˜¯åœ¨å½“å‰è¡¨ä¸Šåšçš„ï¼Œæ˜¯æ–°å»ºçš„åˆ«çš„è¡¨ã€‚æ‰€ä»¥ç¬¬å››æ­¥ä¸­éœ€è¦å°†æ—§è¡¨å’Œæ–°è¡¨æ¢åå­—ï¼Œè¿™ä¸ªè¿‡ç¨‹å¿…é¡»è¦é˜»å¡DMLï¼Œæ‰€ä»¥éœ€è¦åŠ å†™é”ã€‚","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1648119211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":557256,"ip_address":""},"score":558177,"extra":""},{"author":{"id":1510177,"avatar":"https://static001.geekbang.org/account/avatar/00/17/0b/21/f1aea35b.jpg","nickname":"let_me_go","note":"","ucode":"A5936F5C5E3D65","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2873900,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/da/2c/cdd92f3f.jpg","nickname":"wÃ¡ng","note":"","ucode":"9BFEA73AD7680D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558563,"discussion_content":"æ„Ÿè°¢æ„Ÿè°¢ï¼Œä½ è¯´å¾—å¯¹ï¼Œé€šè¿‡ä½ çš„è¯„è®ºæˆ‘æ‰äº†è§£ddl çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€å¼ æ–°è¡¨ã€‚\næœäº†ä¸‹ï¼Œmysqlåœ¨çº¿ddl(åŠ å­—æ®µã€åŠ ç´¢å¼•ç­‰ä¿®æ”¹è¡¨ç»“æ„ä¹‹ç±»çš„æ“ä½œï¼‰è¿‡ç¨‹å¦‚ä¸‹ï¼š\n1 å¯¹è¡¨åŠ é”(è¡¨æ­¤æ—¶åªè¯»)\n2 å¤åˆ¶åŸè¡¨ç‰©ç†ç»“æ„ï¼Œåˆ›å»ºæ–°ä¸­é—´è¡¨\n3 ä¿®æ”¹ä¸­é—´è¡¨çš„ç‰©ç†ç»“æ„\n4 æŠŠåŸè¡¨æ•°æ®å¯¼å…¥ä¸­é—´è¡¨ä¸­ï¼Œæ•°æ®åŒæ­¥å®Œåï¼Œé”å®šä¸­é—´è¡¨ï¼Œå¹¶åˆ é™¤åŸè¡¨\n5 renameä¸­é—´è¡¨ä¸ºåŸè¡¨\n6 åˆ·æ–°æ•°æ®å­—å…¸ï¼Œå¹¶é‡Šæ”¾é”","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1648378205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":558177,"ip_address":""},"score":558563,"extra":""}]},{"author":{"id":1810051,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK0uyg1IicbEhLwsgM2A2ROoyVdWdmUqZfQfs6G67w9m3hdRNBMOQJatQoACj3qNGgj2KVIgricaYiaQ/132","nickname":"æœ¨å¾—æ„Ÿæƒ…çš„ç¼–ç æœºå™¨","note":"","ucode":"9C6CD47ADCB8E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":167333,"discussion_content":"æˆ‘ç†è§£æ˜¯DDLæ‹¿åˆ°å†™é”åï¼Œé™çº§ä¸ºè¯»é”ä¹‹å‰ï¼Œå°±ä¼šè¯»å–å®Œæ•´è¡¨ç»“æ„ï¼Œæ‰€ä»¥é™çº§ä¹‹åå…¶ä»–çº¿ç¨‹çš„CRUDæ“ä½œä¸ä¼šå—åˆ°å½±å“ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1581478245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1649282,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLGAV2NgUo0VVNjiagIJCZmPHvogtAJcUib6icLCbR4vcvfziashHZjpZ0FUxSdawFnHGUSmIaePvDaWQ/132","nickname":"Geek_b74670","note":"","ucode":"083AF837FB0112","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7608,"discussion_content":"å¯ä»¥ç”¨mysqlçš„é”ç¦»èŒå•ç‹¬å†™ä¸€ç¯‡æ–‡ç« è¯¦ç»†æè¿°ä¸‹ä¸ï¼Ÿå¥½å‡ å¥½å‡ ç¯‡æ–‡ç« å‡ºç°äº†ä¸åŒçš„é”æ¦‚å¿µ","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1567584316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1608,"discussion_content":"1ã€2ã€4ã€5å¦‚æœæ²¡æœ‰é”å†²çªï¼Œæ‰§è¡Œæ—¶é—´éå¸¸çŸ­ã€‚ç¬¬3æ­¥å ç”¨äº†DDLç»å¤§éƒ¨åˆ†æ—¶é—´ï¼Œè¿™æœŸé—´è¿™ä¸ªè¡¨å¯ä»¥æ­£å¸¸è¯»å†™æ•°æ®ï¼Œæ˜¯å› æ­¤ç§°ä¸ºâ€œonline â€\nè€å¸ˆï¼Œä¸æ˜¯è¯»å†™äº’æ–¥å—ï¼Ÿä¸ºä»€ä¹ˆè¯´è¿™æœŸé—´è¿™è¡¨å¯ä»¥æ­£å¸¸è¯»å†™æ•°æ®å‘¢ï¼Œæˆ‘è®¤ä¸ºåˆ°ç¬¬3æ­¥åªèƒ½è¯»ï¼Œä¸èƒ½å†™ï¼Œå¯¹å—","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1562728044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":8,"child_discussions":[{"author":{"id":1357056,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b5/00/f4e8fbaf.jpg","nickname":"chenpiing","note":"","ucode":"C847A30B3FDB8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1660,"discussion_content":"MDLè¯»é”æ˜¯é’ˆå¯¹è¡¨çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼ŒMDLå†™é”é’ˆå¯¹è¡¨çš„ç»“æ„æ›´æ–°æ“ä½œã€‚ç¬¬2æ­¥é™çº§ä¸ºMDLè¯»é”åï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿå¯ä»¥å¯¹è¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œäº†ã€‚æˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„","likes_number":24,"is_delete":false,"is_hidden":false,"ctime":1562772443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1608,"ip_address":""},"score":1660,"extra":""},{"author":{"id":1263410,"avatar":"https://static001.geekbang.org/account/avatar/00/13/47/32/4a47048a.jpg","nickname":"æœæ ‘å’Œæºªæµ","note":"","ucode":"906C26641A0133","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5955,"discussion_content":"æˆ‘è§‰å¾—ä½ è¯´çš„æ˜¯å¯¹çš„ï¼Œç¬¬ä¸‰æ­¥å…¶ä»–çº¿ç¨‹åªèƒ½è¯»ä¸èƒ½å†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566550583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1608,"ip_address":""},"score":5955,"extra":""},{"author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":57582,"discussion_content":"ä¸å¯¹ï¼Œå“ˆå“ˆã€‚online DDLç¬¬äºŒæ­¥æ—¶MDLå·²ç»é™çº§ä¸ºè¯»é”äº†ï¼Œè€ŒDMLä¸­å¢åˆ æ”¹æŸ¥åŠ çš„ä¹Ÿæ˜¯MDLè¯»é”ã€‚","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1574615804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1608,"ip_address":""},"score":57582,"extra":""}]},{"author":{"id":2711249,"avatar":"","nickname":"Geek_60bcde","note":"","ucode":"AD7792E790373F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387835,"discussion_content":"æ‹¿åˆ°å†™é”å¯ä»¥é™çº§ï¼Œæ‹¿ä¸åˆ°å°±åªèƒ½ç­‰ç€äº‹åŠ¡äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1628439840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1706612,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0a/74/f6a60b7b.jpg","nickname":"qiaofoot","note":"","ucode":"B228D0E5A69095","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":151987,"discussion_content":"é™çº§æˆè¯»é”æ‰€ä»¥å¯ä»¥å¢åˆ æŸ¥æ”¹ï¼Œä½†æ˜¯è¿™æ—¶å€™ä¸æ˜¯æ­£åœ¨æ”¹å˜å­—æ®µç»“æ„å—ï¼Œå¢åˆ æŸ¥æ”¹ç”¨çš„æ˜¯åŸæ¥çš„ç»“æ„è¿˜æ˜¯æ”¹å˜åçš„ç»“æ„ï¼Ÿæ±‚æ•™","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579926458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1104262,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d9/86/221a844d.jpg","nickname":"HUI","note":"","ucode":"F80733CEE82CC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1706612,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0a/74/f6a60b7b.jpg","nickname":"qiaofoot","note":"","ucode":"B228D0E5A69095","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158040,"discussion_content":"è¿˜æ˜¯åŸæ¥çš„ç»“æ„ã€‚\n\nç¨å¾®å†è¯¦ç»†çš„è¿‡ç¨‹åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n1ã€æ‹¿MDLå†™é”\n2ã€DDLæ‰§è¡Œå‡†å¤‡\n3ã€é™çº§æˆMDLè¯»é”\n4ã€DDLæ ¸å¿ƒæ‰§è¡Œï¼ˆè€—æ—¶æœ€å¤šçš„ï¼‰\n5ã€å‡çº§æˆMDLå†™é”\n6ã€DDLæœ€ç»ˆæäº¤\n7ã€é‡Šæ”¾MDLé”","likes_number":42,"is_delete":false,"is_hidden":false,"ctime":1580544641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":151987,"ip_address":""},"score":158040,"extra":""},{"author":{"id":1264111,"avatar":"https://static001.geekbang.org/account/avatar/00/13/49/ef/02401473.jpg","nickname":"æœˆè¿·æ´¥æ¸¡","note":"","ucode":"2B18B2FE3DAC3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1104262,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d9/86/221a844d.jpg","nickname":"HUI","note":"","ucode":"F80733CEE82CC3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164748,"discussion_content":"ä¸ºä»€ä¹ˆä¼šå†™é”é™çº§æˆè¯»é”ï¼Œé™çº§åå¯ä»¥å’ŒDMLåŒæ—¶æ‰§è¡Œäº†ï¼ŸDMLä¸æ˜¯è¯»é”å¯å…±äº«ä¹ˆï¼Ÿä¸ä¼šæœ‰å¹¶å‘é—®é¢˜äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581217926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":158040,"ip_address":""},"score":164748,"extra":""},{"author":{"id":1615539,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI6LXcIqb5K48nia8d4zmdsD1M9AZeyXoGrLzX5xvqfN0fqXOsYKUWLbZvZ8TtJCXWmYbCkCXg93dQ/132","nickname":"æ¼è„šè„–","note":"","ucode":"214AE52EC201E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264111,"avatar":"https://static001.geekbang.org/account/avatar/00/13/49/ef/02401473.jpg","nickname":"æœˆè¿·æ´¥æ¸¡","note":"","ucode":"2B18B2FE3DAC3B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":185260,"discussion_content":"æˆ‘è§‰å¾—ç¬¬å››æ­¥æ˜¯åœ¨æ„é€ å§ï¼Œç¬¬6æ­¥æäº¤çš„æ—¶å€™åˆ‡äº†ä¸€ä¸‹åº”è¯¥å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥ç¬¬4æ­¥ä¸ç”¨å†™é”ï¼ŒçŒœçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582609287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":164748,"ip_address":""},"score":185260,"extra":""}]},{"author":{"id":1589937,"avatar":"https://static001.geekbang.org/account/avatar/00/18/42/b1/3f1ad943.jpg","nickname":"Pierce","note":"","ucode":"9E120B593223EE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582343,"discussion_content":"pt-oscï¼Œgh-ostï¼ŒåŸç”Ÿonline ddlçš„åŸç†ä¸é€‚ç”¨åœºæ™¯ï¼Œä¸€æ–‡ææ‡‚ï¼šhttps://opensource.actionsky.com/20200916-ddl/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659404432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2338682,"avatar":"https://static001.geekbang.org/account/avatar/00/23/af/7a/753f3e1d.jpg","nickname":"sili0816","note":"","ucode":"BBFC03F0D033AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393291,"discussion_content":"ç¬¬ä¸€æ­¥å°±å µä½äº†ï¼Œé‚£ä¸å°±æ²¡æ‹¿åˆ°å†™é”å—ã€‚ä¸ºä»€ä¹ˆåé¢çš„è¯»é”ä¹Ÿä¼šè¢«é˜»å¡ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631342267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1863174,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/6e/06/bb43e716.jpg","nickname":"é»„ä¹”é‘«","note":"","ucode":"CBD0A8E5E99427","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2338682,"avatar":"https://static001.geekbang.org/account/avatar/00/23/af/7a/753f3e1d.jpg","nickname":"sili0816","note":"","ucode":"BBFC03F0D033AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393578,"discussion_content":"MySQLä¸ºäº†ä¿è¯å†™äº‹åŠ¡æ˜¯èƒ½å®Œæˆçš„ï¼Œå†™å’Œè¯»æ˜¯æœ‰ä¸ªä¼˜å…ˆçº§çš„ï¼Œå‡å¦‚å‘ç°äº†å†™äº‹åŠ¡ï¼Œå…ˆè®©è¯»äº‹åŠ¡å°½å¯èƒ½å®Œæˆï¼Œç„¶åå¼€å§‹æ‰§è¡Œå†™äº‹åŠ¡ï¼Œè¯»äº‹åŠ¡éœ€è¦åœ¨å†™äº‹åŠ¡åé¢æ’é˜Ÿ\n\nå¯ä»¥çœ‹çœ‹MySQLæ–‡æ¡£é‡Œé¢å…³äºMDLçš„è¯»å†™é”æ‰§è¡Œé¡ºåºå†…å®¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631502482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":393291,"ip_address":""},"score":393578,"extra":""},{"author":{"id":1009385,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/e9/814d057a.jpg","nickname":"å°é™ˆ","note":"","ucode":"A03A299310AD18","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1863174,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/6e/06/bb43e716.jpg","nickname":"é»„ä¹”é‘«","note":"","ucode":"CBD0A8E5E99427","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410036,"discussion_content":"å…ˆè®©è¯»äº‹åŠ¡å°½å¯èƒ½å®Œæˆï¼Œç„¶åå¼€å§‹æ‰§è¡Œå†™äº‹åŠ¡ï¼Œè¯»äº‹åŠ¡éœ€è¦åœ¨å†™äº‹åŠ¡åé¢æ’é˜Ÿ è¿™å¥è¯å‰é¢å’Œåé¢æ„Ÿè§‰çŸ›ç›¾å•Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635577653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":393578,"ip_address":""},"score":410036,"extra":""},{"author":{"id":2622364,"avatar":"https://static001.geekbang.org/account/avatar/00/28/03/9c/5a0b8825.jpg","nickname":"Bin Watson","note":"","ucode":"33E3487896E859","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1009385,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/e9/814d057a.jpg","nickname":"å°é™ˆ","note":"","ucode":"A03A299310AD18","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548537,"discussion_content":"åœ¨å†™äº‹ç‰©åé¢æ¥çš„è¯»äº‹ç‰©ï¼Œéœ€è¦ç­‰å¾…å‰é¢çš„å†™äº‹åŠ¡å…ˆåŠ é”ï¼Œä¹Ÿå°±æ˜¯è¯´åŠ é”éœ€è¦æ’é˜Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643249836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":410036,"ip_address":""},"score":548537,"extra":""}]},{"author":{"id":2375213,"avatar":"","nickname":"ä¸‡æ˜¥ä¸¥","note":"","ucode":"99E3A76BBD0998","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388397,"discussion_content":"å°è¡¨åœ¨æ•°æ®åº“æ­£å¸¸å·¥ä½œçš„æƒ…å†µä¸‹ï¼Œä¸šåŠ¡å¤„ç†åº”è¯¥ä¸éœ€è¦å¾ˆä¹…å§ï¼Ÿç¬¬ä¸€æ­¥ä¹Ÿä¸ä¼šé˜»å¡å¤šé•¿æ—¶é—´å§ï¼Ÿä½†æ˜¯åœ¨é˜»å¡æœŸé—´ï¼Œä¸šåŠ¡ä»£ç ä¾‹å¦‚java ä¸åœçš„å¼€ä¼šè¯é‡è¯•ï¼Œé‚£å°±è¯´ä¸å‡†äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628750284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349997,"discussion_content":"Table definition has changed, please retry transactionã€‚å¦‚æœåœ¨äº‹åŠ¡ä¸­å¼€å¯ä¸€è‡´æ€§è§†å›¾åï¼Œå†å»DDLï¼Œç„¶åå†åœ¨äº‹åŠ¡ä¸­æŸ¥è¯¢æ•°æ®å°±ä¼šå‘ç”Ÿè¿™ä¸ªé”™è¯¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613655808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1363230,"avatar":"https://static001.geekbang.org/account/avatar/00/14/cd/1e/692c3313.jpg","nickname":"å¤å…´","note":"","ucode":"C172A87873001A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306217,"discussion_content":"è€å¸ˆï¼Œä½ è¯´çš„å¾ˆç¬¼ç»Ÿï¼Œ5.6åˆ°åº•æ˜¯æ€ä¹ˆè§£å†³online ddlçš„å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600220312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2131215,"avatar":"https://static001.geekbang.org/account/avatar/00/20/85/0f/5cb822d6.jpg","nickname":"shadow","note":"","ucode":"64DCFAEC37EFBC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300926,"discussion_content":"ä½†æ˜¯ä¸èƒ½DML","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598322290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155646,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","nickname":"ppd0705","note":"","ucode":"EB63D4E3FD1E9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296023,"discussion_content":"å¥½å¥‡æ€ä¹ˆåŒæ—¶æ”¹è¡¨ç»“æ„å’ŒCRUD, è¿™æ ·ä¸ä¼šå†²çªå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596430412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1155646,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","nickname":"ppd0705","note":"","ucode":"EB63D4E3FD1E9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333238,"discussion_content":"ä¸ä¼š ,å› ä¸ºé™çº§æˆäº†è¯»é”å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607487024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296023,"ip_address":""},"score":333238,"extra":""},{"author":{"id":1608757,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJZO3Xkicd9Cy5FicXibjwnAgVChLZh6zxqAQtOhcYocG81gicm40gSa6PKVmqJXMiaFz5niasPwNkf5ibug/132","nickname":"æ¬§å°æ–‡","note":"","ucode":"1B41057F097AA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1155646,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","nickname":"ppd0705","note":"","ucode":"EB63D4E3FD1E9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363673,"discussion_content":"è¯»é”ä¸è¯»é”ä¸å†²çªï¼Œè¯»é”ä¸å†™é”ï¼Œå†™é”ä¸å†™é”äº’æ–¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617258984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296023,"ip_address":""},"score":363673,"extra":""},{"author":{"id":1375256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","nickname":"TANMIYOO","note":"","ucode":"BC3556131D4D61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364029,"discussion_content":"ddlçš„åŒæ—¶åœ¨è¯»è¡¨çš„è¯,è¯»å‡ºæ¥çš„æ•°æ®å°±å’Œè¡¨ç»“æ„ä¸ä¸€è‡´äº†,è¿™ä¸æ˜¯æœ‰é—®é¢˜å˜›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617354365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":333238,"ip_address":""},"score":364029,"extra":""}]}]},{"had_liked":false,"id":63322,"user_name":"å“ˆå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1248876,"ip_address":"","ucode":"C40ABE7161EFAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/0e/6c/1f3b1372.jpg","comment_is_top":true,"comment_ctime":1548322523,"is_pvip":false,"replies":[{"id":"22433","content":"å—¯ ç‰¹æ„å†™äº†æ˜¯MDLâ€œè¯»é”â€ã€‚<br>æŠŠä½ çš„ç•™è¨€ç½®é¡¶äº†ï¼Œå¸Œæœ›æœ‰ç–‘é—®çš„åŒå­¦èƒ½çœ‹åˆ°è¿™ä¸ªğŸ˜†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548332381,"ip_address":"","comment_id":63322,"utype":1}],"discussion_count":9,"race_medal":0,"score":"9.2233731507995996e+18","product_id":100020801,"comment_content":"MDLä½œç”¨æ˜¯é˜²æ­¢DDLå’ŒDMLå¹¶å‘çš„å†²çªï¼Œä¸ªäººæ„Ÿè§‰åº”è¯¥å†™æ¸…æ¥šï¼Œä¸€å¼€å§‹ç†è§£ä¸ºselectå’Œupdateä¹‹é—´çš„å¹¶å‘ã€‚","like_count":260,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437547,"discussion_content":"å—¯ ç‰¹æ„å†™äº†æ˜¯MDLâ€œè¯»é”â€ã€‚\næŠŠä½ çš„ç•™è¨€ç½®é¡¶äº†ï¼Œå¸Œæœ›æœ‰ç–‘é—®çš„åŒå­¦èƒ½çœ‹åˆ°è¿™ä¸ªğŸ˜†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548332381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"é©¬ä»¥","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100023,"discussion_content":"æˆ‘ç¬¬ä¸€éçœ‹ä¹Ÿæ˜¯ç†è§£é”™äº†ï¼Œç¬¬äºŒéçœ‹çš„æ—¶å€™ææ˜ç™½å¼„æ‡‚äº†ï¼Œä»Šå¤©æ˜¯ç¬¬ä¸‰éçœ‹ï¼Œç‰¹æ„æŠŠè¯„è®ºæµè§ˆä¸€éï¼Œæ¸©æ•…çŸ¥æ–°ï¼Œæœç„¶æœ‰é“ç†ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1577234496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2045627,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/36/bb/67d689c5.jpg","nickname":"ä¸€é¢—å°æ©˜å­ğŸŠ","note":"","ucode":"584557A3E26B33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"é©¬ä»¥","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378441,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623223432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":100023,"ip_address":""},"score":378441,"extra":""}]},{"author":{"id":1672786,"avatar":"https://static001.geekbang.org/account/avatar/00/19/86/52/91c7d112.jpg","nickname":"Garen","note":"","ucode":"0608C88F83EF0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29363,"discussion_content":"MDLä½œç”¨åº”è¯¥ä¸åªæ˜¯é˜²æ­¢DDLå’ŒDMLå¹¶å‘çš„å†²çªï¼ŒæŒ‰è€å¸ˆçš„è¯´æ³•ï¼Œä¹Ÿä¼šé˜²æ­¢DDLå’ŒDQLå¹¶å‘çš„å†²çª","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1570764683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312161,"discussion_content":"æ€»ç»“çš„ä¸é”™:MDLä½œç”¨æ˜¯é˜²æ­¢DDLå’ŒDMLå¹¶å‘çš„å†²çª","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602598699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018620,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","nickname":"ipofss","note":"","ucode":"DE3061C9259F9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":167508,"discussion_content":"æˆ‘åˆšå¼€å§‹ä¹Ÿç†è§£é”™äº†ï¼Œçœ‹è¯„è®ºåŒºæ—¶ï¼Œæ‰æ˜ç™½äº†ï¼Œè€å¸ˆç‰¹æ„åŠ äº† MDLè¯»é”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581504712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385674,"discussion_content":"é¢†åŸŸè¯­è¨€ä¸ä¸€æ ·ï¼Œå¯¼è‡´ç†è§£åå·®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627202971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1167430,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d0/46/7f9af8de.jpg","nickname":"å¯»","note":"","ucode":"473B2CC14158A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373458,"discussion_content":"é‚£ä¹ˆselectå’Œupdateçš„å¹¶å‘æ€ä¹ˆå¤„ç†å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620734577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1167430,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d0/46/7f9af8de.jpg","nickname":"å¯»","note":"","ucode":"473B2CC14158A7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543022,"discussion_content":"å¿«ç…§è¯»å°±MVCCï¼Œå½“å‰è¯»å°±åŠ è¡Œé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640934381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373458,"ip_address":""},"score":543022,"extra":""}]}]},{"had_liked":false,"id":43392,"user_name":"skyoo","can_delete":false,"product_type":"c1","uid":1302503,"ip_address":"","ucode":"EBC0528BA02DD7","user_header":"https://static001.geekbang.org/account/avatar/00/13/df/e7/4ce5ed27.jpg","comment_is_top":true,"comment_ctime":1543221924,"is_pvip":false,"replies":[{"id":"15503","content":"åˆ†æå¾—å¾ˆå¥½ã€‚<br>å°¤å…¶readonly å¯¹ super æƒé™æ— æ•ˆè¿™å¥ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543227912,"ip_address":"","comment_id":43392,"utype":1}],"discussion_count":14,"race_medal":0,"score":"9.2233730176504996e+18","product_id":100020801,"comment_content":"FTWRL å‰æœ‰è¯»å†™çš„è¯ ,FTWRL éƒ½ä¼šç­‰å¾… è¯»å†™æ‰§è¡Œå®Œæ¯•åæ‰æ‰§è¡Œ<br>FTWRL æ‰§è¡Œçš„æ—¶å€™è¦åˆ·è„é¡µçš„æ•°æ®åˆ°ç£ç›˜,å› ä¸ºè¦ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ ï¼Œç†è§£çš„æ‰§è¡ŒFTWRLæ—¶å€™æ˜¯ æ‰€æœ‰äº‹åŠ¡ éƒ½æäº¤å®Œæ¯•çš„æ—¶å€™<br><br>mysqldump + -single-transaction ä¹Ÿæ˜¯ä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§,ä½†ä»–åªé’ˆå¯¹ æœ‰æ”¯æŒäº‹åŠ¡ å¼•æ“,æ¯”å¦‚ innodb<br>æ‰€ä»¥ è¿˜æ˜¯å¼ºçƒˆå»ºè®®å¤§å®¶åœ¨åˆ›å»ºå®ä¾‹,è¡¨æ—¶å€™éœ€è¦innodb å¼•æ“ ä¸ºå¥½<br>å…¨åº“åªè¯»  readonly = true è¿˜æœ‰ä¸ªæƒ…å†µåœ¨ slave ä¸Š å¦‚æœç”¨æˆ·æœ‰è¶…çº§æƒé™çš„è¯  readonly æ˜¯å¤±æ•ˆçš„<br><br>è¡¨çº§åˆ« é” ï¼šä¸€ä¸ªç›´æ¥å°±æ˜¯è¡¨é” lock table å»ºè®®ä¸è¦ä½¿ç”¨, å½±å“å¤ªå¤§ï¼Œå¦ä¸ªå°±æ˜¯ MDL å…ƒæ•°æ®é”<br><br>MDL æ˜¯å¹¶å‘æƒ…å†µä¸‹ç»´æŠ¤æ•°æ®çš„ä¸€è‡´æ€§,åœ¨è¡¨ä¸Šæœ‰äº‹åŠ¡çš„æ—¶å€™,ä¸å¯ä»¥å¯¹å…ƒæ•°æ®ç»è¡Œå†™å…¥æ“ä½œ,å¹¶ä¸”è¿™ä¸ªæ˜¯åœ¨serverå±‚é¢å®ç°çš„<br>å½“ä½ åš dml æ—¶å€™å¢åŠ çš„ MDL è¯»é”, update table set id=Y where id=X; å¹¶ä¸”ç”±äºéš”ç¦»çº§åˆ«çš„åŸå›  è¯»é”ä¹‹é—´ä¸å†²çª<br><br>å½“ä½ DDL æ—¶å€™ å¢åŠ å¯¹è¡¨çš„å†™é”, åŒæ—¶æ“ä½œä¸¤ä¸ªalter table æ“ä½œ è¿™ä¸ªè¦å‡ºç°ç­‰å¾…æƒ…å†µã€‚<br><br>ä½†æ˜¯ å¦‚æœæ˜¯  dml ä¸ddl ä¹‹é—´çš„äº¤äº’ å°±æ›´å®¹æ˜“å‡ºç°ä¸å¯è¯»å†™æƒ…å†µ,è¿™ä¸ªæƒ…å†µå®¹æ˜“session çˆ†æ»¡,sessionæ˜¯å ç”¨å†…å­˜çš„,ä¹Ÿä¼šå¯¼è‡´å†…å­˜å‡é«˜<br>MDL é‡Šæ”¾çš„æƒ…å†µå°±æ˜¯ äº‹åŠ¡æäº¤.<br><br>ä¸»åº“ä¸Šçš„ä¸€ä¸ªå°è¡¨åšäº†ä¸€ä¸ª DDL, åŒæ­¥ç»™slave ,ç”±äºè¿™ä¸ªæ—¶å€™æœ‰äº†å…ˆå‰çš„ single-transaction,æ‰€ä»¥slave å°±ä¼šå‡ºç° è¯¥è¡¨çš„ é”ç­‰å¾…, å¹¶ä¸”slave å‡ºç°å»¶è¿Ÿ","like_count":228,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430370,"discussion_content":"åˆ†æå¾—å¾ˆå¥½ã€‚\nå°¤å…¶readonly å¯¹ super æƒé™æ— æ•ˆè¿™å¥ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543227912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1518937,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epHODNKB6bbQPbkhicwt6icLYy9XuKu5V7tZY4bAQBdgfiaqSdLrl9Aj21HfibtNgZGxlCCic7sMNCJGlg/132","nickname":"åœŸè±†ç‰‡","note":"","ucode":"A468A72C51053A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49437,"discussion_content":"single-transactionè®©æˆ‘å¾ˆåœ¨æ„çš„ä¸€ç‚¹å³ä½¿æ˜¯æ”¯æŒäº‹ç‰©çš„innodbï¼Œä½œè€…ä¹ŸåŠ äº†ä¸€ä¸ªå‰ç¼€å°±æ˜¯å½“å‰éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è€è¯»ï¼Œå¯å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç”¨åˆ°è¿™ä¸ªéš”ç¦»çº§åˆ«ï¼Œæ¯”å¦‚åœ¨è¯»æäº¤ä¸­ï¼Œå¤‡ä»½çš„æ•°æ®æ˜¯ä¸æ˜¯ä¹Ÿä¼šæœ‰é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573591511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1518937,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epHODNKB6bbQPbkhicwt6icLYy9XuKu5V7tZY4bAQBdgfiaqSdLrl9Aj21HfibtNgZGxlCCic7sMNCJGlg/132","nickname":"åœŸè±†ç‰‡","note":"","ucode":"A468A72C51053A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138220,"discussion_content":"å¯é‡å¤è¯»éš”ç¦»çº§åˆ«æ˜¯InnoDBçš„é»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚å¤‡ä»½æ•°æ®ä¸ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºæœ‰MVCCæœºåˆ¶ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579229528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":49437,"ip_address":""},"score":138220,"extra":""},{"author":{"id":1697605,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/KUWZH9adGNsjZ6m9hYh6ttoibgcUnaplS7XGlYuyUybLpdLPZDB56QAlzfQ8wSfs8Pd1T9RiaY7sYibD2wgrCo0UQ/132","nickname":"xyh","note":"","ucode":"CD0C45A63F434E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1518937,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epHODNKB6bbQPbkhicwt6icLYy9XuKu5V7tZY4bAQBdgfiaqSdLrl9Aj21HfibtNgZGxlCCic7sMNCJGlg/132","nickname":"åœŸè±†ç‰‡","note":"","ucode":"A468A72C51053A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335140,"discussion_content":"dumpä¹‹å‰å¯ä»¥è®¾ç½®sessionçš„éš”ç¦»çº§åˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608104144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":49437,"ip_address":""},"score":335140,"extra":""},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1518937,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epHODNKB6bbQPbkhicwt6icLYy9XuKu5V7tZY4bAQBdgfiaqSdLrl9Aj21HfibtNgZGxlCCic7sMNCJGlg/132","nickname":"åœŸè±†ç‰‡","note":"","ucode":"A468A72C51053A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369523,"discussion_content":"mysqldumpå¤‡ä»½çš„æ—¶å€™æ·»åŠ single-transactionå‚æ•°ä¼šæŠŠå¤‡ä»½çš„ä¼šè¯çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºRR","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619064930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":49437,"ip_address":""},"score":369523,"extra":""}]},{"author":{"id":1640973,"avatar":"https://static001.geekbang.org/account/avatar/00/19/0a/0d/7bac5bcb.jpg","nickname":"maybe","note":"","ucode":"2C0D1D26853DB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374992,"discussion_content":"åœ¨ä¸»åº“ä¸Šï¼Œreadonly å¯¹ super æƒé™æ— æ•ˆä¹Ÿæ˜¯æˆç«‹çš„å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621432077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345559,"discussion_content":"å¯¹çš„ï¼Œdumpçº¿ç¨‹æ¥æ‹‰çš„æ—¶å€™å°±ä¼šç­‰ç€ï¼Œç›´åˆ°sessioné‡Šæ”¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611741566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1204353,"avatar":"https://static001.geekbang.org/account/avatar/00/12/60/81/eaf6d0ac.jpg","nickname":"æ‹‰å¸ƒæ‹‰å¤š","note":"","ucode":"637A88D9F29F57","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342841,"discussion_content":"æ€»ç»“ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610846252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1221689,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a4/39/6a5cd1d8.jpg","nickname":"sotey","note":"","ucode":"7D3B7E45FC18BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333583,"discussion_content":"æˆ‘æ˜ç™½æˆ‘åˆ†æçš„é—®é¢˜åœ¨å“ªäº†ï¼Œç»™å°è¡¨åŠ å­—æ®µè¦è·å–è¡¨é”ï¼Œè€Œå¤‡ä»½äº‹åŠ¡ä¼šè·å–è¿™ä¸ªå°è¡¨çš„æ„å‘é”ï¼Œæ‰€ä»¥å¤‡åº“æ›´æ–°å°è¡¨å­—æ®µå°±ä¼šç­‰å¾…æ„å‘é”é‡Šæ”¾ï¼Œå› æ­¤å¤‡åº“æ›´æ–°å»¶è¿Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607568932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1483671,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a3/97/ca8057a4.jpg","nickname":"Mona432","note":"","ucode":"3F02C646C8DC83","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1221689,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a4/39/6a5cd1d8.jpg","nickname":"sotey","note":"","ucode":"7D3B7E45FC18BA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343682,"discussion_content":"ä¸æ˜¯æ„å‘é”ï¼Œæ˜¯MDLè¯»é”ï¼Œè¯¥è¯»é”è¦æŒç»­åˆ°å¤‡ä»½äº‹åŠ¡commitï¼Œæ‰€ä»¥slaveåŒæ­¥è¡¨å­—æ®µå˜æ›´éœ€è¦ç”³è¯·çš„MDLå†™é”ä¸€ç›´å¤„äºé”ç­‰å¾…ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1611133959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":333583,"ip_address":""},"score":343682,"extra":""},{"author":{"id":1583740,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2a/7c/0d6a87c4.jpg","nickname":"dandy","note":"","ucode":"5EE976FCBD9215","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1221689,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a4/39/6a5cd1d8.jpg","nickname":"sotey","note":"","ucode":"7D3B7E45FC18BA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362042,"discussion_content":"1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616834364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":333583,"ip_address":""},"score":362042,"extra":""}]},{"author":{"id":1221689,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a4/39/6a5cd1d8.jpg","nickname":"sotey","note":"","ucode":"7D3B7E45FC18BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333001,"discussion_content":"æˆ‘æ€ä¹ˆè§‰å¾—å°è¡¨ä¸ä¼šè¢«é”å®šï¼Œæˆ‘è§‰å¾—single-transactionåº”è¯¥åœ¨äº‹åŠ¡å¼€å§‹ç¬¬ä¸€æ¡selectè¯­å¥æ—¶åŸºäºmvccåˆ›å»ºå¿«ç…§ï¼Œå¤‡ä»½äº‹åŠ¡çœ‹åˆ°çš„æ˜¯å°è¡¨æ›´æ–°å‰çš„ç‰ˆæœ¬ï¼Œå°è¡¨å¯ä»¥ç›´æ¥æ›´æ–°ã€‚æˆ‘çš„ç†è§£é—®é¢˜åœ¨å“ªï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607414285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1221689,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a4/39/6a5cd1d8.jpg","nickname":"sotey","note":"","ucode":"7D3B7E45FC18BA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369522,"discussion_content":"single-transactionæ‰§è¡Œçš„æ˜¯start transaction with consistent snapshotï¼Œä¸æ˜¯æ‰§è¡Œç¬¬ä¸€æ¡queryçš„æ—¶å€™æ‰ä¼šç”Ÿæˆå¿«ç…§ï¼Œæ˜¯äº‹åŠ¡å¼€å§‹æ—¶å°±ç”Ÿæˆä¸€è‡´æ€§å¿«ç…§äº†ã€‚è¡¨ç»“æ„éƒ½å‘ç”Ÿå˜åŒ–äº†ï¼Œè¯»å–è¡¨çš„æ•°æ®è‚¯å®šæœ‰é—®é¢˜äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619064736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":333001,"ip_address":""},"score":369522,"extra":""}]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289746,"discussion_content":"å¤‡åº“ç›´æ¥è¯»çš„binlogéš¾é“ä¹Ÿæœ‰mvccå’Œäº‹åŠ¡ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594199983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44145,"user_name":"miche","can_delete":false,"product_type":"c1","uid":1318659,"ip_address":"","ucode":"9B6B7E14008094","user_header":"","comment_is_top":true,"comment_ctime":1543373385,"is_pvip":false,"replies":[{"id":"15738","content":"1. Ptçš„è¿‡ç¨‹ä¹Ÿæ˜¯æœ‰æ“ä½œè¡¨ç»“æ„çš„ï¼Œæ‰€ä»¥ä¼šç±»ä¼¼<br><br>2. å¯¹ï¼Œæ²¡æœ‰beginçš„è¯ï¼Œè¿™æ ·selectæ‰§è¡Œå®Œæˆä»¥åï¼ŒMDLå°±è‡ªåŠ¨é‡Šæ”¾äº†å“¦<br><br>3. æ˜¯ï¼Œæ˜¯å¦onlineéƒ½æ˜¯ç¬¬ä¸‰æ­¥ï¼ˆç»“åˆç½®é¡¶è¯„è®ºçœ‹å“ˆï¼‰çš„åŒºåˆ«ï¼Œå¦å¤–å››æ­¥è¿˜æ˜¯æœ‰çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543380079,"ip_address":"","comment_id":44145,"utype":1}],"discussion_count":3,"race_medal":0,"score":"9.2233721973118996e+18","product_id":100020801,"comment_content":"1. ä¸Šé¢çš„é‚£ä¸ªå› ä¸ºmdlé”æŠŠæ•´ä¸ªåº“ææŒ‚çš„ä¾‹å­é‡Œï¼Œå¦‚æœç”¨ptå·¥å…·æ¥æ“ä½œï¼Œä¼šå‡ºç°åŒæ ·çš„æƒ…å†µå—ï¼Ÿ<br>2. é‚£ä¸ªä¾‹å­é‡Œæ˜¾ç¤ºselectè¯­å¥å‰åŠ äº†beginï¼Œæ˜¯ä¸æ˜¯selectçš„æ—¶å€™ä¸åŠ beginï¼Œå°±ä¸ä¼šå‡ºç°åŒæ ·çš„æƒ…å†µå‘¢ï¼Ÿ<br>3. online ddl çš„copyæ–¹å¼å’Œinplaceæ–¹å¼ï¼Œä¹Ÿéƒ½æ˜¯éœ€è¦ æ‹¿MDLå†™é”ã€é™æˆè¯»é”ã€åšDDLã€å‡æˆå†™é”ã€é‡Šæ”¾MDLé”å—ï¼Ÿ<br><br>","like_count":37,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430649,"discussion_content":"1. Ptçš„è¿‡ç¨‹ä¹Ÿæ˜¯æœ‰æ“ä½œè¡¨ç»“æ„çš„ï¼Œæ‰€ä»¥ä¼šç±»ä¼¼\n\n2. å¯¹ï¼Œæ²¡æœ‰beginçš„è¯ï¼Œè¿™æ ·selectæ‰§è¡Œå®Œæˆä»¥åï¼ŒMDLå°±è‡ªåŠ¨é‡Šæ”¾äº†å“¦\n\n3. æ˜¯ï¼Œæ˜¯å¦onlineéƒ½æ˜¯ç¬¬ä¸‰æ­¥ï¼ˆç»“åˆç½®é¡¶è¯„è®ºçœ‹å“ˆï¼‰çš„åŒºåˆ«ï¼Œå¦å¤–å››æ­¥è¿˜æ˜¯æœ‰çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543380079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583740,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2a/7c/0d6a87c4.jpg","nickname":"dandy","note":"","ucode":"5EE976FCBD9215","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359880,"discussion_content":"1","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1616315286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2014573,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/bd/6d/7010f98e.jpg","nickname":"SharpBB","note":"","ucode":"D30C5B798B8E8C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553893,"discussion_content":"è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨sleepå‡½æ•°æ¥æ¨¡æ‹Ÿsqlæ…¢æŸ¥è¯¢ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646127718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":71887,"user_name":"é©¬æ¶›","can_delete":false,"product_type":"c1","uid":1410251,"ip_address":"","ucode":"E11A31C95032A9","user_header":"https://static001.geekbang.org/account/avatar/00/15/84/cb/09455051.jpg","comment_is_top":false,"comment_ctime":1551462889,"is_pvip":false,"replies":[{"id":"26045","content":"InnoDBä¼šæŠŠä¸»é”®å­—æ®µæ”¾åˆ°ç´¢å¼•å®šä¹‰å­—æ®µåé¢ï¼Œ<br>å½“ç„¶åŒæ—¶ä¹Ÿä¼šå»é‡ã€‚<br><br>æ‰€ä»¥ï¼Œå½“ä¸»é”®æ˜¯(a,b)çš„æ—¶å€™ï¼Œ<br>å®šä¹‰ä¸ºcçš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,a,b);<br>å®šä¹‰ä¸º(c,a)çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯(c,a,b)<br>ä½ çœ‹ç€åŠ æ˜¯ç›¸åŒçš„<br><br>ps å®šä¹‰ä¸º(c,bï¼‰çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,b,a)<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551489339,"ip_address":"","comment_id":71887,"utype":1}],"discussion_count":37,"race_medal":0,"score":"1590689362409","product_id":100020801,"comment_content":"ç´¢å¼•é—®é¢˜ç­”æ¡ˆè§£é‡Šè¿™ä¸ªæ˜¯ä¸æ˜¯å†è¯¦ç»†ä¸€ç‚¹ï¼Œæˆ‘çœ‹è¿˜æœ‰äººå’Œæˆ‘ä¸€æ ·ï¼Œè¿˜æ˜¯æä¸æ¸…æ¥šä¸ºä»€ä¹ˆcç´¢å¼•å’Œcaç´¢å¼•ä¸€æ ·ã€‚","like_count":371,"discussions":[{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289761,"discussion_content":"æ„Ÿè§‰è¿™é‡Œè¿˜æ˜¯æœ‰é—®é¢˜çš„å§ï¼Œå•ç‹¬å»ºäº†cç´¢å¼•ï¼Œè™½ç„¶ä¸»é”®ç´¢å¼•ä¼šè·Ÿåœ¨cç´¢å¼•åé¢ï¼Œä½†æ˜¯aå¹¶ä¸ä¿è¯æ˜¯æœ‰åºçš„çš„å§","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1594204118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049208,"avatar":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","nickname":"james","note":"","ucode":"5701899403917C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258715,"discussion_content":"è¿™è§£é‡Šæ¯”ç­”ç–‘æ¸…æ¥šå¤šäº†","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1588725108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441380,"discussion_content":"InnoDBä¼šæŠŠä¸»é”®å­—æ®µæ”¾åˆ°ç´¢å¼•å®šä¹‰å­—æ®µåé¢ï¼Œ\nå½“ç„¶åŒæ—¶ä¹Ÿä¼šå»é‡ã€‚\n\næ‰€ä»¥ï¼Œå½“ä¸»é”®æ˜¯(a,b)çš„æ—¶å€™ï¼Œ\nå®šä¹‰ä¸ºcçš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,a,b);\nå®šä¹‰ä¸º(c,a)çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯(c,a,b)\nä½ çœ‹ç€åŠ æ˜¯ç›¸åŒçš„\n\nps å®šä¹‰ä¸º(c,bï¼‰çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,b,a)\n\n","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1551489339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239162,"discussion_content":"æœ‰ä¸ªç´¢å¼•æ‰©å±•åŠŸèƒ½ï¼Œå®˜æ–¹æ–‡æ¡£æœ‰è¯´æ˜ã€‚ä¼šæŠŠä¸»é”®ç´¢å¼•è¿½åŠ åˆ°æ™®é€šç´¢å¼•åé¢ï¼Œè¿™ä¸ªæœ‰å¼€å…³é…ç½®æ˜¯å¦è¿™ä¹ˆåšï¼Œé»˜è®¤å¼€å¯","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1587280339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1153413,"avatar":"https://static001.geekbang.org/account/avatar/00/11/99/85/4d21c328.jpg","nickname":"kajibu","note":"","ucode":"49326E8B13019B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347789,"discussion_content":"https://dev.mysql.com/doc/refman/5.7/en/index-extensions.html æ–‡æ¡£åœ°å€åœ¨è¿™å„¿ï¼Œé€ç»™æœ‰ç¼˜äºº","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1612320909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":239162,"ip_address":""},"score":347789,"extra":""},{"author":{"id":2028277,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","nickname":"Unknown element","note":"","ucode":"34A129800D0238","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1153413,"avatar":"https://static001.geekbang.org/account/avatar/00/11/99/85/4d21c328.jpg","nickname":"kajibu","note":"","ucode":"49326E8B13019B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574051,"discussion_content":"æ„Ÿè°¢å¤§ä½¬~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653813441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":347789,"ip_address":""},"score":574051,"extra":""},{"author":{"id":2748179,"avatar":"","nickname":"cly","note":"","ucode":"0B33AA668E7BFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1153413,"avatar":"https://static001.geekbang.org/account/avatar/00/11/99/85/4d21c328.jpg","nickname":"kajibu","note":"","ucode":"49326E8B13019B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581318,"discussion_content":"æ„Ÿè°¢ åƒè¨€ä¸‡è¯­ä¸å¦‚ä¸€ç¯‡å®˜æ–¹æ–‡æ¡£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658720038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":347789,"ip_address":""},"score":581318,"extra":""}]},{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312123,"discussion_content":"å§æ§½,å§æ§½,å§æ§½!!!","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1602587543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2037576,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/17/48/6ab7ef29.jpg","nickname":"å…»çŒªåœºè€æ¿","note":"","ucode":"7974373F55AF87","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311797,"discussion_content":"B+æ ‘çš„å¶å­èŠ‚ç‚¹æŒ‡å‘ä¸€ä¸ªInnoDBæ•°æ®é¡µï¼Œæ•°æ®é¡µé‡Œè¾¹ä¼šæœ‰å¤šè¡Œæ•°æ®ï¼Œå¤šè¡Œæ•°æ®æ˜¯ä»¥æœ‰åºæ•°ç»„çš„å½¢å¼ä¿å­˜çš„ã€‚cçš„äºŒçº§ç´¢å¼•é‡Œï¼Œï¼ˆa,b)å°±æ˜¯æ‰€è°“çš„è¡Œæ•°æ®ã€‚åœ¨cè¿™ä¸ªäºŒçº§ç´¢å¼•çš„B+æ ‘ä¸Šçš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œï¼ˆaï¼Œbï¼‰æ˜¯ä»¥æœ‰åºæ•°ç»„çš„å½¢å¼æ’å¥½åºçš„ã€‚æ‰€ä»¥cäºŒçº§ç´¢å¼•å’Œcaè”åˆç´¢å¼•ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1602491382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1397733,"avatar":"","nickname":"Geek_de5309","note":"","ucode":"89BA74A802DD56","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2037576,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/17/48/6ab7ef29.jpg","nickname":"å…»çŒªåœºè€æ¿","note":"","ucode":"7974373F55AF87","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":348043,"discussion_content":"ç´¢å¼•å­—æ®µå®šä¹‰äº†æ¯”è¾ƒè§„åˆ™ï¼Œæœ‰åºä¹Ÿæ˜¯æŒ‰ç…§ç´¢å¼•å­—æ®µæœ‰åºï¼ŒC=1åœ¨å‰ï¼ŒC=5åœ¨åã€‚å…³é”®æ˜¯Cç›¸åŒçš„æ•°æ®ï¼Œæ˜¯æ€ä¹ˆä¿å­˜çš„ã€‚å…³é”®æ˜¯ç´¢å¼•åˆ—ç›¸åŒçš„æ•°æ®ï¼Œæ˜¯ä¸æ˜¯ä¼šæŒ‰ç…§ä¸»é”®é¡ºåºå­˜ã€‚è¿™ä¸ªå¾—ææ¸…æ¥šã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1612411279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":311797,"ip_address":""},"score":348043,"extra":""},{"author":{"id":2185166,"avatar":"https://static001.geekbang.org/account/avatar/00/21/57/ce/ad3c3954.jpg","nickname":"é¹…é¹…é¹…","note":"","ucode":"6AFA3FCC7B5AEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2037576,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/17/48/6ab7ef29.jpg","nickname":"å…»çŒªåœºè€æ¿","note":"","ucode":"7974373F55AF87","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":350859,"discussion_content":"å¯¹ï¼ŒäºŒçº§ç´¢å¼•é€šè¿‡é”®å€¼å¯¹æ‰¾åˆ°ä¸»é”®ç´¢å¼•ï¼›è€å¸ˆè¯´çš„æ›´é€šä¿—ä¸€ç‚¹ï¼Œåè€Œçœ‹ä¸å¤§æ‡‚äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614052934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":311797,"ip_address":""},"score":350859,"extra":""}]},{"author":{"id":1111000,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f3/d8/e0048b95.jpg","nickname":"å¼ äº‘ä¸š","note":"","ucode":"D0179DE4B2CDF5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288871,"discussion_content":"è¿™æ ·è§£é‡Šï¼Œç¬é—´å°±æ¸…æ™°äº†ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1593916384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2306194,"avatar":"","nickname":"Geek_6b9ecc","note":"","ucode":"25421F0FD129B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329256,"discussion_content":"ç§€å„¿ æ˜¯ä½ å—","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1606354298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295958,"discussion_content":"æˆ‘æ€ä¹ˆè§‰å¾—åº”è¯¥æ˜¯å»æ‰Cç´¢å¼•ï¼Œä¿ç•™CAç´¢å¼•ï¼ŒCç´¢å¼•ä¸èƒ½ä¿è¯æŒ‰Aæ’åºå‘€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596414622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1312918,"avatar":"https://static001.geekbang.org/account/avatar/00/14/08/96/231fdd9e.jpg","nickname":"æœªçŸ¥","note":"","ucode":"DB389CEBEEE9E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319559,"discussion_content":"æ„Ÿè§‰è¿™é‡Œä¸æ˜¯å¼ºè°ƒæ˜¯å¦æœ‰åºã€‚å°±ç®—ä¸»é”®æ˜¯å•ä¸ªAï¼ŒäºŒçº§ç´¢å¼•Cä¹Ÿä¸å›ä¿è¯å¶å­èŠ‚ç‚¹çš„Aæœ‰åºï¼ˆè¿™é‡Œåº”è¯¥MRRä¼šå†æ¬¡ä¼˜åŒ–ï¼‰ã€‚è¿™é‡Œå¼ºè°ƒçš„ç´¢å¼•æ˜¯å¦å¤šä½™ã€‚Innodbä¼šæ‰©å±•äºŒçº§ç´¢å¼•ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬åˆ›å»ºäºŒçº§ç´¢å¼•Cæˆ–è€…CAæˆ–è€…CABï¼Œè¿™ä¸‰ç§å¯¹å¼•æ“æ¥è¯´å®Œå…¨ä¸€æ ·ï¼Œå› ä¸ºå°±ç®—åˆ›å»ºCAï¼Œä»–ä¹Ÿä¼šè‡ªåŠ¨è¡¥å…¨ä¸ºCABã€‚æƒ³æƒ³ä¹Ÿæ˜¯ï¼Œå› ä¸ºABæ˜¯è”åˆä½å»ºï¼Œæ—¢ç„¶äºŒçº§ç´¢å¼•å¶å­èŠ‚ç‚¹ä¿å­˜çš„æ˜¯ä¸»é”®ï¼Œé‚£ç”¨æˆ·åˆ›å»ºCAï¼Œæˆ‘å¶å­èŠ‚ç‚¹è¦ä¿å­˜ABï¼Œåè€Œå¤šä¿å­˜äº†ä¸€ä¸ªAï¼Œè¿˜ä¸å¦‚ä¸ç®¡ç”¨æˆ·æ€ä¹ˆåˆ›å»ºæˆ‘éƒ½æŒ‰CABè¡¥å…¨ï¼ˆå½“ç„¶ä¹Ÿå¯ç†è§£ä¸ºå»é‡äº†ï¼‰ã€‚å¦‚æœåˆ›å»ºCAï¼Œå› ä¸ºinnodbè‡ªåŠ¨è¡¥å…¨çš„CABï¼Œæ‰€ä»¥serverå±‚å¹¶ä¸çŸ¥é“æœ‰CABçš„å­˜åœ¨ï¼Œæ‰€ä»¥æŸ¥è¯¢a =* and b=* order by c çš„è¯ï¼Œä¼˜åŒ–å™¨å¹¶ä¸ä¼šé€‰æ‹©è¿™ä¸ªè¦†ç›–ç´¢å¼•ï¼Œè¿˜æ˜¯æŸ¥ab,ç„¶åæŒ‰cÂ æ’åºã€‚æ‰€ä»¥å®˜ç½‘ä¹Ÿå»ºè®®å¦‚æœä½ è¦åˆ›å»ºCAï¼Œå°±æ˜¾å¼çš„åˆ›å»ºä¸ºCABã€‚ä½†æ˜¯åœ¨5.6.9ä»¥åserverå±‚æ”¯æŒè¿™ç§äº†ï¼Œæ‰€ä»¥CAä¹Ÿè¡Œã€‚\nè¯´è¿™ä¹ˆå¤šï¼Œå…³é”®ä¸€å¥è¯ï¼šinnodbä¼šè‡ªåŠ¨æ‰©å±•äºŒçº§ç´¢å¼•ï¼Œå¦‚æœäºŒçº§ç´¢å¼•æ²¡åŒ…æ‹¬æ‰€æœ‰ä¸»é”®ï¼Œåˆ™ä¼šè‡ªåŠ¨è¡¥å…¨","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1604051071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":295958,"ip_address":""},"score":319559,"extra":""},{"author":{"id":1134574,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/ee/bd08cfab.jpg","nickname":"ä¸€é­„","note":"","ucode":"71541125D4AA5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":395047,"discussion_content":"è€å¸ˆéƒ½è¯´é‚£ä¹ˆæ¸…æ¥šäº†ï¼Œcç´¢å¼•å’Œcaç´¢å¼•éƒ½æ˜¯cabç´¢å¼•ï¼Œæ‰€ä»¥ä½ å»æ‰cç´¢å¼•ï¼Œä¿ç•™caç´¢å¼•æ²¡åŒºåˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632199895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":295958,"ip_address":""},"score":395047,"extra":""}]},{"author":{"id":1016917,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","nickname":"shiziwen","note":"","ucode":"ADADC770D82D66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202123,"discussion_content":"ä¸ºå•¥è¿˜éœ€è¦cçš„ç´¢å¼•å‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583866074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1016917,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","nickname":"shiziwen","note":"","ucode":"ADADC770D82D66","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295957,"discussion_content":"æˆ‘æ€ä¹ˆè§‰å¾—åº”è¯¥æ˜¯å»æ‰Cç´¢å¼•ï¼Œä¿ç•™CAç´¢å¼•ï¼ŒCç´¢å¼•ä¸èƒ½ä¿è¯æŒ‰Aæ’åºå‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596414590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":202123,"ip_address":""},"score":295957,"extra":""},{"author":{"id":1029484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b5/6c/617c0193.jpg","nickname":"dingsai88","note":"","ucode":"A725428A983ADC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335001,"discussion_content":"MySQLå†…éƒ¨ä¼šå°†ä¸»é”®å­—æ®µæ”¾åˆ°ç´¢å¼•å®šä¹‰å­—æ®µåé¢ï¼Œæ‰€ä»¥ Cå®é™…æ˜¯ï¼ˆC,A,Bï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608045719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":295957,"ip_address":""},"score":335001,"extra":""}]},{"author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2634,"discussion_content":"å¬è€å¸ˆä¸€è§£é‡Šï¼Œæœ‰ç‚¹æ˜ç™½äº†ï¼Œç›¸å½“äºè”åˆç´¢å¼•ã€‚å³å½“ç´¢å¼•å­—æ®µç›¸åŒæ—¶ï¼Œè¿˜ä¼šæŒ‰ä¸»é”®æ’åº","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563802061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1306092,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ61zTDmLk7IhLJn6seBPOwsVaKIWUWaxk5YmsdYBZUOYMQCsyl9iaQVSg9U5qJVLLOCFUoLUuYnRA/132","nickname":"fjpcode","note":"","ucode":"C32C5E3ECB9A90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":780,"discussion_content":"æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºï¼ŒäºŒçº§ç´¢å¼•ä¸Šå¶å­èŠ‚ç‚¹è®°å½•çš„æ˜¯ä¸€ä¸ªç”±äºŒçº§ç´¢å¼•å­—æ®µå’Œä¸»é”®ç´¢å¼•å­—æ®µç»„åˆçš„è”åˆç´¢å¼•ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562056138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1306092,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ61zTDmLk7IhLJn6seBPOwsVaKIWUWaxk5YmsdYBZUOYMQCsyl9iaQVSg9U5qJVLLOCFUoLUuYnRA/132","nickname":"fjpcode","note":"","ucode":"C32C5E3ECB9A90","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70262,"discussion_content":"åº”è¯¥è¿˜è¦å»é‡ï¼Œä¾‹å¦‚äºŒçº§ç´¢å¼•c,aï¼Œä¸»é”®ç´¢å¼•a,bï¼Œå¶å­èŠ‚ç‚¹å°±åªæœ‰c,a,bã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1575339133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":780,"ip_address":""},"score":70262,"extra":""}]},{"author":{"id":1342746,"avatar":"http://thirdwx.qlogo.cn/mmopen/KFgDEHIEpnQ2vtxr78tZyMyZib80iaHMw2x3BscfBumVyNibRtcanICkeweRJicSxampCGDgiapJRqH0iauwxBfy1mzsibmbyekNv40/132","nickname":"Geek_jiange","note":"","ucode":"CBF5B8B77360C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544855,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641735917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1064018,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3c/52/5951ffb4.jpg","nickname":"Sinvi","note":"","ucode":"2A90976980CA3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543802,"discussion_content":"ç¬é—´ç§’æ‡‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641304329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2416539,"avatar":"https://static001.geekbang.org/account/avatar/00/24/df/9b/173712a4.jpg","nickname":"æ¸¸å›¾","note":"","ucode":"96867868E25380","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342679,"discussion_content":"ps å®šä¹‰ä¸º(c,bï¼‰çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,b,a)   è¿™ä¸ªè¿˜ä¸æ˜¯å¾ˆç†è§£ï¼Œä¸»é”®è”åˆç´¢å¼•ä¸æ˜¯ä¸€ç§é¡ºåºa,bä¹ˆï¼Ÿæ€ä¹ˆè¿˜å¯ä»¥b,aä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610775340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1758825,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d6/69/f59d4f6f.jpg","nickname":"Ryan","note":"","ucode":"387955FD53E98C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2416539,"avatar":"https://static001.geekbang.org/account/avatar/00/24/df/9b/173712a4.jpg","nickname":"æ¸¸å›¾","note":"","ucode":"96867868E25380","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346352,"discussion_content":"æˆ‘è¿™ä¹ˆç†è§£çš„ï¼Œå®šä¹‰ (c,b) ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ c,b,a,b çš„é¡ºåºï¼Œåé¢çš„ b æ˜¯å¯ä»¥å¿½ç•¥çš„ï¼ˆå› ä¸ºå·²ç»åœ¨ a å‰é¢ç”¨ b æ’è¿‡åºäº†ï¼‰","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1611919384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":342679,"ip_address":""},"score":346352,"extra":""},{"author":{"id":2874237,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/db/7d/a3510ae3.jpg","nickname":"å‡¯æ—","note":"","ucode":"20A1024A7ECE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1758825,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d6/69/f59d4f6f.jpg","nickname":"Ryan","note":"","ucode":"387955FD53E98C","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":551740,"discussion_content":"çœ‹äº†è¿™ä¹ˆå¤šï¼Œä½ è¯´çš„æ˜¯æœ€å¥½ç†è§£çš„ï¼Œèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645101613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":346352,"ip_address":""},"score":551740,"extra":""}]},{"author":{"id":2403312,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ab/f0/12b18bba.jpg","nickname":"Vincentæ®µ","note":"","ucode":"36A764BAEF53A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339814,"discussion_content":"çœ‹æ‡‚äº†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609813652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1257043,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2e/53/bf62683f.jpg","nickname":"ç‹¼çš„è¯±æƒ‘","note":"","ucode":"AE89DFC5963C42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309452,"discussion_content":"ä»€ä¹ˆæƒ…å†µä¼šæ”¾åˆ°ç´¢å¼•å­—æ®µçš„åé¢ï¼Œä¸æ˜¯key valueå­˜å‚¨å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601292970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1181248,"avatar":"https://static001.geekbang.org/account/avatar/00/12/06/40/ff77554d.jpg","nickname":"å…»ğŸ±","note":"","ucode":"3CBBBEFD3945B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1257043,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2e/53/bf62683f.jpg","nickname":"ç‹¼çš„è¯±æƒ‘","note":"","ucode":"AE89DFC5963C42","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311149,"discussion_content":"æ™®é€šç´¢å¼•æ‰¾åˆ°çš„ç»“æœå°±æ˜¯ä¸»é”®ï¼Œå†æ ¹æ®ä¸»é”®ç´¢å¼•ä¸€æ¬¡æ‰¾åˆ°çœŸæ­£çš„æ•°æ®","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1602237817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":309452,"ip_address":""},"score":311149,"extra":""}]},{"author":{"id":1628501,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d9/55/bd65c4df.jpg","nickname":"ç‹æœ¨æ‰","note":"","ucode":"712288EE2A3F4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218110,"discussion_content":"æ›´æ¸…æ™°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585620639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1691517,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/7d/d9085aaa.jpg","nickname":"punnpkin","note":"","ucode":"E635BD016D892F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214972,"discussion_content":"æ‡‚äº† è°¢è°¢æé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585269069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":162227,"discussion_content":"åŸæ¥æ˜¯è¿™æ ·ï¼Œæ˜ç™½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580975333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1437769,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f0/49/889f9ef6.jpg","nickname":"M","note":"","ucode":"1A756D9AFCEB48","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":79867,"discussion_content":"è¿™ä¹ˆè§£é‡Šå°±æ¸…æ™°å¤šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576119563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1098221,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIY8df9yV6vQjOMxv5xym070hFT2GWYELpqBhxSicQoq5IqBx6teS1xJaomkOBeuzv4vkXRJfibqcMw/132","nickname":"æ°¸ä¸æ­¢æ­¥","note":"","ucode":"B5228B7EDF5921","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55985,"discussion_content":"è¿™ä¹ˆä¸€è§£é‡Šæ›´æ¸…æ™°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574420119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183601,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","nickname":"æ—¶é—´æ˜¯æœ€çœŸçš„ç­”æ¡ˆ","note":"","ucode":"B90F3EF769F865","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579,"discussion_content":"InnoDBä¼šæŠŠä¸»é”®å­—æ®µæ”¾åˆ°ç´¢å¼•å®šä¹‰å­—æ®µåé¢ï¼Œå½“ç„¶åŒæ—¶ä¹Ÿä¼šå»é‡\nå®šä¹‰ä¸ºcçš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,a,b);\nå®šä¹‰ä¸º(c,bï¼‰çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,b,a)\n(c,a,b) å’Œ (c,b,a) éµå¾ªè”åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŸåˆ™å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561715453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1183601,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","nickname":"æ—¶é—´æ˜¯æœ€çœŸçš„ç­”æ¡ˆ","note":"","ucode":"B90F3EF769F865","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138237,"discussion_content":"å½“ç„¶éµå¾ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579230354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":579,"ip_address":""},"score":138237,"extra":""}]}]},{"had_liked":false,"id":43274,"user_name":"å£¹ç¬™â˜æ¼‚æ³Š","can_delete":false,"product_type":"c1","uid":1092577,"ip_address":"","ucode":"3A0B8EC881665C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ab/e1/f6b921fa.jpg","comment_is_top":false,"comment_ctime":1543202860,"is_pvip":false,"replies":[{"id":"15465","content":"æ—©å•Šä»Šå¤©ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543203823,"ip_address":"","comment_id":43274,"utype":1}],"discussion_count":6,"race_medal":0,"score":"912076269612","product_id":100020801,"comment_content":"æ€»ç»“ï¼š<br>æ ¹æ®åŠ é”èŒƒå›´ï¼šMySQLé‡Œé¢çš„é”å¯ä»¥åˆ†ä¸ºï¼šå…¨å±€é”ã€è¡¨çº§é”ã€è¡Œçº§é”<br><br>ä¸€ã€å…¨å±€é”ï¼š<br>å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ã€‚<br>MySQLæä¾›åŠ å…¨å±€è¯»é”çš„æ–¹æ³•ï¼šFlush tables with read lock(FTWRL)<br>è¿™ä¸ªå‘½ä»¤å¯ä»¥ä½¿æ•´ä¸ªåº“å¤„äºåªè¯»çŠ¶æ€ã€‚ä½¿ç”¨è¯¥å‘½ä»¤ä¹‹åï¼Œæ•°æ®æ›´æ–°è¯­å¥ã€æ•°æ®å®šä¹‰è¯­å¥å’Œæ›´æ–°ç±»äº‹åŠ¡çš„æäº¤è¯­å¥ç­‰æ“ä½œéƒ½ä¼šè¢«é˜»å¡ã€‚<br>ä½¿ç”¨åœºæ™¯ï¼šå…¨åº“é€»è¾‘å¤‡ä»½ã€‚<br>é£é™©ï¼š<br>1.å¦‚æœåœ¨ä¸»åº“å¤‡ä»½ï¼Œåœ¨å¤‡ä»½æœŸé—´ä¸èƒ½æ›´æ–°ï¼Œä¸šåŠ¡åœæ‘†<br>2.å¦‚æœåœ¨ä»åº“å¤‡ä»½ï¼Œå¤‡ä»½æœŸé—´ä¸èƒ½æ‰§è¡Œä¸»åº“åŒæ­¥çš„binlogï¼Œå¯¼è‡´ä¸»ä»å»¶è¿Ÿ<br>å®˜æ–¹è‡ªå¸¦çš„é€»è¾‘å¤‡ä»½å·¥å…·mysqldumpï¼Œå½“mysqldumpä½¿ç”¨å‚æ•°--single-transactionçš„æ—¶å€™ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œç¡®ä¿æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ã€‚è€Œç”±äºMVCCçš„æ”¯æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°çš„ã€‚<br><br>ä¸€è‡´æ€§è¯»æ˜¯å¥½ï¼Œä½†æ˜¯å‰ææ˜¯å¼•æ“è¦æ”¯æŒè¿™ä¸ªéš”ç¦»çº§åˆ«ã€‚<br>å¦‚æœè¦å…¨åº“åªè¯»ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨set global readonly=trueçš„æ–¹å¼ï¼Ÿ<br>1.åœ¨æœ‰äº›ç³»ç»Ÿä¸­ï¼Œreadonlyçš„å€¼ä¼šè¢«ç”¨æ¥åšå…¶ä»–é€»è¾‘ï¼Œæ¯”å¦‚åˆ¤æ–­ä¸»å¤‡åº“ã€‚æ‰€ä»¥ä¿®æ”¹globalå˜é‡çš„æ–¹å¼å½±å“å¤ªå¤§ã€‚<br>2.åœ¨å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸Šæœ‰å·®å¼‚ã€‚å¦‚æœæ‰§è¡ŒFTWRLå‘½ä»¤ä¹‹åç”±äºå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸æ–­å¼€ï¼Œé‚£ä¹ˆMySQLä¼šè‡ªåŠ¨é‡Šæ”¾è¿™ä¸ªå…¨å±€é”ï¼Œæ•´ä¸ªåº“å›åˆ°å¯ä»¥æ­£å¸¸æ›´æ–°çš„çŠ¶æ€ã€‚è€Œå°†æ•´ä¸ªåº“è®¾ç½®ä¸ºreadonlyä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æ•°æ®åº“å°±ä¼šä¸€ç›´ä¿æŒreadonlyçŠ¶æ€ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ•´ä¸ªåº“é•¿æ—¶é—´å¤„äºä¸å¯å†™çŠ¶æ€ï¼Œé£é™©è¾ƒé«˜ã€‚<br>äºŒã€è¡¨çº§é”<br>MySQLé‡Œé¢è¡¨çº§é”æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è¡¨é”ï¼Œä¸€ç§æ˜¯å…ƒæ•°æ®æ‰€(meta data lock,MDL)<br>è¡¨é”çš„è¯­æ³•æ˜¯:lock tables ... read&#47;write<br>å¯ä»¥ç”¨unlock tablesä¸»åŠ¨é‡Šæ”¾é”ï¼Œä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯æ–­å¼€çš„æ—¶å€™è‡ªåŠ¨é‡Šæ”¾ã€‚lock tablesè¯­æ³•é™¤äº†ä¼šé™åˆ¶åˆ«çš„çº¿ç¨‹çš„è¯»å†™å¤–ï¼Œä¹Ÿé™å®šäº†æœ¬çº¿ç¨‹æ¥ä¸‹æ¥çš„æ“ä½œå¯¹è±¡ã€‚<br>å¯¹äºInnoDBè¿™ç§æ”¯æŒè¡Œé”çš„å¼•æ“ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨lock tableså‘½ä»¤æ¥æ§åˆ¶å¹¶å‘ï¼Œæ¯•ç«Ÿé”ä½æ•´ä¸ªè¡¨çš„å½±å“é¢è¿˜æ˜¯å¤ªå¤§ã€‚<br>MDLï¼šä¸éœ€è¦æ˜¾å¼ä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€ä¸ªè¡¨çš„æ—¶å€™ä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚<br>MDLçš„ä½œç”¨ï¼šä¿è¯è¯»å†™çš„æ­£ç¡®æ€§ã€‚<br>åœ¨å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLè¯»é”ï¼›å½“è¦å¯¹è¡¨åšç»“æ„å˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLå†™é”ã€‚<br>è¯»é”ä¹‹é—´ä¸äº’æ–¥ã€‚è¯»å†™é”ä¹‹é—´ï¼Œå†™é”ä¹‹é—´æ˜¯äº’æ–¥çš„ï¼Œç”¨æ¥ä¿è¯å˜æ›´è¡¨ç»“æ„æ“ä½œçš„å®‰å…¨æ€§ã€‚<br>MDL ä¼šç›´åˆ°äº‹åŠ¡æäº¤æ‰ä¼šé‡Šæ”¾ï¼Œåœ¨åšè¡¨ç»“æ„å˜æ›´çš„æ—¶å€™ï¼Œä¸€å®šè¦å°å¿ƒä¸è¦å¯¼è‡´é”ä½çº¿ä¸ŠæŸ¥è¯¢å’Œæ›´æ–°ã€‚<br>","like_count":212,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430345,"discussion_content":"æ—©å•Šä»Šå¤©ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543203823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2070879,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/99/5f/9232a19f.jpg","nickname":"Lion","note":"","ucode":"BD8DDC17EAE6FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292515,"discussion_content":"æˆ‘æœ‰ä¸ªé—®é¢˜ï¼ŒMDLçš„è¯»å†™é”ä¿è¯äº†è¡¨ç»“æ„çš„å®‰å…¨æ€§ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³è¡¨æ•°æ®çš„å®‰å…¨æ€§å‘€","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1595249095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1599454,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLOKzDVXse2WibsBGOR27GVYOlv8WRtFBfQe4ekNia2S5986QibD6Wv17gyDpZqmQt3kJcAcbhl3rroQ/132","nickname":"itsxun","note":"","ucode":"69E6CEA3FCB4F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285062,"discussion_content":"è¿™ä¸ªæ€»ç»“çš„å¾ˆæ£’ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592725905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2359187,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ff/93/f3717c1a.jpg","nickname":"ä¸€è¢‹ç±³è¦æ‰›å‡ æ¥¼","note":"","ucode":"83F0C8453CE683","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394138,"discussion_content":"cy","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631755752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2283935,"avatar":"","nickname":"Geek_0a1b92","note":"","ucode":"3F73A3AD365E95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320616,"discussion_content":"&#34;ç”±äºMVCCçš„æ”¯æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°çš„&#34; è¿™ä¸ªèƒ½å¦è§£é‡Šçš„æ›´æ¸…æ¥šäº›å‘¢?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604414925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1080692,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7d/74/5a1cd9aa.jpg","nickname":"AimiğŸ·","note":"","ucode":"C3EFF270B3FDDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212027,"discussion_content":"1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584926585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47520,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1544149701,"is_pvip":false,"replies":[{"id":"16947","content":"â€œéš¾é“â€æ­£ç¡®ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544152889,"ip_address":"","comment_id":47520,"utype":1}],"discussion_count":21,"race_medal":0,"score":"723098655429","product_id":100020801,"comment_content":"å…³äºæ–‡ä¸­å°è¡¨DDLçš„ç–‘æƒ‘ï¼š<br>sessionCï¼ˆDDLæ“ä½œï¼‰è¢«å‰é¢çš„sessionAå’ŒBï¼ˆæŸ¥è¯¢æ“ä½œï¼Œè·å–MDL è¯»é”ï¼‰æ‰€é˜»å¡ã€‚è¿™é‡ŒsessionCçš„DDLæ“ä½œä»»åŠ¡è‚¯å®šæ˜¯å¤„äºç­‰å¾…çš„ï¼Œåç»­æ¥çš„sessionDï¼ˆæŸ¥è¯¢æ“ä½œï¼‰ä¸ºä»€ä¹ˆä¼šè¢«sessionCæ‰€é˜»å¡ï¼Ÿ<br>æˆ‘ç†è§£çš„æ˜¯sessionCç°åœ¨éƒ½è¿˜æ²¡æœ‰è¿›è¡ŒDDLæ“ä½œï¼Œæ²¡æœ‰è·å–åˆ°MDLå†™é”ï¼Œä¸ºä»€ä¹ˆsessionDä¼šè¢«Cé˜»å¡ï¼Ÿéš¾é“mysql Serverç«¯å¯¹äºsessionCï¼ŒDæœ‰ä¸€ä¸ª é˜Ÿåˆ— æ¥å†³å®šè°å…ˆæ‰§è¡Œï¼Ÿ","like_count":168,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431791,"discussion_content":"â€œéš¾é“â€æ­£ç¡®ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544152889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1668301,"avatar":"https://static001.geekbang.org/account/avatar/00/19/74/cd/158dc733.jpg","nickname":"æµ‹å°è¯•","note":"","ucode":"591F2D8CFBF503","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":31151,"discussion_content":"æˆ‘é˜…è¯»æ–‡ç« çš„æ—¶å€™ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ã€‚åæ¥ç†è§£æˆäº†å¦‚æœDDLè€—æ—¶å¾ˆé•¿ï¼Œä¼šé˜»å¡åé¢çš„æŸ¥è¯¢è¯­å¥ï¼Œå¦‚æœæŸ¥è¯¢é¢‘ç¹ï¼Œè¿™æ ·è¿æ¥ä¼šå‰§å¢ï¼Œå¯¼è‡´è¿æ¥æ± æ»¡äº†ï¼ŒåŸæ¥æ˜¯æœ‰é˜Ÿåˆ—å†³å®šæ‰§è¡Œé¡ºåºã€‚å»ºè®®ä½œè€…æŠŠè¿™ä¸ªå›å¤ç½®é¡¶","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1570883646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066229,"avatar":"https://static001.geekbang.org/account/avatar/00/10/44/f5/486d696c.jpg","nickname":"ethan","note":"","ucode":"DA70975A40ABE2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359915,"discussion_content":"å…¬å¹³é”æœºåˆ¶ï¼Œéµå¾ªå…ˆæ¥å…ˆæ‰§è¡ŒåŸåˆ™ï¼Œå¦åˆ™å¦‚æœDä¸é˜»å¡ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹Cå¯èƒ½ä¼šæ°¸è¿œæ‹¿ä¸åˆ°å†™é”å¯¼è‡´é¥¿æ­»ã€‚","likes_number":16,"is_delete":false,"is_hidden":false,"ctime":1616328474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1066229,"avatar":"https://static001.geekbang.org/account/avatar/00/10/44/f5/486d696c.jpg","nickname":"ethan","note":"","ucode":"DA70975A40ABE2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372607,"discussion_content":"å¯¹, DMLåº”è¯¥æ¯”DDLé¢‘ç¹å¤šäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1620391804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":359915,"ip_address":""},"score":372607,"extra":""}]},{"author":{"id":1468569,"avatar":"","nickname":"yaowb","note":"","ucode":"63A951253A4DFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282674,"discussion_content":"è¿™ä¸ªæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºå…¬å¹³é”ï¼Œè°å…ˆåˆ°è°å…ˆè·å¾—é”ï¼Œæ‰€ä»¥ C è¦æ¯” D è¦å…ˆæ‹¿åˆ°é”","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1592042575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1734477,"avatar":"","nickname":"ZZQ","note":"","ucode":"EA3541BB1E89DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275485,"discussion_content":"åŒæ ·æœ‰è¿™ä¸ªç–‘é—®ï¼Œæ˜¯ä¸æ˜¯ç±»ä¼¼æ„å‘é”æœºåˆ¶ï¼ŒsessionCæ‹¿åˆ°äº†mdlæ„å‘å†™é”ï¼ŒsessionDéœ€è¦çš„mdlè¯»é”å› ä¸ºä¸mdlæ„å‘å†™é”å†²çªï¼Œæ‰€ä»¥è¢«é˜»å¡äº†","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1590720698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2351720,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e2/68/ce547a12.jpg","nickname":"zjm1314","note":"","ucode":"63B0EAB7045054","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340397,"discussion_content":"å§æ§½ï¼Œæˆ‘ä¹Ÿæœ‰åˆæ ¼ç–‘é—®ï¼Œè¿˜äº²è‡ªè¯•äº†ï¼Œçœ‹æ¥æ˜¯æœ‰ä¸ªé˜Ÿåˆ—","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1609994346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1695027,"avatar":"https://static001.geekbang.org/account/avatar/00/19/dd/33/d7f4800e.jpg","nickname":"æµå·","note":"","ucode":"8986B172F18065","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":94511,"discussion_content":"å¾ˆç®€å• å’Œjavaçš„reentrantlock æ˜¯ä¸€æ ·çš„ åŠ äº†å†™è£™ åé¢çš„è¯»é”ä¹Ÿä¼šé˜»å¡çš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1576944520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1967080,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoeZJ1aW5LkAlaKqXEpvrnSk0ibUcLFjz8pDmWpuvm8RD3e79icAALsEurUwXOs0UjVQRxuImxCsHQQ/132","nickname":"donkey703","note":"","ucode":"A48EA2D28A7557","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1695027,"avatar":"https://static001.geekbang.org/account/avatar/00/19/dd/33/d7f4800e.jpg","nickname":"æµå·","note":"","ucode":"8986B172F18065","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":236364,"discussion_content":"ä½ æ²¡getåˆ°è¯„è®ºçš„ç‚¹ï¼Œä»–çš„æ„æ€æ˜¯ï¼Œå†™é”è¿˜æ²¡è¢«ç”¨ä¸Šï¼Œå‡­ä»€ä¹ˆä¼šé˜»å¡åé¢çš„è¯»","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1587088586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":94511,"ip_address":""},"score":236364,"extra":""},{"author":{"id":2287841,"avatar":"https://static001.geekbang.org/account/avatar/00/22/e8/e1/6045b299.jpg","nickname":"LPF","note":"","ucode":"036C552D7251E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1967080,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoeZJ1aW5LkAlaKqXEpvrnSk0ibUcLFjz8pDmWpuvm8RD3e79icAALsEurUwXOs0UjVQRxuImxCsHQQ/132","nickname":"donkey703","note":"","ucode":"A48EA2D28A7557","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324270,"discussion_content":"å’ŒReentrantLockä¸€æ ·å› ä¸ºå†™é”åœ¨é˜Ÿåˆ—çš„å¼€å¤´ï¼Œä¹‹åçš„è¯»é”å…¨åœ¨é˜Ÿåˆ—ä¸­ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605083703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":236364,"ip_address":""},"score":324270,"extra":""}]},{"author":{"id":1318914,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/02/df2bfda9.jpg","nickname":"å…¬å…±å·","note":"","ucode":"4759B517D4CD5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68064,"discussion_content":"åŒæ ·æœ‰è¿™ä¸ªç–‘é—®ï¼Œè°¢è°¢å“ˆ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575199208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587107,"discussion_content":"aqsè¯»å†™é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662797319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1481179,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/UfqEYrR3cQXUhPEibnXD3kPSc8f0ibR4bdz6JnibjOBibfcxWrkVlz4iaCAAutOSotiaP2ROYX5esYfhAB3vj4avnYqQ/132","nickname":"Geek_53bccf","note":"","ucode":"1818C97E5D1CCC","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577190,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ï¼Œå¦‚æœé˜Ÿåˆ—æœ‰ç­‰å¾…å†™é”çš„çº¿ç¨‹ï¼Œåˆ™é˜»å¡åé¢çš„è¯»é”ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å¯ä»¥æ‹¿åˆ°å†™é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655963372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2790511,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/94/6f/9697953b.jpg","nickname":"ğŸ€switch","note":"","ucode":"4449F4A87D49D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403685,"discussion_content":"é‚£è¿™ä¸ªé˜Ÿåˆ—æ˜¯ç±»ä¼¼å…¬å¹³é”çš„æœºåˆ¶è¿˜æ˜¯å†™é”ä¼˜å…ˆå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634131485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1522824,"avatar":"https://static001.geekbang.org/account/avatar/00/17/3c/88/e83528da.jpg","nickname":"uking","note":"","ucode":"41005AC547327B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316721,"discussion_content":"åŒæ ·æœ‰è¿™æ ·çš„ç–‘é—®ï¼ŒæŒ‰è€å¸ˆå›ç­”çš„  â€œéš¾é“â€æ­£ç¡®ï¼Œä¹Ÿå°±æ˜¯è¯´mysql server ç«¯å¯¹äºsessionC,Dæœ‰ä¸€ä¸ªé˜Ÿåˆ—å†³å®šè°å…ˆæ‰§è¡Œï¼Œè¿™æ ·æ¥ç†è§£çš„è¯ï¼Œäº‹åŠ¡å²‚ä¸æ˜¯éƒ½æ˜¯ä¸²è¡Œæ‰§è¡Œï¼Œè¿™å’Œæˆ‘ä¹‹å‰å¯¹äº‹åŠ¡çš„ç†è§£ä¸å¤ªä¸€æ ·å‘¢ï¼Ÿ\nå³ä¾¿æ˜¯è¯´è¯»å†™äº‹åŠ¡ä¹‹é—´ä¸²è¡Œæ‰§è¡Œçš„è¯ï¼ŒsessionCåœ¨æ²¡è·å–åˆ°é”çš„æƒ…å†µä¸‹ï¼ŒsessionCå’ŒsessionDä¸¤ä¸ªäº‹åŠ¡å°±ä¸å­˜åœ¨è¯»å†™äº‹åŠ¡çš„å…ˆåçš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯æ²¡ç†è§£ä¸ºä½•seeionCä¼šé˜»å¡sessionDå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603444966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2653715,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKib3vNM6TPT1umvR3TictnLurJPKuQq4iblH5upgBB3kHL9hoN3Pgh3MaR2rjz6fWgMiaDpicd8R5wsAQ/132","nickname":"é™ˆé˜³","note":"","ucode":"C8E676C967D23A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1522824,"avatar":"https://static001.geekbang.org/account/avatar/00/17/3c/88/e83528da.jpg","nickname":"uking","note":"","ucode":"41005AC547327B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548388,"discussion_content":"åŒæ ·ç–‘é—®+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643173915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":316721,"ip_address":""},"score":548388,"extra":""},{"author":{"id":1303572,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJCaO2mIHjagO7qAhTKW8c67dEyM1VxXWgOuItBar4e2Zg5vBV6tZ2DnYabtspZeOtHKa8rgVQHiaA/132","nickname":"justin","note":"","ucode":"D58141D260ED8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1522824,"avatar":"https://static001.geekbang.org/account/avatar/00/17/3c/88/e83528da.jpg","nickname":"uking","note":"","ucode":"41005AC547327B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581418,"discussion_content":"æˆ‘çš„ç†è§£ä¾›å‚è€ƒ1ã€è¿™å‡ ä¸ªsessionéƒ½æ˜¯å¯¹åŒä¸€ä¸ªè¡¨æˆ–æˆ–è€…èµ„æºåœ¨æ“ä½œï¼Œæ‰€ä»¥ä¸æ˜¯æƒ³çš„é‚£æ ·çš„å¹¶å‘ï¼ŒåŒä¸€ä¸ªèµ„æºçš„äº‰å¤ºï¼Œé”å°±æ˜¯æ¥æ§åˆ¶å¹¶å‘çš„ã€‚2ã€ç±»ä¼¼å…¬å¹³é”ï¼Œå¤§å®¶éƒ½æ¥å¯¹åŒä¸€ä¸ªè¡¨æ¥æ“ä½œï¼Œå…ˆæ¥ååˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658765464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":316721,"ip_address":""},"score":581418,"extra":""}]},{"author":{"id":1690759,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cc/87/2a196164.jpg","nickname":"å°çŸ³å¤´","note":"","ucode":"7B2EC4C8C6192F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297178,"discussion_content":"è·Ÿæˆ‘ç†è§£ä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596794900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1940149,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/9a/b5/815e60fb.jpg","nickname":"Linda","note":"","ucode":"A5C042ADA8B321","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":250716,"discussion_content":"æˆ‘è§‰å¾—æ˜¯å› ä¸ºå‰é¢æœ‰ä¸ªbeginï¼Œæ•´ä½“æ˜¯ä¸ªäº‹åŠ¡ï¼Œè¦æŒ‰é¡ºåºæ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588036697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1940149,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/9a/b5/815e60fb.jpg","nickname":"Linda","note":"","ucode":"A5C042ADA8B321","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369540,"discussion_content":"ä¸åŒsessionæ‰§è¡Œçš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619072365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":250716,"ip_address":""},"score":369540,"extra":""}]},{"author":{"id":1306092,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ61zTDmLk7IhLJn6seBPOwsVaKIWUWaxk5YmsdYBZUOYMQCsyl9iaQVSg9U5qJVLLOCFUoLUuYnRA/132","nickname":"fjpcode","note":"","ucode":"C32C5E3ECB9A90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40665,"discussion_content":"ç¡®å®ï¼Œå¼€å§‹ä¹Ÿä¸ç†è§£ï¼ŒsessionCæ²¡æœ‰æ‹¿åˆ°MDLå†™é”ä¹‹å‰ï¼ŒæŒ‰ç†è¯´MDLè¯»é”ä¸ä¼šé˜»å¡ï¼Œå¦‚æœè¯´æœ‰ä¸€ä¸ªé˜Ÿåˆ—åœ¨å°±åˆç†äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572255233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45397,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1543631779,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"358025917347","product_id":100020801,"comment_content":"ç»§ç»­æŠŠè¯¥è®²å†…å®¹æ€»ç»“ä¸ºå‡ ä¸ªé—®é¢˜, å¤§å®¶å¤ä¹ çš„æ—¶å€™å¯ä»¥å…ˆå°è¯•å›ç­”è¿™äº›é—®é¢˜æ£€æŸ¥è‡ªå·±çš„æŒæ¡ç¨‹åº¦:<br><br><br>\t1. <br>MySQLä»åŠ é”èŒƒå›´ä¸Šåˆ†ä¸ºå“ªä¸‰ç±»?<br>\t2. <br>å…¨å±€é”åŠ é”æ–¹æ³•çš„æ‰§è¡Œå‘½ä»¤æ˜¯ä»€ä¹ˆ?ä¸»è¦çš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ?<br>\t3. <br>åšæ•´åº“å¤‡ä»½æ—¶ä¸ºä»€ä¹ˆè¦åŠ å…¨å±€é”?<br>\t4. <br>MySQLçš„è‡ªå¸¦å¤‡ä»½å·¥å…·, ä½¿ç”¨ä»€ä¹ˆå‚æ•°å¯ä»¥ç¡®ä¿ä¸€è‡´æ€§è§†å›¾, åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä¸é€‚ç”¨?<br>\t5. <br>ä¸å»ºè®®ä½¿ç”¨set global readonly = trueçš„æ–¹æ³•åŠ å…¨å±€é”æœ‰å“ªä¸¤ç‚¹åŸå› ?<br>\t6. <br>è¡¨çº§é”æœ‰å“ªä¸¤ç§ç±»å‹?  å„è‡ªçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ?<br>\t7. <br>MDLä¸­è¯»å†™é”ä¹‹é—´çš„äº’æ–¥å…³ç³»æ€æ ·çš„?<br>\t8. <br>å¦‚ä½•å®‰å…¨çš„ç»™å°è¡¨å¢åŠ å­—æ®µ?<br><br><br><br>","like_count":83,"discussions":[{"author":{"id":2833979,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/3e/3b/84d486f6.jpg","nickname":"é•¿ç”Ÿ","note":"","ucode":"F4919BC8BAEF36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589038,"discussion_content":"1. å…¨å±€é”ã€è¡¨çº§é”ã€è¡Œé”\n2. flush tables read lock å¤‡ä»½\n3. é˜²æ­¢æ•°æ®ä¸ä¸€è‡´\n4. single-transaction ä¸æ”¯æŒäº‹åŠ¡å¼•æ“ä¸é€‚ç”¨\n5. readonly å¯èƒ½ç”¨äºå…¶ä»–åœºæ™¯ï¼Œå¼‚å¸¸æ–­å¼€å…¨åº“ä¼šä¸€ç›´ä¿æŒ readonly çŠ¶æ€ï¼Œè¿˜æœ‰ç½‘å‹è¯´çš„è¶…çº§æƒé™å¤±æ•ˆ\n6. è¡¨é” ï¼ˆæ§åˆ¶å¹¶å‘ï¼‰ MDL ï¼ˆéš”ç¦» DDL DML æ“ä½œä¹‹é—´çš„å¹²æ‰°ï¼‰\n7. è¯»è¯»å¯ï¼Œè¯»å†™ä¸å¯ï¼Œå†™å†™ä¸å¯\n8. è§£å†³é•¿äº‹åŠ¡ï¼ˆæš‚åœ DDL ï¼Œkill é•¿äº‹åŠ¡ï¼‰/ è®¾ç½® alter è¶…æ—¶æ—¶é—´","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1664357927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43882,"user_name":"Tony Du","can_delete":false,"product_type":"c1","uid":1001661,"ip_address":"","ucode":"F5FCC400E615EA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/bd/6c7d4230.jpg","comment_is_top":false,"comment_ctime":1543317245,"is_pvip":false,"replies":[{"id":"15669","content":"ä½ ç”¨MySQL å®¢æˆ·ç«¯è¯•è¯•ï¼Œæˆ‘è·‘å‡ºæ¥æ˜¯æ–‡ä¸­çš„é¡ºåºå“ˆã€‚ç»™æˆ‘ä¸€ä¸‹ä½ çš„MySQL ç‰ˆæœ¬å·å’Œworkbenchç‰ˆæœ¬å·","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543319147,"ip_address":"","comment_id":43882,"utype":1}],"discussion_count":46,"race_medal":0,"score":"289306126077","product_id":100020801,"comment_content":"åŸºäºæ–‡ä¸­çš„ä¾‹å­MDLï¼ˆmetadata lock)ï¼Œè‡ªå·±åšäº†ä¸€ä¸ªå®éªŒï¼ˆç¨å¾®æœ‰ä¸€äº›å°æ”¹åŠ¨åœ¨session Dä¸Šï¼‰ï¼Œ<br>session A: begin; select * from t limit 1; æœ€å…ˆå¯åŠ¨sessionA<br>session B: begin; select * from t limit 1; ç´§æ¥ç€å¯åŠ¨sessionB<br>session C: alter table t add f int; ç„¶åå†æ˜¯å¯åŠ¨sessionC<br>session D: begin; select * from t limit 1; æœ€åæ˜¯å¯åŠ¨sessionD<br>å¦‚æ–‡ä¸­ä¾‹å­ï¼Œsession Aå’ŒBæ­£å¸¸å¯åŠ¨ï¼Œç„¶åsession Cè¢«blockï¼Œä¹‹åsession Dä¹Ÿè¢«blockã€‚å½“æŠŠ session A å’Œ session B éƒ½commitæ‰åï¼Œå‘ç°session Cä¾ç„¶æ˜¯blockçš„ï¼ˆè¢« session Dé˜»å¡ï¼‰ï¼Œåªæœ‰å½“æŠŠ session D ä¹Ÿcommitæ‰åï¼Œsession Cæ‰æ‰§è¡Œä¸‹å»ã€‚åŒæ ·çš„å®éªŒï¼Œé‡å¤äº†ä¸‰éï¼Œç»“æœä¹Ÿæ˜¯ä¸€æ ·ã€‚<br>ä»ç°è±¡ä¸Šçœ‹ï¼Œsession Dä¼šå…ˆæ‹¿åˆ°MDLè¯»é”ï¼Œå½“session D commitæ‰åï¼Œç„¶åå†æ˜¯session Cè·å¾—MDLå†™é”ã€‚è¯·é—®è€å¸ˆï¼Œè¿™é‡Œå¯¹äºMDLé”çš„è·å–é¡ºåºï¼ˆä¹Ÿå°±æ˜¯è¯´ æ˜¯session Cå…ˆè·å–MDLå†™é”è¿˜æ˜¯session Då…ˆè·å–MDLè¯»é”ï¼‰æœ‰ä»€ä¹ˆåŸåˆ™ï¼Ÿæ˜¯éšæœºçš„è¿˜æ˜¯æœ‰ä»€ä¹ˆè®²ç©¶ï¼Ÿ<br><br>å¦å¤–ï¼Œåœ¨ä¸€å¼€å§‹çš„è·å–MDLé”çš„é˜¶æ®µï¼Œsession Aï¼ˆMDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œï¼‰-&gt; session B (MDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œ) -&gt; session C (MDLå†™é”ï¼Œè¢«block) -&gt; session D (MDLè¯»é”ï¼Œè¢«MDLå†™é” block) ã€‚æ˜¯ä¸æ˜¯è¯´åŠ MDLé”æ˜¯çœ‹æ—¶é—´å…ˆåé¡ºåºçš„ï¼Œä¸€æ—¦å‡ºç°è¿‡éœ€è¦è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œåç»­å†éœ€è¦è·å–MDLè¯»é”ï¼Œåˆ™å‘ç°ä¹‹å‰å·²ç»æœ‰è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œéœ€è¦è·å–è¯»é”çš„sessionéƒ½ä¼šè¢«blockã€‚æ„Ÿè§‰ä¸Šåƒè¿›å…¥ä¸€ä¸ªé”çš„â€é˜Ÿåˆ—â€œï¼Œæ ¹æ®æ—¶é—´å…ˆåé¡ºåºã€‚è¯·é—®è€å¸ˆï¼Œè¿™é‡Œå¯ä»¥æ›´ç»†èŠ‚å’Œæ·±å…¥çš„è¯´æ˜ä¸‹å—ï¼Ÿ<br><br>î˜ˆ ä½œè€…å›å¤<br>ä½ è¿™ä¸ªä¾‹å­é‡Œé¢ï¼ŒsessionD è¢«Cå µä½åæ˜¯ä¸èƒ½è¾“å…¥å‘½ä»¤çš„ï¼Œä¹‹åæ˜¯ä»€ä¹ˆåŠ¨ä½œä¹‹åï¼ŒsessionDæ‰èƒ½è¾“å…¥commitè¯­å¥å‘¢<br><br>æˆ‘çš„å›å¤ï¼š<br>session Dè¢«Cå µä½åï¼Œä¼šå¡åœ¨select * from t limit 1è¿™å¥ã€‚ç„¶åå½“æˆ‘æŠŠAå’ŒBéƒ½commitæ‰ï¼Œsession Då°±ä¼šæ‰§è¡Œselect * from t limit 1è¿™å¥ï¼Œæ­¤æ—¶ï¼Œsession Cä¾æ—§ä¼šè¢«å µç€ã€‚ç„¶åæŠŠsession D commitæ‰ï¼Œsession Cæ‰èƒ½æ‰§è¡Œã€‚å®éªŒçš„æ—¶å€™ï¼Œæˆ‘æ˜¯æŠŠsqlè¯­å¥éƒ½å†™åœ¨MySQL workbenché‡Œçš„ï¼Œé€šè¿‡workbenchè¿æœåŠ¡å™¨çš„ï¼Œsession Dçš„commitè¯­å¥æ˜¯å†™åœ¨workbenché‡Œæ‰§è¡Œçš„ã€‚æˆ‘çš„é—®é¢˜æ˜¯ï¼Œä¸ºä»€ä¹ˆæ˜¯session Då…ˆè·å–çš„MDLè¯»é”ï¼Œè€Œä¸æ˜¯session Cå…ˆè·å–MDLå†™é”ï¼Œå¯¹äºMDLé”çš„è·å–é¡ºåºæœ‰ä»€ä¹ˆåŸåˆ™ï¼Ÿæ˜¯éšæœºçš„è¿˜æ˜¯æœ‰ä»€ä¹ˆè®²ç©¶ï¼Ÿ","like_count":67,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430535,"discussion_content":"ä½ ç”¨MySQL å®¢æˆ·ç«¯è¯•è¯•ï¼Œæˆ‘è·‘å‡ºæ¥æ˜¯æ–‡ä¸­çš„é¡ºåºå“ˆã€‚ç»™æˆ‘ä¸€ä¸‹ä½ çš„MySQL ç‰ˆæœ¬å·å’Œworkbenchç‰ˆæœ¬å·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543319147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1450420,"avatar":"https://static001.geekbang.org/account/avatar/00/16/21/b4/7fb0d713.jpg","nickname":"éƒ‘å–œäº®","note":"","ucode":"9E47DC9361B6D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343931,"discussion_content":"è¿™æ˜¯ç”±äºsession Cæ‹¿åˆ°MDLå†™é”åé™çº§ä¸ºè¯»é”ï¼Œæ­¤æ—¶SessionDè·åˆ°è¯»é”ï¼Œå½“SessionCåšå®Œäº†çœŸæ­£çš„ddlçš„æ—¶å€™è¦å‡çº§ä¸ºå†™é”ï¼Œè¢«SessionDé˜»å¡ï¼ˆå®è·µè¯å®çš„ç»“è®ºã€æ€è·¯ï¼šå»ºä¸€å¼ æœ‰600000æ•°æ®çš„è¡¨ï¼Œä¸€ä¸ªalter tableçš„è€—æ—¶çº¦ä¸º10sï¼›å…ˆæ‰§è¡ŒsessionA,ç„¶åsessionBæ‰§è¡Œalter tableï¼Œç„¶åæ‰§è¡ŒsessionCï¼Œå…ˆæäº¤sessionAï¼Œç„¶å5ç§’åæäº¤sessionCï¼Œå‘ç°çº¦äº”ç§’åSessionBå®Œæˆï¼Œæ‰€ä»¥å°±æ˜¯sessionBå…ˆæ‹¿åˆ°å†™é”ï¼Œé™ä¸ºè¯»é”ï¼ŒsessionCæ‹¿åˆ°è¯»é”ï¼Œäº”ç§’åsessionCæäº¤ï¼Œæ­¤æ—¶sessionBå·²ç»æ‰§è¡Œäº†äº”ç§’äº†ï¼Œçº¦äº”ç§’åsessionBæäº¤ã€‘ï¼‰ã€å…¶å®ä¹Ÿå¯ä»¥sessionCåç§’ä»¥åæäº¤ï¼Œå¦‚æœsessionCåˆšæäº¤ï¼ŒsessionBå°±å®Œæˆäº†ï¼Œå°±è¯æ˜sessionBå·²ç»æ‰§è¡Œå®Œæˆäº†ï¼Œåªæ˜¯åœ¨ç­‰åœ¨sessionCçš„è¯»é”é‡Šæ”¾ã€‘","likes_number":29,"is_delete":false,"is_hidden":false,"ctime":1611212820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1450420,"avatar":"https://static001.geekbang.org/account/avatar/00/16/21/b4/7fb0d713.jpg","nickname":"éƒ‘å–œäº®","note":"","ucode":"9E47DC9361B6D3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532515,"discussion_content":"å¯¹online DDLçš„MDLç†è§£å¾—å¾ˆåˆ°ä½å•Šã€‚666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637633762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":343931,"ip_address":""},"score":532515,"extra":"{\"user_type\":1}"}]},{"author":{"id":1301823,"avatar":"https://static001.geekbang.org/account/avatar/00/13/dd/3f/1580ec67.jpg","nickname":"å°è¨","note":"","ucode":"F839BB79E70369","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297983,"discussion_content":"ä¸»è¦åŸå› æ˜¯online ddlçš„é—®é¢˜  mdlä¼šé™çº§\bddlçš„mdlé™çº§çš„æ—¶å€™äº‹åŠ¡è¯»å–åˆ°ç»“æœäº†ï¼Œåœ¨å‡çº§çš„æ—¶å€™å°±é˜»å¡äº† ","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1597133589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1200769,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/81/745475e9.jpg","nickname":"colben","note":"","ucode":"5E5DBA48578E96","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282966,"discussion_content":"æˆ‘ç”¨çš„ mysql 8.0.18ï¼Œå‘ç°ä¸€ä¸ªè§„å¾‹ï¼š\nalter å¢åŠ åˆ—æ—¶ï¼Œmdl å†™é”å…ˆæ‰§è¡Œï¼Œalter åˆ é™¤åˆ—æ—¶ï¼Œmdl è¯»é”å…ˆæ‰§è¡Œï¼Œå…·ä½“æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š\nA: select * from t1\nB: select * from t1\nC: alter table add c1 bool\nD: select * from t1\nA -> B -> C -> D\n\nA: select * from t1\nB: select * from t1\nC: alter table drop column c1\nD: select * from t1\nA -> B -> D -> C","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1592131012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1502074,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKb5BzdGZbSYHxq88kicdDtBh0yBtJpDAD81wruIsTsLdBysDZztrm8tYb4mBYvAI1ZE4lorKuvmgw/132","nickname":"java_lunsong","note":"","ucode":"180EEE6C8BCAA8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1200769,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/81/745475e9.jpg","nickname":"colben","note":"","ucode":"5E5DBA48578E96","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325849,"discussion_content":"æˆ‘ä¹Ÿæ˜¯å’Œä½ ä¸€æ ·çš„ç»“æœã€‚ä¼°è®¡æ˜¯8.0åˆä¼˜åŒ–äº†å•¥å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605443735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282966,"ip_address":""},"score":325849,"extra":""},{"author":{"id":2873900,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/da/2c/cdd92f3f.jpg","nickname":"wÃ¡ng","note":"","ucode":"9BFEA73AD7680D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1200769,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/81/745475e9.jpg","nickname":"colben","note":"","ucode":"5E5DBA48578E96","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558206,"discussion_content":"8.0 ä¼˜åŒ–äº†éƒ¨åˆ†çš„DDLï¼Œé‡‡ç”¨çš„å·²ç»ä¸æ˜¯online DDLäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648134026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282966,"ip_address":""},"score":558206,"extra":""}]},{"author":{"id":1036353,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d0/41/52be7dad.jpg","nickname":"é˜³","note":"","ucode":"44B06F129A2C65","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29319,"discussion_content":"æˆ‘åœ¨5.6.35-logä¸­æµ‹è¯•çš„ï¼Œè·å–MDLå†™é”çš„è¯­å¥æ˜¯ADD COLUMNçš„è¯ï¼Œå†™é”çš„è·å–ä»ä¼šè¢«åæ¥çš„äº‹åŠ¡ä¸­çš„è¯»é”é˜»å¡ã€‚è¯­å¥æ˜¯MODIFY COLUMNçš„è¯ï¼Œå†™é”èƒ½å…ˆäºåæ¥äº‹åŠ¡ä¸­çš„è¯»é”è·å–ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1570761589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397315,"avatar":"https://static001.geekbang.org/account/avatar/00/15/52/43/25209d6c.jpg","nickname":"æ— è¾¹ä¸é›¨","note":"","ucode":"B2AD1EAB9E9308","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":23560,"discussion_content":"å¤§ä½¬,ä½ ç°åœ¨æœ‰ç­”æ¡ˆäº†ä¹ˆ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1569833918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1303963,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e5/9b/db9a6a8c.jpg","nickname":"test","note":"","ucode":"2AEB293A81E969","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309336,"discussion_content":"ç”³è¯·MDLé”çš„æ“ä½œä¼šå½¢æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—ä¸­å†™é”è·å–ä¼˜å…ˆçº§é«˜äºè¯»é”ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601260549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1967080,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoeZJ1aW5LkAlaKqXEpvrnSk0ibUcLFjz8pDmWpuvm8RD3e79icAALsEurUwXOs0UjVQRxuImxCsHQQ/132","nickname":"donkey703","note":"","ucode":"A48EA2D28A7557","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":236397,"discussion_content":"è¯„è®ºæµ‹è¯•çš„æœ‰é—®é¢˜ï¼ŒSessionA åŠ beginï¼Œä½†æ˜¯SessionBï¼ŒSessionCï¼ŒSessionDä¸ç”¨åŠ beginï¼Œæµ‹è¯•å‡ºæ¥å³ä¸ºè€å¸ˆç»™çš„ç­”æ¡ˆã€‚å¦‚æœæŒ‰ç…§ä½ è¿™æ ·Session Aã€Bã€Déƒ½åŠ äº†beginï¼Œåˆ™ä¸ºä½ è¿™ç§åœºæ™¯ç­”æ¡ˆã€‚      é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™å’Œäº‹åŠ¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿä»¥åŠæˆ‘ä¸€ç›´ä¸æ˜ç™½SessionCæ˜æ˜æ²¡æœ‰å»å æœ‰åˆ°é”ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šå µä½SessionDï¼Ÿè€å¸ˆè¯´æœ‰ä¸ªé˜Ÿåˆ—æ‹¦ç€ï¼Œem......å¥½åƒèƒ½è§£é‡Šé€šï¼Œä½†æŒºè¿·ç³Šçš„ï¼Œè¿™ä¸å°±æ„å‘³ç€æˆ‘æ‰€æœ‰çš„connectionè¿›æ¥éƒ½æ˜¯ä¸²è¡Œæ¥æ‰§è¡Œçš„äº†ï¼Ÿï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587090963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2062940,"avatar":"","nickname":"Geek_08bc8b","note":"","ucode":"DFB529DD8650CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1967080,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoeZJ1aW5LkAlaKqXEpvrnSk0ibUcLFjz8pDmWpuvm8RD3e79icAALsEurUwXOs0UjVQRxuImxCsHQQ/132","nickname":"donkey703","note":"","ucode":"A48EA2D28A7557","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306931,"discussion_content":"è°¢è°¢è¿™ä½å…„å¼Ÿæå‡ºäº†è€å¸ˆå’ŒåŒå­¦ä¾‹å­çš„ä¸åŒä¹‹å¤„ï¼Œæˆ‘çš„ç†è§£ï¼šæ­£æ˜¯å› ä¸ºä¸€ä¸ªå°ç»†èŠ‚æ‰ä¼šå‡ºç°ä¸¤ç§æƒ…å†µã€‚\n\nè€å¸ˆçš„ä¾‹å­ï¼š\nç”±äºSessionAæ²¡æœ‰commitï¼ŒSessionCä¼šåœ¨è·å–MDLå†™é”æ—¶å°±è¢«é˜»å¡ï¼ˆonline ddlçš„ç¬¬ä¸€æ­¥ï¼‰ï¼Œæ‰€ä»¥SessionDä¹Ÿä¼šé”åœ¨ç¬¬ä¸€æ­¥ï¼Œselectä¹‹å‰å°±è¢«é”äº†ã€‚\nåŒå­¦ç»™çš„ä¾‹å­ï¼š\nSessionA/Bæ˜¾ç¤ºçš„commitäº†ï¼Œæ‰€ä»¥SessionCä¼šè·å–MDLå†™é”ï¼ˆåœ¨online ddlçš„è¿‡ç¨‹ä¸­é€€åŒ–æˆäº†è¯»é”ï¼‰ï¼Œæ­¤æ—¶SessionDæ‹¿åˆ°äº†è¯»é”ï¼ˆå¹¶ä¸”å¯ä»¥æ‰§è¡Œselectï¼‰ï¼Œä½†æ˜¯ç”±äºCä¼šåœ¨å®ŒæˆçœŸæ­£çš„DDLåç”³è¯·å†™é”ï¼Œè‹¥Dæ²¡æœ‰commitï¼ŒCå°±ä¼šè¢«é˜»å¡ï¼ŒDæäº¤äº†ï¼ŒCå°±å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚\n\nå‚è€ƒï¼šhttps://blog.csdn.net/q2878948/article/details/96430129\nå’Œè€å¸ˆå›å¤çš„Online DDLè¿‡ç¨‹","likes_number":23,"is_delete":false,"is_hidden":false,"ctime":1600420834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":236397,"ip_address":""},"score":306931,"extra":""},{"author":{"id":1303963,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e5/9b/db9a6a8c.jpg","nickname":"test","note":"","ucode":"2AEB293A81E969","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2062940,"avatar":"","nickname":"Geek_08bc8b","note":"","ucode":"DFB529DD8650CC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309335,"discussion_content":"è§£æƒ‘äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601260527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":306931,"ip_address":""},"score":309335,"extra":""}]},{"author":{"id":1143234,"avatar":"","nickname":"åˆ˜ç‘","note":"","ucode":"7E712BC281A8A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217445,"discussion_content":"è°èƒ½è§£é‡Šä¸€ä¸‹è¿™ä¸ªé—®é¢˜å“ˆï¼Œè€å¸ˆæ ¹æœ¬å°±ä¸å›å¤å•Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585560423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1464006,"avatar":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","nickname":"æ–æ³¢é‚£å¥‘","note":"","ucode":"85E2EBC01392B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38090,"discussion_content":"æˆ‘è§‰å¾—åº”è¯¥æ˜¯éšæœºå–çš„ï¼ˆæˆ–è€…è‡ªå·±æœ‰æŸç§ä¼˜åŒ–æœºåˆ¶ å…ˆæ‹¿äº†è¯»é”ï¼‰åªæ˜¯ç³»ç»Ÿæ¯æ¬¡éƒ½å…ˆæ‹¿åˆ°mdlè¯»é” ä¹Ÿå°±æ˜¯è¯´åœ¨å‘ç”Ÿmdlå†™é”æ—¶é˜»å¡ ç„¶åa b commitå c dçš„å†™é”å’Œè¯»é”åŒæ—¶ç«äº‰ è¯»é”ç«äº‰åˆ°äº† ä½ å¯èƒ½è§‰å¾—è¿™ä¸ªæ˜¯æ¦‚ç‡é—®é¢˜ ä¸å¯èƒ½æ¯æ¬¡éƒ½ç«äº‰åˆ° è¿™ä¹ˆå¤šæ¬¡å®éªŒæ¯æ¬¡éƒ½æ˜¯dæ‹¿åˆ° ä½ è¿™ä¸ªé—®é¢˜è®©æˆ‘æƒ³èµ·æˆ‘ä¹‹å‰åšçš„ä¸€ä¸ªå®éªŒ å°±æ˜¯ä¸¤ä¸ªçº¿ç¨‹æ­»é”ï¼ˆå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹å…ˆé”aåœ¨é”bå¦ä¸€ä¸ªçº¿ç¨‹å…ˆé”båœ¨é”aï¼‰åœ¨jdk11ä¸Šæ€ä¹ˆè·‘éƒ½ä¸å‘ç”Ÿæ­»é”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571723990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1240510,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/UXCLpCDP4o2LFpLIrEup2arUOHzwhPY3X8nOoNSRwS6NgNiaQEduN8exnEDicc8goGCARIthOzwEpGATpiadzv3oQ/132","nickname":"formain","note":"","ucode":"D0B7816D6A40E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8401,"discussion_content":"æˆ‘åœ¨mysql 5.7.20æµ‹è¯•äº†ä¹Ÿæ˜¯è·Ÿè¿™ä½åŒå­¦ä¸€æ ·çš„ç»“æœï¼ŒåŒé—®session Dæ¯”seesion Cå…ˆæ‰§è¡Œï¼Œä½†æ˜¯seesion Dæ‹¿çš„æ˜¯è¯»é”å•Šï¼Œä¸ºä»€ä¹ˆä¼šè¢«é˜»å¡åœ¨åŒæ ·æ˜¯æ‹¿è¯»é”çš„seesion A å’Œ seesion Bä¹‹åå‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567996712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1240510,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/UXCLpCDP4o2LFpLIrEup2arUOHzwhPY3X8nOoNSRwS6NgNiaQEduN8exnEDicc8goGCARIthOzwEpGATpiadzv3oQ/132","nickname":"formain","note":"","ucode":"D0B7816D6A40E5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138251,"discussion_content":"å› ä¸ºSessionCè‚¯å®šæ˜¯åœ¨SessionDä¹‹å‰æ‰§è¡Œè¿‡ï¼ŒMDLå†™é”çš„æ—¶å€™ï¼Œè¯»ä¸å†™éƒ½æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥ Cé‡Šæ”¾åï¼Œæ‰æ‰§è¡Œçš„Dè¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579230830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":8401,"ip_address":""},"score":138251,"extra":""}]},{"author":{"id":1204525,"avatar":"https://static001.geekbang.org/account/avatar/00/12/61/2d/5ca0a3da.jpg","nickname":"å¸¸æ–‡é¾™","note":"","ucode":"4A126159D24766","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8197,"discussion_content":"åŒæ ·çš„ç–‘é—®  è¿™å’Œé€šå¸¸ç†è§£çš„è¯»å†™é”ç°è±¡ä¸ä¸€è‡´å•Š   session Dæ‹¿è¯»é”ä¸åº”è¯¥é˜»å¡å•Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567826233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1204525,"avatar":"https://static001.geekbang.org/account/avatar/00/12/61/2d/5ca0a3da.jpg","nickname":"å¸¸æ–‡é¾™","note":"","ucode":"4A126159D24766","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138253,"discussion_content":"å› ä¸ºSessionCè‚¯å®šæ˜¯åœ¨SessionDä¹‹å‰æ‰§è¡Œè¿‡ï¼ŒMDLå†™é”çš„æ—¶å€™ï¼Œè¯»ä¸å†™éƒ½æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥ Cé‡Šæ”¾åï¼Œæ‰æ‰§è¡Œçš„Dè¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579230855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":8197,"ip_address":""},"score":138253,"extra":""},{"author":{"id":1433753,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIkXblsn9pcgvEwcFyfzE6gxlzhbJMkgBaRvq35xB6Hkicjkk5vXLnu5buCCvuoZ3JJzibD54v7rTNQ/132","nickname":"Geek_b6d89a","note":"","ucode":"E5A637B740D5E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1204525,"avatar":"https://static001.geekbang.org/account/avatar/00/12/61/2d/5ca0a3da.jpg","nickname":"å¸¸æ–‡é¾™","note":"","ucode":"4A126159D24766","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267911,"discussion_content":"å†™é”æƒé‡é«˜ï¼Œä½†æ˜¯è¢«Aã€Bé˜»å¡ï¼ŒDè¯»é”å†å†™é”åé¢æ’é˜Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589709760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":8197,"ip_address":""},"score":267911,"extra":""}]},{"author":{"id":1023928,"avatar":"","nickname":"é©¬å¤§å¸…","note":"","ucode":"4DD1FD6D3FA05B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7048,"discussion_content":"è¿™ä¸ªçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿæ²¡æœ‰ç»“æœäº†å˜›ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567322624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370439,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619412764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2548121,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e1/99/827921d9.jpg","nickname":"Z","note":"","ucode":"29C7423250EF90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367019,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618236860,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2375320,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/WUndm7hBa1G3DB9TmNRVVqtriaCwRhI4tZ9MN60iaGMwuksOCQNpvBZep01ic6KNickA2iaiaJria6P0qhRpppnpXO8Iw/132","nickname":"Lys","note":"","ucode":"B97FC63FED8B29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365309,"discussion_content":"æ¨èä¸¤ç¯‡æ–‡ç« ï¼Œå¾ˆå¥½çš„è§£é‡Šäº†è¯¥é—®é¢˜ï¼Œç®€å•è¯´å°±ç®—online DDLå¯¼è‡´çš„ã€‚\nhttps://blog.csdn.net/finalkof1983/article/details/88063328\nhttps://blog.csdn.net/finalkof1983/article/details/88247329?spm=1001.2014.3001.5501","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617767888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1204316,"avatar":"https://static001.geekbang.org/account/avatar/00/12/60/5c/8fb0bf5a.jpg","nickname":"å¯’æ¾ˆ","note":"","ucode":"26EF6F257586B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2375320,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/WUndm7hBa1G3DB9TmNRVVqtriaCwRhI4tZ9MN60iaGMwuksOCQNpvBZep01ic6KNickA2iaiaJria6P0qhRpppnpXO8Iw/132","nickname":"Lys","note":"","ucode":"B97FC63FED8B29","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408732,"discussion_content":"åˆ†æçš„æŒºå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635311390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":365309,"ip_address":""},"score":408732,"extra":""}]},{"author":{"id":2351720,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e2/68/ce547a12.jpg","nickname":"zjm1314","note":"","ucode":"63B0EAB7045054","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340398,"discussion_content":"å§æ§½ï¼Œè¿™ä¹ˆå¥½çš„é—®é¢˜ï¼Œä¸å¥‡å¤§ä½¬èµ¶ç´§å›å¤å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609994689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1780698,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2b/da/fa630993.jpg","nickname":"æ—§æ—¶å…‰ã€‚","note":"","ucode":"E9612FD41567BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333022,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607417835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1926366,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erwIgbTd3oy4GzkdCUBmz8lHGIIWBwoSIfibgQzwDlQuvTrLlqwTh7p99NBJIsu98ziaYoroQCSENwA/132","nickname":"Celine","note":"","ucode":"63D5F2E8FB2130","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299737,"discussion_content":"è¯»å†™é”éƒ½æ˜¯è‡ªæ—‹é”å§ï¼Œä¸€å¼€å§‹Dæ˜¯ç”±äºCé˜»å¡ä¹Ÿblockäº†ï¼Œå½“A,B commité‡Šæ”¾äº†ä¹‹åï¼ŒCå’ŒDæ˜¯ä¸æ˜¯ä¼šå‘ç”Ÿå…¬å¹³ç«äº‰ï¼Œæœ‰æ—¶å€™Cç«äº‰æˆåŠŸäº†ï¼Œæœ‰æ—¶å€™Dç«äº‰æˆåŠŸäº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597803073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1338848,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/e0/06ea47d6.jpg","nickname":"ç²å„¿","note":"","ucode":"4D3429A9506DD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292252,"discussion_content":"æŠŠè¿™äº›è¯­å¥æ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œæµ‹è¯•çš„å’Œè€å¸ˆè¯´çš„ç»“æœæ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595156089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289754,"discussion_content":"ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·æµ‹è¯•ä¹Ÿæ˜¯è¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594203647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1314724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/a4/0b49469f.jpg","nickname":"æœ¨å­00","note":"","ucode":"8F78CA722EB29B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274961,"discussion_content":"çŸ¥å…¶ç„¶ï¼Œä½†ä¸çŸ¥æ‰€ä»¥ç„¶ã€‚ç»™æˆ‘çš„æ„Ÿè§‰ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590637139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1331888,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/S3TfXesBIaWokWNRkSzzz20AHq4Qjb7GMttOp006STsn72OiadZqUVINhiakibkUyZXdOTXhHctPn8KIwUgwyPhpA/132","nickname":"Jerry","note":"","ucode":"AF70AA2B463B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":245950,"discussion_content":"ä¸¤å°mysql5.7.28ï¼Œéƒ½æ˜¯REPEATABLE-READï¼Œä¸€å°æ€»æ˜¯å’Œè¿™ä½åŒå­¦çš„ç»“æœä¸€æ ·ï¼Œå¦ä¸€å°æ€»æ˜¯å’Œè€å¸ˆè¯´çš„ä¸€æ ·ï¼Œè€Œä¸”æˆ‘éƒ½æ˜¯ç›´æ¥åœ¨æœåŠ¡å™¨æœ¬æœºä¸Šæ“ä½œçš„ï¼Œè¿™æ˜¯å’‹å›äº‹ï¼Œå®Œå…¨æ‡µäº†ï¼è¿˜æœ›æœ‰äººè§£ç­”ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587714669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2069361,"avatar":"","nickname":"æ—é™","note":"","ucode":"492618873E9B1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1331888,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/S3TfXesBIaWokWNRkSzzz20AHq4Qjb7GMttOp006STsn72OiadZqUVINhiakibkUyZXdOTXhHctPn8KIwUgwyPhpA/132","nickname":"Jerry","note":"","ucode":"AF70AA2B463B8C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326092,"discussion_content":"Percona Server 5.7.29 REPEATABLE-READ æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡å™¨ä¸Šæ‰§è¡Œtonyçš„ä¾‹å­ï¼Œç¬¬ä¸€æ¬¡Dä¼šè¢«Cé˜»å¡ï¼Œä½†æ˜¯Aæäº¤åC/Déƒ½é¡ºåˆ©æ‰§è¡Œï¼›ç¬¬2æ¬¡Då®Œå…¨æ²¡æœ‰è¢«Cé˜»å¡.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605519813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":245950,"ip_address":""},"score":326092,"extra":""}]},{"author":{"id":1518793,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2c/c9/462afe28.jpg","nickname":"å°ç™½","note":"","ucode":"11FC209D9ED65F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217100,"discussion_content":"è¿™ä¸ªè¡¨é”é˜Ÿåˆ—çš„æ‰§è¡Œé¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿæˆ‘æ‰¾ä¸åˆ°ç­”æ¡ˆï¼Œæœ‰ç­”æ¡ˆçš„åŒå­¦éº»çƒ¦åˆ°æ—¶å€™å›å¤ä¸‹æˆ‘ğŸ˜­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585497882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1737456,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bGrI3qhTPVjkD2uONwGtEMaHzVGmRI7huFC2C88zJyMvzTWT7MHVcy0ic5gAoho7CBVjAYsLof3vvwXgrL654fA/132","nickname":"Geek_ç¬‘","note":"","ucode":"A449E2141B7989","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":139866,"discussion_content":"Metadata Lock Acquisition\nIf there are multiple waiters for a given lock, the highest-priority lock request is satisfied first, with an exception related to the max_write_lock_count system variable. Write lock requests have higher priority than read lock requests. However, if max_write_lock_count is set to some low value (say, 10), read lock requests may be preferred over pending write lock requests if the read lock requests have already been passed over in favor of 10 write lock requests. Normally this behavior does not occur because max_write_lock_count by default has a very large value. \nhttps://dev.mysql.com/doc/refman/8.0/en/metadata-locking.html\nå®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·å†™çš„å•Šï¼Œå†™é”ä¸€èˆ¬æ¯”è¯»é”æœ‰æ›´é«˜ä¼˜å…ˆçº§ï¼Œè°èƒ½è§£é‡Šä¸‹è¿™ä¸ªæœºåˆ¶ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579323730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1737456,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bGrI3qhTPVjkD2uONwGtEMaHzVGmRI7huFC2C88zJyMvzTWT7MHVcy0ic5gAoho7CBVjAYsLof3vvwXgrL654fA/132","nickname":"Geek_ç¬‘","note":"","ucode":"A449E2141B7989","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":139836,"discussion_content":"åŒæ ·çš„ç–‘é—®ï¼Ÿæ±‚è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579321117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066251,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/0Qp9pxHBvgdZAveKzsvUFFUicCJfe7ONzhC7jSNFQDNFvg0jRMXuqqZOdxG1qKosylUYrpIHUR2Q76w5m4HtVkg/132","nickname":"Aaron","note":"","ucode":"B0C504A76297C7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":132726,"discussion_content":"æˆ‘çš„å®éªŒä¹Ÿæ˜¯å’Œè¯„è®ºä¸­ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578924144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42529,"discussion_content":"æˆ‘çš„ç‰ˆæœ¬æ˜¯ 5.7.18 ï¼Œæµ‹è¯•ç»“æœæ˜¯éšæœºçš„ï¼Œæµ‹è¯•äº†2æ¬¡ï¼Œä¸€æ¬¡å’Œè€å¸ˆæ–‡ä¸­çš„ä¸€æ ·ï¼Œä¸€æ¬¡å’Œè¯„è®ºä¸­çš„ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572689415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1618978,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b4/22/f2228dd0.jpg","nickname":"rm-rf","note":"","ucode":"E8825DBEA54506","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37976,"discussion_content":"mysql 8.0ä¸Šå®éªŒï¼Œå‘ç°å¹¶æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼ŒsessionAï¼ŒsessionBååªè¦commitäº†ï¼ŒsessionCå¯ä»¥è·å¾—å†™é”ï¼ˆæ‰§è¡Œçš„æ˜¯å¢åŠ åˆ—çš„è¯­å¥ï¼‰ï¼ŒsessionDæŸ¥å‡ºæ¥æ˜¯å¢åŠ åˆ—åçš„è¡¨ï¼Œå¦‚æœSessionAï¼ŒBæ²¡æœ‰commitï¼Œå°±æ˜¯Cï¼ŒDéƒ½è¢«é˜»å¡äº†ã€‚æ„Ÿè§‰å°±æ˜¯æŒ‰æ—¶é—´é¡ºåºè·å¾—çš„é‚£æ ·ï¼Œåº”è¯¥æ˜¯æ€•ç”³è¯·å†™é”çš„çº¿ç¨‹â€œé¥¿æ­»â€å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571707781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1194858,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/6a/80d9c545.jpg","nickname":"RD","note":"","ucode":"E3947B6E1681AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1618978,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b4/22/f2228dd0.jpg","nickname":"rm-rf","note":"","ucode":"E8825DBEA54506","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":96621,"discussion_content":"8.0 docker å®¢æˆ·ç«¯æµ‹è¯•äº†å››æ¬¡ï¼Œç¡®å®æœ‰ä¸€æ¬¡æ˜¯è¯„è®ºä¸­çš„çŠ¶æ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577081029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":37976,"ip_address":""},"score":96621,"extra":""}]},{"author":{"id":1204947,"avatar":"https://static001.geekbang.org/account/avatar/00/12/62/d3/663de972.jpg","nickname":"æ‡µé€¼çŒ´","note":"","ucode":"BDC748A96AC316","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8103,"discussion_content":"è€å¸ˆæ”¶é’±è·‘è·¯äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567779575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1314724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/a4/0b49469f.jpg","nickname":"æœ¨å­00","note":"","ucode":"8F78CA722EB29B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1204947,"avatar":"https://static001.geekbang.org/account/avatar/00/12/62/d3/663de972.jpg","nickname":"æ‡µé€¼çŒ´","note":"","ucode":"BDC748A96AC316","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274959,"discussion_content":"å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590637083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":8103,"ip_address":""},"score":274959,"extra":""}]},{"author":{"id":1554570,"avatar":"https://static001.geekbang.org/account/avatar/00/17/b8/8a/7367a69e.jpg","nickname":"å˜‰å…´","note":"","ucode":"6997E7A3E25EE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5322,"discussion_content":"mysql 5.7 ä¸€æ ·ç°è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566178562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1423473,"avatar":"https://static001.geekbang.org/account/avatar/00/15/b8/71/8b17ab68.jpg","nickname":"å¾®ãƒ½(*^*)ä¿¡","note":"","ucode":"60AF816DCCC434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3937,"discussion_content":"æˆ‘çš„æ˜¯mysql 5.6.42ï¼Œï¼Œä¹Ÿæ˜¯å’Œè¿™ä½åŒå­¦ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564993633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007267,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/a3/9670d4b4.jpg","nickname":"Spring","note":"","ucode":"80594B4B056A53","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1355,"discussion_content":"åœ¨5.7ç‰ˆæœ¬æµ‹è¯•ä¹Ÿæ˜¯ä¸€æ ·çš„ç°è±¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562575128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1306092,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ61zTDmLk7IhLJn6seBPOwsVaKIWUWaxk5YmsdYBZUOYMQCsyl9iaQVSg9U5qJVLLOCFUoLUuYnRA/132","nickname":"fjpcode","note":"","ucode":"C32C5E3ECB9A90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":777,"discussion_content":"åœ¨dockerhubä¸Šæ‹‰å–çš„ä¸€ä¸ªmysqlé•œåƒï¼Œmysqlç‰ˆæœ¬5.7.5-m15ï¼Œ å’Œè¿™ä½åŒå­¦è¯•éªŒå‡ºçš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562055403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43455,"user_name":"Aurora","can_delete":false,"product_type":"c1","uid":1302157,"ip_address":"","ucode":"84CB75BC2D7680","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/8d/99536c5b.jpg","comment_is_top":false,"comment_ctime":1543228694,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"267831201046","product_id":100020801,"comment_content":"å¦‚æœmysqldump å¤‡ä»½çš„æ˜¯æ•´ä¸ªschemaï¼ŒæŸä¸ªå°è¡¨t1åªæ˜¯è¯¥schemaä¸Šå…¶ä¸­æœ‰ä¸€å¼ è¡¨<br>æƒ…å†µ1ï¼š<br>masterä¸Šå¯¹å°è¡¨t1çš„DDLä¼ è¾“åˆ°slaveå»åº”ç”¨çš„æ—¶åˆ»ï¼Œmysqldumpå·²ç»å¤‡ä»½å®Œäº†t1è¡¨çš„æ•°æ®ï¼Œæ­¤æ—¶slave åŒæ­¥æ­£å¸¸ï¼Œä¸ä¼šæœ‰é—®é¢˜ã€‚<br><br>æƒ…å†µ2ï¼š<br>masterä¸Šå¯¹å°è¡¨t1çš„DDLä¼ è¾“åˆ°slaveå»åº”ç”¨çš„æ—¶åˆ»ï¼Œmysqldumpæ­£åœ¨å¤‡ä»½t1è¡¨çš„æ•°æ®,æ­¤æ—¶ä¼šå‘ç”ŸMDL é”ï¼Œä»åº“ä¸Št1è¡¨çš„æ‰€æœ‰æ“ä½œéƒ½ä¼šHang ä½ã€‚<br><br>æƒ…å†µ3ï¼š<br>master ä¸Šå¯¹å°è¡¨t1çš„DDLä¼ è¾“åˆ°slaveå»åº”ç”¨çš„æ—¶åˆ»ï¼Œmysqldump è¿˜æ²¡å¯¹t1è¡¨è¿›è¡Œå¤‡ä»½ï¼Œè¯¥DDLä¼šåœ¨slaveçš„t1è¡¨åº”ç”¨æˆåŠŸï¼Œä½†æ˜¯å½“å¯¼å‡ºåˆ°t1è¡¨çš„æ—¶å€™ä¼šæŠ¥â€œERROR 1412 (HY000): Table definition has changed, please retry transactionâ€ é”™è¯¯ï¼Œå¯¼è‡´å¯¼å‡ºå¤±è´¥ï¼<br>","like_count":62},{"had_liked":false,"id":57129,"user_name":"æŸ³æ ‘","can_delete":false,"product_type":"c1","uid":1025223,"ip_address":"","ucode":"F03249D4534BCB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/c7/d1ee69c6.jpg","comment_is_top":false,"comment_ctime":1546655987,"is_pvip":false,"replies":[{"id":"20633","content":"å¦‚æœè¯´è®¾è®¡åˆè¡·ï¼Œæ˜¯ä¸ºäº†é˜²é¥¿æ­»å§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546690331,"ip_address":"","comment_id":57129,"utype":1}],"discussion_count":6,"race_medal":0,"score":"203410118899","product_id":100020801,"comment_content":"æ—¢ç„¶session C blockedï¼Œæ‹¿ä¸åˆ°å†™é”ï¼Œé‚£ä¹ˆsession Dä¸ºä»€ä¹ˆä¼šè¢«blockedå‘¢ï¼Ÿ","like_count":47,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435418,"discussion_content":"å¦‚æœè¯´è®¾è®¡åˆè¡·ï¼Œæ˜¯ä¸ºäº†é˜²é¥¿æ­»å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546690331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2036333,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/6ZM5RHVBe8pVGoibpPHVM5TZTbqS4u4ckiaHoItk1LIhTfCEYbH7LYiaWJDvTiaga34MQQ3xicIZ0vsAkoSKRvY8F3A/132","nickname":"Geek_b4bb35","note":"","ucode":"257EE15A137445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285368,"discussion_content":"è€å¸ˆè¿™æ ·ä¸€è¯´å°±æ¸…æ™°å¤šäº†ï¼Œä¸ç„¶å¦‚æœåé¢è¿˜æœ‰å¾ˆå¤šæŸ¥è¯¢è¯·æ±‚çš„è¯ï¼Œsession cå°±å¯èƒ½å¾ˆä¹…éƒ½æ‹¿ä¸åˆ°å†™é”äº†","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1592816797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2351720,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e2/68/ce547a12.jpg","nickname":"zjm1314","note":"","ucode":"63B0EAB7045054","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2036333,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/6ZM5RHVBe8pVGoibpPHVM5TZTbqS4u4ckiaHoItk1LIhTfCEYbH7LYiaWJDvTiaga34MQQ3xicIZ0vsAkoSKRvY8F3A/132","nickname":"Geek_b4bb35","note":"","ucode":"257EE15A137445","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340399,"discussion_content":"çœ‹äº†å‰é¢çš„è¯„è®ºï¼Œå†™é”çš„ä¼˜å…ˆçº§æ›´é«˜","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1609994779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":285368,"ip_address":""},"score":340399,"extra":""},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2351720,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e2/68/ce547a12.jpg","nickname":"zjm1314","note":"","ucode":"63B0EAB7045054","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397001,"discussion_content":"Cçš„MDLå†™é”è¿˜æ²¡æ‹¿åˆ°ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥Dçš„è¯»é”å’ŒAçš„è¯»é”æ˜¯å¯ä»¥å…¼å®¹çš„ï¼›å¦‚æœæŒ‰ç…§å†™é”ä¼˜å…ˆçº§æ›´é«˜æ˜¯è¯´å¾—è¿‡å»ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632539343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340399,"ip_address":""},"score":397001,"extra":""},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2351720,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e2/68/ce547a12.jpg","nickname":"zjm1314","note":"","ucode":"63B0EAB7045054","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397002,"discussion_content":"â€œè¿™ä¸ªä¸æ˜¯è¯»å†™é”ï¼Œæ˜¯é”é˜Ÿåˆ—ï¼Œä¸€è¿›å»å°±å¼€å§‹å½±å“åé¢çš„â€ è€å¸ˆçš„å›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632539400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340399,"ip_address":""},"score":397002,"extra":""}]},{"author":{"id":2760780,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKghO4kJwQ5ccuBA2Yox1WlZmq0JUICpNAsgYlOHX0wHGv48xVRKSvF9a6Eic5l2UOjFjnvTnsibibiaw/132","nickname":"Geek_94045a","note":"","ucode":"B8F23BA9D1411B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541675,"discussion_content":"è¯»å†™é”å¿…é¡»æœ‰ä¸ªå…ˆæ¥ååˆ°çš„é˜Ÿåˆ—çš„æ¦‚å¿µ ä¸ç„¶å†™é”æœ‰å¯èƒ½ä¸€ç›´æ‹¿ä¸åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640514512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43270,"user_name":"å€ªå¤§äºº","can_delete":false,"product_type":"c1","uid":1193052,"ip_address":"","ucode":"4798D69F3E86FB","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","comment_is_top":false,"comment_ctime":1543202457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"177636861593","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ï¼š<br>ç”±äºå…ˆç”¨â€“single-transactionåšå¤‡ä»½ï¼Œæ‰€ä»¥å¤‡ä»½çº¿ç¨‹ä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡è·å–MDLè¯»é”ï¼Œæ–‡ä¸­ä¹Ÿè¯´äº†â€œMDL ä¼šç›´åˆ°äº‹åŠ¡æäº¤æ‰é‡Šæ”¾â€ï¼Œæ‰€ä»¥è¦ä¸€ç›´ç­‰åˆ°å¤‡ä»½å®Œæˆä¸»åº“æ¥çš„DDLæ‰ä¼šåœ¨ä»åº“æ‰§è¡Œç”Ÿæ•ˆï¼Œä¸”å¤‡ä»½çš„æ•°æ®é‡Œå¹¶ä¸ä¼šæœ‰æ–°å¢çš„è¿™ä¸ªåˆ—ã€‚<br><br>å†è¡¥å……ä¸‹ï¼Œç”±äºä¸»åº“æ¥çš„DDLä¼šç­‰å¾…MDLå†™é”ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ä¹‹åä»åº“ä¸Šçš„è¯»å†™è¯·æ±‚éƒ½é˜»å¡ï¼Œç›¸å½“ä¸æ–‡ä¸­sessionCå’ŒsessionDã€‚","like_count":41},{"had_liked":false,"id":43567,"user_name":"æ ‹èƒ½","can_delete":false,"product_type":"c1","uid":1006849,"ip_address":"","ucode":"8BD9C939D3E8E1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/01/9cd84003.jpg","comment_is_top":false,"comment_ctime":1543241021,"is_pvip":false,"discussion_count":10,"race_medal":0,"score":"169046965565","product_id":100020801,"comment_content":"æ²¡ææ‡‚cçš„ç´¢å¼•æ ‘ä¸ºä»€ä¹ˆå’Œcaæ˜¯ä¸€æ ·çš„. cç´¢å¼•æ ‘ä¸­cæœ‰åºï¼Œ(a,b)éšæ„åºçš„å‘€ï¼Ÿè¿™èƒ½ä»£è¡¨cä¸caç´¢å¼•æ ‘ä¸€è‡´å—ï¼Ÿ","like_count":39,"discussions":[{"author":{"id":1116935,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0b/07/9b0446a7.jpg","nickname":"é”‹é£å°","note":"","ucode":"8E1528DF975D82","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2585,"discussion_content":"åº”è¯¥æ˜¯abæ˜¯è”åˆä¸»é”®å®ƒä»¬æ˜¯æœ‰åºçš„ï¼Œåœ¨å‰é¢è®²è¿‡éä¸»é”®ç´¢å¼•é‡Œé¢æ”¾çš„æ˜¯ä¸»é”®è¦å›è¡¨å»æŸ¥æ‰è¡Œï¼Œæ‰€ä»¥a,bä¹Ÿæ˜¯æœ‰åºçš„c-a-b,å¦‚æœè”åˆç´¢å¼•æ˜¯baçš„è¯ç»“æœå°±åº”è¯¥åè¿‡æ¥äº†","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1563778335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1006849,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/01/9cd84003.jpg","nickname":"æ ‹èƒ½","note":"","ucode":"8BD9C939D3E8E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1116935,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0b/07/9b0446a7.jpg","nickname":"é”‹é£å°","note":"","ucode":"8E1528DF975D82","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":95315,"discussion_content":"ç¬¬ä¸€å¥å¯èƒ½å§ã€‚ä½†å¯¹äº â€œåœ¨å‰é¢è®²è¿‡éä¸»é”®ç´¢å¼•é‡Œé¢æ”¾çš„æ˜¯ä¸»é”®è¦å›è¡¨å»æŸ¥æ‰è¡Œ....â€ï¼Œè¿™ä¸€æ®µæˆ‘å°±ä¸èµåŒï¼Œæ ¹æœ¬å°±ä¸éœ€è¦å›è¡¨æŸ¥ã€‚è¦†ç›–ç´¢å¼•äº†è§£ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577019848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2585,"ip_address":""},"score":95315,"extra":""},{"author":{"id":1798068,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6f/b4/d465acef.jpg","nickname":"å•Šå™—ï¼","note":"","ucode":"C911E772E1E800","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1006849,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/01/9cd84003.jpg","nickname":"æ ‹èƒ½","note":"","ucode":"8BD9C939D3E8E1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199163,"discussion_content":"é—®é¢˜æ˜¯æ ¹æœ¬å°±æ²¡è¦†ç›–å‘€ã€‚ã€‚ã€‚ç°åœ¨åªæœ‰c, ab ä¸¤ç§ç´¢å¼• å¯¹äºca è¿™å“ªé‡Œè¦†ç›–äº†? å°±æ˜¯è¦å…ˆcå†ab ä¹Ÿå°±æ˜¯å…ˆéä¸»é”®ç´¢å¼•å†å›è¡¨åˆ°ä¸»é”®ç´¢å¼•","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583564946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":95315,"ip_address":""},"score":199163,"extra":""},{"author":{"id":1007253,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/95/68b69251.jpg","nickname":"å‡Œé£","note":"","ucode":"E675357C22299F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1798068,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6f/b4/d465acef.jpg","nickname":"å•Šå™—ï¼","note":"","ucode":"C911E772E1E800","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298296,"discussion_content":"a,bä¸ºè”åˆä¸»é”®ï¼Œc,aè¿™ä¸ªè”åˆç´¢å¼•å­˜çš„å€¼ä¸ºa,bè”åˆä¸»é”®çš„å€¼ï¼Œæ‰€ä»¥ä½¿ç”¨caæŸ¥è¯¢å¯ä»¥è·å–åˆ°c,a,bä¸‰åˆ—çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦å›è¡¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597238873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":199163,"ip_address":""},"score":298296,"extra":""}]},{"author":{"id":2037576,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/17/48/6ab7ef29.jpg","nickname":"å…»çŒªåœºè€æ¿","note":"","ucode":"7974373F55AF87","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311794,"discussion_content":"B+æ ‘çš„å¶å­èŠ‚ç‚¹æŒ‡å‘ä¸€ä¸ªInnoDBæ•°æ®é¡µï¼Œæ•°æ®é¡µé‡Œè¾¹ä¼šæœ‰å¤šè¡Œæ•°æ®ï¼Œå¤šè¡Œæ•°æ®æ˜¯ä»¥æœ‰åºæ•°ç»„çš„å½¢å¼ä¿å­˜çš„ã€‚å›åˆ°ä½ çš„ä¾‹å­ï¼Œcçš„äºŒçº§ç´¢å¼•é‡Œï¼Œï¼ˆa,b)å°±æ˜¯æ‰€è°“çš„è¡Œæ•°æ®ã€‚åœ¨cè¿™ä¸ªäºŒçº§ç´¢å¼•çš„B+æ ‘ä¸Šçš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œï¼ˆaï¼Œbï¼‰æ˜¯ä»¥æœ‰åºæ•°ç»„çš„å½¢å¼æ’å¥½åºçš„ã€‚æ‰€ä»¥cäºŒçº§ç´¢å¼•å’Œcaè”åˆç´¢å¼•ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602491159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2037576,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/17/48/6ab7ef29.jpg","nickname":"å…»çŒªåœºè€æ¿","note":"","ucode":"7974373F55AF87","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":333818,"discussion_content":"ç´¢å¼•Cåœ¨æ’åºæ—¶ï¼Œå¦‚æœCç›¸åŒï¼Œå°±å†æ’(a,b)ï¼Œè¿™å’Œcaç´¢å¼•æ˜¯ä¸€æ ·çš„é¡ºåºï¼Œæ‰€ä»¥ç›¸åŒ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607621511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":311794,"ip_address":""},"score":333818,"extra":""}]},{"author":{"id":1030209,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/41/302f8cd4.jpg","nickname":"çº¤è·¯","note":"","ucode":"CDBAA49ED9D9E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386780,"discussion_content":"æ–‡ä¸­ä»¥åŠè¯„è®ºä¸­æ‰€è¯´çš„â€˜ä¸€æ ·â€™ï¼ŒæŒ‡çš„æ˜¯å†æ’åºçš„åœºæ™¯ä¸‹ï¼Œ æ•ˆæœæ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627795222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1319270,"avatar":"https://static001.geekbang.org/account/avatar/00/14/21/66/f9125286.jpg","nickname":"keshawn","note":"","ucode":"CFCC24F58D1651","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339060,"discussion_content":"abä¸»é”®ç´¢å¼•ä¹Ÿæ˜¯æœ‰åºçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609489310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239163,"discussion_content":"ç´¢å¼•æœ¬èº«æ˜¯æœ‰åºçš„ï¼Œæ ¹æ®ç´¢å¼•å­—æ®µä¾æ¬¡æ’åºã€‚è€Œä¸”æœ‰ä¸ªç´¢å¼•æ‰©å±•åŠŸèƒ½ï¼Œ(c)å’Œ(c,a,b)æ˜¯ç­‰ä»·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587280522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44149,"user_name":"S@Y@M","can_delete":false,"product_type":"c1","uid":1297700,"ip_address":"","ucode":"F5658220C883FA","user_header":"https://static001.geekbang.org/account/avatar/00/13/cd/24/76b56b0b.jpg","comment_is_top":false,"comment_ctime":1543374293,"is_pvip":false,"replies":[{"id":"15735","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543379790,"ip_address":"","comment_id":44149,"utype":1}],"discussion_count":4,"race_medal":0,"score":"147572262357","product_id":100020801,"comment_content":"å…¨å±€é”å’Œè¡¨é”æ˜¯Serverå±‚å®ç°çš„å—","like_count":34,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430652,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543379790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1119778,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/22/2205cf0a.jpg","nickname":"ä½™å‘å","note":"","ucode":"263773616D2C83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216947,"discussion_content":"æ˜¯çš„ï¼Œéƒ½æ˜¯serverå±‚å®ç°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585493022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1519547,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2f/bb/4236d712.jpg","nickname":"itschenxiang","note":"","ucode":"7D90194AC52435","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1119778,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/22/2205cf0a.jpg","nickname":"ä½™å‘å","note":"","ucode":"263773616D2C83","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269216,"discussion_content":"è¯·é—®ä¸€ä¸‹æ–‡ä¸­æåˆ°çš„MDLæ˜¯å¼•æ“å±‚è¿˜æ˜¯Serverå±‚ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589879879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":216947,"ip_address":""},"score":269216,"extra":""},{"author":{"id":1722041,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/46/b9/834d003b.jpg","nickname":"å•¦å•¦å•¦","note":"","ucode":"6A31CDDA7FD3F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1519547,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2f/bb/4236d712.jpg","nickname":"itschenxiang","note":"","ucode":"7D90194AC52435","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276605,"discussion_content":"serverå±‚çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590912434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":269216,"ip_address":""},"score":276605,"extra":""}]}]},{"had_liked":false,"id":43647,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1543275373,"is_pvip":false,"replies":[{"id":"15621","content":"èµäºŒåˆ·æ€åº¦å“ˆ<br><br>å—¯ï¼Œè¿™ä¸ªä¸æ˜¯è¯»å†™é”ï¼Œæ˜¯é”é˜Ÿåˆ—ï¼Œä¸€è¿›å»å°±å¼€å§‹å½±å“åé¢çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543288108,"ip_address":"","comment_id":43647,"utype":1}],"discussion_count":4,"race_medal":0,"score":"134687261549","product_id":100020801,"comment_content":"ä¸€åˆ·çš„æ—¶å€™æ²¡æ³¨æ„ï¼ŒäºŒåˆ·çœ‹åˆ«äººå›å¤æƒ³èµ·è¿™ä¹ˆä¸ªé—®é¢˜ï¼š<br>ä¾‹å­é‡Œä¸ºä»€ä¹ˆsession Cä¹‹åçš„æ‰€æœ‰â€œè¯»â€è¯·æ±‚éƒ½ä¼šè¢«é˜»å¡ï¼Ÿæ¯•ç«Ÿsession Cè¿˜æ²¡åŠ ä¸Šé”ã€‚éš¾é“è¿™é‡Œéšå«æ¶‰åŠåˆ°äº†æ„å‘é”ï¼Ÿ","like_count":31,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430444,"discussion_content":"èµäºŒåˆ·æ€åº¦å“ˆ\n\nå—¯ï¼Œè¿™ä¸ªä¸æ˜¯è¯»å†™é”ï¼Œæ˜¯é”é˜Ÿåˆ—ï¼Œä¸€è¿›å»å°±å¼€å§‹å½±å“åé¢çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543288108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138270,"discussion_content":"session Cæ˜¯æ”¹è¡¨ç»“æ„ï¼Œæ˜¯mdlå†™é”ï¼Œå†™é”æ˜¯è¯»å†™é”ã€ å†™é”äº’æ–¥çš„ï¼ŒåŒä¸€ä¸ªè¡¨ï¼Œæ­¤æ—¶æ˜¯å†™é”ï¼Œå½“ç„¶åé¢çš„è¯»é”ä¹Ÿæ˜¯äº’æ–¥äº†ï¼Œæ‰€ä»¥è¦ç­‰ç€å‰é¢é‡Šæ”¾ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579231883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1194858,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/6a/80d9c545.jpg","nickname":"RD","note":"","ucode":"E3947B6E1681AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319165,"discussion_content":"æ˜¯è¿™æ ·ï¼Œç”±äºè¯»å†™äº’æ–¥ï¼Œæ‰€ä»¥ C æ ¹æœ¬æ‹¿ä¸åˆ°é”ã€‚ä¹‹æ‰€ä»¥ C æ²¡æ‹¿åˆ°é”ï¼ŒD ä¹Ÿä¼šè¢«æŒ‚èµ·ï¼Œå°±æ˜¯å› ä¸ºé”é˜Ÿåˆ—ï¼Œé˜²æ­¢é¥¥é¥¿çš„ã€‚ç±»ä¼¼äºæ“ä½œç³»ç»Ÿçš„ç®¡ç¨‹æ¨¡å‹ã€‚","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1603954964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":138270,"ip_address":""},"score":319165,"extra":""}]},{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333200,"discussion_content":"è¯´æ˜æ˜¯å…¬å¹³é”ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607477662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43246,"user_name":"hhhh","can_delete":false,"product_type":"c1","uid":1256101,"ip_address":"","ucode":"9E87017424B382","user_header":"https://static001.geekbang.org/account/avatar/00/13/2a/a5/625c0a2e.jpg","comment_is_top":false,"comment_ctime":1543200148,"is_pvip":false,"replies":[{"id":"15468","content":"æ˜¯çš„ï¼Œæ–‡ä¸­å†™é”™äº†ã€‚æˆ‘åˆšåˆšä¿®æ”¹ä¸Šå»äº†ã€‚æŠ±æ­‰ã€‚è°¢è°¢æé†’","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543204050,"ip_address":"","comment_id":43246,"utype":1}],"discussion_count":1,"race_medal":0,"score":"130392219028","product_id":100020801,"comment_content":"è¡¨çº§é”çš„ä¾‹å­ä¸­ï¼š<br>lock tables t1 read, t2 write<br>è¯´åˆ°â€œçº¿ç¨‹Aä¸èƒ½è¯»å–T2â€<br>æŸ¥äº†ä¸€ä¸‹MySQL Referenceï¼š<br>WRITE lock:<br>The session that holds the lock can read and write the table.<br>Only the session that holds the lock can access the table. No other session can access it until the lock is released.<br>Lock requests for the table by other sessions block while the WRITE lock is held.<br>ä¹Ÿå°±æ˜¯è¯´è¡¨çº§åˆ«writeé”ï¼Œå¯¹äºæœ¬çº¿ç¨‹æ˜¯å¯è¯»å¯å†™çš„ï¼Œ<br>æ–‡ç« ä¸­è¯´çš„çº¿ç¨‹Aä¸èƒ½è¯»å–T2ï¼Œæˆ‘è¿™é‡Œä¸å¤ªç†è§£","like_count":30,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430337,"discussion_content":"æ˜¯çš„ï¼Œæ–‡ä¸­å†™é”™äº†ã€‚æˆ‘åˆšåˆšä¿®æ”¹ä¸Šå»äº†ã€‚æŠ±æ­‰ã€‚è°¢è°¢æé†’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543204050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43107,"user_name":"åŒ…åŒ…up","can_delete":false,"product_type":"c1","uid":1073495,"ip_address":"","ucode":"A6F51A62A8B362","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/57/6f3c81dd.jpg","comment_is_top":false,"comment_ctime":1543163782,"is_pvip":false,"discussion_count":9,"race_medal":0,"score":"121802248070","product_id":100020801,"comment_content":"æ²¡æ˜ç™½ä¸ºä»€ä¹ˆcaç´¢å¼•å»ºå‡ºæ¥çš„æ¨¡å‹å’Œcå»ºå‡ºæ¥çš„ä¸€æ ·ï¼Ÿ","like_count":28,"discussions":[{"author":{"id":1497528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/d9/b8/2d8900d5.jpg","nickname":"å²é¹é£","note":"","ucode":"39D9A28082C0BE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4221,"discussion_content":"å› ä¸ºè”åˆç´¢å¼•ca,å…ˆæŒ‰cæ’åºï¼Œç„¶åæŒ‰aæ’åºï¼Œcç´¢å¼•æ˜¯æŒ‰cæ’åºï¼Œè€Œè¿™ä¸¤ä¸ªç´¢å¼•åé¢éƒ½æœ‰ä¸»é”®ç´¢å¼•abï¼Œä¸»é”®ç´¢å¼•æ˜¯å…ˆaæ’åºç„¶åæ˜¯bæ’åºï¼Œæ‰€ä»¥caab å’Œcabçš„æ’åºæ˜¯ä¸€æ ·çš„ï¼Œæ•…äºŒè€…æ˜¯ä¸€æ ·çš„ï¼Œåœ¨ä¸‹ç²—è§ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1565235441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1363803,"avatar":"https://static001.geekbang.org/account/avatar/00/14/cf/5b/4b96b6f3.jpg","nickname":"åˆ«åµæˆ‘ç¡è§‰","note":"","ucode":"A1BC2A1AB7CB82","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1497528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/d9/b8/2d8900d5.jpg","nickname":"å²é¹é£","note":"","ucode":"39D9A28082C0BE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19822,"discussion_content":"è·Ÿæˆ‘çš„ç†è§£ä¸€æ ·ç²—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569229305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4221,"ip_address":""},"score":19822,"extra":""},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1497528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/d9/b8/2d8900d5.jpg","nickname":"å²é¹é£","note":"","ucode":"39D9A28082C0BE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65528,"discussion_content":"è·Ÿæˆ‘ä¸€æ ·ç²—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575009688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4221,"ip_address":""},"score":65528,"extra":""},{"author":{"id":1476925,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIp6Ln5VriaBK9uc901IMsOvl1HHmEPS62V05k8N10ib0z2BtvJoCIkElgWvke8cEgIchBxuUqx0faQ/132","nickname":"ç„¡é›™","note":"","ucode":"EDCB22A29B7B45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":88422,"discussion_content":"çœ‹æ¥å¤§å®¶å·®ä¸å¤šç²—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576714333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":65528,"ip_address":""},"score":88422,"extra":""}]},{"author":{"id":1908392,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/1e/a8/225e715b.jpg","nickname":"åæŒ¯å®‡","note":"","ucode":"2962084A13FE57","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":209782,"discussion_content":"è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæœ€å·¦åŸåˆ™ï¼Œcaä¹Ÿå°±åŒ…å«cäº†ï¼Œå¦‚æœæ˜¯baç´¢å¼•ï¼Œä¹Ÿå°±åŒ…å«bç´¢å¼•äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584671480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193885,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/9d/ba605fbb.jpg","nickname":"Otis Hsu","note":"","ucode":"D714C3434E57C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556639,"discussion_content":"ä¸å¯¹ï¼Œcä¸èƒ½ä»£æ›¿caã€‚å‡è®¾ä¸€ä¸ªæç«¯çš„æƒ…å†µï¼Œæˆ‘åé¢ä¿®æ”¹äº†ä¸»é”®å€¼çš„æƒ…å†µä¸‹ï¼Œä»¥cå»ºç«‹çš„ç´¢å¼•ä¸ä¼šé‡æ’ï¼Œé‚£ä¹ˆæ­¤æ—¶cä¸­åŒ…å«çš„aä¸æ˜¯æœ‰åºçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647433696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372609,"discussion_content":"è‹±é›„æ‰€è§ç•¥ç²—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620392135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2037576,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/17/48/6ab7ef29.jpg","nickname":"å…»çŒªåœºè€æ¿","note":"","ucode":"7974373F55AF87","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311795,"discussion_content":"B+æ ‘çš„å¶å­èŠ‚ç‚¹æŒ‡å‘ä¸€ä¸ªInnoDBæ•°æ®é¡µï¼Œæ•°æ®é¡µé‡Œè¾¹ä¼šæœ‰å¤šè¡Œæ•°æ®ï¼Œå¤šè¡Œæ•°æ®æ˜¯ä»¥æœ‰åºæ•°ç»„çš„å½¢å¼ä¿å­˜çš„ã€‚å›åˆ°ä½ çš„ä¾‹å­ï¼Œcçš„äºŒçº§ç´¢å¼•é‡Œï¼Œï¼ˆa,b)å°±æ˜¯æ‰€è°“çš„è¡Œæ•°æ®ã€‚åœ¨cè¿™ä¸ªäºŒçº§ç´¢å¼•çš„B+æ ‘ä¸Šçš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œï¼ˆaï¼Œbï¼‰æ˜¯ä»¥æœ‰åºæ•°ç»„çš„å½¢å¼æ’å¥½åºçš„ã€‚æ‰€ä»¥cäºŒçº§ç´¢å¼•å’Œcaè”åˆç´¢å¼•ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602491260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50854,"user_name":"é˜¿è±†Dou","can_delete":false,"product_type":"c1","uid":1303898,"ip_address":"","ucode":"5D933075D93179","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/5a/b650ed8c.jpg","comment_is_top":false,"comment_ctime":1545055151,"is_pvip":false,"replies":[{"id":"18284","content":"å¥½é—®é¢˜ï¼Œ<br>å¯¹<br><br>è€Œä¸”å¦‚æœä¸å¹¸ä¸€ç›´æ‹¿ä¸åˆ°ï¼Œæœ€åé”è¶…æ—¶äº†ï¼Œå°±åªå¥½å›æ»šè¿™ä¸ªDDäº†æ“ä½œ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545056437,"ip_address":"","comment_id":50854,"utype":1}],"discussion_count":4,"race_medal":0,"score":"117509172143","product_id":100020801,"comment_content":"Online DDLçš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br>1. æ‹¿MDLå†™é”<br>2. é™çº§æˆMDLè¯»é”<br>3. çœŸæ­£åšDDL<br>4. å‡çº§æˆMDLå†™é”<br>5. é‡Šæ”¾MDLé”<br><br>1ã€2ã€4ã€5å¦‚æœæ²¡æœ‰é”å†²çªï¼Œæ‰§è¡Œæ—¶é—´éå¸¸çŸ­ã€‚ç¬¬3æ­¥å ç”¨äº†DDLç»å¤§éƒ¨åˆ†æ—¶é—´ï¼Œè¿™æœŸé—´è¿™ä¸ªè¡¨å¯ä»¥æ­£å¸¸è¯»å†™æ•°æ®ï¼Œæ˜¯å› æ­¤ç§°ä¸ºâ€œonline â€<br><br>é—®é¢˜<br>å¦‚æœç¬¬å››æ­¥å‡çº§ä¸ºMDLå†™é”çš„æ—¶å€™ï¼Œè¿™ä¸ªè¡¨çš„MDLé”æœ‰å…¶ä»–äº‹åŠ¡å ç€ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹åŠ¡ä¼šé˜»å¡ï¼Œç­‰åˆ°å¯ä»¥æ‹¿åˆ°MDLå†™é”æ˜¯å§<br><br>","like_count":27,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433142,"discussion_content":"å¥½é—®é¢˜ï¼Œ\nå¯¹\n\nè€Œä¸”å¦‚æœä¸å¹¸ä¸€ç›´æ‹¿ä¸åˆ°ï¼Œæœ€åé”è¶…æ—¶äº†ï¼Œå°±åªå¥½å›æ»šè¿™ä¸ªDDäº†æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545056437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1438863,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f4/8f/6b3d4370.jpg","nickname":"ç‘¶è€æ¿çš„å°å¼Ÿ","note":"","ucode":"EA6CDB3165227F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536107,"discussion_content":"Online DDLçš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š\n1. æ‹¿MDLå†™é”\n2. é™çº§æˆMDLè¯»é”\n3. çœŸæ­£åšDDL\n4. å‡çº§æˆMDLå†™é”\n5. é‡Šæ”¾MDLé”\n\né—®é¢˜ï¼šä¸ºä»€ä¹ˆ1ä¸ç›´æ¥å°±æ‹¿MDLè¯»é”ï¼Œåé¢çœŸæ­£åšDDLçš„æ—¶å€™å‡çº§ä¸ºå†™é”ï¼Ÿè€Œè¦å»å…ˆæ‹¿å†™é”ï¼Œå†é™çº§ï¼Ÿç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638690802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1256203,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2b/0b/3ed638ce.jpg","nickname":"rusk","note":"","ucode":"08709113CA30AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1438863,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f4/8f/6b3d4370.jpg","nickname":"ç‘¶è€æ¿çš„å°å¼Ÿ","note":"","ucode":"EA6CDB3165227F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540267,"discussion_content":"é˜²æ­¢æœ‰å…¶ä»–çš„å¹¶å‘ddlæ“ä½œï¼Œå¦‚æœèƒ½æ‹¿åˆ°å†™é”å°±è¡¨ç¤ºæ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640003275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":536107,"ip_address":""},"score":540267,"extra":""}]},{"author":{"id":1303963,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e5/9b/db9a6a8c.jpg","nickname":"test","note":"","ucode":"2AEB293A81E969","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309338,"discussion_content":"è¿™ä¸ªå¯¹åº” tony duçš„å®éªŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601260796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44116,"user_name":"Tony Du","can_delete":false,"product_type":"c1","uid":1001661,"ip_address":"","ucode":"F5FCC400E615EA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/bd/6c7d4230.jpg","comment_is_top":false,"comment_ctime":1543369997,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"74557814029","product_id":100020801,"comment_content":"åŸºäºæ–‡ä¸­çš„ä¾‹å­MDLï¼ˆmetadata lock)ï¼Œè‡ªå·±åšäº†ä¸€ä¸ªå®éªŒï¼ˆç¨å¾®æœ‰ä¸€äº›å°æ”¹åŠ¨åœ¨session Dä¸Šï¼‰ï¼Œ<br>session A: begin; select * from t limit 1; æœ€å…ˆå¯åŠ¨sessionA<br>session B: begin; select * from t limit 1; ç´§æ¥ç€å¯åŠ¨sessionB<br>session C: alter table t add f int; ç„¶åå†æ˜¯å¯åŠ¨sessionC<br>session D: begin; select * from t limit 1; æœ€åæ˜¯å¯åŠ¨sessionD<br>å¦‚æ–‡ä¸­ä¾‹å­ï¼Œsession Aå’ŒBæ­£å¸¸å¯åŠ¨ï¼Œç„¶åsession Cè¢«blockï¼Œä¹‹åsession Dä¹Ÿè¢«blockã€‚å½“æŠŠ session A å’Œ session B éƒ½commitæ‰åï¼Œå‘ç°session Cä¾ç„¶æ˜¯blockçš„ï¼ˆè¢« session Dé˜»å¡ï¼‰ï¼Œåªæœ‰å½“æŠŠ session D ä¹Ÿcommitæ‰åï¼Œsession Cæ‰æ‰§è¡Œä¸‹å»ã€‚åŒæ ·çš„å®éªŒï¼Œé‡å¤äº†ä¸‰éï¼Œç»“æœä¹Ÿæ˜¯ä¸€æ ·ã€‚<br>ä»ç°è±¡ä¸Šçœ‹ï¼Œsession Dä¼šå…ˆæ‹¿åˆ°MDLè¯»é”ï¼Œå½“session D commitæ‰åï¼Œç„¶åå†æ˜¯session Cè·å¾—MDLå†™é”ã€‚è¯·é—®è€å¸ˆï¼Œè¿™é‡Œå¯¹äºMDLé”çš„è·å–é¡ºåºï¼ˆä¹Ÿå°±æ˜¯è¯´ æ˜¯session Cå…ˆè·å–MDLå†™é”è¿˜æ˜¯session Då…ˆè·å–MDLè¯»é”ï¼‰æœ‰ä»€ä¹ˆåŸåˆ™ï¼Ÿæ˜¯éšæœºçš„è¿˜æ˜¯æœ‰ä»€ä¹ˆè®²ç©¶ï¼Ÿ<br><br>å¦å¤–ï¼Œåœ¨ä¸€å¼€å§‹çš„è·å–MDLé”çš„é˜¶æ®µï¼Œsession Aï¼ˆMDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œï¼‰-&gt; session B (MDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œ) -&gt; session C (MDLå†™é”ï¼Œè¢«block) -&gt; session D (MDLè¯»é”ï¼Œè¢«MDLå†™é” block) ã€‚æ˜¯ä¸æ˜¯è¯´åŠ MDLé”æ˜¯çœ‹æ—¶é—´å…ˆåé¡ºåºçš„ï¼Œä¸€æ—¦å‡ºç°è¿‡éœ€è¦è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œåç»­å†éœ€è¦è·å–MDLè¯»é”ï¼Œåˆ™å‘ç°ä¹‹å‰å·²ç»æœ‰è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œéœ€è¦è·å–è¯»é”çš„sessionéƒ½ä¼šè¢«blockã€‚æ„Ÿè§‰ä¸Šåƒè¿›å…¥ä¸€ä¸ªé”çš„â€é˜Ÿåˆ—â€œï¼Œæ ¹æ®æ—¶é—´å…ˆåé¡ºåºã€‚è¯·é—®è€å¸ˆï¼Œè¿™é‡Œå¯ä»¥æ›´ç»†èŠ‚å’Œæ·±å…¥çš„è¯´æ˜ä¸‹å—ï¼Ÿ<br><br>î˜ˆ ä½œè€…å›å¤<br>ä½ è¿™ä¸ªä¾‹å­é‡Œé¢ï¼ŒsessionD è¢«Cå µä½åæ˜¯ä¸èƒ½è¾“å…¥å‘½ä»¤çš„ï¼Œä¹‹åæ˜¯ä»€ä¹ˆåŠ¨ä½œä¹‹åï¼ŒsessionDæ‰èƒ½è¾“å…¥commitè¯­å¥å‘¢<br><br>æˆ‘çš„å›å¤ï¼š<br>session Dè¢«Cå µä½åï¼Œä¼šå¡åœ¨select * from t limit 1è¿™å¥ã€‚ç„¶åå½“æˆ‘æŠŠAå’ŒBéƒ½commitæ‰ï¼Œsession Då°±ä¼šæ‰§è¡Œselect * from t limit 1è¿™å¥ï¼Œæ­¤æ—¶ï¼Œsession Cä¾æ—§ä¼šè¢«å µç€ã€‚ç„¶åæŠŠsession D commitæ‰ï¼Œsession Cæ‰èƒ½æ‰§è¡Œã€‚å®éªŒçš„æ—¶å€™ï¼Œæˆ‘æ˜¯æŠŠsqlè¯­å¥éƒ½å†™åœ¨MySQL workbenché‡Œçš„ï¼Œé€šè¿‡workbenchè¿æœåŠ¡å™¨çš„ï¼Œsession Dçš„commitè¯­å¥æ˜¯å†™åœ¨workbenché‡Œæ‰§è¡Œçš„ã€‚æˆ‘çš„é—®é¢˜æ˜¯ï¼Œä¸ºä»€ä¹ˆæ˜¯session Då…ˆè·å–çš„MDLè¯»é”ï¼Œè€Œä¸æ˜¯session Cå…ˆè·å–MDLå†™é”ï¼Œå¯¹äºMDLé”çš„è·å–é¡ºåºæœ‰ä»€ä¹ˆåŸåˆ™ï¼Ÿæ˜¯éšæœºçš„è¿˜æ˜¯æœ‰ä»€ä¹ˆè®²ç©¶ï¼Ÿ<br><br>î˜ˆ ä½œè€…å›å¤<br>ä½ ç”¨MySQL å®¢æˆ·ç«¯è¯•è¯•ï¼Œæˆ‘è·‘å‡ºæ¥æ˜¯æ–‡ä¸­çš„é¡ºåºå“ˆã€‚ç»™æˆ‘ä¸€ä¸‹ä½ çš„MySQL ç‰ˆæœ¬å·å’Œworkbenchç‰ˆæœ¬å·<br><br>æˆ‘çš„å›å¤<br>ç”¨MySQLå®¢æˆ·ç«¯è¯•è¿‡äº†ï¼ˆé€šè¿‡å‘½ä»¤è¡Œï¼‰ï¼Œç»“æœå’Œæˆ‘ä¸Šé¢å®éªŒçš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚è¿˜æ˜¯session Då…ˆè·å–çš„MDLè¯»é”ï¼Œè€Œä¸æ˜¯session Cå…ˆè·å–MDLå†™é”ã€‚<br>MySQLç‰ˆæœ¬ï¼šVer 14.14 Distrib 5.7.17, for Linux (x86_64) using  EditLine wrapper<br>Workbenchç‰ˆæœ¬ï¼š<br>MySQL Workbench 6.3<br>Version 6.3.8 build 1228 CE (64 bits) Community<br><br>è¿™é‡Œç•™è¨€å›å¤ä¸å¤ªæ–¹ä¾¿ï¼Œèƒ½å¦ç•™ä¸€ä¸ªé‚®ç®±æˆ–è€…å¾®ä¿¡å·ï¼Œäº¤æµèµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚è°¢è°¢ã€‚","like_count":17,"discussions":[{"author":{"id":1450420,"avatar":"https://static001.geekbang.org/account/avatar/00/16/21/b4/7fb0d713.jpg","nickname":"éƒ‘å–œäº®","note":"","ucode":"9E47DC9361B6D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343916,"discussion_content":"è¿™æ˜¯ç”±äºsession Cæ‹¿åˆ°MDLå†™é”åé™çº§ä¸ºè¯»é”ï¼Œæ­¤æ—¶SessionDè·åˆ°è¯»é”ï¼Œå½“SessionCåšå®Œäº†çœŸæ­£çš„ddlçš„æ—¶å€™è¦å‡çº§ä¸ºå†™é”ï¼Œè¢«SessionDé˜»å¡ï¼ˆå®è·µè¯å®çš„ç»“è®ºã€æ€è·¯ï¼šå»ºä¸€å¼ æœ‰600000æ•°æ®çš„è¡¨ï¼Œä¸€ä¸ªalter tableçš„è€—æ—¶çº¦ä¸º10sï¼›å…ˆæ‰§è¡ŒsessionA,ç„¶åsessionBæ‰§è¡Œalter tableï¼Œç„¶åæ‰§è¡ŒsessionCï¼Œå…ˆæäº¤sessionAï¼Œç„¶å5ç§’åæäº¤sessionCï¼Œå‘ç°çº¦äº”ç§’åSessionBå®Œæˆï¼Œæ‰€ä»¥å°±æ˜¯sessionBå…ˆæ‹¿åˆ°å†™é”ï¼Œé™ä¸ºè¯»é”ï¼ŒsessionCæ‹¿åˆ°è¯»é”ï¼Œäº”ç§’åsessionCæäº¤ï¼Œæ­¤æ—¶sessionBå·²ç»æ‰§è¡Œäº†äº”ç§’äº†ï¼Œçº¦äº”ç§’åsessionBæäº¤ã€‘ï¼‰ã€å…¶å®ä¹Ÿå¯ä»¥sessionCåç§’ä»¥åæäº¤ï¼Œå¦‚æœsessionCåˆšæäº¤ï¼ŒsessionBå°±å®Œæˆäº†ï¼Œå°±è¯æ˜sessionBå·²ç»æ‰§è¡Œå®Œæˆäº†ï¼Œåªæ˜¯åœ¨ç­‰åœ¨sessionCçš„è¯»é”é‡Šæ”¾ã€‘","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1611212514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397298,"avatar":"https://static001.geekbang.org/account/avatar/00/15/52/32/bb570f48.jpg","nickname":"å‘å¾€çš„ç”Ÿæ´»","note":"","ucode":"0E8DB45357820F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":125049,"discussion_content":"å’Œè¿™ä½åŒå­¦æœ‰ä¸€æ ·çš„ç–‘é—®ï¼Œåç»­äº¤æµç»“æœæ˜¯æ€ä¹ˆæ ·å‘€ï¼Ÿ","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1578470056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1308912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/f0/0285e98a.jpg","nickname":"æ¨å°å‡¡","note":"","ucode":"5A7ACF4A79FA8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376212,"discussion_content":"https://blog.csdn.net/q2878948/article/details/96430129ï¼Œè¿™ä¸ªå¯ä»¥çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622018924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1999313,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/81/d1/0f599cfa.jpg","nickname":"LF","note":"","ucode":"738DA3F0AE8E07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300253,"discussion_content":"æˆ‘çš„ç»“æœä¹Ÿæ˜¯å’Œä½ ä¸€æ ·çš„ï¼ŒåŒé—®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598000027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1901078,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/02/16/dd5cde99.jpg","nickname":"ğŸ¤” ğŸ¤” ğŸ¤”","note":"","ucode":"F1A4B6270675AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266510,"discussion_content":"æˆ‘ä¹Ÿåšäº†å®éªŒï¼Œè·Ÿä½ ç»“æœæ˜¯ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589524866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46859,"user_name":"æ","can_delete":false,"product_type":"c1","uid":1188596,"ip_address":"","ucode":"4E69496C6AF335","user_header":"","comment_is_top":false,"comment_ctime":1543992733,"is_pvip":false,"replies":[{"id":"16798","content":"1. å…ˆè¦å†™é”æ˜¯è¦ç¡®ä¿èƒ½æ”¹ï¼Œé™çº§æ˜¯ä¸ºäº†è®©åé¢çš„æŸ¥è¯¢èƒ½è¿‡<br>2. è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼ˆä¸æ˜¯ä½ æƒ³çš„é‚£æ ·ğŸ˜„ï¼‰ï¼Œåé¢æ–‡ç« ä¼šè¯´<br>3. æœ€åè¿˜å¾—ä¿®æ”¹ä¸€ä¸‹è¡¨ç»“æ„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544027026,"ip_address":"","comment_id":46859,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57378567581","product_id":100020801,"comment_content":"2. é™çº§æˆMDLè¯»é”<br>3. çœŸæ­£åšDDL<br>4. å‡çº§æˆMDLå†™é”<br>5. é‡Šæ”¾MDLé”<br><br> 1-ä¸ºä»€ä¹ˆå…ˆæ‹¿åˆ°å†™é”åˆé™çº§æˆè¯»é”ï¼Œ<br>2- çœŸæ­£åšDDLçš„æ—¶å€™æ˜¯è¯»é”ï¼Œé‚£è¿™ä¸­é—´è¿‡ç¨‹ä¸­ï¼ŒæŸ¥è¯¢åˆ°çš„æ•°æ®å’ŒçœŸæ­£çš„æ•°æ®ç»“æ„å°±ä¸ä¸€è‡´äº†å•Š<br>3. ä¸ºä»€ä¹ˆè¦å…ˆå‡çº§æˆå†™é”å†é‡Šæ”¾","like_count":13,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431575,"discussion_content":"1. å…ˆè¦å†™é”æ˜¯è¦ç¡®ä¿èƒ½æ”¹ï¼Œé™çº§æ˜¯ä¸ºäº†è®©åé¢çš„æŸ¥è¯¢èƒ½è¿‡\n2. è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼ˆä¸æ˜¯ä½ æƒ³çš„é‚£æ ·ğŸ˜„ï¼‰ï¼Œåé¢æ–‡ç« ä¼šè¯´\n3. æœ€åè¿˜å¾—ä¿®æ”¹ä¸€ä¸‹è¡¨ç»“æ„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544027026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43966,"user_name":"æœå˜‰å˜‰","can_delete":false,"product_type":"c1","uid":1306430,"ip_address":"","ucode":"C23DE27E7886BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/3e/9c3a8abc.jpg","comment_is_top":false,"comment_ctime":1543342050,"is_pvip":false,"replies":[{"id":"15755","content":"ä¸ä¼šï¼Œreadonlyå¯¹superæƒé™ç”¨æˆ·æ— æ•ˆï¼Œæ‰§è¡Œbinlogçš„çº¿ç¨‹æ˜¯superæƒé™","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543402187,"ip_address":"","comment_id":43966,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57377916898","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåœ¨ä»åº“æ‰§è¡Œreadonly ä¼šä¸ä¼šå½±å“ä¸»ä»å¤åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šä¸ä¼šå¯¼è‡´ä»èŠ‚ç‚¹æ— æ³•å†™å…¥masteræä¾›çš„æ•°æ®äº†","like_count":13,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430574,"discussion_content":"ä¸ä¼šï¼Œreadonlyå¯¹superæƒé™ç”¨æˆ·æ— æ•ˆï¼Œæ‰§è¡Œbinlogçš„çº¿ç¨‹æ˜¯superæƒé™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543402187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72525,"user_name":"å­£ä¼Ÿæ»¨","can_delete":false,"product_type":"c1","uid":1445103,"ip_address":"","ucode":"CBF84145CAA986","user_header":"https://static001.geekbang.org/account/avatar/00/16/0c/ef/4c8850de.jpg","comment_is_top":false,"comment_ctime":1551664411,"is_pvip":false,"replies":[{"id":"27039","content":"5.6ä»¥åæ”¯æŒonline DDLï¼Œä¸ä¼šå µå¡å¢åˆ æ”¹æŸ¥äº†<br><br>mdlé”æ˜¯æ²¡åŠæ³•çš„ï¼Œä¸è¿‡mdlé”å¯¹æ­£å¸¸ä½¿ç”¨æ²¡å½±å“ï¼Œå› ä¸ºå¢åˆ æ”¹æŸ¥ç”³è¯·å¯¹æ˜¯mdlè¯»é”ï¼Œè€Œddlæ‰§è¡Œå¯¹å¤§éƒ¨åˆ†æ—¶é—´ï¼Œå ç€çš„ä¹Ÿæ˜¯mdlè¯»é”","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1552092338,"ip_address":"","comment_id":72525,"utype":1}],"discussion_count":3,"race_medal":0,"score":"48796304667","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå¯¹äºå¤§è¡¨çš„ddlï¼Œæ˜¯ä¸æ˜¯ä¼šä¸€ç›´é˜»å¡ç€å¢åˆ æ”¹æŸ¥å‘¢ï¼Œå¯¹äºå¤§è¡¨çš„ddlï¼Œä¸€èˆ¬å¦‚ä½•è§£å†³mdlé”é˜»å¡çš„é—®é¢˜ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441632,"discussion_content":"5.6ä»¥åæ”¯æŒonline DDLï¼Œä¸ä¼šå µå¡å¢åˆ æ”¹æŸ¥äº†\n\nmdlé”æ˜¯æ²¡åŠæ³•çš„ï¼Œä¸è¿‡mdlé”å¯¹æ­£å¸¸ä½¿ç”¨æ²¡å½±å“ï¼Œå› ä¸ºå¢åˆ æ”¹æŸ¥ç”³è¯·å¯¹æ˜¯mdlè¯»é”ï¼Œè€Œddlæ‰§è¡Œå¯¹å¤§éƒ¨åˆ†æ—¶é—´ï¼Œå ç€çš„ä¹Ÿæ˜¯mdlè¯»é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552092338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394806,"discussion_content":"å½±å“æ¯”è¾ƒå¤§çš„æ˜¯è¿™ç§åœºæ™¯ï¼š  åœ¨å¤§äº‹åŠ¡æ‰§è¡ŒæœŸé—´ï¼Œ æäº¤äº†ä¸€ä¸ªddlï¼Œè¿™ä¸ªæ—¶å€™é’ˆå¯¹è¿™ä¸ªè¡¨çš„æ‰€æœ‰çš„CRUDéƒ½å°†é˜»å¡ï¼Œæ„æ€å°±æ˜¯æ­¤è¡¨ä¸å¯ç”¨äº†ã€‚ åªèƒ½ç­‰å¾…å¤§äº‹åŠ¡å…ˆæ‰§è¡Œå®Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632062816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2133834,"avatar":"https://static001.geekbang.org/account/avatar/00/20/8f/4a/a340734f.jpg","nickname":"å¹³å‡¡","note":"","ucode":"5F7D49235A9598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":409667,"discussion_content":"è¿˜æœ‰å°±æ˜¯å¤§è¡¨çš„æ…¢æŸ¥è¯¢ï¼Œä¹Ÿä¼šé˜»å¡ddl","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635487726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":394806,"ip_address":""},"score":409667,"extra":""}]}]},{"had_liked":false,"id":43985,"user_name":"kent","can_delete":false,"product_type":"c1","uid":1054355,"ip_address":"","ucode":"30ECFD9DEE2117","user_header":"https://static001.geekbang.org/account/avatar/00/10/16/93/14e7b47e.jpg","comment_is_top":false,"comment_ctime":1543362016,"is_pvip":false,"replies":[{"id":"15757","content":"Gh-ostç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543402347,"ip_address":"","comment_id":43985,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48788002272","product_id":100020801,"comment_content":"é‚£è¦æ˜¯å¤§è¡¨åŠ å­—æ®µ å’‹å¤„ç†ç¨³å¦¥ ","like_count":11,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430580,"discussion_content":"Gh-ostç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543402347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43492,"user_name":"Jeremy","can_delete":false,"product_type":"c1","uid":1171998,"ip_address":"","ucode":"F342D2EC14773C","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/1e/ea3a0366.jpg","comment_is_top":false,"comment_ctime":1543233542,"is_pvip":true,"discussion_count":5,"race_medal":0,"score":"48787873798","product_id":100020801,"comment_content":"å¯¹äºæ€è€ƒé¢˜ï¼Œç´¢å¼•caé‡Œé¢ï¼Œå½“aç›¸åŒæ—¶ï¼Œä¸ºä»€ä¹ˆbä¸€å®šæŒ‰ç…§å‡åºæ’åˆ—ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138264,"discussion_content":"è¿™æ˜¯B+çš„è§„åˆ™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579231647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2037576,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/17/48/6ab7ef29.jpg","nickname":"å…»çŒªåœºè€æ¿","note":"","ucode":"7974373F55AF87","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311796,"discussion_content":"B+æ ‘çš„å¶å­èŠ‚ç‚¹æŒ‡å‘ä¸€ä¸ªInnoDBæ•°æ®é¡µï¼Œæ•°æ®é¡µé‡Œè¾¹ä¼šæœ‰å¤šè¡Œæ•°æ®ï¼Œå¤šè¡Œæ•°æ®æ˜¯ä»¥æœ‰åºæ•°ç»„çš„å½¢å¼ä¿å­˜çš„ã€‚è¿™æ˜¯B+æ ‘å¶å­èŠ‚ç‚¹çš„ç‰¹æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602491341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1971269,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oltLEqTrmHm2aJP99BK6tHu5h7hp4aj08wR5Wt6H31iadFduDAVvjYKmhQ2nvGbLV3lkVdiat2GRasgWXoJeTibUg/132","nickname":"æ¨","note":"","ucode":"7EFEFE285975C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":240093,"discussion_content":"å¦‚æœèšæ—ç´¢å¼•æ˜¯baä¹Ÿå°±æ˜¯å…ˆæŒ‰ç…§bå†aæ’åºï¼Œæ˜¯ä¸æ˜¯å»æ‰çš„å°±æ˜¯cbå‘¢  å› ä¸ºcbå’Œcçš„ç´¢å¼•æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587339450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1406808,"avatar":"https://static001.geekbang.org/account/avatar/00/15/77/58/8824cd8f.jpg","nickname":"ä¼Ÿä¼ŸåŠ¨å¬","note":"","ucode":"60596BE972AC63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":160941,"discussion_content":"ä¸»è¦å› ä¸ºabæ˜¯ä¸»é”®å§ï¼ŒæŒ‰ä¸»é”®æ’åˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580832059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1808208,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/97/50/8435c501.jpg","nickname":"è¶™é‘„","note":"","ucode":"D06F54DC46774C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":152200,"discussion_content":"å› ä¸ºabæœ‰ç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579951796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49105,"user_name":"Larwas","can_delete":false,"product_type":"c1","uid":1105436,"ip_address":"","ucode":"AF6BAA7769311A","user_header":"https://static001.geekbang.org/account/avatar/00/10/de/1c/60ff644d.jpg","comment_is_top":false,"comment_ctime":1544605282,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"44494278242","product_id":100020801,"comment_content":"ä¸Šä¸€èŠ‚çš„é—®é¢˜ï¼Œca ç´¢å¼•çš„æ•°æ®å’Œ c ç´¢å¼•ä¸€æ ·ï¼Œæ˜¯å› ä¸ºcç´¢å¼•æŸ¥åˆ°æ•°æ®æ—¶ï¼Œå›è¡¨åè¿”å›çš„æ•°æ®åœ¨ä¸»é”®ç´¢å¼•å·²ç»æ’å¥½ï¼Œæ‰€ä»¥ä¸éœ€è¦ ca ç´¢å¼•åšæ’åºã€‚åšä¸ªè®°å½•ï¼Œä¸€å¼€å§‹æ²¡ç†è§£ï¼Œåˆšåˆšæƒ³äº†ä¸€ä¸‹ç†è§£äº†ã€‚","like_count":10,"discussions":[{"author":{"id":1670731,"avatar":"https://static001.geekbang.org/account/avatar/00/19/7e/4b/eafd4ff0.jpg","nickname":"çœ‹è¿™ä¸ªç¯æ³¡ï¼ŒçœŸäº®ï¼","note":"","ucode":"97C644859B138F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":22099,"discussion_content":"æŒ‰ä½ è¿™ä¸ªè¯´æ³•, å¦‚æœæœ‰caè¿™ä¸ªç´¢å¼•, å°±ä¸éœ€è¦å›è¡¨, ä½ è¿™ä¸ªç†ç”±æ˜¯é”™çš„.","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1569577462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1464006,"avatar":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","nickname":"æ–æ³¢é‚£å¥‘","note":"","ucode":"85E2EBC01392B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42095,"discussion_content":"æˆ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯ä½ è¿™ä¸ªæƒ³æ³• ä½†æ˜¯ä¸¾ä¸ªä¾‹å­å°±å‘ç°ä¸å¯¹äº† ä½ çš„è¯¯è§£å°±æ˜¯åœ¨å›è¡¨è¿™è¾¹ å› ä¸ºæ ¹æ®cç´¢å¼•æ‰¾åˆ°çš„æ˜¯a bä¸»é”®ç´¢å¼• å›è¡¨åæ˜¯æ ¹æ®æ‰¾åˆ°çš„a bå€¼æ¥æ‰¾è¿™æ¡è¡Œæ•°æ® è·Ÿä½ æ‰¾å‡ºæ¥çš„a bå€¼æ˜¯å¦æœ‰åºæ— å…³ æœ‰å¯èƒ½ä½ æ ¹æ®cæ‰¾åˆ°çš„ä¸»é”®æ˜¯(2 4)(5 4)(4 3) ç„¶åå›è¡¨æ‰¾å‡ºç›¸åº”çš„è¡Œæ•°æ® ç„¶åæ ¹æ®aæ’åº ä½ å¯èƒ½è¿˜æœ‰ä¸€ä¸ªè¯¯è§£å°±æ˜¯è€å¸ˆè¯´çš„æ˜¯å»ºcç´¢å¼•è·Ÿå»ºcaç´¢å¼•æ˜¯ä¸€æ · å¹¶æ²¡æœ‰è¯´å»ºäº†cç´¢å¼•å°±ä¸éœ€è¦æ’åºäº† ä½ åªè¦èƒ½å›ç­”å‡ºä¸€ä¸ªé—®é¢˜å°±èƒ½è§£å†³ï¼šå› ä¸ºcä¸æ˜¯ä¸»é”®å°±æœ‰å¯èƒ½å‡ºç°ç›¸åŒçš„æ•°æ® é‚£åœ¨å»ºcç´¢å¼•çš„æ—¶å€™é‡åˆ°ç›¸åŒå€¼è¯¥æ€ä¹ˆæ’åºï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572584980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43484,"user_name":"é‡‘é¾Ÿ","can_delete":false,"product_type":"c1","uid":1228500,"ip_address":"","ucode":"1C7D35C8AE8D9D","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/d4/ff1c1319.jpg","comment_is_top":false,"comment_ctime":1543232681,"is_pvip":false,"replies":[{"id":"15541","content":"ä¹Ÿä¸æ˜¯ï¼Œè¿˜æ˜¯è¡Œé”ï¼Œåªæ˜¯â€œè¿™ä¸ªè¡¨çš„æ‰€æœ‰è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543239788,"ip_address":"","comment_id":43484,"utype":1}],"discussion_count":4,"race_medal":0,"score":"44492905641","product_id":100020801,"comment_content":"update table set xx;è¿™ç§æ›´æ–°å…¨è¡¨çš„é”æ˜¯mdlå—?æ„Ÿè§‰åº”è¯¥æ˜¯ç¬¬ä¸€ç§å…¨è¡¨é”","like_count":10,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430397,"discussion_content":"ä¹Ÿä¸æ˜¯ï¼Œè¿˜æ˜¯è¡Œé”ï¼Œåªæ˜¯â€œè¿™ä¸ªè¡¨çš„æ‰€æœ‰è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543239788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2351720,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e2/68/ce547a12.jpg","nickname":"zjm1314","note":"","ucode":"63B0EAB7045054","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340407,"discussion_content":"æ„å‘é”å°±æ˜¯è¿™ä¸ªå…ƒæ•°æ®é”ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609995518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138272,"discussion_content":"ä½†æ˜¯è¿˜æ˜¯ä¼šè·å–MDLè¯»é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579232013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2020865,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d6/01/eaa50203.jpg","nickname":"zft","note":"","ucode":"74DEC5FBA610B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278937,"discussion_content":"æ˜¯çš„, å¢åˆ æ”¹ä¼šé»˜è®¤åŠ MDLè¯»é”","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1591261328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":138272,"ip_address":""},"score":278937,"extra":""}]}]},{"had_liked":false,"id":45011,"user_name":"ä¸ƒä¸ƒ","can_delete":false,"product_type":"c1","uid":1301937,"ip_address":"","ucode":"277BACE2330C54","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/b1/7323beb9.jpg","comment_is_top":false,"comment_ctime":1543539198,"is_pvip":true,"replies":[{"id":"16038","content":"æ„å‘é”æ˜¯è¡¨çº§é”ï¼Œæ˜¯å®ç°åœ¨Innodb çš„ã€‚<br><br>æœ‰äº†mdlè¡¨é”ï¼Œä½ å¯ä»¥æš‚æ—¶å…ˆä¸ç®¡æ„å‘é”äº†ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543543645,"ip_address":"","comment_id":45011,"utype":1}],"discussion_count":3,"race_medal":0,"score":"40198244862","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ„å‘é”æ˜¯è¡¨é”å—ï¼Ÿä¸MDLé”ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430894,"discussion_content":"æ„å‘é”æ˜¯è¡¨çº§é”ï¼Œæ˜¯å®ç°åœ¨Innodb çš„ã€‚\n\næœ‰äº†mdlè¡¨é”ï¼Œä½ å¯ä»¥æš‚æ—¶å…ˆä¸ç®¡æ„å‘é”äº†ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543543645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312169,"discussion_content":"ä¸ºå•¥æœ‰äº†MDLé”,å°±å¯ä»¥ä¸ç®¡æ„å‘é”äº†å‘€?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602600442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2351720,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e2/68/ce547a12.jpg","nickname":"zjm1314","note":"","ucode":"63B0EAB7045054","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340408,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609995574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312169,"ip_address":""},"score":340408,"extra":""}]}]},{"had_liked":false,"id":43700,"user_name":"forina","can_delete":false,"product_type":"c1","uid":1306400,"ip_address":"","ucode":"7151B0289E5CFE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJDeCB8VNAIh7m5btiaBD3gkJYjDUJ8eFrAoyhR1FWUS0dB1YC9uszFGpARThMNRX3F4D7DaOwXYA/132","comment_is_top":false,"comment_ctime":1543282039,"is_pvip":false,"replies":[{"id":"15609","content":"åœ¨ã€Šâ€order by æ˜¯æ€ä¹ˆå·¥ä½œçš„â€ã€‹ è¿™ç¯‡ä¼šæåˆ°è¿™ä¸ªé—®é¢˜å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543286519,"ip_address":"","comment_id":43700,"utype":1}],"discussion_count":4,"race_medal":0,"score":"40197987703","product_id":100020801,"comment_content":"è€å¸ˆ æˆ‘æƒ³å’¨è¯¢ä¸€ä¸ªé—®é¢˜ ï¼Œæˆ‘æœ‰ä¸€ä¸ªå¤§è¡¨t å‡ ç™¾ä¸‡æ¡æ•°æ®ï¼Œaæ˜¯ä¸»é”®(intç±»å‹)ï¼Œå¦å¤–æœ‰ä¸€ä¸ªç´¢å¼•ï¼ˆb,c,dï¼‰ï¼ŒæŸ¥è¯¢è¯­å¥ select a from t where b=â€˜ZC1093â€™ and c=â€˜2018-07-31â€™ and d=â€˜AG011â€™ limit 1000,10 æ‰§è¡Œè¿‡ç¨‹ä½¿ç”¨äº†ç´¢å¼•åªç”¨äº†0.014s,æŸ¥è¯¢è¯­å¥ select a from t where b=â€˜ZC1093â€™ and c=â€˜2018-07-31â€™ and d=â€˜AG011â€™  order by a limit 1000,10 æ‰§è¡Œè¿‡ç¨‹ä¹Ÿç”¨äº†(b,c,d)è¿™ä¸ªç´¢å¼• å´ç”¨äº†34s å®Œæˆï¼Œä¸¤æ¡æŸ¥è¯¢è¯­å¥ç»“æœä¹Ÿéƒ½æ˜¯ä¸€æ ·çš„ æˆ‘å¾ˆç–‘æƒ‘ç´¢å¼• (b,c,d)å’Œ(b,c,d,a)ä¸åº”è¯¥æ˜¯ç­‰æ•ˆçš„å— ä¸ºä»€ä¹ˆä¸€ä¸ªå¿«ä¸€ä¸ªæ…¢ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430462,"discussion_content":"åœ¨ã€Šâ€order by æ˜¯æ€ä¹ˆå·¥ä½œçš„â€ã€‹ è¿™ç¯‡ä¼šæåˆ°è¿™ä¸ªé—®é¢˜å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543286519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289762,"discussion_content":"å› ä¸ºorder by aç”¨ä¸åˆ°b c dç´¢å¼•ï¼Œæœ€åæŸ¥å‡ºçš„açš„å€¼å¹¶ä¸æ˜¯æœ‰åºçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594204302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2020865,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d6/01/eaa50203.jpg","nickname":"zft","note":"","ucode":"74DEC5FBA610B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278936,"discussion_content":"å¯ä»¥é€šè¿‡explainçœ‹ä¸‹ï¼ŒExtraé‚£ä¸€æ åº”è¯¥ä¼šå‡ºç°Using filesort","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591261243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1242455,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","nickname":"å¤©å¤©å‘ä¸Š","note":"","ucode":"0CCCA6F4DCC480","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187124,"discussion_content":"å› ä¸º  order by a ç”¨åˆ°äº†æ–‡ä»¶æ’åºï¼Œæ‰€ä»¥ä¼šå¾ˆæ…¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582726254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105146,"user_name":"é¹¿å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1147495,"ip_address":"","ucode":"496222D648BB98","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/67/cc0e5b46.jpg","comment_is_top":false,"comment_ctime":1560930102,"is_pvip":false,"replies":[{"id":"38145","content":"å¦‚æœæ˜¯è¿™ä¸ªåŸå›  æ˜¯ä¸æ˜¯æ„å‘³ç€ å‡è®¾æˆ‘çš„ä¸»é”®ç´¢å¼•æ˜¯(b,a) é‚£ç´¢å¼•cæ˜¯ä¸æ˜¯å°±æ˜¯å’Œç´¢å¼•cbç­‰ä»·ï¼Ÿ<br><br>å¯¹çš„ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1560998084,"ip_address":"","comment_id":105146,"utype":1}],"discussion_count":3,"race_medal":0,"score":"35920668470","product_id":100020801,"comment_content":"è€å¸ˆ æˆ‘è§‰å¾—å¤§å®¶åŒ…æ‹¬æˆ‘ å¯¹äºç´¢å¼•cå’Œç´¢å¼•caæ˜¯ä¸€æ ·çš„è¿™ä¸ªç»“è®ºçš„å›°æƒ‘ä¸»è¦åœ¨äºï¼š<br>(1)æˆ‘ä»¬éƒ½å¯ä»¥ç†è§£cå’Œcaæœ€ç»ˆéƒ½ä»£è¡¨cab<br>(2)å¾ˆæ˜æ˜¾caç´¢å¼•è¡¨ç¤ºçš„cabé‡Œ aæ˜¯äºŒçº§æœ‰åºçš„ã€‚å…³é”®æ˜¯cç´¢å¼•è¡¨ç¤ºçš„cabé‡Œ ä¸ºä»€ä¹ˆaæ˜¯äºŒçº§æœ‰åºçš„è€Œä¸æ˜¯ä¹±åºçš„ï¼Ÿ<br>æ˜¯å› ä¸ºa béƒ½æ˜¯ä¸»é”®ï¼Œç„¶åmysqlè‡ªåŠ¨ä¼šå¯¹éä¸»é”®ç´¢å¼•ä¸‹å¶å­èŠ‚ç‚¹çš„ä¸»é”®è¿›è¡Œæ’åºå—ï¼Ÿå¦‚æœæ˜¯è¿™ä¸ªåŸå›  æ˜¯ä¸æ˜¯æ„å‘³ç€ å‡è®¾æˆ‘çš„ä¸»é”®ç´¢å¼•æ˜¯(b,a) é‚£ç´¢å¼•cæ˜¯ä¸æ˜¯å°±æ˜¯å’Œç´¢å¼•cbç­‰ä»·ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454575,"discussion_content":"å¦‚æœæ˜¯è¿™ä¸ªåŸå›  æ˜¯ä¸æ˜¯æ„å‘³ç€ å‡è®¾æˆ‘çš„ä¸»é”®ç´¢å¼•æ˜¯(b,a) é‚£ç´¢å¼•cæ˜¯ä¸æ˜¯å°±æ˜¯å’Œç´¢å¼•cbç­‰ä»·ï¼Ÿ\n\nå¯¹çš„ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560998084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2797976,"avatar":"","nickname":"Geek_323a60","note":"","ucode":"CDC276EC255411","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":583646,"discussion_content":"æ‚¨å¥½è€å¸ˆï¼Œå¯¹äºç´¢å¼• c ï¼Œc æœ‰åºã€a ä¹Ÿæ˜¯æœ‰åºçš„ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ b ä¹Ÿæ˜¯æœ‰åºçš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660268941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":454575,"ip_address":"å››å·"},"score":583646,"extra":""}]},{"author":{"id":1652085,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKORTofsU89GYKtywquzKuEiabvZnEOonfMYKuCPlo8GDlXqZuJdBicu0XtlaeodH4BnmHV1kldSAwQ/132","nickname":"æœªæ¥æ€æ ·","note":"","ucode":"4E54EB62595B27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39323,"discussion_content":"åŸæ¥æ˜¯è¿™æ ·ï¼ŒäºŒçº§ç´¢å¼•ä¸­çš„ä¸»é”®ä¼šè¿›è¡Œæ’åºã€‚è¿™ä¹ˆçœ‹æ¥ä¸Šä¸€èŠ‚è¯¾åä½œä¸šå›ç­”å¯¹çš„ æ²¡å‡ ä¸ªäººã€‚ã€‚ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1571912328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65915,"user_name":"Jefitar","can_delete":false,"product_type":"c1","uid":1370659,"ip_address":"","ucode":"D7ED9F32ADA5B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/ea/23/508f71e3.jpg","comment_is_top":false,"comment_ctime":1549770666,"is_pvip":false,"replies":[{"id":"23403","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549873673,"ip_address":"","comment_id":65915,"utype":1}],"discussion_count":3,"race_medal":0,"score":"31614541738","product_id":100020801,"comment_content":"æ€»ç»“ã€‚<br><br>åšå…¨åº“é€»è¾‘å¤‡ä»½æ—¶ï¼Œéœ€è¦ä½¿ç”¨å…¨å±€é”ï¼Œæ–¹æ³•æœ‰äºŒï¼š<br>1. æœ‰çš„è¡¨ä½¿ç”¨äº†ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼šä½¿ç”¨FTWRL<br>2. æ‰€æœ‰çš„è¡¨éƒ½ä½¿ç”¨äº‹åŠ¡å¼•æ“çš„åº“ï¼šä½¿ç”¨ mysqldump å¸¦ -single-transaction å‚æ•°<br><br>ä¸€ä¸ªåº“è¢«å…¨å±€é”ä¸Šä»¥åï¼Œä½ è¦å¯¹é‡Œé¢ä»»ä½•ä¸€ä¸ªè¡¨åšåŠ å­—æ®µæ“ä½œï¼ˆåŒ…æ‹¬DMLã€DDLï¼‰ï¼Œéƒ½æ˜¯ä¼šè¢«é”ä½çš„ã€‚<br><br>å…ƒæ•°æ®é”ï¼š<br>1. å…ƒæ•°æ®é” MDL ä¸éœ€è¦æ˜¾ç¤ºåœ°ä½¿ç”¨ï¼›<br>2. MDL è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œè¯»å†™é”ã€å†™é”ä¹‹é—´äº’æ–¥ï¼›<br>3. äº‹åŠ¡ä¸­çš„ MDL é”åœ¨äº‹åŠ¡æäº¤åæ‰é‡Šæ”¾ã€‚<br><br>å®‰å…¨åœ°ç»™å°è¡¨åŠ å­—æ®µï¼š<br>1. éçƒ­ç‚¹è¡¨ï¼šè§£å†³é•¿äº‹åŠ¡ï¼›<br>2. çƒ­ç‚¹è¡¨ï¼šåœ¨ alter table è¯­å¥é‡Œé¢è®¾å®šç­‰å¾…æ—¶é—´ã€‚","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438641,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549873673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2936038,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/cc/e6/34560db7.jpg","nickname":"æˆ³ä½ å°è‚¥è„¸","note":"","ucode":"1DC3F57D1FC9A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554919,"discussion_content":"éƒ½è¢«é”ä½ï¼Œåº”è¯¥æ”¹ä¸ºâ€œéƒ½è¢«é˜»å¡â€å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646661064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385682,"discussion_content":"åŠ å­—æ®µæ“ä½œæ˜¯DDLï¼ŒDMLæ˜¯æ“ä½œæ•°æ®æœ¬èº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627204365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43558,"user_name":"keepmoving","can_delete":false,"product_type":"c1","uid":1298237,"ip_address":"","ucode":"931C61D79B7C1F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/KqZeIjNOVQJnsIFkDBWl56q3vnzqrWWVdDmYb153UClicwTPhYxzIZGDiboZiapYGFvUCvYWFj6o5KFkgk4gao7oQ/132","comment_is_top":false,"comment_ctime":1543240008,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"31608011080","product_id":100020801,"comment_content":"è¯·æ•™ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªmysql 5.7ç‰ˆæœ¬çš„åˆ†åŒºå¤§è¡¨ä¸Šå¢åŠ äº†ä¸€ä¸ªå­—æ®µï¼Œæ˜¯åœ¨çº¿æ›´æ–°è¡¨ç»“æ„ï¼ŒåŸæœ¬ä»¥ä¸ºä¼šå¾ˆå¿«ï¼Œç»“æœè¶³è¶³ç­‰äº†4ä¸ªå¤šå°æ—¶ã€‚æŒ‰æ‚¨çš„è¯´æ³•ç³»ç»Ÿèƒ½æ­£å¸¸çš„åšäº¤æ˜“ã€‚ä¹‹å‰ä¸Šç½‘æŸ¥åŸå› ï¼Œä¸€ç§è¯´æ³•æ˜¯mysqlçš„è¡¨ç»“æ„åŠ å­—æ®µï¼Œé€šè¿‡åˆ›å»ºä¸´æ—¶è¡¨ï¼Œcopyæ•°æ®åˆ°ä¸´æ—¶è¡¨ï¼Œå†ç”¨æœ‰æ–°å¢å­—æ®µçš„ä¸´æ—¶è¡¨æ›¿æ¢åŸè¡¨çš„æ–¹å¼æ¥å¤„ç†ã€‚<br>1ã€è¯·é—®ä»¥ä¸Šè¯´æ³•æ˜¯å¯¹çš„ä¹ˆï¼Ÿ<br>2ã€å¦‚æœåƒæ‚¨è¯´çš„è¡¨æ•°æ®æ›´æ–°å’ŒæŸ¥è¯¢éƒ½ä¼šåŠ mdlé”ï¼Œé‚£å°±åº”è¯¥ä¸èƒ½å¤„ç†æ–°å¢äº¤æ˜“å•Šï¼Ÿ<br>3ã€ç°åœ¨mysqlæ–°å¢å­—æ®µä¸æ”¯æŒè®¾ç½®è¶…æ—¶æ—¶é—´å§ï¼Ÿ<br><br>è°¢è°¢ğŸ™<br>","like_count":7,"discussions":[{"author":{"id":1365206,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d4/d6/1d4543ac.jpg","nickname":"äº‘æµ·","note":"","ucode":"0C6CA0BE58EA21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400726,"discussion_content":"åŒæ±‚ï¼Œæœ‰å¥½çš„æ–¹å¼äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633399500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10136,"discussion_content":"3.  ä¸æ”¯æŒã€‚é‚£ä¸ªæ˜¯alisqlçš„ç‰¹æ€§ã€‚ä½ å¯ä»¥ç”¨ptå·¥å…·æ¥å®ç°å¢åŠ å­—æ®µè¶…æ—¶æ—¶é—´åŠŸèƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568266708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43493,"user_name":"Aurora","can_delete":false,"product_type":"c1","uid":1302157,"ip_address":"","ucode":"84CB75BC2D7680","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/8d/99536c5b.jpg","comment_is_top":false,"comment_ctime":1543233557,"is_pvip":false,"replies":[{"id":"15690","content":"å‚çœ‹07ç¯‡å“ˆã€‚ ä½ çš„ç­”æ¡ˆæ˜¯æœ€æ¥è¿‘çš„ï¼Œä½ çœ‹ä¸‹æˆ‘å¾®åšï¼Œç„¶åè”ç³»æå®¢æ—¶é—´å¾®åšå°ç¼–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543339442,"ip_address":"","comment_id":43493,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31608004629","product_id":100020801,"comment_content":"é’ˆå¯¹æˆ‘ä¸Šé¢çš„å‘è¨€<br>&#39;&#39;&#39;<br>å¦‚æœmysqldump å¤‡ä»½çš„æ˜¯æ•´ä¸ªschemaï¼ŒæŸä¸ªå°è¡¨t1åªæ˜¯è¯¥schemaä¸Šå…¶ä¸­æœ‰ä¸€å¼ è¡¨<br>æƒ…å†µ1ï¼š<br>masterä¸Šå¯¹å°è¡¨t1çš„DDLä¼ è¾“åˆ°slaveå»åº”ç”¨çš„æ—¶åˆ»ï¼Œmysqldumpå·²ç»å¤‡ä»½å®Œäº†t1è¡¨çš„æ•°æ®ï¼Œæ­¤æ—¶slave åŒæ­¥æ­£å¸¸ï¼Œä¸ä¼šæœ‰é—®é¢˜ã€‚<br><br>æƒ…å†µ2ï¼š<br>masterä¸Šå¯¹å°è¡¨t1çš„DDLä¼ è¾“åˆ°slaveå»åº”ç”¨çš„æ—¶åˆ»ï¼Œmysqldumpæ­£åœ¨å¤‡ä»½t1è¡¨çš„æ•°æ®,æ­¤æ—¶ä¼šå‘ç”ŸMDL é”ï¼Œä»åº“ä¸Št1è¡¨çš„æ‰€æœ‰æ“ä½œéƒ½ä¼šHang ä½ã€‚<br><br>æƒ…å†µ3ï¼š<br>master ä¸Šå¯¹å°è¡¨t1çš„DDLä¼ è¾“åˆ°slaveå»åº”ç”¨çš„æ—¶åˆ»ï¼Œmysqldump è¿˜æ²¡å¯¹t1è¡¨è¿›è¡Œå¤‡ä»½ï¼Œè¯¥DDLä¼šåœ¨slaveçš„t1è¡¨åº”ç”¨æˆåŠŸï¼Œä½†æ˜¯å½“å¯¼å‡ºåˆ°t1è¡¨çš„æ—¶å€™ä¼šæŠ¥â€œERROR 1412 (HY000): Table definition has changed, please retry transactionâ€ é”™è¯¯ï¼Œå¯¼è‡´å¯¼å‡ºå¤±è´¥ï¼<br>&#39;&#39;&#39;<br><br>æƒ…å†µ1çš„æ—¶å€™ï¼Œå³ä¾¿æ˜¯mysqldumpå¯¼å‡ºå®Œäº†t1ï¼Œå†åº”ç”¨DDLï¼Œä»åº“è¯¥DDLä¹Ÿä¼šå¡ä½ï¼Œç°è±¡ä¸æƒ…å†µ3ç›¸åŒã€‚","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430402,"discussion_content":"å‚çœ‹07ç¯‡å“ˆã€‚ ä½ çš„ç­”æ¡ˆæ˜¯æœ€æ¥è¿‘çš„ï¼Œä½ çœ‹ä¸‹æˆ‘å¾®åšï¼Œç„¶åè”ç³»æå®¢æ—¶é—´å¾®åšå°ç¼–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543339442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2548121,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e1/99/827921d9.jpg","nickname":"Z","note":"","ucode":"29C7423250EF90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367029,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618238166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43380,"user_name":"winner_0715","can_delete":false,"product_type":"c1","uid":1012843,"ip_address":"","ucode":"A033A30539181F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/6b/a98162a1.jpg","comment_is_top":false,"comment_ctime":1543221172,"is_pvip":true,"replies":[{"id":"15505","content":"è¿™ä¸ªçœ‹ä¸šåŠ¡è§„å®šå§ï¼Œæˆ‘æ¯”è¾ƒå»ºè®®å…¨å°å†™å’Œä¸‹åˆ’çº¿","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543228453,"ip_address":"","comment_id":43380,"utype":1}],"discussion_count":3,"race_medal":0,"score":"31607992244","product_id":100020801,"comment_content":"å€Ÿè´µå®åœ°é—®ä¸ªé—®é¢˜ï¼Œå“ˆå“ˆï¼Œï¼ŒMysqlè¡¨å­—æ®µåæ˜¯è®¾è®¡æˆé©¼å³°çš„å½¢å¼è¿˜æ˜¯ä¸‹åˆ’çº¿çš„å½¢å¼å‘¢ï¼Œä¸¤è€…æœ‰å•¥åŒºåˆ«ï¼Ÿæ€§èƒ½ï¼Ÿæœ‰çš„å…¬å¸è®¾è®¡è§„èŒƒä¸­è§„å®šè®¾è®¡æˆé©¼å³°çš„å½¢å¼ï¼Œç¬¬ä¸€æ¬¡é‡åˆ°","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430368,"discussion_content":"è¿™ä¸ªçœ‹ä¸šåŠ¡è§„å®šå§ï¼Œæˆ‘æ¯”è¾ƒå»ºè®®å…¨å°å†™å’Œä¸‹åˆ’çº¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543228453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1195279,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3d/0f/a553837d.jpg","nickname":"Allen_Go","note":"","ucode":"B59FC8C3328689","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573812,"discussion_content":"ä¹‹å‰å¬è¯´æ˜¯è¿™æ ·å­çš„ï¼šä»¥å‰Oracleçš„æ•°æ®åº“ä¸ä¼šåŒºåˆ†é©¼å³°ï¼Œæ‰€ä»¥ä¸ºäº†å¯è¯»æ€§è®¾è®¡æˆä¸‹åˆ’çº¿ï¼Œåæ¥ä¸ºäº†æ–¹ä¾¿ç§»æ¤æˆ–ä¹ æƒ¯åŸå› ï¼Œmysqlä¹Ÿæ²¿ç”¨è¿™ç§å†™æ³•ï¼ˆé“å¬é€”è¯´ï¼Œå¤§å®¶çœ‹çœ‹å°±å¥½ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653659553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385679,"discussion_content":"ç¬¬ä¸€æ¬¡é‡åˆ°ï¼Œå¤§æ¦‚ç‡ä¸æ˜¯ä¸»æµç”¨æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627203822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43219,"user_name":"è¾£é…±","can_delete":false,"product_type":"c1","uid":1156147,"ip_address":"","ucode":"3B009B02CBFF9F","user_header":"https://static001.geekbang.org/account/avatar/00/11/a4/33/fdc331c3.jpg","comment_is_top":false,"comment_ctime":1543197308,"is_pvip":false,"replies":[{"id":"15461","content":"ä¸æ˜¯åŒä¸€è¡Œå°±å¯ä»¥å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543198501,"ip_address":"","comment_id":43219,"utype":1}],"discussion_count":5,"race_medal":0,"score":"31607968380","product_id":100020801,"comment_content":"è€å¸ˆMDLé‚£é‡Œ<br>è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥ã€‚<br><br><br>å¢åˆ æ”¹å±äºå†™äº†å§ï¼Œä¹Ÿå¯ä»¥å¹¶å‘ï¼Ÿ<br>","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430328,"discussion_content":"ä¸æ˜¯åŒä¸€è¡Œå°±å¯ä»¥å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543198501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385681,"discussion_content":"MDLé”çš„èµ„æºæ˜¯å…ƒæ•°æ®ï¼Œä¸æ˜¯æ•°æ®ï¼›\nå½“åœ¨åšè¡¨ç»“æ„å˜æ›´çš„æ—¶å€™ï¼ˆMDLå†™é”ï¼‰ï¼Œè‚¯å®šä¸èƒ½è¯»å–æ•°æ®ï¼›å½“æ—¶MDLæ˜¯è¯»é”çš„æ—¶å€™ï¼Œä½ å¯ä»¥å¯¹è¡¨çš„æ•°æ®éšä¾¿æ“ä½œï¼Œæ“ä½œçš„æ—¶å€™å¦‚æœæ˜¯åŒä¸€è¡Œï¼Œé‚£ä¹ˆç°åœ¨å°±è¦è¡Œé”æ¥è§£å†³äº†ï¼Œæˆ‘æ„Ÿè§‰è¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„èŒƒç•´ï¼Œä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627204061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049208,"avatar":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","nickname":"james","note":"","ucode":"5701899403917C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258728,"discussion_content":"crudéƒ½æ˜¯mdl è¯»é”  æ‰€æœ‰å¢åˆ æ”¹æŸ¥ä¸äº’æ–¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588725631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1900382,"avatar":"","nickname":"Geek_b924b4","note":"","ucode":"B071335B28CE04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198216,"discussion_content":"æ”¹å˜è¡¨çš„ç»“æ„å±äºå†™ï¼Ÿå…¶ä»–å¢åˆ æ”¹æŸ¥å®é™…çš„æ•°æ®å±äºè¯»ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583489019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1900382,"avatar":"","nickname":"Geek_b924b4","note":"","ucode":"B071335B28CE04","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239599,"discussion_content":"åªæ˜¯å¯¹äºMDLæ¥è¯´æ˜¯è¿™æ ·çš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1587304314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":198216,"ip_address":""},"score":239599,"extra":""}]}]},{"had_liked":false,"id":66432,"user_name":"CHeeto","can_delete":false,"product_type":"c1","uid":1367716,"ip_address":"","ucode":"F092724EF4A584","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4lwhZGZQVEhic3bVrib4aic7luEovonbQyfbSl59TnaePwInicn4UzKvgoQJf7AMJuls0aFN2icicYkS6UVoK0UUImibg/132","comment_is_top":false,"comment_ctime":1549938565,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"27319742341","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨5.7.20ä»¥åŠ5.6.38éƒ½åšäº†å®éªŒï¼Œéƒ½æ˜¯sessionDå…ˆè¦æäº¤äº†ä¹‹åsessionCæ‰èƒ½å¤Ÿæ‰§è¡Œï¼Œæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ<br>","like_count":6,"discussions":[{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10210,"discussion_content":"åˆšæ‰åˆè¯•äº†ä¸‹ï¼Œ5.5ç‰ˆæœ¬çš„è¡¨ç°æ˜¯è€å¸ˆè¯´çš„é‚£ç§ï¼Œ5.6ä»¥åŠä»¥ä¸Šå°±æ˜¯åˆšæ‰ä½ è¯´çš„é‚£ç§è¡¨ç°ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1568275465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10155,"discussion_content":"æˆ‘æ‡‚äº†ï¼Œå› ä¸ºç”¨çš„æ˜¯5.6æˆ–è€…5.7.  æ”¯æŒonline ddläº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1568267844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138267,"discussion_content":"ä¸ºå•¥ä½ ä»¬éƒ½ä¸ç”¨8.0ï¼Œè¿˜éå¾—åœ¨5.6å·¦å³çš„ç‰ˆæœ¬å¾˜å¾Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579231782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42530,"discussion_content":"è¦å¤šæµ‹è¯•å‡ æ¬¡çš„ï¼Œæˆ‘çš„ç‰ˆæœ¬æ˜¯ 5.7.18 ä¸¤ç§æƒ…å†µéƒ½å‡ºç°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572689571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10151,"discussion_content":"å…¶å®åº”è¯¥æ˜¯è¿™æ ·ï¼Œa, b æäº¤ä¹‹åï¼Œé”å…ˆè¢«DæŠ¢èµ°äº†ï¼Œç„¶åDé˜»å¡äº†Cï¼ŒDæ‰§è¡Œcommitåï¼ŒCæ‰å¯ä»¥æ‰§è¡Œã€‚ä¸è¿‡è¿™ä¸ªå’Œè€å¸ˆè¯´çš„ä¸ä¸€æ ·äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568267636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2133834,"avatar":"https://static001.geekbang.org/account/avatar/00/20/8f/4a/a340734f.jpg","nickname":"å¹³å‡¡","note":"","ucode":"5F7D49235A9598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409672,"discussion_content":"a, b æäº¤ä¹‹åï¼Œä¸æ˜¯é”å…ˆè¢«DæŠ¢èµ°äº†ï¼Œè€Œæ˜¯Cåœ¨æ‰§è¡Œä¸­ç”±å†™é”é™çº§ä¸ºè¯»é”ï¼Œç„¶åDæ‰§è¡Œï¼Œå†ä¹‹åCçœŸæ­£æ‰§è¡Œå®ŒDDlåˆå‡çº§ä¸ºå†™é”æ—¶ï¼Œåˆ™è¢«Dé˜»å¡äº†ã€‚Cæ‰§è¡Œddlè¿‡ç¨‹ä¸­ä¸åŒæ—¶å€™mdlé”ä¸ä¸€æ ·ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635488486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":10151,"ip_address":""},"score":409672,"extra":""}]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10145,"discussion_content":"ç¡®å®ï¼Œæˆ‘çš„ä¹Ÿæ˜¯è¿™æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568267090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49561,"user_name":"Dä¸å‘éŸ³","can_delete":false,"product_type":"c1","uid":1326125,"ip_address":"","ucode":"B1020A70901679","user_header":"https://static001.geekbang.org/account/avatar/00/14/3c/2d/3d31b684.jpg","comment_is_top":false,"comment_ctime":1544714630,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27314518406","product_id":100020801,"comment_content":"æˆ‘æŸ¥é˜…äº†ä¸‹MySQLçš„docï¼Œè¯´é“<br>To acquire table locks within the current session, use the LOCK TABLES statement, which acquires metadata locks<br>æ¥æºï¼šhttps:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;lock-tables.html#table-lock-acquisition<br>å°±æ˜¯LOCK TABLESæ‹¿åˆ°çš„ä¹Ÿæ˜¯mdlï¼Œè€Œä¸æ˜¯è¡¨é”ï¼Ÿ<br>ç„¶åæˆ‘çœ‹åˆ°mdlçš„docï¼Œè¯´é“<br>The exclusive lock request for x by Client 3 has higher priority than the write lock request by Client 2, so Client 3 acquires its lock on x, then also on x_new and x_old, performs the renaming, and releases its locks.<br>æ¥æºï¼šhttps:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;metadata-locking.html<br>æ„æ€å°±æ˜¯é™¤äº†è¯»é”å’Œå†™é”è¿˜å­˜åœ¨exclusive lockï¼Ÿç„¶åè¿™ä¸ªé”æ¯”å†™é”çš„ä¼˜å…ˆé«˜ã€‚<br>æ„Ÿè§‰æå®¢æ—¶é—´è¯„è®ºåº”è¯¥æ”¯æŒmarkdownï¼Œç°åœ¨çš„æ„Ÿè§‰å°±æ˜¯ç»™ç§»åŠ¨ç«¯åšçš„ï¼Œä¸å…³å¿ƒPCç«¯å¯Œæ–‡æœ¬ç¼–è¾‘çš„éœ€æ±‚ã€‚<br>","like_count":6,"discussions":[{"author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239261,"discussion_content":"exclusive lockå°±æ˜¯å†™é”å•Šï¼Œthan the write lockåè¾¹æœ‰ä¸ªå®šè¯­ä»å¥å‘¢","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1587288979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60646,"user_name":"miu","can_delete":false,"product_type":"c1","uid":1368901,"ip_address":"","ucode":"3D73FF3C09231A","user_header":"","comment_is_top":false,"comment_ctime":1547522702,"is_pvip":false,"replies":[{"id":"21620","content":"åˆ†æå¾—å¾ˆå¥½ğŸ‘ğŸ¿<br><br>é—®é¢˜éƒ¨åˆ†ï¼Œå®˜æ–¹MySQL æ²¡æœ‰ç±»ä¼¼çš„æ–¹æ¡ˆï¼Œå°±æ˜¯é å¤–éƒ¨åˆ¤æ–­ï¼Œçœ‹è§é”äº†killæ‰ğŸ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547526541,"ip_address":"","comment_id":60646,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23022359182","product_id":100020801,"comment_content":"å¶ç„¶çš„æœºä¼šå¾ˆå¹¸è¿è¯»åˆ°è€å¸ˆæ‚¨çš„ä¹ ä½œï¼Œå¸®åŠ©ç‰¹åˆ«å¤§ï¼Œæ„Ÿè°¢ã€‚<br>å¯¹äºæ€è€ƒé¢˜ï¼Œæˆ‘çš„ç†è§£å¦‚ä¸‹ï¼Œè¯·è€å¸ˆæŒ‡æ­£ï¼š<br>å¤‡åº“ç”¨ä¸åŒçš„å¤‡ä»½å‘½ä»¤ä¼šæœ‰ä¸åŒçš„æƒ…å†µï¼š<br>å¦‚æœå¤‡åº“é‡‡ç”¨çš„å¤‡ä»½é€‰é¡¹ä¸º --single-transaction  --dump-slave=(1or2) æ—¶<br>ä¼šåœ¨å¤‡ä»½æ–‡ä»¶ä¸­è®°å½•ä¸»åº“å¤‡ä»½æ—¶ç‚¹çš„binlogåç§»é‡ï¼Œå¹¶ä¸”å…³åœå¤‡åº“çš„sql_runningè¿›ç¨‹ï¼Œå¤‡ä»½å®Œæˆåå†å¼€å¯ã€‚<br>æ­¤æ—¶ä¸»åº“å¯¹è¡¨çš„DDLæ“ä½œä¼ è¾“åˆ°å¤‡åº“çš„relayæ—¥å¿—ä¸­ï¼Œä½†ç”±äºå¤‡ä»½çš„sql_runningè¿›è¡Œå¤„äºåœæ­¢çŠ¶æ€ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šè¿ç”¨æ•°æ®åº“ä¸­ï¼Œå¯¹å¤‡åº“çš„å¤‡ä»½æ— å½±å“ï¼Œæ‰€æœ‰çš„DDLæ“ä½œéƒ½ç­‰å¾…å¤‡ä»½å®Œæˆåå†è¿›è¡Œã€‚<br><br>å¦‚æœå¤‡ä»½é‡‡ç”¨çš„å¤‡ä»½é€‰é¡¹æ˜¯ --single-transaction --master-data=(1or2)æ—¶<br>ä¼šåœ¨å¤‡ä»½æ–‡ä»¶ä¸­è®°å½•å¤‡åº“å¤‡ä»½æ—¶ç‚¹çš„binlogåç§»é‡ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦åˆ†ä¸‰ç§æƒ…å†µè¿›è¡Œè®¨è®ºï¼š<br>1.ä¸»åº“ä¸­å¯¹è¡¨çš„DDLæ“ä½œä¼ è¾“åˆ°å¤‡åº“æ—¶ï¼Œå¤‡åº“çš„å¤‡ä»½å·²å®Œæˆå¯¹è¯¥è¡¨çš„å¤‡ä»½<br>æ­¤æ—¶å¯¹å¤‡ä»½æ•°æ®æ²¡æœ‰å½±å“<br>2.ä¸»åº“ä¸­å¯¹è¡¨çš„DDLæ“ä½œä¼ è¾“åˆ°å¤‡åº“æ—¶ï¼Œå¤‡åº“çš„å¤‡ä»½è¿˜æœªå¯¹è¯¥è¡¨è¿›è¡Œå¤‡ä»½<br>é‚£ä¹ˆå½“å¤‡ä»½åˆ°è¯¥è¡¨æ—¶ï¼Œå¤‡ä»½ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚è¡¨å®šä¹‰å·²æ”¹å˜æˆ–è€…è¡¨ä¸å­˜åœ¨ç­‰<br>3.ä¸»åº“ä¸­å¯¹è¡¨çš„DDLæ“ä½œä¼ è¾“åˆ°å¤‡åº“æ—¶ï¼Œå¤‡åº“çš„å¤‡ä»½æ­£åœ¨å¯¹è¯¥è¡¨è¿›è¡Œå¤‡ä»½<br>æ­¤åˆ»DDLè¯­å¥ä¼šè¢«é˜»å¡ï¼Œå¤„äºç­‰å¾…è·å–MDLå†™é”çš„çŠ¶æ€ã€‚<br><br>å¦å¤–å¯¹è¡¨çš„DDLæ“ä½œï¼Œåœ¨å¼€å§‹å’Œç»“æŸæ—¶éƒ½ä¼šè·å–ä¸€æ¬¡MDLçš„å†™é”ï¼Œç»“æŸæ—¶è·å–MDLçš„å†™é”å¯èƒ½ä¼šè¢«å¿½ç•¥ï¼›é™¤äº†alter table è¯­å¥é‡Œé¢è®¾å®šç­‰å¾…æ—¶é—´ï¼Œå®˜æ–¹çš„MySQLæœ‰æ²¡æœ‰å¥½çš„åŠæ³•è§£å†³æˆ–è€…ç¼“è§£æ­¤é—®é¢˜å‘¢","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436569,"discussion_content":"åˆ†æå¾—å¾ˆå¥½ğŸ‘ğŸ¿\n\né—®é¢˜éƒ¨åˆ†ï¼Œå®˜æ–¹MySQL æ²¡æœ‰ç±»ä¼¼çš„æ–¹æ¡ˆï¼Œå°±æ˜¯é å¤–éƒ¨åˆ¤æ–­ï¼Œçœ‹è§é”äº†killæ‰ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547526541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44627,"user_name":"Nick","can_delete":false,"product_type":"c1","uid":1303145,"ip_address":"","ucode":"D453E42B9A8429","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIKa0PdjFnEpvGFBcED2P28ugPmwwRoCbeUfulpGEye8964F4nwChQyVfgVUia74TyDISvXTYJfQpA/132","comment_is_top":false,"comment_ctime":1543466608,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"23018303088","product_id":100020801,"comment_content":"FTWRLæ˜¯æ€ä¹ˆå®ç°å…¨å±€è¯»é”çš„ï¼Ÿ<br>åœ¨5.7.23ç¯å¢ƒä¸‹åšäº†æµ‹è¯•<br>åœºæ™¯ä¸€<br>ç¬¬ä¸€æ­¥æ‰§è¡Œäº‹ç‰©A: begin;update t set nameï¼&#39;x&#39; where idï¼1; ä¸æäº¤<br>ç¬¬äºŒæ­¥æ‰§è¡Œsql B: update t set nameï¼&#39;x&#39; where idï¼1;è¢«é˜»å¡ï¼Œé”ç­‰å¾…<br>ç¬¬ä¸‰æ­¥æ‰§è¡Œ sql C : flush tables with read lock; è¢«é˜»å¡ï¼ŒçŠ¶æ€ä¸ºwaiting for global read lock<br><br>åœºæ™¯äºŒ<br>ç¬¬ä¸€æ­¥æ‰§è¡Œäº‹ç‰©A: begin;update t set nameï¼&#39;x&#39; where idï¼1; ä¸æäº¤<br>ç¬¬äºŒæ­¥æ‰§è¡Œsql C : flush tables with read lock; <br>é¡ºåˆ©æ‰§è¡Œå®Œã€‚<br><br>åœºæ™¯äºŒè¯´æ˜FTWRLä¸è¢«è¡Œxé”å’Œ å…±äº«mdlé”é˜»å¡ï¼Œé‚£åœºæ™¯ä¸€ä¸­ï¼Œä»€ä¹ˆé˜»å¡äº†FTWRLå‘¢ï¼Ÿ<br>FTWRLåŒ…å«ä¸‰ä¸ªåŠ¨ä½œï¼Œ<br>1 ä¸Šå…¨å±€è¯»é” ;<br>2 å…³é—­è¡¨ ;<br>3ä¸Šå…¨å±€commité”;<br>è¯·æ—è€å¸ˆè§£æƒ‘","like_count":5,"discussions":[{"author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239593,"discussion_content":"ä¸‰æ¡sqlæ˜¯åœ¨ä¸‰ä¸ªsessioné‡Œå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587304147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810051,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK0uyg1IicbEhLwsgM2A2ROoyVdWdmUqZfQfs6G67w9m3hdRNBMOQJatQoACj3qNGgj2KVIgricaYiaQ/132","nickname":"æœ¨å¾—æ„Ÿæƒ…çš„ç¼–ç æœºå™¨","note":"","ucode":"9C6CD47ADCB8E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":167378,"discussion_content":"åœºæ™¯ä¸€ä¸ºä»€ä¹ˆä¼šè§¦å‘å…¨å±€è¯»é”ï¼Ÿåªæ˜¯where id =1ä¸åº”è¯¥åªæœ‰è¡Œé”å’ŒMDLå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581483893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43862,"user_name":"æ–‡é˜³","can_delete":false,"product_type":"c1","uid":1029788,"ip_address":"","ucode":"6F4B3234461D66","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b6/9c/66cfdab1.jpg","comment_is_top":false,"comment_ctime":1543312570,"is_pvip":false,"replies":[{"id":"15668","content":"ä¸€èˆ¬æ¯”è¾ƒç®€å•çš„åšæ³•æ˜¯æŠŠbinlog è·¯å¾„é…ç½®åˆ°æ–°ç£ç›˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543318613,"ip_address":"","comment_id":43862,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23018149050","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼š<br>    æˆ‘æœ‰ä¸ªé—®é¢˜ã€‚æ¯”å¦‚æŸå°æœåŠ¡å™¨ç©ºé—´ç¡¬ç›˜ä¸º1Tï¼Œåœ¨ä¸Šé¢éƒ¨ç½²ä¸€å°å•æœºçš„mysqlã€‚éšç€æ—¶é—´çš„å¢é•¿ï¼Œmysqlç©ºé—´ä¸å¤Ÿäº†ã€‚ç„¶åå†ç»™è¿™å°æœºå™¨æŒ‚ä¸€ä¸ª1Tçš„ç£ç›˜ã€‚è¯·é—®mysqlæ€ä¹ˆä½¿ç”¨è¿™ä¸ª1Tçš„ç£ç›˜ï¼Ÿæˆ‘å¯¹æœåŠ¡å™¨è¿™å—æ¯”è¾ƒå°ç™½ï¼Œæ˜¯ä¸æ˜¯éœ€è¦å°†è¿™1Tçš„ç¡¬ç›˜å˜æˆæœåŠ¡å™¨çš„ç³»ç»Ÿç›˜æ‰èƒ½ä½¿ç”¨ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430528,"discussion_content":"ä¸€èˆ¬æ¯”è¾ƒç®€å•çš„åšæ³•æ˜¯æŠŠbinlog è·¯å¾„é…ç½®åˆ°æ–°ç£ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543318613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310187,"avatar":"","nickname":"ä¸‰ä¸°","note":"","ucode":"CA69A069D3061D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29778,"discussion_content":"ç”¨é€»è¾‘å·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570783457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43793,"user_name":"Tony Du","can_delete":false,"product_type":"c1","uid":1001661,"ip_address":"","ucode":"F5FCC400E615EA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/bd/6c7d4230.jpg","comment_is_top":false,"comment_ctime":1543295226,"is_pvip":false,"replies":[{"id":"15634","content":"ä½ è¿™ä¸ªä¾‹å­é‡Œé¢ï¼ŒsessionD è¢«Cå µä½åæ˜¯ä¸èƒ½è¾“å…¥å‘½ä»¤çš„ï¼Œä¹‹åæ˜¯ä»€ä¹ˆåŠ¨ä½œä¹‹åï¼ŒsessionDæ‰èƒ½è¾“å…¥commitè¯­å¥å‘¢<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543297436,"ip_address":"","comment_id":43793,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23018131706","product_id":100020801,"comment_content":"åŸºäºæ–‡ä¸­çš„ä¾‹å­MDLï¼ˆmetadata lock)ï¼Œè‡ªå·±åšäº†ä¸€ä¸ªå®éªŒï¼ˆç¨å¾®æœ‰ä¸€äº›å°æ”¹åŠ¨åœ¨session Dä¸Šï¼‰ï¼Œ<br>session A:  begin; select * from t limit 1;   æœ€å…ˆå¯åŠ¨sessionA<br>session B:  begin; select * from t limit 1;   ç´§æ¥ç€å¯åŠ¨sessionB<br>session C:  alter table t add f int;            ç„¶åå†æ˜¯å¯åŠ¨sessionC<br>session D:  begin; select * from t limit 1;   æœ€åæ˜¯å¯åŠ¨sessionD<br>å¦‚æ–‡ä¸­ä¾‹å­ï¼Œsession Aå’ŒBæ­£å¸¸å¯åŠ¨ï¼Œç„¶åsession Cè¢«blockï¼Œä¹‹åsession Dä¹Ÿè¢«blockã€‚å½“æŠŠ session A å’Œ session B éƒ½commitæ‰åï¼Œå‘ç°session Cä¾ç„¶æ˜¯blockçš„ï¼ˆè¢« session Dé˜»å¡ï¼‰ï¼Œåªæœ‰å½“æŠŠ session D ä¹Ÿcommitæ‰åï¼Œsession Cæ‰æ‰§è¡Œä¸‹å»ã€‚åŒæ ·çš„å®éªŒï¼Œé‡å¤äº†ä¸‰éï¼Œç»“æœä¹Ÿæ˜¯ä¸€æ ·ã€‚<br>ä»ç°è±¡ä¸Šçœ‹ï¼Œsession Dä¼šå…ˆæ‹¿åˆ°MDLè¯»é”ï¼Œå½“session D commitæ‰åï¼Œç„¶åå†æ˜¯session Cè·å¾—MDLå†™é”ã€‚è¯·é—®è€å¸ˆï¼Œè¿™é‡Œå¯¹äºMDLé”çš„è·å–é¡ºåºï¼ˆä¹Ÿå°±æ˜¯è¯´ æ˜¯session Cå…ˆè·å–MDLå†™é”è¿˜æ˜¯session Då…ˆè·å–MDLè¯»é”ï¼‰æœ‰ä»€ä¹ˆåŸåˆ™ï¼Ÿæ˜¯éšæœºçš„è¿˜æ˜¯æœ‰ä»€ä¹ˆè®²ç©¶ï¼Ÿ<br><br>å¦å¤–ï¼Œåœ¨ä¸€å¼€å§‹çš„è·å–MDLé”çš„é˜¶æ®µï¼Œsession Aï¼ˆMDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œï¼‰-&gt; session B (MDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œ) -&gt; session C (MDLå†™é”ï¼Œè¢«block) -&gt; session D (MDLè¯»é”ï¼Œè¢«MDLå†™é” block) ã€‚æ˜¯ä¸æ˜¯è¯´åŠ MDLé”æ˜¯çœ‹æ—¶é—´å…ˆåé¡ºåºçš„ï¼Œä¸€æ—¦å‡ºç°è¿‡éœ€è¦è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œåç»­å†éœ€è¦è·å–MDLè¯»é”ï¼Œåˆ™å‘ç°ä¹‹å‰å·²ç»æœ‰è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œéœ€è¦è·å–è¯»é”çš„sessionéƒ½ä¼šè¢«blockã€‚æ„Ÿè§‰ä¸Šåƒè¿›å…¥ä¸€ä¸ªé”çš„â€é˜Ÿåˆ—â€œï¼Œæ ¹æ®æ—¶é—´å…ˆåé¡ºåºã€‚è¯·é—®è€å¸ˆï¼Œè¿™é‡Œå¯ä»¥æ›´ç»†èŠ‚å’Œæ·±å…¥çš„è¯´æ˜ä¸‹å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430498,"discussion_content":"ä½ è¿™ä¸ªä¾‹å­é‡Œé¢ï¼ŒsessionD è¢«Cå µä½åæ˜¯ä¸èƒ½è¾“å…¥å‘½ä»¤çš„ï¼Œä¹‹åæ˜¯ä»€ä¹ˆåŠ¨ä½œä¹‹åï¼ŒsessionDæ‰èƒ½è¾“å…¥commitè¯­å¥å‘¢\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543297436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1901078,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/02/16/dd5cde99.jpg","nickname":"ğŸ¤” ğŸ¤” ğŸ¤”","note":"","ucode":"F1A4B6270675AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266512,"discussion_content":"A B ä¼šè¯éƒ½commitå ï¼ŒDä¼šè¯ç›´æ¥å‡ºç»“æœï¼Œç„¶åå°±å¯ä»¥commitäº†ï¼Œcommitåï¼ŒCä¼šè¯æ‰§è¡ŒæˆåŠŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589525015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43615,"user_name":"å‘æ¡æ©™å­ ã€‚","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1543246531,"is_pvip":false,"replies":[{"id":"15624","content":"æ˜¯æ²¡æœ‰â€œæ²¡åŠ äº‹åŠ¡â€çš„æ¦‚å¿µçš„ï¼Œä½ ä¸æ˜¾å¼åœ°å¯åŠ¨äº‹åŠ¡ï¼ŒMySQLä¹Ÿä¼šæŒ‰ç…§â€œå•è¯­å¥äº‹åŠ¡â€å¤„ç†çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543288477,"ip_address":"","comment_id":43615,"utype":1}],"discussion_count":4,"race_medal":0,"score":"23018083011","product_id":100020801,"comment_content":"è€å¸ˆ ï¼ŒMDLåªæœ‰åœ¨äº‹åŠ¡ä¸­æ‰ä¼šè¢«åŠ ä¸Šä¹ˆ  ï¼Œ å¦‚æœæ²¡æœ‰å¼€å¯äº‹åŠ¡ç›´æ¥è¿›è¡Œå¢åˆ æ”¹ MDLä¸ä¼šé»˜è®¤åŠ ä¸Šä¹ˆã€‚  æ¯”å¦‚æˆ‘æ²¡æœ‰åŠ äº‹åŠ¡ï¼Œ å»æ‰§è¡Œä¸€ä¸ªæ›´æ–°è¯­å¥ï¼Œ é¦–å…ˆä¼šå…ˆå»æ‰¾è¿™ä¸ªæ•°æ®ï¼Œç„¶ååœ¨è¿›è¡Œæ›´æ–°  ã€‚ æ•´ä¸ªè¿‡ç¨‹è¢«æ‹†æˆä¸¤æ­¥è¿›è¡Œï¼Œè¿™ä¸ªæœŸé—´æ²¡æœ‰é”çš„ä¹ˆ","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430434,"discussion_content":"æ˜¯æ²¡æœ‰â€œæ²¡åŠ äº‹åŠ¡â€çš„æ¦‚å¿µçš„ï¼Œä½ ä¸æ˜¾å¼åœ°å¯åŠ¨äº‹åŠ¡ï¼ŒMySQLä¹Ÿä¼šæŒ‰ç…§â€œå•è¯­å¥äº‹åŠ¡â€å¤„ç†çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543288477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10158,"discussion_content":"ä»»ä½•åœ°æ–¹ éƒ½æœ‰äº‹åŠ¡ã€‚è¿™ä¸ªäº‹åŠ¡éš”ç¦»çš„æ—¶å€™æœ‰è®²","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568268100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2351720,"avatar":"https://static001.geekbang.org/account/avatar/00/23/e2/68/ce547a12.jpg","nickname":"zjm1314","note":"","ucode":"63B0EAB7045054","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340409,"discussion_content":"æˆ‘è§‰å¾—å¯ä»¥è®¤ä¸ºä¸€ä¸ªcrudçš„è¯­å¥å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œåªä¸è¿‡è‡ªåŠ¨æäº¤äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609995756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138275,"discussion_content":"æ²¡æœ‰beginçš„è¯ï¼Œcrudåœ¨æ‰§è¡Œå®Œæˆåï¼Œmdlå°±è‡ªåŠ¨é‡Šæ”¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579232281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43306,"user_name":"yeyuliunian","can_delete":false,"product_type":"c1","uid":1002074,"ip_address":"","ucode":"ACBCD834BDE602","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/5a/c9e70aec.jpg","comment_is_top":false,"comment_ctime":1543210023,"is_pvip":true,"replies":[{"id":"15496","content":"å±äºDDLï¼Œå˜æ›´è¡¨ç»“æ„ï¼Œè¿‡ç¨‹åšè¦åŠ MDLå†™é”","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543216279,"ip_address":"","comment_id":43306,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23018046503","product_id":100020801,"comment_content":"æ·»åŠ äºŒçº§ç´¢å¼•ä¼šåŠ ä»€ä¹ˆé”","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430353,"discussion_content":"å±äºDDLï¼Œå˜æ›´è¡¨ç»“æ„ï¼Œè¿‡ç¨‹åšè¦åŠ MDLå†™é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543216279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43257,"user_name":"didiren","can_delete":false,"product_type":"c1","uid":1305376,"ip_address":"","ucode":"8341F02F2ABA60","user_header":"https://static001.geekbang.org/account/avatar/00/13/eb/20/a02c4f61.jpg","comment_is_top":false,"comment_ctime":1543201304,"is_pvip":false,"replies":[{"id":"15462","content":"ç´¢å¼•cçš„å†…éƒ¨ç»“æ„å°±æ˜¯(c,a,b)","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543201595,"ip_address":"","comment_id":43257,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23018037784","product_id":100020801,"comment_content":"ä½ å¥½ï¼Œå¯¹äºä¸Šå‘¨çš„ç­”æ¡ˆæˆ‘æ„è§ä¸åŒï¼Œcç´¢å¼•æŒ‰ç…§cæ’åºï¼Œå›è¡¨æ—¶çš„aå¹¶ä¸æ˜¯æ’åºçš„ï¼Œå³ä½¿ä½¿ç”¨äº†mmrç‰¹æ€§ï¼Œä¹Ÿæ˜¯ä¸»åŠ¨å¯¹aåšäº†æ’åºæ‰èƒ½å°†nest loopè½¬æˆmergeï¼Œåªæœ‰caç´¢å¼•å¯ä»¥é¿å…å¯¹aæ’åºçš„æˆæœ¬ï¼Œä¸çŸ¥æˆ‘ç†è§£æ˜¯å¦æ­£ç¡®ï¼Œè¯·æŒ‡æ•™","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430340,"discussion_content":"ç´¢å¼•cçš„å†…éƒ¨ç»“æ„å°±æ˜¯(c,a,b)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543201595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70621,"user_name":"æµªè¡å±…å£«","can_delete":false,"product_type":"c1","uid":1055456,"ip_address":"","ucode":"376D4CBC0CB2BD","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/e0/06e54287.jpg","comment_is_top":false,"comment_ctime":1551147949,"is_pvip":false,"replies":[{"id":"25208","content":"åŠ æ™®é€šå­—æ®µä¸ç”¨çš„é‡å»ºå…¨è¡¨ï¼ŒåŠ ä¸»é”®è¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551154800,"ip_address":"","comment_id":70621,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18731017133","product_id":100020801,"comment_content":"è¯·æ•™è€å¸ˆâ€¦åŠ å‡å­—æ®µéœ€è¦æ‰«æå…¨è¡¨æ˜¯ä¸ºå•¥ï¼Ÿæ˜¯ä¸æ˜¯éœ€è¦æ›´æ”¹åº•å±‚å­˜å‚¨ï½é‚£è¿™æ ·çš„è¯ä¸æ˜¯ç­‰äºæŠŠæ•°æ®copyäº†ä¸€éâ€¦â€¦","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440733,"discussion_content":"åŠ æ™®é€šå­—æ®µä¸ç”¨çš„é‡å»ºå…¨è¡¨ï¼ŒåŠ ä¸»é”®è¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551154800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397019,"discussion_content":"è¡¨æ˜¯æŒ‰ç…§ä¸»é”®ç´¢å¼•ç»„ç»‡è¡¨ç»“æ„ï¼Œä¸»é”®å˜äº†ï¼Œæ•´ä¸ªè¡¨é‡æ–°æ’ä¸€æ¬¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632541494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157007,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1575011868,"is_pvip":false,"replies":[{"id":"60262","content":"å¯¹åŒä¸€è¡Œæ•°æ®è¿›è¡Œå¤„æ›´æ–°ï¼Œä¼šäº’æ–¥<br><br>ä½†æ˜¯äº’æ–¥çš„ä¸æ˜¯mdlé”ï¼Œè€Œæ˜¯è¡Œé”","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1575019761,"ip_address":"","comment_id":157007,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14459913756","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆ,mdlé”é‚£é‡Œ<br>è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥;<br>è¦æ˜¯å¯¹åŒä¸€è¡Œæ•°æ®è¿›è¡Œå¤„ç†å‘¢,ä¼šäº’æ–¥å—.","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476301,"discussion_content":"å¯¹åŒä¸€è¡Œæ•°æ®è¿›è¡Œå¤„æ›´æ–°ï¼Œä¼šäº’æ–¥\n\nä½†æ˜¯äº’æ–¥çš„ä¸æ˜¯mdlé”ï¼Œè€Œæ˜¯è¡Œé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575019761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67630,"user_name":"æœ¨å­","can_delete":false,"product_type":"c1","uid":1390997,"ip_address":"","ucode":"66B9C493F25B11","user_header":"https://static001.geekbang.org/account/avatar/00/15/39/95/a72ef023.jpg","comment_is_top":false,"comment_ctime":1550213472,"is_pvip":false,"replies":[{"id":"24008","content":"å› ä¸ºæˆ‘ä»¬å®šä¹‰ä¸ºï¼ˆc,b)ï¼Œå…¶å®å°±æ˜¯å‘Šè¯‰MySQLï¼Œè¦æŒ‰ç…§cï¼Œcæœ‰åºçš„è§„åˆ™æ¥ç»„ç»‡ç´¢å¼•<br><br>å¦‚æœæ”¹æˆcabï¼Œé‚£ä¹ˆcbå°±ä¸ä¸€å®šä¿è¯æœ‰åºäº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550299247,"ip_address":"","comment_id":67630,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14435115360","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¿™ä¸ªåœ°æ–¹æœ‰ç‚¹ä¸å¤ªæ˜ç™½ï¼š<br>ç´¢å¼• cb çš„ç»„ç»‡æ˜¯å…ˆæŒ‰ c æ’åºï¼Œåœ¨æŒ‰ b æ’åºï¼ŒåŒæ—¶è®°å½•ä¸»é”®<br>â€“c--|â€“b--|â€“ä¸»é”®éƒ¨åˆ†a-- <br>ä¸»é”®éƒ¨åˆ†ä¸ºä»€ä¹ˆæ˜¯a è€Œä¸æ˜¯abå‘¢ï¼Ÿ<br>","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439290,"discussion_content":"å› ä¸ºæˆ‘ä»¬å®šä¹‰ä¸ºï¼ˆc,b)ï¼Œå…¶å®å°±æ˜¯å‘Šè¯‰MySQLï¼Œè¦æŒ‰ç…§cï¼Œcæœ‰åºçš„è§„åˆ™æ¥ç»„ç»‡ç´¢å¼•\n\nå¦‚æœæ”¹æˆcabï¼Œé‚£ä¹ˆcbå°±ä¸ä¸€å®šä¿è¯æœ‰åºäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550299247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1317358,"avatar":"https://static001.geekbang.org/account/avatar/00/14/19/ee/07bd8a5f.jpg","nickname":"Stone","note":"","ucode":"D1E405AD79D44C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309817,"discussion_content":"&#34;å› ä¸ºæˆ‘ä»¬å®šä¹‰ä¸ºï¼ˆc,b)ï¼Œå…¶å®å°±æ˜¯å‘Šè¯‰MySQLï¼Œè¦æŒ‰ç…§cï¼Œcæœ‰åºçš„è§„åˆ™æ¥ç»„ç»‡ç´¢å¼•&#34;, çœ‹èµ·æ¥åº”è¯¥æ˜¯&#34;æŒ‰ç…§c, bæœ‰åºçš„è§„åˆ™æ¥......&#34;, æ˜¯ä¸æ˜¯typoå•¦~è€å¸ˆ :)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601452747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67303,"user_name":"æ–¹é›²","can_delete":false,"product_type":"c1","uid":1193141,"ip_address":"","ucode":"8CB5C54B1F14FE","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/b5/cd324e58.jpg","comment_is_top":false,"comment_ctime":1550126912,"is_pvip":false,"replies":[{"id":"23995","content":"â€œkill ä¹Ÿæœªå¿…ç®¡ç”¨â€æ˜¯è¯´ï¼Œå¦‚æœæ²¡æœ‰è¶…æ—¶æœºåˆ¶ï¼Œ<br><br>æˆ‘ä»¬åªèƒ½å…ˆkillï¼Œå†æ‰§è¡Œddlï¼Œè¿™æ ·æ‰ä¿è¯ä¸ä¼šå µä½åé¢çš„è¯·æ±‚ã€‚<br><br>ä½†æ˜¯å…ˆkillå®Œï¼Œå¯èƒ½ddlè¿˜æ²¡æ‰§è¡Œï¼Œåˆæ¥æ–°çš„æŸ¥è¯¢ï¼Œå¯¼è‡´å‰é¢çš„killç™½åšäº†ã€‚<br>æ˜¯è¿™ä¸ªæ„æ€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550297840,"ip_address":"","comment_id":67303,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14435028800","product_id":100020801,"comment_content":"å…³äºä¿®æ”¹çƒ­ç‚¹è¡¨æ‹–å®æ•´ä¸ªåº“çš„æƒ…å†µå¡æœ‰æ„Ÿè§¦ï¼Œè¸©è¿‡å¾ˆå¤šæ¬¡å‘ï¼Œä»Šå¤©è¸©ç®—å¤§æ¦‚çœ‹æ˜ç™½ä¸ºå•¥äº†ï¼Œæ„Ÿè°¢è€å¸ˆã€‚<br>åŒæ—¶è¿˜æœ‰ä¸€ä¸ªå°ç–‘é—®æ²¡ç†è§£ï¼šæ—¢ç„¶æ–‡ä¸­è¯´ï¼Œsession Cè¢«é˜»å¡ä¹‹åï¼Œåé¢éœ€è¦MDLè¯»é”çš„sessionä¹Ÿéƒ½ä¼šè¢«é˜»å¡ã€‚é‚£ä¹ˆåªè¦å‰é¢çš„Aï¼ŒB sessionçš„é•¿äº‹åŠ¡æ‰§è¡Œå®Œäº†ï¼ŒCå°±èƒ½æ‰§è¡Œæ‰ï¼ˆæˆ‘æƒ³åº”è¯¥æ˜¯æŒ‰å…ˆåˆ°å…ˆå¾—çš„é¡ºåºè·å–é”çš„å§ï¼‰ï¼Œä¸ºä»€ä¹ˆåé¢åˆè¯´â€œå³ä½¿æŠŠé•¿äº‹åŠ¡killæ‰ä¹Ÿæœªå¿…ç®¡ç”¨ï¼Œå› ä¸ºæ–°çš„è¯·æ±‚é©¬ä¸Šåˆæ¥äº†â€ï¼Œä¸ºä»€ä¹ˆæ–°çš„è¯·æ±‚ä¸æ˜¯æ’åœ¨session Cåé¢å‘¢ï¼Ÿè¿™æ ·æŒ‰ç†ä¸ä¼šæ‹–è·¨æ‰å¯¹å•Šï¼Ÿå°±ç®—æ˜¯ä¸€äº›å·²ç»æ‹¿åˆ°MDLè¯»é”çš„sessionåœ¨äº‹åŠ¡ä¸­çš„å‘é€æ–°sqlï¼Œä¹Ÿåº”è¯¥ä¸ºäº†é¿å…æ­»é”ä¸éœ€è¦å†æ’é˜Ÿäº†å§ã€‚","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439137,"discussion_content":"â€œkill ä¹Ÿæœªå¿…ç®¡ç”¨â€æ˜¯è¯´ï¼Œå¦‚æœæ²¡æœ‰è¶…æ—¶æœºåˆ¶ï¼Œ\n\næˆ‘ä»¬åªèƒ½å…ˆkillï¼Œå†æ‰§è¡Œddlï¼Œè¿™æ ·æ‰ä¿è¯ä¸ä¼šå µä½åé¢çš„è¯·æ±‚ã€‚\n\nä½†æ˜¯å…ˆkillå®Œï¼Œå¯èƒ½ddlè¿˜æ²¡æ‰§è¡Œï¼Œåˆæ¥æ–°çš„æŸ¥è¯¢ï¼Œå¯¼è‡´å‰é¢çš„killç™½åšäº†ã€‚\næ˜¯è¿™ä¸ªæ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550297840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2824858,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/1a/9a/f2f9f5dd.jpg","nickname":"æå¤é¾™","note":"","ucode":"68346B996EE22B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535925,"discussion_content":"æŠŠå‰é¢ä¸¤ä¸ªé˜»å¡çš„ kill æ‰ï¼Œ ddl å°±å¯ä»¥æ‰§è¡Œï¼Œåé¢çš„æ˜¯ä¸æ˜¯å°±éƒ½è§£äº†ï¼Ÿ\né—®é¢˜æ˜¯ï¼ŒMySQL ä¸­èƒ½æœ‰æ–¹æ³•æ‰¾åˆ°é˜»å¡æºå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638609107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394811,"discussion_content":"æœ‰ä¸ªé—®é¢˜ï¼Œ killæ“ä½œä¸ä¼šç”³è¯·DMLå†™é”å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632065473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63582,"user_name":"Tsong","can_delete":false,"product_type":"c1","uid":1363110,"ip_address":"","ucode":"CF0259824E6D53","user_header":"https://static001.geekbang.org/account/avatar/00/14/cc/a6/b0490e97.jpg","comment_is_top":false,"comment_ctime":1548407026,"is_pvip":false,"replies":[{"id":"22494","content":"æ˜¯çš„ï¼Œè¿™ä¸ªæ˜¯sessionçº§åˆ«çš„ï¼›<br>æ–‡ä¸­ä»‹ç»çš„æ–¹æ³•æ˜¯è¯­å¥çº§åˆ«çš„ ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548413558,"ip_address":"","comment_id":63582,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14433308914","product_id":100020801,"comment_content":"å…³äº mdl è¢«é”åçš„ä¸€ä¸ªwaitæ—¶é—´çš„æ§åˆ¶ã€‚å¯ä»¥é€šè¿‡å‚æ•°ï¼šlock_wait_timeout æ¥æ§åˆ¶ã€‚","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437646,"discussion_content":"æ˜¯çš„ï¼Œè¿™ä¸ªæ˜¯sessionçº§åˆ«çš„ï¼›\næ–‡ä¸­ä»‹ç»çš„æ–¹æ³•æ˜¯è¯­å¥çº§åˆ«çš„ ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548413558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62226,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1547988555,"is_pvip":false,"replies":[{"id":"22016","content":"è€Œç´¢å¼• c åªæ˜¯æŒ‰ c æ’åºã€‚<br><br>ä¸æ˜¯çš„ï¼Œç´¢å¼•cæ˜¯æŒ‰ç…§ cabæ’åºçš„ï¼Œè·Ÿç´¢å¼•caä¸€æ ·","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548008108,"ip_address":"","comment_id":62226,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14432890443","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ™šä¸Šå¥½ï¼<br><br>æ‚¨è¯´ç´¢å¼• ca å’Œç´¢å¼• c çš„æ•°æ®æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚æ˜¯å¦ä¸å¤ªå‡†ç¡®ï¼Ÿ<br>ç´¢å¼• ca æ˜¯å…ˆæŒ‰ c æ’åºï¼Œå†æŒ‰ a æ’åºã€‚è€Œç´¢å¼• c åªæ˜¯æŒ‰ c æ’åºã€‚<br><br>å› ä¸ºæœ‰ order by aï¼Œæ‰€ä»¥åˆ é™¤ç´¢å¼• c æ›´ä¸ºåˆé€‚ã€‚<br>æ˜¯è¿™æ ·ä¹ˆè€å¸ˆï¼Œè°¢è°¢ï¼","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437144,"discussion_content":"è€Œç´¢å¼• c åªæ˜¯æŒ‰ c æ’åºã€‚\n\nä¸æ˜¯çš„ï¼Œç´¢å¼•cæ˜¯æŒ‰ç…§ cabæ’åºçš„ï¼Œè·Ÿç´¢å¼•caä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548008108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47245,"user_name":"å¦‚ä½™","can_delete":false,"product_type":"c1","uid":1184565,"ip_address":"","ucode":"C2005B97CE9593","user_header":"https://static001.geekbang.org/account/avatar/00/12/13/35/b6328a05.jpg","comment_is_top":false,"comment_ctime":1544088288,"is_pvip":false,"replies":[{"id":"16862","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544095340,"ip_address":"","comment_id":47245,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14428990176","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸‹ä¸è€å¸ˆï¼ŒMDLè¯»å†™é”ä¸­ï¼Œæ˜¯ä¸æ˜¯å¦‚æœå­˜åœ¨è¯»é”ï¼Œé‚£ä¹ˆå†™é”éœ€è¦ç­‰å¾…è¯»é”é‡Šæ”¾ï¼Œè€Œå­˜åœ¨å†™é”æ—¶ï¼Œè¯»é”éœ€è¦ç­‰å¾…å†™é”é‡Šæ”¾å¯¹å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431712,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544095340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43904,"user_name":"Geek_b7a73b","can_delete":false,"product_type":"c1","uid":1078667,"ip_address":"","ucode":"6F9725D2595ED4","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/8b/9ddda63b.jpg","comment_is_top":false,"comment_ctime":1543321297,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14428223185","product_id":100020801,"comment_content":"å¦‚æœä¿®æ”¹è¡¨æ“ä½œåœ¨ â€mysqldumpå¼€å¯åä½†è¿˜æœªå¯¼å‡ºä¿®æ”¹è¡¨æ•°æ®å‰â€œ çš„æ—¶é—´æ®µå†…å¼€å§‹ï¼Œåˆ™ä¿®æ”¹è¡¨æ“ä½œæˆåŠŸå®Œæˆï¼Œè€Œmysqldumpä¼šæ‰§è¡Œå¤±è´¥ï¼›<br><br>å¦‚æœä¿®æ”¹è¡¨æ“ä½œåœ¨ â€œmysqldumå·²å¯¼å‡ºä¿®æ”¹è¡¨æ•°æ®ä½†è¿˜æœªç»“æŸmysqldumpæ“ä½œå‰â€çš„æ—¶é—´æ®µå†…å¼€å§‹ï¼Œåˆ™ä¿®æ”¹è¡¨æ“ä½œè¢«é˜»å¡ï¼Œmysqldumèƒ½æˆåŠŸå®Œæˆï¼Œåœ¨mysqldumpæ“ä½œå®Œæˆåä¿®æ”¹è¡¨æ“ä½œæ–¹å¯æ­£å¸¸æ‰§è¡Œã€‚<br><br>5.5ç‰ˆæœ¬æœ‰å¯èƒ½å¤‡ä»½æ–‡ä»¶é‡Œé¢ä¼šä¸¢å¤±æ•°æ®","like_count":3},{"had_liked":false,"id":43288,"user_name":"core dumped","can_delete":false,"product_type":"c1","uid":1103253,"ip_address":"","ucode":"F99C28F2C396E2","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/95/aae1eb2a.jpg","comment_is_top":false,"comment_ctime":1543206687,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14428108575","product_id":100020801,"comment_content":"æ€è€ƒé¢˜:è¦çœ‹ddlè¯­å¥ä¼ åˆ°å¤‡åº“åæ˜¯åœ¨mysqldumpå‘½ä»¤ä¸­selectæ•°æ®ä¹‹å‰è¿˜æ˜¯ä¹‹åï¼Œå¦‚æœæ˜¯ä¹‹å‰è¿™ä¸ªddlèƒ½æ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯mysqldumpåé¢selectæ•°æ®å°±ä¼šæŠ¥é”™ï¼Œå¦‚æœæ˜¯ä¹‹åå°±ä¼šç­‰å¾…åœ¨å¯¼å‡ºæ•°æ®å®Œæˆåä¼šè·³åˆ°selectå¼€å§‹ä¹‹å‰ä¿å­˜çš„save pointç‚¹ï¼Œè¿™æ—¶ddlä¼šç»§ç»­æ‰§è¡Œä¸‹å»ã€‚ä¸çŸ¥æ˜¯å¦æ­£ç¡®ï¼Œæœ›å¤§ç¥æŒ‡å¯¼ã€‚","like_count":3},{"had_liked":false,"id":194718,"user_name":"punnpkin","can_delete":false,"product_type":"c1","uid":1691517,"ip_address":"","ucode":"E635BD016D892F","user_header":"https://static001.geekbang.org/account/avatar/00/19/cf/7d/d9085aaa.jpg","comment_is_top":false,"comment_ctime":1585099617,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10175034209","product_id":100020801,"comment_content":"FTWRL è¿™ä¹ˆç‰›ï¼ŒèƒŒååˆ°åº•åšäº†å“ªäº›äº‹æƒ…ï¼Ÿå®ƒä¸»è¦å¹² 3 ä»¶äº‹ã€‚<br><br>ä¸Šå…¨å±€è¯»é”(lock_global_read_lock)ï¼›<br>æ¸…ç†è¡¨ç¼“å­˜(close_cached_tables)ï¼›<br>ä¸Šå…¨å±€COMMITé”(make_global_read_lock_block_commit)ã€‚","like_count":2},{"had_liked":false,"id":127934,"user_name":"tommy","can_delete":false,"product_type":"c1","uid":1062373,"ip_address":"","ucode":"E6EDD4ECBA01D6","user_header":"https://static001.geekbang.org/account/avatar/00/10/35/e5/0b60d57e.jpg","comment_is_top":false,"comment_ctime":1566811588,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"10156746180","product_id":100020801,"comment_content":"&quot;è¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨&quot;ï¼Œå…¶å®ƒè¡¨åˆæ²¡æœ‰é”ä½ï¼Œä¸ºä»€ä¹ˆä¸èƒ½è®¿é—®å…¶å®ƒè¡¨å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239695,"discussion_content":"ERROR 1100 (HY000): Table &#39;tt&#39; was not locked with LOCK TABLESç¡®å®æ˜¯ä¸è¡Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587306422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312171,"discussion_content":"å¯¹è¿™ä¸ªå¯ä»¥,å› ä¸ºä»–æ²¡è·å–å“ªäº›è¡¨çš„è¯»é”,æ‰€ä»¥ä¸èƒ½è¯».","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602600975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":239695,"ip_address":""},"score":312171,"extra":""}]},{"author":{"id":1644104,"avatar":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","nickname":"èŒ¶æ²¡å–å®Œ","note":"","ucode":"D72D88C42A1258","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553764,"discussion_content":"ä¸€æ¬¡æ€§è·å–æ‰€æœ‰éœ€è¦çš„é”ï¼Œå¯ä»¥æœ‰æ•ˆçš„é¿å…æ­»é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646060976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239914,"discussion_content":"https://dev.mysql.com/doc/refman/5.7/en/lock-tables.html\nA session that requires locks must acquire all the locks that it needs in a single LOCK TABLES statement. While the locks thus obtained are held, the session can access only the locked tables. For example, in the following sequence of statements, an error occurs for the attempt to access t2 because it was not locked in the LOCK TABLES statementã€‚ä¸€ä¸ªsessionè·å–é”çš„è¯ï¼Œå¿…é¡»ä¸€æ¬¡æ€§è·å–æ‰€æœ‰éœ€è¦çš„é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587310562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138281,"discussion_content":"å‰ææ¡ä»¶æ˜¯å½“å‰çº¿ç¨‹ä¸‹ï¼Œå¯¹ç›¸åº”çš„è¡¨åˆ†é…äº†ç›¸åº”çš„é”è§„åˆ™ï¼Œæ‰€ä»¥åœ¨é”é‡Šæ”¾å‰æ‰å¯ä»¥è®¿é—®å…¶ä»–è¡¨ï¼Œæˆ–å…¶ä»–çš„æ–¹å¼è®¿é—®å½“å‰è¡¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579232633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":83049,"discussion_content":"åŒé—®å•Šï¼Œå…„å°ææ˜ç™½äº†å›å¤ä¸‹ç­”æ¡ˆå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576413266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116385,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1563845603,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10153780195","product_id":100020801,"comment_content":"å¯¹äºMDLï¼ŒMySQLæ”¯æŒwaitå—","like_count":2,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138284,"discussion_content":"waitä¸æ˜¯mariadbåœ¨DDLå±‚é¢çš„æœºåˆ¶å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579232690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65694,"user_name":"æ„šäºº","can_delete":false,"product_type":"c1","uid":1355952,"ip_address":"","ucode":"40DE41849EF9EA","user_header":"https://static001.geekbang.org/account/avatar/00/14/b0/b0/30b29949.jpg","comment_is_top":false,"comment_ctime":1549587951,"is_pvip":false,"replies":[{"id":"23265","content":"æœ€æ—©çš„ddlå†…éƒ¨å®ç°å°±æ˜¯è¿™ä¹ˆåšçš„ğŸ˜†<br><br>ä¸è¿‡åŠ é”æ—¶é—´ä¹Ÿä¸çŸ­ã€‚<br> â€œå…ˆåŸºäºåŸè¡¨åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œå®Œæˆå­—æ®µæ›´æ–°ä¿®æ”¹ï¼›â€ è¿™ä¸ªè¿‡ç¨‹ï¼Œè¦åŒ…å«<br>â€œæŠŠåŸè¡¨çš„æ•°æ®å¯¼å…¥ä¸´æ—¶è¡¨â€å§ï¼Ÿ<br>å¯¼å…¥çš„è¿‡ç¨‹è¿˜æ˜¯å¯¹åŸè¡¨åŠ MDLé”çš„ã€‚<br><br>å¥½é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549669248,"ip_address":"","comment_id":65694,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10139522543","product_id":100020801,"comment_content":"å…³äºMDLå†™é”ï¼Œæœ‰ä¸ªæ›´å¥½çš„å¤„ç†æ–¹æ³•ä¸çŸ¥é“æ˜¯å¦ç¨³å¦¥ï¼Ÿå…ˆåŸºäºåŸè¡¨åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œå®Œæˆå­—æ®µæ›´æ–°ä¿®æ”¹ï¼›ç„¶åå¯¹åŸè¡¨åŠ MDLå†™é”ï¼ŒåŠ é”æˆåŠŸåæŠŠä¸´æ—¶è¡¨æ›´åä¸ºåŸè¡¨ï¼Œè¿™æ ·åŠ é”æ—¶é—´å¾ˆçŸ­ã€‚","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438553,"discussion_content":"æœ€æ—©çš„ddlå†…éƒ¨å®ç°å°±æ˜¯è¿™ä¹ˆåšçš„ğŸ˜†\n\nä¸è¿‡åŠ é”æ—¶é—´ä¹Ÿä¸çŸ­ã€‚\n â€œå…ˆåŸºäºåŸè¡¨åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œå®Œæˆå­—æ®µæ›´æ–°ä¿®æ”¹ï¼›â€ è¿™ä¸ªè¿‡ç¨‹ï¼Œè¦åŒ…å«\nâ€œæŠŠåŸè¡¨çš„æ•°æ®å¯¼å…¥ä¸´æ—¶è¡¨â€å§ï¼Ÿ\nå¯¼å…¥çš„è¿‡ç¨‹è¿˜æ˜¯å¯¹åŸè¡¨åŠ MDLé”çš„ã€‚\n\nå¥½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549669248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":51635,"user_name":"why","can_delete":false,"product_type":"c1","uid":1012937,"ip_address":"","ucode":"C9E796E53F6F5E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/c9/d3439ca4.jpg","comment_is_top":false,"comment_ctime":1545212427,"is_pvip":false,"replies":[{"id":"18680","content":"å—¯å—¯ï¼Œæ‰€ä»¥ä¹Ÿå«log ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545214946,"ip_address":"","comment_id":51635,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10135147019","product_id":100020801,"comment_content":"è¿™ Online DDL æœ‰ç‚¹åƒåœ¨ç²‰æ¿ä¸Šè®°è´¦ï¼šå…ˆæŠŠè¡¨å–å‡ºæ¥å†™åœ¨ç²‰æ¿ä¸Šï¼Œåœ¨ç²‰æ¿ä¸Šä¿®æ”¹ï¼Œå†è¿›è¡ŒçœŸæ­£çš„è¡¨ä¿®æ”¹ã€‚","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433544,"discussion_content":"å—¯å—¯ï¼Œæ‰€ä»¥ä¹Ÿå«log ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545214946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44732,"user_name":"å¤§ç”·å­©","can_delete":false,"product_type":"c1","uid":1026327,"ip_address":"","ucode":"F02ED59E849741","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/17/ed791bea.jpg","comment_is_top":false,"comment_ctime":1543483163,"is_pvip":false,"replies":[{"id":"16163","content":"ä¿è¯ï¼Œå¿…é¡»ä¿è¯ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543630976,"ip_address":"","comment_id":44732,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133417755","product_id":100020801,"comment_content":"å¯¹ä¸Šä¸€èŠ‚ç•™ä¸‹æ¥çš„ç´¢å¼• ca å’Œ cb é—®é¢˜çš„è§£é‡Šï¼Œæœ‰ä¸€ç‚¹ç–‘é—®ï¼Œç´¢å¼• ca å’Œç´¢å¼• c çš„æ•°æ®æ’å¸ƒåº”è¯¥æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯¹äºç´¢å¼• ca æ¥è¯´ï¼Œç´¢å¼•æ˜¯æŒ‰ç…§ c a æ¥æ’åºï¼Œè¿™ä¸ªæ²¡é—®é¢˜ã€‚å¯ä»¥å¯¹äºç´¢å¼• c æ¥è¯´ï¼Œç´¢å¼•ä¸­çš„æ•°æ®åªä¼šæŒ‰ç…§ c æ¥æ’åºçš„ï¼Œå­—æ®µ a å’Œ b å› ä¸ºæ˜¯è”åˆä¸»é”®ä¹Ÿä¼šå†—ä½™åœ¨ç´¢å¼• c é‡Œè¾¹ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯ç´¢å¼• c ä¸­çš„æ•°æ®æ˜¯æ»¡è¶³ cï¼Œa çš„æ’åºå§ï¼Ÿéº»çƒ¦è®²å¸ˆè§£ç­”ä¸‹","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430820,"discussion_content":"ä¿è¯ï¼Œå¿…é¡»ä¿è¯ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543630976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43541,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1543238331,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10133172923","product_id":100020801,"comment_content":"session C åœ¨ç­‰å¾…çš„æ—¶å€™å°±å¼€å§‹é˜»å¡åæ¥çš„è¯·æ±‚äº†ï¼Œä¸æ˜¯æ‹¿åˆ°ï¼ˆæ‹¿åˆ°ä»¥ååè€Œå¾ˆå¿«æ‰§è¡Œå°±æ”¾è¿‡äº†ï¼‰<br>@è€å¸ˆï¼Œè¿™å¥è¯å¯ä»¥ç†è§£ä¸ºinnodbå¼•æ“è·å¾—é”çš„æœºåˆ¶æ˜¯å…¬å¹³é”å—","like_count":2},{"had_liked":false,"id":43346,"user_name":"éƒ­åˆš","can_delete":false,"product_type":"c1","uid":1292032,"ip_address":"","ucode":"22CB8ECE8E3DCA","user_header":"https://static001.geekbang.org/account/avatar/00/13/b7/00/12149f4e.jpg","comment_is_top":false,"comment_ctime":1543217861,"is_pvip":false,"replies":[{"id":"15506","content":"é¢ï¼Œè¶…çº²äº†ï¼ŒğŸ˜‹<br><br>å—¯ï¼Œåœ¨çº¿DDLè¿˜æ˜¯è¦å€ŸåŠ©PTæˆ–è€…gh-ost","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543228882,"ip_address":"","comment_id":43346,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10133152453","product_id":100020801,"comment_content":"ä¸æ˜¯å¯ä»¥ç”¨pt-online-schema-changeåœ¨çº¿DDLå—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430366,"discussion_content":"é¢ï¼Œè¶…çº²äº†ï¼ŒğŸ˜‹\n\nå—¯ï¼Œåœ¨çº¿DDLè¿˜æ˜¯è¦å€ŸåŠ©PTæˆ–è€…gh-ost","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543228882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1945728,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/b0/80/88b0a557.jpg","nickname":"Stock66","note":"","ucode":"2D326A20CEB23D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540288,"discussion_content":"pt-online-schema-change çš„ç¡®å¥½ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640008898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43264,"user_name":"hhhh","can_delete":false,"product_type":"c1","uid":1256101,"ip_address":"","ucode":"9E87017424B382","user_header":"https://static001.geekbang.org/account/avatar/00/13/2a/a5/625c0a2e.jpg","comment_is_top":false,"comment_ctime":1543201786,"is_pvip":false,"replies":[{"id":"15472","content":"ä½ è¿™ä¸ªæ˜¯åŒä¸€ä¸ªä¼šè¯é‡Œé¢ğŸ˜“<br>ä¾‹å­ä¸­SessionA seesionB å°±æ˜¯è¡¨ç¤ºä¸æ˜¯åŒä¸€ä¸ªsession(ä¼šè¯ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543204376,"ip_address":"","comment_id":43264,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10133136378","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆæˆ‘åœ¨musql8.0ç‰ˆæœ¬ä¸­ï¼Œæ‰§è¡Œ<br>begin;<br>select * from t limit 1;<br>alter table t add g int;<br>select * from t limit 1;<br>commit;<br>å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œå¹¶æ²¡æœ‰é”ä½å‘€","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430341,"discussion_content":"ä½ è¿™ä¸ªæ˜¯åŒä¸€ä¸ªä¼šè¯é‡Œé¢ğŸ˜“\nä¾‹å­ä¸­SessionA seesionB å°±æ˜¯è¡¨ç¤ºä¸æ˜¯åŒä¸€ä¸ªsession(ä¼šè¯ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543204376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298308,"discussion_content":"å¦‚æœä½¿ç”¨ä¸¤ä¸ªHedisqlè¿™ç§çª—å£å·¥å…·ï¼Œæ³¨æ„ä½¿ç”¨æ‰“å¼€ä¸¤ä¸ªçª—å£ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªæŸ¥è¯¢é¢æ¿ï¼Œä¸€ä¸ªçª—å£å®é™…æ˜¯ä¸€ä¸ªsession","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597243124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10161,"discussion_content":"æ•´2ä¸ªå®¢æˆ·ç«¯åˆ†åˆ«æ‰§è¡Œä¸‹å°±èƒ½æ¨¡æ‹Ÿå‡ºæ¥äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568268194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43251,"user_name":"benying","can_delete":false,"product_type":"c1","uid":1247522,"ip_address":"","ucode":"DEBAB485F381CC","user_header":"https://static001.geekbang.org/account/avatar/00/13/09/22/22c0c4fa.jpg","comment_is_top":false,"comment_ctime":1543200634,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10133135226","product_id":100020801,"comment_content":"ç•™è¨€åŒºå¾ˆç²¾å½©ï¼Œè€å¸ˆå›ç­”çš„å¾ˆå¤šï¼Œå¾ˆåŠæ—¶ï¼ŒèŠ±äº†ä¸å°‘æ—¶é—´ï¼Œè°¢è°¢è€å¸ˆï¼Œè°¢è°¢åŒå­¦ä»¬ï¼Œè°¢è°¢ï¼","like_count":2},{"had_liked":false,"id":43239,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1543198535,"is_pvip":false,"replies":[{"id":"15469","content":"1. æ˜¯çš„<br>2. æ˜¯çš„ï¼Œå°±æ€•ä»–ä¸€ç›´commitï¼Œè€Œä¸”è¿˜æ²¡å‘ç°","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543204097,"ip_address":"","comment_id":43239,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133133127","product_id":100020801,"comment_content":"1. mysqldump å¯¼æ•°æ®çš„æ—¶å€™å¯åŠ¨äº‹åŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®å¯ä»¥æ­£å¸¸æ›´æ–°ï¼Œåœ¨å¯é‡å¤è¯»ä¸‹éš”ç¦»çº§åˆ«å¼€å¯çš„äº‹åŠ¡ï¼Œé‚£è¿™äº›æ›´æ–°çš„æ•°æ®å°±ä¸ä¼šè¢«å¤‡ä»½åªèƒ½ç­‰ä¸‹ä¸€æ¬¡å¤‡ä»½äº†æ˜¯å—<br>2. åŠ å­—æ®µçš„ä¾‹å­ï¼Œå¦‚æœæŠŠsession A commitï¼Œåé¢çš„æµç¨‹æ˜¯ä¸æ˜¯å¯ä»¥æ­£å¸¸æ‰§è¡Œäº†","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430333,"discussion_content":"1. æ˜¯çš„\n2. æ˜¯çš„ï¼Œå°±æ€•ä»–ä¸€ç›´commitï¼Œè€Œä¸”è¿˜æ²¡å‘ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543204097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43200,"user_name":"é˜¿è±†Dou","can_delete":false,"product_type":"c1","uid":1303898,"ip_address":"","ucode":"5D933075D93179","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/5a/b650ed8c.jpg","comment_is_top":false,"comment_ctime":1543195700,"is_pvip":false,"replies":[{"id":"15452","content":"ä¸åŠ è¡Œé”ï¼Œä½†æ˜¯MDLè¿˜æ˜¯åŠ çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543196313,"ip_address":"","comment_id":43200,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133130292","product_id":100020801,"comment_content":"MDLé”æ˜¯åœ¨Serverä¸­å®ç°ï¼Œä¸å…·ä½“çš„å­˜å‚¨å¼•æ“æ²¡æœ‰å…³ç³»ï¼Œä¹‹å‰ä¸æ˜¯è¯´innodbå¼€å¯äº‹åŠ¡ï¼Œäº‹åŠ¡é‡Œé¢selectæŸ¥è¯¢æ˜¯ä¸åŠ é”ï¼Œé€šè¿‡mvccå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œé‚£è¿™ä¸ªè·Ÿmdlé”æ˜¯ä»€ä¹ˆå…³ç³»å•Š","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430322,"discussion_content":"ä¸åŠ è¡Œé”ï¼Œä½†æ˜¯MDLè¿˜æ˜¯åŠ çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543196313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43154,"user_name":"Lingance","can_delete":false,"product_type":"c1","uid":1118405,"ip_address":"","ucode":"37847937CF2DBD","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/c5/5940aadc.jpg","comment_is_top":false,"comment_ctime":1543193193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10133127785","product_id":100020801,"comment_content":"â€“single-transaction æ˜¯ä¸€è‡´æ€§è¯»ï¼Œåœ¨å¼€å§‹å¤‡ä»½å‰å¼€å¯äº‹åŠ¡å¹¶å°†éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºå¯é‡å¤è¯»ã€‚æ‰€ä»¥å¤‡ä»½æœŸé—´ä¸»åº“ä¸Šåå‘èµ·çš„DDLåœ¨å¤‡åº“ä¸Šä¸å¯è§ã€‚","like_count":2},{"had_liked":false,"id":287531,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1618016738,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5912984034","product_id":100020801,"comment_content":"Online DDLçš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br>1. æ‹¿MDLå†™é”<br>2. é™çº§æˆMDLè¯»é”<br>3. çœŸæ­£åšDDL<br>4. å‡çº§æˆMDLå†™é”<br>5. é‡Šæ”¾MDLé”<br><br>1ã€2ã€4ã€5å¦‚æœæ²¡æœ‰é”å†²çªï¼Œæ‰§è¡Œæ—¶é—´éå¸¸çŸ­ã€‚ç¬¬3æ­¥å ç”¨äº†DDLç»å¤§éƒ¨åˆ†æ—¶é—´ï¼Œè¿™æœŸé—´è¿™ä¸ªè¡¨å¯ä»¥æ­£å¸¸è¯»å†™æ•°æ®ï¼Œæ˜¯å› æ­¤ç§°ä¸ºâ€œonline â€<br><br>é—®é¢˜ä¸€ï¼š<br>online ddlå¤§æ¦‚å°±æ˜¯æˆ‘åœ¨æœ¬åœ°ç»™å¤§è¡¨åŠ ç´¢å¼•ï¼ˆsession1ï¼‰æ—¶ï¼Œèƒ½å¤Ÿç»§ç»­æ‰§è¡Œcrudæ“ä½œ(session2)çš„åŸå› å§ã€‚<br><br>é—®é¢˜äºŒï¼š<br>æˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çº¿ä¸Šå¤§è¡¨ï¼ˆ2000ä¸‡+ï¼‰aæ˜¯ä¸ªçƒ­ç‚¹è¡¨ï¼Œæ¯ç§’ä¼šæœ‰10æ¡æ•°æ®insert.<br>è®¡åˆ’é‡‡ç”¨å½±å­æ‹·è´çš„æ–¹å¼è¿›è¡Œåœ¨çº¿å»ºç´¢å¼•ï¼Œdbaè¡¨ç¤ºä½¿ç”¨ä¸€äº›å·¥å…·è¿›è¡Œå½±å­æ‹·è´åœ¨çº¿å»ºç´¢å¼•ï¼Œå¯ä»¥ä¿è¯açš„å½±å­è¡¨å’Œaè¡¨æ•°æ®ä¸€è‡´ï¼Œæˆ‘è¡¨ç¤ºæ€€ç–‘ï¼Ÿ<br>æˆ‘æ‹…å¿ƒåˆ›å»ºç´¢å¼•è¿™æ®µæ—¶é—´äº§ç”Ÿçš„æ•°æ®ä¼šå¯¼è‡´ä¸ä¸€è‡´ã€‚<br><br>é—®é¢˜ä¸‰ï¼šå› ä¸ºmysqlï¼ˆçº¿ä¸Šç‰ˆæœ¬5.7ï¼‰æ”¯æŒonline ddlï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç²—æš´ç›´æ¥ç»™çƒ­ç‚¹å¤§è¡¨å»ºç´¢å¼•ï¼ˆæ­¤è¡¨æ— é•¿äº‹åŠ¡ï¼‰ï¼Ÿ<br><br>é—®é¢˜å››ï¼šçº¿ä¸Šæ˜¯ä¸»å¤‡æ¶æ„ï¼Œæ˜¯å¦å¯ä»¥å…ˆåœ¨å¤‡åº“å»ºç´¢å¼•ï¼Œå†ä¸»å¤‡åˆ‡æ¢ï¼Œå†ç»™åŸä¸»åº“å»ºç´¢å¼•ï¼Ÿä»¥ä¸Š3ç§æ–¹å¼å“ªç§æ›´é€‚åˆæˆ‘ä»¬çš„ä¸šåŠ¡ï¼Ÿ","like_count":1},{"had_liked":false,"id":277349,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1810189,"ip_address":"","ucode":"75F613D58909DB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZHw73tgCqGKhvticUWGRz4icgicu4hFWfKtacoFJeItH7maNuNUmjnEgDTJvOibwUWgGV0p6guNPibMVWDV4BUmEmlA/132","comment_is_top":false,"comment_ctime":1612366888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5907334184","product_id":100020801,"comment_content":"æ—è€å¸ˆä½ å¥½ï¼Œæœ€åå…³äºæ‰€åº”çš„ç­”æ¡ˆï¼Œæˆ‘è®¤ä¸ºç´¢å¼•ï¼ˆcï¼Œbï¼‰ä¹Ÿæ˜¯å¯ä»¥ä¸ç”¨çš„ã€‚<br>å› ä¸ºæ ¹æ®MRRåŸç†ï¼ŒMySQL å°†æ ¹æ®è¾…åŠ©ç´¢å¼•è·å–çš„ç»“æœé›†æ ¹æ®ä¸»é”®è¿›è¡Œæ’åºï¼Œå°†ä¹±åºåŒ–ä¸ºæœ‰åºï¼Œå¯ä»¥ç”¨ä¸»é”®é¡ºåºè®¿é—®åŸºè¡¨ï¼Œå°†éšæœºè¯»è½¬åŒ–ä¸ºé¡ºåºè¯»ï¼Œå¤šé¡µæ•°æ®è®°å½•å¯ä¸€æ¬¡æ€§è¯»å…¥æˆ–æ ¹æ®æ­¤æ¬¡çš„ä¸»é”®èŒƒå›´åˆ†æ¬¡è¯»å…¥ï¼Œä»¥å‡å°‘IOæ“ä½œï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚æ‰€ä»¥å³ä½¿æ²¡æœ‰(cï¼Œb)è¿™ä¸ªè¾…åŠ©ç´¢å¼•ç´¢å¼•ï¼Œwhere c=N order by b limit 1 æ—¶ï¼Œä¼šèµ°(c)ç´¢å¼•è¡¨ï¼Œç„¶åInnoDBä¼šæŠŠä¸»é”®å­—æ®µæ”¾åˆ°ç´¢å¼•å®šä¹‰å­—æ®µåé¢ï¼Œå³(c,a,b)ã€‚æ¥ç€è¿™ä¸ªç´¢å¼•ç»„ç»‡ç»“æ„è¿›è¡Œæ’åºï¼Œç„¶åæ‰å›è¡¨æŸ¥è¯¢ã€‚è¿™æ ·æƒ³ä¸çŸ¥é“å¯¹å—ï¼Ÿå¸Œæœ›è€å¸ˆå¸®å¿™è§£æƒ‘","like_count":1},{"had_liked":false,"id":224329,"user_name":"å°å¸ˆå‚…","can_delete":false,"product_type":"c1","uid":1998393,"ip_address":"","ucode":"9A4A2E6A4E9A96","user_header":"https://static001.geekbang.org/account/avatar/00/1e/7e/39/8d4fabee.jpg","comment_is_top":false,"comment_ctime":1591345973,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5886313269","product_id":100020801,"comment_content":"æˆ‘ç†è§£online DDLï¼š1. æ‹¿MDLå†™é”<br>2. é™çº§æˆMDLè¯»é”<br>3. çœŸæ­£åšDDL<br>4. å‡çº§æˆMDLå†™é”<br>5. é‡Šæ”¾MDLé”<br>åœ¨ç¬¬2æ­¥é™çº§ä¸ºè¯»é”ï¼Œç¬¬3æ­¥ä¿å­˜å¢é‡DMLï¼Œåœ¨ç¬¬4æ­¥å‡çº§MDLå†™é”ï¼Œæ‰§è¡Œå¢é‡DML","like_count":1},{"had_liked":false,"id":219961,"user_name":"ä¸€ä¸ªæœ‰å¿—æ°”çš„DB","can_delete":false,"product_type":"c1","uid":1807588,"ip_address":"","ucode":"514419E03590B4","user_header":"https://static001.geekbang.org/account/avatar/00/1b/94/e4/aad72736.jpg","comment_is_top":false,"comment_ctime":1590126245,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5885093541","product_id":100020801,"comment_content":"5.6è·Ÿ5.7ç‰ˆæœ¬ä¹‹é—´çš„MDLé”æ˜¯ä¸æ˜¯ä¸å¤ªä¸€æ ·ã€‚","like_count":1},{"had_liked":false,"id":178807,"user_name":"forever","can_delete":false,"product_type":"c1","uid":1574051,"ip_address":"","ucode":"3EBCD4AB045880","user_header":"https://static001.geekbang.org/account/avatar/00/18/04/a3/95de9a19.jpg","comment_is_top":false,"comment_ctime":1581831301,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5876798597","product_id":100020801,"comment_content":"è¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨?æ–‡ç« é‡Œè¿™å¥è¯æ²¡ç†è§£ï¼Œä¸ºä»€ä¹ˆä¸èƒ½æ“ä½œå…¶å®ƒè¡¨å‘¢ï¼Œä¸åªå¯¹å½“å‰è¡¨åŠ é”äº†å—","like_count":1,"discussions":[{"author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":241089,"discussion_content":"ä¸èƒ½æ“ä½œæœªè¢«å½“å‰çº¿ç¨‹åŠ é”çš„è¡¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587394353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177446,"user_name":"å•¸æ­Œ","can_delete":false,"product_type":"c1","uid":1113874,"ip_address":"","ucode":"D8C8963BB940F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er2rgam9XfHbuSIZB4S3UG2GLrf9CLkiatDG62eEMicT4yprYdSAZET3kfqQBPxqBHkZw2KRhMdJX4Q/132","comment_is_top":false,"comment_ctime":1581394011,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5876361307","product_id":100020801,"comment_content":"ALTER TABLE tbl_name NOWAIT add column ...<br>ALTER TABLE tbl_name WAIT N add column ... <br><br>é—®é¢˜1ï¼šåªæœ‰MariaDB æ”¯æŒè¿™ä¸ªè¯­æ³•ä¹ˆï¼Ÿå¦‚æœä¸æ˜¯MariaDB å‘¢ï¼Ÿ<br>é—®é¢˜2ï¼šå¤§è¡¨å¦‚ä½•å®‰å…¨åœ°å¢åŠ ä¸€ä¸ªä¸€ä¸ªå­—æ®µå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304907,"discussion_content":"online ddl","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599709767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1143234,"avatar":"","nickname":"åˆ˜ç‘","note":"","ucode":"7E712BC281A8A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217480,"discussion_content":"åŒé—®ï¼Œæœ‰äººå¯ä»¥è§£é‡Šä¸€ä¸‹å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585563950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166263,"user_name":"è¿·","can_delete":false,"product_type":"c1","uid":1294716,"ip_address":"","ucode":"F280A7D44470F9","user_header":"https://static001.geekbang.org/account/avatar/00/13/c1/7c/63f60a17.jpg","comment_is_top":false,"comment_ctime":1577427935,"is_pvip":false,"replies":[{"id":"63416","content":"å‡çº§åˆ°8.0ï¼Œå¿«é€ŸåŠ å­—æ®µ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1577445733,"ip_address":"","comment_id":166263,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5872395231","product_id":100020801,"comment_content":"è€å¸ˆå¸®å¿™è§£ç­”ä¸ªé—®é¢˜ï¼Œå‰ä¸¤å¤©ç³»ç»Ÿæ›´æ–°ï¼Œæœ‰ä¸€ä¸ªå¤§è¡¨2000w+çš„æ•°æ®ï¼Œè¦ç»™å®ƒåŠ ä¸ªå­—æ®µï¼Œå°è¯•è¿‡å…ˆå»ºä¸€ä¸ªæ–°è¡¨æŠŠå­—æ®µåŠ ä¸Šï¼Œç„¶åINSERT ...SELECTï¼Œè¿˜æœ‰ç›´æ¥ALERTä¿®æ”¹è¡¨ï¼Œéƒ½è¶…çº§æ…¢ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¥½åŠæ³•å—","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479465,"discussion_content":"å‡çº§åˆ°8.0ï¼Œå¿«é€ŸåŠ å­—æ®µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577445733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1294716,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c1/7c/63f60a17.jpg","nickname":"è¿·","note":"","ucode":"F280A7D44470F9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":106057,"discussion_content":"æˆ‘ä»¬æ˜¯ç”¨çš„é˜¿é‡Œçš„rdsæ•°æ®åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577509325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144194,"user_name":"ç‹¬ä¸€æ— äºŒ","can_delete":false,"product_type":"c1","uid":1692320,"ip_address":"","ucode":"A7DE0EA2BD8FE3","user_header":"https://static001.geekbang.org/account/avatar/00/19/d2/a0/c8714628.jpg","comment_is_top":false,"comment_ctime":1571877731,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5866845027","product_id":100020801,"comment_content":"è€å¸ˆï¼Œç´¢å¼•é‚£é“é¢˜ï¼Œcä¹Ÿå¯ä»¥å»æ‰ã€‚","like_count":1,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138354,"discussion_content":"æ˜¯çš„ï¼Œä½†æ˜¯ç›¸æ¯”å»æ‰cï¼Œé‚£caçš„ç©ºé—´å°±æ¯”cçš„ç©ºé—´å ç”¨å¤šï¼Œé‚£è¿˜ä¸å¦‚å»æ‰ca.","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579237423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126379,"user_name":"MrVito","can_delete":false,"product_type":"c1","uid":1252169,"ip_address":"","ucode":"716FF6F8871706","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/49/ddefc656.jpg","comment_is_top":false,"comment_ctime":1566376128,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5861343424","product_id":100020801,"comment_content":"onlineDDL: åœ¨master-slaveå¤‡ä»½è¿‡ç¨‹ä¸­ï¼Œè¦æ˜¯å¯¹masterä¸Šè¿›è¡ŒDDLï¼Œmasterå°±ä¼šå»æ‹¿MDLå†™é”ï¼Œ<br>è¦æ˜¯åœ¨å¤‡ä»½è¡¨å‘ç”Ÿï¼Œå°±ä¼šç­‰å¾…DDLäº‹åŠ¡ç»“æŸï¼Œé‡Šæ”¾å†™é”ï¼Œslaveå°±ä¼šå»¶è¿Ÿï¼Œå†è¿›è¡Œå¤åˆ¶è¿‡ç¨‹ï¼<br>è¦æ˜¯DDLå·²ç»è¿‡äº†å¤‡ä»½è¯¥è¡¨é‚£ä¸ªæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå·²ç»DDLäº†ï¼Œå¤‡ä»½å°±æ²¡æœ‰äº†åŠ è¿™ä¸ªå­—æ®µçš„è¡¨äº†ï¼<br>è¦æ˜¯DDLåœ¨ä¹‹å‰ï¼Œå¤‡ä»½è¡¨ä¹‹å‰ï¼Œå°±ä¼šç›´æ¥å¯¼åˆ°slaveå§ï¼Œå› ä¸ºå¯¹è¿™ä¸ªmysqldumpä¸ç†Ÿæ‚‰ï¼ä¸æ˜¯å¾ˆæ˜ç™½ï¼","like_count":1},{"had_liked":false,"id":112752,"user_name":"æ†¨çš®è‹","can_delete":false,"product_type":"c1","uid":1412429,"ip_address":"","ucode":"D0B4B7660DA766","user_header":"https://static001.geekbang.org/account/avatar/00/15/8d/4d/992070e8.jpg","comment_is_top":false,"comment_ctime":1562815148,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857782444","product_id":100020801,"comment_content":"1. slave ä¸Šè¿›è¡Œé€»è¾‘å¤‡ä»½<br>2. å¯¹è¡¨ t è¿›è¡Œ DDL æ“ä½œ<br>3. slave ä¸Šå¤‡ä»½åˆ°è¡¨ t æ—¶ï¼Œå¯¹è¡¨ t æ–½åŠ  MDL è¯»é”ï¼ˆç”±äº MDL é”åªæœ‰åœ¨äº‹åŠ¡ç»“æŸæ—¶æ‰é‡Šæ”¾ï¼Œåˆå› ä¸ºé€»è¾‘å¤‡ä»½åœ¨å¤‡ä»½ç»“æŸä¹‹åæ‰ç»“æŸäº‹åŠ¡ï¼‰<br>4. ç­‰åˆ°å¤‡ä»½ç»“æŸï¼Œè¡¨ t çš„ MDL è¯»é”é‡Šæ”¾ä¹‹åï¼Œæ‰èƒ½è¿›è¡Œ master ä¼ è¿‡æ¥çš„å¯¹è¡¨ t çš„ DDL æ“ä½œ","like_count":1},{"had_liked":false,"id":107971,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1561642354,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856609650","product_id":100020801,"comment_content":"é”ï¼Œåªè¦æœ‰é«˜å¹¶å‘å°±ä¼šæœ‰é”ã€‚<br><br>1ï¼šé”çš„æœ¬è´¨æ˜¯å•¥ï¼Ÿ<br><br>è€å¸ˆè®²æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œæˆ‘è§‰å¾—æ˜¯ä¸€ç§æ•°æ®åŒæ­¥çš„æ§åˆ¶æœºåˆ¶ã€‚è¿™ä¸ªè¿˜å¸Œæœ›è€å¸ˆæ·±å…¥è¯¦ç»†è®²è§£ä¸€ä¸‹ï¼Œä¸çŸ¥é“é”çš„åº•å±‚å®ç°è€å¸ˆä¼šä¸ä¼šè®²è®²ï¼Œæ˜¯ä¸æ˜¯å’ŒJAVAç±»ä¼¼-ç®¡ç¨‹&#47;ä¿¡å·é‡<br><br>2ï¼šæŒ‰é”å®šçš„èŒƒå›´å¯¹é”åˆ†ç±»<br><br>2-1ï¼šå…¨å±€é”-å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ï¼Œå…¸å‹ä½œç”¨æ˜¯å…¨åº“é€»è¾‘å¤‡ä»½ã€‚è¿™ä¸ªé”èŒƒå›´æœ€å¤§ï¼Œå¹¶å‘æ€§æœ€å·®ï¼Œä¸å¤ªå‹å¥½ï¼Œæ…ç”¨ã€‚<br><br>2-2ï¼šè¡¨çº§é”-åˆç»†åˆ†ä¸ºè¡¨çš„æ•°æ®é”(è¡¨é”)å’Œè¡¨çš„ç»“æ„é”(åŸæ•°æ®é”-MDLï¼ŒMySQL5.5æ—¶å¼•å…¥çš„)ï¼Œé”å®šçš„èŒƒå›´è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œä¸è¿‡æ²¡æœ‰è¡Œé”æ—¶åªèƒ½ç”¨è¿™ä¸ªå•¦ï¼<br><br>2-3ï¼šè¡Œçº§é”-é’ˆå¯¹è¡¨ä¸­çš„è¡Œæ•°æ®è¿›è¡ŒåŠ é”<br><br>3ï¼šæ„Ÿè§‰è¿™èŠ‚å­¦çš„ä¸å¥½ï¼Œåªæ˜¯ä»æ¦‚å¿µä¸Šäº†è§£äº†ä¸€ä¸‹MySQLçš„é”ï¼Œä¸çŸ¥é“é”å…·ä½“æ˜¯æ€ä¹ˆé”å®šçš„ã€‚<br><br>å…³é”®è¿˜æ˜¯è‡ªå·±å®åŠ›æœ‰é™ï¼Œçœ‹åˆ°è¯„è®ºä¸­çš„æŸäº›é—®é¢˜ï¼Œæçš„çœŸæ˜¯ç²¾å½©ï¼Œæœ‰äº›è®©æˆ‘æœ‰ç§è±ç„¶å¼€æœ—çš„æ„Ÿè§‰ã€‚<br><br>æ¯”å¦‚ï¼š<br><br>3-1ï¼šMDLé”çš„ä½œç”¨ä¸»è¦æ˜¯é˜²æ­¢DMLå’ŒDDLçš„å¹¶å‘å†²çªï¼Œå¹¶ä¸”è¿™ä¸ªé”æ“ä½œæ—¶ä¼šé»˜è®¤åŠ ä¸Š<br><br>3-2ï¼šreadonlyå¯¹superæƒé™æ— æ•ˆ<br><br>3-3ï¼šç»™ä¸€ä¸ªè¡¨åŠ å­—æ®µæˆ–è€…ä¿®æ”¹å­—æ®µæˆ–è€…åŠ ç´¢å¼•ï¼Œä¼šæ‰«æå…¨è¡¨çš„æ•°æ®ï¼Œè¿™æ˜¯è€å¸ˆæ–‡ä¸­è®²çš„ï¼Œåœ¨è¯„è®ºä¸­æœ‰åŒå­¦é—®ï¼Œè€å¸ˆåˆè¯´åŠ æ™®é€šå­—æ®µä¸ç”¨é‡å»ºå…¨è¡¨ï¼ŒåŠ ç´¢å¼•éœ€è¦ã€‚è¿™é‡Œæ²¡æ˜ç™½è€å¸ˆçš„æ„æ€ï¼Ÿæ„Ÿè§‰ç­”éæ‰€é—®å•Šï¼Ÿæˆ‘é‡æ–°æè¿°ä¸€ä¸‹é—®é¢˜ï¼Œç»™ä¸€å¼ è¡¨åŠ ä¸€ä¸ªå­—æ®µä¸åŠ ç´¢å¼•æ˜¯åªä¿®æ”¹è¡¨çš„ç»“æ„ï¼Œè¡¨ä¸­çš„æ•°æ®ä¸å˜æ˜¯å—ï¼Ÿè¿˜æ˜¯ä¼šä¸ºæ¯è¡Œæ•°æ®åŠ ä¸Šæ–°å­—æ®µçš„å€¼ï¼Ÿ<br><br>3-4ï¼šçœ‹åˆ°è¯„è®ºä¸­æœ‰åŒå­¦é—®ï¼Œå…¨å±€é”å’Œè¡¨é”æ˜¯åœ¨Serverå±‚å®ç°çš„ï¼ŒServerå±‚åˆåˆ†æˆå¥½å‡ å—ï¼Œå…·ä½“æ˜¯åœ¨é‚£ä¸€å—å‘¢ï¼Ÿä¼˜åŒ–å™¨ï¼Ÿæ‰§è¡Œå™¨å˜›ï¼Ÿå¦å¤–ï¼Œè¡Œé”æ˜¯åœ¨å“ªé‡Œå®ç°çš„å‘¢ï¼Ÿæ„Ÿè§‰ä¹Ÿæ˜¯Serverå±‚ï¼Ÿæˆ‘çŒœ<br><br>3-5ï¼šå†é—®ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡è®²è§£äº†é”çš„åˆ†ç±»ã€ä½œç”¨ï¼Œæˆ‘åœ¨å¹³æ—¶å¼€å‘æ—¶å‡ ä¹æ²¡æœ‰ä¸»åŠ¨åšè¿‡åŠ é”è§£é”çš„æ“ä½œï¼Œæ˜¯ä¸æ˜¯é”çš„è§¦å‘éƒ½æ˜¯æˆ‘ä»¬çš„æŸäº›æ“ä½œåˆ°äº†Serverå±‚ï¼ŒMySQLè‡ªåŠ¨åˆ†æè§¦å‘çš„ï¼ŒåŒ…æ‹¬åŠ è§£é”ç­‰ã€‚å¦‚æœæ˜¯è¿™æ ·é‚£åŠ è§£é”å…·ä½“ä»€ä¹ˆåŠ¨ä½œå‘¢ï¼ŸMySQLæ€ä¹ˆä¿è¯è¿™äº›åŠ¨ä½œçš„æœ‰åºè¿ä½œå‘¢ï¼ŸğŸ˜„ä¸çŸ¥åé¢ä¼šè®²ä¸<br><br><br>","like_count":1},{"had_liked":false,"id":94582,"user_name":"do it","can_delete":false,"product_type":"c1","uid":1309911,"ip_address":"","ucode":"E0753912E8F2AF","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/d7/b102034a.jpg","comment_is_top":false,"comment_ctime":1557845810,"is_pvip":false,"replies":[{"id":"34306","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1558260858,"ip_address":"","comment_id":94582,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852813106","product_id":100020801,"comment_content":"ä¸ªäººå°ç»“<br>é”ç±»å‹:å…¨å±€é”ã€è¡¨é”ã€è¡Œé”ã€‚<br>å…¨å±€é”:å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ã€‚<br>       å‘½ä»¤:FTWRL(Flush table with read lock)<br>        è¡Œä¸º:ä½¿æ•´ä¸ªåº“å¤„äºåªè¯»çŠ¶æ€ã€‚<br>         ä½¿ç”¨åœºæ™¯:å…¨å±€é€»è¾‘åº“å¤‡ä»½ã€‚<br>         å­˜åœ¨å±é™©:å¦‚æœåœ¨ä¸»åº“ä¸Šå¤‡ä»½ï¼Œåœ¨å¤‡ä»½åŒºé—´éƒ½ä¸èƒ½æ‰§è¡Œæ›´æ–°ï¼Œä¸šåŠ¡åŸºæœ¬åœæ‘†ï¼›å¦‚æœåœ¨ä»åº“ä¸Šå¤‡ä»½ï¼Œåœ¨å¤‡ä»½åŒºé—´ä»åº“ä¸èƒ½æ‰§è¡Œä¸»åº“åŒæ­¥è¿‡æ¥çš„binlogï¼Œä¼šå¯¼è‡´ä¸»ä»å»¶è¿Ÿã€‚<br>é€»è¾‘å¤‡ä»½å·¥å…·mysqldump:ä½¿ç”¨å‚æ•° -single-transactionçš„æ—¶å€™ï¼Œå¯¼æ•°æ®ä¹‹å‰å°±ä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œæ¥ç¡®ä¿æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ã€‚ç”±äºMVCC(å¤šäº‹åŠ¡å¹¶å‘æ§åˆ¶)çš„æ”¯æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°çš„ã€‚æ‰€ä»¥single-transactionæ–¹æ³•åªé€‚ç”¨äºæ‰€æœ‰çš„è¡¨ä½¿ç”¨äº‹åŠ¡å¼•æ“çš„åº“ã€‚<br>set global readonly=trueå…¨åº“åªè¯»çŠ¶æ€ã€‚<br>set global readonly=trueå’ŒFTWRLæ–¹å¼ï¼Œå»ºè®®é‡‡ç”¨FTWRLï¼Œä¸»è¦åŸå› æœ‰:<br>1ã€åœ¨æœ‰äº›ç³»ç»Ÿä¸­ï¼Œreadonlyçš„å€¼ä¼šè¢«ç”¨æ¥åšå…¶ä»–é€»è¾‘ï¼Œæ¯”å¦‚ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªåº“æ˜¯ä¸»åº“è¿˜æ˜¯ä»åº“ã€‚<br>2ã€åœ¨å¼‚å¸¸çš„å¤„ç†æœºåˆ¶ä¸Šæœ‰å·®å¼‚ã€‚å¦‚æœæ‰§è¡ŒFTWRLå‘½ä»¤ä¹‹åç”±äºå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸å¯¼è‡´æ–­å¼€ï¼Œé‚£ä¹ˆMYSQLä¼šè‡ªåŠ¨é‡Šæ”¾è¿™ä¸ªå…¨å±€é”ï¼Œæ•´ä¸ªåº“å›åˆ°æ­£å¸¸æ›´æ–°çŠ¶æ€ã€‚å¦‚æœåº“è®¾ç½®ä¸ºreadonlyä¹‹åï¼Œå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸ï¼Œä¹Ÿæ•°æ®åº“ä¼šä¸€ç›´ä¿æŒreadonlyçŠ¶æ€ï¼Œå¯¼è‡´æ•´ä¸ªåº“é•¿æ—¶é—´å¤„äºä¸å¯ä»¥çš„çŠ¶æ€ï¼Œé£é™©è¾ƒé«˜ã€‚<br>å¢åˆ æ”¹æ•°æ®(DML)<br>åŠ å­—æ®µç­‰ä¿®æ”¹è¡¨ç»“æ„çš„æ“ä½œ(DDL)<br>è¡¨çº§é”<br>ç±»å‹:è¡¨é”å’Œå…ƒæ•°æ®é”(meta data lock. MDL)<br>è¡¨é”<br>è¡¨é”è¯­æ³•:lock tables. ... read&#47;write.  unlock tables<br>æ³¨æ„ç‚¹:ä¼šé™å®šåˆ«çš„çº¿ç¨‹è¯»å†™ï¼Œä¹Ÿé™å®šæœ¬çº¿ç¨‹æ¥ä¸‹æ¥çš„æ“ä½œå¯¹è±¡ã€‚<br>å…ƒæ•°æ®é”MDL<br>ä¸éœ€è¦æ˜¾ç¤ºä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€ä¸ªè¡¨çš„æ—¶å€™ä¼šè‡ªåŠ¨è¢«åŠ ä¸Šã€‚<br>ä½œç”¨:ä¿è¯è¯»å†™çš„æ­£ç¡®æ€§ã€‚<br>MYSQL 5.5ç‰ˆæœ¬å¼•å…¥äº†MDLï¼Œå½“å¯¹ä¸€ä¸ªè¡¨åšDMLæ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLè¯»é”ï¼›å½“å¯¹è¡¨åšDDLæ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLå†™é”ã€‚<br>å¦‚ä½•å®‰å…¨çš„ç»™å°è¾¹åŠ å­—æ®µï¼Ÿ<br>NOWAIT&#47;WAIT N è¯­æ³•<br>Alter table tbl_name NOWAIT add column....<br>Alter tbl_name WAIT N add column....","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450115,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558260858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84101,"user_name":"åˆ˜é‡‘é‡‘777","can_delete":false,"product_type":"c1","uid":1129065,"ip_address":"","ucode":"1AB26D07BB8CDA","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/69/301a5c89.jpg","comment_is_top":false,"comment_ctime":1554784742,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5849752038","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ç‚¹ç–‘æƒ‘ï¼Œè¯·å¸®å¿™è§£ç­”<br>1ï¼Œè¡¨çº§é”é™åˆ¶æœ¬çº¿ç¨‹æ“ä½œ  &quot;è¿å†™t1éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¸èƒ½è®¿é—®å…¶ä»–è¡¨&quot;ï¼Œ ä¸ºä»€ä¹ˆä¸èƒ½è®¿é—®å…¶ä»–è¡¨å‘¢ï¼Ÿ<br>2ï¼Œå…¨å±€é”çš„ä½¿ç”¨åœºæ™¯æ˜¯å…¨åº“å¤‡ä»½ã€‚ä¸æ˜¯æœ‰binlogå¤‡ä»½å½’æ¡£å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦å†ä½¿ç”¨ä¸€å¥—é€»è¾‘å¤‡ä»½ã€‚<br>3ï¼Œä½¿ç”¨FTWRLå¦‚ä½•åšå…¨åº“é€»è¾‘å¤‡ä»½ï¼Ÿä¸æ˜¯æœ‰é˜»å¡ä¸»ä»åº“æ›´æ–°çš„å±é™©å—<br>4ï¼Œçƒ­ç‚¹è¡¨åŠ å­—æ®µæ—¶ï¼ŒåŠ ä¸Šå†™é”åï¼Œåœ¨æ”¹è¡¨çš„è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¢åˆ æ”¹è¶³å¤Ÿçƒ­ï¼Œåé¢çš„DMLè¯­å¥ä¸€æ ·ä¼šé˜»å¡ï¼Œè¿˜ä¼šå‡ºç°å’Œä¸Šé¢ä¸€æ ·çš„é—®é¢˜ï¼Œåº“çº¿ç¨‹çˆ†æ»¡ã€‚ <br>è¿™æ—¶å°±åº”è¯¥é”™è¿‡é«˜å³°ä¿®æ”¹è¡¨å§<br>5ï¼Œç°åœ¨mysqlçš„DDLä¸æ”¯æŒç­‰å¾…è¶…æ—¶æˆ–ä¸ç­‰å¾…è¿”å›ï¼Œé‚£çº¿ä¸Šåº”è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ<br>6ï¼Œ5.6ä»¥åæœ‰äº†online ddlï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸ç”¨æ³¨æ„çƒ­è¡¨åŠ å­—æ®µå¼•å‘çš„é—®é¢˜äº†å‘—","like_count":1,"discussions":[{"author":{"id":1644104,"avatar":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","nickname":"èŒ¶æ²¡å–å®Œ","note":"","ucode":"D72D88C42A1258","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553766,"discussion_content":"1ã€ä¸€æ¬¡æ€§è·å–æ‰€æœ‰é”ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½æ­»é”ã€‚\neg: sessionA è·å–tableAçš„è¯»é”ï¼Œå‡†å¤‡å»ç”³è¯·tableBçš„å†™é”\n     sessionB è·å–tableBçš„å†™é”ï¼Œå‡†å¤‡å»ç”³è¯·tableAçš„å†™é”\n     æ­¤æ—¶ä¸¤ä¸ªsessionå°±æ­»é”äº†ã€‚å¦‚æœsessionA sessionBä¸€æ¬¡æ€§ç”³è¯·è·å–æ‰€æœ‰çš„é”å°±ä¸ä¼šæ­»é”äº†ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646061732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83039,"user_name":"æœè¶…","can_delete":false,"product_type":"c1","uid":1183380,"ip_address":"","ucode":"8123F1E13D6A68","user_header":"https://static001.geekbang.org/account/avatar/00/12/0e/94/67fffed1.jpg","comment_is_top":false,"comment_ctime":1554380056,"is_pvip":true,"replies":[{"id":"30007","content":"è¦çœ‹æ˜¯æ‰§è¡Œä»€ä¹ˆè¯­å¥å“ˆ<br><br>åŸºæœ¬éƒ½æ˜¯åœ¨æ‰§è¡Œå™¨é”çš„ï¼Œä½†æ˜¯ä¸åŒçš„è¯­å¥é˜¶æ®µä¸åŒï¼Œ<br>æ¯”å¦‚lock table ï¼Œå°±æ²¡æœ‰ç”Ÿæˆå¿«ç…§ï¼Œç›´æ¥é”è¡¨äº†ï¼›<br>å¦‚æœæ˜¯myisamçš„æ›´æ–°è¯­å¥ï¼Œæ˜¯åœ¨å¼•æ“å†…ç¬¬ä¸€æ¬¡ä½¿ç”¨è¡¨çš„æ—¶å€™åŠ ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1554431715,"ip_address":"","comment_id":83039,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5849347352","product_id":100020801,"comment_content":"æ˜¯åœ¨æ‰§è¡Œå™¨æ‰§è¡Œæ—¶ ç”Ÿæˆå¿«ç…§ è¿›è¡Œé”è¡¨å¯¹å§","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445831,"discussion_content":"è¦çœ‹æ˜¯æ‰§è¡Œä»€ä¹ˆè¯­å¥å“ˆ\n\nåŸºæœ¬éƒ½æ˜¯åœ¨æ‰§è¡Œå™¨é”çš„ï¼Œä½†æ˜¯ä¸åŒçš„è¯­å¥é˜¶æ®µä¸åŒï¼Œ\næ¯”å¦‚lock table ï¼Œå°±æ²¡æœ‰ç”Ÿæˆå¿«ç…§ï¼Œç›´æ¥é”è¡¨äº†ï¼›\nå¦‚æœæ˜¯myisamçš„æ›´æ–°è¯­å¥ï¼Œæ˜¯åœ¨å¼•æ“å†…ç¬¬ä¸€æ¬¡ä½¿ç”¨è¡¨çš„æ—¶å€™åŠ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554431715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77783,"user_name":"å®‹åˆ©ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1011486,"ip_address":"","ucode":"6472B84663CED0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6f/1e/5c062485.jpg","comment_is_top":false,"comment_ctime":1552997815,"is_pvip":false,"replies":[{"id":"28909","content":"è¿™é‡Œè¯´çš„æ˜¯â€œMDLè¯»é”â€<br><br>å¯¹æ•°æ®è¡¨åšå¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼ŒåŠ çš„éƒ½æ˜¯â€œMDLè¯»é”â€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1553415971,"ip_address":"","comment_id":77783,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847965111","product_id":100020801,"comment_content":"è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥ã€‚ <br><br>è¿™é‡Œæ˜¯å¦å†™é”™äº†ï¼Œåº”è¯¥æ˜¯â€œä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨æ‰§è¡ŒæŸ¥â€ï¼Œè€Œä¸æ˜¯â€œå¢åˆ æ”¹æŸ¥â€ï¼Œå¢åˆ è¯¥ä¸æ˜¯å†™å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443851,"discussion_content":"è¿™é‡Œè¯´çš„æ˜¯â€œMDLè¯»é”â€\n\nå¯¹æ•°æ®è¡¨åšå¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼ŒåŠ çš„éƒ½æ˜¯â€œMDLè¯»é”â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553415971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77409,"user_name":"çº¸ç‰‡äºº","can_delete":false,"product_type":"c1","uid":1358508,"ip_address":"","ucode":"84490E7CEF59A4","user_header":"https://static001.geekbang.org/account/avatar/00/14/ba/ac/b44b256a.jpg","comment_is_top":false,"comment_ctime":1552919652,"is_pvip":false,"replies":[{"id":"28815","content":"è¿™ä¸ªæ˜¯ä¸€ä¸ªä¼˜åŒ–ï¼Œå‡å°‘äº†ç´¢å¼•å¤§å°å•¦ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1553344764,"ip_address":"","comment_id":77409,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847886948","product_id":100020801,"comment_content":"è€å¸ˆï¼Œç´¢å¼•cå’Œç´¢å¼•caçš„æ’åºç›¸åŒï¼Œæˆ‘ç†è§£ã€‚æä¸æ‡‚çš„æ˜¯ï¼Œä¸æ˜¯è¯´ï¼Œç´¢å¼•çš„å¶å­å­˜å‚¨çš„æ˜¯ä¸»é”®å—ï¼Ÿä¸ºä»€ä¹ˆç« èŠ‚æœ«å°¾ç´¢å¼•caå’Œç´¢å¼•cbçš„ä¸»é”®éƒ¨åˆ†ï¼Œåªæœ‰â€œåŠä¸ªâ€ç´¢å¼•ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443713,"discussion_content":"è¿™ä¸ªæ˜¯ä¸€ä¸ªä¼˜åŒ–ï¼Œå‡å°‘äº†ç´¢å¼•å¤§å°å•¦ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553344764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76373,"user_name":"å”¯å¥¹å‘½","can_delete":false,"product_type":"c1","uid":1240398,"ip_address":"","ucode":"8F687E8D306840","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/4e/ef406442.jpg","comment_is_top":false,"comment_ctime":1552579826,"is_pvip":false,"replies":[{"id":"27974","content":"å—¯ï¼Œå¦‚æœæ²¡æœ‰beginï¼Œé‚£ä¹ˆmdlé”ä¼šåœ¨æŸ¥è¯¢è¯­å¥æ‰§è¡Œå®Œæˆä¹‹åå°±é‡Šæ”¾","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1552694738,"ip_address":"","comment_id":76373,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5847547122","product_id":100020801,"comment_content":"è€å¸ˆï¼Œmdlé”ï¼ŒsessionA,å¦‚æœæŠŠbeginå»äº†ï¼Œæ˜¯ä¸æ˜¯å°±ä¸å­˜åœ¨é—®é¢˜äº†","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443279,"discussion_content":"å—¯ï¼Œå¦‚æœæ²¡æœ‰beginï¼Œé‚£ä¹ˆmdlé”ä¼šåœ¨æŸ¥è¯¢è¯­å¥æ‰§è¡Œå®Œæˆä¹‹åå°±é‡Šæ”¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552694738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2020865,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d6/01/eaa50203.jpg","nickname":"zft","note":"","ucode":"74DEC5FBA610B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278950,"discussion_content":"äº‹åŠ¡æäº¤åæ‰ä¼šé‡Šæ”¾MDLé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591263035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74316,"user_name":"Aaaaaaaaaaayou","can_delete":false,"product_type":"c1","uid":1073601,"ip_address":"","ucode":"67BA315B87587D","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/c1/93031a2a.jpg","comment_is_top":false,"comment_ctime":1552188315,"is_pvip":false,"replies":[{"id":"27198","content":"ä¼šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1552229152,"ip_address":"","comment_id":74316,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847155611","product_id":100020801,"comment_content":"ä¸ŠæœŸé—®é¢˜æ—¶é—´é‡Œé¢æœ‰ä¸ªåœ°æ–¹è¯·æ•™ä¸‹ï¼š<br><br>â€œç´¢å¼•caçš„ç»„ç»‡æ˜¯æŒ‰ç…§cæ’åºï¼Œå†æŒ‰ç…§aæ’åºâ€<br><br>å¦‚æœc aéƒ½ç›¸åŒï¼Œä¼šä¸ä¼šç»§ç»­æŒ‰ç…§bæ’åºå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442526,"discussion_content":"ä¼šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552229152,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65865,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1549706930,"is_pvip":false,"replies":[{"id":"23410","content":"è¿™ä¸ªè¯­æ³•æ˜¯MariaDBæ‰æ”¯æŒçš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549874169,"ip_address":"","comment_id":65865,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5844674226","product_id":100020801,"comment_content":"mysql 5.7.21 ä¸‹æ‰§è¡Œ alter table xx wait 5 add column xxx,  æ˜¾ç¤ºè¯­æ³•é”™è¯¯ï¼Œè¯·é—®mysqlä¸æ”¯æŒåœ¨ä¿®æ”¹è¡¨ç»“æ„çš„æ—¶å€™æ·»åŠ MDLé”ç­‰å¾…è¶…æ—¶æ—¶é—´å—","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438618,"discussion_content":"è¿™ä¸ªè¯­æ³•æ˜¯MariaDBæ‰æ”¯æŒçš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549874169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54944,"user_name":"è‰¾è‰","can_delete":false,"product_type":"c1","uid":1302279,"ip_address":"","ucode":"E0D8F58FE6D122","user_header":"https://static001.geekbang.org/account/avatar/00/13/df/07/7bf65329.jpg","comment_is_top":false,"comment_ctime":1545986163,"is_pvip":false,"replies":[{"id":"19877","content":"ä½ æ²¡é‡Œç†è§£é”™ï¼Œ5.6çš„å®ç°ç¡®å®æ˜¯â€œä¸€ä¸ªDDLï¼Œç”±äºè¢«å…¶å®ƒçº¿ç¨‹çš„MDLè¯»é”å µä½ï¼Œè‡ªå·±æ— æ³•æ‰§è¡Œï¼Œä½†æ˜¯ä¼šå µä½åç»­MDLè¯»é”çš„ç”³è¯·â€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545988403,"ip_address":"","comment_id":54944,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840953459","product_id":100020801,"comment_content":"è€å¸ˆï¼š<br>åœ¨mdlé”è¿™ä¸€å—æœ‰ä¸€ç‚¹ä¸æ¸…æ¥šã€‚<br>aè·å–mdlè¯»é”ï¼Œè¿™æ—¶å€™cè¦è·å–mdlå†™é”ä¼šè¢«é˜»å¡ï¼Œcè¢«é˜»å¡æ˜¯å› ä¸ºè¦ç­‰aé‡Šæ”¾ï¼Œæ‰èƒ½è·å–å†™é”ï¼Œä¸ºå•¥cåœ¨è¢«é˜»å¡çš„æ—¶å€™ï¼Œå…¶ä»–çš„æŸ¥è¯¢è¯­å¥ä¹Ÿä¼šè¢«é˜»å¡ï¼Œä¸æ˜¯è¯´è¯»é”ä¸äº’æ–¥å—ï¼Ÿè¿˜æ˜¯è¯´æˆ‘ç†è§£é”™äº†ï¼Œåº”è¯¥ç†è§£ä¸ºcè·å–å†™é”ä¹‹åï¼Œåœ¨æ²¡é‡Šæ”¾å†™é”æœŸé—´ï¼Œå…¶ä»–çš„è¯»é”ä¼šè¢«é˜»å¡ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434625,"discussion_content":"ä½ æ²¡é‡Œç†è§£é”™ï¼Œ5.6çš„å®ç°ç¡®å®æ˜¯â€œä¸€ä¸ªDDLï¼Œç”±äºè¢«å…¶å®ƒçº¿ç¨‹çš„MDLè¯»é”å µä½ï¼Œè‡ªå·±æ— æ³•æ‰§è¡Œï¼Œä½†æ˜¯ä¼šå µä½åç»­MDLè¯»é”çš„ç”³è¯·â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545988403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52106,"user_name":"Cv","can_delete":false,"product_type":"c1","uid":1062797,"ip_address":"","ucode":"C77CE172B5AA28","user_header":"","comment_is_top":false,"comment_ctime":1545310511,"is_pvip":false,"replies":[{"id":"18912","content":"21ç¯‡ä¼šè¯´åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545314953,"ip_address":"","comment_id":52106,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840277807","product_id":100020801,"comment_content":"èƒ½ä¸èƒ½è®²è§£ä¸‹åœ¨æœ‰å”¯ä¸€ç´¢å¼•æƒ…å†µä¸‹å¹¶å‘insertå‡ºç°çš„æ­»é”é—®é¢˜","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433743,"discussion_content":"21ç¯‡ä¼šè¯´åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545314953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":51612,"user_name":"å¿µä½ å¦‚æ˜”","can_delete":false,"product_type":"c1","uid":1323531,"ip_address":"","ucode":"FCAD88AB57D084","user_header":"https://static001.geekbang.org/account/avatar/00/14/32/0b/981b4e93.jpg","comment_is_top":false,"comment_ctime":1545207696,"is_pvip":false,"replies":[{"id":"18688","content":"è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è‚¯å®šæ˜¯åŠ äº†MDLè¯»é”çš„ï¼Œæ‰€ä»¥ä¼šè¢«é”","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545221085,"ip_address":"","comment_id":51612,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5840174992","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒæŒ‰æ‚¨çš„è¯´æ³•ï¼šselectä¼šåŠ MDLè¯»é”ï¼Œè€Œå¢åˆ æ”¹æŸ¥ä¹Ÿä¼šåŠ MDLè¯»é”ï¼Œè¯»é”äº’ä¸æ’æ–¥ï¼Œé‚£ä¹ˆæœªåœ¨äº‹åŠ¡ä¸­å…¨è¡¨æ‰«æè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æ‰§è¡Œdmlæ“ä½œã€‚<br>ä»¥å‰æˆ‘ä¸€ç›´ä»¥ä¸º<br>      1.selectä¸ä¼šåŠ é”ï¼Œæ‰€ä»¥dmlæ“ä½œå¯ä»¥æ‰§è¡Œï¼›<br>      2.ddlæ“ä½œè¢«é˜»å¡çš„åŸå› æ˜¯ï¼Œæœ‰å¯¹è¯¥è¡¨çš„DMLæˆ–DDLæ“ä½œæœªæ‰§è¡Œå®Œï¼›æ²¡æˆæƒ³äº‹åŠ¡ä¸­selectè¯­å¥ä¹Ÿèƒ½å¯¹DDLæ“ä½œé€ æˆå µå¡ã€‚<br>è¿˜æœ‰ä¸ªç–‘é—®ï¼šå¦‚æœselectæ²¡åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œé‚£ä¹ˆåœ¨selectæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œåº”è¯¥ä¹Ÿæ˜¯ä¸å¯ä»¥æ‰§è¡ŒDDLæ“ä½œçš„å§ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433534,"discussion_content":"è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è‚¯å®šæ˜¯åŠ äº†MDLè¯»é”çš„ï¼Œæ‰€ä»¥ä¼šè¢«é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545221085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10219,"discussion_content":"è€å¸ˆæ˜¯ä¸æ˜¯åº”è¯¥è¿™ä¹ˆç†è§£ã€‚è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œ1. è‚¯å®šæœ‰äº‹åŠ¡ï¼Œä¸ç®¡æ˜¯è‡ªåŠ¨çš„è¿˜æ˜¯è‡ªå·±æ‰‹åŠ¨beginçš„ 2. è‚¯å®šæœ‰MDLé”ã€‚å¯èƒ½æ˜¯è¯»é”ï¼Œä¹Ÿå¯èƒ½æ˜¯å†™é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568276724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50858,"user_name":"çœ‹ä¸åˆ°deé¢œè‰²","can_delete":false,"product_type":"c1","uid":1162714,"ip_address":"","ucode":"88348CCAE81931","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/da/3d76ea74.jpg","comment_is_top":false,"comment_ctime":1545055844,"is_pvip":false,"replies":[{"id":"18309","content":"ä¸ä¼šï¼Œåé¢çš„æ”¹ç”¨å¤±è´¥ç­–ç•¥äº†ï¼Œ<br><br>å°±æ˜¯Bæäº¤å‰Då¯ä»¥è¯»ï¼Œä½†æ˜¯Bæäº¤åæ”¾å¼€é”ä¼šè®©Cæ”¹è¡¨ç»“æ„ï¼Œå¦‚æœDå†è¯»ï¼Œå°±æŠ¥é”™â€œè¡¨ç»“æ„å·²ç»å‘ç”Ÿäº†å˜åŒ–â€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545065480,"ip_address":"","comment_id":50858,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840023140","product_id":100020801,"comment_content":"åœ¨ä¸€å¼€å§‹çš„è·å–MDLé”çš„é˜¶æ®µï¼Œsession Aï¼ˆMDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œï¼‰-&gt; session B (MDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œ) -&gt; session C (MDLå†™é”ï¼Œè¢«block) -&gt; session D (MDLè¯»é”ï¼Œè¢«MDLå†™é” block) ã€‚æ˜¯ä¸æ˜¯è¯´åŠ MDLé”æ˜¯çœ‹æ—¶é—´å…ˆåé¡ºåºçš„ï¼Œä¸€æ—¦å‡ºç°è¿‡éœ€è¦è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œåç»­å†éœ€è¦è·å–MDLè¯»é”ï¼Œåˆ™å‘ç°ä¹‹å‰å·²ç»æœ‰è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œéœ€è¦è·å–è¯»é”çš„sessionéƒ½ä¼šè¢«blockã€‚æ„Ÿè§‰ä¸Šåƒè¿›å…¥ä¸€ä¸ªé”çš„â€é˜Ÿåˆ—â€œï¼Œæ ¹æ®æ—¶é—´å…ˆåé¡ºåºï¼Œè€å¸ˆ,è¿™ä¸ªä¸å¤ªç†è§£<br>2018-12-01<br>î˜ˆ ä½œè€…å›å¤<br>ï¼ˆè¿™ä¸ªæ˜¯5.6çš„é€»è¾‘å“ˆï¼‰<br><br>è®¢é˜…çš„æ¯”è¾ƒæ™šï¼Œä¸çŸ¥é“å¤§ç‰›è¿˜èƒ½å¦ç»™å›å¤o(â•¥ï¹â•¥)oã€‚è¿™æ®µé€»è¾‘æ„Ÿè§‰ç±»ä¼¼äºå…¬å¹³é”ï¼Œæ ¹æ®è¯·æ±‚çš„å…ˆåè·å–é”ã€‚é‚£æ˜¯å¦åœ¨MySQL5.6ä¹‹åè¿›è¡Œäº†ä¼˜åŒ–å‘¢ï¼Ÿä½†æ˜¯å¦‚æœå…è®¸sessionDå…ˆä¸sessionCè·å–åˆ°é”ï¼Œé‚£æ˜¯å¦åˆä¼šå¯¼è‡´session Cé¥¿æ­»å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433144,"discussion_content":"ä¸ä¼šï¼Œåé¢çš„æ”¹ç”¨å¤±è´¥ç­–ç•¥äº†ï¼Œ\n\nå°±æ˜¯Bæäº¤å‰Då¯ä»¥è¯»ï¼Œä½†æ˜¯Bæäº¤åæ”¾å¼€é”ä¼šè®©Cæ”¹è¡¨ç»“æ„ï¼Œå¦‚æœDå†è¯»ï¼Œå°±æŠ¥é”™â€œè¡¨ç»“æ„å·²ç»å‘ç”Ÿäº†å˜åŒ–â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545065480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47311,"user_name":"æ°ä¹‹7","can_delete":false,"product_type":"c1","uid":1297232,"ip_address":"","ucode":"F7DA2E21085332","user_header":"https://static001.geekbang.org/account/avatar/00/13/cb/50/66d0bd7f.jpg","comment_is_top":false,"comment_ctime":1544105144,"is_pvip":false,"replies":[{"id":"16871","content":"1. å¦‚æœåº“é‡Œé¢æœ‰ä¸æ”¯æŒäº‹åŠ¡çš„è¡¨<br><br>2. å‰åŠå¥å› ä¸ºé”å°±æ˜¯è¿™ä¹ˆå®šä¹‰çš„ï¼›ååŠå¥ï¼Œwriteæ¯”readæƒé™é«˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544106457,"ip_address":"","comment_id":47311,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839072440","product_id":100020801,"comment_content":"é€šè¿‡æœ¬èŠ‚çš„å­¦ä¹ ï¼Œå­¦ä¹ äº†é”ç›¸å…³çš„çŸ¥è¯†ï¼Œè€å¸ˆè®²æˆäº†æœ‰å…³å…¨å±€é”å’Œè¡¨é”çš„ç»“æ„ã€‚ä»Šå¤©æˆ‘åœ¨é˜…è¯»çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯æœ‰ä¸¤ä¸ªç–‘é—®ï¼Œç¬¬ä¸€ä¸ªæ˜¯å…³äºå…¨å±€é”ï¼Œåœ¨åšå¤‡ä»½çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆè¦è®©è®©å…¨å±€åªè¯»çš„çŠ¶æ€ï¼Œæˆ‘ä»¬ç”¨è€å¸ˆè¯´çš„Mysqldumpçš„single transactionæ–¹æ³•ä¸æ˜¯æ›´å¥½å—ï¼Ÿç¬¬äºŒä¸ªç–‘é—®æ˜¯åœ¨è¿›è¡ŒLock tables t1 read <br>,t2 writeï¼Œä¸ºä»€ä¹ˆå…¶ä»–çº¿ç¨‹ä¸èƒ½å†™t1,è¯»t2,Aåœ¨æ‰§è¡ŒUnlock tables ä¹‹å‰ï¼Œä¸ºä»€ä¹ˆå¯ä»¥è¯»t2?æ„Ÿè°¢è€å¸ˆçš„è§£ç­”ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431732,"discussion_content":"1. å¦‚æœåº“é‡Œé¢æœ‰ä¸æ”¯æŒäº‹åŠ¡çš„è¡¨\n\n2. å‰åŠå¥å› ä¸ºé”å°±æ˜¯è¿™ä¹ˆå®šä¹‰çš„ï¼›ååŠå¥ï¼Œwriteæ¯”readæƒé™é«˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544106457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43617,"user_name":"yates","can_delete":false,"product_type":"c1","uid":1079539,"ip_address":"","ucode":"098637EA61C80D","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/f3/a8ac4fc3.jpg","comment_is_top":false,"comment_ctime":1543246725,"is_pvip":false,"replies":[{"id":"15623","content":"çº¦å®šğŸ˜„<br> ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543288372,"ip_address":"","comment_id":43617,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838214021","product_id":100020801,"comment_content":"ä½ å¥½ï¼Œä¸Šé¢çº¿ç¨‹ A ä¸­æ‰§è¡Œ lock table t1 read, t2 write;åï¼Œå…¶ä»–çº¿ç¨‹å†™ t1ã€è¯»å†™ t2 çš„è¯­å¥éƒ½ä¼šè¢«é˜»å¡ã€‚çº¿ç¨‹Aå†™ t1 çš„è¯­å¥ä¹Ÿä¸ä¼šå…è®¸ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè®¿é—®å…¶ä»–è¡¨ï¼ˆæ¯”å¦‚T3,T4ï¼‰ä¹Ÿä¸å…è®¸å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430435,"discussion_content":"çº¦å®šğŸ˜„\n ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543288372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43266,"user_name":"å£¹ç¬™â˜æ¼‚æ³Š","can_delete":false,"product_type":"c1","uid":1092577,"ip_address":"","ucode":"3A0B8EC881665C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ab/e1/f6b921fa.jpg","comment_is_top":false,"comment_ctime":1543201876,"is_pvip":false,"replies":[{"id":"15471","content":"å†™t2ä¹Ÿè¢«å µä½äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543204272,"ip_address":"","comment_id":43266,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838169172","product_id":100020801,"comment_content":"ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœåœ¨æŸä¸ªçº¿ç¨‹Aä¸­æ‰§è¡Œlock tables t1 read, t2 write;è¿™ä¸ªè¯­å¥ï¼Œåˆ™å…¶ä»–çº¿ç¨‹å†™t1ã€<br>è¯»å†™t2çš„è¯­å¥éƒ½ä¼šè¢«é˜»å¡ã€‚åŒæ—¶ï¼Œçº¿ç¨‹Aåœ¨æ‰§è¡Œunlock tablesä¹‹å‰ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œè¯»t1ã€å†™t2çš„<br>æ“ä½œã€‚è¿è¯»t2éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨ã€‚<br><br>è€å¸ˆï¼Œç¬¬ä¸‰ä¸ªåˆ†å¥ä¸­ï¼Œå…¶ä»–çº¿ç¨‹å†™t1ï¼Œè¯»å†™t2çš„è¯­å¥éƒ½ä¼šè¢«é˜»å¡ã€‚    è¿™ä¸ªé‡Œæ˜¯ä¸æ˜¯åº”è¯¥  å†™t1ã€è¯»t2 ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430342,"discussion_content":"å†™t2ä¹Ÿè¢«å µä½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543204272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43223,"user_name":"å¸†å¸†å¸†å¸†å¸†å¸†å¸†å¸†","can_delete":false,"product_type":"c1","uid":1304645,"ip_address":"","ucode":"0CB732FFD07463","user_header":"https://static001.geekbang.org/account/avatar/00/13/e8/45/c58cb283.jpg","comment_is_top":false,"comment_ctime":1543197592,"is_pvip":false,"replies":[{"id":"15463","content":"æ˜¯çš„ã€‚ä½ è¯´å¾—å¯¹ã€‚æˆ‘å‘ä¸ªå ªè¯¯","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543201709,"ip_address":"","comment_id":43223,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838164888","product_id":100020801,"comment_content":"--çº¿ç¨‹Aåœ¨æ‰§è¡Œ unlock tables ä¹‹å‰ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œè¯» t1ã€å†™ t2çš„æ“ä½œã€‚è¿è¯» t2 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨ã€‚<br>è¿™é‡Œæœ‰è¯¯å“¦ï¼Œçº¿ç¨‹Aæ˜¯å¯ä»¥è¯»t2çš„ã€‚<br>mysql&gt; begin;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; select * from test limit 1;<br>+------+<br>| id   |<br>+------+<br>|    1 |<br>+------+<br>1 row in set (0.00 sec)<br><br>mysql&gt; select * from test2 limit 1;<br>+------+<br>| name |<br>+------+<br>| 1    |<br>+------+<br>1 row in set (0.00 sec)<br><br>mysql&gt; <br>mysql&gt; lock tables test read,test2 write;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; select * from test2 limit 1;<br>+------+<br>| name |<br>+------+<br>| 1    |<br>+------+<br>1 row in set (0.00 sec)<br><br>","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430330,"discussion_content":"æ˜¯çš„ã€‚ä½ è¯´å¾—å¯¹ã€‚æˆ‘å‘ä¸ªå ªè¯¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543201709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43187,"user_name":"John","can_delete":false,"product_type":"c1","uid":1104765,"ip_address":"","ucode":"4CBECD3CA7FCFC","user_header":"https://static001.geekbang.org/account/avatar/00/10/db/7d/1fbad49b.jpg","comment_is_top":false,"comment_ctime":1543194928,"is_pvip":true,"replies":[{"id":"15447","content":"å³ä½¿æ˜¯online dDL , MDLè¿˜æ˜¯è¦è·å–çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543196093,"ip_address":"","comment_id":43187,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838162224","product_id":100020801,"comment_content":"è¯·é—® Online DDL å¯ä»¥é¿å…åŠ å­—æ®µæ—¶é”è¡¨å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430317,"discussion_content":"å³ä½¿æ˜¯online dDL , MDLè¿˜æ˜¯è¦è·å–çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543196093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43165,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1543194052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838161348","product_id":100020801,"comment_content":"ä»åº“åšå¤‡ä»½ï¼Œé‚£å°±åªèƒ½è¯»ï¼Œä½†æ˜¯ä¸»ä»åŒæ­¥æ•°æ®ä¼šä¸ä¸€è‡´ï¼Œå‡ºç°ä¸»ä»åŒæ­¥æ—¶é—´å¢é•¿ï¼Œrelaylog è¿Ÿè¿Ÿæ²¡æ³•å†™å…¥ï¼Œsql-threadçº¿ç¨‹ä¸èƒ½æŠŠæ—¥å¿—åŒæ­¥åˆ°ä»åº“ä¸­ï¼Œå‡ºç°ä¸ä¸€è‡´","like_count":1},{"had_liked":false,"id":43117,"user_name":"Jeremy","can_delete":false,"product_type":"c1","uid":1171998,"ip_address":"","ucode":"F342D2EC14773C","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/1e/ea3a0366.jpg","comment_is_top":false,"comment_ctime":1543181946,"is_pvip":true,"replies":[{"id":"15401","content":"æ²¡æœ‰ï¼Œsession C åœ¨ç­‰å¾…çš„æ—¶å€™å°±å¼€å§‹é˜»å¡åæ¥çš„è¯·æ±‚äº†ï¼Œä¸æ˜¯æ‹¿åˆ°ï¼ˆæ‹¿åˆ°ä»¥ååè€Œå¾ˆå¿«æ‰§è¡Œå°±æ”¾è¿‡äº†ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543191134,"ip_address":"","comment_id":43117,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838149242","product_id":100020801,"comment_content":"å¯¹session cçš„å†™é”ä¼šé˜»å¡session dçš„è¯»é”æœ‰ä¸ªç–‘é—®ï¼Œå› ä¸ºä¹‹å‰session aæ²¡æœ‰é‡Šæ”¾è¯»é”ï¼Œé‚£ä¹ˆsession    cåº”è¯¥ä¸€ç›´å–ä¸åˆ°å†™é”ï¼Œè¿™ä¸ªæ—¶å€™session dæ˜¯ä¸æ˜¯åº”è¯¥æœ‰æœºä¼šå–åˆ°è¯»é”å…ˆäºsession cæ‰§è¡Œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430304,"discussion_content":"æ²¡æœ‰ï¼Œsession C åœ¨ç­‰å¾…çš„æ—¶å€™å°±å¼€å§‹é˜»å¡åæ¥çš„è¯·æ±‚äº†ï¼Œä¸æ˜¯æ‹¿åˆ°ï¼ˆæ‹¿åˆ°ä»¥ååè€Œå¾ˆå¿«æ‰§è¡Œå°±æ”¾è¿‡äº†ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543191134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359844,"user_name":"æ¶é­”æœå®","can_delete":false,"product_type":"c1","uid":1962297,"ip_address":"å¹¿ä¸œ","ucode":"691CD833C984AC","user_header":"https://static001.geekbang.org/account/avatar/00/1d/f1/39/b0960780.jpg","comment_is_top":false,"comment_ctime":1665973431,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665973431","product_id":100020801,"comment_content":"äº‹åŠ¡æ˜¯ç”¨MVCCå®ç°çš„è¿˜æ˜¯è¯»å†™é”ï¼Ÿ","like_count":0},{"had_liked":false,"id":358314,"user_name":"ä¸€æ»´æ°´çš„æ³¢æµª","can_delete":false,"product_type":"c1","uid":2882763,"ip_address":"åŒ—äº¬","ucode":"B88A25C2C87B87","user_header":"https://static001.geekbang.org/account/avatar/00/2b/fc/cb/9e7f075c.jpg","comment_is_top":false,"comment_ctime":1664187693,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1664187693","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæ–‡ä¸­æåˆ°â€œåœ¨ MySQL 5.5 ç‰ˆæœ¬ä¸­å¼•å…¥äº† MDLï¼Œå½“å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶å€™ï¼ŒåŠ  MDL è¯»é”ï¼›å½“è¦å¯¹è¡¨åšç»“æ„å˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ  MDL å†™é”ã€‚â€ æˆ‘çš„MySQLæ˜¯8.0ï¼Œå½“æˆ‘æ‰§è¡Œdeleteæ“ä½œæ—¶ï¼ŒæŸ¥çœ‹MDLé”æ˜¯SHARED_WRITE,è¿™ä¸ªæ˜¯æ„å‘³ç€æ˜¯å†™é”å—ï¼Ÿå¦‚æœæ˜¯å†™é”ï¼Œé‚£è·Ÿæ–‡ä¸­è¯´çš„æ˜¯ä¸€å›äº‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":355402,"user_name":"Geek_Zbj","can_delete":false,"product_type":"c1","uid":3078634,"ip_address":"é‡åº†","ucode":"12763B2A264DA0","user_header":"","comment_is_top":false,"comment_ctime":1661334862,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661334862","product_id":100020801,"comment_content":"åˆšå¼€å§‹å‡ è¯¾éƒ½èƒ½å¬æ‡‚ä¸€äº›ï¼Œ06è¯¾å¼€å§‹ï¼Œå°±ç‰¹åˆ«éš¾æ‡‚ï¼Œä¹Ÿæ²¡è¯•è¿‡","like_count":0},{"had_liked":false,"id":353570,"user_name":"åƒæ°´ä¸ç”¨é’±","can_delete":false,"product_type":"c1","uid":1797135,"ip_address":"å¹¿ä¸œ","ucode":"8A5D5978F0D4E5","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6c/0f/7d242cc2.jpg","comment_is_top":false,"comment_ctime":1659576292,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659576292","product_id":100020801,"comment_content":"å›ç­”è¯¾åä¹ é¢˜ï¼šä¸»åº“çš„DDLè¯­å¥åŒæ­¥åˆ°å¤‡åº“æ‰§è¡Œï¼Œä½†æ­¤æ—¶å¤‡åº“åœ¨åšå¤‡ä»½ï¼Œåœ¨å¤‡åº“çš„DDLä¸ŠåŠ äº†è¯»é”ï¼Œè€ŒåŠ å­—æ®µéœ€è¦DDLå†™çï¼Œæ­¤æ—¶å¤‡åº“çš„å­—æ®µä¿®æ”¹ä¼šè¢«blockä½","like_count":0},{"had_liked":false,"id":353362,"user_name":"Pierce","can_delete":false,"product_type":"c1","uid":1589937,"ip_address":"å¹¿ä¸œ","ucode":"9E120B593223EE","user_header":"https://static001.geekbang.org/account/avatar/00/18/42/b1/3f1ad943.jpg","comment_is_top":false,"comment_ctime":1659404520,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1659404520","product_id":100020801,"comment_content":"<br>pt-oscï¼Œgh-ostï¼ŒåŸç”Ÿonline ddlçš„åŸç†ä¸é€‚ç”¨åœºæ™¯ï¼Œä¸€æ–‡ææ‡‚ï¼šhttps:&#47;&#47;opensource.actionsky.com&#47;20200916-ddl&#47;","like_count":0},{"had_liked":false,"id":351977,"user_name":"ç‘¶","can_delete":false,"product_type":"c1","uid":1304349,"ip_address":"","ucode":"E837D2A2D76B42","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/1d/f5eb2c85.jpg","comment_is_top":false,"comment_ctime":1658311794,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658311794","product_id":100020801,"comment_content":"è¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨ã€‚æ²¡çœ‹æ‡‚è¿™å¥è¯ï¼Œæ—¢ç„¶æ˜¯ç»™t1å’Œt2è¡¨ä¸Šé”ï¼Œå’Œå…¶ä»–è¡¨æœ‰å•¥å…³ç³»å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":351375,"user_name":"è´°","can_delete":false,"product_type":"c1","uid":3049348,"ip_address":"","ucode":"9552C32254A2BB","user_header":"https://static001.geekbang.org/account/avatar/00/2e/87/84/6724366f.jpg","comment_is_top":false,"comment_ctime":1657762489,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657762489","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸å¤ªç†è§£ä¸ºä»€ä¹ˆcaç´¢å¼•åä¸»é”®éƒ¨åˆ†åªæœ‰bï¼Œä»¥åŠcbç´¢å¼•åä¸»é”®éƒ¨åˆ†åªæœ‰aï¼Œå¯ä»¥éº»çƒ¦æ‚¨è®²ä¸€ä¸‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":347828,"user_name":"Geek_695a9f","can_delete":false,"product_type":"c1","uid":3017232,"ip_address":"","ucode":"7C231EF87A89E0","user_header":"","comment_is_top":false,"comment_ctime":1654497014,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654497014","product_id":100020801,"comment_content":"é”çš„æ˜¯è¡¨ç»“æ„ï¼Œå¢åˆ æ”¹æŸ¥ä¸ä¼šå½±å“è¡¨ç»“æ„","like_count":0},{"had_liked":false,"id":346962,"user_name":"åƒæ°´ä¸ç”¨é’±","can_delete":false,"product_type":"c1","uid":1797135,"ip_address":"","ucode":"8A5D5978F0D4E5","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6c/0f/7d242cc2.jpg","comment_is_top":false,"comment_ctime":1653561786,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653561786","product_id":100020801,"comment_content":"å¤‡ä»½çš„æ•°æ®ä¸ä¼šåŒ…æ‹¬æ–°åŠ çš„åˆ—","like_count":0},{"had_liked":false,"id":346265,"user_name":"kkk100","can_delete":false,"product_type":"c1","uid":1058666,"ip_address":"","ucode":"4F1887C49556DE","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/6a/34cf9522.jpg","comment_is_top":false,"comment_ctime":1652956230,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652956230","product_id":100020801,"comment_content":"MySQLåŠ ç´¢æ€§ä¼šé”è¡¨å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":346131,"user_name":"åˆ˜éœ²ç”Ÿ","can_delete":false,"product_type":"c1","uid":1625615,"ip_address":"","ucode":"1A5D26AEEA20CC","user_header":"https://static001.geekbang.org/account/avatar/00/18/ce/0f/327b4d87.jpg","comment_is_top":false,"comment_ctime":1652851364,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652851364","product_id":100020801,"comment_content":"ä¸Šé¢æåˆ°çš„è®¾ç½®å…¨å±€è¯»readonly,åœ¨mysql8.0æµ‹è¯•å‘ç°æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œåº”è¯¥æ˜¯set global read_only=true<br>ä½†æ˜¯å‘ç°read_onlyæ— è®ºæ˜¯onè¿˜æ˜¯offï¼Œå…¶ä»–çº¿ç¨‹è¿˜æ˜¯èƒ½æ‰§è¡Œç›¸å…³å†™æ“ä½œï¼Œè€Œè¦ä¿è¯æ–‡ä¸­æåˆ°çš„æ•ˆæœï¼Œç»è¿‡æµ‹è¯•set global super_read_only=trueæ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•æ‰§è¡Œå†™æ“ä½œä¸”ä¸ä¼šéšç€ä¼šè¯å…³é—­è€Œä¸»åŠ¨é‡Šæ”¾é”","like_count":0},{"had_liked":false,"id":345111,"user_name":"è‹æ™“","can_delete":false,"product_type":"c1","uid":2439231,"ip_address":"","ucode":"133B6851452FC2","user_header":"https://static001.geekbang.org/account/avatar/00/25/38/3f/e03a5df3.jpg","comment_is_top":false,"comment_ctime":1652056700,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652056700","product_id":100020801,"comment_content":"å¦‚æœæ›´æ–°è´¦æˆ·ä½™é¢è¡¨å’Œæ›´æ–°è¯¾ç¨‹è¡¨åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ï¼Œå¤‡ä»½çœ‹ä¸åˆ°æ²¡æœ‰æäº¤çš„æ•°æ®ï¼Œåº”è¯¥ä¸ä¼šæœ‰é—®é¢˜å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":342404,"user_name":"Bert é™ˆ","can_delete":false,"product_type":"c1","uid":2345014,"ip_address":"","ucode":"022BA03561E54D","user_header":"https://static001.geekbang.org/account/avatar/00/23/c8/36/18e49330.jpg","comment_is_top":false,"comment_ctime":1650250999,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650250999","product_id":100020801,"comment_content":"å¦‚æœåœ¨æŸä¸ªçº¿ç¨‹ A ä¸­æ‰§è¡Œ lock tables t1 read, t2 write; è¿™ä¸ªè¯­å¥ï¼Œåˆ™å…¶ä»–çº¿ç¨‹å†™ t1ã€è¯»å†™ t2 çš„è¯­å¥éƒ½ä¼šè¢«é˜»å¡ã€‚åŒæ—¶ï¼Œçº¿ç¨‹ A åœ¨æ‰§è¡Œ unlock tables ä¹‹å‰ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œè¯» t1ã€è¯»å†™ t2 çš„æ“ä½œã€‚è¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨ã€‚--- â€œè¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨â€ è¿™å¥è¯ä¸å¤ªæ˜ç™½æ˜¯ä»€ä¹ˆæ„æ€ã€‚","like_count":0},{"had_liked":false,"id":342300,"user_name":"å†¬å¤©çš„æ ‘","can_delete":false,"product_type":"c1","uid":1046125,"ip_address":"","ucode":"6FE70C1499D33A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/6d/143deae5.jpg","comment_is_top":false,"comment_ctime":1650181078,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1650181078","product_id":100020801,"comment_content":"å¦‚æœsessionCæ˜¯è¯»æ“ä½œï¼Œè€ŒsessionDæ˜¯å†™ï¼Œé‚£æ˜¯ä¸æ˜¯ä»è¿™ä¸ªå†™å¼€å§‹åé¢çš„éƒ½blockedäº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":341612,"user_name":"å†è§ç†æƒ³","can_delete":false,"product_type":"c1","uid":1245999,"ip_address":"","ucode":"FAC88B3F6F6DFD","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","comment_is_top":false,"comment_ctime":1649734719,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649734719","product_id":100020801,"comment_content":"é”ï¼šç”¨æ¥åˆç†æ§åˆ¶å¹¶å‘è®¿é—®å…±äº«æ•°æ®çš„æ•°æ®ç»“æ„ã€‚<br>mysqlé‡Œé¢çš„é”å¤§è‡´å¯ä»¥åˆ†ä¸º å…¨å±€é”&#47;è¡¨é”&#47;è¡Œé” ã€‚<br>å…¨å±€é”ï¼šä¸ºä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œæ•°æ®åº“å¤‡ä»½æ—¶éœ€è¦ä½¿ç”¨å…¨å±€é”ã€‚flush tables with read lock (ftwrl),æ‰§è¡Œè¯¥è¯­å¥ æ•°æ®æ›´æ–°è¯­å¥&#47;æ•°æ®å®šä¹‰æ•°æ®éƒ½ä¼šè¢«å µå¡ã€‚<br>å…¨å±€é”ä¼šå¯¼è‡´ä¸»åº“æ— æ³•æ‰§è¡Œä¸šåŠ¡ï¼Œä»åº“æ— æ³•æ‰§è¡Œä¸»åº“åŒæ­¥è¿‡æ¥çš„binlogï¼Œå¯¼è‡´ä¸»ä»å»¶è¿Ÿã€‚<br>mysqlå®˜æ–¹çš„é€»è¾‘å¤‡ä»½mysqldump ä½¿ç”¨-single-transactionå‚æ•° å¤‡ä»½æ•°æ®æ—¶ä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œç¡®ä¿æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ï¼Œç”±äºmvccçš„æ”¯æŒï¼Œæ•°æ®åº“æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°ã€‚ä½†æ˜¯è¦æ±‚æ‰€æœ‰çš„è¡¨å¿…é¡»æ˜¯æ”¯æŒäº‹åŠ¡çš„ã€‚<br>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨innodbå¼•æ“ã€‚<br>DML æ•°æ®æ›´æ–°è¯­å¥ å¢åˆ æ”¹<br>DDL æ•°æ®å®šä¹‰è¯­å¥ ä¿®æ”¹è¡¨ç»“æ„<br><br><br>è¡¨çº§åˆ«çš„é” åŒ…å«ä¸¤ç§  è¡¨é” &#47; MDL<br>MDL å…ƒæ•°æ®é”  å¯¹ä¸€ä¸ªè¡¨åå¢åˆ æ”¹æŸ¥æ—¶ï¼ŒåŠ MDLè¯»é”ï¼Œ ä¿®æ”¹è¡¨ç»“æ„æ—¶ï¼ŒåŠ MDLå†™é”ã€‚<br>åœ¨ç»™è¡¨åŠ å­—æ®µæ—¶ï¼Œè¦é¿å…æœ‰é•¿äº‹åŠ¡åœ¨æ‰§è¡Œï¼Œå¦åˆ™ MDLå†™é”ä¼šé˜»å¡ï¼Œè¿›è€Œé˜»å¡åé¢æ›´å¤šçš„æŸ¥è¯¢è¯­å¥ã€‚é€ æˆæ•°æ®åº“å´©æºƒã€‚<br><br>","like_count":0},{"had_liked":false,"id":337712,"user_name":"ä¸œæ³½","can_delete":false,"product_type":"c1","uid":2770660,"ip_address":"","ucode":"7B621B43909E07","user_header":"https://static001.geekbang.org/account/avatar/00/2a/46/e4/0860c82f.jpg","comment_is_top":false,"comment_ctime":1646985293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646985293","product_id":100020801,"comment_content":"ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«ä¸­è¯´çš„&quot;é”&quot;å’Œå¼•æ“è‡ªå·±è´Ÿè´£çš„é”æœ‰ä»€ä¹ˆå…³è”ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":337034,"user_name":"å¼‹å»¶","can_delete":false,"product_type":"c1","uid":2708966,"ip_address":"","ucode":"D04AAEDF8C658A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epRo9GU1yic8fZwJp2ia9qq0RL7nCvDcosxwwIMZxSHtxjh4aLezyuvYdzgsEY2cib9ibSJNIqb8gFqHw/132","comment_is_top":false,"comment_ctime":1646560035,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646560035","product_id":100020801,"comment_content":"æ”¹è¡¨<br>1. è·å–mdlå†™é”<br>2. é™çº§ä¸ºè¯»é”<br>3. åˆ›å»ºæ–°è¡¨æ‰§è¡ŒDD L<br>4. å‡çº§ä¸ºmdlå†™é”ï¼Œæ›¿æ¢è¡¨<br>5. é‡Šæ”¾mdlé”<br>ï¼Ÿï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":334565,"user_name":"å…ˆå¬","can_delete":false,"product_type":"c1","uid":1151409,"ip_address":"","ucode":"82D8DA7A2FEB4B","user_header":"https://static001.geekbang.org/account/avatar/00/11/91/b1/fb117c21.jpg","comment_is_top":false,"comment_ctime":1645002247,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645002247","product_id":100020801,"comment_content":"æƒ³è¯·é—®è€å¸ˆæˆ–è€…åŒå­¦ä»¬ã€‚æœ‰æ²¡æœ‰åŠæ³•æŸ¥è¯¢åˆ° &quot;MDLè¯»é”â€ æ­£åœ¨é”ä½å“ªäº›è¡¨\bå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":329177,"user_name":"ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":2853618,"ip_address":"","ucode":"A52A6043D27D87","user_header":"https://static001.geekbang.org/account/avatar/00/2b/8a/f2/6c6f7886.jpg","comment_is_top":false,"comment_ctime":1641197234,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641197234","product_id":100020801,"comment_content":"ä½ ç°åœ¨åº”è¯¥çŸ¥é“äº†ï¼Œäº‹åŠ¡ä¸­çš„ MDL é”ï¼Œåœ¨è¯­å¥æ‰§è¡Œå¼€å§‹æ—¶ç”³è¯·ï¼Œä½†æ˜¯è¯­å¥ç»“æŸåå¹¶ä¸ä¼šé©¬ä¸Šé‡Šæ”¾ï¼Œè€Œä¼šç­‰åˆ°æ•´ä¸ªäº‹åŠ¡æäº¤åå†é‡Šæ”¾ã€‚<br><br>1.ä¸æ˜ç™½ï¼Œå¦‚æœæ˜¯åœ¨äº‹åŠ¡æäº¤åå†é‡Šæ”¾é”ï¼Œé‚£å¦‚æœæˆ‘åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå…ˆæ‰§è¡Œäº†æŸ¥è¯¢è¯­å¥ï¼Œæœ‰ä¸€ä¸ªMDLè¯»é”ï¼Œç”±äºè¯´æ˜¯åœ¨äº‹åŠ¡æäº¤åæ‰ä¼šé‡Šæ”¾é”ï¼Œé‚£ä¹ˆæˆ‘åœ¨è¯¥äº‹åŠ¡ä¸­å†ä¿®æ”¹è¡¨å­—æ®µï¼Œä¼šæœ‰ä¸€ä¸ª MDLå†™é”ï¼Œç”±äºä¸Šä¸€ä¸ªè¯­å¥çš„ MDLè¯»é”è¿˜æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå› æ­¤è¿™ä¸ªä¿®æ”¹è¡¨å­—æ®µçš„è¯­å¥å°±ä¼šé˜»å¡ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯ä¸å°±æ­»é”äº†å—ï¼Ÿæ„Ÿè§‰æˆ‘ç†è§£é”™äº†ã€‚ã€‚ã€‚<br><br>2.ä¸Šç¯‡ç•™ä¸‹çš„é—®é¢˜ä¸­ï¼Œå¯ä»¥æŠŠ (c,a) å¤åˆç´¢å¼•å»æ‰ï¼Œè¿™ä¸ªæˆ‘æ˜¯æ˜ç™½äº†ï¼Œä½†æ˜¯æˆ‘ä¸æ˜ç™½çš„æ˜¯ä¸ºä»€ä¹ˆè¦ç»™ cå­—æ®µåŠ ç´¢å¼•å‘¢ï¼Œç”±äºæœ‰å¤åˆç´¢å¼• (c,b)ï¼Œæ ¹æ®æœ€å·¦å‰ç¼€çš„åŸåˆ™ï¼Œæ¡ä»¶ c=N æ˜¯èƒ½ç”¨åˆ° (c,b) è¿™ä¸ªç´¢å¼•çš„ï¼Œå› æ­¤ä¸éœ€è¦ç»™ cå•ç‹¬æ·»åŠ ç´¢å¼•ï¼Œéš¾é“æ˜¯å› ä¸ºåé¢çš„ order by aï¼Ÿä½†æ˜¯ då­—æ®µæ˜¯æ²¡æœ‰ç´¢å¼•çš„ï¼Œå› æ­¤å³ä¾¿æ˜¯ç»™ cå•ç‹¬åˆ›å»ºäº†ç´¢å¼•ï¼Œæœ€ç»ˆè¿˜æ˜¯éœ€è¦å›è¡¨ã€‚å¦‚æœæˆ‘ä¸ç»™ cå•ç‹¬åˆ›å»ºç´¢å¼•ï¼Œè€Œæ˜¯ä½¿ç”¨ (c,b) è¿™ä¸ªç´¢å¼•ï¼Œä¹Ÿæ˜¯å›è¡¨ï¼Œç„¶ååœ¨ (a,b) ä¸­æ‰¾ï¼Œæ„Ÿè§‰ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¸æ˜ç™½å•ç‹¬ç»™ cåˆ›å»ºç´¢å¼•çš„æ„ä¹‰åœ¨å“ªï¼Ÿ","like_count":0},{"had_liked":false,"id":328766,"user_name":"tcå°é©¬å“¥","can_delete":false,"product_type":"c1","uid":2877435,"ip_address":"","ucode":"94B7F24298FF35","user_header":"","comment_is_top":false,"comment_ctime":1640871362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640871362","product_id":100020801,"comment_content":"åœ¨äºŒçº§ç´¢å¼•é‡Œï¼Œå¯¹äºç›¸åŒçš„ç´¢å¼•é”®å€¼ï¼Œç´¢å¼•è¡Œå°†ä¼šæŒ‰ç…§é™„å¸¦çš„ä¸»é”®å€¼é¡ºåºå­˜å‚¨å—ï¼Ÿ ä¸ºä»€ä¹ˆä¸»é”®ç´¢å¼•æŒ‰ç…§aæ’åºäº†å›è¡¨ç»“æœä¸éœ€è¦å†æ’åºäº†ï¼Œå›è¡¨é¡ºåºéš¾é“ä¸æ˜¯æŒ‰ç…§cç´¢å¼•æ ‘çš„é¡ºåºä¸€æ¡æ¡å›çš„ï¼Œå›è¡¨æ‹¿åˆ°æ•°æ®é¡ºåºçš„åº”è¯¥æ˜¯cç´¢å¼•æ ‘çš„é¡ºåºå§ï¼Ÿ","like_count":0},{"had_liked":false,"id":327679,"user_name":"ä¸€ä¸ªæ— è¶£çš„ä¿—äºº","can_delete":false,"product_type":"c1","uid":1691669,"ip_address":"","ucode":"25435088B10CA2","user_header":"https://static001.geekbang.org/account/avatar/00/19/d0/15/5851180d.jpg","comment_is_top":false,"comment_ctime":1640230233,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640230233","product_id":100020801,"comment_content":"ä¸‰åˆ·ï¼Œé—®é¢˜æ€»ç»“ï¼Œè‡ªé—®è‡ªç­”<br><br>1ã€ä½¿ç”¨ FTWRL åŠ å…¨å±€é”åšå…¨åº“é€»è¾‘å¤‡ä»½ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿæœ‰ä»€ä¹ˆæ›¿ä»£æ–¹æ¡ˆå—ï¼Ÿ<br><br>2ã€ç»™å°è¡¨åŠ ä¸ªå­—æ®µ&#47;ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆæ•´ä¸ªåº“æŒ‚æ‰äº†ï¼Ÿå¦‚ä½•å®‰å…¨åœ°ç»™å°è¡¨åŠ å­—æ®µ&#47;ç´¢å¼•ï¼Ÿ","like_count":0},{"had_liked":false,"id":326558,"user_name":"Geek_81b9b6","can_delete":false,"product_type":"c1","uid":2868062,"ip_address":"","ucode":"54AE825B983006","user_header":"","comment_is_top":false,"comment_ctime":1639561520,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639561520","product_id":100020801,"comment_content":"æƒ³é—®ä¸‹è¡¨è®°å½•â€“a--|â€“b--|â€“c--|â€“d--   ä»¥åŠâ€“c--|â€“a--|â€“ä¸»é”®éƒ¨åˆ†b-- ,æ„Ÿè§‰å¤ªæŠ½è±¡äº†,<br>è¿™æ˜¯ä»€ä¹ˆæ„æ€?","like_count":0},{"had_liked":false,"id":324774,"user_name":"Geek_3d7212","can_delete":false,"product_type":"c1","uid":2794911,"ip_address":"","ucode":"BF3DC8D1B2324D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/nic9EAeicEdLYWku3BxaRTDzmkOXOyGWVC2JpqickkV8860qUGZh4RkESXlz1gCoCPUIH717BiaicreoADwGLJbvjJQ/132","comment_is_top":false,"comment_ctime":1638615664,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638615664","product_id":100020801,"comment_content":"è¡¨é”ä¸€èˆ¬æ˜¯åœ¨æ•°æ®åº“å¼•æ“ä¸æ”¯æŒè¡Œé”çš„æ—¶å€™æ‰ä¼šè¢«ç”¨åˆ°çš„ã€‚å¦‚æœä½ å‘ç°ä½ çš„åº”ç”¨ç¨‹åºé‡Œæœ‰ lock tables è¿™æ ·çš„è¯­å¥ï¼Œä½ éœ€è¦è¿½æŸ¥ä¸€ä¸‹ï¼Œæ¯”è¾ƒå¯èƒ½çš„æƒ…å†µæ˜¯ï¼šè¦ä¹ˆæ˜¯ä½ çš„ç³»ç»Ÿç°åœ¨è¿˜åœ¨ç”¨ MyISAM è¿™ç±»ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼Œé‚£è¦å®‰æ’å‡çº§æ¢å¼•æ“ï¼›è¦ä¹ˆæ˜¯ä½ çš„å¼•æ“å‡çº§äº†ï¼Œä½†æ˜¯ä»£ç è¿˜æ²¡å‡çº§ã€‚æˆ‘è§è¿‡è¿™æ ·çš„æƒ…å†µï¼Œæœ€åä¸šåŠ¡å¼€å‘å°±æ˜¯æŠŠ lock tables å’Œ unlock tables æ”¹æˆ begin å’Œ commitï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚<br><br>è€å¸ˆï¼Œè¿™ä¸€æ®µå¼€å§‹è¯´ä½¿ç”¨è¡¨é”æ˜¯å› ä¸ºå­˜å‚¨å¼•æ“ä¸æ”¯æŒè¡Œé”ï¼Œè€Œä¸‹é¢çš„è®ºè¯åˆéƒ½åœ¨è¯´äº‹åŠ¡ï¼Œæ˜¯ä¸æ˜¯å†™é”™äº†ï¼Œæƒ³è¯´ä½¿ç”¨è¡¨é”æ˜¯å› ä¸ºå­˜å‚¨å¼•æ“ä¸æ”¯æŒäº‹åŠ¡","like_count":0},{"had_liked":false,"id":319547,"user_name":"lleft","can_delete":false,"product_type":"c1","uid":1970443,"ip_address":"","ucode":"D573EB509455AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","comment_is_top":false,"comment_ctime":1635846581,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635846581","product_id":100020801,"comment_content":"è€å¸ˆæ–‡ä¸­æåˆ°åœ¨å¤‡åº“è¿›è¡Œå¤‡ä»½ï¼Œè¦æ˜¯å­˜åœ¨ä¸»å¤‡å»¶è¿Ÿï¼Œæ€ä¹ˆè§£å†³åœ¨å¤‡åº“ä¸Šé¢çš„å¤‡ä»½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":318532,"user_name":"é‚£yiåˆ¹é‚£çš„","can_delete":false,"product_type":"c1","uid":2696407,"ip_address":"","ucode":"EE4949CBBD80E7","user_header":"https://static001.geekbang.org/account/avatar/00/29/24/d7/4b82c1b5.jpg","comment_is_top":false,"comment_ctime":1635325010,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1635325010","product_id":100020801,"comment_content":"é—®ä¸ªé—®é¢˜ï¼Œåœ¨innodbä¸­ï¼Œæ›´æ–°è®°å½•æˆ–è€…åˆ é™¤è®°å½•æ—¶ï¼Œæ¡ä»¶å­—æ®µå¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œä¼šæ˜¯è¡¨çº§é”ã€‚é‚£è¿™ä¸ªæ˜¯å±äºè¡¨é”å¯¹å§ã€‚","like_count":0,"discussions":[{"author":{"id":2133834,"avatar":"https://static001.geekbang.org/account/avatar/00/20/8f/4a/a340734f.jpg","nickname":"å¹³å‡¡","note":"","ucode":"5F7D49235A9598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409711,"discussion_content":"è¿™æ˜¯è¡Œé”ï¼Œåªä¸è¿‡æ˜¯è¡¨çš„æ‰€æœ‰è¡ŒåŠ xé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635493972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318116,"user_name":"Zä¸œ","can_delete":false,"product_type":"c1","uid":1459774,"ip_address":"","ucode":"037B2BB2715DBA","user_header":"https://static001.geekbang.org/account/avatar/00/16/46/3e/8c75af6d.jpg","comment_is_top":false,"comment_ctime":1635155058,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635155058","product_id":100020801,"comment_content":"ç†è§£äº†ï¼šè¯»é”æ˜¯å…±äº«çš„,å®ƒä¸ä¼šé˜»å¡å…¶ä»–è¯»é”;å†™é”æ˜¯æ’ä»–çš„,å®ƒä¼šé˜»å¡å…¶ä»–è¯»é”å’Œå†™é”;è¯»è¯»ä¸äº’æ–¥,è¯»å†™äº’æ–¥,å†™å†™äº’æ–¥","like_count":0},{"had_liked":false,"id":318113,"user_name":"Zä¸œ","can_delete":false,"product_type":"c1","uid":1459774,"ip_address":"","ucode":"037B2BB2715DBA","user_header":"https://static001.geekbang.org/account/avatar/00/16/46/3e/8c75af6d.jpg","comment_is_top":false,"comment_ctime":1635154952,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1635154952","product_id":100020801,"comment_content":"æœ‰ç‚¹æ²¡æ˜ç™½ï¼Œ sessionC éœ€è¦è·å–å†™é”ï¼ŒsessionA,Béƒ½æ˜¯è·å–è¯»é”ï¼Œä¸ºä»€ä¹ˆéœ€è¦ ç­‰å¾…å‰é¢è¯»é”é‡Šæ”¾äº†æ‰èƒ½è·å–å†™é”å•Š ï¼Ÿå†™é”å’Œå†™é”æ‰æ˜¯äº’æ–¥çš„å•Šï¼Œ å†™å’Œè¯»æ˜¯ä¸å¹²æ‰°çš„å§ ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2133834,"avatar":"https://static001.geekbang.org/account/avatar/00/20/8f/4a/a340734f.jpg","nickname":"å¹³å‡¡","note":"","ucode":"5F7D49235A9598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409712,"discussion_content":"ç†è§£é”™è¯¯ï¼Œmdlåªæœ‰è¯»è¯»ä¸äº’æ–¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635494089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318111,"user_name":"Zä¸œ","can_delete":false,"product_type":"c1","uid":1459774,"ip_address":"","ucode":"037B2BB2715DBA","user_header":"https://static001.geekbang.org/account/avatar/00/16/46/3e/8c75af6d.jpg","comment_is_top":false,"comment_ctime":1635153946,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635153946","product_id":100020801,"comment_content":"å›ç­”é—®é¢˜ï¼šå¤‡åº“ â€“single-transaction å¤‡ä»½ï¼Œå†æ‰§è¡Œ ä¸»åº“DDL,  å¤‡åº“ä¼šå‡ºç°é”ç­‰å¾…çš„æƒ…å†µï¼Œ å¯¼è‡´å¤‡åº“å°è¡¨ä¸å¯ç”¨ï¼Œå› ä¸ºï¼Œå¤‡åº“çš„å¤‡ä»½äº‹åŠ¡è¿˜æ²¡æäº¤ï¼Œ DDLä¼šæ‰«æå…¨éƒ¨çš„æ•°è·å–å†™é”ï¼Œå‰ä¸€ä¸ªå¤‡ä»½äº‹åŠ¡è¿˜æ²¡æäº¤å°±ä¼šéƒ½åœ¨å µå¡ï¼Œæ­¤è¡¨çš„è¯»å†™éƒ½ä¸å¯ç”¨ã€‚ ","like_count":0},{"had_liked":false,"id":316035,"user_name":"æœ¨æœ¨","can_delete":false,"product_type":"c1","uid":1763992,"ip_address":"","ucode":"B182555D11946D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ea/98/65a13c45.jpg","comment_is_top":false,"comment_ctime":1634112959,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634112959","product_id":100020801,"comment_content":"å…¨å±€é”ï¼šflushs table read lockï¼ˆFTRLï¼‰å…¨å±€è¯»é”ã€‚ä½¿æ•°æ®åº“åªè¯»ã€‚<br>è¡¨çº§é”ï¼šLock tables XXX read&#47;write <br>       å…ƒæ•°æ®é”meta data lockï¼ˆMDLï¼‰: è¯»è¯»ä¸äº’æ–¥ï¼Œè¯»å†™äº’æ–¥ï¼Œå†™å†™äº’æ–¥ï¼Œ éš”ç¦»DMLå’ŒDDL.æ‰§è¡ŒDMLåŠ MDLè¯»é”ï¼Œæ‰§è¡ŒDDLåŠ MDLå†™é”ã€‚","like_count":0},{"had_liked":false,"id":315958,"user_name":"åŠå¹´ 2å·","can_delete":false,"product_type":"c1","uid":2562181,"ip_address":"","ucode":"7F23C4532A5513","user_header":"https://static001.geekbang.org/account/avatar/00/27/18/85/83ac977e.jpg","comment_is_top":false,"comment_ctime":1634087573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634087573","product_id":100020801,"comment_content":"MDLå†™é”ğŸ”’æ˜¯æ”¹å˜è¡¨ç»“æ„çš„æ—¶å€™è§¦å‘ï¼Œè¯»é”åˆ™æ˜¯è¡¨çš„å¢åˆ æ”¹æŸ¥è§¦å‘","like_count":0},{"had_liked":false,"id":315948,"user_name":"åŠå¹´ 2å·","can_delete":false,"product_type":"c1","uid":2562181,"ip_address":"","ucode":"7F23C4532A5513","user_header":"https://static001.geekbang.org/account/avatar/00/27/18/85/83ac977e.jpg","comment_is_top":false,"comment_ctime":1634085467,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634085467","product_id":100020801,"comment_content":"DDLå±äºæ•°æ®è¡¨ç»“æ„çš„æ”¹å˜ï¼ŒDMLå±äºè¡¨å­—æ®µå¢åˆ æ”¹ã€‚MDLå…ƒæ•°æ®é”æ˜¯ä¸ºäº†é˜²æ­¢DDLå’ŒDMLçš„å¹¶å‘å†²çªã€‚","like_count":0},{"had_liked":false,"id":315945,"user_name":"åŠå¹´ 2å·","can_delete":false,"product_type":"c1","uid":2562181,"ip_address":"","ucode":"7F23C4532A5513","user_header":"https://static001.geekbang.org/account/avatar/00/27/18/85/83ac977e.jpg","comment_is_top":false,"comment_ctime":1634084589,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634084589","product_id":100020801,"comment_content":"åšå…¨åº“é€»è¾‘å¤‡ä»½æ—¶ï¼Œéœ€è¦ä½¿ç”¨å…¨å±€é”ï¼Œæ–¹æ³•æœ‰äºŒï¼š<br>1. æœ‰çš„è¡¨ä½¿ç”¨äº†ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼šä½¿ç”¨FTWRL<br>2. æ‰€æœ‰çš„è¡¨éƒ½ä½¿ç”¨äº‹åŠ¡å¼•æ“çš„åº“ï¼šä½¿ç”¨ mysqldump å¸¦ -single-transaction å‚æ•°<br><br>ä¸€ä¸ªåº“è¢«å…¨å±€é”ä¸Šä»¥åï¼Œä½ è¦å¯¹é‡Œé¢ä»»ä½•ä¸€ä¸ªè¡¨åšåŠ å­—æ®µæ“ä½œï¼ˆåŒ…æ‹¬DMLã€DDLï¼‰ï¼Œéƒ½æ˜¯ä¼šè¢«é”ä½çš„ã€‚<br><br>å…ƒæ•°æ®é”ï¼š<br>1. å…ƒæ•°æ®é” MDL ä¸éœ€è¦æ˜¾ç¤ºåœ°ä½¿ç”¨ï¼›<br>2. MDL è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œè¯»å†™é”ã€å†™é”ä¹‹é—´äº’æ–¥ï¼›<br>3. äº‹åŠ¡ä¸­çš„ MDL é”åœ¨äº‹åŠ¡æäº¤åæ‰é‡Šæ”¾ã€‚<br><br>å®‰å…¨åœ°ç»™å°è¡¨åŠ å­—æ®µï¼š<br>1. éçƒ­ç‚¹è¡¨ï¼šè§£å†³é•¿äº‹åŠ¡ï¼›<br>2. çƒ­ç‚¹è¡¨ï¼šåœ¨ alter table è¯­å¥é‡Œé¢è®¾å®šç­‰å¾…æ—¶é—´ã€‚","like_count":0},{"had_liked":false,"id":314749,"user_name":"äº‘æµ·","can_delete":false,"product_type":"c1","uid":1365206,"ip_address":"","ucode":"0C6CA0BE58EA21","user_header":"https://static001.geekbang.org/account/avatar/00/14/d4/d6/1d4543ac.jpg","comment_is_top":false,"comment_ctime":1633399416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633399416","product_id":100020801,"comment_content":"æœ‰å¼ å‡ ç™¾ä¸‡æ•°æ®çš„è¡¨ï¼Œæ•°æ®åº“åœ¨ä¸ªäººç¬”è®°æœ¬ä¸Šï¼Œæ·»åŠ å­—æ®µç‰¹åˆ«æ…¢ï¼Œè¦åå‡ åˆ†é’Ÿï¼Œè¯·é—®æ˜¯å¦æœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹å¼å‘¢ã€‚é™¤äº†ä¸Šé¢æåˆ°çš„å…ˆkillè¿›ç¨‹ï¼Œå®é™…ä¸Šä¹Ÿæ²¡æœ‰å…¶ä»–è¿›ç¨‹äº†ã€‚","like_count":0},{"had_liked":false,"id":314435,"user_name":"ç§‹åŒ…","can_delete":false,"product_type":"c1","uid":2764256,"ip_address":"","ucode":"8E291F03A2CC5E","user_header":"https://static001.geekbang.org/account/avatar/00/2a/2d/e0/7a9bd9c7.jpg","comment_is_top":false,"comment_ctime":1633053850,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633053850","product_id":100020801,"comment_content":"æˆ‘å¯¹äºæ€è€ƒé¢˜çš„æ€è·¯ï¼š<br>ä»åº“å¤‡ä»½æ—¶ï¼Œè‹¥é‡‡ç”¨single-transactionï¼Œé‚£ä¹ˆä¼šå¼€å¯ä¸€ä¸ªMDLè¯»é”ï¼Œè€Œå¦‚æœä¸»åº“è¦è¿›è¡ŒDDLæ“ä½œçš„è¯ï¼Œä¹Ÿå°±æ˜¯è¦ç”³è¯·MDLå†™é”ï¼Œéœ€è¦ç­‰ä»åº“å¤‡ä»½å®Œæˆæ‰å¯ä»¥ï¼Œä½†æ˜¯ç”±äºä¸»åº“ç”³è¯·MDLå†™é”ï¼Œé‚£ä¹ˆä»åº“ååºçš„å¤‡ä»½éƒ½ä¼šè¢«é˜»å¡ï¼Œä¹Ÿå°±æ˜¯session C,Dé‚£ç§æƒ…å†µï¼Œæœ€åå°±å˜æˆäº†ä¸»åº“ç­‰å¾…ä»åº“å®Œæˆå¤‡ä»½ï¼Œä»åº“ç­‰å¾…ä¸»åº“å®ŒæˆDDLï¼Œå½¢æˆäº†æ­»é”çš„å±€é¢","like_count":0},{"had_liked":false,"id":314042,"user_name":"ç‰¹ç«‹ç‹¬è¡Œçš„çŒª","can_delete":false,"product_type":"c1","uid":1465344,"ip_address":"","ucode":"1440F96375740A","user_header":"https://static001.geekbang.org/account/avatar/00/16/5c/00/5d11e68d.jpg","comment_is_top":false,"comment_ctime":1632815934,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632815934","product_id":100020801,"comment_content":"Online DDLçš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br>1. æ‹¿MDLå†™é”<br>2. é™çº§æˆMDLè¯»é”<br>3. çœŸæ­£åšDDL<br>4. å‡çº§æˆMDLå†™é”<br>5. é‡Šæ”¾MDLé”ï¼Œæ²¡æœ‰æƒ³æ˜ç™½ç¬¬2æ­¥å’Œç¬¬4æ­¥çš„æ„å›¾","like_count":0},{"had_liked":false,"id":313935,"user_name":"æœªèèŠ±å","can_delete":false,"product_type":"c1","uid":2142672,"ip_address":"","ucode":"8BE87AC2CEA286","user_header":"https://static001.geekbang.org/account/avatar/00/20/b1/d0/8c94d49e.jpg","comment_is_top":false,"comment_ctime":1632747320,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632747320","product_id":100020801,"comment_content":"mysql&gt; explain select * from geek where c=1 order by a limit 1;<br>+----+-------------+-------+------------+------+---------------+------+---------+-------+------+----------+-------+<br>| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref   | rows | filtered | Extra |<br>+----+-------------+-------+------------+------+---------------+------+---------+-------+------+----------+-------+<br>|  1 | SIMPLE      | geek  | NULL       | ref  | c,ca,cb       | c    | 4       | const |    1 |   100.00 | NULL  |<br>+----+-------------+-------+------------+------+---------------+------+---------+-------+------+----------+-------+<br>1 row in set, 1 warning (0.00 sec)<br><br>mysql&gt; explain select * from geek where c=1 order by b limit 1;<br>+----+-------------+-------+------------+------+---------------+------+---------+-------+------+----------+----------------+<br>| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref   | rows | filtered | Extra          |<br>+----+-------------+-------+------------+------+---------------+------+---------+-------+------+----------+----------------+<br>|  1 | SIMPLE      | geek  | NULL       | ref  | c,ca,cb       | c    | 4       | const |    1 |   100.00 | Using filesort |<br><br>ä¸ºä»€ä¹ˆexplainä¸¤ä¸ªéƒ½æ²¡æœ‰èµ°ç´¢å¼•","like_count":0},{"had_liked":false,"id":312507,"user_name":"Bias","can_delete":false,"product_type":"c1","uid":1401281,"ip_address":"","ucode":"8F1109EC9AEA95","user_header":"https://static001.geekbang.org/account/avatar/00/15/61/c1/4b584663.jpg","comment_is_top":false,"comment_ctime":1631845777,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631845777","product_id":100020801,"comment_content":"Online DDL ALGORITHM=INPLACE, LOCK=NONE; çš„æƒ…å†µä¸çŸ¥æ€ä¹ˆæ ·","like_count":0},{"had_liked":false,"id":310300,"user_name":"Geek_842f07","can_delete":false,"product_type":"c1","uid":2698987,"ip_address":"","ucode":"ED772AF755FE7E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/WP4Ge8ABcINFkccKaNYKibicFnI0JAoojBBAUGrichNeRAgzm5RGbHG7GqYrFX3ELEzenuEbicQHJy2HZ72RxSOuMA/132","comment_is_top":false,"comment_ctime":1630581960,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630581960","product_id":100020801,"comment_content":"å¤‡ä»½ä¸€èˆ¬éƒ½ä¼šåœ¨å¤‡åº“ä¸Šæ‰§è¡Œï¼Œä½ åœ¨ç”¨â€“single-transaction æ–¹æ³•åšé€»è¾‘å¤‡ä»½çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸»åº“ä¸Šçš„ä¸€ä¸ªå°è¡¨åšäº†ä¸€ä¸ª DDLï¼Œæ¯”å¦‚ç»™ä¸€ä¸ªè¡¨ä¸ŠåŠ äº†ä¸€åˆ—ã€‚è¿™æ—¶å€™ï¼Œä»å¤‡åº“ä¸Šä¼šçœ‹åˆ°ä»€ä¹ˆç°è±¡å‘¢ï¼Ÿ<br>ç­”ï¼šå¤‡åº“ä¸Šåº”è¯¥è¿˜æ˜¯æ²¡æœ‰åŠ ä¸Šä¸€åˆ—çš„åŸæ¥çš„æ•°æ®","like_count":0},{"had_liked":false,"id":308197,"user_name":"Geek_d6f854","can_delete":false,"product_type":"c1","uid":2114848,"ip_address":"","ucode":"598D4A4F97AF82","user_header":"","comment_is_top":false,"comment_ctime":1629447516,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629447516","product_id":100020801,"comment_content":"çƒ­ç‚¹è¡¨ï¼Œè¿™æ®µâ€œkill å¯èƒ½æœªå¿…ç®¡ç”¨ï¼Œå› ä¸ºæ–°çš„è¯·æ±‚é©¬ä¸Šå°±æ¥äº†â€ï¼Œ æ–°æ¥çš„è¯·æ±‚ä¹Ÿæ˜¯åœ¨ddlå»è·å–dmlå†™é”ä¹‹åï¼Œkillè°ƒé•¿äº‹åŠ¡ä¹‹åï¼Œalter tableä¸ä¹…è·å–åˆ°dmlå†™é”ï¼Œåé¢ä¸ä¹…å¯ä»¥æ­£å¸¸æµç¨‹ç»§ç»­äº†å—ï¼Ÿä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°killä¸ç®¡ç”¨çš„æƒ…å†µå—ï¼Ÿè¿™é‡Œä¸æ˜¯å¾ˆç†è§£","like_count":0},{"had_liked":false,"id":308192,"user_name":"Geek_24d27b","can_delete":false,"product_type":"c1","uid":1625645,"ip_address":"","ucode":"B52AB6E73F6A0E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Gf2QrwPGnMzia7UbNZvAqDOHZZXFyibnUUsc7JrLggqUC2Mw0UneEBP9KicP8Dic30O22XrOz1cB3DatE4NxGpbIlA/132","comment_is_top":false,"comment_ctime":1629446137,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1629446137","product_id":100020801,"comment_content":"æ·»åŠ å­—æ®µï¼Œä¸ºä½•çœŸæ­£åšDDLçš„æ—¶å€™ä¸ä¼šé”ä½å‘¢ï¼Ÿå¦‚æœæ·»åŠ ä¸€ä¸ªå­—æ®µä¸”ç»™é»˜è®¤å€¼ï¼Œé‡‡ç”¨in-placeæ–¹å¼åœ¨åŸè¡¨ä¿®æ”¹ï¼Œé‚£ä¸æ˜¯ç›¸å½“äºå¯¹æ¯ä¸€æ¡è®°å½•éƒ½è¿›è¡Œupdateå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":307462,"user_name":"Geek_f23c82","can_delete":false,"product_type":"c1","uid":2725008,"ip_address":"","ucode":"40BABEF7078F37","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIW5xLKMIwlibBXdP5sGVqhXAGuLYk7XFBrhzkFytlKicjNpSHIKXQclDUlSbD9s2HDuOiaBXslCqVbg/132","comment_is_top":false,"comment_ctime":1629112154,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629112154","product_id":100020801,"comment_content":"è¯¾åä¹ é¢˜ç­”æ¡ˆåˆ†æï¼š<br>ç”±äºä»åº“å¤‡ä»½æ•°æ®æ—¶åŠ ä¸Šäº†â€œ--single-transactionâ€ï¼Œå› æ­¤æœ¬æ¬¡å¤‡ä»½ä¼šæ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢æ‰§è¡Œï¼Œå› æ­¤æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¼šè·å–æŸå¼ è¡¨çš„MDLè¯»é”ï¼Œå¹¶ä¸”åªæœ‰commitä¹‹åè¯¥è¡¨çš„MDLè¯»é”æ‰ä¼šé‡Šæ”¾ã€‚å½“ä»åº“åŒæ­¥åˆ°DDLæ“ä½œä¹‹åï¼Œä¼šå°è¯•å»è·å–å‰è¿°è¡¨çš„å†™é”ï¼Œä½†æ˜¯æ­¤æ—¶MDLè¯»é”è¿˜æœªé‡Šæ”¾ï¼Œå› æ­¤DDLä¼šé˜»å¡ã€‚å¦å¤–ä¼šé˜»å¡åç»­å¯¹è¯¥è¡¨çš„DMLæ“ä½œï¼Œå¦‚æœè¿™ä¸ªä»åº“ç”¨äºé«˜å¹¶å‘è¯»åœºæ™¯ï¼Œä¸”å¯¹è¯¥è¡¨çš„è¯»æ“ä½œéå¸¸é¢‘ç¹ï¼Œé€ æˆçš„å½±å“è¿˜æ˜¯è›®å¤§çš„ã€‚","like_count":0},{"had_liked":false,"id":306568,"user_name":"é¦™è‰å°ç¾Šæ’","can_delete":false,"product_type":"c1","uid":1315852,"ip_address":"","ucode":"E8083C086ACE99","user_header":"https://static001.geekbang.org/account/avatar/00/14/14/0c/43be5510.jpg","comment_is_top":false,"comment_ctime":1628608804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628608804","product_id":100020801,"comment_content":"ç´¢å¼•c,b å°±ç­‰ä»·äºorder by c,b ï¼Ÿï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":305355,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1627916961,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627916961","product_id":100020801,"comment_content":"çº¿ç¨‹AåŠ é”ï¼ˆlock tables t1 read, t2 writeï¼‰åï¼Œ<br>çº¿ç¨‹BæŸ¥è¯¢è¡¨t2ï¼ˆselect * from t2 limit 1ï¼‰<br>çº¿ç¨‹CæŸ¥è¯¢ &quot;show PROCESSLIST&quot;ï¼Œæ˜¾ç¤ºçº¿ç¨‹2çš„stateæ˜¯ â€Waiting for table metadata lockâ€œ   è¿™ä¸ä¹Ÿæ˜¯MDLé”å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":304046,"user_name":"Eternal","can_delete":false,"product_type":"c1","uid":1188023,"ip_address":"","ucode":"EA6FE7CC98F740","user_header":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","comment_is_top":false,"comment_ctime":1627205925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627205925","product_id":100020801,"comment_content":"æ•°æ®åº“é‚£äº›åœºæ™¯ä¼šæ¶‰åŠåˆ°æ•°æ®ä¸ä¸€è‡´ï¼Œéœ€è¦åŠ é”ï¼Ÿ<br><br>å…ˆå›å¿†ä¸€ä¸‹é”çš„åˆ†ç±»<br>serviceå±‚çš„é”ï¼š<br>1ã€å…¨å±€é”<br>2ã€è¡¨é”<br>2ã€MDLé”<br><br>å¼•æ“å±‚çš„é”ï¼ˆInnoDBï¼‰<br>1ã€è¡¨é”ï¼šæ„å‘é” X ã€S<br>2ã€è¡Œé”ï¼šè¡Œé”ã€gapé”ã€é—´æ­‡é”<br>3ã€ä¸»é”®è‡ªå¢é•¿é”<br><br>å¸¸ç”¨æ“ä½œåœºæ™¯<br>1ã€æ›´æ–°è¡¨ç»“æ„ï¼Œå¦‚æ·»åŠ å­—æ®µï¼ˆDDLï¼‰<br>2ã€æ›´æ–°æ•°æ®ï¼ˆDMLï¼‰<br>3ã€æ•°æ®å¤‡ä»½<br>4ã€æ•°æ®åŒæ­¥<br>5ã€ä¸»ä»åˆ‡æ¢<br><br>è€ƒè™‘ä»¥ä¸Š5ç§æƒ…å†µå¦‚æœéšæ„ç»„åˆä¸”å¹¶å‘ï¼Œç³»ç»Ÿæµç¨‹æ€ä¹ˆèµ°çš„ï¼ŸåŠ é”æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":303443,"user_name":"Rui","can_delete":false,"product_type":"c1","uid":2705422,"ip_address":"","ucode":"995E914B6DFAE5","user_header":"https://static001.geekbang.org/account/avatar/00/29/48/0e/ea42eaf8.jpg","comment_is_top":false,"comment_ctime":1626788860,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1626788860","product_id":100020801,"comment_content":"æœ¬èŠ‚è¯¾ç¨‹ä¸»è¦ä»‹ç»äº†MYSQLçš„å…¨å±€é”å’Œè¡¨çº§é”<br>å…¨å±€é”ä¸€èˆ¬åœ¨åšé€»è¾‘å¤‡ä»½çš„æ—¶å€™ä½¿ç”¨<br>å…¨å±€é”æœ‰ä¸‰ç§æ–¹å¼ï¼š<br>1.flush tables with read lock 2.set global readonly = true 3.mysqldump -single-transaction<br>å¦‚æœå¼•æ“æ”¯æŒrepeatable readéš”ç¦»çº§åˆ«ï¼Œå»ºè®®ä½¿ç”¨mysqldump -single-transaction,å¯ä»¥æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾<br>flush tables with read lock,ç›¸æ¯”äºset global readonly = trueæ¥è®²ï¼Œæ¨èä½¿ç”¨ç¬¬ä¸€ç§ï¼Œä¸¤ç‚¹åŸå› ï¼š<br>1.set global readonly = trueåœ¨æŸäº›ç³»ç»Ÿä¸­ä¼šç”¨æ¥åˆ¤æ–­ä¸€ä¸ªåº“æ˜¯ä¸»åº“è¿˜æ˜¯ä»åº“ï¼Œå› æ­¤å¯èƒ½å½±å“æ›´å¤§<br>2.ä¸¤è€…åœ¨å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸Šæœ‰æ‰€ä¸åŒï¼Œflush tables with read only é‡åˆ°å¼‚å¸¸ä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼Œè€Œset global readonly = trueçš„æ–¹å¼åˆ™ä¸ä¼šï¼Œå› æ­¤å‰è€…æ›´åŠ å®‰å…¨<br><br>è¡¨çº§é”æœ‰ä¸¤ç§ï¼š<br>1.lock table t read | write è¡¨é”<br>2.MDLé”<br><br>å‡è®¾ä½¿ç”¨lock table t1 read,t2 write,åˆ™å½“å‰çº¿ç¨‹åªèƒ½å¯¹t1è¯»ï¼Œå¯¹t2è¯»å†™ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥å¯¹t1è¯»ï¼Œå¯¹t2è¯»å†™éƒ½ä¸å¯ä»¥ã€‚<br>MDLé”åˆç§°å…ƒæ•°æ®é”ï¼Œæ—¨åœ¨ä¿è¯DDLå’ŒDMLæ“ä½œä¹‹é—´ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§<br>MDLé”ä¸éœ€è¦æ˜¾å¼å£°æ˜ï¼Œåœ¨è®¿é—®ä¸€ä¸ªè¡¨æ—¶ä¼šè¢«è‡ªåŠ¨åŠ ä¸Š<br>å¦‚æœäº‹åŠ¡Aæ‰§è¡Œäº†MDLæ“ä½œï¼Œå¹¶ä¸”æœªæäº¤ï¼Œæ­¤æ—¶äº‹åŠ¡Béœ€è¦æ‰§è¡Œä¸€ä¸ªDDLæ“ä½œï¼Œåˆ™å¿…é¡»ç­‰å¾…äº‹åŠ¡Aé‡Šæ”¾MDLé”ã€‚<br>å¦‚ä½•å®‰å…¨çš„ç»™ä¸€ä¸ªè¡¨æ‰§è¡ŒDDLæ“ä½œï¼š<br>1.åœ¨æ‰§è¡ŒDDLæ“ä½œä¹‹å‰ï¼Œkillé•¿äº‹åŠ¡ï¼Œå¯ä»¥æŸ¥çœ‹information_schema.trxè¡¨ä¸­çš„äº‹åŠ¡ä¿¡æ¯ï¼Œ<br>2.å¦‚æœè¿™ä¸ªè¡¨æ˜¯ä¸ªçƒ­ç‚¹è¡¨ï¼Œè¢«è®¿é—®çš„é¢‘ç‡è¾ƒé«˜ï¼Œé‚£ä¹ˆkillå¯èƒ½æ²¡æœ‰æ•ˆæœï¼Œå› ä¸ºæ–°çš„è¯·æ±‚å¾ˆå¿«å°±ä¼šè¿‡æ¥ï¼Œ<br>å¯ä»¥ä¸ºDDLè®¾å®šè¶…æ—¶æ—¶é—´ï¼Œalert table table_name wait N add column æˆ–è€… alert table table_name nowwait add colunm","like_count":0},{"had_liked":false,"id":302659,"user_name":"ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":1080238,"ip_address":"","ucode":"23C85117A16BEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/7b/ae/66ae403d.jpg","comment_is_top":false,"comment_ctime":1626320237,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626320237","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåƒç»™è¡¨åŠ å­—æ®µï¼Œ(æ–¹å¼1).é¡ºåºåŠ åœ¨å·²æœ‰å­—æ®µåé¢;(æ–¹å¼2).é€šè¿‡afteråŠ åœ¨ä¸šåŠ¡ç›¸å…³å­—æ®µåé¢ã€‚è¿™ä¸¤ç§æ–¹å¼å¯¹mysqlæ¥è¯´æœ‰åŒºåˆ«å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":301975,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1626003857,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626003857","product_id":100020801,"comment_content":"ä¸ªäººç†è§£ï¼šç”¨â€“single-transaction æ–¹æ³•åšé€»è¾‘å¤‡ä»½ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œä»ä¸€è‡´æ€§è§†å›¾ä¸­è¯»å–æ•°æ®ï¼Œè€Œæ­¤æ—¶å¦‚æœåœ¨ä¸»åº“ç»™ä¸€ä¸ªå°è¡¨ç”¨DDLåŠ ä¸€åˆ—æ—¶ï¼Œéœ€è¦åŠ å†™é”ï¼Œæ­¤æ—¶çº¿ç¨‹éœ€è¦ç­‰å¾…ï¼Œå› æ­¤ï¼Œåœ¨å¤‡åº“ä¸­çœ‹åˆ°çš„é‚£ä¸ªè¡¨ç»“æ„è¿˜æ˜¯æœªåšä»»ä½•ä¿®æ”¹ã€‚","like_count":0},{"had_liked":false,"id":300524,"user_name":"Geek_457f47","can_delete":false,"product_type":"c1","uid":1443589,"ip_address":"","ucode":"B9EB1B46AA4D85","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iamkqQRZFTAQgclRqskib3n860CStDuxq2aiaZO7EicDfLJwCdZ9gZiajhBoTNuFKH47DLKO5C4GHxukN5L1VOpcR6Q/132","comment_is_top":false,"comment_ctime":1625204739,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625204739","product_id":100020801,"comment_content":"ä¸ŠèŠ‚è¯¾çš„ç­”ç–‘ä¸­ï¼Œc, å’Œcaçš„é—®é¢˜è¿˜æƒ³ç¡®è®¤ä¸€ä¸ªé—®é¢˜ï¼Œéèšç°‡ç´¢å¼•ä¸­ï¼Œå¶å­èŠ‚ç‚¹ä¿å­˜çš„ä¸»é”®ä¹Ÿæ˜¯æœ‰åºçš„å—ï¼Œå¦‚æœç´¢å¼•å€¼ä¸€æ ·çš„è¯ã€‚","like_count":0},{"had_liked":false,"id":300113,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1625013589,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625013589","product_id":100020801,"comment_content":"1 mysql æ ¹æ®é”çš„èŒƒå›´åˆ†ä¸º å…¨å±€é”ï¼Œè¡¨çº§é”ï¼Œå’Œè¡Œçº§é”ã€‚<br>2 å…¨å±€é”<br>   2.1 å…¨å±€é”ä¼šè®©æ•´ä¸ªè¡¨å˜æˆåªè¯»çš„çŠ¶æ€ã€‚ä¸€èˆ¬ç”¨åœ¨ æ•°æ®çš„é€»è¾‘å¤‡ä»½ã€‚<br>   2.2 mysql å¯æ˜¯ä½¿ç”¨ Flash table with read lock (FTWRL) ç»™å…¨å±€æ·»åŠ è¯»é”ã€‚<br>   2.3 mysqlå®˜æ–¹è‡ªå¸¦çš„é€»è¾‘å¤‡ä»½å·¥å…·æ˜¯ mysqldumpã€‚å½“mysqldump ä½¿ç”¨å‚æ•° -single-transaction çš„æ—¶å€™ï¼Œæ•°æ®å¯åŠ¨ä¹‹å‰å°±ä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œä¿è¯æ‹¿åˆ°æ•°æ®çš„ä¸€è‡´æ€§ã€‚<br>       ä½†æ˜¯ single-transaction æ–¹æ³•åªé€‚ç”¨äºæ‰€æœ‰çš„è¡¨ç¤ºç”¨äº‹åŠ¡å¼•æ“çš„åº“ã€‚ MySAM å°±ä¸æ”¯æŒäº‹åŠ¡å¼•æ“ã€‚<br>3 è¡¨çº§é”<br> 3.1 è¡¨çº§é”ï¼Œæœ‰2ç§ï¼Œä¸€ç§æ˜¯è¡¨é”ï¼Œä¸€ç§æ˜¯å…ƒæ•°æ®é”ï¼ˆmeta data lock   MDLï¼‰ã€‚<br> 3.2 è¡¨é”çš„è¯­æ³•æ˜¯ lock table .. read&#47;write   å°±æ˜¯å¯¹è¡¨è¿›è¡Œæ“ä½œå‰ï¼Œå…ˆæ‹¿åˆ°é”ã€‚<br> 3.3 MDL ä¸éœ€è¦æ˜¾ç¤ºæ·»åŠ ï¼Œåœ¨è¡¨æ“ä½œçš„æ—¶å€™ï¼Œä¼šé»˜è®¤åŠ ä¸Šï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢ï¼Œæ•°æ®ä¸ä¸€è‡´ã€‚<br> 3.4 ä¸ºäº†é˜²æ­¢ddLå°è¡¨ï¼Œé˜»å¡æ•´ä¸ªæ•°æ®åº“ï¼Œéœ€è¦ è§£å†³é•¿äº‹ç‰©é—®é¢˜ã€‚ è®¾ç½®DDLè¶…æ—¶æ—¶é—´ï¼Œæˆ–è€…kill é•¿äº‹åŠ¡ã€‚","like_count":0},{"had_liked":false,"id":299415,"user_name":"ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":1080238,"ip_address":"","ucode":"23C85117A16BEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/7b/ae/66ae403d.jpg","comment_is_top":false,"comment_ctime":1624616467,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624616467","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¯¹çƒ­ç‚¹è¡¨ï¼Œæ¸…ç†å®Œä¸ç”¨çš„å†å²æ•°æ®ï¼Œå†æ‰§è¡Œalter table t engine=InnoDBï¼Œä¼šæœ‰æ‹–å®æ•´ä¸ªåº“çš„é£é™©å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":296691,"user_name":"oops","can_delete":false,"product_type":"c1","uid":1102831,"ip_address":"","ucode":"1DEC23A503F8A3","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/ef/9c5e695b.jpg","comment_is_top":false,"comment_ctime":1623116992,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623116992","product_id":100020801,"comment_content":"è¡¨çº§é”mdlé”è·Ÿix,isæ˜¯åŒä¸€ä¸ªæ¦‚å¿µå—","like_count":0},{"had_liked":false,"id":296143,"user_name":"Geek_457f47","can_delete":false,"product_type":"c1","uid":1443589,"ip_address":"","ucode":"B9EB1B46AA4D85","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iamkqQRZFTAQgclRqskib3n860CStDuxq2aiaZO7EicDfLJwCdZ9gZiajhBoTNuFKH47DLKO5C4GHxukN5L1VOpcR6Q/132","comment_is_top":false,"comment_ctime":1622775368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622775368","product_id":100020801,"comment_content":"æ–‡ä¸­sesssion Cè·å–å†™é”ä¼šé˜»å¡å¯ä»¥ç†è§£ï¼Œä¸ºä»€ä¹ˆsession D è·å–è¯»é”ä¼šè¢«session C é˜»å¡å‘¢ï¼Ÿä¸åº”è¯¥session Dç›´æ¥å’Œå½“å‰è·å–MDL è¯»é”çš„session A æ¯”è¾ƒå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":294266,"user_name":"è¤ç«è™«777","can_delete":false,"product_type":"c1","uid":2240716,"ip_address":"","ucode":"7869A3FC6E0375","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/iafcfA40I3EOMhK8eDHQxmWmBjtNzAwYKT5AKHaAqFibCgyKichCbnDLcxUmUUzSOZlbiao6uftwXicFfYyh1licDibxw/132","comment_is_top":false,"comment_ctime":1621856509,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621856509","product_id":100020801,"comment_content":"æ€ä¹ˆæ„Ÿè§‰ï¼Œæˆ‘æjavaçš„æ²¡ç”¨åˆ°è¿™äº›å‘¢","like_count":0},{"had_liked":false,"id":291975,"user_name":"Geek_42c6d4","can_delete":false,"product_type":"c1","uid":2570887,"ip_address":"","ucode":"77AD7D2D9950C2","user_header":"","comment_is_top":false,"comment_ctime":1620632097,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620632097","product_id":100020801,"comment_content":"æˆ‘å¯ä»¥ç†è§£ä¸º<br>å¦‚æœæœ‰ä¸€ä¸ªæ‰¹é‡ä¿®æ”¹å­—æ®µçš„æ“ä½œï¼Œå¦‚æœæˆåŠŸæ‹¿åˆ°äº†mdlå†™é”ï¼Œå¹¶ä¸”æˆåŠŸé™çº§æˆmdlè¯»é”ï¼ŒæœŸé—´æ²¡æœ‰åˆ«çš„äº‹åŠ¡ä¿®æ”¹è¡¨æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™å·²ç»åœ¨æ‰§è¡Œå­—æ®µä¿®æ”¹æ“ä½œäº†ï¼Œåœ¨ä¿®æ”¹å­—æ®µæœŸé—´ï¼Œæ˜¯å¯ä»¥æœ‰åˆ«çš„äº‹åŠ¡åšæ­£å¸¸çš„å¢åˆ æ”¹æŸ¥çš„å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":291293,"user_name":"å† ","can_delete":false,"product_type":"c1","uid":1285036,"ip_address":"","ucode":"A616FF0CEB4714","user_header":"https://static001.geekbang.org/account/avatar/00/13/9b/ac/b841e379.jpg","comment_is_top":false,"comment_ctime":1620190517,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1620190517","product_id":100020801,"comment_content":"A session that requires locks must acquire all the locks that it needs in a single LOCK TABLES statement. While the locks thus obtained are held, the session can access only the locked tables. <br>-----https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;lock-tables.html","like_count":0},{"had_liked":false,"id":290479,"user_name":"ck","can_delete":false,"product_type":"c1","uid":1142348,"ip_address":"","ucode":"2335A22314296A","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/4c/494b2907.jpg","comment_is_top":false,"comment_ctime":1619581994,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619581994","product_id":100020801,"comment_content":"flush tables with read lock(FTWRL) ä¸ºæ•°æ®åº“åŠ ä¸Šå…¨å±€é”åå¯ä»¥ä½¿ç”¨unlock tables è§£é”.","like_count":0},{"had_liked":false,"id":289533,"user_name":"lleft","can_delete":false,"product_type":"c1","uid":1970443,"ip_address":"","ucode":"D573EB509455AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","comment_is_top":false,"comment_ctime":1619064530,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1619064530","product_id":100020801,"comment_content":"åŠ å­—æ®µé‚£ä¸ªä¾‹å­ï¼ŒsessionCæ·»åŠ å­—æ®µè¢«å µå¡äº†ï¼Œä¸æ˜¯è¿˜æ²¡è·å–åˆ°MDLå†™é”å‘¢ï¼ŸsessionAçš„MDLè¯»é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼ŒMDLè¯»å†™é”äº’æ–¥çš„å‘€ï¼ŸsessionCè¿˜æ²¡è·å–åˆ°MDLå†™é”åˆæ€ä¹ˆä¼šå µå¡sessionDçš„å‘¢ï¼Ÿéš¾é“sessionCè·å–åˆ°äº†MDLå†™é”ï¼Œåªæ˜¯ä¸èƒ½å®é™…æ‰§è¡ŒDDLï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2340277,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIj43LHM3EMNT9m1zRuluxXcHicoiaq2lSibicGFUjQamExNxKicQYLboXPmhFsT6T0SriakzDpGkFkWBag/132","nickname":"Geek_88e281","note":"","ucode":"0724F70BEE2A30","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378238,"discussion_content":"å› ä¸ºsessionCåœ¨ç­‰å¾…è·å–MDLå†™é”ã€‚ç”±äºé”é˜Ÿåˆ—çš„æœºåˆ¶ã€‚å†™çš„çº§åˆ«æ¯”è¯»é«˜ï¼Œæ‰€ä»¥sessionDä¼šç­‰å¾…sessionC,ä½†æ˜¯sessionAå¦‚æœæäº¤äº†ã€‚è¿™æ—¶sessionCè·å–åˆ°äº†MDLå†™é”ï¼Œç„¶åä¼šå¾ˆå¿«é™çº§åˆ°è¯»é”ï¼ŒçœŸæ­£åšDDL,è¿™æ—¶sessionDå¦‚æœæ‰§è¡Œæ—¶é—´å¾ˆçŸ­å°±ä¼šæŸ¥è¯¢å‡ºæ¥ï¼Œå¦‚æœè¿˜åœ¨æ‰§è¡Œä¸­ï¼ŒsessionCè¯¥è·å–MDLå†™é”äº†ï¼Œè¿™æ—¶ä¼šè·ŸsessionCè¯»é”äº’æ–¥ï¼Œç­‰å¾…sessionDäº‹åŠ¡æäº¤ï¼Œæœ€åsessionCæ‹¿åˆ°MDLå†™é”ã€‚æäº¤äº‹åŠ¡ï¼Œé‡Šæ”¾MDLå†™é”ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623121823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289323,"user_name":"é©¬æˆ","can_delete":false,"product_type":"c1","uid":1486895,"ip_address":"","ucode":"664F2BAA2E0F0B","user_header":"https://static001.geekbang.org/account/avatar/00/16/b0/2f/e2096905.jpg","comment_is_top":false,"comment_ctime":1618976811,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1618976811","product_id":100020801,"comment_content":"å…ˆå¼€å¯äº‹åŠ¡ï¼Œæ‰§è¡Œè¯­å¥æ‹¿åˆ°äº†MDLè¯»é”ï¼›ä¹‹åæ‰§è¡ŒDDLæ—¶ï¼Œè¦è·å–MDLå†™é”ï¼Œå› ä¸ºiæ­¤æ—¶æœ‰è¯»é”äº†ï¼Œæ‰€ä»¥å½“å‰çº¿ç¨‹é˜»å¡ï¼›é‚£ä¹ˆä¹‹åselectçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆä¼šè¢«é˜»å¡å‘¢ï¼ŸMDLå†™é”ä¸æ˜¯æ²¡æœ‰è·å–åˆ°å—ï¼Ÿè¿˜æ˜¯å·²ç»è·å–åˆ°äº†ï¼Œä½†æ˜¯æ‰§è¡Œçš„æ—¶å€™å› ä¸ºæœ‰è¯»é”ï¼Œæ‰€ä»¥é˜»å¡ï¼Ÿ","like_count":0},{"had_liked":false,"id":288510,"user_name":"ç²¥é­šå…’","can_delete":false,"product_type":"c1","uid":2206356,"ip_address":"","ucode":"31DAD6CCA2FE1C","user_header":"https://static001.geekbang.org/account/avatar/00/21/aa/94/5f0396ec.jpg","comment_is_top":false,"comment_ctime":1618497992,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618497992","product_id":100020801,"comment_content":"â€œå…¨å±€é”çš„å…¸å‹ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œåšå…¨åº“é€»è¾‘å¤‡ä»½ã€‚ä¹Ÿå°±æ˜¯æŠŠæ•´åº“æ¯ä¸ªè¡¨éƒ½ select å‡ºæ¥å­˜æˆæ–‡æœ¬ã€‚â€<br>å…³äºè¿™å¥è¯æˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼šé€»è¾‘å¤‡ä»½æ˜¯å¤‡ä»½sqlè¯­å¥ï¼›è€Œè¡¨selectå‡ºæ¥çš„æ˜¯æ•°æ®ï¼Œå­˜å‚¨æ•°æ®æ˜¯ç‰©ç†å¤‡ä»½å§ï¼Ÿ<br>ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘ç†è§£æœ‰è¯¯ï¼Œè¯·å¤§å®¶æŒ‡æ­£ã€‚","like_count":0},{"had_liked":false,"id":288455,"user_name":"ç²¥é­šå…’","can_delete":false,"product_type":"c1","uid":2206356,"ip_address":"","ucode":"31DAD6CCA2FE1C","user_header":"https://static001.geekbang.org/account/avatar/00/21/aa/94/5f0396ec.jpg","comment_is_top":false,"comment_ctime":1618476024,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1618476024","product_id":100020801,"comment_content":"â€œä¸¾ä¸ªä¾‹å­, å¦‚æœåœ¨æŸä¸ªçº¿ç¨‹ A ä¸­æ‰§è¡Œ lock tables t1 read, t2 write; è¿™ä¸ªè¯­å¥ï¼Œåˆ™å…¶ä»–çº¿ç¨‹å†™ t1ã€è¯»å†™ t2 çš„è¯­å¥éƒ½ä¼šè¢«é˜»å¡ã€‚åŒæ—¶ï¼Œçº¿ç¨‹ A åœ¨æ‰§è¡Œ unlock tables ä¹‹å‰ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œè¯» t1ã€è¯»å†™ t2 çš„æ“ä½œã€‚è¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨ã€‚â€<br><br>è¿™ä¸€æ®µçš„æœ€åä¸€å¥è¯æœ‰ç‚¹ä¸ç†è§£ã€‚çº¿ç¨‹Aé”ä½äº†t1å’Œt2ï¼Œé‚£ä¹ˆçº¿ç¨‹Aä¹Ÿä¸èƒ½è®¿é—®é™¤äº†t1å’Œt2ä¹‹å¤–çš„è¡¨å—ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":2206356,"avatar":"https://static001.geekbang.org/account/avatar/00/21/aa/94/5f0396ec.jpg","nickname":"ç²¥é­šå…’","note":"","ucode":"31DAD6CCA2FE1C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367825,"discussion_content":"åœ¨å…¶ä»–çš„è¯„è®ºä¸‹å·²æ‰¾åˆ°ç­”æ¡ˆï¼šä¸€ä¸ªsessionè·å–é”æ—¶ï¼Œå¿…é¡»ä¸€æ¬¡æ€§è·å–æ‰€æœ‰éœ€è¦çš„é”ï¼Œåœ¨è¿™ä¸ªè¯­å¥ä¸­ï¼Œsessionåªè·å–äº†t1çš„è¯»é”å’Œt2çš„è¯»å†™é”ï¼Œæ‰€ä»¥åªå¯¹è¿™ä¸¤ä¸ªè¡¨æœ‰ç›¸åº”çš„æƒé™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618476437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287105,"user_name":"nul","can_delete":false,"product_type":"c1","uid":1043499,"ip_address":"","ucode":"2DBF03B2193B76","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/2b/1e059a0f.jpg","comment_is_top":false,"comment_ctime":1617778301,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617778301","product_id":100020801,"comment_content":"ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œâ€œæå®¢æ—¶é—´â€è´­ä¹°ç³»ç»Ÿï¼Œä½™é¢å˜åŠ¨å’Œè¯¾ç¨‹å˜åŠ¨ä¸¤ä¸ªæ­¥éª¤åº”è¯¥ä¿è¯ä¸šåŠ¡åœ¨åŒä¸€äº‹åŠ¡å°±å¥½äº†ï¼Œå¦‚æœä¸åŒäº‹åŠ¡å­˜åœ¨æ—¶é—´å·®çš„è¯å³æ—¶å…¨å±€é”ä¹Ÿæ²¡æ³•è§£å†³ã€‚","like_count":0},{"had_liked":false,"id":286521,"user_name":"TANMIYOO","can_delete":false,"product_type":"c1","uid":1375256,"ip_address":"","ucode":"BC3556131D4D61","user_header":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","comment_is_top":false,"comment_ctime":1617355683,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617355683","product_id":100020801,"comment_content":"part1.å…¨å±€ä¸Šé”æœ‰ä¸¤ç§æ–¹å¼ flush tables with read lock(FTWRL) å’Œ readonly<br>FTWRLä¸€èˆ¬ç”¨äºå…¨é‡å¤‡ä»½,é¿å…åœ¨å¤‡ä»½è¿‡ç¨‹ä¸­æœ‰æ•°æ®æ›´æ–°.ä½†è¿™ç§æ–¹å¼æœ‰ä¸¤ä¸ªå¼Šç«¯:â‘ åœ¨ä¸»åº“å¤‡ä»½,ä¸èƒ½è¯»å†™,è‡´ä½¿ä¸šåŠ¡åœæ‘†;â‘¡åœ¨ä»åº“å¤‡ä»½,ä¸èƒ½æ‰§è¡Œä¸»åº“çš„binlog,å¯¼è‡´ä¸»ä»å»¶è¿Ÿ.è€Œinnodbå¼•æ“ä¸‹,æ”¯æŒäº‹åŠ¡çš„ä¸€è‡´æ€§è§†å›¾ mysqldump single-transaction,æ™®éç”¨è¿™ç§æ–¹æ³•å¤‡ä»½.<br>readonlyä¸€æ–¹é¢ç”¨äºåˆ¤æ–­ä¸»ä»åº“,å¦ä¸€æ–¹é¢è¿æ¥æ–­å¼€æ—¶ä¸ä¼šåƒFTWRLä¸€æ ·é‡Šæ”¾é”,è€Œæ˜¯ä¸€ç›´ä¿æŒreadonlyçš„çŠ¶æ€,é£é™©æ€§å¾ˆå¤§.<br>part2:è¡¨çº§é”æœ‰è¡¨é”å’Œmeta data lock(MDL)<br>innodbæ”¯æŒè¡Œé”,è¡¨é”çš„äº’æ–¥å¼ºåº¦å¾ˆå¤§,åœ¨innodbå¼•æ“ä¸‹,å¿½ç•¥ä¸è°ˆ;<br>MDLæ˜¯è¢«åŠ¨é”,mysql5.5ä»¥å å¢åˆ æŸ¥æ”¹è¡¨æ•°æ®è‡ªåŠ¨åŠ è¯»é”,DDLæ—¶è‡ªåŠ¨åŠ å†™é”.è¯»é”ä¸å†™é”,å†™é”ä¸å†™é”ä¹‹é—´æ˜¯äº’æ–¥çš„.æ‰€ä»¥åœ¨å¯¹çƒ­ç‚¹è¡¨è¿›è¡ŒDDLæ—¶æœ‰å¯èƒ½å‘ç”Ÿå µå¡çš„æƒ…å†µ,å¯¼è‡´æœåŠ¡å´©æºƒ.é¿å…è¿™ç§æƒ…å†µ,ä¸€.åœ¨ddlä¹‹å‰æŸ¥è¯¢æ­£åœ¨æ‰§è¡Œçš„é•¿äº‹åŠ¡å¹¶kiilæ‰ æˆ–è€… ä½¿ç”¨ alter table t wait N add column å°è¯•è·å–å†™é”,æ‹¿ä¸åˆ°å°±ç­‰ä¸€ä¸‹ç»§ç»­è·å–å†™é”, ddl online (åé¢å­¦ä¹ )<br>part3:æ€è€ƒé¢˜<br>å›ç­”ä¸å‡ºæ¥T T","like_count":0},{"had_liked":false,"id":286306,"user_name":"tushanjing","can_delete":false,"product_type":"c1","uid":2112449,"ip_address":"","ucode":"5DC0B62289D971","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGHYXGttb4b5tGf2NQHLIibDnCzqTT08OoEI3QYwX8qwlviaT8iaMiaKghw7ibB4PVAV0DUcCFsibfST3g/132","comment_is_top":false,"comment_ctime":1617246080,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617246080","product_id":100020801,"comment_content":"æœ‰ä¸€ç‚¹ä¸å¤ªæ‡‚å“¦ï¼Œå°è¡¨ä¿®æ”¹å­—æ®µçš„é‚£ä¸ªåä¾‹ä¸­ï¼ŒsessionA çš„metadata è¯»é”æ²¡æœ‰é‡Šæ”¾ï¼Œsession Cçš„å†™é”åº”è¯¥åŠ ä¸ä¸Šå»çš„å§ï¼Œä¸ºå•¥åé¢çš„sesisonè¯»ä¼šè¢«é˜»å¡å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":283344,"user_name":"ä¸€æ­¥ä¸¤æ­¥","can_delete":false,"product_type":"c1","uid":2151836,"ip_address":"","ucode":"B59D1F5293B5C2","user_header":"https://static001.geekbang.org/account/avatar/00/20/d5/9c/842eda55.jpg","comment_is_top":false,"comment_ctime":1615716938,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615716938","product_id":100020801,"comment_content":"1. é¦–å…ˆä¸Šé¢åˆ†æçš„session abcdçš„session cå’Œsession dæˆ‘å¹¶æ²¡æœ‰å®Œå…¨çœ‹æ‡‚ï¼Œæ—¢ç„¶session cå·²ç»è¢«é˜»å¡ï¼Œçº¿ç¨‹å°±ä¸ä¼šæ‰§è¡Œåˆ°session däº†å§ï¼Œæ›´ä¸ä¼šåˆcommitäº‹åŠ¡å§ã€‚<br>2. ç„¶åå°è¡¨åŠ å­—æ®µçš„è§£å†³æ–¹æ³•ï¼Œé‡‡ç”¨åŠ ç­‰å¾…æ—¶é—´æ¥è§£å†³ï¼Œå¦‚æœsession cè¢«é˜»å¡è¶…æ—¶æ”¾å¼ƒäº†alteræ“ä½œï¼Œç›´æ¥æ‰§è¡Œsession dï¼Œç„¶åcommitï¼Œè¿™ä¸ªæ˜¯æ¯æ¬¡éƒ½ä¼šæ”¾å¼ƒçš„ï¼Œå› ä¸ºsession cè‚¯å®šä¼šè¢«é˜»å¡çš„ï¼Œè¿™ä¸ªæˆ‘æ²¡æœ‰ç†è§£ã€‚è¿˜æ˜¯è¯´æƒ³æŠŠalteræ“ä½œï¼Œä¸æ”¾åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œæ¯”å¦‚å•ç‹¬çš„å‘½ä»¤è¡Œæ‰§è¡Œã€‚","like_count":0},{"had_liked":false,"id":282693,"user_name":"å°å¦–","can_delete":false,"product_type":"c1","uid":1730626,"ip_address":"","ucode":"49C01DBFADF101","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJvm1JYIDcS74s4cEYxA1PXMqjortVXEjUKyGQcPvibNJ4EAuksIa6uoHgr6G1yRqAM2KtP3yicKgTA/132","comment_is_top":false,"comment_ctime":1615366243,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615366243","product_id":100020801,"comment_content":"é—´éš™é”æ€ä¹ˆæ²¡æœ‰è®²ï¼Œæ„Ÿè§‰é—´éš™é”å®é™…ä¸Šæ˜¯å¾ˆé‡è¦çš„","like_count":0},{"had_liked":false,"id":281690,"user_name":"è‘£æ²›éœ–","can_delete":false,"product_type":"c1","uid":1460229,"ip_address":"","ucode":"D223C52555C57F","user_header":"https://static001.geekbang.org/account/avatar/00/16/48/05/2ef4b9fb.jpg","comment_is_top":false,"comment_ctime":1614848136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614848136","product_id":100020801,"comment_content":"ä½¿ç”¨ set global readonly=true çš„æ–¹å¼ï¼Œåº”è¯¥ä¸èƒ½é˜»å¡æ›´æ–°ç±»äº‹åŠ¡çš„æäº¤è¯­å¥ï¼Œå¤‡ä»½çš„ä¸€è‡´æ€§è¿˜æ˜¯æ²¡æ³•ä¿è¯å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":280699,"user_name":"å°wei","can_delete":false,"product_type":"c1","uid":1508328,"ip_address":"","ucode":"416CBC64D71B16","user_header":"","comment_is_top":false,"comment_ctime":1614322996,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614322996","product_id":100020801,"comment_content":"SAVEPOINT test;&#47;&#47;æŒ‡å®šä¿å­˜ç‚¹,åç§°ä¸ºtestï¼ŒROLLBACK TO SAVEPOINT test;&#47;&#47;å›æ»šåˆ°ä¿å­˜ç‚¹testï¼Œè€å¸ˆè¿™ä¸ªä¿å­˜ç‚¹çš„ä½¿ç”¨åœºæ™¯æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿæ˜¯ä¸æ˜¯å¯ä»¥æ¯ä¸€ä¸ªæ›´æ–°éƒ½åŠ ä¸€ä¸ªä¿å­˜ç‚¹ï¼Œå¼‚å¸¸å°±å›æ»š","like_count":0},{"had_liked":false,"id":277252,"user_name":"Gabriel","can_delete":false,"product_type":"c1","uid":1437358,"ip_address":"","ucode":"714772A93E93DC","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/ae/855b7e6e.jpg","comment_is_top":false,"comment_ctime":1612333519,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612333519","product_id":100020801,"comment_content":"æŸ¥çœ‹æ•°æ®åº“ä¸­é”çš„æƒ…å†µçš„å‡ ä¸ªsqlè¯­å¥ï¼š<br>1ï¼šSHOW FULL PROCESSLIST<br>2ï¼šSHOW ENGINE INNODB STATUS<br>3ï¼šSELECT * FROM information_schema.INNODB_TRX&#47;G;<br>4ï¼šSELECT * FROM information_schema.INNODB_LOCKS\\G;<br>5ï¼šSELECT * FROM information_schema.INNODB_LOCK_WAITS \\Gï¼›","like_count":0},{"had_liked":false,"id":277127,"user_name":"éšé£","can_delete":false,"product_type":"c1","uid":1244248,"ip_address":"","ucode":"86A78303C9AB9D","user_header":"https://static001.geekbang.org/account/avatar/00/12/fc/58/90b7b363.jpg","comment_is_top":false,"comment_ctime":1612269353,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612269353","product_id":100020801,"comment_content":"è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥, è¿™å¥è¯æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Œè¯»é”ï¼Œèƒ½å¢åˆ ","like_count":0},{"had_liked":false,"id":276553,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1612000636,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1612000636","product_id":100020801,"comment_content":"1. ä¸ºä»€ä¹ˆäº‹åŠ¡ä¼šè‡ªåŠ¨æ·»åŠ  MDL å‘¢ï¼Ÿ<br>2. MDL å’Œé MDL çš„å…¸å‹ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":275867,"user_name":"Long","can_delete":false,"product_type":"c1","uid":1318970,"ip_address":"","ucode":"2417242560360A","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/3a/90db6a24.jpg","comment_is_top":false,"comment_ctime":1611709982,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611709982","product_id":100020801,"comment_content":"äºŒåˆ·ï¼Œç¬¬ä¸‰å¤©ï¼Œæ¸©æ•…çŸ¥æ–°ï¼š<br>1. caç´¢å¼•å¯ä»¥å»é™¤ï¼Œéå¸¸è€ƒå¯ŸB+æ ‘éä¸»é”®ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨æ•°æ®çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ï¼Œå­˜ç´¢å¼•å­—æ®µå’Œä¸»é”®å€¼ã€‚<br>2. Online DDLçš„æ“ä½œæ­¥éª¤ï¼ŒåŸå…ˆçš„ç†è§£æ˜¯ï¼šè·å–MDLï¼Œæ‰§è¡ŒDDLï¼Œæˆ–è€…MDLï¼Œé‡Šæ”¾MDLé”ã€‚<br>é‡æ–°å¤ä¹ åï¼Œå¦‚ä½•æ‰§è¡Œä¸è€ƒè™‘ç­‰å¾…çš„è¯ï¼Œæ­£ç¡®çš„æ–¹å¼æ˜¯ï¼šè·å–MDLå†™é”ï¼Œé™çº§ä¸ºMDLè¯»é”ï¼Œæ‰§è¡ŒDDLï¼Œå‡çº§ä¸ºMDLå†™é”ï¼Œé‡Šæ”¾MDLé”ã€‚ <br>3. mysqldumpçš„single transactionå‚æ•°ï¼Œåˆé‡æ–°å¤ä¹ äº†ä¸€ä¸‹ï¼Œç¡®ä¿æœ‰ä¸€è‡´æ€§è§†å›¾çš„ã€‚","like_count":0},{"had_liked":false,"id":268641,"user_name":"TT","can_delete":false,"product_type":"c1","uid":1466771,"ip_address":"","ucode":"2D8CE3E45DA7A4","user_header":"https://static001.geekbang.org/account/avatar/00/16/61/93/3191eafa.jpg","comment_is_top":false,"comment_ctime":1608281093,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608281093","product_id":100020801,"comment_content":"## è¦†ç›–ç´¢å¼•<br>ä¸€ä¸ªæŸ¥è¯¢æ“ä½œï¼Œå¦‚æœç´¢å¼• k å·²ç»åŒ…å«æˆ‘ä»¬è¦è·å–çš„æ‰€æœ‰å­—æ®µï¼Œå¯ä»¥å°‘ä¸€æ¬¡å›è¡¨æ“ä½œï¼Œæˆ‘ä»¬ç§°è¿™ç§æƒ…å†µä¸º**è¦†ç›–ç´¢å¼•**<br><br>## æœ€å·¦å‰ç¼€<br>MySQLæ•°æ®æ¨¡å‹æ˜¯B+æ ‘ï¼Œç´¢å¼•é¡¹åœ¨B+æ ‘é‡Œçš„å­˜å‚¨æ˜¯æŒ‰ç…§ç´¢å¼•å®šä¹‰é‡Œé¢å­—æ®µå‡ºç°çš„é¡ºåºæ¥æ’åºçš„ï¼Œåªè¦æ»¡è¶³ç´¢å¼•çš„**æœ€å·¦å‰ç¼€**(å¯ä»¥æ˜¯è”åˆç´¢å¼•çš„æœ€å·¦ N ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç´¢å¼•çš„æœ€å·¦ M ä¸ªå­—ç¬¦)ï¼Œå°±å¯ä»¥åˆ©ç”¨ç´¢å¼•æ¥åŠ é€Ÿæ£€ç´¢<br><br>## å»ºç«‹è”åˆç´¢å¼•çš„æ—¶å€™ï¼Œå¦‚ä½•å®‰æ’å­—æ®µé¡ºåº<br>* æ ¹æ®æœ€å·¦å‰ç¼€è§„åˆ™ï¼Œå¦‚æœé€šè¿‡è°ƒæ•´é¡ºåºï¼Œå¯ä»¥å°‘ç»´æŠ¤ä¸€ä¸ªç´¢å¼•ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡ºåºå¾€å¾€å°±æ˜¯éœ€è¦ä¼˜å…ˆè€ƒè™‘é‡‡ç”¨çš„<br>* ç©ºé—´æœ€å°åŸåˆ™ï¼šå¦‚æœæŸ¥è¯¢ä¸­æ—¢æœ‰åŒæ—¶ç­›é€‰ a, b çš„æƒ…å†µï¼Œåˆæœ‰åˆ†åˆ«ç­›é€‰ aï¼Œb çš„æƒ…å†µï¼Œä¸” a çš„å­—æ®µé•¿åº¦ &gt; b çš„å­—æ®µé•¿åº¦ï¼Œåº”è¯¥å»ºç«‹ (a, b) å’Œ b è¿™ä¸¤ä¸ªç´¢å¼•ï¼Œè€Œä¸æ˜¯ (b, a) å’Œ a è¿™ä¸¤ä¸ªç´¢å¼•<br><br>## ç´¢å¼•ä¸‹æ¨<br>å¯¹äºè”åˆç´¢å¼• (a, b, c)ï¼ŒæŸ¥è¯¢æ—¶ç­›é€‰ a=1ï¼Œ c!=1ï¼ŒæŒ‰æœ€å·¦å‰ç¼€åŸåˆ™ä»…èƒ½ä½¿ç”¨åˆ°ç´¢å¼• aï¼Œæ¯æ¬¡è·å–åˆ°ä¸€è¡Œa=1çš„æ•°æ®å°±éœ€è¦å›è¡¨ï¼Œå†åšc!=1çš„åˆ¤æ–­ã€‚MySQL5.6å¼•å…¥æ¥ç´¢å¼•ä¸‹æ¨ï¼Œåœ¨å›è¡¨å‰ä¼šå…ˆåš c!=1çš„åˆ¤æ–­ï¼Œä¸æ»¡è¶³ç›´æ¥è·³è¿‡ï¼Œä»è€Œå‡å°‘æ¥å›è¡¨æ¬¡æ•°ï¼ŒåŠ å¿«æ¥æ£€ç´¢<br><br>## é—®é¢˜è®¨è®º<br>DBA å°å•åœ¨å…¥èŒæ–°å…¬å¸çš„æ—¶å€™ï¼Œå°±å‘ç°è‡ªå·±æ¥æ‰‹ç»´æŠ¤çš„åº“é‡Œé¢ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªè¡¨ï¼Œè¡¨ç»“æ„å®šä¹‰ç±»ä¼¼è¿™æ ·çš„ï¼š<br>```<br>CREATE TABLE `geek` (<br>  `a` int(11) NOT NULL,<br>  `b` int(11) NOT NULL,<br>  `c` int(11) NOT NULL,<br>  `d` int(11) NOT NULL,<br>  PRIMARY KEY (`a`,`b`),<br>  KEY `c` (`c`),<br>  KEY `ca` (`c`,`a`),<br>  KEY `cb` (`c`,`b`)<br>) ENGINE=InnoDB;<br>```<br>å…¬å¸çš„åŒäº‹å‘Šè¯‰ä»–è¯´ï¼Œç”±äºå†å²åŸå› ï¼Œè¿™ä¸ªè¡¨éœ€è¦ aã€b åšè”åˆä¸»é”®ï¼Œè¿™ä¸ªå°å•ç†è§£äº†ã€‚<br><br>ä½†æ˜¯ï¼Œæ—¢ç„¶ä¸»é”®åŒ…å«äº† aã€b è¿™ä¸¤ä¸ªå­—æ®µï¼Œé‚£æ„å‘³ç€å•ç‹¬åœ¨å­—æ®µ c ä¸Šåˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œå°±å·²ç»åŒ…å«äº†ä¸‰ä¸ªå­—æ®µäº†å‘€ï¼Œä¸ºä»€ä¹ˆè¦åˆ›å»ºâ€œcaâ€â€œcbâ€è¿™ä¸¤ä¸ªç´¢å¼•ï¼Ÿ<br><br>åŒäº‹å‘Šè¯‰ä»–ï¼Œæ˜¯å› ä¸ºä»–ä»¬çš„ä¸šåŠ¡é‡Œé¢æœ‰è¿™æ ·çš„ä¸¤ç§è¯­å¥ï¼š<br>```<br>select * from geek where c=N order by a limit 1;select * from geek where c=N order by b limit 1;<br>```<br>é—®é¢˜æ˜¯ï¼šè¿™ä½åŒäº‹çš„è§£é‡Šå¯¹å—ï¼Œä¸ºäº†è¿™ä¸¤ä¸ªæŸ¥è¯¢æ¨¡å¼ï¼Œè¿™ä¸¤ä¸ªç´¢å¼•æ˜¯å¦éƒ½æ˜¯å¿…é¡»çš„ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br><br>**ç­”æ¡ˆ**<br><br>è¡¨è®°å½•<br>|a|b|c|d|<br>|-|-|-|-|<br>|1|2|3|d|<br>|1|3|2|d|<br>|1|4|3|d|<br>|2|1|3|d|<br>|2|2|2|d|<br>|2|3|4|d|<br>ä¸»é”® aï¼Œb çš„èšç°‡ç´¢å¼•ç»„ç»‡é¡ºåºç›¸å½“äº order by a,b ï¼Œä¹Ÿå°±æ˜¯å…ˆæŒ‰ a æ’åºï¼Œå†æŒ‰ b æ’åºï¼Œc æ— åº.<br><br>ç´¢å¼• ca çš„ç»„ç»‡æ˜¯å…ˆæŒ‰ c æ’åºï¼Œå†æŒ‰ a æ’åºï¼ŒåŒæ—¶è®°å½•ä¸»é”®:<br>|c|a|ä¸»é”®éƒ¨åˆ†åªæœ‰b|<br>|-|-|-|<br>|2|1|3|<br>|2|2|2|<br>|3|1|2|<br>|3|1|4|<br>|3|2|1|<br>|4|2|3|<br>å‘ç°è¿™ä¸ªè·Ÿç´¢å¼• c çš„æ•°æ®æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è¢«å»æ‰<br><br>ç´¢å¼• cb çš„ç»„ç»‡æ˜¯å…ˆæŒ‰ c æ’åºï¼Œåœ¨æŒ‰ b æ’åºï¼ŒåŒæ—¶è®°å½•ä¸»é”®ã€‚<br>|c|b|ä¸»é”®éƒ¨åˆ†åªæœ‰a|<br>|-|-|-|<br>|2|2|2|<br>|2|3|1|<br>|3|1|2|<br>|3|2|1|<br>|3|4|1|<br>|4|3|2|<br><br>## è¯„è®ºåŒºè®¨è®º<br><br>&gt; å…³äºInnoDBå¯¹ç´¢å¼•çš„ç»„ç»‡<br><br>**InnoDBä¼šæŠŠä¸»é”®å­—æ®µæ”¾åˆ°ç´¢å¼•å®šä¹‰å­—æ®µåé¢ï¼Œå½“ç„¶åŒæ—¶ä¹Ÿä¼šå»é‡ã€‚**<br><br>æ‰€ä»¥å½“ä¸»é”®æ˜¯(a,b)çš„æ—¶å€™ï¼š<br>å®šä¹‰ä¸ºcçš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,a,b)<br>å®šä¹‰ä¸º(c,a)çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯(c,a,b)<br>å®šä¹‰ä¸º(c,bï¼‰çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,b,a)","like_count":0},{"had_liked":false,"id":268346,"user_name":"Geek_40c668","can_delete":false,"product_type":"c1","uid":1685451,"ip_address":"","ucode":"4F7B6A3D4F4DD1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WnbsIzp30vkf8OVicicMHv0Cepxt17aSxdUVIaiaEMullXPE79ywaETSaRl6WeyePiaqqFYoxmK0IXbaUKLpmibD4ng/132","comment_is_top":false,"comment_ctime":1608163665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608163665","product_id":100020801,"comment_content":"æ€»ç»“ï¼š<br>1.mysqlå…±3ç§è¡¨ï¼š<br>    a. å…¨å±€é”ï¼šå…¨å±€åªè¯»ï¼Œä¸šåŠ¡åœæ­¢ã€‚<br>         æ–¹å¼ä¸€ï¼šflush tables with read lock(ftwrl)ï¼Œå¯ä»¥ç”¨äºå¤‡ä»½ï¼Œä½†æ˜¯å¤ªé‡ä¸å»ºè®®ä½¿ç”¨ã€‚<br>         å¦‚æœæ”¯æŒrréš”ç¦»çº§åˆ«ï¼Œå¯ä»¥ä½¿ç”¨mysqldump ä½¿ç”¨å‚æ•°â€“single-transactionï¼Œè¿›è¡Œå¤‡ä»½ã€‚<br>        æ–¹å¼äºŒï¼šset global readonly=trueï¼Œä¸æ¨èï¼Œä¸€èˆ¬ç”¨äºåŒºåˆ«ä¸»å¤‡ã€‚ä¸”rootæ— æ•ˆã€‚<br>    b. è¡¨çº§é”ï¼š<br>        è¡¨é”ï¼šlock tables t read&#47;write<br>        mdlé”ï¼šå…ƒæ•°æ®é”ã€‚è‡ªåŠ¨åŠ ï¼Œå¢åˆ æŸ¥æ”¹åŠ mdlè¯»é”ï¼ŒddlåŠ mdlå†™é”ã€‚ç±»ä¼¼äºè¯»å†™é”ã€‚<br>    c. è¡Œé”ï¼šåªé”ä¸€è¡Œæ•°æ®<br>    c. è¡Œé”<br>2.åŠ å­—æ®µå¯èƒ½çš„é—®é¢˜<br>    ç»™ä¸€ä¸ªè¡¨æ–°å¢ã€ä¿®æ”¹å­—æ®µã€åŠ ç´¢å¼•éƒ½ä¼šæ‰«æå…¨è¡¨ã€‚<br>    ç”±äºmdlè¯»å†™é”äº’æ–¥ï¼Œåœ¨é‡é‡çº§æŸ¥è¯¢çš„åŒæ—¶ï¼Œè·å–mdlé”ï¼Œä¼šé˜»å¡æ•´ä¸ªè¡¨çš„æ‰€æœ‰äº‹åŠ¡ã€‚æ•´ä¸ªè¡¨éƒ½ä¸å¯è¯»å†™ã€‚<br>3.å¦‚ä½•å®‰å…¨åŠ å­—æ®µ<br>   å¯¹äºå°è¡¨ï¼šå¯ä»¥è®¾ç½®è¶…æ—¶æœºåˆ¶ï¼Œæ‹¿ä¸åˆ°mdlå†™é”å°±å¤±è´¥æˆ–è€…è¶…æ—¶å¤±è´¥ã€‚ä¹‹åé‡è¯•ã€‚<br>   å¯¹äºå¤§è¡¨ï¼šåœæœºæ“ä½œã€‚<br>4.lock tablesä¼˜åŒ–<br>    a. éœ€è¦æ’æŸ¥è¯¥è¡¨å¦‚æœä¸æ”¯æŒäº‹åŠ¡ï¼Œåˆ™å®‰æ’å‡å¼•æ“<br>    b. å¦‚æœæ”¯æŒäº‹åŠ¡ï¼Œåˆ™å°†lock tables&#47;unlock t","like_count":0},{"had_liked":false,"id":268338,"user_name":"Geek_40c668","can_delete":false,"product_type":"c1","uid":1685451,"ip_address":"","ucode":"4F7B6A3D4F4DD1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WnbsIzp30vkf8OVicicMHv0Cepxt17aSxdUVIaiaEMullXPE79ywaETSaRl6WeyePiaqqFYoxmK0IXbaUKLpmibD4ng/132","comment_is_top":false,"comment_ctime":1608161637,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608161637","product_id":100020801,"comment_content":"æ€»ç»“ï¼š<br>1.mysqlé”åˆ†ä¸ºä¸‰ç§<br>    a. å…¨å±€é”ã€‚å…¨å±€åªè¯»ã€‚<br>        å¯ä»¥ç”¨flush tables with read lock(ftwrl)<br>    b. è¡¨çº§é”ã€‚<br>        è¡¨é”ï¼š<br>         mdlï¼šå…ƒæ•°æ®é”ã€‚è‡ªåŠ¨åŠ é”ï¼Œæ¶‰åŠåˆ°ä¿®æ”¹è¡¨ç»“æ„æ—¶åŠ mdlå†™é”ï¼Œå…¶ä»–æ“ä½œåŠ mdlè¯»é”ã€‚","like_count":0},{"had_liked":false,"id":267567,"user_name":"David.cui","can_delete":false,"product_type":"c1","uid":1302228,"ip_address":"","ucode":"AB46F310403612","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg","comment_is_top":false,"comment_ctime":1607831152,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607831152","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆsession Cçš„å†™é”é‡åˆ°ä¹‹å‰çš„session A|Bçš„è¯»é”çš„æ—¶å€™ä¸ä¼šé€€å‡ºå‘¢ï¼ŸæŒ‰è¯´ä¸åº”è¯¥blockï¼Œè€Œåº”è¯¥é©¬ä¸Šé€€å‡ºã€‚ä»æ•°æ®åº“çš„è§’åº¦æ¥çœ‹ï¼Œå› ä¸ºå…±äº«é”çš„å­˜åœ¨ï¼Œä¼šå¯¼è‡´ç‹¬å é”æ ¹æœ¬åŠ ä¸ä¸Šä¸Šå»ï¼Œæ‰€ä»¥æˆ‘ç†è§£session Cåº”è¯¥ç›´æ¥æŠ¥é”™é€€å‡ºï¼Œè€Œä¸åº”è¯¥æ˜¯blockï¼Œæ›´ä¸åº”è¯¥é˜»å¡åé¢çš„ä¼šè¯","like_count":0},{"had_liked":false,"id":266612,"user_name":"æ—§æ—¶å…‰ã€‚","can_delete":false,"product_type":"c1","uid":1780698,"ip_address":"","ucode":"E9612FD41567BD","user_header":"https://static001.geekbang.org/account/avatar/00/1b/2b/da/fa630993.jpg","comment_is_top":false,"comment_ctime":1607415382,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607415382","product_id":100020801,"comment_content":"ä½œè€…å›å¤: InnoDBä¼šæŠŠä¸»é”®å­—æ®µæ”¾åˆ°ç´¢å¼•å®šä¹‰å­—æ®µåé¢ï¼Œ<br>å½“ç„¶åŒæ—¶ä¹Ÿä¼šå»é‡ã€‚<br><br>æ‰€ä»¥ï¼Œå½“ä¸»é”®æ˜¯(a,b)çš„æ—¶å€™ï¼Œ<br>å®šä¹‰ä¸ºcçš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,a,b);<br>å®šä¹‰ä¸º(c,a)çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯(c,a,b)<br>ä½ çœ‹ç€åŠ æ˜¯ç›¸åŒçš„<br><br>ps å®šä¹‰ä¸º(c,bï¼‰çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,b,a)<br>","like_count":0},{"had_liked":false,"id":264343,"user_name":"åŸæ¸¸è¯—äºº","can_delete":false,"product_type":"c1","uid":2036366,"ip_address":"","ucode":"27CA90D3D9C5B6","user_header":"","comment_is_top":false,"comment_ctime":1606443174,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606443174","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘æƒ³èµ·æ¥ä¸€ä¸ªé—®é¢˜ï¼Œç»™ä¸€ä¸ªè¡¨é‡å»ºä¸»é”®ç´¢å¼•çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯åœ¨æ›´æ–°è¡¨ç»“æ„ï¼Œä¼šé»˜è®¤åŠ mdlé”ï¼Ÿ","like_count":0},{"had_liked":false,"id":262265,"user_name":"é™†ç¾èŠ³","can_delete":false,"product_type":"c1","uid":2084000,"ip_address":"","ucode":"8C3F5FB3A8B3DA","user_header":"https://static001.geekbang.org/account/avatar/00/1f/cc/a0/bd31d495.jpg","comment_is_top":false,"comment_ctime":1605680962,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605680962","product_id":100020801,"comment_content":"çœ‹å®Œè€å¸ˆçš„è¯¾ç¨‹äº†ï¼Œæ”¶è·å¾ˆå¤šï¼Œæ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ï¼Œç°åœ¨æƒ³è¯·æ•™ä¸‹ï¼ŒMySQLæ€ä¹ˆåšçº¿ä¸Šçš„DDLå’ŒDMLå‡çº§ï¼Ÿä¹Ÿå°±æ˜¯ï¼šç³»ç»Ÿä¿è¯ä¸åœæœºçš„æä¾›ç¨³å®šæœåŠ¡çš„æƒ…å†µä¸‹ï¼Œæ€ä¹ˆç»™MySQLçš„è¡¨ä¿®æ”¹ç»“æ„ï¼Ÿå¤§è¡¨å°è¡¨éƒ½æœ‰ã€‚çœ‹è¿‡å¦å¤–ä¸€ä¸ªè€å¸ˆçš„è¯¾ç¨‹ï¼Œæåˆ° æ—§åº“å’Œæ–°åº“ä¹‹é—´åš æ¯”å¯¹è¡¥å¿ç¨‹åºï¼Œä½†æ˜¯ä¹Ÿä¸çŸ¥é“è¿™ä¸ªæ¯”å¯¹è¡¥å¿å…·ä½“æ€ä¹ˆåšï¼Œç”¨MySQLå­˜å‚¨è¿‡ç¨‹ï¼Œè¿˜æ˜¯ç±»ä¼¼kettleä¹‹ç±»çš„ï¼Ÿè€å¸ˆæœ‰æ²¡æœ‰è¿™æ–¹é¢çš„ç»éªŒï¼Œè°¢è°¢ã€‚","like_count":0},{"had_liked":false,"id":261441,"user_name":"å…¨æœ‰","can_delete":false,"product_type":"c1","uid":1488139,"ip_address":"","ucode":"D16B42B1F71E4E","user_header":"https://static001.geekbang.org/account/avatar/00/16/b5/0b/df89c357.jpg","comment_is_top":false,"comment_ctime":1605338167,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605338167","product_id":100020801,"comment_content":"å¤‡åº“åœ¨è¿›è¡Œé€»è¾‘å¤‡ä»½æ—¶ï¼Œä¸»åº“æœ‰è¡¨ç»“æ„çš„æ›´æ”¹ï¼Œå¤‡åº“å¯ä»¥è¿›è¡Œæ­£å¸¸çš„æ•°æ®åŒæ­¥ï¼Œä½†æ˜¯å¤‡ä»½å‡ºæ¥çš„é€»è¾‘è§†å›¾ï¼Œ æ˜¯æ— æ³•è·å–æœ€æ–°çš„æ•°æ®æ›´æ”¹çš„ï¼Œ","like_count":0},{"had_liked":false,"id":261305,"user_name":"æ…ç‹¬","can_delete":false,"product_type":"c1","uid":1216220,"ip_address":"","ucode":"CACDB296E08978","user_header":"https://static001.geekbang.org/account/avatar/00/12/8e/dc/2e915d2f.jpg","comment_is_top":false,"comment_ctime":1605263754,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605263754","product_id":100020801,"comment_content":"MDL é”è¯»å†™äº’æ–¥ï¼Œä¸ºä»€ä¹ˆåœ¨ sessionA,Bæ²¡æœ‰é‡Šæ”¾è¯»é”æ—¶å€™ï¼ŒsessionCä¼šç”³è¯·åˆ°å†™é”å‘¢ï¼Ÿ<br>å¦‚æœæ²¡æœ‰ç”³è¯·åˆ°å†™é”ï¼Œé‚£sessionDè¯»é”åº”è¯¥å¯ä»¥è·å–åˆ°å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":258334,"user_name":"x-rayîŒº","can_delete":false,"product_type":"c1","uid":1140175,"ip_address":"","ucode":"8363F0C4D0AC0B","user_header":"https://static001.geekbang.org/account/avatar/00/11/65/cf/326c0eea.jpg","comment_is_top":false,"comment_ctime":1604389881,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604389881","product_id":100020801,"comment_content":"å…¨å±€é”è¿™é‡Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œå¦‚æœä¸Šå…¨å±€é”çš„å‰ä¸€åˆ»ï¼Œç”¨æˆ·çš„è´¦æˆ·è¡¨æ›´æ–°æ‰£äº†100ï¼Œæ­¤æ—¶ï¼Œå…¨å±€é”ä¸Šé”ï¼Œä½†ç”¨æˆ·è¯¾ç¨‹è¡¨å¢åŠ çš„SQLè¿˜æ²¡æ‰§è¡Œï¼Œæ˜¯ä¸æ˜¯ä¼šå‡ºé—®é¢˜ï¼Ÿæˆ–è€…è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤§çš„äº‹åŠ¡ï¼Œå…¨å±€é”ä¼šç­‰äº‹åŠ¡ç»“æŸï¼Ÿ","like_count":0},{"had_liked":false,"id":255682,"user_name":"hu big sea","can_delete":false,"product_type":"c1","uid":1486549,"ip_address":"","ucode":"489F9B4BF819FF","user_header":"https://static001.geekbang.org/account/avatar/00/16/ae/d5/abe7078a.jpg","comment_is_top":false,"comment_ctime":1603413699,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603413699","product_id":100020801,"comment_content":"æ„Ÿè§‰å¯¹ä¸Šä¸€è®²çš„æ€è€ƒé¢˜è¿˜æ˜¯ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œç´¢å¼•cå¦‚æœçœŸå®å­˜å‚¨å†…å®¹ä¸ºï¼ˆc,a,b),ä¹Ÿä¼šåƒï¼ˆc,a)ä¸€æ ·å†å¯¹aè¿›è¡Œæ’åºå˜›ï¼Ÿæ„Ÿè§‰è€æ¨çš„è§£é‡Šæ›´æ¸…æ¥šä¸€äº›ã€‚","like_count":0},{"had_liked":false,"id":251782,"user_name":"è‘«èŠ¦å¨ƒ-Dear","can_delete":false,"product_type":"c1","uid":1743582,"ip_address":"","ucode":"606C2E1D80B612","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9a/de/abd008f3.jpg","comment_is_top":false,"comment_ctime":1601868173,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601868173","product_id":100020801,"comment_content":"æœ€è¿‘åœ¨å¤„ç†çº¿ä¸Šçš„æ…¢æŸ¥è¯¢ï¼Œå‘ç°æ‰€æœ‰çš„selectçš„æ…¢æŸ¥è¯¢é€šè¿‡ptåˆ†æåéƒ½ä¼šæœ‰å¾ˆçŸ­æ—¶é—´éƒ½locktimeï¼Œæ˜¯å› ä¸ºmdlè¯»é”çš„åŸå› å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":249129,"user_name":"å¥½å¥½å­¦ä¹ ","can_delete":false,"product_type":"c1","uid":1762191,"ip_address":"","ucode":"9D44D9530D9A1D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e3/8f/77b5a753.jpg","comment_is_top":false,"comment_ctime":1600442391,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600442391","product_id":100020801,"comment_content":"å¤åˆ¶å¤´éƒ¨è¯„è®ºï¼Œç”¨äºå¤ä¹ ã€‚<br><br><br><br>æ€»ç»“ï¼š<br>æ ¹æ®åŠ é”èŒƒå›´ï¼šMySQLé‡Œé¢çš„é”å¯ä»¥åˆ†ä¸ºï¼šå…¨å±€é”ã€è¡¨çº§é”ã€è¡Œçº§é”<br><br>ä¸€ã€å…¨å±€é”ï¼š<br>å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ã€‚<br>MySQLæä¾›åŠ å…¨å±€è¯»é”çš„æ–¹æ³•ï¼šFlush tables with read lock(FTWRL)<br>è¿™ä¸ªå‘½ä»¤å¯ä»¥ä½¿æ•´ä¸ªåº“å¤„äºåªè¯»çŠ¶æ€ã€‚ä½¿ç”¨è¯¥å‘½ä»¤ä¹‹åï¼Œæ•°æ®æ›´æ–°è¯­å¥ã€æ•°æ®å®šä¹‰è¯­å¥å’Œæ›´æ–°ç±»äº‹åŠ¡çš„æäº¤è¯­å¥ç­‰æ“ä½œéƒ½ä¼šè¢«é˜»å¡ã€‚<br>ä½¿ç”¨åœºæ™¯ï¼šå…¨åº“é€»è¾‘å¤‡ä»½ã€‚<br>é£é™©ï¼š<br>1.å¦‚æœåœ¨ä¸»åº“å¤‡ä»½ï¼Œåœ¨å¤‡ä»½æœŸé—´ä¸èƒ½æ›´æ–°ï¼Œä¸šåŠ¡åœæ‘†<br>2.å¦‚æœåœ¨ä»åº“å¤‡ä»½ï¼Œå¤‡ä»½æœŸé—´ä¸èƒ½æ‰§è¡Œä¸»åº“åŒæ­¥çš„binlogï¼Œå¯¼è‡´ä¸»ä»å»¶è¿Ÿ<br>å®˜æ–¹è‡ªå¸¦çš„é€»è¾‘å¤‡ä»½å·¥å…·mysqldumpï¼Œå½“mysqldumpä½¿ç”¨å‚æ•°--single-transactionçš„æ—¶å€™ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œç¡®ä¿æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ã€‚è€Œç”±äºMVCCçš„æ”¯æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°çš„ã€‚<br><br>ä¸€è‡´æ€§è¯»æ˜¯å¥½ï¼Œä½†æ˜¯å‰ææ˜¯å¼•æ“è¦æ”¯æŒè¿™ä¸ªéš”ç¦»çº§åˆ«ã€‚<br>å¦‚æœè¦å…¨åº“åªè¯»ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨set global readonly=trueçš„æ–¹å¼ï¼Ÿ<br>1.åœ¨æœ‰äº›ç³»ç»Ÿä¸­ï¼Œreadonlyçš„å€¼ä¼šè¢«ç”¨æ¥åšå…¶ä»–é€»è¾‘ï¼Œæ¯”å¦‚åˆ¤æ–­ä¸»å¤‡åº“ã€‚æ‰€ä»¥ä¿®æ”¹globalå˜é‡çš„æ–¹å¼å½±å“å¤ªå¤§ã€‚<br>2.åœ¨å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸Šæœ‰å·®å¼‚ã€‚å¦‚æœæ‰§è¡ŒFTWRLå‘½ä»¤ä¹‹åç”±äºå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸æ–­å¼€ï¼Œé‚£ä¹ˆMySQLä¼šè‡ªåŠ¨é‡Šæ”¾è¿™ä¸ªå…¨å±€é”ï¼Œæ•´ä¸ªåº“å›åˆ°å¯ä»¥æ­£å¸¸æ›´æ–°çš„çŠ¶æ€ã€‚è€Œå°†æ•´ä¸ªåº“è®¾ç½®ä¸ºreadonlyä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æ•°æ®åº“å°±ä¼šä¸€ç›´ä¿æŒreadonlyçŠ¶æ€ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ•´ä¸ªåº“é•¿æ—¶é—´å¤„äºä¸å¯å†™çŠ¶æ€ï¼Œé£é™©è¾ƒé«˜ã€‚<br>äºŒã€è¡¨çº§é”<br>MySQLé‡Œé¢è¡¨çº§é”æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è¡¨é”ï¼Œä¸€ç§æ˜¯å…ƒæ•°æ®æ‰€(meta data lock,MDL)<br>è¡¨é”çš„è¯­æ³•æ˜¯:lock tables ... read&#47;write<br>å¯ä»¥ç”¨unlock tablesä¸»åŠ¨é‡Šæ”¾é”ï¼Œä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯æ–­å¼€çš„æ—¶å€™è‡ªåŠ¨é‡Šæ”¾ã€‚lock tablesè¯­æ³•é™¤äº†ä¼šé™åˆ¶åˆ«çš„çº¿ç¨‹çš„è¯»å†™å¤–ï¼Œä¹Ÿé™å®šäº†æœ¬çº¿ç¨‹æ¥ä¸‹æ¥çš„æ“ä½œå¯¹è±¡ã€‚<br>å¯¹äºInnoDBè¿™ç§æ”¯æŒè¡Œé”çš„å¼•æ“ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨lock tableså‘½ä»¤æ¥æ§åˆ¶å¹¶å‘ï¼Œæ¯•ç«Ÿé”ä½æ•´ä¸ªè¡¨çš„å½±å“é¢è¿˜æ˜¯å¤ªå¤§ã€‚<br>MDLï¼šä¸éœ€è¦æ˜¾å¼ä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€ä¸ªè¡¨çš„æ—¶å€™ä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚<br>MDLçš„ä½œç”¨ï¼šä¿è¯è¯»å†™çš„æ­£ç¡®æ€§ã€‚<br>åœ¨å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLè¯»é”ï¼›å½“è¦å¯¹è¡¨åšç»“æ„å˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLå†™é”ã€‚<br>è¯»é”ä¹‹é—´ä¸äº’æ–¥ã€‚è¯»å†™é”ä¹‹é—´ï¼Œå†™é”ä¹‹é—´æ˜¯äº’æ–¥çš„ï¼Œç”¨æ¥ä¿è¯å˜æ›´è¡¨ç»“æ„æ“ä½œçš„å®‰å…¨æ€§ã€‚<br>MDL ä¼šç›´åˆ°äº‹åŠ¡æäº¤æ‰ä¼šé‡Šæ”¾ï¼Œåœ¨åšè¡¨ç»“æ„å˜æ›´çš„æ—¶å€™ï¼Œä¸€å®šè¦å°å¿ƒä¸è¦å¯¼è‡´é”ä½çº¿ä¸ŠæŸ¥è¯¢å’Œæ›´æ–°ã€‚","like_count":0},{"had_liked":false,"id":246130,"user_name":"è´ºæ­¦åº·","can_delete":false,"product_type":"c1","uid":2129784,"ip_address":"","ucode":"E424A8540FCD13","user_header":"https://static001.geekbang.org/account/avatar/00/20/7f/78/c2f3c511.jpg","comment_is_top":false,"comment_ctime":1599186279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599186279","product_id":100020801,"comment_content":"è€å¸ˆ æˆ‘æœ‰ä¸ªé—®é¢˜ MDLæ˜¯é’ˆå¯¹æ‰€æœ‰ç±»å‹çš„å¼•æ“å— ä¸ç®¡ä½ æ˜¯ä»€ä¹ˆæ•°æ®åº“å¼•æ“ éƒ½ä¼šä½¿ç”¨åˆ°MDLï¼Ÿ","like_count":0},{"had_liked":false,"id":246047,"user_name":"å­¦ä¹ å­¦ä¸ªå±","can_delete":false,"product_type":"c1","uid":1049017,"ip_address":"","ucode":"DF2D61E6FB2FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/b9/73435279.jpg","comment_is_top":false,"comment_ctime":1599143518,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599143518","product_id":100020801,"comment_content":"å¤‡ä»½<br> æ”¯æŒäº‹åŠ¡ å»ºè®®ä½¿ç”¨ mysqlè‡ªå¸¦å·¥å…·mysqldump å¼€å¯ä¸€ä¸ªäº‹åŠ¡è¿›è¡Œå¤‡ä»½ , ç¡®ä¿æ‹¿åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´æ€§çš„.è‹¥å‡ºç°å¼‚å¸¸ Mysqlä¸ä¼šé‡Šæ”¾è¿™ä¸ªå…¨å±€é”,ä¼šå¯¼è‡´æ•´ä¸ªåº“é•¿æ—¶é—´å¤„äºä¸å¯å†™çŠ¶æ€ï¼Œé£é™©è¾ƒé«˜ã€‚<br>ä¸æ”¯æŒäº‹åŠ¡ ä½¿ç”¨ FTWRL è¿›è¡Œå…¨å±€é”  , è‹¥å‡ºç°å¼‚å¸¸ Mysqlè‡ªåŠ¨é‡Šæ”¾è¿™ä¸ªå…¨å±€é”","like_count":0},{"had_liked":false,"id":245747,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1599039821,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599039821","product_id":100020801,"comment_content":"å¤‡åº“åœ¨å¤‡ä»½è¯¥å°è¡¨æ—¶ä¼šè¢«é˜»å¡ï¼Œå› ä¸ºè¯¥å°è¡¨åŠ äº†MDLå†™é”","like_count":0},{"had_liked":false,"id":244712,"user_name":"é“åŒ ","can_delete":false,"product_type":"c1","uid":1088309,"ip_address":"","ucode":"D403835F5DB8F7","user_header":"https://static001.geekbang.org/account/avatar/00/10/9b/35/79e42357.jpg","comment_is_top":false,"comment_ctime":1598627601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598627601","product_id":100020801,"comment_content":"æƒ³ç›´åˆ°MySQL5.7å¯¹mdlé”åšäº†ä»€ä¹ˆä¼˜åŒ–","like_count":0},{"had_liked":false,"id":244513,"user_name":"Aprelude","can_delete":false,"product_type":"c1","uid":1658796,"ip_address":"","ucode":"840D3F7A35AEEF","user_header":"https://static001.geekbang.org/account/avatar/00/19/4f/ac/80439ba7.jpg","comment_is_top":false,"comment_ctime":1598544666,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598544666","product_id":100020801,"comment_content":"æœ‰ä¸å¼€å¯äº‹åŠ¡ mdlä¼šæœ‰é—®é¢˜å—","like_count":0},{"had_liked":false,"id":244391,"user_name":"é¢œæµ·èˆª","can_delete":false,"product_type":"c1","uid":1308159,"ip_address":"","ucode":"5644F6328BF901","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/ff/523fb378.jpg","comment_is_top":false,"comment_ctime":1598500847,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598500847","product_id":100020801,"comment_content":"è€å¸ˆä¸¾çš„é‚£ä¸ªMDLé”çš„ä¾‹å­ æˆ‘ä»¬åœ¨ç”Ÿäº§ä¸­ä¹Ÿé‡åˆ°è¿‡ã€‚æˆ‘ä»¬ç”¨gh-ostä¸ºä¸€å¼ å¤§è¡¨å˜æ›´ï¼Œä¸»åº“å®Œæˆä»¥åï¼Œåœ¨ä»åº“å¤åˆ¶ä¸»åº“renameä¸­é—´è¡¨çš„æ—¶å€™ï¼Œæœ‰ä¸ªé•¿æ—¶é—´çš„æŸ¥è¯¢å ç”¨äº†è¯¥è¡¨çš„MDLé”ã€‚å¯¼è‡´renameä¸€ç›´ç­‰å¾…ï¼Œé€ æˆäº†ä¸»ä»å»¶è¿Ÿ","like_count":0},{"had_liked":false,"id":243427,"user_name":"Geek_26d259","can_delete":false,"product_type":"c1","uid":2066952,"ip_address":"","ucode":"A754206C768474","user_header":"","comment_is_top":false,"comment_ctime":1598103670,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598103670","product_id":100020801,"comment_content":"è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥ã€‚  ä»€ä¹ˆæ„æ€å‘¢  å¤§ä½¬ä»¬","like_count":0},{"had_liked":false,"id":243150,"user_name":"Geek_743a47","can_delete":false,"product_type":"c1","uid":1480471,"ip_address":"","ucode":"8D10E23A078330","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI5na6qtIrtPaI09iahKgA26u2hnFWy77ia0wIkToMYZhdEo3M5XZWO3NchiblmJUeuQVpabMeZerk9Q/132","comment_is_top":false,"comment_ctime":1597976633,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597976633","product_id":100020801,"comment_content":"1.å…¨å±€é”ï¼Œå»ºè®®ä½¿ç”¨FTWRL,æ”¯æŒäº‹ç‰©çš„innodbå¯ä»¥ç”¨mysqldump -single-transaction,ä½†æ˜¯å¦‚æœåº“ä¸­å­˜åœ¨ä¸æ”¯æŒäº‹ç‰©çš„è¡¨ï¼Œå°±ä¸é€‚ç”¨äº†ã€‚set global readonly=true åˆ™å­˜åœ¨å¼‚å¸¸æ—¶ï¼Œå¯¼è‡´æ•´ä¸ªåº“ä¸å¯å†™ï¼ŒFTWRLå¼‚å¸¸ä¼šæ¢å¤è¯»å†™<br>2.è¡¨çº§é”ï¼ša.è¡¨é”ï¼Œæ³¨æ„ç‚¹ï¼šå¦‚æœè®¾ç½®è¯»é”ï¼Œåˆ™å½“å‰çº¿ç¨‹éƒ½åªèƒ½è¿›è¡Œè¯»<br>                b.MDLé”ï¼Œæ˜¯é™åˆ¶DDLå’ŒDMLä¹‹é—´çš„é”ï¼Œè¯­å¥å¼€å§‹ï¼Œå°±ä¼šä¸ŠDMLé”ã€‚<br>                   é¿å…æ­»é”çš„æ–¹æ³•ï¼šé¿å…é•¿äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥åœ¨alterè¯­å¥é‡Œé¢åŠ waitï¼Œé™åˆ¶æ‰§è¡Œæ—¶é—´ï¼Œé¿å…é•¿æ—¶é—´æ­»é”","like_count":0},{"had_liked":false,"id":242271,"user_name":"å­¦ä¸ªçƒ","can_delete":false,"product_type":"c1","uid":1019725,"ip_address":"","ucode":"7343F3C0CA981D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/4d/65fb45e6.jpg","comment_is_top":false,"comment_ctime":1597653835,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597653835","product_id":100020801,"comment_content":"&quot;å¯¹ä¸€ä¸ªè¡¨åŠ å­—æ®µï¼Œç´¢å¼•ï¼Œæˆ–è€…ä¿®æ”¹å­—æ®µï¼Œéœ€è¦æ‰«æå…¨è¡¨æ•°æ®&quot; æœ‰ä¸€ç‚¹ç‚¹ä¸ç¡®å®šã€‚<br><br>ç›®å‰æˆ‘çš„ç†è§£æ˜¯ï¼šå› ä¸º MySQL ç”¨ B+ æ ‘ç»„ç»‡è¡¨ï¼Œæ‰€ä»¥éœ€è¦æ‰«ææ‰€æœ‰çš„å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯å…¨è¡¨çš„æ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":240674,"user_name":"Alvin","can_delete":false,"product_type":"c1","uid":1284900,"ip_address":"","ucode":"8CF85DA34B3CEC","user_header":"https://static001.geekbang.org/account/avatar/00/13/9b/24/a131714e.jpg","comment_is_top":false,"comment_ctime":1597031167,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597031167","product_id":100020801,"comment_content":"MDLè¯»é”æ˜¯å…±äº«çš„ã€‚session Cä¹‹åçš„éƒ½æ˜¯è¯»è¯·æ±‚ï¼Œä¸ºå•¥ä¸å¯ä»¥å’ŒsessionCä¹‹å‰çš„è¯»è¯·æ±‚å…±äº«é”ã€‚ä¸å¤ªæ˜ç™½mysqlä¸ºå•¥è¦è®¾è®¡MDlç›´æ¥é”é˜Ÿåˆ—ï¼Œè€å¸ˆå¯ä»¥è§£ç­”ä¸‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":239010,"user_name":"moonfox","can_delete":false,"product_type":"c1","uid":1526355,"ip_address":"","ucode":"902BFF40EFA9FA","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","comment_is_top":false,"comment_ctime":1596414662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596414662","product_id":100020801,"comment_content":"æˆ‘æ€ä¹ˆè§‰å¾—åº”è¯¥æ˜¯å»æ‰Cç´¢å¼•ï¼Œä¿ç•™CAç´¢å¼•ï¼ŒCç´¢å¼•ä¸èƒ½ä¿è¯æŒ‰Aæ’åºå‘€","like_count":0},{"had_liked":false,"id":236833,"user_name":"äº‘å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1446285,"ip_address":"","ucode":"8FE20CC9119495","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/8d/f14adc4a.jpg","comment_is_top":false,"comment_ctime":1595560137,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595560137","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹æœ€åè¿™ä¸ªä¾‹å­ï¼šsession Cä¸æ˜¯è¿˜æ²¡è·å–åˆ°å†™é”å—ï¼Œä¸ºä»€ä¹ˆsession Dè·å–è¯»é”æ—¶è¿˜ä¼šè¢«é”ä½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":236230,"user_name":"Geek_54fac1","can_delete":false,"product_type":"c1","uid":1995317,"ip_address":"","ucode":"89518CBBC17376","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJiclX8icrTBescLydOXYKesOuQvpPPsOM7f2ZHCsmr7ic0h74picRWx1S2qcYDXmP6TrKdbY8y1mCarg/132","comment_is_top":false,"comment_ctime":1595374365,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595374365","product_id":100020801,"comment_content":"ä½™é¢è¡¨çš„é‡‘é¢ä¸ºä»€æ²¡æ‰£å‘¢ï¼Œæ²¡æ˜ç™½","like_count":0},{"had_liked":false,"id":236034,"user_name":"æ¯’è‰","can_delete":false,"product_type":"c1","uid":1026090,"ip_address":"","ucode":"DBD67DD3517190","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a8/2a/316b8f17.jpg","comment_is_top":false,"comment_ctime":1595295336,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595295336","product_id":100020801,"comment_content":"å…³äºMDLé”é‚£é‡Œ, session Aå®Œæˆä¸å°±è‡ªåŠ¨é‡Šæ”¾é”äº†å—","like_count":0},{"had_liked":false,"id":235926,"user_name":"Lion","can_delete":false,"product_type":"c1","uid":2070879,"ip_address":"","ucode":"BD8DDC17EAE6FD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/99/5f/9232a19f.jpg","comment_is_top":false,"comment_ctime":1595248216,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595248216","product_id":100020801,"comment_content":"æˆ‘è¿˜æ˜¯ä¸ç†è§£ï¼Œåœ¨MDLè¯»é”çŠ¶æ€ä¸‹ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹åœ¨è¯»ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨ä¿®æ”¹è¡¨ä¸­æ•°æ®ï¼Œé‚£ä¹ˆä¹Ÿä¼šå‡ºç°æˆ‘è¯»åˆ°çš„æ•°æ®æ˜¯é”™è¯¯çš„å•Šã€‚ï¼Œå¹¶å°†MDLçš„è¯»é”åªæ˜¯é™åˆ¶äº†ä¿®æ”¹è¡¨ç»“æ„ï¼Œè€Œæ²¡æœ‰é™åˆ¶ä¿®æ”¹è¡¨æ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":235095,"user_name":"Geek_4660f3","can_delete":false,"product_type":"c1","uid":1757482,"ip_address":"","ucode":"8B59B0C29EF88A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIMFaaIb1ZyU6zuYrT2WlD4RrsV2orxLonpIFwsx3ic01OLJ0N4dnSXQ3mFQxnbemiabKDw9810rX4Q/132","comment_is_top":false,"comment_ctime":1594890332,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594890332","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸‹è€å¸ˆï¼Œsession C ä¼šè¢« blockedï¼Œæ˜¯å› ä¸º session A çš„ MDL è¯»é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œè€Œ session C éœ€è¦ MDL å†™é”ï¼Œå½“session Cé˜»å¡ä¹‹åï¼Œåé¢æ‰€æœ‰çš„è·å–è¯»é”çš„è¯·æ±‚éƒ½ä¼šè¢«é˜»å¡æ˜¯ä¸ºå•¥ï¼Œè¯»é”å’Œè¯»é”æ˜¯ä¸äº’æ–¥çš„ã€‚å½“æœ‰å†™é”è¢«é˜»å¡ä¹‹åï¼Œå½±å“äº†åé¢çš„è¯»é”ï¼Œä¸ºå•¥ä¼šè¿™æ ·ã€‚æ„Ÿè§‰åº”è¯¥æ˜¯å†™é”é˜»å¡ä¹‹åï¼Œåé¢çš„å†™é”è¿˜æ˜¯å¯ä»¥è·å–åˆ°ã€‚","like_count":0},{"had_liked":false,"id":234438,"user_name":"frankie","can_delete":false,"product_type":"c1","uid":1794060,"ip_address":"","ucode":"813D1352B68A21","user_header":"https://static001.geekbang.org/account/avatar/00/1b/60/0c/e1f012cb.jpg","comment_is_top":false,"comment_ctime":1594692364,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1594692364","product_id":100020801,"comment_content":"ALTER TABLE tbl_name WAIT N add column è¿™ä¸ªåœ¨mysql5.7ä¼šæŠ¥é”™å•Š","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582378,"discussion_content":"wait nå’Œ nowaitè¿™ä¸ªè¯­å¥æ ¼å¼åªæ˜¯åœ¨MariaDBå’ŒAliSQLä¸¤ä¸ªå¼€æºåˆ†æ”¯ç‰ˆæœ¬æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659415045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233265,"user_name":"æµ·è±š","can_delete":false,"product_type":"c1","uid":1060772,"ip_address":"","ucode":"4AC3B788551F00","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/a4/ff8f912b.jpg","comment_is_top":false,"comment_ctime":1594275291,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594275291","product_id":100020801,"comment_content":"æŸã€äºº<br>è¿™é“é¢˜æœ‰ç‚¹æ„æ€å•Šã€‚<br>æˆ‘åˆšå¼€å§‹ä»¥ä¸ºå°±ä¸¤ç§æƒ…å†µ<br>1.mysqldumpæ­£åœ¨æˆ–è€…å·²ç»å¤‡ä»½t1è¡¨çš„æ•°æ®,æ­¤æ—¶æ‰§è¡Œè¯­å¥alter,é‚£ä¹ˆMDL Xé”ä¼šè¢«mysqldumpå¼€å§‹ç”³è¯·çš„MDL Sé”é˜»å¡,å¯¼è‡´ä¹‹åä»åº“æ‰€æœ‰æ“ä½œé˜»å¡<br>2.mysqldumpè¿˜æœªå¤‡ä»½åˆ°t1è¡¨,ä½†æ˜¯alterè¯­å¥å·²ç»æ‰§è¡Œã€‚é‚£ä¹ˆåˆ°å¤‡ä»½è‡³t1è¡¨æ—¶,ä¼šæŠ¥é”™Table definition has changed(ç”±äºé‡å»ºäº†è¡¨,å¯¼è‡´è¡¨å®šä¹‰å·²ç»å‘ç”Ÿæ”¹å˜,<br>å¦‚æœDDLæ˜¯add indexé‚£ä¹ˆå°±ä¸ä¼šæŠ¥é”™,å› ä¸ºæ²¡æœ‰é‡å»ºè¡¨,æ‰€ä»¥è¿™é‡Œä¹Ÿèƒ½åŒºåˆ†å‡ºå“ªäº›DDLæ“ä½œä¼šrebuildå“ªäº›ä¸ç”¨rebuild table)<br>ä½†æ˜¯ç»è¿‡æµ‹è¯•,æ˜¯ä¸‰ç§æƒ…å†µã€‚mysqldumpè™½ç„¶äº‹åŠ¡æœŸé—´ä¸€ç›´æœªæäº¤,ä½†æ˜¯ç”¨äº†SAVEPOINT, ROLLBACK TO SAVEPOINT,æ¥é‡Šæ”¾è¡¨ä¸ŠMDL Sé”ã€‚<br>å¯¼è‡´åœ¨ä¸€ä¸ªäº‹åŠ¡æœŸé—´å·²ç»å¤‡ä»½å®Œçš„è¡¨ä¸ä¼šé˜»å¡åç»­çš„alteræ“ä½œ<br>ä»¥å‰æ²¡ä»”ç»†çœ‹,è¿™ä¸‹åˆgetåˆ°äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹,å†æ¬¡æ„Ÿè°¢è€å¸ˆã€‚<br><br>è€å¸ˆèƒ½è§£é‡Šä¸€ä¸‹è¿™ä¸ªå—ï¼ˆmysqldumpè™½ç„¶äº‹åŠ¡æœŸé—´ä¸€ç›´æœªæäº¤,ä½†æ˜¯ç”¨äº†SAVEPOINT, ROLLBACK TO SAVEPOINT,æ¥é‡Šæ”¾è¡¨ä¸ŠMDL Sé”ã€‚ï¼‰","like_count":0},{"had_liked":false,"id":233262,"user_name":"æµ·è±š","can_delete":false,"product_type":"c1","uid":1060772,"ip_address":"","ucode":"4AC3B788551F00","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/a4/ff8f912b.jpg","comment_is_top":false,"comment_ctime":1594274333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594274333","product_id":100020801,"comment_content":"æœ‰ç‚¹ä¸ç†è§£ä¸ºä»€ä¹ˆè¿˜æ²¡æœ‰æ‹¿åˆ°MDLå†™é”çš„session Cä¸ºä»€ä¹ˆä¼šé˜»å¡åç»­æƒ³è·å–MDLè¯»é”çš„session D? è¿™æ ·å²‚ä¸æ˜¯ååé‡å¤§æ‰“æŠ˜æ‰£ï¼ŸMDLé”çš„è®¾è®¡æœ‰æ²¡æœ‰è€ƒè™‘åˆ°è¯»è€…&#47;å†™è€…ä¼˜å…ˆçš„é—®é¢˜å‘¢? è¿˜æœ‰ä¸€ä¸ªä¸æ˜ç™½çš„åœ°æ–¹æ˜¯ï¼Œæ—¢ç„¶session Cé˜»å¡äº†session Dï¼Œé‚£ä¹ˆç­‰Session A&#47;Bé‡Šæ”¾MDLè¯»é”çš„æ—¶å€™ï¼ŒSession Cåº”è¯¥å…ˆè§£é™¤é˜»å¡æ‰å¯¹å•Šï¼Œä¸ºä»€ä¹ˆåè€Œæ˜¯Session Dé¦–å…ˆå¾—åˆ°äº†æ‰§è¡Œå‘¢ï¼Ÿ<br>ä½œè€…å›å¤: 5.6æ˜¯å…ˆæ¥å…ˆå¾—çš„ï¼Œ5.7æ¢äº†ç­–ç•¥ã€‚<br>æˆ‘çš„é—®é¢˜æ˜¯5.7çš„ç­–ç•¥æ˜¯ï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":232448,"user_name":"æµ·è±š","can_delete":false,"product_type":"c1","uid":1060772,"ip_address":"","ucode":"4AC3B788551F00","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/a4/ff8f912b.jpg","comment_is_top":false,"comment_ctime":1594006156,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1594006156","product_id":100020801,"comment_content":"æ—è€å¸ˆä½ å¥½ï¼Œæ•°æ®æ£€ç´¢èµ°äº†å‰ç¼€ç´¢å¼•ï¼Œæ˜¯ä¸æ˜¯å°±æ— æ³•è¿›è¡Œç´¢å¼•ä¸‹æ¨äº†ï¼Ÿä¾‹å¦‚ï¼šlike â€˜å¼ %â€™","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582379,"discussion_content":"ä¸€æ ·å¯ä»¥ï¼Œç´¢å¼•ä¸‹æ¨çš„ç›®çš„æ˜¯åœ¨ç´¢å¼•éå†çš„æ—¶å€™è¿›è¡Œè¿‡æ»¤ä¸ç¬¦åˆæ¡ä»¶çš„æ•°æ®è¡Œï¼Œå‡å°‘å›è¡¨çš„æ¬¡æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659415130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229212,"user_name":"jun.hai","can_delete":false,"product_type":"c1","uid":1702947,"ip_address":"","ucode":"9740C5118DE6DC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epx1w8VkC30tcu4GlOCkUZB7picI2xesBBZF3rGWVPp9tHZfJdkc5iaqhSg7LOsvtefiajkM1YPno2JA/132","comment_is_top":false,"comment_ctime":1592924060,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1592924060","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œå¦‚æœæ•°æ®é‡å¤§ä¸€ç‚¹(ç”Ÿäº§1kw+)çš„è¡¨ï¼Œå› ä¸šåŠ¡éœ€æ±‚æ·»åŠ æ–°å­—æ®µï¼Œè‹¥ä¸åœåº”ç”¨æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œæœ‰ä»€ä¹ˆå¥½çš„æ–¹æ¡ˆèƒ½å¹³æ»‘çš„æ·»åŠ æ–°å­—æ®µä¹ˆï¼Ÿè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582380,"discussion_content":"æ²¡æœ‰ï¼Œå‡çº§MySQL8.0ç‰ˆæœ¬å¯ä»¥å¿«é€ŸåŠ å­—æ®µï¼Œ&lt;MySQL5.7ä¹Ÿå¯ä»¥åœ¨ä¸šåŠ¡ä½å³°æœŸæ‰§è¡Œï¼Œé¿å…å¯¹ä¸šåŠ¡å½±å“ï¼Œé€šå¸¸ä¸»è¦æ˜¯æ•°æ®åº“ä¸»ä»å»¶è¿Ÿçš„å½±å“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659415216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228891,"user_name":"æŸ³åä¸‰","can_delete":false,"product_type":"c1","uid":1385852,"ip_address":"","ucode":"FE50C9778914C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/tKvmZ3Vs4t6RZ3X7cAliaW47Zatxhn1aV5PcCYT9NZ9k9WWqRrEBGHicGtRWvsG6yQqHnaWw6cGNSbicNLjZebcHA/132","comment_is_top":false,"comment_ctime":1592834871,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592834871","product_id":100020801,"comment_content":"æ³¨æ„: lock tables â€¦ read&#47;writeè·å–Xé”ï¼ŒXé”æ˜¯è¡Œé”.è·å–Xé”ä¹‹å‰è·å–IXé”ï¼ŒIXé”æ˜¯è¡¨é”ï¼Œä¸ªäººè®¤ä¸ºåº”è¯¥åŠ ä¸Š<br>å‚è€ƒ:https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;innodb-locking.html<br>","like_count":0},{"had_liked":false,"id":226362,"user_name":"Geek_63dee3","can_delete":false,"product_type":"c1","uid":2032856,"ip_address":"","ucode":"7F5944EF5ED972","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ2NEZZml3aO7tZ9SpIQLWbFpkfialjoiaQFt79VvbJ2GZ1IytI4SI8owiaUichvX74UOK7SxHf3R8QLw/132","comment_is_top":false,"comment_ctime":1592047694,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592047694","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­ä¾‹å­å°è¡¨çš„ddlä¹‹æ‰€ä»¥ä¼šå¡æ­»æ•´ä¸ªæ•°æ®åº“çš„èµ„æºï¼Œæ˜¯å› ä¸ºsession Dçš„è¯»é”ä¸€ç›´è¢«session Cå†™é”å µç€ï¼Œç„¶åsession Dä¸€ç›´è¢«retryï¼Œåˆ›å»ºäº†åé¢æ— æ•°ä¸ªè¯»é”è¢«å¡ï¼Œéš¾é“è¿™ä¸ªretryæ²¡æœ‰æ¬¡æ•°é™åˆ¶å—ï¼Ÿæ¯”å¦‚è¯´session Dè¯»é”ä¸€ç›´æ‹¿ä¸åˆ°ï¼Œä¸å¯ä»¥è¢«MySQLçš„å¼•æ“æˆ–è€…background processè‡ªå·±killæ‰ï¼Œç„¶åæŠ¥é”™è¯´å› ä¸ºæœ‰ddlåœ¨æ‰§è¡Œæ‰€ä»¥ä¸å¯è¯»ï¼Ÿè¿™æ ·æ•´ä¸ªæ•°æ®åº“å°±ä¸ä¼šå› ä¸ºè¿™ä¹ˆå°çš„äº‹åŠ¡å µå¡è€Œå¼•èµ·å´©æºƒäº†","like_count":0},{"had_liked":false,"id":225842,"user_name":"zhaozp","can_delete":false,"product_type":"c1","uid":1099706,"ip_address":"","ucode":"BF390F5ED762CD","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/ba/4c449be2.jpg","comment_is_top":false,"comment_ctime":1591871066,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591871066","product_id":100020801,"comment_content":" æ–‡ä¸­ï¼š<br>session C ä¼šè¢« blockedï¼Œæ˜¯å› ä¸º session A çš„ MDL è¯»é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œè€Œ session C éœ€è¦ MDL å†™é”ï¼Œå› æ­¤åªèƒ½è¢«é˜»å¡ã€‚å¦‚æœåªæœ‰ session C è‡ªå·±è¢«é˜»å¡è¿˜æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯ä¹‹åæ‰€æœ‰è¦åœ¨è¡¨ t ä¸Šæ–°ç”³è¯· MDL è¯»é”çš„è¯·æ±‚ä¹Ÿä¼šè¢« session C é˜»å¡ã€‚<br><br>è¯·é—®ä¸‹è€å¸ˆï¼šsession Cä¸æ˜¯è¿˜è¢«é˜»å¡ç€çš„å˜›ï¼Œï¼ˆåº”è¯¥è¿˜æ²¡æ‹¿åˆ°å†™é”å§ï¼‰ï¼Œä¸ºä»€ä¹ˆä»–åˆèƒ½é˜»å¡åˆ«çš„ç”³è¯·è¯»é”çš„sesssionå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":225759,"user_name":"å›¾çµæœº","can_delete":false,"product_type":"c1","uid":2034632,"ip_address":"","ucode":"EB02DB653AD591","user_header":"https://static001.geekbang.org/account/avatar/00/1f/0b/c8/15f055d3.jpg","comment_is_top":false,"comment_ctime":1591847862,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1591847862","product_id":100020801,"comment_content":"å®éªŒäº†ä¸€ä¸‹MDLç»™å°è¡¨åŠ å­—æ®µï¼ŒçœŸçš„é˜»å¡äº†ï¼Œå¤ªç¥å¥‡äº†","like_count":0},{"had_liked":false,"id":225738,"user_name":"FL","can_delete":false,"product_type":"c1","uid":1928368,"ip_address":"","ucode":"C82D077D6C2277","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLCKzC0IPq9HSaMiaySKyviaBftvz2EjgqKNCwia9C0xIfYnuE7qntQ6fQ9oL2sEyJGWu0Mmj7EbWicrg/132","comment_is_top":false,"comment_ctime":1591843966,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1591843966","product_id":100020801,"comment_content":"è€å¸ˆ alter table xxx wait N add xxx  int(10); æŠ¥é”™å“ æˆ‘ç”¨çš„æ˜¯8.0.17ç‰ˆæœ¬","like_count":0,"discussions":[{"author":{"id":1028343,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b0/f7/228a6c37.jpg","nickname":"æ±Ÿæ¹–ä¸Š","note":"","ucode":"E10516C681EF23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288223,"discussion_content":"MySQLè¿˜ä¸æ”¯æŒè¿™ç§è¯­æ³•ï¼Œè€å¸ˆæ–‡ç« é‡Œè¯´äº†çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593682694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225237,"user_name":"æ¸­åŸé‡æ•…äºº","can_delete":false,"product_type":"c1","uid":2017095,"ip_address":"","ucode":"3B7E7B2B5DCB6B","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c7/47/0f99f19d.jpg","comment_is_top":false,"comment_ctime":1591689446,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591689446","product_id":100020801,"comment_content":"â€œè¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨ã€‚â€æ‚¨å¥½ï¼Œæ–‡ç« å†™äº†è¿™ä¸€å¥è¯ä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šï¼Œä¸»è¦æ˜¯ä¸æ˜ç™½â€œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨â€è¿™å¥è¯æ˜¯å•¥æ„æ€ï¼Œå¯èƒ½è‡ªå·±æƒ³åå•¦ï¼Œä¸çŸ¥é“åº”è¯¥å¦‚ä½•ç†è§£ï¼ŒçœŸå¿ƒæ±‚æ•™ã€‚","like_count":0},{"had_liked":false,"id":223913,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1591232035,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1591232035","product_id":100020801,"comment_content":"å°ç™½è¡¨ç¤ºå¥½å¥‡ï¼Œæ‹¿å‡ºä¸€å°ä»æœï¼Œæ–­å¼€ä¸šåŠ¡ï¼Œstop slave  è®°ä½pos  ï¼Œä¸å°±å¯ä»¥å¼€å§‹å¤‡ä»½äº†å—ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582381,"discussion_content":"é‚£ä¸å°±æ˜¯ä»åº“å»¶è¿Ÿäº†å—ï¼Ÿæƒ³æƒ³å¦‚æœä¸šåŠ¡åšäº†è¯»å†™åˆ†ç¦»ï¼ˆä»åº“æä¾›ä¸šåŠ¡è¯»åŠŸèƒ½ï¼‰æˆ–è€…è¿™ä¸ªä»åº“å‚ä¸ä¸»ä»æ•…éšœåˆ‡æ¢è§’è‰²ï¼Œæ­¤æ—¶ä¸»åº“æŒ‚äº†ï¼Œè¦å°†è¿™ä¸ªä»åº“åˆ‡æ¢æˆä¸»åº“è§’è‰²æä¾›ä¸šåŠ¡è¯»å†™ï¼Œä¸šåŠ¡æ•°æ®ä¸å°±ä¸¢äº†ä¸€éƒ¨åˆ†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659415335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221241,"user_name":"Tweijiao","can_delete":false,"product_type":"c1","uid":1627912,"ip_address":"","ucode":"93D9E78C2AA768","user_header":"https://static001.geekbang.org/account/avatar/00/18/d7/08/185281c6.jpg","comment_is_top":false,"comment_ctime":1590454688,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590454688","product_id":100020801,"comment_content":"è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥ã€‚--è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œä¸åº”è¯¥æ˜¯å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨æŸ¥ï¼Ÿè¯·é—®ä¸ºå•¥è¿˜æœ‰å¢åˆ æ”¹ï¼Ÿ","like_count":0},{"had_liked":false,"id":220171,"user_name":"Shrimp","can_delete":false,"product_type":"c1","uid":1991305,"ip_address":"","ucode":"C6F0FA59F9B59C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/62/89/e025c145.jpg","comment_is_top":false,"comment_ctime":1590196363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590196363","product_id":100020801,"comment_content":"äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ã€‚ç°åœ¨ï¼Œæˆ‘è¦æŠŠæ‰€æœ‰â€œå­—æ®µ c å’Œ id å€¼ç›¸ç­‰çš„è¡Œâ€çš„ c å€¼æ¸…é›¶ï¼Œä½†æ˜¯å´å‘ç°æ”¹ä¸æ‰çš„æƒ…å†µã€‚è¯·ä½ æ„é€ å‡ºè¿™ç§æƒ…å†µï¼Œå¹¶è¯´æ˜å…¶åŸç†ã€‚è€å¸ˆè¿™é¢˜æ€ä¹ˆæ€è€ƒï¼Ÿ","like_count":0},{"had_liked":false,"id":220003,"user_name":"f(x)","can_delete":false,"product_type":"c1","uid":1224568,"ip_address":"","ucode":"3680BBD50AFAE4","user_header":"https://static001.geekbang.org/account/avatar/00/12/af/78/07d3e282.jpg","comment_is_top":false,"comment_ctime":1590133758,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590133758","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåœ¨ä¸²è¡ŒåŒ–äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ï¼Œå¢åˆ æ”¹æŸ¥éƒ½æ˜¯åŠ è¡¨é”å—","like_count":0},{"had_liked":false,"id":219150,"user_name":"å°æ ·","can_delete":false,"product_type":"c1","uid":1047127,"ip_address":"","ucode":"0D670431F19A14","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bOhve1DBV2oShl2JrXDib4J1T7LciagcB8jogD5c7pvt8Zv7Bq23Zfnl70cf2R81r8ia947Hbib9FZia56sdx9wcEibA/132","comment_is_top":false,"comment_ctime":1589956069,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589956069","product_id":100020801,"comment_content":"DMLè¯»é”æ—¶ï¼Œdmlè¯­å¥å¯ä»¥åšå¢åˆ æ”¹æŸ¥ï¼Œddlä¼šè¢«é˜»å¡<br>DMLå†™é”æ—¶ï¼Œå…¶ä»–çš„è¯·æ±‚éƒ½ä¼šè¢«é˜»å¡","like_count":0},{"had_liked":false,"id":216560,"user_name":"itschenxiang","can_delete":false,"product_type":"c1","uid":1519547,"ip_address":"","ucode":"7D90194AC52435","user_header":"https://static001.geekbang.org/account/avatar/00/17/2f/bb/4236d712.jpg","comment_is_top":false,"comment_ctime":1589284078,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589284078","product_id":100020801,"comment_content":"è€å¸ˆï¼Œäº‹åŠ¡çš„æ¦‚å¿µåˆ°åº•æ€æ ·çš„ï¼ŸMDL åœ¨ MySQL çš„ Server å±‚å®ç°ï¼Œä½†MyISAMå¼•æ“ä¸æ˜¯ä¸æ”¯æŒäº‹åŠ¡å—ï¼Ÿæ“ä½œMyISAMè¡¨æ—¶ä¼šåŠ MDLé”å—ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582382,"discussion_content":"ä¸€æ ·ä¼šï¼ŒMDLé”æ˜¯åœ¨Serverå±‚å®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´è·Ÿåº•å±‚çš„å­˜å‚¨å¼•æ“ç±»åˆ«æ²¡æœ‰å…³ç³»ï¼Œä¸ç®¡æ˜¯InnoDBè¿˜æ˜¯MyISAMå­˜å‚¨å¼•æ“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659415464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214705,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1588803232,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588803232","product_id":100020801,"comment_content":"è€å¸ˆ ä¿©é—®é¢˜<br>1.å…¨å±€é”å’Œè¡¨é”éƒ½æ˜¯serverå±‚çš„ è¡Œé”æ˜¯å¼•æ“å±‚çš„å—<br>2.é€»è¾‘å¤‡ä»½è¯´è¦å…¨å±€é”ï¼Œä¿è¯ä¸€è‡´æ€§ï¼Œä½†æ˜¯æˆ‘ä»¬javaä»£ç ä¸­éƒ½æ˜¯å¼€å¯äº‹åŠ¡æ‰åŒæ—¶æ”¹å¤šè¡¨çš„å•Šï¼Œæ˜¯åŸå­çš„ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ä¸åŠ å…¨å±€é”äº†","like_count":0},{"had_liked":false,"id":213819,"user_name":"Jc.Chen","can_delete":false,"product_type":"c1","uid":1180676,"ip_address":"","ucode":"36886491352CD4","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/04/0af56558.jpg","comment_is_top":false,"comment_ctime":1588568187,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1588568187","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿™é‡Œæœ‰äº›ç–‘æƒ‘ï¼š<br><br>      â€œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° session A å…ˆå¯åŠ¨ï¼Œè¿™æ—¶å€™ä¼šå¯¹è¡¨ t åŠ ä¸€ä¸ª MDL è¯»é”ã€‚ç”±äº session B éœ€è¦çš„ä¹Ÿæ˜¯ MDL è¯»é”ï¼Œå› æ­¤å¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚ä¹‹å session C ä¼šè¢« blockedï¼Œæ˜¯å› ä¸º session A çš„ MDL è¯»é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œè€Œ session C éœ€è¦ MDL å†™é”ï¼Œå› æ­¤åªèƒ½è¢«é˜»å¡ã€‚<br><br>       å¦‚æœåªæœ‰ session C è‡ªå·±è¢«é˜»å¡è¿˜æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯ä¹‹åæ‰€æœ‰è¦åœ¨è¡¨ t ä¸Šæ–°ç”³è¯· MDL è¯»é”çš„è¯·æ±‚ä¹Ÿä¼šè¢« session C é˜»å¡ã€‚â€<br><br>è¿™é‡Œè¯´çš„â€œå¦‚æœåªæœ‰ session C è‡ªå·±è¢«é˜»å¡è¿˜æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯ä¹‹åæ‰€æœ‰è¦åœ¨è¡¨ t ä¸Šæ–°ç”³è¯· MDL è¯»é”çš„è¯·æ±‚ä¹Ÿä¼šè¢« session C é˜»å¡â€ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·å­å‘¢ï¼Œåœ¨Session Cåœ¨ç­‰å¾…Session Aé‡Šæ”¾ï¼Œåœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­ï¼Œè¯´æ˜Cæ²¡æœ‰å–åˆ° MDL çš„å†™é”ï¼Œæ²¡å–åˆ°å†™é”ï¼Œåé¢çš„sessionå¦‚æœæ‰§è¡ŒDMLï¼Œä¸ºä»€ä¹ˆä¼šè¢«Session Cé˜»å¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1901078,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/02/16/dd5cde99.jpg","nickname":"ğŸ¤” ğŸ¤” ğŸ¤”","note":"","ucode":"F1A4B6270675AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266522,"discussion_content":"è¯„è®ºå»å¥½å‡ ä¸ªé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œè€å¸ˆä¹Ÿæ²¡è§£ç­”ã€‚æˆ‘ä¹Ÿæ˜¯åŒæ ·çš„æƒ…å†µï¼Œåæ¥ æˆ‘æ„Ÿè§‰ï¼Œå½“C Déƒ½æŒ‚èµ·çš„æ—¶å€™ï¼ŒCD2ä¸ªä¼šè¯å¹¶ä¸é˜Ÿåˆ—å…³ç³»ï¼ˆä¸å­˜åœ¨å…ˆåï¼‰ï¼Œä¹Ÿå°±æ˜¯cdéƒ½æ˜¯åŒæ—¶åœ¨ç­‰å¾…é”ï¼Œä¸€æ—¦a bé‡Šæ”¾ï¼Œcdè°ä¹Ÿä¸è®©è°ï¼Œå°±è·Ÿdmlçš„æ­»é”æœ‰ç‚¹åƒï¼Œåªæœ‰cè·Ÿdè°å…ˆé‡Šæ”¾ï¼Œå¦å¤–ä¸€ä¸ªä¼šè¯å°±èƒ½ç«‹é©¬æ‰§è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589526002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213727,"user_name":"æ˜ŸæœŸå…«","can_delete":false,"product_type":"c1","uid":1440429,"ip_address":"","ucode":"D8C66E7F61B0D1","user_header":"https://static001.geekbang.org/account/avatar/00/15/fa/ad/3fa02ac7.jpg","comment_is_top":false,"comment_ctime":1588522612,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588522612","product_id":100020801,"comment_content":"1 å…¨å±€é” <br>åº”ç”¨ å…¨å±€å¤‡ä»½<br>1.1 myisan ftwrl<br>1.2 set global readonly=on<br>2 è¡¨çº§é”<br>2.1 lock table<br>2.2 mdl<br>è¯»é”å’Œå†™é”<br>2.3 åº”ç”¨ çƒ­ç‚¹è¡¨çš„è¡¨ç»“æ„ä¿®æ”¹","like_count":0},{"had_liked":false,"id":207340,"user_name":"winy","can_delete":false,"product_type":"c1","uid":1100612,"ip_address":"","ucode":"04CE142A4426D0","user_header":"https://static001.geekbang.org/account/avatar/00/10/cb/44/22d65cf1.jpg","comment_is_top":false,"comment_ctime":1587050320,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587050320","product_id":100020801,"comment_content":"åœ¨è¯„è®ºåŒºçœ‹åˆ°åŒå­¦ä»¬æœ‰è¯´ddlæ“ä½œonlineçš„æ¦‚å¿µï¼Œå†™é”å›é™çº§æˆè¯»é”ï¼Œåœ¨é‡Šæ”¾é”ä¹‹å‰å‡çº§æˆå†™é”ï¼Œæ˜¯å¦å°±å¯ä»¥ç†è§£æˆåªè¦å†™é”å‰æ²¡æœ‰å…¶ä»–çº¿ç¨‹æŒæœ‰è¯»é”ï¼Œåœ¨ddlæ“ä½œçš„æ—¶å€™åé¢çš„çº¿ç¨‹åªè¦å…¨æ˜¯è¯»å°±ä¸€å®šä¸ä¼šæ­»é”","like_count":0},{"had_liked":false,"id":205888,"user_name":"å­¦ä¸ªçƒ","can_delete":false,"product_type":"c1","uid":1019725,"ip_address":"","ucode":"7343F3C0CA981D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/4d/65fb45e6.jpg","comment_is_top":false,"comment_ctime":1586751291,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1586751291","product_id":100020801,"comment_content":"â€œç»™ä¸€ä¸ªè¡¨åŠ å­—æ®µï¼Œæˆ–è€…ä¿®æ”¹å­—æ®µï¼Œæˆ–è€…åŠ ç´¢å¼•ï¼Œéœ€è¦æ‰«æå…¨è¡¨çš„æ•°æ®â€ï¼Œæˆ‘æœ‰ç‚¹ä¸èƒ½ç†è§£ï¼Œç»™ä¸€ä¸ªè¡¨åŠ å­—æ®µä¸ºä»€ä¹ˆä¼šå’Œè¡¨æ•°æ®æœ‰å…³ï¼Ÿ<br><br>æˆ‘çš„ç†è§£æ˜¯åŠ å­—æ®µçš„æ—¶å€™åˆ¤æ–­ä¸€ä¸‹è¡¨ä¸­æ˜¯ä¸æ˜¯å·²å­˜åœ¨è¯¥å­—æ®µå³å¯ï¼Œé¿å…é‡å¤çš„å­—æ®µã€‚åº”è¯¥æ˜¯ â€œé”ä½å…¨è¡¨çš„æ•°æ®â€ è€Œä¸æ˜¯â€œæ‰«æå…¨è¡¨çš„æ•°æ®â€ã€‚<br><br>ä¼šæœ‰çŸ¥é“çš„åŒå­¦å—ï¼Œæœ›è§£æƒ‘ã€‚","like_count":0,"discussions":[{"author":{"id":1183518,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/1e/6b6eb987.jpg","nickname":"æˆ‘ä»¬åœ¨è·¯ä¸Š","note":"","ucode":"0DB77DB7C64C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":242717,"discussion_content":"å¦‚æœä½ ç»™åŠ çš„å­—æ®µè®¾ç½®äº†é»˜è®¤å€¼ï¼Œä¸æ‰«æå…¨è¡¨æ•°æ®ï¼Œæ€ä¹ˆè®¾ç½®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587483505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192710,"user_name":"shiziwen","can_delete":false,"product_type":"c1","uid":1016917,"ip_address":"","ucode":"ADADC770D82D66","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","comment_is_top":false,"comment_ctime":1584869178,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584869178","product_id":100020801,"comment_content":"å…³äºä¸ŠæœŸç•™çš„ç´¢å¼•é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯cå’Œcaï¼Œç•™ä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥ï¼Ÿ","like_count":0},{"had_liked":false,"id":191784,"user_name":"å•è‰²","can_delete":false,"product_type":"c1","uid":1907486,"ip_address":"","ucode":"A1DA6E497FD74C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/1b/1e/f5c16f7e.jpg","comment_is_top":false,"comment_ctime":1584796515,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584796515","product_id":100020801,"comment_content":"è¿ç€å‡ å¤©ï¼Œä¸€ç›´åœ¨çœ‹ä¸è€å¸ˆçš„ä¸“æ ï¼Œæ”¶è·å¤šå¤šï¼Œå¯¹ä»¥å‰ä¸ç†Ÿæ‚‰çš„çš„çŸ¥è¯†ç‚¹ï¼Œæœ‰äº†æ›´æ¸…æ™°çš„è®¤çŸ¥ã€‚å–œæ¬¢åˆ·ä¼˜è´¨è¯„è®ºï¼Œäº†è§£ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ã€‚","like_count":0},{"had_liked":false,"id":190839,"user_name":"spuryin","can_delete":false,"product_type":"c1","uid":1221753,"ip_address":"","ucode":"17474DCB7D293D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a4/79/35ab3a19.jpg","comment_is_top":false,"comment_ctime":1584697447,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1584697447","product_id":100020801,"comment_content":"5.6ç‰ˆæœ¬ï¼Œå¯¹äºmyisamè¡¨ï¼Œå¦‚æœå¯¹è¡¨è¿›è¡Œupdateæ“ä½œï¼Œè·å–MDLè¯»é”ï¼ŒåŒæ˜¯å¯¹è¿™ä¸ªè¡¨selectï¼Œä¹Ÿä¼šè·å–ä¸€ä¸ªMDLè¯»é”ï¼ŒæŒ‰æ–‡ç« çš„è¯´æ³•è¿™é‡Œæ˜¯ä¸äº’æ–¥çš„ã€‚ä½†æ˜¯å®é™…æ“ä½œselectæ“ä½œä¼šå¡ä½ï¼Œæå‡wait for table level lockï¼Œè¿™æ˜¯è¿˜æœ‰ä»€ä¹ˆé”å¡ä½äº†å—ï¼Ÿæˆ‘ç†è§£myisamåªæ”¯æŒè¡¨çº§é”ï¼Œæ‰€ä»¥updateæ“ä½œä¼šé”è¡¨ï¼Œselectä¼šå¡ä½ï¼Œè¿™é‡Œåˆæœ‰ç‚¹è¿·ç³Šäº†","like_count":0,"discussions":[{"author":{"id":2122601,"avatar":"https://static001.geekbang.org/account/avatar/00/20/63/69/e16ed359.jpg","nickname":"æœ¨æœ‰æ¢¦æƒ³","note":"","ucode":"6366D107BBA553","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300040,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯MyISAMä¸æ”¯æŒäº‹åŠ¡,InnoDBæ”¯æŒäº‹åŠ¡,æ˜¯å¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«,æ‰€ä»¥InnoDBçš„MDLè¯»é”å¯ä»¥å¤šä¸ªçº¿ç¨‹æ“ä½œå¢åˆ æ”¹æŸ¥çš„æ“ä½œ.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597916886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189650,"user_name":"è¿ç»´è€èƒ¡","can_delete":false,"product_type":"c1","uid":1227007,"ip_address":"","ucode":"DF398BEE296E11","user_header":"https://static001.geekbang.org/account/avatar/00/12/b8/ff/249da6da.jpg","comment_is_top":false,"comment_ctime":1584538380,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584538380","product_id":100020801,"comment_content":"å®˜æ–¹è‡ªå¸¦çš„é€»è¾‘å¤‡ä»½å·¥å…·æ˜¯ mysqldumpã€‚å½“ mysqldump ä½¿ç”¨å‚æ•°â€“single-transaction çš„æ—¶å€™ï¼Œå¯¼æ•°æ®ä¹‹å‰å°±ä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œæ¥ç¡®ä¿æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ã€‚è€Œç”±äº MVCC çš„æ”¯æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°çš„ã€‚ä½ ä¸€å®šåœ¨ç–‘æƒ‘ï¼Œæœ‰äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ FTWRL å‘¢ï¼Ÿä¸€è‡´æ€§è¯»æ˜¯å¥½ï¼Œä½†å‰ææ˜¯å¼•æ“è¦æ”¯æŒè¿™ä¸ªéš”ç¦»çº§åˆ«ã€‚æ¯”å¦‚ï¼Œå¯¹äº MyISAM è¿™ç§ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼Œå¦‚æœå¤‡ä»½è¿‡ç¨‹ä¸­æœ‰æ›´æ–°ï¼Œæ€»æ˜¯åªèƒ½å–åˆ°æœ€æ–°çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±ç ´åäº†å¤‡ä»½çš„ä¸€è‡´æ€§ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ FTWRL å‘½ä»¤äº†ã€‚æ‰€ä»¥ï¼Œsingle-transaction æ–¹æ³•åªé€‚ç”¨äºæ‰€æœ‰çš„è¡¨ä½¿ç”¨äº‹åŠ¡å¼•æ“çš„åº“ã€‚å¦‚æœæœ‰çš„è¡¨ä½¿ç”¨äº†ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼Œé‚£ä¹ˆå¤‡ä»½å°±åªèƒ½é€šè¿‡ FTWRL æ–¹æ³•ã€‚è¿™å¾€å¾€æ˜¯ DBA è¦æ±‚ä¸šåŠ¡å¼€å‘äººå‘˜ä½¿ç”¨ InnoDB æ›¿ä»£ MyISAM çš„åŸå› ä¹‹ä¸€ã€‚<br>---------------------------------------------------------------------------<br>å¯¹è¿™éƒ¨åˆ†å†…å®¹æœ‰ç–‘é—®ï¼Œå®æµ‹åœ¨ä½¿ç”¨FTWRLè·å–åˆ°å…¨å±€è¯»é”ä¹‹åï¼Œå¼€å¯äº†ä¸€è‡´æ€§è¯»äº‹åŠ¡ï¼Œç„¶åè®°å½•binlogä½ç½®å’Œæ–‡ä»¶åï¼Œéšåå°±æ‰§è¡Œäº†UNLOCK TABLES é‡Šæ”¾å…¨å±€è¯»é”ï¼Œæ„å‘³ç€ï¼Œå¯¹äºäº‹åŠ¡è¡¨æ˜¯ä¿è¯äº†åŒä¸€æ—¶é—´ç‚¹çš„å¤‡ä»½ï¼Œå¯¹äºéäº‹åŠ¡è¡¨æ˜¯æ— æ³•ä¿è¯çš„ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­çš„è§£é‡Šä¹Ÿæ˜¯å¦‚æ­¤ï¼šIt was assumed earlier that the tables to back up are InnoDB tables, so --single-transaction uses a consistent read and guarantees that data seen by mysqldump does not change. (Changes made by other clients to InnoDB tables are not seen by the mysqldump process.) If the backup operation includes nontransactional tables, consistency requires that they do not change during the backup. For example, for the MyISAM tables in the mysql database, there must be no administrative changes to MySQL accounts during the backup.ä½†æ˜¯çœ‹æ–‡ç« ä¸­è€å¸ˆçš„æ„æ€æ˜¯å¯¹äºéäº‹åŠ¡è¡¨ï¼ŒFTWRLä¿æŒåˆ°äº†éäº‹åŠ¡è¡¨å¤‡ä»½å®Œæˆæ‰UNLOCK TABLESã€‚è¿™åº”è¯¥æ˜¯ä¸å¯¹çš„å§ï¼Œç°åœ¨ç–‘æƒ‘çš„æ˜¯ï¼Œä½¿ç”¨mysqldump --single-transaction --master-data=2 å¤‡ä»½æ—¶ï¼Œæ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡è¡¨å’Œéäº‹åŠ¡è¡¨çš„åœ¨åŒä¸€æ—¶é—´ç‚¹çš„ï¼Ÿè€å¸ˆèƒ½å¦è¯¦ç»†è§£ç­”ä¸€ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":189108,"user_name":"è¿ç»´è€èƒ¡","can_delete":false,"product_type":"c1","uid":1227007,"ip_address":"","ucode":"DF398BEE296E11","user_header":"https://static001.geekbang.org/account/avatar/00/12/b8/ff/249da6da.jpg","comment_is_top":false,"comment_ctime":1584455881,"is_pvip":false,"replies":[{"id":"72960","content":"æ‹·å®Œæ‰unlock çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1584457313,"ip_address":"","comment_id":189108,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584455881","product_id":100020801,"comment_content":"2020-03-17T14:11:46.008273Z       216 Query     FLUSH &#47;*!40101 LOCAL *&#47; TABLES<br>2020-03-17T14:11:46.017319Z       216 Query     FLUSH TABLES WITH READ LOCK<br>2020-03-17T14:11:46.018780Z       216 Query     SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ<br>2020-03-17T14:11:46.018840Z       216 Query     START TRANSACTION &#47;*!40100 WITH CONSISTENT SNAPSHOT *&#47;<br>2020-03-17T14:11:46.018912Z       216 Query     SHOW VARIABLES LIKE &#39;gtid\\_mode&#39;<br>2020-03-17T14:11:46.024236Z       216 Query     SELECT @@GLOBAL.GTID_EXECUTED<br>2020-03-17T14:11:46.024447Z       216 Query     SHOW MASTER STATUS<br>2020-03-17T14:11:46.024632Z       216 Query     UNLOCK TABLES<br><br>åœ¨ä½¿ç”¨ mysqldump --single-transaciton å‚æ•°å¤‡ä»½æ—¶ï¼Œçœ‹åˆ°general logä¸­æ—¥å¿—æ˜¯è¿™æ ·ï¼Œç–‘é—®ï¼šFTWRLè·å–åˆ°å…¨å±€è¯»é”ï¼Œèƒ½ä¿æ•´å¤‡ä»½çš„ä¸€è‡´æ€§ï¼Œä½†æ˜¯å¯¹äºMyISAMéäº‹åŠ¡å¼•æ“ï¼Œåé¢çš„UNLOCK TABLESæ˜¯ä¸æ˜¯ä¼šé€ æˆéäº‹åŠ¡è¡¨ä¸åœ¨åŒä¸€æ—¶é—´ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487609,"discussion_content":"æ‹·å®Œæ‰unlock çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584457313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1227007,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/ff/249da6da.jpg","nickname":"è¿ç»´è€èƒ¡","note":"","ucode":"DF398BEE296E11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":207048,"discussion_content":"æˆ‘ä¸€å¼€å§‹ç†è§£çš„ä¹Ÿæ˜¯å¯¹äºéäº‹åŠ¡å¼•æ“çš„è¡¨ä¹Ÿæ˜¯æ‹·å®Œæ‰UNLOCK TABLES ï¼Œä½†æ˜¯çœ‹general log ç¡®å®æ˜¯ å…ˆUNLOCK TABLESï¼Œå†å»åˆ›å»ºSAVEPOIONT ç„¶åå¾ªç¯å»è·å–æ¯ä¸ªåº“æ¯å¼ è¡¨çš„æ•°æ®ï¼Œæˆ‘çš„ç–‘é—®ç‚¹å°±æ˜¯ä»æ—¥å¿—é¡ºåºä¸Šçœ‹ç¡®å®æ˜¯å…ˆUNLOCKäº†ï¼Œè¿™æ—¶å…¨å±€è¯»é”ä¼šè¢«é‡Šæ”¾ï¼Œè¯·é—®è€å¸ˆæˆ‘æ˜¯å“ªé‡Œç†è§£çš„ä¸å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584458314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188869,"user_name":"lison","can_delete":false,"product_type":"c1","uid":1225040,"ip_address":"","ucode":"900FCD4BD518D6","user_header":"https://static001.geekbang.org/account/avatar/00/12/b1/50/678a529b.jpg","comment_is_top":false,"comment_ctime":1584428569,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584428569","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚æœæˆ‘åŒæ—¶åœ¨å¤šä¸ªæ•°æ®åº“å¤‡ä»½çš„æ•°æ®å¦‚ä½•ä¿è¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œé¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":186919,"user_name":"ç«å¾ˆå¤§å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1242070,"ip_address":"","ucode":"80746AFCEF5FE7","user_header":"https://static001.geekbang.org/account/avatar/00/12/f3/d6/5d55c315.jpg","comment_is_top":false,"comment_ctime":1583972718,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1583972718","product_id":100020801,"comment_content":"ä¸¾ä¸ªä¾‹å­, å¦‚æœåœ¨æŸä¸ªçº¿ç¨‹ A ä¸­æ‰§è¡Œ lock tables t1 read, t2 write; è¿™ä¸ªè¯­å¥ï¼Œåˆ™å…¶ä»–çº¿ç¨‹å†™ t1ã€è¯»å†™ t2 çš„è¯­å¥éƒ½ä¼šè¢«é˜»å¡ã€‚åŒæ—¶ï¼Œçº¿ç¨‹ A åœ¨æ‰§è¡Œ unlock tables ä¹‹å‰ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œè¯» t1ã€è¯»å†™ t2 çš„æ“ä½œã€‚è¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨<br>è¿™ä¸ªåœ°æ–¹æœ‰ä¸€å¥è¯æ˜¯ï¼Œâ€œè¿å†™t1éƒ½ä¸å…è®¸â€œï¼Œå¯æ˜¯æ’­éŸ³å‘˜è¯»å‡ºæ¥çš„æ˜¯ï¼Œâ€œè¿è¯»t2éƒ½ä¸å…è®¸â€ï¼Œè¿™æ˜¯ä»€ä¹ˆæ“ä½œå‘€ï¼Œæ’­éŸ³å‘˜éƒ½å£éŸ³ï¼Œæ™®é€šè¯éƒ½è¯´ä¸æ ‡å‡†å°±ç®—äº†ï¼Œè¿˜è¯»é”™äº†ï¼Œæ€ä¹ˆå’Œå®¡æ ¸è¿‡çš„ï¼Œè‡ªå·±å°±ä¸çœ‹å—ï¼Ÿè¿™ä¸ªä¸“æ æˆ‘è§‰å¾—å†…å®¹æŒºå¥½ï¼Œå¯æ˜¯è¿™æ’­éŸ³å‘˜çš„ç´ è´¨ä¹Ÿå¤ªå·®äº†å§ã€‚èƒ½æœ‰äººç»™ä¸ªåé¦ˆå—","like_count":0,"discussions":[{"author":{"id":1238436,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e5/a4/e16dca6a.jpg","nickname":"é˜¿å‡¯æ–‡","note":"","ucode":"F17CF201E74849","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279084,"discussion_content":"æ’­éŸ³å‘˜å°±æ˜¯è€å¸ˆæœ¬äººã€‚ã€‚ã€‚è€å¸ˆæ”¹è¿‡æ–‡å­—ï¼Œä½†éŸ³é¢‘æ— æ³•å†é‡åšäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591282094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186550,"user_name":"shiziwen","can_delete":false,"product_type":"c1","uid":1016917,"ip_address":"","ucode":"ADADC770D82D66","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","comment_is_top":false,"comment_ctime":1583866326,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1583866326","product_id":100020801,"comment_content":"å…³äºç´¢å¼•çš„é‚£ä¸ªé—®é¢˜ï¼Œæ˜¯ä¸æ˜¯cå’Œcaï¼Œå»æ‰å…¶ä¸­ä¸€ä¸ªï¼Œå°±å¯ä»¥ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2873900,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/da/2c/cdd92f3f.jpg","nickname":"wÃ¡ng","note":"","ucode":"9BFEA73AD7680D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558218,"discussion_content":"æ˜¯çš„ã€‚å»æ‰caæ˜¯å› ä¸ºcaæ¯”cå ç”¨ç£ç›˜ç©ºé—´å¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648136915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016917,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","nickname":"shiziwen","note":"","ucode":"ADADC770D82D66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211601,"discussion_content":"è¯·é—®è€å¸ˆèƒ½å›ç­”ä¸€ä¸‹è¿™ä¸ªé—®é¢˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584868790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185177,"user_name":"å¤å…´","can_delete":false,"product_type":"c1","uid":1363230,"ip_address":"","ucode":"C172A87873001A","user_header":"https://static001.geekbang.org/account/avatar/00/14/cd/1e/692c3313.jpg","comment_is_top":false,"comment_ctime":1583504792,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1583504792","product_id":100020801,"comment_content":"lock tables â€¦ read&#47;write è¯·é—®è€å¸ˆï¼Œè¿™ä¸ªè¯»é”å’Œå†™é”ï¼Œmysqlä¼šè‡ªåŠ¨åŠ ä¸Šå˜›ï¼Œå¦‚æœä¼šï¼Œæ˜¯ä»€ä¹ˆæ—¶æœºå‘¢","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582383,"discussion_content":"ä¸ä¼šï¼Œæ‰‹åŠ¨åŠ çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659415530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181412,"user_name":"ç‰Ÿæ™“å®‡","can_delete":false,"product_type":"c1","uid":1868825,"ip_address":"","ucode":"EF980465718550","user_header":"","comment_is_top":false,"comment_ctime":1582536724,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582536724","product_id":100020801,"comment_content":"æ‰“å¡äº†","like_count":0},{"had_liked":false,"id":180589,"user_name":"ä¹”ä¸¹","can_delete":false,"product_type":"c1","uid":1217413,"ip_address":"","ucode":"D832A9F97A0C7E","user_header":"https://static001.geekbang.org/account/avatar/00/12/93/85/f5d9474c.jpg","comment_is_top":false,"comment_ctime":1582343708,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582343708","product_id":100020801,"comment_content":"ä¸çœ‹ç­”æ¡ˆï¼Œå…ˆè‡ªå·±å¯¹é¢˜ç›®åšåˆ†æï¼š<br>åœ¨innodbçš„å‰æä¸‹ï¼Œ<br>1. ä¸»è¡¨å¢åŠ åˆ—ï¼Œé‚£ä¹ˆå®ƒå°†ç”¨å…ƒæ•°æ®å†™é”é”ä½ä¸»è¡¨ã€‚<br>2. è¿™ä¸ªæ—¶å€™ä»è¡¨å°†ä¸èƒ½è¿›è¡Œä»ä¸»è¡¨è¯»ã€‚è¿™ä¸ªæ—¶å€™ä»è¡¨åº”è¯¥æ˜¯å¡ä¸»çš„ç°è±¡ã€‚<br>","like_count":0},{"had_liked":false,"id":177810,"user_name":"ipofss","can_delete":false,"product_type":"c1","uid":1018620,"ip_address":"","ucode":"DE3061C9259F9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","comment_is_top":false,"comment_ctime":1581505383,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581505383","product_id":100020801,"comment_content":"MySQLçš„é”æœ‰ä¸‰ç±»ï¼šå…¨å±€é”ã€è¡¨é”ã€è¡Œé”ã€‚<br>å…¨å±€é”æœ‰2ç§å½¢å¼ï¼šFlush tables with read lock(FTWRL)å’Œreadonlyï¼Œä¸»è¦ç”¨ä½œå¤‡ä»½ä½¿ç”¨ï¼Œä¸å»ºè®®ä½¿ç”¨readonlyã€‚<br>è¡¨é”æœ‰2ç§ï¼šlock tables ... read&#47;writeï¼Œç”¨unlock tablesä¸»åŠ¨é‡Šæ”¾é”ï¼Œå’ŒMDL(å…ƒæ•°æ®)é”ã€‚MDLé”ä¸éœ€è¦æ˜¾ç¤ºä½¿ç”¨ï¼Œä½†å¼•æ“å¾—æ”¯æŒäº‹åŠ¡ã€‚DMLæ“ä½œä¼šé»˜è®¤ç”³è¯·MDLè¯»é”ï¼ŒDDLæ“ä½œä¼šé»˜è®¤ç”³è¯·MDLå†™é”ã€‚","like_count":0},{"had_liked":false,"id":177627,"user_name":"SnowsonZ","can_delete":false,"product_type":"c1","uid":1446972,"ip_address":"","ucode":"5AF76D55CCDC8F","user_header":"https://static001.geekbang.org/account/avatar/00/16/14/3c/d6be29f3.jpg","comment_is_top":false,"comment_ctime":1581437105,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581437105","product_id":100020801,"comment_content":"Day5: åŒæ­¥<br><br>é”çš„ç±»å‹ï¼š å…¨å±€é”ï¼Œè¡¨çº§é”ï¼Œè¡Œé”<br><br>å…¨å±€é”ï¼š ç”¨äºæ•°æ®åº“é€»è¾‘å¤‡ä»½ï¼Œå¯¹äºæ”¯æŒå¯é‡å¤è¯»äº‹åŠ¡æ”¯æŒçš„å¼•æ“ï¼Œä½¿ç”¨single-transactionï¼Œå¯å®ç°åœ¨åŠ å…¨å±€é”æ—¶æ•°æ®å¯ä»¥æ­£å¸¸æ›´æ–°ã€‚<br><br>è¡¨çº§é”ï¼š <br>   è¡¨é”ã€‚ä¼šé˜»å¡æœ¬çº¿ç¨‹åŠå…¶ä»–çº¿ç¨‹çš„æ“ä½œï¼Œå¦‚æœæœ‰è¡Œçº§é”å°½é‡ä¸ä½¿ç”¨ï¼›<br>   å…ƒæ•°æ®é”ï¼Œæ•°æ®åº“æ§åˆ¶åŠ é”ä¸é‡Šæ”¾ã€‚å¯¹è¡¨å¢åˆ æ”¹æŸ¥æ—¶åŠ è¯»é”ï¼Œè¡¨ç»“æ„å˜åŒ–æ—¶åŠ å†™é”ã€‚å› ä¸ºé”ä¼šåœ¨æ•´ä¸ªäº‹åŠ¡æäº¤åé‡Šæ”¾ï¼Œæ‰€ä»¥åœ¨DDLå˜æ›´æ—¶é¿å…å‡ºç°é˜»å¡ï¼Œéœ€è¦å…ˆkillæ‰DDLç›¸å…³çš„é•¿äº‹åŠ¡ï¼Œç„¶åè¿›è¡Œæ›´æ–°ã€‚å¦‚æœäº‹åŠ¡æ‰§è¡Œé¢‘ç¹ï¼Œå…ˆå°è¯•å»è¿‡å»MDLé”ï¼Œä½†å³ä½¿è·å–ä¸åˆ°ï¼Œä¹Ÿä¸èƒ½é˜»å¡æ­£å¸¸çš„äº‹åŠ¡è¿›è¡Œã€‚","like_count":0},{"had_liked":false,"id":176897,"user_name":"æœˆè¿·æ´¥æ¸¡","can_delete":false,"product_type":"c1","uid":1264111,"ip_address":"","ucode":"2B18B2FE3DAC3B","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/ef/02401473.jpg","comment_is_top":false,"comment_ctime":1581218297,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581218297","product_id":100020801,"comment_content":"ä»Šå¤©çš„è¿™ä¸¤ç§è¡¨é”éƒ½æ˜¯å¼•æ“å±‚åšçš„å—ï¼Ÿå¦‚æœæ˜¯æ¯ä¸ªå¼•æ“çš„å®ç°ä¼šä¸ä¸€è‡´ï¼Ÿ","like_count":0},{"had_liked":false,"id":176730,"user_name":"kkk100","can_delete":false,"product_type":"c1","uid":1058666,"ip_address":"","ucode":"4F1887C49556DE","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/6a/34cf9522.jpg","comment_is_top":false,"comment_ctime":1581151149,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1581151149","product_id":100020801,"comment_content":"åˆ†é¡µæŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œå¦‚æœåˆ äº†äº†æ»¡è¶³æ¡ä»¶çš„è®°å½•ï¼ŒæŸ¥è¯¢ç»“æœä¼šå˜åŒ–å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1058666,"avatar":"https://static001.geekbang.org/account/avatar/00/10/27/6a/34cf9522.jpg","nickname":"kkk100","note":"","ucode":"4F1887C49556DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165675,"discussion_content":"å“ªä½é«˜äººå›ç­”ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581313376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176493,"user_name":"å¼ æ±‰æ¡‚-ä¸œè","can_delete":false,"product_type":"c1","uid":1116277,"ip_address":"","ucode":"38657ABA59382A","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/75/512b9f26.jpg","comment_is_top":false,"comment_ctime":1581071693,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581071693","product_id":100020801,"comment_content":"åº”è¯¥æ˜¯å¤‡ä»½æ²¡æœ‰åŒ…å«æ–°å¢çš„å­—æ®µã€‚æˆ‘é€šå¸¸æ¶‰åŠåˆ°è¡¨ç»“æ„å˜æ›´éƒ½æ˜¯å˜æ›´å‰å’Œå˜æ›´åéƒ½åšä¸€æ¬¡å…¨é‡å¤‡ä»½ã€‚","like_count":0},{"had_liked":false,"id":173590,"user_name":"dingsai88","can_delete":false,"product_type":"c1","uid":1029484,"ip_address":"","ucode":"A725428A983ADC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b5/6c/617c0193.jpg","comment_is_top":false,"comment_ctime":1579602344,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579602344","product_id":100020801,"comment_content":"ä¸æ˜¯session Cçš„äº‹åŠ¡å·²ç»é˜»å¡äº†ï¼ŒMDLå†™é”è¿˜æ²¡æœ‰è·å–åˆ°å•Šï¼Œæ€ä¹ˆè¿˜ä¼šé˜»å¡Session Dçš„è¯»æ“ä½œï¼Ÿï¼Ÿï¼Ÿä¸è§£","like_count":0},{"had_liked":false,"id":169898,"user_name":"å‘å¾€çš„ç”Ÿæ´»","can_delete":false,"product_type":"c1","uid":1397298,"ip_address":"","ucode":"0E8DB45357820F","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/32/bb570f48.jpg","comment_is_top":false,"comment_ctime":1578469877,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1578469877","product_id":100020801,"comment_content":"å¯¹æ–‡ä¸­çš„å°æ —å­æœ‰ç‚¹ç–‘é—®ï¼Œç»™ä¸€ä¸ªå°è¡¨æ·»åŠ å­—æ®µçš„æ—¶å€™ï¼ŒsessionCé˜»å¡å¯ä»¥ç†è§£ï¼Œæ€ä¹ˆsessionDä¹Ÿä¼šé˜»å¡ï¼Œè¯»é”ä¸æ˜¯ä¸äº’æ–¥ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138340,"discussion_content":"ä½†æ˜¯è¿™æ˜¯å¯¹åŒä¸€ä¸ªè¡¨è¿›è¡Œå†™é”æ“ä½œäº†ï¼Œå†™é”æ˜¯è¯»å†™é”äº’æ–¥çš„ï¼Œåé¢å³ä½¿æ˜¯è¯»çš„è¯ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¾—ç­‰å†™é”é‡Šæ”¾äº†ï¼Œæ‰èƒ½è·å–è¯»é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579236932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169136,"user_name":"è¿™åªé¸Ÿä¸ä¼šé£","can_delete":false,"product_type":"c1","uid":1434241,"ip_address":"","ucode":"91702816C61DD3","user_header":"https://static001.geekbang.org/account/avatar/00/15/e2/81/2cbb88b1.jpg","comment_is_top":false,"comment_ctime":1578279126,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1578279126","product_id":100020801,"comment_content":"æˆ‘è§‰å¾—å¤‡åº“ä½¿ç”¨-single-transactionåå¼€å¯äº†äº‹åŠ¡ï¼Œ ä¸»åº“çš„DDLæ“ä½œå°†ä¼šè¢«åŒæ­¥åˆ°å¤‡åº“","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138341,"discussion_content":"ä¸ä¼šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579236943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165085,"user_name":"å‚»å‚»çš„å¸…","can_delete":false,"product_type":"c1","uid":1668617,"ip_address":"","ucode":"14A795523A682E","user_header":"https://static001.geekbang.org/account/avatar/00/19/76/09/62a10668.jpg","comment_is_top":false,"comment_ctime":1577158004,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577158004","product_id":100020801,"comment_content":"è¿˜åšäº†ä¸€ä¸ªå®éªŒï¼š<br>mysqlç‰ˆæœ¬ï¼š5.7.20<br>autocommit=on<br>transaction-isolation=repeatable-read<br><br>sessionA: begin;select * from t;<br>sessionB:  begin;select * from t;<br>sessionC:  alter table t add qq varchar(10);<br>sessionD:  begin;select * from t;<br>sessionE:   alter table t drop column qq;<br><br>1ã€sessionAæ‰§è¡Œ(æ­£å¸¸);<br>2ã€sessionBæ‰§è¡Œ(æ­£å¸¸);<br>3ã€sessionCæ‰§è¡Œ(é˜»å¡)<br>4ã€sessionDæ‰§è¡Œ(æ­£å¸¸)<br>5ã€sessionEæ‰§è¡Œ(é˜»å¡)<br><br>åœ¨æ²¡æœ‰sessionEçš„æ—¶å€™ï¼ŒsessionAæäº¤åï¼ŒsessionCæ‰§è¡Œï¼Œè¿™æ—¶å†æŸ¥è¯¢sessionBæé”™(ERROR 1412 (HY000): Table definition has changed, please retry transaction)ï¼Œæ„Ÿè§‰åº”è¯¥è¿™æ—¶è¡¨ä¸Šçš„mdlè¯»é”é‡Šæ”¾äº†,æˆ–æ˜¯è¯»æœ‰æ²¡æœ‰è¿‡æœŸä¸€è¯´ï¼Ÿç»“æœ å°±æ˜¯åœ¨æœ¬æ¬¡äº‹åŠ¡ä¸èƒ½å†å¯¹è¡¨Tè¿›è¡ŒæŸ¥è¯¢ï¼Œå¿…é¡»é‡å¯ä¸€ä¸ªäº‹åŠ¡ï¼›<br>åœ¨æœ‰sessionEçš„æ—¶å€™ï¼ŒsessionAæäº¤åï¼ŒsessionCä»ç„¶å¤„äºé˜»å¡çŠ¶æ€ï¼ŒsessionEä¹Ÿæ˜¯å¤„äºé˜»å¡çŠ¶æ€ï¼›ç„¶åæäº¤sessionB,è¿™æ—¶sessionCã€sessionEæ­£å¸¸æ‰§è¡Œï¼Œè€Œä¸”æ²¡æœ‰æŠ¥é”™(ä¹Ÿå°±æ˜¯å­˜åœ¨ä¸€ä¸ªé”ç­‰å¾…é˜Ÿåˆ—ï¼ŒæŒ‰å…ˆè¿›å…ˆå‡ºçš„é¡ºåºæ‹¿mdlå†™é”ï¼Œç„¶åæ‰§è¡Œ)ï¼›è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºä»€ä¹ˆéœ€è¦sessionAå’ŒsessionBéƒ½æäº¤åï¼ŒsessionCå’ŒsessionEæ‰èƒ½æ‰§è¡Œï¼Ÿè€Œæ²¡æœ‰sessionEçš„æƒ…å†µä¸‹ï¼Œåªè¦sessionAæäº¤ï¼ŒsessionCå°±å¯ä»¥æ‰§è¡Œäº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":165079,"user_name":"å‚»å‚»çš„å¸…","can_delete":false,"product_type":"c1","uid":1668617,"ip_address":"","ucode":"14A795523A682E","user_header":"https://static001.geekbang.org/account/avatar/00/19/76/09/62a10668.jpg","comment_is_top":false,"comment_ctime":1577156933,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577156933","product_id":100020801,"comment_content":"æ¥ä¸Šä¸€æ¡ç•™è¨€ï¼Œæ‰¾äº†å¾ˆä¹…æ²¡æ‰¾åˆ°ï¼Œï¼Œ<br>æˆ‘çš„ç‰ˆæœ¬:5.7.20<br>autocommit=on <br>transaction-isolation=repeatable-read<br><br>sessionAã€Bå…ˆåæ‰§è¡Œï¼Œç”±äºæ˜¯è¯»ï¼Œæ‹¿çš„MDLè¯»é”ï¼Œä¸é˜»å¡ï¼›sessionCæ˜¯ä¿®æ”¹è¡¨ç»“æ„ï¼Œéœ€è¦è¡¨çš„MDLå†™é”ï¼Œå› ä¸ºMDLè¯»å†™åˆ°æ–¥ï¼Œæ‰€ä»¥sessionCé˜»å¡ï¼ŒsessionD éœ€è¦mdlè¯»é”ï¼Œåœ¨æ­¤æ—¶æ²¡æœ‰è¢«é˜»å¡ï¼Œæ­£å¸¸è¿”å›æŸ¥è¯¢ç»“æœ(æ­¤å’Œæ–‡æœ¬ä¸­ç¬¬ä¸€ä¸ªä¸åŒç‚¹)ï¼›<br>ç„¶åcommitäº†session A ,ç»“æœsession C æ‹¿åˆ°äº†mdl å†™é”ï¼Œè¯­å¥æ‰§è¡Œäº†ï¼Œæ­¤æ—¶å†åœ¨sessionBä¸­æŸ¥è¯¢ï¼Œæ­¤æ—¶æŠ¥é”™ï¼š<br>Database changed<br>mysql&gt; begin;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; select * from t;<br>+------+------+------+<br>| id   | name | tel  |<br>+------+------+------+<br>|    1 | a    | NULL |<br>|    2 | b    | NULL |<br>+------+------+------+<br>2 rows in set (0.00 sec)<br><br>mysql&gt; select * from t;<br>ERROR 1412 (HY000): Table definition has changed, please retry transaction<br>è¿™ä¸ªç‰ˆæœ¬çš„mdlé”ç­–ç•¥å‘ç”Ÿäº†æ”¹å˜(è¿™æ˜¯è€å¸ˆç»™å…¶ä»–åŒå­¦ç•™è¨€ä¸­çœ‹åˆ°çš„),æˆ‘æƒ³é—®çš„æ˜¯ï¼Œ5.7.20ç‰ˆæœ¬çš„mdlé”ç­–ç•¥ç°åœ¨æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿï¼ˆæ‰€æœ‰æŸ¥è¯¢å…±äº«ä¸€ä¸ªmdlè¯»é”ï¼Ÿæ‰€æœ‰å†™é”è¿›å…¥é”ç­‰å¾…é˜Ÿåˆ—ï¼Œç­‰åˆ°è¯»é”é‡Šæ”¾ï¼Œä¾æ¬¡å‡ºé˜Ÿï¼Ÿï¼‰","like_count":0},{"had_liked":false,"id":161820,"user_name":"Kyrie","can_delete":false,"product_type":"c1","uid":1183423,"ip_address":"","ucode":"C548CB78393159","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLAqN8yGhXKdbmiaewYGaTtKGYgy8d691LOCRJdDbfW8hDFM5HagwvTJup9p5mNjoPyl0cvapHEyWA/132","comment_is_top":false,"comment_ctime":1576339810,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1576339810","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ æˆ‘æƒ³è¯·æ•™ä¸ªé—®é¢˜<br>mysqlçš„ä¹è§‚é” æ‚²è§‚é” è¿˜æœ‰MVCCæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ<br>æˆ‘ä»¬æ•°æ®åº“é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯RR æ•°æ®åº“å¦‚æœé»˜è®¤æ˜¯ç”¨çš„æ˜¯ä¹è§‚é”çš„çš„è¯ï¼Œæˆ‘åŒæ—¶å¼€ä¸¤ä¸ªäº‹åŠ¡ å¯¹åŒä¸€æ¡è®°å½•ï¼Œå…ˆåupdateï¼Œåupdateçš„é‚£ä¸ªäº‹åŠ¡éœ€è¦ç­‰é”ã€‚ã€‚ä½†æ˜¯ä¹è§‚é”åˆä¸éœ€è¦é”ï¼Œè¿™é‡Œå¾ˆä¸è§£ï¼Œå¸Œæœ›è€å¸ˆèƒ½è§£ç­”ä¸‹å“ˆ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138345,"discussion_content":"ä¹è§‚é”æ˜¯ä¸éœ€è¦é”ï¼Œä½†æ˜¯æœ€åæäº¤çš„æ—¶å€™éœ€è¦åˆ¤æ–­å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579237085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157555,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1575192850,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575192850","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆ. å®šä¹‰ä¸º(c,bï¼‰çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,b,a)<br>ä¸ºå•¥ä¸æ˜¯(c,b,a,b)å‘¢<br>å…¶ä»–æƒ…å†µå¯ä»¥ç†è§£.","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138346,"discussion_content":"ä½ æƒ³å¹²å˜›ï¼Œé”™ä¹±äº†æ˜¯ä¸æ˜¯ã€‚å“ˆå“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579237112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156989,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1575009457,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575009457","product_id":100020801,"comment_content":"â€“c--|â€“a--|â€“ä¸»é”®éƒ¨åˆ†b-- ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œä¸æ˜¯ abï¼Œè€Œæ˜¯åªæœ‰ bï¼‰<br>â€“c--|â€“b--|â€“ä¸»é”®éƒ¨åˆ†a-- ï¼ˆåŒä¸Šï¼‰<br>è¯·é—®ä¸‹,ä¸ºå•¥åªæœ‰ä¸»é”®éƒ¨åˆ†a,æ˜¯å› ä¸ºcbä¸­å·²ç»æœ‰éƒ¨åˆ†bäº†å—<br>","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138350,"discussion_content":"å› ä¸ºéä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹valueéƒ¨åˆ†å­˜çš„æ˜¯ä¸»é”®ï¼Œæ‰€ä»¥ï¼Œcaåšç´¢å¼•ï¼Œä¼šcaabï¼Œå†å°†ä¸»é”®å»é‡ï¼Œä¼šcabï¼Œå¦‚æ­¤çœ‹æ¥ï¼Œé‚£å°±ç›´æ¥å»ºç«‹Cç´¢å¼•ï¼Œcaç´¢å¼•æ²¡å¿…è¦ç•™äº†ï¼Œè¿˜çœç©ºé—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579237256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153769,"user_name":"Geek_b3a962","can_delete":false,"product_type":"c1","uid":1681844,"ip_address":"","ucode":"AC51C9390D32FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZccFBM9wqKWZAicq7rN3tJGaibD9y0d6THJ1lknOGpdCQUjgU85W2XvibxTcaXHPhnRdjPstTamVVJFo2WRibRNB6A/132","comment_is_top":false,"comment_ctime":1574304655,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1574304655","product_id":100020801,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼Œä¸ºå•¥sessionAè¯»é”æ²¡é‡Šæ”¾ï¼ŒsessionDçš„è¯»æ“ä½œä¹Ÿä¼šè¢«é˜»å¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138352,"discussion_content":"å› ä¸ºä½ çš„å†™é”åœ¨ç­‰ç€açš„è¯»é”é‡Šæ”¾ï¼Œè€ŒDçš„è¯»é”å‘ç”Ÿåœ¨Cä¼šè¯ä¹‹åã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579237293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151869,"user_name":"åˆ«å¤©ç¥","can_delete":false,"product_type":"c1","uid":1107606,"ip_address":"","ucode":"42A08D6EF5C59A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e6/96/eb143e46.jpg","comment_is_top":false,"comment_ctime":1573802773,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1573802773","product_id":100020801,"comment_content":"session Aæ²¡æœ‰é‡Šæ”¾MDLè¯»é”ï¼Œsession Cè·å–MDLå†™é”ä¼šè¢«é˜»å¡ï¼Œæˆ‘ä¸æ˜ç™½çš„æ˜¯ï¼šæ­¤æ—¶session Cè¿˜æ²¡æœ‰æˆåŠŸæ‹¿åˆ°å†™é”ï¼Œä¸ºä»€ä¹ˆåé¢çš„æŸ¥è¯¢æ“ä½œä¹Ÿä¼šè¢«é˜»å¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138353,"discussion_content":"å¯¹çš„ï¼Œé”å¯¹åˆ—ï¼Œå› ä¸ºå†™é”æ˜¯è¦å½±å“è¯»å†™é”çš„ï¼Œcæ˜¯å†™é”ï¼Œé‚£åé¢çš„è¯»é”ä¹Ÿè‚¯å®šè¦æŒ‚è…Šè‚ äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579237342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1467758,"avatar":"https://static001.geekbang.org/account/avatar/00/16/65/6e/8b74b1b0.jpg","nickname":"èœé¸Ÿæˆç¥ä¹‹è·¯","note":"","ucode":"7C4ACBE03F6C8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55753,"discussion_content":"ä¸Šé¢è¯„è®ºæœ‰è¯´ï¼Œå› ä¸ºé”é˜Ÿåˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574394922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151725,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1573781977,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573781977","product_id":100020801,"comment_content":"åŸæ¥mysqldumpæœ‰å‚æ•°å®ç°ä¸€è‡´æ€§è¯»ï¼Œç”±äºdumpæ˜¯å¯¼å‡ºæ•°æ®ï¼Œåªè¯»å–ï¼Œæ‰€ä»¥ä¸ä¼šå½±å“DBçš„å†™å…¥ï¼Œå¯¹äºçº¿ä¸Šè¡¨çš„dumpï¼Œè¿™ä¸ªå‚æ•°éå¸¸é‡è¦ï¼Œå› ä¸ºçº¿ä¸Šè¡¨çš„æ•°æ®æ˜¯ä¸æ–­å˜åŒ–çš„ã€‚æˆ‘ä»¬å¯¼å‡ºæ—¶ï¼Œå¸Œæœ›æ•°æ®ä¸€è‡´ã€‚<br>ç”±äºæ˜¯åœ¨äº‹åŠ¡ä¸­ï¼Œä¼šåŠ MDLè¯»é”ï¼Œä¼šé˜»å¡å¯¹è¡¨çš„ä¿®æ”¹ï¼Œè¦ä¿è¯dumpæ—¶ä¸ä¼šæœ‰å…¶å®ƒè¿æ¥ä¿®æ”¹è¡¨ç»“æ„","like_count":0},{"had_liked":false,"id":148004,"user_name":"æ— äº‹å°æ€","can_delete":false,"product_type":"c1","uid":1201981,"ip_address":"","ucode":"0E25135820DCE2","user_header":"https://static001.geekbang.org/account/avatar/00/12/57/3d/e4fa7da1.jpg","comment_is_top":false,"comment_ctime":1572927262,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572927262","product_id":100020801,"comment_content":"æŸ¥è¯¢è¯­å¥çš„ç´¢å¼•é€‰æ‹©é€»è¾‘æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ<br>ä¾‹å­ï¼š<br>1. explain  select * from geek where c=1 order by b;<br>ç»“æœä¸ºï¼š<br>id\tselect_type\ttable\ttype\tpossible_keys\tkey\tkey_len\tref\trows\tExtra<br>1\tSIMPLE\tgeek\tref\tc,c_b\tc\t4\tconst\t1\tUsing where; Using filesort<br>å¯ä»¥çœ‹åˆ°possible_keysä¸ºc,c_bä½¿ç”¨çš„æ˜¯ç´¢å¼•cè€Œä¸æ˜¯é€‰æ‹©ä½¿ç”¨ç´¢å¼•c_bï¼Œè¿™æ˜¯ä¸ªä»€ä¹ˆé€‰æ‹©é€»è¾‘ï¼Ÿ<br>2. explain  select * from geek use index (c_b) where c=1 order by b; <br>åªæœ‰æŒ‡å®šç´¢å¼•ä¹‹åæ‰ä¼šä½¿ç”¨ç´¢å¼•c_bï¼Œextra ç›´æ¥ä½¿ç”¨ç´¢å¼•æ’åºè€Œä¸æ˜¯ä½¿ç”¨use filesort<br>ç»“æœï¼š<br>id\tselect_type\ttable\ttype\tpossible_keys\tkey\tkey_len\tref\trows\tExtra<br>1\tSIMPLE\tgeek\tref\tc_b\tc_b\t4\tconst\t1\tUsing where<br><br>å¸Œæœ›èƒ½å¾—åˆ°è§£ç­” è°¢è°¢","like_count":0},{"had_liked":false,"id":147340,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1572860004,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572860004","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ä¹‹å‰é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæ±‚æ•™ã€‚ç»™ä¸€å¼ å°è¡¨Aï¼ˆè¡¨ä¸­è®°å½•æ•°å¾ˆå°‘ï¼‰åŠ å­—æ®µnameï¼Œhangä½äº†ï¼Œç”¨processlistæŸ¥çœ‹ï¼Œæç¤ºwaiting for MDLï¼Œä½†innodb_trxè¡¨ä¸ºç©ºï¼Œæˆ‘æŸ¥evevts_statements_currentè¡¨ï¼Œé‡Œé¢å‘ç°ä¸€æ¡ä¹‹å‰çš„æŸ¥è¯¢é”™è¯¯è®°å½•ï¼Œæç¤ºAè¡¨æ²¡æœ‰ageå­—æ®µã€‚æˆ‘æŠŠè¿™æ¡è®°å½•å¯¹åº”çš„è¿›ç¨‹killæ‰åï¼Œå†æ‰§è¡Œæ’å…¥å°±æˆåŠŸäº†ã€‚æˆ‘çš„ç†è§£æ˜¯ï¼šè¿™æ¡é”™è¯¯çš„æŸ¥è¯¢åº”è¯¥æ˜¯ä¸€ä¸ªæœªæäº¤çš„äº‹åŠ¡å§ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œä¸ºä½•innodb_trxä¸­æ²¡æœ‰è®°å½•å‘¢","like_count":0},{"had_liked":false,"id":145237,"user_name":"yc","can_delete":false,"product_type":"c1","uid":1670122,"ip_address":"","ucode":"2E01505284DC4E","user_header":"https://static001.geekbang.org/account/avatar/00/19/7b/ea/a64f7822.jpg","comment_is_top":false,"comment_ctime":1572234635,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1572234635","product_id":100020801,"comment_content":"è€å¸ˆè¿™é‡Œå¥½åƒæ²¡æœ‰è¯´åˆ°ï¼Œå½“updateæ—¶ç´¢å¼•ä¸åŒ¹é…ä¹Ÿä¼šé”å…¨è¡¨","like_count":0,"discussions":[{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298319,"discussion_content":"ç´¢å¼•ä¸åŒ¹é…ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ\n\næ¯”å¦‚æœ‰æ™®é€šç´¢å¼•æˆ–è€…å”¯ä¸€ç´¢å¼•a ï¼Œsqlæ˜¯ update f = 1 where a = 100ï¼Œ\nå‡è®¾å½“å‰açš„æœ€å¤§å€¼æ˜¯90ï¼Œé‚£ä¹ˆ100ä¸å­˜åœ¨ï¼Œé”çš„æ˜¯æ˜¯[90ï¼Œsupremum] æˆ–è€…è¯´ï¼ˆ90ï¼Œæ­£æ— ç©·]","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597244466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1467758,"avatar":"https://static001.geekbang.org/account/avatar/00/16/65/6e/8b74b1b0.jpg","nickname":"èœé¸Ÿæˆç¥ä¹‹è·¯","note":"","ucode":"7C4ACBE03F6C8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55755,"discussion_content":"ä¸€è¡Œä¸€è¡Œçš„å¯¹æ‰€æœ‰çš„è¡ŒåŠ äº†è¡Œé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574395098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144402,"user_name":"æœªæ¥æ€æ ·","can_delete":false,"product_type":"c1","uid":1652085,"ip_address":"","ucode":"4E54EB62595B27","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKORTofsU89GYKtywquzKuEiabvZnEOonfMYKuCPlo8GDlXqZuJdBicu0XtlaeodH4BnmHV1kldSAwQ/132","comment_is_top":false,"comment_ctime":1571911819,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571911819","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ è¯´caçš„æ ‘ç»“æ„å’Œcçš„æ˜¯ä¸€è‡´çš„ï¼Œè¿™ä¸€ç‚¹æˆ‘æœ‰ç‚¹ç–‘é—®ï¼Œå½“ä½¿ç”¨caçš„æ—¶å€™ï¼Œæ˜¯æŒ‰ç…§ä½ ä¸Šé¢ç»™æˆ‘çš„é¡ºåºï¼Œè¿™ç‚¹èƒ½ç†è§£ï¼Œä½†æ˜¯å½“åªæœ‰cçš„æ—¶å€™å¦‚ä½•èƒ½ä¿è¯æ˜¯3 1 2 å’Œ 3 2 1çš„é¡ºåºå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":143735,"user_name":"å¹¼å„¿ç¼–ç¨‹æ•™å­¦","can_delete":false,"product_type":"c1","uid":1237199,"ip_address":"","ucode":"F13F3150E6CAE9","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/cf/43f201f2.jpg","comment_is_top":false,"comment_ctime":1571784783,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571784783","product_id":100020801,"comment_content":"è€å¸ˆï¼Œç°åœ¨MySQL8ï¼ŒåŠ å­—æ®µéƒ½æ˜¯ç§’çº§çš„ã€‚é‚£æ˜¯å› ä¸ºæ”¹è¿›äº†å“ªä¸€éƒ¨åˆ†?è¿™ä¸ªmdlåº”è¯¥è¿˜æ˜¯å­˜åœ¨çš„ï¼Œæ˜¯å§?","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138355,"discussion_content":"å­˜åœ¨ï¼Œåº”è¯¥æ˜¯æœ‰å¿«é€ŸåŠ å­—æ®µåŠŸèƒ½å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579237450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143601,"user_name":"æ–æ³¢é‚£å¥‘","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1571741593,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571741593","product_id":100020801,"comment_content":"è€å¸ˆ æƒ³é—®ä¸ªé—®é¢˜ ä½œä¸ºæ•°æ®åº“å¸¦é” ç¨‹åºæœ¬èº«ä¹Ÿæœ‰é”çš„åº”ç”¨ é‚£å¯¹äºå¹¶å‘æ¥è¯´æ˜¯ç”¨æ•°æ®åº“çš„é”å¥½è¿˜æ˜¯åœ¨åº•å±‚åå°ç”¨ç¼–ç¨‹è¯­è¨€çš„é”æ¥æ§åˆ¶å¹¶å‘å¥½å‘¢ æœ›è€å¸ˆç»™ç‚¹å»ºè®®","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138356,"discussion_content":"èƒ½ç”¨ç¨‹åºæ§åˆ¶ä½çš„ï¼Œå°½é‡ä¸è¦è®©å¼‚å¸¸å‘ç”Ÿåœ¨æ•°æ®å±‚é¢ï¼Œä»¥å‡å°‘æ•°æ®åº“å‹åŠ›ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579237498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142435,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1303038,"ip_address":"","ucode":"30D659BD4BD0AA","user_header":"","comment_is_top":false,"comment_ctime":1571368180,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571368180","product_id":100020801,"comment_content":"&quot;ps å®šä¹‰ä¸º(c,bï¼‰çš„ç´¢å¼•ï¼Œå®é™…ä¸Šæ˜¯ï¼ˆc,b,a)&quot;ï¼Œè¿™ä¸ªä¸å¤ªç†æƒ³ï¼Œä¸ºä»€ä¹ˆä¸»å¥è¿˜èƒ½åè¿‡æ¥æ”¾ï¼Œå¦‚æœå®šä¹‰ä¸€ä¸ªç´¢å¼•å«c,bï¼Œé‚£å®ƒä¼šä¸ä¼šæ˜¯ä¿å­˜äº†ï¼šc,b,a,bå‘¢ï¼Ÿï¼Œå¦‚æœè¯´åªæ˜¯ä¿å­˜äº†ï¼ˆc,b,a)ï¼Œè¯´æ˜åšäº†ä¼˜åŒ–ï¼Œç‰¹åˆ«å¤„ç†äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":139918,"user_name":"wu","can_delete":false,"product_type":"c1","uid":1537426,"ip_address":"","ucode":"136FABF86EA66A","user_header":"https://static001.geekbang.org/account/avatar/00/17/75/92/fc393653.jpg","comment_is_top":false,"comment_ctime":1570765825,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570765825","product_id":100020801,"comment_content":"é’ˆå¯¹MDLé”ï¼Œæˆ‘çªç„¶å»oracleå®éªŒäº†ä¸‹ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š<br>ä¼šè¯Aï¼šupdate t set user_id = user_id +0 where user_id &lt;=30;<br>ä¼šè¯Bï¼šalter table t add col1 number;  --è¯¥è¯­å¥è¢«é˜»å¡äº†<br>ä¼šè¯Cï¼šselect count(*) from t; --å¯ä»¥æ­£å¸¸è·å–ç»“æœ<br>             update t set user_id = user_id +0 where user_id &gt;30; --ä¹Ÿå¯ä»¥æ­£å¸¸æ›´æ–°<br>             select col1 from t;  --æŠ¥é”™ï¼Œ&quot;COL1&quot;: invalid identifier<br>é—®é¢˜å°±åœ¨ä¼šè¯Cå¯¹äºå…ƒæ•°æ®é”å¤„ç†çš„ä¸åŒï¼Œoracleé‚£è¾¹å› ä¸ºä¼šè¯Bè¿˜æ²¡æ‰§è¡Œï¼Œæ‰€ä»¥å¯¹äºä¼šè¯Cæ¥è¯´ï¼Œå…¶ä¸Šé¢æ˜¯ä¸å­˜åœ¨å…ƒæ•°æ®å†™é”çš„ï¼Œä¸éœ€è¦æ’é˜Ÿï¼Œä¹Ÿæ˜¯åŒæ—¶æœ‰å¾ˆå¤šè¯­å¥å…¶å®æ˜¯ä¸æ¶‰åŠæ–°åŠ çš„åˆ—çš„ï¼Œå¹¶å‘æ€§ä¼šè¾ƒå¥½ã€‚è€Œmysqlè¿™è¾¹å´éœ€è¦ç­‰å¾…ä¼šè¯Bçš„å†™é”ï¼Œè¿™æ ·è®¾è®¡çš„æ„ä¹‰åœ¨å“ªé‡Œï¼Œå’Œoracleæ¯”è¾ƒçš„è¯ï¼Œæ„Ÿè§‰oracleé‚£ç§æ–¹å¼æ›´å¥½ä¸€äº›ã€‚","like_count":0},{"had_liked":false,"id":138118,"user_name":"ä¸ºä½ å†™ä¸‹å¤©è¾¹çš„çœ·é¡¾","can_delete":false,"product_type":"c1","uid":1305110,"ip_address":"","ucode":"E09C81804F6D44","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/16/0eb1cc5a.jpg","comment_is_top":false,"comment_ctime":1570028671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570028671","product_id":100020801,"comment_content":"è€å¸ˆæœ‰æ²¡æœ‰å¥½çš„åˆ†åº“åˆ†è¡¨æ¡ˆä¾‹ä»¥åŠpxcæ¡ˆä¾‹","like_count":0},{"had_liked":false,"id":137944,"user_name":"å·¦çª","can_delete":false,"product_type":"c1","uid":1468773,"ip_address":"","ucode":"6B797070168A12","user_header":"https://static001.geekbang.org/account/avatar/00/16/69/65/eb778125.jpg","comment_is_top":false,"comment_ctime":1569933018,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1569933018","product_id":100020801,"comment_content":"å¯¹äºä¸Šä¸€æœŸçš„é—®é¢˜ï¼Œä¸ºå•¥ç´¢å¼•cå’Œç´¢å¼•cï¼Œaæ˜¯ç­‰ä»·ï¼Œç´¢å¼•cçš„éå¶å­èŠ‚ç‚¹ä¸æ˜¯åªæœ‰cä¹ˆï¼Œè€Œç´¢å¼•cï¼Œaéå¶å­èŠ‚ç‚¹ä¼šæœ‰cï¼Œaå‘€ï¼Œæ€ä¹ˆä¼šæ˜¯ç­‰ä»·çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138357,"discussion_content":"è¿™ä¸ªä½ å¯ä»¥å†çœ‹çœ‹ç´¢å¼•ä¸Šä¸‹é›†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579237534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135937,"user_name":"stephen","can_delete":false,"product_type":"c1","uid":1313562,"ip_address":"","ucode":"68BEAF653814E7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/eyzvWHuvEwziby6ZsvRhF0l174d3jFZ4gRjOrUzX6uVRP2DLiaAnBVLzaia8ayaPRIhHYnnOusd2XB6wYDAscGIMA/132","comment_is_top":false,"comment_ctime":1569309529,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569309529","product_id":100020801,"comment_content":"æˆ‘ç”¨mariadb 10.4.8æµ‹è¯•åˆšæ‰çš„mdlæ•ˆæœä¸åŒï¼š<br>1. å…ˆè¿™æ ·æµ‹è¯•ï¼š<br>    session A: begin; select * from T limit 1;<br>    session B: select * from T limit 1; æ­£å¸¸æ‰§è¡Œï¼Œä¸é˜»å¡<br>    session C: alter table T add f int; é˜»å¡<br>    session D: select * from T limit 1; æ­£å¸¸æ‰§è¡Œï¼Œä¸é˜»å¡<br>å’Œä¸Šé¢çš„ç»“æœä¸åŒï¼Œç„¶åæˆ‘çœ‹äº†ä¸Šé¢çš„ç•™è¨€ï¼Œå‘ç°ï¼Œå’Œæˆ‘çš„ä¸åŒï¼Œç„¶åæˆ‘åˆæŒ‰ç…§å¦‚ä¸‹çš„æµ‹è¯•äº†ä¸€éï¼š<br>    session A: begin; select * from T limit 1;<br>    session B: begin; select * from T limit 1; æ­£å¸¸æ‰§è¡Œï¼Œä¸é˜»å¡<br>    session C: begin; alter table T add f int; é˜»å¡<br>    session D: begin; select * from T limit 1; æ­£å¸¸æ‰§è¡Œï¼Œä¸é˜»å¡<br>å’Œä¸Šé¢çš„æµ‹è¯•ç›¸åŒï¼Œä½†æ˜¯å½“æˆ‘åœ¨session Aæˆ–è€…session Bä¸­è¾“å…¥commitçš„æ—¶å€™éƒ½èƒ½è§¦å‘session Cçš„é˜»å¡ç»§ç»­æ‰§è¡Œã€‚<br>    è¿™é‡Œæœ‰å¦‚ä¸‹ç–‘é—®ï¼šmariadbéš¾é“åšäº†ä¼˜åŒ–ï¼Œå¦‚æŒæœ‰è¯»é”ï¼Œæœªé‡Šæ”¾ï¼Œå†™é”åˆ™é˜»å¡ï¼Œåç»­çš„è¯»é”ï¼Œä¸é˜»å¡ï¼Ÿ<br>     è¯»é”å¯¹äºæ‰€æœ‰çš„sessionä¸€ä¸ªè¡¨åªæœ‰ä¸€ä¸ªï¼Œäº‹åŠ¡æ— è®ºè°æäº¤äº†ï¼Œéƒ½èƒ½è§£è¯»é”ï¼Œæ‰€ä»¥åé¢çš„è¯•éªŒæ— è®ºæäº¤Aè¿˜æ˜¯Bäº‹åŠ¡ï¼Œéƒ½ä¼šè§¦å‘è§£è¯»é”ï¼ŒCäº‹ç‰©å†™é”è·å–åˆ°ï¼Œå‘ä¸‹æ‰§è¡Œã€‚<br>","like_count":0},{"had_liked":false,"id":135479,"user_name":"ç”Ÿå‘½ç»ƒä¹ ç”Ÿ","can_delete":false,"product_type":"c1","uid":1108066,"ip_address":"","ucode":"BCDA541EE0DB54","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/62/2333d77a.jpg","comment_is_top":false,"comment_ctime":1569194539,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1569194539","product_id":100020801,"comment_content":"MDLé”å’Œè¯»å†™æ„å‘é”æ˜¯ä»€ä¹ˆå…³ç³»ï¼Œè¯»å†™æ„å‘é”ä¹Ÿæ˜¯åœ¨åšDMLæ“ä½œæ—¶å€™åŠ çš„é”","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138359,"discussion_content":"æ„å‘é”æ˜¯è¡¨çº§é”ï¼Œæ˜¯å®ç°åœ¨Innodb çš„ã€‚æœ‰äº†mdlé”ä½ å¯ä»¥ä¸ç”¨å…³æ³¨æ„å‘é”äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579237644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131064,"user_name":"Geek_b74670","can_delete":false,"product_type":"c1","uid":1649282,"ip_address":"","ucode":"083AF837FB0112","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLGAV2NgUo0VVNjiagIJCZmPHvogtAJcUib6icLCbR4vcvfziashHZjpZ0FUxSdawFnHGUSmIaePvDaWQ/132","comment_is_top":false,"comment_ctime":1567619632,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1567619632","product_id":100020801,"comment_content":"å…³äºè¯»é”å’Œå†™é”æœ‰ä¸ªé—®é¢˜å’¨è¯¢ä¸‹ï¼Œæœ¬æ–‡æ‰€è¿°&quot;<br>è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥&quot;ï¼Œåœ¨å…¶ä»–èµ„æ–™æè¿°ä¸­ï¼ˆ<br>https:&#47;&#47;www.aneasystone.com&#47;archives&#47;2017&#47;11&#47;solving-dead-locks-two.htmlï¼‰ï¼Œéƒ½æåŠè¯»é”æ˜¯ä¸èƒ½å†™è¡¨çš„ï¼Œæ˜¯ä¸æ˜¯å’Œæœ¬æ–‡æè¿°çš„è¯»é”ä¸ä¸€è‡´å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10182,"discussion_content":"1. ä½ å¼•ç”¨çš„æ–‡ç« é‡Œé¢æåˆ°äº†è¿™å¥è¯: lock table products read, orders read;  \nè¿™å¥è¯è¯´çš„æ„æ€å°±æ˜¯å½“ç„¶çº¿ç¨‹æ‹¿åˆ°äº†productsçš„è¯»é”ï¼Œä»¥åŠordersçš„è¯»é”ï¼Œå¯¹è¿™2ä¸ªè¡¨åªæœ‰è¯»çš„æƒé™ï¼Œæ²¡å†™çš„æƒé™ã€‚å½“ç„¶å½“å‰çº¿ç¨‹å¯¹åˆ«çš„è¡¨æ›´å•¥æƒé™(è¯»å†™)ä¹Ÿæ²¡æœ‰.\n2. è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥ã€‚è¿™ä¸ªè¯´çš„æ˜¯mdlé”ï¼Œä½ å¼•ç”¨çš„æ–‡ç« é‡Œé¢è¯´çš„æ˜¯lock tableé”ï¼Œ2ä¸ªä¸åŒçš„ä¸œè¥¿ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568272936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10184,"discussion_content":"3. å¦‚æœæ˜¯lock tableè¿™ç§è¡¨é”çš„è¯ï¼Œä¸åŒçš„çº¿ç¨‹å¯¹åŒä¸€ä¸ªè¡¨çš„è¯»å†™æ˜¯äº’æ–¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568273137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130961,"user_name":"Geek_b74670","can_delete":false,"product_type":"c1","uid":1649282,"ip_address":"","ucode":"083AF837FB0112","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLGAV2NgUo0VVNjiagIJCZmPHvogtAJcUib6icLCbR4vcvfziashHZjpZ0FUxSdawFnHGUSmIaePvDaWQ/132","comment_is_top":false,"comment_ctime":1567584423,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1567584423","product_id":100020801,"comment_content":"å¯ä»¥å¯¹mysqlçš„é”æœºåˆ¶å•ç‹¬å†™ä¸€ç¯‡è¯¦ç»†çš„æ–‡ç« ä¸ï¼Ÿå¥½å‡ ç¯‡æ–‡ç« æåˆ°äº†ä¸åŒçš„é”æ¦‚å¿µ","like_count":0},{"had_liked":false,"id":127135,"user_name":"ä¸ƒå·å½","can_delete":false,"product_type":"c1","uid":1235812,"ip_address":"","ucode":"0CB7E5C3297511","user_header":"https://static001.geekbang.org/account/avatar/00/12/db/64/f9628492.jpg","comment_is_top":false,"comment_ctime":1566567181,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566567181","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œå…³äºMDLè¯»é”æŠŠå†™é”é˜»å¡åï¼Œä¹‹åçš„MDLè¯»é”ä¹Ÿä¼šè¢«é˜»å¡çš„ä¾‹å­ï¼Œæˆ‘åœ¨MySQL 8.0.17ç‰ˆæœ¬ä¸Šä¹Ÿå¤ç°äº†è¯„è®ºä¸­è¯´çš„é—®é¢˜ï¼šçº¿ç¨‹Dçš„selectä¼šåœ¨çº¿ç¨‹Aå’Œçº¿ç¨‹Bæäº¤åè¢«æ‰§è¡Œï¼Œåªæœ‰çº¿ç¨‹Dæäº¤ä¹‹åï¼Œçº¿ç¨‹Cçš„alter tableæ‰ä¼šè¢«æ‰§è¡Œï¼›ä½†æ˜¯ä¼¼ä¹è€å¸ˆä¹‹åæ²¡æœ‰ç­”å¤è¿™ä¸ªé—®é¢˜ï¼ˆå¯èƒ½æˆ‘çœ‹æ¼äº†...?ï¼‰ã€‚<br>æˆ‘å°è¯•ä½¿ç”¨ProfileæŸ¥çœ‹è¯­å¥æ‰§è¡Œæƒ…å†µï¼Œå‘ç°alter tableçš„é”ç­‰å¾…æ˜¯é€šè¿‡æ¯æ¬¡æ‰§è¡Œä¸€ç§’ï¼ŒæœªæˆåŠŸæ‹¿åˆ°é”å°†ä¼šè¿›è¡Œé‡è¯•è¿™æ ·çš„é€»è¾‘æ‰§è¡Œçš„ï¼›æˆ‘å°è¯•é˜…è¯»ä»£ç ï¼Œç¡®å®å‘ç°æœ‰è¿™æ ·çš„é€»è¾‘ï¼ˆæ²¡æ·±ç©¶æ²¡æœ‰çœ‹æ‡‚è¿›å…¥æ¡ä»¶æˆ–è€…æ˜¯alter tableæ€ä¹ˆèµ°è¿›æ¥çš„ï¼Œä½†æ˜¯æ ¹æ®performance_schema.event_stages_historyçš„sourceæ‰¾åˆ°æ˜¯è¿™é‡Œ[mdl.cc:timed_wait()]è¾“å‡ºprofileçš„ï¼‰ã€‚ä¸çŸ¥é“è¿™æ ·çš„æ‰§è¡Œæƒ…å†µä¼šä¸ä¼šå’Œè¿™ä¸ªé€»è¾‘ç›¸å…³ï¼Ÿ<br>å› ä¸ºä¸çŸ¥é“æ€ä¹ˆç€æ‰‹çœ‹æºç ï¼Œç›®å‰è¿˜æ²¡èƒ½çœ‹æ‡‚ä»£ç é‡Œé¢å¯¹é”ç­‰å¾…çš„å®ç°ï¼Œæ¯”å¦‚é”æ˜¯æ€ä¹ˆåšåˆ°åœ¨å¯ä»¥ç”³è¯·åˆ°é”çš„æ—¶å€™ç»§ç»­æ‰§è¡Œçš„ã€‚<br>ä¸çŸ¥é“è¿™é‡Œé¢çš„é—®é¢˜æ˜¯å¦å¯ä»¥è§£ç­”ä¸€ä¸‹ï¼Œè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1235812,"avatar":"https://static001.geekbang.org/account/avatar/00/12/db/64/f9628492.jpg","nickname":"ä¸ƒå·å½","note":"","ucode":"0CB7E5C3297511","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6040,"discussion_content":"ä»Šå¤©å†çœ‹äº†ä¸€ä¸‹ï¼Œsys.schema_table_lock_waitsè¿™ä¸ªè§†å›¾ï¼Œæ˜¾ç¤ºalter tableçš„çº¿ç¨‹block pidåˆ†åˆ«æ˜¯çº¿ç¨‹aã€çº¿ç¨‹bå’Œè‡ªå·±çº¿ç¨‹cï¼Œåæ¥æäº¤çº¿ç¨‹aã€cã€dä¹‹åè¿™ä¸ªè§†å›¾æ˜¾ç¤ºalter tableçš„block pidæ˜¯è‡ªå·±çº¿ç¨‹cå’Œçº¿ç¨‹dï¼Œä¸çŸ¥é“è¿™ä¸ªç°è±¡ä¼šä¸ä¼šå’Œå¯¼è‡´ä¸Šé¢è¯´çš„æ‰§è¡Œæƒ…å†µæœ‰å…³ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566636149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126613,"user_name":"å†›","can_delete":false,"product_type":"c1","uid":1103051,"ip_address":"","ucode":"A93C8C998D9B6C","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/cb/b07f99d4.jpg","comment_is_top":false,"comment_ctime":1566436360,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566436360","product_id":100020801,"comment_content":"æˆ‘è§‰å¾—Session Cè¿˜æ²¡æœ‰çœŸçš„æ‹¿åˆ°MDLå†™é”,æŒ‰ç†è¯´ä¸ä¼šé˜»å¡Session Dçš„ï¼Œåº”è¯¥æ˜¯session Då…ˆè·å–åˆ°MDLè¯»é”ï¼Œä¸ä¼šè¢«é˜»å¡ã€‚","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138367,"discussion_content":"ä¼šè¯dæ˜¯åœ¨ä¼šè¯cä¹‹åçš„ï¼Œè¿™ä¸ªcæ²¡æ‹¿åˆ°ï¼Œè¯´æ˜cæ²¡å‘ç”Ÿå‘¢ï¼Œdä¹Ÿæ²¡å‘ç”Ÿå‘¢ï¼Œè¿™æ˜¯æœ‰åœºæ™¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579238766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124886,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1566008350,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566008350","product_id":100020801,"comment_content":"æ•°æ®åº“çš„é”ï¼Œåˆ†æˆ3çº§ï¼Œå…¨å±€é”ï¼Œè¡¨é”å’Œè¡Œé”ï¼Œ1 å…¨å±€é”ï¼Œ1.1æ˜¯å¯¹æ•°æ®åº“å®ä¾‹åŠ é”ï¼Œflush tables with read lock ï¼ŒFTWRL åªèƒ½è¯»ï¼Œåº“å¤„äºreadonlyçŠ¶æ€ï¼Œä¿è¯æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ï¼Œ1.2 FTWRLæ”¯æŒinnodbå’Œmyisamå¼•æ“ï¼Œå®˜æ–¹è‡ªå¸¦çš„mysqldumpä¸æ”¯æŒmyisamå¼•æ“ï¼Œ1.3 set global readonly=true ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ï¼Œä¸€æ˜¯ä¸€èˆ¬ç”¨è¿™ä¸ªåˆ¤æ–­åšåªè¯»åº“åˆ¤æ–­ äºŒæ˜¯FTWRLå½“å®¢æˆ·ç«¯è¿æ¥è¶…æ—¶ï¼Œä¼šåˆ‡æ¢æˆè¯»å†™çŠ¶æ€ è€Œset globalä¸è¡Œ 1.4è®¾ç½®åªè¯»ä¹‹åDMLå’ŒDDLéƒ½ä¸è¡Œ2 è¡¨çº§é”æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è¡¨é”ï¼Œä¸€ç§æ˜¯å…ƒæ•°æ®é” meta data lock MDLï¼Œ2.1 lock table .. read&#47;writeï¼Œreadæ˜¯è¯´æ‹¿åˆ°äº†è¯»é”ï¼Œè‡ªå·±å’Œå…¶ä»–çº¿ç¨‹éƒ½åªèƒ½è¯»ï¼Œwriteæ˜¯å½“å‰çº¿ç¨‹æ‹¿åˆ°äº†è¯»å†™é”ï¼Œèƒ½è¯»å†™ï¼Œå…¶ä»–çº¿ç¨‹ä¸å¯ä»¥è¯»å†™ã€‚2.2 MDLé” å½“å¯¹è¡¨åšå¢åˆ æ”¹æŸ¥çš„æ—¶å€™åŠ MDLè¯»é”ï¼Œå½“æ”¹è¡¨ç»“æ„çš„æ—¶å€™åŠ MDLå†™é”ï¼Œè¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œè¯»å†™é”å’Œå†™é”ä¹‹é—´äº’æ–¥ï¼Œå°è¡¨åŠ å­—æ®µï¼Œå¯¼è‡´æ•´ä¸ªåº“æŒ‚æ‰ï¼Œè¯»å†™é¢‘ç¹çš„å°è¡¨ï¼Œselectè¯»é”ï¼Œç„¶ä¿®æ”¹è¡¨ç»“æ„ä¼šæŒæœ‰MDLå†™é”ï¼Œä¼šç­‰å¾…ï¼Œå¦‚æœè¿˜æœ‰åç»­çš„è¯»æ“ä½œï¼Œä¹Ÿä¼šè¯»ç­‰å¾…ï¼Œå¦‚æœå®¢æˆ·ç«¯æœ‰é‡è¯•æ“ä½œï¼Œä¼šå¯¼è‡´çº¿ç¨‹çˆ†æ»¡ã€‚å¦‚ä½•åŠ è¿™å­—æ®µï¼ŒåŠ å­—æ®µè®¾å®šç­‰å¾…æ—¶é—´ï¼Œalter table wait n add columnã€‚","like_count":0},{"had_liked":false,"id":124203,"user_name":"ä¸å·¥","can_delete":false,"product_type":"c1","uid":1462843,"ip_address":"","ucode":"A8725E6D0E1765","user_header":"https://static001.geekbang.org/account/avatar/00/16/52/3b/f1501d79.jpg","comment_is_top":false,"comment_ctime":1565834292,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565834292","product_id":100020801,"comment_content":"MDLçš„è¯»å†™é”å’Œä¸€èˆ¬çš„è¯»å†™é”ï¼ˆå¢ï¼Œåˆ æ”¹æ˜¯åŠ å†™é”ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè¿™ä¸¤ç§é”å…ˆåé¡ºåºæ˜¯ä»€ä¹ˆ","like_count":0},{"had_liked":false,"id":124190,"user_name":"ä¸å·¥","can_delete":false,"product_type":"c1","uid":1462843,"ip_address":"","ucode":"A8725E6D0E1765","user_header":"https://static001.geekbang.org/account/avatar/00/16/52/3b/f1501d79.jpg","comment_is_top":false,"comment_ctime":1565833338,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565833338","product_id":100020801,"comment_content":"mvccå’Œé”ä»€ä¹ˆå…³ç³»ï¼Œmvccä¸æ˜¯ä¹Ÿèƒ½åšå¹¶å‘æ§åˆ¶å—ï¼Ÿè¿˜æœ‰å†™é”blockäº†ï¼Œè¯»é”å°±è¿›è¡Œä¸ä¸‹å»äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138370,"discussion_content":"ä¸¤ä¸ªå±‚é¢çš„ä¸œè¥¿ã€‚å†™é”blockï¼Œè¯»é”æ˜¯è¿›è¡Œä¸ä¸‹å»çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579238922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123712,"user_name":"æœ¨å­","can_delete":false,"product_type":"c1","uid":1390997,"ip_address":"","ucode":"66B9C493F25B11","user_header":"https://static001.geekbang.org/account/avatar/00/15/39/95/a72ef023.jpg","comment_is_top":false,"comment_ctime":1565746076,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565746076","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼ŒMYSQLä¸æ”¯æŒ nowait &#47; wait n è¯­æ³•ï¼Œé‚£ä¹ˆmysqlåˆå¦‚ä½•ç»™å¤§è¡¨ çƒ­è¡¨æ·»åŠ å­—æ®µæ¥é¿å…æ•°æ®åº“æŒ‚æ‰å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138371,"discussion_content":"å¯ä»¥ç”¨ghostï¼Œæˆ–è€…8.0çš„å¿«é€ŸåŠ å­—æ®µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579238973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121275,"user_name":"æˆ‘å®¶é—¨å‰æœ‰åªçŒª","can_delete":false,"product_type":"c1","uid":1488035,"ip_address":"","ucode":"F8CF618CF4681E","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/a3/a159ca86.jpg","comment_is_top":false,"comment_ctime":1565092385,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565092385","product_id":100020801,"comment_content":"MDLè¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œé‚£ä¸€ä¸ªçº¿ç¨‹åœ¨å¢åˆ æ”¹ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æŸ¥ã€‚è¿™æ ·ä¸æ˜¯ä¹Ÿä¸å‡†ç¡®å—","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138372,"discussion_content":"æ˜¯å¯¹äºè¡¨è€Œè¨€ï¼Œå¦‚æœä½ è¦å¯¹ä¸€è¡Œæ•°æ®åŒæ—¶æ“ä½œï¼Œé‚£è‚¯å®šæ˜¯äº’æ–¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120471,"user_name":"èƒ¡å°ç¦¾","can_delete":false,"product_type":"c1","uid":1132315,"ip_address":"","ucode":"1C23B7492C0C9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","comment_is_top":false,"comment_ctime":1564909394,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564909394","product_id":100020801,"comment_content":"å…¨å±€é”ï¼Œä¸æ˜¯é’ˆå¯¹ schema ï¼Œè€Œæ˜¯å®ä¾‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138373,"discussion_content":"æœ‰å•¥åŒºåˆ«ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119085,"user_name":"è·ƒæ–‡","can_delete":false,"product_type":"c1","uid":1019868,"ip_address":"","ucode":"F3F7C4A965E47F","user_header":"","comment_is_top":false,"comment_ctime":1564500825,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564500825","product_id":100020801,"comment_content":"å…³äº Session C å’Œ Session D è·å–é”çš„ä¼˜å…ˆçº§é—®é¢˜ å¥½åƒæ²¡æœ‰çœ‹åˆ°åç»­çš„å›å¤ï¼Ÿ æ±‚è§£æƒ‘ã€‚ æ˜¯5.7 ä¿®æ”¹äº†å®ç°å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138377,"discussion_content":"cä¼šè¯é‡Šæ”¾ï¼Œdè·å–å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118603,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1564394416,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564394416","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒMDLçš„é˜»å¡æ¨¡å¼å’Œjavaé‡Œçš„è¯»å†™é”æ¨¡å¼å¥½åƒä¸å¤ªä¸€æ ·ï¼Œjavaé‡Œè·å–ä¸åˆ°å†™é”ä¼šè¿›å…¥å†™é”çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œä½†æ˜¯åé¢çš„çº¿ç¨‹è¿˜æ˜¯èƒ½ç»§ç»­è¯»çš„","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138379,"discussion_content":"æ€ä¹ˆå¯èƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118602,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1564394303,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564394303","product_id":100020801,"comment_content":"ä¾‹å­é‡Œï¼Œsession Cé˜»å¡æ—¶æ˜¯å·²ç»æ‹¿åˆ°äº†å†™é”äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138381,"discussion_content":"å¦‚æœå®ƒæ²¡æ‹¿åˆ°è¯´æ˜bæ²¡æäº¤äº‹åŠ¡å‘¢ã€‚å¦‚æœæ‹¿åˆ°äº†ï¼Œé‚£è¯´æ˜DDLæ“ä½œæ—¶é—´é•¿è€Œé˜»å¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118587,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1564392647,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564392647","product_id":100020801,"comment_content":"MDLè¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥ã€‚è¿™å¥è¯æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼ŒåŠ è¯»é”åªèƒ½ä¿è¯åŒæ—¶è¯»å§<br><br>","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138383,"discussion_content":"å¯ä»¥å¯¹è¡¨è¿›è¡ŒCRUDï¼Œæ²¡æœ‰è¯´åŒæ—¶å¯¹è¡¨ä¸­æŸä¸€è¡Œè¿›è¡ŒCRUDï¼Œæƒ³è±¡ç†è§£ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117487,"user_name":"ç‹ä¿å®‰","can_delete":false,"product_type":"c1","uid":1165065,"ip_address":"","ucode":"758DA5B5D626D9","user_header":"https://static001.geekbang.org/account/avatar/00/11/c7/09/ba838a61.jpg","comment_is_top":false,"comment_ctime":1564058642,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564058642","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆï¼Œæˆ‘æŠŠä¸€ä¸ªåº“çš„æ•°æ®ï¼Œå…¨æåˆ°å¦å¤–ä¸€ä¸ªåº“é‡Œï¼Œæ€ä¹ˆæœ€å¿«å‘¢ï¼Œæœ‰å‡ ä¸ªåƒä¸‡çº§çš„å¤§è¡¨ã€‚mysql","like_count":0,"discussions":[{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10187,"discussion_content":"binlog?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568273559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116390,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1563846062,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1563846062","product_id":100020801,"comment_content":"ä»MDLçœ‹å‡ºé•¿äº‹åŠ¡çš„åå¤„äº†ï¼Œå› ä¸ºDMLå’ŒDDLäº’æ–¥ã€‚è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ï¼šå¤§è¡¨åŠ å­—æ®µæŒºè€—æ—¶çš„ï¼Œè®°å¾—ä¹‹å‰å·¥ä½œæœ‰ä¸ªè¡¨ä¸Šåƒä¸‡è¡Œï¼Œå½“æ—¶åŠ å­—æ®µå¥½åƒè€—æ—¶10å¤šç§’ï¼Œé‚£è¿™å…¶é—´ï¼Œæ‰€ä»¥DMLéƒ½è¢«é˜»å¡äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10189,"discussion_content":"è‚¯å®šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568273653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":15259,"discussion_content":"è°¢è°¢å“ˆï¼Œé‚£è¿™æ ·çš„è¯ï¼Œå¤§è¡¨æ€ä¹ˆåŠ å­—æ®µåˆä¸å½±å“çº¿ä¸ŠæœåŠ¡å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568813023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":10189,"ip_address":""},"score":15259,"extra":""},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138386,"discussion_content":"ghostï¼Œæˆ–è€…å‡çº§åˆ°8.0å¿«é€ŸåŠ å­—æ®µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":15259,"ip_address":""},"score":138386,"extra":""}]}]},{"had_liked":false,"id":115527,"user_name":"å•Šå•Šå•Šå“¦å“¦","can_delete":false,"product_type":"c1","uid":1309877,"ip_address":"","ucode":"68C7153ECAAC57","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/RNO4yZyBvic914hewmNNE8iblYDcfv5yGHZ9OnKuCuZXNmGR0F5qV3icKLT2xpMt66GyEpicZVvrmz8A6TIqt92MQg/132","comment_is_top":false,"comment_ctime":1563612692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563612692","product_id":100020801,"comment_content":"è€å¸ˆæ–‡ä¸­ã€‚cbã€‚ç´¢å¼•ã€‚ ä½ è¯´æ˜¯ã€‚c b a è€Œä¸»å»ºéƒ¨åˆ†æ˜¯aã€‚ å›è¡¨æ—¶ã€‚æ ¹æ®ã€‚aæ¥å›è¡¨æ‰¾ä¸å‡ºå‡†ç¡®çš„æ•°æ®å§","like_count":0},{"had_liked":false,"id":115201,"user_name":"å¸ˆæ©ç£Š","can_delete":false,"product_type":"c1","uid":1216657,"ip_address":"","ucode":"237A2B7D19E0A5","user_header":"https://static001.geekbang.org/account/avatar/00/12/90/91/aebfb724.jpg","comment_is_top":false,"comment_ctime":1563506486,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563506486","product_id":100020801,"comment_content":"ä½¿ç”¨single-transactionæ—¶ï¼Œä¼šåŠ å…¨å±€é”ï¼Œåœ¨ä¸»åº“ä¸ŠæŸè¡¨åŠ å­—æ®µæ—¶ï¼Œä¼šé˜»å¡ä¸èƒ½æŠŠå­—æ®µåŠ æˆåŠŸã€‚<br>æ•°æ®åº“çš„é”ï¼Œé”çš„åˆ†ç±»ï¼Œå…¨å±€é”ï¼Œè¡¨é”ï¼Œè¡Œé”ã€‚ä¸»è¦è®²è§£äº†é”çš„ç°è±¡å’ŒèƒŒååŸç†ã€‚å…¨å±€é”ï¼šåŠ å…¨å±€é”æ˜¯æŒ‡å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ï¼Œä¸€èˆ¬åº”ç”¨äºé€»è¾‘åº“å¤‡ä»½ï¼ŒåŠ ä¸Šå…¨å±€é”åï¼Œåªæœ‰å¯è¯»åŠŸèƒ½ã€‚ä¸ºä»€ä¹ˆå¤‡ä»½æ—¶ï¼Œéœ€è¦åŠ å…¨å±€é”ï¼Œå› ä¸ºå¦‚æœä¸åŠ å…¨å±€é”ä¼šé€ æˆå¤‡ä»½çš„è§†å›¾ä¸ä¸€è‡´ï¼Œæ¯”å¦‚è´­ä¹°è¯¾ç¨‹åŠ¨ä½œï¼Œè´­ä¹°æ‰£é’±åï¼Œå‡è®¾é€»è¾‘ä¸Šå…ˆå¤‡ä»½ä½™é¢è¡¨ï¼Œç„¶åå®¢æˆ·è´­ä¹°ï¼Œå†å¤‡ä»½è¯¾ç¨‹è¡¨ï¼Œä¼šé€ æˆå¤‡ä»½åº“ä¸­ï¼Œé’±æ²¡æ‰£ï¼Œè¯¾ç¨‹å´å¤šäº†ã€‚åŠ å…¨å±€é”çš„æ–¹å¼1ï¼ŒFTWRLï¼ˆFLUSH TABLE WITH READ LOCKï¼‰ï¼Œ2ï¼ŒSET GLOBE READ ONLY =TRUE;é‡‡ç”¨1æ–¹å¼ï¼Œä¸é‡‡ç”¨2æ–¹å¼çš„åŸå› ï¼Œå®¢æˆ·ç«¯æ‰§è¡Œ1åï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼ŒMYSQLä¼šæŠŠé”è‡ªåŠ¨é‡Šæ”¾ï¼Œå¦‚æœæ˜¯æ–¹å¼2ï¼Œåˆ™MYSQLä¸èƒ½è‡ªåŠ¨é‡Šæ”¾é”ã€‚mysqlè‡ªå¸¦çš„å¤‡ä»½å·¥å…·ï¼Œmysqldumpã€‚<br>è¡¨é”ï¼Œåˆ†ä¸ºè¡¨é”å’Œå…ƒæ•°æ®é”ï¼ˆmata data lockï¼‰ï¼Œè¡¨é”ï¼Œlock tableï¼Œinnondbä¸ä½¿ç”¨è¡¨é”æ¥åšå¹¶å‘æ§åˆ¶ï¼Œè€Œæ˜¯é€šè¿‡è¡Œé”æ¥æ§åˆ¶çš„ã€‚MDLï¼Œåªè¦è®¿é—®è¡¨å°±éœ€è¦å¯¹è¯¥è¡¨åŠ é”ï¼Œè¯»é”ä¹‹é—´ä¸å†²çªï¼Œè¯»é”ä¸å†™é”æ˜¯äº’æ–¥çš„ï¼Œä¿®æ”¹è¡¨ç»“æ„éœ€è¦ç­‰åˆ°ä¹‹å‰çš„è¯»é”é‡Šæ”¾ï¼ŒåŠ ä¸Šå†™é”å†æ“ä½œã€‚æ‰€ä»¥å¦‚æœå†ç»™è¡¨åŠ å­—æ®µæ—¶æˆ–ä¿®æ”¹å­—æ®µæ—¶ï¼Œå¦‚æœå­˜åœ¨é•¿äº‹åŠ¡ï¼Œåˆ™è¯¥è¡¨çš„è¯»é”è¿˜æœªé‡Šæ”¾ï¼Œä¸èƒ½ç»™è¯¥è¡¨åŠ å†™é”ï¼Œé€ æˆé˜»å¡ï¼Œå®ƒè‡ªå·±é˜»å¡æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ï¼Œåç»­æŸ¥è¯¢æ–°ç”³è¯·MDLä¹Ÿä¼šé€ æˆé˜»å¡ã€‚å¦‚æœæ˜¯çƒ­ç‚¹è¡¨ï¼Œå®¢æˆ·ç«¯æœ‰é‡è¯•æœºåˆ¶ï¼Œå¾ˆå¿«å°±é€ æˆçº¿ç¨‹æ± çˆ†æ»¡ã€‚äº‹åŠ¡ä¸­çš„DMLé”ï¼Œåœ¨å¼€å§‹æ‰§è¡Œæ—¶åˆ›å»ºï¼Œå¹¶ä¸æ˜¯åœ¨è¯­å¥æ‰§è¡Œç»“æŸåé‡Šæ”¾ï¼Œè€Œæ˜¯åœ¨äº‹åŠ¡æäº¤åæ‰é‡Šæ”¾çš„ã€‚<br>å¦‚ä½•å®‰å…¨åœ°ç»™è¡¨åŠ å­—æ®µï¼Ÿ<br>ä¸€æ˜¯ï¼ŒæŠŠé•¿äº‹åŠ¡çš„çº¿ç¨‹killæ‰ï¼Œä½†å¦‚æœæ˜¯é«˜é¢‘è¯­å½•ï¼Œåˆšæ€æ‰ä¸€ä¸ªï¼Œåˆèµ·æ¥ä¸€ä¸ªã€‚<br>äºŒæ˜¯ï¼ŒåŠ æ—¶é—´é™åˆ¶ï¼Œè®¾ç½®ç­‰å¾…æ—¶é—´ï¼Œåœ¨è§„å®šæ—¶é—´å†…æ²¡æœ‰ç»™è¯¥è¡¨åŠ å†™é”æˆåŠŸï¼Œåˆ™æ”¾å¼ƒï¼Œç¨åé‡è¯•ã€‚","like_count":0},{"had_liked":false,"id":113962,"user_name":"gogogo","can_delete":false,"product_type":"c1","uid":1273993,"ip_address":"","ucode":"D7B7A9AA2D4CE5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/wonzX0yIia5NFoB0TZPdIPqVicIuSvzMtowownIkO9VwYpkPWJP2tpEcv5RXMn0ayuEGkAp2GBualL5sFQs0ibQJQ/132","comment_is_top":false,"comment_ctime":1563194641,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563194641","product_id":100020801,"comment_content":"session Cé˜»å¡æ—¶ï¼Œèµ·ä½œç”¨çš„è¿˜æ˜¯è¯»é”å§ï¼Œä¸ºå•¥Dä¼šè¢«é˜»å¡å‘¢ã€‚","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138387,"discussion_content":"å› ä¸ºCæ˜¯å†™é”ï¼Œè¯»å†™é”äº’æ–¥çš„ï¼Œåé¢çš„å¾—ç­‰å‰é¢æäº¤åæ‰èƒ½ç»§ç»­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112694,"user_name":"ä¸Šç¥æ¢µä¿®","can_delete":false,"product_type":"c1","uid":1324307,"ip_address":"","ucode":"77A5BED0911A87","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoU91kd8RZO5hg2w9cpnL4yTcfemDFJH3GfiaNRgOe7nQyQF7xBDc5Yq2Aue5KuHaEGOCMM9RUkUpQ/132","comment_is_top":false,"comment_ctime":1562807503,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562807503","product_id":100020801,"comment_content":"äºŒåˆ·ï¼Œè™½ç„¶c å’Œca ç´¢å¼• å¯¹äºæ•°æ®æ’åºä¸€æ ·ï¼Œä½†å¦‚æœæŸ¥è¯¢è¯­å¥æ˜¯ æŸ¥aæ¡ä»¶æ˜¯c  æ˜¯ä¸æ˜¯caç´¢å¼•å‡å°‘äº†å›è¡¨æ¬¡æ•°ï¼Ÿè‡³äºå®é™…æ˜¯å¦åˆ›å»ºä¸»è¦å–å†³ç©ºé—´å’Œæ•ˆç‡çš„å¹³è¡¡  è¿™æ ·ç†è§£å¯¹å—","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138392,"discussion_content":"è¿™è·Ÿå›è¡¨æ¬¡æ•°æ²¡å…³ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111270,"user_name":"å­å†°æ¶µ","can_delete":false,"product_type":"c1","uid":1043822,"ip_address":"","ucode":"C125E9392C7E4D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/6e/e8de651a.jpg","comment_is_top":false,"comment_ctime":1562522133,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562522133","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œç°åœ¨æœ‰ä¸€å¼ è¡¨ï¼Œæ•°æ®é‡ä¼šæ˜¯äº¿çº§ï¼Œæ˜¯ä¸€æ£µäºŒå‰æ ‘ï¼ŒæŸ¥è¯¢æ—¶é€šè¿‡æ¯”è¾ƒå½“å‰èŠ‚ç‚¹çš„lft å’Œ rgt çš„å€¼ï¼Œå¯ä»¥å¿«é€ŸæŸ¥æ‰¾å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰çˆ¶èŠ‚ç‚¹å’Œæ‰€æœ‰å­©å­èŠ‚ç‚¹ï¼Œä½†é—®é¢˜æ˜¯è¦æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹è¦æ›´æ–°çš„è®°å½•æ•°éå¸¸å¤šï¼Œè¿‘90%çš„è®°å½•æ•°ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¥½çš„ä¼˜åŒ–æ–¹æ¡ˆ<br><br><br>DROP TABLE IF EXISTS `st_rel`;<br>CREATE TABLE `st_rel` (<br>  `id` int(11) NOT NULL AUTO_INCREMENT,<br>  `lft` int(11) NOT NULL DEFAULT &#39;0&#39;,<br>  `rgt` int(11) NOT NULL DEFAULT &#39;0&#39;,<br>  `parent` int(11) NOT NULL DEFAULT &#39;0&#39;,<br>  `depth` int(11) NOT NULL DEFAULT &#39;0&#39;,<br>  `child_num` tinyint(2) NOT NULL DEFAULT &#39;0&#39;,<br>  `mark` tinyint(2) NOT NULL DEFAULT &#39;0&#39;,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `ix_parent_mark` (`parent`,`mark`) USING BTREE,<br>  KEY `ix_parent` (`parent`) USING BTREE,<br>  KEY `ix_lft_rgt` (`lft`,`rgt`) USING BTREE,<br>  KEY `ix_rgt` (`rgt`) USING BTREE<br>) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;<br>","like_count":0},{"had_liked":false,"id":109202,"user_name":"beiler","can_delete":false,"product_type":"c1","uid":1192989,"ip_address":"","ucode":"0A62FE86617486","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/1d/169cd800.jpg","comment_is_top":false,"comment_ctime":1561979808,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561979808","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼Œé”™è¯¯å·æ˜¯1053  ä¿¡æ¯æ˜¯seever shutdown in progressï¼Œæˆ‘ä»¬æ‰¾äº†å¾ˆå¤šåœ°æ–¹éƒ½æ²¡æ˜ç¡®è¯´é”™è¯¯äº§ç”Ÿçš„åŸå› ï¼Œèƒ½ç»™äº›å»ºè®®å˜›","like_count":0},{"had_liked":false,"id":108648,"user_name":"ä¹„æ¸…é£ç¬ä¾æ—§","can_delete":false,"product_type":"c1","uid":1464015,"ip_address":"","ucode":"C035239D091DF3","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/cf/7124490d.jpg","comment_is_top":false,"comment_ctime":1561820109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561820109","product_id":100020801,"comment_content":"æ˜¯ä¸æ˜¯5.7å¼€å§‹ä¸æ”¯æŒå¯¹InnoDBå¼•æ“æ·»åŠ è¡¨é”äº†ï¼Ÿæˆ‘åœ¨InnoDBå¼•æ“æµ‹è¯•çš„ç»“æœå’Œè€å¸ˆè¯´çš„ä¸ä¸€è‡´ã€‚æ•°æ®åº“ç‰ˆæœ¬5.7.19ï¼ˆä½¿ç”¨çš„mysqlé•œåƒï¼‰  è¡¨CREATE TABLE `test` (<br>  `id` int(11) unsigned NOT NULL,<br>  `name` varchar(40) NOT NULL,<br>  PRIMARY KEY (`id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8;<br>æœ¬ä¼šè¯æ·»åŠ è¡¨å†™é”æ‰§è¡Œåä¼šè¢«é˜»å¡ï¼Œæ— æ³•è¿›è¡Œä»»ä½•æ“ä½œï¼›å…¶ä»–ä¼šè¯åœ¨è¯¥è¡¨æ— æ³•è¯»å†™ï¼›ç„¶åé‡æ–°æ‹‰äº†ä¸ª5.6.38ç‰ˆæœ¬çš„é•œåƒï¼ŒåŒæ ·æ“ä½œï¼Œæµ‹è¯•ç»“æœå’Œè€å¸ˆçš„ä¸€è‡´ï¼›ç„¶åå›åˆ°5.7.19ç‰ˆæœ¬ï¼ŒåŒæ ·çš„å»ºè¡¨è¯­å¥ï¼Œåˆ‡æ¢æˆä½¿ç”¨MyIsamå¼•æ“è¿›è¡Œç›¸åŒæ“ä½œæµ‹è¯•ï¼Œç»“æœå’Œè€å¸ˆçš„ä¸€è‡´ï¼›","like_count":0},{"had_liked":false,"id":107943,"user_name":"é˜¿ä¸ƒ","can_delete":false,"product_type":"c1","uid":1587282,"ip_address":"","ucode":"B14B05BD0EB78A","user_header":"https://static001.geekbang.org/account/avatar/00/18/38/52/526c10f9.jpg","comment_is_top":false,"comment_ctime":1561637131,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561637131","product_id":100020801,"comment_content":"æˆ‘è·Ÿä¸Šé¢æœ‰ä½è¯»è€…æè¿°çš„ä¸€æ ·ï¼Œsession Cå…ˆäºDæ‰§è¡Œäº†ï¼Œè¿˜è¯·è€å¸ˆè§£æƒ‘ã€‚osxç³»ç»Ÿ ï¼›mysql5.7.25ï¼›ä½¿ç”¨çš„å‘½ä»¤è¡Œå·¥å…·","like_count":0},{"had_liked":false,"id":105626,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1561044757,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1561044757","product_id":100020801,"comment_content":"è¦æ˜¯ç²—å­˜åœ¨ï¼ˆc,a,bï¼‰221  212 è¿™æ ·å­çš„æ’åºï¼ŒæŒ‰cç´¢å¼•å’ŒæŒ‰caç´¢å¼•é¡ºåºå°±ä¸ä¸€æ ·äº†æŠŠ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138394,"discussion_content":"ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105378,"user_name":"live","can_delete":false,"product_type":"c1","uid":1302139,"ip_address":"","ucode":"931CDDFB92C404","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/7b/49810dd8.jpg","comment_is_top":false,"comment_ctime":1560991268,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1560991268","product_id":100020801,"comment_content":"â€“c--|â€“a--|â€“ä¸»é”®éƒ¨åˆ†b-- ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œä¸æ˜¯ abï¼Œè€Œæ˜¯åªæœ‰ bï¼‰<br>2 1 3<br>2 2 2<br>3 1 2<br>3 1 4<br>3 2 1<br>4 2 3<br>è¿™ä¸ªè·Ÿç´¢å¼• c çš„æ•°æ®æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚<br><br>è¿™é‡Œæ²¡ç†è§£ï¼Œéº»çƒ¦è§£æƒ‘ä¸‹:cç´¢å¼•å­˜å‚¨çš„idå€¼ä¹Ÿæ˜¯æ’åºå¥½çš„å—ï¼Ÿå¦‚æœæ˜¯æ’åºå¥½çš„ï¼Œä¸ºä»€ä¹ˆåˆéœ€è¦mrrï¼Œå¦‚æœéæ’åºçš„ï¼Œé‚£å°±å’Œç´¢å¼•caçš„å¯èƒ½ä¸ä¸€æ ·","like_count":0,"discussions":[{"author":{"id":1652085,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKORTofsU89GYKtywquzKuEiabvZnEOonfMYKuCPlo8GDlXqZuJdBicu0XtlaeodH4BnmHV1kldSAwQ/132","nickname":"æœªæ¥æ€æ ·","note":"","ucode":"4E54EB62595B27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39321,"discussion_content":"å¯¹ï¼Œæˆ‘ä¹Ÿæ˜¯åŒæ ·çš„ç–‘é—®ï¼Œæ„Ÿè§‰è¿™ä¸€å—è¯´çš„ä¸å¯¹ï¼Œä½œè€…æ˜¯æŒ‰ç…§caç´¢å¼•ç»™å‡ºçš„ç´¢å¼•æ’åˆ—ï¼Œè¿™æ ·aæ˜¯æœ‰åºçš„ï¼Œå¦‚æœç”¨cç´¢å¼•ç»™å‡ºç´¢å¼•æ’åˆ—ï¼Œé‚£ä¹ˆaæ€ä¹ˆæ¥ä¿è¯æœ‰åºï¼Ÿ è¿™ä¸ªåªèƒ½è¯´ï¼Œcç´¢å¼•å’Œcsç´¢å¼•å­˜å‚¨çš„éƒ½æ˜¯ cã€aã€bä¸‰ä¸ªå­—æ®µè€Œå·²å•Šï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571912193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104588,"user_name":"d7f5931e-5c2f-11e9-a742-71d9eb","can_delete":false,"product_type":"c1","uid":1498156,"ip_address":"","ucode":"94FD7959E93C28","user_header":"","comment_is_top":false,"comment_ctime":1560779922,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1560779922","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å¯¹åŒä¸€ä¸ªè¡¨CRUDï¼Œè¿™æ ·ä¸ä¹±å¥—äº†ï¼ŒAçº¿ç¨‹æŠŠè¡¨è®°å½•åˆ é™¤ï¼ŒBçº¿ç¨‹æ›´æ–°ã€‚","like_count":0,"discussions":[{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10190,"discussion_content":"è¯»é”ä¸äº’æ–¥ï¼Œè¯´çš„æ˜¯å¯¹äºMDLã€‚å¤šä¸ªçº¿ç¨‹å¯¹ä¸åŒçš„æ•°æ®è¡Œè¿›è¡Œcurdï¼Œä¸ä¼šä¹±å¥—ã€‚å¦‚æœæ˜¯åŒä¸€ä¸ªæ•°æ®è¡Œçš„è¯ï¼Œæœ‰è¡Œé”çš„ï¼Œä¹Ÿä¸ä¼šä¹±å¥—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568273785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104348,"user_name":"ä¼è‰¯è´µ","can_delete":false,"product_type":"c1","uid":1120195,"ip_address":"","ucode":"D59A6007155586","user_header":"https://static001.geekbang.org/account/avatar/00/11/17/c3/026096a4.jpg","comment_is_top":false,"comment_ctime":1560735015,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560735015","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘è¿™è¾¹ç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨å¹¶å‘é‡å¤§çš„æƒ…å†µä¸‹ï¼Œæˆ‘ç»™ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„é€»è¾‘åŠ äº†äº‹ç‰©æ³¨è§£ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªsqlä¿®æ”¹ç©å®¶èµ„æºï¼Œç„¶åå…¶ä»–ä¸šåŠ¡é‡Œé¢ä¿®æ”¹ç©å®¶èµ„æºæ²¡åŠ äº‹ç‰©çš„ï¼Œéƒ½è¶…æ—¶äº†ï¼Œç„¶åå¯¼è‡´çº¿ä¸Šå‡ºç°å¤§é‡çš„trx id 6662291361 lock_mode X locks rec but not gap waitingï¼Œupdateç´¢å¼•çš„æ—¶å€™ä¸æ˜¯è¡Œé”å—ï¼Œæ€ä¹ˆä¼šå½±å“å…¶ä»–çš„å‘¢","like_count":0},{"had_liked":false,"id":104023,"user_name":"...","can_delete":false,"product_type":"c1","uid":1142098,"ip_address":"","ucode":"9D73E00133C236","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/52/404912c3.jpg","comment_is_top":false,"comment_ctime":1560592623,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560592623","product_id":100020801,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜å¾ˆç–‘æƒ‘ï¼Œmysql dumpå¯¼æ•°æ®ï¼Œå¯¼è¡¨ä¹‹å‰å¼€å§‹äº‹ç‰©ï¼Œæ˜¯å¯¹æ‰€æœ‰çš„è¡¨åˆ›å»ºä¸€è‡´æ€§è§†å›¾ï¼Œè¿˜æ˜¯åœ¨æŸå¼ è¡¨å¯¼å‡ºå‰åˆ›å»ºä¸€è‡´æ€§è§†å›¾ï¼Œå¦‚æœå¯¼æŸä¸ªè¡¨å‰åˆ›å»ºï¼Œé‚£æ˜¯ä¸æ˜¯è¿˜æ˜¯æ— æ³•é¿å…ä¾‹å­ä¸­è¯¾ç¨‹å’Œè´¦æˆ·ä½™é¢ä¸ä¸€è‡´é—®é¢˜","like_count":0},{"had_liked":false,"id":103199,"user_name":"ä½‘å„¿","can_delete":false,"product_type":"c1","uid":1226196,"ip_address":"","ucode":"0629888E7A5E16","user_header":"https://static001.geekbang.org/account/avatar/00/12/b5/d4/3bd5b77b.jpg","comment_is_top":false,"comment_ctime":1560395535,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1560395535","product_id":100020801,"comment_content":"æ–‡ä¸­å†™åˆ°ï¼Œmysqldump ä½¿ç”¨å‚æ•°â€“single-transaction çš„æ—¶å€™,å¯¼æ•°æ®ä¹‹å‰å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œæ¥ç¡®ä¿æ‹¿åˆ°ä¸€è‡´è§†å›¾ï¼Œè¿™ä¸ªä¸€è‡´æ€§è§†å›¾æ˜¯é’ˆå¯¹å…¨å±€çš„å—ï¼Ÿ  è¿˜æ˜¯é’ˆå¯¹æŸä¸€ä¸ªè¡¨çš„?","like_count":0,"discussions":[{"author":{"id":2873900,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/da/2c/cdd92f3f.jpg","nickname":"wÃ¡ng","note":"","ucode":"9BFEA73AD7680D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558221,"discussion_content":"é’ˆå¯¹æ•´ä¸ªå®ä¾‹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648137107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102617,"user_name":"è‹¦è¡Œåƒ§","can_delete":false,"product_type":"c1","uid":1055334,"ip_address":"","ucode":"726024A9A9CF44","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","comment_is_top":false,"comment_ctime":1560264908,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560264908","product_id":100020801,"comment_content":"è€å¸ˆ renameæ˜¯ä¸æ˜¯ä¹Ÿä¼šèµ·ä¸€ä¸ªå…ƒæ•°æ®å†™é”","like_count":0},{"had_liked":false,"id":100489,"user_name":"å°æ­¦","can_delete":false,"product_type":"c1","uid":1562946,"ip_address":"","ucode":"F8BF3F6EC36CBD","user_header":"https://static001.geekbang.org/account/avatar/00/17/d9/42/93fb1fdc.jpg","comment_is_top":false,"comment_ctime":1559565068,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559565068","product_id":100020801,"comment_content":"alterå°è¡¨å¯¼è‡´æ•°æ®åº“å´©æºƒçš„ä¾‹å­ä¸­ï¼Œç¬¬ä¸€ä¸ªè¯»çš„äº‹åŠ¡æäº¤ä¹‹ååç»­ä¸å°±éƒ½å¯ä»¥æ­£å¸¸è·å–é”äº†å—ï¼Ÿä¸ºä»€ä¹ˆä¼šblockï¼ŸsessionCè¢«blockè¿˜å¯ä»¥ç†è§£ï¼Œä¸ºä»€ä¹ˆåç»­è¦è¯»çš„äº‹åŠ¡ä¹Ÿä¼šè¢«blockï¼Ÿ","like_count":0},{"had_liked":false,"id":98139,"user_name":"å°å½¬","can_delete":false,"product_type":"c1","uid":1012678,"ip_address":"","ucode":"BDC75161004FD0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/73/c6/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1558919680,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558919680","product_id":100020801,"comment_content":"æˆ‘è¯•äº†SessionA,SessionB,SessionC,SessionD, åŒæ ·ä¼šå‡ºç°SessionA,SessionBæäº¤äº‹åŠ¡åï¼Œæ˜¯SessionDå…ˆè·å–åˆ°é”ï¼Œè€ŒSessionCè¿˜åœ¨ç­‰å¾…ã€‚mysqlç‰ˆæœ¬ï¼š5.7.18","like_count":0},{"had_liked":false,"id":96862,"user_name":"è‹èŒ«","can_delete":false,"product_type":"c1","uid":1299149,"ip_address":"","ucode":"CED8598307BEAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/d2/cd/6fb14677.jpg","comment_is_top":false,"comment_ctime":1558524854,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558524854","product_id":100020801,"comment_content":"ä¸å¤ªæ˜ç™½ca ä¸ºä»€ä¹ˆå¯ä»¥å»æ‰ï¼Œcbéœ€è¦ä¿ç•™ã€‚<br>","like_count":0},{"had_liked":false,"id":95858,"user_name":"æœ±å–†","can_delete":false,"product_type":"c1","uid":1213634,"ip_address":"","ucode":"03AFB3DEFEFA0F","user_header":"https://static001.geekbang.org/account/avatar/00/12/84/c2/f765dfde.jpg","comment_is_top":false,"comment_ctime":1558232882,"is_pvip":false,"replies":[{"id":"34301","content":"ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹åº”ä¸€ä¸ªsessionå‘€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1558260548,"ip_address":"","comment_id":95858,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1558232882","product_id":100020801,"comment_content":"å¤§ä½¬ä»¬ã€‚æ€ä¹ˆæ¨¡æ‹Ÿä¸åŒçš„sessionå‘¢","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450620,"discussion_content":"ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹åº”ä¸€ä¸ªsessionå‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558260548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2020865,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d6/01/eaa50203.jpg","nickname":"zft","note":"","ucode":"74DEC5FBA610B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278948,"discussion_content":"å¦‚æœæ˜¯sshè¿æ¥å·¥å…·çš„è¯ï¼Œç›´æ¥å¼€ä¸¤ä¸ªä¼šè¯å°±å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591262755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95534,"user_name":"å¤å…´","can_delete":false,"product_type":"c1","uid":1363230,"ip_address":"","ucode":"C172A87873001A","user_header":"https://static001.geekbang.org/account/avatar/00/14/cd/1e/692c3313.jpg","comment_is_top":false,"comment_ctime":1558077552,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1558077552","product_id":100020801,"comment_content":" session cè¢«å µå¡ï¼Œæ²¡æœ‰æ‹¿åˆ°mdlå†™é”ï¼Œä¸ºä»€ä¹ˆsession dæ‹¿ä¸åˆ°mdlå†™é”å‘¢ï¼ˆä¹Ÿå°±æ˜¯è¯´session dä¸ºä»€ä¹ˆä¹Ÿä¼šé˜»å¡ï¼Œsession cæ²¡æœ‰æ‹¿åˆ°mdlå†™é”çš„ï¼‰ã€‚","like_count":0,"discussions":[{"author":{"id":1113854,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fe/fe/12638c5b.jpg","nickname":"é‚¢ä¸–å®","note":"","ucode":"7A58863FC89052","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4432,"discussion_content":"mysqlç‰ˆæœ¬ 5.7.16ï¼Œæµ‹è¯•session dæ˜¯ä¸ä¼šé˜»å¡çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565416768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94831,"user_name":"é äººå“å»èµ¢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1557906252,"is_pvip":false,"replies":[{"id":"34304","content":"ğŸ‘<br>åœ¨ç¢°åˆ°é—®é¢˜çš„æ—¶å€™èƒ½æƒ³èµ·45è®²çš„æ–‡ç« ï¼Œæˆ‘ä¹Ÿå¾ˆå¼€å¿ƒğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1558260720,"ip_address":"","comment_id":94831,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557906252","product_id":100020801,"comment_content":"ä»Šå¤©é‡åˆ°MySQLé”è¡¨çš„é—®é¢˜ï¼Œæ‰§è¡Œ SHOW PROCESSLIST;  çœ‹åˆ°meta dataä»€ä¹ˆçš„ï¼Œå›å»å¤´çœ‹è¿™ç¯‡æ–‡ç« æ—¶å€™ï¼Œå…³äºè¡¨çº§é”ï¼Œonline DDLè¿™éƒ¨åˆ†çœ‹çš„æ´¥æ´¥æœ‰å‘³ï¼Œæ„Ÿè§‰æœ‰ç‚¹äº†è§£æ„æ€äº†ï¼Œå¥½æ–‡ç« çœ‹ä¸€æ¬¡ï¼Œæœ‰ä¸€æ¬¡æ”¶è·å°¤å…¶å¸¦ç€é—®é¢˜æˆ–è€…å®é™…æƒ…å†µå›å¤´çœ‹çš„æ—¶å€™ï¼Œå†ä¹Ÿä¸æ˜¯æŠ½è±¡çš„æ¦‚å¿µä»€ä¹ˆçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450227,"discussion_content":"ğŸ‘\nåœ¨ç¢°åˆ°é—®é¢˜çš„æ—¶å€™èƒ½æƒ³èµ·45è®²çš„æ–‡ç« ï¼Œæˆ‘ä¹Ÿå¾ˆå¼€å¿ƒğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558260720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93032,"user_name":"å’Œè‡ªå·±çš„çº¦ä¼š","can_delete":false,"product_type":"c1","uid":1343747,"ip_address":"","ucode":"4E64AA37BA007E","user_header":"https://static001.geekbang.org/account/avatar/00/14/81/03/27d863a3.jpg","comment_is_top":false,"comment_ctime":1557381434,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557381434","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»Šå¤©æŠŠæˆ‘ä»¬çš„æ•°æ®åº“ææŒ‚äº†ã€‚ä¸€ä¸»å¤šä»ã€‚mysql 5.6ç‰ˆæœ¬ã€‚<br>10wè¡Œçš„å°è¡¨ã€‚æ‰§è¡Œäº†ä¸€ä¸ªselect sleep(100)ã€‚ç„¶åæ•°æ®åº“åŠ åˆ—alter table add columnã€‚å¯¼è‡´20å¤šåˆ†é’Ÿä»ç„¶æ²¡æœ‰ddlæˆåŠŸã€‚æ•´ä¸ªæ•°æ®åº“ä¸èƒ½è¯»å†™ã€‚<br>dbaæ‰‹åŠ¨killæ‰äº†sleep(100)åï¼ŒåŠ åˆ—æˆåŠŸäº†ã€‚dbaåé¦ˆæ˜¯sleep(100)å’Œalteræ“ä½œæ­»é”äº†ã€‚å’Œçº¿ç¨‹æ•°æ— å…³ã€‚<br>è¯·é—®ä¸‹ï¼Œè¿™ä¸ªæ˜¯å•¥åŸç†ã€‚sleep(100)ä¸ºä»€ä¹ˆå°±ä¸èƒ½æ‰§è¡Œäº†ã€‚<br>","like_count":0},{"had_liked":false,"id":92312,"user_name":"ä¾¯æ©è®­","can_delete":false,"product_type":"c1","uid":1162376,"ip_address":"","ucode":"F4DC47EECA0F00","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/88/fbb6022e.jpg","comment_is_top":false,"comment_ctime":1557229379,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557229379","product_id":100020801,"comment_content":"é»˜è®¤å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ï¼Œå¤‡ä»½å·²ç»å¼€å§‹äº†ï¼Œä¼šåˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œè§†å›¾æ˜¯ä¸å«æ–°å¢åˆ—çš„ï¼Œæ­¤æ—¶æ‰§è¡Œæ–°å¢åˆ—çš„æ“ä½œæ˜¯å¯ä»¥è¿›è¡Œçš„ï¼Œä½†ä¸å½±å“å¤‡ä»½çš„ç»“æœï¼Œæ–°å¢åˆ—æ‰§è¡Œå®Œæˆï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä»–è¿æ¥ä¸­çœ‹çš„ï¼Œä½†å¤‡ä»½ä¼šæŒ‰ç…§è€çš„è§†å›¾ç»§ç»­","like_count":0},{"had_liked":false,"id":90662,"user_name":"å¦‚æœ","can_delete":false,"product_type":"c1","uid":1320638,"ip_address":"","ucode":"138A3EEEE50850","user_header":"","comment_is_top":false,"comment_ctime":1556603886,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556603886","product_id":100020801,"comment_content":"DAY6ï¼Œæ‰“å¡","like_count":0},{"had_liked":false,"id":90460,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1556524475,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556524475","product_id":100020801,"comment_content":"MDLä½œç”¨æ˜¯é˜²æ­¢DDLå’ŒDMLå¹¶å‘çš„å†²çªï¼Œä¸ªäººæ„Ÿè§‰åº”è¯¥å†™æ¸…æ¥šï¼Œä¸€å¼€å§‹ç†è§£ä¸ºselectå’Œupdateä¹‹é—´çš„å¹¶å‘ã€‚å¼•ç”¨é‚£ä¸ªåŒå­¦çš„ç•™è¨€ï¼Œè¿™ä¸ªåœ°æ–¹çš„ç¡®å¾ˆå®¹æ˜“è®©äººäº§ç”Ÿè¯¯è§£ï¼Œæˆ‘æ˜¯çœ‹è¯„è®ºæ‰ææ‡‚è¿™ä¸ªçš„","like_count":0},{"had_liked":false,"id":90450,"user_name":"é˜¿q","can_delete":false,"product_type":"c1","uid":1308842,"ip_address":"","ucode":"4C14153BB0B550","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/gnubyuV2Z7cV49fmk1bXKGMjlia19rclbQziaEntxicWBYZGlqBjvjlSFZgzddXg7pGCe5oZ0PPLH2EickCjTadAtA/132","comment_is_top":false,"comment_ctime":1556522404,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556522404","product_id":100020801,"comment_content":"@lionetes å¤§å“¥ ä½ è¯´çš„æ—¶å€™è¯´æ¸…æ¥š æ˜¯åŠ è¡¨åçš„FTWRLï¼Œä¸ç„¶åŠå¯¹ä¸å¯¹çš„è®©äººæœ‰ç‚¹çœ‹ä¸æ˜ç™½ã€‚","like_count":0},{"had_liked":false,"id":88888,"user_name":"é£åœ¨èº«å","can_delete":false,"product_type":"c1","uid":1486579,"ip_address":"","ucode":"AA28C7C4FB6393","user_header":"https://static001.geekbang.org/account/avatar/00/16/ae/f3/f9b8b077.jpg","comment_is_top":false,"comment_ctime":1556021247,"is_pvip":false,"replies":[{"id":"32652","content":"æ˜¯å“¦ï¼Œä¼šè‡ªåŠ¨äº¤æ¢ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1556851119,"ip_address":"","comment_id":88888,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556021247","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚ä½ æ‰€è¯´ï¼Œå»ºcbç´¢å¼•çš„è¯ï¼Œåé¢åªä¼šè·Ÿä¸»é”®çš„aéƒ¨åˆ†ã€‚ä½†æ˜¯ä¸»é”®æ˜¯abï¼Œéš¾é“å›è¡¨çš„æ—¶å€™ä¼šè‡ªåŠ¨äº¤æ¢aï¼Œbåˆ—æ¥æŸ¥æ‰¾å¯¹åº”çš„ä¸»é”®å€¼ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447934,"discussion_content":"æ˜¯å“¦ï¼Œä¼šè‡ªåŠ¨äº¤æ¢ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556851119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88864,"user_name":"Break","can_delete":false,"product_type":"c1","uid":1508922,"ip_address":"","ucode":"6D1CCFC60E11EF","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/3a/68bed1d9.jpg","comment_is_top":false,"comment_ctime":1556015823,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1556015823","product_id":100020801,"comment_content":"&lt;p&gt;ç´¢å¼• ca çš„ç»„ç»‡æ˜¯å…ˆæŒ‰ c æ’åºï¼Œå†æŒ‰ a æ’åºï¼ŒåŒæ—¶è®°å½•ä¸»é”®&lt;br&gt;<br>â€“c--|â€“a--|â€“ä¸»é”®éƒ¨åˆ†&lt;span class=&quot;orange&quot;&gt;b&lt;&#47;span&gt;-- &lt;span class=&quot;orange&quot;&gt;ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œä¸æ˜¯ abï¼Œè€Œæ˜¯åªæœ‰ bï¼‰&lt;&#47;span&gt;&lt;br&gt;<br>2 1 3&lt;br&gt;<br>2 2 2&lt;br&gt;<br>3 1 2&lt;br&gt;<br>3 1 4&lt;br&gt;<br>3 2 1&lt;br&gt;<br>4 2 3&lt;br&gt;<br>&lt;span class=&quot;orange&quot;&gt;è¿™ä¸ªè·Ÿç´¢å¼• c çš„æ•°æ®æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚&lt;&#47;span&gt;&lt;&#47;p&gt;<br><br>è¿™é‡Œä¸ºä»€ä¹ˆè¯´å’Œç´¢å¼•Cçš„æ•°æ®æ˜¯ä¸€æ ·çš„å‘¢? æ²¡æƒ³é€š","like_count":0,"discussions":[{"author":{"id":1652085,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKORTofsU89GYKtywquzKuEiabvZnEOonfMYKuCPlo8GDlXqZuJdBicu0XtlaeodH4BnmHV1kldSAwQ/132","nickname":"æœªæ¥æ€æ ·","note":"","ucode":"4E54EB62595B27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39325,"discussion_content":"æ™®é€šç´¢å¼•ä¸­çš„ä¸»é”®é»˜è®¤æ’åºã€‚è¿™ä¸ªæ˜¯è€å¸ˆåœ¨å…¶ä»–å›å¤ä¸­è¯´çš„ï¼ŒåŸºäºè¿™ä¸€ç‚¹ï¼Œcå’Œcaå°±ä¸€è‡´äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571912457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85907,"user_name":"æš´èµ°çš„ğŸŒ","can_delete":false,"product_type":"c1","uid":1033630,"ip_address":"","ucode":"804381D877E53C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/9e/d6fce09c.jpg","comment_is_top":false,"comment_ctime":1555290902,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1555290902","product_id":100020801,"comment_content":"äº‹ä¾‹ä¸­ï¼ŒMDLå†™é”è¿˜æ²¡æœ‰åŠ ä¸Šä¸ºä»€ä¹ˆä¼šé˜»å¡åé¢çš„è¯»å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2020865,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d6/01/eaa50203.jpg","nickname":"zft","note":"","ucode":"74DEC5FBA610B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278949,"discussion_content":"æœ‰é”é˜Ÿåˆ—ï¼Œå¤§å®¶éƒ½åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰å¾…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591262903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85886,"user_name":"Socket","can_delete":false,"product_type":"c1","uid":1313213,"ip_address":"","ucode":"932CF3D692FFB5","user_header":"https://static001.geekbang.org/account/avatar/00/14/09/bd/cc31c95d.jpg","comment_is_top":false,"comment_ctime":1555288467,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555288467","product_id":100020801,"comment_content":"é‚£ä¸ªè§£ç­”è¿˜æ˜¯ä¸æ‡‚ä¸ºä»€ä¹ˆcaç´¢å¼•ç»“æ„å’Œcä¸€æ ·ï¼Œä¸ºä»€ä¹ˆcaç´¢å¼•ä¸Šçš„é¡µå€¼åªæœ‰bï¼Œcç´¢å¼•å­˜çš„åº”è¯¥æ˜¯ä¸»é”®ç´¢å¼•abå§ï¼Œå¹¶ä¸èƒ½ä¿è¯aæœ‰åºå§ã€‚è§£ç­”æœ‰ç‚¹æ¨¡ç³Šå¯ä»¥è¯¦ç»†è¯´è¯´å—","like_count":0},{"had_liked":false,"id":85798,"user_name":"é˜¿Mayçš„æµ·ç»µå®å®","can_delete":false,"product_type":"c1","uid":1203058,"ip_address":"","ucode":"AA2B28DF8BEF80","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/72/4f8a4297.jpg","comment_is_top":false,"comment_ctime":1555236850,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555236850","product_id":100020801,"comment_content":"online ddlçš„è¿‡ç¨‹ä¸­ï¼Œ  å¦‚æœåœ¨3.çœŸæ­£åšddl--åˆ é™¤å­—æ®µcolçš„åŒæ—¶ï¼Œè¿˜åœ¨è¯»æ•°æ®--select col from t ,ä¼šæ€ä¹ˆæ ·ï¼Ÿ","like_count":0},{"had_liked":false,"id":85036,"user_name":"dz617","can_delete":false,"product_type":"c1","uid":1221366,"ip_address":"","ucode":"5952846AB16744","user_header":"","comment_is_top":false,"comment_ctime":1554963553,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554963553","product_id":100020801,"comment_content":"åœ¨é€»è¾‘å¤‡ä»½ä¸­ï¼Œå¦‚æœéš”ç¦»çº§åˆ«æ˜¯RCçš„è¯ï¼Œé‚£ä¹ˆè¿™æ—¶å³ä½¿ä½¿ç”¨single-transactionä¹Ÿæ˜¯æœ‰å¯èƒ½å¾—ä¸åˆ°ä¸€è‡´æ€§è§†å›¾çš„å§ï¼Œä¹Ÿå°±æ˜¯è¯´RCä¸‹è¿™ä¸ªå‚æ•°åŠ ä¸åŠ åŒºåˆ«ä¸å¤§ å¯ä»¥è¿™æ ·ç†è§£å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":84911,"user_name":"Flash","can_delete":false,"product_type":"c1","uid":1236163,"ip_address":"","ucode":"E285075C9E0B02","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/c3/e4ba51d5.jpg","comment_is_top":false,"comment_ctime":1554944815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554944815","product_id":100020801,"comment_content":"ä¸›åº“å¤‡ä»½çš„è¿‡ç¨‹ï¼Œä½¿ç”¨äº†å¯é‡å¤è¯»äº‹åŠ¡ï¼Œå¤‡ä»½çš„è¿‡ç¨‹æ˜¯selectæ•´ä¸ªè¡¨çš„æ•°æ®ï¼Œè¿™æ—¶å€™selectè¯­å½•ä¼šæ‹¿åˆ°MDLè¯»é”ï¼Œç„¶åä¸»åº“åŠ å­—æ®µï¼Œä¸»åº“ä¼šåŒæ­¥åˆ°ä¸›åº“ï¼Œè¿™ä¸ªåŒæ­¥åŠ å­—æ®µçš„è¯­å¥ä¼šé˜»å¡ï¼Œç›´åˆ°ä¸›åº“å¤‡ä»½å®Œæˆã€‚","like_count":0},{"had_liked":false,"id":84171,"user_name":"~ç²ç²ç²~å­~å“¥~","can_delete":false,"product_type":"c1","uid":1302741,"ip_address":"","ucode":"89379F3A0427EA","user_header":"https://static001.geekbang.org/account/avatar/00/13/e0/d5/7485e51f.jpg","comment_is_top":false,"comment_ctime":1554797499,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554797499","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘ç”¨5.7.22åœ¨å‘½ä»¤è¡Œå¼€4ä¸ªçª—å£æµ‹è¯•Tony Duçš„å®éªŒæ­¥éª¤,ç»“æœè·Ÿä»–ä¸€æ ·,session Dä¼šåœ¨session Aå’ŒBé‡Šæ”¾åè¿”å›ç»“æœ, session Cç­‰å¾…session Dé‡Šæ”¾åæ‰§è¡ŒæˆåŠŸ. è¯·é—®å¯¹äºMDLé”çš„è·å–é¡ºåºæœ‰ä»€ä¹ˆåŸåˆ™ï¼Ÿ","like_count":0},{"had_liked":false,"id":84109,"user_name":"å˜»å˜»","can_delete":false,"product_type":"c1","uid":1325931,"ip_address":"","ucode":"E1EB75DD1C05E0","user_header":"","comment_is_top":false,"comment_ctime":1554786682,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554786682","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘æœ‰ç‚¹ç–‘é—®:innodbçš„mvccï¼Œå¼€å¯äº‹åŠ¡ï¼Œå…¨åº“çš„å¿«ç…§å°±ç¡®å®šäº†ï¼Ÿè¿˜æ˜¯è®¿é—®åˆ°å“ªå¼ è¡¨å“ªè¡Œæ•°æ®ï¼Œå“ªè¡Œæ•°æ®æ‰ç¡®å®šï¼Ÿ","like_count":0},{"had_liked":false,"id":83259,"user_name":"æœå˜‰å˜‰","can_delete":false,"product_type":"c1","uid":1306430,"ip_address":"","ucode":"C23DE27E7886BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/3e/9c3a8abc.jpg","comment_is_top":false,"comment_ctime":1554483542,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554483542","product_id":100020801,"comment_content":"å…¶å®å¯¹äºinnodb æ¥è®²ï¼Œmysqldump å¤‡ä»½çš„æ—¶å€™ä¹Ÿä¼šåŠ ä¸ŠFTWRLé”ï¼Œåªæ˜¯å¾ˆçŸ­æš‚ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ä¼šé”è¡¨çš„ã€‚","like_count":0},{"had_liked":false,"id":81920,"user_name":"AuBGa","can_delete":false,"product_type":"c1","uid":1028621,"ip_address":"","ucode":"5C14EE661A9BF2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/0d/c6c1c888.jpg","comment_is_top":false,"comment_ctime":1554082597,"is_pvip":false,"replies":[{"id":"30021","content":"é¢ï¼Ÿè¿™ä¸ªçš„é—®é¢˜æ˜¯å•¥ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªå·²ç»è¯´å®Œäº†ğŸ˜…","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1554432675,"ip_address":"","comment_id":81920,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554082597","product_id":100020801,"comment_content":"â€“c--|â€“a--|â€“ä¸»é”®éƒ¨åˆ†b-- ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œä¸æ˜¯ ab,è€Œæ˜¯åªæœ‰b)   è¿™é‡Œèƒ½è¯¦ç»†è®²è§£ä¸€ä¸‹å—ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445391,"discussion_content":"é¢ï¼Ÿè¿™ä¸ªçš„é—®é¢˜æ˜¯å•¥ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªå·²ç»è¯´å®Œäº†ğŸ˜…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554432675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81284,"user_name":"Nash","can_delete":false,"product_type":"c1","uid":1239904,"ip_address":"","ucode":"E634E1A53F526F","user_header":"https://static001.geekbang.org/account/avatar/00/12/eb/60/598942dd.jpg","comment_is_top":false,"comment_ctime":1553849128,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553849128","product_id":100020801,"comment_content":"1.å…¨å±€é”<br>  ï¼ˆ1ï¼‰å…¨å±€é”å°±æ˜¯å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ã€‚å…¨å±€é”çš„å…¸å‹ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œåšå…¨åº“é€»è¾‘å¤‡ä»½ã€‚<br>  ï¼ˆ2ï¼‰MySQL æä¾›äº†ä¸€ä¸ªåŠ å…¨å±€è¯»é”çš„æ–¹æ³•ï¼Œå‘½ä»¤æ˜¯ Flush tables with read lock (FTWRL)ã€‚<br>  ï¼ˆ3ï¼‰å®˜æ–¹è‡ªå¸¦çš„é€»è¾‘å¤‡ä»½å·¥å…·æ˜¯ mysqldumpã€‚å½“ mysqldump ä½¿ç”¨å‚æ•°â€“single-transaction çš„æ—¶å€™ï¼Œå¯¼æ•°æ®ä¹‹å‰å°±ä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œæ¥ç¡®ä¿æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ã€‚è€Œç”±äº MVCC çš„æ”¯æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°çš„ã€‚<br>  ï¼ˆ4ï¼‰ä½†æ˜¯single-transaction æ–¹æ³•åªé€‚ç”¨äºæ‰€æœ‰çš„è¡¨ä½¿ç”¨äº‹åŠ¡å¼•æ“çš„åº“ï¼ˆéš”ç¦»çº§åˆ«ä¸ºâ€˜å¯é‡å¤è¯»â€™ï¼‰ï¼›å¦‚æœæœ‰çš„è¡¨ä½¿ç”¨äº†ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼Œé‚£ä¹ˆå¤‡ä»½å°±åªèƒ½é€šè¿‡ FTWRL æ–¹æ³•ã€‚è¿™å¾€å¾€æ˜¯ DBA è¦æ±‚ä¸šåŠ¡å¼€å‘äººå‘˜ä½¿ç”¨ InnoDB æ›¿ä»£ MyISAM çš„åŸå› ä¹‹ä¸€ã€‚<br>2.è¡¨çº§é”<br>  ï¼ˆ1ï¼‰MySQL é‡Œé¢è¡¨çº§åˆ«çš„é”æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯è¡¨é”ï¼Œä¸€ç§æ˜¯å…ƒæ•°æ®é”ï¼ˆmeta data lockï¼ŒMDL)ã€‚<br>  ï¼ˆ2ï¼‰è¡¨é”çš„è¯­æ³•æ˜¯ lock tables â€¦ read&#47;writeã€‚ä¸ FTWRL ç±»ä¼¼ï¼Œå¯ä»¥ç”¨ unlock tables ä¸»åŠ¨é‡Šæ”¾é”ï¼Œä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯æ–­å¼€çš„æ—¶å€™è‡ªåŠ¨é‡Šæ”¾ã€‚éœ€è¦æ³¨æ„ï¼Œlock tables è¯­æ³•é™¤äº†ä¼šé™åˆ¶åˆ«çš„çº¿ç¨‹çš„è¯»å†™å¤–ï¼Œä¹Ÿé™å®šäº†æœ¬çº¿ç¨‹æ¥ä¸‹æ¥çš„æ“ä½œå¯¹è±¡ã€‚<br>  ï¼ˆ3ï¼‰å¯¹äº InnoDB è¿™ç§æ”¯æŒè¡Œé”çš„å¼•æ“ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨lock tables å‘½ä»¤æ¥æ§åˆ¶å¹¶å‘ï¼Œæ¯•ç«Ÿé”ä½æ•´ä¸ªè¡¨çš„å½±å“é¢è¿˜æ˜¯å¤ªå¤§ã€‚<br>  ï¼ˆ4ï¼‰å¦ä¸€ç±»è¡¨çº§çš„é”æ˜¯ MDLï¼ˆmetadata lock)ã€‚MDL ä¸éœ€è¦æ˜¾å¼ä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€ä¸ªè¡¨çš„æ—¶å€™ä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚MDL çš„ä½œç”¨æ˜¯ï¼Œä¿è¯è¯»å†™çš„æ­£ç¡®æ€§ã€‚<br>        -&gt;å¦‚æœä¸€ä¸ªæŸ¥è¯¢æ­£åœ¨éå†ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®ï¼Œè€Œæ‰§è¡ŒæœŸé—´å¦ä¸€ä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªè¡¨ç»“æ„åšå˜æ›´ï¼Œåˆ äº†ä¸€åˆ—ï¼Œé‚£ä¹ˆæŸ¥è¯¢çº¿ç¨‹æ‹¿åˆ°çš„ç»“æœè·Ÿè¡¨ç»“æ„å¯¹ä¸ä¸Šï¼Œè‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚<br>        -&gt;å› æ­¤ï¼Œåœ¨ MySQL 5.5 ç‰ˆæœ¬ä¸­å¼•å…¥äº† MDLï¼Œå½“å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶å€™ï¼ŒåŠ  MDL è¯»é”ï¼›å½“è¦å¯¹è¡¨åšç»“æ„å˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ  MDL å†™é”ã€‚<br>        -&gt;è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥ã€‚<br>        -&gt;è¯»å†™é”ä¹‹é—´ã€å†™é”ä¹‹é—´æ˜¯äº’æ–¥çš„ï¼Œç”¨æ¥ä¿è¯å˜æ›´è¡¨ç»“æ„æ“ä½œçš„å®‰å…¨æ€§ã€‚å› æ­¤ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹è¦åŒæ—¶ç»™ä¸€ä¸ªè¡¨åŠ å­—æ®µï¼Œå…¶ä¸­ä¸€ä¸ªè¦ç­‰å¦ä¸€ä¸ªæ‰§è¡Œå®Œæ‰èƒ½å¼€å§‹æ‰§è¡Œã€‚<br>  ï¼ˆ5ï¼‰å¦‚ä½•å®‰å…¨åœ°ç»™å°è¡¨åŠ å­—æ®µï¼Ÿ<br>        æ¯”è¾ƒç†æƒ³çš„æœºåˆ¶æ˜¯ï¼Œåœ¨ alter table è¯­å¥é‡Œé¢è®¾å®šç­‰å¾…æ—¶é—´ï¼Œå¦‚æœåœ¨è¿™ä¸ªæŒ‡å®šçš„ç­‰å¾…æ—¶é—´é‡Œé¢èƒ½å¤Ÿæ‹¿åˆ° MDL å†™é”æœ€å¥½ï¼Œæ‹¿ä¸åˆ°ä¹Ÿä¸è¦é˜»å¡åé¢çš„ä¸šåŠ¡è¯­å¥ï¼Œå…ˆæ”¾å¼ƒã€‚ä¹‹åå¼€å‘äººå‘˜æˆ–è€… DBA å†é€šè¿‡é‡è¯•å‘½ä»¤é‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚","like_count":0},{"had_liked":false,"id":81275,"user_name":"å¤§é­”ç‹ğŸ‘»","can_delete":false,"product_type":"c1","uid":1305143,"ip_address":"","ucode":"2BB7C31C3B38C7","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/37/ed78d4d5.jpg","comment_is_top":false,"comment_ctime":1553846515,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553846515","product_id":100020801,"comment_content":"å…¨å±€çº§é”ï¼š <br>ï¼ˆ1ï¼‰å¯¹æ•´ä¸ªæ•°æ®åº“çš„å®ä¾‹åŠ é”ã€‚<br>ï¼ˆ2ï¼‰åŠ å…¨å±€è¯»é”å‘½ä»¤ï¼š Flush tables with read lock (FTWRL)<br>ï¼ˆ3ï¼‰åº”ç”¨åœºæ™¯ï¼š åšå…¨åº“é€»è¾‘å¤‡ä»½ï¼Œå°±æ˜¯æŠŠæ•´ä¸ªåº“æ‰€æœ‰è¡¨éƒ½selectå‡ºæ¥æˆæ–‡æœ¬ã€‚å½“ä¸€ä¸ªè¿›ç¨‹åœ¨å¤‡ä»½æ•°æ®ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹è¦è¿‡æ¥ä¿®æ”¹æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°æ•°æ®çš„ä¸ä¸€è‡´æ€§ã€‚æ‰€ä»¥åœ¨è¯»åº“çš„æ—¶å€™ï¼Œå¦‚æœæ•°æ®åº“å¼•æ“æ”¯æŒäº‹åŠ¡ï¼Œåˆ™éœ€è¦å¼€å¯äº‹åŠ¡ï¼ŒMVCCä¼šä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ã€‚ä½†æ˜¯å¦‚æœæ•°æ®åº“å¼•æ“ä¸æ”¯æŒäº‹åŠ¡çš„è¯ï¼Œéœ€è¦åŠ å…¨å±€é”ã€‚<br>ï¼ˆ4ï¼‰mysqldump çš„ä½¿ç”¨å‚æ•°â€“single-transactionçš„æ—¶å€™ï¼Œå¯¼æ•°æ®ä¹‹å‰å°±ä¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œæ¥ç¡®ä¿æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ã€‚è€Œç”±äºMVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰çš„æ”¯æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­çš„æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°çš„ã€‚ä½†æ˜¯single-transactionæ–¹æ³•åªé€‚ç”¨äºä½¿ç”¨äº‹åŠ¡å¼•æ“çš„åº“ï¼ˆInnoDBï¼‰,åƒMyISAMè¿™ç§ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“ï¼Œå°±åªèƒ½ä½¿ç”¨FTWRLå‘½ä»¤äº†ã€‚<br><br>è¡¨çº§é”ï¼š<br>ï¼ˆ1ï¼‰æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è¡¨é”ï¼Œä¸€ç§æ˜¯å…ƒæ•°æ®é”ï¼ˆmeta data lock, MDL ï¼‰<br>ï¼ˆ2ï¼‰è¯­æ³•ï¼šlock tables ... read&#47;writeï¼Œ ç¼ºç‚¹ï¼šé™¤äº†é™åˆ¶åˆ«çš„çº¿ç¨‹çš„è¯»å†™å¤–ï¼Œä¹Ÿé™åˆ¶äº†æœ¬çº¿ç¨‹çš„è¯»å†™ï¼Œæ¯”å¦‚è¯´ï¼šlock tables t1 read, t2 writeï¼Œå…¶ä»–çº¿ç¨‹çš„è¯»å†™æ“ä½œä¼šè¢«é˜»å¡ï¼Œæœ¬çº¿ç¨‹åœ¨unlock tablesä¹‹å‰ï¼Œä¹Ÿåªèƒ½è¯»t1, è¯»å†™t2ï¼Œ ä¸èƒ½å†™t1ï¼Œä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–çš„è¡¨<br>ï¼ˆ3ï¼‰MDL é”æ˜¯ç³»ç»Ÿé»˜è®¤ä¼šåŠ çš„ã€‚å½“å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼ŒåŠ MDLè¯»é”ï¼Œå½“è¦å¯¹è¡¨ç»“æ„å˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLå†™é”ã€‚è¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œè¯»å†™é”ä¹‹é—´ã€å†™é”ä¹‹é—´äº’æ–¥ï¼Œç”¨æ¥ä¿è¯è¡¨ç»“æ„å˜æ›´çš„å®‰å…¨æ€§èƒ½ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œäº‹åŠ¡ä¸­çš„MDLé”ï¼Œåœ¨è¯­å¥æ‰§è¡Œå¼€å§‹çš„æ—¶å€™ç”³è¯·ï¼Œä½†æ˜¯åœ¨è¯­å¥ç»“æŸåå¹¶ä¸ä¼šé©¬ä¸Šé‡Šæ”¾ï¼Œè€Œæ˜¯ç­‰åˆ°æäº¤æ•´ä¸ªäº‹åŠ¡ä¹‹åå†é‡Šæ”¾ã€‚<br>é—®é¢˜ï¼š å¦‚ä½•å®‰å…¨çš„ç»™è¡¨åŠ å­—æ®µï¼Ÿ   åœ¨ç»™è¡¨åŠ å­—æ®µï¼Œæˆ–è€…ä¿®æ”¹å­—æ®µï¼Œæˆ–è€…åŠ ç´¢å¼•ï¼Œéƒ½éœ€è¦æ‰«æå…¨è¡¨çš„æ•°æ®ã€‚å¦‚æœç°åœ¨éœ€è¦å˜æ›´ä¸€ä¸ªçƒ­ç‚¹è¡¨ï¼Œè™½ç„¶æ•°æ®é‡ä¸å¤§ï¼Œä½†æ˜¯ä¸Šé¢çš„è¯·æ±‚å¾ˆé¢‘ç¹ï¼Œè€Œä½ ä¸å¾—ä¸åŠ ä¸ªå­—æ®µï¼Œä½ è¯¥æ€ä¹ˆåšï¼Ÿ ç­”ï¼š åœ¨information_schema.innodb_trxè¡¨ä¸­killæ‰é•¿äº‹åŠ¡çš„åšæ³•å¯èƒ½æœªå¿…ç®¡ç”¨ï¼Œå› ä¸ºæ–°çš„è¯·æ±‚é©¬ä¸Šå°±æ¥äº†ã€‚æ¯”è¾ƒç†æƒ³çš„æœºåˆ¶æ˜¯ï¼Œåœ¨alter tableè¯­å¥é‡Œé¢è®¾å®šç­‰å¾…æ—¶é—´ï¼Œå¦‚æœåœ¨è¿™ä¸ªæŒ‡å®šç­‰å¾…æ—¶é—´é‡Œé¢èƒ½å¤Ÿæ‹¿åˆ°MDLå†™é”æœ€å¥½ï¼Œæ‹¿ä¸åˆ°ä¹Ÿä¸è¦é˜»å¡åé¢çš„ä¸šåŠ¡è¯­å¥ï¼Œå…ˆæ”¾å¼ƒï¼Œå†é‡è¯•è¿™ä¸ªè¿‡ç¨‹ã€‚  alter table tab_name wait N add column...<br>","like_count":0},{"had_liked":false,"id":81251,"user_name":"leon","can_delete":false,"product_type":"c1","uid":1217955,"ip_address":"","ucode":"97610F35D2543A","user_header":"https://static001.geekbang.org/account/avatar/00/12/95/a3/0a3cde60.jpg","comment_is_top":false,"comment_ctime":1553842310,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553842310","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå°è¡¨åŠ å­—æ®µé‚£ä¸ªä¾‹å­ä¸­ï¼Œsession C çš„MDLå†™é”å¹¶æ²¡ç”³è¯·åˆ°ï¼ˆé˜»å¡äº†ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™session Dçš„è¯»é”ä¸ºä»€ä¹ˆè¿˜ä¼šè¢«session Cçš„å†™é”é˜»å¡ä½å‘¢ï¼Ÿ ","like_count":0},{"had_liked":false,"id":79304,"user_name":"æƒ³å½“ä¸Šå¸çš„å¸æœº","can_delete":false,"product_type":"c1","uid":1239378,"ip_address":"","ucode":"D8251388854911","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/52/f07e9001.jpg","comment_is_top":false,"comment_ctime":1553431279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553431279","product_id":100020801,"comment_content":"å¦‚æœå›¾ä¸­çš„session cé˜»å¡ä»€ä¹ˆéƒ½ä¸åšçš„è¯ï¼Œå¤šä¹…ä¼šè¶…æ—¶ï¼Œæœ‰é»˜è®¤çš„è¶…æ—¶æ—¶é—´å— è°¢è°¢","like_count":0},{"had_liked":false,"id":78892,"user_name":"devil","can_delete":false,"product_type":"c1","uid":1259625,"ip_address":"","ucode":"BB6090411BAA23","user_header":"https://static001.geekbang.org/account/avatar/00/13/38/69/864569a4.jpg","comment_is_top":false,"comment_ctime":1553270545,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553270545","product_id":100020801,"comment_content":"ä¾‹å­ä¸­ddlçš„å˜æ›´ä¸æ˜¯å› ä¸ºæœ‰äº‹åŠ¡æ²¡æäº¤è¯»é”æ²¡é‡Šæ”¾åº”è¯¥è¿˜æ²¡æœ‰æ‹¿åˆ°MDLå†™é”ï¼Œæ€ä¹ˆä¼šé˜»å¡åé¢çš„è¯»é”å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":78746,"user_name":"æ—¥å…‰å€¾åŸ","can_delete":false,"product_type":"c1","uid":1304230,"ip_address":"","ucode":"831A55F774C34A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIZtZz0LgYRdLLOxuNtRv7YetrZrpoQ81ugaXSp9r25obIrlibTbicq5JnMTEicGLG0C9Z7fZjenSrFA/132","comment_is_top":false,"comment_ctime":1553228320,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1553228320","product_id":100020801,"comment_content":"æ–‡ä¸­å’Œè¯„è®ºåŒºçš„ï¼Œæ¯ä¸ªsessionå…ˆå¼€å¯ä¸è‡ªåŠ¨æäº¤äº‹åŠ¡set autocommit=0åï¼Œ<br> session1ï¼šselect * from test where id=1;  è·å–æ•°æ®<br> session2ï¼šselect * from test where id=1; è·å–æ•°æ®<br> session3: alter table test add sex int; é˜»å¡<br> session4ï¼šselect * from test where id=1; é˜»å¡<br><br>session1ï¼Œsession2 commit , session4 è·å–æ•°æ®ï¼Œsession3 ç»§ç»­é˜»å¡ï¼Œæ²¡æœ‰è¾“å…¥æ ï¼Œsession4 commit,session3æ‰é‡Šæ”¾é˜»å¡ ç°è±¡ç¡®å®ä¸æ–‡ä¸­å®ä¾‹ä¸ç¬¦ï¼Œæœ›è€å¸ˆè§£ç­”ã€‚","like_count":0,"discussions":[{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10230,"discussion_content":"mysql5.5çš„è¯å’Œè€å¸ˆæè¿°çš„ä¸€æ ·ï¼Œ5.6 5.7ä¸ä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568277650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78151,"user_name":"è¯¸è‘›æ‘å¤«","can_delete":false,"product_type":"c1","uid":1055492,"ip_address":"","ucode":"E4E3655D62CF52","user_header":"https://static001.geekbang.org/account/avatar/00/10/1b/04/caad53e0.jpg","comment_is_top":false,"comment_ctime":1553079986,"is_pvip":false,"replies":[{"id":"28899","content":"â€œé‡æ–°æ‰“å¼€è¡¨å´æ‰“ä¸å¼€â€ æ˜¯ä»€ä¹ˆç°è±¡ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1553415334,"ip_address":"","comment_id":78151,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553079986","product_id":100020801,"comment_content":"è¯·é—®æˆ‘ä»Šå¤©ç»™è¡¨å˜æ›´ç´¢å¼•æ—¶å€™ï¼Œé•¿æ—¶é—´éƒ½æ‰§è¡Œä¸äº†ï¼Œåæ¥å®¢æˆ·ç«¯ç¨‹åºå´©æºƒé€€å‡ºäº†ï¼Œé‡æ–°æ‰“å¼€è¡¨å´æ‰“ä¸å¼€æ˜¯å› ä¸ºä»€ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443985,"discussion_content":"â€œé‡æ–°æ‰“å¼€è¡¨å´æ‰“ä¸å¼€â€ æ˜¯ä»€ä¹ˆç°è±¡ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553415334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78118,"user_name":"å°å‘¨åŒå­¦","can_delete":false,"product_type":"c1","uid":1264135,"ip_address":"","ucode":"28D157B7AAA377","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/07/1cab75cc.jpg","comment_is_top":false,"comment_ctime":1553073594,"is_pvip":false,"replies":[{"id":"28902","content":"å¯¹äºå¤‡ä»½è¡Œä¸ºæ¥è¯´ï¼Œ â€œå¤‡ä»½å‡ºæ¥çš„æ•°æ®è·ŸçœŸå®æ•°æ®ä¹‹é—´å­˜åœ¨å·®è·â€æ˜¯æ²¡å…³ç³»çš„ã€‚<br><br>å¤‡ä»½è¡¨ç¤ºçš„æ˜¯â€œåœ¨æŸä¸ªæ—¶åˆ»ï¼Œè¿™ä¸ªç³»ç»Ÿçš„çŠ¶æ€â€ï¼Œ åªè¦å¤‡ä»½å‡ºæ¥çš„æ•°æ®ï¼Œè·Ÿâ€œè¿™ä¸ªæ—¶åˆ»â€æ˜¯ä¸€è‡´çš„å°±å¯ä»¥äº†<br><br>ä¸éœ€è¦è·Ÿâ€œå¤‡ä»½å®Œæˆåâ€çš„æ—¶é—´ç‚¹ä¸€è‡´","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1553415488,"ip_address":"","comment_id":78118,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553073594","product_id":100020801,"comment_content":"ä½¿ç”¨ &quot;mysqldump -single-transaction &quot; åšå¤‡ä»½ï¼Œä¼šä¸ä¼šå­˜åœ¨å¤‡ä»½æœŸé—´æœ‰äº›æ•°æ®è¢«ä¿®æ”¹ï¼Œè€Œå¤‡ä»½çº¿ç¨‹åˆæ— æ³•è¯»åˆ°æœ€æ–°æ•°æ®ï¼Œå¯¼è‡´å¤‡ä»½å‡ºæ¥çš„æ•°æ®è·ŸçœŸå®æ•°æ®ä¹‹é—´å­˜åœ¨å·®è·å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443974,"discussion_content":"å¯¹äºå¤‡ä»½è¡Œä¸ºæ¥è¯´ï¼Œ â€œå¤‡ä»½å‡ºæ¥çš„æ•°æ®è·ŸçœŸå®æ•°æ®ä¹‹é—´å­˜åœ¨å·®è·â€æ˜¯æ²¡å…³ç³»çš„ã€‚\n\nå¤‡ä»½è¡¨ç¤ºçš„æ˜¯â€œåœ¨æŸä¸ªæ—¶åˆ»ï¼Œè¿™ä¸ªç³»ç»Ÿçš„çŠ¶æ€â€ï¼Œ åªè¦å¤‡ä»½å‡ºæ¥çš„æ•°æ®ï¼Œè·Ÿâ€œè¿™ä¸ªæ—¶åˆ»â€æ˜¯ä¸€è‡´çš„å°±å¯ä»¥äº†\n\nä¸éœ€è¦è·Ÿâ€œå¤‡ä»½å®Œæˆåâ€çš„æ—¶é—´ç‚¹ä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553415488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77704,"user_name":"chrise","can_delete":false,"product_type":"c1","uid":1069461,"ip_address":"","ucode":"D4940903AD4492","user_header":"https://static001.geekbang.org/account/avatar/00/10/51/95/0f79febb.jpg","comment_is_top":false,"comment_ctime":1552985209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552985209","product_id":100020801,"comment_content":"è¯»é”å’Œå†™é”çš„åŒºåˆ«<br>1.è¯»é” LOCK TABLE customer READ;<br>ä¸block å…¶ä»–session (LOCK TABLE customer READ)ï¼Œ<br>block   å…¶ä»–session(LOCK TABLE customer WRITE)ï¼Œinsert&#47;update&#47;delete&#47;alter;<br>æŠ¥é”™    å½“å‰session insert&#47;update&#47;delete&#47;alterï¼›<br><br>2.å†™é” LOCK TABLE customer WRITE;<br>block   å…¶ä»–session(LOCK TABLE customer READ,LOCK TABLE customer WRITE)ï¼Œinsert&#47;update&#47;delete&#47;alter;<br>ä¸æŠ¥é”™   å½“å‰session insert&#47;update&#47;delete&#47;alterï¼›","like_count":0},{"had_liked":false,"id":74625,"user_name":"GLADIATOR","can_delete":false,"product_type":"c1","uid":1448564,"ip_address":"","ucode":"6FE14E0BCD6240","user_header":"https://static001.geekbang.org/account/avatar/00/16/1a/74/8f7f8786.jpg","comment_is_top":false,"comment_ctime":1552269134,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552269134","product_id":100020801,"comment_content":"æ—è€å¸ˆæ‚¨å¥½ï¼Œåœ¨mysqlç»„å¤åˆ¶ï¼ˆå¤šä¸»æ¨¡å¼ï¼‰ä¸‹ï¼ŒMDLé”ä¼šä¸ä¼šå¯¼è‡´æ›´å¤æ‚çš„æƒ…å†µï¼Œå¤šä¸»æ¨¡å¼ä¸‹ï¼Œç»å¸¸å› ä¸ºå®¢æˆ·ç«¯truncateè¡¨å¯¼è‡´å¤§é‡wait for MDL,æ•´ä¸ªåº“éƒ½åƒæ˜¯å¡æ­»äº†ï¼›æˆ‘æŠŠæ‰€æœ‰æ²¡æäº¤çš„äº‹åŠ¡å¯¹åº”çš„processéƒ½killï¼ŒæŠŠDDLæœ¬èº«çš„è¿›ç¨‹ä¹Ÿkilläº†ï¼Œä½†ä¾ç„¶è§£å†³ä¸äº†é—®é¢˜ã€‚åœ¨å•æœºåº“ä¸Šï¼Œåˆ°æ˜¯æ²¡æœ‰å¤ç°è¿™ç§ç°è±¡ï¼›æˆ‘æ€€ç–‘æ˜¯å¤šä¸»çš„ç»„å¤åˆ¶æ¶æ„è‡ªèº«çš„ç¼ºé™·å¯¼è‡´çš„ã€‚","like_count":0},{"had_liked":false,"id":72372,"user_name":"å’©å’©å’©","can_delete":false,"product_type":"c1","uid":1237849,"ip_address":"","ucode":"9DEC7D5D52D972","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/6a8fRQFxX5VXOpRKyYibsemKwDMexMxkzZOBquPo6T4HOcYicBiaTcqibDoTIhZSjVjF3nKXTEGDYOGPt2xqqwiawjg/132","comment_is_top":false,"comment_ctime":1551600792,"is_pvip":false,"replies":[{"id":"26211","content":"1. è¿™æ˜¯è¯­ä¹‰è§„å®šçš„å“ˆ<br>2. èƒ½è¯»å†™è¿™ä¸ªè¡¨ï¼Œä¸èƒ½è¯»å†™å…¶ä»–è¡¨ï¼›<br>3. lock tableå¾ˆå°‘ç›´æ¥å‘ç”Ÿé”™è¯¯ï¼Œä¸€èˆ¬å°±æ˜¯å¦‚æœæœ‰åˆ«çš„çº¿ç¨‹é”ä½ï¼Œä¼šè¿›å…¥ç­‰å¾…ã€‚é”™è¯¯åº”è¯¥æ˜¯æŒ‡é”è¶…æ—¶ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551604894,"ip_address":"","comment_id":72372,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551600792","product_id":100020801,"comment_content":"è¿˜æ˜¯ä¸æ‡‚è¡¨é”åœ¨ä¸åŒä¼šè¯è¯»å–ä¸åŒè¡¨ä¸­çš„è¡¨ç°ï¼Ÿ<br>æ¯”å¦‚ä¸€ä¸ªä¼šè¯ç»™ä¸€ä¸ªè¡¨åŠ äº†è¯»é”ï¼Œé‚£è¯¥ä¼šè¯æ€ä¹ˆè®¿é—®ä¸äº†å…¶ä»–è¡¨ã€‚è€Œå…¶ä»–ä¼šè¯å´å¯ä»¥è®¿é—®ï¼Ÿ<br>ä¸€ä¸ªä¼šè¯ç»™ä¸€å¼ è¡¨åŠ å†™é”ï¼Œè¿™ä¸ªä¼šè¯èƒ½è¯»å†™å…¶è¡¨ï¼Œä½†æ˜¯ä¸èƒ½è¯»å†™å…¶ä»–è¡¨ï¼Ÿ<br>å¦å¤–ï¼Œè¯»å†™å‘ç”Ÿé˜»å¡ä»¥åŠæŠ¥lock table  é”™è¯¯åº”è¯¥ä¸åŒæ¦‚å¿µå§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441562,"discussion_content":"1. è¿™æ˜¯è¯­ä¹‰è§„å®šçš„å“ˆ\n2. èƒ½è¯»å†™è¿™ä¸ªè¡¨ï¼Œä¸èƒ½è¯»å†™å…¶ä»–è¡¨ï¼›\n3. lock tableå¾ˆå°‘ç›´æ¥å‘ç”Ÿé”™è¯¯ï¼Œä¸€èˆ¬å°±æ˜¯å¦‚æœæœ‰åˆ«çš„çº¿ç¨‹é”ä½ï¼Œä¼šè¿›å…¥ç­‰å¾…ã€‚é”™è¯¯åº”è¯¥æ˜¯æŒ‡é”è¶…æ—¶ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551604894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70608,"user_name":"æµªè¡å±…å£«","can_delete":false,"product_type":"c1","uid":1055456,"ip_address":"","ucode":"376D4CBC0CB2BD","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/e0/06e54287.jpg","comment_is_top":false,"comment_ctime":1551146252,"is_pvip":false,"replies":[{"id":"25191","content":"å•Š ä¸ä¼šå§ï¼Œå®Œæ•´å¤ç°æ­¥éª¤å‘ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551146899,"ip_address":"","comment_id":70608,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551146252","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½, æˆ‘åœ¨ç”¨å®˜æ–¹çš„mysql docker imageæµ‹è¯•çš„æ—¶å€™  flush tables with read lockä¹‹åä»ç„¶å¯ä»¥insert, è°·æ­Œæœäº†ä¹Ÿæ²¡æ”¶åˆ°, è¯·é—®æ˜¯å•¥åŸå› ?","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440724,"discussion_content":"å•Š ä¸ä¼šå§ï¼Œå®Œæ•´å¤ç°æ­¥éª¤å‘ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551146899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65254,"user_name":"æˆ‘å·²ç»è®¾ç½®äº†æ˜µç§°","can_delete":false,"product_type":"c1","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1549163948,"is_pvip":false,"replies":[{"id":"23167","content":"è¯»é”ä¹‹é—´å…¼å®¹ï¼Œ<br>è¯»å†™ã€å†™å†™ä¹‹é—´éœ€è¦äº’ç›¸ç­‰å¾…","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549218611,"ip_address":"","comment_id":65254,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1549163948","product_id":100020801,"comment_content":"å»ºè®®å…ˆè®²ä¸‹å„ä¸ªé”çš„è¯»é”ã€å†™é”ä¼šäº§ç”Ÿä»€ä¹ˆæ•ˆæœã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438375,"discussion_content":"è¯»é”ä¹‹é—´å…¼å®¹ï¼Œ\nè¯»å†™ã€å†™å†™ä¹‹é—´éœ€è¦äº’ç›¸ç­‰å¾…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549218611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64622,"user_name":"å“¼å“ˆäºŒå°†","can_delete":false,"product_type":"c1","uid":1180566,"ip_address":"","ucode":"E5EAEB65D35F17","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/96/a28d5681.jpg","comment_is_top":false,"comment_ctime":1548836731,"is_pvip":false,"replies":[{"id":"22950","content":"5.6çš„å®ç°ä¸Šå°±æ˜¯ï¼Œç”³è¯·ä¸åˆ°ä¹Ÿè¦å ç€ğŸ˜…","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548937005,"ip_address":"","comment_id":64622,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548836731","product_id":100020801,"comment_content":"æ ¹æ®è¯»å†™é”çš„æ€§è´¨ï¼Œsession cè¦æƒ³è¿›è¡Œå†™æ“ä½œéœ€è¦å…ˆè·å–å†™é”ï¼Œè€Œç”±äºå½“å‰å·²æœ‰ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨è¯»é”ï¼Œå¯¼è‡´å…¶æ— æ³•è·å–åˆ°å†™é”ï¼›æ—¢ç„¶session cæ²¡è·å–åˆ°å†™é”ï¼Œé‚£åé¢çš„session dåº”è¯¥æ˜¯å¯ä»¥è·å–åˆ°è¯»é”çš„å‘€ï¼Œä¸è‡³äºè¢«é˜»å¡çš„å‘€ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438105,"discussion_content":"5.6çš„å®ç°ä¸Šå°±æ˜¯ï¼Œç”³è¯·ä¸åˆ°ä¹Ÿè¦å ç€ğŸ˜…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548937005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63617,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1548417495,"is_pvip":false,"replies":[{"id":"22543","content":"1. åŠ å­—æ®µçš„DDLæ‰§è¡Œæµç¨‹çœ‹ä¸‹ç¬¬13ç¯‡å“ˆã€‚ç­”æ¡ˆæ˜¯åœ¨DDLæ‰§è¡Œè¿‡ç¨‹ä¸­è¯»æ•°æ®ï¼Œçœ‹åˆ°çš„æ˜¯ä¿®æ”¹ä¹‹å‰çš„çš„è¡¨ç»“æ„ã€‚<br>2. è¿™ä¸ªä¹Ÿæ˜¯çœ‹ä¸€ä¸‹æ‰§è¡Œæµç¨‹åº”è¯¥å°±æ˜ç™½äº†ï¼Œéœ€è¦åˆ‡è¡¨åğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548492014,"ip_address":"","comment_id":63617,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548417495","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼æ‚¨æœ‰å›å¤å¦‚ä¸‹ï¼š<br><br>-----<br>Online DDLçš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br>1. æ‹¿MDLå†™é”<br>2. é™çº§æˆMDLè¯»é”<br>3. çœŸæ­£åšDDL<br>4. å‡çº§æˆMDLå†™é”<br>5. é‡Šæ”¾MDLé”<br><br>1ã€2ã€4ã€5å¦‚æœæ²¡æœ‰é”å†²çªï¼Œæ‰§è¡Œæ—¶é—´éå¸¸çŸ­ã€‚ç¬¬3æ­¥å ç”¨äº†DDLç»å¤§éƒ¨åˆ†æ—¶é—´ï¼Œè¿™æœŸé—´è¿™ä¸ªè¡¨å¯ä»¥æ­£å¸¸è¯»å†™æ•°æ®ï¼Œæ˜¯å› æ­¤ç§°ä¸ºâ€œonline â€<br>-----<br><br>é—®é¢˜ä¸€ï¼š<br>å‡è®¾çº¿ç¨‹ A æ­£åœ¨æ‰§è¡Œç¬¬ 3 æ­¥ï¼Œç»™è¡¨åŠ å­—æ®µã€‚ï¼ˆæ“ä½œè¿‡ç¨‹æ˜¯è¿™æ ·ä¸ï¼šéå†èšç°‡ç´¢å¼•ï¼Œç»™æ¯è¡Œè®°å½•åˆ†é…æ–°å¢å­—æ®µçš„å†…å­˜ç©ºé—´ã€‚ï¼‰<br>è¿™æ—¶çº¿ç¨‹ B æŸ¥è¯¢æ•°æ®ï¼Œæ­£åœ¨éå†è¡¨ä¸­çš„æ•°æ®ã€‚å¾ˆæœ‰å¯èƒ½æ‹¿åˆ°çš„ç»“æœè·Ÿè¡¨ç»“æ„å¯¹ä¸ä¸Šäº†ã€‚ï¼ˆä¸çŸ¥é“æ–°å¢æˆ–åˆ é™¤å­—æ®µæ—¶ï¼Œå®é™…çš„æ“ä½œæµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿï¼‰<br><br>é—®é¢˜äºŒï¼š<br>DDL å®Œæˆåï¼Œä¸ºå•¥è¦å‡çº§ MDL å†™é”å†é‡Šæ”¾å–ï¼Ÿ<br>å› ä¸º DDL æœŸé—´è·å–çš„æ˜¯ MDL è¯»é”ï¼Œæ‰€ä»¥æ˜¯å…è®¸å¤šä¸ªçº¿ç¨‹å…±åŒè¿›è¡Œ DDL æ“ä½œçš„ã€‚é‚£å‡çº§ MDL å†™é”å†é€€å‡ºï¼Œå°±åº”è¯¥ä¸æ˜¯é˜²æ­¢é€€å‡ºæœŸé—´æœ‰å…¶ä»–çº¿ç¨‹åœ¨ DDL æ“ä½œã€‚<br><br>è°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437655,"discussion_content":"1. åŠ å­—æ®µçš„DDLæ‰§è¡Œæµç¨‹çœ‹ä¸‹ç¬¬13ç¯‡å“ˆã€‚ç­”æ¡ˆæ˜¯åœ¨DDLæ‰§è¡Œè¿‡ç¨‹ä¸­è¯»æ•°æ®ï¼Œçœ‹åˆ°çš„æ˜¯ä¿®æ”¹ä¹‹å‰çš„çš„è¡¨ç»“æ„ã€‚\n2. è¿™ä¸ªä¹Ÿæ˜¯çœ‹ä¸€ä¸‹æ‰§è¡Œæµç¨‹åº”è¯¥å°±æ˜ç™½äº†ï¼Œéœ€è¦åˆ‡è¡¨åğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548492014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62359,"user_name":"Lukia","can_delete":false,"product_type":"c1","uid":1028698,"ip_address":"","ucode":"C19472337BCCC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/5a/574f5bb0.jpg","comment_is_top":false,"comment_ctime":1548038537,"is_pvip":false,"replies":[{"id":"22096","content":"1. æ”¹å…ƒæ•°æ®æ˜¯åœ¨ç¬¬å››æ­¥å’Œç¬¬äº”æ­¥ä¹‹é—´åšçš„ï¼›<br>   è¿™æ—¶å€™ç¡®å®æŒæœ‰å†™é”<br>2. ä¸Šé¢çš„å›ç­”åº”è¯¥é¡ºä¾¿å›å¤äº†è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸ªç¡®å®ä¸ç¬¦åˆä¸¤é˜¶æ®µé”åè®®å“ˆï¼Œä¸ºäº†å¹¶å‘ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548078504,"ip_address":"","comment_id":62359,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548038537","product_id":100020801,"comment_content":"å¯¹è€å¸ˆçš„Online DDLçš„è¿‡ç¨‹æœ‰ä¸€äº›ç–‘æƒ‘<br>1. æ‹¿MDLå†™é”<br>2. é™çº§æˆMDLè¯»é”<br>3. çœŸæ­£åšDDL<br>4. å‡çº§æˆMDLå†™é”<br>5. é‡Šæ”¾MDLé”<br><br>DDLä¸æ˜¯éœ€è¦ä¿®æ”¹è¡¨å…ƒæ•°æ®çš„ä¹ˆï¼Œä¸ºä»€ä¹ˆå¯ä»¥é™ä¸ºMDLè¯»é”ã€‚å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¦å…ˆæ‹¿å†™é”å†é™ä¸ºè¯»é”å†å‡çº§ä¸ºå†™é”ï¼Œå¥½åƒä¹Ÿä¸ç¬¦åˆäºŒé˜¶æ®µé”åè®®çš„é”ä¸Šå‡å’Œä¸‹é™çš„çº¦æŸã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437182,"discussion_content":"1. æ”¹å…ƒæ•°æ®æ˜¯åœ¨ç¬¬å››æ­¥å’Œç¬¬äº”æ­¥ä¹‹é—´åšçš„ï¼›\n   è¿™æ—¶å€™ç¡®å®æŒæœ‰å†™é”\n2. ä¸Šé¢çš„å›ç­”åº”è¯¥é¡ºä¾¿å›å¤äº†è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸ªç¡®å®ä¸ç¬¦åˆä¸¤é˜¶æ®µé”åè®®å“ˆï¼Œä¸ºäº†å¹¶å‘ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548078504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61788,"user_name":"Geek_41d472","can_delete":false,"product_type":"c1","uid":1247965,"ip_address":"","ucode":"DEC2B6329460CF","user_header":"https://static001.geekbang.org/account/avatar/00/13/0a/dd/88fa7b52.jpg","comment_is_top":false,"comment_ctime":1547801023,"is_pvip":false,"replies":[{"id":"21921","content":"ä½ ç†è§£æ²¡é”™å‘€ï¼Œæ‰€ä»¥æ‰è¯´ â€œæ‹¿ä¸åˆ°ä¹Ÿä¸è¦é˜»å¡åé¢çš„ä¸šåŠ¡è¯­å¥ï¼Œå…ˆæ”¾å¼ƒâ€ï¼Œè®©åé¢çš„æŸ¥è¯¢å…ˆæ‰§è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547803077,"ip_address":"","comment_id":61788,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547801023","product_id":100020801,"comment_content":"æ‚¨å¥½è€å¸ˆï¼Œæ–‡ä¸­æåˆ°çš„<br>æ¯”è¾ƒç†æƒ³çš„æœºåˆ¶æ˜¯ï¼Œåœ¨ alter table è¯­å¥é‡Œé¢è®¾å®šç­‰å¾…æ—¶é—´ï¼Œå¦‚æœåœ¨è¿™ä¸ªæŒ‡å®šçš„ç­‰å¾…æ—¶é—´é‡Œé¢èƒ½å¤Ÿæ‹¿åˆ° MDL å†™é”æœ€å¥½ï¼Œæ‹¿ä¸åˆ°ä¹Ÿä¸è¦é˜»å¡åé¢çš„ä¸šåŠ¡è¯­å¥ï¼Œå…ˆæ”¾å¼ƒã€‚<br>æ‹¿åˆ°MDLå†™é”ä¹‹åï¼Œå¦‚æœåé¢è¿˜æœ‰selectè¯­å¥ï¼Œè¿™ä¸ªæ˜¯è¯»é”ï¼Œæ ¹æ®ä½ å‰é¢æ–‡ç« çš„æè¿°ï¼Œå†™è¯»é”æ˜¯äº’æ–¥çš„ï¼Œé‚£ä¹Ÿå°±æ˜¯åé¢çš„æ‰€æœ‰selectéƒ½ä¼šé˜»å¡çš„ï¼Œä¸€æ ·ä¼šé‡è¯•çš„çº¿ç¨‹è¶Šæ¥è¶Šå¤šï¼Œæœ€ç»ˆä¼šçˆ†æ‰ï¼<br>è€å¸ˆï¼Œæ˜¯ä¸æ˜¯æˆ‘ç†è§£é”™äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436996,"discussion_content":"ä½ ç†è§£æ²¡é”™å‘€ï¼Œæ‰€ä»¥æ‰è¯´ â€œæ‹¿ä¸åˆ°ä¹Ÿä¸è¦é˜»å¡åé¢çš„ä¸šåŠ¡è¯­å¥ï¼Œå…ˆæ”¾å¼ƒâ€ï¼Œè®©åé¢çš„æŸ¥è¯¢å…ˆæ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547803077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60698,"user_name":"Eichar","can_delete":false,"product_type":"c1","uid":1344179,"ip_address":"","ucode":"238CE3FFDFE9BF","user_header":"https://static001.geekbang.org/account/avatar/00/14/82/b3/c4031ab0.jpg","comment_is_top":false,"comment_ctime":1547532443,"is_pvip":false,"replies":[{"id":"21668","content":"DMLä¸€èˆ¬æŒ‡çš„æ˜¯å¢åˆ æ”¹<br>ä¸è¿‡è‹¥æœselect ... lock in share mode; select ... for updateä¹Ÿä¼šæœ‰è¡Œé”","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547551740,"ip_address":"","comment_id":60698,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547532443","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒDMLé”æ˜¯ä¸æ˜¯åªé’ˆå¯¹äº‹åŠ¡å•Šï¼Œæ–‡ä¸­è¯´é”æ˜¯åœ¨commitåæ‰ä¼šé‡Šæ”¾ï¼Œå¦‚æœautocommit=1è®¾ç½®äº†ï¼Œselectä¹‹å‰ä¸æ˜¾ç¤ºçš„å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œä¹Ÿæ²¡æœ‰ç›¸åº”çš„commitæ˜¯ä¸æ˜¯å°±ä¸å­˜åœ¨DMLé”äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436587,"discussion_content":"DMLä¸€èˆ¬æŒ‡çš„æ˜¯å¢åˆ æ”¹\nä¸è¿‡è‹¥æœselect ... lock in share mode; select ... for updateä¹Ÿä¼šæœ‰è¡Œé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547551740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58460,"user_name":"å¥‹æ–—å¿ƒ","can_delete":false,"product_type":"c1","uid":1247286,"ip_address":"","ucode":"06A195AB0B6570","user_header":"https://static001.geekbang.org/account/avatar/00/13/08/36/98be3d69.jpg","comment_is_top":false,"comment_ctime":1547086060,"is_pvip":false,"replies":[{"id":"21136","content":"ä¸»è¦æ˜¯è¦è¯´æ˜ï¼Œæœ€å¥½æ˜¯æœ‰ä¸€ä¸ª(c,b)ç´¢å¼•","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547121071,"ip_address":"","comment_id":58460,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547086060","product_id":100020801,"comment_content":"ä¸ŠæœŸæ€è€ƒé¢˜ï¼Œå»æ‰cç´¢å¼•ä¸æ˜¯æ›´å¥½ä¸€ç‚¹å—ï¼Ÿè™½ç„¶cç´¢å¼•è¾¾åˆ°çš„æ•°æ®æ’åºæ˜¯cabã€‚è¿™è¦ç”¨åˆ°2ä¸ªç´¢å¼•ä¸€ä¸ªæ˜¯cä¸€ä¸ªæ˜¯abç´¢å¼•ã€‚ç”¨caä¸€æ¬¡æ€§åˆ°ä½","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436071,"discussion_content":"ä¸»è¦æ˜¯è¦è¯´æ˜ï¼Œæœ€å¥½æ˜¯æœ‰ä¸€ä¸ª(c,b)ç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547121071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58456,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1547085514,"is_pvip":false,"replies":[{"id":"21135","content":"è¿™ä¸ªä¸å¯è€ƒæ®äº†<br><br>ä¸è¿‡æˆ‘è§‰å¾—æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥è®©å½“å‰çº¿ç¨‹å°½å¿«æ‰§è¡Œunlock tablesï¼Œ<br>å®ƒè‡ªå·±æ“ä½œä¸äº†åˆ«çš„è¡¨ï¼Œä¼šå°½å¿«å»é‡Šæ”¾é”ã€‚<br>å¦åˆ™ä¸€ç›´é”ç€ï¼Œå½±å“ç³»ç»Ÿå¹¶å‘åº¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547121035,"ip_address":"","comment_id":58456,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547085514","product_id":100020801,"comment_content":"åŸæ–‡ï¼š<br>ä¸¾ä¸ªä¾‹å­, å¦‚æœåœ¨æŸä¸ªçº¿ç¨‹ A ä¸­æ‰§è¡Œ lock tables t1 read, t2 write; è¿™ä¸ªè¯­å¥ï¼Œåˆ™å…¶ä»–çº¿ç¨‹å†™ t1ã€è¯»å†™ t2 çš„è¯­å¥éƒ½ä¼šè¢«é˜»å¡ã€‚åŒæ—¶ï¼Œçº¿ç¨‹ A åœ¨æ‰§è¡Œ unlock tables ä¹‹å‰ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œè¯» t1ã€è¯»å†™ t2 çš„æ“ä½œã€‚è¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨ã€‚<br><br><br>é—®é¢˜ï¼š<br>è€å¸ˆï¼Œæ—©ä¸Šå¥½ï¼<br>æœ€åä¸€å¥ï¼Œçº¿ç¨‹ A è§£é”å‰ï¼Œä¸å…è®¸å†™ t1ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨ã€‚<br><br>ä¸ºä»€ä¹ˆä¸å…è®¸çº¿ç¨‹ A è®¿é—®å…¶ä»–è¡¨ï¼Œè¯»å…¶ä»–è¡¨çš„æ“ä½œä¹Ÿä¸å…è®¸ä¹ˆï¼Ÿè¿™æ ·è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†è§„é¿å•¥é—®é¢˜å–ï¼Ÿ<br><br>è°¢è°¢è€å¸ˆï¼","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436070,"discussion_content":"è¿™ä¸ªä¸å¯è€ƒæ®äº†\n\nä¸è¿‡æˆ‘è§‰å¾—æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥è®©å½“å‰çº¿ç¨‹å°½å¿«æ‰§è¡Œunlock tablesï¼Œ\nå®ƒè‡ªå·±æ“ä½œä¸äº†åˆ«çš„è¡¨ï¼Œä¼šå°½å¿«å»é‡Šæ”¾é”ã€‚\nå¦åˆ™ä¸€ç›´é”ç€ï¼Œå½±å“ç³»ç»Ÿå¹¶å‘åº¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547121035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57353,"user_name":"daka","can_delete":false,"product_type":"c1","uid":1307998,"ip_address":"","ucode":"A23D82FF956793","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ8ibLXicovSNwEJhP4BOIPxEMle1ZUq1He58xztgBXTQFicdp5m5ibRHwUSoUVk5xQMWFwFXhp56ibm1Q/132","comment_is_top":false,"comment_ctime":1546761660,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546761660","product_id":100020801,"comment_content":"ä¸æ„§ä¸ºé«˜æ‰‹ï¼Œä¸€ç›´æ²¡ææ¸…æ¥šçš„mdlè±ç„¶å¼€æœ—äº†","like_count":0},{"had_liked":false,"id":56545,"user_name":"coderbee","can_delete":false,"product_type":"c1","uid":1005530,"ip_address":"","ucode":"02339998217473","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/da/0adccef5.jpg","comment_is_top":false,"comment_ctime":1546485401,"is_pvip":false,"replies":[{"id":"20381","content":"æ˜¯çš„ï¼Œæœ‰ä¿è¯ä¸»é”®ç®—è¿›å»ï¼Œè¿˜æ˜¯æœ‰åºçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546485824,"ip_address":"","comment_id":56545,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546485401","product_id":100020801,"comment_content":"é¦–å…ˆè°¢è°¢è€å¿ƒç­”å¤ã€‚<br><br>ç´¢å¼•æ˜¯æœ‰åºçš„ï¼Œï¼Œï¼Œæˆ‘çš„ç†è§£æ˜¯ç´¢å¼•  åªæ˜¯  æŒ‰ç´¢å¼•åˆ—è¿›è¡Œæ’åºï¼ŒäºŒçº§ç´¢å¼•å…³è¿çš„ä¸»é”®å€¼æ˜¯ä¸å‚ä¸æ’åºçš„ã€‚<br><br>è¿™ä¸ªç†è§£æ˜¯é”™è¯¯çš„ï¼ŸäºŒçº§ç´¢å¼•ä¼šæŠŠç´¢å¼•åˆ—+ä¸»é”®å€¼ä½œä¸ºæ’åºé”®æ¥æ’åºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435108,"discussion_content":"æ˜¯çš„ï¼Œæœ‰ä¿è¯ä¸»é”®ç®—è¿›å»ï¼Œè¿˜æ˜¯æœ‰åºçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546485824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56542,"user_name":"å°åŠ¨ç‰©å¾ˆå›°","can_delete":false,"product_type":"c1","uid":1133936,"ip_address":"","ucode":"49A727277A37E1","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/70/7d736d5f.jpg","comment_is_top":false,"comment_ctime":1546484931,"is_pvip":false,"replies":[{"id":"20382","content":"å¯¹çš„ï¼Œ5.6æ˜¯è¿™ä¸ªç­–ç•¥å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546485863,"ip_address":"","comment_id":56542,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546484931","product_id":100020801,"comment_content":"å…³äºMDLé”çš„ç§äººç†è§£:<br>è¯»é”:å¯¹è¿™å¼ è¡¨çš„CRUDæ“ä½œéƒ½å¯ä»¥è·å–,ä¸äº’æ–¥å°±æ˜¯å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è·å–,è¯»é”æ˜¯é˜²æ­¢å¹¶å‘å†™çš„,å½“è·å–è¯»é”ä¹‹åå¯¹æ•°æ®çš„å†™è¦ç­‰å…¶ä»–çš„è¯»é”é‡Šæ”¾(commit),è€Œå¯¹selectä¸é˜»å¡<br>å†™é”:é˜»å¡è¯»å†™,ä¸è¯»é”äº’æ–¥,å°±æ˜¯è¯´è·å–å†™é”è¦è¯»é”é‡Šæ”¾æ‰å¯ä»¥,è€Œå†™é”çš„è·å–ä¼šå½±å“åé¢çš„è¯»é”è·å–,å¯¼è‡´æ•°æ®åº“ä¸å¯è¯»å†™,åœ¨é«˜å¹¶å‘æ—¶å€™æ•°æ®åº“ä¼šæŒ‚.<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435105,"discussion_content":"å¯¹çš„ï¼Œ5.6æ˜¯è¿™ä¸ªç­–ç•¥å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546485863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56480,"user_name":"coderbee","can_delete":false,"product_type":"c1","uid":1005530,"ip_address":"","ucode":"02339998217473","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/da/0adccef5.jpg","comment_is_top":false,"comment_ctime":1546476047,"is_pvip":false,"replies":[{"id":"20365","content":"â€œç´¢å¼•æ˜¯æœ‰åºçš„â€<br><br>æˆ‘è§‰å¾—è¿™å¥è¯å°±è¯´æ˜äº†ğŸ˜„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546481106,"ip_address":"","comment_id":56480,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546476047","product_id":100020801,"comment_content":"â€œç´¢å¼•cå°±æ˜¯æŒ‰ç…§cabæ’åºâ€ï¼Œè¿™ä¸ªæœ‰å®˜æ–¹æ–‡æ¡£åšäº†è¯´æ˜å—ï¼Ÿ<br><br>åœ¨ç½‘ä¸Šèƒ½æ‰¾åˆ°æœ€æ¥è¿‘çš„æ˜¯ç´¢å¼•æ‰©å±•ï¼Œå¯ä»¥åšæ’åºä¼˜åŒ–ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435062,"discussion_content":"â€œç´¢å¼•æ˜¯æœ‰åºçš„â€\n\næˆ‘è§‰å¾—è¿™å¥è¯å°±è¯´æ˜äº†ğŸ˜„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546481106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56255,"user_name":"coderbee","can_delete":false,"product_type":"c1","uid":1005530,"ip_address":"","ucode":"02339998217473","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/da/0adccef5.jpg","comment_is_top":false,"comment_ctime":1546412245,"is_pvip":false,"replies":[{"id":"20263","content":"ç´¢å¼•cå°±æ˜¯æŒ‰ç…§ cabè¿™æ ·æ’åº","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546422653,"ip_address":"","comment_id":56255,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546412245","product_id":100020801,"comment_content":"æ‚¨å¥½ï¼Œå¯¹äºä¸ŠæœŸé—®é¢˜çš„ç­”æ¡ˆæœ‰ä¸ªç–‘é—®ï¼šç­”æ¡ˆè¯´ç´¢å¼•cä¸caçš„æ•°æ®æ¨¡å‹æ˜¯ä¸€æ ·çš„ï¼Œè¿™å°±è¦æ±‚äºŒçº§ç´¢å¼•é™¤äº†å¯¹ç´¢å¼•åˆ—è¿›è¡Œæ’åºã€è¿˜å¿…é¡»æŒ‰ä¸»é”®è¿›è¡Œæ’åºï¼Ÿï¼Ÿ<br><br>å¦‚æœæ²¡æœ‰ä¸Šé¢çš„è¦æ±‚ï¼Œç´¢å¼•cçš„é¡ºåºå¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·å§ï¼Œè¿™æ ·è·Ÿcaæ˜¯ä¸ä¸€æ ·çš„ã€‚<br>-c--a-b-<br>2 2 2<br>2 1 3<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434966,"discussion_content":"ç´¢å¼•cå°±æ˜¯æŒ‰ç…§ cabè¿™æ ·æ’åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546422653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55971,"user_name":"spraith","can_delete":false,"product_type":"c1","uid":1141702,"ip_address":"","ucode":"7FBC54DF0BBF50","user_header":"https://static001.geekbang.org/account/avatar/00/11/6b/c6/2534e14a.jpg","comment_is_top":false,"comment_ctime":1546357623,"is_pvip":false,"replies":[{"id":"20144","content":"5.6æ˜¯è¿™ä¹ˆè®¾è®¡çš„ï¼Œå…ˆç­‰çš„ä¼šå µä½åç­‰çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546361889,"ip_address":"","comment_id":55971,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1546357623","product_id":100020801,"comment_content":"å°è¡¨åŠ å­—æ®µçš„é‚£ä¸ªä¾‹å­æœ‰ç‚¹ä¸æ˜ç™½ï¼ŒsessionCä¸æ˜¯è¿˜æ²¡æ‹¿åˆ°å†™é”å—ï¼Œä¸ºä»€ä¹ˆèƒ½æŠŠ sessionD çš„è¯»é”ç»™æŒ¡ä½ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434904,"discussion_content":"5.6æ˜¯è¿™ä¹ˆè®¾è®¡çš„ï¼Œå…ˆç­‰çš„ä¼šå µä½åç­‰çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546361889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10215,"discussion_content":"ä½†æ˜¯aå’Œbé‡Šæ”¾çš„æ—¶å€™ï¼Œä¸æ˜¯å…ˆç­‰çš„cå°±ä¼šå…ˆæ‹¿åˆ°é”ã€‚çœ‹5.6æ˜¯Då…ˆæ‹¿åˆ°äº†è¯»é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568276346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55289,"user_name":"pearl","can_delete":false,"product_type":"c1","uid":1322055,"ip_address":"","ucode":"795169CC94E4A3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep5NODicRp90dUTF59uZWSibwEj4c3oAYErB0b2ib5zJyHTEcTnsbdZYL8Qb3EzKHRx1s9Vp5jVocL4Q/132","comment_is_top":false,"comment_ctime":1546090902,"is_pvip":false,"replies":[{"id":"20037","content":"æ²¡æœ‰çŸ›ç›¾<br>Innodbåšæ•°æ®çš„å¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼Œä¸éœ€è¦å¯¹è¡¨åŠ è¡¨é”<br><br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546134521,"ip_address":"","comment_id":55289,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546090902","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæ‚¨è¯´çš„è¿™ä¸ªè¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼Œå› æ­¤ä½ å¯ä»¥æœ‰è¡¨é”å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€å¼ è¡¨å¢åˆ æ”¹æŸ¥ã€‚å¯æ˜¯ä¸‹ä¸€ç« åˆè¯´è¡¨é”åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªåšæ›´æ–°æ“ä½œï¼Œæ˜¯å¦çŸ›ç›¾ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434729,"discussion_content":"æ²¡æœ‰çŸ›ç›¾\nInnodbåšæ•°æ®çš„å¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼Œä¸éœ€è¦å¯¹è¡¨åŠ è¡¨é”\n\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546134521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55020,"user_name":"neptunesong","can_delete":false,"product_type":"c1","uid":1058431,"ip_address":"","ucode":"6592C8724B3D95","user_header":"","comment_is_top":false,"comment_ctime":1546001372,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546001372","product_id":100020801,"comment_content":"å¾ˆé“æ­‰ï¼Œå¯èƒ½ä¹‹å‰é—®çš„ä¸¤ä¸ªç´¢å¼•é—®é¢˜æ²¡è¡¨è¾¾æ¸…æ¥šï¼Œæ¯”å¦‚CREATE TABLE `t` (<br>  `id` int(11) NOT NULL,<br>  `c` int(11) DEFAULT NULL,<br>  `d` int(11) DEFAULT NULL,<br>  PRIMARY KEY (`id`),<br>  KEY `c` (`c`)<br> KEY `d`(`d`)<br>) ENGINE=InnoDB;<br>ç°åœ¨åœ¨cå’Œdä¸Šéƒ½å»ºäº†keyã€‚å› ä¸ºé”æ˜¯åŠ åœ¨äºŒçº§ç´¢å¼•ä¸Šçš„ï¼Œå½“åšä¸€æ¡updateçš„æ—¶å€™ï¼Œæ˜¯cå’Œdä¸Šçš„ç´¢å¼•éƒ½ä¼šåŠ é”å—ï¼Ÿå¦‚æœæ˜¯ï¼Œç´¢å¼•cå’Œç´¢å¼•dåˆ†åˆ«åŠ é”æ—¶ä¹‹é—´çš„åŒæ­¥æ˜¯æ€ä¹ˆä¿éšœçš„ï¼Ÿè°¢è°¢","like_count":0},{"had_liked":false,"id":54327,"user_name":"neptunesong","can_delete":false,"product_type":"c1","uid":1058431,"ip_address":"","ucode":"6592C8724B3D95","user_header":"","comment_is_top":false,"comment_ctime":1545828919,"is_pvip":false,"replies":[{"id":"19682","content":"ä½ è¿™ä¸ªé—®é¢˜æˆ‘æ²¡çœ‹æ‡‚â€¦ ç­‰21ã€22çœ‹å®Œä½ å†åé¢çš„æ–‡ç« ä¸­å†å†™ä¸‹å…·ä½“çš„é—®é¢˜å§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545832072,"ip_address":"","comment_id":54327,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545828919","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®ä¸‹å¦‚æœä¸€ä¸ªè¡¨æœ‰å¤šä¸ªç´¢å¼•ï¼Œæš‚ä¸”ä»¥ä¸¤ä¸ªéä¸»é”®ç´¢å¼•ä¸ºä¾‹ï¼Œåœ¨åŠ é”ï¼ˆxæˆ–sï¼‰çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸¤ä¸ªç´¢å¼•éƒ½ä¼šåˆ†åˆ«åŠ é”å—ï¼Ÿå¦‚æœéƒ½åŠ é”ï¼Œè¿™ä¸¤ä¸ªç´¢å¼•é—´çš„åŠ ç¾¤é”æ—¶å¤šçº¿ç¨‹åŒæ­¥æ˜¯æ€ä¹ˆä¿éšœçš„ï¼Ÿé€šè¿‡çº¿ç¨‹é—´çš„é”å—ï¼Ÿè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434428,"discussion_content":"ä½ è¿™ä¸ªé—®é¢˜æˆ‘æ²¡çœ‹æ‡‚â€¦ ç­‰21ã€22çœ‹å®Œä½ å†åé¢çš„æ–‡ç« ä¸­å†å†™ä¸‹å…·ä½“çš„é—®é¢˜å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545832072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52104,"user_name":"Cv","can_delete":false,"product_type":"c1","uid":1062797,"ip_address":"","ucode":"C77CE172B5AA28","user_header":"","comment_is_top":false,"comment_ctime":1545310450,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545310450","product_id":100020801,"comment_content":"èƒ½ä¸èƒ½è®²è§£ä¸‹å¹¶å‘insertå¤šæ¡è¯­å¥ï¼Œåœ¨æœ‰å”¯ä¸€ç´¢å¼•æƒ…å†µä¸‹å‡ºç°æ­»é”çš„åŸå› ","like_count":0},{"had_liked":false,"id":51564,"user_name":"è‹èŒ«","can_delete":false,"product_type":"c1","uid":1299149,"ip_address":"","ucode":"CED8598307BEAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/d2/cd/6fb14677.jpg","comment_is_top":false,"comment_ctime":1545200630,"is_pvip":false,"replies":[{"id":"18963","content":"æä¸€ä¸‹ä½ çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545333190,"ip_address":"","comment_id":51564,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545200630","product_id":100020801,"comment_content":"çœ‹äº†å…³äºç´¢å¼•çš„è§£ç­”ï¼Œæˆ‘ç‰¹åœ°ä¼šå»ä¸Šç¯‡æ–‡ç« å†çœ‹äº†ä¸€éï¼Œæ€ä¹ˆçœ‹äº†åŠå¤©ä¹Ÿè¿˜æ˜¯æ²¡çœ‹æ˜ç™½ï¼Ÿæ˜¯æˆ‘å¤ªæ— çŸ¥äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433513,"discussion_content":"æä¸€ä¸‹ä½ çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545333190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50925,"user_name":"luwei","can_delete":false,"product_type":"c1","uid":1172627,"ip_address":"","ucode":"7D4776A8BD6F47","user_header":"https://static001.geekbang.org/account/avatar/00/11/e4/93/df7c037f.jpg","comment_is_top":false,"comment_ctime":1545081230,"is_pvip":false,"replies":[{"id":"18521","content":"ä¼šï¼Œä½†æ˜¯ä½ è¿™æ ·æè¿°æˆ‘æ²¡æ³•è§£ğŸ˜“ å—¯åˆ°æ—¶å€™æˆ‘ä»‹ç»äº›æ–¹æ³•å§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545158466,"ip_address":"","comment_id":50925,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545081230","product_id":100020801,"comment_content":"è€å¸ˆä»¥åæ‰“ç®—å¯¹æ­»é”å±•å¼€ä¸€äº›è®¨è®ºä¹ˆï¼Ÿæˆ‘ä»¬çº¿ä¸Šæœ‰ä¸ªä¸šåŠ¡ï¼Œå¶å°”ä¼šæŠ¥ï¼šâ€œDeadlock found when trying to get lock;â€è¿™ç§ç±»ä¼¼é”™è¯¯ã€‚ä¸€ç›´æ²¡æ‰¾åˆ°é—®é¢˜æ ¹æºã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433183,"discussion_content":"ä¼šï¼Œä½†æ˜¯ä½ è¿™æ ·æè¿°æˆ‘æ²¡æ³•è§£ğŸ˜“ å—¯åˆ°æ—¶å€™æˆ‘ä»‹ç»äº›æ–¹æ³•å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545158466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49809,"user_name":"èœèœ","can_delete":false,"product_type":"c1","uid":1302241,"ip_address":"","ucode":"D798B831A89AAF","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/e1/f648c746.jpg","comment_is_top":false,"comment_ctime":1544773066,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1544773066","product_id":100020801,"comment_content":"æ—è€å¸ˆï¼Œæˆ‘åšäº†æµ‹è¯•ï¼Œç‰ˆæœ¬æ˜¯5.6.25ã€‚è¿˜æ˜¯Session Dé¦–å…ˆå¾—åˆ°äº†æ‰§è¡Œçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138404,"discussion_content":"é‚£å°±æ˜¯då…ˆè·å–äº†è¯»é”å‘—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579240235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49762,"user_name":"å´æ—è¾‰","can_delete":false,"product_type":"c1","uid":1222971,"ip_address":"","ucode":"56F117300FF33D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a9/3b/f4ca20d8.jpg","comment_is_top":false,"comment_ctime":1544765510,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544765510","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå…³äºä¸ŠæœŸæ€è€ƒé¢˜çš„ç­”æ¡ˆï¼Œcaçš„è”åˆç´¢å¼•æ ‘å’Œcçš„ç´¢å¼•æ ‘æ˜¯ä¸€æ ·çš„ï¼Œè¿™ä¸€ç‚¹ä¸æ˜¯å¾ˆç†è§£ï¼Œèƒ½è®²ä¸‹ä¹ˆ","like_count":0},{"had_liked":false,"id":48820,"user_name":"gesanri","can_delete":false,"product_type":"c1","uid":1121174,"ip_address":"","ucode":"AE3B97DC3ED668","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELtOO0HKrj5SI5JSlmwiaCvaF6GLiaTmf5NX88OZaO3HymTAGTeIoicBUjqzmMF6sF5raPFjuqLFibrrw/132","comment_is_top":false,"comment_ctime":1544542992,"is_pvip":false,"replies":[{"id":"17520","content":"è¿™ä¸ªæ˜¯æœ‰online DDLæœºåˆ¶çš„ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ç¬¬13ç¯‡","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544546130,"ip_address":"","comment_id":48820,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1544542992","product_id":100020801,"comment_content":"é‚£å¦‚æœç»™ä¸€ä¸ªæœ‰å‡ ç™¾ä¸Šåƒä¸‡è¡Œçš„å¤§è¡¨åŠ å­—æ®µè¦æ€ä¹ˆæ“ä½œå‘¢ï¼ŸåŠ å­—æ®µè¿™ä¸ªæ“ä½œä¼šè·å¾—å†™é”ï¼Œé‚£ä¸æ˜¯æ‰€æœ‰çš„å¢åˆ æ”¹æŸ¥éƒ½è¦ç­‰ç€è¿™ä¸ªå­—æ®µåŠ æˆåŠŸæ‰è¡Œ?","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432370,"discussion_content":"è¿™ä¸ªæ˜¯æœ‰online DDLæœºåˆ¶çš„ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ç¬¬13ç¯‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544546130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138406,"discussion_content":"å¯ä»¥ghostæˆ–è€…8.0ä¸Šçš„å¿«é€ŸåŠ å­—æ®µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579240274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48459,"user_name":"Mac Kwan","can_delete":false,"product_type":"c1","uid":1001958,"ip_address":"","ucode":"FC80EBC9CD37A8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/e6/4f00fe55.jpg","comment_is_top":false,"comment_ctime":1544447877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544447877","product_id":100020801,"comment_content":"é¦–å…ˆå¤‡åº“æ˜¯é€šè¿‡åŒæ­¥ä¸»åº“binlogçš„æ–¹å¼è¿›è¡Œå¤åˆ¶åŒæ­¥çš„ï¼Œè€Œä¸”æœ‰ä¸€å®šçš„å»¶æ—¶ã€‚å¦å¤–binlogè®°å½•çš„æ˜¯é€»è¾‘æ“ä½œæ—¥å¿—ã€‚æ‰€ä»¥å½“å¤‡åº“ä½¿ç”¨single transactionæ–¹å¼å¼€å§‹å¤‡ä»½æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œå¹¶ä¸”åœ¨å¤‡ä»½åˆ°å¤‡åº“è¿™ä¸ªå°è¡¨æ—¶ä¼šåŠ ä¸Šä¸€ä¸ªMDLåªè¯»é”ï¼Œå‡å¦‚æ°å·§è¿™ä¸ªæ—¶å€™ä¸»åº“ä¿®æ”¹å°è¡¨çš„binlogåŒæ­¥è¿‡æ¥æ—¶ï¼Œè¿™ä¸ªæ·»åŠ åˆ—çš„æ“ä½œä»¥åŠåç»­æ“ä½œå°±è¢«é˜»å¡ç›´åˆ°å¤‡åº“çš„å¤‡ä»½äº‹åŠ¡å®Œæˆä¸ºæ­¢","like_count":0},{"had_liked":false,"id":47994,"user_name":"Jerry Tse","can_delete":false,"product_type":"c1","uid":1282929,"ip_address":"","ucode":"5C2FBF3E5220BA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTILJspjqGeYrsicQvAFGxicTVy52vPb3lRx6taNYShict44DCu4k41UtD6N1I4X7Yu2lDoJSjt4vypbQ/132","comment_is_top":false,"comment_ctime":1544286302,"is_pvip":true,"replies":[{"id":"17095","content":"ç¬¬ä¸‰ç‚¹æˆ‘ä¹Ÿçœ‹å¾—æœ‰ç‚¹æ‡µğŸ˜“<br><br><br>è¦ä¸å°±ç®€åŒ–ä¸ºï¼š åœ¨ï¼ˆa,b)ä¸ºä¸»é”®ç´¢å¼•çš„æ—¶å€™ï¼Œ<br>ç´¢å¼•cå’Œ(c,a)æ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544331313,"ip_address":"","comment_id":47994,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544286302","product_id":100020801,"comment_content":"çœ‹åˆ°ç•™è¨€ä¸­å¾ˆå¤šåŒå­¦å¯¹ä¸ŠæœŸæ€è€ƒé¢˜ç›®ç­”æ¡ˆä¸­c,açš„ç´¢å¼•å’Œcç›¸åŒæœ‰ç–‘æƒ‘ã€‚åœ¨è¿™é‡Œæˆ‘è®²ä¸€ä¸‹è‡ªå·±çš„ç†è§£ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚<br>ä¸€ã€cï¼Œaç´¢å¼•æ˜¯å…ˆå¯¹cæ’åºï¼Œcç›¸ç­‰çš„æƒ…å†µä¸‹åœ¨å¯¹aæ’åºã€‚ä¼°è®¡è¿™ç‚¹å¤§å®¶éƒ½ç†è§£ã€‚<br>äºŒã€cæ˜¯ä¸€ä¸ªäºŒçº§ç´¢å¼•ï¼Œæ‰€ä»¥cä¸­ä¼šåŒ…å«ä¸»é”®aã€‚è¿™ç‚¹ä¹Ÿåº”è¯¥ç†è§£ã€‚<br>ä¸‰ã€aæ˜¯ä¸»é”®å‰ç¼€ï¼Œç­‰äºå·²ç»å…ˆæ’äº†ä¸€æ¬¡åºï¼Œcçš„ç´¢å¼•å°±ç›¸å½“äºå¯¹cå†æ’ä¸€æ¬¡åºã€‚ä½ ä¼šå‘ç°è¿™å’Œcï¼Œaä¸ºç´¢å¼•çš„æ—¶å€™æ’åºé¡ºåºç›¸åï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆæ’çš„aï¼Œç„¶åå†æ’cã€‚åœ¨ç¬¬äºŒæ¬¡æ’åºæ˜¯ç¨³å®šæ’åºçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªçš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚è¿™ä¸ªéœ€è¦ä»”ç»†ç†è§£ï¼Œå…¶å®ä¹Ÿæ˜¯ç¨³å®šæ’åºç®—æ³•çš„ä¸€ç§åº”ç”¨åœºæ™¯ã€‚<br>å››ã€ä¸ºäº†ä¾¿äºå¤§å®¶ç†è§£ï¼Œä¸¾ä¸€ä¸ªä¾‹å­ï¼Œè¡Œä¸­æœ‰å§“åå’Œå¹´é¾„ä¸¤åˆ—ï¼Œæˆ‘ä»¬å…ˆæŒ‰ç…§å¹´é¾„æ’åºï¼Œç„¶åå†ç”¨ç¨³å®šæ’åºç®—æ³•æŒ‰ç…§å§“åæ’åºï¼Œæœ€åè¡Œçš„é¡ºåºæ˜¯ä¸æ˜¯å°±æ˜¯å’Œå…ˆæŒ‰ç…§åå­—æ’åºï¼Œåå­—ç›¸ç­‰æ—¶å†æŒ‰ç…§å¹´é¾„æ’åºçš„è¡Œé¡ºåºç›¸åŒã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431978,"discussion_content":"ç¬¬ä¸‰ç‚¹æˆ‘ä¹Ÿçœ‹å¾—æœ‰ç‚¹æ‡µğŸ˜“\n\n\nè¦ä¸å°±ç®€åŒ–ä¸ºï¼š åœ¨ï¼ˆa,b)ä¸ºä¸»é”®ç´¢å¼•çš„æ—¶å€™ï¼Œ\nç´¢å¼•cå’Œ(c,a)æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544331313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47950,"user_name":"WalteräºŒå‰å”","can_delete":false,"product_type":"c1","uid":1018454,"ip_address":"","ucode":"3D053D05B53DCD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/56/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1544265051,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1544265051","product_id":100020801,"comment_content":"è¯»å†™é”ä¹‹é—´ï¼Œå†™é”ä¹‹é—´æ˜¯äº’æ–¥çš„<br><br>è¿™é‡Œåº”è¯¥ç”¨é¡¿å·å§ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138409,"discussion_content":"è¯»å†™é”ã€å†™å†™é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579240303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47696,"user_name":"liuq","can_delete":false,"product_type":"c1","uid":1304009,"ip_address":"","ucode":"88437D66C547C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/c9/36fdec8e.jpg","comment_is_top":false,"comment_ctime":1544184204,"is_pvip":false,"replies":[{"id":"16998","content":"å¤šåˆ†æï¼Œç¢°åˆ°é—®é¢˜ç©·æ ¹ç©¶åº•","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544190610,"ip_address":"","comment_id":47696,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544184204","product_id":100020801,"comment_content":"å„ä½å¤§ä½¬ï¼Œå­¦ä¹ æ•°æ®åº“æœ‰ä»€ä¹ˆè®°å¿†æ–¹æ³•å—ï¼Œä»¥ä¸ºçŸ¥é“ï¼Œæ¢ä¸€ä¸ªåœºæ™¯å°±ä¸çŸ¥æ‰€æªäº†","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431860,"discussion_content":"å¤šåˆ†æï¼Œç¢°åˆ°é—®é¢˜ç©·æ ¹ç©¶åº•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544190610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47582,"user_name":"Bugzella","can_delete":false,"product_type":"c1","uid":1018969,"ip_address":"","ucode":"DA6E5620D682AD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/m7Ow3WiaSHeE4LBMqsRNVu0zgddEBxBv0OfsJick6icnAOTLSpaJ2ZGPF0rteY8yic3dUZUZmeOu1xPG2G1BSibZNdw/132","comment_is_top":false,"comment_ctime":1544158623,"is_pvip":false,"replies":[{"id":"16958","content":"æŸ¥è¯¢çš„MDLè¯»é”æ—¶é—´å¾ˆçŸ­çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544159998,"ip_address":"","comment_id":47582,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544158623","product_id":100020801,"comment_content":"ç»§ç»­echoé™ˆå…³äºonline ddlçš„æé—®ï¼Œå¤§å¤šæ•°ç”Ÿäº§åº“éƒ½ä¼šæœ‰è¿ç»­ä¸æ–­çš„å†™æ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¸€ç›´éƒ½æœ‰mdlè¯»é”ï¼Œé‚£ddlé©¬ä¸Šå°±ä¼šé€ æˆå†™é”é˜»å¡è¿›è€Œé˜»å¡æ‰€æœ‰dmlæ“ä½œå½±å“ç”Ÿäº§åº“æ­£å¸¸è¯»å†™ï¼Œé‚£MySQL å·ç§°çš„online ddlåˆæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431816,"discussion_content":"æŸ¥è¯¢çš„MDLè¯»é”æ—¶é—´å¾ˆçŸ­çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544159998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47167,"user_name":"18329153721","can_delete":false,"product_type":"c1","uid":1323903,"ip_address":"","ucode":"A7BD462CEFC6C8","user_header":"","comment_is_top":false,"comment_ctime":1544066626,"is_pvip":false,"replies":[{"id":"16834","content":"ä½ è¿™ä¸ªæè¿°æœ‰ç‚¹é—®é¢˜ï¼Œ æ›´æ–°äº‹åŠ¡æ²¡æœ‰commit,<br><br>è¿™æ—¶å€™å…¶ä»–çº¿ç¨‹DDLæ˜¯ä¼šè¢«å µä½çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544071363,"ip_address":"","comment_id":47167,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544066626","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä¹‹å‰æˆ‘ä»¬ç”Ÿäº§ä¸Šå‡ºç°è¿‡è¿™æ ·ä¸€ä¸ªæƒ…å†µï¼Œæ‰“å¼€ä¸€ä¸ªé•¿äº‹åŠ¡ï¼Œè¿™ä¸ªé•¿äº‹åŠ¡æ˜¯åšå¤§é‡çš„æ’å…¥æ“ä½œï¼Œä½†æ˜¯æœªcommitï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶å€™ç»™ä¸€ä¸ªè¡¨æ‰§è¡Œddlæ“ä½œï¼Œæœ€åå‘ç°æ’å…¥æ“ä½œéƒ½æ˜¯é‡å¤çš„ï¼Œå°±æ˜¯ç”Ÿæˆäº†ä¸¤ä»½ä¸€æ ·çš„æ•°æ®ï¼Œè¿™å¯èƒ½æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431685,"discussion_content":"ä½ è¿™ä¸ªæè¿°æœ‰ç‚¹é—®é¢˜ï¼Œ æ›´æ–°äº‹åŠ¡æ²¡æœ‰commit,\n\nè¿™æ—¶å€™å…¶ä»–çº¿ç¨‹DDLæ˜¯ä¼šè¢«å µä½çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544071363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47015,"user_name":"è¿›é˜¶çš„ç å†œ","can_delete":false,"product_type":"c1","uid":1017821,"ip_address":"","ucode":"D8991282640334","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/dd/4f53f95d.jpg","comment_is_top":false,"comment_ctime":1544019033,"is_pvip":false,"replies":[{"id":"16776","content":"ä¸ä¼šçš„ï¼Œgap lockèƒ½æ²»","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544019952,"ip_address":"","comment_id":47015,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544019033","product_id":100020801,"comment_content":"è¯´åˆ°è§†å›¾ä½ è‚¯å®šæƒ³èµ·æ¥äº†ï¼Œæˆ‘ä»¬åœ¨å‰é¢è®²äº‹åŠ¡éš”ç¦»çš„æ—¶å€™ï¼Œå…¶å®æ˜¯æœ‰ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿæ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾çš„ï¼Œå¯¹å§ï¼Ÿ<br>å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸èƒ½æ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ï¼Œå› ä¸ºå¯é‡å¤è¯»ä¼šå‡ºç°å¹»è¯»çš„ç°è±¡ï¼Œä¼šåœ¨äº‹åŠ¡é‡Œçœ‹åˆ°æ–°æ’å…¥çš„æ•°æ®","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431638,"discussion_content":"ä¸ä¼šçš„ï¼Œgap lockèƒ½æ²»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544019952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46917,"user_name":"Sinyo","can_delete":false,"product_type":"c1","uid":1307297,"ip_address":"","ucode":"57B243E7AB86A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAibnPX9jW8kqLcIfibjic8GbkQkEUYyFKJkc39hZhibVlNrqwTjdLozkqibI2IwACd5YzofYickNxFnZg/132","comment_is_top":false,"comment_ctime":1544001778,"is_pvip":false,"replies":[{"id":"16783","content":"ä¸æ˜¯commiitï¼Œæ˜¯rollback. å½“ç„¶ï¼Œkillå°±æ˜¯ä¸€ç§ä¸»åŠ¨æ”¾å¼ƒçš„åšæ³•ï¼Œæ˜¯å®ç°rollbackçš„ä¸€ç§æ“ä½œ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544020349,"ip_address":"","comment_id":46917,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544001778","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆæˆ‘åœ¨è°·æ­Œè¿˜æœ‰å…¶ä»–ç½‘é¡µä¸Šæœç´¢æ­»é”çš„å¤„ç†æ–¹æ³•åªæœ‰killè¿›ç¨‹å‘¢ï¼Ÿæ‚¨æåˆ°çš„commitä¹Ÿèƒ½è§£å†³æ­»é”é€‚ç”¨äºä»€ä¹ˆåœºæ™¯å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431598,"discussion_content":"ä¸æ˜¯commiitï¼Œæ˜¯rollback. å½“ç„¶ï¼Œkillå°±æ˜¯ä¸€ç§ä¸»åŠ¨æ”¾å¼ƒçš„åšæ³•ï¼Œæ˜¯å®ç°rollbackçš„ä¸€ç§æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544020349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46240,"user_name":"æ—¶å…‰çš„é±¼","can_delete":false,"product_type":"c1","uid":1197542,"ip_address":"","ucode":"99335F4BFB32EE","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/e6/69386778.jpg","comment_is_top":false,"comment_ctime":1543888063,"is_pvip":false,"replies":[{"id":"16544","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543890055,"ip_address":"","comment_id":46240,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543888063","product_id":100020801,"comment_content":"Session Dä¸ºä»€ä¹ˆä¼šè¢«Session Cå µä½å•Šï¼Ÿæ˜¯å› ä¸ºæ‰§è¡Œé¡ºåºé—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431393,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543890055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46195,"user_name":"TiTi","can_delete":false,"product_type":"c1","uid":1127343,"ip_address":"","ucode":"58F19596A1EF4C","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/af/dda311cf.jpg","comment_is_top":false,"comment_ctime":1543883023,"is_pvip":false,"replies":[{"id":"16555","content":"5.6æ˜¯å…ˆæ¥å…ˆå¾—çš„ï¼Œ5.7æ¢äº†ç­–ç•¥ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543891958,"ip_address":"","comment_id":46195,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1543883023","product_id":100020801,"comment_content":"æœ‰ç‚¹ä¸ç†è§£ä¸ºä»€ä¹ˆè¿˜æ²¡æœ‰æ‹¿åˆ°MDLå†™é”çš„session Cä¸ºä»€ä¹ˆä¼šé˜»å¡åç»­æƒ³è·å–MDLè¯»é”çš„session D? è¿™æ ·å²‚ä¸æ˜¯ååé‡å¤§æ‰“æŠ˜æ‰£ï¼ŸMDLé”çš„è®¾è®¡æœ‰æ²¡æœ‰è€ƒè™‘åˆ°è¯»è€…&#47;å†™è€…ä¼˜å…ˆçš„é—®é¢˜å‘¢? è¿˜æœ‰ä¸€ä¸ªä¸æ˜ç™½çš„åœ°æ–¹æ˜¯ï¼Œæ—¢ç„¶session Cé˜»å¡äº†session Dï¼Œé‚£ä¹ˆç­‰Session A&#47;Bé‡Šæ”¾MDLè¯»é”çš„æ—¶å€™ï¼ŒSession Cåº”è¯¥å…ˆè§£é™¤é˜»å¡æ‰å¯¹å•Šï¼Œä¸ºä»€ä¹ˆåè€Œæ˜¯Session Dé¦–å…ˆå¾—åˆ°äº†æ‰§è¡Œå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431368,"discussion_content":"5.6æ˜¯å…ˆæ¥å…ˆå¾—çš„ï¼Œ5.7æ¢äº†ç­–ç•¥ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543891958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1060772,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2f/a4/ff8f912b.jpg","nickname":"æµ·è±š","note":"","ucode":"4AC3B788551F00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289931,"discussion_content":"5.7çš„ç­–ç•¥æ˜¯ï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594274290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45766,"user_name":"Yanpei","can_delete":false,"product_type":"c1","uid":1322640,"ip_address":"","ucode":"41CBDC03763380","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/90/a73a0f74.jpg","comment_is_top":false,"comment_ctime":1543790558,"is_pvip":false,"replies":[{"id":"16346","content":"è¿™é‡Œè¯´çš„æ˜¯MDLé”ï¼Œä¸æ˜¯è¡Œé”ã€‚<br><br>ç„¶åè¯»å†™æ•°æ®ä½ è¿™æ ·æè¿°ä¹Ÿæœ‰è¯¯ä¼šï¼Œçœ‹06 å’Œ08 ä¸¤ç¯‡å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543799919,"ip_address":"","comment_id":45766,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543790558","product_id":100020801,"comment_content":"&quot;å½“å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶å€™ï¼ŒåŠ  MDL è¯»é”&quot;<br><br>å¢(insert) åˆ (delete) æ”¹(update) çš„æ—¶å€™éš¾é“ä¸åº”è¯¥åŠ å†™é”å—ï¼Ÿå¦‚æœæ˜¯åŠ è¯»é”çš„è¯ï¼Œä¸€ä¸ªè¿›ç¨‹æŸ¥ä¸€ä¸ªè¿›ç¨‹æ”¹(updateï¼‰æ€ä¹ˆåŠï¼Ÿ<br><br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431201,"discussion_content":"è¿™é‡Œè¯´çš„æ˜¯MDLé”ï¼Œä¸æ˜¯è¡Œé”ã€‚\n\nç„¶åè¯»å†™æ•°æ®ä½ è¿™æ ·æè¿°ä¹Ÿæœ‰è¯¯ä¼šï¼Œçœ‹06 å’Œ08 ä¸¤ç¯‡å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543799919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45633,"user_name":"é£é›ª","can_delete":false,"product_type":"c1","uid":1316279,"ip_address":"","ucode":"ADCA51048AF096","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1bf1wUGI2KnSBpUs4EyyxoRvfHY9J3T8R7g32cfnosl3M4UIYagYvANpSpGRNT6YCNWK2buh2Tg/132","comment_is_top":false,"comment_ctime":1543728824,"is_pvip":false,"replies":[{"id":"16278","content":"å¦‚æœä½ æœ‰ä¸€ä¸ªç´¢å¼•æ˜¯ï¼ˆa,c), è¿™ä¸ªæŸ¥è¯¢è¯­å¥å¯ä»¥é¿å…æ’åºçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543774792,"ip_address":"","comment_id":45633,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543728824","product_id":100020801,"comment_content":"è€å¸ˆå¦‚æœç”¨çš„æ˜¯where A å† group by c é‚£æˆ‘ä¸»é”®æ˜¯ä¸æ˜¯å¯ä»¥ç”¨a, cè¿˜æ˜¯å•ç‹¬c","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431132,"discussion_content":"å¦‚æœä½ æœ‰ä¸€ä¸ªç´¢å¼•æ˜¯ï¼ˆa,c), è¿™ä¸ªæŸ¥è¯¢è¯­å¥å¯ä»¥é¿å…æ’åºçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543774792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45522,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1543659072,"is_pvip":false,"replies":[{"id":"16208","content":"ï¼ˆè¿™ä¸ªæ˜¯5.6çš„é€»è¾‘å“ˆï¼‰<br><br><br>ä½ è¿™æ®µæè¿°å¯¹çš„å‘€ï¼Œå“ªé‡Œä¸ç†è§£","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543666133,"ip_address":"","comment_id":45522,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543659072","product_id":100020801,"comment_content":"åœ¨ä¸€å¼€å§‹çš„è·å–MDLé”çš„é˜¶æ®µï¼Œsession Aï¼ˆMDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œï¼‰-&gt; session B (MDLè¯»é”ï¼Œæ­£å¸¸æ‰§è¡Œ) -&gt; session C (MDLå†™é”ï¼Œè¢«block) -&gt; session D (MDLè¯»é”ï¼Œè¢«MDLå†™é” block) ã€‚æ˜¯ä¸æ˜¯è¯´åŠ MDLé”æ˜¯çœ‹æ—¶é—´å…ˆåé¡ºåºçš„ï¼Œä¸€æ—¦å‡ºç°è¿‡éœ€è¦è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œåç»­å†éœ€è¦è·å–MDLè¯»é”ï¼Œåˆ™å‘ç°ä¹‹å‰å·²ç»æœ‰è·å–MDLå†™é”ï¼ˆå³ä½¿è¢«blockï¼‰ï¼Œéœ€è¦è·å–è¯»é”çš„sessionéƒ½ä¼šè¢«blockã€‚æ„Ÿè§‰ä¸Šåƒè¿›å…¥ä¸€ä¸ªé”çš„â€é˜Ÿåˆ—â€œï¼Œæ ¹æ®æ—¶é—´å…ˆåé¡ºåºï¼Œè€å¸ˆ,è¿™ä¸ªä¸å¤ªç†è§£","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431076,"discussion_content":"ï¼ˆè¿™ä¸ªæ˜¯5.6çš„é€»è¾‘å“ˆï¼‰\n\n\nä½ è¿™æ®µæè¿°å¯¹çš„å‘€ï¼Œå“ªé‡Œä¸ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543666133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45500,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1543655821,"is_pvip":false,"replies":[{"id":"16209","content":"æœ‰cçš„è¯ï¼Œc=N order by aå°±éœ€è¦æ’åº","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543666265,"ip_address":"","comment_id":45500,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543655821","product_id":100020801,"comment_content":"å·²ç»æœ‰cbç´¢å¼•äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä¿ç•™cå‘¢ï¼Ÿå‰ç¼€ç´¢å¼•ä¸æ˜¯å¯ä»¥å¤ç”¨å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431068,"discussion_content":"æœ‰cçš„è¯ï¼Œc=N order by aå°±éœ€è¦æ’åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543666265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45481,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1543652207,"is_pvip":false,"replies":[{"id":"16191","content":"ä¸æ˜¯ï¼Œæ˜¯ä¿ç•™ c å’Œ cb","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543655418,"ip_address":"","comment_id":45481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543652207","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸ŠæœŸé—®é¢˜æ˜¯c,ca,cbä¸‰ä¸ªç´¢å¼•éœ€è¦ä¿ç•™å“ªä¸ªï¼Ÿç­”æ¡ˆæ˜¯åªä¿ç•™cbï¼Œè€ŒæŠŠcå’Œcaéƒ½å»æ‰å§ï¼Ÿcbé‡Œé¢å·²ç»åˆcçš„ç´¢å¼•äº†ã€‚è¿™æœŸç­”æ¡ˆæ²¡çœ‹å¤ªæ˜ç™½ï¼Œæ˜¯è¿™ä¸ªæ„æ€å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431058,"discussion_content":"ä¸æ˜¯ï¼Œæ˜¯ä¿ç•™ c å’Œ cb","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543655418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45469,"user_name":"æ±æ—å¤–å²","can_delete":false,"product_type":"c1","uid":1188906,"ip_address":"","ucode":"3C66C0F0537A99","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/2a/33441e2b.jpg","comment_is_top":false,"comment_ctime":1543649877,"is_pvip":false,"replies":[{"id":"16195","content":"æ˜¯çš„ï¼Œå†beginé‚£å°±æ˜¯å¦å¤–ä¸€ä¸ªäº‹åŠ¡å•¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543655553,"ip_address":"","comment_id":45469,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543649877","product_id":100020801,"comment_content":"@Tony Du  ä¸ç”¨æ¯ä¸€ä¸ªselect å‰éƒ½åŠ beginå§  åªåœ¨ç¬¬ä¸€ä¸ªå‰åŠ å°±å¥½äº†ï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431051,"discussion_content":"æ˜¯çš„ï¼Œå†beginé‚£å°±æ˜¯å¦å¤–ä¸€ä¸ªäº‹åŠ¡å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543655553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45396,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1543631585,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543631585","product_id":100020801,"comment_content":"æ€è€ƒé¢˜: å› ä¸ºä½¿ç”¨å‚æ•°â€“single-transaction çš„æ—¶å€™ï¼Œå¤‡ä»½æ•°æ®çš„æ—¶å€™ä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡, æ‰€ä»¥åœ¨è¿™ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çš„DDLåº”è¯¥ä¸ä¼šå½±å“åˆ°è¯¥äº‹ç‰©, æ‰€ä»¥å¤‡ä»½å‡ºæ¥çš„è¡¨é‡Œé¢æ˜¯æ²¡æœ‰æ–°å¢åŠ çš„å­—æ®µçš„.<br>","like_count":0},{"had_liked":false,"id":45303,"user_name":"Aiapple","can_delete":false,"product_type":"c1","uid":1302017,"ip_address":"","ucode":"74273A4315488C","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/01/dc8ee553.jpg","comment_is_top":false,"comment_ctime":1543581555,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543581555","product_id":100020801,"comment_content":"@Nick æçš„é—®é¢˜ åŒæ ·ä¸è§£ï¼Œè¯·è€å¸ˆè§£æƒ‘","like_count":0},{"had_liked":false,"id":45149,"user_name":"ä¸ƒä¸ƒ","can_delete":false,"product_type":"c1","uid":1301937,"ip_address":"","ucode":"277BACE2330C54","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/b1/7323beb9.jpg","comment_is_top":false,"comment_ctime":1543550484,"is_pvip":true,"replies":[{"id":"16149","content":"ä¸æ˜¯ï¼Œä½ è´´çš„è¿™ä¸ªé”™è¯¯å°±æ˜¯ä¿®æ”¹çš„æ—¶å€™è¿åäº†å”¯ä¸€é”®çº¦æŸâ€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543630004,"ip_address":"","comment_id":45149,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543550484","product_id":100020801,"comment_content":"alter tableç»å¸¸ä¼šé‡åˆ° ERROR 1062 (23000): Duplicate entry &#39;30747848-2005517&#39; for key &#39;uk_tid_pid&#39; è¿™ç±»é”™è¯¯ã€‚æ˜¯å› ä¸ºç¬¬å››æ­¥è¡¨å‡çº§å†™é”æ—¶åˆ»æœ‰MDLè¯»é”å­˜åœ¨ï¼Œé€ æˆå†™é”å‡çº§å¤±è´¥å¼•èµ·çš„å—ï¼Ÿèƒ½æ€ä¹ˆé¿å…å‘¢ï¼Œè°¢è€å¸ˆè§£æƒ‘<br><br>Online DDLçš„è¿‡ç¨‹ï¼š<br>1. æ‹¿MDLå†™é”<br>2. é™çº§æˆMDLè¯»é”<br>3. çœŸæ­£åšDDL<br>4. å‡çº§æˆMDLå†™é”<br>5. é‡Šæ”¾MDLé”","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430939,"discussion_content":"ä¸æ˜¯ï¼Œä½ è´´çš„è¿™ä¸ªé”™è¯¯å°±æ˜¯ä¿®æ”¹çš„æ—¶å€™è¿åäº†å”¯ä¸€é”®çº¦æŸâ€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543630004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44806,"user_name":"è¿˜ä¸€æ£µæ ‘","can_delete":false,"product_type":"c1","uid":1317709,"ip_address":"","ucode":"C187F2A141D60E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eop9WylZJicLQxlvXukXUgPp39zJHyyReK5s1C9VhA6rric7GiarbfQMuWhdCCDdxdfL610Hc4cNkn9Q/132","comment_is_top":false,"comment_ctime":1543495398,"is_pvip":false,"replies":[{"id":"15980","content":"æ˜¯â€¦ æˆ‘ä¼°è®¡ä½ ä¼šå…ˆç¢°åˆ°æƒé™é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543504664,"ip_address":"","comment_id":44806,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543495398","product_id":100020801,"comment_content":"å¤§è¡¨ä¸€èˆ¬åè€Œå¤§å®¶ä¼šæ³¨æ„ï¼Œå¤§è¡¨åœ¨çº¿æ›´æ–°ç°åœ¨ç”¨æ¯”è¾ƒå¤šçš„æ˜¯gh- ost<br>----å¤§ç¥ï¼Œè²Œä¼¼é˜¿é‡Œäº‘çš„rds ç”¨gh-ost  ä¸å¤ªå¥½ç”¨","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430838,"discussion_content":"æ˜¯â€¦ æˆ‘ä¼°è®¡ä½ ä¼šå…ˆç¢°åˆ°æƒé™é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543504664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44595,"user_name":"é˜¿è±†Dou","can_delete":false,"product_type":"c1","uid":1303898,"ip_address":"","ucode":"5D933075D93179","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/5a/b650ed8c.jpg","comment_is_top":false,"comment_ctime":1543461133,"is_pvip":false,"replies":[{"id":"15899","content":"Server","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543464485,"ip_address":"","comment_id":44595,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543461133","product_id":100020801,"comment_content":"æœ¬æ–‡çš„å…¨å±€é”ï¼Œè¡¨é”ï¼Œéƒ½æ˜¯mysql  Serverå±‚çš„æ˜¯å—ï¼Œä¸æ˜¯éš¶å±äºæŸç§ç±»å‹çš„å­˜å‚¨å¼•æ“ç‰¹æœ‰çš„","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430802,"discussion_content":"Server","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543464485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44371,"user_name":"fgdgtz","can_delete":false,"product_type":"c1","uid":1240401,"ip_address":"","ucode":"486CC4ACCC015C","user_header":"","comment_is_top":false,"comment_ctime":1543415899,"is_pvip":false,"replies":[{"id":"15874","content":"æ—¢ç„¶æ˜¯â€œæˆ‘çš„è®¢å•â€ï¼Œå½“ä½ é€‰æ‹©status=2çš„æ—¶å€™ï¼ŒSQLè¯­å¥å°±æ˜¯ user_id=&lt;ä½ çš„id&gt; and status=2äº†å§ï¼Ÿå¯ä»¥ç”¨ä¸Šè¿™ä¸ªç´¢å¼•å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543428128,"ip_address":"","comment_id":44371,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543415899","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹äº†ä½ æ–°çš„ä¸€æœŸçš„è¯¾ï¼Œæˆ‘å¯¹ç´¢å¼•çš„é€‰æ‹©ä¸Šä»æœ‰ä¸€äº›å›°æƒ‘ï¼Œä¸ç¡®å®šè‡ªå·±åšçš„æ˜¯å¦æ­£ç¡®ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä¸Šä¸€æœŸå°±æœ‰å’¨è¯¢æ‚¨çš„ä¸€ä¸ªé—®é¢˜ï¼Œå¸Œæœ›è€å¸ˆèƒ½è§£æƒ‘<br><br>----------------------------------------------------------------------------------------------------<br>è€å¸ˆä½ å¥½ï¼Œæˆ‘è¯·é—®ä¸ªæœ‰å…³ç´¢å¼•çš„é—®é¢˜ï¼Œæˆ‘æœ‰ä¸ªè®¢å•è¡¨ï¼š<br><br>CREATE TABLE `order` (<br>   `id` int(11) NOT NULL,<br>    `user_id`  int(11) DEFAULT 0,<br>    `status` int(11) DEFAULT 0,<br>    `order_time` int(11) DEFAULT 0,<br>     PRIMARY KEY (`id`)<br> ï¼‰ENGINE=InnoDB<br><br>orderå­—æ®µæœ‰ user id(ç”¨æˆ·|D)ï¼Œ status(è®¢å•çŠ¶æ€,1ï¼šå¾…ä»˜æ¬¾,2ï¼šä»˜æ¬¾,4ï¼šå¤±æ•ˆ,6ï¼šç¡®è®¤æ”¶è´§,7ï¼šç»“<br>ç®—)ï¼Œ order_time(ä¸‹å•æ—¶é—´)ï¼Œä¸šåŠ¡éœ€æ±‚ä¸Šæœ‰æ ¹æ®&quot;å…¨éƒ¨&quot;ï¼Œ&quot;ä»˜æ¬¾&quot;ï¼Œ&quot;ç»“ç®—&quot;ï¼Œ&quot;å¤±æ•ˆ&quot;è¿™å‡ ç§çŠ¶æ€åˆ†<br>é¡µè·å–ç”¨æˆ·çš„è®¢å•æ•°æ®å¹¶æ ¹æ®ä¸‹å•æ—¶é—´æ’åºï¼Œå› ä¸ºæœ‰æ¶‰åŠå…¨éƒ¨å’Œæ ¹æ®çŠ¶æ€æŸ¥è¯¢ï¼Œæˆ‘æ˜¯å¦åº”å»º<br>ä¸¤ä¸ªç±»ä¼¼è¿™æ ·çš„ç´¢å¼•ï¼š<br><br>(user_id,status,order_time)<br>(user_id,order_time)<br><br>(user_id,status,order_time)ç”¨äºæ ¹æ®å…·ä½“çš„è®¢å•çŠ¶æ€åˆ†é¡µæŸ¥è¯¢å¹¶æ’åº<br>(user_id,order_time)ç”¨äºæŸ¥è¯¢å…¨éƒ¨æ•°æ®å¹¶æ’åº<br><br>å¯¹æ­¤æˆ‘æ˜¯å¾ˆå›°æƒ‘çš„ï¼Œå»ºä¸¤ä¸ªç´¢å¼•å¯¹æ›´æ–°æ•°æ®ä¸å­˜å‚¨ç©ºé—´éƒ½æœ‰å½±å“ï¼Œè€Œä¸”ä¸¤ä¸ªç´¢å¼•ä¹Ÿååˆ†ç±»ä¼¼ï¼Œä½†å¦‚æœåªä¿ç•™(user_ id,create_time)ï¼Œé‚£æ ¹æ®æŸçŠ¶æ€æŸ¥è¯¢æ—¶æ‰«æçš„è¡Œå¯èƒ½è¿‡å¤š<br><br>å¦‚æœä¿ç•™(user_id,status,create_time)ï¼Œä¸ºäº†ç´¢<br>å¼•å…¨å­—æ®µä½¿ç”¨åˆ°é‚£æŸ¥è¯¢å…¨éƒ¨æ—¶å°±å¾—éº»çƒ¦çš„ union all<br>æ‹¼æ¯ä¸ªçŠ¶æ€,æ¯”å¦‚åˆ†é¡µç¬¬ä¸€é¡µ:<br><br>select from <br>order tt join (<br>   select t.id from (<br>       (select<br>id id,order_time from order where user_id=1 and status=1 order by order_time desc LIMIT 0, 10)<br>       union all <br>       (select<br>id id,order_time from order where user_id=1 and status=4 order by order_time desc LIMIT 0, 10)<br>       union all<br>       (select<br>id id,order_time from order where user_id=1<br> and status=6 order by order_time desc LIMIT 0, 10 )<br>    ) as t order by <br>t.order_time desc, t. id desc LIMIT 0, 10<br>)<br> ts on ts. id=tt. id order by order_time desc<br><br>æœ›è€å¸ˆèƒ½è§£ç­”<br><br>|ä½œè€…å›å¤ï¼š<br><br>æ˜¯å¦å¯ä»¥ç•™(user_ id,create_time,status) è¿™ä¸ªç´¢å¼•ï¼Ÿ<br>                                                                                                                          å›å¤äº 2018.11.26<br>æˆ‘çš„å›å¤ï¼š<br>  æ„Ÿè°¢è€å¸ˆçš„å›å¤ï¼Œè€å¸ˆæ‚¨çš„è¿™ä¸ªç´¢å¼•è™½é¿å…äº†å›è¡¨æŸ¥statusçš„å€¼ï¼Œä½†æˆ‘æœ‰ç–‘é—®å¦‚æœæŸ¥æŸä¸ªstatusä¸‹çš„æ•°æ®å¯èƒ½ä¼šæ‰«æè¿‡å¤šçš„è¡Œå§ï¼Ÿæ¯”å¦‚ status=2,å¾—ä¸€è¡Œä¸€è¡Œæ¯”è¾ƒstatusæ˜¯å¦ä¸º2å§ï¼Ÿæ‰‹æ·˜â€œæˆ‘çš„è®¢å•â€é‡Œæœ‰â€œå…¨éƒ¨â€ï¼Œâ€œå¾…ä»˜æ¬¾â€,&quot;å¾…å‘è´§&quot;,&quot;å¾…æ”¶è´§&quot;,åœ¨æ·˜å®è¿™ç§ä½“é‡çš„æ•°æ®å°±å•ä»mysqlè¿™å±‚æ¥è€ƒè™‘ï¼Œæ˜¯å¦ä¼šæ ¹æ®ä¸åŒçš„è®¢å•çŠ¶æ€åˆ†è¡¨è¿˜æ˜¯æœ‰ä»€ä¹ˆä¼˜åŒ–çš„æ‰‹æ®µå‘¢ï¼Ÿ<br>                                                                                                                           å›å¤äº 2018.11.28","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430744,"discussion_content":"æ—¢ç„¶æ˜¯â€œæˆ‘çš„è®¢å•â€ï¼Œå½“ä½ é€‰æ‹©status=2çš„æ—¶å€™ï¼ŒSQLè¯­å¥å°±æ˜¯ user_id=&amp;lt;ä½ çš„id&amp;gt; and status=2äº†å§ï¼Ÿå¯ä»¥ç”¨ä¸Šè¿™ä¸ªç´¢å¼•å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543428128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44218,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1543386971,"is_pvip":false,"replies":[{"id":"15986","content":"Select t2ä¹Ÿæ˜¯çœ‹ä¸åˆ°è¿™ä¸ªæ–°æ’å…¥çš„æ•°æ®çš„<br><br>â€œæ‹…å¿ƒå†…å­˜ä¸è¶³ï¼Œè®¤ä¸ºä¸€è‡´æ€§è§†å›¾è‚¯å®šä¸æ˜¯å…¨åº“çš„â€è¿™ä¸ªæ˜¯ä¸€ä¸ªå¸¸è§çš„è¯¯è§£ã€‚<br><br>ä½ çœ‹ä¸€ä¸‹08ç¯‡ï¼Œè¯´çš„å°±æ˜¯è¿™ä¸ªåŸç†ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543514793,"ip_address":"","comment_id":44218,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543386971","product_id":100020801,"comment_content":"æ‚¨å¥½, å¯èƒ½æœ‰ç‚¹é•¿, mysqldump -single-transaction æˆ‘æœäº†ä¸‹æ˜¯ä½¿ç”¨ start transaction æ¥å®ç°çš„, æœ‰ä¸ªåœºæ™¯æ‹¿ä¸åˆ°ä¸€è‡´æ€§è§†å›¾<br><br>----é˜¶æ®µ1: <br>session1: <br>start transaction;<br>select t1; &#47;&#47;æŸ¥è¯¢ t1 å¾—åˆ° 1 æ¡æ•°æ®<br><br>session2: <br>insert t1; &#47;&#47; æ’å…¥ t1 æ•°æ®<br><br>æ­¤æ—¶ session1 æ— è®ºæ€ä¹ˆ select t1 , éƒ½çœ‹ä¸åˆ° session2 æ’å…¥çš„è®°å½•, è¿™é‡Œæ²¡é—®é¢˜!!!!<br><br>----é˜¶æ®µ2: <br>session2: <br>insert t2; &#47;&#47; æ³¨æ„è¿™é‡Œæ˜¯ t2 è¡¨<br><br>session1: <br>è¿˜åˆšæ‰çš„äº‹åŠ¡æ‰§è¡Œ: <br>select t2; &#47;&#47; è¿™é‡Œèƒ½æŸ¥è¯¢åˆ° session2 æ’å…¥çš„æ–°è®°å½•<br><br>ps: å¦‚æœåœ¨é˜¶æ®µ1ä¸­ session1 æŸ¥è¯¢äº† t2 , é‚£ä¹ˆè§†å›¾æ˜¯ä¸€è‡´çš„, ä¸ä¼šçœ‹åˆ°é˜¶æ®µ2 ä¸­ t2 çš„æœ€æ–°æ•°æ®, æ‰€ä»¥æˆ‘æ¨æ–­,è¿™ä¸ªä¸€è‡´æ€§è§†å›¾è‚¯å®šä¸æ˜¯å…¨åº“æŸä¸ªæ—¶é—´ç‚¹çš„, å› ä¸ºå†…å­˜ä¼šçˆ†, è€Œåªæ˜¯ä½ selectè¿‡çš„è¡¨æ‰æœ‰ä¸€è‡´æ€§è§†å›¾<br><br><br>å› æ­¤, æˆ‘è®¤ä¸º mysqldump -single-transaction å¤‡ä»½å‡ºæ¥çš„ ä½™é¢è¡¨ å’Œ è´­ä¹°è¯¾ç¨‹è¡¨ æœ‰å¯èƒ½æ•°æ®æ˜¯ä¸ä¸€è‡´çš„<br>ä¾‹å¦‚ mysqldump æŒ‰ç…§å¦‚ä¸‹é¡ºåºæ‰§è¡Œ:<br>1 start transaction;<br>2 select ä½™é¢è¡¨<br>--- è¿™æ—¶, æœ‰ä¸ªäººå¤Ÿä¹°äº†è¯¾ç¨‹, ä½™é¢-100, è¯¾ç¨‹+1<br>3 select è´­ä¹°è¯¾ç¨‹è¡¨ (åŒ…å«è¯¾ç¨‹+1çš„è®°å½•)<br>å¤‡ä»½ç»“æŸ<br><br>æœ€å, å¤‡ä»½çš„ç»“æœå°±æ˜¯, ä½™é¢æ²¡å‡å°‘, èµšäº†!!!!!!!","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430683,"discussion_content":"Select t2ä¹Ÿæ˜¯çœ‹ä¸åˆ°è¿™ä¸ªæ–°æ’å…¥çš„æ•°æ®çš„\n\nâ€œæ‹…å¿ƒå†…å­˜ä¸è¶³ï¼Œè®¤ä¸ºä¸€è‡´æ€§è§†å›¾è‚¯å®šä¸æ˜¯å…¨åº“çš„â€è¿™ä¸ªæ˜¯ä¸€ä¸ªå¸¸è§çš„è¯¯è§£ã€‚\n\nä½ çœ‹ä¸€ä¸‹08ç¯‡ï¼Œè¯´çš„å°±æ˜¯è¿™ä¸ªåŸç†ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543514793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44179,"user_name":"Alpha","can_delete":false,"product_type":"c1","uid":1001861,"ip_address":"","ucode":"60CA15A25EC796","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/85/3f161d95.jpg","comment_is_top":false,"comment_ctime":1543378808,"is_pvip":false,"replies":[{"id":"15763","content":"å¤§è¡¨ä¸€èˆ¬åè€Œå¤§å®¶ä¼šæ³¨æ„ï¼Œå¤§è¡¨åœ¨çº¿æ›´æ–°ç°åœ¨ç”¨æ¯”è¾ƒå¤šçš„æ˜¯gh- ost","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543402829,"ip_address":"","comment_id":44179,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543378808","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­è®²åˆ°äº†å°è¡¨åŠ å­—æ®µéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œé‚£ä¹ˆå¤§è¡¨åŠ å­—æ®µå‘¢ï¼Ÿå¦‚æœå¤§è¡¨çš„è®¿é—®é‡å’Œæ–°å¢è®°å½•å¾ˆé¢‘ç¹ï¼Œæ˜¯å¦æ— æ³•åšåˆ°çµæ´»åŠ å­—æ®µå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430666,"discussion_content":"å¤§è¡¨ä¸€èˆ¬åè€Œå¤§å®¶ä¼šæ³¨æ„ï¼Œå¤§è¡¨åœ¨çº¿æ›´æ–°ç°åœ¨ç”¨æ¯”è¾ƒå¤šçš„æ˜¯gh- ost","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543402829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44140,"user_name":"o9","can_delete":false,"product_type":"c1","uid":1101332,"ip_address":"","ucode":"E373E82A39BBFE","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/14/b488f241.jpg","comment_is_top":false,"comment_ctime":1543373004,"is_pvip":false,"replies":[{"id":"15739","content":"DDLçš„è¿‡ç¨‹æœ€åä¸€æ­¥å¾—â€œæˆåŠŸåœ°æ›´æ–°è¡¨ç»“æ„â€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543380128,"ip_address":"","comment_id":44140,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1543373004","product_id":100020801,"comment_content":"ç½®é¡¶ç•™è¨€ æ‚¨çš„å›å¤ç¬¬å››æ­¥ å‡çº§æˆ MDLå†™é” ï¼Œä¸ºä»€ä¹ˆè¦å†å‡çº§æˆå†™é”å‘¢ï¼Œè¯»é”æ²¡é‡Šæ”¾ä¹Ÿå¯ä»¥ä¿è¯æ— æ³•å†æ¬¡è¿›è¡Œè¡¨ç»“æ„ä¿®æ”¹å•Š","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430647,"discussion_content":"DDLçš„è¿‡ç¨‹æœ€åä¸€æ­¥å¾—â€œæˆåŠŸåœ°æ›´æ–°è¡¨ç»“æ„â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543380128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44111,"user_name":"Må“¥","can_delete":false,"product_type":"c1","uid":1247251,"ip_address":"","ucode":"1E3CD88B1EA6D5","user_header":"https://static001.geekbang.org/account/avatar/00/13/08/13/68579217.jpg","comment_is_top":false,"comment_ctime":1543369657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543369657","product_id":100020801,"comment_content":"MySQLï¼š5.7.22   MGR(HOST1)<br>session a:select * from test;<br>session b:select * from test;<br>session c:alter table test add test_c int;<br>session d:select * from test;<br><br><br>time 1:  begin a,b<br>time 2:  session a:select * from test;   session b:select * from test;(ä¸commitï¼Œè¿”å›ç»“æœ)<br>time 3:  alter table test add test_c int;  ï¼ˆé˜»å¡ï¼‰ <br>TIME 4:  begin session d:select * from test;ï¼ˆé˜»å¡ï¼‰<br>TIME 5:  commit a<br>TIME 6:  commit b<br>time 7:  ç°è±¡ï¼Œå½“a,bæäº¤ä»¥åï¼Œsession då¾ˆå¿«è¿”å›ç»“æœï¼Œsession Cè¿˜åœ¨ç­‰å¾…è·å–MDLå†™é”<br>time 8:  commit session d,  cè¿”å›æˆåŠŸï¼ŒåŠ å­—æ®µæ‰§è¡ŒæˆåŠŸ<br><br>è¿™æ ·æ¥çœ‹ï¼Œè™½ç„¶däº‹ç‰©æ—¶é—´æ¯”cäº‹ç‰©è¦æ™šï¼Œä½†æ˜¯å´ä¼˜å…ˆæ´»å¾—äº†MDLè¯»é”ï¼Œåœ¨è·å–é”çš„æ—¶å€™æ˜¯æŒ‰ç…§å¼€é”€è¿˜æ˜¯æ€ä¹ˆä¸ªè§„åˆ™ã€‚","like_count":0},{"had_liked":false,"id":44093,"user_name":"o9","can_delete":false,"product_type":"c1","uid":1101332,"ip_address":"","ucode":"E373E82A39BBFE","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/14/b488f241.jpg","comment_is_top":false,"comment_ctime":1543368717,"is_pvip":false,"replies":[{"id":"15709","content":"ğŸ‘ğŸ¿å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543369917,"ip_address":"","comment_id":44093,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1543368717","product_id":100020801,"comment_content":"çœ‹äº†ç½®é¡¶è¯„è®º ç¬¬ä¸‰æ­¥åšddlæ“ä½œçš„æ—¶å€™ æ˜¯å¯ä»¥å¯¹è¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œçš„ï¼Œæ˜¯å› ä¸ºåœ¨æ‰§è¡Œç¬¬ä¸‰æ­¥DDLæ“ä½œæ—¶æ­¤æ—¶çš„é” æ˜¯ è¯»é”ï¼Œç¬¬ä¸‰æ­¥æ“ä½œå®Œæ¯•æ‰åˆå‡çº§æˆçš„å†™é”ï¼Œæ‰€ä»¥ æ˜¯å¯ä»¥åœ¨ddlæ“ä½œæ‰§è¡ŒæœŸé—´è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œçš„","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430626,"discussion_content":"ğŸ‘ğŸ¿å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543369917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43965,"user_name":"æœå˜‰å˜‰","can_delete":false,"product_type":"c1","uid":1306430,"ip_address":"","ucode":"C23DE27E7886BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/3e/9c3a8abc.jpg","comment_is_top":false,"comment_ctime":1543341868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543341868","product_id":100020801,"comment_content":"é€»è¾‘å¤‡ä»½ä¼šäº§ç”Ÿftwrlé”ï¼Œç‰©ç†å¤‡ä»½ä¹Ÿä¸€æ ·å§ï¼Ÿä¾‹å¦‚innodbackupã€‚","like_count":0},{"had_liked":false,"id":43952,"user_name":"oscarwin","can_delete":false,"product_type":"c1","uid":1131956,"ip_address":"","ucode":"492430BA342593","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/b4/ec66d499.jpg","comment_is_top":false,"comment_ctime":1543334449,"is_pvip":false,"replies":[{"id":"15685","content":"æ²¡å‘ç°ä¸»è¦æ˜¯å› ä¸ºä½ ä»¬æ²¡æœ‰é•¿äº‹åŠ¡å µä½DDLå§ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543335702,"ip_address":"","comment_id":43952,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543334449","product_id":100020801,"comment_content":"å¦‚æœè¡¨çš„æ•°æ®é‡å¾ˆå¤šï¼Œæ›´æ–°è¡¨ç»“æ„çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´é•¿æ—¶é—´å ç”¨DMLå†™é”ï¼Œæœ€ç»ˆå¯¼è‡´çº¿ä¸Šçš„æœåŠ¡åŠ DMLè¯»é”åŠ ä¸ä¸Šï¼Œè€Œä½¿å¾—æœåŠ¡åœæ‘†ã€‚ä½†æ˜¯ï¼Œåœ¨å®é™…çº¿ä¸Šé¡¹ç›®ä¿®æ”¹è¡¨ç»“æ„æ—¶ï¼Œå¹¶æ²¡æœ‰å‘ç°æœåŠ¡ä¸å¯ç”¨ã€‚è¿™ä¸ªæ˜¯å¦‚ä¸€æ¥¼åŒå­¦æ‰€è¯´çš„onlineæ›´æ–°æœºåˆ¶å—ï¼Ÿå¦‚æœæ˜¯onlineï¼Œä¸ºä»€ä¹ˆè¦å…ˆåŠ å†™é”ï¼Œå†é™çº§æˆè¯»é”ï¼Œè¿™ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾å—ï¼Ÿæœ›è€å¸ˆè§£æƒ‘","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430565,"discussion_content":"æ²¡å‘ç°ä¸»è¦æ˜¯å› ä¸ºä½ ä»¬æ²¡æœ‰é•¿äº‹åŠ¡å µä½DDLå§ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543335702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43951,"user_name":"Sinyo","can_delete":false,"product_type":"c1","uid":1307297,"ip_address":"","ucode":"57B243E7AB86A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAibnPX9jW8kqLcIfibjic8GbkQkEUYyFKJkc39hZhibVlNrqwTjdLozkqibI2IwACd5YzofYickNxFnZg/132","comment_is_top":false,"comment_ctime":1543334212,"is_pvip":false,"replies":[{"id":"15686","content":"Commit æˆ–killéƒ½å¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543335749,"ip_address":"","comment_id":43951,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543334212","product_id":100020801,"comment_content":"åŠ å­—æ®µçš„ä¾‹å­ï¼Œå¦‚æœæŠŠsession A commitï¼Œåé¢çš„æµç¨‹å°±å¯ä»¥æ­£å¸¸æ‰§è¡Œäº†ã€‚<br>è€å¸ˆï¼Œè¿™é‡ŒåŒä¸€å¼ è¡¨è¯»å†™åŒæ—¶é”ä½ï¼Œä¸ä¼šå½¢æˆæ­»é”ï¼Œç„¶åéœ€è¦æ‰‹å·¥killè¿›ç¨‹ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430564,"discussion_content":"Commit æˆ–killéƒ½å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543335749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43949,"user_name":"Sinyo","can_delete":false,"product_type":"c1","uid":1307297,"ip_address":"","ucode":"57B243E7AB86A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAibnPX9jW8kqLcIfibjic8GbkQkEUYyFKJkc39hZhibVlNrqwTjdLozkqibI2IwACd5YzofYickNxFnZg/132","comment_is_top":false,"comment_ctime":1543332948,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543332948","product_id":100020801,"comment_content":"å¤‡ä»½åº“åœ¨å¤‡ä»½çš„å°è¡¨ä¸å—å½±å“ï¼Œå¤‡ä»½åº“çš„å°è¡¨æ–°å¢äº†å­—æ®µã€‚","like_count":0},{"had_liked":false,"id":43942,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1543331047,"is_pvip":false,"replies":[{"id":"15687","content":"åªèƒ½æ‰¾ä½å³°æœŸåšäº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543335793,"ip_address":"","comment_id":43942,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543331047","product_id":100020801,"comment_content":"å°è¡¨åŠ å­—æ®µçš„è§£å†³æ–¹æ³•è¿˜æ˜¯æ²¡è¯´å•Š? nowait&#47;wait n mysqlåˆä¸æ”¯æŒ, å’‹åŠå‘¢? ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430561,"discussion_content":"åªèƒ½æ‰¾ä½å³°æœŸåšäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543335793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43881,"user_name":"è½å¶é£é€çš„æ‹","can_delete":false,"product_type":"c1","uid":1046429,"ip_address":"","ucode":"F9A95DB28BCF1E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/9d/be04b331.jpg","comment_is_top":false,"comment_ctime":1543317090,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543317090","product_id":100020801,"comment_content":"è¯¾åæ€è€ƒï¼š<br>ç»™å°è¡¨è¿›è¡ŒDDLçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨MDLå†™é”ã€‚è€Œå¤‡ä»½ä¸æ¶‰åŠå˜æ›´è¡¨ç»“æ„ï¼Œæ‰€ä»¥ä¼šåˆ†é…MDLè¯»é”ï¼Œè€Œè¯»é”ä¸å†™é”ä¸å†²çªï¼Œæ‰€ä»¥ä»å¤‡åº“ä¸Šèƒ½çœ‹åˆ°å˜æ›´çš„è¡¨ç»“æ„ã€‚","like_count":0},{"had_liked":false,"id":43830,"user_name":"ä¸€æ¢¦å¦‚æ˜¯","can_delete":false,"product_type":"c1","uid":1305308,"ip_address":"","ucode":"9CCB1D0E547C83","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/dc/9a970e98.jpg","comment_is_top":false,"comment_ctime":1543305534,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543305534","product_id":100020801,"comment_content":"è€å¸ˆ æ–‡ç« è¯´çš„å…ƒæ•°æ®é”ä¿¡æ¯å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ä»€ä¹ˆä½ç½®ï¼Œå› ä¸ºè¿™ä¸ªå±äºserverå±‚ï¼Œæˆ‘è§‰å¾—åº”è¯¥ä¸æ˜¯innodb buffer poolé‡Œé¢","like_count":0},{"had_liked":false,"id":43829,"user_name":"æ™¨æ€æš®è¯­","can_delete":false,"product_type":"c1","uid":1304974,"ip_address":"","ucode":"F21D2FDCDD6B43","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/8e/6dc15a91.jpg","comment_is_top":false,"comment_ctime":1543305310,"is_pvip":false,"replies":[{"id":"15752","content":"ä¸»é”®IDåªå­˜ä¸€ä¸ªå“ˆï¼Œä¸ä¼šå­˜å¤šä»½çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543401916,"ip_address":"","comment_id":43829,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543305310","product_id":100020801,"comment_content":"ä¸è€å¸ˆå¥½ï¼Œå’¨è¯¢ä¸ªä¸Šä¸€èŠ‚çš„é—®é¢˜ï¼åœ¨å›¾1ï¼ŒInnoDBçš„ç´¢å¼•ç»„ç»‡è¡¨ä¸­ï¼ŒR1ï½R5ä¸­ï¼Œæ˜¯å¦å·²ç»åŒ…æ‹¬ä¸»é”®å€¼ï¼Œå¦‚æœåŒ…æ‹¬ï¼ŒæŒ‰ç…§å›¾ä¸­æ‰€ç¤ºï¼šå¶å­èŠ‚ç‚¹ä¸­å°±åŒ…æ‹¬ä¸¤ä¸ªä¸»é”®ï¼Œä¸çŸ¥é“è¿™æ ·ç†è§£å¯¹å§ï¼Œè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430515,"discussion_content":"ä¸»é”®IDåªå­˜ä¸€ä¸ªå“ˆï¼Œä¸ä¼šå­˜å¤šä»½çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543401916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43816,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1543302453,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1543302453","product_id":100020801,"comment_content":"è¯·é—®æœ‰SQLå®¡è®¡å·¥å…·æ¨èä¹ˆ","like_count":0},{"had_liked":false,"id":43795,"user_name":"Ashly","can_delete":false,"product_type":"c1","uid":1308677,"ip_address":"","ucode":"E3EF1665EDDA00","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/05/bf3fa2a9.jpg","comment_is_top":false,"comment_ctime":1543295622,"is_pvip":false,"replies":[{"id":"15633","content":"ä¸æ˜¯ï¼Œè¡Œé”æ˜¯é’ˆå¯¹æ•°æ®è¡Œçš„é”å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543297272,"ip_address":"","comment_id":43795,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543295622","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸‹ï¼Œè¡¨é”é‡Œçš„MDLå°±æ˜¯è¡Œé”æ˜¯å—","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430500,"discussion_content":"ä¸æ˜¯ï¼Œè¡Œé”æ˜¯é’ˆå¯¹æ•°æ®è¡Œçš„é”å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543297272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43774,"user_name":"o9","can_delete":false,"product_type":"c1","uid":1101332,"ip_address":"","ucode":"E373E82A39BBFE","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/14/b488f241.jpg","comment_is_top":false,"comment_ctime":1543291526,"is_pvip":false,"replies":[{"id":"15636","content":"çœ‹ç½®é¡¶è¯„è®º","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543297531,"ip_address":"","comment_id":43774,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1543291526","product_id":100020801,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œç»™ä¸€å¼ è¡¨åŠ å­—æ®µï¼Œé‚£ä¹ˆ æ­¤æ—¶è·å–åˆ°äº†MDLå†™é”ï¼Œè¿™å°±æ„å‘³ç€åœ¨åŠ å­—æ®µçš„è¿‡ç¨‹ä¸­ è¿™å¼ è¡¨çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯ä¼šè¢«é˜»å¡çš„ï¼Œçº¿ä¸Šä¸šåŠ¡ä¸å°±å‡ºé—®é¢˜äº†å˜›ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430492,"discussion_content":"çœ‹ç½®é¡¶è¯„è®º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543297531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43768,"user_name":"ä¸å¤ä¸€æ ·ç‹‚çƒ­","can_delete":false,"product_type":"c1","uid":1314878,"ip_address":"","ucode":"A12BAA8220D8E4","user_header":"","comment_is_top":false,"comment_ctime":1543290731,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1543290731","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œåœ¨ä¿®æ”¹è¡¨ç»“æ„çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯ä»¥rootç”¨æˆ·åœ¨ç»ˆç«¯æ‰§è¡Œalteræ“ä½œï¼Œä¼šä¸ä¼šä¼˜å…ˆæ‹¿åˆ°dmlå†™é”å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138413,"discussion_content":"ä¸€åˆ‡çš†æœ‰å¯èƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579240512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43730,"user_name":"æƒæ’æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1090619,"ip_address":"","ucode":"2700E28092020D","user_header":"https://static001.geekbang.org/account/avatar/00/10/a4/3b/a29c8eec.jpg","comment_is_top":false,"comment_ctime":1543284888,"is_pvip":false,"replies":[{"id":"15602","content":"è¿™ä¸ªé—®é¢˜æˆ‘æ”¾åœ¨ç­”ç–‘æ–‡ç« ä¸­è¯´å§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543285601,"ip_address":"","comment_id":43730,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543284888","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå¤§æ¦‚ä»€ä¹ˆæ—¶å€™èƒ½è®²ä¸€ä¸‹åˆ†è¡¨æ–¹é¢çš„çŸ¥è¯†å‘¢ï¼Ÿå¤§æ¦‚åœ¨å¤šå°‘æ•°é‡çº§éœ€è¦æ°´å¹³åˆ†è¡¨ï¼Ÿæˆ‘ä»¬ç°åœ¨æœ‰10äº¿çš„æ•°æ®é‡ï¼Œåˆ†æˆ10ä¸ªè¡¨ï¼Œæ˜¯å¦åˆé€‚å‘¢ï¼Ÿèƒ½å¦æŒ‡æ•™ä¸€äºŒï¼Ÿè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430474,"discussion_content":"è¿™ä¸ªé—®é¢˜æˆ‘æ”¾åœ¨ç­”ç–‘æ–‡ç« ä¸­è¯´å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543285601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43676,"user_name":"neil","can_delete":false,"product_type":"c1","uid":1114569,"ip_address":"","ucode":"C14BE89908BEAD","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/c9/59c385a8.jpg","comment_is_top":false,"comment_ctime":1543279995,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543279995","product_id":100020801,"comment_content":"è¯¾ç¨‹ä¸­è¯´åˆ°å¯é‡å¤è¯»æ—¶-single-transactionå¯ä»¥ä¸å…¨å±€é”è¡¨è€Œä¸”æ‰€æœ‰å¯¼å‡ºæ•°æ®æ˜¯ä¸€è‡´çš„ã€‚é‚£ä¹ˆæäº¤è¯»æ¨¡å¼æ˜¯å¦ä¹Ÿæ˜¯å®Œå…¨ä¸€æ ·çš„é‚£ï¼Ÿè¿™é‡Œæ²¡æœ‰è®²å¾—å¾ˆæ¸…æ¥šã€‚ä¹‹å‰åšdumpæ—¶æ²¡åŒºåˆ†è¿‡rrå’Œrcæ¨¡å¼æ˜¯å¦ä¸åŒã€‚","like_count":0},{"had_liked":false,"id":43657,"user_name":"æ˜æ˜æœ‰é’±","can_delete":false,"product_type":"c1","uid":1311070,"ip_address":"","ucode":"B8324B40101EA8","user_header":"https://static001.geekbang.org/account/avatar/00/14/01/5e/6510b149.jpg","comment_is_top":false,"comment_ctime":1543278265,"is_pvip":false,"replies":[{"id":"15620","content":"æ²¡çœ‹æ˜ç™½ä½ çš„é—®é¢˜â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543288045,"ip_address":"","comment_id":43657,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543278265","product_id":100020801,"comment_content":"MySQL æä¾›äº†ä¸€ä¸ªåŠ å…¨å±€è¯»é”çš„æ–¹æ³•ï¼Œå‘½ä»¤æ˜¯ Flush tables with read lock (FTWRL)ã€‚<br>ä¸åŠ é”å¤‡ä»½ä¼šæœ‰é—®é¢˜   åŠ é”æ—¶ä¸ä¼šé‡è§å…ˆå†™å·²è´­åæ‰£é’±çš„é—®é¢˜ä¹ˆï¼Ÿ  è¿™ä¸ªä¸šåŠ¡è¿˜æ˜¯é äº‹åŠ¡æ¥ä¿è¯å¯ä»¥ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430448,"discussion_content":"æ²¡çœ‹æ˜ç™½ä½ çš„é—®é¢˜â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543288045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43600,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1308126,"ip_address":"","ucode":"7FFD6DFCE6EB36","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/de/c33e531e.jpg","comment_is_top":false,"comment_ctime":1543243777,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543243777","product_id":100020801,"comment_content":"åœ¨å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸Šæœ‰å·®å¼‚ã€‚å¦‚æœæ‰§è¡Œ FTWRL å‘½ä»¤ä¹‹åç”±äºå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸æ–­å¼€ï¼Œé‚£ä¹ˆ MySQL ä¼šè‡ªåŠ¨é‡Šæ”¾è¿™ä¸ªå…¨å±€é”ï¼Œæ•´ä¸ªåº“å›åˆ°å¯ä»¥æ­£å¸¸æ›´æ–°çš„çŠ¶æ€ã€‚è€Œå°†æ•´ä¸ªåº“è®¾ç½®ä¸º readonly ä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æ•°æ®åº“å°±ä¼šä¸€ç›´ä¿æŒ readonly çŠ¶æ€ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ•´ä¸ªåº“é•¿æ—¶é—´å¤„äºä¸å¯å†™çŠ¶æ€ï¼Œé£é™©è¾ƒé«˜ã€‚<br>è¿™ä¸ªæœ‰æ²¡æœ‰åœºæ™¯å¯ä»¥ç†è§£ä¸‹ï¼Ÿ<br>ä¸Šå‘¨æ€è€ƒé¢˜ï¼Œå‰é¢éƒ½çœ‹æ‡‚äº†ï¼Œä½†æ˜¯caå¯ä»¥å»é™¤çš„è§£å†³æ²¡çœ‹æ‡‚ï¼Œèƒ½å¦è§£é‡Šä¸‹ï¼Ÿ<br>MySQLæ²¡æœ‰é¡µé”å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":43569,"user_name":"é¥¼å­","can_delete":false,"product_type":"c1","uid":1085953,"ip_address":"","ucode":"981A44836A5216","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/01/c723d180.jpg","comment_is_top":false,"comment_ctime":1543241092,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1543241092","product_id":100020801,"comment_content":"æ€è€ƒï¼Œå¦‚æœåé¢æ·»åŠ äº†è¡Œé”ï¼Œé‚£ä¹ˆè¡¨é”è¿˜ä¼šç”Ÿæ•ˆå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1185046,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/16/0aae41a1.jpg","nickname":"no13bus","note":"","ucode":"69FA1A719DA4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10231,"discussion_content":"è¡¨é”æ˜¯è‚¯å®šæœ‰çš„ã€‚å½“ç„¶è¿™ä¸ªè¡¨é”è¯´çš„æ˜¯MDLç±»å‹çš„ã€‚åªè¦ä½ ä¸ddlï¼Œé‚£ä¹ˆéƒ½æ˜¯è¯»é”ï¼Œä¸äº’æ–¥ï¼Œå¦‚æœå¤šçº¿ç¨‹æ“ä½œçš„éƒ½æ˜¯ä¸€è¡Œæ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™è¡Œé”å°±æœ‰ç”¨äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568277880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43565,"user_name":"XD","can_delete":false,"product_type":"c1","uid":1079293,"ip_address":"","ucode":"DC9DCFB3841A4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/fd/c6619535.jpg","comment_is_top":false,"comment_ctime":1543240941,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543240941","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ï¼šä»åº“çš„ioçº¿ç¨‹è¿˜æ˜¯ä¼šæ”¶åˆ°æ—¥å¿—å¹¶è¿½åŠ åˆ°ä»åº“çš„relay_logï¼Œç­‰è¿™æ¬¡å¤‡ä»½å®Œæˆä¹‹åå†æ‰§è¡Œè¿™ä¸ªæ”¹åŠ¨ã€‚","like_count":0},{"had_liked":false,"id":43557,"user_name":"æœ±å°è±ª","can_delete":false,"product_type":"c1","uid":1311234,"ip_address":"","ucode":"9177EF1DDFF346","user_header":"https://static001.geekbang.org/account/avatar/00/14/02/02/1080b30c.jpg","comment_is_top":false,"comment_ctime":1543239908,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543239908","product_id":100020801,"comment_content":"åŒæ—¶ï¼Œçº¿ç¨‹ A åœ¨æ‰§è¡Œ unlock tables ä¹‹å‰ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œè¯» t1ã€è¯»å†™ t2 çš„æ“ä½œã€‚è¿å†™ t1 éƒ½ä¸å…è®¸ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–è¡¨<br>è¿™æ®µè¯æ˜¯å¯¹çš„å—ï¼Ÿçº¿ç¨‹Aè‡ªå·±é”çš„åº”è¯¥èƒ½æ“ä½œè¡¨æ‰å¯¹å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":43552,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1543239554,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543239554","product_id":100020801,"comment_content":"è¿™é“é¢˜æœ‰ç‚¹æ„æ€å•Šã€‚<br>æˆ‘åˆšå¼€å§‹ä»¥ä¸ºå°±ä¸¤ç§æƒ…å†µ<br>1.mysqldumpæ­£åœ¨æˆ–è€…å·²ç»å¤‡ä»½t1è¡¨çš„æ•°æ®,æ­¤æ—¶æ‰§è¡Œè¯­å¥alter,é‚£ä¹ˆMDL Xé”ä¼šè¢«mysqldumpå¼€å§‹ç”³è¯·çš„MDL Sé”é˜»å¡,å¯¼è‡´ä¹‹åä»åº“æ‰€æœ‰æ“ä½œé˜»å¡<br>2.mysqldumpè¿˜æœªå¤‡ä»½åˆ°t1è¡¨,ä½†æ˜¯alterè¯­å¥å·²ç»æ‰§è¡Œã€‚é‚£ä¹ˆåˆ°å¤‡ä»½è‡³t1è¡¨æ—¶,ä¼šæŠ¥é”™Table definition has changed(ç”±äºé‡å»ºäº†è¡¨,å¯¼è‡´è¡¨å®šä¹‰å·²ç»å‘ç”Ÿæ”¹å˜,<br>å¦‚æœDDLæ˜¯add indexé‚£ä¹ˆå°±ä¸ä¼šæŠ¥é”™,å› ä¸ºæ²¡æœ‰é‡å»ºè¡¨,æ‰€ä»¥è¿™é‡Œä¹Ÿèƒ½åŒºåˆ†å‡ºå“ªäº›DDLæ“ä½œä¼šrebuildå“ªäº›ä¸ç”¨rebuild table)<br>ä½†æ˜¯ç»è¿‡æµ‹è¯•,æ˜¯ä¸‰ç§æƒ…å†µã€‚mysqldumpè™½ç„¶äº‹åŠ¡æœŸé—´ä¸€ç›´æœªæäº¤,ä½†æ˜¯ç”¨äº†SAVEPOINT, ROLLBACK TO SAVEPOINT,æ¥é‡Šæ”¾è¡¨ä¸ŠMDL Sé”ã€‚<br>å¯¼è‡´åœ¨ä¸€ä¸ªäº‹åŠ¡æœŸé—´å·²ç»å¤‡ä»½å®Œçš„è¡¨ä¸ä¼šé˜»å¡åç»­çš„alteræ“ä½œ <br>ä»¥å‰æ²¡ä»”ç»†çœ‹,è¿™ä¸‹åˆgetåˆ°äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹,å†æ¬¡æ„Ÿè°¢è€å¸ˆã€‚","like_count":0},{"had_liked":false,"id":43545,"user_name":"ä½™å‘å","can_delete":false,"product_type":"c1","uid":1119778,"ip_address":"","ucode":"263773616D2C83","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/22/2205cf0a.jpg","comment_is_top":false,"comment_ctime":1543238819,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543238819","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ï¼š<br>å¦‚æœæ˜¯åœ¨ä¸»åº“è¿›è¡Œäº† DDLï¼Œ é‚£ä¹ˆå°±ä¼šå¯¼è‡´ä¸»åº“é˜»å¡ï¼Œç„¶ååœ¨ä¸»åº“ä¸Šåœ¨åŒæ­¥æ•°æ®çš„äº‹åŠ¡å°±ä¸èƒ½åŠæ—¶è¿›è¡Œï¼Œåœ¨ä»åº“ä¸Šçœ‹åˆ°çš„ç°è±¡å°±æ˜¯æ•°æ®å¯èƒ½ä¸å˜ï¼Œæˆ–è€…æ˜¯ç¼ºå°‘ä¸€ä¸ªå¾ˆå°çš„æ—¶é—´æ®µå†…çš„æ•°æ®çš„æ²¡æœ‰åŒæ­¥çš„ç°è±¡ã€‚","like_count":0},{"had_liked":false,"id":43526,"user_name":"è“é­”ä¸¶","can_delete":false,"product_type":"c1","uid":1219438,"ip_address":"","ucode":"2AE4359E263558","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/6e/edd2da0c.jpg","comment_is_top":false,"comment_ctime":1543236416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543236416","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒsessionCä¸æ˜¯æ²¡èƒ½è·å–MDLå†™é”å˜›ï¼ŒsessionAçš„è¯»é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼ŒsessionDä¸åº”è¯¥è·ŸsessionBä¸€æ ·çš„æƒ…å†µå—ï¼Ÿèƒ½å¤Ÿå®ŒæˆæŸ¥è¯¢æ“ä½œï¼Ÿ","like_count":0},{"had_liked":false,"id":43496,"user_name":"zyy","can_delete":false,"product_type":"c1","uid":1048515,"ip_address":"","ucode":"1D0B2BD7E93C64","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ff/c3/b90b862c.jpg","comment_is_top":false,"comment_ctime":1543233832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543233832","product_id":100020801,"comment_content":"è¯¾åé—®é¢˜ï¼šç”±DMLè¯»å†™äº’æ–¥ï¼Œåœ¨å¤‡ä»½è¿‡ç¨‹ä¸­ï¼Œä¸»åº“ä¸ŠåšDDLæ›´æ”¹äº†è¡¨ç»“æ„éœ€ç­‰å¾…ä»åº“å¤‡ä»½å®Œæˆï¼Œæ‰ä¼šè¿›è¡Œä¿®æ”¹ã€‚ä¸»åº“ä¸Šæ–°ä¿®æ”¹çš„æ•°æ®ç»“æ„è¦ç­‰ä¸‹æ¬¡å¤‡ä»½ï¼Œå¤‡ä»½æ­¤è¡¨æœŸé—´ä¸»åº“ä¼šè¿›è¡Œç­‰å¾…ï¼Œå¤‡ä»½èŠ‚ç‚¹è¦é€‰æ‹©æ·±å¤œä¸šåŠ¡é‡å°‘çš„æƒ…å†µä¸‹ï¼Œé¿å…å¯¹æ­¤è¡¨çš„é•¿äº‹åŠ¡å’Œé¢‘ç¹é‡å¤è¯·æ±‚ã€‚é’ˆå¯¹åè€…å¼€å‘äººå‘˜å¦‚ä½•æ¥è¿›è¡Œï¼Œå…ˆæ”¾å¼ƒä¿å­˜æ‰§è¡Œæ“ä½œï¼Œç­‰å¾…äº’æ–¥ç»“æŸåå†è¿›è¡Œæ‰§è¡Œï¼Œè¿™é‡Œå¯ä»¥åº”ç”¨ç­‰å¾…çš„å®šæ—¶ä»»åŠ¡å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":43489,"user_name":"è€åŒ—","can_delete":false,"product_type":"c1","uid":1024376,"ip_address":"","ucode":"89B9B6673F1705","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/78/71d37164.jpg","comment_is_top":false,"comment_ctime":1543232982,"is_pvip":false,"replies":[{"id":"15519","content":"ä»åº“å’Œå¤‡åº“åœ¨è¿™é‡Œæ˜¯ä¸€æ ·çš„å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543234023,"ip_address":"","comment_id":43489,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543232982","product_id":100020801,"comment_content":"å…ˆå›å¤ä¸‹ winner_0715 åŒå­¦.<br>æ•°æ®åº“å‘½åä½¿ç”¨é©¼å³°çš„, å¯èƒ½æ˜¯ä¸ºäº†å†™ä»£ç æ›´ç®€å•.åƒä½¿ç”¨hibernate,mybatisæ—¶å€™,å°±å¯ä»¥çœå»å¾ˆå¤šä»£ç .<br><br>ç„¶å æˆ‘çœ‹æ€è€ƒé¢˜å‡ºçš„æ˜¯å¤‡åº“,å¾ˆå¤šåŒå­¦å›ç­”çš„æ˜¯ä»åº“.<br>å¤‡åº“,ä»åº“åº”è¯¥æ˜¯æœ‰åŒºåˆ«çš„å§?","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430401,"discussion_content":"ä»åº“å’Œå¤‡åº“åœ¨è¿™é‡Œæ˜¯ä¸€æ ·çš„å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543234023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43419,"user_name":"åŒ…åŒ…up","can_delete":false,"product_type":"c1","uid":1073495,"ip_address":"","ucode":"A6F51A62A8B362","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/57/6f3c81dd.jpg","comment_is_top":false,"comment_ctime":1543224835,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543224835","product_id":100020801,"comment_content":"ä»åº“å¯åŠ¨â€“single-transactionåº”è¯¥è¦è·å–å¤‡ä»½åº“çš„æ‰€æœ‰è¡¨MDLçš„è¯»é”ï¼Œä¸»åº“ä¼ è¿‡æ¥å¾—DDLéœ€è¦æŸä¸ªè¡¨çš„MDLå†™é”ï¼Œå¯¼è‡´äº’æ–¥ï¼Œè¿™å¼ è¡¨åœ¨åç»­çš„è¯»å†™è¯·æ±‚éƒ½ä¼šè¢«é˜»å¡ç›´åˆ°å¤‡ä»½äº‹åŠ¡ç»“æŸã€‚åˆå› ä¸ºMVCCå…¶ä»–çš„è¡¨èƒ½è¢«æ­£å¸¸çš„è¯»å†™ã€‚æˆ‘ç†è§£æ˜¯è¿™æ ·çš„ã€‚","like_count":0},{"had_liked":false,"id":43358,"user_name":"åº“æ·˜æ·˜","can_delete":false,"product_type":"c1","uid":1310240,"ip_address":"","ucode":"90813B0C46E978","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqibSwKPg7hiapc49qoM4dibhM3fYANPjfltF2ibBZ3dHX2hibjg5EIIcziahrmjO5R2XrcRibvU39TQS7jg/132","comment_is_top":false,"comment_ctime":1543219136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543219136","product_id":100020801,"comment_content":"æˆ‘çš„ç†è§£æ˜¯æ•°æ®åº“å¤‡ä»½åŠ å‚æ•°â€“single-transaction å°±ç±»ä¼¼æ¯ä¸ªè¡¨åŠ äº†MDLè¯»ï¼Œå¯ä»¥å¢åˆ æ”¹æŸ¥ ï¼Œéœ€è¦æ›´æ”¹è¡¨ç»“æ„è¦ç”³è¯·MDLå†™å°±ä¼šè¢«é˜»å¡ï¼Œè¿™æ ·å°±å¯¼è‡´ä¸»å¤‡ç»“æ„ä¸ä¸€æ ·ï¼Œå¤‡ä»½ç»“æŸæ¢å¤åŒæ­¥ã€‚","like_count":0},{"had_liked":false,"id":43353,"user_name":"é«˜æ•","can_delete":false,"product_type":"c1","uid":1310312,"ip_address":"","ucode":"20F6CF75EC9AA4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/68/e0bebd9a.jpg","comment_is_top":false,"comment_ctime":1543218745,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543218745","product_id":100020801,"comment_content":"æ–‡ä¸­æåˆ°ï¼š<br>ä½ ç°åœ¨åº”è¯¥çŸ¥é“äº†ï¼Œäº‹åŠ¡ä¸­çš„ MDL é”ï¼Œåœ¨è¯­å¥æ‰§è¡Œå¼€å§‹æ—¶ç”³è¯·ï¼Œä½†æ˜¯è¯­å¥ç»“æŸåå¹¶ä¸ä¼šé©¬ä¸Šé‡Šæ”¾ï¼Œè€Œä¼šç­‰åˆ°æ•´ä¸ªäº‹åŠ¡æäº¤åå†é‡Šæ”¾ã€‚<br><br>ä¸ºä»€ä¹ˆè¯­å¥ç»“æŸåä¸ä¼šé©¬ä¸Šé‡Šæ”¾å‘¢ï¼Ÿè¯·è€å¸ˆè§£ç­”ä¸€ä¸‹.<br>å¦å¤–è€å¸ˆç•™çš„é—®é¢˜ï¼Œåº”è¯¥æ˜¯ä¸å—å½±å“åˆ°å§ï¼Œå› ä¸ºåœ¨å¤‡ä»½åˆ°æ—¶å€™ä¼šå¤‡ä»½è§†å›¾","like_count":0},{"had_liked":false,"id":43328,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1543215345,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543215345","product_id":100020801,"comment_content":"ä½¿ç”¨â€“single-transaction æ–¹æ³•è¿›è¡Œé€»è¾‘å¤‡ä»½ï¼Œäº‹åŠ¡å¼€å§‹æ—¶å°±åº”è¯¥è·å¾—å„ä¸ªè¡¨çš„å…ƒæ•°æ®é”ï¼Œä¸»åº“çš„ddlè¯­å¥ä¼ åˆ°ä»åº“æ—¶ï¼Œå¤‡ä»¶ä¸å—å½±å“ï¼Œä½†æ˜¯ddlä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æˆåŠŸæ‹¿åˆ°å¤‡ä»½å®Œæˆé‡Šæ”¾çš„å…ƒæ•°æ®é”ã€‚<br>","like_count":0},{"had_liked":false,"id":43285,"user_name":"åˆ˜å¤©è‹¥Warner","can_delete":false,"product_type":"c1","uid":1216848,"ip_address":"","ucode":"032639CD670DA3","user_header":"https://static001.geekbang.org/account/avatar/00/12/91/50/e576a068.jpg","comment_is_top":false,"comment_ctime":1543206195,"is_pvip":false,"replies":[{"id":"15485","content":"å¯ä»¥ï¼Œå› ä¸ºå¢åˆ æ”¹æ‰§è¡Œéƒ½åªè¦æ±‚MDLè¯»é”ï¼Œè¯»é”ä¹‹é—´ä¸äº’æ–¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543211322,"ip_address":"","comment_id":43285,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1543206195","product_id":100020801,"comment_content":"åœ¨å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLè¯»é”ï¼›å½“è¦å¯¹è¡¨åšç»“æ„å˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLå†™é”ã€‚<br><br>è€å¸ˆï¼ŒåŠ äº†MDLè¯»é”ä¹‹åï¼Œè¿˜èƒ½å¢åˆ æ”¹å—ï¼Ÿä¸å¤§æ˜ç™½<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430349,"discussion_content":"å¯ä»¥ï¼Œå› ä¸ºå¢åˆ æ”¹æ‰§è¡Œéƒ½åªè¦æ±‚MDLè¯»é”ï¼Œè¯»é”ä¹‹é—´ä¸äº’æ–¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543211322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1911661,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDOKcx20Xxmu5j8WxiafoYvo3bIAFDg8OeicRic1icD597QuMC9O8FyV2Al9RxNfVZXK0gkGUx6M3CVQ/132","nickname":"å¤šå¹´ä»¥å","note":"","ucode":"D70E7A1ABE0F39","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383833,"discussion_content":"é‚£2ä¸ªçº¿ç¨‹éƒ½æ“ä½œåŒä¸€æ¡æ•°æ®ï¼Œä¸€ä¸ªä¿®æ”¹ä¸€ä¸ªæŸ¥è¯¢ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626250551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43278,"user_name":"HwangZHen","can_delete":false,"product_type":"c1","uid":1215449,"ip_address":"","ucode":"E2BC782AFEF742","user_header":"https://static001.geekbang.org/account/avatar/00/12/8b/d9/c03fbd11.jpg","comment_is_top":false,"comment_ctime":1543203265,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543203265","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ä¸ªäººç†è§£ï¼š<br>â€“single-transaction ç›¸å½“äºåœ¨ä»åº“RRæ¨¡å¼ä¸‹å¼€å¯ä¸€ä¸ªä¸€è‡´æ€§å¿«ç…§ï¼ˆäº‹åŠ¡ï¼‰ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªå¤‡ä»½äº‹åŠ¡æœŸé—´ä¸»åº“å¤åˆ¶è¿‡æ¥alterè¯­å¥æ—¶ä¼šç­‰å¾…MDLé”ï¼Œè¡¨ç°å‡ºæ¥çš„ç°è±¡åº”è¯¥æ˜¯ä¸»ä»å»¶è¿Ÿã€‚<br>","like_count":0},{"had_liked":false,"id":43275,"user_name":"hhhh","can_delete":false,"product_type":"c1","uid":1256101,"ip_address":"","ucode":"9E87017424B382","user_header":"https://static001.geekbang.org/account/avatar/00/13/2a/a5/625c0a2e.jpg","comment_is_top":false,"comment_ctime":1543203059,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543203059","product_id":100020801,"comment_content":"ä¸»åº“åšäº†DDLï¼Œå¤‡ä»½åº“ä¹Ÿåšäº†DDLï¼Œè¿™æ—¶å€™å¤‡ä»½åº“æ­£åœ¨æ‰§è¡Œâ€“single-transactionæ•°æ®å¤‡ä»½ï¼Œæ­£è¯»å–è¡¨ä¸­çš„æ•°æ®æ‹¥æœ‰MDLè¯»é”ï¼Œé‚£ä¹ˆå¤‡ä»½åº“çš„DDLè¯•å›¾è·å–MDLå†™é”ä¸æˆåŠŸä¼šblock, ç›´åˆ°æ•°æ®å¤‡ä»½å®Œæˆåï¼Œå¤‡ä»½åº“çš„DDLæ‰ä¼šæ‰§è¡Œã€‚æ˜¯è¿™æ ·å—ã€‚ã€‚æ„Ÿè§‰æœ‰ç‚¹è™š","like_count":0},{"had_liked":false,"id":43261,"user_name":"å€ªå¤§äºº","can_delete":false,"product_type":"c1","uid":1193052,"ip_address":"","ucode":"4798D69F3E86FB","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","comment_is_top":false,"comment_ctime":1543201397,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543201397","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ï¼š<br>ç”±äºå…ˆç”¨â€“single-transactionåšå¤‡ä»½ï¼Œæ‰€ä»¥å¤‡ä»½çº¿ç¨‹ä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡è·å–MDLè¯»é”ï¼Œæ–‡ä¸­ä¹Ÿè¯´äº†â€œMDL ä¼šç›´åˆ°äº‹åŠ¡æäº¤æ‰é‡Šæ”¾â€ï¼Œæ‰€ä»¥è¦ä¸€ç›´ç­‰åˆ°å¤‡ä»½å®Œæˆä¸»åº“æ¥çš„DDLæ‰ä¼šåœ¨ä»åº“æ‰§è¡Œç”Ÿæ•ˆï¼Œä¸”å¤‡ä»½çš„æ•°æ®é‡Œå¹¶ä¸ä¼šæœ‰æ–°å¢çš„è¿™ä¸ªåˆ—ã€‚","like_count":0},{"had_liked":false,"id":43220,"user_name":"suhui","can_delete":false,"product_type":"c1","uid":1155326,"ip_address":"","ucode":"53BD826C1164F9","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/fe/ac5a62f3.jpg","comment_is_top":false,"comment_ctime":1543197355,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543197355","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ï¼šä¸€è‡´æ€§è¯»æ˜¯è¯»å–read-viewçš„æ•°æ®ã€‚å› æ­¤æ–°å¢å­—æ®µä¸ä¼šå‡ºç°åœ¨ä»åº“çš„å¤‡ä»½ä¸­ã€‚ä½†æ˜¯ä»åº“çš„è¡¨ç»“æ„å·²ç»åšäº†ä¿®æ”¹ã€‚","like_count":0},{"had_liked":false,"id":43186,"user_name":"é”…å­","can_delete":false,"product_type":"c1","uid":1323048,"ip_address":"","ucode":"4A9143AFB07FF2","user_header":"https://static001.geekbang.org/account/avatar/00/14/30/28/6e019a7a.jpg","comment_is_top":false,"comment_ctime":1543194918,"is_pvip":false,"replies":[{"id":"15448","content":"ä½ å°±ç”¨MySQL 5.7æœ€æ–°ç‰ˆï¼ŒéªŒè¯ç»“è®ºå¦‚æœè·Ÿæ–‡ç« ä¸åŒï¼Œåœ¨è¯„è®ºå‘å‡ºæ¥æˆ‘ä»¬è®¨è®º","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543196143,"ip_address":"","comment_id":43186,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543194918","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæ•´ä¸ªè¯¾ç¨‹æ˜¯åŸºäºMySQLä»€ä¹ˆç‰ˆæœ¬å•Šï¼Ÿæˆ‘åšè¯•éªŒçš„è¯ç”¨ä»€ä¹ˆç‰ˆæœ¬å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430316,"discussion_content":"ä½ å°±ç”¨MySQL 5.7æœ€æ–°ç‰ˆï¼ŒéªŒè¯ç»“è®ºå¦‚æœè·Ÿæ–‡ç« ä¸åŒï¼Œåœ¨è¯„è®ºå‘å‡ºæ¥æˆ‘ä»¬è®¨è®º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543196143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43184,"user_name":"PAN","can_delete":false,"product_type":"c1","uid":1241407,"ip_address":"","ucode":"F0A5610C62AF58","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/3f/ea64fccb.jpg","comment_is_top":false,"comment_ctime":1543194860,"is_pvip":false,"replies":[{"id":"15457","content":"é¢ï¼ŒåŸå›¾ä¸å¯¹ï¼Œå›¾æ›´æ–°äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543196803,"ip_address":"","comment_id":43184,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543194860","product_id":100020801,"comment_content":"å›¾1æ˜¯ä¸æ˜¯ç”»é”™äº†ï¼Ÿï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430315,"discussion_content":"é¢ï¼ŒåŸå›¾ä¸å¯¹ï¼Œå›¾æ›´æ–°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543196803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43181,"user_name":"DanielAnton","can_delete":false,"product_type":"c1","uid":1308521,"ip_address":"","ucode":"69D49AC70898B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f7/69/d8dba3de.jpg","comment_is_top":false,"comment_ctime":1543194694,"is_pvip":false,"replies":[{"id":"15456","content":"é¢ï¼ŒåŸå›¾ä¸å¯¹ï¼Œå›¾æ›´æ–°äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543196786,"ip_address":"","comment_id":43181,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543194694","product_id":100020801,"comment_content":"ä¸æ˜ç™½ï¼Œå›¾ä¸€ å¤‡ä»½çŠ¶æ€é‡Œ UserA çš„è´¦å·ä½™é¢ä¸æ˜¯å·²ç»æ‰£æˆ 101 äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430314,"discussion_content":"é¢ï¼ŒåŸå›¾ä¸å¯¹ï¼Œå›¾æ›´æ–°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543196786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43156,"user_name":"Sinyo","can_delete":false,"product_type":"c1","uid":1307297,"ip_address":"","ucode":"57B243E7AB86A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAibnPX9jW8kqLcIfibjic8GbkQkEUYyFKJkc39hZhibVlNrqwTjdLozkqibI2IwACd5YzofYickNxFnZg/132","comment_is_top":false,"comment_ctime":1543193311,"is_pvip":false,"replies":[{"id":"15450","content":"å¤‡ä»½å˜›å°±æ˜¯å¤‡ä»½æ•°æ®å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543196201,"ip_address":"","comment_id":43156,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543193311","product_id":100020801,"comment_content":"å…¨å±€é”çš„å…¸å‹ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œåšå…¨åº“é€»è¾‘å¤‡ä»½ã€‚ä¹Ÿå°±æ˜¯æŠŠæ•´åº“æ¯ä¸ªè¡¨éƒ½ select å‡ºæ¥å­˜æˆæ–‡æœ¬ã€‚<br><br>è€å¸ˆï¼Œè¿™é‡Œæ²¡çœ‹æ‡‚ï¼Œä¸ºä»€ä¹ˆå…¨å±€é€»è¾‘å¤‡ä»½çš„æ˜¯è¡¨æ•°æ®å‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430310,"discussion_content":"å¤‡ä»½å˜›å°±æ˜¯å¤‡ä»½æ•°æ®å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543196201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43119,"user_name":"æ±Ÿä¸­èŠ¦è‹‡","can_delete":false,"product_type":"c1","uid":1068059,"ip_address":"","ucode":"1FB79B0904BFEE","user_header":"https://static001.geekbang.org/account/avatar/00/10/4c/1b/b1953a5e.jpg","comment_is_top":false,"comment_ctime":1543184403,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543184403","product_id":100020801,"comment_content":"æ²™å‘","like_count":0},{"had_liked":false,"id":43104,"user_name":"æ¾èŠ±çš®è›‹me","can_delete":false,"product_type":"c1","uid":1000054,"ip_address":"","ucode":"B0846CEEF6B0D1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/76/256bbd43.jpg","comment_is_top":false,"comment_ctime":1543163240,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1543163240","product_id":100020801,"comment_content":"ç´¢å¼•cbï¼Œç´¢å¼•cä¼šä¸ä¼šcå­—æ®µç´¢å¼•é‡å¤äº†","like_count":0,"discussions":[{"author":{"id":2873900,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/da/2c/cdd92f3f.jpg","nickname":"wÃ¡ng","note":"","ucode":"9BFEA73AD7680D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558224,"discussion_content":"cbaå’Œcabï¼Œå“ªé‡Œé‡å¤äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648137572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138419,"discussion_content":"æ²¡é‡å¤ï¼Œå› ä¸ºæœ‰å¯èƒ½æœ‰caçš„éœ€æ±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579240742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}