{"id":292574,"title":"29 | Window Function","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-Flink\">https://gitee.com/geektime-geekbang/geektime-Flink</a></p>","comments":[{"had_liked":false,"id":253873,"user_name":"yang","can_delete":false,"product_type":"c3","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1602925577,"is_pvip":false,"replies":[{"id":93252,"content":"å¯ä»¥çš„ å¤§éƒ¨åˆ†èšåˆç®—å­éƒ½æ˜¯è¿™ä¹ˆå®ç°çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ åˆ©å…µ","uid":1119779,"ctime":1603529475,"ip_address":"","comment_id":253873,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"çœ‹åˆ°æœ‰ä½åŒå­¦è¯´ å¯¹ WindowProcessFunction åš state ä¿ç•™ï¼Œä¿ç•™æ¯æ¬¡è®¡ç®—ç»“æœã€‚\nå¯æ˜¯ WindowProcessFunction æœ¬èº«æ˜¯å…¨é‡å¤„ç†å½“å‰çª—å£ä¸­çš„å…ƒç´ å‘€ï¼Œä¹Ÿå°±æ˜¯åˆ°è¾¾è§¦å‘æ¡ä»¶äº†æ‰ä¸€æ¬¡æ€§åšå…¨é‡è®¡ç®—ã€‚\næ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºåº”è¯¥æ˜¯ä¸èƒ½è§£å†³è€å¸ˆè¯´çš„æ•´åˆé—®é¢˜çš„ã€‚\n\næˆ‘æƒ³ï¼Œå¯ä¸å¯ä»¥å°† WindowProcessFunction å°è£…è¿› ç±»ä¼¼ ReduceFunction è¿™æ ·çš„å¢é‡è®¡ç®—å‡½æ•°ä¸­ï¼Œ ä»è€Œè¾¾åˆ°ä»¥å…¨é‡çš„è®¡ç®—æ–¹å¼è®¡ç®—å¢é‡çš„æ•°æ®ï¼Ÿ æ—¢è¦ä¿è¯è®¡ç®—ç»“æœçš„æ­£ç¡®æ€§ã€è¿˜è¦ä¿è¯å¿«é€Ÿã€‚","like_count":5,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"å¼ åˆ©å…µ","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507210,"discussion_content":"å¯ä»¥çš„ å¤§éƒ¨åˆ†èšåˆç®—å­éƒ½æ˜¯è¿™ä¹ˆå®ç°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603529475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1613919,"avatar":"https://static001.geekbang.org/account/avatar/00/18/a0/5f/cf72d453.jpg","nickname":"å°è±¹å“¥","note":"","ucode":"115FF45CAA6FAD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":626997,"discussion_content":"æ²¡å¤ªæ˜ç™½ï¼Œæœ‰ä»£ç ç¤ºä¾‹çœ‹çœ‹å˜›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1693570760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272476,"user_name":"ç¢§é›ªå¤©è™¹","can_delete":false,"product_type":"c3","uid":1258359,"ip_address":"","ucode":"313CC048C7E341","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/77/0c593044.jpg","comment_is_top":false,"comment_ctime":1610096660,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"ProcessWindowFunction å¤„ç†æ€§èƒ½å¼±çš„åŸå› , ä¸»è¦æœ‰ä¸¤ç‚¹:\n1. æ—¶é—´ä¸Š, å› ä¸ºè¦ç­‰å¾…çª—å£å†…æ‰€æœ‰æ•°æ®åˆ°è¾¾åæ‰å¼€å§‹è®¡ç®—, æ‰€ä»¥è®¡ç®—è´Ÿè½½åœ¨æ—¶é—´çº¿ä¸Šæ˜¯ä¸å‡è¡¡çš„.\n2. ç©ºé—´ä¸Š, åŒæ ·å› ä¸ºè¦ç­‰å¾…çª—å£å†…æ‰€æœ‰æ•°æ®, é€ æˆæ•°æ®ä¼šæ»ç•™ä¸€æ®µæ—¶é—´, æ‰€ä»¥ç¼“å†²è´Ÿè½½åœ¨æ—¶é—´çº¿ä¸Šæ˜¯ä¸å‡è¡¡çš„.\n\nç»¼ä¸Šæ‰€è¿°, ä¼˜åŒ–çš„æ–¹å‘å°±æ˜¯åˆ†é˜¶æ®µ, å…ˆå¢é‡é¢„è®¡ç®—, å†å…¨é‡æ±‡æ€».\n\nå°±åƒè€å¸ˆè®²çš„æ±‚å¹³å‡æ•°è®¡ç®—, ä»æ•°å­¦ä¸Šæ¥è¯´è¿™æ˜¯éœ€è¦å…¨é‡æ•°æ®çš„, ä½†æ˜¯å¯ä»¥æ‹†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ:\n1. å±€éƒ¨å¢é‡è®¡ç®—ç´¯åŠ å€¼, å±€éƒ¨å¢é‡è®¡ç®—ç´¯è®¡æ•°, è¿™é‡Œä½¿ç”¨å¢é‡å‡½æ•°åœ¨å¤šä¸ªåˆ†åŒºåˆ†åˆ«è®¡ç®—, å‡ ä¹æ²¡æœ‰åœæ»å®Œæˆäº†æ•°æ®çš„é¢„è®¡ç®—.\n2. å…¨é‡åˆå¹¶ç´¯åŠ å€¼, å…¨é‡åˆå¹¶ç´¯è®¡æ•°, æœ€åç”¨æ€»ç´¯åŠ å€¼é™¤ä»¥æ€»ç´¯è®¡æ•°, å¾—åˆ°å¹³å‡å€¼, è¿™é‡Œä½¿ç”¨å…¨é‡å‡½æ•°æ±‡æ€»åˆ°å•ä¸ªç®—å­, ä½†æ˜¯ç›¸æ¯”æ”¶é›†æ‰€æœ‰çš„åŸå§‹æ•°æ®è®¡ç®—, ç¬¬äºŒé˜¶æ®µä¸è®ºæ˜¯è®¡ç®—å‹åŠ›è¿˜æ˜¯å­˜å‚¨å‹åŠ›éƒ½æ¯”ä¸€æ¬¡æ€§è®¡ç®—è¦å°.","like_count":14},{"had_liked":false,"id":288207,"user_name":"suke","can_delete":false,"product_type":"c3","uid":1007753,"ip_address":"","ucode":"C0287C31A4F45B","user_header":"","comment_is_top":false,"comment_ctime":1618365055,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"è€å¸ˆè®²äº†è¿™ä¹ˆå¤šç®—å­ï¼Œè¿ä¸€ä¸ªå¯ä»¥è·‘çš„ä»£ç ä¹Ÿæ²¡è®²è¿‡","like_count":3,"discussions":[{"author":{"id":2028957,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/9d/104bb8ea.jpg","nickname":"Geek2014","note":"","ucode":"9EB356D8DF287E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404757,"discussion_content":"æœ‰å·¥ç¨‹ï¼Œçœ‹ä¸€ä¸‹git","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634396493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2309076,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/hvb2KFTy9wdlpTA5dPVPyow44pDtAFH3abXphxktutTlpe2yveiaTqicz68icsUXkZGTjQnQ5zjX6ZQSRn5C6OicaA/132","nickname":"Geek_904551","note":"","ucode":"8AE24B32FBCD24","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369554,"discussion_content":"å¼€å§‹éƒ½è¯´äº†åªè®²åŸç†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619077480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252711,"user_name":"starwolf","can_delete":false,"product_type":"c3","uid":1340759,"ip_address":"","ucode":"124152634E7CC7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eondPEiaia6ugMDzWTRZXt6X5RLVtsYPBwiaskicyJADq1hD0KxyiaNiaRhBxgwTGia1fmDgfDo0y8YxjzKQ/132","comment_is_top":false,"comment_ctime":1602464027,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"æˆ‘è§‰å¾—ï¼Œå¦‚æœæƒ³è·å¾—å¢é‡æ–¹æ³•çš„æ€§èƒ½ï¼Œå¯ä»¥å°†processFunctionçš„å¤„ç†ç»“æœå­˜å…¥stateï¼Œè¿™æ ·ä¸‹æ¬¡æœ‰æ•°æ®æ¥çš„æ—¶å€™ï¼Œå¯ä»¥ä¸å…¶ä¸­çš„æŸäº›ä¸­é—´ç»“æœåšæ¯”è¾ƒï¼Œè€Œä¸ç”¨å†å°†æ‰€æœ‰æ•°æ®å…¨éƒ¨å¤„ç†ä¸€éï¼Œä»è€Œè¾¾åˆ°æ¥è¿‘å¢é‡æ–¹æ³•æ€§èƒ½çš„ç›®çš„ã€‚","like_count":1},{"had_liked":false,"id":363733,"user_name":"ææ–°å«Â Â ","can_delete":false,"product_type":"c3","uid":1948980,"ip_address":"åŒ—äº¬","ucode":"AA3B138B3B49F8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/bd/34/49ef96b2.jpg","comment_is_top":false,"comment_ctime":1670076408,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"å‘œå‘¼å“€å“‰","like_count":0},{"had_liked":false,"id":316251,"user_name":"tinyğŸŒ¾","can_delete":false,"product_type":"c3","uid":1119851,"ip_address":"","ucode":"7A4DE00381D1F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/6b/af7c7745.jpg","comment_is_top":false,"comment_ctime":1634221164,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"æœ‰2ä¸ªå·¥ç¨‹ä¸Šçš„é—®é¢˜é—®é¢˜ä¸å¤ªæ¸…æ¥š\n 1.èšåˆçš„ç»´åº¦æ•°æ®æœ‰é•¿æœ‰çŸ­ï¼Œæ¯”å¦‚ç”¨æˆ·1å¤©çš„ä¸‹è½½æ–‡ä»¶æ¬¡æ•°ï¼Œç”¨æˆ·5åˆ†é’Ÿä¸‹è½½æ–‡ä»¶æ¬¡æ•°ï¼Œè¿™2ç§æ˜¯éƒ½åœ¨flinké‡Œè®¡ç®—ï¼Œè¿˜æ˜¯è®¡ç®—5åˆ†é’Ÿçš„ï¼Œç„¶åç”¨5åˆ†é’Ÿçš„åœ¨èšåˆæˆä¸€å¤©çš„ï¼Ÿ\n2.åƒè¿™ä¹ˆå¤šç»´åº¦ï¼Œè¿™ä¹ˆå¤šæŒ‡æ ‡ä¸€èˆ¬æ€ä¹ˆå­˜å‚¨æ¯”è¾ƒæ–¹ä¾¿ï¼Ÿ redis,mysqlæˆ–è€…å…¶ä»–å­˜å‚¨ï¼Ÿ","like_count":0}]}