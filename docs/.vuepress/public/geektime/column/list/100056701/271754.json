{"id":271754,"title":"04 | AOFæ—¥å¿—ï¼šå®•æœºäº†ï¼ŒRediså¦‚ä½•é¿å…æ•°æ®ä¸¢å¤±ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å¾·é’§ã€‚</p><p>å¦‚æœæœ‰äººé—®ä½ ï¼šâ€œä½ ä¼šæŠŠRedisç”¨åœ¨ä»€ä¹ˆä¸šåŠ¡åœºæ™¯ä¸‹ï¼Ÿâ€æˆ‘æƒ³ä½ å¤§æ¦‚ç‡ä¼šè¯´ï¼šâ€œæˆ‘ä¼šæŠŠå®ƒå½“ä½œç¼“å­˜ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæŠŠåç«¯æ•°æ®åº“ä¸­çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œç„¶åç›´æ¥ä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œå“åº”é€Ÿåº¦ä¼šéå¸¸å¿«ã€‚â€æ²¡é”™ï¼Œè¿™ç¡®å®æ˜¯Redisçš„ä¸€ä¸ªæ™®éä½¿ç”¨åœºæ™¯ï¼Œä½†æ˜¯ï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªç»å¯¹ä¸èƒ½å¿½ç•¥çš„é—®é¢˜ï¼š<strong>ä¸€æ—¦æœåŠ¡å™¨å®•æœºï¼Œå†…å­˜ä¸­çš„æ•°æ®å°†å…¨éƒ¨ä¸¢å¤±ã€‚</strong></p><p>æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ï¼Œä»åç«¯æ•°æ®åº“æ¢å¤è¿™äº›æ•°æ®ï¼Œä½†è¿™ç§æ–¹å¼å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼šä¸€æ˜¯ï¼Œéœ€è¦é¢‘ç¹è®¿é—®æ•°æ®åº“ï¼Œä¼šç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§çš„å‹åŠ›ï¼›äºŒæ˜¯ï¼Œè¿™äº›æ•°æ®æ˜¯ä»æ…¢é€Ÿæ•°æ®åº“ä¸­è¯»å–å‡ºæ¥çš„ï¼Œæ€§èƒ½è‚¯å®šæ¯”ä¸ä¸Šä»Redisä¸­è¯»å–ï¼Œå¯¼è‡´ä½¿ç”¨è¿™äº›æ•°æ®çš„åº”ç”¨ç¨‹åºå“åº”å˜æ…¢ã€‚æ‰€ä»¥ï¼Œå¯¹Redisæ¥è¯´ï¼Œå®ç°æ•°æ®çš„æŒä¹…åŒ–ï¼Œé¿å…ä»åç«¯æ•°æ®åº“ä¸­è¿›è¡Œæ¢å¤ï¼Œæ˜¯è‡³å…³é‡è¦çš„ã€‚</p><p>ç›®å‰ï¼ŒRedisçš„æŒä¹…åŒ–ä¸»è¦æœ‰ä¸¤å¤§æœºåˆ¶ï¼Œå³AOFï¼ˆAppend Only Fileï¼‰æ—¥å¿—å’ŒRDBå¿«ç…§ã€‚åœ¨æ¥ä¸‹æ¥çš„ä¸¤èŠ‚è¯¾é‡Œï¼Œæˆ‘ä»¬å°±åˆ†åˆ«å­¦ä¹ ä¸€ä¸‹å§ã€‚è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å…ˆé‡ç‚¹å­¦ä¹ ä¸‹AOFæ—¥å¿—ã€‚</p><h2>AOFæ—¥å¿—æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h2><p>è¯´åˆ°æ—¥å¿—ï¼Œæˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„æ˜¯æ•°æ®åº“çš„å†™å‰æ—¥å¿—ï¼ˆWrite Ahead Log, WALï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å®é™…å†™æ•°æ®å‰ï¼Œå…ˆæŠŠä¿®æ”¹çš„æ•°æ®è®°åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿æ•…éšœæ—¶è¿›è¡Œæ¢å¤ã€‚ä¸è¿‡ï¼ŒAOFæ—¥å¿—æ­£å¥½ç›¸åï¼Œå®ƒæ˜¯å†™åæ—¥å¿—ï¼Œâ€œå†™åâ€çš„æ„æ€æ˜¯Redisæ˜¯å…ˆæ‰§è¡Œå‘½ä»¤ï¼ŒæŠŠæ•°æ®å†™å…¥å†…å­˜ï¼Œç„¶åæ‰è®°å½•æ—¥å¿—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/40/1f/407f2686083afc37351cfd9107319a1f.jpg?wh=3218*1789\" alt=\"\" title=\"Redis AOFæ“ä½œè¿‡ç¨‹\"></p><p>é‚£AOFä¸ºä»€ä¹ˆè¦å…ˆæ‰§è¡Œå‘½ä»¤å†è®°æ—¥å¿—å‘¢ï¼Ÿè¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è¦å…ˆçŸ¥é“AOFé‡Œè®°å½•äº†ä»€ä¹ˆå†…å®¹ã€‚</p><p>ä¼ ç»Ÿæ•°æ®åº“çš„æ—¥å¿—ï¼Œä¾‹å¦‚redo logï¼ˆé‡åšæ—¥å¿—ï¼‰ï¼Œè®°å½•çš„æ˜¯ä¿®æ”¹åçš„æ•°æ®ï¼Œè€ŒAOFé‡Œè®°å½•çš„æ˜¯Redisæ”¶åˆ°çš„æ¯ä¸€æ¡å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤æ˜¯ä»¥æ–‡æœ¬å½¢å¼ä¿å­˜çš„ã€‚</p><p>æˆ‘ä»¬ä»¥Redisæ”¶åˆ°â€œset testkey testvalueâ€å‘½ä»¤åè®°å½•çš„æ—¥å¿—ä¸ºä¾‹ï¼Œçœ‹çœ‹AOFæ—¥å¿—çš„å†…å®¹ã€‚å…¶ä¸­ï¼Œâ€œ<code>*3</code>â€è¡¨ç¤ºå½“å‰å‘½ä»¤æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†éƒ½æ˜¯ç”±â€œ<code>$+æ•°å­—</code>â€å¼€å¤´ï¼Œåé¢ç´§è·Ÿç€å…·ä½“çš„å‘½ä»¤ã€é”®æˆ–å€¼ã€‚è¿™é‡Œï¼Œâ€œæ•°å­—â€è¡¨ç¤ºè¿™éƒ¨åˆ†ä¸­çš„å‘½ä»¤ã€é”®æˆ–å€¼ä¸€å…±æœ‰å¤šå°‘å­—èŠ‚ã€‚ä¾‹å¦‚ï¼Œâ€œ<code>$3 set</code>â€è¡¨ç¤ºè¿™éƒ¨åˆ†æœ‰3ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯â€œsetâ€å‘½ä»¤ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4d/9f/4d120bee623642e75fdf1c0700623a9f.jpg?wh=3094*2250\" alt=\"\" title=\"Redis AOFæ—¥å¿—å†…å®¹\"></p><p>ä½†æ˜¯ï¼Œä¸ºäº†é¿å…é¢å¤–çš„æ£€æŸ¥å¼€é”€ï¼ŒRedisåœ¨å‘AOFé‡Œé¢è®°å½•æ—¥å¿—çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šå…ˆå»å¯¹è¿™äº›å‘½ä»¤è¿›è¡Œè¯­æ³•æ£€æŸ¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœå…ˆè®°æ—¥å¿—å†æ‰§è¡Œå‘½ä»¤çš„è¯ï¼Œæ—¥å¿—ä¸­å°±æœ‰å¯èƒ½è®°å½•äº†é”™è¯¯çš„å‘½ä»¤ï¼ŒRedisåœ¨ä½¿ç”¨æ—¥å¿—æ¢å¤æ•°æ®æ—¶ï¼Œå°±å¯èƒ½ä¼šå‡ºé”™ã€‚</p><p>è€Œå†™åæ—¥å¿—è¿™ç§æ–¹å¼ï¼Œå°±æ˜¯å…ˆè®©ç³»ç»Ÿæ‰§è¡Œå‘½ä»¤ï¼Œåªæœ‰å‘½ä»¤èƒ½æ‰§è¡ŒæˆåŠŸï¼Œæ‰ä¼šè¢«è®°å½•åˆ°æ—¥å¿—ä¸­ï¼Œå¦åˆ™ï¼Œç³»ç»Ÿå°±ä¼šç›´æ¥å‘å®¢æˆ·ç«¯æŠ¥é”™ã€‚æ‰€ä»¥ï¼ŒRedisä½¿ç”¨å†™åæ—¥å¿—è¿™ä¸€æ–¹å¼çš„ä¸€å¤§å¥½å¤„æ˜¯ï¼Œå¯ä»¥é¿å…å‡ºç°è®°å½•é”™è¯¯å‘½ä»¤çš„æƒ…å†µã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒAOFè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼šå®ƒæ˜¯åœ¨å‘½ä»¤æ‰§è¡Œåæ‰è®°å½•æ—¥å¿—ï¼Œæ‰€ä»¥<strong>ä¸ä¼šé˜»å¡å½“å‰çš„å†™æ“ä½œ</strong>ã€‚</p><p>ä¸è¿‡ï¼ŒAOFä¹Ÿæœ‰ä¸¤ä¸ªæ½œåœ¨çš„é£é™©ã€‚</p><p>é¦–å…ˆï¼Œå¦‚æœåˆšæ‰§è¡Œå®Œä¸€ä¸ªå‘½ä»¤ï¼Œè¿˜æ²¡æœ‰æ¥å¾—åŠè®°æ—¥å¿—å°±å®•æœºäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘½ä»¤å’Œç›¸åº”çš„æ•°æ®å°±æœ‰ä¸¢å¤±çš„é£é™©ã€‚å¦‚æœæ­¤æ—¶Redisæ˜¯ç”¨ä½œç¼“å­˜ï¼Œè¿˜å¯ä»¥ä»åç«¯æ•°æ®åº“é‡æ–°è¯»å…¥æ•°æ®è¿›è¡Œæ¢å¤ï¼Œä½†æ˜¯ï¼Œå¦‚æœRedisæ˜¯ç›´æ¥ç”¨ä½œæ•°æ®åº“çš„è¯ï¼Œæ­¤æ—¶ï¼Œå› ä¸ºå‘½ä»¤æ²¡æœ‰è®°å…¥æ—¥å¿—ï¼Œæ‰€ä»¥å°±æ— æ³•ç”¨æ—¥å¿—è¿›è¡Œæ¢å¤äº†ã€‚</p><p>å…¶æ¬¡ï¼ŒAOFè™½ç„¶é¿å…äº†å¯¹å½“å‰å‘½ä»¤çš„é˜»å¡ï¼Œä½†å¯èƒ½ä¼šç»™ä¸‹ä¸€ä¸ªæ“ä½œå¸¦æ¥é˜»å¡é£é™©ã€‚è¿™æ˜¯å› ä¸ºï¼ŒAOFæ—¥å¿—ä¹Ÿæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¦‚æœåœ¨æŠŠæ—¥å¿—æ–‡ä»¶å†™å…¥ç£ç›˜æ—¶ï¼Œç£ç›˜å†™å‹åŠ›å¤§ï¼Œå°±ä¼šå¯¼è‡´å†™ç›˜å¾ˆæ…¢ï¼Œè¿›è€Œå¯¼è‡´åç»­çš„æ“ä½œä¹Ÿæ— æ³•æ‰§è¡Œäº†ã€‚</p><p>ä»”ç»†åˆ†æçš„è¯ï¼Œä½ å°±ä¼šå‘ç°ï¼Œè¿™ä¸¤ä¸ªé£é™©éƒ½æ˜¯å’ŒAOFå†™å›ç£ç›˜çš„æ—¶æœºç›¸å…³çš„ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶ä¸€ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®ŒåAOFæ—¥å¿—å†™å›ç£ç›˜çš„æ—¶æœºï¼Œè¿™ä¸¤ä¸ªé£é™©å°±è§£é™¤äº†ã€‚</p><h2>ä¸‰ç§å†™å›ç­–ç•¥</h2><p>å…¶å®ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜ï¼ŒAOFæœºåˆ¶ç»™æˆ‘ä»¬æä¾›äº†ä¸‰ä¸ªé€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯AOFé…ç½®é¡¹appendfsyncçš„ä¸‰ä¸ªå¯é€‰å€¼ã€‚</p><ul>\n<li><strong>Always</strong>ï¼ŒåŒæ­¥å†™å›ï¼šæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œç«‹é©¬åŒæ­¥åœ°å°†æ—¥å¿—å†™å›ç£ç›˜ï¼›</li>\n<li><strong>Everysec</strong>ï¼Œæ¯ç§’å†™å›ï¼šæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œåªæ˜¯å…ˆæŠŠæ—¥å¿—å†™åˆ°AOFæ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œæ¯éš”ä¸€ç§’æŠŠç¼“å†²åŒºä¸­çš„å†…å®¹å†™å…¥ç£ç›˜ï¼›</li>\n<li><strong>No</strong>ï¼Œæ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›ï¼šæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œåªæ˜¯å…ˆæŠŠæ—¥å¿—å†™åˆ°AOFæ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å°†ç¼“å†²åŒºå†…å®¹å†™å›ç£ç›˜ã€‚</li>\n</ul><p>é’ˆå¯¹é¿å…ä¸»çº¿ç¨‹é˜»å¡å’Œå‡å°‘æ•°æ®ä¸¢å¤±é—®é¢˜ï¼Œè¿™ä¸‰ç§å†™å›ç­–ç•¥éƒ½æ— æ³•åšåˆ°ä¸¤å…¨å…¶ç¾ã€‚æˆ‘ä»¬æ¥åˆ†æä¸‹å…¶ä¸­çš„åŸå› ã€‚</p><ul>\n<li>â€œåŒæ­¥å†™å›â€å¯ä»¥åšåˆ°åŸºæœ¬ä¸ä¸¢æ•°æ®ï¼Œä½†æ˜¯å®ƒåœ¨æ¯ä¸€ä¸ªå†™å‘½ä»¤åéƒ½æœ‰ä¸€ä¸ªæ…¢é€Ÿçš„è½ç›˜æ“ä½œï¼Œä¸å¯é¿å…åœ°ä¼šå½±å“ä¸»çº¿ç¨‹æ€§èƒ½ï¼›</li>\n<li>è™½ç„¶â€œæ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›â€åœ¨å†™å®Œç¼“å†²åŒºåï¼Œå°±å¯ä»¥ç»§ç»­æ‰§è¡Œåç»­çš„å‘½ä»¤ï¼Œä½†æ˜¯è½ç›˜çš„æ—¶æœºå·²ç»ä¸åœ¨Redisæ‰‹ä¸­äº†ï¼Œåªè¦AOFè®°å½•æ²¡æœ‰å†™å›ç£ç›˜ï¼Œä¸€æ—¦å®•æœºå¯¹åº”çš„æ•°æ®å°±ä¸¢å¤±äº†ï¼›</li>\n<li>â€œæ¯ç§’å†™å›â€é‡‡ç”¨ä¸€ç§’å†™å›ä¸€æ¬¡çš„é¢‘ç‡ï¼Œé¿å…äº†â€œåŒæ­¥å†™å›â€çš„æ€§èƒ½å¼€é”€ï¼Œè™½ç„¶å‡å°‘äº†å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ï¼Œä½†æ˜¯å¦‚æœå‘ç”Ÿå®•æœºï¼Œä¸Šä¸€ç§’å†…æœªè½ç›˜çš„å‘½ä»¤æ“ä½œä»ç„¶ä¼šä¸¢å¤±ã€‚æ‰€ä»¥ï¼Œè¿™åªèƒ½ç®—æ˜¯ï¼Œåœ¨é¿å…å½±å“ä¸»çº¿ç¨‹æ€§èƒ½å’Œé¿å…æ•°æ®ä¸¢å¤±ä¸¤è€…é—´å–äº†ä¸ªæŠ˜ä¸­ã€‚</li>\n</ul><p>æˆ‘æŠŠè¿™ä¸‰ç§ç­–ç•¥çš„å†™å›æ—¶æœºï¼Œä»¥åŠä¼˜ç¼ºç‚¹æ±‡æ€»åœ¨äº†ä¸€å¼ è¡¨æ ¼é‡Œï¼Œä»¥æ–¹ä¾¿ä½ éšæ—¶æŸ¥çœ‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/72/f8/72f547f18dbac788c7d11yy167d7ebf8.jpg?wh=2284*682\" alt=\"\"></p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ç³»ç»Ÿå¯¹é«˜æ€§èƒ½å’Œé«˜å¯é æ€§çš„è¦æ±‚ï¼Œæ¥é€‰æ‹©ä½¿ç”¨å“ªç§å†™å›ç­–ç•¥äº†ã€‚æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼šæƒ³è¦è·å¾—é«˜æ€§èƒ½ï¼Œå°±é€‰æ‹©Noç­–ç•¥ï¼›å¦‚æœæƒ³è¦å¾—åˆ°é«˜å¯é æ€§ä¿è¯ï¼Œå°±é€‰æ‹©Alwaysç­–ç•¥ï¼›å¦‚æœå…è®¸æ•°æ®æœ‰ä¸€ç‚¹ä¸¢å¤±ï¼Œåˆå¸Œæœ›æ€§èƒ½åˆ«å—å¤ªå¤§å½±å“çš„è¯ï¼Œé‚£ä¹ˆå°±é€‰æ‹©Everysecç­–ç•¥ã€‚</p><p>ä½†æ˜¯ï¼ŒæŒ‰ç…§ç³»ç»Ÿçš„æ€§èƒ½éœ€æ±‚é€‰å®šäº†å†™å›ç­–ç•¥ï¼Œå¹¶ä¸æ˜¯â€œé«˜æ•æ— å¿§â€äº†ã€‚æ¯•ç«Ÿï¼ŒAOFæ˜¯ä»¥æ–‡ä»¶çš„å½¢å¼åœ¨è®°å½•æ¥æ”¶åˆ°çš„æ‰€æœ‰å†™å‘½ä»¤ã€‚éšç€æ¥æ”¶çš„å†™å‘½ä»¤è¶Šæ¥è¶Šå¤šï¼ŒAOFæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæˆ‘ä»¬ä¸€å®šè¦å°å¿ƒAOFæ–‡ä»¶è¿‡å¤§å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>è¿™é‡Œçš„â€œæ€§èƒ½é—®é¢˜â€ï¼Œä¸»è¦åœ¨äºä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼šä¸€æ˜¯ï¼Œæ–‡ä»¶ç³»ç»Ÿæœ¬èº«å¯¹æ–‡ä»¶å¤§å°æœ‰é™åˆ¶ï¼Œæ— æ³•ä¿å­˜è¿‡å¤§çš„æ–‡ä»¶ï¼›äºŒæ˜¯ï¼Œå¦‚æœæ–‡ä»¶å¤ªå¤§ï¼Œä¹‹åå†å¾€é‡Œé¢è¿½åŠ å‘½ä»¤è®°å½•çš„è¯ï¼Œæ•ˆç‡ä¹Ÿä¼šå˜ä½ï¼›ä¸‰æ˜¯ï¼Œå¦‚æœå‘ç”Ÿå®•æœºï¼ŒAOFä¸­è®°å½•çš„å‘½ä»¤è¦ä¸€ä¸ªä¸ªè¢«é‡æ–°æ‰§è¡Œï¼Œç”¨äºæ•…éšœæ¢å¤ï¼Œå¦‚æœæ—¥å¿—æ–‡ä»¶å¤ªå¤§ï¼Œæ•´ä¸ªæ¢å¤è¿‡ç¨‹å°±ä¼šéå¸¸ç¼“æ…¢ï¼Œè¿™å°±ä¼šå½±å“åˆ°Redisçš„æ­£å¸¸ä½¿ç”¨ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±è¦é‡‡å–ä¸€å®šçš„æ§åˆ¶æ‰‹æ®µï¼Œè¿™ä¸ªæ—¶å€™ï¼Œ<strong>AOFé‡å†™æœºåˆ¶</strong>å°±ç™»åœºäº†ã€‚</p><h2>æ—¥å¿—æ–‡ä»¶å¤ªå¤§äº†æ€ä¹ˆåŠï¼Ÿ</h2><p>ç®€å•æ¥è¯´ï¼ŒAOFé‡å†™æœºåˆ¶å°±æ˜¯åœ¨é‡å†™æ—¶ï¼ŒRedisæ ¹æ®æ•°æ®åº“çš„ç°çŠ¶åˆ›å»ºä¸€ä¸ªæ–°çš„AOFæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯»å–æ•°æ®åº“ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ï¼Œç„¶åå¯¹æ¯ä¸€ä¸ªé”®å€¼å¯¹ç”¨ä¸€æ¡å‘½ä»¤è®°å½•å®ƒçš„å†™å…¥ã€‚æ¯”å¦‚è¯´ï¼Œå½“è¯»å–äº†é”®å€¼å¯¹â€œtestkeyâ€: â€œtestvalueâ€ä¹‹åï¼Œé‡å†™æœºåˆ¶ä¼šè®°å½•set testkey testvalueè¿™æ¡å‘½ä»¤ã€‚è¿™æ ·ï¼Œå½“éœ€è¦æ¢å¤æ—¶ï¼Œå¯ä»¥é‡æ–°æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå®ç°â€œtestkeyâ€: â€œtestvalueâ€çš„å†™å…¥ã€‚</p><p>ä¸ºä»€ä¹ˆé‡å†™æœºåˆ¶å¯ä»¥æŠŠæ—¥å¿—æ–‡ä»¶å˜å°å‘¢? å®é™…ä¸Šï¼Œé‡å†™æœºåˆ¶å…·æœ‰â€œå¤šå˜ä¸€â€åŠŸèƒ½ã€‚æ‰€è°“çš„â€œå¤šå˜ä¸€â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ—§æ—¥å¿—æ–‡ä»¶ä¸­çš„å¤šæ¡å‘½ä»¤ï¼Œåœ¨é‡å†™åçš„æ–°æ—¥å¿—ä¸­å˜æˆäº†ä¸€æ¡å‘½ä»¤ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒAOFæ–‡ä»¶æ˜¯ä»¥è¿½åŠ çš„æ–¹å¼ï¼Œé€ä¸€è®°å½•æ¥æ”¶åˆ°çš„å†™å‘½ä»¤çš„ã€‚å½“ä¸€ä¸ªé”®å€¼å¯¹è¢«å¤šæ¡å†™å‘½ä»¤åå¤ä¿®æ”¹æ—¶ï¼ŒAOFæ–‡ä»¶ä¼šè®°å½•ç›¸åº”çš„å¤šæ¡å‘½ä»¤ã€‚ä½†æ˜¯ï¼Œåœ¨é‡å†™çš„æ—¶å€™ï¼Œæ˜¯æ ¹æ®è¿™ä¸ªé”®å€¼å¯¹å½“å‰çš„æœ€æ–°çŠ¶æ€ï¼Œä¸ºå®ƒç”Ÿæˆå¯¹åº”çš„å†™å…¥å‘½ä»¤ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸€ä¸ªé”®å€¼å¯¹åœ¨é‡å†™æ—¥å¿—ä¸­åªç”¨ä¸€æ¡å‘½ä»¤å°±è¡Œäº†ï¼Œè€Œä¸”ï¼Œåœ¨æ—¥å¿—æ¢å¤æ—¶ï¼Œåªç”¨æ‰§è¡Œè¿™æ¡å‘½ä»¤ï¼Œå°±å¯ä»¥ç›´æ¥å®Œæˆè¿™ä¸ªé”®å€¼å¯¹çš„å†™å…¥äº†ã€‚</p><p>ä¸‹é¢è¿™å¼ å›¾å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/65/08/6528c699fdcf40b404af57040bb8d208.jpg?wh=4000*1088\" alt=\"\" title=\"AOFé‡å†™å‡å°‘æ—¥å¿—å¤§å°\"></p><p>å½“æˆ‘ä»¬å¯¹ä¸€ä¸ªåˆ—è¡¨å…ˆååšäº†6æ¬¡ä¿®æ”¹æ“ä½œåï¼Œåˆ—è¡¨çš„æœ€åçŠ¶æ€æ˜¯[â€œDâ€, â€œCâ€, â€œNâ€]ï¼Œæ­¤æ—¶ï¼Œåªç”¨LPUSH u:list â€œNâ€, â€œCâ€, \"D\"è¿™ä¸€æ¡å‘½ä»¤å°±èƒ½å®ç°è¯¥æ•°æ®çš„æ¢å¤ï¼Œè¿™å°±èŠ‚çœäº†äº”æ¡å‘½ä»¤çš„ç©ºé—´ã€‚å¯¹äºè¢«ä¿®æ”¹è¿‡æˆç™¾ä¸Šåƒæ¬¡çš„é”®å€¼å¯¹æ¥è¯´ï¼Œé‡å†™èƒ½èŠ‚çœçš„ç©ºé—´å½“ç„¶å°±æ›´å¤§äº†ã€‚</p><p>ä¸è¿‡ï¼Œè™½ç„¶AOFé‡å†™åï¼Œæ—¥å¿—æ–‡ä»¶ä¼šç¼©å°ï¼Œä½†æ˜¯ï¼Œè¦æŠŠæ•´ä¸ªæ•°æ®åº“çš„æœ€æ–°æ•°æ®çš„æ“ä½œæ—¥å¿—éƒ½å†™å›ç£ç›˜ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªéå¸¸è€—æ—¶çš„è¿‡ç¨‹ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±è¦ç»§ç»­å…³æ³¨å¦ä¸€ä¸ªé—®é¢˜äº†ï¼šé‡å†™ä¼šä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Ÿ</p><h2>AOFé‡å†™ä¼šé˜»å¡å—?</h2><p>å’ŒAOFæ—¥å¿—ç”±ä¸»çº¿ç¨‹å†™å›ä¸åŒï¼Œé‡å†™è¿‡ç¨‹æ˜¯ç”±åå°å­è¿›ç¨‹bgrewriteaofæ¥å®Œæˆçš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†é¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´æ•°æ®åº“æ€§èƒ½ä¸‹é™ã€‚</p><p>æˆ‘æŠŠé‡å†™çš„è¿‡ç¨‹æ€»ç»“ä¸ºâ€œ<strong>ä¸€ä¸ªæ‹·è´ï¼Œä¸¤å¤„æ—¥å¿—</strong>â€ã€‚</p><p>â€œä¸€ä¸ªæ‹·è´â€å°±æ˜¯æŒ‡ï¼Œæ¯æ¬¡æ‰§è¡Œé‡å†™æ—¶ï¼Œä¸»çº¿ç¨‹forkå‡ºåå°çš„bgrewriteaofå­è¿›ç¨‹ã€‚æ­¤æ—¶ï¼Œforkä¼šæŠŠä¸»çº¿ç¨‹çš„å†…å­˜æ‹·è´ä¸€ä»½ç»™bgrewriteaofå­è¿›ç¨‹ï¼Œè¿™é‡Œé¢å°±åŒ…å«äº†æ•°æ®åº“çš„æœ€æ–°æ•°æ®ã€‚ç„¶åï¼Œbgrewriteaofå­è¿›ç¨‹å°±å¯ä»¥åœ¨ä¸å½±å“ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œé€ä¸€æŠŠæ‹·è´çš„æ•°æ®å†™æˆæ“ä½œï¼Œè®°å…¥é‡å†™æ—¥å¿—ã€‚</p><p>â€œä¸¤å¤„æ—¥å¿—â€åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å› ä¸ºä¸»çº¿ç¨‹æœªé˜»å¡ï¼Œä»ç„¶å¯ä»¥å¤„ç†æ–°æ¥çš„æ“ä½œã€‚æ­¤æ—¶ï¼Œå¦‚æœæœ‰å†™æ“ä½œï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„AOFæ—¥å¿—ï¼ŒRedisä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ªAOFæ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚</p><p>è€Œç¬¬äºŒå¤„æ—¥å¿—ï¼Œå°±æ˜¯æŒ‡æ–°çš„AOFé‡å†™æ—¥å¿—ã€‚è¿™ä¸ªæ“ä½œä¹Ÿä¼šè¢«å†™åˆ°é‡å†™æ—¥å¿—çš„ç¼“å†²åŒºã€‚è¿™æ ·ï¼Œé‡å†™æ—¥å¿—ä¹Ÿä¸ä¼šä¸¢å¤±æœ€æ–°çš„æ“ä½œã€‚ç­‰åˆ°æ‹·è´æ•°æ®çš„æ‰€æœ‰æ“ä½œè®°å½•é‡å†™å®Œæˆåï¼Œé‡å†™æ—¥å¿—è®°å½•çš„è¿™äº›æœ€æ–°æ“ä½œä¹Ÿä¼šå†™å…¥æ–°çš„AOFæ–‡ä»¶ï¼Œä»¥ä¿è¯æ•°æ®åº“æœ€æ–°çŠ¶æ€çš„è®°å½•ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æ–°çš„AOFæ–‡ä»¶æ›¿ä»£æ—§æ–‡ä»¶äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6b/e8/6b054eb1aed0734bd81ddab9a31d0be8.jpg?wh=3688*1920\" alt=\"\" title=\"AOFéé˜»å¡çš„é‡å†™è¿‡ç¨‹\"></p><p>æ€»ç»“æ¥è¯´ï¼Œæ¯æ¬¡AOFé‡å†™æ—¶ï¼ŒRedisä¼šå…ˆæ‰§è¡Œä¸€ä¸ªå†…å­˜æ‹·è´ï¼Œç”¨äºé‡å†™ï¼›ç„¶åï¼Œä½¿ç”¨ä¸¤ä¸ªæ—¥å¿—ä¿è¯åœ¨é‡å†™è¿‡ç¨‹ä¸­ï¼Œæ–°å†™å…¥çš„æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚è€Œä¸”ï¼Œå› ä¸ºRedisé‡‡ç”¨é¢å¤–çš„çº¿ç¨‹è¿›è¡Œæ•°æ®é‡å†™ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªè¿‡ç¨‹å¹¶ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘å‘ä½ ä»‹ç»äº†Redisç”¨äºé¿å…æ•°æ®ä¸¢å¤±çš„AOFæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•é€šè¿‡é€ä¸€è®°å½•æ“ä½œå‘½ä»¤ï¼Œåœ¨æ¢å¤æ—¶å†é€ä¸€æ‰§è¡Œå‘½ä»¤çš„æ–¹å¼ï¼Œä¿è¯äº†æ•°æ®çš„å¯é æ€§ã€‚</p><p>è¿™ä¸ªæ–¹æ³•çœ‹ä¼¼â€œç®€å•â€ï¼Œä½†ä¹Ÿæ˜¯å……åˆ†è€ƒè™‘äº†å¯¹Redisæ€§èƒ½çš„å½±å“ã€‚æ€»ç»“æ¥è¯´ï¼Œå®ƒæä¾›äº†AOFæ—¥å¿—çš„ä¸‰ç§å†™å›ç­–ç•¥ï¼Œåˆ†åˆ«æ˜¯Alwaysã€Everysecå’ŒNoï¼Œè¿™ä¸‰ç§ç­–ç•¥åœ¨å¯é æ€§ä¸Šæ˜¯ä»é«˜åˆ°ä½ï¼Œè€Œåœ¨æ€§èƒ½ä¸Šåˆ™æ˜¯ä»ä½åˆ°é«˜ã€‚</p><p>æ­¤å¤–ï¼Œä¸ºäº†é¿å…æ—¥å¿—æ–‡ä»¶è¿‡å¤§ï¼ŒRedisè¿˜æä¾›äº†AOFé‡å†™æœºåˆ¶ï¼Œç›´æ¥æ ¹æ®æ•°æ®åº“é‡Œæ•°æ®çš„æœ€æ–°çŠ¶æ€ï¼Œç”Ÿæˆè¿™äº›æ•°æ®çš„æ’å…¥å‘½ä»¤ï¼Œä½œä¸ºæ–°æ—¥å¿—ã€‚è¿™ä¸ªè¿‡ç¨‹é€šè¿‡åå°çº¿ç¨‹å®Œæˆï¼Œé¿å…äº†å¯¹ä¸»çº¿ç¨‹çš„é˜»å¡ã€‚</p><p>å…¶ä¸­ï¼Œä¸‰ç§å†™å›ç­–ç•¥ä½“ç°äº†ç³»ç»Ÿè®¾è®¡ä¸­çš„ä¸€ä¸ªé‡è¦åŸåˆ™ ï¼Œå³trade-offï¼Œæˆ–è€…ç§°ä¸ºâ€œå–èˆâ€ï¼ŒæŒ‡çš„å°±æ˜¯åœ¨æ€§èƒ½å’Œå¯é æ€§ä¿è¯ä¹‹é—´åšå–èˆã€‚æˆ‘è®¤ä¸ºï¼Œè¿™æ˜¯åšç³»ç»Ÿè®¾è®¡å’Œå¼€å‘çš„ä¸€ä¸ªå…³é”®å“²å­¦ï¼Œæˆ‘ä¹Ÿéå¸¸å¸Œæœ›ï¼Œä½ èƒ½å……åˆ†åœ°ç†è§£è¿™ä¸ªåŸåˆ™ï¼Œå¹¶åœ¨æ—¥å¸¸å¼€å‘ä¸­åŠ ä»¥åº”ç”¨ã€‚</p><p>ä¸è¿‡ï¼Œä½ å¯èƒ½ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œè½ç›˜æ—¶æœºå’Œé‡å†™æœºåˆ¶éƒ½æ˜¯åœ¨â€œè®°æ—¥å¿—â€è¿™ä¸€è¿‡ç¨‹ä¸­å‘æŒ¥ä½œç”¨çš„ã€‚ä¾‹å¦‚ï¼Œè½ç›˜æ—¶æœºçš„é€‰æ‹©å¯ä»¥é¿å…è®°æ—¥å¿—æ—¶é˜»å¡ä¸»çº¿ç¨‹ï¼Œé‡å†™å¯ä»¥é¿å…æ—¥å¿—æ–‡ä»¶è¿‡å¤§ã€‚ä½†æ˜¯ï¼Œåœ¨â€œç”¨æ—¥å¿—â€çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨AOFè¿›è¡Œæ•…éšœæ¢å¤æ—¶ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦æŠŠæ‰€æœ‰çš„æ“ä½œè®°å½•éƒ½è¿è¡Œä¸€éã€‚å†åŠ ä¸ŠRedisçš„å•çº¿ç¨‹è®¾è®¡ï¼Œè¿™äº›å‘½ä»¤æ“ä½œåªèƒ½ä¸€æ¡ä¸€æ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œè¿™ä¸ªâ€œé‡æ”¾â€çš„è¿‡ç¨‹å°±ä¼šå¾ˆæ…¢äº†ã€‚</p><p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰æ—¢èƒ½é¿å…æ•°æ®ä¸¢å¤±ï¼Œåˆèƒ½æ›´å¿«åœ°æ¢å¤çš„æ–¹æ³•å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œé‚£å°±æ˜¯RDBå¿«ç…§äº†ã€‚ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±ä¸€èµ·å­¦ä¹ ä¸€ä¸‹ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p><h2>æ¯è¯¾ä¸€é—®</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ç»™ä½ æä¸¤ä¸ªå°é—®é¢˜ï¼š</p><ol>\n<li>AOFæ—¥å¿—é‡å†™çš„æ—¶å€™ï¼Œæ˜¯ç”±bgrewriteaofå­è¿›ç¨‹æ¥å®Œæˆçš„ï¼Œä¸ç”¨ä¸»çº¿ç¨‹å‚ä¸ï¼Œæˆ‘ä»¬ä»Šå¤©è¯´çš„éé˜»å¡ä¹Ÿæ˜¯æŒ‡å­è¿›ç¨‹çš„æ‰§è¡Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚ä½†æ˜¯ï¼Œä½ è§‰å¾—ï¼Œè¿™ä¸ªé‡å†™è¿‡ç¨‹æœ‰æ²¡æœ‰å…¶ä»–æ½œåœ¨çš„é˜»å¡é£é™©å‘¢ï¼Ÿå¦‚æœæœ‰çš„è¯ï¼Œä¼šåœ¨å“ªé‡Œé˜»å¡ï¼Ÿ</li>\n<li>AOFé‡å†™ä¹Ÿæœ‰ä¸€ä¸ªé‡å†™æ—¥å¿—ï¼Œä¸ºä»€ä¹ˆå®ƒä¸å…±äº«ä½¿ç”¨AOFæœ¬èº«çš„æ—¥å¿—å‘¢ï¼Ÿ</li>\n</ol><p>å¸Œæœ›ä½ èƒ½å¥½å¥½æ€è€ƒä¸€ä¸‹è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„ç­”æ¡ˆã€‚å¦å¤–ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾çš„å†…å®¹è½¬å‘å‡ºå»ï¼Œå’Œæ›´å¤šçš„äººä¸€èµ·äº¤æµè®¨è®ºã€‚</p>","neighbors":{"left":{"article_title":"03 | é«˜æ€§èƒ½IOæ¨¡å‹ï¼šä¸ºä»€ä¹ˆå•çº¿ç¨‹Redisèƒ½é‚£ä¹ˆå¿«ï¼Ÿ","id":270474},"right":{"article_title":"05 | å†…å­˜å¿«ç…§ï¼šå®•æœºåï¼ŒRediså¦‚ä½•å®ç°å¿«é€Ÿæ¢å¤ï¼Ÿ","id":271839}},"comments":[{"had_liked":false,"id":241152,"user_name":"Kaito","can_delete":false,"product_type":"c1","uid":1020042,"ip_address":"","ucode":"79775FA35A95F2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","comment_is_top":true,"comment_ctime":1597203496,"is_pvip":true,"replies":[{"id":"89327","content":"éå¸¸èµï¼è¿™ä¸ªå›ç­”ä¸€å®šè¦ç½®é¡¶ï¼<br><br>è€Œä¸”KaitoåŒå­¦çš„ä¸å°‘é—®é¢˜å›ç­”éƒ½éå¸¸ä»”ç»†å’Œç²¾å½©ï¼Œéå¸¸å€¼å¾—ä¸€è¯»ï¼<br><br>è¿™é‡Œè¦è°¢è°¢KaitoåŒå­¦æŒ‡å‡ºçš„æ–‡ç« ä¸­çš„æ­§ä¹‰ï¼šforkå­è¿›ç¨‹æ—¶ï¼Œå­è¿›ç¨‹æ˜¯ä¼šæ‹·è´çˆ¶è¿›ç¨‹çš„é¡µè¡¨ï¼Œå³è™šå®æ˜ å°„å…³ç³»ï¼Œè€Œä¸ä¼šæ‹·è´ç‰©ç†å†…å­˜ã€‚å­è¿›ç¨‹å¤åˆ¶äº†çˆ¶è¿›ç¨‹é¡µè¡¨ï¼Œä¹Ÿèƒ½å…±äº«è®¿é—®çˆ¶è¿›ç¨‹çš„å†…å­˜æ•°æ®äº†ï¼Œæ­¤æ—¶ï¼Œç±»ä¼¼äºæœ‰äº†çˆ¶è¿›ç¨‹çš„æ‰€æœ‰å†…å­˜æ•°æ®ã€‚æˆ‘çš„æè¿°ä¸å¤ªä¸¥è°¨äº†ï¼Œéå¸¸æ„Ÿè°¢æŒ‡å‡ºï¼<br><br>KaitoåŒå­¦è¿˜æåˆ°äº†Huge pageã€‚è¿™ä¸ªç‰¹æ€§å¤§å®¶åœ¨ä½¿ç”¨Redisä¹Ÿè¦æ³¨æ„ã€‚Huge pageå¯¹æå‡TLBå‘½ä¸­ç‡æ¯”è¾ƒå‹å¥½ï¼Œå› ä¸ºåœ¨ç›¸åŒçš„å†…å­˜å®¹é‡ä¸‹ï¼Œä½¿ç”¨huge pageå¯ä»¥å‡å°‘é¡µè¡¨é¡¹ï¼ŒTLBå°±å¯ä»¥ç¼“å­˜æ›´å¤šçš„é¡µè¡¨é¡¹ï¼Œèƒ½å‡å°‘TLB missçš„å¼€é”€ã€‚<br><br>ä½†æ˜¯ï¼Œè¿™ä¸ªæœºåˆ¶å¯¹äºRedisè¿™ç§å–œæ¬¢ç”¨forkçš„ç³»ç»Ÿæ¥è¯´ï¼Œçš„ç¡®ä¸å¤ªå‹å¥½ï¼Œå°¤å…¶æ˜¯åœ¨Redisçš„å†™å…¥è¯·æ±‚æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ã€‚å› ä¸ºforkåï¼Œçˆ¶è¿›ç¨‹ä¿®æ”¹æ•°æ®é‡‡ç”¨å†™æ—¶å¤åˆ¶ï¼Œå¤åˆ¶çš„ç²’åº¦ä¸ºä¸€ä¸ªå†…å­˜é¡µã€‚å¦‚æœåªæ˜¯ä¿®æ”¹ä¸€ä¸ª256Bçš„æ•°æ®ï¼Œçˆ¶è¿›ç¨‹éœ€è¦è¯»åŸæ¥çš„å†…å­˜é¡µï¼Œç„¶åå†æ˜ å°„åˆ°æ–°çš„ç‰©ç†åœ°å€å†™å…¥ã€‚ä¸€è¯»ä¸€å†™ä¼šé€ æˆè¯»å†™æ”¾å¤§ã€‚å¦‚æœå†…å­˜é¡µè¶Šå¤§ï¼ˆä¾‹å¦‚2MBçš„å¤§é¡µï¼‰ï¼Œé‚£ä¹ˆè¯»å†™æ”¾å¤§ä¹Ÿå°±è¶Šä¸¥é‡ï¼Œå¯¹Redisæ€§èƒ½é€ æˆå½±å“ã€‚<br><br>Huge pageåœ¨å®é™…ä½¿ç”¨Redisæ—¶æ˜¯å»ºè®®å…³æ‰çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":241152,"uid":"1609687","ip_address":"","utype":1,"ctime":1597575046,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":152,"race_medal":0,"score":"9.2233770249090007e+18","product_id":100056701,"comment_content":"é—®é¢˜1ï¼ŒRedisé‡‡ç”¨forkå­è¿›ç¨‹é‡å†™AOFæ–‡ä»¶æ—¶ï¼Œæ½œåœ¨çš„é˜»å¡é£é™©åŒ…æ‹¬ï¼šforkå­è¿›ç¨‹ å’Œ AOFé‡å†™è¿‡ç¨‹ä¸­çˆ¶è¿›ç¨‹äº§ç”Ÿå†™å…¥çš„åœºæ™¯ï¼Œä¸‹é¢ä¾æ¬¡ä»‹ç»ã€‚<br><br>\taã€forkå­è¿›ç¨‹ï¼Œforkè¿™ä¸ªç¬é—´ä¸€å®šæ˜¯ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„ï¼ˆæ³¨æ„ï¼Œforkæ—¶å¹¶ä¸ä¼šä¸€æ¬¡æ€§æ‹·è´æ‰€æœ‰å†…å­˜æ•°æ®ç»™å­è¿›ç¨‹ï¼Œè€å¸ˆæ–‡ç« å†™çš„æ˜¯æ‹·è´æ‰€æœ‰å†…å­˜æ•°æ®ç»™å­è¿›ç¨‹ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºæ˜¯æœ‰æ­§ä¹‰çš„ï¼‰ï¼Œforké‡‡ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„å†™å®å¤åˆ¶(Copy On Write)æœºåˆ¶ï¼Œå°±æ˜¯ä¸ºäº†é¿å…ä¸€æ¬¡æ€§æ‹·è´å¤§é‡å†…å­˜æ•°æ®ç»™å­è¿›ç¨‹é€ æˆçš„é•¿æ—¶é—´é˜»å¡é—®é¢˜ï¼Œä½†forkå­è¿›ç¨‹éœ€è¦æ‹·è´è¿›ç¨‹å¿…è¦çš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­æœ‰ä¸€é¡¹å°±æ˜¯æ‹·è´å†…å­˜é¡µè¡¨ï¼ˆè™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„æ˜ å°„ç´¢å¼•è¡¨ï¼‰ï¼Œè¿™ä¸ªæ‹·è´è¿‡ç¨‹ä¼šæ¶ˆè€—å¤§é‡CPUèµ„æºï¼Œæ‹·è´å®Œæˆä¹‹å‰æ•´ä¸ªè¿›ç¨‹æ˜¯ä¼šé˜»å¡çš„ï¼Œé˜»å¡æ—¶é—´å–å†³äºæ•´ä¸ªå®ä¾‹çš„å†…å­˜å¤§å°ï¼Œå®ä¾‹è¶Šå¤§ï¼Œå†…å­˜é¡µè¡¨è¶Šå¤§ï¼Œforké˜»å¡æ—¶é—´è¶Šä¹…ã€‚æ‹·è´å†…å­˜é¡µè¡¨å®Œæˆåï¼Œå­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹æŒ‡å‘ç›¸åŒçš„å†…å­˜åœ°å€ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶è™½ç„¶äº§ç”Ÿäº†å­è¿›ç¨‹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç”³è¯·ä¸çˆ¶è¿›ç¨‹ç›¸åŒçš„å†…å­˜å¤§å°ã€‚é‚£ä»€ä¹ˆæ—¶å€™çˆ¶å­è¿›ç¨‹æ‰ä¼šçœŸæ­£å†…å­˜åˆ†ç¦»å‘¢ï¼Ÿâ€œå†™å®å¤åˆ¶â€é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åœ¨å†™å‘ç”Ÿæ—¶ï¼Œæ‰çœŸæ­£æ‹·è´å†…å­˜çœŸæ­£çš„æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œçˆ¶è¿›ç¨‹ä¹Ÿå¯èƒ½ä¼šäº§ç”Ÿé˜»å¡çš„é£é™©ï¼Œå°±æ˜¯ä¸‹é¢ä»‹ç»çš„åœºæ™¯ã€‚<br><br>\tbã€forkå‡ºçš„å­è¿›ç¨‹æŒ‡å‘ä¸çˆ¶è¿›ç¨‹ç›¸åŒçš„å†…å­˜åœ°å€ç©ºé—´ï¼Œæ­¤æ—¶å­è¿›ç¨‹å°±å¯ä»¥æ‰§è¡ŒAOFé‡å†™ï¼ŒæŠŠå†…å­˜ä¸­çš„æ‰€æœ‰æ•°æ®å†™å…¥åˆ°AOFæ–‡ä»¶ä¸­ã€‚ä½†æ˜¯æ­¤æ—¶çˆ¶è¿›ç¨‹ä¾æ—§æ˜¯ä¼šæœ‰æµé‡å†™å…¥çš„ï¼Œå¦‚æœçˆ¶è¿›ç¨‹æ“ä½œçš„æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„keyï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™çˆ¶è¿›ç¨‹å°±ä¼šçœŸæ­£æ‹·è´è¿™ä¸ªkeyå¯¹åº”çš„å†…å­˜æ•°æ®ï¼Œç”³è¯·æ–°çš„å†…å­˜ç©ºé—´ï¼Œè¿™æ ·é€æ¸åœ°ï¼Œçˆ¶å­è¿›ç¨‹å†…å­˜æ•°æ®å¼€å§‹åˆ†ç¦»ï¼Œçˆ¶å­è¿›ç¨‹é€æ¸æ‹¥æœ‰å„è‡ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€‚å› ä¸ºå†…å­˜åˆ†é…æ˜¯ä»¥é¡µä¸ºå•ä½è¿›è¡Œåˆ†é…çš„ï¼Œé»˜è®¤4kï¼Œå¦‚æœçˆ¶è¿›ç¨‹æ­¤æ—¶æ“ä½œçš„æ˜¯ä¸€ä¸ªbigkeyï¼Œé‡æ–°ç”³è¯·å¤§å—å†…å­˜è€—æ—¶ä¼šå˜é•¿ï¼Œå¯èƒ½ä¼šäº§é˜»å¡é£é™©ã€‚å¦å¤–ï¼Œå¦‚æœæ“ä½œç³»ç»Ÿå¼€å¯äº†å†…å­˜å¤§é¡µæœºåˆ¶(Huge Pageï¼Œé¡µé¢å¤§å°2M)ï¼Œé‚£ä¹ˆçˆ¶è¿›ç¨‹ç”³è¯·å†…å­˜æ—¶é˜»å¡çš„æ¦‚ç‡å°†ä¼šå¤§å¤§æé«˜ï¼Œæ‰€ä»¥åœ¨Redisæœºå™¨ä¸Šéœ€è¦å…³é—­Huge Pageæœºåˆ¶ã€‚Redisæ¯æ¬¡forkç”ŸæˆRDBæˆ–AOFé‡å†™å®Œæˆåï¼Œéƒ½å¯ä»¥åœ¨Redis logä¸­çœ‹åˆ°çˆ¶è¿›ç¨‹é‡æ–°ç”³è¯·äº†å¤šå¤§çš„å†…å­˜ç©ºé—´ã€‚<br><br>é—®é¢˜2ï¼ŒAOFé‡å†™ä¸å¤ç”¨AOFæœ¬èº«çš„æ—¥å¿—ï¼Œä¸€ä¸ªåŸå› æ˜¯çˆ¶å­è¿›ç¨‹å†™åŒä¸€ä¸ªæ–‡ä»¶å¿…ç„¶ä¼šäº§ç”Ÿç«äº‰é—®é¢˜ï¼Œæ§åˆ¶ç«äº‰å°±æ„å‘³ç€ä¼šå½±å“çˆ¶è¿›ç¨‹çš„æ€§èƒ½ã€‚äºŒæ˜¯å¦‚æœAOFé‡å†™è¿‡ç¨‹ä¸­å¤±è´¥äº†ï¼Œé‚£ä¹ˆåŸæœ¬çš„AOFæ–‡ä»¶ç›¸å½“äºè¢«æ±¡æŸ“äº†ï¼Œæ— æ³•åšæ¢å¤ä½¿ç”¨ã€‚æ‰€ä»¥Redis AOFé‡å†™ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œé‡å†™å¤±è´¥çš„è¯ï¼Œç›´æ¥åˆ é™¤è¿™ä¸ªæ–‡ä»¶å°±å¥½äº†ï¼Œä¸ä¼šå¯¹åŸå…ˆçš„AOFæ–‡ä»¶äº§ç”Ÿå½±å“ã€‚ç­‰é‡å†™å®Œæˆä¹‹åï¼Œç›´æ¥æ›¿æ¢æ—§æ–‡ä»¶å³å¯ã€‚","like_count":1162,"discussions":[{"author":{"id":1046714,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","nickname":"çº¦ä¹¦äºš","note":"","ucode":"81EA27ADD9EC1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339057,"discussion_content":"è¿™å“ªæ˜¯è¯¾ä»£è¡¨ï¼Œè¿™æ˜¯åŠ©æ•™å•Š","likes_number":38,"is_delete":false,"is_hidden":false,"ctime":1609486715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2124243,"avatar":"https://static001.geekbang.org/account/avatar/00/20/69/d3/97510c5b.jpg","nickname":"èå“¥ | å‘¨ä¼˜å†›","note":"","ucode":"5DDD9CC85A2E6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1046714,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","nickname":"çº¦ä¹¦äºš","note":"","ucode":"81EA27ADD9EC1A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578435,"discussion_content":"æ¯ä¸ªè¯¾ç¨‹éƒ½èƒ½å‘ç°ä½ çš„èº«å½±ï¼Œä½ ä¹Ÿæ˜¯å¥½å­¦ç”Ÿå‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656743174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339057,"ip_address":""},"score":578435,"extra":""}]},{"author":{"id":1890006,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/d6/d6/5fbb6e00.jpg","nickname":"å†å¿™ä¹Ÿè¦å……å……ç”µ","note":"","ucode":"098F2D9D280D60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373713,"discussion_content":"å¤§ä½¬ä¸ä½†æŠ€æœ¯å¥½ç´ è´¨è¿˜å¾ˆå¥½ï¼Œæˆ‘çœ‹ä¸Šé¢çš„ç¬”è®°ä¸­æœ‰çš„å’Œè‡ªå·±ç†è§£æœ‰åå·®çš„æ—¶å€™å°±å¼€å§‹è¯´è€å¸ˆæ°´å¹³ä¸è¡Œäº†ï¼Œå“ˆå“ˆå“ˆ","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1620832356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2419770,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ec/3a/75bc138d.jpg","nickname":"Saitama","note":"","ucode":"94735DA32C22B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343791,"discussion_content":"å¤§ä½¬æ“ä½œç³»ç»ŸåŠŸåº•çœŸå¼º","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1611161343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2049478,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/45/c6/ba5176a6.jpg","nickname":"ä»ä¸å–èŒ","note":"","ucode":"E9B7B1C8FAFE0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2419770,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ec/3a/75bc138d.jpg","nickname":"Saitama","note":"","ucode":"94735DA32C22B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346893,"discussion_content":"æ˜¯çš„..è¿™ç¯‡æ–‡ç« çœŸå­¦åˆ°å¤ªå¤šä¸œè¥¿","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1612093233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":343791,"ip_address":""},"score":346893,"extra":""}]},{"author":{"id":2308831,"avatar":"https://static001.geekbang.org/account/avatar/00/23/3a/df/ea0fc831.jpg","nickname":"å‘¨å¤©èˆª","note":"","ucode":"B28D84594679A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324746,"discussion_content":"æœ¬æ¥å¯¹æ–‡ç« å†…å®¹è¿˜æœ‰ä¸€äº›ç–‘é—®çš„ï¼ˆå­è¿›ç¨‹ç›´æ¥æ‹·è´ä¸€ä»½å†…å­˜ï¼Œå¦‚æœæ­¤æ—¶rediså†…å­˜ä½¿ç”¨è¶…è¿‡50%é‚£å²‚ä¸æ˜¯æ²¡åŠæ³•æ‹·è´äº†å—ï¼Ÿï¼‰ï¼Œçœ‹äº†æ‚¨çš„è§£é‡Šå°±ææ¸…æ¥šäº†ä¸ºå•¥äº†ã€‚å†…å­˜ä¸­çš„æ•°æ®å®é™…åªæœ‰ä¸€ä»½ï¼Œä¹Ÿåªå ä¸€ä»½å†…å­˜ç„¶åä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´å…±äº«ï¼Œå¦‚æœä¸»è¿›ç¨‹æ”¶åˆ°ä¿®æ”¹å‘½ä»¤ï¼Œå°±è®©ä¸»è¿›ç¨‹é‡æ–°ç”³è¯·å†…å­˜ï¼Œé‡æ–°å†™ã€‚å¯ä»¥è¿™ä¹ˆç†è§£å—ï¼Ÿ","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1605164893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2308831,"avatar":"https://static001.geekbang.org/account/avatar/00/23/3a/df/ea0fc831.jpg","nickname":"å‘¨å¤©èˆª","note":"","ucode":"B28D84594679A6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324772,"discussion_content":"å¯¹ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1605168509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":324746,"ip_address":""},"score":324772,"extra":""},{"author":{"id":1250922,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzGGthScz54sECZJKX3lgyjCATkgrvSt5N3eOsYB34jibCr3SkAX88QaZ5IVmME9Ec7VdkQGwRSPw/132","nickname":"å“ˆå“ˆå“ˆ","note":"","ucode":"8AC20A1C9C7DF8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":589124,"discussion_content":"ä¸ºä»€ä¹ˆæ˜¯çˆ¶è¿›ç¨‹é‡æ–°ç”³è¯·å†…å­˜å†™ï¼Œè€Œä¸æ˜¯å­è¿›ç¨‹å‘¢ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664433860,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":324772,"ip_address":"åŒ—äº¬"},"score":589124,"extra":""},{"author":{"id":1604468,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7b/74/9b88e040.jpg","nickname":"æŸæ²¹","note":"","ucode":"92BFEEEE8BBFA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1250922,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzGGthScz54sECZJKX3lgyjCATkgrvSt5N3eOsYB34jibCr3SkAX88QaZ5IVmME9Ec7VdkQGwRSPw/132","nickname":"å“ˆå“ˆå“ˆ","note":"","ucode":"8AC20A1C9C7DF8","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":590109,"discussion_content":"çˆ¶ã€å­è¿›ç¨‹éƒ½å¯ä»¥ç”³è¯·ï¼Œè°éœ€è¦å†™æ“ä½œï¼Œè°å°±ç”³è¯·æ–°å†…å­˜å¹¶æŒ‡å‘å®ƒï¼ŒåŸå†…å­˜é¡µå¼•ç”¨å‡1","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1665540626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":589124,"ip_address":"å¹¿ä¸œ"},"score":590109,"extra":""}]},{"author":{"id":1186807,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1b/f7/45e8b64a.jpg","nickname":"Fire","note":"","ucode":"4A2C50B77EDB2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340041,"discussion_content":"ç¡¬ç€å¤´çš®çœ‹å®Œäº†è¶£è°ˆlinuxæ“ä½œç³»ç»Ÿå»ºç«‹äº†ä¸€å®šçš„æ¦‚å¿µä½“ç³»åï¼Œå†å›å¤´æ¥çœ‹æ‚¨å’Œè€å¸ˆçš„å›å¤ï¼Œéƒ½é€šäº†ï¼Œè¿™æ„Ÿè§‰çœŸå¥½ï¼Œæ„Ÿè°¢åˆ†äº«ï¼","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1609889422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"é™Œå…®","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1186807,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1b/f7/45e8b64a.jpg","nickname":"Fire","note":"","ucode":"4A2C50B77EDB2C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353159,"discussion_content":"æˆ‘ä¹Ÿå»çœ‹ï¼Œè¿˜æœ‰ä¸€ä¸ªè®¡ç®—æœºç»„æˆåŸç†ï¼Œåº”è¯¥å¯ä»¥åŠ æ·±ç†è§£","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1615038890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340041,"ip_address":""},"score":353159,"extra":""}]},{"author":{"id":1464835,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5a/03/b27f72b6.jpg","nickname":"ç§‹æ¢µ","note":"","ucode":"129DA4E9886D2E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298580,"discussion_content":"è¯¾ä»£è¡¨ï¼Œçœ‹äº†è¿™æ®µè¯ï¼Œæœ‰å…³å†…å®¹æˆ‘çš„ç†è§£æ˜¯è¿™æ ·çš„ä½ çœ‹çœ‹å¯¹ä¸å¯¹ï¼Œç„¶åæƒ³é—®ä¸ªé—®é¢˜ï¼š\nAOFé‡å†™çš„æ—¶å€™ï¼Œå­çº¿ç¨‹ä¼šé¦–å…ˆæ‹·è´å¿…è¦çš„æ•°æ®ç»“æ„åŒ…æ‹¬å†…å­˜é¡µè¡¨ï¼Œå®Œæˆäº†è¿™ä¸ªæ“ä½œå°±å¯ä»¥è¿›è¡Œé‡å†™ï¼Œåªä¸è¿‡çˆ¶å­è¿›ç¨‹è¿™ä¸ªæ—¶å€™æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå†…å­˜ï¼Œåœ¨å­è¿›ç¨‹é‡å†™è¿‡ç¨‹ä¸­è‹¥çˆ¶è¿›ç¨‹æ“ä½œäº†å·²æœ‰çš„keyï¼Œåˆ™ä¼šé‡æ–°ç”³è¯·æ–°çš„å†…å­˜ï¼Œè¿™æ ·çˆ¶å­è¿›ç¨‹å°±é€æ¸çš„æ‹¥æœ‰ç‹¬è‡ªçš„å†…å­˜ç©ºé—´ã€‚\n\nå…¶ä¸­æˆ‘æœ‰äº›ä¸å¤ªæ˜ç™½çš„æ˜¯ï¼Œä¸ºä»€ä¹ˆçˆ¶å­è¿›ç¨‹è¦è¿›è¡Œå†…å­˜åˆ†ç¦»ï¼Ÿå­è¿›ç¨‹åªæœ‰è¯»æ“ä½œå¹¶æ²¡æœ‰å†™æ“ä½œå•Šï¼Œï¼Œä¸è¿›è¡Œå†…å­˜åˆ†ç¦»ä¼šæœ‰ä»€ä¹ˆå½±å“å—ï¼Ÿè€Œä¸”å­è¿›ç¨‹åœ¨é‡å†™å®Œæ¯•ä¹‹åï¼Œæ‹·è´çš„æ—§æ•°æ®å†—ä½™å†…å­˜Redisæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ\n\næ±‚è¯¾ä»£è¡¨å¤§å¤§è§£æƒ‘_(:3)âˆ *)_","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1597331489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":12,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1464835,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5a/03/b27f72b6.jpg","nickname":"ç§‹æ¢µ","note":"","ucode":"129DA4E9886D2E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298593,"discussion_content":"ä½ ç†è§£çš„æ˜¯å¯¹çš„ã€‚\n\nforkæ„å‘³ç€åˆ›å»ºå­è¿›ç¨‹ï¼Œè¿›ç¨‹å°±æ˜¯ä¸ºäº†åšèµ„æºéš”ç¦»çš„ï¼Œä¹Ÿå°±æ„å‘³ç€å„è‡ªéœ€è¦æ‹¥æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œè¿™æ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„æœºåˆ¶ã€‚\n\nRedisæƒ³è¦ç”ŸæˆRDBæˆ–é‡å†™AOFï¼Œå¿…é¡»å…ˆäº§ç”Ÿä¸€ä»½æ•°æ®å¿«ç…§ï¼Œç„¶åæŠŠè¿™ä¸ªå¿«ç…§æ•°æ®å†™åˆ°ç£ç›˜ï¼Œæƒ³è¦åšåˆ°è¿™æ ·ï¼Œæœ€ç»æµçš„åŠæ³•å°±æ˜¯åˆ©ç”¨forkå­è¿›ç¨‹çš„æ–¹å¼ï¼Œæ“ä½œç³»ç»Ÿå¸®å·²ç»å¸®ä½ åšå¥½äº†è¿™äº›å·¥ä½œï¼Œè€Œä¸”å†™æ—¶å¤åˆ¶ä¹Ÿå¯ä»¥é¿å…forké•¿æ—¶é—´é˜»å¡ï¼Œè¿™äº›éƒ½æ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„ä¼˜åŒ–ã€‚\n\nå­è¿›ç¨‹é‡å†™AOFç»“æŸåï¼Œå­è¿›ç¨‹é€€å‡ºï¼Œå†—ä½™å†…å­˜ä¼šè¢«é‡Šæ”¾ï¼Œè¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯è¯´AOFé‡å†™æœŸé—´ï¼Œç³»ç»Ÿå†…å­˜å…ˆå‡å°‘ï¼Œä¹‹ååˆå›æ”¶å›æ¥ã€‚","likes_number":30,"is_delete":false,"is_hidden":false,"ctime":1597335202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298580,"ip_address":""},"score":298593,"extra":""},{"author":{"id":1464835,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5a/03/b27f72b6.jpg","nickname":"ç§‹æ¢µ","note":"","ucode":"129DA4E9886D2E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":298614,"discussion_content":"å•Š æ˜ç™½äº† è°¢è°¢ | á•)â¾â¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597362630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298593,"ip_address":""},"score":298614,"extra":""},{"author":{"id":1193052,"avatar":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","nickname":"å€ªå¤§äºº","note":"","ucode":"4798D69F3E86FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1464835,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5a/03/b27f72b6.jpg","nickname":"ç§‹æ¢µ","note":"","ucode":"129DA4E9886D2E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298670,"discussion_content":"å­è¿›ç¨‹åªæœ‰è¯»æ“ä½œå¹¶æ²¡æœ‰å†™æ“ä½œå•Šï¼Œä¸è¿›è¡Œå†…å­˜åˆ†ç¦»ä¼šæœ‰ä»€ä¹ˆå½±å“å—ï¼Ÿ\n\nä¼šæœ‰é—®é¢˜å‘€ï¼Œè¦æ˜¯å­è¿›ç¨‹å·²ç»è¯»å®Œï¼Œçˆ¶è¿›ç¨‹å†ä¿®æ”¹ï¼Œä¸åˆ†ç¦»å°±ä¼šä¸¢å¤±è¿™ä¸€æ¬¡çš„æ“ä½œæ•°æ®äº†","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1597374672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298580,"ip_address":""},"score":298670,"extra":""}]},{"author":{"id":1186089,"avatar":"https://static001.geekbang.org/account/avatar/00/12/19/29/4a8214b7.jpg","nickname":"Bug Killer","note":"","ucode":"2741A206F504E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301676,"discussion_content":"çœ‹äº†è€å¸ˆçš„è®²è§£ï¼Œå†çœ‹ è¯¾ä»£è¡¨çš„è¡¥å……ï¼Œç®€ç›´ç»äº†ï¼","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1598605693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2185166,"avatar":"https://static001.geekbang.org/account/avatar/00/21/57/ce/ad3c3954.jpg","nickname":"é¹…é¹…é¹…","note":"","ucode":"6AFA3FCC7B5AEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352261,"discussion_content":"çœŸç‰›é€¼ï¼Œè¿™éƒ½æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿæˆ‘å’‹æƒ³ä¸å‡ºæ¥ï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œ","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1614666668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1851970,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/42/42/2a04ada9.jpg","nickname":"æ¯›å°æ ‘","note":"","ucode":"E47DC07CE4959E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2185166,"avatar":"https://static001.geekbang.org/account/avatar/00/21/57/ce/ad3c3954.jpg","nickname":"é¹…é¹…é¹…","note":"","ucode":"6AFA3FCC7B5AEF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575173,"discussion_content":"è¿™å“ªèƒ½æƒ³å‡ºæ¥ï¼Œåªæ˜¯çŸ¥è¯†å‚¨å¤‡å¤šäº†æ‰èƒ½å†™å‡ºæ¥çš„ï¼Œå’±åªä¼šï¼š\nç‰›é€¼ã€‚ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1654647890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352261,"ip_address":""},"score":575173,"extra":""}]},{"author":{"id":2222937,"avatar":"","nickname":"ronaldo","note":"","ucode":"824AE89F4C58BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320697,"discussion_content":"@Kaito  è‹¥åŸæœ‰çš„å†…å­˜æ•°æ®æ˜¯Aï¼Œ  é‚£é‡å†™AOFæ—¶ï¼Œforkåçˆ¶å­è¿›ç¨‹éƒ½ä¼šæŒ‡å‘Aåœ°å€ï¼Œå½“æ–°çš„å†™å…¥è¿›æ¥æ—¶ï¼Œçˆ¶è¿›ç¨‹ä¼šæ‹·è´æ•°æ®ï¼ˆæ–°çš„keyç›´æ¥å†™ï¼Ÿï¼‰ï¼Œè€Œå­è¿›ç¨‹è®¿é—®Aé€æ¸å†™å…¥åˆ°é‡å†™AOFä¸­ï¼Œå†™å®Œé€šçŸ¥çˆ¶è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹ä¼šæŠŠå†™åˆ°ç¼“å†²çš„æ–°keyï¼Œå†è¿½åŠ åˆ°é‡å†™AOFä¸­ï¼Œå†renameã€‚ å¸ŒæŒ‡æ­£","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1604455256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":7,"child_discussions":[{"author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.åŸƒå…‹æ–¯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2222937,"avatar":"","nickname":"ronaldo","note":"","ucode":"824AE89F4C58BB","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":350958,"discussion_content":"æ–°çš„keyç›´æ¥ç”³è¯·å†…å­˜å°±å†™äº†ã€‚å…¶ä½™ç†è§£æ­£ç¡®ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614082458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320697,"ip_address":""},"score":350958,"extra":""},{"author":{"id":1355831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/37/d654fbac.jpg","nickname":"å‡ è¿‘è™šå¹´","note":"","ucode":"28CD6486EED8E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.åŸƒå…‹æ–¯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":360054,"discussion_content":"ä½ å¥½ï¼Œæˆ‘æœ‰ä¸ªç–‘æƒ‘ï¼š\nå†™å…¥æ–°æ•°æ®ï¼Œç”³è¯·å†…å­˜åï¼Œç›´æ¥å°±å†™åˆ°äº†æ–°æ—§ä¸¤ä¸ª AOF æ—¥å¿—æ–‡ä»¶ã€‚\nä¿®æ”¹æ“ä½œï¼Œçˆ¶è¿›ç¨‹ç”³è¯·å†…å­˜ï¼Œå†™å…¥æ—§ AOF ç¼“å†²åŒºã€‚å†™å®Œæ–° AOF æ—¥å¿—ï¼Œå†æŠŠæ—§ AOF ç¼“å†²åŒºçš„è®°å½•è¿½åŠ åˆ°æ–° AOF æ—¥å¿—æ–‡ä»¶ã€‚\né‚£è€å¸ˆè¯´å†™æ–°çš„æ•°æ®ï¼Œä¼šå­˜åœ¨æ–°æ—§ä¸¤ä¸ª AOF æ—¥å¿—çš„ç¼“å†²åŒºå‘¢ï¼Ÿ\nè°¢è°¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616341482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":350958,"ip_address":""},"score":360054,"extra":""},{"author":{"id":2041396,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","nickname":"å®™æ–¯","note":"","ucode":"80DF36BAD298AD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1355831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/37/d654fbac.jpg","nickname":"å‡ è¿‘è™šå¹´","note":"","ucode":"28CD6486EED8E2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388213,"discussion_content":"è¿™é‡Œåªæœ‰AOFç¼“å†²åŒºï¼ŒAOFé‡å†™ç¼“å†²åŒºï¼ˆè¿™æ˜¯ä¸¤ä¸ªä¸åŒç¼“å†²åŒºï¼‰ï¼Œå†™å…¥æ–°æ•°æ®ä¼šå†™å…¥ä¸¤ä¸ªç¼“å†²åŒºã€‚ä¹‹æ‰€ä»¥å†™å…¥AOFç¼“å†²åŒºï¼ˆåç»­å†™å…¥AOFæ–‡ä»¶ï¼‰æ˜¯ä¸ºäº†é˜²æ­¢å®•æœºè€Œå†—ä½™çš„æ•°æ®ï¼Œè€ŒAOFé‡å†™ç¼“å†²åŒºæ˜¯åœ¨é‡å†™æ—¥å¿—æ–‡ä»¶ç”Ÿæˆåï¼Œå†è¿½åŠ åˆ°é‡å†™æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæœ€åå†å°†é‡å†™æ—¥å¿—æ–‡ä»¶å‘½åä¸ºAOFæ—¥å¿—æ–‡ä»¶ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1628656514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":360054,"ip_address":""},"score":388213,"extra":""}]},{"author":{"id":1594292,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epCnHKhYLefpkm02lnr4SpV5T4ibDQ2e4SlibkcaGu8ZxVDlEmVib6j0TiaDTicMmjrEdiaia8Aeen3nR7dg/132","nickname":"Geek_4a677e","note":"","ucode":"ACE5BD07A232D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539221,"discussion_content":"æ—¶åˆ»æé†’æˆ‘è‡ªå·±ï¼Œæˆ‘æ˜¯ä¸ªåºŸç‰© ğŸ˜­","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1639644275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503658,"discussion_content":"éå¸¸èµï¼è¿™ä¸ªå›ç­”ä¸€å®šè¦ç½®é¡¶ï¼\n\nè€Œä¸”KaitoåŒå­¦çš„ä¸å°‘é—®é¢˜å›ç­”éƒ½éå¸¸ä»”ç»†å’Œç²¾å½©ï¼Œéå¸¸å€¼å¾—ä¸€è¯»ï¼\n\nè¿™é‡Œè¦è°¢è°¢KaitoåŒå­¦æŒ‡å‡ºçš„æ–‡ç« ä¸­çš„æ­§ä¹‰ï¼šforkå­è¿›ç¨‹æ—¶ï¼Œå­è¿›ç¨‹æ˜¯ä¼šæ‹·è´çˆ¶è¿›ç¨‹çš„é¡µè¡¨ï¼Œå³è™šå®æ˜ å°„å…³ç³»ï¼Œè€Œä¸ä¼šæ‹·è´ç‰©ç†å†…å­˜ã€‚å­è¿›ç¨‹å¤åˆ¶äº†çˆ¶è¿›ç¨‹é¡µè¡¨ï¼Œä¹Ÿèƒ½å…±äº«è®¿é—®çˆ¶è¿›ç¨‹çš„å†…å­˜æ•°æ®äº†ï¼Œæ­¤æ—¶ï¼Œç±»ä¼¼äºæœ‰äº†çˆ¶è¿›ç¨‹çš„æ‰€æœ‰å†…å­˜æ•°æ®ã€‚æˆ‘çš„æè¿°ä¸å¤ªä¸¥è°¨äº†ï¼Œéå¸¸æ„Ÿè°¢æŒ‡å‡ºï¼\n\nKaitoåŒå­¦è¿˜æåˆ°äº†Huge pageã€‚è¿™ä¸ªç‰¹æ€§å¤§å®¶åœ¨ä½¿ç”¨Redisä¹Ÿè¦æ³¨æ„ã€‚Huge pageå¯¹æå‡TLBå‘½ä¸­ç‡æ¯”è¾ƒå‹å¥½ï¼Œå› ä¸ºåœ¨ç›¸åŒçš„å†…å­˜å®¹é‡ä¸‹ï¼Œä½¿ç”¨huge pageå¯ä»¥å‡å°‘é¡µè¡¨é¡¹ï¼ŒTLBå°±å¯ä»¥ç¼“å­˜æ›´å¤šçš„é¡µè¡¨é¡¹ï¼Œèƒ½å‡å°‘TLB missçš„å¼€é”€ã€‚\n\nä½†æ˜¯ï¼Œè¿™ä¸ªæœºåˆ¶å¯¹äºRedisè¿™ç§å–œæ¬¢ç”¨forkçš„ç³»ç»Ÿæ¥è¯´ï¼Œçš„ç¡®ä¸å¤ªå‹å¥½ï¼Œå°¤å…¶æ˜¯åœ¨Redisçš„å†™å…¥è¯·æ±‚æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ã€‚å› ä¸ºforkåï¼Œçˆ¶è¿›ç¨‹ä¿®æ”¹æ•°æ®é‡‡ç”¨å†™æ—¶å¤åˆ¶ï¼Œå¤åˆ¶çš„ç²’åº¦ä¸ºä¸€ä¸ªå†…å­˜é¡µã€‚å¦‚æœåªæ˜¯ä¿®æ”¹ä¸€ä¸ª256Bçš„æ•°æ®ï¼Œçˆ¶è¿›ç¨‹éœ€è¦è¯»åŸæ¥çš„å†…å­˜é¡µï¼Œç„¶åå†æ˜ å°„åˆ°æ–°çš„ç‰©ç†åœ°å€å†™å…¥ã€‚ä¸€è¯»ä¸€å†™ä¼šé€ æˆè¯»å†™æ”¾å¤§ã€‚å¦‚æœå†…å­˜é¡µè¶Šå¤§ï¼ˆä¾‹å¦‚2MBçš„å¤§é¡µï¼‰ï¼Œé‚£ä¹ˆè¯»å†™æ”¾å¤§ä¹Ÿå°±è¶Šä¸¥é‡ï¼Œå¯¹Redisæ€§èƒ½é€ æˆå½±å“ã€‚\n\nHuge pageåœ¨å®é™…ä½¿ç”¨Redisæ—¶æ˜¯å»ºè®®å…³æ‰çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597575046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":3,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2532285,"avatar":"","nickname":"Geek_926921","note":"","ucode":"51C3B0178D77E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360361,"discussion_content":"å¤§ä½¬ï¼Œä½ æ˜¯ä½œè€…å°å·å§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1616422669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340355,"discussion_content":"kaitoå¤§ä½¬ï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œå­è¿›ç¨‹forkä¹‹é¡µï¼Œå¤åˆ¶äº†é¡µè¡¨å’Œå…¶ä»–å¿…è¦æ•°æ®ã€‚è¿™æ—¶é¡µè¡¨æ˜¯å­˜åœ¨ä¸¤ä»½ä¹ˆï¼Œçˆ¶è¿›ç¨‹ä¸€ä»½ï¼Œå­è¿›ç¨‹ä¸€ä»½ã€‚\nçˆ¶è¿›ç¨‹ cow å†™æ•°æ®ï¼Œæ–°ç”³è¯·çš„å†…å­˜ï¼Œä¹Ÿåªæ˜¯æ›´æ–°é¡µè¡¨ã€‚æ‰€ä»¥å¯¹å­è¿›ç¨‹æ²¡å½±å“ã€‚\nå­è¿›ç¨‹é‡å†™å®Œä¹‹åï¼Œé‡Šæ”¾è‡ªå·±çš„å†…å­˜ï¼Œæ‰€ä»¥å¯¹çˆ¶è¿›å’Œæ²¡å½±å“ã€‚\nä¸å¤ªæ˜ç™½key å’Œè™šæ‹Ÿåœ°å€æ€ä¹ˆæ˜ å°„ï¼Œä»è€Œé€šè¿‡é¡µè¡¨æ‰¾åˆ°ç‰©ç†åœ°å€ã€‚\n\nè°¢è°¢å¤§ä½¬ï¼","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1609985296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340361,"discussion_content":"keyç”³è¯·å†…å­˜ï¼Œå†…å­˜ç”³è¯·æ˜¯å¦‚ä½•æ˜ å°„é€šè¿‡è™šæ‹Ÿå†…å­˜æ˜ å°„åˆ°ç‰©ç†å†…å­˜çš„ï¼Ÿä½ å¯ä»¥çœ‹çœ‹è¿™æ–¹é¢èµ„æ–™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609985799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340355,"ip_address":""},"score":340361,"extra":""}]},{"author":{"id":1179560,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/a8/73cd4a30.jpg","nickname":"åƒä¸‡æµ·","note":"","ucode":"941C431A163B83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329304,"discussion_content":"å¤§ä½¬å¼€è¯¾å§ï¼Œæˆ‘ç¬¬ä¸€ä¸ªä¹°","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1606363351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2212143,"avatar":"https://static001.geekbang.org/account/avatar/00/21/c1/2f/5c8167aa.jpg","nickname":"æ²¹çº¸ä¼","note":"","ucode":"C2655B9F8874E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309839,"discussion_content":"æœ‰ä¸ªç–‘æƒ‘ï¼Œå¦‚æœå†™å…¥å†…å­˜æˆåŠŸäº†ï¼Œåœ¨å†™å…¥aofæ—¥å¿—çš„æ—¶å€™å¤±è´¥äº†ï¼Œå®•æœºæ•°æ®ä¼šä¸ä¼šä¸¢å¤±ï¼Œæœ‰ä»€ä¹ˆå¤„ç†æœºåˆ¶å—ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1601458395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2354474,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/UNC7eWZWvRyAPWUpIJicgZBWLNpkljMbgeaFVWU3QNmWgaibchc8aGFfAG7gWh7eghHSrtSuSqMDp2ibVnvE2eLJg/132","nickname":"Geek_a88948","note":"","ucode":"C7FF3099A180D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2212143,"avatar":"https://static001.geekbang.org/account/avatar/00/21/c1/2f/5c8167aa.jpg","nickname":"æ²¹çº¸ä¼","note":"","ucode":"C2655B9F8874E2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350651,"discussion_content":"redis-check-aof --fix xx.aof","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613966040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":309839,"ip_address":""},"score":350651,"extra":""}]},{"author":{"id":1727355,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/5b/7b/1ee6ec86.jpg","nickname":"Lionheart","note":"","ucode":"CA2E83FE4EAD18","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299113,"discussion_content":"å­è¿›ç¨‹è¿›è¡ŒAOFé‡å†™æœŸé—´ï¼Œä¸»è¿›ç¨‹çš„AOFé‡å†™ç¼“å†²åŒºä¼šæŒä¹…åŒ–å—ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597567156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1727355,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/5b/7b/1ee6ec86.jpg","nickname":"Lionheart","note":"","ucode":"CA2E83FE4EAD18","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299123,"discussion_content":"ä¼šçš„ï¼Œçˆ¶å­è¿›ç¨‹ä¸å½±å“ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597569582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299113,"ip_address":""},"score":299123,"extra":""},{"author":{"id":1335155,"avatar":"https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg","nickname":"æ‹’ç»","note":"","ucode":"CB0264C4D3FE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":314003,"discussion_content":"è¯¾ä»£è¡¨è¯·é—®ä¸€ä¸‹:\nçˆ¶å­è¿›ç¨‹ä¸å½±å“çš„è¯,é‚£æ–°å†™å…¥çš„å‘½ä»¤,éƒ½ä¼šåˆ†åˆ«å†™å…¥çˆ¶å­AOFæ—¥å¿—,ä¼šä¸ä¼šå‡ºç°çˆ¶å­è¿›ç¨‹AOFæ•°æ®ä¸ä¸€è‡´; ä¸ä¸€è‡´çš„è¯æ€ä¹ˆåšåˆ°å­è¿›ç¨‹æ›¿æ¢çˆ¶è¿›ç¨‹çš„AOFæ—¥å¿—?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603111941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299123,"ip_address":""},"score":314003,"extra":""},{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1335155,"avatar":"https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg","nickname":"æ‹’ç»","note":"","ucode":"CB0264C4D3FE17","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338269,"discussion_content":"ä¸ä¼šä¸ä¸€è‡´ , redisæ‰§è¡Œå‘½ä»¤æ˜¯å•çº¿ç¨‹æ„å‘³ç€æœ¬æ¬¡è¯·æ±‚è¯»å–åˆ°çš„æ•°æ®ä¸€å®šæ˜¯æœ€æ–°çš„è¿™ä¸ªè·Ÿæ•°æ®åº“ä¸ä¸€æ · . ä¸€ä»½å†…å­˜æ•°æ®ä¸¤ä»½æ—¥å¿—å°±æ˜¯ä¸ºäº†ä¿è¯ä¸€è‡´æ€§.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609227792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":314003,"ip_address":""},"score":338269,"extra":""}]},{"author":{"id":2120920,"avatar":"","nickname":"Geek_ec6af6","note":"","ucode":"43E270FCB07A17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298404,"discussion_content":"è¯¾ä»£è¡¨åŒå¿—ï¼Œå‰å®³å•¦ æˆ‘çœ‹äº†å¾ˆå¤šéƒ½ä¸æ‡‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597290984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2331842,"avatar":"","nickname":"Geek_4f06ca","note":"","ucode":"69B37349DE3EC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372643,"discussion_content":"æ—¢ç„¶çˆ¶çº¿ç¨‹å’Œå­çº¿ç¨‹å…±äº«å†…å­˜ï¼Œä¸ºä»€ä¹ˆå‘ç”Ÿé‡å†™æ—¶è¿˜éœ€è¦æŠŠæ–°æ•°æ®å†™å…¥é‡å†™ç¼“å†²é‡Œï¼Œè¿™ä¸ªæ–°æ“ä½œä¸æ˜¯ä¼šæ”¾å…¥çˆ¶çº¿ç¨‹çš„å†…å­˜é‡Œå—ï¼Ÿå­çº¿ç¨‹é‡å†™æ—¶ä¼šå…¨éƒ¨å†™å…¥é‡å†™AOFæ–‡ä»¶å§ï¼Œä¸æ‡‚ï¼Œæ±‚æŒ‡å¯¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1620398436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2331842,"avatar":"","nickname":"Geek_4f06ca","note":"","ucode":"69B37349DE3EC5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373195,"discussion_content":"å› ä¸ºéœ€è¦ä½¿ç”¨æ—¥å¿—çš„æ–¹å¼è®°å½•å…ˆåé¡ºåºåšå›æ”¾ è€Œä¸æ˜¯ç›´æ¥å°†å†…å­˜æ•°æ®ç›–æ‰ã€‚æ³¨æ„æ­¤æ—¶çˆ¶å­è¿›ç¨‹ä¸¤ä¸¤äº’è¡¥å¹²æ¶‰ çˆ¶è¿›ç¨‹ä»ç„¶è´Ÿè´£å¤–éƒ¨è¯»å†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620649157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":372643,"ip_address":""},"score":373195,"extra":""},{"author":{"id":2273076,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo1QZQ0eoOqvOyMyAzcsyEK8bQaZTd9aJHTTCYicicUm9gmhUFaxQe6IBc3caLVD8PhqtmhhicrNHe0w/132","nickname":"Severus4","note":"","ucode":"79BC6487B595EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373944,"discussion_content":"aofé‡å†™çš„è¿‡ç¨‹ä¸­ï¼Œæ–°çš„æ“ä½œæ˜¯åœ¨ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹éƒ½å­˜äº†ä¸€ä»½ï¼Œç„¶åé‡å†™ç»“æŸä»¥åç”¨å­çº¿ç¨‹çš„ç¼“å†²æ¥è¿›è¡Œé‡æ”¾å—ï¼Ÿè¿™é‡Œå¯ä¸å¯ä»¥ç›´æ¥ç”¨çˆ¶çº¿ç¨‹çš„ç¼“å†²æ¥é‡æ”¾ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620921435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373195,"ip_address":""},"score":373944,"extra":""},{"author":{"id":2556920,"avatar":"https://static001.geekbang.org/account/avatar/00/27/03/f8/1aa9a263.jpg","nickname":"ğŸ‘€","note":"","ucode":"6DB6C1BA41E787","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2331842,"avatar":"","nickname":"Geek_4f06ca","note":"","ucode":"69B37349DE3EC5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380483,"discussion_content":"åœ¨ä¸»è¿›ç¨‹forkå­è¿›ç¨‹çš„æ—¶å€™ï¼Œé‡‡ç”¨äº†äº†æ“ä½œç³»ç»Ÿçš„å†™æ—¶å¤åˆ¶ï¼ˆcpoy-on-writeï¼‰,æ­¤æ—¶ä¸»è¿›ç¨‹ä¸­çš„æ‰€æœ‰å†…å­˜é¡µéƒ½è¢«æ ‡è¯†ä¸ºread-only,å­è¿›ç¨‹çš„å†…å­˜åœ°å€ä¹Ÿæ˜¯æŒ‡å‘çˆ¶è¿›ç¨‹çš„å†…å­˜ã€‚å¦‚æœæœ‰è¿›ç¨‹å‘ç”Ÿå†™å…¥æ“ä½œçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿæ£€æµ‹åˆ°å†…å­˜é¡µæ˜¯read-onlyçš„ï¼Œå°±ä¼šæŠŠå¯¹åº”çš„å†…å­˜é¡µå¤åˆ¶ä¸€ä»½ï¼Œæ­¤æ—¶ä¸»è¿›ç¨‹ä¸å­è¿›ç¨‹å°±åˆ†åˆ«æŒæœ‰ç‹¬ç«‹çš„ä¸€ä»½ã€‚æ‰€ä»¥åœ¨ä¸»è¿›ç¨‹ä¸­çš„å†™å…¥æ“ä½œå¹¶ä¸ä¼šå½±å“å­è¿›ç¨‹çš„å†…å­˜æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­è¿›ç¨‹çš„å†…å­˜ç©ºé—´ä¸åŒ…å«æ–°å†™å…¥çš„æ•°æ®ã€‚  å¯ä»¥çœ‹ä¸‹å¤§ä½¬çš„åšå®¢ï¼šhttps://juejin.cn/post/6844903702373859335","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1624524207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":372643,"ip_address":""},"score":380483,"extra":""}]},{"author":{"id":1266098,"avatar":"https://static001.geekbang.org/account/avatar/00/13/51/b2/e4281116.jpg","nickname":"æ•²é”®ç›˜çš„çŒ¿","note":"","ucode":"23BEC050CF7CD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339998,"discussion_content":"å¤ªå¼ºäº†åŠ©æ•™åŒå­¦","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609857916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113597,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","nickname":"æ³¨å®šéå‡¡","note":"","ucode":"80673056E131B7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298550,"discussion_content":"çœ‹å®Œï¼Œåªæƒ³å¤§å«:ç‰›çš®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597323708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2818816,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJR8XicKtnzHnOUDd7jkEpMnf7gME0uVNjUTJb0SUga6DuuEMszpHgDKScWoibdBL32O8dRrkxGibJjg/132","nickname":"Geek_43b98b","note":"","ucode":"3D1CB8CF4F259F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591174,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666339523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2725596,"avatar":"https://static001.geekbang.org/account/avatar/00/29/96/dc/8adf8971.jpg","nickname":"å¹¼ç¨šå›­çš„å°æœ‹å‹","note":"","ucode":"EF63C355BD58A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587471,"discussion_content":"å¤§ä½¬ èƒ½éº»çƒ¦é—®ä¸‹ åœ¨å†™æ—¶å¤åˆ¶çš„æ—¶å€™ è¢«å¤åˆ¶çš„é‚£éƒ¨åˆ†é¡µ ä¸å°±åœ¨å†…å­˜ä¸­å­˜åœ¨ä¸¤ä»½äº† åœ¨aofé‡å†™å®Œæˆä¹‹å æ˜¯å¦‚ä½•é‡Šæ”¾çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663077925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ—¥æœ¬"},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3065276,"avatar":"","nickname":"Geek_b3b8da","note":"","ucode":"5461CD95B1D764","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585953,"discussion_content":"å¤§ä½¬å¯¹äºæ“ä½œç³»ç»Ÿç†è§£å¤ªæ·±å…¥äº†ï¼Œå°±å¥½åƒå†…å­˜é‡Œé¢æœ‰ä»–çš„çœ¼ç›ä¸€æ ·ï¼Œæ¸…é™¤çš„çœ‹è§åˆ°åº•å¦‚ä½•å‘ç”Ÿçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661917623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042801,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e9/71/40b04914.jpg","nickname":"Zer0","note":"","ucode":"CC754786CFEB4C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582258,"discussion_content":"åŸºç¡€çŸ¥è¯†ä¹Ÿå¤ªæ‰å®äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659339357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1037669,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d5/65/1c9f1530.jpg","nickname":"NorthWind","note":"","ucode":"459ADF3B0945E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576757,"discussion_content":"å†™å®å¤åˆ¶-&gt; å†™æ—¶å¤åˆ¶å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655778891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2249400,"avatar":"https://static001.geekbang.org/account/avatar/00/22/52/b8/587a0c2d.jpg","nickname":"bwby","note":"","ucode":"9CDFB6FD9FE03F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569833,"discussion_content":"66","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651568655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1665437,"avatar":"https://static001.geekbang.org/account/avatar/00/19/69/9d/3dc6ea44.jpg","nickname":"baci","note":"","ucode":"173AB22308B07C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565054,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650378560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"é™Œå…®","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553317,"discussion_content":"åé¢å¿˜è®°äº†ï¼Œåªéœ€è¦çœ‹æ¯ä¸€ç« çš„è¯¾åé—®é¢˜ï¼Œç„¶åå†æ‰¾ä¸‹kaitoå¤§ç¥çš„è¯„è®ºå°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645847318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645430,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiauonyMORA2s43W7mogGDH4WYjW0gBJtYmUa9icTB6aMPGqibicEKlLoQmLKLWEctwHzthbTZkKR20w/132","nickname":"Spring4J","note":"","ucode":"06F056085A2564","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549445,"discussion_content":"ç»“åˆè¿™ä¹ˆå¤šè¯„è®ºå’Œä¸€äº›åšæ–‡ï¼Œæˆ‘è¯´ä¸€ä¸‹è‡ªå·±å¯¹forkå’Œcowçš„ç†è§£ï¼Œä¹Ÿä¸çŸ¥é“å¯¹ä¸å¯¹ã€‚forkå‡ºå­è¿›ç¨‹åï¼Œçˆ¶å­è¿›ç¨‹å…±äº«å†…å­˜ç©ºé—´ï¼Œå‡è®¾æ­¤æ—¶æœ‰ä¸‰ä¸ªå†…å­˜é¡µabcã€‚åœ¨å­è¿›ç¨‹é‡å†™æœŸé—´ï¼Œå‡è®¾çˆ¶è¿›ç¨‹è¦å¯¹å†…å­˜é¡µbè¿›è¡Œä¿®æ”¹ï¼Œåˆ™ä¼šå…ˆå°†bæ‹·è´ä¸€ä»½ï¼Œæš‚ä¸”å«åšb_copyï¼Œæ‹·è´å®Œåï¼Œçˆ¶è¿›ç¨‹å†å¯¹b_copyè¿›è¡Œä¿®æ”¹ã€‚æ­¤æ—¶ï¼Œçˆ¶å­è¿›ç¨‹çš„å†…å­˜ç©ºé—´å·²ç»å±€éƒ¨éš”ç¦»äº†ï¼Œçˆ¶è¿›ç¨‹æ˜¯aã€b_copyã€cä¸‰ä¸ªå†…å­˜é¡µï¼Œè€Œå­è¿›ç¨‹åˆ™è¿˜æ˜¯abc","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643987057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2263754,"avatar":"https://static001.geekbang.org/account/avatar/00/22/8a/ca/1afcc75b.jpg","nickname":"å¥åº·çš„å°ç‰›çŠŠ","note":"","ucode":"A63C30B602F0A5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549142,"discussion_content":"å¤ªå¼ºäº†å¤ªå¼ºäº†ï¼Œè¿™æ„Ÿè§‰ç›´æ¥åŠ å¼ºäº†è¿™ä¸ªä¸“æ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643618622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1272662,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6b/56/37a4cea7.jpg","nickname":"å•æœ‹è£","note":"","ucode":"8AD121BEDD9675","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540390,"discussion_content":"åœ¨æ•°æ®å†™æˆæ“ä½œçš„æ—¶å€™ï¼ˆç›¸å½“äºä¹‹å‰è®²çš„å°†AOFé‡Œå¤šæ¡ç›¸å…³è¯­å¥åˆå¹¶ï¼‰ï¼Œè€Œæ–°çš„å†™æ“ä½œä¼šå†™å…¥æ–°AOFç¼“å­˜ã€‚åœ¨å¤åˆ¶æ•°æ®çš„æ—¶å€™ï¼Œbgrewriteaofå­è¿›ç¨‹å¤åˆ¶çš„æ˜¯è™šæ‹Ÿé¡µè¡¨ï¼Œã€åœ¨â€œå†™å®å¤åˆ¶â€çš„æ—¶ï¼ˆçˆ¶è¿›ç¨‹ï¼‰ä¼šç”³è¯·ç‰©ç†çš„å†…å­˜ç©ºé—´ã€‘å°†æ•°æ®é‡å†™ä¸ºæ–°çš„AOFè®°å½•ï¼›æ–°å†™å…¥çš„æ•°æ®ï¼Œä¼šåˆ†åˆ«å†™å…¥AOFç¼“å†²å’ŒAOFé‡å†™ç¼“å†²ã€‚ è¿™é‡Œçš„ç–‘é—®æ˜¯ï¼ŒAOFé‡å†™ç¼“å†²å’Œæ–°çš„AOFæ˜¯ä»€ä¹ˆå…³ç³»ï¼ŒReidsæ•°æ®æ‹·è´åº”è¯¥æ˜¯é™æ€æ•°æ®ï¼ˆå°±æ˜¯çˆ¶è¿›ç¨‹æ–°çš„å†™æ“ä½œå‘ç”Ÿä¹‹å‰ï¼Œçˆ¶å­å†…å­˜ç©ºé—´æœªåˆ†ç¦»çš„æ—¶å€™ï¼‰ï¼Œåœ¨AOFæ—¥å¿—é‡å†™å®Œæˆçš„æ—¶å€™ï¼Œè¿½åŠ AOFé‡å†™ç¼“å†²çš„æ–°æ“ä½œæ•°æ®ï¼Œå¦‚æœä¸æ˜¯è¿™æ ·ï¼Œä¼šä¸ä¼šé€ æˆè®°å½•â€œä¹±åºâ€çš„é—®é¢˜ï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640052309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2760501,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/1f/35/569e02f8.jpg","nickname":"å¼ å¤§å±€","note":"","ucode":"9F83EB9606EAEB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534265,"discussion_content":"ç–‘é—®ï¼šâ€œçˆ¶è¿›ç¨‹å°±ä¼šçœŸæ­£æ‹·è´è¿™ä¸ªkeyå¯¹åº”çš„å†…å­˜æ•°æ®ï¼Œç”³è¯·æ–°çš„å†…å­˜ç©ºé—´â€ã€‚è¿™é‡Œçš„ç”³è¯·æ–°çš„å†…å­˜ç©ºé—´æŒ‡çš„æ˜¯æ–‡ä¸­çš„AOFç¼“å†²åŒºå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638152397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1693927,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIg8jibDUq1QVY6Kjabg6kc66QfjibibNCKwbEPCBq6ejQzg5WDhIv9Nyv9icfJ5W98CFMDYaoITibD7kQ/132","nickname":"Geek_018298","note":"","ucode":"02FE1726627515","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534232,"discussion_content":"çœŸå¤§ä½¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638147616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112676,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/64/457325e6.jpg","nickname":"Sam Fu","note":"","ucode":"EA285A4943271F","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533917,"discussion_content":"åŒå­¦ä»¬ï¼Œæˆ‘æƒ³è¯·é—®ä¸€ä¸‹Redisæ˜¯ä»€ä¹ˆæ—¶å€™åˆ¤æ–­AOFé‡å†™æ—¥å¿—å†™å®Œï¼Œå¹¶å»æ›¿æ¢æ—§çš„AOFæ–‡ä»¶çš„ã€‚\n\nè¿˜æœ‰å½“Redisä½¿ç”¨æ–°çš„AOFé‡å†™æ–‡ä»¶æ›¿æ¢æ—§çš„AOFæ–‡ä»¶æ—¶ï¼Œæ­¤æ—¶AOFç¼“å†²åŒºåº”è¯¥æ˜¯ä¸èƒ½å†™æ–°çš„å†…å®¹äº†å§ï¼Ÿæ˜¯éœ€è¦åŠ é”ä¹ˆã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638021794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1107879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e7/a7/9825371e.jpg","nickname":"Penn","note":"","ucode":"2D73D9C2AED26F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533350,"discussion_content":"å¤§ä½¬ï¼Œå’±ä»¬ä»€ä¹ˆæ—¶å€™å¼€è¯¾ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637843562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1272315,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/nSvVtStiaQzslFM7YRnlhPyTgSHGoXvOqlSQS8rMEmfnFCtasNxRiaVfrRcMlkuOSq1iaReQD0CiaGHMVibsVMNkAxQ/132","nickname":"justin","note":"","ucode":"09AE502D6A28D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412149,"discussion_content":"è¿™åªèƒ½åˆ†ææºç æ‰èƒ½æ¸…æ¥šçš„ç»†èŠ‚å•Šï¼Œ åº”è¯¥æ˜¯åˆ†æè¿‡æºç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636087010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2833297,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKIQ5ytSb60gchNca3lOc0yUQts2CLstRfSffhTQYxC9kl6QOHb1EvJM3rfJ0B5ziavkiapQB9Dnadw/132","nickname":"Geek_1a4ed3","note":"","ucode":"A1141788AE8056","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411182,"discussion_content":"é«˜æ‰‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635861973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2550249,"avatar":"","nickname":"Geek_621caf","note":"","ucode":"0312ABFDE154CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390885,"discussion_content":"å¼º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630118588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1992480,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/67/20/93b2e38e.jpg","nickname":"flying myself","note":"","ucode":"69F26BE9B94B58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388638,"discussion_content":"Noï¼Œæ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›ï¼šæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œåªæ˜¯å…ˆæŠŠæ—¥å¿—å†™åˆ° AOF æ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å°†ç¼“å†²åŒºå†…å®¹å†™å›ç£ç›˜ã€‚ æ“ä½œç³»ç»Ÿæ€ä¹ˆæ§åˆ¶çš„å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628862905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2028585,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f4/29/20880430.jpg","nickname":"fire","note":"","ucode":"2B5F571516CD11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1992480,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/67/20/93b2e38e.jpg","nickname":"flying myself","note":"","ucode":"69F26BE9B94B58","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388723,"discussion_content":"æ“ä½œç³»ç»Ÿæœ‰æœºåˆ¶å°†é¡µç¼“å­˜å†™å›åˆ°ç£ç›˜ï¼Œå…·ä½“æ€ä¹ˆå®ç°æˆ‘ä¹Ÿä¸çŸ¥é“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628927207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":388638,"ip_address":""},"score":388723,"extra":""}]},{"author":{"id":2644373,"avatar":"","nickname":"è¿½é£","note":"","ucode":"46A2EC5C07AC4F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388499,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628786758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2306058,"avatar":"https://static001.geekbang.org/account/avatar/00/23/30/0a/2cd6afa1.jpg","nickname":"æµ…æ± å§é¾™","note":"","ucode":"37F55BFD124EB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387689,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628348342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016525,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/82/cd/bb4e5d24.jpg","nickname":"è°­æ™¨","note":"","ucode":"B1355E14B03718","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384463,"discussion_content":"é—®é¢˜2ä¸­çš„â€œAOFé‡å†™ä¸å¤ç”¨AOFæœ¬èº«çš„æ—¥å¿—â€çš„å¦ä¸€ä¸ªåŸå› ï¼Œä¹Ÿæ˜¯å› ä¸ºAOFé‡å†™ä¸æ˜¯æ ¹æ®åŸæœ‰çš„AOFå»åšï¼Œè€Œæ˜¯æ ¹æ®å½“å‰å†…å­˜æ•°æ®åº“çš„æ•°æ®ï¼Œå»ç”Ÿæˆä¸€æ¡æ¡å‘½ä»¤è¿›è¡Œä¿å­˜ã€‚è¿™ä¸ªç†è§£å¯¹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626603231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1203051,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5b/6b/1b2f9b81.jpg","nickname":"Joey(å°ä¸œ)","note":"","ucode":"7C30FC82EECF74","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383925,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626309519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2164123,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oOSgaSW8MFRDx6da1bicY40IVg7hoDNjYlSuTeIg93aB3nuKedhbTa2HQhXpBJmN2w0xU9icvkTDZWMzL5NVicrYw/132","nickname":"ä¼ªé’","note":"","ucode":"7087364945A6B0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382765,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625715592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2653123,"avatar":"https://static001.geekbang.org/account/avatar/00/28/7b/c3/2888c579.jpg","nickname":"Geek_8115f3","note":"","ucode":"6C8E645D08063E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382507,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625621654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373224,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620654684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2344071,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c4/87/174fa848.jpg","nickname":"Lzh","note":"","ucode":"49E1E7028972DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371436,"discussion_content":"ç»™å¤§ä½¬è·ªäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619768537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1259280,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/10/a8aa9acb.jpg","nickname":"jzdayz","note":"","ucode":"E84C0DFC53BE8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368997,"discussion_content":"çˆ¶è¿›ç¨‹å†™å…¥æ–°çš„aofå’Œæ—§çš„aofï¼Œé‚£å­è¿›ç¨‹å¯¹æ–°çš„aofè¿›è¡Œé‡å†™ï¼Œè¿™æ ·ä¸ä¼šäº§ç”Ÿç«äº‰é—®é¢˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618899238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1249788,"avatar":"https://static001.geekbang.org/account/avatar/00/13/11/fc/9242ae5c.jpg","nickname":"å†¯æµ©","note":"","ucode":"D00E0133A6E4CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1259280,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/10/a8aa9acb.jpg","nickname":"jzdayz","note":"","ucode":"E84C0DFC53BE8A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370012,"discussion_content":"çˆ¶è¿›ç¨‹ä¸ä¼šç›´æ¥å»å†™æ–°çš„aofæ–‡ä»¶ï¼Œçˆ¶è¿›ç¨‹æ˜¯æŠŠæ–°çš„å†™å…¥æ”¾åˆ°ç¼“å­˜ä¸­ï¼Œç­‰æ–°aofæ–‡ä»¶é‡å†™å®Œäº†ï¼Œå†æŠŠç¼“å­˜è¿½åŠ åˆ°æ–°çš„aofæ–‡ä»¶ä¸­","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1619250561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":368997,"ip_address":""},"score":370012,"extra":""},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1259280,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/10/a8aa9acb.jpg","nickname":"jzdayz","note":"","ucode":"E84C0DFC53BE8A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386188,"discussion_content":"ä»”ç»†çœ‹è€å¸ˆçš„å›¾ï¼Œåœ¨é‡å†™æœŸé—´ï¼Œå¦‚æœæœ‰æ–°çš„å†™(å­è¿›ç¨‹è¿˜åœ¨å†™ç¬¬ä¸€æ¬¡æ‹·è´å›æ¥çš„æ•°æ®)ï¼Œä¼šåŒæ—¶å†™åˆ°aofç¼“å†²åŒºå’Œaofé‡å†™ç¼“å†²åŒºï¼Œaofé‡å†™å®Œæ‹·è´å®Œçš„æ•°æ®åï¼Œä¼šå»æŠŠaofé‡å†™ç¼“å†²åŒºçš„æ•°æ®å†™åˆ°æ–°çš„aofé‡Œé¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627459081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":368997,"ip_address":""},"score":386188,"extra":""}]},{"author":{"id":1716574,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/31/5e/2aeb4f31.jpg","nickname":"xyuu","note":"","ucode":"CF0C9EF5F7D4E1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368079,"discussion_content":"å¤§ä½¬ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œé‡å†™AOFæ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœæ­£å¥½æ²¡æœ‰è¯·æ±‚è¿›æ¥ï¼Œé‚£å°±æ˜¯ç”¨åŸæ¥çš„å†…å­˜æ•°æ®è¿›è¡Œé‡å†™ï¼ŒåŒæ—¶å¦‚æœä¸»çº¿ç¨‹æ•°æ®ä¿®æ”¹åœ¨å­çº¿ç¨‹å·²ç»é‡å†™å®Œè¿™ä¸ªé¡µçš„æ•°æ®ä¹‹åé‚£ä¹Ÿä¸ä¼šå¤åˆ¶å†…å­˜ï¼Œå¦‚æœå†…å­˜ä¸è¶³ï¼Œé‚£é‡å†™AOFæ˜¯ä¸æ˜¯å°±ä¼šå¤±è´¥ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618560046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1182383,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0a/af/6f244997.jpg","nickname":"lee","note":"","ucode":"CD672BDB1B58F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1716574,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/31/5e/2aeb4f31.jpg","nickname":"xyuu","note":"","ucode":"CF0C9EF5F7D4E1","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":377560,"discussion_content":"ä¸ªäººç†è§£ä¸º, å³ä½¿å­çº¿ç¨‹å·²ç»é‡å†™å®Œæˆè¿™ä¸ªé¡µçš„æ•°æ®, ä½†æ˜¯ä¸»çº¿ç¨‹è¦ä¿®æ”¹è¿™ä¸ªé¡µçš„æ•°æ®çš„æ—¶å€™, è¿˜æ˜¯ä¼šå¤åˆ¶ä¸€ä»½å»åšæ–°çš„å†™æ“ä½œ, æ‰€ä»¥ä¸ä¼šå› ä¸ºå†…å­˜ä¸è¶³å°±AOFå¤±è´¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622710030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":368079,"ip_address":""},"score":377560,"extra":""},{"author":{"id":1645430,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiauonyMORA2s43W7mogGDH4WYjW0gBJtYmUa9icTB6aMPGqibicEKlLoQmLKLWEctwHzthbTZkKR20w/132","nickname":"Spring4J","note":"","ucode":"06F056085A2564","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1716574,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/31/5e/2aeb4f31.jpg","nickname":"xyuu","note":"","ucode":"CF0C9EF5F7D4E1","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":549447,"discussion_content":"çˆ¶è¿›ç¨‹ä¿®æ”¹å­è¿›ç¨‹å·²ç»é‡å†™è¿‡çš„å†…å­˜é¡µï¼Œçˆ¶è¿›ç¨‹è¿˜æ˜¯ä¼šæ‹·è´è¿™ä¸ªå†…å­˜é¡µå†è¿›è¡Œä¿®æ”¹ï¼Œè¿™ä¸ªæ˜¯æ“ä½œç³»ç»Ÿçš„cowæœºåˆ¶ï¼Œredisä¹Ÿæ§åˆ¶ä¸äº†ã€‚ä¸è¿‡é‡å†™ç¼“å­˜ä¹Ÿä¼šè®°å½•è¿™æ¬¡ä¿®æ”¹ï¼Œåº”è¯¥æ˜¯æ²¡é—®é¢˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643987637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":368079,"ip_address":""},"score":549447,"extra":""}]},{"author":{"id":2324871,"avatar":"https://static001.geekbang.org/account/avatar/00/23/79/87/255c9d42.jpg","nickname":"DropTower","note":"","ucode":"AE3215CB91C763","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366142,"discussion_content":"çœŸå¤§ä½¬ï¼Œèµèµèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617969727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1355831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/37/d654fbac.jpg","nickname":"å‡ è¿‘è™šå¹´","note":"","ucode":"28CD6486EED8E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360237,"discussion_content":"ä½ å¥½ï¼Œçœ‹äº†è€å¸ˆçš„ç¬¬äº”è®²ï¼Œæœ‰ä¸ªç–‘é—®ï¼š\nä¿®æ”¹æ“ä½œæ—¶ï¼Œçˆ¶è¿›ç¨‹åˆ†é…äº†å†…å­˜ç©ºé—´ï¼Œæ­¤æ—¶æ‹·è´æ•°æ®åˆ°å†…å­˜ç©ºé—´ã€‚é‚£æ‹·è´åˆ°æ–°å†…å­˜ç©ºé—´çš„æ•°æ®æ˜¯æ—§æ•°æ®è¿˜æ˜¯ä¿®æ”¹åçš„æ–°æ•°æ®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616397578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1355831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/37/d654fbac.jpg","nickname":"å‡ è¿‘è™šå¹´","note":"","ucode":"28CD6486EED8E2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360284,"discussion_content":"æ‹·è´åŸæ¥çš„æ•°æ®åˆ°æ–°çš„å†…å­˜ç©ºé—´ï¼Œå†ä¿®æ”¹å®ƒã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1616409769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":360237,"ip_address":""},"score":360284,"extra":""},{"author":{"id":1355831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/37/d654fbac.jpg","nickname":"å‡ è¿‘è™šå¹´","note":"","ucode":"28CD6486EED8E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":360637,"discussion_content":"å¥½çš„ï¼Œæ˜¨å¤©ä¹Ÿåœ¨ç¾¤é‡Œå·²ç»é—®æ¸…æ¥šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616495784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":360284,"ip_address":""},"score":360637,"extra":""},{"author":{"id":1275424,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/aiaO77mTsCalcia49ElevPn988pgwcL3rD5ic1DTD6E8rbAwfmguiaPsibHicsYGQID7VbmD21GUAV9bbuNMfDhDGGyg/132","nickname":"ç©¿é’ˆåœŸè±†ä¸","note":"","ucode":"5DA3BDDE5162E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":365602,"discussion_content":"æ–°å¢å’Œä¿®æ”¹åˆ†é…å†…å­˜èƒ½ç†è§£ï¼Œé‚£åˆ é™¤æ•°æ®æ—¶ï¼Œæ˜¯ä¸æ˜¯å°±ä¸ç”¨åˆ†é…å†…å­˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617848822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":360284,"ip_address":""},"score":365602,"extra":""}]},{"author":{"id":1015986,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/b2/2e9f442d.jpg","nickname":"æ–‡æ­¦æœ¨å­","note":"","ucode":"348752BDECD65F","race_medal":5,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358244,"discussion_content":"ç‰›å•Šï¼Œç‰›å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615951770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2416395,"avatar":"https://static001.geekbang.org/account/avatar/00/24/df/0b/7f14e6fd.jpg","nickname":"rtl.","note":"","ucode":"7E4E58548BA853","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356916,"discussion_content":"æ’çœ¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615707085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.åŸƒå…‹æ–¯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350988,"discussion_content":"â€œä½¿ç”¨huge pageå¯ä»¥å‡å°‘é¡µè¡¨é¡¹ï¼ŒTLBå°±å¯ä»¥ç¼“å­˜æ›´å¤šçš„é¡µè¡¨é¡¹â€ï¼Œè¯·é—®ä¸ºä»€ä¹ˆhuge pageå‡å°‘é¡µè¡¨é¡¹ï¼ŒTLBå°±å¯ä»¥ç¼“å­˜æ›´å¤šçš„é¡µè¡¨é¡¹ï¼Œæ®æˆ‘ç†è§£ï¼ŒTLBä¸­çš„èƒ½å¤Ÿå­˜å‚¨çš„é¡µè¡¨é¡¹æ•°é‡æ˜¯å›ºå®šçš„å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614091545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1803932,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/86/9c/f1c43834.jpg","nickname":"Walk beside you","note":"","ucode":"C3FDED0004C763","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.åŸƒå…‹æ–¯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":353700,"discussion_content":"TLBå…¨éƒ¨å­˜å‚¨çš„æ˜¯åœ°å€è°¢è°¢ï¼ŒTLBä¸­ä¸ªæ•°å¤§å°æ˜¯ç”±é¡µçš„æ•°ç›®å†³å®šçš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615192668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":350988,"ip_address":""},"score":353700,"extra":""}]},{"author":{"id":2032032,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/01/a0/07ca2bd2.jpg","nickname":"ä¸€è·¯é¡ºé£","note":"","ucode":"D46B7F92D65189","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350141,"discussion_content":"æƒ³è¯·é—®ä¸‹å¤§ä½¬ï¼Œaofé‡å†™ç¼“å†²åŒºæ˜¯ä¸€å—å†…å­˜ç¼“å†²å—?é‡å†™ç¼“å†²åŒºæ˜¯åœ¨çˆ¶è¿›ç¨‹ä¸­å†™çš„å§ï¼Œå¦‚æœé‡å†™aofæ…¢çš„è¯ä¼šå†…å­˜æº¢å‡ºå—ï¼Ÿå­è¿›ç¨‹é‡å†™å®Œæˆä¹‹åé€šçŸ¥çˆ¶è¿›ç¨‹å°†aofç¼“å†²åŒºå†…å®¹æ·»åŠ åˆ°æ–°å†™çš„aofæ–‡ä»¶å—ï¼Ÿè¿™ä¸ªæ·»åŠ è¿‡ç¨‹æ˜¯ä¼šé˜»å¡çˆ¶è¿›ç¨‹æ˜¯å—ï¼Ÿé‡å†™çš„aofæ–‡ä»¶åœ¨çˆ¶è¿›ç¨‹ä¸­ä¼šåœ¨forkä¹‹å‰æ‰“å¼€å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613724795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022411,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/cb/8964faab.jpg","nickname":"-åªæ˜¯å°å°é…è§’_","note":"","ucode":"EFC1CD54A23F39","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348220,"discussion_content":"è¯·é—®å¤§ä½¬ï¼Œå¦‚æœRediså†…å­˜å ç”¨æ¯”è¾ƒå¤§ï¼ŒAOFé‡å†™æ—¶ï¼Œå†…å­˜ä¿®æ”¹åˆæ¯”è¾ƒé¢‘ç¹ï¼Œæœ‰æ²¡æœ‰å¿…è¦ä¿®æ”¹ Linux ç³»ç»Ÿå‚æ•° vm.overcommit_memory ä¸º 1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612486548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148422,"avatar":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","nickname":"ç¾ç¾","note":"","ucode":"44CC95C45AF345","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343599,"discussion_content":"ä¸ºä»€ä¹ˆaofåˆ·ç›˜ä¸ç›´æ¥é‡‡ç”¨å¼‚æ­¥å‘¢ï¼Ÿè¿™æ ·åªè¦ç½‘ç»œé€Ÿç‡å°äºç£ç›˜å†™å…¥é€Ÿç‡ï¼Œå°±å¯ä»¥ä¿è¯æ•°æ®ä¸ä¸¢äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611108265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7b/b3/194f7f90.jpg","nickname":"æ²¡ä¼çš„å­©å­å¾—ä½¿åŠ²å¥”è·‘","note":"","ucode":"D015B4EF12E536","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338011,"discussion_content":"å¤šå¼ºçš„åŸºç¡€ï¼Œæ‰èƒ½åˆ†é’ˆè¿™ä¹ˆç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609153258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2194764,"avatar":"","nickname":"KèŒæ— æƒ¨","note":"","ucode":"97A532D588FD49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336525,"discussion_content":"æŒ‰æˆ‘çš„ç†è§£æ˜¯ç”±äºAOFé‡å†™ç¼“å†²åŒºä¸AOFç¼“å†²åŒºçš„flushæ—¶æœºä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608616310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134774,"avatar":"https://static001.geekbang.org/account/avatar/00/11/50/b6/a60efa42.jpg","nickname":"å­Ÿå‡¡æµ©","note":"","ucode":"77522A196C31D5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327956,"discussion_content":"mk","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606026262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":7,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1247310,"avatar":"https://static001.geekbang.org/account/avatar/00/13/08/4e/79c3d903.jpg","nickname":"ç»“å†°çš„æµ·","note":"","ucode":"B6ED66252803ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326858,"discussion_content":"å¤§ä½¬ï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œå½“å­è¿›ç¨‹é‡å†™AOFè¿›è¡Œåˆ°ä¸€åŠæ—¶ï¼Œä¸»è¿›ç¨‹ä¿®æ”¹äº†å·²ç»é‡å†™è¿‡çš„æ•°æ®ï¼Œä¼šè§¦å‘å†™æ—¶å¤åˆ¶ï¼Œæ‹·è´ä¸€ä»½æ•°æ®å¹¶ç”³è¯·å†…å­˜ç»™å­è¿›ç¨‹ï¼Œä½†å­è¿›ç¨‹å·²ç»é‡å†™è¿‡è¿™æ¡æ•°æ®äº†ï¼Œè™½ç„¶è¿™æ¡æ•°æ®çš„æ“ä½œå¯ä»¥é€šè¿‡AOFé‡å†™ç¼“å†²åŒºåç»­åˆ·å…¥æ–°çš„AOFæ—¥å¿—ï¼Œé‚£ä¹ˆè¿™ä¸ªå†™æ—¶å¤åˆ¶æ˜¯ä¸æ˜¯å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Ÿï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605689841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1107305,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e5/69/719ec5d0.jpg","nickname":"Jian","note":"","ucode":"17ED4919F22DEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1247310,"avatar":"https://static001.geekbang.org/account/avatar/00/13/08/4e/79c3d903.jpg","nickname":"ç»“å†°çš„æµ·","note":"","ucode":"B6ED66252803ED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333157,"discussion_content":"æˆ‘ç†è§£å·²ç»å†™è¿‡äº†çš„å°±ä¸ä¼šå†å†™æ—¶å¤åˆ¶äº†ï¼Œè¿™ä¸ªæ—¶å€™åªä¼šæ·»åŠ åˆ°AOFé‡å†™ç¼“å†²åŒºä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607445758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326858,"ip_address":""},"score":333157,"extra":""},{"author":{"id":2354474,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/UNC7eWZWvRyAPWUpIJicgZBWLNpkljMbgeaFVWU3QNmWgaibchc8aGFfAG7gWh7eghHSrtSuSqMDp2ibVnvE2eLJg/132","nickname":"Geek_a88948","note":"","ucode":"C7FF3099A180D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1247310,"avatar":"https://static001.geekbang.org/account/avatar/00/13/08/4e/79c3d903.jpg","nickname":"ç»“å†°çš„æµ·","note":"","ucode":"B6ED66252803ED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350540,"discussion_content":"æˆ‘çš„ç†è§£ï¼Œå†™æ—¶å¤åˆ¶æ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„å®ç°ï¼Œç”±ç³»ç»Ÿå®ç°ã€‚åœ¨redisæºç ä¸­æ˜¯çœ‹ä¸åˆ°ç›´æ¥æ“ä½œé¡µè¡¨ã€æ˜ å°„çš„ï¼ˆå¯ä»¥ç†è§£ä¸ºæ›´åº•å±‚çš„å®ç°ï¼‰ï¼Œæœ€å¤šçœ‹åˆ°forkã€‚è€ŒAOFé‡å†™ç¼“å†²åŒºçš„åˆ·å…¥æ˜¯redisé‡å†™æœºåˆ¶çš„ä»£ç ï¼Œè¿™éƒ¨åˆ†æ˜¯åº”è¯¥åœ¨æºç ä¸­åŒ…å«çš„ã€‚\nå¤§ä½¬æå‡ºforkå†™æ—¶å¤åˆ¶çš„åŸç†çš„å‡ºå‘ç‚¹ï¼Œæ˜¯å› ä¸ºåœ¨ç”³è¯·å†…å­˜æ—¶æœ‰å¯èƒ½ä¼šäº§ç”Ÿ é˜»å¡ ã€‚è¿™ä¸ªé˜»å¡å’Œé‡å†™ç¼“å†²åŒºåˆ·å…¥åˆ°aofæ—¥å¿—ï¼Œæ˜¯æ²¡æœ‰å…³ç³»çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613909659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326858,"ip_address":""},"score":350540,"extra":""},{"author":{"id":2354474,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/UNC7eWZWvRyAPWUpIJicgZBWLNpkljMbgeaFVWU3QNmWgaibchc8aGFfAG7gWh7eghHSrtSuSqMDp2ibVnvE2eLJg/132","nickname":"Geek_a88948","note":"","ucode":"C7FF3099A180D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1247310,"avatar":"https://static001.geekbang.org/account/avatar/00/13/08/4e/79c3d903.jpg","nickname":"ç»“å†°çš„æµ·","note":"","ucode":"B6ED66252803ED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350542,"discussion_content":"å†™æ—¶å¤åˆ¶è‚¯å®šæœ‰æ„ä¹‰å•Šï¼Œé¦–å…ˆå®ƒæ˜¯oså®ç°çš„ï¼Œåªè¦forkå°±ä¼šè§¦å‘ï¼Œä»£ç æ˜¯æ§åˆ¶ä¸äº†çš„ï¼Œé™¤éä¸forkã€‚\nå®ƒçš„æ„ä¹‰åœ¨äºæ ‡è®°äº†ä¸»è¿›ç¨‹çš„ä¿®æ”¹å†…å®¹ã€‚å¦‚æœé‡å†™æœªå®Œæˆï¼Œè¿˜æ˜¯å¯ä»¥é€šè¿‡åŸå…ˆçš„aofæ—¥å¿—æ¢å¤æ•°æ®çš„ã€‚\næœ‰ä¸ªåœ°æ–¹è¡¨è¿°ä¸å‡†ç¡®ï¼Œå†™æ—¶å¤åˆ¶æ˜¯è°å†™è°å¤åˆ¶ï¼Œç”³è¯·å†…å­˜æ˜¯çˆ¶è¿›ç¨‹ç”³è¯·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613910084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326858,"ip_address":""},"score":350542,"extra":""}]},{"author":{"id":1682027,"avatar":"https://static001.geekbang.org/account/avatar/00/19/aa/6b/ab9a072a.jpg","nickname":"å¯¹ä¸é”™","note":"","ucode":"EF55733E3BD78B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326613,"discussion_content":"è¯·é—®ï¼Œbgwriteaofå­è¿›ç¨‹åªæ˜¯ç”¨æ¥æŠŠé”®å€¼æ•°æ®åº“ä¸­çš„æ•°æ®é‡å†™ä¸ºæ“ä½œæŒ‡ä»¤ï¼Œç„¶åæ”¾åˆ°AOFé‡å†™æ—¥å¿—ä¸­å—ï¼Œè¿™ä¸ªå­è¿›ç¨‹åº”è¯¥ä¸ä¼šå¾€AOFé‡å†™ç¼“å†²åŒºé‡Œé¢åŠ æ•°æ®å§ï¼Œç­‰åˆ°é‡å†™å®Œæˆä¹‹åï¼Œå†æŠŠé‡å†™æ—¥å¿—ä¸é‡å†™ç¼“å†²åŒºå†…çš„æ•°æ®åˆå¹¶ä½œä¸ºæ–°çš„AOFæ—¥å¿—ï¼Œæˆ‘è¿™æ ·ç†è§£æ˜¯å¯¹çš„å—ï¼Ÿè¿˜æœ‰å­è¿›ç¨‹åœ¨é‡å†™æœŸé—´ä¸ä¼šå› ä¸ºçˆ¶è¿›ç¨‹æœ‰æ–°çš„å†™å…¥æ“ä½œï¼Œè€Œæ‹·è´å‡ºæ–°çš„å†…å­˜ç©ºé—´ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605626917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306695,"discussion_content":"å¤§ä½¬  é—®ä¸ªé—®é¢˜ï¼Œåœ¨çœ‹åˆ° â€œå°±æ˜¯æŒ‡æ–°çš„ AOF é‡å†™æ—¥å¿—ã€‚è¿™ä¸ªæ“ä½œä¹Ÿä¼šè¢«å†™åˆ°  é‡å†™æ—¥å¿—çš„ç¼“å†²åŒºâ€ï¼Œè¿™å—ï¼Œè¿™ä¸ªç¼“å†²åŒºçš„å¤§å°æœ‰é™åˆ¶å—ï¼Ÿå¦‚æœæ²¡æœ‰é™åˆ¶ï¼Œè¿™å—æ˜¯ä¸æ˜¯ä¸å®‰å…¨ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600350521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1436839,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ec/a7/7d44c655.jpg","nickname":"snailshen","note":"","ucode":"C4875C476649B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306497,"discussion_content":"è¿˜æœ‰ä¸€ç‚¹å¯èƒ½å¯¼è‡´é˜»å¡ï¼Œå°±æ˜¯åœ¨rewriteå®Œæˆæ—¶ï¼Œä¸»è¿›ç¨‹åŒæ­¥é‡å†™ç¼“å†²åŒºæ•°æ®åˆ°aofæ–‡ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600304326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1905996,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epeiaBa4BwckMyrWKLmIjx60xZWa9VIj4aXVsc3781TqG5psItqx0pDFovMyCjficwu8IcpqY30S4Kw/132","nickname":"zgsdr0620","note":"","ucode":"51B701AAEAFE77","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306090,"discussion_content":"æ‚¨å¥½ï¼Œçœ‹äº†æ‚¨çš„å›ç­”æ”¶è·å¾ˆå¤šï¼Œä½†æ˜¯å¯¹1.bæœ‰ä¸€ä¸ªç–‘é—®ï¼š\nåœ¨COWçš„æ—¶å€™ï¼Œä¸æ˜¯å­è¿›ç¨‹çœŸæ­£çš„æ‹·è´æ•°æ®å—ï¼Œçˆ¶è¿›ç¨‹åº”è¯¥ä¸ä¼šå—åˆ°å½±å“å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600166968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1905996,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epeiaBa4BwckMyrWKLmIjx60xZWa9VIj4aXVsc3781TqG5psItqx0pDFovMyCjficwu8IcpqY30S4Kw/132","nickname":"zgsdr0620","note":"","ucode":"51B701AAEAFE77","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306093,"discussion_content":"è°ä¿®æ”¹æ•°æ®è°æ‹·è´ï¼Œæ‰€ä»¥æ‰å«â€œå†™æ—¶å¤åˆ¶â€ã€‚","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1600167711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":306090,"ip_address":""},"score":306093,"extra":""}]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305816,"discussion_content":"è†œæ‹œå¤§ä½¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600090787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1588637,"avatar":"https://static001.geekbang.org/account/avatar/00/18/3d/9d/877deaff.jpg","nickname":"zlyj","note":"","ucode":"5F9F2BD2475E11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302318,"discussion_content":"è¯·é—®å¤§ä½¬ï¼Œä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸€ä¸ªé‡å†™ç¼“å†²åŒºï¼ŒåŸæ¥çš„ç¼“å†²åŒºå’Œé‡å†™ç¼“å†²åŒºæ•°æ®ä¸æ˜¯ä¸€è‡´çš„å—ï¼Œç›´æ¥å°†åŸç¼“å†²åŒºçš„æ•°æ®å’Œå¹¶å…¥æ–°çš„aofæ–‡ä»¶ä¸è¡Œå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598877879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1682027,"avatar":"https://static001.geekbang.org/account/avatar/00/19/aa/6b/ab9a072a.jpg","nickname":"å¯¹ä¸é”™","note":"","ucode":"EF55733E3BD78B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1588637,"avatar":"https://static001.geekbang.org/account/avatar/00/18/3d/9d/877deaff.jpg","nickname":"zlyj","note":"","ucode":"5F9F2BD2475E11","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325869,"discussion_content":"æˆ‘è§‰å¾—æ›´å¤šçš„å¯èƒ½æ˜¯é¿å…æ±¡æŸ“æ•°æ®å’Œé”ç«äº‰æŠŠ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605448745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302318,"ip_address":""},"score":325869,"extra":""},{"author":{"id":2370506,"avatar":"","nickname":"Geek_774ef4","note":"","ucode":"9838717F36D085","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1588637,"avatar":"https://static001.geekbang.org/account/avatar/00/18/3d/9d/877deaff.jpg","nickname":"zlyj","note":"","ucode":"5F9F2BD2475E11","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334952,"discussion_content":"æ•°æ®å¯èƒ½å·²ç»ä¸ä¸€æ ·äº†ï¼ŒåŸæ¥çš„ç¼“å†²åŒºåœ¨1ç§’ä¹‹åå†™å…¥åˆ°aofæ–‡ä»¶ï¼Œæ¸…ç©ºäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608034534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302318,"ip_address":""},"score":334952,"extra":""},{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1588637,"avatar":"https://static001.geekbang.org/account/avatar/00/18/3d/9d/877deaff.jpg","nickname":"zlyj","note":"","ucode":"5F9F2BD2475E11","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338266,"discussion_content":"ç¼“å†²åŒºçš„æ•°æ®åœ¨å†…å­˜ä¸­ , åˆ·ç›˜ä¸€æ¬¡å°±æ²¡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609227580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302318,"ip_address":""},"score":338266,"extra":""}]},{"author":{"id":1059944,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2c/68/c299bc71.jpg","nickname":"å¤©æ•Œ","note":"","ucode":"CD29A622197197","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301629,"discussion_content":"çœ‹å®Œï¼mark!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598591040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1207009,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6a/e1/e2cbb49b.jpg","nickname":"coding","note":"","ucode":"A4F2E63C601993","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300272,"discussion_content":"å¤§ä½¬èƒ½åŠ ä¸ªå¾®ä¿¡å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598007764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1207009,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6a/e1/e2cbb49b.jpg","nickname":"coding","note":"","ucode":"A4F2E63C601993","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300277,"discussion_content":"ä¸ªäººä¸»é¡µæœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598009500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300272,"ip_address":""},"score":300277,"extra":""}]},{"author":{"id":1231549,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","nickname":"åƒé¥­é¥­","note":"","ucode":"95CFA07CDA2957","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300246,"discussion_content":"æˆ‘ç”³è¯·åŠ å¤§ä½¬å¾®ä¿¡ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597998480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":8,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1231549,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","nickname":"åƒé¥­é¥­","note":"","ucode":"95CFA07CDA2957","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300278,"discussion_content":"ä¸ªäººä¸»é¡µæœ‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598009513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300246,"ip_address":""},"score":300278,"extra":""}]},{"author":{"id":1446171,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/1b/5f38f9c1.jpg","nickname":"èŠ±è½å¿†æµå¹´","note":"","ucode":"363E0547EA80E5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299926,"discussion_content":"ä½ å¥½ï¼Œæˆ‘å¯¹ç¬¬äºŒä¸ªå›ç­”æœ‰ç‚¹ç–‘é—®ï¼Œå¦‚æœå…±ç”¨ä¸€ä¸ªæ—¥å¿—é‚£åªè¦ä¸»çº¿ç¨‹å†™å°±å¤Ÿäº†ï¼Œä¸å­˜åœ¨ç«äº‰å§ï¼›è€Œä¸”æ‰€è°“é‡å†™å°±æ˜¯è¦ä½¿ç”¨ä¸€ä¸ªæ–°çš„é‡å†™æ—¥å¿—å…ˆè®°å½•å½“å‰å†…å®¹åŒæ—¶è®°å½•åç»­æ“ä½œï¼Œå¥½åƒä¹Ÿæ— æ³•åœ¨ä¸€ä¸ªæ—¥å¿—é‡Œå»å®Œæˆå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597878214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":9,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1446171,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/1b/5f38f9c1.jpg","nickname":"èŠ±è½å¿†æµå¹´","note":"","ucode":"363E0547EA80E5","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":299947,"discussion_content":"é‡å†™æ˜¯åœ¨å­è¿›ç¨‹åšçš„ï¼Œæ²¡åŠæ³•åœ¨ä¸»è¿›ç¨‹åšã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597886767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299926,"ip_address":""},"score":299947,"extra":""},{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1446171,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/1b/5f38f9c1.jpg","nickname":"èŠ±è½å¿†æµå¹´","note":"","ucode":"363E0547EA80E5","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":338267,"discussion_content":"ä¸ºäº†ä¸é˜»å¡, aofé‡å†™çš„å®ç°åŸç†æ˜¯ç›´æ¥å»éå†redisæ•°æ®åº“å…¨é‡æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609227638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299926,"ip_address":""},"score":338267,"extra":""}]},{"author":{"id":1218205,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/dlIBXlicZrol7KX8l8QQu7nUpYhpBP5YIIdXe8RliatHdPU4licxiboqjMjJbJSaUpmib1iaIarMlgrtxpRjgOd2WYLw/132","nickname":"å°é»‘","note":"","ucode":"DCED6B71BE7687","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299446,"discussion_content":"aofé‡å†™çš„æ—¶å€™ä¼šé¢å¤–å ç”¨å†…å­˜å—ï¼Œå¦‚æœé‡å†™æœŸé—´å®¢æˆ·ç«¯æ²¡æœ‰ä»»ä½•å†™æ“ä½œçš„è¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597683287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":9,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1218205,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/dlIBXlicZrol7KX8l8QQu7nUpYhpBP5YIIdXe8RliatHdPU4licxiboqjMjJbJSaUpmib1iaIarMlgrtxpRjgOd2WYLw/132","nickname":"å°é»‘","note":"","ucode":"DCED6B71BE7687","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338268,"discussion_content":"ä¼š , é‡å†™æ—¶ä¼šéå†redisæ•°æ®åº“å…¨é‡æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609227669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299446,"ip_address":""},"score":338268,"extra":""}]},{"author":{"id":2058455,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/68/d7/29025f1f.jpg","nickname":"å‰æ–¹çš„ç¯æœ‰ç‚¹å¼±","note":"","ucode":"5CEDBCF3DDC991","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299351,"discussion_content":"ğŸ˜­æˆ‘å¤ªèœäº†ï¼Œå­¦ä¹ å­¦ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597665958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":9,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1411281,"avatar":"https://static001.geekbang.org/account/avatar/00/15/88/d1/43ebb68c.jpg","nickname":"ä¸€æ¡æœ‰æ¢¦æƒ³çš„å’¸é±¼","note":"","ucode":"15BA7CA2C08EFF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299149,"discussion_content":"â€œä½†æ˜¯æ­¤æ—¶çˆ¶è¿›ç¨‹ä¾æ—§æ˜¯ä¼šæœ‰æµé‡å†™å…¥çš„ï¼Œå¦‚æœçˆ¶è¿›ç¨‹æ“ä½œçš„æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„keyï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™çˆ¶è¿›ç¨‹å°±ä¼šçœŸæ­£æ‹·è´è¿™ä¸ªkeyå¯¹åº”çš„å†…å­˜æ•°æ®ï¼Œç”³è¯·æ–°çš„å†…å­˜ç©ºé—´ï¼Œè¿™æ ·é€æ¸åœ°ï¼Œçˆ¶å­è¿›ç¨‹å†…å­˜æ•°æ®å¼€å§‹åˆ†ç¦»ï¼Œçˆ¶å­è¿›ç¨‹é€æ¸æ‹¥æœ‰å„è‡ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´â€\nè¿™å¥è¯ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œå¦‚æœæ·»åŠ ä¸€ä¸ªæ–°çš„é”®å€¼å¯¹ï¼Œå°±ä¸ä¼šåˆ†ç¦»å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597578262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":9,"extra":"","child_discussion_number":6,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1411281,"avatar":"https://static001.geekbang.org/account/avatar/00/15/88/d1/43ebb68c.jpg","nickname":"ä¸€æ¡æœ‰æ¢¦æƒ³çš„å’¸é±¼","note":"","ucode":"15BA7CA2C08EFF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299162,"discussion_content":"åªä¼šé’ˆå¯¹ä¿®æ”¹çš„æ•°æ®é‡æ–°åˆ†é…å†…å­˜ã€‚æ·»åŠ æ–°çš„keyï¼Œåªæœ‰çˆ¶è¿›ç¨‹åˆ†é…æ–°çš„å†…å­˜ç©ºé—´ï¼Œå­è¿›ç¨‹æ— ä»»ä½•å½±å“ï¼Œä¹Ÿçœ‹ä¸åˆ°è¿™ä¸ªkeyã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1597582732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299149,"ip_address":""},"score":299162,"extra":""},{"author":{"id":1062070,"avatar":"https://static001.geekbang.org/account/avatar/00/10/34/b6/0feb574b.jpg","nickname":"æˆ‘çš„é»„é‡‘æ—¶ä»£","note":"","ucode":"D7825B45B372F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":299615,"discussion_content":"è¿™ä¸ªæœºåˆ¶æ˜¯osæœ¬èº«å»æ§åˆ¶çš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597751746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299162,"ip_address":""},"score":299615,"extra":""},{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1062070,"avatar":"https://static001.geekbang.org/account/avatar/00/10/34/b6/0feb574b.jpg","nickname":"æˆ‘çš„é»„é‡‘æ—¶ä»£","note":"","ucode":"D7825B45B372F4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299620,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597753397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299615,"ip_address":""},"score":299620,"extra":""}]},{"author":{"id":1106238,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e1/3e/a617ae38.jpg","nickname":"æ¯å¤©ä¸€ç‚¹ç‚¹","note":"","ucode":"B4DFDA3200B452","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299011,"discussion_content":"ä½ å¥½ï¼Œé—®ä¸ªé—®é¢˜å“ˆ\nçˆ¶çº¿ç¨‹æ•°æ®ä¿®æ”¹æ—¶ä¼šè§¦å‘cowæœºåˆ¶ï¼Œæ­¤æ—¶çˆ¶å­çº¿ç¨‹çš„æ•°æ®ä¼šåˆ†ç¦»ï¼Œåˆ†ç¦»çš„åº”è¯¥åªæ˜¯ä¿®æ”¹çš„æ•°æ®å§ï¼Œä¸åº”è¯¥æ˜¯å…¨éƒ¨æ•°æ®å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597508259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":9,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1106238,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e1/3e/a617ae38.jpg","nickname":"æ¯å¤©ä¸€ç‚¹ç‚¹","note":"","ucode":"B4DFDA3200B452","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299024,"discussion_content":"æ˜¯ï¼Œåªæœ‰ä¿®æ”¹çš„æ‰ä¼šåˆ†ç¦»ã€‚å¦å¤–æ³¨æ„æ˜¯çˆ¶å­è¿›ç¨‹ï¼Œä¸æ˜¯çˆ¶å­çº¿ç¨‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597535532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299011,"ip_address":""},"score":299024,"extra":""},{"author":{"id":1194177,"avatar":"https://static001.geekbang.org/account/avatar/00/12/38/c1/237a2113.jpg","nickname":"wakeeee","note":"","ucode":"F1A1D051AC6509","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":310800,"discussion_content":"å¤šè°¢ä½ çš„è¯„è®ºã€‚æˆ‘çœ‹äº†è€å¸ˆçš„è¿™ç¯‡æ–‡ç« ï¼Œå¿ƒæƒ³å­è¿›ç¨‹æ€ä¹ˆå¯èƒ½å®Œå®Œæ•´æ•´çš„æ‹·è´ä¸€ä»½ç‰©ç†å†…å­˜ï¼Œé‚£ä¹Ÿå¤ªæµªè´¹ç¡¬ä»¶èµ„æºäº†ï¼Œåœ¨è¯„è®ºåŒºæ‰¾åˆ°ç­”æ¡ˆäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602050396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299024,"ip_address":""},"score":310800,"extra":""}]},{"author":{"id":1193052,"avatar":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","nickname":"å€ªå¤§äºº","note":"","ucode":"4798D69F3E86FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298400,"discussion_content":"è¯¾ä»£è¡¨ï¼Œæ±‚é—®ä¸€ä¸‹â€œä¸€ä¸ªæ‹·è´ï¼Œä¸¤å¤„æ—¥å¿—â€çš„é—®é¢˜ã€‚\n\nç¬¬äºŒå¤„æ—¥å¿—ï¼Œæ–°çš„å†™æ“ä½œä¼šè¢«å†™åˆ°é‡å†™æ—¥å¿—çš„ç¼“å†²åŒºï¼Œè¿™å„¿çš„ç¼“å†²åŒºæŒ‡çš„æ˜¯ä»€ä¹ˆï¼ŸæŒ‰æˆ‘çŒœæƒ³åº”è¯¥æ˜¯æŸä¸€å¤„å†…å­˜ï¼Ÿç¼“å†²åŒºè®°å½•çš„æ˜¯æ“ä½œè¿˜æ˜¯kï¼Œvæ•°æ®å‘¢ï¼Ÿå‡è®¾æ–°å†™äº†å¤šæ¬¡ï¼Œè¿™ä¸ªç¼“å†²åŒºåªå­˜æ•°æ®æœ€ç»ˆçŠ¶æ€è¿˜æ˜¯è®°å½•æ¯æ¬¡æ“ä½œï¼Ÿ\n\nå‡è®¾é‡å†™å¼€å§‹æ—¶å†…å­˜ä¸­keyAå€¼ä¸ºvalueAï¼Œç„¶åæ–°çš„å†™æ“ä½œset keyA valueBï¼Œé‡å†™å®Œæˆåæ–°çš„aofæ—¥å¿—é‡ŒkeyAçš„æ“ä½œè®°å½•æ˜¯ä¸¤æ¡è¿˜æ˜¯ä¸€æ¡ï¼Ÿ\n\n*^O^* æ±‚è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597289552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":9,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1193052,"avatar":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","nickname":"å€ªå¤§äºº","note":"","ucode":"4798D69F3E86FB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298405,"discussion_content":"ä¸¤æ¡ï¼ŒAOFè®°å½•çš„æ˜¯æ¯ä¸€æ¬¡æ“ä½œè®°å½•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597291073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298400,"ip_address":""},"score":298405,"extra":""}]},{"author":{"id":2107689,"avatar":"https://static001.geekbang.org/account/avatar/00/20/29/29/7664ee1e.jpg","nickname":"Geek_988cd0","note":"","ucode":"1D74CBF3E8DD64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298221,"discussion_content":"bç‚¹,å¦‚æœè¯´æ¯æ¬¡éƒ½ä¼šç”³è¯·å¤åˆ¶å†…å­˜,é‚£ä¸å°±å˜æˆäº† &#34;å¤šæ¬¡æ‹·è´&#34;,è¿™æ ·ä¸€æ¥ é‡å†™ç¼“å†²çš„æ„ä¹‰ä¸å°±æ²¡äº†å—,ç›¸å½“äºé‡å¼€äº†ä¸€ä¸ªredis,å¯ä»¥è¿™æ ·ç†è§£å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597221372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":9,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2107689,"avatar":"https://static001.geekbang.org/account/avatar/00/20/29/29/7664ee1e.jpg","nickname":"Geek_988cd0","note":"","ucode":"1D74CBF3E8DD64","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298251,"discussion_content":"ä½ å†è¯»ä¸€ä¸‹ç†è§£ç†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597227907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298221,"ip_address":""},"score":298251,"extra":""}]},{"author":{"id":2107689,"avatar":"https://static001.geekbang.org/account/avatar/00/20/29/29/7664ee1e.jpg","nickname":"Geek_988cd0","note":"","ucode":"1D74CBF3E8DD64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298218,"discussion_content":"è¿›ç¨‹å’Œçº¿ç¨‹æ›´ä¹±äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597220848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":9,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2107689,"avatar":"https://static001.geekbang.org/account/avatar/00/20/29/29/7664ee1e.jpg","nickname":"Geek_988cd0","note":"","ucode":"1D74CBF3E8DD64","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298252,"discussion_content":"ç†ä¸€ç†ï¼Œæ²¡é‚£ä¹ˆéš¾ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597227918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298218,"ip_address":""},"score":298252,"extra":""},{"author":{"id":2105175,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/40ab8h1zbSUZmzxARyicDuXECYwtQNDd9jxAbys5LMnVLJMmibTCHd1icrRZMnMSvTJ27UdITA0439hAaVIxcOkGQ/132","nickname":"Geek_72b9a7","note":"","ucode":"4C26B79F9F15A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2107689,"avatar":"https://static001.geekbang.org/account/avatar/00/20/29/29/7664ee1e.jpg","nickname":"Geek_988cd0","note":"","ucode":"1D74CBF3E8DD64","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298304,"discussion_content":"è€å¸ˆè¯´rewriteaofæ˜¯å­è¿›åŸï¼Œç„¶ååˆè¯´ä¸»çº¿ç¨‹ã€‚æˆ‘ä¹Ÿæœ‰ç‚¹ç–‘æƒ‘ï¼Ÿï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597241991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298218,"ip_address":""},"score":298304,"extra":""},{"author":{"id":1016575,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/82/ff/00e7614e.jpg","nickname":"robyy","note":"","ucode":"773337C9942A7F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2105175,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/40ab8h1zbSUZmzxARyicDuXECYwtQNDd9jxAbys5LMnVLJMmibTCHd1icrRZMnMSvTJ27UdITA0439hAaVIxcOkGQ/132","nickname":"Geek_72b9a7","note":"","ucode":"4C26B79F9F15A9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345168,"discussion_content":"åº”è¯¥æ˜¯å­è¿›ç¨‹ï¼Œæåˆ°äº†cowï¼Œèµ„æº/å†…å­˜åˆ†ç¦»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611675234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298304,"ip_address":""},"score":345168,"extra":""}]}]},{"had_liked":false,"id":241597,"user_name":"æ³¨å®šéå‡¡","can_delete":false,"product_type":"c1","uid":1113597,"ip_address":"","ucode":"80673056E131B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","comment_is_top":false,"comment_ctime":1597367179,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"426799129483","product_id":100056701,"comment_content":"1ï¼Œä½œè€…è®²äº†ä»€ä¹ˆï¼Ÿ<br>æœ¬ç« è®²äº†Redisä¸¤ç§æŒä¹…åŒ–æœºåˆ¶ä¹‹ä¸€ï¼šAOFæœºåˆ¶åŸç†<br>aofæ—¥å¿—è®°å½•äº†redisæ‰€æœ‰å¢åˆ æ”¹çš„æ“ä½œï¼Œä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œå½“rediså®•æœºï¼Œéœ€è¦æ¢å¤å†…å­˜ä¸­çš„æ•°æ®æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯»å–aopæ—¥å¿—æ¢å¤æ•°æ®ï¼Œä»è€Œé¿å…å› rediså¼‚å¸¸å¯¼è‡´çš„æ•°æ®ä¸¢å¤±<br><br>2ï¼Œä½œè€…æ˜¯æ€ä¹ˆæŠŠè¿™äº‹ç»™è®²æ˜ç™½çš„ï¼Ÿ<br>ï¼ˆ1ï¼‰ä½œè€…å…ˆè®²è¿°rediså®•æœºä¼šå¯¼è‡´å†…å­˜æ•°æ®ä¸¢å¤±ï¼Œéœ€è¦æœ‰ä¸€ç§æœºåˆ¶åœ¨redisé‡å¯åæ¢å¤æ•°æ®ã€‚<br>ï¼ˆ2ï¼‰ä»‹ç»äº†AOFé€šè¿‡è®°å½•æ¯ä¸€ä¸ªå¯¹redisæ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„æ“ä½œæ—¥å¿—ï¼Œå¯ä»¥å®ç°è¿™ç§åŠŸèƒ½<br>ï¼ˆ2ï¼‰ä»‹ç»äº†AOFçš„è¿è¡Œæœºåˆ¶ï¼Œæ•°æ®ä¿å­˜æœºåˆ¶ï¼Œä»¥åŠç”±æ­¤å¸¦æ¥çš„ä¼˜ç‚¹å’Œç¼ºç‚¹<br>3ï¼Œä¸ºäº†è®²æ˜ç™½ï¼Œä½œè€…è®²äº†å“ªäº›è¦ç‚¹ï¼Œæœ‰å“ªäº›äº®ç‚¹ï¼Ÿ<br>ï¼ˆ1ï¼‰äº®ç‚¹ï¼šè®°å½•æ“ä½œçš„æ—¶æœºåˆ†ä¸ºï¼šâ€œå†™å‰æ—¥å¿—å’Œå†™åæ—¥å¿—â€ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä¹‹å‰æ‰€ä¸çŸ¥é“çš„<br>ï¼ˆ2ï¼‰è¦ç‚¹1ï¼šAOFæ˜¯å†™åæ—¥å¿—ï¼Œè¿™æ ·å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼Œè®°å½•çš„æ‰€æœ‰æ“ä½œå‘½ä»¤éƒ½æ˜¯æ­£ç¡®çš„ï¼Œä¸éœ€è¦é¢å¤–çš„è¯­æ³•æ£€æŸ¥ï¼Œç¡®ä¿redisé‡å¯æ—¶èƒ½å¤Ÿæ­£ç¡®çš„è¯»å–å›å¤æ•°æ®<br>ï¼ˆ3ï¼‰è¦ç‚¹2ï¼šAOFæ—¥å¿—å†™å…¥ç£ç›˜æ˜¯æ¯”è¾ƒå½±å“æ€§èƒ½çš„ï¼Œä¸ºäº†å¹³è¡¡æ€§èƒ½ä¸æ•°æ®å®‰å…¨ï¼Œå¼€å‘äº†ä¸‰ç§æœºåˆ¶ï¼šâ‘ ï¼šç«‹å³å†™å…¥â‘¡ï¼šæŒ‰ç§’å†™å…¥â‘¢ï¼šç³»ç»Ÿå†™å…¥<br>ï¼ˆ4ï¼‰è¦ç‚¹3ï¼šAOFæ—¥å¿—ä¼šå˜å¾—å·¨å¤§ï¼Œæ‰€ä»¥Redisæä¾›äº†æ—¥å¿—é‡æ•´çš„æœºåˆ¶ï¼Œé€šè¿‡è¯»å–å†…å­˜ä¸­çš„æ•°æ®é‡æ–°äº§ç”Ÿä¸€ä»½æ•°æ®å†™å…¥æ—¥å¿—<br>4ï¼Œå¯¹äºä½œè€…æ‰€è®²ï¼Œæˆ‘æœ‰å“ªäº›å‘æ•£æ€§çš„æ€è€ƒï¼Ÿ<br>ä½œè€…è¯´ç³»ç»Ÿè®¾è®¡â€œå–èˆâ€äºŒå­—éå¸¸é‡è¦ï¼Œè¿™æ˜¯æˆ‘ä¹‹å‰æœªæ›¾æ„è¯†åˆ°çš„ã€‚ä½œè€…è®²äº†forkå­è¿›ç¨‹æœºåˆ¶ï¼Œæ˜¯Linuxç³»ç»Ÿçš„ä¸€ä¸ªèƒ½åŠ›ï¼Œåœ¨åˆ˜è¶…çš„è¯¾ä¸­è®²è¿‡ï¼Œè¿™é¼“èˆäº†æˆ‘ç»§ç»­å­¦ä¹ çš„ä¿¡å¿ƒ<br>5ï¼Œå°†æ¥æœ‰å“ªäº›åœºæ™¯ï¼Œæˆ‘å¯ä»¥åº”ç”¨ä¸Šå®ƒï¼Ÿ<br>ç›®å‰è¿˜æ²¡æœ‰æœºä¼šç›´æ¥æ“ä½œç”Ÿäº§çš„redisé…ç½®ï¼Œä½†ç°åœ¨è¦å­¦ä¹ ï¼Œäº‰å–å°†æ¥å¯ä»¥ç›´æ¥æ“ä½œ<br>","like_count":100,"discussions":[{"author":{"id":1361159,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","nickname":"æ¶›å“¥å“¥","note":"","ucode":"329A1384E3AB5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368111,"discussion_content":"è¯¾ä»£è¡¨","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1618569056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2739957,"avatar":"","nickname":"Geek_39299b","note":"","ucode":"908C2FC4DECD33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389805,"discussion_content":"éå‡¡å“¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629435993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253310,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/be/551454e0.jpg","nickname":"zxy","note":"","ucode":"FFAA3F6667305D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359326,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616162585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244717,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1598630448,"is_pvip":false,"replies":[{"id":"90092","content":"æœ‰ä¸¤ä¸ªé…ç½®é¡¹åœ¨æ§åˆ¶AOFé‡å†™çš„è§¦å‘æ—¶æœºï¼š<br>1. auto-aof-rewrite-min-size: è¡¨ç¤ºè¿è¡ŒAOFé‡å†™æ—¶æ–‡ä»¶çš„æœ€å°å¤§å°ï¼Œé»˜è®¤ä¸º64MB<br>2. auto-aof-rewrite-percentage: è¿™ä¸ªå€¼çš„è®¡ç®—æ–¹æ³•æ˜¯ï¼šå½“å‰AOFæ–‡ä»¶å¤§å°å’Œä¸Šä¸€æ¬¡é‡å†™åAOFæ–‡ä»¶å¤§å°çš„å·®å€¼ï¼Œå†é™¤ä»¥ä¸Šä¸€æ¬¡é‡å†™åAOFæ–‡ä»¶å¤§å°ã€‚ä¹Ÿå°±æ˜¯å½“å‰AOFæ–‡ä»¶æ¯”ä¸Šä¸€æ¬¡é‡å†™åAOFæ–‡ä»¶çš„å¢é‡å¤§å°ï¼Œå’Œä¸Šä¸€æ¬¡é‡å†™åAOFæ–‡ä»¶å¤§å°çš„æ¯”å€¼ã€‚<br><br>AOFæ–‡ä»¶å¤§å°åŒæ—¶è¶…å‡ºä¸Šé¢è¿™ä¸¤ä¸ªé…ç½®é¡¹æ—¶ï¼Œä¼šè§¦å‘AOFé‡å†™ã€‚<br><br>ä¹Ÿå¯ä»¥çœ‹ä¸‹@GEEKBANG_3036760çš„ç•™è¨€","user_name":"ä½œè€…å›å¤","comment_id":244717,"uid":"1609687","ip_address":"","utype":1,"ctime":1598708018,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":1,"race_medal":0,"score":"383850719792","product_id":100056701,"comment_content":"ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘AOF é‡å†™å‘¢ï¼Ÿ","like_count":89,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504677,"discussion_content":"æœ‰ä¸¤ä¸ªé…ç½®é¡¹åœ¨æ§åˆ¶AOFé‡å†™çš„è§¦å‘æ—¶æœºï¼š\n1. auto-aof-rewrite-min-size: è¡¨ç¤ºè¿è¡ŒAOFé‡å†™æ—¶æ–‡ä»¶çš„æœ€å°å¤§å°ï¼Œé»˜è®¤ä¸º64MB\n2. auto-aof-rewrite-percentage: è¿™ä¸ªå€¼çš„è®¡ç®—æ–¹æ³•æ˜¯ï¼šå½“å‰AOFæ–‡ä»¶å¤§å°å’Œä¸Šä¸€æ¬¡é‡å†™åAOFæ–‡ä»¶å¤§å°çš„å·®å€¼ï¼Œå†é™¤ä»¥ä¸Šä¸€æ¬¡é‡å†™åAOFæ–‡ä»¶å¤§å°ã€‚ä¹Ÿå°±æ˜¯å½“å‰AOFæ–‡ä»¶æ¯”ä¸Šä¸€æ¬¡é‡å†™åAOFæ–‡ä»¶çš„å¢é‡å¤§å°ï¼Œå’Œä¸Šä¸€æ¬¡é‡å†™åAOFæ–‡ä»¶å¤§å°çš„æ¯”å€¼ã€‚\n\nAOFæ–‡ä»¶å¤§å°åŒæ—¶è¶…å‡ºä¸Šé¢è¿™ä¸¤ä¸ªé…ç½®é¡¹æ—¶ï¼Œä¼šè§¦å‘AOFé‡å†™ã€‚\n\nä¹Ÿå¯ä»¥çœ‹ä¸‹@GEEKBANG_3036760çš„ç•™è¨€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598708018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244774,"user_name":"GEEKBANG_3036760","can_delete":false,"product_type":"c1","uid":1603105,"ip_address":"","ucode":"5E322DD05C7F12","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZ09TltdQiboR0kc1Kzp4X7ul2t01sWMG3cA7kT4X1Uvibes5bAEXx72veJ6uEMmUFq8FtEQvwl6FQ/132","comment_is_top":false,"comment_ctime":1598673120,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"285066514656","product_id":100056701,"comment_content":"ä¸ºäº†å‡å°aofæ–‡ä»¶çš„ä½“é‡ï¼Œå¯ä»¥æ‰‹åŠ¨å‘é€â€œbgrewriteaofâ€æŒ‡ä»¤ï¼Œé€šè¿‡å­è¿›ç¨‹ç”Ÿæˆæ›´å°ä½“ç§¯çš„aofï¼Œç„¶åæ›¿æ¢æ‰æ—§çš„ã€å¤§ä½“é‡çš„aofæ–‡ä»¶ã€‚<br><br>ä¹Ÿå¯ä»¥é…ç½®è‡ªåŠ¨è§¦å‘<br><br>ã€€ã€€1ï¼‰auto-aof-rewrite-percentage 100<br><br>ã€€ã€€2ï¼‰auto-aof-rewrite-min-size 64mb<br><br>ã€€ã€€è¿™ä¸¤ä¸ªé…ç½®é¡¹çš„æ„æ€æ˜¯ï¼Œåœ¨aofæ–‡ä»¶ä½“é‡è¶…è¿‡64mbï¼Œä¸”æ¯”ä¸Šæ¬¡é‡å†™åçš„ä½“é‡å¢åŠ äº†100%æ—¶è‡ªåŠ¨è§¦å‘é‡å†™ã€‚æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™äº›å‚æ•°è¾¾åˆ°è‡ªå·±çš„å®é™…è¦æ±‚","like_count":66},{"had_liked":false,"id":241111,"user_name":"å¾é¹","can_delete":false,"product_type":"c1","uid":1221936,"ip_address":"","ucode":"B19B6EB7002231","user_header":"https://static001.geekbang.org/account/avatar/00/12/a5/30/4be78ce7.jpg","comment_is_top":false,"comment_ctime":1597194081,"is_pvip":false,"discussion_count":12,"race_medal":0,"score":"190575755105","product_id":100056701,"comment_content":"æœ‰å‡ ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼š<br>1ã€æ–‡ä¸­å¤šå¤„æåˆ°bgrewriteaof å­è¿›ç¨‹ï¼Œè¿™ä¸ªæœ‰ç‚¹è¿·ç³Šï¼Œä¸»çº¿ç¨‹forkå‡ºæ¥çš„bgrewriteaofæ˜¯å­çº¿ç¨‹è¿˜æ˜¯å­è¿›ç¨‹ï¼Ÿ<br>2ã€AOFé‡å†™ä¼šæ‹·è´ä¸€ä»½å®Œæ•´çš„å†…å­˜æ•°æ®ï¼Œè¿™ä¸ªä¼šå¯¼è‡´å†…å­˜å ç”¨ç›´æ¥ç¿»å€å—ï¼Ÿ<br>3ã€å¦‚æœä¸€ä¸ªkeyè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œåœ¨åˆ©ç”¨AOFæ–‡ä»¶æ¢å¤æ•°æ®æ—¶ï¼Œkeyå·²ç»è¿‡æœŸäº†è¿™ä¸ªæ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿ","like_count":44,"discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298159,"discussion_content":"\n1ã€å­è¿›ç¨‹\n2ã€ä¸ä¼šä¸€æ¬¡æ€§æ‹·è´æ‰€æœ‰å†…å­˜æ•°æ®ï¼Œè€Œä¸”é‡‡ç”¨å†™å®å¤åˆ¶æœºåˆ¶æ¥åš\n3ã€AOFæ–‡ä»¶ä¸­keyçš„è¿‡æœŸæ—¶é—´ä¼šä¿å­˜ä¸ºç»å¯¹æ—¶é—´ï¼Œåœ¨æ¢å¤æ—¶ä¼šä»¥ç»å¯¹çš„è¿‡æœŸæ—¶é—´å†™å…¥ï¼Œå¦‚æœkeyå·²ç»è¿‡æœŸï¼Œredisä¸ä¼šåˆ†é…å†…å­˜ç©ºé—´","likes_number":61,"is_delete":false,"is_hidden":false,"ctime":1597206777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":6,"child_discussions":[{"author":{"id":2061660,"avatar":"","nickname":"Geek_121747","note":"","ucode":"8A7AD79B6F53F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":298176,"discussion_content":"å†™æ—¶å¤åˆ¶æœºåˆ¶ï¼ˆCopy-on-writeï¼Œç®€ç§°COWï¼‰æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºè®¾è®¡é¢†åŸŸçš„ä¼˜åŒ–ç­–ç•¥ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¦‚æœæœ‰å¤šä¸ªè°ƒç”¨è€…ï¼ˆcallersï¼‰åŒæ—¶è¦æ±‚ç›¸åŒèµ„æºï¼ˆå¦‚å†…å­˜æˆ–ç£ç›˜ä¸Šçš„æ•°æ®å­˜å‚¨ï¼‰ï¼Œä»–ä»¬ä¼šå…±åŒè·å–ç›¸åŒçš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„èµ„æºï¼Œç›´åˆ°æŸä¸ªè°ƒç”¨è€…è¯•å›¾ä¿®æ”¹èµ„æºçš„å†…å®¹æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šçœŸæ­£å¤åˆ¶ä¸€ä»½ä¸“ç”¨å‰¯æœ¬ï¼ˆprivate copyï¼‰ç»™è¯¥è°ƒç”¨è€…ï¼Œè€Œå…¶ä»–è°ƒç”¨è€…æ‰€è§åˆ°çš„æœ€åˆçš„èµ„æºä»ç„¶ä¿æŒä¸å˜ã€‚è¿™è¿‡ç¨‹å¯¹å…¶ä»–çš„è°ƒç”¨è€…éƒ½æ˜¯é€æ˜çš„ï¼ˆtransparentlyï¼‰ã€‚æ­¤ä½œæ³•ä¸»è¦çš„ä¼˜ç‚¹æ˜¯å¦‚æœè°ƒç”¨è€…æ²¡æœ‰ä¿®æ”¹è¯¥èµ„æºï¼Œå°±ä¸ä¼šæœ‰å‰¯æœ¬ï¼ˆprivate copyï¼‰è¢«åˆ›å»ºï¼Œå› æ­¤å¤šä¸ªè°ƒç”¨è€…åªæ˜¯è¯»å–æ“ä½œæ—¶å¯ä»¥å…±äº«åŒä¸€ä»½èµ„æºã€‚","likes_number":46,"is_delete":false,"is_hidden":false,"ctime":1597210913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298159,"ip_address":""},"score":298176,"extra":""},{"author":{"id":2945981,"avatar":"","nickname":"Geek_37dde4","note":"","ucode":"E631E98D354A06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2061660,"avatar":"","nickname":"Geek_121747","note":"","ucode":"8A7AD79B6F53F5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557455,"discussion_content":"å†™æ—¶å¤åˆ¶æ˜¯åˆ©ç”¨äº†è™šæ‹Ÿå†…å­˜çš„é¡µè¡¨, æœ€åˆå†…æ ¸åšäº†ä¸€äº›è®¾ç½®, è®©é¡µè¡¨é¡¹æŒ‡å‘å’Œçˆ¶è¿›ç¨‹ç›¸åŒçš„ç‰©ç†å†…å­˜é¡µ, ç„¶åå°†è¿™äº›é¡µé¢è‡ªèº«æ ‡è®°ä¸ºåªè¯». fork()ä¹‹å, å†…æ ¸æ•è·çˆ¶è¿›ç¨‹æˆ–å­è¿›ç¨‹å¯¹è¿™äº›é¡µé¢çš„ä¿®æ”¹æ„å›¾, å¹¶ä¸ºå°†å‘ç”Ÿä¿®æ”¹çš„é¡µé¢åˆ›å»ºç‰©ç†æ‹·è´, ç„¶åå°†æ–°çš„é¡µé¢æ‹·è´åˆ†é…ç»™å†…æ ¸æ•è·çš„è¿›ç¨‹, å¯¹é¡µè¡¨é¡¹åšç›¸åº”çš„è°ƒæ•´. ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1647827545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298176,"ip_address":""},"score":557455,"extra":""},{"author":{"id":1122953,"avatar":"https://static001.geekbang.org/account/avatar/00/11/22/89/5757eb43.jpg","nickname":"XiaoYeGe","note":"","ucode":"F07027153B6971","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":570074,"discussion_content":"è¿™ä½è€å“¥æœ‰æ²¡æœ‰è‡ªå·±çš„åšå®¢?  å¯ä»¥å…³æ³¨ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651654172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298159,"ip_address":""},"score":570074,"extra":""}]},{"author":{"id":1170843,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","nickname":"yyl","note":"","ucode":"1741DACDFCA9AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298130,"discussion_content":"1. è€å¸ˆåº”è¯¥æƒ³è¡¨è¾¾æ˜¯ï¼šä¸»çº¿ç¨‹forkå‡ºæ¥ä¸€ä¸ªbgrewriteaofå­è¿›ç¨‹ï¼Œè€Œè¯¥å­è¿›ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1597201167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073236,"avatar":"https://static001.geekbang.org/account/avatar/00/10/60/54/b3eb605b.jpg","nickname":"é˜¿ç‰›","note":"","ucode":"DC8C189FCF3289","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358519,"discussion_content":"ä¸€å®šæ˜¯è¿›ç¨‹ï¼Œä¸ºäº†å®ç°å†…å­˜åˆ†ç¦»ã€‚","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1615991040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1219496,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","nickname":"LeonğŸ“·","note":"","ucode":"B9BBD1EFAAE5A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336458,"discussion_content":"å†…æ ¸ä¸­çº¿ç¨‹å’Œè¿›ç¨‹æ²¡æœ‰å¤ªå¤šæœ¬è´¨åŒºåˆ«ï¼Œæ•°æ®ç»“æ„éƒ½å·®ä¸å¤š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1608600934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373196,"discussion_content":"æ˜¯è¿›ç¨‹ å»ºè®®æŸ¥ä¸‹linux çš„man","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620649315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1219496,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","nickname":"LeonğŸ“·","note":"","ucode":"B9BBD1EFAAE5A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336459,"discussion_content":"ä¸€ä¸ªè¿›ç¨‹çš„mainè¿›ç¨‹åœ¨å†…æ ¸éƒ½æ˜¯è¡¨ç°ä¸ºmainçº¿ç¨‹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608600969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241137,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":false,"comment_ctime":1597200074,"is_pvip":true,"discussion_count":6,"race_medal":0,"score":"164805957322","product_id":100056701,"comment_content":"AOFå·¥ä½œåŸç†ï¼š<br>1ã€Redis æ‰§è¡Œ fork() ï¼Œç°åœ¨åŒæ—¶æ‹¥æœ‰çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ã€‚<br>2ã€å­è¿›ç¨‹å¼€å§‹å°†æ–° AOF æ–‡ä»¶çš„å†…å®¹å†™å…¥åˆ°ä¸´æ—¶æ–‡ä»¶ã€‚<br>3ã€å¯¹äºæ‰€æœ‰æ–°æ‰§è¡Œçš„å†™å…¥å‘½ä»¤ï¼Œçˆ¶è¿›ç¨‹ä¸€è¾¹å°†å®ƒä»¬ç´¯ç§¯åˆ°ä¸€ä¸ªå†…å­˜ç¼“å­˜ä¸­ï¼Œä¸€è¾¹å°†è¿™äº›æ”¹åŠ¨è¿½åŠ åˆ°ç°æœ‰ AOF æ–‡ä»¶çš„æœ«å°¾,è¿™æ ·æ ·å³ä½¿åœ¨é‡å†™çš„ä¸­é€”å‘ç”Ÿåœæœºï¼Œç°æœ‰çš„ AOF æ–‡ä»¶ä¹Ÿè¿˜æ˜¯å®‰å…¨çš„ã€‚<br>4ã€å½“å­è¿›ç¨‹å®Œæˆé‡å†™å·¥ä½œæ—¶ï¼Œå®ƒç»™çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ï¼Œçˆ¶è¿›ç¨‹åœ¨æ¥æ”¶åˆ°ä¿¡å·ä¹‹åï¼Œå°†å†…å­˜ç¼“å­˜ä¸­çš„æ‰€æœ‰æ•°æ®è¿½åŠ åˆ°æ–° AOF æ–‡ä»¶çš„æœ«å°¾ã€‚<br>5ã€æå®šï¼ç°åœ¨ Redis åŸå­åœ°ç”¨æ–°æ–‡ä»¶æ›¿æ¢æ—§æ–‡ä»¶ï¼Œä¹‹åæ‰€æœ‰å‘½ä»¤éƒ½ä¼šç›´æ¥è¿½åŠ åˆ°æ–° AOF æ–‡ä»¶çš„æœ«å°¾ã€‚<br><br>è¯•ç€è®¨è®ºä¸‹ç•™è¨€ç«¥é‹çš„å‡ ä¸ªé—®é¢˜<br><br>ä¸€ã€å…¶ä¸­è€å¸ˆåœ¨æ–‡ä¸­æåˆ°ï¼šâ€œå› ä¸ºä¸»çº¿ç¨‹æœªé˜»å¡ï¼Œä»ç„¶å¯ä»¥å¤„ç†æ–°æ¥çš„æ“ä½œã€‚æ­¤æ—¶ï¼Œå¦‚æœæœ‰å†™æ“ä½œï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚â€<br>è¿™é‡Œé¢è¯´åˆ° â€œRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºï¼Œè¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„â€ï¼Œå…¶å®å¯¹äºæœ‰äº›äººæœ‰ç†è§£èµ·æ¥å¯èƒ½ä¸æ˜¯é‚£ä¹ˆå¥½ç†è§£ï¼Œå› ä¸ºå†™å…¥ç¼“å†²åŒºä¸ºä»€ä¹ˆè¿˜ä¸éƒ½æ˜¯æ•°æ®ï¼›<br><br>æˆ‘çš„ç†è§£å…¶å®è¿™ä¸ªå°±æ˜¯å†™å…¥ç¼“å†²åŒºï¼Œåªä¸è¿‡æ˜¯ç”±appendfsyncç­–ç•¥å†³å®šçš„ï¼Œæ‰€ä»¥è¯´çš„ä¸ä¸¢å¤±æ•°æ®æŒ‡çš„æ˜¯ä¸ä¼šå› ä¸ºå­è¿›ç¨‹é¢å¤–ä¸¢å¤±æ•°æ®ã€‚<br><br>äºŒã€AOFé‡æ–°åªæ˜¯å›æ‹·è´å¼•ç”¨(æŒ‡é’ˆ)ï¼Œä¸ä¼šæ‹·è´æ•°æ®æœ¬èº«ï¼Œå› æ­¤é‡å…¶å®ä¸å¤§ï¼Œé‚£å†™å…¥çš„æ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Œå†™æ—¶å¤åˆ¶ï¼Œå³æ–°å¼€è¾Ÿç©ºé—´ä¿å­˜ä¿®æ”¹çš„å€¼ï¼Œå› æ­¤éœ€è¦é¢å¤–çš„å†…å­˜ï¼Œä½†ç»å¯¹ä¸æ˜¯redisç°åœ¨å æœ‰çš„2å€ã€‚<br><br>ä¸‰ã€AOFå¯¹äºè¿‡æœŸkeyä¸ä¼šç‰¹æ®Šå¤„ç†ï¼Œå› ä¸ºRedis keysè¿‡æœŸæœ‰ä¸¤ç§æ–¹å¼ï¼šè¢«åŠ¨å’Œä¸»åŠ¨æ–¹å¼ã€‚<br>\tå½“ä¸€äº›å®¢æˆ·ç«¯å°è¯•è®¿é—®å®ƒæ—¶ï¼Œkeyä¼šè¢«å‘ç°å¹¶ä¸»åŠ¨çš„è¿‡æœŸã€‚<br>\t<br>\tå½“ç„¶ï¼Œè¿™æ ·æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæœ‰äº›è¿‡æœŸçš„keysï¼Œæ°¸è¿œä¸ä¼šè®¿é—®ä»–ä»¬ã€‚ æ— è®ºå¦‚ä½•ï¼Œè¿™äº›keysåº”è¯¥è¿‡æœŸï¼Œæ‰€ä»¥å®šæ—¶éšæœºæµ‹è¯•è®¾ç½®keysçš„è¿‡æœŸæ—¶é—´ã€‚æ‰€æœ‰è¿™äº›è¿‡æœŸçš„keyså°†ä¼šä»åˆ é™¤ã€‚<br>\tå…·ä½“å°±æ˜¯Redisæ¯ç§’10æ¬¡åšçš„äº‹æƒ…ï¼š<br>\t\tæµ‹è¯•éšæœºçš„20ä¸ªkeysè¿›è¡Œç›¸å…³è¿‡æœŸæ£€æµ‹ã€‚<br>\t\tåˆ é™¤æ‰€æœ‰å·²ç»è¿‡æœŸçš„keysã€‚<br>\t\tå¦‚æœæœ‰å¤šäº25%çš„keysè¿‡æœŸï¼Œé‡å¤æ­¥å¥1.<br><br>è‡³äºè¯¾åé—®é¢˜ï¼Œçœ‹äº† @ä¸è·¯åŒé£ ç«¥é‹çš„ç­”æ¡ˆï¼Œæ²¡æœ‰æ›´å¥½çš„ç­”æ¡ˆï¼Œå°±ä¸å›ç­”äº†","like_count":38,"discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298161,"discussion_content":"AOFä¸­ä¿å­˜çš„è¿‡æœŸæ—¶é—´æ˜¯ç»å¯¹æ—¶é—´ï¼Œkeyåœ¨æ¢å¤æ—¶ï¼Œå¦‚æœå‘ç°å·²ç»è¿‡æœŸï¼Œä¸ä¼šåˆ†é…å†…å­˜ç©ºé—´ï¼Œä¸éœ€è¦èµ°ä¸€éè¿‡æœŸåˆ é™¤ç­–ç•¥ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1597207038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":298170,"discussion_content":"æ˜¯çš„ï¼ŒKeysçš„è¿‡æœŸæ—¶é—´ä½¿ç”¨Unixæ—¶é—´æˆ³å­˜å‚¨(ä»Redis 2.6å¼€å§‹ä»¥æ¯«ç§’ä¸ºå•ä½)ã€‚è¿™æ„å‘³ç€å³ä½¿Rediså®ä¾‹ä¸å¯ç”¨ï¼Œæ—¶é—´ä¹Ÿæ˜¯ä¸€ç›´åœ¨æµé€çš„ã€‚\n\nè¦æƒ³è¿‡æœŸçš„å·¥ä½œå¤„ç†å¥½ï¼Œè®¡ç®—æœºå¿…é¡»é‡‡ç”¨ç¨³å®šçš„æ—¶é—´ã€‚ å¦‚æœä½ å°†RDBæ–‡ä»¶åœ¨ä¸¤å°æ—¶é’Ÿä¸åŒæ­¥çš„ç”µè„‘é—´åŒæ­¥ï¼Œæœ‰è¶£çš„äº‹ä¼šå‘ç”Ÿï¼ˆå¯èƒ½æ‰€æœ‰çš„ keysè£…è½½æ—¶å°±ä¼šè¿‡æœŸï¼‰ã€‚\n\nå³ä½¿æ­£åœ¨è¿è¡Œçš„å®ä¾‹ä¹Ÿä¼šæ£€æŸ¥è®¡ç®—æœºçš„æ—¶é’Ÿï¼Œä¾‹å¦‚å¦‚æœä½ è®¾ç½®äº†ä¸€ä¸ªkeyçš„æœ‰æ•ˆæœŸæ˜¯1000ç§’ï¼Œç„¶åè®¾ç½®ä½ çš„è®¡ç®—æœºæ—¶é—´ä¸ºæœªæ¥2000ç§’ï¼Œè¿™æ—¶keyä¼šç«‹å³å¤±æ•ˆï¼Œè€Œä¸æ˜¯ç­‰1000ç§’ä¹‹åã€‚","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1597208886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298161,"ip_address":""},"score":298170,"extra":""}]},{"author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298172,"discussion_content":"Kaitoå…³äºè¯¾åé—®é¢˜çš„è§£ç­”æ›´æ£’ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597209128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1254968,"avatar":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","nickname":"Darren","note":"","ucode":"CCD2B2C492BE9A","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":298256,"discussion_content":"æ„Ÿè°¢ï¼Œä¸€å—è¿›æ­¥ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597228146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298172,"ip_address":""},"score":298256,"extra":""}]},{"author":{"id":1121738,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/ca/6dd795d9.jpg","nickname":"å°èœ","note":"","ucode":"BC0A84C7055824","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":396105,"discussion_content":"é‡å†™ç¼“å­˜å†™å…¥æ–°çš„AOFæ—¶ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„æ“ä½œå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632393094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1389314,"avatar":"https://static001.geekbang.org/account/avatar/00/15/33/02/83f47bf9.jpg","nickname":"æµæ²™","note":"","ucode":"6153686D1C34B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379255,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623773246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241169,"user_name":"æ›¾è½¼éºŸ","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1597207299,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"78906618627","product_id":100056701,"comment_content":"é—®é¢˜ä¸€:åœ¨AOFé‡å†™æœŸé—´ï¼ŒRedisè¿è¡Œçš„å‘½ä»¤ä¼šè¢«ç§¯ç´¯åœ¨ç¼“å†²åŒºï¼Œå¾…AOFé‡å†™ç»“æŸåä¼šè¿›è¡Œå›æ”¾ï¼Œåœ¨é«˜å¹¶å‘æƒ…å†µä¸‹ç¼“å†²åŒºç§¯ç´¯å¯èƒ½ä¼šå¾ˆå¤§ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é˜»å¡ï¼ŒRedisåæ¥é€šè¿‡Linuxç®¡é“æŠ€æœ¯è®©aofæœŸé—´å°±èƒ½åŒæ—¶è¿›è¡Œå›æ”¾ï¼Œè¿™æ ·aofé‡å†™ç»“æŸååªéœ€è¦å›æ”¾å°‘é‡å‰©ä½™çš„æ•°æ®å³å¯<br><br>é—®é¢˜äºŒï¼šå¯¹äºä»»ä½•æ–‡ä»¶ç³»ç»Ÿéƒ½æ˜¯ä¸æ¨èå¹¶å‘ä¿®æ”¹æ–‡ä»¶çš„ï¼Œä¾‹å¦‚hadoopçš„ç§Ÿçº¦æœºåˆ¶ï¼ŒRedisä¹Ÿæ˜¯è¿™æ ·ï¼Œé¿å…é‡å†™å‘ç”Ÿæ•…éšœï¼Œå¯¼è‡´æ–‡ä»¶æ ¼å¼é”™ä¹±æœ€åaofæ–‡ä»¶æŸåæ— æ³•ä½¿ç”¨ï¼Œæ‰€ä»¥Redisçš„åšæ³•æ˜¯åŒæ—¶å†™ä¸¤ä»½æ–‡ä»¶ï¼Œæœ€åé€šè¿‡ä¿®æ”¹æ–‡ä»¶åçš„æ–¹å¼ï¼Œä¿è¯æ–‡ä»¶åˆ‡æ¢çš„åŸå­æ€§<br><br>è¿™é‡Œéœ€è¦çº æ­£ä¸€ä¸‹è€å¸ˆå‰é¢çš„å£è¯¯ï¼Œå°±æ˜¯Redisæ˜¯é€šè¿‡ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„fork()æ–¹å¼åˆ›å»ºè¿›ç¨‹ï¼Œä¸æ˜¯çº¿ç¨‹ï¼Œä¹Ÿç”±äºè¿™ä¸ªåŸå› ï¼Œä¸»è¿›ç¨‹å’Œforkå‡ºæ¥çš„å­è¿›ç¨‹çš„èµ„æºæ˜¯ä¸å…±äº«çš„ï¼Œæ‰€ä»¥ä¹Ÿå‡ºç°Redisä½¿ç”¨pipeç®¡é“æŠ€æœ¯æ¥åŒæ­¥ä¸»å­è¿›ç¨‹çš„aofå¢é‡æ•°æ®","like_count":18,"discussions":[{"author":{"id":2273076,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo1QZQ0eoOqvOyMyAzcsyEK8bQaZTd9aJHTTCYicicUm9gmhUFaxQe6IBc3caLVD8PhqtmhhicrNHe0w/132","nickname":"Severus4","note":"","ucode":"79BC6487B595EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373943,"discussion_content":"æœ‰ä¸ªåœ°æ–¹æ²¡ç†è§£ï¼Œè€å¸ˆç»™çš„å›¾ï¼Œaofé‡å†™æ—¶ä¸»çº¿ç¨‹è¿è¡Œçš„å‘½ä»¤è¢«ç§¯ç´¯åœ¨ç¼“å†²åŒºï¼ŒåŒæ—¶åˆåœ¨aofé‡å†™çš„ç¼“å†²åŒºä¹Ÿè®°å½•äº†ä¸€ä»½ï¼Œé‚£ä¹ˆåœ¨aofé‡å†™ç»“æŸååº”è¯¥æ˜¯ç”¨é‡å†™ç¼“å†²åŒºè¿›è¡Œå›æ”¾çš„å—ï¼Ÿå¯ä¸å¯ä»¥ç›´æ¥ç”¨ä¸»çº¿ç¨‹çš„ç¼“å†²åŒºè¿›è¡Œå›æ”¾ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620921061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1451391,"avatar":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","nickname":"æ›¾è½¼éºŸ","note":"","ucode":"D418371AC11270","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2273076,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo1QZQ0eoOqvOyMyAzcsyEK8bQaZTd9aJHTTCYicicUm9gmhUFaxQe6IBc3caLVD8PhqtmhhicrNHe0w/132","nickname":"Severus4","note":"","ucode":"79BC6487B595EE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385955,"discussion_content":"å¹¶ä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯åŒæ­¥æ˜¯è‡ªä¸Šè€Œä¸‹çš„ï¼Œå¦‚æœå›åˆ°ä¸»ç°çº¿ç¨‹å¯èƒ½ä¼šå¯¼è‡´ï¼Œæš‚åœå†™å…¥ï¼Œå½±å“åˆ°ä¸»çº¿ç¨‹ä»è€Œå¼•èµ·æ•´ä¸ªdbçš„é˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627360886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373943,"ip_address":""},"score":385955,"extra":""},{"author":{"id":1451391,"avatar":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","nickname":"æ›¾è½¼éºŸ","note":"","ucode":"D418371AC11270","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2273076,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo1QZQ0eoOqvOyMyAzcsyEK8bQaZTd9aJHTTCYicicUm9gmhUFaxQe6IBc3caLVD8PhqtmhhicrNHe0w/132","nickname":"Severus4","note":"","ucode":"79BC6487B595EE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385956,"discussion_content":"å› ä¸ºä¸»ä»åŒæ­¥ï¼Œæœ¬èº«ä¹Ÿæ˜¯æœ‰ç¼“å†²åŒºçš„ï¼Œåœ¨å­çº¿ç¨‹èƒ½é¿å…å†™å…¥é˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627360952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373943,"ip_address":""},"score":385956,"extra":""}]},{"author":{"id":1113597,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","nickname":"æ³¨å®šéå‡¡","note":"","ucode":"80673056E131B7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298552,"discussion_content":"æ¡ç†æ¸…æ™°ï¼Œå‰å®³ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597323892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241265,"user_name":"D","can_delete":false,"product_type":"c1","uid":1027596,"ip_address":"","ucode":"5BB4D16FE39BFF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/0c/f39f847a.jpg","comment_is_top":false,"comment_ctime":1597231583,"is_pvip":false,"replies":[{"id":"89348","content":"AOFçš„å…¨ç§°æ˜¯Append Only Fileï¼Œè¡¨ç¤ºæ–‡ä»¶åªèƒ½è¿½åŠ å†™ã€‚ Redisè®°æ—¥å¿—æ—¶ï¼Œå°±æ˜¯ç”¨è¿½åŠ å†™æ–‡ä»¶çš„æ–¹å¼è®°å½•å†™å‘½ä»¤æ“ä½œçš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":241265,"uid":"1609687","ip_address":"","utype":1,"ctime":1597595718,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":4,"race_medal":0,"score":"66021741023","product_id":100056701,"comment_content":"AOF æ˜¯ä»€ä¹ˆçš„ç¼©å†™ï¼Œ è¿˜æ˜¯è¯´å°±æ˜¯è¿™ä¸ªåå­—ï¼Ÿ","like_count":15,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503688,"discussion_content":"AOFçš„å…¨ç§°æ˜¯Append Only Fileï¼Œè¡¨ç¤ºæ–‡ä»¶åªèƒ½è¿½åŠ å†™ã€‚ Redisè®°æ—¥å¿—æ—¶ï¼Œå°±æ˜¯ç”¨è¿½åŠ å†™æ–‡ä»¶çš„æ–¹å¼è®°å½•å†™å‘½ä»¤æ“ä½œçš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597595718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298818,"discussion_content":"Append Only File","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597410358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027596,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ae/0c/f39f847a.jpg","nickname":"D","note":"","ucode":"5BB4D16FE39BFF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298792,"discussion_content":"æœ€å¥½èƒ½æœ‰ä¸€ä¸ªç¼©ç•¥è¯è¡¨å§ï¼Œä¸“ä¸šä¸€ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597399973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1313894,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/66/7a2313ba.jpg","nickname":"ruier","note":"","ucode":"5AE3CA17CAE369","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298289,"discussion_content":"AOF æ–‡ä»¶æ˜¯ä¸€ä¸ªåªè¿›è¡Œè¿½åŠ æ“ä½œçš„æ—¥å¿—æ–‡ä»¶ï¼ˆappend only logï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597237087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241194,"user_name":"è„±ç¼°çš„é‡é©¬__","can_delete":false,"product_type":"c1","uid":1447569,"ip_address":"","ucode":"D5F993E7232C61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WtHCCMoLJ2DvzqQwPYZyj2RlN7eibTLMHDMTSO4xIKjfKR1Eh9L98AMkkZY7FmegWyGLahRQJ5ibPzeeFtfpeSow/132","comment_is_top":false,"comment_ctime":1597212765,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"57431787613","product_id":100056701,"comment_content":"æ–‡ç« å‰é¢è¯´åˆ°redo logæ—¥å¿—è®°å½•çš„æ˜¯ä¿®æ”¹åçš„æ•°æ®ï¼Œä½†æ˜¯åœ¨ä¸å¥‡è€å¸ˆçš„MySQLå®æˆ˜ä¸­è®²è§£çš„æ˜¯redo logè®°å½•æ˜¯å¯¹æ•°æ®çš„æ“ä½œè®°å½•ï¼Œä¿®æ”¹åçš„æ•°æ®æ˜¯ä¿å­˜åœ¨å†…å­˜çš„change bufferä¸­çš„","like_count":13,"discussions":[{"author":{"id":2017580,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/c9/2c/9ed40921.jpg","nickname":"BOB","note":"","ucode":"E86596709EAB1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346070,"discussion_content":"ä¸“é—¨çœ‹äº†ä¸‹ï¼Œredologè®°å½•çš„æ˜¯â€œåœ¨æŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹â€","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1611849331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1940831,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqFHleTqYES6pD8NVUaH6PHRY5fRYLfyC5t7RxicRnTjR4ge5W4fibawZ8Av5I5t4ib7kKFejicLuqJ0g/132","nickname":"æ¸©å®‰é€‚","note":"","ucode":"715F45EE02AC46","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337549,"discussion_content":"redo logæ˜¯è®°å½•çš„å¯¹æ•°æ®çš„æ“ä½œè®°å½•ï¼Œæ˜¯ç‰©ç†æ—¥å¿—ï¼Œè‡³äºchange bufferåªæœ‰éå”¯ä¸€ç´¢å¼•æ‰å¯ä»¥ä½¿ç”¨","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1608971299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383412,"discussion_content":"æˆ–è€…æ˜¯æ˜¯æƒ³æ binlog çš„ row æ ¼å¼ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626084182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241241,"user_name":"Archer30","can_delete":false,"product_type":"c1","uid":2108687,"ip_address":"","ucode":"B4D74EFA7D3107","user_header":"https://static001.geekbang.org/account/avatar/00/20/2d/0f/a00f2a32.jpg","comment_is_top":false,"comment_ctime":1597222195,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"40251927859","product_id":100056701,"comment_content":"é—®é¢˜1å›ç­”ï¼šå¦‚æœå­è¿›ç¨‹å†™å…¥äº‹ä»¶è¿‡é•¿ï¼Œå¹¶ä¸”è¿™æ®µäº‹ä»¶ï¼Œä¼šå¯¼è‡´AOFé‡å†™æ—¥å¿—ï¼Œç§¯ç´¯è¿‡å¤šï¼Œå½“æ–°çš„AOFæ–‡ä»¶å®Œæˆåï¼Œè¿˜æ˜¯éœ€è¦å†™å…¥å¤§é‡AOFé‡å†™æ—¥å¿—é‡Œçš„å†…å®¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´é˜»å¡ã€‚<br><br>é—®é¢˜2å›ç­”ï¼šæˆ‘è§‰å¾—è¯„è®ºåŒºé‡Œçš„å¤§éƒ¨åˆ†å›ç­” é˜²æ­¢é”ç«äº‰ ï¼Œåº”è¯¥æ˜¯æŠŠé—®é¢˜ç†è§£é”™äº†ï¼Œçˆ¶å­ä¸¤ä¸ªè¿›ç¨‹æœ¬æ¥å°±æ²¡æœ‰éœ€è¦ç«äº‰çš„æ•°æ®ï¼Œè€å¸ˆæ‰€æŒ‡çš„ä¸¤ä¸ªæ—¥å¿—åº”è¯¥æ˜¯â€œAOFç¼“å†²åŒºâ€å’Œ&quot;AOFé‡å†™ç¼“å†²åŒº&quot;ï¼Œè€Œä¸æ˜¯ç£ç›˜ä¸Šçš„AOFæ–‡ä»¶ï¼Œä¹‹æ‰€æœ‰å¦å¤–æœ‰ä¸€ä¸ª&quot;AOFé‡å†™ç¼“å†²åŒº&quot;ï¼Œæ˜¯å› ä¸ºé‡å†™æœŸé—´ï¼Œä¸»è¿›ç¨‹AOFè¿˜åœ¨ç»§ç»­å·¥ä½œï¼Œè¿˜æ˜¯ä¼šåŒæ­¥åˆ°æ—§çš„AOFæ–‡ä»¶ä¸­ï¼ŒåŒæ­¥æˆåŠŸåï¼Œâ€œAOFç¼“å†²åŒºâ€ä¼šè¢«æ¸…é™¤ï¼Œä¼šè¢«æ¸…é™¤ï¼Œä¼šè¢«æ¸…é™¤ï¼","like_count":9,"discussions":[{"author":{"id":1905996,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epeiaBa4BwckMyrWKLmIjx60xZWa9VIj4aXVsc3781TqG5psItqx0pDFovMyCjficwu8IcpqY30S4Kw/132","nickname":"zgsdr0620","note":"","ucode":"51B701AAEAFE77","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306092,"discussion_content":"åŒæ„æ‚¨çš„ç¬¬äºŒç‚¹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600167361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2131606,"avatar":"","nickname":"Geek_da4cfb","note":"","ucode":"DB59B24A249713","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376643,"discussion_content":"äººå®¶é—®çš„æ˜¯ AOFæ—¥å¿—ä¸ºå•¥ ä¸å’Œé‡å†™AOFæ—¥å¿—å…¬ç”¨ä¸€ä¸ªæ–‡ä»¶ï¼Œéçš„å¦å¤–åˆ›å»ºä¸€ä¸ªæ–‡ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622251659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1234273,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d5/61/8ad99e09.jpg","nickname":"åˆ˜ç™¾ä¸‡","note":"","ucode":"692E23D070641A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372052,"discussion_content":"å¦å¤–ï¼Œé‡å†™å¼€å§‹æ—¶ï¼Œaof ç¼“å†²åŒºå¦‚æœæœ‰æ•°æ®æ²¡æœ‰å†™å…¥æ—¥å¿—ï¼Œå­è¿›ç¨‹å†™å®Œåï¼Œä½¿ç”¨çš„ç¼“å†²åŒºä¸å¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620142213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1977474,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/2c/82/98e2b82a.jpg","nickname":"Reborn 2.0","note":"","ucode":"BA506E7455D91C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314693,"discussion_content":"æ‰€ä»¥æ˜¯å› ä¸º&#34;AOFç¼“å†²åŒº&#34;ä¸å¤Ÿå¤§, ä¸èƒ½ä¿è¯é‡å†™æ—¶å€™çš„AOFæ—¥å¿—éƒ½èƒ½æ”¾åœ¨ç¼“å†²é‡Œ?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603186361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241134,"user_name":"æ‰©æ•£æ€§ç™¾ä¸‡å’¸é¢åŒ…","can_delete":false,"product_type":"c1","uid":1905171,"ip_address":"","ucode":"6D703D51553B42","user_header":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","comment_is_top":false,"comment_ctime":1597199634,"is_pvip":false,"replies":[{"id":"89106","content":"ä¸»çº¿ç¨‹æ”¶åˆ°å†™å‘½ä»¤åï¼Œä¼šæŠŠè¿™ä¸ªå†™å‘½ä»¤å†™å…¥AOFé‡å†™ç¼“å†²åŒºï¼Œè¿™æ˜¯ç”±ä¸»çº¿ç¨‹æ¥å†™çš„ï¼Œæ‰€ä»¥è¿çº¿åœ¨ä¸€èµ·äº†ï¼šï¼‰<br><br>bgrewriteaofä¸»è¦æ˜¯å†™æ–°æ—¥å¿—çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":241134,"uid":"1609687","ip_address":"","utype":1,"ctime":1597207380,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":3,"race_medal":0,"score":"40251905298","product_id":100056701,"comment_content":"å›¾æ˜¯ä¸æ˜¯ç”»é”™äº†ã€‚ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹å’ŒAOFé‡å†™ç¼“å†²è¿èµ·æ¥äº†å‘¢ï¼Ÿä¸æ˜¯åº”è¯¥bgrewriteaofæ¥å†™å—ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503654,"discussion_content":"ä¸»çº¿ç¨‹æ”¶åˆ°å†™å‘½ä»¤åï¼Œä¼šæŠŠè¿™ä¸ªå†™å‘½ä»¤å†™å…¥AOFé‡å†™ç¼“å†²åŒºï¼Œè¿™æ˜¯ç”±ä¸»çº¿ç¨‹æ¥å†™çš„ï¼Œæ‰€ä»¥è¿çº¿åœ¨ä¸€èµ·äº†ï¼šï¼‰\n\nbgrewriteaofä¸»è¦æ˜¯å†™æ–°æ—¥å¿—çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597207380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2278542,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c4/8e/89f8d85e.jpg","nickname":"ç¬‘ å®¹","note":"","ucode":"9E72450E9719ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320792,"discussion_content":"â€œbgrewriteaofä¸»è¦æ˜¯å†™æ–°æ—¥å¿—çš„â€ï¼Œæ–°çš„é‡å†™æ—¥å¿—å°±æ˜¯ä»AOFé‡å†™ç¼“å­˜ä¸­å‡ºæ¥çš„å•Šï¼Œä¸å°±æ˜¯ç”±bgrewiteaofè¿›ç¨‹æ¥åšçš„å—ï¼Œä¸»çº¿ç¨‹ä¸æ˜¯ä¸å‚ä¸é‡å†™çš„å·¥ä½œå˜›ã€‚æ‡µäº†æˆ‘ã€‚ã€‚ã€‚ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604478890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1682027,"avatar":"https://static001.geekbang.org/account/avatar/00/19/aa/6b/ab9a072a.jpg","nickname":"å¯¹ä¸é”™","note":"","ucode":"EF55733E3BD78B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2278542,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c4/8e/89f8d85e.jpg","nickname":"ç¬‘ å®¹","note":"","ucode":"9E72450E9719ED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325880,"discussion_content":"é‡å†™æ—¥å¿—åœ¨é‡å†™æ²¡æœ‰å®Œæˆä¹‹å‰æ˜¯ä¸ä¼šè¢«&#34;å‘ç°&#34;çš„ï¼Œæ‰€ä»¥å­è¿›ç¨‹åªéœ€è¦æŠŠé‡å†™çš„å‘½ä»¤å†™åˆ°é‡å†™æ—¥å¿—ä¸Šé¢ï¼Œé‡å†™ç¼“å†²åŒºæ˜¯ç”¨æ¥è®°å½•ä¸»è¿›ç¨‹å˜æ›´æ“ä½œçš„å‘½ä»¤","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1605451685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320792,"ip_address":""},"score":325880,"extra":""}]}]},{"had_liked":false,"id":289685,"user_name":"æ‚Ÿç©ºèŠæ¶æ„","can_delete":false,"product_type":"c1","uid":1123163,"ip_address":"","ucode":"C2F482A0CF8AF1","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/5b/983408b9.jpg","comment_is_top":false,"comment_ctime":1619143732,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"35978882100","product_id":100056701,"comment_content":"Alwaysï¼Œeverysecï¼ŒNoï¼Œè¿™ä¸‰ç§æ¨¡å¼å°±æ˜¯ CAP ç†è®ºçš„ä½“ç°ã€‚","like_count":8,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388266,"discussion_content":"å¤§ä½¬ï¼Œcaè¿˜å¥½ç†è§£ï¼Œè¿™ä¸ªpå’‹ç†è§£çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628674325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373233,"discussion_content":"å¤§ä½¬ï¼Œåˆçœ‹è§ä½ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620656304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1123163,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/5b/983408b9.jpg","nickname":"æ‚Ÿç©ºèŠæ¶æ„","note":"","ucode":"C2F482A0CF8AF1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373293,"discussion_content":"åé¢è¿˜æœ‰å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620692340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373233,"ip_address":""},"score":373293,"extra":""}]}]},{"had_liked":false,"id":241282,"user_name":"ruier","can_delete":false,"product_type":"c1","uid":1313894,"ip_address":"","ucode":"5AE3CA17CAE369","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/66/7a2313ba.jpg","comment_is_top":false,"comment_ctime":1597237155,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31662008227","product_id":100056701,"comment_content":"æœ‰ä¸ªDjangoå†™çš„Redisç®¡ç†å°ç³»ç»Ÿï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹ä¸€çœ‹ï¼Œåå­—å«repoll<br>https:&#47;&#47;github.com&#47;NaNShaner&#47;repoll","like_count":7},{"had_liked":false,"id":252500,"user_name":"Daiver","can_delete":false,"product_type":"c1","uid":1466447,"ip_address":"","ucode":"9B1A03AFBC79BC","user_header":"https://static001.geekbang.org/account/avatar/00/16/60/4f/db0e62b3.jpg","comment_is_top":false,"comment_ctime":1602320399,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27372124175","product_id":100056701,"comment_content":"AOFé‡å†™è¿‡ç¨‹ï¼Œä¸»çº¿ç¨‹æ¥æ”¶åˆ°äº†æ–°çš„è¯·æ±‚ï¼Œå¹¶å°†æ—¥å¿—å†™å…¥ç¼“å†²åŒºï¼Œå¦‚æœå®•æœºäº†ï¼Œç¼“å†²åŒºçš„å†…å®¹è¿˜æ˜¯ä¼šä¸¢å¤±çš„ã€‚å­è¿›ç¨‹åœ¨å†™æ—¥å¿—æ—¶ï¼Œé‡å†™ç¼“å†²åŒºä¹Ÿæ˜¯å¯èƒ½ä¼šä¸¢å¤±çš„ï¼Œä¸ºå•¥è¯´AOFæ—¥å¿—è¿˜æ˜¯é½å…¨çš„ï¼Œæ€ä¹ˆå¯ä»¥ç”¨äºæ¢å¤å‘¢ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388263,"discussion_content":"æˆ‘è§‰å¾—è€å¸ˆçš„æ„æ€æ˜¯aofæ—¥å¿—æ˜¯ç›¸å¯¹é½å…¨çš„ï¼Œæ¯”å¦‚ç”¨äº†alwaysç­–ç•¥ï¼Œå³ä½¿å¸¸ç”¨çš„everysecç­–ç•¥ä¸¢å¤±çš„ä¹Ÿæ˜¯æœ€å¤š2sçš„æ•°æ®ï¼Œæ—¢ç„¶é€‰æ‹©è¯´æ˜æ˜¯å¯ä»¥å®¹å¿çš„ã€‚è‡³äºaofé‡å†™ï¼Œå³ä½¿å¤±è´¥äº†ï¼Œåˆ æ‰æ–‡ä»¶ï¼Œå†æ¥ä¸€æ¬¡åˆæœ‰ä½•å¦¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1628673721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245968,"user_name":"Javaå’å¢™å·¥ç¨‹å¸ˆ","can_delete":false,"product_type":"c1","uid":1937062,"ip_address":"","ucode":"E76AE44A9C76AE","user_header":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","comment_is_top":false,"comment_ctime":1599122835,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27368926611","product_id":100056701,"comment_content":"è¯•å¬å®Œäº†ï¼Œå½»åº•å…¥å‘","like_count":6},{"had_liked":false,"id":241095,"user_name":"ä¸è·¯åŒé£","can_delete":false,"product_type":"c1","uid":1138821,"ip_address":"","ucode":"2985F1440A1962","user_header":"https://static001.geekbang.org/account/avatar/00/11/60/85/f72f1d94.jpg","comment_is_top":false,"comment_ctime":1597190784,"is_pvip":true,"discussion_count":6,"race_medal":0,"score":"23072027264","product_id":100056701,"comment_content":"1.å­çº¿ç¨‹é‡æ–°AOFæ—¥å¿—å®Œæˆæ—¶ä¼šå‘ä¸»çº¿ç¨‹å‘é€ä¿¡å·å¤„ç†å‡½æ•°ï¼Œä¼šå®Œæˆ ï¼ˆ1ï¼‰å°†AOFé‡å†™ç¼“å†²åŒºçš„å†…å®¹å†™å…¥åˆ°æ–°çš„AOFæ–‡ä»¶ä¸­ã€‚ï¼ˆ2ï¼‰å°†æ–°çš„AOFæ–‡ä»¶æ”¹åï¼ŒåŸå­åœ°æ›¿æ¢ç°æœ‰çš„AOFæ–‡ä»¶ã€‚å®Œæˆä»¥åæ‰ä¼šé‡æ–°å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚<br>2.ä¸å…±äº«AOFæœ¬èº«çš„æ—¥å¿—æ˜¯é˜²æ­¢é”ç«äº‰ï¼Œç±»ä¼¼äºredis rehashã€‚","like_count":5,"discussions":[{"author":{"id":1138821,"avatar":"https://static001.geekbang.org/account/avatar/00/11/60/85/f72f1d94.jpg","nickname":"ä¸è·¯åŒé£","note":"","ucode":"2985F1440A1962","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298321,"discussion_content":"å†™é”™äº†ï¼Œå­è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597244666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2105175,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/40ab8h1zbSUZmzxARyicDuXECYwtQNDd9jxAbys5LMnVLJMmibTCHd1icrRZMnMSvTJ27UdITA0439hAaVIxcOkGQ/132","nickname":"Geek_72b9a7","note":"","ucode":"4C26B79F9F15A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298309,"discussion_content":"é‡å†™ä¼šå‘ç”Ÿrehashå— ï¼Ÿè€å¸ˆç¬¬äºŒèŠ‚è¯¾ä¹Ÿè®²äº†è¿™ä¸ªrehash.  æ²¡è¯´å…·ä½“å‘ç”Ÿäºä½•æ—¶ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597243428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2105175,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/40ab8h1zbSUZmzxARyicDuXECYwtQNDd9jxAbys5LMnVLJMmibTCHd1icrRZMnMSvTJ27UdITA0439hAaVIxcOkGQ/132","nickname":"Geek_72b9a7","note":"","ucode":"4C26B79F9F15A9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393084,"discussion_content":"è§¦å‘æ¡ä»¶æœ‰ä¿©ï¼Œè¯„è®ºåŒºæäº† ç¬¬ä¸€ä¸ªæ˜¯keyçš„ä¸ªæ•°å¤§äºæ¡¶æ•°ï¼Œä¸”ä¸åœ¨bgsaveå’Œrewriteçš„æ—¶å€™ä¼šè§¦å‘ã€‚ç¬¬äºŒæ˜¯keyä¸ªæ•°å¤§äº5å€æ¡¶æ•°äº†ï¼Œç«‹é©¬è§¦å‘äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631242217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298309,"ip_address":""},"score":393084,"extra":""}]},{"author":{"id":2113159,"avatar":"","nickname":"Geek_beaeab","note":"","ucode":"651B07865D3208","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298147,"discussion_content":"ä¸ªäººè§‰å¾—ä¸å…±äº«è¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯é˜²æ­¢é‡å¤å†™å…¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597203861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2113159,"avatar":"","nickname":"Geek_beaeab","note":"","ucode":"651B07865D3208","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393085,"discussion_content":"å¦‚æœå…±äº«çš„è¯ï¼Œä¸ªäººè§‰å¾—æ²¡å¿…è¦ä¸¤ä»½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631242266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298147,"ip_address":""},"score":393085,"extra":""}]},{"author":{"id":1905171,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","nickname":"æ‰©æ•£æ€§ç™¾ä¸‡å’¸é¢åŒ…","note":"","ucode":"6D703D51553B42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298128,"discussion_content":"AOFé‡å†™ä¸æ˜¯ç”±åå°çº¿ç¨‹å®Œæˆçš„å—ï¼Ÿæ€ä¹ˆåˆæ˜¯ä¸»çº¿ç¨‹å†™å…¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597199108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249905,"user_name":"æ¨å°ç¾Šå¿«è·‘","can_delete":false,"product_type":"c1","uid":1489392,"ip_address":"","ucode":"FBD7BDDA499B0F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIL1K9WKIkvsdWBwthxz7M08hvqrbeibtzq9rKreZ8wEtHJa2F6x8C1f0dicibMOH6FUW2ayrBYlsEqQ/132","comment_is_top":false,"comment_ctime":1600847699,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18780716883","product_id":100056701,"comment_content":"å¼€å¯AOFï¼Œæœ‰å¯èƒ½å¯¼è‡´Redis hangä½ã€‚æ—¥å¿—é‡Œä¹Ÿæœ‰ä½“ç°ï¼šAsynchronous AOF fsync is taking too long (disk is busy?). Writing the AOF buffer without waiting for fsync to complete, this may slow down Redis <br>ä¸»è¦åŸå› ï¼šLinuxè§„å®šæ‰§è¡Œwrite(2)æ—¶ï¼Œå¦‚æœå¯¹åŒä¸€ä¸ªæ–‡ä»¶æ­£åœ¨æ‰§è¡Œfdatasync(2)å°†kernel bufferå†™å…¥ç‰©ç†ç£ç›˜ï¼Œæˆ–è€…æœ‰system wide syncåœ¨æ‰§è¡Œï¼Œwrite(2)ä¼šè¢«Blockä½ï¼Œæ•´ä¸ªRedisè¢«Blockä½ã€‚ï¼ˆæ³¨ï¼šRediså¤„ç†å®Œæ¯ä¸ªäº‹ä»¶åéƒ½ä¼šè°ƒç”¨write(2)å°†å˜åŒ–å†™å…¥kernelçš„bufferï¼‰","like_count":4,"discussions":[{"author":{"id":2172420,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/r2nR7Zkl5RP7LobsNKJ6wmmtyXrh4alNSAOldx1y1PSeFB1J2I14HE4I0BCgicPhubIOibPZAENzEpHEWTFjMNqg/132","nickname":"è‘£è‘£","note":"","ucode":"C222E275545158","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334556,"discussion_content":"èµï¼Œè§£å†³äº†æˆ‘çš„ä¸ºä»€ä¹ˆaofä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œåˆšå¼€å§‹æˆ‘ä»¥ä¸ºä¸»çº¿ç¨‹ä¸æ˜¯å°†æ“ä½œåçš„è¯­å¥å†™å…¥aofç¼“å­˜å°±å¯ä»¥äº†ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šè¿›è¡Œé˜»å¡ï¼ŒåŸæ¥è¦å’Œæ“ä½œç³»ç»Ÿå†…æ ¸æœ‰å…³äº†ã€Œç®€å•æ¥è¯´å°±æ˜¯fsyncçš„æ—¶å€™writeæ“ä½œä¼šè¢«é˜»å¡ã€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607881274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388270,"discussion_content":"æ„Ÿè§‰è¿™æ˜¯é’ˆå¯¹æ–‡ä»¶çš„é˜²æ­¢æ–‡ä»¶å¹¶å‘å†™é—®é¢˜ï¼Œåº”è¯¥ä¸åŒ…å«ç¼“å­˜åŒº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628675380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241112,"user_name":"Anony","can_delete":false,"product_type":"c1","uid":1174733,"ip_address":"","ucode":"4B7D06B8C7BFD3","user_header":"https://static001.geekbang.org/account/avatar/00/11/ec/cd/52753b9e.jpg","comment_is_top":false,"comment_ctime":1597194247,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"18777063431","product_id":100056701,"comment_content":"ä¸ŠèŠ‚è¯´rediså•çº¿ç¨‹å¤„ç†ç½‘ç»œIOå’Œé”®å€¼å¯¹çš„è¯»å†™ï¼ŒæŒä¹…åŒ–æ˜¯ç”±é¢å¤–çº¿ç¨‹å¤„ç†çš„ã€‚é‚£AOFç”±é¢å¤–çº¿ç¨‹å¤„ç†çš„è¯ï¼Œä¸ºä»€ä¹ˆä¼šå½±å“ä¸»çº¿ç¨‹å‘¢ï¼Ÿå’Œä¸»çº¿ç¨‹ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1118627,"avatar":"https://static001.geekbang.org/account/avatar/00/11/11/a3/7a2405ca.jpg","nickname":"rfyiamcool","note":"","ucode":"65FCBF05B13893","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374650,"discussion_content":"Aofçš„æ¯æ¬¡æœºåˆ¶æ˜¯åŒæ­¥å†™çš„çš„ï¼Œä¹Ÿå°±æ˜¯fsyncdataã€‚æ¯ç§’æœºåˆ¶çš„è¯åˆ©ç”¨äº†æ“ä½œç³»ç»Ÿçš„buffer ioæ¥å†™æ•°æ®ï¼Œçœ‹èµ·æ¥æ˜¯å¼‚æ­¥ï¼Œç„¶åç”±bioçº¿ç¨‹æ¥fsyncï¼Œä½†å¦‚æœç£ç›˜ç¹å¿™ï¼Œä½ çš„å†™è¯·æ±‚å¤šçš„è¯ï¼Œä½ çš„ä¸»çº¿ç¨‹writeä¼šè¢«æ“ä½œç³»ç»Ÿé˜»å¡è§¦å‘fsyncåŒæ­¥æ“ä½œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621302384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388265,"discussion_content":"aofçš„ç¼“å­˜æ˜¯ç”±ä¸»çº¿ç¨‹å†™çš„ï¼Œè¡¨é¢ä¸Šé™¤äº†alwaysç­–ç•¥éƒ½å’Œä¸»çº¿ç¨‹æ— å…³äº†ï¼Œå®é™…ä¸Šæ­£æ˜¯å› ä¸ºæœ‰äº†ç¼“å­˜çš„å…³è”ï¼Œå¦‚æœåŒæ­¥çº¿ç¨‹å¤„ç†ä¸åŠæ—¶ï¼Œç¼“å­˜åŒºå †ç§¯å¤§é‡æ•°æ®ï¼Œä¸ºäº†ä¿è¯ç¼“å­˜æ•°æ®çš„å®Œæ•´æ€§ä¸»çº¿ç¨‹ä¼šè¢«é˜»å¡å†™å…¥ï¼Œå¯¼è‡´å½±å“åˆ°ä¸»çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628674191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298166,"discussion_content":"æŠ›å¼€è¿™ä¸ªä¸è¯´ï¼Œä¸¤ä¸ªè¿›ç¨‹ä¹Ÿæ˜¯å¯ä»¥ç›¸äº’å½±å“çš„ï¼Œæ¯”å¦‚ç«äº‰æœºå™¨èµ„æºã€‚é”ç­‰å¾…ä»€ä¹ˆçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597208031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313316,"user_name":"éšæœºæ¼«æ­¥çš„å‚»ç“œ","can_delete":false,"product_type":"c1","uid":2762186,"ip_address":"","ucode":"FBEFB27BF45ED4","user_header":"https://static001.geekbang.org/account/avatar/00/2a/25/ca/96734ade.jpg","comment_is_top":false,"comment_ctime":1632374015,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14517275903","product_id":100056701,"comment_content":"æ„Ÿè§‰è€å¸ˆæ²¡æœ‰åˆ»æ„æŠŠè¿›ç¨‹å’Œçº¿ç¨‹åˆ†çš„ç‰¹åˆ«æ¸…æ¥š","like_count":3},{"had_liked":false,"id":288625,"user_name":"è¿é•¿","can_delete":false,"product_type":"c1","uid":2047980,"ip_address":"","ucode":"555BD3DE57887F","user_header":"https://static001.geekbang.org/account/avatar/00/1f/3f/ec/00904faa.jpg","comment_is_top":false,"comment_ctime":1618565683,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10208500275","product_id":100056701,"comment_content":"AOFæŒä¹…åŒ–æœºåˆ¶<br>1ã€ä¸è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œç›´æ¥æ“ä½œå†…å­˜ï¼ŒæˆåŠŸåè®°å½•æ—¥å¿—ï¼›<br>2ã€ä¸»çº¿ç¨‹æŠŠæ—¥å¿—è®°å½•åˆ°AOFç¼“å­˜åŒºä¸­ï¼Œä¸è¿›è¡ŒæŒä¹…åŒ–ç£ç›˜ã€‚<br><br>åˆ·ç›˜ç­–ç•¥ï¼Œéƒ½ç”±å­çº¿ç¨‹æ‰§è¡Œ<br>1ã€Alwaysï¼Œæ¯æ‰§è¡Œä¸€æ¡å†™å…¥æ“ä½œï¼Œåˆ·æ–°ç¼“å­˜åŒºåˆ°ç£ç›˜ï¼›<br>2ã€Everysecï¼Œæ¯ç§’åˆ·æ–°ç¼“å­˜åŒºåˆ°ç£ç›˜ï¼›<br>3ã€Noï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å°†ç¼“å­˜åŒºå†…å­˜å†™å›ç£ç›˜ã€‚<br>ä¸‰ç§å†™å›ç­–ç•¥éƒ½æœ‰å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±<br><br>AOFé‡å†™<br>1ã€ä¸€ä¸ªæ‹·è´ï¼Œä¸¤å¤„æ—¥å¿—ï¼›<br>2ã€bgrewriteaofå­è¿›ç¨‹ï¼Œå¤åˆ¶å†…å­˜æ•°æ®ï¼ŒæŠŠå†…å­˜æ•°æ®å†™å…¥é‡å†™æ—¥å¿—ï¼›<br>3ã€AOFé‡å†™ç¼“å­˜ï¼Œä¿è¯æ•°æ®ä¸€è‡´ï¼›<br>4ã€æ›¿æ¢AOFæ—¥å¿—ï¼Œå®Œæˆé‡å†™ã€‚","like_count":2},{"had_liked":false,"id":283831,"user_name":"pippin","can_delete":false,"product_type":"c1","uid":1784022,"ip_address":"","ucode":"F7619FCE24D481","user_header":"","comment_is_top":false,"comment_ctime":1615949770,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10205884362","product_id":100056701,"comment_content":"æƒ³çŸ¥é“ï¼Œåœç”µä¼šå¯¼è‡´aofæ—¥å¿—æŸåï¼Œéœ€è¦ä½¿ç”¨redis-check-aofä¿®å¤ï¼Œåœ¨å“ªä¸ªç¯èŠ‚ä¼šå¯¼è‡´aofæ—¥å¿—æŸå","like_count":2,"discussions":[{"author":{"id":1295609,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJRFRX8kNzNet7FibNvtavbVpAwK09AhIhrib9k762qWtH6mre8ickP7hM5mgZC4ytr8NnmIfmAhxMSQ/132","nickname":"è€å¤§ä¸å°","note":"","ucode":"35BCDD3CB13467","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366103,"discussion_content":"åœ¨å†™å‘½ä»¤çš„æ—¶å€™ï¼Œå¯èƒ½åªå†™äº†ä¸€åŠï¼Œç„¶åæ–­ç”µäº†ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617960169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273131,"user_name":"CityAnimal","can_delete":false,"product_type":"c1","uid":1139902,"ip_address":"","ucode":"206491F70572AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/64/be/12c37d15.jpg","comment_is_top":false,"comment_ctime":1610450388,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10200384980","product_id":100056701,"comment_content":"ç¬”è®°æ‰“å¡<br><br>    * [ ] åŸç†<br>        * [ ] å†™åæ—¥å¿—<br>            * [ ] å¥½å¤„ï¼š<br>                * [ ] é¿å…å‡ºç°è®°å½•é”™è¯¯å‘½ä»¤çš„æƒ…å†µ<br>                * [ ] ä¸ä¼šé˜»å¡å½“å‰çš„å†™æ“ä½œ<br>            * [ ] é£é™©<br>                * [ ] æ‰§è¡Œå®Œå‘½ä»¤åå®•æœº =&amp;gt; æ•°æ®ä¸¢å¤±<br>                * [ ] ç»™ä¸‹ä¸€ä¸ªæ“ä½œå¸¦æ¥é˜»å¡é£é™©<br>                    * [ ] AOF æ—¥å¿—ä¹Ÿæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„<br>        * [ ] å†…å®¹ï¼šæ”¶åˆ°çš„æ¯ä¸€æ¡å‘½ä»¤ï¼Œä»¥æ–‡æœ¬å½¢å¼ä¿å­˜<br>            * [ ] å‘½ä»¤ï¼šset testkey testvalue<br>            * [ ] aof: *3\\n$3\\nset\\n$7\\ntestkey\\n$9\\ntestvalue<br>                * [ ] *3 : å½“å‰å‘½ä»¤æœ‰ä¸‰ä¸ªéƒ¨åˆ†<br>                * [ ] æ¯éƒ¨åˆ†éƒ½æ˜¯ç”±â€œ$+æ•°å­—â€å¼€å¤´ï¼Œåé¢ç´§è·Ÿç€å…·ä½“çš„å‘½ä»¤ã€é”®æˆ–å€¼<br>    * [ ] å†™å›ç­–ç•¥ &amp;lt;= é…ç½®é¡¹ appendfsync<br>        * [ ] Always(åŒæ­¥å†™å›)<br>            * [ ] åŸºæœ¬ä¸ä¸¢æ•°æ®<br>            * [ ] å½±å“ä¸»çº¿ç¨‹æ€§èƒ½<br>        * [ ] Everysec(æ¯ç§’å†™å›)<br>            * [ ] æ€§èƒ½é€‚ä¸­<br>            * [ ] å¦‚æœå‘ç”Ÿå®•æœºï¼Œä¸Šä¸€ç§’å†…æœªè½ç›˜çš„å‘½ä»¤æ“ä½œä»ç„¶ä¼šä¸¢å¤±<br>        * [ ] No(æ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›)<br>            * [ ] æ€§èƒ½å¥½<br>            * [ ] ä¸€æ—¦å®•æœºå‰AOF è®°å½•æ²¡æœ‰è½ç›˜ï¼Œå¯¹åº”çš„æ•°æ®å°±ä¸¢å¤±äº†<br>    * [ ] AOF æ–‡ä»¶è¿‡å¤§<br>        * [ ] æ€§èƒ½é—®é¢˜<br>            * [ ] æ–‡ä»¶ç³»ç»Ÿå¯¹æ–‡ä»¶å¤§å°æœ‰é™åˆ¶<br>            * [ ] è¿½åŠ å‘½ä»¤è®°å½•æ•ˆç‡ä½<br>            * [ ] æ•…éšœæ¢å¤éå¸¸ç¼“æ…¢<br>        * [ ] æ–¹æ¡ˆï¼šAOF é‡å†™æœºåˆ¶<br>            * [ ] åŸç†ï¼šæ ¹æ®redisçš„ç°çŠ¶åˆ›å»ºä¸€ä¸ªæ–°çš„ AOF æ–‡ä»¶<br>            * [ ] !!! éå¸¸è€—æ—¶ (ä¸é˜»å¡ä¸»çº¿ç¨‹)<br>                * [ ] ç”±åå°å­è¿›ç¨‹ bgrewriteaof æ¥å®Œæˆçš„<br>                * [ ] ä¸€ä¸ªæ‹·è´<br>                    * [ ] ä¸»çº¿ç¨‹ fork å‡º bgrewriteaof å­è¿›ç¨‹ï¼Œå¹¶å°†å†…å­˜æ‹·è´ç»™ bgrewriteaof<br>                * [ ] ä¸¤å¤„æ—¥å¿—<br>                    * [ ] æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—<br>                    * [ ] æ–°çš„ AOF é‡å†™æ—¥å¿—","like_count":2},{"had_liked":false,"id":263403,"user_name":"æ°¸è¿œçš„è‰è“åœ°","can_delete":false,"product_type":"c1","uid":1034001,"ip_address":"","ucode":"D4BD8DD42350CC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/11/89ba9915.jpg","comment_is_top":false,"comment_ctime":1606125629,"is_pvip":true,"discussion_count":4,"race_medal":0,"score":"10196060221","product_id":100056701,"comment_content":"redis AOF  appendfsync é€‰æ‹© always æ¨¡å¼æ—¶ï¼Œæ˜¯ç­‰ fsync å®Œæˆä¹‹åï¼Œæ‰è¿”å›æˆåŠŸï¼Œè¿˜æ˜¯è¯´å…ˆè¿”å›æˆåŠŸï¼Œä¹‹å å† fsync ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2933797,"avatar":"","nickname":"Geek_8b0800","note":"","ucode":"09D9692B62A691","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586915,"discussion_content":"æ ¹æ®ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹é‡Œçš„ä¼ªä»£ç æ˜¯ï¼šå…ˆè¿”å›ï¼Œå†æ‰§è¡Œ writeã€fsync","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662607757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ²³å—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387074,"discussion_content":"è€å¸ˆè¿™å—è®²é”™äº†ã€‚\nç®€å•è¯´ä¸€ä¸‹ï¼šå‘½ä»¤æ‰§è¡Œååªæ˜¯å†™å…¥ aof_buffã€‚Redis åœ¨ä¸»äº‹ä»¶å¾ªç¯é‡Œï¼Œä¼šå…ˆæ‰§è¡Œä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ£€æŸ¥ aof_buffï¼Œå¦‚æœæœ‰æ•°æ®ä¸”ä¸º Always ç­–ç•¥ï¼Œåˆ™å†™å…¥ç£ç›˜ã€‚è¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œæ‰ä¼šæ‰§è¡Œå…¶å®ƒå‡½æ•°ï¼ŒåŒ…æ‹¬å‘½ä»¤è¯·æ±‚ã€‚\næ‰€ä»¥ï¼Œå½“ AOF å›å†™ç­–ç•¥ä¸º Always æ—¶ï¼ŒæœåŠ¡å™¨å®•æœºï¼Œä¼šä¸¢å¤±ä¸€ä¸ªäº‹ä»¶å‘¨æœŸçš„å‘½ä»¤æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627975069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388274,"discussion_content":"æŒ‰åŸå­æ€§æ¥ç†è§£ï¼Œè¿™ç§ä¸ç®—æˆåŠŸæ“ä½œï¼Œæ•°æ®ä¸¢å¤±æ˜¯åº”è¯¥çš„ã€‚ä¾§é¢ä¹Ÿå¯ä»¥å›ç­”ä¸Šé¢é‚£ä¸ªåŒå­¦é—®é¢˜ç­‰ fsync å®Œæˆä¹‹åï¼Œæ‰è¿”å›æˆåŠŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628675864,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":387074,"ip_address":""},"score":388274,"extra":""}]},{"author":{"id":2104255,"avatar":"https://static001.geekbang.org/account/avatar/00/20/1b/bf/48de2ca3.jpg","nickname":"è„šè¸å®åœ°ï¼Œç ¥ç ºå‰è¡Œ","note":"","ucode":"273EAD9741748D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348415,"discussion_content":"æˆ‘ä¹Ÿå¾ˆå¥½å¥‡ï¼Œæœ‰æ²¡æœ‰å“ªä½å¤§ç¥å¯ä»¥æ¢å¤ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612538765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241827,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1597460015,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10187394607","product_id":100056701,"comment_content":"è€å¸ˆå¥½ï¼Œæœ¬æ–‡å¾ªåºæ¸è¿›ï¼Œçº¿è·¯æ¸…æ™°ï¼Œå®å±æ·±åº¦å¥½æ–‡ï¼Œä½†å¦‚â€œAOFéé˜»å¡çš„é‡å†™è¿‡ç¨‹â€å›¾ï¼Œæœ‰å‡ ä¸ªé—®é¢˜ï¼Œæœ›å›å¤ï¼Œè°¢è°¢ã€‚<br>1ã€å¦‚æœå†™å›ç­–ç•¥æ˜¯Alwaysï¼Œæ˜¯æ²¡æœ‰AOFç¼“å†²çš„ã€‚æ˜¯æ€ä¹ˆåšAOFé‡å†™å‘¢ï¼Ÿ<br>2ã€å›¾å³è¾¹éƒ¨åˆ†æœ‰å››ä¸ªæ—¥å¿—ï¼šä¸¤ä¸ªæ—¥å¿—ï¼Œä¸¤ä¸ªé‡å†™æ—¥å¿—ï¼Œè¯·é—®â€œä¸€ä¸ªæ‹·è´ï¼Œä¸¤ä¸ªæ—¥å¿—â€ä¸­çš„â€œæ—¥å¿—â€æ˜¯æŒ‡å››ä¸ªä¸­çš„å“ªä¸¤ä¸ªï¼Ÿ<br>3ã€aofç¼“å†²æ²¡æœ‰çº¿è¿åˆ°æœ€ä¸‹é¢çš„ç£ç›˜å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2903968,"avatar":"","nickname":"Geek_9e1c1a","note":"","ucode":"A79B61F7118DF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576622,"discussion_content":"1ã€å¦‚æœæ˜¯Alwayså†™å›ç­–ç•¥ï¼Œæ˜¯æ²¡æœ‰AOFç¼“å†²çš„ï¼Œéœ€è¦é©¬ä¸Šå†™å›åˆ°ç£ç›˜ä¸­ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœéœ€è¦å†™å…¥çš„æ•°æ®è¿‡å¤šï¼Œä¼šé˜»å¡ä¸»è¿›ç¨‹çš„æ‰§è¡Œã€‚å¦‚æœæ˜¯EverySecondå’ŒNOç­–ç•¥éƒ½æ˜¯æœ‰ç¼“å†²çš„ï¼Œè¿™ä¸ªæ—¶å€™æœ‰å¯èƒ½å®•æœºï¼Œä¸¢å¤±æ•°æ®äº†ã€‚\n2ã€Redisçš„é‡å†™æ ¹æœ¬å°±æ˜¯ä¸ºäº†å‡å°‘AOFæ—¥å¿—æ–‡ä»¶çš„å¤§å°ï¼ŒåŒæ—¶ä¸èƒ½å¯¹ä¸»è¿›ç¨‹æœ‰è¿‡å¤šçš„é˜»å¡ï¼Œè¿™ä¸ªæ—¶å€™forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å°±ä¼šå°†é‡å†™åçš„æ•°æ®å†™å…¥æ–°çš„AOFæ—¥å¿—æ–‡ä»¶ä¸­ï¼Œé‚£åœ¨é‡å†™çš„è¿‡ç¨‹ä¸­ï¼ŒRedisä¼šæŠŠæ–°å‘½ä»¤å­˜å‚¨åˆ°AOFé‡å†™ç¼“å†²åŒºï¼Œå½“å­è¿›ç¨‹ä¸­é‡å†™å®Œæˆä¹‹åï¼Œå°±ä¼šè¯»å–AOFé‡å†™ç¼“å†²åŒºçš„å†…å­˜è¿½åŠ åˆ°æ–°çš„AOFæ–‡ä»¶ä¸­ï¼Œæ­¤æ—¶AOFé‡å†™å®Œæˆä¹‹åï¼Œæ—§çš„AOFå°±ä¼šè¢«æ›¿æ¢ã€‚\næ³¨æ„åœ¨AOFé‡å†™çš„è¿‡ç¨‹ä¸­ï¼Œæ–°çš„å†™è¯·æ±‚è¿‡æ¥ï¼Œè¿˜æ˜¯ä¼šå¾€åŸæ¥çš„AOFæ—¥å¿—ä¸­å†™å…¥çš„ï¼Œä¸»è¦æ˜¯é˜²æ­¢AOFé‡å†™å¤±è´¥(é˜²æ­¢å®•æœºåé‡å†™ç¼“å†²åŒºçš„æ•°æ®ä¸¢å¤±ï¼‰ï¼Œè€Œä¸ä¼šå½±å“AOFæ—¥å¿—æ•°æ®çš„ä¸¢å¤±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655707264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388275,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ åº”è¯¥æ˜¯æœ‰ç¼“å­˜çš„ï¼Œä¸è¿‡æ˜¯è¢«ä¸»çº¿ç¨‹ç«‹åˆ»æ‰§è¡Œäº†ã€‚ä¸¤ä¸ªæ—¥å¿—åº”è¯¥æ˜¯aofæ—¥å¿—å’Œaofé‡æ–°æ—¥å¿—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628676035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241587,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1597366173,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"10187300765","product_id":100056701,"comment_content":"appendfsync: no æ˜¯ç³»ç»Ÿæ§åˆ¶è¿›è¡Œå†™ç£ç›˜ï¼Œè¿™é‡Œæ˜¯åˆ©ç”¨æ–‡ä»¶ç³»ç»Ÿçš„æœºåˆ¶å—ï¼Ÿ å¦‚æœæ˜¯åˆ©ç”¨çš„æ–‡ä»¶ç³»ç»Ÿçš„å“ªä¸ªåŠŸèƒ½ï¼Œ ä¸€èˆ¬å¤šä¹…è¿›è¡ŒæŒä¹…åŒ–å†™ç£ç›˜å‘¢ï¼Ÿ","like_count":2},{"had_liked":false,"id":316324,"user_name":"æ˜äººä¸åšæš—äº‹","can_delete":false,"product_type":"c1","uid":2805682,"ip_address":"","ucode":"10D845C54312C8","user_header":"https://static001.geekbang.org/account/avatar/00/2a/cf/b2/2a124ccc.jpg","comment_is_top":false,"comment_ctime":1634269983,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5929237279","product_id":100056701,"comment_content":"åœ¨AOFé‡å†™çš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹ä»ç„¶åœ¨è¿›è¡Œå†™å…¥å‘½ä»¤ï¼Œä¸”æ›´æ–°ç¬¬ä¸€ä¸ªAOFæ—¥å¿—ã€‚<br>å½“å­è¿›ç¨‹AOFé‡å†™ï¼Œå·²ç»å°†testkey1å†™å…¥åˆ°æ–°çš„AOFæ–‡ä»¶ä¸­äº†ï¼Œæ­¤æ—¶çˆ¶è¿›ç¨‹åˆå¼€å§‹æ‰§è¡Œ å˜æ›´ testkey1 å¯¹åº”çš„ valueã€‚é‚£ä¹ˆæœ€ç»ˆ æ—§çš„AOFæ–‡ä»¶ ä¼šæœ‰æ­¤è®°å½•ï¼Œä½†æ–°çš„AOFæ—¥å¿—æ–‡ä»¶åˆæ˜¯å¦‚ä½•å°†è¿™äº›è®°å½•æ•´åˆåœ¨ä¸€èµ·å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":289160,"user_name":"jzdayz","can_delete":false,"product_type":"c1","uid":1259280,"ip_address":"","ucode":"E84C0DFC53BE8A","user_header":"https://static001.geekbang.org/account/avatar/00/13/37/10/a8aa9acb.jpg","comment_is_top":false,"comment_ctime":1618898919,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5913866215","product_id":100056701,"comment_content":"forkå­è¿›ç¨‹ã€‚æ–°å¢ä¸€ä¸ªaofæ—¥å¿—<br>çˆ¶è¿›ç¨‹ç»§ç»­å¤„ç†redisçš„ç›¸å…³äº‹åŠ¡ï¼Œç„¶åå†™å…¥åŸæ¥çš„aof(aof-source)å’Œæ–°çš„aof(aof-new)<br>å­è¿›ç¨‹å¯¹aof-newè¿›è¡Œé‡å†™å‹ç¼©ï¼Œæœ€åæ›¿æ¢åŸæœ¬çš„aof-source<br><br>é—®é¢˜:<br>aof-sourceå’Œaof-newéƒ½æ˜¯æ–‡ä»¶å—ï¼Ÿ<br><br>å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹éƒ½ä¼šå¯¹aof-newè¿›è¡Œå¤„ç†ï¼Œè¿™æ ·ä¸ä¼šå‡ºé”™å—ï¼Ÿ<br><br>æœ€ååœ¨çˆ¶è¿›ç¨‹ä¸€ç›´è¿›è¡Œå†™å…¥aof-newçš„æƒ…å†µä¸‹ï¼Œå­è¿›ç¨‹çš„å‹ç¼©æ˜¯ä¼šæ®‹ç¼ºä¸€éƒ¨åˆ†çš„æ˜¯å§ï¼Ÿä¾‹å…¥aof-sourceè®°å½•äº†10æ¡è®°å½•ï¼Œæ­¤æ—¶è¿›è¡Œé‡å†™ï¼Œaof-newä¹Ÿæœ‰10æ¡è®°å½•ï¼Œå­è¿›ç¨‹å¯¹è¿™åæ¡è®°å½•è¿›è¡Œå‹ç¼©ï¼Œæ­¤æ—¶rediså—åˆ°å‘½ä»¤ï¼Œæ­¤æ—¶å†™å…¥aof-newå’Œaof-sourceï¼Œæ­¤æ—¶å­è¿›ç¨‹å‹ç¼©çš„è¿˜æ˜¯åŸæœ¬çš„10æ¡ï¼Ÿè¿˜æ˜¯è¯´é‡æ–°å¯¹11æ¡å‘½ä»¤è¿›è¡Œå‹ç¼©ï¼Ÿ","like_count":1},{"had_liked":false,"id":289136,"user_name":"Geek_77a14f","can_delete":false,"product_type":"c1","uid":2116919,"ip_address":"","ucode":"EB71258E219A6D","user_header":"","comment_is_top":false,"comment_ctime":1618886223,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5913853519","product_id":100056701,"comment_content":"å¦‚æœæ–‡ä»¶å¤ªå¤§ï¼Œä¹‹åå†å¾€é‡Œé¢è¿½åŠ å‘½ä»¤è®°å½•çš„è¯ï¼Œæ•ˆç‡ä¹Ÿä¼šå˜ä½ï¼Ÿ<br>è¿™ä¸ªæ˜¯ä»€ä¹ˆåŸå› ï¼Ÿç£ç›˜å¯»é“æ—¶é—´æ‹‰é•¿ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388272,"discussion_content":"åº”è¯¥æ˜¯ï¼Œæ¯•ç«Ÿæ‰“å¼€ä¸€ä¸ªè¶…å¤§æ–‡ä»¶ä¹Ÿæ˜¯å¾ˆå¡çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628675493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283946,"user_name":"é˜¿ç‰›","can_delete":false,"product_type":"c1","uid":1073236,"ip_address":"","ucode":"DC8C189FCF3289","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/54/b3eb605b.jpg","comment_is_top":false,"comment_ctime":1615992231,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5910959527","product_id":100056701,"comment_content":"ã€æ¯æ—¥æ‰“å¡ã€‘<br>ä»Šå¤©ä¸»è¦è®²çš„æ˜¯RedisæŒä¹…åŒ–AOFæœºåˆ¶ã€‚<br>RedisæŒä¹…åŒ–ä¸¤å¤§æœºåˆ¶ï¼šAOFï¼ˆAppend Only Fileï¼‰æ—¥å¿—å’Œ RDB å¿«ç…§ã€‚<br>AOFæ˜¯å…ˆrediså…ˆæ‰§è¡Œæ“ä½œï¼Œåœ¨å°†æ—¥å¿—ä¿å­˜åˆ°ç£ç›˜ä¸­ã€‚<br>AOFä¸¤å¤§å¥½å¤„ï¼š<br>1ã€é¿å…å‡ºç°è®°å½•é”™è¯¯å‘½ä»¤çš„æƒ…å†µï¼›<br>2ã€å®ƒæ˜¯åœ¨å‘½ä»¤æ‰§è¡Œåæ‰è®°å½•æ—¥å¿—ï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡å½“å‰çš„å†™æ“ä½œã€‚ï¼›<br>AOFä¸¤å¤§é£é™©ï¼š<br>1ã€è¿˜æ²¡æœ‰æ¥å¾—åŠè®°æ—¥å¿—å°±å®•æœºï¼Œå‘½ä»¤å’Œç›¸åº”æ•°æ®å°±ä¸¢å¤±äº†ï¼›<br>2ã€æ—¥å¿—å†™å…¥ç£ç›˜ï¼Œå½±å“åç»­AOFè½ç›˜æ“ä½œï¼›<br>[é‡ç‚¹]AOFçš„å·¥ä½œåŸç†ï¼š<br>1ã€Redis æ‰§è¡Œ fork() ï¼Œç°åœ¨åŒæ—¶æ‹¥æœ‰çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ã€‚<br>2ã€å­è¿›ç¨‹å¼€å§‹å°†æ–° AOF æ–‡ä»¶çš„å†…å®¹å†™å…¥åˆ°ä¸´æ—¶æ–‡ä»¶ã€‚<br>3ã€å¯¹äºæ‰€æœ‰æ–°æ‰§è¡Œçš„å†™å…¥å‘½ä»¤ï¼Œçˆ¶è¿›ç¨‹ä¸€è¾¹å°†å®ƒä»¬ç´¯ç§¯åˆ°ä¸€ä¸ªå†…å­˜ç¼“å­˜ä¸­ï¼Œä¸€è¾¹å°†è¿™äº›æ”¹åŠ¨è¿½åŠ åˆ°ç°æœ‰ AOF æ–‡ä»¶çš„æœ«å°¾,è¿™æ ·æ ·å³ä½¿åœ¨é‡å†™çš„ä¸­é€”å‘ç”Ÿåœæœºï¼Œç°æœ‰çš„ AOF æ–‡ä»¶ä¹Ÿè¿˜æ˜¯å®‰å…¨çš„ã€‚<br>4ã€å½“å­è¿›ç¨‹å®Œæˆé‡å†™å·¥ä½œæ—¶ï¼Œå®ƒç»™çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ï¼Œçˆ¶è¿›ç¨‹åœ¨æ¥æ”¶åˆ°ä¿¡å·ä¹‹åï¼Œå°†AOFé‡å†™ç¼“å­˜ä¸­çš„å†…å®¹å…¨éƒ¨å†™å…¥åˆ°æ–°çš„AOFæ–‡ä»¶ä¸­ã€‚<br>5ã€å¯¹æ–°çš„AOFæ–‡ä»¶è¿›è¡Œæ”¹åï¼ŒåŸå­çš„è¦†ç›–åŸæœ‰çš„AOFæ–‡ä»¶ï¼›å®Œæˆæ–°æ—§ä¸¤ä¸ªAOFæ–‡ä»¶çš„æ›¿æ¢ã€‚<br>é¢å¤–æ”¶è·ï¼š<br>å†™æ—¶å¤åˆ¶æœºåˆ¶ï¼ˆCopy-on-writeï¼Œç®€ç§°COWï¼‰æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºè®¾è®¡é¢†åŸŸçš„ä¼˜åŒ–ç­–ç•¥ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¦‚æœæœ‰å¤šä¸ªè°ƒç”¨è€…ï¼ˆcallersï¼‰åŒæ—¶è¦æ±‚ç›¸åŒèµ„æºï¼ˆå¦‚å†…å­˜æˆ–ç£ç›˜ä¸Šçš„æ•°æ®å­˜å‚¨ï¼‰ï¼Œä»–ä»¬ä¼šå…±åŒè·å–ç›¸åŒçš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„èµ„æºï¼Œç›´åˆ°æŸä¸ªè°ƒç”¨è€…è¯•å›¾ä¿®æ”¹èµ„æºçš„å†…å®¹æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šçœŸæ­£å¤åˆ¶ä¸€ä»½ä¸“ç”¨å‰¯æœ¬ï¼ˆprivate copyï¼‰ç»™è¯¥è°ƒç”¨è€…ï¼Œè€Œå…¶ä»–è°ƒç”¨è€…æ‰€è§åˆ°çš„æœ€åˆçš„èµ„æºä»ç„¶ä¿æŒä¸å˜ã€‚è¿™è¿‡ç¨‹å¯¹å…¶ä»–çš„è°ƒç”¨è€…éƒ½æ˜¯é€æ˜çš„ï¼ˆtransparentlyï¼‰ã€‚æ­¤ä½œæ³•ä¸»è¦çš„ä¼˜ç‚¹æ˜¯å¦‚æœè°ƒç”¨è€…æ²¡æœ‰ä¿®æ”¹è¯¥èµ„æºï¼Œå°±ä¸ä¼šæœ‰å‰¯æœ¬ï¼ˆprivate copyï¼‰è¢«åˆ›å»ºï¼Œå› æ­¤å¤šä¸ªè°ƒç”¨è€…åªæ˜¯è¯»å–æ“ä½œæ—¶å¯ä»¥å…±äº«åŒä¸€ä»½èµ„æºã€‚","like_count":1},{"had_liked":false,"id":282480,"user_name":"Fly^O^Tian","can_delete":false,"product_type":"c1","uid":2029875,"ip_address":"","ucode":"FC15E524AC9159","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f9/33/1c8df42c.jpg","comment_is_top":false,"comment_ctime":1615272989,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5910240285","product_id":100056701,"comment_content":"AOFæ—¥å¿—æ€»ç»“<br>1.å†™åæ—¥å¿—ï¼Œå†™å°†æ•°æ®å†™å…¥åˆ°å†…å­˜ï¼Œç„¶ååœ¨è®°å½•æ—¥å¿—ã€‚æ—¥å¿—è®°å½•çš„æ˜¯æ“ä½œå‘½ä»¤ã€‚å› ä¸ºredisæ‰§è¡Œè¿‡çš„å‘½ä»¤æ˜¯å·²ç»æ£€æŸ¥è¿‡çš„æ­£ç¡®å‘½ä»¤ï¼Œæ‰€ä»¥é¿å…äº†é”™è¯¯å‘½ä»¤çš„æƒ…å†µ<br>2.ä¸‰ç§å†™å›ç­–ç•¥ã€‚<br>always æ€»æ˜¯åŒæ­¥å†™å›æ—¥å¿—ï¼Œå¯é æ€§é«˜ï¼Œæ€§èƒ½å½±å“å¤§<br>everysec æ¯ç§’å†™å›ï¼Œä¼šä¸¢å¤±éƒ¨åˆ†æ•°æ® ï¼Œæ€§èƒ½é€‚ä¸­<br>no ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶å†™å›ï¼Œæ€§èƒ½é«˜ï¼Œä¸¢å¤±æ•°æ®å¤š<br>3.AOFé‡å†™<br>ç”±äºæ“ä½œç³»ç»Ÿæ–‡ä»¶å¤§å°é™åˆ¶ï¼Œå¹¶ä¸”æ–‡ä»¶è¿‡å¤§å½±å“å†™å…¥æ€§èƒ½ï¼Œä¼šåœ¨è¿™æ—¶é‡å†™æ—¥å¿—ï¼Œé‡å†™æ—¥å¿—ç”±å­è¿›ç¨‹å®Œæˆ<br>ä¼šå°†redisæ•°æ®æ‹·è´ä¸€ä»½åˆ°å­è¿›ç¨‹ï¼Œä¸»çº¿ç¨‹çš„æ“ä½œä¼šåŒæ—¶å†™aofæ—¥å¿—å’Œaofé‡å†™æ—¥å¿—ï¼Œæ‹·è´å®Œæˆåæ–°æ—¥å¿—æ›¿ä»£æ—§çš„æ—¥å¿—","like_count":1},{"had_liked":false,"id":268764,"user_name":"é™ˆå¤§å¤´","can_delete":false,"product_type":"c1","uid":1335400,"ip_address":"","ucode":"F1CA8837BF1E5C","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/68/626cb455.jpg","comment_is_top":false,"comment_ctime":1608343373,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5903310669","product_id":100056701,"comment_content":"æˆ‘æƒ³é—®ä¸€ä¸‹é‚£ä¸ªEverysecä¹Ÿæ˜¯ä¸»çº¿ç¨‹å»å¤„ç†çš„å—ï¼Ÿé‚£ä¸€ç§’å†™å…¥å¤šä¸ªå‘½ä»¤ï¼Œå¦‚æœé‡åˆ°bigkeyï¼Œæ˜¯ä¸æ˜¯ä¸€æ ·æœ‰å¯èƒ½æœ‰é˜»å¡é£é™©","like_count":1,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388273,"discussion_content":"åªæœ‰alwaysæ˜¯ä¸»çº¿ç¨‹å¤„ç†çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628675599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373200,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620649974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267033,"user_name":"main","can_delete":false,"product_type":"c1","uid":1293581,"ip_address":"","ucode":"9E0B806245F11E","user_header":"https://static001.geekbang.org/account/avatar/00/13/bd/0d/f4799191.jpg","comment_is_top":false,"comment_ctime":1607577213,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5902544509","product_id":100056701,"comment_content":"è€å¸ˆæ²¡æœ‰æåˆ°åœ¨é‡å†™æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹å…¶å®æ˜¯é€šè¿‡pipeç®¡é“å°†é‡å†™æ—¶å€™çš„å·®å¼‚æ•°æ®å†™åˆ°å­è¿›ç¨‹çš„ï¼Œå­è¿›ç¨‹ä¼šå—åˆ°pipeç®¡é“çš„å·®å¼‚æ•°æ®ï¼Œç„¶åå†è¿½åŠ åˆ°æ–°çš„aofä¸­ï¼Œåœ¨å­è¿›ç¨‹å®Œæˆé‡å†™åï¼Œçˆ¶è¿›ç¨‹çš„å·®å¼‚æ•°æ®ä¼šéå¸¸å°çš„ï¼Œè¿™æ ·çˆ¶è¿›ç¨‹å†æ¬¡å°†å·®å¼‚æ•°æ®è¿½åŠ è¿›aofä¸­å°±ä¸ä¼šå¯¼è‡´é•¿æ—¶é—´é˜»å¡äº†","like_count":1},{"had_liked":false,"id":266848,"user_name":"å‘¨æ˜Ÿå¹³","can_delete":false,"product_type":"c1","uid":1494880,"ip_address":"","ucode":"1FDCB487392B03","user_header":"https://static001.geekbang.org/account/avatar/00/16/cf/60/9100ad4f.jpg","comment_is_top":false,"comment_ctime":1607505469,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5902472765","product_id":100056701,"comment_content":"https:&#47;&#47;www.pianshen.com&#47;article&#47;1391301224&#47;è¿™ä¸ªè®²é‡å†™aofå¾ˆæ¸…æ¥š","like_count":1,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338255,"discussion_content":"åšæ–‡æ˜¯<<Redisè®¾è®¡ä¸å®ç°>>ä¹¦é‡Œé¢çš„å†…å®¹,ä¸€æ¨¡ä¸€æ ·æ¨èç›´æ¥çœ‹ä¹¦å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609224619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249641,"user_name":"è§","can_delete":false,"product_type":"c1","uid":1229143,"ip_address":"","ucode":"0C2239867AFF5F","user_header":"https://static001.geekbang.org/account/avatar/00/12/c1/57/27de274f.jpg","comment_is_top":false,"comment_ctime":1600738448,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"5895705744","product_id":100056701,"comment_content":"### RedisæŒä¹…åŒ–ä¹‹AOFæ—¥å¿—<br>AOFæ—¥å¿—æ˜¯å†™åæ—¥å¿—ï¼šå…ˆæ‰§è¡Œå‘½ä»¤ï¼Œæ•°æ®å†™å…¥å†…å­˜ï¼Œåœ¨å†™æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ“ä½œå‘½ä»¤<br>ä¸ºäº†é¿å…é¢å¤–çš„å‘½ä»¤æ£€æŸ¥å¼€é”€ï¼Œç¡®è®¤åå­—æ­£ç¡®ä¸”æˆåŠŸæ‰§è¡Œåå†™AOFæ—¥å¿—ï¼Œé¿å…è®°å½•é”™è¯¯å‘½ä»¤ï¼›ä¹Ÿä¸ä¼šé˜»å¡å½“å‰å†™æ“ä½œ<br><br>AOFæ—¥å¿—ä¸‰ç§å†™å›ç­–ç•¥ï¼š<br>- Always åŒæ­¥å†™å›ï¼šä¸€æ“ä½œä¸€å†™ï¼Œæ…¢è½ç›˜æ“ä½œï¼Œå½±å“æ€§èƒ½<br>- Everysec æ¯ç§’å†™å›ï¼šä¸€ç§’ä¸€å†™ï¼Œä¸­å’Œä¸Šä¸‹ä¸¤ç§å†™å›ï¼Œæ€§èƒ½é€‚ä¸­ï¼Œå¯èƒ½ä¸¢å¤±ä¸€ç§’æ•°æ®<br>- No æ“ä½œç³»ç»Ÿæ§åˆ¶å†™å›ï¼šå†™å…¥å†…å­˜ç¼“å†²åŒºï¼Œç”±æ“ä½œç³»ç»Ÿæ§åˆ¶å†™ç£ç›˜ï¼Œæ€§èƒ½å¥½ï¼Œæœ‰æ•°æ®ä¸¢å¤±çš„å¯èƒ½æ€§<br><br>AOFå¤§æ–‡ä»¶çš„AOFé‡å†™ï¼šå°†å¤šæ¡å‘½ä»¤åˆå¹¶ä¸ºä¸€æ¡å‘½ä»¤ï¼›ä½¿ç”¨å¦å¤–çš„åå°è¿›è¡Œæ“ä½œï¼›é‡å†™æ—¶æ‹·è´æ—§AOFæ–‡ä»¶ï¼Œè¿›è¡Œæ“ä½œï¼Œæ–°çš„æ“ä½œåŒæ—¶å†™å…¥æ–°æ—§æ–‡ä»¶ï¼Œå®Œæˆåæ–°æ—§äº¤æ›¿","like_count":1},{"had_liked":false,"id":241753,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1597410478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5892377774","product_id":100056701,"comment_content":"aofé‡å†™ï¼Œæˆ‘ç†è§£æŒ‰å¦‚ä¸‹æ“ä½œä¹Ÿè¡Œï¼š<br><br>bgrewriteaofçº¿ç¨‹ç›´æ¥æ“ä½œç£ç›˜çš„aofæ–‡ä»¶ï¼Œä¸»çº¿ç¨‹è¿˜æ˜¯å†™åŸæ¥çš„ç¼“å­˜ã€‚","like_count":1},{"had_liked":false,"id":241178,"user_name":"ç§‹æ¢µ","can_delete":false,"product_type":"c1","uid":1464835,"ip_address":"","ucode":"129DA4E9886D2E","user_header":"https://static001.geekbang.org/account/avatar/00/16/5a/03/b27f72b6.jpg","comment_is_top":false,"comment_ctime":1597209031,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"5892176327","product_id":100056701,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸ªé—®é¢˜æƒ³é—®ã€‚æ–‡ç« é‡Œè¯´ï¼Œåœ¨å­è¿›ç¨‹è¿›è¡Œé‡å†™æœŸé—´ï¼Œå¦‚æœæœ‰æ–°çš„å†™æ“ä½œï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚ä½†æ˜¯ç¼“å†²åŒºä¹Ÿæ˜¯å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œå¦‚æœå®•æœºï¼Œå†…å­˜çš„æ•°æ®ä¼šä¸¢å¤±ï¼Œæ–°çš„å†™æ“ä½œåŒæ ·ä¼šä¸¢å¤±ï¼Œè¿™æ ·çš„è¯è¦æ€ä¹ˆä¿è¯AOFçš„æ—¥å¿—æ“ä½œæ˜¯é½å…¨çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1182802,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0c/52/f25c3636.jpg","nickname":"é•¿è„–å­æ ‘","note":"","ucode":"D9090EF67EEB1B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309776,"discussion_content":"è¿™ç¯‡æ–‡ç« ä¸­çš„å›¾æœ‰é—®é¢˜\nfork å‡ºå­è¿›ç¨‹ä¹‹å, æ–°å¢åŠ çš„æ•°æ®å¹¶ä¸åªæ”¾åœ¨ AOF é‡å†™ç¼“å­˜ ä¸­,  AOF åŸæ–‡ä»¶æ—¥å¿—ä¹Ÿä¼šåŒæ—¶å†™å…¥, è¿™æ ·åšçš„å¥½å°±æ˜¯ å°½å¯èƒ½å‡å°‘åœ¨å®•æœºæ—¶çš„æ•°æ®ä¸¢å¤±\nè€Œä¸”è¿›ç¨‹é—´æ˜¯å†…å­˜éš”ç¦»çš„, å­è¿›ç¨‹æ˜¯æ‹¿ä¸åˆ°AOFé‡å†™ç¼“å­˜, é‚£æ€ä¹ˆä¿è¯æ•°æ®ä¸€è‡´å‘¢?\nå½“å­è¿›ç¨‹å®Œæˆ AOF é‡å†™ä¹‹å, å®ƒä¼šå‘çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªå®Œæˆä¿¡å·ï¼Œçˆ¶è¿›ç¨‹åœ¨æ¥åˆ°å®Œæˆä¿¡å·ä¹‹åï¼Œ ä¼šè°ƒç”¨ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œ å¹¶å®Œæˆä»¥ä¸‹å·¥ä½œï¼š\n1. å°† AOF é‡å†™ç¼“å­˜ä¸­çš„å†…å®¹å…¨éƒ¨å†™å…¥åˆ°æ–° AOF æ–‡ä»¶ä¸­ã€‚\n2. å¯¹æ–°çš„ AOF æ–‡ä»¶è¿›è¡Œæ”¹åï¼Œè¦†ç›–åŸæœ‰çš„ AOF æ–‡ä»¶ã€‚\nhttps://redisbook.readthedocs.io/en/latest/internal/aof.html","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1601435040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307441,"discussion_content":"\nä¸çŸ¥é“æˆ‘è¿™æ ·è¯´çš„å¯¹ä¸å¯¹ã€‚ appendfsyncè®¾ç½®çš„æ˜¯alwaysï¼Œå°±æ˜¯åŒæ­¥å†™å›ï¼Œåœ¨bgrewriteaofå­è¿›ç¨‹é‡å†™æ—¥å¿—æ—¶ï¼Œå¦‚æœæœ‰æ—¥å¿—æ•°æ®å†™å…¥ï¼Œä¸»è¿›ç¨‹è¿˜æ˜¯ç›´æ¥åŒæ­¥å°†æ“ä½œå†™å›åŸæ¥çš„æ—¥å¿—æ–‡ä»¶ï¼Œè€Œåœ¨bgrewriteaofå­è¿›ç¨‹ä¸­æ˜¯æ²¡æœ‰è¿™ä»½æ•°æ®çš„ï¼Œä¸»è¿›ç¨‹æ˜¯å¼€äº†ä¸€ç‰‡ç¼“å­˜åŒºä¿å­˜è¿™ä»½æ•°æ®çš„ï¼Œåœ¨bgrewriteaofå­è¿›ç¨‹é‡å†™æ—¥å¿—å®Œæˆï¼Œå†å°†è¿™ä»½ç¼“å­˜å†™å…¥æ–°çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæœ€åæ›¿æ¢æ‰åŸæ¥çš„æ—¥å¿—æ–‡ä»¶ã€‚å¦‚æœåœ¨é‡å†™æ—¥å¿—æ—¶å®•æœºï¼Œæ—¥å¿—æ–‡ä»¶è¿˜æ˜¯åŸæ¥é‚£ä¸ªã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1600651542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1145779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7b/b3/194f7f90.jpg","nickname":"æ²¡ä¼çš„å­©å­å¾—ä½¿åŠ²å¥”è·‘","note":"","ucode":"D015B4EF12E536","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338015,"discussion_content":"åº”è¯¥æ˜¯è¿™ä¸ªé“ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609153682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":307441,"ip_address":""},"score":338015,"extra":""},{"author":{"id":1344535,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOn7k48KXia5rf0eXpzv2EGtqGibz3eNb8QnL8X72uia0g1rBwzXef4dV2JEdz3r4bu9GC1FLIeic4UA/132","nickname":"Lee","note":"","ucode":"6B8D59A0B1A1A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393230,"discussion_content":"ä¸æ˜¯ç®€å•çš„æ›¿æ¢å§ï¼Œå­è¿›ç¨‹ä¸­çš„æ—¥å¿—æ˜¯å…¨é‡çš„ï¼Œç¼“å­˜ä¸­æ˜¯å¢é‡çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631321817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":307441,"ip_address":""},"score":393230,"extra":""}]},{"author":{"id":1797149,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6c/1d/3e834742.jpg","nickname":"Mr.Cool","note":"","ucode":"1347C0F297F0B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302259,"discussion_content":"è¿½é—®+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598861700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241173,"user_name":"test","can_delete":false,"product_type":"c1","uid":1065849,"ip_address":"","ucode":"9A4973E591DD12","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","comment_is_top":false,"comment_ctime":1597208042,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5892175338","product_id":100056701,"comment_content":"1.forkæ—¶å€™çš„å¼€é”€<br>2.å¦‚æœä½¿ç”¨åŒä¸€ä¸ªæ–‡ä»¶ä¼šéœ€è¦æœ‰æ–‡ä»¶é”çš„ç«äº‰","like_count":1},{"had_liked":false,"id":241159,"user_name":"yyl","can_delete":false,"product_type":"c1","uid":1170843,"ip_address":"","ucode":"1741DACDFCA9AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","comment_is_top":false,"comment_ctime":1597204855,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5892172151","product_id":100056701,"comment_content":"æé—®ï¼š<br>1. ä¸€ä¸ªæ‹·è´ï¼šæ‹·è´æ˜¯å½“å‰rediså®ä¾‹ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹å—ï¼Ÿ<br>2. &quot;ç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚&quot;<br>è¿™é‡Œæè¿°å¾—ä¸å‡†ç¡®å§ï¼Ÿæ“ä½œè®°å½•å†™åˆ°ç¼“å­˜ä¸­ï¼Œå®•æœºä¹Ÿæ˜¯ä¼šä¸¢å¤±çš„ï¼Œæ­£åœ¨ä½¿ç”¨çš„AOFæ—¥å¿—ä¹Ÿæ— æ³•ä¿è¯è®°å½•ä¸ä¸¢å¤±<br><br>3.1 æ‹·è´æ•°æ®çš„æ“ä½œè®°å½•é‡å†™å®Œæˆåï¼Œå‘ç”Ÿåœ¨æ‹·è´æ•°æ®åçš„é‚£äº›æœ€æ–°æ“ä½œ æ‰ä¼šè¢«å†™å…¥æ–°AOFæ–‡ä»¶ä¸­ï¼Œè¿™ä¸¤ä¸ªåŠ¨ä½œæ˜¯ä¸²è¡Œçš„ï¼Ÿ<br>3.2 å¦‚æœæ‹·è´æ•°æ®çš„æ“ä½œè®°å½•å°šæœªå®Œæˆï¼Œredisé‡å¯äº†ï¼Œåº”è¯¥åŒæ ·ä¼šå‘ç”Ÿè®°å½•ä¸¢å¤±å§<br>3.3 å½“ä¸¤å¤„æ—¥å¿— éƒ½å­˜åœ¨æ—¶ï¼Œredisä»å“ªä»½AOFæ—¥å¿—æ¢å¤ï¼Ÿ<br>3.4 AOFæ—¥å¿—é‡å†™ åªåœ¨AOFè¶³å¤Ÿå¤§æ—¶æ‰è§¦å‘ï¼Ÿè¿˜æ˜¯ä¸€æ—¦å¼€å¯AOFæŒä¹…åŒ–åŠŸèƒ½ï¼Œå°±ä¼šåŒæ—¶è¿›è¡Œé‡å†™ï¼Ÿ<br><br>4. å¦‚æœAOFæ—¥å¿—æŸåäº†ï¼Œrediså®ä¾‹é‡å¯æ¢å¤ä¼šæ€æ ·å‘¢ï¼Ÿ<br>5. ä¸ç®¡é‡‡ç”¨æ€æ ·çš„æŒä¹…åŒ–æ–¹æ¡ˆï¼Œæƒ³ä¿è¯ç¼“å­˜ä¸­ æ•°æ®ä¸ä¸¢å¤±æ˜¯ä¸å¯èƒ½ï¼Œæ¯•ç«Ÿå­˜åœ¨å„ç§å„æ ·çš„å¼‚å¸¸ï¼Œæ„Ÿè§‰å¦‚æœredisä½œä¸ºæ•°æ®åº“ä½¿ç”¨ï¼Œåªé€‚ç”¨äº å…è®¸éƒ¨åˆ†æ•°æ®ä¸¢å¤± çš„åº”ç”¨åœºæ™¯ã€‚æ˜¯è¿™æ ·å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1170843,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","nickname":"yyl","note":"","ucode":"1741DACDFCA9AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298306,"discussion_content":"1. æš‚æœªæƒ³å‡ºæ¥\n\nè‡ªæˆ‘è§£ç­”ï¼š\n2. ç­”ï¼šè¿™é‡Œå†™çš„ç¼“å†²åŒºï¼Œæ˜¯è¦è¿½åŠ è‡³é‡å†™æ—¥å¿—çš„å†™å…¥å‘½ä»¤ï¼Œå› æ­¤æ­£åœ¨ä½¿ç”¨çš„æ—¥å¿—æ˜¯æœ€æ–°æœ€å…¨çš„\n\n3.1 ç­”ï¼šæŸ¥é˜…Rediså®˜æ–¹æ–‡æ¡£ï¼šå­è¿›ç¨‹å®Œæˆé‡å†™åï¼Œå‘çˆ¶è¿›ç¨‹å‘é€é‡å†™å®Œæˆä¿¡å·ï¼Œç”±çˆ¶è¿›ç¨‹å°†æœ€æ–°æ“ä½œè¿½åŠ è‡³æ–°AOFæ–‡ä»¶\n3.2 ç­”ï¼šæ­¤æ—¶åªä¼šé€ æˆé‡å†™å¤±è´¥ï¼ŒRedisä¼šä»ç°æœ‰çš„AOFæ—¥å¿—æ¢å¤æ•°æ®\n3.3 ç­”ï¼šRedisçš„æ–‡ä»¶æ›¿æ¢æ˜¯åŸå­æ“ä½œï¼Œç”¨äºæ¢å¤çš„æ–‡ä»¶åªæœ‰ä¸€ä»½\n3.4 ç­”ï¼šé‡å†™æœºåˆ¶çš„å¼•å…¥ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³AOFæ–‡ä»¶è¿‡å¤§å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼ŒçŒœæµ‹åº”è¯¥æ˜¯æ–‡ä»¶è¿‡å¤§æ—¶ï¼Œè§¦å‘é‡å†™\n\n4.ç­”ï¼šRedisæä¾›å·¥å…·ç”¨äºæ¢å¤çš„\n5.ç­”ï¼šè¿™å¾—çœ‹Redisçš„åº”ç”¨åœºæ™¯ï¼š\nç”¨ä½œç¼“å­˜ï¼Œç¼“å­˜ä¸¢å¤±ï¼Œå¯ä»¥ä»å…³ç³»å‹æ•°æ®åº“æ¢å¤ï¼Œå› æ­¤ç³»ç»Ÿè®¾è®¡éœ€è¦è€ƒè™‘ç¼“å­˜æ•°æ®ä¸¢å¤±ï¼Œå¦‚ä½•ä»æ•°æ®åº“æ¢å¤ã€‚\nç”¨ä½œæ•°æ®åº“ï¼ŒæŠŠRediså½“åšæ•°æ®åº“ï¼Œå¿…é¡»å¾—ä½¿ç”¨ç£ç›˜æŒä¹…åŒ–æœºåˆ¶æ‰è¡Œï¼Œä»ä»¥ä¸Šçš„å­¦ä¹ ä¸­äº†è§£åˆ°AOFå­˜åœ¨ä¸€å®šçš„æ•°æ®ä¸¢å¤±é£é™©","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597242559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1074742,"avatar":"https://static001.geekbang.org/account/avatar/00/10/66/36/b4a4e6fb.jpg","nickname":"Edon du","note":"","ucode":"1648624751AAE9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360632,"discussion_content":"ä¸€ä¸ªæ‹·è´ï¼šæŒ‡çš„æ˜¯forkå­è¿›ç¨‹ï¼Œcopyçš„æ˜¯å½“å‰rediså®ä¾‹å†…å­˜ä¸­å­˜å‚¨çš„æœ€æ–°çš„å€¼ï¼Œä½†ä¸æ˜¯çœŸæ­£çš„å¼€è¾Ÿä¸€ä»½å†…å­˜copyå†…å­˜çš„æ•°æ®ï¼Œè€Œæ˜¯copyä¸»çº¿ç¨‹å†…å­˜å€¼åœ°å€çš„æ˜ å°„è¡¨ï¼Œå¯ä»¥ç†è§£ä¸ºå¤šäº†ä¸€ä¸ªå†…å­˜æŒ‡é’ˆã€‚\nè¿™ä¸ªcopyçš„è¿‡ç¨‹ä¸­ä¸»çº¿ç¨‹æ˜¯ä¸èƒ½æ“ä½œçš„ï¼Œå½“copyå®Œæˆåï¼Œä¸»çº¿ç¨‹ä»ç„¶ä¼šæœ‰æ•°æ®æ›´æ–°æ“ä½œæµå…¥ï¼Œè¿™æ—¶å€™ï¼Œä¸»çº¿ç¨‹éœ€è¦å¼€è¾Ÿé¢å¤–çš„å†…å­˜ç©ºé—´æ¥ç»´æŠ¤è¿™ä¸ªkeyï¼Œå­è¿›ç¨‹ç”¨æ¥é‡å†™AOFå°±è¡Œäº†ï¼Œæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616494326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241143,"user_name":"yyl","can_delete":false,"product_type":"c1","uid":1170843,"ip_address":"","ucode":"1741DACDFCA9AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","comment_is_top":false,"comment_ctime":1597200948,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5892168244","product_id":100056701,"comment_content":"è§£ç­”ï¼š<br>1. å­˜åœ¨é˜»å¡é£é™©ï¼Œforkè¿›ç¨‹ç›¸å¯¹è€Œè¨€æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ…¢çš„æ“ä½œï¼Œè€Œä¸”å­˜åœ¨å¤§ç‰‡çš„å†…å­˜æ‹·è´ï¼Œè¿™ä¼šå½±å“åˆ°ä¸»çº¿ç¨‹çš„è¯·æ±‚å¤„ç†æ€§èƒ½<br>2. å…±äº«çš„è¯ï¼Œä¸¤ä¸ªè¿›ç¨‹ä¼šè¯»å†™åŒä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœä¸å¢åŠ è¿›ç¨‹é”çš„è¯ï¼Œå¤šä¸ªè¿›ç¨‹å†™æ—¥å¿—çš„æ—¶åºæ— æ³•ä¿è¯ï¼›è€ŒåŠ é”ï¼Œåˆä¼šå½±å“åˆ°å„è‡ªçš„å†™æ—¥å¿—æ•ˆç‡ï¼Œä¸”ä¼šå½±å“ä¸»çº¿ç¨‹çš„è¯·æ±‚å¤„ç†æ€§èƒ½","like_count":1,"discussions":[{"author":{"id":1170843,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","nickname":"yyl","note":"","ucode":"1741DACDFCA9AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301924,"discussion_content":"å‡ èŠ‚è¯¾çš„é—®é¢˜çœ‹ä¸‹æ¥ï¼Œæ·±æ„Ÿè‡ªå·±å¯¹äºæ“ä½œç³»ç»Ÿçš„çŸ¥è¯†ç†è§£ä¸å¤Ÿé€å½»ï¼Œå› æ­¤åœ¨åˆ†æé—®é¢˜æ—¶åªåœç•™åœ¨è¡¨é¢ï¼Œä¸å¤Ÿæ·±å…¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598709613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241105,"user_name":"1900","can_delete":false,"product_type":"c1","uid":1105774,"ip_address":"","ucode":"320D65D14817D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/df/6e/267bd6ee.jpg","comment_is_top":false,"comment_ctime":1597193253,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"5892160549","product_id":100056701,"comment_content":"â€œè€Œç¬¬äºŒå¤„æ—¥å¿—ï¼Œå°±æ˜¯æŒ‡æ–°çš„ AOF é‡å†™æ—¥å¿—ã€‚è¿™ä¸ªæ“ä½œä¹Ÿä¼šè¢«å†™åˆ°é‡å†™æ—¥å¿—çš„ç¼“å†²åŒºã€‚è¿™æ ·ï¼Œé‡å†™æ—¥å¿—ä¹Ÿä¸ä¼šä¸¢å¤±æœ€æ–°çš„æ“ä½œã€‚â€<br><br>ç¼“å†²åŒºæœ¬è´¨ä¸Šä¹Ÿæ˜¯å†…å­˜ï¼Œå®•æœºåå†…å­˜ä¸­çš„æ•°æ®éƒ½ä¼šä¸¢å¤±å§ï¼Ÿä¸ºå•¥å†™å…¥ç¼“å†²åŒºå°±ä¸ä¼šä¸¢äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1444698,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0b/5a/453ad411.jpg","nickname":"C.","note":"","ucode":"5AE269220EFD73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592017,"discussion_content":"æˆ‘æ˜¯è¿™æ ·ç†è§£çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667031810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1444698,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0b/5a/453ad411.jpg","nickname":"C.","note":"","ucode":"5AE269220EFD73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592015,"discussion_content":"å‘ç”Ÿé‡å†™åï¼Œè€AOFä¼šæŠŠæ–°æ“ä½œè®°å½•ä¸‹æ¥ï¼Œé‡å†™ç¼“å†²åŒºæŠŠæ–°çš„å†™æ“ä½œä¹Ÿè®°å½•ä¸‹äº†ï¼Œç„¶åå­è¿›ç¨‹é‡å†™å®Œï¼Œä¼šæŠŠè¿™ä¸ªé‡å†™ç¼“å†²åŒºçš„å†™çš„æ“ä½œè¿½åŠ åˆ°æ–°AOFçš„åé¢ï¼Œå½“å®•æœºåï¼Œæ–°çš„AOFå°±é‡å†™å¤±è´¥ï¼Œä½†è€AOFè¿˜æ˜¯æœ‰æœ€æ–°çš„è®°å½•çš„ã€‚å½“ç„¶AOFé‚£ä¸‰ä¸ªç­–ç•¥ä¹Ÿä¸æ˜¯å®Œç¾çš„ï¼Œè¿˜æ˜¯éœ€è¦è¡¥å¿çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667031753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359437,"user_name":"Geek_62d5df","can_delete":false,"product_type":"c1","uid":3197360,"ip_address":"åŒ—äº¬","ucode":"BCACE763B4789A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYmUib5xavd98HzH0mFnicrwWqJlyuu1pe1CdQ6tehpJPIFbNeKPtZVnZ1160WuibZQUGSI9KCpmVOg/132","comment_is_top":false,"comment_ctime":1665543167,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665543167","product_id":100056701,"comment_content":"å¤§ä½¬ä»¬æƒ³é—®ä¸€ä¸‹ï¼Œå¦‚æœé‡å†™AOFæ–‡ä»¶çš„æ—¶å€™çš„æ—¶å€™å¦‚æœå‘ç”Ÿæ–­ç”µï¼Œä¼šå‘ç”Ÿè„æ•°æ®å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":359382,"user_name":"Tim","can_delete":false,"product_type":"c1","uid":1480717,"ip_address":"æµ™æ±Ÿ","ucode":"3AAA9FD3D8DDDB","user_header":"https://static001.geekbang.org/account/avatar/00/16/98/0d/fb77a32c.jpg","comment_is_top":false,"comment_ctime":1665489337,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665489337","product_id":100056701,"comment_content":"æ±‚é—®ï¼Œæ¯ç§’å†™å›çš„ç­–ç•¥ï¼Œæ˜¯ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„å§ï¼Ÿé‚£è¿™ä¸ªæ¯ç§’åˆ·ç›˜çš„åŠ¨ä½œæ˜¯å¯çš„å­ä»»åŠ¡æ‰§è¡Œçš„ä¹ˆï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":358308,"user_name":"Geek_bd4376","can_delete":false,"product_type":"c1","uid":2910297,"ip_address":"å¹¿ä¸œ","ucode":"7C30E7538E281D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIxEuD0ytJhQUFGXxtric0OxtpFx95GYmkB9RMJXFsgH0eWKiayzTg91v3GpCHyRTc5outbwe5WBtng/132","comment_is_top":false,"comment_ctime":1664183848,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664183848","product_id":100056701,"comment_content":"AOFæ–‡ä»¶ä¸­å­˜å‚¨çš„æ˜¯redisçš„å‘½ä»¤ï¼ŒåŒæ­¥å‘½ä»¤åˆ° AOF æ–‡ä»¶çš„æ•´ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š<br>å‘½ä»¤ä¼ æ’­<br>å½“ä¸€ä¸ª Redis å®¢æˆ·ç«¯éœ€è¦æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œ å®ƒé€šè¿‡ç½‘ç»œè¿æ¥ï¼Œ å°†åè®®æ–‡æœ¬å‘é€ç»™ Redis æœåŠ¡å™¨ã€‚æœåŠ¡å™¨åœ¨<br>æ¥åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ä¹‹åï¼Œ å®ƒä¼šæ ¹æ®åè®®æ–‡æœ¬çš„å†…å®¹ï¼Œ é€‰æ‹©é€‚å½“çš„å‘½ä»¤å‡½æ•°ï¼Œ å¹¶å°†å„ä¸ªå‚æ•°ä»å­—ç¬¦ä¸²æ–‡<br>æœ¬è½¬æ¢ä¸º Redis å­—ç¬¦ä¸²å¯¹è±¡ï¼ˆ StringObject ï¼‰ã€‚æ¯å½“å‘½ä»¤å‡½æ•°æˆåŠŸæ‰§è¡Œä¹‹åï¼Œ å‘½ä»¤å‚æ•°éƒ½ä¼šè¢«ä¼ æ’­åˆ°<br>AOF ç¨‹åºã€‚<br>ç¼“å­˜è¿½åŠ <br>å½“å‘½ä»¤è¢«ä¼ æ’­åˆ° AOF ç¨‹åºä¹‹åï¼Œ ç¨‹åºä¼šæ ¹æ®å‘½ä»¤ä»¥åŠå‘½ä»¤çš„å‚æ•°ï¼Œ å°†å‘½ä»¤ä»å­—ç¬¦ä¸²å¯¹è±¡è½¬æ¢å›åŸæ¥çš„<br>åè®®æ–‡æœ¬ã€‚åè®®æ–‡æœ¬ç”Ÿæˆä¹‹åï¼Œ å®ƒä¼šè¢«è¿½åŠ åˆ° redis.h&#47;redisServer ç»“æ„çš„ aof_buf æœ«å°¾ã€‚<br>redisServer ç»“æ„ç»´æŒç€ Redis æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œ aof_buf åŸŸåˆ™ä¿å­˜ç€æ‰€æœ‰ç­‰å¾…å†™å…¥åˆ° AOF æ–‡ä»¶çš„å<br>è®®æ–‡æœ¬ï¼ˆRESPï¼‰ã€‚<br>æ–‡ä»¶å†™å…¥å’Œä¿å­˜<br>æ¯å½“æœåŠ¡å™¨å¸¸è§„ä»»åŠ¡å‡½æ•°è¢«æ‰§è¡Œã€ æˆ–è€…äº‹ä»¶å¤„ç†å™¨è¢«æ‰§è¡Œæ—¶ï¼Œ aof.c&#47;flushAppendOnlyFile å‡½æ•°éƒ½ä¼šè¢«<br>è°ƒç”¨ï¼Œ è¿™ä¸ªå‡½æ•°æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå·¥ä½œï¼š<br>WRITEï¼šæ ¹æ®æ¡ä»¶ï¼Œå°† aof_buf ä¸­çš„ç¼“å­˜å†™å…¥åˆ° AOF æ–‡ä»¶ã€‚<br>SAVEï¼šæ ¹æ®æ¡ä»¶ï¼Œè°ƒç”¨ fsync æˆ– fdatasync å‡½æ•°ï¼Œå°† AOF æ–‡ä»¶ä¿å­˜åˆ°ç£ç›˜ä¸­ã€‚","like_count":0},{"had_liked":false,"id":356749,"user_name":"Geek_b3b8da","can_delete":false,"product_type":"c1","uid":3065276,"ip_address":"æµ™æ±Ÿ","ucode":"5461CD95B1D764","user_header":"","comment_is_top":false,"comment_ctime":1662552392,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662552392","product_id":100056701,"comment_content":"æˆ‘çœ‹åˆ°ä½œè€…è¯´ â€œå› ä¸ºä¸»çº¿ç¨‹æœªé˜»å¡ï¼Œä»ç„¶å¯ä»¥å¤„ç†æ–°æ¥çš„æ“ä½œã€‚æ­¤æ—¶ï¼Œå¦‚æœæœ‰å†™æ“ä½œï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤â€ è¿™é‡Œé¢çš„ç¼“å†²åŒºæ˜¯æŒ‡çš„buffå—ï¼Ÿå¦‚æœæ˜¯buffçš„è¯æ ¹æ®å€ªæœ‹é£è€å¸ˆçš„å†…å­˜ç¯‡ç¬¬16ç¯‡è®²Buffer æ˜¯å¯¹ç£ç›˜æ•°æ®çš„ç¼“å­˜ï¼Œè€Œ Cache æ˜¯æ–‡ä»¶æ•°æ®çš„ç¼“å­˜ï¼Œå®ƒä»¬æ—¢ä¼šç”¨åœ¨è¯»è¯·æ±‚ä¸­ï¼Œä¹Ÿä¼šç”¨åœ¨å†™è¯·æ±‚ä¸­ï¼Œå¦‚æœæ˜¯ç»è¿‡æ–‡ä»¶ç³»ç»Ÿé‚£ä¹ˆæ•°æ®è‚¯å®šæ˜¯ç¼“å­˜åœ¨cacheé‡Œé¢é™¤éæ˜¯ç›´æ¥ioè·³è¿‡æ–‡ä»¶ç³»ç»Ÿæ•°æ®ä¼šç¼“å­˜åœ¨buffå½“ä¸­","like_count":0},{"had_liked":false,"id":356461,"user_name":"may_huang","can_delete":false,"product_type":"c1","uid":1451623,"ip_address":"åŒ—äº¬","ucode":"EAF989F18FC109","user_header":"https://static001.geekbang.org/account/avatar/00/16/26/67/c3d90f46.jpg","comment_is_top":false,"comment_ctime":1662343172,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662343172","product_id":100056701,"comment_content":"â€œå¦‚æœæ­¤æ—¶ Redis æ˜¯ç”¨ä½œç¼“å­˜ï¼Œè¿˜å¯ä»¥ä»åç«¯æ•°æ®åº“é‡æ–°è¯»å…¥æ•°æ®è¿›è¡Œæ¢å¤â€<br><br>ä¸å¤ªæ˜ç™½è¿™å¥è¯ï¼Œå¦‚æœRedisç”¨ä½œç¼“å­˜ï¼Œæ€ä¹ˆä»åç«¯æ•°æ®åº“é‡æ–°è¯»å…¥æ•°æ®è¿›è¡Œæ¢å¤ï¼Ÿè¿™ä¸ªåç«¯æ•°æ®åº“æ˜¯æŒ‡ä»€ä¹ˆæ•°æ®åº“ï¼Ÿ","like_count":0},{"had_liked":false,"id":355439,"user_name":"å•¦å•¦å•¦","can_delete":false,"product_type":"c1","uid":1356094,"ip_address":"åŒ—äº¬","ucode":"D0DA0D860B2746","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVMCWZkjAquAbQsBJLgtGgWAwh5BkX4tHgyysRDGbxomeH0AvsnCaVakEiauPPiaFHnTehgIOLkWEA/132","comment_is_top":false,"comment_ctime":1661390566,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1661390566","product_id":100056701,"comment_content":"è€å¸ˆå¥½  noå†™å›ç­–ç•¥ä¸everysecå†™å›ç­–ç•¥,æ˜¯ä¸æ˜¯åœ¨æŸç§æƒ…å†µä¸‹ä¸¢å¤±æ•°æ®ä¸ä¸€å®šæ˜¯everyä¸¢å¤±æ•°æ®è¾ƒå¤š?","like_count":0},{"had_liked":false,"id":355062,"user_name":"è”¡æ¬§","can_delete":false,"product_type":"c1","uid":1317604,"ip_address":"å¹¿ä¸œ","ucode":"39470A1DCAA7A9","user_header":"https://static001.geekbang.org/account/avatar/00/14/1a/e4/5e2a8190.jpg","comment_is_top":false,"comment_ctime":1661049455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661049455","product_id":100056701,"comment_content":"Rediså¦‚ä½•é¿å…æ•°æ®ä¸¢å¤±ï¼šAOFæ—¥å¿—<br>AOFæ—¥å¿—çš„ç¼ºç‚¹ï¼šå¯èƒ½ä¼šé˜»å¡åç»­Redisæ“ä½œ<br>å¦‚ä½•é™ä½å¯¹åç»­Redisåç»­æ“ä½œå½±å“ï¼šä½¿ç”¨å†™å…¥ç¼“å†²åŒºï¼Œç³»ç»Ÿåˆ·ç›˜ï¼Œç¼ºç‚¹ï¼šå¯èƒ½æœ‰æ•°æ®ä¸¢å¤±<br>å¦‚ä½•é¿å…AOFæ—¥å¿—å¤šå¤§ï¼Œè¶…è¿‡æ–‡ä»¶ç³»ç»Ÿæ–‡ä»¶é™åˆ¶æˆ–è€…è¿‡å¤§æ—¥å¿—æ–‡ä»¶å¯¼è‡´å†™å…¥ç¼“å­˜ï¼šä½¿ç”¨AOFé‡å†™ï¼Œæ›¿æ¢åŸAOFæ–‡ä»¶<br>AOFé‡å†™æ–‡ä»¶ä¸ºä»€ä¹ˆå°ï¼šAOFé‡å†™åªæ˜¯å°†Redisæ•°æ®å¯¼å‡ºï¼Œç›¸æ¯”AOFæ–‡ä»¶è®°å½•æ¯ä¸€æ¬¡æ“ä½œï¼Œä¼šå°å¾ˆå¤š<br>AOFé‡å†™åŸç†ï¼šforkä¸€ä¸ªbgwritelogè¿›ç¨‹ï¼Œå°†æ•°æ®å†™å…¥AOFé‡å†™æ–‡ä»¶ä¸­<br>AOFé‡å†™æ–‡ä»¶ä¼šä¸¢å¤±æ•°æ®å—ï¼šä¸ä¼šï¼Œä¸»çº¿ç¨‹çš„æ“ä½œä¼šåŒæ—¶å†™å…¥AOFæ–‡ä»¶å’ŒAOFé‡å†™æ–‡ä»¶ï¼Œä¸€æ‹·è´ä¸¤å†™å…¥<br>æ‰§è¡ŒAOFé‡å†™ä¼šä¸ä¼šå¯¼è‡´ä¸»çº¿ç¨‹æ“ä½œå˜æ…¢ï¼Œç”šè‡³é˜»å¡ï¼šä¼šçš„ï¼Œå› ä¸ºforkå­è¿›ç¨‹é‡‡ç”¨å†™æ—¶æ‹·è´ï¼Œå¦‚æœå†™å…¥æ•°æ®è¿‡å¤§æˆ–è€…å¼€å¯Huge Pageï¼Œå¯¼è‡´æ‹·è´å­è¿›ç¨‹æ•°æ®è¿‡å¤§ï¼Œä¼šå¯¼è‡´ä¸»è¿›ç¨‹æ“ä½œå˜æ…¢<br>AOFæ¢å¤éœ€è¦æ‰§è¡ŒAOFæ—¥å¿—æ‰€æœ‰å‘½ä»¤ï¼Œè¿‡ç¨‹å¾ˆæ…¢ï¼Œæœ‰å…¶ä»–çš„æ¢å¤æ‰‹æ®µå—ï¼šRDB","like_count":0},{"had_liked":false,"id":355000,"user_name":"tong96","can_delete":false,"product_type":"c1","uid":3070561,"ip_address":"æµ™æ±Ÿ","ucode":"04CA9D1BEC3569","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/mno5Csic4tevfH5icPib8MOR4DyYpujr3Gls6gibNHZChyDF4rTykdHxBDBssWHGNgwpAhvS90WLCOBbCNSQSgs9pw/132","comment_is_top":false,"comment_ctime":1660965057,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660965057","product_id":100056701,"comment_content":"bgrewriteaofæ˜¯å­è¿›ç¨‹è¿˜æ˜¯å­çº¿ç¨‹å•Š","like_count":0},{"had_liked":false,"id":354788,"user_name":"Geek_045c20","can_delete":false,"product_type":"c1","uid":2914350,"ip_address":"åŒ—äº¬","ucode":"3C446088613422","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/apXvlhZqT7NLxOYz63qZzHebzCMszx3jI56gvRVeq62fX1b3zHy6fao1UknvuqfUkHkbYG0YkOBfvqXmJBxffg/132","comment_is_top":false,"comment_ctime":1660787840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660787840","product_id":100056701,"comment_content":"é‡å†™æ˜¯ä»€ä¹ˆæ¡ä»¶ä¸‹è§¦å‘çš„å‘¢","like_count":0},{"had_liked":false,"id":348785,"user_name":"è§£å¿§","can_delete":false,"product_type":"c1","uid":2720795,"ip_address":"","ucode":"B9D5E46448A0D4","user_header":"https://static001.geekbang.org/account/avatar/00/29/84/1b/ad327fff.jpg","comment_is_top":false,"comment_ctime":1655391167,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655391167","product_id":100056701,"comment_content":"é—®é¢˜1ï¼šé‡å†™è¿‡ç¨‹ä¸­ï¼ŒAOFç¼“å†²åŒºä»¥åŠAOFé‡å†™ç¼“å†²åŒºçš„æ—¥å¿—æ˜¯å¦ä¼šå†™å…¥ç£ç›˜çš„æ—¥å¿—ï¼Ÿå¦‚æœæ˜¯ï¼ŒAOFé‡å†™æ—¥å¿—ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ<br>é—®é¢˜2ï¼šä¸¤å¤„æ—¥å¿—éƒ½æœ‰ç¼“å†²åŒºï¼Œè¿™ä¸ªç¼“å†²åŒºé»˜è®¤å¤§å°æ˜¯å¤šå°‘ï¼Ÿè°ƒæ•´å‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":348696,"user_name":"ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":2853618,"ip_address":"","ucode":"A52A6043D27D87","user_header":"https://static001.geekbang.org/account/avatar/00/2b/8a/f2/6c6f7886.jpg","comment_is_top":false,"comment_ctime":1655305516,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655305516","product_id":100056701,"comment_content":"redis æœ‰ rdbã€aofï¼Œå®•æœºåèƒ½æ¢å¤æ•°æ®ï¼Œä½†æ˜¯å¯èƒ½ä¼šå¯¼è‡´éƒ¨åˆ†æ•°æ®ä¸¢å¤±ã€‚å‡è®¾åŸæœ¬æœ‰ä¸€ä¸ªæ•°æ®ï¼ˆkey=aï¼Œvalue=xxxï¼‰ï¼Œä¹‹åæˆ‘æŠŠè¿™ä¸ªæ•°æ®ä¿®æ”¹æˆäº†ï¼ˆkey=aï¼Œvalue=yyyï¼‰ï¼Œä½†æ˜¯æ²¡æœ‰è¢« rdb è®°å½•ï¼Œå®•æœºé‡å¯åæ•°æ®è¢«æ¢å¤æˆäº†ï¼ˆkey=aï¼Œvalue=xxxï¼‰ã€‚å‡è®¾æˆ‘ç”¨ redis åšç¼“å­˜ï¼Œè¿™ä¸ªæ•°æ®åœ¨ mysql ä¸­ä¹Ÿæœ‰ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æ•°æ®åº“å’Œç¼“å­˜æ•°æ®ä¸ä¸€è‡´ï¼Œæœ‰ä»€ä¹ˆè§£å†³åŠæ³•å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":347638,"user_name":"æ¨±æ¡ƒæ±ã€‚","can_delete":false,"product_type":"c1","uid":2907715,"ip_address":"","ucode":"36EE9D8B9C5122","user_header":"https://static001.geekbang.org/account/avatar/00/2c/5e/43/004a52fa.jpg","comment_is_top":false,"comment_ctime":1654243464,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654243464","product_id":100056701,"comment_content":"æŠ±æ­‰åˆšæ²¡å†™å®Œï¼Œæ¥ç€å†™ï¼Œforkä¸€ä¸ªæ–°è¿›ç¨‹æŠŠæ‹·è´çš„é‚£ä»½REDISæ•°æ®å†™å…¥ç£ç›˜AOFé‡å†™æ–‡ä»¶ï¼ŒåŒæ—¶ä¸»çº¿ç¨‹çš„æ“ä½œä¼šè®°å½•åœ¨AOFç¼“å†²å’ŒAOFé‡å†™ç¼“å†²åŒºã€‚æ‹·è´çš„æ•°æ®é‡å†™å®Œæˆåï¼ŒAOFé‡å†™ç¼“å†²åŒºçš„æ•°æ®å¯ä»¥å†™å…¥åˆ°ç£ç›˜AOFé‡å†™æ–‡ä»¶ã€‚ä¹‹å‰çš„AOFç¼“å†²åŒºå’Œç£ç›˜AOFæ–‡ä»¶å¯ä»¥ä¸¢å¼ƒäº†","like_count":0},{"had_liked":false,"id":347636,"user_name":"æ¨±æ¡ƒæ±ã€‚","can_delete":false,"product_type":"c1","uid":2907715,"ip_address":"","ucode":"36EE9D8B9C5122","user_header":"https://static001.geekbang.org/account/avatar/00/2c/5e/43/004a52fa.jpg","comment_is_top":false,"comment_ctime":1654243068,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654243068","product_id":100056701,"comment_content":"1.ç¬¬ä¸€ä¸ªé—®é¢˜æƒ³ä¸åˆ°2.é‡å†™æ—¥å¿—è¦å’Œé‡å†™ä¿æŒä¸€è‡´ï¼Œä»¥åŠAOFæœ¬èº«æ—¥å¿—è¿‡å¤§ï¼Œæ‰€ä»¥ä¸å…±äº«ä½¿ç”¨3.ç®€å•æ€»ç»“äº†ä¸€ä¸‹æ—¥å¿—è®°å½•è¿‡ç¨‹ï¼Œé¦–å…ˆæ˜¯å‘½ä»¤å®Œæˆåï¼Œè¯¥å‘½ä»¤å­˜åˆ°å†…å­˜çš„AOFç¼“å†²åŒºï¼Œç„¶åå†å†™å…¥ç£ç›˜AOFæ–‡ä»¶ï¼Œå¦‚æœå®•æœºäº†ï¼ŒAOFç¼“å†²åŒºçš„æ•°æ®ä¼šä¸¢å¤±ã€‚é‡å†™æ—¶æ‹·è´ä¸€ä»½REDISæ•°æ®åœ¨å†…å­˜ï¼Œå¹¶å¼€è¾Ÿä¸€å—é‡å†™ç¼“å†²åŒºï¼ŒåŒæ—¶FORKä¸€ä¸ªè¿›ç¨‹æŠŠæ‹·è´çš„REDISæ•°æ®å½•å…¥ç£ç›˜é‡å†™AOFæ–‡ä»¶","like_count":0},{"had_liked":false,"id":346563,"user_name":"EUC Online Training","can_delete":false,"product_type":"c1","uid":2974598,"ip_address":"","ucode":"57129739EE55EB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/mYjoUy09Rbv8Pibic7ia60ib3upcdCUOgP97EQwApMdqL0Q9adnDcNd2kKMtfr1Uh62ia0YLUvp8eAXtFybNlK1yibUQ/132","comment_is_top":false,"comment_ctime":1653231288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653231288","product_id":100056701,"comment_content":"è¯·é—®é‡å†™å­è¿›ç¨‹åœ¨è¿›è¡ŒAOFé‡å†™æ—¶ä¼šå…ˆæŠŠæ—¥å¿—å†™åˆ°ç¼“å†²åŒºå—ï¼Ÿè¿˜æ˜¯ç›´æ¥å†™å…¥ç£ç›˜æ–‡ä»¶","like_count":0},{"had_liked":false,"id":344742,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1651744795,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651744795","product_id":100056701,"comment_content":"æƒ³è¦è·å¾—é«˜æ€§èƒ½ï¼Œå°±é€‰æ‹© No ç­–ç•¥ï¼›å¦‚æœæƒ³è¦å¾—åˆ°é«˜å¯é æ€§ä¿è¯ï¼Œå°±é€‰æ‹© Always ç­–ç•¥ï¼›å¦‚æœå…è®¸æ•°æ®æœ‰ä¸€ç‚¹ä¸¢å¤±ï¼Œåˆå¸Œæœ›æ€§èƒ½åˆ«å—å¤ªå¤§å½±å“çš„è¯ï¼Œé‚£ä¹ˆå°±é€‰æ‹© Everysec ç­–ç•¥","like_count":0},{"had_liked":false,"id":344483,"user_name":"å‡¯æ–‡å°çŒª","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1651581128,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651581128","product_id":100056701,"comment_content":"ç»“åˆè¯¾ä»£è¡¨å›ç­”è°ˆä¸€ä¸‹æˆ‘çš„ç­”æ¡ˆï¼š<br>1.forké¡µè¡¨é˜»å¡çš„é—®é¢˜ <br>è¿™é‡Œè¯¾ä»£è¡¨å·²ç»ç»™å‡ºäº†è¾ƒä¸ºè¯¦è¿°çš„è®ºè¯ ä¸ä½œè¿‡å¤šè¡¥å……<br>2.å­çº¿ç¨‹é¢‘ç¹fsync flush<br>å­çº¿ç¨‹åœ¨è½ç›˜tempæ–‡ä»¶æ—¶ï¼Œä¼šè°ƒç”¨flush fysncã€‚flushå®é™…ä¸Šæ˜¯æ¸…ç©ºç”¨æˆ·æ€ bufferï¼Œfsyncæ˜¯å¼ºåˆ¶è½ç›˜ã€‚<br>è¿™é‡Œä¼šæœ‰ä¸ªé—®é¢˜ è™½ç„¶å¯¹äºä¸»çº¿ç¨‹æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œä½†æ˜¯å†™ç›˜æ˜¯éœ€è¦cpu timeçš„ï¼Œæ‰€ä»¥é¢‘ç¹é«˜å¹¶å‘çš„å†™ç›˜ cpu loadä¼šè¢«æ‹‰é«˜ã€‚<br>åä¹‹ ä¸»çº¿ç¨‹çš„cpu timeå°±ä¼šå‡å°‘<br>3.ä¸»çº¿å›è°ƒäº‹ä»¶é‡Œrenameæ˜¯åŠ é”çš„ï¼Œå¦‚æœaofæ–‡ä»¶å¾ˆå¤§ ï¼Œé‚£ä¹ˆä¸»çº¿ç¨‹ä»¥åŠcpu loadåˆä¼šè¢«æ‹‰é•¿ã€‚","like_count":0},{"had_liked":false,"id":344152,"user_name":"ayi7664_","can_delete":false,"product_type":"c1","uid":2967743,"ip_address":"","ucode":"C80A21E7187BEE","user_header":"https://static001.geekbang.org/account/avatar/00/2d/48/bf/5c1018a2.jpg","comment_is_top":false,"comment_ctime":1651306543,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651306543","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªåœ°æ–¹ä¸æ˜ç™½ï¼Œæƒ³è¯·æ•™æ‚¨ä¸€ä¸‹ã€‚aofç¼“å†²åŒºï¼Œå’Œaofæ—¥å¿—ï¼Œæ˜¯ä¸€ä¸ªæ˜¯å†…å­˜çº§åˆ«çš„ï¼Œä¸€ä¸ªæ˜¯ç¡¬ç›˜çº§åˆ«çš„å—ï¼Ÿå‘½ä»¤æ˜¯ä¼šå…ˆè¿›å…¥oafç¼“å†²åŒºï¼Œå†æ ¹æ®å†™å›æœºåˆ¶ï¼Œå†™åˆ°aofæ—¥å¿—å—","like_count":0},{"had_liked":false,"id":343190,"user_name":"L.N","can_delete":false,"product_type":"c1","uid":2162414,"ip_address":"","ucode":"051D63CAFF42B2","user_header":"https://static001.geekbang.org/account/avatar/00/20/fe/ee/251ea1eb.jpg","comment_is_top":false,"comment_ctime":1650699386,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1650699386","product_id":100056701,"comment_content":"æˆ‘æƒ³é—®ä¸€ä¸‹ï¼ŒAOFé‡å†™ç¼“å†²åŒºï¼Œæ˜¯ä¸æ˜¯ä¹Ÿè¦è¿›è¡Œâ€œæ—§æ—¥å¿—æ–‡ä»¶ä¸­çš„å¤šæ¡å‘½ä»¤ï¼Œåœ¨é‡å†™åçš„æ–°æ—¥å¿—ä¸­å˜æˆäº†ä¸€æ¡å‘½ä»¤ã€‚â€ï¼Œé‚£ä¹ˆä¼šä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568505,"discussion_content":"ä¸è¿›è¡Œï¼Œç›´æ¥è¿½åŠ å³å¯ï¼›\nAOFé‡å†™æ­¥éª¤åˆ†ä¸‰å¤§æ­¥ï¼šæ ¹æ®å†…å­˜ç”ŸæˆAOFï¼Œåº”ç”¨ä¸Šä¸€æ­¥æœŸé—´äº§ç”Ÿçš„å¢é‡æ•°æ®ï¼Œå†åº”ç”¨ä¸Šä¸€æ­¥æœŸé—´äº§ç”Ÿçš„å¢é‡æ•°æ®ï¼›å…¶ä¸­å‰ä¸¤æ­¥åœ¨å­è¿›ç¨‹è¿›è¡Œï¼Œæœ€åä¸€æ­¥åœ¨ä¸»çº¿ç¨‹è¿›è¡Œï¼Œæ‰€ä»¥ä¼šé˜»å¡ï¼Œä½†æ˜¯ç¬¬ä¸‰æ­¥æ—¶é—´å¾ˆçŸ­ï¼Œå‡ ä¹ä¸å½±å“ï¼Œç›¸å¯¹æ¥è¯´æ›´å€¼å¾—å…³æ³¨çš„æ˜¯forkå­è¿›ç¨‹æ—¶å€™çš„é˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651153218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341480,"user_name":"æä¼Ÿ","can_delete":false,"product_type":"c1","uid":1239462,"ip_address":"","ucode":"F0EF60EB250B20","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/a6/69907ec1.jpg","comment_is_top":false,"comment_ctime":1649653841,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649653841","product_id":100056701,"comment_content":"ä½œè€…æåˆ°çš„å†™å‰æ—¥å¿—ä¼šå‡ºç°å‘½ä»¤ä¸æ­£ç¡®çš„é—®é¢˜ï¼Œæˆ‘ä¹‹å‰æ˜¯æ²¡æœ‰æƒ³åˆ°çš„ã€‚ä¸€è¿ä¸²çš„æ‚¬å¿µè®©æˆ‘å¾ˆæœ‰å…´è¶£è¯»ä¸‹å»ã€‚<br>redisæ˜¯å¦‚ä½•é¿å…æœºå™¨å®•æœºè€Œæ•°æ®ä¸¢å¤±çš„å‘¢ï¼Ÿ<br>é€šè¿‡AOFæ—¥å¿—ï¼Œå¦‚æœå®•æœºäº†ï¼Œå¯ä»¥é€šè¿‡AOFæ¢å¤ã€‚é‚£AOFæ˜¯åœ¨æ“ä½œredisæ•°æ®ä¹‹å‰å†™å…¥çš„è¿˜æ˜¯ä¹‹åå†™å…¥çš„å‘¢ï¼Ÿ<br>ä¹‹åå†™å…¥çš„ï¼Œé‚£ä¹ˆä¼šä¸ä¼šå­˜åœ¨æ•°æ®ä¸¢å¤±çš„é£é™©ï¼Ÿå› ä¸ºå¦‚æœæ•°æ®æ“ä½œå®Œäº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å†™å…¥AOFçš„è¯ï¼Œé‚£ä¹ˆå®•æœºä¸å°±ä¼šä¸¢å¤±æ•°æ®å—ï¼Ÿ<br>Redisåœ¨æ€§èƒ½å’Œå®‰å…¨æ€§æ–¹é¢åšäº†ä¸‰ç§ç­–ç•¥ï¼Œå¯ä»¥è®©ä½¿ç”¨è€…æ ¹æ®æƒ…å†µé€‰æ‹©ï¼ˆ1ï¼‰åŒæ­¥å†™å…¥ï¼Œï¼ˆ2ï¼‰æ¯ç§’å†™å…¥ï¼Œï¼ˆ3ï¼‰é€šè¿‡æ“ä½œç³»ç»Ÿæ§åˆ¶å†™å…¥<br>é‚£ä¹ˆå¦‚æœAOFçš„æ–‡ä»¶è¿‡å¤§ä¼šä¸ä¼šå­˜åœ¨å†™å…¥çš„æ—¶å€™å‘ç”Ÿé•¿æ—¶é—´çš„é˜»å¡å‘¢ï¼Ÿ<br>Redisé€šè¿‡å¼‚æ­¥é‡å†™AOFæ—¥å¿—æ¥è§£å†³æ–‡ä»¶è¿‡å¤§é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":340836,"user_name":"target_fly 2 years later","can_delete":false,"product_type":"c1","uid":2926236,"ip_address":"","ucode":"B30877606ED30E","user_header":"https://static001.geekbang.org/account/avatar/00/2c/a6/9c/6a0a36b0.jpg","comment_is_top":false,"comment_ctime":1649171736,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649171736","product_id":100056701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ–‡ç« å†™çš„å¾ˆå¥½ï¼Œè¯»å®Œæ”¶è·å¾ˆå¤§ï¼Œä½†è¿˜æœ‰2ä¸ªç–‘é—®ï¼š<br>1. AOFæ˜¯åœ¨å†…å­˜è¿˜æ˜¯åœ¨ç£ç›˜ä¸­çš„ï¼Ÿ <br>2. AOFç¼“å­˜åŒº å’Œ AOFæ–‡ä»¶æœ‰ä»€ä¹ˆå…³è”ï¼Ÿ","like_count":0},{"had_liked":false,"id":340644,"user_name":"Geek_df320b","can_delete":false,"product_type":"c1","uid":2960133,"ip_address":"","ucode":"AD27DE6F11EA6B","user_header":"","comment_is_top":false,"comment_ctime":1648989648,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1648989648","product_id":100056701,"comment_content":"AOFé‡å†™æ—¶ï¼Œ forkå­è¿›ç¨‹ï¼Œæ‹·è´å†…å­˜ï¼Œè‹¥å†…å­˜ä¸è¶³ä¼šæ€æ ·ï¼Ÿ æ–­ç”µä¹‹åé‡æ–°é‡å†™ä¼šå†æ¬¡æ‹·è´å†…å­˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568513,"discussion_content":"forkå­è¿›ç¨‹æ—¶å¹¶ä¸ä¼šæ‹·è´å†…å­˜ï¼Œè€Œæ˜¯ç”¨äº†copy on writeæŠ€æœ¯ï¼Œå¦‚æœcopy on writeæœŸé—´å› å†…å­˜ä¸è¶³ç”³è¯·å¤±è´¥ï¼Œé‚£ä¹ˆå­è¿›ç¨‹ä¼šå› ä¸ºOOMè¢«killæ‰ï¼Œé‡å¯åè¿˜æ˜¯ä¼šè¿›å…¥è¿™ä¸ªâ€œé‡å†™-è¢«kill-é‡å†™â€çš„æ­»å¾ªç¯ï¼›æ‰€ä»¥ä¸€å®šè¦ç»™Redisé¢„ç•™è¶³å¤Ÿçš„ç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651154084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333406,"user_name":"æ•°å­¦æ±¤å®¶å‡¤","can_delete":false,"product_type":"c1","uid":2029485,"ip_address":"","ucode":"DE84E777C384AD","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f7/ad/4fd4d867.jpg","comment_is_top":false,"comment_ctime":1644328859,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1644328859","product_id":100056701,"comment_content":"æœ‰å‡ ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼š<br>1. é‡å†™ aof æ—¶ï¼Œæ¥å—åˆ°å‘½ä»¤æ˜¯åŒæ—¶ append åˆ° aof buf å’Œ aof é‡å†™ buf å—ï¼Ÿ<br>2. è‹¥é—®é¢˜ 1ï¼Œæ˜¯åŒæ—¶å†™åˆ°ä¸¤ä¸ª buf ä¸­ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦ aof é‡å†™ bufï¼Ÿç›´æ¥åœ¨ aof buf ä¸­æ‹¿åˆ°é‡å†™æ—¶æ¥å—åˆ°å‘½ä»¤ä¸å°±è¡Œäº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568508,"discussion_content":"1ã€æ˜¯\n2ã€aof bufåªæ˜¯ä¸€ä¸ªç¼“å†²ï¼Œæ²¡å¤šä¹…ä»–å°±è½ç›˜æ¸…ç©ºäº†ï¼Œä¸å¯èƒ½å»ç¡¬ç›˜è¯»å‡ºæ¥å§ï¼Ÿå³ä½¿å»ç¡¬ç›˜è¯»ï¼Œä¹Ÿæ²¡åŠæ³•çŸ¥é“è¦ä»å“ªå¼€å§‹è¯»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651153787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329520,"user_name":"J æ°~","can_delete":false,"product_type":"c1","uid":2883490,"ip_address":"","ucode":"7202987553A19D","user_header":"https://static001.geekbang.org/account/avatar/00/2b/ff/a2/56e24200.jpg","comment_is_top":false,"comment_ctime":1641385043,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641385043","product_id":100056701,"comment_content":"è¯·é—®AOFå†™ç£ç›˜çš„æ—¶æœºæ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿå®¢æˆ·ç«¯æœ‰å†™è¯·æ±‚å†™å®Œå†…å­˜å°±ç›´æ¥è¿”å›ï¼Œè¿˜æ˜¯å†™å®Œå†…å­˜+æ—¥å¿—æ‰è¿”å›å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":328685,"user_name":"å†·å±±","can_delete":false,"product_type":"c1","uid":2839720,"ip_address":"","ucode":"67163D24B7FA0E","user_header":"https://static001.geekbang.org/account/avatar/00/2b/54/a8/3b334406.jpg","comment_is_top":false,"comment_ctime":1640841588,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640841588","product_id":100056701,"comment_content":"AOFçš„é‡å†™è¿‡ç¨‹ï¼š**ä¸€å¤„æ‹·è´ï¼Œä¸¤å¤„æ—¥å¿—**ã€‚<br><br>**ä¸€å¤„æ‹·è´ï¼š**é‡å†™æ—¶ã€ä¸»çº¿ç¨‹fork()å‡ºä¸€ä¸ª bgrewriteaof å­è¿›ç¨‹ï¼Œå¹¶å°†è‡ªå·±çš„å†…å­˜ï¼ˆforkç¬é—´æ•°æ®åº“ä¸­çš„æœ€æ–°æ•°æ®ï¼‰ç»§æ‰¿ç»™å­è¿›ç¨‹ä½¿ç”¨ã€‚<br><br>ç”±å­è¿›ç¨‹æŠŠè¿™äº›ä»ä¸»çº¿ç¨‹ç»§æ‰¿å¾—æ¥çš„æœ€æ–°æ•°æ®å†™æˆRediså‘½ä»¤ï¼Œè®°å½•åˆ°é‡å†™æ—¥å¿—ä¸­ã€‚ï¼ˆæ‹·è´åˆ™æ˜¯æŒ‡ä¸»çº¿ç¨‹çš„å†™æ—¶å¤åˆ¶ï¼‰<br><br>**ä¸¤å¤„æ—¥å¿—ï¼š**åœ¨é‡å†™è¿‡ç¨‹ä¸­ã€**ä¸»çº¿ç¨‹æ‰§è¡Œçš„æ–°å‘½ä»¤ä¼šåŒæ—¶ç”±ä¸»çº¿ç¨‹å†™åˆ°æ—§æ—¥å¿—ä»¥åŠæ–°æ—¥å¿—çš„æ–‡ä»¶ç¼“å†²åŒºä¸­**ã€‚<br><br>å½“å­è¿›ç¨‹é‡å†™å®Œæˆåï¼šé‡å†™è¿‡ç¨‹ä¸­æ‰€æ‰§è¡Œçš„æ–°å‘½ä»¤ï¼Œä¼šä»AOFçš„é‡å†™ç¼“å†²åŒºè½ç›˜åˆ°æ–°çš„AOFæ—¥å¿—é‡Œã€ä»¥ä¿è¯AOFæ—¥å¿—å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ã€‚<br><br>ç„¶åã€é‡å†™åçš„æ–°æ—¥å¿—ä¼šæ›¿ä»£æ—§çš„æ—¥å¿—ã€‚","like_count":0},{"had_liked":false,"id":327246,"user_name":"à¸…Slekà¸…","can_delete":false,"product_type":"c1","uid":2436755,"ip_address":"","ucode":"B732C672B3D301","user_header":"https://static001.geekbang.org/account/avatar/00/25/2e/93/81e3e4ca.jpg","comment_is_top":false,"comment_ctime":1640005180,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640005180","product_id":100056701,"comment_content":"CopyOnWriteæœºåˆ¶å’ŒCopyOnWriteListçš„å®ç°åŸç†å¾ˆç±»ä¼¼","like_count":0},{"had_liked":false,"id":326433,"user_name":"senda","can_delete":false,"product_type":"c1","uid":2729003,"ip_address":"","ucode":"74541011088AFB","user_header":"https://static001.geekbang.org/account/avatar/00/29/a4/2b/0e1bab59.jpg","comment_is_top":false,"comment_ctime":1639530067,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639530067","product_id":100056701,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œæ‚¨è¯´çš„è¿™æ®µå¦‚ä½•ç†è§£å‘¢ï¼Ÿ<br>      â€œå› ä¸ºä¸»çº¿ç¨‹æœªé˜»å¡ï¼Œä»ç„¶å¯ä»¥å¤„ç†æ–°æ¥çš„æ“ä½œã€‚æ­¤æ—¶ï¼Œå¦‚æœæœ‰å†™æ“ä½œï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚ â€    <br>       è¯·é—®ï¼Œ è¿™ä¸€å—ä¸å¤ªç†è§£ï¼Œæ–°çš„æ“ä½œå†™å…¥ç¼“å†²åŒºï¼Œç¼“å†²åŒºä¹Ÿæ˜¯åœ¨å†…å­˜ä¸­çš„ï¼Œå¦‚æœå®•æœºäº†ï¼Œå†…å­˜æ•°æ®ä¸¢å¤±äº†ï¼Œå°±æ²¡æ³•æ¢å¤æ•°æ®äº†å§ã€‚","like_count":0},{"had_liked":false,"id":325842,"user_name":"Geek_f223ca","can_delete":false,"product_type":"c1","uid":2524434,"ip_address":"","ucode":"CC18B0F7C24898","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJm5SIHaDYWUDMQ1kJ5YMYSibTTiat2ZVRk8qiaoKS1WQuSVe14LrM29nWmyuZUtGhjOXbqockk1c4Vw/132","comment_is_top":false,"comment_ctime":1639189055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639189055","product_id":100056701,"comment_content":"è€å¸ˆï¼ŒæŒä¹…åŒ–è¿‡ç¨‹æ—¶å¦‚ä½•ä¿è¯ä¸ä¼šå‡ºç°æ–°çš„å†™è¦†ç›–æ•°æ®","like_count":0},{"had_liked":false,"id":324985,"user_name":"æ ‘å¿ƒ","can_delete":false,"product_type":"c1","uid":1589523,"ip_address":"","ucode":"6C329F0FF798B9","user_header":"https://static001.geekbang.org/account/avatar/00/18/41/13/ab14ad25.jpg","comment_is_top":false,"comment_ctime":1638771757,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1638771757","product_id":100056701,"comment_content":"è¯»è¿‡ä¸æ­¢ä¸€éçš„æ–‡ç« ï¼Œè¿™æ¬¡è¯»æ¯”ä»¥å‰è¯»ç†è§£äº†æ›´å¤šï¼Œå’Œæœ€è¿‘å­¦çš„osçŸ¥è¯†ä¸²èµ·æ¥äº†ï¼ŒåŸºç¡€è¿˜æ˜¯ç‹é“ã€‚è¿˜æœ‰å¾ˆå¤šéœ€è¦è¡¥çš„ï¼Œç»§ç»­åŠ æ²¹ã€‚","like_count":0},{"had_liked":false,"id":323188,"user_name":"Leo","can_delete":false,"product_type":"c1","uid":1313963,"ip_address":"","ucode":"E0E655D048824A","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/ab/cfbf16e4.jpg","comment_is_top":false,"comment_ctime":1637757036,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637757036","product_id":100056701,"comment_content":"è¯·æ•™ä¸‹aofæ¯ç§’å›å†™ä¸‹ï¼Œå¯¹æœåŠ¡é˜»å¡æˆ–å¯¹å¹¶å‘çš„å½±å“æœ‰ä¸€äº›é‡åŒ–çš„ç»éªŒæˆ–æ•°æ®ä¹ˆ","like_count":0},{"had_liked":false,"id":319847,"user_name":"fei","can_delete":false,"product_type":"c1","uid":2126331,"ip_address":"","ucode":"36D802EB42FEF3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOUjOGRlYNY1TDZpso7LQEhMyqmgUqEW3sm5xWTHqhU5rUol8NeEOxLMQA5ib09Y8Yg97ziaqsKduA/132","comment_is_top":false,"comment_ctime":1635987675,"is_pvip":true,"discussion_count":0,"race_medal":3,"score":"1635987675","product_id":100056701,"comment_content":"AOFé‡å†™æ—¶ï¼Œç­‰åˆ°æ‹·è´æ•°æ®çš„æ‰€æœ‰æ“ä½œè®°å½•é‡å†™å®Œæˆåï¼ŒAOFé‡å†™æ—¥å¿—ç¼“å†²ä¸­çš„è®°å½•çš„ä¹Ÿä¼šå†™å…¥æ–°çš„ AOF æ–‡ä»¶ï¼Œä»¥ä¿è¯æ•°æ®åº“æœ€æ–°çŠ¶æ€çš„è®°å½•ã€‚<br>æˆ‘é—®é¢˜æ˜¯ï¼šåœ¨å°†AOFé‡å†™æ—¥å¿—ç¼“å†²çš„è®°å½•å†™å…¥æ–°AOFæ–‡ä»¶çš„è¿‡ç¨‹ä¹Ÿéœ€è¦æ—¶é—´ï¼Œåœ¨è¿™ä¸ªæ—¶é—´é‡Œå¦‚æœåˆæœ‰æ–°çš„å†™å…¥ï¼Œé‚£åˆå¦‚ä½•å¤„ç†ï¼Ÿè¿™æ—¶æ˜¯ä¸èƒ½åˆ‡æ¢åˆ°æ–°æ—¥å¿—æ–‡ä»¶çš„ã€‚","like_count":0},{"had_liked":false,"id":313948,"user_name":"ä¿¯ç°é£æ™¯.","can_delete":false,"product_type":"c1","uid":1044166,"ip_address":"","ucode":"A6DB68B7B84AEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/c6/bebcbcf0.jpg","comment_is_top":false,"comment_ctime":1632750642,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632750642","product_id":100056701,"comment_content":"Redisé€šè¿‡AOFæ—¥å¿—çš„æ–¹å¼ä¿è¯æ•°æ®çš„å¯é æ€§ï¼ŒAOFæ—¥å¿—æ˜¯åå†™æ—¥å¿—ï¼Œå³å…ˆæ‰§è¡Œå‘½ä»¤ï¼ŒæˆåŠŸåå†å†™AOFæ—¥å¿—ï¼Œè¿™æ ·åšçš„é£é™©æ˜¯ï¼š<br><br>  1ã€æ–­ç”µçš„è¯ä¸å¯é¿å…ä¼šé€ æˆæ•°æ®ç¼ºå¤±ï¼›<br><br>  2ã€å†™æ—¥å¿—çš„æ“ä½œæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šè¿›è¡Œçš„ï¼Œå½“æ—¥å¿—å†™å›ç£ç›˜æ—¶ï¼Œå¦‚æœç¡¬ç›˜å†™å‹åŠ›å¤§ï¼Œå°±ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚<br><br><br><br>æœ‰ä¸‰ç§æ—¥å¿—å†™å›ç­–ç•¥ï¼š<br>  Alwaysï¼ŒåŒæ­¥å†™å›ï¼›<br>  Everysecï¼Œæ¯ç§’å†™å›ï¼›<br>  Noï¼Œæ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›ã€‚<br><br>æ¯ç§’å†™å›å’Œæ“ä½œç³»ç»Ÿæ§åˆ¶å†™å›éƒ½éœ€è¦å…ˆå°†æ—¥å¿—å†™åˆ°AOFå†…å®¹ç¼“å†²åŒºï¼Œç„¶åæŒ‰å‘¨æœŸè¿›è¡Œæ—¥å¿—æ­‡ä¼šï¼Œä¸èƒ½é¿å…æ•°æ®ä¸¢å¤±ã€‚åŒæ­¥å†™å›å¯ä»¥æœ€å¤§é™åº¦çš„é¿å…æ•°æ®ä¸¢å¤±ï¼Œä½†æ˜¯æ¯ä¸ªå†™å‘½ä»¤éƒ½è¿›è¡Œå†™å›æ“ä½œï¼Œä¼šå½±å“ä¸»çº¿ç¨‹çš„æ€§èƒ½ã€‚ä¸‰ç§æ­‡ä¼šç­–ç•¥ä¸­ï¼Œæ¯ç§’å†™å›æ˜¯ä¸€ç§åœ¨é¿å…å½±å“ä¸»çº¿ç¨‹æ€§èƒ½å’Œé¿å…æ•°æ®ä¸¢å¤±ä¹‹é—´çš„æŠ˜ä¸­æ–¹æ¡ˆã€‚<br><br>éšç€AOFæ—¥å¿—æ–‡ä»¶çš„ä¸æ–­å˜å¤§ï¼ŒAOFæ—¥å¿—æœ¬èº«ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆçš„ä¸»å› ã€‚æ­¤æ—¶ï¼Œéœ€è¦è¿›è¡ŒAOFé‡å†™ä»¥é™ä½AOFæ—¥å¿—æ–‡ä»¶çš„å¤§å°ã€‚<br><br>å…·ä½“è¿‡ç¨‹æ˜¯â€œä¸€ä¸ªæ‹·è´ï¼Œä¸¤å¤„æ—¥å¿—â€ï¼šæ‰§è¡Œé‡å†™æ—¶ï¼Œä¸»çº¿ç¨‹å…ˆ fork å‡ºåå°çš„ bgrewriteaof å­è¿›ç¨‹ï¼Œfork ä¼šæŠŠä¸»çº¿ç¨‹çš„å†…å­˜æ‹·è´ä¸€ä»½ç»™ bgrewriteaof å­è¿›ç¨‹ï¼Œç„¶åï¼Œbgrewriteaof å­è¿›ç¨‹å°±å¯ä»¥åœ¨ä¸å½±å“ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œé€ä¸€æŠŠæ‹·è´çš„æ•°æ®å†™æˆæ“ä½œï¼Œè®°å…¥é‡å†™æ—¥å¿—ã€‚<br><br>ä¸ºäº†ä¿è¯AOFæ—¥å¿—å’Œé‡å†™æ—¥å¿—éƒ½æ˜¯æœ€æ–°çš„æ—¥å¿—ï¼Œæ‰€ä»¥æ¯æ¬¡æ‰§è¡Œå†™å‘½ä»¤æ—¶ï¼Œä¼šåŒæ—¶æŠŠå‘½ä»¤è®°å½•åœ¨AOFæ—¥å¿—ç¼“å†²åŒºå’Œé‡å†™æ—¥å¿—ç¼“å†²åŒºã€‚<br><br>ç­‰åˆ°æ‹·è´æ•°æ®çš„æ‰€æœ‰æ“ä½œè®°å½•é‡å†™å®Œæˆåï¼Œé‡å†™æ—¥å¿—è®°å½•çš„è¿™äº›æœ€æ–°æ“ä½œä¹Ÿä¼šå†™å…¥æ–°çš„ AOF æ–‡ä»¶ï¼Œç„¶åå°±å¯ä»¥ç”¨æ–°çš„ AOF æ–‡ä»¶æ›¿ä»£æ—§æ–‡ä»¶äº†ã€‚<br><br>é‡å†™æ—¥å¿—çš„è¿‡ç¨‹ä¸åœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚","like_count":0},{"had_liked":false,"id":312930,"user_name":"Geek_664206","can_delete":false,"product_type":"c1","uid":1480524,"ip_address":"","ucode":"585B39AA780B26","user_header":"","comment_is_top":false,"comment_ctime":1632126571,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1632126571","product_id":100056701,"comment_content":"Everysecæ¨¡å¼ï¼Œåˆ·ç›˜ä¼šé˜»å¡ä¸»çº¿ç¨‹å—ï¼Ÿè¿˜æ˜¯ç”±å¦ä¸€ä¸ªå­è¿›ç¨‹æ‰§è¡Œçš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1887603,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/cd/73/f6889c2f.jpg","nickname":"Wind","note":"","ucode":"AD108636DE44C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402330,"discussion_content":"ä¼šé˜»å¡ï¼Œæ˜¯ä¸»çº¿ç¨‹åšçš„ï¼Œè¿™éƒ¨åˆ†ç¬”è®°åˆ†äº«ç»™ä½ ï¼Œè€å¸ˆæ²¡è¯´ï¼Œç½‘ä¸Šæ‰¾åˆ°è¡¥å……çš„\n\nè½ç›˜ç­–ç•¥\n  a. Always åŒæ­¥ä¼šå†™ï¼Œä¸»çº¿ç¨‹æ¯æ¬¡å†™æ“ä½œéƒ½ä¼šï¼ˆflushAppendOnlyFileï¼‰åŒæ­¥è°ƒç”¨fsyncå¼ºåˆ¶è½ç›˜ï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±ï¼ˆå†™å…¥æ•°æ®åé©¬ä¸Šå®•æœºï¼Œä¹Ÿæ˜¯ä¼šä¸¢æ•°æ®çš„ï¼Œä½†æ˜¯è¿™æ—¶å€™å®¢æˆ·ç«¯ä¹Ÿæ˜¯æ²¡è¿”å›æ‰§è¡Œæ­£å¸¸çš„ç»“æœï¼Œæ‰€ä»¥å¯ä»¥ç†è§£æˆä¸ä¼šä¸¢ï¼‰ï¼Œä½†æ˜¯æ€§èƒ½æœ€å·®\n  b. Everysec æ¯ç§’(å¼‚æ­¥)å›å†™ï¼Œä¸»çº¿ç¨‹åªæ˜¯ä½œä¸ºç”Ÿäº§è€…äº§ç”Ÿfsyncä»»åŠ¡ï¼Œç”±bioçº¿ç¨‹æ¶ˆè´¹å¹¶æ‰§è¡Œï¼›å¦å¤–Everysec è¿˜éœ€è¦æ³¨æ„æ¯ç§’è½ç›˜é‡ä¸èƒ½è¶…è¿‡ç£ç›˜IOèƒ½åŠ›ï¼Œå¦åˆ™ä¼šé€ æˆbioä»»åŠ¡ç§¯å‹ï¼ˆRediså‘ç°bioä»åœ¨æ‰§è¡Œä»»åŠ¡æ—¶ä¼šç›´æ¥å µå¡ä»»åŠ¡æäº¤ï¼Œæ¥åº”å¯¹ç£ç›˜IOèƒ½åŠ›ä¸è¶³çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ç£ç›˜IOèƒ½åŠ›ä¸è¶³å¯¼è‡´è½ç›˜æ€§èƒ½ä¸è¶³æ—¶ï¼Œå¼‚æ­¥åˆ·ç›˜ä¹Ÿä¼šå½±å“æ•´ä½“æ€§èƒ½ï¼‰ï¼Œç³»ç»Ÿå®•æœºä¼šæœ‰ä¸€ç§’æ•°æ®ä¸¢å¤±ï¼Œæ€§èƒ½é€‚ä¸­\n  c. No ä¸æ˜¾å¼è°ƒç”¨fsyncï¼›è®©æ“ä½œç³»ç»Ÿæ§åˆ¶è½ç›˜æ—¶æœºï¼ŒRedisæ— æ³•å†³å®šå¢é‡æ•°æ®çš„è½ç›˜æ—¶é—´ï¼Œå› æ­¤å®¹é”™èƒ½åŠ›ä¸å¯æ§ï¼›ä¸¢æ•°æ®è¾ƒå¤šï¼Œæ€§èƒ½æœ€å¥½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1633865311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312133,"user_name":"Sherk","can_delete":false,"product_type":"c1","uid":2156245,"ip_address":"","ucode":"AFE3E7F158258D","user_header":"https://static001.geekbang.org/account/avatar/00/20/e6/d5/4f1fc074.jpg","comment_is_top":false,"comment_ctime":1631633838,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631633838","product_id":100056701,"comment_content":"redisä¸ºä»€ä¹ˆæ‰§è¡Œrediså‘½ä»¤æˆåŠŸåå†å†™æ—¥å¿—å°±ä¸ä¼šé˜»å¡å†™æ“ä½œã€‚è¿™ä¸¤æ­¥æ“ä½œéš¾é“æ˜¯å¼‚æ­¥çš„å—ã€‚æˆ‘ç†è§£å¦‚æœä¸æ˜¯å¼‚æ­¥çš„è¯æ‰§è¡Œåå†™å’Œæ‰§è¡Œå‰å†™éƒ½ä¼šé˜»å¡å†™æ“ä½œ","like_count":0},{"had_liked":false,"id":311582,"user_name":"Lee","can_delete":false,"product_type":"c1","uid":1344535,"ip_address":"","ucode":"6B8D59A0B1A1A9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOn7k48KXia5rf0eXpzv2EGtqGibz3eNb8QnL8X72uia0g1rBwzXef4dV2JEdz3r4bu9GC1FLIeic4UA/132","comment_is_top":false,"comment_ctime":1631321542,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631321542","product_id":100056701,"comment_content":"â€œå› ä¸ºä¸»çº¿ç¨‹æœªé˜»å¡ï¼Œä»ç„¶å¯ä»¥å¤„ç†æ–°æ¥çš„æ“ä½œã€‚æ­¤æ—¶ï¼Œå¦‚æœæœ‰å†™æ“ä½œï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚â€    <br>è¯·é—®ï¼Œç¼“å†²åŒºçš„æ•°æ®ä¹Ÿåœ¨å†…å­˜ï¼Œå¦‚æœå‘ç”Ÿæ–­ç”µï¼Œæ˜¯ä¸æ˜¯æ„å‘³ç€ä¹Ÿä¸¢äº†â€¦â€¦ä¸€ç›´æƒ³ä¸é€š","like_count":0},{"had_liked":false,"id":310504,"user_name":"åˆ€æ–§æ‰‹ä½•åœ¨","can_delete":false,"product_type":"c1","uid":1202572,"ip_address":"","ucode":"B99D7ECC3EE954","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/8c/ba81a832.jpg","comment_is_top":false,"comment_ctime":1630685161,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630685161","product_id":100056701,"comment_content":"é—®é¢˜ï¼š ä¸ºä»€ä¹ˆAOFå†™å›ä¸èƒ½forkå­çº¿ç¨‹æ“ä½œã€‚æˆ–è€…ç‹¬ç«‹ä¸€ä¸ªå­çº¿ç¨‹ï¼Œä¸“é—¨ç”¨æ¥åˆ·AOFç¼“å†²ï¼Ÿ","like_count":0},{"had_liked":false,"id":309254,"user_name":"louis","can_delete":false,"product_type":"c1","uid":2416570,"ip_address":"","ucode":"4923669B2F0748","user_header":"https://static001.geekbang.org/account/avatar/00/24/df/ba/4b9d2569.jpg","comment_is_top":false,"comment_ctime":1630023633,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630023633","product_id":100056701,"comment_content":"é‡å†™æ˜¯ä¸€ä¸ªå­è¿›ç¨‹ï¼Œä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":309175,"user_name":"dandy","can_delete":false,"product_type":"c1","uid":1583740,"ip_address":"","ucode":"5EE976FCBD9215","user_header":"https://static001.geekbang.org/account/avatar/00/18/2a/7c/0d6a87c4.jpg","comment_is_top":false,"comment_ctime":1629968707,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629968707","product_id":100056701,"comment_content":"æ€»ç»“ä¸€ä¸‹aofçš„æµç¨‹ï¼š<br>rewriteAppendOnlyFileBackgroundå¯åŠ¨æµç¨‹ï¼š<br>1 æ£€æŸ¥æ˜¯å¦åˆ›å»ºäº†å­è¿›ç¨‹ã€‚æœ‰åˆ™é€€å‡º<br>2 åˆ›å»ºç®¡é“ï¼Œç›®çš„æ˜¯å­è¿›ç¨‹aofå¤‡ä»½çš„æ—¶å€™ï¼Œè¿˜ä¼šæœ‰æ•°æ®è¯·æ±‚çˆ¶è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹éœ€è¦æŠŠæ•°æ®å­˜åˆ°aof_rewrite_buf_blocksä¸­(listæ•°æ®)ã€‚<br>3 åˆ›å»ºçˆ¶å­è¿›ç¨‹<br>    çˆ¶è¿›ç¨‹ï¼š<br>\tè®°å½•å­è¿›ç¨‹ä¿¡æ¯ï¼ˆpidï¼‰ã€æ—¶é—´æˆ³ç­‰ï¼›<br>\tç»§ç»­å“åº”å…¶ä»–å®¢æˆ·ç«¯è¯·æ±‚ï¼›<br>\tæ”¶é›†AOFé‡å†™æœŸé—´çš„å‘½ä»¤ï¼Œè¿½åŠ è‡³aof_rewrite_buf_blocksï¼›<br>\tå­è¿›ç¨‹ï¼š<br>\tä¿®æ”¹å½“å‰è¿›ç¨‹åç§°ï¼Œåˆ›å»ºé‡å†™æ‰€éœ€çš„ä¸´æ—¶æ–‡ä»¶ï¼Œè°ƒç”¨rewriteAppendOnlyFileå‡½æ•°ï¼›<br>\tæ ¹æ®aof-use-rdb-preambleé…ç½®ï¼Œä»¥RDBæˆ–AOFæ–¹å¼å†™å…¥å‰åŠéƒ¨åˆ†ï¼Œå¹¶åŒæ­¥è‡³ç¡¬ç›˜ï¼›<br>\taofå†™å…¥ï¼ŒrioFileWriteå¹¶ç”¨fwriteå‘½ä»¤ï¼Œå†™åˆ°ç”¨æˆ·ç¼“å†²åŒºï¼Œfflushç”¨æˆ·ç¼“å†²åŒºåˆ°å†…æ ¸ç¼“å†²åŒºï¼Œfsyncå†™åˆ°ç£ç›˜<br>\tè·å–åˆ›å»ºçš„ç®¡é“ä¿¡æ¯ï¼Œçˆ¶è¿›ç¨‹æ¥æ”¶åœ¨aofæœŸé—´ï¼Œå†™å…¥åˆ°ç¼“å­˜(ä½¿ç”¨listç»“æ„å­˜å‚¨)çš„æ•°æ®ã€‚ä»¥AOFæ–¹å¼å†™å…¥ååŠéƒ¨åˆ†ï¼Œä¹‹åæŒ‰ç…§ä¸Šè¿°åŒæ ·æ“ä½œå†™å…¥ç£ç›˜<br>\trenameåŸå­æ€§AOFæ–‡ä»¶ï¼Œå­è¿›ç¨‹é€€å‡ºã€‚<br><br>ä¸æ¸…æ¥šå°±å»çœ‹æºç å–½ï¼","like_count":0},{"had_liked":false,"id":307383,"user_name":"Alery","can_delete":false,"product_type":"c1","uid":1156557,"ip_address":"","ucode":"08F3F49181E67B","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/cd/3aff5d57.jpg","comment_is_top":false,"comment_ctime":1629076054,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1629076054","product_id":100056701,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œåˆ·ç›˜ç­–ç•¥æ²¡æœ‰äº‹ç‰©æäº¤ï¼Œå³ä½¿é‡‡ç”¨alwaysæ˜¯ä¸æ˜¯è¿˜æ˜¯ä¸€ç§ä¸å¯é çš„æŒä¹…åŒ–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1887603,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/cd/73/f6889c2f.jpg","nickname":"Wind","note":"","ucode":"AD108636DE44C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402334,"discussion_content":"ç½‘ä¸Šæ‰¾åˆ°çš„è¯´ always æ˜¯ä¸»çº¿ç¨‹åŒæ­¥åˆ·ç›˜ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨åˆ·ç›˜æˆåŠŸä¹‹å‰æ˜¯æ²¡è¿”å›ç»™å®¢æˆ·ç«¯çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å†™æ•°æ®äº† ä½†æ˜¯åˆ·ç›˜æ—¶å€™å®•æœºäº†ï¼Œå®¢æˆ·ç«¯æ²¡æ”¶åˆ°æˆåŠŸçš„åº”ç­”ï¼Œæ˜¯å¯ä»¥ç†è§£æˆäº‹åŠ¡æ²¡å®Œæˆçš„ï¼Œå½“ç„¶ä¸¥è°¨ç‚¹è¯´è‚¯å®šæ˜¯ä¸åŠæ•°æ®åº“çš„äºŒé˜¶æ®µæäº¤ï¼Œæ‰€ä»¥è€å¸ˆä¹Ÿè¯´äº†ï¼Œæ˜¯åŸºæœ¬ä¸Šä¸ä¸¢æ•°æ®ï¼Œæ²¡è¯´ç»å¯¹ï¼Œè¦çœ‹ä¸šåŠ¡å¯¹è¿™ä¸ªæ—¶å€™çš„å®•æœºæ˜¯æ€ä¹ˆç†è§£çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633865757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307108,"user_name":"flying myself","can_delete":false,"product_type":"c1","uid":1992480,"ip_address":"","ucode":"69F26BE9B94B58","user_header":"https://static001.geekbang.org/account/avatar/00/1e/67/20/93b2e38e.jpg","comment_is_top":false,"comment_ctime":1628862748,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628862748","product_id":100056701,"comment_content":"Noï¼Œæ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›ï¼šæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œåªæ˜¯å…ˆæŠŠæ—¥å¿—å†™åˆ° AOF æ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å°†ç¼“å†²åŒºå†…å®¹å†™å›ç£ç›˜ã€‚ æ“ä½œç³»ç»Ÿæ§åˆ¶å†™å›æ˜¯æ€ä¹ˆå®ç°çš„å‘¢","like_count":0},{"had_liked":false,"id":305195,"user_name":"Geek_9036f8","can_delete":false,"product_type":"c1","uid":2181955,"ip_address":"","ucode":"1B5DE713CAE020","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ibEDauu4c6nN6UCsNApNAoABustxiadXvMXTuBHzhFjY1eW8ohkwxMqr2RnMeBDdibvxdWLXe7zrQialeQSkydfAsw/132","comment_is_top":false,"comment_ctime":1627873640,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1627873640","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ï¼ŒAOFé‡å†™çš„æ—¶å€™ä¼šé‡å†™æ‰€æœ‰æ•°æ®çš„æ“ä½œå—ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œé‚£è¿™è·ŸRDBæ˜¯ä¸æ˜¯å°±æ²¡æœ‰åŒºåˆ«äº†ï¼Œéš¾é“ä¸æ˜¯åŸAOFæ–‡ä»¶è®°å½•äº†å“ªäº›æ•°æ®çš„æ“ä½œæ‰è¿›è¡Œè¿™äº›æ•°æ®æ“ä½œçš„åˆå¹¶å—ï¼Œè€Œç°åœ¨æ˜¯RDBå’ŒAOFå…±ç”¨çš„æƒ…å†µä¸‹ï¼ŒAOFå°±æ›´æ²¡æœ‰å¿…è¦è¿›è¡Œæ‰€æœ‰æ•°æ®çš„æ“ä½œè®°å½•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™è¿™ä¸ªé‡å†™æœºåˆ¶ä¼šæœ‰æ”¹å˜å—ï¼Œè¿˜æ˜¯è¯´è¿™å—çš„é‡å†™æœºåˆ¶æ²¡æœ‰å†™å¤ªç»†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388369,"discussion_content":"rdbå’Œaofæœ¬èº«æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ªäººè§‰å¾—ç†è®ºä¸Šå¯ä»¥ç”¨ï¼Œä½†æ˜¯å¦‚æœå¼ºè¡Œè€¦åˆaofä¹Ÿå…¬ç”¨rdbçš„å¿«ç…§æ–‡ä»¶æ€§ä»·æ¯”ä¸æ˜¯å¾ˆé«˜ï¼Œå› ä¸ºaofé‡å†™å­çº¿ç¨‹å®Œæˆåè¿˜éœ€è¦ç«‹å³åŒæ­¥é‡å†™æœŸé—´æ–°å¢çš„ç¼“å†²åŒºæ•°æ®çš„ï¼Œè¡”æ¥å¤„ç†ä¸å¥½å¾ˆå®¹æ˜“æ¼æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628734841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305079,"user_name":"xiong","can_delete":false,"product_type":"c1","uid":1099375,"ip_address":"","ucode":"C1BFD9EF96372F","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/6f/ac3003fa.jpg","comment_is_top":false,"comment_ctime":1627805469,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1627805469","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘æƒ‘ç‚¹çš„åœ°æ–¹ï¼šaof åœ¨é‡å†™è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªæ‹·è´ä¸­è¯´ä¼šæŠŠä¸»çº¿ç¨‹çš„å†…å­˜æ•°æ®æ‹·è´ä¸€ä»½åˆ°å­è¿›ç¨‹ï¼Œå¦‚æœæ•°æ®é‡åœ¨å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªåŠ¨ä½œä¼šæœ‰å‹åŠ›å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388268,"discussion_content":"ä¸æ˜¯æ‹·è´çš„æ•°æ®ï¼Œæ˜¯å†…å­˜åœ°å€é¡µéƒ½æ˜¯å­˜çš„å†…å­˜ç‰©ç†åœ°å€çš„æ˜ å°„å…³ç³»ï¼Œè¿™ä¸ªæ˜¯çº¿æ€§è§„å¾‹çš„ï¼Œæ•°æ®è¶Šå¤šï¼Œå…³ç³»ä¹Ÿè¶Šå¤šï¼Œä½†æ˜¯è‚¯å®šæ¯”æ•°æ®å å¾—ç©ºé—´å°çš„å¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628675208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303675,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1626923983,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626923983","product_id":100056701,"comment_content":"å›ç­”è¿™ä¸ªé—®é¢˜,æˆ‘ä»¬å¾—çœ‹ä¸‹Unixä¸­çš„çˆ¶å­è¿›ç¨‹çš„æ‹·è´<br>åœ¨çˆ¶è¿›ç¨‹è°ƒç”¨forkä¹‹å,<br>Unixä¼šè¿›è¡Œä»¥çˆ¶è¿›ç¨‹ä¸ºæ¨¡æ¿åˆ›å»ºå­è¿›ç¨‹<br>ç„¶åæ‹·è´è™šæ‹Ÿå†…å­˜ä¸­çš„åœ°å€(è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜æœ‰ä¸€ä¸ªæ˜ å°„å…³ç³»,è¿™æ˜¯å› ä¸ºUnixç»´æŠ¤äº†ä¸€ä¸ªå¤§ä¸€ç»Ÿçš„å†…å­˜ç³»ç»Ÿ,å°†ä¸Šå±‚å¯¹å†…å­˜çš„æ“ä½œå’Œå®é™…çš„å†…å­˜è§£è€¦)<br>ç„¶åforkåˆ†åˆ«è¿”å›,çˆ¶è¿›ç¨‹è·å–åˆ°å­è¿›ç¨‹çš„pid<br>ä¸Šè¿°æµç¨‹,ä¹‹æ‰€ä»¥åªæ‹·è´è™šæ‹Ÿå†…å­˜,æ˜¯å› ä¸ºUnixé‡‡ç”¨äº†å†™æ—¶å¤åˆ¶(æ—©æœŸUnixæ˜¯æ·±æ‹·è´)<br>è€ŒAOFä¸æ¶‰åŠæ“ä½œå†…å­˜,æ•…ä¸ä¼šæ‹·è´ç‰©ç†å†…å­˜<br>ä½†æ˜¯ç”±äºUnixä¸­,å¯èƒ½å‡ºç°è¿›ç¨‹æ•°ä¸è¶³,ä»¥åŠè™šæ‹Ÿå†…å­˜è¡¨æ‹·è´å¤±è´¥ç­‰é—®é¢˜,åˆ°æ¥çš„AOFé‡å†™å¤±è´¥çš„é£é™©<br>è¿˜æœ‰å°±æ˜¯åœ¨å­¦ä¹ è¯¾ç¨‹ä¹‹å‰,æˆ‘æ›¾ç»çŒœæµ‹è¿‡AOFçš„é‡å†™æœºåˆ¶,æ—©æœŸæˆ‘ç»™å‡ºçš„ç­”æ¡ˆæ˜¯æ¨¡ä»¿MQçš„æ—¥å¿—æ–‡ä»¶,åªæ˜¯æ“ä½œæ—¥å¿—,å³ä¾æ¬¡è¯»å–æ—¥å¿—,æ ¹æ®keyæ¥åˆ¤æ–­keyæœ€ç»ˆæ˜¯å¦éœ€è¦å†™å…¥åˆ°æ—¥å¿—ä¸­,åˆ°äº†é‡å†™æµç¨‹å®Œæˆä¹‹å,æ‰è¿›è¡Œä¸€ä¸ªå¼ºåˆ¶å†™ç›˜çš„æ“ä½œ,ç°åœ¨çœ‹æ¥,æˆ‘è¿˜æ˜¯å¯¹Unixç³»ç»Ÿç©çš„æµ…å•Š","like_count":0},{"had_liked":false,"id":299824,"user_name":"æ–œæ é’å¹´","can_delete":false,"product_type":"c1","uid":1177739,"ip_address":"","ucode":"D7AF02B8588549","user_header":"https://static001.geekbang.org/account/avatar/00/11/f8/8b/74d2ab6b.jpg","comment_is_top":false,"comment_ctime":1624872610,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1624872610","product_id":100056701,"comment_content":"è¯·é—®è€å¸ˆ å†™AOFæ–‡ä»¶æ˜¯å¦è¦åŠ å…¥é˜Ÿåˆ— æ§åˆ¶å…ˆåé¡ºåº","like_count":0},{"had_liked":false,"id":298004,"user_name":"DDD","can_delete":false,"product_type":"c1","uid":1500472,"ip_address":"","ucode":"26411E3487BBB5","user_header":"https://static001.geekbang.org/account/avatar/00/16/e5/38/d271950c.jpg","comment_is_top":false,"comment_ctime":1623884138,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1623884138","product_id":100056701,"comment_content":"â€˜ç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºâ€™ è¿™å¥è¯æ²¡å¬æ‡‚","like_count":0},{"had_liked":false,"id":297033,"user_name":"å¼ æ–°äº®","can_delete":false,"product_type":"c1","uid":2406845,"ip_address":"","ucode":"B68A71CDEA551A","user_header":"https://static001.geekbang.org/account/avatar/00/24/b9/bd/7fef12c8.jpg","comment_is_top":false,"comment_ctime":1623288606,"is_pvip":false,"discussion_count":1,"race_medal":1,"score":"1623288606","product_id":100056701,"comment_content":"é—®ä¸€ä¸‹è’‹è€å¸ˆï¼Œeverysecæ¨¡å¼ä¸‹ï¼Œæ¯ç§’è°ƒä¸€æ¬¡fsyncçš„ï¼Œæ˜¯ä¸»çº¿ç¨‹è°ƒçš„è¿˜æ˜¯åå°çº¿ç¨‹è°ƒçš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387059,"discussion_content":"everysec ä¸‹ï¼Œæ˜¯åå°å­çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627965876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296883,"user_name":"Jerry","can_delete":false,"product_type":"c1","uid":2120883,"ip_address":"","ucode":"790ADE0791C744","user_header":"https://static001.geekbang.org/account/avatar/00/20/5c/b3/05612134.jpg","comment_is_top":false,"comment_ctime":1623209764,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1623209764","product_id":100056701,"comment_content":"è€å¸ˆï¼ŒEverysecå†™å›ç­–ç•¥ï¼šæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œåªæ˜¯å…ˆæŠŠæ—¥å¿—å†™åˆ° AOF æ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œæ¯éš”ä¸€ç§’æŠŠç¼“å†²åŒºä¸­çš„å†…å®¹å†™å…¥ç£ç›˜ã€‚è¿™ä¸ªæ¯ä¸€ç§’æŠŠç¼“å†²åŒºçš„å†…å®¹å†™å…¥ç£ç›˜ï¼Œè¿™ä¸ªæ“ä½œè¿˜æ˜¯ä¸æ˜¯ä¸»çº¿ç¨‹æ“ä½œçš„ï¼Œä¸»çº¿ç¨‹æ“ä½œçš„è¯åº”è¯¥ä¼šé˜»å¡æ‰å¯¹å‘€","like_count":0,"discussions":[{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387060,"discussion_content":"åå°å­çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627965931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296746,"user_name":"æ´‹ä»”","can_delete":false,"product_type":"c1","uid":1907293,"ip_address":"","ucode":"60065172A83B23","user_header":"https://static001.geekbang.org/account/avatar/00/1d/1a/5d/963c9764.jpg","comment_is_top":false,"comment_ctime":1623143049,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1623143049","product_id":100056701,"comment_content":"WALä¹Ÿæ˜¯å…ˆæ‰§è¡Œå‘½ä»¤çš„å•Šï¼Œä¸è¿‡æ˜¯å…ˆå†™æ—¥å¿—ï¼Œå†å†™ç£ç›˜ï¼Œè¿™ä¸ªè§’åº¦AOFåº”è¯¥ä¹Ÿæ˜¯ç”¨çš„WALçš„æŠ€æœ¯ï¼Œä¹Ÿæ˜¯å…ˆå†™æ—¥å¿—ï¼Œå†å†™ç£ç›˜","like_count":0},{"had_liked":false,"id":296207,"user_name":"Geek2808","can_delete":false,"product_type":"c1","uid":2028948,"ip_address":"","ucode":"835C9691723163","user_header":"","comment_is_top":false,"comment_ctime":1622806219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622806219","product_id":100056701,"comment_content":"1ã€å†™æ—¥å¿—æ˜¯è¿›è¡Œæ–‡ä»¶çš„IOï¼Œå­˜åœ¨é˜»å¡çš„é£é™©ã€‚<br>2ã€æ— æ³•æœ‰æ•ˆåŒºåˆ†ä»å“ªä¸€æ®µæ–‡ä»¶å¼€å§‹æ˜¯AOFé‡å†™éœ€è¦çš„æ—¥å¿—ã€‚","like_count":0},{"had_liked":false,"id":295673,"user_name":"æ²¡å¤´è„‘å’Œä¸é«˜å…´","can_delete":false,"product_type":"c1","uid":2029287,"ip_address":"","ucode":"E1E90A415AF695","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f6/e7/eabea1ec.jpg","comment_is_top":false,"comment_ctime":1622539973,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622539973","product_id":100056701,"comment_content":"é—®é¢˜1ï¼šåœ¨è§¦å‘é‡å†™æ“ä½œæ—¶ï¼Œéœ€è¦å ç”¨å¤šå¤§çš„å†…å­˜ï¼ŒæœåŠ¡å™¨ç©ºé—²å†…å­˜ä¿æŒåœ¨å¤šå°‘æ¯”è¾ƒåˆé€‚ã€‚ä¾‹å¦‚ç°åœ¨redisæœåŠ¡å™¨ï¼Œå†…å­˜å·²ä½¿ç”¨10Gã€‚<br>é—®é¢˜2ï¼šé‡å†™è¿‡ç¨‹ä¼šå¯¼è‡´æœåŠ¡ä¸å¯ç”¨æœ‰å“ªäº›åŸå› ã€‚","like_count":0},{"had_liked":false,"id":295055,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1622197099,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1622197099","product_id":100056701,"comment_content":"ä¸€æ˜¯ï¼Œæ–‡ä»¶ç³»ç»Ÿæœ¬èº«å¯¹æ–‡ä»¶å¤§å°æœ‰é™åˆ¶ï¼Œæ— æ³•ä¿å­˜è¿‡å¤§çš„æ–‡ä»¶ï¼›äºŒæ˜¯ï¼Œå¦‚æœæ–‡ä»¶å¤ªå¤§ï¼Œä¹‹åå†å¾€é‡Œé¢è¿½åŠ å‘½ä»¤è®°å½•çš„è¯ï¼Œæ•ˆç‡ä¹Ÿä¼šå˜ä½ï¼›ä¸‰æ˜¯ï¼Œå¦‚æœå‘ç”Ÿå®•æœºï¼ŒAOF ä¸­è®°å½•çš„å‘½ä»¤è¦ä¸€ä¸ªä¸ªè¢«é‡æ–°æ‰§è¡Œï¼Œç”¨äºæ•…éšœæ¢å¤ï¼Œå¦‚æœæ—¥å¿—æ–‡ä»¶å¤ªå¤§ï¼Œæ•´ä¸ªæ¢å¤è¿‡ç¨‹å°±ä¼šéå¸¸ç¼“æ…¢ï¼Œè¿™å°±ä¼šå½±å“åˆ° Redis çš„æ­£å¸¸ä½¿ç”¨ã€‚<br>--------------------------------------------------ã€‹<br>ç¬¬äºŒç‚¹æ²¡æ˜ç™½ï¼Œ AOFè¿½åŠ ï¼Œä¸æ˜¯ä¼šè®°å½•æ–‡ä»¶å½“å‰å†™å…¥çš„ç´¢å¼•ä½ç½®å—ï¼Œå’Œæ–‡ä»¶å¤§å°æœ‰ä»€ä¹ˆå…³ç³»","like_count":0},{"had_liked":false,"id":293504,"user_name":"å¤§åŠ›æ°´æ‰‹Jerry","can_delete":false,"product_type":"c1","uid":1227840,"ip_address":"","ucode":"E4A6C71E275DB5","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/40/2279cfb5.jpg","comment_is_top":false,"comment_ctime":1621412609,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621412609","product_id":100056701,"comment_content":"æä¸¤ç‚¹ä¸åŒçœ‹æ³•ï¼š<br>1. å¾ˆå¤šåŒå­¦è¯´bgrewriteaofå­è¿›ç¨‹ç»“æŸåï¼Œæ˜¯ä½¿ç”¨ä¿¡å·é€šçŸ¥redisä¸»è¿›ç¨‹ï¼Œä½†ä»æœ€æ–°çš„redis6.2.3çœ‹ï¼Œrediså®ç°äº†ä¸€ä¸ªserverCronå‡½æ•°ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªtimer interruptï¼Œæ”¯æŒæ‰€æœ‰éœ€è¦asynchronouslyæ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚AOF rewrite, and handling of terminated childrenã€‚<br>2. å…³äºâ€œAOFéé˜»å¡çš„é‡å†™è¿‡ç¨‹â€ï¼Œæ›´ç»†èŠ‚çš„å®ç°æ˜¯ï¼ŒAOFç¼“å†²å’ŒAOFé‡å†™ç¼“å†²éƒ½éš¶å±äºRedisä¸»è¿›ç¨‹ï¼ˆå‚è§struct redisServerï¼‰ï¼šforkå¾—åˆ°bgrewriteaofå­è¿›ç¨‹ï¼Œä¼šç»§æ‰¿çˆ¶è¿›ç¨‹çš„æ‰€æœ‰å†…å­˜ç»“æ„ï¼Œä½†å®ƒå®é™…åªç”¨äº†redisæ•°æ®åº“çš„â€œæ‹·è´â€å¹¶å°†å…¶å†™åˆ°tempfileä¸­ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨AOFé‡å†™ç¼“å†²ã€‚è¿½åŠ AOF rewrite bufferåˆ°tempfileçš„å·¥ä½œæ˜¯ç”±redisä¸»è¿›ç¨‹å®Œæˆçš„ã€‚æ‰€ä»¥å¦‚æœé‡å†™AOFæœŸé—´ä¿®æ”¹çš„æ•°æ®é‡è¾ƒå¤§ï¼Œè¿½åŠ è¿‡ç¨‹ä¹Ÿæ˜¯å¯èƒ½çš„ä¸€ä¸ªæ€§èƒ½é£é™©ç‚¹ã€‚ä¹Ÿè®¸rediså·²ç»è€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥aofé‡å†™ç¼“å†²æ‰é‡‡ç”¨é“¾è¡¨blockçš„å½¢å¼ã€‚<br>è¯·å¤§å®¶æŒ‡æ•™ã€‚","like_count":0},{"had_liked":false,"id":292143,"user_name":"JAVAåˆçº§å¼€å‘å·¥ç¨‹å¸ˆ","can_delete":false,"product_type":"c1","uid":1876716,"ip_address":"","ucode":"F78E2F30751AC2","user_header":"http://thirdwx.qlogo.cn/mmopen/KFgDEHIEpnTUibfcckj33D1LVj9VapfrK3Yq2Gj00wnLt4nkWS7HvYy5NxvmnQcQpaysuBHVrB9MILWZ9hibUNasicPNtueYoNM/132","comment_is_top":false,"comment_ctime":1620702228,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620702228","product_id":100056701,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼ŒAOFé‡å†™æ—¶å†™å…¥è¯·æ±‚ç‰¹åˆ«å¯¼è‡´AOFé‡å†™ç¼“å†²åŒºæ»¡äº†ä¼šæ€ä¹ˆå¤„ç†","like_count":0},{"had_liked":false,"id":291662,"user_name":"äºŒäºŒæ±Ÿæ¹–","can_delete":false,"product_type":"c1","uid":2065539,"ip_address":"","ucode":"F935DB9B620ADF","user_header":"https://static001.geekbang.org/account/avatar/00/1f/84/83/78d142c5.jpg","comment_is_top":false,"comment_ctime":1620402691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620402691","product_id":100056701,"comment_content":"è¯·é—®ä¸‹å†™æ—¶å¤åˆ¶å’Œå†™å…¥é‡å†™ç¼“å†²åŒºçš„æ•°æ®ä¸æ˜¯é‡å¤äº†ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":290279,"user_name":"Geek_d8e6a2","can_delete":false,"product_type":"c1","uid":1618090,"ip_address":"","ucode":"ECD84E50DBAF30","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKqPgfj68lFBJ1YptiaIKv6Jib4m7RcpkpXzvG1PEW9YstRzvDvTNJ2uNiaNyZAI0lYiaGcj407q8beRA/132","comment_is_top":false,"comment_ctime":1619484376,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619484376","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœå†™å›ç­–ç•¥è®¾ç½®çš„æ˜¯Noï¼Œé‚£ä¹ˆåœ¨rediså®ä¾‹å…³é—­çš„æ—¶å€™ï¼Œä¼šä¸ä¼šå…³é—­å‰è°ƒç”¨fsyncåŒæ­¥åˆ°ç£ç›˜","like_count":0},{"had_liked":false,"id":288844,"user_name":"ç¬¬å››å•å…ƒ","can_delete":false,"product_type":"c1","uid":1747184,"ip_address":"","ucode":"3ED9D553E1DE17","user_header":"https://static001.geekbang.org/account/avatar/00/1a/a8/f0/529f15e9.jpg","comment_is_top":false,"comment_ctime":1618726381,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1618726381","product_id":100056701,"comment_content":"â€œé™¤æ­¤ä¹‹å¤–ï¼ŒAOF è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼šå®ƒæ˜¯åœ¨å‘½ä»¤æ‰§è¡Œåæ‰è®°å½•æ—¥å¿—ï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡å½“å‰çš„å†™æ“ä½œã€‚â€œ<br>è¿™é‡Œä¸ºä»€ä¹ˆå¼ºè°ƒæ˜¯å†™æ“ä½œï¼Œè¯»æ“ä½œå‘¢ï¼Ÿä¼šé˜»å¡ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373201,"discussion_content":"è¯»æ“ä½œå°±ç›´æ¥è¿”å›äº† ç­‰å¾…ä¸‹ä¸€ä¸ªop","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620650047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288448,"user_name":"å°ç¡ç¡î","can_delete":false,"product_type":"c1","uid":1102838,"ip_address":"","ucode":"049091D752DE29","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/f6/d9ecf4ea.jpg","comment_is_top":false,"comment_ctime":1618473492,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618473492","product_id":100056701,"comment_content":"ç¬¬ä¸‰è¯¾æ—¶ æŒä¹…åŒ–ä¸æ˜¯è¯´ æ˜¯é¢å¤–çš„çº¿ç¨‹æ‰§è¡Œçš„å—ï¼Ÿ  ","like_count":0},{"had_liked":false,"id":287670,"user_name":"æ¨é¢†well","can_delete":false,"product_type":"c1","uid":1145650,"ip_address":"","ucode":"3974A03855168C","user_header":"https://static001.geekbang.org/account/avatar/00/11/7b/32/60089a62.jpg","comment_is_top":false,"comment_ctime":1618100262,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618100262","product_id":100056701,"comment_content":"Redis AOF Rewrite æµç¨‹ï¼šhttps:&#47;&#47;1drv.ms&#47;u&#47;s!AhmQllsCO9DomTTRmu4LRYhHHurN?e=bbp45d","like_count":0},{"had_liked":false,"id":287530,"user_name":"çƒŸå¾’","can_delete":false,"product_type":"c1","uid":2551609,"ip_address":"","ucode":"72925C1EDD73D6","user_header":"","comment_is_top":false,"comment_ctime":1618016690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618016690","product_id":100056701,"comment_content":"å¦‚æœæœ‰å†™æ“ä½œï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚<br><br><br><br>ç¼“å†²åŒºé‡Œçš„æ•°æ®è¿˜æ²¡æœ‰å†™åˆ°ç£ç›˜çš„æ—¶å€™ï¼Œå°±å®•æœºäº†ï¼ŒAOF æ—¥å¿—æœ€æ–°æ“ä½œå²‚ä¸æ˜¯æ²¡äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":287346,"user_name":"å¼ºå“¥","can_delete":false,"product_type":"c1","uid":1623715,"ip_address":"","ucode":"F062E874C5AFEB","user_header":"https://static001.geekbang.org/account/avatar/00/18/c6/a3/2a780bc6.jpg","comment_is_top":false,"comment_ctime":1617894406,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1617894406","product_id":100056701,"comment_content":"ç¬¬2ä¸ªé—®é¢˜ï¼š 1.æœ¬æ¥AOFé‡å†™å°±æ˜¯ä¸ºäº†è§£å†³æ—¥å¿—è¿‡å¤§é—®é¢˜ï¼Œå…±ç”¨åŸæ¥çš„å²‚ä¸æ˜¯æ›´å¤§ï¼Ÿå…±äº«å®Œäº†ï¼ŒåŸæ¥çš„å†…å®¹æ€ä¹ˆåˆ ? 2.å…±ç”¨åŸæ¥çš„åŠ¿å¿…è€ƒè™‘å¦‚æœæŸä¸ªkeyæ–°å‘ç”Ÿäº†å†™ï¼Œé‚£ä¹ˆè€çš„æ—¥å¿—å°±ä¸è¦æ‹·è´è¿‡æ¥äº†ã€‚é‚£ä¹ˆåšæ—¥å¿—é‡å†™æ—¶æ˜¯ä¸æ˜¯è¿˜è¦æ£€æŸ¥æ¯ä¸ªkeyæœ€è¿‘å‘ç”Ÿäº†æ–°å†™ï¼Ÿ","like_count":0},{"had_liked":false,"id":285989,"user_name":"Geek_f5daa4","can_delete":false,"product_type":"c1","uid":2368063,"ip_address":"","ucode":"18B39BFAC73E2E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIk0cGUy1nvQ6n4k77faGe0bXns4Me1sZznP4aUTUXRApcicKmesc7tpsF2wBqC1Ckicw1bd5T7XvsQ/132","comment_is_top":false,"comment_ctime":1617095537,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617095537","product_id":100056701,"comment_content":"å¦‚æœä¸å°å¿ƒè§¦å‘äº†flushdbæ“ä½œï¼Œè¯¥æ€ä¹ˆæ¢å¤å‘¢ï¼Ÿ<br>ï¼ˆåœ¨keyå¾ˆå°‘çš„å®éªŒç¯å¢ƒä¸‹åœ¨aofæ–‡ä»¶ä¸­åˆ æ‰flushdbç›¸å…³è¡Œå†æ‰§è¡Œredis-check-aof --fix appendonly.aofï¼Œç„¶åé‡å¯redisæœåŠ¡ï¼Œæ˜¯å¯ä»¥æ¢å¤å†…å­˜çš„ï¼›ä½†å½“æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒä¸‹å¤æ‚çš„æƒ…å†µä¸‹ï¼Œredis-check-aof --fix appendonly.aofå‘½ä»¤ä¼šç›´æ¥æŠŠaofæ–‡ä»¶åˆ å‡åˆ°å‡ ä¹ä¸ºç©ºï¼‰","like_count":0},{"had_liked":false,"id":285363,"user_name":"è“è§","can_delete":false,"product_type":"c1","uid":1227606,"ip_address":"","ucode":"DE125B56BF7818","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/56/a506a165.jpg","comment_is_top":false,"comment_ctime":1616753722,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616753722","product_id":100056701,"comment_content":"AOFé‡å†™æ—¶ï¼Œå¦‚æœç£ç›˜æ»¡äº†ä¼šæ€ä¹ˆæ ·ï¼Ÿä¼šæŠ¥é”™è¿˜æ˜¯é™é»˜ä¸å·¥ä½œäº†","like_count":0},{"had_liked":false,"id":285028,"user_name":"åŒ†åŒ†é‚£å¹´","can_delete":false,"product_type":"c1","uid":1792255,"ip_address":"","ucode":"6CF758D19815FA","user_header":"https://static001.geekbang.org/account/avatar/00/1b/58/ff/d1add6f2.jpg","comment_is_top":false,"comment_ctime":1616583168,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1616583168","product_id":100056701,"comment_content":"&quot;AOF æ—¥å¿—ä¹Ÿæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¦‚æœåœ¨æŠŠæ—¥å¿—æ–‡ä»¶å†™å…¥ç£ç›˜æ—¶ï¼Œç£ç›˜å†™å‹åŠ›å¤§ï¼Œå°±ä¼šå¯¼è‡´å†™ç›˜å¾ˆæ…¢ï¼Œè¿›è€Œå¯¼è‡´åç»­çš„æ“ä½œä¹Ÿæ— æ³•æ‰§è¡Œäº†&quot;ï¼Œè¿™ä¸ªæ˜¯åœ¨ä¸»çº¿ç¨‹å—ï¼Œä¸æ˜¯ AOF æŠŠå†…å®¹å†™åˆ°å†…å­˜ç¼“å­˜ä¸­ï¼Œå†…æ ¸å¼‚æ­¥æŠŠå†…å®¹åˆ·å›ç£ç›˜å—","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388370,"discussion_content":"è¿™ä¸ªä»…é™äºalwaysç­–ç•¥å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628735605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285022,"user_name":"è“è§","can_delete":false,"product_type":"c1","uid":1227606,"ip_address":"","ucode":"DE125B56BF7818","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/56/a506a165.jpg","comment_is_top":false,"comment_ctime":1616581496,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1616581496","product_id":100056701,"comment_content":"AOFé…ç½®everysecæ—¶ï¼Œæ¯ç§’è§¦å‘çš„AOFæ—¥å¿—å†™å…¥æ˜¯ä¸»çº¿ç¨‹å®Œæˆçš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388371,"discussion_content":"å­çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628735624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284564,"user_name":"å‡ è¿‘è™šå¹´","can_delete":false,"product_type":"c1","uid":1355831,"ip_address":"","ucode":"28CD6486EED8E2","user_header":"https://static001.geekbang.org/account/avatar/00/14/b0/37/d654fbac.jpg","comment_is_top":false,"comment_ctime":1616340907,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1616340907","product_id":100056701,"comment_content":"çœ‹äº†å¾ˆå¤šè¯„è®ºï¼Œæˆ‘ç†è§£çš„é‡å†™ AOF æ—¥å¿—æ˜¯è¿™æ ·çš„ï¼š<br>å¦‚æœæ˜¯æ²¡æœ‰ä¿®æ”¹çš„æ•°æ®ï¼Œæ—§ AOF æ—¥å¿—æ–‡ä»¶å’Œæ–° AOF æ—¥å¿—æ–‡ä»¶ï¼Œéƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ªç‰©ç†å†…å­˜åœ°å€ã€‚ï¼ˆå†™å®å¤åˆ¶æœºåˆ¶ï¼‰<br>å†™å…¥æ–°æ•°æ®æ—¶é‡æ–°åˆ†é…å†…å­˜ï¼ŒåŒæ—¶å°†å†…å­˜åœ°å€å†™å…¥æ—§ã€æ–° AOF æ—¥å¿—ä¸­ã€‚<br>ä¿®æ”¹æ•°æ®ï¼Œçˆ¶çº¿ç¨‹åˆ†é…å†…å­˜ï¼ˆæ­¤æ—¶å¯¹æ–° AOF æ—¥å¿—ä¸å¯è§ï¼‰ï¼Œå†™å…¥æ—§ AOF æ—¥å¿—ç¼“å†²åŒºï¼Œæœ€åå†™å…¥åˆ°æ–° AOF æ—¥å¿—ã€‚<br>ä¸çŸ¥é“å¯¹ä¸å¯¹...","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388373,"discussion_content":"åº”è¯¥æ˜¯forkå­è¿›ç¨‹æ—¶ä¸»è¿›ç¨‹å’Œforkçš„å­è¿›ç¨‹å…±äº«äº†ä¸»çº¿ç¨‹çš„å†…å­˜åœ°å€ï¼Œè·Ÿæ—¥å¿—æ–‡ä»¶æ²¡å…³ç³»ã€‚å­çº¿ç¨‹çº¯ç²¹çš„è¯»ä¸ä¼šæ¶‰åŠä¿®æ”¹ï¼Œæ‰€æœ‰çš„æ–°å¢åˆ é™¤ä¿®æ”¹æ•°æ®éƒ½ä¼šç»™ä¸»è¿›ç¨‹é‡æ–°åˆ†é…å†…å­˜ï¼Œæ“ä½œåŒæ—¶è®¡å…¥é‡æ–°aofç¼“å­˜ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628735929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284006,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1616035313,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1616035313","product_id":100056701,"comment_content":"åœ¨æœåŠ¡å™¨å®•æœºçš„æƒ…å†µä¸‹ï¼ŒRedis è‡ªå·±å®ç°æŒä¹…åŒ–ä¸é€šè¿‡åç«¯æ•°æ®åº“æ¢å¤æ•°æ®å“ªä¸€ä¸ªæ€§èƒ½æ›´å¥½ï¼Ÿæ¯«æ— ç–‘é—®æ˜¯ Redisï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒRedis æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿ<br><br>AOF é‡Œé¢è®°å½•äº† Redis çš„æ¯ä¸€æ¡å‘½ä»¤ï¼Œå…¶å®åœ¨ MySQL é‡Œé¢ä¹Ÿæœ‰ binlogï¼Œå¦‚æœè®¾ç½®æˆ statementï¼Œä¹Ÿèƒ½è®°å½•æ¯ä¸€æ¡ SQLã€‚<br><br>Redis ä½¿ç”¨å†™åæ—¥å¿—ï¼Œå‡å°‘äº†é¢å¤–çš„å‘½ä»¤è¯­æ³•æ£€æŸ¥å¼€é”€ï¼Œå¯ä»¥é¿å…å‡ºç°è®°å½•é”™è¯¯æ—¥å¿—ã€‚å¦å¤–ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œä¸ä¼šé˜»å¡å½“å‰çš„å†™æ“ä½œã€‚<br><br>AOF çš„é‡å†™å…¶å®é€‚åˆåº”ç”¨åœºæ™¯å¯†åˆ‡ç›¸å…³çš„ï¼Œå› ä¸º Redis ä¸»è¦åº”ç”¨äºç¼“å­˜åœºæ™¯ï¼Œæ‰€ä»¥ä¸å¤ªåœ¨æ„æŸä¸€ä¸ª key çš„æ“ä½œå†å²ï¼Œåªåœ¨ä¹è¿™ä¸ª key çš„å½“å‰å€¼ã€‚<br><br>AOF é‡å†™æœºåˆ¶è™½ç„¶å·§å¦™ï¼Œä½†æ˜¯æ™®é€šæ•°æ®åº“ä¼°è®¡æ²¡æ³•ä½¿ç”¨ã€‚<br><br>AOF é‡å†™ç”±åå°å­è¿›ç¨‹ bgrewriteaof æ¥å®Œæˆï¼Œé‡‡ç”¨â€œä¸€ä¸ªæ‹·è´ï¼Œä¸¤å¤„æ—¥å¿—â€çš„æ–¹å¼ã€‚<br><br>å¯¹äºè¯¾åæ€è€ƒé¢˜ï¼Œç¬¬ä¸€é¢˜ï¼Œåœ¨ bgrewriteaof å­è¿›ç¨‹è¿›è¡Œé‡å†™çš„è¿‡ç¨‹ï¼Œæˆ‘è§‰çš„åœ¨æ‹·è´çš„æ—¶å€™æœ‰å¯èƒ½ä¼šå‘ç”Ÿé˜»å¡ï¼Œå¦‚æœæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆæ‹·è´å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼ˆåœ¨å†…å­˜é‡Œï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥ï¼‰ï¼Œå¦ä¸€æ–¹é¢ï¼Œå°±æ˜¯æœ‰å¯èƒ½æŠŠå†…å­˜å æ»¡ï¼ŒStackOverflow ?<br><br>ç¬¬äºŒä¸ªé¢˜ç›®ï¼ŒAOF é‡å†™çš„é‡å†™æ—¥å¿—åº”è¯¥æ˜¯åœ¨å‘ç”Ÿé‡æ–°çš„æ—¶å€™ï¼ˆå‡è®¾æ­¤æ—¶çš„æ—¶é—´ä¸º t1ï¼‰å¼€å§‹è®°å½•çš„ï¼Œæ¯”åŸæœ‰çš„ AOF é‡å†™æ—¥å¿—è¦å°å¾ˆå¤šï¼Œè¿™æ ·åœ¨å®Œæˆäº† t1 ä¹‹å‰çš„æ—¥å¿—é‡å†™ä¹‹åï¼ŒåŸæœ‰çš„ AOF æœ¬èº«çš„æ—¥å¿—å°±å¯ä»¥åˆ é™¤äº†ã€‚AOF é‡å†™çš„é‡å†™æ—¥å¿—ç›¸å¯¹æ¥è¯´è¦å°ä¸€äº›ï¼Œè¯»å†™æ€§èƒ½æ›´å¥½ï¼Œæœ€ç»ˆåˆ é™¤çš„æ—¶å€™ä¹Ÿæ›´å¿«ã€‚<br><br>çœ‹äº† @Kaito çš„ç­”æ¡ˆï¼Œåªèƒ½è†œæ‹œã€‚<br><br>ç•™è¨€é‡Œé¢è¿˜æåˆ° AOF æ˜¯ Append Only File çš„ç¼©å†™ï¼Œä¹Ÿç®—æ˜¯è§£äº†æˆ‘çš„ä¸€ä¸ªç–‘æƒ‘ã€‚","like_count":0},{"had_liked":false,"id":283237,"user_name":"å°å´å¤§äºº","can_delete":false,"product_type":"c1","uid":1795769,"ip_address":"","ucode":"4187A1E3AFCE84","user_header":"https://static001.geekbang.org/account/avatar/00/1b/66/b9/52e303cf.jpg","comment_is_top":false,"comment_ctime":1615634342,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615634342","product_id":100056701,"comment_content":"aofé‡å†™è¿‡ç¨‹ä¸­ï¼Œaofç¼“å­˜æˆ–è€…é‡å†™ç¼“å­˜ä¸æ­¢è®°å½•å†™æ“ä½œå§ï¼Ÿåˆ é™¤ä¿®æ”¹æ˜¯ä¸æ˜¯ä¹Ÿåº”è¯¥è®°å½•ä¸€ä¸‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":283203,"user_name":"xiaoyu","can_delete":false,"product_type":"c1","uid":1245915,"ip_address":"","ucode":"477617C15FB5CC","user_header":"https://static001.geekbang.org/account/avatar/00/13/02/db/5d227be5.jpg","comment_is_top":false,"comment_ctime":1615619327,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1615619327","product_id":100056701,"comment_content":"é—®é¢˜ä¸€<br>å­è¿›ç¨‹å®ŒæˆAOFé‡å†™ä¹‹åï¼Œä¼šé€šçŸ¥çˆ¶è¿›ç¨‹ï¼ˆå‘é€ä¿¡å·ï¼‰ï¼Œçˆ¶è¿›ç¨‹æ”¶åˆ°ä¿¡å·åä¼šè°ƒç”¨ä¿¡å·å¤„ç†å‡½æ•°ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œ<br>1. å°†AOFé‡å†™ç¼“å†²åŒºçš„å†…å®¹å†™å…¥åˆ°æ–°çš„AOFæ–‡ä»¶ä¸­<br>2. å¯¹æ–°çš„AOFæ–‡ä»¶æ”¹åå¹¶æ›¿æ¢åŸæœ‰çš„AOFæ–‡ä»¶<br><br>ä¸Šè¿°æ“ä½œä¹Ÿä¼šé€ æˆä¸»çº¿ç¨‹é˜»å¡","like_count":0},{"had_liked":false,"id":281793,"user_name":"HUNTER","can_delete":false,"product_type":"c1","uid":1114579,"ip_address":"","ucode":"184725E9ED0E2C","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/d3/5cbaeb95.jpg","comment_is_top":false,"comment_ctime":1614905617,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614905617","product_id":100056701,"comment_content":"è€å¸ˆä½ å¥½ï¼ŒAOFç¼“å†²åŒºé‡Œçš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜çš„æ“ä½œï¼Œæ˜¯ç”±ä¸»è¿›ç¨‹å®Œæˆçš„å—","like_count":0},{"had_liked":false,"id":280503,"user_name":"Spoon","can_delete":false,"product_type":"c1","uid":1959822,"ip_address":"","ucode":"2FF9193AD482C2","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e7/8e/318cfde0.jpg","comment_is_top":false,"comment_ctime":1614237103,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614237103","product_id":100056701,"comment_content":"aof forkä¹‹åï¼Œä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹ä¹‹é—´æ˜¯é€šè¿‡ç®¡é“æ¥é€šä¿¡çš„å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":280342,"user_name":"å›¢åœ†ä¸","can_delete":false,"product_type":"c1","uid":2161554,"ip_address":"","ucode":"23DD0146F43C7D","user_header":"https://static001.geekbang.org/account/avatar/00/20/fb/92/17923e19.jpg","comment_is_top":false,"comment_ctime":1614162194,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614162194","product_id":100056701,"comment_content":"è¯·é—®è’‹è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼šforkå‡ºä¸€ä»½æ•°æ®ï¼Œé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€å†…å­˜ä½¿ç”¨é‡ä¸€ä¸‹å­å°±ç¿»å€äº†ï¼Ÿæ¯”å¦‚æœåŠ¡å™¨å†…å­˜100Gï¼Œrediså½“å‰ç”¨äº†60Gï¼Œé‚£è¿™æ—¶forkä¼šæˆåŠŸå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388375,"discussion_content":"åªæ˜¯æ‹·è´äº†å†…å­˜åœ°å€é¡µä¸æ˜¯æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628736037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275790,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1611667841,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1611667841","product_id":100056701,"comment_content":"è€å¸ˆï¼Œè¯·é—®å°†bgrewriteaofç¼“å­˜å†™å…¥æ–‡ä»¶æ—¶ï¼Œredisä¸»è¿›ç¨‹ä¼šè¢«é˜»å¡å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":275260,"user_name":"David","can_delete":false,"product_type":"c1","uid":1168519,"ip_address":"","ucode":"B022C57C0FDC0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/87/aa475f0a.jpg","comment_is_top":false,"comment_ctime":1611413497,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611413497","product_id":100056701,"comment_content":"redis ç”¨AOF æ¢å¤æ•°æ®ï¼Œé¿å…å¤§é‡è¯·æ±‚æ•°æ®åº“é€ æˆæ•°æ®åº“å‹åŠ›å’ŒæœåŠ¡å“åº”å˜æ…¢æˆ‘ã€‚ä¸ºäº†å¹³è¡¡å¯é æ€§å’Œæ€§èƒ½ï¼Œredisæä¾›äº†ä¸‰ç§å›å†™ç­–ç•¥ã€‚ç”¨é‡å†™è§£å†³AOF æ–‡ä»¶è¿‡å¤§çš„é—®é¢˜ï¼Œé‡å†™åœ¨forkçš„å­è¿›ç¨‹ä¸­è¿›è¡Œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚","like_count":0},{"had_liked":false,"id":274637,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1611108215,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1611108215","product_id":100056701,"comment_content":"ä¸ºä»€ä¹ˆaofåˆ·ç›˜ä¸ç›´æ¥é‡‡ç”¨å¼‚æ­¥å‘¢ï¼Ÿè¿™æ ·åªè¦ç½‘ç»œé€Ÿç‡å°äºç£ç›˜å†™å…¥é€Ÿç‡ï¼Œå°±å¯ä»¥ä¿è¯æ•°æ®ä¸ä¸¢äº†","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392849,"discussion_content":"çŒœæµ‹åˆ·ç›˜ï¼Œä¹Ÿæ˜¯å¯¹å…±äº«èµ„æºçš„å¤„ç†ï¼Œå¼‚æ­¥å°±è¦è€ƒè™‘é”çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631153000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271870,"user_name":"åƒŠå³¯","can_delete":false,"product_type":"c1","uid":2039980,"ip_address":"","ucode":"FA140E7653C26D","user_header":"https://static001.geekbang.org/account/avatar/00/1f/20/ac/c609855b.jpg","comment_is_top":false,"comment_ctime":1609846993,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1609846993","product_id":100056701,"comment_content":"å› ä¸ºä¸»çº¿ç¨‹æœªé˜»å¡ï¼Œä»ç„¶å¯ä»¥å¤„ç†æ–°æ¥çš„æ“ä½œã€‚æ­¤æ—¶ï¼Œå¦‚æœæœ‰å†™æ“ä½œï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚<br>è¿™ä¸€æ®µé‡Œé¢åªæ˜¯æŠŠæ“ä½œå†™å…¥ç¼“å­˜åŒºï¼Œå®•æœºäº†æ€ä¹ˆå¯èƒ½æ—¥å­æ“ä½œæ˜¯é½å…¨çš„ï¼Ÿåˆæ²¡æœ‰è½ç›˜","like_count":0},{"had_liked":false,"id":270818,"user_name":"Just Do IT","can_delete":false,"product_type":"c1","uid":1192724,"ip_address":"","ucode":"1EAD92510FA7BE","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/14/78104f1f.jpg","comment_is_top":false,"comment_ctime":1609289948,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1609289948","product_id":100056701,"comment_content":"æ„Ÿè§‰åè¾¹è¯´çš„æœ‰ç‚¹ä¹±<br>1.ä¸€ä¸ªæ‹·è´   ä¸»çº¿ç¨‹æ‰€æ‹¥æœ‰çš„æ•°æ®è¢«å­çº¿ç¨‹å…¨éƒ¨æ‹·è´è¿‡å»ï¼Œä¸»çº¿ç¨‹çš„å†…å­˜ä»ç„¶æœ‰æ–°æ•°æ®å†™å…¥ï¼Œè¿™ä¸ªæ–°æ•°æ®æ˜¯æ€ä¹ˆåˆ°å­çº¿ç¨‹é‚£é‡Œå»çš„ï¼Ÿ<br><br>2.ä¸»çº¿ç¨‹åœ¨æ›´æ–°AOFæ–‡ä»¶   å­çº¿ç¨‹åœ¨æ›´æ–°é‡å†™AOFæ–‡ä»¶ï¼Œæ–°æ–‡ä»¶æ›¿æ¢æ—§æ–‡ä»¶ï¼Œéš¾é“æ˜¯ç›´æ¥ç”¨é‡å†™æ—¥å¿—æ–‡ä»¶æ›¿æ¢åŸAOFæ—¥å¿—æ–‡ä»¶ï¼Ÿ è¿™ä¸¤ä¸ªæ–‡ä»¶æ ¼å¼å®Œå…¨ä¸ä¸€æ ·ï¼Œç›´æ¥æ›¿æ¢è‚¯å®šä¼šå‡ºé—®é¢˜ã€‚<br><br><br>3.å¦‚æœä¸æ˜¯ç›´æ¥æ›¿æ¢ï¼Œé‚£å°±æ˜¯å­çº¿ç¨‹ä¹Ÿæœ‰è‡ªå·±çš„AOFæ–‡ä»¶ï¼Œæ„å‘³ç€å­çº¿ç¨‹è¦åŒæ—¶å†™ä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Ÿç”¨è‡ªå·±çš„AOFæ›¿æ¢ä¸»çº¿ç¨‹çš„AOFæ–‡ä»¶ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388376,"discussion_content":"1.ä¸»è¿›ç¨‹çš„æ•°æ®å˜æ›´éƒ½ä¼šè®°å½•åˆ°é‡å†™aofç¼“å­˜çš„ 2æ–‡ä»¶æ ¼å¼ä¸€æ ·çš„ï¼Œé‡å†™æ—¥å¿—ä¸è¿‡æ˜¯æŠŠä¸­é—´è¿‡ç¨‹æ—¥å¿—æ»¤æ‰äº†ï¼Œä¿ç•™æœ€ç»ˆç»“æœæ—¥å¿— 3.ç›´æ¥æ–‡ä»¶æ”¹åæ›¿æ¢äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628736289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267140,"user_name":"äº”è§’åœºæ’¸ä¸ªä¸²","can_delete":false,"product_type":"c1","uid":2281148,"ip_address":"","ucode":"543A7015D1E0CD","user_header":"https://static001.geekbang.org/account/avatar/00/22/ce/bc/8177eef4.jpg","comment_is_top":false,"comment_ctime":1607606786,"is_pvip":false,"replies":[{"id":"97906","content":"è°¢è°¢ï¼Œä¸€èµ·åŠªåŠ›ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1608975172,"ip_address":"","comment_id":267140,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607606786","product_id":100056701,"comment_content":"ä¸€å£æ°”çœ‹äº†å¥½å¤šèŠ‚è¯¾ï¼Œæ„Ÿè°¢è€å¸ˆçš„ç”¨å¿ƒå‡†å¤‡ã€‚è€å¸ˆçš„è¯¾ä»é—®é¢˜å‡ºå‘ï¼Œä»è¡¨é¢åˆ°åŸç†ï¼Œå¾ªåºæ¸è¿›ï¼Œé€šä¿—æ˜“æ‡‚ã€‚å¯¹æ¯”å…¶ä»–æœ‰äº›è¯¾ç¨‹ï¼Œè¦ä¹ˆæµ®äºè¡¨é¢ï¼Œè¦ä¹ˆæ™¦æ¶©éš¾æ‡‚ã€‚å¸Œæœ›è€å¸ˆèƒ½å¤Ÿå†å‡ºæ›´å¤šè¯¾ç¨‹ï¼Œè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511521,"discussion_content":"è°¢è°¢ï¼Œä¸€èµ·åŠªåŠ›ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608975172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264762,"user_name":"è®¸å³°","can_delete":false,"product_type":"c1","uid":2346462,"ip_address":"","ucode":"C12E7B53D7E658","user_header":"https://static001.geekbang.org/account/avatar/00/23/cd/de/0334fd13.jpg","comment_is_top":false,"comment_ctime":1606635954,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606635954","product_id":100056701,"comment_content":"è¿˜æ˜¯æ²¡å¤ªæ˜ç™½<br>1. å­è¿›ç¨‹bgrewriteaofåœ¨ä¸»è¿›ç¨‹æ¥å—æ•°æ®, ä¹Ÿæœ‰æƒè·å¾—åŒæ ·ä¸€ä»½æ•°æ®, å¹¶ä¸”å°†å®ƒä»¬æŒ‰ç…§æ—¥å¿—è®°å½•çš„æ ¼å¼å†™è½½å“ªé‡Œ? ç¼“å†²åŒº? è¿˜æ˜¯æ–‡ä»¶? å®ƒä¼šå½¢æˆä¸€ä¸ªå…·ä½“çš„æ–‡ä»¶å—?<br>2. å­è¿›ç¨‹bgrewriteaofè®°å½•å®Œæ—¥å¿—, å’Œä¸»è¿›ç¨‹æ‰§è¡Œå‘½ä»¤æ˜¯åŒæ­¥çš„å—? åªæœ‰åŒæ­¥, æ‰ä¼šå®•æœºä¸ä¸¢å¤±æ—¥å¿—<br>3. åŸºäº2, å®•æœºæ—¶, AOFé‡å†™æ—¥å¿—å¯ç”¨, AOFæ—¥å¿—ä¸¢å¤±, AOFé‡å†™æ—¥å¿—æ˜¯æ€ä¹ˆæ›¿æ¢AOFæ—¥å¿—çš„?","like_count":0},{"had_liked":false,"id":264632,"user_name":"åœ†åœ†æ»¡æ»¡","can_delete":false,"product_type":"c1","uid":1484192,"ip_address":"","ucode":"396E7A822014D1","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/a0/e0cccf7e.jpg","comment_is_top":false,"comment_ctime":1606553829,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606553829","product_id":100056701,"comment_content":"å’¨è¯¢è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼ŒRedisæ˜¯å¦èƒ½å¤Ÿä¿è¯æ•°æ®100%ä¸ä¸¢å¤±ï¼Ÿå¦‚æœèƒ½ï¼Œè¯¥æ€ä¹ˆåšæ‰èƒ½ä¿è¯ä¸ä¸¢å¤±ï¼Ÿ","like_count":0},{"had_liked":false,"id":263675,"user_name":"BertGeek","can_delete":false,"product_type":"c1","uid":1452799,"ip_address":"","ucode":"8E1D72C9F9778C","user_header":"https://static001.geekbang.org/account/avatar/00/16/2a/ff/a9d72102.jpg","comment_is_top":false,"comment_ctime":1606215578,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606215578","product_id":100056701,"comment_content":"å¯¹redisæœ‰äº†æ–°çš„è®¤è¯†ï¼Œæœ‰å‡ ä¸ªç–‘é—®ï¼Œè¯·è€å¸ˆè§£ç­”ï¼Œéå¸¸æ„Ÿè°¢ï¼<br><br>1. bgwriteaofå­è¿›ç¨‹é‡å†™æ—¥å¿—ï¼Œå¯¹äºæ–°å†™å…¥çš„æ•°æ®ï¼Œå¦‚æœå¤„ç†ï¼Ÿä½•æ—¶è¾¾åˆ°æ•°æ®ä¸€è‡´ï¼Ÿ<br>   1) å¦‚æœæœ‰æ–°æ•°æ®å†™å…¥ï¼Œä¸»è¿›ç¨‹ç»§ç»­å›åŸæ¥çš„æ—¥å¿—æ–‡ä»¶ï¼Œ<br>   2) åœ¨bgrewriteaofå­è¿›ç¨‹ä¸­æ˜¯æ²¡æœ‰è¿™ä»½æ•°æ®çš„ï¼Œä¸»è¿›ç¨‹æ˜¯å¼€äº†ä¸€ç‰‡ç¼“å­˜åŒºä¿å­˜è¿™ä»½æ•°æ®çš„ï¼Œ<br>   3) åœ¨bgrewriteaofå­è¿›ç¨‹é‡å†™æ—¥å¿—å®Œæˆï¼Œæ‰ä¼šå°†è¿™ç¼“å­˜æ–°çƒ­æ•°æ®å†™å…¥æ–°çš„æ—¥å¿—æ–‡ä»¶ä¸­<br>   4ï¼‰åŸå­é‡å‘½åæ›¿æ¢æ‰åŸæ¥çš„æ—¥å¿—æ–‡ä»¶ã€‚   <br><br>2. é‡å†™AOFæ—¥å¿—çš„æ—¶å€™å¦‚æœRedisæŒ‚äº†é‡å¯ï¼Œé‚£é‡å†™AOFæ—¥å¿—ä¼šæ¥ç€ä¹‹å‰çš„è¿›åº¦é‡å†™AOFæ—¥å¿—è¿˜æ˜¯é‡æ–°ä»å¤´å¼€å§‹å†™å•Šï¼Ÿ<br><br>3. ä½¿ç”¨redis aof å¤‡ä»½å’Œæ¢å¤ã€è¿ç§»ï¼Œå¯¹ç‰ˆæœ¬æœ‰å¼ºä¸€è‡´æ€§è¦æ±‚ä¹ˆï¼Ÿ<br><br><br><br><br><br><br>","like_count":0},{"had_liked":false,"id":262170,"user_name":"Cloud_July","can_delete":false,"product_type":"c1","uid":1003699,"ip_address":"","ucode":"98646F7142CBFF","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL8L7Am3u37GO6CWKqBbI02DZ2ss3IZb0F9OLewAS446vh3aicndQ255HjEDzIldBUhRpUbL04rnDA/132","comment_is_top":false,"comment_ctime":1605635576,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605635576","product_id":100056701,"comment_content":"é‡å†™å…¶å®æ˜¯åœ¨æŸä¸ªæ—¶åˆ»å¯¹å½“å‰çš„å†…å­˜åº“æ•°æ®è®°å½•äº†ä¸€ä»½setæ—¥å¿—å§ï¼Œæ²¡æœ‰ä½¿ç”¨aofæ—¥å¿—åšåˆå¹¶ï¼Œè¿™æ ·çš„è¯é‡å†™è·Ÿaofç±»ä¼¼ï¼Œä¹Ÿä¼šå­˜åœ¨é‡å†™é¢‘ç‡çš„é—®é¢˜å§ï¼ŒåŒæ—¶åˆç±»ä¼¼RDBï¼Œåªä¸è¿‡RDBæ˜¯å¿«ç…§ï¼Œç›´æ¥è®°å½•çš„recordï¼Œè€Œé‡å†™æ˜¯è®°å½•çš„set æ“ä½œï¼Œç±»ä¼¼mysqlçš„redo log è·Ÿbinlog rowæ¨¡å¼ï¼Œä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹","like_count":0},{"had_liked":false,"id":261694,"user_name":"å¯¹ä¸é”™","can_delete":false,"product_type":"c1","uid":1682027,"ip_address":"","ucode":"EF55733E3BD78B","user_header":"https://static001.geekbang.org/account/avatar/00/19/aa/6b/ab9a072a.jpg","comment_is_top":false,"comment_ctime":1605491549,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605491549","product_id":100056701,"comment_content":"è¯·é—®ï¼Œbgwriteaofå­è¿›ç¨‹åªæ˜¯ç”¨æ¥æŠŠé”®å€¼æ•°æ®åº“ä¸­çš„æ•°æ®é‡å†™ä¸ºæ“ä½œæŒ‡ä»¤ï¼Œç„¶åæ”¾åˆ°AOFé‡å†™æ—¥å¿—ä¸­å—ï¼Œè¿™ä¸ªå­è¿›ç¨‹åº”è¯¥ä¸ä¼šå¾€AOFé‡å†™ç¼“å†²åŒºé‡Œé¢åŠ æ•°æ®å§ï¼Œç­‰åˆ°é‡å†™å®Œæˆä¹‹åï¼Œå†æŠŠé‡å†™æ—¥å¿—ä¸é‡å†™ç¼“å†²åŒºå†…çš„æ•°æ®åˆå¹¶ä½œä¸ºæ–°çš„AOFæ—¥å¿—ï¼Œæˆ‘è¿™æ ·ç†è§£æ˜¯å¯¹çš„å—ï¼Ÿè¿˜æœ‰å­è¿›ç¨‹åœ¨é‡å†™æœŸé—´ä¸ä¼šå› ä¸ºçˆ¶è¿›ç¨‹æœ‰æ–°çš„å†™å…¥æ“ä½œï¼Œè€Œæ‹·è´å‡ºæ–°çš„å†…å­˜ç©ºé—´ï¼Ÿ","like_count":0},{"had_liked":false,"id":259266,"user_name":"Geek_52fe14","can_delete":false,"product_type":"c1","uid":2213840,"ip_address":"","ucode":"2948724BF5815E","user_header":"","comment_is_top":false,"comment_ctime":1604665696,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604665696","product_id":100056701,"comment_content":"aofç¼“å†²åŒºæ˜¯ä¸æ˜¯å®•æœºæ•°æ®ä¸ä¼šä¸¢å¤±","like_count":0},{"had_liked":false,"id":258766,"user_name":"æ˜æœˆå‡ æ—¶","can_delete":false,"product_type":"c1","uid":1675716,"ip_address":"","ucode":"E46C844EAB2CD0","user_header":"https://static001.geekbang.org/account/avatar/00/19/91/c4/bcdcda65.jpg","comment_is_top":false,"comment_ctime":1604551653,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1604551653","product_id":100056701,"comment_content":"ä¸ºäº†é¿å…æ—¥å¿—æ–‡ä»¶è¿‡å¤§ï¼ŒRedis æä¾›äº† AOF é‡å†™æœºåˆ¶ï¼Œç›´æ¥æ ¹æ®æ•°æ®åº“é‡Œæ•°æ®çš„æœ€æ–°çŠ¶æ€ï¼Œç”Ÿæˆè¿™äº›æ•°æ®çš„æ’å…¥å‘½ä»¤ï¼Œä½œä¸ºæ–°æ—¥å¿—ã€‚è¿™ä¸ªè¿‡ç¨‹é€šè¿‡åå°çº¿ç¨‹å®Œæˆï¼Œé¿å…äº†å¯¹ä¸»çº¿ç¨‹çš„é˜»å¡ï¼","like_count":0},{"had_liked":false,"id":257661,"user_name":"æ¼‚æ³Šè€…åŠå…¶å½±å­","can_delete":false,"product_type":"c1","uid":1119979,"ip_address":"","ucode":"13FE760FE8B111","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/eb/30864e40.jpg","comment_is_top":false,"comment_ctime":1604050335,"is_pvip":false,"replies":[{"id":"98034","content":"åŒæ—¶å¼€å¯RDBå’ŒAOFæ—¶ï¼Œä¼šä¼˜å…ˆä½¿ç”¨AOFæ–‡ä»¶è¿›è¡Œæ¢å¤ï¼Œå› ä¸ºç›¸æ¯”RDBï¼ŒAOFæ–‡ä»¶ä¿å­˜çš„å‘½ä»¤æ“ä½œé€šå¸¸æ›´å…¨äº›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1609111318,"ip_address":"","comment_id":257661,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604050335","product_id":100056701,"comment_content":"é—®ä¸ªé—®é¢˜ï¼šredisåŒæ—¶å¼€å¯RDBå’ŒAOFï¼Œredisé‡å¯åŸºäºå“ªä¸ªæ–‡ä»¶è¿›è¡Œæ•°æ®æ¢å¤","like_count":0,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508407,"discussion_content":"åŒæ—¶å¼€å¯RDBå’ŒAOFæ—¶ï¼Œä¼šä¼˜å…ˆä½¿ç”¨AOFæ–‡ä»¶è¿›è¡Œæ¢å¤ï¼Œå› ä¸ºç›¸æ¯”RDBï¼ŒAOFæ–‡ä»¶ä¿å­˜çš„å‘½ä»¤æ“ä½œé€šå¸¸æ›´å…¨äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609111318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":256324,"user_name":"æ˜æœˆå‡ æ—¶","can_delete":false,"product_type":"c1","uid":1675716,"ip_address":"","ucode":"E46C844EAB2CD0","user_header":"https://static001.geekbang.org/account/avatar/00/19/91/c4/bcdcda65.jpg","comment_is_top":false,"comment_ctime":1603599433,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1603599433","product_id":100056701,"comment_content":"çˆ¶å­ä¸¤ä¸ªè¿›ç¨‹æœ¬æ¥å°±æ²¡æœ‰éœ€è¦ç«äº‰çš„æ•°æ®ï¼Œè€å¸ˆæ‰€æŒ‡çš„ä¸¤ä¸ªæ—¥å¿—åº”è¯¥æ˜¯â€œAOFç¼“å†²åŒºâ€å’Œ&quot;AOFé‡å†™ç¼“å†²åŒº&quot;ï¼Œè€Œä¸æ˜¯ç£ç›˜ä¸Šçš„AOFæ–‡ä»¶ï¼Œä¹‹æ‰€æœ‰å¦å¤–æœ‰ä¸€ä¸ª&quot;AOFé‡å†™ç¼“å†²åŒº&quot;ï¼Œæ˜¯å› ä¸ºé‡å†™æœŸé—´ï¼Œä¸»è¿›ç¨‹AOFè¿˜åœ¨ç»§ç»­å·¥ä½œï¼Œè¿˜æ˜¯ä¼šåŒæ­¥åˆ°æ—§çš„AOFæ–‡ä»¶ä¸­ï¼ŒåŒæ­¥æˆåŠŸåï¼Œâ€œAOFç¼“å†²åŒºâ€ä¼šè¢«æ¸…é™¤ï¼Œä¼šè¢«æ¸…é™¤ï¼Œä¼šè¢«æ¸…é™¤ï¼","like_count":0},{"had_liked":false,"id":254783,"user_name":"Reborn 2.0","can_delete":false,"product_type":"c1","uid":1977474,"ip_address":"","ucode":"BA506E7455D91C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/2c/82/98e2b82a.jpg","comment_is_top":false,"comment_ctime":1603186243,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1603186243","product_id":100056701,"comment_content":"è€å¸ˆä½ å¥½, æˆ‘æƒ³é—®ä¸€ä¸ªé—®é¢˜: åœ¨&#39;AOFéé˜»å¡çš„é‡å†™è¿‡ç¨‹&#39;é…å›¾é‡Œ, åœ¨AOFé‡å†™æ—¶å€™, ä¸»è¿›ç¨‹ç»´æŠ¤äº†ä¸¤ä¸ªAOFç¼“å†²: ä¸€ä¸ªæ˜¯åŸæ¥çš„AOFç¼“å†², å¦ä¸€ä¸ªæ˜¯AOFé‡å†™ç¼“å†². <br>æˆ‘æƒ³é—®: ä¸ºä»€ä¹ˆéœ€è¦ç»´æŠ¤AOFé‡å†™ç¼“å†²? å®ƒçš„å†…å®¹æ˜¯åŒ…å«åœ¨AOFç¼“å†²é‡Œé¢çš„, è®°å½•ä¸€ä¸ªAOFç¼“å†²é‡Œé¢çš„offset, ç„¶åç­‰æ•°æ®é‡å†™å¥½äº†, å†ä»offsetå¼€å§‹æŠŠæ–°çš„AOFå†™å‡ºå»ä¸å¥½ä¹ˆ?","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392861,"discussion_content":"aofç¼“å†²æ˜¯ä¼šæŒ‰æ—¢å®šè§„åˆ™åˆ·ç›˜çš„ï¼Œåˆ·å®Œå°±æ²¡äº†ã€‚æ‰€ä»¥è¦ä¿©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631157544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253433,"user_name":"Just Do IT","can_delete":false,"product_type":"c1","uid":1192724,"ip_address":"","ucode":"1EAD92510FA7BE","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/14/78104f1f.jpg","comment_is_top":false,"comment_ctime":1602737037,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602737037","product_id":100056701,"comment_content":"è¿™å¥è¯ä¸å¤ªç†è§£ï¼Œä¸ºä½•æ•°æ®ä¸ä¸¢å¤±å‘¢ï¼Ÿç¼“å­˜åŒºåœ¨å†…å­˜å•Š  å®•æœºçš„è¯   æ•°æ®è¿˜æ²¡æœ‰æŒä¹…åŒ–å®Œæˆ ä¸€æ ·å¯ä»¥ä¸¢å¤±çš„å•Š<br><br>Redis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚","like_count":0},{"had_liked":false,"id":253130,"user_name":"ğŸ’¢ æ˜Ÿæ˜ŸğŸ’¢","can_delete":false,"product_type":"c1","uid":1254392,"ip_address":"","ucode":"A402B765222C35","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","comment_is_top":false,"comment_ctime":1602605981,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1602605981","product_id":100056701,"comment_content":"æ–‡ä¸­è¯´çš„ï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚<br>  é—®ä¸ªé—®é¢˜ï¼Œ  ç¼“å­˜åŒºä¸æ˜¯ä¹Ÿæ²¡å†™ç›˜ä¹ˆï¼Œå®•æœºäº†ï¼Œä¸ºå•¥å¯ä»¥æ¢å¤ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392865,"discussion_content":"æ„æ€æ˜¯aofæ—¥å¿—ç¼“å†²åŒºåˆ·ç›˜å¾ˆå¿«ï¼Œä¸¢æ•°æ®æœ€ä½å¯ä»¥æ§åˆ¶åˆ°1sï¼Œä¸šåŠ¡èƒ½å®¹å¿ã€‚ç¬¬äºŒå¤„é‚£ä¸ªé‡å†™aofæ—¥å¿—ç¼“å­˜åº”è¯¥æ²¡è¿™ä¸ªåˆ·ç›˜çš„ï¼Œåªåšå›æ”¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631157936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252816,"user_name":"Hinimix","can_delete":false,"product_type":"c1","uid":1316937,"ip_address":"","ucode":"7994136C93BD89","user_header":"https://static001.geekbang.org/account/avatar/00/14/18/49/b1d864e5.jpg","comment_is_top":false,"comment_ctime":1602493077,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602493077","product_id":100056701,"comment_content":"Redis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚<br>è¿™å¥è¯ä¸å¤ªç†è§£ï¼šä¸ºä»€ä¹ˆå®•æœºäº†ç¼“å†²åŒºé‡Œçš„å±äºè¿˜æ˜¯é½å…¨çš„å‘¢ï¼Œè¿™ä¸ªç¼“å†²åŒºæ˜¯ä¸æ˜¯ç£ç›˜çš„bufferï¼Œå³ä½¿å®•æœºä¹Ÿä¼šæœ‰ç£ç›˜ä¿æŠ¤å­˜å‚¨ï¼Œä¸ä¼šä¸¢å¤±æ•°æ®","like_count":0},{"had_liked":false,"id":252505,"user_name":"Hinimix","can_delete":false,"product_type":"c1","uid":1316937,"ip_address":"","ucode":"7994136C93BD89","user_header":"https://static001.geekbang.org/account/avatar/00/14/18/49/b1d864e5.jpg","comment_is_top":false,"comment_ctime":1602322394,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602322394","product_id":100056701,"comment_content":"ä¸ºä»€ä¹ˆå®•æœºåèƒ½ä»ç¼“å†²åŒºæ¢å¤å‘¢ï¼Œè¿›ç¨‹bufferåº”è¯¥é‡Šæ”¾äº†å•Š","like_count":0},{"had_liked":false,"id":252335,"user_name":"å¼ å°å¸…","can_delete":false,"product_type":"c1","uid":1682461,"ip_address":"","ucode":"0011E6BF1A4C02","user_header":"https://static001.geekbang.org/account/avatar/00/19/ac/1d/c8f41fce.jpg","comment_is_top":false,"comment_ctime":1602242925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602242925","product_id":100056701,"comment_content":"aofé‡å†™çš„æ—¶å€™ä¼šæŠŠä¸»çº¿ç¨‹æ‰§è¡Œçš„å‘½ä»¤ä¹ŸåŒæ­¥ä¸€ä»½æ”¾åˆ°é‡å†™ç¼“å†²åŒºï¼Œé‡å†™ç¼“å†²åŒºåº”è¯¥æœ‰å¤§å°é™åˆ¶å§ï¼Œå¦‚æœæ”¾æ»¡äº†ä½†æ˜¯é‡å†™è¿˜æœªç»“æŸï¼Œä¼šæ€ä¹ˆå¤„ç†å‘¢","like_count":0},{"had_liked":false,"id":252225,"user_name":"Li Yao","can_delete":false,"product_type":"c1","uid":1129838,"ip_address":"","ucode":"703E1E5505F70D","user_header":"https://static001.geekbang.org/account/avatar/00/11/3d/6e/60680aa4.jpg","comment_is_top":false,"comment_ctime":1602203373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602203373","product_id":100056701,"comment_content":"AOFæ—¥å¿—å†™å…¥æ–¹å¼æ˜¯å°¾éƒ¨è¿½åŠ å†™å…¥ï¼Œæ–‡ä»¶æ¯”è¾ƒå¤§æ—¶ï¼Œè¿™ç§æ–¹å¼å†™å…¥ä¹Ÿä¼šæœ‰æ•ˆç‡é—®é¢˜å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":252195,"user_name":"youngitachi","can_delete":false,"product_type":"c1","uid":1214582,"ip_address":"","ucode":"88717CA8B8ED64","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/76/c69b7fe5.jpg","comment_is_top":false,"comment_ctime":1602169929,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1602169929","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸‹ã€‚<br>é‡å†™AOFæ—¥å¿—çš„æ—¶å€™å¦‚æœRedisæŒ‚äº†é‡å¯ï¼Œé‚£é‡å†™AOFæ—¥å¿—ä¼šæ¥ç€ä¹‹å‰çš„è¿›åº¦é‡å†™AOFæ—¥å¿—è¿˜æ˜¯é‡æ–°ä»å¤´å¼€å§‹å†™å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":251953,"user_name":"while (1)ç­‰;","can_delete":false,"product_type":"c1","uid":1061991,"ip_address":"","ucode":"BAEC7258D65B69","user_header":"https://static001.geekbang.org/account/avatar/00/10/34/67/06a7f9be.jpg","comment_is_top":false,"comment_ctime":1601999605,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1601999605","product_id":100056701,"comment_content":"è€å¸ˆå¥½ï¼ŒAOFé‡å†™æ˜¯å¦‚ä½•è®¾ç½®çš„ï¼Ÿé¢‘ç‡æ˜¯æ€ä¹ˆå®šçš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":251857,"user_name":"xmebcc","can_delete":false,"product_type":"c1","uid":1370407,"ip_address":"","ucode":"B6114A7FC56B37","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKV03icibEjdnG9Bo9uy31KAHHRIQMtdC7UjadibOiaDMcsH8tcV5acpmMvTk7WJTXgK8ovZ5ibrGib9cRA/132","comment_is_top":false,"comment_ctime":1601909864,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601909864","product_id":100056701,"comment_content":"æœ‰ç‚¹ç±»ä¼¼MySQL copy_inplace","like_count":0},{"had_liked":false,"id":251309,"user_name":"æ²¹çº¸ä¼","can_delete":false,"product_type":"c1","uid":2212143,"ip_address":"","ucode":"C2655B9F8874E2","user_header":"https://static001.geekbang.org/account/avatar/00/21/c1/2f/5c8167aa.jpg","comment_is_top":false,"comment_ctime":1601458033,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601458033","product_id":100056701,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œå¦‚æœå†™å…¥å†…å­˜æˆåŠŸäº†ï¼Œåœ¨å†™å…¥aofæ—¥å¿—çš„æ—¶å€™å¤±è´¥äº†æœ‰å¤„ç†æœºåˆ¶å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":251246,"user_name":"é•¿è„–å­æ ‘","can_delete":false,"product_type":"c1","uid":1182802,"ip_address":"","ucode":"D9090EF67EEB1B","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/52/f25c3636.jpg","comment_is_top":false,"comment_ctime":1601435330,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1601435330","product_id":100056701,"comment_content":"å…³äº AOF é‡å†™é˜»å¡é—®é¢˜æ€»ç»“ä¸‹<br>1. fork çš„ç¬é—´ä¸€å®šä¼šé˜»å¡ä¸»çº¿ç¨‹<br>2. è¿˜æ˜¯ fork ä¹‹åä¸»å­è¿›ç¨‹ç”³è¯·å†…å®¹æ—¶, Huge Page å¯¼è‡´å¤§é‡çš„è¯»å†™å†…å­˜, å¯èƒ½å¯¼è‡´é˜»å¡, é™ä½æ€§èƒ½  <br>3. åœ¨æœ€åä¸»è¿›ç¨‹å‘AOFæ–°æ–‡ä»¶å†™å…¥AOFé‡å†™ç¼“å­˜å’Œæ”¹åæ“ä½œä¼šé€ æˆä¸»è¿›ç¨‹é˜»å¡","like_count":0},{"had_liked":false,"id":250530,"user_name":"ç»å°˜è€Œå»","can_delete":false,"product_type":"c1","uid":1252567,"ip_address":"","ucode":"690E4E6B3E39DD","user_header":"https://static001.geekbang.org/account/avatar/00/13/1c/d7/c176ad9f.jpg","comment_is_top":false,"comment_ctime":1601118025,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1601118025","product_id":100056701,"comment_content":"â€œâ€æ­¤æ—¶ï¼Œå¦‚æœæœ‰å†™æ“ä½œï¼Œç¬¬ä¸€å¤„æ—¥å¿—å°±æ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨çš„ AOF æ—¥å¿—ï¼ŒRedis ä¼šæŠŠè¿™ä¸ªæ“ä½œå†™åˆ°å®ƒçš„ç¼“å†²åŒºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿å®•æœºäº†ï¼Œè¿™ä¸ª AOF æ—¥å¿—çš„æ“ä½œä»ç„¶æ˜¯é½å…¨çš„ï¼Œå¯ä»¥ç”¨äºæ¢å¤ã€‚â€<br>è€å¸ˆï¼Œæ–‡ä¸­çš„è¿™æ®µæè¿°æ²¡å¤ªçœ‹æ‡‚ï¼Œåº”è¯¥æ˜¯çˆ¶è¿›ç¨‹ä¼šæŠŠé‡å†™æœŸé—´çš„å†™æ“ä½œå†™å…¥åˆ°æ—§æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥å³ä½¿é‡å†™æœŸé—´å®•æœºï¼Œä¹Ÿå¯ä»¥æ¢å¤å§ã€‚","like_count":0},{"had_liked":false,"id":250084,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1600929528,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1600929528","product_id":100056701,"comment_content":"incræ“ä½œæ€ä¹ˆåŠï¼Œä¸å¹‚ç­‰å•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.åŸƒå…‹æ–¯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351016,"discussion_content":"æ„Ÿè§‰ä¼šåƒbinlogä¸€æ ·è½¬æˆè®¾ç½®å…·ä½“å€¼çš„å‘½ä»¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614122038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249926,"user_name":"Guess","can_delete":false,"product_type":"c1","uid":1113416,"ip_address":"","ucode":"E436F153183E25","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/48/241e16a8.jpg","comment_is_top":false,"comment_ctime":1600855459,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1600855459","product_id":100056701,"comment_content":"é—®é¢˜æè¿°ï¼š<br>1. redisåœ¨å¼€å¯aofæ—¥å¿—æœ‰ä¸‰ç§å†™å…¥æ¨¡å¼Alwaysã€Everysecã€Noè¿™ä¸‰ç§æ¨¡å¼ã€‚<br>2. aofé‡å†™æ˜¯ä¸ºäº†ç¼©å°aofæ—¥å¿—<br>é—®é¢˜ï¼š<br>1.  å¦‚æœaofçš„å†™å…¥æ˜¯alwaysç­–ç•¥ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿæœ‰aofé‡å†™ï¼Ÿ<br>2. aofé‡å†™æ˜¯ä¸æ˜¯éƒ½æ˜¯éœ€è¦é‡æ–°è¯»å–aofæ—¥å¿—ï¼Œé‡å†™å®Œæˆåæ›¿ä»£åŸæ¥çš„aofæ—¥å¿—å—ï¼Ÿ<br>3. å¦‚æœåœ¨alwaysç­–ç•¥ä¸‹ï¼Œä¸”å¯ä»¥è¿›è¡Œaofæ—¥å¿—é‡å†™çš„è¯ã€‚é‚£åœ¨aofé‡å†™çš„æ—¶å€™æ–°æ¥çš„æ“ä½œæ—¥å¿—ä¼šä¸ä¼šè½åˆ°aofæ—¥å¿—ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œè¿˜æ˜¯åŸæ¥çš„aofæ—¥å¿—å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1252567,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1c/d7/c176ad9f.jpg","nickname":"ç»å°˜è€Œå»","note":"","ucode":"690E4E6B3E39DD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308936,"discussion_content":"ä½ çš„ä¸‰ä¸ªé—®é¢˜éƒ½å¦‚ä½ æ‰€æƒ³ã€‚å»ºè®®å»çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œéƒ½æœ‰ç­”æ¡ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601126414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249687,"user_name":"å·®ä¸å¤šå…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1636228,"ip_address":"","ucode":"AB2D3EB98DC765","user_header":"https://static001.geekbang.org/account/avatar/00/18/f7/84/85983bab.jpg","comment_is_top":false,"comment_ctime":1600761436,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600761436","product_id":100056701,"comment_content":"ä¸ºä»€ä¹ˆAOFåå°é‡å†™è¦ç”¨å­è¿›ç¨‹è€Œä¸æ˜¯ç”¨å­çº¿ç¨‹","like_count":0},{"had_liked":false,"id":249644,"user_name":"å°è¥¿å‡ ","can_delete":false,"product_type":"c1","uid":1286375,"ip_address":"","ucode":"ED1DDE17534508","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjzTQ6HPGw2LWLiaiciaibfdMMlmxEwBkBjxOPxeYynZlBKCf6U1b0ezM9IZYibB6yKR7HpRuAOdtj29Q/132","comment_is_top":false,"comment_ctime":1600739071,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1600739071","product_id":100056701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼šæœ€è¿‘æƒ³åšredis æ•°æ®è¿ç§»ä»å•ä¾‹è¿ç§»åˆ°é›†ç¾¤ã€‚å•ä¾‹æ˜¯é…ç½®æ–‡ä»¶å…³é—­æŒä¹…åŒ–çš„ã€‚<br>å½“ä½¿ç”¨bgsave å‘½ä»¤æ‰‹åŠ¨æŒä¹…åŒ–æ—¶ï¼ŒæŒä¹…åŒ–æ•°æ®å¹¶æ²¡æœ‰ä¿å­˜åœ¨config get dirçš„ç›®å½•é‡Œï¼Œå¹¶ä¸”lastsave æŸ¥çœ‹ä¹Ÿæ˜¯å¾ˆä¹…ä¹‹å‰ä¿å­˜çš„æ—¶é—´ï¼Œç›´æ¥ä½¿ç”¨saveï¼Œåˆ™ç›´æ¥æŠ¥é”™ã€‚<br>ä»¥ä¸‹æ˜¯å‘½ä»¤æ‰§è¡Œçš„ç»“æœï¼š<br><br>127.0.0.1:6379&gt; CONFIG GET dir<br>1) &quot;dir&quot;<br>2) &quot;&#47;usr&#47;local&#47;redis&#47;bin&quot;<br>127.0.0.1:6379&gt; BGSAVE<br>Background saving started<br>127.0.0.1:6379&gt; LASTSAVE<br>(integer) 1568101339<br>127.0.0.1:6379&gt;<br><br># ls &#47;usr&#47;local&#47;redis&#47;bin<br>nohup.out  redis-benchmark  redis-check-aof  redis-check-rdb  redis-cli  redis.conf  redis-sentinel  redis-server<br><br>127.0.0.1:6379&gt; save<br>(error) ERR<br><br>è¯·é—®è€å¸ˆï¼Œæˆ‘è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªæŒä¹…åŒ–çš„é—®é¢˜ï¼Ÿ<br><br>","like_count":0,"discussions":[{"author":{"id":1286375,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjzTQ6HPGw2LWLiaiciaibfdMMlmxEwBkBjxOPxeYynZlBKCf6U1b0ezM9IZYibB6yKR7HpRuAOdtj29Q/132","nickname":"å°è¥¿å‡ ","note":"","ucode":"ED1DDE17534508","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309185,"discussion_content":"å·²è§£å†³æƒé™é—®é¢˜\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601209296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249384,"user_name":"pippin","can_delete":false,"product_type":"c1","uid":1784022,"ip_address":"","ucode":"F7619FCE24D481","user_header":"","comment_is_top":false,"comment_ctime":1600617434,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1600617434","product_id":100056701,"comment_content":"ä¸çŸ¥é“æˆ‘è¿™æ ·è¯´çš„å¯¹ä¸å¯¹ã€‚ appendfsyncè®¾ç½®çš„æ˜¯alwaysï¼Œå°±æ˜¯åŒæ­¥å†™å›ï¼Œåœ¨bgrewriteaofå­è¿›ç¨‹é‡å†™æ—¥å¿—æ—¶ï¼Œå¦‚æœæœ‰æ—¥å¿—æ•°æ®å†™å…¥ï¼Œä¸»è¿›ç¨‹è¿˜æ˜¯ç›´æ¥åŒæ­¥å°†æ“ä½œå†™å›åŸæ¥çš„æ—¥å¿—æ–‡ä»¶ï¼Œè€Œåœ¨bgrewriteaofå­è¿›ç¨‹ä¸­æ˜¯æ²¡æœ‰è¿™ä»½æ•°æ®çš„ï¼Œä¸»è¿›ç¨‹æ˜¯å¼€äº†ä¸€ç‰‡ç¼“å­˜åŒºä¿å­˜è¿™ä»½æ•°æ®çš„ï¼Œåœ¨bgrewriteaofå­è¿›ç¨‹é‡å†™æ—¥å¿—å®Œæˆï¼Œå†å°†è¿™ä»½ç¼“å­˜å†™å…¥æ–°çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæœ€åæ›¿æ¢æ‰åŸæ¥çš„æ—¥å¿—æ–‡ä»¶ã€‚è€Œåœ¨ä¸»è¿›ç¨‹æœ‰ä¸ªbigkeyæ“ä½œæ—¶ï¼Œè¿™æ—¶å€™é€ æˆçš„é˜»å¡å’Œæ˜¯å¦åœ¨é‡å†™æ—¥å¿—æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œè¿™ä¸ªæ“ä½œæ— è®ºä½•æ—¶æ“ä½œéƒ½æ˜¯ä¼šé€ æˆä¸»è¿›ç¨‹çš„é˜»å¡çš„ã€‚æ‰€ä»¥huge pageè¿™ä¸ªä¹Ÿä¸æ˜¯åªæœ‰åœ¨é‡å†™æ—¥å¿—æ‰ä¼šå‡ºç°çš„ã€‚è€Œè€å¸ˆçš„ç¬¬ä¸€é—®ï¼Œé—®çš„æ˜¯é‡å†™è¿‡ç¨‹æ—¶ï¼Œæœ‰æ²¡æœ‰å…¶å®ƒé˜»å¡é£é™©ã€‚é‚£è¿™ä¹ˆé—®çš„è¯ï¼Œæˆ‘ä¼šæƒ³åˆ°é˜»å¡æ˜¯ç”±é‡å†™è¿‡ç¨‹é€ æˆçš„ã€‚ä½†@kaitoå›ç­”çš„é‡å†™è¿‡ç¨‹ä¸­çˆ¶è¿›ç¨‹äº§ç”Ÿå†™å…¥çš„åœºæ™¯æ“ä½œbigkeyä¼šé€ æˆé˜»å¡æ˜¯ä¸ä»…ä»…åœ¨é‡å†™è¿‡ç¨‹ä¸­æ‰ä¼šå‡ºç°ã€‚ä¸çŸ¥é“æˆ‘è¿™æ ·ç†è§£çš„å¯¹ä¸å¯¹ï¼Œæçš„æˆ‘æœ‰ç‚¹æ··ä¹±ã€‚","like_count":0,"discussions":[{"author":{"id":1784022,"avatar":"","nickname":"pippin","note":"","ucode":"F7619FCE24D481","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307396,"discussion_content":"è¿˜æœ‰åœ¨bgrewriteaofå­è¿›ç¨‹é‡å†™æ—¥å¿—å®Œæˆåï¼Œä¸»è¿›ç¨‹ä¸­ç¼“å­˜çš„é‚£éƒ¨åˆ†æ“ä½œå†™å…¥æ–°çš„æ—¥å¿—æ–‡ä»¶ä¸­ä¼šä¸ä¼šé˜»å¡ä¸»è¿›ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600618124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248851,"user_name":"yinzhiping","can_delete":false,"product_type":"c1","uid":2114235,"ip_address":"","ucode":"71C74CE6F62FF8","user_header":"","comment_is_top":false,"comment_ctime":1600334515,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1600334515","product_id":100056701,"comment_content":"æˆ‘ä»¬å•¥æ—¶å€™ä¼šä½¿ç”¨æ–°çš„AOFæ–‡ä»¶æ›¿ä»£ä¹…çš„AOFæ–‡ä»¶å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1073443,"avatar":"https://static001.geekbang.org/account/avatar/00/10/61/23/30d134cf.jpg","nickname":"Young","note":"","ucode":"075C0BBE20FD8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371084,"discussion_content":"å­è¿›ç¨‹å®ŒæˆAOFé‡å†™åï¼Œå®ƒå‘çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ï¼Œçˆ¶è¿›ç¨‹æ”¶åˆ°ä¿¡å·åä¼šè°ƒç”¨ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°æŠŠAOFé‡å†™ç¼“å†²åŒºçš„å‘½ä»¤è¿½åŠ åˆ°æ–°AOFæ–‡ä»¶ä¸­ç„¶åæ›¿æ¢æ‰ç°æœ‰AOFæ–‡ä»¶ã€‚çˆ¶è¿›ç¨‹å¤„ç†å®Œæ¯•åå¯ä»¥ç»§ç»­æ¥å—å®¢æˆ·ç«¯å‘½ä»¤è°ƒç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619625569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1252567,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1c/d7/c176ad9f.jpg","nickname":"ç»å°˜è€Œå»","note":"","ucode":"690E4E6B3E39DD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308937,"discussion_content":"å­è¿›ç¨‹é‡å†™å®Œï¼Œçˆ¶è¿›ç¨‹æŠŠå¢é‡çš„aofæ—¥å¿—è¿½åŠ åˆ°æ–°çš„aofæ–‡ä»¶ï¼Œå°±ä¼šè¿›è¡Œæ›¿æ¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601126618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247960,"user_name":"æ·±è“","can_delete":false,"product_type":"c1","uid":1035807,"ip_address":"","ucode":"85C7094E3A5289","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ce/1f/220c6d83.jpg","comment_is_top":false,"comment_ctime":1599955652,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599955652","product_id":100056701,"comment_content":"é—®é¢˜1ã€ä¸»çº¿ç¨‹å†™å…¥AOFé‡å†™æ—¥å¿—ç¼“å­˜æ—¶ä¼šé˜»å¡AOFé‡å†™å­è¿›ç¨‹<br>é—®é¢˜2ã€å…±ç”¨ä¼šå‡ºç°è„æ•°æ®å’Œé˜»å¡çš„æƒ…å†µ","like_count":0},{"had_liked":false,"id":247739,"user_name":"xanxus","can_delete":false,"product_type":"c1","uid":1654600,"ip_address":"","ucode":"FFF1EFD2ABCBAA","user_header":"","comment_is_top":false,"comment_ctime":1599813054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599813054","product_id":100056701,"comment_content":"åŸæ–‡ä¸­è¿™æ ·æè¿°â€œæˆ‘ä»¬ä»¥ Redis æ”¶åˆ°â€œset testkey testvalueâ€å‘½ä»¤åè®°å½•çš„æ—¥å¿—ä¸ºä¾‹ï¼Œçœ‹çœ‹ AOF æ—¥å¿—çš„å†…å®¹ã€‚å…¶ä¸­ï¼Œâ€œ*3â€è¡¨ç¤ºå½“å‰å‘½ä»¤æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†éƒ½æ˜¯ç”±â€œ$+æ•°å­—â€å¼€å¤´ï¼Œåé¢ç´§è·Ÿç€å…·ä½“çš„å‘½ä»¤ã€é”®æˆ–å€¼ã€‚è¿™é‡Œï¼Œâ€œæ•°å­—â€è¡¨ç¤ºè¿™éƒ¨åˆ†ä¸­çš„å‘½ä»¤ã€é”®æˆ–å€¼ä¸€å…±æœ‰å¤šå°‘å­—èŠ‚ã€‚ä¾‹å¦‚ï¼Œâ€œ$3 setâ€è¡¨ç¤ºè¿™éƒ¨åˆ†æœ‰ 3 ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯â€œsetâ€å‘½ä»¤ã€‚â€ çœ‹ä¸Šä¸‹æ–‡çš„æè¿°ï¼Œéš¾é“$+æ•°å­—ï¼Œçš„æ•°å­—å­˜çš„ä¸åº”è¯¥æ˜¯å­—ç¬¦æ•°é‡ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°é‡å—ï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":246932,"user_name":"Onyanga","can_delete":false,"product_type":"c1","uid":1272825,"ip_address":"","ucode":"DF4D22F0D51881","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/f9/da3ee7a8.jpg","comment_is_top":false,"comment_ctime":1599533913,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599533913","product_id":100056701,"comment_content":"AOFçš„å†™å›ç­–ç•¥ï¼šEverysecå’ŒNoæ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ã€‚","like_count":0},{"had_liked":false,"id":246826,"user_name":"Henry","can_delete":false,"product_type":"c1","uid":1929375,"ip_address":"","ucode":"7C554C97935443","user_header":"https://static001.geekbang.org/account/avatar/00/1d/70/9f/741cd6a4.jpg","comment_is_top":false,"comment_ctime":1599487373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599487373","product_id":100056701,"comment_content":"aof awaysæ˜¯å¦å­˜åœ¨ä¸¢å¤±ä¸€ä¸ªå‘½ä»¤çš„é£é™©ï¼Ÿ","like_count":0},{"had_liked":false,"id":245850,"user_name":"Geek_27a248","can_delete":false,"product_type":"c1","uid":1542778,"ip_address":"","ucode":"6AC3AC42E6EEC9","user_header":"https://static001.geekbang.org/account/avatar/00/17/8a/7a/54003392.jpg","comment_is_top":false,"comment_ctime":1599094498,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1599094498","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªåœ°æ–¹ä¸è§£ï¼Œå¯èƒ½æ˜¯åŸºç¡€ä¸å¥½çš„åŸå› ï¼Œå¦‚æœaofè¿˜åŸæ—¶æ­¤æ—¶ä¸»çº¿ç¨‹å¯¹aofæ–‡ä»¶ä¸­è®°å½•çš„keyè¿›è¡Œä¿®æ”¹æ“ä½œï¼Œæ­¤æ—¶çš„aofè¿˜åŸæµç¨‹å°±å˜æˆä»€ä¹ˆæ ·å­çš„å‘¢ï¼Œæ˜¯è¦†ç›–æ‰æ–°å€¼ï¼Œç„¶åä¸»çº¿ç¨‹æ–°çš„å€¼ç»§ç»­è¿½åŠ æ—¥å¿—åˆ°aofæ–‡ä»¶ä¸­å—","like_count":0,"discussions":[{"author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308218,"discussion_content":"Aofè¿˜åŸæ—¶ç³»ç»Ÿæ˜¯ä¸å¯ç”¨çš„ï¼Œè¿˜åŸå®Œæˆåæ‰å¯ä»¥å†™å…¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600870763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245291,"user_name":"æé±¼çš„æ¬ç –å¥‡","can_delete":false,"product_type":"c1","uid":1021539,"ip_address":"","ucode":"2FD194C4DA26E5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","comment_is_top":false,"comment_ctime":1598885725,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598885725","product_id":100056701,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—® åœ¨è¯´æ˜â€œä¸¤å¤„æ—¥å¿—â€çš„æ—¶å€™è¯´çš„ç¼“å†²åŒºæ˜¯å†…å­˜è¿˜æ˜¯ç£ç›˜ï¼Œå¦‚æœæ˜¯å†…å­˜ï¼Œä¸ºä»€ä¹ˆåˆè¯´å®•æœºäº† AOF çš„æ—¥å¿—è¿˜æ˜¯å…¨çš„ï¼Œå¦‚æœæ˜¯ç£ç›˜ï¼Œå’Œä¸‹é¢çš„ç¤ºæ„å›¾ä¼¼ä¹å¯¹ä¸ä¸Šå·ã€‚","like_count":0},{"had_liked":false,"id":245037,"user_name":"å¤§å¸…å“¥","can_delete":false,"product_type":"c1","uid":1439523,"ip_address":"","ucode":"E6AE4804D9F337","user_header":"","comment_is_top":false,"comment_ctime":1598791902,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598791902","product_id":100056701,"comment_content":"å³ä½¿ä½¿ç”¨aofé‡æ–°æœºåˆ¶ï¼Œæ—¥å¿—æ–‡ä»¶ä¾ç„¶å¯èƒ½å¾ˆå¤§ï¼Œå¦‚æœæ–‡ä»¶è¿˜æ˜¯è¿‡å¤§ï¼Œredisæ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢","like_count":0},{"had_liked":false,"id":244662,"user_name":"Bug Killer","can_delete":false,"product_type":"c1","uid":1186089,"ip_address":"","ucode":"2741A206F504E1","user_header":"https://static001.geekbang.org/account/avatar/00/12/19/29/4a8214b7.jpg","comment_is_top":false,"comment_ctime":1598606284,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598606284","product_id":100056701,"comment_content":"é—®ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼šé¢‘ç¹çš„å¯¹æ–‡ä»¶è¿›è¡ŒIoä¼šä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜å‘€ã€‚å¯¹appendonly.aofè¿›è¡Œæ¯ç§’è¿½åŠ å†™ï¼Œè¿½åŠ å†™åº”è¯¥æ¯ç§’éƒ½ä¼šæŒä¹…åŒ–åˆ°ç¡¬ç›˜å§ã€‚","like_count":0},{"had_liked":false,"id":243877,"user_name":"Aaron","can_delete":false,"product_type":"c1","uid":1066251,"ip_address":"","ucode":"B0C504A76297C7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/0Qp9pxHBvgdZAveKzsvUFFUicCJfe7ONzhC7jSNFQDNFvg0jRMXuqqZOdxG1qKosylUYrpIHUR2Q76w5m4HtVkg/132","comment_is_top":false,"comment_ctime":1598318273,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1598318273","product_id":100056701,"comment_content":"Rediså­˜åœ¨ä¸¤ä»½æ—¥å¿—ï¼Œä¸€ä»½æ˜¯åŸæœ‰çš„aofæ—¥å¿—ï¼Œä¸€ä¸ªæ˜¯é‡å†™æ—¥å¿—ï¼Œé‡å†™æ—¥å¿—çš„ç›®çš„æ˜¯å‡å°‘å ç”¨ç£ç›˜çš„ç©ºé—´ï¼Œé‚£ä¹ˆåŸæœ‰çš„aofæ—¥å¿—æ˜¯ä¸æ˜¯ä¼šæ‰¾ä¸ªåˆé€‚çš„æ—¶æœºæ¸…æ¥šå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1073443,"avatar":"https://static001.geekbang.org/account/avatar/00/10/61/23/30d134cf.jpg","nickname":"Young","note":"","ucode":"075C0BBE20FD8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371085,"discussion_content":"å­è¿›ç¨‹å®ŒæˆAOFé‡å†™åï¼Œå®ƒå‘çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ï¼Œçˆ¶è¿›ç¨‹æ”¶åˆ°ä¿¡å·åä¼šè°ƒç”¨ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°æŠŠAOFé‡å†™ç¼“å†²åŒºçš„å‘½ä»¤è¿½åŠ åˆ°æ–°AOFæ–‡ä»¶ä¸­ç„¶åæ›¿æ¢æ‰ç°æœ‰AOFæ–‡ä»¶ã€‚çˆ¶è¿›ç¨‹å¤„ç†å®Œæ¯•åå¯ä»¥ç»§ç»­æ¥å—å®¢æˆ·ç«¯å‘½ä»¤è°ƒç”¨ï¼Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619625716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073236,"avatar":"https://static001.geekbang.org/account/avatar/00/10/60/54/b3eb605b.jpg","nickname":"é˜¿ç‰›","note":"","ucode":"DC8C189FCF3289","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358530,"discussion_content":"å½“å­è¿›ç¨‹å®Œæˆå¯¹AOFæ–‡ä»¶é‡å†™ä¹‹åï¼ŒAOFé‡å†™ç¼“å­˜ä¸­çš„å†…å®¹å…¨éƒ¨å†™å…¥åˆ°æ–°çš„AOFæ–‡ä»¶ä¸­ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615991759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242457,"user_name":"Jerry You","can_delete":false,"product_type":"c1","uid":2107375,"ip_address":"","ucode":"679A44B505482F","user_header":"https://static001.geekbang.org/account/avatar/00/20/27/ef/a7f94eda.jpg","comment_is_top":false,"comment_ctime":1597733721,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597733721","product_id":100056701,"comment_content":"aofçš„ç¼“å†²å’Œaofé‡å†™ç¼“å†²éƒ½æ˜¯åº”å¯¹è®°å½•forkä¹‹åçš„å†™è¯·æ±‚å‘½ä»¤çš„ï¼Œç›¸å½“äºforkä¹‹åçš„aofåŠŸèƒ½ï¼Œæœ€åforkç»“æŸä¹‹å‰ï¼Œéœ€è¦æŠŠå¯¹åº”çš„aofç¼“å†²æ–‡ä»¶æ‹¿è¿‡æ¥æ›´æ–°åˆ°æœ€æ–°çš„æ–‡ä»¶ä¸­å§ï¼Ÿæ˜¯è¿™æ ·ç†è§£çš„ä¹ˆï¼Ÿè¿˜æœ‰aofé‡å†™æœºåˆ¶æ˜¯ä»€ä¹ˆæ—¶å€™è§¦å‘çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":242367,"user_name":"å°é»‘","can_delete":false,"product_type":"c1","uid":1218205,"ip_address":"","ucode":"DCED6B71BE7687","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/dlIBXlicZrol7KX8l8QQu7nUpYhpBP5YIIdXe8RliatHdPU4licxiboqjMjJbJSaUpmib1iaIarMlgrtxpRjgOd2WYLw/132","comment_is_top":false,"comment_ctime":1597681776,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1597681776","product_id":100056701,"comment_content":"è¯·é—®è€å¸ˆï¼Œæ¯”å¦‚ä¸€ä¸ªæç«¯çš„æƒ…å†µï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­auto-aof-rewrite-min-sizeè®¾ç½®äº†64mï¼Œå¦‚æœaofé‡å†™åè¿˜æ˜¯è¶…è¿‡64mï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1339620,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epN7EVEDiaCBHwbQdZpqgMQRbq0lCWYt2ITaY4a7CEJ0iaGg7zN0m5sLZPviaMFluVfNsFGCL8EChYHw/132","nickname":"æ™“ç¿”","note":"","ucode":"53D92FCC111DA2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299742,"discussion_content":"auto-aof-rewrite-min-size æ˜¯è®¾ç½®å…è®¸é‡å†™çš„æœ€å°aofæ–‡ä»¶å¤§å°,é¿å…äº†è¾¾åˆ°çº¦å®šç™¾åˆ†æ¯”(å³auto-aof-rewrite-percentageé…ç½®)ä½†æ–‡ä»¶ä»ç„¶å¾ˆå°çš„æƒ…å†µè¿˜è¦é‡å†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597804149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242031,"user_name":"Geek_Lin","can_delete":false,"product_type":"c1","uid":2120990,"ip_address":"","ucode":"3C887B8E6FF3B9","user_header":"","comment_is_top":false,"comment_ctime":1597566542,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597566542","product_id":100056701,"comment_content":"1.æ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›ï¼šç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å°†ç¼“å†²åŒºå†…å®¹å†™å›ç£ç›˜ï¼Œæ“ä½œç³»ç»Ÿæ€ä¹ˆå†³å®šçš„å‘¢ï¼Ÿ<br>2.Redisæ˜¯ä¸æ˜¯åªæœ‰ä¸€ä¸ªAOFæ–‡ä»¶ï¼Œè¯»æ–‡ç« æ„Ÿè§‰æ˜¯ï¼Œé‚£ä¹ˆå¦‚æœåªæœ‰ä¸€ä¸ªæ–‡ç« çš„è¯ï¼Œè¿½åŠ å†™å…¥æ“ä½œï¼Œé‚£ä¹ˆæ¢å¤çš„æ—¶å€™ï¼Œå¦‚ä½•çŸ¥é“ä»é‚£ä¸€æ¡æ“ä½œå¼€å§‹å‘¢ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":242030,"user_name":"Geek_Lin","can_delete":false,"product_type":"c1","uid":2120990,"ip_address":"","ucode":"3C887B8E6FF3B9","user_header":"","comment_is_top":false,"comment_ctime":1597566063,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597566063","product_id":100056701,"comment_content":"æ¯æ¬¡éƒ½è¦æŠŠè¯„è®ºåŒºçœ‹ä¸€éï¼Œæ”¶è·å¾ˆå¤§ï¼ï¼","like_count":0},{"had_liked":false,"id":241844,"user_name":"tinyğŸŒ¾","can_delete":false,"product_type":"c1","uid":1119851,"ip_address":"","ucode":"7A4DE00381D1F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/6b/af7c7745.jpg","comment_is_top":false,"comment_ctime":1597464237,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1597464237","product_id":100056701,"comment_content":"æœ‰ä¸€ä¸ªé—®é¢˜<br>Bgaofåœ¨ç”¨æ‹·è´çš„å†…å­˜é‡å†™aofï¼Œåœ¨è¿™æœŸé—´ä¸»è¿›ç¨‹å†…å­˜æ•°æ®æ›´æ–°äº†ï¼Œä¸å°±å’Œbgaofå†™çš„å†…å­˜ä¸ä¸€æ ·ï¼Œæœ€åç”¨bgaofçš„é‡å†™æ—¥å¿—å“ªä¸æ˜¯ä¹…æ•°æ®ï¼Ÿ","like_count":0},{"had_liked":false,"id":241751,"user_name":"æ¸¸å¼‹äº‘ç«¯","can_delete":false,"product_type":"c1","uid":1208637,"ip_address":"","ucode":"A960E8F5AA25B9","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/3d/da8dc880.jpg","comment_is_top":false,"comment_ctime":1597410378,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597410378","product_id":100056701,"comment_content":"å…ˆè®°æ—¥å¿—å†æ‰§è¡Œå‘½ä»¤ï¼Œä¸€èˆ¬ä¼šå¯¹è®°å½•æ“ä½œçš„è¯­æ³•æœ‰æ•ˆæ€§åšæ£€æŸ¥ï¼Œè¿™ä¸ªé˜¶æ®µéœ€è¦è§£ææ“ä½œå‘½ä»¤ï¼Œé¿å…æ—¥å¿—redoå¤±è´¥ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¼šå½±å“ä¸€å®šå†™æ€§èƒ½ã€‚","like_count":0},{"had_liked":false,"id":241404,"user_name":"å´å°æ™º","can_delete":false,"product_type":"c1","uid":1310798,"ip_address":"","ucode":"C7C9F58B5C9F7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","comment_is_top":false,"comment_ctime":1597285226,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1597285226","product_id":100056701,"comment_content":"ä¸¤ä¸ªæ—¥å¿—çš„åˆå¹¶ï¼Œæ˜¯åˆ†ç¦»åï¼Œä¸»è¿›ç¨‹å†™çš„æ—¥å¿—ï¼Œå¾€å­è¿›ç¨‹çš„é‡å†™æ—¥å¿—é‡Œåˆå¹¶å§ï¼Ÿæ„Ÿè§‰æ–‡ä¸­è¿™ç‚¹æ²¡å†™æ¸…æ¥šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1252567,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1c/d7/c176ad9f.jpg","nickname":"ç»å°˜è€Œå»","note":"","ucode":"690E4E6B3E39DD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308794,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—æ˜¯è¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601085406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241342,"user_name":"Leslie_Lamport","can_delete":false,"product_type":"c1","uid":1315517,"ip_address":"","ucode":"62997381D754A9","user_header":"https://static001.geekbang.org/account/avatar/00/14/12/bd/19d31e64.jpg","comment_is_top":false,"comment_ctime":1597258850,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597258850","product_id":100056701,"comment_content":"â€œä¸€ä¸ªæ‹·è´â€å°±æ˜¯æŒ‡ï¼Œæ¯æ¬¡æ‰§è¡Œé‡å†™æ—¶ï¼Œä¸»çº¿ç¨‹ fork å‡ºåå°çš„ bgrewriteaof å­è¿›ç¨‹ã€‚æ­¤æ—¶ï¼Œfork ä¼šæŠŠä¸»çº¿ç¨‹çš„å†…å­˜æ‹·è´ä¸€ä»½ç»™ bgrewriteaof å­è¿›ç¨‹ï¼Œè¿™é‡Œé¢å°±åŒ…å«äº†æ•°æ®åº“çš„æœ€æ–°æ•°æ®ã€‚ç„¶åï¼Œbgrewriteaof å­è¿›ç¨‹å°±å¯ä»¥åœ¨ä¸å½±å“ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œé€ä¸€æŠŠæ‹·è´çš„æ•°æ®å†™æˆæ“ä½œï¼Œè®°å…¥é‡å†™æ—¥å¿—ã€‚<br><br><br>â€” æ‹·è´æ•°æ®çš„costå¤šå¤§ï¼Ÿ","like_count":0},{"had_liked":false,"id":241335,"user_name":"AstonPutting","can_delete":false,"product_type":"c1","uid":1303239,"ip_address":"","ucode":"1DB579A7922964","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/c7/d6a0927a.jpg","comment_is_top":false,"comment_ctime":1597249731,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597249731","product_id":100056701,"comment_content":"æ—¢ç„¶aofæ˜¯ä»¥æ–‡æœ¬çš„å½¢å¼è®°å½•redisçš„æ“ä½œï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç”¨äºä¸åŒRedisç‰ˆæœ¬ä¹‹é—´çš„å¤‡ä»½ä¸æ¢å¤ï¼Œæ¯”å¦‚è¯´redis4çš„aofæ—¥å¿—æ¢å¤åˆ°redis3ä¸Š","like_count":0},{"had_liked":false,"id":241263,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1597231092,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1597231092","product_id":100056701,"comment_content":"redisé‡å†™æœºåˆ¶åªé’ˆå¯¹è¿˜æ²¡æœ‰å†™å…¥ç£ç›˜çš„ä¿¡æ¯å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1539926,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIUBia0Aevb2CyMNPvuzTkVvlcoDpdFELFav5Bcic90wxehZibo0VglM7aRZLMo93Ful7v5TFlKfEYyg/132","nickname":"å•Šä¸å¤š","note":"","ucode":"A38DE3C564B748","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298526,"discussion_content":"åº”è¯¥é’ˆå¯¹æ•´ä¸ªaofæ–‡ä»¶ä¸­çš„æ‰€æœ‰è®°å½•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597317545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241248,"user_name":"æ¢¨è¿˜ç¾½","can_delete":false,"product_type":"c1","uid":1243267,"ip_address":"","ucode":"F6C89EF10DFC89","user_header":"https://static001.geekbang.org/account/avatar/00/12/f8/83/008b7b58.jpg","comment_is_top":false,"comment_ctime":1597223086,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1597223086","product_id":100056701,"comment_content":"aofé‡å†™çš„è§¦å‘æ¡ä»¶ï¼š<br>1. æ‰‹åŠ¨æ‰§è¡Œbgrewriteaofè§¦å‘aofé‡å†™<br>2. é…ç½®redis.confæ–‡ä»¶çš„aofé‡å†™æ¡ä»¶ï¼Œå¦‚auto-aof-rewrite-min-sizeå’Œauto-aof-rewrite-min-percenrage","like_count":0,"discussions":[{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298307,"discussion_content":"ç¬¬ä¸€ä¸ªæ˜¯æ–‡ä»¶çš„å¤§å°ï¼Œç¬¬äºŒä¸ªæ˜¯è¶…è¿‡åŸºå‡†å€¼çš„ç™¾åˆ†æ¯”ï¼Œé»˜è®¤æ˜¯100 ï¼Œä¹Ÿå°±ä¸¤å€çš„åŸºå‡†å€¼å¤§å°è§¦å‘ aof","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597243063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241207,"user_name":"Mr.èœœ","can_delete":false,"product_type":"c1","uid":1035257,"ip_address":"","ucode":"C911B81198B3F5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","comment_is_top":false,"comment_ctime":1597216232,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"1597216232","product_id":100056701,"comment_content":"ä¸€å¼€å§‹è¯´ä¸»çº¿ç¨‹forkä¸€ä¸ªå­è¿›ç¨‹å¤„ç†AOFï¼Œåé¢åˆè¯´æ˜¯å­çº¿ç¨‹ï¼Œåˆ°åº•æ˜¯è¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹ï¼ŸAOF ä¼šå¤åˆ¶ä¸€ä»½å†…å­˜ç»™å­è¿›ç¨‹ä¿å­˜æ•°æ®ï¼Ÿå¦‚æœå†…å­˜ä¸å¤Ÿæ€ä¹ˆåŠï¼Ÿéº»çƒ¦ä½œè€…è§£é‡Šæ¸…æ¥šï¼Œè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1370132,"avatar":"","nickname":"Geek_LV","note":"","ucode":"612BF99F9843F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298243,"discussion_content":"ç†è®ºä¸Šéœ€è¦ä¸¤å€çš„å†…å­˜ã€‚ä½†Linuxæœ‰copy-on-write æœºåˆ¶ï¼Œçˆ¶å­è¿›ç¨‹ä¼šå…±äº«ç›¸åŒçš„ç‰©ç†å†…å­˜é¡µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597226718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1370132,"avatar":"","nickname":"Geek_LV","note":"","ucode":"612BF99F9843F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":298355,"discussion_content":"æ˜¯çš„ï¼Œä½†è¿™ä¸ªçŸ¥è¯†ç‚¹å¾ˆé‡è¦ï¼Œè€å¸ˆæ²¡æœ‰æï¼Œè¿™å®å±ä¸åº”è¯¥ï¼Œå› ä¸ºç›®å‰å¤§å¤šæ•°redisä¸å¯èƒ½å› ä¸ºè¦å¤‡ä»½ï¼Œè€Œé¢„ç•™ä¸€åŠå†…å­˜ï¼Œä½•å†µå°±ç®—çº¯å¤åˆ¶ï¼Œå‡ ågå†…å­˜ä¹Ÿä¸æ˜¯è¿™ä¹ˆå¿«èƒ½å¤åˆ¶å‡ºæ¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597278839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298243,"ip_address":""},"score":298355,"extra":""},{"author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1370132,"avatar":"","nickname":"Geek_LV","note":"","ucode":"612BF99F9843F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":298359,"discussion_content":"è€Œä¸”ä»–ä¸€ä¼šå„¿å­çº¿ç¨‹ï¼Œä¸€ä¼šå„¿åˆå­è¿›ç¨‹ï¼Œå®Œå…¨ä¸æ¸…æ¥šä»–æœ‰æ²¡æœ‰ææ¸…æ¥š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597279482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298243,"ip_address":""},"score":298359,"extra":""},{"author":{"id":2108046,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLoAicus6PVAO7SJzBmPMsQ4AISV0IZTvFkQ5fzicA3VJ8GZbAFhtqZZkOCrnSiaPkYgTianK5gvmLsuQ/132","nickname":"Geek_dac7ff","note":"","ucode":"CA90CDD5AA0077","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301512,"discussion_content":"é¦–å…ˆï¼Œlinuxå¯¹è¿›ç¨‹å’Œçº¿ç¨‹ä¸åšåŒºåˆ†ï¼Œç»Ÿä¸€ç”±task_structæ¥ç®¡ç†æ‰€æœ‰è¿›ç¨‹å’Œçº¿ç¨‹ã€‚ æ‰€è°“çš„çº¿ç¨‹è¿›ç¨‹çš„åŒºåˆ«ï¼Œä¸è¿‡æ˜¯æ˜¯å¦å’Œä¸»è¿›ç¨‹å…±äº«å†…å­˜ç©ºé—´ã€‚linuxä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥ç†è§£ä¸ºè¿™ä¸ªè¿›ç¨‹çš„ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥å«ä¸»çº¿ç¨‹æ²¡é—®é¢˜ã€‚è¿›ç¨‹å¯ä»¥é€šè¿‡ fork åˆ›å»ºå­è¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥pthread_create åˆ›å»ºçº¿ç¨‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598542361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298359,"ip_address":""},"score":301512,"extra":""}]}]},{"had_liked":false,"id":241187,"user_name":"ikel","can_delete":false,"product_type":"c1","uid":1009002,"ip_address":"","ucode":"1D5CE7803C1C2B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/65/6a/be36c108.jpg","comment_is_top":false,"comment_ctime":1597210914,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597210914","product_id":100056701,"comment_content":"1ã€ä¸»çº¿ç¨‹çš„æ–°æ•°æ®åŒæ­¥åˆ°å­è¿›ç¨‹æ—¶å€™å¯èƒ½ä¼šæœ‰socketé˜»å¡<br>2ã€å¯èƒ½æ˜¯è€ƒè™‘åˆ°åŠ é”ä¼šæœ‰æ•ˆç‡é™ä½å§","like_count":0},{"had_liked":false,"id":241182,"user_name":"Jackey","can_delete":false,"product_type":"c1","uid":1063751,"ip_address":"","ucode":"125DE81993FEDD","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/47/f6c772a1.jpg","comment_is_top":false,"comment_ctime":1597209359,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597209359","product_id":100056701,"comment_content":"å†™åŸæ¥çš„AOFæ–‡ä»¶æœ‰å¯èƒ½ä¼šé€ æˆæ±¡æŸ“å§ï¼Œä¸‡ä¸€å†™å¤±è´¥äº†ï¼Œå¾ˆéš¾å†³å®šæ˜¯å›æ»šåŸæ¥çš„å†™æ“ä½œè¿˜æ˜¯ä¸‹æ¬¡ä»æŒ‡å®šä½ç½®å¼€å§‹å†™ã€‚è€Œä¸”ä¹Ÿä¼šå­˜åœ¨èµ„æºç«äº‰çš„é—®é¢˜ã€‚æ‰€ä»¥ä¸å¦‚å†™å®Œç›´æ¥æ›¿æ¢æ›´åŠ æ–¹ä¾¿","like_count":0},{"had_liked":false,"id":241176,"user_name":"MClink","can_delete":false,"product_type":"c1","uid":1435733,"ip_address":"","ucode":"F479190923355C","user_header":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","comment_is_top":false,"comment_ctime":1597208195,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1597208195","product_id":100056701,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®çš„æ˜¯ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘ aof çš„é‡å†™æœºåˆ¶ï¼Œæ˜¯å®šæ—¶è§¦å‘è¿˜æ˜¯è¢«åŠ¨æ¡ä»¶çš„è§¦å‘","like_count":0,"discussions":[{"author":{"id":1645430,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiauonyMORA2s43W7mogGDH4WYjW0gBJtYmUa9icTB6aMPGqibicEKlLoQmLKLWEctwHzthbTZkKR20w/132","nickname":"Spring4J","note":"","ucode":"06F056085A2564","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298198,"discussion_content":"ä½ æƒ³ï¼ŒAOPé‡å†™æ˜¯ä¸ºäº†é¿å…æ–‡ä»¶å¤ªå¤§å¯¼è‡´æ¢å¤çš„æ—¶å€™å¾ˆæ…¢ï¼Œæ‰€ä»¥ï¼Œåº”è¯¥æ˜¯æ–‡ä»¶å ç”¨åˆ°ä¸€å®šæ¯”ä¾‹çš„æ—¶å€™å°±ä¼šè§¦å‘é‡å†™ï¼Œå¯èƒ½æœ‰ç›¸å…³ç­–ç•¥å¯ä»¥é€‰æ‹©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597218719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241156,"user_name":"æ—ä½³é’¦","can_delete":false,"product_type":"c1","uid":1453295,"ip_address":"","ucode":"A21E83E64933DE","user_header":"https://static001.geekbang.org/account/avatar/00/16/2c/ef/b04a2da2.jpg","comment_is_top":false,"comment_ctime":1597204360,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1597204360","product_id":100056701,"comment_content":"ç¬¬ä¸€ä¸ªå°é—®é¢˜. è¿™ä¸ªä¹Ÿæ˜¯æˆ‘æƒ³é—®çš„é—®é¢˜ï¼ŒAOF forkçš„æ—¶å€™ï¼Œforkä¹Ÿæ˜¯ä¸€ä¸ªé˜»å¡çš„æ“ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ä¼šé€ æˆä¸»è¿›ç¨‹æ— æ³•å¤„ç†å—ï¼Ÿ<br>ç¬¬äºŒä¸ªå°é—®é¢˜ï¼šæ˜¯å› ä¸ºä¸¤ä¸ªè¿›ç¨‹å…±äº«å†…å­˜çš„è®¿é—®æ•ˆç‡é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1453295,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2c/ef/b04a2da2.jpg","nickname":"æ—ä½³é’¦","note":"","ucode":"A21E83E64933DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298164,"discussion_content":"åšæ¢¦æ¢¦åˆ°äº†ï¼Œç¬¬äºŒä¸ªé—®é¢˜æ˜¯ä¸æ˜¯å› ä¸ºaofé‡å†™æ—¥å¿—ä¼šæ›¿æ¢åŸæ¥çš„aofæ—¥å¿—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597207728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241136,"user_name":"al-byte","can_delete":false,"product_type":"c1","uid":1466744,"ip_address":"","ucode":"D0298A02E9259D","user_header":"https://static001.geekbang.org/account/avatar/00/16/61/78/e7aa4e04.jpg","comment_is_top":false,"comment_ctime":1597200017,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597200017","product_id":100056701,"comment_content":"AOFé‡å†™æ—¥å¿—å®Œæˆä»¥åä¼šè¦†ç›–æ—§çš„AOFæ—¥å¿—ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸»çº¿ç¨‹åº”è¯¥ä¼šè¢«é˜»å¡å§å¦‚æœæ—¥å¿—æ–‡ä»¶è¿‡å¤§è¿˜æ˜¯ä¼šæœ‰é˜»å¡é£é™©çš„<br>","like_count":0},{"had_liked":false,"id":241131,"user_name":"OAuth","can_delete":false,"product_type":"c1","uid":1234664,"ip_address":"","ucode":"691F528EB533B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/e8/50b58ed8.jpg","comment_is_top":false,"comment_ctime":1597198425,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1597198425","product_id":100056701,"comment_content":"ä¸ºä»€ä¹ˆåœ¨ä½¿ç”¨AOFæ—¥å¿—å’ŒAOFé‡å†™æ—¥å¿—æ—¶ï¼ŒæŠŠæ“ä½œå†™å…¥å„è‡ªçš„ç¼“å†²åŒºï¼Œå®•æœºäº†ï¼Œæ—¥å¿—ä¹Ÿæ˜¯å®Œæ•´çš„ï¼Ÿç¼“å†²åŒºé‡Œçš„æ•°æ®ä¸ä¼šå› ä¸ºå®•æœºä¸¢å¤±å—ï¼Ÿæ²¡çœ‹æ˜ç™½","like_count":0},{"had_liked":false,"id":241104,"user_name":"å°æ°˜","can_delete":false,"product_type":"c1","uid":1622109,"ip_address":"","ucode":"DA55B9A02D9EE0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","comment_is_top":false,"comment_ctime":1597193134,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597193134","product_id":100056701,"comment_content":"è¯¾åæ€è€ƒé¢˜ï¼šæˆ‘è§‰å¾—&quot;ä¸€ä¸ªæ‹·è´&quot;è¿‡ç¨‹ä¸­ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œå¼€å¯æ‹·è´æ—¶ä¸»çº¿ç¨‹æ— æ³•å¯¹å¤–æœåŠ¡ï¼Œç­‰æ•°æ®æ‹·è´å®Œæˆåæ‰è¡Œã€‚","like_count":0},{"had_liked":false,"id":241102,"user_name":"williamcai","can_delete":false,"product_type":"c1","uid":1158294,"ip_address":"","ucode":"B158F52C2D39BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/96/46b13896.jpg","comment_is_top":false,"comment_ctime":1597192848,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1597192848","product_id":100056701,"comment_content":"å­çº¿ç¨‹åœ¨é‡å†™çš„è¿‡ç¨‹ä¸­ï¼Œçªç„¶å®•æœºäº†ï¼Œé‡æ–°åªå®Œæˆéƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¸¢å¤±çš„é£é™©ï¼›<br>å¦‚æœå…±äº«å°±ä¼šå‡ºç°é‡å†™æ—¥å¿—åˆšå†™å®Œï¼ŒåŸæ—¥å¿—æ­£å¥½æ›´æ–°ï¼Œé€ æˆäº†é‡å†™æ—¥å¿—æ•°æ®ä¸ä¸€è‡´","like_count":0,"discussions":[{"author":{"id":1073236,"avatar":"https://static001.geekbang.org/account/avatar/00/10/60/54/b3eb605b.jpg","nickname":"é˜¿ç‰›","note":"","ucode":"DC8C189FCF3289","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358528,"discussion_content":"å½“å­è¿›ç¨‹å®Œæˆå¯¹AOFæ–‡ä»¶é‡å†™ä¹‹åï¼Œå®ƒä¼šå‘çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªå®Œæˆä¿¡å·ï¼Œçˆ¶è¿›ç¨‹æ¥åˆ°è¯¥å®Œæˆä¿¡å·ä¹‹åï¼Œä¼šè°ƒç”¨ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°å®Œæˆä»¥ä¸‹å·¥ä½œï¼š\n1ã€å°†AOFé‡å†™ç¼“å­˜ä¸­çš„å†…å®¹å…¨éƒ¨å†™å…¥åˆ°æ–°çš„AOFæ–‡ä»¶ä¸­ï¼›è¿™ä¸ªæ—¶å€™æ–°çš„AOFæ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®åº“çŠ¶æ€å’ŒæœåŠ¡å™¨å½“å‰çš„æ•°æ®åº“çŠ¶æ€ä¸€è‡´ï¼›\n2ã€å¯¹æ–°çš„AOFæ–‡ä»¶è¿›è¡Œæ”¹åï¼ŒåŸå­çš„è¦†ç›–åŸæœ‰çš„AOFæ–‡ä»¶ï¼›å®Œæˆæ–°æ—§ä¸¤ä¸ªAOFæ–‡ä»¶çš„æ›¿æ¢ã€‚\næ‰€ä»¥ä¸ä¼šå‡ºç°ä¸Šè¿°é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615991595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241099,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1597192541,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1597192541","product_id":100056701,"comment_content":"æˆ‘ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ã€‚<br><br>bgrewriteaof å­è¿›ç¨‹å®Œæˆæ—¥å¿—é‡å†™åçš„æ–‡ä»¶ä¼šå’Œä¸»çº¿ç¨‹äº§ç”Ÿçš„AOFæ–‡ä»¶åˆå¹¶ä¹ˆï¼Ÿ<br><br>å­è¿›ç¨‹çš„å†…å­˜æ˜¯æ‹·è´è‡ªä¸»çº¿ç¨‹çš„å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿåœ¨æ‹·è´çš„æ—¶å€™ä¸ä¼šçœŸæ­£çš„åˆ†é…å†…å­˜é¡µï¼Œåªæœ‰å½“ä¸»çº¿ç¨‹å¯¹æŸä¸€ä¸ªå†…å­˜æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ‰ä¼šä¸ºå­è¿›ç¨‹çœŸæ­£åœ°åˆ†é…å†…å­˜é¡µã€‚æˆ‘è§‰å¾—é‡æ–°åˆ†é…çš„å†…å­˜é¡µå¤ªå¤šæ—¶å¯èƒ½ä¼šå‘ç”Ÿé˜»å¡ã€‚<br><br>é‚£ä¹ˆï¼Œé—®é¢˜åˆæ¥äº†ã€‚æ­¤æ—¶ä¸¤ä¸ªAOFæ–‡ä»¶å¯¹åº”çš„å†…å­˜ä¸­åŒä¸€ä¸ªé”®çš„å€¼å·²ç»ä¸ä¸€è‡´äº†ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—AOFé‡å†™æ—¥å¿—æ˜¯ä¸€ä¸ªâ€œåŸºçº¿â€ï¼Œåœ¨æ¢å¤æ•°æ®æ—¶ï¼Œåº”è¯¥å…ˆé‡æ”¾å­è¿›ç¨‹çš„æ—¥å¿—ï¼Œç„¶åå†å åŠ ä¸»çº¿ç¨‹çš„AOFæ—¥å¿—ï¼Œè¿™æ ·æ‰èƒ½æ¢å¤å®Œæ•´çš„æ•°æ®ã€‚<br><br>ä¸çŸ¥é“è¿™ä¹ˆç†è§£å¯¹ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1073443,"avatar":"https://static001.geekbang.org/account/avatar/00/10/61/23/30d134cf.jpg","nickname":"Young","note":"","ucode":"075C0BBE20FD8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371088,"discussion_content":"å­è¿›ç¨‹å®ŒæˆAOFé‡å†™åï¼Œå®ƒå‘çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ï¼Œçˆ¶è¿›ç¨‹æ”¶åˆ°ä¿¡å·åä¼šè°ƒç”¨ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°æŠŠAOFé‡å†™ç¼“å†²åŒºçš„å‘½ä»¤è¿½åŠ åˆ°æ–°AOFæ–‡ä»¶ä¸­ç„¶åæ›¿æ¢æ‰ç°æœ‰AOFæ–‡ä»¶ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619627114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241086,"user_name":"25ma","can_delete":false,"product_type":"c1","uid":1303713,"ip_address":"","ucode":"AB5435B9DB52C9","user_header":"https://static001.geekbang.org/account/avatar/00/13/e4/a1/178387da.jpg","comment_is_top":false,"comment_ctime":1597188914,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1597188914","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œä¹‹å‰è¯´è¿‡Redisæ˜¯å•è¿›ç¨‹çš„ï¼Œé‚£ç°åœ¨è¿™èŠ‚æ€ä¹ˆä¸€ç›´åœ¨å¼ºè°ƒRedisä¸»çº¿ç¨‹è¿™ä¸ªæ¦‚å¿µï¼Œæ–‡ä¸­æåŠçš„ä¸»çº¿ç¨‹æ˜¯ä¸»è¿›ç¨‹çš„ä¸»çº¿ç¨‹å—ï¼Ÿè¿˜è¯·è€å¸ˆè§£æƒ‘ï¼Œè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1157674,"avatar":"https://static001.geekbang.org/account/avatar/00/11/aa/2a/ce7c487d.jpg","nickname":"Terenceå­«","note":"","ucode":"8C3A89C18A2182","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298953,"discussion_content":"Rediså¤„ç†å†…å­˜é‚£äº›ä¸»è¦çš„æ•°æ®æ˜¯ç”¨çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œè¿™å‡ ä¸ªçº¿ç¨‹çš„èµ„æºæ˜¯ä¸å…±äº«ï¼Œæ•ˆèƒ½ä¹Ÿæ˜¯æ ¹æ®CPUæ¯ä¸ªæ ¸çš„çº¿ç¨‹æœ‰å…³ï¼ŒRediså¤„ç†ä¸€äº›æ—¥å¿—æˆ–è€…é›†ç¾¤ç­‰éæ ¸å¿ƒåŠŸèƒ½çš„æ—¶å€™ï¼Œä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹è¿›è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597489640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298167,"discussion_content":"ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æ‹¥æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚Redis çš„å•çº¿ç¨‹ä¸»è¦è¯´æ˜çš„æ˜¯å¤„ç†è¯·æ±‚çš„çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæœ‰å¾ˆå¤šé™„å±çš„çº¿ç¨‹åœ¨å¤„ç†å…¶ä»–çš„äº‹é¡¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597208121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130791,"avatar":"https://static001.geekbang.org/account/avatar/00/11/41/27/528144cc.jpg","nickname":"å…±å’Œå›½é•¿å­","note":"","ucode":"C2F8F66FB23D3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298107,"discussion_content":"æ˜¯å•çº¿ç¨‹å§ï¼Œä¸æ˜¯ä½†è¿›ç¨‹ï¼Œé‚£ä¸ªå•çº¿ç¨‹å°±æ˜¯è¿™ä¸ªä¸»çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597193805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}