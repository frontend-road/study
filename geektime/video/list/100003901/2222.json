{"id":2222,"title":"08 | 微服务总体技术架构体系是怎样设计的？","content":"<p>无</p>\n","comments":[{"had_liked":false,"id":2377,"user_name":"LMD","can_delete":false,"product_type":"c3","uid":1013443,"ip_address":"","ucode":"7626FBB7A4E771","user_header":"","comment_is_top":true,"comment_ctime":1516964807,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"关于《微服务架构核心20讲》课程讲义（PDF 文件），学员可复制下面链接到浏览器下载获取。 http:&#47;&#47;t.cn&#47;RQs9iTw","like_count":13},{"had_liked":false,"id":4048,"user_name":"快乐","can_delete":false,"product_type":"c3","uid":1045565,"ip_address":"","ucode":"B5A0FD8D5723CF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/3d/e3406ac4.jpg","comment_is_top":false,"comment_ctime":1521386953,"is_pvip":false,"replies":[{"id":1857,"content":"单块优先，解决业务问题优先","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1524750096,"ip_address":"","comment_id":4048,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"业务初期要快速迭代产品验证市场接受度，所以前期应以业务驱动，提高开发效率为主，单体应用在这个时期是适合的。如果一开始应用微服务会为整个技术解决方案带来更高的复杂性，拖慢了产品的开发效率","like_count":8,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416180,"discussion_content":"单块优先，解决业务问题优先","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1524750096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93617,"user_name":"杨杰","can_delete":false,"product_type":"c3","uid":1131823,"ip_address":"","ucode":"74817EA9499843","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/2f/b0b0dd74.jpg","comment_is_top":false,"comment_ctime":1557536828,"is_pvip":false,"replies":[{"id":33641,"content":"随着企业业务和团队规模的扩展，会出现需要多套网关部署的场景，例如针对无线应用的无线网关，针对H5应用的H5网关，针对第三方开放平台的开放API网关，针对合作联盟商的联盟商API网关，当然如果企业内部部门和服务多了，也会出现内部API网关。\n\n这些网关的职能大体类似，但是针对的业务场景不同，一些具体的功能和配置会有不同，有时还需要不同团队进行管理运维，这是分网关部署的一个主要原因，是一种按业务场景分开治理的策略。\n\n当然，如果企业业务和团队规模小，则可能一套网关就可以搞定，规模大了业务场景复杂了自然会分治。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1557747653,"ip_address":"","comment_id":93617,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"老师，为什么网关层需要区分内部gw，h5网关，无线网关等? 网关不是应该重点关注跨横切面的功能而不应该涉及具体业务么？","like_count":4,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449701,"discussion_content":"随着企业业务和团队规模的扩展，会出现需要多套网关部署的场景，例如针对无线应用的无线网关，针对H5应用的H5网关，针对第三方开放平台的开放API网关，针对合作联盟商的联盟商API网关，当然如果企业内部部门和服务多了，也会出现内部API网关。\n\n这些网关的职能大体类似，但是针对的业务场景不同，一些具体的功能和配置会有不同，有时还需要不同团队进行管理运维，这是分网关部署的一个主要原因，是一种按业务场景分开治理的策略。\n\n当然，如果企业业务和团队规模小，则可能一套网关就可以搞定，规模大了业务场景复杂了自然会分治。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557747653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19942,"user_name":"djk","can_delete":false,"product_type":"c3","uid":1197719,"ip_address":"","ucode":"B156571DB1F28D","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/97/53c0a73b.jpg","comment_is_top":false,"comment_ctime":1534172495,"is_pvip":false,"replies":[{"id":7241,"content":"原则：上层可调下层，同层也可相互调用，但禁止下层调用上层","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1534651180,"ip_address":"","comment_id":19942,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"基础层得各个微服务之间会互相调用吗？还是都不互相理解，都走聚合服务？","like_count":4,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422029,"discussion_content":"原则：上层可调下层，同层也可相互调用，但禁止下层调用上层","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534651180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":3990,"user_name":"Otto Yen","can_delete":false,"product_type":"c3","uid":1032865,"ip_address":"","ucode":"4F23EADE4A2E92","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/a1/85043970.jpg","comment_is_top":false,"comment_ctime":1521135837,"is_pvip":false,"replies":[{"id":1344,"content":"可以设计开发成微服务，这样职责更单一结构更清晰，多人并行开发效率高。但要不要这样做还需综合考虑，微服务也引入复杂性，需基础设施支撑，投入大。主要考量因素是业务和团队规模，系统耦合度是否影响到多团队并行开发效率。如果业务不复杂人也少，单块能搞定最好，没必要为了微服务而微服务。","user_name":"作者回复","user_name_real":"晨晖","uid":1000463,"ctime":1522811213,"ip_address":"","comment_id":3990,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"假设我需要重新设计系统共用模组架构，其中如IAM，audit日志，缓存，批处理作业，repoting，异常处理，数据访问适合使用微服务来规划吗？\n还是根据单块先行的概念，先设计单块共用模组？谢谢。","like_count":3,"discussions":[{"author":{"id":1000463,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/0f/abb7bfe3.jpg","nickname":"Geek_4zi01v","note":"","ucode":"6A485218B87E38","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416152,"discussion_content":"可以设计开发成微服务，这样职责更单一结构更清晰，多人并行开发效率高。但要不要这样做还需综合考虑，微服务也引入复杂性，需基础设施支撑，投入大。主要考量因素是业务和团队规模，系统耦合度是否影响到多团队并行开发效率。如果业务不复杂人也少，单块能搞定最好，没必要为了微服务而微服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522811213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":3989,"user_name":"Otto Yen","can_delete":false,"product_type":"c3","uid":1032865,"ip_address":"","ucode":"4F23EADE4A2E92","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/a1/85043970.jpg","comment_is_top":false,"comment_ctime":1521135836,"is_pvip":false,"replies":[{"id":2862,"content":"要看你的业务复杂性和团队规模，规模越大服务会分得越细，否则会有效率问题。如果规模小，建议做好基本的模块化就好了。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526914705,"ip_address":"","comment_id":3989,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"假设我需要重新设计系统共用模组架构，其中如IAM，audit日志，缓存，批处理作业，repoting，异常处理，数据访问适合使用微服务来规划吗？\n还是根据单块先行的概念，先设计单块共用模组？谢谢。","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416151,"discussion_content":"要看你的业务复杂性和团队规模，规模越大服务会分得越细，否则会有效率问题。如果规模小，建议做好基本的模块化就好了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526914705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197699,"user_name":"胖子","can_delete":false,"product_type":"c3","uid":1037760,"ip_address":"","ucode":"E6371346288A87","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIuRQaZX70dsBg6khub2VPM1eQAP9IWRWxgOFed3ia4kXyNJInFRicWJ0ibf2YmLsOvJa1sGygGpmJg/132","comment_is_top":false,"comment_ctime":1585392562,"is_pvip":false,"replies":[{"id":75269,"content":"认证中心(或者说用户中心)是给对外的用户进行注册&#47;登录&#47;认证&#47;授权用的。\n\nIAM也是一种认证中心，给企业内部的员工&#47;应用用的。两者本质类似，只是面向用户群不同。\n\n后台服务简单讲无非两种，一种是企业的核心业务领域服务(商品，订单，支付等等)，另外一种是技术支撑服务(配置中心，消息队列，注册中心，网关服务，CI&#47;CD发布服务，监控服务等等)。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585749867,"ip_address":"","comment_id":197699,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"请老师解惑一下，1、支撑服务中的认证授权与平台服务的IAM 区别？2、后台服务不好理解能细说一下吗？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489582,"discussion_content":"认证中心(或者说用户中心)是给对外的用户进行注册/登录/认证/授权用的。\n\nIAM也是一种认证中心，给企业内部的员工/应用用的。两者本质类似，只是面向用户群不同。\n\n后台服务简单讲无非两种，一种是企业的核心业务领域服务(商品，订单，支付等等)，另外一种是技术支撑服务(配置中心，消息队列，注册中心，网关服务，CI/CD发布服务，监控服务等等)。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585749867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1037760,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIuRQaZX70dsBg6khub2VPM1eQAP9IWRWxgOFed3ia4kXyNJInFRicWJ0ibf2YmLsOvJa1sGygGpmJg/132","nickname":"胖子","note":"","ucode":"E6371346288A87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219308,"discussion_content":"感谢回复。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585750406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180954,"user_name":"钱","can_delete":false,"product_type":"c3","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1582449118,"is_pvip":false,"replies":[{"id":74664,"content":"随着微服务技术栈的成熟和普及(springcloud&#47;docker&#47;k8s等)，如今小团队也可以玩转微服务。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585409223,"ip_address":"","comment_id":180954,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"看老师给出的架构图就知道这需要很多研发团队来，研发和运维这些服务，对于小公司而言成本根本负担不起，关键是业务没这么大没这么复杂也是没必要的。\n从钱的角度考虑基本OK，如果不用微服务不耽误赚钱，干麻要用呢？基本都是不用不行了，才必须用的，而且能赚更多钱，否则也是没必要的。","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484862,"discussion_content":"随着微服务技术栈的成熟和普及(springcloud/docker/k8s等)，如今小团队也可以玩转微服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585409223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/63189817.jpg","nickname":"我好像一点都不像程序员","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310514,"discussion_content":"嗯，不要为了用而用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601885352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126916,"user_name":"夜空中最亮的星","can_delete":false,"product_type":"c3","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1566521399,"is_pvip":false,"replies":[{"id":47032,"content":"谢谢夸赞！","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566566004,"ip_address":"","comment_id":126916,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"老师的白板写的很好","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464241,"discussion_content":"谢谢夸赞！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566566004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119069,"user_name":"梁小龙","can_delete":false,"product_type":"c3","uid":1134497,"ip_address":"","ucode":"C5BFA406432749","user_header":"https://static001.geekbang.org/account/avatar/00/11/4f/a1/40df36c7.jpg","comment_is_top":false,"comment_ctime":1564497620,"is_pvip":false,"replies":[{"id":43781,"content":"具体看你企业的规模，小规模1～2套网关就可以了，中大规模一般分场景部署多套网关 。例如携程网(ctrip)规模较大，2015年我在携程工作的时候，它们大致有6～7套面向不同场景的网关(配置也会有差别)，目前应该远不止这么多套了。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564578032,"ip_address":"","comment_id":119069,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"网关层，如内部GW、H5GW、无线GW、开放平台GW，套用到SpringCloud的话，是要为其一一单独设置zuul服务么","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460734,"discussion_content":"具体看你企业的规模，小规模1～2套网关就可以了，中大规模一般分场景部署多套网关 。例如携程网(ctrip)规模较大，2015年我在携程工作的时候，它们大致有6～7套面向不同场景的网关(配置也会有差别)，目前应该远不止这么多套了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564578032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72427,"user_name":"闲情逸致","can_delete":false,"product_type":"c3","uid":1421879,"ip_address":"","ucode":"84574CCC898B3F","user_header":"https://static001.geekbang.org/account/avatar/00/15/b2/37/b80dfa2c.jpg","comment_is_top":false,"comment_ctime":1551623122,"is_pvip":false,"replies":[{"id":26466,"content":"你好，这种做法我没有直接实践过，但我觉得可行，没有看到有明显的问题。事务控制你需要在这个数据服务中封装掉，最好有独立团队集中开发和维护这个数据服务，这样可以根据使用方的不同需求进行封装，集中进行事务处理，也集中进行治理。你需要做好监控，同时考虑扩展性，等量起来了可以考虑sharding，例如根据不同的领域进行拆分和隔离部署，后面按需扩容。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1551792352,"ip_address":"","comment_id":72427,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"老师请教一个问题，我们当前的微服务中，由于数据库只有一个，用的是mybatis，然后专门做了一个微服务来进行接数据操作，里面大部分都是对单表的操作，其他服务需要调用这个数据库服务，用的是feign来调用。这个时候其他服务同时对多张表进行增删改，就没有事务去控制，这种情况怎么处理？除了用三方中间件处理，本身这种设计是否有问题？能否有其他的方案替代？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441584,"discussion_content":"你好，这种做法我没有直接实践过，但我觉得可行，没有看到有明显的问题。事务控制你需要在这个数据服务中封装掉，最好有独立团队集中开发和维护这个数据服务，这样可以根据使用方的不同需求进行封装，集中进行事务处理，也集中进行治理。你需要做好监控，同时考虑扩展性，等量起来了可以考虑sharding，例如根据不同的领域进行拆分和隔离部署，后面按需扩容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551792352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1549364,"avatar":"","nickname":"Geek_3b1096","note":"","ucode":"A6BD92B79B3632","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":222256,"discussion_content":"我司也是这架构","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586105031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68480,"user_name":"helloworld","can_delete":false,"product_type":"c3","uid":1397271,"ip_address":"","ucode":"B62BEA525A64A1","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/17/e3015ba5.jpg","comment_is_top":false,"comment_ctime":1550508039,"is_pvip":false,"replies":[{"id":24401,"content":"资源治理例如配额治理，一个微服务应用使用多少核CPU，内存多少，多少个容器或虚拟机，一个部门或者团队允许使用多少物理资源等，这些需要治理(规划管理和监控)，不治理会被滥用。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1550577669,"ip_address":"","comment_id":68480,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"老师，您说的资源治理举了什么个栗子，没听清。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439699,"discussion_content":"资源治理例如配额治理，一个微服务应用使用多少核CPU，内存多少，多少个容器或虚拟机，一个部门或者团队允许使用多少物理资源等，这些需要治理(规划管理和监控)，不治理会被滥用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550577669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":31958,"user_name":"SuperP ❤ 飝","can_delete":false,"product_type":"c3","uid":1203011,"ip_address":"","ucode":"FCA4E2C5BECB8F","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/43/edf22486.jpg","comment_is_top":false,"comment_ctime":1539342307,"is_pvip":false,"replies":[{"id":11730,"content":"需要一些后端研发和架构经验积累，加油💪","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1539516366,"ip_address":"","comment_id":31958,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"没学过架构的我。越来越听不懂了","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426581,"discussion_content":"需要一些后端研发和架构经验积累，加油💪","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539516366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56804,"user_name":"王盛武","can_delete":false,"product_type":"c3","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1546562909,"is_pvip":false,"replies":[{"id":21751,"content":"zuul一般只处理和业务无关的跨横切面(cross-cutting)逻辑，建议BFF单独一层，关注分离和职责单一原则，当然特殊情况(业务和团队规模很小)zuul上也可以承担BFF职责。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1547618579,"ip_address":"","comment_id":56804,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"波波老师，架构图里的业务层的聚合层可以挪到网关层zuul里实现吗？ 就是两个在一个zuul工程里面。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435242,"discussion_content":"zuul一般只处理和业务无关的跨横切面(cross-cutting)逻辑，建议BFF单独一层，关注分离和职责单一原则，当然特殊情况(业务和团队规模很小)zuul上也可以承担BFF职责。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547618579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21893,"user_name":"Star","can_delete":false,"product_type":"c3","uid":1181101,"ip_address":"","ucode":"F71F995AFA2113","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/ad/d359f740.jpg","comment_is_top":false,"comment_ctime":1535388120,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"请教您一个问题，聚合服务层通常作用是聚合和裁剪，那么如果业务只是一个简单的功能，是否可以不调用聚合服务层而直接调用基础服务层，换句话说就是如果基础服务层基本已经提供了某个业务需求，还需要调用聚合服务层吗，如果需要，那不是需要在聚合服务层又写一遍同样的功能，然后转发给基础服务层，这样的场景如果比较多，会有很多冗余，而且会增加一次网络开销。如果老师看到这个问题，请解答我的疑惑，多谢！","like_count":1},{"had_liked":false,"id":38731,"user_name":"张闯","can_delete":false,"product_type":"c3","uid":1090513,"ip_address":"","ucode":"D5AD46A8DD6FB7","user_header":"https://static001.geekbang.org/account/avatar/00/10/a3/d1/a30a4d06.jpg","comment_is_top":false,"comment_ctime":1542117024,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"相比于单体应用，实施微服务需要更大的技术队伍和更多的硬件资源。初创团队资金有限，没有必要。","like_count":0},{"had_liked":false,"id":21897,"user_name":"Star","can_delete":false,"product_type":"c3","uid":1181101,"ip_address":"","ucode":"F71F995AFA2113","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/ad/d359f740.jpg","comment_is_top":false,"comment_ctime":1535390406,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"不好意思，我已经在后面的章节评论里看到了答案，之前没有仔细看评论，所以老师您可以忽略我的问题了","like_count":0}]}