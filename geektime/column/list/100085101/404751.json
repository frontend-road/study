{"id":404751,"title":"02 | å®æˆ˜ï¼šå®ç°ä¸€ä¸ª ToDo çš„åº”ç”¨ï¼ˆä¸‹ï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ‘æ™”ï¼</p><p>åœ¨ä¸Šä¸€è®²é‡Œï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ª ToDo åº”ç”¨çš„æ ¸å¿ƒä¸šåŠ¡éƒ¨åˆ†ã€‚è™½ç„¶æµ‹è¯•éƒ½é€šè¿‡äº†ï¼Œä½†æˆ‘ç›¸ä¿¡ä½ å¯èƒ½è¿˜æ˜¯ä¼šæœ‰ä¸€ç§ä¸çœŸå®çš„æ„Ÿè§‰ï¼Œå› ä¸ºå®ƒè¿˜ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ï¼Œæ—¢ä¸èƒ½æœ‰å‘½ä»¤è¡Œçš„è¾“å…¥ï¼Œä¹Ÿä¸èƒ½æŠŠ Todo é¡¹çš„å†…å®¹çœŸæ­£åœ°å­˜å‚¨èµ·æ¥ã€‚</p><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°±ç»§ç»­å®ç°è¿™ä¸ª ToDo åº”ç”¨ï¼ŒæŠŠæ¬ ç¼ºçš„éƒ¨åˆ†éƒ½è¡¥ä¸Šã€‚ä¸è¿‡ï¼Œåœ¨å¼€å§‹ä»Šå¤©çš„å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»éœ€è¦å¼ºè°ƒä¸€ä¸‹ï¼Œä¹‹æ‰€ä»¥æˆ‘è¦å…ˆåšæ ¸å¿ƒä¸šåŠ¡éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒåœ¨ä¸€ä¸ªç³»ç»Ÿä¸­æ˜¯æœ€é‡è¦çš„ã€‚å¾ˆå¤šäººå†™ä»£ç çš„æ—¶å€™ä¼šæ€¥ç€æŠŠå„ä¸ªéƒ¨åˆ†è¿æ¥èµ·æ¥ï¼Œä½†å´å¿½è§†äº†æ ¸å¿ƒä¸šåŠ¡éƒ¨åˆ†çš„æ„å»ºï¼Œè¿™æ ·åšé€ æˆçš„ç»“æœå°±æ˜¯ä¸¥é‡çš„è€¦åˆï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šåç»­é—®é¢˜äº§ç”Ÿçš„æ ¹æºã€‚</p><p>åœ¨ä¸Šä¸€è®²é‡Œï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªä¸šåŠ¡å†…æ ¸ï¼Œç°åœ¨è¿˜æ¬ ç¼ºè¾“å…¥è¾“å‡ºçš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•å°†Todo é¡¹ä¿å­˜èµ·æ¥ï¼Œä»¥åŠå¦‚ä½•æ¥å—å‘½ä»¤è¡Œå‚æ•°ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åˆ†åˆ«æ¥å®ç°è¿™ä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><h2>æ–‡ä»¶å­˜å‚¨</h2><p>æˆ‘ä»¬å…ˆæ¥å®ç° Todo é¡¹çš„å­˜å‚¨ã€‚åœ¨ä¸Šä¸€è®²ä¸­ï¼Œæˆ‘ä»¬å·²ç»é¢„ç•™å¥½äº†å­˜å‚¨çš„æ¥å£ï¼Œä¹Ÿå°±æ˜¯ Repository è¿™ä¸ªæ¥å£ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™è¿™ä¸ªæ¥å£æä¾›ä¸€ä¸ªç›¸åº”çš„å®ç°å°±å¥½äº†ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Repository æ¥å£ç°åœ¨æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p><pre><code>public interface TodoItemRepository {\n    TodoItem save(TodoItem item);\n    Iterable&lt;TodoItem&gt; findAll();\n}\n</code></pre><p>å‡ºäºç®€å•çš„è€ƒè™‘ï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªåŸºäºæ–‡ä»¶çš„å­˜å‚¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç»™è¿™ä¸ªæ¥å£æä¾›ä¸€ä¸ªåŸºäºæ–‡ä»¶çš„å®ç°ç‰ˆæœ¬ã€‚</p><!-- [[[read_end]]] --><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å†³å®šä¸€ä¸‹æŠŠè¿™ä¸ªå®ç°æ”¾åˆ°å“ªé‡Œã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¸€å¼€å§‹å°±åˆ†äº†ä¸¤ä¸ªæ¨¡å—å—ï¼Ÿè¿™ä¸¤ä¸ªæ¨¡å—ä¸€ä¸ªæ˜¯ todo-coreï¼Œç”¨æ¥å­˜æ”¾æ ¸å¿ƒä¸šåŠ¡çš„ä»£ç ï¼›ä¸€ä¸ªæ˜¯ todo-cliï¼Œç”¨æ¥å­˜æ”¾ä¸å‘½ä»¤è¡Œç›¸å…³çš„ä»£ç ã€‚</p><p>é‚£ä¹ˆè¿™ä¸ªåŸºäºæ–‡ä»¶çš„å®ç°åº”è¯¥ç®—åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><p>å…¶å®æ”¾åœ¨å“ªé‡Œéƒ½å¯ä»¥è®²å‡ºä¸€å®šçš„é“ç†ã€‚æ”¾åœ¨ todo-core ä¸­ï¼Œå®ƒç®—æ ¸å¿ƒä¸šåŠ¡æä¾›çš„ä¸€ä¸ªå®ç°ï¼Œä¾›å¤–å›´ä½¿ç”¨ï¼›æ”¾åœ¨ todo-cli ä¸­ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªä¸ CLI å®ç°ç›¸å…³çš„éƒ¨åˆ†ã€‚</p><p>æ—¢ç„¶éƒ½å¯ä»¥ï¼Œæˆ‘æ›´å€¾å‘äºæ”¾åœ¨ todo-cli è¿™ä¸ªæ¨¡å—é‡Œï¼ŒåŸå› æ˜¯æˆ‘ä»¬<strong>æœ€å¥½ä¿æŒæ ¸å¿ƒä¸šåŠ¡çš„å°å·§</strong>ï¼Œç­‰åˆ°ä»¥åæœ‰æœºä¼šé‡åˆ°å®ƒéœ€è¦æä¾›ç»™å…¶å®ƒæ¨¡å—ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å†æ¥è€ƒè™‘æŠŠå®ƒæŒªåˆ° todo-core ä¸­ã€‚</p><p>ç¡®å®šäº†å®ƒçš„æ¨¡å—å½’å±ä¹‹åï¼Œæˆ‘ä»¬è¿›å…¥åˆ°å…·ä½“çš„å·¥ä½œä¸­ï¼Œå…ˆæ¥ç¡®å®šå®ƒçš„æµ‹è¯•åœºæ™¯ï¼š</p><ul>\n<li>ä½¿ç”¨ findAll æŸ¥è¯¢ç©ºçš„ Repository ï¼Œè¿”å›ä¸€ä¸ªç©ºçš„åˆ—è¡¨ï¼›</li>\n<li>ä¿å­˜äº† Todo é¡¹ä¹‹åï¼ŒæŸ¥è¯¢ Repository è¿”å›ä¿å­˜äº† Todo é¡¹çš„åˆ—è¡¨ï¼›</li>\n<li>ä¿®æ”¹å·²ä¿å­˜çš„ Todo é¡¹ï¼Œä¿å­˜ä¹‹åï¼ŒæŸ¥è¯¢ Repository å¾—åˆ°çš„åº”è¯¥æ˜¯ä¿®æ”¹è¿‡åçš„ Todo é¡¹ï¼›</li>\n<li>ä¿å­˜ç©ºçš„ Todo é¡¹ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li>\n</ul><h3>ä¸´æ—¶æ–‡ä»¶</h3><p>ä¸ä¹‹å‰çš„æµ‹è¯•å®Œå…¨å¯ä»¥åœ¨å†…å­˜ä¸­æ‰§è¡Œä¸åŒï¼Œè¿™å›çš„æµ‹è¯•è¦ç”¨åˆ°æ–‡ä»¶ã€‚<strong>ä¸ºäº†ä¿è¯æµ‹è¯•æ˜¯å¯ä»¥é‡å¤æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬è¦ç¡®ä¿æ‰€æœ‰çš„èµ„æºåœ¨æ‰§è¡Œä¹‹åè¦æ¢å¤åŸæ ·ã€‚</strong>å†…å­˜èµ„æºæ¢å¤åŸæ ·æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œé‚£æ–‡ä»¶æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>æ–‡ä»¶æ˜¯ä¸€ä¸ªå¤–éƒ¨èµ„æºï¼Œå¦‚æœç”¨åˆ°çš„æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šè¿™ä¸ªæ–‡ä»¶è¦å­˜æ”¾åœ¨å“ªé‡Œã€éœ€è¦åœ¨ä¿è¯æµ‹è¯•æ‰§è¡Œä¹‹åæŠŠæµ‹è¯•å†™å…¥çš„å†…å®¹æ¸…ç†æ‰â€¦â€¦æ€»ä¹‹ï¼Œæœ‰ä¸å°‘ç»†èŠ‚è¦è€ƒè™‘ã€‚æ‰€å¹¸ï¼Œåœ¨æµ‹è¯•ä¸­ä½¿ç”¨æ–‡ä»¶æ˜¯ä¸€ç§ç‰¹åˆ«å¸¸è§çš„éœ€æ±‚ï¼Œåƒ JUnit è¿™æ ·æˆç†Ÿçš„æ¡†æ¶å·²ç»ç»™äº†æˆ‘ä»¬ä¸€ä¸ªæ ‡å‡†ç­”æ¡ˆï¼Œé‚£å°±æ˜¯ä¸´æ—¶æ–‡ä»¶ã€‚</p><p>æ›´å‡†ç¡®åœ°è¯´ï¼ŒJUnit ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯ä¸´æ—¶ç›®å½•ï¼Œåœ¨è¿™ä¸ªç›®å½•é‡Œï¼Œä½ æ€ä¹ˆæŠ˜è…¾éƒ½è¡Œã€‚æˆ‘ä»¬åªè¦ç»™ä¸€ä¸ªå˜é‡æ ‡è®°ä¸Š@TempDirï¼Œè¿™ä¸ªå˜é‡å¯ä»¥æ˜¯ä½œä¸ºä¸€ä¸ªæµ‹è¯•å‡½æ•°çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæµ‹è¯•ç±»çš„å­—æ®µã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„æµ‹è¯•ç”¨ä¾‹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ç»™ç±»çš„ä¸€ä¸ªå­—æ®µæ ‡è®°ä¸Šäº†@TempDirã€‚</p><pre><code>class FileTodoItemRepositoryTest {\n    @TempDir\n    File tempDir;\n    private File tempFile;\n    private FileTodoItemRepository repository;\n    \n    @BeforeEach\n    void setUp() throws IOException {\n        this.tempFile = File.createTempFile(&quot;file&quot;, &quot;&quot;, tempDir);\n        this.repository = new FileTodoItemRepository(this.tempFile);\n    }\n    \n    @Test\n    public void should_find_nothing_for_empty_repository() throws IOException {\n        final Iterable&lt;TodoItem&gt; items = repository.findAll();\n        assertThat(items).hasSize(0);\n    }\n    ...\n}\n</code></pre><h3>æ–‡ä»¶ç¼–è§£ç </h3><p>æœ‰äº†æµ‹è¯•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘å®ç°çš„é—®é¢˜ã€‚å­˜å‚¨åˆ°æ–‡ä»¶é‡Œï¼Œå¿…é¡»è¦è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ç¼–è§£ç çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ç”¨ä»€ä¹ˆæ ·çš„æ ¼å¼è¿›è¡Œæ–‡ä»¶å­˜å‚¨ï¼Œè¿™æ˜¯æˆ‘ä»¬è¦åšçš„ä¸€ä¸ªè®¾è®¡å†³ç­–ã€‚å‡ºäºç®€å•çš„è€ƒè™‘ï¼Œæˆ‘å‡†å¤‡é‡‡ç”¨ JSON è¿™ç§æœ€å¸¸è§çš„æ ¼å¼ã€‚å› ä¸º JSON æ ¼å¼çš„ç¼–è§£ç æœ‰å¾ˆå¤šç°æˆçš„æ–¹å¼ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ä¸“é—¨çš„å¤„ç†äº†ã€‚</p><p>å¤„ç† JSON æ ¼å¼ï¼Œæˆ‘é€‰æ‹©çš„ç¨‹åºåº“çš„æ˜¯ <a href=\"https://github.com/FasterXML/jackson\">Jackson</a>ï¼Œè¿™æ˜¯è¡Œä¸šä¸­æœ€ä¸»æµçš„ JSON å¤„ç†ç¨‹åºåº“ã€‚å°±å½“å‰çš„æƒ…å†µæ¥è¯´ï¼Œè¿™ä¸ªä¾èµ–åªä¸ todo-cli è¿™ä¸ªæ¨¡å—ç›¸å…³ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠ Jackson çš„ä¾èµ–æ·»åŠ åˆ°è¿™ä¸ªæ¨¡å—çš„æ„å»ºè„šæœ¬å³å¯ï¼Œä¹Ÿå°±æ˜¯ todo-cli/build.gradleã€‚</p><pre><code>dependencies {\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:$jacksonVersion&quot;)\n}\n</code></pre><p>è¿™é‡Œçš„ jacksonVersion æ˜¯ä¸€ä¸ªå˜é‡ï¼Œæˆ‘ä»¬æŠŠå®ƒé…ç½®åœ¨æ•´ä¸ªé¡¹ç›®çš„ gradle.properties æ–‡ä»¶é‡Œï¼Œæ–¹ä¾¿å¯¹äºä¾èµ–çš„ç®¡ç†ã€‚</p><pre><code>jacksonVersion=2.12.3\n</code></pre><p>æ·»åŠ äº†æ–°çš„ä¾èµ–ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°ç”Ÿæˆä¸€ä¸‹ IDEA çš„å·¥ç¨‹ï¼Œä¾èµ–å°±æ›´æ–°äº†ï¼Œéšåæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­å·¥ä½œäº†ã€‚</p><pre><code>./gradlew idea\n</code></pre><h3>æµ‹è¯•è¦†ç›–ç‡</h3><p>æœ‰äº†è¿™ä¸ªåŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°æŠŠä»£ç å®ç°å‡ºæ¥ï¼Œæ¯”å¦‚ï¼ŒfindAll çš„å®ç°å°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p><pre><code>@Override\npublic Iterable&lt;TodoItem&gt; findAll() {\n    if (this.file.length() == 0) {\n        return ImmutableList.of();\n    }\n    \n    try {\n        final CollectionType type = typeFactory.constructCollectionType(List.class, TodoItem.class);\n        return mapper.readValue(this.file, type);\n    } catch (IOException e) {\n        throw new TodoException(&quot;Fail to read todo items&quot;, e);\n    }\n}\n</code></pre><p>å½“é€šè¿‡äº†æ‰€æœ‰çš„æµ‹è¯•ï¼Œæˆ‘ä»¬å°±è¦æäº¤ä»£ç äº†ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œæäº¤è„šæœ¬ã€‚</p><pre><code>./gradlew check\n</code></pre><p>å½“æˆ‘ä»¬å¾ˆå¿«åœ°è§£å†³å¤§éƒ¨åˆ†åƒä»£ç é£æ ¼ä¹‹ç±»çš„ä½çº§é—®é¢˜ä¹‹åï¼Œæœ‰ä¸€ä¸ªé—®é¢˜å°±ä¼šå¡ä½æˆ‘ä»¬ï¼šæµ‹è¯•è¦†ç›–ç‡ã€‚</p><p>æµ‹è¯•è¦†ç›–ç‡ç»™äº†æˆ‘ä»¬å‘ç°ä»£ç é—®é¢˜çš„æœºä¼šã€‚æˆ‘åœ¨æ„å»ºè„šæœ¬è®¾å®šçš„æµ‹è¯•è¦†ç›–ç‡æ˜¯ 100%ï¼Œæ‰€ä»¥ï¼Œåªè¦æœ‰æµ‹è¯•è¦†ç›–ä¸åˆ°çš„åœ°æ–¹å°±ä¼šè¢«å‘ç°ã€‚æ‰“å¼€æµ‹è¯•è¦†ç›–ç‡çš„æŠ¥å‘Šï¼ˆå…·ä½“ä½ç½®åœ¨ $buildDir/reports/jacoco/index.htmlï¼‰ï¼Œå®ƒå°±ä¼šæé†’æˆ‘ä»¬å“ªé‡Œæ²¡æœ‰è¦†ç›–åˆ°ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c6/15/c6a1f28da836f806e3007b1a18416615.png?wh=1644x402\" alt=\"\"></p><p>å¯¹äºä¸€äº›ç®€å•çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ æˆ–è°ƒæ•´æµ‹è¯•å°±å¯ä»¥æé«˜æµ‹è¯•è¦†ç›–ç‡ã€‚ä½†æœ‰äº›é—®é¢˜å°±ä¸æ˜¯ç®€å•è°ƒæ•´èƒ½å¤Ÿè§£å†³çš„ã€‚æ¯”å¦‚è¿™é‡Œçš„å¼‚å¸¸å¤„ç†ï¼Œå°±åƒä¸Šé¢è¦†ç›–ç‡æŠ¥å‘Šä¸­çš„ IOExceptionã€‚é‡åˆ°è¿™ç§æƒ…å†µï¼Œä½ ä¼šæ€ä¹ˆåŠï¼Ÿ</p><p>æœ€ç³Ÿç³•çš„åšæ³•æ˜¯ï¼Œæœ‰æµ‹è¯•ä¸å¥½è¦†ç›–ï¼Œå°±è®¤ä¸ºæµ‹è¯•æ²¡æœ‰ä»·å€¼ï¼Œç„¶åå½»åº•æ”¾å¼ƒæµ‹è¯•ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬çš„é€‰é¡¹ã€‚å¦‚æœæˆ‘ä»¬åšæŒæµ‹è¯•ï¼Œè¦æ€ä¹ˆé€šè¿‡è¿™ä¸€å…³å‘¢ï¼Ÿ</p><p>ä¸€ç§åšæ³•æ˜¯ä¸åˆ†é’çº¢çš‚ç™½ï¼Œç»Ÿä¸€é™ä½å¯¹äºæµ‹è¯•è¦†ç›–ç‡çš„è¦æ±‚ï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹æ„å»ºè„šæœ¬ä¸­çš„è®¾ç½®ã€‚è™½ç„¶è¿™ç§åšæ³•å¯ä»¥è®©æˆ‘ä»¬ä¸´æ—¶é€šè¿‡è¿™ä¸€å…³ï¼Œä½†è¿™å´ä¼šç•™ä¸‹åæ‚£ï¼šä»¥åæœ‰å…¶å®ƒæœ¬å¯ä»¥æµ‹è¯•è¦†ç›–åˆ°çš„éƒ¨åˆ†ï¼Œç”±äºæµ‹è¯•è¦†ç›–ç‡çš„é™ä½ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</p><p>å†æœ‰ä¸€ç§åšæ³•ï¼Œå°±æ˜¯æŠŠè¿™äº›å¼‚å¸¸é€ å‡ºæ¥ã€‚å¦‚æœä½ è¿æ°”å¥½ï¼Œæœ‰äº›å¼‚å¸¸å¯ä»¥é€šè¿‡çœ‹æ¥å£æ¥å¤§æ¦‚çŒœæµ‹æ˜¯æ€ä¹ˆäº§ç”Ÿå‡ºæ¥çš„ã€‚åƒè¿™é‡Œçš„è¿™æ®µä»£ç ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸å¾ˆå¯èƒ½å°±æ˜¯ JSON æ ¼å¼ä¸åˆæ³•é€ æˆçš„ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä»”ç»†ç ”ç©¶è¿™ä¸ªç¨‹åºåº“çš„æºä»£ç ï¼Œæ‰èƒ½çŸ¥é“è¿™ä¸ªå¼‚å¸¸æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ã€‚</p><p>çŸ¥é“å¼‚å¸¸æ€ä¹ˆäº§ç”Ÿçš„æ˜¯ç¬¬ä¸€æ­¥ï¼Œæ¥ä¸‹æ¥ï¼Œè¿˜éœ€è¦åˆ¶é€ å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚åƒä¸åˆæ³•çš„ JSON æ ¼å¼è¿˜å¥½åŠï¼Œæœ‰äº›å¼‚å¸¸åˆ™æ˜¯ä½ å¾ˆéš¾é€ å‡ºæ¥çš„ã€‚æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ç”¨åˆ°åå°„ï¼ŒAPI ä¼šæŠ›å‡º ClassNotFoundExceptionï¼Œä½†åªè¦ä½ è¿™ä¸ªç±»åŠ è½½äº†ï¼Œå°±ä¸ä¼šæŠ›å‡º  ClassNotFoundExceptionã€‚</p><p>æˆ‘ä»¬éœ€è¦çŸ¥é“çš„ä¸€ç‚¹æ˜¯ï¼Œ<strong>æˆ‘ä»¬æµ‹è¯•çš„ç›®æ ‡æ˜¯æˆ‘ä»¬çš„ä»£ç ï¼Œè€Œä¸æ˜¯è¿™ä¸ªéš¾ä»¥æµ‹è¯•çš„ç¨‹åºåº“ã€‚</strong>é™¤éè¿™ä¸ªå¼‚å¸¸å¯¹æˆ‘ä»¬æ¥è¯´è‡³å…³é‡è¦ï¼Œå¦åˆ™ï¼Œä¸ºäº†å†™æµ‹è¯•ï¼Œå»ç ”ç©¶å¦å¤–ä¸€ä¸ªç¨‹åºåº“ï¼Œæ˜¾ç„¶æœ‰ç‚¹æœ¬æœ«å€’ç½®äº†ã€‚</p><p>è¿™ä¹Ÿä¸è¡Œï¼Œé‚£ä¹Ÿä¸è¡Œï¼Œæˆ‘ä»¬è¿˜æœ‰åŠæ³•å—ï¼Ÿé€šå¸¸æ¥è¯´ï¼Œè¿™ç§æ²¡æ³•å±è”½æ‰çš„å¼‚å¸¸æ¥è‡ªå¦å¤–ä¸€ä¸ªç¨‹åºåº“ï¼Œè€Œä½¿ç”¨è¿™ä¸ªç¨‹åºåº“å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œéƒ½æ˜¯ä¸€äº›å®ç°ç»†èŠ‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†è¿™äº›ç»†èŠ‚ç»™å°è£…èµ·æ¥ã€‚æ¯”å¦‚åœ¨å‰é¢ä»£ç é‡Œï¼ŒæŠ›å‡ºå¼‚å¸¸çš„ä¸»è¦æ˜¯ readValue è¿™ä¸€å¥ï¼Œå®ƒå®ç°çš„å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å–å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå°è£…åˆ°ä¸€ä¸ª JSON å¤„ç†çš„ç±»ä¸­ã€‚</p><pre><code>public final class Jsons {\n    private static final TypeFactory FACTORY = TypeFactory.defaultInstance();\n    private static final ObjectMapper MAPPER = new ObjectMapper();\n    \n    public static Iterable&lt;TodoItem&gt; toObjects(final File file) {\n        final CollectionType type = FACTORY.constructCollectionType(List.class, TodoItem.class);\n        try {\n            return MAPPER.readValue(file, type);\n        } catch (IOException e) {\n            throw new TodoException(&quot;Fail to read objects&quot;, e);\n        }\n    }\n    \n    ...\n}\n</code></pre><p>æˆ‘ä»¬åœ¨è¿™é‡Œå°†å¼‚å¸¸å°è£…æˆæˆ‘ä»¬å†…éƒ¨çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¤–é¢å°±å¯ä»¥ä¸ç”¨æ•è·å¤„ç†äº†ã€‚ç›¸åº”åœ°ï¼ŒfindAll çš„å¤„ç†å°±å¯ä»¥è°ƒç”¨è¿™ä¸ªå°è£…å‡ºæ¥çš„ä»£ç ã€‚</p><pre><code>@Override\npublic Iterable&lt;TodoItem&gt; findAll() {\n    if (this.file.length() == 0) {\n        return ImmutableList.of();\n    }\n    \n    return Jsons.toObjects(this.file);\n}\n</code></pre><p>ç»è¿‡è¿™ä¸ªæ”¹é€ ï¼ŒFileTodoItemRepository å°±å¯ä»¥ç”±æµ‹è¯•å®Œå…¨è¦†ç›–äº†ã€‚æˆ–è®¸ä½ è¿˜ä¼šæ‹…å¿ƒé‚£ä¸ªæ–°çš„ Jsons ç±»æ²¡æœ‰åŠæ³•æµ‹è¯•è¦†ç›–ã€‚å¯¹äºè¿™ä¸ªç±»ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆæ˜¯å¿½ç•¥æ‰å®ƒï¼Œä¸å»åšè¦†ç›–ã€‚å¤„ç†æ‰‹æ³•å°±æ˜¯åœ¨æ„å»ºè„šæœ¬ä¸­å°†å®ƒæ’é™¤åœ¨æµ‹è¯•è¦†ç›–ä¹‹å¤–ã€‚</p><pre><code>coverage {\n    excludeClasses = [\n            ...\n            &quot;com.github.dreamhead.todo.util.Jsons&quot;\n    ]\n}\n</code></pre><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥å¿½ç•¥å®ƒï¼Ÿä¸€æ–¹é¢ï¼Œè¿™æ®µä»£ç å¾ˆç®€å•ï¼Œå‡ ä¹æ²¡æœ‰é€»è¾‘ï¼Œå› ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªè°ƒç”¨çš„å°è£…ã€‚å¦å¤–ä¸€æ–¹é¢ï¼Œè¿™é‡Œé¢ä¸»è¦çš„ä»£ç ä¸æ˜¯æˆ‘ä»¬ç¼–å†™çš„ï¼Œæ­£å¦‚å‰é¢æ‰€è¯´ï¼Œæˆ‘ä»¬æµ‹è¯•çš„ä¸»è¦ç›®çš„æ˜¯æµ‹è¯•æˆ‘ä»¬è‡ªå·±å†™çš„ä»£ç ï¼Œè€Œä¸æ˜¯åˆ«äººçš„ç¨‹åºåº“ã€‚</p><p>è¿™é‡Œå°ç»“ä¸€ä¸‹ï¼Œ<strong>ç”±äºå…¶å®ƒç¨‹åºåº“é€ æˆéš¾ä»¥æµ‹è¯•çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€å±‚å±‚è–„è–„çš„å°è£…ï¼Œç„¶åï¼Œåœ¨è¦†ç›–ç‡æ£€æŸ¥ä¸­å¿½ç•¥å®ƒã€‚å°è£…å’Œå¿½ç•¥ï¼Œç¼ºä¸€ä¸å¯ã€‚</strong></p><p>è‡³äºå…¶å®ƒéƒ¨åˆ†æ›´å…·ä½“çš„ä»£ç ï¼Œæˆ‘å°±ä¸åœ¨è¿™é‡Œå±•ç¤ºäº†ï¼Œä½ å¯ä»¥åˆ°å¼€æºé¡¹ç›®ä¸­å»æŸ¥çœ‹ç»†èŠ‚ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†å¯ä»¥å­˜å‚¨ Todo é¡¹çš„ä»“åº“ã€‚åŸºç¡€å·²ç»å…·å¤‡ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦æŠŠæ‰€æœ‰è¿™äº›ä¸œè¥¿éƒ½è¿èµ·æ¥ï¼Œç»™å®ƒä¸€ä¸ªå…¥å£ã€‚</p><h2>å‘½ä»¤è¡Œå…¥å£</h2><p>ç¼–å†™å‘½ä»¤è¡Œå…¥å£ï¼Œæˆ‘ä»¬è¦é€‰æ‹©ä¸€ä¸ªç¨‹åºåº“ï¼Œçœå¾—è‡ªå·±ä»å¤´ç¼–å†™å„ç§è§£æçš„ç»†èŠ‚ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘é€‰æ‹©çš„ç¨‹åºåº“æ˜¯ <a href=\"https://picocli.info/\">Picocli</a>ã€‚</p><p>è¿™ä¸ªç¨‹åºåº“å¯èƒ½ä½ å¯¹å®ƒä¸æ˜¯é‚£ä¹ˆç†Ÿæ‚‰ã€‚é‚£ä¹ˆå¯¹äºä¸€ä¸ªæ–°ç¨‹åºåº“æ¥è¯´ï¼Œä½ çš„å…³æ³¨ç‚¹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç»å¤§å¤šæ•°äººæ‹¿åˆ°ä¸€ä¸ªæ–°ç¨‹åºåº“ï¼Œé‡ç‚¹éƒ½æ˜¯èµ¶ç´§è®©å®ƒè·‘èµ·æ¥ï¼Œåªè¦ç¨‹åºèƒ½å¤Ÿè¿è¡Œï¼Œå…¶å®ƒçš„å°±ä¸åœ¨ä¹äº†ï¼Œç”šè‡³ç”¨æ¥æµ‹è¯•ç¨‹åºåº“æ€ä¹ˆç”¨çš„ä»£ç ï¼Œæœ€ç»ˆä¹Ÿæˆä¸ºäº†ä»£ç ä»“åº“çš„ä¸€éƒ¨åˆ†ã€‚</p><p>è¯·åƒä¸‡è®°ä½ï¼Œç”¨æ¥è¯•éªŒçš„ä»£ç æ°¸è¿œæ˜¯ç”¨æ¥è¯•éªŒçš„ä»£ç ã€‚<strong>ä¸€æ—¦æˆ‘ä»¬æŒæ¡äº†ä¸€ä¸ªç¨‹åºåº“çš„åŸºæœ¬ç”¨æ³•ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åº”è¯¥æŠ›å¼ƒæ‰è¯•éªŒä»£ç ï¼Œé‡æ–°è®¾è®¡ï¼ŒæŒ‰ç…§å®ƒåº”æœ‰çš„æ ·å­æ¥ä½¿ç”¨è¿™ä¸ªç¨‹åºåº“ã€‚</strong></p><h3>æ¥å£çš„é€‰æ‹©</h3><p>é¢å¯¹æ–°çš„ç¨‹åºåº“ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜æˆ‘ä»¬å¯èƒ½ä¼šå¿½ç•¥ã€‚æœ‰äº›ç¨‹åºåº“å¯¹åŒæ ·ä¸€ä»¶äº‹å¯ä»¥æœ‰å¤šç§ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚æ¯”å¦‚å°± Picocli è€Œè¨€ï¼ŒåŒæ ·æ˜¯å¤„ç†ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ï¼Œå¯ä»¥æŠŠå®ƒå½“åšä¸€ä¸ªç±»çš„å­—æ®µï¼Œåƒä¸‹é¢è¿™æ ·ã€‚</p><pre><code>class AddCommand ...\n    @Parameters(index = &quot;0&quot;)\n    private String item;\n    ...\n}\n</code></pre><p>ä¹Ÿå¯ä»¥å½“åšä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚</p><pre><code>class AddCommand ...\n    public int add(@CommandLine.Parameters(index = &quot;0&quot;) final String item) {\n        ...\n    }\n}\n</code></pre><p>ä½ ä¼šé€‰æ‹©å“ªç§åšæ³•å‘¢ï¼Ÿæˆ‘çš„ç­”æ¡ˆæ˜¯<strong>é€‰æ‹©å¯æµ‹è¯•æ€§å¥½çš„</strong>ã€‚</p><p>å°±ä¸Šé¢ä¸¤ç§åšæ³•è€Œè¨€ï¼ŒåŒæ ·æ˜¯è¦åšå•å…ƒæµ‹è¯•ï¼Œç¬¬ä¸€ç§å­—æ®µçš„æ–¹å¼ï¼Œæˆ‘éœ€è¦é€šè¿‡åå°„çš„æ–¹å¼è®¾ç½®è¿™ä¸ªå­—æ®µçš„å€¼ï¼›è€Œç¬¬äºŒç§å‚æ•°çš„æ–¹å¼ï¼Œæˆ‘åªè¦ä¼ å‚å°±å¥½äº†ã€‚æ˜¾ç„¶ï¼Œç¬¬äºŒç§æ–¹å¼æ›´ç®€å•ã€‚</p><p>æˆ–è®¸ä½ ä¼šå¥½å¥‡ï¼Œæ—¢ç„¶ç¬¬äºŒç§æ–¹å¼æ›´ç®€å•ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰ç¬¬ä¸€ç§æ–¹å¼å‘¢ï¼Ÿå› ä¸ºå¦‚æœä½ ä¸è€ƒè™‘æµ‹è¯•è€Œåªè€ƒè™‘å†™ä»£ç çš„è¯ï¼Œç¬¬ä¸€ç§æ–¹å¼ç”¨èµ·æ¥æ›´å®¹æ˜“ã€‚</p><p>ä¸€ä¸ªæ˜¯å®¹æ˜“å†™ï¼Œä¸€ä¸ªæ˜¯å®¹æ˜“æµ‹ï¼Œè¿™å°±æ˜¯ä¸¤ç§ä¸åŒç¼–ç å“²å­¦çš„å–èˆã€‚</p><p>å½“ç„¶ï¼Œè¿™ä¸ªè®¨è®ºæ˜¯åœ¨æˆ‘ä»¬æœ‰é€‰æ‹©çš„æƒ…å†µä¸‹è¿›è¡Œçš„ï¼Œæœ‰äº›ç¨‹åºåº“å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬æä¾›è¿™äº›é€‰æ‹©ã€‚å¾ˆå¤šç¨‹åºåº“åªæœ‰ä¸€ç§åšæ³•ï¼Œè€Œä¸”é€šå¸¸æ˜¯å®¹æ˜“å†™çš„åšæ³•ï¼Œè¿™ä¸ªæ—¶å€™å•å…ƒæµ‹è¯•å°±æ¯”è¾ƒéº»çƒ¦ã€‚ä¸è¿‡é€šå¸¸æ¥è¯´ï¼Œè¿™ç§æƒ…å†µéƒ½å‡ºç°åœ¨è¾¹ç¼˜çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘è¿™ä¸ªéƒ¨åˆ†çš„æµ‹è¯•æ˜¯ç”¨å•å…ƒæµ‹è¯•ï¼Œè¿˜æ˜¯ç”¨é›†æˆæµ‹è¯•ã€‚</p><h3>æµ‹è¯•çš„é€‰æ‹©</h3><p>åšå¥½äº†åŸºç¡€çš„å‡†å¤‡ï¼Œç°åœ¨æˆ‘ä»¬å‡†å¤‡å¼€å§‹æµ‹è¯•äº†ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿè¦å‡†å¤‡æµ‹è¯•åœºæ™¯ã€‚åœ¨å‘½ä»¤è¡Œæ¥å£æˆ‘ä»¬è¦æµ‹çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®ï¼Œä¸»è¦çš„ä¸šåŠ¡é€»è¾‘å·²ç»åœ¨å‰é¢çš„æµ‹è¯•ä¸­è¦†ç›–åˆ°äº†ï¼Œå‘½ä»¤è¡Œæ¥å£ä¸»è¦å°±æ˜¯å®Œæˆä¸ç”¨æˆ·è¾“å…¥ç›¸å…³çš„ä¸€äº›å¤„ç†ã€‚</p><p>è¿˜è®°å¾—å‰é¢æˆ‘åœ¨è®¨è®ºä¸šåŠ¡å¤„ç†æ—¶é—ç•™çš„å†…å®¹å—ï¼Ÿæ²¡é”™ï¼Œç”¨æˆ·è¾“å…¥ç›¸å…³çš„ä¸€äº›æ ¡éªŒè¦æ”¾åœ¨è¿™é‡Œæ¥åšï¼Œå‰©ä¸‹çš„å°±æ˜¯è½¬ç»™æˆ‘ä»¬é¢†åŸŸæœåŠ¡çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ TodoItemServiceã€‚</p><p>æœ‰äº†è¿™ä¸ªç†è§£ï¼Œæˆ‘ä»¬æ¥ç½—åˆ—ä¸€ä¸‹æµ‹è¯•åœºæ™¯ï¼š</p><ul>\n<li>æ·»åŠ ä¸€ä¸ªæ­£å¸¸çš„ Todo é¡¹ï¼Œè¯¥ Todo é¡¹å¯ä»¥æŸ¥è¯¢åˆ°ï¼›</li>\n<li>æ·»åŠ ä¸€ä¸ªç©ºçš„ Todo é¡¹ï¼Œæç¤ºå‚æ•°é”™è¯¯ï¼›</li>\n<li>æ ‡è®°ä¸€ä¸ªå·²æœ‰çš„ Todo é¡¹ä¸ºå®Œæˆï¼Œè¯¥ Todo é¡¹çš„çŠ¶æ€ä¸ºå·²å®Œæˆï¼›</li>\n<li>æ ‡è®°ä¸€ä¸ªä¸å­˜åœ¨çš„ Todo é¡¹ä¸ºå®Œæˆï¼Œæç¤ºè¯¥é¡¹ä¸å­˜åœ¨ï¼›</li>\n<li>æ ‡è®°ä¸€ä¸ªç´¢å¼•å°äº 0 çš„ Todo é¡¹ä¸ºå®Œæˆï¼Œæç¤ºå‚æ•°é”™è¯¯ï¼›</li>\n<li>åˆ—å‡ºæ‰€æœ‰ Todo é¡¹ï¼Œç¼ºçœä¸ºåˆ—å‡ºæ‰€æœ‰æœªå®Œæˆçš„ Todo é¡¹ï¼›</li>\n<li>ç”¨â€œ-aâ€å‚æ•°åˆ—å‡ºæ‰€æœ‰çš„ Todo é¡¹ï¼Œåˆ—å‡ºæ‰€æœ‰çš„ Todo é¡¹ã€‚</li>\n</ul><p>å¦‚æœä½ æ˜¯è·Ÿç€æˆ‘ä¸€è·¯èµ°åˆ°äº†ç°åœ¨ï¼Œæ€ä¹ˆæŠŠè¿™äº›æµ‹è¯•å†™å‡ºæ¥å¯¹ä½ æ¥è¯´åº”è¯¥å·²ç»ä¸æ˜¯å¤ªå¤§çš„é—®é¢˜äº†ã€‚ä½†åœ¨ç¼–å†™ä»£ç ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜è¦è€ƒè™‘ï¼Œæˆ‘ä»¬å‡†å¤‡å†™ä»€ä¹ˆæ ·çš„æµ‹è¯•å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å‰é¢ç¼–å†™çš„æµ‹è¯•éƒ½æ˜¯å•å…ƒæµ‹è¯•ï¼Œä¹Ÿå°±æ˜¯é’ˆå¯¹ä¸€ä¸ªå•å…ƒè¿›è¡Œçš„æµ‹è¯•ã€‚å¦‚æœæŒ‰ç…§å•å…ƒæµ‹è¯•çš„ç¼–å†™é€»è¾‘æ¥å†™è¿™æ®µä»£ç ï¼Œæœ€ç®€å•çš„åšæ³•æ˜¯ mock ä¸€ä¸ª TodoItemService ä½œä¸ºå‚æ•°ä¼ ç»™æˆ‘ä»¬çš„å‘½ä»¤ç±»ï¼Œè¿™ç§åšæ³•æœ¬èº«æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p><p>è™½ç„¶æˆ‘ä»¬èƒ½å¤Ÿä¿è¯æ‰€æœ‰çš„å•å…ƒæ­£å¸¸è¿ä½œï¼Œä½†è¿™äº›å•å…ƒé…åˆåœ¨ä¸€èµ·æ˜¯å¦ä¾ç„¶èƒ½å¤Ÿæ­£å¸¸è¿ä½œå‘¢ï¼Ÿè¿™å¯ä¸ä¸€å®šã€‚å› ä¸º<strong>é™¤äº†è¦ä¿è¯å•å…ƒçš„æ­£ç¡®ï¼Œæˆ‘ä»¬è¿˜è¦ä¿è¯å•å…ƒä¹‹é—´çš„åä½œä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚</strong>ä½ æˆ–è®¸å·²ç»çŸ¥é“æˆ‘è¦è¯´ä»€ä¹ˆäº†ï¼Œæ²¡é”™ï¼Œé™¤äº†å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é›†æˆæµ‹è¯•ã€‚</p><p>ä¹‹æ‰€ä»¥è¦åœ¨è¿™é‡Œè®¨è®ºé›†æˆæµ‹è¯•ï¼Œå› ä¸ºæˆ‘ä»¬å‰é¢å·²ç»æŠŠä¸»è¦çš„ä¸šåŠ¡é€»è¾‘å·²ç»å®Œæˆäº†ï¼Œæœ€åçš„è¿™éƒ¨åˆ†ä»£ç å®é™…ä¸Šåªæ˜¯å¯¹ä¸šåŠ¡é€»è¾‘åšä¸€ä¸ªç®€å•çš„å°è£…ï¼Œè¿™ä¼šæ˜¯éå¸¸è–„çš„ä¸€å±‚ã€‚æ‰€ä»¥ï¼Œè¿™å±‚å¦‚æœåšå•å…ƒæµ‹è¯•ï¼Œé™¤äº†å‚æ•°æ ¡éªŒçš„éƒ¨åˆ†ï¼Œå‰©ä¸‹çš„ä¸»è¦å·¥ä½œéƒ½æ˜¯è½¬å‘ï¼Œå°†å¤„ç†é€»è¾‘è½¬å‘ç»™æœåŠ¡å±‚ã€‚æ‰€ä»¥ï¼Œå‡ºäºå®ç”¨çš„è€ƒè™‘ï¼Œæˆ‘ä»¬ä¸å¦¨åœ¨è¿™é‡Œå°±ç”¨é›†æˆæµ‹è¯•ä»£æ›¿å•å…ƒæµ‹è¯•ï¼Œç®€åŒ–æµ‹è¯•çš„ç¼–å†™ã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨è¿™é‡Œå‡†å¤‡ç¼–å†™çš„æ˜¯é›†æˆæµ‹è¯•ï¼Œä¸ç¼–å†™å•å…ƒæµ‹è¯•ä¸åŒçš„ä¸€ä¸ªå…³é”®ç‚¹å°±æ˜¯ï¼Œ<strong>è¿™é‡Œé‡‡ç”¨çš„æœåŠ¡å¯¹è±¡æ˜¯çœŸå®çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¨¡æ‹Ÿå¯¹è±¡ã€‚</strong>è¿™å°±éœ€è¦æˆ‘ä»¬æŒ‰ç…§ä¸šåŠ¡å¯¹è±¡çš„ç»„è£…è§„åˆ™å°†çœŸå®çš„å¯¹è±¡ç»„è£…èµ·æ¥ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œå› ä¸ºæ¶‰åŠçš„å¯¹è±¡éƒ½æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æš‚ä¸”é‡‡ç”¨ç›´æ¥å¯¹è±¡ç»„è£…çš„æ–¹å¼ã€‚åœ¨å¾ˆå¤šé¡¹ç›®é‡Œé¢ï¼Œå¯¹è±¡ç»„è£…çš„å·¥ä½œæ˜¯ç”± DI å®¹å™¨å®Œæˆçš„ã€‚</p><p>ä¸ºäº†ä¿è¯ç»„è£…è¿‡ç¨‹çš„ä¸€è‡´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç»„è£…è¿‡ç¨‹å•ç‹¬æ‹¿å‡ºæ¥ï¼Œè®©æœ€ç»ˆçš„ä»£ç å’Œæµ‹è¯•ä»£ç å¤ç”¨åŒæ ·çš„é€»è¾‘ã€‚</p><pre><code>public class ObjectFactory {\n    public CommandLine createCommandLine(final File repositoryFile) {\n        return new CommandLine(createTodoCommand(repositoryFile));\n    }\n    \n    private TodoCommand createTodoCommand(final File repositoryFile) {\n        final TodoItemService service = createService(repositoryFile);\n        return new TodoCommand(service);\n    }\n    \n    public TodoItemService createService(final File repositoryFile) {\n        final TodoItemRepository repository = new FileTodoItemRepository(repositoryFile);\n        return new TodoItemService(repository);\n    }\n}\n</code></pre><p>è¿™ä¸ªç»„è£…é€»è¾‘æœ¬èº«æ²¡æœ‰ä»»ä½•å¤æ‚çš„åœ°æ–¹ï¼Œä¸è¿‡ï¼Œæœ‰ä¸€ç‚¹æ˜¯éœ€è¦æˆ‘ä»¬åœ¨å†™è¿™æ®µä»£ç æ—¶è¦è€ƒè™‘æ¸…æ¥šçš„ï¼Œå°±æ˜¯<strong>æŠŠç»„è£…çš„è¾¹ç•Œè®¾ç½®åœ¨å“ªé‡Œ</strong>ã€‚æ¢å¥è¯è¯´å°±æ˜¯æŠŠä»€ä¹ˆæ ·çš„éƒ¨åˆ†æ”¾åœ¨ç»„è£…è¿‡ç¨‹ä¸­ï¼Œä»€ä¹ˆæ ·çš„éƒ¨åˆ†ä¸æ”¾ã€‚å› ä¸ºæ”¾å¤ªå¤šçš„è¯ï¼Œæµ‹è¯•å¯èƒ½ä¼šä¸æ–¹ä¾¿ï¼›å¤ªå°‘çš„è¯ï¼Œä¼šè®©é›†æˆæœ¬èº«å˜å¾—æ„ä¹‰ä¸å¤§ã€‚</p><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç é‡Œï¼Œæˆ‘ä»¬æŠŠè¾¹ç•Œè®¾ç½®åœ¨äº†æ–‡ä»¶æ¥å£ï¼Œä¹Ÿå°±æ˜¯ createService è¿™ä¸ªå‡½æ•°çš„å‚æ•°ã€‚è¿™æ ·å¤„ç†çš„è¯ï¼Œåœ¨äº§å“çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°±ç”¨æ­£å¼çš„æ–‡ä»¶ï¼›è€Œåœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œå°±å¯ä»¥é‡‡ç”¨ä¸´æ—¶æ–‡ä»¶ã€‚</p><pre><code>class TodoCommandTest {\n    @TempDir\n    File tempDir;\n    private TodoItemService service;\n    private CommandLine cli;\n    \n    @BeforeEach\n    void setUp() {\n        final ObjectFactory factory = new ObjectFactory();\n        final File repositoryFile = new File(tempDir, &quot;repository.json&quot;);\n        this.service = factory.createService(repositoryFile);\n        cli = factory.createCommandLine(repositoryFile);\n    }\n</code></pre><p>ä½ ä¼šçœ‹åˆ°ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é™¤äº†å£°æ˜æœ€å¤–é¢çš„è°ƒç”¨æ¥å£ï¼ˆä¹Ÿå°±æ˜¯ cli ï¼‰ä¹‹å¤–ï¼Œè¿˜å£°æ˜äº†ä¸€ä¸ªå˜é‡ serviceï¼Œå®ƒæ˜¯åšä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸å¦¨çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªæµ‹è¯•ã€‚</p><pre><code>@Test\npublic void should_mark_as_done() {\n    service.addTodoItem(TodoParameter.of(&quot;foo&quot;));\n    \n    cli.execute(&quot;done&quot;, &quot;1&quot;);\n    \n    final List&lt;TodoItem&gt; items = service.list(true);\n    assertThat(items.get(0).isDone()).isTrue();\n}\n</code></pre><p>æ ‡è®°ä¸€ä¸ª Todo é¡¹ä¸ºå·²å®Œæˆï¼Œä½†å‰ææ¡ä»¶æ˜¯è¦æœ‰ä¸€ä¸ª Todo é¡¹ä¾›ä½ å»æ ‡è®°ã€‚é‚£æ€ä¹ˆæŠŠè¿™ä¸ª Todo é¡¹æ·»åŠ è¿›å»å‘¢ï¼Ÿä¸€ç§åšæ³•æ˜¯è°ƒç”¨æˆ‘ä»¬çš„å‘½ä»¤è¡Œæ¥å£ï¼Œä½†è¦çŸ¥é“ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæµ‹è¯•çš„ç›®æ ‡å°±æ˜¯å‘½ä»¤è¡Œæ¥å£ï¼Œä¹Ÿå°±æ˜¯ addï¼Œè€Œæˆ‘ä»¬è¿™é‡Œæµ‹è¯•çš„ä¸»è¦æ¥å£æ˜¯ doneã€‚</p><p><strong>å†™æµ‹è¯•è¦å°½å¯èƒ½å‡å°‘å¯¹äºä¸ç¨³å®šç»„ä»¶çš„ä¾èµ–</strong>ï¼Œdone æ¥å£å·²ç»æ˜¯ä¸€ä¸ªä¸ç¨³å®šçš„äº†ï¼Œå†åŠ ä¸Š addï¼Œæµ‹è¯•å‡ºé—®é¢˜çš„æ¦‚ç‡å°±ä¼šè¿›ä¸€æ­¥å¢å¤§ã€‚</p><p>æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨äº†å¦å¤–ä¸€ç§åšæ³•ã€‚service æ˜¯æˆ‘ä»¬ä¹‹å‰å·²ç»æµ‹è¯•å¥½çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹æˆä¸€ä¸ªç¨³å®šçš„ç»„ä»¶ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† service æ·»åŠ  Todo é¡¹ã€‚</p><p>å…·ä½“çš„ä»£ç ä½ å¯ä»¥å‚è€ƒæˆ‘çš„å¼€æºé¡¹ç›®ï¼Œè¿™é‡Œå°±ä¸å†è¿›ä¸€æ­¥ç½—åˆ—äº†ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>ä»Šå¤©æˆ‘ä»¬åœ¨æ ¸å¿ƒä¸šåŠ¡çš„åŸºç¡€ä¸Šï¼Œè¡¥é½äº†è¾“å…¥è¾“å‡ºçš„éƒ¨åˆ†ã€‚ä¸åŒäºä¹‹å‰æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯åœ¨å†…å­˜ä¸­æ‰§è¡Œçš„æƒ…å†µï¼Œä¸€æ—¦ç‰µæ‰¯åˆ°è¾“å…¥è¾“å‡ºï¼Œæˆ‘ä»¬å°±è¦è€ƒè™‘æ›´å¤šçš„é—®é¢˜ã€‚è¿™ä¸€è®²æˆ‘ä»¬é‡åˆ°çš„å¾ˆå¤šé—®é¢˜ï¼Œå¯èƒ½ä¹Ÿæ˜¯ä½ åœ¨å®é™…çš„æµ‹è¯•å·¥ä½œä¸­ä¼šé‡åˆ°çš„ã€‚</p><p>å¦‚æœä½ çš„ç³»ç»Ÿéœ€è¦ä¸æ–‡ä»¶æ‰“äº¤é“ï¼š</p><ul>\n<li>é€šè¿‡è°ƒæ•´è®¾è®¡ï¼Œå°†æ–‡ä»¶æ³¨å…¥åˆ°æ¨¡å‹ä¸­ï¼›</li>\n<li>åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ï¼›</li>\n<li>å¦‚æœé‡‡ç”¨çš„æ˜¯ JUnit 5ï¼Œå¯ä»¥ä½¿ç”¨@TempDir åœ¨ä¸´æ—¶ç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶æ–‡ä»¶ã€‚</li>\n</ul><p>å¦‚æœé€šè¿‡æµ‹è¯•è¦†ç›–å‘ç°äº†éš¾ä»¥æµ‹è¯•çš„ç¬¬ä¸‰æ–¹ä»£ç ï¼š</p><ul>\n<li>é€šè¿‡åšä¸€å±‚è–„è–„çš„å°è£…ï¼Œå°†ç¬¬ä¸‰æ–¹ä»£ç ä¸ä½ çš„ä»£ç åˆ†ç¦»å¼€ï¼Œä¿è¯ä½ çš„ä»£ç å®Œå…¨ç”±æµ‹è¯•è¦†ç›–ï¼›</li>\n<li>åœ¨æµ‹è¯•è¦†ç›–ç‡ä¸­ï¼Œå¿½ç•¥è¿™å±‚å°è£…ã€‚</li>\n</ul><p>å½“æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶æ—¶ï¼š</p><ul>\n<li>ä¸æ¡†æ¶ç´§å¯†ç»“åˆçš„ä»£ç åªæ˜¯åšæœ€ç®€å•çš„æ¥å£æ ¡éªŒå·¥ä½œï¼ŒæŠŠä¸šåŠ¡é€»è¾‘æ”¾åœ¨è‡ªå·±çš„ä»£ç é‡Œï¼›</li>\n<li>å¦‚æœæœ‰å¤šç§æ–¹å¼å®Œæˆä¸€ä¸ªåŠŸèƒ½ï¼Œé€‰æ‹©å¯æµ‹è¯•æ€§è¾ƒå¥½çš„å®ç°æ–¹å¼ã€‚</li>\n</ul><p>æˆ‘ä»¬ç¼–å†™é›†æˆæµ‹è¯•ï¼š</p><ul>\n<li>æ˜¯ä¸ºäº†ä¿è¯ç»„ä»¶ä¹‹é—´åä½œçš„æ­£ç¡®æ€§ï¼›</li>\n<li>éœ€è¦åˆ©ç”¨ä¸äº§å“ä»£ç ç›¸åŒçš„ç»„ä»¶ç»„è£…è¿‡ç¨‹ï¼›</li>\n<li>å¯ä»¥æŠŠå·²ç»æµ‹è¯•å¥½çš„ç¨³å®šç»„ä»¶å½“åšåŸºç¡€ã€‚</li>\n</ul><p>å¦‚æœä»Šå¤©çš„å†…å®¹ä½ åªèƒ½è®°ä½ä¸€ä»¶äº‹ï¼Œé‚£è¯·è®°ä½ï¼š<strong>éš”ç¦»å˜åŒ–ï¼Œé€æ­¥ç¼–å†™ç¨³å®šçš„ä»£ç </strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/39/e5/39a31a0bf517781672f9d72c0a7f52e5.jpg?wh=1976x1085\" alt=\"\"></p><h2>æ€è€ƒé¢˜</h2><p>ä¸€æ—¦ä½ å¼€å¯äº†å¯¹æµ‹è¯•çš„æ€è€ƒï¼Œæˆ‘ä»¬å°±èƒ½å‘ç°æ›´å¤šçš„æ€è€ƒè§’åº¦ï¼Œæ¯”å¦‚ï¼šæ§åˆ¶å°è¾“å‡ºåº”è¯¥æ€ä¹ˆæµ‹è¯•ï¼Ÿè¿™ä¸ªé—®é¢˜å°±æ˜¯ä»Šå¤©ç•™ç»™ä½ çš„æ€è€ƒé¢˜äº†ã€‚åœ¨è¿™ä¸ªç°æœ‰çš„é¡¹ç›®åŸºç¡€ä¸Šï¼Œå¢åŠ å¯¹äºæ§å°è¾“å‡ºçš„æµ‹è¯•ï¼Œä½ ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„åšæ³•ã€‚</p>","comments":[{"had_liked":false,"id":306342,"user_name":"Nio","can_delete":false,"product_type":"c1","uid":1529642,"ip_address":"","ucode":"A1B8D3C01FB937","user_header":"https://static001.geekbang.org/account/avatar/00/17/57/2a/c6c95f37.jpg","comment_is_top":false,"comment_ctime":1628503604,"is_pvip":true,"discussion_count":2,"race_medal":1,"score":"53168111156","product_id":100085101,"comment_content":"è€å¸ˆï¼Œæ„Ÿè§‰ä»£ç å®ç°åªç”¨Javaæ¯”è¾ƒéš¾å…¨éƒ¨ç†è§£ï¼Œèƒ½å¢åŠ å…¶ä»–è¯­è¨€æ¯”å¦‚Pythonæˆ–è€…golangè¯­è¨€çš„å®ç°å—ï¼Œè¿™æ ·ä¼šæ›´å®Œå–„ä¸€ç‚¹ï¼Œå¯¹å…¶ä»–è¯­è¨€ç¼–ç¨‹çš„åŒå­¦ä¹Ÿæ›´å‹å¥½äº›ã€‚","like_count":12,"discussions":[{"author":{"id":1074465,"avatar":"https://static001.geekbang.org/account/avatar/00/10/65/21/101a7075.jpg","nickname":"davix","note":"","ucode":"CBFB39BAD7938B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389949,"discussion_content":"å»ºè­°è‡³å°‘å†å¢åŠ ä¸€é–€èªè¨€ï¼Œä¸è‡³æ–¼å¤ªJava","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629533364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193874,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/92/961ba560.jpg","nickname":"æˆäººä»¥ğŸŸï¼Œä¸å¦‚æˆäººä»¥æ¸”","note":"","ucode":"BD53829E924B66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563795,"discussion_content":"æˆ‘è¿˜éœ€è¦å¤šçœ‹å‡ éï¼Œæˆ–è€…çœ‹å®Œä¸“æ åï¼Œå†å›è¿‡å¤´æ¥çœ‹çœ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650078831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306851,"user_name":"Gojustforfun","can_delete":false,"product_type":"c1","uid":1187021,"ip_address":"","ucode":"7513A40F27344F","user_header":"https://static001.geekbang.org/account/avatar/00/12/1c/cd/8d552516.jpg","comment_is_top":false,"comment_ctime":1628746769,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"27398550545","product_id":100085101,"comment_content":"æ§åˆ¶å°è¾“å‡ºå¦‚ä½•æµ‹è¯•ï¼Ÿåœ¨å†…å­˜ä¸­æ„é€ ä¸€ä¸ªä¸std.outæ‹¥æœ‰ç›¸åŒæ¥å£çš„bufferå¯¹è±¡ï¼ˆæ ‡å‡†åº“ä¸€èˆ¬éƒ½æœ‰ç°æˆçš„ï¼‰ï¼Œè¿™æ ·æ‰€æœ¬è¯¥è¾“å‡ºçš„å†…å®¹éƒ½å†™åœ¨bufferä¸­ï¼Œå†å¯¹bufferä¸­çš„å†…å®¹è¿›è¡Œæ–­è¨€ã€‚","like_count":6},{"had_liked":false,"id":309114,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1629946666,"is_pvip":false,"replies":[{"id":"111915","content":"æœ‰æ”¶è·ï¼Œå°±ä¸ç™½å­¦","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1629980665,"ip_address":"","comment_id":309114,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10219881258","product_id":100085101,"comment_content":"å­¦ä¹ äº†å°è£…å…¶å®ƒç¨‹åºåº“ ï¼Œè°¢è°¢è€å¸ˆ","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525746,"discussion_content":"æœ‰æ”¶è·ï¼Œå°±ä¸ç™½å­¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629980665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306197,"user_name":"Ø¥å¹¶å‘ä½ æ‹›æ‰‹Ø¥ç¥¥å­","can_delete":false,"product_type":"c1","uid":1075814,"ip_address":"","ucode":"8932581792DF15","user_header":"https://static001.geekbang.org/account/avatar/00/10/6a/66/da6024e4.jpg","comment_is_top":false,"comment_ctime":1628429930,"is_pvip":false,"replies":[{"id":"110823","content":"Lombokç”Ÿæˆçš„ä»£ç ä¸ç”¨æµ‹è¯•ï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä½ å†™çš„ä»£ç ï¼Œæµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥ä¸­å¯ä»¥å¿½ç•¥å®ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1628473564,"ip_address":"","comment_id":306197,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10218364522","product_id":100085101,"comment_content":"è€å¸ˆå¥½ï¼Œå¯¹äºlombkæ³¨è§£ç”Ÿæˆçš„ä»£ç åœ¨æµ‹è¯•è¦†ç›–ä¸åˆ°çš„æ—¶å€™æ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿ    <br><br>åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæœ‰å¾ˆå¤šVO,DTOä¹‹ç±»çš„å®ä½“ç±»å¯¹è±¡ï¼Œè¿™ç±»ä¸€éƒ¨åˆ†å¯¹è±¡å†…éƒ¨å¯èƒ½ä¼šæœ‰ä¸€éƒ¨åˆ†çš„è¡Œä¸ºæ–¹æ³•ï¼Œæ¯”å¦‚è½¬æ¢ä¸ºåˆ«çš„å¯¹è±¡ï¼Œé€šå¸¸ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œä¼šä½¿ç”¨lombokæ³¨è§£ï¼Œåœ¨å•å…ƒæµ‹è¯•è¦†ç›–ç‡çš„ç»Ÿè®¡ä¸­ï¼Œlombokç”Ÿæˆçš„ä»£ç å¯èƒ½æ˜¯æµ‹ä¸åˆ°çš„ï¼ŒåŒæ—¶ç”±äºè¿™äº›å¯¹è±¡å¯èƒ½æ˜¯æœ‰é™¤äº†get  setä¹‹å¤–çš„è¡Œä¸ºçš„ï¼Œå› æ­¤ä¹Ÿä¸èƒ½ç®€å•çš„å±è”½åœ¨æµ‹è¯•è¦†ç›–ç‡çš„æ£€æŸ¥ä¹‹å¤–ï¼Œç›®å‰åœ¨å›¢é˜Ÿå†…çš„åšæ³•æ˜¯è®©å¤§å®¶è¡¥ä¸Šæœªè¦†ç›–éƒ¨åˆ†çš„æµ‹è¯•ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„å»ºè®®å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524662,"discussion_content":"Lombokç”Ÿæˆçš„ä»£ç ä¸ç”¨æµ‹è¯•ï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä½ å†™çš„ä»£ç ï¼Œæµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥ä¸­å¯ä»¥å¿½ç•¥å®ƒã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1628473564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308696,"user_name":"å¤§ç¢—","can_delete":false,"product_type":"c1","uid":1027207,"ip_address":"","ucode":"F9CDC0C5BE48AC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/87/8ed5880a.jpg","comment_is_top":false,"comment_ctime":1629760659,"is_pvip":false,"replies":[{"id":"111750","content":"ä½ çš„è¿›åº¦è¶…å‰äº†ï¼Œå®æˆ˜åé¢è¿˜æœ‰ä¸€éƒ¨åˆ†ï¼Œä¼šè®²åˆ°è¿™ä¹ˆåšçš„ç†ç”±ï¼Œä¹Ÿä¼šè®²åˆ°Springé¡¹ç›®æ€ä¹ˆå»åšæµ‹è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1629767203,"ip_address":"","comment_id":308696,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5924727955","product_id":100085101,"comment_content":"è¯·é—®è€å¸ˆï¼Œæ ·ä¾‹ä»£ç ä¸­æ•°æ®åº“çš„æµ‹è¯•æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªtodo_testçš„å®é™…mysqlæ•°æ®åº“æ˜¯æ€ä¹ˆè€ƒè™‘çš„ï¼Œä¸é€‰æ‹©ç”¨H2æ˜¯ä»€ä¹ˆè€ƒè™‘å‘¢ï¼Ÿ<br>ç”¨mysqlä¼˜ç‚¹æ˜¯æµ‹è¯•æ›´æ¥è¿‘æœ€ç»ˆçš„è¿è¡Œç¯å¢ƒï¼Œä¹Ÿèƒ½æµ‹è¯•åˆ›è¡¨è¯­å¥ï¼Œç¼ºç‚¹ï¼šç¨å¾®ä¾èµ–äº†æœ¬åœ°çš„ç¯å¢ƒï¼Œç¬¬ä¸€æ¬¡éœ€è¦åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œå»ºè´¦å·ã€‚ç”¨H2çš„ä¼˜ç¼ºç‚¹å°±åè¿‡æ¥ã€‚ä¸¤è€…åœ¨å½±å“æµ‹è¯•é€Ÿåº¦ä¸Šä¼¼ä¹ç›®å‰çœ‹ä¸å‡ºå·®è·","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525595,"discussion_content":"ä½ çš„è¿›åº¦è¶…å‰äº†ï¼Œå®æˆ˜åé¢è¿˜æœ‰ä¸€éƒ¨åˆ†ï¼Œä¼šè®²åˆ°è¿™ä¹ˆåšçš„ç†ç”±ï¼Œä¹Ÿä¼šè®²åˆ°Springé¡¹ç›®æ€ä¹ˆå»åšæµ‹è¯•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629767203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308319,"user_name":"davix","can_delete":false,"product_type":"c1","uid":1074465,"ip_address":"","ucode":"CBFB39BAD7938B","user_header":"https://static001.geekbang.org/account/avatar/00/10/65/21/101a7075.jpg","comment_is_top":false,"comment_ctime":1629533171,"is_pvip":false,"replies":[{"id":"111752","content":"åé¢ä¼šè®²åˆ°æµ‹è¯•æ¨¡å‹ï¼Œä¸åŒçš„æµ‹è¯•å¦‚ä½•é…æ¯”ã€‚æœ‰çš„ä¸œè¥¿æ˜¯äººæ€§ï¼Œäººä¼šå€¾å‘äºå°‘åšäº‹ï¼Œè¿™æ˜¯éœ€è¦å›¢é˜Ÿé‡Œç«‹è§„çŸ©çš„ï¼Œéœ€è¦é€šè¿‡ä»£ç è¯„å®¡ç­‰æœºåˆ¶å‘ç°é—®é¢˜ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œè¦†ç›–ç‡ä¹‹æ‰€ä»¥å¾ˆé‡è¦ï¼Œå°±æ˜¯å› ä¸ºå®ƒä¿è¯äº†ä¸€ä¸ªåº•çº¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1629767404,"ip_address":"","comment_id":308319,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5924500467","product_id":100085101,"comment_content":"è€å¸«å¯å¦å¾Œé¢è©³ç´°è¬›è¬›æ¸¬è©¦é‡‘å­—å¡”å„å±¤caseçš„è¨­è¨ˆï¼Ÿå“ªäº›æ”¾å…¥å“ªå±¤ï¼Ÿ<br>æˆ‘ç™¼ç¾teamä¸­æœ‰å‚¾å‘ï¼Œå¦‚æœæœ‰äº†é›†æˆæ¸¬è©¦ï¼Œç”šè‡³ç«¯åˆ°ç«¯æ¸¬è©¦ï¼Œå¾ˆå¤šäººå°±é¡˜æ„åœ¨é›†æˆæ¸¬è©¦è£¡å¯«ï¼Œä¸å¯«å–®å…ƒäº†ï¼Œèªç‚ºåæ­£å–®å…ƒè¢«æ¸¬åˆ°äº†ï¼Œè€Œä¸”è¦†è“‹çš„æ›´å¤šã€‚<br>åœ¨æœ¬ç¯€cliä¾‹å­ä¸­æ²’æœ‰ç”¨å–®å…ƒï¼Œé‚„è¦†è“‹äº†é‚£éº¼å¤šcaseï¼Œæˆ‘æ“”å¿ƒæœ‰äººå°±æœƒè¦ºå¾—ä¹‹å‰å–®å…ƒæ¸¬è©¦å¯ä»¥çœæ‰ã€‚","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525461,"discussion_content":"åé¢ä¼šè®²åˆ°æµ‹è¯•æ¨¡å‹ï¼Œä¸åŒçš„æµ‹è¯•å¦‚ä½•é…æ¯”ã€‚æœ‰çš„ä¸œè¥¿æ˜¯äººæ€§ï¼Œäººä¼šå€¾å‘äºå°‘åšäº‹ï¼Œè¿™æ˜¯éœ€è¦å›¢é˜Ÿé‡Œç«‹è§„çŸ©çš„ï¼Œéœ€è¦é€šè¿‡ä»£ç è¯„å®¡ç­‰æœºåˆ¶å‘ç°é—®é¢˜ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œè¦†ç›–ç‡ä¹‹æ‰€ä»¥å¾ˆé‡è¦ï¼Œå°±æ˜¯å› ä¸ºå®ƒä¿è¯äº†ä¸€ä¸ªåº•çº¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629767404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307954,"user_name":"ç¨‹ä¹æ£®","can_delete":false,"product_type":"c1","uid":2359159,"ip_address":"","ucode":"68BE70B75E071F","user_header":"https://static001.geekbang.org/account/avatar/00/23/ff/77/70e567d2.jpg","comment_is_top":false,"comment_ctime":1629337181,"is_pvip":false,"replies":[{"id":"111565","content":"https:&#47;&#47;github.com&#47;dreamhead&#47;geektime-todo","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1629377600,"ip_address":"","comment_id":307954,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5924304477","product_id":100085101,"comment_content":"è¯·é—®å‚çœ‹ä»£ç åœ¨å“ª? ","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525348,"discussion_content":"https://github.com/dreamhead/geektime-todo","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629377600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307488,"user_name":"sylan215","can_delete":false,"product_type":"c1","uid":1019029,"ip_address":"","ucode":"5A2CF31BC69F40","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/95/4544d905.jpg","comment_is_top":false,"comment_ctime":1629120361,"is_pvip":false,"replies":[{"id":"111888","content":"å¾ˆå¥½çš„æ€»ç»“å’Œåˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1629940451,"ip_address":"","comment_id":307488,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5924087657","product_id":100085101,"comment_content":"è¿™ä¸€èŠ‚çš„æ”¶è·ï¼š<br>1ã€æµ‹è¯•ç¯å¢ƒï¼ˆæ•°æ®ï¼‰å‡†å¤‡ï¼Œæ˜¯æµ‹è¯•ä¸­éå¸¸é‡è¦çš„ä¸€ç¯ã€‚<br><br>2ã€ä»é»‘ç›’æµ‹è¯•çš„è§’åº¦æ¥è¯´ï¼Œå¼‚å¸¸æµ‹è¯•ç”¨ä¾‹çš„æ¯”ç‡è¦è¿œå¤§äºæ­£å¸¸ç”¨ä¾‹çš„ï¼Œé‚£ä¹ˆç™½ç›’è§’åº¦ä¹Ÿæ˜¯ä¸€æ ·ã€‚<br><br>3ã€å¯¹äºå¼‚å¸¸ç±»å‹çš„è¦†ç›–ï¼Œä¹Ÿéœ€è¦æ ¹æ®ä»£ç å®ç°æ¥é€‰å–ï¼Œæ¯”å¦‚ catch æ‰€æœ‰å¼‚å¸¸çš„è¯ï¼Œä¸€æ¡å¼‚å¸¸ç”¨ä¾‹å°±å¯ä»¥è¦†ç›–äº†ï¼Œè€Œå¦‚æœ catch çš„æ˜¯æŸä¸€ä¸ªå…·ä½“ç”¨ä¾‹çš„è¯ï¼Œä¸€å®šè¦è®°å¾—å†è§¦å‘ä¸€ä¸ªæ²¡æœ‰ catch çš„å¼‚å¸¸å“ˆã€‚<br><br>4ã€è¦æŠŠå¯æµ‹æ€§ï¼Œä½œä¸ºç¨‹åºè®¾è®¡çš„åŸºæœ¬è¦æ±‚ã€‚<br><br>5ã€æµ‹è¯•æ•°æ®å‡†å¤‡ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå…³é”®ï¼Œä¹Ÿå¾ˆå¸¸è§çš„å†…å®¹ï¼Œé™¤äº†mockï¼Œä¸€äº›å¿…é¡»çš„æ•°æ®å‡†å¤‡è¿˜æ˜¯è¦åšçš„ï¼Œæ‰€ä»¥è¦è‡ªåŠ¨åŒ–ï¼Œä¹Ÿéœ€è¦æä¾›æ•°æ®è‡ªåŠ¨å‡†å¤‡çš„å®ç°ï¼ŒåŒæ—¶åœ¨å®Œæˆåè¦è¿›è¡Œæ•°æ®æ¸…ç†ã€‚","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525170,"discussion_content":"å¾ˆå¥½çš„æ€»ç»“å’Œåˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629940451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306488,"user_name":"X","can_delete":false,"product_type":"c1","uid":1460452,"ip_address":"","ucode":"197AD33D438298","user_header":"https://static001.geekbang.org/account/avatar/00/16/48/e4/6feec30f.jpg","comment_is_top":false,"comment_ctime":1628582639,"is_pvip":false,"replies":[{"id":"110968","content":"åµŒå…¥å¼çš„ redis ä¹Ÿç®—ä¸ä¸Šå¹´ä¹…å¤±ä¿®å§ï¼Œæœ€æ–°çš„ç‰ˆæœ¬æ˜¯2020å¹´6æœˆå‘å¸ƒçš„0.7.3ï¼Œä¹Ÿå°±æ˜¯ä¸€å¹´å¤šçš„æ—¶é—´ã€‚<br><br>å¯ä»¥çœ‹çœ‹åˆ«äººæ˜¯æ€ä¹ˆç”¨çš„<br>https:&#47;&#47;www.baeldung.com&#47;spring-embedded-redis","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1628599501,"ip_address":"","comment_id":306488,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5923549935","product_id":100085101,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸‹ Springboot å¼€å‘ï¼Œåœ¨è¿›è¡Œ é›†æˆæµ‹è¯•çš„æ—¶å€™ï¼Œæœ‰redis ä¾èµ–ï¼Œæ˜¯æ€ä¹ˆè¿›è¡Œæµ‹è¯•çš„å‘¢ï¼Ÿ<br>å°è¯•è¿‡ï¼Œembedded-redis è¿™äº›å†…åµŒæ•°æ®åº“ï¼Œä½†æ˜¯è¿™äº›ç”¨èµ·æ¥ä¸å¤ªç†æƒ³ï¼Œè€Œä¸”å¹´ä¹…å¤±ä¿®ï¼Œæœ‰å¾ˆå¤šbugã€‚<br>æƒ³é—®é—®è€å¸ˆè¿™æ–¹é¢æ˜¯æ€ä¹ˆå¤„ç†çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524789,"discussion_content":"åµŒå…¥å¼çš„ redis ä¹Ÿç®—ä¸ä¸Šå¹´ä¹…å¤±ä¿®å§ï¼Œæœ€æ–°çš„ç‰ˆæœ¬æ˜¯2020å¹´6æœˆå‘å¸ƒçš„0.7.3ï¼Œä¹Ÿå°±æ˜¯ä¸€å¹´å¤šçš„æ—¶é—´ã€‚\n\nå¯ä»¥çœ‹çœ‹åˆ«äººæ˜¯æ€ä¹ˆç”¨çš„\nhttps://www.baeldung.com/spring-embedded-redis","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628599501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306064,"user_name":"æµ·æœ‹æ£®","can_delete":false,"product_type":"c1","uid":1165084,"ip_address":"","ucode":"212BADF1F9E962","user_header":"https://static001.geekbang.org/account/avatar/00/11/c7/1c/e59a699b.jpg","comment_is_top":false,"comment_ctime":1628325461,"is_pvip":false,"replies":[{"id":"110768","content":"è¦†ç›–ç‡æˆ‘è¿™ä¸ªå·¥ç¨‹é‡Œç”¨çš„æ˜¯Jacoboã€‚è¿™ä¸ªä¸“æ æ˜¯å†™ç»™ç¨‹åºå‘˜çš„ï¼Œæµ‹è¯•äººå‘˜å¦‚æœæƒ³äº†è§£è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ€è·¯ä¹Ÿæ˜¯å¯ä»¥å­¦ä¹ çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1628386496,"ip_address":"","comment_id":306064,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5923292757","product_id":100085101,"comment_content":"è€å¸ˆï¼Œä½ è¯´çš„è¦†ç›–ç‡æ˜¯é€šè¿‡jacocoæ¥è·å–çš„å—ï¼Ÿ<br>è¿™ä¸ªä¸“æ æ˜¯ç»™å¼€å‘çœ‹çš„è¿˜æ˜¯qaä¹Ÿå¯ä»¥å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524614,"discussion_content":"è¦†ç›–ç‡æˆ‘è¿™ä¸ªå·¥ç¨‹é‡Œç”¨çš„æ˜¯Jacoboã€‚è¿™ä¸ªä¸“æ æ˜¯å†™ç»™ç¨‹åºå‘˜çš„ï¼Œæµ‹è¯•äººå‘˜å¦‚æœæƒ³äº†è§£è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ€è·¯ä¹Ÿæ˜¯å¯ä»¥å­¦ä¹ çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628386496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305951,"user_name":"Insist","can_delete":false,"product_type":"c1","uid":1397782,"ip_address":"","ucode":"A4FE1ACBC8AA20","user_header":"https://static001.geekbang.org/account/avatar/00/15/54/16/1df5d5ed.jpg","comment_is_top":false,"comment_ctime":1628241140,"is_pvip":false,"replies":[{"id":"110735","content":"ä½ é—®çš„æ˜¯è‡ªåŠ¨åŒ–éƒ¨åˆ†å§ï¼Ÿè¿™æ˜¯æˆ‘åœ¨ã€Š10xç¨‹åºå‘˜å·¥ä½œæ³•ã€‹ä¸­ä»‹ç»çš„å†…å®¹ã€‚ä½ å¯ä»¥å‚è€ƒç€é‚£ç¯‡æ–‡ç« è‡ªå·±æ”¹å‡ºæ¥ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¤§éƒ¨åˆ†ä¸œè¥¿ä¸œè¥¿éƒ½æœ‰ç°æˆçš„æ’ä»¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1628307493,"ip_address":"","comment_id":305951,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5923208436","product_id":100085101,"comment_content":"æ˜¯å¦æœ‰mavenç‰ˆæœ¬çš„ä»£ç ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524572,"discussion_content":"ä½ é—®çš„æ˜¯è‡ªåŠ¨åŒ–éƒ¨åˆ†å§ï¼Ÿè¿™æ˜¯æˆ‘åœ¨ã€Š10xç¨‹åºå‘˜å·¥ä½œæ³•ã€‹ä¸­ä»‹ç»çš„å†…å®¹ã€‚ä½ å¯ä»¥å‚è€ƒç€é‚£ç¯‡æ–‡ç« è‡ªå·±æ”¹å‡ºæ¥ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¤§éƒ¨åˆ†ä¸œè¥¿ä¸œè¥¿éƒ½æœ‰ç°æˆçš„æ’ä»¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628307493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361193,"user_name":"Geek_9c3134","can_delete":false,"product_type":"c1","uid":1141689,"ip_address":"æµ™æ±Ÿ","ucode":"479BC6B4CF22FA","user_header":"https://static001.geekbang.org/account/avatar/00/11/6b/b9/9b0630b1.jpg","comment_is_top":false,"comment_ctime":1667312312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1667312312","product_id":100085101,"comment_content":"è€å¸ˆ æˆ‘æœ‰ä¸ªç–‘é—®  ä¸ºäº†æ–¹ä¾¿æµ‹è¯• è€Œå»ä¿®æ”¹ä»£ç    ä¼šä¸ä¼šå¯¹æ­£å¸¸çš„ä»£ç  å¸¦æ¥ä¸å¥½çš„å½±å“ å‰¯ä½œç”¨  æ¯”å¦‚ ä¸ºäº†æ–¹ä¾¿æµ‹è¯•å®¹æ˜“  è°ƒç”¨çš„æ¥å£ä¿®æ”¹äº†çš„ä¸åˆç†äº†","like_count":0},{"had_liked":false,"id":347846,"user_name":"if...else...","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1654510790,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654510790","product_id":100085101,"comment_content":"éš”ç¦»å˜åŒ–ï¼Œé€æ­¥ç¼–å†™ç¨³å®šçš„ä»£ç --è®°ä¸‹æ¥","like_count":0},{"had_liked":false,"id":344945,"user_name":"lamb","can_delete":false,"product_type":"c1","uid":1788774,"ip_address":"","ucode":"ED67FDCA8BB85F","user_header":"https://static001.geekbang.org/account/avatar/00/1b/4b/66/bac3697b.jpg","comment_is_top":false,"comment_ctime":1651890275,"is_pvip":false,"replies":[{"id":"126199","content":"æˆ‘è¯´çš„æ˜¯é™¤äº†ç¨‹åºåº“ï¼Œåƒè¿™é‡Œçš„ JSON è½¬æ¢ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç¨‹åºåº“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1258861","ctime":1652625415,"ip_address":"","comment_id":344945,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1651890275","product_id":100085101,"comment_content":" ã€Šä»£ç ä¹‹ä¸‘ã€‹è®²å°½å¯èƒ½ä¸è¦ä½¿ç”¨é™æ€æ–¹æ³•ï¼Œä¸Šæ¥å°±å°è£…ä¸€å±‚é™æ€æ–¹æ³• ï¼Ÿï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572174,"discussion_content":"æˆ‘è¯´çš„æ˜¯é™¤äº†ç¨‹åºåº“ï¼Œåƒè¿™é‡Œçš„ JSON è½¬æ¢ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç¨‹åºåº“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652625415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330965,"user_name":"å¬é›¨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1642327690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642327690","product_id":100085101,"comment_content":"åƒRedisTemplateè¿™ç§çš„ç±»åº“ï¼Œæœ‰å¿…è¦å°è£…åˆ°ä¸€ä¸ªå•ç‹¬çš„ç±»ä¸­å—","like_count":0},{"had_liked":false,"id":320344,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1636267076,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636267076","product_id":100085101,"comment_content":"ä¸‡èƒ½çš„ä¸­é—´å±‚ï¼Œå°è£…å¼‚å¸¸è¿˜å¯ä»¥è¿™æ ·ç”¨ï¼","like_count":0}]}