{"id":180213,"title":"加餐六｜HTTPS：浏览器如何验证数字证书？","content":"<p>你好，我是李兵。</p><p>在《<a href=\"https://time.geekbang.org/column/article/156181\">36｜HTTPS：让数据传输更安全</a>》这篇文章中，我们聊了下面几个问题：</p><ul>\n<li>HTTPS使用了对称和非对称的混合加密方式，这解决了数据传输安全的问题；</li>\n<li>HTTPS引入了中间机构CA，CA通过给服务器颁发数字证书，解决了浏览器对服务器的信任问题；</li>\n<li>服务器向CA机构申请证书的流程；</li>\n<li>浏览器验证服务器数字证书的流程。</li>\n</ul><p>不过由于篇幅限制，关于“<strong>浏览器如何验证数字证书”</strong>的这个问题我们并没有展开介绍。那么今天我们就继续聊一聊这个问题。了解了这个问题，可以方便我们把完整的HTTPS流程给串起来，无论对于我们理解HTTPS的底层技术还是理解业务都是非常有帮助的。</p><p>因为本文是第36讲的延伸，所以在分析之前，我们还是有必要回顾下<strong>数字证书申请流程</strong>和<strong>浏览器验证证书的流程</strong>，同时你最好也能回顾下第36讲。</p><h2>数字证书申请流程</h2><p>我们先来回顾下数字证书的申请流程，比如极客时间向一个CA机构申请数字证书，流程是什么样的呢？</p><p>首先极客时间填写了一张含有<strong>自己身份信息</strong>的表单，身份信息包括了自己公钥、站点资料、公司资料等信息，然后将其提交给了CA机构；CA机构会审核表单中内容的真实性；审核通过后，CA机构会拿出自己的私钥，对表单的内容进行一连串操作，包括了对明文资料进行Hash计算得出信息摘要， 利用CA的私钥加密信息摘要得出数字签名，最后将数字签名也写在表单上，并将其返还给极客时间，这样就完成了一次数字证书的申请操作。</p><!-- [[[read_end]]] --><p>大致流程你也可以参考下图：</p><p><img src=\"https://static001.geekbang.org/resource/image/f5/a6/f569c80f8f4b25b3bf384037813cdca6.png?wh=1880*502\" alt=\"\"></p><center><span class=\"reference\">数字证书申请过程</span></center><h2>浏览器验证证书的流程</h2><p>现在极客时间的官网有了CA机构签发的数字证书，那么接下来就可以将数字证书应用在HTTPS中了。</p><p>我们知道，在浏览器和服务器建立HTTPS链接的过程中，浏览器首先会向服务器请求数字证书，之后浏览器要做的第一件事就是验证数字证书。那么，这里所说的“验证”，它到底是在验证什么呢？</p><p>具体地讲，浏览器需要验证<strong>证书的有效期</strong>、<strong>证书是否被CA吊销</strong>、<strong>证书是否<strong><strong>是</strong></strong>合法的CA机构颁发的。</strong></p><p>数字证书和身份证一样也是有时间期限的，所以<strong>第一部分就是验证证书的有效期</strong>，这部分比较简单，因为证书里面就含有证书的有效期，所以浏览器只需要判断当前时间是否在证书的有效期范围内即可。</p><p>有时候有些数字证书被CA吊销了，吊销之后的证书是无法使用的，所以<strong>第二部分就是验证数字证书是否被吊销了</strong>。通常有两种方式，一种是下载吊销证书列表-CRL (Certificate Revocation Lists)，第二种是在线验证方式-OCSP (Online Certificate Status Protocol) ，它们各有优缺点，在这里我就不展开介绍了。</p><p>最后，还要<strong>验证极客时间的数字证书是否是CA机构颁发</strong><strong>的，</strong>验证的流程非常简单：</p><ul>\n<li>首先，浏览器利用证书的原始信息计算出信息摘要；</li>\n<li>然后，利用<strong>CA的公钥</strong>来解密数字证书中的<strong>数字签名</strong>，解密出来的数据也是信息摘要；</li>\n<li>最后，判断这两个信息摘要是否相等就可以了。</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/ae/08/ae7dbe9f8785441721deb1f7b316f708.png?wh=1056*552\" alt=\"\"></p><p>通过这种方式就验证了数字证书是否是由CA机构所签发的，不过这种方式又带来了一个新的疑问：<strong>浏览器是怎么获取到CA公钥的</strong>？</p><h2>浏览器是怎么获取到CA公钥的？</h2><p>通常，当你部署HTTP服务器的时候，除了部署当前的数字证书之外，还需要部署CA机构的数字证书，CA机构的数字证书包括了CA的公钥，以及CA机构的一些基础信息。</p><p>因此，极客时间服务器就有了两个数字证书:</p><ul>\n<li>给极客时间域名的数字证书；</li>\n<li>给极客时间签名的CA机构的数字证书。</li>\n</ul><p>然后在建立HTTPS链接时，服务器会将这两个证书一同发送给浏览器，于是浏览器就可以获取到CA的公钥了。</p><p>如果有些服务器没有部署CA的数字证书，那么浏览器还可以通过网络去下载CA证书，不过这种方式多了一次证书下载操作，会拖慢首次打开页面的请求速度，一般不推荐使用。</p><p>现在浏览器端就有了极客时间的证书和CA的证书，完整的验证流程就如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/cb/d3/cb150e316f4847c71288a8df50bfebd3.png?wh=1066*946\" alt=\"\"></p><center><span class=\"reference\">CA证书</span></center><p>我们有了CA的数字证书，也就可以获取得CA的公钥来验证极客时间数字证书的可靠性了。</p><p>解决了获取CA公钥的问题，新的问题又来了，如果这个证书是一个恶意的CA机构颁发的怎么办？所以我们还需要<strong>浏览器证明这个CA机构是个合法的机构。</strong></p><h2>证明CA机构的合法性</h2><p>这里并没有一个非常好的方法来证明CA的合法性，妥协的方案是，直接在操作系统中内置这些CA机构的数字证书，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/43/0b/43a732eb2ba47d06fbef20c515bd990b.png?wh=1494*1090\" alt=\"\"></p><center><span class=\"reference\">操作系统内部内置CA数字证书</span></center><p>我们将所有CA机构的数字证书都内置在操作系统中，这样当需要使用某CA机构的公钥时，我们只需要依据CA机构名称，就能查询到对应的数字证书了，然后再从数字证书中取出公钥。</p><p>可以看到，这里有一个假设条件，浏览器默认信任操作系统内置的证书为合法证书，虽然这种方式不完美，但是却是最实用的一个。</p><p>不过这种方式依然存在问题，因为在实际情况下，<strong>CA机构众多，因此操作系统不可能将每家CA的数字证书都内置进操作系统</strong>。</p><h2>数字证书链</h2><p>于是人们又想出来一个折中的方案，将颁发证书的机构划分为两种类型，<strong>根CA(Root CAs)<strong>和</strong>中间CA(Intermediates CAs)</strong>，通常申请者都是向中间CA去申请证书的，而根CA作用就是给中间CA做认证，一个根CA会认证很多中间的CA，而这些中间CA又可以去认证其他的中间CA。</p><p>因此，每个根CA机构都维护了一个树状结构，一个根CA下面包含多个中间CA，而中间CA又可以包含多个中间CA。这样就形成了一个证书链，你可以沿着证书链从用户证书追溯到根证书。</p><p>比如你可以在Chrome上打开极客时间的官网，然后点击地址栏前面的那把小锁，你就可以看到*.geekbang.org的证书是由中间CA GeoTrust RSA CA2018颁发的，而中间CA GeoTrust RSA CA2018又是由根CA DigiCert Global Root CA颁发的，所以这个证书链就是：*.geekbang.org—&gt;GeoTrust RSA CA2018–&gt;DigiCert Global Root CA。你可以参看下图：</p><p><img src=\"https://static001.geekbang.org/resource/image/10/b7/10616d8fc323d33bdecb09b503551cb7.png?wh=968*906\" alt=\"\"></p><center><span class=\"reference\">数字证书链</span></center><p>因此浏览器验证极客时间的证书时，会先验证*.geekbang.org的证书，如果合法，再验证中间CA的证书，如果中间CA也是合法的，那么浏览器会继续验证这个中间CA的根证书。</p><p>到了这里，依然存在一个问题，那就是<strong>浏览器怎么证明根证书是合法的？</strong></p><h2>如何验证根证书的合法性</h2><p>其实浏览器的判断策略很简单，它只是简单地判断这个根证书在不在操作系统里面，如果在，那么浏览器就认为这个根证书是合法的，如果不在，那么就是非法的。</p><p>如果某个机构想要成为根CA，并让它的根证书内置到操作系统中，那么这个机构首先要通过WebTrust国际安全审计认证。</p><p>什么是WebTrust认证？</p><p>WebTrust是由两大著名注册会计师协会AICPA（美国注册会计师协会）和CICA（加拿大注册会计师协会）共同制定的安全审计标准，主要对互联网服务商的系统及业务运作逻辑安全性、保密性等共计七项内容进行近乎严苛的审查和鉴证。 只有通过WebTrust国际安全审计认证，根证书才能预装到主流的操作系统，并成为一个可信的认证机构。</p><p>目前通过WebTrust认证的根CA有 Comodo、geotrust、rapidssl、symantec、thawte、digicert等。也就是说，这些根CA机构的根证书都内置在个大操作系统中，只要能从数字证书链往上追溯到这几个根证书，浏览器就会认为使用者的证书是合法的。</p><h2>总结</h2><p>好了，今天的内容就介绍到这里，下面我们总结下本文的主要内容：</p><p>我们先回顾了数字证书的申请流程，接着我们重点介绍了浏览器是如何验证数字证书的。</p><p>首先浏览器需要CA的数字证书才能验证极客时间的数字证书，接下来我们需要验证CA证书的合法性，最简单的方法是将CA证书内置在操作系统中。</p><p>不过CA机构非常多，内置每家的证书到操作系统中是不现实的，于是我们采用了一个折中的策略，将颁发证书的机构划分为两种类型，<strong>根CA(Root CAs)<strong>和</strong>中间CA(Intermediates CAs)</strong>，通常申请者都是向中间CA去申请证书的，而根CA作用就是给中间CA做认证，一个根CA会认证很多中间的CA，而这些中间CA又可以去认证其他的中间CA。</p><p>于是又引出了数字证书链，浏览器先利用中间CA的数字证书来验证用户证书，再利用根证书来验证中间CA证书的合法性，最后，浏览器会默认相信内置在系统中的根证书。不过要想在操作系统内部内置根证书却并不容易，这需要通过WebTrust认证，这个认证审核非常严格。</p><p>通过分析这个流程可以发现，浏览器默认信任操作系统内置的根证书，这也会带来一个问题，如果黑客入侵了你的电脑，那么黑客就有可能往你系统中添加恶意根数字证书，那么当你访问黑客站点的时候，浏览器甚至有可能会提示该站点是安全的。</p><p>因此，HTTPS并非是绝对安全的，采用HTTPS只是加固了城墙的厚度，但是城墙依然有可能被突破。</p><h2>课后思考</h2><p>今天留给你的任务是复述下浏览器是怎么验证数字证书的，如果中间卡住了，欢迎在留言区提问交流。</p><p>感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给更多的朋友。</p><p></p>","comments":[{"had_liked":false,"id":163890,"user_name":"世界和平","can_delete":false,"product_type":"c1","uid":1721781,"ip_address":"","ucode":"4115710AF59E74","user_header":"https://static001.geekbang.org/account/avatar/00/1a/45/b5/2a268b7e.jpg","comment_is_top":false,"comment_ctime":1576819373,"is_pvip":false,"replies":[{"id":"62392","content":"🤝","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1576900358,"ip_address":"","comment_id":163890,"utype":1}],"discussion_count":1,"race_medal":0,"score":"134720805549","product_id":100033601,"comment_content":"工作两年，对很多前端知识有的还是比较乱的，一知半解禁不住深究，老师的课程帮助很好的梳理了这些知识，也详细的讲解了，让我有了系统的认知，也为之后的继续学习提供了方向，非常的感谢老师，很值。已经推荐给朋友，以后如果老师再出课，也会继续跟着学习。 我不是托，我不是托，我就是真诚的表示一下感谢。谢谢 ~ ","like_count":32,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478572,"discussion_content":"🤝","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576900358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168995,"user_name":"pacos","can_delete":false,"product_type":"c1","uid":1143994,"ip_address":"","ucode":"3E56D867CAEEE6","user_header":"https://static001.geekbang.org/account/avatar/00/11/74/ba/0599cc8a.jpg","comment_is_top":false,"comment_ctime":1578234771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40232940435","product_id":100033601,"comment_content":"期待老师的 Promise 加餐","like_count":10},{"had_liked":false,"id":167568,"user_name":"成楠Peter","can_delete":false,"product_type":"c1","uid":1252977,"ip_address":"","ucode":"4D13E7368D8CF2","user_header":"https://static001.geekbang.org/account/avatar/00/13/1e/71/9dcbe6c4.jpg","comment_is_top":false,"comment_ctime":1577862372,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"23052698852","product_id":100033601,"comment_content":"这篇文章就解决了客户端验证服务器正确性的问题。但是我有一个小疑问，如果我伪造了一个客户端，同时拿到数字签名和CA公钥，通过CA公钥解密数字信息，这样是否能骗取服务端的信任？老师可以讲讲这中间的细节吗？","like_count":4,"discussions":[{"author":{"id":1231133,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c9/1d/c7586cfc.jpg","nickname":"Zkerhcy","note":"","ucode":"43A883F6FB6070","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202543,"discussion_content":"对于一些需要验证客户端身份的网站，客户端同样需要提供证书，比如银行网银需要你去银行办的数字证书","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1583931606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2840430,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/57/6e/0010eec8.jpg","nickname":"月光林地","note":"","ucode":"827DFEBA385367","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536989,"discussion_content":"或者你想问的其实是，中间方能不能伪装成客户端，从而查看或修改真正客户端的信息，这个就是ssl阻止的事情，真正的客户端会利用服务器公钥加密secret，除了真正的服务器没法解密对称加密的秘钥。而如果中间方想假装服务器，这又是数字证书阻止的事情。两条路都被堵死了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638929608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2840430,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/57/6e/0010eec8.jpg","nickname":"月光林地","note":"","ucode":"827DFEBA385367","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536985,"discussion_content":"服务器本来就是开放的，本该就给各种客户端访问，什么叫骗取服务端信任？ssl的作用是防止恶意的服务端骗取客户端信任。你的例子和“能不能买个新手机去骗取服务端信任”差不多，搞反了前后关系。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638928681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1374337,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f8/81/bff52f91.jpg","nickname":"1830","note":"","ucode":"246FEF7C97F39C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380548,"discussion_content":"像你这样讲你为什么不伪造一个认证机构呢，这个获取的信息更多。你想开发一个客户端浏览器去骗取服务器的信任还是生产一个终端去获取服务器信息呢？切不说开发成本，开发能否通过审核上线。第一对于信息安全等级不高的网站不在乎你搞，第二对于要求高的网站自然也会验证请求来源的合法性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624550725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1266698,"avatar":"https://static001.geekbang.org/account/avatar/00/13/54/0a/9a002ad5.jpg","nickname":"Adam Lau","note":"","ucode":"7E542D6E789500","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365431,"discussion_content":"是的，这里是在验证服务器是否值得信任。如果服务器也许验证客户端，那就是双向认证了，国密浏览器就需要进行双向认证。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617800080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2258397,"avatar":"https://static001.geekbang.org/account/avatar/00/22/75/dd/9affd4d5.jpg","nickname":"九千七","note":"","ucode":"1E385C88B3401A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347137,"discussion_content":"一般是用密码来认证客户端是不是你本人操作，如果有人获取到你的密码对服务器发起请求，那服务器不会知道是不是你本人操作","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612162511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2043093,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqMDAWg4jibRKzibnciagJpoT47g6ickyvM5XT18v4qTDgibAjwcfJjObF7eOtWlWI079tw4DsjRPWLylA/132","nickname":"Geek_ea2845","note":"","ucode":"53FF6EAFB3196B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287960,"discussion_content":"你都没看懂。。问的毫无逻辑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593601590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165557,"user_name":"极客时间","can_delete":false,"product_type":"c1","uid":1015564,"ip_address":"","ucode":"AF7565BB5EF164","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/0c/392ce255.jpg","comment_is_top":false,"comment_ctime":1577259888,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14462161776","product_id":100033601,"comment_content":"盗版的操作系统也有可能安装了恶意根证书啊，所以大家支持正版吧","like_count":4,"discussions":[{"author":{"id":1910075,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/25/3b/a971fc8e.jpg","nickname":"阿感","note":"","ucode":"7BCB7E44A832D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281755,"discussion_content":"6","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591800730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252487,"user_name":"林浩","can_delete":false,"product_type":"c1","uid":1375777,"ip_address":"","ucode":"266C06165AFA47","user_header":"https://static001.geekbang.org/account/avatar/00/14/fe/21/df75ca94.jpg","comment_is_top":false,"comment_ctime":1602317845,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10192252437","product_id":100033601,"comment_content":"总结：<br>浏览器怎么验证证书？<br>一般通过 验证证书有效期， 证书是否被CA吊销，证书是否是合法CA机构颁发<br><br>  如何验证证书有效期？<br>  证书里面包含有效期<br><br>  如何获知证书被吊销？<br>  1. 下载吊销证书列表   2. 在线验证<br><br>  如何证明是合法CA机构？<br>  1. 通过证书原始信息（hash）计算消息摘要<br>  2. 利用CA公钥解密证书中的数字签名，得到消息摘要<br>  3. 将两者进行对比<br><br>浏览器怎么拿到CA公钥？<br>服务器部署时，除了当前数字证书外，还需要部署CA证书，CA证书上就包含了CA公钥，当建立HTTPS连接时，服务器会往浏览器发送两个证书，如果服务器上没有部署CA证书，浏览器会通过网络下载CA证书，也可以拿到CA公钥<br><br>这里只证明了CA公钥的来源，怎么知道它是合法机构？<br>很遗憾没有！退而求其次，计算机操作系统内置了一些颁发证书的机构，但因为机构众多不可能这么处理，所以将证书分成了“根CA”和“中间CA”，一个“根CA”会有多个“中间CA”，“根”给“中间”做认证<br><br>怎么知道根证书的合法性？<br>要成为“根CA”需要得到“Web Trust”认证通过才会内置到操作系统中，Web Trust 包括两个机构（AICPA【美国注册会计师协会】和 CICA【加拿大注册会计师协会】）<br><br>如果操作系统被入侵如何保证跟证书合法性？<br>凉凉。。。","like_count":3},{"had_liked":false,"id":248428,"user_name":"Geek_c9436e","can_delete":false,"product_type":"c1","uid":2152022,"ip_address":"","ucode":"0814687A004D69","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJeUiajzIgiaAicogQkfjBm4wKVtkc1vKYAA3BfCV85V9ZOovJRCBROpZOweO2zMwFgLhxpJ458qohbA/132","comment_is_top":false,"comment_ctime":1600159787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10190094379","product_id":100033601,"comment_content":"我看完了，酣畅淋漓的感觉，满满干货，意犹未尽啊，给老师点赞，希望继续学习老师的课！","like_count":2},{"had_liked":false,"id":170792,"user_name":"雨儿","can_delete":false,"product_type":"c1","uid":1469490,"ip_address":"","ucode":"9609C1B0285BB1","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/32/7ff3ae1d.jpg","comment_is_top":false,"comment_ctime":1578722212,"is_pvip":false,"replies":[{"id":"66204","content":"现在在写新专栏，暂时没办法更新了浏览器专栏了","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1578745623,"ip_address":"","comment_id":170792,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10168656804","product_id":100033601,"comment_content":"老师太好了，每天都会看看，是否老师有新的更新，期待老师不定期能更新一些","like_count":2,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481114,"discussion_content":"现在在写新专栏，暂时没办法更新了浏览器专栏了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578745623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167567,"user_name":"成楠Peter","can_delete":false,"product_type":"c1","uid":1252977,"ip_address":"","ucode":"4D13E7368D8CF2","user_header":"https://static001.geekbang.org/account/avatar/00/13/1e/71/9dcbe6c4.jpg","comment_is_top":false,"comment_ctime":1577861568,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10167796160","product_id":100033601,"comment_content":"我感觉老师这篇是看到了我之前的留言，专门延伸的一篇文章，点赞！","like_count":2,"discussions":[{"author":{"id":1910075,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/25/3b/a971fc8e.jpg","nickname":"阿感","note":"","ucode":"7BCB7E44A832D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281644,"discussion_content":"看到你的提问了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591782556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164533,"user_name":"LEON","can_delete":false,"product_type":"c1","uid":1109922,"ip_address":"","ucode":"58F7AF5302FCAD","user_header":"https://static001.geekbang.org/account/avatar/00/10/ef/a2/6ea5bb9e.jpg","comment_is_top":false,"comment_ctime":1577022275,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5871989571","product_id":100033601,"comment_content":"如果有些服务器没有部署 CA 的数字证书，那么浏览器还可以通过网络去下载 CA 证书，不过这种方式多了一次证书下载操作，会拖慢首次打开页面的请求速度，一般不推荐使用。<br><br>老师这块没听明白？这是默认因为吗？下载的是中间CA证书吗？去网络中什么地方下载？如何确保下载CA的有效性？<br>感谢。","like_count":1,"discussions":[{"author":{"id":1386818,"avatar":"https://static001.geekbang.org/account/avatar/00/15/29/42/43d4b1a8.jpg","nickname":"烫烫烫","note":"","ucode":"C06018670DE76A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313263,"discussion_content":"证书里面是有证书链信息的，其中一项就是上级证书的下载地址","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603017973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306033,"user_name":"雷厉","can_delete":false,"product_type":"c1","uid":1960162,"ip_address":"","ucode":"90FA13AEC546F3","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e8/e2/ffb29a7d.jpg","comment_is_top":false,"comment_ctime":1628308553,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628308553","product_id":100033601,"comment_content":"感谢老师的分享","like_count":0},{"had_liked":false,"id":285317,"user_name":"undefined","can_delete":false,"product_type":"c1","uid":1656342,"ip_address":"","ucode":"8114385B49FDFE","user_header":"https://static001.geekbang.org/account/avatar/00/19/46/16/7eab6017.jpg","comment_is_top":false,"comment_ctime":1616737749,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616737749","product_id":100033601,"comment_content":"看完了 感谢分享","like_count":0},{"had_liked":false,"id":280141,"user_name":"陈启航","can_delete":false,"product_type":"c1","uid":2177436,"ip_address":"","ucode":"89246B9BFD3269","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLC4IhKmJDYdWhQms3dmZqJ5YMDGTlPa1o52DnKSErYjsqfc6iaRJrBDZpx0RqQx7eZAED797kiaV6aw/132","comment_is_top":false,"comment_ctime":1614091463,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1614091463","product_id":100033601,"comment_content":"值得之后前端开发经验更多之后 回来重读","like_count":0},{"had_liked":false,"id":275209,"user_name":"灵感_idea","can_delete":false,"product_type":"c1","uid":1231317,"ip_address":"","ucode":"E0DBDDFA6040F6","user_header":"https://static001.geekbang.org/account/avatar/00/12/c9/d5/b08a27ed.jpg","comment_is_top":false,"comment_ctime":1611389655,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611389655","product_id":100033601,"comment_content":"学完打个卡，老师讲的挺全面的，虽然很多地方稍显粗略，但或许是更利于接受的，还是要多学几遍，反复琢磨。","like_count":0},{"had_liked":false,"id":261732,"user_name":"子曰","can_delete":false,"product_type":"c1","uid":1161256,"ip_address":"","ucode":"34127192DD8876","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/28/8c83d109.jpg","comment_is_top":false,"comment_ctime":1605508227,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605508227","product_id":100033601,"comment_content":"通过图解的方式把一些底层的原理阐述的很清晰，老师辛苦，干货满满的课程������","like_count":0},{"had_liked":false,"id":243954,"user_name":"‏5102","can_delete":false,"product_type":"c1","uid":2116537,"ip_address":"","ucode":"476092AB890CF2","user_header":"https://static001.geekbang.org/account/avatar/00/20/4b/b9/2449c7b7.jpg","comment_is_top":false,"comment_ctime":1598339090,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598339090","product_id":100033601,"comment_content":"虽然之前有到处查询百度过这些知识，到目前为止，这个专栏让我彻底重新认识浏览器等，也理清很多的疑惑，真是醍醐灌顶的感觉，非常赞，v8那篇我还是会继续订阅的。","like_count":0},{"had_liked":false,"id":222625,"user_name":"后脑勺","can_delete":false,"product_type":"c1","uid":1946181,"ip_address":"","ucode":"50704EC5545C4C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/b2/45/b49a92f5.jpg","comment_is_top":false,"comment_ctime":1590851396,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1590851396","product_id":100033601,"comment_content":"完结，撒贝宁","like_count":0,"discussions":[{"author":{"id":1910075,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/25/3b/a971fc8e.jpg","nickname":"阿感","note":"","ucode":"7BCB7E44A832D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281643,"discussion_content":"还有好多坑等待老师加餐","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591782497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219402,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1590022950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590022950","product_id":100033601,"comment_content":"中间CA众多，如果证书链很长的话，浏览器对每一个中间证书都需要发起https请求去中间网站的CA获取么？","like_count":0},{"had_liked":false,"id":197589,"user_name":"Learning","can_delete":false,"product_type":"c1","uid":1480278,"ip_address":"","ucode":"CDF8C6383BA9EF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eokuZYcbHTG2HAICdczY7LX1dmFdIOPdJSJVWrzDQEP19QeUssibEvUoWaB7ode6zTYj2Wen0jFhZQ/132","comment_is_top":false,"comment_ctime":1585386843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585386843","product_id":100033601,"comment_content":"谢谢老师的加餐","like_count":0},{"had_liked":false,"id":181092,"user_name":"Lorin","can_delete":false,"product_type":"c1","uid":1379988,"ip_address":"","ucode":"7D546F70082DF0","user_header":"https://static001.geekbang.org/account/avatar/00/15/0e/94/4a2bb019.jpg","comment_is_top":false,"comment_ctime":1582473161,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582473161","product_id":100033601,"comment_content":"老师开一个前端专栏吧，前端领域里面找一个如此高质量的课程简直是太少了。","like_count":1},{"had_liked":false,"id":170139,"user_name":"淡","can_delete":false,"product_type":"c1","uid":1456392,"ip_address":"","ucode":"6856CA319DE2F0","user_header":"https://static001.geekbang.org/account/avatar/00/16/39/08/09055b47.jpg","comment_is_top":false,"comment_ctime":1578537345,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578537345","product_id":100033601,"comment_content":"很好的解答了客户端是如何拿到CA公钥以及根CA的存储问题。说好的promise呢，哈哈。<br>题外话，极客时间课程更新没提示了，之前都有的。不知道是不是因为课程标记为”选学“的原因。<br>","like_count":0},{"had_liked":false,"id":167210,"user_name":"花仙子","can_delete":false,"product_type":"c1","uid":1249216,"ip_address":"","ucode":"9840BF416F1F0F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0f/c0/e6151cce.jpg","comment_is_top":false,"comment_ctime":1577716926,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1577716926","product_id":100033601,"comment_content":"众所周知，青花瓷工作原理就是在个人主机上设置了一个代理，浏览器信任代理，代理验证并信任服务器的证书，所以可以在青花瓷中看到https的请求内容，同样原理，有没有可能在我们的浏览器在访问服务器之间设置一个代理，而致使浏览器无知觉的先请求到”代理服务器“，而”代理服务器“也拥有CA颁发的合法证书，”代理服务器“可以肆无忌惮的查看甚至修改浏览器与服务器间的通信","like_count":0,"discussions":[{"author":{"id":1017161,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/85/49/585c69c4.jpg","nickname":"皮特尔","note":"","ucode":"313862C91DD325","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292768,"discussion_content":"这就是中间人攻击的原理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595324867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165414,"user_name":"-_-|||","can_delete":false,"product_type":"c1","uid":1328142,"ip_address":"","ucode":"94B21594658BF9","user_header":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","comment_is_top":false,"comment_ctime":1577235182,"is_pvip":false,"discussion_count":1,"race_medal":1,"score":"1577235182","product_id":100033601,"comment_content":"文中“通常，当你部署 HTTP 服务器的时候，除了部署当前的数字证书之外”，那个应该是HTTPS吧","like_count":0,"discussions":[{"author":{"id":1646743,"avatar":"https://static001.geekbang.org/account/avatar/00/19/20/97/919f5e6b.jpg","nickname":"Geek_gaoqin","note":"","ucode":"760365FDCE6E27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309150,"discussion_content":"http服务器是指apache，jboss 等，部署数字证书是让网站支持https访问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601198331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165129,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1577168292,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577168292","product_id":100033601,"comment_content":"良心老师！","like_count":0},{"had_liked":false,"id":163855,"user_name":"lang","can_delete":false,"product_type":"c1","uid":1622658,"ip_address":"","ucode":"851B1377ED19A7","user_header":"https://static001.geekbang.org/account/avatar/00/18/c2/82/58debf3e.jpg","comment_is_top":false,"comment_ctime":1576811931,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576811931","product_id":100033601,"comment_content":"老师辛苦啦","like_count":0}]}