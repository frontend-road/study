{"id":41750,"title":"110 | Eureka进阶：自保护模式","content":"无","comments":[{"had_liked":false,"id":293969,"user_name":"独孤九剑","can_delete":false,"product_type":"c3","uid":2230909,"ip_address":"","ucode":"6C1253E2B8C1D4","user_header":"https://static001.geekbang.org/account/avatar/00/22/0a/7d/ac715471.jpg","comment_is_top":false,"comment_ctime":1621656522,"is_pvip":false,"replies":[{"id":107626,"content":"有可能，自保是为了防止因为网络抖动而大量的误剔除实例，这种大量的误剔除会造成严重的服务不可用(实际可能服务都是正常，只是服务和eureka之间网络不稳抖动造成)。\n\n但是进入自保模式后，eureka就不管你实例是不是真的挂了，所以这时候是有可能实例真的挂的。直到后面实例的心跳都恢复正常，eureka才会退出自保模式。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1622993112,"ip_address":"","comment_id":293969,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"自保护模式的初衷是防止因网络抖动导致误摘除实例，但会不会可能导致消费者发现的已经挂掉的生产者吧？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520452,"discussion_content":"有可能，自保是为了防止因为网络抖动而大量的误剔除实例，这种大量的误剔除会造成严重的服务不可用(实际可能服务都是正常，只是服务和eureka之间网络不稳抖动造成)。\n\n但是进入自保模式后，eureka就不管你实例是不是真的挂了，所以这时候是有可能实例真的挂的。直到后面实例的心跳都恢复正常，eureka才会退出自保模式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622993112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177826,"user_name":"zhaoni","can_delete":false,"product_type":"c3","uid":1052158,"ip_address":"","ucode":"F317ECD6380984","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqT1ykjFve5LCsFvegqLb8MKrf6ASApsOgm8nRb5icDE7MgzKbia0zUQkxe44tKvpCwQ65QuHo4NVoQ/132","comment_is_top":false,"comment_ctime":1581511130,"is_pvip":false,"replies":[{"id":69341,"content":"实例4和5因网络抖动，触发eureka server保护机制，这时候4和5已经被eureka剔除。经过一定周期，1-2-3和Eureka再次同步服务实例列表以后，将不能再访问4-5的接口。\n\n后续如果4和5恢复报心跳，eureka将解除自保模式。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1581782796,"ip_address":"","comment_id":177826,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"实例4和5因网络抖动，触发eureka server保护机制，是否已经将4和5剔除出服务列表？如果没有剔除，实例1-2-3想访问4-5的接口时，是否会出现访问不到的情况？这种情况，euraka是如何处理的？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483559,"discussion_content":"实例4和5因网络抖动，触发eureka server保护机制，这时候4和5已经被eureka剔除。经过一定周期，1-2-3和Eureka再次同步服务实例列表以后，将不能再访问4-5的接口。\n\n后续如果4和5恢复报心跳，eureka将解除自保模式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581782796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48677,"user_name":"nimai","can_delete":false,"product_type":"c3","uid":1096760,"ip_address":"","ucode":"5768B5FE78C707","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eofLLEBIhvkZqh5DrzUyI2GI7nRFMJ6VO2FibuK2P9NNjTawDIR9jzm1T7Mmepmb4pcTFsrR8kBVtA/132","comment_is_top":false,"comment_ctime":1544513550,"is_pvip":false,"replies":[{"id":17800,"content":"eureka自保模式是一种异常情况，这种模式下eureka就会部分损失正常工作能力，比如你说的那种情况它就自保暂管不了了，需马上干预恢复。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1544706540,"ip_address":"","comment_id":48677,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"Eureka自我保护模式下 ，万一保护的服务提供方机器宕了，会不会发生服务消费方调用出错尼?针对 这种问题Eureka怎么处理的","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432305,"discussion_content":"eureka自保模式是一种异常情况，这种模式下eureka就会部分损失正常工作能力，比如你说的那种情况它就自保暂管不了了，需马上干预恢复。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544706540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007748,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/60/84/354dafcb.jpg","nickname":"天空大海","note":"","ucode":"CF625DF1D89856","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":181295,"discussion_content":"自保模式启用后会有什么预警提醒机制进行干预吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582357168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}