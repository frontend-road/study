{"id":86626,"title":"16 | 如何优雅地获取跨层级组件实例（拒绝递归）","content":"<h1>源代码及课件地址</h1><p><a href=\"https://gitee.com/geektime-geekbang/geektime-vue-1\">https://gitee.com/geektime-geekbang/geektime-vue-1</a></p>","comments":[{"had_liked":false,"id":80546,"user_name":"砖用冰西瓜","can_delete":false,"product_type":"c3","uid":1057075,"ip_address":"","ucode":"9FB3FAFC958A10","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/33/acacb6ac.jpg","comment_is_top":false,"comment_ctime":1553678752,"is_pvip":true,"replies":[{"id":29288,"content":"前面补录了更基础的内容哈，这节算作高级应用了，视频中也有提到大部分业务开发不会需要这些知识的，如果你以后自己开发组件库或者更加复杂的项目（我至今也没在业务项目中用过），才会需要的。但我们提前掌握，或知道他的应用场景，以后碰到了再来回顾也是可以的 ","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1553684429,"ip_address":"","comment_id":80546,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"这个基础篇需要有基础的人看。","like_count":31,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444899,"discussion_content":"前面补录了更基础的内容哈，这节算作高级应用了，视频中也有提到大部分业务开发不会需要这些知识的，如果你以后自己开发组件库或者更加复杂的项目（我至今也没在业务项目中用过），才会需要的。但我们提前掌握，或知道他的应用场景，以后碰到了再来回顾也是可以的 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553684429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123159,"user_name":"风来了","can_delete":false,"product_type":"c3","uid":1587807,"ip_address":"","ucode":"DB4BA4528F5159","user_header":"https://static001.geekbang.org/account/avatar/00/18/3a/5f/6faa14fd.jpg","comment_is_top":false,"comment_ctime":1565618049,"is_pvip":false,"replies":[{"id":46152,"content":"Vuex承载的不仅仅是数据，还有数据的响应式，数据的增删改查，甚至是浏览器中的调试插件 ","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1566224880,"ip_address":"","comment_id":123159,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"vuex刷新浏览器数据就会销毁 项目直接可以用sessitionStoreage 也可以达到效果 一直没明白vuex的优点是什么？","like_count":10,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462561,"discussion_content":"Vuex承载的不仅仅是数据，还有数据的响应式，数据的增删改查，甚至是浏览器中的调试插件 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566224880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109111,"user_name":"细节决定成败","can_delete":false,"product_type":"c3","uid":1586732,"ip_address":"","ucode":"EAA623464A0C73","user_header":"https://static001.geekbang.org/account/avatar/00/18/36/2c/d3d6c4ca.jpg","comment_is_top":false,"comment_ctime":1561963853,"is_pvip":false,"replies":[{"id":39527,"content":"没有注册啊 ","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1561982133,"ip_address":"","comment_id":109111,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师v-ant-ref  VUE不识别","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456247,"discussion_content":"没有注册啊 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561982133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1586732,"avatar":"https://static001.geekbang.org/account/avatar/00/18/36/2c/d3d6c4ca.jpg","nickname":"细节决定成败","note":"","ucode":"EAA623464A0C73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":779,"discussion_content":"怎么才能识别？ 如何注册？\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562055681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104145,"user_name":"Semantha","can_delete":false,"product_type":"c3","uid":1162492,"ip_address":"","ucode":"702AC5A06F9BCA","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/fc/0b324280.jpg","comment_is_top":false,"comment_ctime":1560666347,"is_pvip":false,"replies":[{"id":38103,"content":"相关  字符串的方式灵活性比较低  指令的方式就比较灵活 尤其是跨层级时","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1560943483,"ip_address":"","comment_id":104145,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师，请教一个问题：之前在项目中看过其他同事直接使用的ref，比如&lt;parent-component ref=&#39;xxx&#39;&gt;，和这节课的内容是一个意思么？","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454144,"discussion_content":"相关  字符串的方式灵活性比较低  指令的方式就比较灵活 尤其是跨层级时","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560943483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101574,"user_name":"盆栽","can_delete":false,"product_type":"c3","uid":1374045,"ip_address":"","ucode":"C5B02C4E5C9B75","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/5d/3fd98765.jpg","comment_is_top":false,"comment_ctime":1559874387,"is_pvip":false,"replies":[{"id":36915,"content":"1. 没错，会相应更改，问题是跨多层实例的时候不能简单的通过this.$refs.xxx来访问\n2. 一般做通用组件开发的时候才会使用，业务中理想状态下不应该出现这种访问实例的情况，大概率使用vuex就可以了","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1560215095,"ip_address":"","comment_id":101574,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"这一节视频看了4遍，老师，有2个疑问。\n\n1. 视频中说实例不能被缓存？比如我在组件A中缓存组件B中的实例，this.refsB = this.$refs.componentB，当B组件有东西更改了，A组件的refsB属性（也就是缓存的B实例）会相应的更改啊。\n\n2. 使用provide&#47;inject的话，是不是在大型的组件库才会使用噢，毕竟这样相当于提前布阵，会写很多设置组件（调用setChildrenRef方法）ref的代码，比如视屏中F要获取H的实例，但是我却要在D中去写设置H实例的代码，感觉有点累。所以我想问，如果平常业务开发中遇见此需求，是不是使用this.$parent或者this.$refs一层层的寻找简单一点呢？","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453019,"discussion_content":"1. 没错，会相应更改，问题是跨多层实例的时候不能简单的通过this.$refs.xxx来访问\n2. 一般做通用组件开发的时候才会使用，业务中理想状态下不应该出现这种访问实例的情况，大概率使用vuex就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560215095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97895,"user_name":"colorful","can_delete":false,"product_type":"c3","uid":1535705,"ip_address":"","ucode":"BF7304EBEE8767","user_header":"https://static001.geekbang.org/account/avatar/00/17/6e/d9/82adf680.jpg","comment_is_top":false,"comment_ctime":1558835529,"is_pvip":false,"replies":[{"id":35045,"content":"不需要，ref是收集实例，通过inject、provide来传递实例，两个不一样的东西，看你需要什么","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1558877812,"ip_address":"","comment_id":97895,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师这个自定义v-ant-ref的使用必须得借助 inject和provide吗","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451464,"discussion_content":"不需要，ref是收集实例，通过inject、provide来传递实例，两个不一样的东西，看你需要什么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558877812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96493,"user_name":"火柴","can_delete":false,"product_type":"c3","uid":1197771,"ip_address":"","ucode":"0CF2C5A6C9C02A","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/cb/d81c7623.jpg","comment_is_top":false,"comment_ctime":1558433796,"is_pvip":false,"replies":[{"id":35054,"content":"单纯业务开发，不太会需要这节知识点","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1558878196,"ip_address":"","comment_id":96493,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"这节课程有点难度","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450897,"discussion_content":"单纯业务开发，不太会需要这节知识点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558878196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91675,"user_name":"呆呆的初学者","can_delete":false,"product_type":"c3","uid":1388706,"ip_address":"","ucode":"3E32DD2370D075","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLg1BhBeNfibU0BjHDEWQCuPzm1KLCAPWZ0nKSN87O7k1Pe0vEd822DGk5of2zYS01K9rKIlicqaIFg/132","comment_is_top":false,"comment_ctime":1557071067,"is_pvip":false,"replies":[{"id":33758,"content":"没有限制，但我想没有写的场景，如果要写，可以再好好考虑考虑，是不是有其他方案","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1557810002,"ip_address":"","comment_id":91675,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"麻烦问下老师通过v-ref得到的组件实例的数据是只读不可写的么","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448988,"discussion_content":"没有限制，但我想没有写的场景，如果要写，可以再好好考虑考虑，是不是有其他方案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557810002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85275,"user_name":"烟雨海花lwl","can_delete":false,"product_type":"c3","uid":1495437,"ip_address":"","ucode":"94106A70FF45A6","user_header":"https://static001.geekbang.org/account/avatar/00/16/d1/8d/d923fa4b.jpg","comment_is_top":false,"comment_ctime":1555030257,"is_pvip":false,"replies":[{"id":30811,"content":"友情提醒: 不是写通用组件的话 慎用  😄","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1555208590,"ip_address":"","comment_id":85275,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"😂沉迷provide和inject","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446615,"discussion_content":"友情提醒: 不是写通用组件的话 慎用  😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555208590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85107,"user_name":"young","can_delete":false,"product_type":"c3","uid":1472571,"ip_address":"","ucode":"4B5285A404E637","user_header":"https://static001.geekbang.org/account/avatar/00/16/78/3b/19ef632a.jpg","comment_is_top":false,"comment_ctime":1554982435,"is_pvip":false,"replies":[{"id":30574,"content":"😓慎重慎重  如果不是开发通用组件，不建议用这个知识点  ","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1554997410,"ip_address":"","comment_id":85107,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师，学了获取组件实例以后组件之间的通信太方便了！！属性、插槽、$emit、provide&#47;inject都不需要了？好麻烦","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446561,"discussion_content":"😓慎重慎重  如果不是开发通用组件，不建议用这个知识点  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554997410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81011,"user_name":"GS","can_delete":false,"product_type":"c3","uid":1232306,"ip_address":"","ucode":"EE89448D100380","user_header":"https://static001.geekbang.org/account/avatar/00/12/cd/b2/03728c6e.jpg","comment_is_top":false,"comment_ctime":1553775619,"is_pvip":false,"replies":[{"id":30138,"content":"👍","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1554563699,"ip_address":"","comment_id":81011,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"In this callback function, you should not change any reactive data. Otherwise the render will enter an infinite loop.\n老师的原文","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445042,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554563699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80144,"user_name":"枫语","can_delete":false,"product_type":"c3","uid":1477191,"ip_address":"","ucode":"D818437C56A148","user_header":"https://static001.geekbang.org/account/avatar/00/16/8a/47/f8f1b367.jpg","comment_is_top":false,"comment_ctime":1553609696,"is_pvip":false,"replies":[{"id":29254,"content":"的确是用的 vue-ref，这个也是我在维护的，代码见：\nhttps:&#47;&#47;github.com&#47;vueComponent&#47;vue-ref\n简单来说，就是利用指令，把实例传递出来，但里面又会涉及到更新销毁的一些逻辑判断，代码并不多，有兴趣可以看看 ","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1553649641,"ip_address":"","comment_id":80144,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"老师能解释一下这个指令v-ant-ref的实现方法么？这个东西没搞明白，代码像是通过vue-ref实现的，但是不确定","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444761,"discussion_content":"的确是用的 vue-ref，这个也是我在维护的，代码见：\nhttps://github.com/vueComponent/vue-ref\n简单来说，就是利用指令，把实例传递出来，但里面又会涉及到更新销毁的一些逻辑判断，代码并不多，有兴趣可以看看 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553649641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78353,"user_name":"莫念","can_delete":false,"product_type":"c3","uid":1464513,"ip_address":"","ucode":"4714DAA59EAB9C","user_header":"https://static001.geekbang.org/account/avatar/00/16/58/c1/f461b0e0.jpg","comment_is_top":false,"comment_ctime":1553132872,"is_pvip":false,"replies":[{"id":28554,"content":"自己写的一个指令，已经开源的，可以直接使用\n\nhttps:&#47;&#47;github.com&#47;vueComponent&#47;vue-ref","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1553158460,"ip_address":"","comment_id":78353,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"视频中显示的vue-ref 文件中的index.js 是源码吗？还是老师自己写的一个一个指令呢？","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444061,"discussion_content":"自己写的一个指令，已经开源的，可以直接使用\n\nhttps://github.com/vueComponent/vue-ref","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553158460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97290,"user_name":"剑走偏锋","can_delete":false,"product_type":"c3","uid":1394645,"ip_address":"","ucode":"ADE32590259C7F","user_header":"https://static001.geekbang.org/account/avatar/00/15/47/d5/d69d0f65.jpg","comment_is_top":false,"comment_ctime":1558629933,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"看着看着看不懂了，先简单的过一篇吧，等做项目的时候再回过头来仔细看看可能会更有感觉。好在视频视频可以多刷","like_count":5},{"had_liked":false,"id":305455,"user_name":"突围","can_delete":false,"product_type":"c3","uid":1090414,"ip_address":"","ucode":"03E865CC8A6F2A","user_header":"https://static001.geekbang.org/account/avatar/00/10/a3/6e/52580973.jpg","comment_is_top":false,"comment_ctime":1627980109,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"说实话，没看明白这个v-ant-ref","like_count":4},{"had_liked":false,"id":130992,"user_name":"Thoughtful valiant.","can_delete":false,"product_type":"c3","uid":1078689,"ip_address":"","ucode":"669EFFC64395B1","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/a1/be1a3bce.jpg","comment_is_top":false,"comment_ctime":1567591197,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"老师我想问一下，在Vue2.x的官方文档中，对于methods和watch中的方法官方不推荐使用箭头函数，理由是：“箭头函数绑定了父级作用域的上下文，所以 this 将不会按照期望指向 Vue 实例，this.a 将是 undefined”。但是在您的例子中使用了很多箭头函数，所以我想问一下，在您那样使用箭头函数会不会出现官方文档中所警告的哪种问题？","like_count":4,"discussions":[{"author":{"id":2409051,"avatar":"","nickname":"sy616","note":"","ucode":"5C9D5616AC7F80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374434,"discussion_content":"watcher 对象调用的时候 最终会使用call(this.vm)  来执行函数，call 无法改变剪头函数的this","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621175554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125157,"user_name":"余归之","can_delete":false,"product_type":"c3","uid":1184623,"ip_address":"","ucode":"5018EE407CB334","user_header":"https://wx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCSMDZyoBiaej6xQv3XibLt3y53RzaAMgnIQI6kvkEdANiaiaiazLEAdffmsqjlAxTrlFCKvJ5KR9ic7ycg/132","comment_is_top":false,"comment_ctime":1566101898,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"还是要有一些基础的，我看到这里，对一些钩子函数，语法糖就理解不了了，需要补一下基础的","like_count":3},{"had_liked":false,"id":236883,"user_name":"石人一只眼,,","can_delete":false,"product_type":"c3","uid":1553332,"ip_address":"","ucode":"F2F31DB6D8B114","user_header":"https://static001.geekbang.org/account/avatar/00/17/b3/b4/ade674ec.jpg","comment_is_top":false,"comment_ctime":1595576365,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"都是干货，需要用过vue 以及 了解过里面提到的API","like_count":2},{"had_liked":false,"id":98329,"user_name":"   dream","can_delete":false,"product_type":"c3","uid":1241462,"ip_address":"","ucode":"424E9A7021CFF5","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/76/753e6bab.jpg","comment_is_top":false,"comment_ctime":1558960322,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"应该会不停触发update回调吧","like_count":2},{"had_liked":false,"id":348659,"user_name":"郑亚庆","can_delete":false,"product_type":"c3","uid":1954188,"ip_address":"","ucode":"3BA98F6FC06AD5","user_header":"","comment_is_top":false,"comment_ctime":1655282656,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"试看的哪几节课确实讲的比较细，而且还带着敲代码，后面就开始越来越糙，直接拿着代码开始过，用心的同学直接跟着官方文档敲一遍demo 也一样。","like_count":1},{"had_liked":false,"id":149005,"user_name":"Saki","can_delete":false,"product_type":"c3","uid":1143138,"ip_address":"","ucode":"CEA2E5D15D400E","user_header":"https://static001.geekbang.org/account/avatar/00/11/71/62/20df02b0.jpg","comment_is_top":false,"comment_ctime":1573126463,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"先过一遍了解了解，感觉暂时用不到","like_count":1},{"had_liked":false,"id":361357,"user_name":"Karson","can_delete":false,"product_type":"c3","uid":1008100,"ip_address":"辽宁","ucode":"E0286BF6CA7281","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/e4/db3f783b.jpg","comment_is_top":false,"comment_ctime":1667446706,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"留言区关于 v-ant-ref 的问题，说下我个人理解。\n它是通过 main.js 中 Vue.use(ref, { name: &quot;ant-ref&quot; }); 注入的。\n注入后页面中就可以使用了，例如\n    &lt;ChildrenH v-ant-ref=&quot;c =&gt; setChildrenRef(&#39;childrenH&#39;, c)&quot; &#47;&gt;","like_count":0},{"had_liked":false,"id":356022,"user_name":"Geek_90bce2","can_delete":false,"product_type":"c3","uid":3168418,"ip_address":"湖南","ucode":"9B329C6A20FFCD","user_header":"","comment_is_top":false,"comment_ctime":1661925285,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"如果上课的老师写的代码能够提供就好了。","like_count":0},{"had_liked":false,"id":329199,"user_name":"Gavin","can_delete":false,"product_type":"c3","uid":2529318,"ip_address":"","ucode":"CEC9FC3B27BCD3","user_header":"https://static001.geekbang.org/account/avatar/00/26/98/26/519d1f6b.jpg","comment_is_top":false,"comment_ctime":1641206902,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"感觉还是没有用一个项目来完成，觉得有点混乱\n另外这default是啥用法呀\nexport default {\n  components: {},\n  inject: {\n    setChildrenRef: {\n      default: () =&gt; {}\n    }\n  }\n};","like_count":0},{"had_liked":false,"id":294244,"user_name":"海朋森","can_delete":false,"product_type":"c3","uid":1165084,"ip_address":"","ucode":"212BADF1F9E962","user_header":"https://static001.geekbang.org/account/avatar/00/11/c7/1c/e59a699b.jpg","comment_is_top":false,"comment_ctime":1621848812,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"我觉得，我作为测试，做过mvc项目开发，并相对有些后端基础，学这个效果还是可以的","like_count":0},{"had_liked":false,"id":135703,"user_name":"怀英","can_delete":false,"product_type":"c3","uid":1394143,"ip_address":"","ucode":"E2838AF06FB300","user_header":"https://static001.geekbang.org/account/avatar/00/15/45/df/97a71dc8.jpg","comment_is_top":false,"comment_ctime":1569243400,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"#5W2H#\nWhat：跨层级获得实例ref，setXxxRef&#47;getXxxRef\nWhy：在层级超过3级的情况下，一层层调用的方式繁琐且效率不高\nWho：null\nWhere：null\nWhen：null\nHow：setXxxRef&#47;getXxxRef\nHow much&#47;how good&#47;how bad：null","like_count":0},{"had_liked":false,"id":130316,"user_name":"angus.dai","can_delete":false,"product_type":"c3","uid":1376489,"ip_address":"","ucode":"067F85060791BB","user_header":"https://static001.geekbang.org/account/avatar/00/15/00/e9/5d1cf31c.jpg","comment_is_top":false,"comment_ctime":1567424351,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"跨层级通信为什么不考虑使用busEvent传递数据呢javascript:;","like_count":0,"discussions":[{"author":{"id":1966208,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LboBibFC5Me29laKl6lY8bF0G7RfJL24NyA6MnaF2lgFj6qhRbjPSFbxpnP5SZt2E84bOrm4t9ILAkboA6DNMfg/132","nickname":"Geek_a4fb41","note":"","ucode":"5B0CEE45B8A9A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556178,"discussion_content":"eventbus 在组件销毁的时候 需要手动销毁，如果不销毁再次进入组件会重复注册，导致触发多次。而且当数据流混乱的时候，会导致项目难以维护","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647240612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1653268,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3a/14/93e7fddd.jpg","nickname":"lllllxt","note":"","ucode":"7F39E83C62CD80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":26650,"discussion_content":"因为现在讲的是知识点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570612540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102503,"user_name":"帅气小熊猫","can_delete":false,"product_type":"c3","uid":1022199,"ip_address":"","ucode":"88FE6B57F55063","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/f7/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1560238738,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"我看通过value方法传入的第一个参数是组件实例，第二个参数是key值。而provide派发出来的set方法第一个参数是name，第二个参数才是ref。我看老师的方法在组件标签上赋值了，也在指令内部的value方法里赋值了，这里没看懂，我自己试了下就把赋值放在了指令内部，组件标签只是传一个方法进去","like_count":0},{"had_liked":false,"id":92370,"user_name":"欧罗巴皇","can_delete":false,"product_type":"c3","uid":1246075,"ip_address":"","ucode":"7F86E7963F58FF","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/7b/e0610f87.jpg","comment_is_top":false,"comment_ctime":1557240576,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"老师我看你的源码，实例化vue创建插件notification mounted钩子里面还用了this.$nextTick最后在里面用了callback。nextTick是否多余？","like_count":0},{"had_liked":false,"id":90182,"user_name":"烟雨海花lwl","can_delete":false,"product_type":"c3","uid":1495437,"ip_address":"","ucode":"94106A70FF45A6","user_header":"https://static001.geekbang.org/account/avatar/00/16/d1/8d/d923fa4b.jpg","comment_is_top":false,"comment_ctime":1556442810,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"三刷，注意到了老师说的vue第二届大会，于是手痒去看刷了一遍。记住了zhishi很重要 这五个字 ，狗头。","like_count":0},{"had_liked":false,"id":82140,"user_name":"人酒月","can_delete":false,"product_type":"c3","uid":1043728,"ip_address":"","ucode":"355D26CBBD4349","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/10/57aa5cc6.jpg","comment_is_top":false,"comment_ctime":1554129614,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024601,"comment_content":"这样的话，全局事件就太粗鲁了啊，但我还是选择全局事件啊！","like_count":0},{"had_liked":false,"id":78991,"user_name":"darren","can_delete":false,"product_type":"c3","uid":1151837,"ip_address":"","ucode":"4726076845920B","user_header":"https://static001.geekbang.org/account/avatar/00/11/93/5d/91f1d849.jpg","comment_is_top":false,"comment_ctime":1553314136,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024601,"comment_content":"更改响应式数据会有造成死循环的可能。","like_count":0}]}