{"id":283007,"title":"02 | å†å²ç¯‡ï¼šä¸ºä»€ä¹ˆä¼šæœ‰ WebAssembly è¿™æ ·ä¸€é—¨æŠ€æœ¯ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯äºèˆªã€‚</p><p>åœ¨å¼€å§‹çœŸæ­£å­¦ä¹  Wasm è¿™é—¨æŠ€æœ¯ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆæ¥é—®ä½ ä¸€ä¸ªé—®é¢˜ï¼šä½ æœ‰æ²¡æœ‰æ€è€ƒè¿‡ï¼Œåœ¨ Web æŠ€æœ¯çš„å†å²å‘å±•é•¿æ²³ä¸­ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç° Wasm è¿™æ ·ä¸€é—¨æŠ€æœ¯ï¼Ÿç°æœ‰çš„è¿™äº› Web æŠ€æœ¯ï¼Œåˆå­˜åœ¨ç€å“ªäº›æ— æ³•è§£å†³çš„é—®é¢˜ï¼Ÿ</p><p>è¦çŸ¥é“ï¼Œæ‰€æœ‰æ–°å…´æŠ€æœ¯çš„è¯ç”Ÿéƒ½ä¸€å®šæœ‰å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼Œæˆ–è€…è¦å»è§£å†³çš„é—®é¢˜ã€‚æ¯”å¦‚  jQuery ä¹‹äºæµè§ˆå™¨çš„å…¼å®¹æ€§ã€Vue.js / React.js ä¹‹äº Web åº”ç”¨çš„æ„å»ºæ¨¡å¼ã€‚</p><p>è™½ç„¶ç”¨å‰ç«¯æ¡†æ¶å’Œåº“æ¥ç±»æ¯” Wasm ä¸ç®—ååˆ†åˆé€‚ï¼Œä½†æˆ‘æƒ³é˜è¿°çš„æ˜¯ï¼ŒWasm çš„å‡ºç°ä¹Ÿå¹¶éå¶ç„¶ã€‚åœ¨è¿™èŠ‚è¯¾çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å°±æ¥ä¸€èµ·çœ‹çœ‹ Wasm è¯ç”ŸèƒŒåçš„é‚£äº›æ•…äº‹ã€‚ç›¸ä¿¡åœ¨å­¦ä¹ å®Œæœ¬è¯¾ç¨‹åï¼Œä½ ä¼šå¯¹ Wasm æœ‰äº†ä¸€äº›æ–°çš„äº†è§£ã€‚è€Œè¿™äº›äº†è§£æœ‰æ—¶å¯èƒ½æ¯”ä¸€é¡¹æŠ€æœ¯æœ¬èº«æ›´åŠ é‡è¦ã€‚</p><h2>JavaScript çš„å‘å±•å’Œå›°å¢ƒ</h2><p>1995 å¹´æœ«ï¼ŒBrendan Eich ä»…ç”¨äº† 10 å¤©æ—¶é—´ä¾¿å‘æ˜å‡ºäº† JavaScript ç¼–ç¨‹è¯­è¨€ï¼Œè€Œåœ¨éšåçš„äºŒåå¤šå¹´ä¸­ï¼ŒJavaScript å·²ç»æˆä¸ºäº†ä¸å¯åŠ¨æ‘‡çš„ï¼Œç”¨äºå¼€å‘ Web å‰ç«¯åº”ç”¨çš„å¿…å¤‡ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œéšç€åæ¥è¯¸å¦‚ React Nativeã€Electron ä»¥åŠ Vue.js ç­‰å„ç±»æ¡†æ¶çš„ä¸æ–­æ¶Œç°ï¼ŒJavaScript æ›¾ç»ä¸€åº¦æˆä¸º GitHub è¯­è¨€æ’è¡Œæ¦œçš„å¹´åº¦å† å†›ã€‚JavaScript ä¹Ÿå› æ­¤è¢«å¹¿æ³›åº”ç”¨åˆ°äº†å„è¡Œå„ä¸šã€å„ä¸ªé¢†åŸŸçš„å„ç±»é¡¹ç›®ä¸­ã€‚</p><!-- [[[read_end]]] --><p>è™½è¯´  JavaScript  çš„åº”ç”¨åœºæ™¯å¦‚æ­¤å¹¿æ³›ï¼Œä½†ä¹Ÿä¼šæœ‰å®ƒè‡ªå·±çš„çƒ¦æ¼ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä»  Web  åº”ç”¨å±‚é¢ä»¥åŠ JavaScript  è¯­è¨€æœ¬èº«ï¼Œæ¥çœ‹çœ‹å®ƒç©¶ç«Ÿåœ¨æ„äº›ä»€ä¹ˆã€‚</p><h3>Web åº”ç”¨è§„æ¨¡çš„æ€¥é€Ÿå¢é•¿</h3><p>éšç€ç§»åŠ¨äº’è”ç½‘çš„å‘å±•å’Œå„ç§å½¢å¼ç»æµæ´»åŠ¨çš„ä¸æ–­å±•å¼€ï¼Œè¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„å„ç±» Web åº”ç”¨ï¼Œå®ƒä»¬çš„ä½“ç§¯ä¸å¤æ‚æ€§éšç€æ—¶é—´çš„æ¨ç§»åœ¨ä¸æ–­å‘å±•ã€‚ä¸ºäº†èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­é«˜æ•ˆè¿è¡Œè¿™äº›ä¸æ–­â€œå˜å¤§â€çš„ Web åº”ç”¨ï¼Œæµè§ˆå™¨å‚å•†ä»¬ä¹Ÿåœ¨ä¸æ–­åœ°å¯»æ±‚ç€å„ç§â€œé»‘ç§‘æŠ€â€æ¥ä¼˜åŒ–æµè§ˆå™¨çš„æ€§èƒ½ã€‚</p><p>ä½†ä¸æ—¥ç›Šåºå¤§å’Œå¤æ‚åŒ–çš„ Web åº”ç”¨ç›¸æ¯”ï¼Œæµè§ˆå™¨å¯¹è‡ªèº«æ€§èƒ½çš„ä¼˜åŒ–å¯è°“æ˜¯ä¸¾æ­¥ç»´è‰°ã€‚ä¸éš¾é¢„è§ï¼Œå½“â€œå¤æ‚åŒ–â€ä¸â€œæ€§èƒ½ä¼˜åŒ–â€çš„é€Ÿåº¦ä¹‹æ¯”ä¸æ–­å˜å¤§æ—¶ï¼Œè¿Ÿæ—©æœ‰ä¸€å¤©ï¼Œæµè§ˆå™¨ä¼šå†ä¹Ÿæ— æ³•æ”¯æ’‘èµ·è¿™äº›åºå¤§ Web åº”ç”¨çš„è¿è¡Œã€‚</p><p>æ®ç›¸å…³æ•°æ®ç»Ÿè®¡ï¼Œæˆªæ­¢ 2019 å¹´åº•ï¼Œå…¨ä¸–ç•Œä¸€å…±æœ‰çº¦ 16 äº¿ä¸ªå¯ç´¢å¼•ç½‘é¡µï¼Œè€Œå…¶ä¸­çš„ 95% éƒ½åœ¨ä½¿ç”¨ JavaScriptã€‚åœ¨è¿™äº›ç½‘é¡µä¸­ï¼Œå¤§çº¦æœ‰ 45% çš„ç½‘é¡µåˆ›å»ºäºæœ€è¿‘ 5 å¹´ã€‚è€Œ 2015 å¹´ï¼ŒECMAScript 2015 (ES6) è¯ç”Ÿï¼Œä¹Ÿæ ‡å¿—ç€ JavaScript å¼€å§‹è¿›å…¥äº†æ ‡å‡†ä¸€å¹´ä¸€æ›´æ–°çš„èŠ‚å¥ä¸­ã€‚</p><p>ç°ä»£çš„å¤§å¤šæ•°ç½‘é¡µï¼Œéƒ½ä¼šä½¿ç”¨è¾ƒæ–°çš„ JavaScript è¯­æ³•æ ‡å‡†è¿›è¡Œå¼€å‘ï¼Œç„¶ååœ¨å‘å¸ƒæ—¶ä½¿ç”¨è¯¸å¦‚ Babel ç­‰å·¥å…·ï¼Œå°†è¿™äº›æ–°çš„ JavaScript è¯­æ³•è½¬æ¢ä¸ºå¯¹åº”çš„ ES5 æ—§ç‰ˆæœ¬è¯­æ³•ï¼Œæ¥å…¼å®¹æ—§ç‰ˆæœ¬æµè§ˆå™¨ã€‚ä½†è¿™æ ·åšï¼Œäº§ç”Ÿçš„å„ç±» Polyfill ä»£ç ï¼Œä¼šæå¤§åœ°å¢åŠ æ•´ä¸ª Web åº”ç”¨çš„ä½“ç§¯ã€‚</p><p>åŒæ—¶ï¼Œåœ¨ Web åº”ç”¨çš„å®é™…è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¤§é‡çš„ JavaScript ä»£ç ä¹Ÿä¼šé™ä½åº”ç”¨çš„æ•´ä½“è¿è¡Œæ•ˆç‡ã€‚Twitter æ›¾å°è¯•ç›´æ¥ä»¥ ES6+ ç‰ˆæœ¬ä»£ç çš„å½¢å¼ï¼Œæ¥å‘å¸ƒæ•´ä¸ª Web åº”ç”¨ã€‚é€šè¿‡è¿™ç§æ–¹å¼æ‰€å‡å°‘çš„ Polyfill Bundle æ–‡ä»¶çš„å¤§å°ï¼Œç«Ÿç„¶å¯ä»¥è¾¾åˆ°åº”ç”¨æ‰€ä½¿ç”¨çš„å…¨éƒ¨ JavaScript ä»£ç çš„ 83%ã€‚</p><h3>JavaScript çš„å¼±ç±»å‹ä¹‹æ®‡</h3><p>é™¤äº†ä¸Šé¢æˆ‘ä»¬è®²åˆ°çš„ï¼Œæµè§ˆå™¨æ€§èƒ½ä¼˜åŒ–ä¸ Web åº”ç”¨è§„æ¨¡æ—¥ç›Šå¢å¤§ï¼Œè¿™ä¸¤è€…è¡Œè¿›é€Ÿåº¦çš„â€œä¸åè°ƒâ€æ‰€å¯èƒ½å¸¦æ¥çš„é—®é¢˜ä¹‹å¤–ï¼ŒJavaScript è¯­è¨€æœ¬èº«ä¹Ÿæœ‰ç€å…¶è‡ªèº«çš„â€œå¼±ç‚¹â€ã€‚è€Œç”±äºè¿™äº›â€œå¼±ç‚¹â€æ‰€å¸¦æ¥çš„å¦¥åï¼Œä½¿å¾—æµè§ˆå™¨åœ¨é¢å¯¹åºå¤§çš„ Web åº”ç”¨æ—¶ï¼Œä¹Ÿä¼šæ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚</p><p>å¯ä»¥è¯´ï¼ŒJavaScript æ˜¯ä¸€ä¸ªâ€œåŠ¨æ€ç±»å‹â€çš„ç¼–ç¨‹è¯­è¨€ã€‚åœ¨å®é™…ç¼–ç è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸ºæ¯ä¸€ä¸ªå˜é‡æŒ‡å®šå¯¹åº”ç±»å‹ã€‚å˜é‡å…·ä½“ç±»å‹çš„æ¨å¯¼è¿‡ç¨‹ï¼Œä¼šè¢«æ¨è¿Ÿåˆ°ä»£ç çš„å®é™…è¿è¡Œæ—¶å†è¿›è¡Œã€‚JavaScript è¿™ç§åŠ¨æ€ç±»å‹è¯­è¨€æ‰€ç‹¬æœ‰çš„ç‰¹æ€§ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šç›¸è¾ƒäºé™æ€ç±»å‹è¯­è¨€è€Œè¨€ï¼Œä¼šå¸¦æ¥é¢å¤–çš„è¿è¡Œæ—¶æ€§èƒ½å¼€é”€ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥ä¸€èµ·æƒ³è±¡ä¸€ä¸‹ï¼Œ JavaScript å¼•æ“åœ¨æ‰§è¡Œè¡¨è¾¾å¼ â€œx + yâ€ æ—¶çš„å…·ä½“æµç¨‹ã€‚è¿™é‡Œ x ä¸ y åˆ†åˆ«æ˜¯åœ¨ä¸€æ®µ JavaScript ä»£ç ä¸­å®šä¹‰çš„ä¸¤ä¸ªå˜é‡ï¼Œå½“å¼•æ“æ‰§è¡Œåˆ° â€œx + yâ€ æ—¶ï¼Œå¯¹äºè¿ç®—ç¬¦ â€œ+â€ æ¥è¯´ï¼Œä½äºå…¶å·¦å³ä¸¤ä¾§çš„æ“ä½œæ•°å¯ä»¥æ˜¯ JavaScript ä¸­ä»»ä½•æœ‰æ•ˆç±»å‹çš„ç»„åˆï¼Œæ¯”å¦‚ â€œ{} + []â€ã€â€œ[] + nullâ€ã€â€œ1 + 2â€ ç­‰ç­‰ã€‚å› æ­¤ï¼Œå¼•æ“åœ¨å¯¹ â€œ+â€ è¿ç®—ç¬¦è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼æ—¶ï¼Œä¼šæ ¹æ® ECMAScript æ ‡å‡†ä¸­è§„å®šçš„ â€œ+â€ è¿ç®—ç¬¦çš„è¯­ä¹‰ï¼Œæ¥å¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚</p><p>é€šè¿‡ä¸‹å›¾ä½ å¯ä»¥çœ‹åˆ°ï¼Œ åœ¨ ECMAScript æ ‡å‡†ä¸­å®šä¹‰çš„ï¼Œâ€œ+â€ è¿ç®—ç¬¦çš„è¿è¡Œæ—¶æ±‚å€¼æµç¨‹ï¼Œå®é™…ä¸Šååˆ†å¤æ‚å’Œç¹çã€‚è¿™ä¹Ÿæ˜¯ç›¸å¯¹äºé™æ€è¯­è¨€æ¥è¯´ï¼ŒJavaScript å¾ˆå°‘èƒ½å¤Ÿè¿›è¡Œä¼˜åŒ–çš„åœ°æ–¹ã€‚</p><p>åœ¨ç°ä»£çš„ JavaScript å¼•æ“ä¸­ï¼Œå°½ç®¡å¯ä»¥ä½¿ç”¨è¯¸å¦‚ JIT ç­‰æŠ€æœ¯æ¥æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¦‚æœä»£ç æ‰§è¡Œæ²¡æœ‰éµå®ˆ JIT ä¼˜åŒ–è·¯å¾„ä¸­ç‰¹å®š Guard çš„è¦æ±‚ï¼Œâ€œå»ä¼˜åŒ–â€çš„è¿‡ç¨‹ï¼Œä¹ŸåŒæ ·ä¼šå½±å“å¼•æ“çš„æ•´ä½“æ‰§è¡Œæ•ˆç‡ã€‚è€Œè¿™äº›å½±å“éƒ½æ˜¯ç”±äº JavaScript çš„â€œåŠ¨æ€æ€§â€å¯¼è‡´çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e4/47/e40df57ac5cc30613170717291fd8b47.png?wh=1632*1226\" alt=\"\" title=\"å›¾ç‰‡æ¥è‡ª ECMAScript@2020 å®˜æ–¹æ ‡å‡†æ–‡æ¡£\n\"></p><h2>æœ€åˆçš„å°è¯• â€”â€” NaCl ä¸ PNaCl</h2><p>JavaScript çš„å‘å±•å›°å¢ƒåœ¨é€æ¸æ˜¾ç°ï¼Œäººä»¬å¯¹ Web æ€§èƒ½çš„æ‹…å¿§ä¹Ÿåœ¨ä¸æ—¥ä¿±å¢ï¼Œäººä»¬æ°¸è¿œæ²¡æœ‰åœä¸‹ä¼˜åŒ–çš„è„šæ­¥ã€‚NaCl æ˜¯ç”± Google åœ¨ 2011 å¹´äº Chrome æµè§ˆå™¨ä¸­å‘å¸ƒçš„ä¸€é¡¹æŠ€æœ¯ï¼Œè¯¥æŠ€æœ¯æ—¨åœ¨æä¾›ä¸€ä¸ªæ²™ç›’ç¯å¢ƒï¼Œå¯ä»¥è®©åŸºäº C/C++ è¯­è¨€ç¼–å†™çš„ Native åº”ç”¨ï¼Œå®‰å…¨åœ°è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ã€‚NaCl çš„å…¨ç§° â€œNative Clientâ€ ä¹Ÿæš—ç¤ºäº†è¿™ä¸€ç‚¹ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸€ä¸ªæ ‡å‡† NaCl åº”ç”¨çš„ç»„æˆç»“æ„ï¼Œä¸æ™®é€šçš„ JavaScript Web åº”ç”¨ååˆ†ç±»ä¼¼ã€‚NaCl æ¨¡å—ä½œä¸ºåº”ç”¨çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦ç”¨æ¥è¿›è¡Œå¤æ‚çš„æ•°æ®å¤„ç†å’Œè¿ç®—ï¼ŒJavaScript åˆ™è´Ÿè´£å¤„ç†åº”ç”¨ä¸å¤–éƒ¨ç”¨æˆ·çš„äº¤äº’é€»è¾‘ã€‚NaCl å®ä¾‹ä¸ JavaScript ä»£ç ä¹‹é—´å¯ä»¥é€šè¿‡â€œè®¢é˜…/å‘å¸ƒâ€æ¨¡å‹ï¼Œæ¥äº’ç›¸ä¼ é€’æ¶ˆæ¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b9/cb/b95925e8a831ec3266727fedfc2175cb.png?wh=838*414\" alt=\"\" title=\"å›¾ç‰‡æ¥è‡ª Chrome å®˜æ–¹ç›¸å…³æ–‡æ¡£\n\"></p><p>ç†æƒ³è™½å¥½ï¼Œä½†ç°å®å´å­˜åœ¨ç€å¾ˆå¤šé—®é¢˜ã€‚é€šå¸¸ï¼Œä¸€ä¸ª NaCl æ¨¡å—æ–‡ä»¶éœ€è¦åœ¨å¼€å‘è€…æœ¬åœ°è¿›è¡Œç¼–è¯‘ï¼Œç„¶åæ‰èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚è€Œæœ¬åœ°ç¼–è¯‘çš„æ¨¡å—æ–‡ä»¶é€šå¸¸ä»…å«æœ‰æ¶æ„ç›¸å…³ï¼ˆarchitecture-dependentï¼‰çš„ä»£ç ï¼Œå› æ­¤æ²¡æœ‰åŠæ³•ç›´æ¥åœ¨å…¶ä»–ç±»å‹çš„ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚</p><p>ä¸€ä¸ªå®Œæ•´çš„ NaCl åº”ç”¨ï¼Œåœ¨åˆ†å‘æ—¶éœ€è¦æä¾›æ”¯æŒå¤šä¸ªæ¶æ„å¹³å°ï¼ˆX86_32 / X86_64 / ARM ç­‰ï¼‰çš„æ¨¡å—æ–‡ä»¶ã€‚æµè§ˆå™¨åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„å…·ä½“æ¶æ„ç±»å‹ï¼Œæ¥åŠ¨æ€åœ°é€‰æ‹©ï¼Œå¯¹åº”åˆé€‚çš„æ¨¡å—æ–‡ä»¶è¿›è¡Œä½¿ç”¨ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œç”±äº NaCl æ¨¡å—â€œå¹³å°ä¾èµ–â€çš„ç‰¹æ®Šæ€§ï¼Œå› æ­¤ NaCl æ¨¡å—è¿›è¡Œåˆ†å‘çš„è¿‡ç¨‹ï¼Œä»…èƒ½å¤Ÿåœ¨ Chrome Web Store ä¸­è¿›è¡Œã€‚ å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æƒ³è¦å°†å·²ç»å­˜åœ¨çš„ C/C++ ä»£ç åº“ç¼–è¯‘è‡³ NaClï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œä½ è¿˜éœ€è¦é€šè¿‡åä¸º Pepper çš„åº“æ¥å¯¹è¿™äº›ä»£ç è¿›è¡Œé‡å†™ã€‚</p><p>Pepper æä¾›äº†å¾ˆå¤šåŒ…è£…ç±»å‹ï¼Œä»¥åŠç”¨äºå’Œæµè§ˆå™¨è¿›è¡Œäº¤äº’çš„ APIï¼Œæ¯”å¦‚ â€œPP_Boolâ€ ç­‰ã€‚è¿™äº› API å’Œç‰¹æ®Šç±»å‹å¯ä»¥ä¾¿äºæ•´åˆä¼ ç»Ÿ C/C++ ä»£ç ä¸ Web æµè§ˆå™¨çš„æ²™ç›’ç¯å¢ƒã€‚</p><p>é‰´äº NaCl å­˜åœ¨çš„â€œå¹³å°ä¾èµ–â€é—®é¢˜ï¼ŒGoogle åœ¨åæœŸåˆæ¨å‡ºäº†åä¸º PNaCl çš„æŠ€æœ¯ã€‚è¿™é‡Œåå­—ä¸­å¤šå‡ºæ¥çš„ â€œPâ€ ä»£è¡¨ç€ â€œPortableâ€ï¼Œä¹Ÿå°±æ˜¯â€œå¯ç§»æ¤â€çš„æ„æ€ã€‚</p><p>PNaCl é‡‡ç”¨äº†ä¸ä¸€æ ·çš„ç”Ÿå‘½å‘¨æœŸï¼Œå‚è€ƒä¸‹å›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç›¸è¾ƒäº NaCl æ¨¡å—ç›´æ¥åŒ…å«æœ‰å¹³å°æ¶æ„ç›¸å…³çš„ä»£ç ï¼ŒPNaCl å°†æº C/C++ ä»£ç ç¼–è¯‘åˆ°ä¸€ç§ä¸­é—´ä»£ç ã€‚è¿™äº›ä¸­é—´ä»£ç ä¼šåœ¨æµè§ˆå™¨å®é™…åŠ è½½è¿™ä¸ª PNaCl æ¨¡å—æ—¶ï¼Œå†è¢«è½¬æ¢ä¸ºå¯¹åº”çš„å¹³å°ç›¸å…³ä»£ç ã€‚å› æ­¤ï¼Œå¯¹äº PNaCl æ¨¡å—è€Œè¨€ï¼Œåˆ†å‘çš„è¿‡ç¨‹å˜å¾—æ›´åŠ ç®€å•ï¼Œä¸”ä¸ç”¨æ‹…å¿ƒç§»æ¤æ€§çš„é—®é¢˜ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/09/46/09ef8002f3411732fc1ac513814ab646.png?wh=1098*836\" alt=\"\" title=\"å›¾ç‰‡æ¥è‡ª Chrome å®˜æ–¹ç›¸å…³æ–‡æ¡£\"></p><p>ä¸è¿‡ï¼Œå³ä½¿æ˜¯å¯¹äº PNaCl è¿™ç±»â€œå¯ç§»æ¤æ€§â€å·²ç»ä¸å†æˆä¸ºé—®é¢˜çš„æŠ€æœ¯è€Œè¨€ï¼Œå®ƒä»¬çš„é¢å‰è¿˜æœ‰å¾ˆå¤šâ€œå¤§å±±â€éš¾ä»¥é€¾è¶Šã€‚æ¯”å¦‚ï¼šâ€œéœ€è¦ä½¿ç”¨ Pepper é‡å†™ C/C++ ä»£ç ï¼Œæ ‡å‡†è¾ƒä¸ºå°é—­ã€ä»… Chrome æµè§ˆå™¨æ”¯æŒâ€ç­‰ç­‰ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œæ— è®ºæ˜¯ NaCl è¿˜æ˜¯ PNaClï¼Œå®ƒä»¬éƒ½å·²ç»æˆä¸ºè¿‡å»ã€‚ç°åœ¨ï¼Œå¦‚æœä½ å†æ¬¡å›åˆ° NaCl / PNaCl åœ¨ Google çš„å®˜æ–¹æ–‡æ¡£ç½‘ç«™ï¼Œä½ ä¼šå‘ç°å¦‚ä¸‹è¿™æ ·ä¸€æ®µå£°æ˜ã€‚Wasm å°†ä¼šä½œä¸ºæ–°ä¸€ä»£çš„æŠ€æœ¯ï¼Œæ¥æ›¿å¹¶ç»§ç»­ä¼ æ‰¿ Google èµ‹äºˆç»™ NaCl / PNaCl çš„ä½¿å‘½ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e0/0c/e0c11b3ec2da8890a096509992cc1f0c.png?wh=1020*648\" alt=\"\" title=\"å›¾ç‰‡æ¥è‡ª Chrome å®˜æ–¹ç›¸å…³æ–‡æ¡£\"></p><h2>Wasm çš„å‰èº« â€”â€” ASM.js</h2><p>é™¤äº† NaCl ä¸ PNaClï¼Œå¦ä¸€ä¸ªä¸å¯ä¸æçš„æŠ€æœ¯ä¾¿æ˜¯ Mozilla äº 2013 æå‡ºçš„ ASM.jsã€‚åŒå‰ä¸¤è€…ä¸€æ ·ï¼ŒASM.js çš„è®¾è®¡ç›®æ ‡ä¹Ÿæ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨ JavaScript è¯­è¨€ä¹‹å¤–ï¼Œä¸ºâ€œæ„å»ºæ›´é«˜æ€§èƒ½çš„ Web åº”ç”¨â€è¿™ä¸ªç›®æ ‡ï¼Œæä¾›å¦å¤–ä¸€ç§å®ç°çš„å¯èƒ½ã€‚</p><p>â€œASM.js æ˜¯ JavaScript çš„ä¸€ä¸ªä¸¥æ ¼å­é›†ã€‚å®ƒæ˜¯ä¸€ç§å¯ç”¨äºç¼–è¯‘å™¨çš„ç›®æ ‡è¯­è¨€ï¼Œä½å±‚æ¬¡ä¸”é«˜æ•ˆã€‚è¯¥ç›®æ ‡è¯­è¨€æœ‰æ•ˆåœ°ä¸ºå†…å­˜ä¸å®‰å…¨è¯­è¨€ï¼ˆå¦‚ C/C++ï¼‰ï¼Œæè¿°äº†ä¸€ä¸ªæ²™ç›’è™šæ‹Ÿæœºè¿è¡Œç¯å¢ƒã€‚é™æ€å’ŒåŠ¨æ€éªŒè¯ç›¸ç»“åˆçš„æ–¹å¼ï¼Œä½¿å¾— JavaScript å¼•æ“èƒ½å¤Ÿä½¿ç”¨ AOT ç­‰ä¼˜åŒ–ç¼–è¯‘ç­–ç•¥æ¥éªŒè¯ ASM.js ä»£ç â€ã€‚è¿™æ˜¯ Mozilla å®˜æ–¹ç»™å‡ºçš„å…³äº â€œASM.js æ˜¯ä»€ä¹ˆï¼Ÿâ€ è¿™ä¸ªé—®é¢˜çš„è§£ç­”ã€‚</p><p>ä¹ä¸€çœ‹è¿™æ®µè§£é‡Šï¼Œå¯èƒ½ä¼šæœ‰ç‚¹æŠ½è±¡å’Œå¤æ‚ã€‚ä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ä¸¤ä»¶äº‹æƒ…ã€‚</p><p>ç¬¬ä¸€ï¼ŒASM.js æ˜¯ JavaScript çš„ä¸¥æ ¼å­é›†ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå¯¹äºä¸€æ®µ ASM.js ä»£ç ï¼ŒJavaScript å¼•æ“å¯ä»¥å°†å®ƒè§†ä½œæ™®é€šçš„ JavaScript ä»£ç æ¥æ‰§è¡Œï¼Œè¿™ä¾¿ä¿éšœäº† ASM.js åœ¨æ—§ç‰ˆæœ¬æµè§ˆå™¨ä¸Šçš„å¯ç§»æ¤æ€§ã€‚</p><p>ç¬¬äºŒï¼ŒASM.js ä½¿ç”¨äº† â€œAnnotationï¼ˆæ³¨è§£ï¼‰â€ çš„æ–¹å¼æ¥æ ‡è®°ä»£ç ä¸­åŒ…æ‹¬ï¼šå‡½æ•°å‚æ•°ã€å±€éƒ¨/å…¨å±€å˜é‡ï¼Œä»¥åŠå‡½æ•°è¿”å›å€¼åœ¨å†…çš„å„ç±»å€¼çš„å®é™…ç±»å‹ã€‚</p><p>å½“ JavaScript å¼•æ“æ»¡è¶³ä¸€å®šæ¡ä»¶åï¼Œä¾¿ä¼šé€šè¿‡ AOT é™æ€ç¼–è¯‘çš„æ–¹å¼ï¼Œå°†è¿™äº›è¢« Annotation æ ‡è®°çš„ ASM.js ä»£ç ï¼Œç¼–è¯‘æˆå¯¹åº”çš„æœºå™¨ç å¹¶åŠ ä»¥ä¿å­˜ã€‚å½“ JavaScript å¼•æ“å†æ¬¡æ‰§è¡Œï¼ˆç”šè‡³åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼‰è¿™æ®µ ASM.js ä»£ç æ—¶ï¼Œä¾¿ä¼šç›´æ¥ä½¿ç”¨å…ˆå‰å·²ç»å­˜å‚¨å¥½çš„æœºå™¨ç ç‰ˆæœ¬ã€‚å› æ­¤ï¼Œå¼•æ“çš„æ€§èƒ½ä¼šå¾—åˆ°å¤§å¹…çš„æå‡ã€‚</p><p>å¯¹äºä¸€æ®µæ ‡å‡† ASM.js ä»£ç çš„å…·ä½“ç»„æˆå½¢å¼ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢ç»™å‡ºçš„è¿™æ®µä»£ç ï¼Œä»¥ä¾¿æœ‰ä¸€ä¸ªæ›´åŠ ç›´è§‚çš„å°è±¡ã€‚</p><pre><code>function asm (stdin, foreign, heap) {\n  &quot;use asm&quot;;\n  \n  function add (x, y) {\n    x = x|0;  // å˜é‡ x å­˜å‚¨äº† int ç±»å‹å€¼ï¼›\n    y = y|0;  // å˜é‡ y å­˜å‚¨äº† int ç±»å‹å€¼ï¼›\n    var addend = 1.0, sum = 0.0;  // å˜é‡ addend å’Œ sum é»˜è®¤å­˜æ”¾äº†&quot;åŒç²¾åº¦æµ®ç‚¹&quot;ç±»å‹å€¼ï¼›\n    sum = sum + x + y;\n    return +sum;  // å‡½æ•°è¿”å›å€¼ä¸º&quot;åŒç²¾åº¦æµ®ç‚¹&quot;ç±»å‹ï¼›\n  }\n  return { add: add };\n}\n\n</code></pre><p>åœ¨è¿™æ®µ JavaScript ä»£ç ä¸­ï¼Œæœ€ä¸ºé‡è¦çš„æ˜¯å‡½æ•° â€œasmâ€ åœ¨å…¶å‡½æ•°ä½“å®šä¹‰å¼€å¤´å¤„ä½¿ç”¨çš„ â€œuse asmâ€ æŒ‡ä»¤ã€‚è¿™ä¸ªæŒ‡ä»¤å°†ä¼šåœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­â€œå‘Šè¯‰â€ JavaScript å¼•æ“ï¼Œå½“å‰è¿™ä¸ªå‡½æ•°ä½“å†…çš„ä»£ç å¯ä»¥æŒ‰ç…§ ASM.js ä»£ç ï¼Œæ¥è¿›è¡Œç›¸åº”çš„ä¼˜åŒ–å’Œå¤„ç†ã€‚</p><p>å®é™…ä¸Šï¼Œä¸Šè¿°è¿™æ ·çš„ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œä¾¿å®šä¹‰äº†ä¸€ä¸ªæ ‡å‡†çš„ ASM.js æ¨¡å—ã€‚æ¨¡å—å†…éƒ¨å¯ä»¥é€šè¿‡ return çš„æ–¹å¼ï¼Œå¯¼å‡ºåŒ…å«æœ‰è‹¥å¹²å†…è”æ–¹æ³•çš„å¯¹è±¡ã€‚è¿™äº›æ–¹æ³•å¯ä»¥åœ¨å¤–éƒ¨çš„ JavaScript ä»£ç ä¸­è¿›è¡Œè°ƒç”¨ã€‚</p><p>åœ¨ä¸Šè¿° asm æ¨¡å—å†…å®šä¹‰çš„å†…è”å‡½æ•° add ä¸­ï¼Œæˆ‘ä»¬åœ¨å…¶å¼€å¤´çš„å‰ä¸¤è¡Œä»£ç é€šè¿‡ â€œx|0â€ å’Œ â€œy|0â€ çš„æ–¹å¼ï¼Œåˆ†åˆ«å¯¹å˜é‡ x ä¸ y çš„å€¼ç±»å‹è¿›è¡Œäº†æ ‡è®°ã€‚è€Œè¿™ç§æ–¹å¼ä¾¿æ˜¯æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ ASM.js æ‰€ä½¿ç”¨çš„ Annotationã€‚</p><p>å½“ JavaScript å¼•æ“åœ¨ç¼–è¯‘è¿™æ®µ ASM.js ä»£ç æ—¶ï¼Œä¾¿ä¼šå°†è¿™é‡Œçš„å˜é‡ x ä¸ y çš„ç±»å‹è§†ä¸º int æ•´å‹ã€‚åŒæ ·çš„ï¼Œè¿˜æœ‰æˆ‘ä»¬å¯¹å‡½æ•°è¿”å›å€¼çš„å¤„ç† â€œ+sumâ€ã€‚é€šè¿‡è¿™æ ·çš„ Annotationï¼Œå¼•æ“ä¼šå°†å˜é‡ sum çš„å€¼è§†ä¸ºåŒç²¾åº¦æµ®ç‚¹ç±»å‹ã€‚ç±»ä¼¼çš„ï¼ŒASM.js åœ¨æ ‡å‡†ä¸­è¿˜è§„å®šäº†å…¶ä»–çš„è¯¸å¤š Annotation å½¢å¼ï¼Œå¯ä»¥å°†å˜é‡å€¼æ ‡è®°ä¸ºä¸åŒçš„ç±»å‹ï¼Œç”šè‡³å¯¹å€¼ç±»å‹è¿›è¡Œè½¬æ¢ã€‚</p><p>ä¸ºäº†ç¡®ä¿ä¸Šè¿°çš„è¿™æ ·ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œèƒ½å¤Ÿè¢«å½“åšä¸€ä¸ªæ ‡å‡†çš„ ASM.js æ¨¡å—è¿›è¡Œå¿…è¦çš„ä¼˜åŒ–å¤„ç†ï¼ŒJavaScript å¼•æ“é€šå¸¸ä¼šåœ¨å®é™…ç¼–è¯‘åŠ è½½è¿™äº›æ¨¡å—å‰ï¼Œè¿›è¡Œå¾ˆå¤šå¿…è¦çš„æ£€æŸ¥éªŒè¯å·¥ä½œã€‚</p><p>å› æ­¤ï¼Œå¹¶ä¸æ˜¯è¯´åªè¦ä¸ºå‡½æ•°æ·»åŠ äº† â€œuse asmâ€ æŒ‡ä»¤ï¼Œå¹¶ä¸”ä¸ºä½¿ç”¨åˆ°çš„å˜é‡æ·»åŠ  Annotation ä¹‹åï¼ŒJavaScript å¼•æ“å°±ä¼šé€šè¿‡ AOT çš„æ–¹å¼æ¥ä¼˜åŒ–ä»£ç çš„æ‰§è¡Œã€‚æ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å…ˆå‰æåˆ°çš„ï¼ŒASM.js é€šå¸¸è¢«ä½œä¸ºä¸€ç§å¯ç”¨äºç¼–è¯‘å™¨çš„ï¼Œä½å±‚æ¬¡ä¸”é«˜æ•ˆçš„ç›®æ ‡è¯­è¨€ï¼Œè€Œä¸æ˜¯ç”¨äºæ‰‹å†™ã€‚</p><h2>ä»è¿‡å»åˆ°æœªæ¥</h2><p>æ—¶é—´æ¥åˆ°2015å¹´5æœˆã€‚Chrome å›¢é˜Ÿçš„ Ben æ­£åœ¨ä¸º V8 è®¾è®¡ä¸€ç§æ–°çš„ Prototypeï¼ˆåŸå‹ï¼‰ï¼Œè€Œå¦ä¸€ä½å›¢é˜Ÿæˆå‘˜ Rosbery ï¼Œæ­£åœ¨ä¸ºè¿™ç§ Prototype è®¾è®¡å¯¹åº”çš„å­—èŠ‚ç æ ¼å¼ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ª Prototype å’Œå¯¹åº”çš„å­—èŠ‚ç æ ¼å¼ï¼Œä¾¿æ˜¯å¦‚ä»Š Wasm æ‰€åˆ†åˆ«å¯¹åº”çš„ WAT å¯è¯»æ–‡æœ¬æ ¼å¼ä¸äºŒè¿›åˆ¶å­—èŠ‚ç æ ¼å¼ã€‚åœ¨å½“æ—¶çš„è°·æ­Œå†…éƒ¨ï¼Œè¿™ä¸¤éƒ¨åˆ†æš‚æ—¶è¢«ç§°ä¸º ml-proto ä¸ v8-native-prototypeã€‚</p><p>éšç€ V8 å›¢é˜Ÿå¯¹ ml-proto ä¸ v8-native-prototype çš„ä¸æ–­ä¿®æ”¹å’Œä¼˜åŒ–ï¼Œå®ƒä»¬æœ€ç»ˆä¾¿æˆä¸ºäº† Wasm æ—©æœŸæ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚ä¸æ­¤åŒæœŸå‡ºç°çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªåä¸º â€œsexpr-wasmâ€ çš„å†…éƒ¨å·¥å…· ï¼Œåœ¨å½“æ—¶è¿™ä¸ªå·¥å…·ç”¨äºå¯¹è¿™ä¸¤ç§æ ¼å¼è¿›è¡Œç›¸äº’è½¬æ¢ã€‚éšç€ Wasm çš„æ ‡å‡†åŒ–ï¼Œå®ƒä¹ŸåŒæ ·æˆä¸ºäº† Wasm å¸¸ç”¨è°ƒè¯•å·¥å…·çš„ä¸€éƒ¨åˆ†ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„ â€”â€” WABTã€‚</p><p>Chrome V8 å›¢é˜Ÿä½œä¸ºå‚ä¸è¿‡ PNaCL ä¸ ASM.js è¿™ä¸¤ä¸ªæ ‡å‡†åˆ¶å®šçš„å›¢é˜Ÿï¼Œåœ¨è®¾è®¡å’Œå®ç° Wasm æ—¶ä¹ŸåŒæ ·å‚è€ƒäº†å¾ˆå¤šä»è¿™ä¸¤ç§æŠ€æœ¯ä¸­æ€»ç»“ä¸‹æ¥çš„ä¼˜ç¼ºç‚¹ã€‚è€Œè¿™äº›ç»éªŒä¹Ÿå°†ä¼šå¸®åŠ© Wasm åšå¥½å‡†å¤‡ï¼Œé¿å¼€é‚£äº›æ›¾ç»èµ°è¿‡çš„å‘ã€‚æœ€åï¼Œè¿™äº›ç»éªŒä½¿å¾— Wasm èƒ½å¤Ÿä»¥ä¸€ç§æ›´å¥½çš„æ–¹å¼ï¼Œå±•ç°åœ¨äººä»¬çš„é¢å‰ã€‚</p><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œè®²åˆ°è¿™ï¼Œä»Šå¤©çš„å†…å®¹ä¹Ÿå°±åŸºæœ¬ç»“æŸäº†ã€‚æœ€åæˆ‘æ¥ç»™ä½ æ€»ç»“ä¸€ä¸‹ã€‚</p><p>å®é™…ä¸Šåœ¨ Wasm çœŸæ­£å‡ºç°ä¹‹å‰ï¼Œäººä»¬å°±å·²ç»å¼€å§‹å°è¯•æ¢ç´¢å„ç±»æ–°å‹æŠ€æœ¯ä»¥èµ‹äºˆ Web åº”ç”¨æ›´é«˜çš„è¿è¡Œæ•ˆç‡ã€‚</p><p>ä» NaClã€PNaCl åˆ° ASM.jsï¼Œå®ƒä»¬ä¸»è¦æœ‰ä¸‰ç‚¹å…±åŒç‰¹å¾ï¼š<br>\n1.æºç ä¸­éƒ½ä½¿ç”¨äº†ç±»å‹æ˜ç¡®çš„å˜é‡ï¼›<br>\n2.åº”ç”¨éƒ½æ‹¥æœ‰ç‹¬ç«‹çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå¹¶ä¸”ä¸åŸæœ‰çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒåˆ†ç¦»ï¼›<br>\n3.æ”¯æŒå°†åŸæœ‰çš„ C/C++ åº”ç”¨é€šè¿‡æŸç§æ–¹å¼è½¬æ¢åˆ°åŸºäºè¿™äº›æŠ€æœ¯çš„å®ç°ï¼Œå¹¶å¯ä»¥ç›´æ¥è¿è¡Œåœ¨ Web æµè§ˆå™¨ä¸­ã€‚</p><p>Wasm è¿™é¡¹æŠ€æœ¯çš„è®¾è®¡ä¸å®ç°ï¼Œç¦»ä¸å¼€ä»è¿™äº›â€œå‰è¾ˆâ€ä»¬èº«ä¸Šå­¦ä¹ åˆ°çš„ç»éªŒã€‚ä»è¡¨é¢ä¸Šæ¥çœ‹ï¼Œäº’è”ç½‘æŠ€æœ¯è¿­ä»£é£å¿«ã€‚ä½†å®é™…ä¸Šï¼Œå½“ç¨å¾®æ·±å…¥å’Œæ€»ç»“ä¹‹åï¼Œä½ å°±ä¼šå‘ç°å…¶å®å®ƒä»¬éƒ½æœ‰ç€åŸºæœ¬ç›¸åŒçš„ï¼Œæƒ³è¦å»è§£å†³çš„ç›®æ ‡é—®é¢˜ï¼Œæ¯”å¦‚å¯¹äºæ€§èƒ½çš„æ‰§è‘—è¦æ±‚ã€‚ä»¥åŠååˆ†ç±»ä¼¼çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚å°½æœ€å¤§å¯èƒ½å»ç¡®å®šé‚£äº›èƒ½å¤Ÿç¡®å®šã€ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚ç±»å‹ï¼‰ï¼Œç„¶åå†ä»¥æ­¤ä¸ºåŸºç¡€è¿›è¡Œä¼˜åŒ–ã€‚ Wasm ä¹Ÿä¸ä¾‹å¤–ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>æœ€åï¼Œæˆ‘ä»¬æ¥åšä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>ä½ è§‰å¾—å°±ç›®å‰çš„ Web æŠ€æœ¯é¢†åŸŸè€Œè¨€ï¼Œå­˜åœ¨ç€å“ªäº›å›°å¢ƒï¼Ÿæˆ–è€…è¯´éœ€è¦å»è§£å†³å’Œä¼˜åŒ–çš„åœ°æ–¹ï¼Ÿ</p><p>ä»Šå¤©çš„è¯¾ç¨‹å°±ç»“æŸäº†ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°ä½ ï¼Œä¹Ÿå¸Œæœ›ä½ åœ¨ä¸‹æ–¹çš„ç•™è¨€åŒºå’Œæˆ‘å‚ä¸è®¨è®ºï¼ŒåŒæ—¶æ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p>","neighbors":{"left":{"article_title":"01 | åŸºç¡€ç¯‡ï¼šå­¦ä¹ æ­¤è¯¾ç¨‹ä½ éœ€è¦äº†è§£å“ªäº›åŸºç¡€çŸ¥è¯†ï¼Ÿ","id":282995},"right":{"article_title":"03 | WebAssembly æ˜¯ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€å—ï¼Ÿ","id":283436}},"comments":[{"had_liked":false,"id":246972,"user_name":"Jupiter","can_delete":false,"product_type":"c1","uid":2125382,"ip_address":"","ucode":"072E5C34CDE8AC","user_header":"https://static001.geekbang.org/account/avatar/00/20/6e/46/a612177a.jpg","comment_is_top":false,"comment_ctime":1599546665,"is_pvip":false,"replies":[{"id":"90747","content":"ä½ å¯ä»¥å‚è€ƒä¸€ä¸ªåä¸º AssemblyScript çš„é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®å°±æ˜¯åŸºäº TS è¯­æ³•è®¾è®¡çš„ï¼Œå¯ä»¥å°†ä»¥ TS è¯­æ³•ç¼–å†™çš„ä»£ç ç¼–è¯‘ä¸º Wasm æ ¼å¼ã€‚é€šå¸¸æ¥è®²ï¼Œåœ¨æ—¥å¸¸çš„ Web å¼€å‘ä¸­ï¼Œç”±äº TS éœ€è¦è¢«ç¼–è¯‘ä¸º JSï¼Œæ‰€ä»¥å¯¹äºæœ€ç»ˆçš„ä»£ç æ‰§è¡Œæ€§èƒ½æ˜¯æ²¡æœ‰ä»€ä¹ˆå½±å“çš„ã€‚ä½† TS çš„ç±»å‹ä¿¡æ¯åœ¨å¯¹äºç¼–è¯‘åˆ° Wasm æ¥è¯´ï¼Œè¿˜æ˜¯å¯ä»¥è¢«å‚è€ƒçš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":246972,"uid":"1005890","ip_address":"","utype":1,"ctime":1599608499,"user_name_real":"Jason Yu äºèˆª"}],"discussion_count":1,"race_medal":0,"score":"40254252329","product_id":100059901,"comment_content":"è€å¸ˆå¥½ï¼ŒTypescript å¯ä»¥è®¾ç½®å‚æ•°ç±»å‹ï¼Œç°åœ¨çš„é¡¹ç›®ä¸­ä¹Ÿç»å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯æœ€åTypescriptçš„ä»£ç ä¹Ÿä¼šè¢«è§£é‡ŠæˆJavascript, æ‰€ä»¥Typescriptsæ˜¯ä¸æ˜¯åªæ˜¯è§„èŒƒç¨‹åºå‘˜å†™ä»£ç ï¼Œå¯¹äºåº”ç”¨çš„æ€§èƒ½å…¶å®æ²¡æœ‰ä»€ä¹ˆå¸®åŠ©ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1005890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/42/e1757583.jpg","nickname":"Jason Yu äºèˆª","note":"","ucode":"0731492F4BC77D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505277,"discussion_content":"ä½ å¯ä»¥å‚è€ƒä¸€ä¸ªåä¸º AssemblyScript çš„é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®å°±æ˜¯åŸºäº TS è¯­æ³•è®¾è®¡çš„ï¼Œå¯ä»¥å°†ä»¥ TS è¯­æ³•ç¼–å†™çš„ä»£ç ç¼–è¯‘ä¸º Wasm æ ¼å¼ã€‚é€šå¸¸æ¥è®²ï¼Œåœ¨æ—¥å¸¸çš„ Web å¼€å‘ä¸­ï¼Œç”±äº TS éœ€è¦è¢«ç¼–è¯‘ä¸º JSï¼Œæ‰€ä»¥å¯¹äºæœ€ç»ˆçš„ä»£ç æ‰§è¡Œæ€§èƒ½æ˜¯æ²¡æœ‰ä»€ä¹ˆå½±å“çš„ã€‚ä½† TS çš„ç±»å‹ä¿¡æ¯åœ¨å¯¹äºç¼–è¯‘åˆ° Wasm æ¥è¯´ï¼Œè¿˜æ˜¯å¯ä»¥è¢«å‚è€ƒçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599608499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247067,"user_name":"Cryhard","can_delete":false,"product_type":"c1","uid":1589593,"ip_address":"","ucode":"E0BF4548B502CB","user_header":"https://static001.geekbang.org/account/avatar/00/18/41/59/78042964.jpg","comment_is_top":false,"comment_ctime":1599575713,"is_pvip":false,"replies":[{"id":"90828","content":"ç›´æ¥è¿è¡Œ ES6 ä»£ç çš„å°è¯•å…¶å®æœ‰å¾ˆå¤šä¼ä¸šå¾ˆæ—©å°±åœ¨å°è¯•ï¼Œä½†å¤§å®¶éƒ½ç›¸å¯¹æ¯”è¾ƒä¿å®ˆï¼Œè¿˜æ˜¯ä¼šå»å…¼å®¹è€ä¸€ä»£çš„æµè§ˆå™¨ã€‚å°±æ€§èƒ½æå‡æ¥è®²ï¼Œå°±ç®—æ˜¯ç›´æ¥è¿è¡Œ ES6 çš„ä»£ç ï¼ŒJavaScript å¼•æ“ä¹ŸåŒæ ·è¿˜æ˜¯éœ€è¦ç»å†ç”Ÿæˆ ASTï¼ŒProfilingï¼ŒLoweringï¼Œä»¥åŠ Optimization å’Œ De-optimization çš„è¿‡ç¨‹ï¼Œå› æ­¤ç›¸è¾ƒäº Wasm åœ¨æ•´ä¸ªå¼•æ“ Pipeline ä¸­æ›´åŠ é åçš„ä½ç½®ï¼Œæ€§èƒ½ä¸Šä¹Ÿè¿˜æ˜¯æ— æ³•æ¯”æ‹Ÿçš„ã€‚å†µä¸”æ€§èƒ½ä¹Ÿåªæ˜¯ Wasm çš„ä¸€æ–¹é¢ç‰¹æ€§ï¼Œå¦ä¸€ä¸ªâ€œå†å²ä»£ç å¯å¤ç”¨æ€§â€çš„ç‰¹å¾æˆ‘ä»¬ä¹ŸåŒæ ·éœ€è¦å…³æ³¨ã€‚å› æ­¤å…¶å®ä¸¤è€…ä¸ä¼šæœ‰å¤ªå¤šçš„é‡å ï¼Œæ›´ä¸ä¼šé˜»ç¢ Wasm çš„å‘å±•ã€‚","user_name":"ä½œè€…å›å¤","comment_id":247067,"uid":"1005890","ip_address":"","utype":1,"ctime":1599660915,"user_name_real":"Jason Yu äºèˆª"}],"discussion_count":1,"race_medal":0,"score":"35959314081","product_id":100059901,"comment_content":"ES6ç­‰åç»­ç‰ˆæœ¬å¦‚æœè§£å†³äº†æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œåç»­ä¸å†éœ€è¦â€œç¼–è¯‘â€å›è€ç‰ˆè„šæœ¬è¯­è¨€ï¼Œä»è€Œè·å¾—äº†æ€§èƒ½ä¿éšœã€‚è¿™æ ·çš„æƒ…å†µæ˜¯å¦ä¼šæˆä¸ºwasmçš„é‡å¤§é˜»ç¢å‘¢ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1005890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/42/e1757583.jpg","nickname":"Jason Yu äºèˆª","note":"","ucode":"0731492F4BC77D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505302,"discussion_content":"ç›´æ¥è¿è¡Œ ES6 ä»£ç çš„å°è¯•å…¶å®æœ‰å¾ˆå¤šä¼ä¸šå¾ˆæ—©å°±åœ¨å°è¯•ï¼Œä½†å¤§å®¶éƒ½ç›¸å¯¹æ¯”è¾ƒä¿å®ˆï¼Œè¿˜æ˜¯ä¼šå»å…¼å®¹è€ä¸€ä»£çš„æµè§ˆå™¨ã€‚å°±æ€§èƒ½æå‡æ¥è®²ï¼Œå°±ç®—æ˜¯ç›´æ¥è¿è¡Œ ES6 çš„ä»£ç ï¼ŒJavaScript å¼•æ“ä¹ŸåŒæ ·è¿˜æ˜¯éœ€è¦ç»å†ç”Ÿæˆ ASTï¼ŒProfilingï¼ŒLoweringï¼Œä»¥åŠ Optimization å’Œ De-optimization çš„è¿‡ç¨‹ï¼Œå› æ­¤ç›¸è¾ƒäº Wasm åœ¨æ•´ä¸ªå¼•æ“ Pipeline ä¸­æ›´åŠ é åçš„ä½ç½®ï¼Œæ€§èƒ½ä¸Šä¹Ÿè¿˜æ˜¯æ— æ³•æ¯”æ‹Ÿçš„ã€‚å†µä¸”æ€§èƒ½ä¹Ÿåªæ˜¯ Wasm çš„ä¸€æ–¹é¢ç‰¹æ€§ï¼Œå¦ä¸€ä¸ªâ€œå†å²ä»£ç å¯å¤ç”¨æ€§â€çš„ç‰¹å¾æˆ‘ä»¬ä¹ŸåŒæ ·éœ€è¦å…³æ³¨ã€‚å› æ­¤å…¶å®ä¸¤è€…ä¸ä¼šæœ‰å¤ªå¤šçš„é‡å ï¼Œæ›´ä¸ä¼šé˜»ç¢ Wasm çš„å‘å±•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599660915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246873,"user_name":"arch","can_delete":false,"product_type":"c1","uid":1078931,"ip_address":"","ucode":"A69EBFE0520B85","user_header":"https://static001.geekbang.org/account/avatar/00/10/76/93/64ed7385.jpg","comment_is_top":false,"comment_ctime":1599498983,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"18779368167","product_id":100059901,"comment_content":"wasmçº¯cpuè®¡ç®—å’Œnativeå·®åˆ«ä¸å¤§ï¼Œä½†æ˜¯ä¸€æ—¦æ¶‰åŠåˆ°è®¿å­˜å°±éº»çƒ¦äº†ï¼Œå› ä¸ºwavmåªèƒ½è®¿é—®vmå†…çš„å†…å­˜ã€‚è¿™å°±å’Œåº”ç”¨é€»è¾‘éå¸¸ç›¸å…³äº†ã€‚å…¸å‹å°±æ˜¯protobuf messageæ“ä½œå¯¼è‡´è¯»å†™æ”¾å¤§ã€‚","like_count":4,"discussions":[{"author":{"id":2713766,"avatar":"https://static001.geekbang.org/account/avatar/00/29/68/a6/2f3037e5.jpg","nickname":"è´±çŒ´ğŸ”å“¥çš„å®¤å‹","note":"","ucode":"3575D3E681DB55","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385602,"discussion_content":"è·Ÿnative javasriptä¹ˆï¼Ÿæ€ä¹ˆå¬èµ·æ¥wasmå¦‚æœæœ‰å›ºå®šç±»å‹ï¼Œåº”è¯¥æ˜¯æ¯”è¿™ç§JSä¸å¼ºåˆ¶ç±»å‹åœ¨è¿è¡Œæ—¶æ•ˆç‡é«˜å¾ˆå¤šï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627165315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273191,"user_name":"Vfeelit","can_delete":false,"product_type":"c1","uid":1501818,"ip_address":"","ucode":"F3FF2B069F347F","user_header":"https://static001.geekbang.org/account/avatar/00/16/ea/7a/d857723d.jpg","comment_is_top":false,"comment_ctime":1610473344,"is_pvip":false,"replies":[{"id":"99127","content":"å®é™…ä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤§å·®åˆ«çš„ï¼Œå€ŸåŠ©äº TS ç¡®å®å¯ä»¥è§£å†³â€œå»ä¼˜åŒ–â€çš„é—®é¢˜ï¼Œä½†å¯¹äº JS è¿˜æ˜¯è¦é€šè¿‡ï¼šç”Ÿæˆ ASTã€ç”Ÿæˆ IRã€Loweringã€ä¼˜åŒ–ç¼–è¯‘å™¨ã€Profilingã€ç”Ÿæˆæœºå™¨ç è¿™äº›æ­¥éª¤çš„ã€‚ä½†å¯¹äº Wasmï¼Œä»…éœ€è¦â€œç”Ÿæˆæœºå™¨ç â€è¿™ä¸€æ­¥åŸºæœ¬å°±å¤Ÿäº†ï¼Œå¤§éƒ¨åˆ†ä¼˜åŒ–åœ¨é™æ€ç¼–è¯‘æ—¶å°±å·²ç»å®Œæˆäº†ï¼Œå¼•æ“åªéœ€è¦å¯¹ç…§ Wasm çš„ ISA ç¿»è¯‘æˆç›®æ ‡æœºå™¨çš„ ISA å°±å¯ä»¥äº†ï¼ŒåŸºæœ¬ä¸Šåªæ˜¯ä¸€ä¸ªæ±‡ç¼–å™¨çš„ä½œç”¨ï¼Œè€Œä¸”ç›®å‰ä¹Ÿä¸éœ€è¦é™æ€é“¾æ¥ã€‚","user_name":"ä½œè€…å›å¤","comment_id":273191,"uid":"1005890","ip_address":"","utype":1,"ctime":1610637463,"user_name_real":"Jason Yu äºèˆª"}],"discussion_count":1,"race_medal":0,"score":"14495375232","product_id":100059901,"comment_content":"JSè™½ç„¶åŠ¨æ€ï¼Œåœ¨TSæŠŠæŒä¸‹ï¼Œjit ä¸è¿›è¡Œæˆ–å‡ ä¹ä¸è¿›è¡Œåä¼˜åŒ–ï¼Œæ€§èƒ½å·²ç»ç›¸å½“ä¸é”™äº†å§ã€‚wasmä¸ä¹Ÿé€šè¿‡vmè½¬ä¸€åœˆæœ€ç»ˆäº§ç”Ÿæœºå™¨ç ?","like_count":3,"discussions":[{"author":{"id":1005890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/42/e1757583.jpg","nickname":"Jason Yu äºèˆª","note":"","ucode":"0731492F4BC77D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513522,"discussion_content":"å®é™…ä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤§å·®åˆ«çš„ï¼Œå€ŸåŠ©äº TS ç¡®å®å¯ä»¥è§£å†³â€œå»ä¼˜åŒ–â€çš„é—®é¢˜ï¼Œä½†å¯¹äº JS è¿˜æ˜¯è¦é€šè¿‡ï¼šç”Ÿæˆ ASTã€ç”Ÿæˆ IRã€Loweringã€ä¼˜åŒ–ç¼–è¯‘å™¨ã€Profilingã€ç”Ÿæˆæœºå™¨ç è¿™äº›æ­¥éª¤çš„ã€‚ä½†å¯¹äº Wasmï¼Œä»…éœ€è¦â€œç”Ÿæˆæœºå™¨ç â€è¿™ä¸€æ­¥åŸºæœ¬å°±å¤Ÿäº†ï¼Œå¤§éƒ¨åˆ†ä¼˜åŒ–åœ¨é™æ€ç¼–è¯‘æ—¶å°±å·²ç»å®Œæˆäº†ï¼Œå¼•æ“åªéœ€è¦å¯¹ç…§ Wasm çš„ ISA ç¿»è¯‘æˆç›®æ ‡æœºå™¨çš„ ISA å°±å¯ä»¥äº†ï¼ŒåŸºæœ¬ä¸Šåªæ˜¯ä¸€ä¸ªæ±‡ç¼–å™¨çš„ä½œç”¨ï¼Œè€Œä¸”ç›®å‰ä¹Ÿä¸éœ€è¦é™æ€é“¾æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610637463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247657,"user_name":"fa","can_delete":false,"product_type":"c1","uid":1454973,"ip_address":"","ucode":"3058FF4D88057E","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/7d/d90e2e81.jpg","comment_is_top":false,"comment_ctime":1599788001,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10189722593","product_id":100059901,"comment_content":"é˜»ç¢åœ¨äºè‹¹æœå…ä¸å…è®¸æˆ‘åœ¨iOSä¸Šä½¿ç”¨ï¼Œç›®å‰æœ‰äººåœ¨åšåŸºäºwasmçš„çƒ­æ›´æ–°ï¼Œåˆ«åƒjspatchä¸€æ ·ç»™å°äº†","like_count":2},{"had_liked":false,"id":273189,"user_name":"Vfeelit","can_delete":false,"product_type":"c1","uid":1501818,"ip_address":"","ucode":"F3FF2B069F347F","user_header":"https://static001.geekbang.org/account/avatar/00/16/ea/7a/d857723d.jpg","comment_is_top":false,"comment_ctime":1610472984,"is_pvip":false,"replies":[{"id":"99120","content":"å°±æœ¬è´¨è€Œè¨€çš„è¯ç¡®å®æ˜¯è¿™æ ·ï¼Œç±»ä¼¼ JVM åªæ˜¯ä¸€å¥—æ–°çš„ V-ISA æ ‡å‡†ã€‚ä½†ç›®å‰æ¥çœ‹å…¶ä¸åŒåœ¨äºï¼š<br>1ã€Wasm å¯ä»¥ç”¨äº Webï¼ˆèµ·æºï¼‰ï¼›<br>2ã€WASI æä¾›äº†ä¸€å¥— out-of-web çš„æ“ä½œç³»ç»Ÿæ¥å£æ ‡å‡†ï¼Œå¹¶ä¸”åŸºäº capability-based security å¯ä»¥æä¾›æ›´åŠ å®‰å…¨çš„ä¸Šå±‚åº”ç”¨å®ç°ï¼ˆæœ¬èº«åŸºäº Wasmï¼‰ã€‚æ— è®ºæ˜¯å®‰å…¨çš„ä»£ç å¤ç”¨ï¼Œè¿˜æ˜¯åŸºäº VM å±‚çš„è½»é‡çº§æ²™ç›’ç¯å¢ƒï¼Œéƒ½æ˜¯å¾ˆæœ‰ä»·å€¼å’Œå‘æŒ¥ç©ºé—´çš„ã€‚<br>","user_name":"ä½œè€…å›å¤","comment_id":273189,"uid":"1005890","ip_address":"","utype":1,"ctime":1610636963,"user_name_real":"Jason Yu äºèˆª"}],"discussion_count":1,"race_medal":0,"score":"5905440280","product_id":100059901,"comment_content":"å®ç°wasmçš„æ˜¯è™šæ‹Ÿæœºï¼Œä»»ä½•è¯­è¨€ï¼Œç¼–è¯‘ä¸ºæŸä¸ªä¸­é—´è¯­è¨€å¹¶ä¸æ˜¯å¾ˆå›°éš¾çš„äº‹ã€‚ç±»ä¼¼åŸºäºjvm, å®ƒä¹‹ä¸Šé™¤äº†javaè¿˜æœ‰å…¶ä»–è¯­è¨€ï¼Œè™½ç„¶éƒ½æ˜¯åŸºäºjvmï¼Œä½†ç”Ÿæ€å„ä¸åŒã€‚wasm ç›¸æ¯”ä¸‹ä¸è¿‡å°±æ˜¯ä¸€å¥—vmè§„èŒƒï¼Œæ²¡æœ‰é‚£ä¹ˆå¤§æƒ³è±¡åŠ›å•Š","like_count":1,"discussions":[{"author":{"id":1005890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/42/e1757583.jpg","nickname":"Jason Yu äºèˆª","note":"","ucode":"0731492F4BC77D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513521,"discussion_content":"å°±æœ¬è´¨è€Œè¨€çš„è¯ç¡®å®æ˜¯è¿™æ ·ï¼Œç±»ä¼¼ JVM åªæ˜¯ä¸€å¥—æ–°çš„ V-ISA æ ‡å‡†ã€‚ä½†ç›®å‰æ¥çœ‹å…¶ä¸åŒåœ¨äºï¼š\n1ã€Wasm å¯ä»¥ç”¨äº Webï¼ˆèµ·æºï¼‰ï¼›\n2ã€WASI æä¾›äº†ä¸€å¥— out-of-web çš„æ“ä½œç³»ç»Ÿæ¥å£æ ‡å‡†ï¼Œå¹¶ä¸”åŸºäº capability-based security å¯ä»¥æä¾›æ›´åŠ å®‰å…¨çš„ä¸Šå±‚åº”ç”¨å®ç°ï¼ˆæœ¬èº«åŸºäº Wasmï¼‰ã€‚æ— è®ºæ˜¯å®‰å…¨çš„ä»£ç å¤ç”¨ï¼Œè¿˜æ˜¯åŸºäº VM å±‚çš„è½»é‡çº§æ²™ç›’ç¯å¢ƒï¼Œéƒ½æ˜¯å¾ˆæœ‰ä»·å€¼å’Œå‘æŒ¥ç©ºé—´çš„ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610636963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":254327,"user_name":"å°ç‚­","can_delete":false,"product_type":"c1","uid":1109544,"ip_address":"","ucode":"E20E3958CAF06C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/28/c04a0c83.jpg","comment_is_top":false,"comment_ctime":1603100989,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5898068285","product_id":100059901,"comment_content":"æˆ‘é ï¼Œæ—¢ç„¶æ²¡çœ‹æ‡‚ï¼Œçœ‹æ¥è¦å¤šè¯»å‡ éã€‚","like_count":1},{"had_liked":false,"id":246864,"user_name":"å‰æ–¹çš„ç¯æœ‰ç‚¹å¼±","can_delete":false,"product_type":"c1","uid":2058455,"ip_address":"","ucode":"5CEDBCF3DDC991","user_header":"https://static001.geekbang.org/account/avatar/00/1f/68/d7/29025f1f.jpg","comment_is_top":false,"comment_ctime":1599494729,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5894462025","product_id":100059901,"comment_content":"è¿™ä¸ªæŠ€æœ¯è¶³ä»¥æ”¹å˜ä¸–ç•Œï¼‹ï¼‹ï¼‹","like_count":1},{"had_liked":false,"id":359406,"user_name":"donglin","can_delete":false,"product_type":"c1","uid":1214957,"ip_address":"åŒ—äº¬","ucode":"F77AAA841807D4","user_header":"","comment_is_top":false,"comment_ctime":1665500649,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665500649","product_id":100059901,"comment_content":"æ–‡ä¸­è¯´ASM.jsä¼šè¢«ç¼–è¯‘æˆæœºå™¨ç ä¿å­˜ï¼Œä¸‹æ¬¡å†æ¬¡æ‰§è¡Œæ—¶ä¾¿ä¼šç›´æ¥ä½¿ç”¨å·²ä¿å­˜çš„æœºå™¨ç ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚<br><br>è¿™ä¸ªä¸å°±æ˜¯JITæœºåˆ¶å˜›ï¼Œä½†åœ¨iOSä¸Šæ˜¯ç¦æ­¢çš„å•Šï¼Œæ‰€ä»¥ASM.jsåœ¨iOSä¸Šä¹Ÿæ— æ³•æé«˜æ€§èƒ½ï¼Ÿ","like_count":0},{"had_liked":false,"id":358460,"user_name":"Carpe","can_delete":false,"product_type":"c1","uid":2735540,"ip_address":"å››å·","ucode":"7F5B7E94A2DCAA","user_header":"https://static001.geekbang.org/account/avatar/00/29/bd/b4/7598663b.jpg","comment_is_top":false,"comment_ctime":1664333682,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664333682","product_id":100059901,"comment_content":"â€œæ®ç›¸å…³æ•°æ®ç»Ÿè®¡ï¼Œæˆªæ­¢ 2019 å¹´åº•ï¼Œå…¨ä¸–ç•Œä¸€å…±æœ‰çº¦ 16 äº¿ä¸ªå¯ç´¢å¼•ç½‘é¡µï¼Œè€Œå…¶ä¸­çš„ 95% éƒ½åœ¨ä½¿ç”¨ JavaScriptã€‚â€æ•°æ®æ¥æºäºå“ªï¼Ÿ","like_count":0},{"had_liked":false,"id":248728,"user_name":"åœ°çƒå¤–åœ°äºº","can_delete":false,"product_type":"c1","uid":1966404,"ip_address":"","ucode":"28457E37C632ED","user_header":"https://static001.geekbang.org/account/avatar/00/1e/01/44/3a9b2b69.jpg","comment_is_top":false,"comment_ctime":1600272066,"is_pvip":false,"replies":[{"id":"91354","content":"ä¼šæœ‰ä¸€éƒ¨åˆ†ã€‚ç”±äº TS çš„ç±»å‹ä¿¡æ¯å¹¶æ²¡æœ‰ç»™åˆ° JavaScript å¼•æ“æ¥ä½¿ç”¨ï¼Œæ‰€ä»¥å³ä¾¿æ•´ä¸ªç¨‹åºæ˜¯ well-organized çš„ï¼Œä½†æ˜¯ JavaScript å¼•æ“ä»ç„¶è¿˜æ˜¯éœ€è¦é€šè¿‡è¿è¡Œæ—¶æ¨å¯¼æ¥æ¨æµ‹å‡ºå˜é‡çš„å…·ä½“ç±»å‹ã€‚ä½†ä¹Ÿæœ‰çš„å¥½å¤„æ˜¯ï¼ŒJIT åœ¨å‡è®¾æŸä¸ªå˜é‡çš„ç±»å‹æ—¶ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥ä¿è¯æ˜¯æ­£ç¡®çš„ã€‚è¿™æ ·å¼•æ“çš„å»ä¼˜åŒ–è¿‡ç¨‹å°±ä¼šå‡å°‘å¾ˆå¤šï¼Œæ€§èƒ½ä¼šç›¸å¯¹æé«˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":248728,"uid":"1005890","ip_address":"","utype":1,"ctime":1600356311,"user_name_real":"Jason Yu äºèˆª"}],"discussion_count":1,"race_medal":0,"score":"1600272066","product_id":100059901,"comment_content":"è€å¸ˆå¥½ï¼Œæ„Ÿè§‰tsä»£ç è™½ç„¶è¢«ç¼–è¯‘æˆäº†jsï¼Œä½†æ˜¯è½¬æ¢åçš„jsä»£ç å†…éƒ¨ä¹Ÿé¿å…äº†å¾ˆå¤šç±»å‹è½¬æ¢çš„é—®é¢˜ï¼Œjså¼•æ“å¯¹äºè¿™ä¸€éƒ¨åˆ†æ²¡æœ‰ä»€ä¹ˆæ­£åé¦ˆå—","like_count":0,"discussions":[{"author":{"id":1005890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/42/e1757583.jpg","nickname":"Jason Yu äºèˆª","note":"","ucode":"0731492F4BC77D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505725,"discussion_content":"ä¼šæœ‰ä¸€éƒ¨åˆ†ã€‚ç”±äº TS çš„ç±»å‹ä¿¡æ¯å¹¶æ²¡æœ‰ç»™åˆ° JavaScript å¼•æ“æ¥ä½¿ç”¨ï¼Œæ‰€ä»¥å³ä¾¿æ•´ä¸ªç¨‹åºæ˜¯ well-organized çš„ï¼Œä½†æ˜¯ JavaScript å¼•æ“ä»ç„¶è¿˜æ˜¯éœ€è¦é€šè¿‡è¿è¡Œæ—¶æ¨å¯¼æ¥æ¨æµ‹å‡ºå˜é‡çš„å…·ä½“ç±»å‹ã€‚ä½†ä¹Ÿæœ‰çš„å¥½å¤„æ˜¯ï¼ŒJIT åœ¨å‡è®¾æŸä¸ªå˜é‡çš„ç±»å‹æ—¶ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥ä¿è¯æ˜¯æ­£ç¡®çš„ã€‚è¿™æ ·å¼•æ“çš„å»ä¼˜åŒ–è¿‡ç¨‹å°±ä¼šå‡å°‘å¾ˆå¤šï¼Œæ€§èƒ½ä¼šç›¸å¯¹æé«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600356311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248172,"user_name":"éƒ­çº¯","can_delete":false,"product_type":"c1","uid":1314521,"ip_address":"","ucode":"2613860B4642C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/0e/d9/e61ce097.jpg","comment_is_top":false,"comment_ctime":1600050308,"is_pvip":false,"replies":[{"id":"91191","content":"å—¯å—¯æ˜¯çš„ï¼Œä¸è¿‡ç°åœ¨æœ‰ WebXR è¿™ä¸ª W3C çš„è‰æ¡ˆäº†ã€‚å¦‚æœæµè§ˆå™¨èƒ½å¤Ÿ shipï¼Œå°±ä¼šæœ‰ä¸“é—¨çš„ Native API æ¥ç”¨äº Web VR åº”ç”¨çš„å¼€å‘ã€‚ä¸è¿‡ç›®å‰çœ‹è¿˜ä¸ºæ—¶å°šæ—©ï¼ŒWasm å¯ä»¥ä½œä¸ºæ¬¡çº§å…¼å®¹çš„ä¸€ä¸ªä¼˜ç§€å¤‡é€‰æ–¹æ¡ˆã€‚","user_name":"ä½œè€…å›å¤","comment_id":248172,"uid":"1005890","ip_address":"","utype":1,"ctime":1600055213,"user_name_real":"Jason Yu äºèˆª"}],"discussion_count":1,"race_medal":0,"score":"1600050308","product_id":100059901,"comment_content":"åœ¨ web vr é¢†åŸŸä¸‹  åœºæ™¯ä¸­ä¼šè®¾è®¡åˆ°å¾ˆå¤šæ¨¡å‹å’Œç‰¹æ•ˆå¦‚æœå¤§è§„æ¨¡è¿›è¡Œå¹³ç§» æ—‹è½¬ ç¼©æ”¾æˆ‘æ„Ÿè§‰å¾ˆé€‚åˆ wasm åœºæ™¯.","like_count":0,"discussions":[{"author":{"id":1005890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/42/e1757583.jpg","nickname":"Jason Yu äºèˆª","note":"","ucode":"0731492F4BC77D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505577,"discussion_content":"å—¯å—¯æ˜¯çš„ï¼Œä¸è¿‡ç°åœ¨æœ‰ WebXR è¿™ä¸ª W3C çš„è‰æ¡ˆäº†ã€‚å¦‚æœæµè§ˆå™¨èƒ½å¤Ÿ shipï¼Œå°±ä¼šæœ‰ä¸“é—¨çš„ Native API æ¥ç”¨äº Web VR åº”ç”¨çš„å¼€å‘ã€‚ä¸è¿‡ç›®å‰çœ‹è¿˜ä¸ºæ—¶å°šæ—©ï¼ŒWasm å¯ä»¥ä½œä¸ºæ¬¡çº§å…¼å®¹çš„ä¸€ä¸ªä¼˜ç§€å¤‡é€‰æ–¹æ¡ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600055213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247688,"user_name":"æµ©æ˜å•¦","can_delete":false,"product_type":"c1","uid":1377422,"ip_address":"","ucode":"120ED8FC45B992","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/8e/e75ecc5e.jpg","comment_is_top":false,"comment_ctime":1599794413,"is_pvip":true,"replies":[{"id":"90996","content":"AssemblyScript å…¶å®åªæ˜¯åŸºäº TS çš„è¯­æ³•è€Œå·²ï¼Œå®é™…åœ¨åº”ç”¨æ—¶éœ€è¦è¿›è¡Œä¸€äº›æ”¹åŠ¨ä»¥é€‚é… Wasm æ ‡å‡†ä»¥åŠæµè§ˆå™¨ä¸Šçš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œæ‰€ä»¥ç›´æ¥ç¼–è¯‘å‰ç«¯çš„ TS é¡¹ç›®åº”è¯¥æ˜¯ä¸è¡Œçš„ã€‚ç°ä»£å‰ç«¯å¼€å‘æ¡†æ¶ç”±äºéœ€è¦ä¸ Web API æ‰“äº¤é“ï¼Œå› æ­¤å®é™…ä¸Šåœ¨ç¼–è¯‘åˆ° Wasm åï¼Œå¯¹æ¡†æ¶çš„æ€§èƒ½æå‡æš‚æ—¶è¿˜çœ‹ä¸åˆ°å¯è§‚çš„æ”¶ç›Šã€‚å…³äºå‰ç«¯æ¡†æ¶ä¸ Wasm ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥å…³æ³¨è¯¾ç¨‹åé¢çš„æ–‡ç« å“ˆã€‚","user_name":"ä½œè€…å›å¤","comment_id":247688,"uid":"1005890","ip_address":"","utype":1,"ctime":1599883706,"user_name_real":"Jason Yu äºèˆª"}],"discussion_count":1,"race_medal":0,"score":"1599794413","product_id":100059901,"comment_content":"è¯„è®ºé‡Œè€å¸ˆè¯´AssemblyScriptè¿™ä¸ªï¼Œæˆ‘åˆšåˆšæ‰«äº†ä¸€çœ¼ï¼Œæˆ‘ä»¬ç°åœ¨tsçš„é¡¹ç›®ä¹Ÿèƒ½ç”¨è¿™ä¸ªæ¥ç¼–è¯‘ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒä¸Šä¹ˆï¼Ÿ ä¸è¿‡å¾ˆå¤šçš„é‚£äº›react å’Œvueæ¡†æ¶æ‰“åŒ…åä¸ºå•¥ä¸ç›´æ¥ç¼–è¯‘wasmå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1005890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/42/e1757583.jpg","nickname":"Jason Yu äºèˆª","note":"","ucode":"0731492F4BC77D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505471,"discussion_content":"AssemblyScript å…¶å®åªæ˜¯åŸºäº TS çš„è¯­æ³•è€Œå·²ï¼Œå®é™…åœ¨åº”ç”¨æ—¶éœ€è¦è¿›è¡Œä¸€äº›æ”¹åŠ¨ä»¥é€‚é… Wasm æ ‡å‡†ä»¥åŠæµè§ˆå™¨ä¸Šçš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œæ‰€ä»¥ç›´æ¥ç¼–è¯‘å‰ç«¯çš„ TS é¡¹ç›®åº”è¯¥æ˜¯ä¸è¡Œçš„ã€‚ç°ä»£å‰ç«¯å¼€å‘æ¡†æ¶ç”±äºéœ€è¦ä¸ Web API æ‰“äº¤é“ï¼Œå› æ­¤å®é™…ä¸Šåœ¨ç¼–è¯‘åˆ° Wasm åï¼Œå¯¹æ¡†æ¶çš„æ€§èƒ½æå‡æš‚æ—¶è¿˜çœ‹ä¸åˆ°å¯è§‚çš„æ”¶ç›Šã€‚å…³äºå‰ç«¯æ¡†æ¶ä¸ Wasm ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥å…³æ³¨è¯¾ç¨‹åé¢çš„æ–‡ç« å“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599883706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246844,"user_name":"ä½™æ–‡éƒ","can_delete":false,"product_type":"c1","uid":1388319,"ip_address":"","ucode":"A51117A929EBD8","user_header":"https://static001.geekbang.org/account/avatar/00/15/2f/1f/f95bd8c9.jpg","comment_is_top":false,"comment_ctime":1599490695,"is_pvip":false,"replies":[{"id":"94757","content":"EMCAï¼šhttps:&#47;&#47;www.ecma-international.org&#47;ecma-262&#47;<br>NaCl&#47;PNaClï¼šhttps:&#47;&#47;developer.chrome.com&#47;native-client&#47;nacl-and-pnacl","user_name":"ä½œè€…å›å¤","comment_id":246844,"uid":"1005890","ip_address":"","utype":1,"ctime":1605174288,"user_name_real":"Jason Yu äºèˆª"}],"discussion_count":1,"race_medal":0,"score":"1599490695","product_id":100059901,"comment_content":"è€å¸ˆï¼Œecmaæ ‡å‡†æ–‡æ¡£å’ŒChromeå®˜æ–¹æ–‡æ¡£åœ°å€å¯ä»¥åˆ†äº«ä¸€ä¸‹å—","like_count":0,"discussions":[{"author":{"id":1005890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/59/42/e1757583.jpg","nickname":"Jason Yu äºèˆª","note":"","ucode":"0731492F4BC77D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505240,"discussion_content":"EMCAï¼šhttps://www.ecma-international.org/ecma-262/\nNaCl/PNaClï¼šhttps://developer.chrome.com/native-client/nacl-and-pnacl","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605174288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}