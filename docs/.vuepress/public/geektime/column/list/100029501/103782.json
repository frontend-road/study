{"id":103782,"title":"08ä¸¨ä»€ä¹ˆæ˜¯SQLçš„èšé›†å‡½æ•°ï¼Œå¦‚ä½•åˆ©ç”¨å®ƒä»¬æ±‡æ€»è¡¨çš„æ•°æ®ï¼Ÿ","content":"<p>æˆ‘ä»¬ä¸ŠèŠ‚è¯¾è®²åˆ°äº†SQLå‡½æ•°ï¼ŒåŒ…æ‹¬ç®—æœ¯å‡½æ•°ã€å­—ç¬¦ä¸²å‡½æ•°ã€æ—¥æœŸå‡½æ•°å’Œè½¬æ¢å‡½æ•°ã€‚å®é™…ä¸ŠSQLå‡½æ•°è¿˜æœ‰ä¸€ç§ï¼Œå«åšèšé›†å‡½æ•°ï¼Œå®ƒæ˜¯å¯¹ä¸€ç»„æ•°æ®è¿›è¡Œæ±‡æ€»çš„å‡½æ•°ï¼Œè¾“å…¥çš„æ˜¯ä¸€ç»„æ•°æ®çš„é›†åˆï¼Œè¾“å‡ºçš„æ˜¯å•ä¸ªå€¼ã€‚é€šå¸¸æˆ‘ä»¬å¯ä»¥åˆ©ç”¨èšé›†å‡½æ•°æ±‡æ€»è¡¨çš„æ•°æ®ï¼Œå¦‚æœç¨å¾®å¤æ‚ä¸€äº›ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…ˆå¯¹æ•°æ®åšç­›é€‰ï¼Œç„¶åå†è¿›è¡Œèšé›†ï¼Œæ¯”å¦‚å…ˆæŒ‰ç…§æŸä¸ªæ¡ä»¶è¿›è¡Œåˆ†ç»„ï¼Œå¯¹åˆ†ç»„æ¡ä»¶è¿›è¡Œç­›é€‰ï¼Œç„¶åå¾—åˆ°ç­›é€‰åçš„åˆ†ç»„çš„æ±‡æ€»ä¿¡æ¯ã€‚</p><p>æœ‰å…³ä»Šå¤©çš„å†…å®¹ï¼Œä½ é‡ç‚¹éœ€è¦æŒæ¡ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol>\n<li>èšé›†å‡½æ•°éƒ½æœ‰å“ªäº›ï¼Œèƒ½å¦åœ¨ä¸€æ¡SELECTè¯­å¥ä¸­ä½¿ç”¨å¤šä¸ªèšé›†å‡½æ•°ï¼›</li>\n<li>å¦‚ä½•å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå¹¶è¿›è¡Œèšé›†ç»Ÿè®¡ï¼›</li>\n<li>å¦‚ä½•ä½¿ç”¨HAVINGè¿‡æ»¤åˆ†ç»„ï¼ŒHAVINGå’ŒWHEREçš„åŒºåˆ«æ˜¯ä»€ä¹ˆã€‚</li>\n</ol><h2>èšé›†å‡½æ•°éƒ½æœ‰å“ªäº›</h2><p>SQLä¸­çš„èšé›†å‡½æ•°ä¸€å…±åŒ…æ‹¬5ä¸ªï¼Œå¯ä»¥å¸®æˆ‘ä»¬æ±‚æŸåˆ—çš„æœ€å¤§å€¼ã€æœ€å°å€¼å’Œå¹³å‡å€¼ç­‰ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d1/15/d101026459ffa96504ba3ebb85054415.png?wh=776*326\" alt=\"\"></p><p>è¿™äº›å‡½æ•°ä½ å¯èƒ½å·²ç»æ¥è§¦è¿‡ï¼Œæˆ‘ä»¬å†æ¥ç®€å•å¤ä¹ ä¸€éã€‚æˆ‘ä»¬ç»§ç»­ä½¿ç”¨herosæ•°æ®è¡¨ï¼Œå¯¹ç‹è€…è£è€€çš„è‹±é›„æ•°æ®è¿›è¡Œèšåˆã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢æœ€å¤§ç”Ÿå‘½å€¼å¤§äº6000çš„è‹±é›„æ•°é‡ã€‚</p><pre><code>SQLï¼šSELECT COUNT(*) FROM heros WHERE hp_max &gt; 6000\n</code></pre><p>è¿è¡Œç»“æœä¸º41ã€‚</p><p>å¦‚æœæƒ³è¦æŸ¥è¯¢æœ€å¤§ç”Ÿå‘½å€¼å¤§äº6000ï¼Œä¸”æœ‰æ¬¡è¦å®šä½çš„è‹±é›„æ•°é‡ï¼Œéœ€è¦ä½¿ç”¨COUNTå‡½æ•°ã€‚</p><pre><code>SQLï¼šSELECT COUNT(role_assist) FROM heros WHERE hp_max &gt; 6000\n</code></pre><p>è¿è¡Œç»“æœæ˜¯ 23ã€‚</p><!-- [[[read_end]]] --><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæœ‰äº›è‹±é›„æ²¡æœ‰æ¬¡è¦å®šä½ï¼Œå³role_assistä¸ºNULLï¼Œè¿™æ—¶<code>COUNT(role_assist)</code>ä¼šå¿½ç•¥å€¼ä¸ºNULLçš„æ•°æ®è¡Œï¼Œè€ŒCOUNT(*)åªæ˜¯ç»Ÿè®¡æ•°æ®è¡Œæ•°ï¼Œä¸ç®¡æŸä¸ªå­—æ®µæ˜¯å¦ä¸ºNULLã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢å°„æ‰‹ï¼ˆä¸»è¦å®šä½æˆ–è€…æ¬¡è¦å®šä½æ˜¯å°„æ‰‹ï¼‰çš„æœ€å¤§ç”Ÿå‘½å€¼çš„æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Œéœ€è¦ä½¿ç”¨MAXå‡½æ•°ã€‚</p><pre><code>SQLï¼šSELECT MAX(hp_max) FROM heros WHERE role_main = 'å°„æ‰‹' or role_assist = 'å°„æ‰‹'\n</code></pre><p>è¿è¡Œç»“æœä¸º6014ã€‚</p><p>ä½ èƒ½çœ‹åˆ°ï¼Œä¸Šé¢çš„ä¾‹å­é‡Œï¼Œéƒ½æ˜¯åœ¨ä¸€æ¡SELECTè¯­å¥ä¸­ä½¿ç”¨äº†ä¸€æ¬¡èšé›†å‡½æ•°ï¼Œå®é™…ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸€æ¡SELECTè¯­å¥ä¸­è¿›è¡Œå¤šé¡¹èšé›†å‡½æ•°çš„æŸ¥è¯¢ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³çŸ¥é“å°„æ‰‹ï¼ˆä¸»è¦å®šä½æˆ–è€…æ¬¡è¦å®šä½æ˜¯å°„æ‰‹ï¼‰çš„è‹±é›„æ•°ã€å¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€æ³•åŠ›æœ€å¤§å€¼çš„æœ€å¤§å€¼ã€æ”»å‡»æœ€å¤§å€¼çš„æœ€å°å€¼ï¼Œä»¥åŠè¿™äº›è‹±é›„æ€»çš„é˜²å¾¡æœ€å¤§å€¼ç­‰æ±‡æ€»æ•°æ®ã€‚</p><p>å¦‚æœæƒ³è¦çŸ¥é“è‹±é›„çš„æ•°é‡ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯COUNT(*)å‡½æ•°ï¼Œæ±‚å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ï¼Œä»¥åŠæ€»çš„é˜²å¾¡æœ€å¤§å€¼ï¼Œæˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨çš„æ˜¯AVGã€MAXã€MINå’ŒSUMå‡½æ•°ã€‚å¦å¤–æˆ‘ä»¬è¿˜éœ€è¦å¯¹è‹±é›„çš„ä¸»è¦å®šä½å’Œæ¬¡è¦å®šä½è¿›è¡Œç­›é€‰ï¼Œä½¿ç”¨çš„æ˜¯<code>WHERE role_main = 'å°„æ‰‹' or role_assist = 'å°„æ‰‹'</code>ã€‚</p><pre><code>SQL: SELECT COUNT(*), AVG(hp_max), MAX(mp_max), MIN(attack_max), SUM(defense_max) FROM heros WHERE role_main = 'å°„æ‰‹' or role_assist = 'å°„æ‰‹'\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b9/9d/b9cbaa2af34e0b1eb74e76b60e7eaf9d.png?wh=1040*114\" alt=\"\"><br>\néœ€è¦è¯´æ˜çš„æ˜¯AVGã€MAXã€MINç­‰èšé›†å‡½æ•°ä¼šè‡ªåŠ¨å¿½ç•¥å€¼ä¸ºNULLçš„æ•°æ®è¡Œï¼ŒMAXå’ŒMINå‡½æ•°ä¹Ÿå¯ä»¥ç”¨äºå­—ç¬¦ä¸²ç±»å‹æ•°æ®çš„ç»Ÿè®¡ï¼Œå¦‚æœæ˜¯è‹±æ–‡å­—æ¯ï¼Œåˆ™æŒ‰ç…§Aâ€”Zçš„é¡ºåºæ’åˆ—ï¼Œè¶Šå¾€åï¼Œæ•°å€¼è¶Šå¤§ã€‚å¦‚æœæ˜¯æ±‰å­—åˆ™æŒ‰ç…§å…¨æ‹¼æ‹¼éŸ³è¿›è¡Œæ’åˆ—ã€‚æ¯”å¦‚ï¼š</p><pre><code>SQLï¼šSELECT MIN(CONVERT(name USING gbk)), MAX(CONVERT(name USING gbk)) FROM heros\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/e1/71/e1fa345ebcb78e686d3dd16cb075e871.png?wh=1025*118\" alt=\"\"><br>\néœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠnameå­—æ®µç»Ÿä¸€è½¬åŒ–ä¸ºgbkç±»å‹ï¼Œä½¿ç”¨<code>CONVERT(name USING gbk)</code>ï¼Œç„¶åå†ä½¿ç”¨MINå’ŒMAXå–æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹æ•°æ®è¡Œä¸­ä¸åŒçš„å–å€¼è¿›è¡Œèšé›†ï¼Œå…ˆç”¨DISTINCTå‡½æ•°å–ä¸åŒçš„æ•°æ®ï¼Œç„¶åå†ä½¿ç”¨èšé›†å‡½æ•°ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢ä¸åŒçš„ç”Ÿå‘½æœ€å¤§å€¼çš„è‹±é›„æ•°é‡æ˜¯å¤šå°‘ã€‚</p><pre><code>SQL: SELECT COUNT(DISTINCT hp_max) FROM heros\n</code></pre><p>è¿è¡Œç»“æœä¸º61ã€‚</p><p>å®é™…ä¸Šåœ¨herosè¿™ä¸ªæ•°æ®è¡¨ä¸­ï¼Œä¸€å…±æœ‰69ä¸ªè‹±é›„æ•°é‡ï¼Œç”Ÿå‘½æœ€å¤§å€¼ä¸ä¸€æ ·çš„è‹±é›„æ•°é‡æ˜¯61ä¸ªã€‚</p><p>å‡å¦‚æˆ‘ä»¬æƒ³è¦ç»Ÿè®¡ä¸åŒç”Ÿå‘½æœ€å¤§å€¼è‹±é›„çš„å¹³å‡ç”Ÿå‘½æœ€å¤§å€¼ï¼Œä¿ç•™å°æ•°ç‚¹åä¸¤ä½ã€‚é¦–å…ˆéœ€è¦å–ä¸åŒç”Ÿå‘½æœ€å¤§å€¼ï¼Œå³<code>DISTINCT hp_max</code>ï¼Œç„¶åé’ˆå¯¹å®ƒä»¬å–å¹³å‡å€¼ï¼Œå³<code>AVG(DISTINCT hp_max)</code>ï¼Œæœ€åå†é’ˆå¯¹è¿™ä¸ªå€¼ä¿ç•™å°æ•°ç‚¹ä¸¤ä½ï¼Œä¹Ÿå°±æ˜¯<code>ROUND(AVG(DISTINCT hp_max), 2)</code>ã€‚</p><pre><code>SQL: SELECT ROUND(AVG(DISTINCT hp_max), 2) FROM heros\n</code></pre><p>è¿è¡Œç»“æœä¸º6653.84ã€‚</p><p>ä½ èƒ½çœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨DISTINCTå‡½æ•°ï¼Œå°±æ˜¯å¯¹å…¨éƒ¨æ•°æ®è¿›è¡Œèšé›†ç»Ÿè®¡ã€‚å¦‚æœä½¿ç”¨äº†DISTINCTå‡½æ•°ï¼Œå°±å¯ä»¥å¯¹æ•°å€¼ä¸åŒçš„æ•°æ®è¿›è¡Œèšé›†ã€‚ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨MAXå’ŒMINå‡½æ•°ç»Ÿè®¡æ•°æ®è¡Œçš„æ—¶å€™ï¼Œä¸éœ€è¦å†é¢å¤–ä½¿ç”¨DISTINCTï¼Œå› ä¸ºä½¿ç”¨DISTINCTå’Œå…¨éƒ¨æ•°æ®è¡Œè¿›è¡Œæœ€å¤§å€¼ã€æœ€å°å€¼çš„ç»Ÿè®¡ç»“æœæ˜¯ç›¸ç­‰çš„ã€‚</p><h2>å¦‚ä½•å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå¹¶è¿›è¡Œèšé›†ç»Ÿè®¡</h2><p>æˆ‘ä»¬åœ¨åšç»Ÿè®¡çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦å…ˆå¯¹æ•°æ®æŒ‰ç…§ä¸åŒçš„æ•°å€¼è¿›è¡Œåˆ†ç»„ï¼Œç„¶åå¯¹è¿™äº›åˆ†å¥½çš„ç»„è¿›è¡Œèšé›†ç»Ÿè®¡ã€‚å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œéœ€è¦ä½¿ç”¨GROUP BYå­å¥ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æƒ³æŒ‰ç…§è‹±é›„çš„ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ç»Ÿè®¡æ¯ç»„çš„è‹±é›„æ•°é‡ã€‚</p><pre><code>SQL: SELECT COUNT(*), role_main FROM heros GROUP BY role_main\n</code></pre><p>è¿è¡Œç»“æœï¼ˆ6æ¡è®°å½•ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6b/9c/6ba58294f85edbb37499d3f28f60719c.png?wh=785*384\" alt=\"\"></p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹è‹±é›„æŒ‰ç…§æ¬¡è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ç»Ÿè®¡æ¯ç»„è‹±é›„çš„æ•°é‡ã€‚</p><pre><code>SELECT COUNT(*), role_assist FROM heros GROUP BY role_assist\n</code></pre><p>è¿è¡Œç»“æœï¼šï¼ˆ6æ¡è®°å½•ï¼‰</p><p><img src=\"https://static001.geekbang.org/resource/image/08/c0/0802ba993844e2875bd6cbbc3d4fa5c0.png?wh=788*377\" alt=\"\"></p><p>ä½ èƒ½çœ‹å‡ºå¦‚æœå­—æ®µä¸ºNULLï¼Œä¹Ÿä¼šè¢«åˆ—ä¸ºä¸€ä¸ªåˆ†ç»„ã€‚åœ¨è¿™ä¸ªæŸ¥è¯¢ç»Ÿè®¡ä¸­ï¼Œæ¬¡è¦å®šä½ä¸ºNULLï¼Œå³åªæœ‰ä¸€ä¸ªä¸»è¦å®šä½çš„è‹±é›„æ˜¯40ä¸ªã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¤šä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„ï¼Œè¿™å°±ç›¸å½“äºæŠŠè¿™äº›å­—æ®µå¯èƒ½å‡ºç°çš„æ‰€æœ‰çš„å–å€¼æƒ…å†µéƒ½è¿›è¡Œåˆ†ç»„ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦æŒ‰ç…§è‹±é›„çš„ä¸»è¦å®šä½ã€æ¬¡è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼ŒæŸ¥çœ‹è¿™äº›è‹±é›„çš„æ•°é‡ï¼Œå¹¶æŒ‰ç…§è¿™äº›åˆ†ç»„çš„è‹±é›„æ•°é‡ä»é«˜åˆ°ä½è¿›è¡Œæ’åºã€‚</p><pre><code>SELECT COUNT(*) as num, role_main, role_assist FROM heros GROUP BY role_main, role_assist ORDER BY num DESC\n</code></pre><p>è¿è¡Œç»“æœï¼šï¼ˆ19æ¡è®°å½•ï¼‰</p><p><img src=\"https://static001.geekbang.org/resource/image/35/8f/3504fa2cf288a50eb39028d1768d5c8f.png?wh=605*794\" alt=\"\"></p><h2>å¦‚ä½•ä½¿ç”¨HAVINGè¿‡æ»¤åˆ†ç»„ï¼Œå®ƒä¸WHEREçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å½“æˆ‘ä»¬åˆ›å»ºå‡ºå¾ˆå¤šåˆ†ç»„çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™å°±éœ€è¦å¯¹åˆ†ç»„è¿›è¡Œè¿‡æ»¤ã€‚ä½ å¯èƒ½é¦–å…ˆä¼šæƒ³åˆ°WHEREå­å¥ï¼Œå®é™…ä¸Šè¿‡æ»¤åˆ†ç»„æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯HAVINGã€‚HAVINGçš„ä½œç”¨å’ŒWHEREä¸€æ ·ï¼Œéƒ½æ˜¯èµ·åˆ°è¿‡æ»¤çš„ä½œç”¨ï¼Œåªä¸è¿‡WHEREæ˜¯ç”¨äºæ•°æ®è¡Œï¼Œè€ŒHAVINGåˆ™ä½œç”¨äºåˆ†ç»„ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æƒ³è¦æŒ‰ç…§è‹±é›„çš„ä¸»è¦å®šä½ã€æ¬¡è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ä¸”ç­›é€‰åˆ†ç»„ä¸­è‹±é›„æ•°é‡å¤§äº5çš„ç»„ï¼Œæœ€åæŒ‰ç…§åˆ†ç»„ä¸­çš„è‹±é›„æ•°é‡ä»é«˜åˆ°ä½è¿›è¡Œæ’åºã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦è·å–çš„æ˜¯è‹±é›„çš„æ•°é‡ã€ä¸»è¦å®šä½å’Œæ¬¡è¦å®šä½ï¼Œå³<code>SELECT COUNT(*) as num, role_main, role_assist</code>ã€‚ç„¶åæŒ‰ç…§è‹±é›„çš„ä¸»è¦å®šä½å’Œæ¬¡è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œå³<code>GROUP BY role_main, role_assist</code>ï¼ŒåŒæ—¶æˆ‘ä»¬è¦å¯¹åˆ†ç»„ä¸­çš„è‹±é›„æ•°é‡è¿›è¡Œç­›é€‰ï¼Œé€‰æ‹©å¤§äº5çš„åˆ†ç»„ï¼Œå³<code>HAVING num &gt; 5</code>ï¼Œç„¶åæŒ‰ç…§è‹±é›„æ•°é‡ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå³<code>ORDER BY num DESC</code>ã€‚</p><pre><code>SQL: SELECT COUNT(*) as num, role_main, role_assist FROM heros GROUP BY role_main, role_assist HAVING num &gt; 5 ORDER BY num DESC\n</code></pre><p>è¿è¡Œç»“æœï¼šï¼ˆ4æ¡è®°å½•ï¼‰</p><p><img src=\"https://static001.geekbang.org/resource/image/ca/61/ca9747ad58e8cf637fe352fb0cfd5761.png?wh=806*279\" alt=\"\"><br>\nä½ èƒ½çœ‹åˆ°è¿˜æ˜¯ä¸Šé¢è¿™ä¸ªåˆ†ç»„ï¼Œåªä¸è¿‡æˆ‘ä»¬æŒ‰ç…§æ•°é‡è¿›è¡Œäº†è¿‡æ»¤ï¼Œç­›é€‰äº†æ•°é‡å¤§äº5çš„åˆ†ç»„è¿›è¡Œè¾“å‡ºã€‚å¦‚æœæŠŠHAVINGæ›¿æ¢æˆäº†WHEREï¼ŒSQLåˆ™ä¼šæŠ¥é”™ã€‚å¯¹äºåˆ†ç»„çš„ç­›é€‰ï¼Œæˆ‘ä»¬ä¸€å®šè¦ç”¨HAVINGï¼Œè€Œä¸æ˜¯WHEREã€‚å¦å¤–ä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼ŒHAVINGæ”¯æŒæ‰€æœ‰WHEREçš„æ“ä½œï¼Œå› æ­¤æ‰€æœ‰éœ€è¦WHEREå­å¥å®ç°çš„åŠŸèƒ½ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨HAVINGå¯¹åˆ†ç»„è¿›è¡Œç­›é€‰ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸ªä¾‹å­ï¼Œé€šè¿‡è¿™ä¸ªä¾‹å­æŸ¥çœ‹ä¸€ä¸‹WHEREå’ŒHAVINGè¿›è¡Œæ¡ä»¶è¿‡æ»¤çš„åŒºåˆ«ã€‚ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº6000çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½ã€æ¬¡è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ä¸”æ˜¾ç¤ºåˆ†ç»„ä¸­è‹±é›„æ•°é‡å¤§äº5çš„åˆ†ç»„ï¼ŒæŒ‰ç…§æ•°é‡ä»é«˜åˆ°ä½è¿›è¡Œæ’åºã€‚</p><pre><code>SQL: SELECT COUNT(*) as num, role_main, role_assist FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main, role_assist HAVING num &gt; 5 ORDER BY num DESC\n</code></pre><p>è¿è¡Œç»“æœï¼šï¼ˆ2æ¡è®°å½•ï¼‰</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/3a/7b62b2a12ec9e66675b3da8b5b54093a.png?wh=805*173\" alt=\"\"></p><p>ä½ èƒ½çœ‹åˆ°ï¼Œè¿˜æ˜¯é’ˆå¯¹ä¸Šä¸€ä¸ªä¾‹å­çš„æŸ¥è¯¢ï¼Œåªæ˜¯æˆ‘ä»¬å…ˆå¢åŠ äº†ä¸€ä¸ªè¿‡æ»¤æ¡ä»¶ï¼Œå³ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº6000çš„è‹±é›„ã€‚è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦å…ˆä½¿ç”¨WHEREå­å¥å¯¹æœ€å¤§ç”Ÿå‘½å€¼å¤§äº6000çš„è‹±é›„è¿›è¡Œæ¡ä»¶è¿‡æ»¤ï¼Œç„¶åå†ä½¿ç”¨GROUP BYè¿›è¡Œåˆ†ç»„ï¼Œä½¿ç”¨HAVINGè¿›è¡Œåˆ†ç»„çš„æ¡ä»¶åˆ¤æ–­ï¼Œç„¶åä½¿ç”¨ORDER BYè¿›è¡Œæ’åºã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘å¯¹SQLçš„èšé›†å‡½æ•°è¿›è¡Œäº†è®²è§£ã€‚é€šå¸¸æˆ‘ä»¬è¿˜ä¼šå¯¹æ•°æ®å…ˆè¿›è¡Œåˆ†ç»„ï¼Œç„¶åå†ä½¿ç”¨èšé›†å‡½æ•°ç»Ÿè®¡ä¸åŒç»„çš„æ•°æ®æ¦‚å†µï¼Œæ¯”å¦‚æ•°æ®è¡Œæ•°ã€å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ä»¥åŠæ±‚å’Œç­‰ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨HAVINGå¯¹åˆ†ç»„è¿›è¡Œè¿‡æ»¤ï¼Œç„¶åé€šè¿‡ORDER BYæŒ‰ç…§æŸä¸ªå­—æ®µçš„é¡ºåºè¿›è¡Œæ’åºè¾“å‡ºã€‚æœ‰æ—¶å€™ä½ èƒ½çœ‹åˆ°åœ¨ä¸€æ¡SELECTè¯­å¥ä¸­ï¼Œå¯èƒ½ä¼šåŒ…æ‹¬å¤šä¸ªå­å¥ï¼Œç”¨WHEREè¿›è¡Œæ•°æ®é‡çš„è¿‡æ»¤ï¼Œç”¨GROUP BYè¿›è¡Œåˆ†ç»„ï¼Œç”¨HAVINGè¿›è¡Œåˆ†ç»„è¿‡æ»¤ï¼Œç”¨ORDER BYè¿›è¡Œæ’åºâ€¦â€¦</p><p><strong>ä½ è¦è®°ä½ï¼Œåœ¨SELECTæŸ¥è¯¢ä¸­ï¼Œå…³é”®å­—çš„é¡ºåºæ˜¯ä¸èƒ½é¢ å€’çš„ï¼Œå®ƒä»¬çš„é¡ºåºæ˜¯ï¼š</strong></p><pre><code>SELECT ... FROM ... WHERE ... GROUP BY ... HAVING ... ORDER BY ...\n</code></pre><p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨GROUP BYè¿›è¡Œåˆ†ç»„ï¼Œå¦‚æœæƒ³è®©è¾“å‡ºçš„ç»“æœæœ‰åºï¼Œå¯ä»¥åœ¨GROUP BYåä½¿ç”¨ORDER BYã€‚å› ä¸ºGROUP BYåªèµ·åˆ°äº†åˆ†ç»„çš„ä½œç”¨ï¼Œæ’åºè¿˜æ˜¯éœ€è¦é€šè¿‡ORDER BYæ¥å®Œæˆã€‚</p><p><img src=\"\" alt=\"\"></p><p>æˆ‘ä»Šå¤©å¯¹SQLçš„èšé›†å‡½æ•°ä»¥åŠSQLæŸ¥è¯¢ä¸­çš„å…³é”®å­—é¡ºåºè¿›è¡Œäº†è®²è§£ï¼Œä½†ä½ è¿˜æ˜¯éœ€è¦é€šè¿‡è®­ç»ƒåŠ æ·±ç†è§£ï¼ŒåŸºäºherosæ•°æ®è¡¨ï¼Œè¯·ä½ å†™å‡ºä¸‹é¢2ä¸ªSQLæŸ¥è¯¢è¯­å¥ï¼š</p><ol>\n<li>ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº6000çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº5çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚</li>\n<li>ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº7000çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚</li>\n</ol><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºä¸æˆ‘åˆ†äº«ä½ çš„ç­”æ¡ˆï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·åˆ‡ç£‹äº¤æµä¸€ä¸‹ã€‚</p>","comments":[{"had_liked":false,"id":110208,"user_name":"grey927","can_delete":false,"product_type":"c1","uid":1202782,"ip_address":"","ucode":"833E02ED835B4A","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/5e/a897cb0d.jpg","comment_is_top":false,"comment_ctime":1562208125,"is_pvip":false,"replies":[{"id":"39984","content":"è¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼ŒORDER BYå°±æ˜¯å¯¹è®°å½•è¿›è¡Œæ’åºã€‚å¦‚æœä½ åœ¨å‰é¢ç”¨åˆ°äº†GROUP BYï¼Œå®é™…ä¸Šæ˜¯ä¸€ç§åˆ†ç»„çš„èšåˆæ–¹å¼ï¼Œå·²ç»æŠŠä¸€ç»„çš„æ•°æ®èšåˆæˆä¸ºäº†ä¸€æ¡è®°å½•ï¼Œæ‰€ä»¥å†è¿›è¡Œæ’åºçš„æ—¶å€™ï¼Œä¹Ÿç›¸å½“äºæ˜¯å¯¹åˆ†çš„ç»„è¿›è¡Œæ’åºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1562210499,"ip_address":"","comment_id":110208,"utype":1}],"discussion_count":2,"race_medal":0,"score":"302209918845","product_id":100029501,"comment_content":"ORDER BY æ˜¯å¯¹åˆ†çš„ç»„æ’åºè¿˜æ˜¯å¯¹åˆ†ç»„ä¸­çš„è®°å½•æ’åºå‘¢ï¼Ÿ","like_count":71,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456776,"discussion_content":"è¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼ŒORDER BYå°±æ˜¯å¯¹è®°å½•è¿›è¡Œæ’åºã€‚å¦‚æœä½ åœ¨å‰é¢ç”¨åˆ°äº†GROUP BYï¼Œå®é™…ä¸Šæ˜¯ä¸€ç§åˆ†ç»„çš„èšåˆæ–¹å¼ï¼Œå·²ç»æŠŠä¸€ç»„çš„æ•°æ®èšåˆæˆä¸ºäº†ä¸€æ¡è®°å½•ï¼Œæ‰€ä»¥å†è¿›è¡Œæ’åºçš„æ—¶å€™ï¼Œä¹Ÿç›¸å½“äºæ˜¯å¯¹åˆ†çš„ç»„è¿›è¡Œæ’åºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562210499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073136,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/f0/a73607b3.jpg","nickname":"victor666","note":"","ucode":"20C9BE10E07D55","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211579,"discussion_content":"order byæ˜¯åœ¨selectè¿‡æ»¤ä¹‹å ä¸ºä»€ä¹ˆæ’åºå­—æ®µå¯ä»¥è®¾ç½®å’Œselectä¸åŒçš„å­—æ®µå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584867215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108153,"user_name":"ä¸è´Ÿ","can_delete":false,"product_type":"c1","uid":1238323,"ip_address":"","ucode":"147F5860711811","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/33/ff5c52ad.jpg","comment_is_top":false,"comment_ctime":1561687338,"is_pvip":true,"replies":[{"id":"39188","content":"åœ¨æ‰§è¡Œé¡ºåºä¸Šï¼ŒSELECTå­—æ®µåœ¨GROUP BYå’ŒHAVINGä¹‹åï¼Œä¸è¿‡åœ¨SELECTå­—æ®µä¹‹å‰ï¼Œå·²ç»è®¡ç®—äº†èšé›†å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯COUNT(*) as numã€‚èšé›†å‡½æ•°çš„è®¡ç®—åœ¨GROUP BYä¹‹åï¼ŒHAVINGä¹‹å‰","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561691880,"ip_address":"","comment_id":108153,"utype":1}],"discussion_count":4,"race_medal":1,"score":"190540248362","product_id":100029501,"comment_content":"ä¸€ä¸ªå‘ç°ï¼šè™½ç„¶ SELECT çš„æ‰§è¡Œé¡ºåºåœ¨ GROUP BY å’Œ HAVING åé¢ï¼Œä½†å¯¹äºSELECTä¸­åˆ—çš„åˆ«åéƒ½å¯ä»¥ä½¿ç”¨ã€‚<br>MySQLä¸­<br>1. &gt; SELECT COUNT(*) as num, role_main, AVG(hp_max) FROM heros<br>    -&gt; WHERE hp_max&gt;6000<br>    -&gt; GROUP BY role_main<br>    -&gt; HAVING COUNT(*)&gt;5<br>    -&gt; ORDER BY COUNT(*) DESC;<br>+-----+-----------+-------------+<br>| num | role_main | AVG(hp_max) |<br>+-----+-----------+-------------+<br>|  17 | æˆ˜å£«      |        7028 |<br>|  10 | å¦å…‹      |      8312.4 |<br>|   6 | æ³•å¸ˆ      |        6417 |<br>+-----+-----------+-------------+<br>2. &gt; SELECT COUNT(*) num, ROUND(AVG(hp_max+mp_max), 2) avg, ROUND(MAX(hp_max+mp_max), 2) max, ROUND(MIN(hp_max+mp_max), 2) min FROM heros<br>    -&gt; WHERE (hp_max+mp_max)&gt;7000<br>    -&gt; GROUP BY attack_range<br>    -&gt; ORDER BY num DESC;<br>+-----+---------+----------+---------+<br>| num | avg     | max      | min     |<br>+-----+---------+----------+---------+<br>|  36 | 8654.42 | 11036.00 | 7117.00 |<br>|  26 | 7743.77 |  8737.00 | 7025.00 |<br>+-----+---------+----------+---------+<br>","like_count":44,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455844,"discussion_content":"åœ¨æ‰§è¡Œé¡ºåºä¸Šï¼ŒSELECTå­—æ®µåœ¨GROUP BYå’ŒHAVINGä¹‹åï¼Œä¸è¿‡åœ¨SELECTå­—æ®µä¹‹å‰ï¼Œå·²ç»è®¡ç®—äº†èšé›†å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯COUNT(*) as numã€‚èšé›†å‡½æ•°çš„è®¡ç®—åœ¨GROUP BYä¹‹åï¼ŒHAVINGä¹‹å‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561691880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2962599,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","nickname":"å¹´å°‘æŒ½æ»‘ç¨½ä¸–æ— åŒ","note":"","ucode":"793DCBDE25A07B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586682,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662433867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812646,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a8/a6/825879a0.jpg","nickname":"æ€å¯†è¾¾","note":"","ucode":"82FF8EE9A37461","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350464,"discussion_content":"ä¸è¿‡æ€ä¹ˆè®²ï¼Œè¿™ç§å†™æ³•å®¹æ˜“è¯¯è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613884153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1535217,"avatar":"https://static001.geekbang.org/account/avatar/00/17/6c/f1/9ab33f89.jpg","nickname":"Geek_Song","note":"","ucode":"DCC90A6683D024","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280304,"discussion_content":"æ™®é€šåˆ—çš„åˆ«ååœ¨havingå­å¥ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591525088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108081,"user_name":"ack","can_delete":false,"product_type":"c1","uid":1440912,"ip_address":"","ucode":"69CA1233EEA8E2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg","comment_is_top":false,"comment_ctime":1561680759,"is_pvip":false,"replies":[{"id":"39158","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561685347,"ip_address":"","comment_id":108081,"utype":1}],"discussion_count":3,"race_medal":0,"score":"87461026679","product_id":100029501,"comment_content":"ç»ƒä¹ é¢˜<br>1.SELECT COUNT(*) AS num,role_main,AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC; <br>2.SELECT COUNT(*) AS num,ROUND(MAX(hp_max+mp_max),2),ROUND(AVG(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2) FROM heros WHERE hp_max+mp_max &gt; 7000 GROUP BY attack_range ORDER BY num DESC;","like_count":20,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455817,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561685347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274680,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/38/7ef1bd5d.jpg","nickname":"Victor.","note":"","ucode":"E841D981ABEE09","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46512,"discussion_content":"åˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ ï¼ˆæœ€å¤§å€¼è·Ÿæœ€å°å€¼ä¸éœ€è¦Roundï¼Œè·Ÿavgå‡½æ•°çš„ï¼Œåº”è¯¥æ˜¯è¿™æ ·å†™å§ï¼šSELECT count(*) as num,ROUND(AVG(hp_max+mp_max),2),max(hp_max+mp_max),MIN(hp_max+mp_max)FROM heros WHERE (hp_max + mp_max) >7000 GROUP BY attack_range ORDER BY num desc","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573176877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1880782,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/b2/ce/5638be2b.jpg","nickname":"Flychen","note":"","ucode":"4029A8F1D3C361","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343160,"discussion_content":"order  by  åé¢ç«Ÿç„¶å¯ä»¥ç›´æ¥ç”¨å­—æ®µçš„åˆ«åï¼Œæ¶¨å§¿åŠ¿äº†ï¼Œè®°å¾— Oracle ä¸è¡Œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610960305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149021,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1573128261,"is_pvip":false,"replies":[{"id":"62676","content":"å“ˆå“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577082862,"ip_address":"","comment_id":149021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"74587572293","product_id":100029501,"comment_content":"è®²ä¸ªæ®µå­   having  å¸¸ç”¨æ¥åšè¿‡æ»¤æ‰é‚£äº›è·‘æ¥å†’å……ç¨‹åºå‘˜çš„äººã€‚<br>ä»–ä»¬æ·±æ·±çš„éœ‡æƒŠäº†æˆ‘çš„è®¤çŸ¥ã€‚","like_count":17,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473711,"discussion_content":"å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577082862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108185,"user_name":"åƒé¥­é¥­","can_delete":false,"product_type":"c1","uid":1231549,"ip_address":"","ucode":"95CFA07CDA2957","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","comment_is_top":false,"comment_ctime":1561691851,"is_pvip":false,"replies":[{"id":"39206","content":"è°¢è°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561694071,"ip_address":"","comment_id":108185,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44511364811","product_id":100029501,"comment_content":"è®²çš„å¾ˆè¯¦ç»†äº†ï¼Œå…¥é—¨å¿…å¤‡","like_count":10,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455862,"discussion_content":"è°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561694071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108079,"user_name":"å®‰é™çš„boy","can_delete":false,"product_type":"c1","uid":1196475,"ip_address":"","ucode":"F5F44B75228A85","user_header":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","comment_is_top":false,"comment_ctime":1561680612,"is_pvip":false,"replies":[{"id":"39160","content":"ç†è§£äº†HAVINGå’ŒWHEREçš„åŒºåˆ«ï¼Œå°±äº†è§£äº†åˆ†ç»„è¿‡æ»¤å’Œæ¡ä»¶è¿‡æ»¤ã€‚è¿˜æœ‰SELECTè¯­å¥ç§çš„å…³é”®å­—çš„é¡ºåºï¼šSELECT ... FROM ... WHERE ... GROUP BY ... HAVING ... ORDER BY ...","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561685458,"ip_address":"","comment_id":108079,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35921418980","product_id":100029501,"comment_content":"whereå…ˆå¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œgroup byå†è¿›è¡Œåˆ†ç»„ã€‚è®©æˆ‘å¯¹æ•°æ®ç­›é€‰å’Œåˆ†ç»„æç„¶å¤§æ‚Ÿï¼","like_count":8,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455815,"discussion_content":"ç†è§£äº†HAVINGå’ŒWHEREçš„åŒºåˆ«ï¼Œå°±äº†è§£äº†åˆ†ç»„è¿‡æ»¤å’Œæ¡ä»¶è¿‡æ»¤ã€‚è¿˜æœ‰SELECTè¯­å¥ç§çš„å…³é”®å­—çš„é¡ºåºï¼šSELECT ... FROM ... WHERE ... GROUP BY ... HAVING ... ORDER BY ...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561685458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130027,"user_name":"å³»é“­","can_delete":false,"product_type":"c1","uid":1106202,"ip_address":"","ucode":"63AB23BADACA88","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/1a/20977779.jpg","comment_is_top":false,"comment_ctime":1567353574,"is_pvip":false,"replies":[{"id":"62794","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577092905,"ip_address":"","comment_id":130027,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31632124646","product_id":100029501,"comment_content":"å‰é¢è€å¸ˆåœ¨è¯„è®ºä¸­å›å¤è¿‡ï¼Œåœ¨group byåˆ†ç»„å’Œhavingç­›é€‰åˆ†ç»„ä¹‹é—´è¿˜æœ‰ä¸€æ­¥ä½¿ç”¨èšé›†å‡½æ•°è¿›è¡Œè®¡ç®—ï¼Œåœ¨ç›®å‰çœ‹åˆ°çš„havingéƒ½æ˜¯å¯¹coutèšé›†å‡½æ•°ç»“æœçš„ç­›é€‰ï¼Œæƒ³è¯•è¯•å¯¹å…¶ä»–èšé›†å‡½æ•°çš„ç­›é€‰ï¼Œç„¶åå¯¹è®­ç»ƒ1åšäº†ç‚¹å°æ”¹åŠ¨ï¼š<br>select count(*) as c,role_main,avg(hp_max) as v  from heros where hp_max &gt; 6000 GROUP BY role_main HAVING c &gt; 5 and v &gt; 7000 order by c DESC;","like_count":7,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465770,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577092905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200243,"user_name":"Cookie123456","can_delete":false,"product_type":"c1","uid":1913261,"ip_address":"","ucode":"F9EF63C38F8976","user_header":"","comment_is_top":false,"comment_ctime":1585562073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27355365849","product_id":100029501,"comment_content":"ç¬¬äºŒä¸ªé—®é¢˜çš„ç­”æ¡ˆåˆšå¼€å§‹å†™é”™äº†ï¼Œwhereåé¢æ¡ä»¶å†™æˆäº†sumï¼ˆhp_max + mp_max ï¼‰&gt;7000,æ‰§è¡Œå‡ºé”™äº†ï¼Œæ­¤æ—¶è¡ç”Ÿäº†ä¸€ä¸ªé—®é¢˜ï¼Œwhereåé¢ä¸å¯ä»¥å†™èšåˆå‡½æ•°ï¼Œä¹Ÿå°±æ„å‘³ç€havingçš„è¯ç”Ÿï¼Œå…¶æ¬¡SQLè¯­å¥çš„æ‰§è¡Œé¡ºåºä¹Ÿè¡¨æ˜ï¼Œwhereåé¢æ˜¯ä¸å¯ä»¥åèšåˆå‡½æ•°çš„<br>SELECT<br>\t\tCOUNT( * ) AS num,<br>\t\tROUND( avg( hp_max + mp_max ),2 ),<br>\t\tROUND( max( hp_max + mp_max ), 2 ),<br>\t\tROUND( max( hp_max + mp_max ), 2 ) <br>\tFROM<br>\t\theros <br>\tWHERE<br>\t\thp_max + mp_max &gt; 7000 <br>\tGROUP BY<br>\t\tattack_range<br>\tORDER BY<br>\tnum DESC","like_count":6},{"had_liked":false,"id":124998,"user_name":"bear","can_delete":false,"product_type":"c1","uid":1168164,"ip_address":"","ucode":"EADC2BB6075EEC","user_header":"https://static001.geekbang.org/account/avatar/00/11/d3/24/58c0a3dd.jpg","comment_is_top":false,"comment_ctime":1566038695,"is_pvip":false,"replies":[{"id":"47672","content":"æ„Ÿè°¢","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1566901491,"ip_address":"","comment_id":124998,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23040875175","product_id":100029501,"comment_content":"Having éƒ¨åˆ†ç²¾å½©ï¼ŒèµğŸ‘","like_count":5,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463395,"discussion_content":"æ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566901491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108142,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1561686619,"is_pvip":false,"replies":[{"id":"39181","content":"æ‚¨å¥½ï¼Œæ–‡ç« å·²è¿›è¡Œæ›´æ­£ï¼Œè°¢è°¢æ‚¨çš„åé¦ˆã€‚","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ä½•æ˜Œæ¢…","uid":"1165037","ctime":1561688731,"ip_address":"","comment_id":108142,"utype":2}],"discussion_count":1,"race_medal":0,"score":"23036523099","product_id":100029501,"comment_content":"æœ‰ä¸ªé”™è¯¯ï¼š<br>æ–‡ä¸­â€œæ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦æŒ‰ç…§è‹±é›„çš„ä¸»è¦å®šä½ã€æ¬¡è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼ŒæŸ¥çœ‹è¿™äº›è‹±é›„çš„æ•°é‡ï¼Œå¹¶æŒ‰ç…§è¿™äº›åˆ†ç»„çš„è‹±é›„æ•°é‡ä»é«˜åˆ°ä½è¿›è¡Œæ’åºã€‚â€çš„SQLè¯­å¥ï¼šSQL: SELECT COUNT(*), role_main, role_assist FROM heros GROUP BY role_main, role_assist ORDER BY num DESC<br><br>åœ¨MySQLé‡Œä¼šæŠ¥é”™ï¼š[Err] 1054 - Unknown column &#39;num&#39; in &#39;order clause&#39;<br><br>è¦æ”¹ä¸ºï¼šSELECT COUNT(*) as num, role_main, role_assist FROM heros GROUP BY role_main, role_assist ORDER BY num DESC;","like_count":5,"discussions":[{"author":{"id":1165037,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c6/ed/89a2dc13.jpg","nickname":"ä¸¢äº†ä¸ªä¸¢ä¸¢ä¸¢","note":"","ucode":"BDD7E97E0E5E96","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455840,"discussion_content":"æ‚¨å¥½ï¼Œæ–‡ç« å·²è¿›è¡Œæ›´æ­£ï¼Œè°¢è°¢æ‚¨çš„åé¦ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561688731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108176,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1561691137,"is_pvip":false,"replies":[{"id":"39215","content":"SQLæ­£ç¡®ï¼Œæœ€åç»“æœè´´çš„ä¸å¤ªå®Œæ•´","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561700189,"ip_address":"","comment_id":108176,"utype":1}],"discussion_count":4,"race_medal":0,"score":"14446593025","product_id":100029501,"comment_content":"&#47;*<br>1.ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº6000çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº5çš„åˆ†ç»„ï¼Œ<br>æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>*&#47;<br>SELECT count(*) as num, role_main, AVG(hp_max)<br>FROM heros <br>WHERE hp_max &gt; 6000 <br>GROUP BY role_main <br>HAVING num &gt; 5 <br>ORDER BY num DESC <br><br>num role_main AVG(hp_max)<br>------------------------------------<br>17\tæˆ˜å£«\t7028<br>10\tå¦å…‹\t8312.4<br>6\tæ³•å¸ˆ\t6417<br><br>&#47;*<br>2.ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº7000çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œ<br>æ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œ<br>å¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br>*&#47;<br>SELECT count(*) as num, ROUND(AVG(hp_max + mp_max), 2), MAX(hp_max + mp_max), MIN(hp_max + mp_max)<br>FROM heros <br>WHERE hp_max + mp_max &gt; 7000 <br>GROUP BY attack_range<br>HAVING num &gt; 5 <br>ORDER BY num DESC <br><br>num, ROUND(AVG(hp_max + mp_max), 2), MAX(hp_max + mp_max), MIN(hp_max + mp_max)<br>------------------------------------------------------------------------<br>62\t8272.53\t11036\t7025","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455858,"discussion_content":"SQLæ­£ç¡®ï¼Œæœ€åç»“æœè´´çš„ä¸å¤ªå®Œæ•´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561700189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208807,"avatar":"","nickname":"zcyghzy","note":"","ucode":"2B02EB5943B502","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":702,"discussion_content":"ç¬¬äºŒé¢˜æ²¡æœ‰è¦æ±‚è¦æ±‚å¯¹mun>5è¿™ä¸ªç­›é€‰å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561970428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1208807,"avatar":"","nickname":"zcyghzy","note":"","ucode":"2B02EB5943B502","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5924,"discussion_content":"æ˜¯çš„ æ²¡è¦æ±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566538865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":702,"ip_address":""},"score":5924,"extra":""}]},{"author":{"id":1051663,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","nickname":"mickey","note":"","ucode":"8B490C2DDE4010","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559,"discussion_content":"å“ªé‡Œä¸å®Œæ•´ï¼Ÿä¸æ˜¯å››ä¸ªå€¼å—ï¼Ÿ62     8272.53     11036     7025","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561706453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108157,"user_name":"Taozi","can_delete":false,"product_type":"c1","uid":1021926,"ip_address":"","ucode":"DD6567A31B3E33","user_header":"","comment_is_top":false,"comment_ctime":1561688134,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14446590022","product_id":100029501,"comment_content":"ç»ƒä¹ 2ä¸­åå¤å‡ºç°çš„hp_max+mp_maxå¯ä»¥ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":2882440,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/fb/88/00cb17bf.jpg","nickname":"æ½œé¾™","note":"","ucode":"5B77E245591D7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543587,"discussion_content":"æˆ‘è§‰å¾—å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641214748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"è“¦ç„¶å›é¦–","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348047,"discussion_content":"SELECT COUNT(*) AS num, ROUND(AVG(hp_max+mp_max as t), 2), ROUND(MAX(t), 2), ROUND(MIN(t), 2)\nFROM heros\nWHERE t > 7000\nGROUP BY attack_range\nORDER BY num DESC;\n\nå®éªŒäº†ä¸€ä¸‹ï¼Œç›´æ¥è¿™æ ·å–åˆ«åï¼Œç›´æ¥æŠ¥é”™äº†ï¼Œå“ˆå“ˆï¼\n[SQL] SELECT COUNT(*) AS num, ROUND(AVG(hp_max+mp_max as t), 2), ROUND(MAX(t), 2), ROUND(MIN(t), 2)\nFROM heros\nWHERE t > 7000\nGROUP BY attack_range\nORDER BY num DESC;\n[Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;as t), 2), ROUND(MAX(t), 2), ROUND(MIN(t), 2)\nFROM heros\nWHERE t > 7000\nGROUP&#39; at line 1\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612413049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108147,"user_name":"åœ†å­è›‹","can_delete":false,"product_type":"c1","uid":1585794,"ip_address":"","ucode":"9E8FE5D4DAC79E","user_header":"https://static001.geekbang.org/account/avatar/00/18/32/82/273a44cd.jpg","comment_is_top":false,"comment_ctime":1561686844,"is_pvip":false,"replies":[{"id":"39189","content":"COUNT(*)åé¢åº”è¯¥æœ‰ as num","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561691899,"ip_address":"","comment_id":108147,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14446588732","product_id":100029501,"comment_content":"1.SELECT COUNT(*) as num,role_main,AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC; <br>2.SELECT COUNT(*) as num,ROUND(MAX(hp_max+mp_max),2),ROUND(AVG(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2) FROM heros WHERE (hp_max+mp_max) &gt; 7000 GROUP BY attack_range ORDER BY num DESC;<br>è€å¸ˆåœ¨â€œå¦‚ä½•å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå¹¶è¿›è¡Œèšé›†ç»Ÿè®¡â€çš„ç¬¬ä¸‰ä¸ªä¾‹å­é‡Œï¼ŒCOUNT(*) åé¢æ²¡æœ‰åŠ  as numï¼Œä½†æ˜¯ ORDER BY é‡Œç›´æ¥å‡ºç°äº† numï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455843,"discussion_content":"COUNT(*)åé¢åº”è¯¥æœ‰ as num","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561691899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279349,"user_name":"å•µå•µ","can_delete":false,"product_type":"c1","uid":1118843,"ip_address":"","ucode":"627A3E72DBFF79","user_header":"https://static001.geekbang.org/account/avatar/00/11/12/7b/5da66a2f.jpg","comment_is_top":false,"comment_ctime":1613726843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10203661435","product_id":100029501,"comment_content":"å»ºè®®å°†WHEREå’ŒHAVINGçš„åŒºåˆ«æè¿°æ›´åŠ è¯¦ç»†ä¸€äº›ï¼Œç”šè‡³å¯ä»¥å¢åŠ ä¸€äº›ç¤ºä¾‹ï¼Œæ–¹ä¾¿ç†è§£ã€‚<br>1ã€WHEREé’ˆå¯¹çš„æ˜¯è¡¨æˆ–è§†å›¾ï¼ŒWHEREåˆ¤æ–­çš„å­—æ®µå¯ä»¥æ˜¯è¡¨æˆ–è§†å›¾ä¸­ä»»æ„ä¸€ä¸ªå­—æ®µï¼Œä¸èƒ½ä½¿ç”¨å‡½æ•°è¿ç®—å¦‚MAX(`hp_max`) &gt; 100ç­‰ã€‚<br>2ã€HAVINGé’ˆå¯¹çš„æ˜¯åˆ†ç»„ï¼ŒHAVINGåˆ¤æ–­çš„å­—æ®µåªèƒ½æ˜¯åˆ†ç»„çš„åˆ—ã€‚ä¾‹å¦‚SELECT `hp_max` FROM `heros` GROUP BY `role_assist` HAVING MAX(`mp_max`) &gt; 100; å°±æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºåˆ†ç»„åˆ—ä¸­ä¸åŒ…å«`mp_max`ã€‚HAVINGæ˜¯å¯ä»¥ä½¿ç”¨å‡½æ•°è¿ç®—çš„ï¼Œä¾‹å¦‚SELECT `hp_max` FROM `heros` GROUP BY `role_assist` HAVING MAX(`hp_max`) &gt; 100; å°±æ˜¯å¯¹çš„ã€‚","like_count":2},{"had_liked":false,"id":108439,"user_name":"supermouse","can_delete":false,"product_type":"c1","uid":1321860,"ip_address":"","ucode":"88072D5F881827","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/84/07f0c0d6.jpg","comment_is_top":false,"comment_ctime":1561773247,"is_pvip":false,"replies":[{"id":"39293","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561794641,"ip_address":"","comment_id":108439,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151707839","product_id":100029501,"comment_content":"æ€è€ƒé¢˜ 1ï¼š<br>SELECT <br>    COUNT(*) AS num, role_main, AVG(hp_max)<br>FROM<br>    heros<br>WHERE<br>    hp_max &gt; 6000<br>GROUP BY role_main<br>HAVING num &gt; 5<br>ORDER BY num DESC;<br>æ€è€ƒé¢˜ 2ï¼š<br>SELECT <br>    COUNT(*) AS num,<br>    attack_range,<br>    ROUND(AVG(hp_max + mp_max), 2),<br>    ROUND(MAX(hp_max + mp_max), 2),<br>    ROUND(MIN(hp_max + mp_max), 2)<br>FROM<br>    heros<br>WHERE<br>    hp_max + mp_max &gt; 7000<br>GROUP BY attack_range<br>ORDER BY num DESC;","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455976,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561794641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108192,"user_name":"å¤ªç²¾","can_delete":false,"product_type":"c1","uid":1419939,"ip_address":"","ucode":"7B0F1B090ECF0F","user_header":"https://static001.geekbang.org/account/avatar/00/15/aa/a3/0b7f0334.jpg","comment_is_top":false,"comment_ctime":1561693256,"is_pvip":false,"replies":[{"id":"39213","content":"æ­£ç¡® ä¸è¿‡COUNT(*)å°±ä¸éœ€è¦ç”¨ROUNDäº†","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561700097,"ip_address":"","comment_id":108192,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151627848","product_id":100029501,"comment_content":"SELECT COUNT(*) AS num, role_main, AVG(hp_max)  AS avg_max FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC;<br>SELECT ROUND((COUNT(*)),2) AS num, ROUND((AVG(hp_max+mp_max)),2) AS heros_avg, ROUND((MAX(hp_max+mp_max)),2) AS max_avg, ROUND((MIN(hp_max+mp_max)),2) AS min_avg FROM heros WHERE (hp_max+mp_max) &gt; 7000 GROUP BY attack_range ORDER BY num desc;<br>","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455865,"discussion_content":"æ­£ç¡® ä¸è¿‡COUNT(*)å°±ä¸éœ€è¦ç”¨ROUNDäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561700097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280649,"user_name":"Geek_157522","can_delete":false,"product_type":"c1","uid":1989454,"ip_address":"","ucode":"B10B4A4226C66A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIZpAiabrHDmPye39vFLPibWtlkcEVlOeufJ14uYACPamfZh0urvsumJvkalFUkDodqTescgj4j7tw/132","comment_is_top":false,"comment_ctime":1614305252,"is_pvip":false,"replies":[{"id":"102013","content":"ç¬¬ä¸€ä¸ªæ­£ç¡®ã€‚<br>ç¬¬äºŒä¸ªçš„ attack_max æ”¹æˆ attack_range å¯ä»¥è¿è¡ŒæˆåŠŸã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1614521178,"ip_address":"","comment_id":280649,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5909272548","product_id":100029501,"comment_content":"ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>SELECT COUNT(*) as num, role_main, AVG(hp_max)FROM heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num&gt;5  ORDER BY  num DESC<br>ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000 çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br>SELECT COUNT(*) as num, ROUND(AVG(hp_max+mp_max),2)ï¼ŒROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2)FROM heros WHERE (hp_max+mp_max)&gt;7000 GROUP BY attack_max  ORDER BY  num DESC<br><br>","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516164,"discussion_content":"ç¬¬ä¸€ä¸ªæ­£ç¡®ã€‚\nç¬¬äºŒä¸ªçš„ attack_max æ”¹æˆ attack_range å¯ä»¥è¿è¡ŒæˆåŠŸã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614521178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359343,"user_name":"nature","can_delete":false,"product_type":"c1","uid":1235319,"ip_address":"åŒ—äº¬","ucode":"A583DFD4F80EA6","user_header":"","comment_is_top":false,"comment_ctime":1665458846,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1665458846","product_id":100029501,"comment_content":"é™ˆè€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®æœ‰å…³äºSum if Count ifçš„ç›¸å…³è®²è§£å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":357730,"user_name":"lgy","can_delete":false,"product_type":"c1","uid":1902819,"ip_address":"å¹¿ä¸œ","ucode":"4F3997E5C259FF","user_header":"https://static001.geekbang.org/account/avatar/00/1d/08/e3/77b9a85e.jpg","comment_is_top":false,"comment_ctime":1663584957,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663584957","product_id":100029501,"comment_content":"<br>SELECT COUNT(*) as num, role_main, AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC","like_count":0},{"had_liked":false,"id":356577,"user_name":"å¹´å°‘æŒ½æ»‘ç¨½ä¸–æ— åŒ","can_delete":false,"product_type":"c1","uid":2962599,"ip_address":"å››å·","ucode":"793DCBDE25A07B","user_header":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","comment_is_top":false,"comment_ctime":1662434174,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662434174","product_id":100029501,"comment_content":"# ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>SELECT COUNT(*) AS num, role_main, AVG(hp_max)<br>FROM heros WHERE hp_max &gt; 6000<br>GROUP BY role_main HAVING num &gt; 5<br>ORDER BY num DESC<br><br># ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000 çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br>SELECT COUNT(*) AS num, ROUND(AVG(hp_max + mp_max),2), ROUND(MAX(hp_max + mp_max),2), ROUND(MIN(hp_max + mp_max),2)<br>FROM heros WHERE (hp_max + mp_max) &gt; 7000<br>GROUP BY attack_range<br>ORDER BY num DESC","like_count":0},{"had_liked":false,"id":329304,"user_name":"åˆ˜å…ƒå…ƒ","can_delete":false,"product_type":"c1","uid":1986190,"ip_address":"","ucode":"6BC89AD9D9221D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqGvcr3Yv6BWXnLZn0nkVG24nvEuRkwEtzBia1j36NXPrzHe0IspvsY6rsNEELbUMeOlFTkvWmXakA/132","comment_is_top":false,"comment_ctime":1641280611,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641280611","product_id":100029501,"comment_content":"å¯¹ç¬¬äºŒé¢˜çš„å›ç­”ï¼ˆDBMSï¼šORACLEï¼‰ï¼š<br><br>SELECT <br>\tATTACK_RANGE,<br>\tCOUNT(1) num, <br>\tROUND(AVG(HP_MAX + MP_MAX),2) avg_hm_max,<br>\tMAX(HP_MAX + MP_MAX) mx_hm_max,<br>\tMIN(HP_MAX + MP_MAX) mi_hm_max <br>FROM HEROS <br>WHERE <br>\t(HP_MAX + MP_MAX) &gt; 7000 <br>GROUP BY ATTACK_RANGE <br>ORDER BY num DESC;<br><br>æŸ¥è¯¢ç»“æœï¼š<br>ATTACK_RANGE  |  NUM |  AVG_HM_MAX  |  MX_HM_MAX  |  MI_HM_MAX<br>        è¿‘æˆ˜\t              36\t    8654.42\t    11036\t              7117<br>        è¿œç¨‹\t              26\t    7743.77\t             8737\t             7025","like_count":0},{"had_liked":false,"id":317878,"user_name":"ï½€ã„šÎ±ãƒ³Î¾Î¹","can_delete":false,"product_type":"c1","uid":2086571,"ip_address":"","ucode":"6DD34AF352F8D5","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d6/ab/cad4830c.jpg","comment_is_top":false,"comment_ctime":1635002045,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635002045","product_id":100029501,"comment_content":"â€œå¦å¤–ä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼ŒHAVING æ”¯æŒæ‰€æœ‰ WHERE çš„æ“ä½œï¼Œå› æ­¤æ‰€æœ‰éœ€è¦ WHERE å­å¥å®ç°çš„åŠŸèƒ½ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨ HAVING å¯¹åˆ†ç»„è¿›è¡Œç­›é€‰ã€‚â€è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":310635,"user_name":"Soul of the Dragon","can_delete":false,"product_type":"c1","uid":2438011,"ip_address":"","ucode":"21603099E51B8A","user_header":"https://static001.geekbang.org/account/avatar/00/25/33/7b/9e012181.jpg","comment_is_top":false,"comment_ctime":1630812356,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630812356","product_id":100029501,"comment_content":"ç»ƒä¹ 1ï¼šSELECT COUNT(*) as num, role_main, AVG(hp_max) FROM heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC<br>ç»ƒä¹ 2ï¼šSELECT COUNT(*) as num, ROUND(AVG(hp_max+mp_max), 2), ROUND(MAX(hp_max+mp_max),2), (MIN(hp_max+mp_max),2) FROM heros WHERE (hp_max+mp_max)&gt;7000 GROUP BY attack_range ORDER BY num DESC","like_count":0},{"had_liked":false,"id":301474,"user_name":"Cy23","can_delete":false,"product_type":"c1","uid":1591293,"ip_address":"","ucode":"8DC561C5151758","user_header":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","comment_is_top":false,"comment_ctime":1625711018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625711018","product_id":100029501,"comment_content":"SELECT COUNT(*) as num, role_main, hp_max FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC;<br><br>SELECT COUNT(*) as num, ROUND(AVG(hp_max + mp_max), 2), ROUND(MAX(hp_max + mp_max), 2), ROUND(MIN(hp_max + mp_max), 2) FROM heros WHERE (hp_max + mp_max) &gt; 7000 GROUP BY attack_range ORDER BY num DESC;<br><br>","like_count":0},{"had_liked":false,"id":301391,"user_name":"ç½—","can_delete":false,"product_type":"c1","uid":2682153,"ip_address":"","ucode":"1FE714B9903109","user_header":"https://static001.geekbang.org/account/avatar/00/28/ed/29/33623ca0.jpg","comment_is_top":false,"comment_ctime":1625658877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625658877","product_id":100029501,"comment_content":"SELECT COUNT(*) as num, role_main, AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC;<br><br>SELECT COUNT(*) as num, ROUND(AVG(mp_max + hp_max),2), ROUND(MAX(mp_max + hp_max), 2), ROUND(MIN(mp_max + hp_max), 2) FROM heros WHERE (hp_max + mp_max) &gt; 7000 GROUP BY attack_range HAVING num &gt; 5 ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":296718,"user_name":"éƒæ–¹æ—","can_delete":false,"product_type":"c1","uid":1130275,"ip_address":"","ucode":"8ABEAFDA815DDE","user_header":"https://static001.geekbang.org/account/avatar/00/11/3f/23/8ff389d2.jpg","comment_is_top":false,"comment_ctime":1623129145,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623129145","product_id":100029501,"comment_content":"-- ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>SELECT count(*) num, role_main, AVG(hp_max) FROM heros GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC<br><br>-- ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000 çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br>SELECT count(*) num, ROUND(AVG(hp_max + mp_max),2), MAX(hp_max), MAX(mp_max) FROM heros WHERE (hp_max + mp_max) &gt; 7000  GROUP BY attack_range ORDER BY num DESC","like_count":0},{"had_liked":false,"id":296278,"user_name":"ss","can_delete":false,"product_type":"c1","uid":1073156,"ip_address":"","ucode":"C1926C165FB8C5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqibj1G9GJGMXkNAia83ESAqbCTgcIA5UyqUJN27yvXhAgpIeL9UyEkwY1jwsQlnqcv4iasoLdZkBbeA/132","comment_is_top":false,"comment_ctime":1622877584,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622877584","product_id":100029501,"comment_content":"äº¤ä½œä¸šï¼š<br>SELECT COUNT(*) as num, role_main, avg(hp_max) FROM heros where hp_max&gt;6000 GROUP BY role_main having num&gt;5 order BY num desc;<br><br>SELECT count(*) as num, round(avg(hp_max+mp_max),2), round( max(hp_max+mp_max),2),  round(min(hp_max+mp_max),2) from heros where hp_max+mp_max&gt;7000 group by attack_range order BY num desc;<br>","like_count":0},{"had_liked":false,"id":295838,"user_name":"å¼ é™","can_delete":false,"product_type":"c1","uid":2640790,"ip_address":"","ucode":"C3586FA4E0FD4A","user_header":"","comment_is_top":false,"comment_ctime":1622616535,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622616535","product_id":100029501,"comment_content":"#ç»ƒä¹ 1<br>SELECT role_main,COUNT(*) as heronum,AVG(hp_max)<br>FROM heros<br>WHERE hp_max &gt;=6000<br>GROUP BY role_main<br>HAVING heronum &gt;=5<br>ORDER BY heroum DESC<br>#ç»ƒä¹ 2<br>SELECT COUNT(*) AS heronum,ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2)<br>FROM heros<br>WHERE hp_max+mp_max&gt;=7000<br>GROUP BY attack_range<br>ORDER BY heronum DESC","like_count":0},{"had_liked":false,"id":294186,"user_name":"å®Œç¾åšæŒ","can_delete":false,"product_type":"c1","uid":1919541,"ip_address":"","ucode":"AE0261D8DDEF64","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","comment_is_top":false,"comment_ctime":1621822571,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621822571","product_id":100029501,"comment_content":"mysql&gt; SELECT COUNT(*) as num, ROUND(AVG(hp_max+mp_max),2), ROUND(MIN(hp_max+mp_max),2), ROUND(MAX(hp_max+mp_max),2) FROM heros<br>    -&gt; WHERE (hp_max+mp_max)&gt;7000<br>    -&gt; GROUP BY attack_range<br>    -&gt; ORDER BY num DESC;<br>+-----+-----------------------------+-----------------------------+-----------------------------+<br>| num | ROUND(AVG(hp_max+mp_max),2) | ROUND(MIN(hp_max+mp_max),2) | ROUND(MAX(hp_max+mp_max),2) |<br>+-----+-----------------------------+-----------------------------+-----------------------------+<br>|  36 |                     8654.42 |                        7117 |                       11036 |<br>|  26 |                     7743.77 |                        7025 |                        8737 |<br>+-----+-----------------------------+-----------------------------+-----------------------------+<br>2 rows in set (0.00 sec)","like_count":0},{"had_liked":false,"id":293027,"user_name":"ä»Šæ—¥å®‰å¦ï¼Ÿ","can_delete":false,"product_type":"c1","uid":2620207,"ip_address":"","ucode":"9349CC7E8F386E","user_header":"https://static001.geekbang.org/account/avatar/00/27/fb/2f/57862772.jpg","comment_is_top":false,"comment_ctime":1621160183,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621160183","product_id":100029501,"comment_content":"éŸ³é¢‘è¯»çš„å¤ªå¿«äº†ï¼Œéƒ½ä¸å¸¦å–˜æ°”çš„ï¼Œå°¤å…¶æ˜¯æœ‰ä»£ç çš„æ—¶å€™ï¼Œç›´æ¥è·³è¿‡ï¼Œè·Ÿç€éŸ³é¢‘æ ¹æœ¬çœ‹ä¸è¿‡æ¥","like_count":0},{"had_liked":false,"id":289505,"user_name":"åˆ˜é¹","can_delete":false,"product_type":"c1","uid":2064117,"ip_address":"","ucode":"518507D9F2EF58","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/lQAcCTVoe0L9qKjwibB4U60TX2oibPic2mye29IT1mrkMvadBtDme1mcxic9rQSF48YUAOicJ5fdE2cfJahJyAz5HwQ/132","comment_is_top":false,"comment_ctime":1619057185,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619057185","product_id":100029501,"comment_content":"group byé‚£ä¸€æ®µé‡Œï¼Œä¸ºä»€ä¹ˆgroup by role_assistæ—¶ä¼šæ˜¾ç¤ºNULLç»„ï¼Œè€Œgroup by role_main,role_assistæ—¶ï¼Œrole_assiståˆ—ä¸ºNULLçš„ç»„ä¸æ˜¾ç¤ºå‡ºNULLæ¥å‘¢","like_count":0},{"had_liked":false,"id":286723,"user_name":"è“è‰²è““è•¾å¸½","can_delete":false,"product_type":"c1","uid":1016822,"ip_address":"","ucode":"8C28E204DE298D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/f6/a1e7403a.jpg","comment_is_top":false,"comment_ctime":1617526801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617526801","product_id":100029501,"comment_content":"select count(role_main) as num, role_main, avg(hp_max) from heros where hp_max &gt; 6000 group by role_main having num &gt; 5 order by num desc;","like_count":0},{"had_liked":false,"id":283011,"user_name":"LQL","can_delete":false,"product_type":"c1","uid":2429115,"ip_address":"","ucode":"D4169E670369A5","user_header":"https://static001.geekbang.org/account/avatar/00/25/10/bb/5d3e72ed.jpg","comment_is_top":false,"comment_ctime":1615517414,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1615517414","product_id":100029501,"comment_content":"æˆ‘æƒ³è¦è¡¨çš„æ¸…å•ï¼Œå¯¼å…¥SQL","like_count":0,"discussions":[{"author":{"id":2625248,"avatar":"https://static001.geekbang.org/account/avatar/00/28/0e/e0/5c64b9c4.jpg","nickname":"åˆ˜æŸåˆ˜","note":"","ucode":"99348284AA4373","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378784,"discussion_content":"ç¬¬ä¸€ç« æœ‰githubçš„åœ°å€ç«‹é©¬æœ‰å¯¹åº”çš„å»ºè¡¨sqlè¯­å¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623400638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282403,"user_name":"é±¼å¤•å­","can_delete":false,"product_type":"c1","uid":1747628,"ip_address":"","ucode":"8DC691FF867A60","user_header":"https://static001.geekbang.org/account/avatar/00/1a/aa/ac/77294bc1.jpg","comment_is_top":false,"comment_ctime":1615215663,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1615215663","product_id":100029501,"comment_content":"å‰é¢è¯¾ç¨‹jè®²çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š<br>æ‰§è¡Œé¡ºåºï¼š<br>SELECT DISTINCT player_id, player_name, count(*) as num #é¡ºåº5<br>FROM player JOIN team ON player.team_id = team.team_id #é¡ºåº1<br>WHERE height &gt; 1.80 #é¡ºåº2<br>GROUP BY player.team_id #é¡ºåº3<br>HAVING num &gt; 2 #é¡ºåº4<br>ORDER BY num DESC #é¡ºåº6<br>LIMIT 2 #é¡ºåº7<br><br>å¯¹é¡ºåº4å’Œé¡ºåº5åœ¨æœ¬èŠ‚è¯¾æœ‰ç‚¹ç–‘é—®ï¼Œå¦‚æœæ˜¯HAVINGå…ˆæ‰§è¡Œï¼ŒSELECT COUNT(*) as numåæ‰§è¡Œï¼Œå¦‚ä½•èƒ½åœ¨é¡ºåº5æ‰§è¡Œå‰ï¼Œé¡ºåº4èƒ½æå‰è·å–å€¼é¡ºåº5numçš„å€¼?<br>SQL: SELECT COUNT(*) as num, role_main, role_assist <br>FROM heros <br>GROUP BY role_main, role_assist <br>HAVING num &gt; 5 <br>ORDER BY num DESC","like_count":0},{"had_liked":false,"id":277441,"user_name":"è“¦ç„¶å›é¦–","can_delete":false,"product_type":"c1","uid":1172090,"ip_address":"","ucode":"B17658DCFE6402","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","comment_is_top":false,"comment_ctime":1612413782,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1612413782","product_id":100029501,"comment_content":"mysql&gt; SELECT name, role_main FROM heros GROUP BY role_main;<br>+--------+-----------+<br>| name   | role_main |<br>+--------+-----------+<br>| å¤ä¾¯æƒ‡ | å¦å…‹      |<br>| é’Ÿæ— è‰³ | æˆ˜å£«      |<br>| èŠˆæœˆ   | æ³•å¸ˆ      |<br>| åº„å‘¨   | è¾…åŠ©      |<br>| åç¾¿   | å°„æ‰‹      |<br>| æ©˜çŸ³äº¬ | åˆºå®¢      |<br>+--------+-----------+<br>6 rows in set<br>","like_count":0},{"had_liked":false,"id":277438,"user_name":"è“¦ç„¶å›é¦–","can_delete":false,"product_type":"c1","uid":1172090,"ip_address":"","ucode":"B17658DCFE6402","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","comment_is_top":false,"comment_ctime":1612412551,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1612412551","product_id":100029501,"comment_content":"è€å¸ˆï¼Œçœ‹åˆ°ç•™è¨€ä¸­è¿™æ ·çš„SQLè¯­å¥ï¼š<br>SELECT COUNT(*) as num, role_main, AVG(hp_max) FROM heros<br>    -&gt; WHERE hp_max&gt;6000<br>    -&gt; GROUP BY role_main<br>    -&gt; HAVING COUNT(*)&gt;5<br>    -&gt; ORDER BY COUNT(*) DESC;<br>è¯·æ•™ä¸€ä¸‹ï¼Œè¿™é‡Œï¼ŒCOUNT(*)ä¼šè¢«å¤šæ¬¡è®¡ç®—å—ï¼Ÿè¿˜æ˜¯è¯´DBMSä¼šç»è¿‡ä¼˜åŒ–ï¼Œåªè®¡ç®—ä¸€æ¬¡ï¼Ÿ","like_count":0},{"had_liked":false,"id":277437,"user_name":"è“¦ç„¶å›é¦–","can_delete":false,"product_type":"c1","uid":1172090,"ip_address":"","ucode":"B17658DCFE6402","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","comment_is_top":false,"comment_ctime":1612412238,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1612412238","product_id":100029501,"comment_content":"å› ä¸ºGROUP BY æœ€ç»ˆä¸€ä¸ªåˆ†ç»„åªèƒ½æ˜¾ç¤ºä¸€æ¡è®°å½•ï¼Œå¦‚æœæ˜¯æƒ³è¦æŠŠç›¸åŒçš„å­—æ®µçš„æ‰€æœ‰æ•°æ®è¡Œæ˜¾ç¤ºåœ¨ä¸€èµ·ï¼Œç”¨GROUP BYæ˜¯è¾¾ä¸åˆ°æ•ˆæœçš„ï¼Œç”¨ORDER BY å¯ä»¥è¾¾åˆ°ç›®çš„ï¼Œå®é™…ä¸Šæ˜¯æ’åºäº†ï¼Œä½†æ•ˆæœä¸Šæ˜¯åˆ†ç»„äº†ï¼","like_count":0},{"had_liked":false,"id":275502,"user_name":"çš“æ˜Š","can_delete":false,"product_type":"c1","uid":2288986,"ip_address":"","ucode":"8CCCF3700DAC3E","user_header":"https://static001.geekbang.org/account/avatar/00/22/ed/5a/a7687583.jpg","comment_is_top":false,"comment_ctime":1611565189,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611565189","product_id":100029501,"comment_content":"select attack_range ,count(*) as num,<br>avg(distinct(hp_max+mp_max)),<br>max(hp_max+mp_max),<br>min(hp_max+mp_max)<br>from heros <br>where hp_max+mp_max&gt;7000<br>group by attack_range <br>order by num desc;","like_count":0},{"had_liked":false,"id":274308,"user_name":"Flychen","can_delete":false,"product_type":"c1","uid":1880782,"ip_address":"","ucode":"4029A8F1D3C361","user_header":"https://static001.geekbang.org/account/avatar/00/1c/b2/ce/5638be2b.jpg","comment_is_top":false,"comment_ctime":1610960518,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610960518","product_id":100029501,"comment_content":"-- ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œ<br>-- é€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œ<br>-- å¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br><br><br>select count(*),role_main,AVG(hp_max)<br><br>from heros<br>where hp_max &gt; 6000 <br>GROUP BY role_main<br>HAVING COUNT(*) &gt; 5<br><br>order by COUNT(*) DESC;<br><br>-- ------------------------------<br>-- ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000 çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œ<br>-- ä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œ<br>-- å…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br><br>SELECT count(*) &#39;æ•°é‡&#39;,attack_range,max(hp_max),sum(mp_max),ROUND(AVG(mp_max),2),max(mp_max),min(mp_max)<br>from heros<br>where (hp_max + mp_max) &gt; 7000<br>group by attack_range<br>ORDER BY &#39;æ•°é‡&#39; ;<br>","like_count":0},{"had_liked":false,"id":264351,"user_name":"novalnğŸ‰","can_delete":false,"product_type":"c1","uid":1231695,"ip_address":"","ucode":"EC544D448DA898","user_header":"https://static001.geekbang.org/account/avatar/00/12/cb/4f/feb5528f.jpg","comment_is_top":false,"comment_ctime":1606445124,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606445124","product_id":100029501,"comment_content":"SELECT COUNT(*) AS num, role_main, AVG(hp_max) FROM heros <br>WHERE hp_max &gt; 6000 <br>GROUP BY role_main <br>HAVING num &gt; 5<br>ORDER BY num DESC;<br><br><br>SELECT COUNT(*) AS num, ROUND(AVG(SUM(hp_max, fali_max)), 2), ROUND(MAX(SUM(hp_max, fali_max)), 2), ROUND(MIN(SUM(hp_max, fali_max)), 2)<br>WHERE SUM(hp_max, fali_max) &gt; 7000<br>GROUP BY attack_area<br>ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":264185,"user_name":"å’±æ˜¯å“å¤§çš„","can_delete":false,"product_type":"c1","uid":1292324,"ip_address":"","ucode":"A47C6DA5C00C6F","user_header":"https://static001.geekbang.org/account/avatar/00/13/b8/24/039f84a2.jpg","comment_is_top":false,"comment_ctime":1606375797,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1606375797","product_id":100029501,"comment_content":"SELECT COUNT(*) as num,role_main,AVG(hp_max) FROM heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC;<br><br>SELECT count(*) as num,ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2) FROM heros WHERE hp_max+mp_max&gt;7000 GROUP BY attack_range ORDER BY num DESC","like_count":0},{"had_liked":false,"id":264062,"user_name":"é—«åŸå“²","can_delete":false,"product_type":"c1","uid":1624846,"ip_address":"","ucode":"1903E022DF6A6F","user_header":"https://static001.geekbang.org/account/avatar/00/18/cb/0e/a9fee0b6.jpg","comment_is_top":false,"comment_ctime":1606322268,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606322268","product_id":100029501,"comment_content":"select name ,count(*) as num, ROUND(max(hp_max + mp_max),2), ROUND(min(hp_max + mp_max),2),ROUND(avg(hp_max + mp_max),2) from heros where (hp_max + mp_max) &gt; 7000 GROUP BY attack_range order by num desc<br><br>å¤ä¾¯æƒ‡\t36\t11036\t7117\t8654.42<br>åç¾¿\t26\t8737\t7025\t7743.77","like_count":0},{"had_liked":false,"id":264061,"user_name":"é—«åŸå“²","can_delete":false,"product_type":"c1","uid":1624846,"ip_address":"","ucode":"1903E022DF6A6F","user_header":"https://static001.geekbang.org/account/avatar/00/18/cb/0e/a9fee0b6.jpg","comment_is_top":false,"comment_ctime":1606321898,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606321898","product_id":100029501,"comment_content":"select name ,count(*) as num , role_main, avg(hp_max) from heros where hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 order by num desc;","like_count":0},{"had_liked":false,"id":257266,"user_name":"æ¬§é˜³å•Š","can_delete":false,"product_type":"c1","uid":1868570,"ip_address":"","ucode":"CF1D0F0802713B","user_header":"https://static001.geekbang.org/account/avatar/00/1c/83/1a/f9d9225f.jpg","comment_is_top":false,"comment_ctime":1603898219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603898219","product_id":100029501,"comment_content":"DB2æ•°æ®åº“ä½¿ç”¨èšç„¦å‡½æ•°éƒ½å¿…é¡»è¦æœ‰GROUP BY åˆ†ç»„å®Œæˆä¹‹åæ‰èƒ½ä½¿ç”¨ï¼Œä¸ç„¶ç›´æ¥æŠ¥é”™ã€‚æˆ‘å¼€å§‹è¿˜ä»¥ä¸ºè€å¸ˆå†™é”™äº†å‘¢ã€‚ã€‚","like_count":0},{"had_liked":false,"id":256399,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1603617560,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603617560","product_id":100029501,"comment_content":"é€šå¸¸æˆ‘ä»¬è¿˜ä¼šå¯¹æ•°æ®å…ˆè¿›è¡Œåˆ†ç»„ï¼Œç„¶åå†ä½¿ç”¨èšé›†å‡½æ•°ç»Ÿè®¡ä¸åŒç»„çš„æ•°æ®æ¦‚å†µï¼Œæ¯”å¦‚æ•°æ®è¡Œæ•°ã€å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ä»¥åŠæ±‚å’Œç­‰ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ HAVING å¯¹åˆ†ç»„è¿›è¡Œè¿‡æ»¤ï¼Œç„¶åé€šè¿‡ ORDER BY æŒ‰ç…§æŸä¸ªå­—æ®µçš„é¡ºåºè¿›è¡Œæ’åºè¾“å‡ºã€‚æœ‰æ—¶å€™ä½ èƒ½çœ‹åˆ°åœ¨ä¸€æ¡ SELECT è¯­å¥ä¸­ï¼Œå¯èƒ½ä¼šåŒ…æ‹¬å¤šä¸ªå­å¥ï¼Œç”¨ WHERE è¿›è¡Œæ•°æ®é‡çš„è¿‡æ»¤ï¼Œç”¨ GROUP BY è¿›è¡Œåˆ†ç»„ï¼Œç”¨ HAVING è¿›è¡Œåˆ†ç»„è¿‡æ»¤ï¼Œç”¨ ORDER BY è¿›è¡Œæ’åºâ€¦â€¦","like_count":0},{"had_liked":false,"id":256398,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1603617508,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603617508","product_id":100029501,"comment_content":"ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚","like_count":0},{"had_liked":false,"id":251681,"user_name":"Gentle Montage","can_delete":false,"product_type":"c1","uid":2154173,"ip_address":"","ucode":"337279335BB7F8","user_header":"https://static001.geekbang.org/account/avatar/00/20/de/bd/33f70754.jpg","comment_is_top":false,"comment_ctime":1601794256,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601794256","product_id":100029501,"comment_content":"å¦‚æœæƒ³è¦æŸ¥è¯¢æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000ï¼Œä¸”æœ‰æ¬¡è¦å®šä½çš„è‹±é›„æ•°é‡ï¼Œéœ€è¦ä½¿ç”¨ COUNT å‡½æ•°ã€‚<br><br>å¯ä»¥ç”¨è¿™ç§å—ï¼Ÿ<br>select count(*) from heros where hp_max&gt;6000 and assist_role is not NULL.<br><br>countå‡½æ•°çš„å†…å®¹æ˜¯*è¿˜æ˜¯ç”¨å­—æ®µåï¼Œæœ‰ä»€ä¹ˆè®²ç©¶å˜›ï¼Ÿ","like_count":0},{"had_liked":false,"id":251281,"user_name":"ç››è‰³æ˜","can_delete":false,"product_type":"c1","uid":1132347,"ip_address":"","ucode":"E4C1C699572C44","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/3b/15e4490f.jpg","comment_is_top":false,"comment_ctime":1601448364,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601448364","product_id":100029501,"comment_content":"1. select count(*) as num,role_main,AVG(hp_max) as avg_hp FROM heros where hp_max &gt; 6000 Group By role_main having num &gt; 5 order by num DESC;<br><br>2.select ROUND(AVG(hp_max+mp_max),2)as avg, ROUND(MAX(hp_max+mp_max),2)as max, ROUND(MIN(hp_max+mp_max),2)as min,count(*) as num FROM heros WHERE (hp_max+mp_max) &gt; 7000 Group By attack_range ORDER BY num DESC;<br>","like_count":0},{"had_liked":false,"id":250926,"user_name":"è‰é±¼ç¦¾","can_delete":false,"product_type":"c1","uid":2184778,"ip_address":"","ucode":"06865069745DBF","user_header":"https://static001.geekbang.org/account/avatar/00/21/56/4a/6e3e0bbd.jpg","comment_is_top":false,"comment_ctime":1601282797,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601282797","product_id":100029501,"comment_content":"1ã€SELECT COUNT(*) AS num,role_main,AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC<br>2ã€SELECT COUNT(*) AS num,attack_range,MAX(hp_max),ROUND(AVG(mp_max),1),MIN(mp_max) FROM heros WHERE (hp_max+mp_max) &gt; 7000 GROUP BY attack_range HAVING num&gt;1 ORDER BY num DESC","like_count":0},{"had_liked":false,"id":249006,"user_name":"æ¯è«åœ","can_delete":false,"product_type":"c1","uid":1759325,"ip_address":"","ucode":"4FA1D5CBBEF702","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","comment_is_top":false,"comment_ctime":1600400689,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1600400689","product_id":100029501,"comment_content":"SELECT <br>COUNT(*) AS num,<br>role_main,<br>AVG(hp_max) <br>FROM heros <br>WHERE hp_max &gt;6000 <br>GROUP BY role_main <br>HAVING num &gt; 5 <br>ORDER BY num DESC<br><br><br>SELECT <br>COUNT(*) AS num,ROUND(AVG(hp_max+mp_max),2) AS avg_num,<br>MAX(hp_max+mp_max) AS max_num,<br>MIN(hp_max+mp_max) AS min_num <br>FROM heros <br>WHERE hp_max+mp_max &gt; 7000  <br>GROUP BY attack_range  <br>ORDER BY num DESC","like_count":0},{"had_liked":false,"id":246423,"user_name":"MengGe","can_delete":false,"product_type":"c1","uid":2131534,"ip_address":"","ucode":"9D4849CEBDA386","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/8oQ7n5tkeHsOSoyvqFpp6Fg9lHhGRZ9ypqiaemHWp3eZG6PTDzJbkbFQ6L4la1sib1CFnVlCDiaRbfUWAA3VgibfIQ/132","comment_is_top":false,"comment_ctime":1599319219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599319219","product_id":100029501,"comment_content":"ä¹‹å‰å­¦SQLéƒ½æ˜¯åœ¨ç½‘ä¸Šæ‰¾çš„ä¸€äº›é›¶æ•£èµ„æ–™ï¼Œå¬äº†é™ˆè€å¸ˆçš„è¯¾ç¨‹åæœ‰äº†æ–°çš„ç†è§£ã€‚æ¯•ç«Ÿæœ‰å¤´æœ‰å°¾çš„å†…å®¹æ›´å®¹æ˜“è®©äººæƒ³æ˜ç™½ã€‚<br>å¯¹äºä»Šå¤©çš„é¢˜ï¼Œæƒ³å’Œå¤§å®¶å¯¹ä¸‹ç­”æ¡ˆï¼š<br>1.<br>SELECT COUNT(name) as nums,role_main,AVG(hp_max)<br>FROM heros<br>WHERE hp_max&gt;6000<br>GROUP BY role_main<br>HAVING nums&gt;5<br>ORDER BY nums DESC;<br><br>17\tæˆ˜å£«\t7028<br>10\tå¦å…‹\t8312.4<br>6\tæ³•å¸ˆ\t6417<br><br>2.<br>SELECT COUNT(name) as heros_nums,ROUND(AVG(hp_max+mp_max),2) as hp_mp_avg,ROUND(MAX(hp_max+mp_max),2) as hp_mp_max,ROUND(MIN(hp_max+mp_max),2) as hp_mp_min<br>FROM heros<br>WHERE (hp_max+mp_max)&gt;7000<br>GROUP BY attack_range<br>ORDER BY heros_nums DESC;<br><br>36\t8654.42\t11036.00\t7117.00<br>26\t7743.77\t8737.00\t7025.00<br>","like_count":0},{"had_liked":false,"id":245326,"user_name":"Nevin Jiang","can_delete":false,"product_type":"c1","uid":1297461,"ip_address":"","ucode":"CA5317AF239500","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/35/70bc2a53.jpg","comment_is_top":false,"comment_ctime":1598908631,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598908631","product_id":100029501,"comment_content":"-- Q1<br>with hero_main_role as (<br>    select<br>        role_main,<br>        count(*) as hero_count,<br>        avg(hp_max) as avg_hp_max<br>    from<br>        heros<br>    where<br>        hp_max &gt; 6000<br>    group by<br>        1<br>)<br><br>select<br>    hero_count,<br>    role_main,<br>    avg_hp_max<br>from<br>    hero_main_role<br>where<br>    hero_count &gt; 5<br>order by<br>    1 desc<br>;<br>-- Q2<br>with hero_attack_range_group as (<br>    select<br>        attack_range,<br>        count(*) as hero_count,<br>        avg(hp_max + mp_max) as avg_hp_mp,<br>        max(hp_max + mp_max) as max_hp_mp,<br>        min(hp_max + mp_max) as min_hp_mp<br>    from<br>        heros<br>    where<br>        hp_max + mp_max &gt; 7000<br>    group by<br>        1<br>)<br><br>select<br>    hero_count,<br>    avg_hp_mp,<br>    max_hp_mp,<br>    min_hp_mp<br>from<br>    hero_attack_range_group<br>order by<br>    1 desc<br>;<br>","like_count":0},{"had_liked":false,"id":241351,"user_name":"å¤å¤©å‘€","can_delete":false,"product_type":"c1","uid":1673679,"ip_address":"","ucode":"1C5C060C05923B","user_header":"https://static001.geekbang.org/account/avatar/00/19/89/cf/1c7703b1.jpg","comment_is_top":false,"comment_ctime":1597275951,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597275951","product_id":100029501,"comment_content":"A1:<br>mysql&gt; SELECT COUNT(*) AS num, role_main, AVG(hp_max) FROM heros<br>    -&gt; WHERE hp_max&gt;6000<br>    -&gt; GROUP BY role_main<br>    -&gt; HAVING num&gt;5<br>    -&gt; ORDER BY num DESC;<br>+-----+-----------+-------------+<br>| num | role_main | AVG(hp_max) |<br>+-----+-----------+-------------+<br>|  17 | æˆ˜å£«      |        7028 |<br>|  10 | å¦å…‹      |      8312.4 |<br>|   6 | æ³•å¸ˆ      |        6417 |<br>+-----+-----------+-------------+<br>3 rows in set (0.00 sec)<br><br><br>A2:<br>mysql&gt; SELECT COUNT(*) AS num,ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max), 2),ROUND(MIN(hp_max+mp_max),2) FROM heros WHERE (hp_max+mp_max)&gt;7000 GROUP BY attack_range ORDER BY num DESC;<br><br>+-----+-----------------------------+------------------------------+-----------------------------+<br>| num | ROUND(AVG(hp_max+mp_max),2) | ROUND(MAX(hp_max+mp_max), 2) | ROUND(MIN(hp_max+mp_max),2) |<br>+-----+-----------------------------+------------------------------+-----------------------------+<br>|  62 |                     8272.53 |                     11036.00 |                     7025.00 |<br>+-----+-----------------------------+------------------------------+-----------------------------+<br>","like_count":0},{"had_liked":false,"id":240171,"user_name":"å¥¥ä½›é“","can_delete":false,"product_type":"c1","uid":1234919,"ip_address":"","ucode":"A1D544E5F22B7F","user_header":"","comment_is_top":false,"comment_ctime":1596776755,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596776755","product_id":100029501,"comment_content":"ç¬¬ä¸€é¢˜ï¼šSELECT COUNT(*) as Number, role_main, AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING Number &gt; 5 ORDER BY Number DESC;<br><br>ç¬¬äºŒé¢˜ï¼š<br>SELECT COUNT(*) as Number, ROUND(AVG(hp_max + mp_max),2), MAX(hp_max + mp_max), MIN(hp_max + mp_max) FROM heros WHERE (hp_max + mp_max) &gt; 7000 GROUP BY attack_range ORDER BY Number DESC;","like_count":0},{"had_liked":false,"id":239279,"user_name":"Geek_gong1zu","can_delete":false,"product_type":"c1","uid":2086659,"ip_address":"","ucode":"D629A6652AB8E2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d7/03/db060811.jpg","comment_is_top":false,"comment_ctime":1596475202,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1596475202","product_id":100029501,"comment_content":"1ã€<br>SELECT COUNT(*) AS num,role_main,AVG(hp_max)<br>FROM heros<br>WHERE hp_max&gt;6000<br>GROUP BY role_main<br>HAVING  num&gt;5<br>ORDER BY num DESC;<br><br>2ã€<br>SELECT COUNT(*) AS num,<br>ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2)<br>FROM heros<br>WHERE (hp_max+mp_max)&gt;7000<br>GROUP BY attach_range<br>ORDER BY num DESC;<br>","like_count":0},{"had_liked":false,"id":238899,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1596360684,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1596360684","product_id":100029501,"comment_content":"1. SELECT COUNT(*) as num , role_main, AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5  ORDER BY num DESC;<br>2. SELECT COUNT(*) as num, ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2), ROUND(MIN(hp_max+mp_max),2) FROM heros WHERE (hp_max + mp_max) &gt; 7000 GROUP BY attack_range ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":236668,"user_name":"Jack Zhang","can_delete":false,"product_type":"c1","uid":1315728,"ip_address":"","ucode":"E3AEAE55A9B16C","user_header":"https://static001.geekbang.org/account/avatar/00/14/13/90/f94a6436.jpg","comment_is_top":false,"comment_ctime":1595496627,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595496627","product_id":100029501,"comment_content":"é‡å‘ä¸€éï¼Œç¬¬äºŒé¢˜åº”è¯¥æ˜¯æŒ‰æ”»å‡»èŒƒå›´åˆ†ç»„ï¼Œæˆ‘å†™æˆäº†æŒ‰æœ€å¤§æ”»å‡»åˆ†ç»„ã€‚<br>ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯Aä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>SELECT COUNT(*) AS num, role_main, AVG(hp_max) AS avg_hp_max FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC;<br><br>ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000 çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br>SELECT COUNT(*) AS num, ROUND(AVG(hp_max+mp_max),2) AS avg_hp_mp_max, ROUND(MAX(hp_max+mp_max),2) AS min_hp_mp_max, ROUND(MIN(hp_max+mp_max),2) AS max_hp_mp_max FROM heros WHERE (hp_max+mp_max) &gt; 7000 GROUP BY attack_range ORDER BY num","like_count":0},{"had_liked":false,"id":236666,"user_name":"Jack Zhang","can_delete":false,"product_type":"c1","uid":1315728,"ip_address":"","ucode":"E3AEAE55A9B16C","user_header":"https://static001.geekbang.org/account/avatar/00/14/13/90/f94a6436.jpg","comment_is_top":false,"comment_ctime":1595496461,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595496461","product_id":100029501,"comment_content":"ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>SELECT COUNT(*) AS num, role_main, AVG(hp_max) AS avg_hp_max FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC;<br><br>ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br>SELECT COUNT(*) AS num, ROUND(AVG(hp_max+mp_max),2) AS avg_hp_mp_max, ROUND(MAX(hp_max+mp_max),2) AS max_hp_mp_max, ROUND(MIN(hp_max+mp_max),2) AS min_hp_mp_max FROM heros WHERE (hp_max+mp_max) &gt; 7000 GROUP BY attack_max ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":229655,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":2015982,"ip_address":"","ucode":"F2CDC708F30997","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep8YUnk8Z9LAaLINgWWnt8HXu8ZlyD7vLpHrJaExGeZ5YyWIrI4SYcX3joOpibAWIyuqGibqVNwq8XQ/132","comment_is_top":false,"comment_ctime":1593089007,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593089007","product_id":100029501,"comment_content":"ç¬¬ä¸€é¢˜<br><br>SELECT COUNT(*) AS amountOfHero ,rolemain,AVG(*) <br>FROM heroes <br>WHERE  hp_max&gt;6000<br>Group BY  role_main <br>Having amountOfHero &gt; 5<br>ORDER BY amountOfHero DESC;","like_count":0},{"had_liked":false,"id":229481,"user_name":"å®æ‚¦","can_delete":false,"product_type":"c1","uid":1901403,"ip_address":"","ucode":"68844C314FEEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg","comment_is_top":false,"comment_ctime":1593010785,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593010785","product_id":100029501,"comment_content":"ç¬¬ä¸€é—®ç­”æ¡ˆï¼š<br>SELECT COUNT(*) AS num,role_main,AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC;<br>ç¬¬äºŒé—®ç­”æ¡ˆï¼š<br> SELECT COUNT(*) AS num ,ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2),ROUND(AVG(hp_max+mp_max),2) FROM heros WHERE (hp_max+mp_max)&gt;7000 GROUP BY attack_range ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":223777,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1168774,"ip_address":"","ucode":"9A5B148A7E453A","user_header":"https://static001.geekbang.org/account/avatar/00/11/d5/86/5b1ff7d9.jpg","comment_is_top":false,"comment_ctime":1591178134,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591178134","product_id":100029501,"comment_content":"#ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œ<br>#é€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œ<br>#å¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼<br>SELECT COUNT(*) AS num, role_main, ROUND(AVG(hp_max), 2) FROM heros.heros<br>WHERE role_main IS NOT NULL<br>GROUP BY role_main<br>HAVING num &gt;= 5<br>ORDER BY num DESC;<br><br>#ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000çš„è‹±é›„ï¼Œ<br>#æŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œ<br>#ä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œ<br>#å¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½<br><br>SELECT COUNT(*) AS num, (hp_max+mp_max) AS hp_mp, ROUND(AVG(hp_max+mp_max), 2), MAX(hp_max+mp_max), MIN(hp_max+mp_max) FROM heros.heros<br>WHERE attack_range IS NOT NULL<br>GROUP BY attack_range<br>HAVING hp_mp &gt; 7000<br>ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":222245,"user_name":"å¤§é£","can_delete":false,"product_type":"c1","uid":1187523,"ip_address":"","ucode":"DA641A3C6ECCFC","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/c3/c9399b2e.jpg","comment_is_top":false,"comment_ctime":1590724606,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590724606","product_id":100029501,"comment_content":"SELECT ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2),COUNT(*) num  FROM heros WHERE (hp_max+mp_max) &gt;7000 GROUP BY attack_range  ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":222243,"user_name":"å¤§é£","can_delete":false,"product_type":"c1","uid":1187523,"ip_address":"","ucode":"DA641A3C6ECCFC","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/c3/c9399b2e.jpg","comment_is_top":false,"comment_ctime":1590724325,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590724325","product_id":100029501,"comment_content":"SELECT role_main,AVG(hp_max),COUNT(*) num  FROM heros WHERE hp_max &gt;6000 GROUP BY role_main  HAVING num &gt;5   ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":220779,"user_name":"ç”˜åº·è‰º","can_delete":false,"product_type":"c1","uid":1953633,"ip_address":"","ucode":"D06219B5C592CF","user_header":"https://static001.geekbang.org/account/avatar/00/1d/cf/61/f592700e.jpg","comment_is_top":false,"comment_ctime":1590323291,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590323291","product_id":100029501,"comment_content":"#ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000 çš„è‹±é›„ï¼Œ<br>#æŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œ<br>#å¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½<br>SELECT COUNT(h.name) heros, ROUND(AVG(h.hp_max+h.mp_max),2) AS hp_mp_avg, <br>MAX(h.hp_max+h.mp_max) AS hp_mp_max,<br>MIN(h.hp_max+h.mp_max) AS hp_mp_min<br>FROM heros AS h<br>WHERE (h.hp_max+h.mp_max) &gt; 7000 GROUP BY h.attack_range<br>ORDER BY heros DESC;","like_count":0},{"had_liked":false,"id":220774,"user_name":"ç”˜åº·è‰º","can_delete":false,"product_type":"c1","uid":1953633,"ip_address":"","ucode":"D06219B5C592CF","user_header":"https://static001.geekbang.org/account/avatar/00/1d/cf/61/f592700e.jpg","comment_is_top":false,"comment_ctime":1590323022,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590323022","product_id":100029501,"comment_content":"#ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œ<br>#é€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œ<br>#å¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>SELECT COUNT(h.name) AS heros, h.role_main, AVG(h.hp_max)<br>AS hp_max_avg FROM heros h <br>WHERE h.hp_max &gt; 6000 GROUP BY h.role_main<br>HAVING COUNT(h.name) &gt; 5 <br>ORDER BY heros DESC;","like_count":0},{"had_liked":false,"id":220524,"user_name":"å½¤å½¤","can_delete":false,"product_type":"c1","uid":1866382,"ip_address":"","ucode":"6058FC822EF649","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/0bexhQ6hllSYOM9GoRaR0Rq99aZqOAIfBblqfNbD5YXDcWRdWcDLpaTp4R8LbSfQTaCmRhcibehHMLzTb3yQ53Q/132","comment_is_top":false,"comment_ctime":1590281286,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590281286","product_id":100029501,"comment_content":"-- ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000 çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œ<br>-- ä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œ<br>-- å…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br>select count(*) as num, attack_range, round(avg(hp_max + mp_max), 2), <br>round(max(hp_max + mp_max),2), round(min(hp_max + mp_max),2)  <br>from h_king.heros<br>where (hp_max + mp_max) &gt; 7000<br>group by attack_range having num&gt;5 order by num desc","like_count":0},{"had_liked":false,"id":220523,"user_name":"å½¤å½¤","can_delete":false,"product_type":"c1","uid":1866382,"ip_address":"","ucode":"6058FC822EF649","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/0bexhQ6hllSYOM9GoRaR0Rq99aZqOAIfBblqfNbD5YXDcWRdWcDLpaTp4R8LbSfQTaCmRhcibehHMLzTb3yQ53Q/132","comment_is_top":false,"comment_ctime":1590281276,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590281276","product_id":100029501,"comment_content":"-- ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼Œ<br>-- æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>select count(*) as num, role_main, avg(hp_max) from h_king.heros<br>where hp_max &gt; 6000<br>group by role_main having num&gt;5 order by num desc","like_count":0},{"had_liked":false,"id":204112,"user_name":"æ›²é¢€","can_delete":false,"product_type":"c1","uid":1859612,"ip_address":"","ucode":"BB2C6B4D93B6E5","user_header":"https://static001.geekbang.org/account/avatar/00/1c/60/1c/6fce1419.jpg","comment_is_top":false,"comment_ctime":1586334675,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1586334675","product_id":100029501,"comment_content":"select<br>\tcount(*) as num,<br>\trole_main as &#39;ä¸»è¦å®šä½&#39;,<br>\tAVG(hp_max) as &#39;å¹³å‡æœ€å¤§ç”Ÿå‘½å€¼&#39;<br>FROM<br>\theros<br>WHERE<br>\thp_max &gt; 6000<br>GROUP BY<br>\trole_main<br>HAVING<br>\tnum &gt; 5<br>ORDER BY<br>\tnum DESC;<br>\t<br>SELECT<br>\tcount(*) as num,<br>\tROUND(AVG(hp_max + mp_max), 2) as &#39;å¹³å‡å€¼&#39;,<br>\tROUND(MAX(hp_max + mp_max), 2) as &#39;æœ€å¤§å€¼&#39;,<br>\tROUND(MIN(hp_max + mp_max), 2) as &#39;æœ€å°å€¼&#39;<br>FROM<br>\theros<br>WHERE<br>\thp_max + mp_max &gt; 7000<br>GROUP BY<br>\tattack_range<br>ORDER BY<br>\tnum desc;","like_count":0},{"had_liked":false,"id":204059,"user_name":"å‡Œç©ºé£èµ·çš„å‰ªåˆ€è…¿","can_delete":false,"product_type":"c1","uid":1243680,"ip_address":"","ucode":"16FBBF4A3B54C6","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/20/0f06b080.jpg","comment_is_top":false,"comment_ctime":1586326198,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586326198","product_id":100029501,"comment_content":"ç­”é¢˜<br>â‘ SELECT COUNT(*) as num, role_main,AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC<br>â‘¡SELECT COUNT(*) as num,ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2) FROM heros WHERE (hp_max + mp_max) &gt; 7000 GROUP BY attack_max ORDER BY num DESC","like_count":0},{"had_liked":false,"id":194092,"user_name":"track6688","can_delete":false,"product_type":"c1","uid":1088040,"ip_address":"","ucode":"0A9E893F8FD379","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/28/03613c22.jpg","comment_is_top":false,"comment_ctime":1585024165,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585024165","product_id":100029501,"comment_content":"é—®é¢˜ä¸€ï¼š<br>SELECT COUNT(*) AS num, role_main, AVG(h.hp_max) FROM heros h WHERE h.hp_max &gt; 6000 GROUP BY h.role_main HAVING num &gt; 5 ORDER BY num DESC; <br>é—®é¢˜äºŒï¼š<br>SELECT COUNT(*) AS num, h.attack_range, ROUND(AVG(h.hp_max + h.mp_max),2), ROUND(MAX(h.hp_max + h.mp_max),2), ROUND(MIN(h.hp_max+h.mp_max),2) <br>FROM heros h WHERE (h.hp_max + h.mp_max) &gt; 7000 GROUP BY h.attack_range  ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":189340,"user_name":"ç´¢æ—­ä¸œ","can_delete":false,"product_type":"c1","uid":1139039,"ip_address":"","ucode":"BFD07BCD8C8CAE","user_header":"https://static001.geekbang.org/account/avatar/00/11/61/5f/b279daaf.jpg","comment_is_top":false,"comment_ctime":1584502071,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584502071","product_id":100029501,"comment_content":"SELECT count(*) as num, role_main, AVG(hp_max)<br>FROM heros<br>WHERE hp_max &gt; 6000<br>GROUP BY role_main<br>HAVING num &gt; 5<br>ORDER BY num DESC","like_count":0},{"had_liked":false,"id":187880,"user_name":"mumu","can_delete":false,"product_type":"c1","uid":1371095,"ip_address":"","ucode":"E409BDA36091A3","user_header":"https://static001.geekbang.org/account/avatar/00/14/eb/d7/712912a7.jpg","comment_is_top":false,"comment_ctime":1584264717,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584264717","product_id":100029501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®å¦‚ä½•å¯¹ä¸€æ®µæ—¶é—´çš„æ•°æ®ï¼Œæ¯”å¦‚2020-01-02 00:00:00 åˆ° 2020-01-03 00:00:00 æŒ‰ 10åˆ†é’Ÿä¸€ç»„è¿›è¡Œç»Ÿè®¡å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":186849,"user_name":"L.","can_delete":false,"product_type":"c1","uid":1543396,"ip_address":"","ucode":"9803C2EDC799DC","user_header":"https://static001.geekbang.org/account/avatar/00/17/8c/e4/ad3e7c39.jpg","comment_is_top":false,"comment_ctime":1583938153,"is_pvip":false,"discussion_count":1,"race_medal":1,"score":"1583938153","product_id":100029501,"comment_content":" ç›®çš„æƒ³é€‰æ‹©hpæœ€é«˜çš„è‹±é›„å’Œåå­— (1)select name,MAX(hp_max) from heros;å†™æ³•ä¸€å¾—ä¸åˆ°æ­£ç¡®å¾—ç­”æ¡ˆï¼Œæ¢æˆäº†å†™æ³•(2)select name,hp_max from heros where hp_max=(select max(hp_max) from heros);  æƒ³è¯·æ•™å†™æ³•(1)ä¸ºä»€ä¹ˆä¸è¡Œï¼Œç½‘ä¸Šæœäº†ä¸€ä¸‹ä¹Ÿæ²¡æ‰¾åˆ°æ»¡æ„çš„å›ç­” ","like_count":0,"discussions":[{"author":{"id":1543396,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/e4/ad3e7c39.jpg","nickname":"L.","note":"","ucode":"9803C2EDC799DC","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202986,"discussion_content":"è¡¥å……ä¸€ä¸‹ï¼Œä¸»è¦é—®é¢˜æ˜¯å†™æ³•ä¸€ä¸ºä»€ä¹ˆæ²¡æœ‰æŠ¥é”™ï¼Œä¸”æœ‰ç»“æœï¼Œç»“æœä¸º å¤ä¾¯æƒ‡ï¼Œ9328","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583979692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180789,"user_name":"æš–å†¬Â°","can_delete":false,"product_type":"c1","uid":1545663,"ip_address":"","ucode":"CE2E4A30085DDB","user_header":"https://static001.geekbang.org/account/avatar/00/17/95/bf/4a30ba94.jpg","comment_is_top":false,"comment_ctime":1582389274,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1582389274","product_id":100029501,"comment_content":"ç°åœ¨æé—®ï¼Œè¿˜èƒ½å›ç­”ä¹ˆï¼Ÿ<br>æˆ‘æƒ³é—®æ€ä¹ˆåœ¨æ˜¾ç¤ºçš„ç»“æœåŠ ä¸ªå§“åï¼Œå°±æ˜¯å¤šæŸ¥ä¸€ä¸ªå§“åï¼ˆè‡ªå·±ç¢ç£¨äº†åå‡ åˆ†é’Ÿï¼Œè¿˜æ˜¯æ²¡å¼„å‡ºæ¥ï¼ŒåŸºç¡€è¾ƒå·®ï¼‰<br>&#47;**<br>ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„ï¼Œ<br>æŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œ<br>é€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº 5 çš„åˆ†ç»„ï¼Œ<br>æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œ<br>å¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>*&#47; SELECT<br>COUNT( * ) AS num,<br>role_main,<br>AVG( hp_max ) <br>FROM<br>\theros <br>WHERE<br>\thp_max &gt; 6000 <br>GROUP BY<br>\trole_main <br>HAVING<br>\tnum &gt; 5 <br>ORDER BY<br>\tnum DESC<br>&#47;**<br>ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº 7000 çš„è‹±é›„ï¼Œ<br>æŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œ<br>æ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œ<br>ä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œ<br>å¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œ<br>å…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br>*&#47; SELECT<br>COUNT( * ) AS num,<br>ROUND( AVG( hp_max + mp_max ), 2 ) AS avg,<br>ROUND( SUM( hp_max + mp_max ), 2 ) AS sum,<br>ROUND( MAX( hp_max + mp_max ), 2 ) AS max,<br>ROUND( MIN( hp_max + mp_max ), 2 ) AS min<br>FROM<br>\theros <br>WHERE<br>\t( hp_max + mp_max ) &gt; 7000 <br>GROUP BY<br>\tattack_range <br>ORDER BY<br>\tnum DESC","like_count":0,"discussions":[{"author":{"id":1122734,"avatar":"https://static001.geekbang.org/account/avatar/00/11/21/ae/416a7d6d.jpg","nickname":"Moby","note":"","ucode":"A9CFD37FD8B5C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220050,"discussion_content":"åŠ ä¸ªåå­—ï¼š\nselect count(*) num,name,role_main,avg(hp_max) \nfrom heros where hp_max>6000 group by role_main  order by num desc; \n\néœ€è¦å»æ‰ having num>5ï¼Œä¸ç„¶ç»“æœä¸ºç©º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585832289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177176,"user_name":"å¤§çŒ«å½“äº†ä¸ªå½“","can_delete":false,"product_type":"c1","uid":1812021,"ip_address":"","ucode":"4182BF6E3B86A5","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a6/35/52a6551a.jpg","comment_is_top":false,"comment_ctime":1581315447,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581315447","product_id":100029501,"comment_content":"ç»ƒä¹ é¢˜<br>SELECT COUNT(*) as sum, role_main, AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING sum &gt; 5 ORDER BY sum  DESC<br><br>SELECT COUNT(*) as num, ROUND(AVG(hp_max+mp_max),2), ROUND(MAX(hp_max+mp_max),2), ROUND(MIN(hp_max+mp_max),2) FROM heros WHERE hp_max+mp_max &gt; 7000 GROUP BY attack_range ORDER BY num DESC","like_count":0},{"had_liked":false,"id":173328,"user_name":"LYEMOML","can_delete":false,"product_type":"c1","uid":1019315,"ip_address":"","ucode":"D71BDFDFCBD7CC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/b3/a176ac80.jpg","comment_is_top":false,"comment_ctime":1579505495,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579505495","product_id":100029501,"comment_content":"```sql<br>SELECT COUNT(*) as count, AVG(hp_max), role_main FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING count &gt; 5 ORDER BY count desc;<br>```<br><br>```sql<br>SELECT COUNT(*) as count, ROUND(AVG(hp_max+mp_max), 2), ROUND(MAX(hp_max+mp_max), 2), ROUND(MIN(hp_max+mp_max), 2),  attack_range FROM heros WHERE (hp_max+mp_max) &gt; 7000 GROUP BY attack_range ORDER BY count DESC;<br>```","like_count":0},{"had_liked":false,"id":165340,"user_name":"çˆ¬è¡Œçš„èœ—ç‰›","can_delete":false,"product_type":"c1","uid":1033956,"ip_address":"","ucode":"6623B62DE63CE9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QD6bf8hkS5dHrabdW7M7Oo9An1Oo3QSxqoySJMDh7GTraxFRX77VZ2HZ13x3R4EVYddIGXicRRDAc7V9z5cLDlA/132","comment_is_top":false,"comment_ctime":1577203041,"is_pvip":false,"replies":[{"id":"63759","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577531293,"ip_address":"","comment_id":165340,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577203041","product_id":100029501,"comment_content":"SELECT  COUNT(*) as num, role_main, avg(hp_max)<br>FROM heros<br>WHERE hp_max &gt; 6000 <br>GROUP BY role_main  HAVING num &gt; 5 ORDER BY num DESC; ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479128,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577531293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164546,"user_name":"amor","can_delete":false,"product_type":"c1","uid":1347662,"ip_address":"","ucode":"77218AA29D2564","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIzcqzRzz09q1XpPFZu752t0t03qDQZBI32FwiafYibfJbHqqATrRL5iaE591wyVl5Y3eHQMnBeyZxVQ/132","comment_is_top":false,"comment_ctime":1577025400,"is_pvip":false,"replies":[{"id":"62572","content":"é—®é¢˜1å›ç­”æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577068421,"ip_address":"","comment_id":164546,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577025400","product_id":100029501,"comment_content":"SELECT COUNT(*) AS num,role_main,AVG(hp_max) FROM heros WHERE hp_max &gt;6000 GROUP BY role_main HAVING num &gt;5 ORDER BY num DESC;<br>+-----+-----------+-------------+<br>| num | role_main | AVG(hp_max) |<br>+-----+-----------+-------------+<br>|  17 | æˆ˜å£«      |        7028 |<br>|  10 | å¦å…‹      |      8312.4 |<br>|   6 | æ³•å¸ˆ      |        6417 |<br>+-----+-----------+-------------+<br>3 rows in set (0.02 sec)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478810,"discussion_content":"é—®é¢˜1å›ç­”æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577068421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161763,"user_name":"é«˜æ³½æ—","can_delete":false,"product_type":"c1","uid":1764725,"ip_address":"","ucode":"DE54EBFFF11265","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/AGicQgKibwja1SxkQ7oXQE8hYH7yCpiaicNHw3qZRuNB81aVDOQm9P1zd5F75Jbtv66G15D6ZjbbqfnoETR4321Zdw/132","comment_is_top":false,"comment_ctime":1576319500,"is_pvip":false,"replies":[{"id":"62582","content":"åŠ æ²¹~","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577070869,"ip_address":"","comment_id":161763,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576319500","product_id":100029501,"comment_content":"éå¸¸å¥½ï¼é€‚åˆæˆ‘ï¼","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477847,"discussion_content":"åŠ æ²¹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577070869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161266,"user_name":"taoist","can_delete":false,"product_type":"c1","uid":1195004,"ip_address":"","ucode":"D70AFE25CD8F10","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/fc/04a75cd0.jpg","comment_is_top":false,"comment_ctime":1576160199,"is_pvip":true,"replies":[{"id":"62637","content":"SQLæ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577079396,"ip_address":"","comment_id":161266,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576160199","product_id":100029501,"comment_content":"# MariaDB:<br><br>1. SELECT role_main,AVG(hp_max) as avg_hp, COUNT(*) AS count FROM  heros WHERE hp_max &gt; 6000 GROUP BY  role_main HAVING count &gt; 5 ORDER BY count DESC;<br><br>2.  SELECT COUNT(*) as num, ROUND(AVG(hp_max+mp_max),2), ROUND( MAX(hp_max+mp_max), 2), ROUND(MIN(hp_max+mp_max) ,2) FROM heros WHERE (hp_max + mp_max) &gt; 7000 GROUP BY attack_range ORDER BY num DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477671,"discussion_content":"SQLæ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577079396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160935,"user_name":"Geek_d3a509","can_delete":false,"product_type":"c1","uid":1765573,"ip_address":"","ucode":"8A40A85D4D1A73","user_header":"","comment_is_top":false,"comment_ctime":1576064231,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576064231","product_id":100029501,"comment_content":"é—®é¢˜SQLï¼šï¼ˆ1ï¼‰SELECT COUNT(*) as num, role_main, avg(hp_max) FROM heros  WHERE hp_max &gt;6000  GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC;<br><br>ï¼ˆ2ï¼‰SELECT COUNT(*) as num, attack_range, ROUND(avg(hp_max + mp_max),2 ) as avg ,ROUND(MAX(hp_max + mp_max),2) as max, ROUND(MIN(hp_max + mp_max),2) as min FROM heros WHERE (hp_max + mp_max)&gt;7000 GROUP BY attack_range ORDER BY num DESC; ","like_count":0},{"had_liked":false,"id":158413,"user_name":"æ˜¥é£","can_delete":false,"product_type":"c1","uid":1103971,"ip_address":"","ucode":"76947E35A76C67","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/63/e4c28138.jpg","comment_is_top":false,"comment_ctime":1575365428,"is_pvip":false,"replies":[{"id":"62629","content":"TonyåŒå­¦å¾ˆç»†å¿ƒï¼ŒåŸå› æ˜¯å› ä¸ºç¼–ç çš„é—®é¢˜ï¼Œnameå­—æ®µåœ¨åˆ›å»ºçš„æ—¶å€™ä½¿ç”¨çš„æ˜¯utf8ç¼–ç ï¼Œè¿™é‡Œä½ å¯ä»¥ä½¿ç”¨<br>SELECT MIN(CONVERT(name USING utf8)), MAX(CONVERT(name USING utf8)) FROM heros<br>çœ‹ä¸‹ç»“æœï¼Œå’ŒSELECT MIN(name), MAX(name) FROM heros;æ˜¯ä¸€æ ·çš„ï¼Œresultéƒ½æ˜¯ï¼šä¸çŸ¥ç«èˆï¼Œé»„å¿ ","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577078627,"ip_address":"","comment_id":158413,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575365428","product_id":100029501,"comment_content":"SELECT MIN(name), MAX(name) FROM heros;<br>resultï¼šä¸çŸ¥ç«èˆï¼Œé»„å¿ <br>SELECT MIN(CONVERT(name USING gbk)), MAX(CONVERT(name USING gbk)) FROM heros<br>resultï¼šé˜¿ç‚ï¼Œåº„å‘¨<br>è¿™ä¸¤æ¡æŸ¥å‡ºæ¥çš„ç»“æœä¸ä¸€æ ·ï¼Ÿä¸Šé¢é‚£ä¸ªä¹Ÿä¸æ˜¯aåˆ°zå•Š","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476713,"discussion_content":"TonyåŒå­¦å¾ˆç»†å¿ƒï¼ŒåŸå› æ˜¯å› ä¸ºç¼–ç çš„é—®é¢˜ï¼Œnameå­—æ®µåœ¨åˆ›å»ºçš„æ—¶å€™ä½¿ç”¨çš„æ˜¯utf8ç¼–ç ï¼Œè¿™é‡Œä½ å¯ä»¥ä½¿ç”¨\nSELECT MIN(CONVERT(name USING utf8)), MAX(CONVERT(name USING utf8)) FROM heros\nçœ‹ä¸‹ç»“æœï¼Œå’ŒSELECT MIN(name), MAX(name) FROM heros;æ˜¯ä¸€æ ·çš„ï¼Œresultéƒ½æ˜¯ï¼šä¸çŸ¥ç«èˆï¼Œé»„å¿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577078627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157024,"user_name":"å¤2021ç‰›","can_delete":false,"product_type":"c1","uid":1676097,"ip_address":"","ucode":"A26B321F300785","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/cKeYVTKJCJhrfTCBkEGla1WA7W0S9FPZrTR3ovYJFhcKo7kl72gR9VibCufhHsjOar2Z6mZlFKb8VEkkDv9lqVA/132","comment_is_top":false,"comment_ctime":1575014495,"is_pvip":false,"replies":[{"id":"62622","content":"oracleæ”¯æŒhavingï¼Œå†™æˆ having COUNT(*) &gt; 5è¯•è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577078247,"ip_address":"","comment_id":157024,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575014495","product_id":100029501,"comment_content":"mysql:  SELECT COUNT(*) as num, role_main, role_assist FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main, role_assist HAVING num &gt; 5 ORDER BY num DESC;<br>oracle: select count(*) as num,t.reson_code from E_STATE t where t.equi_code = &#39;R01&#39; group by t.reson_code HAVING num &gt; 5 order by num desc;<br><br>åœ¨oracleä¸‹æŠ¥é”™ï¼Œé”numæ— æ•ˆã€‚æ˜¯ä¸æ˜¯oracleä¸‹ä¸æ”¯æŒhavingï¼Œä½†æ˜¯ä¸åº”è¯¥å•Šã€‚","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476306,"discussion_content":"oracleæ”¯æŒhavingï¼Œå†™æˆ having COUNT(*) &amp;gt; 5è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577078247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144924,"user_name":"æ‰¶å¹½","can_delete":false,"product_type":"c1","uid":1322612,"ip_address":"","ucode":"1400EDFF8970D3","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/74/88c613e0.jpg","comment_is_top":false,"comment_ctime":1572096690,"is_pvip":false,"replies":[{"id":"62692","content":"ä¸¤ä¸ªSQLæ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577084665,"ip_address":"","comment_id":144924,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572096690","product_id":100029501,"comment_content":"ä½œä¸šï¼š<br>1) SELECT COUNT(*) AS num, role_main, AVG(hp_max) FROM heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC;<br>2) SELECT COUNT(*) AS num, ROUND(AVG(hp_max+mp_max), 2) AS avg, ROUND(MAX(hp_max+mp_max),2) AS max, ROUND(MIN(hp_max+mp_max), 2) AS min FROM heros<br>WHERE hp_max+mp_max&gt;7000 GROUP BY attack_range ORDER BY num DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472168,"discussion_content":"ä¸¤ä¸ªSQLæ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577084665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142512,"user_name":"Coool","can_delete":false,"product_type":"c1","uid":1701702,"ip_address":"","ucode":"1D1AB3270B02B9","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/46/209ca424.jpg","comment_is_top":false,"comment_ctime":1571383881,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571383881","product_id":100029501,"comment_content":"1ã€<br>SELECT <br>    COUNT(*) AS num, role_main, AVG(hp_max)<br>FROM<br>    heros<br>WHERE hp_max&gt;6000<br>GROUP BY role_main <br>HAVING num &gt; 5<br>ORDER BY num DESC<br>2ã€<br>SELECT <br>    COUNT(*) AS num, ROUND( AVG(hp_max+mp_max),2), ROUND( MAX(hp_max+mp_max),2), ROUND( MIN(hp_max+mp_max),2)<br>FROM<br>    heros<br>WHERE (hp_max+mp_max)&gt;7000<br>GROUP BY attack_range <br>ORDER BY num DESC","like_count":0},{"had_liked":false,"id":142146,"user_name":"åŠç“¶é†‹","can_delete":false,"product_type":"c1","uid":1282746,"ip_address":"","ucode":"8C898E244D0417","user_header":"https://static001.geekbang.org/account/avatar/00/13/92/ba/9833f06f.jpg","comment_is_top":false,"comment_ctime":1571300299,"is_pvip":true,"replies":[{"id":"62704","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577085504,"ip_address":"","comment_id":142146,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571300299","product_id":100029501,"comment_content":"1ï¼‰<br>SELECT COUNT(*) nums,role_main,AVG(hp_max) avg_hp<br>from heros<br>WHERE hp_max &gt; 6000<br>GROUP BY role_main<br>HAVING nums &gt; 5<br>ORDER BY nums DESC<br><br>2ï¼‰SELECT COUNT(*) as nums,attack_range,ROUND(AVG(hp_max + mp_max),2) as avg_hp_mp,<br>\t\t\t MAX(hp_max + mp_max) as max_hp_mp,<br>\t\t\t MIN(hp_max + mp_max) as min_hp_mp<br>FROM heros<br>WHERE (hp_max + mp_max) &gt; 7000<br>GROUP BY attack_range<br>ORDER BY nums DESC","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471004,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577085504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137429,"user_name":"Cola_","can_delete":false,"product_type":"c1","uid":1264718,"ip_address":"","ucode":"99996D04CA4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/4c/4e/91267714.jpg","comment_is_top":false,"comment_ctime":1569739444,"is_pvip":false,"replies":[{"id":"62786","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577092437,"ip_address":"","comment_id":137429,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569739444","product_id":100029501,"comment_content":"ç»ƒä¹ é¢˜<br>1.select count(*) as num,role_main,avg(hp_max) from heros where hp_max&gt;6000 group by role_main having num&gt;5 order by num desc;<br>2.select count(*) as num,round(avg(hp_max+mp_max),2),round(max(hp_max+mp_max),2),round(min(hp_max+mp_max),2) from heros where (hp_max+mp_max&gt;7000) group by attack_range order by num desc;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469087,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577092437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131802,"user_name":"æ£®é±¼","can_delete":false,"product_type":"c1","uid":1638587,"ip_address":"","ucode":"6AF86EB05088F4","user_header":"https://static001.geekbang.org/account/avatar/00/19/00/bb/25a29311.jpg","comment_is_top":false,"comment_ctime":1567911903,"is_pvip":false,"replies":[{"id":"53379","content":"æ…¢æ…¢æ¥ å¤šåšå°±å¥½äº†","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1570431084,"ip_address":"","comment_id":131802,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567911903","product_id":100029501,"comment_content":"è¯¾åé¢˜ç¡®å®è¦å†™ä¸€ä¸‹æ‰ä¼šå‘ç°è‡ªå·±çš„é”™è¯¯åœ¨å“ªé‡Œï¼Œæˆ‘ç«Ÿç„¶ä¼šå¿˜äº†å†™FROM herosâ€¦â€¦","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466624,"discussion_content":"æ…¢æ…¢æ¥ å¤šåšå°±å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570431084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129789,"user_name":"Serendipity","can_delete":false,"product_type":"c1","uid":1370694,"ip_address":"","ucode":"E9C7B39BD8DCCD","user_header":"https://static001.geekbang.org/account/avatar/00/14/ea/46/9c9808a9.jpg","comment_is_top":false,"comment_ctime":1567251364,"is_pvip":false,"replies":[{"id":"63511","content":"ä¸¤ä¸ªSQLæ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577515646,"ip_address":"","comment_id":129789,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567251364","product_id":100029501,"comment_content":"<br>SELECT COUNT(*) as num, role_main, AVG(hp_max) FROM heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC<br>SELECT COUNT(*) as num, attack_range, ROUND(AVG(hp_max+mp_max), 2), ROUND(MAX(hp_max+mp_max),2), ROUND(MIN(hp_max+mp_max),2) FROM heros WHERE (hp_max+mp_max)&gt;7000 GROUP BY attack_range ORDER BY num DESC<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465651,"discussion_content":"ä¸¤ä¸ªSQLæ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577515646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123099,"user_name":"æµ·æ´‹","can_delete":false,"product_type":"c1","uid":1369704,"ip_address":"","ucode":"F82635CDB2FB93","user_header":"https://static001.geekbang.org/account/avatar/00/14/e6/68/1871d6ba.jpg","comment_is_top":false,"comment_ctime":1565604793,"is_pvip":false,"replies":[{"id":"63879","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577602490,"ip_address":"","comment_id":123099,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565604793","product_id":100029501,"comment_content":"ä½œä¸šï¼š<br>mysql&gt; SELECT COUNT(*) as num, role_main, AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING COUNT(*) &gt; 5 ORDER  BY num DESC;<br>+-----+-----------+-------------+<br>| num | role_main | AVG(hp_max) |<br>+-----+-----------+-------------+<br>|  17 | æˆ˜å£«      |        7028 |<br>|  10 | å¦å…‹      |      8312.4 |<br>|   6 | æ³•å¸ˆ      |        6417 |<br>+-----+-----------+-------------+<br>3 rows in set (0.06 sec)<br><br>mysql&gt; SELECT ROUND(COUNT(*),2) as num, ROUND(AVG(hp_max+mp_max),2), ROUND(MAX(hp_max+mp_max),2), ROUND(MIN(hp_max+mp_max),2) FROM heros  WHERE (hp_max+mp_max) &gt; 7000 GROUP BY attack_range ORDER BY num DESC;<br>+-----+-----------------------------+-----------------------------+-----------------------------+<br>| num | ROUND(AVG(hp_max+mp_max),2) | ROUND(MAX(hp_max+mp_max),2) | ROUND(MIN(hp_max+mp_max),2) |<br>+-----+-----------------------------+-----------------------------+-----------------------------+<br>|  36 |                     8654.42 |                    11036.00 |                     7117.00 |<br>|  26 |                     7743.77 |                     8737.00 |                     7025.00 |<br>+-----+-----------------------------+-----------------------------+-----------------------------+<br>2 rows in set (0.06 sec)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462539,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577602490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121495,"user_name":"å†²","can_delete":false,"product_type":"c1","uid":1149914,"ip_address":"","ucode":"4191C8A4DF3840","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIk46cor5XVFTPZbPOnb7pViabgy450pobo46hRHFQz5nR5ocYRKIzC8vShic36vwa553H4Vj50x5wA/132","comment_is_top":false,"comment_ctime":1565148478,"is_pvip":false,"replies":[{"id":"63570","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577518518,"ip_address":"","comment_id":121495,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565148478","product_id":100029501,"comment_content":"1.SELECT COUNT(*) AS num,AVG(hp_max),role_main from heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num desc<br>2.SELECT COUNT(*) AS num,ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2) <br>FROM heros<br>WHERE hp_max+mp_max &gt; 7000 GROUP BY attack_range ORDER BY num DESC  ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461818,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577518518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120946,"user_name":"Reiser","can_delete":false,"product_type":"c1","uid":1078669,"ip_address":"","ucode":"E5DBBBA2F86FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/8d/c6a2a048.jpg","comment_is_top":false,"comment_ctime":1565016972,"is_pvip":true,"replies":[{"id":"63582","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577519015,"ip_address":"","comment_id":120946,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565016972","product_id":100029501,"comment_content":"SQLï¼š<br>SELECT COUNT(*) AS num ,role_main,AVG(hp_max) FROM heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num &gt;5 ORDER BY num DESC;<br><br>SELECT COUNT(*) AS num, ROUND(AVG(mp_max+hp_max),2),ROUND(MAX(mp_max+hp_max),2),ROUND(MIN(mp_max+hp_max),2) FROM heros WHERE (mp_max+hp_max)&gt;7000 GROUP BY attack_range ORDER BY num DESC ;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461544,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577519015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115729,"user_name":"Ronnyz","can_delete":false,"product_type":"c1","uid":1488280,"ip_address":"","ucode":"9F34527B1D343D","user_header":"https://static001.geekbang.org/account/avatar/00/16/b5/98/ffaf2aca.jpg","comment_is_top":false,"comment_ctime":1563706460,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563706460","product_id":100029501,"comment_content":"ä½œä¸šï¼š<br>1 &gt; SELECT COUNT(*) AS num, role_main, role_assist FROM heros<br>    -&gt; WHERE hp_max &gt; 6000<br>    -&gt; GROUP BY role_main<br>    -&gt; HAVING num &gt; 5<br>    -&gt; ORDER BY num DESC;<br>2 &gt; SELECT COUNT(*) AS num, ROUND(AVG(hp_max+mp_max),2) AS hm_avg, MAX(hp_max+mp_max) AS hm_max, MIN(hp_max+mp_max) AS hm_min FROM heros<br>    -&gt; WHERE (hp_max+mp_max) &gt; 7000<br>    -&gt; GROUP BY attack_range<br>    -&gt; ORDER BY num DESC;","like_count":0},{"had_liked":false,"id":115043,"user_name":"Fargo","can_delete":false,"product_type":"c1","uid":1018174,"ip_address":"","ucode":"434FC4C5D61750","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/3e/1976b66f.jpg","comment_is_top":false,"comment_ctime":1563460187,"is_pvip":false,"replies":[{"id":"63681","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577528118,"ip_address":"","comment_id":115043,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563460187","product_id":100029501,"comment_content":"1. SELECT COUNT(*) as num , role_main, AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC;<br>+-----+-----------+-------------+<br>| num | role_main | AVG(hp_max) |<br>+-----+-----------+-------------+<br>|  17 | æˆ˜å£«      |        7028 |<br>|  10 | å¦å…‹      |      8312.4 |<br>|   6 | æ³•å¸ˆ      |        6417 |<br>+-----+-----------+-------------+<br><br>2. SELECT COUNT(*) as num, ROUND(AVG(hp_max+mp_max), 2), MAX(hp_max+mp_max), MIN(hp_max+mp_max) FROM heros WHERE (hp_max+mp_max)&gt;7000 GROUP BY role_main ORDER BY num DESC;<br>+-----+------------------------------+--------------------+--------------------+<br>| num | ROUND(AVG(hp_max+mp_max), 2) | MAX(hp_max+mp_max) | MIN(hp_max+mp_max) |<br>+-----+------------------------------+--------------------+--------------------+<br>|  17 |                      7798.29 |               8898 |               7025 |<br>|  16 |                      8289.06 |               9290 |               7117 |<br>|  10 |                      9752.40 |              11036 |               8441 |<br>|   9 |                      7590.78 |               7770 |               7395 |<br>|   6 |                      8523.83 |               9843 |               7325 |<br>|   4 |                      7679.25 |               8054 |               7291 |<br>+-----+------------------------------+--------------------+--------------------+","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458943,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577528118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114573,"user_name":"è“å½±é—ªç”µ","can_delete":false,"product_type":"c1","uid":1276629,"ip_address":"","ucode":"0B7A42D79558E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/7a/d5/dbcaadf0.jpg","comment_is_top":false,"comment_ctime":1563341825,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563341825","product_id":100029501,"comment_content":"SELECT role_main ä¸»è¦å®šä½,count(1) æ•°é‡,AVG(hp_max) å¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ FROM heros<br>WHERE hp_max&gt;6000<br>GROUP BY role_main<br>HAVING count(1)&gt;5<br>ORDER BY COUNT(1) DESC;<br><br>SELECT ROUND(MIN(hp_max+mp_max),2) HPMPä¹‹å’Œæœ€å°å€¼,ROUND(MAX(hp_max+mp_max),2) HPMPä¹‹å’Œæœ€å¤§å€¼,ROUND(AVG(hp_max+mp_max),2) HPMPä¹‹å’Œå¹³å‡å€¼, count(1) è‹±é›„æ•°é‡<br>FROM heros<br>WHERE (hp_max+mp_max)&gt;7000<br>GROUP BY attack_range<br>ORDER BY count(1) DESC;","like_count":0},{"had_liked":false,"id":113898,"user_name":"ê¯­Jê¯­Iê¯­Nê¯­ğŸ™ƒ","can_delete":false,"product_type":"c1","uid":1524143,"ip_address":"","ucode":"7866E1904E02BB","user_header":"https://static001.geekbang.org/account/avatar/00/17/41/af/e5629318.jpg","comment_is_top":false,"comment_ctime":1563182271,"is_pvip":false,"replies":[{"id":"63699","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577528505,"ip_address":"","comment_id":113898,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563182271","product_id":100029501,"comment_content":"#1ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼å¤§äº6000çš„è‹±é›„ï¼ŒæŒ‰ç…§ä¸»è¦å®šä½è¿›è¡Œåˆ†ç»„ï¼Œé€‰æ‹©åˆ†ç»„è‹±é›„æ•°é‡å¤§äº5çš„åˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå¹¶æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„è‹±é›„æ•°é‡ã€ä¸»è¦å®šä½å’Œå¹³å‡æœ€å¤§ç”Ÿå‘½å€¼ã€‚<br>-- SELECT COUNT(*) as num, role_main, AVG(hp_max) <br>-- FROM heros <br>-- WHERE hp_max &gt; 6000<br>-- GROUP BY role_main<br>-- HAVING num &gt; 5<br>-- ORDER BY num DESC;<br><br>#2.ç­›é€‰æœ€å¤§ç”Ÿå‘½å€¼ä¸æœ€å¤§æ³•åŠ›å€¼ä¹‹å’Œå¤§äº7000çš„è‹±é›„ï¼ŒæŒ‰ç…§æ”»å‡»èŒƒå›´æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„çš„è‹±é›„æ•°é‡ï¼Œä»¥åŠåˆ†ç»„è‹±é›„çš„æœ€å¤§ç”Ÿå‘½å€¼ä¸æ³•åŠ›å€¼ä¹‹å’Œçš„å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œ<br>#å¹¶æŒ‰ç…§åˆ†ç»„è‹±é›„æ•°ä»é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œå…¶ä¸­èšé›†å‡½æ•°çš„ç»“æœåŒ…æ‹¬å°æ•°ç‚¹åä¸¤ä½ã€‚<br>SELECT COUNT(*) as num, ROUND(AVG(DISTINCT (hp_max+mp_max)),2) ,ROUND(MAX(hp_max+mp_max), 2), ROUND(MIN(hp_max+mp_max), 2)<br>FROM heros<br>WHERE (hp_max+mp_max) &gt; 7000<br>GROUP BY attack_range<br>ORDER BY num desc;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458427,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577528505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113674,"user_name":"ã€€Hail hydra","can_delete":false,"product_type":"c1","uid":1545230,"ip_address":"","ucode":"76DD13853E5888","user_header":"https://static001.geekbang.org/account/avatar/00/17/94/0e/0be827a5.jpg","comment_is_top":false,"comment_ctime":1563113895,"is_pvip":false,"replies":[{"id":"47683","content":"å’ŒåµŒå¥—æŸ¥è¯¢ä¸åŒï¼ŒHAVINGæ˜¯ç”¨äºGROUP BYä¹‹åçš„æ¡ä»¶è¿‡æ»¤","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1566902643,"ip_address":"","comment_id":113674,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563113895","product_id":100029501,"comment_content":"having æ˜¯åœ¨åŸæŸ¥è¯¢ç»“æœå†æ¬¡è¿‡æ»¤ ç±»ä¼¼äº åµŒå¥—æŸ¥è¯¢çš„æ„æ€å—","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458343,"discussion_content":"å’ŒåµŒå¥—æŸ¥è¯¢ä¸åŒï¼ŒHAVINGæ˜¯ç”¨äºGROUP BYä¹‹åçš„æ¡ä»¶è¿‡æ»¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566902643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112785,"user_name":"Geek_70747e","can_delete":false,"product_type":"c1","uid":1309814,"ip_address":"","ucode":"A832E20E951A00","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKdzXiawss5gGmlPicx9IiblxOTf4oSW16MWd696fue60zDA9NJTrGWenuLxS0COZZSzekV8QZGicyJOQ/132","comment_is_top":false,"comment_ctime":1562826188,"is_pvip":true,"replies":[{"id":"63975","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577606559,"ip_address":"","comment_id":112785,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562826188","product_id":100029501,"comment_content":"ä½œä¸šï¼š<br>1ï¼‰ SELECT<br>\tCOUNT(*) AS num,<br>\trole_main,<br>\tAVG(hp_max)<br>FROM<br>\theros<br>WHERE<br>\thp_max &gt; 6000<br>GROUP BY<br>\trole_main<br>HAVING<br>\tnum &gt; 5<br>ORDER BY<br>\tnum DESC;<br><br>2ï¼‰ SELECT<br>\tcount(*) AS num,<br>\tround(avg(hp_max + mp_max), 2),<br>\tround(max(hp_max + mp_max)),<br>\tround(min(hp_max + mp_max))<br>FROM<br>\theros<br>WHERE<br>\t(hp_max + mp_max) &gt; 7000<br>GROUP BY<br>\tattack_range<br>ORDER BY<br>\tnum DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457913,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112100,"user_name":"2525","can_delete":false,"product_type":"c1","uid":1180247,"ip_address":"","ucode":"2426488C258203","user_header":"https://static001.geekbang.org/account/avatar/00/12/02/57/9b235866.jpg","comment_is_top":false,"comment_ctime":1562668752,"is_pvip":false,"replies":[{"id":"63732","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577530781,"ip_address":"","comment_id":112100,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562668752","product_id":100029501,"comment_content":"ä½œä¸š: mysql <br>1.SELECT<br>\trole_main,<br>\tCOUNT(role_main) AS sum,<br>\tavg(hp_max) AS å¹³å‡æœ€å¤§ç”Ÿå‘½å€¼<br>FROM<br>\theros<br>WHERE<br>\thp_max &gt; 6000<br>GROUP BY<br>\trole_main<br>HAVING<br>\tsum &gt; 5<br>ORDER BY<br>\tsum DESC<br>2.SELECT<br>\tcount(attack_range) AS sum,<br>\tround(avg(hp_max + mp_max), 2),<br>\tround(max(hp_max + mp_max), 2),<br>\tround(min(hp_max + mp_max), 2)<br>FROM<br>\theros<br>WHERE<br>\t(hp_max + mp_max) &gt; 7000<br>GROUP BY<br>\tattack_range<br>ORDER BY<br>\tsum DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457576,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577530781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110970,"user_name":"é›ªé£é¸¿","can_delete":false,"product_type":"c1","uid":1012325,"ip_address":"","ucode":"65D7B030828809","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/65/68bd8177.jpg","comment_is_top":false,"comment_ctime":1562404573,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1562404573","product_id":100029501,"comment_content":"MSSQLä¸­HAVINGå­å¥ä¸èƒ½ä½¿ç”¨SELECTä¸­çš„èšåˆç»“æœçš„åˆ«å","like_count":0},{"had_liked":false,"id":110639,"user_name":"ä¸€å¶çŸ¥ç§‹","can_delete":false,"product_type":"c1","uid":1445189,"ip_address":"","ucode":"15A95FA86B7AE4","user_header":"https://static001.geekbang.org/account/avatar/00/16/0d/45/b88a1794.jpg","comment_is_top":false,"comment_ctime":1562308853,"is_pvip":false,"replies":[{"id":"63752","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577531144,"ip_address":"","comment_id":110639,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562308853","product_id":100029501,"comment_content":"äº¤ä½œä¸š<br>1ï¼‰MySQL SELECT COUNT(*) AS num, role_main, AVG(hp_max) FROM heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num;<br>æ‰§è¡Œç»“æœï¼š<br>+-----+-----------+-------------+<br>| num | role_main | AVG(hp_max) |<br>+-----+-----------+-------------+<br>|   6 | æ³•å¸ˆ      |        6417 |<br>|  10 | å¦å…‹      |      8312.4 |<br>|  17 | æˆ˜å£«      |        7028 |<br>+-----+-----------+-------------+<br>3 rows in set (0.00 sec)<br><br>2ï¼‰MySQL  :<br>SELECT COUNT(*) AS num,<br>\t\t ROUND(AVG(hp_max+mp_max), 2) AS `average(hp+mp)`,<br>\t\t ROUND(MAX(hp_max+mp_max), 2) AS `maximum(hp+mp)`, <br>\t\t ROUND(MIN(hp_max+mp_max), 2) AS `minimum(hp+mp)`<br>FROM heros <br>WHERE (hp_max+mp_max)&gt;7000 <br>GROUP BY attack_range <br>ORDER BY num DESC;<br><br>æ‰§è¡Œç»“æœï¼š<br>| num | average(hp+mp) | maximum(hp+mp) | minimum(hp+mp) |<br>+-----+----------------+----------------+----------------+<br>|  36 |        8654.42 |       11036.00 |        7117.00 |<br>|  26 |        7743.77 |        8737.00 |        7025.00 |<br>+-----+----------------+----------------+----------------+<br>2 rows in set (0.00 sec)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456981,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577531144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110414,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1562251355,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562251355","product_id":100029501,"comment_content":"è€å¸ˆï¼Œâ€œHAVINGç”¨äºåˆ†ç»„è¿‡æ»¤â€<br>è¿™å¥æ˜¯ä¸æ˜¯æŠŠHAVINGè¯´çš„æœ‰ç‚¹å°äº†ï¼ŒHAVINGåº”è¯¥æ˜¯ç”¨äºä¸­é—´è¡¨æˆ–è€…è¯´ä¸´æ—¶è¡¨çš„ç­›é€‰å§","like_count":0},{"had_liked":false,"id":109551,"user_name":"å°ç¾çŒ´77","can_delete":false,"product_type":"c1","uid":1572790,"ip_address":"","ucode":"6275071FD0C832","user_header":"https://static001.geekbang.org/account/avatar/00/17/ff/b6/f84cf419.jpg","comment_is_top":false,"comment_ctime":1562056253,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562056253","product_id":100029501,"comment_content":"æé—®ä¸€ä¸‹ï¼Œè€å¸ˆï¼Œç»ƒä¹ äºŒé‡Œï¼Œèƒ½å¦å°†æœ€å¤§ç”Ÿå‘½ä¸æœ€å¤§æ³•åŠ›ä¹‹å’Œ å½“åšä¸€ä¸ªå˜é‡å‘¢ï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·<br>select  count(*) as num<br>(hp_max+mp_max) as sum_max<br>Round(AVG(sum_max))<br>Round(MAX(sum_max))<br>Round(MIN(sum_max))","like_count":0,"discussions":[{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5926,"discussion_content":"æˆ‘è¯•è¿‡äº† æ˜¯ä¸è¡Œçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566539937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109539,"user_name":"xcoder","can_delete":false,"product_type":"c1","uid":1207135,"ip_address":"","ucode":"2C70ED36B4AC8E","user_header":"https://static001.geekbang.org/account/avatar/00/12/6b/5f/cec1e980.jpg","comment_is_top":false,"comment_ctime":1562053563,"is_pvip":false,"replies":[{"id":"63978","content":"å¯¹çš„ æ²¡é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577606652,"ip_address":"","comment_id":109539,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562053563","product_id":100029501,"comment_content":"1. SELECT COUNT(*) AS num, AVG(hp_max),role_main FROM heros WHERE hp_max&gt;6000 <br>GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC;<br>--    +-----+-------------+-----------+<br>| num | AVG(hp_max) | role_main |<br>+-----+-------------+-----------+<br>|  17    |        7028       | æˆ˜å£«      |<br>|  10    |      8312.4       | å¦å…‹      |<br>|   6    |        6417        | æ³•å¸ˆ      |<br>+-----+-------------+-----------+<br><br>2.  SELECT COUNT(*) AS num,ROUND(AVG(hp_max+mp_max),2),MAX(hp_max+mp_max),MIN(hp_max+mp_max),<br>attack_range FROM heros WHERE hp_max+mp_max&gt;7000 GROUP BY attack_range ORDER BY num DESC;<br>--   +-----+-----------------------------+--------------------+--------------------+--------------+<br>| num | ROUND(AVG(hp_max+mp_max),2) | MAX(hp_max+mp_max) | MIN(hp_max+mp_max) | attack_range |<br>+-----+-----------------------------+--------------------+--------------------+--------------+<br>|  36 |                     8654.42 |              11036 |               7117 | è¿‘æˆ˜         |<br>|  26 |                     7743.77 |               8737 |               7025 | è¿œç¨‹         |<br>+-----+-----------------------------+--------------------+--------------------+--------------+<br>æˆ‘æƒ³æˆ‘çš„åº”è¯¥æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456455,"discussion_content":"å¯¹çš„ æ²¡é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109106,"user_name":"leol","can_delete":false,"product_type":"c1","uid":1303229,"ip_address":"","ucode":"7FA42EAAFBAEB5","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/bd/b65420ae.jpg","comment_is_top":false,"comment_ctime":1561962975,"is_pvip":false,"replies":[{"id":"63951","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577605735,"ip_address":"","comment_id":109106,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561962975","product_id":100029501,"comment_content":"è™½ç„¶æ™šä¸€èŠ‚ï¼Œä½œä¸šè¿˜æ˜¯è¦äº¤çš„<br>select count(*) as num,role_main ,avg(hp_max)  from heros where hp_max&gt;6000 <br>group by role_main having num&gt;5 order by num desc ;<br><br>select count(*) as num ,round(avg(hp_max+mp_max),2),round(max(hp_max+mp_max),2),round(min(hp_max+mp_max),2)  from heros where hp_max+mp_max&gt;7000<br>group by attack_range  order by num desc;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456245,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577605735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108864,"user_name":"åå¤","can_delete":false,"product_type":"c1","uid":1449474,"ip_address":"","ucode":"4D627CFA5A4B82","user_header":"https://static001.geekbang.org/account/avatar/00/16/1e/02/2864e0f2.jpg","comment_is_top":false,"comment_ctime":1561905017,"is_pvip":false,"replies":[{"id":"63961","content":"Good Job èµä¸‹åšæŒåšä½œä¸šçš„åŒå­¦","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577605973,"ip_address":"","comment_id":108864,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561905017","product_id":100029501,"comment_content":"SELECT COUNT(*) as num, role_main, AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC;<br>+-----+-----------+-------------+<br>| num | role_main | AVG(hp_max) |<br>+-----+-----------+-------------+<br>|  17 | æˆ˜å£«      |        7028 |<br>|  10 | å¦å…‹      |      8312.4 |<br>|   6 | æ³•å¸ˆ      |        6417 |<br>+-----+-----------+-------------+<br>3 rows in set (0.00 sec)<br><br><br>SELECT COUNT(*) as num, attack_range, ROUND(AVG(hp_max+mp_max),2) as avg_, ROUND(MAX(hp_max+mp_max),2) as max_, ROUND(MIN(hp_max+mp_max),2) as min_ FROM heros WHERE hp_max + mp_max &gt; 7000 GROUP BY attack_range ORDER BY num DESC;<br>+-----+--------------+---------+----------+---------+<br>| num | attack_range | avg_    | max_     | min_    |<br>+-----+--------------+---------+----------+---------+<br>|  36 | è¿‘æˆ˜         | 8654.42 | 11036.00 | 7117.00 |<br>|  26 | è¿œç¨‹         | 7743.77 |  8737.00 | 7025.00 |<br>+-----+--------------+---------+----------+---------+<br>2 rows in set (0.00 sec)<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456141,"discussion_content":"Good Job èµä¸‹åšæŒåšä½œä¸šçš„åŒå­¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577605973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108818,"user_name":"è«è«","can_delete":false,"product_type":"c1","uid":1170881,"ip_address":"","ucode":"D3A70E02A100F1","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/c1/e73d9bf1.jpg","comment_is_top":false,"comment_ctime":1561889610,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561889610","product_id":100029501,"comment_content":"1ã€<br>SELECT COUNT(*) AS `sum`,role_main AS &#39;ä¸»è¦å®šä½&#39;,AVG(hp_max) AS &#39;æœ€å¤§ç”Ÿå‘½å€¼&#39; FROM heros<br>WHERE hp_max&gt;6000 GROUP BY role_main HAVING `sum`&gt;5 ORDER BY `sum` DESC<br><br>2ã€<br>SELECT COUNT(*) AS &#39;è‹±é›„æ•°é‡&#39;,ROUND(AVG(hp_max+mp_max),2) AS `avg`,ROUND(MAX(hp_max+mp_max),2) AS `max`,ROUND(MIN(hp_max+mp_max),2) AS `min`<br>FROM heros<br>WHERE (hp_max+mp_max)&gt;7000 GROUP BY attack_range","like_count":0},{"had_liked":false,"id":108774,"user_name":"æœªæ¥çš„èƒ¡å…ˆæ£®","can_delete":false,"product_type":"c1","uid":1234682,"ip_address":"","ucode":"AFF193AC0E2E6C","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/fa/1f5bf642.jpg","comment_is_top":false,"comment_ctime":1561878896,"is_pvip":false,"replies":[{"id":"63965","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577606068,"ip_address":"","comment_id":108774,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561878896","product_id":100029501,"comment_content":"äº¤ä½œä¸šäº†<br>SELECT COUNT(*),role_main ,AVG(hp_max)<br>FROM heros<br>WHERE hp_max&gt;6000<br>GROUP BY role_main<br>HAVING COUNT(*)&gt;5<br>ORDER BY COUNT(*) DESC;<br><br>SELECT COUNT(*),ROUND( AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2)<br>FROM heros<br>WHERE hp_max+mp_max&gt;7000<br>GROUP BY attack_range<br>ORDER BY  COUNT(*) DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456110,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108763,"user_name":"Neo","can_delete":false,"product_type":"c1","uid":1070189,"ip_address":"","ucode":"A2B2E2F8780557","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/6d/c947ef55.jpg","comment_is_top":false,"comment_ctime":1561877127,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561877127","product_id":100029501,"comment_content":"1. SELECT COUNT(*) AS hero_num, role_main, AVG(hp_max) FROM heros where hp_max &gt; 6000 GROUP BY role_main HAVING hero_num &gt; 5;<br>2. SELECT COUNT(*) AS hero_num, ROUND(AVG(hp_max+mp_max), 2), MAX(hp_max+mp_max), MIN(hp_max+mp_max) FROM heros WHERE (hp_max+mp_max)&gt;7000 GROUP BY attack_max ORDER BY  hero_num ASC;","like_count":0},{"had_liked":false,"id":108685,"user_name":"Hoo-Ah","can_delete":false,"product_type":"c1","uid":1306913,"ip_address":"","ucode":"823093A6C7DEE7","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/21/52e8267b.jpg","comment_is_top":false,"comment_ctime":1561855661,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561855661","product_id":100029501,"comment_content":"SELECT ... FROM ... WHERE ... GROUP BY ... HAVING ... ORDER BY ...","like_count":0},{"had_liked":false,"id":108582,"user_name":"ç”°ä½³ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1034087,"ip_address":"","ucode":"D31C9799F383D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/67/0077314b.jpg","comment_is_top":false,"comment_ctime":1561811347,"is_pvip":false,"replies":[{"id":"63970","content":"ä¼šçš„ åé¢æœ‰è®²åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577606150,"ip_address":"","comment_id":108582,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561811347","product_id":100029501,"comment_content":"è€å¸ˆï¼Œçœ‹äº†å‰å‡ èŠ‚è¯¾ï¼Œè®²è¿°çš„éƒ½æ˜¯sqlçš„åŸºæœ¬ç”¨æ³•ï¼Œæ²¡æœ‰æ¶‰åŠåˆ°æ€§èƒ½é—®é¢˜ï¼Œå…¶å®å¾ˆå¤šæ–¹å¼æ˜¯ä¸èƒ½ç”¨åœ¨å¤§æµé‡çš„ç”Ÿäº§ç¯å¢ƒçš„ï¼Œä»¥åçš„ç« èŠ‚ä¼šæ¶‰åŠåˆ°é«˜æ•ˆæŸ¥è¯¢çš„å†…å®¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456051,"discussion_content":"ä¼šçš„ åé¢æœ‰è®²åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108581,"user_name":"psnail","can_delete":false,"product_type":"c1","uid":1189122,"ip_address":"","ucode":"D30553D8CE9CCE","user_header":"https://static001.geekbang.org/account/avatar/00/12/25/02/93864330.jpg","comment_is_top":false,"comment_ctime":1561810689,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1561810689","product_id":100029501,"comment_content":"å¦‚æœå°† select ... from ... where ...group by ... having..æ”¹ä¸ºselect ... (select. from. where. group by. )...where...æ˜¯ä¸æ˜¯ä¸€æ ·ï¼Ÿä¸çŸ¥é“é‚£ç§æ•ˆç‡é«˜ï¼Ÿä¼˜åŒ–å™¨å¤„ç†é€»è¾‘æ˜¯å¦ä¸€æ ·ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1234682,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d6/fa/1f5bf642.jpg","nickname":"æœªæ¥çš„èƒ¡å…ˆæ£®","note":"","ucode":"AFF193AC0E2E6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649,"discussion_content":"å­é›†ç”¨äº†åˆ†ç»„åï¼Œå¤–éƒ¨æŸ¥è¯¢ä½¿ç”¨ where ä¹Ÿæ˜¯ä¼šæŠ¥é”™çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561878814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108577,"user_name":"å¾®å‡‰","can_delete":false,"product_type":"c1","uid":1178156,"ip_address":"","ucode":"F6BD0AE11AE224","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/2c/9a0c45e6.jpg","comment_is_top":false,"comment_ctime":1561809124,"is_pvip":false,"replies":[{"id":"63983","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577606809,"ip_address":"","comment_id":108577,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561809124","product_id":100029501,"comment_content":"1.SELECT<br>\tCOUNT(*) AS num,<br>\trole_main,<br>\tAVG(hp_max)<br>FROM<br>\theros<br>WHERE<br>\thp_max &gt; 6000<br>GROUP BY<br>\trole_main<br>HAVING<br>\tnum &gt; 5<br>ORDER BY<br>\tnum DESC<br><br>2.SELECT<br>\tCOUNT(*) AS num,<br>\tROUND(MAX(hp_max + mp_max), 2),<br>\tROUND(AVG(hp_max + mp_max), 2),<br>\tROUND(MIN(hp_max + mp_max), 2)<br>FROM<br>\theros<br>WHERE<br>\thp_max + mp_max &gt; 7000<br>GROUP BY<br>\tattack_range<br>ORDER BY<br>\tnum DESC","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456048,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108565,"user_name":"é‡è§é˜³å…‰","can_delete":false,"product_type":"c1","uid":1203576,"ip_address":"","ucode":"378E5D37B3CD0E","user_header":"https://static001.geekbang.org/account/avatar/00/12/5d/78/f011d586.jpg","comment_is_top":false,"comment_ctime":1561802912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561802912","product_id":100029501,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜é—®ä¸‹: æŒ‰ç…§sqlæ‰§è¡Œé¡ºåº havingåœ¨selectä¹‹å‰ï¼ŒæŒ‰ç…§ç†è®ºæ¥è®²havingåº”è¯¥ä¸èƒ½ä½¿ç”¨selectä¸­çš„åˆ«å  ä½†æ˜¯å®é™…æ˜¯å¯ä»¥çš„ã€‚è¯·é—®è¿™æ˜¯ä»€ä¹ˆåŸå› ","like_count":0},{"had_liked":false,"id":108495,"user_name":"OperaX","can_delete":false,"product_type":"c1","uid":1510551,"ip_address":"","ucode":"66947CD04E3B3E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI8mFt5wSkia3yumk409E65JIlGoreva1Q25icTks0XB0EDC7WJ5V0z6zuvgGkI2Zrh5cBXGS5Hea8A/132","comment_is_top":false,"comment_ctime":1561784087,"is_pvip":true,"replies":[{"id":"39292","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561794601,"ip_address":"","comment_id":108495,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561784087","product_id":100029501,"comment_content":"SELECT<br>\tCOUNT(*) num,<br>\trole_main,<br>\tAVG( hp_max ) hp_avg <br>FROM<br>\theros <br>WHERE<br>\thp_max &gt; 6000 <br>GROUP BY<br>\trole_main <br>HAVING<br>\tCOUNT(*) &gt; 5 <br>ORDER BY<br>\tCOUNT(num) DESC ;<br><br>SELECT<br>\tCOUNT(*) num,<br>\tROUND(AVG(hp_max + mp_max), 2),<br>\tROUND(MAX(hp_max + mp_max), 2),<br>\tROUND(MIN(hp_max + mp_max), 2)<br>FROM<br>\theros<br>WHERE<br>\t(hp_max + mp_max) &gt; 7000<br>GROUP BY<br>\tattack_range<br>ORDER BY<br>\tCOUNT(*) desc","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456006,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561794601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108406,"user_name":"å¤§æ–Œ","can_delete":false,"product_type":"c1","uid":1002183,"ip_address":"","ucode":"1434C2B0A29135","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/c7/ec18673b.jpg","comment_is_top":false,"comment_ctime":1561745072,"is_pvip":false,"replies":[{"id":"39294","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561794664,"ip_address":"","comment_id":108406,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561745072","product_id":100029501,"comment_content":"1.select count(*) as num,avg(hp_max),role_main from heros where hp_max&gt;6000  group by role_main having num&gt;5 order by num desc;<br><br>2.select count(*) as num,round(max(hp_max+mp_max),2)  as max,round(avg(hp_max+mp_max),2) as avg,round(min(hp_max+mp_max),2) as min from heros where (hp_max+mp_max)&gt;7000 group by attack_range order by num desc;<br><br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455956,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561794664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108394,"user_name":"å¼ æ˜Œ","can_delete":false,"product_type":"c1","uid":1510451,"ip_address":"","ucode":"836821A2D3F783","user_header":"https://static001.geekbang.org/account/avatar/00/17/0c/33/5b6cdb06.jpg","comment_is_top":false,"comment_ctime":1561737328,"is_pvip":false,"replies":[{"id":"39295","content":"èšé›†å‡½æ•°ä¸»è¦é’ˆå¯¹æ•°æ®æ±‡æ€»ï¼Œæ˜¯ä»å¤šä¸ªè¡Œæ•°æ®ä¸­è®¡ç®—å‡ºä¸€ä¸ªç»“æœï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºåˆ†ç»„æ•°æ®çš„æ±‡æ€»ç»Ÿè®¡","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561794766,"ip_address":"","comment_id":108394,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561737328","product_id":100029501,"comment_content":"æ€»ç»“<br>èšé›†å‡½æ•° ä¸»è¦é’ˆå¯¹æ•°æ®åˆ†ç»„<br>ä¸»è¦æœ‰åˆ†ç»„ï¼Œæœ€å¤§ï¼Œæœ€å°ï¼Œå¹³å‡ï¼Œè®¡æ•°<br>åŒºåˆ†.havingå’Œwhere<br>å‰è€…å¯¹æ¯ä¸€è¡Œæ•°æ®ç­›é€‰<br>åè€…å¯¹åˆ†ç»„ç­›é€‰","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455949,"discussion_content":"èšé›†å‡½æ•°ä¸»è¦é’ˆå¯¹æ•°æ®æ±‡æ€»ï¼Œæ˜¯ä»å¤šä¸ªè¡Œæ•°æ®ä¸­è®¡ç®—å‡ºä¸€ä¸ªç»“æœï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºåˆ†ç»„æ•°æ®çš„æ±‡æ€»ç»Ÿè®¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561794766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108380,"user_name":"ğŸ„½ğŸ„¸ğŸ…‡ğŸ…„ğŸ…‚","can_delete":false,"product_type":"c1","uid":1000060,"ip_address":"","ucode":"853763C229A5AA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","comment_is_top":false,"comment_ctime":1561733856,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561733856","product_id":100029501,"comment_content":"æˆ‘æœ‰å‡ ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆ:<br>1. SELECT attack_range,hp_max+mp_max AS hp_mp, <br>COUNT(*) AS num, ROUND(AVG(hp_max+mp_max),2) AS avg_hp_mp, <br>MAX(hp_max+mp_max) AS hm_max,MIN(hp_max+mp_max) AS hm_min<br>FROM heros<br>GROUP BY `attack_range` <br>HAVING hp_max+mp_max&gt;7000<br>ORDER BY num DESC<br>æ‰§è¡Œè¿™æ¡è¯­å¥çš„æ—¶å€™, ä¼šæŠ¥é”™Unknown column &#39;hp_max&#39; in &#39;having clause&#39;, è¿™æ ·çš„è¯, HAVINGå°±æ²¡åŠæ³•è¿›è¡ŒWHEREæ“ä½œäº†, ä½†æ˜¯è€å¸ˆåœ¨æ–‡ä¸­è¯´, HAVINGæ”¯æŒæ‰€æœ‰çš„WHEREæ“ä½œ, è¿™ä¸ªæ˜¯å¦æœ‰å†²çª? <br>2. ä»Šå¤©åˆšå¥½é‡åˆ°ä¸€ä¸ªé—®é¢˜, ç”¨åˆ°SQLè‡ªå®šä¹‰å‡½æ•°, å­¦åˆ°äº†SQLä¸­çš„å˜é‡, äºæ˜¯å°±åœ¨ç¬¬äºŒé¢˜ä¸­å°è¯•ä½¿ç”¨:<br>SELECT attack_range, @hp_mp:=hp_max+mp_max, COUNT(*) AS num, <br>ROUND(AVG(@hp_mp),2) AS avg_hp_mp, <br>MAX(@hp_mp) AS hm_max,MIN(@hp_mp) AS hm_min<br>FROM heros<br>WHERE @hp_mp&gt;7000<br>GROUP BY `attack_range` <br>ORDER BY num DESC<br>ç»“æœå‘ç°, numè¿™åˆ—, åŠ èµ·æ¥çš„å’Œ, åˆšå¥½æ˜¯herosè¡¨ä¸­çš„è®°å½•æ€»æ•°, å¥½åƒWHEREçš„ç­›é€‰æ²¡æœ‰èµ·åˆ°åº”æœ‰çš„ä½œç”¨, è¯·è€å¸ˆæŒ‡ç‚¹ä¸‹","like_count":0},{"had_liked":false,"id":108352,"user_name":"Fred","can_delete":false,"product_type":"c1","uid":1585721,"ip_address":"","ucode":"DBA8999FE43E4F","user_header":"","comment_is_top":false,"comment_ctime":1561726645,"is_pvip":false,"replies":[{"id":"63984","content":"åŠ æ²¹~ Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577606830,"ip_address":"","comment_id":108352,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561726645","product_id":100029501,"comment_content":"SELECT COUNT(*) AS num, role_main, AVG(hp_max) FROM heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC;<br>SELECT COUNT(*) AS num, ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2) FROM heros WHERE hp_max+mp_max&gt;7000 GROUP BY attack_range ORDER BY num DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455931,"discussion_content":"åŠ æ²¹~ Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108331,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1561720778,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561720778","product_id":100029501,"comment_content":"åœ¨ç”¨dbeaverçš„æ—¶å€™ï¼Œå³ä½¿é€‰çš„æ˜¯å¤§å†™çš„SELECTä¹Ÿä¼šè¢«è½¬æ¢æˆå°å†™çš„selectä¸çŸ¥é“æ˜¯ä¸æ˜¯é»˜è®¤è®¾ç½®äº†ã€‚ã€‚ã€‚ğŸ˜… ","like_count":0},{"had_liked":false,"id":108300,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1561715272,"is_pvip":false,"replies":[{"id":"63986","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577606856,"ip_address":"","comment_id":108300,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561715272","product_id":100029501,"comment_content":"ä½œä¸š:<br><br>1. <br><br>select count(*) as num,role_main,AVG(hp_max) from heros where hp_max&gt;6000 group by role_main having num&gt;5 order by num desc;<br><br>num|role_main|AVG(hp_max)|<br>---|---------|-----------|<br> 17|æˆ˜å£«       |       7028|<br> 10|å¦å…‹       |     8312.4|<br>  6|æ³•å¸ˆ       |       6417|<br><br>2. <br><br>select count(*) as num,round(avg(hp_max+mp_max),2) as avgnum,round(max(hp_max+mp_max),2) as maxnum,round(min(hp_max+mp_max),2) as minnum from heros where (hp_max+mp_max)&gt;7000 group by attack_range  order by num desc;<br><br>num|avgnum |maxnum|minnum|<br>---|-------|------|------|<br> 36|8654.42| 11036|  7117|<br> 26|7743.77|  8737|  7025|","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455910,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577606856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108279,"user_name":"zjajxzg","can_delete":false,"product_type":"c1","uid":1441304,"ip_address":"","ucode":"EF2FBD463F266B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKuLsA1AAjUSO7oPHIqbA8f8slVIUw7nhdiaOI4nBYH6RxlyxXyFNe2Bc0g7yMoMHxnlh2mf43aVXw/132","comment_is_top":false,"comment_ctime":1561711479,"is_pvip":false,"replies":[{"id":"63989","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577607002,"ip_address":"","comment_id":108279,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561711479","product_id":100029501,"comment_content":"1ã€SELECT count(*), role_main, avg(hp_max)<br>  FROM heros<br> WHERE hp_max &gt; 6000<br> GROUP BY role_main<br> HAVING COUNT(*) &gt; 5<br> ORDER BY COUNT(*) DESC<br><br> 2ã€SELECT COUNT(*), ROUND(AVG(hp_max + mp_max), 2), ROUND((hp_max + mp_max), 2), ROUND(MIN(hp_max + mp_max), 2)<br>   FROM heros<br>  WHERE (hp_max + mp_max) &gt; 7000<br>\tGROUP BY attack_range<br>\tORDER BY COUNT(*) DESC","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455897,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108276,"user_name":"Zh","can_delete":false,"product_type":"c1","uid":1388911,"ip_address":"","ucode":"8B0032EC876B6B","user_header":"","comment_is_top":false,"comment_ctime":1561711189,"is_pvip":false,"replies":[{"id":"63990","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577607020,"ip_address":"","comment_id":108276,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561711189","product_id":100029501,"comment_content":"1:<br>SELECT COUNT(*) AS num,hp_max,AVG(hp_max) AS hp_max_avg FROM learn.heros WHERE hp_max&gt; 6000 GROUP BY role_main HAVING num&gt; 5 ORDER BY num DESC;<br>2:<br>SELECT COUNT(*) AS num,ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2) FROM learn.heros WHERE hp_max+mp_max&gt; 7000 GROUP BY attack_range ORDER BY num DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455896,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108207,"user_name":"æ—¶é—´æ˜¯æœ€çœŸçš„ç­”æ¡ˆ","can_delete":false,"product_type":"c1","uid":1183601,"ip_address":"","ucode":"B90F3EF769F865","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","comment_is_top":false,"comment_ctime":1561697270,"is_pvip":false,"replies":[{"id":"63994","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577607078,"ip_address":"","comment_id":108207,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561697270","product_id":100029501,"comment_content":"SELECT COUNT(*) AS num,role_main,AVG(hp_max) FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC ;<br><br>SELECT COUNT(*) AS num,ROUND(AVG(hp_max+mp_max),2),MAX(hp_max+mp_max),MIN(hp_max+mp_max) FROM heros WHERE (hp_max+mp_max) &gt; 7000 GROUP BY attack_range ORDER BY num DESC ;<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455870,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108179,"user_name":"æœˆç‰™å¤©å†²","can_delete":false,"product_type":"c1","uid":1079538,"ip_address":"","ucode":"E316AA9E23D554","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/f2/d8933ff9.jpg","comment_is_top":false,"comment_ctime":1561691314,"is_pvip":false,"replies":[{"id":"39214","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561700142,"ip_address":"","comment_id":108179,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561691314","product_id":100029501,"comment_content":"1. SELECT COUNT(*) num ,role_main,AVG(hp_max) FROM heros WHERE hp_max&gt;6000 GROUP BY role_main  HAVING num&gt;5 ORDER BY num DESC;<br><br>2. SELECT COUNT(*) num,ROUND(AVG(hp_max+mp_max),2),ROUND(MAX(hp_max+mp_max),2),ROUND(MIN(hp_max+mp_max),2) <br>FROM heros WHERE hp_max+mp_max&gt;7000 GROUP BY attack_range ORDER BY num DESC;","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455860,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561700142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108158,"user_name":"[è€¶]å‹è¶…î–","can_delete":false,"product_type":"c1","uid":1400962,"ip_address":"","ucode":"890572F77C3670","user_header":"https://static001.geekbang.org/account/avatar/00/15/60/82/9a43504b.jpg","comment_is_top":false,"comment_ctime":1561688421,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1561688421","product_id":100029501,"comment_content":"å«ä½œä¸šï¼š<br>1.SELECT COUNT(*) AS num,role_main,role_assist,AVG(hp_max) AS å¹³å‡æœ€å¤§ç”Ÿå‘½ FROM heros WHERE hp_max&gt;6000 GROUP BY role_main HAVING num&gt;5 ORDER BY num DESC;<br><br>2.SELECT COUNT(*) AS num,ROUND(AVG(hp_max+mp_max),2) AS å¹³å‡å€¼,ROUND(MAX(hp_max+mp_max),2) AS æœ€å¤§å€¼,ROUND(MIN(hp_max+mp_max),2) AS æœ€å°å€¼ FROM heros WHERE (hp_max+mp_max)&gt;7000 GROUP BY attack_range ORDER BY num DESC;<br><br>","like_count":0},{"had_liked":false,"id":108156,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1561687865,"is_pvip":false,"replies":[{"id":"63995","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577607093,"ip_address":"","comment_id":108156,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561687865","product_id":100029501,"comment_content":"mysql&gt; SELECT COUNT(*) AS num, role_main, AVG(hp_max) AS avg_hp_max FROM heros WHERE hp_max &gt; 6000 GROUP BY role_main HAVING num &gt; 5 ORDER BY num DESC;<br>+-----+-----------+------------+<br>| num | role_main | avg_hp_max |<br>+-----+-----------+------------+<br>|  17 | æˆ˜å£«      |       7028 |<br>|  10 | å¦å…‹      |     8312.4 |<br>|   6 | æ³•å¸ˆ      |       6417 |<br>+-----+-----------+------------+<br>3 rows in set (0.00 sec)<br><br>mysql&gt; SELECT COUNT(*) AS num, attack_range, ROUND(AVG(hp_max + mp_max), 2) AS avg_hp_mp, MAX(hp_max + mp_max) AS max_hp_mp, MIN(hp_max + mp_max) AS min_hp_mp FROM heros WHERE (hp_max + mp_max) &gt; 7000 GROUP BY attack_range ORDER BY num DESC;<br>+-----+--------------+-----------+-----------+-----------+<br>| num | attack_range | avg_hp_mp | max_hp_mp | min_hp_mp |<br>+-----+--------------+-----------+-----------+-----------+<br>|  36 | è¿‘æˆ˜         |   8654.42 |     11036 |      7117 |<br>|  26 | è¿œç¨‹         |   7743.77 |      8737 |      7025 |<br>+-----+--------------+-----------+-----------+-----------+<br>2 rows in set (0.00 sec)<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455845,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577607093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108132,"user_name":"Samson","can_delete":false,"product_type":"c1","uid":1572899,"ip_address":"","ucode":"2114D3E2E8C5BE","user_header":"https://static001.geekbang.org/account/avatar/00/18/00/23/17868694.jpg","comment_is_top":false,"comment_ctime":1561685490,"is_pvip":false,"replies":[{"id":"39190","content":"å·²æ›´æ­£","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1561691912,"ip_address":"","comment_id":108132,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561685490","product_id":100029501,"comment_content":"SQL: SELECT COUNT(*), role_main, role_assist FROM heros GROUP BY role_main, role_assist ORDER BY num DESC<br><br>è¿™ä¸ªè¯­å¥ä¸­ï¼Œnumæ˜¯ä»ä½•è€Œæ¥çš„å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å¿˜è®°åœ¨COUNT(*)åé¢å¿˜è®°åŠ AS numäº†ï¼Ÿè¿˜æ˜¯æœ¬å°±ä¸æ¯”åŠ ï¼Œå¦‚æœä¸å¿…åŠ çš„è¯ï¼Œåˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455835,"discussion_content":"å·²æ›´æ­£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561691912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108130,"user_name":"15900513463","can_delete":false,"product_type":"c1","uid":1210696,"ip_address":"","ucode":"4B7E1F2044C6A9","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/48/36a07912.jpg","comment_is_top":false,"comment_ctime":1561685320,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1561685320","product_id":100029501,"comment_content":"å›å¤æ¥¼ä¸Šï¼Œå…¶å®è®¡ç®—æœ€å¤§ï¼Œæœ€å°å€¼ä¸éœ€è¦ä½¿ç”¨ROUND()å‡½æ•°çš„ï¼Œè¿™æ ·åªä¼šé¢å¤–å¢åŠ å†…å­˜å¼€é”€ã€‚","like_count":0,"discussions":[{"author":{"id":1388911,"avatar":"","nickname":"Zh","note":"","ucode":"8B0032EC876B6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571,"discussion_content":"è™½ç„¶å¯ä»¥çœ‹åˆ°mp_maxå’Œhp_maxéƒ½æ˜¯æ²¡æœ‰å°æ•°çš„å€¼ï¼Œä½†åœ¨è¡¨ä¸­ä»–ä»¬å­˜å‚¨çš„ç±»å‹æ˜¯floatï¼Œå¦‚æœä¸ç”¨ROUND()ï¼Œå¦‚ä½•ä¿è¯floatç±»å‹çš„å€¼åªä¿å­˜2ä½å°æ•°ï¼Ÿæˆ‘åå€’è§‰å¾—åº”è¯¥ç”¨ROUND()å‡½æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561711467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108129,"user_name":"è‹ç±","can_delete":false,"product_type":"c1","uid":1396252,"ip_address":"","ucode":"4FA289E084B789","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erYNBIwAj3KdIXaXbeMBUjTMz31zAToHIJSdo7oQk8bfsibwViaLobVQ8miatwBlC5spLS9kVCzHMjUA/132","comment_is_top":false,"comment_ctime":1561685299,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1561685299","product_id":100029501,"comment_content":"HAVING åé¢ç”¨äº†NUMè¿™ä¸ªç»Ÿè®¡å­—æ®µï¼Œæ˜¯å› ä¸ºå‰é¢SELECT countï¼ˆ*ï¼‰AS NUMå—ï¼Œè¿™ä¸ªæ˜¯åœ¨å“ªä¸ªé˜¶æ®µè¿›è¡Œçš„å‘¢ï¼Œæˆ‘è®°å¾—SELECTé˜¶æ®µåœ¨GROUP BYä¹‹åå‘€","like_count":0,"discussions":[{"author":{"id":1443117,"avatar":"","nickname":"witluo","note":"","ucode":"3D9608C3DDDD95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1572,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼Œ SELECT  å’Œ GROUP BY  ï¼ŒHAVING åˆ°åº•å“ªä¸ªå…ˆæ‰§è¡Œï¼Ÿ   å¦‚æœ GROUP BY  ï¼ŒHAVING å…ˆæ‰§è¡Œçš„è¯ï¼Œåº”è¯¥çœ‹ä¸åˆ°SELECTå­—æ®µåˆ«åã€‚  æ±‚è€å¸ˆè§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562714933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000060,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","nickname":"ğŸ„½ğŸ„¸ğŸ…‡ğŸ…„ğŸ…‚","note":"","ucode":"853763C229A5AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589,"discussion_content":"SELECT attack_range, hp_max+mp_max AS hm_max \nFROM heros \nWHERE hp_max+mp_max>7000 \nHAVING hm_max>7000\nORDER BY hm_max DESC\nåœ¨åšé¢˜ä¸­, é‡åˆ°äº†ä¸ªé”™è¯¯, ç„¶åå°±æƒ³åˆ°, ä¼šä¸ä¼šæ˜¯è¿™æ ·:\næ‰§è¡ŒWHEREçš„æ—¶å€™, å¦‚æœä½¿ç”¨å­—æ®µåˆ«å, å³hm_max, \nä¼šæŠ¥é”™: Unknown column &#39;hm_max&#39; in &#39;where clause&#39;\näºæ˜¯, å°±æŠŠWHEREä¿®æ”¹ä¸ºhp_max+mp_max>7000, \nè¿™æ—¶WHEREæ²¡æœ‰æŠ¥é”™, è¯´æ˜SELECTæ˜¯åœ¨WHEREä¹‹åæ‰§è¡Œçš„, \nè€ŒHAVINGå’ŒORDER BYä½¿ç”¨åˆ«åhm_maxæ²¡æŠ¥é”™, \nè¯´æ˜HAVINGå’ŒORDER BYæ˜¯åœ¨SELECTä¹‹åæ‰§è¡Œçš„?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561734171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000060,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","nickname":"ğŸ„½ğŸ„¸ğŸ…‡ğŸ…„ğŸ…‚","note":"","ucode":"853763C229A5AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588,"discussion_content":"åœ¨å­¦ä¹ ä¸­æˆ‘ä¹Ÿæƒ³åˆ°è¿™ä¸ªé—®é¢˜äº†, å¸Œæœ›è€å¸ˆèƒ½è§£ç­”ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561731088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}