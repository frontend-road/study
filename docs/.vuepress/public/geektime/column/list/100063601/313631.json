{"id":313631,"title":"09 | 边缘中心：物联网网关有多重要？","content":"<p>你好，我是郭朝斌。</p><p>在进阶篇的前几讲，我剖析了物联网中跟设备有关的几个技术点，包括物模型、设备的零配置组网、设备进行网络通信要用到的MQTT协议等。</p><p>但是，并不是所有的设备都能<strong>直接</strong>接入互联网，直接跟云平台通信。比如智能家居中的一些传感器，它们使用的通信技术是 BLE 或者 ZigBee，本身连 IP 地址都没有。那么，这样的设备要怎么联网呢？</p><h2>物联网网关：设备和云平台之间的桥梁</h2><p>这个时候，我们就需要借助<strong>物联网网关</strong>的能力了。举个例子，我主持设计过一个冷库温湿度监测系统，它是基于 LoRa 通信技术的。</p><p>我们知道，冷库的环境是非常复杂的。首先，库房内部的<strong>蜂窝网络信号一般都很差</strong>，一方面是因为要增强保温性能，所以墙壁做得比普通的墙体要厚；另一方面是因为库房位置通常位于城市的郊区，比较偏远，所以经常是完全没有网络信号。其次，库房的<strong>信号环境是千变万化的</strong>，因为会出现满仓、空仓等多种情况。</p><p>所以，在冷库内部部署的监测设备，如果直接连接蜂窝网络的话，完全不能实现可靠和稳定的通信。</p><p>这种情况下，我选择的解决方案就是，在有稳定网络信号的地方部署物联网网关，让冷库里面的监测设备，通过 LoRa 这种穿透能力强、空旷环境通信范围可以达到几公里的技术跟网关通信，从而<strong>间接</strong>地实现设备的联网。</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/d6/2b/d6c122e2b43b2c8c9ee860a2945d222b.jpg?wh=2700*1169\" alt=\"\"></p><p>我们可以看到，物联网网关正在成为整个物联网体系中不可或缺的角色。它作为物联网设备与云平台之间的桥梁，变得越来越重要。</p><h2>协议转换：搭建桥梁的关键</h2><p>那么，物联网网关凭什么能搭建这座桥梁呢？奥秘就在于<strong>协议转换</strong>。其实，刚才智能家居和冷库的例子，就已经体现了这个功能。</p><p>BLE 、ZigBee 和 LoRa 设备在跟网关通信的时候，需要网关基于开放的或者内部私有的协议，解析出数据；然后网关再使用跟云平台的连接协议来组织数据，完成数据传输。</p><p>这个过程自然就要求网关设备能够支持不同的通信技术。我在下面给出了一张网关通信接口的结构示意图。</p><p><img src=\"https://static001.geekbang.org/resource/image/46/1c/46ec62221a9667baab1bb03e42ed691c.jpg?wh=2700*1199\" alt=\"\"></p><p>看这张图跟看地图一样，上北下南，上半部分叫“北向接口”，下半部分叫“南向接口”。这可不是我在生造概念，而是行业内约定俗成的说法。</p><p><strong>北向接口</strong>需要接入互联网，所以通常的选择有 RJ45 以太网口、光纤接口、Wi-Fi 和 4G、NB-IoT等蜂窝网络模组等。</p><p><strong>南向接口</strong>用来连接物联网设备，除了刚说的 BLE、ZigBee、LoRa、Wi-Fi这些无线技术的接口，常见的还有用在<strong>工控机</strong>（Industrial Personal Computer，工业控制计算机）上的 RJ45以太网口、RS232、RS485等有线接口。</p><p>这里需要注意的是，每个网关设备的接口类型和个数不是固定的，因为网关产品一般会根据应用场景确定几个不同的规格型号。不同型号的网关需要支持不同类型的协议，以及不同个数协议的转换，所以网关的协议转换功能一般采用插件的软件架构方式。</p><p><strong>插件机制</strong>这种二次开发能力非常重要。一方面，它让我们可以根据接口的情况，动态、灵活地配置协议转换功能；另一方面，它也可以方便我们开发私有协议的解析功能。</p><p>比如通过 BLE、ZigBee 或 LoRa 技术跟网关通信的设备，它们通常采用的是私有的应用层协议，这就需要我们基于设备架构设计时定义的私有协议，专门编写解析代码。</p><p>至于使用 RJ45网口或 Wi-Fi 跟网关连接的物联网设备，除了采用基于 TCP或者UDP的私有协议之外，也可能采用我们之前讲过的 MQTT 或者 CoAP这样标准的协议。这时，我们就需要按照这些协议的格式来处理。</p><p>另外，工控机 和 <strong>PLC</strong> （Programmable Logic Controller，可编程逻辑控制器）中经常使用的标准协议有 Modbus、ProfiBus、OPC UA 和 BACnet 等。如果你在相关行业，可能对它们有一定了解。这些协议也是需要进行转换的，因为它们一般只应用于工业领域。这里我就不展开介绍了，如果感兴趣的话，你可以在 Wikipedia 上查询到详细的资料。</p><h2>网关的其他功能</h2><p>经过协议转换，网关就得到了通用格式的数据。对于这些数据，网关还需要进行持久化，把数据临时存储起来。</p><p>网关的<strong>存储功能</strong>可以防止因网络临时故障等原因，导致设备数据的丢失。另外，网关和设备的配置信息也需要存储在网关中，以便设备运行过程中快速读取。</p><p>同时，数据的<strong>安全性</strong>也非常重要，物联网网关需要做好这几个方面的事情：</p><ol>\n<li>完善的<strong>本地身份认证</strong>。这样可以防止网关设备被随意修改软件或者数据。</li>\n<li>网关保证<strong>数据的加密传输</strong>。因为很多物联网设备的计算能力非常弱，不具备进行数据加密的能力，这时就需要借助网关来保证数据或者控制命令的加密和解密。</li>\n<li>网关能够支持<strong>运营商专网接入</strong>，或者支持<strong>VPN</strong>（Virtual Private Network，虚拟专用网络）技术。这里我补充说明一下，VPN技术的好处是基于互联网网络建立加密通道。这样既保证了数据传输的安全可靠，又比建立专线成本要低。常用的VPN协议有 IPsec、OpenVPN等。</li>\n</ol><p>除了我刚才讲到的协议转换、存储功能和安全管理，物联网网关一般还有<strong>设备管理</strong>、<strong>网关配置</strong>、<strong>空中升级</strong>这些功能模块。它们比较容易理解，我就不在这一讲展开介绍了。</p><p>到这里呢，我就把<strong>传统</strong>物联网网关的功能都讲解了。看到“传统”两个字，你可能疑惑了：还有现代网关吗？是的，现在有一个趋势就是越来越强调物联网网关的<strong>数据分析处理</strong>能力。</p><p>我在第4讲介绍过数据的分析处理。我们知道，云计算平台凭借着强大的处理能力、存储能力和极高的性价比，已经成为物联网系统的有力支撑。现在的物联网应用系统，主要就是基于云平台实现数据分析处理任务的。</p><h2>在网关上做数据分析</h2><p>既然如此，那为什么我们还要在网关上运行这些计算的任务呢？这是因为随着物联网的发展，海量的设备接入网络，随之而来的，是更加海量的数据源源不断的产生，并上传到云平台。</p><p>这就给云平台提出了很大的挑战。一方面是极大地消耗有限的网络带宽资源；另一方面，网络的不确定因素很多，有可能导致不可控的延时，从而对业务应用造成不可接受的影响。</p><p>而且物联网数据通常<strong>与物理实体关系密切</strong>。比如家庭监控摄像头中，家庭成员的肖像等视频信息是非常敏感的；而在工业场景中，很多数据是机密的。如果这些信息全部上传到云平台，会给用户带来很大的安全风险。</p><p>所以，现在行业内已经开始尝试将云平台上的部分计算服务，下沉到靠近数据发生地的“边缘设备”上进行，这就是<strong>边缘计算</strong>的由来，而物联网网关是边缘计算中<strong>最轻量级</strong>的解决方案的关键。</p><h2>边缘计算的好处</h2><p>怎么理解这种技术架构上的进化呢？你可以想一想，人体是如何处理各种感知信息的，是不是所有的信息都需要大脑来处理呢？</p><p>其实人体神经系统的信号是<strong>分层级</strong>传递和处理的。我们中学上生物课时都做过类似的试验，如果手指放到蜡烛上，手是下意识地快速移开，然后大脑才意识到发生了什么。这是四肢的一种非条件反射，它是由大脑皮层之下的低级别神经系统，如脑干、脊髓，直接控制完成的。它们距离四肢更近，可以保证在危险的情况下，更加快速地做出反应。</p><p><img src=\"https://static001.geekbang.org/resource/image/40/45/4051144174eb30fa69a92f3b205f3f45.jpg?wh=2700*1163\" alt=\"\"></p><p>边缘计算的设计，与人体的这个构造类似。边缘设备，比如物联网网关，完成<strong>初步</strong>的数据处理，和<strong>需要及时响应</strong>的计算任务；而云平台负责需要<strong>大规模数据</strong>和<strong>复杂计算</strong>的数据分析工作，以及完成<strong>整体的协调和控制</strong>。</p><p>具体来说，云平台将原有的云计算模型的部分计算任务迁移到网络边缘设备上来；网络边缘设备（比如路由器、移动网络基站等），在数据源附近执行数据处理和数据分析任务。这样一来，就降低了云计算中心的计算负载，减轻了物联网对于网络带宽的压力，提高了数据处理的效率。</p><p>我将边缘计算模型的好处，总结为四个方面：</p><ol>\n<li><strong>延迟低。</strong>数据只需要从产生设备传输到边缘设备，传输距离短，数据不需要通过其他网络，网络延迟低。</li>\n<li><strong>节约了主干网带宽。</strong>缓解大量数据传输所造成的网络拥堵想象。尤其像一些银行的专有网络，本身带宽非常有限，只能用于传输关键性的数据。</li>\n<li><strong>计算可用性好。</strong>数据在网络中的路径长度显著变短，因网络波动引起的计算服务不可用情况将有所减少。</li>\n<li><strong>隐私性更好。</strong>由于边缘设备距离用户近，用户的隐私数据不再需要上传到云平台，因此，在边缘计算场景下，用户的隐私也可以得到更好的保护。</li>\n</ol><h2>边缘计算对网关的影响</h2><p>技术架构的变化，一般也会对系统提出新的需求。边缘计算对网关的影响，主要体现在三个方面。</p><p>首先，为了更好地在网关中运行边缘计算任务，网关需要支持<strong>虚拟化技术</strong>，这在目前的实践中通常是采用<strong>容器技术</strong>实现。容器天然具有轻量和可移植的优点，非常适合开发人员快速测试应用程序，也方便维护人员在网关上大规模部署和更新应用程序。另外，容器技术也更利于网关使用容器自动运维平台技术，比如 Kubernetes，来实现应用程序的编排等功能。</p><p>其次，因为网络环境的不确定性，网关需要具备一定的<strong>自治能力</strong>。当网关与云平台的通信中断时，这种情况不应该影响网关处理数据的计算任务，和对物联网设备的管理。</p><p>最后，因为边缘计算的引入，我们需要在网关侧实现数据分析处理的任务。而网关的硬件资源非常多样，业务需求也千差万别，所以网关上提供统一的<strong>开发框架</strong>变得更加重要。开发框架可以为开发人员提供一致的API 和组件的互操作能力。这样开发人员可以更加高效地实现业务功能，也更容易和其他厂商协作。</p><p>这里我把加入边缘计算能力后的网关架构图放在下面，供你参考。</p><p><img src=\"https://static001.geekbang.org/resource/image/df/08/dfff704f684838dc0d5d35732d156208.jpg?wh=2700*1519\" alt=\"\"></p><h2>怎样实现边缘计算？</h2><p>我知道，你现在最可能提出的问题就是：有什么开源软件可以助力网关实现边缘计算呢？</p><p>我简单介绍一下开源的生态，也方便你更好地理解网关的相关技术。</p><p>首先说一下<strong>标准化组织</strong>。目前，在推进边缘计算的标准组织主要有三个，分别是：</p><ol>\n<li>Linux 基金会下的 <a href=\"https://www.lfedge.org/about/mission/\">LF Edge</a> （Linux Foundation Edge）和致力于推进Cloud Native的 <a href=\"https://www.cncf.io/\">CNCF</a>（Cloud Native Computing Foundation）</li>\n<li>Eclipse 基金会下面的 <a href=\"https://iot.eclipse.org/\">Eclipse IoT</a> 项目</li>\n<li>OpenStack基金会</li>\n</ol><p>至于<strong>容器技术</strong>方面的开源项目，主要有 <a href=\"https://kubeedge.io/en/\">KubeEdge</a> 项目，它的主要思路是将Kubernetes从云端扩展到边缘设备，方便应用程序在边缘网关上的编排和调度，同时实现云端和边缘设备的协同数据处理。</p><p>关于<strong>开发框架</strong>，比较知名的是 <a href=\"https://www.edgexfoundry.org/\">EdgeX Foundry</a> 项目，定位是为工业物联网提供通用的边缘计算框架。为此，它适配了很多协议，提供出标准的API接口。</p><p>专门针对<strong>智能家居领域</strong>的项目有 <a href=\"https://www.lfedge.org/projects/homeedge/\">Home Edge</a> ，它是三星贡献的一个开源项目，用于加速智能家居设备的边缘部署。</p><h2>小结</h2><p>总结一下，随着物联网应用场景越来越多，物联网网关正在成为“边缘中心”。它成为物联网的<strong>“云、边、端”架构</strong>（即云平台、边缘、终端三部分）中非常重要的组成部分。你在做物联网网关的架构设计和功能开发中，需要重点关注的内容有：</p><ol>\n<li>物联网网关是设备与云平台之间的桥梁，网关的南向接口和北向接口都非常多样。因此协议转换功能是必须包含的功能。它保证了物联网设备数据的可靠上传，和云平台控制命令的有效执行。</li>\n<li>关注网关基础功能的实现。这些功能包括存储功能、安全管理、设备管理、网关配置和空中升级这些功能模块。它们既保证了数据的安全和可靠传输，也为远程维护提供了支持。</li>\n<li>你需要根据业务场景，决定网关对于边缘计算的支持能力。边缘计算对于物联网网关的架构有3个方面的影响：<br>\n（1） 容器技术。容器技术的应用利于开发人员快速开发、测试应用程序，也方便维护人员在网关上大规模部署、更新应用程序。同时，基于容器自动运维平台技术可以实现应用程序的编排等功能。<br>\n（2）自治能力。它可以保证网络环境不稳定时，网关的数据分析处理任务的正常执行。<br>\n（3）开发框架。开发框架利于开发人员的开发工作，也有益于各部分组件的协同互操作。</li>\n</ol><h2>思考题</h2><p>最后，我还是给你留一个思考题。</p><p>边缘计算已经成为物联网的必要组成部分，行业内云计算企业、网关设备商、运营商都积极参与推进技术体系的发展。那你有使用这些边缘计算产品吗？应用在什么业务场景呢？</p><p>欢迎你在留言区和我交流，也欢迎你将这一讲分享给你的朋友一起讨论学习。</p>","neighbors":{"left":{"article_title":"08 | MQTT：在实践中掌握一个通信协议","id":312691},"right":{"article_title":"10 | 数据处理框架：批处理还是流处理？","id":314631}},"comments":[{"had_liked":false,"id":264298,"user_name":"紫薇天亮了吗","can_delete":false,"product_type":"c1","uid":1136074,"ip_address":"","ucode":"F1986277A3E015","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/ca/76549b8e.jpg","comment_is_top":false,"comment_ctime":1606412519,"is_pvip":false,"replies":[{"id":"95935","content":"基本上你可以将边缘计算与雾计算等同起来。他们只是表述的侧重点不同。雾计算强调的是云计算向边缘端的扩散；边缘计算强调边缘设备的计算、存储和应用平台等。","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1606568814,"ip_address":"","comment_id":264298,"utype":1}],"discussion_count":1,"race_medal":0,"score":"104685627623","product_id":100063601,"comment_content":"除了边缘计算，雾计算也是iot中常听到的名词，老师有机会展开讲讲吗。看得意犹未尽，是今年买的最值得的一门课了:）","like_count":25,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510505,"discussion_content":"基本上你可以将边缘计算与雾计算等同起来。他们只是表述的侧重点不同。雾计算强调的是云计算向边缘端的扩散；边缘计算强调边缘设备的计算、存储和应用平台等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606568814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264308,"user_name":"黄鑫荣","can_delete":false,"product_type":"c1","uid":1256331,"ip_address":"","ucode":"80B72CC68F7E06","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/8b/ea70179f.jpg","comment_is_top":false,"comment_ctime":1606435594,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57441010442","product_id":100063601,"comment_content":"有没有开源的网关项目呢？想自己diy一个。","like_count":14},{"had_liked":false,"id":265700,"user_name":"阿冲","can_delete":false,"product_type":"c1","uid":1062514,"ip_address":"","ucode":"06BF66D9009659","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKg7RjNMzSrIwUnjYstbdicVv5MawrQLTHc6rdpwm0Q04b7icj7eAb0F8zSxe8gmM99QBvTECK5KvrQ/132","comment_is_top":false,"comment_ctime":1606986522,"is_pvip":false,"replies":[{"id":"97126","content":"尽量不要有跨网关的规则，如果避免不了只能针对情况来处理了。<br>到设备端要看设备本身的能力和更新的便利性。复杂度肯定是增加了","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1607765847,"ip_address":"","comment_id":265700,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10196921114","product_id":100063601,"comment_content":"老师请教个问题，关于ifttt的。<br>1. 我目前的思路是规则统一云端处理，如果要脱网运行，规则可以下沉到边缘网关（如果设备很多，一个网关带不动，需要多个网关，对于跨网关的规则，边缘端有什么好的解决方案）。<br>2. 如果规则下沉到设备，是不是给系统带来很大的复杂度（规则同步问题是个麻烦事）。不知道业界主流的做法是什么？烦请老师指点。","like_count":2,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511017,"discussion_content":"尽量不要有跨网关的规则，如果避免不了只能针对情况来处理了。\n到设备端要看设备本身的能力和更新的便利性。复杂度肯定是增加了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607765847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264716,"user_name":"JY","can_delete":false,"product_type":"c1","uid":2311396,"ip_address":"","ucode":"5DE1DC047946E6","user_header":"","comment_is_top":false,"comment_ctime":1606612353,"is_pvip":false,"replies":[{"id":"96415","content":"我抓紧写稿哈","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1606867571,"ip_address":"","comment_id":264716,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10196546945","product_id":100063601,"comment_content":"催更，老师讲的太好了","like_count":3,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510658,"discussion_content":"我抓紧写稿哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606867571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264579,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1606530054,"is_pvip":true,"replies":[{"id":"95924","content":"边缘计算并不是完全不用云计算。边缘只是组成部分之一，经过边缘设备计算后，一些数据还是要上传云平台的。","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1606565007,"ip_address":"","comment_id":264579,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10196464646","product_id":100063601,"comment_content":"边缘计算设备的好处之一是 ： 延迟低 ，但是如果不上传云平台，边缘设备计算出来的数据怎么给网络上用户使用呢？ 如果给本地的用户使用，直接可以通过通讯技术发送出去？","like_count":3,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510608,"discussion_content":"边缘计算并不是完全不用云计算。边缘只是组成部分之一，经过边缘设备计算后，一些数据还是要上传云平台的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606565007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2337607,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/5RWibvHpkicInUx9qw2q0Tic5LhOCicqeXx7QnmDBmYVw0LRYvyCpB1T4qrEEqa0t7TdK1ibwOpjw80oREWeMaOxGlA/132","nickname":"Geek_3a54ab","note":"","ucode":"BF27EB5F74CA7F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330739,"discussion_content":"边缘计算只是在网关或设备端计算好结果，然后把结果上传到云端或直接反馈给设备端。过滤大量的无用数据，也提升效率","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1606700356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264462,"user_name":"YueShi","can_delete":false,"product_type":"c1","uid":1625530,"ip_address":"","ucode":"8F7AFAE4641A7D","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","comment_is_top":false,"comment_ctime":1606471342,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"10196405934","product_id":100063601,"comment_content":"我在想, 最早的联机网游是不是大概有点类似于边缘计算<br><br>特别是FPS游戏","like_count":2,"discussions":[{"author":{"id":1089144,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9e/78/7663ed26.jpg","nickname":"Nior","note":"","ucode":"FADC1F3CFA21FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331090,"discussion_content":"我觉得不算，网游从一开始设计的就是在本地进行画面的渲染之类的主要计算，云端只用来同步关键数据。现在的趋势反而是“反边缘计算”，在往云端游戏进化，弱化本地的计算作用，本地只用来进行显示。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1606785901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276998,"user_name":"小可","can_delete":false,"product_type":"c1","uid":1006735,"ip_address":"","ucode":"8834AF621FA67D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/8f/551b5624.jpg","comment_is_top":false,"comment_ctime":1612228452,"is_pvip":false,"replies":[{"id":"100768","content":"是的，所以小米的生态中除了专门的网关设备外，还有把网关的功能集成到其他设备中，比如音箱，电视，床头灯等","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1612583440,"ip_address":"","comment_id":276998,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5907195748","product_id":100063601,"comment_content":"现在做也是网关，除了存储功能其余都有，感觉更多的作用是数据中转。但是目前网关是部署在专网内网，如果向物联网网关发展的话，最多部署到社区或者工业园区，感觉下沉到家庭私密场所难度较大。家庭网关需要家庭智能场景应用及生态支持，不然用户不会买单。","like_count":2,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514893,"discussion_content":"是的，所以小米的生态中除了专门的网关设备外，还有把网关的功能集成到其他设备中，比如音箱，电视，床头灯等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612583440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050294,"avatar":"https://static001.geekbang.org/account/avatar/00/10/06/b6/55b7ea34.jpg","nickname":"Paul","note":"","ucode":"7018DE791BBAE7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571502,"discussion_content":"小米的多种设备都集成了网关功能，那最终选用哪个设备做网关要如何决策呢？还是说他们可以组网共同做网关？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652247501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264830,"user_name":"日照时间长","can_delete":false,"product_type":"c1","uid":1272010,"ip_address":"","ucode":"97C42328B65AB1","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ca/4cae7098.jpg","comment_is_top":false,"comment_ctime":1606664196,"is_pvip":true,"replies":[{"id":"96416","content":"端侧当然也可以做计算了。但是一个概念要抓本质，边缘计算是在讲云计算向边缘端的扩展。类似于雾计算，“云”在天上，“雾”是贴近地面的。","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1606867956,"ip_address":"","comment_id":264830,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5901631492","product_id":100063601,"comment_content":"如果在mcu上进行数据计算算是边缘计算吗？","like_count":2,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510700,"discussion_content":"端侧当然也可以做计算了。但是一个概念要抓本质，边缘计算是在讲云计算向边缘端的扩展。类似于雾计算，“云”在天上，“雾”是贴近地面的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606867956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332042,"user_name":"阿甘","can_delete":false,"product_type":"c1","uid":1057843,"ip_address":"","ucode":"BC93175B70E05D","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","comment_is_top":false,"comment_ctime":1642994258,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642994258","product_id":100063601,"comment_content":"除了老师前面讲到的三个影响，即 容器技术、自治能力和开发框架。我觉得边缘网关还有一个非常重要的影响点需要考虑，就是OTA。因为网关开始有比较重的逻辑了，而逻辑是需要迭代更新的，而因为部署在边缘测，更新起来不像云那么方便。事实上设备端也有这个问题。不知道老师对于OTA后面会有介绍吗？有没有推荐的技术关键词和链接分享？","like_count":1},{"had_liked":false,"id":283404,"user_name":"星","can_delete":false,"product_type":"c1","uid":1039351,"ip_address":"","ucode":"652BF9B9DB377B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/f7/29cff40f.jpg","comment_is_top":false,"comment_ctime":1615770425,"is_pvip":true,"replies":[{"id":"106691","content":"这个不方便推荐，而且也要看自己的应用场景来实际判断。工作中可以找几个厂商对比一下。","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1621759092,"ip_address":"","comment_id":283404,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1615770425","product_id":100063601,"comment_content":"老师好，请问网关设备商哪几家做的比较好呀？","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517024,"discussion_content":"这个不方便推荐，而且也要看自己的应用场景来实际判断。工作中可以找几个厂商对比一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621759092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1017863,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/07/7804f4cc.jpg","nickname":"逗逼师父","note":"","ucode":"ECC2D82F83CBE6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557553,"discussion_content":"你好，请问你这边有没有测试过几个厂家的了？我这边对接过两个厂家，一个开发中，时间上等不了他们，另一个在我们的配电房运行着就会死机，小半年也没有查出问题来。我这边也是着急想找人推荐个稳妥一点的试试。头疼。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647858992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279790,"user_name":"大王叫我来巡山","can_delete":false,"product_type":"c1","uid":1323223,"ip_address":"","ucode":"DC23F4F0444F4F","user_header":"https://static001.geekbang.org/account/avatar/00/14/30/d7/4999e677.jpg","comment_is_top":false,"comment_ctime":1613963893,"is_pvip":false,"replies":[{"id":"102050","content":"你看到的一般底层os就是Linux。<br>根据业务的需求来确定具体的配置。","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1614578502,"ip_address":"","comment_id":279790,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1613963893","product_id":100063601,"comment_content":"老师,我看tb上面卖的物联网网关价格大多在1000+,他内部跑的是linux系统么? 这个网关的性能经得起大量的计算么,还是在网关旁边配置一台高性能主机负责计算","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515871,"discussion_content":"你看到的一般底层os就是Linux。\n根据业务的需求来确定具体的配置。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614578502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279053,"user_name":"9ambition","can_delete":false,"product_type":"c1","uid":1704988,"ip_address":"","ucode":"E6463C18E8CF0B","user_header":"https://static001.geekbang.org/account/avatar/00/1a/04/1c/15c00997.jpg","comment_is_top":false,"comment_ctime":1613573619,"is_pvip":false,"replies":[{"id":"102057","content":"对，简单的还可以自己做，更复杂的场景最好找成熟的厂商","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1614579352,"ip_address":"","comment_id":279053,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1613573619","product_id":100063601,"comment_content":"边缘计算，真的最核心还是这个硬件板子的制作，之前不懂非要diy一个atmega328p+蓝牙直接做蓝牙网关，事实证明根本做不出来因为我都没有加北向接口就试图直接将蓝牙与单片机之间的串口通信的数据直接传到手机，就算蓝牙设置在透传模式也不能让手机收到蓝牙发的透传包。我觉得要是自己单干去做边缘计算的网关简直太困难，能用软件开源+硬件配置好的商用网关是最好的。就像老师课程里推荐的树莓派，乐鑫等把硬件平台搭好且成本可以负担的硬件平台。又或者是自己要真的会用iot应用的芯片也是可以的。","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515612,"discussion_content":"对，简单的还可以自己做，更复杂的场景最好找成熟的厂商","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614579352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268923,"user_name":"莹","can_delete":false,"product_type":"c1","uid":1020356,"ip_address":"","ucode":"395C6C4191B091","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/c4/40609b81.jpg","comment_is_top":false,"comment_ctime":1608434231,"is_pvip":false,"replies":[{"id":"99462","content":"👌","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1610862121,"ip_address":"","comment_id":268923,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1608434231","product_id":100063601,"comment_content":"现在感觉自己没有使用边缘计算产品，不过觉得在未来会越来越多，也越来越平常：特斯拉电动车，可以飞到荒无人烟的风电场检查器械的无人机……","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512083,"discussion_content":"👌","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610862121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268069,"user_name":"FutureEye","can_delete":false,"product_type":"c1","uid":1040569,"ip_address":"","ucode":"D5D50CD25B6BD2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e0/b9/ce3380ae.jpg","comment_is_top":false,"comment_ctime":1608043647,"is_pvip":false,"replies":[{"id":"99481","content":"好几家，可以私聊","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1610864978,"ip_address":"","comment_id":268069,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1608043647","product_id":100063601,"comment_content":"老师 你好，Lora的方案你用哪家可以介绍一下吗？最近项目有需要","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511834,"discussion_content":"好几家，可以私聊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610864978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265975,"user_name":"in9","can_delete":false,"product_type":"c1","uid":1024597,"ip_address":"","ucode":"22649824E18ADF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a2/55/eb844f58.jpg","comment_is_top":false,"comment_ctime":1607085940,"is_pvip":true,"replies":[{"id":"97118","content":"可以从openstack网站上找到。难度不大，你尝试自己解决一下。如果还有问题欢迎再交流。","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1607763592,"ip_address":"","comment_id":265975,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607085940","product_id":100063601,"comment_content":"老师关于推进边缘计算的标准组织中，OpenStack相关的资料您那里有没有相关资料","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511109,"discussion_content":"可以从openstack网站上找到。难度不大，你尝试自己解决一下。如果还有问题欢迎再交流。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607763592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265781,"user_name":"蒋良权","can_delete":false,"product_type":"c1","uid":1236189,"ip_address":"","ucode":"5A355D37948D59","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/dd/cf9e4ade.jpg","comment_is_top":false,"comment_ctime":1607012079,"is_pvip":false,"replies":[{"id":"97124","content":"嗯，这是为了简单化，比如zigbee网关只连接zigbee设备，蓝牙网关只连接蓝牙设备。","user_name":"作者回复","user_name_real":"郭朝斌","uid":"2302171","ctime":1607765317,"ip_address":"","comment_id":265781,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1607012079","product_id":100063601,"comment_content":"老师你好，阿里小米等物联网平台中是否也有设备网关，它们似乎都是设备统一数据协议跟网关平台通讯。","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"郭朝斌","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511041,"discussion_content":"嗯，这是为了简单化，比如zigbee网关只连接zigbee设备，蓝牙网关只连接蓝牙设备。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607765317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057843,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","nickname":"阿甘","note":"","ucode":"BC93175B70E05D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548006,"discussion_content":"所以是不是很少有适配多种协议的网关，一般是专用的协议网关？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642993996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}