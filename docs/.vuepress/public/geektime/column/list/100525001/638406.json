{"id":638406,"title":"13 | ç»„ä»¶è¿è¡Œæ—¶å…¼å®¹ï¼šè®©ç»„ä»¶å¯ä»¥çµæ´»æ’æ‹”","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä¿Šå½¬ã€‚</p><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·å®Œæˆäº†Sharingé¡¹ç›®çš„è·¯ç”±ä¸æ³¨å…¥æ”¹é€ ï¼Œç›®å‰å„ä¸ªç»„ä»¶åœ¨ç¼–è¯‘æ—¶çš„ä¾èµ–å·²ç»å®Œå…¨è§£é™¤äº†ã€‚</p><p>å¦‚æœè¯´å°†ä»£ç ç¼–è¯‘æ—¶æœŸçš„è€¦åˆè§£å¼€ï¼Œæ˜¯è¿ˆå¼€ç»„ä»¶åŒ–çš„ç¬¬ä¸€æ­¥ï¼Œé‚£ä¹ˆå®Œå–„ç»„ä»¶è¿è¡Œæ—¶çš„å…¼å®¹å°±æ˜¯ç»„ä»¶åŒ–è½åœ°çš„é‡è¦éªŒæ”¶æ ‡å‡†ã€‚åªæœ‰å®Œå–„ç»„ä»¶çš„è¿è¡Œæ—¶å…¼å®¹ï¼Œæ‰èƒ½çœŸæ­£åšåˆ°ç»„ä»¶çš„åŠ¨æ€æ’æ‹”ã€‚</p><p>å½“ç»„ä»¶å¯ä»¥åšåˆ°çµæ´»çš„åŠ¨æ€æ’æ‹”ï¼Œåˆ™å¯ä»¥ä¸ºäº§å“çš„ç‰ˆæœ¬ç»„åˆå¸¦æ¥æ›´åŠ çµæ´»çš„é€‰æ‹©ï¼Œæ›´åŠ é«˜æ•ˆåœ°æ»¡è¶³ä¸åŒåœ°åŒºåŠç”¨æˆ·çš„éœ€æ±‚ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬å°†ä¸€èµ·æ¥å­¦ä¹ å…¼å®¹æ€§çš„å®šä¹‰ã€3ç±»ç»„ä»¶çš„å…¼å®¹æ€§è¦æ±‚ä»¥åŠé€šè¿‡Sharingé¡¹ç›®æ¥å­¦ä¹ å¦‚ä½•è¿›è¡Œç»„ä»¶è¿è¡Œæ—¶çš„å…¼å®¹æ€§å¤„ç†ï¼Œè®©ç»„ä»¶å¯ä»¥æ›´çµæ´»è¿›è¡Œæ’æ‹”ã€‚</p><h2>è¿è¡Œæ—¶å…¼å®¹</h2><p>æˆ‘ä»¬ç»§ç»­ä»¥Sharingé¡¹ç›®ä¸ºä¾‹ï¼Œåˆ†æä¸€ä¸‹è¿è¡Œæ—¶çš„ä¾èµ–å…·ä½“æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚</p><p>åœ¨Sharingé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸æŠŠæ–‡ä»¶ç»„ä»¶æ‰“åŒ…åˆ°é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥å‚è€ƒåé¢è¿™å¼ æˆªå›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/61/0f/61a63e5656e42fb773b3f5yy96663e0f.jpg?wh=3080x2157\" alt=\"\"></p><p>ç”±äºå‰é¢æˆ‘ä»¬å·²ç»å°†ç¼–è¯‘æ—¶æœŸçš„è€¦åˆè§£å¼€äº†ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥æ­£å¸¸ç¼–è¯‘å‡ºå®‰è£…åŒ…ã€‚ä½†æ˜¯å½“æˆ‘ä»¬è¿è¡Œåº”ç”¨æ—¶ï¼Œç¨‹åºä¼šå‡ºç°é—ªé€€ï¼Œå…·ä½“çš„å¼‚å¸¸æ—¥å¿—å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code class=\"language-plain\">2022-09-15 09:45:30.940 12820-12820/com.jkb.junbin.sharing E/AndroidRuntime: FATAL EXCEPTION: main\n&nbsp; &nbsp; Process: com.jkb.junbin.sharing, PID: 12820\n&nbsp; &nbsp; java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Class java.lang.Object.getClass()' on a null object reference\n&nbsp; &nbsp; &nbsp; &nbsp; at androidx.fragment.app.FragmentTransaction.doAddOp(FragmentTransaction.java:245)\n&nbsp; &nbsp; &nbsp; &nbsp; at androidx.fragment.app.BackStackRecord.doAddOp(BackStackRecord.java:183)\n&nbsp; &nbsp; &nbsp; &nbsp; at androidx.fragment.app.FragmentTransaction.add(FragmentTransaction.java:234)\n&nbsp; &nbsp; &nbsp; &nbsp; at androidx.fragment.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:176)\n</code></pre><!-- [[[read_end]]] --><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹å¼‚å¸¸å¯¹åº”çš„å…·ä½“ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code class=\"language-plain\">List&lt;Fragment&gt; fragments = new ArrayList&lt;&gt;();\nfragments.add((Fragment) ARouter.getInstance().build(\"/messageFeature/message\").navigation());\nfragments.add((Fragment) ARouter.getInstance().build(\"/fileFeature/file\").navigation());\nfragments.add((Fragment) ARouter.getInstance().build(\"/accountFeature/account\").navigation());\nSectionsPagerAdapter sectionsPagerAdapter = new SectionsPagerAdapter(this, getSupportFragmentManager(), fragments);\n</code></pre><p>é€šè¿‡ä¸Šè¿°ä»£ç å¯ä»¥çœ‹å‡ºï¼ŒåŸºåº§ä»£ç è¿è¡Œæ—¶æ²¡æœ‰åšå…¼å®¹æ€§å¤„ç†ï¼Œè¿™æ ·åœ¨ç»„ä»¶æ²¡æœ‰åŠ è½½çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä»£ç ä¸Šå†™äº†ç›´æ¥æ˜¾ç¤ºæ–‡ä»¶ä¸»é¡µé¢ï¼Œå°±ä¼šæœ‰å¼‚å¸¸ã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>è™½ç„¶æˆ‘ä»¬é€šè¿‡è·¯ç”±è§£é™¤äº†ç¼–è¯‘æ—¶çš„ä¾èµ–ï¼Œä½†æ˜¯åœ¨è¿è¡Œæ—¶æ²¡æœ‰å…¼å®¹å¤„ç†ä¹Ÿä¼šå¼‚å¸¸ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å‰é¢è¯´çš„è¿è¡Œæ—¶çš„ä¾èµ–ã€‚</strong></p><h2>ç»„ä»¶å…¼å®¹æ€§å®šä¹‰</h2><p>é‚£ä¹ˆä½ å¯èƒ½ä¼šæƒ³ï¼Œç»„ä»¶éƒ½ä¸åŠ è½½äº†ï¼ŒåŠŸèƒ½èƒ½ä¸å—å½±å“å—ï¼Ÿ</p><p>æƒ³è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¹å…¼å®¹æ€§çš„å®šä¹‰è¾¾æˆä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯æ˜ç¡®å…¼å®¹æ€§çš„è¦æ±‚æ€ä¹ˆåˆ†çº§ã€‚</p><p>æˆ‘ä»¬å°†ç»„ä»¶çš„å…¼å®¹æ€§åˆ’åˆ†ä¸º4ä¸ªç­‰çº§ï¼Œåˆ†åˆ«ä¸ºæ²¡æœ‰å…¼å®¹ï¼ˆCï¼‰ã€æœ€ä½å…¼å®¹ï¼ˆBï¼‰ã€åŸºæœ¬å…¼å®¹ï¼ˆAï¼‰ã€å®Œå…¨å…¼å®¹ï¼ˆSï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4a/b4/4a8b97de966063eca48d1ff7aeaa4bb4.jpg?wh=3436x1645\" alt=\"\"></p><p>é‚£ä¹ˆå¯¹äºå‰é¢æåˆ°çš„3ç±»ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡ç»„ä»¶ã€åŠŸèƒ½ç»„ä»¶ä»¥åŠæŠ€æœ¯ç»„ä»¶ï¼Œå®ƒä»¬çš„å…¼å®¹æ€§è¦æ±‚éœ€è¾¾åˆ°ä»€ä¹ˆè¦æ±‚å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç»“åˆå„ä¸ªç±»å‹çš„ç»„ä»¶ç‰¹ç‚¹åˆ†æä¸€ä¸‹ã€‚</p><p>ä¸šåŠ¡ç»„ä»¶è™½ç„¶åœ¨ç¼–è¯‘ä¸Šä¸èƒ½ç›´æ¥æœ‰ç›¸äº’ä¾èµ–ï¼Œä½†è¿è¡Œä¸Šè¿˜æ˜¯ä¸å¯é¿å…åœ°ä¼šæœ‰ä¸€äº›åŠŸèƒ½çš„ä¾èµ–ã€‚æ˜¾ç„¶å¦‚æœè¦åšåˆ°å®Œå…¨å…¼å®¹ï¼ˆSï¼‰æˆæœ¬ä¼šéå¸¸é«˜ï¼Œæ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹<strong>å¯¹äºä¸šåŠ¡ç»„ä»¶çš„å…¼å®¹æ€§è¦æ±‚ä¸ºåŸºæœ¬å…¼å®¹ï¼ˆAï¼‰ã€‚</strong></p><p>è‡³äºåŠŸèƒ½ç»„ä»¶åŠæŠ€æœ¯ç»„ä»¶ï¼Œé€šå¸¸æƒ…å†µä¸‹ç›¸å¯¹æ¯”è¾ƒç¨³å®šï¼Œä¸ä¼šæœ‰åŠ¨æ€æ’æ‹”çš„éœ€æ±‚ã€‚ä½†æ˜¯è¿™äº›ç»„ä»¶ä¼šè¢«ä¸Šå±‚çš„ä¸šåŠ¡ç»„ä»¶æ‰€å¼•ç”¨ï¼Œæ‰€ä»¥<strong>å¯¹äºåŠŸèƒ½ç»„ä»¶åŠæŠ€æœ¯ç»„ä»¶çš„å…¼å®¹æ€§è¦æ±‚æ›´å¤šçš„æ˜¯å‘ä¸Šå…¼å®¹</strong>ï¼Œè¦ä¿è¯å¯¹å¤–æä¾›çš„æ¥å£ç¨³å®šï¼Œä¸èƒ½éšæ„ä¿®æ”¹åŸæœ‰æ¥å£çš„æ–¹æ³•ç­¾åï¼ŒåŒæ—¶è¦åšå¥½å¼‚å¸¸çš„å¤„ç†ï¼Œé¿å…å‡ºç°æ¥å£ä¸èƒ½æŒ‰é¢„æœŸçš„åè®®è¿”å›æ•°æ®ã€‚<strong>å¯¹äºåŠŸèƒ½åŠä¸šåŠ¡ç»„ä»¶çš„å…¼å®¹æ€§é€šå¸¸è¦æ±‚ä¸ºåŸºæœ¬å…¼å®¹ï¼ˆAï¼‰æˆ–è€…å®Œå…¨å…¼å®¹ï¼ˆSï¼‰ã€‚</strong></p><h2>Sharingé¡¹ç›®å…¼å®¹æ€§æ”¹é€ </h2><p>ç¡®å®šäº†å…¼å®¹æ€§çš„çº§åˆ«ï¼Œæˆ‘ä»¬è¿™å°±ä»¥Sharingé¡¹ç›®ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹å¦‚ä½•å¯¹3ç±»ç»„ä»¶åšå…¼å®¹æ€§æ”¹é€ ï¼Œè¿™é‡Œæˆ‘åˆ†åˆ«æŒ‘é€‰äº†åŸºåº§ç»„ä»¶ã€æ¶ˆæ¯ç»„ä»¶ä»¥åŠæ—¥å¿—ç»„ä»¶ã€‚</p><h3>åŸºåº§ç»„ä»¶æ”¹é€ </h3><p>åŸºåº§ç»„ä»¶åˆ’åˆ†åœ¨åŠŸèƒ½ç»„ä»¶ï¼Œä½†æ˜¯å®ƒåœ¨è¿è¡Œæ—¶åˆæ‰¿æ‹…ç€ä¸€ä¸ªé‡è¦çš„å·¥ä½œï¼Œå°±æ˜¯é›†æˆå„ä¸ªä¸šåŠ¡ç»„ä»¶ã€‚æ‹¿ä¸€å¼€å§‹çš„è¿è¡Œæ—¶å…¼å®¹çš„ä¾‹å­ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œå…¼å®¹æ€§å¤„ç†ï¼Œé‚£ä¹ˆå½“ä¸šåŠ¡ç»„ä»¶æ²¡æœ‰é›†æˆæ—¶ï¼ŒåŸºåº§ç»„ä»¶å¯èƒ½å®Œæˆä¸å¯ç”¨ã€‚</p><p>è¿™é‡Œå¯¹äº<strong>åŸºåº§ç»„ä»¶æ¥è¯´ï¼Œå…¼å®¹çš„æ–¹æ¡ˆæ˜¯å½“ä¸šåŠ¡ç»„ä»¶è¢«åŠ è½½æ—¶å°±å±•ç¤ºå¯¹åº”çš„ä¸šåŠ¡ç»„ä»¶åŠŸèƒ½ï¼Œå½“æ²¡æœ‰åŠ è½½æ—¶å°±å±è”½ç›¸å…³çš„ä¸šåŠ¡ç»„ä»¶çš„åŠŸèƒ½ã€‚</strong></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å…·ä½“çš„å…¼å®¹æ€§ä»£ç ï¼Œç›®å‰çš„é€»è¾‘æ˜¯å½“è·¯ç”±æ¡†æ¶æ²¡æœ‰åŠ è½½åˆ°å¯¹åº”çš„ä¸šåŠ¡ç»„ä»¶é¡µé¢æ—¶ï¼Œåˆ™å±è”½ç›¸å…³çš„åŠŸèƒ½ã€‚</p><pre><code class=\"language-plain\">//è¿›è¡Œéç©ºçš„å…¼å®¹æ€§åˆ¤æ–­\nprivate List&lt;Fragment&gt; getFragmentList(List&lt;Integer&gt; tabTitles) {\n    List&lt;Fragment&gt; fragments = new ArrayList&lt;&gt;();\n    Fragment messageFragment = (Fragment) ARouter.getInstance().build(\"/messageFeature/message\").navigation();\n    if (messageFragment != null) {\n        fragments.add(messageFragment);\n        tabTitles.add(R.string.tab_message);\n    }\n    Fragment fileFragment = (Fragment) ARouter.getInstance().build(\"/fileFeature/file\").navigation();\n    if (fileFragment != null) {\n        fragments.add(fileFragment);\n        tabTitles.add(R.string.tab_file);\n    }\n    Fragment accountFragment = (Fragment) ARouter.getInstance().build(\"/accountFeature/account\").navigation();\n    if (accountFragment != null) {\n        fragments.add(accountFragment);\n        tabTitles.add(R.string.tab_user);\n    }\n    return fragments;\n}\n\n//é¡µé¢æ ¹æ®æ•°æ®åŠ¨æ€å±•ç¤º\npublic class SectionsPagerAdapter extends FragmentPagerAdapter {\n    @Override\n    public Fragment getItem(int position) {\n         return fragments.get(position);\n    }\n    @Override\n    public int getCount() {\n        return tabTitles.size();\n    }\n}\n</code></pre><p>é€šè¿‡å¢åŠ å…¼å®¹æ€§å¤„ç†åï¼Œå½“æˆ‘ä»¬ä¸é›†æˆæ¶ˆæ¯ç»„ä»¶æˆ–è€…æ–‡ä»¶ç»„ä»¶æ—¶ï¼ŒåŸºåº§ç»„ä»¶å‡å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/d4/0a73bb5d02f5533095738905329261d4.jpg?wh=4018x2497\" alt=\"\"></p><h3>æ¶ˆæ¯ç»„ä»¶æ”¹é€ </h3><p>å¯¹äºæ¶ˆæ¯ç»„ä»¶ï¼Œäº§å“å¢åŠ äº†ä¸€ä¸ªå°ç‰¹æ€§ï¼Œå°±æ˜¯åœ¨å±•ç¤ºåˆ—è¡¨ä¿¡æ¯æ—¶ï¼Œéœ€è¦å±•ç¤ºæ–‡ä»¶æµè§ˆé‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/d5/0a2002ac91ee042c9b71b715c8dd32d5.jpg?wh=3080x2497\" alt=\"\"></p><p>è·å–æ–‡ä»¶æµè§ˆé‡æ˜¯é€šè¿‡æ–‡ä»¶æ¨¡å—æä¾›çš„å®ç°å¾—åˆ°çš„ï¼Œä»£ç æ˜¯åé¢è¿™æ ·ã€‚</p><pre><code class=\"language-plain\">//æ¥å£å®šä¹‰\npublic interface IFileStatistics extends IProvider {\n    int getDownloadCount(String id);\n}\n\n//è°ƒç”¨é€»è¾‘\n@Override\npublic void onBindViewHolder(final ViewHolder holder, int position) {\n    holder.tvName.setText(infoList.get(position).content);\n    holder.tvFileName.setText(infoList.get(position).fileName);\n    holder.tvSize.setText(DateUtil.getDateToString(infoList.get(position).date));\n    holder.tvCount.setText(\"æ–‡ä»¶æµè§ˆé‡ï¼š\" + iFileStatistics.getDownloadCount(infoList.get(position).id+\"\"));\n}\n</code></pre><p>æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰åŠ è½½æ–‡ä»¶ç»„ä»¶ï¼Œç”±äºå­˜åœ¨è¿è¡Œæ—¶çš„ä¾èµ–ï¼Œæ¶ˆæ¯ç»„ä»¶å°±ä¼šæœ‰å¼‚å¸¸ï¼Œæ—¥å¿—å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code class=\"language-plain\">&nbsp;Process: com.jkb.junbin.sharing, PID: 25093\n&nbsp; &nbsp; java.lang.NullPointerException: Attempt to invoke interface method 'int com.jkb.junbin.sharing.function.shell.interfaces.IFileStatistics.getDownloadCount()' on a null object reference\n&nbsp; &nbsp; &nbsp; &nbsp; at com.jkb.junbin.sharing.feature.message.MessageListAdapter.onBindViewHolder(MessageListAdapter.java:47)\n&nbsp; &nbsp; &nbsp; &nbsp; at com.jkb.junbin.sharing.feature.message.MessageListAdapter.onBindViewHolder(MessageListAdapter.java:20)\n</code></pre><p>å¯¹äºæ¶ˆæ¯ç»„ä»¶çš„å…¼å®¹æ€§å¤„ç†ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥å‚è€ƒåŸºåº§ç»„ä»¶çš„æ–¹å¼ï¼Œå½“æ–‡ä»¶ç»„ä»¶æ²¡é›†æˆæ—¶ï¼Œå°±å±è”½æ‰ç›¸å…³çš„å±•ç¤ºé€»è¾‘ã€‚</p><pre><code class=\"language-plain\">@Autowired\npublic IFileStatistics iFileStatistics;\n@Override\npublic void onBindViewHolder(final ViewHolder holder, int position) {\n   if(iFileStatistics != null) {\n    holder.tvCount.setText(\"æ–‡ä»¶æµè§ˆé‡ï¼š\" + iFileStatistics.getDownloadCount(infoList.get(position).id+\"\"));\n}\n}\n</code></pre><p>ä½†æ˜¯å¦‚æœå½“ä¾èµ–ç»„ä»¶ä¸å¯ç”¨æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰å¤‡é€‰çš„æ–¹æ¡ˆï¼Œä¾‹å¦‚å¯ä»¥é‡‡ç”¨Mockçš„æ–¹å¼å®šä¹‰é»˜è®¤çš„å®ç°ï¼Œå½“ä¾èµ–ä¸å¯ç”¨å°±åŠ è½½Defaultçš„å®ç°ã€‚</p><p><strong>ä½†ç›®å‰ARouteræ¡†æ¶è¿˜ä¸æ”¯æŒä¸€ä¸ªæ¥å£å¤šä¸ªå®ç°çš„æœºåˆ¶ï¼Œè¿™é‡Œå‡è®¾Arouteræ”¯æŒé€šè¿‡priorityå±æ€§æ§åˆ¶å¤šä¸ªå®ç°çš„ä¼˜å…ˆçº§ï¼Œ</strong>Defaultå®ç°æ˜¯åé¢è¿™æ ·ã€‚</p><pre><code class=\"language-plain\">@Route(path = \"/mock/IFileStatistics\", name = \"IFileStatisticsMock\",priority = 200)\npublic class IFileStatisticsMockImpl implements IFileStatistics {\n    @Override\n    public void init(Context context) {\n    }\n    @Override\n    public int getDownloadCount(String id) {\n        //é€šè¿‡å…¶ä»–çš„å¤‡é€‰æ–¹æ¡ˆè·å–æ–‡ä»¶çš„æ•°é‡ã€‚\n        return OtherService.getDownloadCount(id);\n    }\n}\n</code></pre><h3>æ—¥å¿—ç»„ä»¶æ”¹é€ </h3><p>å› ä¸ºæŠ€æœ¯ç»„ä»¶é€šå¸¸ä¼šè¢«å¤šä¸ªåŠŸèƒ½æˆ–ä¸šåŠ¡ç»„ä»¶ä½¿ç”¨ï¼Œæ‰€ä»¥åšå…¼å®¹æ€§æ”¹é€ æ—¶æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ä¿è¯å‘ä¸Šå…¼å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å†…éƒ¨å®ç°æœ‰å˜åŒ–æ—¶ï¼Œè¦ä¿è¯å¥½å¯¹ä¸Šæ¥å£çš„å…¼å®¹æ€§ã€‚è€Œä¸”åœ¨ä¿®æ”¹æ‰©å±•ä»£ç æ—¶ï¼Œä¸èƒ½å½±å“åŸæœ‰æ¥å£çš„åŠŸèƒ½ã€‚</p><p>å¯¹äº<strong>åŸºç¡€ç»„ä»¶æ¥è¯´ï¼Œå…¼å®¹æ–¹æ¡ˆçš„è¦æ±‚æ˜¯å½“æ¥å£åŠŸèƒ½æœ‰ä¿®æ”¹æˆ–è€…å˜åŒ–æ—¶ï¼Œä¸èƒ½å½±å“åŸæœ‰æ¥å£æä¾›çš„åŠŸèƒ½ã€‚åŸåˆ™ä¸Šæ‰©å±•éœ€è¦å¢åŠ æ–°çš„æ¥å£ï¼Œå¦‚æœæ¶‰åŠè°ƒæ•´åŸæœ‰çš„æ¥å£ï¼Œä¹Ÿåº”è¯¥é¢„ç•™å……åˆ†çš„æ—¶é—´ç»™ä¸Šå±‚çš„ç»„ä»¶ä¿®æ”¹ï¼Œé¿å…æ›´æ–°å®Œæ–°ç‰ˆæœ¬åå‡ºç°ç¼–è¯‘ä¸é€šè¿‡æˆ–è€…è¿è¡Œæ—¶å¼‚å¸¸ã€‚</strong></p><p>ä¸‹é¢æˆ‘ä»¬ä»¥æ—¥å¿—ç»„ä»¶ä¸ºä¾‹åšä¸ªå…¼å®¹æ€§æ”¹é€ ç»ƒä¹ ã€‚åœ¨ä¹‹å‰æ—¥å¿—ç»„ä»¶æä¾›çš„logæ–¹æ³•ï¼Œéœ€è¦è°ƒç”¨è€…ä¼ å…¥usernameå‚æ•°ï¼Œä»£ç æ˜¯åé¢è¿™æ ·ã€‚</p><pre><code class=\"language-plain\">public static void log(String log, String username) {\n    //... ...\n    Log.d(tag, log);\n}\n</code></pre><p>å¯¹äºè°ƒç”¨è€…æ¥è¯´ï¼Œæ¯æ¬¡éƒ½éœ€è¦ä¼ é€’usernameå‚æ•°ï¼Œè¿™é‡Œä¼šæœ‰å¤§é‡çš„é‡å¤ä»£ç ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸è®°å½•usernameç›¸å…³ä¿¡æ¯ã€‚ä½†æ­¤æ—¶å¦‚æœæˆ‘ä»¬ç›´æ¥ä¿®æ”¹åŸæœ‰çš„æ–¹æ³•ç­¾åï¼Œä¼šå¯¼è‡´æ‰€æœ‰å‡çº§æ—¥å¿—ç»„ä»¶æ–°ç‰ˆæœ¬çš„å…¶ä»–ç»„ä»¶éƒ½éœ€è¦ä¿®æ”¹ã€‚</p><p>è¿™é‡Œå»ºè®®ä½ è¿™æ ·åšï¼šå°†åŸæœ‰åºŸå¼ƒçš„æ–¹æ³•åŠ ä¸Š@Deprecatedæ³¨è§£ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªæ–°çš„æ–¹æ³•ã€‚</p><pre><code class=\"language-plain\">/**\n * è¯·ä½¿ç”¨æ–°çš„æ—¥å¿—è®°å½•æ–¹æ³•LogUtils.log(String log)è¿›è¡Œæ—¥å¿—è®°å½•,\n *  æœ¬æ–¹æ³•åœ¨XXXç‰ˆæœ¬ç§»é™¤ã€‚\n */\n@Deprecated\npublic static void log(String log, String username) {\n    //... ...\n    Log.d(tag, log);\n}\n\npublic static void log(String log) {\n    //... ...\n    Log.d(tag, log);\n}\n</code></pre><p>å½“è°ƒç”¨äº†æ ‡è®°@Deprecatedæ³¨è§£çš„æ–¹æ³•æ—¶ï¼ŒIDEåœ¨è°ƒç”¨è¯¥æ ‡è®°åºŸå¼ƒæ–¹æ³•çš„åœ°æ–¹ä¼šå‡ºç°è­¦å‘Šæç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/76/7e/7621019203e3e8f8a6634f499f10867e.png?wh=1920x981\" alt=\"å›¾ç‰‡\"></p><p>æœ€åï¼Œåœ¨ç¡®è®¤å·²ç»æ²¡æœ‰å…¶ä»–ç»„ä»¶å¯¹åºŸå¼ƒæ–¹æ³•çš„ä½¿ç”¨åï¼Œå¯ä»¥ç§»é™¤è¯¥æ–¹æ³•ã€‚å¦å¤–ï¼Œå¦‚æœæŠ€æœ¯ç»„ä»¶ä¹Ÿä¾èµ–äº†å…¶ä»–çš„ç»„ä»¶ï¼Œå½“ä¾èµ–ä¸å¯ç”¨æ—¶ï¼Œä»£ç éœ€è¦åšå¥½å¼‚å¸¸çš„å¤„ç†ï¼Œå¹¶æŒ‰æ¥å£åè®®è¿”å›æŠ›å‡ºå¼‚å¸¸ï¼Œè®©åŠŸèƒ½åŠä¸šåŠ¡ç»„ä»¶èƒ½å¤ŸæŒ‰é¢„æœŸå¤„ç†ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†ç»„ä»¶çš„å…¼å®¹æ€§å®šä¹‰ï¼Œè¿˜é€šè¿‡Sharingé¡¹ç›®äº†è§£äº†3ç±»ç»„ä»¶å¸¸ç”¨çš„å…¼å®¹æ€§å¤„ç†æ–¹æ³•ã€‚</p><p>å¯¹äºå…¼å®¹æ€§ï¼Œå½“å­˜åœ¨ä¾èµ–å¹¶ä¸”ä¾èµ–ä¸å¯ç”¨æ—¶ï¼Œæ˜¯æ²¡åŠæ³•åšåˆ°åŠŸèƒ½ä¸Šå®Œå…¨ä¸€è‡´çš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†å…¼å®¹æ€§åˆ†ä¸ºäº†4ä¸ªå¤§ç±»ï¼Œåˆ†åˆ«ä¸ºæ²¡æœ‰å…¼å®¹ï¼ˆCï¼‰ã€æœ€ä½å…¼å®¹ï¼ˆBï¼‰ã€åŸºæœ¬å…¼å®¹ï¼ˆAï¼‰ã€å®Œå…¨å…¼å®¹ï¼ˆSï¼‰ã€‚</p><p>ä¸šåŠ¡ç»„ä»¶å…¼å®¹æ€§çš„è¦æ±‚é€šå¸¸ä¸ºåŸºæœ¬å…¼å®¹ï¼ˆAï¼‰ï¼Œå½“ä¾èµ–çš„ç»„ä»¶ä¸å¯ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµç¨‹å¤„ç†ä¸Šå°†ç›¸å…³çš„åŠŸèƒ½éšè—ï¼Œå‡å°‘å¯¹ç”¨æˆ·ä½¿ç”¨çš„å¹²æ‰°ï¼›å¯¹äºåŠŸèƒ½åŠæŠ€æœ¯ç»„ä»¶ï¼Œå…¼å®¹æ€§çš„è¦æ±‚é€šå¸¸ä¸ºåŸºæœ¬å…¼å®¹ï¼ˆAï¼‰ä»¥åŠå®Œå…¨å…¼å®¹ï¼ˆSï¼‰ï¼Œç”±äºåŠŸèƒ½åŠæŠ€æœ¯ç»„ä»¶è¢«å…¶ä»–ç»„ä»¶ä½¿ç”¨ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡æ‰©å±•çš„æ–¹å¼ï¼Œä¿è¯å¯¹å¤–æä¾›çš„æ¥å£ç¨³å®šæ€§ã€‚</p><p>è‡³æ­¤ï¼Œå¯¹äºç»„ä»¶åŒ–æ¶æ„çš„ä»£ç æ”¹é€ å°±å‘Šä¸€æ®µè½äº†ã€‚ä»ä¸‹èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬ä¼šæ·±å…¥ç»„ä»¶å†…éƒ¨ï¼Œå»å¯¹ç»„ä»¶å†…çš„æ¶æ„è¿›è¡Œé‡æ„ä¼˜åŒ–ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æ„Ÿè°¢ä½ å­¦å®Œäº†ä»Šå¤©çš„å†…å®¹ï¼Œä»Šå¤©çš„æ€è€ƒé¢˜æ˜¯è¿™æ ·çš„ï¼šå¦‚æœæˆ‘ä»¬æƒ³å¢åŠ ä¸€ä¸ªåŠ¨æ€çš„æœºåˆ¶æ¥æ§åˆ¶ç»„ä»¶çš„æ’æ‹”ï¼Œä½ è§‰å¾—å¯ä»¥é‡‡ç”¨å“ªäº›æ–¹å¼ï¼Œå®ƒä»¬çš„ä¼˜ç¼ºç‚¹æœ‰å“ªäº›ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠå®ƒåˆ†äº«ç»™ä½ çš„åŒäº‹æˆ–æœ‹å‹ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥é«˜æ•ˆã€é«˜è´¨é‡äº¤ä»˜è½¯ä»¶ï¼</p>","neighbors":{"left":{"article_title":"12ï½œä¾èµ–æ³¨å…¥ä¸è·¯ç”±ï¼šæ¡†æ¶èƒ½å¤Ÿä¸ºæˆ‘ä»¬è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ","id":635905},"right":{"article_title":"14ï½œè¿‡å¤§ç±»é‡æ„ï¼šå¦‚ä½•é‡æ„åŠ¨è¾„è¿‡ä¸‡è¡Œçš„ä¸€ä¸ªç±»ï¼Ÿ","id":638487}},"comments":[{"had_liked":false,"id":372713,"user_name":"williamwue","can_delete":false,"product_type":"c1","uid":1020450,"ip_address":"æ±Ÿè‹","ucode":"C20E844117F4F6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/22/f37e0bf8.jpg","comment_is_top":false,"comment_ctime":1681461734,"is_pvip":false,"replies":[{"id":136149,"content":"è¿™é‡Œæ˜¯å¯¹çš„ï¼Œé€šå¸¸åŠŸèƒ½åŠä¸šåŠ¡ç»„ä»¶çš„å…¼å®¹æ€§è¦æ±‚ä¸ºåŸºæœ¬å…¼å®¹ï¼ˆAï¼‰æˆ–è€…å®Œå…¨å…¼å®¹ï¼ˆSï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1681711114,"ip_address":"å¹¿ä¸œ","comment_id":372713,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"åŸæ–‡ï¼šå¯¹äºåŠŸèƒ½åŠä¸šåŠ¡ç»„ä»¶çš„å…¼å®¹æ€§é€šå¸¸è¦æ±‚ä¸ºåŸºæœ¬å…¼å®¹ï¼ˆAï¼‰æˆ–è€…å®Œå…¨å…¼å®¹ï¼ˆSï¼‰ã€‚\nè¯·é—®è€å¸ˆï¼Œè¿™é‡Œçš„â€œä¸šåŠ¡ç»„ä»¶â€æ˜¯ä¸æ˜¯åº”è¯¥æ˜¯â€œæŠ€æœ¯ç»„ä»¶â€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":614126,"discussion_content":"è¿™é‡Œæ˜¯å¯¹çš„ï¼Œé€šå¸¸åŠŸèƒ½åŠä¸šåŠ¡ç»„ä»¶çš„å…¼å®¹æ€§è¦æ±‚ä¸ºåŸºæœ¬å…¼å®¹ï¼ˆAï¼‰æˆ–è€…å®Œå…¨å…¼å®¹ï¼ˆSï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681711114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370626,"user_name":"ikun","can_delete":false,"product_type":"c1","uid":3537149,"ip_address":"åŒ—äº¬","ucode":"911C7D3ECE6593","user_header":"https://static001.geekbang.org/account/avatar/00/35/f8/fd/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1679036062,"is_pvip":false,"replies":[{"id":135281,"content":"Hiï¼Œikunã€‚\nQ1ï¼šå¯¹äºå•å·¥ç¨‹è¿˜æ˜¯å¤šå·¥ç¨‹è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å½±å“å› ç´ å°±æ˜¯å›¢é˜Ÿçš„è§„æ¨¡ï¼Œå¹¶æ²¡æœ‰é‚£ä¸ªå°±æ¯”é‚£ä¸ªå¥½ã€‚æˆ‘ä»¬åœ¨æŒç»­äº¤ä»˜ç¯‡ä¸­ä¼šè¿›ä¸€æ­¥ä»‹ç»ã€‚\nQ2ï¼šæˆ‘ç†è§£æœ€é‡è¦çš„æ˜¯è¦ä¿æŒç»„ä»¶é—´çš„APIç¨³å®šåŠå…¼å®¹æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1679274849,"ip_address":"å¹¿ä¸œ","comment_id":370626,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜:\nQ1ï¼šç»„ä»¶åŒ–æ˜¯å•å·¥ç¨‹æ–¹æ¡ˆå¥½è¿˜æ˜¯å¤šå·¥ç¨‹æ–¹æ¡ˆå¥½\nQ2:å¯¹äºç»„ä»¶åŒ–åçš„é¡¹ç›®æ¯”å¦‚Aã€Bã€Cã€Dï¼ŒAæ˜¯ä¸€ä¸ªåŸºç¡€ç‰ˆï¼ŒBã€Cã€Dåœ¨Açš„åŸºç¡€ä¸Šåšä¸€äº›ä¸åŒç‰ˆæœ¬çš„å®šåˆ¶åŒ–éœ€æ±‚æ€æ ·å¤„ç†å¯¹äºåæœŸçš„ä»£ç ç»´æŠ¤ä»£ä»·æ¯”è¾ƒå°","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609869,"discussion_content":"Hiï¼Œikunã€‚\nQ1ï¼šå¯¹äºå•å·¥ç¨‹è¿˜æ˜¯å¤šå·¥ç¨‹è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å½±å“å› ç´ å°±æ˜¯å›¢é˜Ÿçš„è§„æ¨¡ï¼Œå¹¶æ²¡æœ‰é‚£ä¸ªå°±æ¯”é‚£ä¸ªå¥½ã€‚æˆ‘ä»¬åœ¨æŒç»­äº¤ä»˜ç¯‡ä¸­ä¼šè¿›ä¸€æ­¥ä»‹ç»ã€‚\nQ2ï¼šæˆ‘ç†è§£æœ€é‡è¦çš„æ˜¯è¦ä¿æŒç»„ä»¶é—´çš„APIç¨³å®šåŠå…¼å®¹æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679274849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370114,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"åŒ—äº¬","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1678410445,"is_pvip":false,"replies":[{"id":135042,"content":"Hiï¼Œpeterã€‚\nQ1: å®é™…æˆ‘è¯•äº†æ˜¯ä¸æ”¯æŒã€‚\nQ2ï¼šé€šå¸¸ä¸ä¼šã€‚Deprecatedæ³¨è§£å‘Šè¯‰ä½ æ ‡æ³¨æ–¹æ³•è¦åºŸå¼ƒï¼Œè€Œä¸”IDEä¹Ÿä¼šæœ‰è­¦å‘Šâš ï¸æç¤ºã€‚æ­¤æ—¶å»ºè®®åŠæ—¶ä½¿ç”¨æ–°çš„æ–¹æ³•ã€‚\nQ3ï¼šä½ å¯ä»¥æŸ¥çœ‹æ ‡è®°äº†Deprecatedæ³¨è§£æ–¹æ³•çš„æ³¨é‡Šï¼Œé€šå¸¸ä¼šæœ‰ä»‹ç»å¦‚ä½•ä½¿ç”¨æ–°çš„æ›¿ä»£æ–¹æ³•ã€‚\nQ4ï¼šç›®å‰æ²¡æœ‰æ¶‰åŠåˆ°ï¼Œåç»­æˆ‘ä»¬å¯ä»¥è€ƒè™‘ï¼Œæ„Ÿè°¢åé¦ˆğŸ¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1678712590,"ip_address":"å¹¿ä¸œ","comment_id":370114,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜ï¼š\nQ1ï¼šARouterå®é™…æ”¯æŒpriorityå—ï¼Ÿ\næ–‡ä¸­â€œå‡è®¾ Arouter æ”¯æŒé€šè¿‡ priority å±æ€§æ§åˆ¶å¤šä¸ªå®ç°çš„ä¼˜å…ˆçº§â€ï¼Œè¿™é‡Œç”¨äº†â€œå‡è®¾â€ï¼Œå®é™…æƒ…å†µæ˜¯ä»€ä¹ˆï¼Ÿ\nQ2ï¼šä½¿ç”¨Deprecatedæ–¹æ³•ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ\nå†™è¿‡ä¸€äº›ä¸å¤ªå¤æ‚çš„åº”ç”¨ï¼Œä»£ç ä¸­ç»å¸¸ç”¨ä¸€äº›æ ‡æ³¨ä¸ºDeprecatedçš„æ–¹æ³•ï¼Œèƒ½ç¼–è¯‘ã€èƒ½è¿è¡Œï¼Œæ„Ÿè§‰ä¸åˆ°æœ‰ä»€ä¹ˆé—®é¢˜ã€‚é‚£ä¹ˆï¼Œå¦‚æœæ˜¯ä¸Šçº¿è¿è¥çš„äº§å“ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ\nQ3ï¼šæ€ä¹ˆæ‰¾åˆ°Deprecatedæ–¹æ³•çš„æ›¿ä»£æ–¹æ³•ï¼Ÿ\nç¢°åˆ°Deprecatedçš„æ–¹æ³•æ—¶ï¼Œä¹Ÿæƒ³ç”¨æœ€æ–°çš„æ–¹æ³•ï¼Œä½†æœ‰æ—¶å€™ä¸çŸ¥é“æ€ä¹ˆæ‰¾å…¶å¯¹åº”çš„æ–°æ–¹æ³•ã€‚\nQ4ï¼šå®ä¾‹sharingé¡¹ç›®ï¼Œä¼šè®²å±å¹•é€‚é…å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608886,"discussion_content":"Hiï¼Œpeterã€‚\nQ1: å®é™…æˆ‘è¯•äº†æ˜¯ä¸æ”¯æŒã€‚\nQ2ï¼šé€šå¸¸ä¸ä¼šã€‚Deprecatedæ³¨è§£å‘Šè¯‰ä½ æ ‡æ³¨æ–¹æ³•è¦åºŸå¼ƒï¼Œè€Œä¸”IDEä¹Ÿä¼šæœ‰è­¦å‘Šâš ï¸æç¤ºã€‚æ­¤æ—¶å»ºè®®åŠæ—¶ä½¿ç”¨æ–°çš„æ–¹æ³•ã€‚\nQ3ï¼šä½ å¯ä»¥æŸ¥çœ‹æ ‡è®°äº†Deprecatedæ³¨è§£æ–¹æ³•çš„æ³¨é‡Šï¼Œé€šå¸¸ä¼šæœ‰ä»‹ç»å¦‚ä½•ä½¿ç”¨æ–°çš„æ›¿ä»£æ–¹æ³•ã€‚\nQ4ï¼šç›®å‰æ²¡æœ‰æ¶‰åŠåˆ°ï¼Œåç»­æˆ‘ä»¬å¯ä»¥è€ƒè™‘ï¼Œæ„Ÿè°¢åé¦ˆğŸ¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678712590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}