{"id":211239,"title":"57 | è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•å®ç°ä¸€ä¸ªå¼‚æ­¥éé˜»å¡çš„EventBusæ¡†æ¶ï¼Ÿ","content":"<p>ä¸Šä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†è§‚å¯Ÿè€…æ¨¡å¼çš„åŸç†ã€å®ç°ã€åº”ç”¨åœºæ™¯ï¼Œé‡ç‚¹ä»‹ç»äº†ä¸åŒåº”ç”¨åœºæ™¯ä¸‹ï¼Œå‡ ç§ä¸åŒçš„å®ç°æ–¹å¼ï¼ŒåŒ…æ‹¬ï¼šåŒæ­¥é˜»å¡ã€å¼‚æ­¥éé˜»å¡ã€è¿›ç¨‹å†…ã€è¿›ç¨‹é—´çš„å®ç°æ–¹å¼ã€‚</p><p>åŒæ­¥é˜»å¡æ˜¯æœ€ç»å…¸çš„å®ç°æ–¹å¼ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä»£ç è§£è€¦ï¼›å¼‚æ­¥éé˜»å¡é™¤äº†èƒ½å®ç°ä»£ç è§£è€¦ä¹‹å¤–ï¼Œè¿˜èƒ½æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼›è¿›ç¨‹é—´çš„è§‚å¯Ÿè€…æ¨¡å¼è§£è€¦æ›´åŠ å½»åº•ï¼Œä¸€èˆ¬æ˜¯åŸºäºæ¶ˆæ¯é˜Ÿåˆ—æ¥å®ç°ï¼Œç”¨æ¥å®ç°ä¸åŒè¿›ç¨‹é—´çš„è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…ä¹‹é—´çš„äº¤äº’ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬èšç„¦äºå¼‚æ­¥éé˜»å¡çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå¸¦ä½ å®ç°ä¸€ä¸ªç±»ä¼¼Google Guava EventBusçš„é€šç”¨æ¡†æ¶ã€‚ç­‰ä½ å­¦å®Œæœ¬èŠ‚è¯¾ä¹‹åï¼Œä½ ä¼šå‘ç°ï¼Œå®ç°ä¸€ä¸ªæ¡†æ¶ä¹Ÿå¹¶éä¸€ä»¶éš¾äº‹ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼</p><h2>å¼‚æ­¥éé˜»å¡è§‚å¯Ÿè€…æ¨¡å¼çš„ç®€æ˜“å®ç°</h2><p>ä¸Šä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°ï¼Œå¯¹äºå¼‚æ­¥éé˜»å¡è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå¦‚æœåªæ˜¯å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆæœ¬ï¼Œä¸è€ƒè™‘ä»»ä½•é€šç”¨æ€§ã€å¤ç”¨æ€§ï¼Œå®é™…ä¸Šæ˜¯éå¸¸å®¹æ˜“çš„ã€‚</p><p>æˆ‘ä»¬æœ‰ä¸¤ç§å®ç°æ–¹å¼ã€‚å…¶ä¸­ä¸€ç§æ˜¯ï¼šåœ¨æ¯ä¸ªhandleRegSuccess()å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ‰§è¡Œä»£ç é€»è¾‘ï¼›å¦ä¸€ç§æ˜¯ï¼šåœ¨UserControllerçš„register()å‡½æ•°ä¸­ä½¿ç”¨çº¿ç¨‹æ± æ¥æ‰§è¡Œæ¯ä¸ªè§‚å¯Ÿè€…çš„handleRegSuccess()å‡½æ•°ã€‚ä¸¤ç§å®ç°æ–¹å¼çš„å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><!-- [[[read_end]]] --><pre><code>// ç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼Œå…¶ä»–ç±»ä»£ç ä¸å˜ï¼Œå°±æ²¡æœ‰å†é‡å¤ç½—åˆ—\npublic class RegPromotionObserver implements RegObserver {\n  private PromotionService promotionService; // ä¾èµ–æ³¨å…¥\n\n  @Override\n  public void handleRegSuccess(Long userId) {\n    Thread thread = new Thread(new Runnable() {\n      @Override\n      public void run() {\n        promotionService.issueNewUserExperienceCash(userId);\n      }\n    });\n    thread.start();\n  }\n}\n\n// ç¬¬äºŒç§å®ç°æ–¹å¼ï¼Œå…¶ä»–ç±»ä»£ç ä¸å˜ï¼Œå°±æ²¡æœ‰å†é‡å¤ç½—åˆ—\npublic class UserController {\n  private UserService userService; // ä¾èµ–æ³¨å…¥\n  private List&lt;RegObserver&gt; regObservers = new ArrayList&lt;&gt;();\n  private Executor executor;\n\n  public UserController(Executor executor) {\n    this.executor = executor;\n  }\n\n  public void setRegObservers(List&lt;RegObserver&gt; observers) {\n    regObservers.addAll(observers);\n  }\n\n  public Long register(String telephone, String password) {\n    //çœç•¥è¾“å…¥å‚æ•°çš„æ ¡éªŒä»£ç \n    //çœç•¥userService.register()å¼‚å¸¸çš„try-catchä»£ç \n    long userId = userService.register(telephone, password);\n\n    for (RegObserver observer : regObservers) {\n      executor.execute(new Runnable() {\n        @Override\n        public void run() {\n          observer.handleRegSuccess(userId);\n        }\n      });\n    }\n\n    return userId;\n  }\n}\n</code></pre><p>å¯¹äºç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼Œé¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æ¯”è¾ƒè€—æ—¶ï¼Œå¹¶ä¸”å¹¶å‘çº¿ç¨‹æ•°æ— æ³•æ§åˆ¶ï¼Œåˆ›å»ºè¿‡å¤šçš„çº¿ç¨‹ä¼šå¯¼è‡´å †æ ˆæº¢å‡ºã€‚ç¬¬äºŒç§å®ç°æ–¹å¼ï¼Œå°½ç®¡åˆ©ç”¨äº†çº¿ç¨‹æ± è§£å†³äº†ç¬¬ä¸€ç§å®ç°æ–¹å¼çš„é—®é¢˜ï¼Œä½†çº¿ç¨‹æ± ã€å¼‚æ­¥æ‰§è¡Œé€»è¾‘éƒ½è€¦åˆåœ¨äº†register()å‡½æ•°ä¸­ï¼Œå¢åŠ äº†è¿™éƒ¨åˆ†ä¸šåŠ¡ä»£ç çš„ç»´æŠ¤æˆæœ¬ã€‚</p><p>å¦‚æœæˆ‘ä»¬çš„éœ€æ±‚æ›´åŠ æç«¯ä¸€ç‚¹ï¼Œéœ€è¦åœ¨åŒæ­¥é˜»å¡å’Œå¼‚æ­¥éé˜»å¡ä¹‹é—´çµæ´»åˆ‡æ¢ï¼Œé‚£å°±è¦ä¸åœåœ°ä¿®æ”¹UserControllerçš„ä»£ç ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœåœ¨é¡¹ç›®ä¸­ï¼Œä¸æ­¢ä¸€ä¸ªä¸šåŠ¡æ¨¡å—éœ€è¦ç”¨åˆ°å¼‚æ­¥éé˜»å¡è§‚å¯Ÿè€…æ¨¡å¼ï¼Œé‚£è¿™æ ·çš„ä»£ç å®ç°ä¹Ÿæ— æ³•åšåˆ°å¤ç”¨ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ¡†æ¶çš„ä½œç”¨æœ‰ï¼šéšè—å®ç°ç»†èŠ‚ï¼Œé™ä½å¼€å‘éš¾åº¦ï¼Œåšåˆ°ä»£ç å¤ç”¨ï¼Œè§£è€¦ä¸šåŠ¡ä¸éä¸šåŠ¡ä»£ç ï¼Œè®©ç¨‹åºå‘˜èšç„¦ä¸šåŠ¡å¼€å‘ã€‚é’ˆå¯¹å¼‚æ­¥éé˜»å¡è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å®ƒæŠ½è±¡æˆæ¡†æ¶æ¥è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œè€Œè¿™ä¸ªæ¡†æ¶å°±æ˜¯æˆ‘ä»¬è¿™èŠ‚è¯¾è¦è®²çš„EventBusã€‚</p><h2>EventBusæ¡†æ¶åŠŸèƒ½éœ€æ±‚ä»‹ç»</h2><p>EventBusç¿»è¯‘ä¸ºâ€œäº‹ä»¶æ€»çº¿â€ï¼Œå®ƒæä¾›äº†å®ç°è§‚å¯Ÿè€…æ¨¡å¼çš„éª¨æ¶ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºæ­¤æ¡†æ¶ï¼Œéå¸¸å®¹æ˜“åœ°åœ¨è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯ä¸­å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¸éœ€è¦ä»é›¶å¼€å§‹å¼€å‘ã€‚å…¶ä¸­ï¼ŒGoogle Guava EventBuså°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒè‘—åçš„EventBusæ¡†æ¶ï¼Œå®ƒä¸ä»…ä»…æ”¯æŒå¼‚æ­¥éé˜»å¡æ¨¡å¼ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒåŒæ­¥é˜»å¡æ¨¡å¼</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¾‹å­æ¥çœ‹ä¸€ä¸‹ï¼ŒGuava EventBuså…·æœ‰å“ªäº›åŠŸèƒ½ã€‚è¿˜æ˜¯ä¸ŠèŠ‚è¯¾é‚£ä¸ªç”¨æˆ·æ³¨å†Œçš„ä¾‹å­ï¼Œæˆ‘ä»¬ç”¨Guava EventBusé‡æ–°å®ç°ä¸€ä¸‹ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class UserController {\n  private UserService userService; // ä¾èµ–æ³¨å…¥\n\n  private EventBus eventBus;\n  private static final int DEFAULT_EVENTBUS_THREAD_POOL_SIZE = 20;\n\n  public UserController() {\n    //eventBus = new EventBus(); // åŒæ­¥é˜»å¡æ¨¡å¼\n    eventBus = new AsyncEventBus(Executors.newFixedThreadPool(DEFAULT_EVENTBUS_THREAD_POOL_SIZE)); // å¼‚æ­¥éé˜»å¡æ¨¡å¼\n  }\n\n  public void setRegObservers(List&lt;Object&gt; observers) {\n    for (Object observer : observers) {\n      eventBus.register(observer);\n    }\n  }\n\n  public Long register(String telephone, String password) {\n    //çœç•¥è¾“å…¥å‚æ•°çš„æ ¡éªŒä»£ç \n    //çœç•¥userService.register()å¼‚å¸¸çš„try-catchä»£ç \n    long userId = userService.register(telephone, password);\n\n    eventBus.post(userId);\n\n    return userId;\n  }\n}\n\npublic class RegPromotionObserver {\n  private PromotionService promotionService; // ä¾èµ–æ³¨å…¥\n\n  @Subscribe\n  public void handleRegSuccess(Long userId) {\n    promotionService.issueNewUserExperienceCash(userId);\n  }\n}\n\npublic class RegNotificationObserver {\n  private NotificationService notificationService;\n\n  @Subscribe\n  public void handleRegSuccess(Long userId) {\n    notificationService.sendInboxMessage(userId, &quot;...&quot;);\n  }\n}\n</code></pre><p>åˆ©ç”¨EventBusæ¡†æ¶å®ç°çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè·Ÿä»é›¶å¼€å§‹ç¼–å†™çš„è§‚å¯Ÿè€…æ¨¡å¼ç›¸æ¯”ï¼Œä»å¤§çš„æµç¨‹ä¸Šæ¥è¯´ï¼Œå®ç°æ€è·¯å¤§è‡´ä¸€æ ·ï¼Œéƒ½éœ€è¦å®šä¹‰Observerï¼Œå¹¶ä¸”é€šè¿‡register()å‡½æ•°æ³¨å†ŒObserverï¼Œä¹Ÿéƒ½éœ€è¦é€šè¿‡è°ƒç”¨æŸä¸ªå‡½æ•°ï¼ˆæ¯”å¦‚ï¼ŒEventBusä¸­çš„post()å‡½æ•°ï¼‰æ¥ç»™Observerå‘é€æ¶ˆæ¯ï¼ˆåœ¨EventBusä¸­æ¶ˆæ¯è¢«ç§°ä½œäº‹ä»¶eventï¼‰ã€‚</p><p>ä½†åœ¨å®ç°ç»†èŠ‚æ–¹é¢ï¼Œå®ƒä»¬åˆæœ‰äº›åŒºåˆ«ã€‚åŸºäºEventBusï¼Œæˆ‘ä»¬ä¸éœ€è¦å®šä¹‰Observeræ¥å£ï¼Œä»»æ„ç±»å‹çš„å¯¹è±¡éƒ½å¯ä»¥æ³¨å†Œåˆ°EventBusä¸­ï¼Œé€šè¿‡@Subscribeæ³¨è§£æ¥æ ‡æ˜ç±»ä¸­å“ªä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶è¢«è§‚å¯Ÿè€…å‘é€çš„æ¶ˆæ¯ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¯¦ç»†åœ°è®²ä¸€ä¸‹ï¼ŒGuava EventBusçš„å‡ ä¸ªä¸»è¦çš„ç±»å’Œå‡½æ•°ã€‚</p><ul>\n<li>EventBusã€AsyncEventBus</li>\n</ul><p>Guava EventBuså¯¹å¤–æš´éœ²çš„æ‰€æœ‰å¯è°ƒç”¨æ¥å£ï¼Œéƒ½å°è£…åœ¨EventBusç±»ä¸­ã€‚å…¶ä¸­ï¼ŒEventBuså®ç°äº†åŒæ­¥é˜»å¡çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ŒAsyncEventBusç»§æ‰¿è‡ªEventBusï¼Œæä¾›äº†å¼‚æ­¥éé˜»å¡çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚å…·ä½“ä½¿ç”¨æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>EventBus eventBus = new EventBus(); // åŒæ­¥é˜»å¡æ¨¡å¼\nEventBus eventBus = new AsyncEventBus(Executors.newFixedThreadPool(8))ï¼›// å¼‚æ­¥é˜»å¡æ¨¡å¼\n</code></pre><ul>\n<li>register()å‡½æ•°</li>\n</ul><p>EventBusç±»æä¾›äº†register()å‡½æ•°ç”¨æ¥æ³¨å†Œè§‚å¯Ÿè€…ã€‚å…·ä½“çš„å‡½æ•°å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºã€‚å®ƒå¯ä»¥æ¥å—ä»»ä½•ç±»å‹ï¼ˆObjectï¼‰çš„è§‚å¯Ÿè€…ã€‚è€Œåœ¨ç»å…¸çš„è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ä¸­ï¼Œregister()å‡½æ•°å¿…é¡»æ¥å—å®ç°äº†åŒä¸€Observeræ¥å£çš„ç±»å¯¹è±¡ã€‚</p><pre><code>public void register(Object object);\n</code></pre><ul>\n<li>unregister()å‡½æ•°</li>\n</ul><p>ç›¸å¯¹äºregister()å‡½æ•°ï¼Œunregister()å‡½æ•°ç”¨æ¥ä»EventBusä¸­åˆ é™¤æŸä¸ªè§‚å¯Ÿè€…ã€‚æˆ‘å°±ä¸å¤šè§£é‡Šäº†ï¼Œå…·ä½“çš„å‡½æ•°å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public void unregister(Object object);\n</code></pre><ul>\n<li>post()å‡½æ•°</li>\n</ul><p>EventBusç±»æä¾›äº†post()å‡½æ•°ï¼Œç”¨æ¥ç»™è§‚å¯Ÿè€…å‘é€æ¶ˆæ¯ã€‚å…·ä½“çš„å‡½æ•°å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public void post(Object event);\n</code></pre><p>è·Ÿç»å…¸çš„è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå½“æˆ‘ä»¬è°ƒç”¨post()å‡½æ•°å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œå¹¶éæŠŠæ¶ˆæ¯å‘é€ç»™æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œè€Œæ˜¯å‘é€ç»™å¯åŒ¹é…çš„è§‚å¯Ÿè€…ã€‚æ‰€è°“å¯åŒ¹é…æŒ‡çš„æ˜¯ï¼Œèƒ½æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹æ˜¯å‘é€æ¶ˆæ¯ï¼ˆpostå‡½æ•°å®šä¹‰ä¸­çš„eventï¼‰ç±»å‹çš„çˆ¶ç±»ã€‚æˆ‘ä¸¾ä¸ªä¾‹å­æ¥è§£é‡Šä¸€ä¸‹ã€‚</p><p>æ¯”å¦‚ï¼ŒAObserverèƒ½æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹æ˜¯XMsgï¼ŒBObserverèƒ½æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹æ˜¯YMsgï¼ŒCObserverèƒ½æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹æ˜¯ZMsgã€‚å…¶ä¸­ï¼ŒXMsgæ˜¯YMsgçš„çˆ¶ç±»ã€‚å½“æˆ‘ä»¬å¦‚ä¸‹å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œç›¸åº”èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯çš„å¯åŒ¹é…è§‚å¯Ÿè€…å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>XMsg xMsg = new XMsg();\nYMsg yMsg = new YMsg();\nZMsg zMsg = new ZMsg();\npost(xMsg); =&gt; AObserveræ¥æ”¶åˆ°æ¶ˆæ¯\npost(yMsg); =&gt; AObserverã€BObserveræ¥æ”¶åˆ°æ¶ˆæ¯\npost(zMsg); =&gt; CObserveræ¥æ”¶åˆ°æ¶ˆæ¯\n</code></pre><p>ä½ å¯èƒ½ä¼šé—®ï¼Œæ¯ä¸ªObserverèƒ½æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹æ˜¯åœ¨å“ªé‡Œå®šä¹‰çš„å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹Guava EventBusæœ€ç‰¹åˆ«çš„ä¸€ä¸ªåœ°æ–¹ï¼Œé‚£å°±æ˜¯@Subscribeæ³¨è§£ã€‚</p><ul>\n<li>@Subscribeæ³¨è§£</li>\n</ul><p>EventBusé€šè¿‡@Subscribeæ³¨è§£æ¥æ ‡æ˜ï¼ŒæŸä¸ªå‡½æ•°èƒ½æ¥æ”¶å“ªç§ç±»å‹çš„æ¶ˆæ¯ã€‚å…·ä½“çš„ä½¿ç”¨ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚åœ¨DObserverç±»ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡@Subscribeæ³¨è§£äº†ä¸¤ä¸ªå‡½æ•°f1()ã€f2()ã€‚</p><pre><code>public DObserver {\n  //...çœç•¥å…¶ä»–å±æ€§å’Œæ–¹æ³•...\n  \n  @Subscribe\n  public void f1(PMsg event) { //... }\n  \n  @Subscribe\n  public void f2(QMsg event) { //... }\n}\n</code></pre><p>å½“é€šè¿‡register()å‡½æ•°å°†DObserver ç±»å¯¹è±¡æ³¨å†Œåˆ°EventBusçš„æ—¶å€™ï¼ŒEventBusä¼šæ ¹æ®@Subscribeæ³¨è§£æ‰¾åˆ°f1()å’Œf2()ï¼Œå¹¶ä¸”å°†ä¸¤ä¸ªå‡½æ•°èƒ½æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹è®°å½•ä¸‹æ¥ï¼ˆPMsg-&gt;f1ï¼ŒQMsg-&gt;f2ï¼‰ã€‚å½“æˆ‘ä»¬é€šè¿‡post()å‡½æ•°å‘é€æ¶ˆæ¯ï¼ˆæ¯”å¦‚QMsgæ¶ˆæ¯ï¼‰çš„æ—¶å€™ï¼ŒEventBusä¼šé€šè¿‡ä¹‹å‰çš„è®°å½•ï¼ˆQMsg-&gt;f2ï¼‰ï¼Œè°ƒç”¨ç›¸åº”çš„å‡½æ•°ï¼ˆf2ï¼‰ã€‚</p><h2>æ‰‹æŠŠæ‰‹å®ç°ä¸€ä¸ªEventBusæ¡†æ¶</h2><p>Guava EventBusçš„åŠŸèƒ½æˆ‘ä»¬å·²ç»è®²æ¸…æ¥šäº†ï¼Œæ€»ä½“ä¸Šæ¥è¯´ï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é‡å¤é€ è½®å­ï¼Œâ€œå±±å¯¨â€ä¸€ä¸ªEventBuså‡ºæ¥ã€‚</p><p>æˆ‘ä»¬é‡ç‚¹æ¥çœ‹ï¼ŒEventBusä¸­ä¸¤ä¸ªæ ¸å¿ƒå‡½æ•°register()å’Œpost()çš„å®ç°åŸç†ã€‚å¼„æ‡‚äº†å®ƒä»¬ï¼ŒåŸºæœ¬ä¸Šå°±å¼„æ‡‚äº†æ•´ä¸ªEventBusæ¡†æ¶ã€‚ä¸‹é¢ä¸¤å¼ å›¾æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°çš„å®ç°åŸç†å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ce/c6/ce842666fa3dc92bb8f4f2d8e75d12c6.jpg?wh=2563*1333\" alt=\"\"></p><p><img src=\"https://static001.geekbang.org/resource/image/bf/45/bf7ef52a40b1e35b18f369265caca645.jpg?wh=2528*953\" alt=\"\"></p><p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæœ€å…³é”®çš„ä¸€ä¸ªæ•°æ®ç»“æ„æ˜¯Observeræ³¨å†Œè¡¨ï¼Œè®°å½•äº†æ¶ˆæ¯ç±»å‹å’Œå¯æ¥æ”¶æ¶ˆæ¯å‡½æ•°çš„å¯¹åº”å…³ç³»ã€‚å½“è°ƒç”¨register()å‡½æ•°æ³¨å†Œè§‚å¯Ÿè€…çš„æ—¶å€™ï¼ŒEventBusé€šè¿‡è§£æ@Subscribeæ³¨è§£ï¼Œç”ŸæˆObserveræ³¨å†Œè¡¨ã€‚å½“è°ƒç”¨post()å‡½æ•°å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼ŒEventBusé€šè¿‡æ³¨å†Œè¡¨æ‰¾åˆ°ç›¸åº”çš„å¯æ¥æ”¶æ¶ˆæ¯çš„å‡½æ•°ï¼Œç„¶åé€šè¿‡Javaçš„åå°„è¯­æ³•æ¥åŠ¨æ€åœ°åˆ›å»ºå¯¹è±¡ã€æ‰§è¡Œå‡½æ•°ã€‚å¯¹äºåŒæ­¥é˜»å¡æ¨¡å¼ï¼ŒEventBusåœ¨ä¸€ä¸ªçº¿ç¨‹å†…ä¾æ¬¡æ‰§è¡Œç›¸åº”çš„å‡½æ•°ã€‚å¯¹äºå¼‚æ­¥éé˜»å¡æ¨¡å¼ï¼ŒEventBusé€šè¿‡ä¸€ä¸ªçº¿ç¨‹æ± æ¥æ‰§è¡Œç›¸åº”çš„å‡½æ•°ã€‚</p><p>å¼„æ‡‚äº†åŸç†ï¼Œå®ç°èµ·æ¥å°±ç®€å•å¤šäº†ã€‚æ•´ä¸ªå°æ¡†æ¶çš„ä»£ç å®ç°åŒ…æ‹¬5ä¸ªç±»ï¼šEventBusã€AsyncEventBusã€Subscribeã€ObserverActionã€ObserverRegistryã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¾æ¬¡æ¥çœ‹ä¸‹è¿™5ä¸ªç±»ã€‚</p><h3>1.Subscribe</h3><p>Subscribeæ˜¯ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºæ ‡æ˜è§‚å¯Ÿè€…ä¸­çš„å“ªä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶æ¶ˆæ¯ã€‚</p><pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\n@Beta\npublic @interface Subscribe {}\n</code></pre><h3>2.ObserverAction</h3><p>ObserverActionç±»ç”¨æ¥è¡¨ç¤º@Subscribeæ³¨è§£çš„æ–¹æ³•ï¼Œå…¶ä¸­ï¼Œtargetè¡¨ç¤ºè§‚å¯Ÿè€…ç±»ï¼Œmethodè¡¨ç¤ºæ–¹æ³•ã€‚å®ƒä¸»è¦ç”¨åœ¨ObserverRegistryè§‚å¯Ÿè€…æ³¨å†Œè¡¨ä¸­ã€‚</p><pre><code>public class ObserverAction {\n  private Object target;\n  private Method method;\n\n  public ObserverAction(Object target, Method method) {\n    this.target = Preconditions.checkNotNull(target);\n    this.method = method;\n    this.method.setAccessible(true);\n  }\n\n  public void execute(Object event) { // eventæ˜¯methodæ–¹æ³•çš„å‚æ•°\n    try {\n      method.invoke(target, event);\n    } catch (InvocationTargetException | IllegalAccessException e) {\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre><h3>3.ObserverRegistry</h3><p>ObserverRegistryç±»å°±æ˜¯å‰é¢è®²åˆ°çš„Observeræ³¨å†Œè¡¨ï¼Œæ˜¯æœ€å¤æ‚çš„ä¸€ä¸ªç±»ï¼Œæ¡†æ¶ä¸­å‡ ä¹æ‰€æœ‰çš„æ ¸å¿ƒé€»è¾‘éƒ½åœ¨è¿™ä¸ªç±»ä¸­ã€‚è¿™ä¸ªç±»å¤§é‡ä½¿ç”¨äº†Javaçš„åå°„è¯­æ³•ï¼Œä¸è¿‡ä»£ç æ•´ä½“æ¥è¯´éƒ½ä¸éš¾ç†è§£ï¼Œå…¶ä¸­ï¼Œä¸€ä¸ªæ¯”è¾ƒæœ‰æŠ€å·§çš„åœ°æ–¹æ˜¯CopyOnWriteArraySetçš„ä½¿ç”¨ã€‚</p><p>CopyOnWriteArraySetï¼Œé¡¾åæ€ä¹‰ï¼Œåœ¨å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„setï¼Œå¹¶ä¸”å°†åŸå§‹æ•°æ®cloneåˆ°æ–°çš„setä¸­ï¼Œåœ¨æ–°çš„setä¸­å†™å…¥æ•°æ®å®Œæˆä¹‹åï¼Œå†ç”¨æ–°çš„setæ›¿æ¢è€çš„setã€‚è¿™æ ·å°±èƒ½ä¿è¯åœ¨å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œä¸å½±å“æ•°æ®çš„è¯»å–æ“ä½œï¼Œä»¥æ­¤æ¥è§£å†³è¯»å†™å¹¶å‘é—®é¢˜ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒCopyOnWriteSetè¿˜é€šè¿‡åŠ é”çš„æ–¹å¼ï¼Œé¿å…äº†å¹¶å‘å†™å†²çªã€‚å…·ä½“çš„ä½œç”¨ä½ å¯ä»¥å»æŸ¥çœ‹ä¸€ä¸‹CopyOnWriteSetç±»çš„æºç ï¼Œä¸€ç›®äº†ç„¶ã€‚</p><pre><code>public class ObserverRegistry {\n  private ConcurrentMap&lt;Class&lt;?&gt;, CopyOnWriteArraySet&lt;ObserverAction&gt;&gt; registry = new ConcurrentHashMap&lt;&gt;();\n\n  public void register(Object observer) {\n    Map&lt;Class&lt;?&gt;, Collection&lt;ObserverAction&gt;&gt; observerActions = findAllObserverActions(observer);\n    for (Map.Entry&lt;Class&lt;?&gt;, Collection&lt;ObserverAction&gt;&gt; entry : observerActions.entrySet()) {\n      Class&lt;?&gt; eventType = entry.getKey();\n      Collection&lt;ObserverAction&gt; eventActions = entry.getValue();\n      CopyOnWriteArraySet&lt;ObserverAction&gt; registeredEventActions = registry.get(eventType);\n      if (registeredEventActions == null) {\n        registry.putIfAbsent(eventType, new CopyOnWriteArraySet&lt;&gt;());\n        registeredEventActions = registry.get(eventType);\n      }\n      registeredEventActions.addAll(eventActions);\n    }\n  }\n\n  public List&lt;ObserverAction&gt; getMatchedObserverActions(Object event) {\n    List&lt;ObserverAction&gt; matchedObservers = new ArrayList&lt;&gt;();\n    Class&lt;?&gt; postedEventType = event.getClass();\n    for (Map.Entry&lt;Class&lt;?&gt;, CopyOnWriteArraySet&lt;ObserverAction&gt;&gt; entry : registry.entrySet()) {\n      Class&lt;?&gt; eventType = entry.getKey();\n      Collection&lt;ObserverAction&gt; eventActions = entry.getValue();\n      if (postedEventType.isAssignableFrom(eventType)) {\n        matchedObservers.addAll(eventActions);\n      }\n    }\n    return matchedObservers;\n  }\n\n  private Map&lt;Class&lt;?&gt;, Collection&lt;ObserverAction&gt;&gt; findAllObserverActions(Object observer) {\n    Map&lt;Class&lt;?&gt;, Collection&lt;ObserverAction&gt;&gt; observerActions = new HashMap&lt;&gt;();\n    Class&lt;?&gt; clazz = observer.getClass();\n    for (Method method : getAnnotatedMethods(clazz)) {\n      Class&lt;?&gt;[] parameterTypes = method.getParameterTypes();\n      Class&lt;?&gt; eventType = parameterTypes[0];\n      if (!observerActions.containsKey(eventType)) {\n        observerActions.put(eventType, new ArrayList&lt;&gt;());\n      }\n      observerActions.get(eventType).add(new ObserverAction(observer, method));\n    }\n    return observerActions;\n  }\n\n  private List&lt;Method&gt; getAnnotatedMethods(Class&lt;?&gt; clazz) {\n    List&lt;Method&gt; annotatedMethods = new ArrayList&lt;&gt;();\n    for (Method method : clazz.getDeclaredMethods()) {\n      if (method.isAnnotationPresent(Subscribe.class)) {\n        Class&lt;?&gt;[] parameterTypes = method.getParameterTypes();\n        Preconditions.checkArgument(parameterTypes.length == 1,\n                &quot;Method %s has @Subscribe annotation but has %s parameters.&quot;\n                        + &quot;Subscriber methods must have exactly 1 parameter.&quot;,\n                method, parameterTypes.length);\n        annotatedMethods.add(method);\n      }\n    }\n    return annotatedMethods;\n  }\n}\n</code></pre><h3>4.EventBus</h3><p>EventBuså®ç°çš„æ˜¯é˜»å¡åŒæ­¥çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚çœ‹ä»£ç ä½ å¯èƒ½ä¼šæœ‰äº›ç–‘é—®ï¼Œè¿™æ˜æ˜å°±ç”¨åˆ°äº†çº¿ç¨‹æ± Executorå•Šã€‚å®é™…ä¸Šï¼ŒMoreExecutors.directExecutor()æ˜¯Google Guavaæä¾›çš„å·¥å…·ç±»ï¼Œçœ‹ä¼¼æ˜¯å¤šçº¿ç¨‹ï¼Œå®é™…ä¸Šæ˜¯å•çº¿ç¨‹ã€‚ä¹‹æ‰€ä»¥è¦è¿™ä¹ˆå®ç°ï¼Œä¸»è¦è¿˜æ˜¯ä¸ºäº†è·ŸAsyncEventBusç»Ÿä¸€ä»£ç é€»è¾‘ï¼Œåšåˆ°ä»£ç å¤ç”¨ã€‚</p><pre><code>public class EventBus {\n  private Executor executor;\n  private ObserverRegistry registry = new ObserverRegistry();\n\n  public EventBus() {\n    this(MoreExecutors.directExecutor());\n  }\n\n  protected EventBus(Executor executor) {\n    this.executor = executor;\n  }\n\n  public void register(Object object) {\n    registry.register(object);\n  }\n\n  public void post(Object event) {\n    List&lt;ObserverAction&gt; observerActions = registry.getMatchedObserverActions(event);\n    for (ObserverAction observerAction : observerActions) {\n      executor.execute(new Runnable() {\n        @Override\n        public void run() {\n          observerAction.execute(event);\n        }\n      });\n    }\n  }\n}\n</code></pre><h3>5.AsyncEventBus</h3><p>æœ‰äº†EventBusï¼ŒAsyncEventBusçš„å®ç°å°±éå¸¸ç®€å•äº†ã€‚ä¸ºäº†å®ç°å¼‚æ­¥éé˜»å¡çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå®ƒå°±ä¸èƒ½å†ç»§ç»­ä½¿ç”¨MoreExecutors.directExecutor()äº†ï¼Œè€Œæ˜¯éœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œç”±è°ƒç”¨è€…æ³¨å…¥çº¿ç¨‹æ± ã€‚</p><pre><code>public class AsyncEventBus extends EventBus {\n  public AsyncEventBus(Executor executor) {\n    super(executor);\n  }\n}\n</code></pre><p>è‡³æ­¤ï¼Œæˆ‘ä»¬ç”¨äº†ä¸åˆ°200è¡Œä»£ç ï¼Œå°±å®ç°äº†ä¸€ä¸ªè¿˜ç®—å‡‘æ´»èƒ½ç”¨çš„EventBusï¼Œä»åŠŸèƒ½ä¸Šæ¥è®²ï¼Œå®ƒè·ŸGoogle Guava EventBuså‡ ä¹ä¸€æ ·ã€‚ä¸è¿‡ï¼Œå¦‚æœå»æŸ¥çœ‹<a href=\"https://github.com/google/guava\">Google Guava EventBusçš„æºç </a>ï¼Œä½ ä¼šå‘ç°ï¼Œåœ¨å®ç°ç»†èŠ‚æ–¹é¢ï¼Œç›¸æ¯”æˆ‘ä»¬ç°åœ¨çš„å®ç°ï¼Œå®ƒå…¶å®åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œæ¯”å¦‚ä¼˜åŒ–äº†åœ¨æ³¨å†Œè¡¨ä¸­æŸ¥æ‰¾æ¶ˆæ¯å¯åŒ¹é…å‡½æ•°çš„ç®—æ³•ã€‚å¦‚æœæœ‰æ—¶é—´çš„è¯ï¼Œå»ºè®®ä½ å»è¯»ä¸€ä¸‹å®ƒçš„æºç ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬æ¥ä¸€å—æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹ã€‚</p><p>æ¡†æ¶çš„ä½œç”¨æœ‰ï¼šéšè—å®ç°ç»†èŠ‚ï¼Œé™ä½å¼€å‘éš¾åº¦ï¼Œåšåˆ°ä»£ç å¤ç”¨ï¼Œè§£è€¦ä¸šåŠ¡ä¸éä¸šåŠ¡ä»£ç ï¼Œè®©ç¨‹åºå‘˜èšç„¦ä¸šåŠ¡å¼€å‘ã€‚é’ˆå¯¹å¼‚æ­¥éé˜»å¡è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å®ƒæŠ½è±¡æˆæ¡†æ¶æ¥è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œè€Œè¿™ä¸ªæ¡†æ¶å°±æ˜¯æˆ‘ä»¬è¿™èŠ‚è¯¾è®²çš„EventBusã€‚EventBusç¿»è¯‘ä¸ºâ€œäº‹ä»¶æ€»çº¿â€ï¼Œå®ƒæä¾›äº†å®ç°è§‚å¯Ÿè€…æ¨¡å¼çš„éª¨æ¶ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºæ­¤æ¡†æ¶ï¼Œéå¸¸å®¹æ˜“åœ°åœ¨è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯ä¸­å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¸éœ€è¦ä»é›¶å¼€å§‹å¼€å‘ã€‚</p><p>å¾ˆå¤šäººè§‰å¾—åšä¸šåŠ¡å¼€å‘æ²¡æœ‰æŠ€æœ¯æŒ‘æˆ˜ï¼Œå®é™…ä¸Šï¼Œåšä¸šåŠ¡å¼€å‘ä¹Ÿä¼šæ¶‰åŠå¾ˆå¤šéä¸šåŠ¡åŠŸèƒ½çš„å¼€å‘ï¼Œæ¯”å¦‚ä»Šå¤©è®²åˆ°çš„EventBusã€‚åœ¨å¹³æ—¶çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¦å–„äºæŠ½è±¡è¿™äº›éä¸šåŠ¡çš„ã€å¯å¤ç”¨çš„åŠŸèƒ½ï¼Œå¹¶ç§¯æåœ°æŠŠå®ƒä»¬å®ç°æˆé€šç”¨çš„æ¡†æ¶ã€‚</p><h2>è¯¾å ‚è®¨è®º</h2><p>åœ¨ä»Šå¤©å†…å®¹çš„ç¬¬äºŒä¸ªæ¨¡å—â€œEventBusæ¡†æ¶åŠŸèƒ½éœ€æ±‚ä»‹ç»â€ä¸­ï¼Œæˆ‘ä»¬ç”¨Guava EventBusé‡æ–°å®ç°äº†UserControllerï¼Œå®é™…ä¸Šï¼Œä»£ç è¿˜æ˜¯ä¸å¤Ÿè§£è€¦ã€‚UserControllerè¿˜æ˜¯è€¦åˆäº†å¾ˆå¤šè·Ÿè§‚å¯Ÿè€…æ¨¡å¼ç›¸å…³çš„éä¸šåŠ¡ä»£ç ï¼Œæ¯”å¦‚åˆ›å»ºçº¿ç¨‹æ± ã€æ³¨å†ŒObserverã€‚ä¸ºäº†è®©UserControlleræ›´åŠ èšç„¦åœ¨ä¸šåŠ¡åŠŸèƒ½ä¸Šï¼Œä½ æœ‰ä»€ä¹ˆé‡æ„çš„å»ºè®®å—ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","comments":[{"had_liked":false,"id":187305,"user_name":"å°æ–‡åŒå­¦","can_delete":false,"product_type":"c1","uid":1001893,"ip_address":"","ucode":"48F2AEB989C12A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","comment_is_top":false,"comment_ctime":1584080363,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"834807735787","product_id":100039001,"comment_content":"Guava EventBus å¯¹æˆ‘æ¥è¯´ç®€ç›´æ˜¯ä¸€ä»½å¤§ç¤¼ã€‚é‡Œé¢è§£è€¦åŠŸèƒ½ä½¿æœ¬æ¥çš„æ—§é¡¹ç›®åˆä¸å¯ç»´æŠ¤é€æ¸è½¬åŒ–ä¸ºå¯ç»´æŠ¤ã€‚<br><br>EventBusä½œä¸ºä¸€ä¸ªæ€»çº¿ï¼Œè¿˜è€ƒè™‘äº†é€’å½’ä¼ é€äº‹ä»¶çš„é—®é¢˜ï¼Œå¯ä»¥é€‰æ‹©å¹¿åº¦ä¼˜å…ˆä¼ æ’­å’Œæ·±åº¦ä¼˜å…ˆä¼ æ’­ï¼Œé‡åˆ°äº‹ä»¶æ­»å¾ªç¯çš„æ—¶å€™è¿˜ä¼šæŠ¥é”™ã€‚Guavaçš„é¡¹ç›®å¯¹è¿™ä¸ªæ¨¡å—çš„å°è£…éå¸¸å€¼å¾—æˆ‘ä»¬å»é˜…è¯»ï¼Œå¤æ‚çš„éƒ½åœ¨é‡Œå¤´ï¼Œå¤–é¢æä¸ºæ˜“ç”¨ï¼Œæˆ‘æ‹·è´äº†ä¸€ä»½EventBusçš„ä»£ç è¿›è¡Œä¿®æ”¹ä»¥é€‚é…è‡ªå·±çš„é¡¹ç›®ï¼Œå‘è§‰é‡Œé¢çš„æ„é€ éƒ½æä¸ºç²¾å¯†å·§å¦™ï¼Œåƒä¸€ä¸ªæœºæ¢°é’Ÿè¡¨ä¸€æ ·ï¼Œè‡ªå·±éƒ½ä¸‹ä¸äº†æ‰‹ï¼Œè§‰å¾—ä¸å°å¿ƒå°±æ˜¯å¼„åäº†ã€‚<br><br>è·ŸéšçœŸæ­£ä¼˜ç§€çš„å·¥ç¨‹å¸ˆï¼Œå¹¶é˜…è¯»å…¶å†™å‡ºæ¥çš„ä»£ç è®©äººå—ç›ŠåŒªæµ…ã€‚","like_count":195,"discussions":[{"author":{"id":1018685,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/3d/0c3a2fd4.jpg","nickname":"å¶å°”å¤æ´»ä¸‹","note":"","ucode":"18B1D525CD50D3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67644,"discussion_content":"è¿™é‡Œçš„è½¬è´¦ï¼Œè™šæ‹Ÿèµ„é‡‘è¿˜æ˜¯åœ¨æ”¯ä»˜ç³»ç»Ÿå†…éƒ¨çš„è™šæ‹Ÿè´¦æˆ·ä½“ç³»é‡Œæµè½¬ï¼ˆä¿¡æ¯æµï¼‰ï¼Œæ¶‰åŠåˆ°è´¦æˆ·ç³»ç»Ÿè´¦æˆ·ä½™é¢çš„å¢å‡ï¼Œä¼šè®¡ç³»ç»Ÿçš„è®°è´¦ï¼ˆä¼šè®¡ç§‘ç›®çš„å€Ÿè´·è®°ï¼‰ï¼Œæš‚æ—¶ä¸æ¶‰åŠå®ä½“é“¶è¡Œè´¦æˆ·ï¼ˆå¯èƒ½æ˜¯è®°å½•åœ¨å†…éƒ¨è´¦æˆ·çš„åœ¨é€”èµ„é‡‘ï¼Œå¯ç”¨ä¸å¯å–ï¼‰ï¼ˆt+nåé“¶è¡ŒæŒ‰åˆåŒçº¦å®šå°†è¿™éƒ¨åˆ†èµ„é‡‘æ¸…ç®—ç»™å¹³å°åœ¨é“¶è¡Œå¼€è®¾çš„å®ä½“è´¦æˆ·ï¼›ï¼‰ã€‚t+nåï¼ˆå¹³å°ä¸å•†å®¶çš„åˆåŒçº¦å®šï¼‰ï¼Œå®ä½“èµ„é‡‘æ¸…ç®—ç»™å•†å®¶ï¼ˆå¹³å°ä¸å•†å®¶å®ä½“è´¦æˆ·ä½™é¢å˜åŠ¨ï¼‰ï¼Œè¿™éƒ¨åˆ†èµ„é‡‘å¯å–ï¼Œç„¶ååœ¨å•†å®¶å‘èµ·æç°ï¼Œæ­¤æ—¶ï¼Œä¸ä»…æ¶‰åŠå¹³å°å†…éƒ¨è´¦æˆ·ä½™é¢å˜åŠ¨ï¼Œä¼šè®¡è®°è´¦ï¼Œæ—¥ç»ˆæ¸…ç®—åï¼Œè¿˜æ¶‰åŠå•†å®¶é“¶è¡Œå®ä½“è´¦æˆ·çš„ä½™é¢å˜åŠ¨ï¼ˆèµ„é‡‘æµï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575163465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346215,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","nickname":"William","note":"","ucode":"55F5D9DEE485B1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66497,"discussion_content":"å•†å®¶çš„åº”ç”¨è´¦å·è½¬ç»™å•†å®¶çš„é“¶è¡Œå¡ï¼Œ\nå•†å®¶è‡ªå·±çš„æµè½¬. ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575077835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187225,"user_name":"ä¸‹é›¨å¤©","can_delete":false,"product_type":"c1","uid":1008315,"ip_address":"","ucode":"816B3792ECC50A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/bb/323a3133.jpg","comment_is_top":false,"comment_ctime":1584064278,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"345181447958","product_id":100039001,"comment_content":"è¯¾åé¢˜ï¼š<br>ä»£ç†æ¨¡å¼ï¼Œä½¿ç”¨ä¸€ä¸ªä»£ç†ç±»ä¸“é—¨æ¥å¤„ç†EventBusç›¸å…³é€»è¾‘ã€‚ä½œç”¨ï¼š<br>1.å°†ä¸šåŠ¡ä¸éä¸šåŠ¡é€»è¾‘åˆ†ç¦»<br>2.åç»­æ›¿æ¢EventBuså®ç°æ–¹å¼ç›´æ¥æ”¹å†™ä»£ç†ç±»ï¼Œæ»¡è¶³æ‹“å±•éœ€æ±‚","like_count":81,"discussions":[{"author":{"id":1018685,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/3d/0c3a2fd4.jpg","nickname":"å¶å°”å¤æ´»ä¸‹","note":"","ucode":"18B1D525CD50D3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":67633,"discussion_content":"è¿™é‡Œçš„è½¬è´¦ï¼Œè™šæ‹Ÿèµ„é‡‘è¿˜æ˜¯åœ¨æ”¯ä»˜ç³»ç»Ÿå†…éƒ¨çš„è™šæ‹Ÿè´¦æˆ·ä½“ç³»é‡Œæµè½¬ï¼ˆä¿¡æ¯æµï¼‰ï¼Œæ¶‰åŠåˆ°è´¦æˆ·ç³»ç»Ÿè´¦æˆ·çš„å¢å‡ï¼Œä¼šè®¡ç³»ç»Ÿçš„è®°è´¦ï¼›æš‚æ—¶ä¸æ¶‰åŠå®ä½“é“¶è¡Œè´¦æˆ·ã€‚åœ¨å•†å®¶å‘èµ·æç°æ—¶ï¼Œæ—¥ç»ˆæ¸…ç®—åæ‰æ¶‰åŠé“¶è¡Œå®ä½“è´¦æˆ·çš„ä½™é¢å˜åŠ¨ï¼ˆèµ„é‡‘æµï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575162705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1637228,"avatar":"https://static001.geekbang.org/account/avatar/00/18/fb/6c/12fdc372.jpg","nickname":"è¿ˆå‘æ¶æ„å¸ˆ","note":"","ucode":"2476594CF76001","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66495,"discussion_content":"ç„¶åè§¦å‘çœŸæ­£çš„é“¶è¡Œè½¬è´¦æ“ä½œï¼Œåº”è¯¥æ˜¯æŒ‡å•†å®¶åç»­æç°çš„æµç¨‹æ‰è§¦å‘é“¶è¡Œè½¬è´¦å§- -","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575077657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1141173,"avatar":"https://static001.geekbang.org/account/avatar/00/11/69/b5/1e1731cc.jpg","nickname":"zsé˜¿å¸…","note":"","ucode":"07A54AE7F1CAFF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65293,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘ä¹Ÿä¸ç†è§£ï¼Œä¸ºå•¥è¿˜æœ‰ä¸€ä¸ªå•†å®¶é’±åŒ…ï¼Œä¸åº”è¯¥æ˜¯æå®¢çš„è™šæ‹Ÿé’±åŒ…åè€…åº”ç”¨çš„è™šæ‹Ÿé’±åŒ…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574993853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206456,"user_name":"zhengyu.nie","can_delete":false,"product_type":"c1","uid":1541669,"ip_address":"","ucode":"FFE0377D323E46","user_header":"https://static001.geekbang.org/account/avatar/00/17/86/25/25ded6c3.jpg","comment_is_top":false,"comment_ctime":1586864002,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"272169803650","product_id":100039001,"comment_content":"ä¸€å¼€å§‹åœ¨æºç¨‹å·¥ä½œçš„æ—¶å€™å› ä¸ºæ—©æœŸSpring Eventé©±åŠ¨å¼ºåˆ¶è¦æ±‚äº‹ä»¶ç»§æ‰¿æŠ½è±¡äº‹ä»¶ï¼Œè€Œè½¬åˆ°Guava EventBusï¼Œåœ¨Eventå®ä½“ä¸Šæ›´åŠ çµæ´»ã€‚åé¢æ¥é˜¿é‡Œåå‘ç°ä¸€äº›é¡¹ç›®é‡Œï¼ŒSpringæ–°ç‰ˆæœ¬ä¹Ÿå¯ä»¥æ”¯æŒéç»§æ‰¿çš„äº‹ä»¶ç±»å‹äº†ï¼Œä¹Ÿæœ‰å¾ˆå¤šMetaQæ¶ˆæ¯ç›´æ¥åˆ†å‘åˆ°å†…å­˜Eventçš„å†™æ³•ã€‚<br><br>å…³äºEventBusæºç ä¹Ÿçœ‹äº†å‡ éäº†ï¼Œæ€»ä½“æ¥è¯´æä¾›äº†å‡ ç§dispatcherï¼Œæœ‰å¹¿åº¦å’Œæ·±åº¦ä¼˜å…ˆåŸåˆ™ï¼ŒåƒPerThreadä¸­ä¸¤å±‚whileä¹Ÿæœ‰å¯¹åµŒå¥—äº‹ä»¶çš„å¤„ç†ï¼ŒåƒGoogleå·¥ç¨‹å¸ˆè‡´æ•¬ã€‚<br><br>EventBusç°åœ¨æ¥å¯¹æˆ‘ä¸ªäººè¯´ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹å¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼š<br>1.åœ¨æ¯”è¾ƒé«˜éœ€æ±‚çš„åœºæ™¯ä¸Šï¼ŒEventæŒä¹…åŒ–æœºåˆ¶ä¹Ÿæ˜¯éœ€è¦çš„ï¼Œä¸ç®¡æ˜¯ä¸ºäº†é«˜å¯ç”¨ï¼ˆå†…å­˜é˜Ÿåˆ—å®•æœºå°±ä¸¢ï¼‰ï¼Œåšæˆæœ€ç»ˆä¸€è‡´æ€§è½¯äº‹åŠ¡ï¼Œæˆ–è€…æ˜¯CQRSä¸­äº‹ä»¶æº¯æºç­‰éœ€æ±‚ã€‚<br><br>2.ç°åœ¨çš„å¼‚æ­¥å¤„ç†ï¼Œæ˜¯ç›´æ¥ä¸¢åœ¨åŒä¸€ä¸ªçº¿ç¨‹æ± å¤„ç†ï¼Œé‚£ä¹ˆå­˜åœ¨å¿™æ­»çš„eventå¯¼è‡´eventé¥¿æ­»çš„æƒ…å†µï¼Œæ‰€ä»¥è¿™ä¸€å—ä¼šæœ‰å¾ˆå¤§å±€é™æ€§ï¼Œå¯¹æ¯”akkaä¹‹ç±»çš„è¯ã€‚<br><br>3.ç°åœ¨çš„Eventåœ¨æ²¡æ‰“çš„@AllowConcurrentEventsæ—¶å€™ï¼Œä¹Ÿå°±æ˜¯éœ€è¦çº¿ç¨‹å®‰å…¨çš„æ—¶å€™ï¼Œæ˜¯invoke methodè¿‡ç¨‹æ˜¯åŠ äº†synchronizedå…³é”®å­—æ§åˆ¶çš„ï¼Œé‚£ä¹ˆæœ€å¥½æ–¹æ³•ç²’åº¦ä¸è¦å¤ªå¤§ï¼Œæ€§èƒ½ä¸Šè€ƒè™‘çš„è¯ã€‚<br><br>å…¶å®ç°åœ¨ä¹Ÿè›®çº ç»“çš„ï¼Œåˆ°åº•ç”¨EventBusè¿˜æ˜¯Spring Eventï¼ŒæŒ‰é“ç†è®²ï¼Œç°åœ¨é¡¹ç›®åŸºæœ¬éƒ½æ˜¯SpringBootä½“ç³»ï¼Œé‚£ä¹ˆå…¶å®Springäº‹ä»¶éš”ç»ä¾èµ–æ›´å¤šï¼Œä¹Ÿæ›´å®¹æ˜“å’ŒSpring Asyncç­‰é›†æˆï¼Œæ‰€ä»¥æˆ‘ç°åœ¨åŸºæœ¬æ˜¯ç”¨Springäº‹ä»¶é©±åŠ¨æ›¿ä»£EventBusã€‚","like_count":64,"discussions":[{"author":{"id":1368038,"avatar":"https://static001.geekbang.org/account/avatar/00/14/df/e6/bd1b3c0b.jpg","nickname":"Jesse","note":"","ucode":"727CA882B84DA0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65295,"discussion_content":"è¿˜æœ‰ä¸€äº› domain æ— æ³•å®Œæˆçš„é€»è¾‘ï¼Œç§»åŠ¨åˆ°serviceä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574993893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189446,"user_name":"é±¼Shiyao","can_delete":false,"product_type":"c1","uid":1379122,"ip_address":"","ucode":"302AD42FFEFFCE","user_header":"https://static001.geekbang.org/account/avatar/00/15/0b/32/c2eff01b.jpg","comment_is_top":false,"comment_ctime":1584516959,"is_pvip":false,"discussion_count":9,"race_medal":0,"score":"181973143391","product_id":100039001,"comment_content":"æŠŠè€å¸ˆçš„EventBusçš„ä»£ç å®ç°äº†ä¸€ä¸‹ï¼Œå‘ç°æœ‰ä¸¤ä¸ªåœ°æ–¹æœ‰é—®é¢˜ã€‚<br>1ï¼š<br>XMsg xMsg = new XMsg();<br>YMsg yMsg = new YMsg();<br>å¦‚æœXMsgæ˜¯YMsgçš„çˆ¶ç±»çš„è¯ï¼Œåº”è¯¥æ˜¯<br>post(xMsg); =&gt; AObserveræ¥æ”¶åˆ°æ¶ˆæ¯<br>post(yMsg); =&gt; AObserver,BObserveræ¥æ”¶åˆ°æ¶ˆæ¯<br>2. å’Œåˆšæ‰çš„é—®é¢˜ä¸€æ ·ï¼Œå¯¹åº”ç€ObserverRegistryçš„ä»£ç ã€‚<br>åœ¨getMatchedObserverActionå‡½æ•°ä¸­<br>if (postedEventType.isAssignableFrom(eventType)) <br>åº”è¯¥æ”¹æˆ<br>if (eventType.isAssignableFrom(postedEventType)) ","like_count":43,"discussions":[{"author":{"id":1476490,"avatar":"https://static001.geekbang.org/account/avatar/00/16/87/8a/07ab933c.jpg","nickname":"ç’€ç’¨æ˜Ÿç©º","note":"","ucode":"CE6324C4261A52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381391,"discussion_content":"çœ‹äº†è¿™ä¹ˆå¤šæœŸï¼Œæˆ‘å‘ç°äº‰å“¥æ˜¯æ•…æ„çš„ï¼ŒåŸºæœ¬æ²¡æ€ä¹ˆæµ‹è¯•ï¼Œç±»ä¼¼äºä¼ªä»£ç ï¼ŒæŠŠbugç•™ç»™äº†å¤§å®¶","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1625038602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1446984,"avatar":"https://static001.geekbang.org/account/avatar/00/16/14/48/3d1e0488.jpg","nickname":"ç¬”ç­’è™«","note":"","ucode":"A1E6DE2A17C8E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381916,"discussion_content":"çœ‹äº†é‚£è¡Œä»£ç ï¼Œå°±ç­‰åœ¨è¯„è®ºåŒºæ‰¾åˆ°è¿™ä¸ªè¯„è®º","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625288640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368752,"discussion_content":"è¯„è®ºåŒºè¿™ä½è€å“¥æ˜¯å¯¹çš„, äº‰å“¥çš„ä»£ç ç¡®å®é”™äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618823261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1326223,"avatar":"https://static001.geekbang.org/account/avatar/00/14/3c/8f/be719404.jpg","nickname":"Delçš®è€¶ç½—","note":"","ucode":"E90D6311ED875F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288838,"discussion_content":"æ­¤å¤„çœ‹äº†å¾ˆä¹…ï¼Œä»¥ä¸ºæ˜¯è‡ªå·±ç†è§£é”™äº†ï¼Œåº”è¯¥ç¡®å®æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¸®é¡¶","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593889673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1234974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d8/1e/985d5363.jpg","nickname":"geek","note":"","ucode":"BF9406F6ABDB7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380133,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜å¯ä»¥è¿™ä¹ˆæ”¹ï¼Œåœ¨ getAnnotatedMethods() é‡Œï¼š\nfor (Method method : clazz.getMethods()) {\n    if (!Objects.equals(method.getDeclaringClass(), Object.class) &amp;&amp; method.isAnnotationPresent(Subscribe.class)) {","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624352843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1587803,"avatar":"https://static001.geekbang.org/account/avatar/00/18/3a/5b/ce1724ca.jpg","nickname":"undefined","note":"","ucode":"867405CA5A9FB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210888,"discussion_content":"è¯„è®ºçš„æ”¹æ³•æ˜¯å¯¹çš„ï¼Œæ–‡ç« çš„ä»£ç æ˜¯ä¼šè¿è¡ŒæŠ›é”™çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584788204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1800886,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7a/b6/f54bbfaa.jpg","nickname":"èŠ±éƒä¸–çºª","note":"","ucode":"301DF9B6375E08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208556,"discussion_content":"è€å“¥ï¼Œæˆ‘å†è¯»äº†å‡ éï¼Œæˆ‘è§‰å¾—äº‰å“¥æ˜¯å¯¹çš„ã€‚\npostedEventTypeæ˜¯ä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯ï¼Œå¦‚æœä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯ç±»å‹æ˜¯è¡¨ä¸­Keyçš„å­ç±»çš„è¯ï¼Œåˆ™å¯ä»¥ä¼ é€’ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584547635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1325267,"avatar":"https://static001.geekbang.org/account/avatar/00/14/38/d3/07585dc8.jpg","nickname":"BADTZ-MARU ğŸª","note":"","ucode":"358FAA1C9F5721","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1800886,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7a/b6/f54bbfaa.jpg","nickname":"èŠ±éƒä¸–çºª","note":"","ucode":"301DF9B6375E08","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":209282,"discussion_content":"å¦‚æœpostedEventTypeæ˜¯åªæœ‰è®¢é˜…å…¶æœ¬èº«å’Œå­ç±»çš„observerå¯ä»¥æ¶ˆè´¹çš„è¯ï¼Œé‚£äº‰å“¥å‰é¢çš„æè¿°å°±æœ‰é—®é¢˜äº†ï¼ŒXMsgåº”è¯¥æ˜¯Aã€BObserveréƒ½å¯ä»¥æ¶ˆè´¹ï¼ŒYMsgåªæœ‰Bå¯ä»¥æ¶ˆè´¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584625514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":208556,"ip_address":""},"score":209282,"extra":""},{"author":{"id":1800886,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7a/b6/f54bbfaa.jpg","nickname":"èŠ±éƒä¸–çºª","note":"","ucode":"301DF9B6375E08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1325267,"avatar":"https://static001.geekbang.org/account/avatar/00/14/38/d3/07585dc8.jpg","nickname":"BADTZ-MARU ğŸª","note":"","ucode":"358FAA1C9F5721","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":209557,"discussion_content":"æ„Ÿè°¢è€å“¥æŒ‡æ­£ï¼Œæ˜¯å†™åäº†Â·Â·Â·\nçˆ¶ç±».class.isAssignableFrom(å­ç±».class)ï¼ŒåŸæ¥æ˜¯è¿™ä¹ˆç”¨çš„","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1584635567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":209282,"ip_address":""},"score":209557,"extra":""}]}]},{"had_liked":false,"id":187429,"user_name":"è¾£ä¹ˆå¤§","can_delete":false,"product_type":"c1","uid":1396951,"ip_address":"","ucode":"AB308B6DCA0108","user_header":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","comment_is_top":false,"comment_ctime":1584108680,"is_pvip":true,"discussion_count":4,"race_medal":0,"score":"48828748936","product_id":100039001,"comment_content":"é‡æ„ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Œå°†éä¸šåŠ¡ä»£ç æ”¾åˆ°ä»£ç†ç±»ä¸­ã€‚<br>å¦å¤–è¯•äº†äº‰å“¥è®²çš„EventButç±»ï¼Œåœ¨å®šä¹‰è§‚å¯Ÿè€…çš„å…¥å‚è¦ä¿®æ”¹æˆ*Long*ç±»å‹ï¼Œå¦‚æœä½¿ç”¨longï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æ— æ³•æ³¨å†Œçš„ï¼Œä»£ç æ‰§è¡Œæ”¶ä¸åˆ°é€šçŸ¥ã€‚åº”è¯¥æ˜¯ObserverRegistryç±»éœ€è¦å®Œå–„ä¸€ä¸‹ã€‚<br>  @Subscribe<br>  public void handleRegSuccess(Long userId) {<br>    System.out.println(&quot;handleRegSuccess...&quot;);<br>    promotionService.issueNewUserExperienceCash(userId);<br>  }<br>ä»£ç è§ï¼šhttps:&#47;&#47;github.com&#47;gdhucoder&#47;Algorithms4&#47;tree&#47;master&#47;designpattern&#47;u57","like_count":11,"discussions":[{"author":{"id":1587803,"avatar":"https://static001.geekbang.org/account/avatar/00/18/3a/5b/ce1724ca.jpg","nickname":"undefined","note":"","ucode":"867405CA5A9FB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210799,"discussion_content":"+1ï¼Œæ”¹æˆå°è£…ç±»å‹æ‰èƒ½è¿›è¡Œç±»å‹åŒ¹é…","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584776215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1096575,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bb/7f/f7ff488e.jpg","nickname":"just_one","note":"","ucode":"0F230DDCA57BAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309841,"discussion_content":"ç°åœ¨æ‰çœ‹è¯„è®ºå‘ç°é‡åˆ°äº†åŒæ ·çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601459699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1540988,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZ16iaIia0029oI1Qh5NicibpbTiaBAaCOPYXoLplKHr6uQ2rSVxPZanBvpMcL2NuhwKQYCFnaHP5tedQ/132","nickname":"FIGNT","note":"","ucode":"D9DB185AE9E67C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215908,"discussion_content":"çœ‹ä½ çš„ä»£ç åªæ˜¯å°†è¿™ä¸ªä½ç½®æ”¹äº†ä¸‹ï¼ˆå…¶ä»–çš„ç±»æ²¡çœ‹ï¼Œæˆ‘æƒ³å°±çœ‹è¿™ç±»å°±å¯ä»¥äº†ã€‚ï¼‰ï¼Œè¿™ä¸ªå…¶å®æ˜¯ä¸€æ ·çš„ç»“æœéƒ½æ˜¯falseã€‚\n if (eventType.isAssignableFrom(postedEventType)) {\n        matchedObservers.addAll(eventActions);\n}\næ²¡æ‰¾åˆ°å¥½æ–¹æ³•ï¼Œæˆ‘ç”¨äº†æœ€ç¬¨çš„æ–¹æ³•ï¼Œæ³¨å†Œçš„æ—¶å€™å°†åŸºæœ¬ç±»å‹çš„Classè½¬ä¸ºåŒ…è£…ç±»å‹çš„Classã€‚ä¸€ä¸ªä¸ªåˆ¤æ–­ä¸€ä¸ªä¸ªè½¬æ¢ã€‚æ„Ÿè§‰å¥½å‚»ï¼Œä½†æ˜¯æ²¡æ‰¾åˆ«çš„æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585396880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1540988,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZ16iaIia0029oI1Qh5NicibpbTiaBAaCOPYXoLplKHr6uQ2rSVxPZanBvpMcL2NuhwKQYCFnaHP5tedQ/132","nickname":"FIGNT","note":"","ucode":"D9DB185AE9E67C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327441,"discussion_content":"isAssignableFromæ–¹æ³•æœ‰å…³äºåŸºæœ¬ç±»å‹çš„æè¿°ï¼šIf this {@code Class}\nobject represents a primitive type, this method returns\n{@code true} if the specified {@code Class} parameter is\nexactly this {@code Class} object; otherwise it returns\n{@code false}.\né—®é¢˜çš„æœ¬è´¨æ˜¯åº”è¯¥æ˜¯ åŸºæœ¬ç±»å‹çš„Classå¯¹è±¡.isAssignableFrom(åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»çš„Classå¯¹è±¡)è¿”å›falseã€‚ä½†æ˜¯Object a=2;Object b=new Integer(2);a.getClass().isAssignableFrom(b.getClass())è¿”å›trueï¼Œåº”è¯¥æ˜¯ä¼šè‡ªåŠ¨è£…ç®±å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605838693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":215908,"ip_address":""},"score":327441,"extra":""}]}]},{"had_liked":false,"id":187460,"user_name":"å°æ™å­","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1584114563,"is_pvip":false,"discussion_count":1,"race_medal":1,"score":"40238820227","product_id":100039001,"comment_content":"æˆ‘çš„æƒ³æ³•æ¯”è¾ƒç›´æ¥ï¼Œå°†UserControllerä¸­çš„ä¸šåŠ¡ä»£ç æå‡ºæ¥æ”¾åœ¨æ¥å£çš„å®ç°ç±»ä¸­ï¼Œè¿™ä¸ªUserControllerå¯ä»¥æ”¹åä¸ºEventControllerï¼Œç„¶åè¿™ä¸ªæ¥å£å®ç°ç±»æ³¨å…¥åˆ°è¿™ä¸ªEventControllerä¸­ï¼Œè¿™æ ·ä¸šåŠ¡é€»è¾‘å’Œæ§åˆ¶é€»è¾‘å°±åˆ†ç¦»äº†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š<br>interface iController {<br>    object register()<br>}<br><br>public class UserControllerService implement iController {<br>    private string telphone;<br>    private string password;<br><br>    public Long register() {<br>        long userId = userService.register(telephone, password);<br>        return userId;<br>  }<br>}<br><br>public class EventController {<br>    private iController iService;<br><br>    private EventBus eventBus;<br>    private static final int DEFAULT_EVENTBUS_THREAD_POOL_SIZE = 20; <br><br>    public EventController() {<br>        eventBus = new AsyncEventBus(Executors.newFixedThreadPool(DEFAULT_EVENTBUS_THREAD_POOL_SIZE)); &#47;&#47; å¼‚æ­¥éé˜»å¡æ¨¡å¼ <br>    }<br><br>    public void setRegObservers(List&lt;Object&gt; observers) {<br>        for (Object observer : observers) {<br>            eventBus.register(observer);<br>        }<br>    }<br><br>    public void SendMessage() {<br>        object msg = iService.register()<br>        eventBus.post(msg)<br>    }<br><br>}","like_count":9,"discussions":[{"author":{"id":1116567,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/97/4314e2d8.jpg","nickname":"åŒæœ¨å…¬å­","note":"","ucode":"751885864D3AB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579444,"discussion_content":"ç®€æ´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657458200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187749,"user_name":"blacknhole","can_delete":false,"product_type":"c1","uid":1098286,"ip_address":"","ucode":"271682FFE28F25","user_header":"https://static001.geekbang.org/account/avatar/00/10/c2/2e/c4a527d9.jpg","comment_is_top":false,"comment_ctime":1584209680,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"31648980752","product_id":100039001,"comment_content":"æä¸ªé—®é¢˜ï¼š<br><br>æ–‡ä¸­â€œæ‰€è°“å¯åŒ¹é…æŒ‡çš„æ˜¯ï¼Œèƒ½æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹æ˜¯å‘é€æ¶ˆæ¯ï¼ˆpost å‡½æ•°å®šä¹‰ä¸­çš„ eventï¼‰ç±»å‹çš„å­ç±»â€è¿™è¯ä¼¼ä¹æœ‰é—®é¢˜ï¼Œåº”è¯¥æ˜¯çˆ¶ç±»å§ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339832,"discussion_content":"æ˜¯é”™äº†ï¼Œæ€»ç»“+ä»£ç &amp;ä¾‹å­ç›¸åï¼Œè¯•äº†ä¸€ä¸‹ï¼Œæ˜¯è¯´åäº†ã€‚æ­£ç¡®çš„ä¹Ÿç¬¦åˆå¤šæ€çš„æ€æƒ³ï¼Œçˆ¶ç±»å¯ä»¥æ¥æ”¶å­ç±»ï¼Œä¹Ÿå°±æ˜¯æˆ‘æ¥æ”¶objectï¼Œæˆ‘å°±èƒ½æ”¶å…¨éƒ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609817356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1483671,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a3/97/ca8057a4.jpg","nickname":"Mona432","note":"","ucode":"3F02C646C8DC83","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326526,"discussion_content":"äº‰å“¥è¯´çš„æ²¡é”™ï¼Œå°±æ˜¯å­ç±»ï¼Œè¿™å°±æ˜¯å¤šæ€ï¼Œä½ ä¼ ä¸ªå½¢å‚çš„çˆ¶ç±»ç¼–è¯‘éƒ½ä¸é€šè¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605612926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187258,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1584070069,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"31648841141","product_id":100039001,"comment_content":"å¯¹äºè¿™ä¸ªé—®é¢˜,åœ¨UserCntrollerä¸­,æˆ‘ä»¬åº”è¯¥åªä¿ç•™postå‡½æ•°() å‘é€çš„ç›¸å…³é€»è¾‘,è€Œå°†æ³¨å†ŒObserver,åˆå§‹åŒ–EventBusç›¸å…³é€»è¾‘å‰”é™¤,å¦‚æœéè¦ä½¿ç”¨EventBusæ¥å®ç°çš„è¯,æˆ‘ä»¬éœ€è¦æœ‰äººå¸®æˆ‘ä»¬å»è¿›è¡Œæ³¨å†Œå’Œåˆå§‹åŒ–,è¿™æ—¶å€™å°±å¯ä»¥ç«‹é©¬æƒ³åˆ°ä¹‹å‰è®²çš„å·¥å‚æ¨¡å¼çš„DIæ¡†æ¶,æˆ‘ä»¬å¯ä»¥è®©æ‰€æœ‰è§‚å¯Ÿè€…éƒ½è¢«DIæ¡†æ¶æ‰€ç®¡ç†,å¹¶ä¸”å¯¹EventBusåˆ›å»ºä¸€ä¸ªè£…é¥°å™¨ç±»,åœ¨è¿™ä¸ªè£…é¥°å™¨ç±»ä¸­,ç”±å¼€å‘è€…é€‰æ‹©æ³¨å…¥çº¿ç¨‹æ± å®ç°å¼‚æ­¥å‘é€è¿˜æ˜¯ç›´æ¥ä½¿ç”¨åŒæ­¥å‘é€çš„,å¹¶ä¸”åœ¨initå‡½æ•°ä¸­ ä»DIæ¡†æ¶ç®¡ç†çš„å¯¹è±¡æ± ä¸­æ‹¿å‡ºæ‰€æœ‰æ ‡æœ‰@Subscribeæ³¨è§£çš„ç±»,ä¿å­˜åˆ°ObserverRegistryä¸­,å¯¹äºæ‰€æœ‰éœ€è¦ä½¿ç”¨EventBusçš„ç±»,æ³¨å…¥è¿™ä¸ªè£…é¥°å™¨ç±»å³å¯,è®¾è®¡çš„å¥½,ç”šè‡³å¯ä»¥åšåˆ°å…¶ä»–ä¾èµ–ä»£ç éƒ½ä¸ç”¨æ”¹ä¸€ç‚¹","like_count":7,"discussions":[{"author":{"id":1738326,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg","nickname":"å®ˆæ‹™","note":"","ucode":"F594B2DA3F6D4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282365,"discussion_content":"è®²çš„ä¸é”™. æä¸ªå°å°å»ºè®®, \næˆ‘ä»¬å¯ä»¥è®©æ‰€æœ‰è§‚å¯Ÿè€…éƒ½è¢«DIæ¡†æ¶æ‰€ç®¡ç†,å¹¶ä¸”å¯¹EventBusåˆ›å»ºä¸€ä¸ªè£…é¥°å™¨ç±»\n\nå¯ä»¥ä½¿ç”¨ä»£ç†æ¨¡å¼ä»£æ›¿è£…é¥°å™¨æ¨¡å¼. \n\nä¹‹å‰è®²è¿‡, ä»£ç†æ¨¡å¼æ›´é€‚ç”¨äºä¸šåŠ¡æ— å…³çš„åŠŸèƒ½å¢å¼º, è£…é¥°å™¨æ¨¡å¼é€‚ç”¨äºä¸šåŠ¡ç›¸å…³çš„åŠŸèƒ½å¢å¼º. \n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591953724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212557,"user_name":"ä¾ç„¶äº¦æ™¨","can_delete":false,"product_type":"c1","uid":1244726,"ip_address":"","ucode":"41F288A69AA4B6","user_header":"https://static001.geekbang.org/account/avatar/00/12/fe/36/df26de4a.jpg","comment_is_top":false,"comment_ctime":1588148632,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"23062985112","product_id":100039001,"comment_content":"debugçš„æ—¶å€™å‘ç°ä¸€ä¸ªå°é—®é¢˜ï¼ŒObserverRegistryç±»çš„getMatchedObserverActions()æ–¹æ³•ä¸­è°ƒç”¨äº†isAssignableFrom()æ–¹æ³•ï¼Œç”±äºpostedEventTypeæ˜¯java.lang.Longï¼Œè€ŒeventTypeæ˜¯longï¼Œå¯¼è‡´postedEventType.isAssignableFrom(eventType)å§‹ç»ˆä¸ºfalseï¼Œå› è€Œæ— æ³•è·å–åˆ°åŒ¹é…çš„è§‚å¯Ÿè€…ã€‚ä»ç½‘ä¸ŠæŸ¥é˜…ç›¸å…³èµ„æ–™çš„å¾—çŸ¥ï¼ŒJavaåå°„è·å–æ–¹æ³•ä¸æ”¯æŒè‡ªåŠ¨è£…ç®±æˆ–æ‹†ç®±ï¼›","like_count":5},{"had_liked":false,"id":189571,"user_name":"Mogeko","can_delete":false,"product_type":"c1","uid":1888781,"ip_address":"","ucode":"81B5AD129ECA9A","user_header":"https://static001.geekbang.org/account/avatar/00/1c/d2/0d/f10048ce.jpg","comment_is_top":false,"comment_ctime":1584529810,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18764398994","product_id":100039001,"comment_content":"ObserverRegistryç±»çš„getMatchedObserverActionsæ–¹æ³•ï¼ŒpostedEventType.isAssignableFrom(eventType)æ˜¯ä¸æ˜¯åäº†ï¼Ÿ<br>ä¸æ˜¯åº”è¯¥eventType.isAssignableFrom(postedEventType)å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1813289,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJBxpZYyIV7ggBjNvqtC36gYhrIVEkvDP1bFfDGqEsqLiaicRz9wGrMuFYHqeMYKTN59BHLJuaibfNFQ/132","nickname":"muf","note":"","ucode":"970CA6DA8961FE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291416,"discussion_content":"æˆ‘æ•²äº†ä¸€éï¼Œä¹Ÿè§‰å¾—åº”è¯¥åè¿‡æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594812279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188638,"user_name":"å³è€³å¬æµ·","can_delete":false,"product_type":"c1","uid":1022011,"ip_address":"","ucode":"E0B9F1083F4F98","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/3b/5af90c80.jpg","comment_is_top":false,"comment_ctime":1584381308,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18764250492","product_id":100039001,"comment_content":"ç»™è€å¸ˆç‚¹èµï¼Œè™½ç„¶å¾ˆæ—©å°±æ¥è§¦äº†eventbusï¼Œä½†ä¸€ç›´æ²¡æ˜ç™½è¿™ä¸ªçš„è®¾è®¡æ€æƒ³ï¼Œç°åœ¨æœ‰ç§é†é†çŒé¡¶çš„æ„Ÿè§‰","like_count":4},{"had_liked":false,"id":187222,"user_name":"gogo","can_delete":false,"product_type":"c1","uid":1003104,"ip_address":"","ucode":"E8F0F3B000020A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","comment_is_top":false,"comment_ctime":1584063909,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18763933093","product_id":100039001,"comment_content":"çœ‹äº†ä¸‹google EventBusæºç ï¼Œæ˜¯æ ‡æ³¨äº†@Betaçš„ï¼Œèƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒå—ï¼Ÿ","like_count":4},{"had_liked":false,"id":206577,"user_name":"ttxser","can_delete":false,"product_type":"c1","uid":1022694,"ip_address":"","ucode":"47C3FCB59F8027","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9a/e6/e8439f9a.jpg","comment_is_top":false,"comment_ctime":1586888832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14471790720","product_id":100039001,"comment_content":"å¼‚æ­¥+æ³¨è§£çš„ï¼ŒåæœŸæ¯”è¾ƒéš¾ç»´æŠ¤å§ï¼Œè¿è¡Œæ—¶ç”Ÿæ•ˆï¼Œæ²¡æœ‰åŠæ³•çœ‹åˆ°å…¨å±€çš„æ³¨å†Œä¿¡æ¯","like_count":3},{"had_liked":false,"id":187717,"user_name":"ä½è¥¿ç›","can_delete":false,"product_type":"c1","uid":1090743,"ip_address":"","ucode":"73AAED82340E2B","user_header":"https://static001.geekbang.org/account/avatar/00/10/a4/b7/e0d88365.jpg","comment_is_top":false,"comment_ctime":1584198543,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14469100431","product_id":100039001,"comment_content":"äº‰å“¥ï¼Œåœ¨EventBus æ¡†æ¶åŠŸèƒ½éœ€æ±‚ä»‹ç»é‡Œé¢ï¼Œå¦‚æœXMsg æ˜¯ YMsg çš„çˆ¶ç±»ï¼Œåˆ™post(xMsg); =&gt; AObserverã€BObserveræ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œè¿™ä¸ªåœ°æ–¹åº”è¯¥æ˜¯å¦‚æœXMsg æ˜¯ YMsg çš„å­ç±»ã€‚","like_count":3,"discussions":[{"author":{"id":2601446,"avatar":"https://static001.geekbang.org/account/avatar/00/27/b1/e6/6560d20a.jpg","nickname":"Geek_20210430","note":"","ucode":"32728E28984463","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371647,"discussion_content":"åº”è¯¥æ˜¯ä½ å¼„åäº†è¿™é‡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619882735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327448,"discussion_content":"æˆ‘çœ‹åˆ°çš„æ˜¯ï¼š\nXMsg æ˜¯ YMsg çš„çˆ¶ç±»\npost(xMsg); => AObserveræ¥æ”¶åˆ°æ¶ˆæ¯\npost(yMsg); => AObserverã€BObserveræ¥æ”¶åˆ°æ¶ˆæ¯\næ˜¯å·²ç»æ”¹äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605839634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187518,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1584151465,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14469053353","product_id":100039001,"comment_content":"public void handleRegSuccess(long userId) æ–¹æ³•ç­¾åä¸­çš„longç±»å‹åº”è¯¥æ”¹æˆLongç±»å‹ï¼Œä¸ç„¶SubscriberRegistry.getSubscribers(Object event)ä¼šåŒ¹é…ä¸ä¸Šç±»å‹","like_count":3},{"had_liked":false,"id":187295,"user_name":"é¥­","can_delete":false,"product_type":"c1","uid":1610573,"ip_address":"","ucode":"B3F1702D4DE604","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132","comment_is_top":false,"comment_ctime":1584077051,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"14468978939","product_id":100039001,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬ä¸»è¦åšç‰©æµæ–¹é¢çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œç±»ä¼¼ä»“å‚¨ï¼Œæ¸¯å£è¿™æ ·çš„ï¼Œæµç¨‹ç¹æ‚ã€‚å¹³æ—¶ä¸»è¦å°±æ˜¯å†™å¢åˆ æ”¹æŸ¥ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªçŠ¶æ€å­—æ®µå˜åŒ–æ§åˆ¶æµç¨‹ï¼Œæ‰€æœ‰ä¸šåŠ¡ä»£ç æµç¨‹ä¸­æ¯ä¸€æ­¥æ“ä½œéƒ½å†™æ»¡äº†å„ç§çŠ¶æ€éªŒè¯ï¼Œåˆ¤æ–­ã€‚åæœŸç¨å¾®éœ€æ±‚å˜åŠ¨ä¸€ç‚¹ç‚¹ï¼Œæ¶‰åŠåˆ°çŠ¶æ€æ”¹åŠ¨ï¼Œè¦è°ƒæ•´æµç¨‹çš„è¯ï¼Œéƒ½æ˜¯ä¸€åœºç¾éš¾ã€‚é’ˆå¯¹æˆ‘ä»¬è¿™ç§ç³»ç»Ÿï¼Œæœ‰åŠæ³•å°†æµç¨‹çŠ¶æ€è§£è€¦å‡ºæ¥å—ï¼Ÿä»Šå¤©çœ‹åˆ°è¿™ç¯‡äº‹ä»¶æ€»çº¿çš„æ–‡ç« ï¼Œå¥½åƒçœ‹åˆ°å¸Œæœ›ï¼Œä½†æ˜¯æ²¡æƒ³æ¸…å…·ä½“æ€ä¹ˆæ“ä½œã€‚ä¸çŸ¥é“è€å¸ˆæ€ä¹ˆçœ‹","like_count":3,"discussions":[{"author":{"id":1074818,"avatar":"https://static001.geekbang.org/account/avatar/00/10/66/82/c2acd57e.jpg","nickname":"è”¡å‘†å‘†","note":"","ucode":"51EDDEFB274CB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204509,"discussion_content":"è¿™ç§æ›´é€‚åˆç”¨çŠ¶æ€æœºå§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584185002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1610573,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132","nickname":"é¥­","note":"","ucode":"B3F1702D4DE604","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1074818,"avatar":"https://static001.geekbang.org/account/avatar/00/10/66/82/c2acd57e.jpg","nickname":"è”¡å‘†å‘†","note":"","ucode":"51EDDEFB274CB3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205113,"discussion_content":"æœ‰æ¨èçš„å¼€æºç»„ä»¶å—ï¼Ÿæ²¡ç”¨è¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584267932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":204509,"ip_address":""},"score":205113,"extra":""},{"author":{"id":1242602,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/ea/5f046856.jpg","nickname":"Dale","note":"","ucode":"AD19A33FE5EEDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1074818,"avatar":"https://static001.geekbang.org/account/avatar/00/10/66/82/c2acd57e.jpg","nickname":"è”¡å‘†å‘†","note":"","ucode":"51EDDEFB274CB3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411667,"discussion_content":"ä¹Ÿæƒ³åˆ°äº†ç”¨çŠ¶æ€æœºæ¥å¤„ç†ï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆè½åœ°å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635959320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":204509,"ip_address":""},"score":411667,"extra":""}]},{"author":{"id":2297351,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Urru5Bvib5z8SjmiacqY8SyjUXpIVNu27fH7H8vvxibbiaHOtUulNW8kQNuTibOFGG8jiay99EcD339jBqf1Mm2fqNwQ/132","nickname":"Geek_97d956","note":"","ucode":"D4FAC98907E1D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380320,"discussion_content":"æ€€ç–‘æ˜¯ä¸æ˜¯æµ·é¼å…¬å¸\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624436859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1088710,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/c6/05a6798f.jpg","nickname":"è‹—","note":"","ucode":"5ECCC6C855E541","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216313,"discussion_content":"è¿™ç§é€‚åˆå»ºç«‹é¢†åŸŸæ¨¡å‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585416233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187241,"user_name":"å®ˆæ‹™","can_delete":false,"product_type":"c1","uid":1738326,"ip_address":"","ucode":"F594B2DA3F6D4F","user_header":"https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg","comment_is_top":false,"comment_ctime":1584068079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14468969967","product_id":100039001,"comment_content":"è¯¾å ‚è®¨è®º: <br><br>åœ¨ä»Šå¤©å†…å®¹çš„ç¬¬äºŒä¸ªæ¨¡å—â€œEventBus æ¡†æ¶åŠŸèƒ½éœ€æ±‚ä»‹ç»â€ä¸­ï¼Œæˆ‘ä»¬ç”¨ Guava EventBus é‡æ–°å®ç°äº† UserControllerï¼Œå®é™…ä¸Šï¼Œä»£ç è¿˜æ˜¯ä¸å¤Ÿè§£è€¦ã€‚UserController è¿˜æ˜¯è€¦åˆäº†å¾ˆå¤šè·Ÿè§‚å¯Ÿè€…æ¨¡å¼ç›¸å…³çš„éä¸šåŠ¡ä»£ç ï¼Œæ¯”å¦‚åˆ›å»ºçº¿ç¨‹æ± ã€æ³¨å†Œ Observerã€‚ä¸ºäº†è®© UserController æ›´åŠ èšç„¦åœ¨ä¸šåŠ¡åŠŸèƒ½ä¸Šï¼Œä½ æœ‰ä»€ä¹ˆé‡æ„çš„å»ºè®®å—ï¼Ÿ<br><br><br><br>ä½¿ç”¨EventBuså, setRegObservers()æ–¹æ³•æ— éœ€åœ¨UserControllerä¸­è°ƒç”¨äº†, æ¯ä¸ªObserverçš„æ„é€ å™¨ä¸­EventBus.register(this)å°±å¯ä»¥äº†. EventBusçš„æ„ä¹‰å°±åœ¨äºå°†Observableä¸Observerå½»åº•è§£è€¦.<br><br><br><br>EventBusä½œä¸ºç³»ç»Ÿä¸­å”¯ä¸€çš„ç»„ä»¶, å¯ä»¥è®¾è®¡æˆå•ä¾‹æ¨¡å¼. Observableå¯ä»¥ç›´æ¥é€šè¿‡EventBus.getDefault().post(XXEvent())çš„æ–¹å¼ä½¿ç”¨, Observableæ— éœ€ä¾èµ–æ³¨å…¥.<br><br><br><br>çº¿ç¨‹æ± çš„åˆ›å»ºå¯ä»¥ä½¿ç”¨Builderæ¨¡å¼ä¸ºEventBusé…ç½®. åœ¨Applicationè¿›ç¨‹åˆå§‹åŒ–æ—¶, å³é…ç½®EventBusçš„çº¿ç¨‹æ± . å¦‚æ­¤Observableå°±å¯ä»¥æ— éœ€è€ƒè™‘çº¿ç¨‹æ± çš„é…ç½®.<br><br><br>EventBuså¯ä»¥æä¾›unregister()ä»¥ä¾¿observerç”Ÿå‘½å‘¨æœŸç®¡ç†.","like_count":3},{"had_liked":false,"id":256546,"user_name":"seker","can_delete":false,"product_type":"c1","uid":1122034,"ip_address":"","ucode":"9B705F91355873","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/f2/453d5f88.jpg","comment_is_top":false,"comment_ctime":1603675762,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10193610354","product_id":100039001,"comment_content":"class1.isAssignableFrom(class2)<br>ä»class1çš„è§’åº¦çœ‹ï¼Œæ˜¯åˆ¤æ–­class1æ˜¯å¦ä¸ºclass2çš„çˆ¶ç±»ã€‚ä»class2çš„è§’åº¦çœ‹ï¼Œæ˜¯åˆ¤æ–­class2æ˜¯å¦ä¸ºclass1çš„å­ç±»ã€‚<br>  <br>æ‰€è°“å¯åŒ¹é…æŒ‡çš„æ˜¯ï¼Œèƒ½æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹æ˜¯å‘é€æ¶ˆæ¯ï¼ˆpost å‡½æ•°å®šä¹‰ä¸­çš„ eventï¼‰ç±»å‹çš„çˆ¶ç±»ã€‚<br>  <br>public List&lt;ObserverAction&gt; getMatchedObserverActions(Object event)<br>å…¥å‚eventæ˜¯methodæ–¹æ³•çš„å‚æ•°ï¼Œé€šè¿‡Class&lt;?&gt; postedEventType = event.getClass()å¯ä»¥æ‹¿åˆ°å…¥å‚çš„ç±»å‹ï¼Œè€Œè¿™ä¸ªç±»å‹å°±æ˜¯å‘é€æ¶ˆæ¯çš„ç±»å‹ã€‚<br>èƒ½æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹é€šè¿‡Class&lt;?&gt; eventType = entry.getKey()æ‹¿åˆ°ã€‚<br>  <br>ç»¼ä¸Šæ‰€è¿°ï¼Œæ˜¯è¦åˆ¤æ–­postedEventTypeæ˜¯å¦ä¸ºeventTypeçš„å­ç±»ï¼Œæˆ–è€…è¯´æ˜¯è¦åˆ¤æ–­eventTypeæ˜¯å¦ä¸ºpostedEventTypeçš„çˆ¶ç±»ã€‚<br>æ•…ä»£ç åº”è¯¥å†™æˆeventType.isAssignableFrom(postedEventType)","like_count":2},{"had_liked":false,"id":226411,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1510495,"ip_address":"","ucode":"C6FC61A90F202B","user_header":"https://static001.geekbang.org/account/avatar/00/17/0c/5f/4cbcbfb9.jpg","comment_is_top":false,"comment_ctime":1592073044,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10182007636","product_id":100039001,"comment_content":"çœ‹ä¸æ‡‚javaçš„æˆ‘ï¼Œç”¨c++æ¨¡ä»¿æ–‡ä¸­çš„å†…å®¹å®ç°äº†ä¸€ä¸ªc++ç‰ˆæœ¬çš„EventBusï¼š<br>https:&#47;&#47;github.com&#47;chenhongjun&#47;event?files=1&amp;from=timeline<br>æ”¯æŒå¤šç±»å‹msgï¼Œæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ï¼Œä½¿ç”¨çº¿ç¨‹æ± ","like_count":2},{"had_liked":false,"id":205626,"user_name":"å°æ–‡åŒå­¦","can_delete":false,"product_type":"c1","uid":1001893,"ip_address":"","ucode":"48F2AEB989C12A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","comment_is_top":false,"comment_ctime":1586690171,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10176624763","product_id":100039001,"comment_content":"æ„Ÿè°¢å¤§å®¶ç‚¹èµï¼Œæ”¶åˆ°äº†37ä¸ªèµï¼Œä»Šå¤©é‡æ–°è¯»äº†ä¸€ä¸‹ EventBus çš„æºç ï¼Œå‘ç°è¿™ä¸ªç•™è¨€å­˜åœ¨é—®é¢˜ã€‚&quot;é‡åˆ°äº‹ä»¶æ­»å¾ªç¯çš„æ—¶å€™è¿˜ä¼šæŠ¥é”™ã€‚&quot; Event Bus æ˜¯å…è®¸å¾ªç¯æäº¤äº‹ä»¶çš„ï¼Œå‡å¦‚é‡‡ç”¨æ·±åº¦ä¼˜å…ˆï¼Œåˆ™ä¼šå¯¼è‡´çº¿ç¨‹æ ˆæº¢å‡ºæŠ¥é”™ï¼Œå‡å¦‚ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆï¼Œåˆ™ä¼šå¯¼è‡´æ­»å¾ªç¯ã€‚<br><br>å‰é¢è¯¯è§£äº†ï¼Œé€’å½’æŠ¥é”™æ˜¯æºè‡ªäº LoadingCache åœ¨æ‰§è¡ŒåŠ è½½ç¼“å­˜Açš„æ—¶å€™ï¼Œæ–¹æ³•æ ˆä¸€ç›´åˆé‡å¤é€’å½’åŠ è½½Aï¼Œåˆ™ä¼šå¯¼è‡´æŠ¥é”™ï¼š<br>java.lang.IllegalStateException: Recursive load of: 1000020000000066<br> at com.google.common.base.Preconditions.checkState(Preconditions.java:197)<br>at com.google.common.cache.LocalCache$Segment.waitForLoadingValue(LocalCache.java:2299)<br><br>å› ä¸ºæˆ‘ä½¿ç”¨çš„EventBus å»é©±åŠ¨ LoadingCache åŠ è½½ç¼“å­˜çš„ï¼Œæ‰€ä»¥è¯¯ä»¥ä¸ºæ˜¯ EventBus æŠ¥çš„é”™ã€‚<br><br>å¦å¤–æˆ‘è‡ªå·±é’ˆå¯¹ EventBus åšäº†ä¸€æ¬¡æ¯”è¾ƒå…·ä½“çš„æºç åˆ†æï¼Œå¹¶ä¸”ä½¿ç”¨äº†ç‹äº‰è€å¸ˆè®¾è®¡æ¨¡å¼ä¸“æ ä¸­P15-22è®²çš„è®¾è®¡æ¨¡å¼æ€æƒ³å¯¹ EventBus ä»£ç è¿›è¡Œäº†åˆ†æï¼Œè¿™é‡Œåˆ†äº«ç»™å¤§å®¶ï¼ŒåŒæ—¶ä¸ºæˆ‘æ²¡ç»è€ƒæ®çš„ç•™è¨€è¡¨ç¤ºæ­‰æ„ï¼š<br>https:&#47;&#47;juejin.im&#47;post&#47;5e925c75f265da47b844fd83","like_count":2},{"had_liked":false,"id":188269,"user_name":"Geek_76616d","can_delete":false,"product_type":"c1","uid":1744992,"ip_address":"","ucode":"809765A24C4E70","user_header":"","comment_is_top":false,"comment_ctime":1584333471,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10174268063","product_id":100039001,"comment_content":"å¯¹Guava EventBusç›¸è§æ¨æ™šå•Š","like_count":2,"discussions":[{"author":{"id":1297112,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ca/d8/b109ed85.jpg","nickname":"Jack","note":"","ucode":"F3863DAEF449D5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388750,"discussion_content":"ç„¶è€Œgoogleå·²ç»ä¸å»ºè®®ç”¨eventbusäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628934879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292545,"discussion_content":"Actor ç¼–ç¨‹æ¨¡å‹ä¹Ÿå¾ˆç‚«é…·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595253475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187389,"user_name":"hanazawakana","can_delete":false,"product_type":"c1","uid":1251721,"ip_address":"","ucode":"E0F6FACBFE7D15","user_header":"https://static001.geekbang.org/account/avatar/00/13/19/89/20488013.jpg","comment_is_top":false,"comment_ctime":1584097614,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10174032206","product_id":100039001,"comment_content":"å•ç‹¬ç”¨ä¸€ä¸ªå·¥å…·ç±»æ¥å¤„ç†eventbusç›¸å…³çš„æ³¨å†Œå’Œpostæ“ä½œã€‚ç„¶åé€šè¿‡ä¾èµ–æ³¨å…¥ä¼ ç»™usercontroller","like_count":2},{"had_liked":false,"id":187185,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1584054593,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"10173989185","product_id":100039001,"comment_content":"åœ¨ä¾‹å­ä¸­å½“eventbusè°ƒç”¨postä¼ é€’çš„å‚æ•°ä¸­æ˜¯long userId,è€Œä¸¤ä¸ªobserverè¢«subcriberæ³¨è§£çš„æ–¹æ³•å‚æ•°éƒ½ä¸€æ ·ï¼Œæ­¤æ—¶è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨åˆ°å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1438860,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f4/8c/0866b228.jpg","nickname":"å­æˆ¿","note":"","ucode":"CB05938C248BB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343440,"discussion_content":"ä½¿å¾—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611045995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1880582,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/b2/06/2086d76d.jpg","nickname":"buggetout","note":"","ucode":"63A948EF415FDD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273763,"discussion_content":"@Subscribeæ³¨è§£å’Œ@KafkaListeneræ³¨è§£ç±»ä¼¼çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590499152,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1880582,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/b2/06/2086d76d.jpg","nickname":"buggetout","note":"","ucode":"63A948EF415FDD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273762,"discussion_content":"å®è·µäº†ä¸€ä¸‹æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590499100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1330509,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4d/4d/58c2ffa1.jpg","nickname":"smartjia","note":"","ucode":"704BCDE56251D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215629,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585363305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345064,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1651997520,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"5946964816","product_id":100039001,"comment_content":"è¿™æ˜¯ä¸€èŠ‚ java è¯¾ã€‚","like_count":1},{"had_liked":false,"id":277382,"user_name":"zh","can_delete":false,"product_type":"c1","uid":1982711,"ip_address":"","ucode":"98772B1B6C6E06","user_header":"https://static001.geekbang.org/account/avatar/00/1e/40/f7/e62bbc62.jpg","comment_is_top":false,"comment_ctime":1612402466,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5907369762","product_id":100039001,"comment_content":"ä½œä¸ºcppé€‰æ‰‹ï¼Œè¿™èŠ‚æœ‰ç‚¹ä¸å¤ªå‹å¥½äº†ï¼Œåå°„è¯­æ³•ã€æ³¨è§£éƒ½ä¸å¤ªæ‡‚...å‰é¢çš„è®²å¾—å¾ˆå¥½ï¼Œç‰¹åˆ«æ˜¯è®¾è®¡åŸåˆ™ä¸æ€æƒ³éƒ¨åˆ†ï¼Œä½†åé¢æ¶‰åŠçš„ä¸€äº›æŠ€æœ¯ç‚¹ç”¨C++ç¿»è¯‘è¿˜æ˜¯æ¯”è¾ƒåƒåŠ›å•Šï¼Œæ¯”å¦‚IOCã€åå°„ã€åŠ¨æ€ä»£ç†...","like_count":1,"discussions":[{"author":{"id":1132569,"avatar":"https://static001.geekbang.org/account/avatar/00/11/48/19/14dd81d9.jpg","nickname":"é“²é“²é˜Ÿ","note":"","ucode":"D16372C34B7AE3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549792,"discussion_content":"åŒæ„Ÿå—ï¼ŒC++é€‰æ‰‹çœ‹èµ·æ¥è¿·ç³Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644242513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221412,"user_name":"worthto","can_delete":false,"product_type":"c1","uid":1387712,"ip_address":"","ucode":"41D7ABBBD2E7FF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/N6yjnrLnMW4XVSkBr3f0N3F962l35b5j0kib9VSlAqqbf6iaoCPicL1WnJ9KjgT4egQ7A2G0Zx3OayaK4yuoZrUVA/132","comment_is_top":false,"comment_ctime":1590495556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5885462852","product_id":100039001,"comment_content":"ä¸ºä½•è¦ä½¿ç”¨@Subscribeæ‰€æ³¨è§£çš„æ–¹æ³•çš„å‚æ•°ä½œä¸ºäº‹ä»¶ç±»å‹ï¼ŒGuavaä¹Ÿæ˜¯è¿™æ ·åšçš„å—ï¼Ÿ<br>ä¸ªäººè§‰å¾—è¿™æ ·åšæœ‰å‡ ä¸ªé—®é¢˜ï¼Œ1ã€è¿™ç§çº¦å®šæœ‰ç‚¹ä¸å¹³æ˜“è¿‘äººï¼›2ã€è¿™æ ·åšé™å®šäº†@Subscribeæ–¹æ³•çš„å‚æ•°çš„ä¸ªæ•°ï¼›3ã€å¦‚æœåŒä¸€ä¸ªObserveré‡Œé¢æœ‰å¤šä¸ª@Subscribeæ–¹æ³•çš„å‚æ•°ç›¸åŒï¼Œä½†æ˜¯ä»–ä»¬æ‰€éœ€è¦å…³æ³¨çš„äº‹ä»¶ä¸åŒï¼Œè¿™æ ·åšå°±å¿…é¡»åœ¨@Subscribeæ–¹æ³•å†…éƒ¨å»åšé€»è¾‘åˆ¤æ–­äº†ã€‚4ã€æ˜¯å¦å¯ä»¥è®¾è®¡æˆè¿™æ ·ï¼Œåœ¨@Subscribeæ³¨è§£å†…éƒ¨è®¾å®šäº‹ä»¶ç±»å‹ï¼Œè€Œä¸ç›´æ¥é€šè¿‡@Subscribeæ–¹æ³•çš„å‚æ•°åˆ¤å®šäº‹ä»¶ç±»å‹ã€‚","like_count":1},{"had_liked":false,"id":187700,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1018370,"ip_address":"","ucode":"7A488CC6FE15E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","comment_is_top":false,"comment_ctime":1584195404,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879162700","product_id":100039001,"comment_content":"ä¸ºäº†è®© UserController æ›´åŠ èšç„¦åœ¨ä¸šåŠ¡åŠŸèƒ½ä¸Šï¼Œæˆ‘çš„æƒ³æ³•æ˜¯å°†è€¦åˆçš„EventBusä»£ç æŠ½å–å‡ºæ¥å½¢æˆä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ç±»ï¼Œé€šè¿‡æ³¨å…¥çš„æ–¹å¼æ³¨å…¥åˆ°UserControllerç±»ä¸­ä½¿ç”¨ã€‚è¿™æ ·ä½¿å…¶ä¸¤è€…çš„èŒè´£å•ä¸€ï¼Œè€Œæ–°æŠ½å–å‡ºæ¥çš„æœåŠ¡ç±»å¯è¢«å…¶ä»–ä¸šåŠ¡åœºæ™¯å¤ç”¨ã€‚<br>ä»Šå¤©ä¹ŸåŠ æ·±äº†å¯¹Guava Eventbusçš„è®¤è¯†ï¼Œè™½ç„¶ä¹‹å‰ä¸“æ ä¹Ÿä»‹ç»è¿‡è¿™ä¸ªç±»åº“çš„ä½¿ç”¨ã€‚ç»“åˆJdkæä¾›çš„java.util.Observable&amp;Observerè§‚å¯Ÿè€…æ¨¡å¼APIï¼Œä¸EventBusè¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœè¦å®ç°è¿›ç¨‹å†…çš„è§‚å¯Ÿè€…ä½¿ç”¨EventBusæœ€ä¸ºæ–¹ä¾¿ã€‚ä»JDK9ä¹‹åï¼Œjava.util.Observable&amp;Observerå·²è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨Java Beansè§„èŒƒä¸­çš„äº‹ä»¶æ¨¡å¼å’Œjava.util.concurrent.Flow APIã€‚","like_count":1},{"had_liked":false,"id":187473,"user_name":"Jian","can_delete":false,"product_type":"c1","uid":1107305,"ip_address":"","ucode":"17ED4919F22DEC","user_header":"https://static001.geekbang.org/account/avatar/00/10/e5/69/719ec5d0.jpg","comment_is_top":false,"comment_ctime":1584120726,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879088022","product_id":100039001,"comment_content":" æœ€è¿‘å…¬å¸åšäº†ä¸ªä¸šåŠ¡ç³»ç»Ÿæ¶æ„é‡æ„ï¼Œå¥—ç”¨äº†å…¶å®ƒå…¬å¸çš„ä¸šåŠ¡æ¶æ„ï¼Œæ¶æ„ä¸ä¸šåŠ¡è€¦åˆçš„å¤ªç´§ï¼Œåšèµ·æ¥éå¸¸ç—›è‹¦ï¼Œè¶Šæ¥è¶Šè§‰å¾—è·Ÿäº‰å“¥å†™çš„ä¸“æ ç›¸è¿èƒŒã€‚","like_count":1},{"had_liked":false,"id":187314,"user_name":"1012still","can_delete":false,"product_type":"c1","uid":1196268,"ip_address":"","ucode":"739D376A519405","user_header":"https://static001.geekbang.org/account/avatar/00/12/40/ec/a00109c8.jpg","comment_is_top":false,"comment_ctime":1584082259,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5879049555","product_id":100039001,"comment_content":"UserController è€¦åˆçš„è·Ÿè§‚å¯Ÿè€…æ¨¡å¼ç›¸å…³çš„éä¸šåŠ¡ä»£ç å¯ä»¥ä½¿ç”¨ä»£ç†æ¨¡å¼è¿›è¡Œé‡æ„","like_count":1},{"had_liked":false,"id":187264,"user_name":"Kenå¼ äº‘å¿ ","can_delete":false,"product_type":"c1","uid":1134288,"ip_address":"","ucode":"D0BAC9FC17DE2B","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/d0/d8a5f720.jpg","comment_is_top":false,"comment_ctime":1584070355,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879037651","product_id":100039001,"comment_content":"UserController è¿˜æ˜¯è€¦åˆäº†å¾ˆå¤šè·Ÿè§‚å¯Ÿè€…æ¨¡å¼ç›¸å…³çš„éä¸šåŠ¡ä»£ç ï¼Œæ¯”å¦‚åˆ›å»ºçº¿ç¨‹æ± ã€æ³¨å†Œ Observerã€‚ä¸ºäº†è®© UserController æ›´åŠ èšç„¦åœ¨ä¸šåŠ¡åŠŸèƒ½ä¸Šï¼Œä½ æœ‰ä»€ä¹ˆé‡æ„çš„å»ºè®®å—ï¼Ÿ<br>åˆ›å»ºä¸€ä¸ªUserSubjectç±»,å°†çº¿ç¨‹åˆ›å»ºå’Œæ³¨å†ŒObserveré€»è¾‘å°è£…åœ¨è¿›è¯¥ç±»å‹,å†é€šè¿‡ä¾èµ–æ³¨å…¥æ–¹å¼æ³¨å…¥åˆ°UserController,æœ€åUserControlleråªéœ€UserSubjectçš„postå‡½æ•°å°±å¯ä»¥å‘é€æ¶ˆæ¯äº†.","like_count":1},{"had_liked":false,"id":187224,"user_name":"ï¼Œ","can_delete":false,"product_type":"c1","uid":1701867,"ip_address":"","ucode":"A5543C8DFEB198","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/eb/e7127bb8.jpg","comment_is_top":false,"comment_ctime":1584064252,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5879031548","product_id":100039001,"comment_content":"è¯¾åé¢˜:å¯ä»¥å°†EventBuså’ŒAsyncEventBuså­˜å…¥springå®¹å™¨ä¸­,ä½¿ç”¨å‰å…ˆå°†ObServeræ³¨å†Œè¿›å»,ä¹‹åä½¿ç”¨çš„æ—¶å€™åªè¦ä¾èµ–æ³¨å…¥å°±å¯ä»¥äº†","like_count":1},{"had_liked":false,"id":187200,"user_name":"å­™å¿—å¼º","can_delete":false,"product_type":"c1","uid":1325997,"ip_address":"","ucode":"9C070F1E4EC6FF","user_header":"https://static001.geekbang.org/account/avatar/00/14/3b/ad/31193b83.jpg","comment_is_top":false,"comment_ctime":1584058771,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5879026067","product_id":100039001,"comment_content":"EventBuså’ŒSpringé‡Œçš„äº‹ä»¶æœºåˆ¶å¥½åƒ","like_count":1},{"had_liked":false,"id":187196,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1584058373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879025669","product_id":100039001,"comment_content":"ç”Ÿäº§æ¶ˆè´¹è€…æ¨¡å¼å¯å®ç°ï¼Œeventbusç®¡ç†ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè§‚å¯Ÿè€…è‡ªå·±æ³¨å†Œåˆ°evenbusï¼Œä¸šåŠ¡å‘æ¶ˆæ¯åˆ°é˜Ÿåˆ—åï¼Œå–å‡ºæ¥ç»™åŒ¹é…çš„è§‚å¯Ÿè€…æ‰§è¡Œ","like_count":1},{"had_liked":false,"id":187193,"user_name":"é»„æ—æ™´","can_delete":false,"product_type":"c1","uid":1362631,"ip_address":"","ucode":"B15C38AECDA88F","user_header":"https://static001.geekbang.org/account/avatar/00/14/ca/c7/00e544c2.jpg","comment_is_top":false,"comment_ctime":1584057575,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879024871","product_id":100039001,"comment_content":"æ‰“å¡<br><br>","like_count":1},{"had_liked":false,"id":187187,"user_name":"Rayjun","can_delete":false,"product_type":"c1","uid":1002514,"ip_address":"","ucode":"61A3D1A3D03569","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/12/f0c145d4.jpg","comment_is_top":false,"comment_ctime":1584056125,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5879023421","product_id":100039001,"comment_content":"EventBuså¯ä»¥ä½¿ç”¨ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ³¨å…¥è¿›æ¥","like_count":1},{"had_liked":false,"id":347531,"user_name":"Geek_7e0e83","can_delete":false,"product_type":"c1","uid":2142423,"ip_address":"","ucode":"554DEE2AAAE33C","user_header":"","comment_is_top":false,"comment_ctime":1654131539,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654131539","product_id":100039001,"comment_content":"UserControllerå¯ä»¥ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œçˆ¶ç±»æ¥å…·ä½“å®Œæˆè¿™äº›éä¸šåŠ¡çš„åŠŸèƒ½å’Œå®ç°ã€‚ç„¶åå­ç±»èšç„¦åœ¨ä¸šåŠ¡åŠŸèƒ½ä¸Šã€‚ä½¿ç”¨ä»£ç†æ¨¡å¼<br>","like_count":0},{"had_liked":false,"id":339113,"user_name":"Senble","can_delete":false,"product_type":"c1","uid":1330328,"ip_address":"","ucode":"98A8DC9FF625FD","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/98/2e916c7e.jpg","comment_is_top":false,"comment_ctime":1647922463,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647922463","product_id":100039001,"comment_content":"é€šè¿‡æ³¨è§£è‡ªåŠ¨å°†Observeræ³¨å†Œè¿›å»ï¼Œç„¶åEventBusåšæˆå•ä¾‹ã€‚è¿™æ ·ä¸šåŠ¡æ–¹åªéœ€è¦è°ƒç”¨EventBuså‘é€æ¶ˆæ¯å°±è¡Œäº†ï¼Œè€Œæ— éœ€å…³ç³»EventBusåˆå§‹åŒ–&amp;æ³¨å†Œé€»è¾‘ã€‚","like_count":0},{"had_liked":false,"id":335557,"user_name":"Geek_e61474","can_delete":false,"product_type":"c1","uid":1433693,"ip_address":"","ucode":"9EE2A63C0CFC7C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2Cudic6gESQc9ibYcBOiazT13hDUaVs4fWlpwsAfvbjazXHMiaibR90TbWtF4Wcujj31Jqiah9TzX8FUlia6A1LibicVhibg/132","comment_is_top":false,"comment_ctime":1645585732,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645585732","product_id":100039001,"comment_content":"&#47;&#47; Interface:Useræ¨¡å—åªæœ‰éœ€è¦EventBusçš„API<br>public interface IUserEventBus{<br>    public Long register(String telephone, String password);<br>}<br>&#47;&#47; é™æ€ä»£ç†<br>public class UserEventBusProxy implements IUserEventBus {<br>  private UserController userController;<br>  private EventBus eventBus;  <br>  private static final int DEFAULT_EVENTBUS_THREAD_POOL_SIZE = 20;<br>  <br>  public UserEventBusProxy(UserController userController){<br>      this.userController=userController;<br>     eventBus = new AsyncEventBus(Executors.newFixedThreadPool(DEFAULT_EVENTBUS_THREAD_POOL_SIZE)); <br>    }<br>  <br>   public void setRegObservers(List&lt;Object&gt; observers) {<br>    for (Object observer : observers) {<br>      eventBus.register(observer);<br>    }<br>  }<br>  <br>    public Long register(String telephone, String password){<br>      <br>     Long userId=userController.register(telephone,password);<br>     eventBus.post(userId);<br>     <br>     return userId;<br>    }<br>}","like_count":0},{"had_liked":false,"id":330613,"user_name":"LIFE l=new LIFE()","can_delete":false,"product_type":"c1","uid":2446981,"ip_address":"","ucode":"729BACA3B7FD42","user_header":"https://static001.geekbang.org/account/avatar/00/25/56/85/6da913fa.jpg","comment_is_top":false,"comment_ctime":1642069944,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642069944","product_id":100039001,"comment_content":"å¦‚æœæ˜¯å¤šä¸ªä¸åŒçš„è®¢é˜…è€…çš„å‚æ•°ç±»å‹ä¸€è‡´ã€‚è¿™æ ·å°±éœ€è¦æ¯ä¸€ç§ä¸šåŠ¡æœ‰è‡ªå·±çš„EventBusï¼›<br>calss A{<br>  fa(String str);<br>}<br><br>calss B{<br>  fb(String str);<br>}<br>å¦‚æœA Bä¸¤ä¸ªç±»çš„ä¸šåŠ¡ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸¤ä¸ªEventBusåˆ†åˆ«æ¥åˆ†å‘A Bçš„ä¸šåŠ¡","like_count":0},{"had_liked":false,"id":325486,"user_name":"å¦„æƒ³","can_delete":false,"product_type":"c1","uid":2086179,"ip_address":"","ucode":"4502250D81B242","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d5/23/045ca1e6.jpg","comment_is_top":false,"comment_ctime":1638975077,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638975077","product_id":100039001,"comment_content":"è¯·é—®ä¸‹ setRegObservers è¿™ä¸ªæ–¹æ³•åœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å‘¢ï¼Œè¯¥æ€ä¹ˆæ„é€ å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":316379,"user_name":"Kee","can_delete":false,"product_type":"c1","uid":1450423,"ip_address":"","ucode":"DB88BE15E3697B","user_header":"https://static001.geekbang.org/account/avatar/00/16/21/b7/e06238cb.jpg","comment_is_top":false,"comment_ctime":1634291788,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634291788","product_id":100039001,"comment_content":"é’ˆå¯¹UserService å»ºä¸€ä¸ªä»£ç†ç±»ï¼Œ UserControllerçš„ä»£ç æ¢å¤åˆ°æ²¡æœ‰é€šçŸ¥çš„çŠ¶æ€ .","like_count":0},{"had_liked":false,"id":313687,"user_name":"æ‰ˆä¸½éœ","can_delete":false,"product_type":"c1","uid":2439823,"ip_address":"","ucode":"0AD3FB261A9A9E","user_header":"","comment_is_top":false,"comment_ctime":1632621559,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632621559","product_id":100039001,"comment_content":"ç»™å¤§ä½¬ç‚¹èµï¼Œæ¸…æ™°æ˜äº†å‘€","like_count":0},{"had_liked":false,"id":311138,"user_name":"Geek_8593e5","can_delete":false,"product_type":"c1","uid":1736807,"ip_address":"","ucode":"B316E40C400CC8","user_header":"","comment_is_top":false,"comment_ctime":1631085465,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631085465","product_id":100039001,"comment_content":"åŒæ­¥å’Œå¼‚æ­¥,é˜»å¡å’Œéé˜»å¡,è¿™ä¸¤ç»„è¯è¯­åœ¨æ–‡ç« å†…ä½¿ç”¨çš„æ¯”è¾ƒæ··ä¹±,æ²¡æœ‰è¡¨è¾¾å‡ºç›¸åº”çš„æ„æ€","like_count":0},{"had_liked":false,"id":292765,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1065986,"ip_address":"","ucode":"3D3D10273BED18","user_header":"https://static001.geekbang.org/account/avatar/00/10/44/02/5c8e4b81.jpg","comment_is_top":false,"comment_ctime":1620970520,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1620970520","product_id":100039001,"comment_content":"ç»§ç»­å°è£…ä¸€å±‚ ï¼Œæ¯”å¦‚å« EventCenter  ï¼Œ æä¾› æ³¨å†Œ å’Œ è§¦å‘ äºŒä¸ªå¯¹å¤–æ¥å£ ï¼Œ  <br>åœ¨ UserController é‡Œé¢åªéœ€è¦ è°ƒç”¨ äº‹ä»¶è§¦å‘å°±å¥½äº†ï¼Œ  äº‹ä»¶çš„æ³¨å†Œ å¯ä»¥å˜ä¸ºé…ç½®æ–‡ä»¶ï¼Œåˆå§‹åŒ– æ³¨å†Œ æˆ–è€…åŠ¨æ€æ³¨å†Œã€‚<br><br>","like_count":0},{"had_liked":false,"id":270491,"user_name":"David","can_delete":false,"product_type":"c1","uid":1021825,"ip_address":"","ucode":"22CBBC13FC97A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/97/81/e1eaf621.jpg","comment_is_top":false,"comment_ctime":1609145379,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1609145379","product_id":100039001,"comment_content":"æŠŠå‘é€event busçš„ä»£ç ä½¿ç”¨spring aop+æ³¨è§£å®ç°ã€‚çœ‹èµ·æ¥å°±å¹²å‡€äº†","like_count":0},{"had_liked":false,"id":257987,"user_name":"Awake  Dreaming","can_delete":false,"product_type":"c1","uid":1658734,"ip_address":"","ucode":"D1A19933863FD6","user_header":"https://static001.geekbang.org/account/avatar/00/19/4f/6e/bff1e33e.jpg","comment_is_top":false,"comment_ctime":1604235841,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604235841","product_id":100039001,"comment_content":"å…³äºè¯¾åé¢˜ï¼Œæˆ‘çš„æƒ³æ³•æ˜¯å°†åˆ›å»ºæ€»çº¿çš„é€»è¾‘æŠ½å–å‡ºæ¥ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥Controller","like_count":0},{"had_liked":false,"id":254793,"user_name":"æ›™å…‰","can_delete":false,"product_type":"c1","uid":1476450,"ip_address":"","ucode":"04D65BF7F19845","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/62/f99b5b05.jpg","comment_is_top":false,"comment_ctime":1603187625,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603187625","product_id":100039001,"comment_content":"å¢åŠ æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å‡å°‘è€¦åˆä»£ç ã€‚æ²¡æœ‰ä»€ä¹ˆè€¦åˆæ˜¯ä¸èƒ½åŠ ä¸€å±‚è§£å†³çš„ï¼Œå¦‚æœä¸è¡Œï¼Œé‚£å°±åŠ ä¸¤å±‚ã€‚<br>ä½†åŠ¿å¿…ä¼šè®©ä¸­é—´å±‚ä¹Ÿè€¦åˆå…¶ä»–æ¨¡å—ã€‚<br>è€¦åˆæ˜¯ç›¸å¯¹çš„ï¼Œå¦‚æœä¸€ä¸ªç¯®å­è£…50ä¸ªè›‹ï¼Œæœ‰ç‚¹å¤šï¼Œå°±å¤šè£…å‡ ä¸ªç¯®å­ã€‚æ— è®ºæ€ä¹ˆåˆ†ï¼Œä¹Ÿæ˜¯å®Œæ•´çš„ä¸€ä¸ªè›‹ï¼Œå¦‚æœéœ€æ±‚çœŸçš„æœ‰å¿…è¦æŠŠè›‹å£³ã€è›‹é»„å’Œè›‹ç™½åˆ†å¼€ï¼ˆå¦‚åšé¸¡è›‹ç³•ï¼‰ï¼Œé‚£åªèƒ½åŠ å‡ ä¸ªç¢—è£…äº†ï¼ˆæ¨¡å—æ‹†åˆ†ï¼‰ã€‚","like_count":0},{"had_liked":false,"id":248533,"user_name":"è·¯äºº","can_delete":false,"product_type":"c1","uid":1084291,"ip_address":"","ucode":"55FF703DE772D7","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/83/d2afc837.jpg","comment_is_top":false,"comment_ctime":1600215620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600215620","product_id":100039001,"comment_content":"springä¸­äº‹ä»¶ä¹ŸåŒ…å«äº†è¿™äº›åŠŸèƒ½ï¼Œæ›´å¼ºå¤§æ›´å¥½ç”¨","like_count":0},{"had_liked":false,"id":242972,"user_name":"Drjuror","can_delete":false,"product_type":"c1","uid":1683180,"ip_address":"","ucode":"21D87CFF49C68B","user_header":"","comment_is_top":false,"comment_ctime":1597908680,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597908680","product_id":100039001,"comment_content":"ç¡®å®è®©æˆ‘æ„Ÿå—åˆ°åšä¸šåŠ¡å¼€å‘çš„ï¼Œä¹Ÿæ˜¯æœ‰æ°´å¹³é«˜ä½ä¹‹åˆ†çš„<br>","like_count":0},{"had_liked":false,"id":239779,"user_name":"worthy","can_delete":false,"product_type":"c1","uid":1142202,"ip_address":"","ucode":"88E3D623C7EE7F","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/ba/0821c8a7.jpg","comment_is_top":false,"comment_ctime":1596639291,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596639291","product_id":100039001,"comment_content":"mark æœ‰æ—¶é—´å†çœ‹ä¸€é","like_count":0},{"had_liked":false,"id":232864,"user_name":"maybe","can_delete":false,"product_type":"c1","uid":1475528,"ip_address":"","ucode":"93D160F617E750","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","comment_is_top":false,"comment_ctime":1594132530,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1594132530","product_id":100039001,"comment_content":"éä¸šåŠ¡æ€§éœ€æ±‚å¯æŠ½è±¡æˆä¸ºæ¡†æ¶è¿›è¡Œéšè—ç»†èŠ‚ï¼ŒæŠŠéä¸šåŠ¡æ”¾åˆ°æ¡†æ¶ä¸­ï¼Œè§£è€¦ä¸šåŠ¡ä»£ç ã€‚æ¯”å¦‚æ¶ˆæ¯æ€»çº¿çš„æ³¨å†Œã€çº¿ç¨‹åˆ›å»ºæ”¾å…¥æ¡†æ¶ä¸­ï¼Œæ¡†æ¶æ‰«æç‰¹å®šæ³¨è§£ä¹‹ç±»çš„æ–¹å¼è¿›è¡Œè§‚å¯Ÿç€æ³¨å†Œ","like_count":0},{"had_liked":false,"id":229921,"user_name":"sunsweet","can_delete":false,"product_type":"c1","uid":1027879,"ip_address":"","ucode":"787F9E1EC6A67E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/27/76489618.jpg","comment_is_top":false,"comment_ctime":1593190633,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593190633","product_id":100039001,"comment_content":"è¿™ä¸€èŠ‚çœŸè¿‡ç˜¾","like_count":0},{"had_liked":false,"id":224754,"user_name":"è‚–è‡§","can_delete":false,"product_type":"c1","uid":1047733,"ip_address":"","ucode":"4FAC9FF54DD6A0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/b5/ac717737.jpg","comment_is_top":false,"comment_ctime":1591529893,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591529893","product_id":100039001,"comment_content":"å¤§å®¶æœ‰æ²¡æœ‰æƒ³è¿‡æ—¢ç„¶ObserverRegistryé‡ŒEventå’ŒObserverActinonåˆ†åˆ«æ˜¯Mapçš„Keyå’ŒValueï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä»¥PostedEventä½œä¸ºKeyï¼Œå»Mapé‡Œgetå¯¹åº”çš„Valueï¼Œåè€Œè¦éå†æ•´ä¸ªMapç”¨Class.isAssignableFromå»æ¯”è¾ƒã€‚å› ä¸ºå…¥å‚æœ‰å¯èƒ½æ˜¯Eventå¯¹è±¡çš„è¶…ç±»ï¼ŒEventè¶…ç±»å®ä¾‹çš„hashå€¼è‚¯å®šå’ŒEventå¯¹è±¡ä¸ä¸€è‡´ï¼Œä¸ºäº†ä¿é™©åªèƒ½éå†æ•´ä¸ªMapï¼Œä¸è¿‡æˆ‘è§‰å¾—æ—¢ç„¶ç”¨äº†Mapï¼Œè¿˜æ˜¯åº”è¯¥å…ˆgetä¸€ä¸‹ï¼Œgetä¸åˆ°å†éå†æ•´ä¸ªmapã€‚ä¸ç„¶æŠŠEventå’ŒObserverActionç»„æˆPairå†æ”¾å…¥ä¸€ä¸ªListæ›´åˆç†","like_count":0},{"had_liked":false,"id":215646,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1589041804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589041804","product_id":100039001,"comment_content":"å¯¹äºè€å¸ˆç•™çš„æ€è€ƒé¢˜ï¼Œæˆ‘è§‰å¾—å¯ä»¥è‡ªå®šä¹‰æ³¨è§£ï¼Œæ ‡æ³¨é‚£äº›ç±»æ˜¯è§‚å¯Ÿè€…ï¼Œé€šè¿‡åŒ…æ‰«ææ¥æ³¨å†Œè¿™äº›ç±»ï¼Œç„¶åè®¾è®¡ä¸€ä¸ªcontroller çš„çˆ¶ç±»ï¼Œå®ç°ä¸€ä¸ªpostæ–¹æ³•ï¼Œéœ€è¦å‘å¸ƒäº‹ä»¶çš„controllerç»§æ‰¿è¿™ä¸ªçˆ¶ç±»ï¼Œè°ƒç”¨çˆ¶ç±»çš„postæ–¹æ³•å°±å¯ä»¥","like_count":0},{"had_liked":false,"id":213470,"user_name":"é¢å‘ç™¾åº¦ç¼–ç¨‹","can_delete":false,"product_type":"c1","uid":1732780,"ip_address":"","ucode":"8FE04A019D71D1","user_header":"https://static001.geekbang.org/account/avatar/00/1a/70/ac/83bc14c0.jpg","comment_is_top":false,"comment_ctime":1588425839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588425839","product_id":100039001,"comment_content":"å…¶å®postæ–¹æ³•çš„å…·ä½“å®ç°ç»†èŠ‚å¯ä»¥æ”¾åˆ°eventbusé‡Œé¢ï¼Œè¿‡åº¦è€¦åˆï¼Œè€Œä¸”ä¸ç¬¦åˆå•ä¸€èŒè´£ï¼Œä¸ç¬¦åˆæœ€å°‘çŸ¥é“åŸåˆ™ã€‚è€Œeventbusåªæš´éœ²ä¸€ä¸ªæ¥å£ç»™ä¸Šå±‚æ¥å£å°±è¡Œäº†ï¼Œä¸Šå±‚ä¸éœ€è¦çŸ¥é“å…·ä½“æ€ä¹ˆåš","like_count":0},{"had_liked":false,"id":211508,"user_name":"Lambor","can_delete":false,"product_type":"c1","uid":1275494,"ip_address":"","ucode":"0E3C3C39A22495","user_header":"https://static001.geekbang.org/account/avatar/00/13/76/66/cbd6013c.jpg","comment_is_top":false,"comment_ctime":1587975121,"is_pvip":false,"replies":[{"id":"78752","content":"å¾ˆéš¾ä¿è¯ éœ€è¦æ›´å¤æ‚çš„æªæ–½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹äº‰","uid":"1190123","ctime":1588042073,"ip_address":"","comment_id":211508,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587975121","product_id":100039001,"comment_content":"ä½¿ç”¨å¼‚æ­¥éé˜»å¡è§‚å¯Ÿè€…æ¨¡å¼ï¼Œäº‹åŠ¡æ€ä¹ˆæ§åˆ¶å‘¢ï¼Ÿæ¯•ç«Ÿæœ€åéƒ½æ˜¯æ‰”åˆ°çº¿ç¨‹æ± é‡Œæ‰§è¡Œã€‚","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493281,"discussion_content":"å¾ˆéš¾ä¿è¯ éœ€è¦æ›´å¤æ‚çš„æªæ–½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588042073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206784,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1586934507,"is_pvip":false,"replies":[{"id":"86794","content":"å¤šè°¢æŒ‡å‡ºï¼Œæˆ‘æ”¹ä¸‹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹äº‰","uid":"1190123","ctime":1594904308,"ip_address":"","comment_id":206784,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586934507","product_id":100039001,"comment_content":"è€å¸ˆï¼Œä¾‹å­è·‘ä¸é€šï¼Œåº”è¯¥æŠŠlong ç±»å‹å‚æ•°æ”¹ä¸ºå°è£…ç±»å‹Long ,ä¸ç„¶æ‰¾ä¸åˆ°å¯¹åº”çš„è®¢é˜…è€…","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491902,"discussion_content":"å¤šè°¢æŒ‡å‡ºï¼Œæˆ‘æ”¹ä¸‹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594904308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204117,"user_name":"å²æœˆ","can_delete":false,"product_type":"c1","uid":1337598,"ip_address":"","ucode":"29A2A2BC3C4FE4","user_header":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","comment_is_top":false,"comment_ctime":1586335095,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586335095","product_id":100039001,"comment_content":"è§£å†³è®¢é˜…æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§è¿™ç§åŠŸèƒ½, æœ‰ä¸€ä¸ªå›ºå®šå¥½ç”¨çš„å¥—è·¯å»è§£å†³<br>1. å…ˆç”¨ä¸€ä¸ªæ•£åˆ—è¡¨, keyè¡¨ç¤ºå±æ€§, valueè¡¨ç¤ºå¯¹åº”çš„è®¢é˜…è€…æ± <br>2. è®¢é˜…è€…æ± å¯ä»¥ç”¨æ•£åˆ—è¡¨+åŒå‘é“¾è¡¨å®ç°. åŒå‘é“¾è¡¨ç”¨æ¥æ”¯æŒéå†è®¢é˜…è€…, æ•£åˆ—è¡¨ç”¨æ¥å¿«é€Ÿåˆ é™¤æŸä¸ªè®¢é˜…è€…....ç„¶åæ¯ä¸ªè®¢é˜…è€…éƒ½è¢«å°è£…åˆ°åŒå‘é“¾è¡¨èŠ‚ç‚¹ä¸Š, æ•£åˆ—è¡¨å°±ä¿å­˜è¿™ä¸ªè¿™ä¸ªé“¾è¡¨èŠ‚ç‚¹å³å¯.","like_count":0},{"had_liked":false,"id":203641,"user_name":"Shonn","can_delete":false,"product_type":"c1","uid":1590542,"ip_address":"","ucode":"393C2004D5A881","user_header":"https://static001.geekbang.org/account/avatar/00/18/45/0e/0901b3c3.jpg","comment_is_top":false,"comment_ctime":1586245475,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586245475","product_id":100039001,"comment_content":"ä¸ºäº†è®©UserControllerèšç„¦åœ¨æ³¨å†Œç­‰ä¸šåŠ¡åŠŸèƒ½ä¸Šï¼Œå¯ä»¥å°†çº¿ç¨‹æ± ï¼Œæ³¨å†Œè§‚å¯Ÿè€…ç­‰ä»£ç æ”¾åˆ°EventBusä¸­ï¼Œå°†è§‚å¯Ÿè€…å’ŒUserControllerå½»åº•è§£è€¦ï¼ŒUserControlleråªè´Ÿè´£æ³¨å†Œä¹‹åçš„äº‹ä»¶åˆ†å‘ã€‚","like_count":0},{"had_liked":false,"id":203275,"user_name":"ä¸è·¯åŒé£","can_delete":false,"product_type":"c1","uid":1138821,"ip_address":"","ucode":"2985F1440A1962","user_header":"https://static001.geekbang.org/account/avatar/00/11/60/85/f72f1d94.jpg","comment_is_top":false,"comment_ctime":1586164373,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1586164373","product_id":100039001,"comment_content":"1.è¯·å¯¹æ¯”ä¸€ä¸‹â€œç”Ÿäº§è€… - æ¶ˆè´¹è€…â€æ¨¡å‹å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«å’Œè”ç³»ã€‚<br>ç­”ï¼šè§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ªè§‚å¯Ÿè€…å¯¹åº”ä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œè§‚å¯Ÿè€…éœ€è¦æ³¨å†Œåˆ°è¢«è§‚å¯Ÿè€…ä¸­ï¼Œæ²¡æœ‰åšåˆ°<br>ä»£ç çš„çœŸæ­£è§£è—•ã€‚ç”Ÿäº§è€…-æ¶ˆè´¹è€…ï¼Œæ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œä¾‹å¦‚æ¶ˆæ¯ä¸­é—´ä»¶ç³»ç»Ÿï¼Œé€šè¿‡ä¸€ä¸ªç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼Œå°†ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çœŸæ­£çš„è§£è—•å¼€æ¥ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1259293,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/1d/b8014237.jpg","nickname":"åƒé‡Œä¹‹è¡Œ å§‹äºè¶³ä¸‹","note":"","ucode":"8F1CD8CECA588F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98327,"discussion_content":"é‡åˆ°éCRUDçš„ä¸šåŠ¡ç¡®å®æ˜¯ä¼šæ›´ç”¨å¿ƒä¸€äº›ï¼Œä½†æ˜¯æˆ‘ä»¬é¡¹ç›®ç»„ç»™çš„æ—¶é—´å¤ªç´§äº†ï¼Œæ‰€ä»¥å°±ç®—æœ‰è¿™æ ·çš„æœºä¼šï¼Œåšå‡ºæ¥çš„ä¸œè¥¿äº‹åçœ‹èµ·æ¥è‡ªå·±éƒ½çœ‹ä¸ä¸‹å»ï¼Œä½†æ˜¯å·²ç»ä¸Šäº†ç”Ÿæˆçš„åˆä¸æ•¢ä¹±æ”¹äº†","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1577154955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2516041,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/1UV7tTtMTM8hyvGl2YaSVczZve3e2aOcrRafvg64WQo7hYRRzGnondFElhGv0RnQZQgn6PycYzal2b5oAwYXtg/132","nickname":"å¤ªè¡Œå±±äºº","note":"","ucode":"66EB8BFD311A45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1259293,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/1d/b8014237.jpg","nickname":"åƒé‡Œä¹‹è¡Œ å§‹äºè¶³ä¸‹","note":"","ucode":"8F1CD8CECA588F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538566,"discussion_content":"ç†æƒ³ä¸ç°å®çš„å·®è·ï¼Œæ…¢æ…¢çš„ï¼Œæˆ‘ä»¬çš„ç†æƒ³å°±æ²¡äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639447382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":98327,"ip_address":""},"score":538566,"extra":""},{"author":{"id":2853072,"avatar":"","nickname":"å°æ°åŒå­¦","note":"","ucode":"C6FC59D58F772C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1259293,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/1d/b8014237.jpg","nickname":"åƒé‡Œä¹‹è¡Œ å§‹äºè¶³ä¸‹","note":"","ucode":"8F1CD8CECA588F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559927,"discussion_content":"åŠ ç­ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649061899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":98327,"ip_address":""},"score":559927,"extra":""}]},{"author":{"id":1999235,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/81/83/f93b1e62.jpg","nickname":"peaceForce","note":"","ucode":"98A318930DDC9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374837,"discussion_content":"ç»“æœä¸€ä¸ªéªŒè¯ç pmé—®ä½ éœ€è¦å¤šå°‘å¤©, ä½ è¯´ä¸‰å¤©, å¯¹æ–¹ç«‹é©¬å°±å‹äº†ä¸€åŠã€‚é™¤äº†æœ‰ä¼˜åŒ–çš„æ„è¯†, å¦‚ä½•è¯´æœå·¥æœŸå®‰æ’ä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1621386343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1369757,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/7WkTI1IicbKvsPJng5vQh5qlrf1smbfl2zb7icHZfzcAk1k4lr8w8IDEAdrqq1NHW5XZMPXiaa1h7Jn1LGOWOCkIA/132","nickname":"æ—©èµ·ä¸åƒè™«","note":"","ucode":"13CD3B5E1F9435","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1999235,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/81/83/f93b1e62.jpg","nickname":"peaceForce","note":"","ucode":"98A318930DDC9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538640,"discussion_content":"æ€•æ˜¯æœ€å¤šåˆ†é…åŠå¤©","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639465069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374837,"ip_address":""},"score":538640,"extra":""},{"author":{"id":1386966,"avatar":"https://static001.geekbang.org/account/avatar/00/15/29/d6/6dafc576.jpg","nickname":"ç³–å°å®","note":"","ucode":"15A8B649F668B1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1999235,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/81/83/f93b1e62.jpg","nickname":"peaceForce","note":"","ucode":"98A318930DDC9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544277,"discussion_content":"ä½ å¯ä»¥è¯•è¯•ä¸è¦ç«‹å³å›å¤ä»–ï¼Œåˆ—ä¸€ä¸ªåˆ—è¡¨ï¼Œå¼€å‘è¿™ä¸ªéœ€æ±‚æ¯ä¸ªåŠŸèƒ½ç‚¹æ‰€éœ€è¦çš„æ—¶é—´ï¼Œä»¥å°æ—¶ä¸ºå•ä½ï¼ŒåŠ ä¸Šä¼˜åŒ–è°ƒè¯•æ—¶é—´ï¼Œè¿™æ ·ä½ è¦æ±‚çš„å·¥æ—¶å¯ä»¥ä¸å¿…è¢«ä»–å‹ç¼©ï¼Œè™½ç„¶ä»–ä¸ä¼šè®¤çœŸçœ‹ï¼Œä½†æœ‰ä¸ªåˆ—è¡¨ï¼Œä»–ä¼šè§‰å¾—ä½ è¦æ±‚çš„å·¥æ—¶æ˜¯æœ‰å‡­æ®çš„","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1641456214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374837,"ip_address":""},"score":544277,"extra":""}]},{"author":{"id":1158946,"avatar":"https://static001.geekbang.org/account/avatar/00/11/af/22/559c2fdb.jpg","nickname":"Mr.S","note":"","ucode":"96DC8BE01D54C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266382,"discussion_content":"èµåŒ  çæƒœéCURDéœ€æ±‚","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1589507347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1489957,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","nickname":"tt","note":"","ucode":"7753B79AD5A9AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69170,"discussion_content":"è¿™æ ·çš„å·¥ä½œæ‰ä¼šç»™æˆ‘ä»¬æ„ä¹‰æ„Ÿ","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1575267387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1489957,"avatar":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","nickname":"tt","note":"","ucode":"7753B79AD5A9AC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69193,"discussion_content":"åŒæ„Ÿã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1575269662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":69170,"ip_address":""},"score":69193,"extra":""}]},{"author":{"id":1144171,"avatar":"https://static001.geekbang.org/account/avatar/00/11/75/6b/fd685164.jpg","nickname":"lcfæ«","note":"","ucode":"D51E8F68BD41CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196704,"discussion_content":"åŒæ„ æœ€å¥½æ˜¯è‡ªå·±åšä¸€ä¸ªæ¨¡å—ï¼Œè´Ÿè´£ä»–ã€‚è¿™æ ·å°±ä¼šä¸åœçš„ä¼˜åŒ–ï¼Œäº²å„¿å­ä¸€æ ·å¯¹å¾…ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1583369698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015483,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","nickname":"ç¨‹åºå‘˜å°è·ƒ","note":"","ucode":"25BB96E0791A60","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70189,"discussion_content":"å¤©å¤©CRUDï¼Œè‡ªå·±ä¹Ÿè§‰å¾—çƒ¦ï¼Œæ²¡å•¥æå‡","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1575335676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1311947,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/xysT7OH4SrD4sv944ndDv5tnJOk5na37Gxd5owGWsE7ON7AVW0ibnYGNRoZd0ibLWhFVXLLjOB5QFxwjo0EGIkoQ/132","nickname":"é›¨ä¸‹ä¸åœ","note":"","ucode":"0893B9C249E48A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":234604,"discussion_content":"è¯´å¾—å¥½","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586968105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073087,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/bf/4bd3eb4b.jpg","nickname":"ç±³ è™«","note":"","ucode":"6F35AA8BB8195B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68987,"discussion_content":"æƒ­æ„§ï¼Œä¸Šæ¬¡æä¾›æ”¯ä»˜å›è°ƒæ¥å£ç»™ç¬¬ä¸‰æ–¹çš„æ—¶å€™ã€‚å†™çš„æµæ°´å¸ï¼Œæ²¡æœ‰å°è£…ä¸€ç‚¹é€šç”¨æ€§èƒ½ã€‚è™½ç„¶æ€è·¯è·Ÿä»Šå¤©çš„è¯¾ç¨‹ä¸€æ ·ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575249644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1073087,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/bf/4bd3eb4b.jpg","nickname":"ç±³ è™«","note":"","ucode":"6F35AA8BB8195B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69068,"discussion_content":"å¯ä»¥è€ƒè™‘é‡æ„ä¸‹æ¥æå‡è‡ªå·±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575256680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":68987,"ip_address":""},"score":69068,"extra":""}]},{"author":{"id":2068684,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotIianb3beTzsGIte6BZxlIhEwc2ryrNBGxZy8ibKbfibVJyUS8d3ZxybAdfJwHPm13ydPC4VJP7Lbw/132","nickname":"taku","note":"","ucode":"B22DA9A4A9DC91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379231,"discussion_content":"ç¡®å®æ˜¯ä¸ªå¥½æ–¹æ³•ï¼Œé‡åˆ°écurdå°±å¥½å¥½æŠŠæ¡ï¼Œèµ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623763511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1321016,"avatar":"https://static001.geekbang.org/account/avatar/00/14/28/38/d93928e0.jpg","nickname":"yh","note":"","ucode":"64FFFB8A5DB979","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215840,"discussion_content":"èµåŒï¼Œå°±æ˜¯äº§å“éœ€æ±‚å˜åŒ–å¤ªå¿«ï¼Œè·Ÿä¸ä¸Šä»–ä»¬çš„èŠ‚å¥ã€‚ğŸ˜‚ğŸ˜‚ğŸ˜‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585389652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1178156,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fa/2c/9a0c45e6.jpg","nickname":"å¾®å‡‰","note":"","ucode":"F6BD0AE11AE224","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69104,"discussion_content":"å“ˆå“ˆï¼Œå®Œå…¨åŒæ„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575261398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2096683,"avatar":"","nickname":"Geek_151295","note":"","ucode":"970A611ECFB457","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575809,"discussion_content":"è¿™ä¸ªéªŒè¯ç æœåŠ¡ã€‚æœ‰å¼€æºçš„åœ°å€å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655117790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2550743,"avatar":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","nickname":"if...else...","note":"","ucode":"D0565908C99695","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377409,"discussion_content":"ğŸ˜³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622632082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512537,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","nickname":"æœ¨ç“œ777","note":"","ucode":"FC52A499AF6374","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":73696,"discussion_content":"é‡åˆ°é—®é¢˜ï¼Œæˆ‘é¦–å…ˆä¼šå®ç°ä¸€ç‰ˆï¼Œç„¶åå»ä¼˜åŒ–é‡æ„ï¼æœ‰æ—¶å¯¹éœ€æ±‚ä¸å¤ªç†è§£ï¼Œä½†äº§å“åˆæ€¥éœ€çœ‹åˆ°æ•ˆæœï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰è¿‡å¤šæ€è€ƒè®¾è®¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575589997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1540988,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZ16iaIia0029oI1Qh5NicibpbTiaBAaCOPYXoLplKHr6uQ2rSVxPZanBvpMcL2NuhwKQYCFnaHP5tedQ/132","nickname":"FIGNT","note":"","ucode":"D9DB185AE9E67C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68957,"discussion_content":"crudèƒ½ä¸èƒ½ä¹Ÿåšæˆæ¯”è¾ƒé€šç”¨çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575248012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1593289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","nickname":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","note":"","ucode":"4A5BE9A5E877FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1540988,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZ16iaIia0029oI1Qh5NicibpbTiaBAaCOPYXoLplKHr6uQ2rSVxPZanBvpMcL2NuhwKQYCFnaHP5tedQ/132","nickname":"FIGNT","note":"","ucode":"D9DB185AE9E67C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69069,"discussion_content":"ä¹Ÿéœ€è¦åŒºåˆ†åœºæ™¯ï¼Œéƒ¨åˆ†ä¹Ÿå¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575256709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":68957,"ip_address":""},"score":69069,"extra":""}]}]},{"had_liked":false,"id":203236,"user_name":"ç•ªèŒ„ç‚’è¥¿çº¢æŸ¿","can_delete":false,"product_type":"c1","uid":1690242,"ip_address":"","ucode":"13F47BABAB2110","user_header":"https://static001.geekbang.org/account/avatar/00/19/ca/82/85f6a1a2.jpg","comment_is_top":false,"comment_ctime":1586159330,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586159330","product_id":100039001,"comment_content":"æœ€åçš„é—®é¢˜æˆ‘çš„æ€è·¯æ˜¯æœ‰evenäº‹ä»¶å•ç‹¬æŠ½ç¦»å‡ºæ¥ï¼Œä¸è¦é›¨userè€¦åˆï¼Œä½œä¸ºevenå•ç‹¬æ¥å£ã€‚","like_count":0},{"had_liked":false,"id":201278,"user_name":"èƒŒé“è€Œé©°","can_delete":false,"product_type":"c1","uid":1629094,"ip_address":"","ucode":"953CFFE377E176","user_header":"https://static001.geekbang.org/account/avatar/00/18/db/a6/60bf0220.jpg","comment_is_top":false,"comment_ctime":1585744447,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585744447","product_id":100039001,"comment_content":"è‡ªå®ç°çš„eventbus å’Œæ–‡ä»¶ç›®å½•ç›‘å¬å®ä¾‹  https:&#47;&#47;github.com&#47;datayangl&#47;EventBus","like_count":0},{"had_liked":false,"id":200185,"user_name":"taotaowang","can_delete":false,"product_type":"c1","uid":1365177,"ip_address":"","ucode":"108489DD55723A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIvMlvSXsYgJibgutQdyFT6LsrXuvbjWVh0UpcF4esLzlWzBRlsFHA9MyBY38ibngKAN8mDn6DdHnMQ/132","comment_is_top":false,"comment_ctime":1585554010,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585554010","product_id":100039001,"comment_content":"EventBusè¿˜æ˜¯æœ‰ä¸€ä¸ªä¸æ–¹ä¾¿ä¹‹å¤„ï¼Œpoståªæ”¯æŒæœ‰ä¸”åªæœ‰ä¸€ä¸ªå‚æ•°","like_count":0,"discussions":[{"author":{"id":2853072,"avatar":"","nickname":"å°æ°åŒå­¦","note":"","ucode":"C6FC59D58F772C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579363,"discussion_content":"dto","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657373527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":198136,"user_name":"danielæ","can_delete":false,"product_type":"c1","uid":1248280,"ip_address":"","ucode":"573840F0C6573E","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/18/bacf4b7a.jpg","comment_is_top":false,"comment_ctime":1585411560,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585411560","product_id":100039001,"comment_content":"æƒ³è¯·æ•™è€å¸ˆ2ä¸ªé—®é¢˜ã€‚<br><br>é—®é¢˜1: å°±ä»¥ç”¨æˆ·æ³¨å†Œåè¦å‘ä¼˜æƒ å·çš„ä¾‹å­ã€‚ä¸šåŠ¡è¦æ±‚å¦‚æœæ³¨å†Œç”¨æˆ·æ˜¯30å²ä»¥ä¸Šå°±ä¸å‘ä¼˜æƒ å·ã€‚è¿™ä¸ªé€»è¾‘åº”è¯¥åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿä¸€èˆ¬èƒ½æƒ³åˆ°å°±ä¸¤ä¸ªæ–¹æ¡ˆ<br>1. åœ¨event bus post ä¹‹å‰åšä¸ªé€»è¾‘åˆ¤æ–­<br>2. åœ¨subscriberé‡Œåšåˆ¤æ–­<br><br>æ–¹æ¡ˆä¸€çš„å¥½å¤„æ˜¯æå‰çŸ¥é“ä¸éœ€è¦å‘å·ï¼Œé¿å…åˆ›å»ºä¸éœ€è¦çš„çº¿ç¨‹<br><br>æ–¹æ¡ˆäºŒçš„å¥½å¤„æ˜¯publisherä¸éœ€è¦çŸ¥é“å²æ•°åˆ¤æ–­çš„ç»†èŠ‚<br><br>é—®é¢˜2: å°±æ–‡ä¸­çš„ä¾‹å­ï¼Œæˆ‘å¸ä¼šæŠŠäº‹ä»¶å‘å¸ƒæ”¾åœ¨user registration serviceé‡Œè€Œä¸æ˜¯åœ¨controlleré‡Œã€‚è¿™æ ·åšæœ‰ä»€ä¹ˆä¸å¦¥å—ï¼Ÿ<br><br>æˆ‘ç»å¸¸ä¼šå’Œå¸ˆå…„äº‰è®ºä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ï¼Œè€å¸ˆæ˜¯å¦èƒ½æŒ‡ç‚¹ä¸€ä¸‹å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2347137,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d0/81/d5c8e46e.jpg","nickname":"snake","note":"","ucode":"47BFFE4D048156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":354965,"discussion_content":"æˆ‘è§‰å¾—æå‰åˆ¤æ–­å¥½ä¸€ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615369313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197762,"user_name":"FIGNT","can_delete":false,"product_type":"c1","uid":1540988,"ip_address":"","ucode":"D9DB185AE9E67C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZ16iaIia0029oI1Qh5NicibpbTiaBAaCOPYXoLplKHr6uQ2rSVxPZanBvpMcL2NuhwKQYCFnaHP5tedQ/132","comment_is_top":false,"comment_ctime":1585397251,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585397251","product_id":100039001,"comment_content":"æ³¨å†Œè§‚å¯Ÿè€…ï¼Œå¯ä»¥åœ¨è§‚å¯Ÿè€…ç±»ä¸ŠåŠ ä¸ªzè‡ªå®šä¹‰æ³¨è§£@Observeræˆ–è€…@Listenerã€‚æƒ³Springä¸€æ ·å»æ‰«ææ³¨å†Œã€‚<br>çº¿ç¨‹æ± ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚åº•å±‚æ˜¯åŠ¨æ€ä»£ç†æ¨¡å¼ã€‚ä¸çŸ¥é“è€å¸ˆçš„æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿè¯¾åæ€è€ƒæ€è€ƒè¿‡äº†ï¼Œä½†æ˜¯æœ‰äº›é—®é¢˜ä¸çŸ¥é“æ˜¯å¦æ­£ç¡®æˆ–è€…æ›´å¥½ç­”æ¡ˆã€‚èƒ½å¦åœ¨ç»“æŸçš„æ—¶å€™ç»™å‡ºæ¯èŠ‚è¯¾çš„é—®é¢˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":197340,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1585369231,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585369231","product_id":100039001,"comment_content":"æ„Ÿè§‰çªç„¶å¾—åˆ°ä¸€ä¸ªå®","like_count":0},{"had_liked":false,"id":195634,"user_name":"åœŸè±†æœ‰ç‚¹","can_delete":false,"product_type":"c1","uid":1118335,"ip_address":"","ucode":"75AFA9F013D4C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/7f/6f5cb6ce.jpg","comment_is_top":false,"comment_ctime":1585207725,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585207725","product_id":100039001,"comment_content":"ä¸çŸ¥é“æœ‰æ²¡æœ‰æå‹å†å¤ç°ç‹è€å¸ˆçš„ç®€ç‰ˆevenBusçš„å¼‚æ­¥éé˜»å¡æœ‰å¤šçº¿ç¨‹é—®é¢˜","like_count":0},{"had_liked":false,"id":195219,"user_name":"æå°å››","can_delete":false,"product_type":"c1","uid":1112747,"ip_address":"","ucode":"2A766BE16B276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/ab/0d39e745.jpg","comment_is_top":false,"comment_ctime":1585147533,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585147533","product_id":100039001,"comment_content":"è®¾è®¡æ¨¡å¼_57:<br># ä½œä¸š<br>- ç¬¬ä¸€çœ¼æ„Ÿè§‰æ˜¯EventBusçš„ä¾èµ–æ³¨å…¥<br>- ç„¶åå‘ç°è¿˜æ˜¯è€¦åˆï¼Œåº”è¯¥ä½¿ç”¨ä»£ç†ï¼Œå°†éUserControllerçš„ä¸šåŠ¡é€»è¾‘äº¤ç»™ä»£ç†ã€‚<br><br># æ„Ÿæƒ³<br>è·Ÿç€å†™äº†ä¸€éEventBusï¼Œè¯»åˆ°`isAssignableFrom`æ–¹æ³•çš„æ—¶å€™ï¼Œä¸ç†Ÿæ‚‰è¿™ä¸ªæ–¹æ³•ï¼Œå‡†å¤‡è¯»ä¸€ä¸‹æºç çš„æ³¨é‡Šï¼Œè½¬å¿µä¸€æƒ³ï¼Œæ—¶é—´æœ‰é™ï¼Œè¿™ä¸ªæ–¹æ³•ä¸æ˜¯é‡ç‚¹ï¼ŒçŸ¥é“æƒ³åšä»€ä¹ˆå°±è¡Œäº†ã€‚ã€‚ã€‚<br>ç„¶åï¼Œç¨‹åºè¿è¡Œèµ·æ¥æ€»æ˜¯æŠ¥é”™ï¼Œåæ¥æ‰å‘ç°æ˜¯`isAssignableFrom`æ–¹æ³•ä¸¤ä¾§çš„å‚æ•°å†™åäº†ã€‚<br>```<br>postedEventType.isAssignableFrom(eventType)&#47;&#47;é”™è¯¯ä»£ç <br>```<br>å¤´ç–¼~~~","like_count":0},{"had_liked":false,"id":194191,"user_name":"eason2017","can_delete":false,"product_type":"c1","uid":1009422,"ip_address":"","ucode":"E070BA624FA490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","comment_is_top":false,"comment_ctime":1585035735,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585035735","product_id":100039001,"comment_content":"å¯ä»¥å•ç‹¬æå‡ºä¸€ä¸ªç±»æ¥ç®¡ç†EventBuså¯¹è±¡çš„åˆ›å»ºï¼ˆå¯ç”¨springæ¥ç®¡ç†beanï¼‰ï¼ŒåŒæ—¶æä¾›æ³¨å†Œobserverçš„æ–¹æ³•å‡½æ•°ã€‚ç»Ÿä¸€ç”±è¿™ä¸ªç±»æ¥ç®¡ç†ã€‚<br>å°†è¿™ä¸ªç±»æ³¨å…¥åˆ°UserControlleré‡Œï¼Œå¹¶æš´éœ²å‡ºä¸€ä¸ªè·å–eventbusçš„æ–¹æ³•æ¥ä½¿ç”¨ã€‚","like_count":0},{"had_liked":false,"id":193955,"user_name":"å¿†æ°´å¯’","can_delete":false,"product_type":"c1","uid":1147453,"ip_address":"","ucode":"E3F86BD8AA8903","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","comment_is_top":false,"comment_ctime":1585006581,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585006581","product_id":100039001,"comment_content":"å¯ä»¥ä½¿ç”¨ä»£ç†æ¨¡å¼å»ä¼˜åŒ–ï¼Œä¸è¿‡æœ€ç»ˆè¿˜æ˜¯çœ‹ä¸šåŠ¡æƒ…å†µã€‚<br>ä¸èƒ½ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–ï¼Œè¦è€ƒè™‘ä¸šåŠ¡çš„å½±å“ã€‚","like_count":0},{"had_liked":false,"id":193725,"user_name":"ä½è¥¿ç›","can_delete":false,"product_type":"c1","uid":1090743,"ip_address":"","ucode":"73AAED82340E2B","user_header":"https://static001.geekbang.org/account/avatar/00/10/a4/b7/e0d88365.jpg","comment_is_top":false,"comment_ctime":1584955006,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584955006","product_id":100039001,"comment_content":"äº‰å“¥ï¼ŒAsyncEventBusæ˜¯å¤šçº¿ç¨‹æ‰§è¡ŒobserverAction.execute(event)è¿™ä¸ªæ–¹æ³•ï¼Œä¸ºä»€ä¹ˆObserverRegistryçš„registryè¦ç”¨concurrentMapï¼Œè€Œä¸”è¿˜è¦ç”¨ CopyOnWriteArraySetæ¥å­˜å‚¨ObserverActionã€‚","like_count":0},{"had_liked":false,"id":191938,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1584804819,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584804819","product_id":100039001,"comment_content":"æ€è€ƒé¢˜ï¼Œå¯ä»¥ç”¨ä»£ç†æ¨¡å¼","like_count":0},{"had_liked":false,"id":191087,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1584733573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584733573","product_id":100039001,"comment_content":"éå¸¸å®ç”¨","like_count":0},{"had_liked":false,"id":187293,"user_name":"test","can_delete":false,"product_type":"c1","uid":1065849,"ip_address":"","ucode":"9A4973E591DD12","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","comment_is_top":false,"comment_ctime":1584076217,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1584076217","product_id":100039001,"comment_content":"è¯¾å ‚è®¨è®ºï¼šè£…é¥°å™¨æ¨¡å¼ä¿®é¥°UserControllerï¼Œåœ¨è£…é¥°å™¨ç±»é‡Œé¢åˆ›å»ºçº¿ç¨‹æ± ï¼Œæ³¨å†ŒObserverã€‚","like_count":0,"discussions":[{"author":{"id":1438860,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f4/8c/0866b228.jpg","nickname":"å­æˆ¿","note":"","ucode":"CB05938C248BB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343453,"discussion_content":"é‡ç‚¹è·Ÿä¸šåŠ¡æ— å…³ï¼Œ ä»£ç†æ¨¡å¼äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611048065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187274,"user_name":"è®©çˆ±éšé£","can_delete":false,"product_type":"c1","uid":1106055,"ip_address":"","ucode":"AD8FD6EC95B5B5","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/87/75990554.jpg","comment_is_top":false,"comment_ctime":1584072181,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584072181","product_id":100039001,"comment_content":"<br>XMsg xMsg = new XMsg();<br>YMsg yMsg = new YMsg();<br>ZMsg zMsg = new ZMsg();<br>post(xMsg); =&gt; AObserverã€BObserveræ¥æ”¶åˆ°æ¶ˆæ¯<br>post(yMsg); =&gt; BObserveræ¥æ”¶åˆ°æ¶ˆæ¯<br>post(zMsg); =&gt; CObserveræ¥æ”¶åˆ°æ¶ˆæ¯<br><br>æ„Ÿè§‰è¿™ä¸ªæ˜¯ä¸æ˜¯ä¸å¯¹å•Šï¼Œæ„Ÿè§‰åº”è¯¥æ˜¯ï¼š<br>XMsg xMsg = new XMsg();<br>YMsg yMsg = new YMsg();<br>ZMsg zMsg = new ZMsg();<br>post(xMsg); =&gt; AObserver æ¥æ”¶åˆ°æ¶ˆæ¯<br>post(yMsg); =&gt; AObserverï¼ŒBObserveræ¥æ”¶åˆ°æ¶ˆæ¯<br>post(zMsg); =&gt; AObserverï¼ŒBObserverï¼ŒCObserveræ¥æ”¶åˆ°æ¶ˆæ¯<br>","like_count":0},{"had_liked":false,"id":187272,"user_name":"Eden Ma","can_delete":false,"product_type":"c1","uid":1457408,"ip_address":"","ucode":"755312F0D154F9","user_header":"https://static001.geekbang.org/account/avatar/00/16/3d/00/7daa7403.jpg","comment_is_top":false,"comment_ctime":1584071740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584071740","product_id":100039001,"comment_content":"ä½¿ç”¨å•ä¾‹ä½œä¸ºé€šçŸ¥ä¸­å¿ƒå°†åˆ›å»ºçº¿ç¨‹å’Œæ³¨å†Œobserverçš„ä»£ç æ”¾åœ¨é‡Œé¢,å°†è¢«è§‚å¯Ÿè€…çŠ¶æ€æ³¨å…¥åˆ°å•ä¾‹ç±»,è¿›è€Œé€šçŸ¥è§‚å¯Ÿè€….","like_count":0}]}