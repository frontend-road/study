{"id":104638,"title":"67 | iOS常用布局方式选择","content":"<p><strong>PDF 课件和源代码下载地址：</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/geektime-ios-course\">https://gitee.com/geektime-geekbang/geektime-ios-course</a></p>","comments":[{"had_liked":false,"id":226033,"user_name":"Geek_b7eb88","can_delete":false,"product_type":"c3","uid":1573715,"ip_address":"","ucode":"0EB46381D9B1CB","user_header":"","comment_is_top":false,"comment_ctime":1591932219,"is_pvip":false,"replies":[{"id":84690,"content":"这种问题在任何一个较大的APP信息流列表中都会遇到，常见的就是使用MVVM拆分业务逻辑替换MVC的架构，将一部分逻辑抽到VIewModel（cellModel）这个实现中。同时从分离业务代码解耦的角度，也可以参考IGListKit这样一个开源的项目，当然在这个框架中不仅仅是为了处理复杂列表的解耦，还包括了一系列对CollectionView的使用优化。","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1593002592,"ip_address":"","comment_id":226033,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师，我有个问题是，目前我们页面上写tableview布局的时候，在view中的tableview代理方法里通过if else section&#47;row，去判断不同位置应该展示的cell是什么样子的。但是如果一个页面逻辑比较复杂。有十几个或者更多类型的cell，并且cell之间会有UI和数据的交互。这种情况下应该如何封装和解耦这个页面，让这个View更简洁。 还是说对于iOS移动端开发来讲一个页面过多的逻辑和cell本身就是产品部门考虑的有问题。 \nPS:目前这个页面类似于，页面里有十几个模块，通过接口返回的配置，动态展示&#47;隐藏某些模块，然后根据展示的模块请求他们对应的接口。有些模块的展示&#47;隐藏还是通过已有模块的交互控制展示&#47;隐藏。\ncell我们已经封装的只对外部暴露一些回调方法和SetData方法，便于在view中和某些模块的交互。\n做后台的老大觉得我们不应该在代理方法里写很多逻辑相关的事情，并且不能写很多if else去判断不同的section返回哪些cell，数据类型的我可以根据Array,调用index，返回不同模块的高度，cell的个数等，但是返回cell的代理方法中好像不能这么做。并且他需要我们把模块之间的交互以及数据的交互封装到cell里面去。有点类似于把tableview和需要通过交互改变属性和数据用static修饰后传入cell中，在cell里做这些事情。\n希望老师可以解答下疑惑。谢谢","like_count":4,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498085,"discussion_content":"这种问题在任何一个较大的APP信息流列表中都会遇到，常见的就是使用MVVM拆分业务逻辑替换MVC的架构，将一部分逻辑抽到VIewModel（cellModel）这个实现中。同时从分离业务代码解耦的角度，也可以参考IGListKit这样一个开源的项目，当然在这个框架中不仅仅是为了处理复杂列表的解耦，还包括了一系列对CollectionView的使用优化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593002592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363005,"user_name":"暮光谷","can_delete":false,"product_type":"c3","uid":1506587,"ip_address":"北京","ucode":"5A8BF90CCA46ED","user_header":"https://static001.geekbang.org/account/avatar/00/16/fd/1b/65c26382.jpg","comment_is_top":false,"comment_ctime":1669123797,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"感谢老师解惑，一直感觉storyboard鸡肋","like_count":0}]}