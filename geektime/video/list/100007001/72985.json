{"id":72985,"title":"149 | OAuth2简化模式实验(lab04)","content":"","comments":[{"had_liked":false,"id":155774,"user_name":"luke","can_delete":false,"product_type":"c3","uid":1057643,"ip_address":"","ucode":"1D26F3F31CC435","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/pCVwNYT22UX6XAXJ5XLmbSHRmuPIncaJkS7S6kUKe0C8qWURib8zOhHTPwR36FeZZ4BcnKuDia4nrekqDnAkxdJQ/132","comment_is_top":false,"comment_ctime":1574753887,"is_pvip":false,"replies":[{"id":60051,"content":"这个重定向是在授权服务器上，用户同意授权，然后授权服务器向用户浏览器发出重定向跳转，跳转到静态资源服务器上(相当于让浏览器再次加载资源服务器上的js)，当js被浏览器再次加载，它就可以读取到url fragment里头的token。\n\n这里有篇文章讲简化模式，可以参考：\nhttps:&#47;&#47;developer.okta.com&#47;blog&#47;2018&#47;05&#47;24&#47;what-is-the-oauth2-implicit-grant-type\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1574858177,"ip_address":"","comment_id":155774,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"spa怎么后端重定向？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475865,"discussion_content":"这个重定向是在授权服务器上，用户同意授权，然后授权服务器向用户浏览器发出重定向跳转，跳转到静态资源服务器上(相当于让浏览器再次加载资源服务器上的js)，当js被浏览器再次加载，它就可以读取到url fragment里头的token。\n\n这里有篇文章讲简化模式，可以参考：\nhttps://developer.okta.com/blog/2018/05/24/what-is-the-oauth2-implicit-grant-type\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574858177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057643,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/pCVwNYT22UX6XAXJ5XLmbSHRmuPIncaJkS7S6kUKe0C8qWURib8zOhHTPwR36FeZZ4BcnKuDia4nrekqDnAkxdJQ/132","nickname":"luke","note":"","ucode":"1D26F3F31CC435","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62482,"discussion_content":"前后端分离的架构怎么获取authencation_code去换access_token？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574846678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55258,"user_name":"王盛武","can_delete":false,"product_type":"c3","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1546079583,"is_pvip":false,"replies":[{"id":20045,"content":"这个不是普通的ajax请求，浏览器需在授权服务器和Web资源服务器之间跳转才能完成整个流程，D步骤是授权服务器要求浏览器重定向（302跳转指令），浏览器需跳转到Web资源服务器重新加载js（因为上一步浏览器加载的是授权服务器页面），这时浏览器器中js才能从fragment里头获取token。之所以用fragment，是为安全不让令牌传过网络，参考https:&#47;&#47;stackoverflow.com&#47;questions&#47;16733863&#47;oauth2-0-implicit-grant-flow-why-use-url-hash-fragments","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1546161799,"ip_address":"","comment_id":55258,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师：\n1、C步骤里的Fragment里已经有了token（试验里的#号后面的就是token）？                                                             \n2、D步骤里的 URI without Fragment访问的“Web-Hosted Client Resouce”这个没有理解；\n      Web-Hosted Client Resouce是指授权服务器里的资源服务器？\n      C步骤里的Fragment已经有token了， 为什么要需要D步骤去请求获取token呢？\n      D步骤存在的意义是为了获取除了token之外的scope权限集合？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434720,"discussion_content":"这个不是普通的ajax请求，浏览器需在授权服务器和Web资源服务器之间跳转才能完成整个流程，D步骤是授权服务器要求浏览器重定向（302跳转指令），浏览器需跳转到Web资源服务器重新加载js（因为上一步浏览器加载的是授权服务器页面），这时浏览器器中js才能从fragment里头获取token。之所以用fragment，是为安全不让令牌传过网络，参考https://stackoverflow.com/questions/16733863/oauth2-0-implicit-grant-flow-why-use-url-hash-fragments","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546161799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}