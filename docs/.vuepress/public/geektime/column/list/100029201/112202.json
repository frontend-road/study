{"id":112202,"title":"28 | ä¸»é¢˜ç®¡ç†çŸ¥å¤šå°‘?","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å¤•ã€‚ä»Šå¤©æˆ‘æƒ³å’Œä½ è®¨è®ºä¸€ä¸‹Kafkaä¸­çš„ä¸»é¢˜ç®¡ç†ï¼ŒåŒ…æ‹¬æ—¥å¸¸çš„ä¸»é¢˜ç®¡ç†ã€ç‰¹æ®Šä¸»é¢˜çš„ç®¡ç†ä¸è¿ç»´ä»¥åŠå¸¸è§çš„ä¸»é¢˜é”™è¯¯å¤„ç†ã€‚</p><h2>ä¸»é¢˜æ—¥å¸¸ç®¡ç†</h2><p>æ‰€è°“çš„æ—¥å¸¸ç®¡ç†ï¼Œæ— éå°±æ˜¯ä¸»é¢˜çš„å¢åˆ æ”¹æŸ¥ã€‚ä½ å¯èƒ½ä¼šè§‰å¾—ï¼Œè¿™æœ‰ä»€ä¹ˆå¥½è®¨è®ºçš„ï¼Œå®˜ç½‘ä¸Šä¸éƒ½æœ‰å‘½ä»¤å—ï¼Ÿè¿™éƒ¨åˆ†å†…å®¹çš„ç¡®æ¯”è¾ƒç®€å•ï¼Œä½†å®ƒæ˜¯æˆ‘ä»¬è®¨è®ºåé¢å†…å®¹çš„åŸºç¡€ã€‚è€Œä¸”ï¼Œåœ¨è®¨è®ºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘è¿˜ä¼šå‘ä½ åˆ†äº«ä¸€äº›å°æŠ€å·§ã€‚å¦å¤–ï¼Œæˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„ç®¡ç†æ‰‹æ®µéƒ½æ˜¯å€ŸåŠ©äºKafkaè‡ªå¸¦çš„å‘½ä»¤ã€‚äº‹å®ä¸Šï¼Œåœ¨ä¸“æ åé¢ï¼Œæˆ‘ä»¬è¿˜ä¼šä¸“é—¨è®¨è®ºå¦‚ä½•ä½¿ç”¨Java APIçš„æ–¹å¼æ¥è¿ç»´Kafkaé›†ç¾¤ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨å‘½ä»¤åˆ›å»ºKafkaä¸»é¢˜ã€‚<strong>Kafkaæä¾›äº†è‡ªå¸¦çš„kafka-topicsè„šæœ¬ï¼Œç”¨äºå¸®åŠ©ç”¨æˆ·åˆ›å»ºä¸»é¢˜</strong>ã€‚è¯¥è„šæœ¬æ–‡ä»¶ä½äºKafkaå®‰è£…ç›®å½•çš„binå­ç›®å½•ä¸‹ã€‚å¦‚æœä½ æ˜¯åœ¨Windowsä¸Šä½¿ç”¨Kafkaï¼Œé‚£ä¹ˆè¯¥è„šæœ¬ä½äºbinè·¯å¾„çš„windowså­ç›®å½•ä¸‹ã€‚ä¸€ä¸ªå…¸å‹çš„åˆ›å»ºå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>bin/kafka-topics.sh --bootstrap-server broker_host:port --create --topic my_topic_name  --partitions 1 --replication-factor 1\n</code></pre><p>createè¡¨æ˜æˆ‘ä»¬è¦åˆ›å»ºä¸»é¢˜ï¼Œè€Œpartitionså’Œreplication factoråˆ†åˆ«è®¾ç½®äº†ä¸»é¢˜çš„åˆ†åŒºæ•°ä»¥åŠæ¯ä¸ªåˆ†åŒºä¸‹çš„å‰¯æœ¬æ•°ã€‚å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡è¿™ä¸ªå‘½ä»¤ï¼Œä½ å¯èƒ½ä¼šæ„Ÿåˆ°å¥‡æ€ªï¼šéš¾é“ä¸æ˜¯æŒ‡å®š --zookeeperå‚æ•°å—ï¼Ÿä¸ºä»€ä¹ˆç°åœ¨å˜æˆ --bootstrap-serveräº†å‘¢ï¼Ÿæˆ‘æ¥ç»™å‡ºç­”æ¡ˆï¼šä»Kafka 2.2ç‰ˆæœ¬å¼€å§‹ï¼Œç¤¾åŒºæ¨èç”¨ --bootstrap-serverå‚æ•°æ›¿æ¢ --zookeeperå‚æ•°ï¼Œå¹¶ä¸”æ˜¾å¼åœ°å°†åè€…æ ‡è®°ä¸ºâ€œå·²è¿‡æœŸâ€ï¼Œå› æ­¤ï¼Œå¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨2.2ç‰ˆæœ¬äº†ï¼Œé‚£ä¹ˆåˆ›å»ºä¸»é¢˜è¯·æŒ‡å®š --bootstrap-serverå‚æ•°ã€‚</p><!-- [[[read_end]]] --><p>ç¤¾åŒºæ¨èä½¿ç”¨ --bootstrap-serverè€Œé --zookeeperçš„åŸå› ä¸»è¦æœ‰ä¸¤ä¸ªã€‚</p><ol>\n<li>ä½¿ç”¨ --zookeeperä¼šç»•è¿‡Kafkaçš„å®‰å…¨ä½“ç³»ã€‚è¿™å°±æ˜¯è¯´ï¼Œå³ä½¿ä½ ä¸ºKafkaé›†ç¾¤è®¾ç½®äº†å®‰å…¨è®¤è¯ï¼Œé™åˆ¶äº†ä¸»é¢˜çš„åˆ›å»ºï¼Œå¦‚æœä½ ä½¿ç”¨ --zookeeperçš„å‘½ä»¤ï¼Œä¾ç„¶èƒ½æˆåŠŸåˆ›å»ºä»»æ„ä¸»é¢˜ï¼Œä¸å—è®¤è¯ä½“ç³»çš„çº¦æŸã€‚è¿™æ˜¾ç„¶æ˜¯Kafkaé›†ç¾¤çš„è¿ç»´äººå‘˜ä¸å¸Œæœ›çœ‹åˆ°çš„ã€‚</li>\n<li>ä½¿ç”¨ --bootstrap-serverä¸é›†ç¾¤è¿›è¡Œäº¤äº’ï¼Œè¶Šæ¥è¶Šæˆä¸ºä½¿ç”¨Kafkaçš„æ ‡å‡†å§¿åŠ¿ã€‚æ¢å¥è¯è¯´ï¼Œä»¥åä¼šæœ‰è¶Šæ¥è¶Šå°‘çš„å‘½ä»¤å’ŒAPIéœ€è¦ä¸ZooKeeperè¿›è¡Œè¿æ¥ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€å¥—è¿æ¥ä¿¡æ¯ï¼Œå°±èƒ½ä¸Kafkaè¿›è¡Œå…¨æ–¹ä½çš„äº¤äº’ï¼Œä¸ç”¨åƒä»¥å‰ä¸€æ ·ï¼Œå¿…é¡»åŒæ—¶ç»´æŠ¤ZooKeeperå’ŒBrokerçš„è¿æ¥ä¿¡æ¯ã€‚</li>\n</ol><p>åˆ›å»ºå¥½ä¸»é¢˜ä¹‹åï¼ŒKafkaå…è®¸æˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„è„šæœ¬æŸ¥è¯¢ä¸»é¢˜ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥è¯¢æ‰€æœ‰ä¸»é¢˜çš„åˆ—è¡¨ã€‚</p><pre><code>bin/kafka-topics.sh --bootstrap-server broker_host:port --list\n</code></pre><p>å¦‚æœè¦æŸ¥è¯¢å•ä¸ªä¸»é¢˜çš„è¯¦ç»†æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p><pre><code>bin/kafka-topics.sh --bootstrap-server broker_host:port --describe --topic &lt;topic_name&gt;\n</code></pre><p>å¦‚æœdescribeå‘½ä»¤ä¸æŒ‡å®šå…·ä½“çš„ä¸»é¢˜åç§°ï¼Œé‚£ä¹ˆKafkaé»˜è®¤ä¼šè¿”å›æ‰€æœ‰â€œå¯è§â€ä¸»é¢˜çš„è¯¦ç»†æ•°æ®ç»™ä½ ã€‚</p><p><strong>è¿™é‡Œçš„â€œå¯è§â€ï¼Œæ˜¯æŒ‡å‘èµ·è¿™ä¸ªå‘½ä»¤çš„ç”¨æˆ·èƒ½å¤Ÿçœ‹åˆ°çš„Kafkaä¸»é¢˜</strong>ã€‚è¿™å’Œå‰é¢è¯´åˆ°ä¸»é¢˜åˆ›å»ºæ—¶ï¼Œä½¿ç”¨ --zookeeperå’Œ --bootstrap-serverçš„åŒºåˆ«æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœæŒ‡å®šäº† --bootstrap-serverï¼Œé‚£ä¹ˆè¿™æ¡å‘½ä»¤å°±ä¼šå—åˆ°å®‰å…¨è®¤è¯ä½“ç³»çš„çº¦æŸï¼Œå³å¯¹å‘½ä»¤å‘èµ·è€…è¿›è¡Œæƒé™éªŒè¯ï¼Œç„¶åè¿”å›å®ƒèƒ½çœ‹åˆ°çš„ä¸»é¢˜ã€‚å¦åˆ™ï¼Œå¦‚æœæŒ‡å®š --zookeeperå‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¼šè¿”å›é›†ç¾¤ä¸­æ‰€æœ‰çš„ä¸»é¢˜è¯¦ç»†æ•°æ®ã€‚åŸºäºè¿™äº›åŸå› ï¼Œæˆ‘å»ºè®®ä½ æœ€å¥½ç»Ÿä¸€ä½¿ç”¨ --bootstrap-serverè¿æ¥å‚æ•°ã€‚</p><p>è¯´å®Œäº†ä¸»é¢˜çš„â€œå¢â€å’Œâ€œæŸ¥â€ï¼Œæˆ‘ä»¬è¯´è¯´å¦‚ä½•â€œæ”¹â€ã€‚Kafkaä¸­æ¶‰åŠåˆ°ä¸»é¢˜å˜æ›´çš„åœ°æ–¹æœ‰5å¤„ã€‚</p><p><strong>1.ä¿®æ”¹ä¸»é¢˜åˆ†åŒºã€‚</strong></p><p>å…¶å®å°±æ˜¯å¢åŠ åˆ†åŒºï¼Œç›®å‰Kafkaä¸å…è®¸å‡å°‘æŸä¸ªä¸»é¢˜çš„åˆ†åŒºæ•°ã€‚ä½ å¯ä»¥ä½¿ç”¨kafka-topicsè„šæœ¬ï¼Œç»“åˆ --alterå‚æ•°æ¥å¢åŠ æŸä¸ªä¸»é¢˜çš„åˆ†åŒºæ•°ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>bin/kafka-topics.sh --bootstrap-server broker_host:port --alter --topic &lt;topic_name&gt; --partitions &lt;æ–°åˆ†åŒºæ•°&gt;\n</code></pre><p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œä½ æŒ‡å®šçš„åˆ†åŒºæ•°ä¸€å®šè¦æ¯”åŸæœ‰åˆ†åŒºæ•°å¤§ï¼Œå¦åˆ™Kafkaä¼šæŠ›å‡ºInvalidPartitionsExceptionå¼‚å¸¸ã€‚</p><p><strong>2.ä¿®æ”¹ä¸»é¢˜çº§åˆ«å‚æ•°</strong>ã€‚</p><p>åœ¨ä¸»é¢˜åˆ›å»ºä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨kafka-configsè„šæœ¬ä¿®æ”¹å¯¹åº”çš„å‚æ•°ã€‚</p><p>è¿™ä¸ªç”¨æ³•æˆ‘ä»¬åœ¨ä¸“æ <a href=\"https://time.geekbang.org/column/article/101763\">ç¬¬8è®²</a>ä¸­è®¨è®ºè¿‡ï¼Œç°åœ¨å…ˆæ¥å¤ä¹ ä¸€ä¸‹ã€‚å‡è®¾æˆ‘ä»¬è¦è®¾ç½®ä¸»é¢˜çº§åˆ«å‚æ•°max.message.bytesï¼Œé‚£ä¹ˆå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>bin/kafka-configs.sh --zookeeper zookeeper_host:port --entity-type topics --entity-name &lt;topic_name&gt; --alter --add-config max.message.bytes=10485760\n</code></pre><p>ä¹Ÿè®¸ä½ ä¼šè§‰å¾—å¥‡æ€ªï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªè„šæœ¬å°±è¦æŒ‡å®š --zookeeperï¼Œè€Œä¸æ˜¯ --bootstrap-serverå‘¢ï¼Ÿå…¶å®ï¼Œè¿™ä¸ªè„šæœ¬ä¹Ÿèƒ½æŒ‡å®š --bootstrap-serverå‚æ•°ï¼Œåªæ˜¯å®ƒæ˜¯ç”¨æ¥è®¾ç½®åŠ¨æ€å‚æ•°çš„ã€‚åœ¨ä¸“æ åé¢ï¼Œæˆ‘ä¼šè¯¦ç»†ä»‹ç»ä»€ä¹ˆæ˜¯åŠ¨æ€å‚æ•°ï¼Œä»¥åŠåŠ¨æ€å‚æ•°éƒ½æœ‰å“ªäº›ã€‚ç°åœ¨ï¼Œä½ åªéœ€è¦äº†è§£è®¾ç½®å¸¸è§„çš„ä¸»é¢˜çº§åˆ«å‚æ•°ï¼Œè¿˜æ˜¯ä½¿ç”¨ --zookeeperã€‚</p><p><strong>3.å˜æ›´å‰¯æœ¬æ•°ã€‚</strong></p><p>ä½¿ç”¨è‡ªå¸¦çš„kafka-reassign-partitionsè„šæœ¬ï¼Œå¸®åŠ©æˆ‘ä»¬å¢åŠ ä¸»é¢˜çš„å‰¯æœ¬æ•°ã€‚è¿™é‡Œå…ˆç•™ä¸ªæ‚¬å¿µï¼Œç¨åæˆ‘ä¼šæ‹¿Kafkaå†…éƒ¨ä¸»é¢˜__consumer_offsetsæ¥æ¼”ç¤ºå¦‚ä½•å¢åŠ ä¸»é¢˜å‰¯æœ¬æ•°ã€‚</p><p><strong>4.ä¿®æ”¹ä¸»é¢˜é™é€Ÿã€‚</strong></p><p>è¿™é‡Œä¸»è¦æ˜¯æŒ‡è®¾ç½®Leaderå‰¯æœ¬å’ŒFollowerå‰¯æœ¬ä½¿ç”¨çš„å¸¦å®½ã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦è®©æŸä¸ªä¸»é¢˜çš„å‰¯æœ¬åœ¨æ‰§è¡Œå‰¯æœ¬åŒæ­¥æœºåˆ¶æ—¶ï¼Œä¸è¦æ¶ˆè€—è¿‡å¤šçš„å¸¦å®½ã€‚Kafkaæä¾›äº†è¿™æ ·çš„åŠŸèƒ½ã€‚æˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚å‡è®¾æˆ‘æœ‰ä¸ªä¸»é¢˜ï¼Œåä¸ºtestï¼Œæˆ‘æƒ³è®©è¯¥ä¸»é¢˜å„ä¸ªåˆ†åŒºçš„Leaderå‰¯æœ¬å’ŒFollowerå‰¯æœ¬åœ¨å¤„ç†å‰¯æœ¬åŒæ­¥æ—¶ï¼Œä¸å¾—å ç”¨è¶…è¿‡100MBpsçš„å¸¦å®½ã€‚æ³¨æ„æ˜¯å¤§å†™Bï¼Œå³æ¯ç§’ä¸è¶…è¿‡100MBã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆè®¾ç½®å‘¢ï¼Ÿ</p><p>è¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆè®¾ç½®Brokerç«¯å‚æ•°leader.replication.throttled.rateå’Œfollower.replication.throttled.rateï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>bin/kafka-configs.sh --zookeeper zookeeper_host:port --alter --add-config 'leader.replication.throttled.rate=104857600,follower.replication.throttled.rate=104857600' --entity-type brokers --entity-name 0\n</code></pre><p>è¿™æ¡å‘½ä»¤ç»“å°¾å¤„çš„ --entity-nameå°±æ˜¯Broker IDã€‚å€˜è‹¥è¯¥ä¸»é¢˜çš„å‰¯æœ¬åˆ†åˆ«åœ¨0ã€1ã€2ã€3å¤šä¸ªBrokerä¸Šï¼Œé‚£ä¹ˆä½ è¿˜è¦ä¾æ¬¡ä¸ºBroker 1ã€2ã€3æ‰§è¡Œè¿™æ¡å‘½ä»¤ã€‚</p><p>è®¾ç½®å¥½è¿™ä¸ªå‚æ•°ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºè¯¥ä¸»é¢˜è®¾ç½®è¦é™é€Ÿçš„å‰¯æœ¬ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦ä¸ºæ‰€æœ‰å‰¯æœ¬éƒ½è®¾ç½®é™é€Ÿï¼Œå› æ­¤ç»Ÿä¸€ä½¿ç”¨é€šé…ç¬¦*æ¥è¡¨ç¤ºï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>bin/kafka-configs.sh --zookeeper zookeeper_host:port --alter --add-config 'leader.replication.throttled.replicas=*,follower.replication.throttled.replicas=*' --entity-type topics --entity-name test\n</code></pre><p><strong>5.ä¸»é¢˜åˆ†åŒºè¿ç§»ã€‚</strong></p><p>åŒæ ·æ˜¯ä½¿ç”¨kafka-reassign-partitionsè„šæœ¬ï¼Œå¯¹ä¸»é¢˜å„ä¸ªåˆ†åŒºçš„å‰¯æœ¬è¿›è¡Œâ€œæ‰‹æœ¯â€èˆ¬çš„è°ƒæ•´ï¼Œæ¯”å¦‚æŠŠæŸäº›åˆ†åŒºæ‰¹é‡è¿ç§»åˆ°å…¶ä»–Brokerä¸Šã€‚è¿™ç§å˜æ›´æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä¼šåœ¨ä¸“æ åé¢ä¸“é—¨å’Œä½ åˆ†äº«å¦‚ä½•åšä¸»é¢˜çš„åˆ†åŒºè¿ç§»ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬æ¥èŠèŠå¦‚ä½•åˆ é™¤ä¸»é¢˜ã€‚å‘½ä»¤å¾ˆç®€å•ï¼Œæˆ‘ç›´æ¥åˆ†äº«ç»™ä½ ã€‚</p><pre><code>bin/kafka-topics.sh --bootstrap-server broker_host:port --delete  --topic &lt;topic_name&gt;\n</code></pre><p>åˆ é™¤ä¸»é¢˜çš„å‘½ä»¤å¹¶ä¸å¤æ‚ï¼Œå…³é”®æ˜¯åˆ é™¤æ“ä½œæ˜¯å¼‚æ­¥çš„ï¼Œæ‰§è¡Œå®Œè¿™æ¡å‘½ä»¤ä¸ä»£è¡¨ä¸»é¢˜ç«‹å³å°±è¢«åˆ é™¤äº†ã€‚å®ƒä»…ä»…æ˜¯è¢«æ ‡è®°æˆâ€œå·²åˆ é™¤â€çŠ¶æ€è€Œå·²ã€‚Kafkaä¼šåœ¨åå°é»˜é»˜åœ°å¼€å¯ä¸»é¢˜åˆ é™¤æ“ä½œã€‚å› æ­¤ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œä½ éƒ½éœ€è¦è€å¿ƒåœ°ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚</p><h2>ç‰¹æ®Šä¸»é¢˜çš„ç®¡ç†ä¸è¿ç»´</h2><p>è¯´å®Œäº†æ—¥å¸¸çš„ä¸»é¢˜ç®¡ç†æ“ä½œï¼Œæˆ‘ä»¬æ¥èŠèŠKafkaå†…éƒ¨ä¸»é¢˜__consumer_offsetså’Œ__transaction_stateã€‚å‰è€…ä½ å¯èƒ½å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œåè€…æ˜¯Kafkaæ”¯æŒäº‹åŠ¡æ–°å¼•å…¥çš„ã€‚å¦‚æœåœ¨ä½ çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ çœ‹åˆ°å¾ˆå¤šå¸¦æœ‰__consumer_offsetså’Œ__transaction_stateå‰ç¼€çš„å­ç›®å½•ï¼Œä¸ç”¨æƒŠæ…Œï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚è¿™ä¸¤ä¸ªå†…éƒ¨ä¸»é¢˜é»˜è®¤éƒ½æœ‰50ä¸ªåˆ†åŒºï¼Œå› æ­¤ï¼Œåˆ†åŒºå­ç›®å½•ä¼šéå¸¸å¾—å¤šã€‚</p><p>å…³äºè¿™ä¸¤ä¸ªå†…éƒ¨ä¸»é¢˜ï¼Œæˆ‘çš„å»ºè®®æ˜¯ä¸è¦æ‰‹åŠ¨åˆ›å»ºæˆ–ä¿®æ”¹å®ƒä»¬ï¼Œè¿˜æ˜¯è®©Kafkaè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºå¥½äº†ã€‚ä¸è¿‡è¿™é‡Œæœ‰ä¸ªæ¯”è¾ƒéšæ™¦çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯__consumer_offsetsçš„å‰¯æœ¬æ•°é—®é¢˜ã€‚</p><p>åœ¨Kafka 0.11ä¹‹å‰ï¼Œå½“Kafkaè‡ªåŠ¨åˆ›å»ºè¯¥ä¸»é¢˜æ—¶ï¼Œå®ƒä¼šç»¼åˆè€ƒè™‘å½“å‰è¿è¡Œçš„Brokerå°æ•°å’ŒBrokerç«¯å‚æ•°offsets.topic.replication.factorå€¼ï¼Œç„¶åå–ä¸¤è€…çš„è¾ƒå°å€¼ä½œä¸ºè¯¥ä¸»é¢˜çš„å‰¯æœ¬æ•°ï¼Œä½†è¿™å°±è¿èƒŒäº†ç”¨æˆ·è®¾ç½®offsets.topic.replication.factorçš„åˆè¡·ã€‚è¿™æ­£æ˜¯å¾ˆå¤šç”¨æˆ·æ„Ÿåˆ°å›°æ‰°çš„åœ°æ–¹ï¼šæˆ‘çš„é›†ç¾¤ä¸­æœ‰100å°Brokerï¼Œoffsets.topic.replication.factorä¹Ÿè®¾æˆäº†3ï¼Œä¸ºä»€ä¹ˆæˆ‘çš„__consumer_offsetsä¸»é¢˜åªæœ‰1ä¸ªå‰¯æœ¬ï¼Ÿå…¶å®ï¼Œè¿™å°±æ˜¯å› ä¸ºè¿™ä¸ªä¸»é¢˜æ˜¯åœ¨åªæœ‰ä¸€å°Brokerå¯åŠ¨æ—¶è¢«åˆ›å»ºçš„ã€‚</p><p>åœ¨0.11ç‰ˆæœ¬ä¹‹åï¼Œç¤¾åŒºä¿®æ­£äº†è¿™ä¸ªé—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ0.11ä¹‹åï¼ŒKafkaä¼šä¸¥æ ¼éµå®ˆoffsets.topic.replication.factorå€¼ã€‚å¦‚æœå½“å‰è¿è¡Œçš„Brokeræ•°é‡å°äºoffsets.topic.replication.factorå€¼ï¼ŒKafkaä¼šåˆ›å»ºä¸»é¢˜å¤±è´¥ï¼Œå¹¶æ˜¾å¼æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœè¯¥ä¸»é¢˜çš„å‰¯æœ¬å€¼å·²ç»æ˜¯1äº†ï¼Œæˆ‘ä»¬èƒ½å¦æŠŠå®ƒå¢åŠ åˆ°3å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„æ–¹æ³•ã€‚</p><p>ç¬¬1æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªjsonæ–‡ä»¶ï¼Œæ˜¾å¼æä¾›50ä¸ªåˆ†åŒºå¯¹åº”çš„å‰¯æœ¬æ•°ã€‚æ³¨æ„ï¼Œreplicasä¸­çš„3å°Brokeræ’åˆ—é¡ºåºä¸åŒï¼Œç›®çš„æ˜¯å°†Leaderå‰¯æœ¬å‡åŒ€åœ°åˆ†æ•£åœ¨Brokerä¸Šã€‚è¯¥æ–‡ä»¶å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š</p><pre><code>{&quot;version&quot;:1, &quot;partitions&quot;:[\n {&quot;topic&quot;:&quot;__consumer_offsets&quot;,&quot;partition&quot;:0,&quot;replicas&quot;:[0,1,2]}, \n  {&quot;topic&quot;:&quot;__consumer_offsets&quot;,&quot;partition&quot;:1,&quot;replicas&quot;:[0,2,1]},\n  {&quot;topic&quot;:&quot;__consumer_offsets&quot;,&quot;partition&quot;:2,&quot;replicas&quot;:[1,0,2]},\n  {&quot;topic&quot;:&quot;__consumer_offsets&quot;,&quot;partition&quot;:3,&quot;replicas&quot;:[1,2,0]},\n  ...\n  {&quot;topic&quot;:&quot;__consumer_offsets&quot;,&quot;partition&quot;:49,&quot;replicas&quot;:[0,1,2]}\n]}`\n</code></pre><p>ç¬¬2æ­¥æ˜¯æ‰§è¡Œkafka-reassign-partitionsè„šæœ¬ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>bin/kafka-reassign-partitions.sh --zookeeper zookeeper_host:port --reassignment-json-file reassign.json --execute\n</code></pre><p>é™¤äº†ä¿®æ”¹å†…éƒ¨ä¸»é¢˜ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜æƒ³æŸ¥çœ‹è¿™äº›å†…éƒ¨ä¸»é¢˜çš„æ¶ˆæ¯å†…å®¹ã€‚ç‰¹åˆ«æ˜¯å¯¹äº__consumer_offsetsè€Œè¨€ï¼Œç”±äºå®ƒä¿å­˜äº†æ¶ˆè´¹è€…ç»„çš„ä½ç§»æ•°æ®ï¼Œæœ‰æ—¶å€™ç›´æ¥æŸ¥çœ‹è¯¥ä¸»é¢˜æ¶ˆæ¯æ˜¯å¾ˆæ–¹ä¾¿çš„äº‹æƒ…ã€‚ä¸‹é¢çš„å‘½ä»¤å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›´æ¥æŸ¥çœ‹æ¶ˆè´¹è€…ç»„æäº¤çš„ä½ç§»æ•°æ®ã€‚</p><pre><code>bin/kafka-console-consumer.sh --bootstrap-server kafka_host:port --topic __consumer_offsets --formatter &quot;kafka.coordinator.group.GroupMetadataManager\\$OffsetsMessageFormatter&quot; --from-beginning\n</code></pre><p>é™¤äº†æŸ¥çœ‹ä½ç§»æäº¤æ•°æ®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥è¯»å–è¯¥ä¸»é¢˜æ¶ˆæ¯ï¼ŒæŸ¥çœ‹æ¶ˆè´¹è€…ç»„çš„çŠ¶æ€ä¿¡æ¯ã€‚</p><pre><code>bin/kafka-console-consumer.sh --bootstrap-server kafka_host:port --topic __consumer_offsets --formatter &quot;kafka.coordinator.group.GroupMetadataManager\\$GroupMetadataMessageFormatter&quot; --from-beginning\n</code></pre><p>å¯¹äºå†…éƒ¨ä¸»é¢˜__transaction_stateè€Œè¨€ï¼Œæ–¹æ³•æ˜¯ç›¸åŒçš„ã€‚ä½ åªéœ€è¦æŒ‡å®škafka.coordinator.transaction.TransactionLog\\$TransactionLogMessageFormatterå³å¯ã€‚</p><h2>å¸¸è§ä¸»é¢˜é”™è¯¯å¤„ç†</h2><p>æœ€åï¼Œæˆ‘ä»¬æ¥è¯´è¯´ä¸ä¸»é¢˜ç›¸å…³çš„å¸¸è§é”™è¯¯ï¼Œä»¥åŠç›¸åº”çš„å¤„ç†æ–¹æ³•ã€‚</p><p><strong>å¸¸è§é”™è¯¯1ï¼šä¸»é¢˜åˆ é™¤å¤±è´¥ã€‚</strong></p><p>å½“è¿è¡Œå®Œä¸Šé¢çš„åˆ é™¤å‘½ä»¤åï¼Œå¾ˆå¤šäººå‘ç°å·²åˆ é™¤ä¸»é¢˜çš„åˆ†åŒºæ•°æ®ä¾ç„¶â€œèººåœ¨â€ç¡¬ç›˜ä¸Šï¼Œæ²¡æœ‰è¢«æ¸…é™¤ã€‚è¿™æ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p><strong>å®é™…ä¸Šï¼Œé€ æˆä¸»é¢˜åˆ é™¤å¤±è´¥çš„åŸå› æœ‰å¾ˆå¤šï¼Œæœ€å¸¸è§çš„åŸå› æœ‰ä¸¤ä¸ªï¼šå‰¯æœ¬æ‰€åœ¨çš„Brokerå®•æœºäº†ï¼›å¾…åˆ é™¤ä¸»é¢˜çš„éƒ¨åˆ†åˆ†åŒºä¾ç„¶åœ¨æ‰§è¡Œè¿ç§»è¿‡ç¨‹ã€‚</strong></p><p>å¦‚æœæ˜¯å› ä¸ºå‰è€…ï¼Œé€šå¸¸ä½ é‡å¯å¯¹åº”çš„Brokerä¹‹åï¼Œåˆ é™¤æ“ä½œå°±èƒ½è‡ªåŠ¨æ¢å¤ï¼›å¦‚æœæ˜¯å› ä¸ºåè€…ï¼Œé‚£å°±éº»çƒ¦äº†ï¼Œå¾ˆå¯èƒ½ä¸¤ä¸ªæ“ä½œä¼šç›¸äº’å¹²æ‰°ã€‚</p><p>ä¸ç®¡ä»€ä¹ˆåŸå› ï¼Œä¸€æ—¦ä½ ç¢°åˆ°ä¸»é¢˜æ— æ³•åˆ é™¤çš„é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨è¿™æ ·çš„æ–¹æ³•ï¼š</p><p>ç¬¬1æ­¥ï¼Œæ‰‹åŠ¨åˆ é™¤ZooKeeperèŠ‚ç‚¹/admin/delete_topicsä¸‹ä»¥å¾…åˆ é™¤ä¸»é¢˜ä¸ºåçš„znodeã€‚</p><p>ç¬¬2æ­¥ï¼Œæ‰‹åŠ¨åˆ é™¤è¯¥ä¸»é¢˜åœ¨ç£ç›˜ä¸Šçš„åˆ†åŒºç›®å½•ã€‚</p><p>ç¬¬3æ­¥ï¼Œåœ¨ZooKeeperä¸­æ‰§è¡Œrmr  /controllerï¼Œè§¦å‘Controlleré‡é€‰ä¸¾ï¼Œåˆ·æ–°Controllerç¼“å­˜ã€‚</p><p>åœ¨æ‰§è¡Œæœ€åä¸€æ­¥æ—¶ï¼Œä½ ä¸€å®šè¦è°¨æ…ï¼Œå› ä¸ºå®ƒå¯èƒ½é€ æˆå¤§é¢ç§¯çš„åˆ†åŒºLeaderé‡é€‰ä¸¾ã€‚äº‹å®ä¸Šï¼Œä»…ä»…æ‰§è¡Œå‰ä¸¤æ­¥ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯Controllerç¼“å­˜ä¸­æ²¡æœ‰æ¸…ç©ºå¾…åˆ é™¤ä¸»é¢˜ç½¢äº†ï¼Œä¹Ÿä¸å½±å“ä½¿ç”¨ã€‚</p><p><strong>å¸¸è§é”™è¯¯2ï¼š__consumer_offsetså ç”¨å¤ªå¤šçš„ç£ç›˜ã€‚</strong></p><p>ä¸€æ—¦ä½ å‘ç°è¿™ä¸ªä¸»é¢˜æ¶ˆè€—äº†è¿‡å¤šçš„ç£ç›˜ç©ºé—´ï¼Œé‚£ä¹ˆï¼Œä½ ä¸€å®šè¦æ˜¾å¼åœ°ç”¨<strong>jstackå‘½ä»¤</strong>æŸ¥çœ‹ä¸€ä¸‹kafka-log-cleaner-threadå‰ç¼€çš„çº¿ç¨‹çŠ¶æ€ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™éƒ½æ˜¯å› ä¸ºè¯¥çº¿ç¨‹æŒ‚æ‰äº†ï¼Œæ— æ³•åŠæ—¶æ¸…ç†æ­¤å†…éƒ¨ä¸»é¢˜ã€‚å€˜è‹¥çœŸæ˜¯è¿™ä¸ªåŸå› å¯¼è‡´çš„ï¼Œé‚£æˆ‘ä»¬å°±åªèƒ½é‡å¯ç›¸åº”çš„Brokeräº†ã€‚å¦å¤–ï¼Œè¯·ä½ æ³¨æ„ä¿ç•™å‡ºé”™æ—¥å¿—ï¼Œå› ä¸ºè¿™é€šå¸¸éƒ½æ˜¯Bugå¯¼è‡´çš„ï¼Œæœ€å¥½æäº¤åˆ°ç¤¾åŒºçœ‹ä¸€ä¸‹ã€‚</p><h2>å°ç»“</h2><p>æˆ‘ä»¬æ¥å°ç»“ä¸€ä¸‹ã€‚ä»Šå¤©æˆ‘ä»¬ç€é‡è®¨è®ºäº†Kafkaçš„ä¸»é¢˜ç®¡ç†ï¼ŒåŒ…æ‹¬æ—¥å¸¸çš„è¿ç»´æ“ä½œï¼Œä»¥åŠå¦‚ä½•å¯¹Kafkaå†…éƒ¨ä¸»é¢˜è¿›è¡Œç›¸åº”çš„ç®¡ç†ã€‚æœ€åï¼Œæˆ‘ç»™å‡ºäº†ä¸¤ä¸ªæœ€å¸¸è§é—®é¢˜çš„è§£å†³æ€è·¯ã€‚è¿™é‡Œé¢æ¶‰åŠåˆ°äº†å¤§é‡çš„å‘½ä»¤ï¼Œå¸Œæœ›ä½ èƒ½å¤Ÿåœ¨è‡ªå·±çš„ç¯å¢ƒä¸­å¯¹ç…§ç€å®ç°ä¸€éã€‚å¦å¤–ï¼Œæˆ‘ä¹Ÿé¼“åŠ±ä½ å»å­¦ä¹ è¿™äº›å‘½ä»¤çš„å…¶ä»–ç”¨æ³•ï¼Œè¿™ä¼šæå¤§åœ°ä¸°å¯Œä½ çš„Kafkaå·¥å…·åº“ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ca/54/ca8dff8284b9b17c985fbd74bc3d6454.jpg?wh=2069*2580\" alt=\"\"></p><h2>å¼€æ”¾è®¨è®º</h2><p>è¯·æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆKafkaä¸å…è®¸å‡å°‘åˆ†åŒºæ•°ï¼Ÿå¦‚æœå‡å°‘åˆ†åŒºæ•°ï¼Œå¯èƒ½ä¼šæœ‰ä»€ä¹ˆæ ·çš„é—®é¢˜ï¼Ÿ</p><p>æ¬¢è¿å†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"27 | å…³äºé«˜æ°´ä½å’ŒLeader Epochçš„è®¨è®º","id":112118},"right":{"article_title":"29 | KafkaåŠ¨æ€é…ç½®äº†è§£ä¸‹ï¼Ÿ","id":113504}},"comments":[{"had_liked":false,"id":121049,"user_name":"Fever","can_delete":false,"product_type":"c1","uid":1263997,"ip_address":"","ucode":"2595F13BC3ECAB","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/7d/7b9fd831.jpg","comment_is_top":false,"comment_ctime":1565053034,"is_pvip":false,"replies":[{"id":"44529","content":"æˆ‘è§‰å¾—å¾ˆæœ‰é“ç†ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565071142,"ip_address":"","comment_id":121049,"utype":1}],"discussion_count":4,"race_medal":0,"score":"139004006506","product_id":100029201,"comment_content":"å› ä¸ºå¤šä¸ªbrokerèŠ‚ç‚¹éƒ½å†—ä½™æœ‰åˆ†åŒºçš„æ•°æ®ï¼Œå‡å°‘åˆ†åŒºæ•°éœ€è¦æ“ä½œå¤šä¸ªbrokerä¸”éœ€è¦è¿ç§»è¯¥åˆ†åŒºæ•°æ®åˆ°å…¶ä»–åˆ†åŒºã€‚å¦‚æœæ˜¯æŒ‰æ¶ˆæ¯key hashé€‰çš„åˆ†åŒºï¼Œé‚£ä¹ˆè¿ç§»å°±ä¸çŸ¥é“è¿åˆ°å“ªé‡Œäº†ï¼Œå› ä¸ºåªæœ‰ä¸šåŠ¡ä»£ç å¯ä»¥å†³å®šæ”¾åœ¨å“ªã€‚ä¸çŸ¥é“æˆ‘æƒ³çš„å¯¹ä¸å¯¹ã€‚","like_count":33,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461594,"discussion_content":"æˆ‘è§‰å¾—å¾ˆæœ‰é“ç†ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565071142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1951699,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/c7/d3/961193ed.jpg","nickname":"çµä¸€äºŒä¸‰å››Iris","note":"","ucode":"8C2B14D9BB2451","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327436,"discussion_content":"â€œå¦‚æœæ˜¯æŒ‰æ¶ˆæ¯key hashé€‰çš„åˆ†åŒºï¼Œé‚£ä¹ˆè¿ç§»å°±ä¸çŸ¥é“è¿åˆ°å“ªé‡Œäº†ï¼Œå› ä¸ºåªæœ‰ä¸šåŠ¡ä»£ç å¯ä»¥å†³å®šæ”¾åœ¨å“ªã€‚â€ é‚£ä¼šä¸ä¼šå­˜åœ¨å¦‚æœå¢åŠ åˆ†åŒºï¼Œ ä¹Ÿæ˜¯ç”±ä¸šåŠ¡ä»£ç å†³å®šæ–°å¢æ¶ˆæ¯æ”¾åœ¨åœ¨å“ªå„¿ç”±ä¸šåŠ¡ä»£ç å†³å®šçš„æƒ…å†µï¼Œ è¿™æ ·æˆ‘ä»¬ä¹Ÿä¸çŸ¥é“æ–°å¢æ¶ˆæ¯å¾€å“ªå„¿æ”¾å‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605838015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1951699,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/c7/d3/961193ed.jpg","nickname":"çµä¸€äºŒä¸‰å››Iris","note":"","ucode":"8C2B14D9BB2451","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328459,"discussion_content":"æ‰€ä»¥ä¸æ˜¯è¦è¿™ä¸ªç©æ„å„¿kafka-reassign-partitions.shæ¥æ‰‹åŠ¨è¿ç§»å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606142692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327436,"ip_address":""},"score":328459,"extra":""}]},{"author":{"id":1521451,"avatar":"https://static001.geekbang.org/account/avatar/00/17/37/2b/b32f1d66.jpg","nickname":"Ball","note":"","ucode":"1EE949E68D84CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":132538,"discussion_content":"æŒºä¸é”™çš„ï¼Œå¾ˆå¥½åœ°è§£é‡Šäº†ä¸ºä»€ä¹ˆä¸èƒ½å‡å°‘åˆ†åŒºæ•°é‡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578916301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121082,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1565055130,"is_pvip":false,"replies":[{"id":"44526","content":"ä¸ä¼šçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565070933,"ip_address":"","comment_id":121082,"utype":1}],"discussion_count":1,"race_medal":0,"score":"61694597274","product_id":100029201,"comment_content":"å¦‚æœå¢åŠ åˆ†åŒºï¼Œé‚£æ—§åˆ†åŒºçš„æ•°æ®ä¼šè‡ªåŠ¨è½¬ç§»å—ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461613,"discussion_content":"ä¸ä¼šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565070933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149941,"user_name":"æ³¨å®šéå‡¡","can_delete":false,"product_type":"c1","uid":1113597,"ip_address":"","ucode":"80673056E131B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","comment_is_top":false,"comment_ctime":1573434792,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"57408009640","product_id":100029201,"comment_content":"1ï¼Œåˆ›å»ºKafkaä¸»é¢˜ï¼š<br>Kafkaæä¾›äº†è‡ªå¸¦çš„Kafka-topicè„šæœ¬ç”¨äºå¸®åŠ©ç”¨æˆ·åˆ›å»ºä¸»é¢˜ã€‚<br>bin&#47;kafka-topic.sh  --bootstarp-server broker_host:port  --create â€“topic my_topic  --partitions 1  --replication-factor 1<br>create è¡¨æ˜æˆ‘ä»¬è¦åˆ›å»ºä¸»é¢˜ï¼Œè€Œpartitionså’Œreplication factoråˆ†å¸ƒè®¾ç½®äº†ä¸»é¢˜çš„åˆ†åŒºæ•°ä»¥åŠæ¯ä¸ªåˆ†åŒºä¸‹çš„å‰¯æœ¬æ•°ã€‚<br><br>2ï¼ŒæŸ¥è¯¢ä¸»é¢˜<br>æŸ¥è¯¢æ‰€æœ‰ä¸»é¢˜çš„åˆ—è¡¨ï¼š&#47;bin&#47;kafka-topic.sh --bootstrap-server broker_host:port --list <br>æŸ¥è¯¢å•ä¸ªä¸»é¢˜çš„è¯¦ç»†æ•°æ®ï¼š&#47;bin&#47;kafka-topic.sh --bootstrap-server broker_host:port --describe --topic &lt;topic name&gt;<br><br>3ï¼Œä¿®æ”¹ä¸»é¢˜<br>A ï¼šä¿®æ”¹åˆ†åŒºï¼š&#47;bin&#47;kafka-topic.sh --bootstrap-server broker_host : port --alter --topic &lt;topic_name&gt; --partitions &lt;æ–°åˆ†åŒºæ•°&gt;<br>åˆ†åŒºæ•°ä¸€å®šè¦æ¯”åŸæœ‰åˆ†åŒºæ•°å¤§ã€‚<br><br>B ï¼šä¿®æ”¹ä¸»é¢˜çº§åˆ«å‚æ•°ï¼šä½¿ç”¨kafka-configsè„šæœ¬ä¿®æ”¹å¯¹åº”çš„å‚æ•°ã€‚<br>ä¿®æ”¹ä¸»é¢˜çº§åˆ«çš„max.message.bytes ï¼š&#47;bin&#47;kafka-configs.sh --zookeeper zookeeper_host:port --entity-type topic --entity-name &lt;topic_name&gt; --alter --add-config max.message.bytes=10485760<br><br>è¿™ä¸ªå‘½ä»¤é‡Œä½¿ç”¨çš„ â€“zookeeperï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ --bootstrap-serverï¼Œåªæ˜¯ä»–æ˜¯ç”¨æ¥è®¾ç½®åŠ¨æ€å‚æ•°çš„ã€‚<br><br>C ï¼šå˜æ›´å‰¯æœ¬æ•°<br>ä½¿ç”¨kafka-reassign-partitions è„šæœ¬ï¼Œå¢åŠ å‰¯æœ¬æ•°<br><br>D ï¼šä¿®æ”¹ä¸»é¢˜é™é€Ÿ<br>è¿™æ˜¯æŒ‡è®¾ç½®Leaderå‰¯æœ¬å’Œfollower å‰¯æœ¬ä½¿ç”¨çš„å¸¦å®½ã€‚æœ‰æ—¶å€™ï¼Œéœ€è¦è®©æŸä¸ªä¸»é¢˜çš„å‰¯æœ¬åœ¨æ‰§è¡Œå‰¯æœ¬åŒæ­¥æœºåˆ¶æ—¶ï¼Œä¸è¦æ¶ˆè€—è¿‡å¤šçš„å¸¦å®½ã€‚<br>è¦åšåˆ°è¿™ä¸ªéœ€è¦å…ˆè®¾ç½®leader.replication.throttled.rateå’Œfollower.replication.throttled.rate<br><br>bin&#47;kafka-configs.sh --zookeeper zookeeper_host:port --alter --add-config &#39;leader.replication.throttled.rate=104857600,follower.replication.throttled.rate=104857600&#39; --entity-type brokers --entity-name 0<br><br>E ï¼šä¸»é¢˜åˆ†åŒºè¿ç§»<br>åŒæ ·æ˜¯ä½¿ç”¨kafka-ressign-partitionsè„šæœ¬ã€‚<br><br>F ï¼šåˆ é™¤ä¸»é¢˜<br>&#47;bin&#47;kafka-topic.sh â€“bootstrap-server broker_host:port --delete --topic &lt;topic_name&gt;<br>åˆ é™¤ä¸»é¢˜çš„æ“ä½œæ˜¯å¼‚æ­¥çš„ï¼Œæ‰§è¡Œå®Œè¿™æ¡å‘½ä»¤ä¸ä»£è¡¨ä¸»é¢˜ç«‹å³å°±è¢«åˆ é™¤äº†ï¼Œå®ƒä»…ä»…æ˜¯è¢«æ ‡è®°æˆâ€œå·²åˆ é™¤â€çŠ¶æ€è€Œå·²ã€‚Kafkaä¼šåœ¨åå°é»˜é»˜åœ°å¼€å¯ä¸»é¢˜åˆ é™¤æ“ä½œã€‚<br><br>4 å¸¸è§ä¸»é¢˜é”™è¯¯å¤„ç†<br><br>1ï¼šä¸»é¢˜åˆ é™¤å¤±è´¥<br>é€ æˆä¸»é¢˜åˆ é™¤å¤±è´¥çš„åŸå› æœ‰å¾ˆå¤šï¼Œæœ€å¸¸è§çš„åŸå› æœ‰ä¸¤ä¸ªï¼šå‰¯æœ¬æ‰€åœ¨Brokerå®•æœºäº†ï¼›å¾…åˆ é™¤ä¸»é¢˜çš„éƒ¨åˆ†åˆ†åŒºä¾ç„¶åœ¨æ‰§è¡Œè¿ç§»è¿‡ç¨‹ã€‚<br><br>è§£å†³ï¼š<br>ç¬¬ä¸€æ­¥ï¼šæ‰‹åŠ¨åˆ é™¤ZookeeperèŠ‚ç‚¹&#47;admin&#47;delete_topics ä¸‹å¾…åˆ é™¤ä¸»é¢˜ä¸ºåçš„znodeã€‚<br>ç¬¬äºŒæ­¥ï¼šæ‰‹åŠ¨åˆ é™¤è¯¥ä¸»é¢˜çš„ç£ç›˜ä¸Šçš„åˆ†åŒºç›®å½•ã€‚<br>ç¬¬ä¸‰æ­¥ï¼šåœ¨Zookeeperä¸­æ‰§è¡Œrmr&#47;controllerï¼Œè§¦å‘Controlleré‡é€‰ä¸¾ï¼Œåˆ·æ–°Controllerç¼“å­˜ã€‚<br>åœ¨æ‰§è¡Œæœ€åä¸€æ­¥æ—¶ï¼Œè¦æ…é‡ï¼Œå› ä¸ºä»–å¯èƒ½é€ æˆå¤§é¢ç§¯çš„åˆ†åŒºLeaderé‡é€‰ä¸¾ã€‚äº‹å®ä¸Šï¼Œä»…ä»…æ‰§è¡Œå‰ä¸¤æ­¥ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯Controllerç¼“å­˜ä¸­æ²¡æœ‰æ¸…ç©ºåˆ é™¤ä¸»é¢˜ï¼Œä¸å½±å“ä½¿ç”¨ã€‚<br><br>2ï¼š_consumer_offsetå ç”¨å¤ªå¤šçš„ç£ç›˜<br><br>å¦‚æœå‘ç°è¿™ä¸ªä¸»é¢˜å ç”¨äº†è¿‡å¤šçš„ç£ç›˜ç©ºé—´ï¼Œå°±è¦æ˜¾ç¤ºçš„ä½¿ç”¨jstack å‘½ä»¤æŸ¥çœ‹kafka-log-cleaner-threadå‰ç¼€çº¿ç¨‹çŠ¶æ€ã€‚<br><br>","like_count":14,"discussions":[{"author":{"id":1096984,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bd/18/2af6bf4b.jpg","nickname":"å…”2ğŸ°ğŸƒ","note":"","ucode":"1FEDA044BB6CBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204462,"discussion_content":"bin/kafka-topics.sh  topics not topic, miss a &#39;s&#39;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584175952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180262,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1582243450,"is_pvip":true,"replies":[{"id":"69998","content":"ä¼šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1582246999,"ip_address":"","comment_id":180262,"utype":1}],"discussion_count":2,"race_medal":2,"score":"44531916410","product_id":100029201,"comment_content":"æ–°å¢åˆ†åŒºåï¼Œä¹‹å‰æŒ‰ key ä¿è¯æ¶ˆæ¯æœ‰åºæ€§ï¼Œæ˜¯å¦ä¼šå› ä¸ºæ–°å¢åˆ†åŒºï¼Œå¯¼è‡´æŒ‡å®š key è¢«åˆ†é…åˆ°å…¶å®ƒåˆ†åŒº","like_count":11,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484588,"discussion_content":"ä¼šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582246999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2809887,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/e0/1f/de322ce3.jpg","nickname":"Harley","note":"","ucode":"F92472893F2156","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566475,"discussion_content":"é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œè‡ªå®šä¹‰åˆ†åŒºç­–ç•¥ï¼ŒæŒ‰keyæŒ‡å®šåˆ†åŒºï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650699191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121007,"user_name":"ç‰å‰‘å†°é”‹","can_delete":false,"product_type":"c1","uid":1214202,"ip_address":"","ucode":"8EA56A71BA5B22","user_header":"https://static001.geekbang.org/account/avatar/00/12/86/fa/4bcd7365.jpg","comment_is_top":false,"comment_ctime":1565049691,"is_pvip":false,"replies":[{"id":"44532","content":"æ²¡æœ‰ç¡¬æ€§è¦æ±‚ï¼Œä¸è¿‡æ–°ä¸€ç‚¹çš„Kafkaé›†ç¾¤ä¸Šæœ€å¥½ä¸è¦è¶…è¿‡2000ä¸ªtopic","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565071277,"ip_address":"","comment_id":121007,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27334853467","product_id":100029201,"comment_content":"æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œkafkaé›†ç¾¤ä¸­ï¼ˆ3å°ï¼‰å¯¹topicæ•°é‡å’Œpartitionsæ•°é‡æœ‰é™åˆ¶å—ï¼Ÿæˆ–è€…æœ‰å‚è€ƒå€¼å—ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461571,"discussion_content":"æ²¡æœ‰ç¡¬æ€§è¦æ±‚ï¼Œä¸è¿‡æ–°ä¸€ç‚¹çš„Kafkaé›†ç¾¤ä¸Šæœ€å¥½ä¸è¦è¶…è¿‡2000ä¸ªtopic","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565071277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120995,"user_name":"çš‡å®¶æ•‘æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1326106,"ip_address":"","ucode":"89F1274A3835FE","user_header":"https://static001.geekbang.org/account/avatar/00/14/3c/1a/1806ef25.jpg","comment_is_top":false,"comment_ctime":1565047832,"is_pvip":false,"replies":[{"id":"44533","content":"å¯ä»¥å…ˆç¡®å®šè¿™ä¸ªbrokerçš„è§’è‰²ï¼Œå¦‚æœèº«å…¼æ•°èŒï¼Œå¯ä»¥è€ƒè™‘å…ˆç»™å®ƒå¸ä¸‹ä¸€äº›é‡æ‹…ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565071316,"ip_address":"","comment_id":120995,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23039884312","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚è¯·é—®æ‚¨èƒ½ä¸èƒ½ä»‹ç»kafkaæ€ä¹ˆä¼˜é›…åœæ­¢é›†ç¾¤ä¸­çš„ä¸€å°brokerã€‚å› ä¸ºæ ¹æ®æ‚¨çš„æ–‡ç« æˆ‘äº†è§£åˆ°ä¸€ä¸ªbrokerå¯èƒ½æ˜¯æ•´ä¸ªé›†ç¾¤çš„æ§åˆ¶ä¸­å¿ƒï¼Œä¹Ÿå¯èƒ½æ˜¯æŸå‡ ä¸ªåˆ†åŒºçš„leaderï¼Œå¦‚æœç›´æ¥killè¿›ç¨‹ï¼Œéœ€è¦é›†ç¾¤é‡æ–°é€‰ä¸¾åæ‰æ¢å¤æ­£å¸¸ï¼Œæ„Ÿè§‰æ¯”è¾ƒç²—æš´ï¼ˆä¼šä¸ä¼šæœ‰é€‰ä¸¾å¤±è´¥çš„é£é™©ï¼‰ã€‚å¦‚æœæˆ‘æœ‰ä¸€å°brokeræƒ³çŸ­æš‚ä¸‹çº¿é‡å¯ï¼Œæ€ä¹ˆåšæ¯”è¾ƒå¥½ã€‚","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461567,"discussion_content":"å¯ä»¥å…ˆç¡®å®šè¿™ä¸ªbrokerçš„è§’è‰²ï¼Œå¦‚æœèº«å…¼æ•°èŒï¼Œå¯ä»¥è€ƒè™‘å…ˆç»™å®ƒå¸ä¸‹ä¸€äº›é‡æ‹…ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565071316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220373,"user_name":"èƒ¡å°ç¦¾","can_delete":false,"product_type":"c1","uid":1132315,"ip_address":"","ucode":"1C23B7492C0C9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","comment_is_top":false,"comment_ctime":1590228892,"is_pvip":false,"replies":[{"id":"81431","content":"å®é™…åœºæ™¯ä¸­ç›´æ¥å…³é—­brokerå°±è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1590329556,"ip_address":"","comment_id":220373,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18770098076","product_id":100029201,"comment_content":"åŒé—®ï¼šé›†ç¾¤ä¸­çš„æŸä¸€å°brokerå¦‚ä½•ä¼˜é›…åœæœºï¼Ÿ<br><br>å…ˆé‡å¯ï¼Œå†kill ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496128,"discussion_content":"å®é™…åœºæ™¯ä¸­ç›´æ¥å…³é—­brokerå°±è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590329556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161911,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1576399640,"is_pvip":false,"replies":[{"id":"61667","content":"1. é’ˆå¯¹å•ä¸ªtopicçš„ä¸ä¼šå½±å“å…¶ä»–ä¸»é¢˜<br>2. Kafkaæ”¯æŒuserIDå’ŒclientIDçº§åˆ«çš„é™é€Ÿè®¾ç½®","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1576457686,"ip_address":"","comment_id":161911,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18756268824","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå…³äºé™é€Ÿæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š<br>ç¬¬ä¸€ï¼Œè®¾ç½® topic é™é€Ÿçš„é€‚åˆï¼Œæ˜¯é’ˆå¯¹ä¸»é¢˜å‰¯æœ¬æ‰€åœ¨çš„ broker è®¾ç½®å‚æ•°ï¼Œé‚£ä¹ˆè¿™æ ·ä¼šå½±å“åˆ°å…¶ä»–çš„ä¸»é¢˜å—ï¼Ÿ<br>ç¬¬äºŒï¼Œç°åœ¨ kafka é™é€Ÿæ˜¯æ²¡æœ‰ç§Ÿæˆ·éš”ç¦»çš„ï¼Œå¦‚æœè¦é’ˆå¯¹ä¸€ä¸ªä¸»é¢˜å†…çš„ç§Ÿæˆ·è¿›è¡Œé™é€Ÿï¼Œæœ‰ä»€ä¹ˆå¥½çš„æ–¹æ¡ˆå—","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477907,"discussion_content":"1. é’ˆå¯¹å•ä¸ªtopicçš„ä¸ä¼šå½±å“å…¶ä»–ä¸»é¢˜\n2. Kafkaæ”¯æŒuserIDå’ŒclientIDçº§åˆ«çš„é™é€Ÿè®¾ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576457686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125286,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1566138504,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18746007688","product_id":100029201,"comment_content":"å‡å°‘åˆ†åŒºæ•°ä¼šå¸¦æ¥è‡³å°‘ä¸¤ä¸ªæ˜æ˜¾çš„é—®é¢˜<br>1ï¼šè¢«åˆ é™¤çš„åˆ†åŒºä¸­çš„æ•°æ®æ€ä¹ˆå¤„ç†ï¼Ÿ<br>å¦‚FeveråŒå­¦æ‰€è®²ï¼Œå­˜åœ¨é‚£ç§åªæœ‰ä¸šåŠ¡ä»£ç æ‰çŸ¥é“å°†è¢«å‡å°‘çš„åˆ†åŒºä¸­çš„æ•°æ®è¿ç§»åˆ°å“ªé‡Œçš„æƒ…å†µï¼Œå‡ºç°è¿™ç§æƒ…å†µå°±ä¼šä¸¢å¤±æ•°æ®å•¦ï¼<br>2ï¼šåˆ†åŒºæ•°çš„å˜åŠ¨ä¼šè§¦å‘æ¶ˆè´¹è€…ç»„é‡å¹³è¡¡ï¼Ÿ<br>é‡å¹³è¡¡ä¹Ÿå­˜åœ¨ä¸€å®šçš„é£é™©ï¼Œåº”è¯¥å°½é‡é¿å…<br>æ­¤èŠ‚å¯ä½œä¸ºä¸»é¢˜ç®¡ç†æ“ä½œçš„ç´¢å¼•","like_count":4},{"had_liked":false,"id":175012,"user_name":"é™ˆå›½æ—","can_delete":false,"product_type":"c1","uid":1438037,"ip_address":"","ucode":"83D12F3E79F197","user_header":"https://static001.geekbang.org/account/avatar/00/15/f1/55/8ac4f169.jpg","comment_is_top":false,"comment_ctime":1580526878,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14465428766","product_id":100029201,"comment_content":"1. å‡å°‘åˆ†åŒºæ•°æ„å‘³ç€ å¿…ç„¶è¦è¿›è¡Œæ•°æ®çš„è¿ç§»<br>2. åŒæ—¶è¦è¿›è¡Œleader é‡æ–°é€‰ä¸¾<br>3. è¿™å°±æ„å‘³ç€ä¼šæœ‰æœåŠ¡ä¸å¯ç”¨<br>4. ä¼šå½±å“consumerå®ä¾‹çš„æ¶ˆè´¹ï¼Œéœ€è¦é‡æ–°rebalance","like_count":3,"discussions":[{"author":{"id":1920896,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4f/80/19f946ba.jpg","nickname":"Zain","note":"","ucode":"03EDF7B1BE9CF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374884,"discussion_content":"å‡å°‘åˆ†åŒºå¿…ç„¶è¦è¿›è¡Œæ•°æ®è¿ç§»ï¼ˆå¢åŠ åˆ†åŒºï¼Œå¦‚æœä¸šåŠ¡ä»£ç ä¸å½±å“çš„è¯ï¼Œå®é™…ä¹Ÿæ²¡å•¥å½±å“ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621400670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122733,"user_name":"ban","can_delete":false,"product_type":"c1","uid":1034204,"ip_address":"","ucode":"E523CE97E48266","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","comment_is_top":false,"comment_ctime":1565508671,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14450410559","product_id":100029201,"comment_content":"è€å¸ˆï¼Œã€Šä¸»é¢˜æ¶ˆè€—äº†è¿‡å¤šçš„ç£ç›˜ç©ºé—´ï¼Œé‚£ä¹ˆï¼Œä½ ä¸€å®šè¦æ˜¾å¼åœ°ç”¨jstack å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹ kafka-log-cleaner-thread å‰ç¼€çš„çº¿ç¨‹çŠ¶æ€ã€‚ã€‹<br><br>æŸ¥çœ‹cleaner-thread çº¿ç¨‹ï¼Œæ˜¯ä¸æ˜¯å…ˆæ‰§è¡ŒjpsæŸ¥å‡ºkafakçš„pidï¼Œå†æ‰§è¡Œjps kafkapidï¼Œæ£€æŸ¥æ˜¯å¦cleaner-thread å‰ç¼€çš„çº¿ç¨‹ï¼Œæœ‰å°±è¯´æ˜å¯åŠ¨ç€ï¼Œä½†æ˜¯æˆ‘æŸ¥äº†å‡ ééƒ½æ²¡æœ‰å‘ç°è¿™ä¸ªçº¿ç¨‹ä¿¡æ¯ã€‚æ˜¯ä¸æ˜¯æ“ä½œæ–¹å¼ä¸å¯¹","like_count":3,"discussions":[{"author":{"id":2023401,"avatar":"","nickname":"è€¿å˜‰è‰º","note":"","ucode":"727A22BD41E8AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282258,"discussion_content":"1.  æ‰§è¡Œtop -Hp <pid>ï¼Œä¼šçœ‹åˆ°æ‰€æœ‰æ‰¾ä¸ªè¿›ç¨‹çš„çº¿ç¨‹ä¿¡æ¯ï¼Œä½†æ˜¯ç”±äºçº¿ç¨‹æ•°å¤ªå¤šï¼Œæ²¡å±•å‡ºå…¨éƒ¨\n2. ä½¿ç”¨jstack pid > /opt/1.txtï¼Œæ‰“å°å †æ ˆä¿¡æ¯ï¼Œç„¶åæœç´¢cleanå°±å¯ä»¥ä¼šå‘ç°æœ‰ä¸€ä¸ªâ€œkafka-log-cleaner-threadâ€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591930936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1335348,"avatar":"https://static001.geekbang.org/account/avatar/00/14/60/34/3baa1dd1.jpg","nickname":"ding","note":"","ucode":"C6D81819CB5D75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220166,"discussion_content":"æˆ‘ä¹Ÿå‘ç°åŒæ ·çš„é—®é¢˜ï¼ŒkafkaèŠ‚ç‚¹ä¸Šæ•°æ®retentionè¡Œä¸ºæ˜¯æ­£å¸¸çš„ï¼Œè¿‡æœŸçš„æ•°æ®ä¹Ÿè‡ªåŠ¨åˆ é™¤äº†ï¼Œä½†æ˜¯jstackå°±æ˜¯æ²¡æœ‰cleaner-thread","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585839076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279667,"user_name":"å½’é›¶","can_delete":false,"product_type":"c1","uid":1103208,"ip_address":"","ucode":"C99B8E93009A46","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","comment_is_top":false,"comment_ctime":1613897001,"is_pvip":true,"replies":[{"id":"101806","content":"ä¸éœ€è¦ã€‚æŒ‡å®š2~3ä¸ªå°±å¯ä»¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1614217298,"ip_address":"","comment_id":279667,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5908864297","product_id":100029201,"comment_content":"è€å¸ˆï¼Œåœ¨ä¿®æ”¹ä¸»é¢˜çš„æ—¶å€™ï¼Œå‘½ä»¤--bootstrap-server broker_host:port æŒ‡å®šçš„æ˜¯ä¸€ä¸ªbrokerï¼Œå¦‚æœä¸€ä¸ªé›†ç¾¤æœ‰å¤šä¸ªbrokerï¼Œéœ€è¦ä¾æ¬¡æ‰§è¡Œå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515820,"discussion_content":"ä¸éœ€è¦ã€‚æŒ‡å®š2~3ä¸ªå°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614217298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277206,"user_name":"~","can_delete":false,"product_type":"c1","uid":2138952,"ip_address":"","ucode":"D9A7E401B3C50F","user_header":"https://static001.geekbang.org/account/avatar/00/20/a3/48/bd810564.jpg","comment_is_top":false,"comment_ctime":1612316456,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5907283752","product_id":100029201,"comment_content":"æ•°æ®å¦‚ä½•å­˜å‚¨æ˜¯æ¯”è¾ƒå¤§çš„é—®é¢˜ï¼Œå¦‚æœå•çº¯çš„ç§»æ¤åˆ°å…¶ä»–åˆ†åŒºçš„åç»­ï¼Œä¼šå¯¼è‡´æ¶ˆæ¯æ—¶é—´æˆ³çš„æ’åˆ—ç´Šä¹±ï¼Œå¯¹Flinkæˆ–Sparkç­‰ä¾èµ–æ—¶é—´çª—å£çš„æ¶ˆè´¹ä¸šåŠ¡é€ æˆå½±å“ï¼›æ„Ÿè§‰ç›´æ¥é‡æ–°åˆ›å»ºå°‘åˆ†åŒºçš„æ–°ä¸»é¢˜ï¼Œå°†æ¶ˆæ¯é‡æ–°æ‹‰å–å­˜å‚¨ã€‚","like_count":1},{"had_liked":false,"id":277023,"user_name":"é»„æŒ¯æ¸¸","can_delete":false,"product_type":"c1","uid":1858989,"ip_address":"","ucode":"3927C81CAEDBE2","user_header":"","comment_is_top":false,"comment_ctime":1612234768,"is_pvip":false,"replies":[{"id":"101022","content":"è¯´æ˜å¢åŠ çš„3ä¸ªåˆ†åŒºçš„leaderå‰¯æœ¬éƒ½åœ¨é‚£ä¸ªbrokerä¸Š","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1612833926,"ip_address":"","comment_id":277023,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5907202064","product_id":100029201,"comment_content":"å¢åŠ äº†3ä¸ªåˆ†åŒºåï¼Œå‘ç°é›†ç¾¤é‡Œåªæœ‰ä¸€ä¸ªbrokerå¢åŠ äº†ï¼Œå…¶ä»–brokerè¿˜æ˜¯åªæœ‰ä¸€ä¸ªï¼Œæ˜¯ä»€ä¹ˆåŸå› å‘¢","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514905,"discussion_content":"è¯´æ˜å¢åŠ çš„3ä¸ªåˆ†åŒºçš„leaderå‰¯æœ¬éƒ½åœ¨é‚£ä¸ªbrokerä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612833926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250433,"user_name":"Geek_4254d8","can_delete":false,"product_type":"c1","uid":1635021,"ip_address":"","ucode":"806A8116A3177F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/MIbA6MRiblftUawVWvKt6jvgOvTwibKsTCJhh5y5vKEuURtcEZDtylwGFfekZBanmwIgNSJTm9YMmZlPPicDQ14Iw/132","comment_is_top":false,"comment_ctime":1601085583,"is_pvip":false,"replies":[{"id":"91722","content":"å³ä½¿æ¶ˆè´¹è€…ç»„æ˜¯activeçŠ¶æ€ï¼ŒKafkaä¾ç„¶å¯ä»¥æ¸…ç†__consumer_offsetsçš„è¿‡æœŸæ•°æ®ï¼Œè€Œä¸å½±å“æ¶ˆè´¹è€…ç»„çš„ä½ç§»ä¿å­˜ã€‚å¦‚æœ__consumer_offsetså ç”¨å¤ªå¤šèµ„æºï¼Œé€šå¸¸éƒ½æ˜¯å·²çŸ¥çš„bugé€ æˆçš„ã€‚æ¯”å¦‚cleanerçº¿ç¨‹æŒ‚æ‰äº†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1601177090,"ip_address":"","comment_id":250433,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5896052879","product_id":100029201,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œåœ¨è°ˆåˆ°æ¶ˆè´¹è€…ç»„å†²å½­äº¨å…¨æµç¨‹çš„æ—¶å€™ä¸æ˜¯æåˆ°ï¼Œåªæœ‰emptyçŠ¶æ€çš„ç»„æ‰ä¼šåˆ é™¤è¿‡æœŸä½ç§»æ•°æ®ï¼Œé‚£__consumer_offsets å ç”¨å¤ªå¤šçš„ç£ç›˜æœ‰æ²¡å¯èƒ½æ˜¯æ¶ˆè´¹è€…ç»„ä¸€ç›´å¾ˆç¨³å®šï¼Œæ²¡æœ‰å‡ºç°è¿‡é‡å¹³è¡¡å¯¼è‡´é•¿æ—¶é—´æ²¡è¿›å…¥emptyçŠ¶æ€å‘¢","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506205,"discussion_content":"å³ä½¿æ¶ˆè´¹è€…ç»„æ˜¯activeçŠ¶æ€ï¼ŒKafkaä¾ç„¶å¯ä»¥æ¸…ç†__consumer_offsetsçš„è¿‡æœŸæ•°æ®ï¼Œè€Œä¸å½±å“æ¶ˆè´¹è€…ç»„çš„ä½ç§»ä¿å­˜ã€‚å¦‚æœ__consumer_offsetså ç”¨å¤ªå¤šèµ„æºï¼Œé€šå¸¸éƒ½æ˜¯å·²çŸ¥çš„bugé€ æˆçš„ã€‚æ¯”å¦‚cleanerçº¿ç¨‹æŒ‚æ‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601177090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1635021,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/MIbA6MRiblftUawVWvKt6jvgOvTwibKsTCJhh5y5vKEuURtcEZDtylwGFfekZBanmwIgNSJTm9YMmZlPPicDQ14Iw/132","nickname":"Geek_4254d8","note":"","ucode":"806A8116A3177F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313545,"discussion_content":"è€å¸ˆï¼Œä½ å¥½ã€‚æƒ³å†è¯·æ•™ä¸€ä¸‹ã€‚ä¸Šé¢çš„å›å¤ï¼Œkafka æœ¬èº«ä¼šæ ¹æ®offsets.retention.minutes è‡ªåŠ¨åˆ é™¤__consumer_offsetsçš„è¿‡æœŸæ•°æ®ï¼Œä½†æ˜¯å¦‚æœæ¶ˆè´¹è€…ç»„è¿›å…¥emptyï¼Œkafkaä¼šä¸»åŠ¨æ¸…ç†è¯¥æ¶ˆè´¹ç»„å¯¹åº”çš„è¿‡æœŸ__consumer_offsetsæ•°æ® æ˜¯è¿™æ ·ç†è§£å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603071297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214865,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1588837898,"is_pvip":true,"replies":[{"id":"79559","content":"Clientsç»™brokerå‘é€çš„METADATAè¯·æ±‚çš„responseä¸­æ˜¯åŒ…å«controller idçš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1588845465,"ip_address":"","comment_id":214865,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5883805194","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè‹¥åœ¨kafka-topics.sh --bootstrap-server broker_host:port å‘½ä»¤ä¸­ï¼Œæˆ‘è®¾ç½®çš„--bootstrap-serverä¸æ˜¯kafka controller çš„broker_hostï¼Œ è¯·é—®kafka-topicçš„clientæ˜¯å¦‚ä½•æ‰¾åˆ°kafka controllerï¼Ÿ éš¾é“æ˜¯clientä¸å…¶ä»–çš„brokerè¿›è¡Œè¿æ¥åï¼Œå†å‘é€å…ƒæ•°æ®è¯·æ±‚æ¥è·å–kafka controllerçš„ä¿¡æ¯å—ï¼Ÿä½†æˆ‘çœ‹26ç« èŠ‚çš„æ—¶å€™ï¼Œå…ƒæ•°æ®ä¸­å¹¶æ²¡æœ‰åŒ…å«kafka controllerä¿¡æ¯","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494226,"discussion_content":"Clientsç»™brokerå‘é€çš„METADATAè¯·æ±‚çš„responseä¸­æ˜¯åŒ…å«controller idçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588845465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158222,"user_name":"man1s","can_delete":false,"product_type":"c1","uid":1466953,"ip_address":"","ucode":"FFDB6B52F65A1B","user_header":"https://static001.geekbang.org/account/avatar/00/16/62/49/6332c99b.jpg","comment_is_top":false,"comment_ctime":1575353403,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5870320699","product_id":100029201,"comment_content":"ä¸å…è®¸å‡å°‘åˆ†åŒºçš„åŸå› åº”è¯¥æ˜¯æ²¡æ³•ç»´æŠ¤groupçš„offset","like_count":1},{"had_liked":false,"id":145421,"user_name":"è¥¿çº¢æŸ¿ç‰›ç”·","can_delete":false,"product_type":"c1","uid":1118815,"ip_address":"","ucode":"DD028D2A0E06DA","user_header":"https://static001.geekbang.org/account/avatar/00/11/12/5f/ea25d673.jpg","comment_is_top":false,"comment_ctime":1572270224,"is_pvip":false,"replies":[{"id":"56143","content":"ä¸éœ€è¦çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1572309162,"ip_address":"","comment_id":145421,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867237520","product_id":100029201,"comment_content":"è€å¸ˆé—®ä¸‹å¦‚æœkafkaæ–°å¢é›†ç¾¤èŠ‚ç‚¹ï¼Œéœ€è¦rebalanceå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472388,"discussion_content":"ä¸éœ€è¦çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572309162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339421,"user_name":"wang-possible","can_delete":false,"product_type":"c1","uid":1268939,"ip_address":"","ucode":"5639E96CD4F833","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/cb/65b38e27.jpg","comment_is_top":false,"comment_ctime":1648092272,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648092272","product_id":100029201,"comment_content":"æŒ‰ç…§æ‚¨ç»™å‡ºçš„æ–¹æ³•åˆ é™¤topicï¼Œåœ¨åˆ é™¤ç£ç›˜åï¼Œé‡å»ºtopicï¼Œå‘ç°æ‰€æœ‰çš„topicçš„ isr å‡å°‘åˆ°ä¸€åŠä»¥ä¸‹ï¼Œè¿™æ˜¯é‡åˆ°äº†åˆ†åŒºå……åˆ†é…äº†å—ï¼Ÿå¦‚ä½•å‘ç°topicå……åˆ†é…","like_count":0},{"had_liked":false,"id":330710,"user_name":"å°ä»™","can_delete":false,"product_type":"c1","uid":1866677,"ip_address":"","ucode":"9F94043DFCEC3A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq6pWvKsV4rzQ62z5MDEjaEU5MbDfmzbA62kUgoqia2tgKIIxw4ibkDhF7W48iat5dT8UB9Adky2NuzQ/132","comment_is_top":false,"comment_ctime":1642128798,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642128798","product_id":100029201,"comment_content":"å‡è®¾å®¢æˆ·ç«¯æŒ‡å®šäº† topicA çš„æ•°æ®å†™å…¥åˆ°åˆ†åŒºAï¼›å¦‚æœå‡å°‘åˆ†åŒºï¼ˆå‡è®¾åˆ†åŒºAè¢«å»æ‰äº†ï¼‰<br>1.é‚£ä¹ˆ kafka è‡ªå·±ä¹Ÿä¸çŸ¥é“åˆ†åŒºAçš„æ•°æ®å¦‚ä½•åˆ†é…åˆ°å…¶ä»–åˆ†åŒº<br>2.å¦‚æœå®¢æˆ·ç«¯å†æ¬¡å‘é€æ¶ˆæ¯åˆ° topicA , æ¶ˆæ¯æ— æ³•å†å®šä½åˆ°ä¹‹å‰çš„åˆ†åŒºAï¼Œä¹Ÿä¼šé€ æˆé”™è¯¯","like_count":0},{"had_liked":false,"id":281384,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1724215,"ip_address":"","ucode":"FA8E8FD88886AF","user_header":"https://static001.geekbang.org/account/avatar/00/1a/4f/37/ad1ca21d.jpg","comment_is_top":false,"comment_ctime":1614734587,"is_pvip":true,"replies":[{"id":"102227","content":"éœ€è¦åˆ é™¤å¯¹åº”topicçš„é¡¹","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1614821725,"ip_address":"","comment_id":281384,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1614734587","product_id":100029201,"comment_content":"ä¸€æ—¦ä½ ç¢°åˆ°ä¸»é¢˜æ— æ³•åˆ é™¤çš„é—®é¢˜ï¼Œè€å¸ˆæåˆ°çš„æ–¹æ³•ï¼Œé‡Œé¢æ²¡æœ‰æåˆ°åˆ é™¤zkèŠ‚ç‚¹ä¸Š topic èŠ‚ç‚¹ä»¥åŠå¯¹åº”çš„configèŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹éœ€è¦åˆ é™¤å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516384,"discussion_content":"éœ€è¦åˆ é™¤å¯¹åº”topicçš„é¡¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614821725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276229,"user_name":"hadoop_admin","can_delete":false,"product_type":"c1","uid":1300466,"ip_address":"","ucode":"7EAFA775505C7E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGMphabeneYXs9otkAtr67RvxJClDa7jPe7w8yExg4YaS2FGJruDKMj5yN1E90o6MFibnicH8gM0ibg/132","comment_is_top":false,"comment_ctime":1611839030,"is_pvip":false,"replies":[{"id":"100451","content":"è¿™ä¸ªæŸ¥çš„æ˜¯scala consumerçš„groupä½ç§»ï¼Œç›®å‰scala consumerå·²ç»åºŸå¼ƒè®¸ä¹…äº†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1612143238,"ip_address":"","comment_id":276229,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611839030","product_id":100029201,"comment_content":"æŸ¥çœ‹æ¶ˆè´¹è€…ä¿¡æ¯ ç”¨è¿™ä¸ªæ˜¯ä¸æ˜¯æ›´æ–¹ä¾¿ä¸€äº›ï¼š bin&#47;kafka-consumer-groups.sh --zookeeper zkserver:2181 ---describe ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514635,"discussion_content":"è¿™ä¸ªæŸ¥çš„æ˜¯scala consumerçš„groupä½ç§»ï¼Œç›®å‰scala consumerå·²ç»åºŸå¼ƒè®¸ä¹…äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612143238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269809,"user_name":"æ–‡æ•¦å¤","can_delete":false,"product_type":"c1","uid":1195258,"ip_address":"","ucode":"B8F4A6BD5D7805","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/fa/e2990931.jpg","comment_is_top":false,"comment_ctime":1608792932,"is_pvip":false,"replies":[{"id":"98145","content":"å¯ä»¥ç”¨å‘½ä»¤æ‰‹åŠ¨è¿ç§»ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1609205087,"ip_address":"","comment_id":269809,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1608792932","product_id":100029201,"comment_content":"æŸä¸€ä¸ªä¸»é¢˜çš„çš„æ‰€æœ‰ leader å‰¯æœ¬éƒ½æŒ¤åˆ°äº†ä¸€ä¸ª brokerä¸Šï¼Œè¿™ç§æƒ…å†µåº”è¯¥å±äºåˆ†å¸ƒæœ‰é—®é¢˜å§ï¼Ÿå¦‚ä½•å¤„ç†ä¸ºå¥½äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512400,"discussion_content":"å¯ä»¥ç”¨å‘½ä»¤æ‰‹åŠ¨è¿ç§»ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609205087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390752,"discussion_content":"ä½¿ç”¨åˆ†åŒºé‡å¹³è¡¡å·¥å…·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630026904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260515,"user_name":"æ…ç‹¬æ˜å¼º","can_delete":false,"product_type":"c1","uid":1965699,"ip_address":"","ucode":"DC2F7F2C0C8F60","user_header":"https://static001.geekbang.org/account/avatar/00/1d/fe/83/df562574.jpg","comment_is_top":false,"comment_ctime":1605053794,"is_pvip":false,"replies":[{"id":"94909","content":"æœ‰ç‚¹æ²¡æ‡‚ã€‚ã€‚â€œè‡ªåŠ¨æäº¤æ¨¡å¼ï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹æœªä¸»åŠ¨æäº¤æ¶ˆè´¹è¿›åº¦ï¼Œé€šè¿‡kafkatoolæŸ¥çœ‹æ¶ˆè´¹è€…ç»„ï¼Œæ˜¾ç¤ºæ¶ˆè´¹ä½ç§»æœªæäº¤â€  --- å¦‚æœæ˜¯è‡ªåŠ¨æäº¤ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°ä½ç§»æœªæäº¤ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1605423505,"ip_address":"","comment_id":260515,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1605053794","product_id":100029201,"comment_content":"è€å¸ˆè¯·æ•™æœ€è¿‘é‡åˆ°çš„é—®é¢˜: è‡ªåŠ¨æäº¤æ¨¡å¼ï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹æœªä¸»åŠ¨æäº¤æ¶ˆè´¹è¿›åº¦ï¼Œé€šè¿‡kafkatoolæŸ¥çœ‹æ¶ˆè´¹è€…ç»„ï¼Œæ˜¾ç¤ºæ¶ˆè´¹ä½ç§»æœªæäº¤ï¼Œlag=1ã€‚æ¶ˆè´¹è€…åœ¨ä¸‹ä¸€æ¬¡æ‹‰å–æ¶ˆæ¯æ—¶ï¼Œå´ä¸èƒ½æŠŠæœªæäº¤çš„æ¶ˆæ¯å†æ¬¡æ‹‰å–åˆ°ï¼Œè¿™ä¸ªæ˜¯brokerç«¯æœ‰å¯¹æ‹‰å–è¿‡çš„æ¶ˆæ¯è¿›è¡Œå¤„ç†å—ï¼Ÿè‡ªå·±åœ¨æ¶ˆè´¹ç«¯è°ƒè¯•ï¼Œæ¶ˆè´¹ç«¯ç¬¬äºŒæ¬¡å»æ‹‰å–æ•°æ®çš„è¯·æ±‚ï¼Œè¯·æ±‚å‚æ•°çš„åˆ†åŒºçš„offsetè¿˜æ˜¯é‚£ä¸ªæœªæäº¤çš„ã€‚brokerç«¯è¿™æ ·åšå¯ä»¥é¿å…æ¶ˆæ¯æ¶ˆè´¹å¼‚å¸¸è€Œé˜»å¡ï¼Œæƒ³çŸ¥é“brokerç«¯æ€ä¹ˆå¤„ç†æ¶ˆè´¹è¿‡ä¸€æ¬¡æœªæäº¤çš„æ¶ˆæ¯ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509216,"discussion_content":"æœ‰ç‚¹æ²¡æ‡‚ã€‚ã€‚â€œè‡ªåŠ¨æäº¤æ¨¡å¼ï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹æœªä¸»åŠ¨æäº¤æ¶ˆè´¹è¿›åº¦ï¼Œé€šè¿‡kafkatoolæŸ¥çœ‹æ¶ˆè´¹è€…ç»„ï¼Œæ˜¾ç¤ºæ¶ˆè´¹ä½ç§»æœªæäº¤â€  --- å¦‚æœæ˜¯è‡ªåŠ¨æäº¤ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°ä½ç§»æœªæäº¤ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605423505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1965699,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/fe/83/df562574.jpg","nickname":"æ…ç‹¬æ˜å¼º","note":"","ucode":"DC2F7F2C0C8F60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326018,"discussion_content":"åœ¨æ‰‹åŠ¨æäº¤æ¨¡å¼ï¼Œæ¶ˆè´¹ç«¯ç¬¬ä¸€æ¬¡å»æ‹‰å–æ¶ˆæ¯Aï¼Œæœªæ‰‹åŠ¨æäº¤ã€‚ç¬¬äºŒæ¬¡å»æ‹‰å–æ—¶ï¼Œæ¶ˆæ¯Aä¸èƒ½è¢«æ‹‰å–åˆ°å†æ¬¡å»æ¶ˆè´¹ï¼Œè€å¸ˆï¼Œå‰é¢æ˜¯æˆ‘è¯´çš„ä¸æ˜¯å¾ˆæ¸…æ¥š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605500627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1965699,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/fe/83/df562574.jpg","nickname":"æ…ç‹¬æ˜å¼º","note":"","ucode":"DC2F7F2C0C8F60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326015,"discussion_content":"æ‰‹åŠ¨æäº¤æ¨¡å¼ï¼ŒğŸ˜‚ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605500414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248299,"user_name":"Eco","can_delete":false,"product_type":"c1","uid":1373230,"ip_address":"","ucode":"5459B494753183","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/x86UN2kFbJGGwiaw7yeVtyaf05y5eZmdOciaAF09WEBRVicbPGsej1b62UAH3icjeJqvibVc6aqB0EuFwDicicKKcF47w/132","comment_is_top":false,"comment_ctime":1600093749,"is_pvip":false,"replies":[{"id":"91217","content":"â€œè¿˜æ˜¯è¯´åªæ˜¯æ”¹äº†ä¸ªå‚æ•°ç„¶åå› ä¸ºä½ æåˆ°çš„å®‰å…¨çš„é—®é¢˜â€ --- hmmm, ä½ åŸºæœ¬ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯è¿™æ ·ï¼Œå†…éƒ¨è¿˜æ˜¯è¦ä½¿ç”¨ZooKeeperçš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1600131135,"ip_address":"","comment_id":248299,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1600093749","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œä¸ä½¿ç”¨--zookeeperçš„æ„æ€æ˜¯å®Œå…¨ä¸ç”¨zookeeperæ¥è¿›è¡Œé€‰ä¸»ã€ä¿å­˜å…ƒæ•°æ®äº†å—ï¼Ÿè¿˜æ˜¯è¯´åªæ˜¯æ”¹äº†ä¸ªå‚æ•°ç„¶åå› ä¸ºä½ æåˆ°çš„å®‰å…¨çš„é—®é¢˜ï¼Œå†…éƒ¨å…¶å®è¿˜æ˜¯åœ¨ä½¿ç”¨zookeeperå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505613,"discussion_content":"â€œè¿˜æ˜¯è¯´åªæ˜¯æ”¹äº†ä¸ªå‚æ•°ç„¶åå› ä¸ºä½ æåˆ°çš„å®‰å…¨çš„é—®é¢˜â€ --- hmmm, ä½ åŸºæœ¬ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯è¿™æ ·ï¼Œå†…éƒ¨è¿˜æ˜¯è¦ä½¿ç”¨ZooKeeperçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600131135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243788,"user_name":"è¢å¸…","can_delete":false,"product_type":"c1","uid":1084993,"ip_address":"","ucode":"A71A89B9F1BD69","user_header":"https://static001.geekbang.org/account/avatar/00/10/8e/41/709e9677.jpg","comment_is_top":false,"comment_ctime":1598277163,"is_pvip":true,"replies":[{"id":"89832","content":"min.insync.replicasæ˜¯æ§åˆ¶å†™å…¥å‰¯æœ¬çš„å‚æ•°ï¼Œä¸åˆ†åŒºå…³ç³»ä¸å¤§å•Šï¼šï¼‰ ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1598316507,"ip_address":"","comment_id":243788,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1598277163","product_id":100029201,"comment_content":"å‡å°‘ åˆ†åŒºå¯èƒ½ä¼šé€ æˆï¼Œ replication.factor &lt;  min.insync.replicasã€‚  è¿™ä¸ªæ—¶å€™æ¶ˆæ¯æ˜¯æ— æ³•è¢«æäº¤çš„","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504396,"discussion_content":"min.insync.replicasæ˜¯æ§åˆ¶å†™å…¥å‰¯æœ¬çš„å‚æ•°ï¼Œä¸åˆ†åŒºå…³ç³»ä¸å¤§å•Šï¼šï¼‰ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598316507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393650,"discussion_content":"è€å“¥ï¼Œå›å»ä»å¤´å¼€å§‹çœ‹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631533727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233077,"user_name":"flame198?","can_delete":false,"product_type":"c1","uid":1370518,"ip_address":"","ucode":"40E3D4BAD11C13","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epCnxicMqCiah8iallgaQwvxgoQ6gPkcOYib3k8KFWA0ibZjDG4NL5MLFLu3Rz9BicQTEKrWjKb9PU2tXhA/132","comment_is_top":false,"comment_ctime":1594211540,"is_pvip":false,"replies":[{"id":"86017","content":"ä½ çš„produceräº§ç”Ÿçš„æ¶ˆæ¯æ˜¯å¦è®¾ç½®äº†keyå‘¢ï¼Ÿå¦å¤–é»˜è®¤æƒ…å†µä¸‹produceråº”è¯¥éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½æ„è¯†åˆ°æ–°åˆ†åŒºçš„åŠ å…¥<br>","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1594256211,"ip_address":"","comment_id":233077,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594211540","product_id":100029201,"comment_content":"ç°åœ¨è¿™ä¸ªé—®é¢˜æçš„æœ‰ç‚¹æ™šäº†ï¼Œè¯·å¤§ç¥å›ç­”ï¼Œæœ€è¿‘é‡åˆ°ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¸»é¢˜åˆ†åŒºä»1å¢åŠ åˆ°3çš„æ—¶å€™æ­£å¸¸ï¼Œä»3å¢åŠ åˆ°24ä»¥åï¼Œè¿˜æ˜¯åªæœ‰3ä¸ªåˆ†åŒºæœ‰æ•°æ®ï¼Œå…¶ä»–åˆ†åŒºæ²¡æœ‰ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500881,"discussion_content":"ä½ çš„produceräº§ç”Ÿçš„æ¶ˆæ¯æ˜¯å¦è®¾ç½®äº†keyå‘¢ï¼Ÿå¦å¤–é»˜è®¤æƒ…å†µä¸‹produceråº”è¯¥éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½æ„è¯†åˆ°æ–°åˆ†åŒºçš„åŠ å…¥\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594256211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211255,"user_name":"é©¬å‰è¾‰","can_delete":false,"product_type":"c1","uid":1854657,"ip_address":"","ucode":"4265EFBD2BB7BD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVIjh4T1akib5iav5IIGjXB9x98p9Y80STRcwpMDqxfGLrMvHamxlxEqLMTpiayWFWSNpBcbGwkRjRw/132","comment_is_top":false,"comment_ctime":1587934612,"is_pvip":false,"replies":[{"id":"78555","content":"æœ€å¥½è´´ä¸€ä¸‹oomçš„stacktraceã€‚å¦å¤–æŠŠJVMçš„gcé…ç½®ä¹Ÿå¤§è‡´è¯´ä¸€ä¸‹ï¼Œæ¯”å¦‚ç”¨çš„ç‰ˆæœ¬ï¼Œä»€ä¹ˆgcæ”¶é›†å™¨ç­‰ã€‚å…‰ä»æè¿°æ¥çœ‹å¾ˆéš¾ç›´æ¥å®šä½é—®é¢˜~","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1587950723,"ip_address":"","comment_id":211255,"utype":1}],"discussion_count":5,"race_medal":0,"score":"1587934612","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè€å¸ˆï¼Œä½ è¿™è¾¹æœ‰é‡åˆ°è¿‡ kafka å †å†…å­˜å¼‚å¸¸çš„æƒ…å†µå—ï¼Ÿ ä¸€å¼€å§‹ç»™çš„16G å †å†…å­˜ä½¿ç”¨åˆ°99%  æ­¤å°çš„kafka èŠ‚ç‚¹ æŒ‚äº†ï¼Œæˆ‘ä»¬åŠ å †å†…å­˜åˆ°24G é‡å¯kafka å¤§çº¦20G å°æ—¶ä¹‹åï¼Œå°±ä¸€ç›´ æ˜¯full gc å †å†…å­˜ä½¿ç”¨ç‡ åªå‡ä¸é™ çŸ¥é“kafkaèŠ‚ç‚¹è‡ªå·±å†æŒ‚äº†ï¼Œå…¶ä»–çš„èŠ‚ç‚¹çš„å †å†…å­˜ä¸º16G ä½†æ˜¯çœ‹æ—¥å¿—ï¼Œè¾¾åˆ°ä¸€å®šçš„å³°å€¼ä¹‹åï¼Œä¼šè‡ªåŠ¨ä¸‹é™ï¼Œè€Œå‡ºé—®é¢˜çš„è¿™å°åå°æ—¥å¿—çœ‹ï¼Œå †å†…å­˜çš„ä½¿ç”¨ç‡ä¼šä¸€ç›´åœ¨99 % çŸ¥é“kafkaæ­»å»ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493233,"discussion_content":"æœ€å¥½è´´ä¸€ä¸‹oomçš„stacktraceã€‚å¦å¤–æŠŠJVMçš„gcé…ç½®ä¹Ÿå¤§è‡´è¯´ä¸€ä¸‹ï¼Œæ¯”å¦‚ç”¨çš„ç‰ˆæœ¬ï¼Œä»€ä¹ˆgcæ”¶é›†å™¨ç­‰ã€‚å…‰ä»æè¿°æ¥çœ‹å¾ˆéš¾ç›´æ¥å®šä½é—®é¢˜~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587950723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1529871,"avatar":"https://static001.geekbang.org/account/avatar/00/17/58/0f/c412b4a9.jpg","nickname":"Curry","note":"","ucode":"AABD3AA2EB2C95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257175,"discussion_content":"å“¥ä»¬è§£å†³äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588522820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1854657,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVIjh4T1akib5iav5IIGjXB9x98p9Y80STRcwpMDqxfGLrMvHamxlxEqLMTpiayWFWSNpBcbGwkRjRw/132","nickname":"é©¬å‰è¾‰","note":"","ucode":"4265EFBD2BB7BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":253429,"discussion_content":"Java HotSpot(TM) 64-Bit Server VM (25.151-b12) for linux-amd64 JRE (1.8.0_151-b12), built on Sep  5 2017 19:20:58 by &#34;java_re&#34; with gc\nc 4.3.0 20080428 (Red Hat 4.3.0-8)\nMemory: 4k page, physical 32780016k(18322568k free), swap 524284k(118092k free)\nCommandLine flags: -XX:+ExplicitGCInvokesConcurrent -XX:GCLogFileSize=104857600 -XX:InitialHeapSize=17179869184 -XX:InitiatingHeapOccu\npancyPercent=35 -XX:+ManagementServer -XX:MaxGCPauseMillis=20 -XX:MaxHeapSize=17179869184 -XX:NumberOfGCLogFiles=10 -XX:+PrintGC -XX:+\nPrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC -XX:+\nUseGCLogFileRotation","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588233387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1854657,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVIjh4T1akib5iav5IIGjXB9x98p9Y80STRcwpMDqxfGLrMvHamxlxEqLMTpiayWFWSNpBcbGwkRjRw/132","nickname":"é©¬å‰è¾‰","note":"","ucode":"4265EFBD2BB7BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":253426,"discussion_content":"è¿™é‡Œï¼Œæ¢å¤ï¼Œä¸èƒ½ç»™å‡ºå…¨çš„æ—¥å¿—ï¼ŒæŠ±æ­‰ï¼Œéº»çƒ¦ç»™ä¸ªé‚®ç®±å§ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588233077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1854657,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVIjh4T1akib5iav5IIGjXB9x98p9Y80STRcwpMDqxfGLrMvHamxlxEqLMTpiayWFWSNpBcbGwkRjRw/132","nickname":"é©¬å‰è¾‰","note":"","ucode":"4265EFBD2BB7BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":253423,"discussion_content":"kafkaç‰ˆæœ¬ä¸ºï¼š kafka_2.11-1.0.0\n\n/usr/java/latest/bin/java -Xmx16G -Xms16G -server -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:+ExplicitGCInvokesConcurrent -Djava.awt.headless=true -Xloggc:/home/hadoop/kafka/bin/../logs/kafkaServer-gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=100M -Dcom.sun.management.jmxremote -\n\nåå°æŠ¥é”™æ—¥å¿—ï¼š vim kafkaServer-gc.log.0.current\n   [Eden: 0.0B(816.0M)->0.0B(816.0M) Survivors: 0.0B->0.0B Heap: 15.8G(16.0G)->15.8G(16.0G)]\n [Times: user=0.08 sys=0.00, real=0.06 secs]\n2020-04-25T06:41:47.664+0800: 4020854.993: [GC concurrent-root-region-scan-start]\n2020-04-25T06:41:47.664+0800: 4020854.993: [GC concurrent-root-region-scan-end, 0.0000572 secs]\n2020-04-25T06:41:47.664+0800: 4020854.993: [GC concurrent-mark-start]\n2020-04-25T06:41:47.665+0800: 4020854.994: [Full GC (Allocation Failure)\n\nåˆ°è¿™é‡Œï¼Œkafka è¿›ç¨‹å°±æ­»æ‰äº†ï¼ŒæŒç»­çš„æ—¶é—´å¤§çº¦ 20å°æ—¶ï¼Œå†æ¬¡é‡å¯ä¸€ä¸‹ï¼Œè¿˜æ˜¯ç­‰åˆ° å †å†…å­˜ä½¿ç”¨å®Œï¼Œä¸é‡Šæ”¾ kafka è¿›ç¨‹è¿˜æ˜¯ä¼šæ­»æ‰\n\nåå°æ—¥å¿—æŠ¥é”™\n\nException: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread &#34;kafka-request-handler-30&#34;\n...\n\næˆ‘ä¿ç•™çš„å½“æ—¶çš„æ—¥å¿—ï¼Œè€å¸ˆå¯ä»¥ç»™æœ‰é‚®ç®±å—ï¼Ÿæˆ‘å¯ä»¥æŠŠæ—¥å¿—æ‰“åŒ…ç»™æ‚¨ï¼Œå¸®å¿™åˆ†æä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588233040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133286,"user_name":"ç”µå…‰ç«çŸ³","can_delete":false,"product_type":"c1","uid":1013160,"ip_address":"","ucode":"3AD33BB4AA940F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg","comment_is_top":false,"comment_ctime":1568476436,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568476436","product_id":100029201,"comment_content":"ä¸èƒ½å‡å°‘åˆ†åŒºæ˜¯å¦æ˜¯å› ä¸ºå­˜é‡æ•°æ®ä¸å¥½è¿ç§»å¯¼è‡´çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":129210,"user_name":"Mick","can_delete":false,"product_type":"c1","uid":1391216,"ip_address":"","ucode":"5CCE3E2BDB110A","user_header":"https://static001.geekbang.org/account/avatar/00/15/3a/70/a874d69c.jpg","comment_is_top":false,"comment_ctime":1567063089,"is_pvip":false,"replies":[{"id":"48165","content":"ç¡®è®¤æœ‰topicè¢«åˆ›å»ºå‡ºæ¥äº†å—","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1567126510,"ip_address":"","comment_id":129210,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1567063089","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„kafka ç‰ˆæœ¬æ˜¯kafka_2.12-2.3.0 ä½†æˆ‘è¿è¡Œè¿™ <br>bin&#47;kafka-topics.sh --bootstrap-server xxx.xxx.xxx.xxx:9092 --list <br>ä»€ä¹ˆä¹Ÿä¸è¾“å‡ºè¯·é—®ä¸‹æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿä¹Ÿä¸æŠ¥é”™ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465334,"discussion_content":"ç¡®è®¤æœ‰topicè¢«åˆ›å»ºå‡ºæ¥äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567126510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1391216,"avatar":"https://static001.geekbang.org/account/avatar/00/15/3a/70/a874d69c.jpg","nickname":"Mick","note":"","ucode":"5CCE3E2BDB110A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6867,"discussion_content":"åˆ›å»ºäº†ï¼Œæˆ‘ç”¨kafka tool èƒ½çœ‹åˆ°ï¼Œæœ‰ç‚¹å¥‡æ€ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567149157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129112,"user_name":"å°å¯çˆ±","can_delete":false,"product_type":"c1","uid":1470958,"ip_address":"","ucode":"5379D1F00E8796","user_header":"https://static001.geekbang.org/account/avatar/00/16/71/ee/31b19304.jpg","comment_is_top":false,"comment_ctime":1567044112,"is_pvip":false,"replies":[{"id":"48169","content":"å–å†³äºä½ æ˜¯å¦æƒ³è¦è¿ç§»ï¼Œå› æ­¤é»˜è®¤æ˜¯ä¸ä¼šè‡ªåŠ¨è¿ç§»çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1567126784,"ip_address":"","comment_id":129112,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1567044112","product_id":100029201,"comment_content":"å¢åŠ åˆ†åŒºå¦‚æœæ˜¯æŒ‰æ¶ˆæ¯key hashé€‰çš„åˆ†åŒºï¼Œè¿™ä¸ªæ—¶å€™åˆ†åŒºæ¶ˆæ¯è¦é‡æ–°è¿ç§»å—","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465284,"discussion_content":"å–å†³äºä½ æ˜¯å¦æƒ³è¦è¿ç§»ï¼Œå› æ­¤é»˜è®¤æ˜¯ä¸ä¼šè‡ªåŠ¨è¿ç§»çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567126784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013160,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg","nickname":"ç”µå…‰ç«çŸ³","note":"","ucode":"3AD33BB4AA940F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":11976,"discussion_content":"è¯·é—®æƒ³è¦ä¸€èµ·è¿ç§»éœ€è¦æ€ä¹ˆåšï¼Ÿè°¢è°¢äº†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568454648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123758,"user_name":"ProgramGeek","can_delete":false,"product_type":"c1","uid":1008217,"ip_address":"","ucode":"3F0E3963C4FB57","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/59/a01a5ddd.jpg","comment_is_top":false,"comment_ctime":1565752810,"is_pvip":false,"replies":[{"id":"45610","content":"å¯¹äºæ¯”è¾ƒæ–°çš„Kafkaï¼Œå¯ä»¥æŒ‡å®š--bootstrap-server","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565856107,"ip_address":"","comment_id":123758,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565752810","product_id":100029201,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜ï¼Œä¸Šé¢è¯´åˆ°ç°åœ¨ç”¨å‘½ä»¤åŸºæœ¬éƒ½æ˜¯æŒ‡å®šbootsrap server ï¼Œé‚£ä¹ˆå¯¹äºåˆ›å»ºtopic   æŸ¥è¯¢topic (list)è¿™ç§æ“ä½œè¿˜æ˜¯å¾—æŒ‡å®šzkClient","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462804,"discussion_content":"å¯¹äºæ¯”è¾ƒæ–°çš„Kafkaï¼Œå¯ä»¥æŒ‡å®š--bootstrap-server","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565856107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122734,"user_name":"ban","can_delete":false,"product_type":"c1","uid":1034204,"ip_address":"","ucode":"E523CE97E48266","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","comment_is_top":false,"comment_ctime":1565509332,"is_pvip":false,"replies":[{"id":"45067","content":"1. æ˜¯å¦æäº¤ä½ç§»äº†ï¼Ÿå¯ä»¥ç”¨console consumeræ¨¡æ‹Ÿæ¶ˆè´¹ä¸€ä¸‹ï¼Œç„¶åå†æ‰§è¡Œè¿™ä¸ªå‘½ä»¤çœ‹çœ‹<br>2. æ²¡å¤ªæ˜ç™½ç¬¬äºŒä¸ªé—®é¢˜çš„æ„æ€ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565571382,"ip_address":"","comment_id":122734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565509332","product_id":100029201,"comment_content":"è€å¸ˆä¸¤ä¸ªé—®é¢˜æƒ³é—®ä¸‹ï¼Œ<br><br>1ã€æ ¹æ®__consumer_offsetsä¸»é¢˜æŸ¥çœ‹æ¶ˆè´¹ç»„æäº¤çš„ä½ç§»æ•°æ®ï¼š<br>bin&#47;kafka-console-consumer.sh --bootstrap-server kafka_host:port --topic __consumer_offsets --formatter &quot;kafka.coordinator.group.GroupMetadataManager\\$OffsetsMessageFormatter&quot; --from-beginning<br>ä½†æ˜¯æ‰§è¡Œåä¸€ç‚¹æ•°æ®éƒ½æ²¡æœ‰ï¼Œè¿™ä¸ªå‘½ä»¤ä»€ä¹ˆæƒ…å†µä¸‹æ‰§è¡Œæ‰ä¼šæœ‰æ•°æ®å‡ºæ¥çš„ã€‚<br><br>2ã€è¯»å–ä¸»é¢˜æ¶ˆæ¯å’Œæ¶ˆè´¹ç»„çŠ¶æ€çš„å‘½ä»¤ï¼Œå¯ä»¥æ¶ˆè´¹å…¶ä»–topicå—ï¼Œæˆ‘è¯•äº†ä¸‹ï¼Œåªæœ‰__consumer_offsetsèƒ½è¯»å–å‡ºæ¶ˆæ¯<br>å‘½ä»¤ï¼šbin&#47;kafka-console-consumer.sh --bootstrap-server kafka_host:port --topic __consumer_offsets --formatter &quot;kafka.coordinator.group.GroupMetadataManager\\$GroupMetadataMessageFormatter&quot; --from-beginning<br>","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462380,"discussion_content":"1. æ˜¯å¦æäº¤ä½ç§»äº†ï¼Ÿå¯ä»¥ç”¨console consumeræ¨¡æ‹Ÿæ¶ˆè´¹ä¸€ä¸‹ï¼Œç„¶åå†æ‰§è¡Œè¿™ä¸ªå‘½ä»¤çœ‹çœ‹\n2. æ²¡å¤ªæ˜ç™½ç¬¬äºŒä¸ªé—®é¢˜çš„æ„æ€ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565571382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121740,"user_name":"ä¿¡ä¿¡","can_delete":false,"product_type":"c1","uid":1303865,"ip_address":"","ucode":"8DF0EC045579FD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/39/951f89c8.jpg","comment_is_top":false,"comment_ctime":1565197878,"is_pvip":false,"replies":[{"id":"44744","content":"å…¶å®å¦‚æœæŒ‡å®šçš„æ˜¯broker hostï¼Œåé¢æ˜¯ä¸èµ°ZooKeeperçš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565225034,"ip_address":"","comment_id":121740,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565197878","product_id":100029201,"comment_content":"ä¿®æ”¹ä¸»é¢˜åˆ†åŒºçš„broker_hostæ˜¯éšä¾¿æŒ‡å®šä¸€ä¸ªå—ï¼Ÿæœ€åç”±zké€šçŸ¥åˆ°æ§åˆ¶å™¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461926,"discussion_content":"å…¶å®å¦‚æœæŒ‡å®šçš„æ˜¯broker hostï¼Œåé¢æ˜¯ä¸èµ°ZooKeeperçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565225034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}