{"id":107422,"title":"35 | 存储器层次结构全景：数据存储的大金字塔长什么样？","content":"<p>今天开始，我们要进入到计算机另一个重要的组成部分，存储器。</p><p>如果你自己组装过PC机，你肯定知道，想要CPU，我们只要买一个就好了，但是存储器，却有不同的设备要买。比方说，我们要买内存，还要买硬盘。买硬盘的时候，不少人会买一块SSD硬盘作为系统盘，还会买上一块大容量的HDD机械硬盘作为数据盘。内存和硬盘都是我们的存储设备。而且，像硬盘这样的持久化存储设备，同时也是一个I/O设备。</p><p>在实际的软件开发过程中，我们常常会遇到服务端的请求响应时间长，吞吐率不够的情况。在分析对应问题的时候，相信你没少听过类似“主要瓶颈不在CPU，而在I/O”的论断。可见，存储在计算机中扮演着多么重要的角色。那接下来这一整个章节，我会为你梳理和讲解整个存储器系统。</p><p>这一讲，我们先从存储器的层次结构说起，让你对各种存储器设备有一个整体的了解。</p><h2>理解存储器的层次结构</h2><p>在有计算机之前，我们通常把信息和数据存储在书、文件这样的物理介质里面。有了计算机之后，我们通常把数据存储在计算机的存储器里面。而存储器系统是一个通过各种不同的方法和设备，一层一层组合起来的系统。下面，我们把计算机的存储器层次结构和我们日常生活里处理信息、阅读书籍做个对照，好让你更容易理解、记忆存储器的层次结构。</p><!-- [[[read_end]]] --><p>我们常常把CPU比喻成计算机的“大脑”。我们思考的东西，就好比CPU中的<strong>寄存器</strong>（Register）。寄存器与其说是存储器，其实它更像是CPU本身的一部分，只能存放极其有限的信息，但是速度非常快，和CPU同步。</p><p>而我们大脑中的记忆，就好比<strong>CPU Cache</strong>（CPU高速缓存，我们常常简称为“缓存”）。CPU Cache用的是一种叫作<strong>SRAM</strong>（Static Random-Access Memory，静态随机存取存储器）的芯片。</p><h3>SRAM</h3><p>SRAM之所以被称为“静态”存储器，是因为只要处在通电状态，里面的数据就可以保持存在。而一旦断电，里面的数据就会丢失了。在SRAM里面，一个比特的数据，需要6～8个晶体管。所以SRAM的存储密度不高。同样的物理空间下，能够存储的数据有限。不过，因为SRAM的电路简单，所以访问速度非常快。</p><p><img src=\"https://static001.geekbang.org/resource/image/25/99/25c619a683c161d3678c7339aa34d399.png?wh=1280*960\" alt=\"\"></p><center><a href=\"https://commons.wikimedia.org/wiki/File:SRAM_Cell_(6_Transistors\">图片来源</a> </center><center><span class=\"reference\">6个晶体管组成SRAM的一个比特</span></center><p>在CPU里，通常会有L1、L2、L3这样三层高速缓存。每个CPU核心都有一块属于自己的L1高速缓存，通常分成<strong>指令缓存</strong>和<strong>数据缓存</strong>，分开存放CPU使用的指令和数据。</p><p>不知道你还记不记得我们在<a href=\"https://time.geekbang.org/column/article/100569\">第22讲</a>讲过的哈佛架构，这里的指令缓存和数据缓存，其实就是来自于哈佛架构。L1的Cache往往就嵌在CPU核心的内部。</p><p>L2的Cache同样是每个CPU核心都有的，不过它往往不在CPU核心的内部。所以，L2 Cache的访问速度会比L1稍微慢一些。而L3 Cache，则通常是多个CPU核心共用的，尺寸会更大一些，访问速度自然也就更慢一些。</p><p>你可以把CPU中的L1 Cache理解为我们的短期记忆，把L2/L3 Cache理解成长期记忆，把内存当成我们拥有的书架或者书桌。 当我们自己记忆中没有资料的时候，可以从书桌或者书架上拿书来翻阅。这个过程中就相当于，数据从内存中加载到CPU的寄存器和Cache中，然后通过“大脑”，也就是CPU，进行处理和运算。</p><h3>DRAM</h3><p>内存用的芯片和Cache有所不同，它用的是一种叫作<strong>DRAM</strong>（Dynamic Random Access Memory，动态随机存取存储器）的芯片，比起SRAM来说，它的密度更高，有更大的容量，而且它也比SRAM芯片便宜不少。</p><p>DRAM被称为“动态”存储器，是因为DRAM需要靠不断地“刷新”，才能保持数据被存储起来。DRAM的一个比特，只需要一个晶体管和一个电容就能存储。所以，DRAM在同样的物理空间下，能够存储的数据也就更多，也就是存储的“密度”更大。但是，因为数据是存储在电容里的，电容会不断漏电，所以需要定时刷新充电，才能保持数据不丢失。DRAM的数据访问电路和刷新电路都比SRAM更复杂，所以访问延时也就更长。</p><p><img src=\"https://static001.geekbang.org/resource/image/be/b8/befed615bf50df878b26455288eccbb8.png?wh=1142*371\" alt=\"\"></p><h3>存储器的层级结构</h3><p>整个存储器的层次结构，其实都类似于SRAM和DRAM在性能和价格上的差异。SRAM更贵，速度更快。DRAM更便宜，容量更大。SRAM好像我们的大脑中的记忆，而DRAM就好像属于我们自己的书桌。</p><p>大脑（CPU）中的记忆（L1 Cache），不仅受成本层面的限制，更受物理层面的限制。这就好比L1 Cache不仅昂贵，其访问速度和它到CPU的物理距离有关。芯片造得越大，总有部分离CPU的距离会变远。电信号的传输速度又受物理原理的限制，没法超过光速。所以想要快，并不是靠多花钱就能解决的。</p><p>我们自己的书房和书桌（也就是内存）空间一般是有限的，没有办法放下所有书（也就是数据）。如果想要扩大空间的话，就相当于要多买几平方米的房子，成本就会很高。于是，想要放下更多的书，我们就要寻找更加廉价的解决方案。</p><p>没错，我们想到了公共图书馆。对于内存来说，<strong>SSD</strong>（Solid-state drive或Solid-state disk，固态硬盘）、<strong>HDD</strong>（Hard Disk Drive，硬盘）这些被称为<strong>硬盘</strong>的外部存储设备，就是公共图书馆。于是，我们就可以去家附近的图书馆借书了。图书馆有更多的空间（存储空间）和更多的书（数据）。</p><p>你应该也在自己的个人电脑上用过SSD硬盘。过去几年，SSD这种基于NAND芯片的高速硬盘，价格已经大幅度下降。</p><p>而HDD硬盘则是一种完全符合“磁盘”这个名字的传统硬件。“磁盘”的硬件结构，决定了它的访问速度受限于它的物理结构，是最慢的。</p><p>这些我们后面都会详细说，你可以对照下面这幅图了解一下，对存储器层次之间的作用和关联有个大致印象就可以了。</p><p><img src=\"https://static001.geekbang.org/resource/image/ab/0a/ab345017c3f662b15e15e97e0ca1db0a.png?wh=1142*587\" alt=\"\"></p><center><span class=\"reference\">存储器的层次关系图</span></center><p>从Cache、内存，到SSD和HDD硬盘，一台现代计算机中，就用上了所有这些存储器设备。其中，容量越小的设备速度越快，而且，CPU并不是直接和每一种存储器设备打交道，而是每一种存储器设备，只和它相邻的存储设备打交道。比如，CPU Cache是从内存里加载而来的，或者需要写回内存，并不会直接写回数据到硬盘，也不会直接从硬盘加载数据到CPU Cache中，而是先加载到内存，再从内存加载到Cache中。</p><p><strong>这样，各个存储器只和相邻的一层存储器打交道，并且随着一层层向下，存储器的容量逐层增大，访问速度逐层变慢，而单位存储成本也逐层下降，也就构成了我们日常所说的存储器层次结构。</strong></p><h2>使用存储器的时候，该如何权衡价格和性能？</h2><p>存储器在不同层级之间的性能差异和价格差异，都至少在一个数量级以上。L1 Cache的访问延时是1纳秒（ns），而内存就已经是100纳秒了。在价格上，这两者也差出了400倍。</p><p>我这里放了一张各种存储器成本的对比表格，你可以看看。你也可以在点击这个<a href=\"https://people.eecs.berkeley.edu/~rcs/research/interactive_latency.html\">链接</a>，通过拖拉，查看1990～2020年随着硬件设备的进展，访问延时的变化。</p><p><img src=\"https://static001.geekbang.org/resource/image/d3/a6/d39b0f2b3962d646133d450541fb75a6.png?wh=1142*588\" alt=\"\"></p><p>因为这个价格和性能的差异，你会看到，我们实际在进行电脑硬件配置的时候，会去组合配置各种存储设备。</p><p>我们可以找一台现在主流的笔记本电脑来看看，比如，一款入门级的惠普战66的笔记本电脑。今天在京东上的价格是4999人民币。它的配置是下面这样的。</p><ol>\n<li>Intle i5-8265U的CPU（这是一块4核的CPU）</li>\n</ol><ul>\n<li>这块CPU每个核有32KB，一共128KB的L1指令Cache。</li>\n<li>同样，每个核还有32KB，一共128KB的L1数据Cache，指令Cache和数据Cache都是采用8路组相连的放置策略。</li>\n<li>每个核有256KB，一共1MB的L2 Cache。L2 Cache是用4路组相连的放置策略。</li>\n<li>最后还有一块多个核心共用的12MB的L3 Cache，采用的是12路组相连的放置策略。</li>\n</ul><ol>\n<li>8GB的内存</li>\n<li>一块128G的SSD硬盘</li>\n<li>一块1T的HDD硬盘</li>\n</ol><p>你可以看到，在一台实际的计算机里面，越是速度快的设备，容量就越小。这里一共十多兆的Cache，成本只是几十美元。而8GB的内存、128G的SSD以及1T的HDD，大概零售价格加在一起，也就和我们的高速缓存的价格差不多。</p><h2>总结延伸</h2><p>这节的内容不知道你掌握了多少呢？为了帮助你记忆，我这里再带你复习一下本节的重点。</p><p>我们常常把CPU比喻成高速运转的大脑，那么和大脑同步的寄存器（Register），就存放着我们当下正在思考和处理的数据。而L1-L3的CPU Cache，好比存放在我们大脑中的短期到长期的记忆。我们需要小小花费一点时间，就能调取并进行处理。</p><p>我们自己的书桌书架就好比计算机的内存，能放下更多的书也就是数据，但是找起来和看起来就要慢上不少。而图书馆更像硬盘这个外存，能够放下更多的数据，找起来也更费时间。从寄存器、CPU Cache，到内存、硬盘，这样一层层下来的存储器，速度越来越慢，空间越来越大，价格也越来越便宜。</p><p>这三个“越来越”的特性，使得我们在组装计算机的时候，要组合使用各种存储设备。越是快且贵的设备，实际在一台计算机里面的存储空间往往就越小。而越是慢且便宜的设备，在实际组装的计算机里面的存储空间就会越大。</p><p>在后面的关于存储器的内容里，我会带着你进一步深入了解，各个层次的存储器是如何运作的，在不同类型的应用和性能要求下，是否可以靠人工添加一层缓存层来解决问题，以及在程序开发层面，如何利用好不同层次的存储器设备的访问原理和特性。</p><h2>补充阅读</h2><p>如果你学有余力，关于不同存储器的访问延时数据，有两篇文章推荐给你阅读。</p><p>第一个是Peter Novig的<a href=\"http://norvig.com/21-days.html#answers\"><em>Teach Yourself Programming in Ten Years</em></a>。我推荐你在了解这些数据之后读一读这篇文章。这些数字随着摩尔定律的发展在不断缩小，但是在数量级上仍然有着很强的参考价值。</p><p>第二个是Jeff Dean的<a href=\"https://research.google.com/people/jeff/Stanford-DL-Nov-2010.pdf\"><em>Build Software Systems at Google and Lessons Learned</em></a>。这份PPT中不仅总结了这些数字，还有大量的硬件故障、高可用和系统架构的血泪经验。尽管这是一份10年前的PPT，但也非常值得阅读。</p><h2>课后思考</h2><p>最后，给你留一道思考题。在上世纪80～90年代，3.5寸的磁盘大行其道。它的存储空间只有1.44MB，比起当时40MB的硬盘，它却被大家认为是“海量”存储的主要选择。你猜一猜这是为什么？</p><p>欢迎把你思考的结果写在留言区。如果觉得有收获，你也可以把这篇文章分享给你的朋友，和他一起讨论和学习。</p><p></p>","comments":[{"had_liked":false,"id":113839,"user_name":"斐波那契","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1563168484,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"203426631396","product_id":100026001,"comment_content":"哎 这个问题一下就暴露年龄了 当年3.5寸磁盘又叫软盘 非常小巧 在windows中一般是A盘 里面放了当时做的ppt 文档什么的 后来被u盘取代 一开始u盘还要装驱动 后来xp系统不用自己装驱动就能用u盘一下子把这个软盘💾取代了","like_count":47,"discussions":[{"author":{"id":1129311,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3b/5f/a2c78423.jpg","nickname":"意","note":"","ucode":"A4B0C03248EA77","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564835,"discussion_content":"记得那时候在学校，上机两块钱一个小时。全程都在折腾安装U盘驱动，时间到了都没有安装成功(╯︵╰)。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1650337820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126424,"user_name":"活的潇洒","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1566385710,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"91760698926","product_id":100026001,"comment_content":"“你可以把CPU中的L1 Cache理解为我们的短期记忆，把L2&#47;L3 Cache理解成长期记忆，把内存当成我们拥有<br>的书架或者书桌。 当我们自己记忆中没有资料的时候，可以从书桌或者书架上拿书来翻阅。这个过程中就<br>相当于，数据从内存中加载到CPU的寄存器和Cache中，然后通过“大脑”，也就是CPU，进行处理和运算”<br>这一段精彩了，佩服老师<br><br>day35 笔记：https:&#47;&#47;www.cnblogs.com&#47;luoahong&#47;p&#47;11328671.html","like_count":22},{"had_liked":false,"id":113758,"user_name":"xindoo","can_delete":false,"product_type":"c1","uid":1101718,"ip_address":"","ucode":"AEAF3208E644BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/96/251c0cee.jpg","comment_is_top":false,"comment_ctime":1563152246,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"57397727094","product_id":100026001,"comment_content":"8 90年代，虽然硬盘容量比磁盘大，但体积也大，价格也更高。磁盘体积小，价格低，携带方便，同体积下的硬盘和磁盘，当然是磁盘容量更大，价格更低，所以肯定是大家存储数据的首选。","like_count":14,"discussions":[{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412730,"discussion_content":"磁盘不是硬盘的一种吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636271640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122613,"user_name":"分清云淡","can_delete":false,"product_type":"c1","uid":1269873,"ip_address":"","ucode":"7045AE6BF72D31","user_header":"https://static001.geekbang.org/account/avatar/00/13/60/71/895ee6cf.jpg","comment_is_top":false,"comment_ctime":1565439033,"is_pvip":false,"replies":[{"id":"52684","content":"于欣磊同学，<br><br>你好，我猜你说的是NVME？NVME是一个接口规范，现在存储用的也还是SSD，只是这个接口带宽比PCI-E要高，顺序读写的吞吐率能做得更高。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569663127,"ip_address":"","comment_id":122613,"utype":1}],"discussion_count":2,"race_medal":0,"score":"44515111993","product_id":100026001,"comment_content":"DRAM和SSD之间还有个NVM","like_count":11,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462331,"discussion_content":"于欣磊同学，\n\n你好，我猜你说的是NVME？NVME是一个接口规范，现在存储用的也还是SSD，只是这个接口带宽比PCI-E要高，顺序读写的吞吐率能做得更高。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569663127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2025816,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/e9/58/7bb2c561.jpg","nickname":"请务必优秀","note":"","ucode":"2B7AE4EF41C972","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":566536,"discussion_content":"老师，这个同学说的是非易失性存储","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650710542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":462331,"ip_address":""},"score":566536,"extra":""}]}]},{"had_liked":false,"id":126707,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1566455062,"is_pvip":false,"replies":[{"id":"52648","content":"leslie同学你好，<br><br>软盘的访问速度其实不快，但是便携，成本低。搞个10张就超过10MB硬盘你的存储空间了。<br><br>80年代末90年代初的“海量存储”就是一大摞软盘。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569660549,"ip_address":"","comment_id":126707,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23041291542","product_id":100026001,"comment_content":"       老师本节课都在讲存储的访问速度：强调的是设备之间的访问速度，90年代是我的高中时代，印象里那会儿一切的copy用的主要都还是软盘，那会儿似乎没有光盘，应当是它的便携性和访问速度快；毕竟那个时代网络还是电话线-软盘的携带性方便，硬盘其实同样是由多张盘构成的-其中涉及到寻址时间导致访问缓慢。","like_count":5,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464130,"discussion_content":"leslie同学你好，\n\n软盘的访问速度其实不快，但是便携，成本低。搞个10张就超过10MB硬盘你的存储空间了。\n\n80年代末90年代初的“海量存储”就是一大摞软盘。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569660549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019506,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/72/63c94eee.jpg","nickname":"黄马","note":"","ucode":"93E391B4678EC2","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":194209,"discussion_content":"还是因为便宜？所以“海量”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583198543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118114,"user_name":"格非","can_delete":false,"product_type":"c1","uid":1004569,"ip_address":"","ucode":"89FABFFC377131","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/19/95ff4cbd.jpg","comment_is_top":false,"comment_ctime":1564245034,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"14449146922","product_id":100026001,"comment_content":"老师，比如CPU标明四核八线程，理论上，一个核只能处理一个线程，怎么这线程数是核数的两倍呢","like_count":3,"discussions":[{"author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566067,"discussion_content":"因为一个线程流水线会有nop操作，所以nop的时候去执行其他进程的线程，称为超线程","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650594445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1795371,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/65/2b/446ef7b6.jpg","nickname":"许先森","note":"","ucode":"1F42D4A6B5C6AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":136693,"discussion_content":"这就是超线程技术啊，在逻辑层面“伪装”成有两个CPU核心，所以四核的CPU一共就有4x2=8个线程。从物理层面其实还是4个核心","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579158151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1545647,"avatar":"https://static001.geekbang.org/account/avatar/00/17/95/af/b7f8dc43.jpg","nickname":"拓山","note":"","ucode":"11FE9CF3821898","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30617,"discussion_content":"这个是前面章节中讲解的超线程技术","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570846341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250807,"avatar":"https://static001.geekbang.org/account/avatar/00/13/15/f7/744720a2.jpg","nickname":"DriveMan_邱佳源","note":"","ucode":"A4C83BF07DEE7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19828,"discussion_content":"一个物理CPU虚拟出两个逻辑CPU","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569229593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1299216,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d3/10/733f3cc9.jpg","nickname":"欧智明","note":"","ucode":"86C9AD979C568A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6615,"discussion_content":"前面讲过超线程啊，应该是这个问题的答案吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566995857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114011,"user_name":"林三杠","can_delete":false,"product_type":"c1","uid":1012832,"ip_address":"","ucode":"E667F986D07DC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/60/0403b575.jpg","comment_is_top":false,"comment_ctime":1563203736,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14448105624","product_id":100026001,"comment_content":"应该是便携性比较好，价格也比较容易接受，而且当时需要便携性好的文件普遍没有那么大，综合下来，软盘才会风靡一时吧。后来就是u盘的天下了","like_count":3},{"had_liked":false,"id":260674,"user_name":"人在江湖龙在江湖","can_delete":false,"product_type":"c1","uid":2285946,"ip_address":"","ucode":"20850038573DAE","user_header":"https://static001.geekbang.org/account/avatar/00/22/e1/7a/b206cded.jpg","comment_is_top":false,"comment_ctime":1605081439,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10195016031","product_id":100026001,"comment_content":"当时的软盘相当于现在的u盘，即插即用，可以当做系统启动盘，装系统或者应用程序，第二软盘远比硬盘便宜","like_count":2},{"had_liked":false,"id":113724,"user_name":"安排","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1563147900,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"10153082492","product_id":100026001,"comment_content":"老师，双路四核CPU和单路四核CPU有什么区别？还有这个双路是指主板上有两个CPU插槽，插两个CPU就叫双路吗？","like_count":2,"discussions":[{"author":{"id":1183570,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/52/41803e92.jpg","nickname":"大富","note":"","ucode":"6921E91A197C40","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300506,"discussion_content":"双路CPU一般是服务器主板用的，意思就是一个主板上有两个CPU插槽，也有四路CPU主板","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598152176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250807,"avatar":"https://static001.geekbang.org/account/avatar/00/13/15/f7/744720a2.jpg","nickname":"DriveMan_邱佳源","note":"","ucode":"A4C83BF07DEE7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19826,"discussion_content":"双路四核CPU，简单说就是一个物理CPU能够虚拟出两个CPU，也就是说一个CPU有两条线程同时并行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569229496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1000060,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","nickname":"🄽🄸🅇🅄🅂","note":"","ucode":"853763C229A5AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1250807,"avatar":"https://static001.geekbang.org/account/avatar/00/13/15/f7/744720a2.jpg","nickname":"DriveMan_邱佳源","note":"","ucode":"A4C83BF07DEE7A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258129,"discussion_content":"是之前课程中的超线程？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588651008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":19826,"ip_address":""},"score":258129,"extra":""}]}]},{"had_liked":false,"id":299886,"user_name":"Yongtao","can_delete":false,"product_type":"c1","uid":2324603,"ip_address":"","ucode":"248BE5661D6532","user_header":"https://static001.geekbang.org/account/avatar/00/23/78/7b/09defb8d.jpg","comment_is_top":false,"comment_ctime":1624892920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5919860216","product_id":100026001,"comment_content":"SRAM CPU高速缓存 1比特需要6个晶体管<br>DRAM 内存 1比特需要1个晶体管和3个电容<br>电容需要动态的充电刷新，所以dynamic","like_count":1},{"had_liked":false,"id":259281,"user_name":"小炭","can_delete":false,"product_type":"c1","uid":1109544,"ip_address":"","ucode":"E20E3958CAF06C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/28/c04a0c83.jpg","comment_is_top":false,"comment_ctime":1604670615,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5899637911","product_id":100026001,"comment_content":"了解了这些存储器设备特性对于架构设计至关重要。","like_count":2},{"had_liked":false,"id":164416,"user_name":"王加武","can_delete":false,"product_type":"c1","uid":1665471,"ip_address":"","ucode":"DDCFE578C6C428","user_header":"https://static001.geekbang.org/account/avatar/00/19/69/bf/50a824a4.jpg","comment_is_top":false,"comment_ctime":1576983134,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5871950430","product_id":100026001,"comment_content":"学习了这一章，我立马详细的研究了一下我电脑的配置！哈哈，点赞","like_count":1},{"had_liked":false,"id":349018,"user_name":"jorin@zou","can_delete":false,"product_type":"c1","uid":1564869,"ip_address":"","ucode":"A8CEF7CCF33570","user_header":"https://static001.geekbang.org/account/avatar/00/17/e0/c5/c324a7de.jpg","comment_is_top":false,"comment_ctime":1655644382,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655644382","product_id":100026001,"comment_content":"越学到后面，评论越少了","like_count":0},{"had_liked":false,"id":294718,"user_name":"唐江","can_delete":false,"product_type":"c1","uid":1878120,"ip_address":"","ucode":"867C9808CF7760","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJpJXWFP3dNle88WnTkRTsEQkPJmOhepibiaTfhEtMRrbdg5EAWm4EzurA61oKxvCK2ZjMmy1QvmChw/132","comment_is_top":false,"comment_ctime":1622072092,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1622072092","product_id":100026001,"comment_content":"老师说dram 数据是保存在一个晶体管和一个电容里面的，具体怎么保存的呢？或者可以从哪里查到这方面的资料呢","like_count":0,"discussions":[{"author":{"id":1061803,"avatar":"https://static001.geekbang.org/account/avatar/00/10/33/ab/d8ba4242.jpg","nickname":"哒哒哒","note":"","ucode":"9378AD329F8AE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383066,"discussion_content":"大学的数字电路","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625875420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291987,"user_name":"邱マン","can_delete":false,"product_type":"c1","uid":2522914,"ip_address":"","ucode":"92293B1E0D64CF","user_header":"https://static001.geekbang.org/account/avatar/00/26/7f/22/d670af4a.jpg","comment_is_top":false,"comment_ctime":1620638029,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620638029","product_id":100026001,"comment_content":"老师讲的真棒👍通俗易懂","like_count":0},{"had_liked":false,"id":282264,"user_name":"陌兮","can_delete":false,"product_type":"c1","uid":1415619,"ip_address":"","ucode":"00CE47CAECD5CD","user_header":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","comment_is_top":false,"comment_ctime":1615178325,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1615178325","product_id":100026001,"comment_content":"总算明白了各个存储的物理结构了","like_count":0},{"had_liked":false,"id":281579,"user_name":"慎独明强","can_delete":false,"product_type":"c1","uid":1965699,"ip_address":"","ucode":"DC2F7F2C0C8F60","user_header":"https://static001.geekbang.org/account/avatar/00/1d/fe/83/df562574.jpg","comment_is_top":false,"comment_ctime":1614817921,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614817921","product_id":100026001,"comment_content":"看了这么多章节，想把这节的东西记录下来，之前很多都是囫囵吞枣，这一张看懂了。从层级来看，寄存器-cpu三级高速缓存-主内存-固态硬盘-机械硬盘。  每个层级之能相近之间访问。想到之前学的内存模型，主内存，cpu，总线，寄存器，写缓冲器，无效队列等来保证缓存一致性，结合这个存储器层次结构理解起来就容易多了。对于这些知识可以先囫囵吞枣去读，当积累了其他知识后，感觉会豁然开朗","like_count":0},{"had_liked":false,"id":279012,"user_name":"林杨","can_delete":false,"product_type":"c1","uid":1207687,"ip_address":"","ucode":"FE192D8D6FF036","user_header":"https://static001.geekbang.org/account/avatar/00/12/6d/87/21e516ec.jpg","comment_is_top":false,"comment_ctime":1613542658,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1613542658","product_id":100026001,"comment_content":"DRAM和SSD之间，还有一层intel的Optane的非易失内存。性能和成本也是介于两者之间。","like_count":0},{"had_liked":false,"id":255989,"user_name":"风","can_delete":false,"product_type":"c1","uid":1077538,"ip_address":"","ucode":"104638BF19B048","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/22/b8c596b6.jpg","comment_is_top":false,"comment_ctime":1603498164,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603498164","product_id":100026001,"comment_content":"我们常常把 CPU 比喻成高速运转的大脑，那么和大脑同步的寄存器（Register），就存放着我们当下正在思考和处理的数据。而 L1-L3 的 CPU Cache，好比存放在我们大脑中的短期到长期的记忆。我们需要小小花费一点时间，就能调取并进行处理。<br>我们自己的书桌书架就好比计算机的内存，能放下更多的书也就是数据，但是找起来和看起来就要慢上不少。而图书馆更像硬盘这个外存，能够放下更多的数据，找起来也更费时间。从寄存器、CPU Cache，到内存、硬盘，这样一层层下来的存储器，速度越来越慢，空间越来越大，价格也越来越便宜。<br>这三个“越来越”的特性，使得我们在组装计算机的时候，要组合使用各种存储设备。越是快且贵的设备，实际在一台计算机里面的存储空间往往就越小。而越是慢且便宜的设备，在实际组装的计算机里面的存储空间就会越大。","like_count":0},{"had_liked":false,"id":255987,"user_name":"风","can_delete":false,"product_type":"c1","uid":1077538,"ip_address":"","ucode":"104638BF19B048","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/22/b8c596b6.jpg","comment_is_top":false,"comment_ctime":1603497998,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603497998","product_id":100026001,"comment_content":"从 Cache、内存，到 SSD 和 HDD 硬盘，一台现代计算机中，就用上了所有这些存储器设备。其中，容量越小的设备速度越快，而且，CPU 并不是直接和每一种存储器设备打交道，而是每一种存储器设备，只和它相邻的存储设备打交道。比如，CPU Cache 是从内存里加载而来的，或者需要写回内存，并不会直接写回数据到硬盘，也不会直接从硬盘加载数据到 CPU Cache 中，而是先加载到内存，再从内存加载到 Cache 中。","like_count":0},{"had_liked":false,"id":201003,"user_name":"张明云","can_delete":false,"product_type":"c1","uid":1009901,"ip_address":"","ucode":"430314AC1039C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/68/ed/b5a41e95.jpg","comment_is_top":false,"comment_ctime":1585705094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585705094","product_id":100026001,"comment_content":"将各种存储介质比作大脑获取信息的不同来源很形象，很清晰地表达了意思，很赞。","like_count":1},{"had_liked":false,"id":140138,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1570839167,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570839167","product_id":100026001,"comment_content":"计算机中的存储空间包括，lL1cache  L2cache  L3cache  内存   和硬盘","like_count":0},{"had_liked":false,"id":126425,"user_name":"活的潇洒","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1566385718,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566385718","product_id":100026001,"comment_content":"“你可以把CPU中的L1 Cache理解为我们的短期记忆，把L2&#47;L3 Cache理解成长期记忆，把内存当成我们拥有<br>的书架或者书桌。 当我们自己记忆中没有资料的时候，可以从书桌或者书架上拿书来翻阅。这个过程中就<br>相当于，数据从内存中加载到CPU的寄存器和Cache中，然后通过“大脑”，也就是CPU，进行处理和运算”<br>这一段精彩了，佩服老师<br><br>day35 笔记：https:&#47;&#47;www.cnblogs.com&#47;luoahong&#47;p&#47;11328671.html","like_count":0},{"had_liked":false,"id":118302,"user_name":"Douglas","can_delete":false,"product_type":"c1","uid":1073027,"ip_address":"","ucode":"CFDE3D76B9DAE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/83/bb728e53.jpg","comment_is_top":false,"comment_ctime":1564316856,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564316856","product_id":100026001,"comment_content":"老师 ，在购买云数据库的时候会有一个参数 IOPS, 查百度知道是磁盘读写的速度  ，这个参数和并发数有关系吗？或者说， 并发永远不会超过 iops，网上有人说一个数据库 请求会涉及多个磁盘io 这个过程大致是怎样的，可以解答下吗，感谢。","like_count":0},{"had_liked":false,"id":116766,"user_name":"驴在囧途","can_delete":false,"product_type":"c1","uid":1463269,"ip_address":"","ucode":"DC3EE6F3FEB6C1","user_header":"https://static001.geekbang.org/account/avatar/00/16/53/e5/88b220cf.jpg","comment_is_top":false,"comment_ctime":1563923509,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563923509","product_id":100026001,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":114058,"user_name":"明翼","can_delete":false,"product_type":"c1","uid":1068361,"ip_address":"","ucode":"E77F86BEB3D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","comment_is_top":false,"comment_ctime":1563234671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563234671","product_id":100026001,"comment_content":"应该是存储密度更大","like_count":0},{"had_liked":false,"id":113941,"user_name":"雲至","can_delete":false,"product_type":"c1","uid":1568487,"ip_address":"","ucode":"47E2D099322BB1","user_header":"https://static001.geekbang.org/account/avatar/00/17/ee/e7/4375e97c.jpg","comment_is_top":false,"comment_ctime":1563190383,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563190383","product_id":100026001,"comment_content":"应该是相同的面积下存下来的数据要多很多的意思吧","like_count":0}]}