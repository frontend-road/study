{"id":481037,"title":"11 | æ³¨è§£ä¸åå°„ï¼šè¿›é˜¶å¿…å¤‡æŠ€èƒ½","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ¶›ã€‚ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹Kotlinçš„<strong>æ³¨è§£</strong>ï¼ˆAnnotationï¼‰å’Œ<strong>åå°„</strong>ï¼ˆReflectionï¼‰ã€‚</p><p>æ³¨è§£å’Œåå°„ï¼Œæ˜¯Kotlinå½“ä¸­æ¯”è¾ƒéš¾ç†è§£çš„å†…å®¹äº†ã€‚å’Œå‰é¢æˆ‘ä»¬å­¦ä¹ çš„<a href=\"https://time.geekbang.org/column/article/480022\">æ³›å‹</a>ä¸€æ ·ï¼Œæ³¨è§£ä¸åå°„éƒ½æ˜¯æ¯”è¾ƒæŠ½è±¡çš„æ¦‚å¿µã€‚æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“ï¼ŒKotlinçš„æ³›å‹ï¼Œå°±æ˜¯åœ¨ä»£ç æ¶æ„çš„å±‚é¢è¿›è¡Œçš„ä¸€ç§æŠ½è±¡ï¼Œä»è€Œè¾¾åˆ°ä»£ç é€»è¾‘å°½å¯èƒ½å¤ç”¨çš„ç›®çš„ã€‚é‚£ä¹ˆï¼Œæ³¨è§£ä¸åå°„ï¼Œå®ƒä»¬å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼šæé«˜ä»£ç çš„<strong>çµæ´»æ€§</strong>ã€‚</p><p>çµæ´»æ€§ï¼Œå°±è®©æ³¨è§£ä¸åå°„åŒæ ·æœ‰ç€ä¸¾è¶³è½»é‡çš„åœ°ä½ï¼Œå€ŸåŠ©è¿™ä¸¤ç§æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥åšè®¸å¤šæœ‰è¶£çš„äº‹æƒ…ã€‚Kotlinä¸Javaé¢†åŸŸï¼Œæœ‰è®¸å¤šè‘—åçš„å¼€æºåº“ï¼Œæ¯”å¦‚å¤§åé¼é¼çš„<a href=\"https://spring.io/projects/spring-boot\">Spring Boot</a>ã€<a href=\"https://github.com/square/retrofit\">Retrofit</a>ã€<a href=\"https://github.com/google/gson\">Gson</a>ç­‰ï¼Œéƒ½ä¼šç”¨åˆ°è¿™ä¸¤ç§æŠ€æœ¯ã€‚</p><p>æ‰€ä»¥ï¼Œåªæœ‰æ·±åˆ»ç†è§£äº†æ³¨è§£å’Œåå°„ï¼Œæˆ‘ä»¬æ‰å¯èƒ½ç†è§£é‚£äº›è‘—åå¼€æºåº“çš„è®¾è®¡æ€è·¯ï¼Œä¹Ÿæ‰å¯èƒ½è¯»æ‡‚è¿™äº›ä¸–ç•Œé¡¶çº§å¼€å‘è€…çš„ä»£ç ã€‚</p><p>å½“ç„¶ï¼Œè¯¾ç¨‹è¿›è¡Œåˆ°è¿™é‡Œï¼Œå­¦ä¹ çš„éš¾åº¦ä¹Ÿè¶Šæ¥è¶Šé«˜äº†ï¼Œä¸è¿‡ä½ ä¹Ÿä¸è¦å› æ­¤äº§ç”Ÿç•éš¾çš„æƒ…ç»ªï¼Œåªè¦ä½ èƒ½å¤šæ€è€ƒã€å¤šç»ƒä¹ ï¼ŒæŠŠå¯¹çŸ¥è¯†ç‚¹çš„ç†è§£éƒ½è½å®åˆ°ä»£ç ä¸Šï¼Œé‚£æˆ‘ç›¸ä¿¡ä½ å¯¹Kotlinçš„æŒæ¡æƒ…å†µã€ä»£ç èƒ½åŠ›ç”šè‡³æ¶æ„èƒ½åŠ›ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªè´¨çš„é£è·ƒã€‚å¹¶ä¸”ï¼Œåœ¨è¯¾ç¨‹ä¸­æˆ‘ä¹Ÿä¼šå°½é‡ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€ã€ä¾‹å­æ¥ç»™ä½ ä»‹ç»è¿™äº›é™Œç”Ÿçš„æ¦‚å¿µçŸ¥è¯†ï¼Œè®©ä½ åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å¯ä»¥è½»æ¾ä¸€äº›ã€‚</p><!-- [[[read_end]]] --><p>å¥½ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ­£å¼å¼€å§‹å§ã€‚</p><h2>è®¤è¯†æ³¨è§£</h2><p>æ³¨è§£ï¼Œå¯èƒ½æ˜¯æˆ‘ä»¬çœ¼é‡Œ<strong>æœ€ç†Ÿæ‚‰çš„é™Œç”Ÿäºº</strong>ã€‚è™½ç„¶ç»å¸¸è§é¢ï¼Œä½†æˆ‘ä»¬å¹¶ä¸çœŸçš„è®¤è¯†å®ƒã€‚</p><p>å®é™…ä¸Šï¼Œæ³¨è§£å‡ ä¹æ— å¤„ä¸åœ¨ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ç»å¸¸èƒ½åœ¨Kotlinæ ‡å‡†åº“å½“ä¸­çœ‹è§â€œ@Deprecatedâ€è¿™æ ·çš„æ³¨è§£ï¼Œå®ƒä»£è¡¨äº†è¢«æ ‡æ³¨çš„ä»£ç â€œå·²åºŸå¼ƒâ€ã€‚å¦‚æœä½ æœ‰Javaçš„ç¼–ç¨‹ç»éªŒï¼Œä½ ä¸€å®šè§è¿‡â€œ@Overrideâ€è¿™ä¸ªæ³¨è§£ï¼Œå®ƒä»£è¡¨äº†é‡å†™ã€‚</p><p>è€Œå°±ç®—ä½ æ²¡æœ‰ä»»ä½•ç¼–ç¨‹ç»éªŒï¼Œä½ ä¹Ÿå·²ç»åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­è§åˆ°è¿‡æ³¨è§£äº†ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/473656\">ç¬¬4è®²</a>çš„å•å…ƒæµ‹è¯•ä»£ç å½“ä¸­ï¼Œå°±ç”¨åˆ°äº†@Testè¿™ä¸ªæ³¨è§£ï¼›åœ¨<a href=\"https://time.geekbang.org/column/article/477295\">ç¬¬8è®²</a>çš„æ€§èƒ½æµ‹è¯•ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†@Benchmarkè¿™ä¸ªæ³¨è§£ã€‚</p><p>å…¶å®ï¼Œè¦ç†è§£Kotlinçš„æ³¨è§£ä¹Ÿå¹¶ä¸å›°éš¾ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬çš„ç”Ÿæ´»å½“ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„æ¦‚å¿µï¼Œé‚£å°±æ˜¯<strong>ä¾¿åˆ©è´´</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7a/21/7a0a847eb0a881fba6413be150dd2f21.png?wh=1920x1280\" alt=\"å›¾ç‰‡\"></p><p>æ¯”å¦‚åœ¨å­¦ä¹ çš„æ—¶å€™ï¼Œä½ çœ‹åˆ°ä¹¦æœ¬é‡Œçš„æŸä¸ªçŸ¥è¯†ç‚¹æœ‰äº†æ–°çš„æ„Ÿæ‚Ÿï¼Œå°±ä¼šæ‹¿èµ·ä¾¿åˆ©è´´ï¼Œå†™ä¸‹æ¥ä½ å½“æ—¶çš„æƒ³æ³•ï¼Œç„¶åè´´åˆ°ä¹¦æœ¬å½“ä¸­å»ã€‚</p><p>å¦ä¸€ä¸ªä¾‹å­å°±æ˜¯ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šåœ¨è®ºæ–‡æˆ–è€…ç»´åŸºç™¾ç§‘å½“ä¸­çœ‹åˆ°çš„â€œæ³¨è§£â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/68/1e/68966cf6789af5ecf03cf65338a0451e.png?wh=887x196\" alt=\"å›¾ç‰‡\"></p><p>æ‰€ä»¥ï¼Œä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½æƒ³æ¸…æ¥šæ³¨è§£åˆ°åº•æ˜¯ä»€ä¹ˆã€‚å…¶å®ï¼Œå®ƒå°±æ˜¯â€œå¯¹å·²æœ‰æ•°æ®è¿›è¡Œè¡¥å……çš„ä¸€ç§æ•°æ®â€ã€‚è¿™è¯è¯»èµ·æ¥æœ‰ç‚¹ç»•ï¼Œè®©æˆ‘ç”¨æ›´é€šä¿—çš„è¯­è¨€æ¥è§£é‡Šä¸€ä¸‹ï¼š</p><ul>\n<li>æˆ‘ä»¬å­¦ä¹ çš„æ—¶å€™ï¼Œå†™ä¸‹æ¥çš„ä¾¿åˆ©è´´æ³¨è§£ï¼Œå…¶å®å°±æ˜¯å¯¹çŸ¥è¯†ç‚¹çš„è¡¥å……ã€‚</li>\n<li>ç»´åŸºç™¾ç§‘å½“ä¸­çš„æ³¨è§£ï¼Œå…¶å®å°±æ˜¯å¯¹å®ƒæè¿°å†…å®¹çš„ä¸€ç§è¡¥å……ã€‚</li>\n</ul><p>å› æ­¤ï¼Œ<strong>Kotlinå½“ä¸­çš„æ³¨è§£ï¼Œå…¶å®å°±æ˜¯â€œç¨‹åºä»£ç çš„ä¸€ç§è¡¥å……â€</strong>ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å°±æ‹¿ç¬¬4è®²ä¸­çš„å•å…ƒæµ‹è¯•ä»£ç ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹å®ƒçš„ä½œç”¨ã€‚</p><pre><code class=\"language-plain\">class TestCalculatorV3 {\n//   æ³¨è§£\n//    â†“\n    @Test\n    fun testCalculate() {\n        val calculator = CalculatorV3()\n\n        val res1 = calculator.calculate(\"2333333333333332+1\")\n        assertEquals(\"2333333333333333\", res1)\n    }\n}\n</code></pre><p>ä¸Šé¢è¿™æ®µä»£ç ä¸­çš„â€œ@Testâ€ï¼Œå®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰æˆ‘ä»¬çš„IDEï¼ŒtestCalculate()è¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ã€‚IDEæ£€æµ‹åˆ°è¿™ä¸ªæ³¨è§£ä»¥åï¼Œå°±ä¼šåœ¨æ—è¾¹çš„å·¥å…·æ å±•ç¤ºå‡ºä¸€ä¸ªç»¿è‰²çš„ä¸‰è§’å½¢æŒ‰é’®ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç›´æ¥è¿è¡Œè¿™ä¸ªæµ‹è¯•æ–¹æ³•ã€‚</p><p>å¦‚æœæˆ‘ä»¬åˆ æ‰â€œ@Testâ€è¿™ä¸ªæ³¨è§£ï¼Œè¿™æ®µä»£ç å°±ä¼šå˜æˆä¸€æ®µæ™®é€šçš„Kotlinä»£ç ï¼Œè€Œæ—è¾¹å·¥å…·æ çš„ç»¿è‰²ä¸‰è§’å½¢æŒ‰é’®ä¹Ÿä¼šæ¶ˆå¤±ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/65/cb/65d02a01df21a579d05944aedeff59cb.gif?wh=1174x668\" alt=\"å›¾ç‰‡\"></p><p>ä»è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬å…¶å®å°±èƒ½ä½“ä¼šåˆ°æ³¨è§£çš„çµæ´»æ€§ã€‚æˆ‘ä»¬å¼€å‘è€…åªéœ€è¦ç”¨Kotlinçš„è¯­æ³•å†™ä»£ç å³å¯ï¼Œè‡³äºä»£ç æ˜¯ä¸æ˜¯ç”¨æ¥åšå•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„â€œ@Testâ€æ³¨è§£å°±å¯ä»¥æå®šã€‚è¿™ä¸­é—´æœ‰<strong>è§£è€¦</strong>çš„æ€æƒ³åœ¨é‡Œé¢ã€‚</p><p>è®¤è¯†åˆ°æ³¨è§£æ˜¯ä»€ä¹ˆä»¥åï¼Œæˆ‘ä»¬åé¢çš„å­¦ä¹ å°±å¾ˆç®€å•äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹æ³¨è§£çš„å®šä¹‰è¿˜æœ‰ä½¿ç”¨ã€‚</p><h3>æ³¨è§£çš„å®šä¹‰</h3><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ³¨è§£æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚Kotlinçš„æºä»£ç å½“ä¸­ï¼Œæä¾›äº†å¾ˆå¤šå†…ç½®çš„æ³¨è§£ï¼Œæ¯”å¦‚@Deprecatedã€@JvmStaticã€@JvmOverloadsç­‰ç­‰ã€‚é™¤äº†Kotliné»˜è®¤å°±æœ‰çš„æ³¨è§£ä»¥å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„æ³¨è§£ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å®šä¹‰ä¸€ä¸ª@Deprecatedæ³¨è§£ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå…¶å®éå¸¸ç®€å•ï¼Œæ€»ä½“ç»“æ„å’Œå®šä¹‰ä¸€ä¸ªæ™®é€šçš„Kotlinç±»å·®ä¸å¤šï¼Œåªæ˜¯å¤šäº†ä¸€äº›é¢å¤–çš„ä¸œè¥¿ã€‚</p><pre><code class=\"language-plain\">@Target(CLASS, FUNCTION, PROPERTY, ANNOTATION_CLASS, CONSTRUCTOR, PROPERTY_SETTER, PROPERTY_GETTER, TYPEALIAS)\n@MustBeDocumented\npublic annotation class Deprecated(\n    val message: String,\n    val replaceWith: ReplaceWith = ReplaceWith(\"\"),\n    val level: DeprecationLevel = DeprecationLevel.WARNING\n)\n</code></pre><p>ä»ä¸Šé¢çš„ä»£ç é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ@Deprecatedè¿™ä¸ªæ³¨è§£çš„å®šä¹‰ä¸Šé¢ï¼Œè¿˜æœ‰å…¶ä»–çš„æ³¨è§£@Targetã€@MustBeDocumentedã€‚è¿™æ ·çš„æ³¨è§£ï¼Œæˆ‘ä»¬å«åš<strong>å…ƒæ³¨è§£</strong>ï¼Œå³å®ƒæœ¬èº«æ˜¯æ³¨è§£çš„åŒæ—¶ï¼Œè¿˜å¯ä»¥ç”¨æ¥ä¿®é¥°å…¶ä»–æ³¨è§£ã€‚</p><p>Kotlinå¸¸è§çš„å…ƒæ³¨è§£æœ‰å››ä¸ªï¼š</p><ul>\n<li><strong>@Target</strong>ï¼Œè¿™ä¸ªæ³¨è§£æ˜¯æŒ‡å®šäº†è¢«ä¿®é¥°çš„æ³¨è§£éƒ½å¯ä»¥ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯<strong>ç›®æ ‡</strong>ï¼›</li>\n<li><strong>@Retention</strong>ï¼Œè¿™ä¸ªæ³¨è§£æ˜¯æŒ‡å®šäº†è¢«ä¿®é¥°çš„æ³¨è§£æ˜¯ä¸æ˜¯ç¼–è¯‘åå¯è§ã€æ˜¯ä¸æ˜¯è¿è¡Œæ—¶å¯è§ï¼Œä¹Ÿå°±æ˜¯<strong>ä¿ç•™ä½ç½®</strong>ï¼›</li>\n<li><strong>@Repeatable</strong>ï¼Œè¿™ä¸ªæ³¨è§£æ˜¯å…è®¸æˆ‘ä»¬åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œå¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„è¢«ä¿®é¥°çš„æ³¨è§£ï¼Œä½¿ç”¨åœºæ™¯æ¯”è¾ƒå°‘ï¼›</li>\n<li><strong>@MustBeDocumented</strong>ï¼ŒæŒ‡å®šè¢«ä¿®é¥°çš„æ³¨è§£åº”è¯¥åŒ…å«åœ¨ç”Ÿæˆçš„APIæ–‡æ¡£ä¸­æ˜¾ç¤ºï¼Œè¿™ä¸ªæ³¨è§£ä¸€èˆ¬ç”¨äºSDKå½“ä¸­ã€‚</li>\n</ul><p>è¿™é‡Œï¼Œä½ éœ€è¦æ³¨æ„çš„æ˜¯Targetå’ŒRetentionçš„å–å€¼ï¼š</p><pre><code class=\"language-plain\">public enum class AnnotationTarget {\n    // ç±»ã€æ¥å£ã€objectã€æ³¨è§£ç±»\n    CLASS,\n    // æ³¨è§£ç±»\n    ANNOTATION_CLASS,\n    // æ³›å‹å‚æ•°\n    TYPE_PARAMETER,\n    // å±æ€§\n    PROPERTY,\n    // å­—æ®µã€å¹•åå­—æ®µ\n    FIELD,\n    // å±€éƒ¨å˜é‡\n    LOCAL_VARIABLE,\n    // å‡½æ•°å‚æ•°\n    VALUE_PARAMETER,\n    // æ„é€ å™¨\n    CONSTRUCTOR,\n    // å‡½æ•°\n    FUNCTION,\n    // å±æ€§çš„getter\n    PROPERTY_GETTER,\n    // å±æ€§çš„setter\n    PROPERTY_SETTER,\n    // ç±»å‹\n    TYPE,\n    // è¡¨è¾¾å¼\n    EXPRESSION,\n    // æ–‡ä»¶\n    FILE,\n    // ç±»å‹åˆ«å\n    TYPEALIAS\n}\n\npublic enum class AnnotationRetention {\n    // æ³¨è§£åªå­˜åœ¨äºæºä»£ç ï¼Œç¼–è¯‘åä¸å¯è§\n    SOURCE,\n    // æ³¨è§£ç¼–è¯‘åå¯è§ï¼Œè¿è¡Œæ—¶ä¸å¯è§\n    BINARY,\n    // ç¼–è¯‘åå¯è§ï¼Œè¿è¡Œæ—¶å¯è§\n    RUNTIME\n}\n</code></pre><p>åœ¨è¿™æ®µä»£ç çš„æ³¨é‡Šå½“ä¸­ï¼Œæˆ‘è¯¦ç»†è§£é‡Šäº†Targetå’ŒRetentionçš„å–å€¼ï¼Œä»¥åŠå®ƒä»¬å„è‡ªä»£è¡¨çš„æ„ä¹‰ã€‚ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å›è¿‡å¤´ï¼Œæ¥çœ‹çœ‹æˆ‘ä»¬å®šä¹‰çš„â€œ@Deprecatedâ€åˆ°åº•æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚</p><p>é€šè¿‡@Targetçš„å–å€¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ@Deprecatedåªèƒ½ä½œç”¨äºè¿™äº›åœ°æ–¹ï¼šç±»ã€ å‡½æ•°ã€ å±æ€§ã€æ³¨è§£ç±»ã€æ„é€ å™¨ã€å±æ€§getterã€å±æ€§setterã€ç±»å‹åˆ«åã€‚æ­¤å¤–ï¼Œ@Deprecatedè¿™ä¸ªç±»å½“ä¸­è¿˜åŒ…å«äº†å‡ ä¸ªæˆå‘˜ï¼šmessageä»£è¡¨äº†åºŸå¼ƒçš„æç¤ºä¿¡æ¯ï¼›replaceWithä»£è¡¨äº†åº”è¯¥ç”¨ä»€ä¹ˆæ¥æ›¿ä»£åºŸå¼ƒçš„éƒ¨åˆ†ï¼›levelä»£è¡¨è­¦å‘Šçš„ç¨‹åº¦ï¼Œåˆ†åˆ«æ˜¯WARNINGã€ERRORã€HIDDENã€‚</p><p>OKï¼Œç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“å¦‚ä½•å®šä¹‰æ³¨è§£äº†ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•ç”¨å®ƒã€‚æˆ‘ä»¬ä»ç„¶ä»¥@Deprecatedæ³¨è§£ä¸ºä¾‹ã€‚</p><h3>æ³¨è§£çš„ä½¿ç”¨</h3><p>å‡è®¾ç°åœ¨æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªè®¡ç®—å™¨ï¼Œç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„Calculatorä»£ç å‡ºç°äº†é—®é¢˜ï¼Œç„¶åè¿™ä¸ªé—®é¢˜åœ¨CalculatorV3å½“ä¸­ä¿®å¤äº†ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„è°ƒç”¨æ–¹éƒ½å°†Calculatoræ”¹ä¸ºCalculatorV3ã€‚è¿™ç§æƒ…å†µï¼Œ@Deprecatedè¿™ä¸ªæ³¨è§£å°±æ°å¥½ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><pre><code class=\"language-plain\">@Deprecated(\n    message = \"Use CalculatorV3 instead.\",\n    replaceWith = ReplaceWith(\"CalculatorV3\"),\n    level = DeprecationLevel.ERROR\n)\nclass Calculator {\n    // é”™è¯¯é€»è¾‘\n    fun add(a: Int, b: Int): Int = a - b\n}\n\nclass CalculatorV3 {\n    // æ­£ç¡®é€»è¾‘\n    fun add(a: Int, b: Int): Int = a + b\n}\n</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨@Deprecatedä¿®é¥°äº†Calculatorè¿™ä¸ªç±»ã€‚messageä»£è¡¨äº†æŠ¥é”™çš„æç¤ºä¿¡æ¯ï¼›replaceWithä»£è¡¨äº†æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆï¼›DeprecationLevel.ERRORåˆ™ä»£è¡¨äº†IDEä¼šæŠŠè¿™ä¸ªé—®é¢˜å½“ä½œæ˜¯é”™è¯¯çš„æ¥çœ‹å¾…ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹@Deprecatedçš„å®é™…æ•ˆæœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/62/89/6212fddyy950855b67c6f267c5351e89.gif?wh=2102x1754\" alt=\"å›¾ç‰‡\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬åœ¨ä»£ç å½“ä¸­ä½¿ç”¨äº†Calculatorçš„æ—¶å€™ï¼ŒIDEä¼šæŠ¥é”™ï¼Œé¼ æ ‡æŒªåˆ°æŠ¥é”™å¤„åï¼ŒIDEä¼šæ˜¾ç¤ºmessageå½“ä¸­çš„å†…å®¹â€œUse CalculatorV3 instead.â€ã€‚å¦å¤–ï¼ŒIDEè¿˜ä¼šæä¾›ä¸€ä¸ªå¿«é€Ÿä¿®å¤çš„é€‰é¡¹â€œReplace with CalculatorV3â€ï¼Œåªè¦æˆ‘ä»¬ç‚¹å‡»é‚£ä¸ªé€‰é¡¹ï¼Œæˆ‘ä»¬çš„Calculatorå°±ä¼šè¢«ç›´æ¥æ›¿æ¢æˆCalculatorV3ï¼Œä»è€Œè¾¾åˆ°ä¿®å¤é”™è¯¯çš„ç›®çš„ã€‚</p><p>è¿˜æœ‰ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨çš„levelæ˜¯DeprecationLevel.ERRORï¼Œæ‰€ä»¥IDEä¼šç›´æ¥æŠ¥é”™ã€‚è€Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯DeprecationLevel.WARNINGï¼ŒIDEå°±åªä¼šæç¤ºä¸€ä¸ªè­¦å‘Šï¼Œè€Œä¸æ˜¯é”™è¯¯äº†ã€‚</p><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±äº†è§£äº†æ³¨è§£è¦å¦‚ä½•å®šä¹‰å’Œä½¿ç”¨ã€‚å…¶å®å•Šï¼Œåªè¦æˆ‘ä»¬çœŸæ­£ç†è§£äº†Kotlinçš„æ³¨è§£åˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå‰é¢çš„è¿™äº›æ³¨è§£çš„è¯­æ³•æ˜¯å¾ˆå®¹æ˜“å°±èƒ½è®°ä½çš„ã€‚ä¸è¿‡ï¼ŒKotlinæ³¨è§£åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿˜æœ‰ä¸€ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œé‚£å°±æ˜¯æ³¨è§£çš„<strong>ç²¾ç¡®ä½¿ç”¨ç›®æ ‡</strong>ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œæ¯”å¦‚<a href=\"https://github.com/google/dagger\">Dagger</a>å½“ä¸­çš„@Injectæ³¨è§£ï¼š</p><pre><code class=\"language-plain\">object Singleton {\n//    â‘ \n//    â†“\n    @set:Inject\n    lateinit var person: Person\n//     â†‘\n//     â‘¡\n}\n</code></pre><p>è¿™æ®µä»£ç ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„Daggerä½¿ç”¨åœºæ™¯ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰Daggerï¼Œé‚£ä¹Ÿæ²¡å…³ç³»ï¼Œä½ åªéœ€è¦å…³æ³¨ä¸€ä¸‹ä¸Šé¢çš„ä¸¤ä¸ªæ³¨é‡Šã€‚</p><ul>\n<li><strong>æ³¨é‡Šâ‘ </strong>ï¼šå¦‚æœå»æ‰setè¿™ä¸ªæ ‡è®°ï¼Œç›´æ¥ä½¿ç”¨@Injectè¿™ä¸ªæ³¨è§£ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚è¿™æ˜¯å› ä¸ºKotlinå½“ä¸­çš„ä¸€ä¸ªvarä¿®é¥°çš„å±æ€§ï¼Œå®ƒä¼šæœ‰å¤šç§å«ä¹‰ï¼šè¿™ä¸ªå±æ€§èƒŒåçš„å­—æ®µï¼ˆfieldï¼‰ã€è¿™ä¸ªå±æ€§å¯¹åº”çš„setterã€è¿˜æœ‰è¿™ä¸ªå±æ€§å¯¹åº”çš„getterï¼Œåœ¨æ²¡æœ‰æ˜ç¡®æ ‡æ³¨å‡ºæ¥è¦ç”¨å“ªä¸ªçš„æ—¶å€™ï¼Œ@Injectæ ¹æœ¬ä¸çŸ¥é“è¯¥å¦‚ä½•å†³å®šã€‚å› æ­¤ï¼Œè¿™é‡Œçš„â€œ@set:Injectâ€çš„ä½œç”¨ï¼Œå°±æ˜¯æ˜ç¡®æ ‡è®°å‡ºæ³¨è§£çš„ç²¾ç¡®ä½¿ç”¨ç›®æ ‡ï¼ˆUse-site targetsï¼‰ã€‚</li>\n<li><strong>æ³¨é‡Šâ‘¡</strong>ï¼šå¦‚æœæ²¡æœ‰lateinitè¿™ä¸ªå…³é”®å­—ï¼Œpersonè¿™ä¸ªå±æ€§æ˜¯å¿…é¡»è¦æœ‰åˆå§‹å€¼çš„ï¼Œè¦ä¹ˆç›´æ¥èµ‹å€¼ï¼Œè¦ä¹ˆåœ¨æ„é€ å‡½æ•°å½“ä¸­è¢«èµ‹å€¼ã€‚å› ä¸ºå¦‚æœå®ƒä¸è¢«åˆå§‹åŒ–ï¼Œpersonè¿™ä¸ªå±æ€§å°†ä¸ºç©ºï¼Œè€Œè¿™ä¸ªå°±å’Œå®ƒçš„ç±»å‹â€œä¸å¯ä¸ºç©ºçš„Personç±»å‹â€å†²çªäº†ã€‚è€ŒåŠ ä¸Šlateinitä¿®é¥°çš„å±æ€§ï¼Œå³ä½¿å®ƒæ˜¯ä¸å¯ä¸ºç©ºçš„ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šå…è®¸å®ƒæ— åˆå§‹å€¼ã€‚ä½†å½“æˆ‘ä»¬éœ€è¦ä¾èµ–æ³¨å…¥çš„æ—¶å€™ï¼Œå¸¸å¸¸éœ€è¦ä¸lateinitç»“åˆä½¿ç”¨ã€‚</li>\n</ul><p>å®é™…ä¸Šï¼Œæ³¨è§£çš„ç²¾ç¡®ä½¿ç”¨ç›®æ ‡ï¼Œä¸€èˆ¬æ˜¯å’Œæ³¨è§£ä¸€èµ·ä½¿ç”¨çš„ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­å½“ä¸­ï¼Œsetå°±æ˜¯å’Œ@Injectä¸€èµ·ä½¿ç”¨çš„ã€‚è€Œé™¤äº†setä»¥å¤–ï¼ŒKotlinå½“ä¸­è¿˜æœ‰å…¶ä»–çš„ä½¿ç”¨ç›®æ ‡ï¼š</p><ul>\n<li>fileï¼Œä½œç”¨äºæ–‡ä»¶ï¼›</li>\n<li>propertyï¼Œä½œç”¨äºå±æ€§ï¼›</li>\n<li>fieldï¼Œä½œç”¨äºå­—æ®µï¼›</li>\n<li>getï¼Œä½œç”¨äºå±æ€§getterï¼›</li>\n<li>setï¼Œä½œç”¨äºå±æ€§setterï¼›</li>\n<li>receiverï¼Œä½œç”¨äºæ‰©å±•çš„æ¥å—è€…å‚æ•°ï¼›</li>\n<li>paramï¼Œä½œç”¨äºæ„é€ å‡½æ•°å‚æ•°ï¼›</li>\n<li>setparamï¼Œä½œç”¨äºå‡½æ•°å‚æ•°ï¼›</li>\n<li>delegateï¼Œä½œç”¨äºå§”æ‰˜å­—æ®µã€‚</li>\n</ul><p>å¥½ï¼Œç†è§£äº†æ³¨è§£è¿™ä¸ªç‰¹æ€§ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹Kotlinçš„åå°„ã€‚</p><h2>è®¤è¯†åå°„</h2><p>åå°„ï¼Œæ˜¯Kotlinå½“ä¸­å¦ä¸€ä¸ªæ¯”è¾ƒæŠ½è±¡çš„æ¦‚å¿µã€‚å¦‚æœè¯´<strong>æ³¨è§£æ˜¯æœ€ç†Ÿæ‚‰çš„é™Œç”Ÿäºº</strong>ï¼Œé‚£<strong>åå°„å°±å•çº¯åªæ˜¯ä¸ªé™Œç”Ÿäºº</strong>äº†ã€‚å› ä¸ºï¼Œæˆ‘ä»¬å¾ˆå°‘ä¼šåœ¨å¹³æ—¶çš„ä¸šåŠ¡å¼€å‘å½“ä¸­ç›´æ¥ç”¨åˆ°åå°„ã€‚ä½†æ˜¯ï¼Œåœ¨æ¶æ„è®¾è®¡çš„æ—¶å€™ï¼Œåå°„å´å¯ä»¥æå¤§åœ°æå‡æ¶æ„çš„çµæ´»æ€§ã€‚å¾ˆå¤šçƒ­é—¨çš„å¼€æºåº“ï¼Œä¹Ÿéƒ½å–œæ¬¢ç”¨åå°„æ¥åšä¸€äº›ä¸åŒå¯»å¸¸çš„äº‹æƒ…ã€‚å› æ­¤ï¼Œåå°„ä¹Ÿæ˜¯æå…¶é‡è¦çš„ä¸€ä¸ªè¯­æ³•ç‰¹æ€§ã€‚</p><p>æ‰€æœ‰çš„è®¡ç®—æœºç¨‹åºå…¶å®éƒ½æ˜¯æœåŠ¡äºçœŸå®ä¸–ç•Œï¼Œç”¨æ¥è§£å†³å®é™…é—®é¢˜çš„ã€‚æ‰€ä»¥ï¼Œå…¶å®æˆ‘ä»¬ä¹Ÿé€šè¿‡ä¸€äº›çœŸå®ä¸–ç•Œçš„ä¾‹å­æ¥ç†è§£åå°„çš„æœ¬è´¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/81/3e/81b9c3253cce6a4b7a89cd44yyb21c3e.png?wh=1920x1280\" alt=\"å›¾ç‰‡\"></p><p>å¤äººäº‘ï¼šå¾æ—¥ä¸‰çœå¾èº«ï¼ŒæŒ‡çš„æ˜¯äººçš„è‡ªæˆ‘åçœèƒ½åŠ›ã€‚<strong>åå°„ï¼Œåˆ™æ˜¯ç¨‹åºè‡ªæˆ‘åçœçš„èƒ½åŠ›ã€‚</strong>äººçš„è‡ªæˆ‘åçœçš„èƒ½åŠ›ï¼Œè·Ÿç¨‹åºçš„åå°„ï¼Œå®ƒä»¬ä¹‹é—´æœ‰è®¸å¤šç›¸ä¼¼ä¹‹å¤„ã€‚</p><ul>\n<li>äººç±»å¯ä»¥<strong>åçœè‡ªå·±å½“å‰çš„çŠ¶æ€</strong>ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬éšæ—¶å¯ä»¥çŸ¥é“è‡ªå·±æ˜¯ä¸æ˜¯å›°äº†ã€‚è€Œåœ¨Kotlinå½“ä¸­ï¼Œç¨‹åºå¯ä»¥é€šè¿‡åå°„æ¥æ£€æŸ¥ä»£ç è‡ªèº«çš„çŠ¶æ€ï¼Œæ¯”å¦‚è¯´ï¼Œåˆ¤æ–­æŸä¸ªå˜é‡ï¼Œå®ƒæ˜¯ä¸æ˜¯å¯å˜çš„ã€‚</li>\n<li>å¦å¤–ï¼Œäººç±»åçœè‡ªå·±çš„çŠ¶æ€ä»¥åï¼Œè¿˜å¯ä»¥<strong>ä¸»åŠ¨æ”¹å˜è‡ªå·±çš„çŠ¶æ€</strong>ã€‚æ¯”å¦‚è¯´ï¼Œå›°äº†å°±ä¼‘æ¯ä¸€ä¼šå„¿ã€é¥¿äº†å°±åƒé¥­ã€æ¸´äº†å°±å–ç‚¹æ°´ã€‚è€Œåœ¨Kotlinå½“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶ï¼Œç”¨åå°„æ¥æŸ¥çœ‹å˜é‡çš„å€¼æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œå¦‚æœä¸ç¬¦åˆé¢„æœŸï¼Œæˆ‘ä»¬å°±å¯ä»¥åŠ¨æ€ä¿®æ”¹è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå³ä½¿è¿™ä¸ªå˜é‡æ˜¯privateçš„ç”šè‡³æ˜¯finalçš„ã€‚</li>\n<li>è¿˜æœ‰ï¼Œäººç±»å¯ä»¥<strong>æ ¹æ®çŠ¶æ€ä½œå‡ºä¸åŒçš„å†³ç­–</strong>ã€‚æ¯”å¦‚è¯´ï¼Œä¸Šç­çš„è·¯ä¸Šï¼Œå¦‚æœå¿«è¿Ÿåˆ°äº†ï¼Œæˆ‘ä»¬å°±ä¼šèµ°å¿«ç‚¹ï¼Œå¦‚æœæ—¶é—´å¾ˆå……è¶³ï¼Œå°±å¯ä»¥èµ°æ…¢ä¸€ç‚¹ã€‚è€Œåœ¨ç¨‹åºä¸–ç•Œé‡Œï¼Œ<a href=\"https://github.com/google/gson/blob/master/UserGuide.md\">JSONè§£æ</a>ç»å¸¸ä¼šç”¨åˆ°@SerializedNameè¿™ä¸ªæ³¨è§£ï¼Œå¦‚æœå±æ€§æœ‰@SerializedNameä¿®é¥°çš„è¯ï¼Œå®ƒå°±ä»¥æŒ‡å®šçš„åç§°ä¸ºå‡†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£å°±ç›´æ¥ä½¿ç”¨å±æ€§çš„åç§°æ¥è§£æã€‚</li>\n</ul><p>æ‰€ä»¥ï¼Œæ€»çš„æ¥çœ‹ï¼ŒKotlinåå°„å…·å¤‡è¿™ä¸‰ä¸ªç‰¹è´¨ï¼š</p><ul>\n<li><strong>æ„ŸçŸ¥</strong>ç¨‹åºçš„çŠ¶æ€ï¼ŒåŒ…å«ç¨‹åºçš„è¿è¡ŒçŠ¶æ€ï¼Œè¿˜æœ‰æºä»£ç ç»“æ„ï¼›</li>\n<li><strong>ä¿®æ”¹</strong>ç¨‹åºçš„çŠ¶æ€ï¼›</li>\n<li>æ ¹æ®ç¨‹åºçš„çŠ¶æ€ï¼Œ<strong>è°ƒæ•´</strong>è‡ªèº«çš„å†³ç­–è¡Œä¸ºã€‚</li>\n</ul><h3>åå°„çš„åº”ç”¨</h3><p>åœ¨Kotlinå½“ä¸­ï¼Œåå°„åº“å¹¶æ²¡æœ‰ç›´æ¥é›†æˆåˆ°æ ‡å‡†åº“å½“ä¸­ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿ä¸€äº›å¯¹ç¨‹åºå®‰è£…åŒ…æ•æ„Ÿçš„åº”ç”¨ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚æ¥é€‰æ‹©æ˜¯å¦è¦ç”¨Kotlinåå°„ã€‚æ¯”å¦‚ï¼Œåœ¨Androidå¼€å‘å½“ä¸­ï¼Œæˆ‘ä»¬å¯¹å®‰è£…åŒ…ä½“ç§¯å°±ååˆ†æ•æ„Ÿï¼Œå¦‚æœæ²¡æœ‰åå°„çš„éœ€æ±‚ï¼Œå°±å®Œå…¨ä¸éœ€è¦å¤šå¼•å…¥è¿™ä¸ªä¾èµ–ã€‚</p><p>è€Œå¯¹åº”çš„ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç”¨åˆ°åå°„ï¼Œå°±å¿…é¡»è¦å¼•å…¥è¿™ä¸ªä¾èµ–ï¼š</p><pre><code class=\"language-groovy\">implementation \"org.jetbrains.kotlin:kotlin-reflect\"\n</code></pre><p>å‰é¢æˆ‘ä»¬åˆšäº†è§£è¿‡Kotlinåå°„çš„ä¸‰ä¸ªç‰¹è´¨ï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±ç”¨ä»£ç æ¥æ¢ç´¢ä¸‹è¿™ä¸‰ç§ç‰¹è´¨ã€‚<br>\nåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å†™å‡ºæ¥çš„ç¨‹åºï¼Œå…¶å®ä¹Ÿå¯ä»¥æ„ŸçŸ¥è‡ªèº«éƒ¨åˆ†çš„çŠ¶æ€ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å‰é¢è¯¾ç¨‹ä¸­å†™çš„è®¡ç®—å™¨ç¨‹åºï¼Œè¿˜æœ‰è¯é¢‘ç»Ÿè®¡ç¨‹åºï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹è¾“å…¥æ•°æ®çŠ¶æ€çš„æ„ŸçŸ¥ã€‚ä¸è¿‡ï¼Œå®ƒä»¬æ„ŸçŸ¥çš„çŠ¶æ€ååˆ†æœ‰é™ã€‚</p><p>å‡è®¾ï¼Œç°åœ¨æœ‰ä¸€ä¸ªå¾…å®ç°çš„å‡½æ•°readMembersã€‚è¿™ä¸ªå‡½æ•°çš„å‚æ•°objå¯èƒ½æ˜¯ä»»ä½•çš„ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦è¯»å–objå½“ä¸­æ‰€æœ‰çš„æˆå‘˜å±æ€§çš„åç§°å’Œå€¼ï¼Œé‚£ä¹ˆå…·ä½“è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><pre><code class=\"language-plain\">fun main() {\n    val student = Student(\"Tom\", 99.5, 170)\n    val school = School(\"PKU\", \"Beijing...\")\n\n    readMembers(student)\n    readMembers(school)\n}\n\nfun readMembers(obj: Any) {\n    // è¯»å–objçš„æ‰€æœ‰æˆå‘˜å±æ€§çš„åç§°å’Œå€¼\n}\n\ndata class Student(\n    val name: String,\n    val score: Double,\n    val height: Int\n)\n\ndata class School(\n    val name: String,\n    var address: String\n)\n\n// è¦æ±‚readMemberså‡½æ•°èƒ½å¤Ÿè¾“å‡ºä»¥ä¸‹å†…å®¹ï¼š\n\nStudent.height=170\nStudent.name=Tom\nStudent.score=99.5\nSchool.address=Beijing...\nSchool.name=PKU\n</code></pre><p>ä»ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒreadMembers()è¿™ä¸ªå‡½æ•°æ— æ³•æå‰çŸ¥é“å‚æ•°æ˜¯ä»€ä¹ˆç±»å‹ï¼Œä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªå‡½æ•°å½“ä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦èƒ½å¤Ÿå‡†ç¡®æ‰¾åˆ°objçš„æ‰€æœ‰æˆå‘˜å±æ€§ï¼Œç„¶åè¾“å‡ºå®ƒä»¬çš„åç§°å’Œå€¼ã€‚<br>\nå¯¹äºè¿™æ ·çš„é—®é¢˜ï¼Œä¹Ÿè®¸ä½ ä¼šç¬¬ä¸€æ—¶é—´æƒ³åˆ°ç”¨whenè¡¨è¾¾å¼ï¼Œå†™å‡ºç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p><pre><code class=\"language-plain\">fun readMembers(obj: Any) {\n    when(obj) {\n        is Student -&gt; { /*...*/ }\n        is School -&gt; { /*...*/}\n        else -&gt; { /*...*/}\n    }\n}\n</code></pre><p>ä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬æ˜¯åªæœ‰Studentã€Schoolè¿™ä¸¤ç§æƒ…å†µï¼Œè€Œåœ¨å®é™…æƒ…å†µä¸‹ï¼Œobjå¯èƒ½çš„ç±»å‹æ˜¯æˆåƒä¸Šä¸‡çš„ï¼Œæˆ‘ä»¬æ ¹æœ¬æ— æ³•ç”¨whençš„æ–¹å¼æå‰ç¡¬ç¼–ç è¿›è¡Œé¢„æµ‹ã€‚æ¯”å¦‚ä½ å¯ä»¥å†çœ‹çœ‹ä¸‹é¢è¿™æ®µç¤ºä¾‹ï¼š</p><pre><code class=\"language-plain\">fun readMembers(obj: Any) {\n    when(obj) {\n        is Student -&gt; { /*...*/ }\n        is School -&gt; { /*...*/}\n        // ç¡¬ç¼–ç çš„è¯ï¼Œè¿™é‡Œè¦å†™æˆåƒä¸Šä¸‡ä¸ªé€»è¾‘åˆ†æ”¯ï¼Œæ ¹æœ¬ä¸å¯èƒ½åšåˆ°\n        else -&gt; { /*...*/}\n    }\n}\n</code></pre><p>å¯è§ï¼Œå³ä½¿æˆ‘ä»¬æœ‰å¿ƒæƒ³è¦å†™ä¸Šä¸‡ä¸ªé€»è¾‘åˆ†æ”¯ï¼Œé‚£å½“ä¸­çš„ä»£ç é‡ä¹Ÿæ˜¯ä¸å¯æƒ³è±¡çš„ã€‚å› æ­¤ï¼Œå¯¹äºç±»ä¼¼è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨åå°„äº†ã€‚</p><pre><code class=\"language-plain\">fun readMembers(obj: Any) {\n    obj::class.memberProperties.forEach {\n        println(\"${obj::class.simpleName}.${it.name}=${it.getter.call(obj)}\")\n    }\n}\n</code></pre><p>çœ‹ï¼Œé€šè¿‡åå°„ï¼Œç®€å•çš„å‡ è¡Œä»£ç å°±æå®šäº†è¿™ä¸ªéœ€æ±‚ã€‚å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦åå°„ï¼Œå¯èƒ½ä¼šè§‰å¾—ä¸Šé¢çš„ä»£ç æœ‰ç‚¹éš¾æ‡‚ï¼Œæˆ‘æ¥å¸¦ä½ åˆ†æä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œæ˜¯<strong>obj::class</strong>ï¼Œè¿™æ˜¯Kotlinåå°„çš„è¯­æ³•ï¼Œæˆ‘ä»¬å«åš<strong>ç±»å¼•ç”¨</strong>ï¼Œé€šè¿‡è¿™æ ·çš„è¯­æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯»å–ä¸€ä¸ªå˜é‡çš„â€œç±»å‹ä¿¡æ¯â€ï¼Œå¹¶ä¸”å°±èƒ½æ‹¿åˆ°è¿™ä¸ªå˜é‡çš„ç±»å‹ï¼Œå®ƒçš„ç±»å‹æ˜¯KClassã€‚</p><pre><code class=\"language-plain\">public actual interface KClass&lt;T : Any&gt; : KDeclarationContainer, KAnnotatedElement, KClassifier {\n\n    public actual val simpleName: String?\n\n    public actual val qualifiedName: String?\n\n    override val members: Collection&lt;KCallable&lt;*&gt;&gt;\n    // çœç•¥éƒ¨åˆ†ä»£ç \n}\n</code></pre><p>è¿™ä¸ªKClasså…¶å®å°±ä»£è¡¨äº†ä¸€ä¸ªKotlinç±»ï¼Œé€šè¿‡obj::classï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°è¿™ä¸ªç±»å‹çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´ï¼Œç±»çš„åç§°â€œobj::class.simpleNameâ€ã€‚è€Œå¦‚æœè¦è·å–ç±»çš„æ‰€æœ‰æˆå‘˜å±æ€§ï¼Œæˆ‘ä»¬è®¿é—®å®ƒçš„æ‰©å±•å±æ€§memberPropertieså°±å¯ä»¥äº†ã€‚</p><pre><code class=\"language-plain\">val &lt;T : Any&gt; KClass&lt;T&gt;.memberProperties: Collection&lt;KProperty1&lt;T, *&gt;&gt;\n    get() = (this as KClassImpl&lt;T&gt;).data().allNonStaticMembers.filter { it.isNotExtension &amp;&amp; it is KProperty1&lt;*, *&gt; } as Collection&lt;KProperty1&lt;T, *&gt;&gt;\n</code></pre><p>åœ¨æ‹¿åˆ°æ‰€æœ‰çš„æˆå‘˜å±æ€§ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>forEach</strong>éå†æ‰€æœ‰çš„å±æ€§ï¼Œå®ƒçš„ç±»å‹æ˜¯KProperty1ï¼ŒåŒæ—¶ä¹Ÿæ˜¯KCallableçš„å­ç±»ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨å±æ€§çš„getter.call()ï¼Œå°±å¯ä»¥æ‹¿åˆ°objå±æ€§çš„å€¼äº†ã€‚</p><p>è¿™æ ·ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±å·²ç»å¯ä»¥æ„ŸçŸ¥åˆ°è‡ªèº«çš„çŠ¶æ€äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å°è¯•ä¿®æ”¹è‡ªèº«çš„çŠ¶æ€ï¼Œè¿™æ˜¯åå°„çš„ç¬¬äºŒä¸ªç‰¹è´¨ã€‚</p><p>å…·ä½“éœ€æ±‚æ˜¯è¿™æ ·çš„ï¼šå¦‚æœä¼ å…¥çš„å‚æ•°å½“ä¸­ï¼Œå­˜åœ¨Stringç±»å‹çš„addresså˜é‡ï¼Œæˆ‘ä»¬å°±å°†å…¶æ”¹ä¸ºChinaã€‚</p><pre><code class=\"language-plain\">fun main() {\n    val student = Student(\"Tom\", 99.5, 170)\n    val school = School(\"PKU\", \"Beijing...\")\n\n    readMembers(student)\n    readMembers(school)\n\n    // ä¿®æ”¹å…¶ä¸­çš„addresså±æ€§\n    modifyAddressMember(school)\n\n    readMembers(school)\n    readMembers(student)\n}\n\nfun modifyAddressMember(obj: Any) {\n    obj::class.memberProperties.forEach {\n        if (it.name == \"address\" &amp;&amp; // â‘ \n            it is KMutableProperty1 &amp;&amp; // â‘¡\n            it.setter.parameters.size == 2 &amp;&amp; // â‘¢\n            it.getter.returnType.classifier == String::class // â‘£\n        ) {\n            // â‘¤\n            it.setter.call(obj, \"China\")\n            println(\"====Address changed.====\")\n        }\n    }\n}\n\n// è¿è¡Œç»“æœï¼š\nStudent.height=170\nStudent.name=Tom\nStudent.score=99.5\n// æ³¨æ„è¿™é‡Œ\nSchool.address=Beijing...\nSchool.name=PKU\n====Address changed.====\n// æ³¨æ„è¿™é‡Œ\nSchool.address=China\nSchool.name=PKU\nStudent.height=170\nStudent.name=Tom\nStudent.score=99.5\n</code></pre><p>ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬è¿è¡Œäº†modifyAddressMember(school)è¿™è¡Œä»£ç ä»¥åï¼Œåå°„ä»£ç å°±ä¼šæ£€æŸ¥ä¼ å…¥çš„å˜é‡å½“ä¸­ï¼Œæ˜¯å¦å­˜åœ¨Stringç±»å‹çš„addressï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±ä¼šå°†å®ƒçš„å€¼ä¿®æ”¹ä¸ºâ€œChinaâ€ã€‚</p><p>è¿™é‡Œä½ å¯ä»¥å…³æ³¨ä¸‹æˆ‘åœ¨å…¶ä¸­æ ‡å‡ºæ¥çš„å››ä¸ªæ³¨é‡Šï¼Œå®ƒä»¬å°±ä»£è¡¨äº†å…³é”®çš„é€»è¾‘ï¼š</p><ul>\n<li>æ³¨é‡Šâ‘ ï¼Œåˆ¤æ–­å±æ€§çš„åç§°æ˜¯å¦ä¸ºaddressï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è·³è¿‡ï¼›</li>\n<li>æ³¨é‡Šâ‘¡ï¼Œåˆ¤æ–­å±æ€§æ˜¯å¦å¯å˜ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­å½“ä¸­addressæ˜¯ç”¨varä¿®é¥°çš„ï¼Œå› æ­¤å®ƒçš„ç±»å‹æ˜¯KMutableProperty1ï¼›</li>\n<li>æ³¨é‡Šâ‘¢ï¼Œæˆ‘ä»¬åœ¨åé¢è¦è°ƒç”¨å±æ€§çš„setterï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆåˆ¤æ–­setterçš„å‚æ•°æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œè¿™é‡Œsetterçš„å‚æ•°ä¸ªæ•°åº”è¯¥æ˜¯2ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯objè‡ªèº«ï¼Œç¬¬äºŒä¸ªæ˜¯å®é™…çš„å€¼ï¼›</li>\n<li>æ³¨é‡Šâ‘£ï¼Œæ ¹æ®å±æ€§çš„getterçš„è¿”å›å€¼ç±»å‹returnTypeï¼Œæ¥åˆ¤æ–­å±æ€§çš„ç±»å‹æ˜¯ä¸æ˜¯Stringç±»å‹ï¼›</li>\n<li>æ³¨é‡Šâ‘¤ï¼Œè°ƒç”¨å±æ€§çš„setteræ–¹æ³•ï¼Œä¼ å…¥objï¼Œè¿˜æœ‰â€œChinaâ€ï¼Œæ¥å®Œæˆå±æ€§çš„èµ‹å€¼ã€‚</li>\n</ul><p>å¥½ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å·²ç»äº†è§£äº†åå°„çš„ä¸¤ç§ç‰¹è´¨ï¼Œåˆ†åˆ«æ˜¯æ„ŸçŸ¥ç¨‹åºçš„çŠ¶æ€å’Œä¿®æ”¹ç¨‹åºçš„çŠ¶æ€ã€‚ç°åœ¨åªå‰©ä¸‹ç¬¬ä¸‰ç§ï¼Œæ ¹æ®ç¨‹åºçŠ¶æ€ä½œå‡ºä¸åŒå†³ç­–ã€‚è¿™ä¸ªå…¶å®éå¸¸å®¹æ˜“åšåˆ°ã€‚</p><p>å‡å¦‚åœ¨å‰é¢çš„ä¾‹å­çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æƒ³è¦å¢åŠ ä¸€ä¸ªåŠŸèƒ½ï¼šå¦‚æœä¼ å…¥çš„å‚æ•°æ²¡æœ‰ç¬¦åˆéœ€æ±‚çš„addresså±æ€§ï¼Œæˆ‘ä»¬å°±è¾“å‡ºä¸€è¡Œé”™è¯¯æ—¥å¿—ã€‚è¿™å…¶å®ä¹Ÿå°±ä»£è¡¨äº†æ ¹æ®ç¨‹åºçš„çŠ¶æ€ï¼Œä½œå‡ºä¸åŒçš„è¡Œä¸ºã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™æ®µç¤ºä¾‹ï¼Œå…¶ä¸­çš„elseåˆ†æ”¯å°±æ˜¯æˆ‘ä»¬çš„å†³ç­–è¡Œä¸ºâ€œè¾“å‡ºé”™è¯¯æ—¥å¿—â€ï¼š</p><pre><code class=\"language-plain\">fun modifyAddressMember(obj: Any) {\n    obj::class.memberProperties.forEach {\n        if (it.name == \"address\" &amp;&amp;\n            it is KMutableProperty1 &amp;&amp;\n            it.getter.returnType.classifier == String::class\n        ) {\n            it.setter.call(obj, \"China\")\n            println(\"====Address changed.====\")\n        } else {\n            // å·®åˆ«åœ¨è¿™é‡Œ\n            println(\"====Wrong type.====\")\n        }\n    }\n}\n\n// è¾“å‡ºç»“æœï¼š\nStudent.height=170\nStudent.name=Tom\nStudent.score=99.5\nSchool.address=Beijing...\nSchool.name=PKU\n====Address changed.====\n====Wrong type.====  // å·®åˆ«åœ¨è¿™é‡Œ\nSchool.address=China\nSchool.name=PKU\nStudent.height=170\nStudent.name=Tom\nStudent.score=99.5\n</code></pre><p>åœ¨å‰é¢çš„å‡ ä¸ªæ¡ˆä¾‹å½“ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†Kotlinåå°„çš„å‡ ä¸ªå…³é”®çš„åå°„Apiå’Œç±»ï¼šKClassã€KCallableã€KParameterã€KTypeã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥è¿›ä¸€æ­¥çœ‹çœ‹å®ƒä»¬çš„å…³é”®æˆå‘˜ã€‚</p><p><strong>KClassä»£è¡¨äº†ä¸€ä¸ªKotlinçš„ç±»ï¼Œä¸‹é¢æ˜¯å®ƒçš„é‡è¦æˆå‘˜ï¼š</strong></p><ul>\n<li>simpleNameï¼Œç±»çš„åç§°ï¼Œå¯¹äºåŒ¿åå†…éƒ¨ç±»ï¼Œåˆ™ä¸ºnullï¼›</li>\n<li>qualifiedNameï¼Œå®Œæ•´çš„ç±»åï¼›</li>\n<li>membersï¼Œæ‰€æœ‰æˆå‘˜å±æ€§å’Œæ–¹æ³•ï¼Œç±»å‹æ˜¯<code>Collection&lt;KCallable&lt;*&gt;&gt;</code>ï¼›</li>\n<li>constructorsï¼Œç±»çš„æ‰€æœ‰æ„é€ å‡½æ•°ï¼Œç±»å‹æ˜¯<code>Collection&lt;KFunction&lt;T&gt;&gt;&gt;</code>ï¼›</li>\n<li>nestedClassesï¼Œç±»çš„æ‰€æœ‰åµŒå¥—ç±»ï¼Œç±»å‹æ˜¯<code>Collection&lt;KClass&lt;*&gt;&gt;</code>ï¼›</li>\n<li>visibilityï¼Œç±»çš„å¯è§æ€§ï¼Œç±»å‹æ˜¯<code>KVisibility?</code>ï¼Œåˆ†åˆ«æ˜¯è¿™å‡ ç§æƒ…å†µï¼ŒPUBLICã€PROTECTEDã€INTERNALã€PRIVATEï¼›</li>\n<li>isFinalï¼Œæ˜¯ä¸æ˜¯finalï¼›</li>\n<li>isOpenï¼Œæ˜¯ä¸æ˜¯openï¼›</li>\n<li>isAbstractï¼Œæ˜¯ä¸æ˜¯æŠ½è±¡çš„ï¼›</li>\n<li>isSealedï¼Œæ˜¯ä¸æ˜¯å¯†å°çš„ï¼›</li>\n<li>isDataï¼Œæ˜¯ä¸æ˜¯æ•°æ®ç±»ï¼›</li>\n<li>isInnerï¼Œæ˜¯ä¸æ˜¯å†…éƒ¨ç±»ï¼›</li>\n<li>isCompanionï¼Œæ˜¯ä¸æ˜¯ä¼´ç”Ÿå¯¹è±¡ï¼›</li>\n<li>isFunï¼Œæ˜¯ä¸æ˜¯å‡½æ•°å¼æ¥å£ï¼›</li>\n<li>isValueï¼Œæ˜¯ä¸æ˜¯Value Classã€‚</li>\n</ul><p><strong>KCallableä»£è¡¨äº†Kotlinå½“ä¸­çš„æ‰€æœ‰å¯è°ƒç”¨çš„å…ƒç´ ï¼Œæ¯”å¦‚å‡½æ•°ã€å±æ€§ã€ç”šè‡³æ˜¯æ„é€ å‡½æ•°ã€‚ä¸‹é¢æ˜¯KCallableçš„é‡è¦æˆå‘˜ï¼š</strong></p><ul>\n<li>nameï¼Œåç§°ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå±æ€§å’Œå‡½æ•°éƒ½æœ‰åç§°ï¼›</li>\n<li>parametersï¼Œæ‰€æœ‰çš„å‚æ•°ï¼Œç±»å‹æ˜¯<code>List&lt;KParameter&gt;</code>ï¼ŒæŒ‡çš„æ˜¯è°ƒç”¨è¿™ä¸ªå…ƒç´ æ‰€éœ€çš„æ‰€æœ‰å‚æ•°ï¼›</li>\n<li>returnTypeï¼Œè¿”å›å€¼ç±»å‹ï¼Œç±»å‹æ˜¯KTypeï¼›</li>\n<li>typeParametersï¼Œæ‰€æœ‰çš„ç±»å‹å‚æ•°(æ¯”å¦‚æ³›å‹)ï¼Œç±»å‹æ˜¯<code>List&lt;KTypeParameter&gt;</code>ï¼›</li>\n<li>call()ï¼ŒKCallableå¯¹åº”çš„è°ƒç”¨æ–¹æ³•ï¼Œåœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°±è°ƒç”¨è¿‡setterã€getterçš„call()æ–¹æ³•ã€‚</li>\n<li>visibilityï¼Œå¯è§æ€§ï¼›</li>\n<li>isSuspendï¼Œæ˜¯ä¸æ˜¯æŒ‚èµ·å‡½æ•°ã€‚</li>\n</ul><p><strong>KParameterï¼Œä»£è¡¨äº†<code>KCallable</code>å½“ä¸­çš„å‚æ•°ï¼Œå®ƒçš„é‡è¦æˆå‘˜å¦‚ä¸‹ï¼š</strong></p><ul>\n<li>indexï¼Œå‚æ•°çš„ä½ç½®ï¼Œä¸‹æ ‡ä»0å¼€å§‹ï¼›</li>\n<li>nameï¼Œå‚æ•°çš„åç§°ï¼Œæºç å½“ä¸­å‚æ•°çš„åç§°ï¼›</li>\n<li>typeï¼Œå‚æ•°çš„ç±»å‹ï¼Œç±»å‹æ˜¯KTypeï¼›</li>\n<li>kindï¼Œå‚æ•°çš„ç§ç±»ï¼Œå¯¹åº”ä¸‰ç§æƒ…å†µï¼šINSTANCEæ˜¯å¯¹è±¡å®ä¾‹ã€EXTENSION_RECEIVERæ˜¯æ‰©å±•æ¥å—è€…ã€VALUEæ˜¯å®é™…çš„å‚æ•°å€¼ã€‚</li>\n</ul><p><strong>KTypeï¼Œä»£è¡¨äº†Kotlinå½“ä¸­çš„ç±»å‹ï¼Œå®ƒé‡è¦çš„æˆå‘˜å¦‚ä¸‹ï¼š</strong></p><ul>\n<li>classifierï¼Œç±»å‹å¯¹åº”çš„Kotlinç±»ï¼Œå³KClassï¼Œæˆ‘ä»¬å‰é¢çš„ä¾‹å­ä¸­ï¼Œå°±æ˜¯ç”¨çš„classifier == String::classæ¥åˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯Stringç±»å‹çš„ï¼›</li>\n<li>argumentsï¼Œç±»å‹çš„ç±»å‹å‚æ•°ï¼Œçœ‹èµ·æ¥å¥½åƒæœ‰ç‚¹ç»•ï¼Œå…¶å®å®ƒå°±æ˜¯è¿™ä¸ªç±»å‹çš„æ³›å‹å‚æ•°ï¼›</li>\n<li>isMarkedNullableï¼Œæ˜¯å¦åœ¨æºä»£ç ä¸­æ ‡è®°ä¸ºå¯ç©ºç±»å‹ï¼Œå³è¿™ä¸ªç±»å‹çš„åé¢æœ‰æ²¡æœ‰â€œ?â€ä¿®é¥°ã€‚</li>\n</ul><p>æ‰€ä»¥ï¼Œå½’æ ¹ç»“åº•ï¼Œ<strong>åå°„ï¼Œå…¶å®å°±æ˜¯Kotlinä¸ºæˆ‘ä»¬å¼€å‘è€…æä¾›çš„ä¸€ä¸ªå·¥å…·</strong>ï¼Œé€šè¿‡è¿™ä¸ªå·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥è®©ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™â€œè‡ªæˆ‘åçœâ€ã€‚è¿™é‡Œçš„â€œè‡ªæˆ‘åçœâ€ä¸€å…±æœ‰ä¸‰ç§æƒ…å†µï¼Œå…¶å®è·Ÿæˆ‘ä»¬çš„ç°å®ç”Ÿæ´»ç±»ä¼¼ã€‚</p><ul>\n<li>ç¬¬ä¸€ç§æƒ…å†µï¼Œç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡åå°„æ¥æŸ¥çœ‹è‡ªèº«çš„çŠ¶æ€ã€‚</li>\n<li>ç¬¬äºŒç§æƒ…å†µï¼Œç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥ä¿®æ”¹è‡ªèº«çš„çŠ¶æ€ã€‚</li>\n<li>ç¬¬ä¸‰ç§æƒ…å†µï¼Œç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®è‡ªèº«çš„çŠ¶æ€è°ƒæ•´è‡ªèº«çš„è¡Œä¸ºã€‚</li>\n</ul><h2>å°ç»“</h2><p>å¥½äº†ï¼Œè®©æˆ‘ä»¬æ¥åšä¸ªç®€å•çš„æ€»ç»“å§ã€‚</p><p>æ³¨è§£å’Œåå°„ï¼Œæ˜¯Kotlinå½“ä¸­ååˆ†é‡è¦çš„ç‰¹æ€§ï¼Œå®ƒä»¬å¯ä»¥æå¤§åœ°æå‡ç¨‹åºçš„çµæ´»æ€§ã€‚é‚£ä¹ˆï¼Œåœ¨ä½¿ç”¨æ³¨è§£å’Œåå°„çš„æ—¶å€™ï¼Œä½ è¦çŸ¥é“ï¼Œ<strong>æ³¨è§£ï¼Œå…¶å®å°±æ˜¯â€œç¨‹åºä»£ç çš„ä¸€ç§è¡¥å……â€ï¼Œè€Œåå°„ï¼Œå…¶å®å°±æ˜¯â€œç¨‹åºä»£ç è‡ªæˆ‘åçœçš„ä¸€ç§æ–¹å¼â€ã€‚</strong></p><p>åœ¨è¿™èŠ‚è¯¾å½“ä¸­ï¼Œæˆ‘ä»¬å·²ç»åˆ†åˆ«è§è¯†äº†æ³¨è§£ä¸åå°„çš„å¨åŠ›ã€‚é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬å°†å®ƒä»¬ä¸¤è€…ç»“åˆèµ·æ¥ä½¿ç”¨ä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„ååº”å‘¢ï¼Ÿæˆ‘ä»¬å°†åœ¨ä¸‹èŠ‚è¯¾å½“ä¸­æ­æ™“ï¼</p><h2>æ€è€ƒé¢˜</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Kotlinçš„æ³¨è§£ã€åå°„ï¼Œå…¶å®Javaå½“ä¸­ä¹Ÿæ˜¯æœ‰æ³¨è§£ä¸åå°„çš„ã€‚é‚£ä¹ˆä½ çŸ¥é“Kotlinå’ŒJavaä¹‹é—´æœ‰å“ªäº›å¼‚åŒç‚¹å—ï¼Ÿæ¬¢è¿ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµæ¢è®¨ã€‚</p><p>å¥½äº†ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§å§ï¼</p>","comments":[{"had_liked":false,"id":332434,"user_name":"ç¥ç§˜å˜‰Bin","can_delete":false,"product_type":"c1","uid":2879116,"ip_address":"","ucode":"6045F09320E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/2b/ee/8c/06f3aef0.jpg","comment_is_top":false,"comment_ctime":1643249856,"is_pvip":false,"replies":[{"id":"121443","content":"ç†è§£å¾ˆåˆ°ä½ã€‚èµ~","user_name":"ä½œè€…å›å¤","comment_id":332434,"uid":"1180670","ip_address":"","utype":1,"ctime":1643253568,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"10233184448","product_id":100103401,"comment_content":"kotlinçš„åå°„çœ‹èµ·æ¥æ›´åƒæ˜¯æ ¹æ®&quot;é¢å‘å¯¹è±¡&quot;æ€æƒ³å¯¹Kotlinæ‰€éœ€çš„æ‰€æœ‰å±æ€§è¿›è¡Œçš„ä¸€ç§å°è£…","like_count":2,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548548,"discussion_content":"ç†è§£å¾ˆåˆ°ä½ã€‚èµ~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643253568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339327,"user_name":"H.ZWei","can_delete":false,"product_type":"c1","uid":1329072,"ip_address":"","ucode":"48FFADE574C327","user_header":"https://static001.geekbang.org/account/avatar/00/14/47/b0/8c301d00.jpg","comment_is_top":false,"comment_ctime":1648037232,"is_pvip":false,"replies":[{"id":"124295","content":"æ˜¯å­˜åœ¨ä¸€äº›å·®å¼‚ï¼Œç›¸ä¿¡Kotlinä»¥åä¼šç»§ç»­ä¼˜åŒ–çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":339327,"uid":"1180670","ip_address":"","utype":1,"ctime":1648521261,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5943004528","product_id":100103401,"comment_content":"Kotlinåå°„çš„æ€§èƒ½æ¯”Javaåå°„å·®å¾ˆå¤š","like_count":2,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558904,"discussion_content":"æ˜¯å­˜åœ¨ä¸€äº›å·®å¼‚ï¼Œç›¸ä¿¡Kotlinä»¥åä¼šç»§ç»­ä¼˜åŒ–çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648521261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333143,"user_name":"è‹ç‹","can_delete":false,"product_type":"c1","uid":1621978,"ip_address":"","ucode":"92F4A7513AF228","user_header":"https://static001.geekbang.org/account/avatar/00/18/bf/da/fede41ea.jpg","comment_is_top":false,"comment_ctime":1644127498,"is_pvip":true,"replies":[{"id":"121773","content":"æ²¡é”™ï¼ŒJavaåå°„å…¶å®æ˜¯æ›´æ¥è¿‘åº•å±‚ï¼Œä½†Javaåå°„æ— æ³•è®¿é—®Kotlinç‹¬æœ‰çš„ç‰¹æ€§ï¼Œæ¯”å¦‚â€œåˆ¤æ–­ä¸€ä¸ªç±»æ˜¯ä¸æ˜¯æ•°æ®ç±»â€ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬è¦å€ŸåŠ©Kotlinåå°„æ‰èƒ½å®ç°ã€‚","user_name":"ä½œè€…å›å¤","comment_id":333143,"uid":"1180670","ip_address":"","utype":1,"ctime":1644250655,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5939094794","product_id":100103401,"comment_content":"kotlinåå°„æ˜¯é’ˆå¯¹kotlinè¯­æ³•ç‰¹æ€§é‡æ–°å°è£…çš„apiï¼Œæ„Ÿè§‰å¦‚éå¿…è¦ç›´æ¥é’ˆå¯¹kotlinåå°„ç›´æ¥ä½¿ç”¨javaåå°„å°±å¥½äº†ï¼Œç‰¹åˆ«æ˜¯åƒandroidå¼€å‘è¿™æ ·frameworkå±‚è¿˜æ˜¯javaä»£ç è¿™æ ·ï¼Œè‡³äºæ€§èƒ½ä¸æ¸…æ¥šæœ‰ä»€ä¹ˆå·®å¼‚","like_count":1,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549838,"discussion_content":"æ²¡é”™ï¼ŒJavaåå°„å…¶å®æ˜¯æ›´æ¥è¿‘åº•å±‚ï¼Œä½†Javaåå°„æ— æ³•è®¿é—®Kotlinç‹¬æœ‰çš„ç‰¹æ€§ï¼Œæ¯”å¦‚â€œåˆ¤æ–­ä¸€ä¸ªç±»æ˜¯ä¸æ˜¯æ•°æ®ç±»â€ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬è¦å€ŸåŠ©Kotlinåå°„æ‰èƒ½å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644250655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356237,"user_name":"eden","can_delete":false,"product_type":"c1","uid":1220656,"ip_address":"å¹¿ä¸œ","ucode":"8A5620A5C4BDB8","user_header":"https://static001.geekbang.org/account/avatar/00/12/a0/30/5a7247eb.jpg","comment_is_top":false,"comment_ctime":1662081691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662081691","product_id":100103401,"comment_content":"æ²¡æœ‰ä¸€ä¸ªå¯ä»¥è·‘èµ·æ¥çš„å®Œæ•´ä¾‹å­ï¼Œçœ‹äº†å‡ éä¸çŸ¥é“Kotlinçš„ åå°„æ€ä¹ˆå®ç°ã€‚ã€‚ã€‚ ","like_count":0},{"had_liked":false,"id":335617,"user_name":"$Kotlin","can_delete":false,"product_type":"c1","uid":2148188,"ip_address":"","ucode":"098E9C8F60D865","user_header":"https://static001.geekbang.org/account/avatar/00/20/c7/5c/94cb3a1a.jpg","comment_is_top":false,"comment_ctime":1645605412,"is_pvip":false,"replies":[{"id":"122725","content":"æ³¨è§£çš„æ›´å¤šåº”ç”¨ï¼Œåœ¨12èŠ‚æœ‰æåˆ°ï¼Œä½ å¯ä»¥å»çœ‹çœ‹ã€‚<br><br>è‡³äºDeprecatedï¼Œâ€œæ€ä¹ˆèƒ½å®ç°ç¼–è¯‘å™¨æç¤ºæ–‡æ¡ˆçš„åŠŸèƒ½ï¼ŒreplaceWithæ€ä¹ˆèƒ½å‘ŠçŸ¥ç¼–è¯‘å™¨â€è¿™å…¶å®æ˜¯Kotlinå®˜æ–¹å®ç°çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":335617,"uid":"1180670","ip_address":"","utype":1,"ctime":1645747217,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1645605412","product_id":100103401,"comment_content":"è€å¸ˆï¼Œæ³¨è§£Deprecatedè¿™éƒ¨åˆ†ï¼Œæˆ‘çœ‹åˆ°äº†æ³¨è§£çš„å®šä¹‰å’Œç”¨æ³•ï¼Œè¿˜æœ‰è®²è§£äº†å…ƒæ³¨è§£ï¼Œä½†æ˜¯æ²¡æœ‰çœ‹åˆ°å…·ä½“çš„å®ç°é€»è¾‘ã€‚<br>æ¯”å¦‚è¯´messageå±æ€§æ€ä¹ˆèƒ½å®ç°ç¼–è¯‘å™¨æç¤ºæ–‡æ¡ˆçš„åŠŸèƒ½ï¼ŒreplaceWithæ€ä¹ˆèƒ½å‘ŠçŸ¥ç¼–è¯‘å™¨ä½¿ç”¨å“ªä¸ªæ›¿æ¢æ–¹æ³•ã€‚<br>æ˜¯ä¸æ˜¯è¯´æ˜æˆ‘ä»¬åªèƒ½ä½¿ç”¨å·²ç»å®šä¹‰å¥½çš„æ³¨è§£ï¼Œæ— æ³•æ–°å¢è‡ªå®šä¹‰çš„æ³¨è§£ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553132,"discussion_content":"æ³¨è§£çš„æ›´å¤šåº”ç”¨ï¼Œåœ¨12èŠ‚æœ‰æåˆ°ï¼Œä½ å¯ä»¥å»çœ‹çœ‹ã€‚\n\nè‡³äºDeprecatedï¼Œâ€œæ€ä¹ˆèƒ½å®ç°ç¼–è¯‘å™¨æç¤ºæ–‡æ¡ˆçš„åŠŸèƒ½ï¼ŒreplaceWithæ€ä¹ˆèƒ½å‘ŠçŸ¥ç¼–è¯‘å™¨â€è¿™å…¶å®æ˜¯Kotlinå®˜æ–¹å®ç°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645747217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334992,"user_name":"ç™½ä¹¾æ¶›","can_delete":false,"product_type":"c1","uid":1339841,"ip_address":"","ucode":"0C704B0B90C8D7","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/c1/cbc55e06.jpg","comment_is_top":false,"comment_ctime":1645243605,"is_pvip":false,"replies":[{"id":"122412","content":"å…¶å®å°±åœ¨åé¢å“ˆï¼šfileï¼Œä½œç”¨äºæ–‡ä»¶ï¼›propertyï¼Œä½œç”¨äºå±æ€§ï¼›fieldï¼Œä½œç”¨äºå­—æ®µï¼›getï¼Œä½œç”¨äºå±æ€§ getterï¼›setï¼Œä½œç”¨äºå±æ€§ setterï¼›receiverï¼Œä½œç”¨äºæ‰©å±•çš„æ¥å—è€…å‚æ•°ï¼›paramï¼Œä½œç”¨äºæ„é€ å‡½æ•°å‚æ•°ï¼›setparamï¼Œä½œç”¨äºå‡½æ•°å‚æ•°ï¼›delegateï¼Œä½œç”¨äºå§”æ‰˜å­—æ®µã€‚<br><br>è¿™æ˜¯Kotliné‡Œé¢ç‹¬æœ‰çš„ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©targetæ›´åŠ ç²¾ç¡®ã€‚","user_name":"ä½œè€…å›å¤","comment_id":334992,"uid":"1180670","ip_address":"","utype":1,"ctime":1645370364,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"1645243605","product_id":100103401,"comment_content":"@set:Inject<br>ä¸ºå•¥è¿™é‡Œè¦ç”¨ set è€Œä¸ç”¨ enum AnnotationTarget ä¸­å®šä¹‰çš„æšä¸¾å€¼ï¼Ÿä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br><br>æ–‡ç¨¿ä¸­è¯´ï¼šè€Œé™¤äº† set ä»¥å¤–ï¼ŒKotlin å½“ä¸­è¿˜æœ‰å…¶ä»–çš„ä½¿ç”¨ç›®æ ‡...<br><br>è¿™äº›ç›®æ ‡åˆæ˜¯å“ªé‡Œå®šä¹‰çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552271,"discussion_content":"å…¶å®å°±åœ¨åé¢å“ˆï¼šfileï¼Œä½œç”¨äºæ–‡ä»¶ï¼›propertyï¼Œä½œç”¨äºå±æ€§ï¼›fieldï¼Œä½œç”¨äºå­—æ®µï¼›getï¼Œä½œç”¨äºå±æ€§ getterï¼›setï¼Œä½œç”¨äºå±æ€§ setterï¼›receiverï¼Œä½œç”¨äºæ‰©å±•çš„æ¥å—è€…å‚æ•°ï¼›paramï¼Œä½œç”¨äºæ„é€ å‡½æ•°å‚æ•°ï¼›setparamï¼Œä½œç”¨äºå‡½æ•°å‚æ•°ï¼›delegateï¼Œä½œç”¨äºå§”æ‰˜å­—æ®µã€‚\n\nè¿™æ˜¯Kotliné‡Œé¢ç‹¬æœ‰çš„ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©targetæ›´åŠ ç²¾ç¡®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645370364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135912,"avatar":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","nickname":"é»‘è‰²æ¯›è¡£","note":"","ucode":"FF7E235F91BA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560028,"discussion_content":"AnnotationTarget é‡Œé¢å®šä¹‰çš„æ˜¯ targetï¼Œset ç›¸å½“äºè®©æ³¨è§£æ›´ç²¾ç¡®çš„ä¿®é¥°ç›®æ ‡å…ƒç´ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649133497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333654,"user_name":"è¿½æ¢¦å°ä¹","can_delete":false,"product_type":"c1","uid":1035507,"ip_address":"","ucode":"82AB8A7F98389D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cc/f3/5e4b0315.jpg","comment_is_top":false,"comment_ctime":1644460657,"is_pvip":false,"replies":[{"id":"121889","content":"é—®é¢˜1ï¼šæˆ‘æŒ‰ç…§ä½ çš„æ­¥éª¤è¯•äº†ä¸€ä¸‹ï¼Œæ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ä½ å¯ä»¥å°è¯•ä»ä¸¤ä¸ªæ–¹é¢å»æ’æŸ¥ï¼šä¸€ä¸ªæ˜¯å¯¼åŒ…æ˜¯å¦å‡ºé”™ï¼Œè¿˜æœ‰å°±æ˜¯æ˜¯å¦å‡ºç°é‡åçš„å†²çªã€‚IDEçš„é”™è¯¯æç¤ºå…¶å®æ˜¯å¾ˆäººæ€§åŒ–çš„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½å¯ä»¥æ ¹æ®é”™è¯¯ä¿¡æ¯æ¥æ’æŸ¥çš„ã€‚<br><br>é—®é¢˜2ï¼šè¿™é‡Œä¸èƒ½ä»Javaè§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯Kotlinç‹¬æœ‰çš„è¯­æ³•ã€‚è¿™å…¶å®å°±æ˜¯ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œè°ƒç”¨setterçš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯å¯¹è±¡æœ¬èº«ã€‚","user_name":"ä½œè€…å›å¤","comment_id":333654,"uid":"1180670","ip_address":"","utype":1,"ctime":1644462516,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1644460657","product_id":100103401,"comment_content":"è€å¸ˆï¼Œçœ‹å®Œæœ‰ä¸¤ä¸ªé—®é¢˜ä¸å¤ªç†è§£ï¼š<br>1ã€ å°†ç±» Calculator  CalculatorV3  å†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶ä¸­mainæ–¹æ³•ä¸­ä½¿ç”¨Calculatorå°±ä¼šæç¤ºæŠ¥é”™ï¼Œä½†æ˜¯æŠŠä¸¤ä¸ªç±»å•ç‹¬åˆ†ç±»å‡ºå»ï¼Œåœ¨mainæ–¹æ³•ä¸­è°ƒç”¨Calculatoræ²¡å‘ç°æç¤ºæŠ¥é”™ï¼Œè¿™ä¸ªæ˜¯ä¸ºä»€ä¹ˆï¼Ÿ<br>2ã€åå°„éƒ¨åˆ†çš„  it.setter.parameters.size == 2, è¿™é‡Œæœ‰ç‚¹ä¸å¤ªç†è§£ï¼Œå¦‚æœæ˜¯è½¬æˆjavaæ–¹æ³•ï¼Œsetæ–¹æ³•ä¹Ÿå°±åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ‰“å°å‡ºæ¥çœ‹åˆ°è¿™ä¸¤ä¸ªæ˜¯  ins tance parameter....  å’Œ   parameter  #1  null.......","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550271,"discussion_content":"é—®é¢˜1ï¼šæˆ‘æŒ‰ç…§ä½ çš„æ­¥éª¤è¯•äº†ä¸€ä¸‹ï¼Œæ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ä½ å¯ä»¥å°è¯•ä»ä¸¤ä¸ªæ–¹é¢å»æ’æŸ¥ï¼šä¸€ä¸ªæ˜¯å¯¼åŒ…æ˜¯å¦å‡ºé”™ï¼Œè¿˜æœ‰å°±æ˜¯æ˜¯å¦å‡ºç°é‡åçš„å†²çªã€‚IDEçš„é”™è¯¯æç¤ºå…¶å®æ˜¯å¾ˆäººæ€§åŒ–çš„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½å¯ä»¥æ ¹æ®é”™è¯¯ä¿¡æ¯æ¥æ’æŸ¥çš„ã€‚\n\né—®é¢˜2ï¼šè¿™é‡Œä¸èƒ½ä»Javaè§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯Kotlinç‹¬æœ‰çš„è¯­æ³•ã€‚è¿™å…¶å®å°±æ˜¯ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œè°ƒç”¨setterçš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯å¯¹è±¡æœ¬èº«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644462516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333021,"user_name":"å¼€é£æœºçš„è€èˆ’å…‹","can_delete":false,"product_type":"c1","uid":1231517,"ip_address":"","ucode":"7DD15B40DCF6A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/9d/8646083b.jpg","comment_is_top":false,"comment_ctime":1643966617,"is_pvip":true,"replies":[{"id":"121690","content":"åŸæœ¬æˆ‘ä¹Ÿæœ‰æ‰“ç®—ä»‹ç»ï¼šåå°„çš„åŸç†è¿˜æœ‰æ€§èƒ½é—®é¢˜ï¼Œä¸è¿‡ç”±äºæ¶‰åŠåˆ°JVMç›¸å…³çš„ç»†èŠ‚ï¼Œå¾ˆå®¹æ˜“å°±åé¢˜ï¼Œæ¯•ç«Ÿå¤§å®¶éƒ½æ˜¯å†²ç€Kotlinå’Œåç¨‹æ¥çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰ç»§ç»­æ·±å…¥ï¼Œå¦‚æœåé¢æœ‰æœºä¼šï¼Œæˆ‘ä¼šç”¨å…¶ä»–æ–¹å¼ï¼Œæ¯”å¦‚åšå®¢ï¼Œç›´æ’­çš„å½¢å¼æ¥ä»‹ç»ä¸€äº›æ›´æ·±å…¥çš„JVMçŸ¥è¯†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":333021,"uid":"1180670","ip_address":"","utype":1,"ctime":1643984529,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1643966617","product_id":100103401,"comment_content":"å¸Œæœ›è€å¸ˆå¤šä¸€äº›æ·±å…¥çš„è®²è§£ï¼Œä¾‹å¦‚åå°„çš„åŸç†ï¼Œæ€§èƒ½æ–¹é¢çš„å½±å“ç­‰ã€‚æ„Ÿè°¢ğŸ™","like_count":1,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549437,"discussion_content":"åŸæœ¬æˆ‘ä¹Ÿæœ‰æ‰“ç®—ä»‹ç»ï¼šåå°„çš„åŸç†è¿˜æœ‰æ€§èƒ½é—®é¢˜ï¼Œä¸è¿‡ç”±äºæ¶‰åŠåˆ°JVMç›¸å…³çš„ç»†èŠ‚ï¼Œå¾ˆå®¹æ˜“å°±åé¢˜ï¼Œæ¯•ç«Ÿå¤§å®¶éƒ½æ˜¯å†²ç€Kotlinå’Œåç¨‹æ¥çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰ç»§ç»­æ·±å…¥ï¼Œå¦‚æœåé¢æœ‰æœºä¼šï¼Œæˆ‘ä¼šç”¨å…¶ä»–æ–¹å¼ï¼Œæ¯”å¦‚åšå®¢ï¼Œç›´æ’­çš„å½¢å¼æ¥ä»‹ç»ä¸€äº›æ›´æ·±å…¥çš„JVMçŸ¥è¯†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643984529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332437,"user_name":"åªä¸ºä½ åœç•™","can_delete":false,"product_type":"c1","uid":2577082,"ip_address":"","ucode":"DEDF92E0EB0426","user_header":"https://static001.geekbang.org/account/avatar/00/27/52/ba/25f8f998.jpg","comment_is_top":false,"comment_ctime":1643250713,"is_pvip":false,"replies":[{"id":"121442","content":"æ³¨è§£è¿™éƒ¨åˆ†çš„å†…å®¹ï¼Œå…¶å®é‡åœ¨å®è·µï¼Œä¸‹èŠ‚è¯¾å…¶å®å°±æœ‰å¯¹åº”çš„å®æˆ˜ï¼Œä½ å¯ä»¥å»çœ‹çœ‹ï¼Œåœ¨é‚£é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°æ³¨è§£çš„å®é™…åº”ç”¨åœºæ™¯ã€‚<br><br>è‡³äºåšå®¢ä»€ä¹ˆçš„å…¶å®æ²¡å¤ªå¤§å¿…è¦ï¼Œåœ¨çœŸæ­£çŸ¥é“æ³¨è§£æ˜¯ä»€ä¹ˆä»¥åï¼Œèƒ½å¤Ÿæ·±åˆ»ç†è§£Targetã€Retentionä¹‹ç±»çš„æ¦‚å¿µå°±è¶³å¤Ÿäº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":332437,"uid":"1180670","ip_address":"","utype":1,"ctime":1643253539,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"1643250713","product_id":100103401,"comment_content":"æœ‰æ²¡æœ‰å†™çš„å¥½åˆè¯¦ç»†çš„æ³¨è§£åšå®¢æ¨è","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548547,"discussion_content":"æ³¨è§£è¿™éƒ¨åˆ†çš„å†…å®¹ï¼Œå…¶å®é‡åœ¨å®è·µï¼Œä¸‹èŠ‚è¯¾å…¶å®å°±æœ‰å¯¹åº”çš„å®æˆ˜ï¼Œä½ å¯ä»¥å»çœ‹çœ‹ï¼Œåœ¨é‚£é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°æ³¨è§£çš„å®é™…åº”ç”¨åœºæ™¯ã€‚\n\nè‡³äºåšå®¢ä»€ä¹ˆçš„å…¶å®æ²¡å¤ªå¤§å¿…è¦ï¼Œåœ¨çœŸæ­£çŸ¥é“æ³¨è§£æ˜¯ä»€ä¹ˆä»¥åï¼Œèƒ½å¤Ÿæ·±åˆ»ç†è§£Targetã€Retentionä¹‹ç±»çš„æ¦‚å¿µå°±è¶³å¤Ÿäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643253539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2577082,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/ba/25f8f998.jpg","nickname":"åªä¸ºä½ åœç•™","note":"","ucode":"DEDF92E0EB0426","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":548555,"discussion_content":"æ³¨è§£è¿™ä¸€å—æˆ‘è§‰çš„æŒºé‡è¦ï¼Œå°±æ˜¯ä¸çŸ¥é“æ€ä¹ˆç”¨ï¼Œæ‰€ä»¥å°±æ‰¾ä¸åˆ°åº”ç”¨åœºæ™¯ï¼Œå¤šè°¢æŒ‡ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643254079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":548547,"ip_address":""},"score":548555,"extra":""}]}]},{"had_liked":false,"id":331829,"user_name":"è¾‰å“¥","can_delete":false,"product_type":"c1","uid":1236983,"ip_address":"","ucode":"21A65F4EE6CD04","user_header":"","comment_is_top":false,"comment_ctime":1642811037,"is_pvip":false,"replies":[{"id":"121305","content":"å—¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªè§’åº¦ã€‚","user_name":"ä½œè€…å›å¤","comment_id":331829,"uid":"1180670","ip_address":"","utype":1,"ctime":1642989978,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"1642811037","product_id":100103401,"comment_content":"kotlinçš„åå°„æ€§èƒ½æ€ä¹ˆæ ·ï¼Œå’ŒJavaåå°„ç›¸æ¯”","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547991,"discussion_content":"å—¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªè§’åº¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642989978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1090798,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a4/ee/cffd8ee6.jpg","nickname":"é­å…¨è¿","note":"","ucode":"3FED702C724E2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547845,"discussion_content":"kotlinç¼–è¯‘ä»¥åä¹Ÿæ˜¯classæ–‡ä»¶ï¼Œè·Ÿjavaä¸€æ ·ï¼Œæ‰€ä»¥åå°„çš„æ€§èƒ½æ„Ÿè§‰ä¸ä¼šæœ‰å¤ªå¤§å·®åˆ«ï¼Œå¯ä»¥å†™ä¸ªdemoè¯•ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642901179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331690,"user_name":"é­å…¨è¿","can_delete":false,"product_type":"c1","uid":1090798,"ip_address":"","ucode":"3FED702C724E2A","user_header":"https://static001.geekbang.org/account/avatar/00/10/a4/ee/cffd8ee6.jpg","comment_is_top":false,"comment_ctime":1642726824,"is_pvip":false,"replies":[{"id":"121178","content":"ä¸é”™ã€‚ä¸åŒç‚¹çš„åœ°æ–¹è¿˜æœ‰å¾…æŒ–æ˜å“ˆ~","user_name":"ä½œè€…å›å¤","comment_id":331690,"uid":"1180670","ip_address":"","utype":1,"ctime":1642756771,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1642726824","product_id":100103401,"comment_content":"kotlin å’Œjava åå°„çš„å¼‚åŒç‚¹ï¼š<br>ç›¸åŒç‚¹ï¼šéƒ½æ˜¯åœ¨è¿è¡Œæ—¶è·å–æˆ–ä¿®æ”¹å¯¹è±¡çš„å±æ€§æˆ–è¡Œä¸ºï¼Œè·å–ç±»çš„ä¿¡æ¯ï¼ŒåŠŸèƒ½å¤§åŒå°å¼‚ã€‚<br>ä¸åŒç‚¹ï¼škotlinä¸­åå°„æ“ä½œæ›´åŠ ä¾¿åˆ©ã€‚ç”¨çš„ä¸å¤šï¼Œä¹Ÿè®¸å¾ˆå¤šä¼˜åŠ¿è¿˜æ²¡æŒ–æ˜å‡ºæ¥","like_count":0,"discussions":[{"author":{"id":1180670,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/fe/0f43ef35.jpg","nickname":"æœ±æ¶›","note":"","ucode":"5AB5AFE32B8008","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547582,"discussion_content":"ä¸é”™ã€‚ä¸åŒç‚¹çš„åœ°æ–¹è¿˜æœ‰å¾…æŒ–æ˜å“ˆ~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642756771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}