{"id":176978,"title":"57 | Hadoop如何使用Netty ？","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":169701,"user_name":"WING","can_delete":false,"product_type":"c3","uid":1485200,"ip_address":"","ucode":"E4723BA4027407","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IdElofI20lsCUm1NIQPSpYFzAGLbLs41SL324FkmTb0icqnRJicW6mqX4iag1BQUSNtc7BtKJ2fEUYwU4rN47vEsQ/132","comment_is_top":false,"comment_ctime":1578408416,"is_pvip":false,"replies":[{"id":65878,"content":"能有点收获就好，也感谢你们的提问，也让我开阔了一些视野！","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1578451136,"ip_address":"","comment_id":169701,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"学完了，找个没人的章节打卡，哈哈。谢谢老师的这门课程，学到了很多以前自己不知道的东西，师父领进门修行在个人，谢谢老师的指点。","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480679,"discussion_content":"能有点收获就好，也感谢你们的提问，也让我开阔了一些视野！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578451136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205026,"user_name":"小马哥","can_delete":false,"product_type":"c3","uid":1107153,"ip_address":"","ucode":"376833AC2A1589","user_header":"https://static001.geekbang.org/account/avatar/00/10/e4/d1/002f9955.jpg","comment_is_top":false,"comment_ctime":1586510403,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"好开心，终于学完了，感谢老师！","like_count":1},{"had_liked":false,"id":310378,"user_name":"cookie.joo","can_delete":false,"product_type":"c3","uid":1588893,"ip_address":"","ucode":"764AEA3729FE6C","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/9d/33db96a7.jpg","comment_is_top":false,"comment_ctime":1630635524,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":" getMultipartBody(FullHttpRequest request) {\n        try {\n            HttpDataFactory factory = new DefaultHttpDataFactory(true);\n            HttpPostRequestDecoder httpDecoder = new HttpPostRequestDecoder(factory, request);\n            httpDecoder.setDiscardThreshold(0);\n            if (httpDecoder != null) {\n                final HttpContent chunk = (HttpContent) request;\n                httpDecoder.offer(chunk);\n老师你好，我看了很多个上传文件的netty实现，就这里这个分块类型不理解，为什么要判断这个分块是最后一个LastHttpContent才获取文件信息进行处理文件流呢？如果是分块了，这里的流不是得for循环去读了吗？如果是最后一个快到达了才处理，那服务端不得把整个文件收到了内存这时已经可能要爆了吧？我始终想不通这个点，是否能帮我解答一下，感谢！\n                if (chunk instanceof LastHttpContent) {\n                    Map&lt;String, FileUpload&gt; fileUploads = new HashMap&lt;&gt;();\n","like_count":0}]}