{"id":629359,"title":"07ï½œåˆ†æå®æ“ï¼šè¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·è¯Šæ–­åˆ†æSharingé¡¹ç›®","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä¿Šå½¬ã€‚ä¸Šä¸€èŠ‚æˆ‘ç»™ä½ ä»‹ç»äº†ä¸¤ä¸ªé—ç•™ç³»ç»Ÿå¸¸ç”¨çš„åˆ†æå·¥å…·ï¼šArchUnitå’ŒDependenciesä¾èµ–åˆ†æå·¥å…·ã€‚</p><p>è™½ç„¶æˆ‘ä»¬äº†è§£äº†å®ƒä»¬çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œä½†æ˜¯å®é™…è½åœ°åˆ°é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p><p>1.ä»£ç æ•£è½å„å¤„ï¼Œçº¦æŸè§„åˆ™ä¸å¥½å†™ï¼Ÿ<br>\n2.ç»“åˆæ¶æ„è®¾è®¡ï¼Œæ€ä¹ˆæ¥è®¾è®¡çº¦æŸè§„åˆ™ï¼Ÿ<br>\n3.çº¦æŸè§„åˆ™æ€ä¹ˆåº”ç”¨åˆ°è‡ªåŠ¨åŒ–åˆ†æå·¥å…·ä¸Šï¼Ÿ</p><p>è¿™èŠ‚è¯¾æˆ‘ä»¬å°±ä¸€èµ·ç”¨ArchUnitå’ŒDependencieså¯¹Sharingé¡¹ç›®è¿›è¡Œä¸€æ¬¡æ•´ä½“åˆ†æã€‚</p><p>è¿™ä¸ªåˆ†æç”±äº”éƒ¨åˆ†ç»„æˆã€‚</p><ul>\n<li>ç¬¬ä¸€éƒ¨åˆ†ï¼Œå°†ä»£ç ç»“æ„æŒ‰æ–°çš„æ¶æ„è®¾è®¡è¿›è¡Œè°ƒæ•´ã€‚</li>\n<li>ç¬¬äºŒéƒ¨åˆ†ï¼Œæ ¹æ®ä»£ç ç»“æ„ä»¥åŠæ–°æ¶æ„è®¾è®¡å®šä¹‰å‡ºä¾èµ–è§„åˆ™ã€‚</li>\n<li>ç¬¬ä¸‰éƒ¨åˆ†ï¼Œå°†ä¾èµ–è§„åˆ™è½¬åŒ–æˆDependenciesçš„Ruleè§„åˆ™ï¼Œç„¶åè¿›è¡Œæ‰«æåˆ†æã€‚</li>\n<li>ç¬¬å››éƒ¨åˆ†ï¼Œå°†ä¾èµ–è§„åˆ™è½¬åŒ–æˆArchUnitçš„ç”¨ä¾‹ï¼Œè¿›è¡Œæ‰«æåˆ†æã€‚</li>\n<li>æœ€åï¼Œæ€»ç»“å‡ºä»ç°æœ‰çš„ä»£ç ç»“æ„æŒ‰æœªæ¥æ¶æ„è®¾è®¡éœ€è¦é‡æ„çš„é—®é¢˜æ¸…å•ï¼Œä½œä¸ºä¸‹ä¸€é˜¶æ®µä»£ç é‡æ„çš„è¾“å…¥ã€‚</li>\n</ul><p>é€šè¿‡è¿™èŠ‚è¯¾çš„åˆ†æï¼Œä½ å¯ä»¥å­¦ä¼šåœ¨å®é™…é¡¹ç›®ä¸­å¦‚ä½•ç»“åˆå·¥å…·æ¥è½åœ°æ¶æ„åˆ†æå·¥ä½œï¼Œä¸Šé¢çš„é—®é¢˜ä¹Ÿèƒ½å¾—åˆ°è§£ç­”ã€‚</p><h2>ä»¥æ–°æ¶æ„è®¾è®¡æ¥ç»„ç»‡ä»£ç </h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¸€èµ·å›é¡¾ä¸€ä¸‹Sharingé¡¹ç›®ç›®å‰ä»£ç çš„æ–¹å¼ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ‰€æœ‰çš„ä»£ç æ˜¯ä»¥æŠ€æœ¯ç»´åº¦æ¥ç»„ç»‡ã€‚ä¾‹å¦‚æŠŠæ‰€æœ‰é¡µé¢éƒ½æ”¾åœ¨uiçš„åŒ…ä¸‹ï¼Œæˆ–è€…æŠŠæ‰€æœ‰çš„æ¨¡å‹éƒ½æ”¾åœ¨modelä¸‹ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/7d/67/7d0d10c32f45f6ab1e73d248f771a667.jpg?wh=2546x2220\" alt=\"\"></p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ä¼šé‡åˆ°ä»£ç æ•£è½åœ¨å„å¤„ï¼Œçº¦æŸè§„åˆ™ä¸å¥½å†™çš„é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬ä¸å…ˆä»¥æœªæ¥æ¶æ„è®¾è®¡çš„æ–¹å¼æ¥ç»„ç»‡ä»£ç ï¼Œé‚£ä¹ˆæ‰€æœ‰ä¾èµ–è§„åˆ™çš„ç¼–å†™åªèƒ½ç»†åˆ†åˆ°ç±»ï¼Œä¸èƒ½æŒ‰åŒ…çš„ç»´åº¦æ¥ç¼–å†™ã€‚è¿™æ ·é¦–å…ˆä¼šå¯¼è‡´ç”¨ä¾‹å¢å¤šï¼Œå…¶æ¬¡è§„åˆ™ä¹Ÿä¼šæ¯”è¾ƒåˆ†æ•£ï¼Œç»™åç»­ç»´æŠ¤å¸¦æ¥ä¸ä¾¿ã€‚</p><p>æ‰€ä»¥ä¸ºäº†æ›´å¥½åœ°è¿›è¡Œåˆ†æï¼Œé¦–å…ˆæˆ‘ä»¬ä¼šå…ˆæŒ‰æœªæ¥çš„æ¶æ„è®¾è®¡ç»„ç»‡ä»£ç ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬6èŠ‚è¯¾æ¢³ç†çš„æ–°ç»„ä»¶åˆ’åˆ†æ¶æ„ã€‚åœ¨æ–°çš„æ¶æ„è®¾è®¡ä¸­ï¼Œæ¨ªå‘ç»´åº¦åˆ’åˆ†äº†3ä¸ªåˆ†å±‚ï¼Œçºµå‘ç»´åº¦åˆ’åˆ†äº†3ä¸ªä¸šåŠ¡ç»„ä»¶ã€2ä¸ªåŠŸèƒ½ç»„ä»¶ä»¥åŠ3ä¸ªæŠ€æœ¯ç»„ä»¶ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cd/0c/cddd3b628356afb668520e30173d9a0c.jpg?wh=3242x1857\" alt=\"\" title=\"æ¶æ„å›¾\"></p><p>æ ¹æ®æ–°çš„æ¶æ„å›¾ï¼Œæˆ‘ä»¬é‡æ–°åˆ’åˆ†æ–°çš„åŒ…ç»“æ„ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚æ³¨æ„ï¼Œ<strong>æˆ‘ä»¬éœ€è¦è®©ä»£ç çš„æ¶æ„ä»¥åŠåç§°ä¸æ¶æ„å›¾çš„è®¾è®¡å¯¹åº”ä¸Šï¼Œè¿™æ ·ä¾¿äºæˆ‘ä»¬ç†è§£å’Œç»´æŠ¤ã€‚</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/16/7d/16da758a195bc19bd5daccc8f7de5c7d.jpg?wh=3500x1422\" alt=\"\"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§æ–°çš„ä»£ç ç»“æ„è¿›è¡Œè°ƒæ•´äº†ã€‚è¿™ä¸ªæ—¶å€™è¦æ³¨æ„<strong>å€ŸåŠ©IDEçš„å®‰å…¨é‡æ„æ–¹æ³•æ¥ç§»åŠ¨ä»£ç ï¼Œé¿å…æ‰‹å·¥ç§»åŠ¨</strong>ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Move Classçš„æ–¹æ³•ï¼ˆé€‰ä¸­æ–‡ä»¶åæŒ‰ä¸‹F6å¿«æ·é”®æˆ–è€…ç‚¹å‡» Refactor-&gt;Move Classèœå•ï¼‰è¿›è¡Œç§»åŠ¨ï¼Œè¿™æ ·ç¼–è¾‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒæ•´ç›¸å…³çš„å¼•ç”¨ï¼Œè°ƒæ•´åSharingæ–°çš„ç›®å½•ç»“æ„æ˜¯åé¢è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/61/13/618564e1d7a4421037e44bdc2da2a013.jpg?wh=2546x2220\" alt=\"\"></p><p>åœ¨å®é™…é¡¹ç›®è½åœ°ä¸­ï¼Œè¿™ä¸ªæ­¥éª¤æœ‰ä¸‰ç‚¹æ³¨æ„äº‹é¡¹ã€‚</p><p>ç¬¬ä¸€ç‚¹ï¼Œè¿™ä¸ªæ­¥éª¤æˆ‘ä»¬æœ€å¥½å¯ä»¥æ‹‰é€šç›¸å…³çš„å¼€å‘ã€æ¶æ„ç­‰å¹²ç³»äººï¼ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿæ¥æŸ¥çœ‹ä¹‹å‰è¿™ä¸ªæ–‡ä»¶ä¸»è¦çš„ç»´æŠ¤äººï¼‰ä¸€èµ·è¿›è¡Œæ¢³ç†ã€‚å› ä¸ºæœ‰äº›æ–‡ä»¶æˆ‘ä»¬èƒ½ä»ç±»ååˆ¤æ–­å®ƒå±äºå“ªä¸ªç»„ä»¶ï¼Œä½†æ˜¯æœ‰äº›æ–‡ä»¶å¦‚æœä¹‹å‰è®¾è®¡å¾—ä¸å¥½ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è·Ÿç›¸å…³çš„åŒå­¦ç¡®è®¤ã€‚</p><p>ç¬¬äºŒç‚¹ï¼Œç§»åŠ¨æ–‡ä»¶ä¼šè§¦å‘CIåˆ¤å®šè¿™äº›æ–‡ä»¶æ˜¯æ–°å¢æ–‡ä»¶ï¼Œè¿›è€Œè§¦å‘å¢é‡æ‰«æï¼ŒCIä¼šå°†ä»¥å‰é—ç•™çš„å¾ˆå¤šé—®é¢˜ä¹Ÿæ‰«æå‡ºæ¥ã€‚ä½†æ³¨æ„ï¼Œè¿™äº›é—®é¢˜ä¸æ˜¯å› ä¸ºç§»åŠ¨æ–‡ä»¶äº§ç”Ÿçš„ï¼Œè€Œæ˜¯åŸæœ¬å°±å­˜åœ¨äºä»£ç åº“ä¸­ã€‚æˆ‘ä»¬éœ€è¦å’Œç›¸å…³çš„å¹²ç³»äººè¿›è¡Œæ¾„æ¸…è¯´æ˜ï¼Œä»¥å…ç§»åŠ¨åçš„ä»£ç æäº¤æ— æ³•å…¥åº“ã€‚</p><p>ç¬¬ä¸‰ç‚¹ï¼Œå·¥ç¨‹ç›®å½•ç»“æ„çš„è°ƒæ•´ä¼šæ¶‰åŠåˆ°å¤§é‡æ–‡ä»¶çš„ä½ç½®å˜åŒ–ï¼Œéœ€è¦åœ¨å›¢é˜Ÿä¸­è¿›è¡Œæ‹‰é€šï¼Œé¿å…å¾ˆå¤šä¸´æ—¶åˆ†æ”¯è¿˜åœ¨åŸºäºæ—§çš„ä»£ç ç›®å½•ç»“æ„è¿›è¡Œå¼€å‘ï¼Œå¦åˆ™åæœŸä¼šäº§ç”Ÿå¤§é‡çš„ä»£ç å†²çªï¼Œè§£å†³æˆæœ¬éå¸¸é«˜ã€‚</p><h2>Sharingæ¶æ„ä»£ç è§„åˆ™è®¾è®¡</h2><p>åŸºäºæ–°çš„ä»£ç ç»“æ„ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾è®¡æ¶æ„çº¦æŸè§„åˆ™äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å†æ¥å›é¡¾ä¸€ä¸‹Sharing2.0æ¶æ„çš„ä¸¤ä¸ªé‡è¦çº¦æŸåŸåˆ™ã€‚</p><ul>\n<li>\n<p><strong>çºµå‘è§„åˆ™ï¼šä¸Šå±‚ç»„ä»¶å¯ä»¥ä¾èµ–ä¸‹å±‚ç»„ä»¶ï¼Œä¸‹å±‚ç»„ä»¶ä¸èƒ½åå‘ä¾èµ–ä¸Šå±‚çš„ç»„ä»¶</strong>ã€‚</p>\n</li>\n<li>\n<p><strong>æ¨ªå‘è§„åˆ™ï¼šä¸šåŠ¡ç»„ä»¶ä¹‹é—´ä¸èƒ½æœ‰ç›´æ¥çš„ä¾èµ–ï¼ŒåŠŸèƒ½åŠæŠ€æœ¯ç»„ä»¶ä¹‹é—´å°½é‡å‡å°‘ä¾èµ–</strong>ã€‚</p>\n</li>\n</ul><p>åŸºäºè¿™ä¸¤ä¸ªåŸåˆ™ï¼Œæˆ‘ä»¬ç»“åˆä»£ç ç»“æ„è®¾è®¡å‡ºæ–°çš„æ¶æ„æ ¸å¿ƒçš„5ä¸ªçº¦æŸè§„åˆ™ï¼Œä½ å¯ä»¥å‚è€ƒåé¢è¿™å¼ è¡¨æ ¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/aa/f2/aac3ba374347c540bf34b594a0ec7bf2.jpg?wh=3409x1394\" alt=\"\"></p><p>æ¢³ç†å‡ºè¿™äº›çº¦æŸè§„åˆ™åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†è¿™äº›è§„åˆ™è½¬æ¢æˆå·¥å…·çš„è§„åˆ™è¿›è¡Œåˆ†æäº†ã€‚</p><h2>Dependenciesä¾èµ–åˆ†æ</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å„ä¸ªç»„ä»¶çš„Scopeï¼Œè¿™ä¸€æ­¥ç›¸å½“äºæ˜¯å®šä¹‰å„ä¸ªç»„ä»¶çš„èŒƒå›´ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ–°å¢ä¸€ä¸ªScopeåï¼Œå¯ä»¥é€‰æ‹©åœ¨é¡¹ç›®ä¸­å¯¹åº”çš„çš„ç›®å½•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥åœ¨Patternä¸­å†™æ­£åˆ™è¡¨è¾¾å¼æ¥è¿›è¡Œå®šä¹‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7e/a1/7e5f828f2577cd1a432d2591aa71dda1.jpg?wh=2546x2220\" alt=\"\"></p><p>å®šä¹‰å¥½Scopeä¹‹åï¼Œæˆ‘ä»¬å°†5ä¸ªæ ¸å¿ƒçº¦æŸè§„åˆ™è½¬åŒ–ä¸ºDependenciesçš„ä¾èµ–è§„åˆ™ã€‚</p><p>ä¸‹å›¾ä¸­çš„ <strong>Deny usages of feature in library</strong> è¡¨ç¤ºfeatureèŒƒå›´ä¸‹çš„ä»£ç ä¸èƒ½è¢«libraryèŒƒå›´ä¸‹çš„ä»£ç ç›´æ¥ä¾èµ–ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6f/4a/6fc7a2f0fa19f2573c51e5f6d026ba4a.jpg?wh=2117x2220\" alt=\"\"></p><p>å½“å®Œæˆä¾èµ–è§„åˆ™å®šä¹‰åï¼ŒDependenciesæ‰«æç»“æœä¼šè‡ªåŠ¨åŒ–å°†æ‰€æœ‰çš„å¼‚å¸¸ä¾èµ–æ ‡è®°ä¸ºçº¢è‰²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6b/42/6b2a5977f8ef5ac8fca7cd6e8a62a842.jpg?wh=2839x957\" alt=\"\"></p><p>ä»åˆ†æç»“æœå¯ä»¥çœ‹å‡ºï¼Œç›®å‰Sharingé¡¹ç›®æœ‰å››ä¸ªç»„ä»¶å­˜åœ¨ä¾èµ–é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬è§£è€¦ï¼Œåˆ†åˆ«ä¸ºæ–‡ä»¶ç»„ä»¶ã€æ¶ˆæ¯ç»„ä»¶ã€åŸºåº§ç»„ä»¶ä»¥åŠæ—¥å¿—ç»„ä»¶ã€‚</p><p>æˆ‘ä»¬æ‰“å¼€å…·ä½“æœ‰å¼‚å¸¸çš„ç±»ï¼ŒIDEè¿˜ä¼šè‡ªåŠ¨åœ¨ä»£ç åŠ ä¸Šè­¦å‘Šçš„çº¢è‰²çº¿ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4d/92/4d3273bec173000f223291abcb16cd92.jpg?wh=2346x1101\" alt=\"\"></p><p>è¿™æ˜¯DependenciesåŠŸèƒ½ä¸IDEé«˜åº¦é›†æˆå¸¦æ¥çš„å¥½å¤„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ—¥å¸¸å¼€å‘ä¸­å°±æ³¨æ„åˆ°æ¶æ„çº¦æŸçš„é—®é¢˜ï¼Œé¿å…ç ´åæ¶æ„è§„åˆ™ã€‚</p><h2>ArchUnit åˆ†æ</h2><p>æ¥ä¸‹æ¥ï¼ŒArchUnitçš„åˆ†ææ€è·¯ä¹Ÿæ˜¯å®šä¹‰åŒ…èŒƒå›´ï¼Œå¹¶å°†5ä¸ªçº¦æŸè½¬åŒ–ä¸ºä¾èµ–è§„åˆ™ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒDependenciesçš„è§„åˆ™å°è£…å½¢å¼ï¼Œå°†ArchUnitçš„è¯­æ³•ä¹Ÿåšè¿›ä¸€æ­¥çš„å°è£…ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œé™ä½åç»­ç”¨ä¾‹çš„ç»´æŠ¤æˆæœ¬ã€‚</p><pre><code class=\"language-plain\">//æŸä¸ªåŒ…åªèƒ½ä¾èµ–å¦å¤–ä¸€ä¸ªåŒ…\nprivate static ClassesShouldConjunction target_package_not_dependOn_other_package(String targetPackage, String... otherPackages) {\n    return noClasses().that().resideInAPackage(targetPackage)\n            .should().dependOnClassesThat().resideInAnyPackage(otherPackages);\n}\n//æŸä¸ªåŒ…åªèƒ½ä¾èµ–å®ƒè‡ªå·±ï¼Œä¸èƒ½ä¾èµ–å…¶ä»–åŒ…\nprivate static ClassesShouldConjunction target_package_only_dependOn_itSelf(String targetPackage) {\n    return classes().that().resideInAPackage(targetPackage)\n            .should().dependOnClassesThat().resideInAPackage(targetPackage);\n}\n</code></pre><p>æ¥ç€ï¼Œæˆ‘ä»¬å®šä¹‰ä¸åŒçš„åˆ†å±‚å’Œç»„ä»¶ã€‚å› ä¸ºæˆ‘ä»¬å·²ç»æŒ‰æœªæ¥çš„æ¶æ„è°ƒæ•´äº†å·¥ç¨‹ç›®å½•ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®šä¹‰å‡ºå¯¹åº”çš„åˆ†å±‚å’Œç»„ä»¶èŒƒå›´ã€‚</p><pre><code class=\"language-plain\">private static final String BASE = \"com.jkb.junbin.sharing.\";\nprivate static final String FEATURE = BASE + \"feature..\";\nprivate static final String FUNCTION = BASE + \"function..\";\nprivate static final String LIBRARY = BASE + \"library..\";\nprivate static final String FILE_BUNDLE = BASE + \"feature.file..\";\nprivate static final String MESSAGE_BUNDLE = BASE + \"feature.message..\";\nprivate static final String ACCOUNT_BUNDLE = BASE + \"feature.account..\";\n</code></pre><p>æœ€åå°†5ä¸ªçº¦æŸè§„åˆ™è½¬åŒ–ä¸ºArchUnitçš„æ¶æ„çº¦æŸä»£ç ã€‚è¿™ä¸ªæ—¶å€™å‰é¢å°è£…çš„çº¦æŸè§„åˆ™æ–¹æ³•å°±èµ·ä½œç”¨äº†ï¼Œæ¯ä¸ªç”¨ä¾‹åªéœ€è¦ä¼ é€’ç›¸å…³çš„ç»„ä»¶å®šä¹‰å°±å¯ä»¥äº†ã€‚</p><pre><code class=\"language-plain\">//è§„åˆ™1ï¼šlibraryåŒ…ä¸‹çš„ç±»åªèƒ½ä¾èµ–è‡ªå·±åŒ…ä¸‹çš„ç±»ï¼Œä¸èƒ½ä¾èµ–functionåŒ…æˆ–è€…featureåŒ…ä¸‹çš„ç±»\n@ArchTest\npublic static final ArchRule library_should_only_dependOn_itself =\n        target_package_not_dependOn_other_package(LIBRARY,FUNCTION,FEATURE);\n\n//è§„åˆ™2ï¼šfunctionåŒ…ä¸‹çš„ç±»ä¸èƒ½ä¾èµ–featureåŒ…ä¸‹çš„ç±»\n@ArchTest\npublic static final ArchRule function_should_not_dependOn_feature =\n        target_package_not_dependOn_other_package(FUNCTION, FEATURE);\n\n//è§„åˆ™3ï¼šaccountåŒ…ä¸‹çš„ç±»ä¸èƒ½ä¾èµ–fileæˆ–è€…messageåŒ…ä¸‹çš„ç±»\n@ArchTest\npublic static final ArchRule account_bundle_should_not_dependOn_other_bundle =\n        target_package_not_dependOn_other_package(ACCOUNT_BUNDLE, FILE_BUNDLE, MESSAGE_BUNDLE);\n\n//è§„åˆ™4ï¼šfileåŒ…ä¸‹çš„ç±»ä¸èƒ½ä¾èµ–accountæˆ–è€…messageåŒ…ä¸‹çš„ç±»       \n@ArchTest\npublic static final ArchRule file_bundle_should_not_dependOn_other_feature =\n        target_package_not_dependOn_other_package(FILE_BUNDLE, MESSAGE_BUNDLE, ACCOUNT_BUNDLE);\n\n//è§„åˆ™5ï¼šmessageåŒ…ä¸‹çš„ç±»ä¸èƒ½ä¾èµ–accountæˆ–è€…fileåŒ…ä¸‹çš„ç±»\n@ArchTest\npublic static final ArchRule message_bundle_should_not_dependOn_other_bundle =\n        target_package_not_dependOn_other_package(MESSAGE_BUNDLE, FILE_BUNDLE, ACCOUNT_BUNDLE);\n\n</code></pre><p>ç¼–å†™å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œè¿™5ä¸ªç”¨ä¾‹ã€‚ç”¨ä¾‹æ‰§è¡Œçš„ç»“æœæ˜¯åé¢è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2a/c6/2a62b6e103cd45592ed151441a1fcfc6.jpg?wh=2997x887\" alt=\"\"></p><p>ä»æ—¥å¿—ç»“æœå¯ä»¥çœ‹å‡ºï¼Œç›®å‰Sharingé¡¹ç›®æœ‰4ä¸ªçº¦æŸè§„åˆ™ä¸é€šè¿‡ï¼Œåˆ†åˆ«æ˜¯æ–‡ä»¶ç»„ä»¶å­˜åœ¨æ¨ªå‘ä¾èµ–ã€æ¶ˆæ¯ç»„ä»¶å­˜åœ¨æ¨ªå‘ä¾èµ–ã€åŠŸèƒ½ç»„ä»¶å­˜åœ¨åå‘ä¾èµ–ä»¥åŠåŸºç¡€ç»„ä»¶å­˜åœ¨åå‘ä¾èµ–ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å€ŸåŠ©ArchUnitå’ŒDependenciesä¾èµ–åˆ†æåŠŸèƒ½å¯¹Sharingé¡¹ç›®è¿›è¡Œäº†ä¸€æ¬¡åˆ†æã€‚</p><p>ä¸ºäº†æ›´åŠ æ–¹ä¾¿åœ°ç¼–å†™æ¶æ„è§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦å°†ä»£ç æ¶æ„å…ˆæŒ‰æœªæ¥çš„æ¶æ„è®¾è®¡è¿›è¡Œè°ƒæ•´ã€‚æ¥ç€åªéœ€è¦å®šä¹‰ç»„ä»¶çš„èŒƒå›´ä»¥åŠçº¦æŸè§„åˆ™å°±å¯ä»¥äº†ã€‚æœ€åç»“åˆå·¥å…·è¾…åŠ©ï¼Œæˆ‘ä»¬æ¢³ç†å‡ºSharingæŒ‰æœªæ¥æ¶æ„è®¾è®¡éœ€è¦å¤„ç†çš„é—®é¢˜æ¸…å•ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ba/af/ba1a41fd3432a0f5beef0e00cd10eaaf.jpg?wh=3500x1888\" alt=\"\"></p><p>æˆ‘ç›¸ä¿¡é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ï¼Œå¼€å¤´çš„3ä¸ªé—®é¢˜ä½ åº”è¯¥èƒ½æ‰¾åˆ°ç­”æ¡ˆã€‚</p><p><strong>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä»£ç æ•£è½å„å¤„ï¼Œçº¦æŸè§„åˆ™ä¸å¥½å†™ï¼Ÿå¯¹æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŒ‰æœªæ¥çš„æ¶æ„è®¾è®¡è°ƒæ•´ä»£ç ç»“æ„ï¼Œæ–¹ä¾¿çº¦æŸè§„åˆ™çš„è®¾è®¡ã€‚</strong></p><p><strong>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œç»“åˆæ¶æ„è®¾è®¡ï¼Œæ€ä¹ˆæ¥è®¾è®¡çº¦æŸè§„åˆ™ï¼Ÿæˆ‘ä»¬éœ€è¦ç»“åˆæ¶æ„åŸåˆ™ä»¥åŠä»£ç ç»“æ„æ¥è¿›è¡Œè®¾è®¡ã€‚</strong></p><p><strong>æœ€åä¸€ä¸ªé—®é¢˜ï¼Œçº¦æŸè§„åˆ™æ€ä¹ˆåº”ç”¨åˆ°è‡ªåŠ¨åŒ–åˆ†æå·¥å…·ä¸Šï¼Ÿæˆ‘ä»¬éœ€è¦å°†çº¦æŸè§„åˆ™è½¬æ¢æˆå„ä¸ªå·¥å…·ä¸Šçš„ç¼–å†™è§„åˆ™ã€‚</strong></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†â€œåˆ†æè®¾è®¡ç¯‡â€çš„å­¦ä¹ ã€‚é€šè¿‡å­¦ä¹ ç§»åŠ¨åº”ç”¨çš„æ¶æ„æ¼”è¿›ä»¥åŠå¸¸ç”¨çš„é—ç•™ç³»ç»Ÿåˆ†æå·¥å…·ï¼Œæˆ‘ä»¬å…¨é¢è¯Šæ–­äº†å¯¹Sharingé¡¹ç›®ï¼Œæœ€ç»ˆè¾“å‡ºäº†æŒ‰æœªæ¥æ¶æ„è®¾è®¡éœ€è¦å¤„ç†çš„é—®é¢˜æ¸…å•ã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„â€œè§£è€¦é‡æ„ç¯‡â€ä¸­ï¼Œæˆ‘ä»¬å°†åŸºäºè¿™äº›åˆ†æç»“æœï¼Œå¼€å§‹åŠ¨æ‰‹å¯¹Sharingè¿›è¡Œä»£ç çš„æ¶æ„æ”¹é€ ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æ„Ÿè°¢ä½ å­¦å®Œäº†ä»Šå¤©çš„å†…å®¹ï¼Œä»Šå¤©çš„æ€è€ƒé¢˜æ˜¯è¿™æ ·çš„ï¼šä½ èƒ½åˆ†æä¸€ä¸‹ä½ æ‰€åœ¨é¡¹ç›®çš„æ¶æ„è§„åˆ™å—ï¼Ÿè¯·ä½ å°è¯•ç”¨ArchUnitæ¥å®šä¹‰è§„åˆ™ã€‚</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠå®ƒåˆ†äº«ç»™ä½ çš„åŒäº‹æˆ–æœ‹å‹ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥é«˜æ•ˆã€é«˜è´¨é‡äº¤ä»˜è½¯ä»¶ï¼</p>","comments":[{"had_liked":false,"id":369168,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"åŒ—äº¬","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1677198625,"is_pvip":false,"replies":[{"id":134499,"content":"Hiï¼Œpeterã€‚\nQ1: æ‰«æç»“æœï¼Œç‚¹å‡»å°æ‰³æ‰‹ğŸ”§ï¼Œç„¶åå‡ºç°Dependency Validationçš„é¡µé¢ï¼Œå†ç‚¹å‡»+å·æŒ‰é’®ï¼Œç„¶ååœ¨ALLçš„é€‰é¡¹æ—è¾¹ç‚¹å‡»...çš„æŒ‰é’®å°±å¯ä»¥å‡ºç°Scopesçš„é¡µé¢äº†ã€‚\nQ2ï¼šæˆ‘çš„ç†è§£æ˜¯çƒ­æ›´æ–°æ˜¯åº”ç”¨å†…æ’ä»¶çš„æ›´æ–°ï¼Œä¸æ˜¯æ•´ä¸ªåº”ç”¨çš„æ›´æ–°ã€‚çƒ­ä¿®å¤æ˜¯ä¿®æ”¹Bugã€‚\næœŸå¾…ä½ çš„å†æ¬¡ç•™è¨€ã€‚ğŸ¤","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1677205145,"ip_address":"å¹¿ä¸œ","comment_id":369168,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"è¯·æ•™è€å¸ˆä¸¤ä¸ªé—®é¢˜ï¼š\nQ1ï¼šç”¨Dependenciesæ—¶æ€ä¹ˆå¢åŠ scopeï¼Ÿ\næˆ‘ç”¨AS4.1ï¼Œæ“ä½œé¡ºåºï¼šèœå•Analyze ïƒ  Dependenciesã€‚ç‚¹å‡»åASå¼€å§‹æ‰§è¡ŒDependenciesæ‰«æï¼Œç„¶åå‡ºç°æ‰«æç»“æœçš„ç•Œé¢ï¼›æ­¤ç•Œé¢åˆ†ä¸ºå·¦å³ä¸¤ä¸ªéƒ¨åˆ†ã€‚æˆ‘åœ¨æ­¤ç•Œé¢å°è¯•å¤šæ¬¡ï¼Œæ²¡æœ‰æ‰¾åˆ°åœ¨å“ªé‡Œå¯ä»¥æ·»åŠ scopeã€‚ï¼ˆæ³¨ï¼šæˆ‘çš„ç•Œé¢å’Œæ–‡ä¸­çš„ç•Œé¢ç›¸åŒã€‚ï¼‰\n\nQ2ï¼šâ€œçƒ­æ›´æ–°â€ã€â€œçƒ­ä¿®å¤â€çš„ç†è§£æ˜¯å¦å¯¹ï¼Ÿ\nAâ€œçƒ­æ›´æ–°â€ï¼šç”¨æˆ·å®‰è£…äº†ç‰ˆæœ¬1ï¼Œç°åœ¨å‡ºäº†ç‰ˆæœ¬2ï¼Œç”¨æˆ·ä¸éœ€è¦å…ˆå¸è½½ç‰ˆæœ¬1ç„¶åé‡æ–°å®‰è£…ç‰ˆæœ¬2ï¼Œè€Œæ˜¯åœ¨ç‰ˆæœ¬1çš„åŸºç¡€ä¸Šç›´æ¥æ›´æ–°ä¸ºç‰ˆæœ¬2ã€‚   Bâ€œçƒ­ä¿®å¤â€ï¼šä¸ç‰ˆæœ¬æ— å…³ï¼Œç”¨æˆ·å®‰è£…äº†æŸä¸€ä¸ªç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬æœ‰bugï¼Œåœ¨çº¿ç›´æ¥æ‰“è¡¥ä¸æ¥ä¿®å¤ã€‚  æˆ‘çš„ç†è§£å¯¹å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606527,"discussion_content":"Hiï¼Œpeterã€‚\nQ1: æ‰«æç»“æœï¼Œç‚¹å‡»å°æ‰³æ‰‹ğŸ”§ï¼Œç„¶åå‡ºç°Dependency Validationçš„é¡µé¢ï¼Œå†ç‚¹å‡»+å·æŒ‰é’®ï¼Œç„¶ååœ¨ALLçš„é€‰é¡¹æ—è¾¹ç‚¹å‡»...çš„æŒ‰é’®å°±å¯ä»¥å‡ºç°Scopesçš„é¡µé¢äº†ã€‚\nQ2ï¼šæˆ‘çš„ç†è§£æ˜¯çƒ­æ›´æ–°æ˜¯åº”ç”¨å†…æ’ä»¶çš„æ›´æ–°ï¼Œä¸æ˜¯æ•´ä¸ªåº”ç”¨çš„æ›´æ–°ã€‚çƒ­ä¿®å¤æ˜¯ä¿®æ”¹Bugã€‚\næœŸå¾…ä½ çš„å†æ¬¡ç•™è¨€ã€‚ğŸ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677205145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2638600,"avatar":"https://static001.geekbang.org/account/avatar/00/28/43/08/f6cf3b5c.jpg","nickname":"æ–°å¥‡ï½","note":"","ucode":"AFF6F4DF8AD7D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607276,"discussion_content":"è€å¸ˆä½ å¥½ï¼\nandroid studioå¦‚ä½•ç¼–è¯‘æ—¶è§¦å‘archunitæ£€æŸ¥ï¼Œæ¯”å¦‚æ‰§è¡ŒassembleReleaseè¿™ä¸ªtaskçš„æ—¶å€™è§¦å‘å†™å¥½çš„archunitæ£€æµ‹ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨å»testä¸‹è¿è¡Œ ï¼Œè¿˜æœ‰Gitæäº¤çš„æ—¶å€™æ€ä¹ˆæ£€æµ‹å‘¢ï¼Œæœ‰æ²¡æœ‰ç›¸å…³èµ„æ–™å’Œæ•™ç¨‹å•Šï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677730604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380631,"user_name":"AÄî„ é˜³ï½","can_delete":false,"product_type":"c1","uid":2251159,"ip_address":"ä¸Šæµ·","ucode":"F89841D298A90D","user_header":"https://static001.geekbang.org/account/avatar/00/22/59/97/9b7a412c.jpg","comment_is_top":false,"comment_ctime":1693909996,"is_pvip":false,"replies":[{"id":139331,"content":"æˆ‘çš„ç†è§£æ˜¯å¯ä»¥å°è£…æŠ½å–æˆåŸºç¡€çš„åŠŸèƒ½ç»„ä»¶ï¼Œè¿™æ ·å¯ä»¥è®©ä¸åŒçš„ä¸šåŠ¡ç»„ä»¶å¤ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1697596906,"ip_address":"æ²³å—","comment_id":380631,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"å¦‚æœæ¨¡å—ä¹‹é—´å­˜åœ¨é¡µé¢å¤ç”¨æ€ä¹ˆåŠå‘¢ï¼Œè¿™ç§æ€ä¹ˆåšåˆ°ä¸æ¨ªå‘ä¾èµ–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629744,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯å¯ä»¥å°è£…æŠ½å–æˆåŸºç¡€çš„åŠŸèƒ½ç»„ä»¶ï¼Œè¿™æ ·å¯ä»¥è®©ä¸åŒçš„ä¸šåŠ¡ç»„ä»¶å¤ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697596906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ²³å—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371111,"user_name":"ç¨»è‰äººçš„å¿§æ¡‘","can_delete":false,"product_type":"c1","uid":1125998,"ip_address":"æµ™æ±Ÿ","ucode":"00A65AB42DE44B","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/6e/05230eb6.jpg","comment_is_top":false,"comment_ctime":1679554850,"is_pvip":false,"replies":[{"id":135449,"content":"Hiï¼Œä½•æ•¬ã€‚\nè¿™é‡ŒæŒ‰ç…§åŒ…ç»“æ„å†™çº¦æŸï¼ŒåŒ…ç»“æ„åº”è¯¥å°±æ˜¯æœªæ¥ç»„ä»¶åŒ–æ¶æ„è®¾è®¡çš„æ–°åŒ…ç»“æ„äº†ã€‚æ‰€ä»¥å½“çº¦æŸç”¨ä¾‹éƒ½æ‰§è¡ŒæˆåŠŸäº†ä¹Ÿæ„å‘³ç€å®Œæˆæ–°æ¶æ„çš„æ”¹é€ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1679744587,"ip_address":"å¹¿ä¸œ","comment_id":371111,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"è¿™é‡ŒæŒ‰ç…§åŒ…ç»“æ„çš„å†™å®Œçº¦æŸï¼Œä¹‹åæŒ‰ç…§ç»„ä»¶é‡æ„ï¼Œçº¦æŸè§„åˆ™æ˜¯ä¸æ˜¯è¿˜å¾—è°ƒæ•´","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610763,"discussion_content":"Hiï¼Œä½•æ•¬ã€‚\nè¿™é‡ŒæŒ‰ç…§åŒ…ç»“æ„å†™çº¦æŸï¼ŒåŒ…ç»“æ„åº”è¯¥å°±æ˜¯æœªæ¥ç»„ä»¶åŒ–æ¶æ„è®¾è®¡çš„æ–°åŒ…ç»“æ„äº†ã€‚æ‰€ä»¥å½“çº¦æŸç”¨ä¾‹éƒ½æ‰§è¡ŒæˆåŠŸäº†ä¹Ÿæ„å‘³ç€å®Œæˆæ–°æ¶æ„çš„æ”¹é€ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679744587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369885,"user_name":"ç¨»è‰äººçš„å¿§æ¡‘","can_delete":false,"product_type":"c1","uid":1125998,"ip_address":"æµ™æ±Ÿ","ucode":"00A65AB42DE44B","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/6e/05230eb6.jpg","comment_is_top":false,"comment_ctime":1678096151,"is_pvip":false,"replies":[{"id":134825,"content":"Hiï¼Œä½•æ•¬ã€‚\nä»£ç æ›´æ–°åœ¨ï¼šhttps:&#47;&#47;github.com&#47;junbin1011&#47;Sharingã€‚\nå¯¹åº”çš„ArchUnitç”¨ä¾‹æ–‡ä»¶åœ¨ï¼šhttps:&#47;&#47;github.com&#47;junbin1011&#47;Sharing&#47;blob&#47;main&#47;app&#47;src&#47;test&#47;java&#47;com&#47;jkb&#47;junbin&#47;sharing&#47;ArchRuleTest.java","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1678100662,"ip_address":"å¹¿ä¸œ","comment_id":369885,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"ç¤ºä¾‹é¡¹ç›®çš„archutilä¾èµ–ç‰ˆæœ¬ï¼Œèƒ½å¦åšä¸€ä¸‹æ›´æ–°","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607705,"discussion_content":"Hiï¼Œä½•æ•¬ã€‚\nä»£ç æ›´æ–°åœ¨ï¼šhttps://github.com/junbin1011/Sharingã€‚\nå¯¹åº”çš„ArchUnitç”¨ä¾‹æ–‡ä»¶åœ¨ï¼šhttps://github.com/junbin1011/Sharing/blob/main/app/src/test/java/com/jkb/junbin/sharing/ArchRuleTest.java","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678100662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369456,"user_name":"ä¸­ä¸–çºªçš„knight","can_delete":false,"product_type":"c1","uid":1121710,"ip_address":"ä¸Šæµ·","ucode":"783D49A83D2441","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/ae/f78ce0d7.jpg","comment_is_top":false,"comment_ctime":1677559560,"is_pvip":false,"replies":[{"id":134654,"content":"Hiï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨å•ä¸»å¹²çš„æäº¤æ¨¡å¼ï¼Œæ‰€æœ‰ä»£ç éƒ½ä¼šæ‹†è§£æˆå°æ­¥æäº¤ğŸ¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1179206,"ctime":1677632191,"ip_address":"å¹¿ä¸œ","comment_id":369456,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"github ä¸ŠSharingé¡¹ç›®å¸Œæœ›è€å¸ˆå¯ä»¥ä¿ç•™ä¸€ä»½é‡æ„å‰åˆ†æ”¯ï¼Œæ¯æ¬¡é‡æ„åˆ‡ä¸€æ¬¡åˆ†æ”¯ã€‚","like_count":0,"discussions":[{"author":{"id":1179206,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/46/033fccb2.jpg","nickname":"é»„ä¿Šå½¬","note":"","ucode":"0DBE0CE4E7CFC9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607109,"discussion_content":"Hiï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨å•ä¸»å¹²çš„æäº¤æ¨¡å¼ï¼Œæ‰€æœ‰ä»£ç éƒ½ä¼šæ‹†è§£æˆå°æ­¥æäº¤ğŸ¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677632191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395802,"user_name":"Lihyper","can_delete":false,"product_type":"c1","uid":1640695,"ip_address":"å¹¿ä¸œ","ucode":"77B6F9D695C610","user_header":"https://static001.geekbang.org/account/avatar/00/19/08/f7/2c3238bd.jpg","comment_is_top":false,"comment_ctime":1732106329,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100525001,"comment_content":"æ¨¡å‹æ•°æ®ä»¥åŠæ¶ˆæ¯äº‹ä»¶å¯ä»¥è¯¦ç»†è§£è¯´ä¸€ä¸‹å—ï¼Ÿ","like_count":1}]}