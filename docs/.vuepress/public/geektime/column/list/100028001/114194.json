{"id":114194,"title":"34 | MySQLè°ƒä¼˜ä¹‹äº‹åŠ¡ï¼šé«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®åº“äº‹åŠ¡è°ƒä¼˜","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åˆ˜è¶…ã€‚</p><p>æ•°æ®åº“äº‹åŠ¡æ˜¯æ•°æ®åº“ç³»ç»Ÿæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªé€»è¾‘å¤„ç†å•å…ƒï¼Œä¿è¯ä¸€ä¸ªæ•°æ®åº“æ“ä½œè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ã€‚è°ˆåˆ°ä»–ï¼Œå°±ä¸å¾—ä¸æACIDå±æ€§äº†ã€‚æ•°æ®åº“äº‹åŠ¡å…·æœ‰ä»¥ä¸‹å››ä¸ªåŸºæœ¬å±æ€§ï¼šåŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistentï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰ä»¥åŠæŒä¹…æ€§ï¼ˆDurableï¼‰ã€‚æ­£æ˜¯è¿™äº›ç‰¹æ€§ï¼Œæ‰ä¿è¯äº†æ•°æ®åº“äº‹åŠ¡çš„å®‰å…¨æ€§ã€‚è€Œåœ¨MySQLä¸­ï¼Œé‰´äºMyISAMå­˜å‚¨å¼•æ“ä¸æ”¯æŒäº‹åŠ¡ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çš„å†…å®¹éƒ½æ˜¯åœ¨InnoDBå­˜å‚¨å¼•æ“çš„åŸºç¡€ä¸Šè¿›è¡Œè®²è§£çš„ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå¯ä»¥å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œç¨‹åºï¼Œç„¶è€Œå¹¶å‘è™½ç„¶æé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œå´ç»™ç¨‹åºå¸¦æ¥äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚äº‹åŠ¡è·Ÿå¤šçº¿ç¨‹ä¸€æ ·ï¼Œä¸ºäº†æé«˜æ•°æ®åº“å¤„ç†äº‹åŠ¡çš„ååé‡ï¼Œæ•°æ®åº“åŒæ ·æ”¯æŒå¹¶å‘äº‹åŠ¡ï¼Œè€Œåœ¨å¹¶å‘è¿è¡Œä¸­ï¼ŒåŒæ ·ä¹Ÿå­˜åœ¨ç€å®‰å…¨æ€§é—®é¢˜ï¼Œä¾‹å¦‚ï¼Œä¿®æ”¹æ•°æ®ä¸¢å¤±ï¼Œè¯»å–æ•°æ®ä¸ä¸€è‡´ç­‰ã€‚</p><p>åœ¨æ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œäº‹åŠ¡çš„éš”ç¦»æ˜¯è§£å†³å¹¶å‘äº‹åŠ¡é—®é¢˜çš„å…³é”®ï¼Œ ä»Šå¤©æˆ‘ä»¬å°±é‡ç‚¹äº†è§£ä¸‹äº‹åŠ¡éš”ç¦»çš„å®ç°åŸç†ï¼Œä»¥åŠå¦‚ä½•ä¼˜åŒ–äº‹åŠ¡éš”ç¦»å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚</p><h2>å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªä¾‹å­æ¥äº†è§£ä¸‹å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„å‡ ä¸ªé—®é¢˜ï¼š</p><p>1.æ•°æ®ä¸¢å¤±</p><p><img src=\"https://static001.geekbang.org/resource/image/db/7d/db7d28a1f27d46cf534064ab4e74f47d.jpg?wh=2530*384\" alt=\"\"></p><p>2.è„è¯»</p><p><img src=\"https://static001.geekbang.org/resource/image/d7/4c/d717c7e782620d2e46beb070dbc8154c.jpg?wh=2506*384\" alt=\"\"></p><p>3.ä¸å¯é‡å¤è¯»</p><p><img src=\"https://static001.geekbang.org/resource/image/61/9a/6173739ee9a5d7e26c8b00f2ed8d9e9a.jpg?wh=2560*372\" alt=\"\"></p><p>4.å¹»è¯»</p><p><img src=\"https://static001.geekbang.org/resource/image/28/b6/280826363e1d5a3e64529dfd3443e5b6.jpg?wh=2598*374\" alt=\"\"></p><h2>äº‹åŠ¡éš”ç¦»è§£å†³å¹¶å‘é—®é¢˜</h2><p>ä»¥ä¸Š 4 ä¸ªå¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜ï¼Œå…¶ä¸­ï¼Œæ•°æ®ä¸¢å¤±å¯ä»¥åŸºäºæ•°æ®åº“ä¸­çš„æ‚²è§‚é”æ¥é¿å…å‘ç”Ÿï¼Œå³åœ¨æŸ¥è¯¢æ—¶é€šè¿‡åœ¨äº‹åŠ¡ä¸­ä½¿ç”¨ select xx for update è¯­å¥æ¥å®ç°ä¸€ä¸ªæ’ä»–é”ï¼Œä¿è¯åœ¨è¯¥äº‹åŠ¡ç»“æŸä¹‹å‰å…¶ä»–äº‹åŠ¡æ— æ³•æ›´æ–°è¯¥æ•°æ®ã€‚</p><!-- [[[read_end]]] --><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åŸºäºä¹è§‚é”æ¥é¿å…ï¼Œå³å°†æŸä¸€å­—æ®µä½œä¸ºç‰ˆæœ¬å·ï¼Œå¦‚æœæ›´æ–°æ—¶çš„ç‰ˆæœ¬å·è·Ÿä¹‹å‰çš„ç‰ˆæœ¬ä¸€è‡´ï¼Œåˆ™æ›´æ–°ï¼Œå¦åˆ™æ›´æ–°å¤±è´¥ã€‚å‰©ä¸‹ 3 ä¸ªé—®é¢˜ï¼Œå…¶å®æ˜¯æ•°æ®åº“è¯»ä¸€è‡´æ€§é€ æˆçš„ï¼Œéœ€è¦æ•°æ®åº“æä¾›ä¸€å®šçš„äº‹åŠ¡éš”ç¦»æœºåˆ¶æ¥è§£å†³ã€‚</p><p>æˆ‘ä»¬é€šè¿‡åŠ é”çš„æ–¹å¼ï¼Œå¯ä»¥å®ç°ä¸åŒçš„äº‹åŠ¡éš”ç¦»æœºåˆ¶ã€‚åœ¨äº†è§£äº‹åŠ¡éš”ç¦»æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆæ¥äº†è§£ä¸‹MySQLéƒ½æœ‰å“ªäº›é”æœºåˆ¶ã€‚</p><p>InnoDBå®ç°äº†ä¸¤ç§ç±»å‹çš„é”æœºåˆ¶ï¼šå…±äº«é”ï¼ˆSï¼‰å’Œæ’ä»–é”ï¼ˆXï¼‰ã€‚å…±äº«é”å…è®¸ä¸€ä¸ªäº‹åŠ¡è¯»æ•°æ®ï¼Œä¸å…è®¸ä¿®æ”¹æ•°æ®ï¼Œå¦‚æœå…¶ä»–äº‹åŠ¡è¦å†å¯¹è¯¥è¡ŒåŠ é”ï¼Œåªèƒ½åŠ å…±äº«é”ï¼›æ’ä»–é”æ˜¯ä¿®æ”¹æ•°æ®æ—¶åŠ çš„é”ï¼Œå¯ä»¥è¯»å–å’Œä¿®æ”¹æ•°æ®ï¼Œä¸€æ—¦ä¸€ä¸ªäº‹åŠ¡å¯¹è¯¥è¡Œæ•°æ®åŠ é”ï¼Œå…¶ä»–äº‹åŠ¡å°†ä¸èƒ½å†å¯¹è¯¥æ•°æ®åŠ ä»»åŠ¡é”ã€‚</p><p><strong>ç†Ÿæ‚‰äº†ä»¥ä¸ŠInnoDBè¡Œé”çš„å®ç°åŸç†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´æ¸…æ¥šåœ°ç†è§£ä¸‹é¢çš„å†…å®¹ã€‚</strong></p><p>åœ¨æ“ä½œæ•°æ®çš„äº‹åŠ¡ä¸­ï¼Œä¸åŒçš„é”æœºåˆ¶ä¼šäº§ç”Ÿä»¥ä¸‹å‡ ç§ä¸åŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¸åŒçš„éš”ç¦»çº§åˆ«åˆ†åˆ«å¯ä»¥è§£å†³å¹¶å‘äº‹åŠ¡äº§ç”Ÿçš„å‡ ä¸ªé—®é¢˜ï¼Œå¯¹åº”å¦‚ä¸‹ï¼š</p><p><strong>æœªæäº¤è¯»ï¼ˆRead Uncommittedï¼‰ï¼š</strong>åœ¨äº‹åŠ¡Aè¯»å–æ•°æ®æ—¶ï¼Œäº‹åŠ¡Bè¯»å–æ•°æ®åŠ äº†å…±äº«é”ï¼Œä¿®æ”¹æ•°æ®æ—¶åŠ äº†æ’å®ƒé”ã€‚è¿™ç§éš”ç¦»çº§åˆ«ï¼Œä¼šå¯¼è‡´è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»ã€‚</p><p><strong>å·²æäº¤è¯»ï¼ˆRead Committedï¼‰ï¼š</strong>åœ¨äº‹åŠ¡Aè¯»å–æ•°æ®æ—¶å¢åŠ äº†å…±äº«é”ï¼Œä¸€æ—¦è¯»å–ï¼Œç«‹å³é‡Šæ”¾é”ï¼Œäº‹åŠ¡Bè¯»å–ä¿®æ”¹æ•°æ®æ—¶å¢åŠ äº†è¡Œçº§æ’ä»–é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹åŠ¡Aåœ¨è¯»å–æ•°æ®æ—¶ï¼Œäº‹åŠ¡Båªèƒ½è¯»å–æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹ã€‚å½“äº‹åŠ¡Aè¯»å–åˆ°æ•°æ®åï¼Œäº‹åŠ¡Bæ‰èƒ½ä¿®æ”¹ã€‚è¿™ç§éš”ç¦»çº§åˆ«ï¼Œå¯ä»¥é¿å…è„è¯»ï¼Œä½†ä¾ç„¶å­˜åœ¨ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»çš„é—®é¢˜ã€‚</p><p><strong>å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰ï¼š</strong>åœ¨äº‹åŠ¡Aè¯»å–æ•°æ®æ—¶å¢åŠ äº†å…±äº«é”ï¼Œäº‹åŠ¡ç»“æŸï¼Œæ‰é‡Šæ”¾é”ï¼Œäº‹åŠ¡Bè¯»å–ä¿®æ”¹æ•°æ®æ—¶å¢åŠ äº†è¡Œçº§æ’ä»–é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹åŠ¡Aåœ¨æ²¡æœ‰ç»“æŸäº‹åŠ¡æ—¶ï¼Œäº‹åŠ¡Båªèƒ½è¯»å–æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹ã€‚å½“äº‹åŠ¡Aç»“æŸäº‹åŠ¡ï¼Œäº‹åŠ¡Bæ‰èƒ½ä¿®æ”¹ã€‚è¿™ç§éš”ç¦»çº§åˆ«ï¼Œå¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œä½†ä¾ç„¶å­˜åœ¨å¹»è¯»çš„é—®é¢˜ã€‚</p><p><strong>å¯åºåˆ—åŒ–ï¼ˆSerializableï¼‰ï¼š</strong>åœ¨äº‹åŠ¡Aè¯»å–æ•°æ®æ—¶å¢åŠ äº†å…±äº«é”ï¼Œäº‹åŠ¡ç»“æŸï¼Œæ‰é‡Šæ”¾é”ï¼Œäº‹åŠ¡Bè¯»å–ä¿®æ”¹æ•°æ®æ—¶å¢åŠ äº†è¡¨çº§æ’ä»–é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾é”ã€‚å¯åºåˆ—åŒ–è§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ç­‰é—®é¢˜ï¼Œä½†éš”ç¦»çº§åˆ«è¶Šæ¥è¶Šé«˜çš„åŒæ—¶ï¼Œå¹¶å‘æ€§ä¼šè¶Šæ¥è¶Šä½ã€‚</p><p>InnoDBä¸­çš„RCå’ŒRRéš”ç¦»äº‹åŠ¡æ˜¯åŸºäºå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰å®ç°é«˜æ€§èƒ½äº‹åŠ¡ã€‚ä¸€æ—¦æ•°æ®è¢«åŠ ä¸Šæ’ä»–é”ï¼Œå…¶ä»–äº‹åŠ¡å°†æ— æ³•åŠ å…¥å…±äº«é”ï¼Œä¸”å¤„äºé˜»å¡ç­‰å¾…çŠ¶æ€ï¼Œå¦‚æœä¸€å¼ è¡¨æœ‰å¤§é‡çš„è¯·æ±‚ï¼Œè¿™æ ·çš„æ€§èƒ½å°†æ˜¯æ— æ³•æ”¯æŒçš„ã€‚</p><p>MVCCå¯¹æ™®é€šçš„ Select ä¸åŠ é”ï¼Œå¦‚æœè¯»å–çš„æ•°æ®æ­£åœ¨æ‰§è¡ŒDeleteæˆ–Updateæ“ä½œï¼Œè¿™æ—¶è¯»å–æ“ä½œä¸ä¼šç­‰å¾…æ’å®ƒé”çš„é‡Šæ”¾ï¼Œè€Œæ˜¯ç›´æ¥åˆ©ç”¨MVCCè¯»å–è¯¥è¡Œçš„æ•°æ®å¿«ç…§ï¼ˆæ•°æ®å¿«ç…§æ˜¯æŒ‡åœ¨è¯¥è¡Œçš„ä¹‹å‰ç‰ˆæœ¬çš„æ•°æ®ï¼Œè€Œæ•°æ®å¿«ç…§çš„ç‰ˆæœ¬æ˜¯åŸºäºundoå®ç°çš„ï¼Œundoæ˜¯ç”¨æ¥åšäº‹åŠ¡å›æ»šçš„ï¼Œè®°å½•äº†å›æ»šçš„ä¸åŒç‰ˆæœ¬çš„è¡Œè®°å½•ï¼‰ã€‚<span class=\"orange\">MVCCé¿å…äº†å¯¹æ•°æ®é‡å¤åŠ é”çš„è¿‡ç¨‹ï¼Œå¤§å¤§æé«˜äº†è¯»æ“ä½œçš„æ€§èƒ½ã€‚</span></p><h2>é”å…·ä½“å®ç°ç®—æ³•</h2><p>æˆ‘ä»¬çŸ¥é“ï¼ŒInnoDBæ—¢å®ç°äº†è¡Œé”ï¼Œä¹Ÿå®ç°äº†è¡¨é”ã€‚è¡Œé”æ˜¯é€šè¿‡ç´¢å¼•å®ç°çš„ï¼Œå¦‚æœä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œé‚£ä¹ˆInnoDBå°†å¯¹è¡¨ä¸­æ‰€æœ‰çš„è®°å½•è¿›è¡ŒåŠ é”ï¼Œå…¶å®å°±æ˜¯å‡çº§ä¸ºè¡¨é”äº†ã€‚</p><p>è¡Œé”çš„å…·ä½“å®ç°ç®—æ³•æœ‰ä¸‰ç§ï¼šrecord lockã€gap lockä»¥åŠnext-key lockã€‚record lockæ˜¯ä¸“é—¨å¯¹ç´¢å¼•é¡¹åŠ é”ï¼›gap lockæ˜¯å¯¹ç´¢å¼•é¡¹ä¹‹é—´çš„é—´éš™åŠ é”ï¼›next-key lockåˆ™æ˜¯å‰é¢ä¸¤ç§çš„ç»„åˆï¼Œå¯¹ç´¢å¼•é¡¹ä»¥å…¶ä¹‹é—´çš„é—´éš™åŠ é”ã€‚</p><p>åªåœ¨å¯é‡å¤è¯»æˆ–ä»¥ä¸Šéš”ç¦»çº§åˆ«ä¸‹çš„ç‰¹å®šæ“ä½œæ‰ä¼šå–å¾—gap lockæˆ–next-key lockï¼Œåœ¨Select ã€Updateå’ŒDeleteæ—¶ï¼Œé™¤äº†åŸºäºå”¯ä¸€ç´¢å¼•çš„æŸ¥è¯¢ä¹‹å¤–ï¼Œå…¶ä»–ç´¢å¼•æŸ¥è¯¢æ—¶éƒ½ä¼šè·å–gap lockæˆ–next-key lockï¼Œå³é”ä½å…¶æ‰«æçš„èŒƒå›´ã€‚</p><h2>ä¼˜åŒ–é«˜å¹¶å‘äº‹åŠ¡</h2><p>é€šè¿‡ä»¥ä¸Šè®²è§£ï¼Œç›¸ä¿¡ä½ å¯¹äº‹åŠ¡ã€é”ä»¥åŠéš”ç¦»çº§åˆ«å·²ç»æœ‰äº†ä¸€ä¸ªé€å½»çš„äº†è§£äº†ã€‚æ¸…æ¥šäº†é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥èŠèŠé«˜å¹¶å‘åœºæ™¯ä¸‹çš„äº‹åŠ¡åˆ°åº•è¯¥å¦‚ä½•è°ƒä¼˜äº†ã€‚</p><h3>1. ç»“åˆä¸šåŠ¡åœºæ™¯ï¼Œä½¿ç”¨ä½çº§åˆ«äº‹åŠ¡éš”ç¦»</h3><p>åœ¨é«˜å¹¶å‘ä¸šåŠ¡ä¸­ï¼Œä¸ºäº†ä¿è¯ä¸šåŠ¡æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ“ä½œæ•°æ®åº“æ—¶å¾€å¾€ä¼šä½¿ç”¨åˆ°ä¸åŒçº§åˆ«çš„äº‹åŠ¡éš”ç¦»ã€‚éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œå¹¶å‘æ€§èƒ½å°±è¶Šä½ã€‚</p><p>é‚£æ¢åˆ°ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­ç”¨å“ªç§éš”ç¦»çº§åˆ«æ›´åˆé€‚å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ä¸ªç®€å•çš„ä¸šåŠ¡æ¥è¯´ä¸‹å…¶ä¸­çš„é€‰æ‹©æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬åœ¨ä¿®æ”¹ç”¨æˆ·æœ€åç™»å½•æ—¶é—´çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè¿™é‡Œå¯¹æŸ¥è¯¢ç”¨æˆ·çš„ç™»å½•æ—¶é—´æ²¡æœ‰ç‰¹åˆ«ä¸¥æ ¼çš„å‡†ç¡®æ€§è¦æ±‚ï¼Œè€Œä¿®æ”¹ç”¨æˆ·ç™»å½•ä¿¡æ¯åªæœ‰ç”¨æˆ·è‡ªå·±ç™»å½•æ—¶æ‰ä¼šä¿®æ”¹ï¼Œä¸å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡æäº¤çš„ä¿¡æ¯è¢«è¦†ç›–çš„å¯èƒ½ã€‚æ‰€ä»¥æˆ‘ä»¬å…è®¸è¯¥ä¸šåŠ¡ä½¿ç”¨æœ€ä½éš”ç¦»çº§åˆ«ã€‚</p><p>è€Œå¦‚æœæ˜¯è´¦æˆ·ä¸­çš„ä½™é¢æˆ–ç§¯åˆ†çš„æ¶ˆè´¹ï¼Œå°±å­˜åœ¨å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶æ¶ˆè´¹ä¸€ä¸ªè´¦æˆ·çš„æƒ…å†µï¼Œæ­¤æ—¶æˆ‘ä»¬åº”è¯¥é€‰æ‹©RRçº§åˆ«æ¥ä¿è¯ä¸€æ—¦æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯åœ¨å¯¹è´¦æˆ·è¿›è¡Œæ¶ˆè´¹ï¼Œå…¶ä»–å®¢æˆ·ç«¯å°±ä¸å¯èƒ½å¯¹è¯¥è´¦æˆ·åŒæ—¶è¿›è¡Œæ¶ˆè´¹äº†ã€‚</p><h3>2. é¿å…è¡Œé”å‡çº§è¡¨é”</h3><p>å‰é¢è®²äº†ï¼Œåœ¨InnoDBä¸­ï¼Œè¡Œé”æ˜¯é€šè¿‡ç´¢å¼•å®ç°çš„ï¼Œå¦‚æœä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œè¡Œé”å°†ä¼šå‡çº§åˆ°è¡¨é”ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œè¡¨é”æ˜¯ä¼šä¸¥é‡å½±å“åˆ°æ•´å¼ è¡¨çš„æ“ä½œæ€§èƒ½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥é¿å…ä»–ã€‚</p><h3>3. æ§åˆ¶äº‹åŠ¡çš„å¤§å°ï¼Œå‡å°‘é”å®šçš„èµ„æºé‡å’Œé”å®šæ—¶é—´é•¿åº¦</h3><p>ä½ æ˜¯å¦é‡åˆ°è¿‡ä»¥ä¸‹SQLå¼‚å¸¸å‘¢ï¼Ÿåœ¨æŠ¢è´­ç³»ç»Ÿçš„æ—¥å¿—ä¸­ï¼Œåœ¨æ´»åŠ¨åŒºé—´ï¼Œæˆ‘ä»¬ç»å¸¸å¯ä»¥çœ‹åˆ°è¿™ç§å¼‚å¸¸æ—¥å¿—ï¼š</p><pre><code>MySQLQueryInterruptedException: Query execution was interrupted\n</code></pre><p>ç”±äºåœ¨æŠ¢è´­æäº¤è®¢å•ä¸­å¼€å¯äº†äº‹åŠ¡ï¼Œåœ¨é«˜å¹¶å‘æ—¶å¯¹ä¸€æ¡è®°å½•è¿›è¡Œæ›´æ–°çš„æƒ…å†µä¸‹ï¼Œç”±äºæ›´æ–°è®°å½•æ‰€åœ¨çš„äº‹åŠ¡è¿˜å¯èƒ½å­˜åœ¨å…¶ä»–æ“ä½œï¼Œå¯¼è‡´ä¸€ä¸ªäº‹åŠ¡æ¯”è¾ƒé•¿ï¼Œå½“æœ‰å¤§é‡è¯·æ±‚è¿›å…¥æ—¶ï¼Œå°±å¯èƒ½å¯¼è‡´ä¸€äº›è¯·æ±‚åŒæ—¶è¿›å…¥åˆ°äº‹åŠ¡ä¸­ã€‚</p><p>åˆå› ä¸ºé”çš„ç«äº‰æ˜¯ä¸å…¬å¹³çš„ï¼Œå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶å¯¹ä¸€æ¡è®°å½•è¿›è¡Œæ›´æ–°æ—¶ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ›´æ–°æ“ä½œè¿›å»æ’é˜Ÿç³»ç»Ÿåï¼Œå¯èƒ½ä¼šä¸€ç›´æ‹¿ä¸åˆ°é”ï¼Œæœ€åå› è¶…æ—¶è¢«ç³»ç»Ÿæ‰“æ–­è¸¢å‡ºã€‚</p><p>åœ¨ç”¨æˆ·è´­ä¹°å•†å“æ—¶ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æŸ¥è¯¢åº“å­˜ä½™é¢ï¼Œå†æ–°å»ºä¸€ä¸ªè®¢å•ï¼Œå¹¶æ‰£é™¤ç›¸åº”çš„åº“å­˜ã€‚è¿™ä¸€ç³»åˆ—æ“ä½œæ˜¯å¤„äºåŒä¸€ä¸ªäº‹åŠ¡çš„ã€‚</p><p>ä»¥ä¸Šä¸šåŠ¡è‹¥æ˜¯åœ¨ä¸¤ç§ä¸åŒçš„æ‰§è¡Œé¡ºåºä¸‹ï¼Œå…¶ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†åœ¨äº‹åŠ¡æ€§èƒ½æ–¹é¢å´ä¸ä¸€æ ·ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0c/27/0c60d5685aa881cf66be43c6c4529927.jpg?wh=1358*314\" alt=\"\"></p><p>è¿™æ˜¯å› ä¸ºï¼Œè™½ç„¶è¿™äº›æ“ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ï¼Œä½†é”çš„ç”³è¯·åœ¨ä¸åŒæ—¶é—´ï¼Œåªæœ‰å½“å…¶ä»–æ“ä½œéƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šé‡Šæ”¾æ‰€æœ‰é”ã€‚å› ä¸ºæ‰£é™¤åº“å­˜æ˜¯æ›´æ–°æ“ä½œï¼Œå±äºè¡Œé”ï¼Œè¿™å°†ä¼šå½±å“åˆ°å…¶ä»–æ“ä½œè¯¥æ•°æ®çš„äº‹åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½é‡é¿å…é•¿æ—¶é—´åœ°æŒæœ‰è¯¥é”ï¼Œå°½å¿«é‡Šæ”¾è¯¥é”ã€‚</p><p>åˆå› ä¸ºå…ˆæ–°å»ºè®¢å•å’Œå…ˆæ‰£é™¤åº“å­˜éƒ½ä¸ä¼šå½±å“ä¸šåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ‰£é™¤åº“å­˜æ“ä½œæ”¾åˆ°æœ€åï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æ‰§è¡Œé¡ºåº1ï¼Œä»¥æ­¤å°½é‡å‡å°é”çš„æŒæœ‰æ—¶é—´ã€‚</p><h2>æ€»ç»“</h2><p>å…¶å®MySQLçš„å¹¶å‘äº‹åŠ¡è°ƒä¼˜å’ŒJavaçš„å¤šçº¿ç¨‹ç¼–ç¨‹è°ƒä¼˜éå¸¸ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯ä»¥é€šè¿‡å‡å°é”ç²’åº¦å’Œå‡å°‘é”çš„æŒæœ‰æ—¶é—´è¿›è¡Œè°ƒä¼˜ã€‚<span class=\"orange\">åœ¨MySQLçš„å¹¶å‘äº‹åŠ¡è°ƒä¼˜ä¸­ï¼Œæˆ‘ä»¬å°½é‡åœ¨å¯ä»¥ä½¿ç”¨ä½äº‹åŠ¡éš”ç¦»çº§åˆ«çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œé¿å…ä½¿ç”¨é«˜äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚</span></p><p>åœ¨åŠŸèƒ½ä¸šåŠ¡å¼€å‘æ—¶ï¼Œå¼€å‘äººå‘˜å¾€å¾€ä¼šä¸ºäº†è¿½æ±‚å¼€å‘é€Ÿåº¦ï¼Œä¹ æƒ¯ä½¿ç”¨é»˜è®¤çš„å‚æ•°è®¾ç½®æ¥å®ç°ä¸šåŠ¡åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨serviceæ–¹æ³•ä¸­ï¼Œä½ å¯èƒ½ä¹ æƒ¯é»˜è®¤ä½¿ç”¨transactionï¼Œå¾ˆå°‘å†æ‰‹åŠ¨å˜æ›´äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚ä½†è¦çŸ¥é“ï¼Œtransactioné»˜è®¤æ˜¯RRäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œåœ¨æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå¯èƒ½å¹¶ä¸åˆé€‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦ç»“åˆå…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œè¿›è¡Œè€ƒè™‘ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä»¥ä¸Šæˆ‘ä»¬ä¸»è¦äº†è§£äº†é”å®ç°äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œä½ çŸ¥é“InnoDBæ˜¯å¦‚ä½•å®ç°åŸå­æ€§ã€ä¸€è‡´æ€§å’ŒæŒä¹…æ€§çš„å—ï¼Ÿ</p><p>æœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„è§è§£ã€‚ä¹Ÿæ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€è¯·ä»–ä¸€èµ·è®¨è®ºã€‚</p><p></p>","comments":[{"had_liked":false,"id":121976,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1565260958,"is_pvip":false,"replies":[{"id":"44861","content":"æ•°æ®åº“åŸºç¡€éå¸¸æ‰å®ï¼Œèµ","user_name":"ä½œè€…å›å¤","comment_id":121976,"uid":"1228576","ip_address":"","utype":1,"ctime":1565313359,"user_name_real":"åˆ˜è¶…"}],"discussion_count":3,"race_medal":0,"score":"306507938974","product_id":100028001,"comment_content":"binlog + redo log ä¸¤é˜¶æ®µæäº¤ä¿è¯æŒä¹…æ€§<br>äº‹åŠ¡çš„å›æ»šæœºåˆ¶ ä¿è¯åŸå­æ€§ è¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸ è¦ä¹ˆå›æ»š<br>undo log + MVCC ä¿è¯ä¸€è‡´æ€§ äº‹åŠ¡å¼€å§‹å’Œç»“æŸçš„è¿‡ç¨‹ä¸ä¼šå…¶å®ƒäº‹åŠ¡çœ‹åˆ° ä¸ºäº†å¹¶å‘å¯ä»¥é€‚å½“ç ´åä¸€è‡´æ€§","like_count":72,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462037,"discussion_content":"æ•°æ®åº“åŸºç¡€éå¸¸æ‰å®ï¼Œèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565313359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1539926,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIUBia0Aevb2CyMNPvuzTkVvlcoDpdFELFav5Bcic90wxehZibo0VglM7aRZLMo93Ful7v5TFlKfEYyg/132","nickname":"å•Šä¸å¤š","note":"","ucode":"A38DE3C564B748","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":184245,"discussion_content":"binlogä¸»è¦ç”¨äºå¤‡ä»½ æ¢å¤æ•°æ® redo logä¸»è¦é€‚ç”¨äºé‡å¯æ•°æ®åº“æ¢å¤æ•°æ® æ˜¯è¿™æ ·å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582550923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118374,"avatar":"https://static001.geekbang.org/account/avatar/00/11/10/a6/4d2c933e.jpg","nickname":"K","note":"","ucode":"69831D1EFC083C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4920,"discussion_content":"å“‡çœŸçš„å¥½æœŸå¾…è€å¸ˆè®²è§£ä¸€ä¸‹acidåˆ†åˆ«éƒ½æ˜¯æ€æ ·å®ç°çš„å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565832468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122008,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1565267471,"is_pvip":false,"replies":[{"id":"44858","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","comment_id":122008,"uid":"1228576","ip_address":"","utype":1,"ctime":1565313235,"user_name_real":"åˆ˜è¶…"}],"discussion_count":1,"race_medal":0,"score":"87464613391","product_id":100028001,"comment_content":"é»˜è®¤transactionç”¨çš„æ˜¯æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«ä¸æ˜¯ä¸€å®šæ˜¯RRï¼Œåªæ˜¯ç”¨MySQLé»˜è®¤æ˜¯RR","like_count":21,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462056,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565313235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124040,"user_name":"L.","can_delete":false,"product_type":"c1","uid":1181647,"ip_address":"","ucode":"46A2F679C094E8","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/cf/b0d6fe74.jpg","comment_is_top":false,"comment_ctime":1565795759,"is_pvip":false,"replies":[{"id":"45558","content":"ç²—ç•¥çœ‹å¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†ä»”ç»†çœ‹å°±èƒ½çœ‹å‡ºé—®é¢˜äº†ã€‚<br><br>äº‹åŠ¡Aå­˜åœ¨è¯»å’Œæ”¹ä¸¤ä¸ªæ“ä½œï¼Œäº‹åŠ¡Bä¹ŸåŒæ ·å­˜åœ¨è¯»å’Œæ”¹ä¸¤ä¸ªæ“ä½œã€‚äº‹åŠ¡Aåœ¨è¯»æ—¶ï¼Œç”±äºæ˜¯å…±äº«é”ï¼Œäº‹åŠ¡Bä¹Ÿèƒ½è¯»åˆ°è¯¥æ•°æ®ï¼Œå½“äº‹åŠ¡Aè¿›è¡Œä¿®æ”¹å°±éœ€è¦ä¸Šæ’ä»–é”äº†ï¼Œæ­¤æ—¶äº‹åŠ¡Bç”±äºå·²ç»å¯¹è¯¥æ•°æ®åŠ äº†å…±äº«é”ï¼Œäº‹åŠ¡Aéœ€è¦ç­‰å¾…äº‹åŠ¡Bé‡Šæ”¾å…±äº«é”æ‰èƒ½è·å–æ’ä»–é”æ¥ä¿®æ”¹æ•°æ®ã€‚åŒæ ·äº‹åŠ¡Bä¹Ÿåœ¨ç­‰å¾…äº‹åŠ¡Aé‡Šæ”¾å…±äº«é”ã€‚è¿™ç§æ“ä½œä¼šå¯¼è‡´æ­»é”çš„å‡ºç°ã€‚<br><br>æˆ‘ä»¬ä¸€èˆ¬ç”¨ä¸€ä¸ªè¯»çš„äº‹åŠ¡æ“ä½œå’Œä¸€ä¸ªè¯»å†™äº‹åŠ¡æ“ä½œæ¥ç†è§£RRäº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚","user_name":"ä½œè€…å›å¤","comment_id":124040,"uid":"1228576","ip_address":"","utype":1,"ctime":1565832904,"user_name_real":"åˆ˜è¶…"}],"discussion_count":7,"race_medal":0,"score":"44515468719","product_id":100028001,"comment_content":"è€å¸ˆï¼Œå¯¹äºå¯é‡å¤è¯»(Repeatable Read)çš„äº‹åŠ¡çº§åˆ«å¯ä»¥é¿å…ä¸å¯é‡å¤è¯»çš„ç°è±¡æœ‰ä¸ªç–‘é—®ï¼š<br>å¯¹äºäº‹åŠ¡Aæ¥è¯´ï¼Œå®ƒåœ¨è·å¾—å…±äº«é”æœŸé—´ä¿®æ”¹äº†æ•°æ®ï¼Œæ¯”å¦‚æŠŠAæ”¹ä¸ºBï¼Œä¿®æ”¹å®Œæˆåé‡Šæ”¾å…±äº«é”ã€‚åœ¨Aè·å¾—å…±äº«é”æœŸé—´ï¼Œäº‹åŠ¡Bçœ‹åˆ°çš„æ•°æ®æ˜¯Aï¼Œé‡Šæ”¾å…±äº«é”åï¼Œäº‹åŠ¡Bæ‰è·å¾—æ’ä»–é”ï¼Œç„¶åçœ‹åˆ°çš„æ•°æ®æ˜¯Bã€‚ä¸¤æ¬¡çš„æ•°æ®ä¸ä¸€æ ·å•Šï¼Œè¿˜æ˜¯æ²¡æœ‰é¿å…ä¸å¯é‡å¤è¯»ã€‚ã€‚ã€‚ã€‚ä¸çŸ¥é“æˆ‘ç†è§£çš„å“ªé‡Œä¸å¯¹ï¼Œæœ›è€å¸ˆæŒ‡ç‚¹ã€‚ã€‚ã€‚ğŸ™","like_count":11,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462976,"discussion_content":"ç²—ç•¥çœ‹å¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†ä»”ç»†çœ‹å°±èƒ½çœ‹å‡ºé—®é¢˜äº†ã€‚\n\näº‹åŠ¡Aå­˜åœ¨è¯»å’Œæ”¹ä¸¤ä¸ªæ“ä½œï¼Œäº‹åŠ¡Bä¹ŸåŒæ ·å­˜åœ¨è¯»å’Œæ”¹ä¸¤ä¸ªæ“ä½œã€‚äº‹åŠ¡Aåœ¨è¯»æ—¶ï¼Œç”±äºæ˜¯å…±äº«é”ï¼Œäº‹åŠ¡Bä¹Ÿèƒ½è¯»åˆ°è¯¥æ•°æ®ï¼Œå½“äº‹åŠ¡Aè¿›è¡Œä¿®æ”¹å°±éœ€è¦ä¸Šæ’ä»–é”äº†ï¼Œæ­¤æ—¶äº‹åŠ¡Bç”±äºå·²ç»å¯¹è¯¥æ•°æ®åŠ äº†å…±äº«é”ï¼Œäº‹åŠ¡Aéœ€è¦ç­‰å¾…äº‹åŠ¡Bé‡Šæ”¾å…±äº«é”æ‰èƒ½è·å–æ’ä»–é”æ¥ä¿®æ”¹æ•°æ®ã€‚åŒæ ·äº‹åŠ¡Bä¹Ÿåœ¨ç­‰å¾…äº‹åŠ¡Aé‡Šæ”¾å…±äº«é”ã€‚è¿™ç§æ“ä½œä¼šå¯¼è‡´æ­»é”çš„å‡ºç°ã€‚\n\næˆ‘ä»¬ä¸€èˆ¬ç”¨ä¸€ä¸ªè¯»çš„äº‹åŠ¡æ“ä½œå’Œä¸€ä¸ªè¯»å†™äº‹åŠ¡æ“ä½œæ¥ç†è§£RRäº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565832904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1926759,"avatar":"","nickname":"èµµç‰é—¯","note":"","ucode":"82E85AC08206EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284182,"discussion_content":"äº‹åŠ¡ä¸€è¯»å–ç¬¬ä¸€æ¬¡å¦‚æœé‡Šæ”¾å…±äº«é”ï¼Œé‚£äº‹åŠ¡äºŒå°±å¯ä»¥åŠ ä»»ä½•é”ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¿®æ”¹æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™äº‹åŠ¡ä¸€ç¬¬äºŒæ¬¡å»è¯»å–çš„çš„è¯å°±å‡ºç°ä¸ä¸€è‡´äº†ã€‚ä½†æ˜¯RRæ˜¯å½“äº‹åŠ¡ä¸€ç¬¬ä¸€æ¬¡è·å–å…±äº«é”è¯»å–æ—¶å€™å°±æ²¡é‡Šæ”¾å…±äº«æ‰€ï¼Œæ‰€ä»¥äº‹åŠ¡äºŒæ²¡æœ‰èƒ½åŠ›ç”¨æ’ä»–é”å»ä¿®æ”¹æ•°æ®ï¼Œä¹Ÿåªèƒ½è¯»è€Œå·²ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°ä¸ä¸€è‡´ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1592464790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1142335,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6e/3f/49e5079f.jpg","nickname":"æ¥ä¼½å±±äºº","note":"","ucode":"5859C06DAC790D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1926759,"avatar":"","nickname":"èµµç‰é—¯","note":"","ucode":"82E85AC08206EA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542098,"discussion_content":"åˆ†æçš„æœ‰é“ç† å¦‚æœæ˜¯åœ¨RRçº§åˆ«ä¸‹ äº‹åŠ¡Bè¯»å–åˆ°çš„æ•°æ®æ˜¯å’ŒAåˆšå¼€å§‹è¯»å–åˆ°çš„æ˜¯ä¸€æ ·çš„ å¦‚æœäº‹åŠ¡Aå·²ç»é‡Šæ”¾äº†é” é‚£ä¹ˆäº‹åŠ¡Bè¦è¿›è¡Œå˜æ›´æ“ä½œå°±ä¼šè¿›è¡ŒåŠ æ’ä»–é” å¦‚æœæ²¡æœ‰é‡Šæ”¾éœ€è¦è¿›è¡Œå˜æ›´å°±éœ€è¦ç­‰å¾…äº‹åŠ¡Aé‡Šæ”¾å…±äº«é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640666437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":284182,"ip_address":""},"score":542098,"extra":""}]},{"author":{"id":2118466,"avatar":"https://static001.geekbang.org/account/avatar/00/20/53/42/349db1a4.jpg","nickname":"æ–­åµ©","note":"","ucode":"0AC6A20E1F6414","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591101,"discussion_content":"å¦‚æœäº‹åŠ¡Aå’Œäº‹åŠ¡BåŒæ—¶åŠ å…±äº«é”ï¼Œæ— è®ºåœ¨å…±äº«é”ï¼ˆlock in share modeï¼‰æˆ–è€…æ’ä»–é”ï¼ˆfor updateï¼‰çš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯å½“å‰è¯»ï¼Œå½“å‰è¯»æ˜¯ä¸€å®šè¦è¯»åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¸å…·å¤‡å¯é‡å¤è¯»çš„è§„åˆ™ï¼Œå¯é‡å¤åº¦åªå­˜åœ¨äºå¿«ç…§è¯»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666278129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1971079,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/13/87/73a17c60.jpg","nickname":"ä¼¼æ›¾ç›¸è¯†","note":"","ucode":"DCBA5F6ABC7401","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266528,"discussion_content":"AåŠ äº†å…±äº«é”ä¸ºä»€ä¹ˆè¿˜èƒ½ä¿®æ”¹æ•°æ®?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589527330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118374,"avatar":"https://static001.geekbang.org/account/avatar/00/11/10/a6/4d2c933e.jpg","nickname":"K","note":"","ucode":"69831D1EFC083C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4919,"discussion_content":"è€å“¥ï¼Œæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼Œrrçº§åˆ«ä¸‹ï¼ŒaåŠ äº†äº‹åŠ¡è¯»å–ï¼Œå…¶å®bå°±è¯»ä¸åˆ°äº†ã€‚ç­‰åˆ°aç»“æŸäº†äº‹åŠ¡ï¼Œé€‚å½“å…±äº«é”ï¼Œbæ‰èƒ½è¯»åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565832380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1971079,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/13/87/73a17c60.jpg","nickname":"ä¼¼æ›¾ç›¸è¯†","note":"","ucode":"DCBA5F6ABC7401","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1118374,"avatar":"https://static001.geekbang.org/account/avatar/00/11/10/a6/4d2c933e.jpg","nickname":"K","note":"","ucode":"69831D1EFC083C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266530,"discussion_content":"AåŠ å…±äº«é”ï¼ŒBå¦‚æœä¹ŸåŠ å…±äº«é”æ˜¯å¯ä»¥è¯»åˆ°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589527433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4919,"ip_address":""},"score":266530,"extra":""}]}]},{"had_liked":false,"id":121738,"user_name":"å’Œä½ ä¸€èµ·æ¬ç –çš„èƒ¡å¤§çˆ·","can_delete":false,"product_type":"c1","uid":1008587,"ip_address":"","ucode":"54607F4E17917A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/cb/7c004188.jpg","comment_is_top":false,"comment_ctime":1565195127,"is_pvip":false,"replies":[{"id":"44871","content":"å¥½çš„ï¼Œåé¢å®‰æ’","user_name":"ä½œè€…å›å¤","comment_id":121738,"uid":"1228576","ip_address":"","utype":1,"ctime":1565314832,"user_name_real":"åˆ˜è¶…"}],"discussion_count":3,"race_medal":0,"score":"31629966199","product_id":100028001,"comment_content":"è€å¸ˆèƒ½å¦é‡ç‚¹è®²ä¸€ä¸‹record lockã€gap lock ä»¥åŠ next-key lockï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461925,"discussion_content":"å¥½çš„ï¼Œåé¢å®‰æ’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565314832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1442123,"avatar":"https://static001.geekbang.org/account/avatar/00/16/01/4b/196a7d8a.jpg","nickname":"èµ·ç‚¹","note":"","ucode":"A54A6D21383B23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300376,"discussion_content":"æ·±å…¥ç†è§£mysqlé‡Œçš„é”ï¼Œå¯å‚è€ƒæ–‡ç« https://mp.weixin.qq.com/s/OC6edjkxoL76tVB_BxgoIw\né‡Œé¢éƒ½åšäº†è¯¦å°½çš„è¯´æ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598068644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1210699,"avatar":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","nickname":"-W.LI-","note":"","ucode":"3556786538664F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4198,"discussion_content":"æ¨èä¹°ä¸å¥‡è€å¸ˆçš„mysqlè¯¾ç¨‹ã€‚é‡Œé¢è®²çš„å¾ˆè¯¦ç»†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565224647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143177,"user_name":"æœˆè¿·æ´¥æ¸¡","can_delete":false,"product_type":"c1","uid":1264111,"ip_address":"","ucode":"2B18B2FE3DAC3B","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/ef/02401473.jpg","comment_is_top":false,"comment_ctime":1571643140,"is_pvip":false,"replies":[{"id":"55867","content":"æ–‡ä¸­è§£é‡Šäº†æ€ä¹ˆå®ç°äº†æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œé‚£å°±æ˜¯é€šè¿‡é”æ¥å®ç°çš„ï¼ŒSpringçš„å°è£…åªæ˜¯ä½¿ç”¨äº† MySQLæä¾›çš„æ ‡å‡†æ¥å£ï¼Œåªè¦åœ¨è®¾ç½®transactionçš„æ—¶å€™è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚<br><br>å¦‚æœä¸æƒ³å½±å“ä¸åŒä¸šåŠ¡ç›¸äº’ä¹‹é—´çš„æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡æ‹†åº“å®ç°ã€‚","user_name":"ä½œè€…å›å¤","comment_id":143177,"uid":"1228576","ip_address":"","utype":1,"ctime":1572082842,"user_name_real":"åˆ˜è¶…"}],"discussion_count":4,"race_medal":0,"score":"23046479620","product_id":100028001,"comment_content":"ä¸€ä¸ªé—®é¢˜å›°æ‰°æˆ‘æŒºä¹…å¸Œæœ›è§£ç­”ï¼Œspringçš„äº‹åŠ¡éš”ç¦»å’Œdbçš„äº‹åŠ¡éš”ç¦»æœºåˆ¶æœ‰ä»€ä¹ˆå…³ç³»ï¼Œè¿™ä¹ˆé—®å§æ¯”å¦‚dbé‡Œé»˜è®¤æ˜¯RRçš„éš”ç¦»çº§åˆ«ï¼ˆé»˜è®¤ä¹Ÿè‚¯å®šä¼šæœ‰ä¸€ä¸ªéš”ç¦»çº§åˆ«ï¼‰ï¼Œæˆ‘springçš„äº‹åŠ¡é‡Œå°±ä¸ç”¨é…ç½®éš”ç¦»çº§åˆ«äº†ï¼Ÿå¦‚æœspringçš„äº‹åŠ¡é‡Œçš„ä»£ç å¹¶æ²¡æœ‰dbæ“ä½œæˆ‘ä¹Ÿèƒ½è®¾ç½®springçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Ÿ<br>å…¶æ¬¡å°±æ˜¯è®¾ç½®dbçº§åˆ«çš„äº‹åŠ¡éš”ç¦»çš„è¯ï¼Œé‚£å¦‚æœä¸šåŠ¡ä¸ä¸€æ ·çš„è¯æ˜¯ä¸æ˜¯ç†è®ºä¸Šå¯ä»¥æŠŠåº“æ‹†å¼€æ¥ï¼Ÿå› ä¸ºè‚¯å®šæœ‰ä¸€äº›åº“ç”¨åˆ°äº†ä¸éœ€è¦çš„æ›´é«˜éš”ç¦»çº§åˆ«å½±å“æ€§èƒ½ã€‚","like_count":6,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471409,"discussion_content":"æ–‡ä¸­è§£é‡Šäº†æ€ä¹ˆå®ç°äº†æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œé‚£å°±æ˜¯é€šè¿‡é”æ¥å®ç°çš„ï¼ŒSpringçš„å°è£…åªæ˜¯ä½¿ç”¨äº† MySQLæä¾›çš„æ ‡å‡†æ¥å£ï¼Œåªè¦åœ¨è®¾ç½®transactionçš„æ—¶å€™è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚\n\nå¦‚æœä¸æƒ³å½±å“ä¸åŒä¸šåŠ¡ç›¸äº’ä¹‹é—´çš„æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡æ‹†åº“å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572082842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3012772,"avatar":"","nickname":"å…®å­","note":"","ucode":"E94C83593E7FAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583265,"discussion_content":"è¿˜æœ‰äº‹åŠ¡ä¼ æ’­è¡Œä¸ºè®¾ç½®ï¼Œå¯ä»¥å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660009451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å®‰å¾½"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2019760,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d1/b0/f4e91c7b.jpg","nickname":"å´äº¦å‡¡","note":"","ucode":"A785AD9C98D657","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569846,"discussion_content":"å¯ä»¥ç†è§£æˆä¸€ä¸ªæ˜¯rråªæ˜¯é’ˆå¯¹qpsï¼Œè€Œspringçš„æ˜¯tpsï¼Œé’ˆå¯¹å¤šä¸ªqpsçš„ä¸€è‡´æ€§ä¿è¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651572963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306345,"discussion_content":"springçš„äº‹åŠ¡æ˜¯ä¾èµ–æ•°æ®åº“å®ç°çš„ï¼Œå®ƒåªæ˜¯ä¸€å±‚å°è£…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600250298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128779,"user_name":"å’¬å°–æœˆç‰™å„¿","can_delete":false,"product_type":"c1","uid":1325661,"ip_address":"","ucode":"A6223A6B713109","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/5d/c5dc789a.jpg","comment_is_top":false,"comment_ctime":1566961819,"is_pvip":false,"replies":[{"id":"50265","content":"å¯ä»¥é˜…è¯»ä¸€äº›åŸºç¡€å…¥é—¨çš„ä¹¦ç±ï¼Œä¹Ÿæ˜¯ä½œè€…å·²ç»æ¶ˆåŒ–æ¢³ç†è¿‡äº†çš„ï¼Œä¼šæ¯”è¾ƒé€šä¿—æ˜“æ‡‚ã€‚","user_name":"ä½œè€…å›å¤","comment_id":128779,"uid":"1228576","ip_address":"","utype":1,"ctime":1567829050,"user_name_real":"åˆ˜è¶…"}],"discussion_count":2,"race_medal":0,"score":"18746831003","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæ‚¨è¿™äº›æ•°æ®åº“çš„ç›¸å…³çŸ¥è¯†æ˜¯ä»å®˜ç½‘è¿˜æ˜¯æŸäº›ä¹¦ç±ä¸­è·å–çš„ï¼Ÿæˆ‘çš„æ•°æ®åº“è¿›é˜¶çš„çŸ¥è¯†æ¯”è¾ƒæµ…ï¼Œçœ‹å®˜ç½‘è§‰å¾—æœ‰ç‚¹è´¹åŠ²ï¼Œä¸çŸ¥é“ä»å“ªå…¥æ‰‹å»çœ‹å»å­¦","like_count":5,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465098,"discussion_content":"å¯ä»¥é˜…è¯»ä¸€äº›åŸºç¡€å…¥é—¨çš„ä¹¦ç±ï¼Œä¹Ÿæ˜¯ä½œè€…å·²ç»æ¶ˆåŒ–æ¢³ç†è¿‡äº†çš„ï¼Œä¼šæ¯”è¾ƒé€šä¿—æ˜“æ‡‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567829050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306347,"discussion_content":"å­¦ä¹ æ˜¯å¾ªåºæ¸è¿›çš„ï¼Œå®˜ç½‘æƒå¨ ç›´æ¥è¯»å¯èƒ½çœ‹ä¸æ‡‚ï¼Œä¸èƒ½è·¨çº§å­¦ä¹ ï¼Œæ…¢å³æ˜¯å¿«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600250774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191072,"user_name":".","can_delete":false,"product_type":"c1","uid":1083502,"ip_address":"","ucode":"83F583994F4F72","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/6e/3bd860d3.jpg","comment_is_top":false,"comment_ctime":1584724472,"is_pvip":true,"replies":[{"id":"74170","content":"æ¯ç¯‡éƒ½æœ‰è¯»åæ€»ç»“ï¼Œèµä¸€ä¸ª","user_name":"ä½œè€…å›å¤","comment_id":191072,"uid":"1228576","ip_address":"","utype":1,"ctime":1585136842,"user_name_real":"åˆ˜è¶…"}],"discussion_count":1,"race_medal":0,"score":"14469626360","product_id":100028001,"comment_content":"1. ç»“åˆä¸šåŠ¡åœºæ™¯ï¼Œä½¿ç”¨ä½çº§åˆ«äº‹åŠ¡éš”ç¦»<br>2. é¿å…è¡Œé”å‡çº§è¡¨é”<br>3. æ§åˆ¶äº‹åŠ¡çš„å¤§å°ï¼Œå‡å°‘é”å®šçš„èµ„æºé‡å’Œé”å®šæ—¶é—´é•¿åº¦","like_count":4,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488110,"discussion_content":"æ¯ç¯‡éƒ½æœ‰è¯»åæ€»ç»“ï¼Œèµä¸€ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585136842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170718,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1578673431,"is_pvip":false,"replies":[{"id":"67222","content":"è¿™é‡Œçš„ç´¢å¼•åœ¨updateä¹Ÿä¼šä½¿ç”¨åˆ°","user_name":"ä½œè€…å›å¤","comment_id":170718,"uid":"1228576","ip_address":"","utype":1,"ctime":1579524273,"user_name_real":"åˆ˜è¶…"}],"discussion_count":3,"race_medal":0,"score":"10168608023","product_id":100028001,"comment_content":"è€æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œå¸Œæœ›å¾—åˆ°è§£ç­”ï¼šInnoDBå¼•æ“ä¸‹ï¼Œselectè¯­å¥æ˜¯ä¸åŠ é”çš„å•Šï¼Œé‚£åœ¨æ–‡ç« ä¸­ é¿å…è¡Œé”å‡çº§è¡¨é”ä¸€èŠ‚ä¸­ï¼Œè®²åˆ° å¦‚æœä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œè¡Œé”å°†ä¼šå‡çº§åˆ°è¡¨é”ï¼Œåº”è¯¥ä¸æˆç«‹å•Šï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481082,"discussion_content":"è¿™é‡Œçš„ç´¢å¼•åœ¨updateä¹Ÿä¼šä½¿ç”¨åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579524273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306351,"discussion_content":"æ²¡æœ‰ç´¢å¼•ç›´æ¥åŠ çš„å°±æ˜¯è¡¨é”ï¼Œwhereå‘½ä¸­éƒ¨åˆ†å˜ä¸ºä¸»é”®è¡Œé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600251095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238961,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","nickname":"æ˜“æ°´å¯’","note":"","ucode":"F5D8127ED4754E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284000,"discussion_content":"è€å…„ï¼Œåªæœ‰æ˜¾ç¤ºåŠ é”å‘¢è¯»æ“ä½œï¼ˆsé”æˆ–xé”ï¼‰å’Œå†™æ“ä½œæ‰ä¼šæ¶‰åŠåˆ°é”ï¼Œæ™®é€šçš„è¯»æ“ä½œæ ¹æ®éš”ç¦»çº§åˆ«è¦ä¹ˆæ˜¯è¯»å¿«ç…§æ•°æ®ï¼ˆæ ¹æ®undo logï¼‰ï¼Œè¦ä¹ˆæ˜¯å½“å‰è¯»ï¼ˆæœ€æ–°çš„æ•°æ®ï¼Œæ¯”å¦‚è¯»æœªæäº¤éš”ç¦»çº§åˆ«ï¼‰ã€‚undo logä¸€èˆ¬ä¼šä¼´éšå†™æ“ä½œè€Œäº§ç”Ÿï¼Œæ›´æ–°å’Œåˆ é™¤æ“ä½œéƒ½æ˜¯å½“å‰è¯»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592410267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243354,"user_name":"èµ·ç‚¹","can_delete":false,"product_type":"c1","uid":1442123,"ip_address":"","ucode":"A54A6D21383B23","user_header":"https://static001.geekbang.org/account/avatar/00/16/01/4b/196a7d8a.jpg","comment_is_top":false,"comment_ctime":1598070700,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5893037996","product_id":100028001,"comment_content":"å¤šè°¢è€å¸ˆåˆ†äº«ï¼Œåˆå­¦åˆ°äº†å¾ˆå¤šçŸ¥è¯†ã€‚ä¸è¿‡æ–‡ä¸­çš„çŸ¥è¯†éœ€è¦å¾ˆå¤šåŸºç¡€çŸ¥è¯†çš„æ”¯æ’‘æ‰èƒ½ç†è§£ï¼ŒåŸºç¡€è–„å¼±çš„åŒå­¦éœ€è¦äº†è§£ä¸€äº›åŸºç¡€<br><br>æ•°æ®åº“ä¸ºä»€ä¹ˆè¦æœ‰äº‹åŠ¡ï¼Ÿ<br><br>ä¸ºäº†ä¿è¯æ•°æ®æœ€ç»ˆçš„ä¸€è‡´æ€§ã€‚<br><br><br>äº‹åŠ¡åŒ…æ‹¬å“ªå‡ ä¸ªç‰¹æ€§ï¼Ÿ<br><br>åŸå­æ€§ã€éš”ç¦»æ€§ã€ä¸€è‡´æ€§ã€æŒä¹…æ€§ã€‚<br><br><br>äº‹åŠ¡çš„å¹¶å‘å¼•èµ·äº†å“ªäº›é—®é¢˜ï¼Ÿ<br><br>äº‹åŠ¡å¹¶å‘ä¼šå¼•èµ·è„è¯»ã€é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ã€‚<br><br><br>æ€ä¹ˆè§£å†³äº‹åŠ¡å¹¶å‘å‡ºç°çš„é—®é¢˜ï¼Ÿ<br><br>è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè¯»æœªæäº¤ï¼Œè¯»æäº¤ï¼Œé‡å¤è¯»ï¼Œåºåˆ—åŒ–ã€‚<br><br><br>æ•°æ®åº“é€šè¿‡ä»€ä¹ˆæ–¹å¼ä¿è¯äº†äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Ÿ<br><br>é€šè¿‡åŠ é”æ¥å®ç°äº‹åŠ¡çš„éš”ç¦»æ€§ã€‚<br><br><br>é¢‘ç¹çš„åŠ é”ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ<br><br>å› ä¸ºé”çš„äº’æ–¥ç‰¹æ€§ï¼ŒåŠ é”çš„æ—¶å€™æˆ‘ä»¬è¯»æ•°æ®çš„æ—¶å€™æ²¡åŠæ³•å¯¹è¯¥æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚è€Œåœ¨ä¿®æ”¹æ•°æ®çš„æ—¶å€™ä¹Ÿæ²¡åŠæ³•è¯»å–æ•°æ®ï¼ŒåŠ é”çš„æœºåˆ¶ä¼šæå¤§çš„é™ä½äº†æ•°æ®åº“æ€§èƒ½ã€‚<br><br><br>æ•°æ®åº“æ˜¯å¦‚ä½•è§£å†³åŠ é”åçš„æ€§èƒ½é—®é¢˜çš„ï¼Ÿ<br><br>MVCC å¤šç‰ˆæœ¬æ§åˆ¶å®ç°è¯»å–æ•°æ®ä¸ç”¨åŠ é”ï¼Œ å¯ä»¥è®©è¯»å–æ•°æ®åŒæ—¶ä¿®æ”¹ã€‚ä¿®æ”¹æ•°æ®æ—¶åŒæ—¶å¯è¯»å–ã€‚<br><br><br><br>mvccåŸç†å‚è€ƒ<br>https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;NTqNhlXPaOyPAlmSNY2PzQ<br><br>é”åŸç†å‚è€ƒ<br>https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;OC6edjkxoL76tVB_BxgoIw","like_count":2},{"had_liked":false,"id":138327,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1570165244,"is_pvip":false,"replies":[{"id":"53307","content":"äº‹åŠ¡Bè¯»å–æ•°æ®åŠ äº†å…±äº«é”ï¼Œä¿®æ”¹æ•°æ®æ—¶åŠ äº†æ’å®ƒé”","user_name":"ä½œè€…å›å¤","comment_id":138327,"uid":"1228576","ip_address":"","utype":1,"ctime":1570345979,"user_name_real":"åˆ˜è¶…"}],"discussion_count":2,"race_medal":0,"score":"5865132540","product_id":100028001,"comment_content":"æœªæäº¤è¯»ï¼ˆRead Uncommittedï¼‰ï¼šåœ¨äº‹åŠ¡ A è¯»å–æ•°æ®æ—¶ï¼Œäº‹åŠ¡ B è¯»å–å’Œä¿®æ”¹æ•°æ®åŠ äº†å…±äº«é”ã€‚è¿™ç§éš”ç¦»çº§åˆ«ï¼Œä¼šå¯¼è‡´è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»ã€‚<br><br>è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿäº‹åŠ¡Bè¯»å–å’Œä¿®æ”¹æ•°æ®åŠ äº†å…±äº«é”ï¼Ÿä¿®æ”¹æ•°æ®ä¸æ˜¯åªèƒ½åŠ æ’å®ƒé”ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469487,"discussion_content":"äº‹åŠ¡Bè¯»å–æ•°æ®åŠ äº†å…±äº«é”ï¼Œä¿®æ”¹æ•°æ®æ—¶åŠ äº†æ’å®ƒé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570345979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238961,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","nickname":"æ˜“æ°´å¯’","note":"","ucode":"F5D8127ED4754E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284001,"discussion_content":"æœªæäº¤è¯»ï¼Œè¯»æ“ä½œæ— è®ºæ˜¯å¦åŠ é”ï¼Œéƒ½æ˜¯è¯»å½“å‰æœ€æ–°çš„æ•°æ®ï¼ŒåŠ é”è‚¯å®šæ˜¯è¯»æœ€æ–°çš„ï¼Œåªä¸è¿‡å¯èƒ½ä¼šå’Œå…¶ä»–äº‹åŠ¡åŠ çš„é”äº§ç”Ÿå†²çªï¼Œå†²çªçš„æƒ…å†µä¸‹ä¼šé˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592410550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129072,"user_name":"åŠ è½½ä¸­â€¦â€¦","can_delete":false,"product_type":"c1","uid":1366948,"ip_address":"","ucode":"3E59A0A0784D0A","user_header":"https://static001.geekbang.org/account/avatar/00/14/db/a4/191be6ad.jpg","comment_is_top":false,"comment_ctime":1567039114,"is_pvip":false,"replies":[{"id":"50384","content":"è¿™æ˜¯RRä¸‹ä½¿ç”¨çš„é—´éš™é”ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°å¹»è¯»","user_name":"ä½œè€…å›å¤","comment_id":129072,"uid":"1228576","ip_address":"","utype":1,"ctime":1567944881,"user_name_real":"åˆ˜è¶…"}],"discussion_count":7,"race_medal":0,"score":"5862006410","product_id":100028001,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸‹ã€‚æ–‡ç« ä¸­è¯´ï¼šâ€œå¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰å¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œä½†ä¾ç„¶å­˜åœ¨å¹»è¯»çš„é—®é¢˜ã€‚â€<br>æˆ‘ä¹‹å‰äº†è§£çš„æ˜¯ï¼ŒSQLæ ‡å‡†ä¸è¦æ±‚RRè§£å†³å¹»è¯»ï¼Œä½†InnoDBçš„ RRä¸‹ æ˜¯ä¸ä¼šäº§ç”Ÿå¹»è¯»çš„ã€‚<br>è€Œä¸”è‡ªå·±å®éªŒä¹Ÿæ˜¯InnoDBåœ¨RRä¸‹æ²¡æœ‰å¹»è¯»çš„ç°è±¡ã€‚æ“ä½œå¦‚ä¸‹ï¼š<br>sessionA: begin;<br>sessionA: select * from t where id&gt;1;(2æ¡è®°å½•)<br>sessionB: insert into t(id,a) values(5,5);<br>sessionA: select * from t where id&gt;1;(è¿˜æ˜¯2æ¡çœ‹ä¸åˆ°5,5ã€‚æ²¡æœ‰äº§ç”Ÿå¹»è¯»)","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465260,"discussion_content":"è¿™æ˜¯RRä¸‹ä½¿ç”¨çš„é—´éš™é”ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°å¹»è¯»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567944881,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1570138,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/j5clGGhnC727qj0UDKFBmUMtXljvQvkuUmqia1xJGsiaCJOZqbQ7Agv0bicq2hATmRaOfAnltjEgXsy8QMWVrcjeg/132","nickname":"Geek_178867","note":"","ucode":"1201C559DF6DA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394369,"discussion_content":"ä½ selectçš„æ—¶å€™åé¢åŠ ä¸ªfor updateå°±èƒ½çœ‹åˆ°3æ¡æ•°æ®äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631858852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238961,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","nickname":"æ˜“æ°´å¯’","note":"","ucode":"F5D8127ED4754E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284015,"discussion_content":"ä¼šè¯Aä¸èƒ½è¯»åˆ°ä¼šè¯Bæ’å…¥çš„æ•°æ®ä¸æ˜¯å› ä¸ºé”ï¼Œè€Œæ˜¯å› ä¸ºmvccæœºåˆ¶ï¼ŒBä¸­æ•°æ®å¯¹Aä¸å¯è§ï¼Œæ¥¼ä¸»å¯ä»¥å»äº†è§£ä¸‹å¿«ç…§è¯»çš„å«ä¹‰åŠå®ç°åŸç†ã€‚å¦‚æœAæ˜¯åŠ äº†å…±äº«é”çš„è¯»æ“ä½œï¼Œé‚£ä¹ˆBä¼šè¢«é˜»å¡ï¼Œå› ä¸ºAä¸­ä¼šåŠ ï¼ˆ1ï¼Œâˆï¼‰çš„é—´éš™é”ï¼Œä¹Ÿå°±æ˜¯gap lockï¼Œæˆ‘è§‰å¾—æ˜¯å¦‚æ­¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592412873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1348830,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/SM4fwn9uFicXU8cQ1rNF2LQdKNbZI1FX1jmdwaE2MTrBawbugj4TQKjMKWG0sGbmqQickyARXZFS8NZtobvoWTHA/132","nickname":"td901105","note":"","ucode":"32D42A4F36FA02","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270791,"discussion_content":"æ˜¯å› ä¸ºselectè¯»å–çš„æ˜¯é•œåƒå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590055057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024486,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","nickname":"æ—­ä¸œ(Frank)","note":"","ucode":"176FA629800062","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8381,"discussion_content":"å¹»è¯»å’Œé‡å¤è¯»çš„æ¦‚å¿µä¸æ¸…æ¥š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567984380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024486,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","nickname":"æ—­ä¸œ(Frank)","note":"","ucode":"176FA629800062","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7820,"discussion_content":"session Bæäº¤äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567683763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1366948,"avatar":"https://static001.geekbang.org/account/avatar/00/14/db/a4/191be6ad.jpg","nickname":"åŠ è½½ä¸­â€¦â€¦","note":"","ucode":"3E59A0A0784D0A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1024486,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","nickname":"æ—­ä¸œ(Frank)","note":"","ucode":"176FA629800062","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7822,"discussion_content":"å°±ä¸€æ¡è¯­å¥ï¼Œç›¸å½“äº mysqlå†…éƒ¨ä¼šå¼€å¯æäº¤äº‹åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567684588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7820,"ip_address":""},"score":7822,"extra":""}]}]},{"had_liked":false,"id":127010,"user_name":"å°å¸ƒä¸","can_delete":false,"product_type":"c1","uid":1253022,"ip_address":"","ucode":"A9907715455F58","user_header":"https://static001.geekbang.org/account/avatar/00/13/1e/9e/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1566534581,"is_pvip":false,"replies":[{"id":"47068","content":"ä¸¤è€…å®é™…ä¸Šæ˜¯ä¸€å›äº‹ï¼ŒSpringçš„äº‹åŠ¡ä¹Ÿæ˜¯åŸºäºæ•°æ®åº“äº‹åŠ¡å°è£…çš„æ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","comment_id":127010,"uid":"1228576","ip_address":"","utype":1,"ctime":1566610632,"user_name_real":"åˆ˜è¶…"}],"discussion_count":2,"race_medal":0,"score":"5861501877","product_id":100028001,"comment_content":"è€å¸ˆæ•°æ®åº“çš„äº‹åŠ¡å’ŒSpringçš„äº‹åŠ¡æ˜¯ä¸€å›äº‹å—ï¼Ÿå†™ä¸šåŠ¡ä»£ç çš„æ—¶å€™ï¼Œä¸¤ç§ä¸åŒçš„äº‹åŠ¡åˆ†åˆ«èµ·ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿæˆ–è€…è¯´æ§åˆ¶èŒƒå›´æœ‰ä½•ä¸åŒå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464281,"discussion_content":"ä¸¤è€…å®é™…ä¸Šæ˜¯ä¸€å›äº‹ï¼ŒSpringçš„äº‹åŠ¡ä¹Ÿæ˜¯åŸºäºæ•°æ®åº“äº‹åŠ¡å°è£…çš„æ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566610632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1926759,"avatar":"","nickname":"èµµç‰é—¯","note":"","ucode":"82E85AC08206EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284183,"discussion_content":"é‚£å¦‚æœæ•°æ®åº“è®¾ç½®çš„çº§åˆ«å’ŒSpringä¸ä¸€æ ·ï¼Œä¼šå‡ºé”™è¿˜æ˜¯ä¼˜å…ˆç”¨è°çš„ï¼Ÿï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592464945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121799,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1565225659,"is_pvip":false,"replies":[{"id":"53404","content":"æ˜¯çš„ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡æ¥é€‰æ‹©éš”ç¦»çº§åˆ«","user_name":"ä½œè€…å›å¤","comment_id":121799,"uid":"1228576","ip_address":"","utype":1,"ctime":1570434115,"user_name_real":"åˆ˜è¶…"}],"discussion_count":1,"race_medal":0,"score":"5860192955","product_id":100028001,"comment_content":"è€å¸ˆå¥½!ä¹‹å‰å¬è¯´ä¸å°‘äº’è”ç½‘å…¬å¸ï¼ŒæŠŠmysqlæ•°æ®åº“é»˜è®¤éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºè¯»å·²æäº¤(ä¸æ‰‹åŠ¨è®¾é»˜è®¤æ˜¯RR)ï¼Œæ¥æé«˜ååé‡ã€‚è¿™æ ·å°±éœ€è¦å¼€å‘äººå‘˜æ ¹æ®ä¸šåŠ¡é€‰æ‹©åˆé€‚çš„éš”ç¦»çº§åˆ«æ˜¯ä¹ˆ?<br>æ¥ç€è€å¸ˆå‡åº“å­˜çš„ä¾‹å­:<br>æ–°å»ºè®¢å•,å‡åº“å­˜æ“ä½œå¯ä»¥åœ¨ï¼Œè¯»å·²æäº¤éš”ç¦»çº§åˆ«ä¸‹æ‰§è¡Œä¹ˆ?<br>æˆ‘è§‰å¾—æ–°å»ºè®¢å•å’Œå‡åº“å­˜åªè¦ä¿è¯åŸå­è¡Œå°±å¥½äº†ã€‚å‡åº“å­˜æ˜¯è¯»å½“å‰æ“ä½œï¼Œè¿˜æ˜¯éœ€è¦åœ¨RRä¸‹ã€‚","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461952,"discussion_content":"æ˜¯çš„ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡æ¥é€‰æ‹©éš”ç¦»çº§åˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570434115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328974,"user_name":"çš®å¡å¡","can_delete":false,"product_type":"c1","uid":2715554,"ip_address":"","ucode":"52B3F234550E7F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBHy0D2KUZwOGHRG8qloicx2V4E4mImsPIiavPfr12BZB6QyUlHNdmOohC3EbsgnM2QNBeoqu82Grw/132","comment_is_top":false,"comment_ctime":1640966326,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1640966326","product_id":100028001,"comment_content":"è·Ÿç€ä¸²ä¸‹æ¥ï¼Œå¯¹é”ã€äº‹åŠ¡ç†è§£äº†å¾ˆå¤šï¼Œæ„Ÿè°¢","like_count":0},{"had_liked":false,"id":301188,"user_name":"åŠ¨ç‰©ä¸å›°","can_delete":false,"product_type":"c1","uid":1272259,"ip_address":"","ucode":"E0E4A31757936A","user_header":"https://static001.geekbang.org/account/avatar/00/13/69/c3/9bf5016f.jpg","comment_is_top":false,"comment_ctime":1625568409,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1625568409","product_id":100028001,"comment_content":"çœ‹åˆ°è€å¸ˆè¯´<br>&quot;æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œæ˜¯é€šè¿‡é”æ¥å®ç°çš„&quot;<br>&quot;InnoDBä¸­RCå’ŒRRéš”ç¦»äº‹åŠ¡æ˜¯åŸºäºå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶(MVCC)å®ç°é«˜æ€§èƒ½äº‹åŠ¡&quot;<br><br>è¿™é‡Œä¸ç†è§£äº†ï¼Œåˆ°åº•æ˜¯é”å®ç°çš„ï¼Œè¿˜æ˜¯MVCC å®ç°çš„ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":2215928,"avatar":"https://static001.geekbang.org/account/avatar/00/21/cf/f8/86076de4.jpg","nickname":"å®å½¬","note":"","ucode":"8EFDD45EA62342","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387910,"discussion_content":"æ˜¯é…åˆä½¿ç”¨çš„ï¼Œå½“ä½¿å¿«ç…§è¯»çš„æ—¶å€™ï¼Œç”¨åˆ°mvccï¼›å½“ä½¿ç”¨å½“å‰è¯»ï¼Œå°±æœ‰é”çš„å‚ä¸äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628495300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291368,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1620230013,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620230013","product_id":100028001,"comment_content":"åŸæ–‡ï¼š<br>è¡Œé”æ˜¯é€šè¿‡ç´¢å¼•å®ç°çš„ï¼Œå¦‚æœä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œé‚£ä¹ˆ InnoDB å°†å¯¹è¡¨ä¸­æ‰€æœ‰çš„è®°å½•è¿›è¡ŒåŠ é”ï¼Œå…¶å®å°±æ˜¯å‡çº§ä¸ºè¡¨é”äº†ã€‚<br><br>ä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œæ€ä¹ˆç†è§£ï¼Ÿwhere æ¡ä»¶ä¸­æ— ç´¢å¼•å­—æ®µï¼Ÿ","like_count":0},{"had_liked":false,"id":287219,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1617844912,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1617844912","product_id":100028001,"comment_content":"è€å¸ˆï¼Œè¯»å·²æäº¤å’Œå¯é‡å¤è¯»éš”ç¦»çº§åˆ«åº”ç”¨åœºæ™¯ï¼Œè¯»å®Œè¿˜æ˜¯ä¸å¤ªæ¸…æ¥šï¼Œå¯å¦å†è¯´è¯´å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":275786,"user_name":"å“¦","can_delete":false,"product_type":"c1","uid":1444469,"ip_address":"","ucode":"A634888525305B","user_header":"https://static001.geekbang.org/account/avatar/00/16/0a/75/24764b3f.jpg","comment_is_top":false,"comment_ctime":1611667043,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611667043","product_id":100028001,"comment_content":"æˆ‘è§‰å¾—è®²çš„æœ‰é—®é¢˜å‘€ï¼Œåœ¨RRçº§åˆ«ä¸­ï¼Œäº‹åŠ¡Aéƒ½ä¿®æ”¹æ•°æ®äº†ï¼Œæ€ä¹ˆè¿˜åŠ å…±äº«é”ï¼Œè€Œä¸”åœ¨RRçº§åˆ«ä¸­åŠ next-key lockingæ˜¯èƒ½è§£å†³å¹»è¯»é—®é¢˜çš„ï¼Œå› ä¸ºnext-key lockingå°†æŸ¥è¯¢çš„èŒƒå›´éƒ½åŠ äº†Xé”ï¼Œå…¶ä»–äº‹åŠ¡è¦æ’å…¥å¿…é¡»ç­‰å¾…é”é‡Šæ”¾ï¼Œå³äº‹åŠ¡Aå®Œæˆï¼Œé‚£ä¹ˆäº‹åŠ¡Aä¸­ä¸¤æ¬¡ç›¸åŒæŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€è‡´çš„","like_count":0},{"had_liked":false,"id":243726,"user_name":"èµ·ç‚¹","can_delete":false,"product_type":"c1","uid":1442123,"ip_address":"","ucode":"A54A6D21383B23","user_header":"https://static001.geekbang.org/account/avatar/00/16/01/4b/196a7d8a.jpg","comment_is_top":false,"comment_ctime":1598258177,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1598258177","product_id":100028001,"comment_content":"    1.æ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¸€è‡´æ€§è¦æ±‚ä¸é«˜ï¼Œæˆ–è€…ä¸ä¼šå­˜åœ¨å¹¶å‘é—®é¢˜çš„çš„åœºæ™¯é™ä½äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚<br>    2.å°½é‡è®©æ¡ä»¶å‘½ä¸­ç´¢å¼•ï¼Œåªæœ‰åœ¨ä½¿ç”¨ç´¢å¼•çš„æ—¶å€™æ‰èƒ½ä½¿ç”¨åˆ°è¡Œé”ï¼Œå¦åˆ™éƒ½æ˜¯è¡¨é”ã€‚<br>    3.æ§åˆ¶äº‹åŠ¡çš„ç²’åº¦ï¼Œä»£ç ä¸­è¦é¿å…æ²¡æœ‰å¼ºå…³è”çš„ä¸šåŠ¡å†™åˆ°ä¸€ä¸ªäº‹åŠ¡é‡Œã€‚äº‹åŠ¡ç²’åº¦å¤§ä¸ä»…ä¼šå½±å“æ€§èƒ½è€Œä¸”è¿˜å®¹æ˜“å¯¼è‡´æ­»é”ã€‚<br>    4.æŒä¹…æ€§å’ŒåŸå­æ€§æ˜¯åŸºäºredologå’Œundologå®ç°çš„ï¼Œundologèƒ½ä¿è¯äº‹åŠ¡ä¸­æ–­åçš„æ•°æ®å›æ»šå·¥ä½œï¼Œredologä¿è¯æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼ˆå°±ç®—æ•°æ®åº“å®•æœºï¼‰åªè¦äº‹åŠ¡commitäº†å°±èƒ½ä¿è¯æ‰€æœ‰çš„æ“ä½œéƒ½èƒ½å†™å…¥ç£ç›˜ã€‚<br>","like_count":0,"discussions":[{"author":{"id":2532285,"avatar":"","nickname":"Geek_926921","note":"","ucode":"51C3B0178D77E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382454,"discussion_content":"å¤§ä½¬ï¼Œæ•°æ®çš„å›æ»šåˆ°åº•æ˜¯undo log è¿˜æ˜¯binLog å‘€ï¼Œåœ¨åˆ«çš„åœ°æ–¹çœ‹åˆ°äº‹åŠ¡çš„å›æ»šæ˜¯ç”±binlogæ¥å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625578704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242089,"user_name":"åœ¨ä¸‹èŸ‘è‚ç‹","can_delete":false,"product_type":"c1","uid":2060756,"ip_address":"","ucode":"E66A65A327095A","user_header":"","comment_is_top":false,"comment_ctime":1597587711,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597587711","product_id":100028001,"comment_content":"åœ¨çœ‹å¦ä¸€ä¸ªè€å¸ˆçš„æ—¶å€™çœ‹åˆ°æœ‰ç‚¹çŸ›ç›¾çš„åœ°æ–¹å•Šã€‚æ¯”å¦‚å¯é‡å¤è¯»å®ç°ä¸æ˜¯é€šè¿‡é”ï¼Œæ˜¯é€šè¿‡æå‰æŠŠè¦æŸ¥çš„æ•°æ®ä½œæˆè§†å›¾æ¥å®ç°çš„ã€‚ã€‚ã€‚è™½ç„¶æ–‡ä¸­çš„xé”sé”ç¡®å®ä¹Ÿèƒ½å®ç°ã€‚","like_count":1},{"had_liked":false,"id":227414,"user_name":"è€¿å˜‰è‰º","can_delete":false,"product_type":"c1","uid":2023401,"ip_address":"","ucode":"727A22BD41E8AF","user_header":"","comment_is_top":false,"comment_ctime":1592375817,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1592375817","product_id":100028001,"comment_content":"æœªæäº¤è¯»ï¼ˆRead Uncommittedï¼‰çš„éš”ç¦»çº§åˆ«ä¸‹ï¼Œç”±äºmvccçš„å­˜åœ¨ï¼Œä¸åº”è¯¥ä¹Ÿèƒ½é˜²æ­¢è„è¯»å—ï¼Ÿè¿˜æ˜¯è¯´åªæœ‰è¯»å–æ“ä½œï¼Œå‘ç°è®°å½•è¢«åŠ é”çš„æ—¶å€™ï¼Œæ‰ä¼šä½¿ç”¨mvcc","like_count":0,"discussions":[{"author":{"id":1238961,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","nickname":"æ˜“æ°´å¯’","note":"","ucode":"F5D8127ED4754E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284002,"discussion_content":"è¯»å·²æäº¤éš”ç¦»çº§åˆ«åŠæ›´å¥½çš„éš”ç¦»çº§åˆ«mvccæ‰ä¼šæœ‰æ•ˆï¼Œæœªæäº¤è¯»å’Œmvccæ²¡ä»»ä½•å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592410705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197367,"user_name":"äº‘å°","can_delete":false,"product_type":"c1","uid":1542521,"ip_address":"","ucode":"51C2F84EEA1944","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/aobibE2ABHn3njdaHBY23hcZcIs71aRahryuUDcLghQqTjmwghEIgKYelBERlNK881MP0oRpWGnrQdscD85dZ9g/132","comment_is_top":false,"comment_ctime":1585371906,"is_pvip":false,"replies":[{"id":"75254","content":"åé¢è¿™é‡Œçš„select æ˜¯ select ... for update","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1585743961,"ip_address":"","comment_id":197367,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585371906","product_id":100028001,"comment_content":"è€å¸ˆï¼Œä¸Šé¢ä¸æ˜¯è¯´æ™®é€šçš„selectä¸åŠ é”å˜›ï¼Œä¸ºå•¥åé¢åˆè¯´ï¼Œåœ¨selectä¸‹ï¼Œé™¤äº†åŸºäºå”¯ä¸€ç´¢å¼•å¤–ï¼Œå…¶ä»–çš„ç´¢å¼•æŸ¥è¯¢éƒ½ä¼šè·å–gap lockä»¥åŠnext-key lock","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489507,"discussion_content":"åé¢è¿™é‡Œçš„select æ˜¯ select ... for update","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585743961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194476,"user_name":"OneThin","can_delete":false,"product_type":"c1","uid":1050458,"ip_address":"","ucode":"506989C201402F","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/5a/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1585061657,"is_pvip":false,"replies":[{"id":"74160","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1585135369,"ip_address":"","comment_id":194476,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585061657","product_id":100028001,"comment_content":"æœ€åä¸€ä¸ªä¾‹å­ï¼Œæœ‰ä¸ªç–‘é—®ï¼Œå› ä¸ºè¦åˆ¤æ–­åº“å­˜ï¼Œè¿™é‡Œæ˜¯ä¸æ˜¯åº”è¯¥ç”¨å¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«ï¼Œæ‰€ä»¥è¯»å–åº“å­˜çš„æ—¶å€™å·²ç»åŠ é”äº†ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸï¼Œé‚£ä¹ˆé”å¯¹å•Šæ—¶é—´åº”è¯¥å·®ä¸å¤šæ‰å¯¹å•Š","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488828,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585135369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182259,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1582738242,"is_pvip":false,"replies":[{"id":"71178","content":"å…±äº«é”æ’ä»–é”æ˜¯å®ç°äº‹åŠ¡çš„ä¸¤ä¸ªé”ï¼Œè€Œè¡Œé”æ˜¯ä¿è¯å¹¶å‘æƒ…å†µä¸‹çš„æ•°æ®å®Œæ•´æ€§ï¼Œå…±äº«é”å’Œæ’ä»–é”çš„å®ç°åŸç†ä¸è¡Œé”ä¸ä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1583156841,"ip_address":"","comment_id":182259,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582738242","product_id":100028001,"comment_content":"è€å¸ˆï¼Œå…±äº«é”æ’ä»–é”å’Œè¡Œé”çš„ä¸‰ç§å®ç°ç®—æ³•æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485275,"discussion_content":"å…±äº«é”æ’ä»–é”æ˜¯å®ç°äº‹åŠ¡çš„ä¸¤ä¸ªé”ï¼Œè€Œè¡Œé”æ˜¯ä¿è¯å¹¶å‘æƒ…å†µä¸‹çš„æ•°æ®å®Œæ•´æ€§ï¼Œå…±äº«é”å’Œæ’ä»–é”çš„å®ç°åŸç†ä¸è¡Œé”ä¸ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583156841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170715,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1578672534,"is_pvip":false,"replies":[{"id":"67220","content":"å¯ä»¥è®¾ç½®å…¨å±€ï¼Œä¹Ÿå¯ä»¥å¯¹å½“å‰sessionè®¾ç½®ï¼Œä¸èƒ½å¯¹å•ä¸ªè¡¨è¿›è¡Œè®¾ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1579523763,"ip_address":"","comment_id":170715,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578672534","product_id":100028001,"comment_content":"åœ¨ç»“åˆä¸šåŠ¡åœºæ™¯ï¼Œä½¿ç”¨ä½çº§åˆ«äº‹åŠ¡éš”ç¦»ä¸­ï¼Œæ‰€ä¸¾çš„ç”¨æˆ·ã€ç§¯åˆ†çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼Œä½†æ˜¯éš”ç¦»çº§åˆ«ä¸èƒ½å•ç‹¬ç»™è¡¨è®¾ç½®å§ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481080,"discussion_content":"å¯ä»¥è®¾ç½®å…¨å±€ï¼Œä¹Ÿå¯ä»¥å¯¹å½“å‰sessionè®¾ç½®ï¼Œä¸èƒ½å¯¹å•ä¸ªè¡¨è¿›è¡Œè®¾ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579523763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163887,"user_name":"ç«é”…å°ç‹å­","can_delete":false,"product_type":"c1","uid":1053262,"ip_address":"","ucode":"7D1BF39C437A99","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/4e/ff0702fc.jpg","comment_is_top":false,"comment_ctime":1576818938,"is_pvip":false,"replies":[{"id":"62979","content":"å…ˆé€šè¿‡SELECT @@tx_isolation;æŸ¥è¯¢ä¸‹æ•°æ®åº“çš„éš”ç¦»çº§åˆ«æ˜¯å¦ä¸ºREPEATABLE-READï¼Œç„¶åå†æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š<br>1ã€åˆ†è¡¨å¼€å¯Aã€Bä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Œå¹¶åœ¨ä¸¤ä¸ªå®¢æˆ·ç«¯å¼€å¯äº‹åŠ¡ï¼š<br>mysql&gt; start transaction;<br><br>2ã€å¹¶åœ¨ä¸¤ä¸ªå®¢æˆ·ç«¯æ‰§è¡Œä»¥ä¸‹sqlï¼š<br>mysql&gt; select * from `order` where id=1ï¼›<br><br>3ã€åœ¨Bå®¢æˆ·ç«¯æ‰§è¡Œä»¥ä¸‹sql,ä½†ä¸æäº¤äº‹åŠ¡<br>mysql&gt; update `order` set status = 2 where id =1;<br><br>4ã€æ­¤æ—¶åœ¨Aå®¢æˆ·ç«¯æŸ¥è¯¢è¯¥å€¼ï¼Œæ­¤æ—¶ä½ ä¼šå‘ç°å€¼æ²¡æœ‰å˜<br>mysql&gt; select * from `order` where id = 1;<br><br>5ã€æäº¤äº‹åŠ¡å®¢æˆ·ç«¯Bçš„äº‹åŠ¡ï¼Œå†æ¬¡æŸ¥è¯¢Aä¸­çš„å€¼ï¼Œæ­¤æ—¶ä½ ä¼šå‘ç°ä»ç„¶æ²¡æœ‰å˜<br>mysql&gt;commitï¼›<br>mysql&gt; select * from `order` where id = 1;<br><br>6ã€æäº¤å®¢æˆ·ç«¯Aä¸­çš„äº‹åŠ¡ï¼Œå†æ¬¡æŸ¥è¯¢Aï¼ŒBçš„å€¼ï¼Œæ­¤æ—¶å‘ç”Ÿäº†å˜æ›´<br>mysql&gt;commitï¼›<br>mysql&gt; select * from `order` where id = 1;<br>mysql&gt; select * from `order` where id = 1;<br><br>å¯ä»¥æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ç†è§£ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1577188832,"ip_address":"","comment_id":163887,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1576818938","product_id":100028001,"comment_content":"æ‚¨å¥½ å¯¹äºå¯é‡å¤è¯»çš„æè¿°ï¼šäº‹åŠ¡ A åœ¨è¯»å–æ•°æ®æ—¶ï¼Œäº‹åŠ¡ B åªèƒ½è¯»å–æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹ã€‚å½“äº‹åŠ¡ A è¯»å–åˆ°æ•°æ®åï¼Œäº‹åŠ¡ B æ‰èƒ½ä¿®æ”¹ã€‚ ç»è¯•éªŒ  äº‹åŠ¡Aåœ¨è¯»å–ä½†æ˜¯äº‹åŠ¡å¹¶æœªç»“æŸçš„æ—¶å€™  äº‹åŠ¡Bæ˜¯å¯ä»¥ä¿®æ”¹æ•°æ®å¹¶æäº¤çš„  ä¸çŸ¥é“æ˜¯æˆ‘å“ªé‡Œç†è§£æœ‰é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478570,"discussion_content":"å…ˆé€šè¿‡SELECT @@tx_isolation;æŸ¥è¯¢ä¸‹æ•°æ®åº“çš„éš”ç¦»çº§åˆ«æ˜¯å¦ä¸ºREPEATABLE-READï¼Œç„¶åå†æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š\n1ã€åˆ†è¡¨å¼€å¯Aã€Bä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Œå¹¶åœ¨ä¸¤ä¸ªå®¢æˆ·ç«¯å¼€å¯äº‹åŠ¡ï¼š\nmysql&amp;gt; start transaction;\n\n2ã€å¹¶åœ¨ä¸¤ä¸ªå®¢æˆ·ç«¯æ‰§è¡Œä»¥ä¸‹sqlï¼š\nmysql&amp;gt; select * from `order` where id=1ï¼›\n\n3ã€åœ¨Bå®¢æˆ·ç«¯æ‰§è¡Œä»¥ä¸‹sql,ä½†ä¸æäº¤äº‹åŠ¡\nmysql&amp;gt; update `order` set status = 2 where id =1;\n\n4ã€æ­¤æ—¶åœ¨Aå®¢æˆ·ç«¯æŸ¥è¯¢è¯¥å€¼ï¼Œæ­¤æ—¶ä½ ä¼šå‘ç°å€¼æ²¡æœ‰å˜\nmysql&amp;gt; select * from `order` where id = 1;\n\n5ã€æäº¤äº‹åŠ¡å®¢æˆ·ç«¯Bçš„äº‹åŠ¡ï¼Œå†æ¬¡æŸ¥è¯¢Aä¸­çš„å€¼ï¼Œæ­¤æ—¶ä½ ä¼šå‘ç°ä»ç„¶æ²¡æœ‰å˜\nmysql&amp;gt;commitï¼›\nmysql&amp;gt; select * from `order` where id = 1;\n\n6ã€æäº¤å®¢æˆ·ç«¯Aä¸­çš„äº‹åŠ¡ï¼Œå†æ¬¡æŸ¥è¯¢Aï¼ŒBçš„å€¼ï¼Œæ­¤æ—¶å‘ç”Ÿäº†å˜æ›´\nmysql&amp;gt;commitï¼›\nmysql&amp;gt; select * from `order` where id = 1;\nmysql&amp;gt; select * from `order` where id = 1;\n\nå¯ä»¥æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ç†è§£ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577188832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053262,"avatar":"https://static001.geekbang.org/account/avatar/00/10/12/4e/ff0702fc.jpg","nickname":"ç«é”…å°ç‹å­","note":"","ucode":"7D1BF39C437A99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98918,"discussion_content":"å—¯å—¯ å®é™…æ˜¯è¿™æ ·çš„ æ–‡ä¸­æè¿°çš„æ˜¯é˜»å¡ å…¶å®å¹¶æ²¡æœ‰ è€Œåªæ˜¯ç›¸å½“äºå½“å‰äº‹åŠ¡éš”ç¦»","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1577191032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162608,"user_name":"é£å¤©å°çŒª","can_delete":false,"product_type":"c1","uid":1173360,"ip_address":"","ucode":"4F9E71E52274C5","user_header":"https://static001.geekbang.org/account/avatar/00/11/e7/70/2a382ccf.jpg","comment_is_top":false,"comment_ctime":1576564706,"is_pvip":false,"replies":[{"id":"61972","content":"è¿™é‡Œæ˜¯é’ˆå¯¹åº“å­˜è¡¨çš„é”èµ„æº","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1576668899,"ip_address":"","comment_id":162608,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576564706","product_id":100028001,"comment_content":"æœ€åå‡åº“å­˜ä¾‹å­ä¸­ï¼Œå¦‚æœè¦é¿å…é•¿æ—¶é—´æŒæœ‰é”ï¼Œä¸åº”è¯¥å…ˆå‡åº“å­˜ï¼Œé€‰æ‹©æ‰§è¡Œé¡ºåº2å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478102,"discussion_content":"è¿™é‡Œæ˜¯é’ˆå¯¹åº“å­˜è¡¨çš„é”èµ„æº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576668899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158873,"user_name":"å¥‹æ–—çš„å°ç™½é¼ ","can_delete":false,"product_type":"c1","uid":1743483,"ip_address":"","ucode":"752BB901FFB7CE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/icHicAP9M4M4DIjAvlj5FDdFxIeA0pR3J15QdvVjXQXbznwunDN8OvrYqnsFchtBTNrZCCfGTE2RpPzIxjkvFAKg/132","comment_is_top":false,"comment_ctime":1575467875,"is_pvip":false,"replies":[{"id":"60849","content":"è¿™å¯¹äºæ™®é€šçš„selectæ“ä½œæ˜¯ä¸åŠ é”çš„ï¼Œä¸è®ºäº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1575537281,"ip_address":"","comment_id":158873,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1575467875","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæ‚¨è¯´MVCC å¯¹æ™®é€šçš„ Select ä¸åŠ é”ï¼Œé‚£RCå’ŒRRçº§åˆ«ä¸ä¸€æ ·äº†å—ï¼Ÿè¿™ä¸¤ä¸ªä¸å°±æ˜¯selectåŠ é”ä¸ä¸€æ ·å—ï¼Ÿè¿˜æœ‰æ—¢ç„¶RC selectä¹Ÿæ˜¯å¿«ç…§è¯»ï¼Œé‚£æ˜¯ä¸æ˜¯ä¹Ÿè§£å†³äº†ä¸å¯é‡å¤è¯»é—®é¢˜ï¼Ÿ<br>æœ›è§£ç­”ï¼Œç ”ç©¶äº†ä¸€æ™šä¸ŠMvccææ™•äº†","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476877,"discussion_content":"è¿™å¯¹äºæ™®é€šçš„selectæ“ä½œæ˜¯ä¸åŠ é”çš„ï¼Œä¸è®ºäº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575537281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1442123,"avatar":"https://static001.geekbang.org/account/avatar/00/16/01/4b/196a7d8a.jpg","nickname":"èµ·ç‚¹","note":"","ucode":"A54A6D21383B23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300375,"discussion_content":"å¦‚æœä¸ç†è§£MVCCï¼Œå¯é˜…è¯»è¿™ç¯‡æ–‡ç« \n\nhttps://mp.weixin.qq.com/s/NTqNhlXPaOyPAlmSNY2PzQ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598068363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238961,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","nickname":"æ˜“æ°´å¯’","note":"","ucode":"F5D8127ED4754E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284004,"discussion_content":"rcå¿«ç…§è¯»åœ¨äº‹åŠ¡ç»“æŸå‰ä¼šå˜åŒ–ï¼Œæ¯æ¬¡è¯»çš„æ—¶å€™å¿«ç…§ä¼šå˜åŒ–ï¼Œrrçš„å¿«ç…§è¯»æ˜¯äº‹åŠ¡å¼€å¯ï¼ˆæˆ–å¼€å¯äº‹åŠ¡åç¬¬ä¸€æ¡æŸ¥è¯¢æ‰§è¡Œæ—¶ï¼‰æ—¶çš„å¿«ç…§ï¼Œåœ¨äº‹åŠ¡ç»“æŸå‰éƒ½ä¸ä¼šå˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592411357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158432,"user_name":"å¹³å‡¡ä¹‹è·¯","can_delete":false,"product_type":"c1","uid":1669273,"ip_address":"","ucode":"96CE12339BD5FD","user_header":"https://static001.geekbang.org/account/avatar/00/19/78/99/6060eb2d.jpg","comment_is_top":false,"comment_ctime":1575369871,"is_pvip":false,"replies":[{"id":"60854","content":"æ£€æŸ¥ä¸‹è‡ªå·±çš„ä»£ç ä»¥åŠéš”ç¦»çº§åˆ«","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1575538135,"ip_address":"","comment_id":158432,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1575369871","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘åœ¨å¯é‡å¤è¯»é‡Œé¢ï¼Œäº‹åŠ¡Aæ²¡æœ‰ç»“æŸï¼Œä¸åšä¿®æ”¹æ“ä½œï¼Œä½†æ˜¯äº‹åŠ¡Bä¹Ÿå¯ä»¥ä¿®æ”¹æ•°æ®","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476724,"discussion_content":"æ£€æŸ¥ä¸‹è‡ªå·±çš„ä»£ç ä»¥åŠéš”ç¦»çº§åˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575538135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238961,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","nickname":"æ˜“æ°´å¯’","note":"","ucode":"F5D8127ED4754E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284005,"discussion_content":"ä¼°è®¡ä½ ä½ ç†è§£äº†ï¼Œäº‹åŠ¡Aä¸­çš„è¯»åº”è¯¥æ˜¯select â€¦lock in share modeï¼Œä¹Ÿå°±æ˜¯åŠ å…±äº«é”çš„è¯»ï¼Œæ™®é€šçš„è¯»å¯¹å…¶ä»–äº‹åŠ¡çš„æ›´æ–°æ“ä½œæ²¡å½±å“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592411559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1877904,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a7/90/9a0da433.jpg","nickname":"å°å“‡","note":"","ucode":"1C2C1FE3FCB9CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1238961,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","nickname":"æ˜“æ°´å¯’","note":"","ucode":"F5D8127ED4754E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287370,"discussion_content":"è€å¸ˆè¯´çš„é”å®ç°äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œåº”è¯¥æ˜¯é”â•MVCCå®ç°éš”ç¦»çº§åˆ«å§ï¼Œçœ‹è€å¸ˆæ„æ€å¥½åƒæ˜¯äº‹åŠ¡è¯»é»˜è®¤ä¼šåŠ ä¸Šå…±äº«é”è€Œä¸æ˜¯æ˜¾å¼çš„.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593426268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":284005,"ip_address":""},"score":287370,"extra":""}]}]},{"had_liked":false,"id":139990,"user_name":"æœˆè¿·æ´¥æ¸¡","can_delete":false,"product_type":"c1","uid":1264111,"ip_address":"","ucode":"2B18B2FE3DAC3B","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/ef/02401473.jpg","comment_is_top":false,"comment_ctime":1570781504,"is_pvip":false,"replies":[{"id":"54269","content":"åœ¨40è®²ä¸­ï¼Œè®²åˆ°äº†redo logçš„å·¥ä½œåŸç†ï¼Œredo log åˆåŒ…æ‹¬äº†å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†²ï¼ˆredo log bufferï¼‰ä»¥åŠä¿å­˜åœ¨ç£ç›˜çš„é‡åšæ—¥å¿—æ–‡ä»¶ï¼ˆredo log fileï¼‰ï¼Œå‰è€…å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå®¹æ˜“ä¸¢å¤±ï¼Œåè€…æŒä¹…åŒ–åœ¨ç£ç›˜ä¸­ï¼Œä¸ä¼šä¸¢å¤±ã€‚<br><br>MySQLæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰åœ¨commitæ—¶å¦‚ä½•å°†log bufferä¸­çš„æ—¥å¿—åˆ·log fileä¸­ã€‚è¿™ç§æ§åˆ¶é€šè¿‡å˜é‡ innodb_flush_log_at_trx_commit çš„å€¼æ¥å†³å®šã€‚è¯¥å˜é‡æœ‰3ç§å€¼ï¼š0ã€1ã€2ï¼Œé»˜è®¤ä¸º1ï¼Œå³æ¯æäº¤ä¸€æ¬¡äº‹åŠ¡éƒ½å†™åˆ°ç£ç›˜ä¸­ï¼Œè€Œè®¾ç½®ä¸º0æ—¶ï¼Œä¸ºæ¯ç§’å°†äº‹åŠ¡å†™åˆ°ç£ç›˜ä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1570955455,"ip_address":"","comment_id":139990,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1570781504","product_id":100028001,"comment_content":"æœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸‹ï¼Œæˆ‘çœ‹åˆ°è¯´ redolog ä¸ºäº†æå‡æŒä¹…åŒ–çš„IOæ•ˆç‡è€Œäº§ç”Ÿï¼ŒæŠŠæ¯æ¬¡äº‹åŠ¡å†™æ•°æ®æ–‡ä»¶æ”¹æˆå†™redoLogç„¶åå†æ‰¹é‡å†™redoLogåˆ°æ•°æ®æ–‡ä»¶ã€‚æˆ‘å°±æœ‰ä¸ªé—®é¢˜äº†ï¼ŒredoLogå’Œæ•°æ®æ–‡ä»¶ä¸éƒ½æ˜¯ç£ç›˜è¯»ä¹ˆï¼Ÿå¹¶ä¸”å†™redologä¹Ÿéœ€è¦åœ¨äº‹åŠ¡ä¸­åŒæ­¥å†™ï¼Œå› ä¸ºå¼‚æ­¥å†™ä¸èƒ½ä¿è¯redologå¿…å®šå†™æˆåŠŸã€‚ã€‚ã€‚æ±‚æ•™","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470201,"discussion_content":"åœ¨40è®²ä¸­ï¼Œè®²åˆ°äº†redo logçš„å·¥ä½œåŸç†ï¼Œredo log åˆåŒ…æ‹¬äº†å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†²ï¼ˆredo log bufferï¼‰ä»¥åŠä¿å­˜åœ¨ç£ç›˜çš„é‡åšæ—¥å¿—æ–‡ä»¶ï¼ˆredo log fileï¼‰ï¼Œå‰è€…å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå®¹æ˜“ä¸¢å¤±ï¼Œåè€…æŒä¹…åŒ–åœ¨ç£ç›˜ä¸­ï¼Œä¸ä¼šä¸¢å¤±ã€‚\n\nMySQLæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰åœ¨commitæ—¶å¦‚ä½•å°†log bufferä¸­çš„æ—¥å¿—åˆ·log fileä¸­ã€‚è¿™ç§æ§åˆ¶é€šè¿‡å˜é‡ innodb_flush_log_at_trx_commit çš„å€¼æ¥å†³å®šã€‚è¯¥å˜é‡æœ‰3ç§å€¼ï¼š0ã€1ã€2ï¼Œé»˜è®¤ä¸º1ï¼Œå³æ¯æäº¤ä¸€æ¬¡äº‹åŠ¡éƒ½å†™åˆ°ç£ç›˜ä¸­ï¼Œè€Œè®¾ç½®ä¸º0æ—¶ï¼Œä¸ºæ¯ç§’å°†äº‹åŠ¡å†™åˆ°ç£ç›˜ä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570955455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238961,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","nickname":"æ˜“æ°´å¯’","note":"","ucode":"F5D8127ED4754E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284006,"discussion_content":"redologæ•´ä½“ä¸Šæ˜¯è¿‘ä¼¼é¡ºåºå†™ï¼ˆè¿™é‡ŒæŒ‡åˆ·ç›˜ï¼‰ï¼Œä½†ä¸ä¸¥æ ¼æ˜¯é¡ºåºå†™ï¼Œè¦æ¯”ç›´æ¥å†™æ•°æ®æ–‡ä»¶æ•ˆç‡é«˜ä¸€äº›ï¼Œå¦å¤–redo logä¹Ÿèƒ½å¤Ÿè®©ç”¨æˆ·åœ¨æŒä¹…æ€§å’Œæ€§èƒ½ä¸Šåšé€‰æ‹©ï¼Œå°±æ˜¯ä½œè€…è¯´çš„é‚£ä¸‰ä¸­log bufferåˆ·ç›˜çš„ç­–ç•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592411866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264111,"avatar":"https://static001.geekbang.org/account/avatar/00/13/49/ef/02401473.jpg","nickname":"æœˆè¿·æ´¥æ¸¡","note":"","ucode":"2B18B2FE3DAC3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32480,"discussion_content":"éå¸¸æ„Ÿè°¢ è·Ÿlog4J å¼‚æ­¥è®°æ—¥å¿—æœ‰ç‚¹ç±»ä¼¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571041336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139659,"user_name":"é¢è¯•å®˜é—®","can_delete":false,"product_type":"c1","uid":1009375,"ip_address":"","ucode":"F9CE89589772F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/df/501ba989.jpg","comment_is_top":false,"comment_ctime":1570699973,"is_pvip":true,"replies":[{"id":"54270","content":"æ”¶åˆ°å»ºè®®","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1570955563,"ip_address":"","comment_id":139659,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570699973","product_id":100028001,"comment_content":"Serializable ç¿»è¯‘ä¸º å¯ä¸²è¡ŒåŒ– ä¼šæ›´åˆç†ä¸€äº›ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470041,"discussion_content":"æ”¶åˆ°å»ºè®®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570955563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135269,"user_name":"è¡Œåˆ™å°†è‡³","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1569115327,"is_pvip":false,"replies":[{"id":"53070","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1569981268,"ip_address":"","comment_id":135269,"utype":1}],"discussion_count":2,"race_medal":1,"score":"1569115327","product_id":100028001,"comment_content":"è€å¸ˆï¼Œå¯¹æ•°æ®åº“é”ä¸æ˜¯å¾ˆç†Ÿæ‚‰ã€‚ä»¥ä¸‹ç»“æ„æ˜¯æ­£ç¡®çš„å—ï¼Ÿ<br>æ•°æ®åº“é”=ä¹è§‚é” + æ‚²è§‚é”[å…±äº«é”ã€æ’å®ƒé”[è¡Œé”ã€è¡¨é”]]<br>è¿™äº›æ˜¯æ•°æ®åº“æ‰€æœ‰çš„é”å—?<br>","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468118,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569981268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284337,"avatar":"","nickname":"ty_young","note":"","ucode":"EB1D5DB0AE7B33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230941,"discussion_content":"è¿™ä¸ªåˆ†ç±»å¥½å¥‡æ€ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586781999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133203,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1568442302,"is_pvip":false,"replies":[{"id":"51105","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568533719,"ip_address":"","comment_id":133203,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568442302","product_id":100028001,"comment_content":"è¯·é—®è€å¸ˆæ•°æ®åº“çš„äº‹åŠ¡æœ¬è´¨æ˜¯ä¸æ˜¯éƒ½æ˜¯åˆ©ç”¨å•åº“çš„äº‹åŠ¡æœºåˆ¶å®ç°çš„?åˆ†å¸ƒå¼æ•°æ®åº“äº‹åŠ¡ï¼Œåªæ˜¯å°†æ§åˆ¶äº‹åŠ¡æäº¤æˆ–å›æ»šçš„åŠ¨ä½œå¾€ä¸Šå±‚æå‡å•¦?","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467292,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568533719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132304,"user_name":"å°å­¦ç”ŸğŸ­","can_delete":false,"product_type":"c1","uid":1134122,"ip_address":"","ucode":"A0F62E3264D777","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/2a/e606529b.jpg","comment_is_top":false,"comment_ctime":1568080856,"is_pvip":false,"replies":[{"id":"50695","content":"ä¹Ÿæ˜¯è¡Œé”","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568165317,"ip_address":"","comment_id":132304,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568080856","product_id":100028001,"comment_content":"è€å¸ˆupdateè¯­å¥æ˜¯è¡Œé”ï¼Œé‚£insertè¯­å¥æ˜¯ä»€ä¹ˆé”å‘¢","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466867,"discussion_content":"ä¹Ÿæ˜¯è¡Œé”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568165317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122899,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1565571694,"is_pvip":false,"replies":[{"id":"45086","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565573167,"ip_address":"","comment_id":122899,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565571694","product_id":100028001,"comment_content":"è€å¸ˆå¥½ï¼ŒæŸ¥è¯¢æœªåŠ ç´¢å¼•æ—¶è¡Œé”å‡çº§ä¸ºè¡¨é”è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œmvvcæœºåˆ¶ä¸‹selectä¸æ˜¯ä¸åŠ é”å—ï¼Ÿé™¤éæ˜¯in share modeæˆ–for update","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462446,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565573167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122410,"user_name":"æ˜Ÿæ˜Ÿæ»´è“å¤©","can_delete":false,"product_type":"c1","uid":1465990,"ip_address":"","ucode":"2F2F56F93AD828","user_header":"https://static001.geekbang.org/account/avatar/00/16/5e/86/40877404.jpg","comment_is_top":false,"comment_ctime":1565360665,"is_pvip":false,"replies":[{"id":"45097","content":"å—¯å—¯ï¼Œåé¢ä¼šè®²åˆ°æ­»é”å’Œé”ç­‰å¾…çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565574573,"ip_address":"","comment_id":122410,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565360665","product_id":100028001,"comment_content":"è€å¸ˆèƒ½å¦å¤šè®²ç‚¹innodbé”ã€‚æœ€è¿‘æˆ‘ä»¬è€æ˜¯å‡ºç°é”ç­‰å¾…çš„æƒ…å†µï¼Œè€å¸ˆå¯å¦ç»™ä¸€äº›ä¼˜åŒ–çš„æ€è·¯","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462239,"discussion_content":"å—¯å—¯ï¼Œåé¢ä¼šè®²åˆ°æ­»é”å’Œé”ç­‰å¾…çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565574573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122179,"user_name":"è‹å¿—è¾‰","can_delete":false,"product_type":"c1","uid":1068927,"ip_address":"","ucode":"39B25CE21C04EE","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/7f/5dc11380.jpg","comment_is_top":false,"comment_ctime":1565313374,"is_pvip":false,"replies":[{"id":"50396","content":"å¯¹çš„ï¼Œå¿«ç…§ç‰ˆæœ¬ä¸å¤§äºäº‹åŠ¡ç‰ˆæœ¬å·","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1567947902,"ip_address":"","comment_id":122179,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565313374","product_id":100028001,"comment_content":"RRæ˜¯åŸºäºMVVCçš„ï¼Œè€Œåè€…å¯¹äºselectä¸åŠ é”ï¼Œé‚£ä¹ˆå¦‚æœäº‹åŠ¡aæœ‰ä¸¤æ¬¡æŸ¥è¯¢ï¼Œäº‹åŠ¡båœ¨açš„ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´åšäº†ä¿®æ”¹ï¼Œè¦ä¿è¯å¯é‡å¤è¯»ï¼Œaä¸¤æ¬¡è¯»å–çš„éƒ½æ˜¯bæ”¹ä¹‹å‰çš„å¿«ç…§å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462134,"discussion_content":"å¯¹çš„ï¼Œå¿«ç…§ç‰ˆæœ¬ä¸å¤§äºäº‹åŠ¡ç‰ˆæœ¬å·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567947902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121918,"user_name":"LW","can_delete":false,"product_type":"c1","uid":1325297,"ip_address":"","ucode":"89820332658E98","user_header":"https://static001.geekbang.org/account/avatar/00/14/38/f1/996a070d.jpg","comment_is_top":false,"comment_ctime":1565249037,"is_pvip":false,"replies":[{"id":"44868","content":"å¯¹çš„ï¼Œredo logä¿è¯äº‹åŠ¡çš„åŸå­æ€§ä»¥åŠæŒä¹…æ€§ï¼Œundo logä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565314403,"ip_address":"","comment_id":121918,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565249037","product_id":100028001,"comment_content":"æ€è€ƒé¢˜ï¼šé€šè¿‡redo logå’Œundo logå®ç°","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462003,"discussion_content":"å¯¹çš„ï¼Œredo logä¿è¯äº‹åŠ¡çš„åŸå­æ€§ä»¥åŠæŒä¹…æ€§ï¼Œundo logä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565314403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121894,"user_name":"å¼ å­¦ç£Š","can_delete":false,"product_type":"c1","uid":1250029,"ip_address":"","ucode":"F545F384A6F1E1","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotSSnZic41tGkbflx0ogIg3ia6g2muFY1hCgosL2t3icZm7I8Ax1hcv1jNgr6vrZ53dpBuGhaoc6DKg/132","comment_is_top":false,"comment_ctime":1565245784,"is_pvip":false,"replies":[{"id":"44869","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565314428,"ip_address":"","comment_id":121894,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565245784","product_id":100028001,"comment_content":"MySQLé€šè¿‡äº‹åŠ¡å®æˆ˜åŸå­æ€§ï¼Œä¸€ä¸ªäº‹åŠ¡å†…çš„DMLè¯­å¥è¦ä¹ˆå…¨éƒ¨æˆåŠŸè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚é€šè¿‡redo logå’Œundo logå®ç°æŒä¹…æ€§å’Œä¸€è‡´æ€§ï¼Œå½“æ‰§è¡ŒDMLè¯­å¥æ—¶ä¼šå°†æ“ä½œè®°å½•åˆ°redo logä¸­å¹¶è®°å½•ä¸ä¹‹ç›¸åçš„æ“ä½œåˆ°undo logä¸­ï¼Œäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå°±å°†è¯¥redologä¸­çš„æ“ä½œï¼ŒæŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œäº‹åŠ¡å›æ»šï¼Œåˆ™æ‰§è¡Œundo logä¸­è®°å½•çš„æ“ä½œï¼Œæ¢å¤åˆ°æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461993,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565314428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121815,"user_name":"æ’’æ—¦çš„å •è½","can_delete":false,"product_type":"c1","uid":1116864,"ip_address":"","ucode":"15F6AA41EE556F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0a/c0/401c240e.jpg","comment_is_top":false,"comment_ctime":1565227650,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565227650","product_id":100028001,"comment_content":"è¿™æ˜¯å› ä¸ºï¼Œè™½ç„¶è¿™äº›æ“ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ï¼Œä½†é”çš„ç”³è¯·åœ¨ä¸åŒæ—¶é—´ï¼Œåªæœ‰å½“å…¶ä»–æ“ä½œéƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šé‡Šæ”¾æ‰€æœ‰é”ã€‚  è€å¸ˆ è¿™ä¸ªè™½ç„¶é™ä½äº†æ›´æ–°åº“å­˜è¡¨é‚£è¡Œé”æŒæœ‰æ—¶é—´  ä½†æ˜¯ä¸æ˜¯å¢åŠ äº†è®¢å•è¡¨é”å®šçš„æ—¶é—´äº†ä¹ˆ  è¿˜æ˜¯è¯´ä¸€ä¸ªäº‹åŠ¡æ•°æ®æ’å…¥æ“ä½œ å¹¶ä¸ä¼šå—åˆ°å¦ä¸€ä¸ªäº‹åŠ¡æ•°æ®æ’å…¥æ“ä½œçš„å½±å“","like_count":0},{"had_liked":false,"id":121767,"user_name":"æˆ‘å·²ç»è®¾ç½®äº†æ˜µç§°","can_delete":false,"product_type":"c1","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1565221703,"is_pvip":false,"replies":[{"id":"51397","content":"å¯ä»¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568725499,"ip_address":"","comment_id":121767,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1565221703","product_id":100028001,"comment_content":"æ‰§è¡Œé¡ºåº1é‚£è¾¹ï¼Œæ˜¯å¦å¯ä»¥æŠŠæŸ¥è¯¢æ¡ä»¶æ”¾åˆ°äº‹åŠ¡å¤–ï¼Œå‡å°‘äº‹åŠ¡é‡Œé¢çš„æ“ä½œ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461934,"discussion_content":"å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568725499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1108306,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e9/52/aa3be800.jpg","nickname":"Loubobooo","note":"","ucode":"7B2543A80EBDEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4516,"discussion_content":"è¿™æ ·æŸ¥è¯¢åº“å­˜ä¼šå‡ºç°ä¸ä¸€è‡´ï¼Œå¯¼è‡´è„æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565508256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1364034,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","nickname":"æˆ‘å·²ç»è®¾ç½®äº†æ˜µç§°","note":"","ucode":"ED672C5EBDBDC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108306,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e9/52/aa3be800.jpg","nickname":"Loubobooo","note":"","ucode":"7B2543A80EBDEF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4757,"discussion_content":"è²Œä¼¼æ”¾äº‹åŠ¡é‡Œé¢ä¹Ÿä¸€æ ·ä¼šä¸ä¸€è‡´çš„é—®é¢˜å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565705077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4516,"ip_address":""},"score":4757,"extra":""}]}]}]}