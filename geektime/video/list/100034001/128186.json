{"id":128186,"title":"23 | 位运算符应用举例（2）","content":"<p><strong>课件地址</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/swift-course\">https://gitee.com/geektime-geekbang/swift-course</a></p>","comments":[{"had_liked":false,"id":174381,"user_name":"谭鹏","can_delete":false,"product_type":"c3","uid":1142009,"ip_address":"","ucode":"4A8120C4AA6F2F","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/f9/af80b4da.jpg","comment_is_top":false,"comment_ctime":1580184936,"is_pvip":false,"replies":[{"id":70501,"content":"除了消失的是数字只剩下1个，其他都有两个","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1582717988,"ip_address":"","comment_id":174381,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"成对出现的意思  就是除了 消失的那个 数字  其他的数字 出现的次数都相同吗   就像 2 4  4 2   3  1  1 3 这样   ","like_count":0,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482384,"discussion_content":"除了消失的是数字只剩下1个，其他都有两个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582717988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174376,"user_name":"谭鹏","can_delete":false,"product_type":"c3","uid":1142009,"ip_address":"","ucode":"4A8120C4AA6F2F","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/f9/af80b4da.jpg","comment_is_top":false,"comment_ctime":1580184315,"is_pvip":false,"replies":[{"id":70499,"content":"相同的数字正好都有两个","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1582717920,"ip_address":"","comment_id":174376,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"怎么理解  成对的意思也不是  3 4， 4 3 ，2 3，  3 2      这样 相同的数字个数正好想等","like_count":0,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482383,"discussion_content":"相同的数字正好都有两个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582717920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145317,"user_name":"黄文汉","can_delete":false,"product_type":"c3","uid":1506583,"ip_address":"","ucode":"10273E6D5E46F2","user_header":"https://static001.geekbang.org/account/avatar/00/16/fd/17/fa6b6bd9.jpg","comment_is_top":false,"comment_ctime":1572249698,"is_pvip":false,"replies":[{"id":58083,"content":"这个思路不是太对，可以再思考下，运行一下代码","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1573638217,"ip_address":"","comment_id":145317,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"我的思路是出现偶数次的相同数字异或结果为0，所以先找出相同的数字，构造新的数组，最后再异或一遍找到不一样的数字.\nvar temp = 0\nvar nums = []\nfor num in [1, 2, 2, 2, 3, 3, 3] {\n     do {\n        temp = temp ^ num\n   } while temp ==0 {\n                nums.append(num)\n       }\n}\ntemp = 0\nfor num in nums {\n    temp = temp ^ num\n}\nreturn temp","like_count":0,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472335,"discussion_content":"这个思路不是太对，可以再思考下，运行一下代码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573638217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222710,"user_name":"岁月","can_delete":false,"product_type":"c3","uid":1337598,"ip_address":"","ucode":"29A2A2BC3C4FE4","user_header":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","comment_is_top":false,"comment_ctime":1590897057,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"思考题\n把每一个数字的每一个二进制位位都独立相加，比如有三个数第一位都是1，那么这个位加起来就等于3，把结果保存到数组下标为0的位置里。\n最后数组里的元素就是每一个数字的对应二进制位的数字相加的结果，再遍历数组对每个元素%3，出现三次的数字在这个位%3会等于0，而出现一次的数字最后%3等于1\n最后再把数组换成十进制数就可以得到答案。 转换公式就是对数组每一个非0元素，做2的下标次方，再相加。","like_count":1},{"had_liked":false,"id":361675,"user_name":"猪小擎","can_delete":false,"product_type":"c3","uid":1370959,"ip_address":"北京","ucode":"D9552746AE3327","user_header":"https://static001.geekbang.org/account/avatar/00/14/eb/4f/6a97b1cd.jpg","comment_is_top":false,"comment_ctime":1667750697,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"flag = temp &amp; -temp ，目的是找到temp里的任何一个1，一个数和他的相反数求与得到最低位的1. 很好理解两个互为相反数的数相加等于0.0的二进制就是全0，什么样的数相加得全0呢，高位全是1，低位全是0的两个，在最低的一位1上加1，就得全0. \n","like_count":0},{"had_liked":false,"id":357123,"user_name":"Geek_iOS","can_delete":false,"product_type":"c3","uid":2022511,"ip_address":"北京","ucode":"C1226C5BA360F4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLpupXlcSpDic9Dx71jRjBK37QDT8yicOQsm3HGDUTiaWDxVaVKrbfveFiaJibnF8LOJYv8YZhHe7pHxRA/132","comment_is_top":false,"comment_ctime":1662975978,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"var temp:UInt = 0\n    for num in nums {\n        temp = num ^ temp\n    }\n这里的循环没看明白，循环之后这个temp 就等于是取得最后一组数据异或之后的值了吗？那就是我找的是最后一个的值？","like_count":0},{"had_liked":false,"id":342184,"user_name":"NIXUS","can_delete":false,"product_type":"c3","uid":1000060,"ip_address":"","ucode":"853763C229A5AA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","comment_is_top":false,"comment_ctime":1650090860,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"```\nvar flag : UInt = 1\nwhile (flag &amp; temp) == 0 {\n     flag = flag &lt;&lt; 1\n}\n```\n上面这部分代码，如果换成\n```\nvar flag: UInt = 1\nif temp &amp; flag == 0 {\n    flag = temp\n}\n```\n似乎也是可以的","like_count":0},{"had_liked":false,"id":307229,"user_name":"Abner","can_delete":false,"product_type":"c3","uid":1026533,"ip_address":"","ucode":"23550F4F42633E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/e5/4d682e0e.jpg","comment_is_top":false,"comment_ctime":1628951285,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"var temp : UInt = 0\n    for num in nums {\n        temp =  temp ^ num\n    }\n这个代码有点疑惑。1^2会是多少，这几行代码不就是把数组的上一个和当前一个进行^运算吗？","like_count":0},{"had_liked":false,"id":299855,"user_name":"jlstmac","can_delete":false,"product_type":"c3","uid":2664994,"ip_address":"","ucode":"537E143B38D305","user_header":"","comment_is_top":false,"comment_ctime":1624884756,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"func findOnlyOneNum(nums:[UInt]) -&gt; UInt {\n    var temp : UInt = 0\n    for num in nums {\n        temp ^= num\n    }\n    var flag : UInt = 1\n    while (flag &amp; temp) == 0 {\n        flag = flag &lt;&lt; 1\n    }\n    var num1 : UInt = 0\n    var num2 : UInt = 0\n    var numcount1 = 0\n    for num in nums {\n        if num &amp; flag == 0 {\n            numcount1+=1\n            num1 ^= num\n        }else{\n            num2 ^= num\n        }\n    }\n    if numcount1 == 1 {\n        return num1\n    }else{\n        return num2\n    }\n}","like_count":0},{"had_liked":false,"id":299851,"user_name":"jlstmac","can_delete":false,"product_type":"c3","uid":2664994,"ip_address":"","ucode":"537E143B38D305","user_header":"","comment_is_top":false,"comment_ctime":1624884252,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"func findOnlyOneNum(nums:[UInt]) -&gt; UInt {\n    var temp : UInt = 0\n    for num in nums {\n        temp ^= num\n    }\n    var flag : UInt = 1\n    while (flag &amp; temp) == 0 {\n        flag = flag &lt;&lt; 1\n    }\n    var num1 : UInt = 0\n    var num2 : UInt = 0\n    var numcount1 = 0\n    for num in nums {\n        if num &amp; flag == 0 {\n            numcount1+=1\n            num1 ^= num\n        }else{\n            num2 ^= num\n        }\n    }\n    if numcount1 == 1 {\n        return num1\n    }else{\n        return num2\n    }\n}","like_count":0},{"had_liked":false,"id":185378,"user_name":"小灰","can_delete":false,"product_type":"c3","uid":1586696,"ip_address":"","ucode":"679E11CE2645CC","user_header":"https://static001.geekbang.org/account/avatar/00/18/36/08/4674855c.jpg","comment_is_top":false,"comment_ctime":1583570477,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100034001,"comment_content":"缺少数字也可以使用Dictionary 来实现，利用key&#47;value 的特性 \nfunc convertArrToDictionary(numArr: [Int]) -&gt; Dictionary&lt;String, Int&gt; {\n    var dict = [String: Int]()\n    \n    for num in numArr {\n        if dict[&quot;\\(num)&quot;] != nil {\n            dict[&quot;\\(num)&quot;] = dict[&quot;\\(num)&quot;]! + 1\n        } else {\n            dict[&quot;\\(num)&quot;] = 1\n        }\n    }\n    return dict\n}\n\nvar arr = [1, 2, 2, 2, 3, 3, 3]\nvar dic = convertArrToDictionary(numArr: arr)\n\nfor item in dic {\n    if item.value == 1 {\n        print(&quot;find lost num: \\(item.key)&quot;)\n    }\n}","like_count":0}]}