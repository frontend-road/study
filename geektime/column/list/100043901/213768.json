{"id":213768,"title":"26 | ç‰›åˆ€å°è¯•ï¼ˆä¸Šï¼‰ï¼šå®ç°æµ‹è¯•æ¡†æ¶å‰çš„åŸºç¡€å‡†å¤‡","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å…‰ã€‚ç»å†äº†åƒéš¾ä¸‡é™©ï¼Œæˆ‘ä»¬ç»ˆäºæ¥åˆ°äº†è¿™æ¬¡ç¼–ç¨‹æ¢é™©æ—…ç¨‹çš„æœ€åä¸€ä¸ªé˜¶æ®µâ€œç»¼åˆé¡¹ç›®ç¯‡â€ã€‚</p><p>è¿˜è®°å¾—å¼€ç¯‡çš„æ—¶å€™ï¼Œæˆ‘è·Ÿä½ è®²è¿‡çš„ï¼Œè¦å¸¦ä½ çœ‹çœ‹è¿™ç‰‡ç¼–ç¨‹æ£®æ—ä¸­æœ€æœ‰è¶£çš„åœ°æ–¹ï¼Œä¸çŸ¥é“ä½ æ„Ÿå—åˆ°è¿™ä»½ä¹è¶£äº†å—ï¼Ÿæ¥ä¸‹æ¥çš„æœ€åå‡ èŠ‚è¯¾ï¼Œæ˜¯æˆ‘ä¸ºä½ ç²¾å¿ƒå‡†å¤‡çš„ï¼Œä½œä¸ºä½ ç¼–ç¨‹å…¥é—¨å­¦ä¹ ä¹‹è¡Œçš„å®Œæˆç¤¼ç‰©ï¼ŒåŒæ—¶ï¼Œä¹Ÿæ˜¯å¯¹æ•´ä¸ªä¸“æ å­¦ä¹ å†…å®¹çš„ä¸€ä¸ªæ€»ç»“å‡åã€‚</p><p>å¯¹äºæœ¬ç« çš„å­¦ä¹ ï¼Œä½ éœ€è¦ç»¼åˆè¿ç”¨â€œè¯­è¨€åŸºç¡€ç¯‡â€â€œç¼–ç èƒ½åŠ›è®­ç»ƒç¯‡â€ä»¥åŠâ€œç®—æ³•æ•°æ®ç»“æ„ç¯‡â€ä¸­æ‰€å­¦çŸ¥è¯†ï¼Œå®Œæˆä¸¤ä¸ªå°é¡¹ç›®ï¼Œä¸€ä¸ªæ˜¯â€œä¸ªäººæµ‹è¯•æ¡†æ¶å¼€å‘â€ï¼Œå¦ä¸€ä¸ªæ˜¯â€œè‡ªåˆ¶ç®€æ˜“è®¡ç®—å™¨â€ã€‚æˆ‘å¸Œæœ›é€šè¿‡è¿™ä¸¤ä¸ªé¡¹ç›®ï¼Œæ‰“é€šä½ ç¼–ç¨‹å­¦ä¹ çš„â€œä»»ç£äºŒè„‰â€ï¼Œè®©ä½ åœ¨åç»­çš„å…¶ä»–ç¼–ç¨‹çŸ¥è¯†å­¦ä¹ ä¸­ï¼Œå¯ä»¥æ¸¸åˆƒæœ‰ä½™ï¼Œä¹åœ¨å…¶ä¸­ã€‚</p><h2>è½¯ä»¶å¼€å‘æµç¨‹</h2><p>åœ¨å¼€å§‹åšé¡¹ç›®ä¹‹å‰å‘¢ï¼Œè®©æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹ä¸€èˆ¬çš„é¡¹ç›®å¼€å‘æµç¨‹ã€‚</p><p>æ‹¿ä¼ ç»Ÿçš„è½¯ä»¶å·¥ç¨‹å¼€å‘æµç¨‹æ¥è¯´ï¼Œä¸€ä¸ªè½¯ä»¶çš„é¡¹ç›®å¼€å‘æµç¨‹ï¼ŒåŒ…æ‹¬ï¼šéœ€æ±‚åˆ†æã€æ¦‚è¦è®¾è®¡ã€è¯¦ç»†è®¾è®¡ã€ç¼–ç ã€æµ‹è¯•ã€è½¯ä»¶äº¤ä»˜ã€éªŒæ”¶å’Œç»´æŠ¤ã€‚è™½ç„¶åŒ…æ‹¬äº†8ä¸ªé˜¶æ®µï¼Œå¯æ€»çš„æ¥è¯´ï¼Œä½ å¯ä»¥æŠŠå®ƒæ€»ç»“ä¸ºè½¯ä»¶å¼€å‘çš„å‰ä¸­åä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><p>è½¯ä»¶å¼€å‘çš„å‰æœŸï¼Œç”±äº§å“ç»ç†ã€é¡¹ç›®ç»ç†è·Ÿè¿›éœ€æ±‚ï¼Œåšéœ€æ±‚åˆ†æï¼Œç„¶åæ˜¯æ¦‚è¦è®¾è®¡ï¼Œå‡ºä¸€ä»½ç³»ç»Ÿçš„è¯¦ç»†è®¾è®¡ã€‚è¿™æ˜¯é¡¹ç›®çš„å¤´éƒ¨é˜¶æ®µï¼Œä¸»è¦æ˜¯ä»ç†è®ºä¸ŠéªŒè¯éœ€æ±‚å¯è¡Œï¼Œå¹¶ä¸”æœ€ç»ˆäº§å‡ºä¸€ä»½åˆ‡å®å¯è¡Œçš„è½¯ä»¶ç³»ç»Ÿçš„è¯¦ç»†è®¾è®¡ã€‚å°±åƒæˆ‘åœ¨å’±ä»¬æ¯èŠ‚è¯¾ä¸­ï¼Œç»™ä½ ç•™æ€è€ƒé¢˜ï¼Œæ­¤æ—¶æˆ‘çš„è§’è‰²å°±æ˜¯é¡¹ç›®ç»ç†å’Œäº§å“ç»ç†ï¼Œæˆ‘é¦–å…ˆéœ€è¦åˆ†æç»™ä½ ç•™çš„æ€è€ƒé¢˜æ˜¯å¦å¯åšï¼Œä»¥åŠè·Ÿä½ è¯´æ˜ç™½ï¼Œå¤§è‡´æ€ä¹ˆåšã€‚</p><!-- [[[read_end]]] --><p>è½¯ä»¶å¼€å‘çš„ä¸­æœŸï¼Œæ˜¯ç”±æŠ€æœ¯äººå‘˜è´Ÿè´£ï¼Œä¸»è¦æ˜¯æ ¹æ®ç³»ç»Ÿçš„è¯¦ç»†è®¾è®¡ï¼Œè¿›è¡Œç¼–ç å’Œæµ‹è¯•ï¼ŒæŠŠå›¾çº¸ä¸Šçš„ç³»ç»Ÿå®ç°å‡ºæ¥ã€‚ä½ ä¹Ÿå¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ–½å·¥çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œç±»æ¯”åˆ°å’±ä»¬çš„æ€è€ƒé¢˜ä¸Šï¼Œå°±æ˜¯ä½ æ ¹æ®æˆ‘çš„æç¤ºï¼Œå…·ä½“å®Œæˆæ¯ä¸€é“æ€è€ƒé¢˜çš„ç¨‹åºï¼Œå¹¶ä¸”å¯¹å®Œæˆçš„ç¨‹åºåšç®€å•æµ‹è¯•ï¼Œä»¥ä¿è¯ç¨‹åºçš„æ­£ç¡®æ€§ã€‚</p><p>è½¯ä»¶å¼€å‘çš„åæœŸï¼Œç”±é¡¹ç›®ç»ç†å¸¦é¢†æŠ€æœ¯æ”¯æŒäººå‘˜åšè½¯ä»¶äº¤ä»˜ã€éªŒæ”¶åŠåæœŸç»´æŠ¤çš„ç›¸å…³å·¥ä½œã€‚è¿™ä¸€éƒ¨åˆ†ï¼Œä½ å¯ä»¥ç†è§£ä¸ºï¼Œæ˜¯ä½ äº¤ä½œä¸šçš„è¿‡ç¨‹ï¼Œå®¢æˆ·å°±æ˜¯è€å¸ˆï¼Œä½ çš„ä½œä¸šè¦æ˜¯ä¸åˆæ ¼ï¼Œè€å¸ˆå°±ä¼šç»™ä½ é€€å›å»å¹¶æå‡ºä¿®æ”¹å»ºè®®ã€‚</p><p>ä»è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ä½œä¸ºæŠ€æœ¯äººå‘˜ï¼Œä¸æˆ‘ä»¬ç›¸å…³çš„ï¼Œå°±æ˜¯è½¯ä»¶å¼€å‘çš„ä¸­æœŸé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯ç¼–ç å’Œæµ‹è¯•ã€‚</p><p>åœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬æŠŠå­¦ä¹ ä»»åŠ¡ä¸»è¦æ”¾åœ¨äº†ç¼–ç é˜¶æ®µï¼Œä¸€ç›´æ²¡æœ‰ææµ‹è¯•é˜¶æ®µçš„äº‹æƒ…ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è¯´è¯´æµ‹è¯•é˜¶æ®µä¸»è¦åšçš„äº‹æƒ…ã€‚</p><h2>é»‘ç›’æµ‹è¯•ä¸ç™½ç›’æµ‹è¯•</h2><p>å…³äºæµ‹è¯•é˜¶æ®µçš„æµ‹è¯•æ–¹æ³•ï¼Œå¯ä»¥å¤§è‡´åˆ†ä¸ºäº”ç§ï¼šç™½ç›’æµ‹è¯•ï¼Œé»‘ç›’æµ‹è¯•ï¼Œç°ç›’æµ‹è¯•ï¼Œé™æ€æµ‹è¯•ä¸åŠ¨æ€æµ‹è¯•ã€‚</p><p>çœ‹ç€è¿™äº›æµ‹è¯•æ–¹æ³•çš„åç§°ï¼Œä½ å¯èƒ½æœ‰ç‚¹å„¿æ‡µï¼Œå…¶å®ä½ å®Œå…¨æ²¡æœ‰å¿…è¦æŒæ¡å…¨éƒ¨çš„æµ‹è¯•æ–¹æ³•ï¼Œåªéœ€è¦äº†è§£å…¶ä¸­çš„é»‘ç›’æµ‹è¯•å’Œç™½ç›’æµ‹è¯•å°±è¡Œï¼ŒçŸ¥é“äº†è¿™ä¸¤ç§æµ‹è¯•æ–¹æ³•ï¼Œå°±å¯ä»¥æ»¡è¶³ä½ å¯¹é¡¹ç›®å¼€å‘æµç¨‹çš„æ¦‚å¿µè®¤çŸ¥ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥è¯´è¯´ç™½ç›’æµ‹è¯•ä¸é»‘ç›’æµ‹è¯•éƒ½æ˜¯ä»€ä¹ˆæ„æ€ã€‚é¦–å…ˆåå­—é‡Œé¢çš„â€œç›’â€ï¼Œå…¶å®æŒ‡çš„å°±æ˜¯é¡¹ç›®ä¸­çš„ç³»ç»Ÿï¼Œä½ å¯ä»¥ç†è§£æˆä¸ºæ˜¯æˆ‘ä»¬å†™çš„ç¨‹åºï¼Œå®ƒä¹Ÿæ˜¯è¢«æµ‹è¯•çš„å¯¹è±¡ã€‚è‡³äºè¿™ä¸ªç™½ä¸é»‘å‘¢ï¼Œæ„æ€å°±æ˜¯åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦å…³æ³¨ä»£ç å®ç°é€»è¾‘ã€‚</p><p>ç™½ç›’æµ‹è¯•ï¼Œå°±æ˜¯å…³æ³¨ä»£ç å®ç°é€»è¾‘ï¼Œä»è€Œäº§ç”Ÿçš„æµ‹è¯•è¡Œä¸ºã€‚è¿™ç§è¡Œä¸ºå°±åƒä½ æŠŠä¸€ä¸ªç›’å­æ‰“å¼€ï¼Œä»”ç»†æ£€æŸ¥å…¶å†…éƒ¨æœ‰æ— é”™è¯¯ä¸€æ ·ã€‚</p><p>è€Œä¸å…³æ³¨ä»£ç å®ç°é€»è¾‘ï¼Œè€Œäº§ç”Ÿçš„æµ‹è¯•è¡Œä¸ºï¼Œå°±æ˜¯é»‘ç›’æµ‹è¯•ã€‚åœ¨è¿™ä¸ªæµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªå…³æ³¨ç³»ç»Ÿçš„è¾“å‡ºæ˜¯å¦æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ã€‚</p><p>ä¸‹é¢æˆ‘æ¥ä¸¾å‡ ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œä½ æ¥åˆ†æä¸€ä¸‹å“ªä¸€ç§æ˜¯ç™½ç›’æµ‹è¯•ï¼Œå“ªä¸€ç§æ˜¯é»‘ç›’æµ‹è¯•ã€‚</p><p>åœºæ™¯ä¸€ï¼šä½ å†™å®Œäº†ä¸€ä¸ªç¨‹åºï¼Œè¿è¡Œä»¥åè¾“å…¥æ•°æ®ï¼Œæµ‹è¯•ç¨‹åºçš„è¾“å‡ºç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p><p>åœºæ™¯äºŒï¼šå½“ä½ å‘ç°ï¼Œç¨‹åºçš„ç»“æœä¸ç¬¦åˆé¢„æœŸçš„æ—¶å€™ï¼Œå¼€å§‹æ£€æŸ¥ä½ ç¨‹åºçš„ä»£ç é€»è¾‘ï¼Œå¹¶ä¸”é’ˆå¯¹äºæ¯ä¸€ä¸ªå‡½æ•°åŠŸèƒ½åšæµ‹è¯•ã€‚</p><p>åœ¨åœºæ™¯ä¸€ä¸­ï¼Œè™½ç„¶ç¨‹åºæ˜¯ä½ å†™çš„ï¼Œå¯ä½ åœ¨åšæµ‹è¯•çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰å…³å¿ƒç¨‹åºå†…éƒ¨çš„ä»£ç é€»è¾‘ï¼Œè€Œæ˜¯å…³æ³¨æ•´ä½“ç¨‹åºçš„åŠŸèƒ½æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œæ‰€ä»¥è¿™ä¸ªå±äºé»‘ç›’æµ‹è¯•ã€‚</p><p>è€Œåœ¨åœºæ™¯äºŒä¸­ï¼Œä½ åœ¨æµ‹è¯•ç¨‹åºçš„æ—¶å€™ï¼Œå…³æ³¨åˆ°äº†ç¨‹åºå†…éƒ¨çš„ä»£ç é€»è¾‘æ˜¯å¦æ­£ç¡®ï¼Œå¹¶ä¸”é’ˆå¯¹ä»£ç ä¸­çš„å‡½æ•°ï¼Œå¼€å§‹åšé’ˆå¯¹æ€§æµ‹è¯•ã€‚ç”±äºè¿™ä¸ªæµ‹è¯•è¿‡ç¨‹å…³æ³¨åˆ°äº†ä»£ç æœ¬èº«çš„é€»è¾‘ï¼Œè€Œä¸å•å•æ˜¯ç¨‹åºåŠŸèƒ½æœ¬èº«ï¼Œæ‰€ä»¥ï¼Œè¿™å±äºç™½ç›’æµ‹è¯•ã€‚</p><p>é€šè¿‡è¿™ä¸¤ä¸ªæ—¥å¸¸å†™ç¨‹åºçš„åœºæ™¯ï¼Œä½ ä¼šå‘ç°ï¼Œå…¶å®æµ‹è¯•è¡Œä¸ºå¯¹äºæˆ‘ä»¬æ¥è¯´å¹¶ä¸é™Œç”Ÿï¼Œæµ‹è¯•å°±æ˜¯ä¸ºäº†ä¿è¯ç¨‹åºåŠŸèƒ½çš„æ­£ç¡®æ€§çš„ï¼Œè€Œæ‰€è°“çš„é»‘ç›’æµ‹è¯•æˆ–è€…ç™½ç›’æµ‹è¯•ï¼Œå¹¶æ²¡æœ‰ä¼˜åŠ£ä¹‹åˆ†ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šç»å¸¸ç»¼åˆè¿ç”¨è¿™ä¸¤ç§æµ‹è¯•ï¼Œæ¥æŸ¥æ‰¾ç¨‹åºä¸­å­˜åœ¨çš„æ½œåœ¨é—®é¢˜ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œæƒ³è¦ä¿è¯ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œå¿…ç„¶ä¼šæ¶‰åŠåˆ°è¿ç”¨ç›¸å…³çš„æµ‹è¯•æ–¹æ³•ã€‚æ‰€ä»¥è¯·ä½ è®°ä½ï¼Œæµ‹è¯•å¹¶ä¸æ˜¯æµ‹è¯•äººå‘˜çš„ä¸“å±ï¼Œå¾ˆå¤šæ—¶å€™ä¹Ÿæ˜¯å¼€å‘äººå‘˜éœ€è¦æŒæ¡çš„æŠ€èƒ½ã€‚</p><p>å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œæœ€åŸºæœ¬çš„æµ‹è¯•æ–¹æ³•ï¼Œå°±æ˜¯é’ˆå¯¹è‡ªå·±ç¨‹åºä¸­çš„æ¯ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œç¼–å†™å¯¹åº”çš„å•å…ƒæµ‹è¯•ï¼Œè€Œå•å…ƒæµ‹è¯•ä¸­çš„å•å…ƒï¼Œæ˜¯ç¨‹åºä¸­æœ€å°çš„æµ‹è¯•å•ä½ã€‚ä¾‹å¦‚ C è¯­è¨€ä¸­ï¼Œä¸€ä¸ªå•å…ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒC++ä¸­çš„ä¸€ä¸ªå•å…ƒï¼Œå°±æ˜¯ä¸€ä¸ªç±»ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¯´åˆ° C è¯­è¨€çš„å•å…ƒæµ‹è¯•ï¼ŒæŒ‡çš„æ˜¯å¯¹æ¯ä¸€ä¸ªå‡½æ•°ï¼Œç¼–å†™ä¸€æ®µæµ‹è¯•ç¨‹åºã€‚è€Œå¯ä»¥è¾…åŠ©å¼€å‘äººå‘˜ç¼–å†™è¿™äº›å•å…ƒæµ‹è¯•çš„ç¨‹åºï¼Œæˆ‘ä»¬å«åšâ€œå•å…ƒæµ‹è¯•æ¡†æ¶â€ï¼Œä¹Ÿå¯ä»¥ç®€ç§°ä¸ºâ€œæµ‹è¯•æ¡†æ¶â€ã€‚</p><h2>åˆè¯†ï¼šGoogle æµ‹è¯•æ¡†æ¶</h2><p>å¥½äº†ï¼Œå…³äºè½¯ä»¶å¼€å‘æµç¨‹çš„åŸºæœ¬æƒ…å†µå‘¢ï¼Œæˆ‘è®²å®Œäº†ï¼Œä¸‹é¢æˆ‘ä»¬æ­£å¼è¯´è¯´æµ‹è¯•æ¡†æ¶ã€‚</p><p>å’±ä»¬è¦å®Œæˆçš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œå°±æ˜¯ç¼–å†™ä¸€ä¸ªç®€æ˜“çš„ C è¯­è¨€æµ‹è¯•æ¡†æ¶ã€‚ä¸è¿‡åœ¨å†™è¿™ä¸ªCè¯­è¨€æµ‹è¯•æ¡†æ¶ä¹‹å‰ï¼Œå’±ä»¬å…ˆçœ‹çœ‹ä¹‹å‰çš„å¤§å‚æˆ–å¤§ç‰›ä»¬æ˜¯æ€ä¹ˆåšçš„ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨å†™è‡ªå·±çš„æµ‹è¯•æ¡†æ¶çš„æ—¶å€™ï¼Œä¹Ÿèƒ½æœ‰æ‰€å€Ÿé‰´ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘è¦å¸¦ä½ è®¤è¯†çš„æ˜¯ä¸€ä¸ªç”± Google å¼€å‘çš„å•å…ƒæµ‹è¯•æ¡†æ¶ Google Testï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°å®ƒä¸º gtestã€‚</p><p>å…³äºå¦‚ä½•å®‰è£… Google æµ‹è¯•æ¡†æ¶å‘¢ï¼Œç”±äºå¤§å®¶çš„ç¼–ç¨‹ç¯å¢ƒä¸åŒï¼Œæ‰€ä»¥ï¼Œä½ å¯ä»¥æŒ‰ç…§ç½‘ä¸Šå…¶ä»–èµ„æ–™ä¸­ç»™å‡ºçš„å®‰è£…æ•™ç¨‹ï¼Œç»“åˆè‡ªå·±çš„ç¼–ç¨‹ç¯å¢ƒï¼Œå‡†å¤‡å¥½ gtest çš„ç›¸å…³ç¯å¢ƒã€‚</p><p>gtest æ˜¯ä¸€ä¸ª C++ çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œå¦‚æœä½ ä¸æ–¹ä¾¿å‡†å¤‡ gtest ç›¸å…³ç¯å¢ƒï¼Œä¹Ÿä¸ç¢äº‹å„¿ï¼Œä½ å¯ä»¥çœ‹æˆ‘ä¸‹é¢çš„è®²è§£ã€‚æˆ‘çš„ç¯å¢ƒä¸­ï¼Œå·²ç»å®‰è£…å¥½äº† gtest çš„ç›¸å…³æ¨¡å—ï¼Œä¸ºäº†ç®€å•è¯´æ˜ gtest çš„ä½¿ç”¨ä¸è¿è¡Œæ•ˆæœï¼Œç»™ä½ å‡†å¤‡äº†å¦‚ä¸‹ä»£ç ï¼š</p><pre><code>#include &lt;stdio.h&gt;\n#include &lt;gtest/gtest.h&gt;\n\n// åˆ¤æ–­ä¸€ä¸ªæ•°å­— x æ˜¯å¦æ˜¯ç´ æ•°\nint is_prime(int x) {\n    for (int i = 2; i * i &lt; x; i++) {\n        if (x % i == 0) return 0;\n    }\n    return 1;\n}\n\n// ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹\nTEST(test1, test_is_prime) {\n    EXPECT_EQ(is_prime(3), 1);\n    EXPECT_EQ(is_prime(5), 1);\n    EXPECT_EQ(is_prime(7), 1);\n}\n\n// ç¬¬äºŒä¸ªæµ‹è¯•ç”¨ä¾‹\nTEST(test2, test_is_prime) {\n    EXPECT_EQ(is_prime(4), 0);\n    EXPECT_EQ(is_prime(0), 0);\n    EXPECT_EQ(is_prime(1), 0);\n}\n\nint main() {\n    return RUN_ALL_TESTS();\n}\n</code></pre><p>å°±æ˜¯ä¸€ä»½ç®€å•çš„ gtest çš„ä½¿ç”¨ä»£ç ã€‚ä»£ç ä¸­ï¼ŒåŒ…å«äº† gtest/gtest.h å¤´æ–‡ä»¶ä»¥åï¼Œç¨‹åºå°±å…·å¤‡äº†ä¸€äº›é­”æ³•æ•ˆæœï¼Œä¸‹é¢è®©æˆ‘æ¥ç»™ä½ å…·ä½“è®²ä¸€è®²ã€‚</p><p>ä»ç¨‹åºçš„ç»“æ„ä¸Šæ¥è¯´ï¼Œå…ˆæ˜¯ä¸€ä¸ª is_prime å‡½æ•°ï¼Œæ¥ä¸‹æ¥æ˜¯ä¸¤æ®µä»¥ TEST ä½œä¸ºå¼€å¤´çš„ä»£ç ï¼ˆè¿™ä¸¤æ®µä»£ç çš„ä½œç”¨ï¼Œå’±ä»¬ç¨ååšä»‹ç»ï¼‰ï¼Œæœ€åæ˜¯ä¸€ä¸ªä¸»å‡½æ•°ã€‚ä¸»å‡½æ•°ä¸­åŸæœ¬ return 0 çš„ä½ç½®ï¼Œæ›¿æ¢æˆäº† return RUN_ALL_TESTS()ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸»å‡½æ•°ä¸­åªæ‰§è¡Œäº†ä¸€ä¸ª RUN_ALL_TESTS å‡½æ•°ï¼Œè€Œè¿™ä¸ª RUN_ALL_TESTS å‡½æ•°æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿå’±ä»¬æ¥çœ‹ä¸€ä¸‹ç¨‹åºçš„å…·ä½“è¾“å‡ºï¼š</p><pre><code>[==========] Running 2 tests from 1 test suite.\n[----------] Global test environment set-up.\n[----------] 2 tests from test_is_prime\n[ RUN      ] test_is_prime.test1\n[       OK ] test_is_prime.test1 (1 ms)\n[ RUN      ] test_is_prime.test2\ngtest_test.cpp:25: Failure\nExpected equality of these values:\n  is_prime(4)\n    Which is: 1\n  0\ngtest_test.cpp:26: Failure\nExpected equality of these values:\n  is_prime(0)\n    Which is: 1\n  0\ngtest_test.cpp:27: Failure\nExpected equality of these values:\n  is_prime(1)\n    Which is: 1\n  0\n[  FAILED  ] test_is_prime.test2 (0 ms)\n[----------] 2 tests from test_is_prime (1 ms total)\n\n[----------] Global test environment tear-down\n[==========] 2 tests from 1 test suite ran. (1 ms total)\n[  PASSED  ] 1 test.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] test_is_prime.test2\n\n 1 FAILED TEST\n</code></pre><p>ç”±äºå’±ä»¬çš„ç¯å¢ƒæœ‰æ‰€ä¸åŒï¼Œæ‰€ä»¥ä½ ç¯å¢ƒä¸­çš„è¾“å‡ºå†…å®¹ï¼Œå¯èƒ½å’Œæˆ‘è¿™ä¸ªè¾“å‡ºç»“æœç•¥æœ‰å·®åˆ«ï¼Œä¸è¿‡ï¼Œè¿™ä¸å½±å“æˆ‘ä»¬æ¥ä¸‹æ¥çš„è®¨è®ºã€‚</p><p>å…ˆçœ‹è¾“å‡ºå†…å®¹çš„ç¬¬ 4 è¡Œå’Œç¬¬ 6 è¡Œï¼Œæ„æ€æ˜¯è¯´ï¼Œæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ test_is_prime.test1 å’Œ test_is_prime.test2ï¼Œè¿™ä¸å°±æ˜¯ä¸Šé¢ä¸¤ä¸ªä»¥ TEST å¼€å¤´çš„ä¸¤æ®µä»£ç ç›¸å…³çš„è¾“å‡ºå†…å®¹ä¹ˆï¼Ÿ</p><p>æ¥ä¸‹æ¥ä»ç¬¬ 7 è¡Œåˆ°ç¬¬ 21 è¡Œæ˜¯ä¸€æ®µæŠ¥é”™ä¿¡æ¯ï¼Œæ„æ€å°±æ˜¯è¯´ is_prime(4)ï¼Œis_prime(0) ä¸ is_prime(1) å‡½æ•°è¿”å›å€¼é”™è¯¯ï¼Œä¹Ÿå°±æ„å‘³ç€ is_prime å‡½æ•°å®ç°æœ‰é”™è¯¯ï¼Œè¿™æ®µé”™è¯¯æ‰€æ¶‰åŠçš„ä¿¡æ¯ï¼Œåœ¨æºä»£ç ä¸­çš„ç¬¬äºŒä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­æœ‰æ¶‰åŠã€‚</p><p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬å¯¹ gtest å•å…ƒæµ‹è¯•æ¡†æ¶çš„ä¸€ä¸ªæ„Ÿæ€§è®¤è¯†ï¼Œä»è¿™äº›æ„Ÿæ€§è®¤çŸ¥ï¼Œæˆ‘ä»¬é€æ¸èµ°å‘ç†æ€§å±‚é¢ï¼Œé€æ­¥å±•å¼€å±äºæˆ‘ä»¬è‡ªå·±çš„æ€è€ƒã€‚</p><h2>å¯¹äº gtest çš„ä¸‰ä¸ªæ€è€ƒ</h2><p>é¢å¯¹åˆšæ‰çš„æ¼”ç¤ºä»£ç å’Œè¾“å‡ºå†…å®¹ï¼Œä½ å¯èƒ½ä¼šäº§ç”Ÿå¦‚ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š</p><ol>\n<li>æºä»£ç ä¸­çš„ EXPECT_EQ æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</li>\n<li>ä»¥ TEST å¼€å¤´çš„ä»£ç æ®µï¼Œå’Œæˆ‘ä»¬å­¦ä¹ çš„å‡½æ•°å¾ˆä¸ä¸€æ ·ï¼Œé‚£å®ƒç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li>ä¸»å‡½æ•°ä¸­åªè°ƒç”¨äº† RUN_ALL_TESTS å‡½æ•°ï¼Œä¸ºä»€ä¹ˆå¥½åƒæ˜¯æ‰§è¡Œäº†ç¨‹åºä¸­æ‰€æœ‰çš„ TEST ä»£ç æ®µï¼Ÿè¿™ä¸ªåŠŸèƒ½æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</li>\n</ol><p>ç¬¬ä¸€ä¸ªé—®é¢˜ä¸éš¾ï¼ŒæŸ¥çœ‹ç›¸å…³ gtest çš„æ–‡æ¡£èµ„æ–™ï¼Œä½ å°±å¯ä»¥çŸ¥é“ï¼ŒEXPECT_EQ æ˜¯ gtest é‡Œé¢è‡ªå¸¦çš„å®ï¼Œä¸»è¦ä½œç”¨æ˜¯åˆ¤æ–­ä¼ å…¥çš„ä¸¤éƒ¨åˆ†çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœä¸ç›¸ç­‰ï¼Œå°±ä¼šäº§ç”Ÿç±»ä¼¼äºè¾“å‡ºå†…å®¹ä¸­ç¬¬ 7 è¡Œåˆ°ç¬¬ 21 è¡Œçš„è¾“å‡ºå†…å®¹ã€‚</p><p>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä»¥ TEST å¼€å¤´çš„è¿™æ®µä»£ç ï¼Œæ˜æ˜¾ä¸ç¬¦åˆæˆ‘ä»¬å¯¹ C è¯­è¨€çš„è¯­æ³•è®¤çŸ¥ï¼Œæˆ‘ä»¬ç¡®å®æ²¡æœ‰è§è¿‡ä¸ç”¨è§„å®šè¿”å›å€¼ç±»å‹ï¼Œä¹Ÿä¸ç”¨è§„å®šå‚æ•°ç±»å‹çš„å‡½æ•°å®šä¹‰æ–¹å¼ã€‚å…³äº TEST ç©¶ç«Ÿæ˜¯ä¸ªä»€ä¹ˆçš„é—®é¢˜ï¼Œæ›´åŠ åˆç†çš„çŒœæµ‹ï¼Œå°±æ˜¯ TEST å®é™…ä¸Šæ˜¯ä¸€ä¸ªå®ã€‚</p><p>æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹å®çš„ä½œç”¨ï¼Œå®å°±æ˜¯åšç®€å•çš„æ›¿æ¢ã€‚æ­£æ˜¯å› ä¸ºTEST(test_is_prime, test1) è¿™æ®µä»£ç å®é™…ä¸Šæ˜¯ä¸€ä¸ªå®ï¼Œæ‰€ä»¥å±•å¼€ä»¥åï¼Œå’Œåé¢çš„å¤§æ‹¬å·ä¸­çš„å†…å®¹ä¸€èµ·ç»„æˆäº†ä¸€æ®µåˆæ³•çš„ä»£ç å†…å®¹ï¼Œè¿™æ ·ç†è§£ï¼ŒåŸæœ¬çš„ä»£ç å†…å®¹ä¹Ÿå°±è§£é‡Šå¾—é€šäº†ã€‚</p><p>è€Œ TEST å®å±•å¼€ä»¥åä¼šè¢«æ›¿æ¢æˆä»€ä¹ˆå†…å®¹å‘¢ï¼Ÿå…³äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ç•™ä¸‹å……è¶³çš„æ—¶é—´è¯·ä½ å»æ€è€ƒï¼ŒåŒæ—¶ï¼ŒåŒ…æ‹¬ç¬¬ä¸‰ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œéƒ½ç•™ä½œä»Šå¤©çš„æ€è€ƒé¢˜ã€‚æˆ‘å¸Œæœ›ä½ è®¤çœŸæƒ³ä¸€æƒ³ï¼Œå¹¶å°†ä½ çš„æ€è€ƒç»“æœå†™åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚</p><p>ä¸‹é¢è¿™æ®µä»£ç ï¼Œå°±æ˜¯ä½œä¸ºæˆ‘ä»¬åç»­çš„é¡¹ç›®æµ‹è¯•ä»£ç ï¼Œå¯¹äºè¿™ä»½æºä»£ç ï¼Œæˆ‘ä»¬ä¸ä¼šå¯¹å®ƒåšä»»ä½•çš„æ”¹åŠ¨ï¼Œæ‰€ä»¥æˆ‘å»ºè®®ä½ æŠŠä»£ç å†…å®¹ä¿å­˜ä¸‹æ¥ï¼Œä»¥å¤‡å’±ä»¬åé¢è¯¾ç¨‹ç»ƒä¹ ä½¿ç”¨ã€‚</p><pre><code>#include &lt;stdio.h&gt;\n#include &quot;geek_test.h&quot; // æ›¿æ¢æ‰åŸ gtest/gtest.h å¤´æ–‡ä»¶\n\n// åˆ¤æ–­ä¸€ä¸ªæ•°å­— x æ˜¯å¦æ˜¯ç´ æ•°\nint is_prime(int x) {\n    for (int i = 2; i * i &lt; x; i++) {\n        if (x % i == 0) return 0;\n    }\n    return 1;\n}\n\n// ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹\nTEST(test1, test_is_prime) {\n    EXPECT_EQ(is_prime(3), 1);\n    EXPECT_EQ(is_prime(5), 1);\n    EXPECT_EQ(is_prime(7), 1);\n}\n\n// ç¬¬äºŒä¸ªæµ‹è¯•ç”¨ä¾‹\nTEST(test2, test_is_prime) {\n    EXPECT_EQ(is_prime(4), 0);\n    EXPECT_EQ(is_prime(0), 0);\n    EXPECT_EQ(is_prime(1), 0);\n}\n\nint main() {\n    return RUN_ALL_TESTS();\n}\n</code></pre><p>æˆ‘ä»¬åç»­çš„ç›®æ ‡ï¼Œå°±æ˜¯å¼€å‘ä¸€ä¸ªè‡ªå·±çš„æµ‹è¯•æ¡†æ¶ï¼Œæ›¿æ¢æ‰ä¸Šè¿°ä»£ç ä¸­çš„ gtest/gtest.h å¤´æ–‡ä»¶ï¼Œä½¿å¾—ç¨‹åºå…·æœ‰å’Œä¹‹å‰ç±»ä¼¼çš„åŠŸèƒ½å’Œè¾“å‡ºå†…å®¹ã€‚æ•´ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¸ä¼šæ”¹åŠ¨ä¸Šè¿°ä»£ç ä¸­çš„å†…å®¹ï¼Œè¿™ä¸€ç‚¹ï¼Œè¯·ä½ ä¸€å®šè¦ç‰¢è®°ã€‚</p><p>ä»è¿™ä¸€è¯¾å¼€å§‹ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½è„±ç¦»æˆ‘çš„æŒ‡å¯¼å’Œæç¤ºï¼Œå¯ä»¥ç‹¬ç«‹å®Œæˆå’±ä»¬æ¯èŠ‚è¯¾çš„ä»»åŠ¡ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†æ£€éªŒä½ è¿™æ®µæ—¶é—´ä»¥æ¥çš„å­¦ä¹ æˆæœã€‚å½“ç„¶ï¼Œå¦‚æœä½ å®åœ¨æƒ³ä¸å‡ºç­”æ¡ˆï¼Œä¹Ÿå¯ä»¥å›æ¥çœ‹çœ‹æˆ‘çš„åšæ³•ï¼Œä»¥ä¾›å‚è€ƒã€‚</p><h2>è¯¾ç¨‹å°ç»“</h2><p>æœ€åå‘¢ï¼Œæˆ‘æ¥ç»™ä½ åšä¸€ä¸‹ä»Šå¤©çš„è¯¾ç¨‹å°ç»“ï¼š</p><ol>\n<li>æµ‹è¯•è¡Œä¸ºï¼Œä¸æ˜¯æµ‹è¯•å·¥ç¨‹å¸ˆçš„ä¸“å±ï¼Œä½ åº”è¯¥æŠŠå®ƒä½œä¸ºä¸€ä¸ªå¼€å‘å·¥ç¨‹å¸ˆçš„ä¹ æƒ¯ã€‚</li>\n<li>å•å…ƒæµ‹è¯•å±äºç™½ç›’æµ‹è¯•èŒƒç•´ï¼ŒGoogle çš„ gtest å°±æ˜¯ä¸€ç§è¾…åŠ©æˆ‘ä»¬ç¼–å†™å•å…ƒæµ‹è¯•çš„æ¡†æ¶ã€‚</li>\n<li>gtest ä¸­çš„ TEST æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå®ï¼Œè€Œè¿™ä¸ªå®åº”è¯¥å±•å¼€æˆæ€æ ·çš„ä»£ç å†…å®¹ï¼Œè¿˜éœ€è¦ä½ è®¤çœŸæ€è€ƒï¼Œè¿™ä¸ªæ€è€ƒè¿‡ç¨‹å¯¹ä½ æ¥è¯´æ˜¯å¾ˆæœ‰ä»·å€¼çš„ã€‚</li>\n</ol><p>å¥½äº†ï¼Œä»Šå¤©å°±åˆ°è¿™é‡Œäº†ï¼Œæˆ‘æ˜¯èƒ¡å…‰ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ã€‚</p>","comments":[{"had_liked":false,"id":190285,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1584626723,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5879594019","product_id":100043901,"comment_content":"å†™å•å…ƒæµ‹è¯•æ˜¯ä¸€ä¸ªç¨‹åºå‘˜çš„èŒä¸šç´ å…»","like_count":1},{"had_liked":false,"id":257242,"user_name":"ç½—è€€é¾™@åå¿˜","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1603893019,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1603893019","product_id":100043901,"comment_content":"èŒ¶è‰ºå¸ˆå­¦ç¼–ç¨‹<br><br>æ€è€ƒé¢˜ç¬¬ä¸€éƒ¨åˆ†ï¼šTEST å®å±•å¼€ä»¥åä¼šè¢«æ›¿æ¢æˆä»€ä¹ˆå†…å®¹<br>åº”è¯¥æ˜¯<br>int test(è¦æµ‹è¯•çš„å‡½æ•°æŒ‡é’ˆï¼Œ è¦æ ¡éªŒçš„å€¼){<br>if è¿è¡Œæ­£å¸¸ è¿”å›&quot;OKâ€ï¼›<br>if è¿è¡Œé”™è¯¯ printfï¼ˆâ€œåº”è¯¥çš„å€¼%dï¼Œç°åœ¨çš„å€¼%dâ€ï¼Œæ­£ç¡®çš„å‡½æ•°è¿è¡Œç»“æœï¼Œè¾“å…¥çš„å˜é‡ï¼‰ï¼›<br>}<br><br>ç¬¬äºŒéƒ¨åˆ†ï¼šä¸»å‡½æ•°ä¸­åªè°ƒç”¨äº† RUN_ALL_TESTS å‡½æ•°ï¼Œä¸ºä»€ä¹ˆå¥½åƒæ˜¯æ‰§è¡Œäº†ç¨‹åºä¸­æ‰€æœ‰çš„ TEST ä»£ç æ®µï¼Ÿè¿™ä¸ªåŠŸèƒ½æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ<br><br>è¯´å®è¯ï¼Œæˆ‘åœ¨è‡ªå·±çš„VS2019ç¯å¢ƒä¸­ï¼Œè¾“å…¥äº†RUN_ALL_TESTS å‡½æ•°ï¼Œåè€Œå‡ºç°äº†çº¢è‰²çš„è­¦å‘Š<br>åœ¨å¯è·å¾—çš„èµ„æ–™ä¸­å¾—çŸ¥ï¼ŒRUN_ALL_TESTSå…¶å®æ˜¯ä¸€ç³»åˆ—çš„å‘½ä»¤çš„é›†åˆï¼Œä¾æ¬¡è°ƒç”¨<br>1. UnitTest::Run()<br>2. UnitTest::Run()<br>3. UnitTestImpl::RunAllTests()<br>4. TestCase::Run()<br>5. TestCase::Run()<br>6. Test::Run()<br>7. Test::TestBody()<br><br>ä¸çŸ¥é“æˆ‘æƒ³çš„å¯¹ä¸å¯¹Â·Â·Â·Â·Â·Â·","like_count":1},{"had_liked":false,"id":257158,"user_name":"ç½—è€€é¾™@åå¿˜","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1603867164,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1603867164","product_id":100043901,"comment_content":"èŒ¶è‰ºå­¦ç¼–ç¨‹<br><br>1ã€åœ¨ç½‘ä¸Šæœgtestçš„å®‰è£…æ•™ç¨‹æ˜¯å¥½ï¼Œä½†æ˜¯å·²ç»å®‰è£…äº†VS2019çš„åŒå­¦åœ¨è¿™é‡Œå¯ä»¥çªƒå–œäº†ï¼šVS2019å°±è‡ªå¸¦gtestçš„ã€‚æƒ³è¯•ç€å®‰è£…gtestçš„åŒå­¦ï¼Œæˆ‘ä¹Ÿå»ºè®®è¿˜ä¸å¦‚ç›´æ¥å®‰è£…VS2019ï¼Œé¡ºä¾¿æ¢ä¸€ä¸ªæ–°çš„ç¼–ç¨‹ç¯å¢ƒï¼›<br><br>2ã€åœ¨vs2019é‡Œï¼Œæ˜¯ç›´æ¥ç”¨gtestæ–°å»ºé¡¹ç›®ï¼Œå†æŠŠè‡ªå·±æƒ³è¦æµ‹è¯•çš„ä¸œè¥¿æ”¾è¿›å»ã€‚<br><br>3ã€åˆ«å‚»å‚»çš„ç›´æ¥æŠŠè€å¸ˆçš„ä»£ç å¤åˆ¶è¿›å»ï¼Œå¾—åˆ†åˆ«â€œå¡«å¥½â€php.cppã€php.hã€test.cppä¸‰éƒ¨åˆ†ï¼Œä»£ç æ‰èƒ½è·‘èµ·æ¥ã€‚","like_count":0},{"had_liked":false,"id":196811,"user_name":"ğŸ¤ªHappyJoo","can_delete":false,"product_type":"c1","uid":1234591,"ip_address":"","ucode":"96E1858F06BABA","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/9f/0213e8a0.jpg","comment_is_top":false,"comment_ctime":1585315409,"is_pvip":false,"replies":[{"id":"74488","content":"è¿˜è®°å¾—ä¹‹å‰è®©ä½ ä»¬çœ‹çš„ç¼–è¯‘å’Œé“¾æ¥é‚£é‡Œçš„å†…å®¹å§ã€‚å…¶ä¸­ç»™ä½ ä»¬ç•™äº†ä¸€ä¸ªè‡ªå­¦çš„å°ä½œä¸šã€‚ä½ çœ‹ä½ çš„æŠ¥é”™é‡Œé¢ï¼ŒæŠ¥äº†ä¸€å †æœªå®šä¹‰ï¼Œè¿˜å…¨éƒ½æ˜¯ gtest ä¸­çš„ç¬¦å·æœªå®šä¹‰ï¼Œæ˜¯ä½ ç¼–è¯‘çš„æ—¶å€™ï¼Œæ²¡æœ‰é“¾æ¥ gtest çš„é™æ€åº“å¯¼è‡´çš„ã€‚gtest ç¯å¢ƒï¼Œä½ è¦æ˜¯æš‚æ—¶è£…ä¸æ˜ç™½ï¼Œä¹Ÿä¸å½±å“åç»­çš„å­¦ä¹ ï¼Œå†™æ–‡ç« çš„æ—¶å€™ï¼Œå°±æ‹…å¿ƒä½ ä»¬ä¼šé‡åˆ°å„ç§å„æ ·çš„ç¯å¢ƒæˆ–è€…ç¼–è¯‘é—®é¢˜ï¼Œè‡ªå·±æä¸å®šçš„è¯ï¼Œç•™è¨€åŒºä¸­å›ç­”è¿™ç±»é—®é¢˜ï¼Œä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥å°±è·Ÿä½ ä»¬å¼ºè°ƒäº†ï¼Œå³ä½¿ä½ æ²¡æœ‰ gtest ä¹Ÿä¸å½±å“æ¥ä¸‹æ¥çš„å­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","comment_id":196811,"uid":"1374625","ip_address":"","utype":1,"ctime":1585325560,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":1,"race_medal":0,"score":"1585315409","product_id":100043901,"comment_content":"æˆ‘æ˜¯å¤åˆ¶æ‚¨çš„ä»£ç çš„å‘€ï¼Œéš¾é“æ˜¯æˆ‘çš„gtestå®‰è£…é”™äº†ï¼Ÿ<br>https:&#47;&#47;github.com&#47;HappyJoo&#47;CLearningScript&#47;blob&#47;master&#47;MyTestFramework&#47;testFramework.cpp<br>ï¼ˆå¼±å¼±åœ°é—®ä¸€å¥ï¼Œèƒ¡å…‰è€å¸ˆæ˜¯ä¸æ˜¯ä¸å–œæ¬¢çœ‹ç•™è¨€é‡Œé¢çš„è¯„è®ºçš„ï¼‰","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489391,"discussion_content":"è¿˜è®°å¾—ä¹‹å‰è®©ä½ ä»¬çœ‹çš„ç¼–è¯‘å’Œé“¾æ¥é‚£é‡Œçš„å†…å®¹å§ã€‚å…¶ä¸­ç»™ä½ ä»¬ç•™äº†ä¸€ä¸ªè‡ªå­¦çš„å°ä½œä¸šã€‚ä½ çœ‹ä½ çš„æŠ¥é”™é‡Œé¢ï¼ŒæŠ¥äº†ä¸€å †æœªå®šä¹‰ï¼Œè¿˜å…¨éƒ½æ˜¯ gtest ä¸­çš„ç¬¦å·æœªå®šä¹‰ï¼Œæ˜¯ä½ ç¼–è¯‘çš„æ—¶å€™ï¼Œæ²¡æœ‰é“¾æ¥ gtest çš„é™æ€åº“å¯¼è‡´çš„ã€‚gtest ç¯å¢ƒï¼Œä½ è¦æ˜¯æš‚æ—¶è£…ä¸æ˜ç™½ï¼Œä¹Ÿä¸å½±å“åç»­çš„å­¦ä¹ ï¼Œå†™æ–‡ç« çš„æ—¶å€™ï¼Œå°±æ‹…å¿ƒä½ ä»¬ä¼šé‡åˆ°å„ç§å„æ ·çš„ç¯å¢ƒæˆ–è€…ç¼–è¯‘é—®é¢˜ï¼Œè‡ªå·±æä¸å®šçš„è¯ï¼Œç•™è¨€åŒºä¸­å›ç­”è¿™ç±»é—®é¢˜ï¼Œä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥å°±è·Ÿä½ ä»¬å¼ºè°ƒäº†ï¼Œå³ä½¿ä½ æ²¡æœ‰ gtest ä¹Ÿä¸å½±å“æ¥ä¸‹æ¥çš„å­¦ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585325560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195011,"user_name":"ğŸ¤ªHappyJoo","can_delete":false,"product_type":"c1","uid":1234591,"ip_address":"","ucode":"96E1858F06BABA","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/9f/0213e8a0.jpg","comment_is_top":false,"comment_ctime":1585127760,"is_pvip":false,"replies":[{"id":"74228","content":"ä¸èƒ½ç”¨ gcc ç¼–è¯‘ gtestï¼Œå› ä¸º gtest æ˜¯ c++ ç¼–å†™çš„å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚<br><br>ä½ çš„ä»£ç ä¸Šä¼ ä¸€ä¸‹ githubï¼Œæˆ‘çœ‹ä¸€ä¸‹ï¼Œçœ‹åˆ°è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘ç›²çŒœï¼Œæœ‰å¯èƒ½æ˜¯ä½ çš„ä¸»å‡½æ•°åå­—å†™é”™äº†ï¼Œä½ æ£€æŸ¥ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":195011,"uid":"1374625","ip_address":"","utype":1,"ctime":1585160045,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":2,"race_medal":0,"score":"1585127760","product_id":100043901,"comment_content":"è€å¸ˆï¼š<br>1ï¼Œä¸èƒ½ç”¨gccç¼–è¯‘å—ï¼Ÿæˆ‘ç”¨gccçš„æ—¶å€™ï¼Œè¿include&lt;gtest&#47;gtest.h&gt;éƒ½å‡ºé”™ï¼Œç”¨g++ä¸ä¼šå‡ºé”™ï¼ˆç‰ˆæœ¬-7.5.0ï¼‰<br><br>2ï¼Œç”¨g++ä¹‹åè¿˜æ˜¯ä¸èƒ½ç”¨æ‚¨çš„ä»£ç ï¼Œå‡ºç°äº†å¾ˆå¤šé”™è¯¯ï¼Œæœ€åä¸€å¥æ˜¯â€™collect2: error: ld returned 1 exit statusâ€˜ï¼Œå’‹åŠå’‹åŠ~~å…·ä½“å¯ä»¥å‚è€ƒï¼ˆhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;60823428&#47;using-gtest-with-gcc-cpp-got-error-collect2-error-ld-returned-1-exit-status).","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488948,"discussion_content":"ä¸èƒ½ç”¨ gcc ç¼–è¯‘ gtestï¼Œå› ä¸º gtest æ˜¯ c++ ç¼–å†™çš„å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚\n\nä½ çš„ä»£ç ä¸Šä¼ ä¸€ä¸‹ githubï¼Œæˆ‘çœ‹ä¸€ä¸‹ï¼Œçœ‹åˆ°è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘ç›²çŒœï¼Œæœ‰å¯èƒ½æ˜¯ä½ çš„ä¸»å‡½æ•°åå­—å†™é”™äº†ï¼Œä½ æ£€æŸ¥ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585160045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1234591,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d6/9f/0213e8a0.jpg","nickname":"ğŸ¤ªHappyJoo","note":"","ucode":"96E1858F06BABA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214400,"discussion_content":"æˆ‘æ˜¯å¤åˆ¶æ‚¨çš„ä»£ç çš„å‘€ï¼Œéš¾é“æ˜¯æˆ‘çš„gtestå®‰è£…é”™äº†ï¼Ÿ\nhttps://github.com/HappyJoo/CLearningScript/blob/master/MyTestFramework/testFramework.cpp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585189232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191025,"user_name":"å®‹ä¸è‚¥","can_delete":false,"product_type":"c1","uid":1240126,"ip_address":"","ucode":"32B34AF579C91C","user_header":"https://static001.geekbang.org/account/avatar/00/12/ec/3e/885ec1d2.jpg","comment_is_top":false,"comment_ctime":1584718258,"is_pvip":false,"replies":[{"id":"73366","content":"ç°åœ¨ VS ä¸‹é¢ä¹Ÿæ”¯æŒ cmake ç¼–è¯‘ï¼Œä½ å¯ä»¥è¯•ç€åœ¨ VS ä¸‹é¢ä½¿ç”¨ cmake ç¼–è¯‘å·¥ç¨‹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":191025,"uid":"1374625","ip_address":"","utype":1,"ctime":1584758179,"user_name_real":"èƒ¡ç‚œç‡š"}],"discussion_count":2,"race_medal":0,"score":"1584718258","product_id":100043901,"comment_content":"æé—®ï¼š<br>æˆ‘å»å®˜æ–¹çš„githubï¼ˆhttps:&#47;&#47;github.com&#47;google&#47;googletestï¼‰ä¸Šä¸‹äº†åŒ…ï¼Œè§£å‹åï¼Œåœ¨readmeé‡Œé¢çœ‹è§ï¼š<br>If you use Windows and have Visual Studio installed, a `gtest.sln` file and<br>several `.vcproj` files will be created. You can then build them using Visual<br>Studio.<br>ä½†æ˜¯æˆ‘åœ¨åŒ…é‡Œé¢æ²¡æœ‰æ‰¾åˆ°â€˜gtest.sln`æ–‡ä»¶ï¼Œç„¶åå›å®˜æ–¹çš„GitHubé‡Œé¢find fileä¹Ÿæ²¡æ‰¾åˆ°ï¼Œçœ‹åšå®¢Linuxä¸‹ä¼šå¥½é…å¾ˆå¤šï¼Œåœ¨å®¶åªæœ‰ç¬”è®°æœ¬ï¼Œæ‰€ä»¥æ²¡èƒ½ç”¨Linuxï¼Œä½†windowé‡Œé¢VSé…å¥½åƒå¿…é¡»è¦è¿™ä¸ªâ€˜gtest.sln`æ–‡ä»¶ï¼Œæ‰¾ä¸åˆ°ã€‚","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"èƒ¡å…‰","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488104,"discussion_content":"ç°åœ¨ VS ä¸‹é¢ä¹Ÿæ”¯æŒ cmake ç¼–è¯‘ï¼Œä½ å¯ä»¥è¯•ç€åœ¨ VS ä¸‹é¢ä½¿ç”¨ cmake ç¼–è¯‘å·¥ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584758179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1234591,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d6/9f/0213e8a0.jpg","nickname":"ğŸ¤ªHappyJoo","note":"","ucode":"96E1858F06BABA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213852,"discussion_content":"å¤§å…„å¼Ÿï¼Œå¯ä»¥å»å¾®è½¯å•†åº—ä¸‹è½½ä¸€ä¸ªâ€™Ubuntu WSLâ€˜ï¼Œè¯•è¯•ï¼Œå¾ˆå¥½ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585127813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}