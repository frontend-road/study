{"id":245880,"title":"15 | åºåˆ—åŒ–ï¼šç®€å•é€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼æœ‰å“ªäº›ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>åœ¨å‰é¢çš„ä¸‰ä¸ªå•å…ƒé‡Œï¼Œæˆ‘ä»¬å­¦ä¹ äº†C++çš„è¯­è¨€ç‰¹æ€§å’Œæ ‡å‡†åº“ï¼Œç®—æ˜¯æŠŠC++çš„ç¼–ç¨‹èŒƒå¼ã€ç”Ÿå‘½å‘¨æœŸã€æ ¸å¿ƒç‰¹æ€§ã€æ ‡å‡†åº“çš„å†…å®¹æ•´ä½“è¿‡äº†ä¸€éã€‚ä»ä»Šå¤©èµ·ï¼Œæˆ‘ä»¬çš„å­¦ä¹ ä¹‹æ—…åˆå°†å¼€å¯ä¸€ä¸ªæ–°çš„ç¯‡ç« ã€‚</p><p>C++è¯­è¨€å’Œæ ‡å‡†åº“å¾ˆå¼ºå¤§ï¼ŒåŠŸèƒ½çµæ´»ï¼Œç»„ä»¶ç¹å¤šï¼Œä½†ä¹Ÿåªèƒ½è¯´æ˜¯æ„å»ºè½¯ä»¶è¿™åº§å¤§å¦çš„åŸºçŸ³ã€‚æƒ³è¦ä»…å‡­å®ƒä»¬å»â€œåŒ…æ‰“å¤©ä¸‹â€ï¼Œä¸èƒ½è¯´æ˜¯ç»å¯¹ä¸å¯è¡Œï¼Œä½†è‡³å°‘æ˜¯â€œåƒåŠ›éš¾è®¨å¥½â€ã€‚</p><p>è¿˜æ˜¯é‚£å¥è€è¯ï¼šâ€œä¸è¦é‡å¤å‘æ˜è½®å­ã€‚â€ï¼ˆReinventing the wheelï¼‰è™½ç„¶å¾ˆå¤šC++ç¨‹åºå‘˜éƒ½çƒ­è¡·äºæ­¤ï¼Œä½†æˆ‘è§‰å¾—å¯¹äºä½ æˆ‘è¿™æ ·çš„â€œå‡¡äººâ€ï¼Œè¿˜æ˜¯è¦çæƒœè‡ªå·±çš„æ—¶é—´å’Œç²¾åŠ›ï¼ŒæŠŠæœ‰é™çš„èµ„æºæŠ•å…¥åˆ°èƒ½æœ‰æ›´å¤šäº§å‡ºçš„äº‹æƒ…ä¸Šã€‚</p><p>æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥çš„è¿™å‡ èŠ‚è¯¾ï¼Œæˆ‘ä¼šä»‹ç»ä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œç²¾é€‰å‡ºåºåˆ—åŒ–/ååºåˆ—åŒ–ã€ç½‘ç»œé€šä¿¡ã€è„šæœ¬è¯­è¨€æ··åˆç¼–ç¨‹å’Œæ€§èƒ½åˆ†æè¿™å››ç±»å·¥å…·ï¼Œå¼¥è¡¥æ ‡å‡†åº“çš„ä¸è¶³ï¼ŒèŠ‚çº¦ä½ çš„å¼€å‘æˆæœ¬ï¼Œè®©ä½ çš„å·¥ä½œæ›´æœ‰æ•ˆç‡ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘å…ˆæ¥è¯´ä¸€ä¸‹åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½åœ¨è½¯ä»¶å¼€å‘ä¸­ç»å¸¸é‡åˆ°ï¼Œä½ å¯èƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œæ‰€ä»¥æˆ‘åªç®€å•è§£é‡Šä¸€ä¸‹ã€‚</p><p>åºåˆ—åŒ–ï¼Œå°±æ˜¯æŠŠå†…å­˜é‡Œâ€œæ´»çš„å¯¹è±¡â€è½¬æ¢æˆé™æ­¢çš„å­—èŠ‚åºåˆ—ï¼Œä¾¿äºå­˜å‚¨å’Œç½‘ç»œä¼ è¾“ï¼›è€Œååºåˆ—åŒ–åˆ™æ˜¯åå‘æ“ä½œï¼Œä»é™æ­¢çš„å­—èŠ‚åºåˆ—é‡æ–°æ„å»ºå‡ºå†…å­˜é‡Œå¯ç”¨çš„å¯¹è±¡ã€‚</p><p>æˆ‘å€Ÿç”¨ã€Šä¸‰ä½“ã€‹é‡Œçš„å†…å®¹ï¼Œæ‰“ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»ï¼šåºåˆ—åŒ–å°±æ˜¯â€œä¸‰ä½“äººâ€çš„è„±æ°´ï¼Œå˜æˆå¹²çº¤ç»´ï¼Œåœ¨ä¹±çºªå…ƒæ–¹ä¾¿å­˜å‚¨è¿è¾“ï¼›ååºåˆ—åŒ–å°±æ˜¯â€œä¸‰ä½“äººâ€çš„æµ¸æ³¡ï¼Œåœ¨æ’çºªå…ƒç”±å¹²çº¤ç»´å†æ¢å¤æˆæ´»ç”Ÿç”Ÿçš„äººã€‚ï¼ˆå³ä½¿æ²¡è¯»è¿‡ã€Šä¸‰ä½“ã€‹ï¼Œä¹Ÿæ˜¯å¾ˆå¥½ç†è§£çš„å§ï¼Ÿï¼‰</p><!-- [[[read_end]]] --><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±å’Œä½ ä»‹ç»ä¸‰ç§æ—¢ç®€å•åˆé«˜æ•ˆçš„æ•°æ®äº¤æ¢æ ¼å¼ï¼šJSONã€MessagePackå’ŒProtoBufferï¼Œçœ‹çœ‹åœ¨C++é‡Œæ€ä¹ˆå¯¹æ•°æ®åšåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><h2>JSON</h2><p>JSONæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œé‡‡ç”¨çº¯æ–‡æœ¬è¡¨ç¤ºï¼Œæ‰€ä»¥æ˜¯â€œhuman readableâ€ï¼Œé˜…è¯»å’Œä¿®æ”¹éƒ½å¾ˆæ–¹ä¾¿ã€‚</p><p>ç”±äºJSONèµ·æºäºâ€œæœ€æµè¡Œçš„è„šæœ¬è¯­è¨€â€JavaScriptï¼Œæ‰€ä»¥å®ƒä¹Ÿéšä¹‹å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œåœ¨Webå¼€å‘é¢†åŸŸå‡ ä¹å·²ç»æˆä¸ºäº†äº‹å®ä¸Šçš„æ ‡å‡†ï¼Œè€Œä¸”è¿˜æ¸—é€åˆ°äº†å…¶ä»–çš„é¢†åŸŸã€‚æ¯”å¦‚å¾ˆå¤šæ•°æ®åº“å°±æ”¯æŒç›´æ¥å­˜å‚¨JSONæ•°æ®ï¼Œè¿˜æœ‰å¾ˆå¤šåº”ç”¨æœåŠ¡ä½¿ç”¨JSONä½œä¸ºé…ç½®æ¥å£ã€‚</p><p>åœ¨<a href=\"https://www.json.org/json-zh.html\">JSONçš„å®˜æ–¹ç½‘ç«™</a>ä¸Šï¼Œä½ å¯ä»¥æ‰¾åˆ°å¤§é‡çš„C++å®ç°ï¼Œä¸è¿‡ç”¨èµ·æ¥éƒ½å·®ä¸å¤šã€‚å› ä¸ºJSONæœ¬èº«å°±æ˜¯ä¸ªKVç»“æ„ï¼Œå¾ˆå®¹æ˜“æ˜ å°„åˆ°ç±»ä¼¼mapçš„å…³è”æ•°ç»„æ“ä½œæ–¹å¼ã€‚</p><p>å¦‚æœä¸æ˜¯ç‰¹åˆ«åœ¨æ„æ€§èƒ½çš„è¯ï¼Œé€‰ä¸ªä½ è‡ªå·±å–œæ¬¢çš„å°±å¥½ã€‚å¦åˆ™ï¼Œä½ å°±è¦åšä¸€ä¸‹æµ‹è¯•ï¼Œçœ‹å“ªä¸€ä¸ªæ›´é€‚åˆä½ çš„åº”ç”¨åœºæ™¯ã€‚</p><p>ä¸è¿‡æˆ‘è§‰å¾—ï¼ŒJSONæ ¼å¼æ³¨é‡çš„æ˜¯æ–¹ä¾¿æ˜“ç”¨ï¼Œåœ¨æ€§èƒ½ä¸Šæ²¡æœ‰å¤ªå¤§çš„ä¼˜åŠ¿ï¼Œæ‰€ä»¥<strong>ä¸€èˆ¬é€‰æ‹©JSONæ¥äº¤æ¢æ•°æ®ï¼Œé€šå¸¸éƒ½ä¸ä¼šå¤ªåœ¨æ„æ€§èƒ½ï¼ˆä¸ç„¶è‚¯å®šä¼šæ”¹æ¢å…¶ä»–æ ¼å¼äº†ï¼‰ï¼Œè¿˜æ˜¯è‡ªå·±ç”¨ç€é¡ºæ‰‹æœ€é‡è¦</strong>ã€‚</p><p>ä¸‹é¢å°±æ¥è¯´è¯´æˆ‘çš„ä¸ªäººæ¨èï¼šâ€œ<a href=\"https://github.com/nlohmann/json\">JSON for Modern C++</a>â€è¿™ä¸ªåº“ã€‚</p><p>JSON for Modern C++å¯èƒ½ä¸æ˜¯æœ€å°æœ€å¿«çš„JSONè§£æå·¥å…·ï¼Œä½†åŠŸèƒ½è¶³å¤Ÿå®Œå–„ï¼Œè€Œä¸”ä½¿ç”¨æ–¹ä¾¿ï¼Œä»…éœ€è¦åŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶â€œjson.hppâ€ï¼Œæ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œä¹Ÿä¸éœ€è¦é¢å¤–çš„å®‰è£…ã€ç¼–è¯‘ã€é“¾æ¥å·¥ä½œï¼Œé€‚åˆå¿«é€Ÿä¸Šæ‰‹å¼€å‘ã€‚</p><p>JSON for Modern C++å¯ä»¥ç”¨â€œgit cloneâ€ä¸‹è½½æºç ï¼Œæˆ–è€…æ›´ç®€å•ä¸€ç‚¹ï¼Œç›´æ¥ç”¨wgetè·å–å¤´æ–‡ä»¶å°±è¡Œï¼š</p><pre><code>git clone git@github.com:nlohmann/json.git    # git clone\nwget https://github.com/nlohmann/json/releases/download/v3.7.3/json.hpp  # wget \n</code></pre><p>JSON for Modern C++ä½¿ç”¨ä¸€ä¸ªjsonç±»æ¥è¡¨ç¤ºJSONæ•°æ®ï¼Œä¸ºäº†é¿å…è¯´çš„æ—¶å€™å¼„æ··ï¼Œæˆ‘ç»™è¿™ä¸ªç±»èµ·äº†ä¸ªåˆ«åjson_tï¼š</p><pre><code>using json_t = nlohmann::json;\n</code></pre><p>json_tçš„åºåˆ—åŒ–åŠŸèƒ½å¾ˆç®€å•ï¼Œå’Œæ ‡å‡†å®¹å™¨mapä¸€æ ·ï¼Œç”¨å…³è”æ•°ç»„çš„â€œ[]â€æ¥æ·»åŠ ä»»æ„æ•°æ®ã€‚</p><p>ä½ ä¸éœ€è¦ç‰¹åˆ«æŒ‡å®šæ•°æ®çš„ç±»å‹ï¼Œå®ƒä¼šè‡ªåŠ¨æ¨å¯¼å‡ºæ°å½“çš„ç±»å‹ã€‚æ¯”å¦‚ï¼Œè¿ç»­å¤šä¸ªâ€œ[]â€å°±æ˜¯åµŒå¥—å¯¹è±¡ï¼Œarrayã€vectoræˆ–è€…èŠ±æ‹¬å·å½¢å¼çš„åˆå§‹åŒ–åˆ—è¡¨å°±æ˜¯JSONæ•°ç»„ï¼Œmapæˆ–è€…æ˜¯èŠ±æ‹¬å·å½¢å¼çš„pairå°±æ˜¯JSONå¯¹è±¡ï¼Œéå¸¸è‡ªç„¶ï¼š</p><pre><code>json_t j;                                   // JSONå¯¹è±¡\n\nj[&quot;age&quot;] = 23;                              // &quot;age&quot;:23\nj[&quot;name&quot;] = &quot;spiderman&quot;;                    // &quot;name&quot;:&quot;spiderman&quot;\nj[&quot;gear&quot;][&quot;suits&quot;] = &quot;2099&quot;;                // &quot;gear&quot;:{&quot;suits&quot;:&quot;2099&quot;}\nj[&quot;jobs&quot;] = {&quot;superhero&quot;};                  // &quot;jobs&quot;:[&quot;superhero&quot;]  \n\nvector&lt;int&gt; v = {1,2,3};                   // vectorå®¹å™¨\nj[&quot;numbers&quot;] = v;                          // &quot;numbers&quot;:[1,2,3]\n\nmap&lt;string, int&gt; m =                       // mapå®¹å™¨\n    {{&quot;one&quot;,1}, {&quot;two&quot;, 2}};               // åˆå§‹åŒ–åˆ—è¡¨ \nj[&quot;kv&quot;] = m;                               // &quot;kv&quot;:{&quot;one&quot;:1,&quot;two&quot;:2}\n</code></pre><p>æ·»åŠ å®Œä¹‹åï¼Œç”¨æˆå‘˜å‡½æ•°dump()å°±å¯ä»¥åºåˆ—åŒ–ï¼Œå¾—åˆ°å®ƒçš„JSONæ–‡æœ¬å½¢å¼ã€‚é»˜è®¤çš„æ ¼å¼æ˜¯ç´§å‡‘è¾“å‡ºï¼Œæ²¡æœ‰ç¼©è¿›ï¼Œå¦‚æœæƒ³è¦æ›´å®¹æ˜“é˜…è¯»çš„è¯ï¼Œå¯ä»¥åŠ ä¸ŠæŒ‡ç¤ºç¼©è¿›çš„å‚æ•°ï¼š</p><pre><code>cout &lt;&lt; j.dump() &lt;&lt; endl;         // åºåˆ—åŒ–ï¼Œæ— ç¼©è¿›\ncout &lt;&lt; j.dump(2) &lt;&lt; endl;        // åºåˆ—åŒ–ï¼Œæœ‰ç¼©è¿›ï¼Œ2ä¸ªç©ºæ ¼\n</code></pre><p>json_tçš„ååºåˆ—åŒ–åŠŸèƒ½åŒæ ·ä¹Ÿå¾ˆç®€å•ï¼Œåªè¦è°ƒç”¨é™æ€æˆå‘˜å‡½æ•°parse()å°±è¡Œï¼Œç›´æ¥å¾—åˆ°JSONå¯¹è±¡ï¼Œè€Œä¸”å¯ä»¥ç”¨autoè‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼š</p><pre><code>string str = R&quot;({                // JSONæ–‡æœ¬ï¼ŒåŸå§‹å­—ç¬¦ä¸²\n    &quot;name&quot;: &quot;peter&quot;,\n    &quot;age&quot; : 23,\n    &quot;married&quot; : true\n})&quot;;\n\nauto j = json_t::parse(str);    // ä»å­—ç¬¦ä¸²ååºåˆ—åŒ–\nassert(j[&quot;age&quot;] == 23);        // éªŒè¯åºåˆ—åŒ–æ˜¯å¦æ­£ç¡®\nassert(j[&quot;name&quot;] == &quot;peter&quot;);\n</code></pre><p>json_tä½¿ç”¨å¼‚å¸¸æ¥å¤„ç†è§£ææ—¶å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œå¦‚æœä½ ä¸èƒ½ä¿è¯JSONæ•°æ®çš„å®Œæ•´æ€§ï¼Œå°±è¦ä½¿ç”¨try-catchæ¥ä¿æŠ¤ä»£ç ï¼Œé˜²æ­¢é”™è¯¯æ•°æ®å¯¼è‡´ç¨‹åºå´©æºƒï¼š</p><pre><code>auto txt = &quot;bad:data&quot;s;        // ä¸æ˜¯æ­£ç¡®çš„JSONæ•°æ®\n\ntry                             // tryä¿æŠ¤ä»£ç \n{\n    auto j = json_t::parse(txt);// ä»å­—ç¬¦ä¸²ååºåˆ—åŒ–\n}\ncatch(std::exception&amp; e)        // æ•è·å¼‚å¸¸\n{\n    cout &lt;&lt; e.what() &lt;&lt; endl;\n}\n</code></pre><p>å¯¹äºé€šå¸¸çš„åº”ç”¨æ¥è¯´ï¼ŒæŒæ¡äº†åŸºæœ¬çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–å°±å¤Ÿç”¨äº†ï¼Œä¸è¿‡JSON for Modern C++é‡Œè¿˜æœ‰å¾ˆå¤šé«˜çº§ç”¨æ³•ï¼Œæ¯”å¦‚SAXã€BSONã€è‡ªå®šä¹‰ç±»å‹è½¬æ¢ç­‰ã€‚å¦‚æœä½ éœ€è¦è¿™äº›åŠŸèƒ½ï¼Œå¯ä»¥å»çœ‹<a href=\"https://github.com/nlohmann/json\">å®ƒçš„æ–‡æ¡£</a>ï¼Œé‡Œé¢å†™å¾—éƒ½å¾ˆè¯¦ç»†ã€‚</p><h2>MessagePack</h2><p>è¯´å®ŒJSONï¼Œå†æ¥è¯´å¦å¤–ç¬¬äºŒç§æ ¼å¼ï¼šMessagePackã€‚</p><p>å®ƒä¹Ÿæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œä¸JSONçš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒä¸æ˜¯çº¯æ–‡æœ¬ï¼Œè€Œæ˜¯äºŒè¿›åˆ¶ã€‚æ‰€ä»¥MessagePackå°±æ¯”JSONæ›´å°å·§ï¼Œå¤„ç†èµ·æ¥æ›´å¿«ï¼Œä¸è¿‡ä¹Ÿå°±æ²¡æœ‰JSONé‚£ä¹ˆç›´è§‚ã€æ˜“è¯»ã€å¥½ä¿®æ”¹äº†ã€‚</p><p>ç”±äºäºŒè¿›åˆ¶è¿™ä¸ªç‰¹ç‚¹ï¼ŒMessagePackä¹Ÿå¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œè‘—åçš„æœ‰Redisã€Pinterestã€‚</p><p>MessagePackæ”¯æŒå‡ ä¹æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€ï¼Œä½ å¯ä»¥åœ¨<a href=\"https://msgpack.org/\">å®˜ç½‘</a>ä¸Šæ‰¾åˆ°å®ƒçš„C++å®ç°ã€‚</p><p>æˆ‘å¸¸ç”¨çš„æ˜¯å®˜æ–¹åº“msgpack-cï¼Œå¯ä»¥ç”¨apt-getç›´æ¥å®‰è£…ã€‚</p><pre><code>apt-get install libmsgpack-dev\n</code></pre><p>ä½†è¿™ç§å®‰è£…æ–¹å¼æœ‰ä¸ªé—®é¢˜ï¼Œå¯èƒ½å‘è¡Œæ–¹ä»“åº“é‡Œçš„æ˜¯è€ç‰ˆæœ¬ï¼ˆåƒUbuntu 16.04å°±æ˜¯0.57ï¼‰ï¼Œç¼ºå¤±å¾ˆå¤šåŠŸèƒ½ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯ä»<a href=\"https://github.com/msgpack/msgpack-c\">GitHub</a>ä¸Šä¸‹è½½æœ€æ–°ç‰ˆï¼Œç¼–è¯‘æ—¶æ‰‹åŠ¨æŒ‡å®šåŒ…å«è·¯å¾„ï¼š</p><pre><code>git clone git@github.com:msgpack/msgpack-c.git\n\ng++ msgpack.cpp -std=c++14 -I../common/include -o a.out\n</code></pre><p>å’ŒJSON for Modern C++ä¸€æ ·ï¼Œmsgpack-cä¹Ÿæ˜¯ä»…å¤´æ–‡ä»¶çš„åº“ï¼ˆhead onlyï¼‰ï¼Œåªè¦åŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶â€œmsgpack.hppâ€å°±è¡Œäº†ï¼Œä¸éœ€è¦é¢å¤–çš„ç¼–è¯‘é“¾æ¥é€‰é¡¹ï¼ˆCç‰ˆæœ¬éœ€è¦ç”¨â€œ-lmsgpackcâ€é“¾æ¥ï¼‰ã€‚</p><p>ä½†MessagePackçš„è®¾è®¡ç†å¿µå’ŒJSONæ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå®ƒæ²¡æœ‰å®šä¹‰JSONé‚£æ ·çš„æ•°æ®ç»“æ„ï¼Œè€Œæ˜¯æ¯”è¾ƒåº•å±‚ï¼Œåªèƒ½å¯¹åŸºæœ¬ç±»å‹å’Œæ ‡å‡†å®¹å™¨åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼Œéœ€è¦ä½ è‡ªå·±å»ç»„ç»‡ã€æ•´ç†è¦åºåˆ—åŒ–çš„æ•°æ®ã€‚</p><p>æˆ‘æ‹¿vectorå®¹å™¨æ¥ä¸¾ä¸ªä¾‹å­ï¼Œè°ƒç”¨pack()å‡½æ•°åºåˆ—åŒ–ä¸ºMessagePackæ ¼å¼ï¼š</p><pre><code>vector&lt;int&gt; v = {1,2,3,4,5};              // vectorå®¹å™¨\n\nmsgpack::sbuffer sbuf;                    // è¾“å‡ºç¼“å†²åŒº\nmsgpack::pack(sbuf, v);                   // åºåˆ—åŒ–\n</code></pre><p>ä»ä»£ç é‡Œä½ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒçš„ç”¨æ³•ä¸åƒJSONé‚£ä¹ˆç®€å•ç›´è§‚ï¼Œ<strong>å¿…é¡»åŒæ—¶ä¼ é€’åºåˆ—åŒ–çš„è¾“å‡ºç›®æ ‡å’Œè¢«åºåˆ—åŒ–çš„å¯¹è±¡</strong>ã€‚</p><p>è¾“å‡ºç›®æ ‡sbufferæ˜¯ä¸ªç®€å•çš„ç¼“å†²åŒºï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£æˆæ˜¯å¯¹å­—ç¬¦ä¸²æ•°ç»„çš„å°è£…ï¼Œå’Œ<code>vector&lt;char&gt;</code>å¾ˆåƒï¼Œä¹Ÿå¯ä»¥ç”¨data()å’Œsize()æ–¹æ³•è·å–å†…éƒ¨çš„æ•°æ®å’Œé•¿åº¦ã€‚</p><pre><code>cout &lt;&lt; sbuf.size() &lt;&lt; endl;            // æŸ¥çœ‹åºåˆ—åŒ–åæ•°æ®çš„é•¿åº¦\n</code></pre><p>é™¤äº†sbufferï¼Œä½ è¿˜å¯ä»¥é€‰æ‹©å¦å¤–çš„zbufferã€fbufferã€‚å®ƒä»¬æ˜¯å‹ç¼©è¾“å‡ºå’Œæ–‡ä»¶è¾“å‡ºï¼Œå’Œsbufferåªæ˜¯æ ¼å¼ä¸åŒï¼Œç”¨æ³•æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥åé¢æˆ‘å°±éƒ½ç”¨sbufferæ¥ä¸¾ä¾‹è¯´æ˜ã€‚</p><p>MessagePackååºåˆ—åŒ–çš„æ—¶å€™ç•¥å¾®éº»çƒ¦ä¸€äº›ï¼Œè¦ç”¨åˆ°å‡½æ•°unpack()å’Œä¸¤ä¸ªæ ¸å¿ƒç±»ï¼šobject_handleå’Œobjectã€‚</p><p>å‡½æ•°unpack()ååºåˆ—åŒ–æ•°æ®ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªobject_handleï¼Œå†è°ƒç”¨get()ï¼Œå°±æ˜¯objectï¼š</p><pre><code>auto handle = msgpack::unpack(          // ååºåˆ—åŒ–\n            sbuf.data(), sbuf.size());  // è¾“å…¥äºŒè¿›åˆ¶æ•°æ®\nauto obj = handle.get();                // å¾—åˆ°ååºåˆ—åŒ–å¯¹è±¡\n</code></pre><p>è¿™ä¸ªobjectæ˜¯MessagePackå¯¹æ•°æ®çš„å°è£…ï¼Œç›¸å½“äºJSON for Modern C++çš„JSONå¯¹è±¡ï¼Œä½†ä½ ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¿…é¡»çŸ¥é“æ•°æ®çš„åŸå§‹ç±»å‹ï¼Œæ‰èƒ½è½¬æ¢è¿˜åŸï¼š</p><pre><code>vector&lt;int&gt; v2;                       // vectorå®¹å™¨\nobj.convert(v2);                      // è½¬æ¢ååºåˆ—åŒ–çš„æ•°æ®\n\nassert(std::equal(                    // ç®—æ³•æ¯”è¾ƒä¸¤ä¸ªå®¹å™¨\n      begin(v), end(v), begin(v2)));\n</code></pre><p>å› ä¸ºMessagePackä¸èƒ½ç›´æ¥æ‰“åŒ…å¤æ‚æ•°æ®ï¼Œæ‰€ä»¥ç”¨èµ·æ¥å°±æ¯”JSONéº»çƒ¦ä¸€äº›ï¼Œä½ å¿…é¡»è‡ªå·±æŠŠæ•°æ®é€ä¸ªåºåˆ—åŒ–ï¼Œè¿åœ¨ä¸€èµ·æ‰è¡Œã€‚</p><p>å¥½åœ¨MessagePackåˆæä¾›äº†ä¸€ä¸ªpackerç±»ï¼Œå¯ä»¥å®ç°ä¸²è”çš„åºåˆ—åŒ–æ“ä½œï¼Œç®€åŒ–ä»£ç ï¼š</p><pre><code>msgpack::sbuffer sbuf;                         // è¾“å‡ºç¼“å†²åŒº\nmsgpack::packer&lt;decltype(sbuf)&gt; packer(sbuf);  // ä¸“é—¨çš„åºåˆ—åŒ–å¯¹è±¡\n\npacker.pack(10).pack(&quot;monado&quot;s)                // è¿ç»­åºåˆ—åŒ–å¤šä¸ªæ•°æ®\n      .pack(vector&lt;int&gt;{1,2,3});\n</code></pre><p>å¯¹äºå¤šä¸ªå¯¹è±¡è¿ç»­åºåˆ—åŒ–åçš„æ•°æ®ï¼Œååºåˆ—åŒ–çš„æ—¶å€™å¯ä»¥ç”¨ä¸€ä¸ªåç§»é‡ï¼ˆoffsetï¼‰å‚æ•°æ¥åŒæ ·è¿ç»­æ“ä½œï¼š</p><pre><code>for(decltype(sbuf.size()) offset = 0;          // åˆå§‹åç§»é‡æ˜¯0\n    offset != sbuf.size();){                   // ç›´è‡³ååºåˆ—åŒ–ç»“æŸ\n\n    auto handle = msgpack::unpack(            // ååºåˆ—åŒ–\n            sbuf.data(), sbuf.size(), offset);  // è¾“å…¥äºŒè¿›åˆ¶æ•°æ®å’Œåç§»é‡\n    auto obj = handle.get();                  // å¾—åˆ°ååºåˆ—åŒ–å¯¹è±¡\n}\n</code></pre><p>ä½†è¿™æ ·è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œèƒ½ä¸èƒ½åƒJSONé‚£æ ·ï¼Œç›´æ¥å¯¹ç±»å‹åºåˆ—åŒ–å’Œååºåˆ—åŒ–å‘¢ï¼Ÿ</p><p>MessagePackä¸ºæ­¤æä¾›äº†ä¸€ä¸ªç‰¹åˆ«çš„å®ï¼šMSGPACK_DEFINEï¼ŒæŠŠå®ƒæ”¾è¿›ä½ çš„ç±»å®šä¹‰é‡Œï¼Œå°±å¯ä»¥åƒæ ‡å‡†ç±»å‹ä¸€æ ·è¢«MessagePackå¤„ç†ã€‚</p><p>ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„Bookç±»ï¼š</p><pre><code>class Book final                       // è‡ªå®šä¹‰ç±»\n{\npublic:\n    int         id;\n    string      title;\n    set&lt;string&gt; tags;\npublic:\n    MSGPACK_DEFINE(id, title, tags);   // å®ç°åºåˆ—åŒ–åŠŸèƒ½çš„å®\n};\n</code></pre><p>å®ƒå¯ä»¥ç›´æ¥ç”¨äºpack()å’Œunpack()ï¼ŒåŸºæœ¬ä¸Šå’ŒJSONå·®ä¸å¤šäº†ï¼š</p><pre><code>Book book1 = {1, &quot;1984&quot;, {&quot;a&quot;,&quot;b&quot;}};  // è‡ªå®šä¹‰ç±»\n\nmsgpack::sbuffer sbuf;                    // è¾“å‡ºç¼“å†²åŒº\nmsgpack::pack(sbuf, book1);              // åºåˆ—åŒ–\n\nauto obj = msgpack::unpack(              // ååºåˆ—åŒ–\n      sbuf.data(), sbuf.size()).get();   // å¾—åˆ°ååºåˆ—åŒ–å¯¹è±¡\n\nBook book2;\nobj.convert(book2);                      // è½¬æ¢ååºåˆ—åŒ–çš„æ•°æ®\n\nassert(book2.id == book1.id);\nassert(book2.tags.size() == 2);\ncout &lt;&lt; book2.title &lt;&lt; endl;\n</code></pre><p>ä½¿ç”¨MessagePackçš„æ—¶å€™ï¼Œä½ ä¹Ÿè¦æ³¨æ„æ•°æ®ä¸å®Œæ•´çš„é—®é¢˜ï¼Œå¿…é¡»è¦ç”¨try-catchæ¥ä¿æŠ¤ä»£ç ï¼Œæ•è·å¼‚å¸¸ï¼š</p><pre><code>auto txt = &quot;&quot;s;                      // ç©ºæ•°æ®\ntry                                  // tryä¿æŠ¤ä»£ç \n{\n    auto handle = msgpack::unpack(   // ååºåˆ—åŒ–\n        txt.data(), txt.size());\n}\ncatch(std::exception&amp; e)            // æ•è·å¼‚å¸¸\n{\n    cout &lt;&lt; e.what() &lt;&lt; endl;\n}\n</code></pre><h2>ProtoBuffer</h2><p>ç¬¬ä¸‰ä¸ªè¦è¯´çš„åº“å°±æ˜¯è‘—åçš„<a href=\"https://github.com/protocolbuffers/protobuf\">ProtoBuffer</a>ï¼Œé€šå¸¸ç®€ç§°ä¸ºPBï¼Œç”±Googleå‡ºå“ã€‚</p><p>PBä¹Ÿæ˜¯ä¸€ç§äºŒè¿›åˆ¶çš„æ•°æ®æ ¼å¼ï¼Œä½†æ¯•ç«Ÿæ˜¯å·¥ä¸šçº§äº§å“ï¼Œæ‰€ä»¥æ²¡æœ‰JSONå’ŒMessagePacké‚£ä¹ˆâ€œè½»â€ï¼Œç›¸å…³çš„ä¸œè¥¿æ¯”è¾ƒå¤šï¼Œè¦å®‰è£…ä¸€ä¸ªé¢„å¤„ç†å™¨å’Œå¼€å‘åº“ï¼Œç¼–è¯‘æ—¶è¿˜è¦é“¾æ¥åŠ¨æ€åº“ï¼ˆ-lprotobufï¼‰ï¼š</p><pre><code>apt-get install protobuf-compiler\napt-get install libprotobuf-dev\n\ng++ protobuf.cpp -std=c++14 -lprotobuf -o a.out\n</code></pre><p><strong>PBçš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯æ•°æ®æœ‰â€œæ¨¡å¼â€ï¼ˆschemaï¼‰</strong>ï¼Œå¿…é¡»è¦å…ˆå†™ä¸€ä¸ªIDLï¼ˆInterface Description Languageï¼‰æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å®šä¹‰å¥½æ•°æ®ç»“æ„ï¼Œåªæœ‰é¢„å…ˆå®šä¹‰äº†çš„æ•°æ®ç»“æ„ï¼Œæ‰èƒ½è¢«åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><p>è¿™ä¸ªç‰¹ç‚¹æ—¢æœ‰å¥½å¤„ä¹Ÿæœ‰åå¤„ï¼šä¸€æ–¹é¢ï¼Œæ¥å£å°±æ˜¯æ¸…æ™°æ˜ç¡®çš„è§„èŒƒæ–‡æ¡£ï¼Œæ²Ÿé€šäº¤æµç®€å•æ— æ­§ä¹‰ï¼›è€Œå¦ä¸€æ–¹é¢ï¼Œå°±æ˜¯ç¼ºä¹çµæ´»æ€§ï¼Œæ”¹æ¥å£ä¼šå¯¼è‡´ä¸€è¿ä¸²çš„æ“ä½œï¼Œæœ‰ç‚¹ç¹çã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„PBå®šä¹‰ï¼š</p><pre><code>syntax = &quot;proto2&quot;;                    // ä½¿ç”¨ç¬¬2ç‰ˆ\n\npackage sample;                        // å®šä¹‰åå­—ç©ºé—´\n\nmessage Vendor                        // å®šä¹‰æ¶ˆæ¯\n{\n    required uint32     id      = 1;  // requiredè¡¨ç¤ºå¿…é¡»å­—æ®µ\n    required string     name    = 2;  // æœ‰int32/stringç­‰åŸºæœ¬ç±»å‹\n    required bool       valid   = 3;  // éœ€è¦æŒ‡å®šå­—æ®µçš„åºå·ï¼Œåºåˆ—åŒ–æ—¶ç”¨\n    optional string     tel     = 4;  // optionalå­—æ®µå¯ä»¥æ²¡æœ‰\n}\n</code></pre><p>æœ‰äº†æ¥å£å®šä¹‰æ–‡ä»¶ï¼Œéœ€è¦å†ç”¨protocå·¥å…·ç”Ÿæˆå¯¹åº”çš„C++æºç ï¼Œç„¶åæŠŠæºç æ–‡ä»¶åŠ å…¥è‡ªå·±çš„é¡¹ç›®ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ï¼š</p><pre><code>protoc --cpp_out=. sample.proto       // ç”ŸæˆC++ä»£ç \n</code></pre><p>ç”±äºPBç›¸å…³çš„èµ„æ–™å®åœ¨å¤ªå¤šäº†ï¼Œè¿™é‡Œæˆ‘å°±åªç®€å•è¯´ä¸€ä¸‹é‡è¦çš„æ¥å£ï¼š</p><ul>\n<li>å­—æ®µåä¼šç”Ÿæˆå¯¹åº”çš„has/setå‡½æ•°ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨å’Œè®¾ç½®å€¼ï¼›</li>\n<li>IsInitialized()æ£€æŸ¥æ•°æ®æ˜¯å¦å®Œæ•´ï¼ˆrequiredå­—æ®µå¿…é¡»æœ‰å€¼ï¼‰ï¼›</li>\n<li>DebugString()è¾“å‡ºæ•°æ®çš„å¯è¯»å­—ç¬¦ä¸²æè¿°ï¼›</li>\n<li>ByteSize()è¿”å›åºåˆ—åŒ–æ•°æ®çš„é•¿åº¦ï¼›</li>\n<li>SerializeToString()ä»å¯¹è±¡åºåˆ—åŒ–åˆ°å­—ç¬¦ä¸²ï¼›</li>\n<li>ParseFromString()ä»å­—ç¬¦ä¸²ååºåˆ—åŒ–åˆ°å¯¹è±¡ï¼›</li>\n<li>SerializeToArray()/ParseFromArray()åºåˆ—åŒ–çš„ç›®æ ‡æ˜¯å­—èŠ‚æ•°ç»„ã€‚</li>\n</ul><p>ä¸‹é¢çš„ä»£ç ç¤ºèŒƒäº†PBçš„ç”¨æ³•ï¼š</p><pre><code>using vendor_t = sample::Vendor;        // ç±»å‹åˆ«å\n\nvendor_t v;                             // å£°æ˜ä¸€ä¸ªPBå¯¹è±¡\nassert(!v.IsInitialized());            // requiredç­‰å­—æ®µæœªåˆå§‹åŒ–\n\nv.set_id(1);                            // è®¾ç½®æ¯ä¸ªå­—æ®µçš„å€¼    \nv.set_name(&quot;sony&quot;);\nv.set_valid(true);\n\nassert(v.IsInitialized());             // requiredç­‰å­—æ®µéƒ½è®¾ç½®äº†ï¼Œæ•°æ®å®Œæ•´\nassert(v.has_id() &amp;&amp; v.id() == 1); \nassert(v.has_name() &amp;&amp; v.name() == &quot;sony&quot;);\nassert(v.has_valid() &amp;&amp; v.valid());\n\ncout &lt;&lt; v.DebugString() &lt;&lt; endl;       // è¾“å‡ºè°ƒè¯•å­—ç¬¦ä¸²\n\nstring enc;\nv.SerializeToString(&amp;enc);              // åºåˆ—åŒ–åˆ°å­—ç¬¦ä¸² \n\nvendor_t v2; \nassert(!v2.IsInitialized());\nv2.ParseFromString(enc);               // ååºåˆ—åŒ–\n</code></pre><p>è™½ç„¶ä¸šç•Œå¾ˆå¤šå¤§å‚éƒ½åœ¨ä½¿ç”¨PBï¼Œä½†æˆ‘è§‰å¾—å®ƒçœŸä¸èƒ½ç®—æ˜¯æœ€å¥½çš„ï¼ŒIDLå®šä¹‰å’Œæ¥å£éƒ½å¤ªæ­»æ¿ç”Ÿç¡¬ï¼Œè¿˜åªèƒ½ç”¨æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä¸æ”¯æŒæ ‡å‡†å®¹å™¨ï¼Œåœ¨ç°ä»£C++é‡Œæ˜¾å¾—â€œä¸å¤ªåˆç¾¤â€ï¼Œç”¨èµ·æ¥æœ‰ç‚¹åˆ«æ‰­ã€‚</p><p>ä¸è¿‡å®ƒåé¢æœ‰Googleâ€œæ’‘è…°â€ï¼Œè€Œä¸”æœ€è¿‘å‡ å¹´åˆæœ‰gRPCâ€œåŠ©æ‹³â€ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™ä¹Ÿä¸å¾—ä¸ç”¨ã€‚</p><p>PBçš„å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯å®˜æ–¹æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€å¤ªå°‘ï¼Œé€šç”¨æ€§è¾ƒå·®ï¼Œæœ€å¸¸ç”¨çš„proto2åªæœ‰C++ã€Javaå’ŒPythonã€‚åæ¥çš„proto3å¢åŠ äº†å¯¹Goã€Rubyç­‰çš„æ”¯æŒï¼Œä½†ä»ç„¶ä¸èƒ½å’ŒJSONã€MessagePackç›¸æ¯”ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©æˆ‘è®²äº†ä¸‰ç§æ•°æ®äº¤æ¢æ ¼å¼ï¼šJSONã€MessagePackå’ŒProtoBufferã€‚</p><p>è¿™ä¸‰ç§æ•°æ®æ ¼å¼å„æœ‰ç‰¹è‰²ï¼Œåœ¨å¾ˆå¤šé¢†åŸŸéƒ½å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œæˆ‘æ¥ç®€å•å°ç»“ä¸€ä¸‹ï¼š</p><ol>\n<li>JSONæ˜¯çº¯æ–‡æœ¬ï¼Œå®¹æ˜“é˜…è¯»ï¼Œæ–¹ä¾¿ç¼–è¾‘ï¼Œé€‚ç”¨æ€§æœ€å¹¿ï¼›</li>\n<li>MessagePackæ˜¯äºŒè¿›åˆ¶ï¼Œå°å·§é«˜æ•ˆï¼Œåœ¨å¼€æºç•Œæ¥å—ç¨‹åº¦æ¯”è¾ƒé«˜ï¼›</li>\n<li>ProtoBufferæ˜¯å·¥ä¸šçº§çš„æ•°æ®æ ¼å¼ï¼Œæ³¨é‡å®‰å…¨å’Œæ€§èƒ½ï¼Œå¤šç”¨åœ¨å¤§å…¬å¸çš„å•†ä¸šäº§å“é‡Œã€‚</li>\n</ol><p>æœ‰å¾ˆå¤šå¼€æºåº“æ”¯æŒè¿™äº›æ•°æ®æ ¼å¼ï¼Œå®˜æ–¹çš„ã€æ°‘é—´çš„éƒ½æœ‰ï¼Œä½ åº”è¯¥é€‰æ‹©é€‚åˆè‡ªå·±çš„é«˜è´¨é‡åº“ï¼Œå¿…è¦çš„æ—¶å€™å¯ä»¥åšäº›æµ‹è¯•ã€‚</p><p>å†è¡¥å……ä¸€ç‚¹ï¼Œé™¤äº†ä»Šå¤©è¯´çš„è¿™ä¸‰ç§ï¼Œä½ è¿˜å¯ä»¥å°è¯•å…¶ä»–çš„æ•°æ®æ ¼å¼ï¼Œæ¯”è¾ƒçŸ¥åçš„æœ‰Avroã€Thriftï¼Œè™½ç„¶å®ƒä»¬æœ‰ç‚¹å†·é—¨ï¼Œä½†ä¹Ÿæœ‰è‡ªå·±çš„ç‹¬åˆ°ä¹‹å¤„ï¼ˆæ¯”å¦‚ï¼Œå¤©ç”Ÿæ”¯æŒRPCã€å¯é€‰æ‹©å¤šç§åºåˆ—åŒ–æ ¼å¼å’Œä¼ è¾“æ–¹å¼ï¼‰ã€‚</p><h2>è¯¾ä¸‹ä½œä¸š</h2><p>æœ€åæ˜¯è¯¾ä¸‹ä½œä¸šæ—¶é—´ï¼Œç»™ä½ ç•™ä¸¤ä¸ªæ€è€ƒé¢˜ï¼š</p><ol>\n<li>ä¸ºä»€ä¹ˆè¦æœ‰åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œç›´æ¥memcpyå†…å­˜æ•°æ®è¡Œä¸è¡Œå‘¢ï¼Ÿ</li>\n<li>ä½ æœ€å¸¸ç”¨çš„æ˜¯å“ªç§æ•°æ®æ ¼å¼ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œå¦‚æœè§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/f1/a39719e615f1124d60b5b9ca51b88cf1.png?wh=2000*3396\" alt=\"\"></p>","comments":[{"had_liked":false,"id":225148,"user_name":"è¢«è®¨åŒçš„å‹‡æ°”","can_delete":false,"product_type":"c1","uid":1547913,"ip_address":"","ucode":"AE3B3CA27D91A2","user_header":"https://static001.geekbang.org/account/avatar/00/17/9e/89/6e9c05d6.jpg","comment_is_top":false,"comment_ctime":1591667207,"is_pvip":false,"replies":[{"id":"82875","content":"è¯´çš„å¾ˆå¯¹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":225148,"uid":"1181974","ip_address":"","utype":1,"ctime":1591668031,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"130440686087","product_id":100051801,"comment_content":"ç›´æ¥memcpy,åŒä¸€ç§è¯­è¨€ä¸åŒæœºå™¨ï¼Œæˆ–è€…ä¸åŒè¯­è¨€å¯èƒ½å­˜åœ¨å…¼å®¹é—®é¢˜(å˜é‡å†…å­˜å­˜å‚¨å¸ƒå±€ã€ç¼–ç å¯èƒ½ä¸åŒ)ï¼Œè€ŒJsonæ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”±Jsonåº“å¤„ç†ç¼–ç é—®é¢˜(æ¯”å¦‚å¤§å°ç«¯)ï¼Œä¸”ä¸åŒè¯­è¨€é—´ç»Ÿä¸€ï¼Œå¯¹å¤´ä¸ï¼Ÿ","like_count":31,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497753,"discussion_content":"è¯´çš„å¾ˆå¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591668031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226104,"user_name":"è“é…é¸¡","can_delete":false,"product_type":"c1","uid":1348738,"ip_address":"","ucode":"C79A7CA8885B7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/94/82/d0a417ba.jpg","comment_is_top":false,"comment_ctime":1591952031,"is_pvip":false,"replies":[{"id":"83320","content":"æˆ‘è§‰å¾—å¯ä»¥å°èŒƒå›´æ¨å¹¿ä¸€ä¸‹ï¼Œä»¥åæ²¡å‡†ä¼šæµè¡Œèµ·æ¥ï¼Œç¬‘ã€‚","user_name":"ä½œè€…å›å¤","comment_id":226104,"uid":"1181974","ip_address":"","utype":1,"ctime":1592003990,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"44541624991","product_id":100051801,"comment_content":"åºåˆ—åŒ–&#47;ååºåˆ—åŒ–å‘½åå°±ç”¨ â€œè„±æ°´&#47;æµ¸æ³¡â€ï¼Œ ä¼šä¸ä¼šè¢«æ‰“æ­»- -","like_count":10,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498107,"discussion_content":"æˆ‘è§‰å¾—å¯ä»¥å°èŒƒå›´æ¨å¹¿ä¸€ä¸‹ï¼Œä»¥åæ²¡å‡†ä¼šæµè¡Œèµ·æ¥ï¼Œç¬‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592003990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225405,"user_name":"java2c++","can_delete":false,"product_type":"c1","uid":1460660,"ip_address":"","ucode":"C4F8C3D7B1A910","user_header":"","comment_is_top":false,"comment_ctime":1591751491,"is_pvip":false,"replies":[{"id":"83036","content":"å¾ˆå¥½çš„ç»éªŒåˆ†äº«ï¼Œjsonä¸»è¦æ˜¯å¯¹äººå‹å¥½ï¼Œç”¨æ¥åšäººæœºæ¥å£å¾ˆåˆé€‚ã€‚","user_name":"ä½œè€…å›å¤","comment_id":225405,"uid":"1181974","ip_address":"","utype":1,"ctime":1591755926,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"40246457155","product_id":100051801,"comment_content":"é—®é¢˜2:å’Œredisäº¤äº’ä¸€èˆ¬ä½¿ç”¨jsonï¼Œä¸»è¦åŸå› æ˜¯å¯è¯»æ€§å¼ºï¼Œæœ‰é—®é¢˜æ—¶ç›´æ¥ç™»å½•åˆ°redisæ§åˆ¶å°å¯ä»¥æŸ¥çœ‹jsonå†…å®¹ï¼Œä¸è¿‡åºåˆ—åŒ–éœ€è¦çš„æ—¶é—´æˆæœ¬ç©ºé—´æˆæœ¬éƒ½æ˜¯æœ€é«˜ï¼Œå¦‚æœè¿½æ±‚æ€§èƒ½å°±éœ€è¦é€‰æ‹©å…¶ä»–çš„äº†ã€‚<br>ç°åœ¨ä¸€äº›ç½‘ç»œæ¡†æ¶ï¼ˆrpcæ¡†æ¶ï¼‰éƒ½æ”¯æŒå¤šç§åºåˆ—åŒ–çš„æ–¹å¼äº†ï¼Œmsgpackï¼Œthiftè·¨è¯­è¨€æ”¯æŒçš„æ¯”è¾ƒå¥½ï¼Œæ€§èƒ½ä¹Ÿä¸é”™æˆ‘å·¥ä½œä¸­ç›¸å¯¹ç”¨çš„å¤šä¸€äº›","like_count":10,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497840,"discussion_content":"å¾ˆå¥½çš„ç»éªŒåˆ†äº«ï¼Œjsonä¸»è¦æ˜¯å¯¹äººå‹å¥½ï¼Œç”¨æ¥åšäººæœºæ¥å£å¾ˆåˆé€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591755926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229691,"user_name":"é£","can_delete":false,"product_type":"c1","uid":1444483,"ip_address":"","ucode":"E1CE0825AAF805","user_header":"https://static001.geekbang.org/account/avatar/00/16/0a/83/f916f903.jpg","comment_is_top":false,"comment_ctime":1593099627,"is_pvip":false,"replies":[{"id":"84758","content":"å¯¹ï¼Œjsonæ˜¯å­—ç¬¦ä¸²çš„æ–‡æœ¬å½¢å¼ï¼Œæ•°å­—ä¹Ÿè¡¨ç¤ºæˆäº†æ–‡æœ¬ï¼Œä¸éœ€è¦è€ƒè™‘å¤§å°ç«¯é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":229691,"uid":"1181974","ip_address":"","utype":1,"ctime":1593127358,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"27362903403","product_id":100051801,"comment_content":"jsonä¸å­˜åœ¨å¤§å°ç«¯ï¼Œå­—èŠ‚åºçš„é—®é¢˜å§ï¼Œåæ­£å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚messagepackè¿™ç§äºŒè¿›åˆ¶æ ¼å¼çš„ä¸œè¥¿ï¼Œæ‰è¦è€ƒè™‘å¤§å°ç«¯ã€‚","like_count":7,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499594,"discussion_content":"å¯¹ï¼Œjsonæ˜¯å­—ç¬¦ä¸²çš„æ–‡æœ¬å½¢å¼ï¼Œæ•°å­—ä¹Ÿè¡¨ç¤ºæˆäº†æ–‡æœ¬ï¼Œä¸éœ€è¦è€ƒè™‘å¤§å°ç«¯é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593127358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225924,"user_name":"hy","can_delete":false,"product_type":"c1","uid":1580046,"ip_address":"","ucode":"7D492373043C96","user_header":"https://static001.geekbang.org/account/avatar/00/18/1c/0e/f2954d1c.jpg","comment_is_top":false,"comment_ctime":1591891009,"is_pvip":false,"replies":[{"id":"83248","content":"pbå¥½åƒç¡®å®æœ‰é™åˆ¶ï¼Œæˆ‘è®°å¾—å¥½åƒæ˜¯64mbè¿˜æ˜¯512mbï¼Œä¸æ˜¯å¾ˆç¡®å®šã€‚<br><br>è¿™ä¹Ÿæ˜¯å¾ˆåˆç†çš„è€ƒè™‘ï¼Œå¦‚æœæœ‰è¶…å¤§å¯¹è±¡ï¼Œæ˜¯ä¸æ˜¯è¦åæ€ä¸€ä¸‹è®¾è®¡çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤§çš„å¯¹è±¡ï¼Œèƒ½å¦ä¼˜åŒ–ã€‚","user_name":"ä½œè€…å›å¤","comment_id":225924,"uid":"1181974","ip_address":"","utype":1,"ctime":1591924266,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"23066727489","product_id":100051801,"comment_content":"pbæœ‰2Gå†…å­˜é™åˆ¶é—®é¢˜ï¼Œå¦‚æœå¯¹è±¡è¿‡å¤§ä¼šä¸è¡Œ","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498046,"discussion_content":"pbå¥½åƒç¡®å®æœ‰é™åˆ¶ï¼Œæˆ‘è®°å¾—å¥½åƒæ˜¯64mbè¿˜æ˜¯512mbï¼Œä¸æ˜¯å¾ˆç¡®å®šã€‚\n\nè¿™ä¹Ÿæ˜¯å¾ˆåˆç†çš„è€ƒè™‘ï¼Œå¦‚æœæœ‰è¶…å¤§å¯¹è±¡ï¼Œæ˜¯ä¸æ˜¯è¦åæ€ä¸€ä¸‹è®¾è®¡çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤§çš„å¯¹è±¡ï¼Œèƒ½å¦ä¼˜åŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591924266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225401,"user_name":"java2c++","can_delete":false,"product_type":"c1","uid":1460660,"ip_address":"","ucode":"C4F8C3D7B1A910","user_header":"","comment_is_top":false,"comment_ctime":1591751036,"is_pvip":false,"replies":[{"id":"83038","content":"è¿™æ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ç›®çš„ï¼Œä½†è¿˜æ²¡æœ‰è¯´åˆ°æ ¹æœ¬ä¸Šï¼Œå¦‚æœå•çº¯çš„memcpyï¼Œä¹Ÿæ˜¯å¯ä»¥è½¬æ¢æˆå­—èŠ‚æµçš„ã€‚<br><br>å¯ä»¥å‚è€ƒå…¶ä»–åŒå­¦çš„ç•™è¨€ã€‚","user_name":"ä½œè€…å›å¤","comment_id":225401,"uid":"1181974","ip_address":"","utype":1,"ctime":1591756065,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"14476652924","product_id":100051801,"comment_content":"é—®é¢˜1:é’ˆå¯¹è·¨æœåŠ¡é—´çš„è°ƒç”¨ï¼Œæ¶‰åŠåˆ°ç½‘ç»œä¼ è¾“ï¼Œéœ€è¦ä½¿ç”¨åˆ°å­—èŠ‚æµè¿›è¡Œä¼ è¾“ï¼Œåºåˆ—åŒ–å°±æ˜¯å‘é€æ–¹å°†æ•°æ®å¯¹è±¡è½¬åŒ–æˆå­—èŠ‚æµçš„è¿‡ç¨‹ï¼Œååºåˆ—å°±æ˜¯æ¥æ”¶æ–¹å°†å­—èŠ‚æµè½¬åŒ–æˆæ•°æ®å¯¹è±¡çš„é€†è¿‡ç¨‹","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497836,"discussion_content":"è¿™æ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ç›®çš„ï¼Œä½†è¿˜æ²¡æœ‰è¯´åˆ°æ ¹æœ¬ä¸Šï¼Œå¦‚æœå•çº¯çš„memcpyï¼Œä¹Ÿæ˜¯å¯ä»¥è½¬æ¢æˆå­—èŠ‚æµçš„ã€‚\n\nå¯ä»¥å‚è€ƒå…¶ä»–åŒå­¦çš„ç•™è¨€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591756065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229688,"user_name":"Why not.","can_delete":false,"product_type":"c1","uid":1788706,"ip_address":"","ucode":"2588F0411F6F34","user_header":"https://static001.geekbang.org/account/avatar/00/1b/4b/22/10df9727.jpg","comment_is_top":false,"comment_ctime":1593099003,"is_pvip":false,"replies":[{"id":"84759","content":"jsoncppæ¯”è¾ƒè€äº†ï¼Œä¸æ˜¯é‚£ä¹ˆâ€œç°ä»£â€ï¼Œä½†ç”¨èµ·æ¥ä¹Ÿè¿˜å¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","comment_id":229688,"uid":"1181974","ip_address":"","utype":1,"ctime":1593127395,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"10183033595","product_id":100051801,"comment_content":"jsoncpp ä¹ŸæŒºå¥½ç”¨çš„ ä¸çŸ¥é“è€å¸ˆæ€ä¹ˆçœ‹","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499593,"discussion_content":"jsoncppæ¯”è¾ƒè€äº†ï¼Œä¸æ˜¯é‚£ä¹ˆâ€œç°ä»£â€ï¼Œä½†ç”¨èµ·æ¥ä¹Ÿè¿˜å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593127395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225244,"user_name":"EncodedStar","can_delete":false,"product_type":"c1","uid":1504234,"ip_address":"","ucode":"03958CA7DDD6AE","user_header":"https://static001.geekbang.org/account/avatar/00/16/f3/ea/2b2adda5.jpg","comment_is_top":false,"comment_ctime":1591692506,"is_pvip":false,"replies":[{"id":"82991","content":"<br>1.åºåˆ—åŒ–ä¸æ˜¯ç®€å•çš„memcpyï¼Œæœ‰ç‚¹ç±»ä¼¼æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å»ç¼–ç è§£ç ï¼Œå±è”½äº†ç¡¬ä»¶ä½“ç³»æ¶æ„ã€è¯­è¨€çš„å·®å¼‚ï¼Œæ˜¯ä¸€ç§é€šç”¨çš„æ ¼å¼ã€‚<br><br>2.jsonæˆ‘è§‰å¾—è¿˜è¡Œå§ï¼Œç”¨è½¬ä¹‰ç¬¦é‚£æ˜¯æ²¡åŠæ³•ï¼ŒCçš„è€é—®é¢˜äº†ã€‚pbç¡®å®æ“ä½œèµ·æ¥å¾ˆéº»çƒ¦ï¼Œç´¯ã€‚","user_name":"ä½œè€…å›å¤","comment_id":225244,"uid":"1181974","ip_address":"","utype":1,"ctime":1591751308,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"10181627098","product_id":100051801,"comment_content":"åºåˆ—åŒ–å’Œååºåˆ—åŒ– å¯ä»¥æŒ‰ç”¨æˆ·è‡ªå®šä¹‰çš„æ–¹å¼å»è¯»å–å§ï¼Œåº•å±‚åº”è¯¥ä¹Ÿæ˜¯ç”¨ç±»ä¼¼memcpyè¿™æ ·çš„æ“ä½œå»å¤„ç†é‡Œï¼Œåªä¸è¿‡æ˜¯åˆå°è£…äº†ä¸€æ¬¡ç»Ÿä¸€æ¥å£æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ï¼Œè€å¸ˆï¼Œæˆ‘å¯ä»¥è¿™ä¹ˆç†è§£å—ï¼Ÿï¼Ÿ<br>å¸¸ç”¨json å’Œ pb ï¼Œæ„Ÿè§‰å°±æ˜¯jsonå¯¹C++ä¸æ˜¯å¾ˆå‹å¥½ï¼Œå¾ˆå¤šæ—¶å€™æœ‰\\è½¬ä¹‰ç¬¦å›°æ‰°ï¼Œpbå°±æ˜¯æ¯æ¬¡æ¯”è¾ƒéº»çƒ¦ï¼Œæ”¹äº†åè®®ä¹‹åè¿˜çš„ç”Ÿæˆä¸€ä¸‹å¯¹åº”æ–‡ä»¶","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497783,"discussion_content":"\n1.åºåˆ—åŒ–ä¸æ˜¯ç®€å•çš„memcpyï¼Œæœ‰ç‚¹ç±»ä¼¼æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å»ç¼–ç è§£ç ï¼Œå±è”½äº†ç¡¬ä»¶ä½“ç³»æ¶æ„ã€è¯­è¨€çš„å·®å¼‚ï¼Œæ˜¯ä¸€ç§é€šç”¨çš„æ ¼å¼ã€‚\n\n2.jsonæˆ‘è§‰å¾—è¿˜è¡Œå§ï¼Œç”¨è½¬ä¹‰ç¬¦é‚£æ˜¯æ²¡åŠæ³•ï¼ŒCçš„è€é—®é¢˜äº†ã€‚pbç¡®å®æ“ä½œèµ·æ¥å¾ˆéº»çƒ¦ï¼Œç´¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591751308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312213,"user_name":"äºå°å’¸","can_delete":false,"product_type":"c1","uid":1640946,"ip_address":"","ucode":"833D5E92016430","user_header":"https://static001.geekbang.org/account/avatar/00/19/09/f2/6ed195f4.jpg","comment_is_top":false,"comment_ctime":1631685735,"is_pvip":false,"replies":[{"id":"113133","content":"è¯´çš„éå¸¸å¥½ã€‚","user_name":"ä½œè€…å›å¤","comment_id":312213,"uid":"1181974","ip_address":"","utype":1,"ctime":1631701172,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"5926653031","product_id":100051801,"comment_content":"é™¤äº†å…¼å®¹ä¸åŒè¯­è¨€å¤–ï¼Œåºåˆ—åŒ–è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ä½œç”¨æ˜¯æ•°æ®ä¿å­˜å’Œç½‘ç»œä¼ è¾“ï¼Œæˆ‘ä»¬å¾ˆéš¾ä¿è¯ä¸åŒå¹³å°ä¸Šå†…å­˜é‡Œå­˜çš„æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚<br><br>æ­¤å¤–ï¼Œå¯¹äºåŒ…å«æŒ‡é’ˆçš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬æ˜¯æ²¡æ³•ç®€å•çš„memcpyï¼Œè¿™ä¼šå¸¦æ¥æµ…æ‹·è´ç±»ä¼¼çš„é—®é¢˜ã€‚","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526898,"discussion_content":"è¯´çš„éå¸¸å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631701172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226056,"user_name":"do it","can_delete":false,"product_type":"c1","uid":1309911,"ip_address":"","ucode":"E0753912E8F2AF","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/d7/b102034a.jpg","comment_is_top":false,"comment_ctime":1591938805,"is_pvip":false,"replies":[{"id":"83263","content":"è¯´çš„æŒºå¥½ï¼Œå¸¸ç”¨çš„åºåˆ—åŒ–ä¹Ÿå°±æ˜¯è¿™å‡ ç§äº†","user_name":"ä½œè€…å›å¤","comment_id":226056,"uid":"1181974","ip_address":"","utype":1,"ctime":1591941852,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"5886906101","product_id":100051801,"comment_content":"1ã€ä¸ºä»€ä¹ˆè¦æœ‰åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œç›´æ¥ memcpy å†…å­˜æ•°æ®è¡Œä¸è¡Œå‘¢ï¼Ÿ<br>  å­—èŠ‚åºé—®é¢˜ï¼›åºåˆ—å·ååºåˆ—åŒ–å¯æ•°æ®å‹ç¼©(ä¸ç¡®å®šğŸ˜)<br>2ã€ä½ æœ€å¸¸ç”¨çš„æ˜¯å“ªç§æ•°æ®æ ¼å¼ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ<br>  å·¥ä½œä¸­ä½¿ç”¨jsonå¤šä¸€ç‚¹ï¼Œæœ‰æ—¶ä½¿ç”¨pbã€‚<br>pb:å‹ç¼©æ•ˆç‡ç®—ä¼˜ç‚¹å§ã€‚æ”¹å˜ç»“æ„éœ€é‡æ–°ç”Ÿæˆprotoæ–‡ä»¶ã€protoæ€ä¹ˆéš¾é˜…è¯»ç®—ä¸è¶³ä¹‹å¤„","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498093,"discussion_content":"è¯´çš„æŒºå¥½ï¼Œå¸¸ç”¨çš„åºåˆ—åŒ–ä¹Ÿå°±æ˜¯è¿™å‡ ç§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591941852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338335,"user_name":"å­™æ–°","can_delete":false,"product_type":"c1","uid":2875594,"ip_address":"","ucode":"A80038A479B943","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e0/ca/adfaa551.jpg","comment_is_top":false,"comment_ctime":1647430619,"is_pvip":true,"replies":[{"id":"123726","content":"boost.jsonå¥½åƒæ•ˆç‡ä¹Ÿä¸é”™ï¼Œå…·ä½“æ€ä¹ˆæ ·è¿˜æ˜¯è¦è‡ªå·±åšæµ‹è¯•ã€‚","user_name":"ä½œè€…å›å¤","comment_id":338335,"uid":"1181974","ip_address":"","utype":1,"ctime":1647562339,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1647430619","product_id":100051801,"comment_content":"æˆ‘ä»¬jsonç”¨çš„booståšçš„ç¼–è§£ç ï¼Œä¸çŸ¥é“æ¨ªå‘å¯¹æ¯”æ•ˆç‡æ˜¯ä¸ªä»€ä¹ˆç¨‹åº¦ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556867,"discussion_content":"boost.jsonå¥½åƒæ•ˆç‡ä¹Ÿä¸é”™ï¼Œå…·ä½“æ€ä¹ˆæ ·è¿˜æ˜¯è¦è‡ªå·±åšæµ‹è¯•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647562339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296486,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1622995507,"is_pvip":false,"replies":[{"id":"107644","content":"åºåˆ—åŒ–æ˜¯æŠŠå†…å­˜é‡Œæ•°æ®åšç¼–ç ï¼Œè€ŒæŒä¹…åŒ–æ˜¯æŠŠå†…å­˜é‡Œçš„æ•°æ®å­˜å‚¨åˆ°ç¡¬ç›˜ç­‰ä»‹è´¨ä¸Šé•¿æœŸä¿å­˜ï¼Œä¸¤è€…æœ‰ä¸€ç‚¹è”ç³»ï¼Œä½†ä¸å®Œå…¨ç›¸åŒã€‚","user_name":"ä½œè€…å›å¤","comment_id":296486,"uid":"1181974","ip_address":"","utype":1,"ctime":1623027719,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"1622995507","product_id":100051801,"comment_content":"å·®ç‚¹æŠŠåºåˆ—åŒ–å’ŒæŒä¹…åŒ–å¼„æ··äº†ï¼Œå·®ç‚¹ç­”æˆmemcpyæ˜¯å†…å­˜æ“ä½œï¼Œä¸èƒ½æŒä¹…åŒ–ä¸ºæ–‡ä»¶ã€‚æˆ‘çŸ¥é“jsonæ˜¯å¯ä»¥æŒä¹…åŒ–çš„ï¼Œä¸çŸ¥é“å¦å¤–ä¸¤ç§å¯ä¸å¯ä»¥ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521456,"discussion_content":"åºåˆ—åŒ–æ˜¯æŠŠå†…å­˜é‡Œæ•°æ®åšç¼–ç ï¼Œè€ŒæŒä¹…åŒ–æ˜¯æŠŠå†…å­˜é‡Œçš„æ•°æ®å­˜å‚¨åˆ°ç¡¬ç›˜ç­‰ä»‹è´¨ä¸Šé•¿æœŸä¿å­˜ï¼Œä¸¤è€…æœ‰ä¸€ç‚¹è”ç³»ï¼Œä½†ä¸å®Œå…¨ç›¸åŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623027719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267497,"user_name":"ä¸¥è…¾","can_delete":false,"product_type":"c1","uid":1627876,"ip_address":"","ucode":"3BEA0636A15D69","user_header":"https://static001.geekbang.org/account/avatar/00/18/d6/e4/fee14bd8.jpg","comment_is_top":false,"comment_ctime":1607771094,"is_pvip":false,"replies":[{"id":"97254","content":"è¿™ä¸ªæ—¶å€™å°±ä¸è¡Œäº†ï¼ŒæŠŠç±»ç»“æ„é‡æ–°è®¾è®¡ä¸€ä¸‹å§ã€‚","user_name":"ä½œè€…å›å¤","comment_id":267497,"uid":"1181974","ip_address":"","utype":1,"ctime":1607915630,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"1607771094","product_id":100051801,"comment_content":"message packä½¿ç”¨ MSGPACK_DEFINE æ¥å¤„ç†è‡ªå®šä¹‰ç±»ï¼Œå¦‚æœè‡ªå®šä¹‰ç±»ä¸­æœ‰ç¬¬ä¸‰æ–¹åº“çš„æˆå‘˜å˜é‡ï¼Œè¿™æ—¶å€™è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511658,"discussion_content":"è¿™ä¸ªæ—¶å€™å°±ä¸è¡Œäº†ï¼ŒæŠŠç±»ç»“æ„é‡æ–°è®¾è®¡ä¸€ä¸‹å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607915630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266026,"user_name":"Patrick","can_delete":false,"product_type":"c1","uid":1103919,"ip_address":"","ucode":"A49803CD6EB2C6","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/2f/43601694.jpg","comment_is_top":false,"comment_ctime":1607135752,"is_pvip":false,"replies":[{"id":"96740","content":"æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œç¡®å®å¦‚æ­¤ï¼Œæ¯”è¾ƒå¥‡æ€ªã€‚<br><br>è§£å†³çš„åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠåŸæ¥çš„ä¸€æ¡è¯­å¥æ”¹æˆä¸¤æ¡ï¼Œå…ˆå¾—åˆ°handleï¼Œå†å¾—åˆ°objå°±å¯ä»¥äº†ã€‚<br><br>GitHubä¸Šçš„æºç å·²ç»ä¿®æ”¹ã€‚<br><br>    auto handle = msgpack::unpack(sbuf.data(), sbuf.size());<br>    auto obj = handle.get();<br>","user_name":"ä½œè€…å›å¤","comment_id":266026,"uid":"1181974","ip_address":"","utype":1,"ctime":1607304893,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"1607135752","product_id":100051801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼›ä»£ç ä¸­çš„ç¤ºä¾‹ï¼Œå…³äºmsgpack.cppï¼Œæˆ‘é‡è§å¥‡æ€ªçš„é—®é¢˜ï¼Œå•ç‹¬è¿è¡Œä¸»å‡½æ•°çš„case3æ–¹æ³•ä¼šå‡ºç°std::bad_casté”™è¯¯ï¼Œæ„æ€æ˜¯ååºåˆ—åŒ–æœªèƒ½castï¼Œä½†æ˜¯å¦‚ä½•case1()æˆ–è€…case2()ä¸case3()ä¸€èµ·è¿è¡Œï¼Œåˆ™å°±æ²¡æœ‰è¿™é—®é¢˜äº†ï¼Œæˆ‘å®‰è£…äº†æœ€æ–°çš„msgpackåº“ï¼Œä½¿ç”¨å…¶ä¸­çš„msgpack.hppï¼Œä¾æ—§ä¸è¡Œã€‚æˆ‘ä¸å¾—å…¶è§£ï¼Œæ˜¯ä»€ä¹ˆåŸå› é€ æˆçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511126,"discussion_content":"æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œç¡®å®å¦‚æ­¤ï¼Œæ¯”è¾ƒå¥‡æ€ªã€‚\n\nè§£å†³çš„åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠåŸæ¥çš„ä¸€æ¡è¯­å¥æ”¹æˆä¸¤æ¡ï¼Œå…ˆå¾—åˆ°handleï¼Œå†å¾—åˆ°objå°±å¯ä»¥äº†ã€‚\n\nGitHubä¸Šçš„æºç å·²ç»ä¿®æ”¹ã€‚\n\n    auto handle = msgpack::unpack(sbuf.data(), sbuf.size());\n    auto obj = handle.get();\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607304893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250229,"user_name":"Sudouble","can_delete":false,"product_type":"c1","uid":1365574,"ip_address":"","ucode":"B369B09DAF8D20","user_header":"https://static001.geekbang.org/account/avatar/00/14/d6/46/5eb5261b.jpg","comment_is_top":false,"comment_ctime":1600999619,"is_pvip":true,"replies":[{"id":"91662","content":"è¯´çš„å¾ˆå¯¹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":250229,"uid":"1181974","ip_address":"","utype":1,"ctime":1601011709,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"1600999619","product_id":100051801,"comment_content":"é—®é¢˜1çš„ï¼Œä¸åŒæœºå™¨ï¼Œå¤§å°ç«¯ï¼Œå­—èŠ‚çš„å¯¹é½ä¸ä¸€æ ·ï¼Œè¿˜åŸæ—¶ä¼šäº§ç”Ÿä¸ä¸€è‡´çš„é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506157,"discussion_content":"è¯´çš„å¾ˆå¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601011709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236638,"user_name":"é”¦é²¤","can_delete":false,"product_type":"c1","uid":1343717,"ip_address":"","ucode":"B9F1495E39F00A","user_header":"https://static001.geekbang.org/account/avatar/00/14/80/e5/251d89b5.jpg","comment_is_top":false,"comment_ctime":1595487502,"is_pvip":false,"replies":[{"id":"87433","content":"å¯¹gRPCäº†è§£ä¸å¤šï¼Œå®ƒè‡ªå·±å°±å¸¦C++æ”¯æŒå§ï¼Œåº”è¯¥ä¸éœ€è¦å…¶ä»–æ¡†æ¶æ”¯æŒäº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":236638,"uid":"1181974","ip_address":"","utype":1,"ctime":1595488174,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":2,"race_medal":0,"score":"1595487502","product_id":100051801,"comment_content":"C++æœåŠ¡ç«¯çš„gRPCæ¡†æ¶æœ‰ä»€ä¹ˆå¯ä»¥æ¨èçš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502156,"discussion_content":"å¯¹gRPCäº†è§£ä¸å¤šï¼Œå®ƒè‡ªå·±å°±å¸¦C++æ”¯æŒå§ï¼Œåº”è¯¥ä¸éœ€è¦å…¶ä»–æ¡†æ¶æ”¯æŒäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595488174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1355601,"avatar":"https://static001.geekbang.org/account/avatar/00/14/af/51/536f0747.jpg","nickname":"æµ”_Sendoh","note":"","ucode":"03DD5AD83D4DA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293462,"discussion_content":"Tars ä¹Ÿä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595551225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236154,"user_name":"æµ·æ¼©æ¶¡","can_delete":false,"product_type":"c1","uid":1426798,"ip_address":"","ucode":"4963172386B1A7","user_header":"https://static001.geekbang.org/account/avatar/00/15/c5/6e/604ec5d4.jpg","comment_is_top":false,"comment_ctime":1595330628,"is_pvip":false,"replies":[{"id":"87295","content":"å—¯ï¼ŒMakefileæ˜¯å…¶ä»–åŒå­¦æ·»åŠ çš„ï¼Œæˆ‘æ²¡æœ‰å†™Makefileï¼Œå¯ä»¥ç›´æ¥ç”¨æºç æ³¨é‡Šé‡Œçš„g++å‘½ä»¤è¡Œç¼–è¯‘ï¼Œæˆ–è€…å‚è€ƒå…¶ä»–ç›®å½•çš„Makefileè‡ªå·±å†™ã€‚","user_name":"ä½œè€…å›å¤","comment_id":236154,"uid":"1181974","ip_address":"","utype":1,"ctime":1595379275,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"1595330628","product_id":100051801,"comment_content":"section4é‡Œæ²¡æœ‰Makefileå•Š","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501963,"discussion_content":"å—¯ï¼ŒMakefileæ˜¯å…¶ä»–åŒå­¦æ·»åŠ çš„ï¼Œæˆ‘æ²¡æœ‰å†™Makefileï¼Œå¯ä»¥ç›´æ¥ç”¨æºç æ³¨é‡Šé‡Œçš„g++å‘½ä»¤è¡Œç¼–è¯‘ï¼Œæˆ–è€…å‚è€ƒå…¶ä»–ç›®å½•çš„Makefileè‡ªå·±å†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595379275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227979,"user_name":"ç¾¤ä¹¦","can_delete":false,"product_type":"c1","uid":1437036,"ip_address":"","ucode":"BA9EE71D2D818A","user_header":"https://static001.geekbang.org/account/avatar/00/15/ed/6c/6fb35017.jpg","comment_is_top":false,"comment_ctime":1592531799,"is_pvip":true,"replies":[{"id":"84051","content":"å­—èŠ‚åºé—®é¢˜ç¡®å®æ˜¯åœ¨ç½‘ç»œä¼ è¾“æ—¶çš„ä¸€ä¸ªæ¯”è¾ƒå¤´ç–¼çš„é—®é¢˜ï¼Œä½†å¯¹äºåºåˆ—åŒ–æ¥è¯´ï¼Œä¸ä¸€å®šéè¦è½¬æ¢æˆç½‘ç»œåºï¼Œåªè¦ä¸¤è¾¹ç”¨ä¸€è‡´çš„çº¦å®šå³å¯ã€‚<br><br>pbå†…éƒ¨å…·ä½“æ€ä¹ˆåšçš„è¦çœ‹å®ƒçš„æºç äº†ï¼Œä½†ä½œä¸ºç”¨æˆ·æˆ‘ä»¬å¹¶ä¸éœ€è¦å…³å¿ƒå®ç°çš„ç»†èŠ‚ã€‚","user_name":"ä½œè€…å›å¤","comment_id":227979,"uid":"1181974","ip_address":"","utype":1,"ctime":1592534503,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"1592531799","product_id":100051801,"comment_content":"åšç½‘ç»œå¼€å‘æ—¶ è¦å°†å¤šå­—èŠ‚æ•°å€¼å‹æ•°æ®è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºåˆ—å…¼å®¹ä¸åŒæ¶æ„çš„æœºå™¨ï¼Œprotobufä¹Ÿæœ‰å­—èŠ‚åºåˆ—è½¬åŒ–çš„è¿‡ç¨‹å—","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498870,"discussion_content":"å­—èŠ‚åºé—®é¢˜ç¡®å®æ˜¯åœ¨ç½‘ç»œä¼ è¾“æ—¶çš„ä¸€ä¸ªæ¯”è¾ƒå¤´ç–¼çš„é—®é¢˜ï¼Œä½†å¯¹äºåºåˆ—åŒ–æ¥è¯´ï¼Œä¸ä¸€å®šéè¦è½¬æ¢æˆç½‘ç»œåºï¼Œåªè¦ä¸¤è¾¹ç”¨ä¸€è‡´çš„çº¦å®šå³å¯ã€‚\n\npbå†…éƒ¨å…·ä½“æ€ä¹ˆåšçš„è¦çœ‹å®ƒçš„æºç äº†ï¼Œä½†ä½œä¸ºç”¨æˆ·æˆ‘ä»¬å¹¶ä¸éœ€è¦å…³å¿ƒå®ç°çš„ç»†èŠ‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592534503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226698,"user_name":"å±ˆè‚–ä¸œ","can_delete":false,"product_type":"c1","uid":1995346,"ip_address":"","ucode":"A6E2250A3CFEA5","user_header":"https://static001.geekbang.org/account/avatar/00/1e/72/52/8e81daf1.jpg","comment_is_top":false,"comment_ctime":1592187094,"is_pvip":false,"replies":[{"id":"83499","content":"è¿™ç§åšæ³•å°±æ˜¯æœ€åŸºæœ¬çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–äº†ï¼Œä½†åœ¨æ•°æ®å¤§å°ã€å¤„ç†æ•ˆç‡ã€æ˜“ç”¨æ€§ä¸Šè‚¯å®šå°±æ²¡æœ‰jsonã€msgpackç­‰å¥½ã€‚<br><br>","user_name":"ä½œè€…å›å¤","comment_id":226698,"uid":"1181974","ip_address":"","utype":1,"ctime":1592198694,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"1592187094","product_id":100051801,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘æŠŠæ‰€æœ‰çš„è¦å‘é€çš„æ•°æ®ç±»å‹ï¼Œéƒ½è½¬æˆå­—ç¬¦æ•°ç»„ï¼Œä¾‹å¦‚ï¼Œinté€šè¿‡htonè½¬ä¸ºç½‘ç»œå­—èŠ‚åºï¼Œå†è½¬ä¸º4å­—èŠ‚çš„å­—ç¬¦æ•°ç»„ï¼Œå…¶ä»–çš„ä¹Ÿç”¨ç±»ä¼¼çš„å¤„ç†ã€‚åœ¨æ¥æ”¶ç«¯ï¼Œç”¨ç›¸åçš„æ“ä½œå¤„ç†ï¼Œå†è§£å‡ºæ¥ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥å®ç°ä¸Šé¢çš„è¿™ç§åŠŸèƒ½ã€‚å› ä¸ºå­—ç¬¦æ•°ç»„åœ¨ç½‘ç»œä¸­ä¼ é€’åº”è¯¥æ˜¯ä¸ä¼šå› ä¸ºç¼–ç¨‹è¯­è¨€å’Œå¹³å°çš„åŒºåˆ«è€Œå‡ºç°å·®åˆ«çš„ã€‚æˆ‘ä¸æ¸…æ¥šæˆ‘çš„è¿™ç§å¤„ç†è·Ÿåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ“ä½œæœ€ç»ˆäº§ç”Ÿçš„æ•ˆæœæœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ä»…ä»…æ˜¯åœ¨é€šç”¨è¡Œä¸Šçš„å·®åˆ«è¿˜æ˜¯æœ‰å…¶ä»–æ›´æ·±åˆ»çš„åŒºåˆ«ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498337,"discussion_content":"è¿™ç§åšæ³•å°±æ˜¯æœ€åŸºæœ¬çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–äº†ï¼Œä½†åœ¨æ•°æ®å¤§å°ã€å¤„ç†æ•ˆç‡ã€æ˜“ç”¨æ€§ä¸Šè‚¯å®šå°±æ²¡æœ‰jsonã€msgpackç­‰å¥½ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592198694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226016,"user_name":"wonderNick","can_delete":false,"product_type":"c1","uid":1146813,"ip_address":"","ucode":"855ABB9B4B2404","user_header":"https://static001.geekbang.org/account/avatar/00/11/7f/bd/6ba7d5a5.jpg","comment_is_top":false,"comment_ctime":1591928946,"is_pvip":false,"replies":[{"id":"83258","content":"æ˜¯çš„ï¼Œæ­£å¦‚æˆ‘åœ¨å°è´´å£«é‡Œè¯´çš„ï¼Œæˆ‘ä¸æ˜¯å¤ªå–œæ¬¢rapidjsonçš„é£æ ¼ï¼Œè€Œç”¨jsonæ€§èƒ½ä¸æ˜¯æˆ‘çš„è€ƒè™‘èŒƒå›´ã€‚<br><br>jsonçš„C++åº“å¾ˆå¤šï¼ŒæŒ‰è‡ªå·±çš„éœ€æ±‚æ¥ï¼Œé€‰åˆé€‚è‡ªå·±çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":226016,"uid":"1181974","ip_address":"","utype":1,"ctime":1591930623,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"1591928946","product_id":100051801,"comment_content":"è€å¸ˆï¼Œæ‚¨è®¤ä¸º rapidjson å’Œ json for modern C++ ä¸¤è€…çš„ä¼˜åŠ£åŠ¿æœ‰å“ªäº›å‘¢ï¼Ÿ<br>æˆ‘ä»¬é¡¹ç›®ç°åœ¨ç”¨çš„ rapidjson ï¼Œæ€§èƒ½å¾ˆå¥½ï¼Œä½†æ˜¯æ˜“ç”¨æ€§æ¯” json for modern C++ å·®ä¸€ç‚¹ã€‚ æ­£åƒ   json for modern C++ çš„åå­—ä¸€æ ·ï¼Œæ›´ç°ä»£ä¸€äº›ï¼Œçœ‹èµ·æ¥æœ‰äº›åƒç§»åŠ¨ç«¯çš„åºåˆ—åŒ–å·¥å…·ï¼ˆæ¯”å¦‚IOSçš„ handyjsonï¼‰","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498080,"discussion_content":"æ˜¯çš„ï¼Œæ­£å¦‚æˆ‘åœ¨å°è´´å£«é‡Œè¯´çš„ï¼Œæˆ‘ä¸æ˜¯å¤ªå–œæ¬¢rapidjsonçš„é£æ ¼ï¼Œè€Œç”¨jsonæ€§èƒ½ä¸æ˜¯æˆ‘çš„è€ƒè™‘èŒƒå›´ã€‚\n\njsonçš„C++åº“å¾ˆå¤šï¼ŒæŒ‰è‡ªå·±çš„éœ€æ±‚æ¥ï¼Œé€‰åˆé€‚è‡ªå·±çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591930623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225945,"user_name":"ä¹ä¸‰","can_delete":false,"product_type":"c1","uid":1454691,"ip_address":"","ucode":"7D093ED7273CBE","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/63/fa24f92e.jpg","comment_is_top":false,"comment_ctime":1591917060,"is_pvip":false,"replies":[{"id":"83247","content":"è¿™ä¸ªè¦çœ‹å®˜æ–¹æ–‡æ¡£äº†ï¼Œä¹Ÿè®¸æœ‰éå®˜æ–¹çš„æ”¯æŒï¼Œæ¯•ç«Ÿpbéå¸¸æµè¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591924133,"ip_address":"","comment_id":225945,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591917060","product_id":100051801,"comment_content":"objtibecæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç”¨pb","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498052,"discussion_content":"è¿™ä¸ªè¦çœ‹å®˜æ–¹æ–‡æ¡£äº†ï¼Œä¹Ÿè®¸æœ‰éå®˜æ–¹çš„æ”¯æŒï¼Œæ¯•ç«Ÿpbéå¸¸æµè¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591924133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225342,"user_name":"æµ‘æµ‘å™©å™©cium","can_delete":false,"product_type":"c1","uid":1617939,"ip_address":"","ucode":"358C0BCFF62B40","user_header":"https://static001.geekbang.org/account/avatar/00/18/b0/13/5cb3459c.jpg","comment_is_top":false,"comment_ctime":1591718708,"is_pvip":false,"replies":[{"id":"82989","content":"csvçš„æ ¼å¼å¤ªç®€å•ï¼Œä¸é€‚åˆæœ‰å¤æ‚ç»“æ„çš„æ•°æ®ã€‚è€Œxmlå¤ªç¬¨é‡ï¼Œæˆ‘ä¸ªäººè§‰å¾—ç°åœ¨ç”¨å¾—æ¯”è¾ƒå°‘äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591751162,"ip_address":"","comment_id":225342,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591718708","product_id":100051801,"comment_content":"è¿˜æœ‰csvï¼Œxmlä¹Ÿç”¨çš„æ¯”è¾ƒå¤š","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497812,"discussion_content":"csvçš„æ ¼å¼å¤ªç®€å•ï¼Œä¸é€‚åˆæœ‰å¤æ‚ç»“æ„çš„æ•°æ®ã€‚è€Œxmlå¤ªç¬¨é‡ï¼Œæˆ‘ä¸ªäººè§‰å¾—ç°åœ¨ç”¨å¾—æ¯”è¾ƒå°‘äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591751162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225201,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1591682421,"is_pvip":false,"replies":[{"id":"82927","content":"ç”¨åè®®æ¥ç†è§£åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¹Ÿæ˜¯ä¸ªä¸é”™çš„è§’åº¦ï¼Œåªæ˜¯è¿™ä¸ªåè®®åªè§„å®šäº†æ•°æ®çš„æ ¼å¼ï¼Œä¸æ¶‰åŠä¼ è¾“æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591691461,"ip_address":"","comment_id":225201,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591682421","product_id":100051801,"comment_content":"åºåˆ—åŒ–å’Œååºåˆ—åŒ–å®é™…æ˜¯é€šä¿¡å†…å®¹çš„ä¸€ä¸ªæ ‡å‡†åè®®ï¼Œæœ‰ç‚¹åƒJVMï¼Œä¸åŒºåˆ†å¹³å°åªè¦åŒä¸€å¥—åè®®å°±å¯ä»¥äº’ç›¸é€šä¿¡","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497773,"discussion_content":"ç”¨åè®®æ¥ç†è§£åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¹Ÿæ˜¯ä¸ªä¸é”™çš„è§’åº¦ï¼Œåªæ˜¯è¿™ä¸ªåè®®åªè§„å®šäº†æ•°æ®çš„æ ¼å¼ï¼Œä¸æ¶‰åŠä¼ è¾“æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591691461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225153,"user_name":"Confidant.","can_delete":false,"product_type":"c1","uid":1660039,"ip_address":"","ucode":"6E137F863906B0","user_header":"https://static001.geekbang.org/account/avatar/00/19/54/87/3b1f9de4.jpg","comment_is_top":false,"comment_ctime":1591667983,"is_pvip":false,"replies":[{"id":"82882","content":"ä¸­æ–‡æ²¡æœ‰ç‰¹åˆ«æƒå¨çš„èµ„æ–™ï¼Œç½‘ä¸Šçš„å¯ä»¥éšä¾¿çœ‹ï¼Œè¦å­¦è¿˜æ˜¯è¦çœ‹å®˜æ–¹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591671547,"ip_address":"","comment_id":225153,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591667983","product_id":100051801,"comment_content":"è€å¸ˆèƒ½æ¨èç‚¹pbçš„èµ„æ–™å—ï¼Œæœ€å¥½æ˜¯ä¸­æ–‡çš„","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497756,"discussion_content":"ä¸­æ–‡æ²¡æœ‰ç‰¹åˆ«æƒå¨çš„èµ„æ–™ï¼Œç½‘ä¸Šçš„å¯ä»¥éšä¾¿çœ‹ï¼Œè¦å­¦è¿˜æ˜¯è¦çœ‹å®˜æ–¹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591671547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225106,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1591659785,"is_pvip":false,"replies":[{"id":"82867","content":"å¤§æ¦‚çš„æ„æ€æ˜¯å¯¹çš„ï¼Œå¯ä»¥å†å¤šæ·±å…¥æ€è€ƒä¸€ä¸‹ï¼Œæ˜¯å¦è¿˜æœ‰æ›´å¤šçš„ä½œç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591664499,"ip_address":"","comment_id":225106,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591659785","product_id":100051801,"comment_content":"#1 æ„Ÿè§‰åºåˆ—åŒ–&#47;ååºåˆ—åŒ–è¦åšçš„äº‹æ˜¯ï¼ŒæŠŠåŸæœ‰çš„ä¸€å †æœ‰å®é™…æ„ä¹‰çš„å­—èŠ‚å˜çš„æ›´å°ï¼Œæ›´ç´§å‡‘ï¼Œåˆæœ‰ç‚¹åŠ å¯†è§£å¯†çš„æ„Ÿè§‰ã€‚memcpyè²Œä¼¼æ²¡æœ‰å®Œæˆè¿™ä¸¤ä¸ªä»»åŠ¡ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497734,"discussion_content":"å¤§æ¦‚çš„æ„æ€æ˜¯å¯¹çš„ï¼Œå¯ä»¥å†å¤šæ·±å…¥æ€è€ƒä¸€ä¸‹ï¼Œæ˜¯å¦è¿˜æœ‰æ›´å¤šçš„ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591664499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225105,"user_name":"æœ¨ç“œ777","can_delete":false,"product_type":"c1","uid":1512537,"ip_address":"","ucode":"FC52A499AF6374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","comment_is_top":false,"comment_ctime":1591659777,"is_pvip":false,"replies":[{"id":"82868","content":"è¿™ä¸ªè¿˜æ˜¯è¦åšä¸ªå®é™…çš„æµ‹è¯•å§ï¼Œè€Œä¸”è¿˜è·Ÿæ•°æ®ç±»å‹ã€å¤§å°æœ‰å…³ã€‚<br><br>ä¸€èˆ¬è®¤ä¸ºï¼Œmsgpackæ¯”è¾ƒè½»å·§ï¼Œé€‚åˆä¸­å°å‹é¡¹ç›®ï¼Œè€Œpbå¼ºåœ¨å®ƒæœ‰å¾ˆå¤šå¤–å›´çš„æ”¯æŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591664594,"ip_address":"","comment_id":225105,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591659777","product_id":100051801,"comment_content":"json,pbéƒ½ä½¿ç”¨è¿‡ï¼ç›®å‰é¡¹ç›®ä¸­åç«¯ æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨åºåˆ—åŒ–jsonä¸ºäºŒè¿›åˆ¶ï¼Œç„¶åå‰ç«¯æŒ‰å­—èŠ‚è§£æï¼Œè¿™æ ·è™½ç„¶æ¯”è¾ƒè‡ªç”±ï¼Œä½†æ¯”è¾ƒç¹çï¼  pbæ˜¯æœ‰ä½œè€…è¯´çš„é‚£äº›é—®é¢˜ï¼Œéœ€è¦é¢„å®šä¹‰ç»“æ„ï¼<br>æˆ‘æƒ³é—®ä¸‹ï¼Œå°±åºåˆ—åŒ–æ•ˆç‡ï¼Œè¿˜æœ‰ ä¼ è¾“å­—èŠ‚å¤§å°è€Œè¨€ï¼Œmessagepackã€pbå“ªç§æ›´å¥½ï¼Ÿè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497733,"discussion_content":"è¿™ä¸ªè¿˜æ˜¯è¦åšä¸ªå®é™…çš„æµ‹è¯•å§ï¼Œè€Œä¸”è¿˜è·Ÿæ•°æ®ç±»å‹ã€å¤§å°æœ‰å…³ã€‚\n\nä¸€èˆ¬è®¤ä¸ºï¼Œmsgpackæ¯”è¾ƒè½»å·§ï¼Œé€‚åˆä¸­å°å‹é¡¹ç›®ï¼Œè€Œpbå¼ºåœ¨å®ƒæœ‰å¾ˆå¤šå¤–å›´çš„æ”¯æŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591664594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225096,"user_name":"lckfaæé’Š","can_delete":false,"product_type":"c1","uid":1356899,"ip_address":"","ucode":"AD13D205104AA6","user_header":"https://static001.geekbang.org/account/avatar/00/14/b4/63/84960032.jpg","comment_is_top":false,"comment_ctime":1591655322,"is_pvip":false,"replies":[{"id":"82869","content":"<br>1.æˆ‘ä»¥å‰ä¹Ÿç”¨è¿‡thriftï¼Œåœ¨grpcå‡ºæ¥ä¹‹å‰ï¼Œå®ƒçš„ç¡®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚<br><br>2.è¯´çš„å¥½ï¼Œè¿™é‡Œé¢çš„å…³é”®å°±æ˜¯ä¸¤è¾¹å¯èƒ½å¯¹æ•°æ®çš„ç†è§£ä¸ä¸€è‡´ï¼Œæœ€å¸¸è§çš„å°±æ˜¯å¤§å°ç«¯é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591664677,"ip_address":"","comment_id":225096,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591655322","product_id":100051801,"comment_content":"é™¤äº†jsonï¼Œå…¶ä»–çš„ä¸¤ç§å€’æ˜¯è¿˜æ²¡ç”¨è¿‡ï¼Œå¦å¤–ï¼Œç”¨çš„å¤šçš„æ˜¯Apacheçš„Thriftåº“ï¼Œç”¨èµ·æ¥æ„Ÿè§‰å’ŒProtoBufferå·®ä¸å¤šï¼›åºåˆ—åŒ–æ˜¯æ•°æ®äº¤æ¢æ—¶æ‰“åŒ…çš„ä¸€ç§æ–¹å¼ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œè€Œä¸”éœ€è¦å’Œå…¶ä»–è¯­è¨€æ‰“äº¤é“æ—¶ä½¿ç”¨ï¼Œæœ¬åœ°åºåˆ—åŒ–ï¼Œå‘é€ï¼Œæ¥æ”¶æ–¹æ¥æ”¶åï¼Œååºåˆ—åŒ–ï¼Œè¯»å–ä¸€æ°”å‘µæˆã€‚<br>å¦‚æœç›´æ¥copyå†…å­˜åšæ•°æ®äº¤æ¢ï¼Œæ¥æ”¶æ–¹å¯¹æ•°æ®çš„è§£ææ²¡æœ‰æ ‡å‡†ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497728,"discussion_content":"\n1.æˆ‘ä»¥å‰ä¹Ÿç”¨è¿‡thriftï¼Œåœ¨grpcå‡ºæ¥ä¹‹å‰ï¼Œå®ƒçš„ç¡®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚\n\n2.è¯´çš„å¥½ï¼Œè¿™é‡Œé¢çš„å…³é”®å°±æ˜¯ä¸¤è¾¹å¯èƒ½å¯¹æ•°æ®çš„ç†è§£ä¸ä¸€è‡´ï¼Œæœ€å¸¸è§çš„å°±æ˜¯å¤§å°ç«¯é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591664677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}