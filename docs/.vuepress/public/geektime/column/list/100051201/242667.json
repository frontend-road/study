{"id":242667,"title":"15 | å¦‚ä½•æå‡HTTP/1.1æ€§èƒ½ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™¶è¾‰ã€‚</p><p>ä¸Šä¸€è®²ä»‹ç»äº†ä¸ºåº”ç”¨å±‚ä¿¡æ¯å®‰å…¨ä¿é©¾æŠ¤èˆªçš„TLS/SSLåè®®ï¼Œè¿™ä¸€è®²æˆ‘ä»¬æ¥çœ‹çœ‹æœ€å¸¸ç”¨çš„åº”ç”¨å±‚åè®®HTTP/1.1è¯¥å¦‚ä½•ä¼˜åŒ–ã€‚</p><p>ç”±äºé—¨æ§›ä½ã€æ˜“ç›‘æ§ã€è‡ªè¡¨è¾¾ç­‰ç‰¹ç‚¹ï¼ŒHTTP/1.1åœ¨äº’è”ç½‘è¯ç”Ÿä¹‹åˆå°±æˆä¸ºæœ€å¹¿æ³›ä½¿ç”¨çš„åº”ç”¨å±‚åè®®ã€‚ç„¶è€Œå®ƒçš„æ€§èƒ½å´å¾ˆå·®ï¼Œæœ€ä¸ºäººè¯Ÿç—…çš„æ˜¯HTTPå¤´éƒ¨çš„ä¼ è¾“å ç”¨äº†å¤§é‡å¸¦å®½ã€‚ç”±äºHTTPå¤´éƒ¨ä½¿ç”¨ASCIIç¼–ç æ–¹å¼ï¼Œè¿™é€ æˆå®ƒå¾€å¾€è¾¾åˆ°å‡ KBï¼Œè€Œä¸”æ»¥ç”¨çš„Cookieå¤´éƒ¨è¿›ä¸€æ­¥å¢å¤§äº†ä½“ç§¯ã€‚ä¸æ­¤åŒæ—¶ï¼ŒRESTæ¶æ„çš„æ— çŠ¶æ€ç‰¹æ€§è¿˜è¦æ±‚æ¯ä¸ªè¯·æ±‚éƒ½å¾—é‡ä¼ HTTPå¤´éƒ¨ï¼Œè¿™å°±ä½¿æ¶ˆæ¯çš„æœ‰æ•ˆä¿¡æ¯æ¯”é‡éš¾ä»¥æé«˜ã€‚</p><p>ä½ å¯èƒ½å¬è¯´è¿‡è¯¸å¦‚ç¼“å­˜ã€é•¿è¿æ¥ã€å›¾ç‰‡æ‹¼æ¥ã€èµ„æºå‹ç¼©ç­‰ä¼˜åŒ–HTTPåè®®æ€§èƒ½çš„æ–¹å¼ï¼Œè¿™äº›ä¼˜åŒ–æ–¹æ¡ˆæœ‰äº›ä»åº•å±‚çš„ä¼ è¾“å±‚ä¼˜åŒ–å…¥æ‰‹ï¼Œæœ‰äº›ä»ç”¨æˆ·ä½¿ç”¨æµè§ˆå™¨çš„ä½“éªŒå…¥æ‰‹ï¼Œæœ‰äº›åˆ™ä»æœåŠ¡å™¨èµ„æºçš„ç¼–ç å…¥æ‰‹ï¼Œäº”èŠ±å…«é—¨ï¼Œå¯¼è‡´æˆ‘ä»¬æ²¡æœ‰ç³»ç»ŸåŒ–åœ°ä¼˜åŒ–æ€è·¯ï¼Œå¾€å¾€åœ¨æ€§èƒ½æå‡ä¸Šéš¾å°½å…¨åŠŸã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚ä½•å…¨é¢åœ°æå‡HTTP/1.1åè®®çš„æ€§èƒ½å‘¢ï¼Ÿæˆ‘è®¤ä¸ºåœ¨ä¸å‡çº§åè®®çš„æƒ…å†µä¸‹ï¼Œæœ‰3ç§ä¼˜åŒ–æ€è·¯ï¼šé¦–å…ˆæ˜¯é€šè¿‡ç¼“å­˜é¿å…å‘é€HTTPè¯·æ±‚ï¼›å…¶æ¬¡ï¼Œå¦‚æœä¸å¾—ä¸å‘èµ·è¯·æ±‚ï¼Œé‚£ä¹ˆå°±å¾—æ€è€ƒå¦‚ä½•æ‰èƒ½å‡å°‘è¯·æ±‚çš„ä¸ªæ•°ï¼›æœ€ååˆ™æ˜¯å‡å°‘æœåŠ¡å™¨å“åº”çš„ä½“ç§¯ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ²¿ç€è¿™3ä¸ªæ€è·¯çœ‹çœ‹å…·ä½“çš„ä¼˜åŒ–æ–¹æ³•ã€‚</p><!-- [[[read_end]]] --><h2>é€šè¿‡ç¼“å­˜é¿å…å‘é€HTTPè¯·æ±‚</h2><p>å¦‚æœä¸èµ°ç½‘ç»œå°±èƒ½è·å¾—HTTPå“åº”ï¼Œè¿™æ ·æ€§èƒ½è‚¯å®šæœ€é«˜ã€‚HTTPåè®®è®¾è®¡ä¹‹åˆå°±è€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œç¼“å­˜èƒ½å¤Ÿè®©å®¢æˆ·ç«¯åœ¨å…äºå‘é€HTTPè¯·æ±‚çš„æƒ…å†µä¸‹è·å¾—æœåŠ¡å™¨çš„èµ„æºã€‚</p><p>ç¼“å­˜åˆ°åº•æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œå®ƒä»æ—¶é—´ç»´åº¦ä¸Šåšæ–‡ç« ï¼ŒæŠŠç¬¬1ä»½è¯·æ±‚åŠå…¶å“åº”ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„æœ¬åœ°ç£ç›˜ä¸Šï¼Œå…¶ä¸­è¯·æ±‚çš„URLä½œä¸ºå…³é”®å­—ï¼ˆéƒ¨åˆ†HTTPå¤´éƒ¨ä¹Ÿä¼šåŠ å…¥å…³é”®å­—ï¼Œä¾‹å¦‚ç¡®å®šæœåŠ¡å™¨åŸŸåçš„Hostå¤´éƒ¨ï¼‰ï¼Œè€Œå“åº”å°±æ˜¯å€¼ã€‚è¿™æ ·ï¼Œåç»­å‘èµ·ç›¸åŒçš„è¯·æ±‚æ—¶ï¼Œå°±å¯ä»¥å…ˆåœ¨æœ¬åœ°ç£ç›˜ä¸Šé€šè¿‡å…³é”®å­—æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œå°±ç›´æ¥å°†ç¼“å­˜ä½œä¸ºæœåŠ¡å™¨å“åº”ä½¿ç”¨ã€‚è¯»å–æœ¬åœ°ç£ç›˜è€—æ—¶ä¸è¿‡å‡ åæ¯«ç§’ï¼Œè¿™è¿œæ¯”æ…¢äº†ä¸Šç™¾å€ä¸”ä¸ç¨³å®šçš„ç½‘ç»œè¯·æ±‚å¿«å¾—å¤šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9d/ab/9dea133d832d8b7ab642bb74b48502ab.png?wh=1007*676\" alt=\"\"></p><p>ä½ å¯èƒ½ä¼šé—®ï¼ŒæœåŠ¡å™¨ä¸Šçš„èµ„æºæ›´æ–°åï¼Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“ï¼Œå®ƒè‹¥å†ä½¿ç”¨è¿‡æœŸçš„ç¼“å­˜å°±ä¼šå‡ºé”™ï¼Œè¿™è¯¥å¦‚ä½•è§£å†³ï¼Ÿå› æ­¤ï¼ŒæœåŠ¡å™¨ä¼šåœ¨å‘é€å“åº”æ—¶é¢„ä¼°ä¸€ä¸ªè¿‡æœŸæ—¶é—´å¹¶åœ¨å“åº”å¤´éƒ¨ä¸­å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œè€Œå®¢æˆ·ç«¯ä¸€æ—¦å‘ç°ç¼“å­˜è¿‡æœŸåˆ™é‡æ–°å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚HTTPåè®®æ§åˆ¶ç¼“å­˜è¿‡æœŸçš„å¤´éƒ¨éå¸¸å¤šï¼Œè€Œä¸”é€šå¸¸è¿™æ˜¯åœ¨æœåŠ¡å™¨ç«¯è®¾ç½®çš„ï¼Œæˆ‘ä¼šåœ¨æœ¬ä¸“æ çš„ç¬¬4éƒ¨åˆ†â€œåˆ†å¸ƒå¼ç³»ç»Ÿä¼˜åŒ–â€ç»“åˆæœåŠ¡å™¨æ“ä½œå†æ¥ä»‹ç»ï¼Œè¿™é‡Œæš‚æ—¶ç•¥è¿‡ã€‚</p><p>å½“ç„¶ï¼Œè¿‡æœŸçš„ç¼“å­˜ä¹Ÿä»ç„¶å¯ä»¥æå‡æ€§èƒ½ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“å®¢æˆ·ç«¯å‘ç°ç¼“å­˜è¿‡æœŸåï¼Œä¼šå–å‡ºç¼“å­˜çš„æ‘˜è¦ï¼ˆæ‘˜è¦æ˜¯ä»ç¬¬1æ¬¡è¯·æ±‚çš„å“åº”ä¸­æ‹¿åˆ°çš„ï¼‰ï¼ŒæŠŠå®ƒæ”¾åœ¨è¯·æ±‚çš„Etagå¤´éƒ¨ä¸­å†å‘ç»™æœåŠ¡å™¨ã€‚è€ŒæœåŠ¡å™¨è·å–åˆ°è¯·æ±‚åï¼Œä¼šå°†æœ¬åœ°èµ„æºçš„æ‘˜è¦ä¸è¯·æ±‚ä¸­çš„Etagç›¸æ¯”è¾ƒï¼Œå¦‚æœä¸åŒï¼Œé‚£ä¹ˆç¼“å­˜æ²¡æœ‰ä»·å€¼ï¼Œé‡æ–°å‘é€æœ€æ–°èµ„æºå³å¯ï¼›å¦‚æœæ‘˜è¦ä¸Etagç›¸åŒï¼Œé‚£ä¹ˆä»…è¿”å›ä¸å«æœ‰åŒ…ä½“çš„304 Not Modifiedå“åº”ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯ç¼“å­˜ä»ç„¶æœ‰æ•ˆå³å¯ï¼Œè¿™å°±çœå»ä¼ é€’å¯èƒ½é«˜è¾¾åƒç™¾å…†çš„æ–‡ä»¶èµ„æºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/62/a394b7389d0cdb5f0866223681e19b62.png?wh=1048*696\" alt=\"\"></p><p>è‡³äºEtagæ‘˜è¦ç©¶ç«Ÿæ˜¯æ€æ ·ç”Ÿæˆçš„ï¼Œå„ç±»WebæœåŠ¡å™¨çš„å¤„ç†æ–¹å¼ä¸å°½ç›¸åŒï¼Œæ¯”å¦‚Nginxä¼šå°†æ–‡ä»¶å¤§å°å’Œä¿®æ”¹æ—¶é—´æ‹¼æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºæ–‡ä»¶æ‘˜è¦ï¼ˆè¯¦è§<a href=\"https://time.geekbang.org/course/detail/138-76358\">ã€ŠNginxæ ¸å¿ƒçŸ¥è¯†100è®²ã€‹ç¬¬97è¯¾</a>ï¼‰ã€‚è¿‡æœŸç¼“å­˜åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¯ä»¥æœ‰æ•ˆæå‡å¯ç”¨æ€§ï¼Œ[ç¬¬25è¯¾] è¿˜ä¼šç«™åœ¨åå‘ä»£ç†çš„è§’åº¦ä»‹ç»è¿‡æœŸç¼“å­˜çš„ç”¨æ³•ã€‚</p><p>æµè§ˆå™¨ä¸Šçš„ç¼“å­˜åªèƒ½ä¸ºä¸€ä¸ªç”¨æˆ·ä½¿ç”¨ï¼Œæ•…ç§°ä¸ºç§æœ‰ç¼“å­˜ã€‚ä»£ç†æœåŠ¡å™¨ä¸Šçš„ç¼“å­˜å¯ä»¥è¢«è®¸å¤šç”¨æˆ·ä½¿ç”¨ï¼Œæ‰€ä»¥ç§°ä¸ºå…±äº«ç¼“å­˜ã€‚å¯è§ï¼Œå…±äº«ç¼“å­˜å¸¦æ¥çš„æ€§èƒ½æ”¶ç›Šè¢«åºå¤§çš„å®¢æˆ·ç«¯ç¾¤ä½“æ”¾å¤§äº†ã€‚ä½ å¯ä»¥çœ‹åˆ°åœ¨ä¸‹é¢çš„RESTæ¶æ„å›¾ä¸­ï¼Œè¡¨ç¤ºç¼“å­˜çš„$ç¬¦å·ï¼ˆç¼“å­˜çš„è‹±æ–‡åç§°æ˜¯cacheï¼Œç”±äºå®ƒçš„å‘éŸ³ä¸cashå¾ˆåƒï¼Œæ‰€ä»¥è®¸å¤šè‹±æ–‡æ–‡æ¡£ä¸­ç”¨ç¾å…ƒç¬¦å·æ¥è¡¨ç¤ºç¼“å­˜ï¼‰æ—¢å­˜åœ¨äºUser Agentæµè§ˆå™¨ä¸­ï¼Œä¹Ÿå­˜åœ¨äºProxyæ­£å‘ä»£ç†æœåŠ¡å™¨å’ŒGatewayåå‘ä»£ç†ä¸Šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/ff/b6950aa62483c56438c41bc4b2f43bff.png?wh=748*334\" alt=\"\" title=\"å›¾ç‰‡æ¥è‡ªç½‘ç»œ\"></p><p>å¯è§ï¼Œç¼“å­˜ä¸äº’è”ç½‘ä¸–ç•Œçš„ç½‘ç»œæ•ˆç‡å¯†åˆ‡ç›¸å…³ï¼Œç”¨å¥½ç¼“å­˜æ˜¯æå‡HTTPæ€§èƒ½æœ€é‡è¦çš„æ‰‹æ®µã€‚</p><h2>å¦‚ä½•é™ä½HTTPè¯·æ±‚çš„æ¬¡æ•°ï¼Ÿ</h2><p>å¦‚æœä¸å¾—ä¸å‘èµ·è¯·æ±‚ï¼Œå°±åº”è¯¥å°½é‡å‡å°‘HTTPè¯·æ±‚çš„æ¬¡æ•°ï¼Œè¿™å¯ä»¥ä»å‡å°‘é‡å®šå‘æ¬¡æ•°ã€åˆå¹¶è¯·æ±‚ã€å»¶è¿Ÿå‘é€è¯·æ±‚ç­‰3ä¸ªæ–¹é¢å…¥æ‰‹ã€‚</p><p>é¦–å…ˆæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯é‡å®šå‘è¯·æ±‚ï¼Œä¸€ä¸ªèµ„æºç”±äºè¿ç§»ã€ç»´æŠ¤ç­‰åŸå› ä»url1ç§»è‡³url2åï¼Œåœ¨å®¢æˆ·ç«¯è®¿é—®åŸå…ˆçš„url1æ—¶ï¼ŒæœåŠ¡å™¨ä¸èƒ½ç®€å•ç²—æš´åœ°è¿”å›é”™è¯¯ï¼Œè€Œæ˜¯é€šè¿‡302å“åº”ç åŠLocationå¤´éƒ¨ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯èµ„æºå·²ç»æ”¹åˆ°url2äº†ï¼Œè€Œå®¢æˆ·ç«¯å†ç”¨url2å‘èµ·æ–°çš„HTTPè¯·æ±‚ã€‚</p><p>å¯è§ï¼Œé‡å®šå‘å¢åŠ äº†è¯·æ±‚çš„æ•°é‡ã€‚å°¤å…¶å®¢æˆ·ç«¯åœ¨å…¬ç½‘ä¸­æ—¶ï¼Œç”±äºå…¬ç½‘é€Ÿåº¦æ…¢ã€æˆæœ¬é«˜ã€è·¯å¾„é•¿ã€ä¸ç¨³å®šï¼Œè€Œä¸”ä¸ºäº†ä¿¡æ¯å®‰å…¨æ€§è¿˜è¦ç”¨TLSåè®®åŠ å¯†ï¼Œè¿™äº›éƒ½é™ä½äº†ç½‘ç»œæ€§èƒ½ã€‚ä»ä¸Šé¢çš„RESTæ¶æ„å›¾å¯ä»¥çœ‹åˆ°ï¼ŒHTTPè¯·æ±‚ä¼šç»è¿‡å¤šä¸ªä»£ç†æœåŠ¡å™¨ï¼Œå¦‚æœå°†é‡å®šå‘å·¥ä½œäº¤ç”±ä»£ç†æœåŠ¡å™¨å®Œæˆï¼Œå°±èƒ½å‡å°‘ç½‘ç»œæ¶ˆè€—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0d/2a/0d1701737956ce65f3d5ec8fa8009f2a.png?wh=724*842\" alt=\"\"></p><p>æ›´è¿›ä¸€æ­¥ï¼Œå®¢æˆ·ç«¯è¿˜å¯ä»¥ç¼“å­˜é‡å®šå‘å“åº”ã€‚RFCè§„èŒƒå®šä¹‰äº†5ä¸ªé‡å®šå‘å“åº”ç ï¼ˆå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼‰ï¼Œå…¶ä¸­å®¢æˆ·ç«¯æ¥æ”¶åˆ°301å’Œ308åéƒ½å¯ä»¥å°†é‡å®šå‘å“åº”ç¼“å­˜è‡³æœ¬åœ°ï¼Œä¹‹åå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ç”¨url2æ›¿ä»£url1è®¿é—®ç½‘ç»œèµ„æºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/85/70/85b55f50434fc1acd2ead603e5c57870.jpg?wh=2324*712\" alt=\"\"></p><p>å…¶æ¬¡æˆ‘ä»¬æ¥çœ‹å¦‚ä½•åˆå¹¶è¯·æ±‚ã€‚å½“å¤šä¸ªè®¿é—®å°æ–‡ä»¶çš„è¯·æ±‚è¢«åˆå¹¶ä¸ºä¸€ä¸ªè®¿é—®å¤§æ–‡ä»¶çš„è¯·æ±‚æ—¶ï¼Œè¿™æ ·è™½ç„¶ä¼ è¾“çš„æ€»èµ„æºä½“ç§¯æœªå˜ï¼Œä½†å‡å°‘è¯·æ±‚å°±æ„å‘³ç€å‡å°‘äº†é‡å¤å‘é€çš„HTTPå¤´éƒ¨ï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†TCPè¿æ¥çš„æ•°é‡ï¼Œå› è€Œçœå»äº†TCPæ¡æ‰‹å’Œæ…¢å¯åŠ¨è¿‡ç¨‹æ¶ˆè€—çš„æ—¶é—´ï¼ˆå‚è§ç¬¬12è¯¾ï¼‰ã€‚æˆ‘ä»¬å…·ä½“çœ‹å‡ ç§åˆå¹¶è¯·æ±‚çš„æ–¹å¼ã€‚</p><p>ä¸€äº›WEBé¡µé¢å¾€å¾€å«æœ‰å‡ åã€ä¸Šç™¾ä¸ªå°å›¾ç‰‡ï¼Œç”¨<a href=\"https://www.tutorialrepublic.com/css-tutorial/css-sprites.php\">CSS Image SpritesæŠ€æœ¯</a>å¯ä»¥å°†å®ƒä»¬åˆæˆä¸€å¼ å¤§å›¾ç‰‡ï¼Œè€Œæµè§ˆå™¨è·å¾—åå¯ä»¥æ ¹æ®CSSæ•°æ®æŠŠå®ƒåˆ‡å‰²è¿˜åŸä¸ºå¤šå¼ å°å›¾ç‰‡ï¼Œè¿™å¯ä»¥å¤§å¹…å‡å°‘ç½‘ç»œæ¶ˆè€—ã€‚</p><p><a href=\"https://blog.csdn.net/weixin_38055381/article/details/81504716\"><img src=\"https://static001.geekbang.org/resource/image/e4/ed/e4a760a95542701d99b8a38ccddaebed.png?wh=1502*628\" alt=\"\" title=\"å›¾ç‰‡æ¥è‡ª[é»‘æŸ“æ«æ—çš„CSDNåšå®¢]\"></a></p><p>ç±»ä¼¼åœ°ï¼Œåœ¨æœåŠ¡å™¨ç«¯ç”¨webpackç­‰æ‰“åŒ…å·¥å…·å°†Javascriptã€CSSç­‰èµ„æºåˆå¹¶ä¸ºå¤§æ–‡ä»¶ï¼Œä¹Ÿèƒ½èµ·åˆ°åŒæ ·çš„æ•ˆæœã€‚</p><p>é™¤æ­¤ä»¥å¤–ï¼Œè¿˜å¯ä»¥å°†å¤šåª’ä½“èµ„æºç”¨base64ç¼–ç åï¼Œä»¥URLçš„æ–¹å¼åµŒå…¥HTMLæ–‡ä»¶ä¸­ï¼Œä»¥å‡å°‘å°è¯·æ±‚çš„ä¸ªæ•°ï¼ˆå‚è§<a href=\"https://tools.ietf.org/html/rfc2397\">RFC2397</a>ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/27/fb/27aa119e0104f41a6718987cdf71c8fb.png?wh=1299*287\" alt=\"\"></p><p>ç”¨Chromeæµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Networké¢æ¿å¯ä»¥è½»æ¾åœ°åˆ¤æ–­å„ç«™ç‚¹æ˜¯å¦ä½¿ç”¨äº†è¿™ç§æŠ€æœ¯ã€‚å…³äºNetworké¢æ¿çš„ç”¨æ³•ï¼Œæˆ‘ä»¬åœ¨æ­¤å°±ä¸èµ˜è¿°äº†ï¼ˆå¯å‚è€ƒ<a href=\"https://time.geekbang.org/course/detail/175-93594\">ã€ŠWebåè®®è¯¦è§£ä¸æŠ“åŒ…å®æˆ˜ã€‹ç¬¬9è¯¾</a>ï¼Œé‚£é‡Œæœ‰è¯¦ç»†çš„ä»‹ç»ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ab/74/ab75920b0c43e4f7fcbc5933005afb74.png?wh=534*700\" alt=\"\"></p><p>å½“ç„¶ï¼Œè¿™ç§åˆå¹¶è¯·æ±‚çš„æ–¹å¼ä¹Ÿä¼šå¸¦æ¥ä¸€ä¸ªæ–°é—®é¢˜ï¼Œå³ï¼Œå½“å…¶ä¸­ä¸€ä¸ªèµ„æºå‘ç”Ÿå˜åŒ–åï¼Œå®¢æˆ·ç«¯å¿…é¡»é‡æ–°ä¸‹è½½å®Œæ•´çš„å¤§æ–‡ä»¶ï¼Œè¿™æ˜¾ç„¶ä¼šå¸¦æ¥é¢å¤–çš„ç½‘ç»œæ¶ˆè€—ã€‚åœ¨è½åçš„HTTP/1.1åè®®ä¸­ï¼Œåˆå¹¶è¯·æ±‚è¿˜ç®—ä¸€ä¸ªä¸é”™çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨ä¸‹ä¸€è®²å°†ä»‹ç»çš„HTTP/2å‡ºç°åï¼Œè¿™ç§æŠ€æœ¯å°±æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°äº†ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä»æµè§ˆé¡µé¢çš„ä½“éªŒè§’åº¦ä¸Šï¼Œå‡å°‘HTTPè¯·æ±‚çš„æ¬¡æ•°ã€‚æ¯”å¦‚ï¼Œæœ‰äº›HTMLé¡µé¢ä¸Šå¼•ç”¨çš„èµ„æºï¼Œå…¶å®åœ¨å½“å‰é¡µé¢ä¸Šç”¨ä¸ä¸Šï¼Œè€Œæ˜¯ä¾›åç»­é¡µé¢ä½¿ç”¨çš„ï¼Œè¿™å°±å¯ä»¥ä½¿ç”¨æ‡’åŠ è½½ï¼ˆ<a href=\"https://zh.wikipedia.org/wiki/%E6%83%B0%E6%80%A7%E8%BC%89%E5%85%A5\">lazy loading</a>ï¼‰ æŠ€æœ¯å»¶è¿Ÿå‘èµ·è¯·æ±‚ã€‚</p><p>å½“ä¸å¾—ä¸å‘èµ·è¯·æ±‚æ—¶ï¼Œè¿˜å¯ä»¥ä»æœåŠ¡å™¨çš„è§’åº¦é€šè¿‡å‡å°‘å“åº”åŒ…ä½“çš„ä½“ç§¯æ¥æå‡æ€§èƒ½ã€‚</p><h2>å¦‚ä½•é‡æ–°ç¼–ç ä»¥å‡å°‘å“åº”çš„å¤§å°ï¼Ÿ</h2><p>å‡å°‘èµ„æºä½“ç§¯çš„å”¯ä¸€æ–¹å¼æ˜¯å¯¹èµ„æºé‡æ–°ç¼–ç å‹ç¼©ï¼Œå…¶ä¸­åˆåˆ†ä¸º<a href=\"https://zh.wikipedia.org/wiki/%E6%97%A0%E6%8D%9F%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9\">æ— æŸå‹ç¼©</a>ä¸<a href=\"https://zh.wikipedia.org/wiki/%E6%9C%89%E6%8D%9F%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9\">æœ‰æŸå‹ç¼©</a>ä¸¤ç§ã€‚</p><p>å…ˆæ¥çœ‹æ— æŸå‹ç¼©ï¼Œè¿™æ˜¯æŒ‡å‹ç¼©åä¸ä¼šæŸå¤±ä»»ä½•ä¿¡æ¯ï¼Œå¯ä»¥å®Œå…¨æ¢å¤åˆ°å‹ç¼©å‰çš„åŸæ ·ã€‚å› æ­¤ï¼Œæ–‡æœ¬æ–‡ä»¶ã€äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶éƒ½ä¼šä½¿ç”¨è¿™ç±»å‹ç¼©æ–¹æ³•ã€‚</p><p>æºä»£ç ä¹Ÿæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œä½†å®ƒæœ‰è‡ªèº«çš„è¯­æ³•è§„åˆ™ï¼Œæ‰€ä»¥å¯ä»¥ä¾æ®è¯­æ³•å…ˆåšä¸€è½®å‹ç¼©ã€‚æ¯”å¦‚<a href=\"https://jquery.com/download/\">jQuery</a> æ˜¯ç”¨javascriptè¯­è¨€ç¼–å†™çš„åº“ï¼Œè€Œæ ‡å‡†ç‰ˆçš„jQuery.jsä¸ºäº†å¸®åŠ©ç¨‹åºå‘˜é˜…è¯»å«æœ‰è®¸å¤šç©ºæ ¼ã€å›è½¦ç­‰ç¬¦å·ï¼Œä½†æœºå™¨è§£é‡Šæ‰§è¡Œæ—¶å¹¶ä¸éœ€è¦è¿™äº›ç¬¦å·ã€‚å› æ­¤ï¼Œæ ¹æ®è¯­æ³•è§„åˆ™å°†è¿™äº›å¤šä½™çš„ç¬¦å·å»é™¤æ‰ï¼Œå°±å¯ä»¥å°†jQueryæ–‡ä»¶çš„ä½“ç§¯å‹ç¼©åˆ°åŸå…ˆçš„ä¸‰åˆ†ä¹‹ä¸€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/de/ba/de0fc2a64a100bc83fc48eb2606fedba.png?wh=1257*218\" alt=\"\"></p><p>æ¥ç€å¯ä»¥åŸºäºä¿¡æ¯ç†µåŸç†è¿›è¡Œé€šç”¨çš„æ— æŸå‹ç¼©ï¼Œè¿™éœ€è¦å¯¹åŸæ–‡å»ºç«‹ç»Ÿè®¡æ¨¡å‹ï¼Œå°†å‡ºç°é¢‘ç‡é«˜çš„æ•°æ®ç”¨è¾ƒçŸ­çš„äºŒè¿›åˆ¶æ¯”ç‰¹åºåˆ—è¡¨ç¤ºï¼Œè€Œå°†å‡ºç°é¢‘ç‡ä½çš„æ•°æ®ç”¨è¾ƒé•¿çš„æ¯”ç‰¹åºåˆ—è¡¨ç¤ºã€‚æˆ‘ä»¬æœ€å¸¸è§çš„Huffmanç®—æ³•å°±æ˜¯ä¸€ç§æ‰§è¡Œé€Ÿåº¦è¾ƒå¿«çš„å®è·µï¼Œåœ¨ä¸‹ä¸€è®²çš„HTTP/2åè®®ä¸­è¿˜ä¼šç”¨åˆ°å®ƒã€‚åœ¨ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæœ€å°ç‰ˆçš„jQueryæ–‡ä»¶ç»è¿‡Huffmanç­‰ç®—æ³•å‹ç¼©åï¼Œä½“ç§¯è¿˜ä¼šå†ç¼©å°ä¸‰åˆ†ä¹‹äºŒã€‚</p><p>æ”¯æŒæ— æŸå‹ç¼©ç®—æ³•çš„å®¢æˆ·ç«¯ä¼šåœ¨è¯·æ±‚ä¸­é€šè¿‡Accept-Encodingå¤´éƒ¨æ˜ç¡®åœ°å‘Šè¯‰æœåŠ¡å™¨ï¼š</p><pre><code>Accept-Encoding: gzip, deflate, br\n</code></pre><p>è€ŒæœåŠ¡å™¨ä¹Ÿä¼šåœ¨å“åº”çš„å¤´éƒ¨ä¸­ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯åŒ…ä½“ä¸­çš„èµ„æºä½¿ç”¨äº†ä½•ç§å‹ç¼©ç®—æ³•ï¼ˆNginxå¼€å¯èµ„æºå‹ç¼©çš„æ–¹å¼å‚è§ã€ŠNginxæ ¸å¿ƒçŸ¥è¯†100è®²ã€‹<a href=\"https://time.geekbang.org/course/detail/138-79618\">ç¬¬131è¯¾</a>å’Œ<a href=\"https://time.geekbang.org/course/detail/138-79621\">ç¬¬134è¯¾</a>ï¼‰ï¼š</p><pre><code>content-encoding: gzip\n</code></pre><p>è™½ç„¶ç›®å‰gzipä½¿ç”¨æœ€ä¸ºå¹¿æ³›ï¼Œä½†å®ƒçš„å‹ç¼©æ•ˆç‡ä»¥åŠæ‰§è¡Œé€Ÿåº¦å…¶å®éƒ½å¾ˆä¸€èˆ¬ï¼ŒGoogleäº2015å¹´æ¨å‡ºçš„<a href=\"https://zh.wikipedia.org/wiki/Brotli\">Brotli</a> ç®—æ³•åœ¨è¿™ä¸¤æ–¹é¢è¡¨ç°éƒ½æ›´ä¼˜ç§€ï¼ˆä¹Ÿå°±æ˜¯ä¸Šæ–‡ä¸­çš„brï¼‰ï¼Œå…¶å¯¹æ¯”æ•°æ®å¦‚ä¸‹ï¼š</p><p><a href=\"https://quixdb.github.io/squash-benchmark/\"><img src=\"https://static001.geekbang.org/resource/image/62/cb/62e01433ad8ef23ab698e7c47b7cc8cb.png?wh=1343*813\" alt=\"\" title=\"å›¾ç‰‡æ¥æºï¼š[https://quixdb.github.io/squash-benchmark/]\"></a></p><p>å†æ¥çœ‹æœ‰æŸå‹ç¼©ï¼Œå®ƒé€šè¿‡ç‰ºç‰²è´¨é‡æ¥æé«˜å‹ç¼©æ¯”ï¼Œä¸»è¦é’ˆå¯¹çš„æ˜¯å›¾ç‰‡å’ŒéŸ³è§†é¢‘ã€‚HTTPè¯·æ±‚å¯ä»¥é€šè¿‡Acceptå¤´éƒ¨ä¸­çš„qè´¨é‡å› å­ï¼ˆå‚è§<a href=\"https://tools.ietf.org/html/rfc7231#section-5.3.2\">RFC7231</a>ï¼‰ï¼Œå‘Šè¯‰æœåŠ¡å™¨æœŸæœ›çš„èµ„æºè´¨é‡ï¼š</p><pre><code>Accept: audio/*; q=0.2, audio/basic\n</code></pre><p>å…ˆæ¥çœ‹å›¾ç‰‡çš„å‹ç¼©ã€‚ç›®å‰å‹ç¼©æ¯”è¾ƒé«˜çš„å¼€æºç®—æ³•æ˜¯Googleåœ¨2010å¹´æ¨å‡ºçš„<a href=\"https://zh.wikipedia.org/wiki/WebP\">WebPæ ¼å¼</a>ï¼Œä½ å¯ä»¥åœ¨<a href=\"https://isparta.github.io/compare-webp/index.html#12345\">è¿™ä¸ªé¡µé¢</a>çœ‹åˆ°å®ƒä¸pngæ ¼å¼å›¾ç‰‡çš„å¯¹æ¯”å›¾ã€‚å¯¹äºå¤§é‡ä½¿ç”¨å›¾ç‰‡çš„ç½‘ç«™ï¼Œä½¿ç”¨å®ƒä»£æ›¿ä¼ ç»Ÿæ ¼å¼ä¼šæœ‰æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚</p><p>åŠ¨æ€çš„éŸ³è§†é¢‘å‹ç¼©æ¯”è¦æ¯”è¡¨æ€çš„å›¾ç‰‡é«˜å¾ˆå¤šï¼ç”±äºéŸ³è§†é¢‘æ•°æ®æœ‰æ—¶åºå…³ç³»ï¼Œä¸”æ—¶é—´è¿ç»­çš„å¸§ä¹‹é—´å˜åŒ–å¾ˆå°ï¼Œå› æ­¤å¯ä»¥åœ¨é™æ€çš„å…³é”®å¸§ä¹‹åï¼Œä½¿ç”¨å¢é‡æ•°æ®è¡¨è¾¾åç»­çš„å¸§ï¼Œå› æ­¤åœ¨è´¨é‡ç•¥æœ‰æŸå¤±çš„æƒ…å†µä¸‹ï¼ŒéŸ³é¢‘ä½“ç§¯å¯ä»¥å‹ç¼©åˆ°åŸå…ˆçš„å‡ ååˆ†ä¹‹ä¸€ï¼Œè§†é¢‘ä½“ç§¯åˆ™å¯ä»¥å‹ç¼©åˆ°å‡ ç™¾åˆ†ä¹‹ä¸€ï¼Œæ¯”å›¾ç‰‡çš„å‹ç¼©æ¯”è¦é«˜å¾—å¤šã€‚å› æ­¤ï¼Œå¯¹éŸ³è§†é¢‘åšæœ‰æŸå‹ç¼©ï¼Œèƒ½å¤Ÿå¤§å¹…æå‡ç½‘ç»œä¼ è¾“çš„æ€§èƒ½ã€‚</p><p>å¯¹å“åº”èµ„æºåšå‹ç¼©ä¸åªç”¨äºHTTP/1.1åè®®ï¼Œäº‹å®ä¸Šå®ƒå¯¹ä»»ä½•ä¿¡æ¯ä¼ è¾“åœºæ™¯éƒ½æœ‰æ•ˆï¼Œæ¶ˆè€—ä¸€äº›CPUè®¡ç®—åŠ›åœ¨äº‹å‰æˆ–è€…äº‹ä¸­åšå‹ç¼©ï¼Œé€šå¸¸ä¼šç»™æ€§èƒ½å¸¦æ¥ä¸é”™çš„æå‡ã€‚</p><h2>å°ç»“</h2><p>è¿™ä¸€è®²æˆ‘ä»¬ä»ä¸‰ä¸ªæ–¹é¢ä»‹ç»äº†HTTP/1.1åè®®çš„ä¼˜åŒ–ç­–ç•¥ã€‚</p><p>é¦–å…ˆï¼Œå®¢æˆ·ç«¯ç¼“å­˜å“åº”ï¼Œå¯ä»¥åœ¨æœ‰æ•ˆæœŸå†…é¿å…å‘èµ·HTTPè¯·æ±‚ã€‚å³ä½¿ç¼“å­˜è¿‡æœŸåï¼Œå¦‚æœæœåŠ¡å™¨ç«¯èµ„æºæœªæ”¹å˜ï¼Œä»ç„¶å¯ä»¥é€šè¿‡304å“åº”é¿å…å‘é€åŒ…ä½“èµ„æºã€‚æµè§ˆå™¨ä¸Šçš„ç§æœ‰ç¼“å­˜ã€æœåŠ¡å™¨ä¸Šçš„å…±äº«ç¼“å­˜ï¼Œéƒ½å¯¹HTTPåè®®çš„æ€§èƒ½æå‡æœ‰å¾ˆå¤§æ„ä¹‰ã€‚</p><p>å…¶æ¬¡æ˜¯é™ä½è¯·æ±‚çš„æ•°é‡ï¼Œå¦‚å°†åŸæœ¬ç”±å®¢æˆ·ç«¯å¤„ç†çš„é‡å®šå‘è¯·æ±‚ï¼Œç§»è‡³ä»£ç†æœåŠ¡å™¨å¤„ç†å¯ä»¥å‡å°‘é‡å®šå‘è¯·æ±‚çš„æ•°é‡ã€‚æˆ–è€…ä»ä½“éªŒè§’åº¦ï¼Œä½¿ç”¨æ‡’åŠ è½½æŠ€æœ¯å»¶è¿ŸåŠ è½½éƒ¨åˆ†èµ„æºï¼Œä¹Ÿå¯ä»¥å‡å°‘è¯·æ±‚æ•°é‡ã€‚å†æ¯”å¦‚ï¼Œå°†å¤šä¸ªæ–‡ä»¶åˆå¹¶åå†ä¼ è¾“ï¼Œèƒ½å¤Ÿå°‘ä¼ è®¸å¤šHTTPå¤´éƒ¨ï¼Œè€Œä¸”å‡å°‘TCPè¿æ¥æ•°é‡åä¹Ÿçœå»æ¡æ‰‹å’Œæ…¢å¯åŠ¨çš„æ¶ˆè€—ã€‚å½“ç„¶åˆå¹¶æ–‡ä»¶çš„å‰¯ä½œç”¨æ˜¯å°æ–‡ä»¶çš„æ›´æ–°ï¼Œä¼šå¯¼è‡´æ•´ä¸ªåˆå¹¶åçš„å¤§æ–‡ä»¶é‡ä¼ ã€‚</p><p>æœ€åå¯ä»¥é€šè¿‡å‹ç¼©å“åº”æ¥é™ä½ä¼ è¾“çš„å­—èŠ‚æ•°ï¼Œé€‰æ‹©æ›´ä¼˜ç§€çš„å‹ç¼©ç®—æ³•èƒ½å¤Ÿæœ‰æ•ˆé™ä½ä¼ è¾“é‡ï¼Œæ¯”å¦‚ç”¨Brotliæ— æŸå‹ç¼©ç®—æ³•æ›¿æ¢gzipï¼Œæˆ–è€…ç”¨WebPæ ¼å¼æ›¿æ¢pngç­‰æ ¼å¼å›¾ç‰‡ç­‰ã€‚</p><p>ä½†å…¶å®åœ¨HTTP/1.1åè®®ä¸Šåšä¼˜åŒ–æ•ˆæœæ€»æ˜¯æœ‰é™çš„ï¼Œä¸‹ä¸€è®²æˆ‘ä»¬è¿˜å°†ä»‹ç»åœ¨URLã€å¤´éƒ¨ç­‰é«˜å±‚è¯­æ³•ä¸Šå‘å‰å…¼å®¹çš„HTTP/2åè®®ï¼Œå®ƒåœ¨æ€§èƒ½ä¸Šæœ‰å¤§å¹…åº¦æå‡ï¼Œæ˜¯å¦‚gRPCç­‰åº”ç”¨å±‚åè®®çš„åŸºç¡€ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>é™¤äº†æˆ‘ä»Šå¤©ä»‹ç»çš„æ–¹æ³•ä»¥å¤–ï¼Œä½¿ç”¨KeepAliveé•¿è¿æ¥æ›¿æ¢çŸ­è¿æ¥ä¹Ÿèƒ½æå‡æ€§èƒ½ï¼Œä½ è¿˜çŸ¥é“æœ‰å“ªäº›æå‡HTTP/1.1æ€§èƒ½çš„æ–¹æ³•å—ï¼Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘ä¸€èµ·æ¢è®¨ã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™èŠ‚è¯¾å¯¹ä½ æœ‰ä¸€äº›å¯å‘ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"14 | ä¼˜åŒ–TLS/SSLæ€§èƒ½è¯¥ä»ä½•ä¸‹æ‰‹ï¼Ÿ","id":241632},"right":{"article_title":"16 | HTTP/2æ˜¯æ€æ ·æå‡æ€§èƒ½çš„ï¼Ÿ","id":245966}},"comments":[{"had_liked":false,"id":223227,"user_name":"Geek_007","can_delete":false,"product_type":"c1","uid":1467182,"ip_address":"","ucode":"C80107538EAA7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/2e/e49116d1.jpg","comment_is_top":false,"comment_ctime":1591024086,"is_pvip":false,"replies":[{"id":"82394","content":"ä½ å¥½Geek_007ï¼Œè¿™3ä¸ªé—®é¢˜æˆ‘çš„çœ‹æ³•å¦‚ä¸‹ï¼š<br>1ã€å‹ç¼©ç®—æ³•çš„åŸç†éƒ½æ˜¯åŸºäºé¦™å†œçš„ä¿¡æ¯è®ºï¼Œå°†é«˜é¢‘å‡ºç°çš„ä¿¡æ¯ç”¨æ›´å°‘çš„æ¯”ç‰¹ç¼–ç ã€‚è™½ç„¶åŸç†æ˜¯ä¸€è‡´çš„ï¼Œä½†å®ç°ä¸Šå´æœ‰å¾ˆå¤§çš„å·®åˆ«ï¼Œæ¯”å¦‚Huffmané€šè¿‡å»ºç«‹Huffmanæ ‘æ¥ç”Ÿæˆç¼–ç ï¼Œè€ŒLZ77å´æ˜¯é€šè¿‡æ»‘åŠ¨çª—å£ï¼Œè¿™é€ æˆå‹ç¼©æ¯”ã€å‹ç¼©é€Ÿåº¦éƒ½å¾ˆä¸ç›¸åŒã€‚<br>2ã€æ¯”è¾ƒå®ƒä»¬çš„ä¼˜åŠ£ï¼Œä¸»è¦çœ‹3ä¸ªæŒ‡æ ‡ï¼š<br>a. å‹ç¼©æ¯”ï¼Œæ¯”å¦‚brotliçš„å‹ç¼©æ¯”å¥½äºZSTDã€‚<br>b. å‹ç¼©ä¸è§£å‹çš„é€Ÿåº¦ï¼Œæ¯”å¦‚ZSTDæ¯”gzipé€Ÿåº¦å¿«<br>c. æµè§ˆå™¨ç­‰ä¸­é—´ä»¶çš„æ”¯æŒç¨‹åº¦ï¼Œç°åœ¨å‡ ä¹æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒbrotliï¼ˆå³brï¼‰ï¼Œä½†ZSTDå°‘æœ‰æ”¯æŒ<br>3ã€æ²¡æœ‰æœ€é€‚åˆç®—æ³•ï¼Œå¯¹å…·ä½“çš„åœºæ™¯ï¼Œæ¯”è¾ƒæ–¹æ³•å‚è§ç¬¬2ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1591170840,"ip_address":"","comment_id":223227,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57425598934","product_id":100051201,"comment_content":"FBä¹Ÿæäº†ä¸€å¥—å‹ç¼©ç®—æ³•ZSTDï¼Œå¯¹æ¯”èµ·æ¥ä¹Ÿæ¯”gzipæ€§èƒ½å¼ºå¾ˆå¤šï¼Œä¸æ¸…æ¥šè¿™äº›å‹ç¼©ç®—æ³•çš„åŸç†æ˜¯å•¥ï¼Œæ€ä¹ˆå¯¹æ¯”ï¼Œå¸Œæœ›è€å¸ˆä¹‹åèƒ½ç­”ç–‘ä¸€ä¸‹ã€‚å¦å¤–æ™®é€šçš„jsonå’Œpbæœ‰ä¸åŒé€‚åˆçš„å‹ç¼©ç®—æ³•å—ï¼Ÿæ€ä¹ˆæ¯”è¾ƒå‘¢ï¼Ÿ","like_count":13,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497065,"discussion_content":"ä½ å¥½Geek_007ï¼Œè¿™3ä¸ªé—®é¢˜æˆ‘çš„çœ‹æ³•å¦‚ä¸‹ï¼š\n1ã€å‹ç¼©ç®—æ³•çš„åŸç†éƒ½æ˜¯åŸºäºé¦™å†œçš„ä¿¡æ¯è®ºï¼Œå°†é«˜é¢‘å‡ºç°çš„ä¿¡æ¯ç”¨æ›´å°‘çš„æ¯”ç‰¹ç¼–ç ã€‚è™½ç„¶åŸç†æ˜¯ä¸€è‡´çš„ï¼Œä½†å®ç°ä¸Šå´æœ‰å¾ˆå¤§çš„å·®åˆ«ï¼Œæ¯”å¦‚Huffmané€šè¿‡å»ºç«‹Huffmanæ ‘æ¥ç”Ÿæˆç¼–ç ï¼Œè€ŒLZ77å´æ˜¯é€šè¿‡æ»‘åŠ¨çª—å£ï¼Œè¿™é€ æˆå‹ç¼©æ¯”ã€å‹ç¼©é€Ÿåº¦éƒ½å¾ˆä¸ç›¸åŒã€‚\n2ã€æ¯”è¾ƒå®ƒä»¬çš„ä¼˜åŠ£ï¼Œä¸»è¦çœ‹3ä¸ªæŒ‡æ ‡ï¼š\na. å‹ç¼©æ¯”ï¼Œæ¯”å¦‚brotliçš„å‹ç¼©æ¯”å¥½äºZSTDã€‚\nb. å‹ç¼©ä¸è§£å‹çš„é€Ÿåº¦ï¼Œæ¯”å¦‚ZSTDæ¯”gzipé€Ÿåº¦å¿«\nc. æµè§ˆå™¨ç­‰ä¸­é—´ä»¶çš„æ”¯æŒç¨‹åº¦ï¼Œç°åœ¨å‡ ä¹æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒbrotliï¼ˆå³brï¼‰ï¼Œä½†ZSTDå°‘æœ‰æ”¯æŒ\n3ã€æ²¡æœ‰æœ€é€‚åˆç®—æ³•ï¼Œå¯¹å…·ä½“çš„åœºæ™¯ï¼Œæ¯”è¾ƒæ–¹æ³•å‚è§ç¬¬2ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591170840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222910,"user_name":"Geek_007","can_delete":false,"product_type":"c1","uid":1467182,"ip_address":"","ucode":"C80107538EAA7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/2e/e49116d1.jpg","comment_is_top":false,"comment_ctime":1590956130,"is_pvip":false,"replies":[{"id":"82229","content":"å…³é”®è¿˜æ˜¯çœ‹æµè§ˆå™¨å¯¹æ ¼å¼çš„æ”¯æŒç¨‹åº¦ã€‚ç›®å‰ï¼ŒIEã€Firefoxã€Chromeç­‰ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒwebpï¼Œä½†TPGå°±ä¸å¥½è¯´äº†ï¼Œé™¤éäº§å“ç”¨æˆ·ä¸»è¦åœ¨ä½¿ç”¨ QQæµè§ˆå™¨^_^","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1591016879,"ip_address":"","comment_id":222910,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27360759906","product_id":100051201,"comment_content":"å›¾ç‰‡å‹ç¼©ï¼Œè…¾è®¯è¯´ä»–ä»¬çš„TPGæ¯”Webpå‹ç¼©çš„æ›´å°å‘¢ğŸ˜€ï¼Œä¸è¿‡é™¤äº†ä»–ä»¬å†…éƒ¨è¿™ä¹ˆè¯´ï¼Œæ²¡è§è¿‡ç¬¬ä¸‰æ–¹èµ„æ–™çš„è¯æ˜","like_count":6,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496956,"discussion_content":"å…³é”®è¿˜æ˜¯çœ‹æµè§ˆå™¨å¯¹æ ¼å¼çš„æ”¯æŒç¨‹åº¦ã€‚ç›®å‰ï¼ŒIEã€Firefoxã€Chromeç­‰ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒwebpï¼Œä½†TPGå°±ä¸å¥½è¯´äº†ï¼Œé™¤éäº§å“ç”¨æˆ·ä¸»è¦åœ¨ä½¿ç”¨ QQæµè§ˆå™¨^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591016879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224997,"user_name":"æ–°å£°å¸¦NewVoice","can_delete":false,"product_type":"c1","uid":1351485,"ip_address":"","ucode":"9E1AEA7A717054","user_header":"https://static001.geekbang.org/account/avatar/00/14/9f/3d/b400b98e.jpg","comment_is_top":false,"comment_ctime":1591611685,"is_pvip":true,"replies":[{"id":"83145","content":"æ²¡é”™ï¼Œæœ‰äº›æ¶ˆæ¯æ¨é€æ˜¯ç”¨chunkå®ç°çš„","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1591837684,"ip_address":"","comment_id":224997,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14476513573","product_id":100051201,"comment_content":"å°è¯•è¿‡http1.1 chunkå­åè®®ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªè¿æ¥ä¸Šï¼ŒæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€å¤šæ¬¡æ•°æ®ã€‚","like_count":3,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497685,"discussion_content":"æ²¡é”™ï¼Œæœ‰äº›æ¶ˆæ¯æ¨é€æ˜¯ç”¨chunkå®ç°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591837684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223078,"user_name":"æœ‰é“­","can_delete":false,"product_type":"c1","uid":1046302,"ip_address":"","ucode":"2C7CB36CA5C04C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3XbCueYYVWTiclv8T5tFpwiblOxLphvSZxL4ujMdqVMibZnOiaFK2C5nKRGv407iaAsrI0CDICYVQJtiaITzkjfjbvrQ/132","comment_is_top":false,"comment_ctime":1590996788,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14475898676","product_id":100051201,"comment_content":"Accept å¤´éƒ¨ä¸­çš„ q è´¨é‡å› å­<br>======<br>æƒ³é—®ä¸€ä¸‹ï¼Œå½“æœåŠ¡å™¨æ¥æ”¶åˆ°è¿™æ ·çš„è¯·æ±‚åï¼Œæ˜¯èƒŒåçš„åº”ç”¨å±‚å¤„ç†è¿™ä¸ªå‹ç¼©ï¼Œè¿˜æ˜¯è¯´ï¼Œæ”¯æŒè¿™ä¸ªæ ‡å‡†çš„HttpæœåŠ¡å™¨æœ¬èº«å°±å¯ä»¥â€œé€æ˜â€çš„å®Œæˆè¿™ä¸ªå‹ç¼©å·¥ä½œ","like_count":3},{"had_liked":false,"id":223042,"user_name":"çš®ç‰¹å°”","can_delete":false,"product_type":"c1","uid":1017161,"ip_address":"","ucode":"313862C91DD325","user_header":"https://static001.geekbang.org/account/avatar/00/0f/85/49/585c69c4.jpg","comment_is_top":false,"comment_ctime":1590986131,"is_pvip":false,"replies":[{"id":"82213","content":"åœ¨å®è·µä¸­å­¦ä¹ ï¼Œèµï¼","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1590994615,"ip_address":"","comment_id":223042,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14475888019","product_id":100051201,"comment_content":"æœ€è¿‘æ­£å‡†å¤‡ç”¨gzipä¼˜åŒ–æˆ‘ä»¬çš„ä¸€ä¸ªåç«¯æœåŠ¡å°±çœ‹åˆ°äº†è¿™ä¸€è®²ï¼Œèµ¶å¿«è¯•è¯•Brotliç®—æ³•","like_count":3,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496997,"discussion_content":"åœ¨å®è·µä¸­å­¦ä¹ ï¼Œèµï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590994615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222991,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1590978212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10180912804","product_id":100051201,"comment_content":"ä¸€èˆ¬æ¥è¯´å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨ä¹‹é—´æ˜¯httpsåè®®ï¼Œè€Œä»£ç†æœåŠ¡å™¨å’Œæºç«™ä¹‹é—´å¯ä»¥åªä½¿ç”¨httpåè®®ï¼Œå‡å°‘httpsåè®®é¢å¤–çš„æ¶ˆæ¯äº¤äº’ã€‚<br>å¦å¤–åœ¨å‡å°‘httpåŒ…ä½“æ–¹é¢ï¼Œè€å¸ˆæ–‡ä¸­æåˆ°å›¾ç‰‡å‹ç¼©ï¼Œè€Œå¯¹äºéå›¾ç‰‡çš„ä¼ è¾“ï¼Œå¦‚å®šä¹‰çš„jsonç»“æ„ï¼Œå¯ä»¥é€šè¿‡ç®€åŒ–jsoné‡Œkeyï¼Œvalueçš„å­—èŠ‚æ•°æ¥å‡å°‘ä¼ è¾“åŒ…ä½“å¤§å°ã€‚","like_count":2},{"had_liked":false,"id":350359,"user_name":"ä¸Šæ‰å¤é¦™","can_delete":false,"product_type":"c1","uid":1521568,"ip_address":"","ucode":"9FDDE0979BCC8C","user_header":"https://static001.geekbang.org/account/avatar/00/17/37/a0/032d0828.jpg","comment_is_top":false,"comment_ctime":1656845771,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656845771","product_id":100051201,"comment_content":"å¦‚æœä¸Šè¿°æ–¹æ³•éƒ½é‡‡ç”¨äº†ã€‚é‚£ä¹ˆåªèƒ½æé«˜HTTPè¯·æ±‚çš„å¹¶å‘åº¦äº†ã€‚<br>1ã€å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå¤šå¼€TCPè¿æ¥çš„æ•°é‡ã€‚<br>2ã€å¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œå¯ä»¥å°†ç›¸åŒåŸŸåè§£æåˆ°ä¸åŒçš„IPï¼Œç„¶åæä¾›åŒæ ·çš„æœåŠ¡ã€‚<br>æœ¬è´¨ä¸Šï¼Œéƒ½æ˜¯ä¸ºäº†å¢åŠ TCPè¿æ¥çš„æ•°é‡ã€‚","like_count":0},{"had_liked":false,"id":350358,"user_name":"ä¸Šæ‰å¤é¦™","can_delete":false,"product_type":"c1","uid":1521568,"ip_address":"","ucode":"9FDDE0979BCC8C","user_header":"https://static001.geekbang.org/account/avatar/00/17/37/a0/032d0828.jpg","comment_is_top":false,"comment_ctime":1656845674,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656845674","product_id":100051201,"comment_content":"å¦‚æœä¸Šè¿°æ–¹æ³•éƒ½å°è¯•è¿‡ã€‚é‚£ä¹ˆåªèƒ½æé«˜httpè¯·æ±‚çš„å¹¶å‘åº¦äº†ã€‚","like_count":0},{"had_liked":false,"id":222928,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1590968311,"is_pvip":false,"replies":[{"id":"82228","content":"æ˜¯çš„ï¼Œå°±æ˜¯ä¸ºäº†è½¬æ¢å¯è§å­—ç¬¦ï¼Œè¿™æ ·æ›´æ–¹ä¾¿äº¤æ¢","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1591016727,"ip_address":"","comment_id":222928,"utype":1}],"discussion_count":6,"race_medal":0,"score":"1590968311","product_id":100051201,"comment_content":"base64ç¼–ç çš„ä½œç”¨æ˜¯å•¥å‘¢ï¼Ÿåªæ˜¯ä¸ºäº†æŠŠä¸å¯è§å­—ç¬¦å˜æˆå¯è§çš„å—ï¼Ÿæœåˆ°çš„èµ„æ–™éƒ½è®²base64çš„å®ç°åŸç†ä½†æ˜¯å¹¶æ²¡æœ‰è®²base64ç¼–ç çš„ä½œç”¨çš„ï¼Œå¥½åƒæŒºå¤šåœ°æ–¹ç”¨åˆ°è¿™ä¸ªç¼–ç äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496964,"discussion_content":"æ˜¯çš„ï¼Œå°±æ˜¯ä¸ºäº†è½¬æ¢å¯è§å­—ç¬¦ï¼Œè¿™æ ·æ›´æ–¹ä¾¿äº¤æ¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591016727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1017161,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/85/49/585c69c4.jpg","nickname":"çš®ç‰¹å°”","note":"","ucode":"313862C91DD325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277029,"discussion_content":"å¯¹äºç½‘é¡µé‡Œçš„å°å›¾ç‰‡ï¼Œæ”¹ç”¨Base64å­—ç¬¦ä¸²æ–¹å¼åŠ è½½ï¼Œå¯ä»¥ä½¿å›¾ç‰‡å’ŒHTMLåˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œä»è€Œå‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œä¼˜åŒ–ç½‘é¡µæ€§èƒ½ã€‚\nwebpackçš„url-loaderè®¾ç½®limitå°±å¯ä»¥è‡ªåŠ¨å®ç°å°äºlimitçš„å›¾ç‰‡è‡ªåŠ¨è½¬æ¢ä¸ºBase64","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590985743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1017161,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/85/49/585c69c4.jpg","nickname":"çš®ç‰¹å°”","note":"","ucode":"313862C91DD325","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277044,"discussion_content":"å›¾ç‰‡å†…å®¹è¿™ç§ä¸å¯è§å­—ç¬¦æ˜¯ä¸èƒ½ç›´æ¥å’Œhtmlåˆå¹¶å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590988154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":277029,"ip_address":""},"score":277044,"extra":""},{"author":{"id":1667175,"avatar":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","nickname":"qinsi","note":"","ucode":"090D9C4068FF12","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277068,"discussion_content":"å¯¹äºhtmlæ¥è¯´ï¼Œæœ‰äº›å­—ç¬¦æ˜¯ä¿ç•™çš„ï¼ˆæ¯”å¦‚<å’Œ&amp;ï¼‰ï¼Œè€Œå›¾ç‰‡å†…å®¹æ˜¯äºŒè¿›åˆ¶çš„ï¼Œå¯ä»¥åŒ…å«ä»»æ„å†…å®¹ï¼Œä¸æ’é™¤é‚£äº›ä¿ç•™å­—ç¬¦ã€‚å¦‚æœç›´æ¥åŒ…å«åœ¨htmlä¸­å°±å¯èƒ½å¼•èµ·è§£æé”™è¯¯ã€‚ç»è¿‡base64ç¼–ç åå›¾ç‰‡å†…å®¹å°±åªä¼šç”±base64è§„å®šçš„é‚£äº›å­—ç¬¦ç»„æˆï¼Œä¸ä¼šä¸ä¿ç•™å­—ç¬¦å†²çªã€‚base64åœ¨å…¶ä»–åœºæ™¯ä¸­çš„åº”ç”¨å¤§è‡´ä¹Ÿæ˜¯ç›¸åŒçš„ç†ç”±ï¼Œå°±æ˜¯å°½é‡ä¸ä¸ä½¿ç”¨ç¯å¢ƒä¸­çš„æ§åˆ¶å­—ç¬¦å†²çªã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1590992807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":277044,"ip_address":""},"score":277068,"extra":""},{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1667175,"avatar":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","nickname":"qinsi","note":"","ucode":"090D9C4068FF12","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":277153,"discussion_content":"å¤šè°¢è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591009030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":277068,"ip_address":""},"score":277153,"extra":""}]},{"author":{"id":1284279,"avatar":"https://static001.geekbang.org/account/avatar/00/13/98/b7/2c725922.jpg","nickname":"äº†æ— ç—•","note":"","ucode":"E066E72F0CB4B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276935,"discussion_content":"äºŒè¿›åˆ¶è½¬æ–‡æœ¬","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590972989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}