{"id":118002,"title":"60 | 手工服务部署和测试(中)","content":"<ul>\n<li>\n<p>代码：<a href=\"https://gitee.com/geektime-geekbang/staffjoy\">https://gitee.com/geektime-geekbang/staffjoy</a></p>\n</li>\n<li>\n<p>课件：<a href=\"https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ\">https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ</a> 提取码: 1aeh</p>\n</li>\n</ul>","comments":[{"had_liked":false,"id":157423,"user_name":"xj_zh","can_delete":false,"product_type":"c3","uid":1214755,"ip_address":"","ucode":"190609F7AE67CC","user_header":"https://static001.geekbang.org/account/avatar/00/12/89/23/73569bd7.jpg","comment_is_top":false,"comment_ctime":1575159998,"is_pvip":false,"replies":[{"id":60511,"content":"没有特别的git配置，只是用了https:&#47;&#47;github.com&#47;ohmyzsh&#47;ohmyzsh，缺省配置。\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1575285703,"ip_address":"","comment_id":157423,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，可以分享下git prompt配置吗？看着很酷炫。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476422,"discussion_content":"没有特别的git配置，只是用了https://github.com/ohmyzsh/ohmyzsh，缺省配置。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575285703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127076,"user_name":"大维","can_delete":false,"product_type":"c3","uid":1129620,"ip_address":"","ucode":"5FEAF1F0B48876","user_header":"https://static001.geekbang.org/account/avatar/00/11/3c/94/932231c2.jpg","comment_is_top":false,"comment_ctime":1566550366,"is_pvip":false,"replies":[{"id":47026,"content":"这个springboot支持的外部集中配置机制，可以参考下面文档24.3节：\nhttps:&#47;&#47;docs.spring.io&#47;spring-boot&#47;docs&#47;current&#47;reference&#47;html&#47;boot-features-external-config.html","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566564448,"ip_address":"","comment_id":127076,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"springboot是怎么读取到根目录下的config&#47;application.yml文件的呢？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464309,"discussion_content":"这个springboot支持的外部集中配置机制，可以参考下面文档24.3节：\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566564448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105992,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e0/48/ee8c043d.jpg","nickname":"循序渐进","note":"","ucode":"89B01513647F7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":54048,"discussion_content":"你好，请问你是代码直接拉下来，然后改了config文件夹下面的application.yml.example为application.yml，然后启动mail-svc的吗？ 我这边改了之后怎么启动失败了,获取不到属性。\nERROR io.sentry.SentryClientFactory.resolveDsn - Error creating valid DSN from: &#39;${SENTRY_DSN}&#39;.\njava.lang.IllegalArgumentException: Illegal character in path at index 1: ${SENTRY_DSN}\n\tat java.net.URI.create(URI.java:852)\n\tat io.sentry.dsn.Dsn.<init>(Dsn.java:41)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574255077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126061,"user_name":"favoorr","can_delete":false,"product_type":"c3","uid":1056192,"ip_address":"","ucode":"E83A360B332BCC","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/c0/ab9b24d8.jpg","comment_is_top":false,"comment_ctime":1566303206,"is_pvip":false,"replies":[{"id":46733,"content":"嗯，可以加一个shell简化启动，课程的目的是演示纯手工启动繁琐，对比后续用docker compose或k8s一键部署的方便性。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566387348,"ip_address":"","comment_id":126061,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"这里应该加个 shell 来一键启动，要不然好麻烦","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463808,"discussion_content":"嗯，可以加一个shell简化启动，课程的目的是演示纯手工启动繁琐，对比后续用docker compose或k8s一键部署的方便性。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566387348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192944,"user_name":"arch","can_delete":false,"product_type":"c3","uid":1078931,"ip_address":"","ucode":"A69EBFE0520B85","user_header":"https://static001.geekbang.org/account/avatar/00/10/76/93/2e9bf8ab.jpg","comment_is_top":false,"comment_ctime":1584879517,"is_pvip":true,"replies":[{"id":74030,"content":"嗯，后续课程会给出一个CI&#47;CD持续交付的案例。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585057644,"ip_address":"","comment_id":192944,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"通过发布工具 （jenkins、jenkins-x）等，简化发布流程，一个一个启动，太麻烦了","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488484,"discussion_content":"嗯，后续课程会给出一个CI/CD持续交付的案例。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585057644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179273,"user_name":"Geek_1380b5","can_delete":false,"product_type":"c3","uid":1816251,"ip_address":"","ucode":"7FBB913427682C","user_header":"","comment_is_top":false,"comment_ctime":1581949362,"is_pvip":false,"replies":[{"id":69737,"content":"可以直接改win host文件，但是不如switchhost方便。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1582039981,"ip_address":"","comment_id":179273,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"Switchhosts的功能能不能通过修改Windows系统的host文件来实现，这样是不是不用装switchhost了","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484177,"discussion_content":"可以直接改win host文件，但是不如switchhost方便。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582039981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175977,"user_name":"Ray⏳","can_delete":false,"product_type":"c3","uid":1106636,"ip_address":"","ucode":"5DAAEBFB24FF4D","user_header":"https://static001.geekbang.org/account/avatar/00/10/e2/cc/6a8d4929.jpg","comment_is_top":false,"comment_ctime":1580897247,"is_pvip":false,"replies":[{"id":68459,"content":"这个问题之前有人报过，估计和编译环境有关，建议尝试在IDE里头设置-parameter编译参数，参考：\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;44313482&#47;feign-client-with-spring-boot-requestparam-value-was-empty-on-parameter-0\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1580984985,"ip_address":"","comment_id":175977,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师您好，run bot那个module有问题：\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\n05-02-2020 17:54:16.233 [restartedMain] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;alertController&#39;: Unsatisfied dependency expressed through field &#39;alertService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;alertService&#39;: Unsatisfied dependency expressed through field &#39;companyClient&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;xyz.staffjoy.company.client.CompanyClient&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: RequestParam.value() was empty on parameter 1\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:596)\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1378)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\n\tat ","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482981,"discussion_content":"这个问题之前有人报过，估计和编译环境有关，建议尝试在IDE里头设置-parameter编译参数，参考：\nhttps://stackoverflow.com/questions/44313482/feign-client-with-spring-boot-requestparam-value-was-empty-on-parameter-0\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580984985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1616275,"avatar":"https://static001.geekbang.org/account/avatar/00/18/a9/93/87050980.jpg","nickname":"寒风萧萧","note":"","ucode":"9FF08CA8DDD199","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263197,"discussion_content":"Settings-->Build,Execution,Deployment-->Compiler-->Java Compiler  内 “Additional command line parameters:”添加 -parameters，确定后，在命令行输入mvn clean package -Dmaven.test.skip=true,重新编译打包后，再执行就可以解决该问题（以通过测试）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589186461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164578,"user_name":"纳川","can_delete":false,"product_type":"c3","uid":1440095,"ip_address":"","ucode":"D2ACBBEA997AF9","user_header":"https://static001.geekbang.org/account/avatar/00/15/f9/5f/a0a882a0.jpg","comment_is_top":false,"comment_ctime":1577031018,"is_pvip":false,"replies":[{"id":62799,"content":"我用的这个：\nhttps:&#47;&#47;github.com&#47;ohmyzsh&#47;ohmyzsh\n缺省配置即可","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1577095743,"ip_address":"","comment_id":164578,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师,您哪个终端关键字提示如何搞的,我的都是一个颜色","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478822,"discussion_content":"我用的这个：\nhttps://github.com/ohmyzsh/ohmyzsh\n缺省配置即可","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577095743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153536,"user_name":"循序渐进","can_delete":false,"product_type":"c3","uid":1105992,"ip_address":"","ucode":"89B01513647F7D","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/48/ee8c043d.jpg","comment_is_top":false,"comment_ctime":1574254816,"is_pvip":false,"replies":[{"id":59146,"content":"配置文件(https:&#47;&#47;github.com&#47;spring2go&#47;staffjoy&#47;blob&#47;master&#47;config&#47;application.yml.example)需要修改文件名，修改方式在项目(https:&#47;&#47;github.com&#47;spring2go&#47;staffjoy)readme的[如何运行]部分有说明。\n\n如果还有问题，你直接把application.yml.example里头sentry-dns的值复制到mail服务对应配置文件里头去，其它配置如有需要也可以这样直接复制。\n\n交流群可以加我微信(bulldog2015)，说明来自极客时间。\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1574339892,"ip_address":"","comment_id":153536,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师 这个课程有没有交流群呀? 为什么我启动mail的时候就不行呢？获取不到配置文件的属性。\nERROR io.sentry.SentryClientFactory.resolveDsn - Error creating valid DSN from: &#39;${SENTRY_DSN}&#39;.\njava.lang.IllegalArgumentException: Illegal character in path at index 1: ${SENTRY_DSN}\n\tat java.net.URI.create(URI.java:852)\n\tat io.sentry.dsn.Dsn.&lt;init&gt;(Dsn.java:41)","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475203,"discussion_content":"配置文件(https://github.com/spring2go/staffjoy/blob/master/config/application.yml.example)需要修改文件名，修改方式在项目(https://github.com/spring2go/staffjoy)readme的[如何运行]部分有说明。\n\n如果还有问题，你直接把application.yml.example里头sentry-dns的值复制到mail服务对应配置文件里头去，其它配置如有需要也可以这样直接复制。\n\n交流群可以加我微信(bulldog2015)，说明来自极客时间。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574339892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131358,"user_name":"阿宝","can_delete":false,"product_type":"c3","uid":1439711,"ip_address":"","ucode":"EE22750E46A03E","user_header":"https://static001.geekbang.org/account/avatar/00/15/f7/df/60889fe8.jpg","comment_is_top":false,"comment_ctime":1567730052,"is_pvip":false,"replies":[{"id":49880,"content":"很奇怪，网上找了一下可能和编译设置或者feign版本有关，可以尝试在ide里头加-parameters编译参数：\n\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;44313482&#47;feign-client-with-spring-boot-requestparam-value-was-empty-on-parameter-0\n\n或者把本地缓存的maven cache全清理掉重新加载。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1567774086,"ip_address":"","comment_id":131358,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"本地IDE启动bot-svc时，总是报这个错，这个是什么原因？\n\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\n06-09-2019 08:30:46.906 [restartedMain] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;alertController&#39;: Unsatisfied dependency expressed through field &#39;alertService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;alertService&#39;: Unsatisfied dependency expressed through field &#39;companyClient&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;xyz.staffjoy.company.client.CompanyClient&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: RequestParam.value() was empty on parameter 1\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:596)\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1378)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\n","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466407,"discussion_content":"很奇怪，网上找了一下可能和编译设置或者feign版本有关，可以尝试在ide里头加-parameters编译参数：\n\nhttps://stackoverflow.com/questions/44313482/feign-client-with-spring-boot-requestparam-value-was-empty-on-parameter-0\n\n或者把本地缓存的maven cache全清理掉重新加载。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567774086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1106636,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e2/cc/6a8d4929.jpg","nickname":"Ray⏳","note":"","ucode":"5DAAEBFB24FF4D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":161447,"discussion_content":"一样的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580901225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130132,"user_name":"王杰","can_delete":false,"product_type":"c3","uid":1106506,"ip_address":"","ucode":"4E3B2A0F1C75F6","user_header":"https://static001.geekbang.org/account/avatar/00/10/e2/4a/3f07e217.jpg","comment_is_top":false,"comment_ctime":1567388418,"is_pvip":false,"replies":[{"id":48646,"content":"你好，staffjoy的两个单页应用要求linux或mac环境编译，windows环境暂不支持。所以，如果你是windows环境，staffjoy ide部署这个环节暂时做不了，不过后面的docker compose和k8s部署可以不受影响，只要你的win操作系统能正常能装docker&#47;k8s即可。\n\n不过如果你有兴趣，在windows可以尝试自己hack一下，有学员说编译成功的(但不能保证)。上面的错误一个是eslint造成，webpack.config.js里头配置的eslint要求unix格式，你可以把eslint相关配置都去掉，另外前端引用的npm-zepto需要替换一下，参考这里：https:&#47;&#47;github.com&#47;spring2go&#47;staffjoy&#47;issues&#47;6","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1567429763,"ip_address":"","comment_id":130132,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"在启动单页应用时候  环境Windows  在运行npm install 没问题，在运行npm start 命令后显示，失败\nERROR in .&#47;src&#47;components&#47;NotificationManager&#47;index.js\nD:\\learn_code\\staffjoy\\frontend\\myaccount\\src\\components\\NotificationManager\\index.js\n   6:1   error  Expected linebreaks to be &#39;LF&#39; but found &#39;CRLF&#39;  linebreak-style\n  13:5   error  Expected linebreaks to be &#39;LF&#39; but found &#39;CRLF&#39;  linebreak-style\n  29:45  error  Expected linebreaks to be &#39;LF&#39; but found &#39;CRLF&#39;  l\n✖ 60 problems (60 errors, 0 warnings)\n        [0] .&#47;~&#47;favicons-webpack-plugin&#47;lib&#47;favicons.js?{&quot;outputFilePrefix&quot;:&quot;assets&#47;icons&#47;&quot;,&quot;icons&quot;:{&quot;android&quot;:true,&quot;appleIcon&quot;:true,&quot;appleStartup&quot;:true,&quot;coast&quot;:false,&quot;favicons&quot;:true,&quot;firefox&quot;:true,&quot;opengraph&quot;:true,&quot;twitter&quot;:true,&quot;yandex&quot;:false,&quot;windows&quot;:true},&quot;background&quot;:&quot;#fff&quot;,&quot;persistentCache&quot;:true,&quot;appName&quot;:&quot;Staffjoy | App&quot;}!.&#47;staffjoy-favicon.png 5.92 kB {0} [built]\nChild html-webpack-plugin for &quot;index.html&quot;:\n    chunk    {0} index.html 542 kB [rendered]\n        [0] .&#47;~&#47;html-webpack-plugin&#47;lib&#47;loader.js!.&#47;index.template.ejs 1.66 kB {0} [built]\n        [1] .&#47;~&#47;lodash&#47;lodash.js 540 kB {0} [built]\n        [2] (webpack)&#47;buildin&#47;module.js 251 bytes {0} [built]\nwebpack: Failed to compile.","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465825,"discussion_content":"你好，staffjoy的两个单页应用要求linux或mac环境编译，windows环境暂不支持。所以，如果你是windows环境，staffjoy ide部署这个环节暂时做不了，不过后面的docker compose和k8s部署可以不受影响，只要你的win操作系统能正常能装docker/k8s即可。\n\n不过如果你有兴趣，在windows可以尝试自己hack一下，有学员说编译成功的(但不能保证)。上面的错误一个是eslint造成，webpack.config.js里头配置的eslint要求unix格式，你可以把eslint相关配置都去掉，另外前端引用的npm-zepto需要替换一下，参考这里：https://github.com/spring2go/staffjoy/issues/6","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567429763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046497,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/e1/36676a49.jpg","nickname":"13W3H","note":"","ucode":"83189FD92DC082","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171425,"discussion_content":"【已验证行之有效】\nwindows环境下，在.eslintrc文件中的\nrules下面添加或者修改\n&#34;linebreak-style&#34;:0,","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581697009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130046,"user_name":"chun1123","can_delete":false,"product_type":"c3","uid":1063307,"ip_address":"","ucode":"413C3A8722699F","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/8b/af74591f.jpg","comment_is_top":false,"comment_ctime":1567364850,"is_pvip":false,"replies":[{"id":48644,"content":"你这个看上去是npm install没执行？另外，staffjoy的两个单页应用要求linux或mac环境编译，windows环境暂不支持。所以，如果你是windows环境，staffjoy ide部署这个环节暂时做不了，不过后面的docker compose和k8s部署可以不受影响，只要你的win操作系统能正常能装docker&#47;k8s即可。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1567429105,"ip_address":"","comment_id":130046,"utype":1}],"discussion_count":7,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"老师，myaccount使用npm start构建时报错\nERROR in ENOENT: no such file or directory, scandir &#39;C:\\Users\\shi1123\\Documents\\GitHub\\staffjoy\\frontend\\myaccount\\node_modules\\node-sass\\vendor&#39;\n @ .&#47;src&#47;main.scss 4:14-111 13:2-17:4 14:20-117\n\nERROR in ENOENT: no such file or directory, scandir &#39;C:\\Users\\shi1123\\Documents\\GitHub\\staffjoy\\frontend\\myaccount\\node_modules\\node-sass\\vendor&#39;\n @ .&#47;src&#47;components&#47;LoadingScreen&#47;loading-screen.scss 4:14-133 13:2-17:4 14:20-139\n\nERROR in ENOENT: no such file or directory, scandir &#39;C:\\Users\\shi1123\\Documents\\GitHub\\staffjoy\\frontend\\myaccount\\node_modules\\node-sass\\vendor&#39;\n @ .&#47;src&#47;components&#47;StaffjoyButton&#47;staffjoy-button.scss 4:14-134 13:2-17:4 14:20-140\n\nERROR in ENOENT: no such file or directory, scandir &#39;C:\\Users\\shi1123\\Documents\\GitHub\\staffjoy\\frontend\\myaccount\\node_modules\\node-sass\\vendor&#39;\n @ .&#47;src&#47;components&#47;SingleAttributeField&#47;single-attribute-field.scss 4:14-141 13:2-17:4 14:20-147\n\n\n能帮忙看看是什么原因吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465778,"discussion_content":"你这个看上去是npm install没执行？另外，staffjoy的两个单页应用要求linux或mac环境编译，windows环境暂不支持。所以，如果你是windows环境，staffjoy ide部署这个环节暂时做不了，不过后面的docker compose和k8s部署可以不受影响，只要你的win操作系统能正常能装docker/k8s即可。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567429105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018972,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","nickname":"亚林","note":"","ucode":"4A5A6D24314B79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13794,"discussion_content":"我是这样解决的：npm rebuild node-sass","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568701380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1106506,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e2/4a/3f07e217.jpg","nickname":"王杰","note":"","ucode":"4E3B2A0F1C75F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7112,"discussion_content":"我也出现这种情况了，坐等老师解答","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567388719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1063307,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8b/af74591f.jpg","nickname":"chun1123","note":"","ucode":"413C3A8722699F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1106506,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e2/4a/3f07e217.jpg","nickname":"王杰","note":"","ucode":"4E3B2A0F1C75F6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7900,"discussion_content":"Mac科学上网多试几次就成功了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567702268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7112,"ip_address":"","group_id":0},"score":7900,"extra":""},{"author":{"id":1106506,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e2/4a/3f07e217.jpg","nickname":"王杰","note":"","ucode":"4E3B2A0F1C75F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1063307,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8b/af74591f.jpg","nickname":"chun1123","note":"","ucode":"413C3A8722699F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7970,"discussion_content":"我的是Windows😭😭😭","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567743370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7900,"ip_address":"","group_id":0},"score":7970,"extra":""},{"author":{"id":1063307,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8b/af74591f.jpg","nickname":"chun1123","note":"","ucode":"413C3A8722699F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1106506,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e2/4a/3f07e217.jpg","nickname":"王杰","note":"","ucode":"4E3B2A0F1C75F6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8005,"discussion_content":"我记得我当时搜到的一个解决方案是手动安装","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567754135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7970,"ip_address":"","group_id":0},"score":8005,"extra":""}]}]},{"had_liked":false,"id":127177,"user_name":"飞翔","can_delete":false,"product_type":"c3","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1566578633,"is_pvip":false,"replies":[{"id":47217,"content":"staffjoy是要求用域名+标准80端口去访问faraday网关的。\n\n在某些版本的mac os中，非root用户可能是无法使用小于1024的常用端口的。如果开发中需要用到80端口, 就要设置端口转发。这样可以把faraday配置的80端口改掉（如8090），然后还是可以用域名+80去转发访问。\n\n参考这个：\nhttps:&#47;&#47;blog.csdn.net&#47;good007boy&#47;article&#47;details&#47;92029335","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566744767,"ip_address":"","comment_id":127177,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"老师 或者我能不能把farada网关改成别的端口 比如8090  这样对前端有什么影响 比如前端需要改什么","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464358,"discussion_content":"staffjoy是要求用域名+标准80端口去访问faraday网关的。\n\n在某些版本的mac os中，非root用户可能是无法使用小于1024的常用端口的。如果开发中需要用到80端口, 就要设置端口转发。这样可以把faraday配置的80端口改掉（如8090），然后还是可以用域名+80去转发访问。\n\n参考这个：\nhttps://blog.csdn.net/good007boy/article/details/92029335","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566744767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127172,"user_name":"飞翔","can_delete":false,"product_type":"c3","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1566576683,"is_pvip":false,"replies":[{"id":47218,"content":"\n在某些版本的mac os中，非root用户可能是无法使用小于1024的常用端口的。如果开发中需要用到80端口, 就要设置端口转发。这个需要把faraday配置的80端口改掉。参考这个：\nhttps:&#47;&#47;blog.csdn.net&#47;good007boy&#47;article&#47;details&#47;92029335\n\n\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566744779,"ip_address":"","comment_id":127172,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"老师 别的都启动正常， 除了 faraday  报错  我port 是80 我查了下说是 Ports below 1024 can be opened only by root. 我的问题是用intellij 如果设置root运行呀\n\n23-08-2019 12:00:11.434 [restartedMain] ERROR o.apache.catalina.util.LifecycleBase.log - Failed to start component [Connector[HTTP&#47;1.1-80]]\norg.apache.catalina.LifecycleException: Protocol handler start failed\n\tat org.apache.catalina.connector.Connector.startInternal(Connector.java:1004)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n\tat org.apache.catalina.core.StandardService.addConnector(StandardService.java:226)\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:259)\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:197)\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.startWebServer(ServletWebServerApplicationContext.java:311)\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:164)\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:316)\nCaused by: java.net.SocketException: Permission denied\nDescription:\n\nThe Tomcat connector configured to listen on port 80 failed to start. The port may already be in use or the connector may be misconfigured.\n","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464353,"discussion_content":"\n在某些版本的mac os中，非root用户可能是无法使用小于1024的常用端口的。如果开发中需要用到80端口, 就要设置端口转发。这个需要把faraday配置的80端口改掉。参考这个：\nhttps://blog.csdn.net/good007boy/article/details/92029335\n\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566744779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127078,"user_name":"Carl-Zhou","can_delete":false,"product_type":"c3","uid":1059947,"ip_address":"","ucode":"F4C3C3157F9F62","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/6b/62430d15.jpg","comment_is_top":false,"comment_ctime":1566550637,"is_pvip":false,"replies":[{"id":47409,"content":"你好，我确认了一下，目前staffjoy的前端reactjs应用是依赖于linux环境的，暂不支持win环境构建。\n\n如果在win环境下，建议安装vagrant+linux，在虚拟机里头构建。或者采用docker构建，前端项目里头有Dockerfile，课程后面也会演示docker构建镜像。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566820422,"ip_address":"","comment_id":127078,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"杨波老师，我本地是win10 64位企业操作系统，app这个前端应用npm install 失败，zepto的引入有问题。\n以下是部分log:\n25080 verbose pkgid npm-zepto@1.1.7\n25081 verbose cwd E:\\DEV\\Project\\JAVA\\staffjoy\\frontend\\app\n25082 verbose Windows_NT 10.0.17763\n25083 verbose argv &quot;C:\\\\DevTool\\\\nodejs\\\\node.exe&quot; &quot;C:\\\\DevTool\\\\nodejs\\\\node_modules\\\\npm\\\\bin\\\\npm-cli.js&quot; &quot;install&quot;\n25084 verbose node v10.15.3\n25085 verbose npm  v6.4.1\n25086 error code ELIFECYCLE\n25087 error errno 1\n25088 error npm-zepto@1.1.7 install: `script&#47;build`\n25088 error Exit status 1\n25089 error Failed at the npm-zepto@1.1.7 install script.\n25089 error This is probably not a problem with npm. There is likely additional logging output above.\n25090 verbose exit [ 1, true ]\n","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464311,"discussion_content":"你好，我确认了一下，目前staffjoy的前端reactjs应用是依赖于linux环境的，暂不支持win环境构建。\n\n如果在win环境下，建议安装vagrant+linux，在虚拟机里头构建。或者采用docker构建，前端项目里头有Dockerfile，课程后面也会演示docker构建镜像。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566820422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354407,"user_name":"力文","can_delete":false,"product_type":"c3","uid":2561201,"ip_address":"广东","ucode":"F5780F15B85A27","user_header":"","comment_is_top":false,"comment_ctime":1660365859,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"node.JS要下载哪个版本的","like_count":0}]}