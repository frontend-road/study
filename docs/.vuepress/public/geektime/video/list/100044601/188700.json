{"id":188700,"title":"05 | 依赖注入：良好架构的起点","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/NET-Core\">https://gitee.com/geektime-geekbang/NET-Core</a></p>","comments":[{"had_liked":false,"id":177707,"user_name":"小安","can_delete":false,"product_type":"c3","uid":1087167,"ip_address":"","ucode":"3EB04E1AEA5901","user_header":"https://static001.geekbang.org/account/avatar/00/10/96/bf/2dc1aa50.jpg","comment_is_top":false,"comment_ctime":1581477597,"is_pvip":false,"replies":[{"id":69296,"content":"对于方法都是线程安全的类型，一般使用单例。\n\n对于对象依赖了处理上下文，或者使用了有限资源（如数据库连接），一般使用Scoped或者Transient。\n\nScoped、Transient的区别是你在同一个上下文中是否期望使用同一个实例，如果是，用Scoped，反之则使用Transient","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1581754949,"ip_address":"","comment_id":177707,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"老师，Singleton、Scoped、Transient 的应用情景有哪些，能大概说下吗，谢谢","like_count":10,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483513,"discussion_content":"对于方法都是线程安全的类型，一般使用单例。\n\n对于对象依赖了处理上下文，或者使用了有限资源（如数据库连接），一般使用Scoped或者Transient。\n\nScoped、Transient的区别是你在同一个上下文中是否期望使用同一个实例，如果是，用Scoped，反之则使用Transient","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581754949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178267,"user_name":"高喜庆","can_delete":false,"product_type":"c3","uid":1066949,"ip_address":"","ucode":"5EBFE07E244A0F","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/c5/e6df140c.jpg","comment_is_top":false,"comment_ctime":1581647319,"is_pvip":false,"replies":[{"id":69295,"content":"工厂模式可以让你自由控制构造对象的过程，例如当你构造实例的过程比较复杂，需要特别的逻辑处理或组装时。\n\n另外一个场景是当你已经有了一个对象的实例、或者容器中已经有了某个对象，这个对象实现了多个接口或基类，你需要注册这几个接口为同一实例时，也可以用工厂。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1581754810,"ip_address":"","comment_id":178267,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"工厂方法注入，有什么优点吗？在什么情景下使用呢？","like_count":5,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483736,"discussion_content":"工厂模式可以让你自由控制构造对象的过程，例如当你构造实例的过程比较复杂，需要特别的逻辑处理或组装时。\n\n另外一个场景是当你已经有了一个对象的实例、或者容器中已经有了某个对象，这个对象实现了多个接口或基类，你需要注册这几个接口为同一实例时，也可以用工厂。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581754810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212198,"discussion_content":"主要还是用于自己封装或实现一些基础功能时，可以使用工厂方式来生成实例。比如特性中serviceFilter或者typeFilter都用到了工厂。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584945497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812011,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a6/2b/03e8609a.jpg","nickname":"沃德天.维森陌.拉莫帅","note":"","ucode":"E2F76764E35DAC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202320,"discussion_content":"我理解比如注入了几个学生和一个老师，最终用工厂生成一个班级这种。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583896576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173688,"user_name":"墨墨墨墨小宇","can_delete":false,"product_type":"c3","uid":1590707,"ip_address":"","ucode":"4C17920448C285","user_header":"https://static001.geekbang.org/account/avatar/00/18/45/b3/c21b2d2c.jpg","comment_is_top":false,"comment_ctime":1579661262,"is_pvip":false,"replies":[{"id":67338,"content":"例如管理数据库连接对象，每个用户请求范围内，使用同一个实例，处理响应完毕，由容器帮忙释放","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579687921,"ip_address":"","comment_id":173688,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":" Scope 这个生命周期，有使用场景吗？感觉平时没有用到的地方哎 ","like_count":4,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482168,"discussion_content":"例如管理数据库连接对象，每个用户请求范围内，使用同一个实例，处理响应完毕，由容器帮忙释放","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579687921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2705491,"avatar":"","nickname":"Geek_Zhengyu","note":"","ucode":"FFD9E0BBEE0293","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385100,"discussion_content":"这样将数据库连接对象限制在一个不长不短的时间范围，防止MySQL长连接导致一些诡异的问题…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626879019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171684,"user_name":"Mr.Beethoven","can_delete":false,"product_type":"c3","uid":1588862,"ip_address":"","ucode":"199A3814A43DB7","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/7e/c06badd0.jpg","comment_is_top":false,"comment_ctime":1578991346,"is_pvip":false,"replies":[{"id":66582,"content":"需要遍历，根据实际类型来判断。\n如果特别需要对同一服务注册不同的类型并加以区分的话，可以使用第三方的依赖注入框架，支持命名注册","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1578996397,"ip_address":"","comment_id":171684,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"services.AddScoped&lt;IOrderService, OrderService&gt;();\nservices.AddScoped&lt;IOrderService, OrderServiceEX&gt;();\n注册的时候注册了2个接口实例  使用的时候 默认是用的最后注册的，怎么选择前面的，需要写遍历判断吗，有api能直接选择吗","like_count":4,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481470,"discussion_content":"需要遍历，根据实际类型来判断。\n如果特别需要对同一服务注册不同的类型并加以区分的话，可以使用第三方的依赖注入框架，支持命名注册","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578996397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175728,"user_name":"左","can_delete":false,"product_type":"c3","uid":1048799,"ip_address":"","ucode":"FE02803AE2C0F0","user_header":"https://static001.geekbang.org/account/avatar/00/10/00/df/58fe37df.jpg","comment_is_top":false,"comment_ctime":1580809554,"is_pvip":false,"replies":[{"id":68383,"content":"实际场景中，线上环境通过修改配置来切换依赖注入的方式比较少见，一般依赖修改还涉及到包的依赖和回归测试，因此用配置文件没有明显优势。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1580892074,"ip_address":"","comment_id":175728,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"这个依赖注入为什么不用配置文件？","like_count":3,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482876,"discussion_content":"实际场景中，线上环境通过修改配置来切换依赖注入的方式比较少见，一般依赖修改还涉及到包的依赖和回归测试，因此用配置文件没有明显优势。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580892074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185295,"avatar":"https://static001.geekbang.org/account/avatar/00/12/16/0f/0cd4d657.jpg","nickname":"蓝色基因","note":"","ucode":"C9ADCF38BA05FF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552442,"discussion_content":"在我刚刚入行的时候（2011年），当时所在的团队，正在用ASP.NET MVC 3（基于.NET Framework）做项目，用了一个依赖注入的框架名为Unity。有几位老前辈觉得在启动时写了好多RegisterType，代码不好看，就自己搞了一个XML配置，通过key, value形式配置接口和实现，在启动时读取该XML，再解析XML后，做RegisterType。代码看上去好像简化了很多，结果某次配置出错了，查了老半天才发现接口和实例有出入。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645459165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2705491,"avatar":"","nickname":"Geek_Zhengyu","note":"","ucode":"FFD9E0BBEE0293","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385099,"discussion_content":"Java的Bean 的xml配置，该哭晕了…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626878944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174088,"user_name":"wdls","can_delete":false,"product_type":"c3","uid":1452119,"ip_address":"","ucode":"BB2FBD0D0C6D64","user_header":"https://static001.geekbang.org/account/avatar/00/16/28/57/c4663e69.jpg","comment_is_top":false,"comment_ctime":1579958353,"is_pvip":false,"replies":[{"id":67824,"content":"服务会被多次注册，GetServce获取服务时，会得到最后注册的那个，使用GetServces会得到所有注册的，与你注册顺序相同","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1580268483,"ip_address":"","comment_id":174088,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"如果我不使用tryadd ， 我重复注册了相应的服务， 那会有什么后果？","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482294,"discussion_content":"服务会被多次注册，GetServce获取服务时，会得到最后注册的那个，使用GetServces会得到所有注册的，与你注册顺序相同","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580268483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173250,"user_name":"Larry","can_delete":false,"product_type":"c3","uid":1563755,"ip_address":"","ucode":"9AD5794F9097E7","user_header":"https://static001.geekbang.org/account/avatar/00/17/dc/6b/1f722d88.jpg","comment_is_top":false,"comment_ctime":1579486059,"is_pvip":false,"replies":[{"id":67262,"content":"从你的描述来看，你需要确定这两个需求是否是不同角色的诉求，或者是否是在解决不同的问题。\n如果是，则分别设计API。\n如果不是，说明两个业务诉求的目的是一致的，应该用一个接口可以满足。\n\n不建议通过字段当作权限来判断不同的逻辑，这样会把两个不同的需求，耦合在一个API中。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579585016,"ip_address":"","comment_id":173250,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"想请教一个 微服务的问题，两个组需要api 。分析得出结论 他们需要的内容差不多 ，只是一个组需要的比另一个组字段多！想问一下，是设计一个字段！以后通过权限控制吗？还是就设计两个API！谢谢🙏","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482012,"discussion_content":"从你的描述来看，你需要确定这两个需求是否是不同角色的诉求，或者是否是在解决不同的问题。\n如果是，则分别设计API。\n如果不是，说明两个业务诉求的目的是一致的，应该用一个接口可以满足。\n\n不建议通过字段当作权限来判断不同的逻辑，这样会把两个不同的需求，耦合在一个API中。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579585016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1563755,"avatar":"https://static001.geekbang.org/account/avatar/00/17/dc/6b/1f722d88.jpg","nickname":"Larry","note":"","ucode":"9AD5794F9097E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":145975,"discussion_content":"非常感谢🙏","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579591518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1563755,"avatar":"https://static001.geekbang.org/account/avatar/00/17/dc/6b/1f722d88.jpg","nickname":"Larry","note":"","ucode":"9AD5794F9097E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":142963,"discussion_content":"修改一下！是设计一个api 以后通过权限控制，还是......","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579486168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172632,"user_name":"","can_delete":false,"product_type":"c3","uid":1691891,"ip_address":"","ucode":"0FF631C892E617","user_header":"https://static001.geekbang.org/account/avatar/00/19/d0/f3/08594ada.jpg","comment_is_top":false,"comment_ctime":1579239662,"is_pvip":false,"replies":[{"id":67143,"content":"类似下面的代码，后面的章节有提到\nIServiceCollection serviceCollection = new ServiceCollection();  &#47;&#47;创建容器注册集合\nIServiceProvider service = serviceCollection.BuildServiceProvider();  &#47;&#47;构建容器","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579445506,"ip_address":"","comment_id":172632,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"这种依赖注入 如何使用在控制台应用程序中呢。 ","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481797,"discussion_content":"类似下面的代码，后面的章节有提到\nIServiceCollection serviceCollection = new ServiceCollection();  //创建容器注册集合\nIServiceProvider service = serviceCollection.BuildServiceProvider();  //构建容器","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579445506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171818,"user_name":"harry","can_delete":false,"product_type":"c3","uid":1158691,"ip_address":"","ucode":"49793F8925266E","user_header":"https://static001.geekbang.org/account/avatar/00/11/ae/23/9bb075a2.jpg","comment_is_top":false,"comment_ctime":1579018321,"is_pvip":false,"replies":[{"id":66721,"content":"推荐阅读一下官方文档https:&#47;&#47;docs.microsoft.com&#47;zh-cn&#47;","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579089140,"ip_address":"","comment_id":171818,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"😀希望有对基础知识的补充，之前零散学过，会一些，但是看着还是有的懵……","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481520,"discussion_content":"推荐阅读一下官方文档https://docs.microsoft.com/zh-cn/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579089140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1367474,"avatar":"https://static001.geekbang.org/account/avatar/00/14/dd/b2/ce81de8d.jpg","nickname":"雄鹿 @","note":"","ucode":"9FBF8CF4392829","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":152065,"discussion_content":"官方文档没有你讲的这么细","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579936042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171816,"user_name":"和你一起搬砖的胡大爷","can_delete":false,"product_type":"c3","uid":1008587,"ip_address":"","ucode":"54607F4E17917A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/cb/7c004188.jpg","comment_is_top":false,"comment_ctime":1579017626,"is_pvip":false,"replies":[{"id":66734,"content":"Autofac 提供了 RegisterAssemblyTypes 能力可以实现类似的能力","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579092753,"ip_address":"","comment_id":171816,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"老师，有没有实现类似spring componentscan 自动组装实例的dotnet实现？","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481519,"discussion_content":"Autofac 提供了 RegisterAssemblyTypes 能力可以实现类似的能力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579092753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171381,"user_name":"公号:阿Q看世界","can_delete":false,"product_type":"c3","uid":1095682,"ip_address":"","ucode":"5BB20D829789D6","user_header":"https://static001.geekbang.org/account/avatar/00/10/b8/02/b2268557.jpg","comment_is_top":false,"comment_ctime":1578913711,"is_pvip":false,"replies":[{"id":66442,"content":"感谢支持","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1578921311,"ip_address":"","comment_id":171381,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"肖老大讲的很不错！！","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481323,"discussion_content":"感谢支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578921311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230616,"user_name":"芥末","can_delete":false,"product_type":"c3","uid":1810863,"ip_address":"","ucode":"2B0DD3049827D7","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a1/af/11e61e22.jpg","comment_is_top":false,"comment_ctime":1593432422,"is_pvip":false,"replies":[{"id":85998,"content":"要看你需求，有高级需求，动态代理、aop诉求时，就引入autofac，不过仅建议在startup的部分依赖它，具体的业务代码不依赖它，以保留扩展和重构的灵活性","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1594221900,"ip_address":"","comment_id":230616,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"肖老师，求助下，一般企业用原生态的容器多，还是AutoFac的多？","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499963,"discussion_content":"要看你需求，有高级需求，动态代理、aop诉求时，就引入autofac，不过仅建议在startup的部分依赖它，具体的业务代码不依赖它，以保留扩展和重构的灵活性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594221900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810863,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a1/af/11e61e22.jpg","nickname":"芥末","note":"","ucode":"2B0DD3049827D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290905,"discussion_content":"感谢肖老师回复","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594638162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180397,"user_name":"顺","can_delete":false,"product_type":"c3","uid":1820103,"ip_address":"","ucode":"B53EE068DC4CFD","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c5/c7/d82d263d.jpg","comment_is_top":false,"comment_ctime":1582274214,"is_pvip":false,"replies":[{"id":70454,"content":"注入IEnumerable&lt;IOrderService&gt; 可以获得注入的多个不同实例。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1582690790,"ip_address":"","comment_id":180397,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"泛型注册时IOrderService接口有两个实现\n但是在Controller的构造函数中IGenericService&lt;IOrderService&gt; genericService获取出来的是OrderServiceEx\n那么要怎么获取OrderService实例呢 ","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484645,"discussion_content":"注入IEnumerable&amp;lt;IOrderService&amp;gt; 可以获得注入的多个不同实例。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582690790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200880,"discussion_content":"要么引入第三方IOC，用命名注册。要么自己写一个方法，根据服务类型找到自己想用的服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583734051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172723,"user_name":"叨叨王","can_delete":false,"product_type":"c3","uid":1193463,"ip_address":"","ucode":"196FC8EB4F33F8","user_header":"https://static001.geekbang.org/account/avatar/00/12/35/f7/390f8bf1.jpg","comment_is_top":false,"comment_ctime":1579263709,"is_pvip":false,"replies":[{"id":67146,"content":"这个主要看你注册服务的生命周期是单例的还是范围的","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579445834,"ip_address":"","comment_id":172723,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"工厂方法注入时，对应的serviceProvider是根容器下的还是某个scope下的。","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481833,"discussion_content":"这个主要看你注册服务的生命周期是单例的还是范围的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579445834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171598,"user_name":"Mr.Beethoven","can_delete":false,"product_type":"c3","uid":1588862,"ip_address":"","ucode":"199A3814A43DB7","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/7e/c06badd0.jpg","comment_is_top":false,"comment_ctime":1578972588,"is_pvip":false,"replies":[{"id":66560,"content":"关于常用的API还是要知道的，官方文档是最好的获取途径","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1578995596,"ip_address":"","comment_id":171598,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"老师，像TryAddSingleton这种 需要单独引入命名空间的，但是提前并不知道有这个命名空间和这个方法，咋整\n只能是看文档一点点看到的了 是吧？\n感觉不知道就可能想不到的感觉。。。。","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481430,"discussion_content":"关于常用的API还是要知道的，官方文档是最好的获取途径","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578995596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171456,"user_name":"InfoQ_e15910ea83b9","can_delete":false,"product_type":"c3","uid":1724608,"ip_address":"","ucode":"0F59865554A7EF","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDvuehcImgeEffmbqeiaILbibRuMCt6wmmnTWmVicstrMqsKXjFBQEUvC26xBNArDvXJ6FqoS0ut3pw/132","comment_is_top":false,"comment_ctime":1578925721,"is_pvip":false,"replies":[{"id":66571,"content":"内容需要照顾到对.NET Core不了解的人，感谢提出建议","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1578996004,"ip_address":"","comment_id":171456,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"真基础啊","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481360,"discussion_content":"内容需要照顾到对.NET Core不了解的人，感谢提出建议","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578996004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1724608,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDvuehcImgeEffmbqeiaILbibRuMCt6wmmnTWmVicstrMqsKXjFBQEUvC26xBNArDvXJ6FqoS0ut3pw/132","nickname":"InfoQ_e15910ea83b9","note":"","ucode":"0F59865554A7EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135292,"discussion_content":"那就写清楚受众，别把标题搞的太高大上，什么学完就成xx精通，太low","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579083124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229014,"user_name":"秋水东行","can_delete":false,"product_type":"c3","uid":1104304,"ip_address":"","ucode":"57F2D2F81144B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/d9/b0/16b8afd9.jpg","comment_is_top":false,"comment_ctime":1592880201,"is_pvip":false,"replies":[{"id":86003,"content":"文档结合实战，能更好理解","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1594222401,"ip_address":"","comment_id":229014,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"补差补缺还挺不错的，最好和官方文档一起看。感觉之前看官方文档的学习纬度不够","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499300,"discussion_content":"文档结合实战，能更好理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594222401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226289,"user_name":"Xiaowu","can_delete":false,"product_type":"c3","uid":1630859,"ip_address":"","ucode":"A1ACB222CED6CE","user_header":"https://static001.geekbang.org/account/avatar/00/18/e2/8b/4dc7c221.jpg","comment_is_top":false,"comment_ctime":1592024292,"is_pvip":false,"replies":[{"id":86005,"content":"一起进步","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1594222632,"ip_address":"","comment_id":226289,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"感谢您能在留言区一一回复，我觉得在留言区学习到更多。","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498179,"discussion_content":"一起进步","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594222632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224579,"user_name":"小新","can_delete":false,"product_type":"c3","uid":2027129,"ip_address":"","ucode":"026D65023FA80A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/ee/79/78c420c4.jpg","comment_is_top":false,"comment_ctime":1591450185,"is_pvip":false,"replies":[{"id":83283,"content":"注入IEnumerable&lt;IOrderService&gt;  可以得到为同一接口注册的多个实现的实例\n\n","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1591949824,"ip_address":"","comment_id":224579,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"老师，我更正下上一个留言：注册的同一个接口的2个不同实现，OrderService、OrderSerivceEx在同一个控制器中要同时使用2个实例，怎么获取并且区分呢？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497531,"discussion_content":"注入IEnumerable&amp;lt;IOrderService&amp;gt;  可以得到为同一接口注册的多个实现的实例\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591949824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224576,"user_name":"小新","can_delete":false,"product_type":"c3","uid":2027129,"ip_address":"","ucode":"026D65023FA80A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/ee/79/78c420c4.jpg","comment_is_top":false,"comment_ctime":1591449513,"is_pvip":false,"replies":[{"id":83285,"content":"注入时使用IEnumerable&lt;IOrderService&gt;","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1591949974,"ip_address":"","comment_id":224576,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"老师，您好，这边有个需求：某个接口有多个实例，比如，IOrderService——Order01Service、IOrderService——Order02Service。如果某个时候同时需要IOrderService的2个实例，这个时候怎么获取呢？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497530,"discussion_content":"注入时使用IEnumerable&amp;lt;IOrderService&amp;gt;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591949974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215003,"user_name":"。","can_delete":false,"product_type":"c3","uid":1723580,"ip_address":"","ucode":"BFEF2648FE8A85","user_header":"https://static001.geekbang.org/account/avatar/00/1a/4c/bc/d9ef313e.jpg","comment_is_top":false,"comment_ctime":1588866246,"is_pvip":false,"replies":[{"id":79631,"content":"依赖注入就是用来帮你解决构造服务实例的问题的。\n也就是避免你的业务代码中使用 new\n\n","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1588938936,"ip_address":"","comment_id":215003,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"老师，在项目中分了UI层，BLL层，DAL层，那么在BLL层构造函数注入往往构造参数会很多，而且业务变化也会导致增加构造参数，这种情况怎么处理？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494270,"discussion_content":"依赖注入就是用来帮你解决构造服务实例的问题的。\n也就是避免你的业务代码中使用 new\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588938936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1723580,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/4c/bc/d9ef313e.jpg","nickname":"。","note":"","ucode":"BFEF2648FE8A85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261140,"discussion_content":"老师，我想请教的是，构造函数的入参太多，而且可能会增加，这个有没有什么好的方案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588942531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210936,"user_name":"三人游","can_delete":false,"product_type":"c3","uid":1323576,"ip_address":"","ucode":"0E22B9CEF99F78","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep5UuuSVCMz7ic9RyI5WHTqzYhlD0Zq8ibAwd0icHERqDTlBgSegF7RmicWtNFcibjKBSTkBpVbrC5EFqA/132","comment_is_top":false,"comment_ctime":1587867345,"is_pvip":false,"replies":[{"id":79660,"content":"内置依赖注入框架没有实现这个功能，可以使用第三方的框架集成进来实现","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1588943885,"ip_address":"","comment_id":210936,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"请肖老师，请问下在依赖注入的时候，一个接口不同的类实现，能不能通过name区分什么滴，微软自带的依赖注入组件","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493150,"discussion_content":"内置依赖注入框架没有实现这个功能，可以使用第三方的框架集成进来实现","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588943885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190436,"user_name":"小鱼儿","can_delete":false,"product_type":"c3","uid":1198393,"ip_address":"","ucode":"4CA76D96108C0E","user_header":"https://static001.geekbang.org/account/avatar/00/12/49/39/8f1537f5.jpg","comment_is_top":false,"comment_ctime":1584661465,"is_pvip":false,"replies":[{"id":77431,"content":"感谢支持","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1587042326,"ip_address":"","comment_id":190436,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"不错","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487977,"discussion_content":"感谢支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587042326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189143,"user_name":"稻草人","can_delete":false,"product_type":"c3","uid":1892759,"ip_address":"","ucode":"F6BF393E7DA1FD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLA2E0hvHN7XZo8SNstrgOa9y3uGOibsJxOm1sDPD2hElYWTZ0e1mLPIOODeaX1abYnfRF2jfhPmSyw/132","comment_is_top":false,"comment_ctime":1584459571,"is_pvip":false,"replies":[{"id":77153,"content":"FromServicesAttribute是一个mvc的模型绑定描述类，因此只在controller的action参数上生效","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1586874576,"ip_address":"","comment_id":189143,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"FromService可以在代码块里使用吗？还是只能在参数里？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487617,"discussion_content":"FromServicesAttribute是一个mvc的模型绑定描述类，因此只在controller的action参数上生效","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586874576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212222,"discussion_content":"它是一个注解，可以看一些适用范围，一般更多用在action上吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584948384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186666,"user_name":"沃德天.维森陌.拉莫帅","can_delete":false,"product_type":"c3","uid":1812011,"ip_address":"","ucode":"E2F76764E35DAC","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a6/2b/03e8609a.jpg","comment_is_top":false,"comment_ctime":1583897820,"is_pvip":false,"replies":[{"id":72475,"content":"ConsoleApp中，你也应该使用容器来管理对象的构造和生命周期。只是这里你需要使用上面你些的这些代码在手动构造容器。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1584244213,"ip_address":"","comment_id":186666,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"刚才那个留言我可能没讲清楚。我的程序时控制台App，在各个功能里面都有Post功能，所以我想到了给这些类注入HttpClientFactory来创建HttpClient来避免TIME_WAIT的问题。在Program种可以用\n···csharp\nvar serviceProvider = new ServiceCollection().AddHttpClient().BuildServiceProvider();\n            var httpClientFactory = serviceProvider.GetService&lt;IHttpClientFactory&gt;();\n            var client = httpClientFactory.CreateClient();\n            var response = await client.SendAsync(new HttpRequestMessage(HttpMethod.Get, &quot;http:&#47;&#47;www.baidu.com&quot;));\n            var content = await response.Content.ReadAsStringAsync();\n···\n可是在一般的类中，如何才能用容器获取HttpClientFactory呢？我研究过，Web应用在用容器创建Controller的时候，会自动把依赖的对象创建好。但在ConsoleApp中，就不太清楚了。","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486831,"discussion_content":"ConsoleApp中，你也应该使用容器来管理对象的构造和生命周期。只是这里你需要使用上面你些的这些代码在手动构造容器。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584244213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186655,"user_name":"沃德天.维森陌.拉莫帅","can_delete":false,"product_type":"c3","uid":1812011,"ip_address":"","ucode":"E2F76764E35DAC","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a6/2b/03e8609a.jpg","comment_is_top":false,"comment_ctime":1583896390,"is_pvip":false,"replies":[{"id":72459,"content":"引入NuGet包：Microsoft.Extensions.DependencyInjection\n代码类似这样：\nvar services = new ServiceCollection();\nservices.AddSingleton&lt;YourService&gt;();\nIServiceProvider root = services.BuildServiceProvider();\nvar yourService = root.GetService&lt;YourService&gt;();","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1584242302,"ip_address":"","comment_id":186655,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"请问在一个控制台app里面如何使用依赖注入框架。我研究过，想要使用HttpClientFactory来创建一个HttpClient，发现太麻烦而且没必要，最终还是自己New了几个静态HttpClient(Timeout不同)来用。","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486825,"discussion_content":"引入NuGet包：Microsoft.Extensions.DependencyInjection\n代码类似这样：\nvar services = new ServiceCollection();\nservices.AddSingleton&amp;lt;YourService&amp;gt;();\nIServiceProvider root = services.BuildServiceProvider();\nvar yourService = root.GetService&amp;lt;YourService&amp;gt;();","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584242302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184952,"user_name":"迈步","can_delete":false,"product_type":"c3","uid":1747737,"ip_address":"","ucode":"BA9B69CEDA6176","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ab/19/829f321f.jpg","comment_is_top":false,"comment_ctime":1583457660,"is_pvip":false,"replies":[{"id":71562,"content":"IServiceCollection 在build之后得到IServiceProvider，它是注册时的集合，所以它不会出现在容器中，你有什么诉求需求这个集合？","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1583562352,"ip_address":"","comment_id":184952,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"肖老师，请问在程序启动后如何获得IServiceCollection，例如在controller中？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486184,"discussion_content":"IServiceCollection 在build之后得到IServiceProvider，它是注册时的集合，所以它不会出现在容器中，你有什么诉求需求这个集合？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583562352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1747737,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ab/19/829f321f.jpg","nickname":"迈步","note":"","ucode":"BA9B69CEDA6176","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199933,"discussion_content":"打个比方程序启动时单例注册了一段配置，在运行过程中提供一个api，手动重新注册这段配置可以吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583638598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1747737,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ab/19/829f321f.jpg","nickname":"迈步","note":"","ucode":"BA9B69CEDA6176","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200879,"discussion_content":"配置文件变更时，可以reload。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583733979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":199933,"ip_address":"","group_id":0},"score":200879,"extra":""}]}]},{"had_liked":false,"id":176432,"user_name":"Eyri Cho","can_delete":false,"product_type":"c3","uid":1810330,"ip_address":"","ucode":"8F6E6068466F2F","user_header":"https://static001.geekbang.org/account/avatar/00/1b/9f/9a/53f358da.jpg","comment_is_top":false,"comment_ctime":1581059385,"is_pvip":false,"replies":[{"id":68580,"content":"后注册的那个","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1581147733,"ip_address":"","comment_id":176432,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"如果一个Service在不同的作用域中都有注册，回获取到哪个呢？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483103,"discussion_content":"后注册的那个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581147733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175026,"user_name":"Calmly","can_delete":false,"product_type":"c3","uid":1641687,"ip_address":"","ucode":"673FBA3CE86BC7","user_header":"https://static001.geekbang.org/account/avatar/00/19/0c/d7/115f592b.jpg","comment_is_top":false,"comment_ctime":1580530437,"is_pvip":false,"replies":[{"id":68007,"content":"感谢支持","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1580557782,"ip_address":"","comment_id":175026,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"老师讲的很具体，好评","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482602,"discussion_content":"感谢支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580557782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173691,"user_name":"Michael","can_delete":false,"product_type":"c3","uid":1812511,"ip_address":"","ucode":"C78377C158D4C2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a8/1f/c71cc5ae.jpg","comment_is_top":false,"comment_ctime":1579662142,"is_pvip":false,"replies":[{"id":67346,"content":"你好，是的，Web端无法下载。","user_name":"编辑回复","user_name_real":"龚仕伟","uid":1615887,"ctime":1579689166,"ip_address":"","comment_id":173691,"utype":2}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"请问下，不能用电脑下载嘛？准备下载到高铁上看的，手机可以下载，但是屏幕太小，不好看","like_count":0,"discussions":[{"author":{"id":1615887,"avatar":"https://static001.geekbang.org/account/avatar/00/18/a8/0f/e1f7a51a.jpg","nickname":"知行合一","note":"","ucode":"8D0AE75B6BB836","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482170,"discussion_content":"你好，是的，Web端无法下载。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579689166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172044,"user_name":"皮一下","can_delete":false,"product_type":"c3","uid":1768329,"ip_address":"","ucode":"9A6203DD07612C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/fb/89/996533a2.jpg","comment_is_top":false,"comment_ctime":1579078180,"is_pvip":false,"replies":[{"id":66754,"content":"23号开始每周四更新","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579100892,"ip_address":"","comment_id":172044,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"求更新","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481601,"discussion_content":"23号开始每周四更新","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579100892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306393,"user_name":"Geek_99e7f9","can_delete":false,"product_type":"c3","uid":2731662,"ip_address":"","ucode":"79AA76B5758331","user_header":"","comment_is_top":false,"comment_ctime":1628522598,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"有群没，建个群？一起学习","like_count":1},{"had_liked":false,"id":386182,"user_name":"泽昊","can_delete":false,"product_type":"c3","uid":3256066,"ip_address":"湖北","ucode":"DABE2F061FF8D8","user_header":"https://static001.geekbang.org/account/avatar/00/31/af/02/0ce3122b.jpg","comment_is_top":false,"comment_ctime":1704272707,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"老师的vs是什么版本的","like_count":0},{"had_liked":false,"id":375278,"user_name":"一介农夫","can_delete":false,"product_type":"c3","uid":1231587,"ip_address":"浙江","ucode":"FBDEE48436A542","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/e3/7e860739.jpg","comment_is_top":false,"comment_ctime":1685207950,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"大佬有计划推出 .NET C# 语言的课程嘛，个人自学看完了 《C# 图解教程》后，发现书内容有限，仅仅只讲了语法上的东西，后续有点无从下手的感觉","like_count":0},{"had_liked":false,"id":359873,"user_name":"陆止于此  海始于斯","can_delete":false,"product_type":"c3","uid":2027034,"ip_address":"天津","ucode":"8E294505A1FA6D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/ee/1a/1fed8b61.jpg","comment_is_top":false,"comment_ctime":1666002155,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"PPT描述太少了","like_count":0},{"had_liked":false,"id":353043,"user_name":"丁丁历险记","can_delete":false,"product_type":"c3","uid":1661704,"ip_address":"陕西","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1659088328,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"语法不熟，听得好晕。\n\nstartup 中往容器中塞进去，  控制器中，使用FromService 来拿服务 ，\n\n\n然后就是一堆语法规则 。\nsingletoe 只搞一次。\nscoped 一个请求只搞一次。\ntransicent 每次都new，\n再就是支持花式注册。（存在就不注册等 ）,像try enum 啥的，避免服务重复注册 ，可允许一个服务的不同实现注册 ， 记得头晕晕的，后面在具体实战时，再深入理解。\n\n注册泛型，然后使用。\n在控制器里，直接写具体的。","like_count":0},{"had_liked":false,"id":335343,"user_name":"蓝色基因","can_delete":false,"product_type":"c3","uid":1185295,"ip_address":"","ucode":"C9ADCF38BA05FF","user_header":"https://static001.geekbang.org/account/avatar/00/12/16/0f/0cd4d657.jpg","comment_is_top":false,"comment_ctime":1645459268,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"老师您好，课程中出现了“容器”两字，乍一听有点突兀，能否介绍一下这里的“容器”如何理解？我知道肯定不是docker这种容器。","like_count":0},{"had_liked":false,"id":306699,"user_name":"O.R.E.A","can_delete":false,"product_type":"c3","uid":2228597,"ip_address":"","ucode":"F4C51D00BEB9C8","user_header":"https://static001.geekbang.org/account/avatar/00/22/01/75/4c5b10b2.jpg","comment_is_top":false,"comment_ctime":1628672286,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"为什么我的项目也跟你一样添加GetService方法，但是到浏览器上面执行http:&#47;&#47;localhost:5001&#47;weatherforecast&#47;getservice后会提示404（找不到 localhost 的网页）","like_count":0},{"had_liked":false,"id":283138,"user_name":"Yockey Hu","can_delete":false,"product_type":"c3","uid":1833577,"ip_address":"","ucode":"34FEDE4C70602C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkNfq0NsmOQUK8g36NVEeaVW23DXCE4ib7rOKqWBXOHfmWgibDtI5wJ6ghdBHdopcIqQbZ30VhUpZw/132","comment_is_top":false,"comment_ctime":1615568213,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"假如有以下的接口与方法：\npublic interface IOrderService&lt;T, TID&gt; \n\twhere T : IAggregateRoot\n    where TID : IConvertible\n{\n...............\n}\npublic class OrderService&lt;T, TID&gt;\nwhere T : IAggregateRoot\n    where TID : IConvertible\n{\n...............\n}\n那么：\nservices.AddSingleton&lt;typeof(？？？？？), typeof(？？？？？)();\n这里的typeof里面该怎样写？","like_count":0},{"had_liked":false,"id":283137,"user_name":"Yockey Hu","can_delete":false,"product_type":"c3","uid":1833577,"ip_address":"","ucode":"34FEDE4C70602C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkNfq0NsmOQUK8g36NVEeaVW23DXCE4ib7rOKqWBXOHfmWgibDtI5wJ6ghdBHdopcIqQbZ30VhUpZw/132","comment_is_top":false,"comment_ctime":1615567928,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100044601,"comment_content":"services.AddSingleton&lt;typeof(ISxgtRepository&lt;&gt;), typeof(SxgtRepository&lt;&gt;)();","like_count":0},{"had_liked":false,"id":257857,"user_name":"布凡","can_delete":false,"product_type":"c3","uid":1202465,"ip_address":"","ucode":"346FCD332F8BFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","comment_is_top":false,"comment_ctime":1604157240,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100044601,"comment_content":"service.AddSingleton&lt;IOrderService,OrderService&gt;(); &#47;&#47;泛型注册\nservice.AddSingleton&lt;IOrderService&gt;(new OrderService());&#47;&#47;直接注册\nservice.AddSingleton&lt;IOrderService&gt;(serviceProvider=&gt;\n{\n   &#47;&#47;这里可以使用serviceProvider参数，可以从容器中获取多个对象，比如需要用另外一个类包装原有实现\n   return new OrderService();\n});&#47;&#47;工厂方式注册\n\n控制器获取多个注册的实例：\n[FromServices]IEnumerable&lt;IOrderService&gt; service  获取所有注入了IOrderServie接口的实例\n\n注册泛型模板\nservice.AddSingleton(typeof(IGenericService&lt;&gt;),typeof(GenericService));\n&#47;&#47;需要自定义响应的泛型接口（IGenericService）和泛型类 （GenericService）\n使用：\nIGenericService&lt;IOrderService&gt; _orderService","like_count":0},{"had_liked":false,"id":246415,"user_name":"喜欢吃鱼的青年","can_delete":false,"product_type":"c3","uid":2164597,"ip_address":"","ucode":"E64139D8804A40","user_header":"https://static001.geekbang.org/account/avatar/00/21/07/75/75dc8b28.jpg","comment_is_top":false,"comment_ctime":1599314500,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100044601,"comment_content":"肖老师，你提到的注入泛型，我没理解，有什么用吗？希望能到到回复！","like_count":0},{"had_liked":false,"id":246131,"user_name":"喜欢吃鱼的青年","can_delete":false,"product_type":"c3","uid":2164597,"ip_address":"","ucode":"E64139D8804A40","user_header":"https://static001.geekbang.org/account/avatar/00/21/07/75/75dc8b28.jpg","comment_is_top":false,"comment_ctime":1599186465,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100044601,"comment_content":"肖老师，使用泛型依赖注入，在构造函数之后，我获取不到注入服务的方法，感觉只是一个对象，是不是需要进行类型转换？\n代码：\n       public IGroup&lt;ITest&gt; IGroup;\n        public ITest Test;\n\n        public WeatherForecastController(ILogger&lt;WeatherForecastController&gt; logger, IGroup&lt;ITest&gt; igroup,ITest test )\n        {\n            _logger = logger;\n            IGroup = igroup;\n            Test = test;\n        }\n\n        [HttpGet]\n        public IEnumerable&lt;WeatherForecast&gt; Get()\n        {\n            IGroup.GetHashCode();\n            Test.Get();\n        }\n疑问：1.使用泛型注入服务之后，我获取不到 Test.Get()方法？","like_count":0},{"had_liked":false,"id":244823,"user_name":"犀利鬼","can_delete":false,"product_type":"c3","uid":1600746,"ip_address":"","ucode":"E02388EC88D4ED","user_header":"https://static001.geekbang.org/account/avatar/00/18/6c/ea/65cfa066.jpg","comment_is_top":false,"comment_ctime":1598691721,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100044601,"comment_content":"在startup中进行的服务注册，注册的生命周期为scoped，这个注册的对象无法在自己定义的middleware的构造方法中直接引入，会报错Cannot resolve scoped service  from root provider，但是可以在Invoke方法的参数中引入，这个是为什么呢，这样是出于什么进行考虑的呢？\n\nstarup.ConfigureServices下面\n          service.AddScoped&lt;SomeObject&gt;();\nMyMiddleware 下面\n          ctor(RequestDelegate next,SomeObject obj)  &#47;&#47;error\n          \n          Invoke(HttpContext context,SomeObject obj) &#47;&#47;正确引入\n\n","like_count":0},{"had_liked":false,"id":229492,"user_name":"chic life","can_delete":false,"product_type":"c3","uid":1820493,"ip_address":"","ucode":"ED34DCD48DA413","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c7/4d/e0ef025b.jpg","comment_is_top":false,"comment_ctime":1593015030,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100044601,"comment_content":"借助 IHostingStartup  实现模块根模块之间的注入与初始化，与在展示层注入与配置   有什么优点与缺点吗？ ","like_count":0},{"had_liked":false,"id":229490,"user_name":"chic life","can_delete":false,"product_type":"c3","uid":1820493,"ip_address":"","ucode":"ED34DCD48DA413","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c7/4d/e0ef025b.jpg","comment_is_top":false,"comment_ctime":1593014744,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100044601,"comment_content":"借助IHostingStartup 这个接口 实现模块根模块之间的注入与初始化，根在展示层注入有什么区别吗？或者是有哪些优点与缺点? ","like_count":0},{"had_liked":false,"id":182831,"user_name":"索旭东","can_delete":false,"product_type":"c3","uid":1139039,"ip_address":"","ucode":"BFD07BCD8C8CAE","user_header":"https://static001.geekbang.org/account/avatar/00/11/61/5f/b279daaf.jpg","comment_is_top":false,"comment_ctime":1582872512,"is_pvip":false,"replies":null,"discussion_count":6,"race_medal":0,"score":6,"product_id":100044601,"comment_content":"根据一样的操作步骤，新建文件，在执行时候报错了\n\n访问地址：localhost:5001&#47;weatherforecast&#47;getservice，显示无法访问","like_count":0,"discussions":[{"author":{"id":1984343,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/47/57/3e5dba27.jpg","nickname":"大成","note":"","ucode":"20F2B5D8361D8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366636,"discussion_content":"我的也无法访问，求解答","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618139384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2055965,"avatar":"","nickname":"Geek_e72c3f","note":"","ucode":"398CE6408B23E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289786,"discussion_content":"在最上面的Route的参数变成[controller]/[action]","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594211652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2055965,"avatar":"","nickname":"Geek_e72c3f","note":"","ucode":"398CE6408B23E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289775,"discussion_content":"我的也是,怎么解决啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594210389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212227,"discussion_content":"肯定是用错了，用httpget不行吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584948588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1901787,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/04/db/7d9322de.jpg","nickname":"Zyt_MaoMao","note":"","ucode":"D95B9608114A09","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199913,"discussion_content":"把Get方法注释 或者改为HttpPost","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583637235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1901787,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/04/db/7d9322de.jpg","nickname":"Zyt_MaoMao","note":"","ucode":"D95B9608114A09","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199887,"discussion_content":"我也是  无法访问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583635366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175729,"user_name":"微重力","can_delete":false,"product_type":"c3","uid":1600745,"ip_address":"","ucode":"B50B0B5E15FE0B","user_header":"https://static001.geekbang.org/account/avatar/00/18/6c/e9/09c0f397.jpg","comment_is_top":false,"comment_ctime":1580809563,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100044601,"comment_content":"讲的很具体，我要多看几遍","like_count":0},{"had_liked":false,"id":172783,"user_name":"9527","can_delete":false,"product_type":"c3","uid":1386807,"ip_address":"","ucode":"E0347EA334F611","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIG9v88CtuQfFPwKVTHGbibnqVysvnicMDxeIM1OvZy1zYU7VWGArD3vKEz9zP01F1WhzKPMCIz4NBQ/132","comment_is_top":false,"comment_ctime":1579311023,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100044601,"comment_content":"太基础了","like_count":0}]}