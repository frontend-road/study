{"id":158158,"title":"25 | æºç å‰–æï¼šä¸šåŠ¡å¤„ç†","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":159444,"user_name":"å†¬æ¸æš–","can_delete":false,"product_type":"c3","uid":1586800,"ip_address":"","ucode":"907E41AAE9A36C","user_header":"https://static001.geekbang.org/account/avatar/00/18/36/70/00122b24.jpg","comment_is_top":false,"comment_ctime":1575625122,"is_pvip":false,"replies":[{"id":61518,"content":"æ­£è§£","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1576206354,"ip_address":"","comment_id":159444,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"pipeline.fireChannelRead(byteBuf)\nå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œå°±æ˜¯workThreadæ¥å¤„ç†è¿™äº›æ•°æ®ï¼ˆå‘å¾®çš„æ‰“å·¥ä»”ã€‚ï¼‰\nhandlerä¹‹é—´çš„ä¼ æ’­ä¿¡æ¯é€šè¿‡fireXXXæ–¹æ³•ï¼šå…¶åŒºåˆ«æ˜¯ä»å“ªä¸ªèŠ‚ç‚¹å¼€å§‹ä¼ æ’­ã€‚\né»˜è®¤å¤„ç†çº¿ç¨‹å°±æ˜¯Channelç»‘å®šçš„NioEventLoopçº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å…¶ä»–ï¼ˆå…¶å®ƒçš„çº¿ç¨‹èµ°çš„æ˜¯å¼€ä¸ªæ–°çš„å®šæ—¶ä»»åŠ¡ï¼‰:\npipeline.addLast(new UnorderedThreadPoolEventExecutor(10), serverHandler)\n\ninboundä»headå¼€å§‹ï¼Œæ‰¾ä¸‹ä¸€ä¸ªå¯ä»¥æ‰§è¡ŒchannelReadçš„åœ°æ–¹(é€šè¿‡inboundå±æ€§è½®è¯¢å‡ºä¸‹ä¸€ä¸ªinboundHandlerContext)ï¼Œä¸€ç›´åˆ°å°¾èŠ‚ç‚¹TailContext\noutboundåˆšå¥½æ‰§è¡Œé¡ºåºåè¿‡æ¥ã€‚\n\nå…¶å®çœŸæ­£å¤„ç†æ•°æ®è¿˜æ˜¯åœ¨ctx.fireChannelRead(msg)","like_count":4,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477061,"discussion_content":"æ­£è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576206354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203111,"user_name":"é›·åˆš","can_delete":false,"product_type":"c3","uid":1655725,"ip_address":"","ucode":"115FE2BE1AAB61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/pTD8nS0SsORKiaRD3wB0NK9Bpd0wFnPWtYLPfBRBhvZ68iaJErMlM2NNSeEibwQfY7GReILSIYZXfT9o8iaicibcyw3g/132","comment_is_top":false,"comment_ctime":1586141228,"is_pvip":false,"replies":[{"id":79262,"content":"æ˜¯çš„ï¼Œå…·ä½“è¿˜å¾—çœ‹ä¸šåŠ¡çš„é˜»å¡æƒ…å†µï¼Œå¤§å¤šç¨‹åºéƒ½æ˜¯ioç­‰å¾…å‹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1588633550,"ip_address":"","comment_id":203111,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"äº‹ä»¶åœ¨ pipeline ä¸­çš„ä¼ æ’­ï¼Œéœ€è¦å…³æ³¨äº‹ä»¶çš„ä¼ æ’­è¡Œä¸ºå’Œæ‰§è¡Œçº¿ç¨‹ï¼š\n1. ä¼ æ’­è¡Œä¸ºï¼šäº‹ä»¶æ‰§è¡Œåˆ°æŸä¸ª Handler åï¼Œå¦‚æœä¸æ‰‹åŠ¨è§¦å‘ ctx.fireChannelReadï¼Œåˆ™ä¼ æ’­ä¸­æ–­ã€‚\n2. æ‰§è¡Œçº¿ç¨‹ï¼šä¸šåŠ¡çº¿ç¨‹é»˜è®¤æ˜¯åœ¨ NioEventLoop ä¸­æ‰§è¡Œã€‚å¦‚æœä¸šåŠ¡å¤„ç†æœ‰é˜»å¡ï¼Œéœ€è¦è€ƒè™‘å¦èµ·çº¿ç¨‹æ‰§è¡Œã€‚","like_count":2,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490769,"discussion_content":"æ˜¯çš„ï¼Œå…·ä½“è¿˜å¾—çœ‹ä¸šåŠ¡çš„é˜»å¡æƒ…å†µï¼Œå¤§å¤šç¨‹åºéƒ½æ˜¯ioç­‰å¾…å‹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588633550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146263,"user_name":"æ¬§é˜³ç”°","can_delete":false,"product_type":"c3","uid":1054491,"ip_address":"","ucode":"24004916354446","user_header":"https://static001.geekbang.org/account/avatar/00/10/17/1b/4a088e67.jpg","comment_is_top":false,"comment_ctime":1572485682,"is_pvip":false,"replies":[{"id":57249,"content":"è¿™ä¸ªå°å»ºè®®å¾ˆç»†è‡´ï¼ŒğŸ˜‚ï¼Œä»¥åæˆ‘ä¼šå°½é‡è¿½æ±‚å¦‚æ­¤","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1573048215,"ip_address":"","comment_id":146263,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"åœ¨è¯»å°æ ‡é¢˜çš„æ—¶å€™ï¼Œå‘ç°è¯»èµ·æ¥ä¸é¡ºå£ã€‚äºæ˜¯ç»Ÿä¸€æˆ  åŠ¨è¯ + åè¯ï¼šå¯åŠ¨æœåŠ¡ï¼Œæ„å»ºè¿æ¥ï¼Œæ¥æ”¶æ•°æ®ï¼Œå¤„ç†ä¸šåŠ¡ï¼Œå‘é€æ•°æ®ï¼Œæ–­å¼€è¿æ¥ï¼Œå…³é—­æœåŠ¡ã€‚å½“ç„¶ï¼Œæ ¸å¿ƒçš„é€»è¾‘çŸ¥è¯†éƒ½çƒ‚ç†Ÿäºå¿ƒäº†ï¼Œäºæ˜¯æä¸ªéå¸¸ä¸èµ·çœ¼çš„å°å°å»ºè®®ã€‚è€å¸ˆè®²å¾—éå¸¸å¥½ï¼Œå¸®æˆ‘ç†æ¸…äº†ä¸»çº¿é€»è¾‘ã€‚å­¦ä¼šäº†æ€ä¹ˆæ¬£èµNettyã€‚å­¦ä¹ ä»–æ€ä¹ˆä½¿ç”¨å†…å­˜ï¼Ÿæ€ä¹ˆä½¿ç”¨é”?æ€ä¹ˆä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼Ÿæ€ä¹ˆä½¿ç”¨åŒå‘é“¾è¡¨ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472771,"discussion_content":"è¿™ä¸ªå°å»ºè®®å¾ˆç»†è‡´ï¼ŒğŸ˜‚ï¼Œä»¥åæˆ‘ä¼šå°½é‡è¿½æ±‚å¦‚æ­¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573048215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153572,"user_name":"Standly","can_delete":false,"product_type":"c3","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1574261140,"is_pvip":false,"replies":[{"id":59041,"content":"å‡†ç¡®çš„è¯´ï¼Œpipelineä¸­è¯»çš„å¤„ç†æµæ°´çº¿å°±ç»“æŸäº†ï¼Œå› ä¸ºecho server handeræ˜¯æœ€ç»ˆå¤„ç†ä¸šåŠ¡äº†ï¼Œå®ƒå¤„ç†å®Œï¼Œå°±å¯ä»¥è¿”å›ç»“æœï¼Œè¿”å›ç»“æœæ˜¯ç›¸å½“äºèµ°pipelineä¸­å†™çš„å¤„ç†çº¿äº†ã€‚æ‰€ä»¥ä½ è¿™æ ·è¡¨è¿°ï¼Œå¤§ä½“æ„æ€å¯¹çš„ï¼Œå°±æ˜¯ä¸å¤Ÿç²¾ç¡®ï¼Œä¸€ç±»pipelineä¸ä»…åŒ…æ‹¬è¯»ä¹ŸåŒ…æ‹¬å†™ï¼Œä½ è¯´æ–­äº†ï¼Œå…¶å®æ˜¯è¯»çš„é‚£æ¡çº¿ç»“æŸäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574299480,"ip_address":"","comment_id":153572,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆï¼ŒEchoServerHandlerçš„channelRead()æ–¹æ³•å¹¶æ²¡æœ‰å†è°ƒç”¨ctx.fireChannelRead(msg)ï¼Œæ˜¯ä¸æ˜¯pipelineåˆ°è¿™é‡Œå°±æ–­äº† ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475214,"discussion_content":"å‡†ç¡®çš„è¯´ï¼Œpipelineä¸­è¯»çš„å¤„ç†æµæ°´çº¿å°±ç»“æŸäº†ï¼Œå› ä¸ºecho server handeræ˜¯æœ€ç»ˆå¤„ç†ä¸šåŠ¡äº†ï¼Œå®ƒå¤„ç†å®Œï¼Œå°±å¯ä»¥è¿”å›ç»“æœï¼Œè¿”å›ç»“æœæ˜¯ç›¸å½“äºèµ°pipelineä¸­å†™çš„å¤„ç†çº¿äº†ã€‚æ‰€ä»¥ä½ è¿™æ ·è¡¨è¿°ï¼Œå¤§ä½“æ„æ€å¯¹çš„ï¼Œå°±æ˜¯ä¸å¤Ÿç²¾ç¡®ï¼Œä¸€ç±»pipelineä¸ä»…åŒ…æ‹¬è¯»ä¹ŸåŒ…æ‹¬å†™ï¼Œä½ è¯´æ–­äº†ï¼Œå…¶å®æ˜¯è¯»çš„é‚£æ¡çº¿ç»“æŸäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574299480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289138,"user_name":"suntj","can_delete":false,"product_type":"c3","uid":2312457,"ip_address":"","ucode":"4A0A9F7619E765","user_header":"https://static001.geekbang.org/account/avatar/00/23/49/09/bc54d395.jpg","comment_is_top":false,"comment_ctime":1618886738,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":" å¦‚æœä¸€ä¸ªè¯·æ±‚æ•°æ®å¾ˆå¤§å¯¼è‡´è¯»å–å¤šæ¬¡ï¼Œæ„å‘³æ‰§è¡Œå¤šæ¬¡pipeline.fireChannelRead(byteBuf)ï¼Œè¿™æ ·ä¸šåŠ¡é€»è¾‘æ‰§è¡Œå¤šæ¬¡äº†ï¼Œä¸çŸ¥é“ç†è§£æ˜¯å¦æœ‰é—®é¢˜","like_count":0},{"had_liked":false,"id":228575,"user_name":"åˆ˜å²šä¹”æœˆ","can_delete":false,"product_type":"c3","uid":1095289,"ip_address":"","ucode":"99A9AB4E4E1111","user_header":"https://static001.geekbang.org/account/avatar/00/10/b6/79/22e582a5.jpg","comment_is_top":false,"comment_ctime":1592740901,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆä½ å¥½ï¼ŒexecutionMaskè¿™ä¸ªåœ°æ–¹æœ‰ä¸€äº›ç–‘é—®ï¼Œè¯¾ç¨‹ä¸­è¯´è¿™ä¸ªå€¼æ˜¯åœ¨pipeline.add(handler)çš„æ—¶å€™æ·»åŠ çš„ï¼Œè¿™ä¸ªåœ°æ–¹åº”è¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿæ˜¯æ‰€æœ‰ç”¨è¿‡add()æ–¹æ³•çš„éƒ½ä¼šç”Ÿæˆç»Ÿä¸€çš„ä¸€ä¸ªmaskï¼Œè¿˜æ˜¯è¯´ä¸åŒçš„handlerç”Ÿæˆä¸åŒçš„maskï¼Œé‚£ä¹ˆåœ¨pipelineä¾æ¬¡è°ƒç”¨handlerçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¦‚ä½•èƒ½çŸ¥é“å½“å‰è¯»åˆ°çš„æ•°æ®ï¼Œåº”è¯¥è®©å“ªä¸€ä¸ªhandlerå¤„ç†å‘¢ï¼Ÿï¼ˆæœ‰çš„ä¸šåŠ¡åªéœ€è¦1ã€2handlerå¤„ç†ï¼Œæœ‰çš„éœ€è¦3ã€4å¤„ç†ï¼‰","like_count":0}]}