{"id":84360,"title":"08 | 条件和循环","content":"<h1>课件及源代码地址</h1><p><a href=\"https://gitee.com/geektime-geekbang/go_learning\">https://gitee.com/geektime-geekbang/go_learning</a></p><h2>书目推荐</h2><p><a href=\"time://mall?url=https%3A%2F%2Fh5.youzan.com%2Fv2%2Fgoods%2F1ycmk3uob0ryw\">《计算机程序的构造和解释》</a></p>","comments":[{"had_liked":false,"id":74105,"user_name":"Vincent","can_delete":false,"product_type":"c3","uid":1437404,"ip_address":"","ucode":"EC72C58FE32369","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/dc/67838c05.jpg","comment_is_top":false,"comment_ctime":1552104566,"is_pvip":false,"replies":[{"id":27122,"content":"嗯，两种都是可以的","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1552134944,"ip_address":"","comment_id":74105,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"老师您好！在条件if语句中加的赋值语句，是不是也可以在if语句前面先赋值呢？比如\nif v, err := someFunc(); err == nil {\n     &#47;&#47; do something\n} else {\n     &#47;&#47; do some other thing\n}\n写成\nv, err := someFunc()\nif err == nil {\n...}\n感觉这样代码好像更清楚些呢？\n","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442445,"discussion_content":"嗯，两种都是可以的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552134944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"丁丁历险记","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":259363,"discussion_content":"多一行是有阅读开销，揉在一行有理解开销\n就心智负担而言， 不太复杂的业务，可以压在一行。\n过与复杂时，需要将意图与实现分离。\n\n看起来清楚了，但实际上多出一行也不一定是小开销。\n\n多试试，多体会下脑处理的效率","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1588775333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105161,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","nickname":"helloworld","note":"","ucode":"1EECCA0F43E278","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46332,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573140788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215915,"user_name":"风轻扬","can_delete":false,"product_type":"c3","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/15ab499a.jpg","comment_is_top":false,"comment_ctime":1589150401,"is_pvip":false,"replies":[{"id":81851,"content":"分号前是一个赋值表达式，1==1是一个逻辑运算，返回布尔值true， 分号后面需要一个布尔值作为if的条件部分，因为a的值是true，所以就会输出1==1","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1590668943,"ip_address":"","comment_id":215915,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"老师，您在介绍if时的if a:=1==1;a{\n     t.Log(&quot;1==1&quot;)\n｝\nif条件部分该怎么理解。您的文档里介绍，分号前是声明，分号后是condition。但是分号前没看懂，分号后只有一个变量引用。希望老师能解释一下if中的这行表达式","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494610,"discussion_content":"分号前是一个赋值表达式，1==1是一个逻辑运算，返回布尔值true， 分号后面需要一个布尔值作为if的条件部分，因为a的值是true，所以就会输出1==1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590668943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112274,"user_name":"L心逸","can_delete":false,"product_type":"c3","uid":1559618,"ip_address":"","ucode":"A352B5AC8F21D6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL7Khxhp6YcsayqicjU6c6IBbxn2BZncxOFiasbAQl4ic7rX8fbWicbh9MkvVx3RomSq9icHS1XbMC3Ocw/132","comment_is_top":false,"comment_ctime":1562712447,"is_pvip":false,"replies":[{"id":41239,"content":"希望不是高三的学生那样。having fun！","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1562938281,"ip_address":"","comment_id":112274,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"像高中生一样起早看教程","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457651,"discussion_content":"希望不是高三的学生那样。having fun！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562938281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88868,"user_name":"于东燃","can_delete":false,"product_type":"c3","uid":1176075,"ip_address":"","ucode":"8DCA97E4C418C3","user_header":"https://static001.geekbang.org/account/avatar/00/11/f2/0b/8dd6d647.jpg","comment_is_top":false,"comment_ctime":1556016888,"is_pvip":false,"replies":[{"id":31894,"content":"go直接编译为local二进制，而不是像java一样运行在jvm中，编译为IL","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1556082180,"ip_address":"","comment_id":88868,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"这个跟kotlin中when的分支语句是一模一样的，那我想问一下作为语言层的支持kotlin最终被编译成class二进制文件，然后加载到jvm中运行，go的底层运行原理是怎样的呢？他跟Java。kotlin这种jvm为基础的语言相比有什么优势呢","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447931,"discussion_content":"go直接编译为local二进制，而不是像java一样运行在jvm中，编译为IL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556082180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220560,"user_name":"YanZu","can_delete":false,"product_type":"c3","uid":1223076,"ip_address":"","ucode":"B3954130EF8AD3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a9/a4/9e0834a8.jpg","comment_is_top":false,"comment_ctime":1590288686,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"老师您好！在条件if语句中加的赋值语句，是不是也可以在if语句前面先赋值呢？比如\nif v, err := someFunc(); err == nil {\n     &#47;&#47; do something\n} else {\n     &#47;&#47; do some other thing\n}\n写成\nv, err := someFunc()\nif err == nil {\n...}\n感觉这样代码好像更清楚些呢？\n作者回复: 嗯，两种都是可以的","like_count":3},{"had_liked":false,"id":73977,"user_name":"t7ink","can_delete":false,"product_type":"c3","uid":1057762,"ip_address":"","ucode":"7D822FAE8E34FA","user_header":"https://static001.geekbang.org/account/avatar/00/10/23/e2/06575acb.jpg","comment_is_top":false,"comment_ctime":1552050872,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"老师 golang里像\nwhile (a &gt; 0 and a &lt; b ) {\n    do something\n}\n这样的循环如何实现？\n想了一下是不是应该是\nfor {\n  if ( a &gt; 0 &amp;&amp; a &lt; b) {\n    do something \n  }\n}","like_count":2},{"had_liked":false,"id":340861,"user_name":"林松","can_delete":false,"product_type":"c3","uid":1164127,"ip_address":"","ucode":"9A48F890D74252","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erwib5whv3NLYeAicibgceC0eC7J3pkqEKf4DUEUh8xcnDhv4djAZTbSIoh7WEIuJTqNsjbtaribde5ag/132","comment_is_top":false,"comment_ctime":1649205920,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"二刷","like_count":1},{"had_liked":false,"id":73979,"user_name":"t7ink","can_delete":false,"product_type":"c3","uid":1057762,"ip_address":"","ucode":"7D822FAE8E34FA","user_header":"https://static001.geekbang.org/account/avatar/00/10/23/e2/06575acb.jpg","comment_is_top":false,"comment_ctime":1552050951,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"for {\n  if ( a &gt; 0 &amp;&amp; a &lt; b) {\n    do something \n  }else {\n    break\n  }\n}","like_count":1,"discussions":[{"author":{"id":1352152,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELcM4karUTtLlszX1FPaYKcbsfsthZiahTpYlnFgQIS3PcJStvKTCE9OqbJfgxxzfrg1t0CpuspHCQ/132","nickname":"will","note":"","ucode":"57980692086041","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2198,"discussion_content":"可以直接这样呀。\nfor a > 0 &amp;&amp; a < b {\n    doSomething()\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563351583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293636,"user_name":"Geek_ad376e","can_delete":false,"product_type":"c3","uid":1969264,"ip_address":"","ucode":"58E4DCB31464E1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwt0aEdYyhcmgbD8xx6r6CnmFYMIiaDopMDd8Gxn2tml84xckFe6ibvSNkibAFicre8AdnrGXh4TBspw/132","comment_is_top":false,"comment_ctime":1621473250,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"在把case 语句用为if 语句的时候，编写的程序如下\nfunc TestSwitchCaseCondition(t *testing.T) {\n\tfor i := 0; i &lt; 5; i++ {\n\t\tswitch i {\n\t\tcase i%2 == 0:\n\t\t\tt.Log(&quot;Even&quot;)\n\t\tcase i%2 == 1:\n\t\t\tt.Log(&quot;Odd&quot;)\n\t\tdefault:\n\t\t\tt.Log(&quot;unknown&quot;)\n\t\t}\n\t}\n\n}\n\n但是运行结果为：\n# go-learning&#47;src&#47;ch5&#47;condition_test [go-learning&#47;src&#47;ch5&#47;condition.test]\ne:\\go-learning\\src\\ch5\\condition\\condition_test.go:27:3: cannot use i % 2 == 0 (type untyped bool) as type int\ne:\\go-learning\\src\\ch5\\condition\\condition_test.go:29:3: cannot use i % 2 == 1 (type untyped bool) as type int\nFAIL\tgo-learning&#47;src&#47;ch5&#47;condition [build failed]\n\n老师，这是怎么回事","like_count":0,"discussions":[{"author":{"id":2853200,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/89/50/aee9fdab.jpg","nickname":"小杰","note":"","ucode":"BBDF8E9F348F65","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544087,"discussion_content":"你在switch后面加上了i，此时i是一个int类型，但是你的case后面使用判断条件是bool类型，所以出现mismatched type bool and int。翻译成中文就是bool与int类型不匹配。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641395249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1545889,"avatar":"https://static001.geekbang.org/account/avatar/00/17/96/a1/e7bbbe27.jpg","nickname":"龙渊","note":"","ucode":"BB5E9474F7791F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402270,"discussion_content":"switch那里不能再加i了，直接是switch { ... } ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633850988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285179,"user_name":"escray","can_delete":false,"product_type":"c3","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1616658687,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"其实我挺喜欢 Go 语言里面只有 for 一种循环关键字，这样就不用想太多，但是没有 foreach 有点可惜。\n\n能感觉到 Go 的语法似乎是吸取了目前现有各种语言的优点，其中当然是有一些取舍和平衡，但是考虑到创建者的资历，我这样的小白只能学习，不能质疑。","like_count":0},{"had_liked":false,"id":272610,"user_name":"Andy wang","can_delete":false,"product_type":"c3","uid":2402020,"ip_address":"","ucode":"40E94F17485224","user_header":"https://static001.geekbang.org/account/avatar/00/24/a6/e4/b3b34501.jpg","comment_is_top":false,"comment_ctime":1610173050,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"老师，程序背景能换成白色吗，手机字小看不清有时候","like_count":0},{"had_liked":false,"id":199025,"user_name":"木法沙","can_delete":false,"product_type":"c3","uid":1244428,"ip_address":"","ucode":"261F7B6B537F83","user_header":"https://static001.geekbang.org/account/avatar/00/12/fd/0c/a261048b.jpg","comment_is_top":false,"comment_ctime":1585476484,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"简单易懂，赞。","like_count":0},{"had_liked":false,"id":192824,"user_name":"叶昊","can_delete":false,"product_type":"c3","uid":1118376,"ip_address":"","ucode":"8A5453942F931F","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/a8/a7aedb90.jpg","comment_is_top":false,"comment_ctime":1584873971,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"很棒的语法","like_count":0},{"had_liked":false,"id":174602,"user_name":"Van","can_delete":false,"product_type":"c3","uid":1491655,"ip_address":"","ucode":"35E576FD0AD79B","user_header":"https://static001.geekbang.org/account/avatar/00/16/c2/c7/670f8b6c.jpg","comment_is_top":false,"comment_ctime":1580291231,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"go version go1.13.3 darwin&#47;amd64\n\nfunc TestSwitchCaseCondition(t *testing.T) {\n\tfor i := 0; i &lt; 5; i++ {\n\t\tswitch i {\n\t\tcase i % 2 == 0:\n\t\t\tt.Log(&quot;Even&quot;)\n\t\tcase i % 2 == 1:\n\t\t\tt.Log(&quot;Odd&quot;)\n\t\tdefault:\n\t\t\tt.Log(&quot;Unknown&quot;)\n\t\t}\n\t}\n}\n报错：\ninvalid case i % 2 == 0 in switch on i (mismatched types bool and int) \ninvalid case i % 2 == 1 in switch on i (mismatched types bool and int)","like_count":0,"discussions":[{"author":{"id":1012923,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/bb/b448f115.jpg","nickname":"四弦四品","note":"","ucode":"A544FF39E118F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":168493,"discussion_content":"语法有错，switch部分应该是：\nswitch { //这里没有i\ncase i % 2 == 0:\n....\n}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581585106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1491655,"avatar":"https://static001.geekbang.org/account/avatar/00/16/c2/c7/670f8b6c.jpg","nickname":"Van","note":"","ucode":"35E576FD0AD79B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1012923,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/bb/b448f115.jpg","nickname":"四弦四品","note":"","ucode":"A544FF39E118F5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":189777,"discussion_content":"感谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582899517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":168493,"ip_address":"","group_id":0},"score":189777,"extra":""}]}]},{"had_liked":false,"id":73974,"user_name":"t7ink","can_delete":false,"product_type":"c3","uid":1057762,"ip_address":"","ucode":"7D822FAE8E34FA","user_header":"https://static001.geekbang.org/account/avatar/00/10/23/e2/06575acb.jpg","comment_is_top":false,"comment_ctime":1552050490,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"老师 golang里像\nwhile (a &gt; 0 and a &lt; b ) {\n    do something\n}\n这样的循环如何实现？","like_count":0}]}