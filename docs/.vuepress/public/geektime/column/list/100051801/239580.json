{"id":239580,"title":"08 | smart_ptrï¼šæ™ºèƒ½æŒ‡é’ˆåˆ°åº•â€œæ™ºèƒ½â€åœ¨å“ªé‡Œï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>ä¸ŠèŠ‚è¯¾åœ¨è®²constçš„æ—¶å€™ï¼Œè¯´åˆ°constå¯ä»¥ä¿®é¥°æŒ‡é’ˆï¼Œä¸è¿‡ä»Šå¤©æˆ‘è¦å‘Šè¯‰ä½ ï¼šè¯·å¿˜è®°è¿™ç§ç”¨æ³•ï¼Œåœ¨ç°ä»£C++ä¸­ï¼Œç»å¯¹ä¸è¦å†ä½¿ç”¨â€œè£¸æŒ‡é’ˆï¼ˆnaked pointerï¼‰â€äº†ï¼Œè€Œæ˜¯åº”è¯¥ä½¿ç”¨â€œæ™ºèƒ½æŒ‡é’ˆï¼ˆsmart pointerï¼‰â€ã€‚</p><p>ä½ è‚¯å®šæˆ–å¤šæˆ–å°‘å¬è¯´è¿‡ã€ç”¨è¿‡æ™ºèƒ½æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½çœ‹è¿‡å®ç°æºç ï¼Œé‚£ä¹ˆï¼Œä½ å¿ƒé‡Œæœ‰æ²¡æœ‰ä¸€ç§ç–‘æƒ‘ï¼Œæ™ºèƒ½æŒ‡é’ˆåˆ°åº•â€œæ™ºèƒ½â€åœ¨å“ªé‡Œï¼Ÿéš¾é“å®ƒå°±æ˜¯è§£å†³ä¸€åˆ‡é—®é¢˜çš„â€œçµä¸¹å¦™è¯â€å—ï¼Ÿ</p><p>å­¦å®Œäº†ä»Šå¤©çš„è¿™èŠ‚è¯¾ï¼Œæˆ‘æƒ³ä½ å°±ä¼šæœ‰ä¸ªæ˜ç¡®çš„ç­”æ¡ˆäº†ã€‚</p><h2>ä»€ä¹ˆæ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Ÿ</h2><p>æ‰€è°“çš„â€œæ™ºèƒ½æŒ‡é’ˆâ€ï¼Œå½“ç„¶æ˜¯ç›¸å¯¹äºâ€œä¸æ™ºèƒ½æŒ‡é’ˆâ€ï¼Œä¹Ÿå°±æ˜¯â€œè£¸æŒ‡é’ˆâ€è€Œè¨€çš„ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±å…ˆæ¥çœ‹çœ‹è£¸æŒ‡é’ˆï¼Œå®ƒæœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸ºåŸå§‹æŒ‡é’ˆï¼Œæˆ–è€…ç›´æ¥ç®€ç§°ä¸ºæŒ‡é’ˆã€‚</p><p>æŒ‡é’ˆæ˜¯æºè‡ªCè¯­è¨€çš„æ¦‚å¿µï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ç´¢å¼•ï¼Œä»£è¡¨äº†ä¸€å°ç‰‡å†…å­˜åŒºåŸŸï¼ˆä¹Ÿå¯èƒ½ä¼šå¾ˆå¤§ï¼‰ï¼Œèƒ½å¤Ÿç›´æ¥è¯»å†™å†…å­˜ã€‚</p><p>å› ä¸ºå®ƒå®Œå…¨æ˜ å°„äº†è®¡ç®—æœºç¡¬ä»¶ï¼Œæ‰€ä»¥æ“ä½œæ•ˆç‡é«˜ï¼Œæ˜¯C/C++é«˜æ•ˆçš„æ ¹æºã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿæ˜¯å¼•èµ·æ— æ•°éº»çƒ¦çš„æ ¹æºã€‚è®¿é—®æ— æ•ˆæ•°æ®ã€æŒ‡é’ˆè¶Šç•Œï¼Œæˆ–è€…å†…å­˜åˆ†é…åæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œå°±ä¼šå¯¼è‡´è¿è¡Œé”™è¯¯ã€å†…å­˜æ³„æ¼ã€èµ„æºä¸¢å¤±ç­‰ä¸€ç³»åˆ—ä¸¥é‡çš„é—®é¢˜ã€‚</p><p>å…¶ä»–çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ¯”å¦‚Javaã€Goå°±æ²¡æœ‰è¿™æ–¹é¢çš„é¡¾è™‘ï¼Œå› ä¸ºå®ƒä»¬å†…ç½®äº†ä¸€ä¸ªâ€œåƒåœ¾å›æ”¶â€æœºåˆ¶ï¼Œä¼šæ£€æµ‹ä¸å†ä½¿ç”¨çš„å†…å­˜ï¼Œè‡ªåŠ¨é‡Šæ”¾èµ„æºï¼Œè®©ç¨‹åºå‘˜ä¸å¿…ä¸ºæ­¤è´¹å¿ƒã€‚</p><!-- [[[read_end]]] --><p>å…¶å®ï¼ŒC++é‡Œä¹Ÿæ˜¯æœ‰åƒåœ¾å›æ”¶çš„ï¼Œä¸è¿‡ä¸æ˜¯Javaã€Goé‚£ç§ä¸¥æ ¼æ„ä¹‰ä¸Šçš„åƒåœ¾å›æ”¶ï¼Œè€Œæ˜¯å¹¿ä¹‰ä¸Šçš„åƒåœ¾å›æ”¶ï¼Œè¿™å°±æ˜¯<strong>æ„é€ /ææ„å‡½æ•°</strong>å’Œ<strong>RAIIæƒ¯ç”¨æ³•</strong>ï¼ˆResource Acquisition Is Initializationï¼‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åº”ç”¨ä»£ç†æ¨¡å¼ï¼ŒæŠŠè£¸æŒ‡é’ˆåŒ…è£…èµ·æ¥ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œåˆå§‹åŒ–ï¼Œåœ¨ææ„å‡½æ•°é‡Œé‡Šæ”¾ã€‚è¿™æ ·å½“å¯¹è±¡å¤±æ•ˆé”€æ¯æ—¶ï¼ŒC++å°±ä¼š<strong>è‡ªåŠ¨</strong>è°ƒç”¨ææ„å‡½æ•°ï¼Œå®Œæˆå†…å­˜é‡Šæ”¾ã€èµ„æºå›æ”¶ç­‰æ¸…ç†å·¥ä½œã€‚</p><p>å’ŒJavaã€Goç›¸æ¯”ï¼Œè¿™ç®—æ˜¯ä¸€ç§â€œå¾®å‹â€çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œè€Œä¸”å›æ”¶çš„æ—¶æœºå®Œå…¨â€œè‡ªä¸»å¯æ§â€ï¼Œéå¸¸çµæ´»ã€‚å½“ç„¶ä¹Ÿæœ‰ä¸€ç‚¹ä»£ä»·â€”â€”ä½ å¿…é¡»è¦é’ˆå¯¹æ¯ä¸€ä¸ªèµ„æºæ‰‹å†™åŒ…è£…ä»£ç ï¼Œåˆç´¯åˆéº»çƒ¦ã€‚</p><p>æ™ºèƒ½æŒ‡é’ˆå°±æ˜¯ä»£æ›¿ä½ æ¥å¹²è¿™äº›â€œè„æ´»ç´¯æ´»â€çš„ã€‚å®ƒå®Œå…¨å®è·µäº†RAIIï¼ŒåŒ…è£…äº†è£¸æŒ‡é’ˆï¼Œè€Œä¸”å› ä¸ºé‡è½½äº†*å’Œ-&gt;æ“ä½œç¬¦ï¼Œç”¨èµ·æ¥å’ŒåŸå§‹æŒ‡é’ˆä¸€æ¨¡ä¸€æ ·ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜ç»¼åˆè€ƒè™‘äº†å¾ˆå¤šç°å®çš„åº”ç”¨åœºæ™¯ï¼Œèƒ½å¤Ÿè‡ªåŠ¨é€‚åº”å„ç§å¤æ‚çš„æƒ…å†µï¼Œé˜²æ­¢è¯¯ç”¨æŒ‡é’ˆå¯¼è‡´çš„éšæ‚£ï¼Œéå¸¸â€œèªæ˜â€ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºâ€œæ™ºèƒ½æŒ‡é’ˆâ€ã€‚</p><p>å¸¸ç”¨çš„æœ‰ä¸¤ç§æ™ºèƒ½æŒ‡é’ˆï¼Œåˆ†åˆ«æ˜¯<strong>unique_ptr</strong>å’Œ<strong>shared_ptr</strong>ï¼Œä¸‹é¢æˆ‘å°±æ¥åˆ†åˆ«ä»‹ç»ä¸€ä¸‹ã€‚</p><h2>è®¤è¯†unique_ptr</h2><p>unique_ptræ˜¯æœ€ç®€å•ã€æœ€å®¹æ˜“ä½¿ç”¨çš„ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œåœ¨å£°æ˜çš„æ—¶å€™å¿…é¡»ç”¨æ¨¡æ¿å‚æ•°æŒ‡å®šç±»å‹ï¼š</p><pre><code>unique_ptr&lt;int&gt; ptr1(new int(10));      // intæ™ºèƒ½æŒ‡é’ˆ\nassert(*ptr1 == 10);                     // å¯ä»¥ä½¿ç”¨*å–å†…å®¹\nassert(ptr1 != nullptr);                // å¯ä»¥åˆ¤æ–­æ˜¯å¦ä¸ºç©ºæŒ‡é’ˆ\n\nunique_ptr&lt;string&gt; ptr2(new string(&quot;hello&quot;));  // stringæ™ºèƒ½æŒ‡é’ˆ\nassert(*ptr2 == &quot;hello&quot;);                // å¯ä»¥ä½¿ç”¨*å–å†…å®¹\nassert(ptr2-&gt;size() == 5);               // å¯ä»¥ä½¿ç”¨-&gt;è°ƒç”¨æˆå‘˜å‡½æ•°\n</code></pre><p>ä½ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œunique_ptrè™½ç„¶åå­—å«æŒ‡é’ˆï¼Œç”¨èµ·æ¥ä¹Ÿå¾ˆåƒï¼Œä½†<strong>å®ƒå®é™…ä¸Šå¹¶ä¸æ˜¯æŒ‡é’ˆï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥ï¼Œä¸è¦ä¼å›¾å¯¹å®ƒè°ƒç”¨deleteï¼Œå®ƒä¼šè‡ªåŠ¨ç®¡ç†åˆå§‹åŒ–æ—¶çš„æŒ‡é’ˆï¼Œåœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶ææ„é‡Šæ”¾å†…å­˜ã€‚</strong></p><p>å¦å¤–ï¼Œå®ƒä¹Ÿæ²¡æœ‰å®šä¹‰åŠ å‡è¿ç®—ï¼Œä¸èƒ½éšæ„ç§»åŠ¨æŒ‡é’ˆåœ°å€ï¼Œè¿™å°±å®Œå…¨é¿å…äº†æŒ‡é’ˆè¶Šç•Œç­‰å±é™©æ“ä½œï¼Œå¯ä»¥è®©ä»£ç æ›´å®‰å…¨ï¼š</p><pre><code>ptr1++;                        // å¯¼è‡´ç¼–è¯‘é”™è¯¯\nptr2 += 2;                     // å¯¼è‡´ç¼–è¯‘é”™è¯¯\n</code></pre><p>é™¤äº†è°ƒç”¨deleteã€åŠ å‡è¿ç®—ï¼Œåˆå­¦æ™ºèƒ½æŒ‡é’ˆè¿˜æœ‰ä¸€ä¸ªå®¹æ˜“çŠ¯çš„é”™è¯¯æ˜¯æŠŠå®ƒå½“æˆæ™®é€šå¯¹è±¡æ¥ç”¨ï¼Œä¸åˆå§‹åŒ–ï¼Œè€Œæ˜¯å£°æ˜åç›´æ¥ä½¿ç”¨ï¼š</p><pre><code>unique_ptr&lt;int&gt; ptr3;                // æœªåˆå§‹åŒ–æ™ºèƒ½æŒ‡é’ˆ\n*ptr3 = 42 ;                         // é”™è¯¯ï¼æ“ä½œäº†ç©ºæŒ‡é’ˆ\n</code></pre><p>æœªåˆå§‹åŒ–çš„unique_ptrè¡¨ç¤ºç©ºæŒ‡é’ˆï¼Œè¿™æ ·å°±ç›¸å½“äºç›´æ¥æ“ä½œäº†ç©ºæŒ‡é’ˆï¼Œè¿è¡Œæ—¶å°±ä¼šäº§ç”Ÿè‡´å‘½çš„é”™è¯¯ï¼ˆæ¯”å¦‚core dumpï¼‰ã€‚</p><p>ä¸ºäº†é¿å…è¿™ç§ä½çº§é”™è¯¯ï¼Œä½ å¯ä»¥è°ƒç”¨å·¥å‚å‡½æ•°<strong>make_unique()</strong>ï¼Œå¼ºåˆ¶åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆçš„æ—¶å€™å¿…é¡»åˆå§‹åŒ–ã€‚åŒæ—¶è¿˜å¯ä»¥åˆ©ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼ˆ<a href=\"https://time.geekbang.org/column/article/237964\">ç¬¬6è®²</a>ï¼‰çš„autoï¼Œå°‘å†™ä¸€äº›ä»£ç ï¼š</p><pre><code>auto ptr3 = make_unique&lt;int&gt;(42);               // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\nassert(ptr3 &amp;&amp; *ptr3 == 42);\n\nauto ptr4 = make_unique&lt;string&gt;(&quot;god of war&quot;);  // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\nassert(!ptr4-&gt;empty());\n</code></pre><p>ä¸è¿‡ï¼Œmake_unique()è¦æ±‚C++14ï¼Œå¥½åœ¨å®ƒçš„åŸç†æ¯”è¾ƒç®€å•ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯C++11ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„make_unique()ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>template&lt;class T, class... Args&gt;              // å¯å˜å‚æ•°æ¨¡æ¿\nstd::unique_ptr&lt;T&gt;                            // è¿”å›æ™ºèƒ½æŒ‡é’ˆ\nmy_make_unique(Args&amp;&amp;... args)                // å¯å˜å‚æ•°æ¨¡æ¿çš„å…¥å£å‚æ•°\n{\n    return std::unique_ptr&lt;T&gt;(                // æ„é€ æ™ºèƒ½æŒ‡é’ˆ\n            new T(std::forward&lt;Args&gt;(args)...));    // å®Œç¾è½¬å‘\n}\n</code></pre><h2>unique_ptrçš„æ‰€æœ‰æƒ</h2><p>ä½¿ç”¨unique_ptrçš„æ—¶å€™è¿˜è¦ç‰¹åˆ«æ³¨æ„æŒ‡é’ˆçš„â€œ<strong>æ‰€æœ‰æƒ</strong>â€é—®é¢˜ã€‚</p><p>æ­£å¦‚å®ƒçš„åå­—ï¼Œè¡¨ç¤ºæŒ‡é’ˆçš„æ‰€æœ‰æƒæ˜¯â€œå”¯ä¸€â€çš„ï¼Œä¸å…è®¸å…±äº«ï¼Œä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªâ€œäººâ€æŒæœ‰å®ƒã€‚</p><p>ä¸ºäº†å®ç°è¿™ä¸ªç›®çš„ï¼Œunique_ptråº”ç”¨äº†C++çš„â€œè½¬ç§»â€ï¼ˆmoveï¼‰è¯­ä¹‰ï¼ŒåŒæ—¶ç¦æ­¢äº†æ‹·è´èµ‹å€¼ï¼Œæ‰€ä»¥ï¼Œåœ¨å‘å¦ä¸€ä¸ªunique_ptrèµ‹å€¼çš„æ—¶å€™ï¼Œè¦ç‰¹åˆ«ç•™æ„ï¼Œå¿…é¡»ç”¨<strong>std::move()</strong>å‡½æ•°æ˜¾å¼åœ°å£°æ˜æ‰€æœ‰æƒè½¬ç§»ã€‚</p><p>èµ‹å€¼æ“ä½œä¹‹åï¼ŒæŒ‡é’ˆçš„æ‰€æœ‰æƒå°±è¢«è½¬èµ°äº†ï¼ŒåŸæ¥çš„unique_ptrå˜æˆäº†ç©ºæŒ‡é’ˆï¼Œæ–°çš„unique_ptræ¥æ›¿äº†ç®¡ç†æƒï¼Œä¿è¯æ‰€æœ‰æƒçš„å”¯ä¸€æ€§ï¼š</p><pre><code>auto ptr1 = make_unique&lt;int&gt;(42);    // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\nassert(ptr1 &amp;&amp; *ptr1 == 42);         // æ­¤æ—¶æ™ºèƒ½æŒ‡é’ˆæœ‰æ•ˆ\n\nauto ptr2 = std::move(ptr1);         // ä½¿ç”¨move()è½¬ç§»æ‰€æœ‰æƒ\nassert(!ptr1 &amp;&amp; ptr2);               // ptr1å˜æˆäº†ç©ºæŒ‡é’ˆ\n</code></pre><p>å¦‚æœä½ å¯¹å³å€¼ã€è½¬ç§»è¿™äº›æ¦‚å¿µä¸æ˜¯å¤ªç†è§£ï¼Œä¹Ÿæ²¡å…³ç³»ï¼Œå®ƒä»¬ç”¨èµ·æ¥ä¹Ÿçš„ç¡®æ¯”è¾ƒâ€œå¾®å¦™â€ï¼Œè¿™é‡Œä½ åªè¦è®°ä½ï¼Œ<strong>å°½é‡ä¸è¦å¯¹unique_ptræ‰§è¡Œèµ‹å€¼æ“ä½œ</strong>å°±å¥½äº†ï¼Œè®©å®ƒâ€œè‡ªç”Ÿè‡ªç­â€ï¼Œå®Œå…¨è‡ªåŠ¨åŒ–ç®¡ç†ã€‚</p><h2>è®¤è¯†shared_ptr</h2><p>æ¥ä¸‹æ¥è¦è¯´çš„æ˜¯shared_ptrï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¯”unique_ptræ›´â€œæ™ºèƒ½â€çš„æ™ºèƒ½æŒ‡é’ˆã€‚</p><p>åˆçœ‹ä¸Šå»shared_ptrå’Œunique_ptrå·®ä¸å¤šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å·¥å‚å‡½æ•°æ¥åˆ›å»ºï¼Œä¹Ÿé‡è½½äº†*å’Œ-&gt;æ“ä½œç¬¦ï¼Œç”¨æ³•å‡ ä¹ä¸€æ ·â€”â€”åªæ˜¯åå­—ä¸åŒï¼Œçœ‹çœ‹ä¸‹é¢çš„ä»£ç å§ï¼š</p><pre><code>shared_ptr&lt;int&gt; ptr1(new int(10));     // intæ™ºèƒ½æŒ‡é’ˆ\nassert(*ptr1 == 10);                    // å¯ä»¥ä½¿ç”¨*å–å†…å®¹\n\nshared_ptr&lt;string&gt; ptr2(new string(&quot;hello&quot;));  // stringæ™ºèƒ½æŒ‡é’ˆ\nassert(*ptr2 == &quot;hello&quot;);                      // å¯ä»¥ä½¿ç”¨*å–å†…å®¹\n\nauto ptr3 = make_shared&lt;int&gt;(42);  // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\nassert(ptr3 &amp;&amp; *ptr3 == 42);       // å¯ä»¥åˆ¤æ–­æ˜¯å¦ä¸ºç©ºæŒ‡é’ˆ\n\nauto ptr4 = make_shared&lt;string&gt;(&quot;zelda&quot;);  // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\nassert(!ptr4-&gt;empty());                   // å¯ä»¥ä½¿ç”¨-&gt;è°ƒç”¨æˆå‘˜å‡½æ•°\n</code></pre><p>ä½†shared_ptrçš„åå­—æ˜æ˜¾è¡¨ç¤ºäº†å®ƒä¸unique_ptrçš„æœ€å¤§ä¸åŒç‚¹ï¼š<strong>å®ƒçš„æ‰€æœ‰æƒæ˜¯å¯ä»¥è¢«å®‰å…¨å…±äº«çš„</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´æ”¯æŒæ‹·è´èµ‹å€¼ï¼Œå…è®¸è¢«å¤šä¸ªâ€œäººâ€åŒæ—¶æŒæœ‰ï¼Œå°±åƒåŸå§‹æŒ‡é’ˆä¸€æ ·ã€‚</p><pre><code>auto ptr1 = make_shared&lt;int&gt;(42);    // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\nassert(ptr1 &amp;&amp; ptr1.unique() );     // æ­¤æ—¶æ™ºèƒ½æŒ‡é’ˆæœ‰æ•ˆä¸”å”¯ä¸€\n\nauto ptr2 = ptr1;                  // ç›´æ¥æ‹·è´èµ‹å€¼ï¼Œä¸éœ€è¦ä½¿ç”¨move()\nassert(ptr1 &amp;&amp; ptr2);              // æ­¤æ—¶ä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆå‡æœ‰æ•ˆ\n\nassert(ptr1 == ptr2);             // shared_ptrå¯ä»¥ç›´æ¥æ¯”è¾ƒ\n\n// ä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆå‡ä¸å”¯ä¸€ï¼Œä¸”å¼•ç”¨è®¡æ•°ä¸º2\nassert(!ptr1.unique() &amp;&amp; ptr1.use_count() == 2); \nassert(!ptr2.unique() &amp;&amp; ptr2.use_count() == 2); \n</code></pre><p>shared_ptræ”¯æŒå®‰å…¨å…±äº«çš„ç§˜å¯†åœ¨äº<strong>å†…éƒ¨ä½¿ç”¨äº†â€œå¼•ç”¨è®¡æ•°â€</strong>ã€‚</p><p>å¼•ç”¨è®¡æ•°æœ€å¼€å§‹çš„æ—¶å€™æ˜¯1ï¼Œè¡¨ç¤ºåªæœ‰ä¸€ä¸ªæŒæœ‰è€…ã€‚å¦‚æœå‘ç”Ÿæ‹·è´èµ‹å€¼â€”â€”ä¹Ÿå°±æ˜¯å…±äº«çš„æ—¶å€™ï¼Œå¼•ç”¨è®¡æ•°å°±å¢åŠ ï¼Œè€Œå‘ç”Ÿææ„é”€æ¯çš„æ—¶å€™ï¼Œå¼•ç”¨è®¡æ•°å°±å‡å°‘ã€‚åªæœ‰å½“å¼•ç”¨è®¡æ•°å‡å°‘åˆ°0ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰ä»»ä½•äººä½¿ç”¨è¿™ä¸ªæŒ‡é’ˆçš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šçœŸæ­£è°ƒç”¨deleteé‡Šæ”¾å†…å­˜ã€‚</p><p>å› ä¸ºshared_ptrå…·æœ‰å®Œæ•´çš„â€œå€¼è¯­ä¹‰â€ï¼ˆå³å¯ä»¥æ‹·è´èµ‹å€¼ï¼‰ï¼Œæ‰€ä»¥ï¼Œ<strong>å®ƒå¯ä»¥åœ¨ä»»ä½•åœºåˆæ›¿ä»£åŸå§‹æŒ‡é’ˆï¼Œè€Œä¸ç”¨å†æ‹…å¿ƒèµ„æºå›æ”¶çš„é—®é¢˜</strong>ï¼Œæ¯”å¦‚ç”¨äºå®¹å™¨å­˜å‚¨æŒ‡é’ˆã€ç”¨äºå‡½æ•°å®‰å…¨è¿”å›åŠ¨æ€åˆ›å»ºçš„å¯¹è±¡ï¼Œç­‰ç­‰ã€‚</p><h2>shared_ptrçš„æ³¨æ„äº‹é¡¹</h2><p>é‚£ä¹ˆï¼Œæ—¢ç„¶shared_ptrè¿™ä¹ˆå¥½ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥åªç”¨å®ƒè€Œä¸å†è€ƒè™‘unique_pträº†å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå½“ç„¶æ˜¯å¦å®šçš„ï¼Œä¸ç„¶ä¹Ÿå°±æ²¡æœ‰å¿…è¦è®¾è®¡å‡ºæ¥å¤šç§ä¸åŒçš„æ™ºèƒ½æŒ‡é’ˆäº†ã€‚</p><p>è™½ç„¶shared_ptréå¸¸â€œæ™ºèƒ½â€ï¼Œä½†å¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤ï¼Œå®ƒä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼Œ<strong>å¼•ç”¨è®¡æ•°çš„å­˜å‚¨å’Œç®¡ç†éƒ½æ˜¯æˆæœ¬</strong>ï¼Œè¿™æ–¹é¢æ˜¯shared_pträ¸å¦‚unique_ptrçš„åœ°æ–¹ã€‚</p><p>å¦‚æœä¸è€ƒè™‘åº”ç”¨åœºåˆï¼Œè¿‡åº¦ä½¿ç”¨shared_ptrå°±ä¼šé™ä½è¿è¡Œæ•ˆç‡ã€‚ä¸è¿‡ï¼Œä½ ä¹Ÿä¸éœ€è¦å¤ªæ‹…å¿ƒï¼Œshared_ptrå†…éƒ¨æœ‰å¾ˆå¥½çš„ä¼˜åŒ–ï¼Œåœ¨éæç«¯æƒ…å†µä¸‹ï¼Œå®ƒçš„å¼€é”€éƒ½å¾ˆå°ã€‚</p><p>å¦å¤–ä¸€ä¸ªè¦æ³¨æ„çš„åœ°æ–¹æ˜¯<strong>shared_ptrçš„é”€æ¯åŠ¨ä½œ</strong>ã€‚</p><p>å› ä¸ºæˆ‘ä»¬æŠŠæŒ‡é’ˆäº¤ç»™äº†shared_ptrå»è‡ªåŠ¨ç®¡ç†ï¼Œä½†åœ¨è¿è¡Œé˜¶æ®µï¼Œå¼•ç”¨è®¡æ•°çš„å˜åŠ¨æ˜¯å¾ˆå¤æ‚çš„ï¼Œå¾ˆéš¾çŸ¥é“å®ƒçœŸæ­£é‡Šæ”¾èµ„æºçš„æ—¶æœºï¼Œæ— æ³•åƒJavaã€Goé‚£æ ·æ˜ç¡®æŒæ§ã€è°ƒæ•´åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p><p>ä½ è¦ç‰¹åˆ«å°å¿ƒå¯¹è±¡çš„ææ„å‡½æ•°ï¼Œä¸è¦æœ‰éå¸¸å¤æ‚ã€ä¸¥é‡é˜»å¡çš„æ“ä½œã€‚ä¸€æ—¦shared_ptråœ¨æŸä¸ªä¸ç¡®å®šæ—¶é—´ç‚¹ææ„é‡Šæ”¾èµ„æºï¼Œå°±ä¼šé˜»å¡æ•´ä¸ªè¿›ç¨‹æˆ–è€…çº¿ç¨‹ï¼Œâ€œæ•´ä¸ªä¸–ç•Œéƒ½ä¼šé™æ­¢ä¸åŠ¨â€ï¼ˆä¹Ÿè®¸ç”¨è¿‡Goçš„åŒå­¦ä¼šæ·±æœ‰ä½“ä¼šï¼‰ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¥å‰é‡åˆ°çš„å®é™…æ¡ˆä¾‹ï¼Œæ’æŸ¥èµ·æ¥è´¹äº†å¾ˆå¤šåŠŸå¤«ï¼ŒçœŸçš„æ˜¯â€œè¡€æ³ªæ•™è®­â€ã€‚</p><pre><code>class DemoShared final      //  å±é™©çš„ç±»ï¼Œä¸å®šæ—¶çš„åœ°é›·   \n{\npublic:\n    DemoShared() = default;\n   ~DemoShared()            // å¤æ‚çš„æ“ä½œä¼šå¯¼è‡´shared_ptrææ„æ—¶ä¸–ç•Œé™æ­¢\n   {\n       // Stop The World ...\n   }\n};\n\n</code></pre><p>shared_ptrçš„å¼•ç”¨è®¡æ•°ä¹Ÿå¯¼è‡´äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œå°±æ˜¯â€œ<strong>å¾ªç¯å¼•ç”¨</strong>â€ï¼Œè¿™åœ¨æŠŠshared_pträ½œä¸ºç±»æˆå‘˜çš„æ—¶å€™æœ€å®¹æ˜“å‡ºç°ï¼Œå…¸å‹çš„ä¾‹å­å°±æ˜¯<strong>é“¾è¡¨èŠ‚ç‚¹</strong>ã€‚</p><p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†ä¸€ä¸ªç®€åŒ–çš„åœºæ™¯ï¼š</p><pre><code>class Node final\n{\npublic:\n    using this_type     = Node;\n    using shared_type   = std::shared_ptr&lt;this_type&gt;;\npublic:\n    shared_type     next;      // ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ¥æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\n};\n\nauto n1 = make_shared&lt;Node&gt;();   // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\nauto n2 = make_shared&lt;Node&gt;();   // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\n\nassert(n1.use_count() == 1);    // å¼•ç”¨è®¡æ•°ä¸º1\nassert(n2.use_count() == 1);\n\nn1-&gt;next = n2;                 // ä¸¤ä¸ªèŠ‚ç‚¹äº’æŒ‡ï¼Œå½¢æˆäº†å¾ªç¯å¼•ç”¨\nn2-&gt;next = n1;\n\nassert(n1.use_count() == 2);    // å¼•ç”¨è®¡æ•°ä¸º2\nassert(n2.use_count() == 2);    // æ— æ³•å‡åˆ°0ï¼Œæ— æ³•é”€æ¯ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼\n</code></pre><p>åœ¨è¿™é‡Œï¼Œä¸¤ä¸ªèŠ‚ç‚¹æŒ‡é’ˆåˆšåˆ›å»ºæ—¶ï¼Œå¼•ç”¨è®¡æ•°æ˜¯1ï¼Œä½†æŒ‡é’ˆäº’æŒ‡ï¼ˆå³æ‹·è´èµ‹å€¼ï¼‰ä¹‹åï¼Œå¼•ç”¨è®¡æ•°éƒ½å˜æˆäº†2ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œshared_ptrå°±â€œçŠ¯å‚»â€äº†ï¼Œæ„è¯†ä¸åˆ°è¿™æ˜¯ä¸€ä¸ªå¾ªç¯å¼•ç”¨ï¼Œå¤šç®—äº†ä¸€æ¬¡è®¡æ•°ï¼Œåæœå°±æ˜¯å¼•ç”¨è®¡æ•°æ— æ³•å‡åˆ°0ï¼Œæ— æ³•è°ƒç”¨ææ„å‡½æ•°æ‰§è¡Œdeleteï¼Œæœ€ç»ˆå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><p>è¿™ä¸ªä¾‹å­å¾ˆç®€å•ï¼Œä½ ä¸€ä¸‹å­å°±èƒ½çœ‹å‡ºå­˜åœ¨å¾ªç¯å¼•ç”¨ã€‚ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼ŒæŒ‡é’ˆçš„å…³ç³»å¯ä¸åƒä¾‹å­é‚£ä¹ˆæ¸…æ™°ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šä¸çŸ¥ä¸è§‰å½¢æˆä¸€ä¸ªé“¾æ¡å¾ˆé•¿çš„å¾ªç¯å¼•ç”¨ï¼Œå¤æ‚åˆ°ä½ æ ¹æœ¬æ— æ³•è¯†åˆ«ï¼Œæƒ³è¦æ‰¾å‡ºæ¥åŸºæœ¬ä¸Šæ˜¯ä¸å¯èƒ½çš„ã€‚</p><p>æƒ³è¦ä»æ ¹æœ¬ä¸Šæœç»å¾ªç¯å¼•ç”¨ï¼Œå…‰é shared_ptræ˜¯ä¸è¡Œäº†ï¼Œå¿…é¡»è¦ç”¨åˆ°å®ƒçš„â€œå°å¸®æ‰‹â€ï¼š<strong>weak_ptr</strong>ã€‚</p><p>weak_ptré¡¾åæ€ä¹‰ï¼ŒåŠŸèƒ½å¾ˆâ€œå¼±â€ã€‚å®ƒä¸“é—¨ä¸ºæ‰“ç ´å¾ªç¯å¼•ç”¨è€Œè®¾è®¡ï¼Œåªè§‚å¯ŸæŒ‡é’ˆï¼Œä¸ä¼šå¢åŠ å¼•ç”¨è®¡æ•°ï¼ˆå¼±å¼•ç”¨ï¼‰ï¼Œä½†åœ¨éœ€è¦çš„æ—¶å€™ï¼Œå¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°lock()ï¼Œè·å–shared_ptrï¼ˆå¼ºå¼•ç”¨ï¼‰ã€‚</p><p>åˆšæ‰çš„ä¾‹å­é‡Œï¼Œåªè¦ä½ æ”¹ç”¨weak_ptrï¼Œå¾ªç¯å¼•ç”¨çš„çƒ¦æ¼å°±ä¼šçƒŸæ¶ˆäº‘æ•£ï¼š</p><pre><code>class Node final\n{\npublic:\n    using this_type     = Node;\n\n    // æ³¨æ„è¿™é‡Œï¼Œåˆ«åæ”¹ç”¨weak_ptr\n    using shared_type   = std::weak_ptr&lt;this_type&gt;;\npublic:\n    shared_type     next;    // å› ä¸ºç”¨äº†åˆ«åï¼Œæ‰€ä»¥ä»£ç ä¸éœ€è¦æ”¹åŠ¨\n};\n\nauto n1 = make_shared&lt;Node&gt;();  // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\nauto n2 = make_shared&lt;Node&gt;();  // å·¥å‚å‡½æ•°åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆ\n\nn1-&gt;next = n2;             // ä¸¤ä¸ªèŠ‚ç‚¹äº’æŒ‡ï¼Œå½¢æˆäº†å¾ªç¯å¼•ç”¨\nn2-&gt;next = n1;\n\nassert(n1.use_count() == 1);    // å› ä¸ºä½¿ç”¨äº†weak_ptrï¼Œå¼•ç”¨è®¡æ•°ä¸º1\nassert(n2.use_count() == 1);   // æ‰“ç ´å¾ªç¯å¼•ç”¨ï¼Œä¸ä¼šå¯¼è‡´å†…å­˜æ³„æ¼\n\nif (!n1-&gt;next.expired()) {     // æ£€æŸ¥æŒ‡é’ˆæ˜¯å¦æœ‰æ•ˆ\n    auto ptr = n1-&gt;next.lock();  // lock()è·å–shared_ptr\n    assert(ptr == n2);\n}\n</code></pre><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©å°±å…ˆåˆ°è¿™é‡Œã€‚æ™ºèƒ½æŒ‡é’ˆçš„è¯é¢˜å¾ˆå¤§ï¼Œä½†æ˜¯å­¦ä¹ çš„æ—¶å€™æˆ‘ä»¬ä¸å¯èƒ½ä¸€ä¸‹å­æŠŠæ‰€æœ‰çŸ¥è¯†ç‚¹éƒ½ç©·å°½ï¼Œè€Œæ˜¯è¦æœ‰ä¼˜å…ˆçº§ã€‚æ‰€ä»¥æˆ‘ä¼šæ¡æœ€è¦ç´§çš„å…ˆä»‹ç»ç»™ä½ ï¼Œå‰©ä¸‹çš„æ¥å£å‡½æ•°ç­‰ç»†èŠ‚ï¼Œè¿˜æ˜¯éœ€è¦ä½ æ ¹æ®è‡ªå·±çš„æƒ…å†µï¼Œå†å»å‚è€ƒä¸€äº›å…¶ä»–èµ„æ–™æ·±å…¥å­¦ä¹ çš„ã€‚</p><p>æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹è¿™èŠ‚è¯¾çš„é‡ç‚¹ã€‚</p><ol>\n<li>æ™ºèƒ½æŒ‡é’ˆæ˜¯ä»£ç†æ¨¡å¼çš„å…·ä½“åº”ç”¨ï¼Œå®ƒä½¿ç”¨RAIIæŠ€æœ¯ä»£ç†äº†è£¸æŒ‡é’ˆï¼Œèƒ½å¤Ÿè‡ªåŠ¨é‡Šæ”¾å†…å­˜ï¼Œæ— éœ€ç¨‹åºå‘˜å¹²é¢„ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºâ€œæ™ºèƒ½æŒ‡é’ˆâ€ã€‚</li>\n<li>å¦‚æœæŒ‡é’ˆæ˜¯â€œç‹¬å â€ä½¿ç”¨ï¼Œå°±åº”è¯¥é€‰æ‹©unique_ptrï¼Œå®ƒä¸ºè£¸æŒ‡é’ˆæ·»åŠ äº†å¾ˆå¤šé™åˆ¶ï¼Œæ›´åŠ å®‰å…¨ã€‚</li>\n<li>å¦‚æœæŒ‡é’ˆæ˜¯â€œå…±äº«â€ä½¿ç”¨ï¼Œå°±åº”è¯¥é€‰æ‹©shared_ptrï¼Œå®ƒçš„åŠŸèƒ½éå¸¸å®Œå–„ï¼Œç”¨æ³•å‡ ä¹ä¸åŸå§‹æŒ‡é’ˆä¸€æ ·ã€‚</li>\n<li>åº”å½“ä½¿ç”¨å·¥å‚å‡½æ•°make_unique()ã€make_shared()æ¥åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆï¼Œå¼ºåˆ¶åˆå§‹åŒ–ï¼Œè€Œä¸”è¿˜èƒ½ä½¿ç”¨autoæ¥ç®€åŒ–å£°æ˜ã€‚</li>\n<li>shared_ptræœ‰å°‘é‡çš„ç®¡ç†æˆæœ¬ï¼Œä¹Ÿä¼šå¼•å‘ä¸€äº›éš¾ä»¥æ’æŸ¥çš„é”™è¯¯ï¼Œæ‰€ä»¥ä¸è¦è¿‡åº¦ä½¿ç”¨ã€‚</li>\n</ol><p>æˆ‘è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„å»ºè®®ï¼š</p><p><strong>æ—¢ç„¶ä½ å·²ç»ç†è§£äº†æ™ºèƒ½æŒ‡é’ˆï¼Œå°±å°½é‡ä¸è¦å†ä½¿ç”¨è£¸æŒ‡é’ˆã€newå’Œdeleteæ¥æ“ä½œå†…å­˜äº†</strong>ã€‚</p><p>å¦‚æœä¸¥æ ¼éµå®ˆè¿™æ¡å»ºè®®ï¼Œç”¨å¥½unique_ptrã€shared_ptrï¼Œé‚£ä¹ˆï¼Œä½ çš„ç¨‹åºå°±ä¸å¯èƒ½å‡ºç°å†…å­˜æ³„æ¼ï¼Œä½ ä¹Ÿå°±ä¸éœ€è¦å»è´¹å¿ƒç ”ç©¶ã€ä½¿ç”¨valgrindç­‰å†…å­˜è°ƒè¯•å·¥å…·äº†ï¼Œç”Ÿæ´»ä¹Ÿä¼šæ›´â€œç¾å¥½â€ä¸€ç‚¹ã€‚</p><h2>è¯¾ä¸‹ä½œä¸š</h2><p>æœ€åæ˜¯è¯¾ä¸‹ä½œä¸šæ—¶é—´ï¼Œç»™ä½ ç•™ä¸¤ä¸ªæ€è€ƒé¢˜ï¼š</p><ol>\n<li>ä½ è§‰å¾—unique_ptrå’Œshared_ptrçš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿåˆ—ä¸¾ä¸€ä¸‹ã€‚</li>\n<li>ä½ è§‰å¾—åº”è¯¥å¦‚ä½•åœ¨ç¨‹åºé‡Œâ€œæ¶ˆç­â€newå’Œdeleteï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œå¦‚æœè§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e5/51/e5298af2501d0156fcc50d50cdb82351.jpg?wh=1000*1677\" alt=\"\"></p>","neighbors":{"left":{"article_title":"07 | const/volatile/mutableï¼šå¸¸é‡/å˜é‡ç©¶ç«Ÿæ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ","id":238486},"right":{"article_title":"09 | exceptionï¼šæ€æ ·æ‰èƒ½ç”¨å¥½å¼‚å¸¸ï¼Ÿ","id":240292}},"comments":[{"had_liked":false,"id":220279,"user_name":"Eglinux","can_delete":false,"product_type":"c1","uid":1187353,"ip_address":"","ucode":"4AAB9940789442","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/19/17245c59.jpg","comment_is_top":false,"comment_ctime":1590220008,"is_pvip":false,"replies":[{"id":"81318","content":"å·²ç»ä¸å°‘äº†å§ï¼Œç›¸è¯†å°±æ˜¯ç¼˜åˆ†ï¼Œç¬‘ã€‚","user_name":"ä½œè€…å›å¤","comment_id":220279,"uid":"1181974","ip_address":"","utype":1,"ctime":1590230746,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"194863748328","product_id":100051801,"comment_content":"C++ è¿™ä¹ˆå°ä¼—å—ï¼Ÿè®²å¾—è¿™ä¹ˆå¥½ï¼Œå¦‚æœå†™æˆä¹¦ï¼Œå®Œå…¨å¯ä»¥çœ‹æˆå¦å¤–ä¸€æœ¬ effective C++ äº†ï¼Œä¸ºä»€ä¹ˆæ‰ 3000 å¤šè®¢é˜…äººæ•°ï¼Ÿ","like_count":45,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496110,"discussion_content":"å·²ç»ä¸å°‘äº†å§ï¼Œç›¸è¯†å°±æ˜¯ç¼˜åˆ†ï¼Œç¬‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590230746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1247617,"avatar":"https://static001.geekbang.org/account/avatar/00/13/09/81/15d84fbb.jpg","nickname":"ç»€é‡æœ¨æ£‰å­£","note":"","ucode":"4DCA6991911741","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303542,"discussion_content":"å­¦ä¹ éš¾åº¦å¤§ å¼€å‘æˆæœ¬é«˜ æ—¢è¦ä¿è¯åŠŸèƒ½åˆè¦ä¿è¯ç¡¬ä»¶ï¼Œæ“ä½œç³»ç»Ÿï¼Œg++ç‰ˆæœ¬ç­‰ç­‰ä¸€äº›åˆ—é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599293814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227406,"user_name":"é…¸è‘¡è„","can_delete":false,"product_type":"c1","uid":1154146,"ip_address":"","ucode":"9D059C4FB327C0","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/62/f625b2bb.jpg","comment_is_top":false,"comment_ctime":1592374550,"is_pvip":false,"replies":[{"id":"83814","content":"æˆ‘ç»™ä¸€ä¸ªä¸æ˜¯å¾ˆç²¾ç¡®çš„è¯„ä»·æ ‡å‡†å§ã€‚<br><br>shared_ptræ˜¯å¼ºå¼•ç”¨ï¼Œæ— è®ºå¦‚ä½•éƒ½éœ€è¦æŒæœ‰å…±äº«å¯¹è±¡çš„æ—¶å€™å°±ç”¨å®ƒã€‚<br><br>weak_ptræ˜¯å¼±å¼•ç”¨ï¼Œä¸ä¸€å®šè¦æŒæœ‰å¯¹è±¡ï¼Œåªæ˜¯â€œå¶å°”â€æƒ³å»çœ‹çœ‹å¯¹è±¡åœ¨ä¸åœ¨ï¼Œä¸åœ¨ä¹Ÿå¯ä»¥æ¥å—ã€‚","user_name":"ä½œè€…å›å¤","comment_id":227406,"uid":"1181974","ip_address":"","utype":1,"ctime":1592383669,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"126146426134","product_id":100051801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨weak_ptr,ä»€ä¹ˆæ—¶å€™ç”¨shared_ptrï¼Ÿ","like_count":28,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498624,"discussion_content":"æˆ‘ç»™ä¸€ä¸ªä¸æ˜¯å¾ˆç²¾ç¡®çš„è¯„ä»·æ ‡å‡†å§ã€‚\n\nshared_ptræ˜¯å¼ºå¼•ç”¨ï¼Œæ— è®ºå¦‚ä½•éƒ½éœ€è¦æŒæœ‰å…±äº«å¯¹è±¡çš„æ—¶å€™å°±ç”¨å®ƒã€‚\n\nweak_ptræ˜¯å¼±å¼•ç”¨ï¼Œä¸ä¸€å®šè¦æŒæœ‰å¯¹è±¡ï¼Œåªæ˜¯â€œå¶å°”â€æƒ³å»çœ‹çœ‹å¯¹è±¡åœ¨ä¸åœ¨ï¼Œä¸åœ¨ä¹Ÿå¯ä»¥æ¥å—ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592383669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220936,"user_name":"lckfaæé’Š","can_delete":false,"product_type":"c1","uid":1356899,"ip_address":"","ucode":"AD13D205104AA6","user_header":"https://static001.geekbang.org/account/avatar/00/14/b4/63/84960032.jpg","comment_is_top":false,"comment_ctime":1590360142,"is_pvip":false,"replies":[{"id":"81457","content":"æ˜¯çš„ï¼Œæ¶‰åŠåˆ°ç³»ç»Ÿåº•å±‚ï¼Œæœ‰æ—¶å€™å°±å¯èƒ½è¦ç”¨åˆ°deleteï¼Œä¸è¿‡ä½ ä¹Ÿå¯ä»¥è¯•ç€ç”¨RAIIæ¥ç®¡ç†ï¼Œæˆ–è€…ç”¨shared_ptrçš„å®šåˆ¶åˆ é™¤å‡½æ•°ï¼Œè¿˜æ˜¯èƒ½å¤Ÿæ‰¾åˆ°ä¸ç”¨deleteçš„æ–¹å¼çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":220936,"uid":"1181974","ip_address":"","utype":1,"ctime":1590368020,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"78899771470","product_id":100051801,"comment_content":"é»˜è®¤ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯unique_ptr ï¼Œç›¸åçš„shared_ptrå€’æ˜¯ç”¨çš„ä¸å¤šï¼Œå› ä¸ºæ‹…å¿ƒæ–‡ä¸­æåˆ°çš„å¾ªç¯å¼•ç”¨ï¼Œèµ„æºæ¶ˆè€—ï¼Œçº¿ç¨‹å®‰å…¨ç­‰é—®é¢˜ã€‚å¤§éƒ¨åˆ†æ—¶å€™ï¼Œunique_ptræ˜¯èƒ½å®Œå…¨å–ä»£è£¸æŒ‡é’ˆçš„ã€‚å¦‚æœæ˜¯å­˜ç²¹çš„æ ‡å‡†C++ä»£ç ï¼Œä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç¡®å®å¾ˆèˆ’æœï¼ŒæŠŠå®ƒä»¬å½“æˆä¸€ä¸ªæ™®é€šçš„ç±»å‹çœ‹å°±è¡Œäº†ã€‚ä½†æ˜¯ï¼ŒåŒæ—¶ï¼Œä½œä¸ºC++ç¨‹åºå‘˜æˆ‘ä»¬åˆä¸å¾—ä¸å’Œè£¸æŒ‡é’ˆæ‰“äº¤é“ï¼Œä¸è®ºæ˜¯Linuxè¿˜æ˜¯Windowsï¼Œæˆ‘ä»¬ä¸å¯é¿å…çš„è¦ä½¿ç”¨å®ƒä»¬çš„ç³»ç»Ÿapiï¼Œäºæ˜¯å°±ä¸å¾—ä¸ä½¿ç”¨getå°†æ™ºèƒ½æŒ‡é’ˆè½¬æˆè£¸æŒ‡é’ˆã€‚è€Œè¿™æ¡æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜åœ¨ç³»ç»Ÿapié‡Œä¹Ÿè®¸æ˜¯ä¸åº”è¯¥éšæ„ææ„æ‰çš„ï¼Œå› ä¸ºåœ¨ç³»ç»Ÿå†…éƒ¨å¯èƒ½è¿˜å¾—ç»§ç»­ä½¿ç”¨è¿™æ®µå†…å­˜ï¼Œé‚£ä¹ˆåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæ™ºèƒ½æŒ‡é’ˆçš„ç‰¹æ€§å°±å¯èƒ½å¸®å€’å¿™ï¼Œéš¾å—äº†ğŸ˜«ã€‚é’ˆå¯¹è¿™ç§é—®é¢˜ï¼Œæˆ‘æƒ³åˆ°çš„å°±æ˜¯å»¶é•¿è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆçš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨releaseå°†è£¸æŒ‡é’ˆé‡Šæ”¾å‡ºæ¥ï¼Œå¯æ˜¯è¿™æ ·ä¸€æ¥ï¼Œdeleteå°±å°‘ä¸äº†è¦ä½¿ç”¨äº†ğŸ˜”<br>","like_count":18,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496270,"discussion_content":"æ˜¯çš„ï¼Œæ¶‰åŠåˆ°ç³»ç»Ÿåº•å±‚ï¼Œæœ‰æ—¶å€™å°±å¯èƒ½è¦ç”¨åˆ°deleteï¼Œä¸è¿‡ä½ ä¹Ÿå¯ä»¥è¯•ç€ç”¨RAIIæ¥ç®¡ç†ï¼Œæˆ–è€…ç”¨shared_ptrçš„å®šåˆ¶åˆ é™¤å‡½æ•°ï¼Œè¿˜æ˜¯èƒ½å¤Ÿæ‰¾åˆ°ä¸ç”¨deleteçš„æ–¹å¼çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590368020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1604330,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL6vCJbd9waPcVY3s46PUC9Qeic2ed4vqviaYfYhjOZEHXY7PO1o6FyeibwkcT07zHRT5vgiaibw8Pwichg/132","nickname":"trackfact","note":"","ucode":"79AAFBAFEA74CE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357197,"discussion_content":"è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨intrusive_ptr","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615748632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231406,"user_name":"é¢“åºŸäººæ‰","can_delete":false,"product_type":"c1","uid":1984432,"ip_address":"","ucode":"DED839F68A822D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/47/b0/f44aef75.jpg","comment_is_top":false,"comment_ctime":1593669664,"is_pvip":false,"replies":[{"id":"85464","content":"æˆ‘ä¸€èˆ¬çœ‹çš„æ˜¯cppreference.comï¼Œè§‰å¾—å®ƒçš„ç•Œé¢æ¯”è¾ƒå¥½ï¼Œèµ„æ–™ç»„ç»‡æ•´ç†çš„ä¹Ÿå¾ˆæ¸…æ¥šï¼Œå’Œå®˜æ–¹æ ‡å‡†åŸºæœ¬å»åˆã€‚<br><br>è¿™äº›ç½‘ç«™éƒ½æ˜¯å…è´¹çš„ï¼Œæˆ‘è§‰å¾—å°±å¯ä»¥ä¸€èµ·çœ‹ï¼Œäº’ç›¸å‚ç…§ã€‚","user_name":"ä½œè€…å›å¤","comment_id":231406,"uid":"1181974","ip_address":"","utype":1,"ctime":1593675993,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"40248375328","product_id":100051801,"comment_content":"ç½—è€å¸ˆæ‚¨å¥½ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¸¸ç”¨çš„C++ reference æˆ‘çœ‹åˆ°ä¸€ä¸ª cplusplus.comå’Œcppreference.com, ä½†æ˜¯ç½‘ä¸Šæœ‰ä¸€äº›ä¸å¥½è¯„ä»·ï¼Œè§‰å¾—è¿™ä¸¤ä¸ªç½‘ç«™éƒ½æœ‰é—®é¢˜ï¼Œç½—è€å¸ˆè¿™è¾¹ä¸€èˆ¬å‚è€ƒçš„å“ªäº›æ–‡æ¡£ç½‘ç«™ï¼Œå¯ä»¥æ¨èä¸‹ä¹ˆã€‚éå¸¸æ„Ÿè°¢ã€‚","like_count":9,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500290,"discussion_content":"æˆ‘ä¸€èˆ¬çœ‹çš„æ˜¯cppreference.comï¼Œè§‰å¾—å®ƒçš„ç•Œé¢æ¯”è¾ƒå¥½ï¼Œèµ„æ–™ç»„ç»‡æ•´ç†çš„ä¹Ÿå¾ˆæ¸…æ¥šï¼Œå’Œå®˜æ–¹æ ‡å‡†åŸºæœ¬å»åˆã€‚\n\nè¿™äº›ç½‘ç«™éƒ½æ˜¯å…è´¹çš„ï¼Œæˆ‘è§‰å¾—å°±å¯ä»¥ä¸€èµ·çœ‹ï¼Œäº’ç›¸å‚ç…§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593675993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220958,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1590367234,"is_pvip":false,"replies":[{"id":"81480","content":"å€¼æ˜¯å’Œå¼•ç”¨å¯¹åº”çš„ï¼Œå€¼å°±æ˜¯æœ‰å®ä½“ï¼Œå¯ä»¥æ‹·è´ï¼Œè€Œå¼•ç”¨æ˜¯è™šçš„ï¼Œåªæ˜¯ä¸ªåˆ«åï¼Œæ“ä½œä¸Šæœ‰åŒºåˆ«ã€‚","user_name":"ä½œè€…å›å¤","comment_id":220958,"uid":"1181974","ip_address":"","utype":1,"ctime":1590374695,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"35950105602","product_id":100051801,"comment_content":"â€œå› ä¸º shared_ptr å…·æœ‰å®Œæ•´çš„â€œå€¼è¯­ä¹‰â€ï¼ˆå³å¯ä»¥æ‹·è´èµ‹å€¼ï¼‰â€<br><br>ä¸€ç›´éƒ½è§‰å¾—å€¼è¯­ä¹‰è¿™ä¸‰ä¸ªå­—æ¯”è¾ƒéš¾ç†è§£ã€‚æƒ³è¯·æ•™ä¸‹è¿™ä¸ªæ¦‚å¿µåˆ°åº•æ˜¯æƒ³è¯´æ˜ä»€ä¹ˆé—®é¢˜ï¼Œè¿™ä¸ªâ€œå€¼â€è¯¥æ€ä¹ˆç†è§£ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496280,"discussion_content":"å€¼æ˜¯å’Œå¼•ç”¨å¯¹åº”çš„ï¼Œå€¼å°±æ˜¯æœ‰å®ä½“ï¼Œå¯ä»¥æ‹·è´ï¼Œè€Œå¼•ç”¨æ˜¯è™šçš„ï¼Œåªæ˜¯ä¸ªåˆ«åï¼Œæ“ä½œä¸Šæœ‰åŒºåˆ«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590374695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222548,"user_name":"Luke","can_delete":false,"product_type":"c1","uid":1010819,"ip_address":"","ucode":"8368A63185356D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/83/48e528cb.jpg","comment_is_top":false,"comment_ctime":1590832734,"is_pvip":false,"replies":[{"id":"82054","content":"è¿½æ±‚æè‡´æ€§èƒ½ï¼Œé‚£å½“ç„¶è¿˜æ˜¯è¦è‡ªå·±ç®¡ç†å¥½äº†ï¼Œä½†è¿™æ ·ä¹Ÿå°±è¦è‡ªå·±æ‰¿æ‹…å®‰å…¨çš„è´£ä»»äº†ã€‚<br><br>å»ºè®®ç”¨unique_ptrï¼Œå®ƒçš„é€Ÿåº¦ä¸è£¸æŒ‡é’ˆå‡ ä¹ç›¸åŒï¼Œæ²¡æœ‰å¼•ç”¨è®¡æ•°çš„æˆæœ¬ã€‚","user_name":"ä½œè€…å›å¤","comment_id":222548,"uid":"1181974","ip_address":"","utype":1,"ctime":1590839057,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"27360636510","product_id":100051801,"comment_content":"ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¯ä»¥è‡ªåŠ¨ææ„â€œèµ„æºâ€ï¼Œéšå«äº†æŒ‡é’ˆç®¡ç†çš„ç»†èŠ‚ï¼Œä»è€Œæé«˜äº†ä»£ç çš„å®‰å…¨æ€§å’Œæ˜“ç”¨æ€§ï¼Œä½†æ˜¯è¿™æ˜¯å¦åŒæ—¶æ„å‘³ç€æ•ˆç‡ä¸‹é™ï¼Ÿåœ¨æè‡´è¿½æ±‚æ‰§è¡Œé€Ÿåº¦çš„ç³»ç»Ÿä¸­ï¼Œæ˜¯å¦éœ€è¦é¿å…ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œä¾èµ–ç¨‹åºå‘˜è‡ªå·±ç®¡ç†è£¸æŒ‡é’ˆçš„newå’Œdeleteå‘¢ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496839,"discussion_content":"è¿½æ±‚æè‡´æ€§èƒ½ï¼Œé‚£å½“ç„¶è¿˜æ˜¯è¦è‡ªå·±ç®¡ç†å¥½äº†ï¼Œä½†è¿™æ ·ä¹Ÿå°±è¦è‡ªå·±æ‰¿æ‹…å®‰å…¨çš„è´£ä»»äº†ã€‚\n\nå»ºè®®ç”¨unique_ptrï¼Œå®ƒçš„é€Ÿåº¦ä¸è£¸æŒ‡é’ˆå‡ ä¹ç›¸åŒï¼Œæ²¡æœ‰å¼•ç”¨è®¡æ•°çš„æˆæœ¬ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590839057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234052,"user_name":"The Answer","can_delete":false,"product_type":"c1","uid":1664773,"ip_address":"","ucode":"1ECF369780BFA9","user_header":"https://static001.geekbang.org/account/avatar/00/19/67/05/a0315f44.jpg","comment_is_top":false,"comment_ctime":1594565885,"is_pvip":false,"replies":[{"id":"86372","content":"shared_ptrå°±åƒæ˜¯ä¸€ä¸ªç›’å­ï¼Œå®ƒè‡ªå·±æ˜¯å®‰å…¨æ“ä½œçš„ï¼Œä½†ä¸€æ—¦æŠŠé‡Œé¢çš„ä¸œè¥¿æ‹¿å‡ºæ¥ï¼Œå°±æ— æ³•ä¿è¯äº†ã€‚<br><br>shared_ptrå’Œå®ƒæŒ‡å‘çš„å¯¹è±¡æ˜¯å½¼æ­¤ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥çº¿ç¨‹å®‰å…¨å½“ç„¶æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œshared_ptråªæ˜¯ä¸€ä¸ªhandleï¼Œç¦»å¼€äº†handleï¼Œå®ƒå°±ä¸èƒ½ä¿è¯äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":234052,"uid":"1181974","ip_address":"","utype":1,"ctime":1594601550,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":4,"race_medal":0,"score":"23069402365","product_id":100051801,"comment_content":"è€å¸ˆï¼Œshared_ptr æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å¦‚ä½•ç†è§£å®ƒæ‰€ç®¡ç†çš„å¯¹è±¡ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„å‘¢ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501256,"discussion_content":"shared_ptrå°±åƒæ˜¯ä¸€ä¸ªç›’å­ï¼Œå®ƒè‡ªå·±æ˜¯å®‰å…¨æ“ä½œçš„ï¼Œä½†ä¸€æ—¦æŠŠé‡Œé¢çš„ä¸œè¥¿æ‹¿å‡ºæ¥ï¼Œå°±æ— æ³•ä¿è¯äº†ã€‚\n\nshared_ptrå’Œå®ƒæŒ‡å‘çš„å¯¹è±¡æ˜¯å½¼æ­¤ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥çº¿ç¨‹å®‰å…¨å½“ç„¶æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œshared_ptråªæ˜¯ä¸€ä¸ªhandleï¼Œç¦»å¼€äº†handleï¼Œå®ƒå°±ä¸èƒ½ä¿è¯äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594601550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2765503,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/32/bf/8dcbf91a.jpg","nickname":"å­™é˜³","note":"","ucode":"43B5231D2C9245","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537600,"discussion_content":"å¼•ç”¨è®¡æ•°æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒæ˜¯åŸå­å˜é‡ï¼Œä½†æŒ‡å‘çš„å¯¹è±¡æœ¬èº«æ˜¯ä¸å®‰å…¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639112315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2149899,"avatar":"https://static001.geekbang.org/account/avatar/00/20/ce/0b/b1e244e6.jpg","nickname":"IMBFD","note":"","ucode":"2E7B3D01C537A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304548,"discussion_content":"shared-ptræ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿæˆ‘æ€ä¹ˆè®°å¾—å¥½åƒä¸æ˜¯ã€‚è‡³å°‘åŒ…å«äº†ä¸€ä¸ªæŒ‡é’ˆå’Œä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œå†…éƒ¨æ“ä½œä»–ä»¬çš„æ—¶å€™æ˜¯åŠ é”äº†ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599612732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2046086,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/38/86/156e5583.jpg","nickname":"æ— å","note":"","ucode":"885A6A3B0F86CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2149899,"avatar":"https://static001.geekbang.org/account/avatar/00/20/ce/0b/b1e244e6.jpg","nickname":"IMBFD","note":"","ucode":"2E7B3D01C537A0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342658,"discussion_content":"å¼•ç”¨è®¡æ•°çš„æ˜¯åŸå­çš„æ‰€ä»¥å¼•ç”¨è®¡æ•°å®‰å…¨ï¼Œä½†æŒ‡å‘çš„å†…å­˜å€¼ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610767035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":304548,"ip_address":""},"score":342658,"extra":""}]}]},{"had_liked":false,"id":220505,"user_name":"éƒ­éƒ­","can_delete":false,"product_type":"c1","uid":1517814,"ip_address":"","ucode":"E358C980AB9555","user_header":"https://static001.geekbang.org/account/avatar/00/17/28/f6/7fa61d68.jpg","comment_is_top":false,"comment_ctime":1590252484,"is_pvip":false,"replies":[{"id":"81460","content":"æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œæ˜¯ä¸è¡Œçš„ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºunique_ptrç¦æ­¢äº†æ™®é€šçš„æ‹·è´èµ‹å€¼ï¼Œåªå…è®¸è½¬ç§»ï¼Œå¿…é¡»è°ƒç”¨std::move()ã€‚","user_name":"ä½œè€…å›å¤","comment_id":220505,"uid":"1181974","ip_address":"","utype":1,"ctime":1590368561,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"23065088964","product_id":100051801,"comment_content":"è€å¸ˆï¼Œå…³äºunique_ptrï¼Œå¦‚auto ptr = ptr1ï¼Œé‚£ptr1å°±åº”è¯¥è¢«ç½®ç©ºå•¦ã€‚ä¸éœ€è¦æ˜¾ç¤ºçš„è°ƒç”¨std::move","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496158,"discussion_content":"æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œæ˜¯ä¸è¡Œçš„ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºunique_ptrç¦æ­¢äº†æ™®é€šçš„æ‹·è´èµ‹å€¼ï¼Œåªå…è®¸è½¬ç§»ï¼Œå¿…é¡»è°ƒç”¨std::move()ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590368561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248462,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1600172111,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18780041295","product_id":100051801,"comment_content":"weak_ptræ²¡æœ‰é‡è½½operator-&gt;å’Œoperator *æ“ä½œç¬¦ï¼Œä¸å¯ç›´æ¥é€šè¿‡weak_pträ½¿ç”¨å¯¹è±¡ï¼Œå…¸å‹çš„ç”¨æ³•æ˜¯è°ƒç”¨å…¶lockå‡½æ•°æ¥è·å¾—shared_ptrç¤ºä¾‹ï¼Œè¿›è€Œè®¿é—®åŸå§‹å¯¹è±¡ã€‚","like_count":4},{"had_liked":false,"id":243008,"user_name":"Geek_ç‹","can_delete":false,"product_type":"c1","uid":1625386,"ip_address":"","ucode":"75E5791737D6EC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZqsT4YGrnaBtCgetwQiaK8nt2qXr5z56a9j2ricUiadibsPNqYqiawaygHicq3frt1jPVaoT78gh2f7Uw/132","comment_is_top":false,"comment_ctime":1597918435,"is_pvip":false,"replies":[{"id":"89608","content":"å°±æ˜¯ç±»çš„ææ„å‡½æ•°æ¯”è¾ƒå¤§ï¼Œé‡Œé¢çš„æ“ä½œå¾ˆå¤šï¼Œç”¨shared_ptræ¥ç®¡ç†ï¼Œç”±äºææ„çš„æ—¶æœºä¸ç¡®å®šï¼Œç»å¸¸ä¼šå‘ç”Ÿè«åå…¶å¦™çš„ç³»ç»ŸæŠ–åŠ¨ï¼Œå°±åƒæ˜¯java&#47;goçš„gc stop the worldä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","comment_id":243008,"uid":"1181974","ip_address":"","utype":1,"ctime":1597971889,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":3,"race_medal":0,"score":"14482820323","product_id":100051801,"comment_content":"ç½—è€å¸ˆèƒ½æŠŠæ–‡ä¸­æåˆ°çš„è¡€æ³ªæ•™è®­è¯¦ç»†è¯´ä¸€ä¸‹å—ï¼Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504153,"discussion_content":"å°±æ˜¯ç±»çš„ææ„å‡½æ•°æ¯”è¾ƒå¤§ï¼Œé‡Œé¢çš„æ“ä½œå¾ˆå¤šï¼Œç”¨shared_ptræ¥ç®¡ç†ï¼Œç”±äºææ„çš„æ—¶æœºä¸ç¡®å®šï¼Œç»å¸¸ä¼šå‘ç”Ÿè«åå…¶å¦™çš„ç³»ç»ŸæŠ–åŠ¨ï¼Œå°±åƒæ˜¯java/goçš„gc stop the worldä¸€æ ·ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597971889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378058,"discussion_content":"shared_ptræœ‰å¼•ç”¨è®¡æ•°ï¼Œæ‰€ä»¥ç¦»å¼€ä½œç”¨åŸŸæ—¶å¯èƒ½è¿˜æœ‰åˆ«çš„åœ°æ–¹å¼•ç”¨ï¼Œä¸ä¸€å®šä¼šç«‹å³ææ„ï¼Œåªæœ‰æ‰€æœ‰çš„å¼•ç”¨éƒ½å˜æˆ0æ‰ä¼šé‡Šæ”¾èµ„æºï¼Œè¿™åœ¨è¿è¡Œæ—¶æ˜¯ä¸å¤ªå¥½æŠŠæ¡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623036306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2344081,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c4/91/a017bf72.jpg","nickname":"coconut","note":"","ucode":"07B95C7A6AC2F7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376345,"discussion_content":"ä¸æ˜¯ç¦»å¼€ä½œç”¨åŸŸå°±ä¼šè°ƒç”¨ææ„å‡½æ•°ä¹ˆï¼Œä¸ºä»€ä¹ˆè¯´&#34;ææ„çš„æ—¶æœºä¸ç¡®å®š&#34;å‘¢?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622088106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231276,"user_name":"é¢“åºŸäººæ‰","can_delete":false,"product_type":"c1","uid":1984432,"ip_address":"","ucode":"DED839F68A822D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/47/b0/f44aef75.jpg","comment_is_top":false,"comment_ctime":1593620949,"is_pvip":false,"replies":[{"id":"85398","content":"å¯ä»¥åœ¨æ™ºèƒ½æŒ‡é’ˆçš„æ¨¡æ¿å‚æ•°é‡Œå®šåˆ¶åˆ é™¤å‡½æ•°ï¼Œæ‰§è¡Œç‰¹åˆ«çš„èµ„æºé‡Šæ”¾æ“ä½œï¼Œè€Œä¸æ˜¯ç®€å•çš„deleteã€‚<br><br>æ™ºèƒ½æŒ‡é’ˆçš„ä½¿ç”¨åœºæ™¯å°±æ˜¯æ›¿ä»£åŸå§‹æŒ‡é’ˆï¼Œåªè¦æƒ³è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œæˆ–è€…æƒ³é¿å…èµ„æºæ³„æ¼ï¼Œå°±åº”è¯¥ç”¨æ™ºèƒ½æŒ‡é’ˆã€‚<br><br>æ‰€ä»¥åœ¨ç”¨æŒ‡é’ˆçš„æ—¶å€™ï¼Œè‡ªå·±å¿ƒé‡Œé—®ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œå°±å¯ä»¥çŸ¥é“æ˜¯å¦è¯¥ç”¨æ™ºèƒ½æŒ‡é’ˆäº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":231276,"uid":"1181974","ip_address":"","utype":1,"ctime":1593652335,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"14478522837","product_id":100051801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®æ™ºèƒ½æŒ‡é’ˆçš„é‡Šæ”¾å’Œå†…å­˜ç®¡ç†çš„ç»“åˆæ€ä¹ˆä½¿ç”¨ä¾‹å¦‚ä»¥å‰æˆ‘ä»¬å†™çš„æ™ºèƒ½æŒ‡é’ˆçš„ç®€å•ç”¨æ³•ï¼š<br>Template&lt;class T&gt;<br>class AutoPtr<br>{<br>private:<br>    T* m_ptr<br>public:<br>    AutoPtr(T* ptr):m_ptr(ptr)   {}<br>    ~AutoPtr()                          {if(ptr) ptr-&gt;release()}          &#47;&#47;ææ„å‡½æ•°é‡Œå»å›æ”¶å¯¹è±¡å†…å­˜<br>}<br>é‚£ç°åœ¨ä½¿ç”¨stlçš„æ™ºèƒ½æŒ‡é’ˆèƒ½å¦åšåˆ°è¿™æ­¥ã€‚<br>è¿˜æœ‰èƒ½å¦ä»‹ç»ä¸‹å®é™…é¡¹ç›®å¼€å‘ä¸­çš„ä¸€äº›ä½¿ç”¨åœºæ™¯å’Œä½¿ç”¨å°æŠ€å·§ã€‚","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500232,"discussion_content":"å¯ä»¥åœ¨æ™ºèƒ½æŒ‡é’ˆçš„æ¨¡æ¿å‚æ•°é‡Œå®šåˆ¶åˆ é™¤å‡½æ•°ï¼Œæ‰§è¡Œç‰¹åˆ«çš„èµ„æºé‡Šæ”¾æ“ä½œï¼Œè€Œä¸æ˜¯ç®€å•çš„deleteã€‚\n\næ™ºèƒ½æŒ‡é’ˆçš„ä½¿ç”¨åœºæ™¯å°±æ˜¯æ›¿ä»£åŸå§‹æŒ‡é’ˆï¼Œåªè¦æƒ³è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œæˆ–è€…æƒ³é¿å…èµ„æºæ³„æ¼ï¼Œå°±åº”è¯¥ç”¨æ™ºèƒ½æŒ‡é’ˆã€‚\n\næ‰€ä»¥åœ¨ç”¨æŒ‡é’ˆçš„æ—¶å€™ï¼Œè‡ªå·±å¿ƒé‡Œé—®ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œå°±å¯ä»¥çŸ¥é“æ˜¯å¦è¯¥ç”¨æ™ºèƒ½æŒ‡é’ˆäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593652335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229630,"user_name":"Zhangwh","can_delete":false,"product_type":"c1","uid":1244001,"ip_address":"","ucode":"49CDE4BCFC2534","user_header":"https://static001.geekbang.org/account/avatar/00/12/fb/61/c84a45be.jpg","comment_is_top":false,"comment_ctime":1593078827,"is_pvip":false,"replies":[{"id":"84748","content":"è¯¾ç¨‹è®¾è®¡çš„æ—¶å€™å°±æƒ³çš„æ˜¯è´µç²¾ä¸è´µå¤šï¼Œæ•°é‡å°‘ä¸€ç‚¹å­¦èµ·æ¥ä¸ç´¯ï¼Œå®¹æ˜“å¸æ”¶é¢†ä¼šã€‚<br><br>æƒ³è¦äº†è§£æ›´å¤šå¯ä»¥å»çœ‹GitHubä¸Šçš„èµ„æ–™ï¼Œç„¶åæœ‰ç–‘é—®ç•™è¨€æˆ–è€…GitHubæissueã€‚","user_name":"ä½œè€…å›å¤","comment_id":229630,"uid":"1181974","ip_address":"","utype":1,"ctime":1593086202,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":2,"race_medal":0,"score":"14477980715","product_id":100051801,"comment_content":"è®²çš„å¾ˆå¥½å¾ˆå®ç”¨ï¼Œä¸è¿‡åªæœ‰30è®²ï¼Œæœ‰ç‚¹å°‘å‘€","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499572,"discussion_content":"è¯¾ç¨‹è®¾è®¡çš„æ—¶å€™å°±æƒ³çš„æ˜¯è´µç²¾ä¸è´µå¤šï¼Œæ•°é‡å°‘ä¸€ç‚¹å­¦èµ·æ¥ä¸ç´¯ï¼Œå®¹æ˜“å¸æ”¶é¢†ä¼šã€‚\n\næƒ³è¦äº†è§£æ›´å¤šå¯ä»¥å»çœ‹GitHubä¸Šçš„èµ„æ–™ï¼Œç„¶åæœ‰ç–‘é—®ç•™è¨€æˆ–è€…GitHubæissueã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593086202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2620900,"avatar":"https://static001.geekbang.org/account/avatar/00/27/fd/e4/5a5b5a83.jpg","nickname":"å°¼è«å§¬","note":"","ucode":"FA390E7CC8657A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":584220,"discussion_content":"è€å¸ˆï¼Œé—®ä¸€ä¸‹ï¼ŒGithubä»“åº“åæ˜¯å«ä»€ä¹ˆï¼Ÿèƒ½å‘ä¸€ä¸‹é“¾æ¥å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660695665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":499572,"ip_address":"ä¸Šæµ·"},"score":584220,"extra":""}]}]},{"had_liked":false,"id":221344,"user_name":"Zivon","can_delete":false,"product_type":"c1","uid":2005287,"ip_address":"","ucode":"2C7D4557C2903D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/99/27/15d2c4f5.jpg","comment_is_top":false,"comment_ctime":1590478642,"is_pvip":false,"replies":[{"id":"81639","content":"åŸºæœ¬çš„æ•°æ®ç»“æ„å¼ºè°ƒæ•ˆç‡ï¼Œç”¨æ™ºèƒ½æŒ‡é’ˆå°±æœ‰ç‚¹æˆæœ¬ç•¥é«˜ï¼Œå½“ç„¶ä½œä¸ºç»ƒæ‰‹è¿˜æ˜¯å¯ä»¥çš„ã€‚<br><br>æ™ºèƒ½æŒ‡é’ˆæœ€é€‚åˆçš„åº”ç”¨åœºæ™¯æ˜¯â€œè‡ªåŠ¨èµ„æºç®¡ç†â€ï¼Œé“¾è¡¨è¿˜æ˜¯ä¸å¤ªåˆé€‚ï¼Œè€Œä¸”ä½¿ç”¨shared_ptrå®¹æ˜“å‡ºç°å¾ªç¯å¼•ç”¨ï¼Œæ”¹æˆweak_pträ¼šå¥½ä¸€äº›ã€‚","user_name":"ä½œè€…å›å¤","comment_id":221344,"uid":"1181974","ip_address":"","utype":1,"ctime":1590479441,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"14475380530","product_id":100051801,"comment_content":"ç½—è€å¸ˆï¼Œä»Šå¤©å°è¯•ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ”¹å†™åŒå‘é“¾è¡¨çš„æ—¶å€™æ„Ÿè§‰å®ç°å¾ˆéº»çƒ¦å•Šï¼Œè¯·é—®åœ¨å®ç°è¿™ç§åŸºæœ¬æ•°æ®ç»“æ„çš„æ—¶å€™éœ€è¦ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå—","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496432,"discussion_content":"åŸºæœ¬çš„æ•°æ®ç»“æ„å¼ºè°ƒæ•ˆç‡ï¼Œç”¨æ™ºèƒ½æŒ‡é’ˆå°±æœ‰ç‚¹æˆæœ¬ç•¥é«˜ï¼Œå½“ç„¶ä½œä¸ºç»ƒæ‰‹è¿˜æ˜¯å¯ä»¥çš„ã€‚\n\næ™ºèƒ½æŒ‡é’ˆæœ€é€‚åˆçš„åº”ç”¨åœºæ™¯æ˜¯â€œè‡ªåŠ¨èµ„æºç®¡ç†â€ï¼Œé“¾è¡¨è¿˜æ˜¯ä¸å¤ªåˆé€‚ï¼Œè€Œä¸”ä½¿ç”¨shared_ptrå®¹æ˜“å‡ºç°å¾ªç¯å¼•ç”¨ï¼Œæ”¹æˆweak_pträ¼šå¥½ä¸€äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590479441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288273,"user_name":"ä¸å¦‚ä¸è§","can_delete":false,"product_type":"c1","uid":1253228,"ip_address":"","ucode":"2403A4B831B528","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/6c/43c82d43.jpg","comment_is_top":false,"comment_ctime":1618389308,"is_pvip":false,"replies":[{"id":"104669","content":"å¾ˆå¥½çš„é—®é¢˜ã€‚<br><br>è¦æ¸…æ¥šæ™ºèƒ½æŒ‡é’ˆçš„ç”¨é€”ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ¥ç®¡ç†èµ„æºï¼Œä¿è¯è‡ªåŠ¨é‡Šæ”¾ï¼Œæ‰€ä»¥å¦‚æœæ˜¯æƒ³å¼•ç”¨å¯¹è±¡ï¼Œæœ€å¥½ç”¨weak_ptrã€‚<br><br>","user_name":"ä½œè€…å›å¤","comment_id":288273,"uid":"1181974","ip_address":"","utype":1,"ctime":1618450720,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"10208323900","product_id":100051801,"comment_content":"ç½—è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ã€‚ç¡®å®æœ‰æ—¶å€™åœ¨å¾ˆé•¿çš„é“¾ä¸­å¾ˆéš¾å‘ç°shared_ptrçš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•ï¼ˆå·¥å…·ï¼‰çŸ¥é“è‡ªå·±å‘ç”Ÿäº†å¾ªç¯å¼•ç”¨ã€‚æˆ–è€…ä¸€å¼€å§‹åœ¨è®¾è®¡çš„æ—¶å€™ï¼Œä»å“ªäº›æ–¹é¢å¯ä»¥è€ƒè™‘æˆ–è€…é¿å…å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚æ„Ÿè°¢ã€‚","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518567,"discussion_content":"å¾ˆå¥½çš„é—®é¢˜ã€‚\n\nè¦æ¸…æ¥šæ™ºèƒ½æŒ‡é’ˆçš„ç”¨é€”ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ¥ç®¡ç†èµ„æºï¼Œä¿è¯è‡ªåŠ¨é‡Šæ”¾ï¼Œæ‰€ä»¥å¦‚æœæ˜¯æƒ³å¼•ç”¨å¯¹è±¡ï¼Œæœ€å¥½ç”¨weak_ptrã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618450720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228998,"user_name":"æ¹–æµ·æ•£äºº","can_delete":false,"product_type":"c1","uid":1096781,"ip_address":"","ucode":"74C0C825D74CC1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJe0esddRVdG689MicU5zMibMtkyLpYkX4MtiamKP8eFf7KUoMlfU7ficrciakyVS06jHVdskYT67JKtdg/132","comment_is_top":false,"comment_ctime":1592877415,"is_pvip":false,"replies":[{"id":"84435","content":"å³å€¼ã€moveã€å®Œç¾è½¬å‘è¿™äº›æ¦‚å¿µæ¯”è¾ƒåº•å±‚ï¼Œç»†èŠ‚æ¯”è¾ƒå¤šï¼Œä¸æ˜¯ç‰¹åˆ«å¥½è§£é‡Šï¼Œä¹Ÿå®¹æ˜“ç”¨é”™ã€‚<br><br>å¯ä»¥çœ‹ä¸€ä¸‹GitHubèµ„æºï¼ŒC++ä¹‹çˆ¶BSçš„faqï¼Œè¯´çš„è¿˜æ˜¯æ¯”è¾ƒæ¸…æ¥šã€‚","user_name":"ä½œè€…å›å¤","comment_id":228998,"uid":"1181974","ip_address":"","utype":1,"ctime":1592878698,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"10182812007","product_id":100051801,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­æåˆ°çš„å³å€¼ï¼Œmoveï¼Œå®Œç¾è½¬å‘ä¼šæœ‰è¯¾ç¨‹è®²åˆ°å—","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499291,"discussion_content":"å³å€¼ã€moveã€å®Œç¾è½¬å‘è¿™äº›æ¦‚å¿µæ¯”è¾ƒåº•å±‚ï¼Œç»†èŠ‚æ¯”è¾ƒå¤šï¼Œä¸æ˜¯ç‰¹åˆ«å¥½è§£é‡Šï¼Œä¹Ÿå®¹æ˜“ç”¨é”™ã€‚\n\nå¯ä»¥çœ‹ä¸€ä¸‹GitHubèµ„æºï¼ŒC++ä¹‹çˆ¶BSçš„faqï¼Œè¯´çš„è¿˜æ˜¯æ¯”è¾ƒæ¸…æ¥šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592878698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221104,"user_name":"Zivon","can_delete":false,"product_type":"c1","uid":2005287,"ip_address":"","ucode":"2C7D4557C2903D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/99/27/15d2c4f5.jpg","comment_is_top":false,"comment_ctime":1590405173,"is_pvip":false,"replies":[{"id":"81584","content":"è¯´çš„å¾ˆå¥½ï¼Œæ™ºèƒ½æŒ‡é’ˆå°±è¦è¿™æ ·ç”¨ã€‚","user_name":"ä½œè€…å›å¤","comment_id":221104,"uid":"1181974","ip_address":"","utype":1,"ctime":1590454434,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"10180339765","product_id":100051801,"comment_content":"shared_ptr ä¸unique_ptræœ€å¤§åŒºåˆ«å°±åœ¨äºå‰è€…å¯ä»¥å¤šä¸ªæŒ‡é’ˆå…±äº«ä¸€ä¸ªå¯¹è±¡æˆ–å…ƒç´ ï¼Œè€Œåè€…ä¸€å—å†…å­˜ç©ºé—´åªèƒ½ç”±å”¯ä¸€çš„ä¸€ä¸ªæŒ‡é’ˆæŒæœ‰ã€‚<br>ä½¿ç”¨å †å†…å­˜æ–°å»ºå¯¹è±¡å‡ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œå°±å¯ä»¥ä¸ç”¨new&#47;delete","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496334,"discussion_content":"è¯´çš„å¾ˆå¥½ï¼Œæ™ºèƒ½æŒ‡é’ˆå°±è¦è¿™æ ·ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590454434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220277,"user_name":"K. D.","can_delete":false,"product_type":"c1","uid":1914230,"ip_address":"","ucode":"7A1EC6B64D1EAF","user_header":"https://static001.geekbang.org/account/avatar/00/1d/35/76/951b0daf.jpg","comment_is_top":false,"comment_ctime":1590219722,"is_pvip":false,"replies":[{"id":"81319","content":"åŒºåˆ«å¾ˆå¤§ï¼Œmoveæ˜¯è½¬ç§»è¯­ä¹‰ï¼Œ=æ˜¯æ‹·è´å…±äº«è¯­ä¹‰ï¼Œä½†å¯¹äºshared_ptræ¥è¯´ä¸€èˆ¬æ²¡æœ‰å¿…è¦ç”¨è½¬ç§»è¯­ä¹‰ã€‚","user_name":"ä½œè€…å›å¤","comment_id":220277,"uid":"1181974","ip_address":"","utype":1,"ctime":1590230800,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"10180154314","product_id":100051801,"comment_content":"ç½—è€å¸ˆä½ å¥½ï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼šstd::moveæ˜¯å¦ä¹Ÿé€‚ç”¨äºshared_ptrï¼Œå’Œ=æœ‰åŒºåˆ«å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496109,"discussion_content":"åŒºåˆ«å¾ˆå¤§ï¼Œmoveæ˜¯è½¬ç§»è¯­ä¹‰ï¼Œ=æ˜¯æ‹·è´å…±äº«è¯­ä¹‰ï¼Œä½†å¯¹äºshared_ptræ¥è¯´ä¸€èˆ¬æ²¡æœ‰å¿…è¦ç”¨è½¬ç§»è¯­ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590230800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220260,"user_name":"sea520","can_delete":false,"product_type":"c1","uid":1508621,"ip_address":"","ucode":"C943EAD079B2A4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIm5rlbJ4HdXLbxmflvW0FW4rTyLcDzHLGDJUJic9W3f1KibWY7mAj9dxUIEVlxDyjwRXEX54KXEn5g/132","comment_is_top":false,"comment_ctime":1590217041,"is_pvip":false,"replies":[{"id":"81322","content":"æ˜¯å•Šï¼Œæˆ‘è§‰å¾—è¿™æ ·çš„é¢è¯•å®˜å¾ˆlowï¼Œå¯èƒ½ä»–ä»¬çš„æ°´å¹³ä¹Ÿå°±é‚£æ ·äº†å§ã€‚<br><br>ä¸è¿‡æ—¢ç„¶æ˜¯é¢è¯•ï¼Œä¹Ÿåªèƒ½å¿ä¸€ä¸‹äº†ï¼Œä¸è¿‡å¯ä»¥çœ‹å‡ºåº”è˜å…¬å¸çš„æ°´å¹³ã€‚","user_name":"ä½œè€…å›å¤","comment_id":220260,"uid":"1181974","ip_address":"","utype":1,"ctime":1590230952,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"10180151633","product_id":100051801,"comment_content":"æ‚¨å¥½ï¼ä¸ºä»€ä¹ˆé¢è¯•å–œæ¬¢é—®cppåº•å±‚å®ç°ç»†èŠ‚ã€‚æ¯”å¦‚è¯´è™šè¡¨å®ç°ï¼Œstlå®ç°ï¼Ÿæœ‰ä»€ä¹ˆæœ€å¤§çš„ä»·å€¼ï¼Ÿä¸‡ä¸€å·¥ä½œæ¢æ–°è¯­è¨€è¿˜è¦éƒ½å¼„çš„å¾ˆæ¸…æ¥šå—ï¼Ÿé‚£æ—¶é—´æˆæœ¬å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496103,"discussion_content":"æ˜¯å•Šï¼Œæˆ‘è§‰å¾—è¿™æ ·çš„é¢è¯•å®˜å¾ˆlowï¼Œå¯èƒ½ä»–ä»¬çš„æ°´å¹³ä¹Ÿå°±é‚£æ ·äº†å§ã€‚\n\nä¸è¿‡æ—¢ç„¶æ˜¯é¢è¯•ï¼Œä¹Ÿåªèƒ½å¿ä¸€ä¸‹äº†ï¼Œä¸è¿‡å¯ä»¥çœ‹å‡ºåº”è˜å…¬å¸çš„æ°´å¹³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590230952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1055296,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","nickname":"ä¸­å±±æµªå­","note":"","ucode":"25D0F8462473D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292159,"discussion_content":"é¢è¯•ä¹Ÿæœ‰æˆæœ¬ï¼Œå¸‚åœºä¸Šä¸»æµé¢è¯•æµç¨‹ä¸å¤–ä¹ï¼šç®—æ³•+é¡¹ç›®+è¯­è¨€åŸºç¡€+è‹±è¯­æŠ€èƒ½ï¼Œå¯¹å…¬å¸æ¥è¯´è¿™æ˜¯ä¸€å¥—æ¯”è¾ƒä¿é™©çš„isoæµç¨‹ã€‚æ¢åšä½ æ˜¯é¢è¯•å®˜ï¼Œä½ ä¼šè€ƒå¯Ÿå€™é€‰äººä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595121978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318162,"user_name":"e^(iÎ±)=cosÎ±+isinÎ±âµÂ·â°","can_delete":false,"product_type":"c1","uid":2601561,"ip_address":"","ucode":"7A41A00CF5EAF2","user_header":"https://static001.geekbang.org/account/avatar/00/27/b2/59/4ea0e511.jpg","comment_is_top":false,"comment_ctime":1635168018,"is_pvip":false,"replies":[{"id":"115414","content":"è¿™é‡Œçš„â€œç‹¬å â€â€œå…±äº«â€ä¸çº¿ç¨‹æ— å…³ï¼ŒæŒ‡çš„æ˜¯æŒ‡é’ˆçš„ä½¿ç”¨è€…ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„â€œå®¢æˆ·ä»£ç â€ã€‚<br><br>æ¯”å¦‚è¯´ï¼ŒæŒ‡é’ˆåªåœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œé‚£å°±æ˜¯ç‹¬å ï¼Œè¢«ä¸¤æ®µä»£ç åœ¨ä¸åŒçš„åœ°æ–¹ä½¿ç”¨ï¼Œå°±æ˜¯å…±äº«ã€‚","user_name":"ä½œè€…å›å¤","comment_id":318162,"uid":"1181974","ip_address":"","utype":1,"ctime":1635230175,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"5930135314","product_id":100051801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œ<br>å¦‚æœæŒ‡é’ˆæ˜¯â€œç‹¬å â€ä½¿ç”¨ï¼Œå°±åº”è¯¥é€‰æ‹© unique_ptrï¼›<br>â€œå…±äº«â€ä½¿ç”¨ï¼Œå°±åº”è¯¥é€‰æ‹© shared_ptrï¼›<br>è¿™é‡Œç‹¬å æŒ‡çš„æ˜¯åœ¨å•ä¸€çº¿ç¨‹é‡Œä½¿ç”¨ï¼Œå…±äº«æ˜¯æŒ‡å¯èƒ½å¤šä¸ªçº¿ç¨‹éƒ½ä¼šä½¿ç”¨è¿™ä¸ªæŒ‡é’ˆï¼Œæ˜¯è¿™ä¸ªæ„æ€å—ï¼Ÿ<br>æ‰€ä»¥ä¸€ä¸ªå«unique_pteï¼Œä¸€ä¸ªå«shared_ptr","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529124,"discussion_content":"è¿™é‡Œçš„â€œç‹¬å â€â€œå…±äº«â€ä¸çº¿ç¨‹æ— å…³ï¼ŒæŒ‡çš„æ˜¯æŒ‡é’ˆçš„ä½¿ç”¨è€…ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„â€œå®¢æˆ·ä»£ç â€ã€‚\n\næ¯”å¦‚è¯´ï¼ŒæŒ‡é’ˆåªåœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œé‚£å°±æ˜¯ç‹¬å ï¼Œè¢«ä¸¤æ®µä»£ç åœ¨ä¸åŒçš„åœ°æ–¹ä½¿ç”¨ï¼Œå°±æ˜¯å…±äº«ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635230175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281769,"user_name":"è¶…è¶Šæ¨è¶…è¶Š","can_delete":false,"product_type":"c1","uid":1028887,"ip_address":"","ucode":"BB390B4B7E19D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b3/17/9f6d67dc.jpg","comment_is_top":false,"comment_ctime":1614874293,"is_pvip":false,"replies":[{"id":"102288","content":"æ™ºèƒ½æŒ‡é’ˆçš„ç›®æ ‡æ˜¯â€œè‡ªåŠ¨å†…å­˜ç®¡ç†â€ï¼Œå®ƒæœ¬èº«æ˜¯ä¸€ä¸ªåœ¨æ ˆä¸Šåˆ†é…çš„å¯¹è±¡ï¼Œä½†é‡Œé¢çš„å†…å®¹æ˜¯åœ¨å †ä¸Šï¼Œæœ‰é‚£ä¹ˆä¸€ç‚¹ç»•ã€‚<br><br>å½“ä½ éœ€è¦ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæœ‰é™ï¼Œåˆå¾—â€œåŠ¨æ€â€åœ¨å †ä¸Šåˆ›å»ºçš„æ—¶å€™ï¼Œå°±ç”¨unique_ptrã€‚<br><br>å¦‚æœä¸æ˜¯åŠ¨æ€åˆ›å»ºï¼Œä¸å †æ— å…³ï¼Œé‚£æ˜¾ç„¶ç›´æ¥ç”¨æ ˆå¯¹è±¡æ›´çœäº‹ï¼Œæ²¡æœ‰äº†æ™ºèƒ½æŒ‡é’ˆçš„æˆæœ¬ã€‚<br><br>C++å¯¹å†…å­˜ç®¡ç†å¾—å¤ªç»†äº†ï¼Œè¦æ“å¿ƒçš„äº‹æƒ…å¤ªå¤šã€‚","user_name":"ä½œè€…å›å¤","comment_id":281769,"uid":"1181974","ip_address":"","utype":1,"ctime":1614907918,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":2,"race_medal":0,"score":"5909841589","product_id":100051801,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¦‚æœç›´æ¥åœ¨æ ˆä¸Šåˆ†é…å¯¹è±¡ï¼Œè·Ÿunique ptrç›¸æ¯”ï¼Œæˆ‘åº”è¯¥å€¾å‘äºå“ªç§å‘¢","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516506,"discussion_content":"æ™ºèƒ½æŒ‡é’ˆçš„ç›®æ ‡æ˜¯â€œè‡ªåŠ¨å†…å­˜ç®¡ç†â€ï¼Œå®ƒæœ¬èº«æ˜¯ä¸€ä¸ªåœ¨æ ˆä¸Šåˆ†é…çš„å¯¹è±¡ï¼Œä½†é‡Œé¢çš„å†…å®¹æ˜¯åœ¨å †ä¸Šï¼Œæœ‰é‚£ä¹ˆä¸€ç‚¹ç»•ã€‚\n\nå½“ä½ éœ€è¦ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæœ‰é™ï¼Œåˆå¾—â€œåŠ¨æ€â€åœ¨å †ä¸Šåˆ›å»ºçš„æ—¶å€™ï¼Œå°±ç”¨unique_ptrã€‚\n\nå¦‚æœä¸æ˜¯åŠ¨æ€åˆ›å»ºï¼Œä¸å †æ— å…³ï¼Œé‚£æ˜¾ç„¶ç›´æ¥ç”¨æ ˆå¯¹è±¡æ›´çœäº‹ï¼Œæ²¡æœ‰äº†æ™ºèƒ½æŒ‡é’ˆçš„æˆæœ¬ã€‚\n\nC++å¯¹å†…å­˜ç®¡ç†å¾—å¤ªç»†äº†ï¼Œè¦æ“å¿ƒçš„äº‹æƒ…å¤ªå¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614907918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2463755,"avatar":"https://static001.geekbang.org/account/avatar/00/25/98/0b/702cb261.jpg","nickname":"å‡¡äººæˆ‘å›æ¥","note":"","ucode":"88B34BF95AA3A9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366991,"discussion_content":"è¦çœ‹å¯¹è±¡å ç”¨å†…å­˜çš„å¤§å°ï¼Œæ¯”å¦‚ä¸€ä¸ª100KBçš„charæ•°ç»„å°±ä¸è¦åœ¨æ ˆä¸Šåˆ†é…ï¼Œå¦åˆ™å¯èƒ½è¿è¡Œæ—¶è¿›å…¥å‡½æ•°å…¥å£çš„æ—¶å€™å°±å´©äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618232493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222725,"user_name":"silverhawk","can_delete":false,"product_type":"c1","uid":1018649,"ip_address":"","ucode":"BFBC8AF32868DA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8b/19/a15d060d.jpg","comment_is_top":false,"comment_ctime":1590899221,"is_pvip":false,"replies":[{"id":"82133","content":"shared_ptrçš„ç¼ºç‚¹å°±æ˜¯åŠŸèƒ½å¤ªå¤šï¼Œæœ‰æ—¶å€™ä¼šç»™äººä»¥è¯¯è§£ï¼Œä»¥ä¸ºå®ƒæ— æ‰€ä¸èƒ½ï¼Œä½†å®é™…ä¸Šå®ƒç”¨èµ·æ¥ä¹Ÿæ˜¯è¦å½“å¿ƒçš„ï¼Œç”¨åœ¨ä¸æ°å½“çš„åœ°æ–¹å°±ä¼šæœ‰è´Ÿæ•ˆæœã€‚<br><br>åªè¦æ°å½“ä½¿ç”¨ï¼Œshared_ptrè¿˜æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå¤šçœ‹æ–‡æ¡£å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1590909049,"ip_address":"","comment_id":222725,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5885866517","product_id":100051801,"comment_content":"è¯´å®è¯ï¼Œunique_ptræ¯”èµ·è£¸æŒ‡é’ˆé©å‘½æ€§è¿›æ­¥ï¼Œä½†æ˜¯shared_ptrÂ æœ‰ç‚¹over engineering ï¼Œæ„Ÿè§‰æœ‰äº›æ—¶å€™ç”¨èµ·æ¥ä¼šå¾ˆå‘ã€‚ä¸çŸ¥é“ä½ æ€ä¹ˆçœ‹","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496894,"discussion_content":"shared_ptrçš„ç¼ºç‚¹å°±æ˜¯åŠŸèƒ½å¤ªå¤šï¼Œæœ‰æ—¶å€™ä¼šç»™äººä»¥è¯¯è§£ï¼Œä»¥ä¸ºå®ƒæ— æ‰€ä¸èƒ½ï¼Œä½†å®é™…ä¸Šå®ƒç”¨èµ·æ¥ä¹Ÿæ˜¯è¦å½“å¿ƒçš„ï¼Œç”¨åœ¨ä¸æ°å½“çš„åœ°æ–¹å°±ä¼šæœ‰è´Ÿæ•ˆæœã€‚\n\nåªè¦æ°å½“ä½¿ç”¨ï¼Œshared_ptrè¿˜æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå¤šçœ‹æ–‡æ¡£å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590909049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222199,"user_name":"java2c++","can_delete":false,"product_type":"c1","uid":1460660,"ip_address":"","ucode":"C4F8C3D7B1A910","user_header":"","comment_is_top":false,"comment_ctime":1590715797,"is_pvip":false,"replies":[{"id":"81932","content":"uniqptr_pträ¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸è¦åœ¨å¤šçº¿ç¨‹é‡Œç”¨ã€‚<br><br>åº”è¯¥ç”¨shared_ptrï¼Œä½†å®ƒä¹Ÿåªæœ‰æœ€åŸºæœ¬çš„çº¿ç¨‹å®‰å…¨ä¿è¯ï¼Œä¸èƒ½å®Œå…¨ä¾èµ–å®ƒï¼Œå…·ä½“è¦çœ‹æ–‡æ¡£é‡Œçš„ç²¾ç¡®æè¿°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1590725791,"ip_address":"","comment_id":222199,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5885683093","product_id":100051801,"comment_content":"è€å¸ˆæ–‡ç¨¿ä¸­çš„è¿™æ®µä»£ç æˆ‘æ”¹äº†ä¸‹å¦‚æœå°è£…åˆ°ä¸€ä¸ªå‡½æ•°é‡Œï¼Œå¯ä»¥è¢«å¤šçº¿ç¨‹å¹¶å‘è°ƒç”¨å—ï¼Ÿunique_ptrå°½ç®¡æœ‰moveå¯ä»¥è¿›è¡Œè½¬ç§»ï¼Œä½†æ˜¯åŒä¸€æ—¶åˆ»ptr1æ˜¯ä¸æ˜¯åªå…è®¸è½¬ç§»åˆ°ä¸€ä¸ªptr2ï¼Œè€Œä¹‹å‰è½¬ç§»æˆåŠŸçš„åç»­é€»è¾‘è¿˜æ²¡æœ‰æ‰§è¡Œå®Œ<br><br><br>void methodtestï¼ˆuniqptr_ptr ptr1ï¼‰ï½›<br>auto ptr2 = std::move(ptr1);         &#47;&#47; ä½¿ç”¨move()è½¬ç§»æ‰€æœ‰æƒ<br>assert(!ptr1 &amp;&amp; ptr2);               &#47;&#47; ptr1å˜æˆäº†ç©ºæŒ‡é’ˆ<br><br>&#47;&#47;use ptr2 dosomethingâ€¦â€¦<br>ï½","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496712,"discussion_content":"uniqptr_pträ¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸è¦åœ¨å¤šçº¿ç¨‹é‡Œç”¨ã€‚\n\nåº”è¯¥ç”¨shared_ptrï¼Œä½†å®ƒä¹Ÿåªæœ‰æœ€åŸºæœ¬çš„çº¿ç¨‹å®‰å…¨ä¿è¯ï¼Œä¸èƒ½å®Œå…¨ä¾èµ–å®ƒï¼Œå…·ä½“è¦çœ‹æ–‡æ¡£é‡Œçš„ç²¾ç¡®æè¿°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590725791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221132,"user_name":"æœ‰å­¦è¯†çš„å…”å­","can_delete":false,"product_type":"c1","uid":1628867,"ip_address":"","ucode":"D1D654B1562FC9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIicr82CnrdEjibibAvyeKRQHszSzIAqoCWxN0kqC442XcjEae6S9j6NDtKLpg4Da4CUQQeUFUicWqiaDw/132","comment_is_top":false,"comment_ctime":1590413741,"is_pvip":false,"replies":[{"id":"81585","content":"<br>1.è¯´çš„æŒºå¥½ã€‚moveæ“ä½œæ˜¯è½¬ç§»ï¼Œä¸æ˜¯æ‹·è´ï¼ŒæŠŠåŸunique_ptrç»™â€œå·â€åˆ°äº†å¦ä¸€ä¸ªå¯¹è±¡é‡Œï¼Œæ‰€æœ‰æƒä¹Ÿå°±åŒæ—¶è½¬ç§»äº†ã€‚<br><br>2.å¯¹ï¼Œshared_ptrçš„å…³é”®å°±æ˜¯å¼•ç”¨è®¡æ•°ï¼ŒåŸæ¥çš„åå­—å«counted_ptrã€‚<br><br>3.weak_ptræ˜¯â€œå¼±å¼•ç”¨â€ï¼Œåªæ˜¯è§‚å¯Ÿç›®æ ‡ï¼Œä¸å¢åŠ è®¡æ•°ï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨ï¼Œå¯ä»¥å†çœ‹æ ‡å‡†æ–‡æ¡£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590454577,"ip_address":"","comment_id":221132,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5885381037","product_id":100051801,"comment_content":"1. æˆ‘çš„ç†è§£æ˜¯Unique pointer æ˜¯å¯¹è±¡è€Œä¸æ˜¯æŒ‡é’ˆï¼Œä½†é‡è½½äº†*å’Œç®­å¤´ï¼Œç¦»å¼€äº†å¯¹è±¡çš„ä½œç”¨åŸŸå°±ä¼šè¢«ææ„ï¼Œæ‰€ç®¡ç†çš„èµ„æºåœ¨ææ„æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«é‡Šæ”¾ï¼›é‚£moveæ“ä½œæ˜¯ä¸æ˜¯å¯¹å¯¹è±¡è¿›è¡Œæ‹·è´äº†æ‰å¾—ä»¥ä¼ é€’ï¼Ÿ<br>shared_ptr è²Œä¼¼ä¹Ÿæ˜¯å¯¹è±¡ï¼Œé‡ç‚¹åœ¨äºå¼•ç”¨è®¡æ•°ï¼Œå¯¹èµ‹å€¼æ‹·è´è®¡æ•°+1ï¼Œå¯¹äºæ‰§è¡Œææ„æ—¶è®¡æ•°-1ï¼ŒåŒæ—¶åˆ¤æ–­è®¡æ•°æ˜¯å¦0ï¼Œè¢«ç®¡ç†çš„èµ„æºæ˜¯å¦éœ€è¦é‡Šæ”¾ï¼›<br>æ²¡æ˜ç™½ä¸ºä»€ä¹ˆweak pointerèƒ½é¿å…å¾ªç¯å¼•ç”¨ï¼Œæ˜¯å› ä¸ºlockerï¼Œé¿å…é”™è¯¯è®¡æ•°ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496347,"discussion_content":"\n1.è¯´çš„æŒºå¥½ã€‚moveæ“ä½œæ˜¯è½¬ç§»ï¼Œä¸æ˜¯æ‹·è´ï¼ŒæŠŠåŸunique_ptrç»™â€œå·â€åˆ°äº†å¦ä¸€ä¸ªå¯¹è±¡é‡Œï¼Œæ‰€æœ‰æƒä¹Ÿå°±åŒæ—¶è½¬ç§»äº†ã€‚\n\n2.å¯¹ï¼Œshared_ptrçš„å…³é”®å°±æ˜¯å¼•ç”¨è®¡æ•°ï¼ŒåŸæ¥çš„åå­—å«counted_ptrã€‚\n\n3.weak_ptræ˜¯â€œå¼±å¼•ç”¨â€ï¼Œåªæ˜¯è§‚å¯Ÿç›®æ ‡ï¼Œä¸å¢åŠ è®¡æ•°ï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨ï¼Œå¯ä»¥å†çœ‹æ ‡å‡†æ–‡æ¡£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590454577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358276,"user_name":"ryanxw","can_delete":false,"product_type":"c1","uid":2119325,"ip_address":"åŒ—äº¬","ucode":"0B91EAC8D06EED","user_header":"https://static001.geekbang.org/account/avatar/00/20/56/9d/4b2a7d29.jpg","comment_is_top":false,"comment_ctime":1664162925,"is_pvip":false,"replies":[{"id":"130642","content":"åœ¨å¯¹è±¡çš„ä¼ å‚ã€æ„é€ æ–¹é¢æœ‰ä¸€äº›ä¼˜åŒ–ï¼Œå¯ä»¥çœ‹å®ƒçš„å®ç°æºç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1665355117,"ip_address":"åŒ—äº¬","comment_id":358276,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1664162925","product_id":100051801,"comment_content":"è¯·æ•™ä¸€ä¸‹è€å¸ˆmake_sharedï¼Œmake_uniqueè¿™ç§å·¥å‚å‡½æ•°é™¤äº†èƒ½é˜²æ­¢æ“ä½œç©ºæŒ‡é’ˆçš„å¤±è¯¯ï¼Œè¿˜æœ‰å“ªäº›æ–¹é¢è¦æ¯”æ‰‹åŠ¨æ„é€ å¥½å‘¢ï¼Ÿèƒ½è¯¦ç»†è¯´ä¸€ä¸‹å—","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589837,"discussion_content":"åœ¨å¯¹è±¡çš„ä¼ å‚ã€æ„é€ æ–¹é¢æœ‰ä¸€äº›ä¼˜åŒ–ï¼Œå¯ä»¥çœ‹å®ƒçš„å®ç°æºç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665355117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344355,"user_name":"å¤§ç™½v5","can_delete":false,"product_type":"c1","uid":2063599,"ip_address":"","ucode":"F343BCC18FA3AF","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7c/ef/013087c4.jpg","comment_is_top":false,"comment_ctime":1651487280,"is_pvip":false,"replies":[{"id":"125822","content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1651736837,"ip_address":"","comment_id":344355,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1651487280","product_id":100051801,"comment_content":"weak_pträ¸shared_ptré…åˆç€ä½¿ç”¨ï¼Œç”¨weak_ptrå…ˆç¡®ä¿shared_ptræ˜¯æŒæœ‰æŒ‡é’ˆçš„ï¼Œç„¶åå†æ”¾å¿ƒä½¿ç”¨","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570338,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651736837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343622,"user_name":"å¨ƒå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":2981739,"ip_address":"","ucode":"355EADE8479480","user_header":"https://static001.geekbang.org/account/avatar/00/2d/7f/6b/83236a96.jpg","comment_is_top":false,"comment_ctime":1650958386,"is_pvip":false,"replies":[{"id":"125582","content":"ä¸è¦ç´§ï¼Œå…ˆåšçŸ¥è¯†å‚¨å¤‡ï¼Œå†çœ‹çœ‹å…¶ä»–å¼€æºé¡¹ç›®ï¼Œå…»å…µåƒæ—¥ç”¨å…µä¸€æ—¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1651128336,"ip_address":"","comment_id":343622,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650958386","product_id":100051801,"comment_content":"è€å¸ˆè®²çš„å¾ˆå¥½ï¼Œä½†æ˜¯è®©æˆ‘ç”¨ï¼Œæˆ‘è¿˜æ˜¯ç”¨ä¸å‡ºæ¥ï¼Œéš¾å—å‘€ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568412,"discussion_content":"ä¸è¦ç´§ï¼Œå…ˆåšçŸ¥è¯†å‚¨å¤‡ï¼Œå†çœ‹çœ‹å…¶ä»–å¼€æºé¡¹ç›®ï¼Œå…»å…µåƒæ—¥ç”¨å…µä¸€æ—¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651128336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342656,"user_name":"Geek_5dc6ac","can_delete":false,"product_type":"c1","uid":2981423,"ip_address":"","ucode":"06ADE0DC593735","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/petsz7bmadiaWedwMOhjXB78dl5oumPqBpOFpCJa8PhgIfF8Wibxcf3BianQ9wvlibEWUzXQPrgxWpbtbT8BIDx3rw/132","comment_is_top":false,"comment_ctime":1650385105,"is_pvip":false,"replies":[{"id":"125205","content":"åº”è¯¥ä¸ä¼šæœ‰å†…å­˜æ³„æ¼å§ï¼Œlambdaè¡¨è¾¾å¼çš„æ•è·å’Œshared_ptrçš„å¼•ç”¨è®¡æ•°æ²¡æœ‰å¿…ç„¶å…³ç³»ï¼Œè€Œä¸”è¿™ä¹ˆåŸºæœ¬çš„ç”¨æ³•æ ‡å‡†å§”å‘˜ä¼šä¸ä¼šæ²¡æœ‰æƒ³åˆ°ï¼Œå¯ä»¥æ”¾å¿ƒåœ°ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1650423959,"ip_address":"","comment_id":342656,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650385105","product_id":100051801,"comment_content":"shared_ptrå’Œlambdaè¡¨è¾¾å¼ä¸€èµ·ç”¨ï¼Œè¦æ³¨æ„ä»€ä¹ˆï¼Œæˆ‘çŸ¥é“lambdaè¡¨è¾¾å¼çš„å®ç°åŸç†æ˜¯ç”¨ä¸€ä¸ªç±»å¯¹æ•è·çš„å¯¹è±¡æ‹·è´äº†ä¸€ä»½ï¼Œæˆ‘ä¸æ¸…æ¥šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šlambdaè¡¨è¾¾å¼å’Œshared_pträ¸€èµ·ä½¿ç”¨ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œèƒ½ç»™ä¸ªä¾‹å­ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565271,"discussion_content":"åº”è¯¥ä¸ä¼šæœ‰å†…å­˜æ³„æ¼å§ï¼Œlambdaè¡¨è¾¾å¼çš„æ•è·å’Œshared_ptrçš„å¼•ç”¨è®¡æ•°æ²¡æœ‰å¿…ç„¶å…³ç³»ï¼Œè€Œä¸”è¿™ä¹ˆåŸºæœ¬çš„ç”¨æ³•æ ‡å‡†å§”å‘˜ä¼šä¸ä¼šæ²¡æœ‰æƒ³åˆ°ï¼Œå¯ä»¥æ”¾å¿ƒåœ°ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650423960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342005,"user_name":"Mari","can_delete":false,"product_type":"c1","uid":2271867,"ip_address":"","ucode":"5260C80C8B6AD6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/E73UicmpgFiaZW4SOTGaxoIk9PWue54neNcfsicz7HOxJUucep4jSMyeMMruLNcIlxsE330qOFMacaEQ9Vz4zXJyg/132","comment_is_top":false,"comment_ctime":1649948240,"is_pvip":false,"replies":[{"id":"125016","content":"shared_ptræœ€å¥½ä¸è¦ä¼ å¼•ç”¨ï¼Œä¸å¥½æ§åˆ¶ç”Ÿå‘½å‘¨æœŸï¼Œå°±æŠŠå®ƒå½“åšä¸€ä¸ªæ™®é€šçš„å€¼å¯¹è±¡ä½¿ç”¨å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1650010191,"ip_address":"","comment_id":342005,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649948240","product_id":100051801,"comment_content":"ç½—è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜ï¼šshared_pträ½œä¸ºå‡½æ•°å‚æ•°æ—¶ï¼Œä»€ä¹ˆæƒ…å†µä¼ å€¼ï¼Œä»€ä¹ˆæƒ…å†µä¼ å¼•ç”¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563491,"discussion_content":"shared_ptræœ€å¥½ä¸è¦ä¼ å¼•ç”¨ï¼Œä¸å¥½æ§åˆ¶ç”Ÿå‘½å‘¨æœŸï¼Œå°±æŠŠå®ƒå½“åšä¸€ä¸ªæ™®é€šçš„å€¼å¯¹è±¡ä½¿ç”¨å°±å¯ä»¥äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650010191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336761,"user_name":"H X","can_delete":false,"product_type":"c1","uid":1982957,"ip_address":"","ucode":"B73939E7C6A8B9","user_header":"https://static001.geekbang.org/account/avatar/00/1e/41/ed/31db8bce.jpg","comment_is_top":false,"comment_ctime":1646357790,"is_pvip":false,"replies":[{"id":"123102","content":"æ„Ÿè°¢æŒ‡æ­£ï¼Œæ˜¯å†™é”™äº†ï¼Œä¼šå°½å¿«ä¿®æ”¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1646445260,"ip_address":"","comment_id":336761,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1646357790","product_id":100051801,"comment_content":"è€ç½—ï¼Œsection2é‡Œé¢çš„smart_ptrçš„case3é‡Œçš„65è¡Œï¼Œassertï¼ˆ*ptr = 10ï¼‰åº”è¯¥æ˜¯æ‰‹è¯¯å†™é”™äº†å§ã€‚æ–­è¨€assertè¦åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼Œè€Œä¸æ˜¯èµ‹å€¼ã€‚ åº”è¯¥æ˜¯ assert(*ptr == 10) å§~~","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554524,"discussion_content":"æ„Ÿè°¢æŒ‡æ­£ï¼Œæ˜¯å†™é”™äº†ï¼Œä¼šå°½å¿«ä¿®æ”¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646445260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1982957,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/41/ed/31db8bce.jpg","nickname":"H X","note":"","ucode":"B73939E7C6A8B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":554531,"discussion_content":"è€ç½—è°¦è™šäº† äººéæœºå™¨ éƒ½ä¼šæ‰‹è¯¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646451498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":554524,"ip_address":""},"score":554531,"extra":""}]}]},{"had_liked":false,"id":336095,"user_name":"H X","can_delete":false,"product_type":"c1","uid":1982957,"ip_address":"","ucode":"B73939E7C6A8B9","user_header":"https://static001.geekbang.org/account/avatar/00/1e/41/ed/31db8bce.jpg","comment_is_top":false,"comment_ctime":1645923111,"is_pvip":false,"replies":[{"id":"122921","content":"æ¬¢è¿ï¼Œæœ‰ä»€ä¹ˆç–‘é—®æˆ–è€…å¿ƒå¾—ä¸€èµ·æ¥æ¢è®¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1646115246,"ip_address":"","comment_id":336095,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1645923111","product_id":100051801,"comment_content":"è€ç½— æˆ‘æ¥å•¦~~ å¸Œæœ›èƒ½åœ¨æˆ‘çš„æ— äººé©¾é©¶ä¸­ æŠŠcppç”¨çš„ç‚‰ç«çº¯é’~","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553838,"discussion_content":"æ¬¢è¿ï¼Œæœ‰ä»€ä¹ˆç–‘é—®æˆ–è€…å¿ƒå¾—ä¸€èµ·æ¥æ¢è®¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646115246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1982957,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/41/ed/31db8bce.jpg","nickname":"H X","note":"","ucode":"B73939E7C6A8B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554075,"discussion_content":"è€ç½— æ°¸è¿œçš„ç¥ï½ã€‚å·¥ä½œä¸­é‡åˆ°å¾ˆå¤šæ•°æ®ç»“æ„ å°è£…çš„ä¸å¥½ã€‚ä¸€æ°´struct æ²¡æœ‰unionã€‚è¿˜æœ‰æ™ºèƒ½æŒ‡é’ˆ å‡ ä¹å…¨æ˜¯shared_ptrï¼Œæˆ‘çœ‹åˆ°å¾ˆå¤šäººè¯´shared_ptr ä¸å¥½ã€‚è¿˜æœ‰å¤šçº¿ç¨‹ è¿œè¿œæ²¡æœ‰ä½¿ç”¨èµ·æ¥ å‘æŒ¥å…¶å¨åŠ›ã€‚åŒæ—¶åœ¨çœŸæ­£ä¸Šè½¦è·‘çš„æ—¶å€™ï¼Œè¿˜è¯´è€å¡ æ€§èƒ½å¾ˆå·®ã€‚ä»¥ä¸Šå°±æ˜¯æˆ‘ç›®å‰çœ‹åˆ°çš„å¯ä»¥ä¼˜åŒ–çš„æ–¹é¢å§ã€‚å…¶ä»–çš„æˆ‘åŠŸåŠ›æµ…ï¼Œè¿˜æ²¡æœ‰æ‚Ÿåˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646206185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328088,"user_name":"Geek_222086","can_delete":false,"product_type":"c1","uid":2633089,"ip_address":"","ucode":"E49E725F7F9D4A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epNdP7suCIc1jk9WojvhDRJMEAeCCdPKgicJDsiaEbZ5K2cxEArib73QYWLgY5YqX9TJC8blr547fX6w/132","comment_is_top":false,"comment_ctime":1640525465,"is_pvip":false,"replies":[{"id":"119491","content":"unique_ptrè¿™æ ·çš„ç”¨æ³•ä¸æ˜¯å¤ªå¥½ï¼Œå®ƒæœ€å¥½ç”¨æ¥ç®¡ç†å•ä¸ªå¯¹è±¡è€Œä¸æ˜¯æ•°ç»„ï¼Œå¦‚æœæƒ³è¦è¿™æ ·çš„æ•ˆæœåº”è¯¥æ”¹ç”¨vectorã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1640599366,"ip_address":"","comment_id":328088,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640525465","product_id":100051801,"comment_content":"unique_ptr&lt;char&gt;buff1 (new char[100]); æƒ³çŸ¥é“æˆ‘è¿™æ ·å¼€åˆ›çš„buff1åº”è¯¥è¦æ€ä¹ˆä½¿ç”¨å‘€ï¼Œæˆ‘å¦‚æœç”¨buff1[20]=0x02; ä¼šæŠ¥é”™","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541909,"discussion_content":"unique_ptrè¿™æ ·çš„ç”¨æ³•ä¸æ˜¯å¤ªå¥½ï¼Œå®ƒæœ€å¥½ç”¨æ¥ç®¡ç†å•ä¸ªå¯¹è±¡è€Œä¸æ˜¯æ•°ç»„ï¼Œå¦‚æœæƒ³è¦è¿™æ ·çš„æ•ˆæœåº”è¯¥æ”¹ç”¨vectorã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640599366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327728,"user_name":"å¤©ç¿¼","can_delete":false,"product_type":"c1","uid":2459638,"ip_address":"","ucode":"82153820B786E0","user_header":"https://static001.geekbang.org/account/avatar/00/25/87/f6/bc199560.jpg","comment_is_top":false,"comment_ctime":1640254127,"is_pvip":false,"replies":[{"id":"119412","content":"createNode()åˆ›å»ºå…±äº«æŒ‡é’ˆï¼Œå½“å‡½æ•°è¿”å›çš„æ—¶å€™å¯¹è±¡é”€æ¯ï¼Œæ‰€ä»¥å¼•ç”¨æ•°å°±ä¼šå‡1ã€‚<br><br>å¦‚æœæ˜¯å¼±æŒ‡é’ˆï¼Œå› ä¸ºä¸å½±å“è®¡æ•°ï¼Œæ‰€ä»¥çœ‹åˆ°çš„ç°è±¡å°±æ˜¯å¼•ç”¨æ•°å°‘äº†ã€‚<br>å¦‚æœæ˜¯å…±äº«æŒ‡é’ˆï¼Œå› ä¸ºåˆå¤šäº†ä¸€æ¬¡å¼•ç”¨ï¼Œå‡1å†åŠ 1ï¼Œæ‰€ä»¥æ•°é‡ä¸å˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1640390286,"ip_address":"","comment_id":327728,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1640254127","product_id":100051801,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªå‡½æ•°ä¸­åˆ›å»º weak_ptr æŒ‡é’ˆå¹¶è¿”å›åï¼Œå¼•ç”¨æ•°ä¼šå‡1ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä¸­åˆ›å»ºçš„ share_ptr è¿”å›åï¼Œå¼•ç”¨æ•°å¹¶ä¸ä¼šå˜åŒ–ï¼Œæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿè¿™ä¸ªæœ‰ç‚¹æ²¡æ³•ç†è§£ã€‚<br><br>class Node final {<br>public:<br>    using this_type = Node;<br>    using shared_type = std::weak_ptr&lt;this_type&gt;;<br>    &#47;&#47; using shared_type = std::shared_ptr&lt;this_type&gt;;<br>public:<br>    shared_type next;<br>};<br><br>Node::shared_type createNode() {<br>    auto retNode = make_shared&lt;Node&gt;();<br>    cout &lt;&lt; &quot;====== retNode ======&quot; &lt;&lt; endl;<br>    cout &lt;&lt; &quot;retNode å¼•ç”¨æ•°é‡ : &quot; &lt;&lt; retNode.use_count() &lt;&lt; endl;<br>    return retNode;<br>}<br><br>int main() {<br>    auto newNode = createNode();<br>    cout &lt;&lt; &quot;====== newNode ======&quot; &lt;&lt; endl;<br>    cout &lt;&lt; &quot;newNode å¼•ç”¨æ•°é‡ : &quot; &lt;&lt; newNode.use_count() &lt;&lt; endl;<br>}","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541460,"discussion_content":"createNode()åˆ›å»ºå…±äº«æŒ‡é’ˆï¼Œå½“å‡½æ•°è¿”å›çš„æ—¶å€™å¯¹è±¡é”€æ¯ï¼Œæ‰€ä»¥å¼•ç”¨æ•°å°±ä¼šå‡1ã€‚\n\nå¦‚æœæ˜¯å¼±æŒ‡é’ˆï¼Œå› ä¸ºä¸å½±å“è®¡æ•°ï¼Œæ‰€ä»¥çœ‹åˆ°çš„ç°è±¡å°±æ˜¯å¼•ç”¨æ•°å°‘äº†ã€‚\nå¦‚æœæ˜¯å…±äº«æŒ‡é’ˆï¼Œå› ä¸ºåˆå¤šäº†ä¸€æ¬¡å¼•ç”¨ï¼Œå‡1å†åŠ 1ï¼Œæ‰€ä»¥æ•°é‡ä¸å˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640390286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2459638,"avatar":"https://static001.geekbang.org/account/avatar/00/25/87/f6/bc199560.jpg","nickname":"å¤©ç¿¼","note":"","ucode":"82153820B786E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":541462,"discussion_content":"æ‡‚äº†ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640390863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":541460,"ip_address":""},"score":541462,"extra":""}]}]},{"had_liked":false,"id":326564,"user_name":"å¿§å¤©å°é¸¡","can_delete":false,"product_type":"c1","uid":1073947,"ip_address":"","ucode":"A1412BDC108FD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/63/1b/83ac7733.jpg","comment_is_top":false,"comment_ctime":1639562922,"is_pvip":false,"replies":[{"id":"118669","content":"C++æ³¨é‡è¿è¡Œæ•ˆç‡ï¼Œä¸ºå¼€å‘è€…æä¾›å¤šç§é€‰æ‹©ï¼Œæ€ä¹ˆç”¨å–å†³äºæˆ‘ä»¬è‡ªå·±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1639611936,"ip_address":"","comment_id":326564,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639562922","product_id":100051801,"comment_content":"è¿™ä¸ªå’Œè‹¹æœçš„objective- Cä¸æ˜¯ä¸€å›äº‹å—ï¼Ÿæ„Ÿè§‰cppæœ‰äº›æ“ä½œè¿˜æ˜¯å¾ˆçº ç»“çš„å•Šï¼Œä¸å¦‚ocå¹²è„†","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539106,"discussion_content":"C++æ³¨é‡è¿è¡Œæ•ˆç‡ï¼Œä¸ºå¼€å‘è€…æä¾›å¤šç§é€‰æ‹©ï¼Œæ€ä¹ˆç”¨å–å†³äºæˆ‘ä»¬è‡ªå·±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639611936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326353,"user_name":"Geek_0db98e","can_delete":false,"product_type":"c1","uid":2866319,"ip_address":"","ucode":"593C54FFB06824","user_header":"","comment_is_top":false,"comment_ctime":1639479168,"is_pvip":false,"replies":[{"id":"118538","content":"= deleteæ˜¯ç¦æ­¢äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥unique_ptråªèƒ½è½¬ç§»ä¸èƒ½æ‹·è´ï¼Œå°±ä¸ç¬¦åˆæ ‡å‡†å®¹å™¨çš„å€¼è¯­ä¹‰è¦æ±‚ã€‚<br><br>ä¸è¿‡å¯ä»¥ä½¿ç”¨std::moveæŠŠunique_ptræ”¾è¿›å®¹å™¨é‡Œï¼Œä½†åŒæ ·æ˜¯å› ä¸ºå®ƒä¸èƒ½æ‹·è´ï¼Œä»å®¹å™¨é‡Œå–å‡ºæ¥å°±ä¸å¤ªå®¹æ˜“æ§åˆ¶å®ƒçš„ç”Ÿå‘½å‘¨æœŸã€‚<br><br>ä¸€èˆ¬æ¥è¯´ä¸è¦åœ¨å®¹å™¨é‡Œå­˜å‚¨unique_ptrï¼Œå¾ˆå®¹æ˜“è¯¯ç”¨ï¼Œæ”¹æˆshared_ptræ¯”è¾ƒå¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1639526919,"ip_address":"","comment_id":326353,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639479168","product_id":100051801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œåœ¨å…¶ä»–åœ°æ–¹çœ‹åˆ°è¿‡ï¼šunique_ptråšä¸ºSTLå®¹å™¨çš„å…ƒç´ æ—¶ï¼Œä¸èƒ½ä½œä¸ºç±»çš„æˆå‘˜å˜é‡ï¼Œè¿™å¥è¯æ˜¯å¦æ­£ç¡®ï¼ŒåŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä¸‹é¢è¿™ä¸ªä»£ç æŠ¥é”™ä½¿ç”¨äº†å·²ç»åˆ é™¤çš„å‡½æ•°unique_ptr(const unique_ptr&amp;) = delete æ˜¯å› ä¸ºä¸Šè¿°å› ç´ å¼•èµ·çš„å—ï¼Ÿ<br>class A{};<br><br>class B{<br>public:<br>  void add(const A&amp;);<br>  std::queue&lt;std::unique_ptr&lt;A&gt;&gt; queue_;<br>};<br><br>void B::add(const A&amp; a){<br>  queue_.push(std::make_unique&lt;A&gt;(a));<br>}","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538800,"discussion_content":"= deleteæ˜¯ç¦æ­¢äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥unique_ptråªèƒ½è½¬ç§»ä¸èƒ½æ‹·è´ï¼Œå°±ä¸ç¬¦åˆæ ‡å‡†å®¹å™¨çš„å€¼è¯­ä¹‰è¦æ±‚ã€‚\n\nä¸è¿‡å¯ä»¥ä½¿ç”¨std::moveæŠŠunique_ptræ”¾è¿›å®¹å™¨é‡Œï¼Œä½†åŒæ ·æ˜¯å› ä¸ºå®ƒä¸èƒ½æ‹·è´ï¼Œä»å®¹å™¨é‡Œå–å‡ºæ¥å°±ä¸å¤ªå®¹æ˜“æ§åˆ¶å®ƒçš„ç”Ÿå‘½å‘¨æœŸã€‚\n\nä¸€èˆ¬æ¥è¯´ä¸è¦åœ¨å®¹å™¨é‡Œå­˜å‚¨unique_ptrï¼Œå¾ˆå®¹æ˜“è¯¯ç”¨ï¼Œæ”¹æˆshared_ptræ¯”è¾ƒå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639526919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323572,"user_name":"Slience-0Â°C","can_delete":false,"product_type":"c1","uid":1151612,"ip_address":"","ucode":"B50665EC6A80F5","user_header":"https://static001.geekbang.org/account/avatar/00/11/92/7c/12c571b6.jpg","comment_is_top":false,"comment_ctime":1637997400,"is_pvip":false,"replies":[{"id":"117495","content":"æ˜¯çš„ï¼Œå½“ç„¶ç”¨å‡½æ•°æŒ‡é’ˆä¹Ÿå¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1638143247,"ip_address":"","comment_id":323572,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637997400","product_id":100051801,"comment_content":"éšæ„æ‰¾èŠ‚è¯¾ç¨‹ï¼Œå°±ä¹¦ç±ä¸­çš„ç–‘é—®æä¸ªé—®é¢˜ï¼šmap+lambdaè¡¨è¾¾å¼æ›¿ä»£if&#47;else&#47;switchï¼Œå«ä¹‰æ˜¯ç”¨æ•°å­—æˆ–è€…å­—ç¬¦ä¸²ä½œä¸ºkeyï¼Œlambdaä½œä¸ºvalueï¼Œç„¶ååŒ¹é…keyæ‰§è¡Œå¯¹åº”çš„lamba?æˆ‘ä¸€èˆ¬ç”¨äº†å‡½æ•°æŒ‡é’ˆ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534218,"discussion_content":"æ˜¯çš„ï¼Œå½“ç„¶ç”¨å‡½æ•°æŒ‡é’ˆä¹Ÿå¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638143247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321214,"user_name":"ä¾ å®¢Â°","can_delete":false,"product_type":"c1","uid":2608611,"ip_address":"","ucode":"73C68093919F5E","user_header":"https://static001.geekbang.org/account/avatar/00/27/cd/e3/cf6d1491.jpg","comment_is_top":false,"comment_ctime":1636710983,"is_pvip":false,"replies":[{"id":"116629","content":"æœ‰getæ–¹æ³•ï¼Œå¯ä»¥ç»™å‡ºå†…éƒ¨çš„åŸå§‹æŒ‡é’ˆï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æ¥å£æ–‡æ¡£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1636719643,"ip_address":"","comment_id":321214,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636710983","product_id":100051801,"comment_content":"å¦‚æœæœ‰çš„apiæˆ–è€…æ¥å£åªèƒ½ä¼ é€’æ™®é€šçš„æŒ‡é’ˆï¼Œè¿™æ—¶æ™ºèƒ½æŒ‡é’ˆè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530244,"discussion_content":"æœ‰getæ–¹æ³•ï¼Œå¯ä»¥ç»™å‡ºå†…éƒ¨çš„åŸå§‹æŒ‡é’ˆï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æ¥å£æ–‡æ¡£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636719643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296765,"user_name":"é²å‹ƒ","can_delete":false,"product_type":"c1","uid":1142312,"ip_address":"","ucode":"9B5E4A5B1A54E5","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/28/1e307312.jpg","comment_is_top":false,"comment_ctime":1623152076,"is_pvip":false,"replies":[{"id":"107819","content":"ç†è®ºä¸Šæ¥è¯´æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºè„±ç¦»äº†æ™ºèƒ½æŒ‡é’ˆçš„æ§åˆ¶ï¼Œæœ‰éšæ‚£ã€‚<br><br>ä½†å¦‚æœè°¨æ…åœ°ä½¿ç”¨ï¼Œä¸åšå±é™©æ“ä½œï¼ˆç§»åŠ¨æŒ‡é’ˆã€åˆ é™¤æŒ‡é’ˆï¼‰ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ¯•ç«Ÿè¿åäº†æ™ºèƒ½æŒ‡é’ˆçš„åˆè¡·ï¼Œæ‰€ä»¥æœ€å¥½å°‘ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1623200660,"ip_address":"","comment_id":296765,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623152076","product_id":100051801,"comment_content":"ç½—è€å¸ˆï¼Œè¯·é—®æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨getæ–¹æ³•è·å–è£¸æŒ‡é’ˆä½œä¸ºå‡½æ•°å‚æ•°æ¥ä½¿ç”¨å®‰å…¨å—ï¼Ÿ<br>auto ptr = make_shared&lt;int&gt;(42);<br>func (ptr.get());","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521575,"discussion_content":"ç†è®ºä¸Šæ¥è¯´æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºè„±ç¦»äº†æ™ºèƒ½æŒ‡é’ˆçš„æ§åˆ¶ï¼Œæœ‰éšæ‚£ã€‚\n\nä½†å¦‚æœè°¨æ…åœ°ä½¿ç”¨ï¼Œä¸åšå±é™©æ“ä½œï¼ˆç§»åŠ¨æŒ‡é’ˆã€åˆ é™¤æŒ‡é’ˆï¼‰ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ¯•ç«Ÿè¿åäº†æ™ºèƒ½æŒ‡é’ˆçš„åˆè¡·ï¼Œæ‰€ä»¥æœ€å¥½å°‘ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623200660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296489,"user_name":"æ²³å±±","can_delete":false,"product_type":"c1","uid":1128970,"ip_address":"","ucode":"244F0F35FF4112","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/0a/91f0d27a.jpg","comment_is_top":false,"comment_ctime":1622997422,"is_pvip":false,"replies":[{"id":"107643","content":"è¿™ç§æ¯”è¾ƒå¤æ‚çš„æƒ…å†µï¼Œæ ‡å‡†åº“é‡Œçš„æ™ºèƒ½æŒ‡é’ˆå°±ä¸é€‚ç”¨äº†ï¼Œåªå¥½è‡ªå·±é€ è½®å­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1623027648,"ip_address":"","comment_id":296489,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622997422","product_id":100051801,"comment_content":"ä¸å¾—ä¸åæ§½ä¸‹æŸäº›åŸºäºresumeçš„å…±äº«å†…å­˜æŠ€æœ¯æ ˆï¼ŒåŸºæœ¬æ²¡æ³•ç”¨æ™ºèƒ½æŒ‡é’ˆ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521457,"discussion_content":"è¿™ç§æ¯”è¾ƒå¤æ‚çš„æƒ…å†µï¼Œæ ‡å‡†åº“é‡Œçš„æ™ºèƒ½æŒ‡é’ˆå°±ä¸é€‚ç”¨äº†ï¼Œåªå¥½è‡ªå·±é€ è½®å­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623027648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289487,"user_name":"dog_brother","can_delete":false,"product_type":"c1","uid":1619597,"ip_address":"","ucode":"9F64D3C6D815FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6OV33jHia3U9LYlZEx2HrpsELeh3KMlqFiaKpSAaaZeBttXRAVvDXUgcufpqJ60bJWGYGNpT7752w/132","comment_is_top":false,"comment_ctime":1619051704,"is_pvip":true,"replies":[{"id":"105028","content":"unique_ptrçš„ç›®çš„å¾ˆç®€å•ï¼Œå°±æ˜¯å¯¹è£¸æŒ‡é’ˆçš„å°è£…ï¼Œæ²¡æœ‰æä¾›çº¿ç¨‹å®‰å…¨æœºåˆ¶ï¼Œå¤šçº¿ç¨‹æ“ä½œå½“ç„¶å°±å¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚<br><br>è€Œshared_ptrçš„ç›®çš„æ˜¯æŒ‡é’ˆå…±äº«ï¼Œè€ƒè™‘äº†å¤šçº¿ç¨‹åº”ç”¨çš„åœºæ™¯ï¼Œå¼•ç”¨è®¡æ•°æ˜¯åŸå­çš„ï¼Œåœ¨å¤šçº¿ç¨‹é‡Œç”¨ä¸ä¼šå‡ºé—®é¢˜ã€‚<br><br>å½“ç„¶ï¼Œshared_pträ¹Ÿä¸æ˜¯ç»å¯¹çš„çº¿ç¨‹å®‰å…¨ï¼Œå¦‚æœå¤šçº¿ç¨‹åŒæ—¶æ”¹æŒ‡é’ˆå°±ä¼šæœ‰ç«äº‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1619059327,"ip_address":"","comment_id":289487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619051704","product_id":100051801,"comment_content":"è€å¸ˆï¼Œçœ‹åˆ°è¯„è®ºè¯´unique_ptræ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œshared_ptræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™ä¸ªæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Œæ€ä¹ˆç†è§£å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518929,"discussion_content":"unique_ptrçš„ç›®çš„å¾ˆç®€å•ï¼Œå°±æ˜¯å¯¹è£¸æŒ‡é’ˆçš„å°è£…ï¼Œæ²¡æœ‰æä¾›çº¿ç¨‹å®‰å…¨æœºåˆ¶ï¼Œå¤šçº¿ç¨‹æ“ä½œå½“ç„¶å°±å¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚\n\nè€Œshared_ptrçš„ç›®çš„æ˜¯æŒ‡é’ˆå…±äº«ï¼Œè€ƒè™‘äº†å¤šçº¿ç¨‹åº”ç”¨çš„åœºæ™¯ï¼Œå¼•ç”¨è®¡æ•°æ˜¯åŸå­çš„ï¼Œåœ¨å¤šçº¿ç¨‹é‡Œç”¨ä¸ä¼šå‡ºé—®é¢˜ã€‚\n\nå½“ç„¶ï¼Œshared_pträ¹Ÿä¸æ˜¯ç»å¯¹çš„çº¿ç¨‹å®‰å…¨ï¼Œå¦‚æœå¤šçº¿ç¨‹åŒæ—¶æ”¹æŒ‡é’ˆå°±ä¼šæœ‰ç«äº‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619059327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246322,"user_name":"æ± å¼ºæ³½","can_delete":false,"product_type":"c1","uid":1231762,"ip_address":"","ucode":"1E5A4D70FE9C96","user_header":"https://static001.geekbang.org/account/avatar/00/12/cb/92/3dbeb6ab.jpg","comment_is_top":false,"comment_ctime":1599276946,"is_pvip":false,"replies":[{"id":"90613","content":"è¿™é‡Œæ¯”è¾ƒåå®è·µç»éªŒï¼Œæœ‰ç©ºä¹Ÿå¯ä»¥å†è¡¥ä¸€äº›ç†è®ºçŸ¥è¯†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1599440873,"ip_address":"","comment_id":246322,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599276946","product_id":100051801,"comment_content":"å¾ˆå®åœ¨ï¼Œæœ‰é‡ç‚¹","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505113,"discussion_content":"è¿™é‡Œæ¯”è¾ƒåå®è·µç»éªŒï¼Œæœ‰ç©ºä¹Ÿå¯ä»¥å†è¡¥ä¸€äº›ç†è®ºçŸ¥è¯†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599440873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244259,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1598444442,"is_pvip":false,"replies":[{"id":"89968","content":"å¯¹ï¼Œclass... Argsè¿™æ ·çš„å¯å˜æ¨¡æ¿å‚æ•°å¯ä»¥å¯¹ç…§printfæ¥ç†è§£ï¼Œä¸€ä¸ªæ˜¯ç¼–è¯‘æ—¶å‚æ•°æ•°é‡ä»»æ„ï¼Œä¸€ä¸ªæ˜¯è¿è¡Œæ—¶å‚æ•°æ•°é‡ä»»æ„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1598492118,"ip_address":"","comment_id":244259,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598444442","product_id":100051801,"comment_content":"ç½—è€å¸ˆ,template&lt;class T, class... Args&gt;å¯ä»¥è¿™æ ·ç†è§£å—: Tæ˜¯ç”¨æ¥å’Œunique_ptræ­é…çš„;è€ŒArgsæ˜¯ä»»æ„æ•°ç›®,ä»»æ„ç±»å‹çš„å‚æ•°ç±»å‹,è°ƒç”¨èµ·æ¥ç±»ä¼¼è¿™æ ·çš„:auto ptr = my_make_unique&lt;string&gt;(&quot;hello&quot;,  8, 26, 7.7);","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504536,"discussion_content":"å¯¹ï¼Œclass... Argsè¿™æ ·çš„å¯å˜æ¨¡æ¿å‚æ•°å¯ä»¥å¯¹ç…§printfæ¥ç†è§£ï¼Œä¸€ä¸ªæ˜¯ç¼–è¯‘æ—¶å‚æ•°æ•°é‡ä»»æ„ï¼Œä¸€ä¸ªæ˜¯è¿è¡Œæ—¶å‚æ•°æ•°é‡ä»»æ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598492118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240730,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":2001918,"ip_address":"","ucode":"BDB1F211D11C54","user_header":"https://static001.geekbang.org/account/avatar/00/1e/8b/fe/a7d1c17a.jpg","comment_is_top":false,"comment_ctime":1597046837,"is_pvip":false,"replies":[{"id":"88955","content":"weak_ptråŒæ ·æ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Œä½†å®ƒæ˜¯å¼±å¼•ç”¨ï¼Œä¸æŒæœ‰æŒ‡é’ˆçš„æ‰€æœ‰æƒï¼Œä¸ä¼šå¯¼è‡´å¼•ç”¨è®¡æ•°å¢åŠ ï¼Œä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ã€‚<br><br>æŒæ¡äº†ä¸Šé¢è¯´çš„å‡ ä¸ªå…³é”®ç‚¹å°±å¥½ç†è§£äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1597107151,"ip_address":"","comment_id":240730,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597046837","product_id":100051801,"comment_content":"æ²¡çœ‹æ‡‚weak_ptrï¼Œæ„Ÿè§‰å¯ä»¥å¤šè¡¥å……ç‚¹ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503543,"discussion_content":"weak_ptråŒæ ·æ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Œä½†å®ƒæ˜¯å¼±å¼•ç”¨ï¼Œä¸æŒæœ‰æŒ‡é’ˆçš„æ‰€æœ‰æƒï¼Œä¸ä¼šå¯¼è‡´å¼•ç”¨è®¡æ•°å¢åŠ ï¼Œä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ã€‚\n\næŒæ¡äº†ä¸Šé¢è¯´çš„å‡ ä¸ªå…³é”®ç‚¹å°±å¥½ç†è§£äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597107151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240029,"user_name":"å¼ é£Dear","can_delete":false,"product_type":"c1","uid":2004589,"ip_address":"","ucode":"EECEDF12DC7EB9","user_header":"https://static001.geekbang.org/account/avatar/00/1e/96/6d/85723167.jpg","comment_is_top":false,"comment_ctime":1596721018,"is_pvip":false,"replies":[{"id":"88638","content":"1.è¯´çš„å¾ˆå¥½ã€‚<br><br>2.åœ¨ç°ä»£C++é‡Œä¸æ¨èä½¿ç”¨è£¸æ•°ç»„ï¼Œåº”å½“å°½é‡ç”¨arrayå’Œvectorï¼Œæ›´å®‰å…¨ä¹Ÿæ›´å®¹æ˜“æ“ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1596761804,"ip_address":"","comment_id":240029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596721018","product_id":100051801,"comment_content":"1ï¼Œæ‰€æœ‰æƒé—®é¢˜ï¼Œunique_ptr åªèƒ½ä¸€ä¸ªç‹¬è‡ªä½¿ç”¨ï¼Œä¸èƒ½è¿›è¡Œèµ‹å€¼ï¼Œå¿…é¡»è¦èµ‹å€¼æ˜¯è¦ç”¨std::move() æ¥è¿›è¡Œã€‚ä¸èƒ½è¿›è¡ŒåŠ å‡è¿ç®—ã€‚<br>shared_ptr èƒ½å¤Ÿå…±äº«ä½¿ç”¨ï¼Œå¯ä»¥è¿›è¡Œèµ‹å€¼ã€‚<br>weak_ptr  å¼±å¼•ç”¨ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡lock  æ¥è°ƒç”¨shared_ptrã€‚<br>2ï¼Œå¯¹äº int[]  è¿™ç§ä¸å¤ªç†è§£ï¼Œ  ç½‘ä¸Šèµ„æ–™æœ‰è¯´ C++11 å¯¹æ­¤æ²¡æœ‰æ”¯æŒï¼Œåé¢çš„ç‰ˆæœ¬æ‰æœ‰ï¼Œä½†æ˜¯åœ¨å®é™…ä¸­ ç”¨ int[]  char[] ç­‰ æœ‰å¾ˆå¤šã€‚å°¤å…¶æ˜¯å¯¹ æ•°æ®ç‚¹é˜µï¼Œæˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨BYTEæ•°ç»„æ¥è¿›è¡Œå¤„ç†çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503312,"discussion_content":"1.è¯´çš„å¾ˆå¥½ã€‚\n\n2.åœ¨ç°ä»£C++é‡Œä¸æ¨èä½¿ç”¨è£¸æ•°ç»„ï¼Œåº”å½“å°½é‡ç”¨arrayå’Œvectorï¼Œæ›´å®‰å…¨ä¹Ÿæ›´å®¹æ˜“æ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596761804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238807,"user_name":"çš®çš®é²","can_delete":false,"product_type":"c1","uid":1691670,"ip_address":"","ucode":"75CD824292FDC8","user_header":"https://static001.geekbang.org/account/avatar/00/19/d0/16/7d0d02cc.jpg","comment_is_top":false,"comment_ctime":1596325441,"is_pvip":false,"replies":[{"id":"88276","content":"å¯ä»¥åœ¨æ¨¡æ¿å‚æ•°é‡Œå®šåˆ¶åˆ é™¤å™¨deleterï¼Œåœ¨é‡Œé¢ç”¨å†…å­˜æ± ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1596417091,"ip_address":"","comment_id":238807,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596325441","product_id":100051801,"comment_content":"è¯·é—®ä¸‹ç½—è€å¸ˆï¼Œåœ¨åµŒå…¥å¼å¼€å‘é¢†åŸŸï¼Œå¦‚æœç”¨äº†C++ï¼Œä¸”å¯¹newæ“ä½œç¬¦ï¼ˆé‡è½½ï¼‰ï¼Œmallocéƒ½ç”¨äº†å†…å­˜æ± ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨å‡½æ•°ä½“å†…ç”³è¯·ä½¿ç”¨å†…å­˜ï¼Œä¸ºäº†é˜²æ­¢æ ˆæº¢å‡ºï¼ˆæ ˆç©ºé—´æ¯”è¾ƒæœ‰é™ï¼‰ï¼Œç°åœ¨åˆ›å»ºå¯¹è±¡ï¼Œæ˜¯å¦å¯ä»¥ç”¨unique_ptrï¼Œå¦‚æœç”¨äº†unique_ptrå¦‚ä½•å’Œå†…å­˜æ± å…³è”ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502859,"discussion_content":"å¯ä»¥åœ¨æ¨¡æ¿å‚æ•°é‡Œå®šåˆ¶åˆ é™¤å™¨deleterï¼Œåœ¨é‡Œé¢ç”¨å†…å­˜æ± ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596417091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233854,"user_name":"æ€ªå…½","can_delete":false,"product_type":"c1","uid":1324007,"ip_address":"","ucode":"3342C55CB83B08","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/e7/145be2f9.jpg","comment_is_top":false,"comment_ctime":1594480422,"is_pvip":false,"replies":[{"id":"86323","content":"<br>1.è¦ç†è§£æ™ºèƒ½æŒ‡é’ˆçš„ç›®çš„ï¼Œä¸ºäº†è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œåƒè¿™æ ·çš„åŠ¨æ€æ•°ç»„ï¼Œåº”è¯¥ç”¨vectorã€‚<br><br>2.ä¸å»ºè®®ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†new []å‡ºæ¥çš„æ•°æ®ï¼Œå®ƒææ„æ—¶ç”¨çš„æ˜¯deleteï¼Œæ‰€ä»¥åˆ é™¤ä¼šæœ‰é—®é¢˜ã€‚<br><br>3.æ˜¯çš„ï¼Œä½†shared_ptrçš„é—®é¢˜åœ¨äºææ„çš„æ—¶æœºä¸ç¡®å®šï¼Œéš¾äºæ’æŸ¥å®šä½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1594524709,"ip_address":"","comment_id":233854,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594480422","product_id":100051801,"comment_content":"è€å¸ˆï¼Œåˆæœ‰ç–‘é—®æƒ³é—®ä½ äº†ï¼š<br>1. è¿™æ ·çš„è£¸æŒ‡é’ˆchar* pdata = new char[8];æœ‰å¿…è¦ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå—ï¼Ÿ<br>2. å¦‚æœä½¿ç”¨unique_ptrï¼Œæ˜¯ä¸æ˜¯å’Œunique_ptr&lt;char&gt; ptr = make_unique&lt;char&gt;(8);ç­‰ä»·ï¼Ÿæˆ‘æ„Ÿè§‰å†™å¾—æœ‰ç‚¹é—®é¢˜ã€‚<br>3. shared_ptr çš„é”€æ¯åŠ¨ä½œå¯èƒ½å¼•èµ·æ•´ä¸ªä¸–ç•Œé™æ­¢ï¼Œå¦‚æœclassçš„ææ„å‡½æ•°ä¸­æœ‰IOé˜»å¡ï¼Œä¸ç®¡æ˜¯å¦ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œæ•´ä¸ªä¸–ç•Œä¸ä¹ŸåŒæ ·é™æ­¢äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501188,"discussion_content":"\n1.è¦ç†è§£æ™ºèƒ½æŒ‡é’ˆçš„ç›®çš„ï¼Œä¸ºäº†è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œåƒè¿™æ ·çš„åŠ¨æ€æ•°ç»„ï¼Œåº”è¯¥ç”¨vectorã€‚\n\n2.ä¸å»ºè®®ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†new []å‡ºæ¥çš„æ•°æ®ï¼Œå®ƒææ„æ—¶ç”¨çš„æ˜¯deleteï¼Œæ‰€ä»¥åˆ é™¤ä¼šæœ‰é—®é¢˜ã€‚\n\n3.æ˜¯çš„ï¼Œä½†shared_ptrçš„é—®é¢˜åœ¨äºææ„çš„æ—¶æœºä¸ç¡®å®šï¼Œéš¾äºæ’æŸ¥å®šä½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594524709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229925,"user_name":"IAmLinGe","can_delete":false,"product_type":"c1","uid":1994848,"ip_address":"","ucode":"9DCDA0FA5CF2B0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/TXAUcbHlPbyEibtUB2STNgmOb6oQdO8nKuA9nnhuI76Ccv2U5Vgxfp8YxvGeKQP8k47ULBwVGglH4DibOzH8Qfeg/132","comment_is_top":false,"comment_ctime":1593203259,"is_pvip":false,"replies":[{"id":"84865","content":"RAIIçš„å…³é”®æ˜¯åˆ©ç”¨C++æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„ç‰¹æ€§ï¼Œå¯¹è±¡åˆ›å»ºæ—¶è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ï¼Œç¦»å¼€ä½œç”¨åŸŸå¤±æ•ˆæ—¶è‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ã€‚<br><br>æ˜ç¡®äº†è¿™ä¸¤ç‚¹ï¼Œå°±å¯ä»¥åœ¨æ„é€ å‡½æ•°é‡Œå†™ä»£ç è‡ªåŠ¨è·å–èµ„æºï¼Œåœ¨ææ„å‡½æ•°é‡Œè‡ªåŠ¨é‡Šæ”¾èµ„æºï¼Œå†æœ‰å°±æ˜¯ç†è§£ä½œç”¨åŸŸå’Œå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸäº†ã€‚å°±åƒæ˜¯ä¸€ä¸ªå¾®å‹çš„åƒåœ¾å›æ”¶æœºåˆ¶ã€‚<br><br>æ™ºèƒ½æŒ‡é’ˆï¼Œè¿˜æœ‰åé¢çº¿ç¨‹é”çš„LockGuardï¼Œéƒ½ç”¨çš„æ˜¯RAIIï¼Œç»“åˆå®ƒä»¬å†ä½“ä¼šä¸€ä¸‹è‡ªåŠ¨èµ„æºç®¡ç†å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1593240272,"ip_address":"","comment_id":229925,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593203259","product_id":100051801,"comment_content":"RAIIä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šï¼Œç¼–ç¨‹é™¤äº†æ™ºèƒ½æŒ‡é’ˆï¼Œå¦‚ä½•åœ¨å®é™…å¼€å‘ä¸­ç”¨åˆ°è¿™ç§æ€æƒ³ï¼Ÿèƒ½ä¸¾ä¾‹è¯¦ç»†è®²è®²å°±å¥½äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499698,"discussion_content":"RAIIçš„å…³é”®æ˜¯åˆ©ç”¨C++æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„ç‰¹æ€§ï¼Œå¯¹è±¡åˆ›å»ºæ—¶è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ï¼Œç¦»å¼€ä½œç”¨åŸŸå¤±æ•ˆæ—¶è‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ã€‚\n\næ˜ç¡®äº†è¿™ä¸¤ç‚¹ï¼Œå°±å¯ä»¥åœ¨æ„é€ å‡½æ•°é‡Œå†™ä»£ç è‡ªåŠ¨è·å–èµ„æºï¼Œåœ¨ææ„å‡½æ•°é‡Œè‡ªåŠ¨é‡Šæ”¾èµ„æºï¼Œå†æœ‰å°±æ˜¯ç†è§£ä½œç”¨åŸŸå’Œå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸäº†ã€‚å°±åƒæ˜¯ä¸€ä¸ªå¾®å‹çš„åƒåœ¾å›æ”¶æœºåˆ¶ã€‚\n\næ™ºèƒ½æŒ‡é’ˆï¼Œè¿˜æœ‰åé¢çº¿ç¨‹é”çš„LockGuardï¼Œéƒ½ç”¨çš„æ˜¯RAIIï¼Œç»“åˆå®ƒä»¬å†ä½“ä¼šä¸€ä¸‹è‡ªåŠ¨èµ„æºç®¡ç†å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593240272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229924,"user_name":"IAmLinGe","can_delete":false,"product_type":"c1","uid":1994848,"ip_address":"","ucode":"9DCDA0FA5CF2B0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/TXAUcbHlPbyEibtUB2STNgmOb6oQdO8nKuA9nnhuI76Ccv2U5Vgxfp8YxvGeKQP8k47ULBwVGglH4DibOzH8Qfeg/132","comment_is_top":false,"comment_ctime":1593202939,"is_pvip":false,"replies":[{"id":"84866","content":"<br>1.unique_pträ¸å…è®¸æ‹·è´ï¼Œæ‰€ä»¥åœ¨å‡½æ•°å‚æ•°ä¸­å¯ä»¥ç”¨å¼•ç”¨çš„å½¢å¼ï¼Œæˆ–è€…ç”¨std::moveï¼Œä½†è¦æ˜ç¡®ï¼Œä¸ºä»€ä¹ˆè¦ä¼ é€’unique_ptrè¿›å‡½æ•°ï¼Œæ‰€æœ‰æƒæ˜¯å¦è¿˜æ˜¯å”¯ä¸€çš„ï¼Œæ˜¯å¦è¦è½¬ç§»ï¼Œå¦‚æœä¸æ¸…æ¥šå°±å¾ˆå®¹æ˜“è¯¯ç”¨å¯¼è‡´é”™è¯¯ã€‚<br><br>2.å‡½æ•°è¿”å›unique_ptrå¾ˆç®€å•ï¼Œç›´æ¥returnå°±è¡Œäº†ï¼Œå®ƒä¼šè‡ªå·±è½¬ç§»æ‰€æœ‰æƒï¼Œå‚è€ƒmake_unique()å‡½æ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1593240411,"ip_address":"","comment_id":229924,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593202939","product_id":100051801,"comment_content":"å¦‚ä½•åœ¨å‡½æ•°å‚æ•°ä¸­ä½¿ç”¨unique_ptrï¼Ÿå‡½æ•°å¦‚ä½•è¿”å›ä¸€ä¸ªunique_ptrï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499697,"discussion_content":"\n1.unique_pträ¸å…è®¸æ‹·è´ï¼Œæ‰€ä»¥åœ¨å‡½æ•°å‚æ•°ä¸­å¯ä»¥ç”¨å¼•ç”¨çš„å½¢å¼ï¼Œæˆ–è€…ç”¨std::moveï¼Œä½†è¦æ˜ç¡®ï¼Œä¸ºä»€ä¹ˆè¦ä¼ é€’unique_ptrè¿›å‡½æ•°ï¼Œæ‰€æœ‰æƒæ˜¯å¦è¿˜æ˜¯å”¯ä¸€çš„ï¼Œæ˜¯å¦è¦è½¬ç§»ï¼Œå¦‚æœä¸æ¸…æ¥šå°±å¾ˆå®¹æ˜“è¯¯ç”¨å¯¼è‡´é”™è¯¯ã€‚\n\n2.å‡½æ•°è¿”å›unique_ptrå¾ˆç®€å•ï¼Œç›´æ¥returnå°±è¡Œäº†ï¼Œå®ƒä¼šè‡ªå·±è½¬ç§»æ‰€æœ‰æƒï¼Œå‚è€ƒmake_unique()å‡½æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593240411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228545,"user_name":"ç¦¾ä¼—","can_delete":false,"product_type":"c1","uid":1105469,"ip_address":"","ucode":"C37D2965ECA3A3","user_header":"https://static001.geekbang.org/account/avatar/00/10/de/3d/b74ee1af.jpg","comment_is_top":false,"comment_ctime":1592731142,"is_pvip":false,"replies":[{"id":"84265","content":"æ„æ€æ˜¯å¦‚æœææ„å‡½æ•°æœ‰ç£ç›˜ioè¿™æ ·çš„é˜»å¡æ“ä½œï¼Œé‚£ä¹ˆshared_ptré”€æ¯å°±ä¼šè¢«é˜»å¡ï¼Œä»è€Œæ•´ä¸ªç¨‹åºä¹Ÿå°±è¢«é˜»å¡äº†ã€‚<br><br>æ•´ä¸ªå–å†³äºshared_ptrç®¡ç†å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œä¸€èˆ¬ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œåªæœ‰æç‰¹æ®Šçš„æƒ…å†µæ‰è¦è€ƒè™‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1592740370,"ip_address":"","comment_id":228545,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592731142","product_id":100051801,"comment_content":"shared_ptr çš„é”€æ¯åŠ¨ä½œå¯èƒ½å¼•èµ·æ•´ä¸ªä¸–ç•Œé™æ­¢ä¸åŠ¨çš„ä¾‹å­æ²¡æœ‰çœ‹æ˜ç™½ï¼Œè€å¸ˆçš„æ„æ€æ˜¯è¯´ shared_ptr å¯¹è±¡ææ„èŠ±çš„æ—¶é—´æ¯”æ™®é€š delete è¦ä¹…å—ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿè€å¸ˆç»™çš„ææ„å‡½æ•°åªæœ‰ä¸€è¡Œæ³¨é‡Šï¼Œæ²¡çœ‹å‡ºæœ‰ä»€ä¹ˆç‰¹åˆ«çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499070,"discussion_content":"æ„æ€æ˜¯å¦‚æœææ„å‡½æ•°æœ‰ç£ç›˜ioè¿™æ ·çš„é˜»å¡æ“ä½œï¼Œé‚£ä¹ˆshared_ptré”€æ¯å°±ä¼šè¢«é˜»å¡ï¼Œä»è€Œæ•´ä¸ªç¨‹åºä¹Ÿå°±è¢«é˜»å¡äº†ã€‚\n\næ•´ä¸ªå–å†³äºshared_ptrç®¡ç†å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œä¸€èˆ¬ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œåªæœ‰æç‰¹æ®Šçš„æƒ…å†µæ‰è¦è€ƒè™‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592740370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226256,"user_name":"paradoxxx","can_delete":false,"product_type":"c1","uid":1233527,"ip_address":"","ucode":"FD94E547273B18","user_header":"https://static001.geekbang.org/account/avatar/00/12/d2/77/bae2045d.jpg","comment_is_top":false,"comment_ctime":1592017497,"is_pvip":false,"replies":[{"id":"83325","content":"æ„Ÿè°¢æŒ‡æ­£ï¼Œç–å¿½äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1592023206,"ip_address":"","comment_id":226256,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592017497","product_id":100051801,"comment_content":"è€å¸ˆï¼Œç¬¬ä¸€æ®µä»£ç é‡Œ assert(*ptr1 = 10); åº”è¯¥æ˜¯assert(*ptr1 == 10); ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498168,"discussion_content":"æ„Ÿè°¢æŒ‡æ­£ï¼Œç–å¿½äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592023206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224062,"user_name":"ç§€","can_delete":false,"product_type":"c1","uid":1347035,"ip_address":"","ucode":"0E7B6FAEA23CA1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVzmZvQuYSw5IfzprjgQj9U3Jmrez8YWU1hhruUOvZpvQOwvVcjDyaBKs0Up09OaZNzKaHibVwAJA/132","comment_is_top":false,"comment_ctime":1591264094,"is_pvip":false,"replies":[{"id":"82555","content":"weak_ptræ˜¯ä¸ºäº†é˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œè¿˜æœ‰å°±æ˜¯â€œå¼±å¼•ç”¨â€â€œå¼±è”ç³»â€ï¼Œåªæ˜¯è§‚å¯Ÿç›®æ ‡ã€‚<br><br>å…³é”®æ˜¯è¦æ˜ç¡®æŒ‡é’ˆä¸æŒ‡å‘å¯¹è±¡çš„å…³ç³»ï¼Œæ˜¯è¦ä¸€ç›´æŒæœ‰ï¼ˆå¼ºå…³ç³»ï¼‰ï¼Œè¿˜æ˜¯æƒ³å¶å°”ç”¨ä¸€ä¸‹ï¼ˆå¼±å…³ç³»ï¼‰ã€‚<br><br>ä¾‹å­ä¸å¤ªå¥½æ‰¾ï¼Œä¸€èˆ¬è¦ä»”ç»†åˆ†ææŒ‡é’ˆçš„ç”¨é€”å’Œç›®çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591324485,"ip_address":"","comment_id":224062,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591264094","product_id":100051801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæƒ³é—®ä¸€ä¸‹æ˜¯å¦æœ‰ä¸€äº›æ˜ç¡®çš„è§„åˆ™æ¥åŒºåˆ†æ˜¯å¦è¦æ­é…weakæŒ‡é’ˆä½¿ç”¨ã€‚èƒ½ä¸èƒ½å¸®å¿™å†ä¸¾ä¸ªä¾‹å­ã€‚è°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497351,"discussion_content":"weak_ptræ˜¯ä¸ºäº†é˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œè¿˜æœ‰å°±æ˜¯â€œå¼±å¼•ç”¨â€â€œå¼±è”ç³»â€ï¼Œåªæ˜¯è§‚å¯Ÿç›®æ ‡ã€‚\n\nå…³é”®æ˜¯è¦æ˜ç¡®æŒ‡é’ˆä¸æŒ‡å‘å¯¹è±¡çš„å…³ç³»ï¼Œæ˜¯è¦ä¸€ç›´æŒæœ‰ï¼ˆå¼ºå…³ç³»ï¼‰ï¼Œè¿˜æ˜¯æƒ³å¶å°”ç”¨ä¸€ä¸‹ï¼ˆå¼±å…³ç³»ï¼‰ã€‚\n\nä¾‹å­ä¸å¤ªå¥½æ‰¾ï¼Œä¸€èˆ¬è¦ä»”ç»†åˆ†ææŒ‡é’ˆçš„ç”¨é€”å’Œç›®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591324485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223737,"user_name":"Seven","can_delete":false,"product_type":"c1","uid":1656378,"ip_address":"","ucode":"6F502CDCAD7A79","user_header":"https://static001.geekbang.org/account/avatar/00/19/46/3a/35d9cc02.jpg","comment_is_top":false,"comment_ctime":1591169121,"is_pvip":false,"replies":[{"id":"82396","content":"Androidä¸äº†è§£ï¼Œä¸è¿‡ç°ä»£ç¼–ç¨‹è¯­è¨€é‡Œçš„å¤§éƒ¨åˆ†ç‰¹æ€§åº”è¯¥éƒ½æ˜¯ä»C++é‡Œæ‹¿è¿‡æ¥çš„ï¼Œæˆ–è€…æ˜¯é’ˆå¯¹C++æ”¹è‰¯çš„ã€‚<br><br>è‡ªåŠ¨ç±»å‹æ¨å¯¼å…¶å®æ˜¯ä¸€ä¸ªå¾ˆå¤è€çš„ç‰¹æ€§ï¼Œæ—©åœ¨80å¹´ä»£C++åˆæœŸå°±æœ‰å®ç°ï¼Œä½†å› ä¸ºè€ƒè™‘åˆ°å¯¹Cçš„å…¼å®¹æ€§ï¼Œæ‰€ä»¥æ‰æ¨è¿Ÿåˆ°äº†C++11ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591174920,"ip_address":"","comment_id":223737,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1591169121","product_id":100051801,"comment_content":"è¶Šçœ‹è¶Šåƒandroidæä¾›çš„æŒ‡é’ˆï¼Œä¸è¿‡åº”è¯¥è¯´åƒC++æŒ‡é’ˆï¼Œè€å¸ˆå¯ä»¥è®²ä¸€æœŸï¼Œæ‰€æœ‰è¯­è¨€ç‰¹æ€§æ¥è‡ªäºCï¼Œè‡ªåŠ¨ç±»å‹æ£€æµ‹ä¸å°±æ˜¯JSå½“ä¸­çš„ä¸€æ ·ä¹ˆï¼ŒåŠ æ²¹","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497229,"discussion_content":"Androidä¸äº†è§£ï¼Œä¸è¿‡ç°ä»£ç¼–ç¨‹è¯­è¨€é‡Œçš„å¤§éƒ¨åˆ†ç‰¹æ€§åº”è¯¥éƒ½æ˜¯ä»C++é‡Œæ‹¿è¿‡æ¥çš„ï¼Œæˆ–è€…æ˜¯é’ˆå¯¹C++æ”¹è‰¯çš„ã€‚\n\nè‡ªåŠ¨ç±»å‹æ¨å¯¼å…¶å®æ˜¯ä¸€ä¸ªå¾ˆå¤è€çš„ç‰¹æ€§ï¼Œæ—©åœ¨80å¹´ä»£C++åˆæœŸå°±æœ‰å®ç°ï¼Œä½†å› ä¸ºè€ƒè™‘åˆ°å¯¹Cçš„å…¼å®¹æ€§ï¼Œæ‰€ä»¥æ‰æ¨è¿Ÿåˆ°äº†C++11ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591174920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1068914,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4f/72/0c75c0bf.jpg","nickname":"arvilin","note":"","ucode":"D40D4021226612","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278506,"discussion_content":"share_ptrã€weak_ptrè®©æˆ‘æƒ³èµ·æ¥iosé‡Œé¢strongå¼ºç±»å‹è·Ÿweak","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591193735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221607,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1590548526,"is_pvip":true,"replies":[{"id":"81718","content":"ä¸å»ºè®®ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†æ•°ç»„ï¼Œè™½ç„¶è¿™æ ·ä¹Ÿå¯ä»¥ï¼Œæœ€å¥½ç”¨å®¹å™¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1590553013,"ip_address":"","comment_id":221607,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590548526","product_id":100051801,"comment_content":"æ™ºèƒ½æŒ‡é’ˆç®¡ç†æ•°ç»„ï¼Œæ˜¯ä¸æ˜¯ä¸ä¼šç§»åŠ¨é‡Šæ”¾ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨ä¹¦å†™ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496512,"discussion_content":"ä¸å»ºè®®ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†æ•°ç»„ï¼Œè™½ç„¶è¿™æ ·ä¹Ÿå¯ä»¥ï¼Œæœ€å¥½ç”¨å®¹å™¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590553013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221462,"user_name":"æé”","can_delete":false,"product_type":"c1","uid":1688247,"ip_address":"","ucode":"476273EDCD86D2","user_header":"https://static001.geekbang.org/account/avatar/00/19/c2/b7/f7facaae.jpg","comment_is_top":false,"comment_ctime":1590503209,"is_pvip":false,"replies":[{"id":"81689","content":"åŠ¨æ€æ•°ç»„è™½ç„¶ä¹Ÿå¯ä»¥ç”¨shared_ptræ¥ç®¡ç†ï¼Œä½†ä¸æ˜¯å¾ˆæ¨èï¼Œå…¶å®æ›´åº”è¯¥ç”¨å®¹å™¨vectorï¼Œè¿™ä¸ªåœ¨C++98é‡Œå°±æœ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1590540588,"ip_address":"","comment_id":221462,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1590503209","product_id":100051801,"comment_content":"ç½—è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘çš„å·¥ä½œåœºæ™¯ä¸­ç»å¸¸éœ€è¦newä¸€ä¸ªæ•°ç»„æ¥ç¼“å­˜ä»ä¸‹ä½æœºé‡‡é›†åˆ°çš„æ•°æ®ï¼Œæ¯”å¦‚new [100]æ¥ç¼“å­˜100å¸§å›¾åƒæ•°æ®ï¼Œè¯·é—®ä¸‹ï¼Œc++11ä¸­æ™ºèƒ½æŒ‡é’ˆå¦‚ä½•å»ç®¡ç†newæ•°ç»„ï¼Œè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496459,"discussion_content":"åŠ¨æ€æ•°ç»„è™½ç„¶ä¹Ÿå¯ä»¥ç”¨shared_ptræ¥ç®¡ç†ï¼Œä½†ä¸æ˜¯å¾ˆæ¨èï¼Œå…¶å®æ›´åº”è¯¥ç”¨å®¹å™¨vectorï¼Œè¿™ä¸ªåœ¨C++98é‡Œå°±æœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590540588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026967,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/97/57fa9ad5.jpg","nickname":"x404","note":"","ucode":"96FEC9853BA413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274837,"discussion_content":"ä½ ä¹Ÿæ˜¯åšä¸Šä½æœºçš„å—ï¼Œæ„Ÿè§‰ç”¨c++åšä¸Šä½æœºæœ‰ç‚¹æ…¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590625302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220726,"user_name":"fl260919784","can_delete":false,"product_type":"c1","uid":1045678,"ip_address":"","ucode":"D6E10B8BDD0BB8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/ae/3b101c00.jpg","comment_is_top":false,"comment_ctime":1590314738,"is_pvip":false,"replies":[{"id":"81459","content":"å¯ä»¥ç”¨std::dynamic_pointer_castï¼Œåœ¨shared_ptré‡Œå­˜å‚¨åŸºç±»æŒ‡é’ˆï¼Œç„¶åå†åŠ¨æ€è½¬å‹æˆå­ç±»ã€‚<br><br>shared_ptrå¾ˆçµæ´»ï¼Œæœ‰å¾ˆå¤šå½¢å¼çš„æ„é€ å‡½æ•°å’Œè¾…åŠ©å·¥å…·ï¼Œä½ è¯´çš„è¿™ç§æƒ…å½¢å¾ˆå¸¸è§ï¼Œæ‰€ä»¥è‚¯å®šè€ƒè™‘åˆ°äº†ï¼Œéœ€è¦çœ‹æ¥å£æ–‡æ¡£ï¼Œæ‰¾å‡ºåˆé€‚è‡ªå·±çš„è§£å†³åŠæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590368217,"ip_address":"","comment_id":220726,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1590314738","product_id":100051801,"comment_content":"ç½—è€å¸ˆå¥½ï¼Œå’¨è¯¢ä¸ªshared_pträ¸å¤šæ€çš„é—®é¢˜ï¼š<br>class A {public: virtual ~A() = default;}; &#47;&#47;è™šææ„<br>class B: public A{};                       &#47;&#47;å…±æœ‰ç»§æ‰¿<br><br>class HolderA {public: std::shared_ptr&lt;A&gt; data;}; &#47;&#47;æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œåªéœ€æŒæœ‰Aå³å¯<br>class HolderB {public: std::shared_ptr&lt;B&gt; data;}; &#47;&#47;éœ€è¦æ´¾ç”Ÿç±»çš„é«˜çº§ç‰¹æ€§ï¼Œæ‰€ä»¥éœ€è¦æŒæœ‰B<br><br>å­˜åœ¨å¦‚ä¸‹çš„ä½¿ç”¨åœºæ™¯ï¼š<br>std::shared_ptr&lt;B&gt; data = std::make_shared&lt;B&gt;();<br>éœ€è¦å°†dataåŒæ—¶äº¤ä»˜ç»™HolderA&#47;HoladerBï¼Œè¿™æ ·åŒ–çš„è¯ï¼Œå‘ç°æä¸å®šäº†ã€‚ã€‚ã€‚ï¼ˆHolderAæ²¡æ³•è¢«èµ‹å€¼ï¼‰<br><br>æ€è€ƒï¼š<br>1ã€å¦‚æœHolderA&#47;HolderBä¸­ä½¿ç”¨è£¸æŒ‡é’ˆçš„è¯ï¼Œè¿˜æ˜¯æ¯”è¾ƒè½»æ¾çš„ï¼ŒæŒ‡é’ˆçš„ç”Ÿå‘½å‘¨æœŸäº¤ç”±å¤–éƒ¨ç»Ÿä¸€ç®¡ç†ï¼Œä½†æ˜¯æ„Ÿè§‰æŒ‡é’ˆç®¡ç†æ–¹å¼ä¸ç»Ÿä¸€ã€‚<br>2ã€å¦‚æœä½¿ç”¨shared_ptré‚£è¯¥å¦‚ä½•å®ç°ï¼Ÿ<br>3ã€åƒæ­¤ç±»å…±äº«åœºæ™¯ã€æˆ–è€…ç±»çš„æ•°æ®æˆå‘˜ï¼Œä¸€èˆ¬åœ¨è£¸æŒ‡é’ˆä¸shared_ptrå¦‚ä½•é€‰æ‹©<br>4ã€unique_pträ¸å­˜åœ¨å…±äº«ï¼Œå°±æ²¡è¿™ä¹ˆéº»çƒ¦","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496222,"discussion_content":"å¯ä»¥ç”¨std::dynamic_pointer_castï¼Œåœ¨shared_ptré‡Œå­˜å‚¨åŸºç±»æŒ‡é’ˆï¼Œç„¶åå†åŠ¨æ€è½¬å‹æˆå­ç±»ã€‚\n\nshared_ptrå¾ˆçµæ´»ï¼Œæœ‰å¾ˆå¤šå½¢å¼çš„æ„é€ å‡½æ•°å’Œè¾…åŠ©å·¥å…·ï¼Œä½ è¯´çš„è¿™ç§æƒ…å½¢å¾ˆå¸¸è§ï¼Œæ‰€ä»¥è‚¯å®šè€ƒè™‘åˆ°äº†ï¼Œéœ€è¦çœ‹æ¥å£æ–‡æ¡£ï¼Œæ‰¾å‡ºåˆé€‚è‡ªå·±çš„è§£å†³åŠæ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590368217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1045678,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f4/ae/3b101c00.jpg","nickname":"fl260919784","note":"","ucode":"D6E10B8BDD0BB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272680,"discussion_content":"static_pointer_cast è½¬æ¢å®Œæˆåï¼Œè™½ç„¶æŒ‡é’ˆåœ°å€ä¸ä¸€å®šç›¸åŒï¼ˆå¤šç»§æ‰¿ï¼‰ï¼Œä½†å¼•ç”¨è®¡æ•°ä¾æ—§æœ‰æ•ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590332746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220548,"user_name":"52rock","can_delete":false,"product_type":"c1","uid":1025632,"ip_address":"","ucode":"3C4376A8EAAEF6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/60/0eac2751.jpg","comment_is_top":false,"comment_ctime":1590287444,"is_pvip":true,"replies":[{"id":"81426","content":"xpç³»ç»Ÿå¤ªè€äº†ï¼Œä½†æ–°ç‰ˆçš„vcåº”è¯¥ä¹Ÿæ”¯æŒç¼–è¯‘å‡ºxpè¿è¡Œçš„åº”ç”¨å§ã€‚<br><br>æŠ±æ­‰å¾ˆä¹…æ²¡æœ‰åšWindowså¼€å‘äº†ï¼Œè¿™æ–¹é¢ä¸æ˜¯å¤ªäº†è§£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590328280,"ip_address":"","comment_id":220548,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590287444","product_id":100051801,"comment_content":"å¼€å‘çš„è½¯ä»¶è¦åœ¨xpç³»ç»Ÿä¸Šè¿è¡Œè²Œä¼¼è¿™äº›éƒ½ä¸èƒ½ç”¨","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496176,"discussion_content":"xpç³»ç»Ÿå¤ªè€äº†ï¼Œä½†æ–°ç‰ˆçš„vcåº”è¯¥ä¹Ÿæ”¯æŒç¼–è¯‘å‡ºxpè¿è¡Œçš„åº”ç”¨å§ã€‚\n\næŠ±æ­‰å¾ˆä¹…æ²¡æœ‰åšWindowså¼€å‘äº†ï¼Œè¿™æ–¹é¢ä¸æ˜¯å¤ªäº†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590328280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220321,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1590223017,"is_pvip":false,"replies":[{"id":"81321","content":"è¯´çš„å¾ˆå¥½ï¼Œæœ‰äº†æ™ºèƒ½æŒ‡é’ˆï¼Œå°±ä¸éœ€è¦newå’Œdeleteäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590230882,"ip_address":"","comment_id":220321,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590223017","product_id":100051801,"comment_content":"1.uniqueçš„æ‰€æœ‰æƒåªèƒ½è½¬ç§»ï¼Œä¸èƒ½å¢åŠ ã€‚sharedå¯ä»¥è½¬ç§»ä¹Ÿå¯ä»¥å¢åŠ ã€‚å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªuniqueæˆ–sharedä¹Ÿå­˜åœ¨å¹¶å‘é—®é¢˜ã€‚uniqueæ²¡æœ‰å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚<br><br>2. å°½é‡ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œå°±å¯ä»¥é¿å…æ‰‹åŠ¨ç®¡ç†äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496119,"discussion_content":"è¯´çš„å¾ˆå¥½ï¼Œæœ‰äº†æ™ºèƒ½æŒ‡é’ˆï¼Œå°±ä¸éœ€è¦newå’Œdeleteäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590230882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220287,"user_name":"Confidant.","can_delete":false,"product_type":"c1","uid":1660039,"ip_address":"","ucode":"6E137F863906B0","user_header":"https://static001.geekbang.org/account/avatar/00/19/54/87/3b1f9de4.jpg","comment_is_top":false,"comment_ctime":1590220865,"is_pvip":false,"replies":[{"id":"81324","content":"shared_pträ¹Ÿå¯ä»¥è‡ªå®šä¹‰åˆ é™¤å‡½æ•°ï¼Œè‡ªå·±å®šåˆ¶ç®¡ç†ç­–ç•¥ï¼Œè¿™ä¸ªå°±éœ€è¦ä»”ç»†åˆ†æèµ„æºçš„ç”Ÿå­˜å‘¨æœŸäº†ï¼Œæ¶‰åŠåˆ°åº•å±‚å¿…é¡»å°å¿ƒã€‚<br><br>C++æä¾›çš„å·¥å…·å¾ˆå¤šï¼Œç”¨æ³•ä¹Ÿå¤æ‚ï¼Œå¾—ä»”ç»†çœ‹æ¥å£æ–‡æ¡£ï¼Œå¾ˆå¯èƒ½å°±ä¼šåœ¨é‡Œé¢æ‰¾åˆ°å¥½çš„è§£å†³æ–¹æ¡ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590231181,"ip_address":"","comment_id":220287,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590220865","product_id":100051801,"comment_content":"é—®è€å¸ˆä¸€ä¸ªæˆ‘æœ€è¿‘è¢«å›°æƒ‘åˆ°çš„æ™ºèƒ½æŒ‡é’ˆç›¸å…³çš„é—®é¢˜ï¼Œå¤šçº¿ç¨‹çš„ä¸€äº›ç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒéœ€è¦ä¼ é€’ä¸€äº›æŒ‡é’ˆæ¥ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚Linuxæˆ–Windowsåº•ä¸‹çš„ç³»ç»Ÿçº¿ç¨‹ä¸­å­çº¿ç¨‹çš„å‚æ•°ï¼Œæ¯”å¦‚CreateIoCompectionPorté‡Œé¢çš„å‚æ•°ï¼Œæˆ‘ä»¬ä»Açº¿ç¨‹ä¼ å‚ï¼ŒBçº¿ç¨‹å–å‚ï¼Œä¸­é—´å¯èƒ½ç»è¿‡äº†æ“ä½œç³»ç»Ÿï¼Œè¿™ç§æƒ…å†µæ˜¯æ— æ³•ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆçš„ï¼Œé‚£æ˜¯ä¸æ˜¯åªèƒ½é æ‰‹åŠ¨æ¥ç®¡ç†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496114,"discussion_content":"shared_pträ¹Ÿå¯ä»¥è‡ªå®šä¹‰åˆ é™¤å‡½æ•°ï¼Œè‡ªå·±å®šåˆ¶ç®¡ç†ç­–ç•¥ï¼Œè¿™ä¸ªå°±éœ€è¦ä»”ç»†åˆ†æèµ„æºçš„ç”Ÿå­˜å‘¨æœŸäº†ï¼Œæ¶‰åŠåˆ°åº•å±‚å¿…é¡»å°å¿ƒã€‚\n\nC++æä¾›çš„å·¥å…·å¾ˆå¤šï¼Œç”¨æ³•ä¹Ÿå¤æ‚ï¼Œå¾—ä»”ç»†çœ‹æ¥å£æ–‡æ¡£ï¼Œå¾ˆå¯èƒ½å°±ä¼šåœ¨é‡Œé¢æ‰¾åˆ°å¥½çš„è§£å†³æ–¹æ¡ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590231181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220273,"user_name":"bearlu","can_delete":false,"product_type":"c1","uid":1030862,"ip_address":"","ucode":"14F260C8B24E27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","comment_is_top":false,"comment_ctime":1590219308,"is_pvip":true,"replies":[{"id":"81320","content":"ææ„ï¼Œé‡Œé¢æœ‰å¤æ‚æ“ä½œé˜»å¡çº¿ç¨‹ã€‚<br><br>shared_ptråªæä¾›åŸºæœ¬çš„çº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦å»ç»†çœ‹æ–‡æ¡£ï¼Œä¸èƒ½å®Œå…¨ä¾èµ–å®ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590230854,"ip_address":"","comment_id":220273,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590219308","product_id":100051801,"comment_content":" shared_ptr çš„é”€æ¯åŠ¨ä½œï¼Œè¿™æ®µè¯´ä¸–ç•Œåœæ­¢ï¼Œæ˜¯ä¸ºä»€ä¹ˆåœæ­¢ï¼Œåšäº†ä»€ä¹ˆæ“ä½œå¯¼è‡´ä¸–ç•Œåœæ­¢ï¼Œæ™ºèƒ½æŒ‡é’ˆä¸æ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496107,"discussion_content":"ææ„ï¼Œé‡Œé¢æœ‰å¤æ‚æ“ä½œé˜»å¡çº¿ç¨‹ã€‚\n\nshared_ptråªæä¾›åŸºæœ¬çš„çº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦å»ç»†çœ‹æ–‡æ¡£ï¼Œä¸èƒ½å®Œå…¨ä¾èµ–å®ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590230854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220215,"user_name":"HoshinoKanade","can_delete":false,"product_type":"c1","uid":1770245,"ip_address":"","ucode":"AA8B4F90FB9E5F","user_header":"https://static001.geekbang.org/account/avatar/00/1b/03/05/140068f9.jpg","comment_is_top":false,"comment_ctime":1590207274,"is_pvip":false,"replies":[{"id":"81294","content":"boosté‡Œæœ‰ä¸€ä¸ªintrusive_ptrï¼Œåº”è¯¥å¯ä»¥è§£å†³ä½ çš„é—®é¢˜ï¼Œå¯æƒœå®ƒä¸æ˜¯æ ‡å‡†åº“é‡Œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590214123,"ip_address":"","comment_id":220215,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1590207274","product_id":100051801,"comment_content":"é …ç›®æ­£åœ¨ä½¿ç”¨ä¸€å€‹è‡ªå®¶ç·¨å¯«çš„win32 apiå¯¦ç¾çš„å¼•ç”¨è¨ˆæ•¸å™¨proxyï¼Œæœ€è¿‘é™·å…¥äº†ä¸å¯ç§»æ¤æ€§çš„è‹¦æƒ±ã€‚è«‹å•è€å¸«æœ‰æ²’æœ‰è¾¦æ³•åˆ©ç”¨c++11çš„å¥½è™•ï¼Œè€Œä¸éœ€è¦åœæ­¢ä½¿ç”¨é€™å·²ç¶“æ»²é€åœ¨ä»£ç¢¼åº«æ‰€æœ‰è§’è½çš„è‡ªå®¶é¡åˆ¥ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496090,"discussion_content":"boosté‡Œæœ‰ä¸€ä¸ªintrusive_ptrï¼Œåº”è¯¥å¯ä»¥è§£å†³ä½ çš„é—®é¢˜ï¼Œå¯æƒœå®ƒä¸æ˜¯æ ‡å‡†åº“é‡Œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590214123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273367,"discussion_content":"è¿™ä¸ªéœ€è¦ä»”ç»†çœ‹shared_ptrçš„æ–‡æ¡£äº†ï¼Œæˆ‘æ„Ÿè§‰å¥½åƒæ˜¯ä¸è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590453173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1770245,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/03/05/140068f9.jpg","nickname":"HoshinoKanade","note":"","ucode":"AA8B4F90FB9E5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272959,"discussion_content":"è¬è¬è€å¸«ã€‚çµ„å…§æœ‰äººæ‹’çµ•ä½¿ç”¨boostï¼Œå“ã€‚åœ¨è‡ªå®¶é¡åˆ¥å¯¦ç¾æ”¹ç‚ºåŒ…è‘—ä¸€å€‹shared_pträ¼¼ä¹ä¹Ÿå¯è¡Œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590382359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220206,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1590203479,"is_pvip":true,"replies":[{"id":"81295","content":"çº¢é»‘æ ‘ç»“æ„åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½†åŒºåˆ«åœ¨äºæ˜¯å¦å…è®¸keyé‡å¤ã€‚è¿˜æœ‰ï¼Œseté‡Œåªæ˜¯keyï¼Œè€Œmapæ˜¯key-valueã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1590214182,"ip_address":"","comment_id":220206,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590203479","product_id":100051801,"comment_content":"ç½—è€å¸ˆï¼Œé—®ä¸€ä¸ªè·Ÿæœ¬èŠ‚æ— å…³çš„é—®é¢˜ï¼Œæ˜¯ä»Šå¤©æ—©ä¸Šè„‘è¢‹é‡Œé—ªè¿‡çš„é—®é¢˜ã€‚STLä¸­map set multimap multisetå†…éƒ¨éƒ½æ˜¯çº¢é»‘æ ‘å®ç°çš„ï¼Œå…¶åŸç†æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496083,"discussion_content":"çº¢é»‘æ ‘ç»“æ„åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½†åŒºåˆ«åœ¨äºæ˜¯å¦å…è®¸keyé‡å¤ã€‚è¿˜æœ‰ï¼Œseté‡Œåªæ˜¯keyï¼Œè€Œmapæ˜¯key-valueã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590214182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}