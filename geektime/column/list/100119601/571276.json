{"id":571276,"title":"12ï½œç»„ä»¶è¡¨ä¸é‡Œï¼ˆä¸Šï¼‰ï¼šæ•°æ®æ˜¯å¦‚ä½•åœ¨ React ç»„ä»¶ä¹‹é—´æµè½¬çš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å®‹ä¸€ç®ï¼Œæ¬¢è¿å›åˆ°Reactåº”ç”¨å¼€å‘çš„å­¦ä¹ ã€‚</p><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬å­¦ä¹ äº†Reactçš„äº‹ä»¶å¤„ç†ï¼Œç†è§£äº†Reactäº‹ä»¶æ˜¯æ ‡å‡†åŒ–å°è£…è¿‡çš„åˆæˆäº‹ä»¶ã€‚åœ¨è¿™åŸºç¡€ä¹‹ä¸Šï¼Œè¿˜å­¦ä¹ äº†å—æ§ç»„ä»¶å’Œäº‹ä»¶å†’æ³¡/æ•è·çš„æ¦‚å¿µï¼Œå¹¶ä¸º <code>oh-my-kanban</code> é¡¹ç›®åŠ å…¥äº†å®ç”¨çš„å¡ç‰‡æ‹–æ‹½åŠŸèƒ½ã€‚å…¶é—´æˆ‘ä»¬ä¹Ÿä¸å¿˜ä¸æµè§ˆå™¨åŸç”ŸDOMäº‹ä»¶ä½œå¯¹æ¯”ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸã€Hooksã€äº‹ä»¶å¤„ç†ï¼Œä½ å·²ç»åŸºæœ¬äº†è§£äº†å¯ä»¥åœ¨å“ªäº›ä½ç½®ç¼–å†™ç»„ä»¶é€»è¾‘ä»£ç ã€‚é‚£ä¹ˆå½“ä½ åœ¨Reactåº”ç”¨ä¸­å†™äº†å¤šæ®µé€»è¾‘ä»£ç åï¼Œä»£ç ä¹‹é—´æ˜¯æ€ä¹ˆä¸²è”èµ·æ¥çš„ï¼Ÿåè¿‡æ¥è¯´ï¼Œæ€æ ·æ‰èƒ½æŠŠæ¯æ®µä»£ç å†™åœ¨å®ƒåˆé€‚çš„åœ°æ–¹ï¼Œè®©å®ƒä»¬å„å¸å…¶èŒï¼Œæ”¯æ’‘åº”ç”¨è·‘èµ·æ¥å‘¢ï¼Ÿ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šç”¨ä¸¤èŠ‚è¯¾çš„æ—¶é—´ï¼ŒæŠŠè§†é‡ä»å•ä¸ªReactç»„ä»¶ä¸­æ‹“å±•å¼€æ¥ï¼Œçœ‹çœ‹<strong>ç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´çš„åˆ†å·¥å’Œäº¤äº’ï¼Œ</strong>ä»è€Œå¸®åŠ©ä½ è§£å†³åˆšæ‰æå‡ºçš„é—®é¢˜ã€‚</p><p>æˆ‘æŠŠè¿™ä¸¤èŠ‚è¯¾åˆ†åˆ«ç§°ä¸ºç»„ä»¶çš„â€œé¢å­â€å’Œâ€œé‡Œå­â€ã€‚è¿™èŠ‚è¯¾çš„é‡ç‚¹ï¼Œæ˜¯Reactçš„<strong>å•å‘æ•°æ®æµ</strong>ã€‚å½“ä½ ç†è§£äº†åœ¨Reactçš„è®¾è®¡å“²å­¦ä¸­æ•°æ®åº”è¯¥å¦‚ä½•æµè½¬ï¼Œå°±ä¼šå¯¹å¦‚ä½•è®¾è®¡propså’Œstateäº†ç„¶äºå¿ƒã€‚</p><p>åœ¨å­¦ä¹ æ¦‚å¿µçš„åŸºç¡€ä¸Šï¼Œä¹Ÿè¯·ä½ è·Ÿéšæˆ‘ï¼Œä»æ•°æ®æµçš„è§†è§’é‡æ–°æ¢³ç†æ—©åœ¨ç¬¬5èŠ‚è¯¾å°±åŸºæœ¬å®šå‹çš„ <code>oh-my-kanban</code> å„ç»„ä»¶ï¼Œè¿›è¡Œä¸€æ¬¡<strong>å¤§é‡æ„ï¼šå¯¹ç»„ä»¶æ–‡ä»¶è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶æ ¹æ®éœ€è¦è°ƒæ•´å„ç»„ä»¶çš„propså’Œstate</strong>ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿä¼šå­¦ä¹ Reactå¦ä¸€ä¸ªä¸æ•°æ®æµç›¸å…³çš„æ¦‚å¿µâ€”â€”contextã€‚</p><!-- [[[read_end]]] --><p>é¡ºå¸¦é¢„å‘Šä¸€ä¸‹ï¼Œåœ¨ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä¼šå‚ç…§<code>oh-my-kanban</code> é‡æ„å‰åçš„ç»„ä»¶å±‚æ¬¡ç»“æ„ï¼Œè¿›ä¸€æ­¥è®²è§£å¦‚ä½•ç”¨é¢å‘æ¥å£ç¼–ç¨‹çš„æ€è·¯æ¥è®¾è®¡å¼€å‘Reactç»„ä»¶å’Œåº”ç”¨ã€‚</p><p>ä¸‹é¢å¼€å§‹è¿™èŠ‚è¯¾çš„å†…å®¹ã€‚</p><h2>ä»€ä¹ˆæ˜¯æ•°æ®æµï¼Ÿ</h2><p>æåˆ°æ•°æ®æµï¼Œè¦å…ˆæä¸€ä¸‹<strong>å‡½æ•°å“åº”å¼ç¼–ç¨‹</strong>ï¼ˆFunctional Reactive Programmingï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œå‡½æ•°å“åº”å¼ç¼–ç¨‹æ˜¯ä¸€ç§åˆ©ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„éƒ¨ä»¶è¿›è¡Œå“åº”å¼ç¼–ç¨‹çš„ç¼–ç¨‹èŒƒå¼ã€‚</p><p><strong>æ•°æ®æµ</strong>ï¼ˆData Flowï¼‰åˆ™æ˜¯å…¶ä¸­å“åº”å¼ç¼–ç¨‹çš„é‡è¦æ¦‚å¿µï¼Œå“åº”å¼ç¼–ç¨‹å°†ç¨‹åºé€»è¾‘å»ºæ¨¡æˆä¸ºåœ¨<strong>è¿ç®—ï¼ˆOperationï¼‰ä¹‹é—´æµåŠ¨çš„æ•°æ®åŠå…¶å˜åŒ–</strong>ã€‚</p><p>ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œå¯¹äº <code>b = a * 2</code> è¿™ä¸ªèµ‹å€¼è¯­å¥ï¼Œå¦‚æœæŠŠ <code>a * 2</code> å®šä¹‰ä¸ºä¸€ä¸ªè¿ç®—ï¼Œé‚£ä¹ˆå¦‚æœæµåŠ¨è¿›æ¥çš„ <code>a</code> å‘ç”Ÿäº†æ”¹å˜ï¼Œåˆ™ <code>b</code> ä¼šè‡ªåŠ¨å“åº”å‰è€…çš„å˜åŒ–ã€‚</p><p>ä¼°è®¡ä½ çœ‹åˆ°è¿™ä¸ªä¾‹å­ï¼Œé©¬ä¸Šå°±ä¼šæƒ³åˆ°Reactçš„è®¾è®¡å“²å­¦ <code>UI = f(state)</code> ï¼Œæ¯”å¦‚ä¸€ä¸ªå‡½æ•°ç»„ä»¶ <code>({ a }) =&gt; (&lt;div&gt;{ a * 2 }&lt;/div&gt;)</code> ï¼Œåªè¦propå±æ€§ <code>a</code> å‘ç”Ÿå˜åŒ–ï¼Œç»„ä»¶æ¸²æŸ“çš„ <code>&lt;div&gt;</code> åŒ…å«çš„å†…å®¹å°±ä¼šè‡ªåŠ¨å˜åŒ–ã€‚</p><p>å½“ç„¶ï¼Œä¸€ä¸ªç¨‹åºå¾€å¾€ä¼šåŒ…å«å¤šä¸ªè¿ç®—ï¼Œå½“æ•°æ®æµç»è¿‡å¤šä¸ªè¿ç®—æ—¶ï¼Œæ¯ä¸ªè¿ç®—åªè´Ÿè´£è‡ªå·±çš„éƒ¨åˆ†ï¼Œè¿™æ ·çš„æ•°æ®å¤„ç†è¿‡ç¨‹æœ‰ç‚¹åƒæ˜¯å·¥å‚æµæ°´çº¿ã€‚é‚£ç±»æ¯”åˆ°Reactåº”ç”¨å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“Reactçš„å¼€å‘å•å…ƒæ˜¯ç»„ä»¶ï¼Œå¤šä¸ªç»„ä»¶åœ¨è¿è¡Œæ—¶ä¼šå½¢æˆä¸€é¢—ç»„ä»¶æ ‘ï¼Œæ ¹ç»„ä»¶ä¼šæ²¿ç€å­ç»„ä»¶æ ‘ä¼ é€’æ•°æ®ã€‚å¯¹äºä»»æ„ä¸€æ¡ä»æ ¹ç»„ä»¶åˆ°å¶å­èŠ‚ç‚¹ç»„ä»¶çš„è·¯å¾„ï¼Œéƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€æ¡å·¥å‚æµæ°´çº¿ã€‚è€Œæ¯ä¸ªç»„ä»¶éƒ½æ˜¯æµæ°´çº¿ä¸Šçš„ä¸€é“å·¥åºï¼Œå¯¹æµè¿‡çš„æ•°æ®å„å–æ‰€éœ€ï¼Œå®Œæˆæœ¬èŒå·¥ä½œã€‚</p><h2>Reactçš„æ•°æ®æµåŒ…å«å“ªäº›æ•°æ®ï¼Ÿ</h2><p>Reactçš„æ•°æ®æµä¸»è¦åŒ…å«äº†ä¸‰ç§æ•°æ®ï¼š<strong>å±æ€§propsã€çŠ¶æ€stateå’Œä¸Šä¸‹æ–‡context</strong>ã€‚è¿™ä¸‰ä¸ªæ¦‚å¿µåœ¨Reactä¸­ç®—æ˜¯ä¸“æœ‰åè¯ï¼Œä¸ºé¿å…æ­§ä¹‰ï¼Œæˆ‘åœ¨æœ¬è¯¾ç¨‹ä¸­å°†æ²¿ç”¨å®ƒä»¬çš„è‹±æ–‡åç§°ã€‚æˆ‘ä»¬å…ˆæ¥ç³»ç»Ÿåœ°çœ‹ä¸€ä¸‹propsã€‚</p><h3>Props</h3><p>è‡ªå®šä¹‰Reactç»„ä»¶æ¥å—ä¸€ç»„è¾“å…¥å‚æ•°ï¼Œç”¨äºæ”¹å˜ç»„ä»¶è¿è¡Œæ—¶çš„è¡Œä¸ºï¼Œè¿™ç»„å‚æ•°å°±æ˜¯propsã€‚</p><p>åœ¨å£°æ˜å‡½æ•°ç»„ä»¶æ—¶ï¼Œå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯propsã€‚ä»¥ä¸‹ä¸¤ç§å†™æ³•éƒ½å¾ˆå¸¸è§ï¼š</p><ul>\n<li>ä¸€ä¸ªæ˜¯åœ¨ç»„ä»¶å†…éƒ¨è¯»å–propså¯¹è±¡çš„å±æ€§ï¼›</li>\n<li>å¦ä¸€ä¸ªæ˜¯é€šè¿‡ES6çš„è§£æ„èµ‹å€¼è¯­æ³•ï¼ˆDestructuring Assignmentï¼‰å±•å¼€å‡½æ•°å‚æ•°ï¼Œç›´æ¥åœ¨ç»„ä»¶å†…éƒ¨è¯»å–å•ä¸ªpropå˜é‡ã€‚</li>\n</ul><p>è¿™ä¸¤ç§å†™æ³•æœ¬è´¨ä¸Šéƒ½æ˜¯ç›¸åŒçš„ï¼š</p><pre><code class=\"language-javascript\">// 1\nfunction MyComponent(props) {\n  return (\n    &lt;ul&gt;\n      &lt;li&gt;{props.prop1}&lt;/li&gt;\n      &lt;li&gt;{props.prop2}&lt;/li&gt;\n    &lt;/ul&gt;\n  );\n}\n\n// 2\nfunction MyComponent({ prop1, prop2 }) {\n  return (\n    &lt;ul&gt;\n      &lt;li&gt;{prop1}&lt;/li&gt;\n      &lt;li&gt;{prop2}&lt;/li&gt;\n    &lt;/ul&gt;\n  );\n}\n</code></pre><p>ç¬¬äºŒç§å†™æ³•æœ‰äº›å¾ˆæ–¹ä¾¿çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ä¸ºpropè®¾ç½®é»˜è®¤å€¼ï¼š</p><pre><code class=\"language-javascript\">function MyComponent({ prop1, prop2, optionalProp = 'default' }) {\n</code></pre><p>ä»¥åŠåˆ©ç”¨ES2018çš„Rest Propertiesè¯­æ³•ï¼Œå°†è§£æ„å‰©ä½™å±æ€§èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œä¾¿äºé€ä¼ ç»™å­å…ƒç´ ï¼š</p><pre><code class=\"language-javascript\">function MyComponent({ prop1, prop2, ...restProps }) {\n  return (\n    &lt;ul {...restProps}&gt;\n      &lt;li&gt;{prop1}&lt;/li&gt;\n      &lt;li&gt;{prop2}&lt;/li&gt;\n    &lt;/ul&gt;\n  );\n}\n</code></pre><p>é¡ºå¸¦ä¸€æï¼Œç±»ç»„ä»¶çš„propså¯ä»¥é€šè¿‡ <code>this.props</code> è¯»å–ï¼š</p><pre><code class=\"language-javascript\">class MyLegacyClassComponent extends React.Component {\n  render() {\n    return (\n      &lt;ul&gt;\n        &lt;li&gt;{this.props.prop1}&lt;/li&gt;\n        &lt;li&gt;{this.props.prop2}&lt;/li&gt;\n      &lt;/ul&gt;\n    );\n  }\n}\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ— è®ºæ˜¯å“ªç§å†™æ³•ï¼Œpropséƒ½æ˜¯<strong>ä¸å¯å˜</strong>çš„ï¼Œä¸èƒ½åœ¨ç»„ä»¶å†…æ”¹å†™ä»å¤–é¢ä¼ è¿›æ¥çš„propsã€‚</p><p>ä¸Šé¢äº†è§£äº†å¦‚ä½•å£°æ˜propsï¼Œå†çœ‹çœ‹å¦‚ä½•èµ‹å€¼ã€‚åœ¨å…¶ä»–ç»„ä»¶ä¸­ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡JSXè¯­æ³•ä¸ºå­ç»„ä»¶çš„propsèµ‹å€¼ï¼š</p><pre><code class=\"language-javascript\">const ParentComponent = () =&gt; (\n  &lt;MyComponent prop1=\"æ–‡æœ¬\" prop2={123} booleanProp={false}\n    onClick={(evt) =&gt; {console.log('clicked')}} /&gt;\n);\n</code></pre><p>å½“propå€¼ä¸ºå¸ƒå°”å€¼çš„ <code>true</code> æ—¶ï¼ŒJSXå¯ä»¥ç®€å†™æˆ  <code>&lt;MyComponent booleanProp /&gt;</code> ã€‚æ­¤å¤–è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„propsï¼šä»£è¡¨å­å…ƒç´ çš„<code>children</code>ã€‚</p><p>è¯·å›å¿†ä¸€ä¸‹ä½ åœ¨ç¬¬5èŠ‚è¯¾æ‹†åˆ† <code>oh-my-kanban</code> é¡¹ç›®ç»„ä»¶æ—¶ï¼Œåœ¨ <code>&lt;KanbanBoard&gt;</code> ç»„ä»¶çš„JSXé—­åˆæ ‡ç­¾ä¸­åŠ å…¥å­å…ƒç´  <code>&lt;KanbanColumn&gt;</code> ï¼Œå­å…ƒç´ ä¼šè¢«èµ‹å€¼ç»™è¯¥ç»„ä»¶propsé‡Œçš„ <code>children</code> å±æ€§ï¼Œåœ¨<code>&lt;KanbanBoard&gt;</code> ç»„ä»¶çš„å‡½æ•°å†…éƒ¨å³å¯ä½¿ç”¨è¿™ä¸ª <code>props.children</code>ã€‚<code>&lt;KanbanColumn&gt;</code> ä¸ <code>&lt;KanbanCard&gt;</code> ä¹‹é—´ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚</p><p>ä»¥åŠä¸¤ä¸ªå½¢å¼ä¸Šåƒpropsï¼Œä½†å¹¶ä¸æ˜¯propsçš„å±æ€§ï¼š</p><ul>\n<li>å½¢æˆåˆ—è¡¨çš„å­å…ƒç´ çš„ <code>key</code> ï¼Œæˆ‘ä»¬åœ¨ç¬¬6èŠ‚è¯¾å­¦ä¹ è¿‡ã€‚</li>\n<li>å¼•ç”¨DOMå…ƒç´ çš„ <code>ref</code> ï¼Œæˆ‘ä»¬åœ¨ç¬¬9èŠ‚è¯¾å­¦ä¹ è¿‡ã€‚</li>\n</ul><p><code>key</code> å’Œ <code>ref</code> çš„ç‰¹æ®Šä¹‹å¤„è¿˜åœ¨äºï¼Œå½“å­å…ƒç´ æ˜¯è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œåœ¨å­ç»„ä»¶å†…éƒ¨æ˜¯ä¸èƒ½è¯»å–ä¼ ç»™å®ƒçš„ <code>key</code> æˆ– <code>ref</code> å€¼çš„ï¼Œå¦‚æœå°è¯•è¯»å–ï¼ŒReactåˆ™ä¼šåœ¨æ§åˆ¶å°æç¤ºï¼Œä¹Ÿå°±æ˜¯ <code>Warning: KanbanCard: </code>key<code>is not a prop. Trying to access it will result in</code>undefined<code> being returned</code>ï¼›å¦‚æœç¡®å®éœ€è¦åœ¨å­ç»„ä»¶ä¸­è®¿é—® <code>key</code> æˆ– <code>ref</code> çš„å€¼ï¼Œå°±å¾—ç”¨å¦ä¸€ä¸ªé¢å¤–çš„propä¼ è¿›æ¥ã€‚</p><p>è¯´å›æ•°æ®æµï¼Œ<strong>propsçš„æ•°æ®æµå‘æ˜¯å•å‘çš„ï¼Œåªèƒ½ä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶</strong>ï¼Œè€Œä¸èƒ½ä»å­ç»„ä»¶æµå›çˆ¶ç»„ä»¶ï¼Œä¹Ÿä¸èƒ½ä»å½“å‰ç»„ä»¶æµå‘å¹³çº§ç»„ä»¶ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/b0/7babcd38e678fa204a0afb9b423a91b0.jpg?wh=1142x687\" alt=\"\"></p><h3>State</h3><p>åœ¨propsä¹‹å¤–ï¼Œç»„ä»¶ä¹Ÿå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ•°æ®ã€‚å¯¹äºä¸€ä¸ªå‡½æ•°è€Œè¨€ï¼Œâ€œè‡ªå·±çš„æ•°æ®â€ä¸€èˆ¬æ˜¯æŒ‡å‡½æ•°å†…å£°æ˜çš„å˜é‡ã€‚</p><p>è€Œå¯¹ä¸€ä¸ªå‡½æ•°ç»„ä»¶æ¥è¯´ï¼Œå› ä¸ºæ¯æ¬¡æ¸²æŸ“å‡½æ•°ä½“éƒ½ä¼šé‡æ–°æ‰§è¡Œï¼Œå‡½æ•°ä½“å†…å˜é‡ä¹Ÿä¼šè¢«é‡æ–°å£°æ˜ï¼Œå¦‚æœéœ€è¦ç»„ä»¶åœ¨å®ƒçš„ç”Ÿå‘½å‘¨æœŸæœŸé—´æ‹¥æœ‰ä¸€ä¸ªâ€œç¨³å®šå­˜åœ¨â€çš„æ•°æ®ï¼Œé‚£å°±éœ€è¦ä¸ºç»„ä»¶å¼•å…¥ä¸€ä¸ªä¸“æœ‰çš„æ¦‚å¿µï¼Œå³stateã€‚</p><p>åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨stateï¼Œéœ€è¦è°ƒç”¨ <code>useState</code> / <code>useReducer</code>  Hooksã€‚è¿™ä¸¤ä¸ªHooksåœ¨ç¬¬9èŠ‚è¯¾åˆšå­¦ä¹ è¿‡ï¼Œåœ¨æ­¤åªæ”¾ä¸€æ®µä¾‹å­ä»£ç ï¼Œä¸å†èµ˜è¿°ã€‚</p><pre><code class=\"language-javascript\">function MyComponent() {\n  const [state1, setState1] = useState('æ–‡æœ¬');\n  const [state2, setState2] = useState(123);\n  const handleClick = () =&gt; {\n    setState1('æ›´æ–°æ–‡æœ¬');\n    setState2(456);\n  };\n  return (\n    &lt;ul&gt;\n      &lt;li&gt;{state1}&lt;/li&gt;\n      &lt;li&gt;{state2}&lt;/li&gt;\n      &lt;li&gt;&lt;button onClick={handleClick}&gt;æ›´æ–°state&lt;/button&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n  );\n}\n</code></pre><p>å§‘ä¸”æä¸€ä¸‹ç±»ç»„ä»¶çš„stateï¼Œåœ¨ç±»ç»„ä»¶å†…å¯ä»¥é€šè¿‡ <code>this.state</code> è¯»å–stateï¼Œé€šè¿‡ <code>this.setState</code> ä¿®æ”¹stateï¼Œå”¯ä¸€ä¾‹å¤–æ˜¯åœ¨ç±»ç»„ä»¶æ„é€ å‡½æ•°é‡Œï¼Œå¯ä»¥é€šè¿‡èµ‹å€¼ <code>this.state</code> çš„æ–¹å¼è®¾ç½®åˆå§‹å€¼ï¼Œä¸Hooksçš„stateä¸åŒï¼Œç±»ç»„ä»¶çš„stateæ€»æ˜¯ä»¥å¯¹è±¡å½¢å¼å­˜åœ¨ï¼š</p><pre><code class=\"language-javascript\">class MyLegacyClassComponent extends React.Component {\n  constructor() {\n    this.state = { state1: 'æ–‡æœ¬', state2: 123 };\n  }\n  \n  handleClick = () =&gt; {\n    this.setState({ state1: 'æ›´æ–°æ–‡æœ¬', state2: 456 })\n  }\n\n  render() {\n    return (\n      &lt;ul&gt;\n        &lt;li&gt;{this.state.state1}&lt;/li&gt;\n        &lt;li&gt;{this.state.state2}&lt;/li&gt;\n        &lt;li&gt;&lt;button onClick={this.handleClick}&gt;æ›´æ–°state&lt;/button&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n    );\n  }\n}\n</code></pre><p>ä¸è¿‡éœ€è¦åå¤å¼ºè°ƒçš„æ˜¯ï¼Œstateä¸propsä¸€æ ·ï¼Œä¹Ÿæ˜¯<strong>ä¸å¯å˜</strong>çš„ã€‚éœ€è¦ä¿®æ”¹stateæ—¶ï¼Œä¸èƒ½ç›´æ¥ç»™stateå˜é‡èµ‹å€¼ï¼Œè€Œæ˜¯å¿…é¡»è°ƒç”¨stateæ›´æ–°å‡½æ•°ï¼Œå³ <code>setXxx</code> / <code>dispatch</code> æˆ– <code>this.setState</code> ã€‚</p><p>å½“ç»„ä»¶çš„stateå‘ç”Ÿæ”¹å˜æ—¶ï¼Œç»„ä»¶å°†é‡æ–°æ¸²æŸ“ã€‚é‚£ä»€ä¹ˆæ‰ç®—æ˜¯æ”¹å˜å‘¢ï¼Ÿä»åº•å±‚å®ç°æ¥çœ‹ï¼ŒReactæ¡†æ¶æ˜¯ç”¨ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is\">Object.is()</a> æ¥åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ä¸åŒçš„ã€‚å°¤å…¶æ³¨æ„ï¼Œå½“æ–°æ—§å€¼éƒ½æ˜¯å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°æ—¶ï¼Œåˆ¤æ–­ä¾æ®æ˜¯å®ƒä»¬çš„å€¼å¼•ç”¨æ˜¯å¦ä¸åŒã€‚</p><p>å¯¹åŒä¸€ä¸ªå¯¹è±¡å±æ€§çš„ä¿®æ”¹ä¸ä¼šæ”¹å˜å¯¹è±¡çš„å€¼å¼•ç”¨ï¼Œå¯¹åŒä¸€ä¸ªæ•°ç»„æˆå‘˜çš„ä¿®æ”¹ä¹Ÿä¸ä¼šæ”¹å˜æ•°ç»„çš„å€¼å¼•ç”¨ï¼Œåœ¨Reactä¸­éƒ½ä¸è®¤ä¸ºæ˜¯å˜åŒ–ã€‚æ‰€ä»¥åœ¨æ›´æ–°è¿™ç±»stateæ—¶ï¼Œéœ€è¦æ–°å»ºå¯¹è±¡ã€æ•°ç»„ï¼š</p><pre><code class=\"language-javascript\">function MyComponent() {\n  const [obj, setObj] = useState({ a: 'æ–‡æœ¬', b: true });\n  const [arr, setArr] = useState([1, 2, 3]);\n  const handleClick = () =&gt; {\n    setObj({...obj, a: 'æ›´æ–°æ–‡æœ¬'}); // ...å¯¹è±¡å±•å¼€è¯­æ³•\n    setArr([...arr, 4, 5, 6]); // ...æ•°ç»„å±•å¼€è¯­æ³•\n  };\n  return (\n    &lt;ul&gt;\n      &lt;li&gt;{obj.a}&lt;/li&gt;\n      &lt;li&gt;{arr.join(',')}&lt;/li&gt;\n      &lt;li&gt;&lt;button onClick={handleClick}&gt;æ›´æ–°state&lt;/button&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n  );\n}\n</code></pre><p>è¿˜æœ‰è¦æ³¨æ„çš„å°±æ˜¯stateæ›´æ–°çš„<strong>å¼‚æ­¥æ€§</strong>å’Œ<strong>è‡ªåŠ¨æ‰¹å¤„ç†</strong>ã€‚å¦‚æœå°è±¡æœ‰äº›æ¨¡ç³Šäº†ï¼Œé‚£è¯·ä½ åŠ¡å¿…å¤ä¹ ä¸€ä¸‹ç¬¬9èŠ‚è¯¾çš„å†…å®¹ã€‚</p><p>å†æ¥çœ‹çœ‹stateçš„æ•°æ®æµå‘ï¼Œå½“è¯»å–å’Œæ›´æ”¹stateéƒ½å‘ç”Ÿåœ¨åŒä¸€ç»„ä»¶ä¸­æ—¶ï¼Œstateçš„æµåŠ¨ä»…é™äºå½“å‰ç»„ä»¶ä¹‹å†…ã€‚</p><p>å¦‚æœå¸Œæœ›ç”±å­ç»„ä»¶æˆ–åä»£ç»„ä»¶æ¥æ›´æ”¹stateï¼Œéœ€è¦å°†å¯¹åº”çš„stateæ›´æ–°å‡½æ•°åŒ…åœ¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œç„¶åå°†å‡½æ•°ä»¥propsæˆ–contextçš„æ–¹å¼ä¼ ç»™å­ç»„ä»¶æˆ–åä»£ç»„ä»¶ï¼Œç”±å®ƒä»¬æ¥å†³å®šè°ƒç”¨çš„æ—¶æœºå’Œå‚æ•°ã€‚å½“è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨ï¼Œstateè¢«æ›´æ–°ï¼Œå½“å‰ç»„ä»¶åˆ™ä¼šé‡æ–°ä¼ æŸ“ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥å¸®åŠ©ä½ ç†è§£ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/75/0b/7595dddd7a3164b7b6ce859b8bcc800b.jpg?wh=1142x759\" alt=\"\"></p><h3>Context</h3><p>â€œç»ˆäºâ€ï¼Œä½ ä¹Ÿè®¸ä¼šæ„Ÿå¹ï¼Œâ€œç»ˆäºè®²åˆ°contextäº†â€ã€‚Reactå¾ˆæ—©å°±å¼•å…¥äº†contextè¿™ä¸ªæ¦‚å¿µï¼Œå®ƒçš„APIä¹Ÿç»å†è¿‡æ–°è€ç‰ˆæœ¬çš„æ›´è¿­ï¼Œç”¨äºç»„ä»¶è·¨è¶Šå¤šä¸ªç»„ä»¶å±‚æ¬¡ç»“æ„ï¼Œå‘åä»£ç»„ä»¶ä¼ é€’å’Œå…±äº«â€œå…¨å±€â€æ•°æ®ã€‚</p><p>ä½¿ç”¨contextåˆ†ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol>\n<li>è°ƒç”¨ <code>React.createContext</code> æ–¹æ³•åˆ›å»º <code>Context</code> å¯¹è±¡ï¼Œå¦‚ <code>MyContext</code> ï¼š</li>\n</ol><pre><code class=\"language-javascript\">const MyContext = React.createContext('æ²¡è·¯ç”¨çš„åˆå§‹å€¼');\n</code></pre><ol start=\"2\">\n<li>åœ¨ç»„ä»¶JSXä¸­ä½¿ç”¨ <code>&lt;MyContext.Provider&gt;</code> ç»„ä»¶ï¼Œå®šä¹‰ <code>value</code> å€¼ï¼Œå¹¶å°†å­ç»„ä»¶å£°æ˜åœ¨å‰è€…çš„é—­åˆæ ‡ç­¾é‡Œï¼š</li>\n</ol><pre><code class=\"language-javascript\">function MyComponent() {\n  const [state1, setState1] = useState('æ–‡æœ¬');\n  const handleClick = () =&gt; {\n    setState1('æ›´æ–°æ–‡æœ¬');\n  };\n  return (\n    &lt;MyContext.Provider value={state1}&gt;\n      &lt;ul&gt;\n        &lt;MyChildComponent /&gt;\n        &lt;li&gt;&lt;button onClick={handleClick}&gt;æ›´æ–°state&lt;/button&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/MyContext.Provider&gt;\n  );\n}\n</code></pre><ol start=\"3\">\n<li>åœ¨å­ç»„ä»¶æˆ–åä»£ç»„ä»¶ä¸­ä½¿ç”¨ <code>useContext</code> Hookè·å– <code>MyContext</code> çš„å€¼ï¼Œè¿™ä¸ªç»„ä»¶å°±æˆä¸ºMyContextçš„æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰ï¼š</li>\n</ol><pre><code class=\"language-javascript\">function MyChildComponent() {\n  return (\n    &lt;MyGrandchildComponent /&gt;\n  );\n}\n\nfunction MyGrandchildComponent() {\n  const value = useContext(MyContext);\n  return (\n    &lt;li&gt;{value}&lt;/li&gt;\n  );\n}\n</code></pre><p>å…¶ä¸­<code>MyContext.Provider</code> æ˜¯å¯ä»¥åµŒå¥—ä½¿ç”¨çš„ã€‚<code>MyGrandchildComponent</code> ç»„ä»¶ä¼šå»åˆ°ç»„ä»¶æ ‘ï¼Œä»å®ƒçš„ç¥–å…ˆèŠ‚ç‚¹ä¸­æ‰¾åˆ°ç¦»å®ƒæœ€è¿‘çš„ <code>MyContext.Provider</code> å³ <code>MyComponent</code> ï¼Œè¯»å–åè€…çš„ <code>value</code> å€¼ï¼›å½“ <code>MyComponent</code> çš„ <code>state1</code> ï¼Œä¹Ÿå°±æ˜¯ <code>MyContext.Provider</code> çš„ <code>value</code> å€¼å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œä¼šé€šçŸ¥åˆ°å®ƒåä»£ç»„ä»¶ä¸­æ‰€æœ‰æ¶ˆè´¹è€…ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p><p>Context.Providerçš„valueå€¼ä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªå¯¹è±¡è¿›å»ï¼Œä½†è¦æ³¨æ„å†™æ³•ï¼Œé¿å…åœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶åå¤åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œæ¯”å¦‚åˆ©ç”¨stateæˆ– <code>useMemo</code> ï¼š</p><pre><code class=\"language-javascript\">// ä¸è¦è¿™æ ·å†™\nfunction MyComponent() {\n  const [state1, setState1] = useState('æ–‡æœ¬');\n  // ...\n  return (\n    &lt;MyContext.Provider value={{ key1: state1 }}&gt;\n      &lt;MyChildComponent /&gt;\n    &lt;/MyContext.Provider&gt;\n  );\n}\n\n// å¯ä»¥åˆ©ç”¨state\nfunction MyComponent() {\n  const [obj, setObj] = useState({ key1: 'æ–‡æœ¬' })\n  // ...\n  return (\n    &lt;MyContext.Provider value={obj}&gt;\n      &lt;MyChildComponent /&gt;\n    &lt;/MyContext.Provider&gt;\n  );\n}\n\n// ä¹Ÿå¯ä»¥åˆ©ç”¨useMemo\nfunction MyComponent() {\n  const [state1, setState1] = useState('æ–‡æœ¬');\n  const obj = useMemo(() =&gt; ({ key1: state1 }), [state1]);\n  // ...\n  return (\n    &lt;MyContext.Provider value={obj}&gt;\n      &lt;MyChildComponent /&gt;\n    &lt;/MyContext.Provider&gt;\n  );\n}\n</code></pre><p>ä»æ•°æ®æµçš„è§’åº¦çœ‹ï¼Œ<strong>contextçš„æ•°æ®æµå‘ä¹Ÿæ˜¯å•å‘çš„ï¼Œåªèƒ½ä»å£°æ˜äº†</strong> <code>Context.Provider</code> <strong>çš„å½“å‰ç»„ä»¶ä¼ é€’ç»™å®ƒçš„å­ç»„ä»¶æ ‘</strong>ï¼Œå³å­ç»„ä»¶å’Œåä»£ç»„ä»¶ã€‚è€Œä¸èƒ½å‘çˆ¶ç»„ä»¶æˆ–ç¥–å…ˆç»„ä»¶ä¼ é€’ï¼Œä¹Ÿä¸èƒ½å‘å½“å‰å­ç»„ä»¶æ ‘ä¹‹å¤–çš„å…¶ä»–åˆ†æ”¯ç»„ä»¶æ ‘ä¼ é€’ã€‚æ­£å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/1f/cc/1fec023c27077010ef7e61dd1960e6cc.jpg?wh=1000x563\" alt=\"\"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä»‹ç»å®Œäº†propsã€stateå’Œcontextè¿™ä¸‰ä¸ªæ¦‚å¿µã€‚å…¶ä¸­propså’Œstateï¼Œæˆ‘ä»¬å·²ç»åœ¨ <code>oh-my-kanban</code> ä¸­åšäº†ä¸°å¯Œçš„å®è·µï¼Œè‡³äºcontextï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾ä¼šåˆ©ç”¨å®ƒä¸ºçœ‹æ¿åŠ å…¥ç®¡ç†å‘˜åŠŸèƒ½ã€‚æ¥ä¸‹æ¥ï¼Œä»ç„¶è®©æˆ‘ä»¬å°†æ³¨æ„åŠ›é›†ä¸­åœ¨æ•°æ®æµä¸Šã€‚</p><h2>Reactå•å‘æ•°æ®æµ</h2><p>åˆšæ‰ä»‹ç»çš„propsã€stateå’Œcontextä¸‰ç§æ•°æ®ï¼Œå…±åŒç»„æˆäº†Reactç»„ä»¶çš„æ•°æ®æµã€‚æ—©åœ¨ç¬¬5èŠ‚è¯¾æˆ‘ä»¬å°±å·²ç»å­¦ä¹ è¿‡ï¼ŒReactæ˜¯ä¸€ç§å£°æ˜å¼çš„å‰ç«¯æ¡†æ¶ï¼Œåœ¨Reactçš„æ•°æ®æµä¸Šä¹Ÿä½“ç°äº†è¿™ä¸€ç‚¹ã€‚åœ¨å…¸å‹åœºæ™¯ä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡<strong>å£°æ˜è¿™ä¸‰ç§æ•°æ®æ¥è®¾è®¡Reactåº”ç”¨çš„æ•°æ®æµï¼Œè¿›è€Œæ§åˆ¶åº”ç”¨çš„äº¤äº’å’Œé€»è¾‘</strong>ã€‚</p><p>åªæœ‰è¿™ä¸‰ç§æ•°æ®çš„å˜æ›´ä¼šè‡ªåŠ¨é€šçŸ¥åˆ°Reactæ¡†æ¶ï¼Œè§¦å‘ç»„ä»¶å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚å½“ä½ çš„æ•°æ®æµä¸­æ··å…¥äº†ä¸å±äºå®ƒä»¬å…¶ä¸­ä»»æ„ä¸€ç§çš„æ•°æ®ï¼Œå°±è¦å°å¿ƒï¼Œè¿™ç§<strong>è·³å‡ºâ€œä¸‰ç•Œä¹‹å¤–â€çš„æ•°æ®å¾ˆæœ‰å¯èƒ½å¸¦æ¥Bug</strong>ï¼Œæ¯”å¦‚æ•°æ®æ”¹å˜äº†ä½†ç»„ä»¶å¹¶ä¸é‡æ–°æ¸²æŸ“ã€‚</p><p>è¿™ç§Bugå…¶å®å¹¶ä¸éš¾å®šä½ï¼Œä½†å½“é¡¹ç›®ä»£ç æ¯”è¾ƒå¤šï¼Œé€»è¾‘å˜å¾—å¤æ‚æ—¶ï¼Œä½ è¿˜æ˜¯æœ‰å¯èƒ½ä¼šææ··æ•°æ®çš„æ¥æºï¼ŒèŠ±ä¸å°‘æ—¶é—´å»Debugã€‚é¡ºä¾¿æä¸€ä¸‹ï¼Œâ€œä¸‰ç•Œä¹‹å¤–â€è¿™ä¸ªè¯´æ³•æ¥è‡ªäºæˆ‘çš„ä¸€ä½åŒäº‹ï¼Œå½“æ—¶å¥¹æ­£æ˜¯é‡åˆ°äº†è¿™ç±»Bugï¼Œæˆ‘ä»¬ä¸€èµ·è°ƒè¯•äº†å¥½ä¹…æ‰æç„¶å¤§æ‚Ÿã€‚</p><p>è™½ç„¶è¯´propsã€stateå’Œcontextæ˜¯ä¸åŒçš„æ¦‚å¿µï¼Œä½†ä»ä¸€æ£µç»„ä»¶æ ‘çš„å¤šä¸ªç»„ä»¶æ¥çœ‹ï¼ŒåŒä¸€æ¡æ•°æ®åœ¨å¼•ç”¨ä¸å˜çš„å‰æä¸‹ï¼Œåœ¨ä¼ é€’è¿‡ç¨‹ä¸­å´å¯ä»¥å…·æœ‰å¤šé‡èº«ä»½ã€‚</p><p>æ¯”å¦‚ï¼Œä¸€æ¡æ•°æ®æœ€åˆæ¥è‡ªäºç»„ä»¶Açš„stateï¼Œé€šè¿‡propsä¼ é€’ç»™å­ç»„ä»¶Båå°±æˆä¸ºäº†ç»„ä»¶Bçš„propã€‚å†æ¯”å¦‚ï¼Œå¦ä¸€æ¡æ•°æ®æ¥è‡ªäºç»„ä»¶Açš„stateï¼Œé€šè¿‡åœ¨Aä¸­å£°æ˜contextä¼ ç»™äº†å­ç»„ä»¶æ ‘ï¼Œå­ç»„ä»¶Bçš„å­ç»„ä»¶Cæ¶ˆè´¹äº†è¿™ä¸ªcontextå€¼ã€‚</p><p>ä»ä¸‰è€…åˆ†åˆ«çš„æµå‘å¯çŸ¥ï¼ŒReactæ•´ä½“çš„æ•°æ®æµä¹Ÿæ˜¯å•å‘çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/02/e1/0221e1ce4ae5e2afc0650eb419ac27e1.jpg?wh=1142x642\" alt=\"\"></p><h2>åŸºäºæ•°æ®æµå†åšä¸€æ¬¡ç»„ä»¶æ‹†åˆ†</h2><p>å¥½äº†ï¼Œè®²å®Œäº†Reactæ•°æ®æµçš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ¥åˆ°äº†çº¦å®šå¥½çš„ <code>oh-my-kanban</code> â€œ<strong>å¤§é‡æ„</strong>â€ã€‚</p><p>é¦–å…ˆå¼ºè°ƒä¸€ç‚¹ï¼Œå¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬<strong>ä¸åº”è¯¥ä¸ºäº†é‡æ„è€Œé‡æ„ï¼Œé™¤éæˆ‘ä»¬å¾ˆæ¸…æ¥šé‡æ„çš„ç›®æ ‡èŒƒå›´ã€é¢„æœŸæ”¶ç›Šã€æˆæœ¬å’Œå­˜åœ¨çš„é£é™©</strong>ã€‚</p><p>è¿™æ¬¡çš„é‡æ„å½“ç„¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯ä¸ºäº†æ•™å­¦ç›®çš„ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯ä¼šåˆ—ï¼ˆxiÄï¼‰ä¸¾ï¼ˆbiÄnï¼‰ä¸€äº›é‡æ„<code>oh-my-kanban</code> çš„åŠ¨æœºå’Œç›®æ ‡ï¼š</p><ol>\n<li>ç›®å‰300å¤šè¡Œæºä»£ç é›†ä¸­åœ¨ <code>src/App.js</code> ä¸­ï¼Œå¸Œæœ›é‡æ„åèƒ½<strong>åˆ†æ•£</strong>åˆ°å¤šä¸ªæºæ–‡ä»¶ä¸­ï¼›</li>\n<li>ç›®å‰ä¸»è¦ä¸šåŠ¡é€»è¾‘éƒ½é›†ä¸­åœ¨ <code>App</code> ç»„ä»¶ä¸Šï¼Œå¸Œæœ›é‡æ„åèƒ½<strong>åˆ†æ‘Š</strong>åˆ°å…¶ä»–ç»„ä»¶ï¼›</li>\n<li>å°†CSS-in-JSæ ·å¼ä»£ç ç›´æ¥å†™åœ¨JSXæ ‡ç­¾ä¸Šæœ‰ç‚¹å–§å®¾å¤ºä¸»ï¼Œå¸Œæœ›é‡æ„åèƒ½<strong>ç‹¬ç«‹</strong>äº›ã€‚</li>\n</ol><p>é’ˆå¯¹ç¬¬äºŒä¸ªç›®æ ‡ï¼Œåœ¨é‡æ„è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¼šé‡åˆ°ä¸€ç³»åˆ—ä¸æ•°æ®æµç›¸å…³çš„å†³ç­–ã€‚è¿™äº›é‡æ„æ­¥éª¤å’Œå†³ç­–æ€è·¯æˆ‘ä»¬ä¼šç•™åˆ°ä¸‹èŠ‚è¯¾ï¼Œè€Œè¿™èŠ‚è¯¾æˆ‘ä»¬ä¼šå…ˆå®Œæˆç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªé‡æ„ç›®æ ‡ï¼Œä¸ºä¸‹èŠ‚è¯¾çš„é‡æ„å·¥ä½œåšå¥½å……åˆ†å‡†å¤‡ã€‚</p><p>å¥½çš„ï¼Œæˆ‘ä»¬å¼€å§‹é‡æ„ã€‚è½¦é€Ÿä¼šæ¯”è¾ƒå¿«ï¼Œå¸Œæœ›ä½ èƒ½è·Ÿç´§ã€‚</p><h2>é‡æ„ç¬¬ä¸€æ­¥ï¼šæŠ½å–ç»„ä»¶åˆ°ç‹¬ç«‹æ–‡ä»¶</h2><p>æˆ‘ä»¬å°†åˆ©ç”¨VSCodeçš„é‡æ„åŠŸèƒ½æ¥å‡å°‘é‡æ„çš„å·¥ä½œé‡ã€‚åœ¨ <code>src/App.js</code> ä¸­ï¼Œå…‰æ ‡é€‰ä¸­ <code>KanbanBoard</code> ç»„ä»¶çš„å…¨éƒ¨ä»£ç ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d1/yy/d1b7639a24f6cd8f549d069f614c57yy.png?wh=1300x800\" alt=\"å›¾ç‰‡\"></p><p>æ¥ç€ï¼ŒæŒ‰å¿«æ·é”® <code>âŒƒâ‡§R</code> æˆ–å³é”®æ‰“å¼€é‡æ„èœå•ï¼Œé€‰æ‹©â€œç§»åŠ¨åˆ°æ–°æ–‡ä»¶â€ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/08/8c9c465faa88069eec252e8e80397808.png?wh=1300x960\" alt=\"å›¾ç‰‡\"></p><p>æ­¤æ—¶ï¼ŒVSCodeä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ <code>src/KanbanBoard.js</code> ï¼Œå°†è¿™æ®µä»£ç ç§»è¿‡å»ï¼Œå¹¶åœ¨ <code>src/App.js</code> ä¸­åŠ å…¥ä¸€è¡Œ <code>import</code> è¯­å¥å¯¼å…¥ <code>KanbanBoard</code> ç»„ä»¶ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/09/1e/0992a59f59c75b87c8020cffa73bd81e.png?wh=1920x1004\" alt=\"å›¾ç‰‡\"></p><p>æ ¹æ®ç¤¾åŒºå¸¸è§çš„ä»£ç çº¦å®šï¼ˆConventionï¼‰ï¼Œæˆ‘ä»¬å¸Œæœ›ä¸æ–‡ä»¶ååŒåçš„ç»„ä»¶æ˜¯è¿™ä¸ªæ–‡ä»¶çš„é»˜è®¤å¯¼å‡ºé¡¹ã€‚è®©æˆ‘ä»¬å†åšä¸¤ä¸ªé‡æ„æ“ä½œã€‚é¦–å…ˆé€‰ä¸­ <code>KanbanBoard</code> å˜é‡åï¼Œæ‰“å¼€é‡æ„èœå•ï¼Œé€‰æ‹©â€œè½¬æ¢ä¸ºå‘½åå‡½æ•°â€ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç»„ä»¶åœ¨Reactå¼€å‘è€…å·¥å…·ä¸­æœ‰æ˜¾ç¤ºåç§°ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/48/8e/483deba71864a263b4b8fae16ff2448e.png?wh=1300x900\" alt=\"å›¾ç‰‡\"></p><p>ç„¶åé©¬ä¸Šå¯¹è¿™ä¸ªå‘½åå‡½æ•°å†åšä¸€æ¬¡é‡æ„ï¼Œâ€œå°†å‘½åå¯¼å‡ºé¡¹è½¬æ¢ä¸ºé»˜è®¤å¯¼å‡ºé¡¹â€ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/58/eb/586bdd3830780aa713edce1739ea4beb.png?wh=1300x800\" alt=\"å›¾ç‰‡\"></p><p>å¯ä»¥å›å¤´çœ‹ä¸€ä¸‹ <code>src/App.js</code> ï¼Œå¯¼å…¥è¯­å¥ä¹Ÿè‡ªåŠ¨æ›´æ–°äº†ã€‚ç»§ç»­é€‰ä¸­csså±æ€§å†…çš„æ‰€æœ‰å†…å®¹ï¼Œæ‰“å¼€é‡æ„èœå•ï¼Œé€‰æ‹©â€œæŠ½å–ä¸ºæ¨¡å—èŒƒå›´çš„å¸¸é‡â€ï¼Œå–ä¸ªå¥½å¬çš„å˜é‡åï¼ˆå…³äºå¦‚ä½•èµ·å¥½å˜é‡åï¼Œå»ºè®®å‚è€ƒMartin Fowlerå¤§ç¥çš„ã€Šé‡æ„ã€‹ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/06/af/0606f908e2e4c307af7ce8aec3afe4af.png?wh=1300x800\" alt=\"å›¾ç‰‡\"></p><p>ç¨å¾®ä¿®æ­£ä¸€ä¸‹ä»£ç ç¼©è¿›ï¼Œ<code>src/KanbanBoard.js</code> ç›®å‰çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-javascript\">import React from 'react';\nimport { css } from '@emotion/react';\n\nconst kanbanBoardStyles = css`\n&nbsp; flex: 10;\n&nbsp; display: flex;\n&nbsp; flex-direction: row;\n&nbsp; gap: 1rem;\n&nbsp; margin: 0 1rem 1rem;\n`;\n\nexport default function KanbanBoard({ children }) {\n&nbsp; return (\n&nbsp; &nbsp; &lt;main css={kanbanBoardStyles}&gt;{children}&lt;/main&gt;\n&nbsp; );\n}\n</code></pre><p>æ­å–œä½ æˆåŠŸæ‹†åˆ†å‡ºæ¥ç¬¬ä¸€ä¸ªç‹¬ç«‹ç»„ä»¶JSï¼Œä»£ç çœ‹ç€å¾ˆæ¸…çˆ½ï¼è·‘ <code>npm start</code> éªŒè¯ä¸€ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/db/83/db1906cc8912681b0e5ef1f06f55c383.png?wh=1920x1030\" alt=\"å›¾ç‰‡\"></p><p>è¯¶ï¼Ÿæ ·å¼æ²¡ç”Ÿæ•ˆï¼Ÿä¸è¦æƒŠæ…Œï¼Œè¿˜è®°å¾—æˆ‘ä»¬ç¬¬7èŠ‚è¯¾å¼•å…¥ <code>emotion</code> æ¡†æ¶æ—¶ï¼Œä¸ºç»„ä»¶åŠ å…¥çš„ <code>JSX Pragma</code> ï¼ˆç¼–è¯‘æŒ‡ç¤ºï¼‰å—ï¼Ÿè¿™é‡Œä¹Ÿéœ€è¦ï¼š</p><pre><code class=\"language-diff\">+/** @jsxImportSource @emotion/react */\n import React from 'react';\n import { css } from '@emotion/react';\n</code></pre><p>ä¿å­˜æ–‡ä»¶ï¼Œæ ·å¼æ¢å¤æ­£å¸¸äº†ã€‚</p><p>ä»¥æ­¤ç±»æ¨ï¼Œè¯·ä½ ç»§ç»­æŠ½å– <code>KanbanColumn</code> ã€<code>KanbanCard</code> ã€<code>KanbanNewCard</code> ã€‚ä¸‹é¢æ˜¯ä¸€äº›å…³é”®ä»£ç çš„æç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5e/e5/5e8b133f370bd99943dc35625815a4e5.png?wh=1920x1487\" alt=\"å›¾ç‰‡\"></p><p><code>src/KanbanCard.js</code> çš„å…³é”®ä»£ç çš„æç¤ºå¦‚ä¸‹ï¼š</p><pre><code class=\"language-javascript\">/** @jsxImportSource @emotion/react */\nimport React, { useEffect, useState } from 'react';\nimport { css } from '@emotion/react';\n\nexport const kanbanCardStyles = css`\n&nbsp; margin-bottom: 1rem;\n&nbsp; /*...çœç•¥*/\n`;\nexport const kanbanCardTitleStyles = css`\n&nbsp; min-height: 3rem;\n`;\n\nconst MINUTE = 60 * 1000;\nconst HOUR = 60 * MINUTE;\nconst DAY = 24 * HOUR;\nconst UPDATE_INTERVAL = MINUTE;\n\nexport default function KanbanCard({ title, status, onDragStart }) {\n&nbsp; const [displayTime, setDisplayTime] = useState(status);\n&nbsp; useEffect(() =&gt; {\n&nbsp; &nbsp; const updateDisplayTime = () =&gt; {/*...çœç•¥*/};\n&nbsp; &nbsp; const intervalId = setInterval(updateDisplayTime, UPDATE_INTERVAL);\n&nbsp; &nbsp; // ...çœç•¥\n&nbsp; }, [status]);\n&nbsp; // ...çœç•¥\n\n&nbsp; return (\n&nbsp; &nbsp; &lt;li css={kanbanCardStyles} draggable onDragStart={handleDragStart}&gt;\n&nbsp; &nbsp; &nbsp; {/*...çœç•¥*/}\n&nbsp; &nbsp; &lt;/li&gt;\n&nbsp; );\n}\n</code></pre><p><code>src/KanbanNewCard.js</code> çš„å…³é”®ä»£ç çš„æç¤ºå¦‚ä¸‹ï¼š</p><pre><code class=\"language-javascript\">/** @jsxImportSource @emotion/react */\nimport React, { useEffect, useRef, useState } from 'react';\nimport { css } from '@emotion/react';\nimport { kanbanCardStyles, kanbanCardTitleStyles } from './KanbanCard';\n\nexport default function KanbanNewCard({ onSubmit }) {\n</code></pre><p><code>src/KanbanColumn.js</code> çš„å…³é”®ä»£ç çš„æç¤ºå¦‚ä¸‹ï¼š</p><pre><code class=\"language-javascript\">/** @jsxImportSource @emotion/react */\nimport React from 'react';\nimport { css } from '@emotion/react';\n\nconst kanbanColumnStyles = css`\n&nbsp; flex: 1 1;\n&nbsp; display: flex;\n&nbsp; flex-direction: column;\n&nbsp; border: 1px solid gray;\n&nbsp; border-radius: 1rem;\n\n&nbsp; &amp; &gt; h2 {\n&nbsp;   /*...çœç•¥*/\n&nbsp; }\n`;\n\nexport default function KanbanColumn({\n&nbsp; children, bgColor, title /*...çœç•¥*/\n}) {\n&nbsp; return (\n&nbsp; &nbsp; &lt;section\n&nbsp; &nbsp; &nbsp; {/*...çœç•¥*/}\n&nbsp; &nbsp; &nbsp; css={css`\n&nbsp; &nbsp; &nbsp; &nbsp; ${kanbanColumnStyles}\n&nbsp; &nbsp; &nbsp; &nbsp; background-color: ${bgColor};\n&nbsp; &nbsp; &nbsp; `}\n&nbsp; &nbsp; &gt;\n</code></pre><p>å¥½çš„ï¼Œ<code>src/App.js</code> è¿˜å‰©150ä½™è¡Œä»£ç ï¼Œé‡æ„çš„ç¬¬ä¸€ä¸ªç›®æ ‡è¾¾æˆäº†ã€‚åŒæ—¶æˆ‘ä»¬æŠŠ <code>css</code> å±æ€§æŠ½å–æˆäº†æ¨¡å—å†…çš„å˜é‡ï¼Œé‡æ„çš„ç¬¬ä¸‰ä¸ªç›®æ ‡ä¹Ÿè¾¾æˆäº†ã€‚è¯·åŠ¡å¿…è®°å¾—æŠŠä½ çš„é‡æ„æˆæœæäº¤åˆ°ä»£ç ä»“åº“ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«åˆ°ç•™è¨€åŒºã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾æˆ‘ä»¬å…ˆæ˜¯å€ŸåŠ©FRPå‡½æ•°å“åº”å¼ç¼–ç¨‹ç†è§£äº†ä»€ä¹ˆæ˜¯æ•°æ®æµï¼Œç„¶åè¾ƒä¸ºç³»ç»Ÿåœ°å­¦ä¹ äº†Reactæ•°æ®æµçš„ä¸‰å¤§ç»„æˆéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯propsã€stateå’Œcontextã€‚</p><p>é™¤äº†å®ƒä»¬çš„å®šä¹‰å’Œç”¨æ³•å¤–ï¼Œè¿˜ä»‹ç»äº†å®ƒä»¬åœ¨ç»„ä»¶ä¸­åˆ†åˆ«çš„æµå‘ï¼Œè¿›è€Œæ¨æ–­å‡ºæ•´ä¸ªReactæ•°æ®æµæ˜¯å•å‘çš„ã€‚åœ¨è¿™èŠ‚è¯¾ååŠéƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸º <code>oh-my-kanban</code> é¡¹ç›®æå‡ºäº†é‡æ„ç›®æ ‡ï¼Œå¹¶å®Œæˆäº†æŠ½å–ç»„ä»¶åˆ°ç‹¬ç«‹æ–‡ä»¶ï¼Œä½œä¸ºä¸‹èŠ‚è¯¾ç»§ç»­é‡æ„çš„åŸºç¡€ã€‚</p><p>ä¸‹èŠ‚è¯¾æˆ‘ä»¬ä¼šèŠèŠå¦‚ä½•ç”¨é¢å‘æ¥å£ç¼–ç¨‹æ€æƒ³å¸®åŠ©Reactåº”ç”¨çš„è®¾è®¡å¼€å‘ï¼Œå¹¶ç»“åˆå•å‘æ•°æ®æµå’Œé¢å‘æ¥å£æ€æƒ³ï¼Œç»§ç»­é‡æ„ <code>oh-my-kanban</code> é¡¹ç›®ã€‚åœ¨ä¸‹èŠ‚è¯¾ç»“æŸæ—¶ï¼Œä½ ä¼šå‘ç° <code>oh-my-kanban</code> é¡¹ç›®å·²ç»æ˜¯ä¸€ä¸ªâ€œå¯ç”¨â€çš„React Webåº”ç”¨äº†ï¼</p><p>æœ€åï¼Œé™„ä¸Šæœ¬èŠ‚è¯¾æ‰€æ¶‰åŠçš„é¡¹ç›®æºä»£ç ï¼š<a href=\"https://gitee.com/evisong/geektime-column-oh-my-kanban/releases/tag/v0.12.0\">https://gitee.com/evisong/geektime-column-oh-my-kanban/releases/tag/v0.12.0</a></p><h2>æ€è€ƒé¢˜</h2><ol>\n<li>Reactçš„æ•°æ®æµä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå•å‘çš„ï¼Ÿå¦‚æœè®¾è®¡æˆåŒå‘çš„ç”šè‡³å¤šå‘çš„ï¼Œä¼šå¯¼è‡´ä»€ä¹ˆåæœå—ï¼Ÿ</li>\n<li>æˆ‘ä»¬ï¼ˆç»ˆäºï¼‰è¦é‡æ„ <code>oh-my-kanban</code> é¡¹ç›®äº†ï¼Œä½ å¯¹é‡æ„çš„ç†è§£æ˜¯æ€æ ·çš„ï¼Ÿä½ ç»å†è¿‡å…¶ä»–å“ªäº›è½¯ä»¶é¡¹ç›®çš„é‡æ„å—ï¼Ÿ</li>\n</ol><p>æ¬¢è¿æŠŠä½ çš„æ€è€ƒå’Œæƒ³æ³•åˆ†äº«åœ¨ç•™è¨€åŒºï¼Œå’±ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","comments":[{"had_liked":false,"id":357737,"user_name":"ğŸ‘","can_delete":false,"product_type":"c1","uid":2189689,"ip_address":"åŒ—äº¬","ucode":"DE34B3B14287D1","user_header":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","comment_is_top":true,"comment_ctime":1663587701,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"ä½ å¥½ï¼Œæˆ‘æ˜¯ã€Šç°ä»£React Webå¼€å‘å®æˆ˜ã€‹çš„ç¼–è¾‘è¾°æ´‹ï¼Œè¿™æ˜¯ğŸ‘‡é¡¹ç›®çš„æºä»£ç é“¾æ¥ï¼Œä¾›ä½ å­¦ä¹ ä¸å‚è€ƒï¼šhttps:&#47;&#47;gitee.com&#47;evisong&#47;geektime-column-oh-my-kanban&#47;releases&#47;tag&#47;v0.12.0","like_count":1,"discussions":[{"author":{"id":1109402,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/9a/bbeec5bb.jpg","nickname":"liu","note":"","ucode":"041F179BB00A59","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590475,"discussion_content":"èƒ½å¦ç»™ä¸€ä¸ªsshçš„ä»£ç é“¾æ¥ï¼Ÿgiteeçš„httpæ–¹å¼éœ€è¦ç™»å½•ã€‚ä½†æ˜¯giteeçš„é‚£ä¸ªè®¤è¯ç™»å½•ä¸æ˜¯ä¸€èˆ¬çš„çƒ‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665800574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1109402,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/9a/bbeec5bb.jpg","nickname":"liu","note":"","ucode":"041F179BB00A59","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":593633,"discussion_content":"ä½ å¥½ï¼Œliuï¼ŒæŠ±æ­‰è¿™ä¹ˆæ™šæ‰çœ‹åˆ°ä½ çš„é—®é¢˜ï¼Œä½ æ˜¯æŒ‡è¿™ä¸ªå—ï¼Ÿ  \n\n    git@gitee.com:evisong/geektime-column-oh-my-kanban.git\n\nå¯¹åº”çš„å¸®åŠ©æ–‡æ¡£ï¼š https://gitee.com/help/articles/4238#article-header1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668400688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":590475,"ip_address":"åŒ—äº¬","group_id":0},"score":593633,"extra":""},{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1109402,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/9a/bbeec5bb.jpg","nickname":"liu","note":"","ucode":"041F179BB00A59","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":593634,"discussion_content":"ä½ ä¹Ÿå¯ä»¥forkä¸€ä»½ä»£ç ä»“åº“ï¼Œå¯ä»¥å‚è€ƒ https://gitee.com/help/articles/4128#article-header1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668400779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":590475,"ip_address":"åŒ—äº¬","group_id":0},"score":593634,"extra":""}]}]},{"had_liked":false,"id":360005,"user_name":"æµ·åå‘€","can_delete":false,"product_type":"c1","uid":1423832,"ip_address":"åŒ—äº¬","ucode":"BD078EDFB181EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/b9/d8/92c2b3ab.jpg","comment_is_top":false,"comment_ctime":1666121458,"is_pvip":false,"replies":[{"id":131089,"content":"ä½ å¥½ï¼Œæµ·åå‘€ï¼Œè¿™ä¸ªåä¾‹ä¸¾å¾—å¤ªå¥½äº†ã€‚å•å‘æ•°æ®æµæ˜¯Reactæ¡†æ¶çš„ä¸€é¡¹é‡è¦çš„è®¾è®¡å“²å­¦ï¼Œä¹ä¸€çœ‹æœ‰äº›æ•™æ¡ï¼Œä½†å®ƒå¾ˆæœ‰åŠ›åœ°ä¿è¯äº†æ•°æ®çš„ç§©åºï¼Œå‡å°‘äº†å¼€å‘è€…çš„æ··ä¹±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1033973,"ctime":1666540203,"ip_address":"åŒ—äº¬","comment_id":360005,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"1ã€å› ä¸ºä¸€ä¸ªçˆ¶ç»„ä»¶å¯èƒ½æœ‰å¤šä¸ªå­ç»„ä»¶ï¼Œå¦‚æœä»»æ„å­ç»„ä»¶éƒ½å¯ä»¥ä¿®æ”¹çˆ¶ç»„ä»¶æ•°æ®ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä»–å­ç»„ä»¶å—åˆ°å½±å“ï¼Œè¿™æ ·ä»¥æ¥ä¼šåŠ å¤§å¼€å‘å’Œdebugéš¾åº¦ï¼Œå•å‘æ•°æ®æµå°±æ²¡è¿™ä¸ªå½±å“ã€‚","like_count":4,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591370,"discussion_content":"ä½ å¥½ï¼Œæµ·åå‘€ï¼Œè¿™ä¸ªåä¾‹ä¸¾å¾—å¤ªå¥½äº†ã€‚å•å‘æ•°æ®æµæ˜¯Reactæ¡†æ¶çš„ä¸€é¡¹é‡è¦çš„è®¾è®¡å“²å­¦ï¼Œä¹ä¸€çœ‹æœ‰äº›æ•™æ¡ï¼Œä½†å®ƒå¾ˆæœ‰åŠ›åœ°ä¿è¯äº†æ•°æ®çš„ç§©åºï¼Œå‡å°‘äº†å¼€å‘è€…çš„æ··ä¹±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666540203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357890,"user_name":"èˆ¹é•¿","can_delete":false,"product_type":"c1","uid":3170712,"ip_address":"åŒ—äº¬","ucode":"EBC0CCDB341E35","user_header":"https://static001.geekbang.org/account/avatar/00/30/61/98/0d6b499d.jpg","comment_is_top":false,"comment_ctime":1663732965,"is_pvip":false,"replies":[{"id":130408,"content":"ä½ å¥½ï¼Œèˆ¹é•¿ï¼Œå› ä¸ºåœ¨emotionæ–¹æ¡ˆä¸­ï¼ŒJSXçš„csså±æ€§å€¼æ˜¯æ‰§è¡Œ\n  @emotion&#47;reactçš„ css()å‡½æ•°ï¼ˆå³css`args`ï¼‰\nå‡½æ•°çš„ç»“æœï¼Œæ‰€ä»¥ä½ æåˆ°çš„ä¸¤ä¸ªä½ç½®å°±æ˜¯ css()å‡½æ•° æ‰§è¡Œæ¬¡æ•°çš„åŒºåˆ«ã€‚æ¨¡å—èŒƒå›´çš„å¸¸é‡ï¼Œæ„å‘³ç€è¿™ä¸ªæ¨¡å—åªè¦è¢«åŠ è½½ï¼Œå°±ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œä¸”åªæœ‰è¿™ä¸€æ¬¡ï¼›KanbanBoardå‡½æ•°å¤§æ‹¬å·å†…ï¼Œæ„å‘³ç€ç»„ä»¶æ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ css()å‡½æ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1033973,"ctime":1664215391,"ip_address":"åŒ—äº¬","comment_id":357890,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"æœ‰ä¸€ä¸ªç»†èŠ‚ç–‘é—®ï¼šåœ¨é‡æ„ css æ—¶ï¼Œvscode ä¸­æœ‰ 4 ä¸ªé€‰é¡¹ï¼Œå®‹è€å¸ˆç”¨çš„æ˜¯â€œæŠ½å–ä¸ºæ¨¡å—èŒƒå›´çš„å¸¸é‡â€, å®é™…æ•ˆæœæ˜¯å°†è¿™å—ä»£ç æ”¾åˆ°äº†æ ¹ç›®å½•ä¸‹ã€‚æˆ‘è¯•äº†ä¸‹å¦ä¸€ä¸ªé€‰é¡¹ï¼ˆç¬¬ä¸€ä¸ªé€‰é¡¹ï¼‰â€œæŠ½å–ä¸ºå°é—­èŒƒå›´çš„å¸¸é‡â€ï¼Œå‘ç° vsc å°†å…¶æ”¾åˆ°äº† KanbanBoard è¿™ä¸ªå‡½æ•°çš„å¤§æ‹¬å·ä¸‹ã€‚\næƒ³é—®ä¸‹è¿™ 2 å—æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588925,"discussion_content":"ä½ å¥½ï¼Œèˆ¹é•¿ï¼Œå› ä¸ºåœ¨emotionæ–¹æ¡ˆä¸­ï¼ŒJSXçš„csså±æ€§å€¼æ˜¯æ‰§è¡Œ\n  @emotion/reactçš„ css()å‡½æ•°ï¼ˆå³css`args`ï¼‰\nå‡½æ•°çš„ç»“æœï¼Œæ‰€ä»¥ä½ æåˆ°çš„ä¸¤ä¸ªä½ç½®å°±æ˜¯ css()å‡½æ•° æ‰§è¡Œæ¬¡æ•°çš„åŒºåˆ«ã€‚æ¨¡å—èŒƒå›´çš„å¸¸é‡ï¼Œæ„å‘³ç€è¿™ä¸ªæ¨¡å—åªè¦è¢«åŠ è½½ï¼Œå°±ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œä¸”åªæœ‰è¿™ä¸€æ¬¡ï¼›KanbanBoardå‡½æ•°å¤§æ‹¬å·å†…ï¼Œæ„å‘³ç€ç»„ä»¶æ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ css()å‡½æ•°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1664215391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358607,"user_name":"01","can_delete":false,"product_type":"c1","uid":1120612,"ip_address":"åŒ—äº¬","ucode":"3229D8F060AFEC","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/64/6f2b7b86.jpg","comment_is_top":false,"comment_ctime":1664463455,"is_pvip":false,"replies":[{"id":130589,"content":"ä½ å¥½ï¼Œ01ï¼Œç¡®å®stateçš„å˜åŒ–æœ€ç»ˆä¼šå¯¼è‡´UIçš„å˜åŒ–ã€‚è¿™é‡Œæåˆ°çš„stateä¸å¯å˜ï¼Œæ›´å¤šæ˜¯åœ¨å¼ºè°ƒå¯¹äºå¼€å‘è€…çš„çº¦æŸï¼Œåªæœ‰è°ƒç”¨ setXxxState() äº§ç”Ÿçš„å˜æ›´ï¼Œæ‰èƒ½è¢«Reactâ€œè§‚æµ‹â€åˆ°ï¼Œè§¦å‘æ¥ä¸‹æ¥çš„æ¸²æŸ“ã€æäº¤è¿‡ç¨‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1033973,"ctime":1665243882,"ip_address":"åŒ—äº¬","comment_id":358607,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"state å…¶å®åº”è¯¥å¯å˜å¯ä¸å˜çš„ã€‚ å˜æ˜¯å› ä¸ºå®æ‰“å®çš„å€¼å˜äº†ï¼Œ ä¸å˜æ˜¯UIåœ¨å½“ä¸‹ä¸å˜","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589696,"discussion_content":"ä½ å¥½ï¼Œ01ï¼Œç¡®å®stateçš„å˜åŒ–æœ€ç»ˆä¼šå¯¼è‡´UIçš„å˜åŒ–ã€‚è¿™é‡Œæåˆ°çš„stateä¸å¯å˜ï¼Œæ›´å¤šæ˜¯åœ¨å¼ºè°ƒå¯¹äºå¼€å‘è€…çš„çº¦æŸï¼Œåªæœ‰è°ƒç”¨ setXxxState() äº§ç”Ÿçš„å˜æ›´ï¼Œæ‰èƒ½è¢«Reactâ€œè§‚æµ‹â€åˆ°ï¼Œè§¦å‘æ¥ä¸‹æ¥çš„æ¸²æŸ“ã€æäº¤è¿‡ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665243882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357858,"user_name":"DullSword","can_delete":false,"product_type":"c1","uid":1351108,"ip_address":"åŒ—äº¬","ucode":"9560FED4161FEB","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/c4/13376c14.jpg","comment_is_top":false,"comment_ctime":1663687649,"is_pvip":false,"replies":[{"id":130405,"content":"ä½ å¥½ï¼ŒDullSwordï¼Œä½ å¯¹è¿™ä¸¤ä¸ªé—®é¢˜çš„æ€è·¯æ˜¯å¯¹çš„ï¼Œå½“ç„¶å¦‚æœèƒ½å†è¯¦ç»†äº›å°±æ›´å¥½äº†ã€‚æ¯”å¦‚1é‡Œä½ æçš„æ··ä¹±ï¼Œæœ‰æ²¡æœ‰æƒ³åˆ°å“ªäº›å…·ä½“çš„ä¾‹å­ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1033973,"ctime":1664213987,"ip_address":"åŒ—äº¬","comment_id":357858,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"1.ä½¿æ•°æ®æµå‘ç®€å•æ¸…æ™°ï¼Œå¤šå‘å¯èƒ½ä¼šå¸¦æ¥å¤æ‚å’Œæ··ä¹±ã€‚\n2.æˆ‘ç†è§£çš„é‡æ„æ˜¯æ”¹è¿›ä»£ç ï¼Œå¯èƒ½æ˜¯æ”¹è¿›ä»£ç çš„ç»“æ„ï¼Œä¹Ÿå¯èƒ½æ˜¯æ”¹è¿›ä»£ç çš„è¿è¡Œæ•ˆç‡ã€‚","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588922,"discussion_content":"ä½ å¥½ï¼ŒDullSwordï¼Œä½ å¯¹è¿™ä¸¤ä¸ªé—®é¢˜çš„æ€è·¯æ˜¯å¯¹çš„ï¼Œå½“ç„¶å¦‚æœèƒ½å†è¯¦ç»†äº›å°±æ›´å¥½äº†ã€‚æ¯”å¦‚1é‡Œä½ æçš„æ··ä¹±ï¼Œæœ‰æ²¡æœ‰æƒ³åˆ°å“ªäº›å…·ä½“çš„ä¾‹å­ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664213988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357772,"user_name":"èˆ¹é•¿","can_delete":false,"product_type":"c1","uid":3170712,"ip_address":"åŒ—äº¬","ucode":"EBC0CCDB341E35","user_header":"https://static001.geekbang.org/account/avatar/00/30/61/98/0d6b499d.jpg","comment_is_top":false,"comment_ctime":1663633995,"is_pvip":false,"replies":[{"id":130396,"content":"ä½ å¥½ï¼Œèˆ¹é•¿ï¼Œå¾ˆæ£’çš„ç­”æ¡ˆï¼è¯è¯´Martin Fowlerå¤§ç¥çš„å¾ˆå¤šè§‚ç‚¹ï¼Œæˆ‘éƒ½æ˜¯å·¥ä½œå¾ˆä¹…ä»¥åæ‰çœŸæ­£ç†è§£çš„ï¼Œå¾ˆä½©æœä»–çš„ä¸°å¯Œç»éªŒå’Œæ·±å…¥æ€è€ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1033973,"ctime":1664194380,"ip_address":"åŒ—äº¬","comment_id":357772,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"æ‰€è°“é‡æ„ï¼ˆrefactoringï¼‰æ˜¯è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼šåœ¨ä¸æ”¹å˜ä»£ç å¤–åœ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œå¯¹ä»£ç åšå‡ºä¿®æ”¹ï¼Œä»¥æ”¹è¿›ç¨‹åºçš„å†…éƒ¨ç»“æ„ã€‚é‡æ„æ˜¯ä¸€ç§ç»åƒé”¤ç™¾ç‚¼å½¢æˆçš„æœ‰æ¡ä¸ç´Šçš„ç¨‹åºæ•´ç†æ–¹æ³•ï¼Œå¯ä»¥æœ€å¤§é™åº¦åœ°å‡å°æ•´ç†è¿‡ç¨‹ä¸­å¼•å…¥é”™è¯¯çš„æ¦‚ç‡ã€‚æœ¬è´¨ä¸Šè¯´ï¼Œé‡æ„å°±æ˜¯åœ¨ä»£ç å†™å¥½ä¹‹åæ”¹è¿›å®ƒçš„è®¾è®¡ã€‚\nRef: ã€Šé‡æ„ã€‹ é©¬ä¸ ç¦å‹’","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588890,"discussion_content":"ä½ å¥½ï¼Œèˆ¹é•¿ï¼Œå¾ˆæ£’çš„ç­”æ¡ˆï¼è¯è¯´Martin Fowlerå¤§ç¥çš„å¾ˆå¤šè§‚ç‚¹ï¼Œæˆ‘éƒ½æ˜¯å·¥ä½œå¾ˆä¹…ä»¥åæ‰çœŸæ­£ç†è§£çš„ï¼Œå¾ˆä½©æœä»–çš„ä¸°å¯Œç»éªŒå’Œæ·±å…¥æ€è€ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664194380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357565,"user_name":"å­¦ä¹ å‰ç«¯-react","can_delete":false,"product_type":"c1","uid":1331001,"ip_address":"åŒ—äº¬","ucode":"6C873AF98F3498","user_header":"https://static001.geekbang.org/account/avatar/00/14/4f/39/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1663400661,"is_pvip":false,"replies":[{"id":130394,"content":"ä½ å¥½ï¼Œå­¦ä¹ å‰ç«¯-reactï¼Œä¹Ÿæ˜¯ä¹Ÿä¸æ˜¯ã€‚\n\né¦–å…ˆreduxæ˜¯ä¸€ä¸ªæ¡†æ¶æ— å…³çš„åº”ç”¨çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œä¹Ÿå¯ä»¥ç”¨äºvueæˆ–svelteç­‰æ¡†æ¶ã€‚æˆ‘ä»¬åœ¨Reactä¸­ä½¿ç”¨reduxï¼Œä¸€èˆ¬ä¼šå€ŸåŠ©reduxå®˜æ–¹çš„Reactè¿æ¥å™¨ react-reduxã€‚\n\nè¿™ä¸ªåº“æŠŠreduxçš„storeæ”¾åˆ°äº†contexté‡Œï¼Œä½†å¹¶æ²¡æœ‰å€ŸåŠ©Reactçš„contextæ›´æ–°æœºåˆ¶æ¥å“åº”storeå†…éƒ¨çš„æ›´æ–°ã€‚åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œreact-reduxæä¾›çš„é«˜é˜¶ç»„ä»¶è®¢é˜…storeå˜åŒ–ï¼Œå½“æœ‰å˜åŒ–æ—¶è°ƒç”¨ç»„ä»¶çš„forceUpdate()æ–¹æ³•ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼šhttps:&#47;&#47;gist.github.com&#47;gaearon&#47;1d19088790e70ac32ea636c025ba424e ï¼›è€Œåœ¨æ–°ç‰ˆä¸­ï¼Œé«˜é˜¶ç»„ä»¶ä½¿ç”¨äº†Reactçš„æ–°Hooks APIï¼šuseSyncExternalStoreï¼Œç”¨è¿™ä¸ªHookè¿”å›çš„propsæ¥æ›´æ–°è¢«ä¿®é¥°çš„ç»„ä»¶ï¼Œå…·ä½“è¯·å‚è€ƒ https:&#47;&#47;github.com&#47;reduxjs&#47;react-redux&#47;blob&#47;70a167e5fa6b311338d98e26b3a855ba44d7c739&#47;src&#47;components&#47;connect.tsx#L707ã€‚\n\nå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥è¯»ä¸€è¯»react-reduxçš„å‘å±•å²ï¼š  https:&#47;&#47;blog.isquaredsoftware.com&#47;2018&#47;11&#47;react-redux-history-implementation&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1033973,"ctime":1664193098,"ip_address":"åŒ—äº¬","comment_id":357565,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"è¯·é—®ï¼šç±»ä¼¼äºredux è¿™æ ·çš„çŠ¶æ€ç®¡ç†å™¨ä¹Ÿéƒ½æ˜¯åŸºäº context å»å®ç°çš„å§ã€‚","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588885,"discussion_content":"ä½ å¥½ï¼Œå­¦ä¹ å‰ç«¯-reactï¼Œä¹Ÿæ˜¯ä¹Ÿä¸æ˜¯ã€‚\n\né¦–å…ˆreduxæ˜¯ä¸€ä¸ªæ¡†æ¶æ— å…³çš„åº”ç”¨çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œä¹Ÿå¯ä»¥ç”¨äºvueæˆ–svelteç­‰æ¡†æ¶ã€‚æˆ‘ä»¬åœ¨Reactä¸­ä½¿ç”¨reduxï¼Œä¸€èˆ¬ä¼šå€ŸåŠ©reduxå®˜æ–¹çš„Reactè¿æ¥å™¨ react-reduxã€‚\n\nè¿™ä¸ªåº“æŠŠreduxçš„storeæ”¾åˆ°äº†contexté‡Œï¼Œä½†å¹¶æ²¡æœ‰å€ŸåŠ©Reactçš„contextæ›´æ–°æœºåˆ¶æ¥å“åº”storeå†…éƒ¨çš„æ›´æ–°ã€‚åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œreact-reduxæä¾›çš„é«˜é˜¶ç»„ä»¶è®¢é˜…storeå˜åŒ–ï¼Œå½“æœ‰å˜åŒ–æ—¶è°ƒç”¨ç»„ä»¶çš„forceUpdate()æ–¹æ³•ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼šhttps://gist.github.com/gaearon/1d19088790e70ac32ea636c025ba424e ï¼›è€Œåœ¨æ–°ç‰ˆä¸­ï¼Œé«˜é˜¶ç»„ä»¶ä½¿ç”¨äº†Reactçš„æ–°Hooks APIï¼šuseSyncExternalStoreï¼Œç”¨è¿™ä¸ªHookè¿”å›çš„propsæ¥æ›´æ–°è¢«ä¿®é¥°çš„ç»„ä»¶ï¼Œå…·ä½“è¯·å‚è€ƒ https://github.com/reduxjs/react-redux/blob/70a167e5fa6b311338d98e26b3a855ba44d7c739/src/components/connect.tsx#L707ã€‚\n\nå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥è¯»ä¸€è¯»react-reduxçš„å‘å±•å²ï¼š  https://blog.isquaredsoftware.com/2018/11/react-redux-history-implementation/","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1664193098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1230852,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c8/04/fed4c1ad.jpg","nickname":"è‹¥å·","note":"","ucode":"B8C3DD4B38CC6F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588350,"discussion_content":"redux æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¾é™„ä»»ä½•æ¡†æ¶ï¼Œç®€å•æ¥è¯´æ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ŒåŠ å…¥äº†ä¸­é—´ä»¶ã€‚\næˆ‘ä¹‹å‰å†™è¿‡ä¸€ç¯‡reduxæºç æ–‡ç« ï¼Œå¯ä¾›å‚è€ƒï¼šhttps://juejin.cn/post/6844904191228411911 \n\nreact-redux æ˜¯åŸºäº redux + context å®ç°çš„ã€‚\n\nå¯ä»¥å‚è€ƒå…¶æºç ï¼š\nåœ¨çº¿ç¼–è¾‘å™¨æ‰“å¼€ã€src/components/Provider.tsxã€‘ï¼šhttps://github.dev/reduxjs/react-redux\n\nhttps://github.com/reduxjs/react-redux/blob/master/src/components/Provider.tsx","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663680117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1331001,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4f/39/791d0f5e.jpg","nickname":"å­¦ä¹ å‰ç«¯-react","note":"","ucode":"6C873AF98F3498","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1230852,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c8/04/fed4c1ad.jpg","nickname":"è‹¥å·","note":"","ucode":"B8C3DD4B38CC6F","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":588545,"discussion_content":"æ”¶åˆ° æ„Ÿè°¢å¤§ä½¬åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663824395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":588350,"ip_address":"ä¸Šæµ·","group_id":0},"score":588545,"extra":""},{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1230852,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c8/04/fed4c1ad.jpg","nickname":"è‹¥å·","note":"","ucode":"B8C3DD4B38CC6F","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":588927,"discussion_content":"è‹¥å·ä½ å¥½ï¼Œä½ åœ¨juejinçš„æ–‡ç« æˆ‘æ‹œè¯»äº†ï¼Œå°¤å…¶æ˜¯é‚£ä¸ªåŠ¨å›¾ï¼Œå¤ªèµäº†ï¼Œæˆ‘ä»¬çš„ä¸­æ–‡æŠ€æœ¯ç¤¾åŒºå°±æ˜¯éœ€è¦è¿™æ ·é«˜è´¨é‡çš„å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664216855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":588350,"ip_address":"åŒ—äº¬","group_id":0},"score":588927,"extra":""},{"author":{"id":1230852,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c8/04/fed4c1ad.jpg","nickname":"è‹¥å·","note":"","ucode":"B8C3DD4B38CC6F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"å®‹ä¸€ç®","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":588977,"discussion_content":"å“‡ï¼Œè€å¸ˆç«Ÿç„¶è¯»äº†æˆ‘çš„æ–‡ç« ï¼Œæ„Ÿè°¢è€å¸ˆè‚¯å®š~","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1664278064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":588927,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":588977,"extra":""}]}]},{"had_liked":false,"id":366193,"user_name":"æ½®æ±","can_delete":false,"product_type":"c1","uid":1042208,"ip_address":"å¹¿ä¸œ","ucode":"F5E4F6DF9CEA9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/20/70a95f94.jpg","comment_is_top":false,"comment_ctime":1673447869,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"Context.Provider çš„ value å€¼ä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªå¯¹è±¡è¿›å»ï¼Œä½†è¦æ³¨æ„å†™æ³•ï¼Œé¿å…åœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶åå¤åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œæ¯”å¦‚åˆ©ç”¨ state æˆ– useMemo ï¼š\n--------------------------------------------------\né—®ä¸‹è€å¸ˆï¼Œè¿™é‡Œè¯´çš„è¦é¿å…çš„å†™æ³•ï¼Œæ˜¯ä¸ºäº†å•çº¯é¿å…valueå€¼çš„å¯¹è±¡çš„é‡å¤åˆ›å»ºï¼Œè¿˜æ˜¯è¯´é¿å…é‡å¤åˆ›å»ºå¯¹è±¡é˜²æ­¢å¤šä½™é‡å¤æ¸²æŸ“å•Šã€‚è¯•éªŒäº†ä¸€ä¸‹ï¼Œæ–‡ä¸­valueå€¼çš„å¯¹è±¡å½¢å¼ï¼Œä¸ç®¡å“ªç§å½¢å¼ï¼Œå¯¹è±¡å­—é¢äº†ï¼Œstateå¯¹è±¡å€¼ï¼ŒuseMemoå€¼ï¼Œåœ¨çŠ¶æ€æ›´æ–°æ—¶ï¼Œå­å­™ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚æ‰€ä»¥æˆ‘è§‰å¾—è€å¸ˆè¿™é‡Œçš„æ„æ€æ˜¯ é¿å…æ¯æ¬¡ç»„ä»¶æ›´æ–°æ¸²æŸ“æ—¶é‡æ–°åˆ›å»ºvalueå€¼çš„å¯¹è±¡ã€‚ç„¶è€Œè¿™é‡Œï¼Œä¸ç®¡æ˜¯å¦é‡æ–°åˆ›å»ºvalueå€¼çš„å¯¹è±¡ï¼Œå­å­™ç»„ä»¶éƒ½ä¼šæ›´æ–°æ¸²æŸ“ã€‚","like_count":1,"discussions":[{"author":{"id":1372582,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f1/a6/06f115ec.jpg","nickname":"å°ç±³","note":"","ucode":"63D7BDD2BA87D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":639632,"discussion_content":"æˆ‘ä¹Ÿæœ‰ç›¸åŒçš„ç–‘é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710810060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357770,"user_name":"èˆ¹é•¿","can_delete":false,"product_type":"c1","uid":3170712,"ip_address":"ä¸Šæµ·","ucode":"EBC0CCDB341E35","user_header":"https://static001.geekbang.org/account/avatar/00/30/61/98/0d6b499d.jpg","comment_is_top":false,"comment_ctime":1663633705,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"æ€è€ƒé¢˜2: ä¸ªäººç†è§£é‡æ„æ˜¯ä¸ºäº†é™ä½ä»£ç è€¦åˆåº¦ï¼Œå‡å°‘ç³»ç»Ÿçš„ç†µï¼Œæ–¹ä¾¿åç»­å¢è¡¥æˆ–é˜…è¯»","like_count":1}]}