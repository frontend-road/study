{"id":40169,"title":"35 | å¿«é€Ÿæ„å»ºæŒç»­äº¤ä»˜ç³»ç»Ÿï¼ˆäºŒï¼‰ï¼šGitLab è§£å†³ä»£ç ç®¡ç†é—®é¢˜","content":"<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ ä¸€èµ·ç†æ¸…äº†æˆ‘ä»¬å³å°†æ„å»ºçš„æŒç»­äº¤ä»˜ç³»ç»Ÿçš„éœ€æ±‚ï¼Œä»¥åŠè¦å…·å¤‡çš„å…·ä½“åŠŸèƒ½ã€‚é‚£ä¹ˆï¼Œä»è¿™ä¸€ç¯‡æ–‡ç« å¼€å§‹ï¼Œæˆ‘ä»¬å°±è¦æ­£å¼è¿›å…¥å®æˆ˜é˜¶æ®µäº†ã€‚æˆ‘ä¼šå’Œä½ è¯¦ç»†ä»‹ç»åŸºäºå¼€æºå·¥å…·ï¼Œä»0å¼€å§‹æ­å»ºä¸€å¥—æŒç»­äº¤ä»˜å¹³å°çš„è¯¦ç»†è¿‡ç¨‹ï¼Œä»¥åŠæ•´åˆå„ä¸ªæŒç»­äº¤ä»˜å·¥å…·çš„ä¸€äº›æŠ€æœ¯ç»†èŠ‚ã€‚</p>\n<p>æŒ‰ç…§æˆ‘åœ¨å‰é¢åˆ†äº«çš„å†…å®¹ï¼Œæ­å»ºä¸€å¥—æŒç»­äº¤ä»˜ç³»ç»Ÿçš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯æ­å»ºä¸€å¥—ä»£ç ç®¡ç†å¹³å°ã€‚è¿™é‡Œæˆ‘é€‰æ‹©çš„å¼€æºå·¥å…·æ˜¯GitLabï¼Œå®ƒæ˜¯ä¸€å¥—é«˜ä»¿GitHubçš„å¼€æºä»£ç å…±äº«ç®¡ç†å¹³å°ï¼Œä¹Ÿæ˜¯ç›®å‰æœ€å¥½çš„å¼€æºè§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä»ä½¿ç”¨GitLabæ­å»ºä»£ç ç®¡ç†å¹³å°å¼€å§‹å§ï¼Œä¸€èµ·çœ‹çœ‹æ­å»ºGitLabå¹³å°çš„è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ã€‚</p>\n<h2>åˆ©ç”¨GitLabæ­å»ºä»£ç ç®¡ç†å¹³å°</h2>\n<p>GitLabæ—©æœŸçš„è®¾è®¡ç›®æ ‡æ˜¯ï¼Œåšä¸€ä¸ªç§æœ‰åŒ–çš„ç±»ä¼¼GitHubçš„Gitä»£ç æ‰˜ç®¡å¹³å°ã€‚</p>\n<p>æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦GitLabæ˜¯2013å¹´, å½“æ—¶å®ƒçš„æ¶æ„å¾ˆç®€å•ï¼ŒSSHæƒé™æ§åˆ¶è¿˜æ˜¯é€šè¿‡å’ŒGitoliteäº¤äº’å®ç°çš„ï¼Œè€Œä¸”ä¹Ÿåªæœ‰æºç å®‰è£…ï¼ˆæ ‡å‡†Ruby on Railsçš„å®‰è£…æ–¹å¼ï¼‰çš„æ–¹å¼ã€‚</p>\n<p>è¿™æ—¶ï¼ŒGitLabç»™æˆ‘æœ€æ·±çš„å°è±¡æ˜¯è¿­ä»£é€Ÿåº¦å¿«ï¼Œæ¯ä¸ªæœˆè‡³å°‘ä¼šæœ‰1ä¸ªç‹¬ç«‹çš„releaseç‰ˆæœ¬ï¼Œè¿™ä¸ªä¼ ç»Ÿä¹Ÿä¸€ç›´è¢«ä¿ç•™è‡³ä»Šã€‚ä½†æ˜¯ï¼Œéšç€GitLabçš„åŠŸèƒ½è¶Šæ¥è¶Šä¸°å¯Œï¼Œæ¶æ„å’Œæ¨¡å—è¶Šæ¥è¶Šå¤šï¼Œä¹Ÿè¶Šæ¥è¶Šå¤æ‚ã€‚</p><!-- [[[read_end]]] -->\n<p>æ‰€ä»¥ï¼Œç°åœ¨åŸºäºä»£ç è¿›è¡Œéƒ¨ç½²çš„æ–¹å¼å°±è¿‡äºå¤æ‚äº†, åˆå­¦è€…åŸºæœ¬æ— ä»ä¸‹æ‰‹ã€‚</p>\n<p><strong>å› æ­¤ï¼Œæˆ‘å»ºè®®ä½¿ç”¨å®˜æ–¹çš„Dockeré•œåƒæˆ–ä¸€é”®å®‰è£…åŒ…Omnibuså®‰è£…GitLabã€‚</strong></p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä»¥Centos 7è™šæ‹Ÿæœºä¸ºä¾‹ï¼Œæè¿°ä¸€ä¸‹æ•´ä¸ªOmnibus GitLabçš„å®‰è£…è¿‡ç¨‹ï¼Œä»¥åŠæ³¨æ„äº‹é¡¹ã€‚</p>\n<p>åœ¨å®‰è£…å‰ï¼Œä½ éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœä½¿ç”¨è™šæ‹Ÿæœºè¿›è¡Œå®‰è£…æµ‹è¯•ï¼Œå»ºè®®è™šæ‹Ÿæœºçš„â€œæœ€å¤§å†…å­˜â€é…ç½®åœ¨4 GåŠä»¥ä¸Šï¼Œå¦‚æœå°äº2 Gï¼ŒGitLabå¯èƒ½ä¼šæ— æ³•æ­£å¸¸å¯åŠ¨ã€‚</p>\n<h3>å®‰è£…GitLab</h3>\n<ol>\n<li>å®‰è£…SSHç­‰ä¾èµ–ï¼Œé…ç½®é˜²ç«å¢™ã€‚</li>\n</ol>\n<pre><code>sudo yum install -y curl policycoreutils-python openssh-server\nsudo systemctl enable sshd\nsudo systemctl start sshd\nsudo firewall-cmd --permanent --add-service=http\nsudo systemctl reload firewalld\n</code></pre>\n<ol start=\"2\">\n<li>å®‰è£…Postfixæ”¯æŒç”µå­é‚®ä»¶çš„å‘é€ã€‚</li>\n</ol>\n<pre><code>sudo yum install postfix\nsudo systemctl enable postfix\nsudo systemctl start postfix\n</code></pre>\n<ol start=\"3\">\n<li>ä»rpmæºå®‰è£…ï¼Œå¹¶é…ç½®GitLabçš„è®¿é—®åŸŸåï¼Œæµ‹è¯•æ—¶å¯ä»¥å°†å…¶é…ç½®ä¸ºè™šæ‹Ÿæœºçš„IPï¼ˆæ¯”å¦‚192.168.0.101ï¼‰ã€‚</li>\n</ol>\n<pre><code>curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash\n\nsudo EXTERNAL_URL=&quot;http://192.168.0.101&quot; yum install -y gitlab-ee\n</code></pre>\n<p>æ•´ä¸ªå®‰è£…è¿‡ç¨‹ï¼Œå¤§æ¦‚éœ€è¦10åˆ†é’Ÿå·¦å³ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡ â€œ<a href=\"http://192.168.0.101\">http://192.168.0.101</a>â€ è¿™ä¸ªåœ°å€è®¿é—®GitLabäº†ã€‚</p>\n<p>å¦‚æœä½ åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œç›¸ä¿¡ä½ å¯ä»¥åœ¨<a href=\"https://about.gitlab.com/installation/\">GitLabçš„å®˜æ–¹æ–‡æ¡£</a>ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚</p>\n<h3>é…ç½®GitLab</h3>\n<p>å®‰è£…å®Œæˆä¹‹åï¼Œè¿˜è¦è¿›è¡Œä¸€äº›ç³»ç»Ÿé…ç½®ã€‚å¯¹äºOmnibus GitLabçš„é…ç½®ï¼Œæˆ‘ä»¬åªéœ€è¦é‡ç‚¹å…³æ³¨ä¸¤æ–¹é¢çš„å†…å®¹ï¼š</p>\n<ol>\n<li>\n<p>ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·gitlab-ctlï¼Œç®¡ç†Omnibus GitLabçš„ä¸€äº›å¸¸ç”¨å‘½ä»¤ã€‚<br />\næ¯”å¦‚ï¼Œä½ æƒ³æ’æŸ¥GitLabçš„è¿è¡Œå¼‚å¸¸ï¼Œå¯ä»¥æ‰§è¡Œ gitlab-ctl tail æŸ¥çœ‹æ—¥å¿—ã€‚</p>\n</li>\n<li>\n<p>é…ç½®æ–‡ä»¶/etc/gitlab/gitlab.rbï¼ŒåŒ…å«æ‰€æœ‰GitLabçš„ç›¸å…³é…ç½®ã€‚é‚®ä»¶æœåŠ¡å™¨ã€LDAPè´¦å·éªŒè¯ï¼Œä»¥åŠæ•°æ®åº“ç¼“å­˜ç­‰é…ç½®ï¼Œç»Ÿä¸€åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ã€‚<br />\næ¯”å¦‚ï¼Œä½ æƒ³è¦ä¿®æ”¹GitLabçš„å¤–éƒ¨åŸŸåæ—¶, å¯ä»¥é€šè¿‡ä¸€æ¡æŒ‡ä»¤ä¿®æ”¹gitlab.rbæ–‡ä»¶ï¼š</p>\n</li>\n</ol>\n<pre><code>external_url 'http://newhost.com'\n</code></pre>\n<p>ç„¶åï¼Œæ‰§è¡Œ gitlab-ctl reconfigureé‡å¯é…ç½®GitLabå³å¯ã€‚</p>\n<p>å…³äºGitLabæ›´è¯¦ç»†çš„é…ç½®ï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://docs.gitlab.com/omnibus/README.html#installation-and-configuration-using-omnibus-package\">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>\n<h3>GitLabçš„äºŒæ¬¡å¼€å‘</h3>\n<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·åˆ†æå‡ºéœ€è¦ä¸ºJaråŒ…æä¾›ä¸€ä¸ªç‰¹æ®Šçš„å‘å¸ƒæ–¹å¼ï¼Œå› æ­¤æˆ‘ä»¬å†³å®šåˆ©ç”¨GitLabçš„äºŒæ¬¡å¼€å‘åŠŸèƒ½æ¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚</p>\n<p>å¯¹GitLabè¿›è¡ŒäºŒæ¬¡å¼€å‘æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶å®˜æ–¹å¼€å‘ç¯å¢ƒ gdkï¼ˆ <a href=\"https://gitlab.com/gitlab-org/gitlab-development-kit\">https://gitlab.com/gitlab-org/gitlab-development-kit</a>ï¼‰ã€‚ä½†ï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡è¿›è¡ŒGitLabäºŒæ¬¡å¼€å‘çš„è¯ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®ä½ æŒ‰ç…§ <a href=\"https://docs.gitlab.com/ee/install/installation.html%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1%E5%9F%BA%E4%BA%8E%E6%BA%90%E7%A0%81%E7%9A%84%E5%AE%89%E8%A3%85\">https://docs.gitlab.com/ee/install/installation.html</a> è¿›è¡Œä¸€æ¬¡åŸºäºæºç çš„å®‰è£…ï¼Œè¿™å°†æœ‰åŠ©äºä½ æ›´å¥½åœ°ç†è§£GitLabçš„æ•´ä¸ªæ¶æ„ã€‚</p>\n<p>ä¸ºäº†åé¢æ›´é«˜æ•ˆåœ°è§£å†³äºŒæ¬¡å¼€å‘çš„é—®é¢˜ï¼Œæˆ‘å…ˆå’Œä½ ä»‹ç»ä¸€ä¸‹GitLabçš„å‡ ä¸ªä¸»è¦æ¨¡å—ï¼š</p>\n<ul>\n<li>Unicornï¼Œæ˜¯ä¸€ä¸ªWeb Serverï¼Œç”¨äºæ”¯æŒ GitLabçš„ä¸»ä½“Webåº”ç”¨ï¼›</li>\n<li>Sidekiqï¼Œé˜Ÿåˆ—æœåŠ¡ï¼Œéœ€è¦Redisæ”¯æŒï¼Œç”¨ä»¥æ”¯æŒGitLabçš„å¼‚æ­¥ä»»åŠ¡ï¼›</li>\n<li>GitLab Shellï¼ŒGit SSHçš„æƒé™ç®¡ç†æ¨¡å—ï¼›</li>\n<li>Gitalyï¼ŒGit RPCæœåŠ¡ï¼Œç”¨äºå¤„ç†GitLabå‘å‡ºçš„gitæ“ä½œï¼›</li>\n<li>GitLab Workhorseï¼ŒåŸºäºGoè¯­è¨€ï¼Œç”¨äºæ¥æ›¿Unicornå¤„ç†æ¯”è¾ƒå¤§çš„httpè¯·æ±‚ã€‚</li>\n</ul>\n<p><img src=\"https://static001.geekbang.org/resource/image/99/59/99b692ac7f885af249a8ebf6567f3559.png?wh=1920*1548\" alt=\"\" /></p>\n<center>å›¾1 GitLabæ¶æ„å›¾ï¼ˆå¼•è‡ªGitLabå®˜ç½‘ï¼‰</center>\n<p>å¯¹GitLabåº”ç”¨å±‚çš„ä¿®æ”¹ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨çš„æ˜¯GitLab Railså’ŒGitLab Shellè¿™ä¸¤ä¸ªå­ç³»ç»Ÿã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹ä¸€ä¸ªäºŒæ¬¡å¼€å‘çš„å…·ä½“å®ä¾‹å§ã€‚</p>\n<h3>äºŒæ¬¡å¼€å‘çš„ä¾‹å­</h3>\n<p>äºŒæ¬¡å¼€å‘ï¼Œæœ€å¸¸è§çš„æ˜¯å¯¹GitLabæ·»åŠ ä¸€ä¸ªå¤–éƒ¨æœåŠ¡è°ƒç”¨ï¼Œè¿™éƒ¨åˆ†éœ€è¦åœ¨app/models/project_servicesä¸‹é¢æ·»åŠ ç›¸å…³çš„ä»£ç ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥å‚è€ƒGitLabå¯¹Microsoft Teamsçš„æ”¯æŒæ–¹å¼ï¼š</p>\n<ol>\n<li>åœ¨app/models/project_services/microsoft_teams_service.rbä¸‹ï¼Œæ·»åŠ ä¸€äº›å¯é…ç½®å†…å®¹åŠå…¶å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨GitLabçš„serviceæ¨¡å—é¡µé¢ä¸‹çœ‹åˆ°ç›¸åº”çš„é…ç½®é¡¹äº†ã€‚</li>\n</ol>\n<pre><code># frozen_string_literal: true\n\nclass MicrosoftTeamsService &lt; ChatNotificationService\n  def title\n    'Microsoft Teams Notification'\n  end\n\n  def description\n    'Receive event notifications in Microsoft Teams'\n  end\n\n  def self.to_param\n    'microsoft_teams'\n  end\n\n  def help\n    'This service sends notifications about projects events to Microsoft Teams channels.&lt;br /&gt;\n    To set up this service:\n    &lt;ol&gt;\n      &lt;li&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/microsoft-teams/connectors&quot;&gt;Getting started with 365 Office Connectors For Microsoft Teams&lt;/a&gt;.&lt;/li&gt;\n      &lt;li&gt;Paste the &lt;strong&gt;Webhook URL&lt;/strong&gt; into the field below.&lt;/li&gt;\n      &lt;li&gt;Select events below to enable notifications.&lt;/li&gt;\n    &lt;/ol&gt;'\n  end\n\n  def webhook_placeholder\n    'https://outlook.office.com/webhook/â€¦'\n  end\n\n  def event_field(event)\n  end\n\n  def default_channel_placeholder\n  end\n\n  def default_fields\n    [\n      { type: 'text', name: 'webhook', placeholder: &quot;e.g. #{webhook_placeholder}&quot; },\n      { type: 'checkbox', name: 'notify_only_broken_pipelines' },\n      { type: 'checkbox', name: 'notify_only_default_branch' }\n    ]\n  end\n\n  private\n\n  def notify(message, opts)\n    MicrosoftTeams::Notifier.new(webhook).ping(\n      title: message.project_name,\n      summary: message.summary,\n      activity: message.activity,\n      attachments: message.attachments\n    )\n  end\n\n  def custom_data(data)\n    super(data).merge(markdown: true)\n  end\nend\n</code></pre>\n<ol start=\"2\">\n<li>åœ¨lib/microsoft_teams/notifier.rb å†…å®ç°æœåŠ¡çš„å…·ä½“è°ƒç”¨é€»è¾‘ã€‚</li>\n</ol>\n<pre><code>module MicrosoftTeams\n  class Notifier\n    def initialize(webhook)\n      @webhook = webhook\n      @header = { 'Content-type' =&gt; 'application/json' }\n    end\n\n    def ping(options = {})\n      result = false\n\n      begin\n        response = Gitlab::HTTP.post(\n          @webhook.to_str,\n          headers: @header,\n          allow_local_requests: true,\n          body: body(options)\n        )\n\n        result = true if response\n      rescue Gitlab::HTTP::Error, StandardError =&gt; error\n        Rails.logger.info(&quot;#{self.class.name}: Error while connecting to #{@webhook}: #{error.message}&quot;)\n      end\n\n      result\n    end\n\n    private\n\n    def body(options = {})\n      result = { 'sections' =&gt; [] }\n      result['title'] = options[:title]\n      result['summary'] = options[:summary]\n      result['sections'] &lt;&lt; MicrosoftTeams::Activity.new(options[:activity]).prepare\n\n      attachments = options[:attachments]\n      unless attachments.blank?\n        result['sections'] &lt;&lt; {\n          'title' =&gt; 'Details',\n          'facts' =&gt; [{ 'name' =&gt; 'Attachments', 'value' =&gt; attachments }]\n        }\n      end\n\n      result.to_json\n    end\n  end\nend\n</code></pre>\n<p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ServiceäºŒæ¬¡å¼€å‘çš„ä¾‹å­ã€‚ç†Ÿæ‚‰äº†Railså’ŒGitLabæºç åï¼Œä½ å®Œå…¨å¯ä»¥ä»¥æ­¤ç±»æ¨å†™å‡ºæ›´å¤æ‚çš„Serviceã€‚</p>\n<h3>GitLabçš„HAæ–¹æ¡ˆ</h3>\n<p>å¯¹äºç ”å‘äººå‘˜æ•°é‡å°äº1000çš„å›¢é˜Ÿï¼Œæˆ‘ä¸å»ºè®®ä½ è€ƒè™‘GitLab æœåŠ¡å¤šæœºæ°´å¹³æ‰©å±•çš„æ–¹æ¡ˆã€‚GitLabå®˜æ–¹ç»™å‡ºäº†ä¸€ä¸ªå†…å­˜å¯¹åº”ç”¨æˆ·æ•°é‡çš„å‚ç…§ï¼Œå¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>16 GB RAM supports up to 2000 users<br />\n128 GB RAM supports up to 16000 users</p>\n</blockquote>\n<p>ä»è¿™ä¸ªé…ç½®å‚ç…§æ•°æ®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€å°é«˜é…çš„è™šæ‹Ÿæœºæˆ–è€…å®¹å™¨å¯ä»¥æ”¯æŒ2000åç ”å‘äººå‘˜çš„æ“ä½œï¼Œè€Œå•å°ç‰©ç†æœºï¼ˆ128 GBé…ç½®ï¼‰è¶³ä»¥ä¾›ä¸Šä¸‡ç ”å‘äººå‘˜ä½¿ç”¨ã€‚</p>\n<p>åœ¨æºç¨‹ï¼Œé™¤äº†è¦æ”¯æŒå¼€å‘äººæ•°å¤–ï¼Œè¿˜è¦è€ƒè™‘åˆ°é«˜å¯ç”¨çš„éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»è¿‡äºŒæ¬¡å¼€å‘ååšäº†GitLabçš„æ°´å¹³æ‰©å±•ã€‚ä½†æ˜¯ï¼Œå³ä½¿åœ¨æ¯å¤©çš„GitLabä½¿ç”¨é«˜å³°æœŸï¼Œæ•´æœºè´Ÿè½½ä¹Ÿéå¸¸ä½ã€‚å› æ­¤ï¼Œå¯¹äºå¤§éƒ¨åˆ†çš„ç ”å‘å›¢é˜Ÿè€Œè¨€ï¼Œåšå¤šæœºæ°´å¹³æ‰©å±•æ–¹æ¡ˆçš„æ„ä¹‰å¹¶ä¸å¤ªå¤§ã€‚</p>\n<p>åŒæ—¶ï¼Œå®ç°GitLabçš„å®Œæ•´æ°´å¹³æ‰©å±•æ–¹æ¡ˆï¼Œä¹Ÿå¹¶ä¸æ˜¯ä¸€ä»¶æ˜“äº‹ã€‚</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/4f/bc/4f97f12fb4a0645785600c44ef12f3bc.png?wh=1400*2188\" alt=\"\" /></p>\n<center>å›¾2 GitLabå®˜æ–¹HAæ–¹æ¡ˆï¼ˆå¼•è‡ªGitLabå®˜ç½‘ï¼‰</center>\n<p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ç¤¾åŒºç‰ˆçš„GitLabï¼Œå®˜æ–¹æä¾›çš„HAæ–¹æ¡ˆçš„æ•´ä½“æ¶æ„å›¾å¯å‚è€ƒå›¾2ã€‚ä»æ•´ä½“æ¶æ„ä¸Šçœ‹ï¼ŒPostgreSQLã€Redisè¿™ä¸¤ä¸ªæ¨¡å—çš„é«˜å¯ç”¨ï¼Œéƒ½æœ‰é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚è€ŒGitLabåœ¨æ¶æ„ä¸Šæœ€å¤§çš„é—®é¢˜æ˜¯ï¼Œéœ€è¦é€šè¿‡æ–‡ä»¶ç³»ç»Ÿåœ¨æœ¬åœ°è®¿é—®ä»“åº“æ–‡ä»¶ã€‚äºæ˜¯ï¼Œ<strong>æ°´å¹³æ‰©å±•æ—¶ï¼Œå¦‚ä½•æŠŠæœ¬åœ°çš„ä»“åº“æ–‡ä»¶å½“åšæ•°æ®èµ„æºåœ¨æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œè¯»å†™å°±å˜æˆäº†ä¸€ä¸ªéš¾é¢˜ã€‚</strong></p>\n<p>å®˜æ–¹æ¨èçš„æ–¹æ¡ˆæ˜¯é€šè¿‡NFSè¿›è¡Œå¤šæœºGitä»“åº“å…±äº«ã€‚ä½†è¿™ä¸ªæ–¹æ¡ˆåœ¨å®é™…ä½¿ç”¨ä¸­å¹¶ä¸å¯è¡Œï¼Œgitæœ¬èº«æ˜¯IOå¯†é›†å‹åº”ç”¨ï¼Œå¯¹äºçœŸæ­£åœ¨æ€§èƒ½ä¸Šæœ‰æ°´å¹³æ‰©å±•è¯‰æ±‚çš„ç”¨æˆ·æ¥è¯´ï¼ŒNFSçš„æ€§èƒ½å¾ˆå¿«å°±ä¼šæˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆã€‚æˆ‘æ—©æœŸåœ¨ç¾å›¢ç‚¹è¯„æ­å»ºæŒç»­äº¤ä»˜ä½“ç³»æ—¶ï¼Œæ›¾å°è¯•è¿‡è¿™ä¸ªæ–¹æ¡ˆï¼Œå½“è¾¾åˆ°å‡ ç™¾ä¸ªä»“åº“çš„è§„æ¨¡æ—¶ï¼ŒNFSå°±æ’‘ä¸ä½äº†ã€‚</p>\n<p>å¯¹äºæ°´å¹³æ‰©å±•è¿™éƒ¨åˆ†å†…å®¹ï¼Œæœ‰ä¸€ä¸ªéå¸¸ä¸é”™çš„åˆ†äº«ï¼šé˜¿é‡Œçš„<a href=\"https://ruby-china.org/topics/30146\">ã€Šæˆ‘ä»¬å¦‚ä½•ä¸ºä¸‰ä¸‡äººçš„å…¬å¸æ¨ªå‘ä¼¸ç¼© GitLabã€‹</a>ã€‚ä½†æ˜¯ï¼Œå®æ–½è¿™ä¸ªæ–¹æ¡ˆï¼Œä½ éœ€è¦åƒé€Gitçš„åº•å±‚ï¼Œæ‰€ä»¥å¹¶ä¸å®¹æ˜“å®æ–½ã€‚</p>\n<p>è€Œæºç¨‹çš„è§£å†³æ–¹æ¡ˆå°±æ¯”è¾ƒç®€å•äº†ï¼š</p>\n<blockquote>\n<p>æˆ‘ä»¬åœ¨åº”ç”¨å±‚å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œæ ¹æ®Gitä»“åº“çš„groupåå­—åšäº†ä¸€ä¸ªç®€å•åˆ‡åˆ†ï¼Œå¹¶ä½¿ç”¨ssh2å¯¹äºGitè®¿é—®åšä¸€æ¬¡ä»£ç†ï¼Œä¿è¯å¯¹äºä¸åŒé¡¹ç›®çš„httpè®¿é—®ï¼Œèƒ½å¤Ÿåˆ†é…åˆ°ç¡®å®šçš„æœºå™¨ä¸Šã€‚</p>\n</blockquote>\n<p>è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯ï¼Œå®æ–½èµ·æ¥ç›¸å¯¹ç®€å•ï¼Œç¼ºç‚¹æ˜¯æ— æ³•å‘ä¸Šå…¼å®¹ï¼Œå‡çº§GitLabä¼šæ¯”è¾ƒéº»çƒ¦ã€‚</p>\n<p>å½“ç„¶ï¼Œä½ è¿˜å¯ä»¥å‚è€ƒ<a href=\"https://docs.gitlab.com/ee/administration/high_availability/README.html\">GitLabçš„å®˜æ–¹å»ºè®®</a>ï¼Œå¹¶ç»“åˆæˆ‘åˆ†äº«çš„ç»éªŒå®Œæˆè‡ªå·±çš„HAæ–¹æ¡ˆã€‚</p>\n<h2>å¦‚ä½•åº”å¯¹ä»£ç ç®¡ç†çš„éœ€æ±‚ï¼Ÿ</h2>\n<p>æˆ‘ä»¬å…ˆä¸€èµ·å›å¿†ä¸€ä¸‹ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¯¹ä»£ç ç®¡ç†å¹³å°çš„éœ€æ±‚ï¼Œå³è¦æ±‚èƒ½å¤Ÿæ”¯æŒ3ä¸ªå›¢é˜Ÿçš„å¼€å‘å·¥ä½œï¼Œä¸”å…·å¤‡code reviewå’Œé™æ€ä»£ç æ£€æŸ¥çš„åŠŸèƒ½ã€‚</p>\n<p>è¦å®ç°è¿™äº›éœ€æ±‚ï¼Œæˆ‘éœ€è¦å…ˆå’Œä½ ä»‹ç»ä¸€ä¸‹GitLabæä¾›çš„å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„åŠŸèƒ½ã€‚</p>\n<h3>äº†è§£GitLabæä¾›çš„åŠŸèƒ½</h3>\n<p>Gitlabä½œä¸ºå¼€æºçš„ä»£ç ç®¡ç†å¹³å°ï¼Œå…¶åŸç”Ÿä¹Ÿæä¾›äº†ä¸å°‘ä¼˜ç§€çš„åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥å¸®åŠ©æˆ‘ä»¬è§£å†³ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„ä¸€äº›éœ€æ±‚ã€‚è¿™äº›åŠŸèƒ½ä¸»è¦åŒ…æ‹¬ï¼š</p>\n<ol>\n<li>\n<p>Merge Requests<br />\nåˆ†æ”¯ä»£ç å®¡æ ¸åˆå¹¶åŠŸèƒ½ï¼Œå…³äºMerge Requestå’Œåˆ†æ”¯ç­–ç•¥ã€‚ä½ å¯ä»¥å›é¡¾ä¸€ä¸‹ç¬¬å››ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/10858\">ã€Š ä¸€åˆ‡çš„æºå¤´ï¼Œä»£ç åˆ†æ”¯ç­–ç•¥çš„é€‰æ‹©ã€‹</a>å’Œ ç¬¬ä¸ƒç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/11323\">ã€Šâ€œä¸¤ä¸ªæŠ«è¨â€å›¢é˜Ÿçš„ä»£ç ç®¡ç†å®é™…æ¡ˆä¾‹ã€‹</a>çš„å†…å®¹ã€‚<br />\nä¹‹åå°±æ˜¯ï¼Œæˆ‘ä»¬æ ¹æ®ä¸åŒçš„å›¢é˜Ÿæ€§è´¨ï¼Œé€‰æ‹©ä¸åŒçš„åˆ†æ”¯ç®¡ç†ç­–ç•¥äº†ã€‚<br />\næ¯”å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„è¿™ä¸ªç³»ç»Ÿä¸­ï¼šä¸­é—´ä»¶å›¢é˜Ÿåªæœ‰6ä¸ªå¼€å‘äººå‘˜ï¼Œä¸”éƒ½æ˜¯èµ„æ·±çš„å¼€å‘äººå‘˜ï¼Œä»–ä»¬åœ¨é¡¹ç›®çš„å‘ä¸‹å…¼å®¹æ–¹é¢ä¹Ÿåšå¾—å¾ˆå¥½ï¼Œæ‰€ä»¥æ•´ä¸ªå›¢é˜Ÿé€‰æ‹©äº†ä¸»å¹²å¼€å‘çš„åˆ†æ”¯ç­–ç•¥ï¼Œä»¥ä¿è¯æœ€é«˜çš„å¼€å‘æ•ˆç‡ã€‚<br />\nåŒæ—¶ï¼Œåå°å›¢é˜Ÿå’ŒiOSå›¢é˜Ÿå„æœ‰20ä¸ªå¼€å‘äººå‘˜ï¼Œå…¶ä¸­iOSå›¢é˜Ÿä¸€èˆ¬æ˜¯æ¯å‘¨ä¸‰ä¸‹åˆè¿›è¡Œå‘å¸ƒï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå›¢é˜Ÿéƒ½é€‰æ‹©äº†GitLab Flowçš„åˆ†æ”¯ç­–ç•¥ã€‚</p>\n</li>\n<li>\n<p>issues<br />\nå¯ä»¥é€šè¿‡åˆ—è¡¨å’Œçœ‹æ¿ä¸¤ç§è§†å›¾ç®¡ç†å¼€å‘ä»»åŠ¡å’ŒBugã€‚åœ¨æºç¨‹ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ä¸€äº›å›¢é˜Ÿæ˜¯é€šè¿‡åˆ—è¡¨è§†å›¾ç®¡ç†Bugï¼Œé€šè¿‡çœ‹æ¿è§†å›¾ç»´æŠ¤éœ€æ±‚å’Œå¼€å‘ä»»åŠ¡ã€‚</p>\n</li>\n<li>\n<p>CI/CD<br />\nGitLabå’ŒGitLab-cié›†æˆçš„ä¸€äº›åŠŸèƒ½ï¼Œæ”¯æŒpiplineå’Œä¸€äº›CIç»“æœçš„å±•ç¤ºã€‚æºç¨‹åœ¨æ‰“é€ æŒç»­äº¤ä»˜ç³»ç»Ÿæ—¶ï¼ŒGitLab-ciçš„åŠŸèƒ½è¿˜å¹¶ä¸å®Œå–„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å¯¹æ­¤ç›¸å…³çš„åŠŸèƒ½è¿›è¡Œè°ƒç ”ï¼Œç›´æ¥è‡ªç ”äº†CI/CDçš„é©±åŠ¨ã€‚<br />\nä¸è¿‡ï¼Œç”±äºGitLab-ciå’ŒGitLabå¤©ç”Ÿçš„é›†æˆç‰¹æ€§ï¼Œç›®å‰ä¹Ÿæœ‰ä¸å°‘å…¬å¸ä½¿ç”¨å®ƒä½œä¸ºæŒç»­é›†æˆå·¥ä½œæµã€‚ä½ ä¹Ÿå¯å°è¯•ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå®ƒçš„é…ç½®å¾ˆç®€å•ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚è€Œåœ¨ä¸“æ ä¸­æˆ‘ä¼šä»¥æœ€æµè¡Œçš„Jenkins Pipelineæ¥è®²è§£è¿™éƒ¨åˆ†åŠŸèƒ½ã€‚</p>\n</li>\n<li>\n<p>Integrations<br />\nIntegrationsåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š</p>\n<ul>\n<li>GitLab serviceï¼Œæ˜¯åœ¨GitLabå†…éƒ¨å®ç°çš„ï¼Œä¸ä¸€äº›ç¼ºé™·ç®¡ç†ã€å›¢é˜Ÿåä½œç­‰å·¥å…·çš„é›†æˆæœåŠ¡ã€‚</li>\n<li>Webhookï¼Œæ”¯æŒåœ¨GitLabè§¦å‘ä»£ç pushã€Merge Requestç­‰äº‹ä»¶æ—¶è¿›è¡Œhttpæ¶ˆæ¯æ¨é€ã€‚</li>\n</ul>\n</li>\n</ol>\n<p>æˆ‘åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»çš„ä»£ç ç®¡ç†ä¸Jenkinsé›†æˆï¼Œå°±æ˜¯é€šè¿‡Webhookä»¥åŠJenkinsçš„GitLab pluginå®ç°çš„ã€‚</p>\n<p>ç†è§£äº†GitLabçš„å‡ ä¸ªé‡è¦åŠŸèƒ½åï¼Œä¾¿å¯ä»¥åˆæ­¥åº”å¯¹ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„å‡ ä¸ªéœ€æ±‚äº†ã€‚ä¹‹åï¼Œæ­å»ºå¥½çš„GitLabå¹³å°ï¼Œæ»¡è¶³ä»£ç ç®¡ç†çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‰æ­¥å®ç°ï¼š</p>\n<ol>\n<li>\n<p>åˆ›å»ºå¯¹åº”çš„ä»£ç ä»“åº“ï¼›</p>\n</li>\n<li>\n<p>é…ç½®Sonaré™æ€æ£€æŸ¥ï¼›</p>\n</li>\n<li>\n<p>è§£å†³å…¶ä»–è®¾ç½®ã€‚</p>\n</li>\n</ol>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å’Œä½ åˆ†äº«ä¸€ä¸‹ï¼Œæ¯ä¸€æ­¥ä¸­çš„å…³é”®ç‚¹ï¼Œä»¥åŠå…·ä½“å¦‚ä½•æ»¡è¶³ç›¸åº”çš„ä»£ç éœ€æ±‚ã€‚</p>\n<h3>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºå¯¹åº”çš„ä»£ç ä»“åº“</h3>\n<p>äº†è§£äº†GitLabçš„åŠŸèƒ½ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å»ºç«‹ä¸éœ€æ±‚ç›¸å¯¹åº”çš„Projectsäº†ã€‚</p>\n<p>å› ä¸ºæ•´ä¸ªé¡¹ç›®åŒ…æ‹¬äº†ä¸­é—´ä»¶æœåŠ¡ã€ä¸šåŠ¡åå°æœåŠ¡ï¼Œä»¥åŠä¸šåŠ¡å®¢æˆ·ç«¯æœåŠ¡è¿™ä¸‰ä¸ªèŒè´£ï¼Œæ‰€ä»¥ç›¸åº”çš„æˆ‘ä»¬å°±éœ€è¦åœ¨GitLabä¸Šåˆ›å»º3ä¸ªgroupï¼Œå¹¶åˆ†åˆ«æäº¤3ä¸ªå›¢é˜Ÿçš„é¡¹ç›®ã€‚</p>\n<ul>\n<li>å¯¹äºä¸­é—´ä»¶å›¢é˜Ÿï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºframework/configçš„é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®æœ€ç»ˆä¼šæä¾›ä¸€ä¸ªé…ç½®ä¸­å¿ƒçš„æœåŠ¡ï¼Œå¹¶ä¸”ç”Ÿæˆä¸€ä¸ªconfig-client.jarçš„å®¢æˆ·ç«¯ï¼Œä¾›åå°å›¢é˜Ÿä½¿ç”¨ã€‚</li>\n<li>åå°æœåŠ¡å›¢é˜Ÿçš„é¡¹ç›®åä¸ºï¼šwaimai/waimai-serviceï¼Œäº§ç‰©æ˜¯ä¸€ä¸ªwaråŒ…ã€‚</li>\n<li>ç§»åŠ¨å›¢é˜Ÿåˆ›å»ºä¸€ä¸ªReact Nativeé¡¹ç›®mobile/waimai-appã€‚</li>\n</ul>\n<h3>ç¬¬äºŒæ­¥ï¼Œé…ç½®Sonaré™æ€æ£€æŸ¥</h3>\n<p>åˆ›å»ºäº†ä¸‰ä¸ªä»£ç ä»“åº“ä¹‹åï¼Œä¸ºäº†åç»­åœ¨æ„å»ºæ—¶è¿›è¡Œä»£ç é™æ€æ£€æŸ¥ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬è¿˜éœ€è¦åšçš„å°±æ˜¯é…ç½®ä»£ç é™æ€æ‰«æå·¥å…·ã€‚è€Œåœ¨è¿™é‡Œï¼Œæˆ‘ä¾æ—§ä»¥Sonarä¸ºä¾‹è¿›è¡Œä¸‹é¢è¯¦è§£ã€‚</p>\n<p>æˆ‘ä»¬åœ¨ä½¿ç”¨SonarQubeæœåŠ¡è¿›è¡Œé™æ€æ£€æŸ¥æ—¶ï¼Œéœ€è¦æ³¨æ„çš„é—®é¢˜åŒ…æ‹¬ï¼š</p>\n<p>Sonarçš„æ­å»ºæ¯”è¾ƒç®€å•ï¼Œä» <a href=\"https://www.sonarqube.org/downloads/\">https://www.sonarqube.org/downloads/</a> ä¸‹è½½Sonarçš„å‹ç¼©åŒ…ä»¥åï¼Œåœ¨ conf/sonar.properties ä¸­é…ç½®å¥½æ•°æ®åº“çš„è¿æ¥ä¸²ï¼Œç„¶åæ‰§è¡Œbin/linux-x86-64/sonar.sh startå‘½ä»¤ã€‚ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å†æŸ¥çœ‹ä¸€ä¸‹æ—¥å¿—logs/sonar.logï¼Œå½“æ—¥å¿—æç¤ºâ€œSonarQube is upâ€æ—¶å°±å¯ä»¥é€šè¿‡http://localhost:9000è®¿é—®sonaräº†ã€‚ï¼ˆå¦‚æœä½ æœ‰ä¸æ˜ç™½çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒ <a href=\"https://docs.sonarqube.org/display/SONAR/Installing+the+Server\">https://docs.sonarqube.org/display/SONAR/Installing+the+Server</a>ï¼‰</p>\n<p>å’ŒGitLabçš„æ‰©å±•ä¸€èˆ¬åªèƒ½é€šè¿‡äºŒæ¬¡å¼€å‘ä¸åŒï¼ŒSonaré€šè¿‡pluginçš„æ–¹å¼å°±å¯ä»¥å®Œæˆæ‰©å±•ã€‚åœ¨extensions/pluginsç›®å½•ä¸‹é¢å·²ç»é¢„ç½®äº†åŒ…å« Javaã€Pythonã€PHP ç­‰è¯­è¨€æ”¯æŒï¼Œä»¥åŠLDAPè®¤è¯ç­‰æ’ä»¶ã€‚ä½ å¯ä»¥é€šè¿‡ç›´æ¥å®‰è£…æ’ä»¶çš„æ–¹å¼è¿›è¡Œæ‰©å±•ã€‚</p>\n<p>æ’ä»¶å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥å°è¯•åœ¨æœ¬åœ°ä½¿ç”¨Mavenå‘½ä»¤ï¼Œå¯¹ä¸­é—´ä»¶å’Œåå°å›¢é˜Ÿçš„Javaé¡¹ç›®è¿›è¡Œé™æ€æ£€æŸ¥äº†ï¼ŒReact Nativeé¡¹ç›®åˆ™æ˜¯é€šè¿‡sonar-scanneré…åˆESLintå®Œæˆé™æ€æ£€æŸ¥çš„ã€‚</p>\n<p>GitLabçš„Merge Requestéœ€è¦é€šè¿‡è§¦å‘Jenkinsæ„å»º Sonar æ¥é©±åŠ¨ä»£ç çš„æŒç»­é™æ€æ£€æŸ¥ï¼Œè‡³äºå¦‚ä½•é›†æˆæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­å’Œä½ è¯¦ç»†ä»‹ç»ã€‚</p>\n<p>å…³äºé™æ€æ£€æŸ¥çš„æ›´å¤šçŸ¥è¯†ç‚¹ï¼Œä½ å¯ä»¥å†å›é¡¾ä¸€ä¸‹ç¬¬äºŒåäº”ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/14407\">ã€Šä»£ç é™æ€æ£€æŸ¥å®è·µã€‹</a>ã€‚</p>\n<h3>ç¬¬ä¸‰æ­¥ï¼Œè§£å†³å…¶ä»–è®¾ç½®</h3>\n<p>ç»è¿‡åˆ›å»ºå¯¹åº”çš„ä»£ç ä»“åº“ã€é…ç½®Sonaré™æ€æ£€æŸ¥è¿™ä¸¤æ­¥ï¼Œå†é…åˆä½¿ç”¨GitLabæä¾›çš„Merge Requestã€Issuesã€CI/CDå’ŒIntegrationåŠŸèƒ½ï¼Œä»£ç ç®¡ç†å¹³å°åŸºæœ¬ä¸Šå°±ç®—é¡ºåˆ©æ­å»ºå®Œæ¯•äº†ã€‚</p>\n<p>ä¹‹åå‰©ä½™çš„äº‹æƒ…åŒ…æ‹¬ï¼š</p>\n<ol>\n<li>\n<p>ä¸ºé¡¹ç›®æ·»åŠ å¼€å‘è€…åŠå¯¹åº”çš„è§’è‰²ï¼›</p>\n</li>\n<li>\n<p>æ ¹æ®åˆ†æ”¯ç­–ç•¥ï¼Œè®¾å®šä¿æŠ¤åˆ†æ”¯ï¼Œä»…å…è®¸Merge Requestæäº¤ï¼›</p>\n</li>\n<li>\n<p>åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ã€‚</p>\n</li>\n</ol>\n<p>è‡³æ­¤ï¼Œæˆ‘ä»¬éœ€è¦çš„ä»£ç ç®¡ç†å¹³å°å°±çœŸçš„æ­å»ºå¥½äº†ï¼Œå¼€å‘äººå‘˜å¯ä»¥å®‰å¿ƒå†™ä»£ç äº†ã€‚</p>\n<h2>æ€»ç»“åŠå®è·µ</h2>\n<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ¸…æ¥šäº†æ•´ä¸ªæŒç»­äº¤ä»˜ä½“ç³»ä¸­ï¼Œä»£ç ç®¡ç†å¹³å°è¦å…·å¤‡çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘å°±åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå’Œä½ ä¸€èµ·ä½¿ç”¨GitLabå®Œæˆäº†è¿™ä¸ªä»£ç ç®¡ç†å¹³å°çš„æ­å»ºã€‚</p>\n<p>é¦–å…ˆï¼Œæˆ‘ä»‹ç»äº†GitLabçš„å®‰è£…åŠé…ç½®è¿‡ç¨‹ï¼Œå¹¶é€šè¿‡Microsoft Teamsè¿™ä¸ªå…·ä½“æ¡ˆä¾‹ï¼Œä»‹ç»äº†å¦‚ä½•å®ŒæˆGitLabçš„äºŒæ¬¡å¼€å‘ï¼Œä»¥åº”å¯¹å®é™…ä¸šåŠ¡çš„éœ€æ±‚ã€‚åŒæ—¶ï¼Œæˆ‘è¿˜ä»‹ç»äº†GitLabçš„é«˜å¯ç”¨æ–¹æ¡ˆã€‚</p>\n<p>ç„¶åï¼Œæˆ‘é’ˆå¯¹ä»£ç ç®¡ç†å¹³å°è¦æ”¯æŒ3ä¸ªå›¢é˜Ÿçš„code reivewå’Œä»£ç é™æ€æ‰«æçš„éœ€æ±‚ï¼Œå’Œä½ åˆ†äº«äº†å¦‚ä½•ä½¿ç”¨ä¸‰æ­¥å®ç°è¿™äº›éœ€æ±‚ï¼š</p>\n<ul>\n<li>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºå¯¹åº”çš„ä»£ç ä»“åº“ï¼›</li>\n<li>ç¬¬äºŒæ­¥ï¼Œé…ç½®Sonaré™æ€æ£€æŸ¥ï¼›</li>\n<li>ç¬¬ä¸‰æ­¥ï¼Œè§£å†³å…¶ä»–è®¾ç½®ã€‚</li>\n</ul>\n<p>å®Œæˆä»¥ä¸Šå·¥ä½œåï¼Œæˆ‘ä»¬çš„ä»£ç ç®¡ç†å¹³å°å°±å¯ä»¥æ­£å¼è¿ä½œäº†ï¼Œä¹Ÿä¸ºæˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è¦æ­å»ºçš„ç¼–è¯‘æ„å»ºå¹³å°åšå¥½äº†å‡†å¤‡ã€‚</p>\n<p>æœ€åï¼Œå¸Œæœ›ä½ å¯ä»¥æŒ‰ç…§è¿™ç¯‡æ–‡ç« çš„å†…å®¹ï¼Œè‡ªå·±åŠ¨æ‰‹å®é™…æ­å»ºä¸€å¥—GitLabï¼Œä»¥åŠé…å¥—çš„SonaræœåŠ¡ã€‚</p>\n<p>åƒé‡Œä¹‹è¡Œå§‹äºè¶³ä¸‹ï¼Œå¦‚æœæ­å»ºè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿ç»™æˆ‘ç•™è¨€ä¸€èµ·è®¨è®ºã€‚</p>\n<p></p>\n","neighbors":{"left":{"article_title":"34 | å¿«é€Ÿæ„å»ºæŒç»­äº¤ä»˜ç³»ç»Ÿï¼ˆä¸€ï¼‰ï¼šéœ€æ±‚åˆ†æ","id":40082},"right":{"article_title":"36 | å¿«é€Ÿæ„å»ºæŒç»­äº¤ä»˜ç³»ç»Ÿï¼ˆä¸‰ï¼‰ï¼šJenkins è§£å†³é›†æˆæ‰“åŒ…é—®é¢˜","id":40412}},"comments":[{"had_liked":false,"id":148267,"user_name":"æ¡ƒå­-å¤å‹‡æ°","can_delete":false,"product_type":"c1","uid":1158436,"ip_address":"","ucode":"5D5F38AABA980F","user_header":"https://static001.geekbang.org/account/avatar/00/11/ad/24/c6b763b4.jpg","comment_is_top":false,"comment_ctime":1572966181,"is_pvip":true,"replies":[{"id":"57363","content":"gitlabç®—æ˜¯ä¸€ä¸ªä»£ç ç®¡ç†å¹³å°ï¼Œå¯ä»¥åˆ©ç”¨å®ƒå®ç°å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚pipelineç­‰ç­‰ï¼Œä½†ä¹Ÿä¸æ˜¯å¿…é¡»è¦ä¾é å®ƒæ¥å®Œæˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ½‡ä¿Š","uid":"1004285","ctime":1573182814,"ip_address":"","comment_id":148267,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14457868069","product_id":100009701,"comment_content":"æ²¡å¤ªçœ‹æ˜ç™½ï¼Œä¸ºä»€ä¹ˆè¦å¯¹gitlabåšäºŒæ¬¡å¼€å‘ã€‚jarçš„å‘å¸ƒä¸gitlabæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿgitlabä¸å°±æ˜¯ä¸€ä¸ªä»£ç ç‰ˆæœ¬åº“å·¥å…·ä¹ˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"æ½‡ä¿Š","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473446,"discussion_content":"gitlabç®—æ˜¯ä¸€ä¸ªä»£ç ç®¡ç†å¹³å°ï¼Œå¯ä»¥åˆ©ç”¨å®ƒå®ç°å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚pipelineç­‰ç­‰ï¼Œä½†ä¹Ÿä¸æ˜¯å¿…é¡»è¦ä¾é å®ƒæ¥å®Œæˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573182814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26947,"user_name":"é“­ç†™","can_delete":false,"product_type":"c1","uid":1002829,"ip_address":"","ucode":"047C3DB06F5C27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/4d/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1537781348,"is_pvip":false,"replies":[{"id":"9915","content":"æºç¨‹çš„æ–¹æ¡ˆå°±æ˜¯åšsharding+äº’å¤‡ï¼Œåˆ©ç”¨ssh2ä½œä¸ºä»£ç†è¾¾åˆ°å¯¹sshè¯·æ±‚çš„åˆ†æµï¼Œè¿™æ ·æ¯å°æœåŠ¡å™¨ä¸ŠåªæœåŠ¡ç‰¹å®šä»“åº“ï¼Œå†é…ç½®ä»“åº“äº’å¤‡ï¼Œåœ¨éƒ¨åˆ†æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ä¿®æ”¹shardingç­–ç•¥å¼•æµåˆ°å¤‡æœºå°±å¯ä»¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ½‡ä¿Š","uid":"1004285","ctime":1537924393,"ip_address":"","comment_id":26947,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14422683236","product_id":100009701,"comment_content":"GitLabçš„é«˜å¯ç”¨ï¼Œèƒ½å¦è¯¦ç»†è¯´ä¸‹æºç¨‹çš„å®ç°ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"æ½‡ä¿Š","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424767,"discussion_content":"æºç¨‹çš„æ–¹æ¡ˆå°±æ˜¯åšsharding+äº’å¤‡ï¼Œåˆ©ç”¨ssh2ä½œä¸ºä»£ç†è¾¾åˆ°å¯¹sshè¯·æ±‚çš„åˆ†æµï¼Œè¿™æ ·æ¯å°æœåŠ¡å™¨ä¸ŠåªæœåŠ¡ç‰¹å®šä»“åº“ï¼Œå†é…ç½®ä»“åº“äº’å¤‡ï¼Œåœ¨éƒ¨åˆ†æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ä¿®æ”¹shardingç­–ç•¥å¼•æµåˆ°å¤‡æœºå°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537924393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356561,"discussion_content":"è€å¸ˆï¼Œå…³äºGitlabçš„é«˜å¯ç”¨æ–¹æ¡ˆå¯å¦å†è¯¦ç»†ç§‘æ™®ä¸€ä¸‹å‘€ï¼Œssh2åšä»£ç†é™¤äº†ä»£ç†sshè¯·æ±‚ï¼Œå¯ä»¥ä»£ç†http/httpsè¯·æ±‚å—ï¼Ÿå¦å¤–æ˜¯å¦‚ä½•æ ¹æ®groupçš„åå­—åšshardingå’Œå¤‡ç”¨åˆ‡æ¢çš„å‘¢ï¼Ÿ è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615624405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28397,"user_name":"ç†™","can_delete":false,"product_type":"c1","uid":1084863,"ip_address":"","ucode":"6D13CDBEA5CDDB","user_header":"https://static001.geekbang.org/account/avatar/00/10/8d/bf/507144e8.jpg","comment_is_top":false,"comment_ctime":1538071662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10128006254","product_id":100009701,"comment_content":"éå¸¸èµçš„åˆ†äº«","like_count":2},{"had_liked":false,"id":283216,"user_name":"lyonger","can_delete":false,"product_type":"c1","uid":1313840,"ip_address":"","ucode":"E89A75DADEA2A1","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","comment_is_top":false,"comment_ctime":1615624419,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5910591715","product_id":100009701,"comment_content":"è€å¸ˆï¼Œå…³äºGitlabçš„é«˜å¯ç”¨æ–¹æ¡ˆå¯å¦å†è¯¦ç»†ç§‘æ™®ä¸€ä¸‹å‘€ï¼Œssh2åšä»£ç†é™¤äº†ä»£ç†sshè¯·æ±‚ï¼Œå¯ä»¥ä»£ç†http&#47;httpsè¯·æ±‚å—ï¼Ÿå¦å¤–æ˜¯å¦‚ä½•æ ¹æ®groupçš„åå­—åšshardingå’Œå¤‡ç”¨åˆ‡æ¢çš„å‘¢ï¼Ÿ è°¢è°¢","like_count":2},{"had_liked":false,"id":287197,"user_name":"Acã€","can_delete":false,"product_type":"c1","uid":1610575,"ip_address":"","ucode":"7E7A8458372F33","user_header":"https://static001.geekbang.org/account/avatar/00/18/93/4f/61edeea6.jpg","comment_is_top":false,"comment_ctime":1617812719,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1617812719","product_id":100009701,"comment_content":"è¿™å¥—æ–¹æ¡ˆèƒ½ç”¨åœ¨å…¶å®ƒå¼€å‘è¯­è¨€å—ï¼Ÿæ¯”å¦‚ï¼šgoã€PHP","like_count":0,"discussions":[{"author":{"id":1006963,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/73/742097e2.jpg","nickname":"joseph.herderğŸ’­.","note":"","ucode":"632A743D6B7355","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586566,"discussion_content":"å¯ä»¥ï¼Œgitlabæ˜¯ä¸€ä¸ªgitä»£ç ç®¡ç†å·¥å…·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662346075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26480,"user_name":"æ±Ÿæ¹–å°è™¾","can_delete":false,"product_type":"c1","uid":1014406,"ip_address":"","ucode":"5C28656D763ECF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/86/655307b3.jpg","comment_is_top":false,"comment_ctime":1537617251,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537617251","product_id":100009701,"comment_content":"è°¢è°¢ï¼Œè€å¸ˆçš„åˆ†äº«","like_count":0}]}