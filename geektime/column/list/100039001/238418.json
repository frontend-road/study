{"id":238418,"title":"86 | å¼€æºå®æˆ˜å››ï¼ˆä¸‹ï¼‰ï¼šæ€»ç»“Springæ¡†æ¶ç”¨åˆ°çš„11ç§è®¾è®¡æ¨¡å¼","content":"<p>ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬è®²è§£äº†Springä¸­æ”¯æŒæ‰©å±•åŠŸèƒ½çš„ä¸¤ç§è®¾è®¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼å’Œæ¨¡æ¿æ¨¡å¼ã€‚è¿™ä¸¤ç§æ¨¡å¼èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åˆ›å»ºæ‰©å±•ç‚¹ï¼Œè®©æ¡†æ¶çš„ä½¿ç”¨è€…åœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹ï¼ŒåŸºäºæ‰©å±•ç‚¹å®šåˆ¶åŒ–æ¡†æ¶åŠŸèƒ½ã€‚</p><p>å®é™…ä¸Šï¼ŒSpringæ¡†æ¶ä¸­ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼éå¸¸å¤šï¼Œä¸ä¸‹åå‡ ç§ã€‚æˆ‘ä»¬ä»Šå¤©å°±æ€»ç»“ç½—åˆ—ä¸€ä¸‹å®ƒä»¬ã€‚é™äºç¯‡å¹…ï¼Œæˆ‘ä¸å¯èƒ½å¯¹æ¯ç§è®¾è®¡æ¨¡å¼éƒ½è¿›è¡Œéå¸¸è¯¦ç»†çš„è®²è§£ã€‚æœ‰äº›å‰é¢å·²ç»è®²è¿‡çš„æˆ–è€…æ¯”è¾ƒç®€å•çš„ï¼Œæˆ‘å°±ç‚¹åˆ°ä¸ºæ­¢ã€‚å¦‚æœæœ‰ä»€ä¹ˆä¸æ˜¯å¾ˆæ‡‚çš„åœ°æ–¹ï¼Œä½ å¯ä»¥é€šè¿‡é˜…è¯»æºç ï¼ŒæŸ¥é˜…ä¹‹å‰çš„ç†è®ºè®²è§£ï¼Œè‡ªå·±å»æå®šå®ƒã€‚å¦‚æœä¸€ç›´è·Ÿç€æˆ‘çš„è¯¾ç¨‹å­¦ä¹ ï¼Œç›¸ä¿¡ä½ ç°åœ¨å·²ç»å…·å¤‡è¿™æ ·çš„å­¦ä¹ èƒ½åŠ›ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼</p><h2>é€‚é…å™¨æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>åœ¨Spring MVCä¸­ï¼Œå®šä¹‰ä¸€ä¸ªControlleræœ€å¸¸ç”¨çš„æ–¹å¼æ˜¯ï¼Œé€šè¿‡@Controlleræ³¨è§£æ¥æ ‡è®°æŸä¸ªç±»æ˜¯Controllerç±»ï¼Œé€šè¿‡@RequesMappingæ³¨è§£æ¥æ ‡è®°å‡½æ•°å¯¹åº”çš„URLã€‚ä¸è¿‡ï¼Œå®šä¹‰ä¸€ä¸ªControllerè¿œä¸æ­¢è¿™ä¸€ç§æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è®©ç±»å®ç°Controlleræ¥å£æˆ–è€…Servletæ¥å£ï¼Œæ¥å®šä¹‰ä¸€ä¸ªControllerã€‚é’ˆå¯¹è¿™ä¸‰ç§å®šä¹‰æ–¹å¼ï¼Œæˆ‘å†™äº†ä¸‰æ®µç¤ºä¾‹ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>// æ–¹æ³•ä¸€ï¼šé€šè¿‡@Controllerã€@RequestMappingæ¥å®šä¹‰\n@Controller\npublic class DemoController {\n    @RequestMapping(&quot;/employname&quot;)\n    public ModelAndView getEmployeeName() {\n        ModelAndView model = new ModelAndView(&quot;Greeting&quot;);        \n        model.addObject(&quot;message&quot;, &quot;Dinesh&quot;);       \n        return model; \n    }  \n}\n\n// æ–¹æ³•äºŒï¼šå®ç°Controlleræ¥å£ + xmlé…ç½®æ–‡ä»¶:é…ç½®DemoControllerä¸URLçš„å¯¹åº”å…³ç³»\npublic class DemoController implements Controller {\n    @Override\n    public ModelAndView handleRequest(HttpServletRequest req, HttpServletResponse resp) throws Exception {\n        ModelAndView model = new ModelAndView(&quot;Greeting&quot;);\n        model.addObject(&quot;message&quot;, &quot;Dinesh Madhwal&quot;);\n        return model;\n    }\n}\n\n// æ–¹æ³•ä¸‰ï¼šå®ç°Servletæ¥å£ + xmlé…ç½®æ–‡ä»¶:é…ç½®DemoControllerç±»ä¸URLçš„å¯¹åº”å…³ç³»\npublic class DemoServlet extends HttpServlet {\n  @Override\n  protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n    this.doPost(req, resp);\n  }\n  \n  @Override\n  protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n    resp.getWriter().write(&quot;Hello World.&quot;);\n  }\n}\n</code></pre><!-- [[[read_end]]] --><p>åœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™ï¼ŒSpringå®¹å™¨ä¼šåŠ è½½è¿™äº›Controllerç±»ï¼Œå¹¶ä¸”è§£æå‡ºURLå¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œå°è£…æˆHandlerå¯¹è±¡ï¼Œå­˜å‚¨åˆ°HandlerMappingå¯¹è±¡ä¸­ã€‚å½“æœ‰è¯·æ±‚åˆ°æ¥çš„æ—¶å€™ï¼ŒDispatcherServletä»HanderMappingä¸­ï¼ŒæŸ¥æ‰¾è¯·æ±‚URLå¯¹åº”çš„Handlerï¼Œç„¶åè°ƒç”¨æ‰§è¡ŒHandlerå¯¹åº”çš„å‡½æ•°ä»£ç ï¼Œæœ€åå°†æ‰§è¡Œç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>ä½†æ˜¯ï¼Œä¸åŒæ–¹å¼å®šä¹‰çš„Controllerï¼Œå…¶å‡½æ•°çš„å®šä¹‰ï¼ˆå‡½æ•°åã€å…¥å‚ã€è¿”å›å€¼ç­‰ï¼‰æ˜¯ä¸ç»Ÿä¸€çš„ã€‚å¦‚ä¸Šç¤ºä¾‹ä»£ç æ‰€ç¤ºï¼Œæ–¹æ³•ä¸€ä¸­çš„å‡½æ•°çš„å®šä¹‰å¾ˆéšæ„ã€ä¸å›ºå®šï¼Œæ–¹æ³•äºŒä¸­çš„å‡½æ•°å®šä¹‰æ˜¯handleRequest()ã€æ–¹æ³•ä¸‰ä¸­çš„å‡½æ•°å®šä¹‰æ˜¯service()ï¼ˆçœ‹ä¼¼æ˜¯å®šä¹‰äº†doGet()ã€doPost()ï¼Œå®é™…ä¸Šï¼Œè¿™é‡Œç”¨åˆ°äº†æ¨¡æ¿æ¨¡å¼ï¼ŒServletä¸­çš„service()è°ƒç”¨äº†doGet()æˆ–doPost()æ–¹æ³•ï¼ŒDispatcherServletè°ƒç”¨çš„æ˜¯service()æ–¹æ³•ï¼‰ã€‚DispatcherServletéœ€è¦æ ¹æ®ä¸åŒç±»å‹çš„Controllerï¼Œè°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„ä¼ªä»£ç ï¼š</p><pre><code>Handler handler = handlerMapping.get(URL);\nif (handler instanceof Controller) {\n  ((Controller)handler).handleRequest(...);\n} else if (handler instanceof Servlet) {\n  ((Servlet)handler).service(...);\n} else if (hanlder å¯¹åº”é€šè¿‡æ³¨è§£æ¥å®šä¹‰çš„Controller) {\n  åå°„è°ƒç”¨æ–¹æ³•...\n}\n</code></pre><p>ä»ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè¿™ç§å®ç°æ–¹å¼ä¼šæœ‰å¾ˆå¤šif-elseåˆ†æ”¯åˆ¤æ–­ï¼Œè€Œä¸”ï¼Œå¦‚æœè¦å¢åŠ ä¸€ä¸ªæ–°çš„Controllerçš„å®šä¹‰æ–¹æ³•ï¼Œæˆ‘ä»¬å°±è¦åœ¨DispatcherServletç±»ä»£ç ä¸­ï¼Œå¯¹åº”åœ°å¢åŠ ä¸€æ®µå¦‚ä¸Šä¼ªä»£ç æ‰€ç¤ºçš„ifé€»è¾‘ã€‚è¿™æ˜¾ç„¶ä¸ç¬¦åˆå¼€é—­åŸåˆ™ã€‚</p><p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ˜¯é€‚é…å™¨æ¨¡å¼å¯¹ä»£ç è¿›è¡Œæ”¹é€ ï¼Œè®©å…¶æ»¡è¶³å¼€é—­åŸåˆ™ï¼Œèƒ½æ›´å¥½åœ°æ”¯æŒæ‰©å±•ã€‚åœ¨<a href=\"https://time.geekbang.org/column/article/205912\">ç¬¬51èŠ‚è¯¾</a>ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°ï¼Œé€‚é…å™¨å…¶ä¸­ä¸€ä¸ªä½œç”¨æ˜¯â€œç»Ÿä¸€å¤šä¸ªç±»çš„æ¥å£è®¾è®¡â€ã€‚åˆ©ç”¨é€‚é…å™¨æ¨¡å¼ï¼Œæˆ‘ä»¬å°†ä¸åŒæ–¹å¼å®šä¹‰çš„Controllerç±»ä¸­çš„å‡½æ•°ï¼Œé€‚é…ä¸ºç»Ÿä¸€çš„å‡½æ•°å®šä¹‰ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨DispatcherServletç±»ä»£ç ä¸­ï¼Œç§»é™¤æ‰if-elseåˆ†æ”¯åˆ¤æ–­é€»è¾‘ï¼Œè°ƒç”¨ç»Ÿä¸€çš„å‡½æ•°ã€‚</p><p>åˆšåˆšè®²äº†å¤§è‡´çš„è®¾è®¡æ€è·¯ï¼Œæˆ‘ä»¬å†å…·ä½“çœ‹ä¸‹Springçš„ä»£ç å®ç°ã€‚</p><p>Springå®šä¹‰äº†ç»Ÿä¸€çš„æ¥å£HandlerAdapterï¼Œå¹¶ä¸”å¯¹æ¯ç§Controllerå®šä¹‰äº†å¯¹åº”çš„é€‚é…å™¨ç±»ã€‚è¿™äº›é€‚é…å™¨ç±»åŒ…æ‹¬ï¼šAnnotationMethodHandlerAdapterã€SimpleControllerHandlerAdapterã€SimpleServletHandlerAdapterç­‰ã€‚æºç æˆ‘è´´åˆ°äº†ä¸‹é¢ï¼Œä½ å¯ä»¥ç»“åˆç€çœ‹ä¸‹ã€‚</p><pre><code>public interface HandlerAdapter {\n  boolean supports(Object var1);\n\n  ModelAndView handle(HttpServletRequest var1, HttpServletResponse var2, Object var3) throws Exception;\n\n  long getLastModified(HttpServletRequest var1, Object var2);\n}\n\n// å¯¹åº”å®ç°Controlleræ¥å£çš„Controller\npublic class SimpleControllerHandlerAdapter implements HandlerAdapter {\n  public SimpleControllerHandlerAdapter() {\n  }\n\n  public boolean supports(Object handler) {\n    return handler instanceof Controller;\n  }\n\n  public ModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n    return ((Controller)handler).handleRequest(request, response);\n  }\n\n  public long getLastModified(HttpServletRequest request, Object handler) {\n    return handler instanceof LastModified ? ((LastModified)handler).getLastModified(request) : -1L;\n  }\n}\n\n// å¯¹åº”å®ç°Servletæ¥å£çš„Controller\npublic class SimpleServletHandlerAdapter implements HandlerAdapter {\n  public SimpleServletHandlerAdapter() {\n  }\n\n  public boolean supports(Object handler) {\n    return handler instanceof Servlet;\n  }\n\n  public ModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n    ((Servlet)handler).service(request, response);\n    return null;\n  }\n\n  public long getLastModified(HttpServletRequest request, Object handler) {\n    return -1L;\n  }\n}\n\n//AnnotationMethodHandlerAdapterå¯¹åº”é€šè¿‡æ³¨è§£å®ç°çš„Controllerï¼Œ\n//ä»£ç å¤ªå¤šäº†ï¼Œæˆ‘å°±ä¸è´´åœ¨è¿™é‡Œäº†\n</code></pre><p>åœ¨DispatcherServletç±»ä¸­ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åŒºåˆ†å¯¹å¾…ä¸åŒçš„Controllerå¯¹è±¡äº†ï¼Œç»Ÿä¸€è°ƒç”¨HandlerAdapterçš„handle()å‡½æ•°å°±å¯ä»¥äº†ã€‚æŒ‰ç…§è¿™ä¸ªæ€è·¯å®ç°çš„ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ä½ çœ‹ï¼Œè¿™æ ·å°±æ²¡æœ‰çƒ¦äººçš„if-elseé€»è¾‘äº†å§ï¼Ÿ</p><pre><code>// ä¹‹å‰çš„å®ç°æ–¹å¼\nHandler handler = handlerMapping.get(URL);\nif (handler instanceof Controller) {\n  ((Controller)handler).handleRequest(...);\n} else if (handler instanceof Servlet) {\n  ((Servlet)handler).service(...);\n} else if (hanlder å¯¹åº”é€šè¿‡æ³¨è§£æ¥å®šä¹‰çš„Controller) {\n  åå°„è°ƒç”¨æ–¹æ³•...\n}\n\n// ç°åœ¨å®ç°æ–¹å¼\nHandlerAdapter handlerAdapter = handlerMapping.get(URL);\nhandlerAdapter.handle(...);\n</code></pre><h2>ç­–ç•¥æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>æˆ‘ä»¬å‰é¢è®²åˆ°ï¼ŒSpring AOPæ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°çš„ã€‚ç†Ÿæ‚‰Javaçš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œå…·ä½“åˆ°ä»£ç å®ç°ï¼ŒSpringæ”¯æŒä¸¤ç§åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯JDKæä¾›çš„åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯Cglibæä¾›çš„åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ã€‚</p><p>å‰è€…éœ€è¦è¢«ä»£ç†çš„ç±»æœ‰æŠ½è±¡çš„æ¥å£å®šä¹‰ï¼Œåè€…ä¸éœ€è¦ï¼ˆè¿™ä¸¤ç§åŠ¨æ€ä»£ç†å®ç°æ–¹å¼çš„æ›´å¤šåŒºåˆ«è¯·è‡ªè¡Œç™¾åº¦ç ”ç©¶å§ï¼‰ã€‚é’ˆå¯¹ä¸åŒçš„è¢«ä»£ç†ç±»ï¼ŒSpringä¼šåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°é€‰æ‹©ä¸åŒçš„åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ã€‚è¿™ä¸ªåº”ç”¨åœºæ™¯å®é™…ä¸Šå°±æ˜¯ç­–ç•¥æ¨¡å¼çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚</p><p>æˆ‘ä»¬å‰é¢è®²è¿‡ï¼Œç­–ç•¥æ¨¡å¼åŒ…å«ä¸‰éƒ¨åˆ†ï¼Œç­–ç•¥çš„å®šä¹‰ã€åˆ›å»ºå’Œä½¿ç”¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…·ä½“çœ‹ä¸‹ï¼Œè¿™ä¸‰ä¸ªéƒ¨åˆ†æ˜¯å¦‚ä½•ä½“ç°åœ¨Springæºç ä¸­çš„ã€‚</p><p>åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œç­–ç•¥çš„å®šä¹‰è¿™ä¸€éƒ¨åˆ†å¾ˆç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªç­–ç•¥æ¥å£ï¼Œè®©ä¸åŒçš„ç­–ç•¥ç±»éƒ½å®ç°è¿™ä¸€ä¸ªç­–ç•¥æ¥å£ã€‚å¯¹åº”åˆ°Springæºç ï¼ŒAopProxyæ˜¯ç­–ç•¥æ¥å£ï¼ŒJdkDynamicAopProxyã€CglibAopProxyæ˜¯ä¸¤ä¸ªå®ç°äº†AopProxyæ¥å£çš„ç­–ç•¥ç±»ã€‚å…¶ä¸­ï¼ŒAopProxyæ¥å£çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface AopProxy {\n  Object getProxy();\n  Object getProxy(ClassLoader var1);\n}\n</code></pre><p>åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œç­–ç•¥çš„åˆ›å»ºä¸€èˆ¬é€šè¿‡å·¥å‚æ–¹æ³•æ¥å®ç°ã€‚å¯¹åº”åˆ°Springæºç ï¼ŒAopProxyFactoryæ˜¯ä¸€ä¸ªå·¥å‚ç±»æ¥å£ï¼ŒDefaultAopProxyFactoryæ˜¯ä¸€ä¸ªé»˜è®¤çš„å·¥å‚ç±»ï¼Œç”¨æ¥åˆ›å»ºAopProxyå¯¹è±¡ã€‚ä¸¤è€…çš„æºç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface AopProxyFactory {\n  AopProxy createAopProxy(AdvisedSupport var1) throws AopConfigException;\n}\n\npublic class DefaultAopProxyFactory implements AopProxyFactory, Serializable {\n  public DefaultAopProxyFactory() {\n  }\n\n  public AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException {\n    if (!config.isOptimize() &amp;&amp; !config.isProxyTargetClass() &amp;&amp; !this.hasNoUserSuppliedProxyInterfaces(config)) {\n      return new JdkDynamicAopProxy(config);\n    } else {\n      Class&lt;?&gt; targetClass = config.getTargetClass();\n      if (targetClass == null) {\n        throw new AopConfigException(&quot;TargetSource cannot determine target class: Either an interface or a target is required for proxy creation.&quot;);\n      } else {\n        return (AopProxy)(!targetClass.isInterface() &amp;&amp; !Proxy.isProxyClass(targetClass) ? new ObjenesisCglibAopProxy(config) : new JdkDynamicAopProxy(config));\n      }\n    }\n  }\n\n  //ç”¨æ¥åˆ¤æ–­ç”¨å“ªä¸ªåŠ¨æ€ä»£ç†å®ç°æ–¹å¼\n  private boolean hasNoUserSuppliedProxyInterfaces(AdvisedSupport config) {\n    Class&lt;?&gt;[] ifcs = config.getProxiedInterfaces();\n    return ifcs.length == 0 || ifcs.length == 1 &amp;&amp; SpringProxy.class.isAssignableFrom(ifcs[0]);\n  }\n}\n</code></pre><p>ç­–ç•¥æ¨¡å¼çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡ã€çŠ¶æ€å€¼ã€è®¡ç®—ç»“æœç­‰åŠ¨æ€åœ°å†³å®šä½¿ç”¨å“ªä¸ªç­–ç•¥ã€‚å¯¹åº”åˆ°Springæºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‚çœ‹åˆšåˆšç»™å‡ºçš„DefaultAopProxyFactoryç±»ä¸­çš„createAopProxy()å‡½æ•°çš„ä»£ç å®ç°ã€‚å…¶ä¸­ï¼Œç¬¬10è¡Œä»£ç æ˜¯åŠ¨æ€é€‰æ‹©å“ªç§ç­–ç•¥çš„åˆ¤æ–­æ¡ä»¶ã€‚</p><h2>ç»„åˆæ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>ä¸ŠèŠ‚è¯¾è®²åˆ°Springâ€œå†å°è£…ã€å†æŠ½è±¡â€è®¾è®¡æ€æƒ³çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°äº†Spring Cacheã€‚Spring Cacheæä¾›äº†ä¸€å¥—æŠ½è±¡çš„Cacheæ¥å£ã€‚ä½¿ç”¨å®ƒæˆ‘ä»¬èƒ½å¤Ÿ\bç»Ÿä¸€ä¸åŒç¼“å­˜å®ç°ï¼ˆRedisã€Google Guavaâ€¦ï¼‰çš„ä¸åŒçš„è®¿é—®æ–¹å¼ã€‚Springä¸­é’ˆå¯¹ä¸åŒç¼“å­˜å®ç°çš„ä¸åŒç¼“å­˜è®¿é—®ç±»ï¼Œéƒ½ä¾èµ–è¿™ä¸ªæ¥å£ï¼Œæ¯”å¦‚ï¼šEhCacheCacheã€GuavaCacheã€NoOpCacheã€RedisCacheã€JCacheCacheã€ConcurrentMapCacheã€CaffeineCacheã€‚Cacheæ¥å£çš„æºç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface Cache {\n  String getName();\n  Object getNativeCache();\n  Cache.ValueWrapper get(Object var1);\n  &lt;T&gt; T get(Object var1, Class&lt;T&gt; var2);\n  &lt;T&gt; T get(Object var1, Callable&lt;T&gt; var2);\n  void put(Object var1, Object var2);\n  Cache.ValueWrapper putIfAbsent(Object var1, Object var2);\n  void evict(Object var1);\n  void clear();\n\n  public static class ValueRetrievalException extends RuntimeException {\n    private final Object key;\n\n    public ValueRetrievalException(Object key, Callable&lt;?&gt; loader, Throwable ex) {\n      super(String.format(&quot;Value for key '%s' could not be loaded using '%s'&quot;, key, loader), ex);\n      this.key = key;\n    }\n\n    public Object getKey() {\n      return this.key;\n    }\n  }\n\n  public interface ValueWrapper {\n    Object get();\n  }\n}\n</code></pre><p>åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œä¸€ä¸ªé¡¹ç›®æœ‰å¯èƒ½ä¼šç”¨åˆ°å¤šç§ä¸åŒçš„ç¼“å­˜ï¼Œæ¯”å¦‚æ—¢ç”¨åˆ°Google Guavaç¼“å­˜ï¼Œä¹Ÿç”¨åˆ°Redisç¼“å­˜ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒåŒä¸€ä¸ªç¼“å­˜å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡çš„ä¸åŒï¼Œåˆ†å‰²æˆå¤šä¸ªå°çš„é€»è¾‘ç¼“å­˜å•å…ƒï¼ˆæˆ–è€…å«ä½œå‘½åç©ºé—´ï¼‰ã€‚</p><p>ä¸ºäº†ç®¡ç†å¤šä¸ªç¼“å­˜ï¼ŒSpringè¿˜æä¾›äº†ç¼“å­˜ç®¡ç†åŠŸèƒ½ã€‚ä¸è¿‡ï¼Œå®ƒåŒ…å«çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œä¸»è¦æœ‰è¿™æ ·ä¸¤éƒ¨åˆ†ï¼šä¸€ä¸ªæ˜¯æ ¹æ®ç¼“å­˜åå­—ï¼ˆåˆ›å»ºCacheå¯¹è±¡çš„æ—¶å€™è¦è®¾ç½®nameå±æ€§ï¼‰è·å–Cacheå¯¹è±¡ï¼›å¦ä¸€ä¸ªæ˜¯è·å–ç®¡ç†å™¨ç®¡ç†çš„æ‰€æœ‰ç¼“å­˜çš„åå­—åˆ—è¡¨ã€‚å¯¹åº”çš„Springæºç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface CacheManager {\n  Cache getCache(String var1);\n  Collection&lt;String&gt; getCacheNames();\n}\n</code></pre><p>åˆšåˆšç»™å‡ºçš„æ˜¯CacheManageræ¥å£çš„å®šä¹‰ï¼Œé‚£å¦‚ä½•æ¥å®ç°è¿™ä¸¤ä¸ªæ¥å£å‘¢ï¼Ÿå®é™…ä¸Šï¼Œè¿™å°±è¦ç”¨åˆ°äº†æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„ç»„åˆæ¨¡å¼ã€‚</p><p>æˆ‘ä»¬å‰é¢è®²è¿‡ï¼Œç»„åˆæ¨¡å¼ä¸»è¦åº”ç”¨åœ¨èƒ½è¡¨ç¤ºæˆæ ‘å½¢ç»“æ„çš„ä¸€ç»„æ•°æ®ä¸Šã€‚æ ‘ä¸­çš„ç»“ç‚¹åˆ†ä¸ºå¶å­èŠ‚ç‚¹å’Œä¸­é—´èŠ‚ç‚¹ä¸¤ç±»ã€‚å¯¹åº”åˆ°Springæºç ï¼ŒEhCacheManagerã€SimpleCacheManagerã€NoOpCacheManagerã€RedisCacheManagerç­‰è¡¨ç¤ºå¶å­èŠ‚ç‚¹ï¼ŒCompositeCacheManagerè¡¨ç¤ºä¸­é—´èŠ‚ç‚¹ã€‚</p><p>å¶å­èŠ‚ç‚¹åŒ…å«çš„æ˜¯å®ƒæ‰€ç®¡ç†çš„Cacheå¯¹è±¡ï¼Œä¸­é—´èŠ‚ç‚¹åŒ…å«çš„æ˜¯å…¶ä»–CacheManagerç®¡ç†å™¨ï¼Œæ—¢å¯ä»¥æ˜¯CompositeCacheManagerï¼Œä¹Ÿå¯ä»¥æ˜¯å…·ä½“çš„ç®¡ç†å™¨ï¼Œæ¯”å¦‚EhCacheManagerã€RedisManagerç­‰ã€‚</p><p>æˆ‘æŠŠCompositeCacheMangerçš„ä»£ç è´´åˆ°äº†ä¸‹é¢ï¼Œä½ å¯ä»¥ç»“åˆç€è®²è§£ä¸€å—çœ‹ä¸‹ã€‚å…¶ä¸­ï¼ŒgetCache()ã€getCacheNames()ä¸¤ä¸ªå‡½æ•°çš„å®ç°éƒ½ç”¨åˆ°äº†é€’å½’ã€‚è¿™æ­£æ˜¯æ ‘å½¢ç»“æ„æœ€èƒ½å‘æŒ¥ä¼˜åŠ¿çš„åœ°æ–¹ã€‚</p><pre><code>public class CompositeCacheManager implements CacheManager, InitializingBean {\n  private final List&lt;CacheManager&gt; cacheManagers = new ArrayList();\n  private boolean fallbackToNoOpCache = false;\n\n  public CompositeCacheManager() {\n  }\n\n  public CompositeCacheManager(CacheManager... cacheManagers) {\n    this.setCacheManagers(Arrays.asList(cacheManagers));\n  }\n\n  public void setCacheManagers(Collection&lt;CacheManager&gt; cacheManagers) {\n    this.cacheManagers.addAll(cacheManagers);\n  }\n\n  public void setFallbackToNoOpCache(boolean fallbackToNoOpCache) {\n    this.fallbackToNoOpCache = fallbackToNoOpCache;\n  }\n\n  public void afterPropertiesSet() {\n    if (this.fallbackToNoOpCache) {\n      this.cacheManagers.add(new NoOpCacheManager());\n    }\n\n  }\n\n  public Cache getCache(String name) {\n    Iterator var2 = this.cacheManagers.iterator();\n\n    Cache cache;\n    do {\n      if (!var2.hasNext()) {\n        return null;\n      }\n\n      CacheManager cacheManager = (CacheManager)var2.next();\n      cache = cacheManager.getCache(name);\n    } while(cache == null);\n\n    return cache;\n  }\n\n  public Collection&lt;String&gt; getCacheNames() {\n    Set&lt;String&gt; names = new LinkedHashSet();\n    Iterator var2 = this.cacheManagers.iterator();\n\n    while(var2.hasNext()) {\n      CacheManager manager = (CacheManager)var2.next();\n      names.addAll(manager.getCacheNames());\n    }\n\n    return Collections.unmodifiableSet(names);\n  }\n}\n</code></pre><h2>è£…é¥°å™¨æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œç¼“å­˜ä¸€èˆ¬éƒ½æ˜¯é…åˆæ•°æ®åº“æ¥ä½¿ç”¨çš„ã€‚å¦‚æœå†™ç¼“å­˜æˆåŠŸï¼Œä½†æ•°æ®åº“äº‹åŠ¡å›æ»šäº†ï¼Œé‚£ç¼“å­˜ä¸­å°±ä¼šæœ‰è„æ•°æ®ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å°†ç¼“å­˜çš„å†™æ“ä½œå’Œæ•°æ®åº“çš„å†™æ“ä½œï¼Œæ”¾åˆ°åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚</p><p>å®ç°è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼ŒSpringä½¿ç”¨åˆ°äº†è£…é¥°å™¨æ¨¡å¼ã€‚TransactionAwareCacheDecoratorå¢åŠ äº†å¯¹äº‹åŠ¡çš„æ”¯æŒï¼Œåœ¨äº‹åŠ¡æäº¤ã€å›æ»šçš„æ—¶å€™åˆ†åˆ«å¯¹Cacheçš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p><p>TransactionAwareCacheDecoratorå®ç°Cacheæ¥å£ï¼Œå¹¶ä¸”å°†æ‰€æœ‰çš„æ“ä½œéƒ½å§”æ‰˜ç»™targetCacheæ¥å®ç°ï¼Œå¯¹å…¶ä¸­çš„å†™æ“ä½œæ·»åŠ äº†äº‹åŠ¡åŠŸèƒ½ã€‚è¿™æ˜¯å…¸å‹çš„è£…é¥°å™¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯å’Œä»£ç å®ç°ï¼Œæˆ‘å°±ä¸å¤šä½œè§£é‡Šäº†ã€‚</p><pre><code>public class TransactionAwareCacheDecorator implements Cache {\n  private final Cache targetCache;\n\n  public TransactionAwareCacheDecorator(Cache targetCache) {\n    Assert.notNull(targetCache, &quot;Target Cache must not be null&quot;);\n    this.targetCache = targetCache;\n  }\n\n  public Cache getTargetCache() {\n    return this.targetCache;\n  }\n\n  public String getName() {\n    return this.targetCache.getName();\n  }\n\n  public Object getNativeCache() {\n    return this.targetCache.getNativeCache();\n  }\n\n  public ValueWrapper get(Object key) {\n    return this.targetCache.get(key);\n  }\n\n  public &lt;T&gt; T get(Object key, Class&lt;T&gt; type) {\n    return this.targetCache.get(key, type);\n  }\n\n  public &lt;T&gt; T get(Object key, Callable&lt;T&gt; valueLoader) {\n    return this.targetCache.get(key, valueLoader);\n  }\n\n  public void put(final Object key, final Object value) {\n    if (TransactionSynchronizationManager.isSynchronizationActive()) {\n      TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {\n        public void afterCommit() {\n          TransactionAwareCacheDecorator.this.targetCache.put(key, value);\n        }\n      });\n    } else {\n      this.targetCache.put(key, value);\n    }\n  }\n  \n  public ValueWrapper putIfAbsent(Object key, Object value) {\n    return this.targetCache.putIfAbsent(key, value);\n  }\n\n  public void evict(final Object key) {\n    if (TransactionSynchronizationManager.isSynchronizationActive()) {\n      TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {\n        public void afterCommit() {\n          TransactionAwareCacheDecorator.this.targetCache.evict(key);\n        }\n      });\n    } else {\n      this.targetCache.evict(key);\n    }\n\n  }\n\n  public void clear() {\n    if (TransactionSynchronizationManager.isSynchronizationActive()) {\n      TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {\n        public void afterCommit() {\n          TransactionAwareCacheDecorator.this.targetCache.clear();\n        }\n      });\n    } else {\n      this.targetCache.clear();\n    }\n  }\n}\n</code></pre><h2>å·¥å‚æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>åœ¨Springä¸­ï¼Œå·¥å‚æ¨¡å¼æœ€ç»å…¸çš„åº”ç”¨è«è¿‡äºå®ç°IOCå®¹å™¨ï¼Œå¯¹åº”çš„Springæºç ä¸»è¦æ˜¯BeanFactoryç±»å’ŒApplicationContextç›¸å…³ç±»ï¼ˆAbstractApplicationContextã€ClassPathXmlApplicationContextã€FileSystemXmlApplicationContextâ€¦ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ç†è®ºéƒ¨åˆ†ï¼Œæˆ‘è¿˜å¸¦ä½ æ‰‹æŠŠæ‰‹å®ç°äº†ä¸€ä¸ªç®€å•çš„IOCå®¹å™¨ã€‚ä½ å¯ä»¥å›è¿‡å¤´å»å†çœ‹ä¸‹ã€‚</p><p>åœ¨Springä¸­ï¼Œåˆ›å»ºBeançš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚å‰é¢æåˆ°çš„çº¯æ„é€ å‡½æ•°ã€æ— å‚æ„é€ å‡½æ•°åŠ setteræ–¹æ³•ã€‚æˆ‘å†™äº†ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Student {\n  private long id;\n  private String name;\n  \n  public Student(long id, String name) {\n    this.id = id;\n    this.name = name;\n  }\n  \n  public void setId(long id) {\n    this.id = id;\n  }\n  \n  public void setName(String name) {\n    this.name = name;\n  }\n}\n\n// ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºBean\n&lt;bean id=&quot;student&quot; class=&quot;com.xzg.cd.Student&quot;&gt;\n    &lt;constructor-arg name=&quot;id&quot; value=&quot;1&quot;/&gt;\n    &lt;constructor-arg name=&quot;name&quot; value=&quot;wangzheng&quot;/&gt;\n&lt;/bean&gt;\n\n// ä½¿ç”¨æ— å‚æ„é€ å‡½æ•°+setteræ–¹æ³•æ¥åˆ›å»ºBean\n&lt;bean id=&quot;student&quot; class=&quot;com.xzg.cd.Student&quot;&gt;\n    &lt;property name=&quot;id&quot; value=&quot;1&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;name&quot; value=&quot;wangzheng&quot;&gt;&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre><p>å®é™…ä¸Šï¼Œé™¤äº†è¿™ä¸¤ç§åˆ›å»ºBeançš„æ–¹å¼ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å·¥å‚æ–¹æ³•æ¥åˆ›å»ºBeanã€‚è¿˜æ˜¯åˆšåˆšè¿™ä¸ªä¾‹å­ï¼Œç”¨è¿™ç§æ–¹å¼æ¥åˆ›å»ºBeançš„è¯å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><pre><code>public class StudentFactory {\n  private static Map&lt;Long, Student&gt; students = new HashMap&lt;&gt;();\n  \n  static{\n    map.put(1, new Student(1,&quot;wang&quot;));\n    map.put(2, new Student(2,&quot;zheng&quot;));\n    map.put(3, new Student(3,&quot;xzg&quot;));\n  }\n \n  public static Student getStudent(long id){\n    return students.get(id);\n  }\n}\n\n// é€šè¿‡å·¥å‚æ–¹æ³•getStudent(2)æ¥åˆ›å»ºBeanId=&quot;zheng&quot;&quot;çš„Bean\n&lt;bean id=&quot;zheng&quot; class=&quot;com.xzg.cd.StudentFactory&quot; factory-method=&quot;getStudent&quot;&gt;\n    &lt;constructor-arg value=&quot;2&quot;&gt;&lt;/constructor-arg&gt;           \n&lt;/bean&gt;\n</code></pre><h2>å…¶ä»–æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>å‰é¢çš„å‡ ä¸ªæ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨è®²è§£çš„éƒ½æ¯”è¾ƒè¯¦ç»†ï¼Œæ¥ä¸‹æ¥çš„å‡ ä¸ªæ¨¡å¼ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„ï¼Œè¿™é‡Œåªæ˜¯ç®€å•æ€»ç»“ä¸€ä¸‹ï¼Œç‚¹åˆ°ä¸ºæ­¢ï¼Œå¦‚æœä½ å¯¹å“ªå—æœ‰é—å¿˜ï¼Œå¯ä»¥å›è¿‡å¤´å»çœ‹ä¸‹ç†è®ºéƒ¨åˆ†çš„è®²è§£ã€‚</p><p>SpELï¼Œå…¨ç§°å«Spring Expression Languageï¼Œæ˜¯Springä¸­å¸¸ç”¨æ¥ç¼–å†™é…ç½®çš„è¡¨è¾¾å¼è¯­è¨€ã€‚å®ƒå®šä¹‰äº†ä¸€ç³»åˆ—çš„è¯­æ³•è§„åˆ™ã€‚æˆ‘ä»¬åªè¦æŒ‰ç…§è¿™äº›è¯­æ³•è§„åˆ™æ¥ç¼–å†™è¡¨è¾¾å¼ï¼ŒSpringå°±èƒ½è§£æå‡ºè¡¨è¾¾å¼çš„å«ä¹‰ã€‚å®é™…ä¸Šï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å‰é¢è®²åˆ°çš„è§£é‡Šå™¨æ¨¡å¼çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚</p><p>å› ä¸ºè§£é‡Šå™¨æ¨¡å¼æ²¡æœ‰ä¸€ä¸ªéå¸¸å›ºå®šçš„ä»£ç å®ç°ç»“æ„ï¼Œè€Œä¸”Springä¸­SpELç›¸å…³çš„ä»£ç ä¹Ÿæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å¸¦ä½ ä¸€å—é˜…è¯»æºç äº†ã€‚å¦‚æœæ„Ÿå…´è¶£æˆ–è€…é¡¹ç›®ä¸­æ­£å¥½è¦å®ç°ç±»ä¼¼çš„åŠŸèƒ½çš„æ—¶å€™ï¼Œä½ å¯ä»¥å†å»é˜…è¯»ã€å€Ÿé‰´å®ƒçš„ä»£ç å®ç°ã€‚ä»£ç ä¸»è¦é›†ä¸­åœ¨spring-expresssionè¿™ä¸ªæ¨¡å—ä¸‹é¢ã€‚</p><p>å‰é¢è®²åˆ°å•ä¾‹æ¨¡å¼çš„æ—¶å€™ï¼Œæˆ‘æåˆ°è¿‡ï¼Œå•ä¾‹æ¨¡å¼æœ‰å¾ˆå¤šå¼Šç«¯ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•ä¸å‹å¥½ç­‰ã€‚åº”å¯¹ç­–ç•¥å°±æ˜¯é€šè¿‡IOCå®¹å™¨æ¥ç®¡ç†å¯¹è±¡ï¼Œé€šè¿‡IOCå®¹å™¨æ¥å®ç°å¯¹è±¡çš„å”¯ä¸€æ€§çš„æ§åˆ¶ã€‚å®é™…ä¸Šï¼Œè¿™æ ·å®ç°çš„å•ä¾‹å¹¶éçœŸæ­£çš„å•ä¾‹ï¼Œå®ƒçš„å”¯ä¸€æ€§çš„ä½œç”¨èŒƒå›´ä»…ä»…åœ¨åŒä¸€ä¸ªIOCå®¹å™¨å†…ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒSpringè¿˜ç”¨åˆ°äº†è§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡æ¿æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€‚å…¶ä¸­ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡æ¿æ¨¡å¼åœ¨ä¸Šä¸€èŠ‚è¯¾å·²ç»è¯¦ç»†è®²è¿‡äº†ã€‚</p><p>å®é™…ä¸Šï¼Œåœ¨Springä¸­ï¼Œåªè¦åç¼€å¸¦æœ‰Templateçš„ç±»ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ¨¡æ¿ç±»ï¼Œè€Œä¸”å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨Callbackå›è°ƒæ¥å®ç°çš„ï¼Œæ¯”å¦‚JdbcTemplateã€RedisTemplateç­‰ã€‚å‰©ä¸‹çš„ä¸¤ä¸ªæ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨åº”è¯¥äººå°½çš†çŸ¥äº†ã€‚èŒè´£é“¾æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨æ˜¯æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ï¼Œä»£ç†æ¨¡å¼ç»å…¸åº”ç”¨æ˜¯AOPã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬ä¸€å—æ¥æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹ã€‚</p><p>æˆ‘ä»¬ä»Šå¤©æåˆ°çš„è®¾è®¡æ¨¡å¼æœ‰11ç§ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯é€‚é…å™¨æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡æ¿æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼ã€ä»£ç†æ¨¡å¼ï¼ŒåŸºæœ¬ä¸Šå äº†23ç§è®¾è®¡æ¨¡å¼çš„ä¸€åŠã€‚è¿™è¿˜åªæ˜¯æˆ‘æ‰€çŸ¥é“çš„ï¼Œå®é™…ä¸Šï¼ŒSpringç”¨åˆ°çš„è®¾è®¡æ¨¡å¼å¯èƒ½è¿˜è¦æ›´å¤šã€‚ä½ çœ‹ï¼Œè®¾è®¡æ¨¡å¼å¹¶éâ€œèŠ±æ‹³ç»£è…¿â€å§ï¼Œå®ƒåœ¨å®é™…çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œç¡®å®æœ‰å¾ˆå¤šåº”ç”¨ï¼Œç¡®å®å¯ä»¥å‘æŒ¥å¾ˆå¤§çš„ä½œç”¨ã€‚</p><p>è¿˜æ˜¯é‚£å¥è¯ï¼Œå¯¹äºä»Šå¤©çš„å†…å®¹ï¼Œä½ ä¸éœ€è¦å»è®°å¿†å“ªä¸ªç±»ç”¨åˆ°äº†å“ªä¸ªè®¾è®¡æ¨¡å¼ã€‚ä½ åªéœ€è¦è·Ÿç€æˆ‘çš„è®²è§£ï¼ŒæŠŠæ¯ä¸ªè®¾è®¡æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨åœºæ™¯ï¼Œææ‡‚å°±å¯ä»¥äº†ã€‚çœ‹åˆ°ç±»ä¼¼çš„ä»£ç ï¼Œèƒ½å¤Ÿç«‹é©¬è¯†åˆ«å‡ºå®ƒç”¨åˆ°äº†å“ªç§è®¾è®¡æ¨¡å¼ï¼›çœ‹åˆ°ç±»ä¼¼çš„åº”ç”¨åœºæ™¯ï¼Œèƒ½å¤Ÿç«‹é©¬åæ˜ å‡ºè¦ç”¨å“ªç§æ¨¡å¼å»è§£å†³ï¼Œè¿™æ ·å°±è¯´æ˜ä½ å·²ç»æŒæ¡å¾—è¶³å¤Ÿå¥½äº†ã€‚</p><h2>è¯¾å ‚è®¨è®º</h2><p>æˆ‘ä»¬å‰é¢è®²åˆ°ï¼Œé™¤äº†çº¯æ„é€ å‡½æ•°ã€æ„é€ å‡½æ•°åŠ setteræ–¹æ³•å’Œå·¥å‚æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªç»å¸¸ç”¨æ¥åˆ›å»ºå¯¹è±¡çš„æ¨¡å¼ï¼ŒBuilderæ¨¡å¼ã€‚å¦‚æœæˆ‘ä»¬è®©Springæ”¯æŒé€šè¿‡Builderæ¨¡å¼æ¥åˆ›å»ºBeanï¼Œåº”è¯¥å¦‚ä½•æ¥ç¼–å†™ä»£ç å’Œé…ç½®å‘¢ï¼Ÿä½ å¯ä»¥è®¾è®¡ä¸€ä¸‹å—ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","comments":[{"had_liked":false,"id":219127,"user_name":"å°æ™å­","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1589951814,"is_pvip":false,"discussion_count":1,"race_medal":1,"score":"83194330438","product_id":100039001,"comment_content":"å¯ä»¥ä½¿ç”¨FactoryBeanæ¥å£æ¥å®ç°ï¼Œå¦‚ä¸‹ï¼š<br>&#47;&#47;StdHttpClientå¯ä»¥ç†è§£ä¸ºå·²ç»å®šä¹‰å¥½çš„ä¸€ä¸ªç±»ï¼Œä½¿ç”¨builderæ¨¡å¼å®ç°ã€‚<br>public class HttpFactoryBean implements FactoryBean&lt;HttpClient&gt;{<br><br>private String host;<br>private int port;<br><br><br>public HttpClient getObject() throws Exception {<br>    return new StdHttpClient.Builder()<br>                            .host(host)<br>                            .port(port)<br>                            .build();<br>}<br><br>public Class&lt;? extends HttpClient&gt; getObjectType() {<br>    return StdHttpClient.class;<br>}<br><br>public boolean isSingleton() {<br>    return true;<br>}<br><br>public void setHost(String host) {<br>    this.host = host;<br>}<br><br>public void setPort(int port) {<br>    this.port = port;<br>}}<br>æ·»åŠ é…ç½®åˆ°beanå®šä¹‰ï¼š<br>&lt;beans ...&gt; <br>   &lt;bean name=&quot;myHttpClient&quot; class=&quot;HttpFactoryBean&quot;&gt;<br>       &lt;property name=&quot;port&quot; value=&quot;8080&quot;&#47;&gt;<br>       &lt;property name=&quot;host&quot; value=&quot;localhost&quot;&#47;&gt;<br>   &lt;&#47;bean&gt;<br>&lt;&#47;beans&gt;<br>ä¹‹åä½ å°±å¯ä»¥ä½¿ç”¨StdHttpClientå®ä¾‹äº†ã€‚","like_count":19,"discussions":[{"author":{"id":2162521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MaX06SRk19zM2lAaymYylpXD6LMtIPFlDyxZKgRhmZCjhNE4nIdDGBmh08razhebVCgAv54xialYBBIIwmleBew/132","nickname":"Geek_6d1382","note":"","ucode":"B61E65CFEB684F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331956,"discussion_content":"å‚æ•°æ ¡éªŒæ€ä¹ˆè®¾è®¡å‘¢ï¼Ÿæ‰©å±•ä¸äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607011885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219225,"user_name":"å²æœˆ","can_delete":false,"product_type":"c1","uid":1337598,"ip_address":"","ucode":"29A2A2BC3C4FE4","user_header":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","comment_is_top":false,"comment_ctime":1589968767,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"70309445503","product_id":100039001,"comment_content":"ä¸æ˜¯åšjavaçš„çœ‹çš„å¥½ç´¯....çœ‹æºç å¿…é¡»æ˜¯å…ˆçŸ¥é“æ€ä¹ˆä½¿ç”¨, ç„¶åæ‰çœ‹æºç , è¿™æ ·æ‰æ¯”è¾ƒå¥½çœ‹æ‡‚æºç .","like_count":16},{"had_liked":false,"id":219224,"user_name":"é¥­","can_delete":false,"product_type":"c1","uid":1610573,"ip_address":"","ucode":"B3F1702D4DE604","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132","comment_is_top":false,"comment_ctime":1589968655,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"57424543503","product_id":100039001,"comment_content":"è¶Šçœ‹åˆ°åé¢ï¼Œè¶Šè§‰å¾—æœ€å¥½çš„æ¨¡å¼å°±æ˜¯æ²¡æœ‰æ¨¡å¼ï¼Œç”¨å¥½å¹¶ç†è§£åŸºæœ¬çš„é¢å‘å¯¹è±¡è®¾è®¡å°±æˆåŠŸä¸€åŠäº†ã€‚","like_count":13,"discussions":[{"author":{"id":2234620,"avatar":"https://static001.geekbang.org/account/avatar/00/22/18/fc/4f92ee4e.jpg","nickname":"æ±Ÿå—ä¸€ç¬‘","note":"","ucode":"E38938A1178827","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380048,"discussion_content":"å—¯ã€‚æ²¡æœ‰é‡åˆ°å®é™…é—®é¢˜ å°±ç¡¬æ¬æ¨¡å¼ æ„Ÿè§‰å­¦å¾—ä¹Ÿä¸æ·±åˆ» ç”¨èµ·æ¥ä¹Ÿç”Ÿç¡¬","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1624307983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1063308,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","nickname":"å°ä¹™å“¥","note":"","ucode":"C77E79BEA0C325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":317264,"discussion_content":"åŒæ„Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603524117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219227,"user_name":"Jie","can_delete":false,"product_type":"c1","uid":1045078,"ip_address":"","ucode":"AB94041E548FEB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/56/c39046c0.jpg","comment_is_top":false,"comment_ctime":1589968900,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"23064805380","product_id":100039001,"comment_content":"è¿™ç¯‡å†…å®¹å¯†åº¦å¾ˆå¤§ï¼Œå¯ä»¥çœ‹ä¸Šä¸¤å¤©ã€‚<br><br>å¦å¤–ç­–ç•¥æ¨¡å¼é‚£å—æåˆ°â€œè¿™ä¸¤ç§åŠ¨æ€ä»£ç†å®ç°æ–¹å¼çš„æ›´å¤šåŒºåˆ«è¯·è‡ªè¡Œç™¾åº¦ç ”ç©¶å§â€ï¼Œä¸æ˜¯åº”è¯¥ç”¨Googleæœç´¢ä¹ˆ=w=ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311759,"discussion_content":"è®²äº†è¿™ä¹ˆä¹…è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ï¼Œé‡æ„ä¸é‡å½¢ã€‚ä½ è¿˜åœç•™åœ¨è¡¨é¢æˆ–è€…æ›´ä¸‹ä¸€å±‚-æŠ¬æ ã€‚å°ä¼™å­è¦åŠ æ²¹å•Š","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1602483634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2068684,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotIianb3beTzsGIte6BZxlIhEwc2ryrNBGxZy8ibKbfibVJyUS8d3ZxybAdfJwHPm13ydPC4VJP7Lbw/132","nickname":"taku","note":"","ucode":"B22DA9A4A9DC91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383590,"discussion_content":"æ­¤å¤„ç™¾åº¦æ˜¯ä¸€ä¸ªåŠ¨è¯ï¼Œå°±åƒè‹±æ–‡è¯­å¢ƒä¸‹çš„you just google it ä¸­çš„google","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626172640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105744,"avatar":"https://static001.geekbang.org/account/avatar/00/10/df/50/b9955f61.jpg","nickname":"çš®èª","note":"","ucode":"75D9E182BC00E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559702,"discussion_content":"å…¶å®è¿™ç¯‡æ–‡ç« ä¸»è¦å‘Šè¯‰ä½ springä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Œæˆ‘è§‰å¾—å‰é¢è®¤çœŸå­¦äº†ï¼Œè¿™é‡Œåº”è¯¥å¾ˆå®¹æ˜“æ‰å¯¹å‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648888941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219109,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1589946335,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10179880927","product_id":100039001,"comment_content":"å¯¹è±¡çš„åˆå§‹åŒ–æœ‰ä¸¤ç§å®ç°æ–¹å¼ã€‚ä¸€ç§æ˜¯åœ¨ç±»ä¸­è‡ªå®šä¹‰ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œå¹¶ä¸”é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œæ˜¾å¼åœ°å‘ŠçŸ¥ Springï¼Œå“ªä¸ªå‡½æ•°æ˜¯åˆå§‹åŒ–å‡½æ•°<br>","like_count":2},{"had_liked":false,"id":219048,"user_name":"æ‚Ÿå…‰","can_delete":false,"product_type":"c1","uid":1439777,"ip_address":"","ucode":"E81339EBC4F492","user_header":"https://static001.geekbang.org/account/avatar/00/15/f8/21/3fa228e6.jpg","comment_is_top":false,"comment_ctime":1589937255,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10179871847","product_id":100039001,"comment_content":"å°è¯•äº†ä¸€ä¸‹ï¼Œxmlé…ç½®æœªæ‰¾åˆ°ç›´æ¥è°ƒç”¨buildæ–¹æ³•çš„é…ç½®ï¼Œç”¨æ„é€ å™¨æ³¨å…¥<br>ç±»ï¼š<br><br>public class Student {<br>    private long id;<br>    private String name;<br><br>    private Student(Builder builder) {<br>        this.id =builder.id;<br>        this.name = builder.name;<br>    }<br><br>    public String getName() {<br>        return name;<br>    }<br><br><br>    public static class Builder {<br>        private long id;<br>        private String name;<br>        public Student build() {<br>            if (StringUtils.isEmpty(name)){<br>                throw  new IllegalArgumentException(&quot;name  is empty&quot;);<br>            }<br>           return new Student(this);<br>        }<br><br>        public void setId(long id) {<br>            this.id = id;<br>        }<br><br>        public void setName(String name) {<br>            this.name = name;<br>        }<br>    }<br>}<br>é…ç½®ï¼š<br>&lt;bean id=&quot;build&quot; class=&quot;cn.gitv.rt.advertisv5.utils.Student.Builder&quot; &gt;<br>        &lt;property name=&quot;name&quot; value=&quot;aa&quot;&#47;&gt;<br>        &lt;property name=&quot;id&quot; value=&quot;2&quot;&#47;&gt;<br>    &lt;&#47;bean&gt;<br>    &lt;bean id=&quot;student&quot; class=&quot;cn.gitv.rt.advertisv5.utils.Student&quot;&gt;<br>        &lt;constructor-arg ref=&quot;build&quot;&#47;&gt;<br>    &lt;&#47;bean&gt;<br>2ã€â€œå®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ˜¯é€‚é…å™¨æ¨¡å¼å¯¹ä»£ç è¿›è¡Œæ”¹é€ ï¼Œè®©å…¶æ»¡è¶³å¼€é—­åŸåˆ™ï¼Œèƒ½æ›´å¥½åœ°æ”¯æŒæ‰©èµâ€ã€‚ è¿™ä¸€å¥åº”è¯¥ â€œèµâ€ æ•²ä¸²è¡Œäº†ã€‚<br>","like_count":3},{"had_liked":false,"id":221811,"user_name":"xk_","can_delete":false,"product_type":"c1","uid":1514305,"ip_address":"","ucode":"DFE1AC38EA78A7","user_header":"https://static001.geekbang.org/account/avatar/00/17/1b/41/dbb7d785.jpg","comment_is_top":false,"comment_ctime":1590594782,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5885562078","product_id":100039001,"comment_content":"public class Builder {<br>    private String id;<br>    private String name;<br>    private String age;<br><br>    public void setId(String id) {<br>        if (id == null)<br>            throw new RuntimeException(&quot;id can&#39;t be null&quot;);<br>        this.id = id;<br>    }<br><br>    public void setName(String name) {<br>        if (name == null)<br>            throw new RuntimeException(&quot;name can&#39;t be null&quot;);<br>        this.name = name;<br><br>    }<br>    public void setAge(String age) {<br>        if (age == null)<br>            throw new RuntimeException(&quot;age can&#39;t be null&quot;);<br>        this.age = age;<br><br>    }<br>    ...getter...<br>}<br>public class Student {<br>    String id;<br>    String name;<br>    String age;<br><br>    Student(Builder builder) {<br>        id = builder.getId();<br>        name = builder.getName();<br>        age = builder.getAge();<br>    }<br>}<br><br>&lt;bean id=&quot;build&quot; class=&quot;com.aaa.Builder&quot; &gt;<br>        &lt;property name=&quot;name&quot; value=&quot;aa&quot;&#47;&gt;<br>        &lt;property name=&quot;id&quot; value=&quot;2&quot;&#47;&gt;<br>        &lt;property name=&quot;age&quot; value=&quot;2&quot;&#47;&gt;<br>    &lt;&#47;bean&gt;<br>    &lt;bean id=&quot;student&quot; class=&quot;com.aaa.Student&quot;&gt;<br>        &lt;constructor-arg ref=&quot;build&quot;&#47;&gt;<br>    &lt;&#47;bean&gt;","like_count":0},{"had_liked":false,"id":220921,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1590337279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5885304575","product_id":100039001,"comment_content":"ä¿¡æ¯é‡å¾ˆå¤§æ…¢æ…¢æ¶ˆåŒ–è°¢è°¢è€å¸ˆ","like_count":1},{"had_liked":false,"id":219111,"user_name":"ç”µå…‰ç«çŸ³","can_delete":false,"product_type":"c1","uid":1013160,"ip_address":"","ucode":"3AD33BB4AA940F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg","comment_is_top":false,"comment_ctime":1589946431,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5884913727","product_id":100039001,"comment_content":"&#47;&#47; é€šè¿‡å‚è€ƒå·¥å‚æ–¹æ³•æ¥åˆ›å»ºBeanId=&quot;zheng&quot;&quot;çš„Bean<br><br>&lt;bean id=&quot;zheng&quot; class=&quot;com.xzg.cd.StudentBuilder&quot; build-method=&quot;build&quot;&gt;<br>\t&lt;property name=&quot;id&quot; value=&quot;1&quot;&gt;&lt;&#47;property&gt;<br>\t&lt;property name=&quot;name&quot; value=&quot;wangzheng&quot;&gt;&lt;&#47;property&gt;<br>&lt;&#47;bean&gt;<br>æŠŠfactory-methodæ”¹æˆbuild-method","like_count":1,"discussions":[{"author":{"id":1055334,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","nickname":"è‹¦è¡Œåƒ§","note":"","ucode":"726024A9A9CF44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278340,"discussion_content":"ä½ ä»¬è¿™ä¸ªæ˜¯æ•´ç†+æ¬è¿ä»£ç ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591175031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350102,"user_name":"å°ç‹åœ¨åŠªåŠ›","can_delete":false,"product_type":"c1","uid":2733574,"ip_address":"","ucode":"A324EF87198905","user_header":"https://static001.geekbang.org/account/avatar/00/29/b6/06/cd1eaa49.jpg","comment_is_top":false,"comment_ctime":1656573029,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1656573029","product_id":100039001,"comment_content":"åšæŒï¼","like_count":0},{"had_liked":false,"id":346281,"user_name":"ğŸš¦æ³¨æ„æœ‰è½¦              à¼½","can_delete":false,"product_type":"c1","uid":2113645,"ip_address":"","ucode":"F638673227ECB1","user_header":"https://static001.geekbang.org/account/avatar/00/20/40/6d/61caf56b.jpg","comment_is_top":false,"comment_ctime":1652973758,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1652973758","product_id":100039001,"comment_content":"çœ‹äº†å¼€å¤´è€å¸ˆè®²çš„é€‚é…å™¨æ¨¡å¼ï¼Œè·Ÿç­–ç•¥æ¨¡å¼å¥½åƒå·®ä¸å¤šï¼Œæ€»è§‰å¾—é€‚é…å™¨æ¨¡å¼å°±æ˜¯ç­–ç•¥æ¨¡å¼ï¼›ä¸¤è€…è¯¥æ€ä¹ˆå…·ä½“åŒºåˆ†å‘¢","like_count":0,"discussions":[{"author":{"id":2342321,"avatar":"https://static001.geekbang.org/account/avatar/00/23/bd/b1/324ff184.jpg","nickname":"åœŸè±†","note":"","ucode":"6676E091CA6E48","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573061,"discussion_content":"ç›®çš„ä¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653188753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331102,"user_name":"Mirss.zhao","can_delete":false,"product_type":"c1","uid":1330632,"ip_address":"","ucode":"4A8F20B1A9D142","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTItudDLPfbZabQLjk1NE8NSibQocdRy88rerQdxHFKx4KzUyaEnSLPbszcKAaPX8NgG3sHbZXib41aQ/132","comment_is_top":false,"comment_ctime":1642425169,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1642425169","product_id":100039001,"comment_content":"åœ¨mappingä¸­ä¿å­˜adapterçš„æ—¶å€™ä¸éœ€è¦if else.åˆ¤æ–­æ˜¯å“ªç§controllerçš„adapterå—","like_count":0,"discussions":[{"author":{"id":1165671,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c9/67/0f74bf61.jpg","nickname":"æ˜µç§°è¿˜æ²¡æƒ³å¥½ã€‚","note":"","ucode":"21E6001F29951B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568036,"discussion_content":"protected HandlerAdapter getHandlerAdapter(Object handler) throws ServletException {\n\t\tif (this.handlerAdapters != null) {\n\t\t\tfor (HandlerAdapter adapter : this.handlerAdapters) {\n\t\t\t\tif (adapter.supports(handler)) {\n\t\t\t\t\treturn adapter;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthrow new ServletException(&#34;No adapter for handler [&#34; + handler +\n\t\t\t\t&#34;]: The DispatcherServlet configuration needs to include a HandlerAdapter that supports this handler&#34;);\n\t}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651049076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329905,"user_name":"é»„å¹³","can_delete":false,"product_type":"c1","uid":1142708,"ip_address":"","ucode":"2207224A09735C","user_header":"https://static001.geekbang.org/account/avatar/00/11/6f/b4/4aefe4c0.jpg","comment_is_top":false,"comment_ctime":1641635896,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1641635896","product_id":100039001,"comment_content":"å°†ç¼“å­˜çš„å†™æ“ä½œå’Œæ•°æ®åº“çš„å†™æ“ä½œï¼Œæ”¾åˆ°åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼Œè¿™ä¸ªé—®é¢˜åªæ˜¯è¯´äº†ç”¨äº†è£…é¥°å™¨è®¾è®¡æ¨¡å¼ï¼Œæœ€åå¦‚ä½•è§£å†³å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2076251,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/ae/5b/4bd42286.jpg","nickname":"å®‹è®¡æ´‹","note":"","ucode":"9A34E8F71C6CBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564911,"discussion_content":"https://dzone.com/articles/spring-cache-annotation-tips-and-tricks    è¿™ç¯‡æ–‡ç« æœ‰è®²ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªCacheManager Bean, ä½ çš„Cacheæ³¨è§£å°±å¸¦äº‹åŠ¡æ„ŸçŸ¥äº†ï¼Œå…·ä½“å¦‚ä½•åšçš„å°±æ˜¯ä¸Šé¢ä»£ç é‡Œé¢TransactionSynchronizationManagerè¿™ä¸ªç±»æŠŠç¼“å­˜çš„æ“ä½œéƒ½å»¶è¿Ÿåˆ°äº‹åŠ¡å®Œæˆå»åšï¼Œå°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650353345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326336,"user_name":"ç‰›å‡¡","can_delete":false,"product_type":"c1","uid":1890173,"ip_address":"","ucode":"36DD925F480EA4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/pCUrja4Z78P36FkdXQFFwnsmnicUjTsY7ickbR1xxAEp9yD1JebIafWiaXJLMvW7Ptn7Z6r6z3BiadQHHBhk1icYovw/132","comment_is_top":false,"comment_ctime":1639474471,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639474471","product_id":100039001,"comment_content":"åœ¨Springä¸­æ²¡æœ‰æ‰¾åˆ°AnnotationMethodHandlerAdapterï¼Œåº”è¯¥æ˜¯RequestMappingHandlerAdapterå§","like_count":1},{"had_liked":false,"id":258074,"user_name":"o0oi1i","can_delete":false,"product_type":"c1","uid":1132312,"ip_address":"","ucode":"D1F6AD4AAEAFBE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/18/293cd24d.jpg","comment_is_top":false,"comment_ctime":1604286866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604286866","product_id":100039001,"comment_content":"æ‰“å¡86","like_count":0},{"had_liked":false,"id":243661,"user_name":"John(æ˜“ç­‹)","can_delete":false,"product_type":"c1","uid":1180202,"ip_address":"","ucode":"BB4E58DD4B8F15","user_header":"https://static001.geekbang.org/account/avatar/00/12/02/2a/90e38b94.jpg","comment_is_top":false,"comment_ctime":1598242501,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1598242501","product_id":100039001,"comment_content":"è¿™ä¸¤ç§åŠ¨æ€ä»£ç†å®ç°æ–¹å¼çš„æ›´å¤šåŒºåˆ«è¯·è‡ªè¡ŒGoogle","like_count":0},{"had_liked":false,"id":225667,"user_name":"é»„å¹³","can_delete":false,"product_type":"c1","uid":1142708,"ip_address":"","ucode":"2207224A09735C","user_header":"https://static001.geekbang.org/account/avatar/00/11/6f/b4/4aefe4c0.jpg","comment_is_top":false,"comment_ctime":1591811107,"is_pvip":false,"replies":[{"id":"83998","content":"ğŸ˜‚ è‡ªå·±æŸ¥æŸ¥å§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹äº‰","uid":"1190123","ctime":1592526469,"ip_address":"","comment_id":225667,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591811107","product_id":100039001,"comment_content":"TransactionAwareCacheDecoratoræ€ä¹ˆç”¨å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497936,"discussion_content":"ğŸ˜‚ è‡ªå·±æŸ¥æŸ¥å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592526469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221002,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1590376958,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590376958","product_id":100039001,"comment_content":"Bean çš„xmlçš„é…ç½®&lt;constructor-arg ref=&#39;Builderç±»&#39;&gt;ï¼Œå³æ„é€ å‡½æ•°çš„å…¥å‚æ˜¯builderç±»ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼ŒBeanFactoryä¸­ä¼šä½¿ç”¨é€’å½’ï¼Œæ„é€ å®ŒBuilderç±»å¯¹è±¡ä¹‹åï¼Œå†æ„é€ ä½ æƒ³è¦çš„Bean","like_count":0}]}