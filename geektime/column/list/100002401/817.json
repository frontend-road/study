{"id":817,"title":"02 | Bug引发事故，该不该追究责任？","content":"<p>“人非圣贤，孰能无过？”技术人员也是人，因此编程过程中难免出 Bug，出了 Bug 系统就会出问题，出了问题系统就会宕机。那么，Bug 引发的一连串事故，该不该追究责任，又如何去追责呢？</p>\n<p>今天我就和你聊聊 Bug 和责任的问题。</p>\n<p>记得有一次，一个国内的访问团来公司参观。在交流的过程中，有人问：“在你们的工作中，工程师的 Bug 或者失误引发的问题，会不会被追究责任，会不会扣工资，会不会被开除？”</p>\n<p>当时我很诚实地按照实际情况回答说：“不会。”</p>\n<p>这个人又继续问：“那出了事故没有任何惩罚，不会有问题吗？”当时，我围绕着员工的素质、自觉性和责任心进行了回答。后来再次思考这个问题，我越想越觉得有意思。</p>\n<p>我在 Airbnb 负责支付和交易业务，这意味着大部分的错误都等价于真金白银。无论是从用户那少收钱，导致公司亏损，还是从用户那多收钱引起法律或者合约的纠纷，只要跟钱沾了边，都不是小事情。</p>\n<p>俗话说 “常在河边走，哪有不湿鞋”，各种因为代码问题引起的麻烦也是屡见不鲜。那么，在Bug引发问题的情况下，怎样处理才能最大程度上保持团队的主动性、责任感和执行力呢？</p>\n<!-- [[[read_end]]] -->\n<p>我们先来假想两种极端的情况：如果每个错误都会受到惩罚，会怎样；如果所有的错误都没有任何追究和跟进，又会怎样？</p>\n<p>假如每个错误都会受到惩罚，不难想象，以下情况一定难以避免。</p>\n<ol>\n<li>大家都怕闯祸，所以风险高的事没人做，或者总是那几个靠谱的“老司机”做。没有机会处理这种复杂情况的人，永远得不到锻炼，也无法积累这样的经验。</li>\n<li>如果有人搞砸了什么事情，会因为担心承担后果而推卸责任，从而尽可能掩盖错误的坏影响，不让人知道。</li>\n<li>如果别人犯了错，会觉得不关自己的事。</li>\n<li>指出别人的错误就会导致别人被追究责任，因此看到有问题也会犹豫要不要指出。</li>\n</ol>\n<p>反之，如果无论发生什么错误，都不需要承担后果或进行反省，没有任何担当，那可能又会出现以下情况。</p>\n<ol>\n<li>同样的错误可能会一再发生。</li>\n<li>小错没有被及时制止，或者没有引起足够重视，最终导致酿成大错。</li>\n<li>做事仔细的人会觉得不公平。自己为了安全起见，每次代码改动都写很多单元测试，每个项目都反复测试和预防问题；但是别人的草草而就导致错误百出，却因为显得进度更快，反而被认为更有效率。</li>\n</ol>\n<p>那么，对于工作中的错误，尤其是 Bug 导致的错误，我们应该采取什么态度和措施呢？</p>\n<p><strong>第一，追究责任，但不是惩罚。</strong>“知其然，并知其所以然”，搞清楚在什么场景下，什么样的 Bug 引发了什么样的错误。相关人员应该尽最大的可能去做好善后工作，并思考如何避免下次犯同样的错误。</p>\n<p><strong>第二，对事儿不对人。</strong>在这个追究的过程中，重点在于怎么改善流程、改进制度，来避免同样的错误，而不是指责员工不应该怎么样。如果相关人员已经那么做了，为什么这个错误仍然没有及时被发现和制止？</p>\n<p><strong>第三，反复问“为什么”，从根本上发现问题。</strong>错误为什么会发生？有些 Bug 可能只是显露出来的冰山一角。</p>\n<p>举一个假设的例子，因为小王的代码改动影响了小李的代码，让小李之前实现的功能不对了。在这种情况下，我们首先要问：</p>\n<ol>\n<li>为什么小李代码功能不对没有立马被发现？<br />\n答：因为小李当时的测试用例没有覆盖这种情况。</li>\n<li>为什么小李的测试例不完整？<br />\n答：因为这个地方的测试需要 mock 一个服务的返回值，但是这个 mock 的值并不是真的服务器端的返回值，所以测也测不出来。</li>\n<li>为什么要去 mock？<br />\n答：因为我们的测试系统框架不够完善。</li>\n</ol>\n<p>这样反复问，反复想，就能找出根本上值得改进的问题，而这样的结果和受益，比惩罚犯错儿的人要好得多。</p>\n<p><strong>第四，员工关系的建立也很关键。</strong>我们需要培养的是大家相互信任、互帮互助，为了共同的目标努力的氛围，而不是一种不安全感。这种不安全感可能是自己不够自信，害怕犯错；也可能是对他人漫不关心，或是对其代码质量有怀疑。只有大家都相信，找出问题的根本目的是解决问题，避免问题再发生，才能建立一个不断反思、不断学习、不断进步的良性循环。</p>\n<p>最后给你留一个思考题， 这也是现实生活中我多次听说的事故。如果你是一家公司的技术主管，团队里的一位工程师因为误操作删除了线上的用户数据，这时候你又发现，上个月数据的自动备份因为某些故障停止了，现在你该怎么办呢？</p>\n","comments":[{"had_liked":false,"id":567,"user_name":"kilo","can_delete":false,"product_type":"c1","uid":1019879,"ip_address":"","ucode":"50E1F7C5E4E51E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/e7/ee5048ae.jpg","comment_is_top":true,"comment_ctime":1510832300,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"9.2233720942001992e+18","product_id":100002401,"comment_content":"大家好，我是极客时间《朱赟的技术管理课》运营负责人小原 ，收到短信加不上我的用户，请关注公众号&quot;极客时间“，回复你的微信号，我会拉你进群。","like_count":13,"discussions":[{"author":{"id":1483150,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a1/8e/03aeb9df.jpg","nickname":"Rocky","note":"","ucode":"5FCF390BECDF9D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98758,"discussion_content":"有课程讨论群？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577185300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":529,"user_name":"ibrothergang","can_delete":false,"product_type":"c1","uid":1002191,"ip_address":"","ucode":"4151DA353A1DDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/cf/5cbccd62.jpg","comment_is_top":false,"comment_ctime":1510708582,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"577036326246","product_id":100002401,"comment_content":"“如果你是一家公司的技术主管，团队里的一位工程师因为误操作删除了线上的用户数据，这时候你又发现，上个月数据的自动备份因为某些故障停止了，现在你该怎么办呢？”<br><br>首先，解决问题。<br>对外的事情永远应该放在首位解决，首先要考虑的是用户数据没有了怎么做补救。如果实在没有办法挽回数据了，考虑如何将损失降到最低。或者以某种方式补偿用户。用户的利益永远是第一位的。<br><br>其次，追究责任。<br>误操作也好，没有自动备份也罢，肯定需要有人来承担责任。没有责任人的事故很难挖掘到深层次的原因。错了就是错了，就是需要承担起这份错误带来的事故责任。<br><br>最后，流程优化。<br>人和机器最大的不同是人是具有主管能懂性的。机器可以严格按照程序执行，没有喜怒哀乐，但是人不行。谁都会有心情沮丧的阶段，也会有狂喜的时候，这种情况往往就容易犯错。所以如何规避，是不是可以从流程上去杜绝错误出现就是事后需要思考的。那前面的例子，如果删除操作是高危操作，是不是可以制定需要授权，是不是可以规定同时需要多人确定。自动备份是不是可以制定一些预警机制？<br><br>个人一些想法，抛个砖，引玉。","like_count":135},{"had_liked":false,"id":543,"user_name":"金鹏","can_delete":false,"product_type":"c1","uid":1019485,"ip_address":"","ucode":"916180E1699264","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/5d/562e90d6.jpg","comment_is_top":false,"comment_ctime":1510738474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"207669168682","product_id":100002401,"comment_content":"支持朱赟开直播答疑的赞我","like_count":49},{"had_liked":false,"id":6534,"user_name":"朱显杰","can_delete":false,"product_type":"c1","uid":1072683,"ip_address":"","ucode":"F7B8258B941D9D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5e/2b/df3983e2.jpg","comment_is_top":false,"comment_ctime":1524799939,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"100309047747","product_id":100002401,"comment_content":"我作为公司运维主管，真真切切的碰到过数据被运维删除的场景，分享下我的一线经验：<br>首先，先想办法把损失降到最低，是否有其它备份，是否有其它途径重新生成数据等。<br>其次，作为技术主管，对外主动承担首要责任，不要把责任推给下属。<br>第三，用why-why法去找深层次原因，就是不断的问为什么，找出根本原因。<br>第四，针对上述的原因，一个个找解决方案，每个解决方案都要有责任人和时间点，避免重复再犯。<br>第五，针对事故进行复盘总结，对事不对人，重点不在于惩罚，而是在于吸取经验，总结教训。","like_count":24},{"had_liked":false,"id":545,"user_name":"_fenghao_","can_delete":false,"product_type":"c1","uid":1019099,"ip_address":"","ucode":"ECDAB9FF15BF72","user_header":"","comment_is_top":false,"comment_ctime":1510744013,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"61640286157","product_id":100002401,"comment_content":"苹果支付实在是问题颇多...终于搞定了，先支持安姐，big fan！<br><br>以前创业碰到很多这种问题，重大事故大都是有流程，不执行，偷懒所致，因为越是不确定的东西反而自己更重视，反而熟悉的问题总错，所以还是要细心。个人非常不容易罚款，当时CEO逼着订下罚款的细节，我说👌，权责利要匹配，也一并订下奖赏的条款，不说话了……<br><br>","like_count":15},{"had_liked":false,"id":3471,"user_name":"rembau","can_delete":false,"product_type":"c1","uid":1058597,"ip_address":"","ucode":"2BC92E5FD7B875","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/25/470fb865.jpg","comment_is_top":false,"comment_ctime":1519702424,"is_pvip":false,"replies":[{"id":"679","content":"是的，一切都是平衡，理论结合实际，知行合一","user_name":"池建强回复","comment_id":3471,"uid":"1000012","ip_address":"","utype":1,"ctime":1519830488,"user_name_real":"卖桃者"}],"discussion_count":1,"race_medal":0,"score":"57354277272","product_id":100002401,"comment_content":"所以答案就是不惩罚吗？<br>我有两个疑问:<br>1，例子中最后推敲到是测试系统不完善，可是如果要完善测试系统需要大量的资源，公司目前资源紧张，协调资源很难，是不是应该在这种情况下顶着压力申请资源改进测试系统呢，是不是每次代码合并都进行一次review更简单有效一点<br>2，留的题目中，我们继续使用上面例子中追问自己的思路，数据为什么没有备份，没有备份，为什么没有发告警信息呢，因为运维系统不完善。假设运维系统完善了，发告警了，可是运维同事忽略了呢。<br><br>所以我觉得有时候人与系统或者流程之间有个均衡，资源充足的公司不断完善系统，让每个人都成为螺丝钉，资源不充足的公司，要培养人的习惯，管理者要把更多的精力放在人身上。","like_count":14,"discussions":[{"author":{"id":1000012,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/4c/1d5c1263.jpg","nickname":"池建强","note":"","ucode":"0E359BFB3AC329","race_medal":1,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415907,"discussion_content":"是的，一切都是平衡，理论结合实际，知行合一","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1519830488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":568,"user_name":"Rachel_fang","can_delete":false,"product_type":"c1","uid":1004050,"ip_address":"","ucode":"9DE25BDC220185","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/12/e0460331.jpg","comment_is_top":false,"comment_ctime":1510846010,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44460518970","product_id":100002401,"comment_content":"现在在的团队，感觉每个人都没有安全感～问题发生后大家想的不是如何解决而是先说是谁的责任～解决问题找到问题根本比追责带来的正向结果会好","like_count":10},{"had_liked":false,"id":564,"user_name":"刘剑","can_delete":false,"product_type":"c1","uid":1001744,"ip_address":"","ucode":"60F2DCADC5A020","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/10/eadec2c6.jpg","comment_is_top":false,"comment_ctime":1510825478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40165531142","product_id":100002401,"comment_content":"对于朱老师提出的这个问题，我通过2个角度去看；<br>1.自身角度，这种问题不会同步出现。首先能够操作正式服务器后台数据的都是经验丰富的主程级别，出现概率极低。就算出现了，我们通过数据库日志也可以恢复数据，把损失降到最小。如果日志损坏了我们还可以通过最多24小时自动备份数据恢复。我相信不会同时都出问题。<br>还有就是需要及时上报让运营考虑应急预案，让客服做好疏导和安抚工作。必要时候给予出现问题用户一定补偿。<br><br>2.如果是很不规范创业公司，开发人员误删了用户数据（我们按最坏的考虑数据清空了），又没有备份，立刻停止任何操作，及时上报问题，立刻切断外网用户的访问，如果数据价值非常大可以请专业数据恢复公司恢复数据，运营、客服都要协调动起来，讨论出善后方案并高效执行。<br><br>对于第一种造成损失较少，但需要误删者解释清楚操作细节和原因，这种一般是操作规范的问题，以后严格按规范操作数据，然后需要向公司公开道歉，特别是增加了运营和客服工作量<br>对于第二种造成损失很大，是操作的问题，也是数据库冗灾没有做好，更是管理上的问题。需要深刻反思反省，加强冗灾能力同时让公司加人手和资源吧。通过这件事老板也不会不舍得投入了（曾见到过创业公司不重视服务器资源投入的问题，还有就是找靠谱的开发人员和技术主管）。","like_count":9},{"had_liked":false,"id":526,"user_name":"愤毛阿青","can_delete":false,"product_type":"c1","uid":1000000,"ip_address":"","ucode":"30B6939FBA3D5E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/40/a9d48ea9.jpg","comment_is_top":false,"comment_ctime":1510706972,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"31575478044","product_id":100002401,"comment_content":"前几个月删掉测试环境用户表的飘过","like_count":8},{"had_liked":false,"id":540,"user_name":"亚伦碎语","can_delete":false,"product_type":"c1","uid":1014505,"ip_address":"","ucode":"F32E5E1B63CC90","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/e9/da5c0203.jpg","comment_is_top":false,"comment_ctime":1510720568,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27280524344","product_id":100002401,"comment_content":"日常code diff 一定迭代后 retro看看有什么可以改进的，制定action改进","like_count":6},{"had_liked":false,"id":528,"user_name":"jayxhj","can_delete":false,"product_type":"c1","uid":1000710,"ip_address":"","ucode":"746CC6F00CC161","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/06/c08c8f34.jpg","comment_is_top":false,"comment_ctime":1510708324,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"22985544804","product_id":100002401,"comment_content":"出现线上问题第一件事肯定是先解决这个 bug 或者问题，所以尝试修补数据并安抚用户肯定是首要的事情。<br><br>不过针对丢失用户数据这件事，很有可能数据追不回来了，这时候给用户相应的补偿很重要（包括但不限于发优惠券，送套餐，营销召回等方式），一方面达到挽救损失，另一方面直面问题，让用户降低对平台的不信任。当然，最重要的是，得解决数据丢失的问题，定期检查，灾备演练，防止这数据丢失的事情再次发生。","like_count":5},{"had_liked":false,"id":539,"user_name":"Hills录","can_delete":false,"product_type":"c1","uid":1000004,"ip_address":"","ucode":"779020947ACABA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/44/d3d67640.jpg","comment_is_top":false,"comment_ctime":1510718516,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18690587700","product_id":100002401,"comment_content":"昨天差点把测试代码上生产。。。","like_count":4},{"had_liked":false,"id":530,"user_name":"禾子先生","can_delete":false,"product_type":"c1","uid":1004799,"ip_address":"","ucode":"7F637111BDC5C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/ff/380eaec1.jpg","comment_is_top":false,"comment_ctime":1510708717,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18690577901","product_id":100002401,"comment_content":"您好，既然事故已经发生，眼前第一件事就是救火了。第一，我会先分析此次误删了多少用户数据，并使用最近备份的数据；第二，试试恢复数据，找专业公司来对磁盘数据进行恢复；第三，汇报上级领导；<br>做完这些，就要开始“追责”了，为什么发生，怎么发生的。比如，是不是权限管理有疏漏，是不是生产安全操作原则没有普及，技术人员是否疲劳工作等。","like_count":4},{"had_liked":false,"id":534,"user_name":"金鹏","can_delete":false,"product_type":"c1","uid":1019485,"ip_address":"","ucode":"916180E1699264","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/5d/562e90d6.jpg","comment_is_top":false,"comment_ctime":1510713672,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14395615560","product_id":100002401,"comment_content":"看到这个问题菊花一紧。个人觉得先从技术的角度尝试，有没有trick的方式可以恢复，如果没有用上上个月的，尽量减少损失。然后复盘，是谁的责任，并找到问题，完善流程。为什么程序猿有数据库删除权限？是否要分权限？是否要专人负责？设立Dba？为什么数据备份出错？是否有云备份？分布式数据？为什么一个月都没人知道？出问题为什么无预警信息？最后，主管是否有很大的责任？<br><br>   朱赟可否每周做一次复盘？回答一些大家的问题，另外也让大家知道你看问题的视角，强化记忆和学习。帮助一起提升。<br>    当然，如果直播就更赞。（色）（色）<br>","like_count":3},{"had_liked":false,"id":187450,"user_name":"波知所云","can_delete":false,"product_type":"c1","uid":1311713,"ip_address":"","ucode":"B50251B15E7151","user_header":"https://static001.geekbang.org/account/avatar/00/14/03/e1/fed67df8.jpg","comment_is_top":false,"comment_ctime":1584112266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10174046858","product_id":100002401,"comment_content":"如果你是一家公司的技术主管，团队里的一位工程师因为误操作删除了线上的用户数据，这时候你又发现，上个月数据的自动备份因为某些故障停止了，现在你该怎么办呢？<br>首先分析定位故障后，想办法恢复对外服务，含技术修复及业务应急，通过双活系统、灾难备份系统、最近一次可用的数据备份、其他关联系统的数据、大数据平台（或数据仓库等二线数据）、本系统的日志等方式、业务操作打印流水等想办法恢复数据。如果造成了数据丢失，需要配合业务方面协商业务应急处置办法，出具公告。在再次对外服务前，对当前的数据副本做好完整的备份；当恢复后的数据从业务逻辑、数据逻辑等方面进行充分检验，避免脏数据造成二次事故。<br>其次关注修复数据的实际运行，抢修期间即便采取了很多防范二次事故的措施，但由于时间非常紧急，很可能万中漏一，发生抢修数据不完整，或者约束关系检查不完整，或者其他各种问题，需要及时关注系统运行尤其是数据一致性等问题。<br>再次，系统性分析事故原因分析，例如为何会发生误删数据，是否没有严格执行权限控制和双人会同要求？ 相关维护方案是否没有经过审批？删除数据的高危操作是否没有被有效拦截？变更操作之前是否没有按规定执行备份？数据备份失效为何没有告警？是否缺失必要的异构备份机制？<br>最后充分吸取教训，围绕生产运行、变更维护、数据备份等工作的流程机制、系统配置等进行优化，通过测试环境实战模拟演练检验有效性，从机制上保障生产，尤其是数据的安全性。","like_count":2},{"had_liked":false,"id":3433,"user_name":"章洁","can_delete":false,"product_type":"c1","uid":1028624,"ip_address":"","ucode":"9009DC36CB4B9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/10/a6debd39.jpg","comment_is_top":false,"comment_ctime":1519611302,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10109545894","product_id":100002401,"comment_content":"发现留言很有意思。","like_count":2},{"had_liked":false,"id":1031,"user_name":"Mindy","can_delete":false,"product_type":"c1","uid":1019462,"ip_address":"","ucode":"2B16E2FAFFA776","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/46/e7129bc2.jpg","comment_is_top":false,"comment_ctime":1512028947,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10101963539","product_id":100002401,"comment_content":"首先，解决问题。<br>其次，组织复盘。从组织结构、工具、流程规范等方面思考，找到根本原因进行解决。另外，如果出现人员方面的责任心问题，需要追求责任，给予惩罚。<br>","like_count":2},{"had_liked":false,"id":544,"user_name":"nanjishidu","can_delete":false,"product_type":"c1","uid":1006245,"ip_address":"","ucode":"815B11E643DF23","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5a/a5/4e1ecf09.jpg","comment_is_top":false,"comment_ctime":1510742757,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10100677349","product_id":100002401,"comment_content":"首先进行数据恢复减少损失。<br>然后完善自动备份程序和操作流程，杜绝类似问题的发生。<br>最后问题追责。技术主管是第一责任人，操作数据之前未进行数据备份，未定时检查数据备份是否正常。运维人员是第二责任人，未定时检查自动备份程序的稳定性。工程师是第三责任人。<br>","like_count":2},{"had_liked":false,"id":123100,"user_name":"名","can_delete":false,"product_type":"c1","uid":1012010,"ip_address":"","ucode":"CF1B20DBBE1D57","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLAxTB7VjiboJLKujMGtj9EeTSX8yPStoqsjzqjeuBQkWd1IMQvicOMQhZEPZemBFBeoQupGz4UsSic7g/132","comment_is_top":false,"comment_ctime":1565604804,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5860572100","product_id":100002401,"comment_content":"事中：应急，第一时间毛估影响及止损方案，降低业务影响（协调公关、客服、运营等对外发文安抚）<br>事后：复盘，输出后续优化改进，避免下次类似问题","like_count":1},{"had_liked":false,"id":17575,"user_name":"吕韬","can_delete":false,"product_type":"c1","uid":1058658,"ip_address":"","ucode":"4914446A1AD677","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/62/7c254dc3.jpg","comment_is_top":false,"comment_ctime":1532756329,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5827723625","product_id":100002401,"comment_content":"第一步：尽力补救，能救多少是多少，不能救的制定一套补偿方案，方案要具体，怎么实操、花多少成本多少时间，谁去做<br>第二步：复盘，找问题的相关责任人还原整个事实，建议如何防止这类问题<br>第三步：管理层内部分析原因，思考流程机制的问题，减少人为失误，发布新的管理办法，然后继续观察","like_count":1},{"had_liked":false,"id":560,"user_name":"嚆同学","can_delete":false,"product_type":"c1","uid":1018329,"ip_address":"","ucode":"5F5BFE47B3302C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/d9/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1510806913,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5805774209","product_id":100002401,"comment_content":"简单说下自己的思路：第一，优先解决问题，尽可能地降低用户和公司损失；第二，问责，弄清楚人员误操作的原因，以解决问题为目的，责任同样要承担；第三，查找上个月数据未正常备份的原因，追责；第四，根据上述情况制定相应措施以及改进方案。其实大部分人遇到这种情况都是愤怒和责怪，但是这并不能解决任何问题，只会导致问题越发严重。因此，及时的控制自己的情绪很重要，职位越高，关健时刻越要冷静，这样才能抓住问题的核心，不至于乱了阵脚。","like_count":1},{"had_liked":false,"id":532,"user_name":"剑走偏锋","can_delete":false,"product_type":"c1","uid":1008245,"ip_address":"","ucode":"CDDDA36F1E2E12","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/75/5defd9a3.jpg","comment_is_top":false,"comment_ctime":1510711431,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5805678727","product_id":100002401,"comment_content":"用能找到的最近备份先恢复，让线上应用先工作起来，这样会牺牲很大的数据一致性。技术复盘，按照5why的方式追问下去，为什么会误删？没做权限管理？为什么自动备份不work了？没有预警？对事不对人，有利于快速解决问题。","like_count":1},{"had_liked":false,"id":338632,"user_name":"怀揣梦想的学渣","can_delete":false,"product_type":"c1","uid":1916685,"ip_address":"","ucode":"2349B9F4F6FDE3","user_header":"https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg","comment_is_top":false,"comment_ctime":1647610536,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1647610536","product_id":100002401,"comment_content":"我个人经历过的公司里，就有文中提到的类型。<br>1、不做就不会错。大家都怕处罚，每次处罚都是涉及钱，很多人不敢去做改动，能轻微处理就轻微处理，有事情就要各种管理升级，没人愿意去主导事情，都在等着上面领导决策，没有人主动推动流程优化，一有问题就把“领导说的”抬出来。标准铁饭碗模式。领导做错了，就没多少影响，如果员工做错了，一定会被大范围当作典型案例批斗，并且扣钱。<br>2、问题追溯并改进。我曾服务过一个做Linux下软件开发的公司，遇到某个软件bug，就会根据影响的优先级，决定是分配多少人参与问题排查和处理，处理后会反过来思考优化团队内的平台和工具，优化团队内流程方案，让流程规范落地到代码工具，减少人的错误。比较可惜，他们公司销售人员太少，已有的很强的销售人员也被大企业挖走了，在我们本地没能活下去，现在被外包公司打包收购了。<br>3、员工关系。互相帮扶的我见到的挺少，为了绩效考核，为了个人不被替代，为了让自己的技术看起来更强，有的同事会把经验留存在自己的脑子里，不做分享，也不愿帮同事，还能找出各种看起来很合适的理由。团队看似是团队，实际是各自为营，互相是传递数据的黑盒子，离职率也是没低过。","like_count":0},{"had_liked":false,"id":331260,"user_name":"尹子昊","can_delete":false,"product_type":"c1","uid":1214174,"ip_address":"","ucode":"C73906E8FDE167","user_header":"https://static001.geekbang.org/account/avatar/00/12/86/de/ef145965.jpg","comment_is_top":false,"comment_ctime":1642509576,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642509576","product_id":100002401,"comment_content":"如果你是一家公司的技术主管，团队里的一位工程师因为误操作删除了线上的用户数据，这时候你又发现，上个月数据的自动备份因为某些故障停止了，现在你该怎么办呢？<br>事中：解决问题，既然事情已经发生了，先商量如何让损失降到最低，找到研发、运维、DB一起沟通解决方案，并同时上报上级<br>事后：复盘问题，找到对应操作的研发、备份的同时，沟通误操作的原因及备份为何失效，然后对数据操作流程都要梳理出规范并落地实施。<br>例如：操作权限限制，备份失效自动检测机制，批量删除数据自动告警等。<br>责任这块，如果影响比较大，按照定责机制处理，如果影响比较小，让相关同事输出问题总结报告，并团队同步影响及如何避免类似问题。","like_count":0},{"had_liked":false,"id":313545,"user_name":"留白","can_delete":false,"product_type":"c1","uid":1328734,"ip_address":"","ucode":"5267C1F3889961","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/5e/c0ea1ffb.jpg","comment_is_top":false,"comment_ctime":1632486008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632486008","product_id":100002401,"comment_content":"说得太好了","like_count":0},{"had_liked":false,"id":287337,"user_name":"七先生","can_delete":false,"product_type":"c1","uid":1385302,"ip_address":"","ucode":"6915370D255991","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/56/9942bf47.jpg","comment_is_top":false,"comment_ctime":1617889140,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617889140","product_id":100002401,"comment_content":"类似5why分析法，抽丝剥茧，找到问题的源头","like_count":0},{"had_liked":false,"id":285802,"user_name":"johnyu","can_delete":false,"product_type":"c1","uid":2541498,"ip_address":"","ucode":"9AAC53AD209194","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/vx7BK9qZItiblXXoIpOhxd0m248xgvybowD2BBRvzZ4VwPL6aF1XkZ5OaWNjKqiciabgPfLdqmBtFvHszTgOuPiadQ/132","comment_is_top":false,"comment_ctime":1617016616,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617016616","product_id":100002401,"comment_content":"这种Root cause analysis方法在所有的领域都是实用的，也是有效的。","like_count":0},{"had_liked":false,"id":215146,"user_name":"聪","can_delete":false,"product_type":"c1","uid":1009831,"ip_address":"","ucode":"9D672A8580A945","user_header":"https://static001.geekbang.org/account/avatar/00/0f/68/a7/c3fd1fd9.jpg","comment_is_top":false,"comment_ctime":1588915261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588915261","product_id":100002401,"comment_content":"这个问题很有趣，也可以延伸一下。那么如何恢复犯错人的威信和信心呢？","like_count":0},{"had_liked":false,"id":215145,"user_name":"聪","can_delete":false,"product_type":"c1","uid":1009831,"ip_address":"","ucode":"9D672A8580A945","user_header":"https://static001.geekbang.org/account/avatar/00/0f/68/a7/c3fd1fd9.jpg","comment_is_top":false,"comment_ctime":1588915144,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588915144","product_id":100002401,"comment_content":"多问why的那一段，我补充下。要写7 why的报告，然后开组会。manager之间和sr manager也要开会做报告，追问7why的报告。","like_count":0},{"had_liked":false,"id":196582,"user_name":"luming","can_delete":false,"product_type":"c1","uid":1019133,"ip_address":"","ucode":"93E4B154C51189","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/fd/e5cd25d2.jpg","comment_is_top":false,"comment_ctime":1585294821,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585294821","product_id":100002401,"comment_content":"有些公司用bug数来衡量研发，考评工程师，这个其实不能这么简单粗暴的处理","like_count":0},{"had_liked":false,"id":178418,"user_name":"大白","can_delete":false,"product_type":"c1","uid":1184488,"ip_address":"","ucode":"95F25A1B7C18B4","user_header":"https://static001.geekbang.org/account/avatar/00/12/12/e8/c42ad60d.jpg","comment_is_top":false,"comment_ctime":1581684642,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581684642","product_id":100002401,"comment_content":"文中提到追究责任但不惩罚！如果是一而再、再而三的犯同样的错误呢？","like_count":0},{"had_liked":false,"id":64940,"user_name":"mikejiang","can_delete":false,"product_type":"c1","uid":1396090,"ip_address":"","ucode":"9350F6DC7BC0E8","user_header":"https://static001.geekbang.org/account/avatar/00/15/4d/7a/106c3745.jpg","comment_is_top":false,"comment_ctime":1548982075,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548982075","product_id":100002401,"comment_content":"如果你是一家公司的技术主管，团队里的一位工程师因为误操作删除了线上的用户数据，这时候你又发现，上个月数据的自动备份因为某些故障停止了，现在你该怎么办呢？<br>——第一是先恢复服务，如何最大限度地恢复用户数据。第二步是事故复盘。为什么误删了用户数据？为什么能删除用户数据？为什么删除的是用户数据？如何才能避免误操作？为什么备份系统故障了？为什么被备份故障没有及时发现？备份系统的故障如何避免再次出现？","like_count":0},{"had_liked":false,"id":55640,"user_name":"虢國技醬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1546250413,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546250413","product_id":100002401,"comment_content":"打卡👊<br>1.数据修复，降低损失<br>2.查明原因，分析流程，检查制度<br>3.建立自动化流程，降低人为风险<br>4.人为原因，也应该在重要操作时结对操作","like_count":0},{"had_liked":false,"id":30559,"user_name":"勿忘初心，方得始终","can_delete":false,"product_type":"c1","uid":1215092,"ip_address":"","ucode":"DD6624FDF07FE0","user_header":"https://static001.geekbang.org/account/avatar/00/12/8a/74/ccae2c37.jpg","comment_is_top":false,"comment_ctime":1538922674,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538922674","product_id":100002401,"comment_content":"你好！安姐，这个课程还有微信讨论群的吗？","like_count":0},{"had_liked":false,"id":19475,"user_name":"大西瓜","can_delete":false,"product_type":"c1","uid":1204385,"ip_address":"","ucode":"2921B0ED5840A1","user_header":"https://static001.geekbang.org/account/avatar/00/12/60/a1/b13f6a28.jpg","comment_is_top":false,"comment_ctime":1533860998,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1533860998","product_id":100002401,"comment_content":"<br>1、自动备份没有成功，为什么没有发现，请负责备份的人员回答。<br>2、对于备份的成功与否是不是没有检查或监控校验的机制。<br>3、在操作线上数据的时候是否有相关的流程，按没按流程操作。<br>一般会要求工程师在操作用户数据的时候，第一步就是备份，但还是有未按规定步骤操作的人，这类人我个人的建议是要处罚。 如果没有制度步骤的，大家一起讨论，形成一个避免这种问题的方法，并要落实。<br>其实最担心的是大家对问题的态度，麻木，无意识，出了一个问题都感觉不是自己责任，没关系，看热闹的心情。","like_count":0},{"had_liked":false,"id":15429,"user_name":"missa","can_delete":false,"product_type":"c1","uid":1033417,"ip_address":"","ucode":"485CB229C4C556","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/c9/90c8a53e.jpg","comment_is_top":false,"comment_ctime":1531186832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531186832","product_id":100002401,"comment_content":"先针对出现的问题去思考why，为什么数据能被别人删除。为什么备份数据也出现故障了。<br>1.数据的权限管理是不是有问题，放得太大。<br>2.备份机制是不是不够好，故障后恢复时间这么慢<br>针对以上情况去解决问题，设定好流程规范，防止在犯错。<br>优先去补救，其次再追责，最后总结设置规范流程","like_count":0},{"had_liked":false,"id":8268,"user_name":"anchor","can_delete":false,"product_type":"c1","uid":1083124,"ip_address":"","ucode":"24EECD40CC54C2","user_header":"https://static001.geekbang.org/account/avatar/00/10/86/f4/331f33a7.jpg","comment_is_top":false,"comment_ctime":1526016167,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526016167","product_id":100002401,"comment_content":"也要有流程和底线","like_count":0},{"had_liked":false,"id":8249,"user_name":"关不上门","can_delete":false,"product_type":"c1","uid":1066324,"ip_address":"","ucode":"F4BD1DC005B467","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/54/e5924f87.jpg","comment_is_top":false,"comment_ctime":1526002636,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526002636","product_id":100002401,"comment_content":"我也是负责公司业务的支付和交易结算这一块，之前也是出过几次事故，好在发现及时影响可控，虽然没有追究责任，但是自己也是很自责不够细心，以后也会更加谨慎，更加重视，毕竟错误都等价于真金白银，心脏受不了。很受启发。","like_count":0},{"had_liked":false,"id":6135,"user_name":"欧的boy","can_delete":false,"product_type":"c1","uid":1092789,"ip_address":"","ucode":"6F0AF2B8DE1B34","user_header":"https://static001.geekbang.org/account/avatar/00/10/ac/b5/547cd31c.jpg","comment_is_top":false,"comment_ctime":1524459004,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1524459004","product_id":100002401,"comment_content":"这个问题不是炉石传说有一次赔卡包那个事。。。","like_count":0},{"had_liked":false,"id":3913,"user_name":"凡比","can_delete":false,"product_type":"c1","uid":1063263,"ip_address":"","ucode":"A4D5E964E2B82E","user_header":"","comment_is_top":false,"comment_ctime":1520986954,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1520986954","product_id":100002401,"comment_content":"安姐会如何解决? 说到问责，对事不对人，如何让肇事者知道问题原因后负责?","like_count":0},{"had_liked":false,"id":3523,"user_name":"Skysper","can_delete":false,"product_type":"c1","uid":1058800,"ip_address":"","ucode":"164B3CAF81A7C5","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/f0/06ecce19.jpg","comment_is_top":false,"comment_ctime":1519812472,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1519812472","product_id":100002401,"comment_content":"“逃避责任、避免让自己处于困境”应该是每个人在初期面对问题时的正常反应，也是正常的心理防御机制，所以应该培养更和谐和信任的团队关系，防止这种关系恶化，从而将其引导为解决问题型团队<br>但为了杜绝以后的错误，可以建立从上到下的责任分担模式和责任共担的小组责任共同体，培养集体责任感，也多了一层组内审查","like_count":0},{"had_liked":false,"id":2118,"user_name":"blueguitar","can_delete":false,"product_type":"c1","uid":1031879,"ip_address":"","ucode":"A4794AADD763D6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/c7/1d756c52.jpg","comment_is_top":false,"comment_ctime":1515969269,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1515969269","product_id":100002401,"comment_content":"日企文化也是一样。<br>发现bug时惯用三部曲：原因及如何解决，是否还有类似问题，将来如何避免。<br>刚开始时很不适应，感觉自己被兴师问罪，错误被无限放大。<br>其实换个角度想，对事不对人，也就释然了。<br>","like_count":0},{"had_liked":false,"id":1682,"user_name":"walt","can_delete":false,"product_type":"c1","uid":1039816,"ip_address":"","ucode":"F0AEA21D02B7E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dd/c8/3f100905.jpg","comment_is_top":false,"comment_ctime":1514109545,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1514109545","product_id":100002401,"comment_content":"第一步是安抚受害者，就是被删除数据的用户和公司自己，前面的同学说的很有启发性，就是上报公司，让运营客服考虑预案安抚客户，维持良好客户关系；同时公司领导层要安抚自己的情绪，冷静的处理问题；<br>第二步是恢复数据，集公司之力或借助外力马上恢复数据，数据库的delete操作是有日志可以恢复记录，truncate操作没有日志需要恢复文件，让备份系统正常运行；<br>第三步是调查事故原因，多问为什么，找到根本原因，向公司出具事故报告和流程改进建议，比如线上数据库访问权限设置，特别是线上数据库删除权限，备份检查等；<br>第四步是相关责任人向公司道歉；<br>第五步是公司表扬事故应急表现良好的员工。","like_count":0},{"had_liked":false,"id":1512,"user_name":"刘剑","can_delete":false,"product_type":"c1","uid":1032589,"ip_address":"","ucode":"B2115F99D63540","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/8d/17d20606.jpg","comment_is_top":false,"comment_ctime":1513315975,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1513315975","product_id":100002401,"comment_content":"有”rm -rf”这样的大杀器，误删数据的事情真不少，几个月前还出现华为删了移动数据的事情。出了线上事故，要么技术人员能力问题，要么意识问题，归根结底还是流程问题。  真出了事故追究责任，具体操作的技术人员可不一定担得起，大boss要背锅。<br><br>楼上居然有人和我名字一样。zzz","like_count":0},{"had_liked":false,"id":817,"user_name":"Jason-袁","can_delete":false,"product_type":"c1","uid":1020281,"ip_address":"","ucode":"7A7C0ABDCE8821","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/79/9bcfc264.jpg","comment_is_top":false,"comment_ctime":1511270515,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1511270515","product_id":100002401,"comment_content":"1.首先我会确定受损范围，确定之后切换受损用户新上载或者使用的数据到新硬盘空间，就是说先保证受损用户基本功能还是正常的，只是个性化等数据受损了，通知受损用户我们正在全力抢救，还请给我们时间，同时全力以赴寻找资料恢复专家尽可能恢复受损数据。<br>2.安抚误操作人员，尽可能的使其会议误操作流程，同时据此展开排查，看是否还有其他可能的误操作流程未被发现。<br>3.回顾设计方案和测试用例，查找为什么设计之初或者测试用例未覆盖到这些异常操作。<br>4.对事不对人的根据以上所有展开一次组内学习，是大家都有收获。","like_count":0},{"had_liked":false,"id":558,"user_name":"亚林","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1510801252,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1510801252","product_id":100002401,"comment_content":"能恢复就尽可能的想办法恢复，这是当前最重要的事情。事后，需要重点和相关人员了解为什么没有及时发现自动备份停止，了解备份故障原因和误操作怎么避免。由这次事故，能否争取相关时间和资源彻底解决一个问题。","like_count":0},{"had_liked":false,"id":547,"user_name":"Liang","can_delete":false,"product_type":"c1","uid":1007044,"ip_address":"","ucode":"FC79724F187245","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/c4/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1510752638,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1510752638","product_id":100002401,"comment_content":"越来越觉得很多事情是在两个极端之间找到一个平衡点。英文叫trade off，中文叫中庸。这个平衡点也不是一成不变的，需要根据具体环境随时变化，这才是最见功力的地方。系统设计的面试都没有标准答案，考察的就是平衡现有条件和各种方案优缺点的能力。","like_count":0},{"had_liked":false,"id":536,"user_name":"wangtie","can_delete":false,"product_type":"c1","uid":1007952,"ip_address":"","ucode":"61B29F00C3DEEC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/50/7cc02851.jpg","comment_is_top":false,"comment_ctime":1510715626,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1510715626","product_id":100002401,"comment_content":"应该有不少的团队和我们一样执行敏捷开发就是草草上线，出了问题再改。安姐写写怎么建立员工关系，呆了三年的团队也很稳定，大家熟了对错误的容忍度几乎无底线，喜欢睁只眼闭只眼，当然跟公司的状况环境、管理者能力也有关系。互相帮助是做到了，互相信任感觉没有做到，团队抱怨声不断。","like_count":0},{"had_liked":false,"id":535,"user_name":"子悠","can_delete":false,"product_type":"c1","uid":1000383,"ip_address":"","ucode":"070BB09477E8A8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/bf/9a982bc1.jpg","comment_is_top":false,"comment_ctime":1510715021,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1510715021","product_id":100002401,"comment_content":"安姐的文章写的通俗易懂，而且都是工作中会遇到的问题，现象。不过有点过于短简，希望能深入下。","like_count":0},{"had_liked":false,"id":533,"user_name":"陈颜俊","can_delete":false,"product_type":"c1","uid":1010395,"ip_address":"","ucode":"A5C0355C3C82EA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/db/de88c883.jpg","comment_is_top":false,"comment_ctime":1510713536,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1510713536","product_id":100002401,"comment_content":"很棒的分享，追究责任，但不惩罚！","like_count":0}]}