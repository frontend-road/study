{"id":485140,"title":"åŠ é¤ï½œèŠèŠæœ€è¿‘å¤§çƒ­çš„Goæ³›å‹","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Tony Baiã€‚</p><p>ç¾å›½æ—¶é—´2022å¹´1æœˆ31æ—¥ï¼Œåœ¨ä¸­å›½äººæ°‘æ¬¢åº†è™å¹´æ˜¥èŠ‚ä¹‹é™…ï¼ŒGoæ ¸å¿ƒå›¢é˜Ÿå‘å¸ƒäº†<a href=\"https://go.dev/blog/go1.18beta2\">Go 1.18 Beta2ç‰ˆæœ¬</a>ã€‚åœ¨Go 1.18beta2ç‰ˆæœ¬å‘å¸ƒçš„<a href=\"https://go.dev/blog/go1.18beta2\">åšæ–‡</a>ä¸­ï¼ŒGoæ ¸å¿ƒå›¢é˜Ÿè¿˜ç»™å‡ºäº†Go 1.18ç‰ˆæœ¬çš„å‘å¸ƒè®¡åˆ’ï¼š<strong>2022å¹´2æœˆå‘å¸ƒGo 1.18RCï¼ˆrelease candidateï¼Œå³å‘å¸ƒå€™é€‰ç‰ˆï¼‰ï¼Œ2022å¹´3æœˆå‘å¸ƒGo 1.18æœ€ç»ˆç‰ˆæœ¬</strong>ã€‚</p><p>è€ƒè™‘åˆ°Go 1.18ç‰ˆæœ¬ä¸­å¼•å…¥äº†Goè¯­è¨€å¼€æºä»¥æ¥æœ€å¤§çš„è¯­æ³•ç‰¹æ€§å˜åŒ–ï¼š<strong>æ³›å‹ï¼ˆgenericï¼‰</strong>ï¼Œæ”¹åŠ¨å’Œå½±å“éƒ½å¾ˆå¤§ï¼ŒGoæ ¸å¿ƒå›¢é˜Ÿå°†Go 1.18ç‰ˆæœ¬å»¶è¿Ÿä¸€ä¸ªæœˆï¼Œæ”¾åˆ°3æœˆå‘å¸ƒä¹Ÿä¸å¤±ä¸ºç¨³å¦¥ä¹‹ä¸¾ã€‚</p><p>åœ¨Goæ³›å‹æ­£å¼è½åœ°ä¹‹å‰ï¼Œæˆ‘æƒ³åœ¨è¿™ç¯‡åŠ é¤ä¸­å¸¦ä½ è®¤è¯†ä¸€ä¸‹Goæ³›å‹ï¼Œç›®çš„æ˜¯â€œæŠ›ç –å¼•ç‰â€ï¼Œä¸ºä½ åç»­ç³»ç»Ÿå­¦ä¹ å’Œåº”ç”¨Goæ³›å‹è¯­æ³•ç‰¹æ€§å¼€ä¸ªå¤´å„¿ã€‚</p><p>æˆ‘ä»¬ä»Šå¤©å°†å›´ç»•Goä¸ºä»€ä¹ˆåŠ å…¥æ³›å‹ã€æ³›å‹è®¾è®¡æ–¹æ¡ˆçš„æ¼”åŒ–å†å²ã€Goæ³›å‹çš„ä¸»è¦è¯­æ³•ä»¥åŠGoæ³›å‹çš„ä½¿ç”¨å»ºè®®å‡ ä¸ªæ–¹é¢ï¼ŒèŠèŠGoæ³›å‹çš„é‚£äº›äº‹å„¿ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹Goè¯­è¨€ä¸ºä»€ä¹ˆè¦åŠ å…¥æ³›å‹è¯­æ³•ç‰¹æ€§ã€‚</p><h2>ä¸ºä»€ä¹ˆè¦åŠ å…¥æ³›å‹ï¼Ÿ</h2><p>æ ¹æ®è¿‘å‡ å¹´çš„Goå®˜æ–¹ç”¨æˆ·è°ƒæŸ¥ç»“æœï¼Œåœ¨â€œä½ æœ€æƒ³è¦çš„Goè¯­è¨€ç‰¹æ€§â€è¿™é¡¹è°ƒæŸ¥ä¸­ï¼Œæ³›å‹éœ¸æ¦œå¤šå¹´ã€‚ä½ å¯ä»¥çœ‹ä¸‹è¿™å¼ æ‘˜è‡ªæœ€æ–°çš„<a href=\"https://go.dev/blog/survey2020-results\">2020å¹´Goå®˜æ–¹ç”¨æˆ·è°ƒæŸ¥ç»“æœ</a>çš„å›¾ç‰‡ï¼š</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/12/66/12c48b37821f63e81e7ee52ae6175566.png?wh=1910x1244\" alt=\"å›¾ç‰‡\"></p><p>æ—¢ç„¶Goç¤¾åŒºå¯¹æ³›å‹ç‰¹æ€§çš„éœ€æ±‚å¦‚æ­¤å¼ºçƒˆï¼Œé‚£ä¹ˆGoæ ¸å¿ƒå›¢é˜Ÿä¸ºä½•è¦åœ¨Goå¼€æºåçš„ç¬¬13ä¸ªå¹´å¤´ï¼Œæ‰å°†è¿™ä¸ªç‰¹æ€§åŠ å…¥è¯­è¨€å½“ä¸­å‘¢ï¼Ÿè¿™é‡Œçš„æ•…äº‹è¯´æ¥è¯é•¿ã€‚è¦æƒ³äº†è§£å…¶ä¸­åŸå› ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ¥äº†è§£ä¸€ä¸‹<strong>ä»€ä¹ˆæ˜¯æ³›å‹</strong>ï¼Ÿ</p><p><a href=\"https://en.wikipedia.org/wiki/Generic_programming\">ç»´åŸºç™¾ç§‘</a>æåˆ°ï¼šæœ€åˆæ³›å‹ç¼–ç¨‹è¿™ä¸ªæ¦‚å¿µæ¥è‡ªäºç¼ªæ–¯Â·å¤§å«å’Œæ–¯æ·æ½˜è¯ºå¤«.äºšå†å±±å¤§åˆè‘—çš„â€œæ³›å‹ç¼–ç¨‹â€ä¸€æ–‡ã€‚é‚£ç¯‡æ–‡ç« å¯¹æ³›å‹ç¼–ç¨‹çš„è¯ é‡Šæ˜¯ï¼šâ€œ<strong>æ³›å‹ç¼–ç¨‹çš„ä¸­å¿ƒæ€æƒ³æ˜¯å¯¹å…·ä½“çš„ã€é«˜æ•ˆçš„ç®—æ³•è¿›è¡ŒæŠ½è±¡ï¼Œä»¥è·å¾—é€šç”¨çš„ç®—æ³•ï¼Œç„¶åè¿™äº›ç®—æ³•å¯ä»¥ä¸ä¸åŒçš„æ•°æ®è¡¨ç¤ºæ³•ç»“åˆèµ·æ¥ï¼Œäº§ç”Ÿå„ç§å„æ ·æœ‰ç”¨çš„è½¯ä»¶</strong>â€ã€‚è¯´ç™½äº†å°±æ˜¯å°†ç®—æ³•ä¸ç±»å‹è§£è€¦ï¼Œå®ç°ç®—æ³•æ›´å¹¿æ³›çš„å¤ç”¨ã€‚</p><p>æˆ‘ä»¬ä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•å¾—ä¸èƒ½å†ç®€å•çš„åŠ æ³•å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªint32ç±»å‹å‚æ•°ä½œä¸ºåŠ æ•°ï¼š</p><pre><code class=\"language-plain\">func Add(a, b int32) int32 {\n\treturn a + b\n}\n</code></pre><p>ä¸è¿‡ä¸Šé¢çš„å‡½æ•°Addä»…é€‚ç”¨äºint32ç±»å‹çš„åŠ æ•°ï¼Œå¦‚æœæˆ‘ä»¬è¦å¯¹intã€int64ã€byteç­‰ç±»å‹çš„åŠ æ•°è¿›è¡ŒåŠ æ³•è¿ç®—ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®ç°AddIntã€AddInt64ã€AddByteç­‰å‡½æ•°ã€‚</p><p>é‚£å¦‚æœæˆ‘ä»¬ç”¨æ³›å‹ç¼–ç¨‹çš„æ€æƒ³æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯æ€æ ·å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬éœ€è¦å°†<strong>ç®—æ³•ä¸ç±»å‹è§£è€¦</strong>ï¼Œå®ç°ä¸€ä¸ªæ³›å‹ç‰ˆçš„Addç®—æ³•ï¼Œæˆ‘ä»¬ç”¨Goæ³›å‹è¯­æ³•å®ç°çš„æ³›å‹ç‰ˆAddæ˜¯è¿™æ ·çš„ï¼ˆæ³¨æ„è¿™é‡Œéœ€è¦ä½¿ç”¨Go 1.18beta1æˆ–åç»­ç‰ˆæœ¬è¿›è¡Œç¼–è¯‘å’Œè¿è¡Œï¼‰ï¼š</p><pre><code class=\"language-plain\">func Add[T constraints.Integer](a, b T) T {\n    return a + b\n}\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ³›å‹ç‰ˆAddå‡½æ•°å»è¿›è¡Œå„ç§æ•´å‹ç±»å‹çš„åŠ æ³•è¿ç®—äº†ï¼Œæ¯”å¦‚ä¸‹é¢ä»£ç ï¼š</p><pre><code class=\"language-plain\">func main() {\n    var m, n int = 5, 6\n    println(Add(m,n)) // Add[int](m, n)\n    var i,j int64 = 15, 16\n    println(Add(i,j)) // Add[int64](i, j)\n    var c,d byte = 0x11, 0x12\n    println(Add(c,d)) // Add[byte](c, d)\n}\n</code></pre><p>é€šè¿‡è¿™ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ²¡æœ‰æ³›å‹çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹ä¸åŒç±»å‹é‡å¤å®ç°ç›¸åŒçš„ç®—æ³•é€»è¾‘ï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­æåˆ°çš„AddIntã€AddInt64ç­‰ã€‚</p><p>è¿™å¯¹äºç®€å•çš„ã€è¯¸å¦‚ä¸Šé¢è¿™æ ·çš„åŠ æ³•å‡½æ•°è¿˜å¯å¿å—ï¼Œä½†å¯¹äºå¤æ‚çš„ç®—æ³•ï¼Œæ¯”å¦‚æ¶‰åŠå¤æ‚æ’åºã€æŸ¥æ‰¾ã€æ ‘ã€å›¾ç­‰ç®—æ³•ï¼Œä»¥åŠä¸€äº›å®¹å™¨ç±»å‹ï¼ˆé“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ç­‰ï¼‰çš„å®ç°æ—¶ï¼Œç¼ºå°‘äº†æ³›å‹çš„æ”¯æŒè¿˜çœŸæ˜¯éº»çƒ¦ã€‚</p><p>åœ¨æ²¡æœ‰æ³›å‹ä¹‹å‰ï¼ŒGopherä»¬é€šå¸¸ä½¿ç”¨ç©ºæ¥å£ç±»å‹interface{}ï¼Œä½œä¸ºç®—æ³•æ“ä½œçš„å¯¹è±¡çš„æ•°æ®ç±»å‹ï¼Œä¸è¿‡è¿™æ ·åšçš„ä¸è¶³ä¹‹å¤„ä¹Ÿå¾ˆæ˜æ˜¾ï¼šä¸€æ˜¯æ— æ³•è¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ï¼ŒäºŒæ˜¯æ€§èƒ½æœ‰æŸå¤±ã€‚</p><p><strong>é‚£ä¹ˆå›åˆ°å‰é¢çš„é—®é¢˜ï¼Œæ—¢ç„¶æ³›å‹æœ‰è¿™ä¹ˆå¤šä¼˜ç‚¹ï¼Œä¸ºä»€ä¹ˆGoä¸æ—©ç‚¹åŠ å…¥æ³›å‹å‘¢ï¼Ÿ</strong>å…¶å®è¿™ä¸ªé—®é¢˜åœ¨ <a href=\"https://go.dev/doc/faq#generics\">Go FAQ</a> ä¸­æ—©æœ‰ç­”æ¡ˆï¼Œæˆ‘æ€»ç»“ä¸€ä¸‹å¤§æ¦‚æœ‰ä¸‰ç‚¹ä¸»è¦ç†ç”±ï¼š</p><ul>\n<li>è¿™ä¸ªè¯­æ³•ç‰¹æ€§ä¸ç´§è¿«ï¼Œä¸æ˜¯Goæ—©æœŸçš„è®¾è®¡ç›®æ ‡ï¼›</li>\n</ul><p>åœ¨Goè¯ç”Ÿæ—©æœŸï¼Œå¾ˆå¤šåŸºæœ¬è¯­æ³•ç‰¹æ€§çš„ä¼˜å…ˆçº§éƒ½è¦é«˜äºæ³›å‹ã€‚æ­¤å¤–ï¼ŒGoå›¢é˜Ÿæ›´å¤šå°†è¯­è¨€çš„è®¾è®¡ç›®æ ‡å®šä½åœ¨è§„æ¨¡åŒ–ï¼ˆscalabilityï¼‰ã€å¯è¯»æ€§ã€å¹¶å‘æ€§ä¸Šï¼Œæ³›å‹ä¸è¿™äº›ä¸»è¦ç›®æ ‡å…³è”æ€§ä¸å¼ºã€‚ç­‰Goæˆç†Ÿåï¼ŒGoå›¢é˜Ÿä¼šåœ¨é€‚å½“æ—¶å€™å¼•å…¥æ³›å‹ã€‚</p><ul>\n<li>ä¸ç®€å•çš„è®¾è®¡å“²å­¦æœ‰æ‚–ï¼›</li>\n</ul><p>Goè¯­è¨€æœ€å¸ç›çš„åœ°æ–¹å°±æ˜¯<strong>ç®€å•</strong>ï¼Œç®€å•ä¹Ÿæ˜¯Goè®¾è®¡å“²å­¦ä¹‹é¦–ï¼ä½†æ³›å‹è¿™ä¸ªè¯­æ³•ç‰¹æ€§ä¼šç»™è¯­è¨€å¸¦æ¥å¤æ‚æ€§ï¼Œè¿™ç§å¤æ‚æ€§ä¸ä»…ä½“ç°åœ¨è¯­æ³•å±‚é¢ä¸Šå¼•å…¥äº†æ–°çš„è¯­æ³•å…ƒç´ ï¼Œä¹Ÿä½“ç°åœ¨ç±»å‹ç³»ç»Ÿå’Œè¿è¡Œæ—¶å±‚é¢ä¸Šä¸ºæ”¯æŒæ³›å‹è¿›è¡Œäº†å¤æ‚çš„å®ç°ã€‚</p><ul>\n<li>å°šæœªæ‰¾åˆ°åˆé€‚çš„ã€ä»·å€¼è¶³ä»¥æŠµæ¶ˆå…¶å¼•å…¥çš„å¤æ‚æ€§çš„ç†æƒ³è®¾è®¡æ–¹æ¡ˆã€‚</li>\n</ul><p>ä»Goå¼€æºé‚£ä¸€å¤©å¼€å§‹ï¼ŒGoå›¢é˜Ÿå°±æ²¡æœ‰é—´æ–­è¿‡å¯¹æ³›å‹çš„æ¢ç´¢ï¼Œå¹¶ä¸€ç›´å°è¯•å¯»æ‰¾ä¸€ä¸ªç†æƒ³çš„æ³›å‹è®¾è®¡æ–¹æ¡ˆï¼Œä½†å§‹ç»ˆæœªèƒ½å¦‚æ„¿ã€‚</p><p>ç›´åˆ°è¿‘å‡ å¹´Goå›¢é˜Ÿè§‰å¾—Goå·²ç»é€æ¸æˆç†Ÿï¼Œæ˜¯æ—¶å€™ä¸‹å†³å¿ƒè§£å†³Goç¤¾åŒºä¸»è¦å…³æ³¨çš„å‡ ä¸ªé—®é¢˜äº†ï¼ŒåŒ…æ‹¬æ³›å‹ã€åŒ…ä¾èµ–ä»¥åŠé”™è¯¯å¤„ç†ç­‰ï¼Œå¹¶å®‰æ’ä¼Šæ©Â·æ³°å‹’å’Œç½—ä¼¯ç‰¹Â·æ ¼ç‘å²è«èŠ±è´¹æ›´å¤šç²¾åŠ›åœ¨æ³›å‹çš„è®¾è®¡æ–¹æ¡ˆä¸Šï¼Œè¿™æ‰æœ‰äº†åœ¨å³å°†å‘å¸ƒçš„Go 1.18ç‰ˆæœ¬ä¸­æ³›å‹è¯­æ³•ç‰¹æ€§çš„è½åœ°ã€‚</p><p>ä¸ºäº†è®©ä½ æ›´æ¸…æ™°åœ°çœ‹åˆ°Goå›¢é˜Ÿåœ¨æ³›å‹ä¸Šä»˜å‡ºçš„åŠªåŠ›ï¼ŒåŒæ—¶ä¹Ÿèƒ½äº†è§£Goæ³›å‹çš„è®¾è®¡è¿‡ç¨‹ä¸æ¥é¾™å»è„‰ï¼Œè¿™é‡Œæˆ‘ç®€å•æ•´ç†äº†ä¸€ä¸ªGoæ³›å‹è®¾è®¡çš„ç®€å²ï¼Œä½ å¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚</p><h2>Goæ³›å‹è®¾è®¡çš„ç®€å²</h2><p>Goæ ¸å¿ƒå›¢é˜Ÿå¯¹æ³›å‹çš„æ¢ç´¢ï¼Œæ˜¯ä»<strong>2009å¹´12æœˆ3æ—¥</strong>Russ Coxåœ¨å…¶åšå®¢ç«™ç‚¹ä¸Šå‘è¡¨çš„ä¸€ç¯‡æ–‡ç« å¼€å§‹çš„ã€‚åœ¨è¿™ç¯‡å«<a href=\"https://research.swtch.com/generic\">â€œæ³›å‹çª˜å¢ƒâ€</a>çš„æ–‡ç« ä¸­ï¼ŒRuss Coxæå‡ºäº†Goæ³›å‹å®ç°çš„ä¸‰ä¸ªå¯éµå¾ªçš„æ–¹æ³•ï¼Œä»¥åŠæ¯ç§æ–¹æ³•çš„ä¸è¶³ï¼Œä¹Ÿå°±æ˜¯ä¸‰ä¸ªslowï¼ˆæ‹–æ…¢ï¼‰ï¼š</p><ul>\n<li><strong>æ‹–æ…¢ç¨‹åºå‘˜</strong>ï¼šä¸å®ç°æ³›å‹ï¼Œä¸ä¼šå¼•å…¥å¤æ‚æ€§ï¼Œä½†å°±åƒå‰é¢ä¾‹å­ä¸­é‚£æ ·ï¼Œéœ€è¦ç¨‹åºå‘˜èŠ±è´¹ç²¾åŠ›é‡å¤å®ç°AddIntã€AddInt64ç­‰ï¼›</li>\n<li><strong>æ‹–æ…¢ç¼–è¯‘å™¨</strong>ï¼šå°±åƒC++çš„æ³›å‹å®ç°æ–¹æ¡ˆé‚£æ ·ï¼Œé€šè¿‡å¢åŠ ç¼–è¯‘å™¨è´Ÿæ‹…ä¸ºæ¯ä¸ªç±»å‹å®ä¾‹ç”Ÿæˆä¸€ä»½å•ç‹¬çš„æ³›å‹å‡½æ•°çš„å®ç°ï¼Œè¿™ç§æ–¹æ¡ˆäº§ç”Ÿäº†å¤§é‡çš„ä»£ç ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ˜¯å¤šä½™çš„ï¼Œæœ‰æ—¶å€™è¿˜éœ€è¦ä¸€ä¸ªå¥½çš„é“¾æ¥å™¨æ¥æ¶ˆé™¤é‡å¤çš„æ‹·è´ï¼›</li>\n<li><strong>æ‹–æ…¢æ‰§è¡Œæ€§èƒ½</strong>ï¼šå°±åƒJavaçš„æ³›å‹å®ç°æ–¹æ¡ˆé‚£æ ·ï¼Œé€šè¿‡éšå¼çš„è£…ç®±å’Œæ‹†ç®±æ“ä½œæ¶ˆé™¤ç±»å‹å·®å¼‚ï¼Œè™½ç„¶èŠ‚çœäº†ç©ºé—´ï¼Œä½†ä»£ç æ‰§è¡Œæ•ˆç‡ä½ã€‚</li>\n</ul><p>åœ¨å½“æ—¶ï¼Œä¸‰ä¸ªslowä¹‹é—´éœ€è¦å–èˆï¼Œå°±å¦‚åŒæ•°æ®ä¸€è‡´æ€§çš„CAPåŸåˆ™ä¸€æ ·ï¼Œæ— æ³•å°†ä¸‰ä¸ªslowåŒæ—¶æ¶ˆé™¤ã€‚</p><p>ä¹‹åï¼Œä¼Šæ©Â·æ³°å‹’ä¸»è¦è´Ÿè´£è·Ÿè¿›Goæ³›å‹æ–¹æ¡ˆçš„è®¾è®¡ã€‚ä»2010åˆ°2016å¹´ï¼Œä¼Šæ©Â·æ³°å‹’å…ˆåæå‡ºäº†å‡ ç‰ˆæ³›å‹è®¾è®¡æ–¹æ¡ˆï¼Œå®ƒä»¬æ˜¯ï¼š</p><ul>\n<li>2010å¹´6æœˆä»½ï¼Œä¼Šæ©Â·æ³°å‹’æå‡ºçš„<a href=\"https://go.googlesource.com/proposal/+/master/design/15292/2010-06-type-functions.md\">Type Functions</a>è®¾è®¡æ–¹æ¡ˆï¼›</li>\n<li>2011å¹´3æœˆä»½ï¼Œä¼Šæ©Â·æ³°å‹’æå‡ºçš„<a href=\"https://go.googlesource.com/proposal/+/master/design/15292/2011-03-gen.md\">Generalized Types</a>è®¾è®¡æ–¹æ¡ˆï¼›</li>\n<li>2013å¹´10æœˆä»½ï¼Œä¼Šæ©Â·æ³°å‹’æå‡ºçš„<a href=\"https://go.googlesource.com/proposal/+/master/design/15292/2013-10-gen.md\">Generalized Typesè®¾è®¡æ–¹æ¡ˆæ›´æ–°ç‰ˆ</a>ï¼›</li>\n<li>2013å¹´12æœˆä»½ï¼Œä¼Šæ©Â·æ³°å‹’æå‡ºçš„<a href=\"https://go.googlesource.com/proposal/+/master/design/15292/2013-12-type-params.md\">Type Parameters</a>è®¾è®¡æ–¹æ¡ˆï¼›</li>\n<li>2016å¹´9æœˆä»½ï¼Œå¸ƒè±æ©Â·CÂ·ç±³å°”æ–¯æå‡ºçš„<a href=\"https://go.googlesource.com/proposal/+/master/design/15292/2016-09-compile-time-functions.md\">Compile-time Functions and First Class Types</a>è®¾è®¡æ–¹æ¡ˆã€‚</li>\n</ul><p>è™½ç„¶è¿™äº›æ–¹æ¡ˆå› ä¸ºå­˜åœ¨å„ç§ä¸è¶³ï¼Œæœ€ç»ˆéƒ½æ²¡æœ‰è¢«æ¥å—ï¼Œä½†è¿™äº›æ¢ç´¢ä¸ºåç»­Goæ³›å‹çš„æœ€ç»ˆè½åœ°å¥ å®šäº†åŸºç¡€ã€‚</p><p>2017å¹´7æœˆï¼ŒRuss Coxåœ¨GopherCon 2017å¤§ä¼šä¸Šå‘è¡¨æ¼”è®²â€œ<a href=\"https://go.dev/blog/toward-go2\">Toward Go 2</a>â€ï¼Œæ­£å¼å¹å“Goå‘ä¸‹ä¸€ä¸ªé˜¶æ®µæ¼”åŒ–çš„å·è§’ï¼ŒåŒ…æ‹¬é‡ç‚¹è§£å†³æ³›å‹ã€åŒ…ä¾èµ–ä»¥åŠé”™è¯¯å¤„ç†ç­‰Goç¤¾åŒºæœ€å¹¿æ³›å…³æ³¨çš„é—®é¢˜ã€‚</p><p>åæ¥ï¼Œåœ¨2018å¹´8æœˆï¼Œä¹Ÿå°±æ˜¯GopherCon 2018å¤§ä¼šç»“æŸåä¸ä¹…ï¼ŒGoæ ¸å¿ƒå›¢é˜Ÿå‘å¸ƒäº†Go2 draft proposalï¼Œè¿™é‡Œé¢æ¶µç›–äº†ç”±ä¼Šæ©Â·æ³°å‹’å’Œç½—ä¼¯ç‰¹Â·æ ¼ç‘å²è«æ“åˆ€ä¸»å†™çš„Goæ³›å‹çš„<a href=\"https://github.com/golang/proposal/blob/00fd2f65291738699cd265243559718f1fb7d8c5/design/go2draft-contracts.md\">ç¬¬ä¸€ç‰ˆdraft proposal</a>ã€‚</p><p>è¿™ç‰ˆè®¾è®¡è‰æ¡ˆå¼•å…¥äº†<strong>contractå…³é”®å­—</strong>æ¥å®šä¹‰æ³›å‹ç±»å‹å‚æ•°ï¼ˆtype parameterï¼‰çš„çº¦æŸã€ç±»å‹å‚æ•°æ”¾åœ¨æ™®é€šå‡½æ•°å‚æ•°åˆ—è¡¨å‰é¢çš„<strong>å°æ‹¬å·</strong>ä¸­ï¼Œå¹¶ç”¨typeå…³é”®å­—å£°æ˜ã€‚ä¸‹é¢æ˜¯è¿™ä¸ªè‰æ¡ˆçš„è¯­æ³•ç¤ºä¾‹ï¼š</p><pre><code class=\"language-plain\">// ç¬¬ä¸€ç‰ˆæ³›å‹æŠ€æœ¯è‰æ¡ˆä¸­çš„å…¸å‹æ³›å‹è¯­æ³•\n\ncontract stringer(x T) {\n    var s string = x.String()\n}\n\nfunc Stringify(type T stringer)(s []T) (ret []string) {\n\n}\n</code></pre><p>æ¥ç€ï¼Œåœ¨2019å¹´7æœˆï¼Œä¼Šæ©Â·æ³°å‹’åœ¨GopherCon 2019å¤§ä¼šä¸Šå‘è¡¨æ¼”è®²<a href=\"https://go.dev/blog/why-generics\">â€œWhy Generics?â€</a>ï¼Œå¹¶æ›´æ–°äº†<a href=\"https://github.com/golang/proposal/blob/4a54a00950b56dd0096482d0edae46969d7432a6/design/go2draft-contracts.md\">æ³›å‹çš„æŠ€æœ¯è‰æ¡ˆ</a>ï¼Œç®€åŒ–äº†contractçš„è¯­æ³•è®¾è®¡ï¼Œä¸‹é¢æ˜¯ç®€åŒ–åçš„contractè¯­æ³•ï¼Œä½ å¯ä»¥å¯¹æ¯”ä¸Šé¢ä»£ç ç¤ºä¾‹ä¸­çš„contractè¯­æ³•çœ‹çœ‹ï¼š</p><pre><code class=\"language-plain\">contract stringer(T) {\n    T String() string\n}\n</code></pre><p>åæ¥ï¼Œåœ¨2020å¹´6æœˆï¼Œä¸€ç¯‡å«<a href=\"https://arxiv.org/abs/2005.11710\">ã€ŠFeatherweight Goã€‹</a>è®ºæ–‡å‘è¡¨åœ¨arxiv.orgä¸Šï¼Œè¿™ç¯‡è®ºæ–‡å‡ºè‡ªè‘—åè®¡ç®—æœºç§‘å­¦å®¶ã€å‡½æ•°è¯­è¨€ä¸“å®¶ã€Haskellè¯­è¨€çš„è®¾è®¡è€…ä¹‹ä¸€ã€Javaæ³›å‹çš„è®¾è®¡è€…è²åˆ©æ™®Â·ç“¦å¾·å‹’ï¼ˆPhilip Wadlerï¼‰ä¹‹æ‰‹ã€‚</p><p>Rob Pikeé‚€è¯·ä»–å¸®åŠ©Goæ ¸å¿ƒå›¢é˜Ÿè§£å†³Goè¯­è¨€çš„æ³›å‹æ‰©å±•é—®é¢˜ï¼Œè¿™ç¯‡è®ºæ–‡å°±æ˜¯è²åˆ©æ™®Â·ç“¦å¾·å¯¹è¿™æ¬¡é‚€è¯·çš„å›åº”</p><p>è¿™ç¯‡è®ºæ–‡ä¸ºGoè¯­è¨€çš„ä¸€ä¸ªæœ€å°è¯­æ³•å­é›†è®¾è®¡äº†æ³›å‹è¯­æ³•Featherweight Generic Goï¼ˆFGGï¼‰ï¼Œå¹¶æˆåŠŸåœ°ç»™å‡ºäº†FGGåˆ°Feighterweight Goï¼ˆFGï¼‰çš„å¯è¡Œæ€§å®ç°çš„å½¢å¼åŒ–è¯æ˜ã€‚è¿™ç¯‡è®ºæ–‡çš„å½¢å¼åŒ–è¯æ˜ç»™Goå›¢é˜Ÿå¸¦æ¥äº†å¾ˆå¤§ä¿¡å¿ƒï¼Œä¹Ÿè®©Goå›¢é˜Ÿåœ¨ä¸€äº›æ³›å‹è¯­æ³•é—®é¢˜ä¸Šè¾¾æˆæ›´å¹¿æ³›çš„ä¸€è‡´ã€‚</p><p>2020å¹´6æœˆæœ«ï¼Œä¼Šæ©Â·æ³°å‹’å’Œç½—ä¼¯ç‰¹Â·æ ¼ç‘å²è«åœ¨Goå®˜æ–¹åšå®¢å‘è¡¨äº†æ–‡ç« <a href=\"http://go.dev/blog/generics-next-step\">ã€ŠThe Next Step for Genericsã€‹</a>ï¼Œä»‹ç»äº†Goæ³›å‹å·¥ä½œçš„æœ€æ–°è¿›å±•ã€‚Goå›¢é˜Ÿæ”¾å¼ƒäº†ä¹‹å‰çš„æŠ€æœ¯è‰æ¡ˆï¼Œå¹¶é‡æ–°ç¼–å†™äº†<a href=\"https://github.com/golang/proposal/blob/d44c4ded9c1a13dcf715ac641ce760170fbbcf64/design/go2draft-type-parameters.md\">ä¸€ä¸ªæ–°è‰æ¡ˆ</a>ã€‚</p><p>åœ¨è¿™ä»½æ–°æŠ€æœ¯æ–¹æ¡ˆä¸­ï¼ŒGoå›¢é˜Ÿæ”¾å¼ƒäº†å¼•å…¥contractå…³é”®å­—ä½œä¸ºæ³›å‹ç±»å‹å‚æ•°çš„çº¦æŸï¼Œè€Œé‡‡ç”¨æ‰©å±•åçš„interfaceæ¥æ›¿ä»£contractã€‚è¿™æ ·ä¸Šé¢çš„Stringifyå‡½æ•°å°±å¯ä»¥å†™æˆå¦‚ä¸‹å½¢å¼ï¼š</p><pre><code class=\"language-plain\">type Stringer interface {\n    String() string\n}\n\nfunc Stringify(type T Stringer)(s []T) (ret []string) {\n    ... ...\n}\n</code></pre><p>åŒæ—¶ï¼ŒGoå›¢é˜Ÿè¿˜æ¨å‡ºäº†å¯ä»¥<a href=\"https://go2goplay.golang.org\">åœ¨çº¿è¯•éªŒGoæ³›å‹è¯­æ³•çš„playground</a>ï¼Œè¿™æ ·Gopherä»¬å¯ä»¥ç›´è§‚ä½“éªŒæ–°è¯­æ³•ï¼Œå¹¶ç»™å‡ºè‡ªå·±çš„æ„è§åé¦ˆã€‚</p><p>ç„¶åï¼Œåœ¨2020å¹´11æœˆçš„GopherCon 2020å¤§ä¼šï¼Œç½—ä¼¯ç‰¹Â·æ ¼ç‘å²è«ä¸å…¨ä¸–ç•Œçš„GopheråŒæ­¥äº†Goæ³›å‹çš„æœ€æ–°è¿›å±•å’Œroadmapï¼Œåœ¨æœ€æ–°çš„æŠ€æœ¯è‰æ¡ˆç‰ˆæœ¬ä¸­ï¼ŒåŒ…è£¹ç±»å‹å‚æ•°çš„å°æ‹¬å·è¢«æ–¹æ‹¬å·å–ä»£ï¼Œç±»å‹å‚æ•°å‰é¢çš„typeå…³é”®å­—ä¹Ÿä¸å†éœ€è¦äº†ï¼š</p><pre><code class=\"language-plain\">func Stringify[T Stringer](s []T) (ret []string) {\n    ... ...\n}\n</code></pre><p>ä¸æ­¤åŒæ—¶ï¼Œgo2goplay.golang.orgä¹Ÿæ”¯æŒäº†æ–¹æ‹¬å·è¯­æ³•ï¼ŒGopherä»¬å¯ä»¥åœ¨çº¿ä½“éªŒã€‚</p><p>æ¥ä¸‹æ¥çš„2021å¹´1æœˆï¼Œ<a href=\"https://go.dev/blog/generics-proposal\">Goå›¢é˜Ÿæ­£å¼æå‡ºå°†æ³›å‹åŠ å…¥Goçš„proposal</a>ï¼Œ2021å¹´2æœˆï¼Œè¿™ä¸ªææ¡ˆè¢«æ­£å¼æ¥å—ã€‚</p><p>ç„¶åæ˜¯2021å¹´4æœˆï¼Œä¼Šæ©Â·æ³°å‹’åœ¨GitHubä¸Šå‘å¸ƒ <a href=\"https://github.com/golang/go/issues/45346\">issue</a>ï¼Œæè®®å»é™¤åŸGoæ³›å‹æ–¹æ¡ˆä¸­ç½®äºinterfaceå®šä¹‰ä¸­çš„type listä¸­çš„typeå…³é”®å­—ï¼Œå¹¶å¼•å…¥type setçš„æ¦‚å¿µï¼Œä¸‹é¢æ˜¯ç›¸å…³ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class=\"language-plain\">// ä¹‹å‰ä½¿ç”¨type listçš„æ–¹æ¡ˆ\ntype SignedInteger interface {\n\ttype int, int8, int16, int32, int64\n}\n\n\n\n// type setç†å¿µä¸‹çš„æ–°è¯­æ³•\ntype SignedInteger interface {\n\t~int | ~int8 | ~int16 | ~int32 | ~int64\n}\n</code></pre><p>é‚£ä»€ä¹ˆæ˜¯type setï¼ˆç±»å‹é›†åˆï¼‰å‘¢ï¼Ÿä¼Šæ©Â·æ³°å‹’ç»™å‡ºäº†è¿™ä¸ªæ¦‚å¿µçš„å®šä¹‰ï¼š</p><ul>\n<li>æ¯ä¸ªç±»å‹éƒ½æœ‰ä¸€ä¸ªtype setï¼›</li>\n<li>éæ¥å£ç±»å‹çš„ç±»å‹çš„type setä¸­ä»…åŒ…å«å…¶è‡ªèº«ã€‚æ¯”å¦‚éæ¥å£ç±»å‹Tï¼Œå®ƒçš„type setä¸­å”¯ä¸€çš„å…ƒç´ å°±æ˜¯å®ƒè‡ªèº«ï¼š{T}ï¼›</li>\n<li>å¯¹äºä¸€ä¸ªæ™®é€šçš„ã€æ²¡æœ‰type listçš„æ™®é€šæ¥å£ç±»å‹æ¥è¯´ï¼Œå®ƒçš„type setæ˜¯ä¸€ä¸ªæ— é™é›†åˆã€‚æ‰€æœ‰å®ç°äº†è¿™ä¸ªæ¥å£ç±»å‹æ‰€æœ‰æ–¹æ³•çš„ç±»å‹ï¼Œéƒ½æ˜¯è¯¥é›†åˆçš„ä¸€ä¸ªå…ƒç´ ï¼Œå¦å¤–ï¼Œç”±äºè¯¥æ¥å£ç±»å‹æœ¬èº«ä¹Ÿå£°æ˜äº†å…¶æ‰€æœ‰æ–¹æ³•ï¼Œå› æ­¤æ¥å£ç±»å‹è‡ªèº«ä¹Ÿæ˜¯å…¶Type setçš„ä¸€å‘˜ï¼›</li>\n<li>ç©ºæ¥å£ç±»å‹interface{}çš„type setä¸­å›Šæ‹¬äº†æ‰€æœ‰å¯èƒ½çš„ç±»å‹ã€‚</li>\n</ul><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è¯•è¯•ç”¨type setæ¦‚å¿µï¼Œé‡æ–°è¡¨è¿°ä¸€ä¸‹ä¸€ä¸ªç±»å‹Tå®ç°ä¸€ä¸ªæ¥å£ç±»å‹Iã€‚ä¹Ÿå°±æ˜¯å½“ç±»å‹Tæ˜¯æ¥å£ç±»å‹Içš„type setçš„ä¸€å‘˜æ—¶ï¼ŒTä¾¿å®ç°äº†æ¥å£Iï¼›å¯¹äºä½¿ç”¨åµŒå…¥æ¥å£ç±»å‹ç»„åˆè€Œæˆçš„æ¥å£ç±»å‹ï¼Œå…¶type setå°±æ˜¯å…¶æ‰€æœ‰çš„åµŒå…¥çš„æ¥å£ç±»å‹çš„type setçš„äº¤é›†ã€‚</p><p>è€Œå¯¹äºä¸€ä¸ªå¸¦æœ‰è‡ªèº«Methodçš„åµŒå…¥å…¶ä»–æ¥å£ç±»å‹çš„æ¥å£ç±»å‹ï¼Œæ¯”å¦‚ä¸‹é¢ä»£ç ä¸­çš„MyInterface3ï¼š</p><pre><code class=\"language-plain\">type MyInterface3 interface {\n\tE1\n\tE2\n\tMyMethod03()\n}\n</code></pre><p>å®ƒçš„type setå¯ä»¥çœ‹æˆE1ã€E2å’ŒE3ï¼ˆ<code>type E3 interface { MyMethod03()}</code>ï¼‰çš„type setçš„äº¤é›†ã€‚</p><p>æœ€åï¼Œåœ¨2021å¹´12æœˆ14æ—¥ï¼Œ<a href=\"https://go.dev/blog/go1.18beta1\">Go 1.18 beta1ç‰ˆæœ¬å‘å¸ƒ</a>ï¼Œè¿™ä¸ªç‰ˆæœ¬åŒ…å«äº†å¯¹Goæ³›å‹çš„æ­£å¼æ”¯æŒã€‚</p><p>ç»è¿‡12å¹´çš„åŠªåŠ›ä¸ä¸æ–­åœ°è‡ªæˆ‘å¦å®šï¼ŒGoå›¢é˜Ÿç»ˆäºå°†æ³›å‹å¼•å…¥åˆ°Goä¸­ï¼Œå¹¶ä¸”ç»è¿‡ç¼œå¯†è®¾è®¡çš„è¯­æ³•å¹¶<strong>æ²¡æœ‰è¿èƒŒGo1çš„å…¼å®¹æ€§</strong>ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ­£å¼çœ‹çœ‹Goæ³›å‹çš„åŸºæœ¬è¯­æ³•ã€‚</p><h2>Goæ³›å‹çš„åŸºæœ¬è¯­æ³•</h2><p>æˆ‘ä»¬å‰é¢ä¹Ÿè¯´äº†ï¼ŒGoæ³›å‹æ˜¯Goå¼€æºä»¥æ¥åœ¨è¯­æ³•å±‚é¢çš„æœ€å¤§ä¸€æ¬¡å˜åŠ¨ï¼Œ<a href=\"https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md\">Goæ³›å‹çš„æœ€åä¸€ç‰ˆæŠ€æœ¯ææ¡ˆ</a>é•¿è¾¾æ•°åé¡µï¼Œæˆ‘ä»¬è¦æ˜¯æŠŠå…¶ä¸­çš„ç»†èŠ‚éƒ½å±•å¼€ç»†è®²ï¼Œé‚£éƒ½å¯ä»¥è‡ªæˆä¸€æœ¬å°å†Œå­äº†ã€‚å› æ­¤ï¼ŒGoæ³›å‹è¯­æ³•ä¸æ˜¯ä¸€ç¯‡åŠ é¤å¯ä»¥ç³»ç»Ÿå­¦ä¹ å®Œçš„ï¼Œæˆ‘è¿™é‡Œä¸ä¼šæŠ å¤ªå¤šç»†èŠ‚ï¼Œåªç»™ä½ å‘ˆç°ä¸»è¦çš„è¯­æ³•</p><p>Goæ³›å‹çš„æ ¸å¿ƒæ˜¯ç±»å‹å‚æ•°ï¼ˆtype parameterï¼‰ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä»ç±»å‹å‚æ•°å¼€å§‹ï¼Œäº†è§£ä¸€ä¸‹Goæ³›å‹çš„åŸºæœ¬è¯­æ³•ã€‚</p><h3>ç±»å‹å‚æ•°ï¼ˆtype parameterï¼‰</h3><p>ç±»å‹å‚æ•°æ˜¯åœ¨å‡½æ•°å£°æ˜ã€æ–¹æ³•å£°æ˜çš„receiveréƒ¨åˆ†æˆ–ç±»å‹å®šä¹‰çš„ç±»å‹å‚æ•°åˆ—è¡¨ä¸­ï¼Œå£°æ˜çš„ï¼ˆéé™å®šï¼‰ç±»å‹åç§°ã€‚ç±»å‹å‚æ•°åœ¨å£°æ˜ä¸­å……å½“äº†ä¸€ä¸ªæœªçŸ¥ç±»å‹çš„å ä½ç¬¦ï¼ˆplaceholderï¼‰ï¼Œåœ¨æ³›å‹å‡½æ•°æˆ–æ³›å‹ç±»å‹å®ä¾‹åŒ–æ—¶ï¼Œç±»å‹å‚æ•°ä¼šè¢«ä¸€ä¸ªç±»å‹å®å‚æ›¿æ¢ã€‚</p><p>ä¸ºäº†è®©ä½ æ›´å¥½åœ°ç†è§£ç±»å‹å‚æ•°ç©¶ç«Ÿå¦‚ä½•å£°æ˜ï¼Œå®ƒåˆèµ·åˆ°äº†ä»€ä¹ˆä½œç”¨ï¼Œæˆ‘ä»¬ä»¥å‡½æ•°ä¸ºä¾‹ï¼Œå¯¹æ™®é€šå‡½æ•°çš„å‚æ•°ä¸æ³›å‹å‡½æ•°çš„ç±»å‹å‚æ•°ä½œä¸€ä¸‹å¯¹æ¯”ï¼š</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ™®é€šå‡½æ•°çš„å‚æ•°åˆ—è¡¨æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">func Foo(x, y aType, z anotherType)\n</code></pre><p>è¿™é‡Œï¼Œx, y, zæ˜¯å½¢å‚ï¼ˆparameterï¼‰çš„åå­—ï¼Œä¹Ÿå°±æ˜¯å˜é‡ï¼Œè€ŒaTypeï¼ŒanotherTypeæ˜¯å½¢å‚çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ç±»å‹ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æ³›å‹å‡½æ•°çš„ç±»å‹å‚æ•°ï¼ˆtype parameterï¼‰åˆ—è¡¨ï¼š</p><pre><code class=\"language-plain\">func GenericFoo[P aConstraint, Q anotherConstraint](x,y P, z Q)\n</code></pre><p>è¿™é‡Œï¼ŒPã€Qæ˜¯ç±»å‹å½¢å‚çš„åå­—ï¼Œä¹Ÿå°±æ˜¯ç±»å‹ã€‚aConstraintï¼ŒanotherConstraintä»£è¡¨ç±»å‹å‚æ•°çš„çº¦æŸï¼ˆconstraintï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå¯¹ç±»å‹å‚æ•°å¯é€‰å€¼çš„ä¸€ç§é™å®šã€‚</p><p>ä»GenericFooå‡½æ•°çš„å£°æ˜ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ³›å‹å‡½æ•°çš„å£°æ˜ç›¸æ¯”äºæ™®é€šå‡½æ•°å¤šå‡ºäº†ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼šç±»å‹å‚æ•°åˆ—è¡¨ã€‚</p><p>ç±»å‹å‚æ•°åˆ—è¡¨ä½äºå‡½æ•°åä¸å‡½æ•°å‚æ•°åˆ—è¡¨ä¹‹é—´ï¼Œé€šè¿‡ä¸€ä¸ª<strong>æ–¹æ‹¬å·</strong>æ‹¬èµ·ã€‚ç±»å‹å‚æ•°åˆ—è¡¨ä¸æ”¯æŒå˜é•¿ç±»å‹å‚æ•°ã€‚è€Œä¸”ï¼Œç±»å‹å‚æ•°åˆ—è¡¨ä¸­å£°æ˜çš„ç±»å‹å‚æ•°ï¼Œå¯ä»¥ä½œä¸ºå‡½æ•°æ™®é€šå‚æ•°åˆ—è¡¨ä¸­çš„å½¢å‚ç±»å‹ã€‚</p><p>ä½†åœ¨æ³›å‹å‡½æ•°å£°æ˜æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“Pã€Qä¸¤ä¸ªç±»å‹å‚æ•°å…·ä½“ä»£è¡¨çš„ç©¶ç«Ÿæ˜¯ä»€ä¹ˆç±»å‹ï¼Œå› æ­¤å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­çš„Pã€Qæ›´åƒæ˜¯æœªçŸ¥ç±»å‹çš„å ä½ç¬¦ã€‚</p><p>é‚£ä¹ˆPã€Qçš„ç±»å‹ä»€ä¹ˆæ—¶å€™æ‰èƒ½ç¡®å®šå‘¢ï¼Ÿè¿™å°±è¦ç­‰åˆ°æ³›å‹å‡½æ•°å…·åŒ–ï¼ˆinstantiationï¼‰æ—¶æ‰èƒ½ç¡®å®šã€‚å¦å¤–ï¼ŒæŒ‰æƒ¯ä¾‹ï¼Œç±»å‹å‚æ•°ï¼ˆtype parameterï¼‰çš„åå­—éƒ½æ˜¯é¦–å­—æ¯å¤§å†™çš„ï¼Œé€šå¸¸éƒ½æ˜¯ç”¨å•ä¸ªå¤§å†™å­—æ¯å‘½åã€‚</p><p>åœ¨ç±»å‹å‚æ•°åˆ—è¡¨ä¸­ä¿®é¥°ç±»å‹å‚æ•°çš„å°±æ˜¯çº¦æŸï¼ˆconstraintï¼‰ã€‚é‚£ä»€ä¹ˆæ˜¯çº¦æŸå‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p><h3>çº¦æŸï¼ˆconstraintï¼‰</h3><p>çº¦æŸï¼ˆconstraintï¼‰è§„å®šäº†ä¸€ä¸ªç±»å‹å®å‚ï¼ˆtype argumentï¼‰å¿…é¡»æ»¡è¶³çš„æ¡ä»¶è¦æ±‚ã€‚å¦‚æœæŸä¸ªç±»å‹æ»¡è¶³äº†æŸä¸ªçº¦æŸè§„å®šçš„æ‰€æœ‰æ¡ä»¶è¦æ±‚ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯è¿™ä¸ªçº¦æŸä¿®é¥°çš„ç±»å‹å½¢å‚çš„ä¸€ä¸ªåˆæ³•çš„ç±»å‹å®å‚ã€‚</p><p>åœ¨Goæ³›å‹ä¸­ï¼Œ<strong>æˆ‘ä»¬ä½¿ç”¨interfaceç±»å‹æ¥å®šä¹‰çº¦æŸ</strong>ã€‚ä¸ºæ­¤ï¼ŒGoæ¥å£ç±»å‹çš„å®šä¹‰ä¹Ÿè¿›è¡Œäº†æ‰©å±•ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥å£°æ˜æ¥å£çš„æ–¹æ³•é›†åˆï¼Œä¹Ÿå¯ä»¥å£°æ˜å¯ç”¨ä½œç±»å‹å®å‚çš„ç±»å‹åˆ—è¡¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªçº¦æŸå®šä¹‰ä¸ä½¿ç”¨çš„ç¤ºä¾‹ï¼š</p><pre><code class=\"language-plain\">type C1 interface {\n    ~int | ~int32\n    M1()\n}\n\ntype T struct{}\nfunc (T) M1() {\n}\n\ntype T1 int\nfunc (T1) M1() {\n}\n\nfunc foo[P C1](t P)() {\n}\n\nfunc main() {\n    var t1 T1\n    foo(t1)\n    var t T\n    foo(t) // ç¼–è¯‘å™¨æŠ¥é”™ï¼šT does not implement C1\n}\n</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼ŒC1æ˜¯æˆ‘ä»¬å®šä¹‰çš„çº¦æŸï¼Œå®ƒå£°æ˜äº†ä¸€ä¸ªæ–¹æ³•M1ï¼Œä»¥åŠä¸¤ä¸ªå¯ç”¨ä½œç±»å‹å®å‚çš„ç±»å‹(~int | ~int32)ã€‚æˆ‘ä»¬çœ‹åˆ°ï¼Œç±»å‹åˆ—è¡¨ä¸­çš„å¤šä¸ªç±»å‹å®å‚ç±»å‹ç”¨â€œ|â€åˆ†éš”ã€‚</p><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸¤ä¸ªè‡ªå®šä¹‰ç±»å‹Tå’ŒT1ï¼Œä¸¤ä¸ªç±»å‹éƒ½å®ç°äº†M1æ–¹æ³•ï¼Œä½†Tç±»å‹çš„åº•å±‚ç±»å‹ä¸ºstruct{}ï¼Œè€ŒT1ç±»å‹çš„åº•å±‚ç±»å‹ä¸ºintï¼Œè¿™æ ·å°±å¯¼è‡´äº†è™½ç„¶Tç±»å‹æ»¡è¶³äº†çº¦æŸC1çš„æ–¹æ³•é›†åˆï¼Œä½†ç±»å‹Tå› ä¸ºåº•å±‚ç±»å‹å¹¶ä¸æ˜¯intæˆ–int32è€Œä¸æ»¡è¶³çº¦æŸC1ï¼Œè¿™ä¹Ÿå°±ä¼šå¯¼è‡´<code>foo(t)</code>è°ƒç”¨åœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘è¿™é‡Œè¿˜è¦å»ºè®®ä½ ï¼š<strong>åšçº¦æŸçš„æ¥å£ç±»å‹ä¸åšä¼ ç»Ÿæ¥å£çš„æ¥å£ç±»å‹æœ€å¥½è¦åˆ†å¼€å®šä¹‰</strong>ï¼Œé™¤éçº¦æŸç±»å‹çœŸçš„æ—¢éœ€è¦æ–¹æ³•é›†åˆï¼Œä¹Ÿéœ€è¦ç±»å‹åˆ—è¡¨ã€‚</p><p>çŸ¥é“äº†ç±»å‹å‚æ•°å£°æ˜çš„å½¢å¼ï¼Œä¹ŸçŸ¥é“äº†çº¦æŸå¦‚ä½•å®šä¹‰åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å¸¦æœ‰ç±»å‹å‚æ•°çš„æ³›å‹å‡½æ•°ã€‚</p><h3>ç±»å‹å…·åŒ–ï¼ˆinstantiationï¼‰</h3><p>å£°æ˜äº†æ³›å‹å‡½æ•°åï¼Œæ¥ä¸‹æ¥å°±è¦è°ƒç”¨æ³›å‹å‡½æ•°æ¥å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚ç°åœ¨æˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªæ³›å‹ç‰ˆæœ¬Sortå‡½æ•°çš„è°ƒç”¨ä¾‹å­ï¼Œçœ‹çœ‹è°ƒç”¨æ³›å‹å‡½æ•°çš„è¿‡ç¨‹éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p><pre><code class=\"language-plain\">func Sort[Elem interface{ Less(y Elem) bool }](list []Elem) {\n}\n\ntype book struct{}\nfunc (x book) Less(y book) bool {\n        return true\n}\n\nfunc main() {\n    var bookshelf []book\n    Sort[book](bookshelf) // æ³›å‹å‡½æ•°è°ƒç”¨\n}\n</code></pre><p>æ ¹æ®Goæ³›å‹çš„å®ç°åŸç†ï¼Œä¸Šé¢çš„æ³›å‹å‡½æ•°è°ƒç”¨Sort[book]ï¼ˆ<a href=\"bookshelf\">book</a>shelfï¼‰ä¼šåˆ†æˆä¸¤ä¸ªé˜¶æ®µï¼š</p><p>ç¬¬ä¸€ä¸ªé˜¶æ®µå°±æ˜¯å…·åŒ–ï¼ˆinstantiationï¼‰ã€‚</p><p>å½¢è±¡ç‚¹è¯´ï¼Œ<strong>å…·åŒ–ï¼ˆinstantiationï¼‰å°±å¥½æ¯”ä¸€å®¶ç”Ÿäº§â€œæ’åºæœºå™¨â€çš„å·¥å‚æ ¹æ®è¦æ’åºçš„å¯¹è±¡çš„ç±»å‹ï¼Œå°†è¿™æ ·çš„æœºå™¨ç”Ÿäº§å‡ºæ¥çš„è¿‡ç¨‹</strong>ã€‚æˆ‘ä»¬ç»§ç»­ä¸¾å‰é¢çš„ä¾‹å­æ¥åˆ†æä¸€ä¸‹ï¼Œæ•´ä¸ªå…·åŒ–è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol>\n<li>å·¥å‚æ¥å•ï¼š<strong>Sort[book]</strong>ï¼Œå‘ç°è¦æ’åºçš„å¯¹è±¡ç±»å‹ä¸ºbookï¼›</li>\n<li>æ¨¡å…·æ£€æŸ¥ä¸åŒ¹é…ï¼šæ£€æŸ¥bookç±»å‹æ˜¯å¦æ»¡è¶³æ¨¡å…·çš„çº¦æŸè¦æ±‚ï¼ˆä¹Ÿå°±æ˜¯æ˜¯å¦å®ç°äº†çº¦æŸå®šä¹‰ä¸­çš„Lessæ–¹æ³•ï¼‰ã€‚å¦‚æœæ»¡è¶³ï¼Œå°±å°†å…¶ä½œä¸ºç±»å‹å®å‚æ›¿æ¢Sortå‡½æ•°ä¸­çš„ç±»å‹å½¢å‚ï¼Œç»“æœä¸º<strong>Sort[book]</strong>ï¼Œå¦‚æœä¸æ»¡è¶³ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼›</li>\n<li>ç”Ÿäº§æœºå™¨ï¼šå°†æ³›å‹å‡½æ•°Sortå…·åŒ–ä¸ºä¸€ä¸ª<strong>æ–°å‡½æ•°</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠå®ƒèµ·åä¸º <strong>booksort</strong>ï¼Œå…¶å‡½æ•°åŸå‹ä¸º <strong>func([]book)</strong>ã€‚æœ¬è´¨ä¸Š <strong>booksort := Sort[book]</strong>ã€‚</li>\n</ol><p>ç¬¬äºŒé˜¶æ®µæ˜¯è°ƒç”¨ï¼ˆinvocationï¼‰ã€‚</p><p>ä¸€æ—¦â€œæ’åºæœºå™¨â€è¢«ç”Ÿäº§å‡ºæ¥ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥å¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œæ’åºäº†ï¼Œè¿™å’Œæ™®é€šçš„å‡½æ•°è°ƒç”¨æ²¡æœ‰åŒºåˆ«ã€‚è¿™é‡Œå°±ç›¸å½“äºè°ƒç”¨booksortï¼ˆbookshelfï¼‰ï¼Œæ•´ä¸ªè¿‡ç¨‹åªéœ€è¦æ£€æŸ¥ä¼ å…¥çš„å‡½æ•°å®å‚ï¼ˆbookshelfï¼‰çš„ç±»å‹ä¸booksortå‡½æ•°åŸå‹ä¸­çš„å½¢å‚ç±»å‹ï¼ˆ[]bookï¼‰æ˜¯å¦åŒ¹é…å°±å¯ä»¥äº†ã€‚</p><p>æˆ‘ä»¬ç”¨ä¼ªä»£ç æ¥è¡¨è¿°ä¸Šé¢ä¸¤ä¸ªè¿‡ç¨‹ï¼š</p><pre><code class=\"language-plain\">Sort[book](bookshelf)\n\n&lt;=&gt;\n\nå…·åŒ–ï¼šbooksort := Sort[book]\nè°ƒç”¨ï¼šbooksort(bookshelf)\n</code></pre><p>ä¸è¿‡ï¼Œæ¯æ¬¡è°ƒç”¨Sortéƒ½è¦ä¼ å…¥ç±»å‹å®å‚bookï¼Œè¿™å’Œæ™®é€šå‡½æ•°è°ƒç”¨ç›¸æ¯”è¿˜æ˜¯ç¹çäº†ä¸å°‘ã€‚é‚£ä¹ˆèƒ½å¦åƒæ™®é€šå‡½æ•°é‚£æ ·åªä¼ å…¥æ™®é€šå‚æ•°å®å‚ï¼Œä¸ç”¨ä¼ å…¥ç±»å‹å‚æ•°å®å‚å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚</p><p>Goç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å®å‚å˜é‡ï¼Œè¿›è¡Œå®å‚ç±»å‹å‚æ•°çš„è‡ªåŠ¨æ¨å¯¼ï¼ˆArgument type inferenceï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åªéœ€è¦åƒè¿™æ ·è¿›è¡ŒSortçš„è°ƒç”¨å°±å¯ä»¥äº†ï¼š</p><pre><code class=\"language-plain\">Sort(bookshelf)\n</code></pre><p>æœ‰äº†å¯¹ç±»å‹å‚æ•°çš„å®å‚ç±»å‹çš„è‡ªåŠ¨æ¨å¯¼ï¼Œå¤§å¤šæ•°æ³›å‹å‡½æ•°çš„è°ƒç”¨æ–¹å¼ä¸å¸¸è§„å‡½æ•°è°ƒç”¨ä¸€è‡´ï¼Œä¸ä¼šç»™Gopherå¸¦å»é¢å¤–çš„ä»£ç ç¼–å†™è´Ÿæ‹…ã€‚</p><h3>æ³›å‹ç±»å‹</h3><p>é™¤äº†å‡½æ•°å¯ä»¥æºå¸¦ç±»å‹å‚æ•°å˜èº«ä¸ºâ€œæ³›å‹å‡½æ•°â€å¤–ï¼Œç±»å‹ä¹Ÿå¯ä»¥æ‹¥æœ‰ç±»å‹å‚æ•°è€ŒåŒ–èº«ä¸ºâ€œæ³›å‹ç±»å‹â€ï¼Œæ¯”å¦‚ä¸‹é¢ä»£ç å°±å®šä¹‰äº†ä¸€ä¸ªå‘é‡æ³›å‹ç±»å‹ï¼š</p><pre><code class=\"language-plain\">type Vector[T any] []T\n</code></pre><p>è¿™æ˜¯ä¸€ä¸ªå¸¦æœ‰ç±»å‹å‚æ•°çš„ç±»å‹å®šä¹‰ï¼Œç±»å‹å‚æ•°ä½äºç±»å‹åçš„åé¢ï¼ŒåŒæ ·ç”¨æ–¹æ‹¬å·æ‹¬èµ·ã€‚åœ¨ç±»å‹å®šä¹‰ä½“ä¸­å¯ä»¥å¼•ç”¨ç±»å‹å‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°åï¼ˆæ¯”å¦‚Tï¼‰ã€‚ç±»å‹å‚æ•°åŒæ ·æ‹¥æœ‰è‡ªå·±çš„çº¦æŸï¼Œå¦‚ä¸Šé¢ä»£ç ä¸­çš„ <strong>any</strong>ã€‚åœ¨Go 1.18ä¸­ï¼Œanyæ˜¯interface{}çš„åˆ«åï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé¢„å®šä¹‰æ ‡è¯†ç¬¦ï¼Œä½¿ç”¨anyä½œä¸ºç±»å‹å‚æ•°çš„çº¦æŸï¼Œä»£è¡¨æ²¡æœ‰ä»»ä½•çº¦æŸã€‚</p><p>ä½¿ç”¨æ³›å‹ç±»å‹ï¼Œæˆ‘ä»¬ä¹Ÿè¦éµå¾ªå…ˆå…·åŒ–ï¼Œå†ä½¿ç”¨çš„é¡ºåºï¼Œæ¯”å¦‚ä¸‹é¢ä¾‹å­ï¼š</p><pre><code class=\"language-plain\">type Vector[T any] []T\n\nfunc (v Vector[T]) Dump() {\n    fmt.Printf(\"%#v\\n\", v)\n}\n\nfunc main() {\n    var iv = Vector[int]{1,2,3,4}\n    var sv Vector[string]\n    sv = []string{\"a\",\"b\", \"c\", \"d\"}\n    iv.Dump()\n    sv.Dump()\n}\n</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨Vector[T]ä¹‹å‰éƒ½æ˜¾å¼ç”¨ç±»å‹å®å‚å¯¹æ³›å‹ç±»å‹è¿›è¡Œäº†å…·åŒ–ï¼Œä»è€Œå¾—åˆ°å…·åŒ–åçš„ç±»å‹Vector[int]å’ŒVector[string]ã€‚ Vector[int]çš„åº•å±‚ç±»å‹ä¸º[]intï¼ŒVector[string]çš„åº•å±‚ç±»å‹ä¸º[]stringã€‚ç„¶åæˆ‘ä»¬å†å¯¹å…·åŒ–åçš„ç±»å‹è¿›è¡Œæ“ä½œã€‚</p><p>ä»¥ä¸Šå°±æ˜¯Goæ³›å‹è¯­æ³•ç‰¹æ€§çš„ä¸€äº›ä¸»è¦è¯­æ³•æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ³›å‹çš„åŠ å…¥ç¡®å®è¿›ä¸€æ­¥æé«˜äº†ç¨‹åºå‘˜çš„å¼€å‘æ•ˆç‡ï¼Œå¤§å¹…æå‡äº†ç®—æ³•çš„é‡ç”¨æ€§ã€‚</p><p>é‚£ä¹ˆï¼ŒGoæ³›å‹æ–¹æ¡ˆå¯¹Goç¨‹åºçš„è¿è¡Œæ—¶æ€§èƒ½åˆå¸¦æ¥äº†å“ªäº›å½±å“å‘¢ï¼Ÿæˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥é€šè¿‡ä¾‹å­éªŒè¯ä¸€ä¸‹ã€‚</p><h2>Goæ³›å‹çš„æ€§èƒ½</h2><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ€§èƒ½åŸºå‡†æµ‹è¯•çš„ä¾‹å­ï¼Œå‚åŠ è¿™æ¬¡æµ‹è¯•çš„ä¸‰ä½é€‰æ‰‹åˆ†åˆ«æ¥è‡ªï¼š</p><ul>\n<li>Goæ ‡å‡†åº“sortåŒ…ï¼ˆéæ³›å‹ç‰ˆï¼‰çš„Intså‡½æ•°ï¼›</li>\n<li>Goå›¢é˜Ÿç»´æŠ¤golang.org/x/exp/slicesä¸­çš„æ³›å‹ç‰ˆSortå‡½æ•°ï¼›</li>\n<li>å¯¹golang.org/x/exp/slicesä¸­çš„æ³›å‹ç‰ˆSortå‡½æ•°è¿›è¡Œæ”¹é€ å¾—åˆ°çš„ã€ä»…é’ˆå¯¹[]intè¿›è¡Œæ’åºçš„Sortå‡½æ•°ã€‚</li>\n</ul><p>ç›¸å…³çš„æºç è¾ƒå¤šï¼Œæˆ‘è¿™é‡Œå°±ä¸è´´å‡ºæ¥äº†ï¼Œä½ å¯ä»¥åˆ°<a href=\"https://github.com/bigwhite/publication/tree/master/column/timegeek/go-first-course/go-generics\">è¿™é‡Œ</a>ä¸‹è½½ç›¸å…³æºç ã€‚</p><p>ä¸‹é¢æ˜¯ä½¿ç”¨Go 1.18beta2ç‰ˆæœ¬åœ¨macOSä¸Šè¿è¡Œè¯¥æµ‹è¯•çš„ç»“æœï¼š</p><pre><code class=\"language-plain\">$go test -bench .          \ngoos: darwin\ngoarch: amd64\npkg: demo\ncpu: Intel(R) Core(TM) i5-8257U CPU @ 1.40GHz\nBenchmarkSortInts-8     \t      96\t  12407700 ns/op\t      24 B/op\t       1 allocs/op\nBenchmarkSlicesSort-8   \t     172\t   6961381 ns/op\t       0 B/op\t       0 allocs/op\nBenchmarkIntSort-8      \t     172\t   6881815 ns/op\t       0 B/op\t       0 allocs/op\nPASS\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œæ³›å‹ç‰ˆå’Œä»…æ”¯æŒ[]intçš„Sortå‡½æ•°çš„æ€§èƒ½æ˜¯ä¸€è‡´çš„ï¼Œæ€§èƒ½éƒ½è¦æ¯”ç›®å‰æ ‡å‡†åº“çš„Intså‡½æ•°é«˜å‡ºè¿‘ä¸€å€ï¼Œå¹¶ä¸”åœ¨æ’åºè¿‡ç¨‹ä¸­æ²¡æœ‰é¢å¤–çš„å†…å­˜åˆ†é…ã€‚ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š<strong>è‡³å°‘åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ³›å‹åœ¨è¿è¡Œæ—¶å¹¶æœªç»™ç®—æ³•å¸¦æ¥é¢å¤–çš„è´Ÿæ‹…</strong>ã€‚</p><p>ç°åœ¨çœ‹æ¥ï¼ŒGoæ³›å‹æ²¡æœ‰æ‹–æ…¢ç¨‹åºå‘˜çš„å¼€å‘æ•ˆç‡ï¼Œä¹Ÿæ²¡æœ‰æ‹–æ…¢è¿è¡Œæ•ˆç‡ï¼Œé‚£ä¹ˆæŒ‰ç…§Russ Coxçš„â€œæ³›å‹çª˜å¢ƒâ€æ–‡ç« ä¸­çš„ç»“è®ºï¼ŒGoæ³›å‹æ˜¯å¦æ‹–æ…¢ç¼–è¯‘æ€§èƒ½äº†å‘¢ï¼Ÿ</p><p>ä¸è¿‡ï¼Œå› ä¸ºç›®å‰é‡‡ç”¨Goæ³›å‹é‡å†™çš„é¡¹ç›®æ¯”è¾ƒå°‘ï¼Œæˆ‘ä»¬è¿˜æ²¡æ³•ä¸¾ä¾‹å¯¹æ¯”ï¼Œä½† <a href=\"https://tip.golang.org/doc/go1.18\">Go 1.18å‘å¸ƒè¯´æ˜</a>ä¸­ç»™å‡ºäº†ä¸€ä¸ªç»“è®ºï¼š<strong>Go 1.18ç¼–è¯‘å™¨çš„æ€§èƒ½è¦æ¯”Go 1.17ä¸‹é™15%å·¦å³</strong>ã€‚ä¸è¿‡ï¼ŒGoæ ¸å¿ƒå›¢é˜Ÿä¹Ÿæ‰¿è¯ºå°†åœ¨Go 1.19ä¸­æ”¹å–„ç¼–è¯‘å™¨çš„æ€§èƒ½ï¼Œè¿™é‡Œä¹Ÿå¸Œæœ›åˆ°æ—¶å€™çš„ä¼˜åŒ–èƒ½æŠµæ¶ˆGoæ³›å‹å¸¦æ¥çš„å½±å“ã€‚</p><p>äº†è§£äº†Goæ³›å‹å¹¶æœªå½±å“åˆ°è¿è¡Œæ—¶æ€§èƒ½ï¼Œè¿™è®©æˆ‘ä»¬çš„å¿ƒé‡Œæœ‰äº†åº•ã€‚ä½†å…³äºGoæ³›å‹ï¼Œæƒ³å¿…ä½ è¿˜ä¼šæœ‰ç–‘é—®ï¼Œé‚£å°±æ˜¯ï¼šæˆ‘ä»¬åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ³›å‹ï¼Œåˆåº”è¯¥å¦‚ä½•ä½¿ç”¨æ³›å‹å‘¢ï¼Ÿæœ€åæˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™ä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆã€‚</p><h2>Goæ³›å‹çš„ä½¿ç”¨å»ºè®®</h2><p>å‰é¢è¯´è¿‡ï¼ŒGoå½“åˆæ²¡æœ‰åŠæ—¶å¼•å…¥æ³›å‹çš„ä¸€ä¸ªåŸå› å°±æ˜¯ä¸Goè¯­è¨€â€œç®€å•â€çš„è®¾è®¡å“²å­¦æœ‰æ‚–ï¼Œç°åœ¨åŠ å…¥äº†æ³›å‹ï¼Œéšä¹‹è€Œæ¥çš„å°±æ˜¯å¢åŠ äº†è¯­è¨€çš„å¤æ‚æ€§ã€‚</p><p>ä¸ºäº†å°½é‡é™ä½å¤æ‚æ€§ï¼ŒGoå›¢é˜Ÿåšäº†å¾ˆå¤šå·¥ä½œï¼ŒåŒ…æ‹¬å‰é¢æåˆ°çš„åœ¨è¯­æ³•ä¸­åŠ å…¥ç±»å‹å®å‚çš„è‡ªåŠ¨æ¨å¯¼ç­‰è¯­æ³•ç³–ï¼Œå°½é‡å‡å°‘ç»™å¼€å‘äººå‘˜ç¼–ç æ—¶å¸¦å»é¢å¤–è´Ÿæ‹…ï¼Œä¹Ÿå°½å¯èƒ½ä¿æŒGoä»£ç è‰¯å¥½çš„å¯è¯»æ€§ã€‚</p><p>æ­¤å¤–ï¼ŒGoæ ¸å¿ƒå›¢é˜Ÿæœ€æ‹…å¿ƒçš„å°±æ˜¯â€œæ³›å‹è¢«æ»¥ç”¨â€ï¼Œæ‰€ä»¥Goæ ¸å¿ƒå›¢é˜Ÿåœ¨å„ç§æ¼”è®²åœºåˆéƒ½åœ¨åŠªåŠ›åœ°å‘Šè¯‰å¤§å®¶Goæ³›å‹çš„é€‚ç”¨åœºæ™¯ä»¥åŠåº”è¯¥å¦‚ä½•ä½¿ç”¨ã€‚è¿™é‡Œæˆ‘ä¹Ÿæ¢³ç†ä¸€ä¸‹æ¥è‡ªGoå›¢é˜Ÿçš„è¿™äº›å»ºè®®ï¼Œä½ å¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚</p><h3>ä»€ä¹ˆæƒ…å†µé€‚åˆä½¿ç”¨æ³›å‹</h3><p>é¦–å…ˆï¼Œç±»å‹å‚æ•°çš„ä¸€ç§æœ‰ç”¨çš„æƒ…å†µï¼Œå°±æ˜¯<strong>å½“ç¼–å†™çš„å‡½æ•°çš„æ“ä½œå…ƒç´ çš„ç±»å‹ä¸ºsliceã€mapã€channelç­‰ç‰¹å®šç±»å‹çš„æ—¶å€™</strong>ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°æ¥å—è¿™äº›ç±»å‹çš„å½¢å‚ï¼Œå¹¶ä¸”å‡½æ•°ä»£ç æ²¡æœ‰å¯¹å‚æ•°çš„å…ƒç´ ç±»å‹ä½œå‡ºä»»ä½•å‡è®¾ï¼Œé‚£ä¹ˆä½¿ç”¨ç±»å‹å‚æ•°å¯èƒ½ä¼šéå¸¸æœ‰ç”¨ã€‚åœ¨è¿™ç§åœºåˆä¸‹ï¼Œæ³›å‹æ–¹æ¡ˆå¯ä»¥æ›¿ä»£åå°„æ–¹æ¡ˆï¼Œè·å¾—æ›´é«˜çš„æ€§èƒ½ã€‚</p><p>å¦ä¸€ä¸ªé€‚åˆä½¿ç”¨ç±»å‹å‚æ•°çš„æƒ…å†µæ˜¯<strong>ç¼–å†™é€šç”¨æ•°æ®ç»“æ„</strong>ã€‚æ‰€è°“çš„é€šç”¨æ•°æ®ç»“æ„ï¼ŒæŒ‡çš„æ˜¯åƒåˆ‡ç‰‡æˆ–mapè¿™æ ·ï¼Œä½†Goè¯­è¨€åˆæ²¡æœ‰æä¾›åŸç”Ÿæ”¯æŒçš„ç±»å‹ã€‚æ¯”å¦‚ä¸€ä¸ªé“¾è¡¨æˆ–ä¸€ä¸ªäºŒå‰æ ‘ã€‚</p><p>ä»Šå¤©ï¼Œéœ€è¦è¿™ç±»æ•°æ®ç»“æ„çš„ç¨‹åºä¼šä½¿ç”¨ç‰¹å®šçš„å…ƒç´ ç±»å‹å®ç°å®ƒä»¬ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨æ¥å£ç±»å‹ï¼ˆinterface{}ï¼‰æ¥å®ç°ã€‚ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ç±»å‹å‚æ•°æ›¿æ¢ç‰¹å®šå…ƒç´ ç±»å‹ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªæ›´é€šç”¨çš„æ•°æ®ç»“æ„ï¼Œè¿™ä¸ªé€šç”¨çš„æ•°æ®ç»“æ„å¯ä»¥è¢«å…¶ä»–ç¨‹åºå¤ç”¨ã€‚è€Œä¸”ï¼Œç”¨ç±»å‹å‚æ•°æ›¿æ¢æ¥å£ç±»å‹é€šå¸¸ä¹Ÿä¼šè®©æ•°æ®å­˜å‚¨çš„æ›´ä¸ºé«˜æ•ˆã€‚</p><p>å¦å¤–ï¼Œåœ¨ä¸€äº›åœºåˆï¼Œä½¿ç”¨ç±»å‹å‚æ•°æ›¿ä»£æ¥å£ç±»å‹ï¼Œæ„å‘³ç€ä»£ç å¯ä»¥é¿å…è¿›è¡Œç±»å‹æ–­è¨€ï¼ˆtype assertionï¼‰ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘é˜¶æ®µè¿˜å¯ä»¥è¿›è¡Œå…¨é¢çš„ç±»å‹é™æ€æ£€æŸ¥ã€‚</p><h3>ä»€ä¹ˆæƒ…å†µä¸å®œä½¿ç”¨æ³›å‹</h3><p>é¦–å…ˆï¼Œå¦‚æœä½ è¦å¯¹æŸä¸€ç±»å‹çš„å€¼è¿›è¡Œçš„å…¨éƒ¨æ“ä½œï¼Œä»…ä»…æ˜¯åœ¨é‚£ä¸ªå€¼ä¸Šè°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œè¯·ä½¿ç”¨interfaceç±»å‹ï¼Œè€Œä¸æ˜¯ç±»å‹å‚æ•°ã€‚æ¯”å¦‚ï¼Œio.Readeræ˜“è¯»ä¸”é«˜æ•ˆï¼Œæ²¡æœ‰å¿…è¦åƒä¸‹é¢ä»£ç ä¸­è¿™æ ·ä½¿ç”¨ä¸€ä¸ªç±»å‹å‚æ•°åƒè°ƒç”¨Readæ–¹æ³•é‚£æ ·å»ä»ä¸€ä¸ªå€¼ä¸­è¯»å–æ•°æ®ï¼š</p><pre><code class=\"language-plain\">func ReadAll[reader io.Reader](r reader) ([]byte, error)  // é”™è¯¯çš„ä½œæ³•\nfunc ReadAll(r io.Reader) ([]byte, error)                 // æ­£ç¡®çš„ä½œæ³•\n</code></pre><p>ä½¿ç”¨ç±»å‹å‚æ•°çš„åŸå› æ˜¯å®ƒä»¬è®©ä½ çš„ä»£ç æ›´æ¸…æ™°ï¼Œ<strong>å¦‚æœå®ƒä»¬ä¼šè®©ä½ çš„ä»£ç å˜å¾—æ›´å¤æ‚ï¼Œå°±ä¸è¦ä½¿ç”¨</strong>ã€‚</p><p>ç¬¬äºŒï¼Œå½“ä¸åŒçš„ç±»å‹ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ–¹æ³•æ—¶ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•çš„å®ç°å¯¹äºæ‰€æœ‰ç±»å‹éƒ½ç›¸åŒï¼Œå°±ä½¿ç”¨ç±»å‹å‚æ•°ï¼›ç›¸åï¼Œå¦‚æœæ¯ç§ç±»å‹çš„å®ç°å„ä¸ç›¸åŒï¼Œè¯·ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ï¼Œä¸è¦ä½¿ç”¨ç±»å‹å‚æ•°ã€‚</p><p>æœ€åï¼Œå¦‚æœä½ å‘ç°è‡ªå·±å¤šæ¬¡ç¼–å†™å®Œå…¨ç›¸åŒçš„ä»£ç ï¼ˆæ ·æ¿ä»£ç ï¼‰ï¼Œå„ä¸ªç‰ˆæœ¬ä¹‹é—´å”¯ä¸€çš„å·®åˆ«æ˜¯ä»£ç ä½¿ç”¨ä¸åŒçš„ç±»å‹ï¼Œé‚£å°±è¯·ä½ è€ƒè™‘æ˜¯å¦å¯ä»¥ä½¿ç”¨ç±»å‹å‚æ•°ã€‚åä¹‹ï¼Œåœ¨ä½ æ³¨æ„åˆ°è‡ªå·±è¦å¤šæ¬¡ç¼–å†™å®Œå…¨ç›¸åŒçš„ä»£ç ä¹‹å‰ï¼Œåº”è¯¥é¿å…ä½¿ç”¨ç±»å‹å‚æ•°ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„åŠ é¤è®²åˆ°è¿™é‡Œå°±ç»“æŸäº†ã€‚åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘å¸¦ä½ åˆæ­¥äº†è§£äº†Goæ³›å‹çš„é‚£äº›äº‹å„¿ï¼Œä¸»è¦æ˜¯æƒ³ä¸ºä½ åç»­ç³»ç»Ÿå­¦ä¹ Goæ³›å‹å¼•ä¸ªè·¯ã€‚</p><p>æ­£å¦‚Goå›¢é˜Ÿåœ¨Go FAQä¸­æè¿°çš„é‚£æ ·ï¼ŒGoå›¢é˜Ÿä»æ¥æ²¡æœ‰æ‹’ç»æ³›å‹ï¼Œåªæ˜¯é•¿æ—¶é—´æ¥æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å®ç°æ–¹æ¡ˆã€‚Goå›¢é˜Ÿéœ€è¦åœ¨Russ Coxçš„â€œæ³›å‹çª˜å¢ƒâ€ä¸­æåˆ°çš„ä¸‰ä¸ªslowä¸­å¯»æ‰¾å¹³è¡¡ã€‚</p><p>åå¤šå¹´æ¥ï¼ŒGoå›¢é˜Ÿä¸€ç›´åœ¨å°è¯•ä¸æ‰“ç£¨ï¼Œç»ˆäºåœ¨è¿‘å‡ å¹´å–å¾—äº†çªç ´æ€§çš„è¿›å±•ï¼Œè®¾è®¡å‡ºä¸€ç§å¯ä»¥å‘åå…¼å®¹Go1çš„æ–¹æ¡ˆï¼Œå¹¶ä¸‹å†³å¿ƒåœ¨Go 1.18ç‰ˆæœ¬ä¸­è½åœ°æ³›å‹ã€‚</p><p>Goæ³›å‹ä¹Ÿç§°ä¸ºç±»å‹å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°å£°æ˜ã€æ–¹æ³•å£°æ˜çš„receiveréƒ¨åˆ†æˆ–ç±»å‹å®šä¹‰ä¸­ä½¿ç”¨ç±»å‹å‚æ•°ï¼Œæ¥å®ç°æ³›å‹å‡½æ•°å’Œæ³›å‹ç±»å‹ã€‚æˆ‘ä»¬è¿˜éœ€ä¸ºç±»å‹å‚æ•°è®¾å®šçº¦æŸï¼Œé€šè¿‡æ‰©å±•çš„interfaceç±»å‹å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è¿™ç§çº¦æŸã€‚</p><p>ç›®å‰æ¥çœ‹ï¼ŒGoæ³›å‹çš„å¼•å…¥å¹¶æ²¡æœ‰ç»™ç¨‹åºè¿è¡Œå¸¦æ¥é¢å¤–æ€§èƒ½å¼€é”€ï¼Œä½†åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ‹–æ…¢çš„ç¼–è¯‘å™¨çš„æ€§èƒ½ã€‚åŒæ—¶ä¹Ÿå¸¦æ¥äº†è¯­æ³•ä¸Šçš„å¤æ‚æ€§ï¼Œä¸ºæ­¤ï¼ŒGoå›¢é˜Ÿå»ºè®®å¤§å®¶è°¨æ…ä½¿ç”¨æ³›å‹ï¼ŒåŒæ—¶ç»™å‡ºäº†ä¸€äº›ä½¿ç”¨å»ºè®®ã€‚</p><p>æœ€åè¦å’Œä½ ç‰¹åˆ«è¯´æ˜ä¸€ä¸‹ï¼ŒGo 1.18ä»…ä»…æ˜¯Goæ³›å‹çš„èµ·ç‚¹ï¼Œå°±åƒGo Moduleæ„å»ºæœºåˆ¶ä¸€æ ·ï¼ŒGoæ³›å‹çš„æˆç†Ÿä¸ç¨³å®šè¿˜éœ€è¦å‡ ä¸ªGoå‘å¸ƒç‰ˆæœ¬çš„åŠªåŠ›ã€‚è€Œä¸”æˆ‘ä»¬è¿™ä¸€è®²ä¸­æ¶‰åŠåˆ°æ³›å‹çš„ä»£ç éƒ½éœ€è¦ä½ å®‰è£…Go 1.18beta1æˆ–ä»¥ä¸Šç‰ˆæœ¬ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>Goæ³›å‹å¯¹äºä½ æ¥è¯´ä¼°è®¡è¿˜æ¯”è¾ƒé™Œç”Ÿï¼Œè¿™é‡Œæˆ‘ä¹Ÿç»™ä½ ç•™äº†ä¸€ä¸ªä½œä¸šï¼Œé‚£å°±æ˜¯ä»”ç»†é˜…è¯»ä¸€éGoæ³›å‹çš„æŠ€æœ¯æ–¹æ¡ˆï¼š<a href=\"https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md\">https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md</a></p><p>å¦‚æœä½ åœ¨é˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨ç•™è¨€åŒºæå‡ºã€‚æˆ‘æ˜¯Tony Baiï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ã€‚</p>","neighbors":{"left":{"article_title":"ç»“è¯¾æµ‹è¯•ï½œå¿«æ¥æ£€éªŒä¸‹ä½ çš„å­¦ä¹ æˆæœå§ï¼","id":484138},"right":{"article_title":"39 | é©¯æœæ³›å‹ï¼šäº†è§£ç±»å‹å‚æ•°","id":600122}},"comments":[{"had_liked":false,"id":333447,"user_name":"bearlu","can_delete":false,"product_type":"c1","uid":1030862,"ip_address":"","ucode":"14F260C8B24E27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","comment_is_top":false,"comment_ctime":1644371182,"is_pvip":true,"replies":[{"id":121864,"content":"å¯ä»¥ç¡®å®šï¼šç¼–è¯‘æ—¶å¯¹æ³›å‹åšçš„å¤„ç†ã€‚ä½†goä½¿ç”¨çš„æ˜¯ä¸€ä¸ªhybridæ–¹æ¡ˆï¼Œæˆ‘ä¹Ÿæ²¡å¤ªæ·±æŒ–ã€‚åç»­æ·±æŒ–åï¼Œå†ç»™å¤§å®¶åˆ†äº«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644388597,"ip_address":"","comment_id":333447,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼ŒGOçš„å®ç°æ³›å‹æ–¹å¼æ˜¯è·ŸC++ä¸€æ ·ï¼Ÿç¼–è¯‘æ—¶è¿›è¡Œï¼Ÿ","like_count":3},{"had_liked":false,"id":334847,"user_name":"Rayjun","can_delete":false,"product_type":"c1","uid":1002514,"ip_address":"","ucode":"61A3D1A3D03569","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/12/f0c145d4.jpg","comment_is_top":false,"comment_ctime":1645154427,"is_pvip":false,"replies":[{"id":122592,"content":"è°¬èµäº†ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1645597535,"ip_address":"","comment_id":334847,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ç™½è€å¸ˆå¤ªå¼ºäº†ï¼Œèƒ½å¤ŸæŠŠå¤æ‚çš„é—®é¢˜é€šè¿‡ç®€å•çš„æ–¹å¼è®²è¿°å‡ºæ¥ï¼Œå¤ªå€¼å¾—å­¦ä¹ äº†","like_count":2,"discussions":[{"author":{"id":2785758,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/81/de/6087a437.jpg","nickname":"æ•…ä¹¡å¤šæ˜æœˆ","note":"","ucode":"B8F847537222B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585946,"discussion_content":"å­—å…¸æ³•+æ¨¡æ¿åŒ–çš„æ–¹æ³• https://go.googlesource.com/proposal/+/refs/heads/master/design/generics-implementation-dictionaries-go1.18.md","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661915743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2785758,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/81/de/6087a437.jpg","nickname":"æ•…ä¹¡å¤šæ˜æœˆ","note":"","ucode":"B8F847537222B9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624790,"discussion_content":"åŒå­¦ï¼Œä½ è¿™ä¸ªé“¾æ¥è²Œä¼¼æ‰“ä¸å¼€äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690920237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585946,"ip_address":"å¹¿ä¸œ","group_id":0},"score":624790,"extra":""}]},{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550106,"discussion_content":"å¯ä»¥ç¡®å®šï¼šç¼–è¯‘æ—¶å¯¹æ³›å‹åšçš„å¤„ç†ã€‚ä½†goä½¿ç”¨çš„æ˜¯ä¸€ä¸ªhybridæ–¹æ¡ˆï¼Œæˆ‘ä¹Ÿæ²¡å¤ªæ·±æŒ–ã€‚åç»­æ·±æŒ–åï¼Œå†ç»™å¤§å®¶åˆ†äº«ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644388597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030862,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","nickname":"bearlu","note":"","ucode":"14F260C8B24E27","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550181,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644408753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378875,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"å¹¿ä¸œ","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1690920550,"is_pvip":false,"replies":[{"id":138110,"content":"1. ä¸æ˜¯å‘½åï¼Œæ˜¯ç±»å‹é™å®šã€‚å¯ä»¥æ˜¯éé™å®šçš„anyä¹‹ç±»çš„ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯é™å®šçš„ï¼Œæ¯”å¦‚comparableã€‚å½“ç„¶è¿™ç¯‡å†™çš„æ¯”è¾ƒæ—©ï¼Œè¿™å—å¯ä»¥å»æ‰â€œéé™å®šâ€è¿™ä¸ªæ‹¬å·ä¸­çš„å®šè¯­ã€‚\n2. é‚£åº”è¯¥æ˜¯æå®¢æ—¶é—´ç¼–è¾‘å™¨ä»markdownè½¬æ¢æ–‡å­—æ—¶çš„é—®é¢˜ã€‚\n3. å¯ä»¥çœ‹çœ‹æ³›å‹ç¯‡çš„æœ€åä¸€è®²ã€‚å¹¶å¯¹æ¯”interfaceåœ¨runtimeå±‚çš„è¡¨ç¤ºåŸç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1026224,"ctime":1691124848,"ip_address":"ç¾å›½","comment_id":378875,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"Tony bai è€å¸ˆï¼Œæœ‰å‡ ä¸ªå°é—®é¢˜ï¼š\n\n1. ç±»å‹å‚æ•°æ˜¯åœ¨å‡½æ•°å£°æ˜ã€æ–¹æ³•å£°æ˜çš„ receiver éƒ¨åˆ†æˆ–ç±»å‹å®šä¹‰çš„ç±»å‹å‚æ•°åˆ—è¡¨ä¸­ï¼Œå£°æ˜çš„ï¼ˆéé™å®šï¼‰ç±»å‹åç§°ã€‚ è¿™é‡Œçš„éé™å®šåº”è¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯å‘½åå¯ä»¥éšæ„ã€‚\n\n2. æ–‡ä¸­ï¼šâ€œæ ¹æ® Go æ³›å‹çš„å®ç°åŸç†ï¼Œä¸Šé¢çš„æ³›å‹å‡½æ•°è°ƒç”¨ Sort[book]ï¼ˆbookshelfï¼‰ä¼šåˆ†æˆä¸¤ä¸ªé˜¶æ®µã€‚â€ è¿™é‡Œï¼ˆbookshelfï¼‰é‡Œé¢æœ‰ä¸€ä¸ªé“¾æ¥ï¼Œä½†æ˜¯é“¾æ¥æ‰“å¼€çš„æ˜¯æå®¢æ—¶é—´é¦–é¡µï¼Œä¸çŸ¥é“è¿™é‡ŒåŸæ„æ˜¯ä»€ä¹ˆã€‚\n\n3. ç”¨ç±»å‹å‚æ•°æ›¿æ¢æ¥å£ç±»å‹é€šå¸¸ä¹Ÿä¼šè®©æ•°æ®å­˜å‚¨çš„æ›´ä¸ºé«˜æ•ˆã€‚ è¿™é‡Œä¸ºä»€ä¹ˆå˜é«˜æ•ˆäº†ï¼Ÿèƒ½å¤§è‡´è®²è®²å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552796,"discussion_content":"è°¬èµäº†ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645597535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378515,"user_name":"å·¦è€³æœµä¸œ","can_delete":false,"product_type":"c1","uid":1160678,"ip_address":"å¹¿ä¸œ","ucode":"60134ACF12BB52","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/e6/c67f12bd.jpg","comment_is_top":false,"comment_ctime":1690362549,"is_pvip":false,"replies":[{"id":137943,"content":"é—®é¢˜1 æœ¬æ¥ç›´æ¥ç”¨æ¥å£ç±»å‹å³å¯ï¼Œæ²¡å¿…è¦åœ¨ç”¨æ¥å£ç±»å‹ä½œä¸ºconstraintç±»å‹ï¼Œç”¨æ³›å‹æ²¡æœ‰ä»»ä½•é¢å¤–å¥½å¤„ï¼Œåå¢åŠ äº†å¤æ‚æ€§ã€‚\n\nå…³äºwhenç”¨æ³›å‹ï¼Œ41è®²è¯´çš„æ›´å…¨é¢ç»†è‡´ï¼Œå¯å»è¯»è¯»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1690424464,"ip_address":"ç¾å›½","comment_id":378515,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"1ã€&quot;æ²¡æœ‰å¿…è¦åƒä¸‹é¢ä»£ç ä¸­è¿™æ ·ä½¿ç”¨ä¸€ä¸ªç±»å‹å‚æ•°åƒè°ƒç”¨ Read æ–¹æ³•é‚£æ ·å»ä»ä¸€ä¸ªå€¼ä¸­è¯»å–æ•°æ®&quot; è¿™é‡Œæ²¡çœ‹æ˜ç™½ã€‚\n2ã€ä¸è€ƒè™‘ä½¿ç”¨æ•ˆæœçš„è¯ï¼Œèƒ½ç”¨æ³›å‹çš„åœ°æ–¹å¥½åƒéƒ½èƒ½ç”¨æ¥å£æ›¿æ¢ï¼Œåä¹‹ä¹Ÿæ˜¯ï¼Œæœ‰ç‚¹éš¾ä»¥åŒºåˆ†ã€‚\n3ã€å¯ä¸å¯ä»¥è¿™æ ·ç†è§£ï¼Œå¦‚æœæŸä¸ªåŠŸèƒ½åªæœ‰ä¸€ç§å®ç°æ–¹å¼ï¼Œä½†æ˜¯å¯ä»¥ç”¨åœ¨å¤šç§æ•°æ®ç±»å‹ä¸Šï¼Œå°±ç”¨æ³›å‹ï¼›å¦‚æœæŸä¸ªåŠŸèƒ½æœ‰å¤šç§å®ç°æ–¹å¼ï¼ˆç”¨ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œä¼šå¯¼è‡´å®ç°æ–¹å¼æœ‰å·®åˆ«ï¼‰ï¼Œæœ€å¥½ç”¨æ¥å£ã€‚æ¯”å¦‚ io.Read è¦æ±‚å¯ä»¥è¯»æ–‡ä»¶ I&#47;O ä¹Ÿå¯ä»¥è¯»ç½‘ç»œ I&#47;Oï¼Œå®ƒä»¬å„è‡ªçš„å®ç°æ–¹å¼å…¶å®ä¸ä¸€æ ·ï¼Œæœ€å¥½ç”¨æ¥å£è€Œä¸æ˜¯æ³›å‹ã€‚","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624974,"discussion_content":"1. ä¸æ˜¯å‘½åï¼Œæ˜¯ç±»å‹é™å®šã€‚å¯ä»¥æ˜¯éé™å®šçš„anyä¹‹ç±»çš„ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯é™å®šçš„ï¼Œæ¯”å¦‚comparableã€‚å½“ç„¶è¿™ç¯‡å†™çš„æ¯”è¾ƒæ—©ï¼Œè¿™å—å¯ä»¥å»æ‰â€œéé™å®šâ€è¿™ä¸ªæ‹¬å·ä¸­çš„å®šè¯­ã€‚\n2. é‚£åº”è¯¥æ˜¯æå®¢æ—¶é—´ç¼–è¾‘å™¨ä»markdownè½¬æ¢æ–‡å­—æ—¶çš„é—®é¢˜ã€‚\n3. å¯ä»¥çœ‹çœ‹æ³›å‹ç¯‡çš„æœ€åä¸€è®²ã€‚å¹¶å¯¹æ¯”interfaceåœ¨runtimeå±‚çš„è¡¨ç¤ºåŸç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691124848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367946,"user_name":"coming","can_delete":false,"product_type":"c1","uid":1262181,"ip_address":"ä¸Šæµ·","ucode":"7625CE61D9A2D2","user_header":"https://static001.geekbang.org/account/avatar/00/13/42/65/5bfd0a65.jpg","comment_is_top":false,"comment_ctime":1675759976,"is_pvip":false,"replies":[{"id":134044,"content":"çš„ç¡®éœ€è¦é€‚åº”ä¸€æ®µæ—¶é—´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1675948712,"ip_address":"å¹¿ä¸œ","comment_id":367946,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ä¹ æƒ¯äº†C++çš„æ³›å‹, çœ‹ç€[](), æœ‰ç‚¹æ‡µ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603112,"discussion_content":"çš„ç¡®éœ€è¦é€‚åº”ä¸€æ®µæ—¶é—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675948712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357015,"user_name":"é›ªé£é¸¿","can_delete":false,"product_type":"c1","uid":1012325,"ip_address":"æ±Ÿè‹","ucode":"65D7B030828809","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/65/68bd8177.jpg","comment_is_top":false,"comment_ctime":1662862741,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"goå›¢é˜Ÿæ²¡æœ‰æ‰¾å®‰å¾·æ–¯â€¢æµ·å°”æ–¯ä¼¯æ ¼èŠèŠï½","like_count":0},{"had_liked":false,"id":343306,"user_name":"æ€»æœ‰åˆæ°‘æƒ³å®³æœ•","can_delete":false,"product_type":"c1","uid":1492500,"ip_address":"","ucode":"2EA4E4CA6A28E7","user_header":"https://static001.geekbang.org/account/avatar/00/16/c6/14/cbbdb191.jpg","comment_is_top":false,"comment_ctime":1650775495,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æ³›å‹æ”¯æŒä¾èµ–æ³¨å…¥å°±å¥½äº†","like_count":0},{"had_liked":false,"id":333447,"user_name":"bearlu","can_delete":false,"product_type":"c1","uid":1030862,"ip_address":"","ucode":"14F260C8B24E27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","comment_is_top":false,"comment_ctime":1644371182,"is_pvip":true,"replies":[{"id":121864,"content":"å¯ä»¥ç¡®å®šï¼šç¼–è¯‘æ—¶å¯¹æ³›å‹åšçš„å¤„ç†ã€‚ä½†goä½¿ç”¨çš„æ˜¯ä¸€ä¸ªhybridæ–¹æ¡ˆï¼Œæˆ‘ä¹Ÿæ²¡å¤ªæ·±æŒ–ã€‚åç»­æ·±æŒ–åï¼Œå†ç»™å¤§å®¶åˆ†äº«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644388597,"ip_address":"","comment_id":333447,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼ŒGOçš„å®ç°æ³›å‹æ–¹å¼æ˜¯è·ŸC++ä¸€æ ·ï¼Ÿç¼–è¯‘æ—¶è¿›è¡Œï¼Ÿ","like_count":3,"discussions":[{"author":{"id":2785758,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/81/de/6087a437.jpg","nickname":"æ•…ä¹¡å¤šæ˜æœˆ","note":"","ucode":"B8F847537222B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585946,"discussion_content":"å­—å…¸æ³•+æ¨¡æ¿åŒ–çš„æ–¹æ³• https://go.googlesource.com/proposal/+/refs/heads/master/design/generics-implementation-dictionaries-go1.18.md","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661915743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2785758,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/81/de/6087a437.jpg","nickname":"æ•…ä¹¡å¤šæ˜æœˆ","note":"","ucode":"B8F847537222B9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624790,"discussion_content":"åŒå­¦ï¼Œä½ è¿™ä¸ªé“¾æ¥è²Œä¼¼æ‰“ä¸å¼€äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690920237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585946,"ip_address":"å¹¿ä¸œ","group_id":0},"score":624790,"extra":""}]},{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550106,"discussion_content":"å¯ä»¥ç¡®å®šï¼šç¼–è¯‘æ—¶å¯¹æ³›å‹åšçš„å¤„ç†ã€‚ä½†goä½¿ç”¨çš„æ˜¯ä¸€ä¸ªhybridæ–¹æ¡ˆï¼Œæˆ‘ä¹Ÿæ²¡å¤ªæ·±æŒ–ã€‚åç»­æ·±æŒ–åï¼Œå†ç»™å¤§å®¶åˆ†äº«ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644388597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030862,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","nickname":"bearlu","note":"","ucode":"14F260C8B24E27","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550181,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644408753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334847,"user_name":"Rayjun","can_delete":false,"product_type":"c1","uid":1002514,"ip_address":"","ucode":"61A3D1A3D03569","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/12/f0c145d4.jpg","comment_is_top":false,"comment_ctime":1645154427,"is_pvip":false,"replies":[{"id":122592,"content":"è°¬èµäº†ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1645597535,"ip_address":"","comment_id":334847,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ç™½è€å¸ˆå¤ªå¼ºäº†ï¼Œèƒ½å¤ŸæŠŠå¤æ‚çš„é—®é¢˜é€šè¿‡ç®€å•çš„æ–¹å¼è®²è¿°å‡ºæ¥ï¼Œå¤ªå€¼å¾—å­¦ä¹ äº†","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552796,"discussion_content":"è°¬èµäº†ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645597535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378875,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"å¹¿ä¸œ","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1690920550,"is_pvip":false,"replies":[{"id":138110,"content":"1. ä¸æ˜¯å‘½åï¼Œæ˜¯ç±»å‹é™å®šã€‚å¯ä»¥æ˜¯éé™å®šçš„anyä¹‹ç±»çš„ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯é™å®šçš„ï¼Œæ¯”å¦‚comparableã€‚å½“ç„¶è¿™ç¯‡å†™çš„æ¯”è¾ƒæ—©ï¼Œè¿™å—å¯ä»¥å»æ‰â€œéé™å®šâ€è¿™ä¸ªæ‹¬å·ä¸­çš„å®šè¯­ã€‚\n2. é‚£åº”è¯¥æ˜¯æå®¢æ—¶é—´ç¼–è¾‘å™¨ä»markdownè½¬æ¢æ–‡å­—æ—¶çš„é—®é¢˜ã€‚\n3. å¯ä»¥çœ‹çœ‹æ³›å‹ç¯‡çš„æœ€åä¸€è®²ã€‚å¹¶å¯¹æ¯”interfaceåœ¨runtimeå±‚çš„è¡¨ç¤ºåŸç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1026224,"ctime":1691124848,"ip_address":"ç¾å›½","comment_id":378875,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"Tony bai è€å¸ˆï¼Œæœ‰å‡ ä¸ªå°é—®é¢˜ï¼š\n\n1. ç±»å‹å‚æ•°æ˜¯åœ¨å‡½æ•°å£°æ˜ã€æ–¹æ³•å£°æ˜çš„ receiver éƒ¨åˆ†æˆ–ç±»å‹å®šä¹‰çš„ç±»å‹å‚æ•°åˆ—è¡¨ä¸­ï¼Œå£°æ˜çš„ï¼ˆéé™å®šï¼‰ç±»å‹åç§°ã€‚ è¿™é‡Œçš„éé™å®šåº”è¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯å‘½åå¯ä»¥éšæ„ã€‚\n\n2. æ–‡ä¸­ï¼šâ€œæ ¹æ® Go æ³›å‹çš„å®ç°åŸç†ï¼Œä¸Šé¢çš„æ³›å‹å‡½æ•°è°ƒç”¨ Sort[book]ï¼ˆbookshelfï¼‰ä¼šåˆ†æˆä¸¤ä¸ªé˜¶æ®µã€‚â€ è¿™é‡Œï¼ˆbookshelfï¼‰é‡Œé¢æœ‰ä¸€ä¸ªé“¾æ¥ï¼Œä½†æ˜¯é“¾æ¥æ‰“å¼€çš„æ˜¯æå®¢æ—¶é—´é¦–é¡µï¼Œä¸çŸ¥é“è¿™é‡ŒåŸæ„æ˜¯ä»€ä¹ˆã€‚\n\n3. ç”¨ç±»å‹å‚æ•°æ›¿æ¢æ¥å£ç±»å‹é€šå¸¸ä¹Ÿä¼šè®©æ•°æ®å­˜å‚¨çš„æ›´ä¸ºé«˜æ•ˆã€‚ è¿™é‡Œä¸ºä»€ä¹ˆå˜é«˜æ•ˆäº†ï¼Ÿèƒ½å¤§è‡´è®²è®²å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624974,"discussion_content":"1. ä¸æ˜¯å‘½åï¼Œæ˜¯ç±»å‹é™å®šã€‚å¯ä»¥æ˜¯éé™å®šçš„anyä¹‹ç±»çš„ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯é™å®šçš„ï¼Œæ¯”å¦‚comparableã€‚å½“ç„¶è¿™ç¯‡å†™çš„æ¯”è¾ƒæ—©ï¼Œè¿™å—å¯ä»¥å»æ‰â€œéé™å®šâ€è¿™ä¸ªæ‹¬å·ä¸­çš„å®šè¯­ã€‚\n2. é‚£åº”è¯¥æ˜¯æå®¢æ—¶é—´ç¼–è¾‘å™¨ä»markdownè½¬æ¢æ–‡å­—æ—¶çš„é—®é¢˜ã€‚\n3. å¯ä»¥çœ‹çœ‹æ³›å‹ç¯‡çš„æœ€åä¸€è®²ã€‚å¹¶å¯¹æ¯”interfaceåœ¨runtimeå±‚çš„è¡¨ç¤ºåŸç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691124848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378515,"user_name":"å·¦è€³æœµä¸œ","can_delete":false,"product_type":"c1","uid":1160678,"ip_address":"å¹¿ä¸œ","ucode":"60134ACF12BB52","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/e6/c67f12bd.jpg","comment_is_top":false,"comment_ctime":1690362549,"is_pvip":false,"replies":[{"id":137943,"content":"é—®é¢˜1 æœ¬æ¥ç›´æ¥ç”¨æ¥å£ç±»å‹å³å¯ï¼Œæ²¡å¿…è¦åœ¨ç”¨æ¥å£ç±»å‹ä½œä¸ºconstraintç±»å‹ï¼Œç”¨æ³›å‹æ²¡æœ‰ä»»ä½•é¢å¤–å¥½å¤„ï¼Œåå¢åŠ äº†å¤æ‚æ€§ã€‚\n\nå…³äºwhenç”¨æ³›å‹ï¼Œ41è®²è¯´çš„æ›´å…¨é¢ç»†è‡´ï¼Œå¯å»è¯»è¯»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1690424464,"ip_address":"ç¾å›½","comment_id":378515,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"1ã€&quot;æ²¡æœ‰å¿…è¦åƒä¸‹é¢ä»£ç ä¸­è¿™æ ·ä½¿ç”¨ä¸€ä¸ªç±»å‹å‚æ•°åƒè°ƒç”¨ Read æ–¹æ³•é‚£æ ·å»ä»ä¸€ä¸ªå€¼ä¸­è¯»å–æ•°æ®&quot; è¿™é‡Œæ²¡çœ‹æ˜ç™½ã€‚\n2ã€ä¸è€ƒè™‘ä½¿ç”¨æ•ˆæœçš„è¯ï¼Œèƒ½ç”¨æ³›å‹çš„åœ°æ–¹å¥½åƒéƒ½èƒ½ç”¨æ¥å£æ›¿æ¢ï¼Œåä¹‹ä¹Ÿæ˜¯ï¼Œæœ‰ç‚¹éš¾ä»¥åŒºåˆ†ã€‚\n3ã€å¯ä¸å¯ä»¥è¿™æ ·ç†è§£ï¼Œå¦‚æœæŸä¸ªåŠŸèƒ½åªæœ‰ä¸€ç§å®ç°æ–¹å¼ï¼Œä½†æ˜¯å¯ä»¥ç”¨åœ¨å¤šç§æ•°æ®ç±»å‹ä¸Šï¼Œå°±ç”¨æ³›å‹ï¼›å¦‚æœæŸä¸ªåŠŸèƒ½æœ‰å¤šç§å®ç°æ–¹å¼ï¼ˆç”¨ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œä¼šå¯¼è‡´å®ç°æ–¹å¼æœ‰å·®åˆ«ï¼‰ï¼Œæœ€å¥½ç”¨æ¥å£ã€‚æ¯”å¦‚ io.Read è¦æ±‚å¯ä»¥è¯»æ–‡ä»¶ I&#47;O ä¹Ÿå¯ä»¥è¯»ç½‘ç»œ I&#47;Oï¼Œå®ƒä»¬å„è‡ªçš„å®ç°æ–¹å¼å…¶å®ä¸ä¸€æ ·ï¼Œæœ€å¥½ç”¨æ¥å£è€Œä¸æ˜¯æ³›å‹ã€‚","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624299,"discussion_content":"é—®é¢˜1 æœ¬æ¥ç›´æ¥ç”¨æ¥å£ç±»å‹å³å¯ï¼Œæ²¡å¿…è¦åœ¨ç”¨æ¥å£ç±»å‹ä½œä¸ºconstraintç±»å‹ï¼Œç”¨æ³›å‹æ²¡æœ‰ä»»ä½•é¢å¤–å¥½å¤„ï¼Œåå¢åŠ äº†å¤æ‚æ€§ã€‚\n\nå…³äºwhenç”¨æ³›å‹ï¼Œ41è®²è¯´çš„æ›´å…¨é¢ç»†è‡´ï¼Œå¯å»è¯»è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690424464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367946,"user_name":"coming","can_delete":false,"product_type":"c1","uid":1262181,"ip_address":"ä¸Šæµ·","ucode":"7625CE61D9A2D2","user_header":"https://static001.geekbang.org/account/avatar/00/13/42/65/5bfd0a65.jpg","comment_is_top":false,"comment_ctime":1675759976,"is_pvip":false,"replies":[{"id":134044,"content":"çš„ç¡®éœ€è¦é€‚åº”ä¸€æ®µæ—¶é—´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1675948712,"ip_address":"å¹¿ä¸œ","comment_id":367946,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"ä¹ æƒ¯äº†C++çš„æ³›å‹, çœ‹ç€[](), æœ‰ç‚¹æ‡µ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624299,"discussion_content":"é—®é¢˜1 æœ¬æ¥ç›´æ¥ç”¨æ¥å£ç±»å‹å³å¯ï¼Œæ²¡å¿…è¦åœ¨ç”¨æ¥å£ç±»å‹ä½œä¸ºconstraintç±»å‹ï¼Œç”¨æ³›å‹æ²¡æœ‰ä»»ä½•é¢å¤–å¥½å¤„ï¼Œåå¢åŠ äº†å¤æ‚æ€§ã€‚\n\nå…³äºwhenç”¨æ³›å‹ï¼Œ41è®²è¯´çš„æ›´å…¨é¢ç»†è‡´ï¼Œå¯å»è¯»è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690424464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357015,"user_name":"é›ªé£é¸¿","can_delete":false,"product_type":"c1","uid":1012325,"ip_address":"æ±Ÿè‹","ucode":"65D7B030828809","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/65/68bd8177.jpg","comment_is_top":false,"comment_ctime":1662862741,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"goå›¢é˜Ÿæ²¡æœ‰æ‰¾å®‰å¾·æ–¯â€¢æµ·å°”æ–¯ä¼¯æ ¼èŠèŠï½","like_count":0},{"had_liked":false,"id":343306,"user_name":"æ€»æœ‰åˆæ°‘æƒ³å®³æœ•","can_delete":false,"product_type":"c1","uid":1492500,"ip_address":"","ucode":"2EA4E4CA6A28E7","user_header":"https://static001.geekbang.org/account/avatar/00/16/c6/14/cbbdb191.jpg","comment_is_top":false,"comment_ctime":1650775495,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æ³›å‹æ”¯æŒä¾èµ–æ³¨å…¥å°±å¥½äº†","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603112,"discussion_content":"çš„ç¡®éœ€è¦é€‚åº”ä¸€æ®µæ—¶é—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675948712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}