{"id":413708,"title":"13 | åœ¨ Spring é¡¹ç›®ä¸­å¦‚ä½•è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ‘æ™”ï¼</p><p>ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬å°† ToDo åº”ç”¨ä»å‘½ä»¤è¡Œæ‰©å±•ä¸ºäº† REST æœåŠ¡ã€‚åœ¨è¿™ä¸ªåº”ç”¨é‡Œï¼Œæˆ‘ä»¬ç”¨åˆ°äº† Spring è¿™ä¸ªåœ¨ Java ä¸–ç•Œä¸­å¹¿æ³›ä½¿ç”¨çš„æ¡†æ¶ã€‚å¤§å¤šæ•°äººå¯¹äº Spring è¿™ä¸ªæ¡†æ¶çš„è®¤çŸ¥éƒ½åœç•™åœ¨å¦‚ä½•ä½¿ç”¨å®ƒå®Œæˆå„ç§åŠŸèƒ½ç‰¹æ€§ä¸Šï¼Œè€Œ Spring æ›´å¤§çš„ä»·å€¼å…¶å®åœ¨å¯¹äºå¼€å‘æ•ˆç‡çš„å·¨å¤§æå‡ä¸Šï¼Œå…¶ä¸­å°±åŒ…å«äº†å¯¹æµ‹è¯•çš„æ”¯æŒã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„ä¸¤è®²ï¼Œæˆ‘ä»¬å°±æŠŠæ³¨æ„åŠ›ä»ä¸€ä¸ªå…·ä½“çš„é¡¹ç›®ä¸ŠæŒªå¼€ï¼Œæ”¾åˆ° Spring æ¡†æ¶æœ¬èº«ï¼Œçœ‹çœ‹å®ƒå¯¹å¼€å‘æ•ˆç‡æå‡çš„æ”¯æŒã€‚</p><h2>è½»é‡çº§å¼€å‘çš„ Spring</h2><p>å¾ˆå¤šäººå¯¹äº Spring çš„ç†è§£æ˜¯ä»ä¾èµ–æ³¨å…¥å®¹å™¨å¼€å§‹çš„ï¼Œä½†æ˜¯ï¼ŒSpring çœŸæ­£å¯¹è¡Œä¸šçš„å½±å“å´æ˜¯ä»å®ƒå¯¹åŸæœ‰å¼€å‘æ¨¡å¼çš„é¢ è¦†å¼€å§‹ã€‚</p><p>åœ¨ 21 ä¸–çºªåˆçš„æ—¶å€™ï¼ŒJava ä¸–ç•Œçš„ä¸»æµå¼€å‘æ–¹å¼æ˜¯ J2EEï¼Œä¹Ÿå°±æ˜¯ Java çš„ä¼ä¸šç‰ˆã€‚åœ¨é‚£ä¸ªæ—¶å€™ï¼Œä¼ä¸šç‰ˆä»£è¡¨è½¯ä»¶å¼€å‘çš„æœ€é«˜æ°´å‡†ã€‚åœ¨è¿™ä¸ªä¼ä¸šç‰ˆçš„æ„æƒ³ä¸­ï¼Œæ‰€æœ‰çš„å¤æ‚éƒ½åº”è¯¥éšè—èµ·æ¥ï¼Œå†™ä»£ç çš„ç¨‹åºå‘˜ä¸éœ€è¦çŸ¥é“å„ç§ç»†èŠ‚ï¼Œéœ€è¦çš„ä¸œè¥¿æ‹¿è¿‡æ¥ç”¨å°±å¥½äº†ã€‚</p><p>è¿™ç§æƒ³æ³•æœ¬èº«æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œæ—¶è‡³ä»Šæ—¥ï¼Œå¾ˆå¤šå¹³å°å’Œæ¡†æ¶ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ã€‚åˆ°äº†å…·ä½“çš„åšæ³•ä¸Šï¼ŒJ2EE æä¾›äº†ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ï¼Œæˆ‘æŠŠè¿™äº›å¤æ‚æ€§éƒ½æ”¾åœ¨è¿™ä¸ªåº”ç”¨æœåŠ¡å™¨é‡Œå®ç°ï¼Œä½ å†™å¥½çš„ç¨‹åºéƒ¨ç½²åˆ°è¿™ä¸ªåº”ç”¨æœåŠ¡å™¨ä¸Šå°±ä¸‡äº‹å¤§å‰äº†ã€‚ä½†æ­£æ˜¯å› ä¸ºåº”ç”¨æœåŠ¡å™¨çš„å­˜åœ¨ï¼Œä½¿ç”¨ J2EE è¿›è¡Œå¼€å‘å˜æˆäº†ä¸€ä»¶æ— æ¯”å¤æ‚çš„äº‹æƒ…ã€‚</p><!-- [[[read_end]]] --><p>å°†ç¨‹åºæ‰“åŒ…éƒ¨ç½²è¿™ä»¶äº‹è¯´èµ·æ¥å¾ˆç®€å•ï¼Œä½†åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œå¦‚æœä¸€ä¸ªå›¢é˜Ÿæ²¡æœ‰åšå¥½è‡ªåŠ¨åŒ–ï¼Œæ‰“åŒ…éƒ¨ç½²ä¼šéå¸¸éº»çƒ¦ã€‚å†è€…ï¼Œé™¤äº†è‡ªå·±çš„ä¸šåŠ¡ä»£ç ï¼Œæ‰€æœ‰ç›¸å…³çš„ç¬¬ä¸‰æ–¹ JAR åŒ…éƒ½éœ€è¦æ‰“åˆ°æœ€ç»ˆçš„å‘å¸ƒåŒ…ä¸­ï¼Œé€ æˆçš„ç»“æœå°±æ˜¯å‘å¸ƒåŒ…éå¸¸å¤§ã€‚åœ¨é‚£ä¸ªç½‘ç»œå¸¦å®½è¿˜ä¸æ˜¯ç‰¹åˆ«å¤§çš„å¹´ä»£ï¼Œä¼ è¾“è¿™ä¸ªå‘å¸ƒåŒ…ä¹Ÿè¦èŠ±å¾ˆé•¿çš„æ—¶é—´ã€‚</p><p>æ›´å…³é”®çš„æ˜¯ï¼Œä¸€æ—¦å‡ºäº†é—®é¢˜æ€ä¹ˆå»å®šä½ä¹Ÿæ˜¯ä¸ªä»¤äººå¤´ç–¼çš„é—®é¢˜ã€‚</p><p>ç¨‹åºå‘˜æœ€ç†Ÿæ‚‰å®šä½é—®é¢˜çš„æ–¹å¼å°±æ˜¯è°ƒè¯•ä»£ç ã€‚ä¹‹å‰æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯åœ¨æœ¬åœ°ï¼Œè°ƒè¯•èµ·æ¥è¿˜æ¯”è¾ƒå®¹æ˜“ï¼Œç°åœ¨ä»£ç è¿è¡Œåœ¨åº”ç”¨æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬å¿…é¡»è¿æ¥åˆ°è¿œç¨‹åº”ç”¨æœåŠ¡å™¨ä¸Šè¿›è¡Œè°ƒè¯•ï¼Œè€Œè¦è¿æ¥åº”ç”¨æœåŠ¡å™¨è¿›è¡Œè°ƒè¯•ï¼Œè¿˜éœ€è¦ä¸€äº›é…ç½®ï¼Œæ€»ä¹‹ï¼Œè¿™ä»¶äº‹çœŸçš„æ˜¯éå¸¸éº»çƒ¦ã€‚</p><p>å¯¹äºéº»çƒ¦çš„äº‹æƒ…ï¼Œäººä»¬å€¾å‘äºå°‘åšæˆ–ä¸åšï¼Œä½†æ˜¯  J2EE è®©è¿™ä»¶éº»çƒ¦äº‹æˆäº†å¿…é€‰é¡¹ã€‚æ‰€ä»¥ï¼Œé‚£ä¸ªå¹´ä»£çš„ Java ç¨‹åºå‘˜å¤„äºä¸€ç§ç—›è‹¦ä¸å ªçš„çŠ¶æ€ï¼Œå¼€å‘æ•ˆç‡æå…¶ä½ä¸‹ã€‚</p><p>å°±åœ¨æ•´ä¸ª Java ç¤¾åŒºé¥±å—æŠ˜ç£¨ä¹‹é™…ï¼ŒSpring æ¨ªç©ºå‡ºä¸–ã€‚å¯¹äº J2EE æå‡ºçš„é—®é¢˜ï¼ŒSpring æ˜¯æ‰¿è®¤çš„ï¼Œä½†å¯¹å…¶ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒå´æ˜¯ä¸è®¤çš„ã€‚å› ä¸ºåº”ç”¨æœåŠ¡å™¨å¤ªé‡äº†ï¼ŒSpring ç»™ç¤¾åŒºå¸¦æ¥äº†è½»é‡çº§å¼€å‘ã€‚</p><p>Spring çš„é€»è¾‘å¾ˆç®€å•ï¼Œè¿™äº›ä¸œè¥¿é€šè¿‡ç¨‹åºåº“çš„æ–¹å¼å°±å¯ä»¥å®Œæˆï¼Œä¸ºä»€ä¹ˆéè¦å¼„ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨å‘¢ï¼Ÿé‡‡ç”¨ç¨‹åºåº“çš„æ–¹å¼ï¼Œæœ€å¤§çš„ä¼˜åŠ¿å°±åœ¨äºå¯ä»¥åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­è¿›è¡Œå¼€å‘å’Œè°ƒè¯•ï¼Œè¿™å°±æå¤§åœ°é™ä½å¼€å‘çš„éš¾åº¦ã€‚äºæ˜¯ï¼Œå¯¹äºåŒæ ·çš„é—®é¢˜ï¼ŒSpring æŠ›å¼ƒäº† J2EE ä¸­çš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œç»™å‡ºäº†è‡ªå·±çš„ç¨‹åºåº“è§£å†³æ–¹æ¡ˆï¼Œåº”ç”¨æœåŠ¡å™¨å˜å¾—å¯æœ‰å¯æ— äº†ã€‚</p><p>äº‹å®è¯æ˜ï¼Œäººä»¬æ›´å–œçˆ±ç®€å•çš„è§£å†³æ–¹æ¡ˆï¼Œå³ä¾¿ J2EE æœ‰å¼ºå¤§çš„å®˜æ–¹èƒŒä¹¦ï¼Œç¨‹åºå‘˜ä»¬è¿˜æ˜¯ä¹‰æ— åé¡¾åœ°æŠ›å¼ƒäº†å®ƒã€‚Spring ä»æ­¤æˆäº† Java ç¤¾åŒºçš„ä¸»æµï¼Œä¹Ÿæˆäº†è½»é‡çº§å¼€å‘çš„ä»£åè¯ã€‚</p><p>Spring ä¸ä»…æ˜¯æ°å½“åœ°æŠŠæ¡äº†æ—¶æœºï¼Œå æ®äº† Java ä¸–ç•Œä¸­çš„å…³é”®ä½ç½®ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œåœ¨éšåçš„å‘å±•ä¸­ï¼Œä¸€ç›´å‡­å€Ÿå¯¹äºè½»é‡çº§å¼€å‘çš„è¿½æ±‚ä»¥åŠè‰¯å¥½çš„å“ä½ï¼Œä½¿å¾—å®ƒåœ¨ Java ç¨‹åºå‘˜å¿ƒç›®ä¸­å æ®ç€æ— å¯æ›¿ä»£çš„ä½ç½®ã€‚å³ä¾¿ä¸­é—´æœ‰éƒ¨åˆ†åœ°æ–¹å…¶å®ƒçš„ç¨‹åºåº“åšå¾—ç¨å¾®å¥½ä¸€äº›ï¼Œå®ƒä¹Ÿèƒ½å¾ˆå¿«åœ°å­¦ä¹ è¿‡æ¥ã€‚</p><p>å‰é¢æˆ‘è¯´è¿‡ï¼Œè™½ç„¶ Spring æŠ›å¼ƒäº† J2EE ä¸­çš„å¤§éƒ¨åˆ†å†…å®¹ï¼ŒåŸºäº Web æœåŠ¡å™¨çš„å¼€å‘è¿˜æ˜¯å¾—åˆ°äº†ä¿ç•™ã€‚å› ä¸ºå½“æ—¶ç¡®å®æ²¡æœ‰ä»€ä¹ˆæ›´å¥½çš„é€‰æ‹©ï¼Œè™½ç„¶å¤§éƒ¨åˆ†ä»£ç å¯ä»¥åœ¨æœ¬åœ°æµ‹è¯•ï¼Œä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬è¿˜æ˜¯è¦æ‰“æˆä¸€ä¸ª WAR åŒ…éƒ¨ç½²åˆ°åƒ Tomcat è¿™æ ·çš„ Web æœåŠ¡å™¨ä¸Šã€‚ä¸è¿‡ï¼Œéšç€ Tomcat å’Œä¸€ä¼— Web æœåŠ¡å™¨æä¾›äº†å¯åµŒå…¥çš„ APIï¼Œæ‰“åŒ…éƒ¨ç½²è¿™ç§ J2EE æ®‹ç•™æ–¹å¼å°±å½»åº•æˆä¸ºäº†è¿‡å»ï¼Œä¹Ÿå°±è¯ç”Ÿä»Šå¤©å¾ˆå¤š Java ç¨‹åºå‘˜ç†Ÿæ‚‰çš„ Spring Bootï¼Œå¯ä»¥è¯´ Spring Boot æ˜¯ Spring å¤šå¹´åŠªåŠ›çš„é›†å¤§æˆè€…ï¼</p><h2>Spring çš„æµ‹è¯•</h2><p>ä¸è¿‡åœ¨ Spring Boot å‡ºç°ä¹‹å‰ï¼Œæ­£æ˜¯å› ä¸ºæ— æ³•æ‘†è„±æ‰“åŒ…éƒ¨ç½²çš„è¿™æ ·çš„æ¨¡å¼ï¼ŒåŸºäºè¿™æ¡è·¯èµ°ä¸‹å»å¼€å‘éš¾åº¦ä¾ç„¶ä¸å°ï¼Œå¯ä»¥è¯´å¹¶æ²¡æœ‰ä»æ ¹æœ¬ä¸Šæ”¹å˜é—®é¢˜ã€‚ä½† Spring çš„è½»é‡çº§å¼€å‘ç†å¿µæ˜¯æ”¯æ’‘å®ƒä¸€è·¯å‘å‰çš„åŠ¨åŠ›ï¼Œæ—¢ç„¶é‚£ä¸ªæ—¶å€™  Web æœåŠ¡å™¨ä¸èƒ½èˆå¼ƒï¼Œç´¢æ€§ Spring å°±é€‰æ‹©äº†å¦å¤–ä¸€æ¡è·¯ï¼šä»æµ‹è¯•æ”¯æŒå…¥æ‰‹ã€‚</p><p>æ‰€ä»¥  Spring æä¾›äº†ä¸€æ¡æµ‹è¯•ä¹‹è·¯ï¼Œè®©æˆ‘ä»¬åœ¨æœ€ç»ˆæ‰“åŒ…ä¹‹å‰ï¼Œèƒ½å¤Ÿè®©è‡ªå·±ç¼–å†™çš„ä»£ç åœ¨æœ¬åœ°å¾—åˆ°å®Œæ•´éªŒè¯ã€‚ä½ åœ¨å®æˆ˜ç¯èŠ‚ä¸­å·²ç»è§è¯†è¿‡å¦‚ä½•ä½¿ç”¨ Spring åšæµ‹è¯•äº†ã€‚ç®€å•æ¥è¯´å°±æ˜¯<strong>ä½¿ç”¨å•å…ƒæµ‹è¯•æ„å»ºç¨³å®šçš„ä¸šåŠ¡æ ¸å¿ƒï¼Œä½¿ç”¨ Spring æä¾›çš„åŸºç¡€è®¾æ–½è¿›è¡Œé›†æˆæµ‹è¯•ã€‚</strong></p><p>ä¸¥æ ¼åœ°è¯´ï¼Œæ„å»ºç¨³å®šçš„ä¸šåŠ¡æ ¸å¿ƒå…¶å®å¹¶ä¸ä¾èµ–äº Springï¼Œä½† Spring æä¾›äº†ä¸€ä¸ªå°†ç»„ä»¶ç»„è£…åˆ°ä¸€èµ·åŸºç¡€è®¾æ–½ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç®€ç§° DIï¼‰å®¹å™¨ã€‚é€šå¸¸æˆ‘ä»¬ä¼šåˆ©ç”¨ DI å®¹å™¨å®Œæˆæˆ‘ä»¬çš„å·¥ä½œï¼Œä¹Ÿæ­£æ˜¯å› ä¸º DI å®¹å™¨ç”¨èµ·æ¥å¾ˆå®¹æ˜“ï¼Œæ‰€ä»¥å¸¸å¸¸ä¼šé€ æˆ <strong>DI å®¹å™¨çš„è¯¯ç”¨ï¼Œåè€Œä¼šé˜»ç¢æµ‹è¯•ã€‚</strong></p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/408187\">ç¬¬6è®²</a>ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºè¿‡è¦ç¼–å†™èƒ½å¤Ÿç»„åˆçš„ä»£ç ã€‚ä¾èµ–æ³¨å…¥çš„é£æ ¼ä¼šå¼•å¯¼æˆ‘ä»¬ç¼–å†™èƒ½å¤Ÿç»„åˆçš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ä¸è¦åœ¨ç±»çš„å†…éƒ¨åˆ›å»ºç»„ä»¶ï¼Œè€Œæ˜¯é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼å°†ç»„ä»¶æ³¨å…¥åˆ°å¯¹è±¡ä¹‹ä¸­ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨ä¸€ä¸ªä½¿ç”¨ Spring é¡¹ç›®è¿›è¡Œå•å…ƒæµ‹è¯•çš„å…³é”®å°±æ˜¯ï¼Œ<strong>ä¿è¯ä»£ç å¯ä»¥ç»„åˆçš„ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¾èµ–æ³¨å…¥çš„ã€‚</strong>ä½ å¯èƒ½ä¼šè¯´ï¼Œæˆ‘ä»¬éƒ½ç”¨äº† Springï¼Œé‚£ä»£ç è‚¯å®šæ˜¯ç»„åˆçš„ã€‚è¿™è¿˜çœŸä¸ä¸€å®šï¼Œæœ‰äº›é”™è¯¯çš„åšæ³•å°±ä¼šé€ æˆå¯¹ä¾èµ–æ³¨å…¥çš„ç ´åï¼Œè¿›è€Œé€ æˆå•å…ƒæµ‹è¯•çš„å›°éš¾ã€‚</p><h3>ä¸ä½¿ç”¨åŸºäºå­—æ®µçš„æ³¨å…¥</h3><p>æœ‰ä¸€ç§å…¸å‹çš„é”™è¯¯å°±æ˜¯åŸºäºå­—æ®µçš„æ³¨å…¥ï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·ã€‚</p><pre><code>@Service\npublic class TodoItemService {\n  @Autowired\n  private TodoItemRepository repository;\n\n}\n</code></pre><p>@Autowired æ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„ç‰¹æ€§ï¼Œå®ƒä¼šå‘Šè¯‰ Spring è‡ªåŠ¨å¸®æˆ‘ä»¬æ³¨å…¥ç›¸åº”çš„ç»„ä»¶ã€‚åœ¨å­—æ®µä¸ŠåŠ Autowired æ˜¯ä¸€ä¸ªå®¹æ˜“å†™çš„ä»£ç ï¼Œä½†å®ƒå¯¹å•å…ƒæµ‹è¯•å´å¾ˆä¸å‹å¥½ï¼Œå› ä¸ºä½ éœ€è¦å¾ˆç¹çåœ°å»è®¾ç½®è¿™ä¸ªå­—æ®µçš„å€¼ï¼Œæ¯”å¦‚é€šè¿‡åå°„ã€‚</p><p>å¦‚æœä¸ä½¿ç”¨åŸºäºå­—æ®µçš„æ³¨å…¥è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œæä¾›ä¸€ä¸ªæ„é€ å‡½æ•°å°±å¥½ï¼ŒæŠŠ@Autowired æ”¾åœ¨æ„é€ å‡½æ•°ä¸Šï¼Œåƒä¸‹é¢è¿™æ ·å­ã€‚</p><pre><code>@Service\npublic class TodoItemService {\n  private final TodoItemRepository repository;\n\n  @Autowired\n  public TodoItemService(final TodoItemRepository repository) {\n    this.repository = repository;\n  }\n  ...\n}\n</code></pre><p>è¿™æ ·ä¸€æ¥ï¼Œç¼–å†™æµ‹è¯•çš„æ—¶å€™æˆ‘ä»¬åªè¦åƒæ™®é€šå¯¹è±¡ä¸€æ ·å»æµ‹è¯•å°±å¥½äº†ï¼Œå…·ä½“çš„åšæ³•ä½ è¦æ˜¯è®°ä¸æ¸…äº†ï¼Œå¯ä»¥å»å›é¡¾ä¸€ä¸‹å®æˆ˜ç¯èŠ‚ã€‚</p><p>è¿™ç§æ„é€ å‡½æ•°ä¸€èˆ¬æˆ‘ä»¬éƒ½å¯ä»¥åˆ©ç”¨ IDE çš„å¿«æ·é”®ç”Ÿæˆï¼Œæ‰€ä»¥è¿™æ®µä»£ç å¯¹æˆ‘ä»¬æ¥è¯´ä¹Ÿä¸æ˜¯å¾ˆé‡çš„è´Ÿæ‹…ã€‚å¦‚æœä½ è¿˜å«Œå¼ƒè¿™ç§ä»£ç çš„å†—ä½™ï¼Œä¹Ÿå¯ä»¥ç”¨ Lombokï¼ˆLombok æ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä»£ç çš„ç¨‹åºåº“ï¼‰çš„ Annotation æ¥ç®€åŒ–ä»£ç ï¼Œåƒä¸‹é¢è¿™æ ·ã€‚</p><pre><code>@Service\n@RequiredArgsConstructor\npublic class TodoItemService {\n  private final TodoItemRepository repository;\n\n  ...\n}\n</code></pre><h3>ä¸ä¾èµ–äº ApplicationContext</h3><p>ä½¿ç”¨ Spring è¿˜æœ‰ä¸€ç§å…¸å‹çš„é”™è¯¯ï¼Œå°±æ˜¯é€šè¿‡ ApplicationContext è·å–ä¾èµ–çš„å¯¹è±¡ï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·ã€‚</p><pre><code>@Service\npublic class TodoItemService {\n  @Autowired\n  private ApplicationContext context;\n  \n  private TodoItemRepository repository; \n  \n  public TodoItemService() {\n    this.repository = context.getBean(TodoItemRepository.class);\n  }\n  ...\n}\n</code></pre><p>æˆ‘ä»¬å¯ä»¥æŠŠ ApplicationContext ç†è§£æˆ DI å®¹å™¨ï¼ŒåŸæœ¬ä½¿ç”¨ DI å®¹å™¨çš„ä¼˜ç‚¹å°±æ˜¯å¯ä»¥ä¸çŸ¥æ™“ä¾èµ–æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Œè€Œåœ¨è¿™æ®µä»£ç é‡Œï¼Œå´çŸ¥æ™“äº† DI å®¹å™¨ï¼Œè¿™å°±å®Œå…¨æ‰“ç ´äº† DI å®¹å™¨è®¾è®¡çš„åˆè¡·ï¼ˆå…³äº Spring çš„è®¾è®¡åˆè¡·ï¼Œæˆ‘åœ¨ã€Šè½¯ä»¶è®¾è®¡ä¹‹ç¾ã€‹ä¸­ä¸“é—¨<a href=\"https://time.geekbang.org/column/article/241123\">æœ‰ä¸€è®²</a>åˆ†æè¿‡ï¼Œå¦‚æœä½ æœ‰å…´è¶£å¯ä»¥å»äº†è§£ä¸€ä¸‹ï¼‰ã€‚</p><p><strong>åœ¨ä¸šåŠ¡æ ¸å¿ƒä»£ç ä¸­å‡ºç° ApplicationContext æ˜¯ä¸€ç§å®Œå…¨é”™è¯¯çš„åšæ³•ã€‚</strong>ä¸€æ–¹é¢ï¼Œå®ƒæ‰“ç ´äº† DI å®¹å™¨åŸæœ¬çš„è®¾è®¡ï¼Œå¦ä¸€æ–¹é¢ï¼Œè¿˜è®©ä¸šåŠ¡æ ¸å¿ƒä»£ç å¯¹ç¬¬ä¸‰æ–¹ä»£ç ï¼ˆä¹Ÿå°±æ˜¯ ApplicationContextï¼‰äº§ç”Ÿäº†ä¾èµ–ã€‚</p><p>æˆ‘ä»¬å†ä»è®¾è®¡çš„è§’åº¦çœ‹ä¸€ä¸‹ï¼ŒAppliationContext çš„å‡ºç°ä½¿å¾—æˆ‘ä»¬åœ¨æµ‹è¯•è¿™æ®µä»£ç æ—¶ï¼Œå¿…é¡»å¼•å…¥ ApplicationContextã€‚è¦æƒ³åœ¨ä»£ç é‡Œè·å–åˆ°ç›¸åº”çš„ç»„ä»¶ï¼Œéœ€è¦åœ¨æµ‹è¯•ä¸­å‘ ApplicationContext é‡Œæ·»åŠ ç›¸åº”çš„ç»„ä»¶ï¼Œè¿™ä¼šè®©ä¸€ä¸ªåŸæœ¬å¾ˆç®€å•çš„æµ‹è¯•å˜å¾—å¤æ‚èµ·æ¥ã€‚</p><p>ä½ çœ‹ï¼Œä¸€ä¸ªæ­£å¸¸çš„æµ‹è¯•æ˜¯å¦‚æ­¤ç®€å•ï¼Œä½†æ­£æ˜¯å› ä¸ºå¼•å…¥äº† Springï¼Œè®¸å¤šäººåè€Œä¼šåšé”™ã€‚Spring æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥åœ¨ä»£ç å±‚é¢ä¸Šä¸ä¾èµ–äº Springï¼Œè€Œé”™è¯¯çš„åšæ³•åè€Œæ˜¯æ·±æ·±åœ°ä¾èµ–äº Springã€‚</p><p>æˆ‘ä»¬å‰é¢è®¨è®ºäº†è¿™ä¹ˆå¤šï¼Œå…¶å®å¹¶æ²¡æœ‰é’ˆå¯¹ Spring å¯¹å•å…ƒæµ‹è¯•çš„æ”¯æŒè¿›è¡Œè®²è§£ï¼Œä½† Spring å…¶å®è¿˜çœŸæä¾›äº†ä¸€ä¸ªå¯¹å•å…ƒæµ‹è¯•çš„æ”¯æŒï¼Œä¹Ÿå°±æ˜¯@MockBeanï¼Œä¹Ÿå°±æ˜¯å¸®æˆ‘ä»¬è¿›è¡Œ Mock å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œåƒå¯¹äºä¸‹é¢è¿™è¡Œä»£ç æ¥è¯´ï¼š</p><pre><code>@MockBean\nprivate TodoItemRepository repository;\n</code></pre><p>å®ƒå°±ç­‰åŒäºä¸‹é¢è¿™æ®µã€‚</p><pre><code>@BeforeEach\npublic void setUp() {\n  this.repository = mock(TodoItemRepository.class);\n  ...\n}\n</code></pre><p>ä½†æ˜¯æˆ‘å¹¶ä¸æƒ³ç‰¹æ„å¼ºè°ƒè¿™ç§åšæ³•ã€‚ä¸€æ–¹é¢ï¼Œè¿™ç§åˆå§‹åŒ–çš„ä»£ç æ¸…æ™°ä¸”ä¸å¤æ‚ï¼Œå¦ä¸€æ–¹é¢ï¼Œå³ä¾¿æˆ‘ä»¬çœŸçš„æ‰“ç®—èŠ‚çœè¿™ä¸¤è¡Œçš„ä»£ç ï¼Œæ›´å¥½çš„åšæ³•æ˜¯æ ¹æ®ä½ ä½¿ç”¨çš„ Mock æ¡†æ¶é‡‡ç”¨å…¶å¯¹åº”çš„åšæ³•ã€‚æ¯”å¦‚ä½¿ç”¨ Mockitoï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™ä¹ˆå†™ã€‚</p><pre><code>@ExtendWith(MockitoExtension.class)\npublic class TodoItemServiceTest {\n  @Mock\n  private TodoItemRepository repository;\n}\n</code></pre><p>ä¸è¿‡@MockBean å¹¶éä¸€æ— æ˜¯å¤„ï¼Œæˆ‘ä»¬åœ¨é›†æˆæµ‹è¯•ä¸­ä¼šç”¨åˆ°å®ƒï¼Œè®©å®ƒå‚ä¸åˆ°ä¾èµ–æ³¨å…¥çš„è¿‡ç¨‹ä¸­å»ã€‚ä¸‹ä¸€è®²ï¼Œæˆ‘ä»¬å°±æ¥è®¨è®ºä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Spring è¿›è¡Œé›†æˆæµ‹è¯•ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>è¿™ä¸€è®²æˆ‘ä»¬è®²åˆ°äº† Spring è¿™ä¸ª Java ä¸–ç•Œä½¿ç”¨æœ€å¹¿æ³›çš„æ¡†æ¶ï¼Œå®ƒæœ€å¤§çš„è´¡çŒ®æ˜¯å¯¹å¼€å‘æ¨¡å¼çš„é¢ è¦†ï¼šç”±åŸæ¥ J2EE ä¾èµ–äºéƒ¨ç½²çš„é‡é‡çº§å¼€å‘æ¨¡å¼ï¼Œåˆ°å¯ä»¥åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒå®Œæˆä¸»è¦å·¥ä½œçš„è½»é‡çº§å¼€å‘æ–¹å¼ã€‚</p><p>è½»é‡çº§çš„å¼€å‘æ–¹å¼æ˜¯ Spring ä¸€ä»¥è´¯ä¹‹çš„è¿½æ±‚ï¼Œé‡‡ç”¨ Spring å¼€å‘å¯ä»¥åœ¨éƒ¨ç½²åˆ°å®¹å™¨ä¹‹å‰å°±å®Œæˆæ‰€æœ‰ä»£ç çš„éªŒè¯ï¼Œå…¶ä¸­å¯¹æµ‹è¯•çš„æ”¯æŒæ˜¯éå¸¸é‡è¦çš„ä¸€ç¯ã€‚</p><p>è™½ç„¶æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜æ˜¯å¦‚ä½•ä½¿ç”¨ Spring è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä½†å®é™…ä¸ŠçœŸæ­£åšå¥½çš„ä¸šåŠ¡æµ‹è¯•å’Œæ™®é€šä»£ç çš„æµ‹è¯•æ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æ›´å¤šåœ°æ˜¯åœ¨è°ˆå¦‚ä½•è§„é¿è¿‡åº¦ä½¿ç”¨ Spring æ¡†æ¶çŠ¯ä¸‹çš„é”™è¯¯ã€‚æ¯”å¦‚ä¸è¦ä½¿ç”¨åŸºäºå­—æ®µçš„æ³¨å…¥ï¼Œä¹Ÿä¸è¦ä¾èµ–äº ApplicationContext è·å–ç›¸åº”çš„ä¾èµ–ï¼Œè¿™äº›åšæ³•éƒ½ä¼šè®©åŸæœ¬ç®€å•çš„æµ‹è¯•å˜å¾—å¤æ‚ã€‚</p><p>å¦‚æœä»Šå¤©çš„å†…å®¹ä½ åªèƒ½è®°ä½ä¸€ä»¶äº‹ï¼Œé‚£è¯·è®°ä½ï¼š<strong>ä¸šåŠ¡ä»£ç ä¸è¦è¿‡åº¦ä¾èµ–äºæ¡†æ¶ã€‚</strong></p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©æˆ‘ä»¬çš„é‡ç‚¹æ˜¯é”™è¯¯ä½¿ç”¨äº†æ¡†æ¶ï¼Œä½ åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œé‡åˆ°è¿‡åº¦ä½¿ç”¨æ¡†æ¶ç‰¹æ€§ï¼Œåè€Œè®©ä»£ç é™·å…¥éš¾ä»¥è°ƒæ•´çš„å›°å¢ƒå—ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„ç»éªŒã€‚</p>","neighbors":{"left":{"article_title":"12 | å®æˆ˜ï¼šå°† ToDo åº”ç”¨æ‰©å±•ä¸ºä¸€ä¸ª REST æœåŠ¡","id":412830},"right":{"article_title":"14 | åœ¨ Spring é¡¹ç›®å¦‚ä½•è¿›è¡Œé›†æˆæµ‹è¯•ï¼Ÿ","id":414448}},"comments":[{"had_liked":false,"id":310567,"user_name":"é‚“å¿—å›½","can_delete":false,"product_type":"c1","uid":1043844,"ip_address":"","ucode":"380AE67ED7B9D7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/84/0b8e2d25.jpg","comment_is_top":false,"comment_ctime":1630748166,"is_pvip":false,"replies":[{"id":"112544","content":"å¤šè°¢è¡¥å……","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1630817507,"ip_address":"","comment_id":310567,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48875388422","product_id":100085101,"comment_content":"æ„é€ å‡½æ•°ä¸å†™autowireä¹Ÿèƒ½ä¾èµ–æ³¨å…¥","like_count":12,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526277,"discussion_content":"å¤šè°¢è¡¥å……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630817507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321239,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1636722404,"is_pvip":false,"replies":[{"id":"116699","content":"å…¶å®å°±å·®ä¸€ç‚¹ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1636815421,"ip_address":"","comment_id":321239,"utype":1}],"discussion_count":4,"race_medal":0,"score":"18816591588","product_id":100085101,"comment_content":"ä¸€ç›´é”™è¯¯ä½¿ç”¨å­—æ®µæ³¨å…¥ï¼Œæ‰€ä»¥æ„Ÿè§‰å•å…ƒæµ‹è¯•éå¸¸éš¾","like_count":5,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530249,"discussion_content":"å…¶å®å°±å·®ä¸€ç‚¹ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636815421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2556910,"avatar":"https://static001.geekbang.org/account/avatar/00/27/03/ee/7bd2b994.jpg","nickname":"èˆå¤§å®¶ä¿å°ä½³","note":"","ucode":"6387EF881816C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580116,"discussion_content":"å¦‚æœä»¥å‰ä½¿ç”¨çš„æ—¶åŸºäºå­—æ®µçš„æ³¨å…¥ï¼Œé‚£ä¹ˆå•å…ƒæµ‹è¯•æ—¶ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨org.springframework.test.util.ReflectionTestUtilsï¼Œé€šè¿‡åå°„ï¼Œæ³¨å…¥ä¾èµ–ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1657877571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2556910,"avatar":"https://static001.geekbang.org/account/avatar/00/27/03/ee/7bd2b994.jpg","nickname":"èˆå¤§å®¶ä¿å°ä½³","note":"","ucode":"6387EF881816C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580135,"discussion_content":"è°¢è°¢ï¼Œç°åœ¨å¤§å¤šæ”¹æˆæ„é€ å‡½æ•°æ³¨å…¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657902800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":580116,"ip_address":""},"score":580135,"extra":""},{"author":{"id":1183703,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0f/d7/31d07471.jpg","nickname":"ç‰›å¹´æ¦´è²","note":"","ucode":"230C076193C6C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2556910,"avatar":"https://static001.geekbang.org/account/avatar/00/27/03/ee/7bd2b994.jpg","nickname":"èˆå¤§å®¶ä¿å°ä½³","note":"","ucode":"6387EF881816C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591029,"discussion_content":"è¿™æ˜¯ä¸ªå¥½åŠæ³•ï¼Œä»¥å‰é‡åˆ°ä½¿ç”¨@Autowiredæ³¨å…¥çš„æ—¶å€™ï¼Œåˆå»åŠ äº†ä¸ªsetterï¼ŒğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666233359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":580116,"ip_address":"åŒ—äº¬"},"score":591029,"extra":""}]}]},{"had_liked":false,"id":310052,"user_name":"è”¡å¥","can_delete":false,"product_type":"c1","uid":1184625,"ip_address":"","ucode":"2846E2C3CE60D9","user_header":"https://static001.geekbang.org/account/avatar/00/12/13/71/887f0c83.jpg","comment_is_top":false,"comment_ctime":1630472367,"is_pvip":false,"replies":[{"id":"112393","content":"ä½ è¯´å¾—å¯¹ï¼Œä»å•å…ƒæµ‹è¯•çš„è§’åº¦ï¼Œä¸ä¾èµ–äºSpringæ˜¯æœ€å¥½çš„æµ‹è¯•é€‰æ‹©ã€‚ä¾èµ–äºSpringå±äºé›†æˆæµ‹è¯•ï¼Œæ˜¯ä¸‹ä¸€è®²çš„å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1630545532,"ip_address":"","comment_id":310052,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14515374255","product_id":100085101,"comment_content":"è€å¸ˆ,spring åº”ç”¨ä¸­ä¾èµ–å¤ªå¤šï¼Œæ¯æ¬¡å¯åŠ¨éƒ½éœ€è¦å‡ åˆ†é’Ÿï¼Œå¦‚ä½•ä¿è¯æµ‹è¯•ã€‚ä¸ºäº†å‡å°‘å¯åŠ¨æ—¶é—´ï¼Œæ­¥å­éƒ½ä¼šè¿ˆå¤§äº†ï¼Œå¯¼è‡´ä¸€äº›é€»è¾‘éƒ½ä¸ä¼šå†™æµ‹è¯•ã€‚æœ€åå°±æ”¾å¼ƒæµ‹è¯•ã€‚","like_count":4,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526113,"discussion_content":"ä½ è¯´å¾—å¯¹ï¼Œä»å•å…ƒæµ‹è¯•çš„è§’åº¦ï¼Œä¸ä¾èµ–äºSpringæ˜¯æœ€å¥½çš„æµ‹è¯•é€‰æ‹©ã€‚ä¾èµ–äºSpringå±äºé›†æˆæµ‹è¯•ï¼Œæ˜¯ä¸‹ä¸€è®²çš„å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630545532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310014,"user_name":"æˆ‘çš„åº·åº·","can_delete":false,"product_type":"c1","uid":1501436,"ip_address":"","ucode":"E7E2C969A91F8C","user_header":"https://static001.geekbang.org/account/avatar/00/16/e8/fc/4d84560f.jpg","comment_is_top":false,"comment_ctime":1630457672,"is_pvip":false,"replies":[{"id":"112307","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1630458978,"ip_address":"","comment_id":310014,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14515359560","product_id":100085101,"comment_content":"è€å¸ˆï¼Œé‚£å¹³å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæ˜¯ä¸æ¨èç”¨åŸºäºå­—æ®µæ³¨å…¥ è€Œæ˜¯æ¨èç”¨åŸºäºæ„é€ æ–¹æ³•æ³¨å…¥å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526100,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630458978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327822,"user_name":"null","can_delete":false,"product_type":"c1","uid":1880003,"ip_address":"","ucode":"1B8F3E9B047E7D","user_header":"https://static001.geekbang.org/account/avatar/00/1c/af/c3/b213e913.jpg","comment_is_top":false,"comment_ctime":1640316959,"is_pvip":false,"replies":[{"id":"119841","content":"å¾ªç¯ä¾èµ–å…¶å®æ˜¯ä¸€ç§è®¾è®¡çš„å¤±è´¥ï¼Œåº”è¯¥å…ˆæ”¹å–„è®¾è®¡ï¼Œå†æ¥è®¾è®¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1258861","ctime":1640958903,"ip_address":"","comment_id":327822,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5935284255","product_id":100085101,"comment_content":"ä¸€äº›åœºæ™¯ä¸é€‚åˆä½¿ç”¨æ„é€ å™¨æ³¨å…¥çš„å‘¢ï¼Ÿæ¯”å¦‚å¾ªç¯ä¾èµ–ã€‚","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543137,"discussion_content":"å¾ªç¯ä¾èµ–å…¶å®æ˜¯ä¸€ç§è®¾è®¡çš„å¤±è´¥ï¼Œåº”è¯¥å…ˆæ”¹å–„è®¾è®¡ï¼Œå†æ¥è®¾è®¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640958903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1185259,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/eb/a2955dd6.jpg","nickname":"5%","note":"","ucode":"66E71A77A00923","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":549238,"discussion_content":"å¾ªç¯ä¾èµ–å’ŒDDDè®¾è®¡ä¸­çš„èšåˆæ ¹æ€æƒ³æ˜¯è¿èƒŒçš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643766656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":543137,"ip_address":""},"score":549238,"extra":""}]}]},{"had_liked":false,"id":312418,"user_name":"sylan215","can_delete":false,"product_type":"c1","uid":1019029,"ip_address":"","ucode":"5A2CF31BC69F40","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/95/4544d905.jpg","comment_is_top":false,"comment_ctime":1631792323,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5926759619","product_id":100085101,"comment_content":"æœ‰å¹¸åœ¨ Java1.5 çš„æ—¶ä»£å°±æ¥è§¦äº† Javaï¼Œé‚£æ—¶å€™ Java çš„ä¸‰ä¸ªæ–¹å‘æ˜¯ J2EEã€J2SEã€J2MEï¼Œåé¢ Spring æ¨ªç©ºå‡ºä¸–æ—¶ï¼Œæˆ‘å°±æ²¡æœ‰äº†è§£äº†ï¼Œä¸è¿‡æŒºè€å¸ˆè¿™ä¹ˆä¸€è¯´ï¼ŒçœŸçš„æ˜¯ä¸ªè½¬æŠ˜ç‚¹äº†ã€‚<br><br>è‡³äºæ¡†æ¶å¯¹æµ‹è¯•çš„æ”¯æŒï¼Œæˆ‘ä¹Ÿæœ‰è¿‡ä½“ä¼šï¼Œæ¯”å¦‚ Python é‡Œé¢çš„ Django æ¡†æ¶å¯¹æµ‹è¯•çš„æ”¯æŒå°±æ˜¯ç‰¹åˆ«å¥½ï¼Œæˆ‘å½“æ—¶å­¦ä¹ çš„ä¸€ä¸ªæ•™ç¨‹ï¼Œå°±æ˜¯ä¸€è¾¹è®²ä»£ç ï¼Œä¸€è¾¹å†™æµ‹è¯•ï¼Œæ¯«æ— è¿å’Œæ„Ÿã€‚<br><br>å½“ç„¶ï¼Œè€å¸ˆä¹Ÿè¯´äº†ï¼Œä¸è¦è¿‡åº¦ä¾èµ–æŸäº›ç‰¹æ€§ï¼Œæ‰€ä»¥æ€ä¹ˆæŠŠæ¡†æ¶ç‰¹æ€§ï¼Œé€‚åº¦åˆç†çš„è¿›è¡Œåˆ©ç”¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæŠ€æœ¯æ´»ã€‚","like_count":2},{"had_liked":false,"id":348310,"user_name":"if...else...","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1654951414,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654951414","product_id":100085101,"comment_content":"å¹³æ—¶åŒäº‹ï¼Œè¿˜æœ‰æˆ‘è‡ªå·±éƒ½æ˜¯åŸºäºå­—æ®µæ³¨å…¥çš„","like_count":0},{"had_liked":false,"id":348309,"user_name":"if...else...","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1654951338,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654951338","product_id":100085101,"comment_content":"ä¸šåŠ¡ä»£ç ä¸è¦è¿‡åº¦ä¾èµ–äºæ¡†æ¶ã€‚--è®°ä¸‹æ¥","like_count":0},{"had_liked":false,"id":347945,"user_name":"ğŸ˜š 46","can_delete":false,"product_type":"c1","uid":1433535,"ip_address":"","ucode":"EED0EBBBF80A43","user_header":"https://static001.geekbang.org/account/avatar/00/15/df/bf/96b50d1e.jpg","comment_is_top":false,"comment_ctime":1654595669,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654595669","product_id":100085101,"comment_content":"@MockBean å¯ä»¥è®¾ç½® Bean çš„è¡Œä¸ºå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":341725,"user_name":"èŠ±èŠ±å¤§è„¸çŒ«","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1649810207,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1649810207","product_id":100085101,"comment_content":"å› ä¸ºå­—æ®µæ³¨å…¥çš„é—®é¢˜ï¼Œå¯¼è‡´mockå¯¹è±¡å¾ˆéš¾ï¼Œåç»­å…¨éƒ¨è°ƒæ•´æˆäº†æ„é€ å™¨æ³¨å…¥ï¼Œå¦å¤–æˆ‘çš„è§‚å¿µæ˜¯å°½é‡å•å…ƒæµ‹è¯•ä¸éœ€è¦springbootçš„è¿è¡Œæ—¶ç¯å¢ƒä¾èµ–ï¼Œè¿™æ ·ä¼šä½¿å¾—å•å…ƒæµ‹è¯•ä¸çº¯ç²¹ï¼Œè¿˜éœ€è¦ä¾èµ–å¤–éƒ¨ç»„ä»¶å¯åŠ¨ç©æˆæ‰èƒ½è¿è¡Œ","like_count":1,"discussions":[{"author":{"id":1756909,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDe7Ep3YW87rib33lhErnnkEsdfOJUDlDgHDs9Nic88FHU8s2feX6preYqR46TDsOMW7Eib6ddUyr0A/132","nickname":"æˆ‘çˆ±æé’±","note":"","ucode":"CBB1DF3ACE1026","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567377,"discussion_content":"å­—æ®µæ³¨å…¥å¯¼è‡´å•å…ƒæµ‹è¯•å›°éš¾ï¼Ÿï¼Ÿï¼Ÿå›°éš¾åœ¨å“ªé‡Œï¼Ÿï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650897829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311393,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1631200232,"is_pvip":false,"replies":[{"id":"112847","content":"å°±æ˜¯ç”¨èµ·æ¥å®¹æ˜“ï¼Œæ‰å®¹æ˜“çŠ¯é”™è¯¯","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1631237290,"ip_address":"","comment_id":311393,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631200232","product_id":100085101,"comment_content":"ApplicationContextç”¨èµ·æ¥ç®€å•ï¼Œä¹‹åä¼šé¿å…","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526585,"discussion_content":"å°±æ˜¯ç”¨èµ·æ¥å®¹æ˜“ï¼Œæ‰å®¹æ˜“çŠ¯é”™è¯¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631237290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}