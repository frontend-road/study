{"id":197522,"title":"åŠ é¤ | éƒ¨åˆ†è¯¾åæ€è€ƒé¢˜ç­”æ¡ˆåˆé›†","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚è¿™ä¸€è®²æˆ‘ä¸ºä½ æ•´ç†äº†æœ¬ä¸“æ éƒ¨åˆ†è¯¾åæ€è€ƒé¢˜çš„ç­”æ¡ˆï¼Œç»™ä½ ä½œä¸ºå‚è€ƒã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/169263\">ç¬¬ 2 è®²</a></h2><p><strong>ä½ è§‰å¾—æ™ºèƒ½æŒ‡é’ˆåº”è¯¥æ»¡è¶³ä»€ä¹ˆæ ·çš„çº¿ç¨‹å®‰å…¨æ€§ï¼Ÿ</strong></p><p>ç­”ï¼šï¼ˆä¸æ˜¯çœŸæ­£çš„å›ç­”ï¼Œåªæ˜¯æè¿°ä¸€ä¸‹æ ‡å‡†ä¸­çš„æ™ºèƒ½æŒ‡é’ˆçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚ï¼‰</p><ol>\n<li>å¤šä¸ªä¸åŒçº¿ç¨‹åŒæ—¶è®¿é—®ä¸åŒçš„æ™ºèƒ½æŒ‡é’ˆï¼ˆä¸ç®¡æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼‰æ˜¯å®‰å…¨çš„ã€‚</li>\n<li>å¤šä¸ªä¸åŒçº¿ç¨‹åŒæ—¶è¯»å–åŒä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆæ˜¯å®‰å…¨çš„ã€‚</li>\n<li>å¤šä¸ªä¸åŒçº¿ç¨‹åœ¨åŒä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆä¸Šæ‰§è¡ŒåŸå­æ“ä½œï¼ˆ<code>atomic_load</code> ç­‰ï¼‰æ˜¯å®‰å…¨çš„ã€‚</li>\n<li>å¤šä¸ªä¸åŒçº¿ç¨‹æ ¹æ®åŒä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆåˆ›å»ºæ–°çš„æ™ºèƒ½æŒ‡é’ˆï¼ˆå¢åŠ å¼•ç”¨è®¡æ•°ï¼‰æ˜¯å®‰å…¨çš„ã€‚</li>\n<li>åªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹æœ€åä¼šï¼ˆåœ¨å¼•ç”¨è®¡æ•°è¡¨ç¤ºå·²ç»æ— å¼•ç”¨æ—¶ï¼‰è°ƒç”¨åˆ é™¤å‡½æ•°å»é”€æ¯å­˜å‚¨çš„å¯¹è±¡ã€‚</li>\n</ol><p>å…¶ä»–æ“ä½œæ½œåœ¨æ˜¯ä¸å®‰å…¨çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸åŒçš„çº¿ç¨‹å¯¹åŒä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆæ‰§è¡Œ <code>reset</code> ç­‰ä¿®æ”¹æ“ä½œã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/169268\">ç¬¬ 3 è®²</a></h2><p><strong>ä¸ºä»€ä¹ˆ <code>smart_ptr::operator=</code> å¯¹å·¦å€¼å’Œå³å€¼éƒ½æœ‰æ•ˆï¼Œè€Œä¸”ä¸éœ€è¦å¯¹ç­‰å·ä¸¤è¾¹æ˜¯å¦å¼•ç”¨åŒä¸€å¯¹è±¡è¿›è¡Œåˆ¤æ–­ï¼Ÿ</strong></p><p>ç­”ï¼šæˆ‘ä»¬ä½¿ç”¨å€¼ç±»å‹è€Œéå¼•ç”¨ç±»å‹ä½œä¸ºå½¢å‚ï¼Œè¿™æ ·å®å‚æ°¸è¿œä¼šè¢«ç§»åŠ¨ï¼ˆå³å€¼çš„æƒ…å†µï¼‰æˆ–å¤åˆ¶ï¼ˆå·¦å€¼çš„æƒ…å†µï¼‰ï¼Œä¸å¯èƒ½å’Œ <code>*this</code> å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/173167\">ç¬¬ 4 è®²</a></h2><p><strong>ä¸ºä»€ä¹ˆ <code>stack</code>ï¼ˆæˆ– <code>queue</code>ï¼‰çš„ <code>pop</code> å‡½æ•°è¿”å›ç±»å‹ä¸º <code>void</code>ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›å®¹å™¨çš„ <code>top</code>ï¼ˆæˆ– <code>front</code>ï¼‰æˆå‘˜ï¼Ÿ</strong></p><p>ç­”ï¼šè¿™æ˜¯ C++98 é‡Œã€è¿˜æ²¡æœ‰ç§»åŠ¨è¯­ä¹‰æ—¶çš„è®¾è®¡ã€‚å¦‚æœ <code>pop</code> è¿”å›å…ƒç´ ï¼Œè€Œå…ƒç´ æ‹·è´æ—¶å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œé‚£è¿™ä¸ªå…ƒç´ å°±ä¸¢å¤±äº†ã€‚å› è€Œå®¹å™¨è®¾è®¡æˆæœ‰åˆ†ç¦»çš„ <code>top</code>ï¼ˆæˆ– <code>front</code>ï¼‰å’Œ <code>pop</code> æˆå‘˜å‡½æ•°ï¼Œåˆ†åˆ«æ‰§è¡Œè®¿é—®å’Œå¼¹å‡ºçš„æ“ä½œã€‚</p><!-- [[[read_end]]] --><p>æœ‰ä¸€ç§å¯èƒ½çš„è®¾è®¡æ˜¯æŠŠæ¥å£æ”¹æˆ <code>void pop(T&)</code>ï¼Œè¿™å¢åŠ äº† <code>T</code> å¿…é¡»æ”¯æŒé»˜è®¤æ„é€ å’Œèµ‹å€¼çš„è¦æ±‚ï¼Œåœ¨å•çº¿ç¨‹ä¸ºä¸»çš„å¹´ä»£æ²¡æœ‰æ˜æ˜¾çš„å¥½å¤„ï¼Œåè€Œå¸¦æ¥äº†å¯¹ <code>T</code> çš„é¢å¤–è¦æ±‚ã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/174434\">ç¬¬ 5 è®²</a></h2><p><strong>ä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†å®¹å™¨éƒ½æä¾›äº† <code>begin</code>ã€<code>end</code> ç­‰æ–¹æ³•ï¼Ÿ</strong></p><p>ç­”ï¼šå®¹å™¨æä¾›äº† <code>begin</code> å’Œ <code>end</code> æ–¹æ³•ï¼Œå°±æ„å‘³ç€æ˜¯å¯ä»¥è¿­ä»£ï¼ˆéå†ï¼‰çš„ã€‚å¤§éƒ¨åˆ†å®¹å™¨éƒ½å¯ä»¥ä»å¤´åˆ°å°¾éå†ï¼Œå› è€Œä¹Ÿå°±éœ€è¦æä¾›è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p><p><strong>ä¸ºä»€ä¹ˆå®¹å™¨æ²¡æœ‰ç»§æ‰¿ä¸€ä¸ªå…¬ç”¨çš„åŸºç±»ï¼Ÿ</strong></p><p>ç­”ï¼šC++ ä¸æ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå°¤å…¶åœ¨æ ‡å‡†å®¹å™¨çš„è®¾è®¡ä¸Šä¸»è¦ä½¿ç”¨å€¼è¯­ä¹‰ï¼Œä½¿ç”¨å…¬å…±åŸºç±»å®Œå…¨æ²¡æœ‰ç”¨å¤„ã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/176842\">ç¬¬ 7 è®²</a></h2><p><strong>ç›®å‰è¿™ä¸ªè¾“å…¥è¡Œè¿­ä»£å™¨çš„è¡Œä¸ºï¼Œåœ¨ä»€ä¹ˆæƒ…å†µä¸‹å¯èƒ½å¯¼è‡´æ„æ–™ä¹‹å¤–çš„åæœï¼Ÿ</strong></p><p>ç­”ï¼š</p><pre><code class=\"language-c++\">#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include \"istream_line_reader.h\"\n\nusing namespace std;\n\nint main()\n{\n  ifstream ifs{\"test.cpp\"};\n  istream_line_reader reader{ifs};\n  auto begin = reader.begin();\n  for (auto it = reader.begin();\n    it != reader.end(); ++it) {\n    cout &lt;&lt; *it &lt;&lt; '\\n';\n  }\n}\n</code></pre><p>ä»¥ä¸Šä»£ç ï¼Œå› ä¸º begin å¤šè°ƒç”¨äº†ä¸€æ¬¡ï¼Œè¾“å‡ºå°±å°‘äº†ä¸€è¡Œâ€¦â€¦</p><p><strong>è¯·å°è¯•ä¸€ä¸‹æ”¹è¿›è¿™ä¸ªè¾“å…¥è¡Œè¿­ä»£å™¨ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ¶ˆé™¤è¿™ç§æ„å¤–ã€‚å¦‚æœå¯ä»¥ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿå¦‚æœä¸å¯ä»¥ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</strong></p><p>ç­”ï¼šå¾ˆå›°éš¾ã€‚æ¯”å¦‚ï¼Œæ–‡ä»¶å¦‚æœä¸ºç©ºçš„è¯ï¼Œä»è¿­ä»£å™¨çš„è¡Œä¸ºè§’åº¦ï¼Œ<code>begin()</code> åº”è¯¥ç­‰äº <code>end()</code>â€”â€”ä¸é¢„å…ˆè¯»å–ä¸€æ¬¡çš„è¯ï¼Œå°±æ— æ³•è·çŸ¥è¿™ä¸ªç»“æœã€‚è¿™æ ·çš„æ”¹é€ æ€»ä½“çœ‹èµ·æ¥å¾ˆä¸å€¼ï¼Œå› æ­¤ä¸€èˆ¬éƒ½ä¸ä¼šé€‰æ‹©è¿™æ ·åšã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/178940\">ç¬¬ 10 è®²</a></h2><p><strong>è¿™è®²é‡Œæˆ‘ä»¬æ²¡æœ‰æ·±å…¥è®¨è®ºèµ‹å€¼ï¼›è¯·ä½ æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœä¾‹å­é‡Œæ”¹æˆèµ‹å€¼ï¼Œä¼šæœ‰ä»€ä¹ˆæ ·çš„å˜åŒ–ï¼Ÿ</strong></p><p>ç­”ï¼šè¿”å›å¯¹è±¡éƒ¨åˆ†çš„è®¨è®ºæ²¡æœ‰å˜åŒ–ã€‚å¯¹è±¡çš„ç§»åŠ¨èµ‹å€¼æ“ä½œåº”å½“å®ç°æˆæ— å¼‚å¸¸ï¼Œä»¥ç¡®ä¿æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</p><p>è¿”å›å€¼ä¼˜åŒ–åœ¨èµ‹å€¼æƒ…å†µä¸‹ä¼šå¤±æ•ˆã€‚æ›´ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œé™¤ééœ€è¦æŒç»­æ›´æ–°æŸä¸ªå˜é‡ï¼Œæ¯”å¦‚åœ¨ <code>vector</code> å°¾éƒ¨è¿½åŠ æ•°æ®ï¼Œå°½é‡å¯¹å˜é‡è¿›è¡Œä¸€æ¬¡æ€§èµ‹å€¼ã€ä¸åç»­ä¿®æ”¹ã€‚è¿™æ ·çš„ä»£ç æ›´å®¹æ˜“æ¨ç†ï¼Œæ›´ä¸å®¹æ˜“åœ¨åç»­ä¿®æ”¹ä¸­å‡ºé”™ï¼Œä¹Ÿæ›´èƒ½è®©ç¼–è¯‘å™¨åšï¼ˆè¿”å›å€¼ï¼‰ä¼˜åŒ–ã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/179357\">ç¬¬ 11 è®²</a></h2><p><strong>ä¸ºä»€ä¹ˆè¯´ UTF-32 å¤„ç†ä¼šæ¯”è¾ƒç®€å•ï¼Ÿ</strong></p><p>ç­”ï¼šUTF-32 ä¸‹ï¼Œä¸€ä¸ªå­—ç¬¦å°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å¤„ç†å•ä½ï¼Œä¸€èˆ¬ä¸ä¼šå‡ºç°ä¸€ä¸ªå­—ç¬¦è·¨å¤šä¸ªå¤„ç†å•ä½çš„æƒ…å†µï¼ˆUTF-8 å’Œ UTF-16 ä¸‹ä¼šå‘ç”Ÿï¼‰ã€‚</p><p><strong>ä½ çŸ¥é“ä»€ä¹ˆæƒ…å†µä¸‹ UTF-32 ä¹Ÿå¹¶ä¸é‚£ä¹ˆç®€å•å—ï¼Ÿ</strong></p><p>ç­”ï¼šUnicode ä¸‹æœ‰æ‰€è°“çš„ä¿®é¥°å­—ç¬¦ï¼Œç”¨æ¥ä¿®é¥°å‰ä¸€ä¸ªå­—ç¬¦ã€‚æŒ‰ Unicode çš„å¤„ç†è§„åˆ™ï¼Œè¿™äº›å­—ç¬¦åº”è¯¥å’ŒåŸºæœ¬å­—ç¬¦ä¸€èµ·å¤„ç†ï¼ˆå¦‚æ–­è¡Œä¹‹ç±»ï¼‰ã€‚æ‰€ä»¥ UTF-32 ä¸‹ä¹Ÿä¸å¯ä»¥åœ¨ä»»æ„å•ä½å¤„ç²—æš´æ–­å¼€å¤„ç†ã€‚</p><p><strong>å“ªç§ UTF ç¼–ç æ–¹å¼ç©ºé—´å­˜å‚¨æ•ˆç‡æ¯”è¾ƒé«˜ï¼Ÿ</strong></p><p>ç­”ï¼šè§†å­˜å‚¨çš„å†…å®¹è€Œå®šã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœå†…å®¹ä»¥ ASCII ä¸ºä¸»ï¼ˆå¦‚æºä»£ç ï¼‰ï¼Œé‚£ UTF-8 æ•ˆç‡æœ€é«˜ã€‚å¦‚æœå†…å®¹ä»¥ä¸€èˆ¬çš„ä¸­æ–‡æ–‡æœ¬ä¸ºä¸»ï¼Œé‚£ UTF-16 æ•ˆç‡æœ€é«˜ã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/179363\">ç¬¬ 12 è®²</a></h2><p><strong>ä¸ºä»€ä¹ˆå¹¶éæ‰€æœ‰çš„è¯­è¨€éƒ½æ”¯æŒè¿™äº›ä¸åŒçš„å¤šæ€æ–¹å¼ï¼Ÿ</strong></p><p>ç­”ï¼šæ’é™¤è®¾è®¡ç¼ºé™·çš„æƒ…å†µï¼Œè¯­è¨€æ”¯æŒå“ªäº›å¤šæ€æ–¹å¼ï¼ŒåŸºæœ¬ä¸Šå–å†³äºè¯­è¨€æœ¬èº«åœ¨ç±»å‹æ–¹é¢çš„ç‰¹æ€§ã€‚</p><p>ä»¥ Python ä¸ºä¾‹ï¼Œå®ƒæ˜¯åŠ¨æ€ç±»å‹çš„è¯­è¨€ã€‚æ‰€ä»¥å®ƒä¸ä¼šæœ‰çœŸæ­£çš„é™æ€å¤šæ€ã€‚ä½†å’Œé™æ€ç±»å‹çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸åŒï¼Œå®ƒçš„è¿è¡ŒæœŸå¤šæ€ä¸éœ€è¦ç»§æ‰¿ã€‚æ²¡æœ‰å‚æ•°åŒ–å¤šæ€åˆçœ‹æ˜¯ä¸ªç¼ºé™·ï¼Œä½†ç”±äº Python çš„åŠ¨æ€å‚æ•°ç³»ç»Ÿå…è®¸é»˜è®¤å‚æ•°å’Œå¯å˜å‚æ•°ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå‚æ•°åŒ–å¤šæ€èƒ½åšå¾—åˆ°è€Œ Python åšä¸åˆ°çš„äº‹ã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/185189\">ç¬¬ 17 è®²</a></h2><p><strong>æƒ³ä¸€æƒ³ï¼Œä½ å¦‚ä½•å¯ä»¥å®ç°ä¸€ä¸ªæƒ°æ€§çš„è¿‡æ»¤å™¨ï¼Ÿ</strong></p><p>ç­”ï¼š</p><pre><code class=\"language-c++\">#include &lt;iterator&gt;\n\nusing namespace std;\n\ntemplate &lt;typename I, typename F&gt;\nclass filter_view {\npublic:\n  class iterator {\n  public:\n    typedef ptrdiff_t\n      difference_type;\n    typedef\n      typename iterator_traits&lt;\n        I&gt;::value_type value_type;\n    typedef\n      typename iterator_traits&lt;\n        I&gt;::pointer pointer;\n    typedef\n      typename iterator_traits&lt;\n        I&gt;::reference reference;\n    typedef forward_iterator_tag\n      iterator_category;\n\n    iterator(I current, I end, F cond)\n      : current_(current)\n      , end_(end)\n      , cond_(cond)\n    {\n      if (current_ != end_ &amp;&amp;\n          !cond_(*current_)) {\n        ++*this;\n      }\n    }\n    iterator&amp; operator++()\n    {\n      while (current_ != end_) {\n        ++current_;\n        if (cond_(*current_)) {\n          break;\n        }\n      }\n      return *this;\n    }\n    iterator operator++(int)\n    {\n      auto temp = *this;\n      ++*this;\n      return temp;\n    }\n    reference operator*() const\n    {\n      return *current_;\n    }\n    pointer operator-&gt;() const\n    {\n      return &amp;*current_;\n    }\n\n    bool operator==(const iterator&amp; rhs)\n    {\n      return current_ == rhs.current_;\n    }\n    bool operator!=(const iterator&amp; rhs)\n    {\n      return !operator==(rhs);\n    }\n\n  private:\n    I current_;\n    I end_;\n    F cond_;\n  };\n  filter_view(I begin, I end,\n              F cond)\n    : begin_(begin)\n    , end_(end)\n    , cond_(cond)\n  {}\n  iterator begin() const\n  {\n    return iterator(begin_, end_, cond_);\n  }\n  iterator end() const\n  {\n    return iterator(end_, end_, cond_);\n  }\n\nprivate:\n  I begin_;\n  I end_;\n  F cond_;\n};\n</code></pre><h2><a href=\"https://time.geekbang.org/column/article/185899\">ç¬¬ 18 è®²</a></h2><p><strong>æˆ‘å±•ç¤ºäº† <code>compose</code> å¸¦ä¸€ä¸ªæˆ–æ›´å¤šå‚æ•°çš„æƒ…å†µã€‚ä½ è§‰å¾— <code>compose</code> ä¸å¸¦ä»»ä½•å‚æ•°è¯¥å¦‚ä½•å®šä¹‰ï¼Ÿå®ƒæœ‰æ„ä¹‰å—ï¼Ÿ</strong></p><p>ç­”ï¼š</p><pre><code class=\"language-c++\">inline auto compose()\n{\n    return [](auto&amp;&amp; x) -&gt; decltype(auto)\n    {\n        return std::forward&lt;decltype(x)&gt;(x);\n    };\n}\n</code></pre><p>è¿™ä¸ªå‡½æ•°æŠŠå‚æ•°åŸå°ä¸åŠ¨åœ°ä¼ å›ã€‚å®ƒçš„æ„ä¹‰ç›¸å½“äºåŠ æ³•é‡Œçš„ 0ï¼Œä¹˜æ³•é‡Œçš„ 1ã€‚</p><p>åœ¨æ™®é€šçš„åŠ æ³•é‡Œï¼Œä½ å¯èƒ½ä¸å¤ªéœ€è¦ 0ï¼›ä½†åœ¨ä¸€ä¸ªåšåŠ æ³•çš„åœ°æ–¹ï¼Œå¦‚æœåˆ«äººæƒ³å‘Šè¯‰ä½ ä¸è¦åšä»»ä½•æ“ä½œï¼Œä¼ ç»™ä½ ä¸€ä¸ª 0 æ˜¯æœ€ç®€å•çš„åšæ³•ã€‚</p><p><strong>æœ‰æ²¡æœ‰å¯èƒ½ä¸ç”¨ <code>index_sequence</code> æ¥åˆå§‹åŒ– <code>bit_count</code>ï¼Ÿå¦‚æœè¡Œï¼Œåº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ</strong></p><p>ç­”ï¼šå¯ä»¥ï¼Œä½†è¿™é‡Œæœ‰ä¸ªå°é™·é˜±ï¼Œç›®å‰ constexpr è¦æ±‚åœ¨æ„é€ æ—¶ç›´æ¥åˆå§‹åŒ–å¯¹è±¡çš„å†…å®¹ã€‚</p><pre><code class=\"language-c++\">template &lt;size_t N&gt;\nstruct bit_count_t {\n  constexpr bit_count_t()\n  {\n    for (auto i = 0U; i &lt; N; ++i) {\n      count[i] = count_bits(i);\n    }\n  }\n  unsigned char count[N]{};\n};\n\nconstexpr bit_count_t&lt;256&gt;\n  bit_count;\n</code></pre><p>ä¹Ÿå¯ä»¥è€ƒè™‘æ”¹ç”¨ <code>std::array</code>ï¼š</p><pre><code class=\"language-c++\">std::array&lt;char, N&gt; count{};\n</code></pre><p>ä½¿ç”¨ <code>std::array</code> çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸å†éœ€è¦ <code>bit_count_t</code> ç»“æ„ï¼Œå› ä¸ºå¯ä»¥è®© <code>get_bit_count</code> ç›´æ¥è¿”å›ä¸€ä¸ª <code>std::array&lt;char, 256&gt;</code>ï¼ˆè¿”å› <code>char [256]</code> åˆ™ä¸å¯è¡Œï¼‰ã€‚</p><p>åˆ°äº† C++20ï¼Œå…è®¸ constexpr å¯¹è±¡é‡Œå­˜åœ¨å¹³å‡¡é»˜è®¤æ„é€ çš„æˆå‘˜ä¹‹åï¼Œå°±å¯ä»¥å»æ‰æ•°ç»„å£°æ˜åçš„é‚£ä¸ªçœ‹ä¼¼å¤šä½™çš„åˆå§‹åŒ–å™¨ <code>{}</code> äº†â€”â€”ä½†ä½ ä»éœ€åœ¨åé¢åˆå§‹åŒ–æ‰€æœ‰çš„æˆå‘˜ã€‚</p><p><strong>ä½œä¸ºä¸€ä¸ªæŒ‘æˆ˜ï¼Œä½ èƒ½è‡ªè¡Œå®ç°å‡º <code>make_integer_sequence</code> å—ï¼Ÿ</strong></p><p>ç­” 1ï¼š</p><pre><code class=\"language-c++\">template &lt;class T, T... Ints&gt;\nstruct integer_sequence {};\n\ntemplate &lt;class T&gt;\nstruct integer_sequence_ns {\n  template &lt;T N, T... Ints&gt;\n  struct integer_sequence_helper {\n    using type =\n      typename integer_sequence_helper&lt;\n        N - 1, N - 1,\n        Ints...&gt;::type;\n  };\n\n  template &lt;T... Ints&gt;\n  struct integer_sequence_helper&lt;\n    0, Ints...&gt; {\n    using type =\n      integer_sequence&lt;T, Ints...&gt;;\n  };\n};\n\ntemplate &lt;class T, T N&gt;\nusing make_integer_sequence =\n  typename integer_sequence_ns&lt;T&gt;::\n    template integer_sequence_helper&lt;\n      N&gt;::type;\n</code></pre><p>å¦‚æœä¸€å¼€å§‹å†™æˆ <code>template &lt;class T, T N, T... Ints&gt; struct integer_sequence_helper</code> çš„è¯ï¼Œå°±ä¼šé‡åˆ°é”™è¯¯â€œnon-type template argument specializes a template parameter with dependent type â€˜Tâ€™â€ï¼ˆéç±»å‹çš„æ¨¡æ¿å®å‚ç‰¹åŒ–äº†ä¸€ä¸ªä½¿ç”¨ä¾èµ–ç±»å‹çš„â€˜Tâ€™çš„æ¨¡æ¿å½¢å‚ï¼‰ã€‚è¿™æ˜¯ç›®å‰çš„ C++ æ ‡å‡†æ‰€ä¸å…è®¸çš„å†™æ³•ï¼Œæ”¹å†™æˆåµŒå¥—ç±»å½¢å¼å¯ä»¥ç»•è¿‡è¿™ä¸ªé—®é¢˜ã€‚</p><p>ç­” 2ï¼š</p><pre><code class=\"language-c++\">template &lt;class T, T... Ints&gt;\nstruct integer_sequence {};\n\ntemplate &lt;class T, T N, T... Is&gt;\nauto make_integer_sequence_impl()\n{\n  if constexpr (N == 0) {\n    return integer_sequence&lt;\n      T, Is...&gt;();\n  } else {\n    return make_integer_sequence_impl&lt;\n      T, N - 1, N - 1, Is...&gt;();\n  }\n}\n\ntemplate &lt;class T, T N&gt;\nusing make_integer_sequence =\n  decltype(\n    make_integer_sequence_impl&lt;\n      T, N&gt;());\n</code></pre><p>è¿™åˆæ˜¯ä¸€ä¸ª <code>constexpr</code> èƒ½ç®€åŒ–è¡¨è¾¾çš„ä¾‹å­ã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/186689\">ç¬¬ 19 è®²</a></h2><p><strong>å¹¶å‘ç¼–ç¨‹ä¸­å“ªäº›æƒ…å†µä¸‹ä¼šå‘ç”Ÿæ­»é”ï¼Ÿ</strong></p><p>ç­”ï¼šå¤šä¸ªçº¿ç¨‹é‡Œï¼Œå¦‚æœæ²¡æœ‰æˆ–ä¸èƒ½äº‹å…ˆçº¦å®šè®¿é—®é¡ºåºï¼ŒåŒæ—¶è¿›è¡Œå¯é˜»å¡çš„èµ„æºè®¿é—®ï¼Œè®¿é—®é¡ºåºå¯ä»¥å½¢æˆä¸€ä¸ªç¯ï¼Œå°±ä¼šå¼•å‘æ­»é”ã€‚</p><p>å¯é˜»å¡çš„èµ„æºè®¿é—®å¯èƒ½åŒ…æ‹¬ï¼ˆä½†ä¸é™äºï¼‰ï¼š</p><ul>\n<li>äº’æ–¥é‡ä¸Šçš„ <code>lock</code> è°ƒç”¨</li>\n<li>æ¡ä»¶å˜é‡ä¸Šçš„ <code>wait</code> è°ƒç”¨</li>\n<li>å¯¹çº¿ç¨‹çš„ <code>join</code> è°ƒç”¨</li>\n<li>å¯¹ <code>future</code> çš„ <code>get</code> è°ƒç”¨</li>\n</ul><h2><a href=\"https://time.geekbang.org/column/article/193523\">ç¬¬ 27 è®²</a></h2><p><strong>ä½ è§‰å¾— C++ REST SDK çš„æ¥å£å¥½ç”¨å—ï¼Ÿå¦‚æœå¥½ç”¨ï¼ŒåŸå› æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä¸å¥½ç”¨ï¼Œä½ æœ‰ä»€ä¹ˆæ ·çš„æ”¹è¿›æ„è§ï¼Ÿ</strong></p><p>ç­”ï¼šä¸¾å‡ ä¸ªå¯èƒ½çš„æ”¹è¿›ç‚¹ã€‚</p><p>C++ REST SDK çš„ <code>uri::decode</code> æ¥å£è®¾è®¡æœ‰ä¸å°‘é—®é¢˜ï¼š</p><ul>\n<li>æœ€ä¸¥é‡çš„ï¼Œä¸èƒ½å¯¹ query string çš„ç­‰å·å·¦è¾¹çš„éƒ¨åˆ†è¿›è¡Œ <code>decode</code>ï¼›åªèƒ½å…ˆ <code>split_query</code> å† <code>decode</code>ï¼Œæ­¤æ—¶ç­‰å·å·¦è¾¹å·²ç»åœ¨ <code>map</code> é‡Œï¼Œä¸èƒ½ä¿®æ”¹â€”â€”è¦ä¿®æ”¹éœ€è¦å»ºä¸€ä¸ªæ–°çš„ <code>map</code>ã€‚</li>\n<li>ç›®å‰çš„å®ç°å¯¹â€œ+â€ä¸èƒ½é‡æ–°è¿˜åŸæˆç©ºæ ¼ã€‚</li>\n</ul><p>æ¢ä¸ªè¯´æ³•ï¼Œç›®å‰çš„æ¥å£èƒ½æ­£ç¡®å¤„ç†â€œ/search?q=query%20stringâ€è¿™æ ·çš„è¯·æ±‚ï¼Œä½†ä¸èƒ½æ­£ç¡®å¤„ç†â€œ/search?%71=query+stringâ€è¿™æ ·çš„è¯·æ±‚ã€‚</p><p>åº”å½“æœ‰ä¸€ä¸ª <code>split_query_and_decode</code> æ¥å£ï¼ŒåŒæ—¶æ‰§è¡Œåˆ†å‰²å’Œè§£ç ã€‚</p><p>å¦å¤–ï¼Œ<code>json</code> çš„æ¥å£ä¹Ÿè¿˜æ˜¯ä¸å¤Ÿå¥½ç”¨ï¼Œæœ€ä¸»è¦æ˜¯æ²¡æœ‰ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨çš„æ„é€ ã€‚æ„é€ å¤æ‚çš„ JSON ç»“æ„æœ‰ç‚¹å•°å—¦äº†ã€‚</p><p><code>fstream::open_ostream</code> ç¼ºçœè¡Œä¸ºè·Ÿ <code>std::ofstream</code> ä¸ä¸€æ ·åº”è¯¥æ˜¯ä¸ª bugã€‚åº”å½“è¦ä¹ˆä¿®æ­£æ¥å£ï¼ˆæ¥å£ç¼ºçœå‚æ•°é‡Œå¸¦ä¸Š <code>trunc</code>ï¼‰ï¼Œè¦ä¹ˆä¿®æ­£å®ç°ï¼ˆè·Ÿ <code>std::ofstream</code> ä¸€æ ·æŠŠ <code>out</code> å½“æˆ <code>out|trunc</code>ï¼‰ã€‚</p><h2><a href=\"https://time.geekbang.org/column/article/194005\">ç¬¬ 28 è®²</a></h2><p><strong>â€œæ¦‚å¿µâ€å¯ä»¥ä¸ºå¼€å‘å…·ä½“å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿåè¿‡æ¥ï¼Œè´Ÿé¢çš„å½±å“åˆå¯èƒ½ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>ç­”ï¼šå¯¹äºä»£ç ä¸¥è°¨ã€å…·æœ‰å½¢å¼åŒ–æ€ç»´çš„äººï¼Œâ€œæ¦‚å¿µâ€æ˜¯ä¸ªç¦éŸ³ï¼Œå®ƒä¸ä»…å¯ä»¥å¤§é‡æ¶ˆé™¤ SFINAE çš„ä½¿ç”¨ï¼Œè¿˜èƒ½ä»¥è¾ƒä¸ºç²¾ç¡®å’Œå½¢å¼åŒ–çš„å½¢å¼åœ¨ä»£ç é‡Œå†™å‡ºå¯¹ç±»å‹çš„è¦æ±‚ï¼Œä½¿å¾—ä»£ç å˜å¾—æ¸…æ™°ã€æ˜“è¯»ã€‚</p><p>ä½†åè¿‡æ¥è¯´ï¼Œâ€œæ¦‚å¿µâ€æ¯”é¸­å­ç±»å‹æ›´ä¸¥æ ¼ã€‚åœ¨ä»£ç åŠ ä¸Šæ¦‚å¿µçº¦æŸåï¼Œç›¸å…³ä»£ç å¾ˆå¯èƒ½éœ€è¦ä¿®æ”¹æ‰èƒ½æ»¡è¶³æ¦‚å¿µçš„è¦æ±‚ï¼Œå³ä½¿ä¹‹å‰åœ¨å®é™…ä½¿ç”¨ä¸­å¯èƒ½å·²ç»å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚ä»è¿­ä»£å™¨çš„è§’åº¦ï¼Œå®é™…ä½¿ç”¨ä¸­æœ€å°åŠŸèƒ½é›†æ˜¯æ„é€ ã€å¯å¤åˆ¶ã€<code>*</code>ã€å‰ç½® <code>++</code>ã€ä¸ sentinel ç±»å‹å¯¹è±¡çš„ <code>!=</code>ï¼ˆå•ä¸€å½¢å¼ï¼‰ã€‚è€Œä¸ºäº†æ»¡è¶³è¿­ä»£å™¨æ¦‚å¿µï¼Œåˆ™è¦é¢å¤–ç¡®ä¿æ»¡è¶³ä»¥ä¸‹å„ç‚¹ï¼š</p><ul>\n<li>å¯é»˜è®¤åˆå§‹åŒ–</li>\n<li>åœ¨ iterator ç±»å‹å’Œ sentinel ç±»å‹ä¹‹é—´ï¼Œéœ€è¦å®šä¹‰å®Œæ•´çš„å››ä¸ª <code>==</code> å’Œ <code>!=</code> è¿ç®—ç¬¦</li>\n<li>å®šä¹‰è¿­ä»£å™¨çš„æ ‡å‡†å†…éƒ¨ç±»å‹ï¼Œå¦‚ <code>difference_type</code> ç­‰</li>\n</ul><p>ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„å…¨éƒ¨å†…å®¹äº†ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœä½ æœ‰æ›´å¤šé—®é¢˜ï¼Œè¿˜æ˜¯è¯·ä½ åœ¨ç•™è¨€åŒºä¸­æå‡ºï¼Œæˆ‘ä¼šä¸€ä¸€è§£ç­”ã€‚</p>","comments":[{"had_liked":false,"id":177922,"user_name":"æ™šé£Â·å’Œç…¦","can_delete":false,"product_type":"c1","uid":1236047,"ip_address":"","ucode":"0B1DB8F437A4B2","user_header":"","comment_is_top":false,"comment_ctime":1581533033,"is_pvip":false,"replies":[{"id":69116,"content":"å®ç°ï¼Ÿä¸å¤ªæ˜ç™½ä½ çš„æ„æ€äº†ã€‚ç§æœ‰åªæ˜¯ç¼–è¯‘æ—¶çš„è®¿é—®æ§åˆ¶ï¼Œä¸æ˜¯è¿è¡Œæ—¶çš„ã€‚è€ŒCå®Œå…¨æ²¡æœ‰ç¼–è¯‘æ—¶çš„è®¿é—®æ§åˆ¶çš„æœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581607987,"ip_address":"","comment_id":177922,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œcè¯­è¨€å¯ä»¥é€šè¿‡å“ªäº›æ–¹å¼å®ç°c++ä¸­çš„ç§æœ‰æˆå‘˜å‘¢ï¼Ÿè°¢è°¢è€å¸ˆğŸ˜ƒğŸ˜ƒğŸ˜ƒ","like_count":1},{"had_liked":false,"id":177886,"user_name":"å¹»å¢ƒä¹‹æ¡¥","can_delete":false,"product_type":"c1","uid":1061517,"ip_address":"","ucode":"F9F4DD94CB554E","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/8d/91cd624b.jpg","comment_is_top":false,"comment_ctime":1581521783,"is_pvip":false,"replies":[{"id":69117,"content":"é—®é¢˜æ˜¯â€œå“ªç§ UTF ç¼–ç æ–¹å¼ç©ºé—´å­˜å‚¨æ•ˆç‡æ¯”è¾ƒé«˜â€ã€‚GBK ä¸èƒ½æ”¯æŒå¾ˆå¤šå…¶ä»–è¯­è¨€ï¼Œä¸åœ¨è€ƒè™‘èŒƒå›´å†…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581608596,"ip_address":"","comment_id":177886,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"&quot;å¦‚æœå†…å®¹ä»¥ä¸€èˆ¬çš„ä¸­æ–‡æ–‡æœ¬ä¸ºä¸»ï¼Œé‚£ UTF-16 æ•ˆç‡æœ€é«˜ã€‚&quot;\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸­æ–‡ä¸åº”è¯¥æ˜¯ GBKæ›´çœç©ºé—´å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483596,"discussion_content":"å®ç°ï¼Ÿä¸å¤ªæ˜ç™½ä½ çš„æ„æ€äº†ã€‚ç§æœ‰åªæ˜¯ç¼–è¯‘æ—¶çš„è®¿é—®æ§åˆ¶ï¼Œä¸æ˜¯è¿è¡Œæ—¶çš„ã€‚è€ŒCå®Œå…¨æ²¡æœ‰ç¼–è¯‘æ—¶çš„è®¿é—®æ§åˆ¶çš„æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581607987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":168489,"discussion_content":"ç”¨c++ä¸å¥½å˜›ï¼Œä½•è‹¦ä¸ºéš¾è‡ªå·±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581584674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1236047,"avatar":"","nickname":"æ™šé£Â·å’Œç…¦","note":"","ucode":"0B1DB8F437A4B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":168508,"discussion_content":"é¢è¯•å®˜å¿ƒé‡Œä¼šéª‚æˆ‘çš„ğŸ˜¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581586096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":168489,"ip_address":"","group_id":0},"score":168508,"extra":""}]}]},{"had_liked":false,"id":324537,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":2425556,"ip_address":"","ucode":"5E57A0FE948966","user_header":"https://static001.geekbang.org/account/avatar/00/25/02/d4/1e0bb504.jpg","comment_is_top":false,"comment_ctime":1638494646,"is_pvip":false,"replies":[{"id":117796,"content":"pop è¿”å›å…ƒç´ ï¼ŒæŒ‡çš„æ˜¯ pop åŒæ—¶å…·æœ‰è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ å’Œå°†å…¶å¼¹å‡ºä¸¤ä¸ªåŠŸèƒ½ã€‚ä¸¢å¤±äº†ï¼Œâ€œè¿”å›å…ƒç´ â€è¿™ä¸ªåŠŸèƒ½ä¸å°±å‡ºé—®é¢˜äº†ä¹ˆï¼Ÿ\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1638535495,"ip_address":"","comment_id":324537,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å¦‚æœ pop è¿”å›å…ƒç´ ï¼Œè€Œå…ƒç´ æ‹·è´æ—¶å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œé‚£è¿™ä¸ªå…ƒç´ å°±ä¸¢å¤±äº†ã€‚å› è€Œå®¹å™¨è®¾è®¡æˆæœ‰åˆ†ç¦»çš„ topï¼ˆæˆ– frontï¼‰å’Œ pop æˆå‘˜å‡½æ•°ï¼Œåˆ†åˆ«æ‰§è¡Œè®¿é—®å’Œå¼¹å‡ºçš„æ“ä½œã€‚ï½è€å¸ˆï¼Œæƒ³é—®ä¸‹è¿™ä¸ªæ‹·è´æ˜¯æŒ‡å°†POPè¿”å›çš„å€¼ç»™å…¶ä»–å…ƒç´ çš„æ—¶å€™å—ï¼Ÿä½†æ˜¯POPæœ¬æ¥å°±æ˜¯å¼¹å‡ºå…ƒç´ ï¼Œä¸¢å¤±åº”è¯¥ä¹Ÿæ²¡å…³ç³»çš„å§ï¼Œæœ‰ç‚¹ä¸æ˜¯å¾ˆç†è§£","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483583,"discussion_content":"é—®é¢˜æ˜¯â€œå“ªç§ UTF ç¼–ç æ–¹å¼ç©ºé—´å­˜å‚¨æ•ˆç‡æ¯”è¾ƒé«˜â€ã€‚GBK ä¸èƒ½æ”¯æŒå¾ˆå¤šå…¶ä»–è¯­è¨€ï¼Œä¸åœ¨è€ƒè™‘èŒƒå›´å†…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581608596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":169349,"discussion_content":"GBKä¸èƒ½è·¨å¹³å°ï¼Œå®¹æ˜“ä¹±ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581606988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285385,"user_name":"å´å’ç‚œ","can_delete":false,"product_type":"c1","uid":1645639,"ip_address":"","ucode":"8C24C10AEC779F","user_header":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","comment_is_top":false,"comment_ctime":1616767262,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"ç¬¬ 18 è®²ç¬¬ 2 é¢˜æœ‰ä¸€ä¸ª C++14&#47;17 é‡Œä¹Ÿèƒ½æ¥å—çš„è§£ï¼Œå°±æ˜¯è¦å…ˆåˆå§‹åŒ–æ•°ç»„ï¼Œç„¶åå†æ”¹å†™å…¶ä¸­çš„å†…å®¹ã€‚\n\næŠŠæ–‡ä¸­çš„ bit_count_t å®šä¹‰æ”¹æˆä¸‹é¢çš„å½¢å¼å³å¯ï¼ˆåŠ ä¸Šâ€œ{}â€ï¼‰ï¼š\n\ntemplate &lt;size_t N&gt;\nstruct bit_count_t {\n  constexpr bit_count_t()\n  {\n    for (auto i = 0U; i &lt; N; ++i) {\n      count[i] = count_bits(i);\n    }\n  }\n  unsigned char count[N]{};\n};\n\nâ€œunsigned char count[N]{};â€ä¹Ÿå¯ä»¥è€ƒè™‘æ”¹ç”¨ std::arrayï¼š\n\nstd::array&lt;char, N&gt; count{};\n\nä½¿ç”¨ std::array çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸å†éœ€è¦ bit_count_t ç»“æ„ï¼Œå› ä¸ºå¯ä»¥è®© get_bit_count ç›´æ¥è¿”å›ä¸€ä¸ª std::array&lt;char, 256&gt;ï¼ˆè¿”å› char [256] åˆ™ä¸å¯è¡Œï¼‰ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535757,"discussion_content":"pop è¿”å›å…ƒç´ ï¼ŒæŒ‡çš„æ˜¯ pop åŒæ—¶å…·æœ‰è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ å’Œå°†å…¶å¼¹å‡ºä¸¤ä¸ªåŠŸèƒ½ã€‚ä¸¢å¤±äº†ï¼Œâ€œè¿”å›å…ƒç´ â€è¿™ä¸ªåŠŸèƒ½ä¸å°±å‡ºé—®é¢˜äº†ä¹ˆï¼Ÿ\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638535495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177922,"user_name":"æ™šé£Â·å’Œç…¦","can_delete":false,"product_type":"c1","uid":1236047,"ip_address":"","ucode":"0B1DB8F437A4B2","user_header":"","comment_is_top":false,"comment_ctime":1581533033,"is_pvip":false,"replies":[{"id":69116,"content":"å®ç°ï¼Ÿä¸å¤ªæ˜ç™½ä½ çš„æ„æ€äº†ã€‚ç§æœ‰åªæ˜¯ç¼–è¯‘æ—¶çš„è®¿é—®æ§åˆ¶ï¼Œä¸æ˜¯è¿è¡Œæ—¶çš„ã€‚è€ŒCå®Œå…¨æ²¡æœ‰ç¼–è¯‘æ—¶çš„è®¿é—®æ§åˆ¶çš„æœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581607987,"ip_address":"","comment_id":177922,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œcè¯­è¨€å¯ä»¥é€šè¿‡å“ªäº›æ–¹å¼å®ç°c++ä¸­çš„ç§æœ‰æˆå‘˜å‘¢ï¼Ÿè°¢è°¢è€å¸ˆğŸ˜ƒğŸ˜ƒğŸ˜ƒ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483596,"discussion_content":"å®ç°ï¼Ÿä¸å¤ªæ˜ç™½ä½ çš„æ„æ€äº†ã€‚ç§æœ‰åªæ˜¯ç¼–è¯‘æ—¶çš„è®¿é—®æ§åˆ¶ï¼Œä¸æ˜¯è¿è¡Œæ—¶çš„ã€‚è€ŒCå®Œå…¨æ²¡æœ‰ç¼–è¯‘æ—¶çš„è®¿é—®æ§åˆ¶çš„æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581607987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":168489,"discussion_content":"ç”¨c++ä¸å¥½å˜›ï¼Œä½•è‹¦ä¸ºéš¾è‡ªå·±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581584674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1236047,"avatar":"","nickname":"æ™šé£Â·å’Œç…¦","note":"","ucode":"0B1DB8F437A4B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":168508,"discussion_content":"é¢è¯•å®˜å¿ƒé‡Œä¼šéª‚æˆ‘çš„ğŸ˜¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581586096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":168489,"ip_address":"","group_id":0},"score":168508,"extra":""}]}]},{"had_liked":false,"id":177886,"user_name":"å¹»å¢ƒä¹‹æ¡¥","can_delete":false,"product_type":"c1","uid":1061517,"ip_address":"","ucode":"F9F4DD94CB554E","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/8d/91cd624b.jpg","comment_is_top":false,"comment_ctime":1581521783,"is_pvip":false,"replies":[{"id":69117,"content":"é—®é¢˜æ˜¯â€œå“ªç§ UTF ç¼–ç æ–¹å¼ç©ºé—´å­˜å‚¨æ•ˆç‡æ¯”è¾ƒé«˜â€ã€‚GBK ä¸èƒ½æ”¯æŒå¾ˆå¤šå…¶ä»–è¯­è¨€ï¼Œä¸åœ¨è€ƒè™‘èŒƒå›´å†…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581608596,"ip_address":"","comment_id":177886,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"&quot;å¦‚æœå†…å®¹ä»¥ä¸€èˆ¬çš„ä¸­æ–‡æ–‡æœ¬ä¸ºä¸»ï¼Œé‚£ UTF-16 æ•ˆç‡æœ€é«˜ã€‚&quot;\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸­æ–‡ä¸åº”è¯¥æ˜¯ GBKæ›´çœç©ºé—´å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483583,"discussion_content":"é—®é¢˜æ˜¯â€œå“ªç§ UTF ç¼–ç æ–¹å¼ç©ºé—´å­˜å‚¨æ•ˆç‡æ¯”è¾ƒé«˜â€ã€‚GBK ä¸èƒ½æ”¯æŒå¾ˆå¤šå…¶ä»–è¯­è¨€ï¼Œä¸åœ¨è€ƒè™‘èŒƒå›´å†…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581608596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":169349,"discussion_content":"GBKä¸èƒ½è·¨å¹³å°ï¼Œå®¹æ˜“ä¹±ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581606988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324537,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":2425556,"ip_address":"","ucode":"5E57A0FE948966","user_header":"https://static001.geekbang.org/account/avatar/00/25/02/d4/1e0bb504.jpg","comment_is_top":false,"comment_ctime":1638494646,"is_pvip":false,"replies":[{"id":117796,"content":"pop è¿”å›å…ƒç´ ï¼ŒæŒ‡çš„æ˜¯ pop åŒæ—¶å…·æœ‰è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ å’Œå°†å…¶å¼¹å‡ºä¸¤ä¸ªåŠŸèƒ½ã€‚ä¸¢å¤±äº†ï¼Œâ€œè¿”å›å…ƒç´ â€è¿™ä¸ªåŠŸèƒ½ä¸å°±å‡ºé—®é¢˜äº†ä¹ˆï¼Ÿ\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1638535495,"ip_address":"","comment_id":324537,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å¦‚æœ pop è¿”å›å…ƒç´ ï¼Œè€Œå…ƒç´ æ‹·è´æ—¶å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œé‚£è¿™ä¸ªå…ƒç´ å°±ä¸¢å¤±äº†ã€‚å› è€Œå®¹å™¨è®¾è®¡æˆæœ‰åˆ†ç¦»çš„ topï¼ˆæˆ– frontï¼‰å’Œ pop æˆå‘˜å‡½æ•°ï¼Œåˆ†åˆ«æ‰§è¡Œè®¿é—®å’Œå¼¹å‡ºçš„æ“ä½œã€‚ï½è€å¸ˆï¼Œæƒ³é—®ä¸‹è¿™ä¸ªæ‹·è´æ˜¯æŒ‡å°†POPè¿”å›çš„å€¼ç»™å…¶ä»–å…ƒç´ çš„æ—¶å€™å—ï¼Ÿä½†æ˜¯POPæœ¬æ¥å°±æ˜¯å¼¹å‡ºå…ƒç´ ï¼Œä¸¢å¤±åº”è¯¥ä¹Ÿæ²¡å…³ç³»çš„å§ï¼Œæœ‰ç‚¹ä¸æ˜¯å¾ˆç†è§£","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535757,"discussion_content":"pop è¿”å›å…ƒç´ ï¼ŒæŒ‡çš„æ˜¯ pop åŒæ—¶å…·æœ‰è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ å’Œå°†å…¶å¼¹å‡ºä¸¤ä¸ªåŠŸèƒ½ã€‚ä¸¢å¤±äº†ï¼Œâ€œè¿”å›å…ƒç´ â€è¿™ä¸ªåŠŸèƒ½ä¸å°±å‡ºé—®é¢˜äº†ä¹ˆï¼Ÿ\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638535495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285385,"user_name":"å´å’ç‚œ","can_delete":false,"product_type":"c1","uid":1645639,"ip_address":"","ucode":"8C24C10AEC779F","user_header":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","comment_is_top":false,"comment_ctime":1616767262,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"ç¬¬ 18 è®²ç¬¬ 2 é¢˜æœ‰ä¸€ä¸ª C++14&#47;17 é‡Œä¹Ÿèƒ½æ¥å—çš„è§£ï¼Œå°±æ˜¯è¦å…ˆåˆå§‹åŒ–æ•°ç»„ï¼Œç„¶åå†æ”¹å†™å…¶ä¸­çš„å†…å®¹ã€‚\n\næŠŠæ–‡ä¸­çš„ bit_count_t å®šä¹‰æ”¹æˆä¸‹é¢çš„å½¢å¼å³å¯ï¼ˆåŠ ä¸Šâ€œ{}â€ï¼‰ï¼š\n\ntemplate &lt;size_t N&gt;\nstruct bit_count_t {\n  constexpr bit_count_t()\n  {\n    for (auto i = 0U; i &lt; N; ++i) {\n      count[i] = count_bits(i);\n    }\n  }\n  unsigned char count[N]{};\n};\n\nâ€œunsigned char count[N]{};â€ä¹Ÿå¯ä»¥è€ƒè™‘æ”¹ç”¨ std::arrayï¼š\n\nstd::array&lt;char, N&gt; count{};\n\nä½¿ç”¨ std::array çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸å†éœ€è¦ bit_count_t ç»“æ„ï¼Œå› ä¸ºå¯ä»¥è®© get_bit_count ç›´æ¥è¿”å›ä¸€ä¸ª std::array&lt;char, 256&gt;ï¼ˆè¿”å› char [256] åˆ™ä¸å¯è¡Œï¼‰ã€‚","like_count":0}]}