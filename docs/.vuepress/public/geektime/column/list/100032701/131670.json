{"id":131670,"title":"15 | æ€ä¹ˆè€æ˜¯å‡ºç°â€œåœ°å€å·²ç»è¢«ä½¿ç”¨â€ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç››å»¶æ•ï¼Œè¿™é‡Œæ˜¯ç½‘ç»œç¼–ç¨‹å®æˆ˜çš„ç¬¬15è®²ï¼Œæ¬¢è¿å›æ¥ã€‚</p><p>ä¸Šä¸€è®²æˆ‘ä»¬è®²åˆ°UDPä¹Ÿå¯ä»¥åƒTCPä¸€æ ·ï¼Œä½¿ç”¨connectæ–¹æ³•ï¼Œä»¥å¿«é€Ÿè·å–å¼‚æ­¥é”™è¯¯çš„ä¿¡æ¯ã€‚åœ¨ä»Šå¤©çš„å†…å®¹é‡Œï¼Œæˆ‘ä»¬å°†è®¨è®ºæœåŠ¡å™¨ç«¯ç¨‹åºé‡å¯æ—¶ï¼Œåœ°å€è¢«å ç”¨çš„åŸå› å’Œè§£å†³æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œç½‘ç»œç¼–ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨ç¨‹åºéœ€è¦ç»‘å®šæœ¬åœ°åœ°å€å’Œä¸€ä¸ªç«¯å£ï¼Œç„¶åå°±ç›‘å¬åœ¨è¿™ä¸ªåœ°å€å’Œç«¯å£ä¸Šï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥çš„åˆ°æ¥ã€‚åœ¨å®æˆ˜ä¸­ï¼Œä½ å¯èƒ½ä¼šç»å¸¸ç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå½“æœåŠ¡å™¨ç«¯ç¨‹åºé‡å¯ä¹‹åï¼Œæ€»æ˜¯ç¢°åˆ°â€œAddress in useâ€çš„æŠ¥é”™ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ç¨‹åºä¸èƒ½å¾ˆå¿«åœ°é‡å¯ã€‚é‚£ä¹ˆè¿™ä¸ªé—®é¢˜æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿæˆ‘ä»¬åˆè¯¥å¦‚ä½•é¿å…å‘¢ï¼Ÿ</p><p>ä»Šå¤©æˆ‘ä»¬å°±æ¥è®²ä¸€è®²è¿™ä¸ªâ€œåœ°å€å·²ç»è¢«ä½¿ç”¨â€çš„é—®é¢˜ã€‚</p><h2>ä»ä¾‹å­å¼€å§‹</h2><p>ä¸ºäº†å¼•å…¥è®¨è®ºï¼Œæˆ‘ä»¬ä»ä¹‹å‰è®²è¿‡çš„ä¸€ä¸ªTCPæœåŠ¡å™¨ç«¯ç¨‹åºå¼€å§‹è¯´èµ·ï¼š</p><pre><code>static int count;\n\nstatic void sig_int(int signo) {\n    printf(&quot;\\nreceived %d datagrams\\n&quot;, count);\n    exit(0);\n}\n\nint main(int argc, char **argv) {\n    int listenfd;\n    listenfd = socket(AF_INET, SOCK_STREAM, 0);\n\n    struct sockaddr_in server_addr;\n    bzero(&amp;server_addr, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    server_addr.sin_port = htons(SERV_PORT);\n\n    int rt1 = bind(listenfd, (struct sockaddr *) &amp;server_addr, sizeof(server_addr));\n    if (rt1 &lt; 0) {\n        error(1, errno, &quot;bind failed &quot;);\n    }\n\n    int rt2 = listen(listenfd, LISTENQ);\n    if (rt2 &lt; 0) {\n        error(1, errno, &quot;listen failed &quot;);\n    }\n\n    signal(SIGPIPE, SIG_IGN);\n\n    int connfd;\n    struct sockaddr_in client_addr;\n    socklen_t client_len = sizeof(client_addr);\n\n    if ((connfd = accept(listenfd, (struct sockaddr *) &amp;client_addr, &amp;client_len)) &lt; 0) {\n        error(1, errno, &quot;bind failed &quot;);\n    }\n\n    char message[MAXLINE];\n    count = 0;\n\n    for (;;) {\n        int n = read(connfd, message, MAXLINE);\n        if (n &lt; 0) {\n            error(1, errno, &quot;error read&quot;);\n        } else if (n == 0) {\n            error(1, 0, &quot;client closed \\n&quot;);\n        }\n        message[n] = 0;\n        printf(&quot;received %d bytes: %s\\n&quot;, n, message);\n        count++;\n    }\n}\n</code></pre><p>è¿™ä¸ªæœåŠ¡å™¨ç«¯ç¨‹åºç»‘å®šåˆ°ä¸€ä¸ªæœ¬åœ°ç«¯å£ï¼Œä½¿ç”¨çš„æ˜¯é€šé…åœ°å€ANYï¼Œå½“è¿æ¥å»ºç«‹ä¹‹åï¼Œä»è¯¥è¿æ¥ä¸­è¯»å–è¾“å…¥çš„å­—ç¬¦æµã€‚</p><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œä¹‹åæˆ‘ä»¬ä½¿ç”¨Telnetç™»å½•è¿™ä¸ªæœåŠ¡å™¨ï¼Œå¹¶åœ¨å±å¹•ä¸Šè¾“å…¥ä¸€äº›å­—ç¬¦ï¼Œä¾‹å¦‚ï¼šnetworkï¼Œgoodã€‚</p><p>å’Œæˆ‘ä»¬æœŸæœ›çš„ä¸€æ ·ï¼ŒæœåŠ¡å™¨ç«¯æ‰“å°å‡ºTelnetå®¢æˆ·ç«¯çš„è¾“å…¥ã€‚åœ¨Telnetç«¯å…³é—­è¿æ¥ä¹‹åï¼ŒæœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°EOFï¼Œä¹Ÿé¡ºåˆ©åœ°å…³é—­äº†è¿æ¥ã€‚æœåŠ¡å™¨ç«¯ä¹Ÿå¯ä»¥å¾ˆå¿«é‡å¯ï¼Œç­‰å¾…æ–°çš„è¿æ¥åˆ°æ¥ã€‚</p><!-- [[[read_end]]] --><pre><code> $./addressused \n received 9 bytes: network\n received 6 bytes: good\n client closed\n $./addressused\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ”¹å˜ä¸€ä¸‹è¿æ¥çš„å…³é—­é¡ºåºã€‚å’Œå‰é¢çš„è¿‡ç¨‹ä¸€æ ·ï¼Œå…ˆå¯åŠ¨æœåŠ¡å™¨ï¼Œå†ä½¿ç”¨Telnetä½œä¸ºå®¢æˆ·ç«¯ç™»å½•åˆ°æœåŠ¡å™¨ï¼Œåœ¨å±å¹•ä¸Šè¾“å…¥ä¸€äº›å­—ç¬¦ã€‚æ³¨æ„æ¥ä¸‹æ¥çš„ä¸åŒï¼Œæˆ‘ä¸ä¼šåœ¨Telnetç«¯å…³é—­è¿æ¥ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨Ctrl+Cçš„æ–¹å¼åœ¨æœåŠ¡å™¨ç«¯å…³é—­è¿æ¥ã€‚</p><pre><code>$telnet 127.0.0.1 9527\nnetwork\nbad\nConnection closed by foreign host.\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿æ¥å·²ç»è¢«å…³é—­ï¼ŒTelnetå®¢æˆ·ç«¯ä¹Ÿæ„ŸçŸ¥è¿æ¥å…³é—­å¹¶é€€å‡ºäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°è¯•é‡å¯æœåŠ¡å™¨ç«¯ç¨‹åºã€‚ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡ç«¯ç¨‹åºé‡å¯å¤±è´¥ï¼ŒæŠ¥é”™ä¿¡æ¯ä¸ºï¼š<strong>bind failed: Address already in use</strong>ã€‚</p><pre><code> $./addressused \n received 9 bytes: network\n received 6 bytes: good\n client closed\n $./addressused\n bind faied: Address already in use(98)\n</code></pre><h2>å¤ä¹ TIME_WAIT</h2><p>é‚£ä¹ˆï¼Œè¿™ä¸ªé”™è¯¯åˆ°åº•æ˜¯æ€ä¹ˆå‘ç”Ÿçš„å‘¢ï¼Ÿ</p><p>è¿˜è®°å¾—ç¬¬10ç¯‡æ–‡ç« é‡Œæåˆ°çš„TIME_WAITä¹ˆï¼Ÿå½“è¿æ¥çš„ä¸€æ–¹ä¸»åŠ¨å…³é—­è¿æ¥ï¼Œåœ¨æ¥æ”¶åˆ°å¯¹ç«¯çš„FINæŠ¥æ–‡ä¹‹åï¼Œä¸»åŠ¨å…³é—­è¿æ¥çš„ä¸€æ–¹ä¼šåœ¨TIME_WAITè¿™ä¸ªçŠ¶æ€é‡Œåœç•™ä¸€æ®µæ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´å¤§çº¦ä¸º2MSLã€‚å¦‚æœä½ å¯¹æ­¤æœ‰ç‚¹æ·¡å¿˜ï¼Œæ²¡æœ‰å…³ç³»ï¼Œæˆ‘åœ¨ä¸‹é¢æ”¾äº†ä¸€å¼ å›¾ï¼Œå¸Œæœ›ä¼šå”¤èµ·ä½ çš„è®°å¿†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/94/5f/945c60ae06d282dcc22ad3b868f1175f.png?wh=856*580\" alt=\"\"><br>\nå¦‚æœæˆ‘ä»¬æ­¤æ—¶ä½¿ç”¨netstatå»æŸ¥çœ‹æœåŠ¡å™¨ç¨‹åºæ‰€åœ¨ä¸»æœºçš„TIME_WAITçš„çŠ¶æ€è¿æ¥ï¼Œä½ ä¼šå‘ç°æœ‰ä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºç”Ÿæˆçš„TCPè¿æ¥ï¼Œå½“å‰æ­£å¤„äºTIME_WAITçŠ¶æ€ã€‚è¿™é‡Œ9527æ˜¯æœ¬åœ°ç›‘å¬ç«¯å£ï¼Œ36650æ˜¯telnetå®¢æˆ·ç«¯ç«¯å£ã€‚å½“ç„¶äº†ï¼ŒTelnetå®¢æˆ·ç«¯ç«¯å£æ¯æ¬¡ä¹Ÿä¼šä¸å°½ç›¸åŒã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/51/e1/5127adf94e564c13d6be86460d3317e1.png?wh=1684*952\" alt=\"\"><br>\né€šè¿‡æœåŠ¡å™¨ç«¯å‘èµ·çš„å…³é—­è¿æ¥æ“ä½œï¼Œå¼•èµ·äº†ä¸€ä¸ªå·²æœ‰çš„TCPè¿æ¥å¤„äºTME_WAITçŠ¶æ€ï¼Œæ­£æ˜¯è¿™ä¸ªTIME_WAITçš„è¿æ¥ï¼Œä½¿å¾—æœåŠ¡å™¨é‡å¯æ—¶ï¼Œç»§ç»­ç»‘å®šåœ¨127.0.0.1åœ°å€å’Œ9527ç«¯å£ä¸Šçš„æ“ä½œï¼Œè¿”å›äº†<strong>Address already in use</strong>çš„é”™è¯¯ã€‚</p><h2>é‡ç”¨å¥—æ¥å­—é€‰é¡¹</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªTCPè¿æ¥æ˜¯é€šè¿‡å››å…ƒç»„ï¼ˆæºåœ°å€ã€æºç«¯å£ã€ç›®çš„åœ°å€ã€ç›®çš„ç«¯å£ï¼‰æ¥å”¯ä¸€ç¡®å®šçš„ï¼Œå¦‚æœæ¯æ¬¡Telnetå®¢æˆ·ç«¯ä½¿ç”¨çš„æœ¬åœ°ç«¯å£éƒ½ä¸åŒï¼Œå°±ä¸ä¼šå’Œå·²æœ‰çš„å››å…ƒç»„å†²çªï¼Œä¹Ÿå°±ä¸ä¼šæœ‰TIME_WAITçš„æ–°æ—§è¿æ¥åŒ–èº«å†²çªçš„é—®é¢˜ã€‚</p><p>äº‹å®ä¸Šï¼Œå³ä½¿åœ¨å¾ˆå°çš„æ¦‚ç‡ä¸‹ï¼Œå®¢æˆ·ç«¯Telnetä½¿ç”¨äº†ç›¸åŒçš„ç«¯å£ï¼Œä»è€Œé€ æˆäº†æ–°è¿æ¥å’Œæ—§è¿æ¥çš„å››å…ƒç»„ç›¸åŒï¼Œåœ¨ç°ä»£Linuxæ“ä½œç³»ç»Ÿä¸‹ï¼Œä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå¤§çš„é—®é¢˜ï¼ŒåŸå› æ˜¯ç°ä»£Linuxæ“ä½œç³»ç»Ÿå¯¹æ­¤è¿›è¡Œäº†ä¸€äº›ä¼˜åŒ–ã€‚</p><p>ç¬¬ä¸€ç§ä¼˜åŒ–æ˜¯æ–°è¿æ¥SYNå‘ŠçŸ¥çš„åˆå§‹åºåˆ—å·ï¼Œä¸€å®šæ¯”TIME_WAITè€è¿æ¥çš„æœ«åºåˆ—å·å¤§ï¼Œè¿™æ ·é€šè¿‡åºåˆ—å·å°±å¯ä»¥åŒºåˆ«å‡ºæ–°è€è¿æ¥ã€‚</p><p>ç¬¬äºŒç§ä¼˜åŒ–æ˜¯å¼€å¯äº†tcp_timestampsï¼Œä½¿å¾—æ–°è¿æ¥çš„æ—¶é—´æˆ³æ¯”è€è¿æ¥çš„æ—¶é—´æˆ³å¤§ï¼Œè¿™æ ·é€šè¿‡æ—¶é—´æˆ³ä¹Ÿå¯ä»¥åŒºåˆ«å‡ºæ–°è€è¿æ¥ã€‚</p><p>åœ¨è¿™æ ·çš„ä¼˜åŒ–ä¹‹ä¸‹ï¼Œä¸€ä¸ªTIME_WAITçš„TCPè¿æ¥å¯ä»¥å¿½ç•¥æ‰æ—§è¿æ¥ï¼Œé‡æ–°è¢«æ–°çš„è¿æ¥æ‰€ä½¿ç”¨ã€‚</p><p>è¿™å°±æ˜¯é‡ç”¨å¥—æ¥å­—é€‰é¡¹ï¼Œé€šè¿‡ç»™å¥—æ¥å­—é…ç½®å¯é‡ç”¨å±æ€§ï¼Œå‘Šè¯‰æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œè¿™æ ·çš„TCPè¿æ¥å®Œå…¨å¯ä»¥å¤ç”¨TIME_WAITçŠ¶æ€çš„è¿æ¥ã€‚ä»£ç ç‰‡æ®µå·²ç»æ”¾åœ¨æ–‡ç« ä¸­äº†ï¼š</p><pre><code>int on = 1;\nsetsockopt(listenfd, SOL_SOCKET, SO_REUSEADDR, &amp;on, sizeof(on));\n</code></pre><p>SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹ï¼Œå…è®¸å¯åŠ¨ç»‘å®šåœ¨ä¸€ä¸ªç«¯å£ï¼Œå³ä½¿ä¹‹å‰å­˜åœ¨ä¸€ä¸ªå’Œè¯¥ç«¯å£ä¸€æ ·çš„è¿æ¥ã€‚å‰é¢çš„ä¾‹å­å·²ç»è¡¨æ˜ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ç«¯å†ç»åˆ›å»ºsocketã€bindå’Œlistené‡å¯æ—¶ï¼Œå¦‚æœè¯•å›¾ç»‘å®šåˆ°ä¸€ä¸ªç°æœ‰è¿æ¥ä¸Šçš„ç«¯å£ï¼Œbindæ“ä½œä¼šå¤±è´¥ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨åˆ›å»ºsocketå’Œbindä¹‹é—´ï¼Œä½¿ç”¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µè®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹ï¼Œæƒ…å†µå°±ä¼šä¸åŒã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å¯¹åŸæ¥çš„æœåŠ¡å™¨ç«¯ä»£ç è¿›è¡Œå‡çº§ï¼Œå‡çº§çš„éƒ¨åˆ†ä¸»è¦åœ¨11-12è¡Œï¼Œåœ¨bindç›‘å¬å¥—æ¥å­—ä¹‹å‰ï¼Œè°ƒç”¨setsockoptæ–¹æ³•ï¼Œè®¾ç½®é‡ç”¨å¥—æ¥å­—é€‰é¡¹ï¼š</p><pre><code>int main(int argc, char **argv) {\n    int listenfd;\n    listenfd = socket(AF_INET, SOCK_STREAM, 0);\n\n    struct sockaddr_in server_addr;\n    bzero(&amp;server_addr, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    server_addr.sin_port = htons(SERV_PORT);\n\n    int on = 1;\n    setsockopt(listenfd, SOL_SOCKET, SO_REUSEADDR, &amp;on, sizeof(on));\n\n    int rt1 = bind(listenfd, (struct sockaddr *) &amp;server_addr, sizeof(server_addr));\n    if (rt1 &lt; 0) {\n        error(1, errno, &quot;bind failed &quot;);\n    }\n\n    int rt2 = listen(listenfd, LISTENQ);\n    if (rt2 &lt; 0) {\n        error(1, errno, &quot;listen failed &quot;);\n    }\n\n    signal(SIGPIPE, SIG_IGN);\n\n    int connfd;\n    struct sockaddr_in client_addr;\n    socklen_t client_len = sizeof(client_addr);\n\n    if ((connfd = accept(listenfd, (struct sockaddr *) &amp;client_addr, &amp;client_len)) &lt; 0) {\n        error(1, errno, &quot;bind failed &quot;);\n    }\n\n    char message[MAXLINE];\n    count = 0;\n\n    for (;;) {\n        int n = read(connfd, message, MAXLINE);\n        if (n &lt; 0) {\n            error(1, errno, &quot;error read&quot;);\n        } else if (n == 0) {\n            error(1, 0, &quot;client closed \\n&quot;);\n        }\n        message[n] = 0;\n        printf(&quot;received %d bytes: %s\\n&quot;, n, message);\n        count++;\n    }\n}\n</code></pre><p>é‡æ–°ç¼–è¯‘è¿‡åï¼Œé‡å¤ä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œå…ˆå¯åŠ¨æœåŠ¡å™¨ï¼Œå†ä½¿ç”¨Telnetä½œä¸ºå®¢æˆ·ç«¯ç™»å½•åˆ°æœåŠ¡å™¨ï¼Œåœ¨å±å¹•ä¸Šè¾“å…¥ä¸€äº›å­—ç¬¦ï¼Œä½¿ç”¨Ctrl+Cçš„æ–¹å¼åœ¨æœåŠ¡å™¨ç«¯å…³é—­è¿æ¥ã€‚é©¬ä¸Šå°è¯•é‡å¯æœåŠ¡å™¨ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å‘ç°ï¼ŒæœåŠ¡å™¨æ­£å¸¸å¯åŠ¨ï¼Œæ²¡æœ‰å‡ºç°<strong>Address already in use</strong>çš„é”™è¯¯ã€‚è¿™è¯´æ˜æˆ‘ä»¬çš„ä¿®æ”¹å·²ç»èµ·ä½œç”¨ã€‚</p><pre><code> $./addressused2 \n received 9 bytes: network\n received 6 bytes: good\n client closed\n $./addressused2\n</code></pre><p>SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹è¿˜æœ‰ä¸€ä¸ªä½œç”¨ï¼Œé‚£å°±æ˜¯æœ¬æœºæœåŠ¡å™¨å¦‚æœæœ‰å¤šä¸ªåœ°å€ï¼Œå¯ä»¥åœ¨ä¸åŒåœ°å€ä¸Šä½¿ç”¨ç›¸åŒçš„ç«¯å£æä¾›æœåŠ¡ã€‚</p><p>æ¯”å¦‚ï¼Œä¸€å°æœåŠ¡å™¨æœ‰192.168.1.101å’Œ10.10.2.102ä¸¤ä¸ªåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å°æœºå™¨ä¸Šå¯åŠ¨ä¸‰ä¸ªä¸åŒçš„HTTPæœåŠ¡ï¼Œç¬¬ä¸€ä¸ªä»¥æœ¬åœ°é€šé…åœ°å€ANYå’Œç«¯å£80å¯åŠ¨ï¼›ç¬¬äºŒä¸ªä»¥192.168.101å’Œç«¯å£80å¯åŠ¨ï¼›ç¬¬ä¸‰ä¸ªä»¥10.10.2.102å’Œç«¯å£80å¯åŠ¨ã€‚</p><p>è¿™æ ·ç›®çš„åœ°å€ä¸º192.168.101ï¼Œç›®çš„ç«¯å£ä¸º80çš„è¿æ¥è¯·æ±‚ä¼šè¢«å‘å¾€ç¬¬äºŒä¸ªæœåŠ¡ï¼›ç›®çš„åœ°å€ä¸º10.10.2.102ï¼Œç›®çš„ç«¯å£ä¸º80çš„è¿æ¥è¯·æ±‚ä¼šè¢«å‘å¾€ç¬¬ä¸‰ä¸ªæœåŠ¡ï¼›ç›®çš„ç«¯å£ä¸º80çš„æ‰€æœ‰å…¶ä»–è¿æ¥è¯·æ±‚è¢«å‘å¾€ç¬¬ä¸€ä¸ªæœåŠ¡ã€‚</p><p>æˆ‘ä»¬å¿…é¡»ç»™è¿™ä¸‰ä¸ªæœåŠ¡è®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹ï¼Œå¦åˆ™ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªæœåŠ¡è°ƒç”¨bindç»‘å®šåˆ°80ç«¯å£æ—¶ä¼šå‡ºé”™ã€‚</p><h2>æœ€ä½³å®è·µ</h2><p>è¿™é‡Œçš„æœ€ä½³å®è·µå¯ä»¥æ€»ç»“æˆä¸€å¥è¯ï¼š æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œéƒ½åº”è¯¥è®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹ï¼Œä»¥ä¾¿æœåŠ¡ç«¯ç¨‹åºå¯ä»¥åœ¨æçŸ­æ—¶é—´å†…å¤ç”¨åŒä¸€ä¸ªç«¯å£å¯åŠ¨ã€‚</p><p>æœ‰äº›äººå¯èƒ½è§‰å¾—è¿™ä¸æ˜¯å®‰å…¨çš„ã€‚å…¶å®ï¼Œå•ç‹¬é‡ç”¨ä¸€ä¸ªå¥—æ¥å­—ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚æˆ‘åœ¨å‰é¢å·²ç»è®²è¿‡ï¼ŒTCPè¿æ¥æ˜¯é€šè¿‡å››å…ƒç»„å”¯ä¸€åŒºåˆ†çš„ï¼Œåªè¦å®¢æˆ·ç«¯ä¸ä½¿ç”¨ç›¸åŒçš„æºç«¯å£ï¼Œè¿æ¥æœåŠ¡å™¨æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå³ä½¿ä½¿ç”¨äº†ç›¸åŒçš„ç«¯å£ï¼Œæ ¹æ®åºåˆ—å·æˆ–è€…æ—¶é—´æˆ³ï¼Œä¹Ÿæ˜¯å¯ä»¥åŒºåˆ†å‡ºæ–°æ—§è¿æ¥çš„ã€‚</p><p>è€Œä¸”ï¼ŒTCPçš„æœºåˆ¶ç»å¯¹ä¸å…è®¸åœ¨ç›¸åŒçš„åœ°å€å’Œç«¯å£ä¸Šç»‘å®šä¸åŒçš„æœåŠ¡å™¨ï¼Œå³ä½¿æˆ‘ä»¬è®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹ï¼Œä¹Ÿä¸å¯èƒ½åœ¨ANYé€šé…ç¬¦åœ°å€ä¸‹å’Œç«¯å£9527ä¸Šé‡å¤å¯åŠ¨ä¸¤ä¸ªæœåŠ¡å™¨å®ä¾‹ã€‚å¦‚æœæˆ‘ä»¬å¯åŠ¨ç¬¬äºŒä¸ªæœåŠ¡å™¨å®ä¾‹ï¼Œä¸å‡ºæ‰€æ–™ä¼šå¾—åˆ°<strong>Address already in use</strong>çš„æŠ¥é”™ï¼Œå³ä½¿å½“å‰è¿˜æ²¡æœ‰ä»»ä½•ä¸€æ¡æœ‰æ•ˆTCPè¿æ¥äº§ç”Ÿã€‚</p><p>æ¯”å¦‚ä¸‹é¢å°±æ˜¯ç¬¬äºŒæ¬¡è¿è¡ŒæœåŠ¡å™¨ç«¯ç¨‹åºçš„æŠ¥é”™ä¿¡æ¯ï¼š</p><pre><code> $./addressused2\n bind faied: Address already in use(98)\n</code></pre><p>ä½ å¯èƒ½è¿˜è®°å¾—<a href=\"https://time.geekbang.org/column/article/125806\">ç¬¬10è®²</a>ä¸­ï¼Œæˆ‘ä»¬æåˆ°è¿‡ä¸€ä¸ªå«åštcp_tw_reuseçš„å†…æ ¸é…ç½®é€‰é¡¹ï¼Œè¿™é‡Œåˆæåˆ°äº†SO_REUSEADDRå¥—æ¥å­—é€‰æ‹©ï¼Œä½ ä¼šä¸ä¼šè§‰å¾—ä¸¤ä¸ªæœ‰ç‚¹æ··æ·†å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œè¿™ä¸¤ä¸ªä¸œè¥¿ä¸€ç‚¹å…³ç³»ä¹Ÿæ²¡æœ‰ã€‚</p><ul>\n<li>tcp_tw_reuseæ˜¯å†…æ ¸é€‰é¡¹ï¼Œä¸»è¦ç”¨åœ¨è¿æ¥çš„å‘èµ·æ–¹ã€‚TIME_WAITçŠ¶æ€çš„è¿æ¥åˆ›å»ºæ—¶é—´è¶…è¿‡1ç§’åï¼Œæ–°çš„è¿æ¥æ‰å¯ä»¥è¢«å¤ç”¨ï¼Œæ³¨æ„ï¼Œè¿™é‡Œæ˜¯è¿æ¥çš„å‘èµ·æ–¹ï¼›</li>\n<li>SO_REUSEADDRæ˜¯ç”¨æˆ·æ€çš„é€‰é¡¹ï¼ŒSO_REUSEADDRé€‰é¡¹ç”¨æ¥å‘Šè¯‰æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå¦‚æœç«¯å£å·²è¢«å ç”¨ï¼Œä½†æ˜¯TCPè¿æ¥çŠ¶æ€ä½äºTIME_WAIT ï¼Œå¯ä»¥é‡ç”¨ç«¯å£ã€‚å¦‚æœç«¯å£å¿™ï¼Œè€ŒTCPå¤„äºå…¶ä»–çŠ¶æ€ï¼Œé‡ç”¨ç«¯å£æ—¶ä¾æ—§å¾—åˆ°â€œAddress already in useâ€çš„é”™è¯¯ä¿¡æ¯ã€‚æ³¨æ„ï¼Œè¿™é‡Œä¸€èˆ¬éƒ½æ˜¯è¿æ¥çš„æœåŠ¡æ–¹ã€‚</li>\n</ul><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬åˆ†æäº†â€œAddress already in useâ€äº§ç”Ÿçš„åŸå› å’Œè§£å†³æ–¹æ³•ã€‚ä½ åªè¦è®°ä½ä¸€å¥è¯ï¼Œ<strong>åœ¨æ‰€æœ‰TCPæœåŠ¡å™¨ç¨‹åºä¸­ï¼Œè°ƒç”¨bindä¹‹å‰è¯·è®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹</strong>ã€‚è¿™ä¸ä¼šäº§ç”Ÿå±å®³ï¼Œç›¸åï¼Œå®ƒä¼šå¸®åŠ©æˆ‘ä»¬åœ¨å¾ˆå¿«æ—¶é—´å†…é‡å¯æœåŠ¡ç«¯ç¨‹åºï¼Œè€Œè¿™ä¸€ç‚¹æ°æ°æ˜¯å¾ˆå¤šåœºæ™¯æ‰€éœ€è¦çš„ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è·Ÿå¾€å¸¸ä¸€æ ·ï¼Œç»™ä½ å¸ƒç½®ä¸¤é“æ€è€ƒé¢˜ï¼š</p><p>ç¬¬ä¸€é“ï¼Œä¹‹å‰æˆ‘ä»¬çœ‹åˆ°çš„ä¾‹å­ï¼Œéƒ½æ˜¯å¯¹TCPå¥—æ¥å­—è®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹ï¼Œä½ çŸ¥é“å—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹UDPè®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¯¹UDPæ¥è¯´ï¼Œè®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹æœ‰å“ªäº›åœºæ™¯å’Œå¥½å¤„å‘¢ï¼Ÿ</p><p>ç¬¬äºŒé“ï¼Œåœ¨æœåŠ¡å™¨ç«¯ç¨‹åºä¸­ï¼Œè®¾ç½®SO_REUSEADDRå¥—æ¥å­—é€‰é¡¹æ—¶ï¼Œéœ€è¦åœ¨bindå‡½æ•°ä¹‹å‰å¯¹ç›‘å¬å­—è¿›è¡Œè®¾ç½®ï¼Œæƒ³ä¸€æƒ³ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯å¯¹å·²è¿æ¥çš„å¥—æ¥å­—è¿›è¡Œè®¾ç½®å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„æ€è€ƒï¼Œæˆ‘ä¼šå’Œä½ ä¸€èµ·è®¨è®ºäº¤æµï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p>","neighbors":{"left":{"article_title":"14ä¸¨UDPä¹Ÿå¯ä»¥æ˜¯â€œå·²è¿æ¥â€ï¼Ÿ","id":129807},"right":{"article_title":"16 | å¦‚ä½•ç†è§£TCPçš„â€œæµâ€ï¼Ÿ","id":132443}},"comments":[{"had_liked":false,"id":131537,"user_name":"J.M.Liu","can_delete":false,"product_type":"c1","uid":1200037,"ip_address":"","ucode":"B2CB84B8E923A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg","comment_is_top":false,"comment_ctime":1567785910,"is_pvip":false,"replies":[{"id":"50790","content":"æ€»ç»“å¾—ä¸é”™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568190214,"ip_address":"","comment_id":131537,"utype":1}],"discussion_count":3,"race_medal":0,"score":"332280267702","product_id":100032701,"comment_content":"å…³äºtcp_tw_reuseå’ŒSO_REUSEADDRçš„åŒºåˆ«ï¼Œå¯ä»¥æ¦‚æ‹¬ä¸ºï¼štcp_tw_reuseæ˜¯ä¸ºäº†ç¼©çŸ­time_waitçš„æ—¶é—´ï¼Œé¿å…å‡ºç°å¤§é‡çš„time_waité“¾æ¥è€Œå ç”¨ç³»ç»Ÿèµ„æºï¼Œè§£å†³çš„æ˜¯acceptåçš„é—®é¢˜ï¼›SO_REUSEADDRæ˜¯ä¸ºäº†è§£å†³time_waitçŠ¶æ€å¸¦æ¥çš„ç«¯å£å ç”¨é—®é¢˜ï¼Œä»¥åŠæ”¯æŒåŒä¸€ä¸ªportå¯¹åº”å¤šä¸ªipï¼Œè§£å†³çš„æ˜¯bindæ—¶çš„é—®é¢˜ã€‚","like_count":78,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466509,"discussion_content":"æ€»ç»“å¾—ä¸é”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568190214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1959482,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","nickname":"rongyefeng","note":"","ucode":"9A15D947E9D645","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268477,"discussion_content":"ä»€ä¹ˆå«åšä¸€é’ˆè§è¡€ï¼Ÿï¼Ÿï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589787089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2622364,"avatar":"https://static001.geekbang.org/account/avatar/00/28/03/9c/5a0b8825.jpg","nickname":"Bin Watson","note":"","ucode":"33E3487896E859","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544201,"discussion_content":"ğŸ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641439028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172085,"user_name":"xupeng1644","can_delete":false,"product_type":"c1","uid":1596906,"ip_address":"","ucode":"B3110D74266886","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83errIIarFicghpKamvkUaJmGdIV488iaOUyUqcTwbQ6IeRS40ZFfIOfb369fgleydAT8pkucHuj2x45A/132","comment_is_top":false,"comment_ctime":1579085176,"is_pvip":false,"replies":[{"id":"68048","content":"å› ä¸ºSO_REUSEADDRæ˜¯é’ˆå¯¹æ–°å»ºç«‹çš„è¿æ¥æ‰èµ·ä½œç”¨ï¼Œå¯¹å·²å»ºç«‹çš„è¿æ¥è®¾ç½®æ˜¯æ— æ•ˆçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1580626102,"ip_address":"","comment_id":172085,"utype":1}],"discussion_count":1,"race_medal":0,"score":"96068365688","product_id":100032701,"comment_content":"è€å¸ˆ æ€è€ƒé¢˜ç¬¬äºŒé¢˜çš„ç­”æ¡ˆæ˜¯ä»€ä¹ˆå•Š","like_count":23,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481614,"discussion_content":"å› ä¸ºSO_REUSEADDRæ˜¯é’ˆå¯¹æ–°å»ºç«‹çš„è¿æ¥æ‰èµ·ä½œç”¨ï¼Œå¯¹å·²å»ºç«‹çš„è¿æ¥è®¾ç½®æ˜¯æ— æ•ˆçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580626102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140472,"user_name":"Gå…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1200904,"ip_address":"","ucode":"FE482941EC7B2D","user_header":"https://static001.geekbang.org/account/avatar/00/12/53/08/3b078d61.jpg","comment_is_top":false,"comment_ctime":1570954084,"is_pvip":false,"replies":[{"id":"54285","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570968163,"ip_address":"","comment_id":140472,"utype":1}],"discussion_count":2,"race_medal":0,"score":"78880365412","product_id":100032701,"comment_content":"UDPçš„SO_REUSEADDRä½¿ç”¨åœºæ™¯æ¯”è¾ƒå¤šçš„æ˜¯ç»„æ’­ç½‘ç»œï¼Œå¥½å¤„æ˜¯ï¼Œå¦‚æˆ‘ä»¬åœ¨æ¥æ”¶ç»„æ’­æµçš„æ—¶å€™ï¼Œæ¯”å¦‚ç”¨ffmpegæ‹‰å–äº†ä¸€ä¸ªç»„æ’­æµï¼Œä½†æ˜¯è¿˜æƒ³ç”¨ffmpegæ‹‰å–ç›¸åŒçš„ç»„æ’­æµï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦åœ°å€é‡ç”¨äº†","like_count":18,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470405,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570968163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2046036,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/sOuSC65kXWdWBAIIs6uXAD41Ed8Wo8tib81LLVOQJ2oK23TgPDy6x0PGmp7rXwLR3BHOicaKx1zib1DyfpCITK3dw/132","nickname":"GeekYanger","note":"","ucode":"E674B7D25261CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408395,"discussion_content":"æ’çœ¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635239719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247645,"user_name":"æƒ˜ é—»","can_delete":false,"product_type":"c1","uid":1181650,"ip_address":"","ucode":"C5909F034BF072","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","comment_is_top":false,"comment_ctime":1599785326,"is_pvip":false,"replies":[{"id":"92046","content":"æœ‰å‡ ä¸ªéœ€è¦æ¾„æ¸…çš„é—®é¢˜ï¼Œæ‰€è°“FIN-ACKè¿™äº›éƒ½æ˜¯åè®®æ ˆåœ¨å¸®æˆ‘ä»¬å¤„ç†ï¼Œè™½ç„¶åº”ç”¨æœåŠ¡å™¨å·²ç»å…³é—­ï¼Œè¿™äº›å¤„ç†èƒ½åŠ›è¿˜ä¼šåœ¨å†…æ ¸å¾—ä»¥æ‰§è¡Œçš„ï¼Œåªä¸è¿‡æˆ‘ä»¬åº”ç”¨ç¨‹åºè¿›ç¨‹å·²ç»é€€å‡ºï¼Œæ²¡æœ‰åŠæ³•æ”¶åˆ°å†…æ ¸å¯¹è¿™äº›äº‹ä»¶çš„ä¼ é€’ã€‚<br><br>æ‰€ä»¥ï¼Œè¿æ¥å…³é—­å‘èµ·æ–¹ï¼Œè¿˜æ˜¯ä¼šè¿›å…¥TIME_WAITçŠ¶æ€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1601869674,"ip_address":"","comment_id":247645,"utype":1}],"discussion_count":4,"race_medal":0,"score":"48844425582","product_id":100032701,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œè¿™é‡Œçš„æœåŠ¡å™¨ç›´æ¥å…³é—­äº†è¿æ¥ï¼Œåœ¨å…³é—­è¿æ¥ä¹‹å‰å‘é€äº†FINæŠ¥æ–‡ï¼Œæ­¤æ—¶å°±å·²ç»å…³é—­äº†å§ï¼Ÿæ‰€ä»¥å°±æ”¶ä¸åˆ°å®¢æˆ·ç«¯å›å¤çš„ackä»¥åŠå®¢æˆ·ç«¯çš„finäº†ï¼Œè¿æ¥å…³é—­å‘èµ·æ–¹è¿˜æœªèµ°åˆ°æ¥æ”¶å¯¹ç«¯å‘é€çš„finçš„é‚£ä¸€æ­¥ï¼Œæ­¤æ—¶ä¹Ÿä¼šè¿›å…¥timewaité˜¶æ®µå—ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505458,"discussion_content":"æœ‰å‡ ä¸ªéœ€è¦æ¾„æ¸…çš„é—®é¢˜ï¼Œæ‰€è°“FIN-ACKè¿™äº›éƒ½æ˜¯åè®®æ ˆåœ¨å¸®æˆ‘ä»¬å¤„ç†ï¼Œè™½ç„¶åº”ç”¨æœåŠ¡å™¨å·²ç»å…³é—­ï¼Œè¿™äº›å¤„ç†èƒ½åŠ›è¿˜ä¼šåœ¨å†…æ ¸å¾—ä»¥æ‰§è¡Œçš„ï¼Œåªä¸è¿‡æˆ‘ä»¬åº”ç”¨ç¨‹åºè¿›ç¨‹å·²ç»é€€å‡ºï¼Œæ²¡æœ‰åŠæ³•æ”¶åˆ°å†…æ ¸å¯¹è¿™äº›äº‹ä»¶çš„ä¼ é€’ã€‚\n\næ‰€ä»¥ï¼Œè¿æ¥å…³é—­å‘èµ·æ–¹ï¼Œè¿˜æ˜¯ä¼šè¿›å…¥TIME_WAITçŠ¶æ€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601869674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2948566,"avatar":"","nickname":"Geek_1696dd","note":"","ucode":"DEC1F02116F5F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591033,"discussion_content":"æ‰€è°“æœåŠ¡å™¨å…³é—­è¿æ¥ å°±æ˜¯æœåŠ¡å™¨è¿›ç¨‹é€€å‡ºï¼ŒFINæŠ¥æ–‡æ˜¯æœåŠ¡ç«¯tcpå‘å‡ºçš„ï¼Œè¿™æ˜¯å†…æ ¸æ€å®Œæˆçš„äº‹æƒ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666235720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2007786,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a2/ea/8f913dfa.jpg","nickname":"åƒçŒ«çš„é±¼","note":"","ucode":"DC15372C47A0CD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387089,"discussion_content":"è¿™æ˜¯çœŸçš„ç»†ï¼Œç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627979218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"æƒ˜ é—»","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311190,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602247994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165881,"user_name":"HerofH","can_delete":false,"product_type":"c1","uid":1480252,"ip_address":"","ucode":"84EB3243FAB432","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/86QEF74Mhc6ECbBBMr62hVz0ezOicI2Kbv8QBA7qR7KepeoDib9W6KLxxMPuQ24JGusvjC03NNr8uj8GyK0DxKiaw/132","comment_is_top":false,"comment_ctime":1577339003,"is_pvip":false,"replies":[{"id":"63877","content":"ä½ çš„ç†è§£æ˜¯å¯¹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1577602143,"ip_address":"","comment_id":165881,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31642110075","product_id":100032701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œæ ¹æ®æˆ‘çš„ç†è§£ï¼ŒTIME_WAITæ˜¯ä¸»åŠ¨å…³é—­æ–¹æ‰ä¼šå­˜åœ¨çš„çŠ¶æ€ï¼Œè€ŒæœåŠ¡ç«¯å¾ˆå¤šæ—¶å€™éƒ½æ˜¯è¢«åŠ¨å…³é—­æ–¹ï¼Œä¸ºä»€ä¹ˆä¹Ÿä¼šæœ‰TIME_WAITçŠ¶æ€å‘¢ï¼Ÿè¿˜æ˜¯è¯´æœåŠ¡ç«¯å¥—æ¥å­—è®¾ç½®SO_REUSEADDRåªæ˜¯ç”¨äºæœåŠ¡ç«¯ä¸»åŠ¨å…³é—­çš„æƒ…å†µï¼ˆæ¯”å¦‚å¿«é€Ÿé‡å¯ï¼‰å‘¢ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479304,"discussion_content":"ä½ çš„ç†è§£æ˜¯å¯¹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577602143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205054,"user_name":"æµ·ç›—èˆ¹é•¿","can_delete":false,"product_type":"c1","uid":1363634,"ip_address":"","ucode":"ECB28BA21A4113","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/b2/1f914527.jpg","comment_is_top":false,"comment_ctime":1586516890,"is_pvip":false,"replies":[{"id":"76801","content":"ä½ å¦‚æœç­‰ä¹Ÿæ˜¯å¯ä»¥çš„.......","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1586681014,"ip_address":"","comment_id":205054,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27356320666","product_id":100032701,"comment_content":"è€å¸ˆ æ˜¯ä¸æ˜¯Address already in useã€‚æˆ‘æœ€é•¿ç­‰å¾…2mslæ—¶é—´å é‡å¯å°±ä¸ä¼šæœ‰é—®é¢˜å•¦ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491368,"discussion_content":"ä½ å¦‚æœç­‰ä¹Ÿæ˜¯å¯ä»¥çš„.......","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586681014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2272177,"avatar":"https://static001.geekbang.org/account/avatar/00/22/ab/b1/b0ae2ec9.jpg","nickname":"czzz","note":"","ucode":"510C19C40883AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321120,"discussion_content":"å“ˆå“ˆï¼Œæˆ‘ä¹Ÿè¿™æ ·æƒ³è¿‡ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604541073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1245504,"avatar":"https://static001.geekbang.org/account/avatar/00/13/01/40/a203a3b9.jpg","nickname":"çˆ±å­¦ä¹ ä¸å®³æ€•","note":"","ucode":"BE325C02E4C92F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296910,"discussion_content":"æœ‰ä¸ªé™é»˜æ—¶é—´çš„æ¦‚å¿µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596703377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297367,"user_name":"vv_test","can_delete":false,"product_type":"c1","uid":1685884,"ip_address":"","ucode":"1D164B2F034E2B","user_header":"https://static001.geekbang.org/account/avatar/00/19/b9/7c/afe6f1eb.jpg","comment_is_top":false,"comment_ctime":1623486476,"is_pvip":false,"replies":[{"id":"108671","content":"ä¸æ˜¯è¿™æ ·çš„å“¦ï¼ŒNginxåœ¨80ç«¯å£ä¸Šç›‘å¬ï¼Œworkeråªæ˜¯å¼€å¯çš„å†…éƒ¨å¹²æ´»çš„çº¿ç¨‹ï¼Œå¹¶ä¸çœŸçš„ç›‘å¬åœ¨80ç«¯å£ä¸Š","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1624805014,"ip_address":"","comment_id":297367,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14508388364","product_id":100032701,"comment_content":"TCP çš„æœºåˆ¶ç»å¯¹ä¸å…è®¸åœ¨ç›¸åŒçš„åœ°å€å’Œç«¯å£ä¸Šç»‘å®šä¸åŒçš„æœåŠ¡å™¨ã€‚<br>è€å¸ˆæ‚¨å¥½è¯·é—®ä¸€ä¸‹ï¼ŒNginx çš„masterè·Ÿwokeréƒ½æ˜¯ç›‘å¬80ç«¯å£ï¼Œä»–ä»¬éƒ½æœ‰å„è‡ªçš„è¿›ç¨‹å·ã€‚é‚£ä»–ä»¬è¿™ç§ä¸ºä»€ä¹ˆå¯ä»¥å¤šæ¬¡ç»‘å®šçš„","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521808,"discussion_content":"ä¸æ˜¯è¿™æ ·çš„å“¦ï¼ŒNginxåœ¨80ç«¯å£ä¸Šç›‘å¬ï¼Œworkeråªæ˜¯å¼€å¯çš„å†…éƒ¨å¹²æ´»çš„çº¿ç¨‹ï¼Œå¹¶ä¸çœŸçš„ç›‘å¬åœ¨80ç«¯å£ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624805014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2740779,"avatar":"https://static001.geekbang.org/account/avatar/00/29/d2/2b/af13fcd6.jpg","nickname":"ç®€ç®€å•å•å°±æ˜¯å¹¸ç¦","note":"","ucode":"A08080E6FD255F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580039,"discussion_content":"nginxä¸­æ˜¯masterè¿›ç¨‹ç›‘å¬ç«¯å£åï¼Œworkerè¿›ç¨‹forkå‡ºæ¥ï¼Œè¿™æ ·masterå’Œworkeréƒ½ç›‘å¬ç€80ç«¯å£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657842465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223819,"user_name":"pc","can_delete":false,"product_type":"c1","uid":1652836,"ip_address":"","ucode":"1AD538B9A900B6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","comment_is_top":false,"comment_ctime":1591190306,"is_pvip":false,"replies":[{"id":"84258","content":"1.æˆ‘è§‰å¾—æ˜¯çš„ï¼›<br>2.bindçš„æ—¶å€™è¿˜æ²¡æœ‰å»ºç«‹TCPè¿æ¥å“¦ï¼Œåªæœ‰acceptæˆåŠŸè¿”å›æ‰çœŸæ­£çš„å»ºç«‹äº†ä¸€ä¸ªTCPè¿æ¥ï¼Œè¿™ä¸ªæ—¶å€™æ‰æœ‰å››å…ƒç»„å¯ä»¥æè¿°è¿™ä¸ªTCPè¿æ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1592739354,"ip_address":"","comment_id":223819,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14476092194","product_id":100032701,"comment_content":"è€å¸ˆ  æœ‰å‡ ä¸ªç–‘é—®ï½<br>1ã€å¯¹äºå®¢æˆ·ç«¯ç†è®ºä¸Šä¹Ÿä¼šå‘ç”ŸAddress already in use çš„é”™è¯¯å§ï¼Ÿï¼ˆå½“æ²¡æœ‰SO_REUSEADDRã€ç«¯å£ä¹Ÿé‡å¤äº†æ—¶ï¼‰æ˜¯åœ¨connectçš„æ—¶å€™æŠ¥é”™å—ï¼Ÿ<br>2ã€â€œä¸€ä¸ª TCP è¿æ¥æ˜¯é€šè¿‡å››å…ƒç»„(æºåœ°å€ã€æºç«¯å£ã€ç›®çš„åœ°å€ã€ç›®çš„ç«¯å£)æ¥å”¯ä¸€ç¡®å®šâ€--è¿™å¥è¯ä¸æ˜¯å¾ˆç†è§£ï¼Œå¯¹äºæœåŠ¡ç«¯bindçš„æ—¶å€™ä¸æ˜¯æ²¡æœ‰ç›®çš„åœ°å€å—ï¼Ÿéš¾é“æ˜¯åœ¨acceptçš„æ—¶å€™æŠ¥é”™å—ï¼Ÿå¯æ˜¯acceptæ—¶å€™ä¸æ˜¯é˜»å¡ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥å—ï¼Ÿæ²¡æœ‰å¾ˆç†æ¸…æ¥š....","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497249,"discussion_content":"1.æˆ‘è§‰å¾—æ˜¯çš„ï¼›\n2.bindçš„æ—¶å€™è¿˜æ²¡æœ‰å»ºç«‹TCPè¿æ¥å“¦ï¼Œåªæœ‰acceptæˆåŠŸè¿”å›æ‰çœŸæ­£çš„å»ºç«‹äº†ä¸€ä¸ªTCPè¿æ¥ï¼Œè¿™ä¸ªæ—¶å€™æ‰æœ‰å››å…ƒç»„å¯ä»¥æè¿°è¿™ä¸ªTCPè¿æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592739354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293680,"user_name":"å‡Œç©ºé£èµ·çš„å‰ªåˆ€è…¿","can_delete":false,"product_type":"c1","uid":1243680,"ip_address":"","ucode":"16FBBF4A3B54C6","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/20/0f06b080.jpg","comment_is_top":false,"comment_ctime":1621489632,"is_pvip":false,"replies":[{"id":"106716","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1621778527,"ip_address":"","comment_id":293680,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10211424224","product_id":100032701,"comment_content":"ç¬¬ä¸€é“ï¼Œä¹‹å‰æˆ‘ä»¬çœ‹åˆ°çš„ä¾‹å­ï¼Œéƒ½æ˜¯å¯¹ TCP å¥—æ¥å­—è®¾ç½® SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹ï¼Œä½ çŸ¥é“å—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ UDP è®¾ç½® SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¯¹ UDP æ¥è¯´ï¼Œè®¾ç½® SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹æœ‰å“ªäº›åœºæ™¯å’Œå¥½å¤„å‘¢ï¼Ÿ<br>UDPçš„SO_REUSEADDRä½¿ç”¨åœºæ™¯æ¯”è¾ƒå¤šçš„æ˜¯ç»„æ’­ç½‘ç»œï¼Œå¥½å¤„æ˜¯ï¼Œå¦‚æˆ‘ä»¬åœ¨æ¥æ”¶ç»„æ’­æµçš„æ—¶å€™ï¼Œæ¯”å¦‚ç”¨ffmpegæ‹‰å–äº†ä¸€ä¸ªç»„æ’­æµï¼Œä½†æ˜¯è¿˜æƒ³ç”¨ffmpegæ‹‰å–ç›¸åŒçš„ç»„æ’­æµï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦åœ°å€é‡ç”¨äº†<br>ç¬¬äºŒé“ï¼Œåœ¨æœåŠ¡å™¨ç«¯ç¨‹åºä¸­ï¼Œè®¾ç½® SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹æ—¶ï¼Œéœ€è¦åœ¨ bind å‡½æ•°ä¹‹å‰å¯¹ç›‘å¬å­—è¿›è¡Œè®¾ç½®ï¼Œæƒ³ä¸€æƒ³ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯å¯¹å·²è¿æ¥çš„å¥—æ¥å­—è¿›è¡Œè®¾ç½®å‘¢ï¼Ÿ<br>å› ä¸ºSO_REUSEADDRæ˜¯é’ˆå¯¹æ–°å»ºç«‹çš„è¿æ¥æ‰èµ·ä½œç”¨ï¼Œå¯¹å·²å»ºç«‹çš„è¿æ¥è®¾ç½®æ˜¯æ— æ•ˆçš„ã€‚","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520316,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621778527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191414,"user_name":"linker","can_delete":false,"product_type":"c1","uid":1803259,"ip_address":"","ucode":"6C5799F2FC2C82","user_header":"https://static001.geekbang.org/account/avatar/00/1b/83/fb/621adceb.jpg","comment_is_top":false,"comment_ctime":1584771623,"is_pvip":false,"replies":[{"id":"73533","content":"å—¯ï¼Œåå¤ç»ƒä¹ æœ€é‡è¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1584863360,"ip_address":"","comment_id":191414,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10174706215","product_id":100032701,"comment_content":"å¬å®Œä¹‹åï¼Œç¨‹åºä¹Ÿåšäº†è°ƒè¯•ï¼Œä½†æ˜¯ä¸€å‘¨åˆå¿˜è®°äº†ï¼Œçœ‹æ¥è¿˜æ˜¯å¾—åå¤å¬ï¼Œåå¤ç»ƒä¹ å•Šï¼","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488167,"discussion_content":"å—¯ï¼Œåå¤ç»ƒä¹ æœ€é‡è¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584863360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146537,"user_name":"æ—æ—","can_delete":false,"product_type":"c1","uid":1613227,"ip_address":"","ucode":"7B6318B971E430","user_header":"https://static001.geekbang.org/account/avatar/00/18/9d/ab/6589d91a.jpg","comment_is_top":false,"comment_ctime":1572570270,"is_pvip":false,"replies":[{"id":"56658","content":"è¿™ä¸ªï¼Œç»™ä»–ä»¬æissueå§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1572575259,"ip_address":"","comment_id":146537,"utype":1}],"discussion_count":4,"race_medal":0,"score":"10162504862","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬é¡¹ç›®ä¹Ÿå­˜åœ¨æœåŠ¡å™¨æ— æ³•å¿«é€Ÿé‡å¯çš„é—®é¢˜ï¼Œç„¶è€Œåº•å±‚ä»£ç ä¸å¼€æ”¾ï¼Œæ— æ³•åŠ ä¸Šso_reuseaddrï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰å…¶ä»–åŠæ³•å¯ä»¥è§£å†³ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472907,"discussion_content":"è¿™ä¸ªï¼Œç»™ä»–ä»¬æissueå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572575259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1041685,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKPIrGvZ9qJOmfwy37ruzpKQXlTxA1WACHiaPWEq59tR3ID6Dp9qo7L7nlbic4TiamCSribxwqV7IKKSg/132","nickname":"Seven","note":"","ucode":"78266D8828B61B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284588,"discussion_content":"æ•æ‰ä¸€åª gopher","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592563553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1613227,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9d/ab/6589d91a.jpg","nickname":"æ—æ—","note":"","ucode":"7B6318B971E430","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42039,"discussion_content":"å¦‚æœåªåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ‰æ²¡æœ‰ä¸€äº›æš´åŠ›çš„æ–¹æ³•ï¼ŒæŠŠtimewaitçš„è¿æ¥æ–­æ‰ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572575462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1135707,"avatar":"https://static001.geekbang.org/account/avatar/00/11/54/5b/1a14d829.jpg","nickname":"WhatAKitty","note":"","ucode":"911C089450926B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1613227,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9d/ab/6589d91a.jpg","nickname":"æ—æ—","note":"","ucode":"7B6318B971E430","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269708,"discussion_content":"åœ¨TIMEWAITé‚£ä¸€ç¯‡æœ‰å°†å¦‚ä½•åœ¨æ“ä½œç³»ç»Ÿå±‚é¢å‡å°‘TIMEWAITï¼Œæ¯”å¦‚å¼€å¯tcp_timestamp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589940100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":42039,"ip_address":""},"score":269708,"extra":""}]}]},{"had_liked":false,"id":131021,"user_name":"ä¸åŠ¨å£°è‰²æ»¡å¿ƒæ¾æ¹ƒ","can_delete":false,"product_type":"c1","uid":1621658,"ip_address":"","ucode":"80D8F9E49AF7C2","user_header":"https://static001.geekbang.org/account/avatar/00/18/be/9a/b0b89be3.jpg","comment_is_top":false,"comment_ctime":1567601502,"is_pvip":false,"replies":[{"id":"50827","content":"å½“ç„¶ä¸ä¼šï¼ŒTCPå››å…ƒç»„ï¼Œé‡Œé¢å°±æœ‰ä½ è¿™é‡Œæåˆ°çš„server_portã€‚å®ƒæ”¹å˜äº†ï¼Œå››å…ƒç»„å°±ä¸å”¯ä¸€äº†å‘€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568195379,"ip_address":"","comment_id":131021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10157536094","product_id":100032701,"comment_content":"è€å¸ˆ æœ‰ä¸ªç–‘é—®æƒ³é—®ä¸‹ï¼šå¦‚æœæˆ‘çš„æœåŠ¡å™¨æ˜¯åŒç½‘å¡ã€‚ä¸€ä¸ª192.168.1.220 ä¸€ä¸ªæ˜¯192.68.1.221  ç„¶åæˆ‘è®©220å’Œç«¯å£8010 å¤„äºtime_waitçŠ¶æ€ï¼Œ è¿™ä¸ªæ—¶å€™å†ç”¨221å’Œ8010å»å¯åŠ¨ä¸€ä¸ªç¨‹åºï¼Œé‚£ä¼šæŠ¥addr in useå—","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466250,"discussion_content":"å½“ç„¶ä¸ä¼šï¼ŒTCPå››å…ƒç»„ï¼Œé‡Œé¢å°±æœ‰ä½ è¿™é‡Œæåˆ°çš„server_portã€‚å®ƒæ”¹å˜äº†ï¼Œå››å…ƒç»„å°±ä¸å”¯ä¸€äº†å‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568195379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130953,"user_name":"nil","can_delete":false,"product_type":"c1","uid":1507193,"ip_address":"","ucode":"0F5D298C1CBB74","user_header":"https://static001.geekbang.org/account/avatar/00/16/ff/79/3b38c9e1.jpg","comment_is_top":false,"comment_ctime":1567583045,"is_pvip":false,"replies":[{"id":"50832","content":"å“ˆå“ˆï¼Œå¥½åœ¨æˆ‘ä»¬æœ‰å¤§æŠŠçš„ç«¯å£å¯ä»¥ä½¿ç”¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568195751,"ip_address":"","comment_id":130953,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10157517637","product_id":100032701,"comment_content":"å­¦ç”Ÿæ—¶ä»£å†™ç½‘ç»œç¼–ç¨‹ä½œä¸šï¼Œè°ƒè¯•çš„æ—¶å€™ç»å¸¸æœ‰é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç„¶åé€šè¿‡æ¯æ¬¡æ”¹å˜ç«¯å£å·ç»•è¿‡è¿™ä¸ªé—®é¢˜ã€‚æƒ³æƒ³å½“æ—¶é‡åˆ°é—®é¢˜ä¸€çŸ¥åŠè§£ï¼Œä¹Ÿä¸çŸ¥é“å»å¯»æ‰¾æ ¹æœ¬åŸå› ï¼Œå“ˆå“ˆå“ˆï¼Œä¼°è®¡å¿ƒæ€éƒ½åœ¨å®Œæˆä½œä¸šä¸Šï¼Œè€Œæ ¹æœ¬ä¸æ˜¯æƒ³è¦æŒæ¡è¿™ä¸ªæŠ€æœ¯åº•å±‚çš„åŸç†","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466211,"discussion_content":"å“ˆå“ˆï¼Œå¥½åœ¨æˆ‘ä»¬æœ‰å¤§æŠŠçš„ç«¯å£å¯ä»¥ä½¿ç”¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568195751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130890,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1567566065,"is_pvip":false,"replies":[{"id":"50835","content":"UDPç”¨çš„æ¯”è¾ƒå°‘ï¼Œå®ä¾‹ç¡®å®æ¯”è¾ƒéš¾ä»¥æƒ³åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568195936,"ip_address":"","comment_id":130890,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10157500657","product_id":100032701,"comment_content":"æˆ‘ç«Ÿç„¶æ˜¯æ²™å‘<br>ç¬¬ä¸€é—®: ç™¾åº¦å‡ºæ¥çš„ é’ˆå¯¹udpæ˜¯å…è®¸å®Œå…¨çš„é‡å¤çš„æ†ç»‘ å°±æ˜¯æ˜¯udpå…è®¸æŠŠipåœ°å€ç»‘å®šåˆ°å¤šä¸ªå¥—æ¥å£ä¸Š,å¤§æ¦‚æ˜¯ä¸ºäº†åœ¨åŒä¸€æœºå™¨ä¸Šè¿è¡Œå¤šä¸ªå¤šæ’­ç¨‹åºçš„æƒ…å†µä¸‹,å…·ä½“çš„å®ä¾‹å´æƒ³ä¸å‡ºæ¥<br>2. å› ä¸ºæˆ‘è§‰å¾—bindå‡½æ•°æ—¶å‘Šè¯‰å†…æ ¸æˆ‘è¦ç›‘å¬è¿™ä¸ªipåœ°å€å’Œç«¯å£æ˜¯åœ¨å†…æ ¸å±‚çš„äº‹æƒ…, å¦‚æœbindè¿‡åå†è¿›è¡Œè®¾ç½®å¥—æ¥å­—é€‰é¡¹çš„è¯è™½ç„¶æ˜¯åœ¨åº”ç”¨å±‚å¯¹å¥—æ¥å­—è¿›è¡Œäº†ä¿®æ”¹,ä½†æ˜¯æ²¡å‘Šè¯‰å†…æ ¸,è¿™ä¸ªåœ°å€éœ€è¦é¿å¼€timewaitçŠ¶æ€ç›´æ¥é‡ç”¨,å¤§æ„å°±æ˜¯æ²¡æœ‰å½±å“åˆ°å†…æ ¸çš„å¤„ç†","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466178,"discussion_content":"UDPç”¨çš„æ¯”è¾ƒå°‘ï¼Œå®ä¾‹ç¡®å®æ¯”è¾ƒéš¾ä»¥æƒ³åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568195936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241303,"user_name":"test","can_delete":false,"product_type":"c1","uid":1065849,"ip_address":"","ucode":"9A4973E591DD12","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","comment_is_top":false,"comment_ctime":1597242016,"is_pvip":false,"replies":[{"id":"89401","content":"ä¸æ˜¯å“¦ï¼Œ2MSLè¿˜æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1597641132,"ip_address":"","comment_id":241303,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5892209312","product_id":100032701,"comment_content":"æ‰€ä»¥ç°åœ¨ç­‰å¾…2MSLéƒ½æ˜¯æ²¡ç”¨çš„äº†æ˜¯ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503708,"discussion_content":"ä¸æ˜¯å“¦ï¼Œ2MSLè¿˜æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597641132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065849,"avatar":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","nickname":"test","note":"","ucode":"9A4973E591DD12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299281,"discussion_content":"æ—¢ç„¶ç°åœ¨å¯ä»¥é€šè¿‡timestampå•Šåºå·ä»€ä¹ˆçš„ä¿è¯æ–°çš„è¿æ¥ä¸è¢«è€çš„finä¿¡å·æ–­å¼€ï¼Œé‚£ç°åœ¨2mslçš„ç”¨å¤„æ˜¯å•¥å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597641515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159644,"user_name":"Geek_68d3d2","can_delete":false,"product_type":"c1","uid":1674369,"ip_address":"","ucode":"EBD6D881AA7A74","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqf54z1ZmqQY1kmJ6t1HAnrqMM3j6WKf0oDeVLhtnA2ZUKY6AX9MK6RjvcO8SiczXy3uU0IzBQ3tpw/132","comment_is_top":false,"comment_ctime":1575712814,"is_pvip":false,"replies":[{"id":"61023","content":"åº”è¯¥è¿™æ ·è¯´æ˜¯å°†åŸæ¥å¤„äºTIME_WAITçŠ¶æ€çš„è¿æ¥å˜æˆå¯åˆ©ç”¨çš„ï¼Œè€ŒFINæ˜¯åœ¨TIME_WAITçŠ¶æ€ä¹‹å‰å·²ç»å‘é€å‡ºå»äº†ï¼Œä¸ä¼šå¼•èµ·å¯¹ç«¯ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1575798675,"ip_address":"","comment_id":159644,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5870680110","product_id":100032701,"comment_content":"æ²¡æ˜ç™½å¤ç”¨socketï¼Œå¦‚æœå¤ç”¨äº†socketæ˜¯ä¸æ˜¯å°±æ˜¯ç›¸å½“äºæ—§æœ‰çš„socketè¿æ¥æ²¡æœ‰äº†time_waitæ—¶é—´äº†ï¼Ÿä¹Ÿå°±æ˜¯è¯´å¯¹ç«¯å¯èƒ½æ”¶ä¸åˆ°finè€Œä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477130,"discussion_content":"åº”è¯¥è¿™æ ·è¯´æ˜¯å°†åŸæ¥å¤„äºTIME_WAITçŠ¶æ€çš„è¿æ¥å˜æˆå¯åˆ©ç”¨çš„ï¼Œè€ŒFINæ˜¯åœ¨TIME_WAITçŠ¶æ€ä¹‹å‰å·²ç»å‘é€å‡ºå»äº†ï¼Œä¸ä¼šå¼•èµ·å¯¹ç«¯ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575798675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1674369,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqf54z1ZmqQY1kmJ6t1HAnrqMM3j6WKf0oDeVLhtnA2ZUKY6AX9MK6RjvcO8SiczXy3uU0IzBQ3tpw/132","nickname":"Geek_68d3d2","note":"","ucode":"EBD6D881AA7A74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":75946,"discussion_content":"finåœ¨timewaitå‰å‘å‡ºå»ä¹‹åå¯èƒ½å¯¹ç«¯æ²¡æœ‰æ”¶åˆ°å•Šï¼Œè¿™æ—¶åŸæ¥çš„socketè¿æ¥å·²ç»å¤ç”¨ä¸ºå…¶ä»–çš„äº†ï¼Œè¿™æ—¶å€™å¯¹ç«¯ä¸æ˜¯ä¼šä¸€ç›´åœ¨readå“ªé‡Œç­‰å¾…å—ï¼Ÿç›´åˆ°è¶…æ—¶ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575799362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619766,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epx117N0LnncMmd2ysrEOrhp9cQcrLme5MD6nsYXF3ZcWdUmwPsyicwgCP5YHGjYZMAuNiaMfHoD38Q/132","nickname":"ä¸ç©¿ç§‹è£¤ç”·","note":"","ucode":"466EF0BEAA7F52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":119148,"discussion_content":"è¿™ä¸ªæç«¯æƒ…å†µæˆ‘ä¹Ÿæ²¡æœ‰æƒ³æ˜ç™½ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œåˆä¸çŸ¥é“æ€ä¹ˆæ¨¡æ‹Ÿæµ‹è¯•ä¸‹ï¼Œè‹¦æ¼ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578218253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154668,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1574504612,"is_pvip":false,"replies":[{"id":"60388","content":"å¤ªæš´åŠ›äº†å§","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1575189350,"ip_address":"","comment_id":154668,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5869471908","product_id":100032701,"comment_content":"æœ€ä½³å®è·µï¼š<br>æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œéƒ½åº”è¯¥è®¾ç½® SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹ï¼Œä»¥ä¾¿æœåŠ¡ç«¯ç¨‹åºå¯ä»¥åœ¨æçŸ­æ—¶é—´å†…å¤ç”¨åŒä¸€ä¸ªç«¯å£å¯åŠ¨ã€‚<br>åœ¨æ‰€æœ‰ TCP æœåŠ¡å™¨ç¨‹åºä¸­ï¼Œè°ƒç”¨ bind ä¹‹å‰è¯·è®¾ç½® SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹ã€‚<br><br>å®é™…å¼€å‘ï¼Œè¿™ä¸ªé‡åˆ°çš„ç¡®å®å¤šä¸€ç‚¹ï¼Œè‡ªå·±éƒ½æ˜¯æ‰¾åˆ°æ˜¯è°å ç”¨çš„ç«¯å£ï¼Œç„¶åå¼„æ­»å®ƒï¼Œå†é‡å¯åº”ç”¨ã€‚<br><br>æœ€æ—©æ—¶éƒ½ä¸çŸ¥é“æ€ä¹ˆæ‰¾ï¼Œç›´æ¥é‡å¯æœºå™¨ï¼Œå†é‡å¯åº”ç”¨ã€‚","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475541,"discussion_content":"å¤ªæš´åŠ›äº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575189350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68037,"discussion_content":"è€å¸ˆæœ‰ä»€ä¹ˆæ›´åŠ ä¼˜é›…çš„å¤„ç†æ–¹å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575197617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131016,"user_name":"ä¸åŠ¨å£°è‰²æ»¡å¿ƒæ¾æ¹ƒ","can_delete":false,"product_type":"c1","uid":1621658,"ip_address":"","ucode":"80D8F9E49AF7C2","user_header":"https://static001.geekbang.org/account/avatar/00/18/be/9a/b0b89be3.jpg","comment_is_top":false,"comment_ctime":1567599650,"is_pvip":false,"replies":[{"id":"50828","content":"å“ˆå“ˆï¼Œæˆ‘å†™å¾—å¾ˆç´¯çš„è¯´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568195392,"ip_address":"","comment_id":131016,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862566946","product_id":100032701,"comment_content":"è€å¸ˆï¼Œ å¸Œæœ›å¯ä»¥å¤šè®²ä¸€ç‚¹ã€‚ æ„Ÿè§‰å¬äº†å¾ˆçˆ½  ä½†æ˜¯è§‰å¾—ä¸å¤Ÿ å“ˆå“ˆå“ˆ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466247,"discussion_content":"å“ˆå“ˆï¼Œæˆ‘å†™å¾—å¾ˆç´¯çš„è¯´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568195392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353071,"user_name":"dll","can_delete":false,"product_type":"c1","uid":1264401,"ip_address":"åŒ—äº¬","ucode":"5773CBC8BFB91F","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/11/d7e08b5b.jpg","comment_is_top":false,"comment_ctime":1659138319,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1659138319","product_id":100032701,"comment_content":"TCP çš„æœºåˆ¶ç»å¯¹ä¸å…è®¸åœ¨ç›¸åŒçš„åœ°å€å’Œç«¯å£ä¸Šç»‘å®šä¸åŒçš„æœåŠ¡å™¨ï¼Œå³ä½¿æˆ‘ä»¬è®¾ç½® SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹ï¼Œä¹Ÿä¸å¯èƒ½åœ¨ ANY é€šé…ç¬¦åœ°å€ä¸‹å’Œç«¯å£ 9527 ä¸Šé‡å¤å¯åŠ¨ä¸¤ä¸ªæœåŠ¡å™¨å®ä¾‹ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ä»€ä¹ˆå«æœåŠ¡å™¨å®ä¾‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":351502,"user_name":"smiler","can_delete":false,"product_type":"c1","uid":3011086,"ip_address":"","ucode":"D3E73AFB2912FA","user_header":"https://static001.geekbang.org/account/avatar/00/2d/f2/0e/4112b669.jpg","comment_is_top":false,"comment_ctime":1657854170,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657854170","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘é—®ä¸‹é—®ä»€ä¹ˆå®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­ï¼Œå°±ä¸ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜","like_count":0},{"had_liked":false,"id":344093,"user_name":"Frankey","can_delete":false,"product_type":"c1","uid":2776006,"ip_address":"","ucode":"2F09BC2500C9E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er5SNsSoiaZw4Qzd2ctH4vtibHQordcLrYsX43oFZFloRTId0op617mcGlrvGx33U8ic2LTgdicoEFPvQ/132","comment_is_top":false,"comment_ctime":1651236396,"is_pvip":false,"replies":[{"id":"125675","content":"å“ªé‡Œé”™äº†ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1651405644,"ip_address":"","comment_id":344093,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1651236396","product_id":100032701,"comment_content":"ä»£ç ä¸­ç«¯å£æ˜¯telnet 127.0.0.1 43211","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569317,"discussion_content":"å“ªé‡Œé”™äº†ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651405644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341533,"user_name":"bianf","can_delete":false,"product_type":"c1","uid":2655951,"ip_address":"","ucode":"E8B0E15356464F","user_header":"https://static001.geekbang.org/account/avatar/00/28/86/cf/3764011f.jpg","comment_is_top":false,"comment_ctime":1649680159,"is_pvip":true,"replies":[{"id":"125343","content":"æ²¡çœ‹æ˜ç™½ä½ çš„é—®é¢˜ ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1650713812,"ip_address":"","comment_id":341533,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1649680159","product_id":100032701,"comment_content":"æ¯”å¦‚ï¼Œä¸€å°æœåŠ¡å™¨æœ‰ 192.168.1.101 å’Œ 10.10.2.102 è¿ä¸ªåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å°æœºå™¨ä¸Šå¯åŠ¨ä¸‰ä¸ªä¸åŒçš„ HTTP æœåŠ¡ï¼Œç¬¬ä¸€ä¸ªä»¥æœ¬åœ°é€šé…åœ°å€ ANY å’Œç«¯å£ 80 å¯åŠ¨ï¼›ç¬¬äºŒä¸ªä»¥ 192.168.101 å’Œç«¯å£ 80 å¯åŠ¨ï¼›ç¬¬ä¸‰ä¸ªä»¥ 10.10.2.102 å’Œç«¯å£ 80 å¯åŠ¨ã€‚<br><br>è¿™ä¸€æ®µ102åé¢åº”è¯¥æ˜¯ä¸¤å§","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566560,"discussion_content":"æ²¡çœ‹æ˜ç™½ä½ çš„é—®é¢˜ ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650713812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2655951,"avatar":"https://static001.geekbang.org/account/avatar/00/28/86/cf/3764011f.jpg","nickname":"bianf","note":"","ucode":"E8B0E15356464F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":566565,"discussion_content":"æ‰“é”™å­—äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650715278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":566560,"ip_address":""},"score":566565,"extra":""}]}]},{"had_liked":false,"id":341529,"user_name":"bianf","can_delete":false,"product_type":"c1","uid":2655951,"ip_address":"","ucode":"E8B0E15356464F","user_header":"https://static001.geekbang.org/account/avatar/00/28/86/cf/3764011f.jpg","comment_is_top":false,"comment_ctime":1649678441,"is_pvip":true,"replies":[{"id":"125342","content":"ç¬”è¯¯å“ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1650713641,"ip_address":"","comment_id":341529,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649678441","product_id":100032701,"comment_content":"$telneet 127.0.0.1 9527<br>network<br>bad<br>Connection closed by foreign host.<br><br>è¿™æ®µä»£ç çš„å‘½ä»¤å†™é”™äº†ï¼Œtelnetå¤šäº†ä¸ªe","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566559,"discussion_content":"ç¬”è¯¯å“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650713642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340676,"user_name":"é“²é“²é˜Ÿ","can_delete":false,"product_type":"c1","uid":1132569,"ip_address":"","ucode":"D16372C34B7AE3","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/19/14dd81d9.jpg","comment_is_top":false,"comment_ctime":1649040898,"is_pvip":false,"replies":[{"id":"124771","content":"ä¸è¦è¿™ä¹ˆç®€å•çš„ç†è§£ï¼Œè¦ç»“åˆè®²åº§ä¸­çš„å…·ä½“ä¾‹å­æ¥ç†è§£ï¼Œè¿™ä¸ªä¾‹å­æ˜¯è¯´ï¼Œä½¿ç”¨é€šé…ç¬¦å¯ä»¥ç»‘å®šåˆ°åŒä¸€ä¸ªç«¯å£ï¼Œè€Œä¸è‡³äºæŠ¥é”™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1649592484,"ip_address":"","comment_id":340676,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649040898","product_id":100032701,"comment_content":"SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹è¿˜æœ‰ä¸€ä¸ªä½œç”¨ï¼Œé‚£å°±æ˜¯æœ¬æœºæœåŠ¡å™¨å¦‚æœæœ‰å¤šä¸ªåœ°å€ï¼Œå¯ä»¥åœ¨ä¸åŒåœ°å€ä¸Šä½¿ç”¨ç›¸åŒçš„ç«¯å£æä¾›æœåŠ¡<br>----&gt;è¿™ä¸ªä¸æ˜¯SO_REUSEPORTçš„ä½œç”¨å—","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561279,"discussion_content":"ä¸è¦è¿™ä¹ˆç®€å•çš„ç†è§£ï¼Œè¦ç»“åˆè®²åº§ä¸­çš„å…·ä½“ä¾‹å­æ¥ç†è§£ï¼Œè¿™ä¸ªä¾‹å­æ˜¯è¯´ï¼Œä½¿ç”¨é€šé…ç¬¦å¯ä»¥ç»‘å®šåˆ°åŒä¸€ä¸ªç«¯å£ï¼Œè€Œä¸è‡³äºæŠ¥é”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649592485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310560,"user_name":"Geek_7f1111","can_delete":false,"product_type":"c1","uid":2756292,"ip_address":"","ucode":"71FA4B52286652","user_header":"","comment_is_top":false,"comment_ctime":1630744908,"is_pvip":false,"replies":[{"id":"112550","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1630845197,"ip_address":"","comment_id":310560,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630744908","product_id":100032701,"comment_content":"time_waitè¿™æ®µæ—¶é—´å¦‚æœç»‘å®šäº†æ–°çš„æœåŠ¡ï¼Œè€è¿æ¥å†å‘è¿‡æ¥ä¿¡æ¯æ˜¯ä¸æ˜¯ä¼šå›å¤rstï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526274,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630845197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247257,"user_name":"æœ¨å­çš¿","can_delete":false,"product_type":"c1","uid":1242778,"ip_address":"","ucode":"3FDEAFABB4C427","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUzv6S9wroyXaoFIwvC1mdDiav4BVS4BbPTuwtvWibthL5PyMuxFNicY06QJMZicVpib7E88S19nH4I9Q/132","comment_is_top":false,"comment_ctime":1599641964,"is_pvip":false,"replies":[{"id":"92042","content":"è¿™ä¸ªæ­£æ˜¯TIME_WAITè®¾è®¡å‡ºæ¥çš„ç”¨æ„ï¼Œæ»¡è¶³ä¸€å®šçš„æ—¶é—´ä½¿å¾—å¹»åŒ–çš„åŒ…å¾—ä»¥åœ¨ç½‘ç»œä¸­æ¶ˆå¤±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1601869224,"ip_address":"","comment_id":247257,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1599641964","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼æˆ‘æƒ³è¯·é—®ä¸€ä¸‹é—®é¢˜ï¼šå½“æœåŠ¡ç«¯è¢«ctrl+cç»ˆæ­¢åï¼Œç›¸å…³çš„socketèµ„æºè¢«é‡Šæ”¾ï¼Œè€Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°finåŒ…åä¹Ÿé€€å‡ºäº†ï¼Œæ“ä½œç³»ç»Ÿä¸ä¼šå¸®æˆ‘ä»¬è¿›è¡ŒfinåŒ…çš„å›å¤å—?ä¸ºä»€ä¹ˆæœåŠ¡å™¨è¿˜ä¼šå¤„äºtime_waitçŠ¶æ€å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505355,"discussion_content":"è¿™ä¸ªæ­£æ˜¯TIME_WAITè®¾è®¡å‡ºæ¥çš„ç”¨æ„ï¼Œæ»¡è¶³ä¸€å®šçš„æ—¶é—´ä½¿å¾—å¹»åŒ–çš„åŒ…å¾—ä»¥åœ¨ç½‘ç»œä¸­æ¶ˆå¤±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601869224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103091,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","nickname":"æäºŒæœ¨","note":"","ucode":"30E03BB84ADB27","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552837,"discussion_content":"å¹»åŒ–çš„åŒ…çš„æ˜¯ä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645607978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240452,"user_name":"Geek_a2ed66","can_delete":false,"product_type":"c1","uid":2101997,"ip_address":"","ucode":"B6D817CD906F9B","user_header":"","comment_is_top":false,"comment_ctime":1596936835,"is_pvip":false,"replies":[{"id":"89336","content":"æ²¡æœ‰åŠæ³•è®©å®¢æˆ·ç«¯è¿æ¥ä¸Šé‚£ä¸ªANYåœ°å€å¯åŠ¨çš„HTTPæœåŠ¡ï¼Œé™¤éæŠŠç¬¬äºŒä¸ªæˆ–ç¬¬ä¸‰ä¸ªä¸­çš„ä¸€ä¸ªå…³é—­æ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1597584278,"ip_address":"","comment_id":240452,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1596936835","product_id":100032701,"comment_content":"è¯·é—®ä¸‹è€å¸ˆï¼Œä¸€å°æœåŠ¡å™¨æœ‰ 192.168.1.101 å’Œ 10.10.2.102 è¿ä¸ªåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å°æœºå™¨ä¸Šå¯åŠ¨ä¸‰ä¸ªä¸åŒçš„ HTTP æœåŠ¡ï¼Œ<br>ç¬¬ä¸€ä¸ªä»¥æœ¬åœ°é€šé…åœ°å€ ANY å’Œç«¯å£ 80 å¯åŠ¨ï¼›ç¬¬äºŒä¸ªä»¥ 192.168.101 å’Œç«¯å£ 80 å¯åŠ¨ï¼›ç¬¬ä¸‰ä¸ªä»¥ 10.10.2.102 å’Œç«¯å£ 80 å¯åŠ¨ã€‚<br>è¿™æ ·ç›®çš„åœ°å€ä¸º 192.168.101ï¼Œç›®çš„ç«¯å£ä¸º 80 çš„è¿æ¥è¯·æ±‚ä¼šè¢«å‘å¾€ç¬¬äºŒä¸ªæœåŠ¡ï¼›ç›®çš„åœ°å€ä¸º 10.10.2.102ï¼Œ<br>å¦‚æœæˆ‘å®¢æˆ·ç«¯è¦è¿æ¥ä»¥æœ¬åœ°é€šé…åœ°å€ ANYå¯åŠ¨çš„è¿æ¥ï¼Œå®¢æˆ·ç«¯åº”è¯¥å¡«ä»€ä¹ˆåœ°å€","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503450,"discussion_content":"æ²¡æœ‰åŠæ³•è®©å®¢æˆ·ç«¯è¿æ¥ä¸Šé‚£ä¸ªANYåœ°å€å¯åŠ¨çš„HTTPæœåŠ¡ï¼Œé™¤éæŠŠç¬¬äºŒä¸ªæˆ–ç¬¬ä¸‰ä¸ªä¸­çš„ä¸€ä¸ªå…³é—­æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597584278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2069047,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/92/37/49f3982a.jpg","nickname":"Garfield","note":"","ucode":"6F946BB7CA7973","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404294,"discussion_content":"å†…éƒ¨æµ‹è¯•ç¨‹åºå‘èµ·127.0.0.1å°±æµå‘ANYäº†å§ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634283314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227879,"user_name":"ä¸èƒ½ç”¨çœŸåå­—","can_delete":false,"product_type":"c1","uid":1084486,"ip_address":"","ucode":"83464DF743520A","user_header":"https://static001.geekbang.org/account/avatar/00/10/8c/46/7b973ee2.jpg","comment_is_top":false,"comment_ctime":1592503761,"is_pvip":false,"replies":[{"id":"84281","content":"Linuxç‰ˆæœ¬ï¼Ÿä½ çš„æ“ä½œæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1592744344,"ip_address":"","comment_id":227879,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592503761","product_id":100032701,"comment_content":"â€œæ¯”å¦‚ï¼Œä¸€å°æœåŠ¡å™¨æœ‰ 192.168.1.101 å’Œ 10.10.2.102 è¿ä¸ªåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å°æœºå™¨ä¸Šå¯åŠ¨ä¸‰ä¸ªä¸åŒçš„ HTTP æœåŠ¡ï¼Œç¬¬ä¸€ä¸ªä»¥æœ¬åœ°é€šé…åœ°å€ ANY å’Œç«¯å£ 80 å¯åŠ¨ï¼›ç¬¬äºŒä¸ªä»¥ 192.168.101 å’Œç«¯å£ 80 å¯åŠ¨ï¼›ç¬¬ä¸‰ä¸ªä»¥ 10.10.2.102 å’Œç«¯å£ 80 å¯åŠ¨ã€‚â€ è€å¸ˆï¼Œè¿™ä¸ªç¡®å®šèƒ½è¡Œä¹ˆï¼Ÿå®æµ‹åªè¦æœ‰anyï¼Œå°±ä¸èƒ½å¯åŠ¨æ›´å¤šçš„æœåŠ¡å®ä¾‹le","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498815,"discussion_content":"Linuxç‰ˆæœ¬ï¼Ÿä½ çš„æ“ä½œæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592744344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215801,"user_name":"super-ck","can_delete":false,"product_type":"c1","uid":1307067,"ip_address":"","ucode":"02F036E53E1130","user_header":"","comment_is_top":false,"comment_ctime":1589105986,"is_pvip":false,"replies":[{"id":"80638","content":"å¦‚æœæ˜¯æˆ‘å®ç°åºåˆ—å·ï¼Œæˆ‘ä¼šä¸€ç›´è®©è¿™ä¸ªåºåˆ—å·å¾ªç¯çš„å˜å¤§ï¼Œç›´åˆ°åˆ°è¾¾æœ€å¤§ä¸Šé™ï¼Œå†ä»1å¼€å§‹ã€‚ç°ä»£æ“ä½œç³»ç»Ÿéƒ½å¯¹æ­¤ä½œäº†ä¼˜åŒ–ï¼Œä¸ä¼šå‡ºç°å¤ç”¨ç«¯å£è€Œåºåˆ—å·æ— æ³•åŒºåˆ†æŠ¥æ–‡é¡ºåºçš„æƒ…å†µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1589705290,"ip_address":"","comment_id":215801,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589105986","product_id":100032701,"comment_content":"åºåˆ—å·æ˜¯ç”¨æ¥å‘é€å­—èŠ‚æµæˆ–ä¼ é€SYN&#47;FINä¿¡æ¯ï¼Œ è¯·é—®æ˜¯å¦æœ‰ä¸€ä¸ªç§å¯èƒ½åœ¨æŸåºåˆ—å·ä¸‹ï¼Œtcpè¿æ¥ï¼Œä¼ é€å­—èŠ‚æµï¼Œç„¶åæœåŠ¡å™¨ç«¯å…³é—­ï¼Œæ­¤æ—¶åºåˆ—å·æ¯”åŸå…ˆåºåˆ—å·è¿˜å°ï¼Œè¿™æ—¶å¦‚æœå¤ç”¨åŒä¸€ä¸ªç«¯å£ï¼Œä¼šä¸ä¼šå‡ºç°é—®é¢˜ï¼Œéš¾é“ç”¨æ—¶é—´æˆ³æ¥åˆ¤æ–­ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494563,"discussion_content":"å¦‚æœæ˜¯æˆ‘å®ç°åºåˆ—å·ï¼Œæˆ‘ä¼šä¸€ç›´è®©è¿™ä¸ªåºåˆ—å·å¾ªç¯çš„å˜å¤§ï¼Œç›´åˆ°åˆ°è¾¾æœ€å¤§ä¸Šé™ï¼Œå†ä»1å¼€å§‹ã€‚ç°ä»£æ“ä½œç³»ç»Ÿéƒ½å¯¹æ­¤ä½œäº†ä¼˜åŒ–ï¼Œä¸ä¼šå‡ºç°å¤ç”¨ç«¯å£è€Œåºåˆ—å·æ— æ³•åŒºåˆ†æŠ¥æ–‡é¡ºåºçš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589705290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185148,"user_name":"awmthink","can_delete":false,"product_type":"c1","uid":1331202,"ip_address":"","ucode":"742915BBCE7111","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/02/cce1cf67.jpg","comment_is_top":false,"comment_ctime":1583497052,"is_pvip":false,"replies":[{"id":"71664","content":"ç¬¬äºŒç§æƒ…å†µåº”è¯¥æ˜¯æ˜¾ç¤ºçš„è®©Serverç«¯é€€å‡ºäº†ï¼Œæˆ‘ç†è§£ä½ æ²¡æœ‰ä½¿ç”¨SO_REUSEADDRé€‰é¡¹å¯¹å§ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1583639495,"ip_address":"","comment_id":185148,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1583497052","product_id":100032701,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘ç”¨è‡ªå·±çš„echoå®¢æˆ·ç«¯æµ‹è¯•ï¼Œå‘ç°ï¼Œå¦‚æœControl-CæŠŠServerå¼ºåˆ¶å…³é—­æ‰åï¼Œå®¢æˆ·ç«¯å¦‚æœåœ¨é˜»å¡åœ¨ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼Œè¿™é‡Œé‡å¯Serverå°±ä¼šæç¤ºåœ°å€å·²ç”¨ã€‚<br>ä½†å¦‚æœè¿™é‡Œå®¢æˆ·ç«¯æ¥æ”¶è¾“å…¥ï¼Œç„¶åæ”¶åˆ°æœåŠ¡ç«¯è¿æ¥å…³é—­ï¼Œç„¶åå®¢æˆ·ç«¯ä¹Ÿé€€å‡ºäº†ã€‚è¿™æ—¶é‡å¯Serverï¼ŒServeræ˜¯å¯ä»¥æ­£å¸¸é‡å¯çš„ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼ŒTIME_WAITçŠ¶æ€æ²¡äº†å—ï¼Ÿæ˜¯ä¸æ˜¯Clientå…³é—­æ—¶åˆæœ‰æŠ¥æ–‡ç»™åˆ°Serverçš„å†…æ ¸å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486270,"discussion_content":"ç¬¬äºŒç§æƒ…å†µåº”è¯¥æ˜¯æ˜¾ç¤ºçš„è®©Serverç«¯é€€å‡ºäº†ï¼Œæˆ‘ç†è§£ä½ æ²¡æœ‰ä½¿ç”¨SO_REUSEADDRé€‰é¡¹å¯¹å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583639495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184971,"user_name":"Richard","can_delete":false,"product_type":"c1","uid":1316758,"ip_address":"","ucode":"893F958B9DD161","user_header":"https://static001.geekbang.org/account/avatar/00/14/17/96/846fc11b.jpg","comment_is_top":false,"comment_ctime":1583460405,"is_pvip":false,"replies":[{"id":"71700","content":"æˆ‘è§‰å¾—ç†è®ºä¸Šè‚¯å®šæ˜¯å­˜åœ¨çš„ï¼Œä¸è¿‡ä½ æƒ³ä¸€ä¸ª32ä½çš„seqåœ¨çŸ­æ—¶é—´å†…ç»•å›ï¼Œæˆ‘è®¤ä¸ºæ¦‚ç‡è¿˜æ˜¯æ¯”è¾ƒå°çš„ã€‚è‡³äºLinuxç³»ç»Ÿæœ‰æ²¡æœ‰åœ¨æºä»£ç é‡Œé¢æœ‰è¿™ç§å®¹é”™æœºåˆ¶ï¼Œæˆ‘æ²¡æœ‰ä»”ç»†è¯»è¿‡è¿™éƒ¨åˆ†ä»£ç ï¼Œä¸å¥½åˆ¤æ–­ï¼Œæˆ‘è®¤ä¸ºåœ¨å®é™…çŠ¶å†µä¸­æ²¡æœ‰ç†è®ºè€ƒè™‘å¾—é‚£ä¹ˆå¤šé¢é¢ä¿±åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1583657303,"ip_address":"","comment_id":184971,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1583460405","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹å…³äºæ–°æ—§è¿æ¥åŒ–èº«å¦‚ä½•é˜»æ­¢å»¶è¿ŸæŠ¥æ–‡çš„é—®é¢˜ã€‚æ‚¨åœ¨æ–‡ä¸­è¯´ç°ä»£Linux å¯¹å°æ¦‚ç‡ä¸‹é‡ç”¨äº†ç›¸åŒå››å…ƒç»„çš„socketçš„æƒ…å†µä½œäº†å¾ˆå¤šä¼˜åŒ–ï¼šâ€œç¬¬ä¸€ç§ä¼˜åŒ–æ˜¯æ–°è¿æ¥ SYN å‘ŠçŸ¥çš„åˆå§‹åºåˆ—å·ï¼Œä¸€å®šæ¯” TIME_WAIT è€è¿æ¥çš„æœ«åºåˆ—å·å¤§ï¼Œè¿™æ ·é€šè¿‡åºåˆ—å·å°±å¯ä»¥åŒºåˆ«å‡ºæ–°è€è¿æ¥ã€‚â€<br>æˆ‘åˆšå¥½æ·±å…¥ç ”ç©¶äº† TIME_WAIT ä¸€æ®µæ—¶é—´ï¼Œé˜…è¯»è¿‡ç›¸å…³çš„RFCä»¥åŠã€ŠTCP&#47;IPåè®®è¯¦è§£ã€‹ä¸­ç›¸å…³çš„å†…å®¹ï¼Œå¤§æ¦‚æ€»ç»“å‡ºTCP å­—æ®µä¸­ ISNã€seqã€timestampéƒ½å­˜åœ¨å›ç»•é‡ç”¨çš„æƒ…å†µï¼Œå…¶ä¸­ISNå’Œseqéƒ½æ˜¯æ— ç¬¦å·çš„32ä½æ•´å‹ï¼Œå–å€¼åœ¨[0, 2**32 â€“ 1]ä¹‹é—´ï¼ŒISN æ˜¯é€šè¿‡æŸç§ç®—æ³•éšæœºç”Ÿæˆä½œä¸ºseqçš„åˆå§‹åºåˆ—å·æ¯4ÂµsåŠ ä¸€.ï¼Œseqä¸ºæ¯ä¸ªå­—èŠ‚ç¼–å·ï¼Œå¹¶åœ¨è¾¾åˆ°æœ€å¤§å€¼æ—¶ä»0å¼€å§‹ï¼Œæ‰€ä»¥wrap around timeå–å†³äºå¸¦å®½å¤§å°å’Œtcpçš„å‘é€é€Ÿç‡ã€‚<br>æˆ‘çš„é—®é¢˜æ˜¯ï¼šä¼šä¸ä¼šå­˜åœ¨ä¸€ç§æƒ…å†µæ˜¯è€è¿æ¥ä¼ è¾“äº†å¤§é‡æ•°æ®æå¤§åœ°æ¨è¿›äº†seqï¼Œæ­¤æ—¶è·³è¿‡äº†TIME_WAITç­‰å¾…æ—¶é—´å¿«é€Ÿé‡ç”¨äº†ç›¸åŒå…ƒç»„çš„è¿æ¥ï¼Œè€Œæ–°è¿æ¥çš„ ISN å´æ¯”è€è¿æ¥çš„æœ«åºåˆ—å·å°å‘¢ï¼Ÿ<br>æˆ–è€…è¯´linuxæ˜¯å¦é€šè¿‡æŸç§æ–¹å¼ä¿è¯äº†æ–°åŒ–èº«çš„ISNä¸€å®šæ¯”è€åŒ–èº«æœ«åºåˆ—å·å¤§ï¼Ÿ<br>æ¯•ç«Ÿtimestampåªèƒ½ä¿è¯å‡ºæ ˆè¿æ¥é‡ç”¨æ—¶ï¼ˆä¸»åŠ¨è·³è¿‡time_waitï¼‰çš„æŠ¥æ–‡å»¶æ—¶é—®é¢˜ï¼Œå¯¹æœåŠ¡ç«¯ä¸»åŠ¨æ–­å¼€çš„æƒ…å†µæ¥è¯´ï¼Œåœ¨ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„ç½‘ç»œå­˜åœ¨NATçš„æƒ…å†µä¸‹ï¼Œtimestampä¹Ÿæ— æ³•ä¿è¯è¯†åˆ«å‡ºå»¶æ—¶æŠ¥æ–‡ã€‚<br>å†™çš„æœ‰ç‚¹ä¹±ï¼Œå¸Œæœ›å·²æè¿°æ¸…æ¥š~","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486197,"discussion_content":"æˆ‘è§‰å¾—ç†è®ºä¸Šè‚¯å®šæ˜¯å­˜åœ¨çš„ï¼Œä¸è¿‡ä½ æƒ³ä¸€ä¸ª32ä½çš„seqåœ¨çŸ­æ—¶é—´å†…ç»•å›ï¼Œæˆ‘è®¤ä¸ºæ¦‚ç‡è¿˜æ˜¯æ¯”è¾ƒå°çš„ã€‚è‡³äºLinuxç³»ç»Ÿæœ‰æ²¡æœ‰åœ¨æºä»£ç é‡Œé¢æœ‰è¿™ç§å®¹é”™æœºåˆ¶ï¼Œæˆ‘æ²¡æœ‰ä»”ç»†è¯»è¿‡è¿™éƒ¨åˆ†ä»£ç ï¼Œä¸å¥½åˆ¤æ–­ï¼Œæˆ‘è®¤ä¸ºåœ¨å®é™…çŠ¶å†µä¸­æ²¡æœ‰ç†è®ºè€ƒè™‘å¾—é‚£ä¹ˆå¤šé¢é¢ä¿±åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583657303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146142,"user_name":"chs","can_delete":false,"product_type":"c1","uid":1618711,"ip_address":"","ucode":"BE4B6A19317400","user_header":"https://static001.geekbang.org/account/avatar/00/18/b3/17/19ea024f.jpg","comment_is_top":false,"comment_ctime":1572439623,"is_pvip":false,"replies":[{"id":"56597","content":"SO_REUSEPORTç”¨åœ¨å¤šä¸ªä¸åŒçš„socketç›‘å¬åœ¨åŒä¸€ä¸ªç«¯å£ä¸Šï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒç½•è§ï¼Œå®¹æ˜“å‡ºç°æ‰€è°“çš„&quot;æƒŠç¾¤&quot;ç°è±¡ã€‚å½“ç„¶ï¼Œå¦‚æœç”¨çš„å¥½ï¼Œä¹Ÿå¯ä»¥è§£å†³ä¸€äº›ç‰¹å®šåœºæ™¯çš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1572573041,"ip_address":"","comment_id":146142,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1572439623","product_id":100032701,"comment_content":"è€å¸ˆè¯·è®²ä¸€ä¸‹SO_REUSEPORT","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472725,"discussion_content":"SO_REUSEPORTç”¨åœ¨å¤šä¸ªä¸åŒçš„socketç›‘å¬åœ¨åŒä¸€ä¸ªç«¯å£ä¸Šï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒç½•è§ï¼Œå®¹æ˜“å‡ºç°æ‰€è°“çš„&amp;quot;æƒŠç¾¤&amp;quot;ç°è±¡ã€‚å½“ç„¶ï¼Œå¦‚æœç”¨çš„å¥½ï¼Œä¹Ÿå¯ä»¥è§£å†³ä¸€äº›ç‰¹å®šåœºæ™¯çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572573041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132569,"avatar":"https://static001.geekbang.org/account/avatar/00/11/48/19/14dd81d9.jpg","nickname":"é“²é“²é˜Ÿ","note":"","ucode":"D16372C34B7AE3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559884,"discussion_content":"SO_REUSEPORTæ˜¯è§£å†³æƒŠç¾¤ç°è±¡çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649041822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1259625,"avatar":"https://static001.geekbang.org/account/avatar/00/13/38/69/864569a4.jpg","nickname":"devil","note":"","ucode":"BB6090411BAA23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":169089,"discussion_content":"SO_REUSEPORTåº”è¯¥æ˜¯è§£å†³æƒŠç¾¤ç°è±¡å§ï¼Ÿå¤šä¸ªè¿›ç¨‹ç»‘å®šåŒä¸€ä¸ªportä½†æ˜¯æœ‰å„è‡ªçš„socketï¼Œå†…æ ¸é€šè¿‡hashåªä¼šé€‰æŠ˜å…¶ä¸­ä¸€ä¸ªsocketã€‚åœ¨æ²¡æœ‰SO_REUSEPORTçš„æ—¶å€™ï¼Œé€šè¿‡çˆ¶å­è¿›ç¨‹å…±äº«åŒä¸€ä¸ªsocketå½“æœ‰è¯·æ±‚æ—¶è¿™ä¸ªsocketå”¤é†’æ‰€æœ‰çš„è¿›ç¨‹æ‰ä¼šå‡ºç°æƒŠç¾¤ç°è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581602983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141045,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1571105975,"is_pvip":false,"replies":[{"id":"55087","content":"ä¸æ˜¯å†²çªçš„ï¼ŒSO_REUSEADDRæ˜¯ç›´æ¥å¤ç”¨TIME_WAITçŠ¶æ€çš„è¿æ¥ï¼Œä¸Šä¸€æ¬¡è¿æ¥çš„æ—§æ•°æ®åŒ…ä¼šè¢«å¿½ç•¥æ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1571453524,"ip_address":"","comment_id":141045,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1571105975","product_id":100032701,"comment_content":"ä½¿ç”¨SO_REUSEADDRæ„Ÿè§‰è·Ÿå‰é¢è®²çš„time_waitçŠ¶æ€æŒç»­2MSLçš„åŸå› æœ‰å†²çªå‘€ã€‚æœåŠ¡èƒ½ç«‹å³é‡å¯çš„è¯ï¼Œå°±èƒ½æ”¶åˆ°ä¸Šä¸€æ¬¡è¿æ¥çš„æ—§æ•°æ®åŒ…å‘€","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470656,"discussion_content":"ä¸æ˜¯å†²çªçš„ï¼ŒSO_REUSEADDRæ˜¯ç›´æ¥å¤ç”¨TIME_WAITçŠ¶æ€çš„è¿æ¥ï¼Œä¸Šä¸€æ¬¡è¿æ¥çš„æ—§æ•°æ®åŒ…ä¼šè¢«å¿½ç•¥æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571453524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2224386,"avatar":"https://static001.geekbang.org/account/avatar/00/21/f1/02/96082034.jpg","nickname":"Guchen","note":"","ucode":"9BD34F616F167A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316899,"discussion_content":"æˆ‘è§‰å¾—åº”è¯¥è¿™æ ·ç†è§£ï¼Œå¤ç”¨çš„é“¾æ¥æ˜¯æŠ½è±¡çš„é“¾æ¥ï¼Œä¹‹å‰çš„è¿æ¥çš„çŠ¶æ€é‡ç¼“å†²åŒºå•¥çš„éƒ½ä¼šè¢«ä¸¢å¼ƒï¼Œè¿™äº›ä¸œè¥¿æ˜¯ä¸ä¼šè¢«ç»§æ‰¿çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603468704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1036076,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cf/2c/a3c68666.jpg","nickname":"å’”å’”","note":"","ucode":"3655BA8BDD7419","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53620,"discussion_content":"æ—§æ•°æ®åŒ…ä¼šè¢«ä¸¢æ‰ï¼Œæ˜¯å› ä¸ºæ ¹æ®åºåˆ—å·æˆ–è€…æ—¶é—´æˆ³åŒºåˆ†å‡ºæ–°æ—§è¿æ¥å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574179144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131586,"user_name":"çŸ³å°†ä»","can_delete":false,"product_type":"c1","uid":1375617,"ip_address":"","ucode":"12F43E643D1D58","user_header":"https://static001.geekbang.org/account/avatar/00/14/fd/81/1864f266.jpg","comment_is_top":false,"comment_ctime":1567820211,"is_pvip":false,"replies":[{"id":"50787","content":"$telnet 127.0.0.1 43211<br>","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568189891,"ip_address":"","comment_id":131586,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567820211","product_id":100032701,"comment_content":"æ€ä¹ˆç”¨telnetè¿æ¥ï¼Œæ±‚è€å¸ˆå›ç­”","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466526,"discussion_content":"$telnet 127.0.0.1 43211\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568189891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}