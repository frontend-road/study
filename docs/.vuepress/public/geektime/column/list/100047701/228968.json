{"id":228968,"title":"22 | æ¥å£è®¾è®¡ï¼šç³»ç»Ÿé—´å¯¹è¯çš„è¯­è¨€ï¼Œä¸€å®šè¦ç»Ÿä¸€","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™”ã€‚ä»Šå¤©ï¼Œæˆ‘è¦å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼Œåœ¨åšæ¥å£è®¾è®¡æ—¶ä¸€å®šè¦ç¡®ä¿ç³»ç»Ÿä¹‹é—´å¯¹è¯çš„è¯­è¨€æ˜¯ç»Ÿä¸€çš„ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¼€å‘ä¸€ä¸ªæœåŠ¡çš„ç¬¬ä¸€æ­¥å°±æ˜¯è®¾è®¡æ¥å£ã€‚æ¥å£çš„è®¾è®¡éœ€è¦è€ƒè™‘çš„ç‚¹éå¸¸å¤šï¼Œæ¯”å¦‚æ¥å£çš„å‘½åã€å‚æ•°åˆ—è¡¨ã€åŒ…è£…ç»“æ„ä½“ã€æ¥å£ç²’åº¦ã€ç‰ˆæœ¬ç­–ç•¥ã€å¹‚ç­‰æ€§å®ç°ã€åŒæ­¥å¼‚æ­¥å¤„ç†æ–¹å¼ç­‰ã€‚</p><p>è¿™å…¶ä¸­ï¼Œå’Œæ¥å£è®¾è®¡ç›¸å…³æ¯”è¾ƒé‡è¦çš„ç‚¹æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯åŒ…è£…ç»“æ„ä½“ã€ç‰ˆæœ¬ç­–ç•¥ã€åŒæ­¥å¼‚æ­¥å¤„ç†æ–¹å¼ã€‚ä»Šå¤©ï¼Œæˆ‘å°±é€šè¿‡æˆ‘é‡åˆ°çš„å®é™…æ¡ˆä¾‹ï¼Œå’Œä½ ä¸€èµ·çœ‹çœ‹å› ä¸ºæ¥å£è®¾è®¡æ€è·¯å’Œè°ƒç”¨æ–¹ç†è§£ä¸ä¸€è‡´æ‰€å¯¼è‡´çš„é—®é¢˜ï¼Œä»¥åŠç›¸å…³çš„å®è·µç»éªŒã€‚</p><h2>æ¥å£çš„å“åº”è¦æ˜ç¡®è¡¨ç¤ºæ¥å£çš„å¤„ç†ç»“æœ</h2><p>æˆ‘æ›¾é‡åˆ°è¿‡ä¸€ä¸ªå¤„ç†æ”¶å•çš„æ”¶å•ä¸­å¿ƒé¡¹ç›®ï¼Œä¸‹å•æ¥å£è¿”å›çš„å“åº”ä½“ä¸­ï¼ŒåŒ…å«äº†successã€codeã€infoã€messageç­‰å±æ€§ï¼Œä»¥åŠäºŒçº§åµŒå¥—å¯¹è±¡dataç»“æ„ä½“ã€‚åœ¨å¯¹é¡¹ç›®è¿›è¡Œé‡æ„çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°çœŸçš„æ˜¯æ— ä»å…¥æ‰‹ï¼Œæ¥å£ç¼ºå°‘æ–‡æ¡£ï¼Œä»£ç ä¸€æœ‰æ”¹åŠ¨å°±å‡ºé”™ã€‚</p><p>æœ‰æ—¶å€™ï¼Œä¸‹å•æ“ä½œçš„å“åº”ç»“æœæ˜¯è¿™æ ·çš„ï¼šsuccessæ˜¯trueã€messageæ˜¯OKï¼Œè²Œä¼¼ä»£è¡¨ä¸‹å•æˆåŠŸäº†ï¼›ä½†infoé‡Œå´æç¤ºè®¢å•å­˜åœ¨é£é™©ï¼Œcodeæ˜¯ä¸€ä¸ª5001çš„é”™è¯¯ç ï¼Œdataä¸­èƒ½çœ‹åˆ°è®¢å•çŠ¶æ€æ˜¯Cancelledï¼Œè®¢å•IDæ˜¯-1ï¼Œå¥½åƒåˆè¯´æ˜æ²¡æœ‰ä¸‹å•æˆåŠŸã€‚</p><pre><code>{\n\t&quot;success&quot;: true,\n\t&quot;code&quot;: 5001,\n\t&quot;info&quot;: &quot;Risk order detected&quot;,\n\t&quot;message&quot;: &quot;OK&quot;,\n\t&quot;data&quot;: {\n\t\t&quot;orderStatus&quot;: &quot;Cancelled&quot;,\n\t\t&quot;orderId&quot;: -1\n\t}\n}\n</code></pre><!-- [[[read_end]]] --><p>æœ‰äº›æ—¶å€™ï¼Œè¿™ä¸ªä¸‹å•æ¥å£åˆä¼šè¿”å›è¿™æ ·çš„ç»“æœï¼šsuccessæ˜¯falseï¼Œmessageæç¤ºéæ³•ç”¨æˆ·IDï¼Œçœ‹ä¸Šå»ä¸‹å•å¤±è´¥ï¼›ä½†dataé‡Œçš„orderStatusæ˜¯Createdã€infoæ˜¯ç©ºã€codeæ˜¯0ã€‚é‚£ä¹ˆï¼Œè¿™æ¬¡ä¸‹å•åˆ°åº•æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥å‘¢ï¼Ÿ</p><pre><code>{\n\t&quot;success&quot;: false,\n\t&quot;code&quot;: 0,\n\t&quot;info&quot;: &quot;&quot;,\n\t&quot;message&quot;: &quot;Illegal userId&quot;,\n\t&quot;data&quot;: {\n\t\t&quot;orderStatus&quot;: &quot;Created&quot;,\n\t\t&quot;orderId&quot;: 0\n\t}\n}\n</code></pre><p>è¿™æ ·çš„ç»“æœï¼Œè®©æˆ‘ä»¬éå¸¸ç–‘æƒ‘ï¼š</p><ul>\n<li>ç»“æ„ä½“çš„codeå’ŒHTTPå“åº”çŠ¶æ€ç ï¼Œæ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</li>\n<li>successåˆ°åº•ä»£è¡¨ä¸‹å•æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Ÿ</li>\n<li>infoå’Œmessageçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li>dataä¸­æ°¸è¿œéƒ½æœ‰æ•°æ®å—ï¼Ÿä»€ä¹ˆæ—¶å€™åº”è¯¥å»æŸ¥è¯¢dataï¼Ÿ</li>\n</ul><p>é€ æˆå¦‚æ­¤æ··ä¹±çš„åŸå› æ˜¯ï¼šè¿™ä¸ªæ”¶å•æœåŠ¡æœ¬èº«å¹¶ä¸çœŸæ­£å¤„ç†ä¸‹å•æ“ä½œï¼Œåªæ˜¯åšä¸€äº›é¢„æ ¡éªŒå’Œé¢„å¤„ç†ï¼›çœŸæ­£çš„ä¸‹å•æ“ä½œï¼Œéœ€è¦åœ¨æ”¶å•æœåŠ¡å†…éƒ¨è°ƒç”¨å¦ä¸€ä¸ªè®¢å•æœåŠ¡æ¥å¤„ç†ï¼›è®¢å•æœåŠ¡å¤„ç†å®Œæˆåï¼Œä¼šè¿”å›è®¢å•çŠ¶æ€å’ŒIDã€‚</p><p>åœ¨ä¸€åˆ‡æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œä¸‹å•åçš„è®¢å•çŠ¶æ€å°±æ˜¯å·²åˆ›å»ºCreatedï¼Œè®¢å•IDæ˜¯ä¸€ä¸ªå¤§äº0çš„æ•°å­—ã€‚è€Œç»“æ„ä½“ä¸­çš„messageå’Œsuccessï¼Œå…¶å®æ˜¯æ”¶å•æœåŠ¡çš„å¤„ç†å¼‚å¸¸ä¿¡æ¯å’Œå¤„ç†æˆåŠŸä¸å¦çš„ç»“æœï¼Œcodeã€infoæ˜¯è°ƒç”¨è®¢å•æœåŠ¡çš„ç»“æœã€‚</p><p>å¯¹äºç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œæ”¶å•æœåŠ¡è‡ªå·±æ²¡é—®é¢˜ï¼Œsuccessæ˜¯trueï¼Œmessageæ˜¯OKï¼Œä½†è°ƒç”¨è®¢å•æœåŠ¡æ—¶å´å› ä¸ºè®¢å•é£é™©é—®é¢˜è¢«æ‹’ç»ï¼Œæ‰€ä»¥codeæ˜¯5001ï¼Œinfoæ˜¯Risk order detectedï¼Œdataä¸­çš„ä¿¡æ¯æ˜¯è®¢å•æœåŠ¡è¿”å›çš„ï¼Œæ‰€ä»¥æœ€ç»ˆè®¢å•çŠ¶æ€æ˜¯Cancelledã€‚</p><p>å¯¹äºç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œå› ä¸ºç”¨æˆ·IDéæ³•ï¼Œæ‰€ä»¥æ”¶å•æœåŠ¡åœ¨æ ¡éªŒäº†å‚æ•°åç›´æ¥å°±è¿”å›äº†successæ˜¯falseï¼Œmessageæ˜¯Illegal userIdã€‚å› ä¸ºè¯·æ±‚æ²¡æœ‰åˆ°è®¢å•æœåŠ¡ï¼Œæ‰€ä»¥infoã€codeã€dataéƒ½æ˜¯é»˜è®¤å€¼ï¼Œè®¢å•çŠ¶æ€çš„é»˜è®¤å€¼æ˜¯Createdã€‚å› æ­¤ï¼Œç¬¬äºŒæ¬¡ä¸‹å•è‚¯å®šå¤±è´¥äº†ï¼Œä½†è®¢å•çŠ¶æ€å´æ˜¯å·²åˆ›å»ºã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æ­¤æ··ä¹±çš„æ¥å£å®šä¹‰å’Œå®ç°æ–¹å¼ï¼Œæ˜¯æ— æ³•è®©è°ƒç”¨è€…åˆ†æ¸…åˆ°åº•åº”è¯¥æ€ä¹ˆå¤„ç†çš„ã€‚<strong>ä¸ºäº†å°†æ¥å£è®¾è®¡å¾—æ›´åˆç†ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¦‚ä¸‹ä¸¤ä¸ªåŸåˆ™ï¼š</strong></p><ul>\n<li>å¯¹å¤–éšè—å†…éƒ¨å®ç°ã€‚è™½ç„¶è¯´æ”¶å•æœåŠ¡è°ƒç”¨è®¢å•æœåŠ¡è¿›è¡ŒçœŸæ­£çš„ä¸‹å•æ“ä½œï¼Œä½†æ˜¯ç›´æ¥æ¥å£å…¶å®æ˜¯æ”¶å•æœåŠ¡æä¾›çš„ï¼Œæ”¶å•æœåŠ¡ä¸åº”è¯¥â€œç›´æ¥â€æš´éœ²å…¶èƒŒåè®¢å•æœåŠ¡çš„çŠ¶æ€ç ã€é”™è¯¯æè¿°ã€‚</li>\n<li>è®¾è®¡æ¥å£ç»“æ„æ—¶ï¼Œæ˜ç¡®æ¯ä¸ªå­—æ®µçš„å«ä¹‰ï¼Œä»¥åŠå®¢æˆ·ç«¯çš„å¤„ç†æ–¹å¼ã€‚</li>\n</ul><p>åŸºäºè¿™ä¸¤ä¸ªåŸåˆ™ï¼Œæˆ‘ä»¬è°ƒæ•´ä¸€ä¸‹è¿”å›ç»“æ„ä½“ï¼Œå»æ‰å¤–å±‚çš„infoï¼Œå³ä¸å†æŠŠè®¢å•æœåŠ¡çš„è°ƒç”¨ç»“æœå‘ŠçŸ¥å®¢æˆ·ç«¯ï¼š</p><pre><code>@Data\npublic class APIResponse&lt;T&gt; {\n    private boolean success;\n    private T data;\n    private int code;\n    private String message;\n}\n</code></pre><p>å¹¶æ˜ç¡®æ¥å£çš„è®¾è®¡é€»è¾‘ï¼š</p><ul>\n<li>å¦‚æœå‡ºç°é200çš„HTTPå“åº”çŠ¶æ€ç ï¼Œå°±ä»£è¡¨è¯·æ±‚æ²¡æœ‰åˆ°æ”¶å•æœåŠ¡ï¼Œå¯èƒ½æ˜¯ç½‘ç»œå‡ºé—®é¢˜ã€ç½‘ç»œè¶…æ—¶ï¼Œæˆ–è€…ç½‘ç»œé…ç½®çš„é—®é¢˜ã€‚è¿™æ—¶ï¼Œè‚¯å®šæ— æ³•æ‹¿åˆ°æœåŠ¡ç«¯çš„å“åº”ä½“ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»™äºˆå‹å¥½æç¤ºï¼Œæ¯”å¦‚è®©ç”¨æˆ·é‡è¯•ï¼Œä¸éœ€è¦ç»§ç»­è§£æå“åº”ç»“æ„ä½“ã€‚</li>\n<li>å¦‚æœHTTPå“åº”ç æ˜¯200ï¼Œè§£æå“åº”ä½“æŸ¥çœ‹successï¼Œä¸ºfalseä»£è¡¨ä¸‹å•è¯·æ±‚å¤„ç†å¤±è´¥ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ”¶å•æœåŠ¡å‚æ•°éªŒè¯é”™è¯¯ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºè®¢å•æœåŠ¡ä¸‹å•æ“ä½œå¤±è´¥ã€‚è¿™æ—¶ï¼Œæ ¹æ®æ”¶å•æœåŠ¡å®šä¹‰çš„é”™è¯¯ç è¡¨å’Œcodeï¼Œåšä¸åŒå¤„ç†ã€‚æ¯”å¦‚å‹å¥½æç¤ºï¼Œæˆ–æ˜¯è®©ç”¨æˆ·é‡æ–°å¡«å†™ç›¸å…³ä¿¡æ¯ï¼Œå…¶ä¸­å‹å¥½æç¤ºçš„æ–‡å­—å†…å®¹å¯ä»¥ä»messageä¸­è·å–ã€‚</li>\n<li>successä¸ºtrueçš„æƒ…å†µä¸‹ï¼Œæ‰éœ€è¦ç»§ç»­è§£æå“åº”ä½“ä¸­çš„dataç»“æ„ä½“ã€‚dataç»“æ„ä½“ä»£è¡¨äº†ä¸šåŠ¡æ•°æ®ï¼Œé€šå¸¸ä¼šæœ‰ä¸‹é¢ä¸¤ç§æƒ…å†µã€‚\n<ul>\n<li>é€šå¸¸æƒ…å†µä¸‹ï¼Œsuccessä¸ºtrueæ—¶è®¢å•çŠ¶æ€æ˜¯Createdï¼Œè·å–orderIdå±æ€§å¯ä»¥æ‹¿åˆ°è®¢å•å·ã€‚</li>\n<li>ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ¯”å¦‚æ”¶å•æœåŠ¡å†…éƒ¨å¤„ç†ä¸å½“ï¼Œæˆ–æ˜¯è®¢å•æœåŠ¡å‡ºç°äº†é¢å¤–çš„çŠ¶æ€ï¼Œè™½ç„¶successä¸ºtrueï¼Œä½†è®¢å•å®é™…çŠ¶æ€ä¸æ˜¯Createdï¼Œè¿™æ—¶å¯ä»¥ç»™äºˆå‹å¥½çš„é”™è¯¯æç¤ºã€‚</li>\n</ul>\n</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/cd/ed/cd799f2bdb407bcb9ff5ad452376a6ed.jpg?wh=3400*2577\" alt=\"\"></p><p>æ˜ç¡®äº†æ¥å£çš„è®¾è®¡é€»è¾‘ï¼Œæˆ‘ä»¬å°±æ˜¯å¯ä»¥å®ç°æ”¶å•æœåŠ¡çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ¥æ¨¡æ‹Ÿè¿™äº›æƒ…å†µäº†ã€‚</p><p>é¦–å…ˆï¼Œå®ç°æœåŠ¡ç«¯çš„é€»è¾‘ï¼š</p><pre><code>@GetMapping(&quot;server&quot;)\npublic APIResponse&lt;OrderInfo&gt; server(@RequestParam(&quot;userId&quot;) Long userId) {\n    APIResponse&lt;OrderInfo&gt; response = new APIResponse&lt;&gt;();\n    if (userId == null) {\n        //å¯¹äºuserIdä¸ºç©ºçš„æƒ…å†µï¼Œæ”¶å•æœåŠ¡ç›´æ¥å¤„ç†å¤±è´¥ï¼Œç»™äºˆç›¸åº”çš„é”™è¯¯ç å’Œé”™è¯¯æç¤º\n        response.setSuccess(false);\n        response.setCode(3001);\n        response.setMessage(&quot;Illegal userId&quot;);\n    } else if (userId == 1) {\n        //å¯¹äºuserId=1çš„ç”¨æˆ·ï¼Œæ¨¡æ‹Ÿè®¢å•æœåŠ¡å¯¹äºé£é™©ç”¨æˆ·çš„æƒ…å†µ\n        response.setSuccess(false);\n        //æŠŠè®¢å•æœåŠ¡è¿”å›çš„é”™è¯¯ç è½¬æ¢ä¸ºæ”¶å•æœåŠ¡é”™è¯¯ç \n        response.setCode(3002);\n        response.setMessage(&quot;Internal Error, order is cancelled&quot;);\n        //åŒæ—¶æ—¥å¿—è®°å½•å†…éƒ¨é”™è¯¯\n        log.warn(&quot;ç”¨æˆ· {} è°ƒç”¨è®¢å•æœåŠ¡å¤±è´¥ï¼ŒåŸå› æ˜¯ Risk order detected&quot;, userId);\n    } else {\n        //å…¶ä»–ç”¨æˆ·ï¼Œä¸‹å•æˆåŠŸ\n        response.setSuccess(true);\n        response.setCode(2000);\n        response.setMessage(&quot;OK&quot;);\n        response.setData(new OrderInfo(&quot;Created&quot;, 2L));\n    }\n    return response;\n}\n</code></pre><p>å®¢æˆ·ç«¯ä»£ç ï¼Œåˆ™å¯ä»¥æŒ‰ç…§æµç¨‹å›¾ä¸Šçš„é€»è¾‘æ¥å®ç°ï¼ŒåŒæ ·æ¨¡æ‹Ÿä¸‰ç§å‡ºé”™æƒ…å†µå’Œæ­£å¸¸ä¸‹å•çš„æƒ…å†µï¼š</p><ul>\n<li>error==1çš„ç”¨ä¾‹æ¨¡æ‹Ÿä¸€ä¸ªä¸å­˜åœ¨çš„URLï¼Œè¯·æ±‚æ— æ³•åˆ°æ”¶å•æœåŠ¡ï¼Œä¼šå¾—åˆ°404çš„HTTPçŠ¶æ€ç ï¼Œç›´æ¥è¿›è¡Œå‹å¥½æç¤ºï¼Œè¿™æ˜¯ç¬¬ä¸€å±‚å¤„ç†ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/c1/36/c1ddea0ebf6d86956d68efb0424a6b36.png?wh=1032*232\" alt=\"\"></p><ul>\n<li>error==2çš„ç”¨ä¾‹æ¨¡æ‹ŸuserIdå‚æ•°ä¸ºç©ºçš„æƒ…å†µï¼Œæ”¶å•æœåŠ¡ä¼šå› ä¸ºç¼ºå°‘userIdå‚æ•°æç¤ºéæ³•ç”¨æˆ·ã€‚è¿™æ—¶ï¼Œå¯ä»¥æŠŠå“åº”ä½“ä¸­çš„messageå±•ç¤ºç»™ç”¨æˆ·ï¼Œè¿™æ˜¯ç¬¬äºŒå±‚å¤„ç†ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/f3/47/f36d21beb95ce0e7ea96dfde96f21847.png?wh=1348*208\" alt=\"\"></p><ul>\n<li>error==3çš„ç”¨ä¾‹æ¨¡æ‹ŸuserIdä¸º1çš„æƒ…å†µï¼Œå› ä¸ºç”¨æˆ·æœ‰é£é™©ï¼Œæ”¶å•æœåŠ¡è°ƒç”¨è®¢å•æœåŠ¡å‡ºé”™ã€‚å¤„ç†æ–¹å¼å’Œä¹‹å‰æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œå› ä¸ºæ”¶å•æœåŠ¡ä¼šå±è”½è®¢å•æœåŠ¡çš„å†…éƒ¨é”™è¯¯ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/41/2c/412c64e66a574d8252ac8dd59b4cfe2c.png?wh=1716*208\" alt=\"\"></p><p>ä½†åœ¨æœåŠ¡ç«¯å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><pre><code>[14:13:13.951] [http-nio-45678-exec-8] [WARN ] [.c.a.d.APIThreeLevelStatusController:36  ] - ç”¨æˆ· 1 è°ƒç”¨è®¢å•æœåŠ¡å¤±è´¥ï¼ŒåŸå› æ˜¯ Risk order detected\n</code></pre><ul>\n<li>error==0çš„ç”¨ä¾‹æ¨¡æ‹Ÿæ­£å¸¸ç”¨æˆ·ï¼Œä¸‹å•æˆåŠŸã€‚è¿™æ—¶å¯ä»¥è§£ædataç»“æ„ä½“æå–ä¸šåŠ¡ç»“æœï¼Œä½œä¸ºå…œåº•ï¼Œéœ€è¦åˆ¤æ–­è®¢å•çŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯Createdåˆ™ç»™äºˆå‹å¥½æç¤ºï¼Œå¦åˆ™æŸ¥è¯¢orderIdè·å¾—ä¸‹å•çš„è®¢å•å·ï¼Œè¿™æ˜¯ç¬¬ä¸‰å±‚å¤„ç†ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/f5/48/f57ae156de7592de167bd09aaadb8348.png?wh=1234*222\" alt=\"\"></p><p>å®¢æˆ·ç«¯çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>@GetMapping(&quot;client&quot;)\npublic String client(@RequestParam(value = &quot;error&quot;, defaultValue = &quot;0&quot;) int error) {\n   String url = Arrays.asList(&quot;http://localhost:45678/apiresposne/server?userId=2&quot;,\n        &quot;http://localhost:45678/apiresposne/server2&quot;,\n        &quot;http://localhost:45678/apiresposne/server?userId=&quot;,\n        &quot;http://localhost:45678/apiresposne/server?userId=1&quot;).get(error);\n\n    //ç¬¬ä¸€å±‚ï¼Œå…ˆçœ‹çŠ¶æ€ç ï¼Œå¦‚æœçŠ¶æ€ç ä¸æ˜¯200ï¼Œä¸å¤„ç†å“åº”ä½“\n    String response = &quot;&quot;;\n    try {\n        response = Request.Get(url).execute().returnContent().asString();\n    } catch (HttpResponseException e) {\n        log.warn(&quot;è¯·æ±‚æœåŠ¡ç«¯å‡ºç°è¿”å›é200&quot;, e);\n        return &quot;æœåŠ¡å™¨å¿™ï¼Œè¯·ç¨åå†è¯•ï¼&quot;;\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    //çŠ¶æ€ç ä¸º200çš„æƒ…å†µä¸‹å¤„ç†å“åº”ä½“\n    if (!response.equals(&quot;&quot;)) {\n        try {\n            APIResponse&lt;OrderInfo&gt; apiResponse = objectMapper.readValue(response, new TypeReference&lt;APIResponse&lt;OrderInfo&gt;&gt;() {\n            });\n            //ç¬¬äºŒå±‚ï¼Œsuccessæ˜¯falseç›´æ¥æç¤ºç”¨æˆ·\n            if (!apiResponse.isSuccess()) {\n                return String.format(&quot;åˆ›å»ºè®¢å•å¤±è´¥ï¼Œè¯·ç¨åå†è¯•ï¼Œé”™è¯¯ä»£ç ï¼š %s é”™è¯¯åŸå› ï¼š%s&quot;, apiResponse.getCode(), apiResponse.getMessage());\n            } else {\n                //ç¬¬ä¸‰å±‚ï¼Œå¾€ä¸‹è§£æOrderInfo\n                OrderInfo orderInfo = apiResponse.getData();\n                if (&quot;Created&quot;.equals(orderInfo.getStatus()))\n                    return String.format(&quot;åˆ›å»ºè®¢å•æˆåŠŸï¼Œè®¢å•å·æ˜¯ï¼š%sï¼ŒçŠ¶æ€æ˜¯ï¼š%s&quot;, orderInfo.getOrderId(), orderInfo.getStatus());\n                else\n                    return String.format(&quot;åˆ›å»ºè®¢å•å¤±è´¥ï¼Œè¯·è”ç³»å®¢æœå¤„ç†&quot;);\n            }\n        } catch (JsonProcessingException e) {\n            e.printStackTrace();\n        }\n    }\n    return &quot;&quot;;\n}\n</code></pre><p><strong>ç›¸æ¯”åŸæ¥æ··ä¹±çš„æ¥å£å®šä¹‰å’Œå¤„ç†é€»è¾‘ï¼Œæ”¹é€ åçš„ä»£ç ï¼Œæ˜ç¡®äº†æ¥å£æ¯ä¸€ä¸ªå­—æ®µçš„å«ä¹‰ï¼Œä»¥åŠå¯¹äºå„ç§æƒ…å†µæœåŠ¡ç«¯çš„è¾“å‡ºå’Œå®¢æˆ·ç«¯çš„å¤„ç†æ­¥éª¤ï¼Œå¯¹é½äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å¤„ç†é€»è¾‘</strong>ã€‚é‚£ä¹ˆç°åœ¨ï¼Œä½ èƒ½å›ç­”å‰é¢é‚£4ä¸ªè®©äººç–‘æƒ‘çš„é—®é¢˜äº†å—ï¼Ÿ</p><p>æœ€ååˆ†äº«ä¸€ä¸ªå°æŠ€å·§ã€‚ä¸ºäº†ç®€åŒ–æœåŠ¡ç«¯ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåŒ…è£…APIå“åº”ä½“APIResponseçš„å·¥ä½œäº¤ç”±æ¡†æ¶è‡ªåŠ¨å®Œæˆï¼Œè¿™æ ·ç›´æ¥è¿”å›DTO OrderInfoå³å¯ã€‚å¯¹äºä¸šåŠ¡é€»è¾‘é”™è¯¯ï¼Œå¯ä»¥æŠ›å‡ºä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ï¼š</p><pre><code>@GetMapping(&quot;server&quot;)\npublic OrderInfo server(@RequestParam(&quot;userId&quot;) Long userId) {\n    if (userId == null) {\n        throw new APIException(3001, &quot;Illegal userId&quot;);\n    }\n\n    if (userId == 1) {\n        ...\n        //ç›´æ¥æŠ›å‡ºå¼‚å¸¸\n        throw new APIException(3002, &quot;Internal Error, order is cancelled&quot;);\n    }\n    //ç›´æ¥è¿”å›DTO\n    return new OrderInfo(&quot;Created&quot;, 2L);\n}\n</code></pre><p>åœ¨APIExceptionä¸­åŒ…å«é”™è¯¯ç å’Œé”™è¯¯æ¶ˆæ¯ï¼š</p><pre><code>public class APIException extends RuntimeException {\n    @Getter\n    private int errorCode;\n    @Getter\n    private String errorMessage;\n\n    public APIException(int errorCode, String errorMessage) {\n        super(errorMessage);\n        this.errorCode = errorCode;\n        this.errorMessage = errorMessage;\n    }\n\n    public APIException(Throwable cause, int errorCode, String errorMessage) {\n        super(errorMessage, cause);\n        this.errorCode = errorCode;\n        this.errorMessage = errorMessage;\n    }\n}\n</code></pre><p>ç„¶åï¼Œå®šä¹‰ä¸€ä¸ª@RestControllerAdviceæ¥å®Œæˆè‡ªåŠ¨åŒ…è£…å“åº”ä½“çš„å·¥ä½œï¼š</p><ol>\n<li>é€šè¿‡å®ç°ResponseBodyAdviceæ¥å£çš„beforeBodyWriteæ–¹æ³•ï¼Œæ¥å¤„ç†æˆåŠŸè¯·æ±‚çš„å“åº”ä½“è½¬æ¢ã€‚</li>\n<li>å®ç°ä¸€ä¸ª@ExceptionHandleræ¥å¤„ç†ä¸šåŠ¡å¼‚å¸¸æ—¶ï¼ŒAPIExceptionåˆ°APIResponseçš„è½¬æ¢ã€‚</li>\n</ol><pre><code>//æ­¤æ®µä»£ç åªæ˜¯Demoï¼Œç”Ÿäº§çº§åº”ç”¨è¿˜éœ€è¦æ‰©å±•å¾ˆå¤šç»†èŠ‚\n@RestControllerAdvice\n@Slf4j\npublic class APIResponseAdvice implements ResponseBodyAdvice&lt;Object&gt; {\n\n    //è‡ªåŠ¨å¤„ç†APIExceptionï¼ŒåŒ…è£…ä¸ºAPIResponse\n    @ExceptionHandler(APIException.class)\n    public APIResponse handleApiException(HttpServletRequest request, APIException ex) {\n        log.error(&quot;process url {} failed&quot;, request.getRequestURL().toString(), ex);\n        APIResponse apiResponse = new APIResponse();\n        apiResponse.setSuccess(false);\n        apiResponse.setCode(ex.getErrorCode());\n        apiResponse.setMessage(ex.getErrorMessage());\n        return apiResponse;\n    }\n\n    //ä»…å½“æ–¹æ³•æˆ–ç±»æ²¡æœ‰æ ‡è®°@NoAPIResponseæ‰è‡ªåŠ¨åŒ…è£…\n    @Override\n    public boolean supports(MethodParameter returnType, Class converterType) {\n        return returnType.getParameterType() != APIResponse.class\n                &amp;&amp; AnnotationUtils.findAnnotation(returnType.getMethod(), NoAPIResponse.class) == null\n                &amp;&amp; AnnotationUtils.findAnnotation(returnType.getDeclaringClass(), NoAPIResponse.class) == null;\n    }\n\n    //è‡ªåŠ¨åŒ…è£…å¤–å±‚APIResposneå“åº”\n    @Override\n    public Object beforeBodyWrite(Object body, MethodParameter returnType, MediaType selectedContentType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; selectedConverterType, ServerHttpRequest request, ServerHttpResponse response) {\n        APIResponse apiResponse = new APIResponse();\n        apiResponse.setSuccess(true);\n        apiResponse.setMessage(&quot;OK&quot;);\n        apiResponse.setCode(2000);\n        apiResponse.setData(body);\n        return apiResponse;\n    }\n}\n</code></pre><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ª@NoAPIResponseè‡ªå®šä¹‰æ³¨è§£ã€‚å¦‚æœæŸäº›@RestControllerçš„æ¥å£ä¸å¸Œæœ›å®ç°è‡ªåŠ¨åŒ…è£…çš„è¯ï¼Œå¯ä»¥æ ‡è®°è¿™ä¸ªæ³¨è§£ï¼š</p><pre><code>@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface NoAPIResponse {\n}\n</code></pre><p>åœ¨ResponseBodyAdviceçš„supportæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ’é™¤äº†æ ‡è®°æœ‰è¿™ä¸ªæ³¨è§£çš„æ–¹æ³•æˆ–ç±»çš„è‡ªåŠ¨å“åº”ä½“åŒ…è£…ã€‚æ¯”å¦‚ï¼Œå¯¹äºåˆšæ‰æˆ‘ä»¬å®ç°çš„æµ‹è¯•å®¢æˆ·ç«¯clientæ–¹æ³•ä¸éœ€è¦åŒ…è£…ä¸ºAPIResponseï¼Œå°±å¯ä»¥æ ‡è®°ä¸Šè¿™ä¸ªæ³¨è§£ï¼š</p><pre><code>@GetMapping(&quot;client&quot;)\n@NoAPIResponse\npublic String client(@RequestParam(value = &quot;error&quot;, defaultValue = &quot;0&quot;) int error)\n</code></pre><p>è¿™æ ·æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä¸­å°±ä¸éœ€è¦è€ƒè™‘å“åº”ä½“çš„åŒ…è£…ï¼Œä»£ç ä¼šæ›´ç®€æ´ã€‚</p><h2>è¦è€ƒè™‘æ¥å£å˜è¿çš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥</h2><p>æ¥å£ä¸å¯èƒ½ä¸€æˆä¸å˜ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ä¸æ–­å¢åŠ å†…éƒ¨é€»è¾‘ã€‚å¦‚æœåšå¤§çš„åŠŸèƒ½è°ƒæ•´æˆ–é‡æ„ï¼Œæ¶‰åŠå‚æ•°å®šä¹‰çš„å˜åŒ–æˆ–æ˜¯å‚æ•°åºŸå¼ƒï¼Œå¯¼è‡´æ¥å£æ— æ³•å‘å‰å…¼å®¹ï¼Œè¿™æ—¶æ¥å£å°±éœ€è¦æœ‰ç‰ˆæœ¬çš„æ¦‚å¿µã€‚åœ¨è€ƒè™‘æ¥å£ç‰ˆæœ¬ç­–ç•¥è®¾è®¡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ€å¥½ä¸€å¼€å§‹å°±æ˜ç¡®ç‰ˆæœ¬ç­–ç•¥ï¼Œå¹¶è€ƒè™‘åœ¨æ•´ä¸ªæœåŠ¡ç«¯ç»Ÿä¸€ç‰ˆæœ¬ç­–ç•¥ã€‚</p><p><strong>ç¬¬ä¸€ï¼Œç‰ˆæœ¬ç­–ç•¥æœ€å¥½ä¸€å¼€å§‹å°±è€ƒè™‘ã€‚</strong></p><p>æ—¢ç„¶æ¥å£æ€»æ˜¯è¦å˜è¿çš„ï¼Œé‚£ä¹ˆæœ€å¥½ä¸€å¼€å§‹å°±ç¡®å®šç‰ˆæœ¬ç­–ç•¥ã€‚æ¯”å¦‚ï¼Œç¡®å®šæ˜¯é€šè¿‡URL Pathå®ç°ï¼Œæ˜¯é€šè¿‡QueryStringå®ç°ï¼Œè¿˜æ˜¯é€šè¿‡HTTPå¤´å®ç°ã€‚è¿™ä¸‰ç§å®ç°æ–¹å¼çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>//é€šè¿‡URL Pathå®ç°ç‰ˆæœ¬æ§åˆ¶\n@GetMapping(&quot;/v1/api/user&quot;)\npublic int right1(){\n    return 1;\n}\n//é€šè¿‡QueryStringä¸­çš„versionå‚æ•°å®ç°ç‰ˆæœ¬æ§åˆ¶\n@GetMapping(value = &quot;/api/user&quot;, params = &quot;version=2&quot;)\npublic int right2(@RequestParam(&quot;version&quot;) int version) {\n    return 2;\n}\n//é€šè¿‡è¯·æ±‚å¤´ä¸­çš„X-API-VERSIONå‚æ•°å®ç°ç‰ˆæœ¬æ§åˆ¶\n@GetMapping(value = &quot;/api/user&quot;, headers = &quot;X-API-VERSION=3&quot;)\npublic int right3(@RequestHeader(&quot;X-API-VERSION&quot;) int version) {\n    return 3;\n}\n</code></pre><p>è¿™æ ·ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥åœ¨é…ç½®ä¸­å¤„ç†ç›¸å…³ç‰ˆæœ¬æ§åˆ¶çš„å‚æ•°ï¼Œæœ‰å¯èƒ½å®ç°ç‰ˆæœ¬çš„åŠ¨æ€åˆ‡æ¢ã€‚</p><p>è¿™ä¸‰ç§æ–¹å¼ä¸­ï¼ŒURL Pathçš„æ–¹å¼æœ€ç›´è§‚ä¹Ÿæœ€ä¸å®¹æ˜“å‡ºé”™ï¼›QueryStringä¸æ˜“æºå¸¦ï¼Œä¸å¤ªæ¨èä½œä¸ºå…¬å¼€APIçš„ç‰ˆæœ¬ç­–ç•¥ï¼›HTTPå¤´çš„æ–¹å¼æ¯”è¾ƒæ²¡æœ‰ä¾µå…¥æ€§ï¼Œå¦‚æœä»…ä»…æ˜¯éƒ¨åˆ†æ¥å£éœ€è¦è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œå¯ä»¥è€ƒè™‘è¿™ç§æ–¹å¼ã€‚</p><p><strong>ç¬¬äºŒï¼Œç‰ˆæœ¬å®ç°æ–¹å¼è¦ç»Ÿä¸€ã€‚</strong></p><p>ä¹‹å‰ï¼Œæˆ‘å°±é‡åˆ°è¿‡ä¸€ä¸ªO2Oé¡¹ç›®ï¼Œéœ€è¦é’ˆå¯¹å•†å“ã€å•†åº—å’Œç”¨æˆ·å®ç°RESTæ¥å£ã€‚è™½ç„¶å¤§å®¶çº¦å®šé€šè¿‡URL Pathæ–¹å¼å®ç°APIç‰ˆæœ¬æ§åˆ¶ï¼Œä½†å®ç°æ–¹å¼ä¸ç»Ÿä¸€ï¼Œæœ‰çš„æ˜¯/api/item/v1ï¼Œæœ‰çš„æ˜¯/api/v1/shopï¼Œè¿˜æœ‰çš„æ˜¯/v1/api/merchantï¼š</p><pre><code>@GetMapping(&quot;/api/item/v1&quot;)\npublic void wrong1(){\n}\n\n\n@GetMapping(&quot;/api/v1/shop&quot;)\npublic void wrong2(){\n}\n\n\n@GetMapping(&quot;/v1/api/merchant&quot;)\npublic void wrong3(){\n}\n</code></pre><p>æ˜¾ç„¶ï¼Œå•†å“ã€å•†åº—å’Œå•†æˆ·çš„æ¥å£å¼€å‘åŒå­¦ï¼Œæ²¡æœ‰æŒ‰ç…§ä¸€è‡´çš„URLæ ¼å¼æ¥å®ç°æ¥å£çš„ç‰ˆæœ¬æ§åˆ¶ã€‚æ›´è¦å‘½çš„æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½å¼€å‘å‡ºä¸¤ä¸ªURLç±»ä¼¼æ¥å£ï¼Œæ¯”å¦‚ä¸€ä¸ªæ˜¯/api/v1/userï¼Œå¦ä¸€ä¸ªæ˜¯/api/user/v1ï¼Œè¿™åˆ°åº•æ˜¯ä¸€ä¸ªæ¥å£è¿˜æ˜¯ä¸¤ä¸ªæ¥å£å‘¢ï¼Ÿ</p><p>ç›¸æ¯”äºåœ¨æ¯ä¸€ä¸ªæ¥å£çš„URL Pathä¸­è®¾ç½®ç‰ˆæœ¬å·ï¼Œæ›´ç†æƒ³çš„æ–¹å¼æ˜¯åœ¨æ¡†æ¶å±‚é¢å®ç°ç»Ÿä¸€ã€‚å¦‚æœä½ ä½¿ç”¨Springæ¡†æ¶çš„è¯ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼è‡ªå®šä¹‰RequestMappingHandlerMappingæ¥å®ç°ã€‚</p><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ³¨è§£æ¥å®šä¹‰æ¥å£çš„ç‰ˆæœ¬ã€‚@APIVersionè‡ªå®šä¹‰æ³¨è§£å¯ä»¥åº”ç”¨äºæ–¹æ³•æˆ–Controllerä¸Šï¼š</p><pre><code>@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface APIVersion {\n    String[] value();\n}\n</code></pre><p>ç„¶åï¼Œå®šä¹‰ä¸€ä¸ªAPIVersionHandlerMappingç±»ç»§æ‰¿RequestMappingHandlerMappingã€‚</p><p>RequestMappingHandlerMappingçš„ä½œç”¨ï¼Œæ˜¯æ ¹æ®ç±»æˆ–æ–¹æ³•ä¸Šçš„@RequestMappingæ¥ç”ŸæˆRequestMappingInfoçš„å®ä¾‹ã€‚æˆ‘ä»¬è¦†ç›–registerHandlerMethodæ–¹æ³•çš„å®ç°ï¼Œä»@APIVersionè‡ªå®šä¹‰æ³¨è§£ä¸­è¯»å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ‹¼æ¥ä¸ŠåŸæœ‰çš„ã€ä¸å¸¦ç‰ˆæœ¬å·çš„URL Patternï¼Œæ„æˆæ–°çš„RequestMappingInfoï¼Œæ¥é€šè¿‡æ³¨è§£çš„æ–¹å¼ä¸ºæ¥å£å¢åŠ åŸºäºURLçš„ç‰ˆæœ¬å·ï¼š</p><pre><code>public class APIVersionHandlerMapping extends RequestMappingHandlerMapping {\n    @Override\n    protected boolean isHandler(Class&lt;?&gt; beanType) {\n        return AnnotatedElementUtils.hasAnnotation(beanType, Controller.class);\n    }\n\n\n    @Override\n    protected void registerHandlerMethod(Object handler, Method method, RequestMappingInfo mapping) {\n        Class&lt;?&gt; controllerClass = method.getDeclaringClass();\n        //ç±»ä¸Šçš„APIVersionæ³¨è§£\n        APIVersion apiVersion = AnnotationUtils.findAnnotation(controllerClass, APIVersion.class);\n        //æ–¹æ³•ä¸Šçš„APIVersionæ³¨è§£\n        APIVersion methodAnnotation = AnnotationUtils.findAnnotation(method, APIVersion.class);\n        //ä»¥æ–¹æ³•ä¸Šçš„æ³¨è§£ä¼˜å…ˆ\n        if (methodAnnotation != null) {\n            apiVersion = methodAnnotation;\n        }\n\n        String[] urlPatterns = apiVersion == null ? new String[0] : apiVersion.value();\n       \n        PatternsRequestCondition apiPattern = new PatternsRequestCondition(urlPatterns);\n        PatternsRequestCondition oldPattern = mapping.getPatternsCondition();\n        PatternsRequestCondition updatedFinalPattern = apiPattern.combine(oldPattern);\n        //é‡æ–°æ„å»ºRequestMappingInfo\n        mapping = new RequestMappingInfo(mapping.getName(), updatedFinalPattern, mapping.getMethodsCondition(),\n                mapping.getParamsCondition(), mapping.getHeadersCondition(), mapping.getConsumesCondition(),\n                mapping.getProducesCondition(), mapping.getCustomCondition());\n        super.registerHandlerMethod(handler, method, mapping);\n    }\n}\n</code></pre><p>æœ€åï¼Œä¹Ÿæ˜¯ç‰¹åˆ«å®¹æ˜“å¿½ç•¥çš„ä¸€ç‚¹ï¼Œè¦é€šè¿‡å®ç°WebMvcRegistrationsæ¥å£ï¼Œæ¥ç”Ÿæ•ˆè‡ªå®šä¹‰çš„APIVersionHandlerMappingï¼š</p><pre><code>@SpringBootApplication\npublic class CommonMistakesApplication implements WebMvcRegistrations {\n...\n    @Override\n    public RequestMappingHandlerMapping getRequestMappingHandlerMapping() {\n        return new APIVersionHandlerMapping();\n    }\n}\n</code></pre><p>è¿™æ ·ï¼Œå°±å®ç°äº†åœ¨Controllerä¸Šæˆ–æ¥å£æ–¹æ³•ä¸Šé€šè¿‡æ³¨è§£ï¼Œæ¥å®ç°ä»¥ç»Ÿä¸€çš„Patternè¿›è¡Œç‰ˆæœ¬å·æ§åˆ¶ï¼š</p><pre><code>@GetMapping(value = &quot;/api/user&quot;)\n@APIVersion(&quot;v4&quot;)\npublic int right4() {\n    return 4;\n}\n</code></pre><p>åŠ ä¸Šæ³¨è§£åï¼Œè®¿é—®æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f8/02/f8fae105eae532e93e329ae2d3253502.png?wh=952*184\" alt=\"\"></p><p>ä½¿ç”¨æ¡†æ¶æ¥æ˜ç¡®APIç‰ˆæœ¬çš„æŒ‡å®šç­–ç•¥ï¼Œä¸ä»…å®ç°äº†æ ‡å‡†åŒ–ï¼Œæ›´å®ç°äº†å¼ºåˆ¶çš„APIç‰ˆæœ¬æ§åˆ¶ã€‚å¯¹ä¸Šé¢ä»£ç ç•¥åšä¿®æ”¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä¸è®¾ç½®@APIVersionæ¥å£å°±ç»™äºˆæŠ¥é”™æç¤ºã€‚</p><h2>æ¥å£å¤„ç†æ–¹å¼è¦æ˜ç¡®åŒæ­¥è¿˜æ˜¯å¼‚æ­¥</h2><p>çœ‹åˆ°è¿™ä¸ªæ ‡é¢˜ï¼Œä½ å¯èƒ½æ„Ÿè§‰ä¸å¤ªå¥½ç†è§£ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹ä¸€ä¸ªå®é™…æ¡ˆä¾‹å§ã€‚</p><p>æœ‰ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ æœåŠ¡FileServiceï¼Œå…¶ä¸­ä¸€ä¸ªuploadæ–‡ä»¶ä¸Šä¼ æ¥å£ç‰¹åˆ«æ…¢ï¼ŒåŸå› æ˜¯è¿™ä¸ªä¸Šä¼ æ¥å£åœ¨å†…éƒ¨éœ€è¦è¿›è¡Œä¸¤æ­¥æ“ä½œï¼Œé¦–å…ˆä¸Šä¼ åŸå›¾ï¼Œç„¶åå‹ç¼©åä¸Šä¼ ç¼©ç•¥å›¾ã€‚å¦‚æœæ¯ä¸€æ­¥éƒ½è€—æ—¶5ç§’çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¥å£è¿”å›è‡³å°‘éœ€è¦10ç§’çš„æ—¶é—´ã€‚</p><p>äºæ˜¯ï¼Œå¼€å‘åŒå­¦æŠŠæ¥å£æ”¹ä¸ºäº†å¼‚æ­¥å¤„ç†ï¼Œæ¯ä¸€æ­¥æ“ä½œéƒ½é™å®šäº†è¶…æ—¶æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯åˆ†åˆ«æŠŠä¸Šä¼ åŸæ–‡ä»¶å’Œä¸Šä¼ ç¼©ç•¥å›¾çš„æ“ä½œæäº¤åˆ°çº¿ç¨‹æ± ï¼Œç„¶åç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼š</p><pre><code>private ExecutorService threadPool = Executors.newFixedThreadPool(2);\n\n//æˆ‘æ²¡æœ‰è´´å‡ºä¸¤ä¸ªæ–‡ä»¶ä¸Šä¼ æ–¹æ³•uploadFileå’ŒuploadThumbnailFileçš„å®ç°ï¼Œå®ƒä»¬åœ¨å†…éƒ¨åªæ˜¯éšæœºè¿›è¡Œä¼‘çœ ç„¶åè¿”å›æ–‡ä»¶åï¼Œå¯¹äºæœ¬ä¾‹æ¥è¯´ä¸æ˜¯å¾ˆé‡è¦\n\npublic UploadResponse upload(UploadRequest request) {\n    UploadResponse response = new UploadResponse();\n    //ä¸Šä¼ åŸå§‹æ–‡ä»¶ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± å¤„ç†\n    Future&lt;String&gt; uploadFile = threadPool.submit(() -&gt; uploadFile(request.getFile()));\n    //ä¸Šä¼ ç¼©ç•¥å›¾ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± å¤„ç†\n    Future&lt;String&gt; uploadThumbnailFile = threadPool.submit(() -&gt; uploadThumbnailFile(request.getFile()));\n    //ç­‰å¾…ä¸Šä¼ åŸå§‹æ–‡ä»¶ä»»åŠ¡å®Œæˆï¼Œæœ€å¤šç­‰å¾…1ç§’\n    try {\n        response.setDownloadUrl(uploadFile.get(1, TimeUnit.SECONDS));\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    //ç­‰å¾…ä¸Šä¼ ç¼©ç•¥å›¾ä»»åŠ¡å®Œæˆï¼Œæœ€å¤šç­‰å¾…1ç§’\n    try {\n        response.setThumbnailDownloadUrl(uploadThumbnailFile.get(1, TimeUnit.SECONDS));\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return response;\n}\n</code></pre><p>ä¸Šä¼ æ¥å£çš„è¯·æ±‚å’Œå“åº”æ¯”è¾ƒç®€å•ï¼Œä¼ å…¥äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¼ å‡ºåŸæ–‡ä»¶å’Œç¼©ç•¥å›¾ä¸‹è½½åœ°å€ï¼š</p><pre><code>@Data\npublic class UploadRequest {\n    private byte[] file;\n}\n\n@Data\npublic class UploadResponse {\n    private String downloadUrl;\n    private String thumbnailDownloadUrl;\n}\n</code></pre><p>åˆ°è¿™é‡Œï¼Œä½ èƒ½çœ‹å‡ºè¿™ç§å®ç°æ–¹å¼çš„é—®é¢˜æ˜¯ä»€ä¹ˆå—ï¼Ÿ</p><p>ä»æ¥å£å‘½åä¸Šçœ‹è™½ç„¶æ˜¯åŒæ­¥ä¸Šä¼ æ“ä½œï¼Œä½†å…¶å†…éƒ¨é€šè¿‡çº¿ç¨‹æ± è¿›è¡Œå¼‚æ­¥ä¸Šä¼ ï¼Œå¹¶å› ä¸ºè®¾ç½®äº†è¾ƒçŸ­è¶…æ—¶æ‰€ä»¥æ¥å£æ•´ä½“å“åº”æŒºå¿«ã€‚ä½†æ˜¯ï¼Œ<strong>ä¸€æ—¦é‡åˆ°è¶…æ—¶ï¼Œæ¥å£å°±ä¸èƒ½è¿”å›å®Œæ•´çš„æ•°æ®ï¼Œä¸æ˜¯æ— æ³•æ‹¿åˆ°åŸæ–‡ä»¶ä¸‹è½½åœ°å€ï¼Œå°±æ˜¯æ— æ³•æ‹¿åˆ°ç¼©ç•¥å›¾ä¸‹è½½åœ°å€ï¼Œæ¥å£çš„è¡Œä¸ºå˜å¾—ä¸å¯é¢„æµ‹</strong>ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/78/8e75863413fd7a01514b47804f0c4a78.png?wh=1962*330\" alt=\"\"></p><p>æ‰€ä»¥ï¼Œè¿™ç§ä¼˜åŒ–æ¥å£å“åº”é€Ÿåº¦çš„æ–¹å¼å¹¶ä¸å¯å–ï¼Œ<strong>æ›´åˆç†çš„æ–¹å¼æ˜¯ï¼Œè®©ä¸Šä¼ æ¥å£è¦ä¹ˆæ˜¯å½»åº•çš„åŒæ­¥å¤„ç†ï¼Œè¦ä¹ˆæ˜¯å½»åº•çš„å¼‚æ­¥å¤„ç†</strong>ï¼š</p><ul>\n<li>æ‰€è°“åŒæ­¥å¤„ç†ï¼Œæ¥å£ä¸€å®šæ˜¯åŒæ­¥ä¸Šä¼ åŸæ–‡ä»¶å’Œç¼©ç•¥å›¾çš„ï¼Œè°ƒç”¨æ–¹å¯ä»¥è‡ªå·±é€‰æ‹©è°ƒç”¨è¶…æ—¶ï¼Œå¦‚æœæ¥å¾—åŠå¯ä»¥ä¸€ç›´ç­‰åˆ°ä¸Šä¼ å®Œæˆï¼Œå¦‚æœç­‰ä¸åŠå¯ä»¥ç»“æŸç­‰å¾…ï¼Œä¸‹ä¸€æ¬¡å†é‡è¯•ï¼›</li>\n<li>æ‰€è°“å¼‚æ­¥å¤„ç†ï¼Œæ¥å£æ˜¯ä¸¤æ®µå¼çš„ï¼Œä¸Šä¼ æ¥å£æœ¬èº«åªæ˜¯è¿”å›ä¸€ä¸ªä»»åŠ¡IDï¼Œç„¶åå¼‚æ­¥åšä¸Šä¼ æ“ä½œï¼Œä¸Šä¼ æ¥å£å“åº”å¾ˆå¿«ï¼Œå®¢æˆ·ç«¯éœ€è¦ä¹‹åå†æ‹¿ç€ä»»åŠ¡IDè°ƒç”¨ä»»åŠ¡æŸ¥è¯¢æ¥å£æŸ¥è¯¢ä¸Šä¼ çš„æ–‡ä»¶URLã€‚</li>\n</ul><p>åŒæ­¥ä¸Šä¼ æ¥å£çš„å®ç°ä»£ç å¦‚ä¸‹ï¼ŒæŠŠè¶…æ—¶çš„é€‰æ‹©ç•™ç»™å®¢æˆ·ç«¯ï¼š</p><pre><code>public SyncUploadResponse syncUpload(SyncUploadRequest request) {\n    SyncUploadResponse response = new SyncUploadResponse();\n    response.setDownloadUrl(uploadFile(request.getFile()));\n    response.setThumbnailDownloadUrl(uploadThumbnailFile(request.getFile()));\n    return response;\n}\n</code></pre><p>è¿™é‡Œçš„SyncUploadRequestå’ŒSyncUploadResponseç±»ï¼Œä¸ä¹‹å‰å®šä¹‰çš„UploadRequestå’ŒUploadResponseæ˜¯ä¸€è‡´çš„ã€‚å¯¹äºæ¥å£çš„å…¥å‚å’Œå‡ºå‚DTOçš„å‘½åï¼Œæˆ‘æ¯”è¾ƒå»ºè®®çš„æ–¹å¼æ˜¯ï¼Œä½¿ç”¨æ¥å£å+Requestå’ŒResponseåç¼€ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹å¼‚æ­¥çš„ä¸Šä¼ æ–‡ä»¶æ¥å£å¦‚ä½•å®ç°ã€‚å¼‚æ­¥ä¸Šä¼ æ¥å£åœ¨å‡ºå‚ä¸Šæœ‰ç‚¹åŒºåˆ«ï¼Œä¸å†è¿”å›æ–‡ä»¶URLï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªä»»åŠ¡IDï¼š</p><pre><code>@Data\npublic class AsyncUploadRequest {\n    private byte[] file;\n}\n\n@Data\npublic class AsyncUploadResponse {\n    private String taskId;\n}\n</code></pre><p>åœ¨æ¥å£å®ç°ä¸Šï¼Œæˆ‘ä»¬åŒæ ·æŠŠä¸Šä¼ ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± å¤„ç†ï¼Œä½†æ˜¯å¹¶ä¸ä¼šåŒæ­¥ç­‰å¾…ä»»åŠ¡å®Œæˆï¼Œè€Œæ˜¯å®ŒæˆåæŠŠç»“æœå†™å…¥ä¸€ä¸ªHashMapï¼Œä»»åŠ¡æŸ¥è¯¢æ¥å£é€šè¿‡æŸ¥è¯¢è¿™ä¸ªHashMapæ¥è·å¾—æ–‡ä»¶çš„URLï¼š</p><pre><code>//è®¡æ•°å™¨ï¼Œä½œä¸ºä¸Šä¼ ä»»åŠ¡çš„ID\nprivate AtomicInteger atomicInteger = new AtomicInteger(0);\n//æš‚å­˜ä¸Šä¼ æ“ä½œçš„ç»“æœï¼Œç”Ÿäº§ä»£ç éœ€è¦è€ƒè™‘æ•°æ®æŒä¹…åŒ–\nprivate ConcurrentHashMap&lt;String, SyncQueryUploadTaskResponse&gt; downloadUrl = new ConcurrentHashMap&lt;&gt;();\n//å¼‚æ­¥ä¸Šä¼ æ“ä½œ\npublic AsyncUploadResponse asyncUpload(AsyncUploadRequest request) {\n    AsyncUploadResponse response = new AsyncUploadResponse();\n    //ç”Ÿæˆå”¯ä¸€çš„ä¸Šä¼ ä»»åŠ¡ID\n    String taskId = &quot;upload&quot; + atomicInteger.incrementAndGet();\n    //å¼‚æ­¥ä¸Šä¼ æ“ä½œåªè¿”å›ä»»åŠ¡ID\n    response.setTaskId(taskId);\n    //æäº¤ä¸Šä¼ åŸå§‹æ–‡ä»¶æ“ä½œåˆ°çº¿ç¨‹æ± å¼‚æ­¥å¤„ç†\n    threadPool.execute(() -&gt; {\n        String url = uploadFile(request.getFile());\n        //å¦‚æœConcurrentHashMapä¸åŒ…å«Keyï¼Œåˆ™åˆå§‹åŒ–ä¸€ä¸ªSyncQueryUploadTaskResponseï¼Œç„¶åè®¾ç½®DownloadUrl\n        downloadUrl.computeIfAbsent(taskId, id -&gt; new SyncQueryUploadTaskResponse(id)).setDownloadUrl(url);\n    });\n    //æäº¤ä¸Šä¼ ç¼©ç•¥å›¾æ“ä½œåˆ°çº¿ç¨‹æ± å¼‚æ­¥å¤„ç†\n    threadPool.execute(() -&gt; {\n        String url = uploadThumbnailFile(request.getFile());\n        downloadUrl.computeIfAbsent(taskId, id -&gt; new SyncQueryUploadTaskResponse(id)).setThumbnailDownloadUrl(url);\n    });\n    return response;\n}\n</code></pre><p>æ–‡ä»¶ä¸Šä¼ æŸ¥è¯¢æ¥å£åˆ™ä»¥ä»»åŠ¡IDä½œä¸ºå…¥å‚ï¼Œè¿”å›ä¸¤ä¸ªæ–‡ä»¶çš„ä¸‹è½½åœ°å€ï¼Œå› ä¸ºæ–‡ä»¶ä¸Šä¼ æŸ¥è¯¢æ¥å£æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥ç›´æ¥å‘½åä¸ºsyncQueryUploadTaskï¼š</p><pre><code>//syncQueryUploadTaskæ¥å£å…¥å‚\n@Data\n@RequiredArgsConstructor\npublic class SyncQueryUploadTaskRequest {\n    private final String taskId;//ä½¿ç”¨ä¸Šä¼ æ–‡ä»¶ä»»åŠ¡IDæŸ¥è¯¢ä¸Šä¼ ç»“æœ \n}\n//syncQueryUploadTaskæ¥å£å‡ºå‚\n@Data\n@RequiredArgsConstructor\npublic class SyncQueryUploadTaskResponse {\n    private final String taskId; //ä»»åŠ¡ID\n    private String downloadUrl; //åŸå§‹æ–‡ä»¶ä¸‹è½½URL\n    private String thumbnailDownloadUrl; //ç¼©ç•¥å›¾ä¸‹è½½URL\n}\n\npublic SyncQueryUploadTaskResponse syncQueryUploadTask(SyncQueryUploadTaskRequest request) {\n    SyncQueryUploadTaskResponse response = new SyncQueryUploadTaskResponse(request.getTaskId());\n     //ä»ä¹‹å‰å®šä¹‰çš„downloadUrl ConcurrentHashMapæŸ¥è¯¢ç»“æœ\nresponse.setDownloadUrl(downloadUrl.getOrDefault(request.getTaskId(), response).getDownloadUrl());\n    response.setThumbnailDownloadUrl(downloadUrl.getOrDefault(request.getTaskId(), response).getThumbnailDownloadUrl());\n    return response;\n}\n</code></pre><p>ç»è¿‡æ”¹é€ çš„FileServiceä¸å†æä¾›ä¸€ä¸ªçœ‹èµ·æ¥æ˜¯åŒæ­¥ä¸Šä¼ ï¼Œå†…éƒ¨å´æ˜¯å¼‚æ­¥ä¸Šä¼ çš„uploadæ–¹æ³•ï¼Œæ”¹ä¸ºæä¾›å¾ˆæ˜ç¡®çš„ï¼š</p><ul>\n<li>åŒæ­¥ä¸Šä¼ æ¥å£syncUploadï¼›</li>\n<li>å¼‚æ­¥ä¸Šä¼ æ¥å£asyncUploadï¼Œæ­é…syncQueryUploadTaskæŸ¥è¯¢ä¸Šä¼ ç»“æœã€‚</li>\n</ul><p>ä½¿ç”¨æ–¹å¯ä»¥æ ¹æ®ä¸šåŠ¡æ€§è´¨é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼šå¦‚æœæ˜¯åç«¯æ‰¹å¤„ç†ä½¿ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨åŒæ­¥ä¸Šä¼ ï¼Œå¤šç­‰å¾…ä¸€äº›æ—¶é—´é—®é¢˜ä¸å¤§ï¼›å¦‚æœæ˜¯é¢å‘ç”¨æˆ·çš„æ¥å£ï¼Œé‚£ä¹ˆæ¥å£å“åº”æ—¶é—´ä¸å®œè¿‡é•¿ï¼Œå¯ä»¥è°ƒç”¨å¼‚æ­¥ä¸Šä¼ æ¥å£ï¼Œç„¶åå®šæ—¶è½®è¯¢ä¸Šä¼ ç»“æœï¼Œæ‹¿åˆ°ç»“æœå†æ˜¾ç¤ºã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>ä»Šå¤©ï¼Œæˆ‘é’ˆå¯¹æ¥å£è®¾è®¡ï¼Œå’Œä½ æ·±å…¥æ¢è®¨äº†ä¸‰ä¸ªæ–¹é¢çš„é—®é¢˜ã€‚</p><p>ç¬¬ä¸€ï¼Œé’ˆå¯¹å“åº”ä½“çš„è®¾è®¡æ··ä¹±ã€å“åº”ç»“æœçš„ä¸æ˜ç¡®é—®é¢˜ï¼ŒæœåŠ¡ç«¯éœ€è¦æ˜ç¡®å“åº”ä½“æ¯ä¸€ä¸ªå­—æ®µçš„æ„ä¹‰ï¼Œä»¥ä¸€è‡´çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œå¹¶ç¡®ä¿ä¸é€ä¼ ä¸‹æ¸¸æœåŠ¡çš„é”™è¯¯ã€‚</p><p>ç¬¬äºŒï¼Œé’ˆå¯¹æ¥å£ç‰ˆæœ¬æ§åˆ¶é—®é¢˜ï¼Œä¸»è¦å°±æ˜¯åœ¨å¼€å‘æ¥å£ä¹‹å‰æ˜ç¡®ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ï¼Œä»¥åŠå°½é‡ä½¿ç”¨ç»Ÿä¸€çš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ä¸¤æ–¹é¢ã€‚</p><p>ç¬¬ä¸‰ï¼Œé’ˆå¯¹æ¥å£çš„å¤„ç†æ–¹å¼ï¼Œæˆ‘è®¤ä¸ºéœ€è¦æ˜ç¡®è¦ä¹ˆæ˜¯åŒæ­¥è¦ä¹ˆæ˜¯å¼‚æ­¥ã€‚å¦‚æœAPIåˆ—è¡¨ä¸­æ—¢æœ‰åŒæ­¥æ¥å£ä¹Ÿæœ‰å¼‚æ­¥æ¥å£ï¼Œé‚£ä¹ˆæœ€å¥½ç›´æ¥åœ¨æ¥å£åä¸­æ˜ç¡®ã€‚</p><p>ä¸€ä¸ªè‰¯å¥½çš„æ¥å£æ–‡æ¡£ä¸ä»…ä»…éœ€è¦è¯´æ˜å¦‚ä½•è°ƒç”¨æ¥å£ï¼Œæ›´éœ€è¦è¡¥å……æ¥å£ä½¿ç”¨çš„æœ€ä½³å®è·µä»¥åŠæ¥å£çš„SLAæ ‡å‡†ã€‚æˆ‘çœ‹åˆ°çš„å¤§éƒ¨åˆ†æ¥å£æ–‡æ¡£åªç»™å‡ºäº†å‚æ•°å®šä¹‰ï¼Œä½†è¯¸å¦‚å¹‚ç­‰æ€§ã€åŒæ­¥å¼‚æ­¥ã€ç¼“å­˜ç­–ç•¥ç­‰çœ‹ä¼¼å†…éƒ¨å®ç°ç›¸å…³çš„ä¸€äº›è®¾è®¡ï¼Œå…¶å®ä¹Ÿä¼šå½±å“è°ƒç”¨æ–¹å¯¹æ¥å£çš„ä½¿ç”¨ç­–ç•¥ï¼Œæœ€å¥½ä¹Ÿå¯ä»¥ä½“ç°åœ¨æ¥å£æ–‡æ¡£ä¸­ã€‚</p><p>æœ€åï¼Œæˆ‘å†é¢å¤–æä¸€ä¸‹ï¼Œå¯¹äºæœåŠ¡ç«¯å‡ºé”™çš„æ—¶å€™æ˜¯å¦è¿”å›200å“åº”ç çš„é—®é¢˜ï¼Œå…¶å®ä¸€ç›´æœ‰äº‰è®ºã€‚ä»RESTfulè®¾è®¡åŸåˆ™æ¥çœ‹ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡åˆ©ç”¨HTTPçŠ¶æ€ç æ¥è¡¨è¾¾é”™è¯¯ï¼Œä½†ä¹Ÿä¸æ˜¯è¿™ä¹ˆç»å¯¹ã€‚</p><p>å¦‚æœæˆ‘ä»¬è®¤ä¸ºHTTP çŠ¶æ€ç æ˜¯åè®®å±‚é¢çš„å±¥çº¦ï¼Œé‚£ä¹ˆå½“è¿™ä¸ªé”™è¯¯å·²ç»ä¸æ¶‰åŠHTTPåè®®æ—¶ï¼ˆæ¢å¥è¯è¯´ï¼ŒæœåŠ¡ç«¯å·²ç»æ”¶åˆ°è¯·æ±‚è¿›å…¥æœåŠ¡ç«¯ä¸šåŠ¡å¤„ç†åäº§ç”Ÿçš„é”™è¯¯ï¼‰ï¼Œä¸ä¸€å®šéœ€è¦ç¡¬å¥—åè®®æœ¬èº«çš„é”™è¯¯ç ã€‚ä½†æ¶‰åŠéæ³•URLã€éæ³•å‚æ•°ã€æ²¡æœ‰æƒé™ç­‰æ— æ³•å¤„ç†è¯·æ±‚çš„æƒ…å†µï¼Œè¿˜æ˜¯åº”è¯¥ä½¿ç”¨æ­£ç¡®çš„å“åº”ç æ¥åº”å¯¹ã€‚</p><p>ä»Šå¤©ç”¨åˆ°çš„ä»£ç ï¼Œæˆ‘éƒ½æ”¾åœ¨äº†GitHubä¸Šï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"https://github.com/JosephZhu1983/java-common-mistakes\">è¿™ä¸ªé“¾æ¥</a>æŸ¥çœ‹ã€‚</p><h2>æ€è€ƒä¸è®¨è®º</h2><ol>\n<li>åœ¨ç¬¬ä¸€èŠ‚çš„ä¾‹å­ä¸­ï¼Œæ¥å£å“åº”ç»“æ„ä½“ä¸­çš„codeå­—æ®µä»£è¡¨æ‰§è¡Œç»“æœçš„é”™è¯¯ç ï¼Œå¯¹äºä¸šåŠ¡ç‰¹åˆ«å¤æ‚çš„æ¥å£ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šé”™è¯¯æƒ…å†µï¼Œcodeå¯èƒ½ä¼šæœ‰å‡ åç”šè‡³å‡ ç™¾ä¸ªã€‚å®¢æˆ·ç«¯å¼€å‘äººå‘˜éœ€è¦æ ¹æ®æ¯ä¸€ç§é”™è¯¯æƒ…å†µé€ä¸€å†™if-elseè¿›è¡Œä¸åŒäº¤äº’å¤„ç†ï¼Œä¼šéå¸¸éº»çƒ¦ï¼Œä½ è§‰å¾—æœ‰ä»€ä¹ˆåŠæ³•æ¥æ”¹è¿›å—ï¼Ÿä½œä¸ºæœåŠ¡ç«¯ï¼Œæ˜¯å¦æœ‰å¿…è¦å‘ŠçŸ¥å®¢æˆ·ç«¯æ¥å£æ‰§è¡Œçš„é”™è¯¯ç å‘¢ï¼Ÿ</li>\n<li>åœ¨ç¬¬äºŒèŠ‚çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨ç±»æˆ–æ–¹æ³•ä¸Šæ ‡è®°@APIVersionè‡ªå®šä¹‰æ³¨è§£ï¼Œå®ç°äº†URLæ–¹å¼ç»Ÿä¸€çš„æ¥å£ç‰ˆæœ¬å®šä¹‰ã€‚ä½ å¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹å¼ï¼ˆä¹Ÿå°±æ˜¯è‡ªå®šä¹‰RequestMappingHandlerMappingï¼‰ï¼Œæ¥å®ç°ä¸€å¥—ç»Ÿä¸€çš„åŸºäºè¯·æ±‚å¤´æ–¹å¼çš„ç‰ˆæœ¬æ§åˆ¶å—ï¼Ÿ</li>\n</ol><p>å…³äºæ¥å£è®¾è®¡ï¼Œä½ è¿˜é‡åˆ°è¿‡å…¶ä»–é—®é¢˜å—ï¼Ÿæˆ‘æ˜¯æœ±æ™”ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºä¸æˆ‘ç•™è¨€åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ï¼Œä¸€èµ·äº¤æµã€‚</p>","neighbors":{"left":{"article_title":"21 |  ä»£ç é‡å¤ï¼šæå®šä»£ç é‡å¤çš„ä¸‰ä¸ªç»æ‹›","id":228964},"right":{"article_title":"23 | ç¼“å­˜è®¾è®¡ï¼šç¼“å­˜å¯ä»¥é”¦ä¸Šæ·»èŠ±ä¹Ÿå¯ä»¥è½äº•ä¸‹çŸ³","id":231501}},"comments":[{"had_liked":false,"id":216295,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1589222402,"is_pvip":false,"replies":[{"id":"80039","content":"æœåŠ¡ç«¯éœ€è¦åšé”™è¯¯ç å½’ç±»æ”¶æ•›ï¼Œç‰¹åˆ«æ˜¯åº”è¯¥è½¬æ¢ä¸‹æ¸¸æœåŠ¡å¤šå°‘å¼‚å¸¸ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šä¸çŸ¥æ‰€æªã€‚æˆ‘ä»¬ä¹‹å‰å°è¯•è¿‡æœåŠ¡ç«¯é©±åŠ¨çš„æ–¹å¼ï¼Œè®©æœåŠ¡ç«¯å‘ŠçŸ¥å®¢æˆ·ç«¯å¦‚ä½•å¤„ç†ï¼Œè¯´ç™½äº†å®¢æˆ·ç«¯åªéœ€è¦ç…§åšå³å¯ï¼Œä¸éœ€è¦æ„ŸçŸ¥é”™è¯¯ç çš„å«ä¹‰ï¼Œå³ä¾¿å®¢æˆ·ç«¯æ˜¾ç¤ºé”™è¯¯ç ä¹Ÿåªæ˜¯ç”¨äºæ’é”™ï¼Œä¸‹é¢æ˜¯ç›¸å…³ä»‹ç»ï¼š<br><br>è¯´ç™½äº†è¿™ç§æ¨¡å¼ï¼Œå°±æ˜¯åœ¨APIçš„è¿”å›ç»“æœä¸­åŒ…å«é©±åŠ¨å®¢æˆ·ç«¯å»æ€ä¹ˆåšçš„ä¿¡æ¯ï¼Œä¸¤ä¸ªå±‚æ¬¡ï¼š<br><br>1ã€äº¤äº’é©±åŠ¨ï¼šæ¯”å¦‚åŒ…å«actionTypeå’ŒactionInfoï¼ŒactionTypeå¯ä»¥æ˜¯toastã€alertã€redirectViewã€redirectWebViewç­‰ï¼ŒactionInfoå°±æ˜¯toastçš„ä¿¡æ¯ã€alertçš„ä¿¡æ¯ã€redirectçš„URLç­‰ã€‚ç”±æœåŠ¡ç«¯æ¥æ˜ç¡®å®¢æˆ·ç«¯åœ¨è¯·æ±‚APIåçš„äº¤äº’è¡Œä¸ºçš„å¥½å¤„æ˜¯ï¼š<br>çµæ´»ï¼šåœ¨ç´§æ€¥çš„æ—¶å€™è¿˜å¯ä»¥é€šè¿‡redirectæ–¹å¼è¿›è¡Œæ•‘æ€¥ï¼Œæ¯”å¦‚é‡åˆ°ç‰¹æ®Šæƒ…å†µéœ€è¦ç´§æ€¥è¿›è¡Œé€»è¾‘ä¿®æ”¹å¯ä»¥ç›´æ¥åœ¨ä¸å‘ç‰ˆçš„æƒ…å†µä¸‹åˆ‡æ¢åˆ°H5å®ç°ï¼Œç”šè‡³æˆ‘ä»¬å¯ä»¥æä¾›åå°è®©äº§å“æˆ–è¿è¥æ¥é…ç½®äº¤äº’çš„æ–¹å¼å’Œä¿¡æ¯<br>ç»Ÿä¸€ï¼šæœ‰çš„æ—¶å€™ä¼šé‡åˆ°ä¸åŒçš„å®¢æˆ·ç«¯ï¼ŒiOSã€Androidã€å‰ç«¯å¯¹äºäº¤äº’çš„å®ç°ä¸ç»Ÿä¸€çš„æƒ…å†µï¼Œå¦‚æœAPIç»“æœå¯ä»¥è§„å®šè¿™éƒ¨åˆ†å†…å®¹å¯ä»¥å½»åº•é¿å…è¿™ä¸ªé—®é¢˜<br>2ã€è¡Œä¸ºé©±åŠ¨ï¼šæ›´æ·±ä¸€å±‚çš„æœåŠ¡ç«¯é©±åŠ¨ï¼Œå¯ä»¥å®ç°ä¸€å¥—APIä½œä¸ºå…¥å£ï¼Œè®©å®¢æˆ·ç«¯è¿›è¡Œè°ƒç”¨ï¼Œç„¶åé€šè¿‡çº¦å®šä¸€å¥—DSLå‘ŠçŸ¥å®¢æˆ·ç«¯åº”è¯¥å‘ˆç°ä»€ä¹ˆï¼Œå¹²ä»€ä¹ˆã€‚<br>ä¹‹å‰æœ‰ä¸¤ä¸ªè¿™æ ·çš„é¡¹ç›®é‡‡ç”¨äº†ç±»ä¼¼çš„APIè®¾è®¡æ–¹å¼ï¼š<br><br>è´·æ¬¾å®¡æ ¸ï¼šæˆ‘ä»¬çŸ¥é“è´·æ¬¾çš„ä¿¡ç”¨å®¡æ ¸é€»è¾‘å¾€å¾€ä¼šå˜åŠ¨æ¯”è¾ƒå¤§ï¼Œè¿˜æ¶‰åŠåˆ°å®¢æˆ·ç«¯çš„ä¸€äº›æˆæƒï¼ˆæ¯”å¦‚è¿è¥å•†çˆ¬è™«ï¼‰ï¼Œè€Œä¸”Appçš„å‘å¸ƒæ›´æ–°å¾€å¾€æ¯”è¾ƒå›°éš¾ï¼ˆè‹¹æœApp Storeä»¥åŠå®‰å“å„å¤§åº”ç”¨å•†åº—çš„å®¡æ ¸é—®é¢˜ï¼‰ã€‚å¦‚æœé‡‡ç”¨æœåŠ¡ç«¯é©±åŠ¨çš„æ¶æ„æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯æ¥ä¸‹å»åº”è¯¥å‘ˆç°ä»€ä¹ˆç•Œé¢åšä»€ä¹ˆï¼Œé‚£ä¹ˆä¼šæœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚<br>å®¢æˆ·ç«¯çˆ¬è™«ï¼šæˆ‘ä»¬çŸ¥é“å¦‚æœé‡‡ç”¨æœåŠ¡ç«¯åšçˆ¬è™«å¾ˆå¤šæ—¶å€™å› ä¸ºIPçš„é—®é¢˜ä¼šè¢«å°ï¼Œæ‰€ä»¥éœ€è¦æ‰¾å¾ˆå¤šä»£ç†ã€‚æŸé¡¹ç›®æˆ‘ä»¬æƒ³å‡ºäº†å®¢æˆ·ç«¯å…±äº«ä»£ç†çš„æ¦‚å¿µï¼Œä½¿ç”¨æ‰‹æœºå®¢æˆ·ç«¯æ¥åšåˆ†å¸ƒå¼ä»£ç†ï¼Œç”±æœåŠ¡ç«¯é©±åŠ¨è°ƒåº¦æ‰€æœ‰çš„å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯éœ€è¦å¬ä»æœåŠ¡ç«¯çš„æŒ‡ç¤ºæ¥åšè¯·æ±‚ç„¶åä¸ŠæŠ¥å“åº”ã€‚<br>ä¸€èˆ¬è€Œè¨€ï¼Œå¯¹å¤–çš„Web APIæ˜¯ä¸ä¼šé‡‡ç”¨è¿™ç§æœåŠ¡ç«¯é©±åŠ¨å®¢æˆ·ç«¯çš„æ–¹å¼æ¥è®¾è®¡APIçš„ã€‚å¯¹äºæŸäº›ç‰¹æ®Šç±»å‹çš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘é‡‡ç”¨è¿™ç§æœåŠ¡ç«¯é©±åŠ¨çš„æ–¹å¼æ¥è®¾è®¡APIï¼Œè®©å®¢æˆ·ç«¯å˜ä¸ºä¸€ä¸ªä¸å«é€»è¾‘çš„æ‰§è¡Œè€…ï¼Œæ‰§è¡Œçš„æ˜¯UIå’Œäº¤äº’ã€‚","user_name":"ä½œè€…å›å¤","comment_id":216295,"uid":"1001470","ip_address":"","utype":1,"ctime":1589241725,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"78898633730","product_id":100047701,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜æˆ‘çš„è§£å†³æ˜¯æ§åˆ¶ä¸ºæ›´å°‘çš„é”™è¯¯ä»£ç <br>è°ƒç”¨æ•°æ®åº“æ˜¯ä¸€ç§ï¼Œè°ƒç”¨æœåŠ¡å¤±è´¥æ˜¯ä¸€ç§ï¼Œä¸šåŠ¡å±‚é”™è¯¯æ˜¯ä¸€ç§<br>è¿”å›åˆ°å®¢æˆ·ç«¯çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯ä¹‹åˆ¤æ–­é”™è¯¯ç±»å‹æ˜¯å“ªä¸€ç±»ï¼Œä»è€Œåšç›¸åº”çš„å¤„ç†ã€‚å¹¶ä¸å‘ŠçŸ¥å®¢æˆ·ç«¯è¯¦ç»†çš„é”™è¯¯å†…å®¹ã€‚è¯¦ç»†çš„é”™è¯¯å†…å®¹åº”è¯¥ç”±åç«¯å·¥ç¨‹å¸ˆæ¥æŠŠæ§ã€‚","like_count":19,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494757,"discussion_content":"æœåŠ¡ç«¯éœ€è¦åšé”™è¯¯ç å½’ç±»æ”¶æ•›ï¼Œç‰¹åˆ«æ˜¯åº”è¯¥è½¬æ¢ä¸‹æ¸¸æœåŠ¡å¤šå°‘å¼‚å¸¸ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šä¸çŸ¥æ‰€æªã€‚æˆ‘ä»¬ä¹‹å‰å°è¯•è¿‡æœåŠ¡ç«¯é©±åŠ¨çš„æ–¹å¼ï¼Œè®©æœåŠ¡ç«¯å‘ŠçŸ¥å®¢æˆ·ç«¯å¦‚ä½•å¤„ç†ï¼Œè¯´ç™½äº†å®¢æˆ·ç«¯åªéœ€è¦ç…§åšå³å¯ï¼Œä¸éœ€è¦æ„ŸçŸ¥é”™è¯¯ç çš„å«ä¹‰ï¼Œå³ä¾¿å®¢æˆ·ç«¯æ˜¾ç¤ºé”™è¯¯ç ä¹Ÿåªæ˜¯ç”¨äºæ’é”™ï¼Œä¸‹é¢æ˜¯ç›¸å…³ä»‹ç»ï¼š\n\nè¯´ç™½äº†è¿™ç§æ¨¡å¼ï¼Œå°±æ˜¯åœ¨APIçš„è¿”å›ç»“æœä¸­åŒ…å«é©±åŠ¨å®¢æˆ·ç«¯å»æ€ä¹ˆåšçš„ä¿¡æ¯ï¼Œä¸¤ä¸ªå±‚æ¬¡ï¼š\n\n1ã€äº¤äº’é©±åŠ¨ï¼šæ¯”å¦‚åŒ…å«actionTypeå’ŒactionInfoï¼ŒactionTypeå¯ä»¥æ˜¯toastã€alertã€redirectViewã€redirectWebViewç­‰ï¼ŒactionInfoå°±æ˜¯toastçš„ä¿¡æ¯ã€alertçš„ä¿¡æ¯ã€redirectçš„URLç­‰ã€‚ç”±æœåŠ¡ç«¯æ¥æ˜ç¡®å®¢æˆ·ç«¯åœ¨è¯·æ±‚APIåçš„äº¤äº’è¡Œä¸ºçš„å¥½å¤„æ˜¯ï¼š\nçµæ´»ï¼šåœ¨ç´§æ€¥çš„æ—¶å€™è¿˜å¯ä»¥é€šè¿‡redirectæ–¹å¼è¿›è¡Œæ•‘æ€¥ï¼Œæ¯”å¦‚é‡åˆ°ç‰¹æ®Šæƒ…å†µéœ€è¦ç´§æ€¥è¿›è¡Œé€»è¾‘ä¿®æ”¹å¯ä»¥ç›´æ¥åœ¨ä¸å‘ç‰ˆçš„æƒ…å†µä¸‹åˆ‡æ¢åˆ°H5å®ç°ï¼Œç”šè‡³æˆ‘ä»¬å¯ä»¥æä¾›åå°è®©äº§å“æˆ–è¿è¥æ¥é…ç½®äº¤äº’çš„æ–¹å¼å’Œä¿¡æ¯\nç»Ÿä¸€ï¼šæœ‰çš„æ—¶å€™ä¼šé‡åˆ°ä¸åŒçš„å®¢æˆ·ç«¯ï¼ŒiOSã€Androidã€å‰ç«¯å¯¹äºäº¤äº’çš„å®ç°ä¸ç»Ÿä¸€çš„æƒ…å†µï¼Œå¦‚æœAPIç»“æœå¯ä»¥è§„å®šè¿™éƒ¨åˆ†å†…å®¹å¯ä»¥å½»åº•é¿å…è¿™ä¸ªé—®é¢˜\n2ã€è¡Œä¸ºé©±åŠ¨ï¼šæ›´æ·±ä¸€å±‚çš„æœåŠ¡ç«¯é©±åŠ¨ï¼Œå¯ä»¥å®ç°ä¸€å¥—APIä½œä¸ºå…¥å£ï¼Œè®©å®¢æˆ·ç«¯è¿›è¡Œè°ƒç”¨ï¼Œç„¶åé€šè¿‡çº¦å®šä¸€å¥—DSLå‘ŠçŸ¥å®¢æˆ·ç«¯åº”è¯¥å‘ˆç°ä»€ä¹ˆï¼Œå¹²ä»€ä¹ˆã€‚\nä¹‹å‰æœ‰ä¸¤ä¸ªè¿™æ ·çš„é¡¹ç›®é‡‡ç”¨äº†ç±»ä¼¼çš„APIè®¾è®¡æ–¹å¼ï¼š\n\nè´·æ¬¾å®¡æ ¸ï¼šæˆ‘ä»¬çŸ¥é“è´·æ¬¾çš„ä¿¡ç”¨å®¡æ ¸é€»è¾‘å¾€å¾€ä¼šå˜åŠ¨æ¯”è¾ƒå¤§ï¼Œè¿˜æ¶‰åŠåˆ°å®¢æˆ·ç«¯çš„ä¸€äº›æˆæƒï¼ˆæ¯”å¦‚è¿è¥å•†çˆ¬è™«ï¼‰ï¼Œè€Œä¸”Appçš„å‘å¸ƒæ›´æ–°å¾€å¾€æ¯”è¾ƒå›°éš¾ï¼ˆè‹¹æœApp Storeä»¥åŠå®‰å“å„å¤§åº”ç”¨å•†åº—çš„å®¡æ ¸é—®é¢˜ï¼‰ã€‚å¦‚æœé‡‡ç”¨æœåŠ¡ç«¯é©±åŠ¨çš„æ¶æ„æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯æ¥ä¸‹å»åº”è¯¥å‘ˆç°ä»€ä¹ˆç•Œé¢åšä»€ä¹ˆï¼Œé‚£ä¹ˆä¼šæœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚\nå®¢æˆ·ç«¯çˆ¬è™«ï¼šæˆ‘ä»¬çŸ¥é“å¦‚æœé‡‡ç”¨æœåŠ¡ç«¯åšçˆ¬è™«å¾ˆå¤šæ—¶å€™å› ä¸ºIPçš„é—®é¢˜ä¼šè¢«å°ï¼Œæ‰€ä»¥éœ€è¦æ‰¾å¾ˆå¤šä»£ç†ã€‚æŸé¡¹ç›®æˆ‘ä»¬æƒ³å‡ºäº†å®¢æˆ·ç«¯å…±äº«ä»£ç†çš„æ¦‚å¿µï¼Œä½¿ç”¨æ‰‹æœºå®¢æˆ·ç«¯æ¥åšåˆ†å¸ƒå¼ä»£ç†ï¼Œç”±æœåŠ¡ç«¯é©±åŠ¨è°ƒåº¦æ‰€æœ‰çš„å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯éœ€è¦å¬ä»æœåŠ¡ç«¯çš„æŒ‡ç¤ºæ¥åšè¯·æ±‚ç„¶åä¸ŠæŠ¥å“åº”ã€‚\nä¸€èˆ¬è€Œè¨€ï¼Œå¯¹å¤–çš„Web APIæ˜¯ä¸ä¼šé‡‡ç”¨è¿™ç§æœåŠ¡ç«¯é©±åŠ¨å®¢æˆ·ç«¯çš„æ–¹å¼æ¥è®¾è®¡APIçš„ã€‚å¯¹äºæŸäº›ç‰¹æ®Šç±»å‹çš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘é‡‡ç”¨è¿™ç§æœåŠ¡ç«¯é©±åŠ¨çš„æ–¹å¼æ¥è®¾è®¡APIï¼Œè®©å®¢æˆ·ç«¯å˜ä¸ºä¸€ä¸ªä¸å«é€»è¾‘çš„æ‰§è¡Œè€…ï¼Œæ‰§è¡Œçš„æ˜¯UIå’Œäº¤äº’ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589241725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214306,"user_name":"æ¢¦å€šæ æ†","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1588717044,"is_pvip":false,"replies":[{"id":"79338","content":"1. å¯ä»¥å¼€å‘ä¸€ä¸ªç‹¬ç«‹çš„é”™è¯¯ç æœåŠ¡ï¼Œå®ç°è½¬ç ã€åˆ†ç±»ã€æ”¶æ•›é€»è¾‘ï¼Œç”šè‡³å¯ä»¥å¼€å‘åå°ï¼Œè®©äº§å“æ¥å½•å…¥éœ€è¦çš„é”™è¯¯ç æç¤ºæ¶ˆæ¯ã€‚é˜¿é‡Œçš„Javaå¼€å‘æ‰‹å†Œä¸­ä¹Ÿæœ‰æåˆ°ç›¸å…³é”™è¯¯ç çš„ä¸€äº›æ¨èçš„æœ€ä½³å®è·µã€‚<br>2. è¿™ç¡®å®æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥æ¡†æ¶å¦‚æœåšçš„å¥½çš„è¯ä¸ä»…ä»…è¦æ‰©å±•åŠŸèƒ½éƒ¨åˆ†è¿˜è¦æ‰“é€šæ–‡æ¡£ï¼Œæ¯”å¦‚å¦‚æœä½¿ç”¨springdocæ¥ä»€ç”ŸæˆOpenAPIæ–‡æ¡£ï¼Œé‚£ä¹ˆç›´æ¥æŠŠé‚£éƒ¨åˆ†ç”ŸæˆURLçš„é€»è¾‘ä¹Ÿæ”¹äº†","user_name":"ä½œè€…å›å¤","comment_id":214306,"uid":"1001470","ip_address":"","utype":1,"ctime":1588724482,"user_name_real":"æœ±æ™”"}],"discussion_count":6,"race_medal":0,"score":"53128324596","product_id":100047701,"comment_content":"1.ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå¯ä»¥å‚è€ƒhttpçŠ¶æ€ç çš„å®ç°æ–¹å¼ï¼Œä¸€ç±»é”™è¯¯ä»¥ç›¸åŒçš„æ•°å­—å‰ç¼€å¼€å¤´ã€‚æˆ‘ä»¬å®è·µçš„å¹¶ä¸å¥½(ä¸šåŠ¡ç³»ç»Ÿ)ï¼šé€ä¼ ä¸Šæ¸¸é”™è¯¯ç ï¼›æˆ–è€…æ˜¯æ”¹ç¼–ä¸€ä¸‹è°ƒç”¨å“ªä¸ªæœåŠ¡å“ªä¸ªæ¥å£å¤±è´¥ï¼›ç†ç”±ï¼šä¸ç®¡å“ªå‡ºäº†é—®é¢˜ï¼Œéƒ½æ˜¯ç«¯ä¸Šçš„åŒå­¦çš„å…ˆæ’æŸ¥é—®é¢˜ï¼Œä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œä»é”™è¯¯ä¿¡æ¯å¯ä»¥æ–¹ä¾¿çš„å®šä½åˆ°åº•æ˜¯å“ªå‡ºäº†é—®é¢˜ã€‚<br>2.ç¬¬äºŒä¸ªé—®é¢˜ï¼šå¯ç»´æŠ¤æ€§æ€ä¹ˆåŠã€‚æˆ‘ä»¬å½“å‰ä½¿ç”¨çš„æ˜¯spring MVC æˆ–è€…jerseyæ¡†æ¶å¼€å‘æ¥å£ï¼ŒIDEAéƒ½æœ‰ç°æˆçš„æ’ä»¶å¯ä»¥ç›´æ¥çœ‹æ¥å£ã€‚è¿™ç§æ–¹å¼æƒ³çŸ¥é“å®Œæ•´çš„æ¥å£è¿˜éœ€è¦äº†è§£apiVersionå®ç°é€»è¾‘ã€‚å¯èƒ½ä¼šæœ‰äººè¯´çœ‹æ–‡æ¡£ï¼Œä½†æ˜¯æ–‡æ¡£å’Œä»£ç çš„ä¸€è‡´æ€§æ€ä¹ˆä¿è¯å‘¢","like_count":13,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494020,"discussion_content":"1. å¯ä»¥å¼€å‘ä¸€ä¸ªç‹¬ç«‹çš„é”™è¯¯ç æœåŠ¡ï¼Œå®ç°è½¬ç ã€åˆ†ç±»ã€æ”¶æ•›é€»è¾‘ï¼Œç”šè‡³å¯ä»¥å¼€å‘åå°ï¼Œè®©äº§å“æ¥å½•å…¥éœ€è¦çš„é”™è¯¯ç æç¤ºæ¶ˆæ¯ã€‚é˜¿é‡Œçš„Javaå¼€å‘æ‰‹å†Œä¸­ä¹Ÿæœ‰æåˆ°ç›¸å…³é”™è¯¯ç çš„ä¸€äº›æ¨èçš„æœ€ä½³å®è·µã€‚\n2. è¿™ç¡®å®æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥æ¡†æ¶å¦‚æœåšçš„å¥½çš„è¯ä¸ä»…ä»…è¦æ‰©å±•åŠŸèƒ½éƒ¨åˆ†è¿˜è¦æ‰“é€šæ–‡æ¡£ï¼Œæ¯”å¦‚å¦‚æœä½¿ç”¨springdocæ¥ä»€ç”ŸæˆOpenAPIæ–‡æ¡£ï¼Œé‚£ä¹ˆç›´æ¥æŠŠé‚£éƒ¨åˆ†ç”ŸæˆURLçš„é€»è¾‘ä¹Ÿæ”¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588724482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1596049,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5a/91/f26d17d4.jpg","nickname":"âˆ«1/(x^4*âˆš(1+x^2))dx","note":"","ucode":"E300E20E5AF0FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290535,"discussion_content":"æˆ‘è§‰å¾—å¦‚æœæœ‰è¿™æ–¹é¢éœ€æ±‚ï¼Œä¸ä»æ³¨è§£å±‚é¢æ¥å¼ºåˆ¶ç‰ˆæœ¬è§„èŒƒï¼Œåªèƒ½ä»å¼€å‘çº¦å®šå±‚é¢æ¥ç»Ÿä¸€urlçš„å®šä¹‰æ ¼å¼ï¼Œé¿å…å‡ºç°ä¹±ä¸ƒå…«ç³Ÿçš„urlï¼Œå®šä¹‰çš„è·¯å¾„ä½¿ç”¨æ–‡æ¡£ç»´æŠ¤èµ·æ¥ï¼Œç„¶åå»è¯„å®¡åˆç†æ€§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594526611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1095857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","nickname":"æ¢¦å€šæ æ†","note":"","ucode":"BDEB97F2822445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1596049,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5a/91/f26d17d4.jpg","nickname":"âˆ«1/(x^4*âˆš(1+x^2))dx","note":"","ucode":"E300E20E5AF0FD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290774,"discussion_content":"ä½ çš„æ˜µç§°å¾ˆä¸ªæ€§å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594603436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":290535,"ip_address":""},"score":290774,"extra":""}]},{"author":{"id":1139455,"avatar":"https://static001.geekbang.org/account/avatar/00/11/62/ff/f71034e9.jpg","nickname":"æ‚Ÿç©ºWuKong","note":"","ucode":"49AFD2B048C1BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544428,"discussion_content":"æ²¡æœ‰å¿…è¦æŠŠé”™è¯¯ç ä¼ ç»™å®¢æˆ·ç«¯ï¼Œåªä¼ é”™è¯¯ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯åªéœ€è¦å±•ç¤ºé”™è¯¯ä¿¡æ¯å³å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641520487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383330,"discussion_content":"å¯¹äº è¯´çš„ ä¿å‡†è¿”å›ï¼Œå†æè®®é¢å¤–å¤š2ä¸ªå­—æ®µ\n1ï¼‰ã€traceId  \nå…¨é“¾è·¯è·Ÿè¸ªå­—æ®µã€‚æå¤§çš„é€Ÿåº¦æå‡æ•´ä¸ªé—®é¢˜æ’æŸ¥çš„é€Ÿåº¦\n2ï¼‰ã€detailErrorInfo\nè¯¦ç»†çš„é”™è¯¯æç¤ºã€‚ä¾‹å¦‚ å‚æ•°é”™è¯¯ï¼Œé‚£ä¹ˆåˆ°åº•å“ªä¸ªå‚æ•°é”™è¯¯ï¼Œçƒ¦è¯·å°½é‡ç›´æ¥è¯´æ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626059999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1237874,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e3/72/754314c2.jpg","nickname":"Jackson","note":"","ucode":"A76BC6A4EE13A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268758,"discussion_content":"æˆ‘ä»¬ä¼šä½¿ç”¨swaggeræ¥ç”Ÿæˆæ–‡æ¡£ï¼Œå¦‚æœè¿™æ ·çš„è¯ï¼Œæˆ‘ç†è§£çš„ç”Ÿæˆçš„swaggeræ–‡ä»¶å…¶å®ä¹Ÿæ˜¯ç¼ºå°‘ç‰ˆæœ¬å·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589815952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284547,"user_name":"x-rayîŒº","can_delete":false,"product_type":"c1","uid":1140175,"ip_address":"","ucode":"8363F0C4D0AC0B","user_header":"https://static001.geekbang.org/account/avatar/00/11/65/cf/326c0eea.jpg","comment_is_top":false,"comment_ctime":1616330220,"is_pvip":false,"replies":[{"id":"103287","content":"å“ˆå“ˆ","user_name":"ä½œè€…å›å¤","comment_id":284547,"uid":"1001470","ip_address":"","utype":1,"ctime":1616457554,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"44566003180","product_id":100047701,"comment_content":"@APIVersioné‚£æ®µå¤ªç‰›äº†ï¼Œç¿»çœ‹è¿‡SpringMVCçš„ä»£ç ï¼Œä¹ŸçŸ¥é“RequestMappingHandlerMappingæ˜¯å¹²ä»€ä¹ˆç”¨çš„ã€‚ä½†ä»æ¥æ²¡æƒ³è¿‡ï¼Œå¯ä»¥è¿™æ ·ç©ï¼Œå¯ä»¥ç»™ä¸šåŠ¡ä»£ç å¢åŠ ç”Ÿäº§åŠ›ã€‚","like_count":11,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517386,"discussion_content":"å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616457554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216099,"user_name":"Seven.Linæ¾¤è€¿","can_delete":false,"product_type":"c1","uid":1181192,"ip_address":"","ucode":"4CAB732CD6F149","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/08/855abb02.jpg","comment_is_top":false,"comment_ctime":1589190004,"is_pvip":false,"replies":[{"id":"79973","content":"å¼•ç”¨è‡ªã€Šé˜¿é‡ŒJavaå¼€å‘æ‰‹å†Œæ³°å±±ç‰ˆã€‹<br>12.ã€å‚è€ƒã€‘é”™è¯¯ç å°½é‡æœ‰åˆ©äºä¸åŒæ–‡åŒ–èƒŒæ™¯çš„å¼€å‘è€…è¿›è¡Œäº¤æµä¸ä»£ç åä½œã€‚<br>è¯´æ˜ï¼šè‹±æ–‡å•è¯å½¢å¼çš„é”™è¯¯ç ä¸åˆ©äºéè‹±è¯­æ¯è¯­å›½å®¶ï¼ˆå¦‚é˜¿æ‹‰ä¼¯è¯­ã€å¸Œä¼¯æ¥è¯­ã€ä¿„ç½—æ–¯è¯­ç­‰ï¼‰ä¹‹é—´çš„å¼€å‘<br>è€…äº’ç›¸åä½œã€‚","user_name":"ä½œè€…å›å¤","comment_id":216099,"uid":"1001470","ip_address":"","utype":1,"ctime":1589190735,"user_name_real":"æœ±æ™”"}],"discussion_count":4,"race_medal":0,"score":"35948928372","product_id":100047701,"comment_content":"å…¶å®ï¼Œæˆ‘ä¸æ˜¯å¾ˆè®¤åŒç”¨æ•°å­—ä½œä¸ºé”™è¯¯ç ï¼Œä¸ºä½•ä¸ç”¨å•è¯æ¥åšå‘¢ï¼Ÿå°±è·Ÿå•å…ƒæµ‹è¯•test1ã€test2ä¸€æ ·ï¼Œæ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œç›´æ¥ç”¨ç±»ä¼¼`USER_NOT_EXIST`ç±»ä¼¼çš„ä¸å¯ä»¥å—ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494668,"discussion_content":"å¼•ç”¨è‡ªã€Šé˜¿é‡ŒJavaå¼€å‘æ‰‹å†Œæ³°å±±ç‰ˆã€‹\n12.ã€å‚è€ƒã€‘é”™è¯¯ç å°½é‡æœ‰åˆ©äºä¸åŒæ–‡åŒ–èƒŒæ™¯çš„å¼€å‘è€…è¿›è¡Œäº¤æµä¸ä»£ç åä½œã€‚\nè¯´æ˜ï¼šè‹±æ–‡å•è¯å½¢å¼çš„é”™è¯¯ç ä¸åˆ©äºéè‹±è¯­æ¯è¯­å›½å®¶ï¼ˆå¦‚é˜¿æ‹‰ä¼¯è¯­ã€å¸Œä¼¯æ¥è¯­ã€ä¿„ç½—æ–¯è¯­ç­‰ï¼‰ä¹‹é—´çš„å¼€å‘\nè€…äº’ç›¸åä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589190735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342179,"discussion_content":"ç”¨å•è¯äº†ä¸å°±æ˜¯messageä¿¡æ¯å—ï¼Œä¹‹æ‰€ä»¥æœ‰code+messageæˆ‘è§‰å¾—ä¹Ÿæ˜¯ä¸ªè§£è€¦ï¼Œæ–¹ä¾¿messageæ”¹å˜codeä¸å˜çš„æƒ…å†µï¼Œå¹¶ä¸”messageå’Œcodeå¯ä»¥ç»´æŠ¤æˆå¤šå¯¹ä¸€çš„å…³ç³»ï¼Œå‡è½»å®¢æˆ·ç«¯è€¦åˆï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¸€ç›´ä»¥ç®€æ´ç¨³å®šçš„codeæ¥åˆ¤æ–­èµ°åˆ†æ”¯","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610607711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542987,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","nickname":"è¡Œåˆ™å°†è‡³","note":"","ucode":"DB972F2DF059C4","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400780,"discussion_content":"æˆ‘å¸ç›®å‰éƒ¨åˆ†ä¸šåŠ¡ç³»ç»Ÿçš„é”™è¯¯ç ç¡®å®ä¸æ˜¯æ•°å­—è€Œæ˜¯å­—ç¬¦ä¸²ï¼Œå°±æ˜¯æ¥¼ä¸»è¯´çš„è¿™ç§â€œUSER_NOT_EXISTSâ€å½¢å¼ã€‚å®é™…ä¸Šï¼Œå¦‚æœä¸æ˜¯è€å¸ˆè¯´çš„è¿™ç§æƒ…å†µã€‚ç›®å‰ç”¨ç€æ²¡å‘ç°å•¥é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633426016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181192,"avatar":"https://static001.geekbang.org/account/avatar/00/12/06/08/855abb02.jpg","nickname":"Seven.Linæ¾¤è€¿","note":"","ucode":"4CAB732CD6F149","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263864,"discussion_content":"å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589257724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224268,"user_name":"&#47;&#47;null","can_delete":false,"product_type":"c1","uid":1025045,"ip_address":"","ucode":"E24D976F201030","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/15/faee7f27.jpg","comment_is_top":false,"comment_ctime":1591328892,"is_pvip":false,"replies":[{"id":"82566","content":"æ˜¯çš„ï¼ŒæŠŠMappingJackson2HttpMessageConverteræ”¾åœ¨æœ€å‰é¢å³å¯ï¼Œæˆ–è€…åœ¨ResponseBodyAdviceé‡Œé¢åˆ¤æ–­ç±»å‹ï¼Œç‰¹æ®Šå¤„ç†","user_name":"ä½œè€…å›å¤","comment_id":224268,"uid":"1001470","ip_address":"","utype":1,"ctime":1591329461,"user_name_real":"æœ±æ™”"}],"discussion_count":2,"race_medal":0,"score":"27361132668","product_id":100047701,"comment_content":"è‡ªåŠ¨åŒ…è£…å¤–å±‚APIResposneå“åº”çš„é‚£è¾¹æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåˆšå¥½æˆ‘åœ¨åšçš„æ—¶å€™é‡åˆ°äº†ï¼Œå¦‚æœæ§åˆ¶å™¨è¿”å›çš„æ˜¯Stringç±»å‹ï¼Œé‚£ä¹ˆè¿”å›APIResponse å¯¹è±¡ä¼šå‡ºç°è½¬æ¢é”™è¯¯ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æ§åˆ¶å™¨è¿”å›çš„æ˜¯Stringç±»å‹ springmvcä¼šä½¿ç”¨ StringHttpMessageConverter è½¬æ¢å™¨ï¼Œè¿™æ—¶å€™ä¼šæŠ¥è½¬æ¢é”™è¯¯ã€‚","like_count":7,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497423,"discussion_content":"æ˜¯çš„ï¼ŒæŠŠMappingJackson2HttpMessageConverteræ”¾åœ¨æœ€å‰é¢å³å¯ï¼Œæˆ–è€…åœ¨ResponseBodyAdviceé‡Œé¢åˆ¤æ–­ç±»å‹ï¼Œç‰¹æ®Šå¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591329461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2016089,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/c3/59/5d0906ca.jpg","nickname":"åº","note":"","ucode":"126E89B3EB007C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394206,"discussion_content":"å¯ä»¥åœ¨APIResposneç±»é‡Œé¢å»å®ç°æ•°æ®çš„å°è£…ï¼Œæ¥å£ç»Ÿä¸€è¿”å›APIResposneå¯¹è±¡ï¼Œè¿”å›æ•°æ®çš„æ—¶å€™ä½¿ç”¨APIResposne.ok();APIResposne.error(&#34;errorMsg&#34;);è¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631785163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214637,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":false,"comment_ctime":1588776083,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"27358579859","product_id":100047701,"comment_content":"ä¸€ã€å…¶å®æœ‰ä¸€å®šçš„ä½œç”¨ï¼Œå…¶å®å¯ä»¥æ ¹æ®ä¸åŒåˆ†ç±»ï¼Œå‰ç«¯å…¶å®åœ¨å¤„ç†çš„æ—¶å€™ï¼Œå¯ä»¥ç»´æŠ¤ä¸€ä¸ªmapï¼Œkeyæ—¶é”™è¯¯ç çš„å‰1ä½æˆ–è€…2ä½ï¼Œæ ¹æ®å…·ä½“çš„ä¸šåŠ¡ï¼Œvalueæ—¶è¯¥çŠ¶æ€ç å¯¹åº”çš„å¤„ç†å™¨ï¼Œå°±æ˜¯å·¥å‚æ¨¡å¼ï¼Œè¿™æ ·çš„è¯å…¶å®ä¸ç”¨å¤„ç†if elseçš„é—®é¢˜ã€‚<br>äºŒã€ç¬¬äºŒä¸ªé—®é¢˜å›ç­”ä¸‹â€œæ¢¦å€šæ æ†â€ç«¥é‹çš„é—®é¢˜å§ï¼Œå…¶å®è‡ªå®šä¹‰RequestMappingHandlerMappingçš„æ—¶å€™ï¼Œå¯ä»¥æŠŠä¹‹å‰çš„ä¹Ÿæ³¨å†Œåˆ°registerHandlerMethodä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸å†™@APIVersionæ³¨è§£çš„è¯ï¼Œä¸å¸¦ç‰ˆæœ¬å·å’Œå¸¦v1ç‰ˆæœ¬éƒ½æ˜¯å¯ä»¥çš„åŒ¹é…åˆ°çš„ï¼Œè‹¥æ˜¯çœŸçš„æœ‰ä¸€å¤©æŸä¸ªæ¥å£éœ€è¦æ”¯æŒå¤šç‰ˆæœ¬ï¼Œé‚£ä¹ˆå¼€å‘ç«¥é‹ä¹Ÿå°±ä¸å¾—ä¸çœ‹@APIVersionçš„è¯´æ˜æ–‡æ¡£äº†ï¼Œå…¶å®ä¹Ÿä¸ç®—è§£å†³æ–¹å¼ï¼Œç®—æ˜¯ç¨è§„é¿äº†ä¸‹å§ï¼›æˆ‘ä»¬ä¹‹å‰åœ¨ä½¿ç”¨swagger2çš„æ—¶å€™ï¼Œå¥½åƒswagger2ç”Ÿæˆçš„æ¥å£æ˜¯é»˜è®¤å¸¦æœåŠ¡æ°‘ç§°çš„ï¼Œä½†æ˜¯æœ¬åœ°æµ‹è¯•çš„æ—¶å€™å…¶å®æ˜¯ä¸éœ€è¦çš„ï¼Œå¯¼è‡´è¯·æ±‚ä¸åˆ°ï¼Œæˆ‘ä»¬å°±è‡ªå®šä¹‰RequestMappingHandlerMappingï¼ŒæŠŠå¸¦æœåŠ¡åå’Œä¸å¸¦æœåŠ¡åçš„éƒ½åŠ åˆ°mappingä¸­ã€‚","like_count":7},{"had_liked":false,"id":214199,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1588674602,"is_pvip":false,"replies":[{"id":"79321","content":"ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ¯”å¦‚æ”¶å•æœåŠ¡å†…éƒ¨å¤„ç†ä¸å½“ï¼Œæˆ–æ˜¯è®¢å•æœåŠ¡å‡ºç°äº†é¢å¤–çš„çŠ¶æ€ï¼Œè™½ç„¶ success ä¸º trueï¼Œä½†è®¢å•å®é™…çŠ¶æ€ä¸æ˜¯ Createdï¼Œè¿™æ—¶å¯ä»¥ç»™äºˆå‹å¥½çš„é”™è¯¯æç¤ºã€‚ã€‹ã€‹è¿™æ®µæˆ‘æ˜¯æŒ‡å®¢æˆ·ç«¯çš„å¤„ç†é€»è¾‘ï¼Œå®¢æˆ·ç«¯éœ€è¦è€ƒè™‘åˆ°å„ç§æœåŠ¡ç«¯å“åº”çš„å¯èƒ½ã€‚<br><br>","user_name":"ä½œè€…å›å¤","comment_id":214199,"uid":"1001470","ip_address":"","utype":1,"ctime":1588680068,"user_name_real":"æœ±æ™”"}],"discussion_count":2,"race_medal":1,"score":"14473576490","product_id":100047701,"comment_content":"1. æˆ‘ä»¬æœ‰ä¸€ä¸ªcodeçš„å­—å…¸è¡¨ï¼Œå°±æ˜¯excelä¸­åˆ—å‡ºæ¥ï¼Œæ¯æ–°å¢ä¸€ä¸ªï¼Œå°±åœ¨é‡Œé¢åŠ ä¸€ä¸ªï¼Œå‰ç«¯æ ¹æ®è¿™ä¸ªè¡¨æ ¼åœ¨ä»£ç ä¸­å®ç°å­—å…¸è¡¨æŸ¥è¯¢ï¼Œç„¶åç”¨å‹å¥½çš„æç¤ºå±•ç¤ºç»™ç”¨æˆ·ã€‚<br>2. å›å¤´è¡¥ä»£ç ã€‚<br><br>æœ‰ä¸ªç–‘é—®ï¼Œ â€œç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ¯”å¦‚æ”¶å•æœåŠ¡å†…éƒ¨å¤„ç†ä¸å½“ï¼Œæˆ–æ˜¯è®¢å•æœåŠ¡å‡ºç°äº†é¢å¤–çš„çŠ¶æ€ï¼Œè™½ç„¶ success ä¸º trueï¼Œä½†è®¢å•å®é™…çŠ¶æ€ä¸æ˜¯ Createdï¼Œè¿™æ—¶å¯ä»¥ç»™äºˆå‹å¥½çš„é”™è¯¯æç¤ºã€‚â€<br>-------æˆ‘ä»¬æ²¡æœ‰è¿™ä¹ˆå¹²ï¼Œæˆ‘ä¸€æ—¶ä¹Ÿæœ‰ç‚¹æ¥å—ä¸äº†ï¼Œåªè¦æœ‰é”™è¯¯ï¼Œsuccessè‚¯å®šæ˜¯falseï¼Œæ‰€ä»¥æƒ³é—®é—®è€å¸ˆï¼Œæœ‰å…·ä½“çš„æ¡ˆä¾‹å¯ä»¥åˆ†äº«ä¸‹ä¹ˆï¼Œè°¢è°¢ã€‚å…¶ä»–å°ä¼™ä¼´ï¼Œä½ ä»¬å‘¢ï¼Œä¹Ÿæ˜¯è¿™ä¹ˆå¹²ä¹ˆã€‚","like_count":4,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493981,"discussion_content":"ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ¯”å¦‚æ”¶å•æœåŠ¡å†…éƒ¨å¤„ç†ä¸å½“ï¼Œæˆ–æ˜¯è®¢å•æœåŠ¡å‡ºç°äº†é¢å¤–çš„çŠ¶æ€ï¼Œè™½ç„¶ success ä¸º trueï¼Œä½†è®¢å•å®é™…çŠ¶æ€ä¸æ˜¯ Createdï¼Œè¿™æ—¶å¯ä»¥ç»™äºˆå‹å¥½çš„é”™è¯¯æç¤ºã€‚ã€‹ã€‹è¿™æ®µæˆ‘æ˜¯æŒ‡å®¢æˆ·ç«¯çš„å¤„ç†é€»è¾‘ï¼Œå®¢æˆ·ç«¯éœ€è¦è€ƒè™‘åˆ°å„ç§æœåŠ¡ç«¯å“åº”çš„å¯èƒ½ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588680068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183090,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0d/72/38c62a8f.jpg","nickname":"slowly","note":"","ucode":"D8F1FB2B9E7534","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":260478,"discussion_content":"ç”·ï¼šè®©æˆ‘ä»¬æ‰‹ç‰µæ‰‹ã€‚ã€‚ã€‚ï¼Ÿï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588864840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284482,"user_name":"x-rayîŒº","can_delete":false,"product_type":"c1","uid":1140175,"ip_address":"","ucode":"8363F0C4D0AC0B","user_header":"https://static001.geekbang.org/account/avatar/00/11/65/cf/326c0eea.jpg","comment_is_top":false,"comment_ctime":1616298571,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10206233163","product_id":100047701,"comment_content":"APIResponseAdviceè¿™ä¸ªæ–¹å¼æˆ‘è¯•è¿‡ï¼Œå¾ˆä¸é”™ï¼Œä½†å°±åƒè€å¸ˆè¯´çš„ï¼Œéœ€è¦è¿›è¡Œæ›´å¤šå¤„ç†ï¼Œå…¶ä¸­æˆ‘è‡ªå·±å‘ç°çš„ä¸¤ä¸ªå‘æ˜¯ï¼š<br>1.æ–¹æ³•è¿”å›ç±»å‹å¦‚æœæ˜¯Stringï¼Œéœ€è¦è‡ªå·±å®ç°jsonä¸²çš„å¤„ç†ï¼Œå› ä¸ºæ­¤æ—¶ç±»å‹è½¬æ¢ä¼˜å…ˆä½¿ç”¨StringHttpMessageConverterï¼Œè€Œä¸æ˜¯MappingJackson2HttpMessageConverter<br>2.æ–¹æ³•è¿”å›ç±»å‹å¦‚æœæ˜¯Objectï¼Œä¸èƒ½è¿”å›nullã€‚å¦‚æœä¸ºObjectï¼Œä¸”å®é™…è¿”å›nullï¼Œä¼šè·³è¿‡MediaTypeçš„é¢„åˆ¤å¤„ç†","like_count":2,"discussions":[{"author":{"id":1169313,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkeOAC8k7aPMfQZ4ickiavpfR9mTQs1wGhGtIicotzAoszE5qkLfFTabkDU2E39ovSgoibJ1IiaLXtGicg/132","nickname":"bigben","note":"","ucode":"DBD15A6C8E2590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569142,"discussion_content":"æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651331317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273511,"user_name":"å†‰é‡","can_delete":false,"product_type":"c1","uid":1137353,"ip_address":"","ucode":"2CAEA424996876","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/c9/933ee0a8.jpg","comment_is_top":false,"comment_ctime":1610617790,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10200552382","product_id":100047701,"comment_content":"åˆšä¸Šçº¿è¿™æ¬¡çš„ä¸šåŠ¡ä¹Ÿæœ‰ä¸€ä¸ªéœ€è¦å¯¼å‡ºæ¸…ç®—è®¢å•æ•°æ®ï¼Œä½¿ç”¨çš„æ–¹å¼è·Ÿè€å¸ˆå·®ä¸å¤šï¼Œèµ·äº†ä¸€ä¸ªæ–°çº¿ç¨‹å¼‚æ­¥å®Œæˆå¯¼å‡ºæ“ä½œï¼Œè¿”å›äº†taskIdå¹¶å®ä¾‹åŒ–åˆ°æ•°æ®åº“ï¼Œå‰ç«¯é€šè¿‡taskIdä¼šä¸€ç›´åœ¨è½®è¯¢å¯¼å‡ºç»“æœï¼Œå¦‚æœå®Œæˆåä¼šæ›´æ–°taskIdæ‰€åœ¨è®°å½•ï¼Œè¿”å›æ–‡ä»¶é“¾æ¥ï¼Œå®Œå…¨å®ç°äº†çº¯å¼‚æ­¥ï¼Œå†…å­˜æ¶ˆè€—å¾ˆå°ï¼ŒCPUå ç”¨ä¹Ÿå°ï¼Œå°¤å…¶æ˜¯å¯¼å…¥ï¼Œç™¾ä¸‡çº§çš„æ•°é‡å¯¼å…¥å¹¶æ¸…ç®—å®Œæˆï¼Œä¹Ÿåªç”¨äº†40ç§’ã€‚","like_count":2},{"had_liked":false,"id":301949,"user_name":"Geek_c5e36a","can_delete":false,"product_type":"c1","uid":2508111,"ip_address":"","ucode":"1700357E7071DC","user_header":"","comment_is_top":false,"comment_ctime":1625992974,"is_pvip":false,"replies":[{"id":"109287","content":"ä¸­å°ç³»ç»Ÿä¹Ÿåº”è¯¥å°½é‡æŠ½è±¡&amp;å±è”½èƒŒåå…·ä½“çš„æœåŠ¡ï¼Œé”™è¯¯ç å¯ä»¥æä¾›ç»Ÿä¸€çš„åå°æŸ¥è¯¢","user_name":"ä½œè€…å›å¤","comment_id":301949,"uid":"1001470","ip_address":"","utype":1,"ctime":1626057402,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"5920960270","product_id":100047701,"comment_content":"â€œè™½ç„¶è¯´æ”¶å•æœåŠ¡è°ƒç”¨è®¢å•æœåŠ¡è¿›è¡ŒçœŸæ­£çš„ä¸‹å•æ“ä½œï¼Œä½†æ˜¯ç›´æ¥æ¥å£å…¶å®æ˜¯æ”¶å•æœåŠ¡æä¾›çš„ï¼Œæ”¶å•æœåŠ¡ä¸åº”è¯¥â€œç›´æ¥â€æš´éœ²å…¶èƒŒåè®¢å•æœåŠ¡çš„çŠ¶æ€ç ã€é”™è¯¯æè¿°ã€‚â€ï¼Œè€å¸ˆï¼Œè¿™é‡Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œå¦‚æœæ˜¯ä½œä¸ºä¸€ç§ä¸­å°ç³»ç»Ÿï¼Œå¦‚æœä¸æŠŠä¸‹æ¸¸çš„é”™è¯¯æè¿°è¿”å›ç»™ä¸Šæ¸¸ï¼Œè¿™æ ·çš„è¯ï¼Œæ¯æ¬¡ä¸Šæ¸¸å‡ºé—®é¢˜éƒ½å¾—æ‰¾ä½ æŸ¥çŠ¶æ€ç ï¼Œé”™è¯¯æè¿°ï¼Œç„¶ååœ¨æ‰¾ä¸‹æ¸¸ç³»ç»Ÿè§£å†³ï¼Œè¿™æ ·ä¼šç»™ç³»ç»Ÿè¿ç»´å¸¦æ¥å¾ˆå¤§çš„å‹åŠ›å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523132,"discussion_content":"ä¸­å°ç³»ç»Ÿä¹Ÿåº”è¯¥å°½é‡æŠ½è±¡&amp;amp;å±è”½èƒŒåå…·ä½“çš„æœåŠ¡ï¼Œé”™è¯¯ç å¯ä»¥æä¾›ç»Ÿä¸€çš„åå°æŸ¥è¯¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626057402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292122,"user_name":"é˜¿æ¸…","can_delete":false,"product_type":"c1","uid":2015606,"ip_address":"","ucode":"29E19FF183938F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c1/76/788da264.jpg","comment_is_top":false,"comment_ctime":1620697616,"is_pvip":false,"replies":[{"id":"105780","content":"æœ¬åœ°äº‹åŠ¡+MQäº‹åŠ¡æ€§æ¶ˆæ¯&#47;æˆ–äº‹åŠ¡æ€§MQä½œä¸ºæ•´ä½“äº‹åŠ¡ï¼Œç”±MQç¡®ä¿æ•°æ®æœ€ç»ˆå¯ä»¥å‘ç»™å¦ä¸€ä¸ªæ¥å£<br>å½“ç„¶ä¹Ÿå¯ä»¥æœ¬åœ°ä¿å­˜åæ¯”è¾ƒç²—æš´é€šè¿‡çŠ¶æ€ä½å®ç°è¿œç¨‹æ¥å£è°ƒç”¨çš„è¡¥å¿ï¼Œé€šè¿‡Jobè¡¥å¿å¤±è´¥çš„æ¥å£è°ƒç”¨","user_name":"ä½œè€…å›å¤","comment_id":292122,"uid":"1001470","ip_address":"","utype":1,"ctime":1620715889,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"5915664912","product_id":100047701,"comment_content":"å¤§è…¿ï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ã€‚ç³»ç»Ÿæ˜¯ä¸€ä¸ªå•ä½“SSHé¡¹ç›®ï¼Œæœ‰ä¸€ä¸ªä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ï¼šç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªç”¨æˆ·å½•å…¥æˆ–ä¿®æ”¹å•æ®æ“ä½œï¼Œç”¨æˆ·å½•å…¥æˆ–ä¿®æ”¹å®Œæˆåï¼Œä¸ä»…è¦ä¿å­˜åœ¨æœ¬ç³»ç»Ÿä¸­ï¼ŒåŒæ—¶è¿˜æœ‰è°ƒç”¨å¦å¤–ä¸€ä¸ªç³»ç»Ÿæ¥å£ï¼ŒæŠŠæ•°æ®ä¼ ç»™ä»–ä»¬ã€‚é—®é¢˜æ˜¯å¦‚ä½•åšåˆ°ç±»ä¼¼äº‹åŠ¡ç»Ÿä¸€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519687,"discussion_content":"æœ¬åœ°äº‹åŠ¡+MQäº‹åŠ¡æ€§æ¶ˆæ¯/æˆ–äº‹åŠ¡æ€§MQä½œä¸ºæ•´ä½“äº‹åŠ¡ï¼Œç”±MQç¡®ä¿æ•°æ®æœ€ç»ˆå¯ä»¥å‘ç»™å¦ä¸€ä¸ªæ¥å£\nå½“ç„¶ä¹Ÿå¯ä»¥æœ¬åœ°ä¿å­˜åæ¯”è¾ƒç²—æš´é€šè¿‡çŠ¶æ€ä½å®ç°è¿œç¨‹æ¥å£è°ƒç”¨çš„è¡¥å¿ï¼Œé€šè¿‡Jobè¡¥å¿å¤±è´¥çš„æ¥å£è°ƒç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620715889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291478,"user_name":"if...else...","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1620301610,"is_pvip":false,"replies":[{"id":"105635","content":"æ„Ÿè°¢","user_name":"ä½œè€…å›å¤","comment_id":291478,"uid":"1001470","ip_address":"","utype":1,"ctime":1620439503,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":4,"score":"5915268906","product_id":100047701,"comment_content":"å¾ˆå®ç”¨","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519481,"discussion_content":"æ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620439503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278648,"user_name":"å›å­æ„å¦‚ä½•","can_delete":false,"product_type":"c1","uid":1096699,"ip_address":"","ucode":"B87E94BA680469","user_header":"https://static001.geekbang.org/account/avatar/00/10/bb/fb/7d02b84e.jpg","comment_is_top":false,"comment_ctime":1613176711,"is_pvip":true,"replies":[{"id":"101364","content":"æ–°å¹´å¿«ä¹","user_name":"ä½œè€…å›å¤","comment_id":278648,"uid":"1001470","ip_address":"","utype":1,"ctime":1613459485,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"5908144007","product_id":100047701,"comment_content":"ä»Šå¤©æœ¬è¯¾ç¬¬äºŒåˆ·ï¼Œæœ±è€å¸ˆæ–°å¹´å¿«ä¹","like_count":1,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515458,"discussion_content":"æ–°å¹´å¿«ä¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613459485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239032,"user_name":"æ˜µç§°è€Œå·²ï¼Œä½•å¿…æ‰§ç€","can_delete":false,"product_type":"c1","uid":1057139,"ip_address":"","ucode":"D8F0D534D7450F","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/73/2da558bb.jpg","comment_is_top":false,"comment_ctime":1596419203,"is_pvip":false,"replies":[{"id":"88297","content":"swaggerå¯ä»¥åŒæ­¥ä¿®æ”¹","user_name":"ä½œè€…å›å¤","comment_id":239032,"uid":"1001470","ip_address":"","utype":1,"ctime":1596427666,"user_name_real":"æœ±æ™”"}],"discussion_count":1,"race_medal":0,"score":"5891386499","product_id":100047701,"comment_content":"@APIVersion è¿™ç§çš„æ§åˆ¶ç‰ˆæœ¬ï¼Œswaggeræ€ä¹ˆåŠï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502946,"discussion_content":"swaggerå¯ä»¥åŒæ­¥ä¿®æ”¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596427666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233008,"user_name":"Asha","can_delete":false,"product_type":"c1","uid":1796527,"ip_address":"","ucode":"69F227707A9EDD","user_header":"https://static001.geekbang.org/account/avatar/00/1b/69/af/ceb4450c.jpg","comment_is_top":false,"comment_ctime":1594190863,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5889158159","product_id":100047701,"comment_content":"è€å¸ˆå’ŒåŒå­¦ä»¬ï¼Œå¯¹äºapiæ¥å£çš„å¼‚å¸¸æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨è€å¸ˆçš„@RestControllerAdviceå’Œ@ExceptionHandler å’ŒResponseBodyAdviceçš„ç»“åˆèŠ‚çœå¾ˆå¤šå·¥ä½œï¼Œé‚£å¯¹äºåŸºäºservlet filterçš„è¿™ç§é‡Œé¢çš„å¼‚å¸¸æ¯”å¦‚tokenè¿‡æœŸå¦‚ä½•å¤„ç†å‘¢ï¼Ÿå¤šè°¢ã€‚","like_count":1},{"had_liked":false,"id":216418,"user_name":"FelixFly","can_delete":false,"product_type":"c1","uid":1160461,"ip_address":"","ucode":"1D39A7C3D0E31F","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/0d/0e65dee6.jpg","comment_is_top":false,"comment_ctime":1589255606,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5884222902","product_id":100047701,"comment_content":"1. é”™è¯¯ä»£ç æ˜¯éœ€è¦çš„ï¼Œæ–¹ä¾¿å¿«é€Ÿå®šä½é—®é¢˜ä»¥åŠæœ‰å¯èƒ½éœ€è¦æ ¹æ®é”™è¯¯ç è¿›è¡Œç›¸åº”çš„ä¸šåŠ¡å¤„ç†ï¼Œè‹¥æ˜¯ç»™å‰ç«¯çš„è¯ï¼Œä¸€èˆ¬æœ‰ä¸ªé”™è¯¯ç±»å‹ï¼Œå‰ç«¯ç”¨äºæ€ä¹ˆå±•ç¤ºè¿™ä¸ªä¿¡æ¯ï¼Œè¿™ä¸ªé”™è¯¯ä¿¡æ¯å¼„ä¸ªç»Ÿä¸€çš„ç»´æŠ¤ç•Œé¢ï¼Œæ•°æ®æ”¾åˆ°ç¼“å­˜ã€‚<br>2. è¿™ä¸ªç»Ÿä¸€çš„é…ç½®æ˜¯ä¸ªå¥½çš„æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç”¨æœ€åŸå§‹çš„æ–¹æ³•ï¼Œåœ¨æ¯ä¸ªurlä¸Šè¿›è¡Œå®šä¹‰ï¼Œè¿™æ ·ä¼šå‡ºç°é…ç½®é”™è¯¯çš„å¯èƒ½","like_count":1},{"had_liked":false,"id":346603,"user_name":"è®¡ç®—æœºå°ç™½","can_delete":false,"product_type":"c1","uid":2175868,"ip_address":"","ucode":"CB09BD7DE559F2","user_header":"https://static001.geekbang.org/account/avatar/00/21/33/7c/53e0eecb.jpg","comment_is_top":false,"comment_ctime":1653275498,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653275498","product_id":100047701,"comment_content":"æƒ³é—®ä¸‹ä½œè€…  @RestControllerAdviceå®šä¹‰çš„ä»£ç å¥½åƒæ²¡å¸–å‡ºæ¥å‘¢ è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":246023,"user_name":"å°èƒ¡å­","can_delete":false,"product_type":"c1","uid":1018182,"ip_address":"","ucode":"79FEC6400D25DA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/46/0b7828a1.jpg","comment_is_top":false,"comment_ctime":1599137232,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1599137232","product_id":100047701,"comment_content":"ç‰ˆæœ¬æ§åˆ¶æœ€å¤§çš„é—®é¢˜åº”è¯¥æ˜¯å¦‚ä½•åšåˆ°ç‰ˆæœ¬å…¼å®¹ï¼Œä¸è®ºè·¯å¾„è¿˜æ˜¯è¯·æ±‚å¤´éƒ½éƒ½é‡åˆ°è¿™ä¸ªé—®é¢˜","like_count":0,"discussions":[{"author":{"id":1225974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b4/f6/e39d5af1.jpg","nickname":"é’±ç±³","note":"","ucode":"07AA44C6A40D34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391152,"discussion_content":"æ‰€ä»¥æ€ä¹ˆè§£å†³ç‰ˆæœ¬ä¸å…¼å®¹æ‰æ˜¯éº»çƒ¦äº‹ï¼Œå…¼å®¹ä»£ç é€»è¾‘ã€æ–°å†™ä»£ç ã€æ”¹è¡¨åŠ å­—æ®µã€æ–°åŠ è¡¨å†å²ä»£ç é€»è¾‘æ€ä¹ˆå¤„ç†ã€‚ç›¸å¯¹æ¥è¯´ï¼Œæ¥å£çš„ç‰ˆæœ¬å¤„ç†ç®—æ˜¯é”¦ä¸Šæ·»èŠ±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630317128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030842,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ba/ba/83de3488.jpg","nickname":"Carter","note":"","ucode":"1FD476D8F2BE27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311006,"discussion_content":"å°±æ˜¯ç‰ˆæœ¬ä¸å…¼å®¹æ‰éœ€è¦ç‰ˆæœ¬æ§åˆ¶å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602168783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241894,"user_name":"éšä¾¿çœ‹çœ‹","can_delete":false,"product_type":"c1","uid":2067951,"ip_address":"","ucode":"FFECD089472002","user_header":"https://static001.geekbang.org/account/avatar/00/1f/8d/ef/b03e910d.jpg","comment_is_top":false,"comment_ctime":1597490563,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597490563","product_id":100047701,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­æ·»åŠ APIVersionHandlerMappingï¼Œè°ƒç”¨æ¥å£çš„æ—¶å€™ï¼ŒæŠ¥é”™ï¼šjava.lang.IllegalStateException: getInputStream() has already been called for this requestã€‚é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªé‡å†™äº†HttpServletRequestWrapperçš„ç±»ï¼Œç”¨æ¥è§£å†³bodyä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨ApiVersionHandlerMappingï¼ŒControllerç±»ä¸ŠåŠ ä¸Š@APIVeriosnä¹‹åï¼Œå‘ç°ä¸èµ°é‡å†™çš„HttpServletRequestWrapperäº†ï¼Œç„¶åæŠ¥äº†ä¸Šé¢çš„é”™è¯¯ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å—","like_count":0},{"had_liked":false,"id":237321,"user_name":"æ˜Ÿå¤œ","can_delete":false,"product_type":"c1","uid":1128491,"ip_address":"","ucode":"3B46C09D994CEB","user_header":"https://static001.geekbang.org/account/avatar/00/11/38/2b/9db9406b.jpg","comment_is_top":false,"comment_ctime":1595778361,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595778361","product_id":100047701,"comment_content":"é”™è¯¯ç æ–¹é¢ï¼Œå…¶å®å¤§éƒ¨åˆ†é”™è¯¯æ˜¯æç¤ºæ€§é”™è¯¯ï¼Œéœ€è¦åç«¯æ”¶æ•›èµ·æ¥ï¼Œå°†æç¤ºä¿¡æ¯ä¼ ç»™å®¢æˆ·ç«¯å±•ç¤ºå³å¯ã€‚å°‘éƒ¨åˆ†çš„ä¾‹å¦‚ç”¨æˆ·ç™»å½•ï¼Œç”¨æˆ·é‡è¯•ï¼Œè·³è½¬è¦å’Œæç¤ºæ€§é”™è¯¯åŒºåˆ†ï¼Œè¯´ç™½äº†è¿˜æ˜¯åˆ†ç±»å¤„ç†ï¼Œå‡å°‘å®¢æˆ·ç«¯å¯¹äºé”™è¯¯ç çš„å…³æ³¨ã€‚","like_count":0},{"had_liked":false,"id":235115,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1594895890,"is_pvip":false,"replies":[{"id":"86775","content":"å¯ä»¥è®¿é—®åˆ°ï¼Œåˆä¸æ˜¯ThreadLocalçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1594897324,"ip_address":"","comment_id":235115,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1594895890","product_id":100047701,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¼‚æ­¥å¤„ç†çš„ç»“æœåº”è¯¥ä¸èƒ½ä¿å­˜åœ¨ç§æœ‰çš„HashMapé‡Œå§ï¼Ÿå› ä¸ºåç»­çš„çŠ¶æ€æŸ¥è¯¢æ¥å£æ˜¯æ–°çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œè®¿é—®ä¸åˆ°è¿™ä¸ªhashmapå•Šã€‚<br><br>private ConcurrentHashMap&lt;String, SyncQueryUploadTaskResponse&gt; downloadUrl","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501605,"discussion_content":"å¯ä»¥è®¿é—®åˆ°ï¼Œåˆä¸æ˜¯ThreadLocalçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594897324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1217874,"avatar":"https://static001.geekbang.org/account/avatar/00/12/95/52/ad190682.jpg","nickname":"Mr wind","note":"","ucode":"484F02D1962239","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315284,"discussion_content":"ç§æœ‰çš„å±æ€§ï¼Œä½†æ˜¯æä¾›äº†å…¬å…±çš„æŸ¥è¯¢æ–¹æ³•å•Šï¼Œå…„å¼Ÿï¼Œå¤–éƒ¨åˆä¸å¯èƒ½æ”¹å˜å¾—äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603260400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1051663,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","nickname":"mickey","note":"","ucode":"8B490C2DDE4010","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291646,"discussion_content":"å¦‚æœèƒ½è®¿é—®æ˜¯å†…å­˜æ³„æ¼å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594898116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214859,"user_name":"Wiggle Wiggle","can_delete":false,"product_type":"c1","uid":1036052,"ip_address":"","ucode":"EFE746551BA998","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cf/14/384258ba.jpg","comment_is_top":false,"comment_ctime":1588835624,"is_pvip":false,"replies":[{"id":"79555","content":"æ–­å¼€é“¾æ¥åï¼Œä¼šå‡ºå¼‚å¸¸ï¼Œæ¯”å¦‚å¯¹äºæ–‡ä»¶ä¸Šä¼ å¯èƒ½å°±æ˜¯<br><br>java.io.EOFException: Unexpected EOF read on the socket<br><br>åœ¨servletå±‚é¢å°±å·²ç»å‡ºé”™ï¼Œä¸ä¼šè¿›å…¥ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œä¹Ÿä¸ä¼šå­˜åœ¨åºŸæ–‡ä»¶ï¼Œå¯¹äºtomcatå¯ä»¥æŠŠæ–‡ä»¶ä¸´æ—¶ç›®å½•é…ç½®ä¸ºä¸€ä¸ªå›ºå®šç›®å½•ï¼Œå³ä¾¿å­˜åœ¨æ®‹ç•™æ–‡ä»¶ä¹Ÿå¯ä»¥å®šæœŸæ¸…é™¤","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1588843088,"ip_address":"","comment_id":214859,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588835624","product_id":100047701,"comment_content":"å¯¹äºåŒæ­¥æ¥å£ï¼Œä»¥æ–‡ä¸­çš„å›¾ç‰‡ä¸Šä¼ ä¸ºä¾‹ï¼Œå‡è®¾å®é™…ä¸Šä¼ éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå¦‚æœå‰ç«¯ç­‰å¾…ä¸€å®šæ—¶é—´åæ–­å¼€è¿æ¥ï¼ˆæƒ³å–æ¶ˆä¸Šä¼ ï¼‰ï¼Œé‚£ä¹ˆåç«¯å¦‚ä½•å¤„ç†æ¯”è¾ƒå¥½ï¼Ÿåœ¨ spring æ¡†æ¶ä¸‹å¦‚ä½•æ„ŸçŸ¥å‰ç«¯æ–­å¼€äº†è¿æ¥ï¼Ÿå¦‚ä½•é¿å…ä¸€æ¡åºŸæ•°æ®ä¸Šä¼ åˆ°æœåŠ¡å™¨å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494222,"discussion_content":"æ–­å¼€é“¾æ¥åï¼Œä¼šå‡ºå¼‚å¸¸ï¼Œæ¯”å¦‚å¯¹äºæ–‡ä»¶ä¸Šä¼ å¯èƒ½å°±æ˜¯\n\njava.io.EOFException: Unexpected EOF read on the socket\n\nåœ¨servletå±‚é¢å°±å·²ç»å‡ºé”™ï¼Œä¸ä¼šè¿›å…¥ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œä¹Ÿä¸ä¼šå­˜åœ¨åºŸæ–‡ä»¶ï¼Œå¯¹äºtomcatå¯ä»¥æŠŠæ–‡ä»¶ä¸´æ—¶ç›®å½•é…ç½®ä¸ºä¸€ä¸ªå›ºå®šç›®å½•ï¼Œå³ä¾¿å­˜åœ¨æ®‹ç•™æ–‡ä»¶ä¹Ÿå¯ä»¥å®šæœŸæ¸…é™¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588843088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214805,"user_name":"æ®¿å°äºŒ","can_delete":false,"product_type":"c1","uid":1284986,"ip_address":"","ucode":"E979673B257C24","user_header":"https://static001.geekbang.org/account/avatar/00/13/9b/7a/58327b6d.jpg","comment_is_top":false,"comment_ctime":1588822220,"is_pvip":false,"replies":[{"id":"79523","content":"æ–°è€æ¥å£æ€»æœ‰å…¬ç”¨é€»è¾‘çš„å§ï¼ŒæŠŠå…¶ä¸­é‡å¤çš„éƒ¨åˆ†æå–å‡ºæ¥","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™”","uid":"1001470","ctime":1588826908,"ip_address":"","comment_id":214805,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588822220","product_id":100047701,"comment_content":"è€å¸ˆ ä½ å¥½,é—®ä¸€ä¸‹,é’ˆå¯¹éå¼ºåˆ¶å‡çº§æ—¶,ä¸ºäº†å…¼å®¹è€æ¥å£,åªèƒ½å¤åˆ¶ä¸€ä»½,è¿™ç±»ä»£ç å¤ªé‡å¤äº†,æœ‰æ²¡æœ‰æ¯”è¾ƒä¼˜åŒ–çš„è§£å†³æ–¹æ¡ˆ","like_count":0,"discussions":[{"author":{"id":1001470,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","nickname":"æœ±æ™”","note":"","ucode":"0B7F0BADE6AAB8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494205,"discussion_content":"æ–°è€æ¥å£æ€»æœ‰å…¬ç”¨é€»è¾‘çš„å§ï¼ŒæŠŠå…¶ä¸­é‡å¤çš„éƒ¨åˆ†æå–å‡ºæ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588826908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214378,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1588733843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588733843","product_id":100047701,"comment_content":"è°¢è°¢è€å¸ˆåˆ†äº«æ¥å£è®¾è®¡æ€ç»´","like_count":0},{"had_liked":false,"id":214361,"user_name":"åˆ˜å¤§æ˜","can_delete":false,"product_type":"c1","uid":1035081,"ip_address":"","ucode":"83C063FBD9BF2B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/49/0b9ffc8e.jpg","comment_is_top":false,"comment_ctime":1588731006,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588731006","product_id":100047701,"comment_content":"ç›®å‰æˆ‘ä»¬ç³»ç»Ÿä¸­æ˜¯ç›´æ¥æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸æ¥å»åšå¼‚å¸¸æç¤ºä¿¡æ¯.ä¸­é€”æ”¹é€ è¿‡ä¸€ç‰ˆ,ç›´æ¥å°†codeç å’Œmessageæç¤ºä¿¡æ¯å†™åˆ°é…ç½®ç®¡ç†ä¸­å¿ƒé‡Œé¢.æˆ–è€…æ”¾åˆ°redisç¼“å­˜é‡Œé¢.<br>ä½œä¸ºæœåŠ¡ç«¯æˆ‘è§‰å¾—æœ‰å¿…è¦ç»™å‡ºcodeé”™è¯¯ç ,æ–¹ä¾¿é—®é¢˜æ’æŸ¥<br>","like_count":0}]}